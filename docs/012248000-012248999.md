# StackOverflow 问答 12248000-12248999

# ruby - 使用 Nokogiri 进行 CSS 选择

> ID：12248003
> 
> 赞同：4
> 
> 时间：2012-09-03T12:35:22.830
> 
> 标签：ruby, nokogiri

我正在尝试使用 Nokogiri 进行 HTML 抓取，但没有得到预期的结果。

在这个特定的 URL 上，我正在查看特定位置的交易，并希望在该页面上显示交易详细信息。`.small-deals-cont`是页面的 CSS 选择器，同样`.deal-title`是交易标题的 CSS 选择器。

```
require 'rubygems' 
require 'nokogiri'
require 'open-uri'

url = "http://www.snapdeal.com/local-deals-Chennai-all?category=all&HID=dealHeader_all"

doc =Nokogiri::HTML(open(url))

puts doc.at_css("title").text

doc.css(".small-deals-cont").each do |item|
  puts item.at_css(".deal-title")
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T11:22:28.040

Nokogiri 实际上适用于此，我们不需要为此使用机械化。这是它的代码：

```
require 'rubygems'
require 'nokogiri'
require 'open-uri'
require 'csv'

hotel= Array.new

cuisine=Array.new

url= "http://www.abcd.com"

1.upto(5) do |page_num|
  doc = Nokogiri::HTML(open("http://www.abcd.com/cit/restaurants?page=#{page_num}"))
  puts doc.at_css("title").text

  doc.css("article").each do |item|
    hotel << item.at_css("a").text
    cuisine << item.at_css(".tags").text
  end
end

@hotel=hotel
@cuisine=cuisine

(0..@hotel.length - 1).each do|index|

  puts "Hotel: #{@hotel[index]}"
  puts "Cuisine: #{@cuisine[index]}"
  puts " "

end

CSV.open("output2.csv", "wb") do |row|

  row << ["Hotel", "Cuisine"]

  (0..@hotel.length - 1).each do |index|
    row << [@hotel[index], @cuisine[index]]
  end

end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T14:48:12.080

为了防止抓取，他们可能会在初始页面加载（使用 javascript）之后加载内容。在这种情况下，Nokogiri 将无济于事，您需要一个更精致的系统 - 也许使用[mechanize](https://github.com/tenderlove/mechanize)。

但是，最后，您不应该刮擦。本网站的所有者已经制定了防止它的方法，您应该尊重这一点。检查 API。

# json - 将 JSON 字符串转换为 Perl/Moose 对象

> ID：12248006
> 
> 赞同：4
> 
> 时间：2012-09-03T12:35:33.533
> 
> 标签：json, perl, serialization, code-generation, moose

我有一个 JSON 字符串，例如

```
use JSON::XS qw(decode_json);
say Dumper( decode_json($json) ); 
```

将产生：

```
$VAR1 = {
    'Fname' => 'SomeFname',
    'Lname' => 'SomeLname',
    'Addr' => {
          'Street => 'Somestreet',
          'Zip' => '00000',
    },
}; 
```

我正在寻找一种简单的方法来将 JSON 字符串（或 perl 结构）“转换”为 Perl/Moose 对象，例如：

```
 package My;
 use Moose;
 has 'Fname' => (is => 'rw', isa => 'Str');
 has 'Lname' => (is => 'rw', isa => 'Str');
 has 'Addr' =>  (is => 'rw', isa => 'My::Addr'); 
```

和

```
 package My::Addr;
 use Moose;
 has 'Street' => (is => 'rw', isa => 'Str');
 has 'Zip' => (is => 'rw', isa => 'Str'); 
```

问题有两个部分：

1.  基于 JSON 字符串定义 Moose 类层次结构（一次）
2.  使用 JSON 中的真实值初始化对象实例（对于每个 JSON）

我对 Moose 不是很熟练，所以需要一些链接来解决这个特定问题。

（Moose 很大——所以阅读CPAN 中的*所有*内容肯定会有所帮助，但一开始就太多了。因此，我正在寻找在现实世界问题中逐步学习的方法——就像上面一样）。

主要问题是：

*   是否可以从数据结构生成 Moose 类定义（perl 源）？存在这样的CPAN模块吗？
*   当我得到类层次结构时（例如，如果这里没有任何帮助，我可以手动编写它们），从 JSON 创建（初始化）它们的实例的最简单方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T20:55:22.007

> 是否可以从数据结构生成 Moose 类定义（perl 源）？存在这样的CPAN模块吗？

是的。但是，您如何做到这一点将在很大程度上取决于您希望完成的任务。最简单的方法是在基于 JSON 的内存中构建属性。例如，您可以在运行时从 JSON 文件中实例化元类对象，如下所示：

```
sub infer_class_from_hash {
    my ($input) = @_;

    # Makes for ugly class names, but does the job
    my $meta = Moose::Meta::Class->create_anon_class;

    for my $key (keys %$input) {
        my $value = $input->{$key};

        my $type;
        my $coerce = 0;

        # Handle nested objects in the JSON as Moose objects
        if (ref $value eq 'HASH') {
            my $inner_meta = infer_class_from_hash($value);
            $type = $meta->name;

            # We provide an automatic HASH -> Class coercion
            $coerce = 1;
        }

        # Assume arrays are always of scalars, could be extended to handle objects
        elsif (ref $value eq 'ARRAY') {
            $type = 'ArrayRef',
        }

        # Assume anything else is string-ish
        else {
            $type = 'Str',
        }

        $meta->add_attribute($key =>
            is => 'rw',
            isa => $type,
            coerce => $coerce,
        );
    }

    # Create a coercion that makes instantiating from the JSON tree dead simple
    use Moose::Util::TypeConstraints;
    coerce $meta->name => from 'HashRef' => via { $meta->name->new($_) };
    no Moose::Util::TypeConstraints;

    return $meta;
} 
```

所有这一切甚至还没有开始进入你可以做的事情。您可以应用角色、自定义基类、添加方法等。但是，这是动态构建 Moose 类的基础。

如果你想要一个代码生成器，将实际的 Moose 类输出为可以构建一次然后加载的文件，那么你可以做任何你想做的事情。我只是编写一个与上面类似的程序，但输出一组`.pm`文件，其中包含自动生成的 Moose 类定义。

> 当我得到类层次结构时（例如，如果这里没有任何帮助，我可以手动编写它们），从 JSON 创建（初始化）它们的实例的最简单方法是什么？

```
use JSON qw( from_json );
my $hash = from_json("...");
my $meta = infer_class_from_hash($hash);

my $obj = $meta->name->new($hash); 
```

The key here is how we use Moose type coercion to automatically convert the JSON objects read in into Moose class instances. If you have more than one serialization scheme or want to use type constraints in some other way, you could setup a base class for all of these (in the call to `create_anon_class`) that provided `to_json`/`from_json` methods to handle the case of nested objects in the JSON input.

# python - 有视频或图片的 Jinja2/Django 扩展吗？

> ID：12248014
> 
> 赞同：2
> 
> 时间：2012-09-03T12:36:00.723
> 
> 标签：python, django, jinja2, youtube-javascript-api

我正在建立一个网站，我想在其中嵌入 Youtube 和其他视频。同样，它还将包含来自不同网站的图片。我很好奇是否有任何 Jinja2/Django 扩展可以在网站中嵌入图片/视频？或任何处理相同的库。

这是问题[video-embedding-from-any-video-sharing的后续问题](https://stackoverflow.com/questions/5150692/video-embedding-from-any-video-sharing)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:11:27.270

您可能想看看[micawber](http://micawber.readthedocs.org)，因为它是一个专门设计用于将外部丰富内容导入 Python 代码的包。它有一个不错的[Django 集成](http://micawber.readthedocs.org/en/latest/django.html)模块。

# ruby-on-rails - Ruby on Rails I18n 插值

> ID：12248019
> 
> 赞同：5
> 
> 时间：2012-09-03T12:36:13.217
> 
> 标签：ruby-on-rails, ruby, validation, internationalization, range

每个人！

我对我的 :username 字段有一个小的验证，它应该是 4 到 30 个字符。我写了一个验证：`:length => { :within => 4..30, :message => I18n.t('activerecord.errors.range')`- 我想为所有类型的错误显示一条错误消息（不喜欢，too_long 或 too_short），但这里有一个问题 - 我可以将最小值和最大值都传递给翻译，有类似的东西：*用户名应介于 4 到 30 个字符之间*。目前我有：`range: "should be between %{count} and %{count} characters"`，这显然不起作用（只是为了检查）。

是否可以从范围中获取这些值？

谢谢大家的指教！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T12:46:19.670

您可以将自定义变量传递给 I18n 翻译方法（或其简写 - t）：

```
I18n.t('activerecord.errors.range', :min => 4, :max => 30) 
```

然后你可以在你的字符串模板中使用 %{min} 和 %{max}。

它不会自动从范围中取出它，但这是我能想到的最接近的。

# php - Wordpress 为具有相同选定主题的插件自定义 php 页面设置主题

> ID：12248022
> 
> 赞同：1
> 
> 时间：2012-09-03T12:36:22.080
> 
> 标签：php, wordpress, plugins, theming

我正在编写一个插件，它是商家服务器的网关。该插件由短代码激活，然后显示确认页面。确认页面会将用户带到银行，然后返回到插件的 OK 或 KO 页面。

这两个页面位于插件文件夹中，我希望它们的外观与博客相似（几乎用于页眉和页脚）。

我不能调用 get_header 或 get_footer，因为它们不包括在内。

我的问题有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:42:33.190

在你的文件中试试这个，让我知道：

```
<?
include_once('../../../wp-load.php');
get_header() ?> 
```

# c++ - Boost Regex 中的命名子表达式错误

> ID：12248025
> 
> 赞同：0
> 
> 时间：2012-09-03T12:36:36.820
> 
> 标签：c++, regex, boost, boost-regex

我正在尝试使用命名子表达式来替换输入字符串中的多个模式，使用 boost::regex_replace 和命名子表达式。

我使用以下代码：

```
std::string s="Sun Fun Gun Tic Tac Toe ;$!";
boost::regex expr("(?<from1>.un)|(?<from2>[:;!])"); //Throws the error
std::string fmt("(?'from1'nm)(?'from2'sp)");
std::string s2 = boost::regex_replace(s,expr,fmt,boost::match_default|boost::format_all);
std::cout<<s2<<std::endl; 
```

但是，当运行 thos 会引发以下错误：

```
terminate called after throwing an instance of 'boost::regex_error'
what():  Invalid preceding regular expression
Aborted 
```

请指导我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:40:17.507

不知道 Boost，但是`std::regex`（在 TR1 和 C++11 中），它基于 Boost，不支持命名子表达式。

# android - 活动在警报解除之前关闭

> ID：12248028
> 
> 赞同：0
> 
> 时间：2012-09-03T12:36:50.707
> 
> 标签：android

在下面给出的代码中，我收到错误“活动在 Alertdialog 关闭之前关闭并给出 Activity Leaked 窗口异常”，并且我在 onProgressUpdate 的 alert.show 中收到异常。解决方案是什么？

```
 String values[] = { Login.uname, Login.pass };
                    new Communicator().execute(values);

    class Communicator extends AsyncTask<String, String, String> 
        {
        int prog = 0;

        @Override
        protected String doInBackground(String... params) {
            String response = null;
            try {
                if(Login.uname != null && Login.pass != null){
                    sync(Login.uname, Login.pass);
                }else if(SplashScreen.user != null && SplashScreen.pas != null){
                    sync(SplashScreen.user, SplashScreen.pas);
                }
                if("ok".equalsIgnoreCase(status))
                {
//                  else{
                    if(db != null)
                    {
                        if (Login.uname != null) {
                            usernam = Login.uname;
                        } else if (SplashScreen.user != null) {
                            usernam = SplashScreen.user;
                        }
                        Cursor cursor = db.getAllMixes(SplashScreen.user);
                        if(cursor!=null && cursor.getCount() > 0)
                        {
                            Log.e(">><<", ">>cursor.getCount()<<"+cursor.getCount());
                        }
                    }
                    count ++;
//                  }
                }
                totalsize = 0;
                for(int i=0; i<list.size(); i++)
                {
                    totalsize += Integer.parseInt(cont.get(i).getSize()); 
                }

            } catch (Exception e) {
                Log.e("Data.LOG", e.getMessage(), e);

            } finally {
            }
            return response;
        }

        @Override
        protected void onPreExecute() {
            prog = 0;
            super.onPreExecute();
        }

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);

            if ("ok".equalsIgnoreCase(status)) 
            {
                sizekb=0;
                textsync.setText("Syncing mix "+1+"/"+cont.size());
                if(cont.size() == 0){
                    progressBar2.setVisibility(View.INVISIBLE);
                    progress.setProgress(0);
                    textsync.setText("No Mixes on Server");
                    alertdial =new AlertDialog.Builder(NeliteMusicActivity.this).create();
                    alertdial.setTitle(R.string.set4Play);
                    alertdial.setMessage(getString(R.string.noMixes));
                    alertdial.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
                    alertdial.setButton(getString(R.string.ok), 
                            new DialogInterface.OnClickListener() 
                    {
                          public void onClick(DialogInterface dialog, int which) {
                              alertdial.dismiss();
                              animatedStartActivity();
                        }
                        });
                    alertdial.setCanceledOnTouchOutside(false);
                    alertdial.show();
                }
            }if("tomany".equalsIgnoreCase(status))
            {
                progress.setVisibility(View.INVISIBLE);
                progressBar2.setVisibility(View.INVISIBLE);
                textsync.setVisibility(View.INVISIBLE);
                AlertDialog alert =new AlertDialog.Builder(NeliteMusicActivity.this).create();
                alert.setTitle(R.string.set4Play);
                alert.setMessage(getString(R.string.twoDevice));
                alert.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
                alert.setButton(getString(R.string.ok), new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        animatedStartActivity();
                    }
                });
                alert.setCanceledOnTouchOutside(false);
                alert.show();
            }
            if("fail".equalsIgnoreCase(status))
            {
                progress.setVisibility(View.INVISIBLE);
                progressBar2.setVisibility(View.INVISIBLE);
                textsync.setVisibility(View.INVISIBLE);
                AlertDialog alert =new AlertDialog.Builder(NeliteMusicActivity.this).create();
                alert.setTitle(R.string.set4Play);
                alert.setMessage(getString(R.string.connectionerror));
                alert.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
                alert.setButton(getString(R.string.ok), new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        animatedStartActivity();
                        return;
                    }
                });
                alert.setCanceledOnTouchOutside(false);
                alert.show();
            }
        }

        @Override
        protected void onProgressUpdate(String... values) {
            super.onProgressUpdate(values);
            int a = 0;
            if(!isChange){
                a=messag;
                progress.setProgress(a);
                textsync.setText("Syncing mix "+c+"/"+list.size());
            }else{
                progressBar2.setVisibility(View.INVISIBLE);
                progress.setProgress(0);
                textsync.setText("Syncing interrupted");
            }
            if(progress.getMax()<=a)
            {
                        if (isOnline()) 
                        {
                            if(NeliteMusicActivity.alertShow==true){
                            final AlertDialog alert =new AlertDialog.Builder(NeliteMusicActivity.this).create();
                            alert.setTitle(R.string.set4Play);
                            alert.setMessage(getString(R.string.updatedMix));
                            alert.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
                            alert.setButton(getString(R.string.ok), 
                                    new DialogInterface.OnClickListener() 
                            {
                                  public void onClick(DialogInterface dialog, int which) {
                                      alert.dismiss();
                                      animatedStartActivity();
                                }
                                });
                            alert.setCanceledOnTouchOutside(false);
                            if((alert1 ==null || !alert1.isShowing()) && !alert.isShowing())
                            alert.show();
                            }
                        }
                    if (!isOnline()) {
                        if(NeliteMusicActivity.alertShow==true){
                        final AlertDialog alert =new AlertDialog.Builder(NeliteMusicActivity.this).create();
                        alert.setTitle(R.string.set4Play);
                        alert.setMessage(getString(R.string.connectionerror));
                        alert.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
                        alert.setButton(getString(R.string.ok), new DialogInterface.OnClickListener() {
                              public void onClick(DialogInterface dialog, int which) {
                                  alert.dismiss();
                                  animatedStartActivity();
                            } 
                            }); 
                        alert.setCanceledOnTouchOutside(false);
                        if(!alert.isShowing())
                        alert.show();
                        }
                    }
            }
        }
    } 
```

日志猫：

```
12-04 17:50:27.390: E/WindowManager(8190): Activity com.nelitemusic.NeliteMusicActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40a2cfb8 that was originally added here
12-04 17:50:27.390: E/WindowManager(8190): android.view.WindowLeaked: Activity com.nelitemusic.NeliteMusicActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40a2cfb8 that was originally added here
12-04 17:50:27.390: E/WindowManager(8190):  at android.view.ViewRoot.<init>(ViewRoot.java:291)
12-04 17:50:27.390: E/WindowManager(8190):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:249)
12-04 17:50:27.390: E/WindowManager(8190):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:193)
12-04 17:50:27.390: E/WindowManager(8190):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:118)
12-04 17:50:27.390: E/WindowManager(8190):  at android.view.Window$LocalWindowManager.addView(Window.java:532)
12-04 17:50:27.390: E/WindowManager(8190):  at android.app.Dialog.show(Dialog.java:269)
12-04 17:50:27.390: E/WindowManager(8190):  at com.nelitemusic.NeliteMusicActivity$Communicator.onProgressUpdate(NeliteMusicActivity.java:520)
12-04 17:50:27.390: E/WindowManager(8190):  at com.nelitemusic.NeliteMusicActivity$Communicator.onProgressUpdate(NeliteMusicActivity.java:1)
12-04 17:50:27.390: E/WindowManager(8190):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:606)
12-04 17:50:27.390: E/WindowManager(8190):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-04 17:50:27.390: E/WindowManager(8190):  at android.os.Looper.loop(Looper.java:132)
12-04 17:50:27.390: E/WindowManager(8190):  at android.app.ActivityThread.main(ActivityThread.java:4126)
12-04 17:50:27.390: E/WindowManager(8190):  at java.lang.reflect.Method.invokeNative(Native Method)
12-04 17:50:27.390: E/WindowManager(8190):  at java.lang.reflect.Method.invoke(Method.java:491)
12-04 17:50:27.390: E/WindowManager(8190):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
12-04 17:50:27.390: E/WindowManager(8190):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
12-04 17:50:27.390: E/WindowManager(8190):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:58:59.133

为了在 Activity 完成时关闭 AlertDialog，您可以做的一件事是覆盖 onDestroy 并在那里将其关闭。

```
@Override
public void onDestroy(){
    try{
        alert.dismiss();
    }
    catch(Exception e) {e.printStackTrace();}
    super.onDestroy()
} 
```

# android - GridView 项目位置

> ID：12248029
> 
> 赞同：0
> 
> 时间：2012-09-03T12:36:54.000
> 
> 标签：android, android-layout, android-gridview

我有 GridView：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:id="@+id/frag_books_grid_view_layout"
     android:orientation="vertical">
        <GridView
            android:cacheColorHint="@color/bg_default"
            android:listSelector="@drawable/list_selector_background"
            android:id="@+id/frag_books_grid_view"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:columnWidth="120px"
            android:gravity="center"
            android:horizontalSpacing="15dp"
            android:scrollbars="none"
            android:stretchMode="columnWidth"
            />
</LinearLayout> 
```

和单个项目（放置在此网格的单元格中）：

```
<ListView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:cacheColorHint="@color/bg_default"
    android:scrollbars="none"
    android:listSelector="@drawable/list_selector_background"
    android:layout_gravity="center_vertical|left"
    android:gravity="center_vertical|left"
    android:padding="15dp"
    android:id="@+id/frag_book_list_view"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:verticalSpacing="5dp"/> 
```

它的外观： http: [//i.imgur.com/rhZiu.png](http://i.imgur.com/rhZiu.png) 蓝色选择一切正常，但单元格的内容不在其中居中。这张图片解释了我想要的：http: [//i.imgur.com/OumWu.png](http://i.imgur.com/OumWu.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:16:18.623

除了不建议嵌套可滚动组件外，您还可以将列表视图的尺寸设置为`match_parent`. 所以不可能居中，因为它已经占据了所有可用空间。

如果要居中，首先要使 listView 更小（设置固定大小）。然后在容器上使用gravity="center"。您还可以对容器应用统一的填充，这也会使 listView 看起来居中。

# php - 提交表单时，Javascript（JQuery）不会将内容填充到文本区域中

> ID：12248033
> 
> 赞同：-1
> 
> 时间：2012-09-03T12:36:57.410
> 
> 标签：php, javascript, markitup

> **可能重复：**
> [Textarea 内容有时不包含在 $_POST 数组中，但有时包含。](https://stackoverflow.com/questions/12240649/textarea-content-is-not-included-in-post-array-sometimes-but-is-at-other-time)

我有一个通过 POST 发送的表单，其中有一个 textarea。这是代码

```
<textarea name="content" id="default" class="admintableinput" cols="80" rows="20"></textarea> 
```

我使用 markItUp 插件进行文本编辑。当在 textarea 上使用插件时，它不会在 $_POST 数组中输入任何内容。

然后我尝试了一个 var_dump($_POST) 并在使用插件时得到了这个：

```
Array ( [title] => title [author] => author [summary] => summary [Category1] => 3 [image] => image [action] => Save Article ) 
```

当不使用插件时 var_dump 会产生：

```
Array ( [title] => title [author] => author [summary] => summary [content] => content [Category1] => 4 [image] => image [action] => Save Article ) 
```

因此，任何输入到 textarea 的内容都只会在没有插件的情况下提交。但我不知道为什么在 var_dump 中它甚至不知道那里有一个 textarea。

一定是 Javascript 问题，我使用的是 JQuery 库。

有没有人有什么建议？提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-03T12:48:18.047

我认为您的插件没有为您的 textarea 设置值。检查这个。

# iphone - 如何通过添加叠加来捕捉照片

> ID：12248035
> 
> 赞同：3
> 
> 时间：2012-09-03T12:37:08.180
> 
> 标签：iphone, camera, overlay-view

我尝试在拍摄照片时添加叠加层。我可以在预览中成功添加叠加，但是一旦我点击照片捕获按钮，叠加视图（大约 40 像素）将颠倒，我也尝试将图像保存在相册中，但保存的图像不包含叠加图像。

我附在下面，如果我错了，请指导我？

```
//In ViewDidLoad//
OverlayView *overlay = [[OverlayView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];

UIImagePickerController *picker = [[UIImagePickerController alloc] init];

picker.sourceType = UIImagePickerControllerSourceTypeCamera;

picker.cameraCaptureMode = UIImagePickerControllerCameraCaptureModePhoto;

[picker setDelegate:self];  
picker.showsCameraControls = YES;
picker.navigationBarHidden = YES;
picker.toolbarHidden = YES;

picker.wantsFullScreenLayout = YES;

picker.cameraViewTransform = CGAffineTransformScale(picker.cameraViewTransform, 1, 1.24299);

picker.cameraOverlayView = overlay;

[self presentModalViewController:picker animated:YES];  
[picker release];

- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
// Access the uncropped image from info dictionary
UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];

// Save image
UIImageWriteToSavedPhotosAlbum(image, self, @selector(image:didFinishSavingWithError:contextInfo:), nil);

}

- (void)image:(UIImage *)image didFinishSavingWithError:(NSError *)error contextInfo:(void *)contextInfo
{
    UIAlertView *alert;

// Unable to save the image  
if (error)
    alert = [[UIAlertView alloc] initWithTitle:@"Error" 
                                       message:@"Unable to save image to Photo Album." 
                                      delegate:self cancelButtonTitle:@"Ok" 
                             otherButtonTitles:nil];
else // All is well
    alert = [[UIAlertView alloc] initWithTitle:@"Success" 
                                       message:@"Image saved to Photo Album." 
                                      delegate:self cancelButtonTitle:@"Ok" 
                             otherButtonTitles:nil];

[alert show];
alert.delegate = self;
[alert release];
}

//In OverlayView.m file

- (id)initWithFrame:(CGRect)frame {
if ((self = [super initWithFrame:frame])) {
    // Clear the background of the overlay:
    self.opaque = NO;
    self.backgroundColor = [UIColor clearColor];

    // Load the image to show in the overlay:
    UIImage *overlayGraphic = [UIImage imageNamed:@"img3.png"];
    UIImageView *overlayGraphicView = [[UIImageView alloc] initWithImage:overlayGraphic];
    overlayGraphicView.frame = CGRectMake(0, 50, 320, 430);
    [self addSubview:overlayGraphicView];
    [overlayGraphicView release];

}
return self;
} 
```

提前感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T12:54:34.837

像这样拍摄照片后创建图像：

```
UIImage *capturedImage = [UIImage imageNamed:@"bottom.png"]; //Captured image
UIImage *overlayImage  = [UIImage imageNamed:@"top.png"]; //foverlayImage image

CGSize newSize = capturedImage.size
UIGraphicsBeginImageContext( newSize );

[capturedImage drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];

// Apply supplied opacity if applicable
[overlayImage drawInRect:CGRectMake(0,0,newSize.width,newSize.height) blendMode:kCGBlendModeNormal alpha:0.7];

UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext(); 
```

# mysql - mysql - 如何更新和替换忽略大小写

> ID：12248041
> 
> 赞同：3
> 
> 时间：2012-09-03T12:37:31.733
> 
> 标签：mysql, sql

如何更新列 - 不区分大小写？

如果我运行下面的查询，它会按预期返回 62 条记录：

```
select entity_id 
from field_data_body 
where body_value like '%mailto:iss.servicedesk@example.com%'; 
```

> 返回 62 条记录

我正在尝试更新这些记录，以便将`iss.servicedesk@example.com`其替换为`http://iss.servicedesk.example.com`使用以下查询：

```
update field_data_body
SET body_value = REPLACE(body_value,'%mailto:iss.servicedesk@example.com%',
                        'http://iss.servicedesk.example.com'); 
```

不幸的是，它只更新了 52 条记录，因为它正在运行区分大小写的查询，例如`Iss.Servicedesk@example.com`在上述查询中无法识别。

如何运行上述更新查询，但不区分大小写以获取我希望更新的所有表？

我已经更新了下面的查询 - 当我知道有需要更新的链接时，它运行但没有找到任何要更新的结果：

```
update `field_data_body` SET `body_value` = REPLACE(body_value,'%mailto:iss.servicedesk@example.com%','https://iss.servicedesk.example.com')
where LOWER(CONVERT( body_value USING latin1)) like '%mailto:iss.servicedesk@example.com%' 
```

关于我需要做些什么来修复它以使其正常运行有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T12:39:30.887

与查询一起使用`UPPER()`或`LOWER()`起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T12:56:36.607

仅供参考：LOWER 和 UPPER 不适用于 BINARY、VARBINARY 和 BLOB。如果您的字段属于这些类型之一，则需要使用 CONVERT 将字符串转换为非二进制字符串：

```
 LOWER(CONVERT(@str USING latin1)) 
```

# javascript - Javascript：替换冒号和逗号字符

> ID：12248042
> 
> 赞同：4
> 
> 时间：2012-09-03T12:37:35.093
> 
> 标签：javascript, string, replace

Javascript的相对新手并且有点坚持以下所以非常感谢一些帮助......

我有一个由类别和关键字列表组成的字符串，可能如下所示：

```
Category A:Keyword A, Category B:, Category C: Keyword B 
```

问题是在没有关键字时显示类别 - 我如何进行查找和替换以交换`:,`with just的实例`,`？

我已经使用以下内容在逗号后插入空格：

```
cats = cats.replace(/,/g,", "); 
```

但是用额外的冒号复制和修改似乎会破坏它......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T12:40:12.180

采用：

```
cats = cats.replace(/:\s*,/g,", "); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:42:22.420

我认为你应该使用数组：

```
var arr="Category A:Keyword A, Category B:, Category C:Keyword B".split(', ');
for(var i=0;i<arr.length;i++){
   arr[i]=arr[i].split(':');
} 
```

然后，`arr`变成`[["Category A", "Keyword A"], ["Category B", ""], ["Category C", "Keyword B"]]`

# objective-c - CGAffineTransformMakeRotation UIImageView

> ID：12248045
> 
> 赞同：1
> 
> 时间：2012-09-03T12:37:46.120
> 
> 标签：objective-c, uiimageview, cgaffinetransform, image-rotation

我有一个 UIImageView，我想在反时钟方向稍微旋转它。但是当我这样做时，旋转就起作用了。但是边缘不共享。具有像素化边缘。我该如何解决这个问题。请帮忙。

```
UIImageView *popupTop = [[UIImageView alloc] initWithFrame:CGRectMake(10, 54, 300, 15)];
popupTop.image = [UIImage imageNamed:@"pover_note.png"];
[self.view addSubview:popupTop];

popupTop.transform = CGAffineTransformMakeRotation(-0.04); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T09:36:54.173

在 info.plist 中添加一个 **带有边缘抗锯齿渲染**的键并将其值设置为 YES

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:32:06.730

如果您不想要潜在的性能影响或可能的其他副作用，`UIViewEdgeAntialiasing`那么最简单的方法是在图像周围制作透明像素的边框:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:20:50.140

您可以在 Info.plist 中设置一个键来启用边缘的抗锯齿：`UIViewEdgeAntialiasing`.

# magento-1.4 - Magento 1.4 安装

> ID：12248046
> 
> 赞同：0
> 
> 时间：2012-09-03T12:37:46.133
> 
> 标签：magento-1.4

![在此处输入图像描述](../Images/3e0990e69bc17088a72d82fd7b37f281.png)

我已经安装了 Magento 1.4 版。安装时出现附加图像错误

请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:29:04.260

这可能是您的 .htaccess 文件，也可能是 apache 重定向、虚拟主机问题、很多可能性，但最有可能的是 Magento 不喜欢 IP 地址。

在您的主机文件中添加类似这样的内容（linux、osx 和 windows 的位置不同）：

```
182.71.235.230    localhost.com 
```

比尝试再次运行它，但通过调用`http://localhost.com/billbeautyshop/`.

# python - 蟒蛇文本文件

> ID：12248047
> 
> 赞同：-2
> 
> 时间：2012-09-03T12:37:48.447
> 
> 标签：python

我有一个由 excel 文件制成的文本文件，在 excel 文件中，单元格 A2 的名称为“供应商 A”。当我导入文本文件并使用以下代码时：

```
filea = open ( "jag.txt").readlines()
lines =[x.split() for x in filea]
print lines [0][1] 
```

它只返回“供应商”而不是供应商 A，A 位于 [0][2] 行中。我如何导入它并让它识别完整的单词。因为如果将文本字段复制回 excel，它确实会正确复制它，因此 txt 文件 definitley 将它们识别为在一起。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T13:24:45.537

Excel 经常使用“制表符”作为分隔符，以“txt”格式保存。

所以你应该尝试这样的事情：

```
lines = []
with open('jag.txt') as f:
    lines = [ line.split('\t') for line in f.read().splitlines() ]
print(lines) 
```

应该得到这样的东西

```
[ ['A1', 'A2', ...], ['B1', 'B2'], ... ] 
```

为什么不只是“f.readlines()”？因为使用这个，你的最后一个单元格也将包含*回车*符（'\n'）。

为什么使用[with 语句](http://docs.python.org/reference/compound_stmts.html#with)？***with***最终会关闭文件，无论如何这是一个很好的选择。

*解析*文本文件的另一种方法可能是 python（包含）**csv**模块。使用[csv.reader](http://docs.python.org/library/csv.html#csv.reader)可以非常方便地解析字符分隔的文件/结构：

```
with open('jag.txt') as f: 
    lines = [ line for line in csv.reader(f, delimiter='\t') ] 
```

-科林-

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T12:42:01.983

这样做是因为`str.split()`在每个空格、制表符和换行符之间进行拆分。您可以将`str.split(',')`其用作替代方案，但实际上您确实希望将[csv](http://docs.python.org/library/csv.html) -module 用于此类任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:42:13.553

每行分隔的值是什么字符（空格、制表符、逗号等）？您当前的代码将在空白处拆分文本，`split()`不使用拆分字符。

# jquery - jquery小滚动条自定义css图像

> ID：12248049
> 
> 赞同：2
> 
> 时间：2012-09-03T12:37:51.580
> 
> 标签：jquery, css, scrollbar

我使用[微型滚动条](http://baijs.nl/tinyscrollbar/) 插件。`width=13px;`在最初，我们有任何带有和的滚动条缩略图`height=480px`。我将原始图像更改为`width=10px`and `height=480px`。现在我看到滚动条的顶部不完整并且被剪切了。什么问题。如何解决这个问题？！[不工作演示](http://jsfiddle.net/BBKING/Njgq8/)

使用自定义图像 10*480 ： ![在此处输入图像描述](../Images/00182f29ef3359a59bd2c5b5e34b7153.png)

原始图像 13*480 ： ![在此处输入图像描述](../Images/69e0fe53c5642253152e2722ee732b2a.png)

**编辑：** 用户[Sowmya](https://stackoverflow.com/a/12248205/1313483)对使用 CSS3 和边框半径方法解决此问题有任何想法。

是的，对。***这在除 IE6-8 之外***的主要浏览器中与此 css 一起使用：

```
border-radius: 20px; /* Standard */
-o-border-radius: 20px; /* Opera 10.x */
-moz-border-radius: 20px; /* Mozilla/Firefox */
-icab-border-radius: 20px; /* iCab */
-khtml-border-radius: 20px; /* KHTML/Konqueror */
-webkit-border-radius: 20px; /* Webkit/Safari/Chrome/etc… */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:48:09.280

您可以使用带有边框半径的背景颜色，而不是使用图像。[在此处](http://jsfiddle.net/Njgq8/2/)查看更新的[演示](http://jsfiddle.net/Njgq8/2/)

# apache - 如何记录第一个数据包的响应时间？

> ID：12248050
> 
> 赞同：1
> 
> 时间：2012-09-03T12:38:03.217
> 
> 标签：apache

我对 Apache 很陌生。我需要记录收到的第一个数据包的响应时间。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:50:19.777

编辑您的 apache 配置并尝试包含以下行

```
# Define logfile format used for response time analysis
LogFormat "\"%{%Y-%m-%d %H:%M:%S}t\" %V %m \"%U\" \"%q\" %{Content-Type}o %s %B %O %D" responsetime
CustomLog "/var/log/apache2/responsetime.log" responsetime 
```

有关日志机制的更多信息，请查看

[Apache 日志文件文档](http://httpd.apache.org/docs/current/mod/mod_log_config.html)

# android - 使用网络连接发送 UTF8 字符集

> ID：12248054
> 
> 赞同：0
> 
> 时间：2012-09-03T12:38:16.263
> 
> 标签：android, ios

我正在尝试使用非拉丁字符集为 Android 和 iOS 发送通知。

我注意到当我使用非拉丁字符集从 Android 向 iOS 发送消息时，消息在 iPhone 上显示为“????”，因为 iOS 和 Android 的 Java 服务器端是相同的，我认为问题是我如何发送来自 Android 手机的请求，从 iOS 到 iOS 的通知消息工作正常。

下面是我用来打开网络连接和发送请​​求的代码，请告诉我是否可以。

```
byte[] bytes = body.getBytes(/*"UTF-16"*//*"ISO-8859-1"*/"UTF-8");

        HttpURLConnection conn = null;

        StringBuilder stringBuilder = new StringBuilder();

        try {

            conn = (HttpURLConnection) url.openConnection();//conn.setRequestProperty("Content-Type", "text/plain; charset=utf-8");
            conn.setDoOutput(true);
            conn.setUseCaches(false);
            conn.setFixedLengthStreamingMode(bytes.length);
            conn.setRequestMethod("POST");
            conn.setRequestProperty("Content-Type",
                    "application/x-www-form-urlencoded;charset=UTF-8");
            // post the request
            OutputStream out = conn.getOutputStream();
            out.write(bytes);
            out.close();
            // handle the response
            int status = conn.getResponseCode();
            if (status != 200) {
                Log.d("send message", "Coud Send Message, No Internet Connection Avilable.");
                throw new IOException("Post failed with error code " + status);
            }

            InputStream in = new BufferedInputStream(conn.getInputStream());
            // readStream(in);
            int b;
            while ((b = in.read()) != -1) {
                stringBuilder.append((char) b);
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:14:41.487

检查下面的代码它对我有用，我也有同样的问题，从服务器获取数据，

```
String is = null;
        try {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(URL);
            // httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs2));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs2,
                    HTTP.UTF_8));
            HttpResponse responce = httpclient.execute(httppost);
            HttpEntity entity = responce.getEntity();
            is = EntityUtils.toString(entity, "UTF-8");
        } catch (Exception e) {
            // TODO: handle exception
            Log.d("call http :", e.getMessage().toString());
            is = null;
        }
        return is; 
```

希望它可以帮助你。

# javascript - 将 js 对象更改为具有嵌套可观察数组的淘汰 js 视图模型

> ID：12248056
> 
> 赞同：0
> 
> 时间：2012-09-03T12:38:17.613
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

我从服务器获取特定的 JSON，并希望能够在嵌套数组（变体列表、变体和列）中添加/编辑/删除项目，但我不知道如何使用 knockout.js 来做到这一点。

我知道我需要将该 JSON 对象中的属性更改为 observables，并使用映射插件（如“绑定”下所示）进行此操作，并且所有值都已正确绑定 - 但如果我更改输入字段中的值，则模型/view 不会自动更新。

为什么？我错过了什么吗？

*那么，knockout.js 是否支持原生*嵌套数组而无需编写自己的代码？我怎样才能让这个 JSON 成为一个完整的工作 knockout.js 视图模型？

我使用当前可用的版本（淘汰赛：v2.1.0，映射插件：v2.3.2）。

**JSON**

```
{
    "VariantList": [
        {
            "ColumnCount": 1,
            "Variants": [
                {
                    "Title": "One column 100%",
                    "Columns": [
                        "100 %"
                    ]
                }
            ]
        },
        {
            "ColumnCount": 2,
            "Variants": [
                {
                    "Title": "Two columns 50%/50%",
                    "Columns": [
                        "50%",
                        "50%"
                    ]
                },
                {
                    "Title": "Two columns 75%/25%",
                    "Columns": [
                        "75%",
                        "25%"
                    ]
                }
            ]
        }
    ]
} 
```

**HTML**

```
<div data-bind="foreach: VariantList">
    <h2 data-bind="text: ColumnCount"></h2>
    <div data-bind="foreach: Variants">
        <h3 data-bind="text: Title"></h3>
        <table style="width:500px">
            <tr>
                <!-- ko foreach: Columns -->
                <th><input data-bind="value: $data"/></th>
                <!-- /ko -->
            </tr>
            <tr>
                <!-- ko foreach: Columns -->
                <td data-bind="style: {width:$data}, text:$data"></td>
                <!-- /ko -->
            </tr>
        </table>
   </div>
</div> 
```

**捆绑**

```
var viewModel;
$(function(){
   viewModel = ko.mapping.fromJS(myJson);
   ko.applyBindings(viewModel);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:57:38.763

问题是映射插件默认情况下不会将数组中的原始值转换为可观察值。即使它确实如此，当您绑定`$data`输入时，您将拥有它的展开值而不是可观察值。

完成这项工作的最简单方法是将数据结构化为：

```
var data = {
    "VariantList": [
        {
            "ColumnCount": 1,
            "Variants": [
                {
                    "Title": "One column 100%",
                    "Columns": [
                        { value: "100 %" }
                    ]
                }
            ]
        },
        {
            "ColumnCount": 2,
            "Variants": [
                {
                    "Title": "Two columns 50%/50%",
                    "Columns": [
                        { value: "50%" },
                        { value: "50%" }
                    ]
                },
                {
                    "Title": "Two columns 75%/25%",
                    "Columns": [
                        { value: "75%" },
                        { value: "25%" }
                    ]
                }
            ]
        }
    ]
}; 
```

`value`然后你会在你的循环中绑定反对`Columns`。这是一个示例：http: [//jsfiddle.net/rniemeyer/MCnMX/](http://jsfiddle.net/rniemeyer/MCnMX/)

如果您无法在此结构中提取数据，则可以考虑使用映射选项，将其转换为这样的结构。这是一个示例：http: [//jsfiddle.net/rniemeyer/sH3r2/](http://jsfiddle.net/rniemeyer/sH3r2/)

```
var mappingOptions = {
    Columns: {
        create: function(options) {
            return { value: ko.observable(options.data) };  
        }
    }        
};

var viewModel = ko.mapping.fromJS(data, mappingOptions); 
```

如果您需要以与收到的格式相同的格式将 JSON 发送回服务器，那么有几个选项。我有点喜欢这样做：[http](http://www.knockmeout.net/2011/04/controlling-how-object-is-converted-to.html) ://www.knockmeout.net/2011/04/controlling-how-object-is-converted-to.html 。这是您的数据示例：http: [//jsfiddle.net/rniemeyer/Eed2R/](http://jsfiddle.net/rniemeyer/Eed2R/)

```
var Value = function(val) {
    this.value = ko.observable(val);  
};

Value.prototype.toJSON = function() {
    return ko.utils.unwrapObservable(this.value);  
};

var mappingOptions = {
    Columns: {
        create: function(options) {
            return new Value(options.data);
        }
    }        
};

var viewModel = ko.mapping.fromJS(data, mappingOptions); 
```

# java - android java上下文解释

> ID：12248060
> 
> 赞同：1
> 
> 时间：2012-09-03T12:38:30.080
> 
> 标签：java, android, function, android-context

我有以下问题：

我必须使用 BT 打印机 SDK 中的以下功能：

```
 StarIOPort port = null;
    byte[] texttoprint = new byte[]{0x1b, 0x40, 0x1b,0x74,0x0D,(byte) 0x91,(byte) 0x92,(byte) 0x93,(byte) 0x94,(byte) 0x95,(byte) 0x96,(byte) 0x97,(byte) 0x98,(byte) 0x99,0x0A,0x0A,0x0A,0x0A,0x0A};

    try 
    {
        port = StarIOPort.getPort(portName, portSettings, 10000, context);
        port.writePort(textToPrint, 0, textToPrint.length);
        port.writePort(new byte[] {0x0a}, 0, 1);
    }
    catch (StarIOPortException e)
    {
        Builder dialog = new AlertDialog.Builder(context);
        dialog.setNegativeButton("Ok", null);
        AlertDialog alert = dialog.create();
        alert.setTitle("Failure");
        alert.setMessage("Failed to connect to printer");
        alert.show();
    } 
```

除了上下文，我什么都懂。

制造商提到

```
 * @param context - Activity for displaying messages to the user 
```

我如何使用上述功能，因为在我使用它的方式中，我没有收到任何错误，也没有收到任何警报消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:58:46.560

要显示警报（或任何其他 UI 组件），您需要 Activity 上下文，这是正确的。如果您目前没有任何活动正在运行，则无法显示警报。

但是您可以使用 Toast 类的静态方法显示[Toast](http://developer.android.com/reference/android/widget/Toast.html)：

```
public static Toast makeText(Context context, CharSequence text, int duration); 
```

将应用程序上下文作为第一个参数传递给它。

应用程序运行时始终可用应用程序上下文，即使此时没有运行 UI。您可以通过从上下文中调用**getApplicationContext()方法来获取它。**如果您根本没有任何上下文，则始终可以使用您的清单中 xml 标记下定义的YourAppClass ( *public class YourAppClass extends [Application )。](http://developer.android.com/reference/android/app/Application.html)*最常见的做法是让*YourAppClass*成为单例，并且它始终可以在应用程序中的任何代码点使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:57:00.490

Context是一个与Activity相关的类，当你必须显示时使用它，AlertDialog，Toast，获取系统服务......它与arquitecture MVC相关，解释的有点长。关于使用它，有两种方法。一种由 droidhot 解释，另一种方式是，例如 MainActivity.this，如果您在 Main Activity（MainActivity.java 文件）中使用 AlertDialog，那么 Main Activity 将是启动 Alert Dialog 的那个。如果它是从另一个不是 Activity 的类启动的，则必须将上下文作为参数（例如 new Class(MainActivity.this)）并在类内部，例如 public class( Context context) ant 参数 context 是您必须使用的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:58:26.077

Activity 是 Context 的子类，因此如果您打印代码是 Activity 类的一部分，则只需提供`this`所需的上下文即可满足 SDK 要求：

```
port = StarIOPort.getPort(portName, portSettings, 10000, this); 
```

然后

```
Builder dialog = new AlertDialog.Builder(this); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T13:00:55.277

上下文是您的活动。

```
private Context context;
context = this; 
```

这是一个完整的示例活动。

```
package com.example.helloworld;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.content.Context;
import <my_star_io_library>;

public class HelloWorld extends Activity 
{
    private Context context;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        //Save context
        context = this;

        StarIOPort port = null; 
        byte[] texttoprint = new byte[]{0x1b, 0x40, 0x1b,0x74,0x0D,(byte) 0x91,(byte) 0x92,(byte) 0x93,(byte) 0x94,(byte) 0x95,(byte) 0x96,(byte) 0x97,(byte) 0x98,(byte) 0x99,0x0A,0x0A,0x0A,0x0A,0x0A}; 

        try  
        { 
            port = StarIOPort.getPort(portName, portSettings, 10000, context); 
            port.writePort(textToPrint, 0, textToPrint.length); 
            port.writePort(new byte[] {0x0a}, 0, 1); 
        } 
        catch (StarIOPortException e) 
        { 
            Builder dialog = new AlertDialog.Builder(context); 
            dialog.setNegativeButton("Ok", null); 
            AlertDialog alert = dialog.create(); 
            alert.setTitle("Failure"); 
            alert.setMessage("Failed to connect to printer"); 
            alert.show(); 
        } 
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T13:59:14.827

我在这里发布了答案： [Android Phonegap Plugin different result on virtual and real device (Looper.prepare() ERROR)](https://stackoverflow.com/questions/12010115/android-phonegap-plugin-different-result-on-virtual-and-real-device-looper-prep/12407878#12407878)

我遇到了在某些设备上出现的相同问题。一个聪明的男孩托比成功地帮助了我。因此，下一个解决方案是：
- 在调用任何 StarIOPort 的方法之前，您必须检查 looper 是否存在：

```
if (Looper.myLooper() == null) {
    Looper.prepare();
} 
```

在你的情况下，它看起来像这样：

```
 try 
 {
    if (Looper.myLooper() == null) {
        Looper.prepare();
    }
    port = StarIOPort.getPort("BT:", "mini", 10000, null);
        try
        {
            Thread.sleep(500);
        }
        catch(InterruptedException e) {}

    port.writePort(texttoprint, 0, texttoprint.length);
        try
        {
            Thread.sleep(3000);
        }
        catch(InterruptedException e) {}

    resultType = "success";
 }
 catch (StarIOPortException e)
 {
     resultType = "error";
 } 
```

另一个建议：
相反

```
port = StarIOPort.getPort("BT:", "mini", 10000, null); 
```

只用

```
port = StarIOPort.getPort("BT:", "mini", 10000); 
```

在插件中你不会使用 Context

祝你好运。

# linux-kernel - Linux 函数 class_device_create 改成？

> ID：12248061
> 
> 赞同：2
> 
> 时间：2012-09-03T12:38:30.567
> 
> 标签：linux-kernel, driver, linux-device-driver, device-driver

我使用 2.6.32 内核。好像功能`class_device_create()`变了。

但是找不到对应的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:35:49.150

新名字是`device_create(...)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:21:47.780

该函数和所有 class_device 的东西都被删除了。

> 提交 c3b19ff06e0808555403491d61e8f0cbbb53e933
> 作者：Kay Sievers kay.sievers@vrfy.org
> 日期：2008 年 3 月 12 日星期三 20:47:35 +0100
> 
> 驱动核心：移除不再使用的“struct class_device”
> 
> 签字人：Kay Sievers kay.sievers@vrfy.org
> 签字人：Greg Kroah-Hartman gregkh@suse.de

# asp.net - ASP.Net 中正则表达式验证器的 mm/dd/yyyy 正则表达式无法验证

> ID：12248063
> 
> 赞同：0
> 
> 时间：2012-09-03T12:38:38.537
> 
> 标签：asp.net, regex

我知道这样的问题很多，感觉就像一个愚蠢的问题。由于我还没有找到对我关闭的解决方案，这就是我发布这个的原因。我的常规 exp 验证器中有一个正则表达式

```
<asp:RegularExpressionValidator ID="RegularExpressionValidator3" runat="server" ErrorMessage="Invalid date format. Valid dates are 12/31/2009 (mm/dd/yyyy). " ControlToValidate="txtDOB" Display="None" EnableTheming="False" EnableViewState="False" SetFocusOnError="True"  ValidationGroup="grpUser"
ValidationExpression="^(?=\d)(?:(?:31(?!.(?:0?[2469]|11))|(?:30|29)(?!.0?2)|29(?=.0?2.(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00)))(?:\x20|$))|(?:2[0-8]|1\d|0?[1-9]))([-./])(?:1[012]|0?[1-9])\1(?:1[6-9]|[2-9]\d)?\d\d(?:(?=\x20\d)\x20|$))?(((0?[1-9]|1[012])(:[0-5]\d){0,2}(\x20[AP]M))|([01]\d|2[0-3])(:[0-5]\d){1,2})?$"></asp:RegularExpressionValidator> 
```

它无法验证 mm/dd/yyyy 或 m/d/yyyy 格式的日期。我从 RegexLib 中获取了这个，作者说它对两种格式都有效。是 ^ 和 $ 创建问题。请帮忙。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T15:48:26.683

除非您有充分的理由不这样做，否则您应该使用`CompareValidator`

```
<asp:CompareValidator Operator="DataTypeCheck" Type="Date" ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:55:46.197

这是有效的

```
^(0?[1-9]|[12][0-9]|3[01])[\/](0?[1-9]|1[012])[\/]\d{4}$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-18T15:25:40.777

```
 <asp:RegularExpressionValidator 
     ValidationExpression="^([0-9]|0[1-9]|1[012])\/([0-9]|0[1-9]|[12][0-9]|3[01])\/(19|20)\d\d$"
     ControlToValidate="txtDOB" ErrorMessage="Invalid Format. Use MM/DD/YYYY" runat="server"
     ValidationGroup="Password" CssClass="colorred">
</asp:RegularExpressionValidator> 
```

这适用于具有有效日期的**m/d/yyyy**和**mm/dd/yyyy**

# android - 按钮 onClick 和 ListView onItemClick

> ID：12248067
> 
> 赞同：6
> 
> 时间：2012-09-03T12:38:51.750
> 
> 标签：android, button, android-listview, listener

我有一个 ListView 并用包含按钮的视图填充它。我将 onClick 侦听器设置为改编后的按钮，但是当我单击 ListView 的具体项目时 - 没有任何反应。因此，当我需要单击 listViewItem 时，我们可以说只调用按钮 onClick Listener。该怎么办？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-03T12:40:22.950

在 xml 文件中设置为您的按钮： `android:focusable="false"`

这是因为您的 Button 获得焦点。因此，现在您可以将 onClick 用于您的按钮，并将 onItemClick 用于 ListView 中的每一行，方法是告诉它 Button 不应该是可聚焦的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T11:54:33.947

最好只在列表视图项上执行 onlcick。您可以设置一些标志并在功能之间切换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:41:56.110

你需要像这样设置项目点击`listView.setOnItemClickListener();`

# dialog - 在 C#/MonoGame 应用程序中在 Windows 8 中输入文本

> ID：12248069
> 
> 赞同：5
> 
> 时间：2012-09-03T12:38:54.853
> 
> 标签：dialog, windows-8, windows-runtime, user-input, monogame

我正在使用出色的 MonoGame 在 C# 中为 Windows 8 编写 WinRT 游戏。我已经达到了用户获得高分并且需要输入他们的名字的部分。这给我带来的痛苦超出了我的预期，所以我想我会寻求帮助。

*   首先，是否有一个简单的“输入一些文本”函数可以调用，类似于 Windows Phone 7 中的 Guide.BeginShowKeyboardInput 或 VB 中古老的 InputBox 命令？我正在使用 Windows.UI.Popups.MessageDialog 来显示简单的对话框消息，但找不到任何类似的东西来向用户请求文本。

*   如果做不到这一点，有没有一种方法可以轻松地使用一小段 XAML 来呈现一个文本框供用户使用？

如果这些都不可能，我想我将不得不自己把这一切都连接起来......然后我会计划拦截击键并自己在屏幕上显示所需的文本。因为我没有物理平板电脑（只有模拟器），所以我很难从这个开始。我怎样才能：

*   检测设备是否有物理键盘，所以我知道是否显示屏幕键盘？

*   如果没有物理键盘，如何显示和隐藏屏幕键盘？

其中一些听起来应该很容易回答，但我还没有找到任何答案。

非常感谢！

亚当。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T22:02:02.690

嘿，在单人游戏中有这样一种方法可以做到这一点。有一个新模板允许您创建一个 XAML + 游戏游戏，它允许您使用您习惯的游戏类以及 xaml 位。这些链接应该可以帮助您入门。单人游戏团队摇滚。

那里列出了三种游戏类型。如果您获得了正确版本的 monogame，您现在想要 XAML + Game 有一个模板。

[https://github.com/mono/MonoGame/wiki/Windows-8-Project-Types](https://github.com/mono/MonoGame/wiki/Windows-8-Project-Types)

如果您需要更多帮助，请告诉我

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T00:37:35.903

这不是跨平台解决方案，但您可以使用 FlyOut 并将数据输入控件放在窗口上。FlyOut 指南在[此处](http://msdn.microsoft.com/en-us/library/windows/apps/hh465341.aspx)，文本输入指南的 UI 控件在[此处](http://msdn.microsoft.com/en-us/library/windows/apps/hh750315.aspx)。我还在 MonoGame 中使用 MessageDialog 向用户询问简单的问题（最多 3 个选项）或获得 Yes|No 响应。您可以[在此处](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.popups.messagedialog.aspx)获取该课程的详细信息。

# delphi - 如何使用 Delphi XE2 覆盖 WSDL 中的服务名称？

> ID：12248072
> 
> 赞同：4
> 
> 时间：2012-09-03T12:38:56.993
> 
> 标签：delphi, soap, wsdl

我正在使用 Delphi XE2 创建 web 服务应用程序。但是我需要根据外部规范定义服务名称。

默认情况下，Delphi 在服务名称中添加“服务”。是否可以覆盖它？

在 TWebServEx.GenerateWSDL 方法（Soap.WebServExp，第 261 行）中添加了“服务”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T13:47:29.270

您可以使用组件的[`OnAfterPublishingWSDL`](http://docwiki.embarcadero.com/Libraries/en/Soap.WSDLPub.TWSDLHTMLPublish.OnAfterPublishingWSDL)事件`TWSDLHTMLPublish`来更改服务名称：

```
procedure TMyWebModule.WSDLHTMLPublishAfterPublishingWSDL(const WSDLDoc: IWSDLDocument);
begin
  WSDLDoc.Definition.Attributes[SName] := 'MyServiceName';
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-04T06:48:14.553

非常抱歉，您无法通过程序接口改变库的这种行为。它被硬编码在 Soap.WSDLIntf ( `const SService = 'service';`) 单元中。如果您正在使用

```
 procedure TMyWebModule.WSDLHTMLPublishAfterPublishingWSDL(const WSDLDoc: IWSDLDocument);
    begin
       WSDLDoc.Definition.Attributes[SName] := 'MyServiceName';
    end; 
```

您在 XML 标头中获得标记`"name = MyServiceName"`，但导出服务名称仍将带有“服务”添加。

解决方案是重建 Delphi SOAP 库。

1.  更改文件夹 %DELPHIDIR%\Source\soap 的安全设置以允许域用户进行读/写。
2.  `SService = 'service';`在部分中的 Soap.WSDLIntf 行中查找`const`。
3.  将其替换为：

    ```
    {$IFDEF TRUNCATE_WSDL_EXTERNAL_NAME }
    SService = ''; 
    {$ELSE }
    "SService = 'service';
    {$ENDIF } 
    ```

4.  将定义名称 TRUNCATE_WSDL_EXTERNAL_NAME 添加到您的项目中。

5.  将 %DELPHIDIR%\Source\soap 中的所有文件添加到您的项目中。
6.  重建您的应用程序。如果您收到一些错误“E2010 不兼容的类型：'Boolean' 和 'Truncated'”，通常它可能发生在项目的 dpr 文件中，请添加前缀“system”。为布尔常量“true”或“false”，例如： `Result := system.True;`
7.  享受。

# android - 相对布局中多个图像的缩放控件

> ID：12248073
> 
> 赞同：2
> 
> 时间：2012-09-03T12:38:59.833
> 
> 标签：android, android-layout, android-relativelayout, zooming

我是 android 新手，我必须对现有应用程序进行改进。在这个应用程序中，我们有一个包含一组 15 个 imageView、1 个动态 imageView 和两个 textView 的相对布局，我必须对它们进行缩放控制以进行放大和缩小。最近几天我一直在阅读这个网站，试图在现有问题中找到答案，但没有任何结果，因为很多问题都没有答案。

我最大的问题是我不知道要使用哪个框架或布局。所有图像都放置在相对布局中并且工作良好，但我似乎没有让缩放控件与内容一起工作，而且我在不同的线程和问题中阅读了 RelativeLayout 根本不适用于缩放。我想也许使用 FrameLayout 但我认为它有同样的问题。

这是布局中的 XML 代码：

```
<RelativeLayout
        android:id="@+id/relativeLayoutMachine"
        android:layout_width="1000dp"
        android:layout_height="550dp"
        android:layout_above="@+id/relativeLayout1"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:background="@color/brm_back_1" >

        <ImageView
            android:id="@+id/imageView01"
            android:layout_width="82dp"
            android:layout_height="67dp"
            android:layout_marginLeft="409dp"
            android:layout_marginTop="83dp"
            android:contentDescription="@id/imageVeuwBandInloopKoker"
            android:src="@drawable/lva_bandinloopkoker" />

        <ImageView
            android:id="@+id/imageView02"
            android:layout_width="82dp"
            android:layout_height="67dp"
            android:layout_marginLeft="409dp"
            android:layout_marginTop="149dp"
            android:contentDescription="@id/imageViewTussenKoker"
            android:src="@drawable/lva_tussenkoker" />

        <ImageView
            android:id="@+id/imageView03"
            android:layout_width="172dp"
            android:layout_height="88dp"
            android:layout_marginLeft="401dp"
            android:layout_marginTop="216dp"
            android:contentDescription="@id/imageViewHMI_Graph_04_Flap"
            android:src="@drawable/lva_flap_open" />

        <ImageView
            android:id="@+id/imageView04"
            android:layout_width="281dp"
            android:layout_height="61dp"
            android:layout_marginLeft="401dp"
            android:layout_marginTop="303dp"
            android:contentDescription="@id/imageViewHMI_Graph_03_Ram"
            android:src="@drawable/lva_ram_retour" />

        <ImageView
            android:id="@+id/imageView05"
            android:layout_width="110dp"
            android:layout_height="47dp"
            android:layout_marginLeft="571dp"
            android:layout_marginTop="257dp"
            android:contentDescription="@id/imageViewHMI_Graph_01_Unit"
            android:src="@drawable/lva_unit" />

        <ImageView
            android:id="@+id/imageView06"
            android:layout_width="51dp"
            android:layout_height="54dp"
            android:layout_marginLeft="431dp"
            android:layout_marginTop="28dp"
            android:contentDescription="@id/imageViewHMI_Graph_15_Feeder"
            android:src="@drawable/lva_feeder_off" />

        <ImageView
            android:id="@+id/imageView07"
            android:layout_width="90dp"
            android:layout_height="40dp"
            android:layout_marginLeft="585dp"
            android:layout_marginTop="218dp"
            android:contentDescription="@id/imageViewHMI_Graph_02_Pump"
            android:src="@drawable/lva_main_motor_off" />

        <ImageView
            android:id="@+id/imageView08"
            android:layout_width="199dp"
            android:layout_height="124dp"
            android:layout_marginLeft="157dp"
            android:layout_marginTop="240dp"
            android:contentDescription="@id/imageViewChannel"
            android:src="@drawable/lva_channel" />

        <ImageView
            android:id="@+id/imageView09"
            android:layout_width="82dp"
            android:layout_height="166dp"
            android:layout_marginLeft="410dp"
            android:layout_marginTop="50dp"
            android:contentDescription="@id/imageViewHMI_Graph_013_Turbo"
            android:src="@drawable/lva_turbo_off"
            android:visibility="invisible" />

        <ImageView
            android:id="@+id/imageView10"
            android:layout_width="88dp"
            android:layout_height="67dp"
            android:layout_marginLeft="402dp"
            android:layout_marginTop="149dp"
            android:contentDescription="@id/imageViewHMI_Graph_012_Perforator"
            android:src="@drawable/lva_perforator_off"
            android:visibility="invisible" />

        <ImageView
            android:id="@+id/ImageView11"
            android:layout_width="88dp"
            android:layout_height="67dp"
            android:layout_marginLeft="408dp"
            android:layout_marginTop="149dp"
            android:contentDescription="@id/ImageViewHMI_Graph_10_Ruffler"
            android:src="@drawable/lva_ruffler_off"
            android:visibility="invisible" />

        <ImageView
            android:id="@+id/ImageView12"
            android:layout_width="174dp"
            android:layout_height="72dp"
            android:layout_marginLeft="362dp"
            android:layout_marginTop="146dp"
            android:contentDescription="@id/ImageViewHMI_Graph_11_Prepress"
            android:src="@drawable/lva_prepress_open"
            android:visibility="invisible" />

        <ImageView
            android:id="@+id/imageView13"
            android:layout_width="46dp"
            android:layout_height="68dp"
            android:layout_marginLeft="356dp"
            android:layout_marginTop="297dp"
            android:contentDescription="@id/imageViewHMI_Graph_07_Needles_Hor"
            android:src="@drawable/lva_needles_hor_none" />

        <ImageView
            android:id="@+id/imageView14"
            android:layout_width="44dp"
            android:layout_height="111dp"
            android:layout_marginLeft="356dp"
            android:layout_marginTop="187dp"
            android:contentDescription="@id/imageViewHMI_Graph_05_Needles_Vert"
            android:src="@drawable/lva_needles_vert_high" />

        <ImageView
            android:id="@+id/imageView15"
            android:layout_width="10dp"
            android:layout_height="24dp"
            android:layout_marginLeft="371dp"
            android:layout_marginTop="272dp"
            android:contentDescription="@id/imageViewHMI_Graph_06_Knotter_Vert"
            android:src="@drawable/lva_motor_off" />

        <FrameLayout
            android:id="@+id/frameLayoutBale"
            android:layout_width="140dp"
            android:layout_height="51dp"
            android:layout_marginLeft="19dp"
            android:layout_marginTop="307dp" >

            <ImageView
                android:id="@+id/imageViewAnimation"
                android:layout_width="140dp"
                android:layout_height="51dp"
                android:layout_gravity="right"
                android:contentDescription="@id/imageViewHMI_Graph_Bale"
                android:scaleType="fitXY"
                android:src="@drawable/baal" />

        </FrameLayout>

        <TextView
            android:id="@+id/textView01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="110dp"
            android:layout_marginTop="316dp"
            android:gravity="right"
            android:text="@string/percentage"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="@color/brm_back_2" />

        <TextView
            android:id="@+id/textView02"
            android:layout_width="142dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="22dp"
            android:layout_marginTop="271dp"
            android:gravity="center"
            android:text="@string/puntjes"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="@color/brm_back_2" />

        <ZoomControls
            android:id="@+id/zoomControls"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_alignRight="@+id/textCurrMaterial" />

    </RelativeLayout> 
```

这是我在 main 上用来声明缩放控件的代码：

```
btnZoomControls = (ZoomControls) findViewById(R.id.zoomControls);
btnZoomControls.setOnZoomInClickListener(new View.OnClickListener() {public void onClick(View v) {setZoomIn(); }});
btnZoomControls.setOnZoomOutClickListener(new View.OnClickListener() {public void onClick(View v) {setZoomOut(); }}); 
```

这是放大和缩小的功能

```
private void setZoomIn()
{
    m_ZoomController.getContainer();
    m_ZoomController.getZoomControls();
    m_ZoomController.setZoomInEnabled(true);
}

private void setZoomOut()
{
    m_ZoomController.getContainer();
    m_ZoomController.getZoomControls();
    m_ZoomController.setZoomOutEnabled(true);
} 
```

你们有没有和我一样的问题，你是如何找到解决方案的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:00:39.997

实际上，您有两种主要的缩放方式：

1) 在整个布局或特定视图上调用[setScaleX() 和 setScaleY()](http://developer.android.com/reference/android/view/View.html#setScaleX%28float%29)（从 API 11 开始）。根据我的经验，图像缩放效果很好，但某些版本上的文本会产生奇怪的行为（这种缩放在绘制过程中由视图组应用，因此速度非常快）。对于不是很大的布局，这种方式非常流畅和快速；

2）更改每个视图的布局参数（您可能需要在缩放期间为图像视图提供新图片）。这种方式不是那么快，但应该适用于几乎所有的 android 版本。

# c# - 使用 DropDownList 控件更新 GridView

> ID：12248076
> 
> 赞同：1
> 
> 时间：2012-09-03T12:39:12.937
> 
> 标签：c#, gridview, .net-3.5, asp.net-3.5

我的代码中有以下行：

```
cmd.Parameters.Add("@priority", SqlDbType.VarChar).Value = ((DropDownList)GridView1.Rows[e.RowIndex].Cells[4].Controls[0]).SelectedValue; 
```

但是当我运行它时，我收到以下错误：

```
Unable to cast object of type 'System.Web.UI.LiteralControl' to type 'System.Web.UI.WebControls.DropDownList'. 
```

知道为什么会这样吗？

* * *

GridView 的相关部分是这样的：

```
<asp:TemplateField HeaderText="Priority">
    <ItemTemplate>
        <asp:Label ID="Label1" runat="server" Text='<%# Bind("priority") %>'></asp:Label>
    </ItemTemplate>
    <EditItemTemplate>
        <asp:DropDownList ID="DropDownList1" runat="server" 
            SelectedValue='<%# Bind("priority") %>'>
            <asp:ListItem Value="0">Low</asp:ListItem>
            <asp:ListItem Value="1">Normal</asp:ListItem>
            <asp:ListItem Value="2">High</asp:ListItem>
        </asp:DropDownList>
    </EditItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:46:03.607

由于您`DropDownList`最有可能在 a 中`TemplateField`，因此您可以通过以下方式获得它的参考`FindControl("ID")`：

```
public void gv_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    GridView gv = (GridView)sender;
    GridViewRow row = gv.Rows[e.RowIndex];
    // assuming its ID is "DropDownList1"
    DropDownList ddl = (DropDownList)row.FindControl("DropDownList1"); 
    String selectedValue = ddl.SelectedValue; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:44:30.377

您必须`e.Item.FindControl`在 RowDataBound 中使用

```
var ddl = (DropDownList) e.Item.FindControl("YourId");
var value = ddl.SelectedValue; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T15:13:05.880

这会成功的

```
public void gv_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    string spacediv3 = ((DropDownList)gridviewname.Rows[e.RowIndex].Cells[location].FindControl("dropdownlit1")).SelectedItem.ToString();
} 
```

# visual-studio-2010 - 从按钮恢复图像

> ID：12248088
> 
> 赞同：0
> 
> 时间：2012-09-03T12:39:38.520
> 
> 标签：visual-studio-2010

如何从 Visual Basic 2010 Express/Visual Studio 2010 中的按钮（BackgroundImage 属性）恢复/提取图像？我找不到另存为按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:25:19.020

Visual Studio 2010/2008 中没有任何功能。您可以在选择资源窗口和绘画中使用 alt Print-Screen 来解决它。

# c# - Timeout expired。在操作完成之前超时时间已过

> ID：12248089
> 
> 赞同：0
> 
> 时间：2012-09-03T12:39:43.407
> 
> 标签：c#, mysql

我正在`C#`使用 `Visual Studio`和`MySql`。我的代码中有一个按钮，它有自己的方法。当它结束时，它会从`Class`. 我已经编辑`timeout`了命令和连接。此方法将日期插入到表中。我第二次在同一张表中插入日期，它读取最后一个 ID 并`"id"`增加 +1。日期第一次超过 20.000，第二次达到 40.000++。那是问题吗？

```
 public void PendenciaAssociado()
                {

            #region LeituraDosDados
            MySqlConnection Con = new MySqlConnection(ConfigurationManager.ConnectionStrings["strConexaoDestino"].ConnectionString);
            MySqlCommand Cmd = new MySqlCommand();
            Cmd.CommandTimeout = 1000;
            Cmd.CommandType = CommandType.Text;
            Cmd.Connection = Con;           
            string sql = "SELECT matricula,dt_nascimento,cpf,rg,celular,mail,profissao,dt_insercao,usr_insercao from Associados";
            Cmd.CommandText = sql;           
            Con.Open();
            MySqlDataReader dr = Cmd.ExecuteReader();            
            DataTable dt = new DataTable();
            dt.Load(dr);
            Con.Close();
            Con.Dispose();

            #endregion

            #region Variaveis
            int matricula, profissao;
            DateTime dt_nascimento, dt_insercao;
            string cpf, rg, celular, mail, usr_insercao, pendencia;
            #endregion

            foreach (DataRow row in dt.Rows)
            {

                matricula = Convert.ToInt32(row["matricula"]);
                dt_nascimento = Convert.ToDateTime(row["dt_nascimento"]);
                cpf = row["cpf"].ToString();
                rg = row["rg"].ToString();
                celular = row["celular"].ToString();
                mail = row["mail"].ToString();
                profissao = Convert.ToInt32(row["profissao"]);
                dt_insercao = Convert.ToDateTime(row["dt_insercao"]);
                usr_insercao = row["usr_insercao"].ToString();

                if (profissao == 0)
                {
                    pendencia = "Favor Verificar a Profissao do Associado";
                    InserePendencias(matricula, dt_nascimento, cpf, rg, celular, mail, profissao, dt_insercao, usr_insercao, pendencia);
                }
                if (dt_nascimento.ToString() == "01/01/1980 00:00:00")
                {
                    pendencia = "Favor Verificar a Data de Nascimento do Associado";
                    InserePendencias(matricula, dt_nascimento, cpf, rg, celular, mail, profissao, dt_insercao, usr_insercao, pendencia);
                }
                if (cpf == "00000000000")
                {
                    pendencia = "Favor Verificar o CPF do Associado";
                    InserePendencias(matricula, dt_nascimento, cpf, rg, celular, mail, profissao, dt_insercao, usr_insercao, pendencia);
                }
                if (rg == "0000000000")
                {
                    pendencia = "Favor Verificar o RG do Associado";
                    InserePendencias(matricula, dt_nascimento, cpf, rg, celular, mail, profissao, dt_insercao, usr_insercao, pendencia);
                }
                if (celular == "")
                {
                    pendencia = "Favor Verificar o Celular do Associado";
                    InserePendencias(matricula, dt_nascimento, cpf, rg, celular, mail, profissao, dt_insercao, usr_insercao, pendencia);
                }
                if (mail == "")
                {
                    pendencia = "Favor Verificar o Email do Associado";
                    InserePendencias(matricula, dt_nascimento, cpf, rg, celular, mail, profissao, dt_insercao, usr_insercao, pendencia);
                }
            }
        }

        int contador = 0, aux, aux2;
        public void InserePendencias(int matricula, DateTime data_nasci, string cpf, string rg, string celular, string email, int profissao, DateTime data_insercao, string usuario, string pendencia)
        {

            MySqlConnection con = new MySqlConnection(ConfigurationManager.ConnectionStrings["strConexaoDestino"].ConnectionString);
            MySqlCommand cmd = new MySqlCommand();
            cmd.Connection = con;
            cmd.CommandType = CommandType.Text;
            string seleciona = "SELECT MAX(codigo) as codigo FROM pendencias";
            cmd.CommandText = seleciona;
            con.Open();
            MySqlDataReader dr = cmd.ExecuteReader();
            con.Close();
            if (contador == 0)
            {
                contador++;
                aux2 = contador;
            }
            else if (contador != 0)
            {
                contador++;
                aux = contador;
            }

            cmd.Connection = con;                
            string query = "INSERT INTO  pendencias (codigo,matricula,pendencia,dt_insercao,usr_insercao) VALUES(" +
                           "@codigo,@matricula,@pendencia,@dt_insercao,@usr_insercao)";
            cmd.CommandText = query;
            cmd.Connection = con;
            cmd.Parameters.Add(new MySqlParameter("@codigo", MySqlDbType.Int32)).Value = contador;
            cmd.Parameters.Add(new MySqlParameter("@matricula", MySqlDbType.Int32)).Value = matricula;
            cmd.Parameters.Add(new MySqlParameter("@pendencia", MySqlDbType.VarChar)).Value = pendencia;
            cmd.Parameters.Add(new MySqlParameter("@dt_insercao", MySqlDbType.DateTime)).Value = data_nasci;
            cmd.Parameters.Add(new MySqlParameter("@usr_insercao", MySqlDbType.VarChar)).Value = usuario;
            con.Open();
            cmd.ExecuteNonQuery();
            con.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:58:12.050

好的 - 我没有发布作为答案，但我有太多话要发表评论。如果我得到答案，我可以编辑它。所以，这是一个很长的评论！

所以我看到的第一件事是：

```
 if (profissao == 0) 
        { 
            pendencia = "Favor Verificar a Profissao do Associado"; 
            InserePendencias(matricula, dt_nascimento, cpf, rg, celular, mail, profissao, dt_insercao, usr_insercao, pendencia); 
        } 
        if (dt_nascimento.ToString() == "01/01/1980 00:00:00") 
        { 
            pendencia = "Favor Verificar a Data de Nascimento do Associado"; 
            InserePendencias(matricula, dt_nascimento, cpf, rg, celular, mail, profissao, dt_insercao, usr_insercao, pendencia); 
        } 
        if (cpf == "00000000000") 
        { 
            pendencia = "Favor Verificar o CPF do Associado"; 
            InserePendencias(matricula, dt_nascimento, cpf, rg, celular, mail, profissao, dt_insercao, usr_insercao, pendencia); 
        } 
        if (rg == "0000000000") 
        { 
            pendencia = "Favor Verificar o RG do Associado"; 
            InserePendencias(matricula, dt_nascimento, cpf, rg, celular, mail, profissao, dt_insercao, usr_insercao, pendencia); 
        } 
        if (celular == "") 
        { 
            pendencia = "Favor Verificar o Celular do Associado"; 
            InserePendencias(matricula, dt_nascimento, cpf, rg, celular, mail, profissao, dt_insercao, usr_insercao, pendencia); 
        } 
        if (mail == "") 
        { 
            pendencia = "Favor Verificar o Email do Associado"; 
            InserePendencias(matricula, dt_nascimento, cpf, rg, celular, mail, profissao, dt_insercao, usr_insercao, pendencia); 
        } 
```

实际情况是，您想将 pendecia 设置为一个值，并调用完全相同的调用 .. 确实可以在那里使用一些代码简化。

每次运行它时，记录数都会增加一倍。所以第一次有 10 条，到最后有 20 条。所以下一次有 20 条，最后有 40 条……这是你真正想要什么？

如果您的前 10 个都需要运行此功能，则您不会通过更新它们来阻止它们第二次包含在内。因此，它不像您只评估添加的 10 行，而是评估所有 20 行，再次生成第二组 10 行 - 就像您第一次做的那样，以及之前添加的 10 中的任何新值。 ..有点像一种无限循环类型的行为，但插入到数据库中而不是仅仅使用值。

# c++ - 什么是 Windows RT（Metro 风格）的 SetThreadPriority 和 GetThreadPriority 的替代品？

> ID：12248093
> 
> 赞同：1
> 
> 时间：2012-09-03T12:39:54.540
> 
> 标签：c++, multithreading, visual-c++, microsoft-metro

我正在将 Windows 桌面应用程序移植到 Metro 风格应用程序。

我的桌面应用程序使用以下系统 API 函数：

**设置线程优先级**

**获取线程优先级**

这两个函数都在 windows 桌面应用程序的 processthreadsapi.h 中声明。这些函数与 Metro 风格应用程序不兼容。

这些功能是否可以替代 Metro 风格的应用程序？

# jquery - jQuery计时器可以在时间x，时间y，时间z上触发事件吗？

> ID：12248104
> 
> 赞同：2
> 
> 时间：2012-09-03T12:40:30.640
> 
> 标签：jquery, events, timer, triggers

目前我的 webapp 接收 websocket 数据来触发动作。

这会在页面重新加载时中断，因此我想要一个能够触发某个事件的客户端解决方案。

这个想法可能吗？

说你有

*   TimeX = 距 current_time 10 秒应开始触发 X
*   TimeY = 距 current_time 20 秒应开始触发 Y
*   TimeZ = 30 秒从 current_time 开始触发 Z

    1.  是否可以将这些存储在 html 中，并在秒数倒计时为零时执行一些倒计时触发器？
    2.  如果浏览器在倒计时 0 到 1 之间进行重定向，是否仍有可能触发事件，例如 2/3 故障转移时间？

我有适度的 jQuery 经验，很想听听一些关于此的反馈和想法。先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:47:50.447

您需要使用`setInterval()`来设置对函数的延迟调用。像这样的东西：

```
var trigger;
function myFunc(t) {
    switch (t) {
        case "Y": 
            callTriggerY();
            trigger = "Z";
            break;
        case "Z": 
            callTriggerZ();
            trigger = "X";
            break;
        default: 
            callTriggerX();
            trigger = "Y";
            break;
}

setInterval(function() { myFunc(trigger); }, 10000); // call on interval
$(window).unload(function() { // call on leaving/reloading page
    myFunc(trigger);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:50:59.817

到 1\. ：

是的，这是可能的。

JavaScript

```
$(function() {
    $('.timer').each(function(entity) {
        setTimeout(function(eval(entity.attr("data-timer-code"))), parseInt(entity.attr("data-timeout")));
    }
}); 
```

HTML

```
<div class="timer" data-timeout="12000" data-timer-code="asdf()"></div> 
```

我在那里做的是：我将特殊数据添加到一个 div 并在 JavaScript 代码中，我获取所有这些 div 并为每个 div 创建计时器。

到 2\. ：

遗憾的是，我不知道如何将其从页面上下文中传递出来并在再次加载页面时重新加载计时器。

# semantic-web - Google 是否在其任何技术或产品中实施语义网？

> ID：12248106
> 
> 赞同：4
> 
> 时间：2012-09-03T12:40:42.197
> 
> 标签：semantic-web

正如 TimBL 所说，语义网络是当前网络的突出和未来。那么有没有使用语义网络技术的谷歌产品？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T13:06:15.257

好吧，语义网是一个模糊的概念，是否应该将某种技术视为语义网的一部分并不总是很清楚。Google 在其产品中使用了许多可视为语义网技术的技术，例如：

*   [谷歌知识图谱](http://www.google.com/insidesearch/features/search/knowledge.html)
*   [谷歌丰富片段](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=99170)
*   [Freebase](http://www.freebase.com/)（几年前被谷歌收购）
*   [schema.org](http://schema.org/)（由 Google、Yahoo 和 Microsoft 开发）

Google 倾向于在一定程度上避免最初由 TimBL 的 W3C 开发的语义 Web 标准，而是开发自己的这些标准的更简单版本。

# java - Java/JavaFX2：动态 GUI，检测按下了哪个按钮，提取 id

> ID：12248107
> 
> 赞同：3
> 
> 时间：2012-09-03T12:40:53.297
> 
> 标签：java, listener, handler, javafx-2

我是 Java/JavaFX 的新手（我昨天晚上开始的）。我正在构建一个读取 MySQL 数据库的动态 GUI (crud)。

*   我设法在表格中显示数据并在每一行旁边添加一个按钮。
*   由于按钮的数量是可变的，我只想定义一个通用的事件处理程序。

问题是，每当我使用 event.getSource()（它是一个 ActionEvent）并显示它时，我都会得到类似“Button[id=0, styleClass=button].

问题 1：有什么办法可以将 id 放入变量中？我无法将其从对象中取出。

据我所知，我必须使用 id，因为我不能做这样的事情 "if(event.getSource() == somebutton) {...}" 因为每个生成的按钮都有相同的变量名。

现在，这是构建按钮的循环（在名为 make_buttons 的方法内）。n_buttons 是我要构建的按钮数。

```
for(int counter = 0; counter < n_buttons; counter++){
        String newtext = new String("btn"+counter);
        Button btn = new Button();
        btn.setText(newtext);
        btn.setId(Integer.toString(counter));
        btn.setOnAction(myHandler);
        grid.add(btn,0,counter);
    } 
```

请注意，我将按钮放在另一个网格窗格上。

在这部分之前，我有我的处理程序：

```
 final EventHandler<ActionEvent> myHandler = new EventHandler<ActionEvent>(){

    public void handle(final ActionEvent event) {
        Object new_output = event.getSource();
        System.out.println(new_output);
        event.consume();
        }
    }; 
```

问题 2：那么，在我的特定情况下，如何区分哪个按钮触发了事件？

我知道很多编程语言（Matlab、R、Python、C、Assembly 等……但我是个业余爱好者），但这是我第一次使用 GUI 元素（Web 语言和 ActionScript 3 除外） . 在 actionscript 中，我可以做一些类似 event.getCurrentTarget 的事情，并像对象本身一样使用它来读取 id、属性等。

我到处找，找不到任何东西（也许我的术语有点近似......）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T12:52:19.103

如果我正确理解您的问题，您可以使用以下代码简单地访问您处理方法中的单击按钮：

```
Object source = event.getSource();
if (source instanceof Button) { //should always be true in your example
    Button clickedBtn = (Button) source; // that's the button that was clicked
    System.out.println(clickedBtn.getId()); // prints the id of the button
} 
```

# sharepoint-2010 - SP2010 以编程方式将事件接收器附加到特定列表 - 为所有列表运行

> ID：12248108
> 
> 赞同：0
> 
> 时间：2012-09-03T12:40:57.727
> 
> 标签：sharepoint-2010, eventreceiver

我将事件接收器附加到单个列表（Web 范围）。但是 ER 会针对 Web 中的所有列表运行。这个[问题](https://stackoverflow.com/questions/4014020/how-can-i-add-event-receiver-only-for-list-with-specyfic-template-id)说部署 ER 的功能必须是 Web 范围。情况就是这样。

该功能以编程方式激活，绑定到 TLS 中列表的 ER。

```
newProjectWeb.Features.Add(new Guid("57e21870-6285-4e0a-b9a0-067f774492ae")); 
```

请在下面查看我的代码。我错过了更新还是什么？

提前感谢您的帮助。

```
public void AddEventReceiverToMemberList()
    {
        try
        {
            _clsLists.AddEventReceiverToList(Web, ProjectMemberList.LIST_INTERNAL_NAME, typeof(SCMUProjectMemberList), SPEventReceiverType.ItemAdded);
            _clsLists.AddEventReceiverToList(Web, ProjectMemberList.LIST_INTERNAL_NAME, typeof(SCMUProjectMemberList), SPEventReceiverType.ItemDeleting);
            _clsLists.AddEventReceiverToList(Web, ProjectMemberList.LIST_INTERNAL_NAME, typeof(SCMUProjectMemberList), SPEventReceiverType.ItemUpdated);

            Web.Update();
        }
        catch (Exception)
        {
            throw;
        }
    }

public void AddEventReceiverToList(SPWeb web, string listName, Type eventReceiverClass, SPEventReceiverType eventType)
    {
        SPList list = this.GetListByName(web, listName);            

        string className = eventReceiverClass.FullName;
        string assemblyName = Assembly.GetAssembly(eventReceiverClass).FullName;

        list.EventReceivers.Add(eventType, assemblyName, className);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-21T06:12:48.567

在 Elements.xml 文件中替换：

`<Receivers ListTemplateId="100">` 经过

`<Receivers ListUrl="Lists/Your List Name">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:15:03.140

如果您想为单个列表运行事件接收器..

参考[这里](http://seminda.wordpress.com/2011/09/08/creating-sharepoint-2010-event-receivers-in-visual-studio-2010/)

检查帖子的结尾，在 Elements.xml 中将属性更改为“ListTemplateId”为“ListURL”

# erlang - 如何为erlang消息赋予不同的优先级

> ID：12248111
> 
> 赞同：5
> 
> 时间：2012-09-03T12:41:17.033
> 
> 标签：erlang

在“erlang 编程”一书和[这个](https://stackoverflow.com/questions/8699498/is-there-a-clever-way-to-give-messages-different-priorities)堆栈溢出问题中，我看到我们可以使用以下方法为邮箱中的 erlang 消息赋予不同的优先级：

我试图用这段代码实现类似的东西：

```
-module(mytest).
-export([start/0, test/0]).

start() ->
    register(?MODULE, spawn(fun() -> do_receive() end)).

do_receive() ->
    receive
        {high_p, Message} ->
            io:format("High priority: ~p~n", [Message]),
            do_receive()
    after 0 ->
            receive
                {low_p, Message} ->
                    io:format("Low priority: ~p~n", [Message]),
                    do_receive()
            end
    end.

test() ->
    mytest ! {high_p, msg1},
    mytest ! {low_p, msg2},
    mytest ! {high_p, msg3}. 
```

但结果是：

```
1> mytest:start().
true
2> mytest:test(). 
Low priority: msg2
{high_p,msg3}
High priority: msg1
High priority: msg3 
```

这似乎不对，所以我将代码更改为：

```
do_receive() ->
    receive
        {high_p, Message} ->
            io:format("High priority: ~p~n", [Message]),
            do_receive()
    after 0 ->
            receive
                {high_p, _} = Other ->
                    self() ! Other,
                    do_receive();
                {low_p, Message} ->
                    io:format("Low priority: ~p~n", [Message]),
                    do_receive()
            end
    end. 
```

结果如下（所有高优先级消息都在低优先级消息之前打印）。

```
1> mytest:start().
true
2> mytest:test(). 
High priority: msg3
{high_p,msg3}
High priority: msg1
Low priority: msg2 
```

这是实现我的目标的正确方法吗？并且可以在 gen_server handle_info/2 中实现不同的优先级吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T14:33:12.963

第一个程序中发生的事情是：

1.  您在“接收高优先级消息”状态下生成接收器
2.  他没有找到高优先级消息，所以他进入“接收低优先级消息”状态
3.  您发送了高优先级消息，但无法识别
4.  你发送一条低优先级的消息并且它被识别
5.  然后接收器循环并进入“高优先级消息”状态并识别消息

因此甚至可能出现死锁，接收者将拥有大量高优先级消息但无法处理它们，因为他陷入了低优先级状态

因此，我认为您的方法（类似于您链接的问题的答案）更好。优化：由于您收到高优先级消息，因此无需再次发送（并导致额外开销）：

```
do_receive() ->
    receive
        {high_p, Message} ->
            do_high(Message)
    after 0 ->
            receive
                {high_p, Message} ->
                    do_high(Message);
                {low_p, Message} ->
                    io:format("Low priority: ~p~n", [Message])
            end
    end,
    do_receive().

do_high(Message) ->
    io:format("High priority: ~p~n", [Message]). 
```

# arrays - （数组）参数的大小

> ID：12248113
> 
> 赞同：0
> 
> 时间：2012-09-03T12:41:19.160
> 
> 标签：arrays, visual-studio-2010, visual-c++, size

我有一个代码，它使用以下方式查找输入的大小：

```
template <typename T>
void func (T& input) {
    const void *valuePtr;
    size_t valueSize;
    tie(valuePtr, valueSize)
            = detail::ParamInfo<typename remove_const<T>::type>::get(input);
    //code
} 
```

如果输入是一个数组，我需要获取它的实际大小而不是指针大小。因此，如果我有

```
size_t data[3]; 
```

我`func`用数据参数调用，我确实得到`valueSize = 12` 了但是如果我不知道数组的大小我会遇到一个问题，例如：如果我有

```
vector<size_t> data;
data = getData(); //as a result data is a vector of 2 elements
size_t *dataArr = &data[0]; 
```

如果我`func`用`dataArr`参数调用，我得到 4，而不是 8。

我该如何解决这个问题 - 我无法知道/预测从返回的参数的大小`getData()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:53:58.420

您无法在编译时获得动态数组的大小。您需要在运行时将向量大小作为函数参数传递，为其进行重载：

```
template <typename T> void func(T& input, size_t i_size); 
```

或者更好地使超载`std::vector`：

```
template <typename T> void func(std::vector<T>& input);
// Use input.size() to get array size 
```

# r - 在格子图中添加文本？

> ID：12248116
> 
> 赞同：3
> 
> 时间：2012-09-03T12:41:36.190
> 
> 标签：r, lattice

有人可以告诉我如何在格子图中添加文本行。

我的代码是：

```
xyplot(Neff~Eeff,data=phuong,panel=mypanel,
       col="black",
       pch=18,xlab="Energy efficiency (%)",
       ylab = "Nitrogen efficiency (%)", main="(a)") 
```

这里`pane=mypanel`是添加一个abline。我想在他们的图中添加 Eeff 和 Neff 之间的线性回归方程。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T17:09:23.813

因此，使用可重现的数据：

```
set.seed(1)

phuong <- data.frame(Eeff = rnorm(100,31))
phuong$Neff <- rnorm(100,19.7 + .36*phuong$Eeff)

# Create the lm object ahead of time
lm1 <- lm(Neff ~ Eeff, data = phuong)

# Create the character string that you want to print
tp <- sprintf("%s=%.1f + %.2f %s", all.vars(formula(lm1))[1],
  coef(lm1)[1], coef(lm1)[2], all.vars(formula(lm1))[2])

# Change the mypanel function to use the lm1 object
mypanel<-function(x,y,...){
  panel.xyplot(x, y, ...)
  panel.abline(lm1)
  panel.text(30,33,labels=tp)
}

library(lattice)

# and off we go.

xyplot(Neff~Eeff,data=phuong,panel=mypanel,
       col="black",
       pch=18,xlab="Energy efficiency (%)",
       ylab = "Nitrogen efficiency (%)", main="(a)") 
```

![在此处输入图像描述](../Images/32c6bf2e727ba3068be20f473208ba5f.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-11T07:34:18.993

```
library(latticeExtra)

set.seed(1)

phuong <- data.frame(Eeff = rnorm(100,31))
phuong$Neff <- rnorm(100,19.7 + .36*phuong$Eeff)

xyplot(Neff ~ Eeff, data= phuong) + 
  layer(panel.ablineq(lm(Neff ~ Eeff, data= phuong), r.sq= TRUE, rot = TRUE)) 
```

![在此处输入图像描述](../Images/9475a77310d3648b4c33693a55f42d94.png)

# objective-c - 在 GData object-c 客户端（Picasa）中使用照片 ID 获取照片的评论

> ID：12248120
> 
> 赞同：0
> 
> 时间：2012-09-03T12:41:54.817
> 
> 标签：objective-c, ios, photo, gdata, picasa

我目前正在开发一个 iOS 应用程序，该应用程序需要使用图片的 photoID 获取 Picasa 图片的评论。然而，谷歌提供的开发人员指南中没有提及评论，我也是使用 GData 的初学者。有人可以帮我使用照片 ID 获取图像，然后获取评论。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:25:45.283

[https://apigee.com/console/picasa](https://apigee.com/console/picasa) 查看此在线工具以列出 picasa 的所有 api。我想这对你会有很大帮助

# xcode - iPad 重置后 Xcode 无法识别 iPad

> ID：12248122
> 
> 赞同：1
> 
> 时间：2012-09-03T12:41:56.477
> 
> 标签：xcode, ipad

我一直在 iPhone 和 iPad 上构建和运行一个应用程序，两者都使用 OS 5.1，在 Xcode 4.2 上。

但今天 a 在 iPad 上进行了重置（通过按住主页+锁定按钮）。从那时起，xcode 就无法识别 iPad。主办方表示 iPad 上安装的 iOS 版本与支持的 xcode 版本不匹配。

如果我右键单击我的 iPad（在管理器中）并单击“添加到配置文件”，我会收到一个弹出窗口说请求超时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:23:05.617

恢复 ipad 1 后我遇到了同样的问题。我的修复：转到 xcode 管理器，确保 ipad 设备已断开连接，在左列（管理器）中删除我的 ipad 连接我的 ipad，按“用于开发”（也许登录到iTunes连接..）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T19:14:18.660

我在网上寻找了一些解决方案，请检查以下问题+答案，也许其中一个也是您的解决方案:) [第一个链接](https://stackoverflow.com/questions/8100820/iphone-cannot-run-apps-from-xcode-on-ios-5-0-1-device-since-ios-update-from-5)，[第二个链接](https://stackoverflow.com/questions/9608854/xcode-and-ios5-1-on-iphone-wont-work)，[第三个链接](https://superuser.com/questions/244665/iphone-not-detected-by-mac)（我知道，你有 XCode 4.2，但也许方法相同）。最后[一个](http://modmyi.com/forums/iphone-ipod-touch-sdk-development-discussion/622311-how-make-xcode-see-my-iphone-again.html)。

# android - Android：在画布上保存绘图

> ID：12248123
> 
> 赞同：0
> 
> 时间：2012-09-03T12:41:56.857
> 
> 标签：android, android-canvas

如何在 android 的画布上保存绘图，以便在将来的某个时候恢复它？例如，我将当前绘图保存在画布上，然后绘制其他内容，然后将画布恢复到之前保存的状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:46:04.673

您必须单独存储模型数据。在 draw 方法中，您只定义如何绘制这些数据。根据情况，您可以设置标志并在绘图中绘制适当的模型。

您还可以将画布另存为文件/位图，例如，请参见：[画布上的图像到 JPEG 文件](https://stackoverflow.com/questions/2174875/android-canvas-to-jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:47:41.113

画布绘制`Bitmap`所以如果这足够了，那么将您的位图保存到文件中。但是如果要保存所有用户“笔画”，则需要单独记录，然后在加载后重播。

# mysql - 在database.yml中没有root的MySql root登录错误

> ID：12248126
> 
> 赞同：1
> 
> 时间：2012-09-03T12:42:09.640
> 
> 标签：mysql, ruby-on-rails, root

我在 Hostgator 的新 Rails 应用程序中的 production.log 中收到此错误：

```
/!\ FAILSAFE /!\  Sat Sep 01 16:29:56 -0500 2012
Status: 500 Internal Server Error
Access denied for user 'root'@'localhost' (using password: YES) 
```

问题是，我根本不知道它为什么会尝试以“root”身份登录。这是我的 database.yml 文件的全部内容：

```
production:
  adapter: mysql
  database: mwilkes_chairsales
  user: mwilkes_seller
  password: scrubbed
  host: localhost 
```

我有几个共享此帐户的 Wordpress 安装，但这是唯一的 Rails 应用程序。除了关系之外，任何模型或控制器中都没有代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:01:03.303

配置选项是**username**，而不是**user**：

```
production:
  adapter: mysql
  database: mwilkes_chairsales
  username: mwilkes_seller
  password: scrubbed
  host: localhost 
```

这是[关于配置数据库的 Rails 指南](http://guides.rubyonrails.org/getting_started.html#configuring-a-database)

# python - 如何使用 python 脚本更改 tcp keepalive 计时器？

> ID：12248132
> 
> 赞同：38
> 
> 时间：2012-09-03T12:42:43.777
> 
> 标签：python, tcp, keep-alive

在我的 python 脚本中，我使用以下命令激活了 TCP Keepalive：

```
x = s.setsockopt( socket.SOL_SOCKET, socket.SO_KEEPALIVE, 1) 
```

我的目标是关闭套接字连接，如果 5 分钟没有传输（*）。我在 Windows 上工作，我的 python 脚本只接收而不向客户端程序传输任何数据。

我所知道的是，默认情况下，如果 2 小时内没有传输，那么只有我可以使用 try 和 except 关闭连接。我知道，对于 Windows，我可以通过转到注册表来手动减少等待时间。但是有没有一种方法可以从我的脚本中修改它？

(*) 这里的“不传输”是指“有东西悄悄地吃掉网络上的数据包”，而不是“我不想发送任何东西”。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-02-13T14:25:22.337

您可以使用 setsockopt() 在已打开的套接字上设置 TCP keepalive 计时器。

```
import socket

def set_keepalive_linux(sock, after_idle_sec=1, interval_sec=3, max_fails=5):
    """Set TCP keepalive on an open socket.

    It activates after 1 second (after_idle_sec) of idleness,
    then sends a keepalive ping once every 3 seconds (interval_sec),
    and closes the connection after 5 failed ping (max_fails), or 15 seconds
    """
    sock.setsockopt(socket.SOL_SOCKET, socket.SO_KEEPALIVE, 1)
    sock.setsockopt(socket.IPPROTO_TCP, socket.TCP_KEEPIDLE, after_idle_sec)
    sock.setsockopt(socket.IPPROTO_TCP, socket.TCP_KEEPINTVL, interval_sec)
    sock.setsockopt(socket.IPPROTO_TCP, socket.TCP_KEEPCNT, max_fails)

def set_keepalive_osx(sock, after_idle_sec=1, interval_sec=3, max_fails=5):
    """Set TCP keepalive on an open socket.

    sends a keepalive ping once every 3 seconds (interval_sec)
    """
    # scraped from /usr/include, not exported by python's socket module
    TCP_KEEPALIVE = 0x10
    sock.setsockopt(socket.SOL_SOCKET, socket.SO_KEEPALIVE, 1)
    sock.setsockopt(socket.IPPROTO_TCP, TCP_KEEPALIVE, interval_sec) 
```

有关 Windows 上的等效选项，[请参阅 msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/ee470551%28v=vs.85%29.aspx)。查看[Python 源代码](http://hg.python.org/cpython/file/dfe327390cc2/Modules/socketmodule.c#l3783)，您似乎需要在 Unix 中设置`SO_KEEPALIVE`类似于`sock.setsockopt`，并且 [可选？] 设置`SIO_KEEPALIVE_VALS`为`sock.ioctl`.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-08-07T01:13:28.980

对于 Windows，在 python 中：

这将启用套接字保持活动，具有 10 秒的保持活动时间和 3 秒的保持活动间隔。

```
sock.ioctl(socket.SIO_KEEPALIVE_VALS, (1, 10000, 3000)) 
```

# cordova - 在 phonegap 中的不同应用程序启动上设置不同的启动画面时间

> ID：12248134
> 
> 赞同：0
> 
> 时间：2012-09-03T12:42:48.160
> 
> 标签：cordova

我想在不同的启动时显示不同时间的闪屏。第一次启动应用程序时，我会显示启动画面，直到从服务器获取所有数据，但我将这些数据存储在数据库中。下次我从数据库中获取数据。这次我只想显示 2 秒的闪屏。你能给我一些建议吗

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:44:10.800

Cordova (PhoneGap) 有一个函数`navigator.splashscreen.hide();`，您可以调用它来显式隐藏启动屏幕。这在 iOS 上已经有很长一段时间了，并且从 v1.8 开始在 Android 上可用。加载数据后，您应该能够使用它来隐藏启动画面。

**编辑**

[此博客](http://simonmacdonald.blogspot.co.uk/2012/04/phonegap-android-splashscreen-just-got.html)展示了如何在应用程序加载之前显示启动画面。

# java - 将倒数计时器转换为时间的正则表达式

> ID：12248138
> 
> 赞同：0
> 
> 时间：2012-09-03T12:43:13.667
> 
> 标签：java, android, regex, eclipse

我正在尝试将 a`CountdownTimer`转换为正确的时间。我尝试过正则表达式，但我在这些方面总是很弱。

这是我的代码。

```
Integer timeCount =  (int) (millisUntilFinished/1000);
int min = timeCount / 60;
int  sec = timeCount % 60;
textView.setText(min + ":" +  sec); 
```

这段代码向我`1:5`展示了它应该向我展示的时间`01:05`。我怎样才能做到这一点。

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:48:41.050

以下 util 函数会有所帮助，对吧？

```
private String pad(int value) {
   return (value < 10 ? "0" : "") + value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:49:32.540

正则表达式很强大但不适合这里的工具。使用`MessageFormat`或`System.out.format`代替。

看看这篇文章。 [http://docs.oracle.com/javase/tutorial/java/data/numberformat.html](http://docs.oracle.com/javase/tutorial/java/data/numberformat.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T12:50:40.253

好吧，您似乎只使用数字和字符串，请尝试简单的旧粗暴和简单的解决方案！

```
Integer timeCount =  (int) (millisUntilFinished/1000);
int min = timeCount / 60;
int  sec = timeCount % 60;
String textMin = (min < 10 ? "0"+min : min+"" );
String textSec = (sec < 10 ? "0"+sec : sec+"" );
textView.setText(textMin + ":" +  textSec ); 
```

# c# - 如何使用 zedgraph API 在 x 轴上定位文本标签？

> ID：12248141
> 
> 赞同：1
> 
> 时间：2012-09-03T12:43:19.487
> 
> 标签：c#, zedgraph

我正在使用 Zedgraph API 进行项目，我得到了关于如何将 TextObj 定位在图表底部作为标签的堆栈。任何人都可以帮助我吗？任何提示都是很大的帮助。谢谢！

代码 ：

`TextObj tb = new TextObj(new XDate(x).ToString("dd-MM-yyyy hh:mm"), x,_zedcontrol.GraphPane.YAxis.Scale.Min);
_zedcontrol.GraphPane.GraphObjList.Add(tb);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T20:47:01.817

构造`TextObj`函数有几个重载。在其中一些重载中，您可以指定`CoordType`. 在你的情况下，我认为最好的选择是`CoordType.ChartFraction`. 然后坐标应作为图表区域的分数给出，原点位于左上角。坐标可能是负数或大于一。对齐也可以通过`AlighH`and`AlignV`参数控制。

这是一个示例，其中文本对象与 X 轴标签大致对齐（并且文本对象绘制在轴后面）：

```
var text = new TextObj("On X Axis", 0.02, 1.03, CoordType.ChartFraction, 
                       AlignH.Left, AlignV.Top);
text.ZOrder = ZOrder.D_BehindAxis;
_zedcontrol.GraphPane.GraphObjList.Add(text); 
```

这将产生以下图表：

![X 轴上的文本对象](../Images/feeffb789879b33f9d4dab164c8cf12c.png)

# .net - 带有分解树的 SSAS 控件

> ID：12248151
> 
> 赞同：2
> 
> 时间：2012-09-03T12:44:00.093
> 
> 标签：.net, ssas, data-warehouse, olap, performancepoint

我目前正在研究 BI 解决方案，我需要做出一些设计决策。我们已经制作了 ELT 流程并在 SSAS 中设计了多维数据集，因此现在我们需要将数据呈现给最终用户。

情景如下。我们有衡量标准、KPI 和维度，并且我们知道需要向最终用户提供哪些数据。

一个简单的解决方案是通过 PerfomancePoint-Dashboard 设计器使用 Sharepoint 服务器，该设计器在它提供的 OLAP 控件中提供分解树。这里的问题是我们只需要显示从多维数据集生成的数据。不需要 sharepoint 的任何协作和/或内容管理功能。

另一个是使用 .Net 的第 3 方 olap 工具之一制作一个新的 Web 应用程序（例如 WebForms）！从开发的角度来看，我认为这会更简单，但没有分解树对我们来说是一个交易破坏者。

这里最重要的问题是，是否有任何包含分解树的 olap 控件（第三方与否）。

有没有办法（以库的形式）从共享点剥离 OLAP 控件并在 Web 表单项目中使用它们？

是否有可能——如果是的话，这是一种正确的做法——剥离任何其他控件的共享点站点，只留下我们选择的任何主题包围的仪表板吗？

您如何建议我将 SSAS 数据呈现给一个客户，他是一个简单的用户，几乎没有 IT 知识，只想查看统计数据和图表而不需要/想要了解一个全新的复杂环境？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:05:28.703

您使用的是哪个版本的 SQL Server？如果您已经在 2012 上，您应该尝试一下 Power View，它非常直观并且与 Sharepoint 完全集成（但它需要是 Sharepoint 2010）

# java - 在 Java 中将节点添加到以编程方式创建的 JTree

> ID：12248157
> 
> 赞同：0
> 
> 时间：2012-09-03T12:44:30.167
> 
> 标签：java, jtree

我正在创建这个应用程序，它在按钮单击事件上创建选项卡和 JTree。问题是当我尝试将 ne 节点添加到 JTree 时，它​​不会刷新 JTree（或者它不会向其中添加节点......我真的不知道）。

这是创建选项卡和树的函数：

```
jTabbedPane1.add(st,jSplitpane10);
int count = jTabbedPane1.getTabCount();
jTabbedPane1.setSelectedIndex(count-1);

DefaultMutableTreeNode root = new DefaultMutableTreeNode("All Notebooks");
DefaultMutableTreeNode notebook1 = new DefaultMutableTreeNode("Notebook 1");
root.add(notebook1);

// Create tree
JTree tree = new JTree(root);
//Create Scroll Pane for the tree
JScrollPane sp = new JScrollPane(tree);

Global.trees.add(tree); 
```

这是应该将新节点“Green”添加到所选选项卡中的树的代码：

```
int i = jTabbedPane1.getSelectedIndex();
DefaultTreeModel model = (DefaultTreeModel)Global.trees.get(i).getModel();

// Find node to which new node is to be added
int startRow = 0;
String prefix = "J";
TreePath path = Global.trees.get(i).getNextMatch(prefix, startRow, Position.Bias.Forward);
MutableTreeNode node = (MutableTreeNode)path.getLastPathComponent();

// Create new node
MutableTreeNode newNode = new DefaultMutableTreeNode("green");

// Insert new node as last child of node
model.insertNodeInto(newNode, node, node.getChildCount());
model.reload(newNode); 
```

这也是 JTree 全局列表的声明：

```
public class Global {
    public java.util.List<JTree> trees = new ArrayList<JTree>();
}Global Global; 
```

任何想法为什么新节点没有显示在树中？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-27T06:56:08.997

以下是一些以编程方式添加 JTree 的代码：

来源：[http ://sickprogrammersarea.blogspot.in/2014/03/add-jtree-programmatically-in-java-swing.html](http://sickprogrammersarea.blogspot.in/2014/03/add-jtree-programmatically-in-java-swing.html)

```
import java.awt.*;
import javax.swing.*;
import javax.swing.event.*;
import javax.swing.tree.*;
public class MyTree extends JApplet
{
  JTree t;
  JLabel l1;
  String lang[]={"C","C++","JAVA","PYTHON","AJAX","PHP"};
  public void init()
  {
    try
    {
     SwingUtilities.invokeAndWait(new Runnable() {
       public void run()
       {
          makeGUI();
       }
    });
    } catch(Exception e){
       System.out.println("Sorry some error occured "+e);
    }
}
private void makeGUI()
{
   DefaultMutableTreeNode top=new DefaultMutableTreeNode("Language");
   DefaultMutableTreeNode a=new DefaultMutableTreeNode("Programming");
   top.add(a);
   DefaultMutableTreeNode a1=new DefaultMutableTreeNode("C");
   a.add(a1);
   DefaultMutableTreeNode a2=new DefaultMutableTreeNode("Java");
   a.add(a2);
   DefaultMutableTreeNode b=new DefaultMutableTreeNode("Web Based");
   top.add(b);
   DefaultMutableTreeNode b1=new DefaultMutableTreeNode("PHP");
   b.add(b1);
   DefaultMutableTreeNode b2=new DefaultMutableTreeNode("JSP");
   b.add(b2);
   t=new JTree(top);
   JScrollPane scr=new JScrollPane(t);
   add(scr);
   setLayout(new  FlowLayout());
   l1=new JLabel("Choose a language");
   add(l1,BorderLayout.SOUTH);
   t.addTreeSelectionListener(new TreeSelectionListener () {
    public void valueChanged(TreeSelectionEvent ae) { 
      l1.setText(ae.getPath()+" is selected");
    }
  });
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:49:20.277

JTree 和 JTable 是最复杂的 Swing 组件。

我认为是重新加载，但没有扩展。JTree 根节点有很多设置：handler 如何或不显示根节点等等。

我正在使用调试控制台列表，在其中我将模型数据转储为文本（也覆盖节点中的 toString()），我可以很容易地看到，那里有什么，但如果你只需要几个节点，那就足够了使用 Netbeans 的调试器。

还尝试扩展树中的所有行以使其可见。

你的代码很好：

```
// Create new node
MutableTreeNode newNode = new DefaultMutableTreeNode("green");

// Insert new node as last child of node
model.insertNodeInto(newNode, node, node.getChildCount());
model.reload(newNode); 
```

但是可能看不到，需要扩展，怎么做，那是另外一个问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:13:47.927

我制作了一个小示例应用程序来测试您的问题。我发现节点被正确添加，但没有扩展。此外，调用 to`model.reload`似乎没有必要。

我在树上添加了一个调用，`expandPath`以使显示器显示新节点。您可能需要仔细检查这不会扩展太多的树：

```
public class Example extends JFrame {

  private JTree tree;

  public Example() {
    DefaultMutableTreeNode root = new DefaultMutableTreeNode("All Notebooks");
    DefaultMutableTreeNode notebook1 = new DefaultMutableTreeNode("Notebook 1");
    root.add(notebook1);

    tree = new JTree(root);
    JScrollPane sp = new JScrollPane(tree);

    setLayout(new BorderLayout());
    add(sp, BorderLayout.CENTER);
    add(new JButton("Go") {
    {
      addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
          Example.this.addNode();
        }
      });
    }}, BorderLayout.SOUTH);

    setDefaultCloseOperation(EXIT_ON_CLOSE);
    pack();
  }

  private void addNode() {
    DefaultTreeModel model = (DefaultTreeModel) tree.getModel();

    // Find node to which new node is to be added
    int startRow = 0;
    String prefix = "N";
    TreePath path = tree.getNextMatch(prefix, startRow,
        Position.Bias.Forward);
    MutableTreeNode node = (MutableTreeNode) path.getLastPathComponent();

    // Create new node
    MutableTreeNode newNode = new DefaultMutableTreeNode("green");

    // Insert new node as last child of node
    model.insertNodeInto(newNode, node, node.getChildCount());
    tree.expandPath(path);
  }

  public static void main(String[] args) {    
    EventQueue.invokeLater(new Runnable() {      
      @Override
      public void run() {
        new Example().setVisible(true);
      }
    });
  }
} 
```

# php - 链接尚未链接的电子邮件地址

> ID：12248159
> 
> 赞同：3
> 
> 时间：2012-09-03T12:44:51.573
> 
> 标签：php, regex, replace

我目前正在将电子邮件地址与以下正则表达式匹配（并将它们链接为`mailto`链接）：

```
/([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,64})/ 
```

但是，我不想链接之前已经链接的任何内容作为`mailto`链接或现有链接（例如 index.php?email=example@example.com），否则链接会变得非常糟糕，如下所示：

```
<a href="mailto:<a href="mailto:example@example.com">example@example.com</a>"><a href="mailto:example@example.com">example@example.com</a></a> 
```

**更新**

这是我用来查找电子邮件地址的 PHP 示例（抱歉，我认为它不是必需的）：

```
$input = "example@example.com<br><br><a href='mailto:example@example.com'>test email</a><br><br><a href='mailto:example@example.com'>example@example.com</a>";

$output = preg_replace("/([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,64})/i", "<a href='mailto:$1'>$1</a>", $input);

//output
<a href="mailto:example@example.com">example@example.com</a><br><br><a mailto:example@example.com'="" href="mailto:&lt;a href=">example@example.com</a>'&gt;test email<br><br><a mailto:example@example.com'="" href="mailto:&lt;a href=">example@example.com</a>'&gt;<a href="mailto:example@example.com">example@example.com</a> 
```

**更新 2**

我还有一个正则表达式问题（如果可能的话） - 我还有下面的正则表达式可以使所有链接都指向一个新窗口，但是，我不希望任何`mailto`链接到一个新窗口 - 是否可以不定位`mailto`链接?

```
$output = preg_replace("/<(a)([^>]+)>/i", "<\\1 target=\"_blank\"\\2>", str_replace('target="_blank"', '', $output)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T22:04:02.567

这个正则表达式怎么样？

```
/((?<!mailto:|=|[a-zA-Z0-9._%+-])[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.‌​-]+\.[a-zA-Z]{2,64}(?![a-zA-Z]|<\/[aA]>))/ 
```

# perl - 在文件中查找氨基酸序列

> ID：12248161
> 
> 赞同：0
> 
> 时间：2012-09-03T12:44:54.237
> 
> 标签：perl

我有一个蛋白质序列的[FASTA](http://en.wikipedia.org/wiki/FASTA_format)文件。我想查找文件中是否存在序列 hxxhcxc，如果是，则打印拉伸。这里，h=疏水，c=带电，x=任何（包括剩余的）残基/s。如何在 Perl 中做到这一点？

我能想到的是制作 3 个阵列——疏水的、带电的和所有的残基。将每个数组与具有 FASTA 序列的文件进行比较。除此之外，我想不出什么，尤其是如何维持秩序——这是主要的。我是 Perl 的初学者，所以请让解释尽可能简单。

PS：由于这只是一个序列，我可以简单地将内容复制到 .txt 文件，没有强制使用 fasta 文件（在这种情况下）。疏水和带电残基（氨基酸） - 有 9 个疏水残基和 5 个带电残基。正如您提到的，它是大写单字母的氨基酸名称。所以我想做的是在蛋白质序列（.txt文件/fasta文件）中按顺序找到一个序列：疏水，任何，任何，疏水，带电，任何，带电（hxxhcxc）。我努力重新提出我的问题——希望我现在好一点了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:52:01.243

我对 Fasta 文件不熟悉，但正则表达式当然看起来像是要走的路。

**用言语**

如果您`open`要读取文件，则可以逐行处理文件，`print`仅 -ing 那些`if`与您指定的正则表达式匹配的行。

**在代码中**

```
use strict;
use warnings;
use autodie;

open my $fh, '<', 'file.fasta';           # Open filehandle in read mode

while ( my $line = <$fh> ) {              # Loop over line by line

    print $line                           # Print line if it matches pattern
      if $line =~ /h..hc.c/;              # '.' in a regular expression matches
                                          # (almost) anything
}

close $fh;                                # Close filehandle 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T06:04:51.033

所以，你必须决定哪些是“疏水”氨基酸，但让我们从 V(aline)、I(soleucine)、L(eucine)、F、W 或 C 开始。

带电荷的氨基酸是 E、D、R 或 K。使用它你可以定义一个正则表达式（你会在下面看到它）

如果您只是在文本文件中有整个序列，请像这样解析它：

```
#!/usr/bin/perl

open(IN, "yourfile.txt") || die("couldn't open the file: $!");

$sequence = "";

while(<IN>) {
   chomp();
   $sequence .= $_;
}

if($sequence =~ /[VILFWC]..[VILFWC][EDRK].[EDRK]/) {
  print "Found it!\n";
} else {
  print "Not there\n";
} 
```

# heroku - 域名已被占用

> ID：12248164
> 
> 赞同：2
> 
> 时间：2012-09-03T12:45:07.627
> 
> 标签：heroku, dns

我在 Heroku 上有一个应用程序。我正在尝试执行[本教程](https://devcenter.heroku.com/articles/custom-domains)中的步骤，以便我的应用程序具有可识别的域名。

当我输入以下命令（使用我自己的域）时：
`heroku domains:add www.example.com`

我收到此错误消息：

```
Adding www.example.com to fierce-escarpment-8305... failed<br/>

 !    Domain has already been taken 
```

我不明白那是什么意思。我取消了我在其他托管服务上的帐户，以便我可以释放我的域名，并通过我的域提供商重置我的信息，以便我的域指向一个临时页面。

好的 ！所以我现在明白（我认为）我必须在我的域名提供商网站上进行哪些更改。我认为我的信息现在是正确的，因为我没有“！域已被占用”错误消息。
现在，我收到了这条消息：
»heroku 域：添加 www.math-moi.com
！未指定应用。
！从应用程序文件夹运行此命令或指定与 --app
» heroku 域一起使用的应用程序：添加 www.math-moi.com --app heroku-fierce-escarpment-8305
将 www.math-moi.com 添加到 heroku-凶猛的悬崖8305...失败了
！未找到应用

谁能告诉我我做错了什么？

* * *

»heroku 域：添加 www.math-moi.com --app heroku-fierce-escarpment-8305.herokuapp.com
将 www.math-moi.com 添加到 heroku-fierce-escarpment-8305.herokuapp.com... 失败
！找不到资源

* * *

仍然有错误消息...

```
»heroku domains:add www.math-moi.com --app fierce-escarpment-8305<br/>
Adding www.math-moi.com to fierce-escarpment-8305... failed<br/>
 !    Domain has already been taken 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:01:12.077

尝试使用您拥有的域。域 example.com 已被其他人声明，不能将多个帐户分配给同一个域。

```
 heroku domains:add www.example.com 
```

应该变成：

```
 heroku domains:add www.YOURDOMAINHERE.com 
```

# tridion - 如何使用核心服务获取页面的发布日期？

> ID：12248165
> 
> 赞同：-1
> 
> 时间：2012-09-03T12:45:07.537
> 
> 标签：tridion

我必须创建一个自定义页面，其中包含所有页面的列表及其在出版物中的发布日期。有人可以指导我如何使用此代码在自定义页面中获取发布日期吗？

```
private ItemType GetTridionItemType(RepositoryLocalObjectData source)
{
    string itemType = source.GetType().Name;
    switch (itemType)
    {
        case "PageData":
            return ItemType.Page;
    }
    return ItemType.UnknownByClient;
} 

private string CreateNewItemCopy(string title, RepositoryLocalObjectData source, 
                                 string filename)
{
    ItemType tridionItemType = GetTridionItemType(source);
    string orgItemUri = source.LocationInfo.OrganizationalItem.IdRef;
    var newItem = client.Copy(source.Id, orgItemUri, true, new ReadOptions());
    newItem.Title = title;
    if (tridionItemType == ItemType.Page)
    {
        PageData pageData = newItem as PageData;
        pageData.FileName = filename;
        client.Update(pageData, new ReadOptions());
    }
    else
    {
        client.Update(newItem, new ReadOptions());
    }

    return newItem.Id;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T04:55:03.997

我们可以从 coreservice 获取发布信息

```
TridionGeneration Generation = new TridionGeneration();
            Generation.Settings = GetImportSetting();
            var objclient = new CoreService2010Client();
            objclient.ClientCredentials.Windows.ClientCredential.UserName = Generation.Settings.Username;
            objclient.ClientCredentials.Windows.ClientCredential.Password = Generation.Settings.Password;
            objclient.Open();
            Generation.client = objclient;

            var objectList = Generation.client.GetListPublishInfo([object tcm uri]); 
```

![](../Images/7cc5309fef2e87b22a52bf5b9db4698a.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T13:52:34.403

PublishEngine.GetPublishInfo 返回项目的发布信息。其中包含发布日期。(PublishInfo.PublishedAt)。

您还可以使用 CoreService.GetListPublishInfo。

# jquery - jQuery干优化

> ID：12248169
> 
> 赞同：3
> 
> 时间：2012-09-03T12:45:53.057
> 
> 标签：jquery, optimization, coding-style, refactoring

您好我想问我如何优化该代码：

```
 $('#infoTrigger0').live('click', function() {
            $('#info0').slideToggle();
        });
        $('#infoTrigger1').live('click', function() {
            $('#info1').slideToggle();
        });
        $('#infoTrigger2').live('click', function() {
            $('#info2').slideToggle();
        });
        $('#infoTrigger3').live('click', function() {
            $('#info3').slideToggle();
        });
        $('#infoTrigger4').live('click', function() {
            $('#info4').slideToggle();
        });
        $('#infoTrigger5').live('click', function() {
            $('#info5').slideToggle();
        });... 
```

用循环或其他我不知道的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:48:39.240

```
for (var i = 0; i < n; i++) {
$('#infoTrigger' +i).live('click', function () {
    $('#info' +i).slideToggle();
}); 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:51:10.907

关于什么 ？：

```
for(var i =0;i<6;i++){
  $('#infoTrigger' + i).live('click', function() {
      $('#info' + i).slideToggle();
  });
} 
```

我建议使用`on`over，`live`因为现在不推荐使用最后一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T12:52:38.793

```
$(document).on('click', 'elem[id^=infoTrigger]', function() {
      var n = this.id.match(/\d+/g)
      $('#info'+n).slideToggle();
}); 
```

`live`方法已弃用，您可以[`on`](http://api.jquery.com/on/)改用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T12:49:34.567

如果你像这样制作 html

```
<div class="info" id="info1">
  <div id="info1_sub"></div>
</div> 
```

你可以应用这个

```
 $('.info').live('click', function() {
            var elem="#"+$(this).attr("id")+"_sub";
            $(elem).slideToggle();
        }) 
```

# database - 是否必须在 recovery.conf 中设置“restore_command”和“archive_cleanup_command”？

> ID：12248172
> 
> 赞同：3
> 
> 时间：2012-09-03T12:46:03.180
> 
> 标签：database, postgresql

我正在（不是基于文件的日志传送）中设置一个`PostgreSQL`（9.1 版本）备用服务器。**`Streaming replication`**

设置`standby_mode`为 'on' 和`primary_conninfo`正确的值后，设置`restore_command`or是否重要或强制`archive_cleanup_command`？并且也在`archive_command`主服务器中？

[尽管阅读了文档](http://www.postgresql.org/docs/9.1/static/warm-standby.html#STANDBY-SERVER-OPERATION)，但我不太确定答案。

谢谢。

编辑：

让我回答我自己的问题。在从站中必须存在的 recover.conf 文件中，有一条注释`restore_command`说：

> ```
> # 此参数对于存档恢复是*必需的*，但
> 对于流式复制是可选的。
> ```

总而言之，如果您的从属计算机不会从主控计算机回退太多，则无需配置文件日志传送功能（归档、恢复、清理等）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T12:54:00.337

您需要`archive_command`在主设备上设置，并在从设备上设置匹配`restore_command`。

流复制系统通过将 wal 记录 id 提供给从机来工作，从机将使用`restore_command`. 因此，您必须`archive_command`在主设备上进行某种写入，该设备可以写入可通过从设备上访问的存储设备`restore_command`。

这`archive_cleanup_command`是可选的，但强烈推荐使用，因为 wal 存档占用大量磁盘空间并且可以很快填满您的磁盘。

# ios - iOS：UITableView -> DetailView 初始化数据

> ID：12248176
> 
> 赞同：0
> 
> 时间：2012-09-03T12:46:13.810
> 
> 标签：ios, uitableview, detailview

用数据从 TableView 初始化 DetailView 的最佳方法是什么？

我需要“发送”一个对象来填充所有标签和 ImageView。

我更改视图的代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self.navigationController pushViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"detailView"] animated:true];
} 
```

迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:10:46.880

```
DetailViewController *viewController = (DetailViewController*) [self.storyboard instantiateViewControllerWithIdentifier:@"detailView"];
viewController.myProperty1 = object1;
viewController.myProperty2 = object2;
[self.navigationController pushViewController:viewController animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:04:32.903

只需从情节提要中实例化 ViewController 并在推送 ViewController 之前对其进行设置

```
YourViewControllerclass * vc = (YourViewControllerclass*) [self.storyboard instantiateViewControllerWithIdentifier:@"detailView"];
[vc setupMethodForObject: object];
[self.navigationController pushViewController:vc animated:YES]; 
```

# php - 错误——它们属于逻辑层还是表示层？

> ID：12248177
> 
> 赞同：3
> 
> 时间：2012-09-03T12:46:16.467
> 
> 标签：php, error-handling, separation-of-concerns

关于函数调用，**是让调用者负责检查函数是否工作或失败，还是应该由函数本身宣布错误？**

我问的原因是因为我不喜欢将演示文稿与逻辑混合，但是如果调用者必须进行错误检查，则它可能不准确且很麻烦，例如。

```
if(!login($username, $password)
{
    echo 'Login failed. Please try again.';
} 
```

**调用者不知道为什么失败。**是用户名/密码组合错误，还是数据库连接失败？还是其他一些意想不到的原因？

如果我们可以在函数内部进行错误检查/抛出异常，这将不是问题，因为这样我们就会在特定的代码点出现特定的错误，例如数据库连接失败……但这将混合表示和逻辑。这里的最佳做法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:00:10.180

我个人会通过在业务逻辑（模型）层中抛出异常来赋予调用者责任。然后，可以在控制器中捕获异常（并将错误分配给视图中的变量）。有些人甚至喜欢直接在表示层捕获异常，但这不适用于 Web 开发的情况。只要异常仅用于视图中的演示目的，我认为这不是什么大问题。

因此，我不会像您在简单示例中那样做，因为调用者可能并不总是希望显示错误。通过处理呼叫者的责任，他或她有一个选择。此外，我不喜欢在业务逻辑中回显内容（我更喜欢抛出异常并保持模型不显示），但您的代码很可能只是一个过于简单的示例。

**编辑：**你可以这样做：

模型：

```
function login($username, $password) {
    if (login failed) {
        throw new Login_Exception();
    }

    else {
        // Set session
        return true;
    }
} 
```

控制器：

```
try {
    $model->login($username, $password);
}

catch (Login_Exception $e) {
    $view->loginError = 'There was an error logging in.';
} 
```

然后，您可以抛出不同的异常来准确指出哪里出了问题（例如`Wrong_Username_Exception`）并相应地处理它。或者，您甚至可以在异常的构造函数中提供一个用户友好的理由，但在我看来，这会使表示和逻辑耦合得过多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:13:10.117

您的示例代码的问题：

```
if(!login($username, $password)
{
    echo 'Login failed. Please try again.';
} 
```

...是 login() 函数没有返回足够的信息供调用者使用。无论调用者是 Web 表示层还是其他东西，这都是一个问题。

更好的 login() 函数可能会返回一个对象，以便调用者可以执行以下操作：

```
$response = login($username, $password);
if(! $response->isLoggedIn()) {
    echo "Login failed. " +  $response->getErrorMessage();
} 
```

现在您的登录方法与用户界面没有紧密耦合，但您可以将登录失败的原因传递给用户。

现在，可以说 login() 方法中仍然存在“表示”，因为它返回的文本是逐字引用给用户的。如果您想更加松散耦合，您可以定义一个错误代码列表，并让您的表示层将它们转换为消息。或者您可以返回一个指向消息表的值。阅读国际化；这是相同的基本域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:58:26.173

第一个。调用者应该有错误检查的责任。如果您想知道发生了什么样的错误，您可以重写登录函数并添加第三个参数，该参数将包含对错误的引用，如下所示：

```
<?php
function login($user, $pass, &$error) {
    // if user or pass wrong
    $error = 'Username / pass wrong';

    // if db failed
    $error = 'unable to connect to db'
};

if(!login($user, $pass, $error)) {
    // do whatever you want with the error
} 
```

更好的是，您可以将常量用于错误类型

**更新**

如果您在调用该函数后设置会话或 cookie，则您不希望显示该函数的错误。它会变薄，您会收到如下通知：“标头已发送......”

# iphone - 如何将文本转换为语音以在 iPhone 上使用 PhoneGap

> ID：12248181
> 
> 赞同：6
> 
> 时间：2012-09-03T12:46:24.460
> 
> 标签：iphone, cordova, text-to-speech

我有一个单词列表，我想将文本转换为 PhoneGap iPhone 的语音功能。TTS 是否有任何 API 或插件？请让我知道任何替代方案。

![](../Images/0fffdddcca0129ebe0c715374d94c99b.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T19:23:14.450

因为没有任何 phonegap 方式（javascript）方式来做到这一点，我建议使用本机 TTS 开源库之一，如：

[https://bitbucket.org/sfoster/iphone-tts/src](https://bitbucket.org/sfoster/iphone-tts/src)

或者

[https://github.com/todoroo/iPhone-Speech-To-Text](https://github.com/todoroo/iPhone-Speech-To-Text)

然后使用简单的插件将它们连接到您的 javascript-html 代码（了解有关编写插件的更多信息：http: [//docs.phonegap.com/en/2.0.0/guide_plugin-development_index.md.html](http://docs.phonegap.com/en/2.0.0/guide_plugin-development_index.md.html)

就这么简单！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T12:50:44.480

你检查过 PhoneGap 插件的 Github 存储库吗？（位于此处：[https](https://github.com/phonegap/phonegap-plugins) ://github.com/phonegap/phonegap-plugins ）确实有一个适用于Android的TTS插件：[https ://github.com/phonegap/phonegap-plugins/tree/master/Android/TTS](https://github.com/phonegap/phonegap-plugins/tree/master/Android/TTS)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-03T10:42:20.190

[cordova 插件 tts](https://github.com/vilic/cordova-plugin-tts)在 iPhone 中工作：

```
 TTS
    .speak('hello, world!', function () {
        alert('text spoken');
    }, function (reason) {
        alert(reason);
    }); 
```

该插件使用 iOS 中的[AVSpeechSynthesizer](https://developer.apple.com/reference/avfoundation/avspeechsynthesizer)类，也适用于 Android、Windows Phone。

# c# - 在页面上显示 LINQ 结果

> ID：12248182
> 
> 赞同：0
> 
> 时间：2012-09-03T12:46:29.930
> 
> 标签：c#, asp.net, linq

我希望在页面上显示我使用 LINQ 查询过的项目。

我似乎找不到任何简单的例子！

我有我的查询，TOELINE 是我的数据库名称

```
 // Get the data context for the GROUP database
    GroupDBDataContext db = new GroupDBDataContext();

    // Query the database
    var best_sellers = from bs in db.TOELINE
                       where bs.Company == "247HO001"
                       select bs; 
```

然后我如何在我的`.aspx`页面中循环遍历结果并将它们插入我希望的位置，我知道我可以使用 GridView 输出，但是我只想循环遍历每条记录并在我希望的任何地方显示不同的字段。

所以像下面这样：

```
<div id="best_sellers">
<%
foreach (SingleRow in best_sellers)
{
    // Show each row, the Company and ProductName fields
    Response.Write("<div class=\"best_seller_row\">" + SingleRow["Company"] + " - " + SingleRow["ProductName"] + "</div>");
}
%>
</div> 
```

我很困惑，没有像这样的简单例子。使用 PHP 似乎很容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:48:55.677

试试这个

```
<% 
foreach (var SingleRow in best_sellers) 
{ 
    // Show each row, the Company and ProductName fields 
    Response.Write("<div class=\"best_seller_row\">" + SingleRow.Company + " - " + SingleRow.ProductName + "</div>"); 
} 
%> 
```

您需要说明`foreach`循环中的元素是什么类型，或者使用`var`懒惰让编译器决定。

# android - 在android中将值从第一个活动传递到第四个活动

> ID：12248183
> 
> 赞同：0
> 
> 时间：2012-09-03T12:46:32.737
> 
> 标签：android, android-intent, pass-data

嗨，这是我的单身活动：

```
public class SingleMenuItemActivity extends ExpandableListActivity {

Button btninsert;
String selectedItem;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.particular);

 Button btninsert = (Button) findViewById(R.id.btn_insert);
 btninsert.setOnClickListener(new View.OnClickListener() {

   public void onClick(View v) {
 // Switching to Register screen
 Intent i = new Intent(getApplicationContext(), InsertionExample.class);
  String s1= getIntent().getStringExtra("orderid");

  i.putExtra(KEY_NAME, orderid);
  startActivity(i);
   } 
  });    

    // Construct Expandable List
    final String NAME1 = "payment_method1";
    final String NAME = "payment_method";
    final String TOTAL = "total";
    final String TOTAL1 = "total1";
   final String ID = "orderid";
    final String ID1 = "orderid1";
    final String IMAGE = "image"; 
    final String FNAME1 = "firstname1";

    final String FNAME = "firstname";
    final String LNAME1 = "lastname1";
    final String LNAME = "lastname";

    final LayoutInflater layoutInflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    final ArrayList<HashMap<String, String>> headerData = new ArrayList<HashMap<String, String>>();

    final HashMap<String, String> group1 = new HashMap<String, String>();
    group1.put(NAME, "OrderInfo");
    headerData.add( group1 );

    final HashMap<String, String> group2 = new HashMap<String, String>();
    group2.put(NAME, "CustomerInfo");
    headerData.add( group2);

  // final HashMap<String, String> group3 = new HashMap<String, String>();
   // group3.put(NAME, "Group 3");
   // headerData.add( group3);

    final ArrayList<ArrayList<HashMap<String, Object>>> childData = new ArrayList<ArrayList<HashMap<String, Object>>>();

    final ArrayList<HashMap<String, Object>> group1data = new ArrayList<HashMap<String, Object>>();
    childData.add(group1data);

    final ArrayList<HashMap<String, Object>> group2data = new ArrayList<HashMap<String, Object>>();
    childData.add(group2data);

  //  final ArrayList<HashMap<String, Object>> group3data = new ArrayList<HashMap<String, Object>>();
  //  childData.add(group3data);

    // Set up some sample data in both groups
    for( int i=0; i<1; ++i) {
        final HashMap<String, Object> map = new HashMap<String,Object>();
        String s= getIntent().getStringExtra("payment_method");
        String s1= getIntent().getStringExtra("total");
        String selectedItem= getIntent().getStringExtra("selectedItem");
        String s5= getIntent().getStringExtra("orderid");
        map.put(NAME1, "Payment_method:");
        map.put(NAME, s );
        map.put(TOTAL1, "Total:");
        map.put(TOTAL, s1);
        map.put(ID1, "Total:");
        map.put(ID, s5);
        group1data.add(map);
     //  map.put(IMAGE, getResources().getDrawable((i%3==0? R.drawable.color_green : R.drawable.color_red)));
      //  ( i%2==0 ? group1data : group2data ).add(map);
    }
    final HashMap<String, Object> map = new HashMap<String,Object>();
    String s1= getIntent().getStringExtra("firstname");
    String s2= getIntent().getStringExtra("lastname");

    map.put(FNAME, s1);
    map.put(FNAME1, "Firstname:");
    map.put(LNAME, s2);
    map.put(LNAME1, "Lastname:");

 //  map.put(IMAGE, getResources().getDrawable(R.drawable.color_yellow));
    group2data.add(map);

    setListAdapter( new SimpleExpandableListAdapter(
            this,
            headerData,
            R.layout.group_row,
            new String[] { NAME, FNAME },    // the names of the data
            new int[] { R.id.order },   // the text field to populate with the field data
            childData,
            0,
            null,
            new int[] {}
        ) {
            @Override
            public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
                final View v = super.getChildView(groupPosition, childPosition, isLastChild, convertView, parent);

              //  Spinner spinner = (Spinner) findViewById(R.id.spnMusketeers);

                // Populate your custom view here
                ((TextView)v.findViewById(R.id.payment_method1)).setText( (String) ((Map<String,Object>)getChild(groupPosition, childPosition)).get(NAME1) );
                ((TextView)v.findViewById(R.id.payment_method)).setText( (String) ((Map<String,Object>)getChild(groupPosition, childPosition)).get(NAME) );
                ((TextView)v.findViewById(R.id.firstname)).setText( (String) ((Map<String,Object>)getChild(groupPosition, childPosition)).get(FNAME) );
                ((TextView)v.findViewById(R.id.firstname1)).setText( (String) ((Map<String,Object>)getChild(groupPosition, childPosition)).get(FNAME1) );
                ((TextView)v.findViewById(R.id.total1)).setText( (String) ((Map<String,Object>)getChild(groupPosition, childPosition)).get(TOTAL1) );
                ((TextView)v.findViewById(R.id.total)).setText( (String) ((Map<String,Object>)getChild(groupPosition, childPosition)).get(TOTAL) );
                ((TextView)v.findViewById(R.id.lastname)).setText( (String) ((Map<String,Object>)getChild(groupPosition, childPosition)).get(LNAME) );
                ((TextView)v.findViewById(R.id.lastname1)).setText( (String) ((Map<String,Object>)getChild(groupPosition, childPosition)).get(LNAME1) );

                return v;
            }

            @Override
            public View newChildView(boolean isLastChild, ViewGroup parent) {

                 return layoutInflater.inflate(R.layout.expandable_list_item_with_image,null, false);

            }
        }
    );
    ExpandableListView list = (ExpandableListView) findViewById(android.R.id.list);
    list.setOnChildClickListener(new OnChildClickListener(){
        public boolean onChildClick(ExpandableListView parent, View v,
                int groupPosition, int childPosition, long id) {
            System.out.println("Group:"+groupPosition+", Child: "+childPosition);
            return true;
        }
    });

}} 
```

这是我的插入示例.java

```
public class InsertionExample extends Activity {
private final String NAMESPACE = "http://xcart.com";
private final String URL = "http://192.168.1.168:8089/XcartLogin/services/update?wsdl";
private final String SOAP_ACTION = "http://xcart.com/insertData";
private final String METHOD_NAME = "insertData";
Button btninsert;
String selectedItem;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.change_status);

    //get reference to the spinner from the XML layout
    Spinner spinner = (Spinner) findViewById(R.id.spinner1);
    btninsert = (Button)findViewById(R.id.btn_insert1);
    btninsert.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            EditText Orderid = (EditText) findViewById(R.id.orderid);
            String orderid = Orderid.getText().toString();
            TextView tv = (TextView) findViewById(R.id.textView1);
            tv.setText("Welcome ,"+getIntent().getExtras().getString("orderid"));
            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            PropertyInfo unameProp =new PropertyInfo();
            unameProp.setName("Status");//Define the variable name in the web service method
           unameProp.setValue(selectedItem);//Define value for fname variable
            unameProp.setType(String.class);//Define the type of the variable
            request.addProperty(unameProp);

              SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
              envelope.setOutputSoapObject(request);
              HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

              try{
               androidHttpTransport.call(SOAP_ACTION, envelope);
                  SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

                 TextView result = (TextView) findViewById(R.id.textView2);
                  result.setText(response.toString());

           }
           catch(Exception e){

           }

        }
    });

    //attach the listener to the spinner
    spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());

    //Dynamically generate a spinner data 
    createSpinnerDropDown();

}

//Add animals into spinner dynamically
private void createSpinnerDropDown() {

    //get reference to the spinner from the XML layout
    Spinner spinner = (Spinner) findViewById(R.id.spinner1);

    //Array list of animals to display in the spinner
    List<String> list = new ArrayList<String>();

    list.add("Q");
    list.add("P");
    list.add("F");
    list.add("I");
    list.add("C");

    //create an ArrayAdaptar from the String Array
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, list);
    //set the view for the Drop down list
    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    //set the ArrayAdapter to the spinner
    spinner.setAdapter(dataAdapter);
    //attach the listener to the spinner
    spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());

}

public class MyOnItemSelectedListener implements OnItemSelectedListener {

    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {

         selectedItem = parent.getItemAtPosition(pos).toString();

 }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }

    }

    public void onNothingSelected(AdapterView<?> parent) {
        // Do nothing.
    }
} 
```

这里我怀疑orderid是从xml解析中解析出来的……更新操作是通过soap调用执行的……现在我必须从orderid更新状态……怎么办……这是我的更新查询。

```
"UPDATE `xcart_orders` set `status` = '"+Status+"' where `orderid` = '"+Orderid+"'" 
```

请帮助我...更新状态如何取决于来自 xml 解析的 orderid..如何更改我的代码...如何做...请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:58:26.670

您有两种方法可以做到这一点：

1-使用公共​​静态值来存储用户名和密码（不推荐）

2- 使用 sharedPreferences 如下：

在您的第一个活动中，保存用户名和密码：

```
SharedPreferences data = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
data.edit().putString("UserName", userName).commit();
data.edit().putString("Password", password).commit(); 
```

在第四个活动中检索用户名和密码：

```
SharedPreferences data = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
String userName = data.getString("UserName", "THIS IS DEFAULT VALUE");
String password = data.getString("Password", "THIS IS DEFAULT VALUE"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T13:00:44.457

您可以使用`Getters`and`setters`方法执行此操作。

创建一个类：

```
public class SelectedAnswer {

public static String uname;

public static String getAnswer() {
    return uname;
}

public static void setAnswer(String answer) {
    uname = answer;
}

} 
```

然后将用户名值设置为您的第一个活动。

```
 SelectedAnswer.setAnswer(uName); 
```

并将价值带入第四个活动。

```
String answer = SelectedAnswer.getAnswer(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T12:55:27.123

使用`shared preferences`或`Application class`

[共享首选项示例](http://android-er.blogspot.in/2011/01/example-of-using-sharedpreferencesedito.html)

[应用类示例](http://www.devahead.com/blog/2011/06/extending-the-android-application-class-and-dealing-with-singleton/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T13:01:00.007

您还可以使用 setter getter 类在应用程序中的任何位置设置数据和访问数据，只需为该类创建对象即可。在您的情况下，这可能很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T13:13:00.407

要么使用一些静态变量来存储它，要么使用共享首选项。如果您有多个活动需要传输数据，最好使用静态字典，这将帮助您保存活动特定数据。

例如 ：

我们可以为此创建一个简单的数据缓存器类：

```
public class MyActivityDataCacher {

private static HashMap<String, String> mDataCacher;

    static{
    mDataCacher=new HashMap<String, String>();
}

public static void putDataFor(String className, String data) {
    mDataCacher.put(className, data);
}

public static String getDataFor(String className) {
    if (mDataCacher.containsKey(className)) {
        return mDataCacher.get(className);
    } else {
        return "";
    }
}
} 
```

用于存储特定活动的数据（例如 MainActivity）：

```
MyActivityDataCacher.putDataFor(MainActivity.class.getName(), "Test Data"); 
```

检索存储的数据：

```
MyActivityDataCacher.getDataFor(MainActivity.class.getName()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-03T12:56:12.887

如果您有必须从应用程序的不同部分访问的数据，您可以使用[单例](http://www.oodesign.com/singleton-pattern.html)模式作为数据持有者。

# oracle - Oracle 11g 复制 - 对远程数据库使用提交时刷新（数据库链接）

> ID：12248186
> 
> 赞同：0
> 
> 时间：2012-09-03T12:46:58.407
> 
> 标签：oracle, oracle11g, replication, materialized-views

下午好，

我有 3 个数据库；SID 是 config、prod1 和 prod2。

我正在使用物化视图将配置数据库中 11 个表上的数据复制到其他两个数据库中。物化视图当前每五秒刷新一次，但如果它们在提交时更新将是理想的。

我遇到了[这个网站](http://www.dba-oracle.com/t_ora_12054_cannot_set_on_commit_refresh_materialized_view.htm) ，它解释说从远程数据库复制时不支持提交。

这就是我期望的工作

```
CREATE MATERIALIZED VIEW "schema"."table" USING INDEX REFRESH FORCE ON COMMIT AS select column1 from schema.table@config; 
```

链接中建议了“使用主键按需快速刷新”的方法，但显然这是按需提供的。我想知道如果可能的话，为了让提交时刷新环境运行，任何人可能有什么想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:54:59.033

您无法创建在提交时从远程表刷新的物化视图。从[文档](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_6002.htm#SQLRF54159)中：

> **刷新 ON COMMIT 的限制**
> 
> 包含对象类型或 Oracle 提供的类型的物化视图不支持此子句。
> 
> **具有远程表**的物化视图不支持此子句。

原因是数据库链接是在“子”数据库中定义的，而不是在“父”数据库中。因此，父数据库不可能自行触发或修改子数据库中的任何内容。

如果您想要一个表的 100% 实时副本，我建议您使用视图。

如果您想在提交时复制数据，您可以修改您的 DML 过程，以便它们同时更新子远程表。

# jakarta-ee - 在运行时扩展 JPA 实体以添加一对多映射

> ID：12248189
> 
> 赞同：0
> 
> 时间：2012-09-03T12:47:12.620
> 
> 标签：jakarta-ee, jpa-2.0, eclipselink

我有一个要求，它迫使我在运行时扩展现有的 JPA 实体以添加一对多映射。我遇到了 ecliplselink wiki [http://wiki.eclipse.org/EclipseLink/Examples/JPA/Dynamic](http://wiki.eclipse.org/EclipseLink/Examples/JPA/Dynamic)。看起来非常吸引人。

它似乎在 Java SE 环境中工作。我可以在带有 glassfish 3.1.x 服务器的 Java EE 环境中使用相同的方法吗？

请告诉我。

谢谢， 奇尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T14:15:22.190

另见，

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Advanced_JPA_Development/External_Mappings](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Advanced_JPA_Development/External_Mappings)

和，

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Advanced_JPA_Development/Extensible_Entities](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Advanced_JPA_Development/Extensible_Entities)

这些应该在 Glassfish 中起作用。

# jquery - 如何在 jquery .css 函数上添加缓动效果？

> ID：12248202
> 
> 赞同：2
> 
> 时间：2012-09-03T12:47:50.113
> 
> 标签：jquery, easing, jquery-easing

使用 .CSS 函数时，如何将 Jquery 缓动效果添加到 jquery 脚本中？例如，在另一行中，我使它工作，但我不能使它与 .CSS 一起工作，我正在使用[jquery easing 库](http://gsgd.co.uk/sandbox/jquery/easing/)

```
$("#map").animate({height:300},1000, 'easeOutBounce'); 
```

我如何在这个 .css 脚本上实现它？

```
$('#comment-box').css('display','block'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:49:53.117

您可以在元素不透明度而不是显示属性上使用它。

```
$("#map").css({opacity:0});
$("#map").animate({opacity:1}, 1000, 'easeOutBounce'); 
```

虽然我怀疑你会看到很多反弹效果。

显示是一种“开”/“关”类型的属性，不可能有数值分级。您可以像我建议的那样使用不透明度来获得效果，并在动画完成后使用回调设置显示属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T12:54:28.397

`.css`是不可动画的，这就是`.animate`目的。也就是说，我不认为`display`它是可动画的，因为它只是在不同的显示模式之间切换。你可以使用`.show()`and`.hide()`代替。

**编辑：** 啊，看来你想要`.slideDown()`。

试试这个：

```
$('div#comment').slideDown(1000, 'easeOutBounce'); 
```

也可以使用`.slideUp()`或`.slideToggle()`。

# ruby-on-rails-3 - Rails 在 before_filter 中使用 not 条件

> ID：12248203
> 
> 赞同：6
> 
> 时间：2012-09-03T12:47:51.630
> 
> 标签：ruby-on-rails-3, before-filter

我在我的应用程序中使用 before_filter。如果用户登录，我有一个`logged_in?`返回 true 的方法。

```
def logged_in?
  !!current_user
end

def current_user
  @current_user = (User.find(session[:user_id]) if session[:user_id]) || false
end 
```

现在在我的用户控制器中，我希望仅在用户未登录时才执行操作。为此，我想将**not**条件与`logged_in?`方法一起使用`before_filter`为：

```
before_filter :!(logged_in?) 
```

但这给了我一个错误。我拒绝为未登录创建一种新方法。

请帮我找出正确的语法来完成这个。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-03T18:04:05.450

虽然接受的答案似乎有效，但我会以不同的方式做。

```
before_filter :login_required, unless: :logged_in?

def login_required
  redirect_to login_path, notice: 'Please login'
end 
```

这将执行 login_required 方法，除非用户已经登录。有关更多信息，请参阅[http://robots.thoughtbot.com/post/159805303/before-filter-wisdom](http://robots.thoughtbot.com/post/159805303/before-filter-wisdom)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-03T13:14:12.003

您可以将块传递给`before_filter`：

```
before_filter { |c| !c.logged_in? } 
```

但这不会真正做任何事情，因为来自 before 过滤器的返回值不会去任何地方。如果您想在用户未登录的情况下执行操作，那么您应该将该操作放入 before_filter。

例如，如果操作是重定向到登录页面路径，您可以这样做：

```
before_filter { |c| redirect_to login_path unless c.logged_in? } 
```

这实际上足以证明它自己的方法是合理的：

```
before_filter :login_required

def login_required
  redirect_to login_path unless logged_in?
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-14T13:30:21.317

**application_controller.rb**

```
before_filter :authorize

def current_user
   @current_user ||= User.find_by(id: session[:user_id])
end
   helper_method :current_user

protected
def authorize
   unless User.find_by(id: session[:user_id])
     redirect_to login_url, :notice => "Not Authorize Member"
   end
end 
```

# java - 服务器客户端套接字中的空闲超时异常

> ID：12248206
> 
> 赞同：0
> 
> 时间：2012-09-03T12:48:10.237
> 
> 标签：java, sockets, nio, apache-mina

我正在开发一个服务器客户端项目，其中服务器是驻留在现场的网关，我们正在开发客户端。客户端计划连接服务器并获取数据。现在我的问题是服务器有 10 秒的空闲超时。如果服务器和客户端空闲 10 秒，服务器会自动断开客户端的连接。如何在客户端中捕获超时异常，因为发生超时，服务器没有机会向客户端发送任何消息，因此它正在关闭连接。

如果服务器由于某些网络故障而关闭客户端连接，则客户端会收到拒绝连接异常。同样，我想要空闲超时连接。请帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T21:40:11.210

> 如果服务器由于某些网络故障而关闭客户端连接，则客户端会收到拒绝连接异常。

不，它没有。如果服务器关闭*侦听*套接字并且您尝试建立新连接，您就会明白这一点。

客户端将在读取时收到 EOS 指示，或在写入时收到 IOException: "connection reset"。

只有这样你才能知道。

# c# - 从 javascript/jquery 调用 ac# methode 并获取结果

> ID：12248207
> 
> 赞同：0
> 
> 时间：2012-09-03T12:48:09.900
> 
> 标签：c#, javascript, jquery, asp.net

我在 ASP.Net，c# 应用程序中有一个对话框。这个对话框有一个文本框。当我选择保存时，我想从 C# 调用一个函数，该函数在数据库中进行一些验证，然后在 javascript/jquery 中获取结果。如果插入的值为 true 我想以其他方式关闭对话框以保持打开状态，但是在我从 c# 函数收到 true 后我无法成功关闭对话框。下面是代码：

ascx：

```
 <div id="popup" title="Choose Delegate">
        <label>Delegate<label><input type="textbox" value="" name="inputD" id=="inputD"/>
     </div> 
```

Javascript：

```
$('#btnAdd').click(function(e){
$('#divPopup').slow("show");
$('#divPopup').dialog({
      height:150,
      width:300,
      modal:true,
      buttons:{
               "close":function(){$(this).dialog("close");}
               "save":function(){
                  var obj=document.getElementid("inputD");

                  $.ajax({
                    type: "POST",
                    url: "add.aspx/check",
                    data: "{delegate: '" + obj.Value+"'}",
                    contentType: "application/json; charset=utf-8", 
                    dataType: "json",
                    success: function (msg) {
                          rez= "OK";
                          $(this).dialog("close");
                         },
                    failure: function () {alert("FAIL"); }});                    }
        });
      } 
```

C＃：

```
[WebMethode]
public static Boolean check(string delegate)
{
   .....

   return true;

  } 
```

C# 方法返回正确的值。

我也试试这个：

```
 $('#btnAdd').click(function(e){

           $('#divPopup').slow("show");
           $('#divPopup').dialog({
                       height:150,
                       width:300,
                       modal:true,
                       buttons:{
             "close":function(){$(this).dialog("close");}

            "save":function(){
                  var obj=document.getElementid("inputD");
                  var rez ;

                  $.ajax({
                    type: "POST",
                    url: "add.aspx/check",
                    data: "{delegate: '" + obj.Value+"'}",
                    contentType: "application/json; charset=utf-8", 
                    dataType: "json",
                    success: function (msg) {
                          rez= "OK";
                                                       },
                    failure: function () {alert("FAIL"); }
                 });       

                    if (rez="OK")
                          $(this).dialog("close");

         }
        }); 
```

但在这种情况下，它看不到 rez 值。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:56:51.700

您可以在“保存”：function(e) 中使用 Ajax 调用，如果关闭对话框，则检查返回值，否则保持打开状态

Ajax 调用实现起来真的很简单，我让你搜索一下 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:56:36.310

您需要服务器端的网络服务。（最好是 REST）

[http://restsharp.org/](http://restsharp.org/)是一个易于使用的库。

看看[这个问题](https://stackoverflow.com/questions/4970499/c-sharp-rest-api-client)以获取更多信息。

在前端，你对你的 REST api 进行 ajax 调用（我看到你使用 jquery，所以它不会那么难；））

# jquery - Jquery：选择最后一个可见的直接孩子

> ID：12248211
> 
> 赞同：5
> 
> 时间：2012-09-03T12:48:24.017
> 
> 标签：jquery

```
<div class="menu-items-wrapper" style="width: 547px;">
   <div class="one" style="height: 134px;">
   <div class="two" style="display:none;height: 134px;">
   <div class="other" style="height: 134px;">
   <div class="new" style="display: none; height: 134px;"></div>
</div> 
```

我希望从上面的 html 中获取最后一个可见的直接子级。请注意，每个子 div 中都有更多的 html，所以这就是我想要直接子的原因。

我现在拥有的

```
 jQuery(".menu-items-wrapper > div").find(":visible:last-child").css("border-right","0px"); 
```

或者

```
 jQuery(".menu-items-wrapper > div").find(":visible:last").css("border-right","0px"); 
```

但我不能让最后一个直接孩子没有边界。谁能帮忙

忘了提到我在页面中有 12 次这样的 div 并希望将其应用于所有出现。目前它只在最后一项上工作

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T12:51:54.113

`.find()`在给定的元素集中查找子元素，这里不会产生任何元素，因为执行它的集合是 DOM 中最低级别的元素。

您需要`:visible:last`立即向`div`选择器申请：

```
$(".menu-items-wrapper > div:visible:last").css("border-right","0px");​ 
```

[演示](http://jsfiddle.net/p8s5Q/)

因为`.find()`您必须在父节点上运行它：

```
$(".menu-items-wrapper").find("div:visible:last") 
```

要不就

```
$(".menu-items-wrapper").find(":visible:last") 
```

* * *

**编辑**

考虑到您在评论中的添加。在有多个`menu-items-wrapper`元素的场景中，`:last`不能以这种方式使用，因为它总是选择集合中的最后一个元素。另一方面`:last-child`，如果您总是想要每个容器中的最后一个元素，则可能会起作用，但这当然不是这种情况，因为最后一个孩子可能不是最后一个*可见*的孩子。

对于这种情况，您必须遍历容器：

```
$(".menu-items-wrapper").each(function() {
    $('div:visible:last', this).css("border-right","0px");
}); 
```

[演示](http://jsfiddle.net/ExTed/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:55:08.997

利用`jQuery('.menu-items-wrapper').children('div:visible:last').css(borderRight: '0px');`

# javascript - 我可以用纯 CSS 而不是使用 jQuery 来做到这一点吗？

> ID：12248212
> 
> 赞同：2
> 
> 时间：2012-09-03T12:48:24.523
> 
> 标签：javascript, jquery, css

目前，我在窗口调整大小事件中使用 jQuery 设置一些元素的宽度和高度，基于`window.innerWidth`和`window.innerHeight`.

像这样的东西：

```
$(".gr1").css("height", (window.innerHeight - 150) + "px"); 
```

这些是其他一些例子：

```
$(".gr2").css("width", ((window.innerWidth / 2) - 12).toString() + "px");
$(".box1").css("height", ((window.innerHeight - 150) / 3 - 12).toString() + "px");
$(".box2").css("height", ((window.innerHeight - 150) / 2 - 12).toString() + "px"); 
```

这在 Chrome 21 (Windows) 中呈现有点慢，在 iPad 和 Nexus 7 平板电脑中呈现太慢。（因为有许多带有`gr1`、`gr2`和`box1`类的元素`box2`）

我可以在纯 CSS 中执行此操作以提供更好的性能吗？如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T12:51:29.917

在没有看到您的 HTML 或 CSS 的情况下，我无法给您一个明确的答案，但如果您需要页面元素对调整大小的浏览器窗口做出反应，最好的解决方案是使用 % 宽度，并结合`min-width`并`max-width`设置具体的大小限制.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T12:51:37.450

你可以尝试缓存你的 jQuery 选择器，提高性能：

```
var gr1 = $('.gr1');
var gr2 = $('.gr2');
var box1 = $('.box1');
var box2 = $('.box2');
$(gr1).css("height", (window.innerHeight - 150) + "px");
$(gr2).css("width", ((window.innerWidth / 2) - 12).toString() + "px");
$(box1).css("height", ((window.innerHeight - 150) / 3 - 12).toString() + "px");
$(box2).css("height", ((window.innerHeight - 150) / 2 - 12).toString() + "px"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-03T12:54:19.753

您可以尝试使用[**`calc()`**](http://dev.w3.org/csswg/css3-values/#calc)，但[支持不是很好](http://caniuse.com/calc)（仅限于 IE9+、FF4+、Safari 6、Chrome 19+ 和 Firefox for Android）。

测试：[http ://dabblet.com/gist/3609183](http://dabblet.com/gist/3609183)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-03T12:52:41.370

[媒体查询](http://reference.sitepoint.com/css/mediaqueries)可能是要走的路，尽管这取决于您对“纯” CSS 的定义，因为媒体查询是 CSS3 的新内容，并且[在 IE 6/7/8 中不能完全](http://caniuse.com/css-mediaqueries)工作。

如果您不知道，它们仅通过基于屏幕/设备当前分辨率应用某些样式来工作。您可以查看[示例](http://www.responsivewebdesign.co.uk/)，调整窗口大小并查看内容如何变化？

这被称为[响应式网页设计](http://en.wikipedia.org/wiki/Responsive_Web_Design)

# c# - 确定字符串后删除字符串

> ID：12248215
> 
> 赞同：5
> 
> 时间：2012-09-03T12:48:30.893
> 
> 标签：c#, .net

我需要在一段文本中的另一个字符串之后删除某些字符串。我有一个带有一些 URL 的文本文件，在 URL 之后是操作的结果。我需要删除操作的结果，只留下 URL。

**文本示例：**

```
http://website1.com/something 结果：OK（仅注册模式开启）

http://website2.com/something 结果：问题已登记 100%（其他）其他字符串；

http://website3.com/something 结果：错误：“Âíèìàíèå, îáíàðóæåíà îøèáêà - Ìåñòî æèòåëüñòâà ñîäåðæèò íåäîóñòèìûå ê

```

我需要删除从**Result:**开始的所有字符串，所以剩余的字符串必须是：

```
http://website1.com/something

http://website2.com/something

http://website3.com/something 
```

没有**结果：........**

结果是随机生成的，所以我不知道**RESULT 之后的确切内容：**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-03T12:57:02.833

一种选择是根据其他一些答案使用正则表达式。另一个`IndexOf`紧随其后的是`Substring`：

```
int resultIndex = text.IndexOf("Result:");
if (resultIndex != -1)
{
    text = text.Substring(0, resultIndex);
} 
```

就我个人而言，我倾向于发现，如果我只使用几个*非常简单且易于理解的*字符串操作就可以逃脱，我发现这比使用正则表达式更容易。一旦你开始进入真正的模式（至少其中 3 个，然后是其中之一），那么正则表达式当然会变得更加有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:52:48.777

您可以尝试使用此代码 - 通过使用 string.Replace

```
var pattern = "Result:";
var lineContainYourValue = "jdfhkjsdfhsdf Result:ljksdfljh"; //I want replace test
lineContainYourValue.Replace(pattern,""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T12:54:21.530

```
string input = "Action2 Result: Problems registered 100% (SOMETHING ELSE) Other Strings; ";
string pattern = "^(Action[0-9]*) (.*)$";
string replacement = "$1";
Regex rgx = new Regex(pattern);
string result = rgx.Replace(input, replacement); 
```

你用`$1`ActionXX来保持匹配。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T12:57:08.087

为此使用正则表达式。

例子：

```
var r = new System.Text.RegularExpressions.Regex("Result:(.)*");
var result = r.Replace("Action Result:1231231", ""); 
```

然后您将在结果中显示“Action”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T12:57:13.077

Linq 方法：

```
IEnumerable<String> result = System.IO.File
    .ReadLines(path)
    .Where(l => l.StartsWith("Action") && l.Contains("Result"))
    .Select(l => l.Substring(0, l.IndexOf("Result"))); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-03T12:58:21.683

大概是这样的？

```
string line;
using ( var reader = new StreamReader ( File.Open ( @"C:\temp\test.txt", FileMode.Open ) ) )
   using ( var sw = new StreamWriter(File.Open( @"C:\Temp\test.edited.txt", FileMode.CreateNew ) ))
       while ( (line = reader.ReadLine()) != null )
          if(!line.StartsWith("Result:")) sw.WriteLine(line); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-03T12:59:58.077

您可以使用 RegEx 进行此类处理。

```
using System.Text.RegularExpressions;

private string ParseString(string originalString)
{
    string pattern = ".*(?=Result:.*)";
    Match match = Regex.Match(originalString, pattern);
    return match.Value;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-03T13:52:54.880

鉴于您当前的示例，您只需要网站，正则表达式匹配空格。

```
var fileLine = "http://example.com/sub/     random text";
Regex regexPattern = new Regex("(.*?)\\s");
var websiteMatch = regexPattern.Match(fileLine).Groups[1].ToString();
Debug.Print("!" + websiteMatch + "!"); 
```

对文本文件中的每一行重复。正则表达式解释： .* 匹配任何东西， ? 使匹配不贪婪，（括号）将匹配放入一个组，\\s 匹配空格。

# php - 从php中选择数据时MySQL表锁定多长时间？

> ID：12248219
> 
> 赞同：1
> 
> 时间：2012-09-03T12:48:41.313
> 
> 标签：php, mysql, database, locking

我目前正在玩 MySQL 和 PHP，我想知道表锁。从 MySQL 文档中，我知道 MySQL 应用了表范围的读取锁，这可能导致其他查询等待选择查询完成。

当我使用 PHP 查询数据时，如下例所示：

```
$dbConnection = mysql_connect($dbHost, $dbUser, $dbPass) 
mysql_select_db($dbName, $dbConnection) 

$qry = "select * from bigTable";
$result = mysql_query($qry, $dbConnection);

//Read Data

mysql_close($dbConnection); 
```

从 PHP 代码的角度来看，何时会从“bigTable”中删除读锁？

谢谢你，埃米

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T12:49:35.613

在读取查询结束时释放锁：

```
$result = mysql_query($qry, $dbConnection); 
```

因为您正在执行每个查询事务。

如果您想做更复杂的事务，请确保使用 innodb 引擎并启动事务：

```
mysql_query("START TRANSACTION", $dbConnection)
mysql_query("BEGIN", $dbConnection); 
```

然后做你的工作：

*   例如阅读一张桌子
*   然后写一些值等。

并提交或回滚事务：

```
mysql_query("COMMIT", $dbConnection);
mysql_query("ROLLBACK", $dbConnection); 
```

取决于您是否希望更改通过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:50:30.707

它被锁定，直到您选择的所有内容都被读取，具体取决于表引擎，锁定范围从整个表到行条目。

检查 innoDB 是否处于行锁级别

# jakarta-ee - maven耳朵/战争问题和“部署保存”不起作用

> ID：12248222
> 
> 赞同：4
> 
> 时间：2012-09-03T12:48:57.493
> 
> 标签：jakarta-ee, maven, netbeans

我有一个打包一个 ejb 模块和 2 个战争的 ear 项目。它们中的每一个都被声明为 Maven 依赖项。我使用 maven-ejb-plugin、maven-ear-plugin 和 maven-war-plugin。所有项目共享一个公共超级 pom，其中每个项目都声明为一个模块。

当我运行我的耳朵项目时，在战争中更改网络资源并不会在服务器上重新部署它，尽管我在所有可能的地方都选中了“保存时部署”（战争/耳朵）。

一些可能有用的信息：

*   我没有从 netbeans 生成 pom.xml。这些项目以前是 ant 项目，我通过模仿 netbeans 似乎从 ear/ejb/war 设置生成的内容进行了迁移。
*   我有时很难在我的战争文件中进行更改。我需要清理所有项目，停止服务器等。我想某处有问题。我想只是更改我的文件并运行 maven 安装（或点击“运行”或“调试”）应该可以工作吗？
*   我正在运行 ear 项目（不确定我是否应该以某种方式运行 superpom）。
*   启动浏览器时，Netbeans 没有运行正确的 url（ /XXX-1.0-snapshot 而不是 /XXX ，这是我指定的并且是实际工作的）。我总是必须在地址栏中手动编辑它。可能有关系吗？

编辑：在本地项目中看到这个：在本地项目中看到这个：

> 下载：[http ://repository.primefaces.org/be/valuya/xyzproj/XYZproj-ejb/1.0-SNAPSHOT/maven-metadata.xml](http://repository.primefaces.org/be/valuya/xyzproj/XYZproj-ejb/1.0-SNAPSHOT/maven-metadata.xml)

EDIT2：打开这个 netbeans 错误： http://netbeans.org/bugzilla/show_bug.cgi?id= [218806](http://netbeans.org/bugzilla/show_bug.cgi?id=218806)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T03:22:47.670

**deploy on save**：此选项仅在您将`netbeans.deploy`属性设置为 true 时适用（这意味着 netbeans 将处理您的 webapp 的部署，并将监控您的文件并在必要时执行重新部署）。在netbeans中，右键单击您的maven项目转到“属性”，在类别列表下选择“动作”，选择“运行动作”，您可以`netbeans.deploy=true`在“设置属性”文本框中指定。

**在战争中进行更改**：如果我没记错的话，您只会在修改静态网页内容（例如 html、css、javascript 等）时遇到这个问题。这是因为大多数服务器内存映射静态内容并出于性能目的锁定文件。您需要配置服务器以禁用内存映射文件。配置取决于您使用的服务器（glassfish/jetty/tomcat）。

**netbean 启动错误的 url**：netbeans 使用基于项目文件夹名称的 url。我也无法更改它（它总是重置），所以我猜这是一个 IDE 错误。

# ruby-on-rails-3 - Rails 3 中的持久子节点

> ID：12248227
> 
> 赞同：0
> 
> 时间：2012-09-03T12:49:09.357
> 
> 标签：ruby-on-rails-3

我正在开发一个具有父子模型的简单应用程序。问题是父母经常通过阅读文本文件来更新，但每个父母的孩子都是通过网络应用程序更新的。那么，每次我阅读创建新父母的文件时，如何让孩子与他们的每个父母保持联系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:02:02.840

好吧，最明显的事情是每次解析文件时都不要重新创建父母（这可能吗？）。使用`first_or_create`[（链接）](http://guides.rubyonrails.org/active_record_querying.html#find-or-build-a-new-object)不应该是痛苦的......

# windows-phone-7 - GTALK 支持 XMPP 个人事件协议

> ID：12248229
> 
> 赞同：0
> 
> 时间：2012-09-03T12:49:11.417
> 
> 标签：windows-phone-7, xmpp, google-talk

任何人都请澄清 gtalk 是否支持 PEP（个人事件协议 - PubSub 机制）。因为在我的 WP7 应用程序中由于功能未实现而出现错误。

例子：

```
<?xml version="1.0" encoding="UTF-8"?>
<iq from="msankeshwari@gmail.com/phoneFC07C39F" id="dcc3e8ea-5a40-4401-8843-9db4dd682b78" type="set">
<pubsub xmlns="http://jabber.org/protocol/pubsub">
    <publish node="http://jabber.org/protocol/geoloc">
        <item id="lastlocation">
            <geoloc xmlns="http://jabber.org/protocol/geoloc">
                <lat>47.64483</lat>
                <lon>-122.141197</lon>
                <acurracy>0</acurracy>
                <timestamp>2012-09-03T18:52:24.592+05:30</timestamp>
            </geoloc>
        </item>
    </publish>
</pubsub> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:24:04.890

要确定 GTALK 是否支持 PEP，您需要参考个人事件协议 (XEP-0163) 的[确定支持部分。](http://xmpp.org/extensions/xep-0163.html#support)根据规格，我将以下节发送到我自己的裸 jid：

```
<iq xmlns="jabber:client" type="get" from="jabberxmpplibrary@gmail.com/jaxl#0482f1a54bd2b72a91a384663b1f14ba" to="jabberxmpplibrary@gmail.com" id="3">
    <query xmlns="http://jabber.org/protocol/disco#info"></query>
</iq> 
```

并收到以下响应节：

```
<iq to="jabberxmpplibrary@gmail.com/jaxl#0482f1a54bd2b72a91a384663b1f14ba" from="jabberxmpplibrary@gmail.com" id="3" type="result">
    <query xmlns="http://jabber.org/protocol/disco#info">
        <identity category="account" type="registered" name="Google Talk User Account"/>
        <feature var="http://jabber.org/protocol/disco#info"/>
        <feature var="http://jabber.org/protocol/disco#items"/>
        <feature var="msgoffline"/>
    </query>
</iq> 
```

这表明 google-talk 不支持 PEP，因为服务器没有代表该帐户返回 pubsub/pep 的身份。

# jquery - jqGrid，用于复制行+其数据的自定义操作按钮（对于每一行）

> ID：12248235
> 
> 赞同：0
> 
> 时间：2012-09-03T12:49:19.840
> 
> 标签：jquery, jqgrid

我有一个非常基本的 jqGrid 表（#list），其中包含一列：操作。我以某种方式弄清楚如何添加自定义函数，但不知道如何生成代码以复制其内容（如果可能，使用 addrowData 方法）。到目前为止，这是我的代码：

```
(...)
    gridComplete: function () {
    var grid = jQuery("#list");
    var ids = grid.jqGrid('getDataIDs');
    //console.log(ids);
    for (var i = 0; i < ids.length; i++) {
        var rowId = ids[i];

        var cbutton = "<input style='height:22px;width:75px;' " + "type='button' value='Duplicate' " + "onclick=\"Duplicate('#list'," + rowId + ");\" />";
        grid.jqGrid('setRowData', rowId, {
            action: cbutton
        });
    }
(...) 
```

和自定义功能重复：

```
 Duplicate = function (table, Id) {
            console.log(table);//#list
            console.log(Id);//whatever row Id clicked
//need a way to duplicate the row

        } 
```

我想我可能会将所有值作为参数传递给函数，使用 addrowData 创建一个新行，然后执行 foreach 以使用数据 (myData) 填充行。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:06:40.083

这是我自己找到的解决方案，效果很好：

```
 Duplicate = function (table, Id) {
   newId = null;
   myData = jQuery(table).getLocalRow(Id);//or getRowData(Id)
   jQuery(table).jqGrid('addRowData', newId, myData, "after", Id);
   } 
```

# ruby-on-rails - 删除不适用于carrierwave_backgrounder

> ID：12248240
> 
> 赞同：1
> 
> 时间：2012-09-03T12:49:39.200
> 
> 标签：ruby-on-rails, delayed-job, carrierwave

当我使用carrierwave_backgrounder 渲染带有delayed_job 的视频时，我无法通过设置参数：remove_video 来删除视频。

:remove_video 包含在 attr_accessible 中。

我在模型中使用 store_in_background。

如果我注释掉“store_in_background”，删除视频确实有效

如何删除视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:49:39.200

解决方案是通过添加 contoller#update 在前台处理删除：

```
@model.process_video_upload = true if params[:model][:remove_video] == 1 
```

# java - 使用带有 Mysql 连接器的 html 运行 Applet

> ID：12248242
> 
> 赞同：1
> 
> 时间：2012-09-03T12:49:40.153
> 
> 标签：java, mysql, applet

嗨，伙计们，我有一个显示错误的小程序，如下所示。我的构建文件夹的屏幕截图也在那里 我在哪里放置 mysql-connector-java-5.1.13-bin.jar 文件以便它可以从 Web 浏览器连接到我的 Applet ？？？

Applet 运行良好当我手动运行它时，Mysql Jar 位于类路径中。 ![我的网络应用程序 Browswe](../Images/e1b53745d179253b5c8c9c2cb15d8f31.png)

这是我的构建目录： ![建造](../Images/5612ccfbf5da6573a061be71696b978e.png)

我的 Login.html 文件如下所示：

```
<HTML>
<HEAD>
<TITLE>MY Applet</TITLE>
</HEAD>
<BODY>

<H3><HR WIDTH="100%">My Applet<HR WIDTH="100%"></H3>

<P>
<APPLET codebase="classes" code="Login.class" width=350 height=200></APPLET>
</P>

<HR WIDTH="100%"><FONT SIZE=-1><I>Generated by NetBeans IDE</I></FONT>
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:24:52.773

它的小程序元素是：

```
<APPLET 
    codebase="classes" 
    code="Login" 
    archive="mysql-connector-java-5.1.13-bin.jar"
    width=350 
    height=200>
</APPLET> 
```

档案需要位于：

```
classes/mysql-connector-java-5.1.13-bin.jar 
```

但亚历克斯关于小程序不应直接访问数据库的部分是正确的。数据库应该放置在隐藏服务器详细信息、验证用户和规范用户活动的界面（例如网络应用程序）后面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:58:53.967

你永远不应该实现直接使用数据库的小程序。根据定义，Applet 在浏览器中运行，并且只能通过 HTTP 与服务器通信。您应该实现公开 Web 服务 API（soap、rest 等）的服务器端组件。服务器端组件应与 DB 一起使用，而小程序应与该组件公开的 API 一起使用。

编辑。但是，您可以将 mysql 驱动程序添加到小程序类路径。当数据库和浏览器都在同一台机器上运行时，它可能对您有用，但对于通常位于防火墙后面的普通用户来说会失败。

# php - 如何使用正则表达式替换 xml 标签之间的 < (<)？

> ID：12248245
> 
> 赞同：1
> 
> 时间：2012-09-03T12:49:41.493
> 
> 标签：php, xml, regex

我正在从数据库中获取 xml 数据作为字符串。我想**将 < 替换为 < ;** 在 xml 标签之间。例如：

```
 <smallelement> a<b </smallelement> 
```

被替换为

```
<smallelement> a &lt; b </smallelement>

i want to replace < with &lt; 
```

如果我使用字符串替换功能

```
 $content = str_replace("<","&lt;",$content);
it replaces element tag <smallelement> also like &lt ;smallelement.

   &lt;smallelement> a&lt;b &lt;/smallelement> 
```

我如何使用正则表达式来替换 xml 标签中的内容或有其他方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:37:35.717

好吧，这不是一个完美的解决方案，但是既然你已经有了脏 xml，我们可以尝试一个脏的解决方案，对吧？;)

```
$content = preg_replace('@<(/?)([a-z0-9_][a-z0-9_-]*)>@', ':::$1$2;;;', $content);
$content = str_replace('<', '&lt;', $content);
$content = preg_replace('@:::(/?)([a-z0-9_][a-z0-9_-]*);;;@', '<$1$2>', $content); 
```

1.  全部替换`<xmltags>`为`:::tagnames;;;`
2.  将所有剩余`<`字符替换为`&lt;`
3.  全部替换`:::tagnames;;;`为`<xmltags>`

同样，这远非完美，但如果您知道您必须期待哪个伪 xml，您也许可以通过这种方式处理它。当然，如果您`:::sometext;;;`的 $content 中已有字符串，则它不会起作用。

此外，标签必须仅包含 a-z0-9_-。

当然，如果你能以正确的方式使用有效的 xml 会更好，但如果你这样做了，我想你没有问过这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T05:05:24.503

这是代码

```
public static void main(String[] args) throws XPathExpressionException {
        String str = "<smallelement> a<b </smallelement>";              
        String newstr = "";
        boolean flaQG = false;
        boolean flaQL = false;      
        int lastIL = 0;
        HashMap<Integer, String> al = new HashMap<Integer, String>();

        for(int i = 0; i < str.length(); i++) {
            char c = str.charAt(i);
            if(c == '<') {      
                flaQG = false;
                if(!flaQL) {
                    flaQL = true;
                }else {
                    al.put(lastIL, "<");
                    flaQL=false;
                }           
                lastIL = i;
            }else if(c == '>') {
                flaQL = false;
                if(!flaQG) {
                    flaQG=true;
                }else {
                    al.put(i, ">");
                    flaQG = false;
                }           
            }
        }

        Iterator it = null;     
        int j = 0;
        boolean check = false;
        //System.out.println("length  "+str.length());
        final CharacterIterator cit = new StringCharacterIterator(str);
        for(char c = cit.first(); c != CharacterIterator.DONE; c = cit.next()) {
            it = al.entrySet().iterator();
            while (it.hasNext()) {              
                 Map.Entry pairs = (Map.Entry)it.next();
                 //System.out.println(pairs.getKey() + " = " + pairs.getValue());
                 if((Integer)pairs.getKey() == j) {
                     check= true;
                     if(pairs.getValue().equals(">")) {
                         newstr += "&gt;";
                     }else {
                         newstr += "&lt;";
                     }
                 }
            }
            //System.out.println(c);    
            if(!check) {
                 newstr += c;
            }else {
                check = false;
            }
            j++;
        }
        System.out.println(newstr);
    } 
```

注意：如果您的 xml 看起来像这样，上面的代码将不起作用

```
 <smallelement> a<b=b>c </smallelement> 
```

# windows - Windows / NTFS：目录中的文件数，不枚举它们

> ID：12248246
> 
> 赞同：1
> 
> 时间：2012-09-03T12:49:42.420
> 
> 标签：windows, filesystems

在 Windows 中是否有一种方法可以获取目录中的文件数量（非递归就足够了），而没有通过枚举它们的潜在重大开销`FindFirst/NextFile`？

目的是估计需要处理多少文件。
目录结构已知且不深，文件夹通常不包含未知文件。

由于数据不是继续运行所必需的，而且该文件夹实际上始终位于本地驱动器上，因此可以接受特定于 NTFS 的命令（前提是不需要提升）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:07:55.210

跟踪目录中的文件数量是一种开销，对文件系统没有任何好处，因此它们都没有这样做。

对于大多数用途，本地驱动器上的文件计数应该足够快。当然，处理文件所需时间的一小部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:07:29.073

假设 Indexing 服务正在运行并且目录被索引，我们可以查询目录并计算给定目录上的文件。

我不知道查询目录是否更快，这是我脑海中唯一的想法。

问候。

VB.NET 中的示例代码

```
Sub Main()

    Try
        ' Catalog Name
        Dim strCatalog As String = "System"

        Dim strQuery As String
        strQuery = "Select DocPageCount,DocTitle,Filename,Size,PATH,URL from SCOPE('shallow traversal of ""C:\Windows""')"

        Dim connString As String = "Provider=MSIDXS.1;Integrated Security .='';Data Source='" & strCatalog & "'"

        Dim cn As New System.Data.OleDb.OleDbConnection(connString)
        cn.Open()

        Dim cmd As New System.Data.OleDb.OleDbCommand(strQuery, cn)
        Dim rdr As System.Data.OleDb.OleDbDataReader = cmd.ExecuteReader()

        Dim files As Integer = 0

        While rdr.Read()
            files += 1
            Console.WriteLine("Path: {0} Filename: {1} Size : {2}", rdr("PATH"), rdr("Filename"), rdr("Size"))
        End While

        rdr.Close()
        rdr = Nothing
        cmd.Dispose()
        cmd = Nothing

        cn.Close()

        Console.WriteLine("Total Files: {0}", files)

    Catch ex As Exception
        Console.WriteLine(ex)
    End Try
End Sub 
```

更多信息：[使用 Microsoft 索引服务和 ASP.NET 搜索您的网站](http://idunno.org/articles/278.aspx)

# xcode - 试图用选择器视图的内容填充我的 *urL

> ID：12248248
> 
> 赞同：0
> 
> 时间：2012-09-03T12:49:53.100
> 
> 标签：xcode, video, playback, uipicker

嗨，任何人都可以帮助我，我正在尝试使用选取器视图的内容填充我的 *URL，以便我可以使用选定的选取器视图行来链接以播放选定的视频。即：如果pickerview显示“vid 1”，那么按下标有“播放vid”的UIRec按钮将播放vid 1，等等。任何帮助都非常感谢，任何帮助的人都会自动进入我的脑海“如果我中了彩票谁会得到一些钱”列表大声笑。欢呼佛朗哥

PS：除了如何从pickerview获取picker view信息到vid播放器之外，我已经设置了所有代码。默认为：

```
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]pathForResource:@"Video1" ofType:@"MOV"]]; 
```

只是给出一个路径名称，如果pickerview中的行读取Video1，video2等..我如何将此信息获取到pathforresource并将其默认为电影类型，即：mov，mpeg4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:33:32.097

我想你正在寻找`selectedRowInComponent`. 它将返回当前在您的选择器中选择的行。然后`if`在返回值上运行一个块，并从中设置您的 url 文件名和路径（实际上，`switch`对于您的选择器中的许多项目来说，a 可能会更好）。假设您的 UIPickerView 中只有 1 个段（因为只有 1 个轮子可以旋转，而日期选择器将有 3 个段，一个用于月，一个用于天，一个用于年），您想要的可能类似于：

```
- (IBAction)buttonClicked:(id)sender
{
    NSString *fileName;
    NSString *fileType;
    switch ([myPicker selectedRowInComponent:0])
    {
        case 0:
            fileName = @"Video1";
            fileType = @"mov";
            break;
        case 1:
            fileName = @"Video2";
            fileType = @"mpeg4";
            break;
        //more cases here depending on how many items are in your UIPickerView

        default:
            break;

    }
    NSURL *myURL = [NSURL fileURLWithPath:[[NSBundle mainBundle]pathForResource:fileName ofType:fileType]];

    //put in your code to play the video in myURL here
} 
```

# android - 在 HScrollview 中出现错误

> ID：12248250
> 
> 赞同：-1
> 
> 时间：2012-09-03T12:50:04.450
> 
> 标签：android, android-layout

```
java.lang.NullPointerException
at com.clarusapps.SwamiVivekananda.HScrollview.onTouchEvent(HScrollview.java:147)
at android.view.View.dispatchTouchEvent(View.java:5568)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2064)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1732)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2070)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1746)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2070)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1746)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2070)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1746)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2070)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1746)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2070)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1746)
at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1961)
at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1398)
at android.app.Activity.dispatchTouchEvent(Activity.java:2428)
at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1909)
at android.view.View.dispatchPointerEvent(View.java:5748)
at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3141)
at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2695)
at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:935)
at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2709)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:154)
at android.app.ActivityThread.main(ActivityThread.java:4974)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:23:37.907

尝试以下，它上次对我有用：

your_horizo​​ntal_scroll_view_object

```
final int availableToScroll = your_hsv_object.getChildAt(
    your_hsv_object.getChildCount() - 1).getRight() - scrollX - getWidth(); 
```

# jsp - 如何在 outputLink 值中传递 GET 参数？

> ID：12248251
> 
> 赞同：1
> 
> 时间：2012-09-03T12:50:05.550
> 
> 标签：jsp, jsf, hyperlink, http-request-parameters

我尝试过这样的事情，但它不起作用：

```
<h:outputLink id="cmdlink" value="newtopic.jsp?id=<%=Integer.parseInt(request.getParameter("parent"))%>"> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:01:42.867

尝试这样的事情

```
<h:outputLink id="cmdlink" value="newtopic.jsp">
    <f:param name="id" value="#{param['parent']}" />
</h:outputLink> 
```

关于`%3F`你实际上`?`被替换的那个`%3F`

# c# - 使用 C# 的多平台项目（iOS/OSX、Windows 和可选的 Android）

> ID：12248255
> 
> 赞同：1
> 
> 时间：2012-09-03T12:50:17.350
> 
> 标签：c#, 2d, multiplatform

我知道这种类型的问题已经被问了很多，但我真的找不到能确定我正在寻找的东西的东西，所以希望这不是一个“未经研究就问”的问题。

背景故事：我正在开发一个最初应该在 OSX/iOS 上运行的应用程序，但拥有 Windows 版本已经是必须的。我试图找出最简单的方法，让我在每个版本之间尽可能少地翻译，最好不用学习太多新东西（我有一点时间限制）。

*   我正在使用 C#，目前在 Mono 中开发
*   我习惯了 iPhone 上使用 MonoTouch 的 Cocoa API

所以，我的选择（正如我现在看到的那样）：

*   在 mac 上原生，这意味着必须为其他操作系统制作单独的图形例程 - 使 mac 版本变得容易，我可以推迟其他端口的任何学习曲线，但是我想在移植时需要更多的干预
*   使用某种 XML 标记或 HTML/JavaScript 作为表示层，并带有触发后端事件的链接挂钩（我不知道这在不同平台上的效果如何） - 需要我学习一点 JQuery，但它看起来很简单
*   让它成为一个 XNA 项目并使用 MonoXNA（或类似的）来移植 - 需要我学习足够的 XNA 才能做到这一点，不知道这是否很痛苦
*   使用我不知道的其他多平台 2D 套件

基本上，我需要动画 2D 精灵、鼠标和触摸输入，如果有移动关键帧和旋转，那就太好了。

当然，还有声音，但在所有平台上播放声音文件似乎都很简单，编写特定于平台的文件应该不会太麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:10:00.857

看看[MonoGame](http://monogame.codeplex.com/)。我认为它应该非常适合您的需求。

# c# - 互操作 Excel C# 以 A1 样式获取带有命名范围的范围公式（示例：C11= 收入 - 收益 --> 如何获取 --> C11= B4-B5）

> ID：12248268
> 
> 赞同：0
> 
> 时间：2012-09-03T12:51:14.300
> 
> 标签：c#, excel, interop, range, formula

一切尽在标题中，

我会得到一个“单元格格式”的范围公式。

该公式已将范围命名为收益或利润，因此我使用 formula.ToString() 得到的公式是 --> = beneftis -profits

但我想获得像 =C4-C5 这样的“单元”A1 样式

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:10:18.030

您可以获取工作簿名称，然后将名称替换为公式中的地址。如果 _App 是您的 excel 实例：

```
Dictionary<string, string> nameDict = new Dictionary<string, string>();
foreach (Microsoft.Office.Interop.Excel.Name aName in _App.Names)
    nameDict[aName.Name] = ((String)aName.RefersTo).Substring(1); // the address starts with an '='
string fString = formula.ToString();
foreach (KeyValuePair<string, string> kvp in nameDict)
    fString = fString.Replace(kvp.Key, kvp.Value); 
```

# wordpress - 如何在多个 amazon ec2 微型实例中设置 wordpress 站点

> ID：12248270
> 
> 赞同：3
> 
> 时间：2012-09-03T12:51:22.337
> 
> 标签：wordpress, amazon-web-services, load-balancing, multiple-instances

总的来说，我是 AWS 和云计算的新手。对于个人项目，我在 amazon ec2 上创建了一个微型实例，并安装和配置了一个 wordpress 多站点站点。对于数据库，我使用 RDS 实例。

我的问题是，如何创建第二个微实例来提供相同的内容并使用负载均衡器将流量分散到这两个实例？我想这样做，以便如果第一个 EC2 实例崩溃，那么它将从第二个实例获得服务，并且站点不会关闭。

感谢您的帮助，对于任何与英语相关的错误，我们深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-02T10:26:14.500

就 wordpress 安装而言，有 2 个主要组件。

*   WordPress 数据库
*   Wordpress 文件（应用程序文件，包括插件、主题等）

**数据库**

*   为了启用自动扩展设置并确保一致性，您需要在自动扩展 EC2 实例之外拥有数据库。如您的问题所述，这是在 RDS 中，因此不会成为问题

**第二个 EC2 实例**

*   第 1 步：首先从现有实例创建您的 Wordpress 实例的 AMI。

*   第 2 步：从此 AMI 启动一个新的 EC2 实例，该 AMI 是您从第一个实例创建的。*这将产生 2 个 EC2 实例。Instance 1（带数据库的原版）和Instance 2（Instance 1的副本）*

**但是，您在实例 1 中所做的任何更改都不会反映在实例 2 中。**

如果您想摆脱这个问题，请考虑使用 EFS 服务跨 2 个 EC2 实例创建共享卷，并将 wordpress 安装配置为从该 EFS 卷工作。这样，您的安装文件和其他内容将位于两个 EC2 实例通常访问的共享 EFS 卷中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:32:12.333

您必须将数据库移出本地主机（我猜您在同一个微型实例上拥有它），或者移到另一个 ec2 实例，或者最好移到 RDS 实例。

之后，您需要将您的 ec2 实例复制到另一个 ec2 微实例，并将两者放在负载均衡器后面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-02T06:15:52.960

首先创建您已配置 word press 的现有 micro ec2 实例的图像

二、创建经典负载均衡器

第三，使用您创建的上述 AMI 创建启动配置 (LC)。

第四，创建具有上述 LC、ELB 的 Auto Scaling 组，并将组大小计数保持为 2。这将确保您有 2 个实例一直在运行，如果有任何实例出现故障，ASG 将从 AMI 创建另一个新实例并终止失败的实例。参考 - [https://docs.aws.amazon.com/autoscaling/latest/userguide/as-register-lbs-with-asg.html](https://docs.aws.amazon.com/autoscaling/latest/userguide/as-register-lbs-with-asg.html)

或者，如果您愿意，也可以使用弹性豆茎 - [https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/php-hawordpress-tutorial.html](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/php-hawordpress-tutorial.html)

谢谢

# jquery - jQuery 手风琴 - 在页面加载时打开项目

> ID：12248276
> 
> 赞同：2
> 
> 时间：2012-09-03T12:51:47.257
> 
> 标签：jquery, accordion, jquery-ui-accordion

我有一个基于[http://www.stemkoski.com/stupid-simple-jquery-accordion-menu/的真正简单的 jQuery 手风琴](http://www.stemkoski.com/stupid-simple-jquery-accordion-menu/)

一切正常，但我希望它在页面加载时自动打开列表中的第一项

我在[http://jsfiddle.net/HJ8c7/的 jsfiddle 中拥有一切](http://jsfiddle.net/HJ8c7/)

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T12:56:38.853

做：

```
$( "#accordion" ).accordion( "option", "active", 0 ); 
```

它将打开第一个元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T13:00:00.847

你可以通过 jquery 来完成

```
$(document).ready(function() {
 $(".accordionButton:first").trigger("click");
}); 
```

[js小提琴演示现场](http://jsfiddle.net/HJ8c7/1/)

jquery trigger mathod用于触发事件

```
.trigger( eventType [, extraParameters] ) 
```

参考： [jQuery 触发器](http://api.jquery.com/trigger/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-03T12:58:45.623

您可以通过触发 click 事件来轻松做到这一点。根据您的 jsfiddle 代码：

```
jQuery('div.accordionButton').click(function() {
    jQuery('div.accordionContent').slideUp('normal');    
    jQuery(this).next().slideDown('normal');
});

jQuery("div.accordionContent").hide();
jQuery('div.accordionButton:eq(0)').trigger('click'); 
```

除了你原来的问题，你可能想以不同的方式使用 jquery，这样你就不必一直使用“jQuery”。将 jquery 对象绑定到 $ 变量是很常见的：

```
jQuery(function($) {
     $('div.accordionContent:eq(0)').trigger('click');
}); 
```

# ruby - 嵌入红宝石的奇怪行为

> ID：12248279
> 
> 赞同：4
> 
> 时间：2012-09-03T12:51:56.767
> 
> 标签：ruby, embedded-ruby

我们在嵌入式 ruby​​ 应用程序上观察到一个奇怪的行为。我们已将代码精简到最低限度，并且能够重现该问题。以下是详细信息。

**1.红宝石代码**

```
#!/usr/bin/env ruby
#require "MyLibrary.so"   *// Works fine*
module AA
  class BC
    def initialize
    end

    def loadFunction
      require "MyLibrary.so" *//Gives error*
    end
  end
end

#Invoke the method  
AA::BC.new().loadFunction 
```

**2\. MyLibrary.so 的源代码**

```
#include "ruby.h"

const char loop[] =  
   "def loopFunc\n"  
     "puts \"HERE\"\n"  
   "end\n"  

   "begin\n"  
     "loopFunc()\n"  
   "rescue StandardError\n"  
     "puts $!\n"  
     "puts $!.class\n"  
   "end\n";  

void initialize()  
{  
     ruby_init();  
     ruby_init_loadpath();  
     rb_eval_string(loop);  
}

extern "C" void Init_MyLibrary()  
{
    initialize();
} 
```

当我们在 rb 文件的 loadFunction 中需要“MyLibrary.so”文件时，我们会收到以下错误

 **main:Object NoMethodError的未定义方法“loopFunc”**

但是，当我们在 rb 文件顶部需要时，一切正常。

我们的第一个猜测是 rb_eval_string() 在模块 AA 中执行。所以 loopFunc 是在模块 AA 中定义的，而不是全局的。因此正在报告 NoMethodError。当我们在 cpp 文件中调用 AA::BC.new().loopFunc() 时，该方法被成功调用；这证实了我们的猜测。

从嵌入式 ruby​​ 的角度来看，这是预期的行为吗，因为如果我们需要一个 rb 文件（而不是 .so），其代码与传递给 rb_eval_string 的代码相同，我们不会收到任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:35:43.287

rb_eval_string() 确实定义了调用它的模块中的方法。我们可以使用 rb_require/rb_load 来获得正确的行为。

# c++ - C++ 构造函数阻止成功编译

> ID：12248283
> 
> 赞同：4
> 
> 时间：2012-09-03T12:52:09.877
> 
> 标签：c++, copy-constructor, initializer-list

我在 C++ 中遇到了一个奇怪的问题，我很感激解释。此代码段无法编译：

```
size_t bufLength = 18;
char* buffer = new char[bufLength];
auto_array_ptr<char> pBuffer1 = buffer;  // fails
auto_array_ptr<char> pBuffer2(buffer); 
```

上面的第 3 行以`No viable constructor copying variable of type 'auto_array_ptr<char>'`. 请注意，下一行编译得很好。

Q1）这本身对我来说很奇怪。我认为在必要时将使用赋值进行初始化转换为使用初始化程序进行初始化。如果第二个成功，为什么第一个会失败？

Q2）但对我来说真正的难题是当我从类*中删除*构造函数时失败的行成功了：构造函数。我真的很难理解这里发生了什么。`auto_array_ptr``auto_array_ptr(auto_array_ptr)`

我可以在这里想象一个编译器可能在这里尝试做的场景：

1- 寻找一个 void `operator=(char *p)`。未找到。让我们看看我们是否可以提升论点 ( `buffer`)。2-啊啊，有一个`operator=(auto_array_ptr&)`。因此，如果我能晋升`buffer`为`auto_array_ptr`. 让我们寻找一个构造函数来做到这一点。3-啊啊有一个`auto_array_ptr(auto_array_ptr&)`构造函数。`buffer`因此，让我们使用该构造函数 ( )构造一个临时变量`temp`。4-现在尝试使用`operator=(auto_array_ptr&)`, 方法。但是很糟糕：它的论点不是`const`，我实际上不能使用它。报告错误。

但这种情况并不令人信服。一方面，编译器可能会注意到`const`问题出在第 2 步。此外，它可以`auto_array_ptr(char *)`直接使用而不是尝试提升 `buffer`. 然后，如果我将 a 添加`operator=(char *p)`到类中，则错误不会消失。最后，这并不能解释为什么*删除*`auto_array_ptr(auto_array_ptr&)`帮助。

当然你需要的来源`auto_array_ptr`。这里是：

```
template<class T>
class auto_array_ptr
{
public:
    auto_array_ptr(T *p = 0) : ptr(p) {}
    auto_array_ptr(auto_array_ptr<T>& a) : ptr(a.release()) {}  // remove this line to compile
    ~auto_array_ptr() {if(ptr != 0) {delete[] ptr; ptr = 0;}}

    void operator=(auto_array_ptr<T>& a) {if(&a != this) reset(a.release());}
//    void operator=(T *p) { if(p != ptr) reset(p);}    // adding this doesn't help

    T& operator[](int i) const {return ptr[i];}
    T& operator[](unsigned int i) const {return ptr[i];}
    operator T*() const {return ptr;}
    T* get() const {return ptr;}

    T* release() {T* tmp = ptr; ptr = 0; return tmp;}

    void reset(T *p = 0) {if(ptr != 0) {delete[] ptr;}; ptr = p;}

private:
    T *ptr;
}; 
```

该编译器是在 Mac OS X Lion 下的 Xcode 4.4 中运行的最新版本的 Clang。我相信它基于 LLVM 3.1。Xcode 4.5 中稍微更新的版本的行为完全相同。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T12:55:13.427

```
auto_array_ptr<char> pBuffer1 = buffer;  // fails 
```

创建并复制`temporary auto_array_ptr<char>`到.`buffer``pBuffer1`

```
auto_array_ptr(auto_array_ptr<T>& a) 
```

你`copy c-tor`收到`reference`。您无法绑定`temporary`到`reference`，因此编译失败。

> Q2）但对我来说真正的难题是，当我从 auto_array_ptr 类中删除构造函数时，失败的行成功了： auto_array_ptr(auto_array_ptr) 构造函数。我真的很难理解这里发生了什么。

编译器将`copy c-tor`创建`signature`

```
auto_array_ptr(const auto_array_ptr&) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T12:56:33.863

这是复制初始化：

```
auto_array_ptr<char> pBuffer1 = buffer;  // fails 
```

这会创建一个临时`auto_array_ptr<char>`的 from`buffer`然后使用**复制构造函数**for `pBuffer1`。（受优化）这会失败，因为复制构造函数被声明为：

```
auto_array_ptr(auto_array_ptr<T>& a) 
```

并且临时不能绑定到非`const`引用。将其更改为

```
auto_array_ptr(const auto_array_ptr<T>& a) 
```

这是直接初始化：

```
auto_array_ptr<char> pBuffer2(buffer); 
```

仅使用转换构造函数。

# java - 获取要绘制的数据样本

> ID：12248292
> 
> 赞同：1
> 
> 时间：2012-09-03T12:52:54.823
> 
> 标签：java, mysql, sql

我在 mysql 上有一个包含大量数据（如 >10000）的表，将所有数据加载到 Java 然后绘制图形似乎很慢。我只想得到几个点来绘制图形，但我不知道如何。比如，每 10 或 100 行获取数据。任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:05:56.500

如果您有一个自动增量字段，您可以使用余数（mod）简单地选择每 10 或 100 行：

```
SELECT actor_id, last_name FROM actor WHERE MOD(actor_id, 10) = 0; 
```

您还可以为每一行指定一个行号并限制您的结果：

```
SELECT actor_id, last_name, row_number FROM
(SELECT actor_id, last_name, @currentRow := @currentRow + 1 AS row_number FROM
actor JOIN (SELECT @currentRow := 0) Row) Data
WHERE MOD(row_number, 10) = 0; 
```

很酷的行号技术是由 Daniel Vassallo 提出的。[使用 MySQL，如何在表中生成包含记录索引的列？](https://stackoverflow.com/questions/3126972/mysql-row-number)

祝你好运 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:49:01.990

或者，您可以将整个区间 min(x) - max(x) 划分为 N 个区间，每个区间仅获得一个平均点。例如（这里有 10 个间隔）是这样的：

```
select round((x-@minx)/@step),avg(y) from PLOT_DATA,
(select @minx:=min(x),
        @maxx:=max(x),
        @intervals:=10, /*separated intervals count*/
        @step:=(@maxx-@minx)/@intervals
  from PLOT_DATA) t

group by round((x-@minx)/@step)
order by round((x-@minx)/@step) 
```

# objective-c - ARC 语义问题：指向非 const 类型“id”的指针，没有明确的所有权

> ID：12248294
> 
> 赞同：1
> 
> 时间：2012-09-03T12:53:09.957
> 
> 标签：objective-c, pointers, automatic-ref-counting

我在头文件中声明了这个 Objective-c 接口：

@interface 委托链：NSObject

{@保护

```
id          * delegate;
NSUInteger            numberOfDelegates;
NSUInteger            sizeOfDelegatesArray;
NSMutableDictionary * hashs; 
```

}

...

这是实现文件中使用变量委托的一段代码：

...

```
if( NULL == ( delegate = ( id * )realloc( delegate, ( sizeOfDelegatesArray + 10 ) * sizeof( id ) ) ) )
    {
        /* Error management... */
    } 
```

问题是，如果我尝试编译代码，编译器会响应头文件的此错误：ARC语义问题：指向非常量类型'id'的指针，没有明确的所有权

阅读其他帖子，我试图删除 * for id *delegate 因为类型 id 已经是一个指针，但在这种情况下程序会崩溃。

# ios - UIView 子视图未调整大小

> ID：12248296
> 
> 赞同：1
> 
> 时间：2012-09-03T12:53:23.627
> 
> 标签：ios, uiview, uiviewcontroller, autoresize

我正在开发一个通用应用程序。我有一个基于视图的应用程序，它有一个视图控制器。我正在添加一个`UIImageView`作为子视图。

我的问题是，如果我将 ImageView 放入`viewDidLoad`，它会在 iPad 中调整大小。

但是，如果我在按钮点击事件上动态地将 ImageView 添加到视图控制器，`UIImageView`则不会根据 iPad 调整大小。相反，它显示的是 320 x 480 尺寸的 ImageView。

注意：我的视图控制器`setAutoresizesSubviews`必须`YES`.

我的代码如下：

```
-(void)buttonTap
{    
    UIImage *img = [[UIImage alloc]initWithContentsOfFile:[[NSBundle mainBundle]pathForResource:@"main-bg" ofType:@"png"]];
    UIImageView *imgViewMainBG = [[UIImageView alloc]initWithImage:img];
    imgViewMainBG.frame = CGRectMake(0,0,320,480);
    imgViewMainBG.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    [self.view addSubview:imgViewMainBG];
    [imgViewMainBG release];
    [img release];
    img=nil;         
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:02:54.373

AutoresizingMask 是用于在 superView 的大小发生变化时根据 superView 的大小变化来改变所有子视图的大小，在添加子视图时不会调整子视图的大小。

但是您可以找到 self.view 的边界或框架，并根据该边界设置 imageView 的 frame 属性，如下所示

```
 [imgViewMainBG setFrame:CGRectMake(0, 0, self.view.frame.size.width,  
                                    self.view.frame.size.height)]; 
```

以便 imgViewMainBG 在 ipad 中完全可见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:16:41.797

尝试将图像视图的`contentMode`属性更改为`UIViewContentModeScaleToFill`.

# asp.net-mvc-3 - MVC3 如何为网站的不同版本提供服务

> ID：12248303
> 
> 赞同：1
> 
> 时间：2012-09-03T12:54:00.967
> 
> 标签：asp.net-mvc-3

我需要能够为每个客户提供整个网站的不同版本。当然是测试版与生产版，但提供一两个先前的生产版本会很好。鼓励客户定制，我不希望强迫所有客户遵循（预期的）发展步伐。

要服务的版本存储在数据库中。

从我目前阅读的内容来看，自定义视图引擎可能是实现这一目标的最直接方法，但在沿着这条道路前进之前，我欢迎任何建议和评论。

感谢洞察！埃里克

编辑：不只是观点不同；控制器、母版页、图像、CSS...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:05:42.160

如果有关哪个版本的规则显示给哪个用户，我猜他们需要先进行身份验证。如果是这种情况，您将有机会为用户设置 cookie。

我可能会在身份验证上设置一个 cookie，以确定向用户显示哪个版本，然后使用像 IIRF 这样的 URL 重写器来将该 cookie 设置为站点的 beta 版本的请求定向。

如果用户对测试版有问题，他们可以选择返回生产站点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:06:54.257

我沿着视图引擎路线走[如何实现自定义 RazorViewEngine 以在非标准位置查找视图？](https://stackoverflow.com/questions/9838766/implementing-a-custom-razorviewengine)

基本上它很简单，我们有相同的控制器模型等。所有的代码都是共享的。视图的呈现虽然基于“品牌”。所以视图引擎足够聪明，如果我是品牌 A，那么视图将位于 {standard view location}/brand/viewname 中。

虽然它是分层的，所以如果视图位于品牌文件夹中，它会使用该文件夹，否则它会回退到默认位置。它基本上是 MVC 用于查找视图源位置的标准模型的扩展。

# vb.net - TextBox1 不显示 listbox1 值

> ID：12248314
> 
> 赞同：-2
> 
> 时间：2012-09-03T12:54:49.060
> 
> 标签：vb.net, vb.net-2010

我是 Visual Basic 初学者，昨天我写了一本字典，给你输入的单词的反义词，所以我设计了这个表格

[url]http://img651.imageshack.us/img651/6115/errorbp.jpg[url]

顺便说一句，我将两个列表框作为数据库，因此代码将比较 textbox1.text = listbox1.text 那么它将命令 textbox2 附加列表框的值： textbox2.appendtext(listbox2.text) 但我什么也没发生代码：

公开课形式1

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
End Sub
Private Sub TnsBtn_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    If TextBox1.Text = TextBox3.ToString Then
        TextBox2.AppendText(ListBox2.Text)

    ElseIf TextBox1.Text = TextBox4.Text Then
        TextBox2.AppendText(ListBox1.ToString)

    End If
End Sub

Private Sub AddBtn_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
    ListBox1.Items.Add(TextBox3.Text)
    ListBox2.Items.Add(TextBox4.Text)
End Sub 
```

结束类，代码点没问题，因为昨天我完成了编码，程序运行良好，但我忘记保存它，所以我再次编码，上面的每件事都发生了这是昨天的程序

[http://www.mediafire.com/?tavne7xjyth7y7v](http://www.mediafire.com/?tavne7xjyth7y7v) 病毒总链接： [https ://www.virustotal.com/file/1d39429ae1498a744e1556188b7e8914526b7e2fbb2d4904c2b4ea22fb278dc7/analysis/1346676641/](https://www.virustotal.com/file/1d39429ae1498a744e1556188b7e8914526b7e2fbb2d4904c2b4ea22fb278dc7/analysis/1346676641/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:02:59.783

最初，您将文本框文本设置为“ListBox”而不选择任何特定内容，因此它在列表框上调用 ToString()，这就是您得到它的原因。

我会更改方法，以便您有一个 Dictionary 变量，如下所示：

```
 Public Sub Translate(input As String)
    TextBox2.Text = OppositeDictionaires(input)
  End Sub
  Public OppositeDictionary As New Dictionary(Of String, String)
  'Call as Add(TextBox3.Text, TextBox4.Text)
  Public Sub Add(input As String, opposite As String)
    OppositeDictionary.Add(input, opposite)
  End Sub 
```

从您的事件调用添加，然后从您的翻译事件调用翻译。然后，您应该按预期获得输出，如果您想向用户显示，仍将它们添加到列表框中，但通过字典对象处理后面代码中的翻译。

[http://msdn.microsoft.com/en-us/library/xfhwa508.aspx](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)

# .net - 查找使用 CollectionViewSource 分组创建的组数

> ID：12248315
> 
> 赞同：0
> 
> 时间：2012-09-03T12:54:52.160
> 
> 标签：.net, wpf, xaml, collectionviewsource

我有一个消息列表，我根据每条消息所属的服务器（serverId）对它们进行分组，如下所示 -

```
<CollectionViewSource x:Key="MessageTypesByServer"
                      Source="{Binding MessageTypes, Mode=OneWay}">
    <CollectionViewSource.GroupDescriptions>
        <PropertyGroupDescription PropertyName="ServerId" />
    </CollectionViewSource.GroupDescriptions>
</CollectionViewSource> 
```

并使用 a`Group Style`以这样的方式显示每个组`GroupBox`-

```
<GroupBox Margin="0,0,0,3"
          Header="{Binding Name}">
   <ItemsPresenter />
</GroupBox> 
```

现在，如果消息来自单个服务器，那么我不想在标题中显示 serverId，`GroupBox`为此我需要找出其中的组数`CollectionViewSource`；

如何在 XAML 中执行此操作？（我知道我可以在我的 VM 中找到它，并根据 VM 中的属性隐藏/显示标头等，但我想在 XAML 中执行此操作）。

**更新：**

我尝试像这样使用 CollectionViewSource.View -

```
<Style TargetType="{x:Type GroupBox}">
    <Setter Property="Header" Value="{Binding Name}" />

    <Style.Triggers>
        <DataTrigger Binding="{Binding View.Groups.Count, Source={StaticResource MessageTypesByServer}}"
                     Value="1">
            <Setter Property="Header" Value="No Server Name" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

但这不起作用， View 始终为空（在 Snoop 中看到时）。

**更新 2**

我能够让它与这样的转换器一起工作 -

```
<DataTrigger Binding="{Binding Path=., Source={StaticResource MessageTypesByServer},  
    Converter={ValueConverters:CollectionViewSourceToGroupCountConverter}}"
             Value="1">
    <Setter Property="Header" Value="{x:Static System:String.Empty}" />
</DataTrigger> 
```

和转换器逻辑 -

```
ICollectionView view = value as ICollectionView;
if (view != null)
{
    return view.Groups.Count;
}

return 0; 
```

虽然很好，但如果我能在没有转换器的情况下做到这一点，我会很高兴！有人知道为什么第一次更新中的代码不起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:28:31.093

您可以绑定到`CollectionViewSource`并访问该`View.Groups`属性，这是一个[可观察的组集合](http://msdn.microsoft.com/en-us/library/system.componentmodel.icollectionview.groups.aspx)——`cvs.View.Groups.Count`这就是您所追求的。

请记住，即使只涉及一台服务器，用户也应该能够以某种方式识别*哪一台*。

# asp.net-mvc-4 - 通过多个回发保持 MVC4 控制器数据

> ID：12248316
> 
> 赞同：0
> 
> 时间：2012-09-03T12:54:55.223
> 
> 标签：asp.net-mvc-4, viewbag

我有一个 MVC4 控制器，它多次调用它的视图，每次都使用一组不同的 ViewBags。视图通过以下方式根据这些 ViewBag 的存在与否来呈现 Form 的内容：

```
@using (Html.BeginForm())
{
    @if (ViewBag.Foo1 != null)
    {
        @Html.DropDownList("Bar1",....
    }

    @if (ViewBag.Foo2 != null)
    {
        @Html.DropDownList("Bar2",....
    }

    <input name="ActionButton" type="submit" value="Ok"" />
} 
```

每次用户单击提交按钮时，控制器都会检查集合中的内容，并在再次调用视图之前创建一组新的 ViewBags，有点像这样：

```
public ActionResult Create()
{
    ViewBag.Foo1 = "blawblaw";
    return View();
}

[HttpPost]
public ActionResult Create(FormCollection collection)
{
    if (collection["Bar1"] != null)
    {
        string FirstPass = collection["Bar1"];
        ViewBag.Foo2 = "blawblaw";
    }

    if (collection["Bar2"] != null)
    {
        string SecondPass = collection["Bar2"];
        ViewBag.Foo3 = "blawblaw";
    }

    return View();
} 
```

我现在需要做的是以某种方式让每次通过控制器“记住”有关其先前通过的一些信息。也就是说，在我的示例中，第二次通过控制器（collection["Bar2"] 为 true 的那个），FirstPass 的值为 null。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:39:27.853

在这种情况下，请查看在 MVC 中实现向导的最佳实践。这里有一些[好的建议](https://stackoverflow.com/questions/297148/how-to-make-a-wizard-with-asp-net-mvc)。就个人而言，我仍然会考虑使用单独和不同的网址。此外，如果您的解决方案中有 db 访问权限，您仍然可以在更新主模型之前存储临时数据。想想如果用户第一次没有完成整个旅程，你想要发生什么......

# svn - 基于 Wso2 SVN 的部署同步

> ID：12248329
> 
> 赞同：-1
> 
> 时间：2012-09-03T12:55:47.967
> 
> 标签：svn, wso2, visualsvn-server, wso2esb

您好，我的 SVN（使用 VisualSVN）同步有问题，提交同步时日志文件输出错误：

```
 ERROR - CarbonDeploymentSchedulerTask Deployment synch
    ronization commit for tenant -1234 failed
    java.lang.RuntimeException: org.wso2.carbon.deployment.synchronizer.DeploymentSy
    nchronizerException: Error while committing artifacts to the SVN repository
            at org.wso2.carbon.deployment.synchronizer.internal.DeploymentSynchroniz
    erServiceImpl.commit(DeploymentSynchronizerServiceImpl.java:105)...

Caused by: org.wso2.carbon.deployment.synchronizer.DeploymentSynchronizerExcepti
on: Error while committing artifacts to the SVN repository
...
Caused by: org.tigris.subversion.svnclientadapter.SVNClientException: org.tigris
.subversion.svnclientadapter.commandline.CmdLineException: java.io.IOException:
Cannot run program "svn": CreateProcess error=206, The filename or extension is
too long
...
Caused by: org.tigris.subversion.svnclientadapter.commandline.CmdLineException:
java.io.IOException: Cannot run program "svn": CreateProcess error=206, The file
name or extension is too long... 
```

会吗？我的 \repository\components\lib 中是否需要任何其他库？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:20:38.363

*   **将“ SvnUrlAppendTenantId** ”的配置更改为true：

*   把 svn**存储库**放在CARBON_HOME/conf/components/lib

...现在没有错误，但他们不共享配置...我很困惑

# c++ - 如何从基类和派生类调用函数？

> ID：12248330
> 
> 赞同：0
> 
> 时间：2012-09-03T12:55:51.913
> 
> 标签：c++, oop, inheritance

我正在编写一段简单的代码。

```
class A
 {
   public:
   virtual func ()
    { // allocate memory 
    }
 };

class B : public A
 {
   public:
   func ()
    { // some piece of code
      // but call base class same function Ist 
    }
 }

 main()
    {
      A *ptr = new B;
      ptr->func () //here I want to call base class function first 
                   //and then derived class function
                   // How to implement ??
    } 
```

1.  如何先调用基类函数，然后从派生类调用相同的函数？？？。我不想显式调用每个函数，我只会调用派生类函数，并且应该自动调用基类函数。

2.  我不希望任何构造函数调用这些函数。

3.  有没有办法实现这个，或者这都是垃圾。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T12:58:53.783

在以下实现中调用`func`父类的方法（您需要显式执行此操作）`B`：

```
class B: public A
{
    public:
    func()
    {
        A::func();
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:58:45.637

您可以`A::func()`显式调用。

```
class B : public A
 {
  public:
   void func ()
    {
      A::func(); // call base class func()
      // some more code 
    }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T12:59:41.087

你不能安排它自动发生；您必须从派生类覆盖中调用基类函数：

```
void B::func() {
    A::func(); 
    // then do something else
} 
```

# rabbitmq - 如何在rabbitmq + pika中进行发布者超时

> ID：12248331
> 
> 赞同：1
> 
> 时间：2012-09-03T12:56:00.537
> 
> 标签：rabbitmq, message-queue, pika

鉴于 rabbitmq 实现了流控制，这可能会减慢一些消息发布速度，如何使用超时。另外，由于 pika 也没有实现发布者确认，所以推荐使用哪种语言和库来发布代码

# asp.net - Asp.net if 语句

> ID：12248338
> 
> 赞同：0
> 
> 时间：2012-09-03T12:56:24.953
> 
> 标签：asp.net, vb.net

我的 IF 语句有问题。

此声明的目的是所有 3 名经理必须批准订单才能处理。

这是声明：

```
Dim RstAllchk
Dim RstAllchk_numRows
Set RstAllchk = Server.CreateObject("ADODB.Recordset")
RstAllchk.ActiveConnection = MM_DBConn_STRING
RstAllchk.Source = "SELECT comitee.OrderNo, comitee.Bart, comitee.Carel, comitee.Charl             FROM comitee WHERE (((comitee.OrderNo)='" + Replace(RstAllData__varOrderNum, "'", "''") + "'));"
RstAllchk.CursorType = 0
RstAllchk.CursorLocation = 2
RstAllchk.LockType = 1
RstAllchk.Open()
RstAllchk_numRows = 0

    if  (RstAllchk.Fields.Item("Bart").Value)= "Approved" then
if  (RstAllchk.Fields.Item("Carel").Value)= "Approved" then
    if  (RstAllchk.Fields.Item("Charl").Value)= "Approved" then 

set cdata1 = Server.CreateObject("ADODB.Command")
cdata1.ActiveConnection = MM_DBConn_STRING
cdata1.CommandText = " UPDATE TblOrderData SET Fldapproved = 'Approved'  WHERE FldOrderID  = '" & RstAllData__varOrderNum  & "'" 
cdata1.CommandType = 1
cdata1.CommandTimeout = 0
cdata1.Prepared = true
cdata1.Execute()
cdata1.ActiveConnection.Close

set cdata2 = Server.CreateObject("ADODB.Command")
cdata2.ActiveConnection = MM_DBConn_STRING
cdata2.CommandText = " UPDATE TblOrderDetail SET FldMainapproved = 'Approved'  WHERE FldOrderNum  = '" & RstAllData__varOrderNum  & "'"
cdata2.CommandType = 1
cdata2.CommandTimeout = 0
cdata2.Prepared = true
cdata2.Execute()
cdata2.ActiveConnection.Close 
```

`

有时，如果只有一位经理确认了订单，订单仍然被批准。这几天我一直在为此苦苦挣扎。希望大家能给我一些建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:58:27.103

假设 VB.NET：

```
IF (RstAllchk.Fields.Item("Bart").Value = "Approved" AND _
    RstAllchk.Fields.Item("Carel").Value = "Approved" AND _
    RstAllchk.Fields.Item("Charl").Value = "Approved") THEN 
```

在 C# 中：

```
if (RstAllchk.Fields.Item("Bart").Value == "Approved" &&
    RstAllchk.Fields.Item("Carel").Value == "Approved" &&
    RstAllchk.Fields.Item("Charl").Value == "Approved") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:58:48.383

使用 C#（&& 是 And ， == 是相等的）

```
if ( RstAllchk.Fields.Item("Bart").Value == "Approved"

 &&  RstAllchk.Fields.Item("Carel").Value == "Approved"

 && RstAllchk.Fields.Item("Charl").Value == "Approved"
)

{

   //treatment

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:59:53.117

你可以合并所有喜欢

```
(if var1 == x && var2 == y && var3 == z) {
    //Do what you want
} 
```

# magento - 前端开发magento表单

> ID：12248345
> 
> 赞同：1
> 
> 时间：2012-09-03T12:56:48.570
> 
> 标签：magento

我正在为 magento 开发一个扩展。我想在前端添加一个表单来添加“标题”和“描述”。我搜索了很多但没有找到好的magento模块开发教程有人请指导我如何为magento添加表单及其验证

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:54:32.803

请参阅下面的内容，这对您很有帮助。

**具有自定义数据库表的自定义模块**

[http://www.magentocommerce.com/wiki/5__-_modules_and_development/0__-_module_development_in_magento/custom_module_with_custom_database_table](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/custom_module_with_custom_database_table)

**Magento Commerce 的前端编辑器扩展**

[http://www.youtube.com/watch?v=ALgdsMCVuH4](http://www.youtube.com/watch?v=ALgdsMCVuH4)

请查看上面的 URL，如果不起作用，请告诉我。

# code-coverage - lcov 问题生成输出文件

> ID：12248346
> 
> 赞同：0
> 
> 时间：2012-09-03T12:56:49.050
> 
> 标签：code-coverage, gcov, lcov

我一直在尝试获取我一直在使用 lcov 运行的一些测试用例的代码覆盖率。

但是，当我跑步时

```
lcov --directory $PWD --capture --output-file lcov.output 
```

我收到警告

> geninfo：警告：在 .bb 文件中找不到 test.c.gcov 的条目，正在跳过文件！

如果我直接在 test.c 上运行 gcov，我可以生成一个成功显示利用率的 gcov 输出。

我是代码覆盖的新手。我们将不胜感激任何解决此问题的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:51:22.007

在某些时候，gcov 格式发生了变化。基本上这个问题是因为当前版本的 gcov 产生了一个带有源文件名等的头文件。Lcov 期望这个头文件并试图提取这个失败，它显示了错误。

作为一种解决方法，我修改了 LCOV 代码，如果返回的标头为空，则直接从 gcov 文件名假定源文件名。此解决方案可能不是最优雅的，因为如果创建 gcov 文件的名称与源文件名不同，它可能会导致不兼容

更新：这个特殊问题是由于 lcov-1.8 中的一个错误造成的。lcov-1.10 的版本应该对此进行修复。( [http://ltp.cvs.sourceforge.net/viewvc/ltp/utils/analysis/lcov/bin/geninfo?r1=1.106&r2=1.107](http://ltp.cvs.sourceforge.net/viewvc/ltp/utils/analysis/lcov/bin/geninfo?r1=1.106&r2=1.107) )

# c++ - 等效于 CTypedPtrList 的标准 C++

> ID：12248353
> 
> 赞同：3
> 
> 时间：2012-09-03T12:57:05.800
> 
> 标签：c++, stl, mfc

我正在将 Windows 代码移植到 Linux，而且我是 C++ 新手。是否有等效于的标准 C++ 库[`CTypedPtrList`](http://msdn.microsoft.com/library/850101a7.aspx)？

它目前在代码中用于包含我们的一些类，如下所示：

`CTypedPtrList<CPtrList, OurClass*> variable_name;`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:02:22.790

不完全等价，但最好的选择是[std::list](http://en.cppreference.com/w/cpp/container/list)。

# javascript - 在特定文件夹上禁用 Eclipse Javascript 验证器

> ID：12248355
> 
> 赞同：6
> 
> 时间：2012-09-03T12:57:07.560
> 
> 标签：javascript, eclipse, validation

我想在某些文件夹上禁用 Eclipse 的 Javascript 验证，即由 Yii 填充的资产文件夹。我尝试通过在 Eclipse 中执行以下操作来添加验证过滤器以排除文件夹

1.  窗口 > 首选项 > 验证
2.  单击客户端 JavaScript 验证器的设置
3.  添加排除组 > 添加规则
4.  检查文件夹和文件名 > 选择我要排除的文件夹

但是，这似乎不起作用。Eclipse 仍然将几个 jquery 文件标记为错误。对此有何见解？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T03:57:07.143

客户端 JavaScript 验证器仅验证*客户端 JavaScript*，即网页中的内容。您要做的是将 jQuery 放入您指定为 Library 文件夹而不是 Source 文件夹的文件夹中（Libraries 不会由 JavaScript Validator 构建器验证 [您将在项目的 Properties 对话框的 Builder 页面上看到它]）。如果需要，您可以在项目的 JavaScript 包含路径中排除 Source 文件夹的子文件夹，以便为 Library 文件夹留出一个位置。

# java - 如何确定空格中的制表符大小？

> ID：12248360
> 
> 赞同：2
> 
> 时间：2012-09-03T12:57:35.127
> 
> 标签：java, string

我知道制表符 ('\t') 的大小取决于您输出它的位置。但是您将如何以编程方式测量它？那就是：如何找到打印等效'\t'字符所需的空格数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:07:10.983

您无法测量它，因为大小是在您将控制字符发送到的接口中定义并确定的

您**可以**做的是设置自己的制表符大小并计算您在该行中写入的字符，以计算您需要多少空格，因此有一个像制表符一样的标识

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:07:25.853

如果你通过这个[链接](http://java.sun.com/docs/codeconv/html/CodeConventions.doc3.html)，它会说“缩进的确切结构（空格与制表符）是未指定的。” 大多数是8个空格。但是我们能否知道您想要的确切数字的场景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:06:12.983

您可以显示一些带空格的文本和一些带制表符的文本，当它们排列得最好时，您可以说它们大致相同。问题是进行屏幕转储并检测您显示的位置。这。

无需猜测选项卡或空间有多大，您可以使用布局功能将文本放置在您想要的位置。在这种情况下，决定权在您手中。

# wpf - 我可以确定按下的键在哪个键盘上吗？

> ID：12248361
> 
> 赞同：5
> 
> 时间：2012-09-03T12:57:37.740
> 
> 标签：wpf, keyboard

我的应用程序的用户有第二个带有特殊功能键的键盘。不幸的是，按键映射到 F、G、F1 等按钮。我想处理 PreviewKeyDown 并防止这些键盘上的任何键对普通控件（例如 TextBoxes）产生影响。

在 WPF 中，有没有办法确定哪个键盘引发了事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:51:39.420

不，这不可能直接在 WPF 中。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-04T12:05:22.623

使用 System.Windows.Input 您可以通过捕获在您的代码中触发的事件来实现此目的。下面的示例代码显示了如何在 Textbox 中完成此操作。

```
private void SampleTextbox_PreviewKeyDown(object sender, KeyEventArgs e)
        {
            if (e.Key == Key.Delete) // delete key is pressed
            {
                e.Handled = true; // Ignore key press
            }
        } 
```

# .net - Workflow Foundation 项目中来自 Visual Studio 的奇怪异常

> ID：12248364
> 
> 赞同：0
> 
> 时间：2012-09-03T12:57:51.760
> 
> 标签：.net, wpf, workflow-foundation-4

当我尝试创建活动实例时，出现“找不到类型或命名空间名称”异常。目标框架是 .Net4（完整配置文件）

WF定义如下：

```
<Activity x:Class="MyApp.Workflow.MyWorkflow " ...> 
```

它还不包含任何活动代码，只是创建了它。我的调用代码：

```
using MyApp.Workflow;
MyWorkflow workflow = new MyWorkflow(); 
```

我确保引用了工作流的 xaml 中引用的所有 dll。有人知道我还能检查什么吗？

**编辑**- 尝试以下：

*   向项目添加新活动
*   转到任何源代码文件并添加对活动构造函数的调用（带有语法突出显示和代码完成 - 智能感知识别类型）
*   重新编译

结果：工作流的类型 (MyApp.Workflow. **MyWorkflow** ) 未知。当我在另一个具有完全相同引用的解决方案中做同样的事情时，它会正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:47:49.380

请执行这些步骤

1.  清洁解决方案。
2.  构建解决方案。
3.  添加参考。
4.  在工作流中导入命名空间，工作流设计器的底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:53:49.577

好的，终于找到了。XAML 解析器中似乎存在导致这种情况发生的错误。它可以很容易地复制：

*   创建 WPF 项目
*   将`WF`Activity 添加到该项目并在某处调用该 Activity 的构造函数
*   按 F6 开心就好
*   添加`xmlns:xyz="clr-namespace:Namespace.That.Contains.Controls"`到您的窗口代码。如果您不想创建控件，只需使用定义窗口的命名空间即可。
*   按 F6 并查看如何无法再解析活动。如果活动在其跨越的命名空间内，则命名空间将不存在，否则活动的类型将不存在。

该死的，这花了我一整天的时间……

# php - 案例，当“document.ready”阻碍时

> ID：12248366
> 
> 赞同：0
> 
> 时间：2012-09-03T12:57:56.047
> 
> 标签：php, javascript, jquery

我有 php 文件，在这个文件中我有这个代码：

```
 <script language="JavaScript" type="text/javascript" src="jquery.js"></script>
    <script language="JavaScript">
        $(document).ready( function () {
            var myvar = <?php   echo json_encode($myvar);   ?> ;
        });
    </script>
    <script language="JavaScript" type="text/javascript" src="costum.js">  </script> 
```

在 costum.js 文件中我有代码：

```
$(document).ready( function () {
    alert(myvar );
}); 
```

这不起作用，错误控制台返回“myvar 未定义”

如果在 php 文件中我写了这个（也就是说，没有“document.ready”）

```
 <script language="JavaScript">
     var myvar = <?php   echo json_encode($myvar);   ?> ;
 </script> 
```

在 costum.js 文件中，代码已经在工作了。请说说为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T12:59:30.813

尝试

```
<script>
    var myvar;
    $(document).ready( function () {
        myvar = <?php   echo json_encode($myvar);   ?> ;
    });
</script> 
```

您的变量必须声明为全局（或者换句话说，在外部范围内）才能从两个`document.ready`函数中查看。

作为旁注`language`属性不是必需的。甚至`type`没有必要（如果您使用的是`html5`doctype）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:00:37.873

您`myvar`在 ready-function 的本地范围内。将`var`声明移到外部以使其全局并可用于其他脚本。

但是，由于您只是分配给一个变量，因此您无论如何都不需要等待 DOMready。只需使用

```
<script type="text/javascript">
    var myvar = <?php echo json_encode($myvar); ?>;
</script> 
```

顺便说一句，该`language`属性[已弃用](https://stackoverflow.com/a/112515/1048572)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T13:00:45.783

函数内部的局部变量只在函数范围内可见。

当您在全局范围内声明变量时，它就是全局变量。

您可以通过以下方式将其公开到全局范围：

```
$(document).ready( function () {
      var myvar = <?php   echo json_encode($myvar);   ?>;
      window['myvar'] = myvar;
 }); 
```

# c - 将字符传递给C中的函数时出错

> ID：12248378
> 
> 赞同：0
> 
> 时间：2012-09-03T12:58:33.227
> 
> 标签：c

我有以下功能

```
int namecomp(char c); 
```

部分功能代码

```
else if (c == 'b' || 'B')
    i=2; 
```

我叫它的方式`main()`

```
j= namecomp(s); 
```

并`s`定义为`char s = 'B';`

有一个错误，每当我尝试使用`j`该值时，它总是`1`主要的。请帮助我知道错误的确切位置。谢谢！

**编辑**：对不起，这些都不起作用。我发布了完整的代码以寻求帮助

```
int main (int argc, char* argv [])
{
int i;                  
int j;
char s = 'B';
j= namecomp(s);
printf ("%d",j);
}

int namecomp(char c)
{
int i;

    if (c == 'a'||'A') 
        i=1;

    else if ((c == 'b' || c == 'B'))
    i=2;

    return i;

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-03T12:59:54.067

```
c == 'b' || 'B' 
```

总是计算为`1`，因为它被解析为

```
(c == 'b') || 'B' 
```

我打赌你想要

```
(c == 'b') || (c == 'B') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:00:55.570

这

```
(c == 'b' || 'B') 
```

应该：

```
(c == 'b' || c == 'B') 
```

否则，您将对此进行测试：

```
((c == 'b') || 'B') 
```

这与

```
((c == 'b') || true) 
```

因为`'B'`是非零的。

请记住，逻辑和/或符号不能*在*逻辑测试中使用，只能将逻辑测试连接在一起。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T13:01:15.120

你写了

```
(c == 'b' || 'B')    // this can be ( (c=='b') || 'B') in your compiler 
```

你的意思是

```
(c == ('b' || 'B')) 
```

或者

```
( (c == 'b') || (c=='B') ) 
```

你应该使用后者。

您应该以偏执狂的方式处理这些条件，以确保它满足您的条件。如果它适用于所有条件，那么您可以尝试不使用括号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T13:00:25.470

`c == 'b' || 'B'`总是计算为 1，因为`'B'`它是一个非零值，所以第二个操作数总是为真。

您需要同时测试您的状况。

```
if (c == 'b' || c == 'B') 
```

# android - Eclipse/Android Logcat：打开文件+从堆栈跟踪转到行

> ID：12248379
> 
> 赞同：0
> 
> 时间：2012-09-03T12:58:33.097
> 
> 标签：android, eclipse

在使用 Logcat 进行调试时，我希望能够通过单击堆栈跟踪中的行号来打开文件/滚动到一行 - 是否有任何插件或选项可以启用此功能？

UPD：面向 Web 开发人员的 Eclipse Java EE IDE。

版本：Indigo Service Release 2 内部版本 ID：20120216-1857

谢谢

# php - 为什么 strtotime('x') 返回明天的日期

> ID：12248380
> 
> 赞同：8
> 
> 时间：2012-09-03T12:58:34.753
> 
> 标签：php, strtotime

我无法理解这一点 - 为什么会发生以下情况？

```
echo date("d-m-Y", strtotime($str));

$str = '214454';  // Produces todays date
$str = '333333';  // Produces 1-1-1970
$str = 'a' (or ANY single char)  // Produces tomorrows date
$str = 'aa' (or ANY double char)  // Produces 1-1-1970 
```

或者只返回 strtotime 函数

```
echo strtotime($str);

$str = '214454';  // Produces todays date
$str = '333333';  // returns false
$str = 'a' (or ANY single char)  // Produces tomorrows date
$str = 'aa' (or ANY double char)  // returns false 
```

这些值来自我正在进行的一些测试，以尝试找出特定函数如何/为什么返回某些值。

它导致我的函数失败 - 因为您会假设“a”（或任何单个字符）作为错误的错误日期返回。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T13:11:23.650

单字符和双字符都被解释[为时区](http://www.php.net/manual/en/datetime.formats.time.php)（表“使用的符号”，行“tz”）；六位数字被解释为[`HHMMII`](http://www.php.net/manual/en/datetime.formats.time.php)（表“24 小时表示法”，行“小时、分钟和秒，无冒号”）。

## 有效格式

在第一种和第三种情况下，解析成功，`strtotime`返回一个时间戳并`date`打印它对应的任何日期。第一种情况成功的原因很明显；对于第三种情况，请记住[军事时区](http://en.wikipedia.org/wiki/List_of_military_time_zones)可以用一个字母表示，然后结果才有意义。让我们按照[以下代码](http://ideone.com/84MJK)：

```
$zones = range('a', 'z');
$last = null;

foreach($zones as $tz) {
    $ts = strtotime($tz);
    if ($last !== null) {
        echo "TZ $last[0] => TZ $tz: change = ".($ts - $last[1])."\n";
    }
    $last = array($tz, $ts);
} 
```

这打印

```
TZ a => TZ b: change = -3600
TZ b => TZ c: change = -3600
TZ c => TZ d: change = -3600
TZ d => TZ e: change = -3600
TZ e => TZ f: change = -3600
TZ f => TZ g: change = -3600
TZ g => TZ h: change = -3600
TZ h => TZ i: change = -3600
TZ i => TZ j: change = -1346649725
TZ j => TZ k: change = 1346646125
TZ k => TZ l: change = -3600
TZ l => TZ m: change = -3600
TZ m => TZ n: change = 46800
TZ n => TZ o: change = 3600
TZ o => TZ p: change = 3600
TZ p => TZ q: change = 3600
TZ q => TZ r: change = 3600
TZ r => TZ s: change = 3600
TZ s => TZ t: change = 3600
TZ t => TZ u: change = 3600
TZ u => TZ v: change = 3600
TZ v => TZ w: change = 3600
TZ w => TZ x: change = 3600
TZ x => TZ y: change = 3600
TZ y => TZ z: change = -43200 
```

你可以看到我们从一个时区到下一个时区的连续性；不存在时区的不连续性`'j'`（此处解析失败，结果相同，如下所述）；`'n'`我们从 UTC+12 移动到 UTC-1 等时区的不连续性。

## 无效格式

在第 2 和第 4 种情况下，解析失败，`strtotime`返回`false`，这与您调用的效果相同`date("d-m-Y", 0)`——它格式化了时代的开始（1970 年 1 月 1 日，00:00:00）。发生这种情况是因为按照正常[类型杂耍规则](http://www.php.net/manual/en/language.types.integer.php#language.types.integer.casting)`false`转换为整数。`0`

## `strtotime('x')`真正返回的是什么？

它返回 UTC-11 时区的当前时间（这是“x 射线”军事时区）。根据您的本地时间和时区，从您的角度来看，这通常是“今天”或“明天”。如果您恰好低于 UTC-11，那么它甚至可能是“昨天”（尽管[这不太可能](http://en.wikipedia.org/wiki/UTC%E2%88%9212:00)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T13:05:07.987

*   214454 被视为时：分：秒
*   333333 这是因为没有 33 小时

# php - PHP 观察者模式（推送策略）

> ID：12248381
> 
> 赞同：2
> 
> 时间：2012-09-03T12:58:36.097
> 
> 标签：php, oop

我需要在 PHP 中实现一个观察者设计模式。标准**SplObserver**接口的问题在于它的**update(SplSubject $subject)**方法不支持提供我需要的其他参数。

我必须像这样创建自己的界面吗？

```
interface PushObserver {
  public function update($sender, array $pushData);
} 
```

还是有一种更标准的方式不需要我的类的用户实现我自己的接口？我知道我不是唯一一个处理这个问题的人，但我还没有找到一篇关于这个问题的文章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:16:48.113

我不知道`$pushData`在观察者中要求对您是否真的很重要，但如果它只是可选的，您仍然可以实现或扩展`SplObserver`，但将其设为`$pushData`可选，它可以让您这样做：

```
class PushObserver implements SplObserver {
    public function update (SplSubject $SplSubject, Array $pushData = null) {}
} 
```

或者：

```
interface PushObserver extends SplObserver {
    public function update (SplSubject $SplSubject, Array $pushData = null);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:10:50.727

发件人知道 pushData，对吗？如果编辑发件人就足够了，为什么还要费心创建新界面呢？

只需将 getPushData() 方法添加到 $sender 即可检索该变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T01:03:51.417

在您的`SplObserver`中，修改您的`update`方法以反映：

```
public function update(SplSubject $subject, array $params = array()) 
```

然后`call_user_func_array`用来做剩下的。

# angularjs - angularjs：如何访问 ng-repeat 的当前元素

> ID：12248382
> 
> 赞同：7
> 
> 时间：2012-09-03T12:58:39.493
> 
> 标签：angularjs

我需要能够在指令中访问 ng-repeat 的当前元素。请参阅 jsfiddle：http: [//jsfiddle.net/terebentina/TVEnN/](http://jsfiddle.net/terebentina/TVEnN/)

我期待控制台中有一个哈希值（如 {width: 100, height: 100}），但我不确定如何做到这一点。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-03T13:15:02.670

这是一个有效的小提琴（并输出您所期望的）。

[http://jsfiddle.net/TVEnN/2/](http://jsfiddle.net/TVEnN/2/)

注意事项`ng-repeat`：

1.  `ng-repeat`总是为数组/对象中的每个元素创建一个 NEW SCOPE。
2.  当前元素在这个新范围内可用，作为`ng-repeat`. 例如：如果您已定义`ng-repeat = "page in pages"`，则当前元素在页面范围内可用。如果您定义`ng-repeat = "(key,value) in object"`了两者`key`并且`value`在这个新范围内可用。
3.  数组中的当前位置可用作`$index`。
4.  由于`ng-repeat`创建了一个新作用域并且所有作用域都从其父作用域继承`pages`，因此上面示例中的作用域在这个新作用域中仍然可用，这意味着您可以在需要时执行类似`$scope.pages.length`的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-20T19:37:35.187

除了@ganaraj 的回答：

使用过滤器时有一个陷阱。通过使用过滤器，例如按字母顺序排列项目，`$index`resp。该`key`变量不再表示项目在 items 数组中的实际位置，而是它在`ng-repeat`-block 中的当前位置。

看到[这个链接](http://codeutopia.net/blog/2014/11/10/angularjs-best-practices-avoid-using-ng-repeats-index/)

# c - 内联 Asm (x86) 的多编译器支持

> ID：12248392
> 
> 赞同：0
> 
> 时间：2012-09-03T12:59:06.793
> 
> 标签：c, assembly, x86, inline-assembly

对于内联 asm 代码，我`__asm`用于 vc++ 编译器和`__asm__()`/或`asm()`在 linux 下为 gcc 构造。（相应的 intel/at&t 语法）

有没有办法以通用的方式在 C 中为它们声明内联汇编（x86）？

PS 用于合并两者的自动化工具也是可以接受的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T13:28:49.643

将程序集放入宏中并使用预处理器生成正确的代码。

```
#ifdef GCC
#define MY_ASM_CODE __asm() { blah blah blah}
#endif

#ifdef MSVC
#define MY_ASM_CODE __asm { blah blah blah }
#endif

int main(void)
{
  MY_ASM_CODE;
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T07:52:54.683

作为备选...

我认为您使用 Visual C 是因为它是 Windows 平台？

为什么不在 Windows 和 Linux 平台上使用 gcc？

然后它是相同的源和相同的汇编格式！

# multithreading - 如何使用标签名称列表来启动线程

> ID：12248393
> 
> 赞同：0
> 
> 时间：2012-09-03T12:59:11.100
> 
> 标签：multithreading, common-lisp, sbcl

我想使用标签名称列表来定义以这些函数启动的线程的顺序/数量。但它不起作用，因为 SBCL 抱怨：

> DO-STUFF 不是 fbound。

例如：

```
(labels ((do-stuff (argI argII) (values argI argII))
         (do-stuff-II (argI argII) (values argII argI)))
  (mapcar #'(lambda(name)
              (sb-thread:make-thread name :arguments '(1 2)))
          '(do-stuff do-stuff-II do-stuff))) 
```

使用将列表扩展为：

```
(labels ((do-stuff (argI argII) (values argI argII))
         (do-stuff-II (argI argII) (values argII argI)))
  (let ((threads nil))
    (push (sb-thread:make-thread #'do-stuff :arguments '(1 2)) threads)
    (push (sb-thread:make-thread #'do-stuff-II :arguments '(1 2)) threads)
    (push (sb-thread:make-thread #'do-stuff :arguments '(1 2)) threads)
    threads)) 
```

有效，但由于使用了不必要的 let 和 push，这让我觉得不那么优雅。

**我该如何解决我的第一种方法？我必须写一个宏吗？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T13:14:49.347

我目前无法访问 SBCL 来对其进行测试，但问题似乎是您没有将函数传递给 MAKE-THREAD，而是在传递符号。

替换这个：

```
'(do-stuff do-stuff-II do-stuff) 
```

有了这个：

```
(list #'do-stuff #'do-stuff-II #'do-stuff) 
```

它应该工作。

# wpf - 设置扩展器的宽度以填充可用空间

> ID：12248396
> 
> 赞同：0
> 
> 时间：2012-09-03T12:59:17.883
> 
> 标签：wpf, xaml

我有一个`Listbox`扩展器项目，并希望它们填满整个可用的水平空间。

这是一个小例子

```
<Window x:Class="ExpanderTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <ListBox>
        <ListBoxItem>
            <Expander Background="Tan" 
                      HorizontalAlignment="Left" Header="My Expander" 
                      ExpandDirection="Down" IsExpanded="True">
                <TextBlock TextWrapping="Wrap">
                    Lorem ipsum dolor sit amet, consectetur
                    adipisicing elit, sed do eiusmod tempor incididunt ut
                    labore et dolore magna aliqua
                </TextBlock>
            </Expander>
        </ListBoxItem>
    </ListBox>
</Grid> 
```

如果我设置`Width="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ListBox}}, Path=ActualWidth}"`为`expander`，它的行为几乎与我想要的一样，只是扩展器有点太宽了。

xaml 中有没有办法告诉`ListBoxItem`或`Expander`填充所有可用的水平空间？

（如果宽度变小，高度应该相应变大以显示整个内容）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:28:59.587

ok, I found the solution, just add

```
ScrollViewer.HorizontalScrollBarVisibility="Disabled" 
```

to the ListBox.

# iphone - 禁用 iPhone 中按钮的点击事件

> ID：12248398
> 
> 赞同：8
> 
> 时间：2012-09-03T12:59:21.827
> 
> 标签：iphone, uibutton

我是 iPhone 开发的新手。

在我的应用程序中，

我想在用户第一次按下按钮时禁用按钮的单击事件。为此我尝试了

```
buttonname.Enable=FALSE; 
```

但是按钮的图像也像禁用一样被洗掉了。我想正确显示图像并且按钮应该被禁用，两者都在时间。该怎么办？请帮我。谢谢你的时间。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-03T13:08:16.503

设置`buttonname.userInteractionEnabled = NO;`这将禁用按钮名称的操作，但`UIButton`将显示。只有单击的事件不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-05T17:08:32.113

使用此代码可能会对您有所帮助

```
[buttonName addTarget:self action:nil forControlEvents:UIControlEventTouchDown]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T13:02:47.553

尝试将其`userInteractionEnabled`属性设置为`NO`.

# python - 从函数中调用 Python cProfile。（或其他在 Django 中使用 cProfile 的方式）

> ID：12248409
> 
> 赞同：3
> 
> 时间：2012-09-03T13:00:08.400
> 
> 标签：python, cprofile

如何从函数中调用 cProfile，使用它来调用和分析另一个函数？

我有一个函数 start()，它是从我的网页调用的（使用 Django）。在这个函数中，我放置了 cProfile 调用：

```
cProfile.run('my_function()') 
```

这给了我错误“未定义名称 my_function”。但是，如果我只是进行正常的函数调用，则调用该函数没有问题： my_function()

一切都说要使用 cProfile 执行“主”功能，但我真的没有一个主功能或一种明显的方式来运行我的程序，除了从网页。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T13:43:21.573

你需要`runctx`而不是`run`.

您可以将全局变量和本地变量传递给`cProfile.runctx`调用，如下所示：

```
cProfile.runctx('my_function()', globals=globals(), locals=locals()) 
```

# xslt - 使用 XSLT 将模板内容一分为三

> ID：12248412
> 
> 赞同：-2
> 
> 时间：2012-09-03T13:00:26.650
> 
> 标签：xslt

我想在我的 xslt 代码中动态地将表分成三个。给我结构以在特定节点处附加我的文本，例如如果我有 100 个节点，我需要在第 33 个第 66 个节点处附加我的文本。

## 我的 XSLT 代码：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">

<xsl:key name="routes-by-origin" match="/schedules/Routes/org" use="./text()"/>
<xsl:template match="schedules" name="Main">
<html>
<head></head>
<body>
<table>
<tr> <td> Heading </td> </tr>
<table>
<xsl:for-each select="Routes/org[generate-id(.) = generate-id(key('routes-by-origin',.)[1])]">
   <xsl:value-of select="./text()"/>
  <xsl:apply-templates select="//Routes[org/text() = current()/text()]"/>
     </xsl:for-each>
    </table>
   </xsl:template> 
```

从上面的模板调用的模板设计

```
 <xsl:template match="Routes">
  <xsl:value-of select="des/text()"/>
<xsl:variable name="via" select="Via/text()"/>
 <xsl:value-of select="Flgno/text()"/>
</xsl:template>
 </xsl:stylesheet> 
```

# 输入文件

```
<schedules>
    <Routes>
        <org>Agartala</org>
        <des>Bangalore</des>
        <Flgno>SG 872</Flgno>
        <Via>CCU, HYD</Via>
    </Routes>
    <Routes>
        <org>Agartala</org>
        <des>Guwahati</des>
        <Flgno>SG 873</Flgno>
        <Via> BOM </Via>
    </Routes>
    <Routes>
        <org>Agartala</org>
        <des>Hyderabad</des>
        <Flgno>SG 872</Flgno>
        <Via>CCU</Via>
    </Routes>
    <Routes>
        <org>Agartala</org>
        <des>Kolkata</des>
        <Flgno>SG 872</Flgno>
        <Via> - </Via>
    </Routes>
    <Routes>
        <org>Agartala</org>
        <des>Kolkata</des>
        <Flgno>SG 874</Flgno>
        <Via> - </Via>
    </Routes>
    <Routes>
        <org>Agartala</org>
        <des>Mumbai</des>
        <Flgno>SG 874</Flgno>
        <Via>CCU</Via>
    </Routes>
    <Routes>
        <org>Ahmedabad</org>
        <des>Bangalore</des>
        <Flgno>SG 528</Flgno>
        <Symbols> - </Symbols>
        <Via>BOM</Via>
    </Routes>
</schedules> 
```

# 预期结果

我的输出应该在一个页面中的三个表中：在第一个表中前 2 条记录第二表 - 下 2 条记录第三表最后 3 条记录

2 条记录 2 条记录 3 条记录

```
<table>
    <table>
        <tr>
            <td>Agartala</td>
            <td>Bangalore</td>
            <td>SG 872</td>
            <td>CCU</td>
        </tr>
        <tr>
            <td> Agartala</td>
            <td>Guwahati</td>
            <td>SG 87</td>
            <td>BOM</td>
        </tr>
    </table>
    <table>
        <tr>
            <td>Agartala</td>
            <td>Hyderabad</td>
            <td>SG 872 </td>
            <td>CCU</td>
        </tr>
        <tr>
            <td>Agartala</td>
            <td>Kolkatta</td>
            <td>SG 872</td>
            <td> - </td>
        </tr>
    </table>
    <table>
        <tr>
            <td> Agartala</td>
            <td>Kolkatta</td>
            <td>SG 874</td>
            <td> - </td>
        </tr>
        <tr>
            <td>Agartala</td>
            <td>Mumbai</td>
            <td>SG 874 </td>
            <td>CCU</td>
        </tr>
        <tr>
            <td>Agartala</td>
            <td>Bangalore</td>
            <td>SG 528</td>
            <td>BOM</td>
        </tr>
    </table>
</table> 
```

注意：我的输入数据是动态的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:35:42.163

这个 XSLT 1.0 样式表是 Dimitre[在此处](https://stackoverflow.com/questions/3739105)的解决方案的副本，针对 OP 的特定数据稍作调整，并使第三个表具有 ceil(row-count / 3) 行。

# XSLT 1.0 解决方案

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:variable name="prowLimit" select="floor(count(/*/Routes) div 3)" />

<xsl:template match="/">
 <table>
   <xsl:apply-templates select="*/Routes" />
 </table>
</xsl:template>

<xsl:template match="Routes">
 <xsl:if test="(position() mod $prowLimit = 1) and 
               (position() &lt; (3 * $prowLimit + 1))"> 
  <xsl:variable name="is-last-table" select="position() - (2*$prowLimit)" />               
  <table>
    <xsl:for-each select=".|following-sibling::Routes[
      not(position() > $prowLimit - 1) or ($is-last-table > 0)]" >
      <tr>
        <td><xsl:value-of select="org" /></td> 
       <td><xsl:value-of select="des" /></td> 
       <td><xsl:value-of select="Flgno" /></td> 
       <td><xsl:value-of select="Via" /></td>
      </tr>
    </xsl:for-each>  
  </table>
 </xsl:if> 
</xsl:template>

</xsl:stylesheet> 
```

* * *

# XSLT 2.0 解决方案

在 XSLT 2.0 中它变得更容易......

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:fn="http://www.w3.org/2005/xpath-functions"
  exclude-result-prefixes="xsl fn">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="/">
 <xsl:variable name="prowLimit" select="floor(count(/*/Routes) div 3)" /> 
 <table>
   <xsl:for-each-group select="*/Routes"
       group-adjacent="fn:min((floor((position() - 1) div $prowLimit),2))" >
     <table>
       <xsl:apply-templates select="current-group()" />
     </table>
   </xsl:for-each-group>
 </table>
</xsl:template>

<xsl:template match="Routes">
      <tr>
       <td><xsl:value-of select="org" /></td> 
       <td><xsl:value-of select="des" /></td> 
       <td><xsl:value-of select="Flgno" /></td> 
       <td><xsl:value-of select="Via" /></td>
      </tr>
</xsl:template>

</xsl:stylesheet> 
```

# mapping - 根据另一个表的列替换sql列值

> ID：12248413
> 
> 赞同：9
> 
> 时间：2012-09-03T13:00:29.163
> 
> 标签：mapping, sql-server-2008-r2

我有 table1 (col1,col2) 和 table2(col1,col2) 如下/

![表定义](../Images/20906ffd476f31349fdc0bbe762cdaa0.png)

现在我需要用 table2 中 col1 和 col2 的相应值替换 table1 的 col2 值。所以决赛桌应该是这样的。我们如何在查询中做到这一点？

![决赛桌](../Images/dca719d59d6aa18a9c1b9e85612ffb56.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-03T13:06:53.543

我假设 table1.col2 和 table2.col2 具有相同的文本类型（？）

```
update table1 set table1.col2=table2.col2
from table1 
join table2 on (table1.col2=table2.col1) 
```

# java - Java 创建列表有更多字段

> ID：12248414
> 
> 赞同：0
> 
> 时间：2012-09-03T13:00:30.693
> 
> 标签：java, list

起初我很抱歉我的英语不好:)

我想创建新列表`(Arraylist, hashmap etc.. which is appropriate)`，例如这个列表有 6 个字段；

```
ArrayList<Integer, Integer, String, Integer, String, Integer> nData = new ArrayList<>(); 
```

**我知道这是不正确的**，但我需要列表，`<int, int, String, int, String, int>` 但是如何？谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T13:02:19.267

创建一个`Class`包装所有这些字段的，并将此类的实例添加到`ArrayList`.

例如：

```
public MyClass {
  private Integer field1;
  private Integer field2;
  private String field3;
  private Integer field4;
  private String field5;
  private Integer field6;

  // constructor

  // getters/setters
} 
```

接着：

```
List<MyClass> nData = new ArrayList<MyClass>();
MyClass instance = new MyClass(1, 2, "String1", 4, "String2", 5);
nData.add(instance); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:09:48.840

我认为最好的建议取决于您设计的细节和约束，但数据类型的顺序似乎是恒定的。因此，`HashMap<int,Object[]>`或者 `Hashtable<int,Object[]>`可能对您的目的有用。[您可以在此处](https://stackoverflow.com/questions/40471/differences-between-hashmap-and-hashtable)查看 HashMap 和 HashTable 之间的区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:01:46.710

创建一个包含所需字段的新类，并创建该类的 ArrayList。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T13:04:06.147

创建一个包含所有这些字段的类，比如 MyClass，如下所示：-

```
class MyClass
{
  Integer a;
  Integer b;
  String c;
  Integer d;
  String e;
  Integer f;
} 
```

之后`ArrayList`像这样创建：-

```
ArrayList<MyClass> nData = new ArrayList<MyClass>(); 
```

您可以将列表中的值添加为：-

```
MyClass m = new MyClass(1,2,"abcd",3,"bcde",4);
nData.add(m); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T13:08:23.230

1.  创建包含这些字段的类，或
2.  使用 Integer 而不是 int，并创建 List，然后将其转换为所需的类型

    ```
    List<Object> list = new ArrayList<Object>();
    for (Object o : list)
    {
    if (o instanceof Integer)
    System.out.println( "" + ((Integer) o).intValue() + " is integer");
    else 
    System.out.println( "" + ((String) o) + " is String");
    } 
    ```

# android - RelativeLayout 的相同按钮高度（同时仍填满所有空间）

> ID：12248419
> 
> 赞同：0
> 
> 时间：2012-09-03T13:00:42.780
> 
> 标签：android, android-relativelayout

我有一个这样的 Android 应用程序：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools" 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <RelativeLayout
        android:id="@+id/toplayout"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="0.90" >
        <Button
            android:id="@+id/button_1_of_10"
            android:layout_width="70dip"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:text="@string/text_0x1701" />
        <Button
            android:id="@+id/button_2_of_10"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignRight="@+id/button_1_of_10"
            android:layout_below="@+id/button_1_of_10"/>

        <!--Another 8 buttons-->

    <RelativeLayout
            android:id="@+id/contentpane"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_toRightOf="@+id/button_1_of_10" >
        </RelativeLayout>
    </RelativeLayout>

    <RelativeLayout 
        android:id="@+id/actionbuttonslayout"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="0.10">
    </RelativeLayout>
</LinearLayout> 
```

我需要 10 个按钮来填充从顶部到页脚的整个高度（0.1 加权的 RelativeLayout），而所有按钮保持相同的高度。但是，我想知道是否有一种与 LinearLayout 中的 layout_weight 等效的方法，但是对于 RelativeLayouts，因为在 LinearLayouts 中嵌套权重并不高效。我并不是真的在寻找其他解决方案，因为我还有一些东西要尝试，但我想知道这是否可能？

为了清楚起见，我的问题是：是否可以在 RelativeLayout 中拥有多个高度相等的 Button，同时填满所有可用空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:08:09.327

要使用权重，您需要使用 LinearLayout，只需使用按钮进行线性布局占用您想要的空间，然后在里面的每个按钮上`android:layout_height="0dp"` 还有一个`android:layout_weight="1"`

您不需要将所有重量相加为 1，只需考虑具有相同重量的物品具有相同的尺寸

# php - 似乎无法摆脱 mysql 中的新空白行

> ID：12248439
> 
> 赞同：-4
> 
> 时间：2012-09-03T13:01:25.623
> 
> 标签：php, mysql, regex, dom

编辑：

对于那些无法摆脱行间空格的mysql数据问题。这是因为从编辑器/word文档复制粘贴时出现问题导致的深标签缩进。

[http://bugs.mysql.com/bug.php?id=49611](http://bugs.mysql.com/bug.php?id=49611)

这是不允许我修复此问题的错误，这是因为缩进很深，这是一个无法修复的 MYSQL 错误。

PS：给社区的消息，感谢那些在没有给时间正确制定问题的情况下否决这个问题的人。这是一个调试过程，您可以让人们知道您是否需要某些东西，而不是表现得粗鲁和攻击提问者，毕竟作为海报我可能会阅读并看到您需要什么。如果我知道诊断问题需要什么，我会找到它并且不会在这里发布。由于我在这里发帖，这意味着我不知道在哪里可以确定问题是 MYSQL 问题还是 PHP 问题。对你的社区成员要有礼貌，不要表现得像狼一样总是试图咬掉别人的头，因为他们没有马上给你你想要的一切……小心。

* * *

这是数据库中的原始粘贴：

```
 one two three

one two three

one two three

one two three

one two three 
```

为什么还是这样？我 str_replaced 和 \n\n\n's 。由于我需要在文本之间的文本格式，我不想摆脱 2 \n。

我正在寻找的结果是：

```
 one two three

 one two three

 one two three
 one two three 
```

意思是最大 2 \n。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:05:51.613

这可能是你所追求的：

```
$normalized = preg_replace('~(\r?\n\r?){3+}~', "\n\n", $original); 
```

但是，嘿，这很难说。你想保持堆栈溢出一个快乐的地方，你付出了一些努力来发布一个问题。

# .net - Outlook 互操作打印输出文档名称

> ID：12248440
> 
> 赞同：15
> 
> 时间：2012-09-03T13:01:31.877
> 
> 标签：.net, printing, outlook, office-interop

我们使用 Outlook 互操作方法`MailItem.PrintOut()`从 Outlook 打印邮件消息。它总是以名称“ *Microsoft Outlook - 备忘录样式*”打印。

这里的“*备忘录样式*”是 Outlook 自动选择打印的打印样式。有没有办法给文档提供任何自定义名称，以便我们可以在打印机队列中跟踪它？

它可以**使用自定义名称创建新的打印样式，**也可以**明确指定自定义文档名称**。

基本上，我们只需要从 Outlook 打印的电子邮件以唯一的名称出现在打印机队列中。请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-02T20:43:56.263

你可以通过......

```
Mailitem.SaveAs(FilePathName) 'FILE NAME = NEW NAME
Mailitem.Printout() 
```

然后，您可以简单地删除刚刚创建的文件，或者在临时目录中完成后一次性删除它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T03:18:29.537

我讨厌我家里没有虚拟打印服务器来检查我的假设，但是打印队列中的电子邮件没有作为它们各自的主题行列出吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T19:21:32.527

好吧，[PrintSystemObject.Name](http://msdn.microsoft.com/en-us/library/system.printing.printsystemobject.name.aspx)在程序集之外是不可设置的，不幸的是，我相信这是您在查看 Windows 打印队列时看到的。但是，[PrintSystemJobInfo.JobName](http://msdn.microsoft.com/en-us/library/system.printing.printsystemjobinfo.jobname.aspx)似乎确实可以通过编程方式设置，并且可以帮助您获得所需的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-01T20:57:17.523

解决此问题的方法是查看打印机的属性。我使用 Peernet 的 TIFF10 打印机，当我右键单击设备和打印机下的打印机图标并单击“打印机首选项”时，我可以在“保存”选项卡下选择文件名。检查打印机的属性。它可能有一些东西

# javascript - as3 + JavaScript 用于 Facebook 图形 API

> ID：12248441
> 
> 赞同：0
> 
> 时间：2012-09-03T13:01:33.200
> 
> 标签：javascript, actionscript-3, facebook-graph-api

是否可以通过 JavaScript 连接（登录）到 Facebook 图表，然后使用 as3 API 进行查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:29:02.057

The Actionscript API already uses the JavaScript API to communicate with FB, so yes, it is possible (and in fact it is what actually happens when you log in with the AS3 api).

You'll get an access token back when you log in. If you pass that back into your .swf, you can use it to make requests. Otherwise, as long as your browser has been through authentication, you should be able to get the token again like this:

```
var auth:FacebookAuthResponse = Facebook.getAuthResponse();
var token:String = auth.accessToken; 
```

And then, for example, post to somebody's feed:

```
var user:String = auth.uid;
var values:Object = 
{ 
    access_token: token,
    name: "Post Title",
    picture: "http://www.mysite.com/myimage.jpg",
    link:"http://www.mysite.com",  
    description: "App description", 
    message: "Message you want to post here."
};

Facebook.api("/" + user + "/feed", callback, values, URLRequestMethod.POST); 
```

# jquery - 在 $(document).ready 之外使用 jquery 变量

> ID：12248448
> 
> 赞同：0
> 
> 时间：2012-09-03T13:02:15.650
> 
> 标签：jquery

我正在使用 jQuery，我有 2 个不同的 js 文件。

**文件_1.js**

```
$(document).ready(function(){
    var A = 'varA';
}); 
```

**文件_2.js**

```
$(document).ready(function(){
    console.log(A); // will get an A is undefined because of this closure thing
}); 
```

有没有办法从另一个文件中访问一个文件中的一个变量？我需要所有代码都在 $(document).ready(...)

我使用的一种解决方案是使变量成为全局变量（不使用 var A）有什么更好的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T13:06:33.137

创建自己的命名空间：

```
var my = {};

...

 $(document).ready(function(){
     my.A = 'A';
 }

 ...

 $(documet).ready(function() {
     console.log(my.A);
 } 
```

这样，您只有一个全局变量**my**充当所有“全局”对象/函数的命名空间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:04:11.050

Var A 在函数中定义，其生命周期仅限于函数的执行。您需要使其全球化，这就是为什么首先存在全局变量的原因。

# soundcloud - 从普通 soundcloud URL 嵌入 HTML5 小部件

> ID：12248449
> 
> 赞同：0
> 
> 时间：2012-09-03T13:02:15.853
> 
> 标签：soundcloud, oembed

我正在尝试将我网站上提交的 Soundcloud 链接转换为 SoundCloud HTML5 播放器。我读到 oEmbed 可以做到这一点，但我自己还没有让它工作。我知道我应该使用以下 oEmbed URL：

`http://soundcloud.com/oembed?format=js&url=[escaped_url]&iframe=true`

但是，我不知道该怎么办。当我有一个转义的 SoundCloud URL 并将其替换为 [escaped_url] 时，我的下一步是什么？如何准确地使用该链接来生成 SoundCloud HTML5 播放器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T22:27:08.693

向该 URL 发送请求，响应将是一个 JSON 文件，其中包含创建小部件所需的所有信息。

这是一个例子：

```
$ curl http://soundcloud.com/oembed\?format\=js\&url\=https://soundcloud.com/spadgos\&iframe\=true                                 

({
  "version": 1.0,
  "type": "rich",
  "provider_name": "SoundCloud",
  "provider_url": "http://soundcloud.com",
  "height": 450,
  "width": "100%",
  "title": "nickf \u2603",
  "description": "",
  "thumbnail_url": "http://i1.sndcdn.com/avatars-000005187616-3e82aa-t500x500.jpg?b96a101",
  "html": "\u003Ciframe width=\"100%\" height=\"450\" scrolling=\"no\" frameborder=\"no\" src=\"http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Fusers%2F6431392\u0026show_artwork=true\"\u003E\u003C/iframe\u003E",
  "author_name": "nickf \u2603",
  "author_url": "http://soundcloud.com/spadgos"
}); 
```

只需抓住`html`财产并将其粘贴在您的文件中，就可以了。

# java - 使用 Java 进行 XML 解析没有得到任何响应

> ID：12248454
> 
> 赞同：0
> 
> 时间：2012-09-03T13:02:32.107
> 
> 标签：java, android, xml, httpresponse

我试图从 URL 获取 XML 文件，但没有得到响应，并且代码稍后停止，因为 String xml 为空，你能告诉我有什么问题吗？

```
public String getXmlFromUrl(String url) {
 String xml = null;

    try {

        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        HttpResponse httpResponse = httpClient.execute(httpPost);
                    // I printed the response here but I got nothing ! 
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);
                    return xml;

    } catch (Exception e) {
        e.printStackTrace();
    } 
```

**请具体回答我感谢您的帮助**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:20:43.057

你为什么使用 HTTPPost？您甚至没有发送任何数据。尝试使用 HttpGet。

试试这个 ：

```
public String getXmlFromUrl(String url) throws Exception {
    return new AsyncTask<String, Void, String>() {
        @Override
        protected String doInBackground(String... params) {
            String xml = null;
            try {
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpGet httpPost = new HttpGet(params[0]);
                HttpResponse httpResponse = httpClient.execute(httpPost);
                // I printed the response here but I got nothing !
                HttpEntity httpEntity = httpResponse.getEntity();
                xml = EntityUtils.toString(httpEntity);
                Log.i("DEMO", xml);

            } catch (Exception e) {
                e.printStackTrace();
            }
            return xml;
        }
    }.execute(url).get();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:26:08.193

尝试从单独的线程开始你的代码，例如

```
 new Thread(new Runnable()
 {

    @Override
    public void run()
    {
        // TODO your code here

    }
  }).start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:38:08.060

试试这个：

```
try {

    items = new ArrayList<String>();

    XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
    factory.setNamespaceAware(true);
    XmlPullParser xpp = factory.newPullParser();
    xpp.setInput(new InputStreamReader(
            getUrlData(" url")));

    while (xpp.getEventType() != XmlPullParser.END_DOCUMENT) {
        Log.i(TAG, "doc started");
        if (xpp.getEventType() == XmlPullParser.START_TAG) {
            if (xpp.getName().equals("entry")) {
                items.add(xpp.getAttributeValue(0));
            }
        }
        xpp.next();

    }
} catch (Throwable t) {
    Toast.makeText(this, "Request failed: " + t.toString(),
            Toast.LENGTH_LONG).show();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T13:44:47.697

对于 geturldata()

```
public InputStream getUrlData(String url) throws URISyntaxException,
    ClientProtocolException, IOException {

DefaultHttpClient client = new DefaultHttpClient();
HttpGet method = new HttpGet(new URI(url));
HttpResponse res = client.execute(method);
return res.getEntity().getContent(); 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T13:59:14.913

您应该了解**Exceptions**。xml 的原因`null`是因为“某事”出了问题。这抛出了一个`Exception`，可能很好地描述了哪里出了问题。发生这种情况时，它`Exception`会被“向上”抛出，直到有人处理它。

每个子类`Exception`都有不同的“风味”，并在特定情况下抛出。这使您能够对错误做出“反应”。例如，您可以告诉用户出了什么问题，或者为了调试而记录一些内容。

在您的情况下，您在一个地方“捕获”所有异常，当发生异常时，`catch (Exception e)`执行之后的代码。你在这里什么也不做，只是打印一些东西（这在你的 LogCat 中会显示为橙色）。然后你继续，好像什么都没发生一样。但是 xml 将为空，这对您的程序不利，而且您显然没有注意到 LogCat 条目，因为您的程序稍后会崩溃。

这一次，Eldhose M Babu 解决了您的问题。下一次，当出现其他问题时（在 Http 请求中可能会出现很多问题），您的程序将显示相同的行为。尝试阅读异常并小心处理它们时过于安静。

# php - 用保留质量的php调整图片大小

> ID：12248459
> 
> 赞同：0
> 
> 时间：2012-09-03T13:02:48.817
> 
> 标签：php, image, resize

我使用以下方法调整图像大小：

```
 private function newDim($maxHeight, $maxWidth, $height, $width) {

        if(($width / $height) >= ($maxWidth / $maxHeight)){
                $nw = $maxWidth;
                $nh = $height * ($maxWidth / $width);
                $nx = round(abs($maxHeight - $nh) / 2);
                $ny = 0 ;
        }else {
            // by height
                $nw = $width*($maxHeight/$height);
                $nh = $maxHeight;
                $nx = 0;
                $ny = round(abs($maxWidth - $nw) / 2); ;
        }

        return array($nw,$nh,$nx,$ny);
    } 
```

之后我想保存这张图片。对于这种情况，我使用这种方法：

```
 public function upload($file_param_name) {
        $file_name = $_FILES[$file_param_name]['name'];
        $source_file_path = $_FILES[$file_param_name]['tmp_name'];
        $$this->ext = pathinfo($file_name, PATHINFO_EXTENSION);
        $ext = 'jpg';
        $this->ext = $ext;
        $ext =strtolower($ext);
        $new_file_name = $file_name."-".md5(uniqid(rand(), true));
        $this->image_hashname = $new_file_name;
        $target_path = $this->store_folder.basename($new_file_name);

        list($width,$height,$type)=getimagesize($source_file_path);

        switch ($type) {
            case 1:   //   gif -> jpg
                $src = imagecreatefromgif($source_file_path);
                break;
            case 2:   //   jpeg -> jpg
                $src = imagecreatefromjpeg($source_file_path);
                break;
            case 3:  //   png -> jpg
                $src = imagecreatefrompng($source_file_path);
                break;
        }

        $th = 240;
        $tw = 240;

        list($nh,$nw,$nx,$ny) = $this->newDim($th, $tw, $height, $width);

        $tmp=imagecreatetruecolor($tw,$th);

        $white = imagecolorallocate($tmp, 255,255,255);
        imagefill($tmp, 0, 0, $white);

        imagecopyresized($tmp,$src,$ny,$nx,0,0,$nh,$nw,$width,$height);
        $thmbfile = $this->store_folder.basename($new_file_name."-thumb.".$ext);
        imagejpeg($tmp,$thmbfile,100);

        imagedestroy($src);
        imagedestroy($tmp);
    } 
```

当我保存尺寸为 300x300 到 240x240 的图像时，新图像的质量很差。我哪里错了？

图像 ：

旧：[http ://cbn-design.eu/imgs/original.jpg](http://cbn-design.eu/imgs/original.jpg)

新：[http ://cbn-design.eu/imgs/new.jpg](http://cbn-design.eu/imgs/new.jpg)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T13:11:50.307

根据[这个答案](https://stackoverflow.com/a/1533651/677139)，尝试使用[`imagecopyresampled()`](http://php.net/imagecopyresampled)而不是[`imagecopyresized()`](http://php.net/imagecopyresized)。

# php - 比较两个变量返回错误结果

> ID：12248465
> 
> 赞同：1
> 
> 时间：2012-09-03T13:03:37.117
> 
> 标签：php, string

为什么这总是返回`true`：

```
$s = '334rr';
$i = (int)$s;

if ($i == $s) {
    echo true;
} else {
    echo false;
} 
```

如果我回`$i`显它会给出 的值，这与is`334`不同。 `$s``334rr`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T13:05:20.140

从[手册](http://php.net/manual/en/language.operators.comparison.php)：

> 如果将数字与字符串进行比较或比较涉及数字字符串，则每个字符串都将转换为数字并以数字方式执行比较。

所以：与您给出的值`($i == $s)`相同。`($i == (int)$s)`

用于`===`避免类型杂耍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T13:05:15.543

当使用 比较字符串和整数时`==`，字符串将尝试将大小写为整数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T13:09:47.773

尝试这个

```
$s = '334rr';
$i = intval($s);
if ($i == $s) {
 echo true;
 } else {
  echo false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T13:05:39.877

不建议将字符串与 int 进行比较。您应该使用`===`将验证相同数据类型和相同值的替代方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T13:05:53.657

PHP 在与另一个整数 ($i) 比较时将 $s 字符串转换为整数。它基本上是这样做的（嗯，我不知道它在内部做了什么，但归结为这个）：

```
if($i == (int) $s) 
```

这使得陈述正确

# javascript - Facebook API - FB.Event.subscribe('edge.create') 不工作

> ID：12248472
> 
> 赞同：1
> 
> 时间：2012-09-03T13:04:17.890
> 
> 标签：javascript, facebook, facebook-graph-api

花了几个小时在网上搜索后，我发现了很多与此相关的帖子，但似乎没有一个有效，甚至 jsfiddle 上的一些“有效”示例似乎也无效！

当用户在我的网页上点击“喜欢”时，我想注册。

'like' 链接出现，并且确实会弹出一个新窗口供您登录 facebook。但我无法订阅“edge.create”事件。我知道 sdk 加载正常，因为我可以订阅“xfbml.render”事件。

有些帖子说你必须有一个 appId 才能工作[我愿意]，但其他人声称它没有。

这是我的代码：

需要注意的一点是，我目前在 //localhost:57477 下运行它，所以我将 like href 设置为 google.com。我确实注意到其中一篇文章指出了最近的 facebook 错误，如果 href 域与网页的域不匹配，则不会触发此事件，但现在将其标记为“已修复”。

```
<div id="fb-root"></div>
<script>        
    window.fbAsyncInit = function () {
        //console.log('window.fbAsyncInit');

        FB.init({
            appId: 'myappid', 
            status: false,
            cookie: false, 
            xfbml: true
        });

        //Additional initialization code here 
        FB.Event.subscribe('edge.create',
                    function (response) {
                        //console.log('edge.create');
                        alert('edge.create');
                    }
             );

        FB.Event.subscribe('xfbml.render',
                function (response) {
                    //console.log('xfbml.render');
                    alert('xfbml.render');
                }
             );
    };

    // Load the SDK Asynchronously
    (function (d) {
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) { return; }
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    } (document));
</script>

<div href="http://google.com" class="fb-like" data-send="false" data-width="450" data-show-faces="false" data-font="verdana"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-26T00:23:21.390

我知道这是旧线程，但我来到这里遇到了同样的问题。对我有用的是 Facebook AppID 必须属于您的站点所在的域（在 Facebook 应用程序设置中设置）- localhost 将无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:13:55.477

您的代码对我来说看起来不错，我认为问题出在 FB.init() 选项中。

这就是我使用的：

```
{
  appId: 'myappid',
  authResponse: false,
  channelUrl: "http://url-to-my-channel-url.com",
  cookie: true,
  oauth: true,
  status: true,
  xbfml: true
} 
```

使用这些初始化选项，我可以`edge.create`用来跟踪有人单击“赞”按钮的时间。

# mysql - 从 2 个表 MySQL 中选择

> ID：12248475
> 
> 赞同：0
> 
> 时间：2012-09-03T13:04:28.193
> 
> 标签：mysql, select

我想为与另一个表连接的每个 ID 部分从 1 个表中选择最后一条记录。这些表之间的连接是： notes.user_id = application_forms.id 然后 notes.post_by_id = application_forms.user_id 我想为每个 notes.user_id 选择最后一条记录，以便我可以根据用户输入的一些注释在字体上显示不同的 CSS ，希望很清楚，如果不是我在这里

第一桌

```
CREATE TABLE notes (
  note_id int(255) NOT NULL AUTO_INCREMENT,
  note_when timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  user_id int(255) DEFAULT NULL,
  post_by_id int(255) DEFAULT NULL,
  note text,
  PRIMARY KEY (note_id)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1; 
```

第二张桌子

```
CREATE TABLE application_forms (
  id int(255) NOT NULL AUTO_INCREMENT,
  user_id int(255) DEFAULT NULL,
  PRIMARY KEY (id)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1; 
```

# iphone - 如何在没有 segue 的情况下加载视图？

> ID：12248476
> 
> 赞同：1
> 
> 时间：2012-09-03T13:04:30.087
> 
> 标签：iphone, xcode, storyboard

我正在使用 Storyboard，我想知道是否有一种方法可以在没有“segue”的情况下执行转换（动画或非动画）。

**我可以在不同的 ViewsController 之间以编程方式进行转换吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:13:06.013

是的。

（除了使用代码之外，这应该是不可能的。这是编程，而不是图形设计——这是图形设计师的工作。）

UIView 有几种方法可以启用动画和过渡。最容易使用但功能最强大（阅读：可定制）是

```
+ (void)animateWithDuration:(NSTimeInterval)duration
    animations:(void (^)(void))animations
    completion:(void (^)(BOOL finished))completion; 
```

对于动画，和

```
+ (void)transitionFromView:(UIView *)fromView
    toView:(UIView *)toView
    duration:(NSTimeInterval)duration
    options:(UIViewAnimationOptions)options
    completion:(void (^)(BOOL finished))completion; 
```

你可以在[圣经第 15 节找到它们。](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)

# android - Android sqlite 选择加入哪里

> ID：12248481
> 
> 赞同：0
> 
> 时间：2012-09-03T13:04:44.717
> 
> 标签：android, database, sqlite

我很新，正在尝试学习如何在 android 中使用 sqlite 使用 Select、Join 和 Where。理想情况下，这就是我想从数据库返回的内容：

角色 ID 为 4（远程）的人员：

```
select people.[name]
from people
join people_role
on people.[id] = people_role.[people_id]
where role_id = 4 
```

返回 role_id 为 4 的 People 的代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:28:23.130

1- 使用[SQLiteBrowser](http://www.brothersoft.com/sqlite-database-browser-434263.html)创建您的数据库。

2-将数据库保存在资产文件夹中

3-按照[这个解决方案](https://stackoverflow.com/questions/9109438/how-to-use-existing-database-with-android-app/9109728#9109728)。

4- 在 TestAdapter 类中找到**getTestData()**并将其替换为：

```
 public Cursor getTestData() 
 { 
     try 
     { 
         String sql ="select people.[name]  
           from people  
           join people_role  
           on people.[id] = people_role.[people_id]  
           where role_id = 4 "; 

         Cursor mCur = mDb.rawQuery(sql, null); 
         if (mCur!=null) 
         { 
            mCur.moveToNext(); 
         } 
         return mCur; 
     } 
     catch (SQLException mSQLException)  
     { 
         Log.e(TAG, "getTestData >>"+ mSQLException.toString()); 
         throw mSQLException; 
     } 
 } 
```

# apache-pig - 同时在脚本中使用 Pig LoadMetadata 接口和 AS 语句

> ID：12248488
> 
> 赞同：1
> 
> 时间：2012-09-03T13:05:13.900
> 
> 标签：apache-pig

我正在为 Pig 编写用户定义的 LoadFunction，我希望能够访问 LOAD 语句的 AS 子句中写入的内容，并能够根据它返回一个模式，无论它如何都将得到尊重与 AS 子句中的内容兼容。换句话说，我想要一种方法来访问 AS 子句中的字符串，并且以后能够忽略它并返回我制作的模式。

# mysql - 尝试导入转储时出现重复条目 错误

> ID：12248490
> 
> 赞同：0
> 
> 时间：2012-09-03T13:05:16.083
> 
> 标签：mysql, sql, mysqldump

我在服务器上有下表：

```
CREATE TABLE routes (
  id          int(11) unsigned NOT NULL AUTO_INCREMENT,
  from_lat    double NOT NULL,
  from_lng    double NOT NULL,
  to_lat      double NOT NULL,
  to_lng      double NOT NULL,
  distance    int(11) unsigned NOT NULL,
  drive_time  int(11) unsigned NOT NULL,

  PRIMARY KEY (id),
  UNIQUE KEY route (from_lat,from_lng,to_lat,to_lng)
) ENGINE=InnoDB; 
```

我们正在保存从 A 点 (from_lat, from_lng) 到 B 点 (to_lat, to_lng) 的一些路由信息。坐标上有唯一的索引。

但是，数据库中有两个条目让我感到困惑：

```
+----+----------+----------+---------+---------+----------+------------+
| id | from_lat | from_lng | to_lat  | to_lng  | distance | drive_time |
+----+----------+----------+---------+---------+----------+------------+
| 27 | 52.5333  | 13.1667  | 52.5833 | 13.2833 | 13647    | 1125       |
| 28 | 52.5333  | 13.1667  | 52.5833 | 13.2833 | 13647    | 1125       |
+----+----------+----------+---------+---------+----------+------------+ 
```

**它们完全相同。**

当我不尝试使用导出数据库`mysqldump`并尝试重新导入它时，出现错误：

```
ERROR 1062 (23000): Duplicate entry '52.5333-13.1667-52.5833-13.2833' for key 'route' 
```

当它们上有唯一键时，这怎么可能在数据库中？MySQL不应该拒绝它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:14:54.077

双精度值是否可能略有不同，但仅在第 4 位之后？
如果您导出和导入它们，它们将是相同的，这将导致违反唯一约束。

引用[此 MySQL 错误报告](http://bugs.mysql.com/bug.php?id=21407)：

> 当 mysqldump 转储一个 DOUBLE 值时，它使用的精度不足以区分一些接近的值（并且可能是精度不足，无法从原始数据库重新创建确切的值）。如果 DOUBLE 值是主键或唯一索引的一部分，则从此输出还原数据库失败并出现重复键错误。

尝试在逗号后面显示更多数字（如何取决于您的客户。）

# android - OutOfMemoryError 处理大型 (JSON) 字符串

> ID：12248493
> 
> 赞同：0
> 
> 时间：2012-09-03T13:05:35.210
> 
> 标签：android, string, out-of-memory

> **可能重复：**
> [将大型 JSON (InputStream) 放入字符串时出现内存不足错误](https://stackoverflow.com/questions/5842201/out-of-memory-error-when-putting-large-json-inputstream-to-string)

我通过 HttpResponse 获取编码的 JSON 字符串。代码如下所示：

```
 BasicResponseHandler brh = new BasicResponseHandler(); 
    String responseString = brh.handleResponse(response); 
    String decoded = new String(Base64.decode(responseString, Base64.NO_CLOSE)); 
```

我收到这样的错误：

```
09-03 12:57:09.664: E/AndroidRuntime(8309): FATAL EXCEPTION: Thread-272
09-03 12:57:09.664: E/AndroidRuntime(8309): java.lang.OutOfMemoryError
09-03 12:57:09.664: E/AndroidRuntime(8309):     at java.nio.CharArrayBuffer.<init>(CharArrayBuffer.java:43)
09-03 12:57:09.664: E/AndroidRuntime(8309):     at java.nio.ReadWriteCharArrayBuffer.<init>(ReadWriteCharArrayBuffer.java:47)
09-03 12:57:09.664: E/AndroidRuntime(8309):     at java.nio.CharBuffer.allocate(CharBuffer.java:54)
09-03 12:57:09.664: E/AndroidRuntime(8309):     at java.nio.charset.CharsetDecoder.allocateMore(CharsetDecoder.java:236)
09-03 12:57:09.664: E/AndroidRuntime(8309):     at java.nio.charset.CharsetDecoder.decode(CharsetDecoder.java:195)
09-03 12:57:09.664: E/AndroidRuntime(8309):     at java.nio.charset.Charset.decode(Charset.java:487)
09-03 12:57:09.664: E/AndroidRuntime(8309):     at java.lang.String.<init>(String.java:174)
09-03 12:57:09.664: E/AndroidRuntime(8309):     at java.lang.String.<init>(String.java:141)
09-03 12:57:09.664: E/AndroidRuntime(8309):     at xxx.DataManager.doPost(DataManager.java:448)
09-03 12:57:09.664: E/AndroidRuntime(8309):     at xxx.DataManager.run(DataManager.java:185) 
```

有时我得到它

```
brh.handleResponse(response); 
```

有时在

```
String decoded = new String(Base64.decode(responseString, Base64.NO_CLOSE)); 
```

所以我认为字符串太大而无法处理（我不知道如何确定它的大小（以字节为单位）），我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:18:45.587

您应该切换到流式方法，其中只有最终的 JSON 数据结构完全保存在内存中。其他部分，特别是 JSON 编码的 HTTP 响应，是逐块处理的。所以它们只需要最少的内存。

这样你有几个优点：

*   整体内存消耗大大减少。

*   大分配的数量（对于大字符串）大大减少了。（有时有足够的可用内存，但没有足够大的一块分配一个大字符串。）

*   由于解析可以在来自答案的第一个字节到达时立即开始，因此解析可以与数据接收并行进行。因此，应用程序变得更快。

`org.json.JSONObject`不支持流式传输。您将不得不使用不同的类。

顺便说一句：我看不出有任何理由为什么要使用 Base 64 编码 JSON 数据。JSON 是基于文本的格式，如果涉及二进制数据，则需要 Base 64 编码。

# visual-studio-2010 - Crystal Report 不适用于 Visual Studio 2010

> ID：12248507
> 
> 赞同：1
> 
> 时间：2012-09-03T13:06:40.827
> 
> 标签：visual-studio-2010, crystal-reports, 32-bit

我已经为 Visual Studio 2010 专业版下载并安装了 Crystal Report "CRforVS_13_0_4.exe"。但它似乎不适用于 Visual Studio。每当我尝试打开工具箱窗口，或尝试将 Crystal Report (.rpt) 添加到项目中时，它都会出现以下错误。

[窗口标题] Microsoft Visual Studio 2010

[主要说明] Microsoft Visual Studio 2010 已停止工作

[内容] 一个问题导致程序停止正常工作。请关闭程序。

[关闭程序] [调试程序]

我检查了一下，一旦“Crystal Reports Tool Package”加载到工具箱中，就会弹出这个错误。我还在安装时监视了文件，发现它似乎是 64 位版本。但我有 32 位 win7 操作系统。但我找不到 32 位版本。我安装了“CRforVS_redist_install_32bit_13_0_3.zip”，但它不支持设计器。我在添加水晶报告（.rpt）时得到了.mhtml扩展名

谢谢。任何输入将不胜感激，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-12T20:25:59.237

经过更多搜索后，我下载了最新版本的 Crystal Reports for VS2010（支持包 5 (v. 13.0.5.x)），对我来说效果很好。这是下载水晶报告的链接

[http://scn.sap.com/docs/DOC-7824](http://scn.sap.com/docs/DOC-7824)

如网站上所述-“要将“SAP Crystal Reports，Microsoft Visual Studio 的开发人员版本”集成到 VS 2010 或 2012 中，您必须运行安装可执行文件。运行 MSI 不会将 Crystal Reports 完全集成到 VS 中。MSI 文件由定义仅用于运行时分发。”

# ios - 带有 GL_DEPTH_COMPONENT 的 glTexImage2D 在 iOS4 上工作，在 iOS 5 中以 GL_INVALID_ENUM 失败

> ID：12248508
> 
> 赞同：1
> 
> 时间：2012-09-03T13:06:41.900
> 
> 标签：ios, ios5, opengl-es, ios4, glteximage2d

以下代码在 iOS 4 上正常工作，并在 iOS5 上 glTexImage2D 之后的 CHECK_GL_ERROR 宏 0x500 中打印。我搜索了这方面的信息，但没有找到任何有用的信息。

```
GLuint depthTexId = 0;
glGenTextures(1, &depthTexId);
CHECK_GL_ERROR();
glActiveTexture(GL_TEXTURE0);
CHECK_GL_ERROR();
glBindTexture(GL_TEXTURE_2D, depthTexId);
CHECK_GL_ERROR();
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
CHECK_GL_ERROR();
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
CHECK_GL_ERROR();
glTexImage2D(GL_TEXTURE_2D, 0, GL_DEPTH_COMPONENT, 512, 512, 0, GL_DEPTH_COMPONENT, GL_UNSIGNED_BYTE, 0);
CHECK_GL_ERROR(); 
```

我试图改变 glTexImage2D 的参数，但没有成功。为什么会这样？iOS 4 和 5 有什么区别？如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T14:25:05.280

我已将 GL_UNSIGNED_BYTE 替换为 GL_UNSIGNED_INT，并且代码开始在 iOS 4 和 iOS 5 上运行。

# iphone - iphone开发：同时启用手势识别滚动

> ID：12248509
> 
> 赞同：2
> 
> 时间：2012-09-03T13:06:38.977
> 
> 标签：iphone, objective-c, ios, scrollview, gesture-recognition

在我的应用程序中，我需要在我的背景滚动条上有一个向上滑动手势识别器。这是我下面的代码

它在 viewDidLoad

```
UISwipeGestureRecognizer *Swipe = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(SwipeRecognizer:)];
Swipe.direction = UISwipeGestureRecognizerDirectionUp;
[backgroundScroller addGestureRecognizer:Swipe]; 
```

它是 SwipeRecognizer：

```
- (void) SwipeRecognizer:(UISwipeGestureRecognizer *)sender {
    if (sender.direction | UISwipeGestureRecognizerDirectionUp){
        NSLog(@" *** SWIPE UP ***");
    }
} 
```

问题是我不能同时启用滚动和捕捉手势。当我说未启用滚动时，我可以识别手势。但我需要同时滚动和手势识别。不可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:12:40.227

覆盖`gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`不阻塞 UIScrollViews Pan 识别器的方法

它会起作用的……</p>

不要忘记将委托添加到自我以进行手势识别。正如@death7eater 的评论中提到的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:47:26.350

我这样解决了我的问题：

这是针对 viewDidLoad：

```
UISwipeGestureRecognizer *Swipe = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(SwipeRecognizer:)];
    Swipe.direction = UISwipeGestureRecognizerDirectionUp;
    [backgroundScroller addGestureRecognizer:Swipe];
    Swipe.delegate = self; 
```

这是 SwipeRecognizer 方法：

```
- (void) SwipeRecognizer:(UISwipeGestureRecognizer *)sender {
    if (sender.direction | UISwipeGestureRecognizerDirectionUp){
        NSLog(@" *** SWIPE UP ***");
    }
} 
```

感谢@lukaswelte，这允许同时执行多个手势：

```
- (BOOL) gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
    return YES;
} 
```

# python - 使用 py2app“编译”python 后，open()/f.write() 不起作用

> ID：12248511
> 
> 赞同：1
> 
> 时间：2012-09-03T13:06:44.070
> 
> 标签：python, file-io, tkinter, fwrite, py2app

使用 py2app 将 y .py 转换为 .app。乍一看，它看起来不错，但是当我去执行 open() 和 f.write （如下）创建一个 .txt 时，它不会创建文件。

```
f = open(name + ".txt", "w")
f.write("users inputs here") 
```

当我将程序作为 .py 运行时，这绝对可以正常工作

任何人都有任何想法，我似乎找不到任何解释为什么会发生这种情况的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T02:34:04.520

问题是当前目录设置为`/`从 Finder 启动应用程序时的目录。因此，路径是相对于`/`，而不是您的应用程序包。

要获取 Python exe 的路径，请尝试`sys.executable`. 请注意，您可能需要添加`../../`才能退出`Contents/MacOS`目录。

但是，更好的解决方案可能是简单地使用文件对话框，允许用户选择保存位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-23T20:34:50.910

我的程序遇到了同样的问题，我打开一个文件并将列标题写入该文件，然后在程序中循环迭代数据。当应用程序转换为 .app 时，程序在到达将列标题写入文件时会失败。如果我将其注释掉，它将正常工作。我从列标题中的文本中删除了所有特殊字符，它工作正常。不知道为什么会这样。

不起作用：

```
file.write("\n" + "Image" + "\t" + "x (pxl)" + "\t" + "y (pxl)" + "\t" + "radius (ID; µm)" + "\t" + "GlobalThresh Reported:" + "\n") 
```

作品：

```
file.write("\n" + "Image" + "\t" + "x" + "\t" + "y" + "\t" + "radius" + "\t" + "GlobalThresh Reported" + "\n") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-23T21:16:49.233

一个实现 sys.executable 的实用解决方案，正如@nneonneo 所说的那样；这个对我有用：

```
location = os.path.abspath(
        os.path.join(sys.executable + "/file_name", '..', '..', '..', '..','..', "file_name")) 
```

它将文件打印在 .app 文件夹的上一层

# java - 无法使用 ASmack 发送或接收状态信息

> ID：12248512
> 
> 赞同：4
> 
> 时间：2012-09-03T13:06:45.367
> 
> 标签：java, android, xmpp, smack, asmack

我正在尝试为 Android 开发一个 XMPP 聊天客户端（使用连接到 C#/Unity 的 Java）。我的 Java -> Unity/C# 连接工作正常。我还下载了 Asmack，并且可以生成一个库和我的包装类，用于初始化与 OpenFire XMPP 服务器的连接。但是，我似乎无法发送或接收 Presence。我可以登录、注册新用户并填充他们的名册、发送消息，但不能发送任何出席信息。

该代码自动注册以前从未使用过该应用程序的用户。它还使用预设的朋友列表，并用这些朋友自动填充名册。

代码如下（抱歉所有的调试行，使用 Unity 时不能使用断点）：

```
public class ASmackWrapper
{
    private XMPPConnection connection;
    private String[] friends;
    private static final String eventClass = "ASmackEventListener";
    private static ASmackWrapper wrapper;

    public static ASmackWrapper instance()
    {
        System.out.println("instancecreator of ASmackWrapper 1!");
        if (wrapper == null)
            wrapper = new ASmackWrapper();
        return wrapper;
    }

    public ASmackWrapper()
    {
        System.out.println("constructor of ASmackWrapper");
    }

    public boolean tryToRegister(String user, String pass){
        AccountManager acManager = connection.getAccountManager();
        try {
            Map<String, String> attributes = new HashMap<String,String>();
            attributes.put("email", "MY email");
            acManager.createAccount(user, pass,attributes);
        } catch (XMPPException e) {
            System.out.println("cant autoregister user "+ user +" ... with pass: "+pass+" on server. error:" + e.getLocalizedMessage());
            if (e.getLocalizedMessage().contains("conflict"))
                return false; // Wrong password, since there is already an account with that id!
            return false;
        }
        return true;
    }

    public void setFriends(String[] _friends) {
        friends = _friends;
    }

    public void start(String host, String user, String pass)
    {
        System.out.println("Java: openConenction host:"+host);
        ConnectionConfiguration cc = new ConnectionConfiguration(host,5222);
        //cc.setSendPresence(true);
        this.connection = new XMPPConnection(cc);
        Connection.DEBUG_ENABLED = true;
        try {
            this.connection.connect();
        } catch (XMPPException e) {
            System.out.println("Error connecting to server");
            return;
        }

        if(!this.connection.isConnected()) {
            System.out.println("Java: is not connected");
            onError("Connection failed");
            return;
        }

        boolean loginStatus = login(user, pass);
        if (!loginStatus) {
            onError("Login Failed");
            return;
        }

        RosterListener rl = new RosterListener() {
            public void entriesAdded(Collection<String> addresses) {}
            public void entriesUpdated(Collection<String> addresses) {}
            public void entriesDeleted(Collection<String> addresses) {}
            public void presenceChanged(Presence presence) {
                System.out.println("presence changed!" + presence.getFrom() + " "+presence.getStatus());
                onPresence(presence);
            }
        };
        if (connection.getRoster() != null) {
            connection.getRoster().setSubscriptionMode(Roster.SubscriptionMode.accept_all);

            System.out.println("7");
            connection.getRoster().addRosterListener(rl);
        }

        onAuthenticate("");
        System.out.println("10");

        //Set presence to online!
        Presence presence = new Presence(Presence.Type.available);
        presence.setStatus("Online, Programmatically!");
        presence.setPriority(24);
        presence.setMode(Presence.Mode.available);
        connection.sendPacket(presence);
    }

    private void addFriends() throws Exception {
        if (friends == null) {
            System.out.println("No friends to add");
            return;
        }
        System.out.println("Number of friends to add: "+friends.length);
        for (int i = 0;i<friends.length;i++) {
            System.out.println("Create user in roster: "+friends[i]);
            connection.getRoster().createEntry("fb"+friends[i], "No name_",null);
        }
    }

    private boolean login(String jid, String password) {
        System.out.println("1");
        boolean isLoggedIn=true;
        try { 
            this.connection.login(jid, password);
        } catch (XMPPException e) {
            isLoggedIn=false;
        }

        System.out.println("2");
        if(!isLoggedIn) {
            boolean isRegistred = tryToRegister(jid,password);
            if (isRegistred) {
                connection.disconnect();
                try {
                    connection.connect();
                    connection.login(jid, password); 
                } catch (XMPPException e) {
                    onError("Could not connect and login after registring");
                    return false;
                }
            } else {
                return false;
            }
        } 

        try {
            addFriends();
        } catch (Exception e) {
            onError("Could not add friends to roster");
        }
        ChatManager chatmanager = connection.getChatManager();

        chatmanager.addChatListener(new ChatManagerListener()
        {
            public void chatCreated(final Chat chat, final boolean createdLocally)
            {
                System.out.println("OK Chat created!");
                chat.addMessageListener(new MessageListener()
                {
                    public void processMessage(Chat chat, Message message)
                    {
                        onMessage(chat, message);
                    }
                });
            }
        });

        return true;
    }

    public void sendMessage(String rec, String message) {
        System.out.println("sendMessage(string,string) to host :"+connection.getHost());
        Chat chat = connection.getChatManager().createChat(rec+"@"+connection.getHost(), new MessageListener() {
            public void processMessage(Chat chat, Message message) {
                // Print out any messages we get back to standard out.
                System.out.println("Probably an error, since we got a instant reply on sent message. Received message body: " + message.getBody() + " from:"+message.getFrom() + " to:"+message.getTo());
            }
        });
        try {
            chat.sendMessage(message);
            System.out.println("Message sent");
        } catch (XMPPException e) {
            System.out.println("Error sending message: "+e.toString());
            e.printStackTrace();

        }
    }

    public void logout () {
        System.out.println("Login out...");
        connection.disconnect();
    }

    public void getOnlineFriends() {
        Roster roster = connection.getRoster(); 
        Collection<RosterEntry> entries = roster.getEntries();

        for(RosterEntry rosterEntry: entries) {
            String user = rosterEntry.getUser();
            Presence presence = roster.getPresence(user);
            System.out.println("Presence : "+presence);                                     
            System.out.println("Presence type: "+presence.getType());                
            System.out.println("Presence mode: "+presence.getMode());
        }

        //Set presence to online!
        Presence presence = new Presence(Presence.Type.available);
        presence.setStatus("Online, Programmatically!");
        presence.setPriority(24);
        presence.setMode(Presence.Mode.available);
        connection.sendPacket(presence);
    }

    private void onMessage(Chat chat, Message message) {
        String m = ("Received message: " + (message != null ? message.getBody() : "NULL"));
        System.out.println(m);

        UnityPlayer.UnitySendMessage(eventClass, "Message", m);
    }

    private void onError(String message) {
        UnityPlayer.UnitySendMessage(eventClass, "Error", message);
    }

    private void onAuthenticate(String message) {
        UnityPlayer.UnitySendMessage(eventClass, "Authenticate", message);
    }

    private void onPresence(Presence presence) {
        String user = presence.getFrom();
        if (presence.getType() == Presence.Type.available)
            UnityPlayer.UnitySendMessage(eventClass, "Online", user);
        else
            UnityPlayer.UnitySendMessage(eventClass, "Offline", user);

            System.out.println("Java: Presence changed, from:" +presence.getFrom() + " type:"+presence.getType() + " toString:"+presence.toString());
    }

} 
```

存在通过两种方式检查，通过设置存在侦听器和在登录后获取状态。此 SO 页面建议在获取 precense 之前等待 5 秒：[无法通过使用 smack、openfire 获得名册存在](https://stackoverflow.com/questions/1919489/unable-to-get-presence-of-roster-by-using-smack-openfire) 我也尝试过通过从按钮调用 getOnlineFriends 来尝试，登录后超过 5 秒。侦听器永远不会被调用。它只会在登录后触发一次，对于名单上的每个人都触发一次，并且存在 = null。

**编辑：**在 Asmack 上打开调试模式后，我看到以下对我的存在发送消息的回复：

```
SENT <presence id="3sG7l-11"><status>Online, Programmatically!</status><priority>24</priority></presence>

RCV <presence id="6s7BX-5" to="787122012@xxx.tripnet.se/Smack" from="10000063946242" type="error">
<error code="404" type="cancel">
<remote-server-not-found xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/>
</error></presence> 
```

服务器日志：

```
org.jivesoftware.openfire.nio.ConnectionHandler - Closing connection due to error while processing message:
<iq id="566-4" type="error" from="xxx.tripnet.se/f55aea72" to="xxx.tripnet.se">
<error /><error type="cancel" code="501">
<feature-not-implemented xmlns="urn:ietf:params:xml:ns:xmpp-stanzas" /></error>
<ping xmlns="urn:xmpp:ping" /></iq> 

java.lang.IllegalArgumentException: IQ must be of type 'set' or 'get'. Original IQ:
<iq id="566-4" type="error" from="xxx.tripnet.se/f55aea72" to="xxx.tripnet.se">
<error/><error type="cancel" code="501">
<feature-not-implemented xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/></error>
<ping xmlns="urn:xmpp:ping"/></iq> 
at org.xmpp.packet.IQ.createResultIQ(IQ.java:384) 
```

我也尝试将 setSendPresence = true 传递给 connect() 中传递的连接配置，但没有区别。

我还尝试在两个用户上手动将 OpenFire 服务器中的订阅模式设置为“两者”（从“无”），但没有效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:35:55.180

得到它的工作！这可能是因为我没有在名册列表中的 jid 上使用正确的格式。正确的格式必须是**user@myserver.se**，而不仅仅是**user**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-19T13:43:24.783

编写一个 RosterListener 并查看它是否有效。

```
public void rosterOnlineStatus(){
    Roster roster = connection.getRoster();
    Presence status = new Presence(Type.available);
    status.setStatus("Hello This is Phaneendra");
    roster.addRosterListener(new RosterListener() {

        @Override
        public void presenceChanged(Presence presence) {

            System.out.println(presence.getFrom()+ "is "+presence+" "+presence.getStatus());
            presence.getStatus();

        }

        @Override
        public void entriesUpdated(Collection<String> addresses) {}

        @Override
        public void entriesDeleted(Collection<String> addresses) {}

        @Override
        public void entriesAdded(Collection<String> addresses) {}
    });
} 
```

看看添加 RosterListener 是否有效？

# php - PHP MYSQL 每个字母都链接到另一部电影但是当我点击我得到所有电影

> ID：12248514
> 
> 赞同：-5
> 
> 时间：2012-09-03T13:06:51.877
> 
> 标签：php, mysql

当我点击任何链接时，它会打开我数据库中的所有电影。我只想要以那封信开头的那部电影，我不知道我在哪里犯了错误。这是我的代码：

```
$azRange = range('A', 'Z');
foreach ($azRange as $letter){
    echo '<a href="index.php?naslov='.$letter.'&task=view">'.$letter.'</a> | ';
}

if(isset($_GET["task"]) && $_GET["task"] == "view"){
    $naslov = $_GET['naslov'];

$query  = "SELECT filmovi.naslov, filmovi.godina, filmovi.trajanje, filmovi.slika
           FROM filmovi
           ORDER BY naslov";

$result = mysql_query($query) 
          or die ('SQL Greska: '.mysql_error());

if($result){
    while($filmovi = mysql_fetch_array($result)){   
        echo '<center><b>';
        echo '<td><img src="img/'.$filmovi["slika"].'" border="0" width="100" /></td>';
        echo '</br>';   
        echo '<td>'.$filmovi["naslov"].'</td>';
        echo '<td> ('.$filmovi["godina"].')</td>';
        echo '<br>';
        echo '<td>Trajanje: '.$filmovi["trajanje"].' min</td>'; 
        echo '</b></center>';
    echo '</tr>';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:08:54.760

您在任何时候都没有将这封信传递给数据库查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T13:09:29.863

```
$query  = 
    "SELECT filmovi.naslov, filmovi.godina, filmovi.trajanje, filmovi.slika
    FROM filmovi
    WHERE naslov LIKE '$naslov%'
    ORDER BY naslov"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T13:09:42.240

您的查询

```
$query  = "SELECT filmovi.naslov, filmovi.godina, filmovi.trajanje, filmovi.slika
    FROM filmovi
    ORDER BY naslov"; 
```

正在从数据库中获取所有电影。这里没有过滤。`where`向该查询添加一些条件，您将获得预期的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T13:11:39.383

更改为此查询可能会有所帮助：

```
SELECT filmovi.naslov, filmovi.godina, filmovi.trajanje, filmovi.slika
FROM filmovi
WHERE `naslov` LIKE '{$naslov}%'
ORDER BY naslov 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T14:22:14.713

由于其他人已经回答了您的问题（缺少 WHERE 子句），我只想提一下`<center>`HTML 标签已被弃用，您应该改用[CSS](http://www.w3.org/Style/Examples/007/center.en.html)。

PHP 的 mysql 驱动程序也已过时，因此不要使用：

```
mysql_query($query); 
```

你应该使用

```
mysqli_query($link, $query); 
```

为了更好的安全性、OOP 支持、准备好的语句和事务。

你可以[在这里阅读](http://php.net/manual/en/mysqli.overview.php)

即使您是初学者并且您不关心这些功能的含义，您也应该尝试养成使用mysqli的习惯，这样当您学会欣赏它的那一天时，您就不必返回并更新您的所有代码。

# android - 应用程序不打算部分

> ID：12248518
> 
> 赞同：-1
> 
> 时间：2012-09-03T13:07:16.533
> 
> 标签：android

这是我的应用程序代码，下面的 nto 意图部分我使用调试我发现不在行 xmlResponse2[0][i]=test[i]; 之后 我错了？？任何人都可以帮助我在 xmlResponse2[0][i]=test[i]; 之后没有启动任何活动和代码中断 这条线

```
 public void onReceive(Context context, Intent intent) 
{
    //---get the SMS message passed in---
    Bundle bundle = intent.getExtras();        
    SmsMessage[] msgs = null;
    String str = "";  

    if (bundle != null)
    {
        //---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];            
        for (int i=0; i<msgs.length; i++){
            msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
            str += "SMS from " + msgs[i].getOriginatingAddress();                     
            str += " :";
            str += msgs[i].getMessageBody().toString();
            str += "\n";  

        String[][] xmlResponse2= null;
        String[] test = str.split("\n");
        xmlResponse2= new String[0][test.length];
        for (int i = 0; i < test.length; i++) {
            xmlResponse2[0][i]=test[i];
             Intent l = new Intent(context,AgAppMenu.class);
             l.putExtra("msg",xmlResponse2);
             l.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);   
             context.startActivity(l);
        }

        //---display the new SMS message---
        Toast.makeText(context, str, Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:12:20.610

这个说法：

```
xmlResponse2= new String[0][test.length]; 
```

创建一个包含 0 个元素的数组（即：没有元素）。也许您想创建一个包含 1 个元素的数组，如下所示：

```
xmlResponse2= new String[1][test.length]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:12:33.997

```
 xmlResponse2= new String[test.length];
    for (int i = 0; i < test.length; i++) {
        xmlResponse2[i]=test[i];

    }
       Intent l = new Intent(context,AgAppMenu.class);
         l.putExtra("msg",xmlResponse2);
        // l.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);   
         context.startActivity(l); 
```

# json - Postgresql，解析 JSON

> ID：12248521
> 
> 赞同：1
> 
> 时间：2012-09-03T13:07:25.840
> 
> 标签：json, parsing, postgresql, plpgsql, postgresql-9.1

我需要在 PL/PgSQL 函数中解析 JSON 对象，并将它们转换为数组、行集或任何可迭代的对象。是否有某种功能或插件可以做到这一点？

谷歌搜索被 Postgresql 9.2 中的 JSON 序列化阻塞。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:10:49.643

此时您可能想要使用过程语言插件，例如 PL/Perl、PL/Python 或[PL/V8](http://code.google.com/p/plv8js/wiki/PLV8)，使用您选择的 JSON 支持语言来生成所需的数据。

您可能可以编写一个 C 扩展库来添加所需的功能，但是当它已经可以通过 PL 实现时，这不太值得付出努力。

我希望在 9.3 中看到（并帮助添加）更丰富的 JSON 操作函数。

# c# - 为什么非托管内存可能占控制台应用程序使用的内存的 60% 以上？

> ID：12248527
> 
> 赞同：4
> 
> 时间：2012-09-03T13:08:05.757
> 
> 标签：c#, .net, memory, memory-management, red-gate-ants

我正在使用 ANTS Memory Profiler 7.0 分析内存使用情况，并注意到控制台应用程序的非托管内存使用量约为 193MB（约 62%），该应用程序仅从大约 1000 万条记录中填充一些 DTO。

**非托管内存**的帮助文本说：

> 内存分配给不作为纯 .NET 代码运行的应用程序部分。这包括公共语言运行时本身、图形缓冲区和通过 P/Invoke 或 COM+ 访问的任何非托管数据

为什么这个数字会这么高？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T14:38:29.670

访问数据库时，您将不可避免地使用非托管代码。引擎的接口始终是已经存在很长时间的代码，早于 .NET 并由提供互操作的托管类包装。例如，SQL Server 和任何搭载 OleDb 或 ODBC 的提供程序都是如此。

这些托管类将始终实现 IDisposable，因此您可以提前释放本机提供程序消耗的资源。忘记这样做是很常见的，很少被注意到。除了看到进程“繁重”运行之外，似乎无缘无故地消耗了大量句柄和非托管内存。当垃圾收集器运行不够频繁时尤其如此，您可以通过 Perfmon.exe 看到这一点。因此，除了不使用 Dispose 之外，部分问题可能是您没有对这些 DTO 对象做足够的工作来获得足够的 GC 流失。

检查您的代码并确保在需要时使用 Dispose() 和*using*语句。

# wpf - 全局样式不能被覆盖

> ID：12248530
> 
> 赞同：1
> 
> 时间：2012-09-03T13:08:17.817
> 
> 标签：wpf

我在我的 app.xaml 中定义了这个

```
<Style TargetType="{x:Type TextBlock}">
    <Setter Property="FontSize" Value="12"></Setter>
    <Setter Property="FontFamily" Value="Cailibri"></Setter>
</Style> 
```

这在 Window1.xaml 中定义

```
<Style x:Key="BASE">
            <Setter Property="Control.FontSize"  Value="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}, Path=MyFontSize}">
            </Setter>
            <Setter Property="Control.FontFamily"  Value="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}, Path=MyFontFamily}">
            </Setter>
            <Setter Property="Control.HorizontalAlignment"  Value="Left">
            </Setter>
        </Style>

<Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource BASE}">
        </Style>

<Style TargetType="lc:LayoutItem" BasedOn="{StaticResource BASE}">
            <Setter Property="LabelStyle">
                <Setter.Value>
                    <Style TargetType="lc:LayoutItemLabel" BasedOn="{StaticResource BASE}">
                    </Style>
                </Setter.Value>
            </Setter>
        </Style>

<lc:LayoutControl x:Name="HeadLayout" lc:LayoutControl.CustomizationLabel="test"     ItemInsertionPointIndicatorStyle="{StaticResource myInsertionPointIndicator}"   HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                      AllowNewItemsDuringCustomization="False" AllowAvailableItemsDuringCustomization="True" Orientation="Horizontal">
<lc:LayoutGroup Orientation="Vertical" View="Group"   Margin="0,0,0,0"        HorizontalAlignment="Stretch" VerticalAlignment="Top">
<lc:LayoutItem Label=" CDFEG " x:Name="StoreName" >
   <TextBlock TextWrapping="Wrap" Text="ABCDEFG"/>
   </lc:LayoutItem>
 </lc:LayoutGroup>
</lc:LayoutControl> 
```

当我更改 fontsize 或 fontfamily 属性时，当 App.xaml 中未定义 TextBlock 时，它可以正常工作。我已经搜索了很长时间，但对我来说还没有一个解决方案。任何建议都会有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T02:14:36.470

使用 DataTemplate 已解决。

```
<Style TargetType="lc:LayoutItem" x:Key="myLayoutItemStyle" BasedOn="{StaticResource BASE}">
        <Setter Property="LabelTemplate">
            <Setter.Value>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding}" >
                            <TextBlock.Style>
                                <Style  BasedOn="{StaticResource BASE}">
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </StackPanel>
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

在这里检查一下，[http://documentation.devexpress.com/#WPF/DevExpressXpfLayoutControlLayoutItem_LabelTemplatetopic](http://documentation.devexpress.com/#WPF/DevExpressXpfLayoutControlLayoutItem_LabelTemplatetopic)。

# c# - .NET 应用程序的自动补丁构建和部署

> ID：12248531
> 
> 赞同：3
> 
> 时间：2012-09-03T13:08:20.890
> 
> 标签：c#, .net, msbuild, continuous-integration, cruisecontrol.net

简短的问题，然后是解释 我们想要创建补丁并仅包含由于 dotnet 应用程序的一些错误修复而在构建中发生更改的文件。补丁应该在涉及 SVN、Cruisecontrol.net 和 msbuild 的持续集成过程中自动构建。

我们这里有一个场景：我们想要维护一个使用持续集成在远程服务器上运行的 .net 应用程序。源代码位于 SVN 中，并有 3 个用于 DEV、QA 和 PROD 的不同存储库。我们的开发人员几乎每天都会进行新的错误修复，并在初始测试和满意后将更改合并到开发存储库中。解决某个问题或添加功能后的代码然后合并到 QA 存储库中。QA 代码是在 QA 机器上手动构建和测试的。在 QA 测试之后，我们将其合并到 PROD 中。使用它，QA 还为必须手动替换或更改的文件制作新补丁。然后将补丁部署在临时服务器上。在其上对其进行测试直到完美，然后将补丁部署在实际的远程服务器上。

为了寻求持续集成，我们现在尝试混合使用 CruiseControl.net 和 msbuild 来完成该过程。**这个过程一直很好，直到我们必须从 QA 构建自动生成补丁的阶段**。生成补丁后，我们会将它们放在 ftp 服务器上，然后将它们下载到登台服务器进行测试。问题，即从新版本生成补丁有几个方面。应用程序的解决方案文件有许多项目，并且使用 postbuild 事件将 dll 复制到启动应用程序 bin 文件夹中。所以我们在实际应用中有一个特定的目录结构，它本身就是6个或多或少相互独立的解决方案的组合。

我们尝试创建补丁的方式是搜索 svn 的日志以查找哪些文件已更改。然后我们正在解析它找到项目名称。然后，我们使用包含应用程序所有文件的映射文件，以发行版具有它们的特定方式将所有文件从该项目的 bin 目录复制到补丁文件夹。

如果我们有 svn 和 Cruisecontrol.net，任何人都可以建议一个更好或更简单的方法来制作补丁。或任何其他开源工具来做到这一点。

希望问题很清楚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T08:31:53.793

总的来说，这整个过程与既定的最佳实践背道而驰。如果您有充分的理由，这不一定是一件坏事，但我在这里看不到它们。

本质上，您并没有使用 QA 和 DEV 环境来确保生产的稳定性。更糟糕的是，您使用不同的源代码树为它们构建代码。这会在部署过程中引入新的可能故障点。

解决此问题的标准方法是使用单个 SVN 代码树 - 在发布给 QA 时标记一个版本（使用已经构建的二进制文件！），可能在发布给 PROD 时再次标记它。不要重新构建二进制文件，使用你实际测试过的那些！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T05:51:41.240

如果您的 Msbuild 任务正在执行构建而不是重新构建，则未受影响的 dll 的日期/时间将不会更改其修改日期。

我建议这样做的原因如下：

*   Msbuild 将更新任何受更改影响的程序集的修改日期 - 即接口更改？
*   该程序集是您要部署的，因此请检查此而不是修改源。否则你需要知道构建过程（不会改变） - 即源文件位置、引用等。

您的部署将只包含来自修改日期 >= BuildDate 的构建目录中的 dll。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:29:59.493

我同意 skolima 关于推荐的构建和补丁过程的看法。你应该从你的初始标签和修改创建你的补丁，然后创建一个必须部署在所有环境中的新版本。

在我的公司，我们正在使用这种方法：

1.  我们的 CI 服务器会自动标记每个成功的构建
2.  当特定版本需要补丁时，程序员会复制并签出标记的版本并对其进行修复
3.  然后我们在 CI 服务器上有一个特定的“补丁”构建，它与带有“补丁”标志的普通构建完全相同，并指向已修补的源

**部署目标相同，构建过程相同，只是源更改。**

优点是补丁在 CI 上有自己的构建历史，因为它们是单独构建的，但被视为正常构建。

无论如何，如果您想通过 CI 在两个存储库之间自动执行修补过程，那么您必须创建特定的 MSBuild 任务来执行此操作。您可以尝试***合并***它们之间的更改或检查 SVN ***diff*** & ***patch***命令。

# html - 当在 ul li a 中一起使用浮动和列表样式属性时，列表圆圈似乎在列表项上方

> ID：12248534
> 
> 赞同：0
> 
> 时间：2012-09-03T13:08:40.120
> 
> 标签：html, css, styles, css-float, html-lists

我定义`float:left;`了所有元素的宽度/高度。当我尝试将列表圈定位到无序列表中时。**结果结果：**上面的圆圈来自`li a`

**这是问题：http:** [//jsfiddle.net/SPwyc/17/](http://jsfiddle.net/SPwyc/17/)

**没有** `float:left`它工作正常：http: [//jsfiddle.net/SPwyc/18/](http://jsfiddle.net/SPwyc/18/)

但我想用 来解决这个问题`float:left`，我尝试添加`display:block`，`display:inline`但它也没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:32:56.037

如果您添加`position: absolute;`到`a`标签，它是固定的，但我不知道这是否会破坏您的任何其他样式。

[http://jsfiddle.net/SPwyc/23/](http://jsfiddle.net/SPwyc/23/)

# apache - 在 Apache2 访问日志中记录 HTTP 标头

> ID：12248549
> 
> 赞同：12
> 
> 时间：2012-09-03T13:09:30.113
> 
> 标签：apache, logging, http-headers

我有一个在 Cloudflare 后面运行的网站，它是一个反向代理。这意味着我在访问日志中只能获得一两个 IP 地址。

但是，Cloudflare 确实在请求标头中提供了访问者 IP 地址，我假设我可以在访问日志中记录而不是标准地址。

我知道如何使用`CustomLog`，但有没有办法在 Apache 访问日志中保存 HTTP 标头？

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-03T14:17:59.697

是的 - 看看文档 - [http://httpd.apache.org/docs/2.2/mod/mod_log_config.html](http://httpd.apache.org/docs/2.2/mod/mod_log_config.html) 特别是条目

```
%{Foobar}i 
```

这将使您：

> Foobar 的内容：发送到服务器的请求中的标题行。其他模块（例如 mod_headers）所做的更改会影响这一点。如果您对大多数模块修改它之前的请求标头感兴趣，请使用 mod_setenvif 将标头复制到内部环境变量中，并使用上述 %{VARNAME}e 记录该值。

因此，通常会在 CustomLog 条目中添加一些条目，例如“... %{X-Forwarded-For-IP}i”。

将 'X-Forwarded-For-IP' 替换为您的 cloudflare 服务为您提供的任何内容（通常类似于 ''"CF-Connecting-IP"''）；例如

```
 LogFormat "%v %{CF-Connecting-IP}i (via cloudflare:%h) %l %u %t \"%r\" %>s %b" cloudflare
 CustomLog "|rotatelog.. etc" cloudflare 
```

关于“传输日志”——参见 TransferLog 指令附近的注释——它选择了最新定义的版本。

德。

# solr - 配置字段以考虑重复项

> ID：12248551
> 
> 赞同：0
> 
> 时间：2012-09-03T13:09:37.343
> 
> 标签：solr, duplicates, duplicate-data

考虑具有以下字段的 Solr 索引：

```
<fields>
    <field name="id" type="uuid" indexed="true" stored="true" default="0"/>
    <field name="user" stored="true" type="string" multiValued="false" indexed="true"/>
    <field name="text" stored="true" type="textmulti" multiValued="false" indexed="true"/>
    <field name="media" stored="true" type="string" multiValued="false" indexed="true"/>
</fields> 
```

如果存在具有相同`user`和`text`字段的当前文档，无论`id`或`media`字段的内容是什么，我都会认为新索引的文档是一个骗子（因此被拒绝）。具有匹配`user` **或** `text`不足以被视为欺骗的文档，它必须**同时是** `user` **和** `text`。

我已经阅读了 Solr wiki 上[用于更新 Solr 索引的](http://wiki.apache.org/solr/UpdateXmlMessages)[文档重复检测](http://wiki.apache.org/solr/Deduplication)和XML 消息，但我仍然看不到如何配置它。有任何想法吗？我正在使用出色的[solr-php-client](http://code.google.com/p/solr-php-client/)通过 PHP 连接到 Solr。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T18:35:31.657

可能你有一些理由不这样做，但你可以使用用户和文本的连接作为 id，然后你不需要使用重复检测，因为如果你不覆盖 Solr 会为你做这件事

# asp.net - 从网页访问控件

> ID：12248556
> 
> 赞同：0
> 
> 时间：2012-09-03T13:09:50.500
> 
> 标签：asp.net, web, external, webpage

我想访问外部网页上的内容（控件）

1.  [http://nccptrai.gov.in/nccpregistry/search.misc](http://nccptrai.gov.in/nccpregistry/search.misc) 那里有几个控件，比如文本框，获取它的值，
2.  重定向到[http://nccptrai.gov.in/nccpregistry/saveSearchSub.misc](http://nccptrai.gov.in/nccpregistry/saveSearchSub.misc) 提供必要的输入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:13:33.253

您可以基于 WebClient 使用此代码

```
System.Net.WebClient wc = new System.Net.WebClient();
byte[] raw = wc.DownloadData("http://nccptrai.gov.in/nccpregistry/saveSearchSub.misc");
//it's also possible to use DownloadString
string webData = System.Text.Encoding.UTF8.GetString(raw); 
```

所以你可以解析 webData 以获得你想要的价值

# jquery-plugins - Bootstrap typeahead, Handsontable：使用复杂对象/哈希

> ID：12248557
> 
> 赞同：0
> 
> 时间：2012-09-03T13:09:51.013
> 
> 标签：jquery-plugins, inline-editing, handsontable

我正在使用 JQuery [HandsonTable](http://handsontable.com/)。它使用 twitter bootstrap [typeahead 2.0](https://github.com/warpech/jquery-handsontable/blob/master/lib/bootstrap-typeahead.js)支持数据源作为数组`auto-complete`，

`["BMW", "Chrysler", "Nissan", "Suzuki"]`

我的要求是传递一个哈希而不是数组。

`[{value:1, name:"BMW"}, {value:2, name:"Chrysler"}, {value:3, name:"Nissan"}, {value:4, name:"Suzuki"}]`.

有一个较新的版本可用于预先输入，但我无法让它与 Handsontable 一起使用[。](https://gist.github.com/1866577)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:56:06.510

Handsontable（版本 0.7.0-beta，`master`分支）现在使用未经修改的 Bootstrap Typeahead 2.1.1。

它现在对你有用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:06:12.950

不幸的是，新的 HandsonTable 0.7.5（带有 Bootstrap Typeahead 2.1.1）仍然无法传递复杂的对象/哈希。

# https - 像 https 一样的四方

> ID：12248559
> 
> 赞同：1
> 
> 时间：2012-09-03T13:10:05.673
> 
> 标签：https, ssl-certificate, foursquare

想在我的网站中插入[“点赞”按钮。](https://foursquare.com/business/brands/offerings/likebutton)一切正常，但我们通过 https 保护了它，所以我尝试通过 https 访问[https://platform.foursquare.com/js/widgets.js](https://platform.foursquare.com/js/widgets.js)，但获得了 [http://i.imgur.com/efITe.png](http://i.imgur.com/efITe.png)

> 您试图访问 platform.foursquare.com，但实际上您访问了一个标识为 a248.e.akamai.net 的服务器。这可能是由于服务器上的错误配置或更严重的原因造成的。您网络上的攻击者可能正试图让您访问伪造（且可能有害）的 platform.foursquare.com 版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T14:45:49.260

为了安全连接，我们使用 cdn 脚本地址： [https](https://platform-s.foursquare.com/js/widgets.js) ://platform-s.foursquare.com/js/widgets.js 这个地址有正确的证书

# facebook - 通过 Facebook Graph API 删除内置

> ID：12248560
> 
> 赞同：2
> 
> 时间：2012-09-03T13:10:12.090
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-php-sdk

我正在尝试删除 Facebook OG Like。

首先，我创建了 OG 动作：

```
POST /me/[app-namespace]:begin 
day = [day-page-url] 
```

然后我从另一个用户那里为它创建了类似的东西：

```
POST /me/og.likes
object = [day-page-url] 
```

最后，让我们尝试从创建它的同一用户中删除 like（在上一个操作中返回了 id）：

```
DELETE 104127963073059 
```

Debug说这绝对像ID。

但结果是：

```
(#10) Application does not have permission for this action 
```

我们使用权限：

```
email,user_birthday,user_location,publish_actions,publish_stream 
```

您可以通过调试器工具进行检查：

```
App ID: 395096416536617 : ODM TEST
User ID:    100004287038925 : Foo
Issued: Unknown
Expires:    1346684400 (in about an hour)
Valid:  True
Origin: Unknown
Scopes: create_note email photo_upload publish_actions publish_stream share_item status_update user_birthday user_location video_upload 
```

使用 cURL 再次检查：

```
Andrew-MacBook-Pro:onedayofmine macuser$ curl -X DELETE \
> -F 'access_token=AAAFnVo0zuqkBA...0gSDLRbj' \
> https://graph.facebook.com/104156136403575
{"error":{"message":"(#10) Application does not have permission for this action","type":"OAuthException","code":10}} 
```

也许我需要一些额外的权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T01:49:30.883

移至答案框以提高可读性：

我也能够删除该`like`操作。

这是我创建的类似操作`user2`：

```
{"data":[{"id":"3639745067497","from":{"name":"John Smith","id":"10XXX648"},...,"application" {"name":"Article Liker","namespace":"article_liker","id":"364XX311647"},"data":{"object":{"id":"343299145761433","url":"http:\/\/example.com\/js_like_show_authtoken.php","type":"article_liker:review","title":"Article Two"}},"type":"og.likes", ... 
```

在这里我删除了它：

```
curl -X DELETE -F 'access_token=AAAFLVZAuGuN...TZAWlqaIZAx' https://graph.facebook.com/3639745067497
true 
```

其中，`true`= 成功

访问令牌权限：

```
Scopes: publish_actions read_stream 
```

# jquery - 动画无法正常工作/仅在第一次悬停后激活

> ID：12248563
> 
> 赞同：1
> 
> 时间：2012-09-03T13:10:44.837
> 
> 标签：jquery, css

编辑：这是一个没有modernizr后备.no-csstransition的工作小提琴：http: [//jsfiddle.net/xTT5s/12/](http://jsfiddle.net/xTT5s/12/)（我删除了css3缓动效果以避免moz/chrome冲突）

首先，我不太习惯 jQuery，所以这可能是一件非常愚蠢的事情。

好吧，我正在为 IE 的 CSS3 过渡（缓动）回退开发 jQuery .hover .animate。这是 CSS/Jquery 后备的代码：

注意：（ .no-csstransitions 是css3选择器的modernizr后备）

```
 section figure {
    width: 220px; height: 220px;
    box-shadow: 0px 0px 3px rgba(0,0,0,0.15);
    overflow: hidden;
    float: left;        
    position: relative;
    margin: 0 40px 40px 0;
}

    section figure figcaption {
    width: 220px; height: 57px;
    background: #474747;
    position: absolute;
    padding: 5px 0 0 10px;
    top: 221px;
    -webkit-transition: all 0.2s ease-out; 
       -moz-transition: all 0.2s ease-out; 
         -o-transition: all 0.2s ease-out; 
            transition: all 0.2s ease-out;
}
section figure:hover figcaption {
    margin-top: -63px;
    -webkit-transition: all 0.2s ease-out; 
       -moz-transition: all 0.2s ease-out; 
         -o-transition: all 0.2s ease-out; 
            transition: all 0.2s ease-out;
}

$(document).ready(function() {
$(".no-csstransitions figure").on({
    mouseenter: function() {
        $('figcaption', this).stop(true, true).animate({top: "221px"}, 300);;
    },
    mouseleave: function() {
        $('figcaption', this).animate({top: "250px"}, 300);;
    }
});
}); 
```

1º动画仅在第一个 .hover 后触发

2º .hover 动画效果仅在我将顶部位置设置为 MAX 219 时发生，如果我放置 220 效果不会触发，我不知道为什么。

3º .mouseleave 效果仅在一段时间后发生，figcaption 闪烁到某个位置然后缓动发生......

这是我的 wip 的预览版：http: [//fernandofleury.com.br/preview/portfolio/](http://fernandofleury.com.br/preview/portfolio/)

我将删除溢出：隐藏；所以你们可以看到它。提前致谢！

# c# - HTMLWorker.parse() 不正确的 html 代码

> ID：12248570
> 
> 赞同：0
> 
> 时间：2012-09-03T13:10:52.153
> 
> 标签：c#, html, winforms, itextsharp, system.net.webexception

我制作的程序应该使用 iTextsharp 将 Html 转换为 pdf。但是每次我运行程序时， `HTMLWorker.parse(stringreader reader);`. 异常说它找不到网络路径。

```
 public string Run(string html, string pdfName)
    {
        try
        {
            Document doc = new Document();
            //PdfWriter writer2 = PdfWriter.GetInstance(doc, new FileStream(@"L:\" + "Test54" + ".pdf", FileMode.Create));
            StyleSheet styles = new StyleSheet();
            string filePath = @"Z:\Emon Stage\" + "test" + ".pdf";
            using (FileStream pdfStream = new FileStream(filePath, FileMode.Create))
            {
                using (PdfWriter writer = PdfWriter.GetInstance(doc, pdfStream))
                {
                    writer.CloseStream = false;
                    doc.Open();
                    doc.OpenDocument();
                    doc.NewPage();
                    if (doc.IsOpen() == true)
                    {
                        using (StringReader reader = new StringReader(html))
                        {
                            //XMLWorkerHelper.GetInstance().ParseXHtml(writer, doc, reader);
                            doc.Add(new Paragraph(" "));
                            using (HTMLWorker worker = new HTMLWorker(doc))
                            {
                                worker.Open();
                                worker.StartDocument();
                                worker.NewPage();
                                worker.Parse(reader);
                                worker.SetStyleSheet(styles);

                                List<IElement> ie = iTextSharp.text.html.simpleparser.HTMLWorker.ParseToList(reader, null);

                                foreach (IElement element in ie)
                                {
                                    doc.Add((IElement)element);
                                }

                                worker.EndDocument();
                                worker.Close();
                            }
                        }
                    }
                    writer.Close();
                }
            }

            doc.CloseDocument();
            doc.Close();
            doc.Dispose(); 

            return string.Empty;
        }
        catch (Exception ex)
        {
            return ex.Message;
        }

    } 
```

根据stackoverflow的某人所说，我使用的html字符串存在问题：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
    <head><title>
    AutoScout24: Fahrzeugdaten ausdrucken
</title><meta http-equiv="X-UA-Compatible" content="IE=7" /><meta http-equiv="content-type" content="text/html; charset=utf-8" /><meta name="author" content="AutoScout24" /><meta name="robots" content="noindex,follow" /><meta name="description" content="Preis: 7.700 €, Baujahr: 1996, Leistung: 207 Kw (281 PS), Laufleistung: 169.000 km, Getriebe: Automatik, Kraftstoff: Benzin" /><meta name="keywords" content="AutoScout24" /><meta name="page-topic" content="AutoScout24" /><link rel="alternate" type="application/rss+xml" title="AutoScout24-Magazin RSS-Feed" href="http://ww2.autoscout24.de/magazine_rss.xml" /><script type="text/javascript" src="//s.autoscout24.net/combine/js?921b9c37a2e4ab133b1f14b8e13c02f073e017fd0bef1432f7d27433f4e9d289"></script><link rel="stylesheet" type="text/css" href="//s.autoscout24.net/cmsbox/99/2462008437" /><link rel="stylesheet" type="text/css" href="//s.autoscout24.net/combine/css?69a1274c6bb2e43c6fd649686b1910dcb88846da731f33577731763848fed5ef8e57233cfa31bdac608a787bc54dc3dc25b21bb0e21eec631ca1c316e050af2aee3a9b1a4cd63f84d9ece894f4eceaaf85a689c0c1177a62cb374a776b2fdc53" /><link rel="stylesheet" type="text/css" href="//s.autoscout24.net/combine/css?ef372438e68b2221" media="print" /><script type="text/javascript">$.as24={toggles:{'MyAreaB2BRedesignExport':1,'MyAreaInsertionITToggle':1,'MyAreaInsertionNLToggle':1,'RemoveStaticRoutes':1,'TestUsageRestServiceMessageTellAFriend':1,'LinkToWPOnDetailsPageDE':1,'SEOPageES':1,'NuggadATPixelToggle':1,'ProlongArticleInTwoSteps':1,'ArticleDeletionSurvey':1,'SealDataOnPrintOut':1,'AdvancedSearchTopArticlesRelocate':1,'CustomerExportJson':1}};</script><script type="text/javascript" src="//s.autoscout24.net/combine/js?70f8f19d6b1d1f718cd532e95f5d6b2bb41768327b71a504f9edb406e60007f0c5c46b74b1e9cc69872734b354a85ce1e0adbfe55e4efc75"></script><meta name="title" content="Corvette C4 - AutoScout24" /><link rel="image_src" href="http://pic3.autoscout24.net/images-small/305/233/0219233305001.jpg?70cec1b69010c9baa7b920ce66f714ff" />
<!-- Start Visual Website Optimizer Asynchronous Code -->
<script type='text/javascript'>
var _vwo_code=(function(){
var account_id=10842,
settings_tolerance=2000,
library_tolerance=1500,
use_existing_jquery=false,
// DO NOT EDIT BELOW THIS LINE
f=false,d=document;return{use_existing_jquery:function(){return use_existing_jquery;},library_tolerance:function(){return library_tolerance;},finish:function(){if(!f){f=true;var a=d.getElementById('_vis_opt_path_hides');if(a)a.parentNode.removeChild(a);}},finished:function(){return f;},load:function(a){var b=d.createElement('script');b.src=a;b.type='text/javascript';b.innerText;b.onerror=function(){_vwo_code.finish();};d.getElementsByTagName('head')[0].appendChild(b);},init:function(){settings_timer=setTimeout('_vwo_code.finish()',settings_tolerance);this.load('//dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&r='+Math.random());var a=d.createElement('style'),b='body{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}',h=d.getElementsByTagName('head')[0];a.setAttribute('id','_vis_opt_path_hides');a.setAttribute('type','text/css');if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);return settings_timer;}};}());_vwo_settings_timer=_vwo_code.init();
</script>
<!-- End Visual Website Optimizer Asynchronous Code -->
</head>
    <!--[if IE]>
    <body class="ie7">
    <![endif]-->
    <!--[if !IE]><!-->  
    <body>
    <!--<![endif]-->
        <div id="docu"><img id="ctl00_decoratedArea_myArticleDetailImages_bigImage" src="http://pic2.autoscout24.net/images/305/233/0219233305001.jpg?70cec1b69010c9baa7b920ce66f714ff" alt="" border="0" />
    <br/><img id="ctl00_decoratedArea_myArticleDetailImages_smallImageRepeater_ctl00_smallImage" src="http://pic4.autoscout24.net/thumbnails-big/305/233/0219233305002.jpg?22b74f6292d681883fe242fc9f719a2a" alt="" border="0" /><img id="ctl00_decoratedArea_myArticleDetailImages_smallImageRepeater_ctl01_smallImage" src="http://pic4.autoscout24.net/thumbnails-big/305/233/0219233305003.jpg?27d71f459ce81983a794639f51f4e37f" alt="" border="0" /><img id="ctl00_decoratedArea_myArticleDetailImages_smallImageRepeater_ctl02_smallImage" src="http://pic4.autoscout24.net/thumbnails-big/305/233/0219233305004.jpg?780b74044093e5c80f68f23ea84db5c2" alt="" border="0" /><img id="ctl00_decoratedArea_myArticleDetailImages_smallImageRepeater_ctl03_smallImage" src="http://pic4.autoscout24.net/thumbnails-big/305/233/0219233305005.jpg?658b15994c9680a056140d2510783137" alt="" border="0" />
    <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/></div>

<div id="globalLayerMask" class="globalLayerMask"></div>
<div id="globalLayer">
    <form id="layerForm" enctype="application/x-www-form-urlencoded" action="" method="post">
    </form>
</div>

        <form name="aspnetForm" method="post" action="PrintViewArticles.aspx?id=219233305" id="aspnetForm">
<input type="hidden" name="contactSource" id="contactSource" value="Form" />
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="" />

<script type="text/javascript">
var cval=getCookieValue('as24Visitor',null);
setCookieValue('as24Visitor',cval===null?'a5f12924-6fad-495f-b551-fde651c9e4dc':cval,true);
</script>

            <script type="text/javascript">

            var firstIvwImage = new Image();
            function sendIvwReport()
            {
                firstIvwImage.src = "http://toi.ivwbox.de/cgi-bin/ivw/CP/07020801;/Autoscout24/Gebrauchtwagen-Suche.html?r=" + escape(document.referrer) + "&d=" + Date.parse(new Date());
            }
        sendIvwReport();
</script>   
            <div class="container">

  <div id="ctl00_decoratedArea_omniturePixel" class="pixel">

<script type="text/javascript">
var s_account='autoscout24de';var s_pagename='Search-UC-Detail-Print';
</script>
<script type="text/javascript" src="//s.autoscout24.net/combine/js?b52b5d64cd0410a8"></script>
<script type="text/javascript">
try{s.dc=112;s.trackingServer="";s.trackingServerSecure="";s.server="www.autoscout24.de";s.pageName=s_pagename;s.channel="Search-UC";s.prop9="de-DE";s.prop1="16380";s.prop2="";s.prop11="";s.prop12="";s.prop13="";s.prop15="";s.prop16="";s.prop17="";s.prop18="";s.prop19="";s.prop20="";s.prop21="U";s.prop22="";s.prop25="";s.prop26="";s.prop27="";s.prop30="";s.prop42="";s.prop36="";s.prop4="Standard";s.prop29="S";s.eVar13="de-DE";s.eVar40="";s.eVar2="";s.eVar3="U";s.eVar4="";s.eVar5="";s.eVar6="";s.eVar8="";s.eVar9="";s.eVar14="";s.eVar15="";s.eVar17="";s.eVar18="";s.eVar31="";s.eVar49="";s.eVar58="";s.eVar12="";s.eVar23="P";s.eVar34="";s.eVar19="P";s.eVar20="S";s.eVar10="Standard";s.hier1="/16380";s.events="event7";s.products=";16380|19712|1996|B|P|2|8000"; var s_code=s.t();if(s_code)document.write(s_code); } catch(e) {} finally {}
</script>

</div>
  <div class="info-top-area">

<div class="print-button-container">
  <div class="orange-rounded-button">
    <div id="ctl00_decoratedArea_articlePrintHeader_printButton1" onclick="window.print(); return false;" class="primary-action">
    <span class="l"></span><span class="m">Jetzt drucken</span><span class="r"></span>
</div>
  </div>
</div>

<div class="clear-both"></div>
<div class="print-header">
  <div class="print-logo">
      <img id="ctl00_decoratedArea_articlePrintHeader_as24PrintLogo" src="//s.autoscout24.net/Images/_cache/ad95aba9b57bb3e9.jpg" alt="" border="0" />
  </div>
    <div class="date-insertion">
      <span id="ctl00_decoratedArea_articlePrintHeader_printFound">Inserat entdeckt am 03.09.2012</span>
    </div>
</div>

  </div>
  <div class="clear-both"></div>

<div class="print-dealer">

    <div id="ctl00_decoratedArea_customerInfo_privateCustomerInfo_contactAddressPanel" class="contact-address">

    <p>D&nbsp;97225 Zellingen</p>

</div>

<div id="ctl00_decoratedArea_customerInfo_privateCustomerInfo_contactPhonePanel" class="contact-phone no-margin">

    <div id="ctl00_decoratedArea_customerInfo_privateCustomerInfo_contactPhoneNoPanel">

                <p><b id="ctl00_decoratedArea_customerInfo_privateCustomerInfo_contactPhoneNoRepeater_ctl00_contactPhoneNoType">Tel.:</b>
                +49 (0)177 / 7931437</p>

    </div>

</div>

</div>
  <div class="clear-both"></div>
  <div class="left-content-area">
        <div class="detail-inner">

<div class="caption-box">
    <div class="article-caption">
        <div id="ctl00_decoratedArea_articleCaption_lblHead" class="detail-head">
    Corvette C4 
</div>        
        <div id="ctl00_decoratedArea_articleCaption_lblSubHeadDown" class="detail-subhead">

</div>
    </div>
</div>

        </div>
        <div class="detail-inner">
        <div class="floatLeft">
            <div class="detail-column-left">
                <div class="car-big">
    <div class="carpics">
        </div>
</div>
             </div>

             <div class="detail-column-right">

<div class="detail-info">
    <table class="i-detail">

        <tr id="ctl00_decoratedArea_myArticleDataControl1_pricePublicRow">
    <td class="c1">
                <b id="ctl00_decoratedArea_myArticleDataControl1_pricePublicLabel">Preis:</b>

            </td>
    <td valign="bottom" class="price-fat">
                <span id="ctl00_decoratedArea_myArticleDataControl1_pricePublicValue">€ 7.700,-</span>
            </td>
</tr>

        <tr id="ctl00_decoratedArea_myArticleDataControl1_emptyRow">
    <td colspan="2" style="height:13px"></td>
</tr>

        <tr>
            <td class="c1">
                <span id="ctl00_decoratedArea_myArticleDataControl1_offerTypeKey">Fahrzeugkategorie:</span>

            </td>
            <td class="c2">
                <span id="ctl00_decoratedArea_myArticleDataControl1_offerTypeValue">Gebraucht</span>
            </td>
        </tr>

        <tr id="ctl00_decoratedArea_myArticleDataControl1_bodyTypeRow">
    <td class="c1">
                <span id="ctl00_decoratedArea_myArticleDataControl1_bodyTypeKey">Aufbau:</span>
            </td>
    <td class="c2">
                <span id="ctl00_decoratedArea_myArticleDataControl1_bodyTypeValue">Cabrio</span>    
            </td>
</tr>

        <tr id="ctl00_decoratedArea_myArticleDataControl1_firstRegRow">
    <td class="c1">
                <span id="ctl00_decoratedArea_myArticleDataControl1_firstRegKey">Erstzulassung:</span>
            </td>
    <td class="c2">
                <span id="ctl00_decoratedArea_myArticleDataControl1_firstRegValue">07/1996</span>
            </td>
</tr>

        <tr id="ctl00_decoratedArea_myArticleDataControl1_mileageRow">
    <td class="c1">
                <span id="ctl00_decoratedArea_myArticleDataControl1_mileageKey">Kilometerstand:</span>
            </td>
    <td class="c2">
                <span id="ctl00_decoratedArea_myArticleDataControl1_mileageValue">169.000 km</span>
            </td>
</tr>

        <tr id="ctl00_decoratedArea_myArticleDataControl1_fuelRow">
    <td class="c1">
                <span id="ctl00_decoratedArea_myArticleDataControl1_fuelKey">Kraftstoff:</span>

            </td>
    <td class="c2">
                <span id="ctl00_decoratedArea_myArticleDataControl1_fuelValue">Benzin</span>

            </td>
</tr>

        <tr id="ctl00_decoratedArea_myArticleDataControl1_powerRow">
    <td class="c1">
                <span id="ctl00_decoratedArea_myArticleDataControl1_powerKey">Leistung:</span>
            </td>
    <td class="c2">
                    207
                    <span id="ctl00_decoratedArea_myArticleDataControl1_kwUnit">kW</span>
                    (281
                    <span id="ctl00_decoratedArea_myArticleDataControl1_hpUnit">PS</span>)
            </td>
</tr>

        <tr id="ctl00_decoratedArea_myArticleDataControl1_gearingTypeRow">
    <td class="c1">
                <span id="ctl00_decoratedArea_myArticleDataControl1_gearingTypeKey">Getriebeart:</span>    
            </td>
    <td class="c2">
                <span id="ctl00_decoratedArea_myArticleDataControl1_gearingTypeValue">Automatik</span>
            </td>
</tr>

        <tr id="ctl00_decoratedArea_myArticleDataControl1_bodyColorRow">
    <td class="c1">
                <span id="ctl00_decoratedArea_myArticleDataControl1_bodyColorKey">Außenfarbe:</span>
            </td>
    <td class="c2">
                <span id="ctl00_decoratedArea_myArticleDataControl1_bodyColorValue">Grün Metallic</span>
            </td>
</tr>

    </table>
</div>

            </div>
        </div>

             <div class="detail-column-left">   
                <div id="articleDetailEnvkv" class="envkv_box">

                </div>

             </div>

            <div class="detail-column-right">

<div class="dashed-line" style="margin-left:3px;"></div>
<div class="lower-right1">
    <div id="ctl00_decoratedArea_myArticleEquipments_equipmentsHead" class="actions-box-caption">
    Fahrzeugausstattung:
</div>
    <div id="ctl00_decoratedArea_myArticleEquipments_equipmentList" class="equi-list-all">
    Nichtraucherfahrzeug
</div>
</div>
                <div class="clear-both"></div>

<div class="dashed-line">
</div>
<div class="lower-right3">
    <div id="ctl00_decoratedArea_ArticleMoreDetailsData_detailsCaption" class="actions-box-caption">
    Weitere Details zum Fahrzeug:
</div>
    <div class="more-details">
        <table class="i-detail" cellspacing="0" cellpadding="0">
            <tr id="ctl00_decoratedArea_ArticleMoreDetailsData_fuelRow" valign="top">
    <td class="c1">
                    <span>Alle Kraftstoffe:</Span>

                </td>
    <td class="c2">
                    <span class="c2-sub">Benzin</div>

                </td>
</tr>

            <tr id="ctl00_decoratedArea_ArticleMoreDetailsData_generalInspectionRow">
    <td class="c1">
                    <span id="ctl00_decoratedArea_ArticleMoreDetailsData_generalInspectionKeyLabel">HU/AU:</span>
                </td>
    <td class="c2">
                    <span id="ctl00_decoratedArea_ArticleMoreDetailsData_generalInspectionValueLabel">02/2014</span>
                </td>
</tr>

        </table>
    </div>
</div>

<div class="dashed-line"></div>
<div class="sep-short">
    <img id="ctl00_decoratedArea_ArticlePrintFinancingData_seperatorImage3" src="//s.autoscout24.net/Images/_cache/275a32375231b176.gif" alt="" border="0" />
</div>
<div class="lower-right3">
    <div id="ctl00_decoratedArea_ArticlePrintFinancingData_printFinancingHeader" class="actions-box-caption">
    Finanzdienstleistungen:
</div>

    <div id="ctl00_decoratedArea_ArticlePrintFinancingData_printFinancingDisclaimer" class="description-text">
    Bitte wenden Sie sich für ein individuelles Finanzierungs-, Leasing- oder Versicherungs-Angebot an Ihren  Partner.
</div>

</div>

                <div id="ctl00_decoratedArea_AdServerArticleDetailItem" class="adbox">

</div>
            </div>

        </div>
        <div class="clear-both"></div>
        <div class="lower-content-bottom"></div>

<div class="footer-warranty">
  <p id="ctl00_decoratedArea_articlePrintFooter_as24Warranty_disclaimerText" class="notice">AutoScout24 GmbH übernimmt für die Richtigkeit der Angaben keine Gewähr.</p>

</div>

<div class="print-button-container">
  <div class="orange-rounded-button">
    <div id="ctl00_decoratedArea_articlePrintFooter_printButton2" onclick="window.print(); return false;" class="primary-action">
    <span class="l"></span><span class="m">Jetzt drucken</span><span class="r"></span>
</div>
  </div>
</div>  
    </div>
    <img src="http://tracking.autoscout24.com/parser.ashx?source=pr&amp;url=http://www.autoscout24.de/PrintViewArticles.aspx?id=219233305&amp;visitor=not_found&amp;ticks=634822815476118951" width="2" height="2" style="position: absolute" />

            </div>

<script type="text/javascript">
$(function() {
    try {
    var resCookie=$.cookie('ResolutionParams');
    var domain=document.domain;
    if(domain.indexOf('.') > -1) domain=domain.substring(domain.indexOf('.'));
    if (!resCookie || true) {
        resCookie = screen.width.toString();
        $.cookie('ResolutionParams', resCookie, { expires: 365, domain: domain, path: '/'});
    }
} catch(e) {}
});
</script>
<script type="text/javascript" src="http://ads.autoscout24.com/adserver/index4.aspx?slot=268&amp;language=ger&amp;site=1&amp;elementid=ctl00_decoratedArea_AdServerArticleDetailItem&amp;dealerid=12335432&amp;price=7700&amp;carfinancedby=0&amp;make=16380&amp;modell=19712&amp;strModell=C4&amp;strMake=Corvette&amp;vat=0&amp;body=2&amp;hsn=&amp;hp=281&amp;kw=207&amp;zip=97225&amp;age=194&amp;Year=1996&amp;carid=219233305&amp;adtype=P&amp;lastInspect=02/01/2014&amp;tsn=&amp;Mileage=169000&amp;carNo=&amp;cartype_id=C&amp;accident=U&amp;Month=7&amp;rnd=28&amp;ipaddress=1400240550&amp;ccm=0&amp;bildurl=http://pic2.autoscout24.net/images/305/233/0219233305001.jpg?70cec1b69010c9baa7b920ce66f714ff&amp;eurotaxid=0&amp;offertype=U&amp;fuel=B&amp;inter=&amp;cash=&amp;durat=&amp;rate=&amp;frate=&amp;tm=3"></script></form>

    <script src='//js.revsci.net/gateway/gw.js?csid=J11265&auto=t'></script>

<!-- m-pathy tracking [ start ] -->
<script type="text/javascript">
  var _mpathyHost = "http" + (document.location.protocol!="https:" ? "://m-pathy.gdlcdn.com/js/a" : "s://ne.wac.edgecastcdn.net/001262/m-pathy/js/as");
  document.write(unescape("%3Cscript src='" + _mpathyHost + "2909.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<!-- m-pathy tracking [ end ] -->

        <span id="ctl00_VisualWebsiteOptimizer1"></span>
    </body>
</html> 
```

# delphi - 如何更改 TCheckBox、TRAdioButton、TGroupBox 上的字幕字体颜色？

> ID：12248571
> 
> 赞同：8
> 
> 时间：2012-09-03T13:10:53.340
> 
> 标签：delphi, properties, colors, delphi-xe2, vcl

我不知道我的问题是什么，但我无法在 DEx2 中为 TCheckBox、TRAdioButton、TgroubBox 和 TRadioGroup 等控件设置字体颜色。我是在 IDE 中还是以编程方式执行此操作都没有关系。

我已将表单颜色设置为 clBlack，并希望我的标题为 clWhite，但它们不会呈现除 clBlack 之外的任何颜色。当我在窗体的 OnShow 事件上分配颜色并在调试器中逐步执行它时，它会显示我分配给它的值，但在屏幕上它仍然是黑色的。

我没有使用样式或其他任何东西。有任何想法吗？

这是一个示例表格： [黑底白字示例 http://www.skippix.us/temp/Delphi-Font-Problem.bmp](http://www.skippix.us/temp/Delphi-Font-Problem.bmp)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T14:08:15.000

当您在应用程序中使用 Windows 主题时，大多数自定义设置（如字体颜色）都会被忽略。作为解决方法并根据组件，您可以拥有控件（仅当支持此功能时），覆盖paint方法以便在字体（[`TRadioGroup`](http://docwiki.embarcadero.com/Libraries/en/Vcl.ExtCtrls.TRadioGroup)，[`TGroupBox`](http://docwiki.embarcadero.com/Libraries/en/Vcl.StdCtrls.TGroupBox)）中使用您自己的颜色，以及像[`TCheckBox`](http://docwiki.embarcadero.com/Libraries/en/Vcl.StdCtrls.TCheckBox)and这样的组件[`TRadioButton`](http://docwiki.embarcadero.com/Libraries/en/Vcl.StdCtrls.TRadioButton)（它们是WinAPI控件包装器) 你必须拦截[`WM_PAINT`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145213%28v=vs.85%29.aspx)windows消息并实现你自己的代码来绘制控件。

同样从 Delphi-xe2 开始，您可以使用允许您更改控件外观的[vcl 样式](http://docwiki.embarcadero.com/RADStudio/en/VCL_Styles_Overview)，从这里（以及何时可能）您可以修改样式挂钩以应用您自己的字体颜色和其他自定义项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-19T12:20:13.317

一个简单易行的解决方法是创建一个不带标题的复选框并在其后添加一个标签。您可以轻松更改标签的颜色。您还可以创建一个将标签绑定到复选框本身的新组件。这就是在 Delphi 2007 上对我有用的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-20T06:36:26.393

它将在以下设置下工作： **项目选项 > 应用程序 > 运行时主题 = 无**

# jquery - jQuery 显示 - 默认图像

> ID：12248584
> 
> 赞同：1
> 
> 时间：2012-09-03T13:11:42.723
> 
> 标签：jquery

我有一个真正简单的 jQuery 显示函数，当单击链接时，它会将图像加载到 DIV 中。

```
$(function(){
jQuery(".gallery-item a").click(function(evt) {
    evt.preventDefault();
    jQuery("#imageBox").empty().append(
        jQuery("<img>", { src: this.href})
    );
});
}); 
```

有没有办法添加默认图像，以便在加载页面时已经在 div 中有一个图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:16:42.463

```
$(function () {
    $(".gallery-item a").click(function (evt) {
        evt.preventDefault();
        var box = $("#imageBox").html('<img src="default.jpg" />');

        $("<img>", {src: this.href}).load(function () {
            box.empty().append(this);
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:19:34.947

尝试这个：

```
$(function() {
    jQuery(".gallery-item a").click(function(evt) {
        jQuery("#imageBox").empty().append(
           jQuery("<img />", { src: $(this).attr("href") })
        );
        return false;
    });
});​ 
```

**编辑评论：**

假设图片的url在属性“data-urlimage”标签“a”中

html:

```
<div class="gallery-item">
 <a data-urlimage="/img/myimage.jpg" href="#">click here</a>
</div> 
```

Javascript：

```
$(function() {
    jQuery(".gallery-item a").click(function(evt) {

         var img = new Image();
         img.src = $(this).data("urlimage");
         img.onload = function(){
             jQuery("#imageBox").empty().append(img);
         };

        return false;
    });
});​ 
```

[查看图像事件](http://www.devguru.com/technologies/ecmascript/quickref/image.html)

**编辑：**查看如何创建更好的对象“图像”

# c++ - 斐波那契数的乘积之和

> ID：12248587
> 
> 赞同：1
> 
> 时间：2012-09-03T13:11:54.110
> 
> 标签：c++, algorithm, math, fibonacci

给定一个系列

Fib(1) * Fib (n+2) + Fib(2) * Fib(n+1) + Fib(3) * Fib(n) + ...... + Fib(n-1) * Fib( 4)

或求和 **Fib(x) * Fib (n-x+3)**其中 x 从 1 变化到 n-1 其中 Fib(n) 是斐波那契数列的第 n 个数

评估这个系列 Fib(n) 可以使用矩阵求幂来计算。

但是这个的复杂性是 logn 并且对于 n 项它会是 nlogn 。

**我希望这个系列可以简化为一个术语或一些其他优化，以提高****时间复杂度。**

有什么建议么 ？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:25:55.727

我不能将总和减少为一项，但可以将其减少为五项的总和，从而降低`O(log n)`算术运算的复杂性。

但是，`Fib(n)`有`Θ(n)`位，所以位操作的数量不是对数的。有一个大小为 的数的乘法`Fib(n)`，`n-1`因此位操作的数量为`M(n,log n)`，其中是位数与位数相乘的位`M(a,b)`操作复杂度。对于朴素算法，，所以下面算法中的位操作数是。`a``b``M(a,b) = a*b``O(n*log n)`

允许这种减少的事实是斐波那契数（就像由线性递归定义的序列中的所有数字一样）可以写成纯指数项的总和，特别是

```
Fib(n) = (α^n - β^n) / (α - β) 
```

在哪里

```
α = (1 + √5)/2;    β = (1 - √5)/2. 
```

除了斐波那契数，我还使用卢卡斯数，它遵循与斐波那契数相同的循环，

```
Luc(n) = α^n + β^n 
```

所以卢卡斯数的序列（从索引 0 开始）以

```
2 1 3 4 7 11 18 29 47 ... 
```

该关系`Luc(n) = Fib(n+1) + Fib(n-1)`允许在斐波那契数和卢卡斯数之间轻松转换，并且逐步计算`Luc(n)`可以`O(log n)`重用斐波那契代码。

所以通过上面给出的斐波那契数的表示，我们发现

```
(α - β)^2 * Fib(k) * Fib(n+3-k) = (α^k - β^k) * (α^(n+3-k) - β^(n+3-k))
                                = α^(n+3) + β^(n+3) - (α^k * β^(n+3-k)) - (α^(n+3-k) * β^k)
                                = Luc(n+3) - ((-1)^k * α^(2k) * β^(n+3)) - ((-1)^k * α^(n+3) * β^(2k)) 
```

使用关系`α * β = -1`。

现在，由于`α - β = √5`总和`k = 1, ..., n-1`产生

```
 n-1                                              n-1                   n-1
5 * ∑ Fib(k)*Fib(n+3-k) = (n-1)*Luc(n+3) - β^(n+3) * ∑ (-α²)^k - α^(n+3) * ∑ (-β²)^k
   k=1                                              k=1                   k=1 
```

几何和可以写成封闭的形式，有点杂耍产生公式

```
n-1
 ∑ Fib(k)*Fib(n+3-k) = [5*(n-1)*Luc(n+3) + Luc(n+2) + 2*Luc(n+1) - 2*Luc(n-3) + Luc(n-4)]/25
k=1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T13:17:14.587

要遵循的步骤：

*   定义`std::vector<int>`并用您需要的所有斐波那契数填充它。[使用动态规划](http://en.wikipedia.org/wiki/Dynamic_programming#Fibonacci_sequence)计算这些数字；也就是说，利用您已经计算过的结果。不要多次计算相同的值！

*   一旦你用你需要的所有数字填充了向量，`Fib(x) * Fib (n-x+3)`在循环中应用公式并计算产品的总和。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T14:52:58.503

假设和, `f(n)=f(n-1)+f(n-2)`_`n>2``f(1)=f(2)=1``f(0)=0`

让 明确`E(n)=sum(k=1 .. n-1, f(k)f(n-k+3))`_`E'(n)=sum(k=0 .. n, f(k)f(n-k))`
`E(n)=E'(n+3) - ( f(0)f(n+3) + f(n)f(3) + f(n+1)f(2) + f(n+2)f(1) + f(n+3)f(0) )`

在[wolfram](http://mathworld.wolfram.com/FibonacciNumber.html)上，您会发现 : `E'(n)= (nL(n)-f(n))/5`，`L(n)=f(n+1)+f(n-1)`

由此 ：
`5E(n)=(n+3)( f(n+4)+f(n+2) ) - 5(2f(n) + f(n+1) +f(n+2))`
`5E(n)=(n+3)( 4f(n+1)+3f(n) ) - 10f(n+1) -15f(n)`
`5E(n)= (4n+2)f(n+1) + (3n-6)f(n)`

应该很容易评估，复杂度应该和使用的斐波那契算法一样，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T15:13:48.810

如果我知道[卢卡斯号码](http://en.wikipedia.org/wiki/Lucas_number)是什么，那么我可以使用身份...

F(n)*F(m) = [L(m+n) - (-1)^n*L(mn)]/5

看到这将斐波那契数的乘积之和减少为卢卡斯数的总和。

更好的是，由于 n+m 对于每一项都是常数，因此总和会进一步减少。这个总和有 n-1 项，所以总和减少到卢卡斯数的总和。

[(n-1)*L(n+3) + L(n+1) - L(n-1) + L(n-3) - ... + (-1)^(n-1)* L(5-n)]/5

作为测试，对于 n = 5，我得到 40，这与产品的直接总和一致：

1*13 + 1*8 + 2*5 + 3*3 = 40

对于 n = 1000，我得到一个总和：

82283375600539014079871356568026158421560221654785733943009487102720 211767741849325389562067921531531130739623611293922046989610820831567088 516047002196966545744637588824274730947688693969572937880383134671205375

更好的是，一些额外的工作将使卢卡斯数的总和进一步收缩，因为负指数的卢卡斯数与正指数的卢卡斯数有简单的关系。

就计算第 k 个卢卡斯（以及第 k 个斐波那契）数而言，它可以非常有效地完成，如此处[所示](http://www.mathworks.com/matlabcentral/fileexchange/34766-the-fibonacci-sequence)。

# ios - 设备 [iPhone] 如何与单个外围设备绑定 [蓝牙低功耗设备]

> ID：12248589
> 
> 赞同：2
> 
> 时间：2012-09-03T13:12:01.717
> 
> 标签：ios, bluetooth, core-bluetooth, bluetooth-lowenergy

看过 CoreBluetooth V4 后，不确定我是否错过了有关如何将观察者 [我的案例 iPhone] 与单个蓝牙低功耗设备绑定的标准信息？

如果外围设备能够与多个观察者绑定，那么它不能被视为安全问题吗？

请提供建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T07:57:09.417

外围设备（观察到的）一次只能有一个连接。它可以绑定的设备数量取决于外围设备的硬件和软件。中央设备甚至可以将外围设备配置为例如通过广告而不是通过连接向多个收听设备广播。

绑定需要安全和授权，你想到了什么样的安全问题？

这是一个有趣的用例：1000 多名跑者参加马拉松比赛，据说只有大约 10% 的跑者在他们的跑鞋中安装了蓝牙智能传感器，并通过智能手机应用程序链接到他们。如果单个用户尝试轮询与他的鞋传感器的连接，他将如何从环境中可能存在的数百个鞋传感器中识别它们？

;)

# css - 垂直对齐 CSS 中的内容

> ID：12248594
> 
> 赞同：0
> 
> 时间：2012-09-03T13:12:29.470
> 
> 标签：css, position, vertical-alignment

我创建了一个小提琴：http: [//jsfiddle.net/LgNp5/](http://jsfiddle.net/LgNp5/)。

如您所见，右侧有一个装载机。左侧有一个内容动态变化的菜单，因此右侧浮动 div 没有固定高度（父元素也没有）。我怎样才能使加载器始终垂直对齐（没有 JS）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:30:20.223

如果您垂直居中的元素是固定高度，那么这是最简单的，您可以通过这种方式设置`top: 50%;`并且 a `margin-top: -Zpx`where``Z`是垂直高度的一半。

```
#ui-tooltip-prompt .dynamo_content {
    float:right;
    width:400px;
    padding-left:8px;
    position:absolute;
    height:16px;
    top:50%;
    margin-top:-8px;    
} 
```

# gridview - ExtJS 4 网格与文件上传

> ID：12248595
> 
> 赞同：0
> 
> 时间：2012-09-03T13:12:30.983
> 
> 标签：gridview, file-upload, extjs4

可以通过文件上传制作 GridPanel。

我想让 GridPanel 有一些文本列和一列来上传文件。

```
dataIndex:'fieldForFile',
editor: {
  xtype:'filefield'
} 
```

有效，但是当我选择一个文件并且渲染器消失时，记录值为空。

下一步是上传在网格中选择的文件，目前我不知道该怎么做。

谁能帮我 ？

问候，帕维尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:23:11.880

```
xtype:'actioncolumn',
width: 30,
text: '^',
align: 'center',
items: [{
    icon: '/Content/images/upload.png',  // Use a URL in the icon config
    tooltip: 'Upload',
    handler: function(grid, rowIndex, colIndex) {
             var uploadField = Ext.getCmp('uploadField');
             uploadField.fileInputEl.dom.click();
    }
}] 
```

# ruby-on-rails-3 - Rails - 必需的资产文件、@import 和全局范围变量

> ID：12248597
> 
> 赞同：0
> 
> 时间：2012-09-03T13:12:33.743
> 
> 标签：ruby-on-rails-3, sprockets

我有一堆单独的文件，其中保存了项目范围内使用的变量。由于变量不会在整个项目中通过不同的 scss 文件持续存在，因此我必须在 application.css.scss 文件开始后立即导入它们：

```
@import "filename.css.scss"
/*
 *= require jquery-ui
 */ 
```

现在，我通过 @import 导入的所有内容都会立即导入，没有任何问题。我尝试通过链轮导入的所有内容都会被忽略；因此，如果我使用 @import 指令手动导入每个 SCSS 文件，它们都会很好地导入 - 这意味着应用程序可以访问这些文件。知道有什么问题吗？

我正在使用 rails v 3.2.6，sprockets 2.1.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:31:20.473

在花了一些时间浏览网页和阅读 sprockets 文档后，我发现了以下内容：

Sprockets 只解析文件的开头（直到它到达第一个注释块的末尾），所以：

```
@import "filename.css.scss"
/*
 *= require jquery-ui
 */ 
```

这将导入 filename.css.scss 但会忽略***= require jquery-ui**指令。

```
/*
 *= require jquery-ui
 */
@import "filename.css.scss" 
```

这将正常工作并加载 jquery-ui，然后导入 filename.css.scss。

希望这对将来的人有所帮助。

# google-visualization - 具有连续轴的 Google 图表烛台

> ID：12248600
> 
> 赞同：0
> 
> 时间：2012-09-03T13:12:55.663
> 
> 标签：google-visualization, candlestick-chart

我正在尝试为我的谷歌烛台图配置按日期分组格式，因为我看到它需要一个连续轴（所有 hAxis 选项后跟：此选项仅支持连续轴。）

我知道我需要添加一个连续轴，但我是怎么做的？我尝试了 2 天来玩这些设置，但没有任何运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:48:14.107

不使用 arrayToDataTable() 方法构建数据表实例，否则会引发异常。将水平轴定义为“日期”并使用 Date() 对象而不是字符串。

```
var data = new google.visualization.DataTable()
data.addColumn('date', 'Date');
data.addColumn('number', 'Whatever');
rows = [
    [new Date('2009-10-01'), 1230],
    [new Date('2009-11-01'), 1290],
    [new Date('2012-02-01'), 3690],
];
data.addRows(rows); 
```

应该够了。

# java - 格式持续时间

> ID：12248601
> 
> 赞同：2
> 
> 时间：2012-09-03T13:12:57.723
> 
> 标签：java, format, jodatime, duration

我整个上午都在试图找到一种方法来实现我最初认为相对容易的任务：将以数字方式表示的持续时间转换为可读的方式。例如，对于 3.5 的输入，输出应该是“3 年零 6 个月”。

根据我正在阅读的内容，似乎强烈推荐 Joda Time 库。使用该库并遵循[这篇文章](https://stackoverflow.com/questions/1440557/joda-time-period-to-string)，我正在尝试以下操作：

```
 Period p = new Period(110451600000L); // 3 years and a half

    PeriodFormatter formatter = new PeriodFormatterBuilder()
        .appendYears()
        .appendSuffix(" year", " years")
        .appendSeparator(" and ")
        .appendMonths()
        .appendSuffix(" month", " months")
        .toFormatter();

    System.out.println(formatter.print(p)); 
```

但是输出什么都没有。不知道为什么它不起作用。

我也尝试使用[Apache DurationFormatUtils](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/time/DurationFormatUtils.html)，但不起作用。

有人有想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T09:52:24.203

经过一些研究，测试和benjamin的帮助，我有一个解决方案：

```
 DateTime dt = new DateTime(); // Now
    DateTime plusDuration = dt.plus(new Duration(110376000000L)); // Now plus three years and a half

    // Define and calculate the interval of time
    Interval interval = new Interval(dt.getMillis(), plusDuration.getMillis());

    // Parse the interval to period using the proper PeriodType
    Period period = interval.toPeriod(PeriodType.yearMonthDayTime());

    // Define the period formatter for pretty printing the period
    PeriodFormatter pf = new PeriodFormatterBuilder()
            .appendYears().appendSuffix("y ", "y ")
            .appendMonths().appendSuffix("m", "m ").appendDays()
            .appendSuffix("d ", "d ").appendHours()
            .appendSuffix("h ", "h ").appendMinutes()
            .appendSuffix("m ", "m ").appendSeconds()
            .appendSuffix("s ", "s ").toFormatter();

    // Print the period using the previously created period formatter
    System.out.println(pf.print(period).trim()); 
```

我发现 Joda-Time 的官方文档非常有用，特别是这篇文章：[使用 JodaTime 正确定义持续时间](https://stackoverflow.com/questions/2092883/correctly-defining-a-duration-using-jodatime)

尽管如此，虽然它正在工作，但我并不是 100% 高兴，因为上面发布的代码的输出是“3y 6m 11h”，我不明白这 11 个小时的原因：S 无论如何，我只需要几年的精度和月等我相信问题不大。如果有人知道原因和/或在某些情况下是否有问题，请通过评论告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T14:02:31.887

您的代码中的句`p`点不包含年份或月份，这就是格式化程序根本不输出任何内容的原因。使用格式化程序`PeriodFormat.getDefault()`，您会看到它包含小时，即正好 30681 = 110451600000 / 1000 / 60 / 60。

这就是为什么：毫秒可以以定义的方式转换为秒、分钟和小时。但是计算天数、月数或年数是模棱两可的，因为一天中的小时数可能不同（时区偏移），一个月中的天数和一年中的天数也可能不同。[请参阅文档： http](http://joda-time.sourceforge.net/apidocs/org/joda/time/Period.html#Period%28long%29) ://joda-time.sourceforge.net/apidocs/org/joda/time/Period.html#Period%28long%29

在那里发现：

> 为了更好地控制转换过程，您有两种选择：
> 
> *   将持续时间转换为间隔，并从那里获得周期
> *   指定一个周期类型，其中包含精确定义的日期和更大的字段，例如 UTC

# html - 带有更多图像的html css图像

> ID：12248602
> 
> 赞同：2
> 
> 时间：2012-09-03T13:12:59.190
> 
> 标签：html, css, image, slice

如果我有这样的图像（例如）：

[![http://www.tiscali.it/v007/img/el.v004.png](../Images/f636277a6b634079d5bf068a3cbce5f5.png)](https://i.stack.imgur.com/ccMYQ.png)
[（来源：[tiscali.it](http://www.tiscali.it/v007/img/el.v004.png)）]

我的网站有更多背景元素，如何提取具有 css 属性的单个元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:16:27.727

您应该使用“CSS Sprite”方法。这意味着您需要创建一个指定的元素块宽度`width`and `height`，然后给它`background-image`加上`background-position`and `backgorund-url`，然后隐藏所有开箱即用的东西`overflow:hidden;`

例如，参考本教程，它在那里得到了很好的解释：[CSS Sprite 链接](http://css-tricks.com/css-sprites/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T13:21:16.267

使用 CSS 精灵
[http://www.google.de/search?q=css+sprites](http://www.google.de/search?q=css+sprites)

您的图片示例 [http://jsfiddle.net/qxVf8/](http://jsfiddle.net/qxVf8/)

* * *

## html

```
<div class="sprite sprite1">
</div> 
```

* * *

## css

```
​.sprite {
    background: url(http://www.tiscali.it/v007/img/el.v004.png) 0 0 transparent;
}
.sprite1 {
    width: 79px;
    height: 28px;
    background-position: -0px -305px;
    border: 1px solid magenta;
}
​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T13:16:33.123

您可以为此使用[css sprites 技术](http://css-tricks.com/css-sprites/)。

# html - 缩放转换在 Firefox 中不起作用

> ID：12248604
> 
> 赞同：0
> 
> 时间：2012-09-03T13:13:03.730
> 
> 标签：html, css, css-transitions

我已经在 chrome 和 safari 中顺利完成了这种过渡，但在 Firefox 中却没有。在 Firefox 中它不会放大，但会立即显示放大的图像。也许有人知道出了什么问题...

我为它制作了一个 jsfiddle：http: [//jsfiddle.net/WYfZz/](http://jsfiddle.net/WYfZz/)

```
ul.polaroids_portfolio li a:hover { -webkit-transform: scale(1.75); -moz-transform: scale(1.75); 
-ms-transform: scale(1.75);-o-transform: scale(1.75);transform: scale(1.75);
 position: relative; z-index: 5; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:37:38.360

你没有`-moz-transition: -moz-transform .15s linear;`on `ul.polaroids_portfolio a`，你只有`-webkit-`版本。

见[http://jsfiddle.net/WYfZz/5/](http://jsfiddle.net/WYfZz/5/)

此外，您也不应忘记将未预定义的过渡版本也放在最后（在 Firefox 16/Opera 12.5/IE 10 中，过渡和变换都将不加前缀）。同样适用`box-shadow`（最好使用无前缀版本而不是前缀版本；我可以理解使用`-webkit`前缀来支持 Android 或 Blackberry，但 Firefox 支持`box-shadow`自 FF4 以来的无前缀版本）

# compact-framework - ListView 中只允许选择一项

> ID：12248607
> 
> 赞同：0
> 
> 时间：2012-09-03T13:13:11.063
> 
> 标签：compact-framework

我只需要一个可选的 ListView 项目。我在 .NET Compact Framework 3.5 中找不到禁用多项选择的属性/方法。而且我在 OpenNetCF 中找不到 ListView2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T19:05:48.867

您可以使用[ListBox Control](http://msdn.microsoft.com/en-us/library/2swkx91x%28v=vs.80%29.aspx)。它的外观和功能可以像[ListView Control](http://msdn.microsoft.com/en-us/library/6dwb14tw%28v=vs.80%29.aspx)一样。

![截屏](../Images/be8e986aa7a57823b6b1198eb7594373.png)

如果您想（或需要）坚持使用 ListView 控件，您可以始终选择[SelectionIndexChanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.selectedindexchanged%28v=vs.80%29.aspx)事件中的第一项并丢弃其余项。

```
void ListView1_SelectedIndexChanged(object sender, System.EventArgs e) {
  for (int i = 0; i < ListView1.SelectedItems.Count; i++) {
    ListViewItem item = ListView1.SelectedItems[i];
    if (i == 0) {
      Console.WriteLine(item.ToString());
    } else {
      item.Selected = false;
    }
  }
} 
```

# python - 语句迭代中没有出现换行符

> ID：12248608
> 
> 赞同：0
> 
> 时间：2012-09-03T13:13:11.623
> 
> 标签：python

下面从一个表单中获取多个文件输入，并以串行方法将它们写入。虽然它确实在每个文件成功到页面时打印，但每个循环之间没有发生换行符？解决此问题的最佳方法是什么？我认为`print`语句会默认添加换行符？

```
#!/usr/bin/python
import cgi, os
import shutil
import cgitb; cgitb.enable()  # for troubleshooting

form = cgi.FieldStorage()

print """\
Content-Type: text/html\n
<html><body>
"""

if 'file' in form:
   filefield = form['file']
   if not isinstance(filefield, list):
      filefield = [filefield]

   for fileitem in filefield:
       if fileitem.filename:
          fn = os.path.basename(fileitem.filename)
          # save file
          with open('/var/www/rsreese.com/files/' + fn, 'wb') as f:
              shutil.copyfileobj(fileitem.file, f)
          # line breaks are not occuring between interations
          print 'File "' + fn + '" was uploaded successfully \n'
          message = 'All files uploaded'
else:
   message = 'No file was uploaded'

print """\
<p>%s</p>
</body></html>
""" % (message) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T13:16:54.697

Python 会很好地打印换行符，但您的*浏览器*不会显示这些。

改用`<br/>`标签，或将整个输出包装在`<pre>`/`</pre>`标签中。

# java - 更改 WritableRaster 对象会影响 bufferedImage 对象

> ID：12248613
> 
> 赞同：2
> 
> 时间：2012-09-03T13:13:26.147
> 
> 标签：java, image-processing, bufferedimage

我正在编写一个程序来使用以下代码对图像执行各种操作：

```
import java.awt.Desktop;
import java.awt.Graphics;
import java.awt.image.BufferedImage;
import java.awt.image.WritableRaster;
import java.io.BufferedReader;
import java.io.File;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.logging.Level;
import java.util.logging.Logger;

import javax.imageio.ImageIO;

public class BrightnessContrast {
    public static void main(String[] args) throws IOException {
        // TODO Auto-generated method stub
        int i, j, choice = 1;
        String imgName;
        boolean flag = true;

        String imagePath = "images/test.jpg";
        BufferedImage myImage = ImageIO.read(new File(imagePath));
        int height = myImage.getHeight();
        int width = myImage.getWidth();
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        final BufferedImage greyImage = new BufferedImage(width, height,BufferedImage.TYPE_BYTE_GRAY);
        Graphics grp = greyImage.getGraphics();
        grp.drawImage(myImage, 0, 0, null);
        File f2 = new File("images/BrightnessContrastTestInput.jpg");
        try {
            ImageIO.write(greyImage, "JPG", f2);
        } catch (IOException x) {
            x.printStackTrace();
        }

        while (flag == true) {
            System.out
                    .println(" 1.Brightness \n 2.Contrast \n 3.EXIT!");
            choice = Integer.parseInt(br.readLine());

            switch (choice) {
            case 1:
                //increase brightness

            case 2:
                //increase contrast
            case 3:
                flag = false;
                break;
            default:
                System.out.println("Invalid Option. Please try again.");
                break;
            }
        }
    }

    public static void ImageOperation(BufferedImage greyImage) {

        WritableRaster  myRaster = greyImage.getRaster();

        for (j = 0; j < greyImage.getHeight(); j++) {
            for (i = 0; i < greyImage.getWidth(); i++) {
                //some logic to increase contrast and brightness 
            }
        }

        File f = new File("images/"+imgName);
        try {
            ImageIO.write(greyImage, "JPG", f);
        } catch (IOException x) {
            x.printStackTrace();
        }
    }
    }

} 
```

所有操作都`myRaster`在`ImageOperation`方法中的可写光栅对象上完成，`myRaster`使用 BufferedImage 对象创建`greyImage`。

现在，在第一次运行中，当我（假设）将图像的对比度增加某个因子时，它会给出正确的结果，第二次如果我应用完全相同的对比度，它会对先前增强的图像执行该操作，而不是原来的，因此，在第二次中它给了我更高的对比度。

我的问题是，`greyImage`每次我增加对比度时 BufferedImage 对象是否都会更新`myRaster`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:19:22.293

查看 的源`BufferedImage`，`getRaster()`返回对缓冲图像中基础光栅对象的引用。所以如果你改变光栅，你就有效地改变了图像。

您可能想要制作原始图像的副本，然后对副本进行操作。这应该保留原件。

# c# - Openoffice 中是否可以实现单词自动化

> ID：12248615
> 
> 赞同：1
> 
> 时间：2012-09-03T13:13:28.470
> 
> 标签：c#, openoffice.org

我有`C#`用于单词自动化的代码`MS-office`。但我希望在`openoffice`使用 C# 时实现单词自动化。那么是否可以通过openoffice？我想以编程方式读取、写入和另存为 .doc 文件 ，提前`openoffice`使用Thanks`C#`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:24:04.373

简短的回答不，

Word 不是 Open Office 的一部分，那么它是如何工作的呢？

但是，您可以[使 Writer 自动化](http://wiki.openoffice.org/wiki/Documentation/DevGuide/ProUNO/CLI/CLI_Language_Binding)，但它有不同的模型，因此您的很多代码都必须重新编写。

* * *

如果 Open Office 要公开兼容的 API，我认为这会引发一些有趣的版权和知识产权问题，但我不是律师。但是，我并不是在赞美产品或 API 的好处，它们只是不同而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T20:42:23.920

这是可能的。你必须设置。OpenOffice，OpenOffice SDK，安装 SDK 后，必须`setsdkenv_windows.bat`在 SDK 文件夹中运行，然后需要其他组件，您必须从这里[http://gnuwin32.sourceforge.net/packages.html](http://gnuwin32.sourceforge.net/packages.html)安装 3 或 4 个。

CALC 的示例可能位于 C:\Program Files\OpenOffice.org 3\Basis\sdk\examples\CLI\CSharp\Spreadsheet 之类的路径中

Writer 的样本刚刚上线，我现在需要 Impress 的样本，但是 CALC 的自动化是 10/10

# javascript - 从 JavaScript 访问 DIV 元素

> ID：12248617
> 
> 赞同：1
> 
> 时间：2012-09-03T13:13:38.067
> 
> 标签：javascript, html

这是以下DIV结构：

```
<div class="demo">
    <div id="tabs">
        <div id="tabs-1"></div>
        <div id="tabs-2"></div>
</div></div> 
```

如何从 JavaScript 访问“tabs-2”？

```
var plot2 = $.jqplot ('tabs-2', [points], {... 
```

此 JavaScript 代码仅适用于 1 级 DIV 容器，例如“演示”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:14:50.967

关于什么

```
document.getElementById('tabs-2') 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:16:21.670

```
document.getElementById('tabs-2') 
```

尝试这个..

# python - 无法在 Kivy 中设置布局大小

> ID：12248620
> 
> 赞同：5
> 
> 时间：2012-09-03T13:13:42.560
> 
> 标签：python, user-interface, kivy

首先，如果它们是一些系统差异，我在 Ubuntu 12.04 上工作，使用当前的 Kivy 版本。我的问题是我无法设置布局大小。

```
from kivy.app import App
from kivy.uix.button import Button
from kivy.uix.boxlayout import BoxLayout

class TestApp(App):
    def build(self):
        layout = BoxLayout(orientation='vertical', size=(200,200))
        btn1 = Button(text='Hello', size=(50,50), size_hint=(None, None))
        btn2 = Button(text='World', size=(50,50), size_hint=(None, None))
        layout.add_widget(btn1)
        layout.add_widget(btn2)
        return layout
TestApp().run() 
```

任何的想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T21:41:48.803

根小部件将始终是窗口的大小，您可以将代码更改为：

```
from kivy.app import App
from kivy.uix.button import Button
from kivy.uix.boxlayout import BoxLayout
from kivy.uix.floatlayout import FloatLayout

class TestApp(App):
    def build(self):
        root = FloatLayout()
        layout = BoxLayout(orientation='vertical', size=(200,200), size_hint=(None, None))
        btn1 = Button(text='Hello', size=(50,50), size_hint=(None, None))
        btn2 = Button(text='World', size=(50,50), size_hint=(None, None))
        layout.add_widget(btn1)
        layout.add_widget(btn2)
        root.add_widget(layout)
        return root
TestApp().run() 
```

但是使用 boxlayout 并对所有孩子使用自定义大小似乎有点奇怪。

# delphi - 从 Hudson 运行 DUnit 测试

> ID：12248623
> 
> 赞同：2
> 
> 时间：2012-09-03T13:13:44.883
> 
> 标签：delphi, continuous-integration, hudson, delphi-xe

我终于让 Hudson 来构建我的项目和相应的测试项目（使用 Embarcadero 论坛中提供的 XMLTestRunner2 单元）。手动运行测试可执行文件 correclty 会生成一个带有测试结果的“dunit-report.xml”文件。

我无法让 Hudson 调用我的可执行文件并生成此文件。

我所做的是将构建步骤创建为 Windows 批处理命令，然后调用可执行文件。我尝试了几件事：

```
bin\Test.exe
start bin\Test.exe
start /wait bin\Test.exe
start /wait /b bin\Test.exe 
```

我无法让它工作。它要么立即返回并带有一些随机退出代码，要么不生成 XML 输出文件。这一定很简单，但我现在有点沮丧，因为我没有让它工作。

从 Hudson 执行单元测试的正确方法是什么？

# events - 项的 ACL 的 SPListTemplateType 或 SPListTemplateId 是什么？

> ID：12248626
> 
> 赞同：0
> 
> 时间：2012-09-03T13:13:51.987
> 
> 标签：events, sharepoint-2010

单击编辑控件块上的项目权限按钮或任何项目的功能区上的按钮时出现的列表的 SPListTemplateType 或 SPListTemplateId 或 ListUrl 是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:34:41.990

在 SharePoint 2010 中，您将无法连接事件接收器来捕获此处所做的任何更改。[这](https://sharepoint.stackexchange.com/questions/44842/what-is-the-splisttemplatetype-or-splisttemplateid-or-listurl-of-acl-of-an-item)是我的问题的完整答案。

# javascript - javascript日期验证检查

> ID：12248630
> 
> 赞同：2
> 
> 时间：2012-09-03T13:14:12.590
> 
> 标签：javascript, datetime

我将从访问该网站的用户那里动态获取出生日期值，但是当用户插入生日值时，我必须检查用户是否年满 18 岁。

用户将插入一个值，`18/09/2012`如`dd/mm/yyyy`格式。

```
 var arr   = date.split("/"); //date is the value of birth date.
    var day   = arr[0];
    var month = arr[1];
    var year  = arr[2]; 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:18:33.483

看看下面的问题，它会帮助你计算年龄——
[在 JavaScript 中计算年龄](https://stackoverflow.com/questions/4060004/calculate-age-in-javascript)

```
function getAge(dateString) 
{
    var today = new Date();
    var birthDate = new Date(dateString);
    var age = today.getFullYear() - birthDate.getFullYear();
    var m = today.getMonth() - birthDate.getMonth();
    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) 
    {
        age--;
    }
    return age;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:26:10.480

[您可以尝试使用 Javascript/Jquery 从出生日期计算年龄](http://pankajlalwani.wordpress.com/2010/08/02/age-calculation-from-date-of-birth-using-javascriptjquery/)的这些功能中的任何一个，或者检查这个[用 JavaScript 计算年龄](https://stackoverflow.com/questions/4060004/calculate-age-in-javascript)

# oop - 作为集合的一部分的对象实例化的最佳方式

> ID：12248632
> 
> 赞同：0
> 
> 时间：2012-09-03T13:14:34.400
> 
> 标签：oop, collections, instantiation

假设我正在制作一个任务列表应用程序，假设有一个 Task 类和一个 TaskList 类。现在，将任务添加到任务列表的最佳方式是什么？

```
new Task(TaskList,"task name") 
```

或者

```
TaskList.addTask("task title") 
```

在第二种情况下，TaskList 将负责实例化 Task 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:44:24.013

我会选择第二个选项。但是，可以加上第三个选项，允许您扩展 Task 类，这是一个具有以下签名的方法

TaskList.Add(任务任务);

这样，您将实例化 Task 类，设置所有属性，然后将其添加到 TaskList 对象。

理想情况下，您定义的 TaskList.addTask(string taskName) 方法可能是最终在内部调用第三个方法的辅助方法，如果您需要在设置 Task 对象属性时支持更大的灵活性，您可以保留该方法可用。

# wpf - 具有数据虚拟化的 DataGrid 行请求模式

> ID：12248633
> 
> 赞同：11
> 
> 时间：2012-09-03T13:14:35.863
> 
> 标签：wpf, datagrid, data-virtualization

[我使用来自CodePlex的一些想法以及](http://datavirtualization.codeplex.com)[Bea Stollnitz](http://web.archive.org/web/20150722011154/http://www.zagstudio.com:80/blog/498)和 Vincent Da Ven Berhge 的论文（相同链接）的博客实现了一个数据虚拟化解决方案。但是我需要一种不同的方法，所以我决定编写自己的解决方案。

我正在使用`DataGrid`这个解决方案来显示大约一百万行。我也在使用 UI 虚拟化。我的解决方案是可行的，但是在某些情况下我遇到了一些奇怪的行为，即如何`DataGrid`从源请求数据。

关于解决方案

我最终写了一个清单来完成所有繁重的工作。它是一个名为`VirtualList<T>.`It实现`ICollectionViewFactory`接口的泛型类，因此集合视图创建机制可以创建一个`VirtualListCollectionView<T>`实例来包装它。这个类继承自`ListCollectionView`. 我没有按照建议编写自己的`ICollectionView`实现。继承似乎也可以正常工作。

将`VirtualList<T>`整个数据拆分为页面。它获取总项目数，并且每次`DataGrid`通过列表索引器请求行时，它都会加载适当的页面或从缓存中返回它。这些页面在内部回收，并`DispatcherTimer`在空闲时间处理未使用的页面。

数据请求模式

*   我学到的第一件事，`VirtualList<T>`应该实现`IList`（非通用）。否则，`ItemsControl`会将其视为一个`IEnumerable`并查询/枚举所有行。这是合乎逻辑的，因为`DataGrid`它不是类型安全的，所以它不能使用`IList<T>`接口。

*   索引为 0 的行经常被`DataGrid`. 它似乎用于视觉项目测量（根据调用堆栈）。所以，我只是缓存这个。

*   内部的缓存机制`DataGrid`使用可预测的模式来查询它显示的行。首先它从上到下询问可见行（每行两次），然后在可见区域（包括第一个可见行）之前以降序查询几行（取决于可见区域的大小）顺序如此，从下到上。之后，它从上到下在可见行（包括最后一个可见行）之后请求相同数量的行。

    如果可见行索引是 4,5,6。数据请求将是：4,4,5,5,6,6,4,3,2,1,6,7,8,9。

    如果我的页面大小设置正确，我可以从当前和以前加载的页面中处理所有这些请求。

*   如果`CanSelectMultipleItems`是`True`并且用户使用 SHIFT 按钮或鼠标拖动选择了多个项目，则`DataGrid`枚举从列表开头到选择结尾的所有行。`IEnumerable`无论是否实现，此枚举都通过接口发生`IList`。

*   如果所选行不可见并且当前可见区域与所选行“远”，则有时 DataGrid 会开始请求从所选行到可见区域末尾的所有项目。包括其间的所有行，甚至不可见。我无法弄清楚这种行为的确切模式。也许我的实现是原因。

我的问题

*   我想知道，为什么`DataGrid`对不可见行的请求，因为这些行在变得可见时会再次被请求？

*   为什么需要每行请求两三次？

*   谁能告诉我如何使 DataGrid 不使用`IEnumerable`，除了关闭多项选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T08:23:55.117

我至少找到了一些欺骗 VirtualList 的方法。你可以在[这里](https://stackoverflow.com/a/14353567/978594)阅读。

如果您找到了另一种解决方案（甚至比我的更好），请告诉我！

# java - 使用非静态公共最终变量公开实例常量

> ID：12248635
> 
> 赞同：1
> 
> 时间：2012-09-03T13:14:39.727
> 
> 标签：java, static, constants, guava

我从来没有在我周围的任何 Java 代码中看到这种常量声明......所以我想知道你是否看到使用非静态最终常量的任何缺点。

例如，我已将 Guava 函数声明为给定 MaintenanceMode 实例的公共常量。我认为这更好，因为如果我创建了一个 getDecoratorFunction() 它每次都会创建一个新的函数实例......

或者 get 函数可以返回在类中保持私有的单个实例函数，但是它有无用的代码......当我们在类级别声明常量时，我​​们直接声明常量是公共的，我们不将它们设为私有并提供访问它们的公共吸气剂...

```
public class MaintenanceMode {

/**
 * Provides a function to decorate a push service with the appropriate decorator
 */
public final Function<PushService,PushService> MAINTENANCE_DECORATION_FUNCTION = new Function<PushService,PushService>() {
    @Override
    public PushService apply(PushService serviceToDecorate) {
        return new PushServiceMaintenanceDecorator(serviceToDecorate,MaintenanceMode.this);
    }
};

private final EnumMaintenanceMode maintenanceMode;
private final long milliesBetweenMaintenances;
private final Optional<ExecutorService> executorService;

public EnumMaintenanceMode getMaintenanceMode() {
    return maintenanceMode;
}

public long getMilliesBetweenMaintenances() {
    return milliesBetweenMaintenances;
}

public Optional<ExecutorService> getExecutorService() {
    return executorService;
}

private MaintenanceMode(EnumMaintenanceMode maintenanceMode, long milliesBetweenMaintenances, ExecutorService executorService) {
    Preconditions.checkArgument(maintenanceMode != null);
    Preconditions.checkArgument(milliesBetweenMaintenances >= 0);
    this.maintenanceMode = maintenanceMode;
    this.milliesBetweenMaintenances = milliesBetweenMaintenances;
    this.executorService = Optional.fromNullable(executorService);
}

} 
```

我可以通过以下方式访问此变量：

```
 pushServiceRegistry.decoratePushServices(maintenanceMode.MAINTENANCE_DECORATION_FUNCTION); 
```

我想如果我的 maintenanceMode 是可变的并且可以被多个线程访问，它可能会导致奇怪的行为，但这里不是。

你看到使用这种代码有什么缺点吗？

* * *

**编辑：**我可以有多个 MaintenanceMode 实例，并且所有实例都应该能够根据 MaintenanceMode 状态提供不同的常量功能。所以我不能使用不会访问 MaintenanceMode 状态的静态变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:22:55.890

getter 的重点是动态调度。如果您不需要它，则使用`public final`字段非常好。我什至经常编写没有 getter 的类 bean 对象，只有`public final`字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:18:28.000

通过使常量非静态，您基本上是在说只有当您拥有该类的实例时才能访问该常量。但它是公共的（在 的情况下`MAINTENANCE_DECORATION_FUNCTION`）并且它是该类的一部分，所以为什么不让它成为静态的呢？毕竟，常量是一个常量，它不需要在其他地方使用该类的实例。该变量`maintenanceMode`很好，因为它是一个私有常量。

# sql-server - Perl 脚本未通过其设置路径定位文件

> ID：12248639
> 
> 赞同：0
> 
> 时间：2012-09-03T13:14:49.860
> 
> 标签：sql-server, perl, cgi

我正在开发一个名为 MARS（多访问报告服务）的报告工具。这是一个通过 SQL 服务器读取报告的工具。我们有一个本地机器测试环境设置，一切运行良好，但是当我们上传到 Windows Server 2008 时，它似乎不想找到“必需”文件。我们在服务器上运行 Perl(v5.14.2)，在桌面/本地运行旧版本。

我收到的错误是： ***HTTP Error 502.2 - Bad Gateway 指定的 CGI 应用程序因未返回完整的 HTTP 标头集而行为不端。它返回的标头是“无法在 @INC 中找到 jsdb.pl（@INC 包含：/Inetpub/Scripts /Inetpub/Scripts/Security c:/Perl/site/lib c:/Perl/lib 。）在 \ gl-0185-nas07p\MCL_Dev_MPN_GL\Green_App\MARS\Scripts\Security\security.pl 第 7 行。“.***

这是 Security.pl 文件的标头，其中明确包含设置的路径和文件：

```
use CGI qw/:standard *table start_ul/;
use Date::Calc;
use Win32::ODBC;
use POSIX qw(floor);

###
use lib "/Inetpub/Scripts/Security";
require "jsdb.pl";
###
require "javascript.pl";
require "SecurityUtils.pl";
use lib "/Inetpub/Scripts";
require "webpageutils.pl"; 
```

在 JSDB 文件中是用于设置和修改系统用户的“配置文件”选项卡的代码。

任何帮助都非常感谢，因为我们似乎无法理解它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:01:57.987

您似乎对区分大小写不敏感，即在文件中它被列为 jsdb.pl 并且在您的问题中您将其标识为 JSDB。此外，错误消息将有问题的文件标识为 security.pl，但您的问题将其称为 Security.pl。Perl 区分大小写。这是否可能是一个因素，例如 jsdb.pl 文件实际上命名为 JSDB.pl？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T20:06:32.847

在哪里`jsdb.pl`？从您的源文件中，我猜它在`/Inetpub/Scripts/Security`其中看起来不像 Windows 路径。

猜测一下，仅存`C:/Perl/site/lib`在于 `C:/Perl/lib`您的 Windows Server 机器上，其他路径要么在该机器上不同，要么您根本无法`jsdb.pl`从那里访问

此外，您似乎没有在代码顶部使用`use strict`和，并且您使用库的方法可能会更好`use warnings``require 'library.pl'`

# ios - NSManagedObject 方法没有被调用

> ID：12248642
> 
> 赞同：0
> 
> 时间：2012-09-03T13:15:00.483
> 
> 标签：ios, core-data, nsmanagedobject

在子类中实现时，不会调用`NSManagedObject`方法，即`awakeFromInsert`,等。可能是什么原因？实体“类”在实体模型编辑器中设置为子类。`awakeFromFetch``NSManagedObject`

**事件.m**

```
#import "Event.h"

@implementation Event

@dynamic timeStamp;

- (void)awakeFromInsert {
    NSLog(@"%s", __FUNCTION__);
    [super awakeFromInsert];
}

- (void)awakeFromFetch {
    NSLog(@"%s", __FUNCTION__);
    [super awakeFromFetch];
}

@end 
```

**MyViewController（插入）**

```
- (void)insertNewObject:(id)sender {
    NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
    NSEntityDescription *entity = [[self.fetchedResultsController fetchRequest] entity];
    NSManagedObject *newManagedObject = [NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context];

    [newManagedObject setValue:[NSDate date] forKey:@"timeStamp"];

    NSError *error = nil;
    if (![context save:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
} 
```

这是模型编辑器的屏幕截图。![在此处输入图像描述](../Images/e2f9b3a0fde69751786702521f6a607f.png)

注意：我在 Mountain Lion 上使用 Xcode 4.4.1 (iOS SDK 5.1)，ARC ON。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T22:50:19.177

确保将您的类添加到目标中，并确保在模型中指定它们。如果您没有在模型中为每个实体指定子类，那么目标中包含的类并不重要；您将只处理一个 NSManagedObject。

# python - 如何下载本站所有图片：huaban.com

> ID：12248647
> 
> 赞同：-2
> 
> 时间：2012-09-03T13:15:45.383
> 
> 标签：python, html, web-applications, libcurl, webclient

我想使用脚本来获取该网站中的所有这些图片。我用 chrome 开发者工具查看了他主页的源代码。这些图片网址就像

```
src="http://img.hb.aicdn.com/3e32a8b101e515b9e7dbe8f5a2e47afff5ec6bcf4e4a-OTvsuu_fw192 
```

但是，如果我使用`wget`或`curl`下载此页面，甚至在浏览器中“保存铺路”，则该 html 文件中没有这样的链接。我不知道如何获得所有这些链接。另一个问题是如果我们向下滚动页面，图像会连续出现。我不知道是否有任何方法可以获取整个页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:12:34.853

您能否将 URL 发布到您要下载所有图片的最后一页？

或者对你来说是指来自*[http://huaban.com/](http://huaban.com/)**登陆页面**的所有图片*？

使用以下代码，您可以将图像 url “保存”到文件系统上的文件中：

```
image_path = 'http://img.hb.aicdn.com/3e32a8b101e515b9e7dbe8f5a2e47afff5ec6bcf4e4a-OTvsuu_fw192'
with open(r'<path_to_file>.jpg', 'wb') as image:
    image.write(urllib2.urlopen(image_path).read()) 
```

但是要检索图像“源”路径......我担心它们会由 javascript 组件生成，所以你没有太多选择。

也许一种解决方案是使用*无头浏览器*或 JavaScript 引擎桥（如[Python-Spidermonkey](http://code.google.com/p/python-spidermonkey/)）来获取最终的（js 构建的）html 内容。

-科林-

# nlp - 过滤掉无意义的短语

> ID：12248648
> 
> 赞同：5
> 
> 时间：2012-09-03T13:15:49.287
> 
> 标签：nlp

我有一个输出短语列表的算法（我无法更改）。这些短语旨在成为“主题”。但是，其中一些本身毫无意义。拿这个清单：

```
is the fear
freesat
are more likely to
first sight
an hour of
sue apple
depression and
itunes 
```

如何过滤掉那些本身没有意义的短语，留下如下列表？

```
freesat
first sight
sue apple
itunes 
```

这将适用于多种语言的短语集，但英语是优先事项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:29:36.913

> 它必须在语法上是可以接受的，因为它不能依赖于从中提取的原始句子中的其他单词；例如它不能以'and'结尾。

尽管这仍然是一个未充分说明的问题，但听起来您需要某种语法检查器。我建议您尝试将词性标记器应用于每个短语，编译可接受的 POS 标记模式列表（例如，以介词结尾的任何内容都是不可接受的）并使用它来过滤您的输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T20:28:48.727

在高层次上，似乎只有名词或形容词-名词组合的短语会产生更好的结果。

例子：

*   “蓝衬衫”
*   “开心的人”
*   “书”

首先，这个问题可以像您希望的那样复杂。对于第三方阅读/解决方案，我遇到了：

*   [http://en.wikipedia.org/wiki/List_of_natural_language_processing_toolkits](http://en.wikipedia.org/wiki/List_of_natural_language_processing_toolkits)
*   [http://research.microsoft.com/en-us/groups/nlp/](http://research.microsoft.com/en-us/groups/nlp/)
*   [http://sharpnlp.codeplex.com/](http://sharpnlp.codeplex.com/)（注意词性标注器）

如果您需要 100% 的准确率，那么我自己不会编写这样的工具。

但是，如果问题域是有限的......

我会先扔掉连词、介词、缩略词、状态动词等。这是一个相当短的英语列表（看起来与@HappyTimeGopher 建议的停用词非常相似）。

之后，您可以创建所有可接受的名词和形容词的字典（当然，作为索引结构），并将原始短语中的每个单词与之进行比较。任何未出现在字典中并以正确顺序出现的内容都可能被丢弃或排名较低。

如果您有 100 个输入值并希望选择最好的 5 个，这可能很有用。在字典中查找值意味着该词/短语很可能是好的。

我之前通过从与垂直行业相关的数千个文档中构建原始索引来自动生成这样的字典。然后，我花了几个小时使用 SQL 和 Excel 去除人类容易发现的问题。结果列表并不完美，但它消除了大部分明显愚蠢/毫无意义的术语。

正如您可能已经猜到的那样，这些都不是万无一失的，尽管检查形容词到名词的顺序会有所帮助。考虑“Greatest Hits”与“Car Hits [Wall]”的情况。

专有名词（例如人名）不适用于字典方法，因为建立一个包含所有给定/姓氏变体的字典可能是不可行的。

总结一下：

*   使用停用词列表
*   生成单词字典，用词性对它们进行分类
*   通过字典和停用词运行原始短语
*   （可选）根据您在比赛中的自信程度排名
*   如果需要，接受不违反已知模式的短语（这将处理许多专有名词）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T20:11:44.153

如果您可以访问生成这些短语的文本，则创建自己的主题标签可能会更容易。

如果做不到这一点，我可能会删除任何包含停用词的内容。请参阅此列表，例如： [http ://www.ranks.nl/resources/stopwords.html](http://www.ranks.nl/resources/stopwords.html)

我不会为此打破 POS 标签或任何更强大的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T21:18:37.103

您似乎可以创建一个过滤掉三件事的列表：

1.  介词：[https ://en.wikipedia.org/wiki/List_of_English_prepositions](https://en.wikipedia.org/wiki/List_of_English_prepositions)
2.  连词：[https](https://en.wikipedia.org/wiki/Conjunction_(grammar) ://en.wikipedia.org/wiki/Conjunction_(grammar )
3.  to-be的动词形式：[http ://www.englishplus.com/grammar/00000040.htm](http://www.englishplus.com/grammar/00000040.htm)

如果你过滤这些东西，你会走得很远。你更关心假阴性还是阳性？如果误报不是一个大问题，这就是我的处理方式。

# regex - 正则表达式捕捉规则的逆

> ID：12248649
> 
> 赞同：0
> 
> 时间：2012-09-03T13:15:52.230
> 
> 标签：regex

我有以下正则表达式来获取文本中的标签

```
(<[^ ][^><]*>) 
```

我怎样才能让它得到除了标签之外的所有东西......

澄清：从[这里](http://www.regexpal.com/)把规则和这个作为主体

```
<asd> ba <asd><a>ddd</a> 
```

我想得到除`highlighted`文本以外的所有内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:19:17.970

您可以*拆分*，而不是使用正则表达式进行*匹配*。

 *```
x.split(/<[^ ][^><]*>/) 
```

`split`返回所有不匹配的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:23:02.420

不会

```
>([^<]*)< 
```

做这个把戏？该组包含您要查找的字符串。*

# list - 返回 tcl 8.4 中列表列表中重复项的索引

> ID：12248650
> 
> 赞同：3
> 
> 时间：2012-09-03T13:16:00.780
> 
> 标签：list, tcl

我有这样的列表：{ ADC } { DSD } { ASD } { YDD }

我想列出在子列表的同一索引中具有重复项的所有索引。例如，如果我想在子列表的索引 2 处搜索每个“D”，我想知道列表的索引（这里是 0 和 3）

这是代码：

```
proc findElement {lst idx value} {
    set i 0
    foreach sublist $lst {
        if {[string equal [lindex $sublist $idx] $value]} {
            return $i
        }
        incr i
    }
    return -1
} 
```

当我称它为 findElement $toto 1 D

它只返回 0 ！

为什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T14:33:15.280

因为当 $i = 0 时找到匹配项时，您有一个 return 语句。

尝试以下操作，而不是返回所有匹配索引的列表

```
proc findElement {lst idx value} {
    set i 0
    set return_list [list]
    foreach sublist $lst {
       puts "i=$i sublist=$sublist"
        if {[string equal [lindex $sublist $idx] $value]} {
            puts "Found $i"
            lappend return_list $i
        }
        incr i
    }
    return $return_list
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T18:28:13.947

您可以使用`lsearch -all -exact -index`.

```
proc findElement {lst idx value} {
   return [lsearch -all -exact -index $idx $lst $value]
} 
```

# mercurial - Jenkins with mercurial：将存储库 url 设置为参数

> ID：12248651
> 
> 赞同：2
> 
> 时间：2012-09-03T13:16:03.017
> 
> 标签：mercurial, jenkins, jenkins-plugins

是否可以将 Jenkins 与 Mercurial 一起使用，以使作业将 mercurial 存储库 URL 作为参数？

这将允许我们使用可以克隆和构建不同存储库的单个作业。此构建仅用于测试。正式的构建和发布将来自一个恒定的存储库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T20:47:24.507

在 Job Configuration 页面上，选中“This build is parameterized”选项。

您应该能够为您的存储库定义一个命名参数，然后在构建配置中进一步引用它。在我的设置中，我这样做是为了允许在 Mercurial 中建立命名分支。

您必须在触发构建时手动指定参数。

# matlab - Matlab串口写入问题

> ID：12248652
> 
> 赞同：0
> 
> 时间：2012-09-03T13:16:05.630
> 
> 标签：matlab, serial-port

我正在使用串行电缆将命令从 matlab 写入由 C 代码控制的相机。问题是 - 它有时有效，有时无效......而且非常令人沮丧。

我在 Matlab 中使用的代码是：

```
Serialport=serial('COM18');
fopen(Serialport);
%Serialport.Timeout = 10000;
fwrite(Serialport,FileName); %Send File name to the camera 
```

它卡在`fwrite`函数中而没有任何错误。我尝试`fprintf`改用它，它有时仍然有效，有时无效。我尝试了不同`timeout`的，但它仍然不起作用..

我在网上没有找到任何关于它的信息。

# iphone - 如何将自定义 uitableviewcell 添加到使用 ib 创建的 uitableview？

> ID：12248657
> 
> 赞同：2
> 
> 时间：2012-09-03T13:16:27.417
> 
> 标签：iphone, uitableview

我用 IB 创建了 uitableview。我设计了自己的 uitableviewcell（它是 uiatbleviewcell 的子类，有自己的 xib 文件）。如何将其添加到我的 uitableview 中？

我试过了

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath 
*)indexPath {

static NSString *CellIdentifier = @"myCell";
myCell *cell = (myCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    NSArray *xib = [[NSBundle mainBundle] loadNibNamed:@"myCell" owner:self options:nil];
    cell = [xib objectAtIndex:0];
}
// Configure the cell...
cell.title.text = @"tableCell";
cell.preview.text = @"preview";
cell.postedTime.text = @"right now";

return cell;
} 
```

它工作不正确。我不能在这里包含图片，因为我的代表是 10 （需要最少 11 来上传图片）。所以这里是显示我糟糕结果的链接。这就是我想要的：http: [//img708.imageshack.us/img708/5082/20120903153930.png](http://img708.imageshack.us/img708/5082/20120903153930.png)

这就是我所拥有的：http: [//img836.imageshack.us/img836/5844/20120903154405.png](http://img836.imageshack.us/img836/5844/20120903154405.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:26:53.723

u need to change the default height of each cell using method

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
return 62.0f; // enter value if u know or test
} 
```

hope it helps. happy coding :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:47:33.803

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
 {
if(btnTag == 1)
    return [array1 count];

if(btnTag == 2)
    return [array2 count];
 return YES;

} 

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
 return 62;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{

static NSString *CellIdentifier = @"Cell";

CustomCell *cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

if(btnTag == 1)
  {
    cell.teamLabel.text = @"i am 'A'cell";
  }
if(btnTag == 2)
  {  
    cell.teamLabel.text = @"i am 'B'cell";
  }
return cell;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:27:36.243

You dont have to add it like this on your xib file. Acc to what you have done you have added a `UITableViewCell` on another `UITableView`. Do you really want to create a custom cell ?? You can simply add any data into the UITableView in the

`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath` Then add the cell's accordingly like UILabels , UIImageViews etc .

```
 cell = [tableView dequeueReusableCellWithIdentifier:nil];
    if (cell == nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:nil ];
    }        
    UIButton *Imagebutton = [[UIButton alloc]initWithFrame:CGRectMake(10, 5, 30, 30)];
    UIImage *img = [UIImage imageNamed:@"Lock Unlock.png"];
    [Imagebutton setImage:img forState:UIControlStateNormal];
    [Imagebutton addTarget:self action:@selector(aMethod1:) forControlEvents:UIControlEventTouchDown];
    [cell.contentView addSubview:Imagebutton];
    UILabel *MealsforLabel = [[UILabel alloc]initWithFrame:CGRectMake(50, 10, 140, 30)];
    MealsforLabel.backgroundColor = [UIColor clearColor];
    [cell.contentView addSubview:MealsforLabel];
    cell.textLabel.textColor = [UIColor blackColor];
    cell.textLabel.textColor=[UIColor whiteColor];
    cell.selectionStyle = UITableViewCellSelectionStyleGray;
    return cell; 
```

Something like the above.

# javascript - 使用 jquery 抓取图像 SRC attr

> ID：12248660
> 
> 赞同：0
> 
> 时间：2012-09-03T13:16:32.900
> 
> 标签：javascript, jquery, dom, jquery-mobile

它是 Jquery Mobile 我想从 rss 描述标签中获取图像**src**，我想将图像的 SRC 获取到变量中，我尝试了很多方法，但它对我不起作用，这是我的代码：我想添加变量包含此 img 标签 SRC 中的 SRC：

```
document.write(
    '<li id="list' + i + '"><img src="**#img**" class="ui-li-thumb"><a href="#article' + i + '" id="link' + i + '">&nbsp;</a></li>'
  ); 
```

黑色文本是变量。我试图从以 img 标签等开头的文本中获取 img src：

```
$('#link' + i).text(entry.title);
$('#img' + i).text(entry.content); 
```

我要抓取的图像在里面：`text(entry.content)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:21:31.670

获取 src**属性**值：

```
var variable = $('#img' + i).attr('src'); 
```

设置 src**属性**值：

```
$('#img' + i).attr('src', "http://example.com/img.png"); 
```

其中 '#img' + i 是带有 id img1、img2 等的标签...例如：

```
<img id="img0" /> 
```

`text`- 这是 jquery 函数，它将在其中使用 .innerText/.innerContent。和带有内部文字的图像 - 没有这样的东西。 - 这是通过 id 获取元素的`.getElementById`javascript 对象函数。`window`它与大多数 jQuery 函数返回的 jQuery 对象没有什么共同之处（`.text`是其中之一）

[jQuery API](http://api.jquery.com/) - 这是您必须阅读的内容，以获取有关您可以使用 jQuery 对 DOM 做什么的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T13:34:11.523

您可以尝试以下方法：

```
<img id="first-image" src="smiley.gif" alt="Smiley face" height="42" width="42" /> 
```

使用以下方法获取 src：

```
var currentSrc = $("#first-image").attr("src"); 
```

修改 src 使用：

```
$("#first-image").attr("src", "smiley_2.gif"); 
```

# mysql - 从指定节点遍历 DAG（有向无环图）以创建树视图

> ID：12248661
> 
> 赞同：1
> 
> 时间：2012-09-03T13:16:35.227
> 
> 标签：mysql, sql, tree, hierarchical-data, directed-acyclic-graphs

我正在使用以下方法为有向无环图组合一个零件数据库。 [http://www.codeproject.com/Articles/22824/A-Model-to-Represent-Directed-Acyclic-Graphs-DAG-o](http://www.codeproject.com/Articles/22824/A-Model-to-Represent-Directed-Acyclic-Graphs-DAG-o)

我可以使用已转换为 MySQL 的页面中的 SQL 查询来构建我的数据集。

以前我使用过嵌套集模型，尽管我们发现删除成为一个问题。我找不到有关如何使用此模型遍历树的任何信息。我只需要能够创建一个 html 树来显示所选父节点的后代并识别叶节点（将使用 jstree）。

如果有帮助，我可以发布嵌套集模型中的代码。我不需要任何关于 html 的帮助，它是我坚持使用的 SQL。

有谁知道在哪里可以找到有关我需要的查询的信息。

编辑：继评论之后，我想适应与比尔·卡温斯闭包模型更密切相关的东西。[http://www.slideshare.net/billkarwin/models-for-hierarchical-data](http://www.slideshare.net/billkarwin/models-for-hierarchical-data) 但是我注意到在幻灯片 49-50 上，我想选择输出似乎没有提供足够的节点的后代画一棵简单的树。以前使用嵌套集模型，我能够获得从左到右、从上到下遍历的类似输出。我会尽力解释。

```
Item | Depth

1    |   0

2    |   0

3    |   1

6    |   2

7    |   0

9    |   1 
```

这使我可以绘制一棵树，因为 SQL 以更易于操作的方式列出了后代的顺序。我相信它通过使用 COUNT 个子树创建了“深度”，如果它在这里有用，我会挖掘查询。

再次感谢你的帮助。

# actionscript-3 - 在 flash actionscript 3.0 中只能使用一次的按钮

> ID：12248662
> 
> 赞同：0
> 
> 时间：2012-09-03T13:16:39.263
> 
> 标签：actionscript-3, flash

我有这个收集物品游戏，你必须收集足够的“星星”才能访问按钮。在我点击“星”按钮后，它应该会消失并且再也不会出现。但是，在使用这个脚本的时候，虽然按钮一点击就消失了，但是当我转到另一个框架后返回该框架时，它又出现了！请帮忙！

```
 star1.addEventListener(MouseEvent.CLICK,gotstar);

    function gotstar(event:MouseEvent){
stars++;
star1.x = -500;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:30:15.083

您是否在框架本身上编码？如果是这样，每次您输入一个框架时，它都会运行每段包含的代码，即使它已经运行过一次。对此的解决方案是使用文档类来跟踪游戏的进度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:29:29.493

如果我理解，您需要将其从舞台上移除。

试试这个而不是star1.x = -500;

stage.removeChild(star1);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:30:22.590

`star1.removeEventListener(MouseEvent.CLICK,gotstar); star1.parent.removeChild(star1);`
在点击处理程序代码 ( `gotstar`) 中应该会有所帮助，
但是发布您的`.fla`文件可能有助于更好地理解

# c# - 如何断言 C# 异步方法在单元测试中引发异常？

> ID：12248674
> 
> 赞同：13
> 
> 时间：2012-09-03T13:17:17.000
> 
> 标签：c#, unit-testing, exception, .net-4.5, async-await

> **可能重复：**
> [如何使用 NUnit 测试异步方法，最终使用另一个框架？](https://stackoverflow.com/questions/12191831/how-do-i-test-an-async-method-with-nunit-eventually-with-another-framework)

我想知道的是如何在 C# 单元测试中断言异步方法引发异常？我能够`Microsoft.VisualStudio.TestTools.UnitTesting`在 Visual Studio 2012 中编写异步单元测试，但还没有弄清楚如何测试异常。我知道 xUnit.net 也支持这种方式的异步测试方法，虽然我还没有尝试过那个框架。

举个例子，下面的代码定义了被测系统：

```
using System;
using System.Threading.Tasks;

public class AsyncClass
{
    public AsyncClass() { }

    public Task<int> GetIntAsync()
    {
        throw new NotImplementedException();
    }
} 
```

此代码片段定义了一个`TestGetIntAsync`针对`AsyncClass.GetIntAsync`. `GetIntAsync`这是我需要输入有关如何完成引发异常的断言的地方：

```
using Microsoft.VisualStudio.TestTools.UnitTesting;
using System.Threading.Tasks;

[TestClass]
public class TestAsyncClass
{
    [TestMethod]
    public async Task TestGetIntAsync()
    {
        var obj = new AsyncClass();
        // How do I assert that an exception is thrown?
        var rslt = await obj.GetIntAsync();
    }
} 
```

如有必要，请随意使用除 Visual Studio 之外的其他一些相关单元测试框架，例如 xUnit.net，否则您会认为这是一个更好的选择。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-03T13:21:44.040

请尝试使用以下标记方法：

```
[ExpectedException(typeof(NotImplementedException))] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-03T13:22:21.980

第一个选项是：

```
try
{
   await obj.GetIntAsync();
   Assert.Fail("No exception was thrown");
}
catch (NotImplementedException e)
{      
   Assert.Equal("Exception Message Text", e.Message);
} 
```

第二个选项是使用预期的异常属性：

```
[ExpectedException(typeof(NotImplementedException))] 
```

第三个选项是使用 Assert.Throws ：

```
Assert.Throws<NotImplementedException>(delegate { obj.GetIntAsync(); }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T13:23:52.697

```
using Microsoft.VisualStudio.TestTools.UnitTesting;
using System.Threading.Tasks;

[TestClass]
public class TestAsyncClass
{
    [TestMethod]
    [ExpectedException(typeof(NotImplementedException))]
    public async Task TestGetIntAsync()
    {
        var obj = new AsyncClass();
        // How do I assert that an exception is thrown?
        var rslt = await obj.GetIntAsync();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T13:26:34.583

尝试使用 TPL：

```
[ExpectedException(typeof(NotImplementedException))]
[TestMethod]
public void TestGetInt()
{
    TaskFactory.FromAsync(client.BeginGetInt, client.EndGetInt, null, null)
               .ContinueWith(result =>
                   {
                       Assert.IsNotNull(result.Exception);
                   }
} 
```

# .net - Directory.GetFiles 的 DataSet 中的唯一约束冲突

> ID：12248675
> 
> 赞同：0
> 
> 时间：2012-09-03T13:17:22.323
> 
> 标签：.net, windows, file-io, c#-3.0

这是我的代码的作用：

1.  使用 directory.getFiles() 获取与特定模式匹配的文件列表（包括文件扩展名）
2.  获取此文件列表并将其添加到类型化数据集中的表中。该表在“文件名”上有一个主键。

最近，该应用程序给出了错误：列“文件名”被限制为唯一。值“90219466”已经存在。

这怎么可能发生？同一个文件夹中不能有两次相同的文件名。

更多信息 - 有一个批处理文件不断将文件从不同的源“B”复制到有问题的文件夹“A”。此外，一旦我处理了数据集，文件就会从“A”中删除。“B”再次将文件复制到“A”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:18:47.493

很抱歉很晚才回复。事实证明，问题出在“输入”上。

注意到源文件夹的文件名带有特殊字符，包括上标中的数字。这就是“两次相同的文件名”情况发生的原因。

虽然文件系统将它们视为两个不同的文件，但获取文件名的代码只是查看文件名而不进行格式化，因此假设它两次看到相同的文件。

# mediaelement.js - 如何继续显示最后一个视频帧

> ID：12248676
> 
> 赞同：2
> 
> 时间：2012-09-03T13:17:28.987
> 
> 标签：mediaelement.js

视频完成后如何继续显示最后一个视频帧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-04T04:07:55.350

将此添加到您的选项中

```
autoRewind: false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:22:24.190

```
var videoPlayer = new MediaElementPlayer('#homepage-player', {
    loop: false,
    features:[],
    enablePluginDebug: false,
    plugins: ['flash','silverlight'],
    pluginPath: '/js/mediaelement/',
    flashName: 'flashmediaelement.swf',
    silverlightName: 'silverlightmediaelement.xap',

    success: function (mediaElement, domObject) { 
        // add event listener
        mediaElement.addEventListener('ended', function(e) {
            mediaElement.pause();
            mediaElement.setCurrentTime(mediaElement.duration);
        }, false);
    },
    error: function () { 
    }

});

videoPlayer.play(); 
```

这有帮助吗？

更新#1：

```
var player = $('#myvideo').mediaelementplayer();

player.media.addEventListener('ended', function(e) {
    player.media.setCurrentTime(player.media.duration);
}, false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T05:54:44.410

一种解决方案是编辑“mediaelement-and-player.min.js”（如果您正在使用它）...对 c.media.setCurrentTime(0) 进行文本搜索并将其注释掉或删除。

# mongodb - 有没有办法在整个集群中启用 setSlaveOkay

> ID：12248677
> 
> 赞同：1
> 
> 时间：2012-09-03T13:17:30.047
> 
> 标签：mongodb, sharding

我有一个分片集群，其中有一个副本集分片，我的应用程序层正在与 mongos 对话，现在如果我的主服务器出现故障，我的 php 应用程序会抛出一个错误。
我知道这是因为我没有`setSlaveOkay`通过执行以下操作从驱动程序启用：

```
MongoCursor::$slaveOkay = true; 
```

问题是，无论我在哪里与 db 交谈，我都必须添加此语句。

有没有办法可以在系统级别启用它？

我尝试`rs.slaveok()`在我的主要和次要中都这样做，但我的应用程序层仍然抛出错误。

`db.getMongo().setSlaveOk()`我也在mongos 控制台中尝试过

错误说明如下：

```
PHP Fatal error:  Uncaught exception 'MongoCursorException' with message 'dbclient error communicating with server: testserver:10001' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T16:50:53.080

您可以在 PHP 中在多个级别设置 slaveOK：连接、数据库、集合或游标。

可在此处找到各种详细信息：

[http://php.net/manual/en/mongo.queries.php](http://php.net/manual/en/mongo.queries.php)

您正在为每个光标设置它，这就是您必须经常调用它的原因。相反，您可以在数据库或集合级别设置它。就幕后发生的事情而言——slaveOK 实际上是为每个连接设置的——当你为数据库、集合、游标等设置它时，PHP 只是为你管理它。

将它设置在 mongos 或 shell 中的任何其他位置只是为该连接设置它。注销后，不再设置。

# c# - 带有 COM 互操作的 WPF 视频渲染应用程序中的 OutOfMemory 异常

> ID：12248678
> 
> 赞同：2
> 
> 时间：2012-09-03T13:17:35.300
> 
> 标签：c#, wpf, com-interop, sta

我们有一个使用 WPF/C#.Net 4.0 开发的富客户端应用程序，它与内部 COM DLL 互操作。通过这个包含视频数据的 COM 接口引发常规事件。

作为应用程序的一部分，我们通过 Windows Media Foundation 渲染视频，并创建了互操作以使用 Window Media Foundation。我们有多个 WMF 管道同时渲染不同的视频。

该应用程序运行 6-8 小时渲染视频。在此期间，私有字节始终保持稳定（例如大约 500-600MB）。

在某些时候应用程序似乎挂起，此时私有字节非常迅速地增加，直到进程消耗大约 1.4GB 的内存并因 OutOfMemoryException 而崩溃。

我们已经在 5 个不同的工作站上重现了这一点，它们具有不同的图形卡（NVIDIA 和 ATI 卡）以及 Windows 7 32 和 64 位的混合版本。

我们分析了 3 个转储文件，发现终结器线程正在等待对 ole32.GetToSTA() 方法的调用。我们无法确定导致终结器线程阻塞的原因以及如何解决此问题。我粘贴了我们一直在分析的三个转储的摘录：

转储 1)

线程 2：ae0 正在等待 STA 线程 efc

线程 28:efc 正在调用 WaitForSingleObject。它正在等待的句柄实际上是一个线程句柄 5ab4 是线程 id 14a4

线程 130:14a4 具有以下堆栈：

```
37f4fdf4 753776a6 ntdll!NtRemoveIoCompletion+0x15
37f4fe20 63301743 KERNELBASE!GetQueuedCompletionStatus+0x29
37f4fe74 6330d0db WMNetMgr!CNSIoCompletionPortNT::WaitAndServeCompletionsLoop+0x5e
37f4fe94 633199bf WMNetMgr!CNSIoCompletionPortNT::WaitAndServeCompletions+0x4c
37f4fecc 63312dbd WMNetMgr!CWorkThreadManager::CWorkerThread::ThreadMain+0xa2
37f4fed8 769b3677 WMNetMgr!CWMThread::ThreadFunc+0x3b
37f4fee4 77679f42 kernel32!BaseThreadInitThunk+0xe
37f4ff24 77679f15 ntdll!__RtlUserThreadStart+0x70
37f4ff3c 00000000 ntdll!_RtlUserThreadStart+0x1b 
```

转储2)

STA线程：

```
1127f474 75f80a91 ntdll!ZwWaitForSingleObject+0x15
1127f4e0 77411184 KERNELBASE!WaitForSingleObjectEx+0x98
1127f4f8 77411138 kernel32!WaitForSingleObjectExImplementation+0x75
1127f50c 63ae5f29 kernel32!WaitForSingleObject+0x12
1127f530 63a8eb2e WMNetMgr!CWMThread::Wait+0x78
1127f54c 63a8f128 WMNetMgr!CWorkThreadManager::CThreadPool::Shutdown+0x70
1127f568 63a76e10 WMNetMgr!CWorkThreadManager::Shutdown+0x34
1127f59c 63a76f2d WMNetMgr!CNSClientNetManagerHelper::Shutdown+0xdd
1127f5a4 63cd228e WMNetMgr!CNSClientNetManager::Shutdown+0x66
WARNING: Stack unwind information not available. Following frames may be wrong.
1127f5bc 63cd23a6 WMVCORE!WMCreateProfileManager+0xeef6
1127f5dc 63c573ca WMVCORE!WMCreateProfileManager+0xf00e
1127f5e8 63c62f18 WMVCORE!WMIsAvailableOffline+0x2ba3b
1127f618 63c19da6 WMVCORE!WMIsAvailableOffline+0x37589
1127f630 63c1aca2 WMVCORE!WMIsContentProtected+0x56e4
1127f63c 63c14bd7 WMVCORE!WMIsContentProtected+0x65e0
1127f650 113de6e8 WMVCORE!WMIsContentProtected+0x515
1127f660 113de513 wmp!CWMDRMReaderStub::CExternalStub::ShutdownInternalRefs+0x1d0
1127f674 113c1988 wmp!CWMDRMReaderStub::ExternalRelease+0x4f
1127f67c 1160a5b9 wmp!CWMDRMReaderStub::CExternalStub::Release+0x13
1127f6a4 1161745f wmp!CWMGraph::CleanupUpStream_selfprotected+0xbe 
```

终结器线程正在尝试切换到 STA：

```
0126eccc 75f80a91 ntdll!ZwWaitForSingleObject+0x15
0126ed38 77411184 KERNELBASE!WaitForSingleObjectEx+0x98
0126ed50 77411138 kernel32!WaitForSingleObjectExImplementation+0x75
0126ed64 75d78907 kernel32!WaitForSingleObject+0x12
0126ed88 75e9a819 ole32!GetToSTA+0xad 
```

转储3)

终结器线程在 GetToSTA 调用中，因此它正在等待释放 COM 对象

线程 29 是 STA 中的 COM 对象，它正在等待线程 53 (1bf4) 拥有的临界区

线程 53 正在做：

```
1cbcf990 76310a91 ntdll!ZwWaitForSingleObject+0x15
1cbcf9fc 74cb1184 KERNELBASE!WaitForSingleObjectEx+0x98
1cbcfa14 74cb1138 kernel32!WaitForSingleObjectExImplementation+0x75
1cbcfa28 65dfb6bb kernel32!WaitForSingleObject+0x12
WARNING: Stack unwind information not available. Following frames may be wrong.
1cbcfa48 74cb3677 wmp!Ordinal3000+0x53280
1cbcfa54 77029f42 kernel32!BaseThreadInitThunk+0xe
1cbcfa94 77029f15 ntdll!__RtlUserThreadStart+0x701cbcfaac 00000000 ntdll!_RtlUserThreadStart+0x1b 
```

关于我们如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:53:38.007

好吧，终结器线程死锁了。这肯定会导致最终的OOM。我们看不到终结器线程的完整堆栈跟踪，但您可能会在跟踪中看到 SwitchAptAndDispatchCall() 和 ReleaseRCWListInCorrectCtx()，这表明它正在尝试调用 IUnknown::Release() 来释放 COM 对象. 并且该对象是单元线程的，因此需要线程切换才能安全地进行调用。

我在您发布的堆栈跟踪中没有看到任何体面的候选人，可能是因为您没有得到正确的候选人，或者由于异常，线程已经忙于关闭。一旦看到虚拟内存大小上升，请尝试使用调试器中断来尽早捕获它。

像这样的死锁最常见的原因是违反了 STA 线程的要求。哪个状态它永远不能阻塞并且必须泵送消息循环。在 .NET 程序中通常很容易满足永不阻塞的要求，当您使用*lock*语句或 WaitHandle.WaitXxx() 调用时，CLR 将在必要时泵送消息循环。然而，忘记发送消息循环是很常见的，特别是因为这样做有点痛苦。Application.Run() 是必需的。

# java - 在“getTreeCellRendererComponent”中，“int row”有什么作用？

> ID：12248680
> 
> 赞同：0
> 
> 时间：2012-09-03T13:17:39.933
> 
> 标签：java, swing, jtree

我正在为一个程序制作一个 treeCellRenderer，我正在查看[getTreeCellRendererComponent](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/tree/TreeCellRenderer.html)的文档。即使看示例，[DefaultTreeCellRenderer](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/tree/DefaultTreeCellRenderer.html)也不清楚：做**什么`int row`？**

甚至我在网上找到的一些[示例也没有使用它。](http://naveedmurtuza.blogspot.co.uk/2010/10/display-xml-in-jtree-with-dnd-support.html)有人用吗？我应该如何在我的代码中实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:19:40.377

它包含调用此渲染器的行号。因此，您可以根据行号渲染组件。您可能希望以这种方式实现交替行颜色。

尝试在该方法中设置断点并查看值的`row`行为方式。

# mysql - MYSQL 更改多列

> ID：12248682
> 
> 赞同：4
> 
> 时间：2012-09-03T13:17:41.467
> 
> 标签：mysql, sql-update

我得到了这张桌子：

```
APPLICATION     TEST    DESCRIPTION     FICHIERCONF     FICHIERXML  FICHIERPROXY    PORTAIL     PERIODEMAINTENANCE  NOMDNS  TPSWARN     TPSCRIT     TYPEMAJ     TYPERAPPORT     CONTREMESURE    TPSCONTREMESURE     AUTH_URL    APP_URL_ENC
cerbere     Application-Ping    test    cete-config-cerbere     cerbere.xml     config-no-proxy.xml     0       cerbere.application.i2  0   0   1   Nagios  1   30  NULL    NULL
cerbere     Application-Ping2   test    cete-config-cerbere     cerbere.xml     config-no-proxy.xml     0       cerbere.application.i2  0   0   1   Nagios  1   30  NULL    NULL 
```

对于 1 单行，每次我在所有列中通过另一个文本看到它时，我都想更改 'cerbere'。

例如，我说：将第一行中的“cerbere”更改为“lidia”。我希望我的应用程序字段由“lidia”更改，fichierconf 字段由“cete-config-lidia”更改，fichierxml 由lidia.xml 更改，nomdns 由“lidia.application.i2”更改。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T13:23:58.017

您需要使用更新表语法。

```
update 
TABLE_NAME 
set 
FIELD_NAME = replace(FIELD_NAME, 'find this string', 'replace found string with this string')
, ANOTHER_FIELD_NAME = REPLACE(ANOTHER_FIELD_NAME, 'foo', 'bar')
, AND_ANOTHER_ANOTHER_FIELD_NAME = REPLACE(...)
... /*as much columns as you like*/
; 
```

您可以对每一列都执行此操作，尽管可能还有更好的解决方案，这种快速而肮脏的 hack 应该可以帮助您入门。

# types - Autofac：解析具有类型和名称的实例？

> ID：12248688
> 
> 赞同：0
> 
> 时间：2012-09-03T13:18:12.553
> 
> 标签：types, get, instance, autofac

我在 frm_main 中有下一个代码

```
 ContainerBuilder builder = new ContainerBuilder();
        builder.RegisterInstance<FrmMainCommunicator>(new FrmMainCommunicator(this, this.pb_publisherStatus)).Named<ICommunicationProvider>("FrmMainCommunicator");
        builder.Update(SPInjector.Instance.Container); 
```

FrmMainCommunicator 实现 ICommunicationProvider 接口。

然后，在另一个项目中，您需要 FrmMainCommunicator 的实例。

我需要类似的东西：

```
ICommunicationProvider provider = DIInjector.Get<ICommunicationProvider>().Named("FrmMainCommunicator"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T22:02:35.797

如果`DIInjector`是 Autofac 容器，则需要`ResolveNamed`方法：

```
DIInjector.ResolveNamed<ICommunicationProvider>("FrmMainCommunicator") 
```

# wpf - 为什么 KeyDown 事件会从 TextBox 中冒出？

> ID：12248692
> 
> 赞同：3
> 
> 时间：2012-09-03T13:18:25.740
> 
> 标签：wpf, keyboard

如果我在 TextBox 中键入一个字母，并且它的内容会根据我的按键而改变，为什么 KeyDown 事件会继续冒泡？我原以为这会在这个阶段得到“处理”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T14:02:25.483

由于`KeyDown`event 是 a `bubbling event`，这就是为什么它在您的案例 Window 中冒泡到其父级的原因。如果您不希望它冒泡到您的窗口，您需要像这样在您的 textBox 处理程序本身中将其标记为已处理 -

```
private void TextBox_KeyDown(object sender, KeyEventArgs e)
{
  e.Handled = true;
} 
```

然而，如果您尝试在您的文本框中挂钩事件`PreviewKeyDown`，您会看到 - Window 的 PreviewKeyDownEvent 首先被调用，然后是您的文本框。背后的原因是，它是一个`tunelling event`. 有关路由策略，请参阅此链接 -[路由策略](http://msdn.microsoft.com/en-us/library/ms742806.aspx "路由策略")

**编辑** Morevoer，如果你想检查KeyDown事件是否来自textBox，你可以检查`OriginalSource`你的eventArgs -

```
private void Window_KeyDown(object sender, KeyEventArgs e)
{
    // Check to make sure event comes from window and not from textbox.
    if(e.OriginalSource is Window)
    {
    }
} 
```

# javascript - javascript中的浮点比较

> ID：12248694
> 
> 赞同：4
> 
> 时间：2012-09-03T13:18:31.497
> 
> 标签：javascript, floating-point, compare

100 >= 99.2 怎么可能是假的？

```
var ls = parseFloat(("100").replace(",", ".")).toFixed(1);
var val = parseFloat(("99,2").replace(",", ".")).toFixed(1);
alert(ls >= val); /*=> result is false  ...but it should be true */ 
```

ui文化是nl-BE

jsfiddle：http: [//jsfiddle.net/Ed6VY/](http://jsfiddle.net/Ed6VY/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T13:32:11.070

`toFixed`结果是一个字符串。字符串逐个字符进行比较。`"9"`之后`"1"`，所以`"99.2"`大于`"100.0"`。

# python - python 正则表达式条件子字符串提取

> ID：12248696
> 
> 赞同：1
> 
> 时间：2012-09-03T13:18:38.143
> 
> 标签：python, regex, logging, python-2.6

我打开这个问题是因为我原来的问题似乎需要一个新的方向：[我原来的问题](https://stackoverflow.com/questions/12247651/very-specific-substring-retrieval-and-split/12247791#comment16418144_12247791)

我想创建一个正则表达式，可以从以下类型的日志条目中提取静态消息和动态消息：

> /long/file/name/with.dots.and.extension:Jan 01 12:00:00 TYPE 静态消息；动态消息
> 
> /long/file/name/with.dots.and.extension:Jan 01 12:00:00 MODULE.NAME TYPE THREAD.OR.CONNECTION.INFORMATION 静态消息；动态消息

一种日志条目类型具有简单的结构：

`file:date TYPE STATIC;DYNAMIC`

尝试用正则表达式解析时，另一个不是那么简单：

`file:date MODULE.NAME TYPE CONNECTION.OR.THREAD STATIC;DYNAMIC`

其中`MODULE.NAME`and`CONNECTION.OR.THREAD`要么都存在要么不存在。

到目前为止，我适用于第一种日志条目的正则表达式是：

```
(?:.*?):(?:\w{3} \d{1,2} \d{1,2}:\d{1,2}:\d{1,2})(?:\s+?)(?:[\S|\.]*?(?:\s*?))?(?:(?:TYPE1)|(?:TYPE2)|(?:TYPE3))(?:\s+?)(?:\S+?(?:\s+?))?(.+){1}(?:;(.+)){1} 
```

但每当我进入第二种类型的条目时，我也会将 CONNECTION.OR.THREAD 作为我的第一个捕获组的一部分。

我希望有一种方法来使用前瞻或后视功能，以便我可以捕获`STATIC`并`DYNAMIC`忽略该`CONNECTION.OR.THREAD`部分（如果有`MODULE.NAME`？

我希望这个问题很清楚，如果看起来有点暗淡，请参考我的原作。谢谢你。

**编辑：**澄清。日志的每一行都不同，每一行都以文件路径开头，然后`:`是日期，格式如下：`MMM DD HH:MM:SS`然后它变得很棘手，要么是`MODULE.NAME`变化的，其次是变化的，然后是`TYPE`变化`CONNECTION.OR.THREAD`的变化，或只有`TYPE`. 之后有`STATIC MESSAGE`then a `;`then a`DYNAMIC MESSAGE`静态和动态消息都不同，该术语的使用`STATIC`仅仅是因为错误可能是例如“无法连接到服务器；server1.com”所以错误的静态部分是“无法连接到服务器”，动态部分是“server1.com”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:25:51.403

目前我已经制作了这个庞大的正则表达式：

```
(?:(?:.*?):(?:\w{3}(?: \d{1,2}){2}(?::\d{1,2}){2}))(?:\s+?)(?:(?:(?:(?:TYPE1)|(?:(?:TYPE1)|(?:TYPE3))(?:\s+?)(?:(.+){1};(.+){1}))|(?:\S+(?:\.\S+)+)(?:\s+?)(?:(?:TYPE1)|(?:TYPE1)|(?:TYPE3))(?:\s+?)(?:\S+(?:\.\S+)+)(?:\s+?)(?:(.+){1};(.+){1}))) 
```

我将它分成几部分：

文件/日期 + 空格：

```
(?:(?:.*?):(?:\w{3}(?: \d{1,2}){2}(?::\d{1,2}){2}))(?:\s+?) 
```

然后是：

简单：（静态类型；动态）

```
(?:(?:(?:TYPE1)|(?:TYPE1)|(?:TYPE3))(?:\s+?)(?:(.+){1};(.+){1})) 
```

或复杂：（模块。名称类型连接。或。线程静态；动态）

```
(:?(?:\S+(?:\.\S+)+)(?:\s+?)(?:(?:TYPE1)|(?:TYPE1)|(?:TYPE3))(?:\s+?)(?:\S+(?:\.\S+)+)(?:\s+?)(?:(.+){1};(.+){1})) 
```

它成功了。但它很大，我认为它可以改进。所以请如果有人可以改进它，请做。

**编辑：**

但是有一个问题。因为现在有 4 个捕获组。所以我无法提前知道我是否必须查看捕获的 [0:1] 或捕获的 [2:3] 以获得我的结果。任何人都有办法做到这一点，如果我有东西，我就不必每次都检查？或者可能是一种从结果中消除空捕获组的方法，或者可能只从结果列表中获取非空结果？某物？我的大脑被炸了。

**编辑2：**

正如@martijn pieters 建议的那样，我删除了无关的分组，这是我当前的正则表达式：

```
.*?:\w{3}(?: \d{1,2}){2}(?::\d{2}){2}\s+?(?:(?:(?:TYPE1|TYPE2|TYPE3)\s+?(.+){1};(.+){1})|(?:\S+(‌​?:\.\S+)+\s+?(?:TYPE1|TYPE2|TYPE3)\s+?\S+(?:\.\S+)+\s+?(.+){1};(.+){1})) 
```

效果很好。我担心`(?:TYPE1|TYPE2|TYPE3)`被误解，因为`TYPE(1|T)YPE(2|T)YPE3`任何见解都会受到赞赏。

另外，如何最好地解析我的结果 - 看到我将得到一个包含 4 个项目的列表，其中前 2 个或第二个 2 为空，另一个具有我的静态/动态结果。

**编辑3：**

好的，我已经做了一个混合解决方案。我重新制作了我的正则表达式：

```
.*?:\w{3}(?: \d{1,2}){2}(?::\d{2}){2}\s+?(?:(?:(?:TYPE1|TYPE2|TYPE3))|(?:\S+(?:\.\S+)+\s+?(?:TYPE1|TYPE2|TYPE3)\s+?\S+(?:\.\S+)+))\s+(.*) 
```

我现在只有 1 个捕获组，即 STATIC;DYNAMIC 部分。一旦我得到这个，我就会做我以前做的事情（见我[以前的问题](https://stackoverflow.com/questions/12247651/very-specific-substring-retrieval-and-split?lq=1)）

```
for item in captured:
    parts = item.split(";")
    static = parts[0]
    dynamic = ";".join(parts[1:]) 
```

那是我的解决方案。感谢@Martijn Pieters，特别是您的帮助。我希望这可以帮助将来的人。

# excel - 使用常量单元格复制和粘贴公式

> ID：12248697
> 
> 赞同：4
> 
> 时间：2012-09-03T13:18:41.280
> 
> 标签：excel

我需要对工作时间进行 Total_Price 计算：

Excel 工作表看起来是这样的：

```
Job_name(A1);Time_spend(B1);Total_Price(C1); 
```

我在特殊的常数单元中有小时价格 - `F1`。

要获得 Total_Price，我使用公式 =B1*F1。在此之后，我手动复制单元格并粘贴到 C 列中的所有剩余单元格中。根据这个程序C2得到公式=B2*F2，但我需要=B2*F1。

如何使这个过程更加自动化？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T15:14:20.800

使用绝对引用。而不是`=B1*F1`使用：

```
=B1*$F$1 
```

`$`在单元格引用前添加符号可防止在拖动公式时更改引用。

# facebook - Facebook 应用程序：有什么方法可以在没有 SSL 的情况下运行应用程序？

> ID：12248698
> 
> 赞同：6
> 
> 时间：2012-09-03T13:18:41.907
> 
> 标签：facebook, ssl, facebook-apps

我正在为 Facebook 开发我的第一个应用程序，并且（可能）面临 SSL 问题。如果我正在测试应用程序，那么它运行良好。但后来我想通过我的朋友测试应用程序 - 所以我给他分配了“测试员”角色，他接受了，我给他发了应用程序的链接。

如果他打开应用程序，则会收到错误**The website is not available - Error 501 (net::ERR_INSECURE_RESPONSE): Unknown error**

我开始用谷歌搜索它，看起来原因是我的主机上缺少 SSL 证书，应用程序存储在哪里。

**但是**- 没有 SSL，应用程序怎么可能运行良好，而我的朋友却不行？如果 Facebook 应用程序需要 SSL，为什么我没有收到相同的错误？（我将**Secure Canvas URL:**设置为**[https://example.com/fb-app-directory/](https://example.com/fb-app-directory/)**，但是我在此域中没有并且没有托管任何 SSL 证书）。

在 SSL 之前我从未使用过。我在 Namecheap 上购买了域名并在 Hostgator 上托管。所以现在，我应该从Namecheap的报价 ( [http://www.namecheap.com/ssl-certificates.aspx](http://www.namecheap.com/ssl-certificates.aspx) )购买 SSL 证书，对吗？

会不会是最便宜的一款适合 Facebook 应用的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:51:29.597

看，这个 SSL 问题只能通过购买有效的 SSL 证书或寻找可以托管您的应用程序并且经过 SSL 认证的服务器来解决，例如：

*   **phpfog.com** - 为您提供一些有限的空间和数据库服务。
*   **heroku.com** - 不提供任何存储空间来保存动态生成的数据。要获得这项服务，您必须购买 Amazon buckets 服务，这又是一件昂贵的事情。

如果您不想投入任何资金，我建议您使用 phpfog - 它很简单，而且它的文档非常好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T13:53:55.823

您应该购买 SSL 证书，以便每个人都能够访问您的应用程序。您的朋友可能已经设置了他的设置，以便他可以安全地浏览 Facebook，在这种情况下，他点击的是[https://example.com/fb-app-directory/](https://example.com/fb-app-directory/)，而不是您的实际 URL。

最便宜的不是最好的，但只要它有效，它就应该工作。不过，我建议您使用 Heroku，因为这样您就可以免费获得所需的一切：)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-08T04:28:17.820

在 heroku.com 中使用[代理](https://github.com/manuks/proxy)并将您的页面作为[https://yourapplication.herokuapp.com/进入安全域](https://yourapplication.herokuapp.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T15:02:56.277

“从 2011 年 10 月 1 日开始，Facebook 将要求所有在 Facebook 之外托管的页面和应用程序都需要有效的 SSL 证书。”

[http://www.wpcode.net/fb-ssl.html/](http://www.wpcode.net/fb-ssl.html/)

也许您正在访问您的应用程序，`http://apps.facebook.com/...`而您的朋友正在访问`https://apps.facebook.com/...`。

另一种可能性是您的朋友已在“帐户安全”下选中“尽可能在安全连接 (https) 上浏览 Facebook”。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2015-01-21T22:25:38.407

尝试[ngrok](https://ngrok.com/)。它只用一个命令就暴露了一个本地 Web 服务器：

```
ngrok 80 
```

在此之后，您可以像这样访问您的本地主机：xxxxxxxx.ngrok.com

# gridview - ExtJS 4 网格焦点加导航

> ID：12248702
> 
> 赞同：2
> 
> 时间：2012-09-03T13:18:56.390
> 
> 标签：gridview, extjs, grid, focus, extjs4

我需要开发一个包含在可浮动窗口中的网格：当显示窗口时，我需要关注某一行，然后我必须使用导航键向上或向下移动。现在，我了解如何聚焦指定的行（使用 grid.getView().focusRow(index)），但是，这样做后，我无法在网格中上下移动，就好像网格失去了焦点一样.

这是代码：

```
var storage = Ext.create ('Ext.data.Store', {
    fields: ['id', 'name'] ,
    data: [
        {id:0,name:'foo'} ,
        {id:1,name:'boo'} ,
        {id:2,name:'koo'} ,
        {id:3,name:'zoo'} ,
        {id:4,name:'moo'} ,
        {id:5,name:'too'} ,
        {id:6,name:'goo'} ,
        {id:7,name:'poo'} ,
        {id:8,name:'loo'} ,
        {id:9,name:'roo'} ,
        {id:10,name:'hoo'}
    ]
});

Ext.create ('Ext.grid.Panel', {
    title: 'My Grid' ,
    width: 300 ,
    height: 200 ,
    store: storage ,
    renderTo: Ext.getBody () ,

    columns: [{
        header: 'ID' ,
        dataIndex: 'id'
    } , {
        header: 'Name' ,
        dataIndex: 'name' ,
        flex: 1
    }] ,

    listeners: {
        afterlayout: function (grid) {
            var view = grid.getView ();

            view.focusRow (storage.getCount () - 1);
            view.highlightItem (view.getNode (storage.getCount () - 1));
        }
    }
}); 
```

那么，在那之后，**我如何“聚焦”网格以使其可导航？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T20:35:01.040

您需要选择这样的行才能使其可通过键盘导航：

```
grid.getView().focus();
grid.getSelectionModel().select(0); // or whatever the row index is 
```

并在`viewready`事件侦听器中执行此操作。这就是[`viewready`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel-event-viewready)活动的目的。

显然，网格需要至少一个记录才能正常工作，您应该首先检查该条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-30T08:34:54.313

您可以使用`focusRow()`功能解决此问题

```
grid.getView().focusRow(0); 
```

# c++ - 创建类的实例

> ID：12248703
> 
> 赞同：121
> 
> 时间：2012-09-03T13:18:57.070
> 
> 标签：c++, class, constructor

第 1 、 2 、 3 、 4 行有什么区别？

我什么时候使用每个？

为什么第 3 行打印`constructor Foo`并且第 7 行返回错误而第 8 行没有？

```
#include <iostream>     
using namespace std;

class Foo
 {
   public:
   Foo ( )
   {
      cout << "constructor Foo\n";
   }               
};

class Bar
 {
   public:
   Bar ( Foo )
   {
      cout << "constructor Bar\n";
   }
};

int main()
{
   /* 1 */ Foo* foo1 = new Foo ();
   /* 2 */ Foo* foo2 = new Foo;
   /* 3 */ Foo foo3;
   /* 4 */ Foo foo4 = Foo::Foo();

   /* 5 */ Bar* bar1 = new Bar ( *new Foo() );
   /* 6 */ Bar* bar2 = new Bar ( *new Foo );
   /* 7 */ Bar* bar3 = new Bar ( Foo foo5 );
   /* 8 */ Bar* bar3 = new Bar ( Foo::Foo() );

   return 1;
} 
```

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-09-03T13:24:34.420

```
 /* 1 */ Foo* foo1 = new Foo (); 
```

`Foo`在动态内存中创建一个类型的对象。`foo1`指向它。通常，您不会在 C++ 中使用原始指针，而是使用智能指针。如果`Foo`是 POD 类型，这将执行值初始化（此处不适用）。

```
 /* 2 */ Foo* foo2 = new Foo; 
```

与之前相同，因为`Foo`不是 POD 类型。

```
 /* 3 */ Foo foo3; 
```

创建一个在自动存储中调用的`Foo`对象。`foo3`

```
 /* 4 */ Foo foo4 = Foo::Foo(); 
```

使用复制初始化来创建一个在自动存储中`Foo`调用的对象。`foo4`

```
 /* 5 */ Bar* bar1 = new Bar ( *new Foo() ); 
```

使用`Bar`的转换构造函数`Bar`在动态存储中创建类型的对象。`bar1`是指向它的指针。

```
 /* 6 */ Bar* bar2 = new Bar ( *new Foo ); 
```

和之前一样。

```
 /* 7 */ Bar* bar3 = new Bar ( Foo foo5 ); 
```

这只是无效的语法。你不能在那里声明一个变量。

```
 /* 8 */ Bar* bar3 = new Bar ( Foo::Foo() ); 
```

如果`bar3`未在 7 中声明，将按照相同的原则对 5 和 6 工作和工作。

**5 & 6**包含内存泄漏。

类似的语法`new Bar ( Foo::Foo() );`并不常见。通常是`new Bar ( (Foo()) );`——~~额外的括号是最令人头疼的解析。~~（更正）

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-03T14:19:49.847

1.  从空闲存储中分配一些动态内存，并使用其默认构造函数在该内存中创建一个对象。你永远不会删除它，所以内存泄漏了。
2.  与 1 完全相同；在用户定义类型的情况下，括号是可选的。
3.  分配一些自动内存，并使用其默认构造函数在该内存中创建一个对象。当对象超出范围时，内存会自动释放。
4.  与 3 类似。名义上，命名对象`foo4`是通过默认构造、复制和销毁临时对象来初始化的；通常，这会被省略，得到与 3 相同的结果。
5.  分配一个动态对象，然后通过复制第一个对象来初始化第二个对象。两个对象都泄漏了；并且没有办法删除第一个，因为您没有保留指向它的指针。
6.  与5完全一样。
7.  不编译。`Foo foo5`是声明，不是表达式；函数（和构造函数）参数必须是表达式。
8.  创建一个临时对象，并通过复制来初始化一个动态对象。只有动态对象被泄露；临时在完整表达式结束时自动销毁。请注意，您可以使用 just`Foo()`而不是等效`Foo::Foo()`（或确实`Foo::Foo::Foo::Foo::Foo()`）创建临时

> 我什么时候使用每个？

1.  不要，除非您喜欢在代码上进行不必要的装饰。
2.  当您想要创建一个超出当前范围的对象时。用完记得删除它，学习如何使用*智能指针*更方便地控制生命周期。
3.  当您想要一个仅存在于当前范围内的对象时。
4.  不要，除非你觉得 3 看起来很无聊，什么添加一些不必要的装饰。
5.  不要，因为它会泄漏内存而没有恢复的机会。
6.  不要，因为它会泄漏内存而没有恢复的机会。
7.  不要，因为它不会编译
8.  当您想`Bar`从临时`Foo`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-03T13:25:42.313

第 1、2、3、4 行将调用默认构造函数。它们本质上是不同的，因为 1,2 是动态创建的对象，而 3,4 是静态创建的对象。

在第 7 行，您在参数调用中创建了一个对象。所以这是一个错误。

第 5 行和第 6 行是内存泄漏的邀请。

# php - PHP 上传不起作用，但 Wordpress 上传可以

> ID：12248712
> 
> 赞同：1
> 
> 时间：2012-09-03T13:19:41.543
> 
> 标签：php, upload

我正在创建自己的上传脚本以将文件上传到我的网络服务器（如小型 Flash 视频）。但是，它似乎不起作用。但是，我认为它不是 PHP，因为通过 Wordpress 将文件上传到我的服务器*确实*有效。

这是上传表格：

```
 <form enctype="multipart/form-data" action="upload.php" method="POST">
   Video: <input name="vid" type="file" />
   <br/>
   Name: <input name="title" type="text" />
   <br/>
   Description:
   <br/>
   <br/>
   <textarea name="desc">Your description here</textarea>
   <br/>
   <br/>
   <input type="submit" value="Upload" />
   </form> 
```

这是上传PHP页面：

```
<?php

 $target = basename( $_FILES['uploaded']['name']) ; 
 $ok=1; 

 //check that $ok was not set to 0 by an error 
 if ($ok==0) 
 { 
 Echo "Sorry your file was not uploaded"; 
 } 

 //If everything is ok we try to upload it 
 else 
 { 
 if(move_uploaded_file($_FILES['uploaded']['tmp_name'], $target)) 
 { 
 echo "The file ". basename( $_FILES['uploadedfile']['name']). " has been uploaded"; 
 } 
 else 
 { 
 echo "Sorry, there was a problem uploading your file."; 
 } 
 } 
?> 
```

我已将 php.ini 中的最大上传大小设置为 100MB，但是，上传仍然失败。我的 php.ini 文件可以[在](http://pastebin.com/nfz1ag7a)pastebin 中查看。另请注意，我已从上传脚本中删除所有验证以查看它是否有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:26:10.097

从代码的外观来看，您正在将文件上传到与运行脚本相同的目录中。您确定您对该目录中的网络服务器具有写权限吗？

尝试在临时目录中上传文件：

```
move_uploaded_file($_FILES['uploaded']['tmp_name'], sys_get_temp_dir().DIRECTORY_SEPARATOR.$target); 
```

看看它是否有效

**更新**

您正在调用您的输入文件“vid”，但您正在尝试访问“上传”的输入。

将所有出现的 $_FILES 替换为 $_FILES['vid'][]...

并在您的机器上启用错误报告

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:31:40.927

您如何从中获得视频的价值：

```
$target = basename( $_FILES['uploaded']['name']) ; 
```

虽然第一个块包含提供给 html 的文件的名称。

在你的情况下是： `Video: <input name="vid" type="file" />` **Vid**

所以在你的代码上使用它：

```
<?php

 $target = basename( $_FILES['vid']['name']) ; 
```

# python - 如何使用pythonCOM将表格从excel复制到word

> ID：12248714
> 
> 赞同：5
> 
> 时间：2012-09-03T13:19:46.770
> 
> 标签：python, excel, ms-word, win32com, pythoncom

是否可以从excel文件中获取表格并将其粘贴到保存其excel样式的word文档中？我没有找到关于 win32com 及其所有方法的足够文档。

我找到了一个方法**PasteExcelTable**，我想我应该在调用这个方法之前从 excel 中选择表。我执行以下操作：

```
from win32com import client
excel = client.Dispatch("Excel.Application")
word = client.Dispatch("Word.Application")
doc = word.Documents.Open("C:/word_file.docx")
book = excel.Workbooks.Open("C:/excel_file.xlsx")
sheet = book.Worksheets(1)
sheet.Range("A1:D20").Select      # Selected the table I need to copy
doc.Content.PasteExcelTable(False, False, False) 
```

然后它失败了。我什至不知道我是否走对了方向。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T05:27:56.023

知道了！无需选择任何内容，直接复制即可

```
sheet.Range("A1:D20").Copy()
doc.Content.PasteExcelTable(False,False,False) 
```

由于没有文档，我不得不随机尝试所有内容。

# java - Spring-AOP Before Advice 的条件行为

> ID：12248716
> 
> 赞同：1
> 
> 时间：2012-09-03T13:20:01.040
> 
> 标签：java, spring, security, aspectj, spring-aop

我对 AOP 有点陌生，对我面临的问题感到困惑。我有`@AuthorizeUser`在表示层上作用于方法的注释。我需要检查用户是否有权执行该方法。这是代码`AuthorizeUserAspect`：

```
@Aspect
public class AuthorizeUserAspect {
    @AuthoWired
    private UserService service;

    @Before(value = "@annotation(com.company.annotation.AuthorizeUser)")
    public void isAuthorized(JoinPoint jp) {
        // Check if the user has permission or not
        // executing some Service Layer services and 
        // Persistence Layer, corresponding to that
        service.checkUser();

        // Is there a way I can make this method Conditional. something like:
        if ( /* User has permission */ ) {
            // do nothing, so the method will be executed after this
        }
        else {
            // 1) Prevent the Method to be executed [and/or]
            // 2) Pass some Parameters to the method for checking [and/or]
            // 3) Execute another method on that class [e.g showAccessDenied()]
        }
    }
} 
```

这有点类似于这个问题[Spring MVC + Before Advice check security](https://stackoverflow.com/questions/4907072/spring-mvc-before-advice-check-security)。但它建议返回一些字符串（即“不好”）。我的应用程序中有两种类型的 UI（Struts 和 Jersey），所以会有两种返回类型（`String`和`Response`分别）。所以我想这可能不是最好的方法。

如果你能告诉我一个解决方法，我会很高兴。
这甚至是一个好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:13:24.230

首先，你看过[Spring Security](http://static.springsource.org/spring-security/site/)吗？它是完全声明性的，不需要您自己编写方面。如果用户未通过身份验证或没有所需的权限，它会通过引发异常来保护方法。

关于两种不同返回类型的问题：

第一个选项：创建两种不同类型的建议，特定于方法的返回类型：

```
@Before("@annotation(com.company.annotation.AuthorizeUser) && execution(String *.*(..))")
public void isAuthorizedString(JoinPoint jp) {
    ...
}

@Before("@annotation(com.company.annotation.AuthorizeUser) && execution(Response *.*(..))")
public void isAuthorizedResponse(JoinPoint jp) {
    ...
} 
```

第二种选择：通过反射找出建议方法的返回类型，并基于此返回不同的值：

```
@Before("@annotation(com.company.annotation.AuthorizeUser")
public void isAuthorized(JoinPoint jp) {
    Class<?> returnType = ((MethodSignature)jp.getStaticPart()
            .getSignature()).getReturnType();
    if(returnType == String.class)
        ...
    else
        ...
} 
```

# c++ - 获取表达式类型的宏

> ID：12248717
> 
> 赞同：9
> 
> 时间：2012-09-03T13:20:01.340
> 
> 标签：c++, templates, types, macros, typetraits

## 问题

我正在尝试编写一个 C++ 宏，它将作为输入*`type`*或*`type name`*作为输入，并*`type`*作为输出。

例如：
`REMOVE_NAME(int)`应该是`int`
`REMOVE_NAME(int aNumber)`也应该是`int`

我设法编写了这样一个宏（如下）并且它可以工作，但我想知道我是否缺少一种更简单的方法来实现这一点。

```
#include <boost/type_traits.hpp>

template <typename T>
struct RemoveNameVoidHelper
{
    typedef typename T::arg1_type type;
};

template <>
struct RemoveNameVoidHelper<boost::function_traits<void()>>
{
    typedef void type;
};

#define REMOVE_NAME(expr) RemoveNameVoidHelper<boost::function_traits<void(expr)>>::type 
```

有任何想法吗？

## 动机

我正在使用这个宏来帮助生成代码。我有另一个宏，用于在类定义中声明某些方法：

```
#define SLOT(name, type)                            \
    void Slot##name(REMOVE_NAME(type) argument)     \
    {                                               \
        /* Something that uses the argument. */     \
    }                                               \
    void name(type) 
```

我希望`SLOT`宏的用户能够舒适地选择是否要在类内部或外部实现他的插槽，就像使用普通方法一样。这意味着`SLOT`的类型参数可以是类型，也可以是具有名称的类型。例如：

```
class SomeClass
{
    SLOT(ImplementedElsewhere, int);
    SLOT(ImplementedHere, int aNumber)
    {
        /* Something that uses aNumber. */
    }
}; 
```

如果没有`REMOVE_NAME`宏，我的自动生成的`Slot...`方法将无法为其参数指定自己的名称，因此将无法引用它。

当然，这不是该宏的唯一可能用途。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:21:41.923

我认为你是对的；据我所知，在*decl-specifier-seq*或*type-specifier-seq*后面跟着一个可选的*声明*符的唯一其他生产是一个`catch`语句，我认为这对类型提取没有多大用处。生产*参数声明*也用于*template-parameter-list*，但这也没什么用。

我可能会像这样定义你的宏，消除对 Boost 的依赖：

```
template<typename T> struct remove_name_helper {};
template<typename T> struct remove_name_helper<void(T)> { typedef T type; };
template<> struct remove_name_helper<void()> { typedef void type; };

#define REMOVE_NAME(expr) typename remove_name_helper<void(expr)>>::type 
```

# php - 分页php页面

> ID：12248718
> 
> 赞同：1
> 
> 时间：2012-09-03T13:20:04.397
> 
> 标签：php, pagination

我需要帮助让这个分页脚本稍微复杂一点。我需要将该区域从第 61 行更改为第 80 行，以允许在这些相同行之间的注释中描述的复杂性。

请看看你是否能想出一个简单的解决方案并输出到 $pages_content ...

我已经提供了2个贴...

index.php： [http ://codepad.org/tWNvATES](http://codepad.org/tWNvATES)

和

数据库（MYSQL）：[http ://codepad.org/cP8hGzWN](http://codepad.org/cP8hGzWN)

！！！- 请，我只需要从本质上替换第 61 行和第 80 行之间的内容即可输出类似

“... 4 5 [6] 7 8 ...”

作为 $pages_content...

[编辑]

这是代码片段：

```
$pages_content = '';
for($i = 1;$i <= $pages;$i++) {
    if($pages >= 1) {
        if($i == $page) {
            $pages_content .= "<b>{$i}</b>";
        }
        else {
            $pages_content .= "<a href='?page={$i}'>{$i}</a>";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:50:40.177

在这里为您提供在 php 中应用分页的最佳代码，请参阅

```
<?php
/*
    Place code to connect to your DB here.
*/
include('config.php');  // include your code to connect to DB.

$tbl_name="";       //your table name
// How many adjacent pages should be shown on each side?
$adjacents = 3;

/* 
   First get total number of rows in data table. 
   If you have a WHERE clause in your query, make sure you mirror it here.
*/
$query = "SELECT COUNT(*) as num FROM $tbl_name";
$total_pages = mysql_fetch_array(mysql_query($query));
$total_pages = $total_pages[num];

/* Setup vars for query. */
$targetpage = "filename.php";   //your file name  (the name of this file)
$limit = 2;                                 //how many items to show per page
$page = $_GET['page'];
if($page) 
    $start = ($page - 1) * $limit;          //first item to display on this page
else
    $start = 0;                             //if no page var is given, set start to 0

/* Get data. */
$sql = "SELECT column_name FROM $tbl_name LIMIT $start, $limit";
$result = mysql_query($sql);

/* Setup page vars for display. */
if ($page == 0) $page = 1;                  //if no page var is given, default to 1.
$prev = $page - 1;                          //previous page is page - 1
$next = $page + 1;                          //next page is page + 1
$lastpage = ceil($total_pages/$limit);      //lastpage is = total pages / items per page, rounded up.
$lpm1 = $lastpage - 1;                      //last page minus 1

/* 
    Now we apply our rules and draw the pagination object. 
    We're actually saving the code to a variable in case we want to draw it more than once.
*/
$pagination = "";
if($lastpage > 1)
{   
    $pagination .= "<div class=\"pagination\">";
    //previous button
    if ($page > 1) 
        $pagination.= "<a href=\"$targetpage?page=$prev\">� previous</a>";
    else
        $pagination.= "<span class=\"disabled\">� previous</span>";   

    //pages 
    if ($lastpage < 7 + ($adjacents * 2))   //not enough pages to bother breaking it up
    {   
        for ($counter = 1; $counter <= $lastpage; $counter++)
        {
            if ($counter == $page)
                $pagination.= "<span class=\"current\">$counter</span>";
            else
                $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
        }
    }
    elseif($lastpage > 5 + ($adjacents * 2))    //enough pages to hide some
    {
        //close to beginning; only hide later pages
        if($page < 1 + ($adjacents * 2))        
        {
            for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }
            $pagination.= "...";
            $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
            $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
        }
        //in middle; hide some front and some back
        elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
        {
            $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
            $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
            $pagination.= "...";
            for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }
            $pagination.= "...";
            $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
            $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
        }
        //close to end; only hide early pages
        else
        {
            $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
            $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
            $pagination.= "...";
            for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }
        }
    }

    //next button
    if ($page < $counter - 1) 
        $pagination.= "<a href=\"$targetpage?page=$next\">next �&lt;/a>";
    else
        $pagination.= "<span class=\"disabled\">next �&lt;/span>";
    $pagination.= "</div>\n";       
}
?>

<?php
    while($row = mysql_fetch_array($result))
    {

    // Your while loop here

    }
?>

<?=$pagination?> 
```

用于样式的 css 在这里：

```
div.pagination {
padding: 3px;
margin: 3px;
}

div.pagination a {
padding: 2px 5px 2px 5px;
margin: 2px;
border: 1px solid #AAAADD;

text-decoration: none; /* no underline */
color: #000099;
}
div.pagination a:hover, div.pagination a:active {
border: 1px solid #000099;

color: #000;
}
div.pagination span.current {
padding: 2px 5px 2px 5px;
margin: 2px;
    border: 1px solid #000099;

    font-weight: bold;
    background-color: #000099;
    color: #FFF;
}
div.pagination span.disabled {
    padding: 2px 5px 2px 5px;
    margin: 2px;
    border: 1px solid #EEE;

    color: #DDD;
} 
```

希望它有所帮助，快乐编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:39:03.203

像这样的东西应该工作

```
$pages_content = '';

$minPage = max(1, $page - 2);
$maxPage = min($pages, $page + 2);
for($i = $minPage; $i <= $maxPage;$i++) {
    if($pages >= 1) {
        if($i == $page) {
            $pages_content .= "<b>{$i}</b>";
        }
        else {
            $pages_content .= "<a href='?page={$i}'>{$i}</a>";
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T15:31:15.823

如果页数可能很大，请考虑使用“对数”分页：

[如何为很多很多页面进行页面导航？对数页面导航](https://stackoverflow.com/q/7835752/999120)

（我的答案中包含示例 PHP 代码）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-17T10:59:52.400

PHP 中的基本分页，作者 Amol Gholap

```
public function getPagination($pid,$totalCount=500,$countPerPage=50,$pageNumberingStart=1,$url=BASE_PATH,$maxDisplayPageNumbers=10){
        $response= "<a href='".($pid > 1 ? "$url?pid=".($pid-1) : "" )."' style='text-decoration:none'><-</a>";
        $maxNum = $pid+($maxDisplayPageNumbers/2);
        $minNum = $pid-($maxDisplayPageNumbers/2)+1;//-$pid);
        $response.= $minNum > 1 ? "<a style='text-decoration:none'>---</a>":"";
        for($t=0;$t<$totalCount;$t+=$countPerPage){
            if(($maxNum >= $pageNumberingStart && $minNum <= $pageNumberingStart)
                ){
                if($pid == $pageNumberingStart)
                    $response.= " <a href='$url?pid=$pageNumberingStart'><strong>".$pageNumberingStart."</strong></a> ";
                else
                    $response.= " <a href='$url?pid=$pageNumberingStart' style='text-decoration:none'>".$pageNumberingStart."</a> ";
            }
            $pageNumberingStart++;
        }
        $response.= $maxNum < $pageNumberingStart-1 ? "<a style='text-decoration:none'>---</a>":"";
        $response.= "<a href='".($pid < $pageNumberingStart ? "" : "$url?pid=".($pid+1) )."' style='text-decoration:none'>-></a>";
        return $response;
    }

echo getPagination($pageNumber=5,$totalCount=500,$countPerPage=50,$pageNumberingStart=1,$url=BASE_PATH,$maxDisplayPageNumbers=10); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-19T18:56:01.890

获取当前页码

```
if (isset($_GET['pageno'])) {
    $pageno = $_GET['pageno'];
} else {
    $pageno = 1;
} 
```

分页公式

```
$no_of_records_per_page = 10;
$offset = ($pageno-1) * $no_of_records_per_page; 
```

获取总页数

```
$total_pages_sql = "SELECT COUNT(*) FROM table";
$result = mysqli_query($conn,$total_pages_sql);
$total_rows = mysqli_fetch_array($result)[0];
$total_pages = ceil($total_rows / $no_of_records_per_page); 
```

为分页构造 SQL 查询

```
$sql = "SELECT * FROM table LIMIT $offset, $no_of_records_per_page"; 
```

参考[使用 PHP 和 MySql 创建分页](https://www.myprogrammingtutorials.com/create-pagination-with-php-and-mysql.html)

# .net - .NET WCF 4.5 安全性 - 通过 jQuery 进行跨域访问

> ID：12248721
> 
> 赞同：1
> 
> 时间：2012-09-03T13:20:26.093
> 
> 标签：.net, wcf, wcf-security

我知道这是一个很常见的问题，但是我一直在阅读很多教程，但并没有*完全*涵盖我所需要的内容，我觉得最好在这里问一个问题。

简单地说，我要做的是创建一个 WCF 4.5 服务并在其上创建授权，以便只有具有正确授权的用户才能访问它，我也希望通过 jQuery 请求访问它。

我遵循了一个教程并锁定了我的服务并使用了基本身份验证，但随后教程仍然坚持在客户端机器上使用 base 64 编码字符串并通过请求标头发送它（我确信实际上可以看到在 Firebug 中？！） - 所以理论上，这可以很容易地被黑客解码？SSL 会使这个请求标头在 Firebug 中不可读吗？

此外，我已将 Access-Control-Allow-Origin 添加到我的 Global.asax 服务中，并且我的服务中根本没有提取 Authorization 标头，所以我不太确定那里发生了什么 - 如果这甚至工作，它是CORS，所以这种方法不适用于IE6吗？

向一些人道歉，因为我对此完全缺乏了解，但事实证明这是一个信息雷区！

# xml - 在 Action Script 2.0 中同步 XML 加载

> ID：12248730
> 
> 赞同：0
> 
> 时间：2012-09-03T13:20:52.030
> 
> 标签：xml, actionscript, actionscript-2

我想将一个 XML 文件加载到闪存中。有大多数用户熟悉的简单代码。

```
var myXML=new XML();
myXML.ignoreWhite=true;
myXML.onLoad()=function(success){
    if(success){
        functions_to_process_xml();
    }else{
        trace("not loaded");
    }
}
myXML.load("myxml.xml"); 
```

到这里为止，一切看起来都很好。但是我有一个同步问题。我只想让我的 swf 启动，加载 xml 文件，并在 myXML.onLoad() 完成后，让其他操作发生。我只是无法在 .onLoad() 方法完成后同步我的函数。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T17:41:47.720

如果您希望在成功加载和解析 XML 数据后执行其他操作，我认为您在正确的轨道上拥有您所拥有的。假设您的 XML 处理例程是同步的（很可能），您需要做的就是在调用 XML 解析方法之后初始化其他操作。

我可能会这样做：

```
var myXML=new XML();
myXML.ignoreWhite=true;
myXML.onLoad()=function(success){
    if(success){
        xmlLoadedHandler();
    }else{
        trace("not loaded");
    }
}
myXML.load("myxml.xml");

function xmlLoadedHandler() {
    parseXML(); // most likely a synchronous process
    initOtherActions(); // XML has been loaded and parsed
} 
```

如果可能，您应该考虑[更新到 ActionScript 3.0](http://www.adobe.com/devnet/flash/articles/first_as3_application.html)。

# javascript - 更改跳转到 URL 操作 SSRS 2008 R2 (rc:LinkTarget) 的链接目标属性

> ID：12248731
> 
> 赞同：1
> 
> 时间：2012-09-03T13:20:52.013
> 
> 标签：javascript, reporting-services, ssrs-2008, ssrs-2008-r2

我正在使用 SSRS208R2 创建报告。我在我的 Web 应用程序中使用 ReportViewer 控件显示这些报告。

我表中的一些字段是用户 javascript:void window.open... 在新窗口中打开链接的标签。我为占位符使用跳转到 URL 操作来实现这一点。

**问题：**

1.  我的报告显示在单独的域中。
2.  ReportViewer 控件使用 target='_top' 属性呈现标签。
3.  如果目标是 _top，IE 将不允许任何 href='javascript:void alert....' 操作从不同的域 Iframe 运行。

* * *

**问题**：

1.  有没有办法为锚标记定义不同的目标 - 我搜索了一些地方，发现 SSRS Web 应用程序可以使用 rc:LinkTarget=_Blank 来更改所有目标，但是这似乎对我有用。还有其他可能的解决方案吗？

2.  任何人都可以建议一种不同的方法来在新窗口中打开一个链接，当报告从不同域的 iframe 显示时不会撞墙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T02:29:21.683

解决了！

我在内置的报告服务 Web 界面上尝试了查询字符串“rc:LinkTarget”.. 最初对我不起作用。

然后我尝试更改该参数的位置并且它起作用了..我真的不认为那是它可能存在拼写错误或其他东西，无论如何...

所以我做了更多的挖掘，发现报表查看器控件具有相同的属性，称为 LinkTarget 我用它来定义一个空字符串，一切正常。

干杯...

# php - 在php中更新选定的列表框值

> ID：12248733
> 
> 赞同：-1
> 
> 时间：2012-09-03T13:21:01.140
> 
> 标签：php

我有选择选项框，还添加了许多我想通过提交按钮更新的字段。

这是代码：

```
<td><select name="select_provider" id="select_provider">

     <option value="selected">All</option>
     <?php $sql_list_provider=mysql_query("Select opp_provider from  ambition_opp_provider");
     while($cmd=mysql_fetch_array($sql_list_provider)){
     ?>
   <option><?php echo $cmd['opp_provider'];}?></option>

    </select></td>
        <td><input type="submit" name="update_provider" id="update_provider" value="UPDATE PROVIDER" style="background-color:#000000; color:#fff"/></td> 
```

感谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:23:49.937

在您的代码`</option>`中，在导致生成无效 html 的循环之外。只需删除`}`并在`<?php } ?>`之后添加`</option>`

并将`value`属性添加到`option`标签。`value="<?php echo $cmd['opp_provider'];?>"`在服务器端，您可以像这样访问它：（`$_POST['select_provider']`假设您使用 post 方法）。

# share - Alfresco 创建一个只允许创建用户和组的新用户组

> ID：12248734
> 
> 赞同：2
> 
> 时间：2012-09-03T13:21:14.550
> 
> 标签：share, alfresco, authority

我想创建一个**新的用户组**。

**此用户组中的成员可以创建新用户和新组。**

我认为创建用户或组需要`admin`许可。**此用户组除了创建、编辑和删除用户、组外，没有其他管理员权限。**alfresco 是否在 alfresco community 4.0c 中提供这种群组？我该如何实施？如何添加具有指定权限的新组？我非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:07:57.693

您可以在其中添加自定义角色，`permissionDefinitions.xml`但我认为这在这种情况下无济于事，因为创建用户和组以及其他管理操作的能力已与内置管理员角色硬连线。

相反，您可以创建一个自定义 Web 脚本，该脚本执行检查以查看当前用户是否是您的自定义安全组的成员。由于经过身份验证的用户可能不是存储库管理员（也可能不是），因此您需要使用类似[Sudo 工具的 Alfresco webscripts](http://fabiostrozzi.eu/2009/11/23/sudo-like-tool-for-alfresco-webscripts/ "用于 Alfresco 网页脚本的 Sudo 工具")来临时授予他们创建对象的权限。

您需要具备 Java webscript 开发能力才能实现这一点。Alfresco wiki 上有一些很好的资源，在线提供文档和培训材料。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:16:38.500

您可以通过 Alfresco Share 进行管理。在您的 Alfresco 安装目录中： `/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/model/permissionDefinitions.xml`您将找到**permissionDefinitions.xml**文件。通过该文件，您可以管理 Alfresco 用户和组的自定义角色。 [在这里，在此 WIKI 中，](http://wiki.alfresco.com/wiki/Custom_Permissions_in_Share)您可以找到一些提示，说明您需要更改哪些内容才能完成此操作。希望能帮助到你。wiki 在这里提供帮助，如果您需要更好的解释，请告诉我。

# .net - 远程调试不起作用

> ID：12248736
> 
> 赞同：2
> 
> 时间：2012-09-03T13:21:22.057
> 
> 标签：.net, tridion, templating, tridion-2011

[按照这篇文章](https://stackoverflow.com/questions/12210711/tridion-template-builder-and-visual-studio-debugging)设置远程调试后，我们能够在 Visual Studio 2008 中找到并附加模板生成器进程 ID。

但是我们仍然无法调试。创建断点后，我们附加模板构建器进程进行调试。当我们从 Template builder 运行复合模板时，该过程执行时不会在断点处停止。

代码运行良好，但我们无法调试。

我们错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T19:05:19.097

如果是模板生成器，您应该附加到模板调试主机，在模板生成器中运行模板时，还要检查您在 GAC 中没有您的 dll 版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:34:40.973

您是否在 Tridion 服务器上启动了远程调试应用程序（如 Visual Studio 2010 Remote Debugger (x64)）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-04T08:19:42.177

现在，连接到远程调试器主机的日子已经一去不复返了。

我们有一个新工具可以在本地调试所有 tridion 模板，而无需连接到称为**“TcmDebugger”**的远程调试器主机。

**[SDL Tridion Content Manager .NET 模板调试器](https://code.google.com/p/tcmdebugger/)**

有关详细信息，请参阅**[如何在不连接到 TcmTemplateDebugHost.exe 的情况下调试 Tridion 模板](https://tridion.stackexchange.com/questions/4414/how-to-debug-tridion-templates-without-connecting-to-tcmtemplatedebughost-exe)**

# jquery - 从 JQuery 自动完成中选择不同的元素

> ID：12248741
> 
> 赞同：0
> 
> 时间：2012-09-03T13:21:32.153
> 
> 标签：jquery, jquery-autocomplete

我有一个 JQuery 自动完成字段，我想从中选择多个元素（按顺序）并将它们放在一个 div 中，以便以后可以检索它们。这一切都有效。问题是，如果我选择一个我已经选择的元素，我不希望它出现在 div 中。到目前为止，我的代码进行了**包含**搜索，但我需要完全匹配。如何更改以下代码来执行此操作？

```
<script type="text/javascript">
            $(function () {

                function locationLog(message) {
                    if (!$('#locationLog div:contains(' + message + ')').length) {
                        $("<div/>").text(message).appendTo("#locationLog");
                        $("<br/>").text("").appendTo("#locationLog");
                        $("#locationLog").scrollTop(0);
                    }
                }

                $("#Location").autocomplete({
                    source: "/Results/GetLocations",
                    minLength: 1,
                    select: function (event, ui) {
                        if (ui.item != null)
                            locationLog(ui.item.value);
                    }
                });
            });
       </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:36:39.297

这行得通吗？

```
var test = '/^'+message+'$/g';
if ($('#locationLog div').text().match(test).length === null) 
```

更新：必须检查 null 而不是 1 以获得正确的逻辑...

# perl - 在 perl 中将数组扩展为参数列表

> ID：12248743
> 
> 赞同：1
> 
> 时间：2012-09-03T13:21:43.683
> 
> 标签：perl, arguments, perl-module

我有类似下面的代码

```
my @array = ["hello","hi","fish"];
sub this_sub {
  my $first = $_[0];
  my $second = $_[1];
  my $third = $_[2];
}
this_sub(@array); 
```

如何使数组扩展为参数列表，以便第一个、第二个和第三个将从数组中的字符串中获取值。如下所示。

*   第一个=“你好”
*   第二=“嗨”
*   第三=“鱼”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T13:25:58.117

你的代码是错误的。要将列表分配给数组，请将其括在普通括号中：

```
my @array = ("hello", "hi", "fish"); 
```

方括号定义了一个匿名数组，即一个列表的引用，它是一个标量：

```
my $array_ref = ["hello", "hi", "fish"]; 
```

如果要发送引用，则必须在子中取消引用它：

```
sub this_sub {
    my ($first, $second, $third) = @{ $_[0] };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-14T05:19:33.370

有时能够将数组扩展为参数列表是有益的，因为通常无法访问相关子例程。这是我的解决方案。

```
sub test_sub($$$) {
    my ($a,$b,$c) = @_;
    say "$a $b $c";
}
my @array = ('happy', 'birthday', 'to you');
my $eval_str = 'test_sub(' join ', ', @array . ')';
eval $eval_str; 
```

这有点难看，希望其他人可以提出改进的版本。

# php - 从带有 PHP 的 ios 到 mySQL

> ID：12248744
> 
> 赞同：0
> 
> 时间：2012-09-03T13:21:44.103
> 
> 标签：php, mysql, ios

我有一个关于获取位置的工作代码。

我想存储来自文本字段的值（我现在只是将其保留为 NULL）、我的经度、纬度和时间戳。

这是我将它发送到我的 php 文件的代码

```
NSString *latitude =  [NSString stringWithFormat:@"%f", newLocation.coordinate.latitude];
NSString *longitude =  [NSString stringWithFormat:@"%f",   newLocation.coordinate.longitude];
NSString *stringFromDate = [formatter stringFromDate:newLocation.timestamp];

NSMutableURLRequest *request =
[[NSMutableURLRequest alloc] initWithURL:
[NSURL URLWithString:@"http://www.yourdomain.com/locatie.php"]];

[request setHTTPMethod:@"POST"];

NSString* postString = [NSString stringWithFormat:@"%@ %@ %@", latitude, longitude,   stringFromDate];    
[request setValue:[NSString
                   stringWithFormat:@"%d", [postString length]] forHTTPHeaderField:@"Content-length"];

[request setHTTPBody:[postString
                      dataUsingEncoding:NSUTF8StringEncoding]];

[[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

这是我的 PHP 文件中的代码。

```
<?php
// Connecting, selecting database

$id = $POST['id'];
$longitude = $POST['longitude'];
$latitude = $POST['latitude'];
$timestamp = $POST['stringFromDate'];

$link = mysql_connect('server', 'name', 'pass')
    or die('Could not connect: ' . mysql_error());

mysql_select_db('db_name') or die('Could not select database');

// Performing SQL query
$query("INSERT INTO locatie (id, longitude, latitude, timestamp)
        VALUES (NULL, $longitude,$latitude,$timestamp )");
$result = mysql_query($query) or die('Query failed: ' . mysql_error());

echo "OK";

// Free resultset
mysql_free_result($result);

// Closing connection
mysql_close($link);
?> 
```

我究竟做错了什么？感谢所有帮助。

谢谢

**PS：我没有收到任何错误，唯一的问题是我的数据库保持为空**

**它仍然无法正常工作，请如果有人知道我做错了什么**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T08:55:37.370

除了有关`$_POST`全局变量的其他答案之外，我相信您在尝试构建查询字符串时会遇到 2 个 PHP 错误。

1.  您没有将查询字符串正确分配给 $query 变量。您应该使用等号将字符串分配给 $query PHP 变量。例如：

    ```
    $query = "INSERT INTO ..." 
    ```

2.  您需要使用句点 ( ) 将 PHP 变量（$longitude、$latitude、$timestamp）连接到您正在构建的查询字符串中`.`，这是 PHP 连接运算符。连接允许 PHP 动态构建字符串。

    ```
    $query = "INSERT INTO locatie (id, longitude, latitude, timestamp)
        VALUES (NULL," . $longitude . "," . $latitude . "," .$timestamp." )"; 
    ```

根据表中 $timestamp 字符串和数据类型的格式，您可能需要将其括在单引号中。`"'" . $timestamp . "'"`. 获取 $longtitude、$latitude、$timestamp 的一些示例数据，并尝试在 phpMyAdmin 或您正在使用的任何 DB 工具中编写 SQL 语句，以查看是否需要引号。

此外，还应解决前面提到的 SQL 注入问题。您没有清理 $_POST 全局变量中分配给 $longitude、$latitude、$timestamp PHP 变量的字符串。您将它们直接传递给 MySQL。如果字符串中有恶意语句，您可能会遇到麻烦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T13:25:41.650

如果您包含对您正在观察的错误的描述，那将是有益的。

但是，您似乎使用了错误的超全局变量 POST。它实际上是在`$_POST`（注意下划线）中找到的

我还建议您阅读[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)，因为您的代码存在这个危险的漏洞。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T13:31:26.707

变成. `$POST`_ `$_POST`这是当前的 PHP 表示法。

将表单编码添加到您从手机发送的数据中：

```
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"content-type"]; 
```

将您的请求 postdata 更改为：

```
NSString* postString = [NSString stringWithFormat:@"latitude=%@&longitude=%@&stringFromDate=%@", latitude, longitude,   stringFromDate]; 
```

如果要在 php 脚本中访问它们，则需要设置 Post 变量。

# c# - 网络上的 SQL Server 和 C# 应用程序

> ID：12248746
> 
> 赞同：0
> 
> 时间：2012-09-03T13:21:47.643
> 
> 标签：c#, sql, database, networking

我创建了一个使用 .mdf 数据库的 C# 应用程序，它可以在我的 PC 上完美运行。现在我想在可以连接到单个数据库并使用该数据的网络 PC 上安装该应用程序。我尝试只更改文件路径来更改应用程序中的连接字符串，但它不起作用。我如何将一台 PC 用作服务器并将程序用作可以通过网络连接的客户端应用程序。我如何在那台 PC 上设置 SQL 服务器，我应该这样做吗？这是怎么做到的？暂时没找到教程。。。

有人可以帮我一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:46:48.537

我认为你不应该这样做，这是我曾经审视过自己的事情。我曾经为了同样的目的使用了一个标准的基本单元，虽然它工作得很好，但你并不应该这样做。

您必须问自己应用程序对业务的重要性。如果它很关键，那么这将是一个非常糟糕的举动，原因有几个：-

> 1) 如果托管 SQL Server 的基本单元死了会怎样？或已关闭。你的不解。
> 
> 2) 您将只能在本地硬盘上安排 SQL Server 数据库的备份。如果磁盘死了，那么您将失去一切。

总而言之，对于您所呈现的场景，MS Access 数据库可能是一种更清洁的方式。访问数据库虽然已经过时，但可以托管在共享网络空间上，并且可以由多个用户访问。ADO.NET 不太糟糕，您仍然可以将 LINQ 与数据表等一起使用。

除非您按照其设计目的在实际服务器上托管 SQL Server，否则您在描述中所做的事情不会真正富有成效。

有些人建议使用 SQL Compact，但它本身仅设计为从本地计算机运行。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:36:59.680

@Milan：转到 SQL Server 配置管理器并为 SQL Server 启用 TCP/IP 服务。由于 sql server 使用 TCP/IP 进行通信。

此链接将为您提供帮助。

[http://kristofmattei.be/2010/06/21/enabling-sql-server-2008-r2-access-over-network/](http://kristofmattei.be/2010/06/21/enabling-sql-server-2008-r2-access-over-network/)

# c++ - 多线程单例

> ID：12248747
> 
> 赞同：25
> 
> 时间：2012-09-03T13:21:59.477
> 
> 标签：c++, multithreading, synchronization, singleton, mutex

这个问题是在一次采访中被问到的。第一部分是编写单例类：

```
class Singleton
{
    static Singleton *singletonInstance;
    Singleton() {}

  public:
    static Singleton* getSingletonInstance()
    {
        if(singletonInstance == null)
        {
            singletonInstance = new Singleton();
        }
        return singletonInstance;
    }
}; 
```

然后我被问到如何`getSingletonInstance()`在多线程情况下处理这个问题。我不太确定，但我修改为：

```
class Singleton 
{
    static Singleton *singletonInstance;
    Singleton() {}
    static mutex m_;

  public:
    static Singleton* getSingletonInstance()
    {
        m_pend();
        if(singletonInstance == null)
        {
            singletonInstance = new Singleton();
        }
        return singletonInstance;
    }

    static void releaseSingleton()
    {
        m_post();
    }
}; 
```

然后有人告诉我，虽然需要互斥锁，但挂起和发布互斥锁效率不高，因为这需要时间。并且有更好的方法来处理这种情况。

有人知道在多线程情况下处理单例类的更好更有效的方法吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-03T13:46:25.157

在 C++11 中，保证执行线程安全初始化：

```
static Singleton* getSingletonInstance()
{
    static Singleton instance;
    return &instance;
} 
```

在 C++03 中，一种常见的方法是使用双重检查锁定；检查标志（或指针本身）以查看对象是否可能未初始化，如果可能，则仅锁定互斥锁。这需要某种非标准的原子读取指针（或相关的布尔标志）的方式；许多实现错误地使用普通指针 or `bool`，不能保证一个处理器上的更改在其他处理器上可见。代码可能看起来像这样，尽管我几乎可以肯定有问题：

```
static Singleton* getSingletonInstance()
{
    if (!atomic_read(singletonInstance)) {
        mutex_lock lock(mutex);
        if (!atomic_read(singletonInstance)) {
            atomic_write(singletonInstance, new Singleton);
        }
    }
    return singletonInstance;
} 
```

这很难做到正确，所以我建议你不要打扰。在 C++11 中，您可以使用标准的原子和互斥类型，如果出于某种原因您想要保持示例的动态分配。

请注意，我只是在谈论同步初始化，而不是对对象的同步访问（您的版本通过将互斥锁锁定在访问器中并稍后通过单独的函数释放它来提供）。如果您需要锁来安全地访问对象本身，那么您显然无法避免每次访问都锁定。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-03T15:56:06.773

正如@piokuc 建议的那样，您也可以在此处使用一次函数。如果你有 C++11：

```
#include <mutex>

static void init_singleton() {
    singletonInstance = new Singleton;
}
static std::once_flag singleton_flag;

Singleton* getSingletonInstance() {
    std::call_once(singleton_flag, init_singleton);
    return singletonInstance;
} 
```

`new Singleton`而且，是的，如果抛出异常，这将有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-03T13:26:53.163

If you have C++11 you can make `singletonInstance` an atomic variable, then use a double-checked lock:

```
if (singletonInstance == NULL) {
    lock the mutex
    if (singletonInstance == NULL) {
        singletonInstance = new Singleton;
    }
    unlock the mutex
}
return singletonInstance; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-03T13:47:09.283

如果您使用 POSIX 线程，您可以使用`pthread_once_t`和`pthread_key_t`填充，这样您就可以完全避免使用互斥锁。例如：

```
template<class T> class ThreadSingleton : private NonCopyable {
public:
    ThreadSingleton();
    ~ThreadSingleton();

    static T& instance();

private:
    ThreadSingleton( const ThreadSingleton& );
    const ThreadSingleton& operator=( const ThreadSingleton& )

    static pthread_once_t once_;
    static pthread_key_t  key_;

    static void init(void);
    static void cleanUp(void*);
}; 
```

和实施：

```
template<class T> pthread_once_t ThreadSingleton<T>::once_ = PTHREAD_ONCE_INIT;
template<class T> pthread_key_t ThreadSingleton<T>::key_;

template<class T>  
T& ThreadSingleton<T>::instance()
{
    pthread_once(&once_,init);

    T* value = (T*)pthread_getspecific(key_);
    if(!value)
    {   

        value = new T();
        pthread_setspecific(key_,value);
    }   
    return *value;
}

template<class T> void ThreadSingleton<T>::cleanUp(void* data)
{
    delete (T*)data;
    pthread_setspecific(key_,0);
}

template<class T> void ThreadSingleton<T>::init()
{
    pthread_key_create(&key_,cleanUp);
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-03T13:32:41.207

您实际上应该锁定单例，而不是实例。如果实例需要锁定，则应由调用者处理（或者可能由实例本身处理，具体取决于它公开的接口类型）

**更新**示例代码：

```
#include <mutex>

class Singleton 
{
    static Singleton *singletonInstance;
    Singleton() {}
    static std::mutex m_;

  public:

    static Singleton* getSingletonInstance()
    {
        std::lock_guard<std::mutex> lock(m_);
        if(singletonInstance == nullptr)
        {
            singletonInstance = new Singleton();
        }
        return singletonInstance;
    }
} 
```

# flash - 每个人都自动播放的视频

> ID：12248749
> 
> 赞同：0
> 
> 时间：2012-09-03T13:22:20.343
> 
> 标签：flash, html, url, video

我正在使用以下代码在我的网站上播放视频。目前它被设置为自动播放。我想知道的是，如果从特定 URL 访问，有一种方法可以使视频仅自动播放。如果通过网站导航而不是自动播放？

下面的代码：

```
<video width="640" height="360" controls autoplay>
        <source src="__VIDEO__.MP4"  type="video/mp4" />
        <source src="__VIDEO__.OGV"  type="video/ogg" />
        <object width="640" height="360" type="application/x-shockwave-flash" data="__FLASH__.SWF">
            <param name="movie" value="__FLASH__.SWF" />
            <param name="flashvars" value="autostart=true&amp;controlbar=over&amp;image=__POSTER__.JPG&amp;file=__VIDEO__.MP4" />
            <img src="__VIDEO__.JPG" width="640" height="360" alt="__TITLE__"
                 title="No video playback capabilities, please download the video below" />
        </object>
    </video> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:33:11.190

您可以做的是使用 JavaScript 检查引荐，如果它不是来自您的站点，则将 autoPlay 设置为 true。

前任：

```
if(document.referrer.indexOf("mydomain.com") < 0){
    //set auto play
} 
```

或者

```
if(document.referrer.indexOf("mydomain.com") > -1){
    //tell the swf to play your video
} 
```

理想情况下，您希望使用服务器端代码检查这一点，然后相应地吐出 html。使用 JS，您必须通过 JS 代码（类似 swfObject）创建 flash 对象，或者始终将 autoPlay 设置为 false，并在检查引荐来源网址后调用播放功能（如果存在）。

# android - 动态超过 2 行的应用程序标题

> ID：12248751
> 
> 赞同：0
> 
> 时间：2012-09-03T13:22:21.773
> 
> 标签：android, android-layout

在...的帮助下

[窗口标题文字大小](https://stackoverflow.com/questions/2824723/window-title-text-size)

我想出了如何让标题大小更大。但我想拥有它：

1.  不是固定大小，例如 50dip，而是更依赖于屏幕分辨率
2.  在 LargeTitleSize 和 RegularTitleSize 之间来回切换

主要目标应该是：

*   根据设备的不同，它应该只覆盖带有字幕的标题（即特定字体高度的两倍）
*   让用户决定是显示两行还是只显示一行
*   一些应用程序标题默认设计为单行

# clojure - Clojure 参考项目是最新的吗？

> ID：12248754
> 
> 赞同：6
> 
> 时间：2012-09-03T13:22:36.600
> 
> 标签：clojure, lisp

从 Clojure 开始，我发现了 Rich Hickey 的演讲，他在演讲中展示了 Clojure 在基本[Ant-Simulator](https://github.com/krukow/ants-demo)上的一些优势。

这段代码仍然可以被认为是 Clojure 的一个很好的参考吗？尤其是当他递归地向代理发送函数以模拟游戏循环时的部分。例子：

```
(defn animation [x]
  (when b/running
    (send-off *agent* #'animation))
    (. panel (repaint))
  (. Thread (sleep defs/animation-sleep-ms))
  nil) 
```

**编辑：**

我对`#'`阅读器宏不感兴趣，但更多的是习惯/良好的 Clojure 递归调用代理上的函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T18:01:23.143

此代码片段在 Clojure 1.4 中是最新的。函数将任务提交回调用它的代理是否符合习惯？是的。

这是一个使用类似方法递归计算阶乘的示例：

```
(defn fac [n limit total]
  (if (< n limit)
    (let [next-n (inc n)]
       (send-off *agent* fac limit (* total next-n)) 
       next-n)
     total))

 (def a (agent 1))

 (await (send-off a fac 5 1))
 ; => nil
 @a
 ;=> 120 
```

**更新**

上面是一个人为的例子，实际上不是一个好的例子，因为在各种递归`send-off`调用和后面的`await`. 可能有一些`send-off`呼叫尚未添加到代理的任务队列中。

我将上面的内容重写如下：

```
(defn factorial-using-agent-recursive [x]
  (let [a (agent 1)]
    (letfn [(calc  [n limit total]
               (if (< n limit)
                 (let [next-n (inc n)]
                   (send-off *agent* calc limit (* total next-n))
                   next-n)
                 total))]
      (await (send-off a calc x 1)))
    @a)) 
```

并观察到以下行为：

```
user=> (for [x (range 10)] (factorial-using-agent-recursive 5))
(2 4 3 120 2 120 120 120 120 2)
user=> (for [x (range 10)] (factorial-using-agent-recursive 5))
(2 2 2 3 2 2 3 2 120 2)
user=> (for [x (range 10)] (factorial-using-agent-recursive 5))
(120 120 120 120 120 120 120 120 120 120) 
```

故事的寓意是：不要使用代理进行同步计算。将它们用于异步独立任务 - 例如更新显示给用户的动画:)

# php - PHP BBCode 正则表达式替换

> ID：12248755
> 
> 赞同：1
> 
> 时间：2012-09-03T13:22:53.630
> 
> 标签：php, parsing, bbcode

我该如何更换：

```
<tag attr="z">
    <tag attr="y">
        <tag attr="x"></tag>
    </tag>
</tag> 
```

至：

```
<tag attr="z">
    [tag=y]
        <tag attr="x"></tag>
    [/tag]
</tag> 
```

不使用扩展？

我尝试失败：

```
preg_replace("#<tag attr=\"y\">(.+?)</tag>#i", "[tag=y]\\1[/tag]", $text); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T21:36:42.877

嗯，PHP 的正则表达式实现支持 PCRE 的递归模式。但是，由于其神秘的性质，我会犹豫使用这样的功能。但是，既然你问：

> 不使用扩展？

这里是：

```
<?php

$html = '<tag attr="z">
    <tag attr="y">
        <tag>
            <tag attr="more" stuff="here">
                <tag attr="x"></tag>
            </tag>
        </tag>
    </tag>
</tag>
';

$attr_regex = "(?:\s+\w+\s*=\s*(?:'[^']*'|\"[^\"]*\"))";
$recursive_regex = "@
    <tag\s+attr=\"y\">         # match opening tag with attribute 'y'
    (                          # start match group 1
      \s*                      #   match zero or more white-space chars
      <(\w+)$attr_regex*\\s*>  #   match an opening tag and store the name in group 2
      (                        #   start match group 3
        [^<]+                  #     match one or more chars other than '<'
        |                      #     OR
        (?1)                   #     match whatever the pattern from match group 1 matches (recursive call!)
      )*                       #   end match group 3
      </\\2>                   #   match the closing tag with the same name stored in group 2
      \s*                      #   match zero or more white-space chars
    )                          # end match group 1
    </tag>                     # match closing tag
    @x";

echo preg_replace($recursive_regex, "[tag=y]$1[/tag]", $html);

?> 
```

这将打印以下内容：

```
<tag attr="z">
    [tag=y]
        <tag>
            <tag attr="more" stuff="here">
                <tag attr="x"></tag>
            </tag>
        </tag>
    [/tag]
</tag> 
```

# python-3.x - Python 3 中的解释器式输出（可能是关于 sys.displayhook？）

> ID：12248756
> 
> 赞同：1
> 
> 时间：2012-09-03T13:22:53.667
> 
> 标签：python-3.x, interpreter

我正在用 Tk 制作一个小玩具命令窗口，目前正试图让它复制一些解释器行为。

我以前从未仔细检查过解释器，但是关于何时打印值的决定有点神秘。

```
>>> 3 + 4  # implied print(...)
7
>>> 3      # implied print(...)
3
>>> a = 3  # no output, no implied print(...), bc result is None maybe?
>>> None   # no output, no print(...) implied... doesn't like None?
>>> print(None)  # but it doesn't just ban all Nones, allows explicit print()
None
>>> str(None) # unsurprising, the string 'None' is just a string, and echoed
'None' 
```

目标是模仿这种行为，打印一些无，而不是其他（稍微复杂一些，因为我不完全确定规则是什么）。

所以，转向我的程序，我有 history_text 和 entry_text，它们是 StringVar()，它们控制 Tk 窗口中输入框上方的标签。然后将以下事件绑定到 Return 键，以处理命令并使用结果更新历史记录。

```
def to_history(event):
    print("command entered")  # note to debugging window

    last_history = history_text.get()

    # hijack stdout
    buffer = io.StringIO('')
    sys.stdout = buffer

    # run command, output to buffer
    exec(entry_text.get())

    # buffered output to a simple string
    buffer.seek(0)
    buffer_str = ''
    for line in buffer.readlines():
        # maybe some rule goes here to decide if an implied 'print(...)' is needed
        buffer_str = buffer_str + line + '\n'

    # append typed command for echo
    new_history = entry_text.get() + '\n' + buffer_str

    # cleanup (let stdout go home)
    sys.stdout = sys.__stdout__
    buffer.close()

    history_text.set(last_history + "\n" + new_history)
    entry_text.set('') 
```

照原样，它不为简单的“3”或“无”甚至“3 + 4”输入提供任何输出。一直添加一个隐含的 print() 语句似乎打印得太频繁了，我不会跳过 'None' 或 'a = 3' 类型语句的打印。

我找到了 sys.displayhook 的一些文档，它似乎控制解释器何时实际显示结果，但我不确定如何在这里使用它。我以为我可以将 sys.displayhook() 包裹在我的 exec() 调用周围，让它为我完成所有这些工作......但发现它并不意味着像 '3 + 4' 这样的语句的 print() 语句或'3'。

有什么建议么？我在 sys.displayhook 的正确轨道上吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:26:31.883

解释器`repr(result)`仅在`result is not None`.

没有`print`你想象的“隐含的 s”。

*   `3 + 4`结果为`7`，因此`repr(7)`打印
*   `a = 3`是一项作业，我认为没有打印任何内容，因为它不适用于`eval`
*   `None`结果为`None`，因此不打印任何内容
*   `print(None)`结果为`None`（因为该`print`函数不返回任何内容），因此不打印任何内容。但是，`print`函数本身打印了`None`.

老实说，我没有阅读您的代码，但这里有一个函数，它采用带有代码的字符串并产生与解释器相同的输出：

```
def interactive(code):
    try:
        result = eval(code)
        if result is not None:
            print(repr(result))
    except SyntaxError:
        exec(code) 
```

# javascript - 从 Div 创建图像并使用 Javascript 和 ASP.net 将其保存到服务器

> ID：12248760
> 
> 赞同：0
> 
> 时间：2012-09-03T13:22:56.353
> 
> 标签：javascript, asp.net, image, html, save

我有一个 div，用户通过将其他 div 拖放到其中来创建一个简单的图表，我已经通过使用 javascript 完成了这一点。

我正在寻找一种方法来将此 div 保存到图像并将其保存为我的服务器（IIS/ASP.NET）上的文件。

我见过无数种方法，但我对哪种方法可行感到困惑。它必须在以下浏览器中工作：IE7+、Chrome、Safari、Firefox。

这就是为什么我正在考虑在服务器端做它，但我不知道如何完成这样的事情。我找到了从 ASP.NET 中的 URL 截取屏幕截图的不同方法。但它不仅仅是一个 URL ，它是用户所在的当前页面。它取决于登录数据等。

tldr：是否可以从 Javascript 中的 div 创建图像？如果是这样，这种方法可以在 IE7+ 中使用吗？如果不是，那么可能是服务器端（asp.net）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:59:38.653

您创建的不是“图像”——它只是以视觉可识别的模式存在的 HTML 元素的集合（可能使用 CSS 样式）。

要从中生成二进制图像，您需要序列化这个元素集合（即视图图），将其传递给服务器，然后服务器将序列化的视图图解释为一系列绘图命令到一个新的位图中，然后将位图返回给用户。

这个的实际实现是留给读者的练习。我不能更准确，因为您提供的技术细节几乎为零（例如您的基于 Javascript 的绘图工具的实际工作方式）。

# javascript - 从js中的对象返回一个值

> ID：12248762
> 
> 赞同：0
> 
> 时间：2012-09-03T13:22:56.893
> 
> 标签：javascript

假设我在 js 中有一个带有一个私有变量的简单对象：

```
function test(){
var value=true;
} 
```

现在我想创建一个实例：

```
var r=new test() //I want to get r === true 
```

我怎样才能从中返回一个值？

如果我写：

```
function test(){
var value=true;

return value;
} 
```

我有一个测试 {} 结果。

如果我写：

```
function test(){
var value=true;

return function(){ return value; } 
} 
```

然后我可以得到值，但我必须添加额外的括号：

var r=new test()() //r === true

我不想要括号，所以我尝试将代码更改为：

```
function test(){
var value=true;

return (function(){ return value; } )();
} 
```

但作为回应，我再次得到 test {} 这种情况下如何编写 return 语句？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T13:26:43.630

I believe you need to do something like:

```
function test(){
    this.value = true;
} 
```

and then

```
var r=new test();
if (r.value == true) {
    //Do something
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T13:34:49.267

首先我觉得有必要澄清一个可能的误解：

```
function test(){
    var value=true;
} 
```

不是具有私有变量的对象。它是一个带有局部变量的**函数。**当您使用 调用函数时`new`，它**会创建**一个从函数原型继承的没有属性的对象。如果您正常调用该函数，它只是执行函数体并返回`undefined`（因为您没有返回任何内容）。

* * *

## 解决方案：

你真的需要一个构造函数吗？我问是因为你的例子很简单。显然你不能让函数返回两个值`true`和对象。

因此，您可以只调用该函数而无需`new`：

```
function test() {
    var value = true;
    return value;
}

var r = test(); 
```

如果您真的想`r`成为`true`那么我认为没有理由将该函数称为构造函数。

你得到`test {}`结果的原因是因为你用`new`. 如果你这样做，该函数将*始终*返回一个对象，如果你不显式这样做（`value`是一个布尔值，而不是一个对象），它会隐式返回`this`（这是一个对象）。
再说一次，如果你真的想从函数内部`r`等于，那么就不要用.`value``new`

* * *

如果你需要一个对象，有几种方法：

您可以将值分配给属性并改为访问它，就像[PokeHerOne](https://stackoverflow.com/users/1603018/pokeherone)在[他的答案](https://stackoverflow.com/a/12248817/218196)中显示的那样，或者添加一个返回该值的函数，如[papaiatis](https://stackoverflow.com/users/675462/papaiatis) [演示](https://stackoverflow.com/a/12248877/218196)的那样。优点是可以显式访问该值，并且查看您的代码的其他人可以理解发生了什么。

此外，根据您要对该值/对象执行的操作，您可以实现`valueOf`由各种运算符调用的方法。

例如：

```
function Test(){
    var value = true;

    this.valueOf = function() {
        return value;
    }
}

var t = new Test();
console.log(t);          // logs the Test instance
console.log(t == true);  // logs `true` 
```

Ie是一个对象，但在各种操作中`t`的行为类似于 value `true`( )。`value`这很强大，但也可能很混乱，因为类型转换有些隐含，并且在 JavaScript 中不经常使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:30:28.563

内部定义的使用方法：

```
function TestClass(){
    var value = true;
    this.getValue = function(){
        return value;
    };
}

var t = new TestClass();
alert(t.getValue()); // true 
```

由于`value`被定义为私有，因此无法从外部访问：

```
alert(t.value) // undefined 
```

# php - PHP识别变量的变化

> ID：12248764
> 
> 赞同：0
> 
> 时间：2012-09-03T13:23:04.400
> 
> 标签：php, variables, detect

我正在使用来自不同数据库的多个 mysql 查询，从带有数组的 while 循环中提取值，并将它们重新组合成一个循环，如下所示：

```
$len = max(count($insrtdate),count($energy));
for($i=0;$i<$len;$i++){
    $date = isset($insrtdate[$i]) ? $insrtdate[$i] : '';
    $energy1 = isset($energy[$i]) ? $energy[$i] : '';
    echo $energy1;
} 
```

该值`$energy1`最初为 0，我想检测它更改为任何数字的行以及返回初始值 0 的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:28:04.020

I'm not 100% sure that I understand your question, but this should be what you want:

```
$len = max(count($insrtdate), count($energy));
$lastEnergy1 = null;
for($i=0; $i < $len; $i++){
    $date = isset($insrtdate[$i]) ? $insrtdate[$i] : '';
    $energy1 = isset($energy[$i]) ? $energy[$i] : '';
    if ($lastEnergy1 !== $energy1) {
    $onState = ($energy1 == "1" ? "on" : "off");
        echo "Energy1 turned " . $onState . " at " . $date . "<br />";
        $lastEnergy1 = $energy1;
    }
} 
```

# ruby-on-rails - 用 rbenv --mkmf 错误替换 RVM

> ID：12248765
> 
> 赞同：2
> 
> 时间：2012-09-03T13:23:08.217
> 
> 标签：ruby-on-rails, rbenv

我正在考虑用 rbenv 替换 RVM，因为我正在使用 bundle 来管理我的 gemfile。我相信 rbenv 在管理我的 Ruby 版本方面要轻松得多，所以我卸载了 RVM 并安装了 rbenv。我使用安装了捆绑器 gem

```
gem install bundler 
```

因为我们到处都需要它。然后我打开了一个项目并使用 rbenv 安装了所需的 Ruby 版本：

```
rbenv install 1.9.3-p194
rbenv local 1.9.3-p194
rbenv rehash 
```

我输入`ruby -v`以确保它使用的是正确版本的 Ruby，而且确实如此，所以我尝试运行 bundle，它一直运行，直到它尝试安装 RedCloth，然后失败：

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

    /usr/bin/ruby1.9.1 extconf.rb --with-cflags=-w
    /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)
    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from extconf.rb:1:in `<main>' 
```

它建议我在捆绑之前安装 RedCoth，所以我安装了 RedCloth：

```
gem install RedCloth 
```

成功了。然后我跑了`ruby -v`，只是为了确保它仍然正确，然后尝试运行`bundle update`并发生了同样的错误：

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

    /usr/bin/ruby1.9.1 extconf.rb --with-cflags=-w
    /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)
    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from extconf.rb:1:in `<main>'

    Gem files will remain installed in /home/ruberto/.bundler/tmp/7551/gems/RedCloth-4.2.9 for inspection.
    Results logged to /home/ruberto/.bundler/tmp/7551/gems/RedCloth-4.2.9/ext/redcloth_scan/gem_make.out
    An error occurred while installing RedCloth (4.2.9), and Bundler cannot continue.
    Make sure that `gem install RedCloth -v '4.2.9'` succeeds before bundling. 
```

然后我尝试安装不同版本的 Ruby，但也没有成功。

有人有想法吗？

我随后尝试在我的其他项目中做同样的事情，一切似乎都很好。我有一个使用 1.8.7 的，它就像将 rbenv 设置为正确的版本然后运行 ​​bundle 一样简单。我尝试了几乎所有 Ruby 版本的组合，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T22:43:07.933

我有一个类似的问题。事实证明，即使我的路径前面有 ~/.rbenv/shims 目录，zsh 也会将 bundle 的位置缓存到 /usr/local/bin/bundle。

该解决方案只是`rehash`在 shell（不是`rbenv rehash`）上运行。这刷新了所有缓存的命令，包括捆绑包，之后一切顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T08:29:02.573

我终于克服了这个问题。

我安装了错误版本的 Ruby 1.8.7-p370。然后我运行 bundle 并且当 bundle 用于 1.9.3 包时，它有一些 gem 编译针对 Ruby 1.8.7 的本机扩展，所以即使我要切换到 1.9.3 版本并尝试再次运行 bundle 它也会轰出去。

为了解决这个问题，我简单地删除了所有的 gem，然后安装了正确版本的 Ruby，然后重新运行了 bundle。

# java - Java TimeZone 挠头

> ID：12248766
> 
> 赞同：1
> 
> 时间：2012-09-03T13:23:11.880
> 
> 标签：java, timezone

我想以夏令时证明格式保存一些用户时区。
我的目标是在代码执行时获得正确的 GMT 偏移量。
为了找出我最好的选择，我写了以下内容：

```
ArrayList<String> list = new ArrayList<String>();
list.add( "EST");
list.add( "EDT");
list.add( "America/New_York");
long now = System.currentTimeMillis();
for( String tzID: list) {
    TimeZone tz = TimeZone.getTimeZone( tzID);
    System.out.println( tzID + " now=" + tz.getOffset( now) / 3600000 + " / +182=" + tz.getOffset( now + ( 182 * 86400000)) / 3600000);
} 
```

简而言之，现在给我偏移量，在 182 天内
执行 9 月 3 日，输出是

```
EST now=-5 / +182=-5
EDT now=0 / +182=0
America/New_York now=-4 / +182=-4 
```

出于以下几个原因，这是出乎意料的
1) 为什么 America/New_York 不给 -4/-5 ？，它不应该对日期敏感吗？
2) 为什么 EDT == UTC？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:27:21.290

One problem you have is that 182 * 86400000 overflows. If you use

```
long now = System.currentTimeMillis();
for( String tzID: "EST,EDT,America/New_York".split(",")) {
    TimeZone tz = TimeZone.getTimeZone( tzID);
    System.out.println( tz.getDisplayName() + " now=" + tz.getOffset( now) / 36e5 
                     + " / +182=" + tz.getOffset( now + 182 * 86400000L) / 36e5);
} 
```

prints

```
Eastern Standard Time now=-5.0 / +182=-5.0
Greenwich Mean Time now=0.0 / +182=0.0
Eastern Standard Time now=-4.0 / +182=-5.0 
```

If you look at the javadoc and source for getTimeZone you can see

```
 * @return the specified <code>TimeZone</code>, or the GMT zone if the given ID
 * cannot be understood.

public static synchronized TimeZone getTimeZone(String ID) {
return getTimeZone(ID, true);
}

private static TimeZone getTimeZone(String ID, boolean fallback) {
TimeZone tz = ZoneInfo.getTimeZone(ID);
if (tz == null) {
    tz = parseCustomTimeZone(ID);
    if (tz == null && fallback) {
    tz = new ZoneInfo(GMT_ID, 0);
    }
}
return tz;
} 
```

In short, EDT is not recognised so it becomes GMT.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T13:25:01.250

我怀疑这是问题所在：

```
now + ( 182 * 86400000) 
```

带括号的算术表达式溢出 32 位。你可能想要：

```
now + ( 182 * 86400000L) 
```

然而，这仍然假设任何夏令时将应用大约六个月，这在现实世界中肯定不是这种情况。例如，查看[Sao Paolo 时区](http://www.timeanddate.com/worldclock/timezone.html?n=233)，它会在 10 月和 2 月切换 - 因此，如果您在 9 月运行代码，您最终会看到 -3 / -3。即使对于 DST 大约每六个月打开/关闭一次的时区，您也很可能会发现每年连续 182 天没有切换（几乎按照定义，因为这略少于半年）。

目前尚不清楚*您*要做什么，但我怀疑您真的应该只保存时区 ID，例如“America/New_York”。几乎所有其他事情都是自找麻烦。

# css - 为三星智能电视应用程序设置背景图像大小？

> ID：12248767
> 
> 赞同：2
> 
> 时间：2012-09-03T13:23:15.207
> 
> 标签：css, samsung-smart-tv

我正在为三星智能电视创建一个应用程序。我现在面临的问题是模拟器版本 2.5。这个模拟器版本使用的是 Maple 浏览器，我检查并发现 Maple 浏览器没有使用 CSS 'background-size' 属性。有人可以告诉我如何将这个 size 属性用于 Maple 吗？我不想在我的应用程序中使用图像标签。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:37:13.753

我建议使用基于 javascript 的等价物，因为据我所知，该浏览器不支持 CSS3。

这里有几个例子：

[http://louisremi.github.com/jquery.backgroundSize.js/demo/](http://louisremi.github.com/jquery.backgroundSize.js/demo/)

[http://nooshu.com/jquery-plug-in-scalable-background-image](http://nooshu.com/jquery-plug-in-scalable-background-image)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:08:47.617

您可以使用 @BillyMoat 提到的 javascript 解决方案 - 但在我看来，最好的方法是使用普通`img`标签，因为 SmartTV 的性能非常有限。

在 DOM 上添加大量 JavaScript 操作只会挂起您的应用程序。

# android - CHM 格式的高质量 Android 文档

> ID：12248768
> 
> 赞同：-1
> 
> 时间：2012-09-03T13:23:23.773
> 
> 标签：android

是否有 chm 格式的类和方法 android 的指南？像 docs.oracle.com 这样的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:36:42.743

是的，有：[http ://code.google.com/p/android-chm-documentation/](http://code.google.com/p/android-chm-documentation/)

# php - 即使是 HTTPS 页面，密码出现在 PHP 发布请求中是否正常？

> ID：12248770
> 
> 赞同：2
> 
> 时间：2012-09-03T13:23:29.357
> 
> 标签：php, security

在PHP中，在制作登录页面时，如果您的页面是HTTPS，那么用户名/密码是否会出现在请求发布信息中？

密码不应该加密吗？我错过了什么？

这是我正在谈论的一个示例：这个网站名为 souq.com，您可以在 Firebug 监控中看到它显示用户名和密码。

![Souq.com 截图](../Images/5619e5e546b9c94301ece14d01490cf7.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T13:25:59.037

它在通过 Internet 发送时被加密。您在这里看到的是您的浏览器在加密*之前发送到服务器的内容。*

因此，您在 Firebug 中看到的内容与通过网络发送时的外观无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:28:37.677

Firebug sees the data before and after encryption so yes, you will be able to see it. But it's only visible within the application , so don't worry, this data you are seeing is all in the DOM :)

If you have more concerns about this, install something like Wireshark and you'll see that the data being transferred is indeed encrypted.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T16:32:06.827

使用一些网络嗅探器（例如wireshark）。然后你会真正看到电线上发生了什么。firebug 会在它们真正离开您的浏览器之前向您显示值，因此检查任何安全问题并不好。

# bash - 使用 Bash 在某一行之前插入文本

> ID：12248784
> 
> 赞同：4
> 
> 时间：2012-09-03T13:24:34.600
> 
> 标签：bash, shell

如何在找到字符串的**第一个位置将一组行（大约 5 行）插入文件中？**

例如：

最佳动物.txt

```
dog
cat
dolphin
cat 
```

$ "在猫之前插入长颈鹿到 BestAnimals.txt" > NewBestAnimals.txt

NewBestAnimals.txt

```
dog
giraffe 
cat
dolphin
cat 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-03T13:38:00.487

如果使用 gnu sed：

```
$ cat animals
dog
cat
dolphin
cat

$ sed  "/cat/ { N; s/cat\n/giraffe\n&/ }" animals
dog
giraffe
cat
dolphin
cat 
```

1.  用 (/cat/) 匹配一行
2.  继续下一行 (N)
3.  用插入和匹配的字符串替换匹配的模式，其中`&`表示匹配的字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T18:55:12.223

```
awk -v insert=giraffe -v before=cat '
  $1 == before && ! inserted {
    print insert
    inserted++
  }
  {print}
' BestAnimals.txt > NewBestAnimals.txt 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T13:29:53.783

如果您知道（或以某种方式找到）该行：

```
sed -n '/cat/=' BestAnimals.txt 
```

您可以使用 sed：

```
sed -i '2i giraffe' BestAnimals.txt 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-03T13:53:36.183

一个 awk 解决方案：

```
awk '/cat/ && c == 0 {c = 1; print "giraffe"}; {print}' \
     BestAnimals.txt 
```

如果您要插入的动物在“MyOtherBestAnimals.txt”中，您也可以这样做

```
awk '/cat/ && c == 0 {c = 1; system("cat MyOtherBestAnimals.txt") }; {print} ' \
     BestAnimals.txt 
```

这个答案基本上可以分解如下，因为`;`分离了 awk 条件-动作对：

*   `/cat/ && c == 0 { c = 1; ... }`在包含 cat 的第一行设置`c`为 1。然后执行放在 的命令`...`，但只执行一次，因为`c`现在是 1。
*   `{print}`是无条件的操作打印：打印任何输入行。这是在上述条件-动作对之后完成的。

根据实际情况`...`，打印 giraffe，或将“MyOtherBestAnimals.txt”的内容发送到标准输出，然后打印包含“cat”的第一行。

**编辑**

经过@glenn jackman 的解决方案分析，看来这个解决方案还是可以改进的：when using input file

```
nyan cat
cat 
```

数据附加在`nyan cat`等于 的行之前而不是之前`cat`。解决方案是请求整行等于`cat`：

```
awk '$0 == "cat" && c == 0 {c = 1; print "giraffe"}; {print}' \
     BestAnimals.txt 
```

用于插入单行和

```
awk '$0 == "cat" && c == 0 {c = 1; system("cat MyOtherBestAnimals.txt") }; {print} ' \
     BestAnimals.txt 
```

用于插入文件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T13:27:18.630

我会：

1.  用于`grep`查找第一个匹配的行号
2.  用于`head`获取导致匹配的文本
3.  使用插入新内容`cat`
4.  用于`tail`获取比赛后的线路

它既不快速、高效也不优雅。但这很简单，如果文件不是很大和/或您需要每秒执行多次，那应该没问题。

# .htaccess - 使用 htaccess 将所有域别名重定向到一个

> ID：12248788
> 
> 赞同：10
> 
> 时间：2012-09-03T13:25:00.410
> 
> 标签：.htaccess, redirect

我有几个域别名，而我只希望其中一个被实际使用。目前，我安装了两个域，

要重定向我想使用 htaccess。

我的域目前的工作方式如下：

www.domain.com/index.html - 主域的主页

www.secondDomain.com/index.html - 显示与主域完全相同的主页，但我希望它在使用时自动将 url 重命名为 www.domain.com/index.html。

谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-03T13:38:45.137

`%{HTTP_HOST}`匹配不等于`www.domain.com`并将其重定向到规范域是一件简单的事情。

```
RewriteEngine On
# If the hostname is NOT www.domain.com
RewriteCond %{HTTP_HOST} !^www\.domain\.com$
# 301 redirect to the same resource on www.domain.com
RewriteRule (.*) http://www.domain.com/$1 [L,R=301] 
```

# python - Python 是否适合部署自动化？

> ID：12248790
> 
> 赞同：3
> 
> 时间：2012-09-03T13:25:04.677
> 
> 标签：python, scripting-language

我正在寻找一种用于部署自动化（安装、卸载、复制文件等）的脚本语言。主要要求是：跨平台、可调试、良好的文档、良好的 IDE（或可能与 Microsoft Visual Studio 集成）。Python 是一个很好的候选者吗？我将不胜感激任何使用 Python 实现此类目的的成功案例的链接。我也有兴趣收集与 Python 流行度相关的统计数据

# php - 在列表项中显示从 SQL 数据库接收到的数据

> ID：12248791
> 
> 赞同：2
> 
> 时间：2012-09-03T13:25:24.050
> 
> 标签：php, sql, forms

迁移到 PHP 的老 ASP 开发人员。我编写了一个 PHP 脚本来从 MS SQL 数据库中检索条目并显示。看起来像这样：

```
<?php
$query = "SELECT DateUploaded, Title ";
$query .= "FROM TableName ";

$result = mssql_query($query);

$numRows = mssql_num_rows($result); 
echo "<h1>" . $numRows . " Row" . ($numRows == 1 ? "" : "s") . " Returned </h1>"; 

while($row = mssql_fetch_array($result))
{
echo "<li>" . $row["DateUploaded"] . $row["Title"] . "</li>";
}
?> 
```

现在，当我想让它在页面上显示回显时效果很好。使用这部分代码：

```
while($row = mssql_fetch_array($result))
{
echo "<li>" . $row["DateUploaded"] . $row["Title"] . "</li>";
} 
```

但是，当我尝试将它放入我创建的表格中以显示它时，它似乎不起作用，尽管我已经阅读了一些教程并觉得它应该，它也类似于我以前在 ASP 中使用的技术。

看起来像这样：

```
<TABLE cellSpacing=1 cellPadding=2 align=center bgColor=#aaaaaa border=0 width="100%" class="logintbl">
            <TR>
              <TD bgColor=whitesmoke colSpan=0><B>News</B></td>
            </tr>
            <tr>
                <td bgColor=#ffffff>
                    <table align="center" cellSpacing=0 cellPadding=2 border="0" width="100%">
                        <tr>
                            <td align="center" valign="bottom">&nbsp;<font color="#4d71a1"><b>Date Uploaded</b></font>&nbsp;</td>
                            <td align="center" valign="bottom">&nbsp;<font color="#4d71a1"><b>News Title</b></font>&nbsp;</td>
                            <td align="center"></td>

                        </tr>

                        <tr bgcolor="#eeeeee">

                        <tr bgcolor="#ffffff">

                            <td align="center"><?php echo $row["DateUploaded"]; ?></td>
                            <td align="center"><?php echo $row["Title"]; ?></td>
                            <td align="center">
                            <A href="NewsUpdate.php?id="><img src="images/0013-pen.gif" width="16" height="16" alt="" border="0"></A>&nbsp;&nbsp;&nbsp;
                            <a href="NewsManage.php?do=del&id=" return false;">
                                <img src="images/1001-cancel16.gif" width="16" height="16" alt="" border="0">
                            </a>

                            </td>

                        </tr>

                        <tr><td colspan="7">&nbsp;</td></tr>
                        <tr>
                            <td colspan="7" align="center">
                            </td>
                        </tr>

                    </table>
                </td>
            </tr>
        </table> 
```

我可能做错了，但有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:36:02.300

将行放入循环内的 echo 中：

```
<?php
while($row = mssql_fetch_array($result))
{
echo '<tr bgcolor="#ffffff">
<td align="center">'.$row["DateUploaded"].'</td>
<td align="center">'.$row["Title"].'</td>
<td align="center">
  <A href="NewsUpdate.php?id="><img src="images/0013-pen.gif" width="16" height="16" alt="" border="0"></A>&nbsp;&nbsp;&nbsp;
  <a href="NewsManage.php?do=del&id=" return false;"><img src="images/1001-cancel16.gif" width="16" height="16" alt="" border="0"></a>
</td>
</tr>';
}
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T13:52:45.880

在包含数据的行之前开始 while 循环，然后立即结束。

```
<table align="center" cellSpacing=0 cellPadding=2 border="0" width="100%">
    <!-- header row here -->

    <?php 
        $alterColor = true;
        while ($row = mssql_fetch_array($result)) {  // start while 

        // alternating bg color for rows
        $color = ($alterColor) ? "#fff" : "#eee";  
        $alterColor = !$alterColor;
    ?>
    <tr bgcolor="<?php echo $color; ?>">

         <td align="center"><?php echo $row["DateUploaded"]; ?></td>
         <td align="center"><?php echo $row["Title"]; ?></td>
         <td align="center">
             <A href="NewsUpdate.php?id="><img src="images/0013-pen.gif" width="16" height="16" alt="" border="0"></A>&nbsp;&nbsp;&nbsp;
             <a href="NewsManage.php?do=del&id=" return false;">
                 <img src="images/1001-cancel16.gif" width="16" height="16" alt="" border="0">
             </a>

         </td>

     </tr>
     <?php } // end while ?>
</table> 
```

PS 其中一个似乎是额外的，它们是否用于交替颜色或类似的东西：

```
 <tr bgcolor="#eeeeee">

 <tr bgcolor="#ffffff"> 
```

你不应该直接在 tr 中有一个 tr 。

# java - Pattern.compile("(.*?):")

> ID：12248793
> 
> 赞同：1
> 
> 时间：2012-09-03T13:25:28.513
> 
> 标签：java, regex

我试图理解以下代码：

```
Pattern.compile("(.*?):") 
```

我已经对它的含义进行了一些[研究](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)，但我不太明白：

根据 java 文档， * 表示 0 次或更多次，而 ? 意味着一次或根本没有。

另外，'：'是什么意思？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T13:28:22.453

这称为*勉强量词*。星号和问号`*?`一起表示“零次或多次，匹配的输入字符数不超过需要的字符数”。这就是阻止点`.`表达式匹配输入中后续冒号`:`的原因。

匹配相同序列的更好表达式是`[^:]*:`，因为它可以避免回溯。这是[一篇解释原因的文章的链接](http://blog.stevenlevithan.com/archives/greedy-lazy-performance)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T13:28:18.087

之后的`?`贪心算子，如`+`or`*`将使算子不贪心。如果没有`?`，该正则表达式将继续匹配它找到的所有字符，包括`:`.

事实上，正则表达式将匹配出现在分号 ( `:`) 之前的任何字符串。在这种情况下，分号不是特殊字符。分号之前的内容将被放入一个组中，以后可以通过`Matcher`对象访问该组。

此代码片段有望使事情更清楚：

```
 String str = "Hello: This is a Test:";
    Pattern p1 = Pattern.compile("(.*?):");
    Pattern p2 = Pattern.compile("(.*):");

    Matcher m1 = p1.matcher(str);
    if (m1.find())
    {
        System.out.println(m1.group(1));            
    }

    Matcher m2 = p2.matcher(str);
    if (m2.find())
    {
        System.out.println(m2.group(1));
    } 
```

产量：

> 你好
> 
> 你好：这是一个测试

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T13:32:54.563

这个正则表达式的意思是`anthing ending with :`或者可以理解为`anthing till first :`。

这里的“：”没有任何意义。但它符合模式`anystring:`将匹配此模式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T13:29:31.940

我觉得 '？' 是多余的，将应用于'.*'。

':' 在正则表达式中没有任何特殊含义，将与字符串中的字符匹配。

编辑： dasblinkenlight 是对的，如果贪婪，正则表达式将尝试尽可能多地匹配，他的建议也是正确的。

我找到了一个列出贪婪与不情愿的链接： “贪婪[”和“不情愿”正则表达式量词有什么区别？](https://stackoverflow.com/questions/1139171/when-it-comes-to-regex-what-is-the-difference-between-greedy-and-reluctant)

# extjs - 如何在 ExtJS 4.1 中禁用网格中的某些行

> ID：12248802
> 
> 赞同：1
> 
> 时间：2012-09-03T13:26:04.447
> 
> 标签：extjs, extjs4.1

我想禁用整行、所有文本内容、操作列、编辑器等。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T13:49:20.397

不太可能。我的意思是它不在框架中。您可以将记录 (=row) 标记为禁用。您可以将函数 setDisabled/getDisabled 添加到商店的模型中。然后你可以调用类似的东西：

`grid.getStore().getAt(0).setDisabled(true)`第一次记录

模型功能：

```
function setDisabled( state ){
    var me = this;
    me.disabled = state;
    me.fireEvent('disabled', state);
}

function getDisabled(){
    return this.disabled;
} 
```

现在您可以监听该事件，获取禁用/启用状态。如果它被禁用，您可以为该行添加一个类 ( `addRowCls( )`- `removeRowCls( )`) 以获得视觉效果。您可以监听编辑事件。然后您可以在记录被禁用时阻止编辑。

不是真正的开箱即用解决方案，但使用一点想象力，你就会到达那里！希望能帮助到你 ;）

# css - 具有特定名称和值的 css 定义的正则表达式

> ID：12248808
> 
> 赞同：0
> 
> 时间：2012-09-03T13:26:10.990
> 
> 标签：css, regex

我必须匹配名称为“test”和颜色：灰色的所有 css 定义。例如：

`a.test { color:grey; }` 但也 `.test { color:grey;}` 或`a.test:affter, a.test { font-size: 10px; color: gray;}`

所以它必须照顾多个`\s\r\n`和其他人。

我已经得到的：

```
test(\s|\r|\n|[:a-zA-Z()0-9])*\{([a-zA-Z:,\s\n\r-0-1;]*)color[\s\n\r:]*gray([a-zA-Z:,\s\n\r-0-1;]*)\} 
```

但它在某些地方不起作用：[http](http://regexr.com?32191) ://regexr.com?32191 。

请帮忙 ：）

* * *

# @nhahtdh 的解决方案，最适合我

`\.test[:a-zA-Z()0-9\s.,]*\{[a-zA-Z:,\s0-1;-]*color[\s:]*gray([a-zA-Z:,\s0-1;-]*‌​)\}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:35:18.977

此正则表达式匹配您的测试用例。

```
[^\r]*\.test(\s|\r|\n|[:a-zA-Z()0-9])?[^{]*\{([a-zA-Z:,\s\n\r-0-1;]*)color[\s\n\r:]*gray([a-zA-Z:,\s\n\r-0-1;]*)\} 
```

[http://regexr.com?32197](http://regexr.com?32197)

不过这个问题要复杂得多。在不同的上下文中可能存在任意字符，例如 url、过滤器等。只要您只需要匹配这些非常具体的情况，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:37:27.680

我做了一个相当简单的：

```
[^{]*\.test(?:{|[ :.][^{]*{)[^}]*color[ \n\r]*:[ \n\r]*gray *;[^}]*} 
```

这应该符合您的规范，但不会捕获任何 CSS 错误。

[http://regexr.com?321ah](http://regexr.com?321ah)

# html - Css menu assistance, dropdown issue

> ID：12248821
> 
> 赞同：0
> 
> 时间：2012-09-03T13:27:00.083
> 
> 标签：html, css

Ok hey guys. So what I try to acheive is to have a menu in the topnav of my site and when hovring the mouse over to show some stuff in a list under it.

so far I'm working on local on a test html file until I get it working. so what i got so far is this menu:

```
<ul id="menu">
<li><a href="#">Notifications</a>
    <ul>
        <li id="foot-notify-954>
            <a href="#" class="delete" onclick="deleteNotification('Delete this item?', 954);return false;">X</a><a href="http://test.com/testing">testing</a> left a comment for your <a href="http://test.com/member/174/blog/view/28/">blog</a> 22 hours ago
        </li>
        <li id="foot-notify-953>
            <a href="#" class="delete" onclick="deleteNotification('Delete this item?', 953);return false;">X</a>
            <p><a href="http://test.com/testing">testing</a> left a comment for your <a href="http://test.com/member/174/blog/view/28/">blog</a> <span>22 hours ago</span></p>
        </li>
    </ul>
</li> 
```

and my css code:

```
ul {
    font-family: Arial, Verdana;
    font-size: 14px;
    margin: 0;
    padding: 0;
    list-style: none;
}
ul li {
    display: block;
    position: relative;
    float: left;
}
li ul { display: none }
ul li a {
    display: block;
    text-decoration: none;
    color: #ffffff;
    border-top: 1px solid #ffffff;
    padding: 5px 15px 5px 15px;
    background: #2C5463;
    margin-left: 1px;
    white-space: nowrap;
}
ul li a:hover { background: #617F8A }
li:hover ul {
    display: block;
    position: absolute;
}
li:hover li {
    float: none;
    font-size: 11px;
}
li:hover a { background: #617F8A }
li:hover li a:hover { background: #95A9B1 } 
```

I think the problem is that I'm having more than 1 `<a>` hyperlink inside the notifications `<li>` id like each li notification to show in 1 line, as in the format, the X button at the start to remove it then the notification itself.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:03:36.410

您的问题似乎是错误的代码格式。[这是您的代码的干净且经过编辑的版本。](http://jsbin.com/emowir/11/edit)代码“破坏”是 CSS 格式的问题。使用 inline-blocks 而不是 blocks 有助于使事物正确排列，并将背景样式转换为 the`<li>`而不是`<a>`使它看起来更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:33:26.027

首先，您必须检查 html 语法：

列表应如下[所示](http://www.w3schools.com/tags/tag_ul.asp)：

```
<ul>
  <li>Coffee</li>
  <li>Tea</li>
  <li><a href='#'>Milk</a></li>
</ul> 
```

此工具可帮助您找到错误（红色突出显示）：http: [//jsbin.com/emowir/1/edit](http://jsbin.com/emowir/1/edit)

* * *

这是您的示例：

```
<ul id="menu">
  <!-- type 1: NOT drop down-->
  <li><a href="">Home</a></li>

 <!--type 2: drop down-->
  <li><a href="">About Us</a>
    <ul>
      <li><a href="">The Team</a></li>
      <li><a href="">History</a></li>
      <li><a href="">Vision</a></li>
    </ul>
  </li>
</ul> 
```

你想在哪里插入什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:50:41.307

您的问题如下：

```
ul li a {
    display: block; 
```

这使您插入到列表中的每个链接都成为一个块。尝试开始浮动我从你的代码制作的这个例子中的东西，[http://jsfiddle.net/xN8sc/1/](http://jsfiddle.net/xN8sc/1/)

# php - jQuery插件在jquery hash加载页面上不起作用

> ID：12248827
> 
> 赞同：0
> 
> 时间：2012-09-03T13:27:34.230
> 
> 标签：php, jquery, jquery-plugins

我的 php 页面加载了哈希，该页面带有 jquery 插件 dataTable，
插件已加载但无法正常工作，如果我重新加载页面，则它正在工作。..但不适用于加载了散列的 jquery ajax。
PHP页面包含以下加载的脚本：

```
<link rel="stylesheet" media="screen" href="lib/datatables/css/vpad.css" />
<script type="text/javascript" src="js/jquery.dataTables.js"></script> 
<script type="text/javascript"> 
    $(document).ready(function() {
        $('#example').dataTable( {
            "sPaginationType": "full_numbers"
        } );
    } );
</script> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-03T13:31:42.597

好的，做一些像这样的事情，
把这段代码放在你的**ajax 加载页面**中......

```
<script type="text/javascript"> 
        $('#example').dataTable( {
            "sPaginationType": "full_numbers"
        } );
</script> 
```

**这是因为数据表在实时加载的页面中不起作用**。还有其他很多方法可以做到这一点，但这是简单易行的 100% 工作

# php - How to manage mail system using cpanel api in PHP

> ID：12248831
> 
> 赞同：0
> 
> 时间：2012-09-03T13:28:09.160
> 
> 标签：php, api, cpanel, webmail

I need to write PHP code, using the cpanel api to be able to manage emails. So I will give clients a URL and login and they will be able to manage there own emails.

If any one have any idea please share this here.

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-30T21:51:41.550

这可能为时已晚，但访问 www.example.com/webmail（或 webmail.example.com，如果以这种方式配置）不能直接解决问题吗？

# c# - 如何检查所有任务是否已正确完成？

> ID：12248832
> 
> 赞同：8
> 
> 时间：2012-09-03T13:28:10.457
> 
> 标签：c#, multithreading, .net-4.0, task, task-parallel-library

我的代码中有以下几行：

```
 var taskA = Task.Factory.StartNew(WorkA);
    var taskB = Task.Factory.StartNew(WorkB);
    var allTasks = new[] { taskA, taskB };

    Task.Factory.ContinueWhenAll(allTasks, tasks => FinalWork(), TaskContinuationOptions.OnlyOnRanToCompletion); 
```

但是当我运行它时，我收到以下错误：

> 排除多个任务的延续的特定延续类型是无效的。

这是由选项**TaskContinuationOptions.OnlyOnRanToCompletion**引起的。

我的问题是如何检查所有任务是否已正确完成工作（所有任务状态均为**RanToCompletion**）然后执行**FinalWork()**？同时，应用程序执行其他任务。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T08:26:22.280

根据@Peter Ritchie 和@Ben McDougall 的回答，我找到了解决方案。我通过删除冗余变量修改了我的`tasks`代码`TaskContinuationOptions.OnlyOnRanToCompletion`

```
var taskA = Task.Factory.StartNew(WorkA);
var taskB = Task.Factory.StartNew(WorkB);
var allTasks = new[] { taskA, taskB };
Task.Factory.ContinueWhenAll(allTasks, FinalWork); 
```

在哪里`FinalWork`：

```
private static void FinalWork(Task[] tasks)
{
   if (tasks.All(t => t.Status == TaskStatus.RanToCompletion))
   {
        // do "some work"
   }
} 
```

如果所有人`tasks`都有 status `RanToCompletion`，**“一些工作”**将会完成。它会在所有任务完成后立即执行，不会阻塞主任务。如果我至少取消其中一项任务，则什么也做不了。

或者，您可以这样做，

```
var taskA = Task.Factory.StartNew(WorkA);
var taskB = Task.Factory.StartNew(WorkB);
var allTasks = new[] { taskA, taskB };
var continuedTask = Task.WhenAll(allTasks).ContinueWith((antecedent) => { /*Do Work*/ }, TaskContinuationOptions.OnlyOnRanToCompletion)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T14:24:04.027

您没有提供任何代码来处理任何运行完成的任务（您的`tasks`变量被忽略）。如果您简单地删除，您会得到相同的结果`TaskContinuationOptions.OnlyOnRanToCompletion`。即，如果您*可以*使用您的延续`ContinueWhenAll`，`TaskContinuationOptions.OnlyOnRanToCompletion`则在所有任务完成或失败之前不会被调用。如果您只对已完成的任务不做任何事情，那与`Task.Factory.ContinueWhenAll(allTasks, tasks => FinalWork());`

如果您想做更具体的事情，请提供详细信息，以便有人可以帮助您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T15:19:04.670

要回答您提出的实际问题：

> 我的问题是如何检查所有任务是否正常完成（所有任务状态都是 RanToCompletion）然后执行 FinalWork()？同时，应用程序执行其他任务。

至少这是我读到的问题检查以下代码：

```
 var taskA = Task.Factory.StartNew(WorkA);
    var taskB = Task.Factory.StartNew(WorkB);
    var allTasks = new[] { taskA, taskB };

    taskA.Wait();
    taskB.Wait();

    if (taskA.Status == TaskStatus.RanToCompletion && taskB.Status == TaskStatus.RanToCompletion)
        Task.Factory.ContinueWhenAll(allTasks, tasks => FinalWork());
    else
        //do something 
```

如果您确实是这个意思，那么您实际上是用您的问题自己回答了这个问题。

# login - Having problems when trying to login to a website using C++/cli

> ID：12248833
> 
> 赞同：3
> 
> 时间：2012-09-03T13:28:11.867
> 
> 标签：login, web, c++-cli, postdata

I've been roughly searching over the internet for some answers to my problem, but I still couldn't figure out how to log in to a website properly.

Firstly, I'm going to explain what I've done until this moment.

» I opened this website: [http://side.utad.pt/cursos/einformatica/](http://side.utad.pt/cursos/einformatica/) upon which I want to log in.

» After opening its souce code, I found the Url that the Login form posts to is:

[https://side.utad.pt/side-secure3/login.pl](https://side.utad.pt/side-secure3/login.pl)

I tried to open it but an Internal Error came out so I tried to access that url without /login.pl instead but i don't have permission to. As I can't get this Url working, I thought about using the first link itself.

» By using tamper data extension(Firefox) I found that there are 3 post arguments: sessionid, username and password. Username and password are input by the user himself.

To get sessionid, I simply searched for it inside source code and took it from there:

```
String^ formUrl = "http://side.utad.pt/cursos/einformatica/"; 
String^ pageSource;

WebClient^ client = gcnew WebClient();
pageSource = client->DownloadString(formUrl);
delete client;
client = nullptr;int index = pageSource->IndexOf("sessionid");
int startIndex = index + 34;
String^ _sessionid = pageSource->Substring(startIndex, 32); 
```

Until here, everything was fine apart from the Url problem.

» Started formatting all the data gathered(which I believe is the correct way):

```
String^ formParams; 
// format data
formParams = "sessionid="+ _sessionid+"&username="+username+"&password="+password; 
```

» After that, I started working with the "body" of the code:

```
WebRequest^ req = WebRequest::Create(formUrl);
// encode our data
array<Byte>^ bytes = System::Text::Encoding::ASCII->GetBytes(formParams);

req->ContentType = "application/x-www-form-urlencoded";
req->Method = "POST";
req->ContentLength = bytes->Length;

Stream^ os = req->GetRequestStream();
os->Write(bytes,0,bytes->Length);
os->Close(); 
```

Am I doing it correctly until here?

» I wanted to check if i'm logged in or not, so I thought about getting another source code, but this time on pos-login page(can be accessed without logging in but we're always carried to that page after logging in):

```
// this code is added below os->Close();
WebResponse^ resp = req->GetResponse(); 
String^ cookieHeader;
cookieHeader = resp->Headers["Set-cookie"];

WebRequest^ getRequest = WebRequest::Create("http://side.utad.pt/cursos/einformatica/principal"); // Exception 1
getRequest->Headers->Add("Cookie", cookieHeader);
WebResponse^ getResponse = getRequest->GetResponse();
StreamReader^ sr = gcnew StreamReader(getRequest->GetRequestStream()); // Exception 2
pageSource = ""; // reset
pageSource = sr->ReadToEnd(); 
```

Firstly, the first line does raise an exception - most of the times - but I don't know the cause: 'The server commited a protocol violation Section=ResponseStatusLine'

Secondly and lastly, when that line doesn't raise an exception, this does(cannot send a content-body with this verb-type)

```
StreamReader^ sr = gcnew StreamReader(getRequest->GetRequestStream()); 
```

Any ideas to get this working?

I think that the problem here is related to the cookies. I might have not saved them properly..

Thanks

# java - Switch 语句并在静态块中初始化最终静态变量

> ID：12248840
> 
> 赞同：6
> 
> 时间：2012-09-03T13:28:26.797
> 
> 标签：java, static, switch-statement, final

对于我的项目，我将许多对象分为 10 个类。每个对象都可以执行一些操作，这些操作必须事先注册（每个类只注册一次操作）。为每个类定义的操作表示为`public final static`整数。我想在运行时动态分配操作的ID（每个类的操作数目前约为20，并且数量会增加）。

问题出现了，当执行操作时，我必须找到正在执行的操作（我使用 switch 语句）。

这是一个简单的工作代码示例：

```
public class Test {
    final static int foo = 8;
    final static int bar = 10;

    public static void main(String[] args)
    {
        int x=10;

        switch(x)
        {
        case foo:
            System.out.println("FOO");
            break;
        case bar:
            System.out.println("BAR");
            break;
        default:
            System.out.println("PROBLEM");
        }
    }
} 
```

此代码通常会编译并显示`BAR`.

但是这个稍微转换的代码会产生一个`Unresolved compilation problem`with `case expressions must be constant expressions`。

```
public class Test {
    final static int foo;
    final static int bar;

    static
    {
        foo=8;
        bar=10;
    }
    public static void main(String[] args)
    {
        int x=10;

        switch(x)
        {
        case foo:
            System.out.println("FOO");
            break;
        case bar:
            System.out.println("BAR");
            break;
        default:
            System.out.println("PROBLEM");
        }
    }
} 
```

这些代码不应该实际工作和编译吗？在解决此问题之前，我无法动态执行任何操作？或者还有其他方法吗？

谢谢

编辑：由于使用枚举的想法，我想解决这个问题：

```
public class Test {
  enum OperationSet1 {
    FOO, BAR, THESE, ARE, ALL, DIFFERENT, OPERATIONS
  }
  enum OperationSet2 {
    FOO, BAR, NOW, SOME, OTHER, OPS
  }

  public static void main(String[] args) {
    OperationSet1[] ops = new OperationSet1[10];
    for (int i=0; i<ops.length; i++)
      ops[i] = OperationSet1.values()[(int)(Math.random()*OperationSet1.values().length)];

    OperationSet2[] ops2 = new OperationSet2[10];
    for (int i=0; i<ops.length; i++)
      ops[i] = OperationSet2.values()[(int)(Math.random()*OperationSet2.values().length)];

    for (OperationSet1 op:ops)
      handleOperation(op);
  }
    for (OperationSet2 op:ops2)
      handleOperation(op);
  }
  public static void handleOperation(Object? op) {
    switch(op) {
        /**code to handle**/
    }
  }
} 
```

我们有两个枚举，我想要一个处理函数（最好使用 switch 语句），它可以处理这两个枚举中出现的所有情况。

EDIT2：所以这里。我有 10 个类`(C1, C2, ..., C10)`和这些类的大约 40 个对象。这些对象中有些是所谓的所有者，有些是共享的。每个共享对象都有一个所有者（这是基本关系——它与 java 继承没有任何关系）。

现在每个共享对象都会`obj`不时发生变化，这`obj`需要询问其所有者`own`是否可能发生变化（这只是其中一种操作）然后它会发生变化（并再次通知所有者）。对象`obj`还有一组他可以执行的预定义操作，`C1`由`enum`. 因此`own`必须有一个处理类的对象操作的函数`C1`。现在我们有一个`obj2`属于类的对象`C2`，具有不同的操作集和相同的所有者`own`。`obj`只能执行 中定义的操作，`C1`并且`obj2`只能执行 中定义的操作`C2`。

如何概括处理函数，以便将其编写整齐？我什至应该使用枚举吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T13:33:30.630

您只能在 switch 语句中使用编译时已知的常量。这是因为开关代码是静态检查和构建的。

在第二种情况下，你可以做

```
static
{
    foo=8;
    bar=foo;
} 
```

但由于这些值直到运行时才知道，因此无法构建 switch 语句或检查它是否正确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T13:34:44.803

`static variables or blocks or methods`在类初始化（运行时）时加载。

您的问题是在编译时，远在加载/初始化类之前。所以字段是最终的并且它们没有被初始化（当然在编译时）。

在第一种情况下，`foo`和的值`bar`在编译时是已知的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:49:20.653

我建议为此使用枚举。这样就不再需要 ID 处理了。

```
public class Test {
  enum Operation {
    FOO, BAR, THESE, ARE, ALL, DIFFERENT, OPERATIONS
  }

  public static void main(String[] args) {
    Operation[] ops = new Operation[10];
    for (int i=0; i<ops.length; i++)
      ops[i] = Operation.values()[(int)(Math.random()*Operation.values().length)];

    for (Operation op:ops)
      handleOperation(op);
  }

  public static void handleOperation(Operation op) {
    switch(op) {
    case FOO:
      System.out.println("FOO");
      break;
    case BAR:
      System.out.println("BAR");
      break;
    case THESE:
      System.out.println("THESE");
      break;
    case ARE:
      System.out.println("ARE");
      break;
    case ALL:
      System.out.println("ALL");
      break;
    case DIFFERENT:
      System.out.println("DIFFERENT");
      break;
    case OPERATIONS:
      System.out.println("OPERATIONS");
      break;
    default:
      System.out.println("PROBLEM");
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-16T10:08:29.583

或者简单地使用 if-elseif 案例：

```
private final static int ONE = 1;
private final static int TWO = 2;

public static void main(String[] args) {
int value = 1;

  if(value==ONE){

  }
  else if(value==TWO){

  } 
```

}

# php - Sorting zend object

> ID：12248842
> 
> 赞同：-1
> 
> 时间：2012-09-03T13:28:35.990
> 
> 标签：php, zend-framework, sorting

When I do print_r($this->paginator); I get:

```
> Zend_Paginator Object ( [_cacheEnabled:protected] => 1
> [_adapter:protected] => Zend_Paginator_Adapter_DbSelect Object (
> [_countSelect:protected] => Zend_Db_Select Object ( [_bind:protected]
> => Array ( ) [_adapter:protected] => Zend_Db_Adapter_Pdo_Mysql Object ( [_pdoType:protected] => mysql [_numericDataTypes:protected] => Array
> ( [0] => 0 [1] => 1 [2] => 2 [INT] => 0 [INTEGER] => 0 [MEDIUMINT] =>
> 0 [SMALLINT] => 0 [TINYINT] => 0 [BIGINT] => 1 [SERIAL] => 1 [DEC] =>
> 2 [DECIMAL] => 2 [DOUBLE] => 2 [DOUBLE PRECISION] => 2 [FIXED] => 2
> [FLOAT] => 2 ) [_defaultStmtClass:protected] => Zend_Db_Statement_Pdo
> [_config:protected] => Array ( [host] => localhost [username] =>
> zagadkikinowe [password] => rdh2jhyTs [dbname] => zagadkikinowe
> [charset] => utf8 [persistent] => [options] => Array ( [caseFolding]
> => 0 [autoQuoteIdentifiers] => 1 ) [driver_options] => Array ( [1002] => SET NAMES 'utf8' ) ) [_fetchMode:protected] => 2 [_profiler:protected] => Zend_Db_Profiler Object (
> [_queryProfiles:protected] => Array ( ) [_enabled:protected] =>
> [_filterElapsedSecs:protected] => [_filterTypes:protected] => )
> [_defaultProfilerClass:protected] => Zend_Db_Profiler
> [_connection:protected] => PDO Object ( ) [_caseFolding:protected] =>
> 0 [_autoQuoteIdentifiers:protected] => 1
> [_allowSerialization:protected] => 1
> [_autoReconnectOnUnserialize:protected] => ) [_parts:protected] =>
> Array ( [distinct] => [columns] => Array ( [0] => Array ( [0] =>
> user_answer [1] => Zend_Db_Expr Object ( [_expression:protected] =>
> COUNT(1) AS `zend_paginator_row_count` ) [2] => ) ) [union] => Array (
> ) [from] => Array ( [user_answer] => Array ( [joinType] => from
> [schema] => [tableName] => user_answer [joinCondition] => ) ) [where]
> => Array ( [0] => (edition_id='22') [1] => AND (answer_type = "close") ) [group] => Array ( ) [having] => Array ( ) [order] => Array ( )
> [limitcount] => [limitoffset] => [forupdate] => )
> [_tableCols:protected] => Array ( ) ) [_select:protected] =>
> Zend_Db_Select Object ( [_bind:protected] => Array ( )
> [_adapter:protected] => Zend_Db_Adapter_Pdo_Mysql Object (
> [_pdoType:protected] => mysql [_numericDataTypes:protected] => Array (
> [0] => 0 [1] => 1 [2] => 2 [INT] => 0 [INTEGER] => 0 [MEDIUMINT] => 0
> [SMALLINT] => 0 [TINYINT] => 0 [BIGINT] => 1 [SERIAL] => 1 [DEC] => 2
> [DECIMAL] => 2 [DOUBLE] => 2 [DOUBLE PRECISION] => 2 [FIXED] => 2
> [FLOAT] => 2 ) [_defaultStmtClass:protected] => Zend_Db_Statement_Pdo
> [_config:protected] => Array ( [host] => localhost [username] =>
> zagadkikinowe [password] => rdh2jhyTs [dbname] => zagadkikinowe
> [charset] => utf8 [persistent] => [options] => Array ( [caseFolding]
> => 0 [autoQuoteIdentifiers] => 1 ) [driver_options] => Array ( [1002] => SET NAMES 'utf8' ) ) [_fetchMode:protected] => 2 [_profiler:protected] => Zend_Db_Profiler Object (
> [_queryProfiles:protected] => Array ( ) [_enabled:protected] =>
> [_filterElapsedSecs:protected] => [_filterTypes:protected] => )
> [_defaultProfilerClass:protected] => Zend_Db_Profiler
> [_connection:protected] => PDO Object ( ) [_caseFolding:protected] =>
> 0 [_autoQuoteIdentifiers:protected] => 1
> [_allowSerialization:protected] => 1
> [_autoReconnectOnUnserialize:protected] => ) [_parts:protected] =>
> Array ( [distinct] => [columns] => Array ( [0] => Array ( [0] =>
> user_answer [1] => * [2] => ) ) [union] => Array ( ) [from] => Array (
> [user_answer] => Array ( [joinType] => from [schema] => [tableName] =>
> user_answer [joinCondition] => ) ) [where] => Array ( [0] =>
> (edition_id='22') [1] => AND (answer_type = "close") ) [group] =>
> Array ( ) [having] => Array ( ) [order] => Array ( [0] => Array ( [0]
> => time [1] => ASC ) ) [limitcount] => 25 [limitoffset] => 0 [forupdate] => ) [_tableCols:protected] => Array ( ) )
> [_rowCount:protected] => 6 ) [_currentItemCount:protected] => 6
> [_currentItems:protected] => ArrayIterator Object ( [0] => Array (
> [id] => 9611 [edition_id] => 22 [uid] => 1429046328 [city_id] => 41
> [time] => 1346330264 [answer] => [answer_type] => close [winner] => 0
> [canwin] => 1 [name] => xxx ) [1] => Array ( [id] => 9613
> [edition_id] => 22 [uid] => 100002892496926 [city_id] => 41 [time] =>
> 1346330506 [answer] => [answer_type] => close [winner] => 0 [canwin]
> => 1 [name] => xxx ) [2] => Array ( [id] => 9618 [edition_id] => 22 [uid] => 1321291427 [city_id] => 41 [time] =>
> 1346352999 [answer] => [answer_type] => close [winner] => 0 [canwin]
> => 1 [name] => xxxi ) [3] => Array ( [id] => 9648 [edition_id] => 22 [uid] => 100002256926555 [city_id] => 41 [time] =>
> 1346673357 [answer] => [answer_type] => close [winner] => 0 [canwin]
> => 1 [name] => xxx ) [4] => Array ( [id] => 9649 [edition_id] => 22 [uid] => 1362180726 [city_id] => 41 [time] =>
> 1346674240 [answer] => [answer_type] => close [winner] => 0 [canwin]
> => 1 [name] => xxxk ) [5] => Array ( [id] => 9650 [edition_id] => 22 [uid] => 1047795693 [city_id] => 41 [time] =>
> 1346675955 [answer] => [answer_type] => close [winner] => 0 [canwin]
> => 0 [name] => xxx ) ) [_currentPageNumber:protected] => 1 [_filter:protected] => [_itemCountPerPage:protected] => 25 [_pageCount:protected] => 1 [_pageRange:protected] => 10
> [_pages:protected] => stdClass Object ( [pageCount] => 1
> [itemCountPerPage] => 25 [first] => 1 [current] => 1 [last] => 1
> [pagesInRange] => Array ( [1] => 1 ) [firstPageInRange] => 1
> [lastPageInRange] => 1 [currentItemCount] => 6 [totalItemCount] => 6
> [firstItemNumber] => 1 [lastItemNumber] => 6 ) [_view:protected] => ) 
```

And I need to sort it asc by [time] where [canwin]==1 How to do it? I'm not good at zend, and it takes me a lot of hours, and still and don't have idea how to do it

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:25:04.783

Zend_Paginator 使用一个 db 适配器，所以你可以在适配器中添加一个 order() 语句：

```
$adapter = new Zend_Paginator_Adapter_DbSelect($db->select()->from('posts'));
    $adapter->setRowCount(
        $db->select()
           ->from(
                'item_counts',
                array(
                   Zend_Paginator_Adapter_DbSelect::ROW_COUNT_COLUMN => 'post_count'
                )
             )->order(...order criteria here...)
    );

    $paginator = new Zend_Paginator($adapter); 
```

# jquery - Jquery 选项卡 + aspx 网格视图

> ID：12248845
> 
> 赞同：0
> 
> 时间：2012-09-03T13:28:41.907
> 
> 标签：jquery, asp.net, jquery-ui

我正在尝试在 aspx 中使用 jquery ui 主题（选项卡）。$(function () { $('#tabs').tabs(); });

```
<form id="form1" runat="server">    
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">tab 1</a></li>
        <li><a href="#tabs-2">tab s2</a></li>
        <li><a href="#tabs-3">tab 3</a></li>
    </ul>
    <div id="tabs-1">
        tab-1
    </div>
    <div id="tabs-2">
        tab-2
    </div>
    <div id="tabs-3">
        Gridview is here
    <asp:Button ID="Button2" runat="server" Height="31px" Text="Button" 
             onclick="Button2_Click" />
    </div>
    </div>
    </form> 
```

现在我正在调用函数 button2_click 在 Gridview 上执行一些操作，但我收到错误 Control 'GridView1' of type 'GridView' must be placed inside a form tag with runat=server

```
protected void Button2_Click(object sender, EventArgs e)
    {
        ExportToExcel(GridView1, "HElloWorld");
    }
    private void ExportToExcel(GridView gv, string filename)
    {
        Response.Clear();
        Response.Buffer = true;
        Response.AddHeader("content-disposition", "attachment;filename=" + filename + ".xls");

        Response.Charset = "";

        Response.ContentType = "application/vnd.ms-excel";

        StringWriter sw = new StringWriter();

        HtmlTextWriter hw = new HtmlTextWriter(sw);

        gv.RenderControl(hw);

        string style = @"<style> .textmode { mso-number-format:\@; } </style>";

        Response.Write(style);
        //Response.Write(GetMessage());
        Response.Output.Write(sw.ToString());
        // Response.Write(GetFooter());
        Response.Flush();

        Response.End();

    } 
```

gv.RenderControl(hw) 出现错误；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:31:28.150

那是因为您缺少一个 div 结束标记。放在`</div>`前面`</form>`，它应该可以工作。

谷歌搜索得到我这个，只需重写方法 Page.VerifyRenderingInServerForm 方法，如下：

`public override void VerifyRenderingInServerForm(Control control) { return; }`

就是这样。您将摆脱该错误...

# c# - Send Message GCM from C#

> ID：12248846
> 
> 赞同：0
> 
> 时间：2012-09-03T13:28:43.903
> 
> 标签：c#, android, google-cloud-messaging

I want to create a C# application to send a little message to my Android device.

I've found [this article](http://labs.distriqt.com/post/1223).

For first I've make a win form application and include the functions of the article, after I have registed an `API KEY`.

I've replaced the `API KEY` and `ID` project respectively:

Key for browser apps (with referers) with `"YOUR_BROWSER_API_KEY"` and `"DEVICE_REGISTRATION_ID"` with the code that I received from the link:

```
https://code.google.com/apis/console/#project:**code**:access 
```

The project compiles correctly but when I send data it is returning me the following error:

```
 {"multicast_id":9036041256003980435,"success":0,"failure":1,
"canonical_ids":0,"results":[{"error":"InvalidRegistration"}]} 
```

Can anyone help me?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-22T03:53:12.817

从您对问题的评论来看，您并不清楚您是否完全理解 Google Cloud Messaging 的用途：GCM 不会发送会在您的设备上自动弹出通知的消息（就像短信一样），GCM 会向您在设备上运行的应用程序，然后该应用程序使用它收到的数据弹出通知。

如果您尚未编写要在您的设备上运行的 Android 应用程序，您将无法使用 GCM 向其发送任何内容。

# wordpress - Displaying individual fields in Advanced Custom Fields Address Add On

> ID：12248848
> 
> 赞同：0
> 
> 时间：2012-09-03T13:28:50.333
> 
> 标签：wordpress, custom-fields

How do I only display individual fields in the ACF Address add on. For example I have three address lines but only want one to be output:

Address Line 1: Curtis Mayfield House
City: Newcastle Upon Tyne
Country: United Kingdom

And I just want to display Address Line 1: Curtis Mayfield House.

Any help would be much appreciated

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:24:26.083

您可以使用 get_post_meta 来做到这一点。以下内容为您提供每个字段的数组：

```
$address = get_post_meta(get_the_id(), 'your_acf_field', true); 
```

然后你可以使用：

```
echo  $address['city'] 
```

这显然需要在您的 wordpress 循环中。如果您想在循环之外使用它，只需输入帖子 ID 作为第一个参数：

```
$address = get_post_meta(76, 'your_acf_field', true); 
```

其中“76”是您帖子的 ID。希望这可以帮助。

# c# - 当我在 MVC 视图中单击图像时如何打开另一个页面

> ID：12248852
> 
> 赞同：0
> 
> 时间：2012-09-03T13:29:05.750
> 
> 标签：c#, javascript, asp.net-mvc, razor

我正在渲染我的数据视图，如下所示：

```
@foreach (var movieDetails in Model)
{
    <div class="sameLine" onMouseOver="focusDiv(this)"  id="c4" onmousewheel="moveFocus(event)" onclick="playMovie(this)">
            <table border ="1" class="contentTable">
                <tr>
                <td align="center">
                <img src = @movieDetails.Thumbnail alt = @movieDetails.Thumbnail class="imgStyle"/>
                <div class="tvShowPanel">
                    @movieDetails.Title
                </div>
                </td>
                </tr>
            </table>
      </div>
} 
```

当用户单击图像或包含图像的 div 时，我希望用户从当前页面导航到另一个页面，所以我使用 javascript 处理了这个问题，但之后没有得到任何提示：

```
function playMovie(obj) {
    alert("Image Clicked");
} 
```

另外请让我知道如何使用 playMovie 导航到其他页面？我应该将查询字符串 querystring 与 document.location 或 window.location 一起使用吗？

如果是这样，我如何将查询字符串从我的视图传递到 javascript？

当前应用类似于 Youtube，当您单击缩略图时，它应该导航到另一个页面并开始播放视频。

**编辑：**

MovieDetails 类如下：

```
public class MovieDetails
    {
        public string Title { get; set; }
        public string Thumbnail { get; set; }
        // public string URI { get; set; }
        public string Description { get; set; }
        public string MovieURI { get; set; }
        // public List<Response> Response { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:42:45.880

将您的`<img>`元素放在`<a>`元素中，然后您可以通过单击图像导航到任何您想要的地方。

```
@foreach (var movieDetails in Model)
{
    <div class="sameLine" onMouseOver="focusDiv(this)"  id="c4" onmousewheel="moveFocus(event)" onclick="playMovie(this)">
            <table border ="1" class="contentTable">
                <tr>
                <td align="center">
                <a href="@movieDetails.MovieURI">
                <img src = @movieDetails.Thumbnail alt = @movieDetails.Thumbnail class="imgStyle"/>
                <a/>
                <div class="tvShowPanel">
                    @movieDetails.Title
                </div>
                </td>
                </tr>
            </table>
      </div>
} 
```

# mysql - MySQL 未在子查询中使用 INDEX

> ID：12248853
> 
> 赞同：7
> 
> 时间：2012-09-03T13:29:07.033
> 
> 标签：mysql, join, indexing, group-by, subquery

[我有sqlfiddle](http://www.sqlfiddle.com/#!2/d67fc/9)中定义的这些表和查询。

首先，我的问题是将显示 LEFT JOINed 访问行与最新年份的人分组。我使用子查询解决了。

现在我的问题是该子查询没有使用`visits`表上定义的 INDEX。这导致我的查询几乎无限期地在每个大约有 15000 行的表上运行。

这是查询。目标是在访问表中列出每个人的最新（按年份）记录。

不幸的是，在大表上它变得非常缓慢，因为它没有在子查询中使用 INDEX。

```
SELECT *
FROM people
LEFT JOIN (
  SELECT *
  FROM visits
  ORDER BY visits.year DESC
) AS visits
ON people.id = visits.id_people
GROUP BY people.id 
```

有谁知道如何强制 MySQL 使用`visits`表上已经定义的 INDEX？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T13:39:32.917

您的查询：

```
SELECT *
FROM people
LEFT JOIN (
  SELECT *
  FROM visits
  ORDER BY visits.year DESC
) AS visits
ON people.id = visits.id_people
GROUP BY people.id; 
```

*   首先，使用非标准 SQL 语法（出现在`SELECT`列表中的项目不是`GROUP BY`子句的一部分，不是聚合函数并且不附加在分组项目上）。这可能会给出不确定（半随机）的结果。

*   其次，（为了避免不确定的结果）您`ORDER BY`在子查询中添加了一个子查询（非标准或非标准），MySQL 文档中的任何地方都没有记录它应该按预期工作。因此，它可能现在可以工作，但在不久的将来可能**无法**`ORDER BY`工作，当您升级到 MySQL 版本 X 时（优化器将足够聪明地理解派生表内部是多余的并且可以被消除）。

尝试使用此查询：

```
SELECT 
    p.*, v.*
FROM 
    people AS p
  LEFT JOIN 
        ( SELECT 
              id_people
            , MAX(year) AS year
          FROM
              visits
          GROUP BY
              id_people
         ) AS vm
      JOIN
          visits AS v
        ON  v.id_people = vm.id_people
        AND v.year = vm.year 
    ON  v.id_people = p.id; 
```

：[SQL小提琴](http://www.sqlfiddle.com/#!2/d67fc/16)

一个复合索引`(id_people, year)`将有助于提高效率。

* * *

一种不同的方法。如果您先将人员限制在合理的限制（例如 30 人）然后加入`visits`表格，则效果很好：

```
SELECT 
    p.*, v.*
FROM 
    ( SELECT *
      FROM people
      ORDER BY name
        LIMIT 30
    ) AS p
  LEFT JOIN 
    visits AS v
      ON  v.id_people = p.id
      AND v.year =
    ( SELECT 
          year
      FROM
          visits
      WHERE
          id_people = p.id
      ORDER BY
          year DESC
        LIMIT 1
     )  
ORDER BY name ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T13:41:18.547

当您只需要一个用于加入的表名时，为什么还要有一个子查询？

我也不清楚为什么您的查询中有一个`GROUP BY`子句。`GROUP BY`通常与`MAX`or之类的聚合函数一起使用`COUNT`，但您没有这些。

这个怎么样？它可能会解决您的问题。

```
 SELECT people.id, people.name, MAX(visits.year) year
      FROM people
      JOIN visits ON people.id = visits.id_people
  GROUP BY people.id, people.name 
```

如果您需要显示此人、最近一次访问以及最近一次访问的注释，您将不得不再次将访问表显式连接到摘要查询（虚拟表），就像这样。

```
SELECT a.id, a.name, a.year, v.note
  FROM (
         SELECT people.id, people.name, MAX(visits.year) year
          FROM people
          JOIN visits ON people.id = visits.id_people
      GROUP BY people.id, people.name
  )a
  JOIN visits v ON (a.id = v.id_people and a.year = v.year) 
```

去小提琴：[http ://www.sqlfiddle.com/#!2/d67fc/20/0](http://www.sqlfiddle.com/#!2/d67fc/20/0)

*如果您需要向从未*访问过的人展示一些东西，您应该尝试`JOIN`在我的声明中使用 切换项目`LEFT JOIN`。

正如其他人所写，`ORDER BY`子查询中的子句不是标准的，并且会产生不可预测的结果。在您的情况下，它使优化器感到困惑。

*编辑*：`GROUP BY`是一把大锤子。除非你需要，否则不要使用它。而且，除非您在查询中使用聚合函数，否则不要使用它。

请注意，如果您在最近一年的某个人的访问中拥有多行，则此查询将为该人生成多行，为该年的每次访问生成一行。如果您只需要每人一行，并且您不需要访问记录，那么第一个查询就可以解决问题。如果您在一年内对一个人进行了多次访问，而您只需要最近的一次，则必须确定哪一行是最新的。通常它将是具有最高 ID 号的那个，但只有您自己知道这一点。在这种情况下，我在您的小提琴中添加了另一个人。[http://www.sqlfiddle.com/#!2/4f644/2/0](http://www.sqlfiddle.com/#!2/4f644/2/0)

这是复杂的。但是：如果您的visits.id 编号是自动分配的并且它们*始终*按时间顺序排列，您可以简单地报告最高的访问id，并保证您将获得最近的一年。这将是一个非常有效的查询。

```
SELECT p.id, p.name, v.year, v.note
  FROM (
         SELECT id_people, max(id) id
          FROM visits
      GROUP BY id_people
  )m
  JOIN people p ON (p.id = m.id_people)
  JOIN visits v ON (m.id = v.id) 
```

[http://www.sqlfiddle.com/#!2/4f644/1/0](http://www.sqlfiddle.com/#!2/4f644/1/0) 但这不是您的示例设置方式。因此，您需要另一种方法来消除您最近访问的歧义，这样您每人只需获得一行。我们可以使用的唯一技巧是使用最大的 id 号。

因此，根据这个定义，我们需要从您的表中获取最新的 visit.id 编号列表。该查询使用 MAX(year)...GROUP BY(id_people) 嵌套在 MAX(id)...GROUP BY(id_people) 查询中来做到这一点。

```
 SELECT v.id_people,
         MAX(v.id) id
    FROM (
         SELECT id_people, 
                MAX(year) year
           FROM visits
          GROUP BY id_people
         )p
    JOIN visits v ON (p.id_people = v.id_people AND p.year = v.year)
   GROUP BY v.id_people 
```

整体查询（http://www.sqlfiddle.com/#!2/c2da2/1/0）是这样的。

```
SELECT p.id, p.name, v.year, v.note
  FROM (
      SELECT v.id_people,
             MAX(v.id) id
        FROM (
             SELECT id_people, 
                    MAX(year) year
               FROM visits
              GROUP BY id_people
             )p
        JOIN visits v ON (     p.id_people = v.id_people 
                           AND p.year = v.year)
       GROUP BY v.id_people
      )m
   JOIN people p ON (m.id_people = p.id)
   JOIN visits v ON (m.id = v.id) 
```

SQL 中的消歧是一项很难学习的事情，因为您需要一些时间来理解 DBMS 中的行没有固有顺序的想法。

# javascript - Javascript：如果冒号则删除最后一个字符

> ID：12248854
> 
> 赞同：67
> 
> 时间：2012-09-03T13:29:20.710
> 
> 标签：javascript, string, replace

Javascript 的相对新手，正在寻找一种方法来删除字符串的最后一个字符（如果它是冒号）。

我知道`myString = myString.replace('/^\\:/');`将在行首工作，但不知道如何交换`$`字符以更改到行尾……有人可以纠正吗？

谢谢

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-09-03T13:39:02.670

正则表达式文字 ( `/.../`) 不应位于字符串中。更正您的代码以删除字符串开头的冒号，您将获得：

```
myString = myString.replace(/^\:/, ''); 
```

要匹配字符串末尾的冒号，请将其放在`$`冒号之后而不是`^`之前：

```
myString = myString.replace(/\:$/, ''); 
```

您也可以使用纯字符串操作来做到这一点：

```
if (myString.charAt(myString.length - 1) == ':') {
  myString = myString.substr(0, myString.length - 1);
} 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-09-03T13:30:25.640

简单地尝试

```
myString = myString.replace(/:$/, ''); 
```

这将`:`在字符串末尾时删除

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:31:52.160

`$`需要位于正则表达式的末尾以匹配 EOL。

`/:$/`

# c - 向 sha256 openssl 添加盐？

> ID：12248855
> 
> 赞同：0
> 
> 时间：2012-09-03T13:29:27.840
> 
> 标签：c, hash, openssl

这个简单的代码接受用户输入并将给定字符串的 sha256 打印到标准输出。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <openssl/sha.h>

int main()
{
 SHA256_CTX context;
 unsigned char md[SHA256_DIGEST_LENGTH];
 char *input;
 printf("Watta hash: ");
 scanf("%m[^\n]%*c", &input);
 size_t length = strlen((const char*)input);
 int i;
 SHA256_Init(&context);
 SHA256_Update(&context, (unsigned char*)input, length);
 SHA256_Final(md, &context);
 for(i=0; i<SHA256_DIGEST_LENGTH; i++){
   printf("%02x", md[i]);
 }
 printf("\n");
 free(input);
 return 0;
} 
```

我的问题是：如何在这个哈希中添加盐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:31:28.633

`SHA256_Update()`在数据是所需盐的位置添加第二个调用。

# c# - 一键构建、打包、部署和附加到所有Sharpeoint进程？

> ID：12248862
> 
> 赞同：0
> 
> 时间：2012-09-03T13:29:36.547
> 
> 标签：c#, visual-studio-2010, sharepoint

我想知道是否可以使用 Visual Studio 或任何其他扩展来定制它

构建包部署（等待 iis 进程重新启动）附加到所有 sharpeoint 进程。

我今天在玩 vs，我发现有一个命令可以构建并附加到所有共享点进程。

但它需要在附加之前进行部署才能使其工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:56:28.490

您可以在 Visual Studio 中简单地按 F5，这将为您完成所有操作（撤回、部署和调试）。如果您需要更多，我建议您使用[CKSDEV](http://cksdev.codeplex.com/)我发现这真的很有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T18:49:43.777

是的，您可以在 Visual Studio 设置中更改共享点项目的部署过程。 **转到项目属性> Sharepoint 选项卡> 更改活动部署配置** ![在此处输入图像描述](../Images/20b663613945d14bae5c51117df42c7d.png)

# hibernate - 本机查询比 Hibernate 中的 HQL/Criteria 查询更快

> ID：12248863
> 
> 赞同：0
> 
> 时间：2012-09-03T13:29:36.837
> 
> 标签：hibernate, hql

我有一个每天都有分区的表。

当我通过 HQL/Criteria 使用查询时，在 Hibernate 中获得结果需要 240 秒。当我直接使用或通过 JDBC 连接使用时，相同的查询（由 Hibernate 创建的本机查询）需要 2 秒。

注意：本机查询从 postgres db（直接触发）花费了不到 2 秒的时间。

请回复可能是哪里的问题

这是具有命名查询的实体：

```
import java.io.Serializable;
import java.sql.Timestamp;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.Table;

@Entity
@Table(name = "sms_info")
@NamedQueries(value = { @NamedQuery(name = "smsInfoforMsisdn", query = "SELECT si FROM SmsInfo si WHERE msisdn = :msisdn and sendStatus IN (0,5) order by lastSmsTrialTime desc") })
public class SmsInfo implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @Column(name = "sms_id")
    private Integer smsId;
    @Column(name = "msisdn")
    private String msisdn;
    @Column(name = "vertical", length = 30)
    private String vertical;
    @Column(name = "sms_text", length = 1024)
    private String smsText;
    @Column(name = "sms_type", length = 255)
    private String smsType;

    @Column(name = "last_sms_trial_time")
    private Timestamp lastSmsTrialTime;

    @Column(name = "send_status")
    private Integer sendStatus;
    @Column(name = "unique_id")
    private String uniqueId;

    @Column(name = "source_of_generation")
    private String sourceOfGeneration;

    public Integer getSmsId() {
        return smsId;
    }

    public void setSmsId(Integer smsId) {
        this.smsId = smsId;
    }

    public String getMsisdn() {
        return msisdn;
    }

    public void setMsisdn(String msisdn) {
        this.msisdn = msisdn;
    }

    public String getVertical() {
        return vertical;
    }

    public void setVertical(String vertical) {
        this.vertical = vertical;
    }

    public String getSmsText() {
        return smsText;
    }

    public void setSmsText(String smsText) {
        this.smsText = smsText;
    }

    public String getSmsType() {
        return smsType;
    }

    public void setSmsType(String smsType) {
        this.smsType = smsType;
    }

    public Timestamp getLastSmsTrialTime() {
        return lastSmsTrialTime;
    }

    public void setLastSmsTrialTime(Timestamp lastSmsTrialTime) {
        this.lastSmsTrialTime = lastSmsTrialTime;
    }

    public Integer getSendStatus() {
        return sendStatus;
    }

    public void setSendStatus(Integer sendStatus) {
        this.sendStatus = sendStatus;
    }

    public String getUniqueId() {
        return uniqueId;
    }

    public void setUniqueId(String uniqueId) {
        this.uniqueId = uniqueId;
    }

    public void setSourceOfGeneration(String sourceOfGeneration) {
        this.sourceOfGeneration = sourceOfGeneration;
    }

    public String getSourceOfGeneration() {
        return sourceOfGeneration;
    }

    } 
```

首先我使用命名查询，然后使用本机查询，如下所示：

```
Query smsinfo = session
                    .createSQLQuery("select smsinfo.sms_id as sms_id, smsinfo.last_sms_trial_time as last_sms_trial_time, smsinfo.msisdn as msisdn, smsinfo.send_status as send_status, smsinfo.sms_text as sms_text, smsinfo.sms_type as sms_type, smsinfo.source_of_generation as source_of_generation, smsinfo.unique_id as unique_id, smsinfo.vertical as vertical from sms_info smsinfo where smsinfo.msisdn=:msisdn and (smsinfo.send_status in (0 , 5)) order by smsinfo.last_sms_trial_time desc").addEntity(SmsInfo.class); 
```

如果您需要更多信息，请告诉我。

# macos - AppleGlot 4.0 在 _NewLoc 中不生成任何内容

> ID：12248866
> 
> 赞同：0
> 
> 时间：2012-09-03T13:29:53.677
> 
> 标签：macos, cocoa, localization

显然，Apple 终于更新了 AppleGlot。它被称为 4.0（尽管下载页面将其命名为 3.4）。

我不知道我做错了什么，但是在运行“appleglot populate”时，_NewLoc 文件夹中没有产生任何内容。我的 .app 包位于我的环境中的 _NewBase 文件夹中。

输出会产生一些警告或信息消息：

```
Duplicate bundles found - first="/checkout/MyApp/AppleGlot/ja/_NewBase/MyApp.app/Contents/Frameworks/MyFramework.framework", second="/checkout/MyApp/AppleGlot/ja/_NewBase/MyApp.app/Contents/Frameworks/MyFramework.framework/Versions/A"
Duplicate bundles found - first="/checkout/MyApp/AppleGlot/ja/_NewBase/MyApp.app/Contents/Frameworks/MyFramework.framework", second="/checkout/MyApp/AppleGlot/ja/_NewBase/MyApp.app/Contents/Frameworks/MyFramework.framework/Versions/Current"
Whoa 
```

这三个消息重复了 10 次左右。请注意，重复的包是指框架内的符号链接文件，而不是实际的重复包。我认为这对于框架来说是相当正常的。“哇”似乎是一个不应该发布的调试日志。;-)

我认为这个重复的警告不应该是致命的，但是 _NewLoc 目录中没有产生任何内容，并且操作以“完成”结束。没有任何迹象表明它不起作用。

我感觉是 AppleGlot 4.0 过早地发布了——或者只是一些我没有得到的基本概念。我不是 AppleGlot 专业人士。不幸的是，旧的 Appleglot 版本似乎不再可供下载，所以我无法与早期版本进行交叉检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T23:12:49.487

你是对的，AppleGlot 中有一个错误。幸运的是，已发布修复此问题的新版本：

[https://developer.apple.com/downloads/index.action?name=localization](https://developer.apple.com/downloads/index.action?name=localization)

# apache-flex - Flex Mobile - 突出显示项目渲染器中的选定行

> ID：12248868
> 
> 赞同：0
> 
> 时间：2012-09-03T13:29:54.703
> 
> 标签：apache-flex, mobile, itemrenderer

我正在构建一个 ItemRenderer，以显示公司可能希望在建筑物上执行的工作列表。然后，用户可以单击作业以选择它并使用父视图上的添加/编辑/删除按钮。

如何在我的 s:ItemRenderer 中突出显示选定的 HGroup 以允许用户查看当前选择的作业？

```
<s:Scroller width="100%" height="70%">
        <s:DataGroup width="100%" height="100%" 
                     horizontalCenter="0" verticalCenter="0" 
                     dataProvider="{Session.EXISTING_JOBS}"
                     >
            <s:layout >
                <s:VerticalLayout />                
            </s:layout>

            <s:itemRenderer>
                <fx:Component>
                    <s:ItemRenderer verticalCenter="0" horizontalCenter="0" width="100%">                                   

                        <fx:Script>
                            <![CDATA[

                                protected function jobSelect_clickHandler(event:MouseEvent):void
                                {
                                    // highlight the HGroup here
                                    if(this.selected == true){
                                        jobRow.setStyle('contentBackgroundColor',0x000000);
                                    } else {
                                        jobRow.setStyle('contentBackgroundColor',0xFFFFFF);
                                    }                                       
                                }
                            ]]>
                        </fx:Script>

                        <s:states>
                            <s:State name="normal"/>                            
                        </s:states>
                        <s:HGroup id="jobRow"
                            width="100%" height="50" 
                                  verticalAlign="middle"
                                  click="jobSelect_clickHandler(event)" >                               
                            <s:Label text="{data.id}" 
                                     width="15%" height="50" 
                                     verticalAlign="middle" 
                                     verticalCenter="0"/>       
                            <s:Label text="{data.company}" 
                                     width="35%" height="50"
                                     verticalAlign="middle"
                                     verticalCenter="0"/>
                            <s:Label text="{data.building}" 
                                     width="35%" height="50" 
                                     verticalAlign="middle"
                                     verticalCenter="0"/>   
                            <s:Label text="{data.assets}"
                                     width="15%" height="50"  
                                     verticalAlign="middle"
                                     verticalCenter="0"/>       
                        </s:HGroup>
                    </s:ItemRenderer>
                </fx:Component>
            </s:itemRenderer>

        </s:DataGroup>
    </s:Scroller> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:42:42.587

假设您在列表中使用 itemRenderer；默认情况下，List 类已经这样做了。[您可以通过设置selectionColor 样式](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/List.html#styleSummary)来更改值。

如果您真的想更改 HGroup 上的值，可以使用样式[contentBackgroundColor](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/GroupBase.html#style%3acontentBackgroundColor)。您可以通过访问itemRenderer 实例 的[selected](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/ItemRenderer.html#selected)属性来判断当前渲染器是否为选定项。

```
 protected function selectJob_clickHandler(event:MouseEvent):void
    {
        // highlight the HGroup here
        if(this.selected == true){
          hgroupID.setStyle('contentBackgroundColor',0x000000);
        } else {
          hgroupID.setStyle('contentBackgroundColor',0xFFFFFF);
        }
    } 
```

不要忘记向 HGroup 添加一个 ID：

```
<s:HGroup id="hgroupID" 
          width="100%" height="50" 
          verticalAlign="middle"
          click="selectJob_clickHandler(event)" > 
```

# java - JavaFx 将实体模型绑定到 TableView

> ID：12248870
> 
> 赞同：0
> 
> 时间：2012-09-03T13:30:11.340
> 
> 标签：java, mysql, entity, javafx-2, fxml

我有带有 TableView 和 MySQL 数据库的 JavaFx 应用程序。

我已经从数据库创建实体模型（产品）。

有`ObservableList<Products> proList;`

我如何`proList`从数据库中填充它然后绑定我的`@FXML private TableView<Products> tableView;`？

我在 JavaFx 中非常新。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:16:52.157

在您的启动/初始化方法中，
首先加载您的实体列表（假设 JPA）：

```
List<Products> productEntityList = 
    entityManager.createQuery("select p from Products p").getResultList(); // or better use your service classes to fetch data 
```

其次用获取的数据初始化 ObservableList：

```
proList = FXCollections.observableArrayList(productEntityList); 
```

第三个设置表格视图的项目：

```
tableView.setItems(proList); 
```

请注意，对 proList 所做的任何更改（添加/删除）也将反映到 tableView.getItems()。

# opengl - 使用 FBO 渲染 YUV 数据

> ID：12248871
> 
> 赞同：0
> 
> 时间：2012-09-03T13:30:12.130
> 
> 标签：opengl, yuv, fbo

我能够使用着色器在屏幕上渲染 YUV 图像。为了提高性能，我想使用 FBO。但我做不到。

我的初始化代码如下

```
void opengl_init(int w, int h) {
    glGenFramebuffers(1, &framebuffer);
    checkGlError("glGenFramebuffers");

    glBindFramebuffer(GL_FRAMEBUFFER, framebuffer);
    checkGlError("glBindFramebuffer");

    glActiveTexture(GL_TEXTURE0);

    glGenTextures(1, &gYTexture);
    glBindTexture(GL_TEXTURE_2D, gYTexture);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, FRAME_WIDTH, FRAME_HEIGHT, 0, GL_RGBA, GL_UNSIGNED_BYTE, NULL);
    glBindTexture(GL_TEXTURE_2D, 0);

    glGenRenderbuffers(1, &colorbuffer);
    checkGlError("glGenRenderbuffers");
    glBindRenderbuffer(GL_RENDERBUFFER, colorbuffer);
    checkGlError("glBindRenderbuffer");
    glRenderbufferStorage(GL_RENDERBUFFER,
                GL_RGB565, FRAME_WIDTH, FRAME_HEIGHT);
    checkGlError("glRenderbufferStorage");

    glFramebufferRenderbuffer(GL_FRAMEBUFFER,
                              GL_COLOR_ATTACHMENT0,
                              GL_RENDERBUFFER, depthbuffer);
    checkGlError("glFramebufferRenderbuffer");

    glFramebufferTexture2D(GL_FRAMEBUFFER,
                           GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D,
                           gYTexture, 0);
    checkGlError("glFramebufferTexture2D");

    int status = glCheckFramebufferStatus(GL_FRAMEBUFFER);
    printf("Framebuffer is not complete: *status* = %d", status);
    if (status != GL_FRAMEBUFFER_COMPLETE) {
        printf("Framebuffer is not complete: *status* = %d", status);
    }
    glBindFramebuffer(GL_FRAMEBUFFER, 0);
    checkGlError("glBindFramebuffer");

    glGenBuffers(1, ioBuf);
    checkGlError("glGenBuffers");

    glActiveTexture(GL_TEXTURE1);

    glGenTextures(1, &gUTexture);
    glBindTexture(GL_TEXTURE_2D, gUTexture);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

    glActiveTexture(GL_TEXTURE2);

    glGenTextures(1, &gVTexture);
    glBindTexture(GL_TEXTURE_2D, gVTexture);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

    glViewport(0, 0, w, h);
    checkGlError("glViewport");
} 
```

我使用下面的代码渲染我的框架

```
void opengl_renderframe(void *yuvbuf,int framewidth, int frameheight) {
    static void *ubuf, *vbuf;
    ubuf = (char *)yuvbuf + (framewidth * frameheight);
    vbuf = (char *)ubuf + ((framewidth * frameheight) / 4);

    glBindFramebuffer(GL_FRAMEBUFFER, framebuffer);
    checkGlError("glBindFramebuffer");

    glClearColor(0.0f, 0.0f, 1.0f, 1.0f);
    checkGlError("glClearColor");
    glClear( GL_DEPTH_BUFFER_BIT | GL_COLOR_BUFFER_BIT);
    checkGlError("glClear");

    glUseProgram(gProgram);
    checkGlError("glUseProgram");

    glActiveTexture(GL_TEXTURE0);
    glBindTexture(GL_TEXTURE_2D, gYTexture);
    glBindBuffer(GL_ARRAY_BUFFER, ioBuf);
    checkGlError("glBindBuffer");
    glBufferData(GL_ARRAY_BUFFER, (FRAME_WIDTH * FRAME_HEIGHT) , yuvbuf, GL_STATIC_DRAW);
    checkGlError("glBufferData");

    glTexImage2D(GL_TEXTURE_2D, 0, GL_LUMINANCE, FRAME_WIDTH, FRAME_HEIGHT, 0, GL_LUMINANCE, GL_UNSIGNED_BYTE, NULL);
    checkGlError("glTexImage2D");
    glBindBuffer(GL_ARRAY_BUFFER, 0);
    checkGlError("glBindBuffer");
    glUniform1i(Ysamp, 0);

    glActiveTexture(GL_TEXTURE1);
    glBindTexture(GL_TEXTURE_2D, gUTexture);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_LUMINANCE, framewidth/2, frameheight/2, 0, GL_LUMINANCE, GL_UNSIGNED_BYTE, ubuf );
    glUniform1i(Usamp, 1);

    glActiveTexture(GL_TEXTURE2);
    glBindTexture(GL_TEXTURE_2D, gVTexture);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_LUMINANCE, framewidth/2, frameheight/2, 0, GL_LUMINANCE, GL_UNSIGNED_BYTE, vbuf );
    glUniform1i(Vsamp, 2);

    glVertexAttribPointer(gvPositionHandle, 2, GL_FLOAT, GL_FALSE, 0, gTriangleVertices);
    checkGlError("glVertexAttribPointer");
    glEnableVertexAttribArray(gvPositionHandle);
    checkGlError("glEnableVertexAttribArray");

    glVertexAttribPointer(gaTextureCoordHandle, 2, GL_FLOAT, GL_FALSE, 0, gTriangleVertices2);
    checkGlError("glVertexAttribPointer");
    glEnableVertexAttribArray(gaTextureCoordHandle);
    checkGlError("glEnableVertexAttribArray");

    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);
    checkGlError("glDrawArrays");

    glBindFramebuffer(GL_FRAMEBUFFER, 0);
    checkGlError("glBindFramebuffer 0");    
} 
```

我只渲染 Y 数据的片段着色器如下

```
static const char gGrayScaleFragmentShader[] =
    "precision mediump float;\n"
    "varying vec2 vTextureCoord;\n"
    "uniform sampler2D sTexture;\n"
    "void main() {\n"
    "  gl_FragColor = texture2D(sTexture, vTextureCoord);\n"
    "}\n"; 
```

# ios - 根据数据库中字段的内容显示或隐藏按钮

> ID：12248878
> 
> 赞同：0
> 
> 时间：2012-09-03T13:30:29.743
> 
> 标签：ios, database, if-statement, titanium-mobile

我正在尝试根据特定数据库字段的内容显示或隐藏按钮。我将字段定义为“文本”，因为该字段可能包含类似 1-1 或 1-20 或 0 的内容。如果字段 (arref1) 不等于 0，那么我想显示我的按钮。否则隐藏按钮。这是我到目前为止所拥有的，但它不起作用：

```
var resultRule = db.execute('SELECT arref1 FROM genrules WHERE title="'+client+'"');
if (resultRule!='0') {

var appliedRule1 = Ti.UI.createButton({
title:' Applied Rule ' + rows.fieldByName('arref1') + '',
bottom:120,
left: 80,
width: 'auto',
height:40,
borderRadius:5,
textAlign: 'center',
color:'#FFFFFF',
backgroundColor:'#7b4336',
backgroundSelectedColor:'#cc9933',
backgroundImage: 'NONE',
font:{fontSize:'20dp'}
});
win.add(appliedRule1);

appliedRule1.addEventListener('click',function(e)
{

    var win = Ti.UI.createWindow({
        url: 'appliedruledetail.js',
        title:' Applied Rule' + rows.fieldByName('arref1') + ''
    });

    var client = '' + rows.fieldByName('genrule') + '' ;
    win.client = client;
    Ti.UI.currentTab.open(win);
}

);
} else{}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T20:49:45.843

`db.execute`返回一个[`Titanium.DB.ResultSet`](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.Database.ResultSet)（它是一个对象）而不是一个字符串。

以下是如何使用结果集：

```
// Get the row with execute, returns a resultSet
var row = db.execute('SELECT * FROM genrules WHERE title="'+client+'"');
// Make sure its a valid row
if (row.isValidRow()){ 
  // Now get the field from the current row
  if(row.fieldByName('arref1') != '0') {
       // Add your button here
  }
}
row.close(); // Close the result set since were done with it 
```

[我大量借鉴了文档中的这个例子](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.Database.ResultSet)

# xml - 如何在 xml 文件中获取 Rootnode 元素属性值

> ID：12248881
> 
> 赞同：-1
> 
> 时间：2012-09-03T13:30:32.190
> 
> 标签：xml, linq, c#-4.0

我想读取一个 Rootnode 元素属性值，但我的代码不起作用。我的代码

```
XML:
      <Datatable Name="AS1" Type="table">
        <Table>
           <Column Name="ID" Type="uniqueidentifier">
           </Column>
        </Table>
      </Datatable> 
```

代码：

```
 XDocument doc= XDocument.Load(path);
            var q = (from c in doc.Elements("Datatable")
                    select new
                    {
                        dID = c.Attribute("Name"),

                    }).ToList(); 

          var on = new Ton()
             {

                Name=q[0].dID.ToString(),
                CreateTime = DateTime.Now
             }; 
```

所以我需要将选定的根节点属性值传递给 Name 对象。但是当我尝试使用此代码时，q 返回计数 = 0。任何人都可以帮助获得根节点值吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:10:28.007

更改代码的开头：

```
XNamespace xn = "kd.gnp.com/Model/1.0";
XDocument doc= XDocument.Load(path);
            var q = (from c in doc.Elements(xn +"Datatable") 
```

... 相同的

# c# - 使用实体框架代码优先自定义用户权限

> ID：12248882
> 
> 赞同：0
> 
> 时间：2012-09-03T13:30:34.353
> 
> 标签：c#, entity-framework

我首先使用实体​​框架代码，我想在我的实体之上实现一些用户权限系统。例如我有一些实体：

```
public partial class Course
{
  public virtual string Name { get; set; }
  public virtual bool Visible { get; set; }
}

public partial class Student
{
  public virtual string Name { get; set; }
  public virtual bool Visible { get; set; }
} 
```

等等。

然后我想要一些实体，例如：用户和权限。Permission 实体将有一些 bool 列：指定用户权限的 Create、Read、Update、Delete、UserId 列和一个指定为其添加此权限的表的列。

首先在代码中实现这种行为的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:01:58.187

如果您使用的是 MVC，您可以利用现有的授权框架并创建一个自定义[AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx)来处理您的自定义权限。

您可以在数据库中引入一个新`Permissions`表，并以这种方式将特定权限映射到您的用户，或者您也可以`Permissions`在表中添加一个字段`Student`。

# ios - 从 NSURLConnection 收集数据

> ID：12248883
> 
> 赞同：1
> 
> 时间：2012-09-03T13:30:40.343
> 
> 标签：ios, cocoa-touch, nsurlconnection, nsdata

我有最差的互联网连接自动取款机，如果之前有人问过这个问题，很抱歉..

我有一个 NSURLConnection 用于获取一些 json 数据。到目前为止，使用委托方法 didReceiveData:(NSData*)data 保存接收到的数据非常有效。我同时从至少七个不同的页面下载数据。今天，在更新 json 页面以包含更多数据后，NSData 对象似乎已损坏。最近有人告诉我，这个委托不会返回全部数据，因此会破坏我的信息。

是否有另一个像 didFinish 这样的委托，它也返回完整的对象？还是我必须自己做，比如合并两个 NSData？

抱歉愚蠢，语法错误专用于 iPhone 自动更正。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T13:35:07.687

你绝对**不能**依赖 didReceiveData: 返回完整的数据，因为它有一天*会中断。*您必须在 NSMutableData 中收集数据块：

```
NSMutableData *d = [[NSMutableData alloc] init];

- (void)connection:(NSURLConnection *)c didReceiveData:(NSData *)data
{
    [d appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)conn
{
    // 'd' now contains the entire data
} 
```

如果对您不方便，您可以避免使用 NSURLConnection 并使用后台线程通过以下方式获取数据：

```
NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://web.service/response.json"]]; 
```

# html - 将表格隐藏在 div 后面

> ID：12248885
> 
> 赞同：0
> 
> 时间：2012-09-03T13:30:57.433
> 
> 标签：html, css

我想制作一个在某些条件下不可编辑的表格，所以我想用一个 div 覆盖它。

为什么这不起作用？

## CSS

```
<style type="text/css">
    #div_tabel_basisgegevens {
        background-color: red;
        float:left;
        position:relative;
        left:0px;
        top:0px;
        z-index:120;
        width:750;
        height:100px;
    }   
    #tabel_basisgegevens {
        height:100px;
        color:white;
        position:relative;
        left:0px;
        top:0px;
        z-index:2;
    }   
</style> 
```

## HTML

```
<div id="div_tabel_basisgegevens">
    <table id="tabel_basisgegevens">
        <tr>
            <td>
                <input type="Checkbox" id="geen_periodes" />
            </td>
        </tr>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:32:49.343

用另一个 div 包裹 div 和 table。给父 div `position:relative;`。给覆盖div`opacity:0;position:absolute;width:100%;height:100%;`

```
<style type="text/css">
#div_tabel_basisgegevens{
    background-color: red;
    float:left;
    position:absolute;
    left:0px;
    top:0px;
    z-index:120;
    width:100%;
    height:100%;
    opacity:0;
}    
#tabel_basisgegevens{
    height:100px;
    color:white;
    left:0px;
    top:0px;
    z-index:2;
    background:red;
}    
    #wrapper {position:relative;}
</style>
    <div id="wrapper">
        <div id="div_tabel_basisgegevens"></div>
        <table id="tabel_basisgegevens">
            <tr><td><input type="Checkbox" id="geen_periodes"></td></tr>
        </table>
    </div> 
```

[http://jsfiddle.net/RZQwb/2/](http://jsfiddle.net/RZQwb/2/)

正如 Nerd-Herd 所提到的，如果您只想使输入字段不可编辑，那么正确的方法是添加`disabled`属性（`disabled="disabled"`对于 XHTML）

# java - 真正需要什么 Spring Hibernate Integration jar

> ID：12248886
> 
> 赞同：0
> 
> 时间：2012-09-03T13:31:04.680
> 
> 标签：java, spring, hibernate

我还没有找到这个困扰我很久的问题的答案。我正在尝试将 Hibernate (3.6.7) 与 Spring (1.2.8) 集成。为了做到这一点，我必须得到一堆罐子才能让它运行。没有更清洁的方法来完成这项工作。我正在使用而被迫使用的罐子如下：

*   spring-1.2.8.jar
*   commons-logging-1.0.4.jar
*   hibernate-3.6.7.jar
*   hibernate-jpa-2.0-api-1.0.0.Final.jar
*   dom4j-1.6.1.jar
*   slf4j-api-1.6.1.jar
*   javassist-3.12.0.GA.jar

没有更精简的方法吗？将来部署到我的应用服务器期间，依赖 jar 的大列表可能会导致冲突。所以它让我重新思考 spring-hibernate 集成。有没有办法减少这个依赖列表。我的问题与 jars 的管理无关，因为 maven 已经被使用，它更多地与使用有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:37:37.077

这个答案是在 OP 提到他正在使用 Maven 之前发布的。这个问题似乎是在问他如何在不将代码包含在他的项目中的情况下使用代码。鉴于这个问题没有答案，我会假设他想要一种更好的方式来管理他需要的依赖项。

更精简的方法是使用依赖管理工具，例如 maven。这允许您在 xml 文件中定义项目的依赖项。

您指定的依赖项也将具有依赖项等。这些是暂时的依赖关系，如果没有自动化工具，很难管理。

这也是确保您只拥有所需的罐子的最佳方式。

您需要的依赖项是：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-orm</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency> 
```

和：

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-core</artifactId>
    <version>3.6.10.Final</version>
</dependency> 
```

# iphone - xcode中的自定义标签栏

> ID：12248888
> 
> 赞同：0
> 
> 时间：2012-09-03T13:31:17.240
> 
> 标签：iphone, xcode4.2

我是 xcode 开发的新手。我想创建一个不使用标签栏应用程序或使用情节提要的自定义标签栏，我想以编程方式制作它。有没有可能。我已经完成了这个 [视频教程](http://www.youtube.com/watch?v=JDPkyltAqmo)，但是当我试图释放标签时，出现错误。谁能帮助我。这是我的代码，

```
main_tab = [[UITabBarController alloc] init];
    viewController1 = [[Firstview alloc] init];
    viewController1.title = @"View 1";
    UINavigationController *nav1 = [[UINavigationController alloc] initWithRootViewController:viewController1];

    viewController2 = [[SecondView alloc] init];
    viewController2.title = @"View 2";
    UINavigationController *nav2 = [[UINavigationController alloc] initWithRootViewController:viewController2]; 
```

我正在使用 xcode 4.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:38:52.767

使用 ARC 时，您不再需要保留或释放对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:40:39.127

您可以通过单击项目文件并选择相应的属性来启用或禁用 ARC。[在这里](http://matthiaswessendorf.wordpress.com/2011/09/12/disabling-the-arc-in-xcode-4-2/)你有一个很好的描述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:42:19.130

如果您使用情节提要，那么应该有起点。所以以情节提要中的 uitabarcontroller 为起点，并将引用链接到 tabBarController

```
 NSMutableArray *listOfViewControllers = [[NSMutableArray alloc] init];
UIViewController *vc;

vc = [[UIViewController alloc] init];
vc.title = @"A";
[listOfViewControllers addObject:vc];
[vc release];
vc = [[UIViewController alloc] init];
vc.title = @"B";
[listOfViewControllers addObject:vc];
[vc release];
vc = [[UIViewController alloc] init];
vc.title = @"C";
[listOfViewControllers addObject:vc];
[vc release];

[self.tabBarController setViewControllers:listOfViewControllers
                                 animated:YES]; 
```

}

没有情节提要，也没有在 XIB 中使用 UITabbarController

```
UITabBarController *tabBarController = [[UITabBarController alloc] init]; 
```

NSMutableArray *listOfViewControllers = [[NSMutableArray alloc] init]; UIViewController *vc;

```
vc = [[UIViewController alloc] init];
vc.title = @"A";
[listOfViewControllers addObject:vc];
[vc release];
vc = [[UIViewController alloc] init];
vc.title = @"B";
[listOfViewControllers addObject:vc];
[vc release];
vc = [[UIViewController alloc] init];
vc.title = @"C";
[listOfViewControllers addObject:vc];
[vc release];

[tabBarController setViewControllers:listOfViewControllers
                                 animated:YES]; 
```

# java - 他们如何在应用程序/游戏中实施奖励系统？

> ID：12248889
> 
> 赞同：6
> 
> 时间：2012-09-03T13:31:25.607
> 
> 标签：java, android

如果您注意到，有越来越多的应用程序是免费的，但其中有某种货币（黄金、假币等），您可以免费购买或赚取这些货币。我对这个免费的赚钱系统很感兴趣。

即，您会看到一个弹出窗口，例如“下载并启动应用程序 XY，您将获得 5 个金币”。所以我下载应用程序并运行一次，然后我切换回应用程序，我立即获得 5 个金点。

**他们是否使用了一些奖励系统，或者每个人都有自己的奖励系统？**
**如果他们自己实现，他们如何检查 XY 应用程序是否已安装并启动？**

在我看来，如果我要自己实现它，那么我会联系 XY 应用程序的所有者并要求他在他的应用程序/游戏的启动中实现一个示例代码。当他的应用程序启动时，它会向我的在线数据库发送 OK 标志。另一个服务立即将通知推送到我的应用程序，并且该应用程序知道某些用户安装并启动了 XY 应用程序。但是我不知道如果在第一次启动 XY 应用程序时**没有互联网连接该怎么办？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:38:25.780

您不需要互联网连接；您可以只检查已安装应用程序的列表，[如此处所述](https://stackoverflow.com/a/2696617/849939)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:12:12.107

你试过[Scoreloop](http://www.scoreloop.com)吗？他们有一个框架，可以集成到您的 Android 应用程序中，让您可以购买硬币、赢得奖杯等......

此外，他们可以（收费）与其他 scoreloop 用户一起推广您的应用程序。

# android - 如何在android中为grid-view设置一行？

> ID：12248891
> 
> 赞同：1
> 
> 时间：2012-09-03T13:31:25.933
> 
> 标签：android, xml, gridview

现在我正在将 XML 文件中的数据显示到 android 中的网格视图中。这是确切的 xml 文件链接

“ [http://54.251.60.177/StudentWebService/StudentDetail.asmx/GetTMSOrders](http://54.251.60.177/StudentWebService/StudentDetail.asmx/GetTMSOrders) ” 我试图展示。我已经成功地完成了这个概念，但这里的问题是，我没有得到如下图所示的答案

我需要在android中显示如下图

![在此处输入图像描述](../Images/bb8a3ac4a1eacb215f7b72bccdc4a0c3.png)

但我得到的只是下图......

![在此处输入图像描述](../Images/e3baadf1488dd03c1f9cc86b4f76306b.png)

如何克服这个概念？有人可以让我清楚吗？

感谢您宝贵的时间！..

这是我的参考来源，请找到

**GridviewSample.java**

```
public class GridviewSample extends Activity 
{

// All static variables
static final String URL = "http://54.251.60.177/StudentWebService/StudentDetail.asmx/GetTMSOrders";
// XML node keys
static final String KEY_TABLE = "Table"; // parent node
static final String KEY_CUST = "Cust_Name";
static final String KEY_ORDER = "Order_No";
static final String KEY_FREIGHT = "Freight_Rate";
static final String KEY_STATION1 = "Station_Name";
static final String KEY_STATION2 = "Station_Name1";

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    GridView gv =  (GridView)findViewById(R.id.gridView1);

    ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();

    String xml = parser.getXmlFromUrl(URL); // getting XML

    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_TABLE);

    // looping through all item nodes <item>

    for (int i = 0; i < nl.getLength(); i++) 
    {
        // creating new HashMap

        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);

        // adding each child node to HashMap key => value

        map.put(KEY_CUST, parser.getValue(e, KEY_CUST));
        map.put(KEY_ORDER, parser.getValue(e, KEY_ORDER));
        map.put(KEY_FREIGHT, parser.getValue(e, KEY_FREIGHT));
        map.put(KEY_STATION1, parser.getValue(e, KEY_STATION1));
        map.put(KEY_STATION2, parser.getValue(e, KEY_STATION2));

        // adding HashList to ArrayList
        menuItems.add(map);
    }

    // Adding menuItems to ListView

 SimpleAdapter adapter = new SimpleAdapter(this, menuItems,R.layout.grid_item,
 new String[] { KEY_CUST, KEY_ORDER, KEY_FREIGHT,KEY_STATION1,KEY_STATION2 }, new int[] 
 {
    R.id.cust, R.id.order, R.id.freight,R.id.statio1,R.id.station2 });

    gv.setAdapter(adapter);

    gv.setOnItemClickListener(new OnItemClickListener() 
    {

    public void onItemClick(AdapterView<?> Table, View v,int position, long id) 
    {

    String cust = ((TextView) v.findViewById(R.id.cust)).getText().toString();
    String order = ((TextView) v.findViewById(R.id.order)).getText().toString();
    String freight = ((TextView) v.findViewById(R.id.freight)).getText().toString();
    String station1 = ((TextView) v.findViewById(R.id.statio1)).getText().toString();
    String station2 = ((TextView) v.findViewById(R.id.station2)).getText().toString();

    // Starting new intent

    Intent in = new Intent(getApplicationContext(), Single_gridview_item.class);

      in.putExtra(KEY_CUST, cust);
      in.putExtra(KEY_ORDER, order);
      in.putExtra(KEY_FREIGHT, freight);
      in.putExtra(KEY_STATION1, station1);
      in.putExtra(KEY_STATION2, station2);
      startActivity(in);
      }
    }); 
}   } 
```

**Single_gridview_item**

```
public class Single_gridview_item  extends Activity
{

// XML node keys

static final String KEY_TABLE = "Table"; // parent node
static final String KEY_CUST_NAME = "Cust_Name";
static final String KEY_ORDER = "Order_No";
static final String KEY_FREIGHT = "Freight_Rate";
static final String KEY_STATION1 = "Station_Name";
static final String KEY_STATION2="Station_Name1";

@Override
public void onCreate(Bundle savedInstanceState) 
{

    super.onCreate(savedInstanceState);
    setContentView(R.layout.single_grid_item);

    // getting intent data
    Intent in = getIntent();

    // Get XML values from previous intent
    String cust = in.getStringExtra(KEY_CUST_NAME);
    String order = in.getStringExtra(KEY_ORDER);
    String freight = in.getStringExtra(KEY_FREIGHT);
    String station1 = in.getStringExtra(KEY_STATION1);
    String station2 = in.getStringExtra(KEY_STATION2);

    // Displaying all values on the screen

    TextView lblcust = (TextView) findViewById(R.id.cust_label);
    TextView lblorder = (TextView) findViewById(R.id.order_label);
    TextView lblfreight = (TextView) findViewById(R.id.freight_label);
    TextView lblstation1 = (TextView) findViewById(R.id.station1_label);
    TextView lblstation2 = (TextView) findViewById(R.id.station2_label);

    lblcust.setText(cust);
    lblorder.setText(order);
    lblfreight.setText(freight);
    lblstation1.setText(station1);
    lblstation2.setText(station2);
}} 
```

**XMLParser.java**

```
public class XMLParser {

// constructor
public XMLParser() {

}

/**
 * Getting XML from URL making HTTP request
 * @param url string
 * */
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}

/**
 * Getting XML DOM element
 * @param XML string
 * */
public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

/** Getting node value
  * @param elem element
  */
 public final String getElementValue( Node elem ) {
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if( child.getNodeType() == Node.TEXT_NODE  ){
                     return child.getNodeValue();
                 }
             }
         }
     }
     return "";
 }

 /**
  * Getting node value
  * @param Element node
  * @param key string
  * */
 public String getValue(Element item, String str) {     
        NodeList n = item.getElementsByTagName(str);        
        return this.getElementValue(n.item(0));
    }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:58:29.127

不要使用网格视图，它不会帮助你。它旨在将项目列表显示为网格。您可以指定列数，但显示表格更像是 TableLayout 的工作。

# java - 了解 Javassist 中的常量池

> ID：12248897
> 
> 赞同：3
> 
> 时间：2012-09-03T13:31:43.160
> 
> 标签：java, javassist

我正在使用 Javassist 在运行时扩展某些类。在几个地方（在生成代码中），我需要创建 Javassist`ConstPool`类的实例。例如，要将生成的类标记为`synthetic`，我写了如下内容：

```
CtClass ctClassToExtend = ... //class to extend
CtClass newCtClass = extend(ctClassToExtend, ...); //method to create a new ctClass extending ctClassToExtend
SyntheticAttribute syntheticAttribute = new SyntheticAttribute(ctClassToExtend.getClassFile().getConstPool()); //creating a synthetic attribute using an instance of ConstPool
newCtClass.setAttribute(syntheticAttribute.getName(), syntheticAttribute.get()); //marking the generated class as synthetic 
```

这按预期工作，但我对这是否完全正确有一定的怀疑。具体来说，我的主要问题是：

在这个例子中调用`CtClass.getClassFile().getConstPool()`了获取常量池的正确方法吗？如果不是，那么在运行时使用 Javassist 创建新类时，获取正确的常量池实例的一般正确方法是什么？

另外，我对幕后发生的事情有点迷茫：为什么我们需要一个常量池来创建合成属性的实例？或者一般来说，任何其他类型的类属性？

感谢您的任何澄清。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T08:45:19.343

不知道您是否仍然对答案感兴趣，但至少可以帮助其他发现此问题的人。

首先，对开始创建/修改字节码并需要更深入了解 JVM 内部工作原理的每个人的一个小建议，[JVM 的规范文档](http://docs.oracle.com/javase/specs/)起初可能看起来庞大而可怕，但它是无价的帮助！

> 在这个例子中，调用 CtClass.getClassFile().getConstPool() 是获取常量池的正确方法吗？

是的。每个 Java 类都有一个常量池，因此基本上每次您需要访问给定类的常量池时，您都可以这样做`ctClass.getClassFile().getConstPool()`，尽管您必须牢记以下几点：

1.  在 javassist 中，常量池字段 from`CtClass`是一个实例字段，这意味着如果您有两个`CtClass`对象代表同一个类，您将有两个不同的常量池实例（即使它们代表实际类文件中的常量池）。修改其中一个`CtClass`实例时，您必须使用关联的常量池实例才能获得预期的行为。

2.  有时您可能没有，`CtClass`而是 a`CtMethod`或 a`CtField`不允许您回溯到`CtClass`实例，在这种情况下，您可以使用`ctMethod.getMethodInfo().getConstPool()`并`ctField.getFieldInfo().getConstPool()`检索正确的常量池。

    既然我提到了`CtMethod`and `CtField`，请记住，如果你想为其中的任何一个添加属性，它不能通过`ClassFile`Object ，而是分别通过`MethodInfo`and `FieldInfo`。

> 为什么我们需要一个常量池来创建合成属性的实例？或者一般来说，任何其他类型的类属性？

为了回答这个问题，我将开始引用[关于 JVM 7 规范的第 4.4 节](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.4)（就像我说的，这个文档很有帮助）：

> Java 虚拟机指令不依赖于类、接口、类实例或数组的运行时布局。相反，指令引用常量池表中的符号信息。

考虑到这一点，我认为了解这个主题的最佳方法是查看类文件转储。我们可以通过运行以下命令来实现：

```
javap -s -c -p -v SomeClassFile.class 
```

javap自带java SDK，是分析这个层次类的好工具，各开关的解释

*   -s ：打印内部类型签名
*   -c ：打印字节码
*   -p ：打印所有类成员（方法和字段，包括私有的）
*   -v ：详细，将打印大头钉信息和类常量池

`test.Test1`这是我通过 javassist 修改的类的输出，以便在类和`injectedMethod`

```
Classfile /C:/development/testProject/test/Test1.class
Last modified 29/Nov/2012; size 612 bytes
MD5 checksum 858c009090bfb57d704b2eaf91c2cb75
Compiled from "Test1.java"
public class test.Test1
SourceFile: "Test1.java"
Synthetic: true
minor version: 0
major version: 50
flags: ACC_PUBLIC, ACC_SUPER

Constant pool:
#1 = Class              #2             //  test/Test1
#2 = Utf8               test/Test1
#3 = Class              #4             //  java/lang/Object
#4 = Utf8               java/lang/Object
#5 = Utf8               <init>
#6 = Utf8               ()V
#7 = Utf8               Code
#8 = Methodref          #3.#9          //  java/lang/Object."<init>":()V
#9 = NameAndType        #5:#6          //  "<init>":()V
#10 = Utf8               LineNumberTable
#11 = Utf8               LocalVariableTable
#12 = Utf8               this
#13 = Utf8               Ltest/Test1;
#14 = Utf8               SourceFile
#15 = Utf8               Test1.java
#16 = Utf8               someInjectedMethod
#17 = Utf8               java/lang/System
#18 = Class              #17            //  java/lang/System
#19 = Utf8               out
#20 = Utf8               Ljava/io/PrintStream;
#21 = NameAndType        #19:#20        //  out:Ljava/io/PrintStream;
#22 = Fieldref           #18.#21        //  java/lang/System.out:Ljava/io/PrintStream;
#23 = Utf8               injection example
#24 = String             #23            //  injection example
#25 = Utf8               java/io/PrintStream
#26 = Class              #25            //  java/io/PrintStream
#27 = Utf8               println
#28 = Utf8               (Ljava/lang/String;)V
#29 = NameAndType        #27:#28        //  println:(Ljava/lang/String;)V
#30 = Methodref          #26.#29        //  java/io/PrintStream.println:(Ljava/lang/String;)V
#31 = Utf8               RuntimeVisibleAnnotations
#32 = Utf8               Ltest/TestAnnotationToShowItInConstantTable;
#33 = Utf8               Synthetic
{
public com.qubit.augmentation.test.Test1();
Signature: ()V
flags: ACC_PUBLIC

Code:
  stack=1, locals=1, args_size=1
     0: aload_0       
     1: invokespecial #8                  // Method java/lang/Object."<init>":()V
     4: return        
  LineNumberTable:
    line 3: 0
  LocalVariableTable:
    Start  Length  Slot  Name   Signature
           0       5     0  this   Ltest/Test1;

protected void someInjectedMethod();
Signature: ()V
flags: ACC_PROTECTED

Code:
  stack=2, locals=1, args_size=1
     0: getstatic     #22                 // Field java/lang/System.out:Ljava/io/PrintStream;
     3: ldc           #24                 // String injection example
     5: invokevirtual #30                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
     8: return        
RuntimeVisibleAnnotations:
  0: #32()
Synthetic: true
} 
```

请注意，类和方法都具有属性**Synthetic: true**，这意味着它们是 Synthetic 但是，您的合成符号也必须存在于常量池中（检查 #33）。

关于使用常量池和类/方法属性的另一个示例是使用运行时保留策略添加到 someInjectedMethod 的注释。该方法的字节码只有对常量池#32 符号的引用，并且只有在那里你才知道注释来自类型 test/TestAnnotationToShowItInConstantTable;

希望现在对你来说事情变得更清楚了。

# sql - 如何在 sql server 中连接并制作一组文本？

> ID：12248899
> 
> 赞同：3
> 
> 时间：2012-09-03T13:31:45.733
> 
> 标签：sql, sql-server, database, sql-server-2008, tsql

> **可能重复：**
> [在 MS SQL Server 2005 中模拟 group_concat MySQL 函数？](https://stackoverflow.com/questions/451415/simulating-group-concat-mysql-function-in-ms-sql-server-2005)

我有一张桌子**tb1**。我想要连接的结果集。

![在此处输入图像描述](../Images/904b827aeacf3ac00c074f3dd16bcf11.png)

请帮我写一个关于这个问题的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:50:05.990

来，试试这个

```
SELECT  a.dept_id, 
        NewTable.NameValues
FROM    (
          SELECT DISTINCT dept_ID
          FROM tableA
        ) a 
        LEFT JOIN
        (
          SELECT  dept_id,
                STUFF((
                  SELECT  ', ' + [Name] 
                  FROM    tableA
                  WHERE   ( dept_id = Results.dept_id )
                  FOR XML PATH('')), 1, 1, '') AS NameValues
          FROM    tableA Results
          GROUP BY dept_id
        ) NewTable
        on a.dept_id = NewTable.dept_id
GO 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!3/0d102/5)

这是另一个版本

```
SELECT  a.dept_id, 
        SUBSTRING(d.nameList,1, LEN(d.nameList) - 1) ConcatenateNames
FROM 
        (
            SELECT DISTINCT dept_id
            FROM   tableA
        ) a
        CROSS APPLY
        (
            SELECT name + ', ' 
            FROM tableA AS B 
            WHERE A.dept_id = B.dept_id 
            FOR XML PATH('')
        ) D (nameList)
GO 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!3/0d102/10)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-03T13:36:59.167

尝试这个：

```
select col1 + ' ' + col2 from bla.bla.bla 
```

# java - 在 Java 中导入包

> ID：12248906
> 
> 赞同：26
> 
> 时间：2012-09-03T13:32:16.677
> 
> 标签：java, import, packages

如何将包中的方法导入另一个程序？我不知道如何导入......我写了一个 lil' 代码：

```
package Dan;
public class Vik
{
    public void disp()
    {
        System.out.println("Heyya!");
    }
} 
```

然后，将它保存在一个名为“Dan”的文件夹中，然后我编译了它。生成 .class 文件。然后，我在下面写了这段代码：

```
import Dan.Vik.disp;
class Kab
{
    public static void main(String args[])
    {
        Vik Sam = new Vik();
        Sam.disp();
    }
} 
```

我把它保存在“Dan”文件夹之外，上面写着：“找不到符号”

我将第一个代码保存在 C:\Dan\Vik.java 中，第二个保存在 C:\Kab.java

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-03T13:36:18.837

您不导入 Java 中的方法，只导入类型：

```
import Dan.Vik;
class Kab
{
    public static void main(String args[])
    {
        Vik Sam = new Vik();
        Sam.disp();
    }
} 
```

所谓的“静态导入”是个例外，它允许您`static`从其他类型导入类 ( ) 方法。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-03T13:40:41.793

在 Java 中，您只能导入*类 Names*或*静态*方法/字段。

导入类使用

```
import full.package.name.of.SomeClass; 
```

导入静态方法/字段使用

```
import static full.package.name.of.SomeClass.staticMethod;
import static full.package.name.of.SomeClass.staticField; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-03T13:36:11.120

从导入语句中取出方法名称。例如

```
import Dan.Vik.disp; 
```

变成：

```
import Dan.Vik; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-03T13:36:02.630

你应该使用

```
import Dan.Vik; 
```

这使得类可见并且它的公共方法可用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-03T13:38:54.303

这是在 Java 中进行导入的正确方法。

```
import Dan.Vik;
class Kab
{
public static void main(String args[])
{
    Vik Sam = new Vik();
    Sam.disp();
}
} 
```

您不会在 java 中导入方法。静态导入有一个高级用法，但基本上你只是导入包和类。如果您要导入的函数是静态函数，您可以进行静态导入，但我认为您不是在这里寻找静态导入。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-26T03:49:32.087

在 Java 中，您只能导入类名称或静态方法/字段。

导入类使用

```
import full.package.name.of.SomeClass; 
```

我们还可以在 Java 中导入静态方法/字段，这就是导入的方法

```
import static full.package.nameOfClass.staticMethod;
import static full.package.nameOfClass.staticField; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-03T13:37:16.687

对于第二个类文件，添加“package Dan;” 像第一个一样，以确保它们在同一个包中；修改“导入 Dan.Vik.disp;” 成为“进口 Dan.Vik;”

# c# - 当作为 Windows 服务安装时，我的 x86 Exe 以 x64 运行

> ID：12248907
> 
> 赞同：2
> 
> 时间：2012-09-03T13:32:20.710
> 
> 标签：c#, windows-services, x86, 64-bit

我有一个服务器控制台应用程序，如果您指定 /CONSOLE 命令行，我将其设计为作为控制台应用程序运行，但同时允许使用 InstallUtil 将其自身安装为 Windows 服务。

我的问题是当我作为控制台应用程序运行时，它作为 x86 进程正确启动并且一切正常。但是，一旦我将它安装为 Windows 服务，它就会作为 x64 进程启动，因此某些依赖 x86 的功能会失败。

我的项目配置设置为 x86，并且所有引用的组件都设置为构建为 x86。实际项目本身的配置设置为 x86，目标设置为 x86。有没有其他人对可能导致这种情况的原因提出建议？

谢谢，加里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:36:57.020

确保您使用的是正确版本 (X86) 的 InstallUtil。有关x86 和 x64 版本之间差异的说明，请参见[此处。](http://msdn.microsoft.com/en-us/library/ms692753%28VS.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T12:53:38.660

对于 Google 员工：[为什么编译为 x86 的 .NET EXE 会以 x64 运行？](https://stackoverflow.com/questions/10691472/why-would-a-net-exe-compiled-as-x86-run-as-x64)帮我解决了这样的问题。

此外，您可以使用`dumpbin /headers program.exe`它来查看标题中的内容。寻找`14c machine (x86)`或`8664 machine (x64)`。

# threadpool - Windows Phone 7：在后台运行线程以同步数据

> ID：12248908
> 
> 赞同：1
> 
> 时间：2012-09-03T13:32:27.247
> 
> 标签：threadpool

流程如下：

1.  应用程序通过 Web 服务 (WS) 方法获取数据。
2.  将它们保存到本地 NoSQL 数据库 (Sterling)。
3.  各种页面从数据库读取/修改数据以完成业务逻辑，并将相关队列添加为消息项（消息项保存在数据库中），由线程池处理。
4.  现在我们需要在 MessageItem 的基础上通过 Web Service 将数据同步到服务器。

问题：

谁能告诉我如何让 ThreadPool 一直运行并检查队列中的消息项。一旦找到相关的消息项（Switch case），系统就会调用相应的WS方法来实现。请注意，数据库中总会有至少一个 MessageItem（这是一个业务逻辑） 提前非常感谢。

# javascript - PhoneGap 如何在更改 window.location/document.location 后保持 Javascript 执行

> ID：12248913
> 
> 赞同：2
> 
> 时间：2012-09-03T13:32:48.580
> 
> 标签：javascript, ios, cordova, uiwebview, webview

根据[this question](https://stackoverflow.com/questions/2536793/does-changing-window-location-stop-execution-of-javascript)，当我们设置window.location时，javascript将“停止”执行或变成竞争条件。

有时我们需要`window.location = SOMESCH://xxx`在 WebView 内多次触发以将“通知”发送回我们的应用程序。例如设置`window.location = myapp://loginButtonEnabled?e=1`告诉应用程序用户已经填写了一些必要的信息并且可以开始登录。做这样的事情似乎是不可能的：

```
function(){
window.location = myapp://loginButtonEnable?e=1;
window.location = myapp://hideHintView;
.....
window.location = myapp://theLastThing;
} 
```

只有最后一个`window.location = myapp://theLastThing`会被触发，然后 Javascript 的执行将停止（尽管我们通过在应用程序中返回 NO 停止了重定向`webView:shouldStartLoadWithRequest:navigationType:`）。

我发现有趣的是，PhoneGap 通过使用调度队列使这成为可能，但我仍然没有弄清楚它为什么起作用，有人知道诀窍吗？

顺便说一句，有没有一种简单的方法可以在设置位置后“恢复”执行？这将比使用操作队列好得多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T17:09:22.773

您需要让事件循环每次都有机会响应位置更改。执行此操作的典型方法是使用`setTimeout`具有小/零延迟的 a，这具有将执行移至下一个事件循环滴答的效果。尝试这样的事情：

```
var q=[];

function dequeue() {
  window.location='myapp://'+q.shift();
  if (q.length>0) setTimeout(dequeue,0);
}

function notifyApp(cmd) {
  q.push(cmd);
  if (q.length==1) setTimeout(dequeue,0);
}

notifyApp('loginButtonEnable?e=1');
notifyApp('hideHintView');
notifyApp('theLastThing'); 
```

至于 javascript 执行停止，设置`window.location`不应该有这种效果，除非它实际上导致页面更改 - 也许尝试使用上面的技术，看看你的 javascript 在最后一次`notifyApp()`调用后是否继续。

编辑：解决此问题的另一种方法是创建临时 iframe，而不是更改当前页面的位置 - 例如，请参阅 [使用多个 window.location.href 调用触发 shouldStartLoadWithRequest](https://stackoverflow.com/questions/2934789/triggering-shouldstartloadwithrequest-with-multiple-window-location-href-calls/2935005#2935005)

# java - Android：合并 JSON 和 HashMap 数据

> ID：12248916
> 
> 赞同：0
> 
> 时间：2012-09-03T13:33:00.990
> 
> 标签：java, android, json, arraylist, hashmap

我有来自 facebook 的 JSON 数据：

```
String response = facebook.request("me/friends?fields=username",bundle,"GET"); 
```

以及来自用户联系人的数据：

```
ArrayList<HashMap<String, String>> data = getContacts(); 
```

我正在寻找遍历`response`和`data`。怎样才能最有效地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:58:58.577

我建议你阅读这个很棒的教程：

[http://www.vogella.com/articles/AndroidJSON/article.html](http://www.vogella.com/articles/AndroidJSON/article.html)

虽然我更喜欢使用 Jackson 库。这是一个教程：

[http://wiki.fasterxml.com/JacksonInFiveMinutes](http://wiki.fasterxml.com/JacksonInFiveMinutes)

如果你在 androcode.es 中懂西班牙语，可以找到一些我写的关于 JSON 的教程。

# php - 在会话PHP中存储用户名？

> ID：12248919
> 
> 赞同：0
> 
> 时间：2012-09-03T13:33:29.140
> 
> 标签：php, session

我对 PHP 开发很陌生。到目前为止，我在 cookie 中存储了一个哈希（用户 + 密码）以保持用户登录。现在我发现了 php 会话。

是否有人可以在没有访问服务器的情况下修改存储的值？

```
$_SESSION['username'] = 'test@test.com'; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T13:36:32.580

不，没有服务器访问权限不能直接修改会话（直到你留下漏洞进行黑客攻击）

Session 是服务器（RAM 或 FileSystem）上的一个数组，它通过 cookie 映射到用户。用户只能在 cookie 中获取会话 ID。当用户返回时，PHP 获取该会话 ID 并恢复会话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T13:54:31.197

客户端永远不会更改变量`$_SESSION`。我还建议您不要将密码保存`$_SESSION`在`$_COOKIE`. 您可以检查用户和密码是否正确，然后您可以创建`$_SESSION['userID']`or`$_SESSION['user']`然后您只需通过使用 isset 函数创建 if 语句来检查会话是否已创建，如下所示：

```
if(isset($_SESSION['user'])){
   // do something...
} 
```

# javascript - iScroll 不断向上滚动 (Phonegap)

> ID：12248922
> 
> 赞同：1
> 
> 时间：2012-09-03T13:33:38.757
> 
> 标签：javascript, plugins, cordova, iscroll

程序：Eclipse（Phonegap）

电话：HTC Desire (2.2.2)

我已经玩了一段时间的 iscroll 插件，但似乎我无法让它工作。当我在 android 模拟器和我的手机中测试它时，它会一直滚动到顶部。LogCat 还给出了以下行：

“因为我们正在等待 webcore 对着陆的回应，所以错过了一个阻力”

Javascript：

```
<script type="text/javascript">
    var theScroll;
    function scroll() {
       theScroll = new iScroll('scroll-content', { snap:true, momentum:false, hScrollbar:false, vScrollbar:false});
       setTimeout(function () { theScroll.refresh() }, 0); 
    }
    document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
    document.addEventListener('DOMContentLoaded', scroll, false);
</script> 
```

HTML：

```
 <div id="wrapper">

            <div id="main-content">
                <div id="pages">

                    <div id="map" class="current">  

                    </div>

                    <div id="camera">
                        <button class="camera-control" onclick="capturePhoto();">Capture Photo</button>

                        <div style="text-align:center; margin:20px 0 0 0;">
                            <img id="cameraPic" src="" style="width:50%; height: 50%;"/>
                        </div>
                    </div>

                    <div id="buzz"> 
                           <div id="scroll-content">                
                            <ul id="your-tweets"></ul>
                           </div>                           
                    </div>

                    <div id="info">
                        <p>Informatie Evident</p>
                    </div>  
                </div>
            </div>

    </div> 
```

我正在使用 JSON 调用的推文填充列表。希望有人能帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:27:00.300

为了防止它滚动到顶部，您需要在第一次“显示”元素后创建滚动对象。要动态地将数据添加到此元素并使用滚动条保持适当的滚动，您可以在每次将数据添加到列表后使用以下脚本：

```
 var myScroll = null; //set this initially
    // Check if scroll has been created, if so, destroy and recreate
    if (myScroll != null){
            myScroll.destroy();
        }
        myScroll = new iScroll('call-list', { desktopCompatibility: true, vScroll: true, hScroll: false, hScrollbar: false, lockDirection: true }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T04:20:34.423

完整的 iScroll 语法是：iScroll(element_id, object options)。选项在[这里](http://cubiq.org/iscroll "iScroll 语法和选项")。在我们有bounceLock的选项中（如果设置为true，如果内容小于可见区域，则滚动条停止弹跳。默认值为false）。

希望这是您正在寻找的

# django - Tastypie - 允许未经身份验证的用户的只读权限，同时允许授权的写入权限

> ID：12248924
> 
> 赞同：6
> 
> 时间：2012-09-03T13:33:41.753
> 
> 标签：django, django-authentication, tastypie

我正在使用 Tastypie 0.9.11，并且我希望允许未经身份验证的用户对 API 具有只读权限，同时，如果用户使用 API 密钥身份验证进行身份验证，则该用户可以执行添加/更改/删除操作那些相同的模型。

使用 API Key Authentication + Django Authorization 不满足要求 1（未经身份验证的用户根本无法访问 API）。使用无身份验证不允许用户使用 API 密钥进行身份验证（不满足要求 2）。

我敢打赌有一种简单的方法可以实现这种行为，请帮忙。

非常感谢，尤瓦尔·科恩

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T01:33:24.860

您需要考虑两件事。身份验证和授权。

首先，如果请求方法是 GET，则无论 API 密钥如何，您都需要对所有用户进行身份验证，因为所有其他方法都使用 ApiKeyAuthentication。

现在，所有经过身份验证的用户都需要经过授权。在这里，您还需要确保始终允许 GET 请求。这样的事情应该让你开始：

```
from tastypie.resources import ModelResource
from tastypie.authentication import ApiKeyAuthentication
from tastypie.authorization import DjangoAuthorization

class MyAuthentication(ApiKeyAuthentication):
    """
    Authenticates everyone if the request is GET otherwise performs
    ApiKeyAuthentication.
    """

    def is_authenticated(self, request, **kwargs):
        if request.method == 'GET':
            return True
        return super(MyAuthentication, self).is_authenticated(request, **kwargs)

class MyAuthorization(DjangoAuthorization)
    """
    Authorizes every authenticated user to perform GET, for all others
    performs DjangoAuthorization.
    """

    def is_authorized(self, request, object=None):
        if request.method == 'GET':
            return True
        else:
            return super(MyAuthorization, self).is_authorized(request, object)

class MyResource(ModelResource):

    class Meta:
        authentication = MyAuthentication()
        authorization = MyAuthorization() 
```

所以基本上你的使用方法`ApiKeyAuthentication`只是`DjangoAuthorization`缺少对 GET 请求的特殊处理。

# struts2 - 在struts2中获取具有动态索引的数组值

> ID：12248925
> 
> 赞同：1
> 
> 时间：2012-09-03T13:33:45.210
> 
> 标签：struts2

我正在尝试从数组中获取一个值到 as:textbox 元素中：如果我采用硬编码索引，它就可以工作，例如：

```
<s:textarea  value="%{languageHelper.myHauptuebbeschr[0]}" /> 
```

但是当我尝试使用动态索引时它不起作用：

```
<s:textarea  value="%{languageHelper.myHauptuebbeschr[attr.number]}" /> 
```

数字不为空，我可以通过

```
<s:property value="%{#attr.number}" /> 
```

那么如何使用 number 变量作为数组的索引呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:17:09.613

不应该是：

```
<s:textarea  value="%{languageHelper.myHauptuebbeschr[#attr.number]}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T06:41:30.183

我找到了一个解决方案：

我首先将值保存在一个附加变量中：

```
<c:set var="myHauptuebbeschr" value="${languageHelper.myHauptuebbeschr[number]}" ></c:set> 
```

然后通过以下方式获取：

```
<s:textarea  value="%{#attr.myHauptuebbeschr}"  /> 
```

# ruby-on-rails - 将 simple_form 更改为 form

> ID：12248926
> 
> 赞同：0
> 
> 时间：2012-09-03T13:33:54.530
> 
> 标签：ruby-on-rails, simple-form

嗨我不久前开始学习rails

在一些截屏视频中，我看到了代码字符串：

```
<%= f.input :publish_date %>
<%= f.association :categories, :as => :check_boxes %> 
```

在输出中，我看到了 3 个选择字段（年、月、日）和几个复选框（与同名表中的一样多）

在此视频中，英雄创建了新帖子

在迁移 => 发布日期：日期

在模型 => has_and_belongs_to_many :categories

和我的问题：帮我将此表单域（简单表单）更改为普通视图（ form_for ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:01:45.237

[您输入的表单助手](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html)版本是：

```
<%= f.select_date :publish_date %>

<% Category.all.each do |category| %>
  <%= check_box_tag 'video[category_ids][]', category.id %>
  <%= category.name -%>
<% end %> 
```

# python - 如何从 Google appengine 图像服务中提供大于 1600 像素的图像？

> ID：12248927
> 
> 赞同：3
> 
> 时间：2012-09-03T13:33:53.853
> 
> 标签：python, google-app-engine

我正在使用 Google Appengine 图像服务在我的应用程序中提供上传的图像。情况是我的一些图像是屏幕截图，它们的长度大于 1600 像素，当我调用图像连接 = s2000 的服务 url 时，这看起来是服务的限制。有没有办法为我的冗长图像提供服务？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T14:04:51.907

是的，您可以设置`=s0`显示实际/原始尺寸的图像。

文档并没有很好地解释该功能，但[他们](https://developers.google.com/appengine/docs/python/images/overview#Transforming_Images_from_the_Blobstore)`=s0`指出.`=sxx`

# java - Java MySQL 驱动程序和 ClassNotFoundException

> ID：12248930
> 
> 赞同：0
> 
> 时间：2012-09-03T13:34:09.180
> 
> 标签：java, mysql, driver, classnotfoundexception

我正在尝试连接到 mysql 数据库，连接 url 为：

```
jdbc:mysql://127.0.0.1:3306/test 
```

我已经下载了 coorect Mysql 驱动程序来连接数据库，并尝试了多种方法来设置驱动程序，但每种方法都不起作用。到目前为止，我已经尝试将 JAR 文件放在以下位置（并相应地更改 PATH 环境变量）

```
JRE/LIB/
JDK/LIB/
JRE/LIB/mysql-connector-java-5.1.21
JDK/LIB/mysql-connector-java-5.1.21 
```

JAR 文件的路径是它的位置 +`mysql-connector-java-5.1.21-bin.jar`

在过去的 4 个多小时里，我阅读了有关 StackOverflow 的多个问题和解决方案，以及有关此问题的在线教程，但都没有解决问题。

我一直在使用以下代码尝试连接

```
import java.sql.*;
import java.util.Date;

public class DatabaseHelper{

    private Connection          conn                = null;
    private Statement           statement           = null;
    private PreparedStatement   preparedStatement   = null;
    private ResultSet           resultSet           = null;
    private String              url                 = null;

    public DatabaseHelper(){
        try{
            Class.forName("com.mysql.jdbc.Driver");
            conn    = DriverManager.getConnection("jdbc:mysql://127.0.0.1:3306/test");
            System.out.println("Driver Loaded!");
        }catch(SQLException e){
            e.printStackTrace();
        }catch(ClassNotFoundException e){
            e.printStackTrace();
        }
    }
} 
```

堆栈跟踪

```
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:186)
        at DatabaseHelper.<init>(DatabaseHelper.java:28)
        at DatabaseTest.<init>(DatabaseTest.java:6)
        at DatabaseTest.main(DatabaseTest.java:14) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:37:23.920

您需要将 JAR 添加到您的类路径中。启动 java 应用程序时，只需输入：

```
 java -cp mysql-connector-java-5.1.21-bin.jar TheNameOfYourMainClass 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T02:08:07.013

我之前在做一个项目时遇到过这个问题，我将 jar 文件放在 2 个位置，对我有用的如下：

我把 mysql jar 放在 JAVA_HOME/JRE_FOLDER/lib/ext/

然后另一件事是我在项目中创建了一个 libs 文件夹（直接在项目的文件夹中），并将 mysql jar 放入其中。之后，将 jar（libs 文件夹中的那个）添加到项目的构建路径中。

如果您使用 Eclipse，则通过右键单击 jar 并从菜单中选择“构建路径”，然后选择“添加到构建路径”来将 jar 添加到构建路径。

希望这可以帮助，

# c++ - 当内存分配给Windows中的进程时，它是否总是触发页面错误？

> ID：12248938
> 
> 赞同：2
> 
> 时间：2012-09-03T13:34:30.583
> 
> 标签：c++, windows, visual-studio

我试图在操作系统级别上围绕 Windows 内存管理的内部结构。

是不是在分配内存的时候，总会在幕后触发缺页？这是否意味着停止软页面错误的唯一方法是停止在进程中分配新内存？

**定义**

我将“内存分配”定义为任何形式的 malloc，即 new、LocalAlloc、VirtualAlloc、HeapAlloc 等。

我将“页面错误”定义为将内存从 OS 池映射到进程工作集的过程，该操作在高端 Xeon 上需要 250us 的常数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T15:10:58.053

您需要非常清楚这里发生的不同事情。进程有两个独立的部分，提交内存和将内存分页到进程中。这些都与调用`malloc`,`HeapAlloc`或无关`LocalAlloc`。

我试图在下面为您分解该过程，但总结是，如果您使用`HeapAlloc`或其他等效函数，那么您将触发很少的页面错误（至少在您的应用程序初始化并且堆增长到稳定的大小），所以不应该太担心它。

**分配内存**

当您调用时`malloc`，内存分配器将尝试在堆中找到一块可用且足够大的内存。在大多数情况下，它会成功并将内存返回给您。`HeapAlloc``LocalAlloc`

如果找不到足够的内存，它将通过调用`VirtualAlloc`（在 Linux 上为`sbrk`or `mmap`）分配更多内存。这会*提交*内存。它会将新记忆的一小部分返回给您。

**内存承诺**

当您或分配器调用`VirtualAlloc`它时，会将您的虚拟内存的新区域标记为可访问。这不会触发页面错误，也不会实际为这些页面分配物理内存。来自 VirtualAlloc 的 MSDN 文档：

> 为指定的保留内存页面分配内存费用（来自内存的整体大小和磁盘上的页面文件）。该函数还保证当调用者稍后最初访问内存时，内容将为零。除非/直到实际访问虚拟地址，否则不会分配实际的物理页面。

**分页内存**

当您访问第一次返回给您的内存页面时，`VirtualAlloc`这会触发软页面错误。操作系统将找到一个可用物理内存页面，将其清零并将其分配给您访问的虚拟页面。这对您来说是透明的，并且只需要很少的时间（一位数的微秒）。如果您停止使用它，操作系统可能会将此内存交换到磁盘，如果它确实如此，那么后续访问将触发硬页面错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:40:05.593

嗯，是的，页面错误将使 CPU 回到内核模式，内核有机会获悉用户空间进程需要某个内存页面。然后内核可以查询其内部内存管理簿记数据，提供适当大的物理内存区域，并调整处理器的页表以便映射请求的虚拟地址。完成后，执行将返回到用户空间进程，该进程会在分配成功后继续。

这不要与*意外*的页面错误相混淆，用户空间进程引用的地址既没有映射到页表中，*也没有*被内核的内存管理器知道属于该进程。在这种情况下，内核将杀死流氓进程。

# javascript - 如果页面是 iframe 则重定向

> ID：12248940
> 
> 赞同：0
> 
> 时间：2012-09-03T13:34:34.723
> 
> 标签：javascript, html, redirect, iframe, get

这是我想做的：

在我的博客中，评论显示在使用 iframe的[花式框弹出窗口中。](http://fancyapps.com/fancybox/)（例如：- 对于第 2 号帖子，评论链接打开一个 iframe 花式框`comments.php?id=2`）

我想检查是否在 iframe 中加载了 comments.php，如果没有，则重定向到相应的博客页面。IE`post.php?id=2`

我检查了谷歌和其他网站，包括。堆栈溢出。但没有用。请帮忙。（这似乎很容易。但它不起作用[http://www.onlineaspect.com/2009/06/10/reading-get-variables-with-javascript/](http://www.onlineaspect.com/2009/06/10/reading-get-variables-with-javascript/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:39:06.000

将此脚本放在您的页面中。如果它没有在一个框架中打开，它将重定向到`post.php?id=...`

```
<script type="text/javascript">
    if (parent.location==location) {
        location.href = "post.php" + location.search;
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:38:29.650

我在想类似的东西

```
if ( document.parent.frames.length > 0 ) {
    document.parent.location = "post.php";
} 
```

应该管用

# objective-c - 以编程方式获取父类的孩子

> ID：12248945
> 
> 赞同：-1
> 
> 时间：2012-09-03T13:34:47.513
> 
> 标签：objective-c, ios

我有一个界面，允许用户选择一种类型的 childObject。这些对象都继承自同一个 parentObject。有没有办法在给定父对象的情况下动态生成这个子对象列表？目前，当我创建一个新孩子时，我必须将其添加到 TVC 的孩子列表中以显示。

编辑：这是一个例子：

```
Class A (child of NSObject)
->Class A1 (child of Class A)
->Class A2 (child of Class A) 
```

我想问A班：“你的孩子是什么？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:42:17.723

您可以使用反射：

```
// find out the superclass of a class or object
Class parent = [[theObject class] superclass];

// get all classes loaded
unsigned n_classes = objc_getClassList(NULL, 0);
Class *classes;
classes = malloc(sizeof(*classes) * n_classes);
objc_getClassList(classes, n_classes);

// Filter the classes so that only child classes of the
// particular parent class are present
NSMutableArray *children = [NSMutableArray array];
int i;
for (i = 0; i < n_classes; i++) {
    if ([classes[i] isKindOfClass:parent]) {
        [children addObject:classes[i]]; // Yes, classes temselves are objects
    }
}

free(classes); 
```

这里的 'children' 将包含`parent`.

# android - ExpandableListView 错误

> ID：12248949
> 
> 赞同：1
> 
> 时间：2012-09-03T13:35:07.430
> 
> 标签：android, xml, android-layout, expandablelistview

我有一个 ExpandableListView，当我单击一个孩子时，背景颜色设置为绿色。这工作正常，但是当我展开另一个组时，前一个背景颜色设置为打开组的第一个元素并从前一个项目中消失。这似乎是一个错误，但我不知道如何解决它，有人做过同样的实验吗？这是我的简单代码：

这是行元素：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_horizontal"
    android:orientation="vertical" >
    <TextView
        android:id="@+id/equipRow"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/checkBox1"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/checkBox1"
        android:gravity="center_vertical|center_horizontal"
        android:text="Example"
        android:textColor="@android:color/background_dark"
        android:textColorHint="@android:color/background_dark"
        android:textSize="25dp" />
</RelativeLayout> 
```

这里是 onChildClick 函数：

```
private void ItemClick(){
        this.getExpandableListView().setOnChildClickListener(new ExpandableListView.OnChildClickListener() {

            public boolean onChildClick(ExpandableListView parent, View v,
                    int groupPosition, int childPosition, long id) {
                RelativeLayout rL = (RelativeLayout)v;
                TextView eView = (TextView) (((RelativeLayout)v).findViewById(R.id.equipRow));

                eView.setBackgroundColor(Color.argb(150,66, 165, 29));
                exListAdapter.notifyDataSetChanged();

                return true;
            }
        });
    } 
```

# android - Android 签名编辑文本

> ID：12248951
> 
> 赞同：2
> 
> 时间：2012-09-03T13:35:17.237
> 
> 标签：android

我需要使用 numberSigned EditText。

EditText 有效，但我在输入带减号的数字时遇到问题。

以这种方式取一个数字：

```
charsEntered = Integer.parseInt(et.getText().toString()); 
```

没有减号的数字可以，但是当我需要输入例如 -3 时它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:41:42.713

在您`XML layout`的以下使用：

```
<EditText
    ....
    android:inputType="numberSigned" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:47:30.440

尝试以下获取**签名号码**

```
String tmpstr = et.getText().toString();

charsEntered = Integer.parseInt(tmpstr);

if(tmpstr.charAt(0).equals("-")) {
    charsEntered *= (-1) ;
} 
```

# google-app-engine - 是否可以在 Google App Engine 上托管 Drupal

> ID：12248953
> 
> 赞同：1
> 
> 时间：2012-09-03T13:35:20.457
> 
> 标签：google-app-engine, drupal

由于 Drupal 是用 Python 编写的，有人会认为可以在 Google App Engine 上托管一个网站吗？

谢谢，Drupal 是用 PHP 编写的——对 GAE 上的内容管理系统有任何建议。

问候克里斯蒂安

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-16T21:30:10.160

现在 Google 已经推出了对 App Engine 的 PHP 支持，是的，这是可能的。有关详细信息，请参阅[http://blog.boombatower.com/drupal-google-app-engine](http://blog.boombatower.com/drupal-google-app-engine)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T13:42:58.893

您可能会想到用 Python 编写的[Django](https://www.djangoproject.com/)，而不是用 PHP 编写的 Drupal。有关在 Google Apps Engine 上运行 Django 的信息，请参阅[这篇文章](https://developers.google.com/appengine/articles/django-nonrel)。

# codeigniter - CodeIgniter -> 获取相对于基本 url 的当前 URL

> ID：12248970
> 
> 赞同：26
> 
> 时间：2012-09-03T13:36:20.350
> 
> 标签：codeigniter, function, url

尝试过[`URI::uri_string()`](http://codeigniter.com/user_guide/libraries/uri.html)但无法使其与 base_url 一起使用。

网址：`http://localhost/dropbox/derrek/shopredux/ahahaha/hihihi`
返回：`dropbox/derrek/shopredux/ahahaha/hihihi`

但`http://localhost/dropbox/derrek/shopredux/`只返回一个空字符串。

我希望第一个调用返回“ahahaha/hihihi”，第二个调用返回“”。有这样的功能吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2014-01-21T16:50:17.520

```
// For current url
echo base_url(uri_string()); 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-08-30T06:32:31.090

如果`url`加载了帮助程序，请使用

```
current_url(); 
```

会更好

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-11-29T09:11:09.210

对于参数或不带参数的 URL，请使用：

方法一：

```
 $currentURL = current_url(); //for simple URL
 $params = $_SERVER['QUERY_STRING']; //for parameters
 $fullURL = $currentURL . '?' . $params; //full URL with parameter 
```

方法二：

```
$full_url = (isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] === 'on' ? "https" : "http") . "://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]"; 
```

方法三：

```
base_url(uri_string()); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-09-04T04:11:42.240

尝试使用“uri”段，如：

```
$this->uri->segment(5);   //To get 'ahahaha'
$this->uri->segment(6);   //To get 'hihihi 
```

形成您的第一个 URL ...您也从第二个 URl 获得 '' 段（5），段（6）也因为它们是空的。

每个段函数计数从 localhost 开始为“1”和同步段

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2017-03-02T19:56:23.580

我看到这个帖子很旧。但在 CI v3 版本中，答案是：

```
echo $this->uri->uri_string(); 
```

谢谢

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-05-20T11:14:57.733

```
 //if you want to get parameter from url use:
 parse_str($_SERVER['QUERY_STRING'], $_GET);
 //then you can use:
 if(isset($_GET["par"])){
      echo $_GET["par"];
 }
 //if you want to get current page url use:
 $current_url = current_url(); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-08-10T14:43:35.170

运行最新的 Code Igniter 3.10

```
$this->load->helper('uri'); // or you can autoload it in config

print base_url($this->uri->uri_string()); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-03T13:54:46.423

我不知道是否有这样的函数，但是使用 $this->uri->uri_to_assoc() 你可以从 $_GET 参数中得到一个关联数组。有了这个，以及你所在的控制器，你就知道 URL 的样子了。在您上面的 URL 中，这意味着您将在控制器保管箱中，并且数组将是这样的：

```
array("derrek" => "shopredux", "ahahaha" => "hihihi"); 
```

有了这个，您应该能够自己制作这样的功能。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-10T12:09:26.837

您可以使用一些 Codeigniter 功能和一些核心功能，并结合使用查询字符串来实现您的 URL。我找到了这个问题的解决方案。

```
base_url($this->uri->uri_string()).strrchr($_SERVER['REQUEST_URI'], "?"); 
```

如果您加载了 URL 帮助程序，那么您也可以这样做`current_url().strrchr($_SERVER['REQUEST_URI'], "?");`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-08T11:24:58.937

在 CI v3 中，您可以尝试：

```
function partial_uri($start = 0) {
    return join('/',array_slice(get_instance()->uri->segment_array(), $start));
} 
```

这将删除`$start`参数指定的 URL 段数。如果您的网址是`http://localhost/dropbox/derrek/shopredux/ahahaha/hihihi`，则：

```
partial_uri(3);  # returns "ahahaha/hihihi" 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-06-09T14:18:06.380

```
<?php $currentMenu =  $this->uri->segment(2); ?>
<ul>
   <li class="nav-item <?= ($currentMenu == 'dashboard') ?  'active' : '' ?>"> 
       <a href="<?= site_url('/admin/dashboard'); ?>" class="nav-link"><i data- 
         feather="pie-chart"></i> Dashboard</a>

   </li>
</ul 
```

这对我有用

# c# - 长文本和 TextTrimming 时的 TextBlock 问题

> ID：12248976
> 
> 赞同：2
> 
> 时间：2012-09-03T13:36:51.410
> 
> 标签：c#, .net, wpf, xaml

我有一个 TextBlock和非常长的文本`TextTrimming="CharacterEllipsis"`，`TextWrapping="NoWrap"`大约 140 000 个符号。我将此文本放入 TextBlock，然后 TextBlock 将此文本显示为多行控件，并在每一行中进行修剪。

## XAML

```
 <Window x:Class="WpfApplication3.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            Title="MainWindow" Height="350" Width="525">
        <Grid>
            <TextBlock x:Name="textBlock" TextTrimming="CharacterEllipsis" TextWrapping="NoWrap" Width="500"/>
        </Grid>
    </Window> 
```

## C＃

```
 public partial class MainWindow : Window {
            public MainWindow() {
                InitializeComponent();
                string str = "q ";
                for(int i = 0; i < 20000; i++) {
                    str += "qwetre ";
                }
                textBlock.Text = str;
            }
        } 
```

![](../Images/edd0acaaea8064453ba7cf3b0f668fd2.png)

有任何想法吗？是 MS 的错误，还是我可以改变这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T20:47:13.013

Textblock`TextWrapping`属性默认设置为 NoWrap。

因此，除非你

1.  将其显式设置为 Wrap/WrapWithOverflow 或
2.  添加`<LineBreak/>`带有文本的标签

文本将始终仅显示在一行上。

@Mirimon 我完全按照您的说明运行了这个项目，但我只看到一行！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T07:26:28.307

我已经找到了我的问题的答案。TextBlock 在 4.5 框架下有这种行为（我已经安装了 VS2012），我在没有 VS2012 的计算机上尝试过，工作正常，只有一行。

# asp.net-mvc - MVC3 DropDownListFor 不选择项目（Mvc 错误？）

> ID：12248980
> 
> 赞同：1
> 
> 时间：2012-09-03T13:37:00.303
> 
> 标签：asp.net-mvc, asp.net-mvc-3, html.dropdownlistfor, mvc-editor-templates

我有简单的测试模型：

```
 public class MyModel
    {
        public InnerModel InnerModel { get; set; }

    }

    public class InnerModel
    {
        public int Value { get; set; }
    } 
```

在控制器中：

```
public ActionResult Index()
{
    var model = new MyModel();

    model.InnerModel = new InnerModel { Value = 3 };

    return View("MyModelView", model);
} 
```

**我的模型视图：**

```
@model MyModel

@{
    var items = new List<SelectListItem>()
                    {
                        new SelectListItem {Text = "one", Value = "1"},
                        new SelectListItem {Text = "two", Value = "2"},
                        new SelectListItem {Text = "three", Value = "3"}
                    }; }

@Html.DropDownListFor(m=>m.InnerModel.Value,items,"no_selected") 
```

当页面加载我看到选定的项目： ![在此处输入图像描述](../Images/e1d7a93a6b6914b3ea4808891f131c7a.png)

很好。

但是如果我添加 EditorTemplate **InnerModel.cshtml**：

```
@model InnerModel

    @{
        var items = new List<SelectListItem>()
                        {
                            new SelectListItem {Text = "one", Value = "1"},
                            new SelectListItem {Text = "two", Value = "2"},
                            new SelectListItem {Text = "three", Value = "3"}
                        }; }

    @Html.DropDownListFor(m=>m.Value,items,"no_selected") 
```

并更改**MyModelView**：

```
@model MyModel
@Html.EditorFor(m=>m.InnerModel,"InnerModel") 
```

加载页面时，我看到：![在此处输入图像描述](../Images/ca68fd7e1cacf1282dd4afb1a2eddd9c.png)

为什么？MVC 错误？

**更新：** 这个真正的错误。[看](https://stackoverflow.com/questions/10163443/why-is-dropdownlistfor-not-recognizing-the-selecting-value-in-my-editor-template?rq=1)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T13:59:44.397

在创建选择项列表时尝试此操作：

```
var items = new SelectList(
        new[] 
        {
            new { Value = "1", Text = "one" },
            new { Value = "2", Text = "two" },
            new { Value = "3", Text = "three" },
        }, 
        "Value", 
        "Text", 
        Model.Value
    ) 
```

这是为什么会发生这种情况的解释：[https ://stackoverflow.com/a/11045737/486434](https://stackoverflow.com/a/11045737/486434)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:47:24.260

用@Model InnerModel 改变这个

```
@Html.DropDownListFor(m=>m.InnerModel.Value,items,"no_selected") 
```

到

```
@Html.DropDownListFor(m=>m.Value,items,"no_selected") 
```

# c# - 为什么用户控件中有“组件”字段？

> ID：12248981
> 
> 赞同：0
> 
> 时间：2012-09-03T13:37:01.660
> 
> 标签：c#, visual-studio-2010, visual-studio, user-controls

> **可能重复：**
> [何时以及为什么应该实现 IComponent、IContainer 和 ISite？](https://stackoverflow.com/questions/273615/when-and-why-should-i-implement-icomponent-icontainer-and-isite)

每次我创建新控件时，Visual Studio 都会添加下一个字段

```
private System.ComponentModel.IContainer components = null; 
```

但从不使用它。做什么的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:41:26.207

你有你的控件容器

1.  容器消除了组件定位其依赖项或管理其生命周期的需要。

2.  容器允许在不影响组件的情况下交换已实现的依赖项。

3.  容器通过允许模拟依赖关系来促进可测试性。

4.  容器通过允许将新组件轻松添加到系统中来提高可维护性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:34:10.977

用户控件只是创建您自己的“控件”的内容。如果该控件由其他子控件组成，那么当您的控件被释放时，这些控件应该被释放（Disposable 对象的常见礼貌等）。

用户控件在这方面是一个父控件；因此，默认情况下，该类为这些子控件创建一个容器。您可以在设计器中“设计”用户控件，并将工具箱中的控件拖放到设计图面上——这知道该`components`字段并确保将这些子控件添加到集合中。

# ios - UITextFieldTextDidEndEditingNotification 在 TableVIew 中无法正常工作

> ID：12248984
> 
> 赞同：0
> 
> 时间：2012-09-03T13:37:19.810
> 
> 标签：ios, ipad, uitableview, nsnotificationcenter

我有一个 tableView，我在其中使用了一个自定义 TableViewCell 的实例。在每个自定义单元格中，都有一个文本字段和一个标签。

每次 textField 上的文本发生更改时，我都需要在屏幕主 UIView 上的另一个 textField 中进行一些更新。

一共有6行

**ISSUE** : UITextFieldTextDidEndEditingNotification 仅在第一次尝试时在第 1、第 4 和第 6 行触发。然后在第 2 次尝试时，它只会在第 1 次和第 4 次有效。当我调试时，它有时可以工作，但后来又不能工作。

=> 就像它在随机工作一样。

我无法弄清楚发生了什么，任何人都可以提供帮助或提供一些提示来追查原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T10:18:52.810

接受的答案解决了问题，但没有回答问题。

`UITextFieldTextDidEndEditingNotification`不起作用的原因是因为此通知仅在用户完成编辑字段并关闭键盘或选择另一个文本字段时触发。

您应该观察的是`UITextFieldTextDidChangeNotification`，每次文本更改时都会触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:25:56.310

您应该更喜欢使用以下回调方法而不是 UITextFieldTextDidEndEditing

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

    return YES;
} 
```

# c# - 从网页修改远程机器 input.properties 文件

> ID：12248985
> 
> 赞同：0
> 
> 时间：2012-09-03T13:37:20.053
> 
> 标签：c#, .net

我在远程机器上有构建脚本。但我想从本地机器开始构建。所以为此我需要更新远程机器中的 input.properties 文件，然后运行批处理文件以启动构建过程。为此，我创建了一个网页 ![我正在选择输入属性之前的所有构建信息，然后我想修改该输入属性中构建的补丁名称和修订号。之后我想触发一个批处理文件（buildstart.bat）来启动其中的构建单击“开始构建”按钮后的同一文件夹](../Images/49ff5916b0b814bb588a1c67ee4a2db6.png)

那么如何修改远程 input.properties 文件并在 C# 中运行批处理文件。请给我一些建议。提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:36:24.777

您需要使用 Stream Reader / Stream Writer 远程编辑属性文件。有很多方法可以做到这一点。你应该能够自己解决这个问题。

一旦您对属性文件已正确更新感到满意，您将需要使用 PSEXEC 服务在用户计算机上本地启动批处理文件。所以在这种情况下，需要将批处理文件复制到远程机器上。

我通常做的是即时将您打算使用的批处理文件写入远程计算机，并且一旦我看到相关进程已经完成，我就会从本地计算机中删除批处理文件。

PSEXEC 将在您的终端运行，您使用它连接到终端用户机器并启动批处理文件。

您可以创建如下流程：-

```
 Process p = new Process();
       p.StartInfo.CreateNoWindow = true;
       p.StartInfo.UseShellExecute = false;
       p.StartInfo.FileName = "C:\\psexec.exe";
       p.StartInfo.Arguments = "\\\\" + computerName + " C:\\YourBatFile.bat";
       p.Start();
       p.WaitForExit(); 
```

这将在本地计算机上打开一个进程，该进程将启动您的批处理文件。

我建议了解 PSEXEC 服务，它是我一直启动远程处理的方式。

希望这可以帮助。

# mysql - 使用另一个 mysql 表中的值更新 Mysql 表

> ID：12248989
> 
> 赞同：1
> 
> 时间：2012-09-03T13:37:31.463
> 
> 标签：mysql, sql-update

我在 mysql 数据库中有两个表。成员和班级编号。两个表都有一个付费年份字段，并且都有一个代码字段。我想用代码编号表中的值更新成员表中的付费年份，其中成员中的代码与 ClassNumbers 中的代码相同。我知道这可能远非正确，但它可能会更好地解释它。

UPDATE Members SETpaidYear (The VALUE OF PAID YEAR IN ClassNumbers) where cl_code == code

**成员**

ID，

付薪年，

cl_code,

**班级编号**

ID，

付薪年，

代码，

我在搜索其他答案时遇到了这段代码我认为它是类似的

```
UPDATE business b, people p
SET b.email = p.email
WHERE b.business_id = p.business_id
AND p.sort_order = '1'
AND b.email = '' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:55:14.940

```
UPDATE Members JOIN ClassNumbers ON Members.cl_code = ClassNumbers.code
SET    Members.paidyear = ClassNumbers.paidyear 
```

# android - 来自同一列表片段和后按按钮的呼叫列表片段

> ID：12248991
> 
> 赞同：2
> 
> 时间：2012-09-03T13:37:34.453
> 
> 标签：android, list, android-fragments, fragment

A --> 列表片段

B --> 列表片段（从 A 调用）

C --> 与 B 相同（从 B 调用）

我正在使用这些函数从 A 调用 B ；

```
>   FragmentManager fm = getFragmentManager();
>               if (fm != null) {
>                   FragmentTransaction ft = fm.beginTransaction();
>                   ft.replace(R.id.fragment_content, entryListFragment);
>           ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
>                   ft.addToBackStack(null);
>                   ft.commit(); 
```

这是我的 FragmentActivity 课程；

```
public class FragmentTabActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_fragment_tab);

        Commons.globalContext = this;    
        FragmentManager fm = getSupportFragmentManager();
        TabFragment tabFragment = (TabFragment) fm.findFragmentById(R.id.fragment_tab);
    }

    @Override
    public void onBackPressed() {

        FragmentManager fm = getSupportFragmentManager();
        Log.e("BACK STACK", "" + fm.getBackStackEntryCount());

        if(fm.getBackStackEntryCount() > 0) {
            fm.popBackStack();
        }
    }           
} 
```

当我从 B 回压时，我可以回到 A，但我不能从 C 回到 B。谢谢你的帮助

编辑：我这样解决了：

公共类 FragmentTabActivity 扩展 FragmentActivity {

```
private Global globalClass;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    globalClass = ((Global) getApplicationContext());

    setContentView(R.layout.activity_fragment_tab);

    getSupportFragmentManager().addOnBackStackChangedListener(
            new MainOnBackStackChangedListener());

}

private class MainOnBackStackChangedListener implements
        OnBackStackChangedListener {

    public void onBackStackChanged() {
        Log.e("Stack COUNT", "" + 
    getSupportFragmentManager().getBackStackEntryCount());
    }
}

@Override
public void onBackPressed() {

    try {
        if (getSupportFragmentManager().getBackStackEntryCount() > 0) {

                int lastIndex=globalClass.historyList.size()-1;

                globalClass.historyList.remove(lastIndex);

                for (int i = 0; i <globalClass.counterForBackPress; i++) {

                    getSupportFragmentManager().popBackStack();
                }   

        } else {
                     FragmentTabActivity.this.finish();
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

}

# .htaccess - 为不受 Joomla 管理的页面启用 mod_rewrite 规则 - 403 禁止

> ID：12248995
> 
> 赞同：1
> 
> 时间：2012-09-03T13:37:56.057
> 
> 标签：.htaccess, joomla

我有一个简单的问题要解决。每次我访问`.htaccess`（由 Joomla 使用）中明确定义的 URL 之一时，我都会收到`403 Forbidden`消息。

有关我的设置的详细信息：

1.  我正在使用共享主机
2.  Joomla 安装在根文件夹中
3.  我新创建的页面位于`/new/products.php`
4.  `.htaccess`是 Joomla 提供的默认规则，带有一个附加规则：`rewriterule $/new/products^ /new/products.php [R=301,L]`
5.  `Options +FollowSymLinks`被注释掉了，但是打开它并没有改变任何东西

每次我访问`mysite.com/new/products`我都会得到：

> 禁止的
> 
> 您无权访问此服务器上的 /new/products/。此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T21:23:53.923

最后，我只是删除了旧站点，清除了所有 Jooml 条目`.htaccess`并`RewriteBase`指向我的目录。问题没有了。

# php - 从 ftp 获取数据作为字符串

> ID：12248997
> 
> 赞同：2
> 
> 时间：2012-09-03T13:37:59.353
> 
> 标签：php, ftp, gd

是否可以从 ftp 获取数据作为字符串？我想通过创建图像`imagecreatefromstring`，但没有找到它的任何 ftp 功能。我需要它，因为我担心可以上传第三方 php 代码而不是图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:45:56.563

您可以使用以下代码通过 FTP 以字符串形式获取文件的内容：

```
function ftp_get_string($ftp, $filename) {
    $temp = fopen('php://temp', 'r+');
    if (@ftp_fget($ftp, $temp, $filename, FTP_BINARY, 0)) {
        rewind($temp);
        return stream_get_contents($temp);
    }
    else {
        return false;
    } 
} 
```

`$ftp`将是由 . 返回的 FTP 连接资源[`ftp_connect`](http://www.php.net/manual/en/function.ftp-connect.php)。

**免责声明：**代码不是我的；它几乎是从[`ftp_fget`](http://www.php.net/manual/en/function.ftp-fget.php)php.net 的评论中逐字记录的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-05T14:48:32.833

另一种方法是使用[`php://output`](http://php.net/manual/en/wrappers.php.php)输出[缓冲](http://php.net/manual/en/book.outcontrol.php)：

```
/**
 * @param $ftp ftp connexion id
 * @param $filename distant file name
 * @return a string with file content or FALSE
 */ 
function ftp_get_string($ftp, $filename) {
    ob_start();
    $result = ftp_get($ftp, "php://output", $filename, FTP_BINARY);
    $data = ob_get_contents();
    ob_end_clean();
    return $result === FALSE ? false : $data;
} 
```