# StackOverflow 问答 10225000-10225999

# objective-c - 空协议声明

> ID：10225000
> 
> 赞同：1
> 
> 时间：2012-04-19T09:13:44.053
> 
> 标签：objective-c, protocols

以下协议没有任何方法。可以这样使用吗？如果我们声明一个空协议会发生什么？

```
@class CircularPickerView;
@protocol CircularPickerViewDataSource <UIPickerViewDataSource>
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T07:39:34.873

> 可以这样使用吗？

是的。

> 如果我们声明一个空协议会发生什么？

严格来说，这不是空的——它也是一个`UIPickerViewDataSource`. 与子类化类似，您可以`CircularPickerViewDataSource`将`UIPickerViewDataSource`. 您可能还期望它采用`UIPickerViewDataSource`'s 方法，如果您没有实现所需的接口，您将收到警告。它可以作为文档/意图、平台兼容性，也可以作为未来扩展的占位符。

声明没有必需或可选方法的协议只是指定采用者不需要在其实现中定义任何方法。由于这也是一个`UIPickerViewDataSource`，因此情况并非如此。

# tabcontrol - Filemaker Pro：使用选项卡控件创建表格的多个条目

> ID：10225004
> 
> 赞同：0
> 
> 时间：2012-04-19T09:14:00.520
> 
> 标签：tabcontrol, filemaker

我目前正在为临床试验设计一个 Filemaker Pro 数据库。

我的不同表之间的关系就搞定了。为了简化我的问题，假设我有两张桌子。我有一个包含 PatientID 和该患者一般信息的“信息”表，还有另一个包含“日”结果的表。“信息”和“日”表由 PatientID 字段链接。“day”表有一个变量“dayID”，用于识别数据的采集日期。我们将收集该患者的数据八次（不同的日子）。数据由大约 50 个数字组成。

我想用一个带有一般信息的标题和一个带有 8 个选项卡的选项卡控件来表示该患者的条目。在每个选项卡中，我将使用相同的格式/布局来输入数据。

所以我希望能够在每个选项卡的“日”表中都有一个新条目。目前我还没有做到这一点。

我有多标签标签控件。在每张桌子上，我都有相同的布局。但是，当我更改选项卡“day3”中变量 A 的值时，它也会更改选项卡“day0”、“day1”等中变量 A 的值。

事实上，我在每个选项卡的“日”表中都有相同条目的精确副本。而不是一个新条目。

我有一个解决方案，但对我来说不是一个干净且令人满意的解决方案：为每一天创建“day”表的副本（比如说“day0”、“day1”……），并保持它们与 PatientID 之间的关系。

所以我的问题是：

- 我们可以在同一个选项卡控件的不同选项卡中创建同一个表的多个条目吗？

- 如果是，如何在选项卡中设置变量？（我想在标签“day0”中将变量“dayID”设置为“day0”，等等每个标签）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:36:22.163

在每个选项卡中使用一个入口，并为每个入口指定不同的（递增的）initialRow。将行数设置为 1。将相关的日期字段添加到门户。

所以第一个选项卡将显示第一个相关记录，第二个选项卡将显示第二个，依此类推。

按dayId对关系进行排序，并预先生成相应的日期记录。

# javascript - 何时在 Backbone 视图中应用 jQuery 代码

> ID：10225005
> 
> 赞同：3
> 
> 时间：2012-04-19T09:14:04.047
> 
> 标签：javascript, jquery, javascript-events, backbone.js

我有以下主干视图：

```
core.views.Login = Backbone.View.extend(
{
    el: '#main-content-wrapper',

    events:
    {
        'focus #username': 'usernameFocus',
        'blur #username': 'usernameBlur'
    },

    initialize: function()
    {
        this.render();
    },

    render: function()
    {
        var html = unlocked.renderTemplate('login', 'core');
        this.$el.empty().html(html);

        $('#username').focus();

        return this;
    },

    usernameFocus: function(event)
    {
        console.log('focus');
        if($(event.target).val() == 'Username')
        {
            $(event.target).val('');
        }
    },

    usernameBlur: function(event)
    {
        if($(event.target).val() == '')
        {
            $(event.target).val('Username');
        }
    }
}); 
```

我遇到的问题是，当我这样做时： $('#username').focus(); : 在渲染中是 :usernameFocus : 事件尚未附加。我能想到的解决方案只有两个。

1.  使用 setTimeout - 虽然这个选项在技术上可行，但我不认为它是一个真正的选项
2.  在渲染中手动应用事件 - 这样做会完全绕过 Backbone 提供的事件系统，这看起来很奇怪。

Backbone 是否为我提供了一种在应用所有事件后运行 jQuery 代码的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:18:56.807

实际上，我只是将该代码从视图的渲染方法中移出并移到了实际生成视图的路由器方法中，无论如何这似乎是一个更好的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:44:43.987

在焦点设置代码之前将事件处理程序映射到事件的一种简单方法是调用 Backbone 本身提供的相同绑定代码。您应该可以致电：

```
this.delegateEvents();
this.render(); 
```

在您的初始化中并获得您想要的效果。

# stl - FOR 例程中的 STL 对象大小（）错误

> ID：10225007
> 
> 赞同：0
> 
> 时间：2012-04-19T09:14:09.647
> 
> 标签：stl, visual-studio-2005, size

我在使用 STL 函数时发现了一个奇怪的现象。我写了一个 test() 函数。

```
bool test()
{
    list<int> t;

    for( int i = 0; i < t.size()-1; i ++ )
    {
        return false;
    }

    return true;
} 
```

当我运行 test() 函数时，返回 false；为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:51:04.033

size() 返回一个 size_t 值，即 unsigned int，因此 size()-1 为正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:37:08.880

我猜你在更新后忘记构建你的程序。

# vim - 高亮VIM中的所有大写单词

> ID：10225011
> 
> 赞同：4
> 
> 时间：2012-04-19T09:14:21.750
> 
> 标签：vim

在我的 .vimrc 文件中，我添加了

```
match Title /EXAMPLE/ 
```

所以当我输入EXAMPLE时，这个词被突出显示，它工作正常，我的问题是，如何突出显示所有大写字母？不仅是示例，还有其他所有内容。

```
--> THIS IS AN EXAMPLE
--> SECOND EXAMPLE
--> ETC 
```

我想强调一下上面的句子。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T09:18:33.367

做这样的事情

```
match Title /[A-Z]/ 
```

这将突出显示所有大写字母

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-19T09:51:13.310

这应该适用于所有大写的单词

```
:syn match Error "\v<[A-Z]+>" 
```

# java - 找不到资源 - 菜单 - 蜂窝

> ID：10225012
> 
> 赞同：0
> 
> 时间：2012-04-19T09:14:30.097
> 
> 标签：java, android, mobile

我在所有活动中都使用相同的菜单，这在所有活动和设备中都运行良好。最近我将 Google Nexus 升级为 Honeycomb，现在，我面临一个奇怪的错误 - 菜单在所有活动中都打开了，除了一个活动。它导致找不到资源。

*   活动没有变化。
*   跨不同活动的相同菜单，为什么仅在一项活动中导致路径错误。

数据管理系统：

```
04-19 16:03:46.250: E/AndroidRuntime(4269): FATAL EXCEPTION: main
04-19 16:03:46.250: E/AndroidRuntime(4269): android.content.res.Resources$NotFoundException: Resource ID #0x1090045
04-19 16:03:46.250: E/AndroidRuntime(4269):     at android.content.res.Resources.getValue(Resources.java:1018)
04-19 16:03:46.250: E/AndroidRuntime(4269):     at android.content.res.Resources.loadXmlResourceParser(Resources.java:2105)
04-19 16:03:46.250: E/AndroidRuntime(4269):     at android.content.res.Resources.getLayout(Resources.java:857)
04-19 16:03:46.250: E/AndroidRuntime(4269):     at android.view.LayoutInflater.inflate(LayoutInflater.java:394)
04-19 16:03:46.250: E/AndroidRuntime(4269):     at com.android.internal.view.menu.BaseMenuPresenter.getMenuView(BaseMenuPresenter.java:70)
04-19 16:03:46.250: E/AndroidRuntime(4269):     at com.android.internal.policy.impl.PhoneWindow$PanelFeatureState.getIconMenuView(PhoneWindow.java:3320)
04-19 16:03:46.250: E/AndroidRuntime(4269):     at com.android.internal.policy.impl.PhoneWindow.initializePanelContent(PhoneWindow.java:1096)
04-19 16:03:46.250: E/AndroidRuntime(4269):     at com.android.internal.policy.impl.PhoneWindow.openPanel(PhoneWindow.java:559)
04-19 16:03:46.250: E/AndroidRuntime(4269):     at com.android.internal.policy.impl.PhoneWindow.onKeyUpPanel(PhoneWindow.java:817)
04-19 16:03:46.250: E/AndroidRuntime(4269):     at com.android.internal.policy.impl.PhoneWindow.onKeyUp(PhoneWindow.java:1486)
04-19 16:03:46.250: E/AndroidRuntime(4269):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1813)
04-19 16:03:46.250: E/AndroidRuntime(4269):     at android.view.ViewRootImpl.deliverKeyEventPostIme(ViewRootImpl.java:3327)
04-19 16:03:46.250: E/AndroidRuntime(4269):     at android.view.ViewRootImpl.handleFinishedEvent(ViewRootImpl.java:3300)
04-19 16:03:46.250: E/AndroidRuntime(4269):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2460)
04-19 16:03:46.250: E/AndroidRuntime(4269):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-19 16:03:46.250: E/AndroidRuntime(4269):     at android.os.Looper.loop(Looper.java:137)
04-19 16:03:46.250: E/AndroidRuntime(4269):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-19 16:03:46.250: E/AndroidRuntime(4269):     at java.lang.reflect.Method.invokeNative(Native Method)
04-19 16:03:46.250: E/AndroidRuntime(4269):     at java.lang.reflect.Method.invoke(Method.java:511)
04-19 16:03:46.250: E/AndroidRuntime(4269):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-19 16:03:46.250: E/AndroidRuntime(4269):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-19 16:03:46.250: E/AndroidRuntime(4269):     at dalvik.system.NativeStart.main(Native Method)
04-19 16:03:46.257: W/ActivityManager(134):   Force finishing activity com.supervalu.mobile.android/.CoupanViewActivity
04-19 16:03:46.781: W/ActivityManager(134): Activity pause timeout for ActivityRecord{41791d08 com.supervalu.mobile.android/.CoupanViewActivity} 
```

* * *

在对资源 id 进行挖掘之后 - 我发现根本没有声明并删除它。即使那样，它在相同的资源 id 处显示错误，但现在该资源 id 指向其他视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:24:08.750

有同样的问题，它让我发疯。现在找到解决方案，请参阅[https://stackoverflow.com/a/10251279/454667](https://stackoverflow.com/a/10251279/454667)

事实证明，这条线导致了问题：

```
new Resources(mgr, mMetrics, null); 
```

最后一个参数设置为空。即使这条线在一个完全不同的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:07:44.077

通过 Eclipse 中的 Project > Clean 或`ant clean`从命令行清理您的项目。

此外，由于“蜂蜜梳子”不适用于任何可称为“Google nexus”的设备，因此如果您还有其他问题，请不要感到惊讶。

# c# - 如何使用 WPF 打开一个新窗口，尊重良好实践？

> ID：10225015
> 
> 赞同：4
> 
> 时间：2012-04-19T09:14:39.483
> 
> 标签：c#, wpf, mvvm

我已经阅读了 WPF（和一般的 GUI）的一个很好的做法，说要打开尽可能少的窗口。但有时，你根本没有选择。

所以我想到了一个快速优雅的解决方案来打开一个新窗口，我想到了这个：

```
public static class WinManager
{
    private static Dictionary<Type, Func<Window>> collection 
        = new Dictionary<Type, Func<Window>>();

    /* Bind the type of the ViewModel with a lambda that build an 
     * instance of a window*/
    public static void Bind(Func<Window> ctor, Type type) { ... }

    /* Search in the dictionary the specified type and show the window 
     * returned by the lambda*/
    public static void Show(Type type){ ... }

    /* Search in the dictionary the specified type and show the dialogue
     * returned by the lambda*/
    public static void ShowDialog(Type type) { ... }
} 
```

`type`是绑定到视图（即窗口）的 ViewModel 的类型，lambda`ctor`用于返回窗口的新实例。

像这样管理窗口是个好主意还是我完全错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:19:38.250

我认为这是一个不错的主意。

它的优点是想要显示另一个窗口的 ViewModel 不必使用任何 WPF 特定代码，甚至不需要知道视图。它只需要知道要为其显示窗口的 ViewModel。[这与Caliburn.Micros](http://caliburnmicro.codeplex.com) 非常相似`IWindowManager`。

我不喜欢这个解决方案的一点是类的静态性质。这使得单元测试变得困难（呃）。如果您使用依赖注入，您可以创建一个接口和该接口的实现，类似于您的静态类。然后，您可以在组合根中创建该类的实例，将 ViewModel 类型绑定到 lambda View 工厂并将该实例注册到您的 DI 容器。每个想要显示另一个窗口的 ViewModel 现在都依赖于该接口，这使得它在单元测试中很容易模拟。

像这样的东西：

```
interface IWindowManager
{
    void Show(Type type);
    void Show<T>();
    void ShowDialog(Type type);
    void ShowDialog<T>();
}

class WindowManager : IWindowManager
{
    // Implementation of the four methods from the interface plus:

    private Dictionary<Type, Func<Window>> collection 
        = new Dictionary<Type, Func<Window>>();

    public void Bind(Func<Window> ctor, Type type) { ... }
} 
```

`Bind`仅在具体实现上使用该方法`WindowManager`的好处是`IWindowManager`用户无法更改注册。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T09:23:30.000

这不是一个坏主意，实际上我在我的个人项目中使用的是相同的，并且效果很好:)

在`WindowManager`中，您可以跟踪屏幕上可见的所有打开的表单，管理它们的外观和视觉关系（如果另一个也被隐藏，则隐藏一个，诸如此类）。

# javascript - IE7 在表单中获取 null 或对象值

> ID：10225020
> 
> 赞同：2
> 
> 时间：2012-04-19T09:15:06.993
> 
> 标签：javascript, html, forms

我有一个带有名称的隐藏字段的表单。在 javascript 中，我使用以下表达式获取表单隐藏值

`document.getElementById('form-name').hidden-input-name.value`.

在除 IE7 之外的所有浏览器中，它都可以正常工作。在 IE7 中，我得到的值为 null 或不是上述表达式的对象。谁能帮帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:22:16.243

您是否有任何其他具有属性的元素，`name = "form-name"`因为旧版本的 IE 不区分黑白`id="" and name=""`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:24:48.817

元素名称不是有效的 JavaScript 标识符，因此您必须改用以下语法：

```
var value = document.getElementById('form-name').elements("hidden-input-name").value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T09:32:54.210

未经测试，但如何尝试：

```
document.getElementById('form-name')["hidden-input-name"].value 
```

# mysql - 连续运行多个query()方法

> ID：10225021
> 
> 赞同：0
> 
> 时间：2012-04-19T09:15:09.987
> 
> 标签：mysql, cakephp

我正在连续运行多个 query() 方法。

```
 foreach ($users as $user) {
            $sql = $this->_parseQueryVariables($sql, $user, $leaderboard);
            $results = $this->LeaderboardUsers->query($sql);
            pr($results);
        } 
```

当我输出 sql_dump 元素时，它仅列出执行的第一个查询。但是 foreach 中的 pr() 是多次输出的。知道为什么会这样吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T15:29:21.023

好的，刚刚发现答案查询方法默认缓存查询。

必须将 false 作为第二个参数传递以避免查询缓存。:)

```
$results = $this->LeaderboardUsers->query($sql, false); 
```

# core-data - 无法从现有的 Core Data 数据库回读

> ID：10225022
> 
> 赞同：1
> 
> 时间：2012-04-19T09:15:10.537
> 
> 标签：core-data

有人能帮我一下吗。我真的被困住了。

在我的代码中，如果 Documents 位置中不存在文件；我创建存储，将数据放入其中并从中读取。这工作正常。但是，如果该位置已存在文件，我将无法从中读取。我已经尝试了很多，但我真的不确定为什么它不起作用。有时（实际上很少），相同的代码会起作用，但其他时候不会。

这是代码。如果它不起作用，则永远不会记录 useDocument 方法中的调试消息“End of useDocument”。这是在 UIManagedDocument 上调用 openWithCompletionHandler 的方法。代码进入方法，但从未到达该方法的末尾！

```
- (void)setupFetchedResultsController
{   NSLog(@"In setupFetchedResultsController");

NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"WorkOutTypes"];
request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"workoutName" ascending:YES]];

self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request 
                                                                    managedObjectContext:self.workoutDatabase.managedObjectContext
                                                                      sectionNameKeyPath:nil 
                                                                               cacheName:nil];

NSLog(@"End of setupFetchedResultsController");
}

- (void)pushWorkoutDataIntoDocument:(UIManagedDocument *)document
{   NSLog(@"In pushWorkoutDataIntoDocument");
dispatch_queue_t pushQ = dispatch_queue_create("Push data", NULL);
dispatch_async(pushQ, ^{
    NSArray *workOuts = [NSArray arrayWithObjects:@"Squats", @"Bench Press", @"Overhead Press", @"Bent Over Rows", nil];
    [document.managedObjectContext performBlock:^{
        for (NSString *workout in workOuts) {
            [WorkOutTypes workoutName:workout inManagedObjectContext:document.managedObjectContext];
        }
    }];        
});
dispatch_release(pushQ);
}

- (void)useDocument
{   NSLog(@"In useDocument");
NSLog(@"File path - %@", [self.workoutDatabase.fileURL path]);
if (![[NSFileManager defaultManager] fileExistsAtPath:[self.workoutDatabase.fileURL path]]) {
    NSLog(@"1");
    [self.workoutDatabase saveToURL:self.workoutDatabase.fileURL 
                 forSaveOperation:UIDocumentSaveForCreating 
                completionHandler:^(BOOL success){
                    [self setupFetchedResultsController];
                    [self pushWorkoutDataIntoDocument:self.workoutDatabase];
                }];
}
else 
    if (self.workoutDatabase.documentState == UIDocumentStateClosed) {
        NSLog(@"2");
        [self.workoutDatabase openWithCompletionHandler:^(BOOL success){
            NSLog(@"handler called");[self setupFetchedResultsController];}];
    }
    else
        if (self.workoutDatabase.documentState == UIDocumentStateNormal) {
            NSLog(@"3");
            [self setupFetchedResultsController];
        }
NSLog(@"End of useDocument");

}

- (void)setWorkoutDatabase:(UIManagedDocument *)workoutDatabase
{   NSLog(@"In setWorkoutDatabase");
if (_workoutDatabase != workoutDatabase) {
    _workoutDatabase = workoutDatabase;
    [self useDocument];
}
}

- (void)viewWillAppear:(BOOL)animated
{   
[super viewWillAppear:animated];
//    self.navigationItem.rightBarButtonItem = self.editButtonItem;

if (!self.workoutDatabase) {
    NSLog(@"Came in");
    NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
    url = [url URLByAppendingPathComponent:@"Default Workouts Database"];
    self.workoutDatabase = [[UIManagedDocument alloc] initWithFileURL:url];
    NSLog(@"URL - %@", [url path]);
}
if (self.workoutDatabase) {
    NSLog(@"workoutDatabase created");
}
else
    NSLog(@"workoutDatabase not created");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T22:29:49.013

暂时结束这个问题。我恢复使用传统的核心数据堆栈而不是 UIManagedDocument。这是非常不可靠的。

# facebook - 样式化 Facebook Like Box（HTML5 版本）

> ID：10225028
> 
> 赞同：1
> 
> 时间：2012-04-19T09:15:26.433
> 
> 标签：facebook, facebook-social-plugins, facebook-likebox

我使用的是 HTML5 版本的 Like Box，我想知道，我怎样才能给它特殊的样式？我尝试将 css="www.mydomain.com/mystyles.css" 添加到标签中，但这没有用。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:50:47.017

[Like Box](http://developers.facebook.com/docs/reference/plugins/like-box/)`css`社交插件的参数不再记录。并且不适用于新版本的 Like Box。

您可能想尝试使用旧版本，如回答：[fb:like-box, custom css?](https://stackoverflow.com/questions/4874755/fblike-box-custom-css)

# django - 覆盖自定义文件系统的测试设置 - 如何？

> ID：10225034
> 
> 赞同：1
> 
> 时间：2012-04-19T09:15:50.803
> 
> 标签：django, django-testing, django-settings

在我的模型中，我定义了一个文件系统，它指定了一个自定义位置来保存用户配置文件的数据。这真的很简单，看起来像这样：

```
social_user_fs = FileSystemStorage(location=settings.SOCIAL_USER_FILES,
                                   base_url=settings.SOCIAL_USER_URL) 
```

然后我在这样的模型中使用它：

```
class SocialUserProfile(models.Model):

    def get_user_profileimg_path(self, filename):
        return '%s/profile_images/%s' % (self.user_id, filename)
    image = models.ImageField(upload_to=get_user_profileimg_path,
                              storage=social_user_fs,
                              blank=True) 
```

这工作得很好，并且表现得像我期望的那样。但是现在我遇到了测试问题：

```
import os

from django.test import TestCase
from django.test.utils import override_settings

from social_user.forms import ProfileImageUploadForm #@UnresolvedImport
from social_user.models import SocialUserProfile #@UnresolvedImport

# point the filesystem to the subfolder data of app/test/
@override_settings(SOCIAL_USER_FILES = os.path.dirname(__file__)+'/testdata',
                   SOCIAL_USER_URL = 'profiles/')

class TestProfileImageUploadForm(TestCase):

    fixtures = ['social_user_profile_fixtures.json']

    def test_save(self):
        profile = SocialUserProfile.objects.get(pk=1)
        import ipdb; ipdb.set_trace() 
```

交互式调试会话给了我这个：

```
ipdb> from django.conf import settings
ipdb> settings.SOCIAL_USER_FILES
'/Volumes/Data/Website/Backend/project/social_user/tests/testdata'
ipdb> settings.SOCIAL_USER_URL
'profiles/'
# ok, the settings have been changed, the filesystem should use the new values

ipdb> profile.image.url
'/user_files/profiles/1/profile_images/picture1-1.png' 
# 'profiles/1/profile_images/picture1-1.png'
# would be correct with the new settings
# the actual value still uses the original settings

ipdb> f = file(profile.image.file)
*** IOError: [Errno 2] No such file or directory:
u'/Volumes/Data/Website/Backend/user_files/profiles/1/profile_images/picture1-1.png'
# same here, overridden settings should result in
# '/Volumes/Data/Website/Backend/social_user/tests/testdata/1/profile_images/picture1-1.png' 
```

因此设置已被覆盖。看起来我的自定义文件系统只是没有对设置的覆盖做出反应。为什么？是否可以覆盖，或者文件系统是否在某个时间点启动并且之后无法更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:06:05.217

我猜`social_user_fs`它的模块是全局的，你正在从测试之外的那个模块导入东西。所以它在调用测试方法（和装饰器）之前被处理。

导入`SocialUserProfile`里面`test_save`，我认为这将是最好的灵魂。

# jquery - 将jQuery函数集成到html页面中

> ID：10225038
> 
> 赞同：3
> 
> 时间：2012-04-19T09:16:04.700
> 
> 标签：jquery, html, css

**刚刚编辑：** 我对 jQuery 函数有一个奇怪的问题。`example:` [我的功能在每个浏览器http://jsfiddle.net/Ksb2W/72/](http://jsfiddle.net/Ksb2W/72/)上的小型 jsFiddle 上运行良好，
但如果我想将该功能集成到我的 html 页面中，它不适用于 Google Chrome 和 IE8。在 Firefox 上效果很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:37:30.733

据我所知，您的点击没有突出显示正确的行，因为您的实时网站上的表格在您的示例中具有不同的布局。

在示例中，您的行映射为 1:1。

在实时站点上，您的第二个表有两个额外的行：

```
<tr class="navigation"> ...
<tr class="headers"> ... 
```

这显然会破坏您基于订单的匹配。

您的悬停已损坏，因为您的示例与您的实际站点不同。

在您的示例中，您有：

```
$(".table").each(function(){          
    $("tr:eq("+row+")",this).addClass("hoverx");
}); 
```

但是在`focus.js`您的实时站点上：

```
$("table.grid tbody tr").each(function(){          
      $("tr:eq("+row+")",this).addClass("hoverx");
}); 
```

请注意在第二种情况下您是如何遍历行的。

**编辑**

我认为使用`tbody`对交互式行进行分组是解决您在第二个表中有额外行的问题的一个很好的解决方案。因此，您还可以稍微简化您的 javascript：

[第二个表具有更多行的示例](http://jsfiddle.net/Ksb2W/11/)

根据要求，这里是使用的解决方案的`not`样子。请注意，您几乎必须在选择`tr`.

[`not`使用原始代码并对原始代码进行最少更改的示例](http://jsfiddle.net/Ksb2W/12/)

# c++ - 为什么函数参数名称在 C++ 声明中不重要？

> ID：10225042
> 
> 赞同：6
> 
> 时间：2012-04-19T09:16:15.607
> 
> 标签：c++, c, compiler-construction, standards

编译器似乎完全忽略了声明中的函数参数名称（很可能位于头文件中）。允许使用声明版本 1 或 2 编译以下内容的*原因是什么？*

* * *

**执行**

```
void A::doStuff(int numElements, float* data)
{
    //stuff
} 
```

* * *

**声明 - 版本 1**

```
class A
{
public:
    void doStuff(int numElements, float* data);
} 
```

* * *

**声明 - 第 2 版**

```
class A
{
public:
    void doStuff(int, float*);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T09:20:40.317

编译器只需要知道该方法需要什么样的参数。编译器如何调用它们并不重要。

编译器需要知道参数类型有几个原因：

*   如果有多个具有相同方法名称的方法，请确定使用哪种方法
*   判断输入参数是否有效
*   判断参数是否需要强制转换
*   决定如何生成代码来调用方法和处理响应

但是，我建议使用第一个标头版本。它可以帮助其他开发人员（和您自己）使用这些功能并了解哪些参数具有哪些含义。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-19T09:18:41.547

参数名称不是函数签名的一部分。除非您使用它们，否则即使在函数实现中也不**需要名称。**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-19T09:18:33.000

因为名称不会影响编译器在函数之外所做的任何事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T09:18:31.603

我认为版本 1 更好的唯一原因是可读性。它们被忽略，因为它们对编译器无关紧要。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T09:21:55.003

..因为当标头包含在其他模块中时，它只需要生成正确代码的类型。名称 ae 通常有用且方便，但不是绝对必要的。

# android - 警报对话框关闭没有发生

> ID：10225043
> 
> 赞同：0
> 
> 时间：2012-04-19T09:16:15.667
> 
> 标签：android

我正在使用以下代码。但是警报对话框关闭没有发生。我正在使用具有列表视图的自定义视图，我正在尝试单击列表项，警报对话框应该被关闭。在项目上单击侦听器正在工作，但警报对话框没有关闭。任何机构都可以帮助我。

```
View titleView = new View(MixContainerInfoActivity.this);
    titleView = (View)getLayoutInflater().inflate(R.layout.custom_unit_title, null);
    TextView tv = (TextView)titleView.findViewById(R.id.custom_title_txt_view);     
    tv.setTypeface(typeFace);
    tv.setText("CONTAINER OR IMPLEMENT...");

    View view = new View(MixContainerInfoActivity.this);
    view = (View)getLayoutInflater().inflate(R.layout.unit_list, null);
    containerList = (ListView)view.findViewById(R.id.unit_list_view);
    ArrayAdapter<Vector> containerAdapter = new UnitMenuAdapter(MixContainerInfoActivity.this, R.layout.custom_unit_list, containerVector);     
    containerList.setAdapter(containerAdapter);

     final AlertDialog.Builder builder = new AlertDialog.Builder(MixContainerInfoActivity.this);

     builder.setCustomTitle(titleView);
     builder.setView(view);

     final AlertDialog alert = builder.create();
     alert.show(); //edited here

     containerList.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                System.out.println("Item Clicked..");

                alert.dismiss();

            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:30:35.393

试试这个，让我知道会发生什么，

```
AlertDialog.Builder builder = new AlertDialog.Builder(MixContainerInfoActivity.this);
View view = new View(MixContainerInfoActivity.this);
view = (View)getLayoutInflater().inflate(R.layout.unit_list, null);
builder.setCustomTitle(titleView);
builder.setView(view);
containerList = (ListView)view.findViewById(R.id.unit_list_view);
ArrayAdapter<Vector> containerAdapter = new UnitMenuAdapter(MixContainerInfoActivity.this, R.layout.custom_unit_list, containerVector);     
containerList.setAdapter(containerAdapter);
final AlertDialog alert = builder.create();
alert.show();

containerList.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                System.out.println("Item Clicked..");
                alert.dismiss();
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:20:41.640

**单击列表中的项目时会引发setOnItemClickListener**。由于对话框显示在列表上方，因此您无法单击列表的项目。相反，您应该将以下行添加到您的构建器并删除*setOnItemClickListener*：

```
//it will dismiss the dialog automatically
builder.setNegativeButton("OK", null); 
```

# c# - 如何在 C# 中获取线程 ID

> ID：10225044
> 
> 赞同：10
> 
> 时间：2012-04-19T09:16:18.833
> 
> 标签：c#, task-parallel-library, parallel-extensions

```
public bool HasItemsFromPropertySet(InfoItemPropertySet propertySet, CompositeInfoItem itemRemoved)
    {
        var itemAndSubItems = new InfoItemCollection();
        if (itemRemoved != null)
        {
            itemAndSubItems.Add(itemRemoved);
            //foreach (InfoItem item in itemRemoved.AllDescendants)
            itemAndSubItems.AddRange(itemRemoved.AllDescendants);
        }
        return AllItems.AsParallel().Any(item => item.PropertySet == propertySet && !itemAndSubItems.Contains(item));
    } 
```

上面在我的代码中我使用 AsParallel().Any() 如何获取由该 AsParellel.Any() 生成的线程的线程 ID...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-19T09:18:59.083

[`Thread.CurrentThread.ManagedThreadId`](http://msdn.microsoft.com/en-us/library/system.threading.thread.currentthread.aspx)获取当前执行线程的托管线程 ID。

如果您想获取本机线程 ID（不是您通常想要做的事情），您可以调用该方法[`AppDomain.GetCurrentThreadId()`](http://msdn.microsoft.com/en-us/library/system.appdomain.getcurrentthreadid.aspx)（已过时“因为当托管线程在光纤上运行时它不提供稳定的 ID”但据我所知托管线程仅在 SQL Server 内部的纤程上运行）。

# asp.net - 在哪里可以找到的默认设置 元素？

> ID：10225048
> 
> 赞同：2
> 
> 时间：2012-04-19T09:16:32.673
> 
> 标签：asp.net, iis

文件

> c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\CONFIG\machine.config

没有这个元素。这些选项保留在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T09:22:09.287

的默认设置`<sessionSate>`未在 Machine.config 文件或根 Web.config 文件中显式配置。默认值记录在[MSDN](http://msdn.microsoft.com/en-us/library/h6bb9cz9%28v=vs.90%29.aspx)中，我在下面引用它

> ```
> <sessionState 
>    mode="InProc" 
>    stateConnectionString="tcpip=127.0.0.1:42424" 
>    stateNetworkTimeout="10" 
>    sqlConnectionString="data source=127.0.0.1;Integrated Security=SSPI" 
>    sqlCommandTimeout="30" 
>    customProvider="" 
>    cookieless="UseCookies" 
>    cookieName="ASP.NET_SessionId" 
>    timeout="20" 
>    allowCustomSqlDatabase="false" 
>    regenerateExpiredSessionId="true" 
>    partitionResolverType="" 
>    useHostingIdentity="true">
>    <providers>
>       <clear />
>    </providers>
> </sessionState> 
> ```

# sql - Sql 提示使用 PK 聚集索引而不知道它的名称

> ID：10225049
> 
> 赞同：0
> 
> 时间：2012-04-19T09:16:33.610
> 
> 标签：sql, sql-server, performance

我有一个有两个索引的表——PK 聚集索引和非聚集索引。由于某种原因，sql server 决定使用非聚集索引会是一个更好的主意，这会导致 30 分钟的执行时间（使用聚集索引只需几秒钟）。是否可以在不知道其名称的情况下创建默认为聚集索引的提示？我想用它作为临时解决方案，以便有更多时间进行调查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:21:38.513

使用表格提示！

来自 MSDN：

> 如果存在聚集索引，则 INDEX(0) 强制执行聚集索引扫描，INDEX(1) 强制执行聚集索引扫描或查找。

# java - POST 请求在 cURL 中成功，但在 Java 中失败

> ID：10225051
> 
> 赞同：0
> 
> 时间：2012-04-19T09:16:37.487
> 
> 标签：java, php, http, post, https

以下是使用 PHP 上传文件的片段。我是一名 Android 开发人员，我想上传一个文件。这意味着我必须向包含此脚本的 URL 发送 POST 请求。

如果我想上传文件，我应该使用什么参数名称？

**PHP**

```
if (file_exists("upload/" . $_FILES["file"]["name"])) {
    echo $_FILES["file"]["name"] . " already exists. ";
} else {
    move_uploaded_file($_FILES["file"]["tmp_name"], "upload/" . $_FILES["file"]["name"]);
    echo "https://some.site/upload/" . $_FILES["file"]["name"];
} 
```

当我尝试 cURL 时，文件已成功上传，但当我通过 Java 上传时，它会失败。

**卷曲**

```
curl -F file=@call_me_now_2.wav http://some.site/upload/ 
```

**Java 代码**

```
 File f = new File("call_me_now_11.wav");

    HttpPost filePost = new HttpPost("https://some.site/upload/");
    FileEntity fileEntity = new FileEntity(f, "audio/wav");
    filePost.setEntity(fileEntity);

    HttpClient client = new DefaultHttpClient();
    client.execute(filePost, new BasicResponseHandler() {

        @Override
        public String handleResponse(HttpResponse response)
                throws HttpResponseException, IOException {
            HttpEntity entity = response.getEntity();
            InputStream content = entity.getContent();

            int c = 0;
            StringBuilder builder = new StringBuilder();
            while((c = content.read()) != -1) {
                builder.append((char) c);
            }
            System.out.println(builder.toString());

            return builder.toString();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:30:23.257

[以此](https://stackoverflow.com/questions/1067655/how-to-upload-a-file-using-java-httpclient-library-working-with-php-strange-pr)作答。不过还是有解释的。

无法读取已完成的二进制文件（作为文本）。这给行尾、空字符、字符编码以及再次使其二进制化带来了问题。

通常会在此处获取 InputStream`content`并将其流式传输，而无需先将所有内容读入内存。

```
import org.apache.commons.fileupload.util.Streams;

OutputStream out = response.getOutputStream();
Streams.copy(content, out, false); 
```

当然，在发布带有文件上传的表单时，请遵循上述答案。

# wpf - 列表框 - 添加两个相同的项目 - WPF

> ID：10225052
> 
> 赞同：0
> 
> 时间：2012-04-19T09:16:41.300
> 
> 标签：wpf, c#-4.0, listbox, wpf-controls

我有一个 ListBox (WPF)，我在运行时向它添加字符串......如果我尝试添加 ListBox 中已经存在的字符串，它会抛出一个异常......告诉这个项目已经在ListBox....如何将相同的字符串添加到 ListBox ？因为我在我的应用程序中遇到了必须添加 2 个相同字符串的情况......谢谢......

列表框 -

```
<ListBox x:Name="listBox_MyListBox" Height="Auto" Width="Auto" Background="Transparent" MaxHeight="170" BorderThickness="0" Margin="3">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Margin="3" Padding="2" Text="{Binding}" TextAlignment="Center" FontSize="13"/>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox> 
```

在后面的代码中，我添加了这样的字符串-

```
 this.listBox_MyListBox.Items.Add(text.ToString()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:54:58.737

为什么不是一个简单的列表？

简单的非 mvvm 方式：

```
 public List<string> MyItems {get; set;}

 listBox_MyListBox.ItemsSource = MyItems;

 MyItems.Add("t1");
 MyItems.Add("t2");
 MyItems.Add("t1");//again 
```

我会在您的列表中使用视图模型并绑定到列表框。但上面的代码也可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:35:19.560

是的，您可以将重复的项目添加到列表框中，它允许没有任何问题示例：

```
private void Window_Loaded ( object sender, RoutedEventArgs e )
{
   listBox_MyListBox.Items.Add ( "demo" );
   listBox_MyListBox.Items.Add ( "demo" );            
} 
```

注意：如果您使用任何不允许重复的数据源，它不会让您添加重复项：字典或哈希表可能不允许重复条目，如果是这种情况，则选择列表或数据表作为数据源

# javascript - jquery遍历行获取跨度类和标题

> ID：10225053
> 
> 赞同：0
> 
> 时间：2012-04-19T09:16:51.723
> 
> 标签：javascript, jquery, dom-traversal, jquery-traversing

我有一个表，每行都有一个 id 和几个包含跨度的 td

例如

```
<tr id="row"><td><span class="first name">myfirstname<span class="surname">mysurname</span></td><td><span class="street">mystreet</span><span class="town">mytown</span></td> 
```

我不想做的是当传递一个 rowid 时，它会遍历行并创建一个跨度类名和跨度值的键值数组。

目前我可以单独找到每件东西，这非常麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:30:59.193

您的标记应该稍微修正一下：

```
<table>
    <tr id="row1">
        <td>
            <span class="first name">myfirstname </span>
            <span class="surname">mysurname</span>
            </td>
                <td>
                    <span class="street">mystreet</span>
                    <span class="town">mytown</span>
        </td>
    </tr>
</table> 
```

你没有关闭`<span>`and `<tr>` ​</p>

**代码：**

```
function getSpansData(rowId) {
    var map = {};
    $('#' + rowId + ' span').each(function() {
        map[this.className] = this.innerHTML;
    });

    return map;
}

getSpansData('row1'); 
```

[**现场演示**](http://jsfiddle.net/H88sb/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:28:13.333

```
function traverseRow(id) {
    var arr = {};
    $('td span', 'tr#' + id).each(function() {
        arr[this.className] = this.innerHTML;
    });
    return arr;
}

traverseRow('row'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T09:28:11.097

您应该发送代码示例以获得更准确的响应。尝试这个：

```
var values = new Object();
$("#row").filter("td span").each(function(){
    values[$(this).attr("class")] = $(this).text();
});
alert(values.surname); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T09:34:40.277

```
var map = {};
$("#row_id td span").each(function() { 
  map[$(this).attr("class")] = $(this).html(); 
}); 
```

# ios - 本地化和注册 ios 应用程序

> ID：10225054
> 
> 赞同：0
> 
> 时间：2012-04-19T09:16:51.657
> 
> 标签：ios, localization, registration

我们正在开发应用程序，它将向来自不同国家（欧洲）的用户提供内容。我有一个问题——我们只能在 IAP 中注册 10 000 个项目。您有什么建议：每个国家/地区的内容都会有所不同，例如，我必须为每个国家/地区制作 5 个应用程序，还是使用本地化？

如果我住在俄罗斯，我可以在德国注册我的应用程序吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:57:00.033

通过 iTunes 发布应用程序时，您可以自由选择应用程序应适用的任何国家（或国家组合）。

请参阅 Apple 为其本地化版本的 AppStore（标题：国际化）提供服务的国家列表（希望是最新的）：[http](http://en.wikipedia.org/wiki/ITunes_Store) ://en.wikipedia.org/wiki/ITunes_Store 。

# android - Android 谷歌地图自定义布局

> ID：10225057
> 
> 赞同：1
> 
> 时间：2012-04-19T09:16:54.183
> 
> 标签：android, views, maps

对于我的问题（如下），这是我当前的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/verylightgrey" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="48dp"
        android:weightSum="10" >

        <TextView
            android:id="@+id/location_banner"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="8"
            android:background="#9e0039" />

        <TextView
            android:layout_width="1dp"
            android:layout_height="fill_parent"
            android:background="@drawable/verylightgrey" />

        <ImageView
            android:id="@+id/location_directions"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="2"
            android:src="@drawable/directions" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:weightSum="2" >

        <ImageView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:src="@drawable/map_satellite" />

        <ImageView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:src="@drawable/map_street" />
    </LinearLayout>

    <com.google.android.maps.MapView
        android:id="@+id/mapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:apiKey="ladidadiomagadi"
        android:clickable="true"
        android:enabled="true" />

</LinearLayout> 
```

我想在不是地图视图的部分上启用一些点击监听器。

是否有可能在扩展的活动中做到这一点，`Mapactivity`因为我能够做到这一点的唯一方法是将我的视图移动到菜单选项。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:30:55.123

试着把你的`com.google.android.maps.MapView`部分移到它所有的兄弟视图之上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:37:45.243

是的，您可以在 MapActivity 上实现 Onclick 监听器。

# django - django-ajax-selects 示例用法

> ID：10225059
> 
> 赞同：16
> 
> 时间：2012-04-19T09:16:54.280
> 
> 标签：django, autocomplete, django-ajax-selects

[任何人都可以为django-ajax-selects](https://github.com/crucialfelix/django-ajax-selects)发布最简单的示例吗？只有一个带有字段和表单的模型，可用于根据该字段选择此模型的实例（不是在管理员表单中，而是在用户表单中）。

我尝试阅读该项目的文档，但发现它很难理解......另外，我无法使示例应用程序工作（无法找出标签是什么？？？）:(

另外，如果您认为有比 django-ajax-selects 更简单的解决方案，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T11:38:15.243

这是一个简单的示例（来自 github 上的示例，但未经测试）：

模型.py：

```
class Person(models.Model):
    name = models.CharField(blank=True, max_length=100)
    email = models.EmailField()

    def __unicode__(self):
        return self.name

class Group(models.Model):
    name = models.CharField(max_length=200,unique=True)
    members = models.ManyToManyField(Person,blank=True,help_text="Enter text to search for and add each member of the group.")

    def __unicode__(self):
        return self.name 
```

表格.py：

```
class GroupForm(ModelForm):

    class Meta:
        model = Group

    members  = make_ajax_field(Release,'members','person') 
```

查找.py：

```
class PersonLookup(LookupChannel):

    model = Person

    def get_query(self,q,request):
        return Person.objects.filter(name__icontains=q).order_by('name')

    def get_result(self,obj):
        return obj.name

    def format_match(self,obj):
        return self.format_item_display(obj)

    def format_item_display(self,obj):
        return u"%s" % escape(obj.name) 
```

设置.py：

```
AJAX_LOOKUP_CHANNELS = {
     'person' : ('example.lookups', 'PersonLookup'),
} 
```

视图.py：

```
class Create(generic.CreateView):
    template_name = "create.html"
    form_class = GroupForm
    success_url = 'create'

create = Create.as_view() 
```

网址.py：

```
urlpatterns = patterns('',
    url(r'^create',  view='views.create',name='create'),
    url(r'^ajax_lookup/(?P<channel>[-\w]+)$', 'ajax_select.views.ajax_lookup', name = 'ajax_lookup'),
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:40:42.490

您应该通过[快速安装](https://github.com/crucialfelix/django-ajax-selects/blob/master/README.md)指南开始。

本文档中的标签是一个示例模型，就像它可以是汽车、小部件，以及您拥有和想要的任何模型。

# c++ - 使用 Perlin Noise（基于 Tile）生成 2d 地形

> ID：10225063
> 
> 赞同：6
> 
> 时间：2012-04-19T09:16:57.870
> 
> 标签：c++, perlin-noise

我一直在研究我正在开发的应用程序的柏林噪声，它基本上是一个“二维侧视图”外观游戏（模拟）。我不完全了解柏林噪声的工作原理，但大致了解。

我发现这篇带有代码[Perlin Noise](http://www.dreamincode.net/forums/topic/66480-perlin-noise/)的文章并决定在之前给出它，我目前设置世界生成的方式是每个“块”都有 16x16 块，我刚刚声明如果 Y >= HEIGHT / 2 全部瓷砖“实心”或“空气”，所以这很有效..但土地很平坦，正如你想象的那样。那就是我认为柏林噪声会出现的地方，所以我使用了在上述网站上找到的代码，但我不确定如何将噪声转换为固体/空气瓷砖。

如您所见，地形不是很逼真 ![在此处输入图像描述](../Images/eb51234c5dd90eb9967aa2aeca70ed51.png)

我更喜欢下面的地形。应该看起来像山脉和连绵起伏的丘陵）我不担心锋利的边缘（正方形） ![在此处输入图像描述](../Images/f3a22d6cc51883e32d31ff0c3edbc4ab.png)

我不确定如何遍历 tile 数组以将噪声变为上面

目前我正在像这样迭代瓦片数组（2d），但正如您从第一张图片中看到的那样，它只是随机化瓦片是否是实心的，它不会创建任何连绵起伏的丘陵或山脉。

```
for(int Y = 0;Y < HEIGHT;++Y) {
    for(int X = 0;X < WIDTH;++X) {
        Tile Tile;
        if(noise(X,Y) < 0) {
            Tile.Type = BLOCK;
        } else {
            Tile.Type = Air;
        }

        // Then I push the Tile on to a vector 
```

我还应该提到，在这个 16x16“块”的右侧，还有另一个块需要与这个块匹配，之后的下一个块也是如此。如果有意义的话，块不应该与以前的块相同，只是让它看起来不是单独的块。

任何帮助是极大的赞赏！谢谢

**更新**

我已经将我的 perlin 函数更改为[这个](http://freespace.virgin.net/hugo.elias/models/m_perlin.htm)函数，并且我已经实现了 phresnel 的建议：

```
 PerlinNoise *test=new PerlinNoise(0.25, 6);    //0.25 is Persistance 6 is Octaves

        float f,h;
        float seed = 804.343;

        for (int X=0; X!=MAP_WIDTH; ++X) {

            f = test->GetNoise((X * ChunkX) * seed);

            h = f * MAP_HEIGHT + (MAP_HEIGHT / 2);

            for (int y=0; y<h; ++y) {
                Tile tempTile;
                tempTile.Tile = TILE_NONE;
                Tiles[X][y] = tempTile;
            }
            for (int y=h; y<MAP_HEIGHT; ++y) {
                Tile tempTile;
                tempTile.TileID = TILE_BLOCK;
                Tiles[X][y] = tempTile;
            }
        } 
```

这样做之后看起来好多了，我`X * ChunkX`对每个*噪音*都好像我没有每个块都是一样的，所以现在看起来像下面 ![在此处输入图像描述](../Images/5c4b002b56439cce6f03552545f0bdb1.png)

正如你所看到的，地形比以前更像我想要的，但看起来仍然不像*真实的*地形，因为它不是很平滑，我能做些什么来平滑它的整体外观以创建连绵起伏的*山丘*和*平原*

我删除了在该噪声值下创建图块，以便更容易看到*范围* ![在此处输入图像描述](../Images/3144db6cc38a3fb6e2e779b24b243e25.png)

如您所见，它看起来不错，只需将这些值“平滑”掉，以免它们看起来像伪随机值。我也想知道为什么左边看到的第一个块在整个过程中具有相同的值。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T09:59:42.550

你的结果很好，因为你有岛屿、大陆、池塘和海洋。Perlin 噪声可帮助您生成非随机字符的随机地形。

您基本上将噪声函数的（数学上）无限分辨率降低为仅包含两个不同图块的离散集合，以及非常有限的块分辨率。鉴于此，您的结果似乎很好。

不同的事情可能会改善你的结果。例如，您的平铺图形之间的 lerp：

```
// Exemplary p-code, fine-tuning required
Color color_at (x, y) {
    Real u = x / width, v = y / height
    Real  f  = min (max(noise(u,v), 0), 1);
    Color c  = water*f + hill*(1-f);
    return c;
} 
```

您可以将您的 lerp 函数概括为任何瓦片计数。

锋利边缘的另一种可能性受到[Voronoi 图](http://en.wikipedia.org/wiki/Voronoi) ^((1))的启发。您具有与上述相同的功能，但不是插值，而是采用最接近噪声值的图块：

```
Color color_at (x, y) {
    Real u = x / width, v = y / height
    Real  f  = min (max(noise(u,v), 0), 1);
    if (f<0.5) return water;
    else return hill;
} 
```

这与您的相同，只是您以像素为单位进行操作。同样，这可以概括。

一旦你有了一个好的设置，你就可以对所有东西使用噪声：植物/树分布、敌人分布、动画（这将是一个 1d 噪声函数）等。

* * *

编辑您的评论：

### 连续的一维地形：

如果您需要像经典的 2d-jump 和运行中那样的侧视图，请考虑 1d-noise 函数，从 0 迭代到 image-width，在每个停止处获取噪声函数的样本*f*，将*f*转换为屏幕空间，那么上面的每个像素都将成为天空的一部分，下面的每个像素都将从您的瓷砖中获取：

```
for (int x=0; x!=width; ++x) {

    // Get noise value:
    f = noise1d (x/width);
    h = f * height + (height/2);  // scale and center at screen-center

    // Select tile:
    Tile *tile;
    if (h < waterLimit) {
        h    = waterLimit;
        tile = waterTile;
    } else {
        tile = terrainTile;
    }

    // Draw vertical line:
    for (int y=0; y<h; ++y)
        setPixel (x, y, skyColor(x,y));
    for (int y=h; y<height; ++y)
        setPixel (x, y, tileColor(x,y, tile));
} 
```

再次，示例性伪代码。

### 当前设置中的完整 2d 级别：

噪声功能非常灵活。如果你想要更少的蓝色和更多的绿色，只需降低常数项，即代替`if(h < 0) -> blue`，做`if(h < -0.25) -> blue`。

* * *

^(1：我从未尝试过这种方法，因为我喜欢 3d 地形渲染 ( [picogen.org](http://picogen.org) ))

# asp.net - 在 Visual Studio 2010 中编辑 ASPX 文件在调试时不起作用

> ID：10225064
> 
> 赞同：0
> 
> 时间：2012-04-19T09:16:59.787
> 
> 标签：asp.net, visual-studio-2010

每当我调试 Visual Studio 2010 Web 应用程序项目时，对 ASPX 文件的任何更改都没有效果 - 页面不会重新编译。代码隐藏中的编辑照常工作。

我最近切换到 Windows 7 64 位（从 32 位），但如果我不是疯狂编辑几天前在 64 位环境中工作的 ASPX 文件的话。

我正在使用 Visual Studio 2010 SP1（版本 10.0.40219.1 SP1Rel）。

我已经尝试了所有我能想到的“编辑并继续”、“当一个进程中断时中断所有进程”和“要求源文件与原始版本完全匹配”的组合，但似乎没有任何效果。

我正在使用 IIS Express 作为 Web 服务器（使用本地 IIS Web 服务器/使用 IIS Express），即使它在工作时也这样做了。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:23:13.230

你试过按键盘上的 Ctrl+F5 吗？这应该从服务器请求最新页面，而不是使用浏览器中的缓存页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:19:34.620

在您正在使用的浏览器上`Cntrl+F5`
编辑`.aspx`文件后按

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T05:48:58.160

问题解决了。我手动设置了注册表设置 (HKLM\SOFTWARE\Wow6432Node\Microsoft\ASP.NET\FCNMode = 1) 以尝试修复 UNC 虚拟文件夹的另一个问题。该标志也会在本地文件上禁用文件更改通知。我完全忘记了这个标志，但这当然是我问题的明显原因。

感谢您的输入！

# jquery - JQUERY - 在一个函数和其他函数中修改 var 找到这个修改

> ID：10225065
> 
> 赞同：0
> 
> 时间：2012-04-19T09:17:12.187
> 
> 标签：jquery, click, var

我正在尝试修改函数中的 var，而另一个函数找到此修改

草图：

函数点击元素 -> var = 0 点击其他元素 -> var = 1

功能

if var = 1 做事 if var = 0 不做这个事

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:21:34.060

```
var stat = 0;  // here stat is global

$('.some1').on('click',
    function() {
        stat = 1;
        doSomething(stat);
    });
$('.some2').on('click',
    function() {
        stat = 0;
        doSomething(stat);
    });
function doSomething() {
    if (stat == 1) { 
        $('body').append('<div class="newadded">Something happen</div>');
    } else {
        $('body').remove('div.newadded');
    }
} 
```

# java - 搜索 java usort 库

> ID：10225075
> 
> 赞同：2
> 
> 时间：2012-04-19T09:17:41.363
> 
> 标签：java, usort

Java中PHP的功能是否有任何等价物`usort`？一些图书馆或任何东西。谢谢。

我想它可以通过一些接口来编程，所以如果你知道一些我会很高兴的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T09:24:55.070

您可以使用[`java.util.Arrays.sort(T[] a, Comparator<? super T> c)`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28T%5B%5D,%20java.util.Comparator%29). 您必须实现 Comparator，这相当于实现您传递给 PHP 的`usort`.

比较器实现的一个愚蠢示例（用于字符串）：

```
public class MySillyExampleClass implements Comparator<String> {
    public int compare(String s1, String s2) {      
        return s1.length()-s2.length();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T09:23:28.050

您可以使用[Arrays.sort](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5B%5D,%20java.util.Comparator%29)或[Collections.sort](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)。您只需要实现自己的[Comparator](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Comparator.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T09:22:54.713

AFAIK 没有这样的工具。

您可以做的是使用 Collection.sort() 和自定义比较器对元素列表进行排序。

我要做的是转换这些值，以便自然排序是正确的。排序后将值转换回来。如果必须，您可以使用更大的类型，例如`int[]`=> `long[]`，其中高位具有转换后的可排序值，而低位具有原始 => ，方法`int[]`是采用低位。

# php - 显示数据库中的所有行

> ID：10225077
> 
> 赞同：0
> 
> 时间：2012-04-19T09:18:00.800
> 
> 标签：php, mysql, database

我的脚本中有这段代码，它只显示第一行..有什么解决方案吗？（这不是我的全部剧本）

```
 $sql = mysql_query ('select * from todo');
if (!$sql) {
    die('Invalid query: ' . mysql_error());
}
$taskrow = mysql_query ('select * from todo');
        if($_SERVER['REQUEST_METHOD'] == 'POST'){
    $taak = $_POST['taak'];
    $beschrijving = $_POST['beschrijving'];
    $categorie = $_POST['categorie'];
    $prioriteit = $_POST['prioriteit'];
    $datum = $_POST['datum'];
    $query = mysql_query("INSERT INTO todo (taak, beschrijving, categorie, prioriteit, datum) VALUES ('$taak', '$beschrijving', '$categorie', '$prioriteit', '$datum')") or die(mysql_error());
 } ?>

<?php $task = mysql_fetch_assoc($taskrow); ?>

<td><?php echo $task['taak']; ?></td>
<td><?php echo $task['beschrijving']; ?></td>
<td><?php echo $task['categorie']; ?></td>
<td><?php echo $task['prioriteit']; ?></td>
<td><?php echo $task['datum']; ?> </td> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T09:20:33.030

通过做：

`$task = mysql_fetch_assoc($taskrow)`;

您正在`$task`变成一个对象，其中包含数据库查询中所选行的数据。

因此，您需要遍历该对象，以便使用每一行的数据...

所以试试：

```
while ($task = mysql_fetch_assoc($taskrow)){?>

<td><?php echo $task['taak'];?></td>
<td><?php echo $task['beschrijving']; ?> </td>
<td><?php echo $task['categorie']; ?></td>
<td><?php echo $task['prioriteit']; ?></td>
<td><?php echo $task['datum']; ?> </td>  
<? } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:23:43.713

```
<?php foreach($task as $key => $value) : ?>
<td><?php echo $value;?></td>
<?php endforeach; ?> 
```

# eclipse - EasyMock 记录调用

> ID：10225083
> 
> 赞同：1
> 
> 时间：2012-04-19T09:18:27.977
> 
> 标签：eclipse, log4j, easymock

我有我漂亮的模拟对象和成功的单元测试。但是控制台中什么也没有出现。有没有办法记录对任何模拟对象及其尝试的匹配器的每次调用？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:16:54.153

您是否配置并打开了日志记录？

# java - 使用 ant 任务编译 Groovy 文件

> ID：10225091
> 
> 赞同：4
> 
> 时间：2012-04-19T09:18:56.617
> 
> 标签：java, ant, groovy, javac

我不明白为什么当我尝试运行 compile 任务时 groovy.compile 任务会运行。

```
<taskdef name="groovyc" classname="org.codehaus.groovy.ant.Groovyc">
    <classpath>
        <path refid="compile.classpath"/>
    </classpath>
</taskdef>

<target name="groovy.compile">
    <groovyc srcdir="src/groovytest" destdir="bin/classes"/>
</target>

<target name="compile" description="Compile *.java file" depends="init, groovy.compile">
    <javac srcdir="src" destdir="bin/classes" debug="on" deprecation="true">
        <classpath refid="compile.classpath"/>
    </javac>
</target> 
```

有没有办法用 javac ant 任务而不是 groovyc ant 任务来编译 .groovy？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T09:28:04.810

不，您需要使用该`groovyc`任务，但是，您应该能够通过执行以下操作来使用联合编译器：

```
<taskdef name="groovyc" classname="org.codehaus.groovy.ant.Groovyc">
    <classpath>
        <path refid="compile.classpath"/>
    </classpath>
</taskdef>

<target name="compile" description="Compile both groovy and java files" depends="init">
    <groovyc srcdir="src" destdir="bin/classes">
        <javac debug="on" deprecation="true"/>
    </groovyc>
</target> 
```

# c# - 使用 GDI+ 图形方法更改文本的前景色和背景色 - 转换颜色

> ID：10225092
> 
> 赞同：0
> 
> 时间：2012-04-19T09:18:58.210
> 
> 标签：c#, .net, winforms, gdi+, gdi

我有一个richtextbox，我想将文本变为蓝色的黑色和从白色变为黄色的背景色。

我不想这样做 .SelectionColor=Color.Blue 或 .SelectionBackColor=Color.Yellow 但我想使用 gdi+ FillRectangle 方法或其他方式来做到这一点。

我有一个白色背景的文本，我想将背景颜色设置为黄色，将前景色从黑色变为蓝色。

有没有这样的方法来做到这一点，比如 FillRectangle。我尝试用透明颜色做一个 FillRectangle，但之后颜色不是很好。

一般来说，在 GDI+ 中，我如何将两种颜色从一种转换为另一种？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:13:12.970

所以你可以这样做

```
 Graphics g = ((Control)richTextBox1).CreateGraphics();
        g.FillRectangle(Brushes.Yellow, 0, 0, 100, 100); 
```

# java-me - j2me 中的 midlet.platformRequest

> ID：10225095
> 
> 赞同：3
> 
> 时间：2012-04-19T09:19:10.813
> 
> 标签：java-me, midp

我正在使用 j2me 开发游戏。**当关卡完成时，我使用midlet.platformRequest**调用一个 url（即：www.google.com）。在一些**诺基亚**设备中，它被重定向到浏览器，当我退出浏览器时，它又回到了游戏。但它不适用于*三星*设备。

```
 this.emidlet.platformRequest("https://www.google.co.in/"); 
```

如何解决这个问题呢？所有设备都支持**midlet.platformRequest**吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T10:03:52.730

从[MIDlet.platformRequest() javadoc：](http://java.sun.com/javame/reference/apis/jsr118/javax/microedition/midlet/MIDlet.html#platformRequest%28java.lang.String%29)

> **返回：** `true`如果 MIDlet 套件必须首先退出才能获取内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T10:05:30.667

它依赖于操作系统。

每当您打电话时`midlet.platformRequest`，就会自动控制从应用程序切换到操作系统浏览器

对于诺基亚设备，启动浏览器是基于 1 步的（因此返回到应用程序）。

但在包括三星在内的某些设备中，它是基于 2-3 个步骤的，因此您需要关闭浏览器两次才能返回您的应用程序。

# r - 准确了解 data.table 何时是对另一个 data.table 的引用（相对于副本）

> ID：10225098
> 
> 赞同：214
> 
> 时间：2012-04-19T09:19:30.800
> 
> 标签：r, reference, copy, data.table, assignment-operator

我在理解`data.table`. 一些操作似乎“破坏”了参考，我想确切地了解正在发生的事情。

`data.table`在从另一个创建一个`data.table`（通过`<-`，然后通过 更新新表时`:=`，原始表也被更改。这是预期的，根据：

`?data.table::copy` 和[stackoverflow：按引用传递操作符在数据表包中](https://stackoverflow.com/questions/8030452/pass-by-reference-the-operator-in-the-data-table-package)

这是一个例子：

```
library(data.table)

DT <- data.table(a=c(1,2), b=c(11,12))
print(DT)
#      a  b
# [1,] 1 11
# [2,] 2 12

newDT <- DT        # reference, not copy
newDT[1, a := 100] # modify new DT

print(DT)          # DT is modified too.
#        a  b
# [1,] 100 11
# [2,]   2 12 
```

但是，如果我在分配和上面的行之间插入非`:=`基于修改，现在不再修改：`<-``:=``DT`

```
DT = data.table(a=c(1,2), b=c(11,12))
newDT <- DT        
newDT$b[2] <- 200  # new operation
newDT[1, a := 100]

print(DT)
#      a  b
# [1,] 1 11
# [2,] 2 12 
```

因此，该`newDT$b[2] <- 200`行似乎以某种方式“破坏”了参考。我猜想这会以某种方式调用副本，但我想充分了解 R 是如何处理这些操作的，以确保我不会在我的代码中引入潜在的错误。

如果有人可以向我解释这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-04-19T10:49:24.990

是的，它是 R 中使用`<-`（或`=`或`->`）的子赋值，它制作了*整个*对象的副本。您可以使用`tracemem(DT)`和进行跟踪`.Internal(inspect(DT))`，如下所示。`data.table`功能`:=`并`set()`通过引用分配给它们传递的任何对象。因此，如果该对象先前被复制（通过子分配`<-`或显式`copy(DT)`），那么它就是通过引用修改的副本。

```
DT <- data.table(a = c(1, 2), b = c(11, 12)) 
newDT <- DT 

.Internal(inspect(DT))
# @0000000003B7E2A0 19 VECSXP g0c7 [OBJ,NAM(2),ATT] (len=2, tl=100)
#   @00000000040C2288 14 REALSXP g0c2 [NAM(2)] (len=2, tl=0) 1,2
#   @00000000040C2250 14 REALSXP g0c2 [NAM(2)] (len=2, tl=0) 11,12
# ATTRIB:  # ..snip..

.Internal(inspect(newDT))   # precisely the same object at this point
# @0000000003B7E2A0 19 VECSXP g0c7 [OBJ,NAM(2),ATT] (len=2, tl=100)
#   @00000000040C2288 14 REALSXP g0c2 [NAM(2)] (len=2, tl=0) 1,2
#   @00000000040C2250 14 REALSXP g0c2 [NAM(2)] (len=2, tl=0) 11,12
# ATTRIB:  # ..snip..

tracemem(newDT)
# [1] "<0x0000000003b7e2a0"

newDT$b[2] <- 200
# tracemem[0000000003B7E2A0 -> 00000000040ED948]: 
# tracemem[00000000040ED948 -> 00000000040ED830]: .Call copy $<-.data.table $<- 

.Internal(inspect(DT))
# @0000000003B7E2A0 19 VECSXP g0c7 [OBJ,NAM(2),TR,ATT] (len=2, tl=100)
#   @00000000040C2288 14 REALSXP g0c2 [NAM(2)] (len=2, tl=0) 1,2
#   @00000000040C2250 14 REALSXP g0c2 [NAM(2)] (len=2, tl=0) 11,12
# ATTRIB:  # ..snip..

.Internal(inspect(newDT))
# @0000000003D97A58 19 VECSXP g0c7 [OBJ,NAM(2),ATT] (len=2, tl=100)
#   @00000000040ED7F8 14 REALSXP g0c2 [NAM(2)] (len=2, tl=0) 1,2
#   @00000000040ED8D8 14 REALSXP g0c2 [NAM(2)] (len=2, tl=0) 11,200
# ATTRIB:  # ..snip.. 
```

请注意`a`向量是如何被复制的（不同的十六进制值表示向量的新副本），即使`a`没有更改。甚至整个都`b`被复制了，而不是仅仅改变需要改变的元素。对于大数据，避免这一点很重要，以及`:=`为什么`set()`引入`data.table`.

现在，使用我们的副本，`newDT`我们可以通过引用对其进行修改：

```
newDT
#      a   b
# [1,] 1  11
# [2,] 2 200

newDT[2, b := 400]
#      a   b        # See FAQ 2.21 for why this prints newDT
# [1,] 1  11
# [2,] 2 400

.Internal(inspect(newDT))
# @0000000003D97A58 19 VECSXP g0c7 [OBJ,NAM(2),ATT] (len=2, tl=100)
#   @00000000040ED7F8 14 REALSXP g0c2 [NAM(2)] (len=2, tl=0) 1,2
#   @00000000040ED8D8 14 REALSXP g0c2 [NAM(2)] (len=2, tl=0) 11,400
# ATTRIB:  # ..snip .. 
```

请注意，所有 3 个十六进制值（列点向量和 2 列中的每一列）保持不变。所以它是真正通过引用修改的，根本没有副本。

或者，我们可以参考修改原文`DT`：

```
DT[2, b := 600]
#      a   b
# [1,] 1  11
# [2,] 2 600

.Internal(inspect(DT))
# @0000000003B7E2A0 19 VECSXP g0c7 [OBJ,NAM(2),ATT] (len=2, tl=100)
#   @00000000040C2288 14 REALSXP g0c2 [NAM(2)] (len=2, tl=0) 1,2
#   @00000000040C2250 14 REALSXP g0c2 [NAM(2)] (len=2, tl=0) 11,600
#   ATTRIB:  # ..snip.. 
```

这些十六进制值与我们在上面看到的原始值相同`DT`。键入以获取更多使用和比较的`example(copy)`示例。`tracemem``data.frame`

顺便说一句，如果你`tracemem(DT)`那么`DT[2,b:=600]`你会看到一份报告。这是该`print`方法执行的前 10 行的副本。当使用函数或脚本包装`invisible()`或在函数或脚本中调用时，`print`不会调用该方法。

所有这些也适用于函数内部；即，`:=`不要`set()`在写入时复制，即使在函数内也是如此。如果您需要修改本地副本，请`x=copy(x)`在函数开头调用。但是，记住`data.table`是针对大数据的（以及针对小数据的更快编程优势）。我们故意不想复制大对象（永远）。因此，我们不需要考虑通常的 3* 工作记忆因子经验法则。我们尝试只需要一列大小的工作记忆（即工作记忆系数为 1/ncol 而不是 3）。

* * *

## 回答 #2

> 赞同：113
> 
> 时间：2013-01-12T11:52:14.317

## 简单总结一下。

`<-`with`data.table`就像基础一样；即，在随后使用`<-`（例如更改列名或更改元素，例如`DT[i,j]<-v`）完成子分配之前，不会获取任何副本。然后它像base一样获取整个对象的副本。这就是所谓的写时复制。我认为，最好将其称为子分配复制！`:=`当您使用特殊运算符或`set*`提供的功能时，它不会复制`data.table`。如果您有大量数据，您可能希望使用它们。`:=`并且`set*`不会复制`data.table`，即使在函数内。

鉴于此示例数据：

```
DT <- data.table(a=c(1,2), b=c(11,12)) 
```

以下只是将另一个名称“绑定”`DT2`到当前绑定到该名称的同一数据对象`DT`：

```
DT2 <- DT 
```

这从不复制，也从不复制基础。它只是标记数据对象，以便 R 知道两个不同的名称 (`DT2`和`DT`) 指向同一个对象。*因此，如果之后将任何一个对象分配*给R，则 R 将需要复制该对象。

这也很适合`data.table`。`:=`不是为了这样做。因此，以下是故意的错误`:=`，不仅仅是绑定对象名称：

```
DT2 := DT    # not what := is for, not defined, gives a nice error 
```

`:=`用于通过引用进行*子分配。*但是您不会像在 base 中那样使用它：

```
DT[3,"foo"] := newvalue    # not like this 
```

你像这样使用它：

```
DT[3,foo:=newvalue]    # like this 
```

那`DT`是通过参考改变的。假设您通过引用数据对象添加新列`new`，则无需这样做：

```
DT <- DT[,new:=1L] 
```

因为 RHS 已经`DT`通过引用改变了。额外`DT <-`的是误解了什么`:=`。你可以在那里写，但它是多余的。

`DT`被引用改变，被改变`:=`，甚至在函数内：

```
f <- function(X){
    X[,new2:=2L]
    return("something else")
}
f(DT)   # will change DT

DT2 <- DT
f(DT)   # will change both DT and DT2 (they're the same data object) 
```

`data.table`用于大型数据集，请记住。如果您有 20GB`data.table`的内存，那么您需要一种方法来执行此操作。这是一个非常深思熟虑的设计决定`data.table`。

当然可以复制。您只需要使用以下函数告诉 data.table 您确定要复制 20GB 数据集`copy()`：

```
DT3 <- copy(DT)   # rather than DT3 <- DT
DT3[,new3:=3L]     # now, this just changes DT3 because it's a copy, not DT too. 
```

为避免复制，请不要使用基本类型分配或更新：

```
DT$new4 <- 1L                 # will make a copy so use :=
attr(DT,"sorted") <- "a"      # will make a copy use setattr() 
```

如果您想确保通过引用使用更新`.Internal(inspect(x))`并查看成分的内存地址值（请参阅 Matthew Dowle 的回答）。

像这样写可以让您按 group 按引用`:=`进行*子*分配。您可以按组通过引用添加新列。所以这就是为什么在里面这样做：`j`*`:=``[...]`*

 *```
DT[, newcol:=mean(x), by=group] 
```*

# caching - 禁用谷歌 api 缓存

> ID：10225100
> 
> 赞同：2
> 
> 时间：2012-04-19T09:19:32.483
> 
> 标签：caching, google-api-client

只是想知道有没有办法禁用 Google API 缓存？

在我使用 Google Plus API 的网络应用程序中，它缓存了大量数据，导致达到磁盘限制，所以我必须手动删除文件夹。我发现可以更改缓存目录，但不知道如何禁用它。

抱歉，无法为此问题提供任何代码示例。希望不会被认为不合适。

# javascript - 使用自定义 Twitter 推文按钮自动缩短网址

> ID：10225103
> 
> 赞同：0
> 
> 时间：2012-04-19T09:19:42.423
> 
> 标签：javascript, twitter, url-shortener

有没有办法让 twitter 在使用自定义按钮时生成我的 url 的缩短版本（根据：[https](https://dev.twitter.com/docs/tweet-button#build-your-own) ://dev.twitter.com/docs/tweet-button#build-your-own ）。

我不需要任何计数器，我只想分享一个文本、缩短的 url 和一个标签。

```
var twUrl = 'http://twitter.com/share?count=none&text=' + encodeURIComponent(text) + '&url=' + url + '&hashtags=' + encodeURIComponent(hashtags);
    window.open(twUrl, 'sharer', 'toolbar=0,status=0,width=650,height=254'); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:23:16.147

您可以使用 bitly API 来缩短您的网址。

查看文档：[http ://dev.bitly.com/get_started.html](http://dev.bitly.com/get_started.html)

另请参阅this SO question with a code example in answer on how to make use the bitly API using jquery： [jQuery on the fly URL Shorter](https://stackoverflow.com/questions/1771397/jquery-on-the-fly-url-shortener)

# objective-c - Objective-C - NSXML 读取我不会读取的新行

> ID：10225108
> 
> 赞同：1
> 
> 时间：2012-04-19T09:20:10.597
> 
> 标签：objective-c, ios, xml, nsxmlparser

我的问题很简单。我正在解析 XML，NSXML 的解析过程非常好。我把所有的声音放在一些数组中，现在我正在用它组成一个字符串。我的问题是，如果我以这种方式编写 XML ......

```
<main>
  <introductions>
    <text>Text 01</text> 
    <text>Text 02</text>
  </introductions>
</main> 
```

...我将 2 个字符串附加到我获得的情节提要上的标签中：

```
Text 01
Text 02 
```

我试图弄清楚那条新线来自哪里，所以我尝试了一些东西，我发现这个 XML ......

```
<main>
  <introductions>
    <text>Text 01</text> <text>Text 02</text>
  </introductions>
</main> 
```

...产生...

```
Text 01 Text 02 
```

为什么这个？为什么 NSXML 正在读取标签之外的内容？我怎样才能避免这种情况？

如果有帮助，这就是我初始化解析器的方式：

```
 NSURL *xml = [NSURL fileURLWithPath:[[NSBundle mainBundle]pathForResource:@"frasi" ofType:@"xml"]];
xmlParser = [[NSXMLParser alloc] initWithData:[NSData dataWithContentsOfURL:xml]];
[xmlParser setDelegate:self];
[xmlParser setShouldProcessNamespaces:NO];
[xmlParser setShouldReportNamespacePrefixes:NO];
[xmlParser setShouldResolveExternalEntities:NO];
[xmlParser parse]; 
```

这是其余的代码（对于我真正的 XML）：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName 
  namespaceURI:(NSString *)namespaceURI 
  qualifiedName:(NSString *)qName 
    attributes:(NSDictionary *)attributeDict{
    currentElement = [elementName copy];

    if ([currentElement isEqualToString:@"introduzioni"] || [currentElement isEqualToString:@"soggetti"]
        || [currentElement isEqualToString:@"verbi"] || [currentElement isEqualToString:@"luoghi"]){
        ++depth;
        //[self showCurrentDepth];
        NSLog(@"Sezione %@", elementName);
        sezione = [[NSString alloc] init];
        sezione = currentElement;
    }
    else if ([currentElement isEqualToString:@"testo"]){
        currentName = [[NSMutableString alloc] init];
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName 
  namespaceURI:(NSString *)namespaceURI 
  qualifiedName:(NSString *)qName{

    if ([elementName isEqualToString:@"introduzioni"] || [elementName isEqualToString:@"soggetti"]
        || [elementName isEqualToString:@"verbi"] || [elementName isEqualToString:@"luoghi"]){
        --depth;
        //[self showCurrentDepth];
    }
    else if ([elementName isEqualToString:@"testo"]){
        if (depth == 1){
          NSLog(@"Testo: %@", currentName);
            if([sezione isEqualToString:@"introduzioni"])
                [arrayIntroduzioni addObject:currentName];
            if([sezione isEqualToString:@"soggetti"])
                [arraySoggetti addObject:currentName];
            if([sezione isEqualToString:@"verbi"])
                [arrayVerbi addObject:currentName];
            if([sezione isEqualToString:@"luoghi"])
                [arrayLuoghi addObject:currentName];
        }
    }
}        

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
    if ([currentElement isEqualToString:@"testo"]){
        [currentName appendString:string];
    } 
} 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:56:01.673

委托方法`parser:foundCharacters:`将提供所有字符数据，即您要查找的数据以及标签之间的所有空白。

当收到第一次关闭`</text>`和第二次打开之间的空白时`<text>`，变量`currentElement`仍然包含`"testo"`. `currentName`因此，即使解析器位于您感兴趣的标签之外，您也可以附加空格（换行符） 。

为了修复它，您需要更好地处理`currentElement`（例如将其设置为`nil`每个结束标记之后），或者您需要另外检查堆栈深度。

# google-app-engine - 应用程序引擎应用程序标识符别名

> ID：10225110
> 
> 赞同：3
> 
> 时间：2012-04-19T09:20:30.533
> 
> 标签：google-app-engine

我了解并已经看到 Google App 引擎迁移到 High Replication。

在流程结束时，GOOGLE 会设置别名。这可以由我手动完成吗？

如何在 Google App Engine 中的应用程序上设置别名？想要这样做的原因是我通过自己复制和控制整个事件来转换为 HRD。

我可以从管理屏幕的某个地方自己设置别名吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T00:11:00.580

如果您不小心将您的应用程序分配给另一个应用程序，则别名分配错误。能够扭转这种误导会很有用，但看起来该功能不可用。

# java - JsonReader 和安卓 2.3.3

> ID：10225112
> 
> 赞同：0
> 
> 时间：2012-04-19T09:20:38.553
> 
> 标签：java, android

我正在为 android 级别 10（版本 2.3.3）构建我的应用程序。

我需要使用JsonReader，但是这个版本中不存在，似乎也不在支持包中。

谁能告诉我是否有解决方法——当然除了编译到 11 级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:09:01.140

我已经将一些来自 android 源的文件添加到我的项目中 - 这些源是在没有隐藏 API 的情况下编写的

[字符串池](https://android.googlesource.com/platform/libcore/+/master/luni/src/main/java/libcore/internal/StringPool.java)

JsonReader.java

JsonScope.java

JsonToken.java

从任何源集线器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:27:45.467

您可以找到任何开源库（jar 格式）并将其添加到类路径中。

您可以在这个[问题中详细阅读](https://stackoverflow.com/questions/1668862/good-json-java-library)

[或者您可以使用http://www.json.org/java/](http://www.json.org/java/)中提供的一些 java 类来创建自己的实用程序类

# java - 如何避免空表的“SELECT max(rank) FROM test”的空结果？

> ID：10225115
> 
> 赞同：8
> 
> 时间：2012-04-19T09:20:48.007
> 
> 标签：java, mysql, hibernate, jpa

我需要在 JPQL (2.0) 中形成一个查询来选择最大值（等级）。

我用：`SELECT max(rank) FROM test`

这很好用，除了表为空的情况，结果是`null`，但我需要`0`.

*如果我能够用一个简单的 if 语句“捕捉”空值，这将没有问题，但我不能这样做（框架只允许指定 JPA 查询，但不允许指定 java 代码）。*

如果表为空，是否有人知道如何调整该查询以获取一个`0`而不是一个？`null`- 数据库是 MySQL，不能选择原生查询或存储过程。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T09:22:02.497

也许：

```
SELECT COALESCE(MAX(rank), 0) FROM test 
```

**编辑**

`COALESCE`JPQL（JPA 2.0）似乎支持：http: [//java.sun.com/developer/technicalArticles/JavaEE/JavaEE6Overview_Part3.html](http://java.sun.com/developer/technicalArticles/JavaEE/JavaEE6Overview_Part3.html)

# guice - Guice - 监听器注入

> ID：10225116
> 
> 赞同：0
> 
> 时间：2012-04-19T09:20:52.967
> 
> 标签：guice

我有一个由 Google Guice 创建的单例服务。该服务具有注册/注销侦听器方法。一些服务方法向注册的侦听器发送通知。Guice 有没有办法在引导程序中取消/注册一些听众？我还希望有可能在运行时添加侦听器。

谢谢， Soccerrash

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:30:57.827

使用提供者（或提供方法）

```
@Provides
@Singleton
public YourService provideService(ListenerA a, ListernerB b) {
YourService service = new YourService();
service.register(a);
service.register(b);
return service;
} 
```

您可以稍后手动添加Listerner c。

# database - 开发此数据库的优化方法？

> ID：10225117
> 
> 赞同：0
> 
> 时间：2012-04-19T09:20:55.697
> 
> 标签：database, path-finding

我正在从事一个小型个人项目，以简化人们获取有关公交车站信息的方式，他们将花费的公交线路时间和价格......

我们现在正在考虑从一个城市到另一个城市的“正常”公交线路。

但未来我们要增加城际公交线路。

最终目标是找到从 City1-stop1 到 City3-stop4 的最佳路径

而且city1没有直达city3的公交线路

所以系统需要能够在city3的线路和city1的线路之间找到共同的停靠点......

目前我们有这样的事情：

BusLine (start, end, company) 停靠点 (line, idstop, name, price, time)

但我们并不认为这是针对我们想做的工作进行优化的。

因为如果它们在同一行中，那么在 stop1 和 stop2 之间找到一条线很容易。

但是发现一条共同点似乎更繁重的查询，我们希望尽可能简单。

我能从中得到什么想法吗？

非常感谢

# node.js - 随时向客户发送 MongoDB 文档？

> ID：10225120
> 
> 赞同：1
> 
> 时间：2012-04-19T09:21:02.703
> 
> 标签：node.js, mongodb, redis, database, nosql

我想随时向用户发送 Mongo 文档。基本上我需要的是监听更改事件，然后当文档发生更改时，它会将其传递给一个向正确人员广播的函数。

我可以以某种方式监听更改事件吗？有没有更好的数据库来做这种事情？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:51:48.583

[SERVER-124](https://jira.mongodb.org/browse/SERVER-124)可能有一天会实现。同时，您可以挂钩到复制过程。基本上，您应该做合法复制客户端所做的事情：[尾随](http://www.mongodb.org/display/DOCS/Tailable+Cursors)`local.oplog`集合。它包含所有数据修改，您可以过滤它们，只选择感兴趣的并广播给客户。

见这里：[http ://www.mongodb.org/display/DOCS/Replication+Internals](http://www.mongodb.org/display/DOCS/Replication+Internals)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:46:43.047

这是一个计划好的功能。在这里投票 [https://jira.mongodb.org/browse/SERVER-124](https://jira.mongodb.org/browse/SERVER-124)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-05T18:17:24.027

您可能对[mongo-oplog](https://www.npmjs.org/package/mongo-oplog)感兴趣，它通过利用 MongoDB 的复制系统在 NodeJS 中实现了这一点。

# ant - 如何从 apache ant build.xml 文件启动和停止 jboss

> ID：10225122
> 
> 赞同：-1
> 
> 时间：2012-04-19T09:21:17.217
> 
> 标签：ant, jboss, hudson

我已经制作了 jar 战争 EAR

使用 ant 和 Hudson 并将所有文件存储在某个临时文件夹中

现在我想使用 Apache ANT 将所有 war 和 ear 文件复制到 jboss jboss/default/deploy 文件夹

我怎样才能做到这一点？？

以下是我的主构建文件，它调用所有其他 build.xml 文件并制作 jar war ear 文件

但是在制作完所有文件之后，这不会将所有文件复制到 jboss/default/deploy 文件夹

```
<copy todir="${jbossdeploy.dir}" overwrite="yes">
        <fileset dir="${class.dir}/ear" includes="MessageBoardEAR.ear"/>

    </copy> 
```

* * *

```
<project name="master" >

    <property name="class.dir" location="../Source/buildwork" />
    <property name="ecpsproperties.dir" location="D:\ecpsproperties\jars\platform" />
    <property name="jbossdeploy.dir" location="D:\jboss-6.1.0.Final\server\default\deploy" />

    <target name="clean">
        <delete dir="${class.dir}" />

    </target>

    <target name="makedir">
        <mkdir dir="${class.dir}" />
        <mkdir dir="${class.dir}/jar" />
        <mkdir dir="${class.dir}/ear" />
        <mkdir dir="${class.dir}/war" />
    </target>

<filelist id="projects" dir=".">
        <file name="../Source/ValueObjects/build.xml"/>
        <file name="../Source/ECPSValueObjects/build.xml"/>
        <file name="../Source/ECPSUtils/build.xml"/>
        <file name="../Source/CommonExceptions/build.xml"/>
         <file name="../Source/ECPSExceptions/build.xml"/>
         <file name="../Source/ECPSCommon/build.xml"/>
         <file name="../Source/BaseDAO/build.xml"/>
         <file name="../Source/PageManagerValueObjects/build.xml"/>
         <file name="../Source/PageManagerDAO/build.xml"/>
         <file name="../Source/ECPSDAO/build.xml"/>
         <file name="../Source/PageManagerEJBClient/build.xml"/>
         <file name="../Source/PartyEJBClient/build.xml"/>
          <file name="../Source/ReportsEJBClient/build.xml"/>
         <file name="../Source/StagingEJBClient/build.xml"/>
          <file name="../Source/MessageBoardEJBClient/build.xml"/>
         <file name="../Source/PageManagerFacade/build.xml"/>
          <file name="../Source/PartyFacade/build.xml"/>
         <file name="../Source/ReportsFacade/build.xml"/>
          <file name="../Source/StagingFacade/build.xml"/>
         <file name="../Source/MessageBoardFacade/build.xml"/>

          <file name="../Source/MessageBoardEJB/build.xml"/>
         <file name="../Source/MessageBoardEAR/build.xml"/>
         <file name="../Source/PageManagerEJB/build.xml"/>
          <file name="../Source/PageManagerEAR/build.xml"/>

           <file name="../Source/PartyEJB/build.xml"/>
         <file name="../Source/PartyEAR/build.xml"/>

         <file name="../Source/ReportsEJB/build.xml"/>
          <file name="../Source/ReportsEAR/build.xml"/>

          <file name="../Source/StagingEJB/build.xml"/>
         <file name="../Source/StagingEAR/build.xml"/>

          <file name="../Source/Admin/build.xml"/>
         <file name="../Source/eCPSClient/build.xml"/>
          <file name="../Source/MessageBoardServices/build.xml"/>
           <file name="../Source/OAuth/build.xml"/>
            <file name="../Source/PageManagerRest/build.xml"/>
             <file name="../Source/PartyServices/build.xml"/>
             <file name="../Source/ReportsServices/build.xml"/>
          <file name="../Source/StagingServices/build.xml"/>

 </filelist>

    <copy todir="${jbossdeploy.dir}" overwrite="yes">
        <fileset dir="${class.dir}/ear" includes="MessageBoardEAR.ear"/>

    </copy>

 <target name="main" depends="clean, makedir">
    <subant>

      <filelist refid="projects" />

    </subant>

 </target>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:23:46.400

使用复制任务，例如

```
<copy file="myfile.txt" todir="../some/other/dir"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:08:43.030

这应该可以工作，因为我在 main 下添加了复制任务：

```
<project name="master" >

<property name="class.dir" location="../Source/buildwork" />
<property name="ecpsproperties.dir" location="D:\ecpsproperties\jars\platform" />
<property name="jbossdeploy.dir" location="D:\jboss-6.1.0.Final\server\default\deploy" />

<target name="clean">
<delete dir="${class.dir}" />

</target>

<target name="makedir">
<mkdir dir="${class.dir}" />
<mkdir dir="${class.dir}/jar" />
<mkdir dir="${class.dir}/ear" />
<mkdir dir="${class.dir}/war" />
</target>

<filelist id="projects" dir=".">
<file name="../Source/ValueObjects/build.xml"/>
<file name="../Source/ECPSValueObjects/build.xml"/>
<file name="../Source/ECPSUtils/build.xml"/>
<file name="../Source/CommonExceptions/build.xml"/>
<file name="../Source/ECPSExceptions/build.xml"/>
<file name="../Source/ECPSCommon/build.xml"/>
<file name="../Source/BaseDAO/build.xml"/>
<file name="../Source/PageManagerValueObjects/build.xml"/>
<file name="../Source/PageManagerDAO/build.xml"/>
<file name="../Source/ECPSDAO/build.xml"/>
<file name="../Source/PageManagerEJBClient/build.xml"/>
<file name="../Source/PartyEJBClient/build.xml"/>
<file name="../Source/ReportsEJBClient/build.xml"/>
<file name="../Source/StagingEJBClient/build.xml"/>
<file name="../Source/MessageBoardEJBClient/build.xml"/>
<file name="../Source/PageManagerFacade/build.xml"/>
<file name="../Source/PartyFacade/build.xml"/>
<file name="../Source/ReportsFacade/build.xml"/>
<file name="../Source/StagingFacade/build.xml"/>
<file name="../Source/MessageBoardFacade/build.xml"/>

<file name="../Source/MessageBoardEJB/build.xml"/>
<file name="../Source/MessageBoardEAR/build.xml"/>
<file name="../Source/PageManagerEJB/build.xml"/>
<file name="../Source/PageManagerEAR/build.xml"/>

<file name="../Source/PartyEJB/build.xml"/>
<file name="../Source/PartyEAR/build.xml"/>

<file name="../Source/ReportsEJB/build.xml"/>
<file name="../Source/ReportsEAR/build.xml"/>

<file name="../Source/StagingEJB/build.xml"/>
<file name="../Source/StagingEAR/build.xml"/>

<file name="../Source/Admin/build.xml"/>
<file name="../Source/eCPSClient/build.xml"/>
<file name="../Source/MessageBoardServices/build.xml"/>
<file name="../Source/OAuth/build.xml"/>
<file name="../Source/PageManagerRest/build.xml"/>
<file name="../Source/PartyServices/build.xml"/>
<file name="../Source/ReportsServices/build.xml"/>
<file name="../Source/StagingServices/build.xml"/>

</filelist>

<target name="main" depends="clean, makedir">
<subant>

<filelist refid="projects" />

</subant>

<copy todir="${jbossdeploy.dir}" overwrite="yes">
<fileset dir="${class.dir}/ear" includes="MessageBoardEAR.ear"/>

</copy>
</target>
</project> 
```

# c - 迁移到不推荐使用的 ldap 函数时出错

> ID：10225126
> 
> 赞同：5
> 
> 时间：2012-04-19T09:21:34.340
> 
> 标签：c, openldap

我正在将不推荐使用的 ldap 函数更改为不推荐使用的函数。但是我遇到了问题`ldap_sasl_bind_s. It returns error code 49`，这意味着凭据无效。但我确信这些凭据是有效的。否则我添加

```
TLS_REQCERT never

TLSVerifyClient never 
```

到**/etc/openldap/ldap.conf**。我仍然得到错误。

```
ldap_simple_bind_s(q->ld, binddn, creds.bv_val);  //works well

ldap_sasl_bind_s(q->ld, binddn, LDAP_SASL_SIMPLE , &creds, NULL, NULL, NULL); //returns ldap error code 49 but continues working 
```

主要问题是：当我使用 ldap_sasl_bind_s 时，它不会绑定我在 ldap 架构中得到的所有属性。此外，当我搜索现有属性时，它会返回 NOSUCH 错误。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T07:45:53.917

涵盖 uber-basics 的基本 C 编程，尽管有些东西告诉我你已经读过这些东西：（而且我无法从你的问题中看出你的应用程序是外部的还是你正在从 openldap 中移动不推荐使用的函数？来源）

您是否阅读过[这份文件](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2Fapis%2Fldap_sasl_bind_s.htm)，它向我表明了这一点，`ldap_simple_bind`并且`ldap_sasl_bind_s`如果`char *LDAP_SASL_SIMPLE = 0;`

# objective-c - 将比例设置为始终在地图上显示至少 1 个点以及用户位置

> ID：10225127
> 
> 赞同：0
> 
> 时间：2012-04-19T09:21:35.633
> 
> 标签：objective-c, google-maps, ios5

如果我在地图视图中有 x 个位置，并且我想确保 1 个位置点以及用户位置始终可见，那么最好的方法是什么？我意识到在地图上设置比例很重要，但我只是不确定计算这个的最佳方法。我是 Objective-c 的新手，但我想我主要是在计算这个公式而不是任何特定的代码。

例如，如果用户在法国，但最近的位置在英国，我想在我的应用中显示他们的位置和至少一个最近的位置。我意识到如果用户在数千英里之外，这可能是一个糟糕的用户体验，但这是要求。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:35:14.877

您可以从您的位置计算 MKMapRect，然后将其设置在[setVisibleMapRect:animated:](http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html)中。

# javascript - 如何对一些 T 恤进行拼版（或组合两张图片）

> ID：10225130
> 
> 赞同：0
> 
> 时间：2012-04-19T09:21:42.810
> 
> 标签：javascript, image, drag-and-drop

我需要制作一个编辑器，用户可以将一个图像放在另一个图像上，这可能吗？

例如，如果我们有一件白色的 T 恤，并且我们有另一个花朵图像，当我们将一个花朵图像拖放到 T 恤上时，T 恤就会有前一个图像的绘制花朵，结果是一件带有花朵图片的 T 恤，我可以用什么来更快地做到这一点？，我想我需要 Javascript（拖放）来拖动我希望它出现在另一个图像中的图像，换句话说，我想合并两张图片，但第二张图片在第一张图片上被裁剪，我希望你明白我想说什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:54:05.713

您可以使用这个简单的 HTML：

```
<div style="background-color: white;position:absolute;">
  <img id="flowers" style="position:absolute;" src="empty.png"> // Empty image
  <img style="position:absolute;" src="mask1.png"> // A transparent T-shirt pattern surrounded with non-transparent background color (in this case white)
  <img style="position:absolute;" src="mask2.png"> // 20-50% transparent pattern for shadows in T-shirt
</div> 
```

在创建图像时，也可以通过使用图层来组合蒙版图像。这里的诀窍是只有图像中的 T 恤图案是透明的，而使 T 恤“活”的阴影只是部分透明。

当您完成拖放操作时：

```
document.getElementById('flowers').src='your_path_to_flowers.png'; 
```

这是一种相当老式的方式，但它也适用于旧浏览器。我认为 HTML5/CSS3 中有一些实用程序，您可以使用它们来裁剪图像。

# c# - 在 LinQ Lambda 表达式中连接两列值

> ID：10225131
> 
> 赞同：13
> 
> 时间：2012-04-19T09:21:43.660
> 
> 标签：c#, sql, linq, lambda

我是 LinQ 的新手，那些 lambdas 对我来说似乎很棘手:(

我有一张桌子，里面有两列。名字和姓氏。我正在使用 LinQ 填充网格视图。

```
protected void Page_Load(object sender, EventArgs e)
    {
        myLinQtoSQLClassDataContext objDataContext = new myLinQtoSQLClassDataContext();

        var allUserList = from CurrentUser in objDataContext.Users.Where(c => c.Is_Deleted != false)                              
                          select new
                          {
                              CurrentUser.First_Name, 
                              CurrentUser.Last_Name,
                              CurrentUser.Email_ID,
                              CurrentUser.GUID
                          };

        GridView1.DataSource = allUserList;
        GridView1.DataBind();                              
    } 
```

我可以使用 LinQ 检索值，但我想将名字和姓氏连接起来，中间有一个空格。

我试图实现的等效 SQL 查询如下所示：

```
Select First_name + ' ' + Last Name as Username, Email_ID, GUID
From tbl_Users where Is_Deleted != false 
```

如何通过 lambda 表达式实现这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-19T09:24:45.277

您可以使用字符串连接：

```
select new
{
    Username = CurrentUser.First_Name + " " + CurrentUser.Last_Name,
    CurrentUser.Email_ID,
    CurrentUser.GUID
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T09:24:53.223

尝试

```
 select new
            {
                          FullName = CurrentUser.First_Name + " " + CurrentUser.Last_Name,
                          CurrentUser.Email_ID,
                          CurrentUser.GUID
            }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T09:26:39.150

```
var allUserList = from CurrentUser in objDataContext.Users.Where(c => c.Is_Deleted != false)                              
                  select new
                  {
                      Name = CurrentUser.First_Name + " " + CurrentUser.Last_Name, 
                      CurrentUser.Email_ID,
                      CurrentUser.GUID
                  }; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T09:25:27.337

你应该给你的[匿名类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)'keys'（只读属性）：

```
select new
{
  Name = CurrentUser.First_Name + " " + CurrentUser.Last_Name,
}; 
```

然后在分配用户名时连接字符串。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T09:27:19.127

看看这个[CLR Method to Canonical Function Mapping](http://msdn.microsoft.com/en-us/library/bb738681.aspx.)
.Net 提供了许多可以直接映射到查询的方法，你必须使用其中一个来添加两个字符串
，所以你可以使用的一个是

```
select new 
{ 
    Username = Concat(first_Name,Last_Name), 
    CurrentUser.Email_ID, 
    CurrentUser.GUID 
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-30T20:19:12.460

这是另一个有效但尚未列出的变体：

```
var allUserList =  objDataContext.Users.Where(c => c.Is_Deleted != false).
     Select(s => new{First_Name + " " + Last_Name, Email_ID, GUID}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-30T18:31:37.680

```
select new
{
    Username = string.Format("{0} {1}", CurrentUser.First_Name, CurrentUser.Last_Name),
    CurrentUser.Email_ID,
    CurrentUser.GUID
}; 
```

# ios - iOS UITableView：使用 CAGradientLayer 将背景颜色分配为渐变

> ID：10225132
> 
> 赞同：6
> 
> 时间：2012-04-19T09:21:49.363
> 
> 标签：ios, uitableview, xcode4.3, cagradientlayer

我刚开始在 Xcode 4.3 中使用 Master-Detail 视图模板，我正在尝试更改 master 的背景颜色并将其设置为颜色渐变。这是我尝试过的：

颜色.m

```
#import "Colors.h"

@implementation Colors

+ (UIColor *) navigationMenuGradientTop
{
    return [UIColor colorWithRed:213.0f/255.0f green:91.0f/255.0f blue:92.0f/255.0f alpha:1.0f];
}

+ (UIColor *) navigationMenuGradientBottom
{
    return [UIColor colorWithRed:188.0f/255.0f green:0.0f/255.0f blue:1.0f/255.0f alpha:1.0f];    
}

+ (CAGradientLayer *) navigationMenuGradient
{
    NSArray *colors = [NSArray arrayWithObjects:(id)self.navigationMenuGradientTop, self.navigationMenuGradientBottom, nil];
    CAGradientLayer *gradientLayer = [CAGradientLayer layer];
    gradientLayer.colors = colors;

    return gradientLayer;
}
@end 
```

主视图控制器.m

```
import "Colors.h"

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

    CAGradientLayer *bgLayer = [Colors navigationMenuGradient];
    bgLayer.frame = tableView.bounds;
    [tableView.layer insertSublayer:bgLayer atIndex:0];

    return cell;
} 
```

运行时出现以下错误`main`-`Thread 1: EXC_BAD_ACCESS (code=1, address=0xxxxxxxx)`

```
int main(int argc, char *argv[])
{
    @autorelasespool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

我也将 QuartzCore 框架添加到项目中。我在这里错过了什么？当发生此类错误时，我通常应该往哪个方向发展（因为构建成功，应用程序似乎在这里崩溃了）？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-19T09:27:55.880

```
UIView *view = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 100)] autorelease];
CAGradientLayer *gradient = [CAGradientLayer layer];
gradient.frame = view.bounds;
gradient.colors = [NSArray arrayWithObjects:(id)[[UIColor blackColor] CGColor], (id)[[UIColor whiteColor] CGColor], nil];
[view.layer insertSublayer:gradient atIndex:0]; 
```

来自：[UIView 上的渐变和 iPhone 上的 UILabels](https://stackoverflow.com/a/1931498)

此代码可以帮助您解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-24T03:12:37.313

为了向视图添加背景渐变，我按照此链接上的教程进行操作：

[http://danielbeard.wordpress.com/2012/02/25/gradient-background-for-uiview-in-ios/](http://danielbeard.wordpress.com/2012/02/25/gradient-background-for-uiview-in-ios/)

就我而言，我有一个 UITableView 并希望渐变在背景中。当我从链接中使用下面的代码时，我的表格视图消失了。

```
-(void) ViewWillAppear:(BOOL) animated {   
CAGradientLayer *bgLayer = [BackgroundLayer blueGradient];
bgLayer.frame = self.view.bounds;
[self.view.layer insertSublayer:bgLayer atIndex:0];
} 
```

在如下修改我的代码时，可以同时拥有背景渐变和表格视图。

```
-(void) ViewDidAppear:(BOOL) animated {   
CAGradientLayer *bgLayer = [BackgroundLayer blueGradient];
bgLayer.frame = self.view.bounds;
[self.tableView.layer insertSublayer:bgLayer atIndex:0];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-16T12:21:07.123

嘿，在这里看看这个人的博客。这对我帮助很大！我根据我的要求修改了课程，瞧！

[http://danielbeard.wordpress.com/2012/02/25/gradient-background-for-uiview-in-ios/](http://danielbeard.wordpress.com/2012/02/25/gradient-background-for-uiview-in-ios/)

# java - 在android中使用这种编码获取编码、读写？

> ID：10225142
> 
> 赞同：0
> 
> 时间：2012-04-19T09:22:19.377
> 
> 标签：java, android

如何检查文件中使用的编码，然后使用此编码读取文件并在 Android 中使用相同或不同的编码保存。我还没有看到任何好的选择。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:28:54.037

使用[juniversalchardet](http://code.google.com/p/juniversalchardet/)库自动检测编码。它有一个要查找的每个定义的编码集数组。

*目前支持的编码有：*

```
Chinese
    ISO-2022-CN
    BIG5
    EUC-TW
    GB18030
    HZ-GB-23121 

Cyrillic
    ISO-8859-5
    KOI8-R
    WINDOWS-1251
    MACCYRILLIC
    IBM866
    IBM855 

Greek
    ISO-8859-7
    WINDOWS-1253 

Hebrew
    ISO-8859-8
    WINDOWS-1255 

Japanese
    ISO-2022-JP
    SHIFT_JIS
    EUC-JP 

Korean
    ISO-2022-KR
    EUC-KR 

Unicode
    UTF-8
    UTF-16BE / UTF-16LE
    UTF-32BE / UTF-32LE / X-ISO-10646-UCS-4-34121 / X-ISO-10646-UCS-4-21431 

Others
    WINDOWS-1252 
```

# java - 在高负载下在 Netty 服务器中花费较长时间的请求

> ID：10225143
> 
> 赞同：1
> 
> 时间：2012-04-19T09:22:25.860
> 
> 标签：java, netty

我们使用 Netty 框架构建了一个实时系统来处理我们的 HTTP 请求。20% 的服务调用本质上是长轮询，在大多数情况下，我们会在 55 秒后回复。

随着负载的增加，响应时间逐渐增加，在高负载条件下（20000 个长轮询连接和 10000 个短轮询连接建立），响应时间超过 5 秒。

我们确认请求在 netty 服务器级别延迟。所有其他因素（客户端、Nginx、服务器业务逻辑）都被验证为不存在问题。我们甚至尝试在完全移除业务逻辑的情况下运行测试。结果还是一样。

有人可以对如何调整 Netty 来处理此类负载有所了解。

湿婆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:06:44.527

听起来您可能还没有将这 20% 的请求处理置于管道中的 ExecutionHandler 之后。如果是这种情况，那么您的工作线程会卡住等待并且无法处理新请求。尽管您可以确保在 ExecutionHandler 之前处理那些可以立即处理的请求。

org.jboss.netty.handler.execution.ExecutionHandler

# sql-server - 数据库字段的多个值

> ID：10225146
> 
> 赞同：0
> 
> 时间：2012-04-19T09:23:01.530
> 
> 标签：sql-server, database, many-to-many

我在和 sql server 多对多关系方面遇到了一些问题，我已经创建了链接器表，但我不明白现在该怎么做，我要发布数据库图供大家查看，不要介意葡萄牙语，我会为你们提供一种理解的方式，

表 Jogadores 表示球员，表 Paises 表示国家，表 posicoes 表示位置，其想法是一名球员可以拥有多个位置，并且多个国籍绞盘是国家表中的一个字段。

![在此处输入图像描述](../Images/92720edbe907e3378eb1e2cafe24f405.png)

现在我如何使用 Posicao_Pais 的链接器表来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:29:47.630

Posicao_Pais 表必须至少有 3 个字段...

```
id_player
id_position
id_country 
```

你不需要位置和国家之间的关系，因为有关系的玩家是……然后你把桌子和这个联系起来

所以你应该叫它 Player_Position_country

另一种方式：

```
create table player(
id_player int primary key identity,
.
.
.);
go;
create table position(
id_position int primary key identity,
.
.
.);
go;
create table country(
id_country int primary key identity,
.
.
.);
go;
create table player_position(
id_player references player,
id_position references position);
go;
create table player_country(
id_player references player,
id_country references country);
go; 
```

这样，在您的添加过程中，您将首先添加玩家，然后是国家/地区，然后是位置，然后是关系

# css - IE7 + css 类继承

> ID：10225163
> 
> 赞同：1
> 
> 时间：2012-04-19T09:23:51.030
> 
> 标签：css, internet-explorer-7, styles, knockout.js

我使用淘汰赛 js 来呈现我的 UI。此外，我使用 reset.css 来清除我的样式。我在我的重置 css 中有这个：

```
ol, ul {
list-style-image:none;
list-style-position:outside;
list-style-type:none;
} 
```

在我的样式文件中：

```
.wysiwyg ol, .wysiwyg ul
{
    list-style: inherit !important;
    padding-left: 15px;
    margin-bottom: 10px;
}
.wysiwyg ol li
{
    list-style: decimal outside;
}
.wysiwyg ul li
{
    list-style: disc outside;
} 
```

问题在于列表的样式不适用于 IE7。但是当我在仿真模式下使用 IE9 并按下“编辑”按钮并保存标记时，一切正常。所以我认为这是css类链接和继承的问题。有人可以提前帮助如何强制 IE7 使用我的 css 类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:31:43.743

IE <8 在继承方面存在大量问题。解决这个问题的最简单方法是重新声明样式而不是继承，如果这对您来说可能的话。

你也可以尝试使用[ie7-js](http://code.google.com/p/ie7-js/)，它试图让 IE7 表现得像一个符合标准的浏览器。它工作得很好，但并不完美：使用重置样式表时可能会遇到问题。试一试，看看它是否适合你。

第三种可能性是使用像这样的 IE css 表达式（注意：这是直接从我的脑海中输入的，未经测试 - 但你应该明白）：

```
list-style:inherit; /* standards-compliant browsers */
//list-style:expression(this.parentNode.currentStyle['listStyle']); /* IE */ 
```

# ruby - Ruby中ifs和case语句形式之间的等价性

> ID：10225167
> 
> 赞同：1
> 
> 时间：2012-04-19T09:24:04.760
> 
> 标签：ruby, case, abstract-syntax-tree, equivalence, ruby-parser

使用 ruby​​_parser 和 Ruby2Ruby gems，我正在编写代码来跟踪已评估的条件以及它们的结果和参数是什么。为了使这尽可能简单，我有时会稍微重写 AST。当然，只有当我确定结果的功能与原始结果完全相同时，我才能这样做。

我是否正确断言以下三个 Ruby 片段在功能上是等效的，假设三个点被一个有效的 Ruby 表达式替换？我是否忽略了任何边缘情况？

```
case var
  when foo 
    something
  when ... 
    another_thing
  else 
    something_else
end

if foo === var 
  something
elsif ... === var
  another_thing
else  
  something_else
end

case
  when foo === var 
    something
  when ... === var 
    another_thing
  else 
    something_else
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:58:35.877

如果是幂等的，这三个片段是等价`var`的，即`var`多次评估与评估一次具有相同的副作用。

因此，如果`var`真的是一个变量，那么您是安全的，但请记住，它可以是任意表达式，包括发送到副作用方法（如`puts`）的消息。

例如

```
case puts('Hello')
when 1
when 2 
```

不一样*_*

```
if 1 === puts('Hello')
elsif 2 === puts('Hello') 
```

因为在后一种情况下，“Hello”将被打印*两次*。

更好的翻译可能是：

```
__randomly_generated_guaranteed_unique_local_variable_jhggfq45g345 = var

if foo === __randomly_generated_guaranteed_unique_local_variable_jhggfq45g345 
  something
elsif ... === __randomly_generated_guaranteed_unique_local_variable_jhggfq45g345
  another_thing
else  
  something_else
end

case
  when foo === __randomly_generated_guaranteed_unique_local_variable_jhggfq45g345
    something
  when ... === __randomly_generated_guaranteed_unique_local_variable_jhggfq45g345
    another_thing
  else 
    something_else
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:51:11.977

是的，这三个 Ruby 片段在功能上是等价的。

**更新 ：**

在 Ruby 中，case 语句的 when 是一个隐含的 ===。因此，这 3 个（修剪过的）本质上是相同的：

`case var when foo`, `if foo === var`&`case when foo === var`

我将在这里多次引用[文档。](http://ruby-doc.org/core-1.9.3/Object.html)

`===`，`==`并`eql?`为类对象产生不同的结果。这些在其他类中被覆盖，例如`String`. 如果 foo 和 bar 是`String`，你可以用or替换三等号`===`断言 `foo == var``foo.eql? var`

但是，它们对于我们的普通课程有所不同。

**===** ：在 (or ) 的情况下，`Class ===`如果`Class.===`参数是类（或子类）的实例，则操作将返回 true。为了 ：

```
class A 
end
class B < A
end
b = B.new 
```

`A === b`=> 真，`b === A`=> 假。（`b.instance_of? A`=> 假，`b.instance_of? B`=> 真）

**==**：在对象级别，`==`仅当 obj 和 other 是同一个对象时才返回 true。 `b == b`=> 真，`B.new == B.new`=> 假

对于类 Object，`===`实际上与调用 相同`==`。 `Fixnum === 1`=> 真，`1 === Fixnum`=> 假

**情商？**：`eql?`如果两者具有相同的值，则该方法返回 true。 `1 == 1.0`=> 真，`1.eql? == 1.0`=> 假

# asp.net - 使用内部属性时，它会在设计视图中显示错误消息

> ID：10225170
> 
> 赞同：0
> 
> 时间：2012-04-19T09:24:16.740
> 
> 标签：asp.net, user-controls

我正在公开 ClientSideEvent 并使用 [PersistenceMode(PersistenceMode.InnerProperty)]。

ASP代码：

```
<uc1:WebUserControl2 ID="WebUserControl21" runat="server" >
    <TestProperty></TestProperty>
</uc1:WebUserControl2> 
```

当我键入 <TestProperty></TestProperty> 时，它将在设计视图中显示“System.Web.UI.UserControl”没有名为“TestProperty”的公共属性。问题是什么以及如何解决？

后面的代码：

```
[ParseChildren(true)]
public partial class WebUserControl2 : System.Web.UI.UserControl
{

    [PersistenceMode(PersistenceMode.InnerProperty)]
    public String TestProperty
    {
        get
        {
            return ViewState["TestProperty"] as string;
        }
        set
        {
            ViewState["TestProperty"] = value;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:49:17.247

这是老问题，请参考链接。[带有子项的 ASP.NET 自定义/用户控件](https://stackoverflow.com/questions/3044938/asp-net-custom-user-control-with-children)以及 [如何在 ASP.Net WebControl 的“内容”内部属性​​中包含其他标记？](https://stackoverflow.com/questions/2745886/how-can-i-include-additional-markup-within-a-content-inner-property-of-an-asp)这个[http://pastebin.com/hLq4bsC5](http://pastebin.com/hLq4bsC5)

# java - 为什么我在使用我的代码创建 jar 文件时会出错？

> ID：10225173
> 
> 赞同：0
> 
> 时间：2012-04-19T09:24:34.810
> 
> 标签：java, jakarta-ee

```
import java.util.Properties;

import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public class MailSender {

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        final String username = "xxx.xxxx@xxx.com";
        final String password = "xxxo@xxxx";

        Properties props = new Properties();
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.starttls.enable", "true");
        props.put("mail.smtp.host", "webmxzz.xxxxxxx.com");
        props.put("mail.smtp.port", "587");

        Session session = Session.getInstance(props,
          new javax.mail.Authenticator() {
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication(username, password);
            }
          });

        try {

            Message message = new MimeMessage(session);
            message.setFrom(new InternetAddress("xxxx.x@xxxx.com"));
            message.setRecipients(Message.RecipientType.TO,
                InternetAddress.parse("xxxx.x@xxxx.com"));
            message.setSubject("Testing Subject");
            message.setText("Dear User,"
                + "\n\n No spam to my email, please!");

            Transport.send(message);

            System.out.println("Done");

        } catch (MessagingException e) {
            throw new RuntimeException(e);
        }
    }
} 
```

在编写代码以通过网络发送电子邮件时，我发现了此代码。我使用的 jar 是`javaee-api-5.jar`：`activation.jar`和`mail.jar`

我编译代码并在 eclipse 中运行它。它工作正常并将邮件发送到所需的邮件 ID，但是当我尝试通过导出 jar 文件来制作 jar 文件时出现问题，我收到警告：Jar 已导出。以警告结束。

我得到的错误是：

```
Could not find the main class: (class). Program will exit. 
```

可能的原因是什么？请帮助我找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:35:44.130

是的，应该创建一个清单文件。此文件包含带有“主类”的单行文本文件，例如：主类：您的主类

或者您可以使用 eclipse 来执行此操作：[Java: export to an .jar file in eclipse](https://stackoverflow.com/questions/423938/java-export-to-an-jar-file-in-eclipse)

# c# - 使用 DataContractSerializer 和 DataProtectionProvider 对对象进行序列化和加密

> ID：10225174
> 
> 赞同：2
> 
> 时间：2012-04-19T09:24:37.863
> 
> 标签：c#, microsoft-metro, windows-runtime

我正在尝试将对象序列化为内存流，然后加密此流，然后将其写入文件。无法弄清楚出了什么问题，“解密”后内存流为空。

```
 public static async Task SerializeToFileEncrypt<T>(T o, StorageFile file)
    {
            DataContractSerializer dsc = new DataContractSerializer(typeof(T));                
            MemoryStream memoryStream = new MemoryStream();
            dsc.WriteObject(memoryStream, o);
            DataProtectionProvider provider = new DataProtectionProvider("Local=User");
            var raStream = await file.OpenAsync(FileAccessMode.ReadWrite);
            using(var filestream = raStream.GetOutputStreamAt(0))
            {
                await provider.ProtectStreamAsync(memoryStream.AsInputStream(), filestream);
                await filestream.FlushAsync();                        
            }
    }

    public static async Task<T> DeserializeFromFileDecrypt<T>(StorageFile file)
    {
        DataContractSerializer dsc = new DataContractSerializer(typeof(T));
        MemoryStream memoryStream = new MemoryStream();
        DataProtectionProvider provider = new DataProtectionProvider();
        await provider.UnprotectStreamAsync((await file.OpenStreamForReadAsync()).AsInputStream(), memoryStream.AsOutputStream());
        return (T) dsc.ReadObject(memoryStream);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T16:07:46.373

`MemoryStream`完成写入后，您需要移至开头。否则没有什么可以读取的，因为你已经定位到最后了。

这应该有效：

```
public static async Task SerializeToFileEncrypt<T>(T o, StorageFile file)
{
        DataContractSerializer dsc = new DataContractSerializer(typeof(T));                
        MemoryStream memoryStream = new MemoryStream();
        dsc.WriteObject(memoryStream, o);
        memoryStream.Seek(0, SeekOrigin.Begin); // move to the beginning of the stream
        DataProtectionProvider provider = new DataProtectionProvider("Local=User");
        var raStream = await file.OpenAsync(FileAccessMode.ReadWrite);
        using(var filestream = raStream.GetOutputStreamAt(0))
        {
            await provider.ProtectStreamAsync(memoryStream.AsInputStream(), filestream);
            await filestream.FlushAsync();                        
        }
}

public static async Task<T> DeserializeFromFileDecrypt<T>(StorageFile file)
{
    DataContractSerializer dsc = new DataContractSerializer(typeof(T));
    MemoryStream memoryStream = new MemoryStream();
    DataProtectionProvider provider = new DataProtectionProvider();
    await provider.UnprotectStreamAsync((await file.OpenStreamForReadAsync()).AsInputStream(), memoryStream.AsOutputStream());
    memoryStream.Seek(0, SeekOrigin.Begin); // move to the beginning of the stream
    return (T) dsc.ReadObject(memoryStream);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T15:47:20.407

除了最后发布的答案之外，您需要将 raStream 包装在 using 语句中，因为它是一个 IDisposable 对象。否则，如果某些代码稍后尝试再次打开该文件，它将因访问被拒绝而失败，因为该文件仍由随机访问流打开。

```
public static async Task SerializeToFileEncrypt<T>(T o, StorageFile file)
        {
            DataContractSerializer dsc = new DataContractSerializer(typeof(T));
            MemoryStream memoryStream = new MemoryStream();
            dsc.WriteObject(memoryStream, o);
            memoryStream.Seek(0, SeekOrigin.Begin); // move to the beginning of the stream
            DataProtectionProvider provider = new DataProtectionProvider("Local=User");
            using (var raStream = await file.OpenAsync(FileAccessMode.ReadWrite))
            {
                using (var filestream = raStream.GetOutputStreamAt(0))
                {
                    await provider.ProtectStreamAsync(memoryStream.AsInputStream(), filestream);
                    await filestream.FlushAsync();
                }
            }
        } 
```

# c - 编辑文件中的特定行

> ID：10225183
> 
> 赞同：1
> 
> 时间：2012-04-19T09:25:01.560
> 
> 标签：c

我有一个这样的txt文件：

```
"shoes":12
"pants":33
"jacket":26
"glasses":16
"t-shirt":182 
```

**我需要编辑夹克的数量**（例如从 26 到 42）。所以，我写了这段代码，但我不知道如何编辑有“夹克”这个词的特定行：

```
#include <stdio.h>

int main() {
    char row[256];
    FILE *fp;

    if (!(fp=fopen("myfile.txt","rw"))) {
        printf("Error");
        return 1;
    }

    while (!feof(fp)){
        fgets(row, 256, fp);
        // if there is the "jacket" in this row, then edit the row
    }

    fclose (fp);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T09:29:16.113

不幸的是，没有简单的解决方案。

一种常见的方法是将所有行（修改或未修改）写入临时文件，然后将临时文件移动到现有文件上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T10:48:43.930

如果旧值和新值中的字符数相同（您的情况），您可以覆盖它们：

```
FILE* fp = fopen("x.txt", "r+"); // note: r+, not rw
char row[256];
char* string = "\"jacket\":"; // note: contains punctuation
char* newvalue = "42\n"; // note: contains a line break

while (!feof(fp)) // note: feof is bad style
{
    long pos = ftell(fp);
    fgets(row, 256, fp); // note: might add error handling

    // check if there is the "jacket": in this row,
    if (strncmp(row, string, strlen(string)) == 0)
    {
        // check that the old length is exactly the same as the new length
        // note: assumes the row contains a line-break \n
        if (strlen(row) == strlen(string) + strlen(newvalue))
        {
            // then edit the row
            fseek(fp, (long)(pos + strlen(string)), SEEK_SET);
            fputs(newvalue, fp);
            fseek(fp, (long)(pos + strlen(string) + strlen(newvalue)), SEEK_SET);
        }
        else
        {
            printf("Too bad, cannot change value");
        }
    }
}
fclose(fp); 
```

您可能希望更改文件格式以包含填充，例如：

```
"shoes":12____
"pants":33____
"jacket":26____
"glasses":16____
"t-shirt":182___ 
```

这里`_`可视化一个空格字符；此文件格式最多支持 999999 个项目。如果你做这样的改变，你需要改变上面的代码来检查和调整空格的数量等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T09:52:56.893

编写脚本并使用 sed（流编辑器）编辑特定流。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T11:41:32.237

使用 gawk 可能更容易。

```
gawk -f edit_row.awk <myfile.txt >tmp.txt && mv tmp.txt myfile.txt 
```

编辑行.awk

```
BEGIN {
    FS = ":"
}

{
    if ($1 == "\"jacket\"") {
        print $1 ":" 42
    } else {
        print
    }
} 
```

如果您真的想在 c 中执行此操作，可以使用 tmpfile() 函数。

```
#include <stdio.h>
#include <string.h>

int main() {
    char row[256];
    char *file_name = "myfile.txt";
    FILE *file_pointer;
    FILE *temp_file;

    char col_a[101] = "";
    unsigned int col_b = 0;
    char filter[] = "\"jacket\"";
    size_t filter_length = sizeof(filter) - 1;

    file_pointer=fopen(file_name,"r+");
    temp_file=tmpfile();

    while (fgets(row, 256, file_pointer) != NULL) {
        if (strncmp(row, filter, filter_length) == 0) {
            fprintf(temp_file,"%s:46\n", filter);
        } else {
            fprintf(temp_file, "%s", row);
        }
    }

    rewind(temp_file);
    rewind(file_pointer);

    while (fgets(row, 256, temp_file) != NULL) {
        fputs(row, file_pointer);
    };

    fclose(file_pointer);
    fclose(temp_file);
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T09:40:53.853

文本文件不像数据库，我们可以一次性修改单行或单列，在 c/c++ 中也很难以重复编码为代价。

# database - Grails：在不连接数据库的情况下启动应用程序

> ID：10225187
> 
> 赞同：1
> 
> 时间：2012-04-19T09:25:14.123
> 
> 标签：database, grails, jdbc

我在 grails 中有一个应用程序，我可以更改欢迎页面中的参数，包括数据库配置（服务器，用户名，...），我从数据源外部化了数据库配置，以便我可以更改它。我想要做的是有可能在没有配置任何数据库的情况下启动应用程序，所以我可以在欢迎页面中配置它。这可能与 grails 吗？我想至少加载第一页（此页面不会从数据库中检索任何信息）。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:15:09.433

不久前我写了一篇博客文章：[http ://burtbeckwith.com/blog/?p=312](http://burtbeckwith.com/blog/?p=312)

我不确定它是否仍然适用于 2.0，但它不应该需要太多的调整。通过延迟数据源的创建，您可以配置 DataSource bean 的连接属性或在 Grails 配置中，然后下一个连接请求将使用新配置。

# xml - Sharepoint 2010 如何在将新列添加到列表后更新 schema.xml

> ID：10225194
> 
> 赞同：0
> 
> 时间：2012-04-19T09:25:43.610
> 
> 标签：xml, list, sharepoint, schema

我为共享点列表创建了新列。提交表单后，它会工作并将数据存储到新的列表列。但我现在不知道如何更新列表中的 schema.xml 文件。如何为新列生成此 FieldRef ID="{87AC8FE1-3435-4602-A258-09945F40509E}" ??? 谢谢！

# backbone.js - 从视图内部绑定 body 元素上的事件

> ID：10225195
> 
> 赞同：1
> 
> 时间：2012-04-19T09:25:47.550
> 
> 标签：backbone.js

是否可以在视图内的 body 元素上绑定事件？

例如这不起作用

```
Backbone.View.extend({
  el : "#some element here",
  events : {
    "mouseup body" : "onMouseUp"
  }
}); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:37:19.260

我认为是不可能的。

[Backbone.View.events](https://github.com/documentcloud/backbone/blob/master/backbone.js#L1224)在内部使用[this.$el.delegate](http://api.jquery.com/delegate/)，它在内部使用看起来[不支持](https://stackoverflow.com/questions/1014861/is-there-a-css-parent-selector)[*向上*](https://stackoverflow.com/questions/1014861/is-there-a-css-parent-selector)[选择的](https://stackoverflow.com/questions/1014861/is-there-a-css-parent-selector)[CSS 选择器](http://www.w3.org/TR/css3-selectors/#selectors)。[](https://stackoverflow.com/questions/1014861/is-there-a-css-parent-selector)

 *您可以改为将`position: absolute`div 添加到您的`el`DOM 元素中，并使其透明并全屏显示。然后从那里捕获事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T10:01:26.177

好吧，我想我找到了一个可行的解决方案！

在我做的初始化函数中

```
$('body').bind('mouseup', this.onMouseUp); 
```

~~它就像魅力一样！:)~~

**编辑**

其实这是一个很大的问题！this 绑定在主体上而不是视图上。所以我有一个参数“pressed”，当我用 this.pressed 访问它时，它会尝试在正文中找到它......

**编辑**

我发现上述问题的解决方案是在绑定参数中传递对此的引用，例如：

```
$('body').bind('mouseup',{thisView : this}, this.onMouseUp); 
```

现在它就像魅力一样工作：P*

# flash - AS2 FP8：HTTPS SWF 从 HTTP 加载数据

> ID：10225196
> 
> 赞同：2
> 
> 时间：2012-04-19T09:25:53.587
> 
> 标签：flash, security, https, actionscript-2

我有一个托管在 HTTPS 站点上的 AS2 FP8 swf，需要将数据发送到 HTTP 站点。我已阅读涵盖跨域策略文件的白皮书，但它们仅涵盖 HTTP swf 从 HTTPS 加载数据的场景，反之亦然。

目前跨域策略是：

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM http://www.adobe.com/xml/dtds/cross-domain-policy.dtd"><cross-domain-policy>
<site-control permitted-cross-domain-policies="all"/>
<allow-access-from domain="*" secure="false"/>
<allow-http-request-headers-from domain="*" headers="*" secure="false"/>
</cross-domain-policy> 
```

是因为安全存在设置为假吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T20:41:58.193

等价于以下`secure=false`属性：

*   [允许不安全域](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/2/00001491.html)

不推荐使用 HTTPS swf 从 HTTP 加载数据，原因如下：

> HTTP-to-HTTPS 脚本的限制是不对称的；尽管不能安全地允许 HTTP 交付的 catalog.swf 文件编写 HTTPS 交付的 cart.swf 文件的脚本，但 HTTPS cart.swf 文件可以编写 HTTP catalog.swf 文件的脚本。

# c# - C# - 在文件中查找一行（正则表达式）并根据另一个正则表达式获取完整的文本块

> ID：10225198
> 
> 赞同：2
> 
> 时间：2012-04-19T09:25:57.660
> 
> 标签：c#, regex, search, find

问题是这样的：

我想在文本文件中找到一个正则表达式并获取完整的文本块

文本示例：

```
text text text text text text text text text 
!
title
text text text text text text text text text text text text text text text 
text text text text text text text text text text text text text text text 
text text text text text text text text text text text text text text text 
!
text text text text text text text text text 
```

找到“标题”部分很容易，但我想得到以下结果：

```
title
text text text text text text text text text text text text text text text 
text text text text text text text text text text text text text text text 
text text text text text text text text text text text text text text text 
```

最好的方法是什么？使用正则表达式模式或选择文本直到我得到“！”？（我想要简单/快速可读的代码）

查找模式的代码：（以 rtxtText 作为richtextbox）

```
 private String searchInfo(String pattern)
    {
        String text = rtxtText.Text;
        Regex regExp = new Regex(pattern);
        String result = "";

        foreach (Match match in regExp.Matches(text))
        {
            result += "\n" + match.ToString();
        }
        return result; 
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T09:29:29.853

您的正则表达式也被更改为包含未知字符，例如

*   第一的`title`
*   那么`[^!]*`（`[^ ]`表示不在这个集合中`[^!]*`的东西，所以除了`!`任何数量之外的所有东西）

    正则表达式 regex = new Regex("title[^!]*", RegexOptions.SingleLine); MatcheCollection 匹配 = regex.Matches(text);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:34:08.313

最好的方法是遍历文本行，直到找到第一个“！” 然后收集直到找到下一个：

```
line = textfile.readline()
while line and line.strip() != '!'
    line = textfile.readline() # skip until first '!'
title = textfile.readline() # now on title line
text = ''
line = textfile.readline()
while line and line.strip() != '!'
    text += line
    line = textfile.readline()
print title
print text 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T09:34:59.867

```
public IEnumerable<string> ParseParagraphs(string text)
{
    Regex regex = new Regex(@"title[^!]*");
    foreach (Match match in regex.Matches(text))
        yield return match.Value;  
} 
```

用法很简单：

```
foreach (var p in ParseParagraphs(your_text))
    Console.WriteLine(p); 
```

更新：在 SearchInfo 方法中使用 StringBuilder 以避免在内存中创建许多字符串

```
private string SearchInfo(String pattern)
{            
    MatchCollection matches = Regex.Matches(rtxtText.Text, pattern);
    if (matches.Count == 0)
        return String.Empty;

    StringBuilder sb = new StringBuilder();
    foreach (Match match in matches)
        sb.AppendLine(match.Value);

    return sb.ToString();
} 
```

并这样称呼它`var result = SearchInfo(@"title[^!]*");`

# jquery - Wordpress 硬币滑块图像库重叠

> ID：10225200
> 
> 赞同：0
> 
> 时间：2012-04-19T09:26:00.407
> 
> 标签：jquery, css, wordpress, gallery

我有一个使用高级主题的 wordpress 网站[http://www.inspiredxpressions.co.za/weddings/](http://www.inspiredxpressions.co.za/weddings/) nivoslider 曾经按预期工作，但现在有一个位置不正确的图像。我的 css 技能有点有限，但我在边距、填充和显示方面所做的一切尝试似乎都没有效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:49:32.827

将下面的 css 代码添加到 style.css 中，看起来会很好。

```
.slider.nivoSlider img{
    display:none;
} 
```

# html - 使用 SASS 和 COMPASS 设置 HTML 页面样式

> ID：10225204
> 
> 赞同：0
> 
> 时间：2012-04-19T09:26:05.013
> 
> 标签：html, sass, compass-sass

我已经安装`SASS`并`COMPASS`使用了这个[博客](http://iroylabs.blogspot.in/2011/05/install-compass-and-sass-in-ubuntu-1104.html)。当我使用时`compass create my_test_project`，它正在创建一个带有名称的新文件夹`my_test_project`。当我要使用浏览器访问该文件夹时，它显示。`css files`没有`HTML`文件可以在那里看到。所以有人可以告诉我如何在`HTML`那里使用页面`SASS`来设置样式。我只是一个新手，`SASS`所以任何帮助和建议都将是非常可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:56:17.627

Sass/Compass 是一个让创建 CSS 更容易而不是创建 HTML 的工具。您可以在`my_test_project`文件夹中创建一个 HTML 文件，并添加对由 sass/compass 创建的 css 文件的引用。

例如

```
<head>
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <link href="/stylesheets/print.css" media="print" rel="stylesheet" type="text/css" />
  <!--[if IE]>
      <link href="/stylesheets/ie.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <![endif]-->
</head> 
```

[指南针帮助](http://compass-style.org/help/)

[指南针教程](http://compass-style.org/help/tutorials/)

[萨斯参考](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html)

# c++ - c ++网络和锁定问题

> ID：10225205
> 
> 赞同：1
> 
> 时间：2012-04-19T09:26:08.337
> 
> 标签：c++, sockets, networking, locking

我的 c++ 应用程序管理多个套接字及其发送 + 接收。为了忽略问题，我在套接字上发送接收之前通过信号量进行锁定。当我在 100 台机器上运行该应用程序时，我发现有时可能是一段时间我的机器不发送它收到的消息的确认（我在 Wireshark 中看到数据包和此数据包的重新传输）。同样在这段时间里，我看到我的应用程序没有发送它必须发送的任何内容。

我的问题是：这个问题可能来自锁定机制的根本原因吗？锁定机制 - 当我锁定套接字时会导致操作系统也不在此套接字上发送任何内容吗？也许你也会知道：如何忽略这种行为？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:32:05.623

哦，这听起来不太好。您应该提供有关您的应用程序设计的更多详细信息，尤其是。围绕锁定的一些代码。

锁定资源通常使用互斥锁完成，但初始化为 1 的信号量会在推送时完成。

最重要的是：您是否正在处理锁内的网络调用引发的所有异常？

# asp.net - 网格视图中的 DateWise 数据显示

> ID：10225207
> 
> 赞同：1
> 
> 时间：2012-04-19T09:26:17.080
> 
> 标签：asp.net, date, gridview, header

如何在 asp.net 的 Gridview 中显示 DateWise 数据。当我们单击任何月份时，数据应该在标题中。喜欢

```
Broadcast 1jan 2jan 3jan.........
 abc        0    1    0
 xyz        0    1    1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:37:13.377

我认为您正在寻找 gridview 中的交叉表。

我在这里找到了一个例子

[http://redsouljaz.wordpress.com/2009/06/22/asp-net-cross-tab-pivot-from-data-table/](http://redsouljaz.wordpress.com/2009/06/22/asp-net-cross-tab-pivot-from-data-table/)

[http://www.dotnetspider.com/forum/266719-Bind-crosstab-gridview-example.aspx](http://www.dotnetspider.com/forum/266719-Bind-crosstab-gridview-example.aspx)

这是在 sql 中编写交叉表查询的方法：

[http://www.simple-talk.com/sql/t-sql-programming/creating-cross-tab-queries-and-pivot-tables-in-sql/](http://www.simple-talk.com/sql/t-sql-programming/creating-cross-tab-queries-and-pivot-tables-in-sql/)

# ios - UITextview 如果条件并添加`+`号

> ID：10225212
> 
> 赞同：0
> 
> 时间：2012-04-19T09:26:51.660
> 
> 标签：ios, xcode, uitextview, if-statement

嘿，我有一个 textview 我需要计算 textview 的字符串长度，如果值等于 2，我需要添加两个`++`符号，如果值等于 3，那么我需要放一个`+`，如果 4 它应该显示无效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:41:15.890

这并不难，你真的需要检查NSString的[文档：](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

例子：

```
if ([myTextView.text length] == 2) {
    myTextView.text = [myTextView.text stringByAppendingString:@"++"];
} else if ([myTextView.text length] == 3) {
    myTextView.text = [myTextView.text stringByAppendingString:@"+"];
} if ([myTextView.text length] == 4) {
    myTextView.text = @"invalid";
} 
```

# objective-c - 如何重新启动查找器应用程序

> ID：10225215
> 
> 赞同：1
> 
> 时间：2012-04-19T09:27:03.947
> 
> 标签：objective-c, applescript, finder, appleevents

我正在使用以下`applescript`重新启动查找器应用程序。

```
osascript -e "tell application \"Finder\"" -e "delay 1" -e "try" -e "quit" -e "delay 1" -e "activate" -e "end try" -e "end tell" 
```

但有时此脚本不会重新启动 finder 应用程序（仅退出 finder 应用程序）。我在控制台中没有收到任何错误。
[http://www.cocoabuilder.com/archive/cocoa/113654-nsapplescript-buggy.html](http://www.cocoabuilder.com/archive/cocoa/113654-nsapplescript-buggy.html)
谁能帮帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T11:21:47.043

如果您使用 Cocoa，这是错误的处理方式。您应该始终尽可能使用本机 API，而您正在尝试调用本身构建和运行 AppleScript 的 shell 脚本。您的 AppleScript 在尝试重新启动之前等待一秒钟，这是一个任意值。您实际上应该等待 Finder 退出。

相反，您应该使用`NSRunningApplication`该类来管理它，通过使用 Key-Value Observing 来监视实例的`terminated`属性，以便您可以在应用程序终止时重新启动它：

```
//assume "finder" is an ivar of type NSRunningApplication
//it has to be a strong reference or it will be released before the observation method
//is called

- (void)relaunchFinder
{
    NSArray* apps = [NSRunningApplication runningApplicationsWithBundleIdentifier:@"com.apple.finder"];
    if([apps count])
    {
        finder = [apps objectAtIndex:0];
        [finder addObserver:self forKeyPath:@"isTerminated" options:0 context:@"QuitFinder"];
        [finder terminate];
    }

}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if (context == @"QuitFinder")
    {
        if([keyPath isEqualToString:@"isTerminated"])
        {
            [[NSWorkspace sharedWorkspace] launchAppWithBundleIdentifier:@"com.apple.finder" options:NSWorkspaceLaunchDefault additionalEventParamDescriptor:NULL launchIdentifier:NULL];
            [object removeObserver:self forKeyPath:@"isTerminated"];
        }
    } else {
        [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T15:03:27.157

这是一个applescript方式。如您所见，您不能依赖特定的延迟时间。因此，我们通过检查它是否在正在运行的进程列表中来手动等待 Finder 退出。当它不再在列表中时，我们知道它已经退出，我们可以再次激活它。

您还会注意到，由于重复循环，我在脚本中添加了时间检查。万一出现问题，我们不希望重复循环永远运行。因此，如果它运行超过 10 秒，我们会自动退出重复循环。

```
tell application "Finder" to quit

set inTime to current date
repeat
    tell application "System Events"
        if "Finder" is not in (get name of processes) then exit repeat
    end tell
    if (current date) - inTime is greater than 10 then exit repeat
    delay 0.2
end repeat

tell application "Finder" to activate 
```

这是该代码的 osascript 版本。

```
/usr/bin/osascript -e 'tell application "Finder" to quit' -e 'set inTime to current date' -e 'repeat' -e 'tell application "System Events"' -e 'if "Finder" is not in (get name of processes) then exit repeat' -e 'end tell' -e 'if (current date) - inTime is greater than 10 then exit repeat' -e 'delay 0.2' -e 'end repeat' -e 'tell application "Finder" to activate' 
```

# xcode - Xcode int 返回随机数

> ID：10225220
> 
> 赞同：-1
> 
> 时间：2012-04-19T09:27:30.407
> 
> 标签：xcode, delegates, arraylist, int

我有一个名为 Places 的类，其 placeId 声明为 Int。

```
int placeId; 
```

我有一个方法可以返回我的 placeId/

```
- (int)  getPlaceId;

- (int)getPlaceId{
return placeId;
} 
```

我创建了一个 arrayList 来将 Places 对象存储到该数组中。当我运行该方法来获取我的 placeID 时，我似乎得到了一系列奇怪的数字。例如。1234567。

知道为什么会这样吗？

```
NSString *tempInt = [tempObject objectForKey:@"placeId"]; 
    NSString *tempString = [tempObject objectForKey:@"name"]; //2

    //convert temptInt to integer
    NSInteger myInt = (NSInteger)tempInt;

    Places *p = [[Places alloc]set:myInt andb:tempString];
    [del.delegateArrayPlaces addObject:p]; 
```

这是我添加的方法，您还需要哪些其他代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:31:15.777

在您的代码中的某处，您的整数 ivar get 实际上分配给了一个指针，这就是您得到的。向我们展示一些代码来帮助您

编辑（发布代码后）：

```
NSString *tempString = [tempObject objectForKey:@"name"]; //2

//convert temptInt to integer
NSInteger myInt = [tempString intValue]; 
```

# java - Java过滤器将未登录的用户重定向到登录页面

> ID：10225221
> 
> 赞同：5
> 
> 时间：2012-04-19T09:27:39.267
> 
> 标签：java, servlets, servlet-filters

我试图制作一个过滤器来阻止未登录的用户访问某些页面。为此，我使用以下`doFilter`方法制作了一个过滤器类

```
HttpServletRequest request = (HttpServletRequest) req;
HttpServletResponse response = (HttpServletResponse) res;
String url = request.getRequestURI();
boolean allowedRequest = false;

System.out.println(url);

if(urlList.contains(url)) {
    allowedRequest = true;
    System.out.println("in list");
}

if (!allowedRequest) {
    Object o = request.getSession().getAttribute("UserInfo");
    if (null == o) {
        System.out.println("Hey i am in");
        response.sendRedirect("/login.jsp");
    }
}

chain.doFilter(req, res);

} // end of doFilter 
```

为了允许不需要用户登录的页面，我在 init() 中创建了一个 arraylist url-list

现在发生了一件非常奇怪的愚蠢的事情。假设我有两个页面 home.jsp 和 dcr.jsp。当我尝试在不登录的情况下访问 home.jsp 时，我成功重定向到 login.jsp 但是当我尝试访问 dcr.jsp 时它没有被重定向，尽管它进入了循环 if(null == o) 我可以理解因为我正在控制台中打印该行。这是我在服务器中获得的输出 这是我在服务器中获得的输出

```
/dcrmaintenance.jsp

Hey i am in 
```

这告诉我 null == o 是真的。

页面 dcr.jsp 访问会话对象，并且由于用户未登录，因此按预期获取 java.lang.NullPointerException 但我不明白为什么即使在进入循环后重定向也不会发生。如果有人可以在哪里我犯了一个错误，将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T09:41:47.713

`response.sendRedirect("/login.jsp");`做完之后`return;`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T09:41:39.277

我相信您应该调用 sendRedirect 或 doFilter。例如

```
if (requiresLogin)
  response.sendRedirect("/login.jsp");
else
  chain.doFilter(req,resp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T09:48:45.613

```
chain.doFilter(req, res); 
```

您的应用程序中还运行了哪些其他过滤器？您发送重定向，但继续使用过滤器链。我猜另一个过滤器正在再次修改响应。如果您保留过滤器，则只需在重定向后返回。

在 Java WebApp 中，您可以在 web.xml 中定义安全约束，而不是过滤器。看看**安全约束**。

简短的例子：

```
<security-constraint>
  <web-resource-collection>
     <web-resource-name>Restricted Area</web-resource-name>
     <url-pattern>*</url-pattern>
  </web-resource-collection>
  <auth-constraint>
     <role-name>Authorized</role-name>
  </auth-constraint>
</security-constraint> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-26T21:00:21.183

我认为您必须更改您的 web.xml ...您必须将受限资源放入适当的文件夹。这样，Filter Servlet 将限制分配在“restricted”文件夹中的文件。（[http://www.developer.com/security/article.php/3467801/Securing-J2EE-Applications-with-a-Servlet-Filter.htm](http://www.developer.com/security/article.php/3467801/Securing-J2EE-Applications-with-a-Servlet-Filter.htm)）（而且我认为使用Filter Servlet的原因是编写自己的授权系统。-这样你不必在web.xml中定义你的安全约束，你必须在数据库中定义它;））））

```
<!--Servlet Filter that handles site authorization.-->
<filter>
     <filter-name>AuthorizationFilter</filter-name>
     <filter-class>examples.AuthorizationFilter</filter-class>
     <description>This Filter authorizes user access to application
                  components based upon request URI.</description>
     <init-param>
        <param-name>error_page</param-name>
        <param-value>../../login.html</param-value>
     </init-param>
</filter>

<filter-mapping>
     <filter-name>AuthorizationFilter</filter-name>
     <url-pattern>/restricted/*</url-pattern>
</filter-mapping> 
```

# java - 创建 Java Car 类

> ID：10225224
> 
> 赞同：1
> 
> 时间：2012-04-19T09:27:55.403
> 
> 标签：java, inheritance

我正在用另一个单独的驱动程序类创建一个类。car 类用于汽车租赁公司存储有关汽车的信息，如品牌、型号和注册号，以便使用 driver 类我可以用来输入新车，检查车辆是否正在出租和不可用以及名称租用者，如果它被雇用。

我的汽车类有方法：

```
public class Car {

private String Make;
private String Model;
private int RegistrationNum;

public Car(String Make, String Model, String RegN){
    //Constructor,
    //stores the make, model and registration number of the new car
    //sets its status as available for hire.
    Make = "";
    Model = "";
    RegN = "";

}

public String getMake(){
    return Make;

}

public String getModel(){
    return Model;

}

public boolean hire(String newHirer){

    {
  //Hire this car to the named hirer and return true. 

        return true;
    }
  //Returns false if the car is already out on hire.

}

public boolean returnFromHire(){

    {
 //Receive this car back from a hire and returns true.
        return true;
    }

 //Returns false if the car was not out on hire     

}

public int getRego(){

 //Accessor method to return the car’s registration number      

    RegistrationNum++;
    return RegistrationNum;
    }

public boolean hireable(){
 //Accessor method to return the car’s hire status.     

    {
 //returns true if car available for hire           
    return true;    
    }
}

public String toString(){
 //return car details as formatted string
 //output should be single line containing the make model and reg number
 //followed by either "Available for hire" or "On hire to: <name>"

    return "Vehicle ID number: "+ getRego()+"-"+"Make is: "+ getMake()+"-"+"Model is: "+getModel();

}

} 
```

以下是我的驱动程序类：

```
 import java.util.*;
  public class CarDriver {
  static Car car1;

public static void main(String[] args) {
    // TODO Auto-generated method stub
    Scanner scan = new Scanner(System.in);

{
    System.out.println("Make?");
    String Make=scan.nextLine();
    System.out.println("Model");
    String Model=scan.nextLine();
    System.out.println("Registration number?");
    String RegNum=scan.nextLine();

    car1 = new Car(Make,Model,RegNum);

    System.out.println("What you input :");

    System.out.println(car1.toString());
}}

 } 
```

我的输出：

```
Make?
carmake
Model
carmodel
Registration number?
12345t
What you input :
Vehicle ID number: 1-Make is: null-Model is: null 
```

问题：

1.  无法理解如何将布尔方法的伪代码转换为 java 代码

2.  无法连接驱动类来存储我输入的信息，比如型号、品牌和注册号

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T09:32:09.600

第二

将构造函数更改为此：

```
public Car(String Make, String Model, String RegN){
    this.Make = Make;
    this.Model= Model;
    this.RegN = RegN;
} 
```

您以前的构造函数有一个问题，基本上您所做的只是获取构造函数参数并将它们全部设置为“”（空字符串），您不想这样做。您想将参数值分配给您的实例字段。如果要访问实例字段，则必须使用关键字**this**。

```
public Car(String Make, String Model, String RegN){
//Constructor,
//stores the make, model and registration number of the new car
//sets its status as available for hire.
Make = "";
Model = "";
RegN = ""; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:59:18.330

第一：为了检索有关“这辆车租给谁”或“哪个司机租了这辆车”的信息，您必须首先**存储**该信息。你会使用什么数据类型？（记住这是“作业”，我认为最好不要给出*我的*答案）。

PS：最好对变量和非静态/最终属性使用非大写标识符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-23T08:15:12.557

当您`Car`使用所需参数调用类的构造函数时，默认情况下这些参数引用将发送到构造函数。

```
public Car(String Make, String Model, String RegN){        
   Make = "";    
   Model = "";    
   RegN = "";   
} 
```

在`Car`类构造函数中，您的类的参数和成员变量`Car`具有相同的名称。所以当构造函数被调用时，局部变量变成了空字符串。并且由于局部变量包含来自调用者的引用，所以调用者中的原始变量也在被改变。同样，由于您没有为您的类成员引用创建任何实例，它仍然保持为空。如果您在构造函数中使用以下代码段，

```
this.Make = "";    
this.Model = "";    
this.RegN = ""; 
```

`Car`类成员变量将被更改，而不是来自调用者的变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T09:38:40.633

回答你的第二个问题：

你打电话的那一刻：

```
car1 = new Car(Make,Model,RegNum); 
```

Car 类的构造函数与您提供的变量一起被调用。当您查看您创建的构造函数时：

```
public Car(String Make, String Model, String RegN){        
   Make = "";    
   Model = "";    
   RegN = "";   
} 
```

您可以看到您提供的变量从未设置为 Car 类的局部变量。为了解决这个问题，您需要将其更改为以下内容：

```
public Car(String Make, String Model, String RegN){        
   this.Make  = Make;    
   this.Model = Model;    
   this.RegN   = RegN;   
} 
```

祝你的节目好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T09:37:50.120

正如我在代码中看到的，您没有在构造函数中设置 Car 实例的任何字段。你应该这样写：

```
public Car(String Make, String Model, String RegN){
    //Constructor,
    //stores the make, model and registration number of the new car
    //sets its status as available for hire.
    this.Make = Make;
    this.Model = Model;
    this.RegN = RegN;
} 
```

# c# - 让 IIS 托管 WCF 服务中的流式传输工作

> ID：10225229
> 
> 赞同：4
> 
> 时间：2012-04-19T09:28:06.347
> 
> 标签：c#, wcf, iis, azure

我有点卡在这里...

我的目标很简单：我想公开一个 IIS 托管（然后是 Windows Azure）WCF 服务，通过它我可以使用流式传输文件上传文件，并添加一些关于我要上传的文件的 META 数据（文件名、MD5-hash all通常的东西...），并能够显示有关上传的准确进度信息。

首先，我创建了一个继承自**FileStream的派生类****StreamWithProgress**，我在其中重写了**Read**方法，以在每次读取时引发一个事件，通过该事件传递进度信息。

 ****其次，我使用**MessageContract** ( [http://msdn.microsoft.com/en-us/library/ms730255.aspx](http://msdn.microsoft.com/en-us/library/ms730255.aspx) ) 创建了一个 WCF 服务，将 META 数据和流对象包装到一个 SOAP 信封中。这个服务真的很简单，只公开一个上传方法。

我已将所有缓冲区大小设置为接受大量数据，如下所示：

*   *[http://smehrozalam.wordpress.com/2009/01/29/retrieving-huge-amount-of-data-from-wcf-service-in-silverlight-application/](http://smehrozalam.wordpress.com/2009/01/29/retrieving-huge-amount-of-data-from-wcf-service-in-silverlight-application/)*

*   *[http://msdn.microsoft.com/en-us/library/ms733742.aspx](http://msdn.microsoft.com/en-us/library/ms733742.aspx)*和

*   *[http://msdn.microsoft.com/en-us/library/ms731325.aspx](http://msdn.microsoft.com/en-us/library/ms731325.aspx)*

和 httpRuntime 设置如下：

*   *[http://msdn.microsoft.com/en-us/library/e1f13641(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/e1f13641(v=vs.71).aspx)*和

*   *[http://kjellsj.blogspot.com/2007/02/wcf-streaming-upload-files-over-http.html](http://kjellsj.blogspot.com/2007/02/wcf-streaming-upload-files-over-http.html)*

IIS\ASP 兼容性设置如下：

*   *[http://weblogs.asp.net/jclarknet/archive/2008/02/14/wcf-streaming-issue-under-iis.aspx](http://weblogs.asp.net/jclarknet/archive/2008/02/14/wcf-streaming-issue-under-iis.aspx)*和

*   *[.NET 4 上的 WCF 流式文件传输](https://stackoverflow.com/questions/6858474/wcf-streaming-file-transfer-on-net-4)*

并按以下方式禁用批处理：

*   *[http://msdn.microsoft.com/en-us/library/system.servicemodel.icontextchannel.allowoutputbatching.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.icontextchannel.allowoutputbatching.aspx)*

我创建了一个**自托管服务**，通过该服务上传成功。然后我将它“升级”到一个**IIS 托管服务**（在我的本地机器上），它可以工作。然后我创建了一个**本地托管的 Windows Azure 服务，它带有一个 WCF webrole，**它可以工作。

但问题是，在所有实例中都没有发生实际的流式传输……所有这些实例都在发送数据之前对其进行了缓冲。

当我看到我的客户端正在报告进度时，我遇到了这个问题，但是服务器直到整个文件被缓冲后才开始写入文件。

我的实际代码如下。

任何想法\帮助？任何事情都将不胜感激……</p>

谢谢！

服务器 web.config：

```
<?xml version="1.0"?>
<configuration>
    <system.serviceModel>

        <bindings>
            <basicHttpBinding>
                <binding name="uploadBasicHttpBinding" 
                 maxReceivedMessageSize="2147483647" 
                 transferMode="Streamed" 
                 messageEncoding="Mtom"
                 maxBufferPoolSize="2147483647"
                 maxBufferSize="2147483647">
                 <readerQuotas maxArrayLength="2147483647" 
                                maxBytesPerRead="2147483647" 
                                maxDepth="2147483647" 
                                maxNameTableCharCount="2147483647" 
                                maxStringContentLength="2147483647"/>
                </binding>
            </basicHttpBinding>
        </bindings>

            <behaviors>
                <serviceBehaviors>
                    <behavior name="defaultBehavior">
                        <serviceMetadata httpGetEnabled="true"/>
                        <serviceDebug includeExceptionDetailInFaults="false"/>
                        <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
                    </behavior>
                </serviceBehaviors>
            </behaviors>

        <!-- Add this for BufferOutput setting -->
        <serviceHostingEnvironment multipleSiteBindingsEnabled="true" aspNetCompatibilityEnabled="true"/>

        <services>
            <service name="WcfService1.Service1" behaviorConfiguration="defaultBehavior">           
                <endpoint binding="basicHttpBinding" contract="WcfService1.IService1" bindingConfiguration="uploadBasicHttpBinding"/>
                <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
            </service>
        </services>

    </system.serviceModel>

    <system.webServer>
        <modules runAllManagedModulesForAllRequests="true"/>
    </system.webServer>

    <system.web>
        <compilation debug="true"/>
    <httpRuntime maxRequestLength="2147483647" />
    </system.web>

</configuration> 
```

服务合同：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;
using System.IO;

namespace WcfService1
{
    [ServiceContract]
    public interface IService1
    {
        [OperationContract(IsOneWay=true)]
        void UploadStream(Encapsulator data);
    }
} 
```

实际服务：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;

using System.IO;
using System.Web;
using System.ServiceModel.Activation;

namespace WcfService1
{
    [MessageContract]
    public class Encapsulator
    {
        [MessageHeader(MustUnderstand = true)]
        public string fileName;
        [MessageBodyMember(Order = 1)]
        public Stream requestStream;
    }

    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class Service1 : IService1
    {
        public Service1()
        {
            HttpContext context = HttpContext.Current;

            if (context != null)
            {
                context.Response.BufferOutput = false;
            }
        }

        public void UploadStream(Encapsulator data)
        {
            const int BUFFER_SIZE = 1024;

            int bytesRead = 0;

            byte[] dataRead = new byte[BUFFER_SIZE];

            string filePath = Path.Combine(@"C:\MiscTestFolder", data.fileName);

            string logPath = Path.Combine(@"C:\MiscTestFolder", string.Concat(data.fileName, ".log"));

            bytesRead = data.requestStream.Read(dataRead, 0, BUFFER_SIZE);

            StreamWriter logStreamWriter = new StreamWriter(logPath);

            using (System.IO.FileStream fileStream = new System.IO.FileStream(filePath, FileMode.Create))
            {
                while (bytesRead > 0)
                {
                    fileStream.Write(dataRead, 0, bytesRead);
                    fileStream.Flush();

                    logStreamWriter.WriteLine("Flushed {0} bytes", bytesRead.ToString());
                    logStreamWriter.Flush();

                    bytesRead = data.requestStream.Read(dataRead, 0, BUFFER_SIZE);
                }

                fileStream.Close();
            }

            logStreamWriter.Close();
        }
    }
} 
```

客户端 app.config：

```
<?xml version="1.0"?>
<configuration>
    <system.serviceModel>

        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IService1" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Mtom" textEncoding="utf-8" transferMode="Streamed"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>

        <client>
            <endpoint address="http://localhost/WcfService1/Service1.svc"
                binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IService1"
                contract="UploadService.IService1" name="BasicHttpBinding_IService1" />
        </client>

    </system.serviceModel>

    <startup>
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
    </startup>
</configuration> 
```

客户端主要代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using CustomFileUploaderTester.UploadService;
using System.ServiceModel;
using System.IO;

namespace CustomFileUploaderTester
{
    class Program
    {
        private static long bytesRead = 0;

        static void Main(string[] args)
        {
            Service1Client client = new Service1Client();

            using (StreamWithProgress fstream = new StreamWithProgress(@"C:\BladieBla\someFile.wmv", FileMode.Open))
            {
                client.InnerChannel.AllowOutputBatching = false;

                fstream.ProgressChange += new EventHandler<StreamReadProgress>(fstream_ProgressChange);

                client.UploadStream("someFile.wmv", fstream);

                fstream.Close();
            }

            Console.ReadKey();
        }

        static void fstream_ProgressChange(object sender, StreamReadProgress e)
        {
            bytesRead += e.BytesRead;

            Console.WriteLine(bytesRead.ToString());
        }
    }
} 
```

派生的 FileStream 类 ( **StreamWithProgress** )

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace CustomFileUploaderTester
{
    public class StreamReadProgress : EventArgs
    {
        #region Public Properties

        public long BytesRead
        {
            get;
            set;
        }

        public long Length
        {
            get;
            set;
        }

        #endregion

        #region Constructor

        public StreamReadProgress(long bytesRead, long fileLength)
            : base()
        {
            this.BytesRead = bytesRead;

            this.Length = fileLength;
        }

        #endregion
    }

    public sealed class StreamWithProgress : FileStream
    {
        #region Public Events

        public event EventHandler<StreamReadProgress> ProgressChange;

        #endregion

        #region Constructor

        public StreamWithProgress(string filePath, FileMode fileMode)
            : base(filePath, fileMode)
        {
        }

        #endregion

        #region Overrides

        public override int Read(byte[] array, int offset, int count)
        {
            int bytesRead = base.Read(array, offset, count);

            this.RaiseProgressChanged(bytesRead);

            return bytesRead;
        }

        #endregion

        #region Private Worker Methods

        private void RaiseProgressChanged(long bytesRead)
        {
            EventHandler<StreamReadProgress> progressChange = this.ProgressChange;

            if (progressChange != null)
            {
                progressChange(this, new StreamReadProgress(bytesRead, this.Length));
            }
        }

        #endregion
    }
} 
```

**-- 更新：2012-04-20**

在我安装了一个环回适配器之后，我用 RawCap 跟踪了通信，发现数据实际上是流式传输的，但是 IIS 服务器在调用 web 方法之前正在缓冲所有数据！

根据这篇文章：

[http://social.msdn.microsoft.com/Forums/is/wcf/thread/cfe625b2-1890-471b-a4bd-94373daedd39](http://social.msdn.microsoft.com/Forums/is/wcf/thread/cfe625b2-1890-471b-a4bd-94373daedd39)

这是 WCF 继承的 ASP.Net 行为......但他们正在谈论在 .Net 4.5 中对此的修复：|

如果有人有任何其他建议，那就太好了！

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T14:02:40.457

经过一些严格的测试，我看到数据实际上是流式传输的。我将该`[MessageContract]`属性应用于 Encapsulator 类（根据[http://msdn.microsoft.com/en-us/library/ms733742.aspx](http://msdn.microsoft.com/en-us/library/ms733742.aspx)），这使我能够发送一些关于文件的额外元数据。使用 WireShark 和 RawCap 很明显，在读取 Stream 时数据是通过网络发送的。

另一个让他头疼的问题是，在实际调用上传方法之前，正在流式传输的数据是在服务器端缓冲的（使用 IIS 7.5）！这有点令人担忧，但据此：[http](http://social.msdn.microsoft.com/Forums/is/wcf/thread/cfe625b2-1890-471b-a4bd-94373daedd39) ://social.msdn.microsoft.com/Forums/is/wcf/thread/cfe625b2-1890-471b-a4bd-94373daedd39 应该在 4.5 .Net 发布

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T07:30:49.573

您将 Mtom 与流传输模式一起使用。这可能会导致问题。请尝试删除 Mtom。实际上，无论如何，Mtom 是一个非常古老的标准。另外，当使用流传输模式的 SOAP 服务时，我们只能有一个类型为 Stream 的参数。我们不能使用像 Encapsulator 这样的自定义类型。

构建文件上传/下载服务的推荐解决方案是使用 REST。在 .NET 平台上构建 REST 服务的方法之一是使用 ASP.NET Web API：[http](http://www.asp.net/web-api) ://www.asp.net/web-api 。使用这个API，我们不需要处理流传输模式。我们需要处理的是 Range 标头。这篇博文可能会有所帮助：http: [//blogs.msdn.com/b/codefx/archive/2012/02/23/more-about-rest-file-upload-download-service-with-asp-net-web- api-and-windows-phone-background-file-transfer.aspx](http://blogs.msdn.com/b/codefx/archive/2012/02/23/more-about-rest-file-upload-download-service-with-asp-net-web-api-and-windows-phone-background-file-transfer.aspx). 但也请注意，此 API 尚未发布。如果你不想使用预发布的产品，你可以使用其他技术，例如，你可以使用 MVC 控制器作为 REST 服务，或者使用 WCF REST 服务，或者构建一个自定义的 http 处理程序等。如果你想要要使用 Stream，需要自定义流。我建议您查看 [http://blogs.msdn.com/b/james_osbornes_blog/archive/2011/06/10/streaming-with-wcf-part-1-custom-stream-implementation.aspx](http://blogs.msdn.com/b/james_osbornes_blog/archive/2011/06/10/streaming-with-wcf-part-1-custom-stream-implementation.aspx)以获取示例.

此致，

明旭。****

# tsql - TSQL 2 可选参数

> ID：10225234
> 
> 赞同：2
> 
> 时间：2012-04-19T09:28:34.460
> 
> 标签：tsql, sql-server-2005, optional-parameters

我有一个简单的查询，如下所示：

```
SELECT * FROM orders 
```

返回所有订单，简单。

我想在我的查询中添加可选参数。

```
DECLARE @group INT;
SET @group = 1 --IT1

SELECT * FROM orders WHERE group = isnull(@group, group) 
```

这也很好用。

我的问题是我需要像这样的第二个参数：

```
DECLARE @group INT;
SET @group = 1 --IT1
DECLARE @department VARCHAR(8);
SET @department = 'IT'

SELECT * FROM orders WHERE /*and here add limitation with department*/ group = isnull(@group, group) 
```

我的订单表有 GROUP 列，但没有 DEPARTMENT 列。

情况看起来像这样：我有 2 个组合框。一为部门，二为组。首先，我有选择：

*   全部
*   它
*   呼叫中心

当用户从 combo1 中选择某些内容时填充第二个。如果他选择 IT，组组合框将包含以下选项：

*   全部
*   IT1
*   IT2

如果用户从第一个组合部门中选择然后分组，这很容易，因为我只检查组。
问题是当他想要来自 IT 部门的所有订单时。

这是将组分配给部门的方式

*   它 - 1,2,5
*   呼叫中心 - 4,6
*   打印 - 3

有任何想法吗？

添加：

我创造了这样的东西：

```
DECLARE @group INT;
SET @group = 1 --IT1
DECLARE @department VARCHAR(8);
SET @department = 'IT'

SELECT * FROM orders WHERE
(@department IS NULL OR (@department='IT' AND group IN (1,2,5)) OR (@department='PRINT' AND group =3))
     AND
     (@group IS NULL OR group = @group) 
```

我不知道它是否正确，它以某种方式起作用:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:32:32.400

这是查询。In the front end, when a single group is selected, you assign the @group variable, just like you did before. 如果没有选择单个组，则为部门分配标志。因此，如果选择了所有 IT，则将 @allIT 设置为 1（或其他任何值，只要它不为 NULL）并像这样继续：

```
SELECT * FROM orders 
WHERE (@group = NULL OR group = @group)
AND
(@allIT = NULL OR group = 1 or group = 2 or group = 3)
AND
(@allCallCenter = NULL OR group = 4 or group = 5)
... 
```

如果在组合框中未选择任何内容，则将该参数值设置为 NULL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:46:44.587

你可以假装你有一个表，使用 CTE 填充了通过 union all 的记录。然后执行连接和检查。如果您更喜欢 CTE，可以将其替换为派生表。

```
; WITH departments (DepartmentID, GroupID) as (
  select 'IT', 1
  union all
  select 'IT', 2
  union all
  select 'IT', 5
  union all
  select 'CALL CENTRE', 4
  union all
  select 'CALL CENTRE', 6
  union all
  select 'PRINT', 3
)
SELECT * 
FROM orders 
  INNER JOIN departments
     ON orders.[group] = departments.GroupID
WHERE (@Group is null OR [group] = @group)
  AND (@department is null OR DepartmentID = @department) 
```

# grid - 将记录/类数据添加到 Extjs 网格列而不是行中

> ID：10225236
> 
> 赞同：0
> 
> 时间：2012-04-19T09:28:50.387
> 
> 标签：grid, extjs4

我需要在事件的网格面板中添加数据。请注意，我不想在此处插入完整的行，而是想在列中动态添加数据。

例如，当用户单击其数据将进入“想要”列的复选框时（参考下图），我想以以下格式填充它。如果用户单击必须进入“dontwan”列的数据，则必须以以下格式填充

![在此处输入图像描述](../Images/a60d8906734acf16d97722858bbb43c8.png)

我怎样才能做到这一点...请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:36:22.517

网格由`columns`网格面板的配置和网格存储结构组成。这意味着 ExtJS 将网格面板定义为一个 Grid，每一行都是网格存储的记录（列就是网格上显示的字段名称）。那么“无论行索引如何，都继续在列中推送数据？” 无法。让我们想象一下：

*   网格商店如何在您的案例中定义“记录”？
*   网格如何提供删除/更改“复合记录”的方法？

不要忘记，ExtJS 网格不仅用于显示数据，还用于与服务器通信以通过其代理执行 CRUD。

如果网格**只是用于显示数据，**您仍然可以实现您的目标。在这种情况下，您创建一个虚拟存储`fields: ['Family', 'Want', 'DontWant']`并使用`columns`config 来显示数据。然后直接与网格存储中的记录交互以在您选中/取消选中数据时修改“Want”/“DontWant”值（如果记录不存在则添加新的）

# solr - 集成 Nutch1.4 和 Solr 时的输出究竟是什么？

> ID：10225239
> 
> 赞同：0
> 
> 时间：2012-04-19T09:29:05.897
> 
> 标签：solr, lucene, search-engine, nutch

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T19:27:06.520

## **对于问题 #1：这五个文件夹究竟包含什么？**

以下是[nutch wiki 页面](http://wiki.apache.org/nutch/NutchTutorial)的详细信息：

**爬网数据库或**crawldb 。这包含有关 Nutch 已知的每个 URL 的信息，包括它是否被获取，如果是，何时获取。

**链接数据库或**linkdb 。这包含每个 URL 的已知链接列表，包括源 URL 和链接的锚文本。

一**组段**。每个段都是作为一个单元获取的一组 URL。段是具有以下子目录的目录：

1.  crawl_generate 命名一组要获取的 URL
2.  crawl_fetch 包含获取每个 URL 的状态
3.  内容包含从每个 URL 检索到的原始内容
4.  一个 parse_text 包含每个 URL 的解析文本
5.  parse_data 包含从每个 URL 解析的外链和元数据
6.  crawl_parse 包含外链 URL，用于更新 crawldb

**index**文件夹包含从爬取的内容和链接数据库创建的索引。

**spellchecker**：这是为改进查询而生成的拼写检查索引。[如果您想了解更多关于它的知识，这](http://lucene.472066.n3.nabble.com/Spellcheck-with-Solr-td3315906.html)和[这](https://stackoverflow.com/questions/3115422/spell-checker-in-nutch-1-0)值得一读。也看到[这个](https://stackoverflow.com/questions/3115422/spell-checker-in-nutch-1-0)。

## **对于问题 #2：“PageRank（或 LinkRank）”在哪里起作用？**

阅读[这个](http://wiki.apache.org/nutch/FixingOpicScoring)和[这个](http://wiki.apache.org/nutch/NewScoring)。不确定[这](http://lucene.472066.n3.nabble.com/calcualting-Page-Rank-using-Nutch-Crawler-td1976998.html)[是否](http://lucene.472066.n3.nabble.com/PageRank-LinkRank-in-Nutch-Opic-vs-NewScoring-in-Nutch-1-1-td938210.html)会有所帮助，但会增加您的知识。

## **对于问题 #3：Nutch 是否索引页面并且 solr 再次索引它们？**

爬取数据的索引是由 Apache Solr 而不是 Nutch 生成的。

这是[内部工作](http://www.atlantbh.com/apache-nutch-overview/)：Nutch 将解析中收集的所有数据委托给 IndexingFilter 扩展，该扩展生成要索引的数据。过滤器的输出是一个 NutchDocument，它再次被委托给 Nutch。Nutch 然后决定是否应该根据映射文件对数据进行索引，该映射文件定义了哪些 NutchDocument 字段将被映射到由 Nutch 读取的 SolrDocument 字段。

# delphi - Delphi XE2 RibbonComboBox 可以滚动吗？

> ID：10225240
> 
> 赞同：1
> 
> 时间：2012-04-19T09:29:06.283
> 
> 标签：delphi, ribbon

如何使该组件可滚动？

# html - 产品图片和描述如何重叠

> ID：10225247
> 
> 赞同：0
> 
> 时间：2012-04-19T09:29:40.827
> 
> 标签：html, css, css-float

购物车包含以下使用 html 创建的产品页面和图像。如果在浏览器中使用 ctrl++ 缩小页面，则图像和文本会重叠：图像变宽但文本不会向右移动，它在图像上方。如何解决这个问题，以便文本在图像之后开始？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-    strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
...
        <div>
            <div style="float: left; width: 30%">

                <a class="fbox" href="/store/Store/Lightbox?product=FTL286%252f42">
                    <img style="width: 200px" alt="" src="/store/Store/MainImage?product=FTL286%252f42" />
                </a>
            </div>
            <div style="float: left; Xmargin-left: 4%">
                <div style="margin: 3%">

                </div>
                <div>
                    <b>
                        € 78,92</b>
                    <br />

                    <br />
                    <div style="height: 1.5px">
                    </div>
Availability:<b>
                        In order
                    </b>
                    <form action="/store/Store/Details?product=FTL286%252f42" method="post">
                    <br />
                    <input id="ProductId" name="ProductId" type="hidden" value="FTL286/42" />
                    Quantity
                    <input id="Quantity" name="Quantity" style="width:30px" type="text" value="1" />

                </div>
                <br />
                <br />
                <input type="submit" value="Add to cart" class="button green rounded" />
                </form>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:39:35.407

如果图像有固定的，比如 200px，你可以`<div style="margin-left: 250px">`在右边的分区上使用。

**[看演示](http://jsfiddle.net/B2Xns/1/)**

# c++ - nvidia 驱动程序使套接字在接受时失败

> ID：10225249
> 
> 赞同：0
> 
> 时间：2012-04-19T09:29:42.587
> 
> 标签：c++, ubuntu, opengl, pthreads, nvidia

这是使用 glut 和 pthreads 的程序的编译摘录。

使用 nvidia 驱动程序版本 295，当 glutmainloop 启动时 tcp 接受中断（程序报告错误 4）

使用 275 版，该程序运行良好。

（ubuntu，3.0.0-17-generic #30-Ubuntu SMP Thu Mar 8 20:45:39 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux 问题也通过 3.0.0-16 验证）

如果未调用 glStuff 函数，则以任一顺序包括 -lglut 和 -lpthread 都不能解决问题，程序按预期工作

有人遇到过类似的问题吗？

```
#include <GL/glut.h>  
#include <arpa/inet.h>
#include <netdb.h>
#include <netinet/in.h>
#include <iostream>

using namespace std;

enum Error{WSASTARTUP,SOCKETCREATION,SOCKETBINDING,SOCKETLISTENING,SOCKETACCEPT};
void onError(Error err){
 std::cerr<<"error"<<err<<endl;
}

void* serverrun(void*){
 int mainSocket;
 int port=15002;
 struct sockaddr_in local;
 local.sin_family=AF_INET;
 local.sin_addr.s_addr=htonl(INADDR_ANY);
 local.sin_port=htons((u_short)port);
 mainSocket=socket(AF_INET,SOCK_STREAM,0);
 int val=1;
 setsockopt(mainSocket,SOL_SOCKET,SO_REUSEADDR,&val,sizeof(val));
 if(mainSocket<0){
  onError(SOCKETCREATION);  
}
if(bind(mainSocket, (struct sockaddr*)&local,sizeof(local))!=0)
{
  onError(SOCKETBINDING);
}
if(listen(mainSocket,10)!=0)
{
  onError(SOCKETLISTENING);
} 
struct sockaddr_in from;
socklen_t fromlen=sizeof(from);

while(true){
 int cs;
 cs=accept(mainSocket,(struct sockaddr*)&from,&fromlen);
 if (cs!=-1){
  std::cout<<"new client"<<std::endl;
 }else{
   onError(SOCKETACCEPT);
 }
}//while running
return NULL;
}//run

void drawGLScene(){}

void idleFunc(){}

void glStuff(int& argc,char** argv){
 glutInit(&argc, argv);  
 glutInitDisplayMode(GLUT_RGBA | GLUT_DOUBLE | GLUT_ALPHA | GLUT_DEPTH);    
 glutInitWindowSize(100,100);  
 glutInitWindowPosition(0,0);
 glutCreateWindow("win");
 glutDisplayFunc(drawGLScene);      
 glutIdleFunc(idleFunc);
 glutMainLoop();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T09:34:19.883

您似乎完全忽略`errno`了，您看到的确切错误是什么？

如果是`EINTR`，你应该重试，这是完全正常的。

# sql - 可以在提供列名的 SQL Server 中声明一个常量吗？

> ID：10225251
> 
> 赞同：1
> 
> 时间：2012-04-19T09:30:07.017
> 
> 标签：sql, sql-server, sql-server-2005

我想问你是否可以在提供列名的 SQL Server 中声明一个常量？

意思是这样的：

```
declare @column varchar(30)
set @column = 'Column1'

SELECT @column FROM Table1 
```

我知道上面的声明是错误的，但也许是为自己提供列名的解决方案。

我想显示结果，`Column1`但如果`Column1`在 '' 内，则将返回`(No column name)`附加列名，所有行的结果都是`Column1`.

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:33:34.863

您不能在 SQL 中使用动态列名。

为此，您需要使用动态 SQL。我建议阅读Erland Sommarskog[的 The Curse and Blessings of Dynamic SQL](http://www.sommarskog.se/dynamic_sql.html)以全面了解这个问题——这篇文章很长但很全面。

使用动态 SQL 会使您暴露于[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)，因此请谨慎使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:34:36.893

为此，您需要使用动态查询，如果您使用的是 slq 服务器，则可以使用 sp_execute 执行

```
DECLARE @SQLString nvarchar(1000)
declare @column varchar(30)  
set @column = 'Column1'
SET @SQLString  = 'SELECT ' + @column + ' in Table1 '
EXECUTE sp_executesql @SQLString 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T09:32:57.073

简而言之，不，你不能那样做。您需要使用动态sql。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T09:33:53.750

使用[动态 SQL](http://www.mssqltips.com/sqlservertip/1160/execute-dynamic-sql-commands-in-sql-server/)。

代码将是这样的：

```
DECLARE @sqlCommand nvarchar(1000)
DECLARE @column varchar(75)
SET @column = 'Column1'
SET @sqlCommand = 'SELECT ' + @column + ' from Table1'
EXECUTE sp_executesql @sqlCommand, N'@column nvarchar(75)', @column = @column 
```

有关 sp_executesql 的更多信息，请查看[此](http://msdn.microsoft.com/en-us/library/ms188001.aspx)。

* * *

就像@Oded 所说，这种类型的解决方案可以进行 SQL 注入！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T09:34:46.903

```
declare @query varchar(100)
set @query = 'select Column1 from table1'
exec (@query) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T09:35:40.177

正如您自己所说，上述声明是不正确的。但是您可以将整个查询存储为动态 sql 并使用`Exec()`.

对于您的情况，它将是：

```
declare @column varchar(30)
set @column = 'Column1'

declare @sqlSelect varchar(500)

set @sqlSelect = 'SELECT ' + @column + ' in Table1'
Exec( @sqlSelect ) 
```

# alfresco - 如何通过 Alfresco 中的 Java 代码将文档签出给其他用户

> ID：10225254
> 
> 赞同：1
> 
> 时间：2012-04-19T09:30:17.207
> 
> 标签：alfresco

我正在尝试编写一些将由“管理员”用户运行的代码，这些代码会将文档检出给不同的用户，例如“约翰”。但是，当我在“共享”中查看签出的文档时，它总是说该文档已签出给用户“管理员”。我在 Alfresco 4.0.c 上运行此代码

这是我正在执行的代码

```
Boolean rtn = AuthenticationUtil.runAs(new AuthenticationUtil.RunAsWork<Boolean>() {
   @Override
public Boolean doWork() throws Exception {
  // executes the following code as user who had the document previously checked out
  CheckOutCheckInService checkOutCheckInService = serviceRegistry.getCheckOutCheckInService();

  //this line is debug code to check who the current user is according to the AuthenticationService
  //AuthenticationService authService = serviceRegistry.getAuthenticationService();
  //if (log.isDebugEnabled()) log.debug("Current UserName in AuthenticationService is '" + authService.getCurrentUserName() + "'.");

  NodeRef checkedOutCopy = checkOutCheckInService.checkout(nodeRef);
  ContentWriter writer = fileFolderService.getWriter(checkedOutCopy);
  writer.putContent(workingCopyContentAndMetadata.getContentFile());
  if (log.isDebugEnabled()) log.debug("Have uploaded working copy document as user '" + String.valueOf(workingCopyOwner) + "'.");
  return true; 
  }
}, String.valueOf(workingCopyOwner)); 
```

通过查看 Alfresco 源代码，checkOutcheckInService 从 AuthenticationService getCurrentUserName() 方法获取用户名以签出文档。但是，AuthenticationUtil.runAs 代码似乎不会更改 AuthenticationService 中的用户。

我在这里做错了什么或者我该如何正确地做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T18:29:22.853

您遇到的问题是注册表接口提供的服务不允许您更改系统中的当前用户。为此，您需要引入 AuthenticationComponent，保留当前用户，更改当前用户，然后恢复原始用户。

这与[此处](https://forums.alfresco.com/en/viewtopic.php?f=11&t=1046)建议的方法相同，这将允许您在 Alfresco 中以系统用户身份运行。

举一个简单的例子：

以与引入注册表相同的方式添加身份验证组件，确保公开一个用于 Spring 注入的设置器：

```
private AuthenticationComponent authComponent;

//for Spring injection
public void setAuthenticationComponent(AuthenticationComponent authComponent) {
    this.authComponent = authComponent;
} 
```

现在您可以调用该方法来设置当前用户：

```
 authComponent.setCurrentUser(username); 
```

调用 AuthenticationService.getCurrentUserName() 现在将正确显示当前用户。不要忘记，在重新启动之前，您需要在 *-context.xml 中添加对 bean 的引用。

在你的类的 -context.xml 中：

```
 property name="authenticationComponent" ref="AuthenticationComponent" 
```

祝你好运！

# wpf - 用另一个 ViewModel 替换 ViewModel

> ID：10225265
> 
> 赞同：1
> 
> 时间：2012-04-19T09:30:55.577
> 
> 标签：wpf, prism, mef

我有两个应用程序，一个是主应用程序，另一个是设计器表单应用程序。

目前，我的主要应用程序与 prism 和 mef 一起使用。我的主应用程序中的一些视图只是数据输入表单。我想要从我的设计器表单应用程序中加载一个数据输入表单视图，然后可以对其进行编辑，但要做到这一点，我想使用不同的视图模型进行设计。我不希望表单附加到它通常的视图模型并尝试获取数据等。

如何使用 MEF 提供不同的导出，以便它选择这个而不是通常的视图模型？理想情况下，它只会替换主应用程序视图模型，因此它只是使用它。

这是我的示例视图，导入视图模型

```
[Export("PatientDetailView")]
[PartCreationPolicy(CreationPolicy.NonShared)]
public partial class PatientDetailView : UserControl
{
    [ImportingConstructor]
    public PatientDetailView(PatientDetailViewModel viewModel)
    {
        InitializeComponent();

        this.DataContext = viewModel;
    }
} 
```

这是我的视图模型的基础：

```
[Export(typeof(PatientDetailViewModel))]
[PartCreationPolicy(CreationPolicy.NonShared)]
public class PatientDetailViewModel : ViewModelBase, IRegionManagerAware
{
    [ImportingConstructor]
    public PatientDetailViewModel(IEventAggregator eventAggregator, IDialogService dialogService, IRegionManager regionManager)
        : base(eventAggregator, dialogService, regionManager)
    {
       //Contains Commands etc for Saving Patient Detail Record
       //Receiving patient detail etc 
    } 
```

}

**更新：**

以上包含在患者模块组件中。这适用于主应用程序。对于 Designer 应用程序，我想将上面的视图模型替换为如下所示：

```
[Export(typeof(PatientDetailViewModel))]
[PartCreationPolicy(CreationPolicy.NonShared)]
public class PatientDetailViewModel : ViewModelBase, IRegionManagerAware
{
    [ImportingConstructor]
    public PatientDetailViewModel(IEventAggregator eventAggregator, IDialogService dialogService, IRegionManager regionManager)
        : base(eventAggregator, dialogService, regionManager)
    {
       //Contains Commands etc for Designing the form
       //No commands from the original VM so changes how it tries to work.
    } 
```

}

以上内容正在覆盖我的主应用程序的默认行为。此 VM 将包含在 Designer 程序集或单独的 DesignerVMs 程序集中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:05:13.630

由于这些是单独的应用程序，并且数据上下文可以是任何对象，因此解决方案可以很简单。

视图更改为按名称导入其数据上下文。

```
public static class MefContracts
{
  public const string PatientDetailViewModel = "PatientDetailViewModel";
}

[Export("PatientDetailView")]
[PartCreationPolicy(CreationPolicy.NonShared)]
public partial class PatientDetailView : UserControl, IPartImportsSatisfiedNotification
{
  [Import( MefContracts.PatientDetailViewModel, typeof( object )]
  private object vm;

  public void OnImportsSatisfied()
  {
    this.DataContext = vm;
  }

  public PatientDetailView()
  {
    InitializeComponent();
  }
} 
```

然后根据应用程序，您只包含所需的 ViewModel 并按名称导出

```
[Export( MefContracts.PatientDetailViewModel, typeof( object ) ) )]
[PartCreationPolicy(CreationPolicy.NonShared)]
public class PatientDetailViewModel : ViewModelBase, IRegionManagerAware
{
  ....
} 
```

**如果您真的无法分离程序集（这仍然是 imo 最好的选择，将 vm 放在不同的程序集中没有任何问题），则**更新**，您可以使用一个简单的工厂来代替（以抽象获取 ViewModel 的方式）：改为导入 vm，你导入一个可以创建 vm 的工厂。它创建哪一个取决于某些配置值，必须在每个应用程序中进行不同的设置。然后，您将不得不使用不同的合同导出 vm，否则没有（简单的）方法可以区分它们。例子：**

 **```
public static class MefContracts
{
  public const string PatientDetailViewModelMain = "PatientDetailViewModelMain";
  public const string PatientDetailViewModelDesigner = "PatientDetailViewModelDesigner";
}

//the main vm
[Export( MefContracts.PatientDetailViewModelMain, typeof( object ) ) )]
[PartCreationPolicy(CreationPolicy.NonShared)]
public class PatientDetailViewModel : ViewModelBase, IRegionManagerAware
{
  ....
}

//the other vm
[Export( MefContracts.PatientDetailViewModelDesigner, typeof( object ) ) )]
[PartCreationPolicy(CreationPolicy.NonShared)]
public class OtherPatientDetailViewModel : ViewModelBase, IRegionManagerAware
{
  ....
}

[Export("PatientDetailView")]
[PartCreationPolicy(CreationPolicy.NonShared)]
public partial class PatientDetailView : UserControl
{
  [ImportingConstructor]
  public PatientDetailView( PatientDetailViewModelFactory viewModelFactory )
  {
    InitializeComponent();
    this.DataContext = viewModelFactory.Create();
  }
}

[Export]
class PatientDetailViewModelFactory
{
  [Import]
  private CompositionContainer container{ get; set; }

  public enum AppType{ Main, Designer }

  public AppType AppType{ get; set; }

  public object Create()
  {
    return container.GetExportedValue<object>( 
      AppType == AppType.Main ? MefContracts.PatientDetailViewModelMain :
                                MefContracts.PatientDetailViewModelDesigner );
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:23:41.453

尝试这样的事情：

创建一个定义视图模型的接口：

```
public interface IPatientDetailViewModel{...} 
```

在您的主应用程序中，从界面派生您的视图模型并修改 Export 属性。

```
[Export(typeof(IPatientDetailViewModel)]
public class PatientDetailViewModel : ViewModelBase, 
    IRegionManagerAware, IPatientViewModel
{ ... } 
```

我假设视图位于共享程序集中。将默认构造函数添加到您的视图（如果在您的设计应用程序中不使用 Mef），并更改导入以使用接口：

```
public PatientDetailView()
{
    InitializeComponent();
}

[ImportingConstructor]
public PatientDetailView(IPatientDetailViewModel viewModel)
{
    InitializeComponent();

    this.DataContext = viewModel;
} 
```

现在，如果您的设计器应用程序使用 MEF，您可以导出不同的视图模型以导入到视图中

```
[Export(typeof(IPatientDetailViewModel)]
public class DesignPatientDetailViewModel : ViewModelBase, IPatientViewModel
{ ... } 
```

或者如果不使用 MEF，请使用

```
d:DataContext="{d:DesignInstance local:DesignPatientViewModel}" 
```

在您认为的 Xaml 中。**

# javascript - 如何使用 JavaScript 访问 CouchDB？SOP 错误

> ID：10225267
> 
> 赞同：2
> 
> 时间：2012-04-19T09:30:59.757
> 
> 标签：javascript, jquery, jquery-plugins, couchdb, same-origin-policy

我是 Couch DB 的新手。我在大学服务器上的主文件夹上安装了 CouchDB，看起来像......

```
http://servername.com/home/users/roby 
```

Db 在端口 1234 上运行，并且运行良好。我能够使用我机器上的 SSH 隧道使用 Java 的 Couch4J 驱动程序填充数据库。

我正在开发一个需要存储在数据库中的数据的 Web 应用程序。假设我有一个 index.html 文件位于

```
http://servername.com/home/users/roby/public_html/index.html 
```

被翻译成

```
http://servername.com/~roby/index.html 
```

发出一个简单的请求时，我遇到了奇怪的错误，例如

```
XMLHttpRequest cannot load http://xxxxxxx:1234/. 
Origin http://servername.com is not allowed by Access-Control-Allow-Origin. 
```

我用来尝试从数据库获得一些响应的代码如下

```
$.couch.urlPrefix = "http://xxxxxxx:1234";

$.couch.info({
    success: function(data) {
        console.log(data);
    }
}); 
```

任何帮助表示赞赏。

谢谢。

R M

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:23:46.297

你有三个选择。

1.  您可以使用 Nginx 代理 CouchDB，这样您就可以从与 CouchDB 相同的端口提供 html。
2.  您可以通过将其附加到文档来从 CouchDB 本身提供 html（最简单的方法是使用 CouchApp 或类似方法）。
3.  最后，您可以在 CouchDB 中启用 jsonp 响应并将`calback`参数添加到查询中，jQuery 支持 jsonp 响应。

如果您无法更改服务器配置，则选项 1 和 3 不可用。至于第二个，您可以在最低级别使用 put 请求添加附件：

```
curl -X PUT http://xxxx:1234/dbname/docname/index.html --data-binary @index.html -H "Content-Type: text/html" 
```

您需要在每次更改后上传文件，因此手动操作并不实际。有诸如CouchApp或[Kenso 之](http://couchapp.org)[类](http://kan.so/)的工具可以帮助您。

# javascript - 我如何使用Javascript找到两个日期之间的差异

> ID：10225268
> 
> 赞同：8
> 
> 时间：2012-04-19T09:31:03.853
> 
> 标签：javascript

我想获得特定日期的铰链天数，所以我试图用今天的日期检测特定日期。但这在这里不起作用是我的[代码](http://jsfiddle.net/sureshpattu/sJueG/) 如果日期是下个月 27 我怎样才能得到剩余的日子

```
 var date2=new Date();
    var date1=27/5/2012;
    var diff = date1.getDate()-date2.getDate();
    var date_reaming = diff.getDate();
    document.write(date_reaming + 'days to go'); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-19T09:34:06.783

你的代码

```
date1=27/5/2012 
```

实际意思是27除以5除以2012。相当于写

```
date1 = 0.0026838966202783303 
```

date1 将是一个数字，这个数字没有`getDate`方法。

如果您将它们声明为实际的日期对象

```
var date2 = new Date(2012, 3, 19);
var date1 = new Date(2012, 4, 27); 
```

你将能够执行

```
var diff = date1 - date2; 
```

这将为您提供两个日期之间的毫秒差异。

从这里，您可以计算天数，如下所示：

```
var days = diff / 1000 / 60 / 60 / 24; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-19T09:34:27.573

```
function getDateDiff(date1, date2, interval) {
    var second = 1000,
    minute = second * 60,
    hour = minute * 60,
    day = hour * 24,
    week = day * 7;
    date1 = new Date(date1).getTime();
    date2 = (date2 == 'now') ? new Date().getTime() : new Date(date2).getTime();
    var timediff = date2 - date1;
    if (isNaN(timediff)) return NaN;
    switch (interval) {
    case "years":
        return date2.getFullYear() - date1.getFullYear();
    case "months":
        return ((date2.getFullYear() * 12 + date2.getMonth()) - (date1.getFullYear() * 12 + date1.getMonth()));
    case "weeks":
        return Math.floor(timediff / week);
    case "days":
        return Math.floor(timediff / day);
    case "hours":
        return Math.floor(timediff / hour);
    case "minutes":
        return Math.floor(timediff / minute);
    case "seconds":
        return Math.floor(timediff / second);
    default:
        return undefined;
    }
}

console.log(getDateDiff('19/04/2012', '27/5/2012', 'days')); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-19T09:32:33.350

jQuery 没有内置的日期管理功能。尝试： http: [//momentjs.com/](http://momentjs.com/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-19T09:37:17.647

我认为你可以减去它：

```
var date2 = new Date(2012, 3, 19); // 1st argument = year, 2nd = month - 1 (because getMonth() return 0-11 not 1-12), 3rd = date
var date1 = new Date(2012, 4, 27);
var distance = date1.getTime() - date2.getTime();
distance = Math.ceil(distance / 1000 / 60 / 60 / 24); // convert milliseconds to days. ceil to round up.
document.write(distance); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-19T10:46:15.547

这是答案，我从[这里](https://stackoverflow.com/questions/1410285/calculating-the-difference-between-two-dates/1440718#1440718)找到了 我的 js-fiddle 在[这里](http://jsfiddle.net/sureshpattu/kd3Sg/2/)

```
var d = new Date();
var curr_date = d.getDate();
var curr_month = d.getMonth();/* Returns the month (from 0-11) */
var curr_month_plus= curr_month+1; /* because if the month is  4 it will show output 3 so we have to add +1 with month*/ 
var curr_year = d.getFullYear();
function dstrToUTC(ds) {
    var dsarr = ds.split("/");
     var mm = parseInt(dsarr[0],10);
     var dd = parseInt(dsarr[1],10);
     var yy = parseInt(dsarr[2],10);
     return Date.UTC(yy,mm-1,dd,0,0,0); }
    function datediff(ds1,ds2) {
     var d1 = dstrToUTC(ds1);
     var d2 = dstrToUTC(ds2);
     var oneday = 86400000;
     return (d2-d1) / oneday;    }
    var a =curr_month_plus+ '/' + curr_date + '/' + curr_year;
    var b;   
    b = "5/26/2012";
    document.write(+datediff(a,b)+" day(s)<br>"); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-19T09:35:43.053

请了解 jQuery 的用途。

> jQuery 是一个快速而简洁的 JavaScript 库，它简化了**HTML 文档遍历**、**事件处理**、**动画**和**Ajax 交互**，以实现快速的 Web 开发。

您想使用*基本*的 Javacript 或 Juan G. Hurtado 所说的另一个库，如**momentjs**。

# iphone - 在不知道标签名称的情况下，Objective C 中是否存在 XML 解析器？

> ID：10225273
> 
> 赞同：1
> 
> 时间：2012-04-19T09:31:39.123
> 
> 标签：iphone, objective-c, xml-parsing

我正在寻找用于 iPhone 开发的 XML 的一种“通用解析器”的教程或示例。我不知道这是否可能，但我想找到一个可以解析每个 XML 文件而不知道 < > 符号内的标签（字段？）的名称。有谁知道这是否可能？

也许我没有使用正确的词汇，我希望你能理解，对不起我的英语！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T22:20:19.433

这是一个静态库，用于实现 XML 解析这一目的，而无需了解任何标记名称。

[https://dl.dropboxusercontent.com/u/11077584/XMLParser_lazyWorkaholics.zip](https://dl.dropboxusercontent.com/u/11077584/XMLParser_lazyWorkaholics.zip)

请浏览此帖子以供进一步参考

[http://ioslazyworks.blogspot.in/2013/05/ios-universal-xml-parser.html](http://ioslazyworks.blogspot.in/2013/05/ios-universal-xml-parser.html)

# android - 在列表中放置广告

> ID：10225278
> 
> 赞同：0
> 
> 时间：2012-04-19T09:32:02.753
> 
> 标签：android, xml, ads

我创建了这个 XML 文件，它显示了一个不同项目的列表，我决定在这个列表中添加广告，但问题是广告覆盖了列表中的第一个项目并直接跳转到第二个项目。任何人都可以告诉我如何解决这个问题？我正在寻找的另一件事是更改此列表的重力，使其列在右侧而不是左侧。这是一个说明我的问题的图像： ![在此处输入图像描述](../Images/27c1b4cdecc70c3767f521174f20c1f7.png)

XML 文件：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
  android:id="@+id/list_container"
  android:measureAllChildren="true"
  android:layout_width="wrap_content" 
  android:layout_height="match_parent">

<ListView android:id="@android:id/list"
      android:layout_width="fill_parent" 
      android:layout_height="fill_parent"
      android:drawSelectorOnTop="false"
      android:focusableInTouchMode="true"
    />

<ScrollView android:id="@+id/edit_layout"
    android:layout_width="fill_parent" 
      android:layout_height="fill_parent"
    android:visibility="gone"
    >       
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingTop="5sp"
        android:paddingLeft="10sp"
        android:gravity="right"
        android:paddingRight="15sp"
        >
        <TextView
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:text="@string/list_descption_label"
            android:gravity="right"
        />
        <EditText  
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            android:clickable="true"
            android:singleLine="true"
            android:hint="@string/list_descption_label"
            android:id="@+id/list_description"
            android:inputType="textUri"
            />
        <TextView
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:text="@string/list_username_label"
            android:gravity="right"
        />
        <AutoCompleteTextView  
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            android:singleLine="true"
            android:hint="@string/list_username_label"
            android:id="@+id/list_username"
            android:imeOptions="actionNext"
            />
        <TextView
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:text="@string/list_password_label"
            android:gravity="right"
        />
        <EditText  
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            android:singleLine="true"
            android:hint="@string/list_password_label"
            android:id="@+id/list_password"
            android:inputType="textVisiblePassword"
            />
        <TextView
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:text="@string/list_email_label"
            android:gravity="left"
        />
        <AutoCompleteTextView  
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            android:singleLine="true"
            android:hint="@string/list_email_label"
            android:id="@+id/list_email"
            android:inputType="textEmailAddress"
            android:imeOptions="actionNext"
            />
        <TextView
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:text="@string/list_notes_label"
            android:gravity="right"
        />
        <EditText  
            android:layout_width="fill_parent" 
            android:layout_height="fill_parent"
            android:gravity="top|left"
            android:minLines="5" 
            android:hint="@string/list_notes_label"
            android:id="@+id/list_notes"
            android:inputType="textMultiLine"
            />

    </LinearLayout>

</ScrollView>
<com.google.ads.AdView
    android:id="@+id/adView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    ads:adSize="BANNER"
    ads:adUnitId="xxxxxxxxx"
    ads:loadAdOnCreate="true" >
</com.google.ads.AdView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:50:31.633

设置列表视图标题。使用您的创建 XML 布局

```
<com.google.ads.AdView
    android:id="@+id/adView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    ads:adSize="BANNER"
    ads:adUnitId="xxxxxxxxx"
    ads:loadAdOnCreate="true" >
</com.google.ads.AdView> 
```

将其充气并将其添加到 ListView。

```
inflater = (LayoutInflater) context.getSystemService(
                                         Context.LAYOUT_INFLATER_SERVICE);
View adView = inflater.inflate(R.layout.myAdView, null, false);
yourListView.addHeaderView(adView); 
```

对于您的第二个问题，请从 SDK 复制您正在使用的 android.R.... 布局并更改重力或自定义您的适配器。

# c++ - 使用 glTranslate 的 x 和 y 坐标

> ID：10225282
> 
> 赞同：-1
> 
> 时间：2012-04-19T09:32:25.647
> 
> 标签：c++, opengl, glut

我有一个在我的电脑上运行的 c++ 程序，它连接到我手机上的 Android 应用程序，同时在我的电脑上的 OpenGL 中打开一个图像。目前，openGL 中的图像使用键盘按钮进行翻译和放大。X 和 y 坐标从我的 android 设备流式传输到终端。

有没有办法获取这些原始 x 和 y 值并使用它们在 OpenGL 中转换我的图像？因此，用户从 Android 设备控制 PC 上的图像。我猜这些值需要以某种方式进行缩放和标准化？

如果它更清楚，我可以提供我的代码或部分代码。

```
using namespace std;
#define USE_TOMS_OGL

class device_info {
    public:
    char            *name;

    vrpn_Analog_Remote  *ana;

};
const unsigned MAX_DEVICES = 2;

float translateX = 0.0;
float translateY = 0.0;
float translateZ = 1.0;
float imgScale = 0.8;
float panX = 0.125; 
float panY = 0.125; 
float zoomFactor = 0.01; 

using namespace std;

struct Image {                   // stores image data
   unsigned long sizeX;
   unsigned long sizeY;
   char *data;
};

void display(void)
{

    // Translation and Scaling
    glTranslatef(translateX, translateY, translateZ);
    glScalef(imgScale, imgScale, 0.0);

    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, texture);

void keyboard(unsigned char key, int x, int y)
{
   switch (key) {
      case 27:
         exit(0);
         break;
      case 'x':
        imgScale += zoomFactor;
        glutPostRedisplay();
         break;
      case 'z':
            imgScale -= zoomFactor;
            glutPostRedisplay();
         break;
      case 'w':
         translateY += panY;
         glutPostRedisplay();
         break;
      case 's':
         translateY -= panY;
         glutPostRedisplay();
         break;
      case 'a':
         translateX -= panX;
         glutPostRedisplay();
         break;
      case 'd':
         translateX += panX;
         glutPostRedisplay();
         break;
      default:
         break;
   }
}

void IdleFunc(void) {
    if (accepted != 1)
    {

      unsigned i;

      // Let all the devices do their things
      for (i = 0; i < num_devices; i++) {

      device_list[i].ana->mainloop();
      //cerr << i;
      }

    //  printf("Idle function test ");

    } 
    glutPostRedisplay();
}

//Callback handlers

void    VRPN_CALLBACK handle_analog (void *userdata, const vrpn_ANALOGCB a)
{
    int i;
    const char *name = (const char *)userdata;

    printf("Input from %s:\n  \n        %5.0f", name, a.channel[0]);
    for (i = 1; i < a.num_channel; i++) {
    printf(" %5.0f \n", a.channel[1]);
    }

    printf(" \n");
}

 // main interactive loop

  printf("Press ^C to exit.\n");
  while ( ! done ) {
#ifdef USE_TOMS_OGL
      glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_RGB | GLUT_SINGLE);
    glutInitWindowSize(400,300);
    glutInitWindowPosition(200,100);
    glutCreateWindow("ImageViewer");

    init();
    glutDisplayFunc(display);

    glutKeyboardFunc(keyboard);
    glutIdleFunc(IdleFunc);
    glutMainLoop();
#else
      unsigned i;

      // Let all the devices do their things
      for (i = 0; i < num_devices; i++) {

      device_list[i].ana->mainloop();
      //cerr << i;
      }
      //cerr << endl;
#endif

  }
 return 0;
}  

// a.channel[0] =  x
// a.channel[1] =  y
// a.channel[2] =  Zoom 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:21:14.150

解决了。我已经添加了这个代码..

```
// Translate image on screen using data from device    

    yVal = a.channel[1];
    yVal = yVal/10000;
    translateY -= yVal;

    xVal = a.channel[0];

if (xVal >0 & xVal<250){

  xVal = xVal - 300;

}        

    xVal = xVal/15000;
    translateX += xVal; 
```

xVal 和 Yval 被划分为缩放到我使用的屏幕。

# iphone - 如何在 UIPicker 中动态填充值

> ID：10225283
> 
> 赞同：0
> 
> 时间：2012-04-19T09:32:27.870
> 
> 标签：iphone, objective-c, ios, ipad, uipickerview

好的，也许我错过了一些非常简单的东西，如果是这种情况，我深表歉意，但是，我已经用谷歌搜索了标题的所有排列，但没有找到！这是我的问题，我的要求是当我在 uipicker 组件中选择国家名称时，该国家的城市应该加载到第二个 UIPicker 组件中。所以我现在想做的是，我有 2 个并排的选择器视图，当用户在国家选择器中选择一行时，我想用适当的数据重新启动第二个选择器。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T09:40:45.313

用这个：

```
 [pickerView reloadAllComponents] 
```

要重新加载组件，并放置正确的组件：

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
  return [titles objectAtIndex:row];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:45:14.487

查看[UIPickerViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerViewDelegate_Protocol/Reference/UIPickerViewDelegate.html#//apple_ref/occ/intf/UIPickerViewDelegate)，有*pickerView:didSelectRow:inComponent:*在用户选择值时调用。

# java - 有没有办法快速查找数组中的所有位置是否“满”？

> ID：10225287
> 
> 赞同：2
> 
> 时间：2012-04-19T09:32:34.130
> 
> 标签：java, reversi

如果我有一个 64 长度的 java 数组 i[]，除了循环遍历整个数组之外，是否有一种快速的方法来确定该数组中的每个位置是否都是“满的”？我正在写一个黑白棋 AI，我需要知道整个数组是否已满。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T09:35:53.063

保留一个类型的标志变量`long`（64 位）并使用它通过设置或清除相关位来跟踪哪些数组条目是“满的”。（您需要将此与您的数组条目保持同步。）

如果您使用`1`每个位的值来表示相关单元格已满，您可以通过将标志变量与 进行比较来非常快速地判断整个数组是否已满`-1L`。

**示例实现**

```
int[] grid = new int[64];
long  full = 0L;

// place a piece at a certain grid position
grid[17] = 1;   // pretend 1 is the code for black
full |= 1L << 17;   // set bit 17 in our "full" tracker

// is the grid full?
if (full == -1L)
     // yes it is!
else
     // no it isn't 
```

* * *

您可以更加狡猾，也可以使用标志变量来跟踪每个单元格的颜色，这样您就可以完全避免使用数组。一个变量跟踪给定单元格是否被占用，另一个变量跟踪颜色（例如，0 表示白色，1 表示黑色）。

```
long colour = 0L;
long full   = 0L;

// set position 17 to white
colour &= ~(1L << 17);    // clear the bit (white)
full   |=  (1L << 17);    // set it to occupied

// set position 42 to black
colour |=  (1L << 42);    // set the bit (black)
full   |=  (1L << 42);    // set it to occupied

// is position 25 occupied?
if ((full & (1L<<25)) != 0) {
    // yes, but what colour?
    if ((colour & (1L<<25)) != 0)
        // black
    else
        // white
}

// is the grid full?
if (full == -1L)
     // yes it is!
else
     // no it isn't 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T09:35:12.397

您可以单独保留许多“空”单元格，并在每次移动后对其进行更新。

但是我认为不需要这种优化：长度为 64 的循环必须非常快。请尝试查看这是否是一个真正的瓶颈，以及优化是否值得您努力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T09:35:50.837

您可以将两个 BitSet 用于黑白（或自由和非白色）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T09:37:12.920

`Arrays.asList(i).contains(EMPTY)`（可能您正在解释`null`为空）。

# c# - Ninject 深度大于 1 的上下文/条件依赖注入？

> ID：10225288
> 
> 赞同：2
> 
> 时间：2012-04-19T09:32:41.277
> 
> 标签：c#, asp.net-mvc, dependency-injection, ninject, ninject-2

我有一个由 a和`IDataContext`实现的接口。这被我所有的存储库所使用，这些存储库被定义为并在其构造函数中获取数据上下文：`InMemoryDataContext``MyApplicationDataContext``BananaRepository : IBananaRepository`

```
interface IDataContext {}
class InMemoryDataContext : IDataContext {}
class MyApplicationDataContext : IDataContext {}

interface IBananaRepository {}
class BananaRepository : IBananaRepository 
{
    public BananaRepository(IDataContext dataContext) {}
} 
```

到目前为止，我使用的接口和服务是 ASP.NET MVC 控制器、同步命令和查询。NInject 在我的 Web 项目中配置，`IDataContext`并`MyApplicationDataContext`与`InRequestScope()`.

```
 kernel.Bind<IDataContext>().To<MyApplicationDataContext>().InRequestScope();
 kernel.Bind<IBananaRepository>().To<BananaRepository>(); 
```

我已经到了我想开始添加异步处理（命令、事件+处理程序等）的项目演变的地步。我面临的问题是，对于那些我需要获得一个瞬态`IDataContext`（每次都是新的）但绑定已经`IDataContext`为我的控制器的每个请求设置的实例。

考虑这个简单的场景，my`DoSomethingAsyncCommand`将在一个新线程上执行：

```
class DoSomethingAsyncCommand : IAsyncCommand<TArgs>
{
    public DoSomethingAsyncCommand(IBananaRepository repository) {}

    public bool Execute(TArgs args) {}
} 
```

我希望当 NInject 实例化（和我所有其他存储库）的类实现时，`IAsyncCommand`用`IBananaRepository`一个新实例初始化，`IDataContext`而不是重新使用 Web 请求的实例（实际上我希望`IAsyncCommand`我`IDataContext`被绑定为`InTransientScope()`）

我怎样才能做到这一点？

PS：我直接使用 CommonServiceLocator 而不是 Ninject 内核来实例化 IAsyncCommand 实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:40:48.847

看看[https://github.com/ninject/ninject/blob/master/src/Ninject/Planning/Bindings/BindingConfigurationBuilder.cs](https://github.com/ninject/ninject/blob/master/src/Ninject/Planning/Bindings/BindingConfigurationBuilder.cs)

在那里您可以找到 IsAnyAnchestorNamed。您可以使用相同的循环并将其与您在 WhenInjectedInto 中找到的条件结合起来，然后从[自定义 When](https://stackoverflow.com/questions/10207601/how-to-extend-ninject-binding-syntax/10228638#10228638)调用它。

# php - tcpdf 生成的 pdf 的 Imagick 错误 Imagick 的 pdf：“Postscript 委托失败 `/tmp/magick-KKLAvA”

> ID：10225290
> 
> 赞同：0
> 
> 时间：2012-04-19T09:32:52.113
> 
> 标签：php, imagemagick, tcpdf, imagick

我将 pdf 保存在服务器中（生成的 py TCPDF），我需要预览它们。我的预览代码适用于某些 pdf，但不适用于其他 pdf。

我的代码：

```
$filehandle = fopen( $urlPdf, "rb");
$img = new Imagick();
$img->readimagefile($filehandle); 
```

代码继续，但问题出现在上述行之后，因为当我将 die() 放在它们之后时，我遇到了同样的错误：

```
Postscript delegate failed `/tmp/magick-XXtHvIKA': No such file or directory 
```

这是我生成pdf的方式：

```
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);

// set document information
$pdf->SetCreator(PDF_CREATOR);
$pdf->SetAuthor('CSI');
$pdf->SetTitle('Pismo');
$pdf->SetSubject('Pismo');
$pdf->SetKeywords('CSI');
$pdf->setPrintHeader(false);
$pdf->setPrintFooter(false);
// set header and footer fonts
$pdf->setHeaderFont(Array(PDF_FONT_NAME_MAIN, '', PDF_FONT_SIZE_MAIN));
$pdf->setFooterFont(Array(PDF_FONT_NAME_DATA, '', PDF_FONT_SIZE_DATA));

// set default monospaced font
$pdf->SetDefaultMonospacedFont(PDF_FONT_MONOSPACED);

//set margins
$pdf->SetMargins(PDF_MARGIN_LEFT, PDF_MARGIN_TOP, PDF_MARGIN_RIGHT);
$pdf->SetFooterMargin(PDF_MARGIN_FOOTER);

//set auto page breaks
$pdf->SetAutoPageBreak(TRUE, PDF_MARGIN_BOTTOM);

//set image scale factor
$pdf->setImageScale(PDF_IMAGE_SCALE_RATIO);

//set some language-dependent strings
$pdf->setLanguageArray($l);

// ---------------------------------------------------------

// add a page
$pdf->AddPage();
$pdf->SetFont('dejavusans', '', 10);

// create some HTML content
if ($image->kind == 0){
$html ='<img src="../public/img/ci2.png"/ style="width: 620px"/><br>';
}
else {
    $html ='<img src="../public/img/kan.png"/ style="width: 620px"/><br>';
}
$pdf->writeHTML($html, true, 0, true, true);
$tbl = <<<EOD
<table cellspacing="0" cellpadding="1" border="0">
<tr>
    <td><img src="../barcodes/$image->id.png" style="width: 200px;position:absolute;left:550px;top:50px;"/></td>
    <td>$line</td>
</tr>
<tr>
<td></td>
<td  style="text-align:right;">Warszawa, $image->date</td>
</tr>
</table>
EOD;

$pdf->writeHTML($tbl, true, false, true, false, '');

$html = '<br>'.stripslashes($image->content);

// output the HTML content
$pdf->writeHTML($html, true, 0, true, true);

// reset pointer to the last page
$pdf->lastPage();

// ---------------------------------------------------------

//Close and output PDF document
$pdfPreviewUrl = Doctrine::getTable('Configurations')->find('pdfPreviewUrl');
$pdf->Output($pdfPreviewUrl->value.$image->id.'.pdf', 'F'); 
```

# html - 重新加载html页面而不刷新页面

> ID：10225291
> 
> 赞同：0
> 
> 时间：2012-04-19T09:32:52.243
> 
> 标签：html, ajax, reload, page-refresh

你好，

我有一个应用程序，其中每个服务器事件都由 Ajax 处理。我们的主要目标是，整个应用程序应该在不刷新页面的情况下工作。但是页面应该在内部刷新，这意味着客户端不应该感觉页面被刷新（方式, 标记的内容是使用 Ajax 更改的）。

所以问题是，页面应该重新加载但不刷新。我们可以用 Ajax 实现这一点吗？

或者

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:31:19.460

是的，这也可以用 Ajax 来完成，你能更具体地说明你想在表单上更新什么以及动态表单将被更改的条件吗？

# report - 将多个动态 AX 报表合并为一个

> ID：10225296
> 
> 赞同：0
> 
> 时间：2012-04-19T09:33:05.973
> 
> 标签：report, axapta, x++, microsoft-dynamics

我有以下问题：我想将 salesInvoice 报告合并到 1 个包含所有发票的报告中。

我正在使用打印带有 printJobSettings、Args 和 reportRun 类的报告的作业。我的参数是 ledgerJournal 编号，我想在一份报告中打印所有相关发票，而不是单独打印每张发票。

如何只生成一份报告？

基本上，我从 LedgerJournalTrans 表中获取 JournalNum，我在 CustInvoiceJour 表上循环以获取所有相关发票并执行报告，我认为我应该重写 fetch 方法来执行此操作，但是 salesInvoice 报告上的 fetch 方法很安静，我不想松散信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T07:18:14.240

你可以调用表的`printJournal`方法`CustInvoiceJour`。作为第二个参数，给它`RecordSortedList`你要打印的发票。

您还需要一个`SalesFormLetter`对象作为第一个参数，并填充相关的`printJobSettings`.

您很可能必须更改`fetch`方法，因为`element.reset()`调用将报告最终确定为打印作业。如果输出到 PDF 或邮件，这不好。

您很可能可以更改`element.reset`为：

```
element.newPage();
element.page(1); 
```

这将进行分页并重置页面计数器。一个警告：`pageTotal`方法不会被重置，因此“第 1 页，共 7 页”将不起作用。

# php - 可排序/可拖动的项目，例如 Drupal 7

> ID：10225297
> 
> 赞同：0
> 
> 时间：2012-04-19T09:33:08.420
> 
> 标签：php, javascript, jquery, drupal, drupal-7

我在哪里可以找到像他们在 Drupal 中使用的那样对项目进行拖动排序的脚本。
jQuery UI sortable 太简单了。
它也应该能够在表格上工作，而不是在列表中。
在 Drupal 分类法中，当您拖动父级 + 深入或返回多个级别时，也可以采用子级。

示例图片：

![在此处输入图像描述](../Images/189ada631973c6c9f35b9376667a8bae.png)

我认为不存在这样的东西，从 jQuery ui 开始进行排序有多难？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:54:10.127

Drupal 是一个开源项目。

您可以使用 drupal 本身的脚本，但在 Source 中很难找到它。[您可以在此处](http://drupalcode.org/project/drupal.git/tree/HEAD)找到 Drupal Git 存储库

几周前，我开发了一个带有 jQ​​uery ui 可排序/可拖动的小待办事项应用程序，并且不难适应它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:36:14.493

我发现了这个，它很接近，不适用于表格，但现在没关系： [http ://code.google.com/p/nestedsortables/](http://code.google.com/p/nestedsortables/)

# javascript - jQuery 字符串解析记录 404

> ID：10225298
> 
> 赞同：2
> 
> 时间：2012-04-19T09:33:15.943
> 
> 标签：javascript, jquery, html, dom, mustache

这是设置，我有一个小胡子模板存储为字符串，就像这样

```
<div id="one">
    <span>
        <img src="{{foo}}" />
    </span>
</div>
<div id="two">
    <span>
        <img src="{{bar}}" />
    </span>
</div> 
```

我已经将它插入页面，一切都很好

但是现在我需要获取该模板的一部分并将其重新插入页面，问题是 jQuery 不断记录 404 错误，因为它出于某种原因试图下载图像。（这里没有图像预加载器或插件）

```
var newTemplate = $(Template).find('#two').html(); 
```

我认为这只会对字符串进行操作，但它似乎将其解析为实际的 DOM 元素并尝试下载图像......这是来自 Chrome 的错误

```
GET http://localhost/src/%7B%7Bphoto%7D%7D 404 (Not Found) /src/js/libs/jquery.js:5952
   jQuery.fn.extend.html /src/js/libs/jquery.js:5952
   jQuery.extend.access /src/js/libs/jquery.js:855
   jQuery.fn.extend.html /src/js/libs/jquery.js:5928
   Backbone.View.extend.search /src/js/views/vote.js:39
   jQuery.event.dispatch /src/js/libs/jquery.js:3332
   jQuery.event.add.elemData.handle.eventHandle 
```

我也尝试了一些变化，比如

```
var foo = $('<div />').html(Template).find('#isotope').html(); 
```

和

```
var foo = $('<div />').detach().html(Template).find('#isotope').html(); 
```

真正让我烦恼的是，如果我将我想要的 html 写为纯字符串，这可以正常工作，但这违背了重点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:40:26.810

您应该为您的模板使用单独的字符串。一旦你将字符串传递给 jQuery `$()`，它们就会变成 DOM 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:43:34.893

```
var data = {foo:'/images/foo.jpg',bar:'/images/bar.jpg'};
var html = $.mustache(Template,data);
var two = html.find('#two'); 
```

请阅读[http://zudolab.net/blog/?p=221](http://zudolab.net/blog/?p=221)（日语）

# wordpress - 从 WordPress 管理员中删除 tools.php 页面

> ID：10225300
> 
> 赞同：3
> 
> 时间：2012-04-19T09:33:19.360
> 
> 标签：wordpress, admin

# 背景

WordPress 管理部分 (/wp-admin) 包含一个名为 tools 的菜单项（在用户和设置之间）。它有一个名为“Available Tools”的突出子项，这是一个包含名为“Press This”的功能的页面。

```
/wp-admin/tools.php 
```

# 我的问题

如何从工具部分中删除此页面？

# 我试过的

我尝试了一个删除菜单项的功能：

```
 add_action( 'admin_menu', 'my_remove_menu_pages' );
function my_remove_menu_pages() {
    remove_menu_page('press-this.php');
    //remove_menu_page('tools.php');
} 
```

如果我删除 tools.php，整个工具部分将被删除，而不仅仅是“可用工具”部分。

我还尝试从目录中删除 press-this.php。

这两种方法都无济于事。

我在网上的**任何地方都**找不到解决方案。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T11:59:48.307

这种方式使用 WP 功能：
测试和工作

```
add_action( 'admin_menu', 'remove_tools' );
function remove_tools() {
    remove_submenu_page('tools.php', 'tools.php');
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T09:59:42.263

您可以使用`admin_menu`hook 来修改`$submenu`global var ：

```
add_action('admin_menu','modify_menu');

function modify_menu()
{
  global $submenu;
  unset($submenu['tools.php'][5]);
} 
```

编辑：正如 janw 在他的回答中所说，您应该改用[remove_submenu_page](http://codex.wordpress.org/Function_Reference/remove_submenu_page)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-07T22:00:57.783

试试这个代码。如果用户没有可用的其他工具，它会隐藏整个工具菜单。

```
add_action('admin_init', 'remove_tools_admin_menu');
    function remove_tools_admin_menu() {
        global $submenu;
        unset($submenu['tools.php'][5]);
        if(count($submenu['tools.php']) == 0) {
            remove_menu_page('tools.php');
        }
} 
```

# android - 触屏移动图片

> ID：10225301
> 
> 赞同：1
> 
> 时间：2012-04-19T09:33:23.413
> 
> 标签：android, slide

我正在尝试在android中移动一张图片，但我真的没有找到一种方法来做到这一点。我已经使用了几种方法，但都没有真正奏效，这是我目前的代码

```
public class Tangram extends Activity implements OnTouchListener{
ImageView img;
int x=0,y=0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.tangram);

    img = (ImageView) findViewById(R.id.tangrampic1);
    img.setOnTouchListener(this);
    img.scrollBy(x, y);
}

 public boolean onTouch(View v, MotionEvent event) 
    { 
        switch (event.getAction())
        {
            case MotionEvent.ACTION_DOWN:
            {      
                  x++;
                     break; 
            }
            case MotionEvent.ACTION_UP:
            {             
                  x--;  
                 break;
            }
        }
        return true;
    } 
```

}

有人知道如何移动物体吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:44:03.127

我会这样做： - 实现你自己的视图 - 在这个视图的 ondraw 方法中绘制你的图像（从偏移量 0/0 开始） - onTouch 移动偏移量并使视图无效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:49:11.790

你试过这个 -

```
surf.setOnTouchListener( new SurfaceView.OnTouchListener(){
              public boolean onTouch(View v, MotionEvent event) {
                 case MotionEvent.ACTION_MOVE:
                    if( moving ){
                        final int x_new = (int)event.getX();
                        final int y_new = (int)event.getY();
                        mDrawTiles.draw( new DrawLogic(){
                            @Override
                            public void draw(Rect _surface) {
                                mTiles.setBounds(
                                    x_new - mDrawWidth/2,
                                    y_new - mDrawHeight/2,
                                    x_new + mDrawWidth/2,
                                    y_new + mDrawHeight/2);
                                }
                            });
                        } 
```

而且，也参考[这个](http://staticallytyped.wordpress.com/2010/12/02/touch-and-drag-in-android/)。

# asp.net - 使用 linq 在 dropdownlsit 中获取数据

> ID：10225305
> 
> 赞同：1
> 
> 时间：2012-04-19T09:33:44.967
> 
> 标签：asp.net, xml, linq, drop-down-menu, data-binding

我是 ASP.NET 的新手，

我正在制作国家，州下拉列表。

例如：对于特定国家，我将从 XML 文件中读取该国家的状态。

**我无法在我的下拉列表中获取所需国家/地区的状态...**

这是我的代码片段`XMLFile.xml`

```
 <?xml version="1.0" encoding="utf-8" ?>
<countrys>

  <country name="India">
    <state value1="Maharashtra"></state>
    <state value2="Kashmir"></state>
    <state value3="Goa"></state>
  </country>

  <country name="Sri Lanka">
    <state value1="Kanady"></state>
    <state value2="Colombo"></state>
    <state value3="Galle"></state>
  </country>

  <country name="Australia">
    <state valu1e="Sydney"></state>
    <state value2="Perth"></state>
    <state value3="Melbourne"></state>
  </country>

  <country name="South Africa">
    <state value1="Capetown"></state>
    <state value2="Johanusburg"></state>
      <state value3="Durban"></state>
  </country>

</countrys> 
```

和代码`Country.aspx.cs`

```
 public partial class Country : System.Web.UI.Page
   {
       protected void Page_Load(object sender, EventArgs e)
       {

            if (!IsPostBack)
            {
                LoadDropdown();
            }
     }

    protected void LoadDropdown()
    {
            DataSet ds = new DataSet();
            ds.ReadXml (Server.MapPath("XMLFile.xml"));

            DropDownListCountry.DataTextField = "country_text";

            DropDownListCountry.DataSource = ds;
            DropDownListCountry.DataBind();
            DropDownListCountry.Items.Insert(0,new ListItem(" Select ","0"));
        }
     }

    protected void DropDownListCountry_SelectedIndexChanged(object sender, EventArgs e)
    {
            string  st = (DropDownListCountry.SelectedIndex).ToString();

             XDocument main = XDocument.Load(@"XMLFile.xml");

        var query = from state in doc.Descendants("countrys").Elements("country")
                    where st == state.Value
                    select state.NextNode;

        DropDownListState.DataSource = query;
        DropDownListState.DataBind();     
    }
} 
```

**错误：** 对象引用未设置为对象的实例。

***提前致谢 ！！***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:42:36.807

好的，这里是解决方案：首先在 xml 中进行一些更改，状态元素中的属性“value1”应该是所有的值。所以新的 XML 是：

```
<?xml version="1.0" encoding="utf-8" ?>
<countrys>

  <country name="India">
    <state value="Maharashtra"></state>
    <state value="Kashmir"></state>
    <state value="Goa"></state>
  </country>

  <country name="Sri Lanka">
    <state value="Kanady"></state>
    <state value="Colombo"></state>
    <state value="Galle"></state>
  </country>

  <country name="Australia">
    <state value="Sydney"></state>
    <state value="Perth"></state>
    <state value="Melbourne"></state>
  </country>

  <country name="South Africa">
    <state value="Capetown"></state>
    <state value="Johanusburg"></state>
    <state value="Durban"></state>
  </country>

</countrys> 
```

现在来到 ASPX 页面：您应该有两个下拉列表，其中 AutoPostBack 设置为 true

```
<asp:DropDownList ID="DropDownListCountry" runat="server" AutoPostBack="true"
    onselectedindexchanged="DropDownListCountry_SelectedIndexChanged">
</asp:DropDownList>
<asp:DropDownList ID="DropDownListState" runat="server" AutoPostBack="true"
    onselectedindexchanged="DropDownListState_SelectedIndexChanged">
</asp:DropDownList> 
```

现在在后面的代码中：
**调用 LoadCountryDropDown 来填充 Country - 我在这里也使用 LINQ to XML 而不是数据集**

```
protected void Page_Load(object sender, EventArgs e)
        {

            if (!IsPostBack)
            {
                LoadCountryDropDown();
            }

        }
        void LoadCountryDropDown()
        {
            XDocument doc = XDocument.Load(Server.MapPath("test.xml"));

            DropDownListCountry.DataSource = from t in doc.Descendants("countrys").Elements("country")
                                             select new
                                             {
                                                 Name = t.Attribute("name").Value
                                             };

            DropDownListCountry.DataTextField = "Name";
            DropDownListCountry.DataValueField = "Name";
            DropDownListCountry.DataBind();
            DropDownListCountry.Items.Insert(0, new ListItem(" Select ", "0"));
        } 
```

**LoadStateDropDown() 方法来填充国家下拉列表的选定索引更改事件的状态下拉列表**

```
private void LoadStateDropDown(string p)
    {
        XDocument doc = XDocument.Load(Server.MapPath("test.xml"));

        var statequery = from t in doc.Descendants("countrys").Elements("country")
                                         where t.Attribute("name").Value.Equals(p)
                                         select new
                                         {
                                             State = t.Elements("state").Attributes("value").ToList()
                                         };

        DropDownListState.DataSource = statequery.First().State;
        DropDownListState.DataTextField = "value";
        DropDownListState.DataValueField = "value";
        DropDownListState.DataBind();
        DropDownListState.Items.Insert(0, new ListItem(" Select ", "0"));
    } 
```

**最后你有下拉列表的事件处理程序**

```
 protected void DropDownListCountry_SelectedIndexChanged(object sender, EventArgs e)
        {

            LoadStateDropDown(DropDownListCountry.SelectedValue);
        }
  protected void DropDownListState_SelectedIndexChanged(object sender, EventArgs e)
        {

        } 
```

（请将国家重命名为 xml 中的国家/地区）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:57:29.547

只有一种方法来填充下拉列表。代码将更容易理解和维护。如果没有选定的国家/地区（在第一页加载时），则将 null 作为参数传递。根据上面的 xml 文件，您似乎编写了错误的字符串来选择状态。selectedindex 出现错误。使用选定的值。希望这可以帮助：

```
 protected void Page_Load(object sender, EventArgs e)
       {

            if (!IsPostBack)
            {
                LoadDropdown(null);
            }
     }
     protected void LoadDropdown(string selectedCountry)
        {
                XDocument main = XDocument.Load(@"XMLFile.xml");
                if(selectedCountry != null)
                {
                        DropDownListCountry.DataSource = from state in main.Element("countries").Element(selectedConty).Elements("state")
                        where state.Value = selectedCountry
select state.Value;
                }
                else
                {
                        DropDownListCountry.DataSource = null;
                }
                DropDownListCountry.DataBind();
                DropDownListCountry.Items.Insert(0,new ListItem(" Select ","0"));
            }
         }

        protected void DropDownListCountry_SelectedIndexChanged(object sender, EventArgs e)
        {
                string  st = DropDownListCountry.SelectedValue;

                 LoadDropdown(st);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T10:21:29.193

```
 XDocument main = XDocument.Load(@"data.xml"); 
        var query = from state in main.Descendants("countrys").Elements("country")
                    where st == state.Value
                    select state.NextNode; 
```

# javascript - 在 jQuery 中的某个点之后从文本中生成变量

> ID：10225307
> 
> 赞同：1
> 
> 时间：2012-04-19T09:33:54.647
> 
> 标签：javascript, jquery

```
<div id="text">
 Lorem ipsum dolor sit amet consectetur adipisicing elit.
</div> 
```

如何使用 jQuery 从上面句子中“dolor”之后的所有内容中创建一个变量？

**编辑**

我希望变量的值为“sit amet consectetur adipisicing elit”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:43:07.970

```
function findPartOfString(el, text) {
    var t = $(el).text();
    console.log(t.substr(t.indexOf(text) + (text).length));
}

findPartOfString('div', 'dolor'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:40:18.713

```
var text = $('#text').text().match(/dolor/i); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T09:40:43.940

使用 JavaScript：

```
var text = $("#text").text();
text = text.substr(text.indexOf('dolor') + 5);
alert(text); 
```

# axapta - 最佳实践信息：所有职责都应成为流程周期的一部分

> ID：10225309
> 
> 赞同：1
> 
> 时间：2012-04-19T09:34:01.603
> 
> 标签：axapta, ax, dynamics-ax-2012

我在 MS Dynamics AX 2012 的许多环境中进行开发。

1.  我设置了一个 Privilege 并在其 EntryPoints 部分下添加了一些 MenuItems。
2.  然后我创建了一个新的职责，并在职责的权限部分下添加了权限。
3.  最后，我将职责添加到角色中。

在导出文件并将它们导入另一个环境后，AX 给了我这个最佳实践消息：“所有职责都应该是流程周期的一部分。”。

我问这个只是为了知道这是什么？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:25:06.303

这与 Ax2012 安全架构有关。简而言之，流程周期是包含更易于维护的职责的结构。引用[此 Ax2012 基于角色的安全资源](http://technet.microsoft.com/en-us/library/gg731787.aspx)：

> 为了帮助管理员找到必须分配给角色的职责，职责按其所属的业务流程进行组织。在安全模型的上下文中，业务流程被称为流程周期。例如，在会计流程周期中，您可能会发现维护分类账和维护银行交易职责。

使用这些[说明设置流程周期](http://technet.microsoft.com/en-us/library/hh556870.aspx)并删除该 BP 消息。

# struts2 - 异常消息

> ID：10225314
> 
> 赞同：0
> 
> 时间：2012-04-19T09:34:22.040
> 
> 标签：struts2

我想在引发异常时显示带有自定义消息的自定义页面。为此，我正在这样做。

动作类：

```
catch(OrbytTvException e) {
    result=NONE;
    Error err=new Error();
    err.setErrMsg("Exception Occured");
    log.info(err.getErrMsg());
    request.setAttribute("error", err);
} 
```

Struts.xml：

```
<result name="none">/WEB-INF/pages/error.jsp</result> 
```

错误----这是一个包含 errMsg 属性的 bean。

当此处引发异常时，我正在为该属性设置一个值。

错误.jsp：

```
<s:bean name="com.sits.itv.util.Error" var="errorBean" />
  <s:property value="#errorBean.errMsg"/> 
```

在这里，我正在显示 errMsg，但它显示为空。

你能帮我如何在struts2中显示自定义消息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:42:43.893

我相信在 UI 上显示异常，s2 提供了一种干净的方法来做到这一点，默认情况下，`ExceptionMappingInterceptor`将以下值添加到值堆栈：

1.  exception 异常对象本身
2.  exceptionStack 来自堆栈跟踪的值

这就是您在 JSP 页面中需要做的所有事情

```
<s:property value="%{exception.message}"/>
  <s:property value="%{exceptionStack}"/> 
```

详情参考官方文档

*   [异常配置](http://struts.apache.org/2.2.3/docs/exception-configuration.html)
*   [异常处理](http://struts.apache.org/2.3.1/docs/exception-handling.html)

另外你不需要做 `request.setAttribute("error", err);`，因为 S2 提供了一个干净的，所有你需要在你的动作类中声明一个属性及其 getter 和 setter，你可以自由地将它们冷藏在你的 JSP 中，因为该属性将作为 Value-stack 的一部分提供.

但我仍然认为这不应该是向用户显示信息的方式，它总是更好地使用框架提供了更灵活和易于使用的方式

# imagemagick - 使用 ImageMagick 创建固定大小的合成图像

> ID：10225318
> 
> 赞同：1
> 
> 时间：2012-04-19T09:34:30.977
> 
> 标签：imagemagick

我有两张图片。一个可以是任何大小和纵横比。另一个本质上是一个图案圆圈的 PNG 蒙版，我想将其覆盖在另一个图像上，调整另一个图像的大小以适应 PNG 覆盖的大小。

我有基本的工作：

```
composite -compose atop -geometry +0+0 -resize 75x73 lib/source/overlay.png #{temp_object.path} #{tempfile.path} 
```

但是，如果源图像的纵横比不适合叠加层，这将不起作用。ImageMagicks 生成的图像裁剪覆盖以适合源图像。

那么，我该如何调整它，以便调整源图像的大小等以适应叠加层，并且我的结果图像始终大小相同并包含完整的叠加层？

示例图像：

![在此处输入图像描述](../Images/579bef40b51c747178500a59e0746daf.png) ![在此处输入图像描述](../Images/fd21637823cf9093d2bfe650ab835393.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T15:53:50.363

这是做你想做的事情的一种方法？

```
convert input.jpg -thumbnail 200x200^ -gravity center -crop 200x200+0+0 mask.png -composite output.jpg 
```

另一种方法

```
composite input.jpg -thumbnail 200x200^ mask.png -gravity center -compose screen -matte output.jpg 
```

# timer - 使用 AMD EyeFinity 更改壁纸

> ID：10225322
> 
> 赞同：1
> 
> 时间：2012-04-19T09:34:43.393
> 
> 标签：timer, wallpaper

是否可以为每台显示器设置不同的壁纸？我想编写一个小工具，用于在一段时间后自动更改壁纸。我有三台显示器，我想使用尺寸为 5760x1080 的壁纸。该程序应自动识别实际的显示器配置，并以正确的顺序将所需的壁纸分成三张图像。我还希望可以在我的显示器星座上使用三种不同的壁纸。首选语言是 C#。谢谢你的帮助！

问候克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T11:39:42.320

是的，使用 DisplayFusion。.

# javascript - 是否可以结合 'on' 和 'click' jquery 功能？

> ID：10225324
> 
> 赞同：0
> 
> 时间：2012-04-19T09:34:48.560
> 
> 标签：javascript, jquery, function, click, live

基本上我有如下代码：

```
$('selector').on('click',function(){
    //Do something here
});
$('selector').click(function(){
    //Does exact same thing.    
}); 
```

有没有可能把这些结合起来？或者我会简单地创建一个从这两个绑定内部调用的函数？

抱歉，如果已回答此问题，我确实检查了建议的问题，但没有找到任何答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:36:42.147

`$('selector').click()`只是一个捷径`$('selector').on('click')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:37:31.970

```
$('selector').on('click',function(){ //Do something here }); 
```

和

```
$('selector').click(function(){ //Does exact same thing.}); 
```

第二个是第一个的简短格式。使用任何一种。建议第一个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T09:38:46.483

据我了解，从 jQuery 1.7 开始，`.click()`它只是`.on('click')`. 因此，如果需要，您可以`.on('click')`直接使用来保存函数调用。

请参阅 jQuery 源：[https ://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js](https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-19T09:38:53.067

您可以只创建一个函数，并从两个回调中调用它：

```
function doSomething()
{
   alert("something");
}

$('selector').on('click',function(){
    // Do some stuff...

    // Do what should be done by both functions
    doSomething();
});
$('otherselector').click(function(){
    // Do some other stuff...

    // Do what should be done by both functions
    doSomething();   
}); 
```

**根据评论编辑**

如果两个回调应该做完全相同的事情，你可以将函数作为回调传递：

```
function doSomething()
{
   alert("something");
}

$('selector').on('click',doSomething);
$('otherselector').click(doSomething); 
```

但在这种情况下，你也可以这样做：

```
$("selector, otherselector").click(function()
{
   alert("something");
}); 
```

# ios - 在 Objective C 中从 NSMutableArray 转换为 JSON

> ID：10225325
> 
> 赞同：1
> 
> 时间：2012-04-19T09:34:55.603
> 
> 标签：ios, objective-c, json, nsmutablearray

我有一个`NSMutableArray`带有对象的对象，我想将其转换为 JSON 以发送`NSString`带有它的 Web 服务信息。

我有 SBJSON 和 JSONKit 框架，但我做不到。我这样做：

```
 NSString *JSONData=[mutablearray JSONRepresentation];

 NSString *JSONData=[mutablearray JSONString]; 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T10:17:10.787

您可以使用以下代码：

```
NSArray *keys = [NSArray arrayWithObjects:@"key",nil];
NSArray *objects = [NSArray arrayWithObjects:object,nil];
NSDictionary *jsonDictionary = [NSDictionary dictionaryWithObjects:objects forKeys:keys];
NSString* jsonString = [jsonDictionary JSONRepresentation];
NSData *jsonData = [jsonString dataUsingEncoding:NSUTF8StringEncoding]; 
```

您现在可以将 jsonData 发送到服务器。希望对您有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:52:57.320

如果您愿意尝试另一个 JSON-Library，您应该尝试 Touch-Json：[https ://github.com/TouchCode/TouchJSON](https://github.com/TouchCode/TouchJSON)

然后使用以下代码序列化您的数组：

```
 NSData *data = [[[CJSONSerializer serializer] serializeArray:array error:nil]; 
```

# windows-phone-7 - DeviceNetworkInformation.CellularMobileOperator 返回一个电话号码

> ID：10225333
> 
> 赞同：0
> 
> 时间：2012-04-19T09:35:22.710
> 
> 标签：windows-phone-7, mobile, carrier

我在我的应用程序中使用 DeviceNetworkInformation.CellularMobileOperator() 从手机获取运营商信息，如[msdn](http://msdn.microsoft.com/en-us/library/microsoft.phone.net.networkinformation.devicenetworkinformation.cellularmobileoperator%28v=vs.92%29.aspx)中所述。

有用户向我反映，他返回的信息是一个电话号码。

我想知道其他人是否有这个错误？这似乎是 Windows Phone SDK 中的一个严重缺陷。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:31:20.650

此功能仅依赖于运营商提供的信息。我在美国的几部手机上使用了它，并且在所有情况下我都得到了运营商名称（例如 AT&T）。显然，一些运营商将其标识符设置为用户电话号码。这**不是 SDK 缺陷**，而是运营商误判。

# android - 安卓应用订阅

> ID：10225342
> 
> 赞同：1
> 
> 时间：2012-04-19T09:35:55.033
> 
> 标签：android

我需要创建将使用月/年订阅的应用程序。（为应用程序按月/年付费）是否有经验或创建了类似的东西？什么是最好的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:48:27.040

Android Market 目前还没有自动续订功能，因此您必须自己检查。订阅模型可以有架构。

1.  仅基于您的设备- 当您不必与外界交互（使用互联网）时，此方法适用，例如可以是游戏和其他常见应用程序在这里订阅必须在设备本身上检查。在这里您可以在设备上查看订阅日期作为共享偏好或在数据库中。并在您的应用启动时检查它

2.  当您的应用程序定期与您的服务器交互时。例如可以是报纸应用程序。在这里，您可以通过识别唯一的用户/设备来维护设备订阅状态。并在用户连接到您的服务器时检查订阅状态。

更新 ：

自动更新和续订功能已添加到应用内结算检查[这里](http://developer.android.com/guide/market/billing/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:43:14.773

几天后，引入了“订阅”。文档：http: [//developer.android.com/guide/market/billing/billing_subscriptions.html](http://developer.android.com/guide/market/billing/billing_subscriptions.html)

# php - 电子邮件不根据变量名称发送

> ID：10225343
> 
> 赞同：0
> 
> 时间：2012-04-19T09:35:58.137
> 
> 标签：php

我的电子邮件只有在我输入实际地址而不是使用 $usr_email 时才会发送，尽管它会显示“消息已发送”。电子邮件地址来自用户表中的 user_email 字段。这是用 $id = intval($_SESSION['user_id']); 定义的

```
if (isset($_POST['doSend'])) {

function getTwo($query){
    $res = mysql_query($query);
    if (!$res) {
        trigger_error("db: ".mysql_error()." in ".$query);
        return FALSE;
    }
    if ($row = mysql_fetch_row($res)) {
        return $row[0];
    }
}

$getuserinfo_q = "SELECT user_email AND user_name FROM users WHERE 
id='$_SESSION[user_id]'";

$getuserinfo_e=mysql_query($getuserinfo_q);

if(mysql_num_rows($getuserinfo_e) < 1){

    echo "User details not found - User_id is not in DB";

    exit();

}

$user_info_val=mysql_fetch_assoc($getuserinfo_e);

if(empty($user_info_val['user_email'])){

    echo "there is no such column name as 'user_email'"; //tell the user about column

    exit(); //shut off the script

}

$usr_email=$user_info_val['user_email'];
  $user_name=$user_info_val['user_name'];

$sqltest = "SELECT completed_status From users where id =
'$_SESSION[user_id]'";
$isSending = getTwo($sqltest);
$isSending === false;
if($isSending >= 6){
    require_once "Mail.php";
    require_once "Mail.php";

    $from = "<xxx>";
    $to = "$usr_email";
    $subject = "hi";
$body ="Chi ";

$host = "ssl://smtp.gmail.com";
$port = "465";
    $username = "xxx";
    $password = "xxxx";

 $headers = array ('From' => $from,
'To' => $to,
'Subject' => $subject);
$smtp = Mail::factory('smtp',
array ('host' => $host,
    'port' => $port,
    'auth' => true,
    'username' => $username,
    'password' => $password));

$mail = $smtp->send($to, $headers, $body);

    if (PEAR::isError($mail)) {
        echo("<p>" . $mail->getMessage() . "</p>");
    } else {
        echo("<p>Message successfully sent!</p>");
    }
}
else
    header ("Location: error.php");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:07:12.670

大编辑：

好的，所以希望这有效-_-

```
$getuserinfo_q = "SELECT user_email AND user_name FROM users WHERE id ='
".intval($_SESSION['user_id'])."'";

$getuserinfo_e=mysql_query($getuserinfo_q);

if(mysql_numb_rows($getuserinfo_e) < 1){

echo "User details not found - User_id is not in DB";

exit();

}

$user_info_val=mysql_fetch_assoc($getuserinfo_e);

if(empty($user_info_val['user_email'])){

echo "there is no such column name as 'user_email'"; //tell the user about column

exit(); //shut off the script

}

$usr_email=$user_info_val['user_email'];

$sqltest = "SELECT completed_status FROM users WHERE id ='
".intval($_SESSION['user_id'])."'";
$isSending = getTwo($sqltest);
$isSending === false;
if($isSending >= 6){
    require_once "Mail.php";

// Start NEW CLASS (for your weird Mail function)

$m_class=new Mail;

    $from = "<xxx>";
    $to = "$usr_email";
    $subject = "hi";
$body ="Chi ";

$host = "ssl://smtp.gmail.com";
$port = "465";
    $username = "xxx";
    $password = "xxxx";

 $headers = array ('From' => $from,
'To' => $to,
'Subject' => $subject);

$smtp = $m_class->factory('smtp',
array ('host' => $host,
    'port' => $port,
    'auth' => true,
    'username' => $username,
    'password' => $password));

$mail = $m_class->send($to, $headers, $body);

}
else
    header ("Location: error.php"); 
```

您可能已经注意到，我删除了错误检查（`PEER::isError()`事物）只是因为我无法理解应该如何调用该函数（不是静态的）。但是，除此之外，上面的代码应该可以解决问题（希望如此）。

试一试，让我知道它是如何工作的。

# c# - 是否可以在一次操作中执行多个存储过程？

> ID：10225350
> 
> 赞同：10
> 
> 时间：2012-04-19T09:36:23.770
> 
> 标签：c#, .net, stored-procedures, ado.net

我正在编码以读取 xml 文件以更新数据库。我得到大约 500 个 xml 文件，我想尽快处理它们。

所有数据库操作都是使用存储过程完成的。

每个 xml 文件都调用了大约 35 个不同的存储过程。

最初我写了这样的代码

```
var cmd = new SqlCommand("EXEC UpdateTeamStats("+teamId+","+points+")");
cmd.CommandType = CommandType.Text; 
```

但经过一些最佳实践后，我将其更改为

```
var cmd = new SqlCommand("UpdateTeamStats");
cmd.CommandType = CommandType.StoredProcedure;
cmd.Parameters.Add("teamId", 21);
cmd.Parameters.Add("points", 2); 
```

由于从程序中调用了大量的存储过程，我意识到我必须减少调用次数才能进行优化。

所以我想把这35个存储过程全部收集起来，一口气执行。

存储过程因参数不同而不同，在我上面所做的参数更改后，我不知道如何将它们一起收集和执行。

我正在考虑调用一个巨大的存储过程，并在该存储过程中调用另一个 35 ，但我不太擅长 SQL，这会导致不必要的复杂性。

是否可以完全在 C# 中执行此操作？

或者是否有其他更好的方法来排队存储过程并快速运行它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:39:13.687

imo 最好的解决方案是编写一个存储过程，其中传入一个表值参数，其中包含每个 xml 文件的所有参数的列表。然后在这个存储过程中，为表值参数中的每条记录调用所有其他存储过程。

如果这不行，那么您可以使用文本类型的 SqlCommand 而不是存储过程，并在执行时构建命令并执行它。您可以像现在一样使用参数，也可以只编写动态 sql。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T13:25:14.377

请从以下位置下载 Microsoft 应用程序数据块

[http://www.microsoft.com/download/en/details.aspx?id=435](http://www.microsoft.com/download/en/details.aspx?id=435)

很好，但是我该如何使用它呢？

这个包装类的使用非常简单。

```
DAC DC = new DAC();
DC.StoredProcedure = "nProc_InsertOrder";
DC.Params.Add("@OrderId", SqlDbType.VarChar, "Order1" );
DC.Params.Add("@CustomerName", SqlDbType.VarChar, "test");
DAC.Commands.Add(DC);

DC = new DAC();
DC.StoredProcedure = "nProc_InsertOrderLineItems";
DC.Params.Add("@OrderId", SqlDbType.VarChar, "Order1" );
DC.Params.Add("@OrderLineId", SqlDbType.VarChar, "A1");
DAC.Commands.Add(DC);

DC = new DAC();
DC.StoredProcedure = "nProc_InsertOrderLineItems";
DC.Params.Add("@OrderId", SqlDbType.VarChar, "Order1" );
DC.Params.Add("@OrderLineId", SqlDbType.VarChar, "A2");
DAC.Commands.Add(DC);

DC = new DAC();
DC.StoredProcedure = "nProc_CreateBill";
DC.Params.Add("@BillDate", SqlDbType.DateTime, DateTime.Now);
DC.Params.Add("@BillId", SqlDbType.VarChar, "Bill1");
DAC.Commands.Add(DC);
DAC.ExecuteBatch(); 
```

如果订单插入失败，则不应创建账单。同样，如果订单项失败，则不应创建订单。我们通过 ADO.Net 只需几行代码即可实现这一目标。

在此示例中，直到我们调用 ExecuteBatch，我们实际上并没有插入记录，而是准备对象以进行批量更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T10:08:45.813

您可以`CommandQueue`通过[命令模式](http://en.wikipedia.org/wiki/Command_pattern)创建一个 , 并在命令上创建一个委托，该委托映射到您对存储过程的调用的任何要求；从外观上看，类似于：

```
public class CommandQueue
{
    private Connection _connexion = new Connection(); // Set this up somehow.

    // Other methods to handle the concurrency/ calling/ transaction etc.

    public Func<string, Dictionary<string, int>, bool> CallStoredProcedure = (procedureName, parameterValueMap) =>
    {
      cmd.Connection = GetConnexion();
      var cmd = new SqlCommand(procedureName);
      cmd.CommandType = CommandType.StoredProcedure;

      foreach (var parameterValueMapping in parameterValueMap)
      {
        cmd.Parameters.Add(parameterValueMapping.Key, parameterValueMapping.Value);
      }

      var success = cmd.ExecuteNonQuery();

      return success;
    }

    private Connection GetConnexion()
    {
      return _connexion;
    }
} 
```

然后，设置`CommandQueue`, 以便您拥有一个线程池，您可以从中调用新线程上的委托，以便它们并行运行。

实际上，查看[SQLCommand](http://msdn.microsoft.com/en-us/library/z4956bkc.aspx)类，您可以对其进行异步调用。`Cancel()`因此，您应该能够异步调用每个存储过程，在每个完成时设置一个委托并将其全部包装在事务中，以便您可以在需要时通过调用每个命令来回滚它们。我可能仍会使用 a`CommandQueue`来将其抽象出来，因为我建议您稍后可能会更改它！

我想我仍然会用 a 上的委托封装存储过程调用`CommandQueue`，这样可以抽象出存储过程的细节，并使其他人更容易理解这个过程，也更容易维护。如果您添加新的存储过程，或更改名称或其他内容，它会容易得多。您可以设置一个包含所有委托的静态列表，或者一个包含必要存储过程详细信息的静态列表，并使用委托仅传递参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-05T13:46:30.243

**就我个人而言，根据我使用ADO.NET**的经验，我认为无论使用**单个**. **`SqlConnection`**

 **这具有利用 .NET 惊人的[连接池](https://docs.microsoft.com/en-us/dotnet/framework/data/adonet/sql-server-connection-pooling)的好处，使您能够单独工作/自定义/与每个命令交互并使用共享连接（将连接代理的数量减少到微不足道的数量）。

我还想强调`using`这里的条款的重要性，这些条款有助于正确处理各种资源。

例如：

```
using (var conn = new SqlConnection("connection string"))
{
    using (var cmd = new SqlCommand())
    {
        cmd.Connection = conn;
        cmd.CommandType = CommandType.StoredProcedure;

        //ready to query 
        conn.Open();

        cmd.CommandText = "UpdateTeamStats";
        var teamIdParam = new SqlParameter("teamId", 21);
        var pointsParam = new SqlParameter("points", 2);

        cmd.Parameters.Add(teamIdParam);
        cmd.Parameters.Add(pointsParam);

        cmd.ExecuteNonQuery(); //OR if you're async cmd.ExecuteNonQueryAsync();

        //the rest of your executions

        conn.Close();
    }
} 
```

如果我很热心，您可以使用一个库，例如我的[DbConnect](https://github.com/pimbrouwers/DbConnect)，它将上述内容简化为：

```
using (var db = new DbConnect("connection string"))
{
    db.SetSqlCommand("UpdateTeamStats");
    db.AddParameter("teamId", 21);
    db.AddParameter("points", 2);

    db.ExecuteNonQuery().Wait(); //OR if youre async await db.ExecuteNonQuery();

    db.ClearParameters();
    db.SetSqlCommand("some other proc");

    //rest of executions
} 
```**

# jquery - MVC 同时返回 json 和 html 响应

> ID：10225354
> 
> 赞同：2
> 
> 时间：2012-04-19T09:36:32.117
> 
> 标签：jquery, ajax, asp.net-mvc, json

嗨，我还没有为我的问题找到足够的答案。我需要从 ajax 调用的操作结果中返回 json 数据和 html。

```
$if (Request.IsAjaxRequest())
        {
            return Json(new
                            {
                                val1= Model.val1,
                                val2 = Model.val2,
                                val3= Model.val3,
                                Html = PartialView("_SearchResult", Model)
                            });
        } 
```

在ajax成功部分我需要做什么？这是不好的尝试：

```
$.ajax({
        type: "post",
        dataType: "json",
        url: actionUrl,
        data: {
            specs: selections,
            params: parameters
        },
        success: function (response) {
            $("#maincontent").html( response.html);
            val1= response.val1;
            val2= response.val2;
            val3= response.val3;
        },
        error: function (xHR) {
            alert(xHR.status);
        }
    }); 
```

Val1,2,3 是我需要知道的变量，因为模型数据正在改变，我需要知道这个改变的值。如果您知道如何返回比 json 更好的解决方案，请告诉我。但我还需要返回响应 html 以更新部分页面。感谢你们对我的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:54:08.910

`PartialView`如您所愿，返回一个`ActionResult`而不是部分视图的 HTML 作为字符串。您需要做的是执行 ActionResult 以获取它将呈现的 HTML。

有几种方法可以做到这一点，但[一种快速而肮脏的方法是遵循本文](http://craftycodeblog.com/2010/05/15/asp-net-mvc-render-partial-view-to-string/)。

至于做你正在做的事情的更好方法，这取决于 val1-3 是什么。它们是 DOM 元素、局部变量还是全局变量？您可以让您的 PartialView 发出调用某些函数来设置 val1-3 值的 javascript。就像是：

```
public ActionResult Search()
{
    // ... 
    return PartialView("_SearchResult", Model);
} 
```

_SearchResult 部分视图：

```
<!-- your html here -->
<script type="text/javascript">
   UpdateVals(@Model.val1, @Model.val2, @Model.val3);
</script> 
```

`UpdateVals`页面中进行 AJAX 调用的函数在哪里。

# javascript - 旧浏览器中的有效元素定位

> ID：10225355
> 
> 赞同：0
> 
> 时间：2012-04-19T09:36:38.170
> 
> 标签：javascript, css, performance, internet-explorer-8, internet-explorer-7

我目前正在为必须与 IE7 以上兼容的客户端构建一个相当雄心勃勃的交互式墙。

它基本上是一个使用 Raphael.js 绘制的大型、可拖动的六边形网格。网格的大小取决于屏幕大小，但在大多数情况下不会超过 ~2500 个 SVG 元素。

在包括 IE9 在内的现代浏览器中拖动包含 DIV 时，它像黄油一样光滑。在 IE7 和 IE8 中，情况并非如此！

必须支持旧浏览器意味着不支持 CSS3，因此不支持 CSS 转换。结果，我不得不更新 CSS left 和 top 属性来定位元素。

在这些旧浏览器中移动大元素是否有更有效的方法？我注意到缓慢拖动非常流畅，而快速拖动会杀死东西。我尝试限制每秒处理拖动事件的次数，但这并没有太大的影响。

我的主要选项是禁用 IE7/8 中的拖动或减小主要元素的大小。这些都不是理想的，但到目前为止，这些是我唯一的选择。

我认为这是一个长镜头，但任何建议都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:50:29.850

如何限制执行？这实际上意味着 div 仅在您停止移动鼠标并且不与鼠标光标一起移动时才定位...

所以做类似的事情

```
var timeout;
$("#element").mouseover(function() {
  if ([ie_lte_9]) {
    clearTimeout(timeout);
    timeout = setTimeout(doDrag, 10);
  } else {
    doDrag();
  }
}); 
```

源 mouseover 可能是代码中的另一种事件类型，并且 doDrag 被称为不同的方式...“[ie_lte_9]”只是意味着您需要检测 Internet Explorer < 9

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:08:08.547

在这里回答我自己的问题，我想如果其他人有类似的问题，他们可能会偶然发现这个问题，这会有所帮助......

在我的拖动功能（movemove 事件）中，我未能包含 stopPropagation 或 preventDefault() 调用。添加了这些，性能显着提高！

# postgresql - 用于循环平均的自定义 PostgreSQL 聚合

> ID：10225357
> 
> 赞同：2
> 
> 时间：2012-04-19T09:36:39.740
> 
> 标签：postgresql, types, aggregate-functions

我正在尝试在 Postgres 中实现一个自定义聚合函数，该函数将以度为单位平均方向 - 即我希望能够做到：

```
SELECT circavg(direction) FROM sometable; 
```

这可以使用以下公式来完成：

```
xbar = atan2(sum(sin(xi), sum(cos(xi))) 
```

我想我需要定义`sfunc`一个方向，并将其正弦和余弦添加到两个累加器中。最后一个函数然后使用 atan2 将这两个分量转换回一个方向。

我不知道如何定义，`sfunc`以便当前状态由*两个*组件组成，例如`(float, float)`. 该文档在具体示例上有点短，因此感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T10:29:56.120

您可以在内部使用**ARRAY**类型。参数类型仍然可以是任何数字类型。`float`用(= )演示`double precision`：

```
CREATE OR REPLACE FUNCTION f_circavg (float[], float)
  RETURNS float[] LANGUAGE sql STRICT AS
'SELECT ARRAY[$1[1] + sin($2), $1[2] + cos($2), 1]';

CREATE OR REPLACE FUNCTION f_circavg_final (float[])
  RETURNS float  LANGUAGE sql AS
'SELECT CASE WHEN $1[3] > 0 THEN atan2($1[1], $1[2]) END';

CREATE AGGREGATE circavg (float) (
   sfunc     = f_circavg
 , stype     = float[]
 , finalfunc = f_circavg_final
 , initcond  = '{0,0,0}'
);
```

转换函数`f_circavg()`已定义`STRICT`，因此它会忽略`NULL`输入行。它还设置第三个数组元素以标识具有一个或多个输入行的集合 - 否则`CASE`最终函数返回`NULL`。

测试临时表：

```
CREATE TEMP TABLE t (x float);
INSERT INTO t VALUES (2), (NULL), (3), (4), (5); 
```

我输入了一个`NULL`值来测试`STRICT`魔法。称呼：

```
SELECT circavg(x) FROM t;

       circavg
-------------------
 -2.78318530717959 
```

交叉检查：

```
SELECT atan2(sum(sin(x)), sum(cos(x))) FROM t;

       atan2
-------------------
 -2.78318530717959 
```

返回相同。似乎工作。在使用更大表的测试中，使用常规聚合函数的最后一个表达式比自定义聚合快 4 倍。

测试零输入行/仅 NULL 输入：

```
SELECT circavg(x) FROM t WHERE false;     -- no input rows
SELECT circavg(x) FROM t WHERE x IS NULL; -- only NULL input 
```

`NULL`在两种情况下都返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:02:36.737

PostgreSQL 为您提供了一组[几何类型](http://www.postgresql.org/docs/current/interactive/datatype-geometric.html#AEN6432)，`POINT`是最基本的。
将此类型用作函数的输入参数。

如果您愿意，可以创建[自定义类型](http://www.postgresql.org/docs/current/interactive/sql-createtype.html)作为替代。

# android - 完成可运行并开始新的活动

> ID：10225359
> 
> 赞同：1
> 
> 时间：2012-04-19T09:36:47.327
> 
> 标签：android

我有一个应用程序，该应用程序以具有另一个类的实例的类开头。第二个类使用 Runnable 向用户表示欢迎。我想完成 Runnable 并开始一个新的活动，将用户导航到菜单类，用户可以选择不同的选项。Runnable 使用画布在屏幕上绘制欢迎消息。有谁知道如何完成可运行并启动菜单活动并将视图设置为布局中已经存在的 Menu.xml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:41:31.833

启动一个包含显示**欢迎用户**的内容的活动.. 类似这样的内容..

```
Class Welcome extends Activity {

public void onCreate(){
//set content to welcome..

new Handler().postDelayed(new Runnable(){

public void run(){
//start new ACtivity...
}

}, interval); //interval you want for showing welcome..
}
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-19T09:40:22.030

您应该考虑使用异步任务。在 android 中使用 runnables 是不好的做法。

您可以使用异步任务方法 doInBackground 进行一些计算，然后将调用 onPostExecute ，这样您就可以去那里进行下一个活动。

# java - 在 libgdx 中渲染时出现 OutOfMemoryError

> ID：10225361
> 
> 赞同：0
> 
> 时间：2012-04-19T09:37:08.697
> 
> 标签：java

我必须在 render() 中使用 libgdx 来渲染网格数组。我使用了处理程序，因为每次我在 meshArr 数组的 getMeshToRender() 方法中获取新数据时。

```
 onCreate()
        {
          handler.removeCallbacks(sendUpdatesToUI);  
          handler.postDelayed(sendUpdatesToUI, 1000); // 1 second
        }

        Runnable sendUpdatesToUI = new Runnable() 
     {
            public void run() 
            {
                //DisplayLoggingInfo();   
                getMeshToRender();
                handler.postDelayed(this, 1000); // 1 seconds
            }
        };          

   getMeshToRender()

 {

   .......
    meshArr = new Mesh[numMesh];
   .......
 } 
```

在 Render() 方法中，它最初会加载该 meshArr，但随后会因 OutOfMemoryError 而崩溃。

任何解决方案都将是可观的。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:10:58.787

简单且唯一真实的答案是使用更少的内存。

要么你只是使用了太多不同的网格，你应该重新考虑你的整个想法，或者你正在替换它们并且没有正确处理旧的。

如果要释放未使用的网格，则应使用`Mesh#dispose()`

# java - 通过客户端/服务器发送按键

> ID：10225363
> 
> 赞同：0
> 
> 时间：2012-04-19T09:37:10.337
> 
> 标签：java, android, udp, client-server, key-events

我正在创建一个 Android 游戏并且遇到了一个问题。这是一个简单的乒乓球风格游戏，球棒向左或向右移动以阻挡球。但是我试图通过 UDP 连接来控制蝙蝠。我在我的 Android 代码上设置了我的服务器，然后为客户端设置了一个单独的 Java 类。目前我只能将字符串或长字符串从客户端发送到服务器。我想要实现的是，在客户端等待输入时，如果我按下左箭头或右箭头，它将获取此数据，将其转换为字节，然后将其发送到服务器。然后服务器应该接收数据作为按键，以便游戏的蝙蝠图像将朝着适当的方向移动。如果有人知道如何做到这一点，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:42:19.527

我最近自己创建了一个游戏，我还需要做一些客户端-服务器同步。我遇到了也适用于 Android 的 KryoNet 库。

[http://code.google.com/p/kryonet/](http://code.google.com/p/kryonet/)

它可能值得研究，因为它并不难掌握

祝你游戏好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:00:23.237

您必须制作自己的“服务器代码”。我的意思是你应该向服务器发送某些关键词，让它知道应该采取特定的行动。在 Sun 关于创建套接字的教程中，您可以看到在向服务器发送关键字之前连接不会关闭。你可以这样做。

[服务器和客户端示例，告诉服务器何时应该关闭](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)

# css - 在其他元素之前选择特定元素

> ID：10225364
> 
> 赞同：34
> 
> 时间：2012-04-19T09:37:11.553
> 
> 标签：css

我有以下 HTML 结构：

```
<div>
  <h2>Candy jelly-o jelly beans gummies lollipop</h2>
  <p>
    Cupcake ipsum dolor sit amet. Sugar plum liquorice dragée oat cake cupcake.
  </p>
  <p>
    Candy tiramisu bonbon toffee. Croissant pudding ice cream soufflé pastry toffee  chocolate bar. Tiramisu wypas tootsie roll icing fruitcake oat cake icing soufflé tiramisu. 
  </p>
  <h2>Dessert pie cake</h2>
  <ul>
    <li>liquorice</li>
    <li>powder</li>
    <li>dessert</li>
  </ul>
  <h2>Chupa chups sweet dragée</h2>
  <p>
    Chocolate cake biscuit pie jelly-o chocolate bar. Marshmallow topping sugar plum apple pie brownie cotton candy dragée lemon drops. Soufflé cake toffee.
  </p>
</div> 
```

我只想选择`h2`直接在之前的那个`ul`。我怎样才能做到这一点？在我的内容中有越来越多的内容，`uls`所以`h2s`解决方案应该是通用的。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-19T09:42:38.153

据我所知，CSS 不提供任何在[选择器](http://www.w3.org/TR/selectors/)**之前**定位的选择器。您可以选择它作为`h2`直接在`p`( `p + h2`) 之后的吗？

```
h2 {
    color: #1a1a1a;
}

p + h2 {
    color: #0cc;
} 
```

[JSFiddle 上的示例](http://jsfiddle.net/jZEYJ/)

如您所见，如果您依赖 CSS，这可能是您可以使用的最佳选择器，尽管您可以轻松地为`h2`每个`ul`. 这将避免您在另一个段落部分之前有一个段落部分的情况`h2`。

你可以使用 jQuery 做到这一点：

```
.highlight {
    color: #0cc;
}

$('ul').prev('h2').addClass('highlight') 
```

[JSFiddle 上的示例](http://jsfiddle.net/w2DDA/)

这会选择 every `ul`，然后选择`h2`它之前的那个，最后将`.highlight`类添加到它之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:43:05.000

有了这个，你可以只设计第一个 h2 元素

```
h2:first-child { color:red; } 
```

浏览器支持在这里阅读： [http ://www.quirksmode.org/css/contents.html#t17](http://www.quirksmode.org/css/contents.html#t17)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-28T07:01:18.717

规则 h2~ul 不会选择 h2 而是选择 ul。因此，您将无法对 h2 应用任何样式。

[CSS元素1~元素2](https://www.w3schools.com/cssref/sel_gen_sibling.asp)

我对面板位置有同样的问题。我有一个元素，后面跟着一个 . 在这种情况下，我想通过样式应用程序降低主面板的高度或最小高度（取决于面板是否固定）。

在固定页脚的情况下，因为我可以在我的 html 文件中的 main 之前声明元素（它将由 top/left 属性重新定位）我可以像这样使用 ~ 选择器：footer ~ main。但是在非固定页脚的情况下，我发现的唯一方法是在 document.ready() 调用中添加一个类。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-19T09:44:06.770

你应该使用这个

```
div h2::nth-child(2) {

} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-04-19T09:44:29.717

您可以使用通用兄弟选择器`~`。

在您的情况下，您可以使用`h2~ul`它将应用于`ul`同一父级之前的 h2 。

# android - 以编程方式清除片段回栈

> ID：10225367
> 
> 赞同：3
> 
> 时间：2012-04-19T09:37:14.013
> 
> 标签：android, fragment

以编程方式清除片段回栈的最佳方法是什么？

我只使用一个活动和一组片段实现了屏幕导航。我想要一种将用户带到登录屏幕（当注销超时到期时）并清除所有片段历史记录的方法，最好的方法是什么？我在这里找到了几个答案，但我不知道哪个是最好的......提前谢谢！

目前我正在使用这个

```
public void clearBackStack() {
    FragmentManager fragmentManager = holder.getSupportFragmentManager();

    while (fragmentManager.getBackStackEntryCount() != 0) {
        fragmentManager.popBackStack(null, 0);
    }
} 
```

然而有时我会摆脱内存异常

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-18T19:17:07.053

在这一点上，这是一个相当古老的问题。无论如何，我尝试了你的代码，看起来你有一个无限循环。

`popBackStack(null, 0)`搜索带有空标签的片段，该片段将永远找不到。while 循环将循环直到内存用完。另一个问题`popBackStack`是 pop 不一定会立即执行，因此 while 循环可能会运行一段时间。

如果您想从后台堆栈中删除片段而不考虑标签或 ID，请`fragmentManager.popBackStackImmediate()`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-16T10:05:08.933

您可以使用`FragmentManager.popBackStack()`清除后台堆栈。

```
fragmentManager.popBackStack(null, FragmentManager.POP_BACK_STACK_INCLUSIVE); 
```

这将清空堆栈而不加载到容器中。

# tfs - 将 TFS 构建的输出复制到 TFS 位置

> ID：10225368
> 
> 赞同：2
> 
> 时间：2012-04-19T09:37:15.720
> 
> 标签：tfs, build

在 TFS 11 中添加了一项新功能，允许您将 TFS 位置指定为构建放置而不是网络共享。（见：http: [//blogs.blackmarble.co.uk/blogs/rfennell/post/2012/03/13/Dropping-build-output-to-source-control-in-TFS11.aspx](http://blogs.blackmarble.co.uk/blogs/rfennell/post/2012/03/13/Dropping-build-output-to-source-control-in-TFS11.aspx)）

有谁知道在 TFS2010 中可以通过 Windows 工作流或类似的东西来实现类似的东西。我已经花了几天时间搜索，但找不到任何有用的东西。

我最接近的是运行一个执行签入的自定义 powershell 脚本，但这似乎也不起作用。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:56:29.073

您需要创建一些使用 TFS 版本控制客户端 API 的自定义操作来在工作区中进行更改并提交它们。Ewald Hofman 有一篇博文，在更新一组文件的版本号后做了类似的事情。

[http://www.ewaldhofman.nl/post/2010/05/13/Customize-Team-Build-2010-e28093-Part-5-Increase-AssemblyVersion.aspx](http://www.ewaldhofman.nl/post/2010/05/13/Customize-Team-Build-2010-e28093-Part-5-Increase-AssemblyVersion.aspx)

如果您创建此类自定义活动，请考虑[通过 Team Build Extensions 项目](http://tfsbuildextensions.codeplex.com/)与社区共享它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:56:57.493

简单的肮脏解决方案是使用少量调用流程活动来调用 xcopy、tf add 和 tf checkin 命令并删除目录活动来完成此操作。

# c# - 从列表中随机选择

> ID：10225374
> 
> 赞同：0
> 
> 时间：2012-04-19T09:37:30.417
> 
> 标签：c#, asp.net, sql, linq-to-sql

我希望你们能给我一个想法，我在数据库中有 3 列，Emp Name、Emp Schedule 和一些用于修复 sched（布尔）的列。我有一个网格，将显示他们的姓名，以及他们相应的月份时间表和一个将在网格上生成他们的时间表的按钮。我的问题是，我怎样才能使生成按钮工作？我的意思是如何为每个员工生成随机时间表？还有一个条件是，如果检查了修复计划列，则该员工不应包含在列表中..提前致谢！

它也应该遵循这种时间表，墓地轮班>中班>早班..因此，如果员工上个月已经有早班，他/她的下一个班次应该已经是墓地轮班......示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T09:39:08.823

在 SQL 中：

```
ORDER BY NEWID() 
```

在 LINQ 中：

```
order by Guid.NewGuid() 
```

# c# - 想在文本块中显示滑块的值吗？

> ID：10225384
> 
> 赞同：3
> 
> 时间：2012-04-19T09:38:27.773
> 
> 标签：c#, silverlight, windows-phone-7

我正在制作一个 Windows Phone 7 应用程序，并放入了一个滑块。它从 1 开始，到 80 结束。我想要它，所以当您停止滑块时，它会显示滑块在文本块中的任何位置的值。（比如如果有人中途停下来，文本块会说 40）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-19T10:06:04.980

最简单的方法是将滑块值属性绑定到您的 Textblocks Text 属性，然后每次更改时都会更新该值。您也可以创建一个转换器，因为 Sliders Value 是双精度值，然后使用转换器您也可以将此值转换为 Int。

```
Text="{Binding ElementName=YourSlider,Path=Value}" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T09:42:51.693

只需在停止拖动/更改滑块后触发的事件中使用 Slider.Value.ToString() 设置 TextBlock.Text。

如果需要，还可以使用 Math.Round() 缩短值：

```
TextBlock.Text = Math.Round(Slider.Value, [Number of Decimals]).ToString() 
```

问候克里斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T09:45:28.907

您必须为滑块创建一个 valuechanged 事件（类似这样）

```
private void ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
{

} 
```

然后在那种情况下，您可以设置文本框的文本 - >

```
textbox1.Text = silder1.Value.ToString(); 
```

每次滑块更改时，事件都会触发，因此文本框也会更改

希望这可以帮助，

巴特

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-20T10:58:06.983

'Bart Teunissen' 的答案非常好，但只需添加一个简单的检查 OldValue 是否可用，它就会完美运行。

```
private void slider_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
{
   if(slider.OldValue != null)
   {
      textbox1.Text = silder1.Value.ToString();
   }
} 
```

希望这有帮助。

# android - 在 Android 应用程序中播放 FLV/HTTP

> ID：10225390
> 
> 赞同：7
> 
> 时间：2012-04-19T09:38:53.037
> 
> 标签：android, video, video-streaming, flv, vlc

在我的应用程序中，我需要在 Android (2.x+) 上播放 FLV/HTTP 流。[libvlc](http://www.videolan.org/)支持这个功能：我用 VLC-android 播放器测试了我的 FLV 流，它似乎工作。

但一年前，其中一位开发者描述如下：

> android 上的 VLC 不完整、未完成、有问题、速度慢，甚至无法编译。为什么这么多人试图建造它呢？

那么将 VLC 用于我的项目的想法是好还是最好搜索其他方式？还有其他在 Andoid 上玩 FLV 的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:48:31.007

你检查过这个图书馆吗？
[http://vov.io/vitamio/](http://vov.io/vitamio/)

我用它来播放 prehoneycomb 设备的 http 直播流，但它也支持 FLV。首次播放视频时，它会提示用户从播放市场或他们的网站安装插件。初始安装后，用户应该能够播放 FLV。

# cuda - cuda 视觉分析器详细信息-> 吞吐量

> ID：10225392
> 
> 赞同：1
> 
> 时间：2012-04-19T09:38:59.433
> 
> 标签：cuda, profiler, throughput

在详细信息选项卡下的可视化分析器（cuda 工具包 4.1）中有一个称为吞吐量的指标。这仅对 memcpy HtoD DtoH 等有价值。有人知道它到底是什么吗？帮助搜索提供了许多不同的吞吐量（例如全局内存吞吐量等），我无法确定这个指标指的是哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:24:46.330

吞吐量是数据传输的速率，通常以 GB/s 为单位。对于 HtoD 和 DtoH，这是主机和设备之间通过连接两者的 PCI 总线进行的数据传输。您也可以拥有 DtoD，在这种情况下，您的吞吐量应该会显着提高，因为您不受 PCI 总线带宽的限制。这是一个重要的指标，因为在主机和设备之间传输数据是 CUDA 良好性能的最大瓶颈之一。您可以通过在主机上尽可能使用固定（页面锁定）内存来提高主机设备吞吐量。

您可以通过分析SDK 中包含`nvvp`的示例来对此进行测试。`bandwidthTest`

# cakephp-2.0 - 如何计算 CakePHP 查询中的记录数？

> ID：10225393
> 
> 赞同：0
> 
> 时间：2012-04-19T09:39:02.670
> 
> 标签：cakephp-2.0

我有一个相当复杂的问题（无论如何对我来说），我不知道下一步该做什么。

首先，我将为您介绍该项目的一些背景。这个项目是让我记录客户并列出与这些客户相关的所有服务。我有三个表： 客户产品 CustomerRecordHub

Customer 表和 Products 表包含有关其各自方的信息。CustomerRecordHub 表基本上将这两个表链接在一起。因此，该表将包含客户 ID 和与该客户关联的产品。

因此，如果客户的 ID 为 1，并且该客户拥有三种产品，那么在 Products UD 字段中他们将拥有 1、2 和 3。因此该表将是：

> 身份证 | 公司ID | 产品ID
> 1 | 1 | 1
> 2 | 1 | 2
> 3 | 1 | 3

我使用 CustomerRecordHub 表作为主要参考表，然后从该表中查询 Customer 和 Product 表。我为 CustomerRecordHub 设置了以下关系：

```
<?php
public $belongsTo = array(
    'Customer' => array(
        'className' => 'Customer',
        'foreignKey' => 'id',
    ),
    'Product' => array(
        'className' => 'Product',
        'foreignKey' => 'id',
    )
);
?> 
```

我可以查询此表并从其他两个链接表中检索我想要的所有记录，而不会出现任何问题。

现在，我确实遇到的问题是，我想在一个页面上列出我拥有的所有客户，然后我想显示每个客户拥有多少产品。因此，如果我们使用我给出的示例，对于 ID 为 1 的客户，有三个产品链接到该客户。所以在页面上我想显示客户详细信息，在“产品”标题下我想获得显示的产品数量（在这种情况下应该显示数字 3）。

通常我会在 SQL 中使用 COUNT 命令，但我试图使代码尽可能严格地遵守 CakePHP 自己的约定，并且不在代码中使用原始 SQL。

目前，我正在使用的代码是这样的：

```
<?php

$this->loadModel('Customerrecordhub');

$customers = $this->Customerrecordhub->find('all', 'recursive' => 2));
$this->set('customers', $customers);

?> 
```

在 HTML 中，我将所有数据泵入 foreach 循环内的表中。

我应该用什么来计算记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:51:38.167

该方法有一个特殊[`count`](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find-count)参数`find`，但这可能不符合您的需求，因为您想要显示的不仅仅是计数的产品。

最好在[方法](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find)`COUNT` [的`fields`参数中`find`](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find)定义。所以：

```
'fields' => array('Model.field1', 'COUNT(Model.field2) AS products_count') 
```

# asp.net-mvc - 为什么@Using Html.BeginForm 中的普通标记需要@？

> ID：10225394
> 
> 赞同：4
> 
> 时间：2012-04-19T09:39:04.840
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, razor

相关：[MVC3 Razor 使用 Html.BeginForm 问题](https://stackoverflow.com/questions/4990717/mvc3-razor-using-html-beginform-problem)

当我使用 Razor 引擎为 MVC 3/VB 制作 HTML 表单时，我希望能够这样做：

```
@Using Html.BeginForm("Action", "Controller")
    <fieldset>
        @* Other form code and values *@
    </fieldset>
End Using 
```

但如果我这样做，我会得到“BC32035：属性说明符不是完整的语句。使用续行将属性应用于以下语句。” 我需要在开始标记之前添加一个 @ 字符以避免此错误。有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T10:07:43.640

我相信 Razor beginform 应该是这样的，即带有花括号：

```
@using (Html.BeginForm())
{
    @* Other code here *@
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T11:12:26.547

我不使用 VB.NET，但我认为你应该这样做：

```
@Using Html.BeginForm("Action", "Controller")
    @:<fieldset>
        @* Other form code and values *@
    @:</fieldset>
End Using 
```

由于 VB.NET 对 XML 的一流支持，它将标签视为 XML，因此它也将字段集（与此相关的任何 HTML 标签）视为 XML；并且 XML 作为 VB.NET 语言的一部分，它将与 Razor 的解析器背道而驰

在 VS2010 上使用 ASP.NET MVC for VB.NET 快速旅行，这就足够了：

```
@Using Html.BeginForm("Action", "Controller")
    @<fieldset>
        @* Other form code and values *@
    </fieldset>
End Using 
```

VB.NET 的语言文字 XML 支持与 Razor 的解析器发生冲突，只是通过添加额外的`@`或`@:`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-19T11:23:11.473

将 Razor 与 C# 一起使用时，您所描述的内容是可能的，因为解析器可以确定从代码到标记的转换，因为 html 中的显式“<”字符不是有效的 C# 标记。VB.NET 直接在代码中支持内联 XML，因此 Razor 解析器无法确定您已转换回标记，因此您必须更加明确。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-10T21:57:45.107

对于**多行支持，如**[Using in Razor VB.net MVC not work as expected 中](https://stackoverflow.com/q/16414271/1366033)所指出的，您可以使用`@<text>...</text>`切换回“文本模式”并像这样输出 html：

```
@Using Html.BeginForm("Action", "Controller")
    @<text>
      <fieldset>
        * Other form code and values *
      </fieldset>
    </text>
End Using 
```

# java - HTTP 多部分和分块可以共存吗？

> ID：10225396
> 
> 赞同：9
> 
> 时间：2012-04-19T09:39:06.907
> 
> 标签：java, http, chunked-encoding, http-chunked, multipartentity

我正在使用 apache`HttpClient`将几个文件**发布到服务器。**这是代码：

```
 public static HttpResponse stringResponsePost(String urlString, String content, byte[] image,
        HttpContext localContext, HttpClient httpclient) throws Exception {

    URL url = new URL(URLDecoder.decode(urlString, "utf-8"));
    URI u = url.toURI();

    HttpPost post = new HttpPost();
    post.setURI(u);

    MultipartEntity reqEntity = new MultipartEntity();
    StringBody sb = new StringBody(content, HTTP_CONTENT_TYPE_JSON, Charset.forName("UTF-8"));
    ByteArrayBody ib = new ByteArrayBody(image, HTTP_CONTENT_TYPE_JPEG, "image");

    reqEntity.addPart("interview_data", sb);
    reqEntity.addPart("interview_image", ib);
    post.setEntity(reqEntity);

    HttpResponse response = null;
    response = httpclient.execute(post, localContext);

    return response;
} 
```

问题是，`MultipartEntity`类只有`isChunked()`方法（总是返回 false），如果我希望为我的多部分实体启用卡盘编码，则没有“setChunked(boolean)”选项。

我的问题是：

1.  HTTP 多部分和分块可以根据协议规范共存吗？`InputStreamEntity`如果没有，为什么像class这样的其他实体有`setChunked(boolean)`where`MultipartEntity`没有？

2.  有没有办法在启用分块的情况下“一次”发布多个文件，最好是使用 apache 库？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T10:14:14.347

我的第二个问题得到了解决方案，诀窍是写入`MultipartEntity`a `ByteArrayOutputStream`，创建一个`ByteArrayEntity`from`ByteArrayOutputStream`并在其上启用分块。这是代码：

```
 ByteArrayOutputStream bArrOS = new ByteArrayOutputStream();
    // reqEntity is the MultipartEntity instance
    reqEntity.writeTo(bArrOS);
    bArrOS.flush();
    ByteArrayEntity bArrEntity = new ByteArrayEntity(bArrOS.toByteArray());
    bArrOS.close();

    bArrEntity.setChunked(true);
    bArrEntity.setContentEncoding(reqEntity.getContentEncoding());
    bArrEntity.setContentType(reqEntity.getContentType());

    // Set ByteArrayEntity to HttpPost
    post.setEntity(bArrEntity); 
```

# vb.net - PODConverter 即服务 (vb.net) .odt 到 .pdf

> ID：10225398
> 
> 赞同：0
> 
> 时间：2012-04-19T09:39:24.220
> 
> 标签：vb.net, pdf, odt

我一直在尝试使 PODConverter 作为服务工作，但它就是不想工作。有趣的是，我们使用了一个运行良好的旧版本，或者我们只是说它至少在做某事。我们现在必须切换，因为 soffice.exe 随机崩溃。

因此，我使用新版本的 JODConverter (jodconverter-core-3.0-beta-4-dist) 制作了一个新的测试项目，但我保留了基本构建。例如服务的参数。

我的测试项目没有做那么多。它仅将一堆 .odt 文件复制到另一个文件夹，然后尝试将它们转换为 .pdf，但没有任何反应。没有pdf，没有错误..什么都没有。

我不知道为什么这不起作用，我真的希望你们能在这里帮助我，因为这真的让我发疯。

[编辑] 好的，我发现了一个问题，我有点知道它为什么不起作用：显然输出是空的，但我不知道为什么。

[EDIT2] 发现错误..忘记了 jar 的部分路径。代码：

```
Imports System
Imports System.Configuration
Imports System.IO
Imports System.Text
Imports System.Collections.Generic

Module Module1
    Private OutputMsg As System.Text.StringBuilder = Nothing
    Private ErrorMsg As System.Text.StringBuilder = Nothing

    Sub Main()

        Dim FilesToDelete = Directory.GetFiles("D:\temp")
        For Each File In FilesToDelete
            System.IO.File.Delete(File)
        Next
        Dim FilesToConvert = System.IO.Directory.GetFiles("D:\Source", "*.odt", IO.SearchOption.TopDirectoryOnly)
        Dim loopCounter As Integer = 0
        Dim fileCounter As Integer = 0

        Try
            For Each file In FilesToConvert
                loopCounter += 1
                fileCounter += 1
                System.IO.File.Copy(file, "D:\temp\" + System.IO.Path.GetFileName(file))
                'Prüfe, ob die Blockgröße erreicht ist oder die letzte Datei übertragen wurde!
                If fileCounter = FilesToConvert.Count Then
                    convertFiles()

                    loopCounter = 0
                End If
            Next
        Catch ex As Exception
            MsgBox(ex.ToString)
        End Try
    End Sub

    Private Sub convertFiles()

        Try
            Dim proc As New Process
            proc.StartInfo.WorkingDirectory = "D:\jodconverter-core-3.0-beta-4-dist\jodconverter-core-3.0-beta-4"
            proc.StartInfo.FileName = "C:\Program Files (x86)\Java\jre6\bin\java.exe"
            proc.StartInfo.Arguments = "java -jar lib/jodconverter-core-3.0-beta-4.jar -o pdf d:\temp\*.odt"
            proc.StartInfo.UseShellExecute = False
            proc.StartInfo.RedirectStandardOutput = True
            proc.StartInfo.RedirectStandardError = True
            proc.StartInfo.RedirectStandardInput = True

            OutputMsg = New System.Text.StringBuilder()

            AddHandler proc.OutputDataReceived, AddressOf OutputHandler
            AddHandler proc.ErrorDataReceived, AddressOf ErrorHandler

            proc.Start()
            proc.BeginOutputReadLine()

            proc.WaitForExit()
            'Me.SetExitCode(proc.ExitCode)

        Catch ex As Exception
            MsgBox(ex.ToString)
        End Try
    End Sub
    Private Sub OutputHandler(ByVal sendingProcess As Object, _
    ByVal outLine As DataReceivedEventArgs)
        Try
            ' Collect the sort command output.
            If Not String.IsNullOrEmpty(outLine.Data) Then
                ' Add the text to the collected output.
                OutputMsg.Append(Environment.NewLine + outLine.Data)
            Else
                MsgBox("Outline is empty!")
            End If

        Catch ex As Exception
            MsgBox(ex.ToString)
        End Try
    End Sub

    Private Sub ErrorHandler(ByVal sendingProcess As Object, _
     ByVal outLine As DataReceivedEventArgs)

        ' Collect the sort command output.
        If Not String.IsNullOrEmpty(outLine.Data) Then

            ' Add the text to the collected output.
            ErrorMsg.Append(Environment.NewLine + outLine.Data)
        Else
            MsgBox("Error is empty!")
        End If
    End Sub
End Module 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:31:48.020

```
Dim InstruccionJava As String = "java -jar lib\jodconverter-core-3.0-beta-4.jar "
Dim RutaConvertidor As String = rutaServer & "\Convertidor"

Dim proc As New Process
proc.StartInfo.WorkingDirectory = RutaConvertidor & "\lib"

Dim Argunment As String = "-jar  " & RutaConvertidor & "\lib\jodconverter-core-3.0-beta-4.jar " & Ruta & " " & Rutahtml
proc.StartInfo.FileName = "java" '"C:\Archivos de programa\Java\jre7\bin\java.exe"
proc.StartInfo.Arguments = Argunment
proc.StartInfo.UseShellExecute = False
proc.StartInfo.RedirectStandardOutput = True
proc.StartInfo.RedirectStandardError = True
proc.StartInfo.RedirectStandardInput = True
proc.Start()
proc.BeginOutputReadLine()
proc.WaitForExit()
Dim OutputMsg As System.Text.StringBuilder = Nothing
OutputMsg = New System.Text.StringBuilder()
Dim redireccion As String = "Descargas/" & nombre & ".pdf"
Me.visor.Attributes("src") = redireccion
lberror.Text = OutputMsg.ToString 
```

# node.js - 使用 Node.js 检查文件是二进制文件还是 ASCII 文件？

> ID：10225399
> 
> 赞同：23
> 
> 时间：2012-04-19T09:39:26.563
> 
> 标签：node.js, binary, ascii

我想知道使用 Node.js 检查文件是二进制文件还是 ASCII 文件的最佳方法是什么？

似乎有两种方式不特定于 node.js：

1.  检查 MIME 类型：[How to Check if File is ASCII or Binary in PHP](https://stackoverflow.com/questions/632685/how-to-check-if-file-is-ascii-or-binary-in-php) - 但是这有它的问题，例如前驱通常没有可识别的 mime 类型，并`application/octet-stream`在使用[mime检查它们时恢复](https://github.com/bentomas/node-mime)

2.  通过使用流缓冲区检查字节大小以及[如何将文件内容识别为 ASCII 或二进制](https://stackoverflow.com/questions/277521/how-to-identify-the-file-content-is-in-ascii-or-binary#277538)- 这似乎非常密集，并且还提供了一个 node.js 示例。

那么已经有另一种方法了吗？也许是我不知道的秘密 node.js 调用或模块？或者如果我必须自己这样做，会建议什么方式？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T23:16:21.547

[感谢David Schwartz](https://stackoverflow.com/users/721269/david-schwartz)对这个问题的评论，我创建了[istextorbinary](https://github.com/bevry/istextorbinary)来解决这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-28T05:18:37.690

[ASCII 定义字符 0-127](http://en.wikipedia.org/wiki/ASCII)，因此如果文件的全部内容是该范围内的字节值，则可以将其视为 ASCII 文件。

```
function fileIsAscii(filename, callback) {
  // Read the file with no encoding for raw buffer access.
  require('fs').readFile(filename, function(err, buf) {
    if (err) throw err;
    var isAscii = true;
    for (var i=0, len=buf.length; i<len; i++) {
      if (buf[i] > 127) { isAscii=false; break; }
    }
    callback(isAscii); // true iff all octets are in [0, 127].
  });
}
fileIsAscii('/usr/share/dict/words', function(x){/* x === true */});
fileIsAscii('/bin/ls', function(x){/* x === false */}); 
```

如果性能至关重要，则考虑根据您的链接答案编写自定义 C++ 函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-11T11:15:01.517

我从谷歌来到这里，但由于找不到满意的答案，我采取了另一种对我有用的方法：

```
const string_to_test = "I am just a piece of text";
//const binary_to_test = "��˰!1�H��1�1����!H�=u�!�";
if(/\ufffd/.test(string_to_test) === true){
    console.log("I'm 'binary'");
}else{
    console.log("I'm proper text");
} 
```

它是如何工作的？如果您尝试以正常方式打开二进制数据（不使用十六进制编辑器），它会遇到一些渲染问题，这些问题会将您转换为这个奇怪的字符的连续 - 称为“替换字符”。

# javascript - 多步点击 Javascript 表单

> ID：10225400
> 
> 赞同：1
> 
> 时间：2012-04-19T09:39:30.103
> 
> 标签：javascript, forms, onclick

谁能给我一个示例，说明如何创建一个多步骤表单，其中每个阶段由 onClick 提交，然后使用隐藏的输入或变量来存储前一页的值？

例如：

步骤1...

```
<input type="radio" name="group1" value="yes" onclick="this.form.submit()" />

<input type="radio" name="group1" value="no" onclick="this.form.submit()" /> 
```

第2步...

```
<input type="radio" name="group2" value="100" onclick="this.form.submit()" />

<input type="radio" name="group2" value="200" onclick="this.form.submit()" />

<input type="radio" name="group2" value="300" onclick="this.form.submit()" />

<!-- previous input -->
<input type="hidden" name="group1" value="200" /> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:00:48.673

所以正如我在评论中所说，只创建一种形式：（代码高度未格式化，仅用于理解目的）

```
<form>
     <input class='step1input'/>
     <input class='step1input'/>
      <input class='step2input'/>
     <input class='step2input'/>
     ...
 </form> 
```

在第一步隐藏不属于那里的输入（step2input 类）

在第二步，隐藏其他输入（step1input 类）

ETC...

在最后一步结束时，您提交整个表格

编辑：您所做的很好，只是，您无需提交表单，而是隐藏元素。使用这样的 jquery 或 javascript 函数：

```
 function goToNextStep(currentStep){
    if (currentStep==1) {
       $('input[name='group1']').hide();
       $('input[name='group2']').show();
    }else if (currentStep==2){
         ...
    }
    ...
    else if (currentStep==lastStep){
        document.form.submit();
    }
 } 
```

步骤1...

```
<input type="radio" name="group1" value="yes" onclick="goToNextStep(1)" />

<input type="radio" name="group1" value="no" onclick="goToNextStep(1)" /> 
```

第2步...

```
<input type="radio" name="group2" value="100" onclick="goToNextStep(2)" />

<input type="radio" name="group2" value="200" onclick="goToNextStep(2)" />

<input type="radio" name="group2" value="300" onclick="goToNextStep(2)" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:47:30.973

使用类似这样的插件怎么样：

[http://www.michaelpeacock.co.uk/blog/entry/multistep-form-navigation-jquery-plugin](http://www.michaelpeacock.co.uk/blog/entry/multistep-form-navigation-jquery-plugin)

这个也很简单：

[http://www.jankoatwarpspeed.com/post/2009/09/28/webform-wizard-jquery.aspx](http://www.jankoatwarpspeed.com/post/2009/09/28/webform-wizard-jquery.aspx)

或者这里是一个更详细的插件：

[http://webexpedition18.com/articles/how-to-create-a-multi-step-signup-form-with-css3-and-jquery/](http://webexpedition18.com/articles/how-to-create-a-multi-step-signup-form-with-css3-and-jquery/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-19T21:59:17.080

基本上你会错过一个只显示相应表单部分并隐藏其余部分的 JS 函数。

这是一个包含三个步骤的示例。检查[JSfiddle 示例](https://jsfiddle.net/joao_pimentel/q0afo8ph/)。

在 HTML 中只需插入

```
<body onload="shows_form_part(1)">
  <form>
    <div id="form_part1">
      <!--form elements 1-->
      <button type="button" onclick="shows_form_part(2)">&raquo;</button>
    </div>
    <div id="form_part2">
      <!--form elements 2-->
      <button type="button" onclick="shows_form_part(1)">&laquo;</button>
      <button type="button" onclick="shows_form_part(3)">&raquo;</button>
    </div>
    <div id="form_part3">
      <!--form elements 3-->
      <button type="button" onclick="shows_form_part(2)">&laquo;</button>
      <button type="button" onclick="submit_form()">Submit</button>
    </div>
  </form>
</body> 
```

在 Javascript 中定义这个函数，它只显示相应的表单部分并隐藏其余部分。

```
function shows_form_part(n){
    var i = 1, p = document.getElementById("form_part"+1);
    while (p !== null){
        if (i === n){
            p.style.display = "";
        }
        else{
            p.style.display = "none";
        }
        i++;
        p = document.getElementById("form_part"+i);
    }
} 
```

然后你只需要定义`submit_form()`函数。

HTML 字符`&laquo;`和`&raquo;`分别打印 « 和 » 这对于上一个和下一个按钮字符可能很有趣。

# objective-c - 如何更改 NavigationController 的 rootviewcontroller？

> ID：10225401
> 
> 赞同：21
> 
> 时间：2012-04-19T09:39:30.180
> 
> 标签：objective-c, uinavigationcontroller

我有navigationController，它显示为modalview，它的rootviewcontroller 是FirstViewController。有时我想将navigationController 的rootviewcontroller 更改为SecondViewController。我所做的是

```
[self.navigationController initWithRootViewController:SecondViewController]; 
```

我不确定我所做的是否正确以及 FirstViewController 是否被释放？请任何人知道这样做的正确方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-19T09:58:02.013

做任何一个

```
[firstViewController.navigationController setViewControllers: [NSArray arrayWithObject: secondViewController] 
                                                    animated: YES]; 
```

或者

```
firstViewController.navigationController.viewControllers = [NSArray arrayWithObject: secondViewController]; 
```

其中分别`firstViewController`是类的实例`FirstViewController`和类`secondViewController`的实例`SecondViewController`。后一种变体是`setViewControllers:animated:`没有动画的快捷方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-20T09:16:10.543

```
- (void) changeRootViewControllerOFNavigationControlllerAtRuntime:(UIViewController *) viewController {

     UINavigationController *navController=[[UINavigationController alloc]initWithRootViewController:viewController];
     [UIApplication sharedApplication].delegate.window.rootViewController=navController; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-02T08:08:43.437

您需要制作自定义 UINavigationController

```
@interface mySwitchRootViewNavigationController()

@property (nonatomic, retain) myFirstViewController * FirstViewController;
@property (nonatomic, retain) mySecondViewController * SecondViewController;

@end

- (void)viewDidLoad
{
  [super viewDidLoad];
  self.FirstViewController = [[myFirstViewController alloc] init];
  self.SecondViewController = [[mySecondViewController alloc] init];
}

-(void) setRootViewControllerWithID:(int) viewControllerID
{
  if (viewControllerID == 1) {
    self.viewControllers = [NSArray arrayWithObject:self.SecondViewController];
  } else
  {
    self.viewControllers = [NSArray arrayWithObject:self.FirstViewController];
  }
}

-(void)viewWillAppear:(BOOL)animated
{
  [self setRootViewControllerWithID:intVar];
  [super viewWillAppear:animated];
} 
```

初始化

```
mySwitchRootViewNavigationController * switchView = [mySwitchRootViewNavigationController alloc] init]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T10:06:43.943

这不是正确的方法，`init`很少调用已经初始化的对象（我认为永远不会）。

我解决这个问题的方法是创建 UINavigationController 的子类。

在这个子类中，我覆盖`initwithrootviewcontroller:`

```
- (id) initWithRootViewController:(UIViewController *)rootViewController
{
    UIViewController *fakeController = [[[UIViewController alloc] init] autorelease];

    self = [super initWithRootViewController:fakeController];
    if(self)
    {
        self.fakeRootViewController = fakeController;
        rootViewController.navigationItem.hidesBackButton = YES;

        [self pushViewController:rootViewController animated:NO];
    }
    return self;
} 
```

fakeRootViewController 实际上什么都不做，这是 iOS 无法设置 rootviewcontroller 的一种解决方法。

在另一个函数（setRootViewController：aViewController）中，您隐藏了新的“rootviewcontroller”的后退按钮，因此用户永远不会看到有一个假的 rootviewcontroller。然后把它推到 fakerootviewcontroller 上面

poptorootviewcontroller 应该被覆盖以确保它总是弹出到堆栈的索引 1，而不是索引 0。

viewcontroller 的 getter 应该改变，所以它返回一个没有 fakerootviewcontroller ( `removeobjectatindex: 0`)的数组

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-10T11:31:26.463

**斯威夫特 3**

```
fileprivate func changeRootVC() {
        if let newVC  = self.storyboard?.instantiateViewController(withIdentifier: "MyStoryboardID"), let nc = self.navigationController {
            nc.setViewControllers([newVC], animated: true)
        }

    } 
```

# video - 如何使用 ffmpeg 从视频文件中提取高质量的 JPEG 图像？

> ID：10225403
> 
> 赞同：145
> 
> 时间：2012-04-19T09:39:34.260
> 
> 标签：video, ffmpeg, graphics, computer-vision

目前我正在使用这个命令来提取图像：

```
ffmpeg -i input.mp4 output_%03d.jpeg 
```

但是如何提高 JPEG 图像质量呢？

* * *

## 回答 #1

> 赞同：268
> 
> 时间：2012-04-19T18:03:39.493

# 用于`-qscale:v`控制质量

使用`-qscale:v`（或别名`-q:v`）作为输出选项。

*   JPEG 的正常范围是 2-31，其中 31 是最差的质量。
*   比例是线性的，qscale 的两倍大约是比特率的一半。
*   建议尝试 2-5 的值。
*   您可以使用值 1 但必须添加`-qmin 1`输出选项（因为默认值为`-qmin 2`）。

## 要输出一系列图像：

```
ffmpeg -i input.mp4 -qscale:v 2 output_%03d.jpg 
```

有关图像输出的更多选项，请参阅[图像复用器文档](https://ffmpeg.org/ffmpeg-formats.html#image2-2)。

## 要以约 60 秒的持续时间输出单个图像：

```
ffmpeg -ss 60 -i input.mp4 -qscale:v 4 -frames:v 1 output.jpg 
```

## 连续覆盖/更新/保存到单个图像

使用`-update 1` [图像混合器](https://ffmpeg.org/ffmpeg-formats.html#image2-2)选项。来自实时流输入的每秒一次的示例：

```
ffmpeg -i rtmp://input.foo -q:v 4 -r 1 -update 1 output.jpg 
```

### 另见

*   [FFmpeg 常见问题解答：如何将电影编码为单张图片？](https://ffmpeg.org/faq.html#How-do-I-encode-movie-to-single-pictures_003f)
*   [FFmpeg Wiki：每 X 秒的视频创建一个缩略图](https://trac.ffmpeg.org/wiki/Create%20a%20thumbnail%20image%20every%20X%20seconds%20of%20the%20video)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-11-02T15:53:41.540

以无损格式输出图像，例如 PNG：

```
mkdir stills
ffmpeg -i my-film.mp4 -vsync 0 -f image2 stills/my-film-%06d.png 
```

然后使用另一个程序（您可以更精确地指定质量、二次采样和 DCT 方法 - 例如 GIMP）将您想要的 PNG 转换为 JPEG。

与`-qmin 1 -q:v 1`直接从`ffmpeg`.

如果您只想提取关键帧（可能具有更高质量的后期编辑），您可以使用以下内容：

```
ffmpeg -skip_frame nokey -i my-film.mp4 -vsync 0 -f image2 stills/my-film-%06d.png 
```

该`-vsync 0`参数避免了需要指定帧速率，`-r`并且意味着输入文件中的所有帧都被视为，嗯，一帧。

# java - 在默认版本之外运行另一个 JRE

> ID：10225404
> 
> 赞同：1
> 
> 时间：2012-04-19T09:39:34.723
> 
> 标签：java

当我的机器上安装的默认 java 版本是 Java 1.6.0_30 时，如何运行 java 版本 (1.6.0_20)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:46:04.850

在命令行中，显式使用所需的 Java 可执行文件版本。

```
C:\Program Files\java\jdk1.6.0_20\bin\java <Main> 
```

使用 Eclipse IDE，您可以设置要在项目设置中使用的 JDK。

使用一般系统设置，更改`PATH`和`JAVA_HOME`变量以指向所需的版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T09:43:50.510

您需要修改`PATH`环境变量：

```
$ export JAVA_HOME=/java/1.6.0_20 # 不确定这是否绝对必要。
$ 出口路径=$JAVA_HOME/bin:$PATH

```

# vb.net - RDLC - 报告：多次重复表格

> ID：10225406
> 
> 赞同：2
> 
> 时间：2012-04-19T09:39:38.323
> 
> 标签：vb.net, reporting-services, rdlc

我正在为 Windows 应用程序在 vs2008 中设计一个 rdlc 报告。我想显示基于部门的采购和销售。如果我选择一个部门，它工作正常，但不知道如何在不同的表中显示每个部门的采购和销售数据。我已经在报告中使用了嵌入式资源。报表是基于 DataTable（在数据集 - xsd 文件上）设计的，其中包含 ITEMS、Purchase、Sales 和 Net 作为字段。我附上了一张图片，描述了我想要显示的格式。![在此处输入图像描述](../Images/7ca3718ad94e347a1cade20e34128fe0.png)

请给我一些建议。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:06:45.127

首先，您需要将 Department 字段添加到您的`DataTable`. 然后在 RDLC 中将一个`List`对象添加到报表的正文中。在`List`使用它的详细信息部分`Fields!Department.Value`。最后，将`Table`对象按原样嵌入到`List`. 您现在将获得每个部门一张桌子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T15:36:27.560

我也需要一个重复表格的解决方案（作为一个报告组），你在这里的回答帮助我找到了一个解决方案。还有其他需求：需要在单独的页面上显示每个表格。

我正在使用 fyiReporting Designer（项目已死），并且能够通过创建一个列表来实现这一点，然后将我的 3 个表中的每一个添加到列表中，每个表在末尾设置为分页符。我对 List 和 3 个表中的每一个都使用了相同的分组字段/表达式。

希望这对未来面临类似挑战的人们有所帮助。

# javascript - 显示某些选项卡时如何隐藏元素

> ID：10225408
> 
> 赞同：0
> 
> 时间：2012-04-19T09:39:48.620
> 
> 标签：javascript, twitter-bootstrap

我正在使用 Twitter Bootstrap，并且已经成功实现了这些选项卡。我有一个按钮应该显示在除一个之外的所有选项卡上，知道我该怎么做吗？

```
<div class="span6 offset1"> 
  <div class="tabbable">
    <ul class="nav nav-tabs">
      <li class="active"><a href="#general" data-toggle="tab">General</a></li>
      <li><a href="#example2" data-toggle="tab">Example2</a></li>
      <li><a href="#example3" data-toggle="tab">Example3</a></li>
    </ul>

    <div class="tab-content">
      <div id="general" class="tab-pane fade in active" >
       //content
      </div>
      <div id="example2" class="tab-pane fade" >
       //content
      </div>
      <div id="example3" class="tab-pane fade" >
       //content
      </div>
    </div>
 </div> 
 <input type="submit" style="width:120px" class='btn btn-primary' id="update" value="Update"/> 
</div> 
```

我如何对其进行编程，以便在显示选项卡*示例3 时，更新按钮将被隐藏，但在显示**常规*选项卡和*示例 2*时仍保留在页面上。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T11:40:47.137

我不确定引导选项卡中是否有任何事件被触发。但最简单的方法是在 example3 链接上使用 mouseclick 事件，甚至可以尝试触发自定义事件。

```
$('a[href="#example3"]').on('click',function(){
 $("#update").hide();
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-19T09:42:15.407

利用`.style.display = 'none'`

例如

```
document.getElementById(id).style.display = 'none'; 
```

# iphone - 无法使用 NSPredicate 从日期数组中获取日期

> ID：10225409
> 
> 赞同：1
> 
> 时间：2012-04-19T09:39:53.467
> 
> 标签：iphone, objective-c, ios, xcode4

我正在获取两个日期之间的日期数组..执行此代码时出现错误不知道我哪里出错了:(

我的代码是

```
 NSArray *Dates = [NSArray arrayWithObjects:@"02-02-2012", @"04-02-2012", @"04-02-2012",      @"03-02-2012",@"04-02-2010", @"04-02-2012", @"04-02-2011", @"09-02-2012", @"12-02-2012 ",      @"11-02-2012", nil];
  NSString *startStringDate= @"03-02-2012";
  NSString *endStringDate = @"09-02-2012";

  //converting NSString to NSDate
  NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
  [dateFormatter setDateFormat:@"dd-MM-yyyy"];
  NSDate *StartDate = [dateFormatter dateFromString:startStringDate];
  NSDate *endDate = [dateFormatter dateFromString:endStringDate];

 // output of StartDate is 03-02-2012 08:37:48 +0000
 // output of endDate is 09-02-2012 08:37:48 +0000

 //using filteredArrayUsingPredicate to fetch date which comes between StartDate and  endDate

  NSPredicate *findS = [NSPredicate predicateWithFormat:@"(SELF > %@) AND (SELF < %@)", StartDate, endDate];
  NSArray *result = [Dates filteredArrayUsingPredicate:findS]; 
```

当我运行此代码时，出现错误：[__NSDate length]: unrecognized selector sent to instance 0x982d5a0'

有人可以帮我解决这个问题 提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T09:54:21.137

```
NSArray *Dates = [NSArray arrayWithObjects:[dateFormatter dateFromString:@"02-02-2012"],[dateFormatter dateFromString:@"04-02-2012"],nil]; 
```

像这样为日期创建你的数组，而不是尝试它可能是有效的......

# c# - 如何确定 MEF 插件类的类型？

> ID：10225416
> 
> 赞同：1
> 
> 时间：2012-04-19T09:40:28.387
> 
> 标签：c#, metadata, mef

我正在为我的插件系统使用[MEF](http://www.google.se/url?sa=t&rct=j&q=mef%20msdn&source=web&cd=1&ved=0CDsQFjAA&url=http://msdn.microsoft.com/en-us/library/dd460648.aspx&ei=lduPT46VAsyN4gSu_qm7BA&usg=AFQjCNE_UJdqKA8b6AnLTtwDpa7nJC2hLQ) (C# 4.0)。有时需要获取所有插件的派生类型列表（主要用于 XML 反序列化）。这可以在不实例化插件的情况下完成吗？

这有效，但需要实例化：

```
var cat = new DirectoryCatalog(path, "*.dll");
var container = new CompositionContainer(cat);
container.ComposeParts(this);
foreach (var plugin in Plugins)
{
    // Would be better if this could be done via Metadata!
    DoStuff(plugin.Value.GetType());
}
// ...
[ImportMany]
public Lazy<PluginBase, IPluginMetadata>[] Plugins
{
    get;
    private set;
} 
```

**问：**是否有可能通过一些`ExportAttribute`或其他技术来实现这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:27:16.607

MEF 无法自行提供此信息。要了解原因，请考虑通过属性进行以下导出：

```
[Export(typeof(PluginBase))]
public PluginBase MyPlugin
{
    get
    {
        if (someCondition)
        {
           return new FooPlugin();
        }
        else
        {
           return new BarPlugin();
        }
    }
} 
```

但是，您仍然可以在导出的元数据中包含类型（如下所示或通过包含元数据的自定义导出属性）：

```
[Export(typeof(PluginBase))]
[ExportMetadata("Type", typeof(Foo))]
public class Foo : PluginBase
{
} 
```

并添加`IPluginMetadata.Type`成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T17:41:00.313

您还可以对 ComposableParts 进行一些迭代，假设您有一个包含目录的静态 MEFHelper 类，您可以编写此代码

```
public static IEnumerable<Type> GetExportedTypes<T>()
{
    return catalog.Parts
        .Select(part => ComposablePartExportType<T>(part))
        .Where(t => t != null);
}

private static Type ComposablePartExportType<T>(ComposablePartDefinition part)
{

    if (part.ExportDefinitions.Any(
        def => def.Metadata.ContainsKey("ExportTypeIdentity") &&
            def.Metadata["ExportTypeIdentity"].Equals(typeof(T).FullName)))
    {
        return ReflectionModelServices.GetPartType(part).Value;
    }
    return null;
} 
```

我在[这篇博](http://www.dzone.com/links/r/getting_the_list_of_type_associated_to_a_given_ex.html)文中解释了这一点（您可以下载一个工作示例）

# c# - 正则表达式问题匹配字符串模式“A-Za-zA-Za-z_”

> ID：10225422
> 
> 赞同：1
> 
> 时间：2012-04-19T09:40:54.817
> 
> 标签：c#, xml, regex, linq-to-xml, pattern-matching

我正在尝试编写一个正则表达式来匹配一种形式的字符串：

```
"[A-Za-z][A-Za-z]-[A-Za-z][A-Za-z]_[match all chars]" 
```

我要匹配的字符串必须是这种形式，包括连字符和下划线。到目前为止，我有：

```
Regex regEx = new Regex(@"[A-Za-z]+(-[A-Za-z]+)+*$", RegexOptions.IgnorePatternWhitespace); 
```

我不确定如何添加下划线字符以便匹配。

此元素是我希望匹配的 XML 元素；我还想检索这个元素的内容。我怎么能这样做？

```
var newVar = from e in doc.Descendants("DocumentElement").Descendants() 
                         where regEx.IsMatch(e.Name.LocalName) 
                        select e; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T09:44:23.453

我会用

```
@"^[A-Za-z]{2}-[A-Za-z]{2}_.*$" 
```

解释：

*   `^`行首
*   `[A-Za-z]{2}`正好 2 个字符必须是 a-zA-Z
*   `-`破折号
*   `_`下划线
*   `.*`任何字符
*   `$`队伍的尽头

编辑：

另请参阅[正则表达式文档](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T10:01:43.073

您的示例模式使用 + 修饰符，它是“超过 1”，而不是 2。它会比您想象的更匹配。

```
Regex regEx = new Regex(@"^[A-Za-z]{2}-[A-Za-z]{2}_.*$", RegexOptions.IgnorePatternWhitespace); 
```

或者也只是设置不区分大小写的选项：

```
Regex regEx = new Regex(@"^[a-z]{2}-[a-z]{2}_.*$", RegexOptions.IgnorePatternWhitespace | RegexOptions.IgnoreCase); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T09:47:02.913

我相信你想要的正则表达式是：

```
new Regex(@"^[A-Z][A-Z]-[A-Z][A-Z]_", RegexOptions.CaseInsensitive); 
```

这应该捕获：
`^[A-Z][A-Z]`开头
`-`的两个字母字符 文字连字符
`[A-Z][A-Z]`两个更多
`_`的字母字符 文字下划线字符

您不会说要捕获此 xml 标记的整个名称，因此您不需要捕获`.*$`“任何其他字符直到字符串结尾”部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T09:47:28.243

请参阅此正则表达式。

在 nregex.com 上测试

```
^[A-Za-z]+(-[A-Za-z]+_[A-Za-z]{2})$ 
```

这里的关键点：-

*   字符串的最后一部分限定为 2 个字符（如果您不完全关心 2 个字符，请将其替换为 +）。

这也执行捕获。

# c++ - 线查找器 OpenCV

> ID：10225423
> 
> 赞同：1
> 
> 时间：2012-04-19T09:41:09.213
> 
> 标签：c++, opencv, computer-vision

我尝试实现名为**OpenCV 2 Computer Vision Application Programming Cookbook**的书中的示例，该书显示了如何在 Hough Probabilistic Algorithm 的帮助下找到一条线（第 170 页）。（顺便说一句，一本非常好的书！） [pdf格式的书](http://seabee3-ros-pkg.googlecode.com/files/1849513244__OpenCV.2.Computer.Vision.Application.Programming.Cookbook.pdf)

但是我在使用 C++ 时遇到了一些问题，我不是编程专家，为什么我需要你的帮助。Visual Studio 向我显示以下错误：

> LineTracking_v02.exe 中 0x00e274b7 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000000。

当我调试时，它似乎来自第 57 行（'return lines;' in 'findLines' function）。

你知道为什么吗？

这是我的代码：

```
//v2

#include "opencv\cv.h"
#include "opencv\highgui.h"
#include <iostream>
using namespace cv;
using namespace std;
#define PI 3.1415926535898

class LineFinder{
private :
    //original image
    cv::Mat img;
    //vector containing the end points of the detected lines
    std::vector<cv::Vec4i> lines;
    //accumulator resolution parameters
    double deltaRho;
    double deltaTheta;
    //minimum number of votes that a lines must receive before
    //being considered
    int minVote;
    //min length for a line
    double minLength;
    //max allowed gap along the line
    double maxGap;

public:
    //default accumulator resolution is 1 pixel by 1 degree,
    //no gap, no minimum length
    LineFinder() :  deltaRho(1), 
        deltaTheta(PI/180), 
        minVote(10),
        minLength(0.) {}

    //Set the resolution of the accumulator
    void setAccResolution(double dRho, double dTheta){
        deltaRho = dRho;
        deltaTheta = dTheta;
    }

    //Set the minimum number of votes
    void setMinVote(int minv){
        minVote = minv;
    }

    //Set line length and gap
    void setLineLengthAndGap(double length, double gap){
        minLength = length;
        maxGap = gap;
    }

    //Apply probabilistic Hough Transform
    std::vector<cv::Vec4i> findLines(cv::Mat& binary){
        lines.clear();
        cv::HoughLinesP(binary, lines, deltaRho, deltaTheta, minVote, minLength, maxGap);
        return lines;
    }

    //Draw the detected lines on an image
    void drawDetectedLines(cv::Mat &image, cv::Scalar color=cv::Scalar(255,255,255)){
        std::vector<cv::Vec4i>::const_iterator it2 = lines.begin();
        while(it2!=lines.end()){
            cv::Point pt1((*it2)[0], (*it2)[1]);
            cv::Point pt2((*it2)[2], (*it2)[3]);
            cv::line(image, pt1, pt2, color);
            ++it2;
        }
    }
};

int main(int, char**)
{
    // Open the default camera
    cv::VideoCapture capture(0); 
    // Check if we succeeded
    if(!capture.isOpened()) 
    {
        std::cout<<"Video capture failed, please check the camera."<<std::endl;
        return -1;
    }else{
        std::cout<<"Video camera capture successful!"<<std::endl;
    }

    for(;;) {
        cv::Mat frame;
        cv::Mat grayFrame;
        cv::Mat gaussGrayFrame;
        cv::Mat edges;
        LineFinder finder;

        capture >> frame; // get a new frame from camera

        //Convert the frame into a gray Frame
        cv::cvtColor(frame, grayFrame, CV_BGR2GRAY);

        //Apply a Gaussian Blur on the gray-level Frame
        cv::GaussianBlur(grayFrame, gaussGrayFrame, cv::Size(7,7), 1.5, 1.5);

        //Apply Canny Algorithm
        cv::Canny(
            gaussGrayFrame, // gray-level source image
            edges,          // output contours
            0,              // low threshold
            30,             // high threshold
            3);             // aperture size
        //End Canny Algorithm

        //Detect lines
        std::vector<cv::Vec4i> lines = finder.findLines(edges);
        //Draw the detected lines
        finder.drawDetectedLines(frame);

        cv::imshow("Camera Preview", frame);
        if(cv::waitKey(30) >= 0) break;
    }

    // the camera will be deinitialized automatically in VideoCapture destructor
    return 0;
} 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:03:12.770

我刚刚在 Ubuntu Linux 下成功编译并执行了你的程序。我目前的随机理论是`edges`在您的环境中没有正确初始化。

我会插入一些`cv::imwrite`或`cv::imshow`（对于 frame、grayFrame、edges）来查看是否所有图像都包含合理的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T06:46:28.103

所以你会继续前进而不确定失败吗？它肯定会回来咬你。

我的猜测：你什么都不做来检查框架是否真的被读取了，这会搞砸一些事情，我的猜测是：当你去在一个不存在的图像中绘制随机的东西时。

# delphi - Delphi XE2 Datasnap TObject 与 TMemoryStream

> ID：10225425
> 
> 赞同：2
> 
> 时间：2012-04-19T09:41:12.497
> 
> 标签：delphi, delphi-xe2, datasnap

如何通过datasnap传输带有TMemoryStream的TObject？

```
TMyObject = class(TBizObject)
  FText: TMemoryStream;  <-- Content not sent
  ...
end 
```

在服务器端

```
TServerMethods.GetMyClass(const AId: Integer): TMyObject
begin
  Result := TMyObject.find(AId);
end; 
```

在客户端 TMyObject 正确解组，但 FText 内容为空。

TMemoryStream Json 内容

```
"FText": {
        "type":"System.Classes.TMemoryStream",
        "id":2,
        "fields":{
            "FCapacity":16384,
            "FSize":11788,
            "FPosition":11788
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T10:46:28.120

关键是使用字段类型创建 TConverterEvent 和 TReverterEvent *****。没有源代码很难找到解决方案。

```
procedure RegisterDatasnapConvertersAndReverters;
var
  LConverter: TConverterEvent;
  LReverter: TReverterEvent;
begin
  LConverter := TConverterEvent.Create(TMemoryStream, '*' {FIELD_ANY});
  LConverter.TypeStringConverter := function (Data: TObject): string
    var
      stream: TMemoryStream;
    begin
      stream := TMemoryStream(Data);
      stream.Position := 0;
      Result := EncodeBase64(stream.Memory, stream.Size);
    end;
  TJSONConverters.AddConverter(LConverter);

  LReverter := TReverterEvent.Create(TMemoryStream, '*' {FIELD_ANY});
  LReverter.TypeStringReverter := function(Data: string): TObject
    var
      bytes: TBytes;
    begin
      bytes := DecodeBase64(Data);
      Result := TMemoryStream.Create;
      if nil <> bytes then
        TMemoryStream(Result).WriteBuffer(bytes[0], Length(bytes));
    end;
  TJSONConverters.AddReverter(LReverter);
end;

initialization
  RegisterDatasnapConvertersAndReverters; 
```

# msbuild - 使用 Nant 的 msbuild 任务，有没有办法让 msbuild 的颜色起作用？

> ID：10225428
> 
> 赞同：1
> 
> 时间：2012-04-19T09:41:33.190
> 
> 标签：msbuild, nant

标题几乎说明了一切。当我自己运行 msbuild 时，它会在输出中显示很多漂亮的颜色，这有助于突出显示问题所在。我们的流程有很多外部任务，这并没有使流程本身易于包含在 msbuild 中（无论如何都是另一个主题）。

那么，有没有办法将 msbuild 的彩色输出保留在 NANT msbuild 任务中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:46:20.420

不。NAnt 将 MSBuild 输出捕获到文本缓冲区中，MSBuild 检测到它没有输出到控制台并禁用着色。

另外，你真的需要同时使用*MSBuild*和 NAnt 吗？这些工具几乎 100% 重叠，除了 NAnt 不与 Visual Studio 集成。

# objective-c - ARC适用于所有对象？

> ID：10225435
> 
> 赞同：3
> 
> 时间：2012-04-19T09:42:06.170
> 
> 标签：objective-c, ios, memory-management, automatic-ref-counting

在[书中](https://rads.stackoverflow.com/amzn/click/com/143023024X)，我找到了一个句子，告诉我 ARC 只从 Foundation 释放 Object。这是真的？所以如果我有：

```
MySimpleClass *objectFromMySimpleClass = [MySimpleClass alloc] init]; 
```

我应该释放 objectFromMySimpleClass 吗？我怎样才能做到这一点？当我尝试

```
[objectFromMySimpleClass release]; 
```

我在 Xcode 提示中看到非活动的“发布”，然后编译器说我不能这样做，因为 ARC。发生什么了？

和其他事情。当我使用 NSCoping 协议时，我还应该在使用**复制**时释放对象吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T09:55:43.120

`MySimpleClass`继承`NSObject`，因此它是一个基础对象，因此它可以由 ARC 管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:45:42.860

是的，ARC 适用于所有对象，您不能在运行时使用释放和保留。

# java - 如何在java中将大型二进制文件从服务器传输到客户端

> ID：10225444
> 
> 赞同：2
> 
> 时间：2012-04-19T09:42:30.563
> 
> 标签：java

我正在尝试从客户端启动文件下载。我所拥有的只是一个包含服务器端二进制文件的 InputStream。我不知何故需要想办法将它分块转储到 OutputStream 中（我尝试一次写入整个字节数组并遇到 OutOfMemoryException，因为文件超过 100MB）。任何帮助，将不胜感激...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T09:52:25.323

同时进行阅读和写作。

```
import org.apache.commons.fileupload.util.Streams;
import org.apache.commons.io.FileUtils;

        long size = sourceFile.length();
        if (size <= Integer.MAX_VALUE)
            response.setContentLength((int)size);

        InputStream in = FileUtils.openInputStream(sourceFile);
        OutputStream out = response.getOutputStream();
        Streams.copy(in, out, false); 
```

# python - Python GUI 拖放问题

> ID：10225447
> 
> 赞同：1
> 
> 时间：2012-04-19T09:42:36.093
> 
> 标签：python, user-interface

我正在使用的 GUI 有问题。这个想法是有一个信号树列表，并能够将它们拖到图上。最终会有一长串信号和多个绘图等。但是，在看似随机数量的拖放（有时只有一个）之后，代码分段错误。我已经将代码剥离到了最简单的部分，因此它每次都绘制相同的曲线，并且只有一个“信号”可供选择；在这种情况下只是 x^2。

下面我发布了代码及其所需的包。

```
import wx
import random
import scipy
import matplotlib
matplotlib.use('WXAgg')
from matplotlib.backends.backend_wxagg import FigureCanvasWxAgg
from matplotlib.figure import Figure

class MainFrame(wx.Frame):
''' Create the mainframe on which all of the other panels are placed.
'''
    def __init__(self):
        wx.Frame.__init__(self, parent=None, title="GUI", size=(998,800))
        self.SetBackgroundColour('#CCCCCC')
        self.GUIBox = wx.BoxSizer(wx.HORIZONTAL)
        self.P = PlotWindow(self)
        self.DD = DragDrop(self)
        self.GUIBox.Add(self.DD, 0, wx.LEFT | wx.ALIGN_TOP)
        self.GUIBox.Add(self.P, 0, wx.LEFT | wx.ALIGN_TOP)
        self.SetSizer(self.GUIBox)
        return

class PlotWindow(wx.Panel):
    def __init__(self, parent):
        wx.Window.__init__(self, parent)
        self.Figure = Figure()
        self.Figure.set_size_inches(8.56, 9.115)
        self.C = FigureCanvasWxAgg(self, -1, self.Figure)
        self.SP = self.Figure.add_subplot(111)
        self.a = [0,1,2,3,4,5]
        self.b = [0,1,4,9,16,25]
        self.signals = [self.b]

    def rePlot(self):
        self.SP.clear()
        c = scipy.zeros(6)
        for i in range(0, 6, 1):
            c[i] = self.b[i]*random.uniform(0, 2)
        self.SP.plot(self.a,c)
        self.C.draw()

class MyTextDropTarget(wx.TextDropTarget):

    def __init__(self, objt):
        wx.TextDropTarget.__init__(self)
        self.Objt = objt

    def OnDropText(self, x, y, data):
        self.Objt.rePlot()

class DragDrop(wx.Panel):

    def __init__(self, parent):
        wx.Panel.__init__(self, parent, style=wx.BORDER_RAISED)
        self.SetBackgroundColour('#CCCCCC')
        self.tree = wx.TreeCtrl(self, -1, size=(270,700))

        # Add root
        root = self.tree.AddRoot("Signals")
        self.tree.AppendItem(root, "Square")

        dt = MyTextDropTarget(self.GetParent().P)
        self.GetParent().P.SetDropTarget(dt)
        self.Bind(wx.EVT_TREE_BEGIN_DRAG, self.OnDragInit)

        self.VBox = wx.BoxSizer(wx.VERTICAL)
        self.VBox.Add(self.tree, 0)
        self.SetSizer(self.VBox)

    def OnDragInit(self, event):
        text = self.tree.GetItemText(event.GetItem())
        tdo = wx.TextDataObject(text)
        tds = wx.DropSource(self.tree)
        tds.SetData(tdo)
        tds.DoDragDrop(True)

class App(wx.App):
    def OnInit(self):
        self.dis = MainFrame()
        self.dis.Show()
        return True

app = App()
app.MainLoop() 
```

我试图去掉尽可能多的不必要的代码；任何帮助将非常感激！

干杯!

# c++ - C++11 特征检查

> ID：10225451
> 
> 赞同：8
> 
> 时间：2012-04-19T09:42:41.460
> 
> 标签：c++, c++11, language-features, compiler-specific

如何检查单个 C++0x/C++11 语言功能是否存在？我知道 Clang 有一个很好的系统。GCC、Visual Studio 或 Boost 呢？我想一种方法是检测编译器版本并将其与该版本中引入的功能相关联。但这很麻烦。有人已经这样做了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T10:20:03.690

[boost config](http://www.boost.org/libs/config/#config_config_script)带有一个脚本来检查一些但不是所有的 C++11 特性。

它为每个功能生成一个带有宏的配置文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T10:23:32.003

您的构建工具可能会对此有所帮助。

CMake 具有[`try_compile`](http://www.cmake.org/cmake/help/cmake-2-8-docs.html#command%3atry_compile)允许您测试代码示例是否会编译并根据编译结果设置变量的命令。

目前，我一直在使用更常用的支持功能，例如`auto`打字。

您可以经常使用 Boost 来替换缺少的库功能，这可能是几年内更新编译器和库并修复错误的最佳选择。

GCC 的 C++11 功能兼容性列表在这里： http: [//gcc.gnu.org/projects/cxx0x.html](http://gcc.gnu.org/projects/cxx0x.html)

注意警告：

> 重要提示：GCC 对 C++11 的支持仍处于试验阶段。一些特性是基于早期提议实现的，当它们被更新以匹配最终的 C++11 标准时，不会尝试保持向后兼容性。

# jquery - 在 jQuery Mobile 的弹出窗口中打开外部页面

> ID：10225453
> 
> 赞同：6
> 
> 时间：2012-04-19T09:42:45.030
> 
> 标签：jquery, jquery-mobile, popup

我正在使用 jQuery Mobile。实际上我想在弹出窗口中打开一个外部链接。我试过这个。

```
<a href="#" id="dialoglink"  data-rel="dialog">Open Dialog</a>
<script>
$(document).delegate('#dialoglink', 'click', function() {
    $(this).simpledialog({
        'mode' : 'blank',
        'prompt': false,
        'forceInput': false,
        'useModal':true,
        'fullHTML' : 
            'http://www.google.com/'
    })
});
</script> 
```

它正在打开一个弹出窗口，内容是文本[http://www.google.com/](http://www.google.com/)。但我实际上想加载网址。即谷歌索引页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:09:19.373

您可以使用 ajax 请求执行此操作：

```
$.get('http://url.to.load.net',function(data) {
    $(this).simpledialog({
        'mode' : 'blank',
        'prompt': false,
        'forceInput': false,
        'useModal':true,
        'fullHTML' : data
    });  
}); 
```

不过，没有什么可推荐的，用 google.com 之类的整个页面来执行此操作。simpledialog 无法处理此类内容，它会破坏您的标记结构。但是您可以加载小段 HTML，例如列表视图。

# arrays - MIPS - 修订 这个程序实际上做了什么？

> ID：10225455
> 
> 赞同：1
> 
> 时间：2012-04-19T09:42:56.433
> 
> 标签：arrays, assembly, mips

```
 .text
      main:  la    $a0, A #loads address of A into $a0
             li    $t0, 1 #loads 1 into $t0
             sw    $t0, ($a0) #stores word from $a0 into $t0
             li    $t0, 2 #loads 2 into $t0
             sw    $t0, 4($a0)
             li    $t0, 3
             sw    $t0, 8($a0)
             li    $t0, 4
             sw    $t0, 12($a0)

             la    $a1, A
             li    $v0, 1
             lw    $a0, ($a1)
             syscall
             lw    $a0, 4($a1)
             syscall
             lw    $a0, 8($a1)
             syscall
             lw    $a0, 12($a1)
             syscall
             la    $a0, tab
             li    $v0, 4
             syscall      
             li    $v0, 10
             syscall    

            .data
         A: .space 16 #array size 16
       tab: .asciiz "\t" #makes line indentation
#stores 1 - 4 into $t0 
```

从我所见，它将A的地址加载到a0中，然后将'1'加载到$ t0中，然后覆盖？！？$t0，通过将数组存储到其中，然后将 2 加载到 $t0 中，然后我不确定 4 应该做什么（据我所知，没有做任何事情，然后将 $t0 加载到 3 中，然后与'4'相同，不要看不到 8 做了什么，然后将 4 加载到 $t0，然后对 12 执行某些操作，然后将 A 的地址加载到 $a1，并打印它？！？我'我完全迷失了程序的其余部分。程序是正确的，（加载“1234”），但我应该通过了解课堂讲师给出的每个程序来学习 MIPS。这不是作业或任何东西，只是学习MIPS 程序如何工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:50:28.063

程序首先存储从 A 的地址开始的常量 1、2、3、4，然后它只打印这四个字的内容。

指令`sw reg1, offset(reg2)`将寄存器 reg1 的内容存储到 reg2 指向的地址加上指定的可选偏移量。

因此，在您的第一个示例中，`sw $t0, ($a0)`将 $t0 的内容存储在 $a0 指向的地址中，在您的情况下，该地址是标签 A 的地址。

然后它使用 4 的倍数作为偏移量，因为您正在存储字并且每个字恰好占用 4 个字节，因此要将数字 1、2、3、4 存储在连续字中，您必须将 4 添加到每个先前的地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T16:01:13.173

它似乎是一个展开的循环。第一个循环设置数组的内容，第二个循环打印出数组的内容，后跟一个制表符。这是我假设伪代码的样子：

```
function main()
{
  i = 1
  while( i <= 4 )
  {
    A[i-1] = i
    i = i + 1
  }

  i = 1
  while( i <= 4 )
  {
    printToConsole( A[i-1] )
    i = i + 1
  }
  printToConsole( tab )
} 
```

汇编代码时，汇编器可能会展开循环以提高性能。

# php - 如何将英文字符音译成马来文字母？

> ID：10225464
> 
> 赞同：-1
> 
> 时间：2012-04-19T09:43:34.937
> 
> 标签：php

我需要与在文本框中键入的英语单词相对应的马拉雅拉姆语单词

saaaa ->സാആആആആ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:47:52.830

所以你只需要替换字母吗？没有真正的翻译？在那种情况下，我想这会做

```
$english_string = 'abc';

$search = array();
$search[] = 'a';
$search[] = 'b';
$search[] = 'c';

$replace = array();
$replace[] = 'സാ';
$replace[] = 'ആ';
$replace[] = 'സാ';

$malayalam_string = str_replace($search, $replace, $english_string);

echo $malayalam_string //സാആസാ 
```

# java - 如何外部化捆绑包的配置？

> ID：10225467
> 
> 赞同：1
> 
> 时间：2012-04-19T09:43:46.000
> 
> 标签：java, configuration, osgi

我正在开发一个由几个捆绑包组成的 OSGi 程序，这些捆绑包有时在本地 Windows 开发计算机上运行，​​有时在经典 linux 上运行。目前，一些专用于资源连接的包都有自己的配置文件（属性文件），其中包含一些信息，例如访问一些重要文件的路径（在两种环境中都存在）。

但是，由于两个执行环境的路径不同，我必须在编译前手动更改配置，具体取决于我要在哪个环境中运行我的程序。

捆绑包有没有办法引用外部配置文件？一种解决方案可能是为我只生成一次的每个环境创建一个片段，但我将无法轻松更改配置文件，因为它将位于片段的 jar 中。

是否有一些我应该知道的“最佳实践”来解决我的“简单”问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T09:55:05.990

看看 OSGi 的 ConfigurationAdmin [[1]](http://wiki.osgi.org/wiki/Configuration_Admin)、[[2]](http://felix.apache.org/site/apache-felix-config-admin.html) - 这将完全满足您的需求（并且是 OSGi 优雅的另一个示例）。

基本上，您将实现一个[ManagedService](http://www.osgi.org/javadoc/r4v42/org/osgi/service/cm/ManagedService.html)或[ManagedServiceFactory](http://www.osgi.org/javadoc/r4v42/org/osgi/service/cm/ManagedServiceFactory.html)，而 ConfigurationAdmin 服务负责其余的工作。

[与文件安装一起使用的Felix 实现](http://felix.apache.org/site/apache-felix-config-admin.html)的默认设置（参见 Angelo 的评论）将扫描配置文件的目录（文件名是服务 ID 和文件后缀 .cfg）。但是 ConfigurationAdmin 是可插拔的，因此 config 的后端可以是数据库等。

以这种方式将您的配置外部化的好处是您可以将其与应用程序/环境一起保存——因此您的包变得不知道它们的环境。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-20T12:32:13.143

扩展@earcam 的出色建议，我建议通过声明式服务和元类型绑定您的配置。它真的很容易，尤其是使用 Felix 注释。下面是一个使用 JAAS 进行身份验证的服务的简化示例，它具有可配置的 JAAS 领域名称。“ConfigurationPolicy.OPTIONAL”是很棒的部分。如果将其设置为 REQUIRE，则在配置之前不会注册服务。

```
@Component(
        name = "com.example.authprovider",
        label = "Example authentication interceptor",
        description = "Blocks unauthenticated access to REST endpoints",
        specVersion = "1.1",
        metatype = true,
        policy = ConfigurationPolicy.OPTIONAL
)
@Service
@References({
        ...
})
@Properties({
        @Property(name="jaasRealm", value = "default", label="JAAS Realm",
                description = "the JAAS realm to use to find LoginModules to authenticate this login"),
        ...
})
public class Foo implements ... {
    ...
} 
```

如果您采用这种方法并使用像 Apache Karaf 这样的元类型友好容器，那么您将在管理 Web 控制台中免费获得自动生成的配置 UI。

# android - 显示警报对话框时，有什么方法可以停止活动流程？（安卓）

> ID：10225471
> 
> 赞同：0
> 
> 时间：2012-04-19T09:44:00.083
> 
> 标签：android

当我使用 时`AlertDialog`，显示的那一刻我无法停止活动`AlertDialog`。在“pro android”一书中，我找到了一个解决方案，即`android.content.DialogInterface.OnClickListener`使用调用对话框的活动来实现它！但是，它实际上对我不起作用！有人有其他建议吗？欢迎任何评论！

# prolog - Prolog：临时列表存储

> ID：10225477
> 
> 赞同：0
> 
> 时间：2012-04-19T09:44:07.260
> 
> 标签：prolog, prolog-dif

我是 Prolog 的新手，我被困在我正在尝试做的谓词上。它的目的是通过给定 P 的四边形列表 [X,Y,S,P] 进行递归，当四边形具有相同的 P 时，它将其存储在临时列表中。当它遇到一个新的 P 时，它会查看临时列表是否大于长度 2，如果是则将临时列表存储在输出列表中，如果小于 2 则删除四边形，然后再次开始递归新 P.
这是我的代码：

```
 deleteUP(_,[],[],[]).  
  deleteUP(P,[[X,Y,S,P]|Rest],Temp,Output):-
         !,  
         appends([X,Y,S,P],Temp,Temp),  
         deleteUP(P,[Rest],Temp,Output).  

 deleteUP(NextP,[[X,Y,S,P]|Rest],Temp,Output):-
       NextP =\= P,
       listlen(Temp,Z),
       Z > 1, !,
       appends(Temp,Output,Output),
       deleteUP(NextP,[_|Rest],Temp,Output).

 listlen([], 0).
 listlen([_|T],N) :- 
       listlen(T,N1), 
       N is N1 + 1.

 appends([],L,L).
 appends([H|T],L,[H|Result]):-
       appends(T,L,Result). 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:27:09.967

您的问题描述谈到了存储、递归和启动。这是一个非常必要的、程序性的描述。尝试首先关注关系应该描述的内容。实际上，我仍然不明白 2 的最小长度是什么。

考虑使用预定义的`append/3`并`length/2`代替您自己的定义。但实际上，您的示例中不需要两者。

您可能希望使用专用结构`q(X,Y,S,P)`来代替 list `[X,Y,S,P]`。

目标`appends([X,Y,S,P],Temp,Temp)`表明您假设逻辑变量`Temp`可以像命令式语言中的变量一样使用。但这种情况并非如此。默认情况下，SWI 在这里创建了一个非常奇怪的结构，称为“无限树”。暂时忘记这个。

```
?-附加（[X，Y，S，P]，温度，温度）。
温度 = [X、Y、S、P|温度]。

```

SWI 中有一种安全的方法可以避免此类情况并自动检测（某些）此类错误。打开发生检查！

```
?- set_prolog_flag(occurs_check,error)。
真的。

?-附加（[X，Y，S，P]，温度，温度）。
错误：lists:append/3：无法将 _G392 与 [_G395,_G398,_G401,_G404|_G392] 统一：将创建无限树

```

目标`=\=/2`意味着算术不等式，您可能更喜欢`dif/2`。

避免`!`- 在这种情况下不需要。

`length(L, N), N > 1`通常更好地表示为`L = [_,_|_]`。

然而，主要问题是第三和第四个论点应该是什么。你真的需要先澄清这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:54:18.923

Prolog 变量不能被“修改”，因为您正在尝试调用 append：您需要一个新的变量来放置结果。请注意，此代码未经测试...

```
deleteUP(_,[],[],[]).

deleteUP(P,[[X,Y,S,P]|Rest],Temp,Output):-
         !,  
         appends([X,Y,S,P],Temp,Temp1),  
         deleteUP(P, Rest, Temp1,Output). % was deleteUP(P,[Rest],Temp,Output).  

deleteUP(NextP,[[X,Y,S,P]|Rest],Temp,Output1):-
       % NextP =\= P, should be useless given the test in clause above
       listlen(Temp,Z),
       Z > 1, !,  % else ?
       deleteUP(NextP,[_|Rest],Temp,Output),
       appends(Temp,Output,Output1). 
```

# asp.net - WCF 数据服务代理类模板

> ID：10225479
> 
> 赞同：0
> 
> 时间：2012-04-19T09:44:14.723
> 
> 标签：asp.net, wcf, rest, wcf-data-services

我有一个包含许多项目（WPF 控件库、一些业务逻辑等）的 vs2010 解决方案。目前每个库都使用自己的服务参考来访问 WCF 数据服务。我正在尝试编写一个新库，它将对 WCF 数据服务提供某种 DL，我想使用模板编写它 - 所以我不需要为我的所有实体编写相同的函数（~30） . 好吧我无处可去..

我首先添加了一个简单的界面，如下所示：

```
public interface IRepository<T>
{
    IQueryable<T> GetAll();
    T GetSingle(int id);
    IQueryable<T> FindBy(Expression<Func<T, bool>> predicate);
    IQueryable<T> Where(Expression<Func<T, bool>> predicate);
    void Add(T entity);
    void Delete(T entity);
    void Update(T entity);        
} 
```

我正在尝试实现接口，但遇到了我不知道如何解决的问题

1）在实现类中我如何告诉我的上下文我正在查询哪个实体

```
public IQueryable<Region> Where(Expression<Func<T, bool>> predicate)
{   
    return _context.(something general).Where(predicate);
} 
```

2) 即使我提供实体

```
public IQueryable<Region> Where(Expression<Func<T, bool>> predicate)
{   
    return _context.Region.Where(predicate);
} 
```

我遇到了我无法解决的选角问题。

好吧，就是这样。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:05:26.350

我遇到了同样的问题：不可能用开放的泛型类型（顺便说一下，接口也不能）声明 WCF 合同。问题是这个框架不遵守一些基本的良好 OOP 原则，因此，它给有经验的程序员带来了一些挫败感。

有关此问题的详细信息，请参阅[msdn](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.invaliddatacontractexception.aspx)中的示例。

# vector - 当发生非向量中断时，处理器是否会查找向量表？

> ID：10225481
> 
> 赞同：0
> 
> 时间：2012-04-19T09:44:22.667
> 
> 标签：vector, interrupt, interrupt-handling, microprocessors

当发生*非向量*中断时，处理器是否会查找*向量表*？

说起8085，有什么不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T03:04:09.830

**不**，处理器不查找向量表。它在向量中断期间查找表。

# php - 上传到 youtube

> ID：10225483
> 
> 赞同：0
> 
> 时间：2012-04-19T09:44:26.943
> 
> 标签：php, youtube-api

我正在做一个应用程序，在其中我将一些视频上传到 S3（公共模式）。然后我想安排一个将获得 S3 链接的作业，它需要使用一个特定帐户将视频上传到 youtube。

我怎样才能做到这一点？

我使用 PHP 作为语言（用于后台任务处理的 Gearman）。我需要帮助上传到 youtube。是否有一些资源可以让我找到如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:51:07.727

你应该直接去[这里](https://developers.google.com/youtube/2.0/developers_guide_protocol#Uploading_Videos)，检查最适合你需要的东西。我想你应该考虑直接上传。可以使用 cron 作业（Linux 上的 crontab -e）来安排作业。有关 crontab 的更多详细信息，请[点击此处](http://www.gnu.org/software/mcron/manual/html_node/Crontab-file.html)。

# android - 如何从 USB-cable-android 连接的设备访问计算机？

> ID：10225488
> 
> 赞同：2
> 
> 时间：2012-04-19T09:44:47.670
> 
> 标签：android, deployment, usb, device

我正在尝试在 Android 设备上部署和测试我的应用程序，然后通过 USB 电缆连接到我的笔记本电脑。**现在，如何定位部署在笔记本电脑上的 web 应用程序？** 知道我的**wifi 已关闭**并且我无权更改路由器配置以执行一些 IP 端口转发技巧（如果您想建议我使用移动网络，例如 3G，请继续上网并重新登录通过我们的路由器外部 IP 地址 ==> 考虑到我们想要在这里做的事情，这也有点重）

根据android文档，“模拟器”可以使用IP地址 10.0.2.2 访问主机，但没有任何设备......

提前谢谢你们，

# android - 多apk之间的Android通信

> ID：10225495
> 
> 赞同：0
> 
> 时间：2012-04-19T09:45:00.340
> 
> 标签：android

我想创建一个安卓游戏，我想把它分成 3 层。第一层是身份验证层，在 Settings->Accounts & Synch 中可见 CustomAuthenticator，第二层是现有游戏或现有房间的列表，第三层是游戏本身。并且每一层都需要使用 HTTP。问题是 HTTP 处理是否需要在这些层中的每一层中单独处理，或者一个足够多，而其他层将使用它？如果我将项目分成三个 apk，那么使用 RMI 的原因有很多，但我不确定这是否是在 apk 之间进行通信的正确方式。假设我们有带有自定义身份验证的游戏应用程序、有玩家的房间和不同的游戏。像这样的最佳模式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:03:45.417

> 如果我将项目分成三个 apk，那么使用 RMI 的原因有很多，但我不确定这是否是在 apk 之间进行通信的正确方式

如果您认为**用户**会**从 Play 商店下载三个独立的应用程序**只是为了运行您的游戏，那么您就完全没有把握了。

Android 中不存在 RMI。对于应用程序集成的合法案例，有大量支持 Android 的选项：

*   链接活动
*   通过服务进行通信（命令或通过 AIDL 绑定）
*   广播`Intents`和接收器
*   `ContentProvider`

> 假设我们有带有自定义身份验证的游戏应用程序、有玩家的房间和不同的游戏。像这样的最佳模式是什么？

使用一个 APK。

# python - 正则表达式搜索无法终止

> ID：10225497
> 
> 赞同：3
> 
> 时间：2012-04-19T09:45:07.113
> 
> 标签：python, regex

我正在寻找序列中的主题（其中有间隙，这就是为什么正则表达式看起来过于复杂，在模式中的每个符号之后都有一个 -* ）。以下代码不会停止执行

```
import re
line = """MRVKE---TRKNY-QH--------S-----W-------GRGLWSLWRW-------------G---T-------MLLG--ML-M----IS-S--A-A-----E-Q---S--WVTVYYGVPVWREATT-TLFCASDAKAYDTEKH-NVWATHACVPTDPNPQEVQL--NVTENFNMWKNNMVDQMHEDIISLWDQSLKPCVQLTPLCVT-LNC-SD------TINA---TTANNTINA----------------TTT-----TPT-----I----NATT-------------ANKSMEIG---------E---MR----NCSFNIT----NM---G-K-KMK--EYALFYN----LDVV---------------SI-----------------D-------E-----------------DNNNK-------------------------------------------TS--------Y---RLK-SCNTSVI-TQACP-KVSFKPIPIHYCAPAGFAILKCND-KKFNGTGPCGNVSTVQCTHGIKPVVSTQLLLNGSLAE-E-EVVIRSENFTNNVKTIIVQLKNPVMINCTRP-NNNTR-KS-I---HM---GP----GQ-A-F-YAT-GAI---IGDIR-QAHCNI--SE-------------------------------------------K--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------E"""
pattern = "[KR]?-*[KR]?-*[KR]-*[^-]?-*[^-]?-*[KR]-*[^-]-*[^-]-*[^-]?-*[^-]?-*[ILVM]-*[^-]-*[ILVF]"

o = re.search(pattern, line) 
```

该代码适用于其他行和其他主题（例如以下部分）（即在微秒内完成执行）：

```
pattern = "[KR]?-*[KR]?-*[KR]-*[^-]?-*[^-]?-*[KR]-*[^-]-*[^-]-*[^-]?-*[^-]?-*[ILVM]-*[^-]-*"
pattern = "[KR]-*[^-]?-*[^-]?-*[KR]-*[^-]-*[^-]-*[^-]?-*[^-]?-*[ILVM]-*[^-]-*[ILVF]" 
```

如果从行尾移除大间隙，它也可以正常工作。事实上，vim 也无法完成特定的 this 正则表达式搜索的执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:51:57.867

看起来这是在[天真的 RE 匹配器中花费超线性时间的那些 RE 之一，例如 Python 的](http://swtch.com/~rsc/regexp/regexp1.html). 您可以通过将第一个模式重写为类似的东西来显着加快第一个模式

```
r"(?:[KR]-*){1,3}(?:[^-]?-*){2}[KR]-*(?:[^-]-*){2}(?:[^-]?-*){2}[ILVM]-*[^-]-*[ILVF]" 
```

其中`(?:`引入了一个非捕获组。

**编辑**：上面的 RE 并不完全等同于你的；请更正。它的精神是：将`{m,n}`操作用于重复，因为它会减少回溯。

# sql - 如何在日期时间中翻转月份和日期？

> ID：10225502
> 
> 赞同：4
> 
> 时间：2012-04-19T09:45:23.503
> 
> 标签：sql, sql-server, date

如何将“2012-12-01 12:33:00.0”翻转为“ **2012-01-12** 12 :33: **00.0** ”？我试过“select convert(varchar(50), convert(datetime, log_date, 103), 121)”，同时使用了 101 和 103，但仍然无法翻转它。

数据库是 MS SQL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T09:56:07.217

```
DECLARE @date DATETIME
SET DATEFORMAT ydm
SET @date = '2012-12-01 12:33:00.0'
SELECT @date 
```

`SET DATEFORMAT ydm`将为您提供所需格式的结果。

**其他选项**

```
UPDATE Table_Name
SET COLUMN_NAME= convert(varchar(20), convert(Date, @date, 101)) +  convert(varchar(30),convert(time, @date))
WHERE 
```

**或者**

```
select convert(datetime, convert(varchar(100), @date), 20) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:17:43.970

您可以只执行一些字符串操作（注意：未经测试的代码）

```
UPDATE table
SET date=
  LEFT(CONVERT(VARCHAR(50),date,128),4) -- '2012'
  +SUBSTRING(CONVERT(VARCHAR(50),date,128),7,3) -- '-01'
  +SUBSTRING(CONVERT(VARCHAR(50),date,128),4,3) -- '-12'
  +RIGHT(CONVERT(VARCHAR(50),date,128),LEN(CONVERT(VARCHAR(50),date,128))-10) -- ' 12:33:00.0' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-14T20:58:48.897

您可以使用 Format 函数来交换日期和月份，同时保留年份和小时：

```
update MyTable
set [date] = 
FORMAT([date],'yyyy') + '-' +
FORMAT([date],'dd')  + '-' +
FORMAT([date],'MM') + ' ' +
FORMAT([date],'hh:mm:ss')
from MyTable 
```

# sql - SQL中不同列的总和

> ID：10225503
> 
> 赞同：1
> 
> 时间：2012-04-19T09:45:24.643
> 
> 标签：sql

我们有一个包含列的现有表：

```
ItemCode nvarchar
Supplier1Price nvarchar
Supplier2Price nvarchar
Supplier3Price nvarchar
SelectedSupplier int (1, 2 or 3) 
```

该表用于向不同的供应商拉票。我想要做的是从选定的供应商那里获得相同项目的总和。

例子：

```
ItemCode   Supplier1Price  Supplier2Price  Supplier3Price  SelectedSupplier
item-00    100             200             300             1
item-00    200             100             300             2
item-00    200             100             300             2
item-01    200             300             100             3
item-01    200             100             300             2 
```

结果应该是：

```
ItemCode  Total
item-00   300   
item-01   200 
```

我所做的是这样的：

```
select 
    ItemCode, 
    sum(SupplierPrice) as Total
from 
    (select 
        ItemCode,
        case SelectedSupplier
            when 1 then Supplier1Price
            when 2 then Supplier2Price
            when 3 then Supplier3Price
        end) as SupplierPrice
     from CanvassTable)
 group by ItemCode 
```

注意：首先，上面的代码选择所有项目代码和相应的价格（来自选定的供应商）。然后将处理结果以获得每个项目的价格总和。

它已经在工作了，问题是，我使用了子查询，我担心当表数据增长时，查询的性能会很差。我的问题是有什么方法可以在没有子查询的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T09:59:21.897

如果您的查询有效，为什么不这样做：

```
select 
    ItemCode,
    SUM(case SelectedSupplier
        when 1 then Supplier1Price
        when 2 then Supplier2Price
        when 3 then Supplier3Price
    end) as SupplierPrice
from CanvassTable
group by ItemCode 
```

# java - Apache Camel：找不到 xsd 文件异常

> ID：10225505
> 
> 赞同：1
> 
> 时间：2012-04-19T09:45:30.057
> 
> 标签：java, spring, xsd, apache-camel

我有以下 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jaxrs="http://cxf.apache.org/jaxrs"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:cxf="http://cxf.apache.org/core" xmlns:camel="http://camel.apache.org/schema/spring"

    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd 
                           http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd http://www.springframework.org/schema/context 
                           http://www.springframework.org/schema/context/spring-context.xsd http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd 
                           http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring-2.9.0.xsd
 "> 
```

每当我启动我的 Web 应用程序时，它都会给我以下错误：

```
Apr 19, 2012 3:10:59 PM org.springframework.util.xml.SimpleSaxErrorHandler warning
WARNING: Ignored XML validation warning
org.xml.sax.SAXParseException: schema_reference.4: Failed to read schema document 'http://camel.apache.org/schema/spring/camel-spring-2.9.0.xsd', because 1) could not find the document; 2) the document could not be read; 3) the root element of the document is not <xsd:schema>.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.warning(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.reportSchemaErr(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.reportSchemaWarning(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.getSchemaDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.parseSchema(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadSchema(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.findSchemaGrammar(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(Unknown Source)
    at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:93)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4323)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4780)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:139)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:988)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:771)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:139)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:988)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:275)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:139)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:427)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:139)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:649)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:139)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:585)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:415)
Apr 19, 2012 3:10:59 PM org.springframework.web.context.ContextLoader initWebApplicationContext
SEVERE: Context initialization failed
org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 81 in XML document from ServletContext resource [/WEB-INF/Beans.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'camelContext'.
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at ..... 
```

我不明白为什么会这样。此外，如果这是由于某些 Internet 连接问题，为什么我没有收到 cxf xsd 异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:47:41.103

第一个解释不相关，因为 .xsd 存在于此处：

[http://camel.apache.org/schema/spring/camel-spring-2.9.0.xsd](http://camel.apache.org/schema/spring/camel-spring-2.9.0.xsd)

检查您的 XML 文档。它有另一个问题。

发布整个堆栈跟踪是彻底但不必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:59:06.503

XSD 在依赖项中提供。您应该验证您的类路径，您需要有 2.9 版。您还可以使用通用位置来获得可用的位置：

```
http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd 
```

# javascript - 如果用户滚动到底部，则加载 iframe

> ID：10225506
> 
> 赞同：0
> 
> 时间：2012-04-19T09:45:33.593
> 
> 标签：javascript, html, iframe

我正在构建一个 HTML 网站，如果用户几乎滚动到底部，我想在其中加载 iframe。（iframe 包含大量的 JavaScript 大量*跟随我*的小部件，如果直接加载它们会减慢网站速度）

怎么可能呢？

谢谢。乌里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:59:03.103

利用`.scroll()`

像这样：

```
$(window).scroll(function() {   
   if(($(window).scrollTop() + $(window).height()) == $(document).height()) {
       $('div').append('<iframe></iframe>');
   }
});​ 
```

这是一个例子 - [http://jsfiddle.net/vRLsg/](http://jsfiddle.net/vRLsg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:56:03.157

您可以在滚动时计算位置

```
$('body').scroll(function(){
    if ($('body').scrollTop() == $('body').height()){
       loadIframe();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T09:56:11.610

看看这个[jsfiddle](http://jsfiddle.net/gWz3P/) - 我想它可以满足您的需求。

# android - Android - 付款方式

> ID：10225507
> 
> 赞同：1
> 
> 时间：2012-04-19T09:45:33.703
> 
> 标签：android, payment

我已经实现了一个应用程序，我想出售其中的某些物品。我可以使用哪些替代付款方式？在 Android 中为我的应用销售商品的最常见方式是什么？我希望它尽可能简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:56:32.823

可能最好创建一个应用内计费。

[http://developer.android.com/guide/market/billing/billing_admin.html](http://developer.android.com/guide/market/billing/billing_admin.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:59:46.270

您可以使用 eBay for Android 来销售商品。 [http://mobile.ebay.com/android/ebay-on-android](http://mobile.ebay.com/android/ebay-on-android)

# jsf - 当我添加 selectOneMenu （主面）时，JSF 页面不起作用

> ID：10225512
> 
> 赞同：0
> 
> 时间：2012-04-19T09:45:50.730
> 
> 标签：jsf, primefaces, selectonemenu

我有一个名为 Lecturer 的托管 bean。Lecturer managed bean 包括部门之间的关系。我想显示存储在数据库中的所有部门。当我注册讲师时，我需要获得其部门。

我的讲师管理 bean。我有适当的 setter 和 getter 方法。我只是为了澄清而省略它。

```
public class Lecturer 
{

    private String name;
    private String surname;

    private String email;
    private String username;
    private String password;

    private List<Department> departments;

    private LecturerService lecturerService;
    private DepartmentService departmentService;
} 
```

我的 Licturer.xhtml 文件：

```
<h:form>
<f:view>
<p:panelGrid columns="2">  

<f:facet name="header">Lecturer Registration Form</f:facet> 

<h:outputLabel for="name" value="Name :" />  
<p:inputText id="name" value="#{Lecturer.name}" label="Name" required="true" />

<h:outputLabel for="surname" value="Surname :" />  
<p:inputText id="surname" value="#{Lecturer.surname}" label="Surname" required="true" />

<h:outputLabel for="department" value="Department :" /> 

<p:selectOneMenu value="#{Lecturer.departments}" effect="fade" editable="true" var="p" >
<f:selectItem itemLabel="Select One" itemValue="" />
<f:selectItems value="#{Lecturer.departments}" var="lec"
itemLabel="#{lec.name}" itemValue="#{lec.name}"/>
</p:selectOneMenu>

<h:outputLabel for="email" value="Email :" />  
<p:inputText id="email" value="#{Lecturer.email}" label="Email" required="true" />

<h:outputLabel for="username" value="User Name :" />  
<p:inputText id="username" value="#{Lecturer.username}" label="Email" required="true" />

<h:outputLabel for="password" value="Password :" />  
<p:inputText id="password" value="#{Lecturer.password}" label="Password" required="true" />

<f:facet name="footer">

 <p:commandButton type="submit"
                id="lecturer"
                action="#{Lecturer.registerLecturer}"
                value="Register" icon="ui-icon-disk">

                </p:commandButton>

</f:facet>

</p:panelGrid>
</f:view>
</h:form> 
```

我的面孔-config.xml

```
<managed-bean>
        <managed-bean-name>Lecturer</managed-bean-name>
        <managed-bean-class>com.studinfo.controller.Lecturer</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>

        <managed-property>
            <property-name>departmentService</property-name>
            <property-class>com.studinfo.services.DepartmentService</property-class>
            <value>#{DepartmentService}</value>
        </managed-property>

        <managed-property>
            <property-name>lecturerService</property-name>
            <property-class>com.studinfo.services.LecturerService</property-class>
            <value>#{LecturerService}</value>
        </managed-property>
    </managed-bean> 
```

当我删除 selectOneMenu 标签时。我的页面工作正常。

关于解决方案的任何想法？

我必须在字符串和部门类之间添加一个转换器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T09:55:42.437

的`value`属性`p:selectOneMenu`应该保存对单个部门（这是*选定*的部门）的引用，而不是整个列表。您需要在 bean 中为此添加一个字段，例如：

```
private Department selectedDepartment
// getter and setter 
```

然后在您的 facelet 中更改 和 的 value`p:selectOneMenu`属性`f:selectItems`：

```
<p:selectOneMenu value="#{Lecturer.selectedDepartment}" effect="fade" 
                 editable="true" var="p" >
  <f:selectItem itemLabel="Select One" itemValue="" />
  <f:selectItems value="#{Lecturer.departments}" var="lec"
                 itemLabel="#{lec.name}" itemValue="#{lec}"/>
</p:selectOneMenu> 
```

此外，您将需要一个转换器将选定的字符串映射到对象。

# iphone - 从视频创建缩略图 - 提高速度性能 - AVAsset - iPhone

> ID：10225514
> 
> 赞同：7
> 
> 时间：2012-04-19T09:45:59.133
> 
> 标签：iphone, objective-c, performance, video, thumbnails

我正在使用基于以下线程中的代码的代码来生成视频缩略图：

[从 iPhone SDK 中的视频 url 或数据获取缩略图](https://stackoverflow.com/questions/1347562/getting-thumbnail-from-a-video-url-or-data-in-iphone-sdk)

我的代码如下：

```
if (selectionType == kUserSelectedMedia) {

    NSURL * assetURL = [info objectForKey:UIImagePickerControllerReferenceURL];

    AVURLAsset *asset=[[AVURLAsset alloc] initWithURL:assetURL options:nil];
    AVAssetImageGenerator *generator = [[AVAssetImageGenerator alloc] initWithAsset:asset];
    generator.appliesPreferredTrackTransform=TRUE;
    [asset release];
    CMTime thumbTime = CMTimeMakeWithSeconds(0,30);

    //NSLog(@"Starting Async Queue");

    AVAssetImageGeneratorCompletionHandler handler = ^(CMTime requestedTime, CGImageRef im, CMTime actualTime, AVAssetImageGeneratorResult result, NSError *error){
        if (result != AVAssetImageGeneratorSucceeded) {
            NSLog(@"couldn't generate thumbnail, error:%@", error);
        }

        //NSLog(@"Updating UI");

        selectMediaButton.hidden = YES;
        selectedMedia.hidden = NO;
        cancelMediaChoiceButton.hidden = NO;
        whiteBackgroundMedia.hidden = NO;

        //Convert CGImage thumbnail to UIImage.
        UIImage * thumbnail = [UIImage imageWithCGImage:im];

        int checkSizeW = thumbnail.size.width;
        int checkSizeH = thumbnail.size.height;
        NSLog(@"Image width is %d", checkSizeW);
        NSLog(@"Image height is %d", checkSizeH);

        if (checkSizeW >=checkSizeH) {
            //This is a landscape image or video.
            NSLog(@"This is a landscape image - will resize automatically");
        }

        if (checkSizeH >=checkSizeW) {
            //This is a portrait image or video.
            selectedIntroHeight = thumbnail.size.height;
        }

        //Set the image once resized.
        selectedMedia.image = thumbnail;

        //Set out confirm button BOOL to YES and check if we need to display confirm button.
        mediaReady = YES;
        [self checkIfConfirmButtonShouldBeDisplayed];

        //[button setImage:[UIImage imageWithCGImage:im] forState:UIControlStateNormal];
        //thumbImg=[[UIImage imageWithCGImage:im] retain];
        [generator release];
    };

    CGSize maxSize = CGSizeMake(320, 180);
    generator.maximumSize = maxSize;
    [generator generateCGImagesAsynchronouslyForTimes:[NSArray arrayWithObject:[NSValue valueWithCMTime:thumbTime]] completionHandler:handler];
}

} 
```

问题是生成缩略图图像有大约 5-10 秒的延迟。无论如何，我可以提高此代码的速度并更快地生成缩略图吗？

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-12-06T18:09:31.610

这是一个通用代码，您应该只传递媒体文件的路径并将比率设置在 0 和 1.0 之间。

```
+ (UIImage*)previewFromFileAtPath:(NSString*)path ratio:(CGFloat)ratio
{
    AVAsset *asset = [AVURLAsset assetWithURL:[NSURL fileURLWithPath:path]];
    AVAssetImageGenerator *imageGenerator = [[AVAssetImageGenerator alloc]initWithAsset:asset];
    CMTime duration = asset.duration;
    CGFloat durationInSeconds = duration.value / duration.timescale;
    CMTime time = CMTimeMakeWithSeconds(durationInSeconds * ratio, (int)duration.value);
    CGImageRef imageRef = [imageGenerator copyCGImageAtTime:time actualTime:NULL error:NULL];
    UIImage *thumbnail = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);

    return thumbnail;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-08T21:28:25.320

快速解决方案：

```
func previewImageForLocalVideo(url:NSURL) -> UIImage?
{
    let asset = AVAsset(URL: url)
    let imageGenerator = AVAssetImageGenerator(asset: asset)
    imageGenerator.appliesPreferredTrackTransform = true

    var time = asset.duration
    //If possible - take not the first frame (it could be completely black or white on camara's videos)
    time.value = min(time.value, 2)

    do {
        let imageRef = try imageGenerator.copyCGImageAtTime(time, actualTime: nil)
        return UIImage(CGImage: imageRef)
    }
    catch let error as NSError
    {
        print("Image generation failed with error \(error)")
        return nil
    }
} 
```

# javascript - 如何在 ExtJS 中禁用分组网格中的折叠？

> ID：10225516
> 
> 赞同：0
> 
> 时间：2012-04-19T09:46:09.290
> 
> 标签：javascript, extjs

一切都在主题中。我有一个分组网格，例如[这个 Sencha 示例](http://dev.sencha.com/deploy/ext-4.0.7-gpl/examples/grid/groupgrid.html)。我想删除 [+][-] 符号以禁用折叠。

我以为分组功能会有一些配置，比如“可折叠：假”，但没有。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-24T20:44:55.783

使用配置禁用折叠配置属性。从煎茶：

> 可折叠：布尔值
> 
> 设置为 false 以禁用 UI 中的折叠组。
> 
> 当关联的存储被缓冲时，这设置为 false。
> 
> 默认为：真

*来源：[Sencha`collapsible`配置](http://docs.sencha.com/extjs/4.2.1/#!/api/Ext.grid.feature.Grouping-cfg-collapsible)文档。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T18:23:56.820

非常好的塞尔格，谢谢。

覆盖更容易的是：

```
... 
features: [
    Ext.create('Ext.grid.feature.Grouping',{ 
        onGroupClick: function() {} /* do nothing! */ 
    })
]
... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T10:08:56.153

您可以继承 Ext.grid.feature.Grouping 并重新定义 onGroupClick 方法。这不好，但目前最简单的方法：

```
Ext.define( 'My.grid.feature.RightsGrouping', {
extend: 'Ext.grid.feature.Grouping',

   onGroupClick: function(view, group, idx, foo, e) {
   }
}); 
```

此外，您还必须编辑 CSS 以删除折叠符号并更改光标指针：

```
 .x-grid-group-hd .x-grid-cell-inner { cursor: default; }
  .x-grid-group-title { background-image: none; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-19T11:13:06.510

这在 4.2.1 中不起作用。

想出一个解决方案对我来说似乎很有趣

```
...
groupcollapse: 
{
         fn: me.onGroupingGroupcollapse,
         scope: me
}
...
...

onGroupingGroupcollapse: function(view, node, group, eOpts) 
{
        Ext.getCmp('gridCenters').view.features[0].expand(node.name,true);
}
... 
```

# c++ - C++（不带 MFC）检查 ini 读取值是否为空

> ID：10225519
> 
> 赞同：0
> 
> 时间：2012-04-19T09:46:25.143
> 
> 标签：c++, ini

我在让我的程序检查 .ini 文件是否为空或是否包含网页路径时遇到了一些麻烦。

我的 .ini 文件：

```
[WEB]
Location = 
```

以下是我的代码。它不会进入 if 语句并显示对话框：

```
GetPrivateProfileStringA("WEBSERVICES", "Location", "none set", webLocation, sizeof(webLocation), pathStr);

    if (webLocation == "1"){
        DialogBox(hInst, MAKEINTRESOURCE(IDD_ABOUTBOX), hWnd, About);
        EnableMenuItem(hmenu, ID_WEBSERVICES_RUN, MF_GRAYED);
        } 
```

对此问题的任何帮助将不胜感激。

问候-丹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:48:18.060

`if`条件不正确，用于比较[`strcmp()`](http://www.cplusplus.com/reference/clibrary/cstring/strcmp/)数组`char`：

```
if (0 == strcmp(webLocation, "1")){ 
```

这个：

```
if (webLocation == "1"){ 
```

将 的地址`webLocation`与字符串字面量的地址进行比较，该地址`"1"`总是`false`（在这种情况下）。

*请注意，部分名称`WEB`与调用中指定的名称不匹配`GetPrivateProfileStringA()`。*

# java - 打印排序步骤

> ID：10225526
> 
> 赞同：0
> 
> 时间：2012-04-19T09:46:51.103
> 
> 标签：java, sorting

我想知道是否可以打印出每一步。这是我的代码：如您所见，我传入一个链表，将 i 的值复制到一个数组中，以可能使我的排序工作更轻松，然后将排序后的数组写入一个单独的文本文件。

```
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;

public class Insertion 
{
    public void Sort (LinkedList listIn, int size) throws Exception
    {
        String[] insArray = new String[size] ;
        String textContent = null ;
        File outputFile ;

        //copy the list values in the array
        for (int i = 0 ; i < size ; i++)
        {
             insArray [i] = listIn.get(i).printNode();
        }

        Stopwatch timer = new Stopwatch().start(); 

        //Insertion Sort
        for (int i = 1; i < size; i++)
            for (int j = i; j > 0; j--)
            {
                if (insArray[j-1].compareToIgnoreCase(insArray[j]) > 0)
                {
                    replace(insArray, j, j-1);

                }
            }

         timer.stop();   

         do
            {
                outputFile = new File("[Insertion] Sorted Entries.txt") ;

                    if(!outputFile.exists())
                    {
                        outputFile.createNewFile ();                    
                        System.out.println("Sorted file created.txt");
                        System.out.println("");
                    }
                    else
                    {
                        System.out.println("File Updated.");
                    }

            }while (!outputFile.exists()) ;

        try
            {

            //the "true" argument sets the FileWriter to append mode so that is does not overwrite the first line
                BufferedWriter out = new BufferedWriter(new FileWriter("[Insertion] Sorted Entries.txt", true));
                for (int i = 0 ; i < size ; i++)
                {
                    textContent = (insArray[i]) ;
                    out.write(textContent) ;
                    out.newLine() ;
                }

                out.close() ;
            }catch(IOException e)
            {
                System.out.println("Could not write to file") ;
                System.exit(0) ;
            }

         System.out.println("Time to execute: " + timer.getElapsedTime() + "ns"); 
    }

    private static void replace(Comparable[] array, int i, int j) 
    {
        Comparable swap = array[i];
        array[i] = array[j];
        array[j] = swap;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:06:43.337

好吧，对于疲倦的眼睛......这样的东西会有帮助吗？

```
 for (int i = 1; i < size; i++)
        for (int j = i; j > 0; j--)
        {
            final int cmp = insArray[j-1].compareToIgnoreCase(insArray[j]);
            System.out.format("Comparing %s at %d to %s at %d, result %d\n",
               insArray[j-1], j-1, insArray[j], j, cmp);
            if (cmp > 0) replace(insArray, j, j-1);
        } 
```

# java - 将图像放在 webview 中并适合其宽度

> ID：10225532
> 
> 赞同：10
> 
> 时间：2012-04-19T09:47:12.117
> 
> 标签：java, android, webview

我想使用 WebView 来显示可能很大的图像（以便抓住它的内存管理）。对于测试，我在 WebView 中加载此代码

```
<head></head>
<body>
    <img alt="test" src="file:///android_asset/cute-cat-sleeping.jpg">
</body> 
```

问题是，如果我“按原样”将其加载到网络中。WebView 只允许缩小，直到图像的第一维适合屏幕。在此示例中，图像高度完全显示在 WebView 中，然后不再允许缩放：

![没有缩放没有 setUseWideViewPort](../Images/38c3afe6dcddbdaa5258c33013a95f7b.png)

如您所见，此模式不允许正确显示全局图像，尽管缩放图像时右下角的行为是正确的，如您在此处看到的

![正确的缩放显示](../Images/8761425d7ef3e7e90a16b62141ba355b.png)

所以我尝试了**(WebView).getSettings().setUseWideViewPort(true)**，结果我可以缩小超过图像的宽度

![使用 setUseWideViewPort](../Images/2c7e1f0eddc931054728e541a0ff6ae1.png)

并且右下角的缩放行为不正确：

![使用 setUseWideViewPort 进行缩放](../Images/31cc6e64620905c2c3e1aeb7c5bb638f.png)

总结：我希望最大缩小可能是 imageWidth=webview 宽度和缩放行为，如第二张图像：

![在此处输入图像描述](../Images/0ba741f34ff54997616fab94cc5b78c1.png)

完整和/或有用的答案将被赏金

编辑：为 Vinayak.B 开放赏金

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-19T10:58:12.000

[使用视口元数据](http://developer.android.com/guide/webapps/targeting.html#Metadata)可以帮助您做到这一点

视口是绘制网页的区域。尽管视口的可见区域与屏幕的大小相匹配，但视口有自己的尺寸，这些尺寸决定了网页可用的像素数

也试试下面

```
WebSettings settings = webView.getSettings();
settings.setUseWideViewPort(true);
settings.setLoadWithOverviewMode(true); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-19T10:18:50.537

在 Webview 中加载 Html 文件并将图像放入资产文件夹并使用 Html 读取该图像文件。

```
<htm>
  <table>
   <tr>
         <td>
           <img src="cat.gif" width="100%" alt="Hello">
         </td>
   </tr>
</table>
</html> 
```

现在在 Webview 中加载该 Html 文件

```
webview.loadUrl("file:///android_asset/abc.html"); 
```

或者另一种方式

如果您使用 LinearLayout，则可以采用可以是颜色或资源的背景参数。

所以在 main.xml 文件中包含 webview。你只是添加了一个

```
android:background="@+drawable/backgroundmain" 
```

并使用

```
 web.setBackgroundColor(0); 
```

使 webview 透明以查看背后的背景图像。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-10T08:25:22.130

这是解决方案在 HTML 代码中将 img 标签宽度设置为 100%，然后使用`loadDataWithBaseURL(null, htnlString, "text/html", "UTF-8", null);`方法将其加载到您的 webview 中

试试这个代码

```
String htnlString = "<!DOCTYPE html><html><body style = \"text-align:center\"><img src=\"http://shiaislamicbooks.com/books_snaps/UR335/1.jpg\" alt=\"pageNo\" width=\"100%\"></body></html>";
yourWebView.loadDataWithBaseURL(null, htnlString, "text/html", "UTF-8", null); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-02T12:59:53.887

编辑您的 Web 视图：

```
WebSettings settings = webview.getSettings();
settings.setJavaScriptEnabled(true);
settings.setUseWideViewPort(true);
settings.setLoadWithOverviewMode(true); 
```

# android - Android中复杂的Json解析

> ID：10225533
> 
> 赞同：0
> 
> 时间：2012-04-19T09:47:18.647
> 
> 标签：android, json, parsing

在我的应用程序中，我想解析格式为的 json 响应

```
{"quote":[{"orderId":"3209926"},{"totalpages":1}]} 
```

下面是我所做的代码，但问题是如何获得“totalpages”值？

```
 try {
JSONObject jObject = new JSONObject(result);
JSONArray jArray = jObject.getJSONArray("quote");
for (int i = 0; i < jArray.length(); i++)
                 {
        JSONObject offerObject = jArray.getJSONObject(i);
        current.orderId = offerObject.getInt("orderId"); 
```

我使用时显示错误

```
 current.totalpage= offerObject.getInt("totalpages"); 
```

有人知道如何解析吗？提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T09:52:28.510

请注意，如果对象不包含请求的键，则与throw的[`getInt()`](http://www.json.org/javadoc/org/json/JSONObject.html#getInt%28java.lang.String%29)其他 get 函数一样。因此，在您请求密钥之前，您应该使用来确定对象是否包含该密钥。[`JSONObject`](http://www.json.org/javadoc/org/json/JSONObject.html)[`JSONException`](http://www.json.org/javadoc/org/json/JSONException.html)[`hasKey()`](http://www.json.org/javadoc/org/json/JSONObject.html#has%28java.lang.String%29)

例如，在 for 循环中，您可以执行以下操作：

```
JSONObject offerObject = jArray.getJSONObject(i);
if(offerObject.has("orderId") {
    current.orderId = offerObject.getInt("orderId");
}
if(offerObject.has("totalpages") {
    current.totalpage= offerObject.getInt("totalpages");
} 
```

您还可以在循环之后添加标志和检查，以确保 JSON 数据中同时存在 orderId 和 totalpages。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:53:40.387

我不知道为什么你的 json 有这种结构。但是，如果您想解析它，那么您将不得不使用[has](http://developer.android.com/reference/org/json/JSONObject.html#has%28java.lang.String%29)函数执行以下操作。

```
for (int i = 0; i < jArray.length(); i++) {
        JSONObject offerObject = jArray.getJSONObject(i);
        if(offerObject.has("orderId")) {
          current.orderId = offerObject.getInt("orderId");
        } else if(offerObject.has("totalpages")) {
          current.totalpage= offerObject.getInt("totalpages");
        }
} 
```

# android - 无法为 Android 运行位图示例代码

> ID：10225536
> 
> 赞同：2
> 
> 时间：2012-04-19T09:47:33.297
> 
> 标签：android

我正在尝试从以下位置运行示例：http: [//developer.android.com/training/displaying-bitmaps/display-bitmap.html](http://developer.android.com/training/displaying-bitmaps/display-bitmap.html)

但是我遇到了很多错误，例如：

说明 资源路径 位置 类型

```
BuildConfig cannot be resolved to a variable    ImageGridFragment.java  /ImageGridActivity/src/com/example/android/bitmapfun/ui line 124    Java Problem 
```

说明 资源路径 位置 类型

```
SuppressLint cannot be resolved to a type   Utils.java  /ImageGridActivity/src/com/example/android/bitmapfun/util   line 99 Java Problem 
```

我通过谷歌运行，但什么也得不到。将android构建目标调整为`4.0.3 (15)`但仍然没有线索。有人成功运行此示例吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:27:24.083

这是我的解决方案： 1.创建一个新类：

```
package com.example.android.bitmapfun;

public class BuildConfig {
public static final boolean DEBUG = true;
} 
```

2.注释包含“SuppressLint”的行：

```
//import android.annotation.SuppressLint;
//    @SuppressLint("NewApi") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T10:04:30.870

Android 开发者工具 r17 为 Eclipse 带来了一个在构建时自动构建类的功能，称为 BuildConfig，其中包含一个常量，应用程序开发人员可以使用该常量来感知构建是开发构建还是生产构建。此功能似乎在 Eclipse 集成支持中，因此在使用 IntelliJ 时，此有用功能不可用

如果您的程序编译成功，则在带有 R.java 的 gen 文件夹中应该有 BuildConfig.java。

```
/** Automatically generated file. DO NOT MODIFY */
package com.example.android.bitmapfun;

public final class BuildConfig {
    public final static boolean DEBUG = true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T10:00:24.760

清理您的项目并尝试再次启动它。

它对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T10:26:25.697

对我来说，它也没有直接运行导入到 Eclipse。只是我发表评论，哪些行显示错误，然后它对我来说工作正常。可能这不是一个正确的答案，但我们可以通过运行代码来查看应用程序功能，所以我确实喜欢这样。

# java - Java的集合框架中接口方法的实现发生在哪里？

> ID：10225537
> 
> 赞同：1
> 
> 时间：2012-04-19T09:47:34.233
> 
> 标签：java, collections, interface

虽然我对 Java 不是很陌生，但以下问题让我非常困惑，以至于我无法克服这个问题。我在网上搜索了很多，也找到了一些答案，但它们并不完全令人满意。任何人都可以解决我的疑问

我的困惑是：

```
 1) Vector v = new Vector();  
    v.addElement("A");  
    ........  
    ........  
    Iterator iter = v.iterator(); 
```

Q1：**迭代器**是一个接口，我们不能实例化或创建一个接口的对象。那么我们应该在这里称之为“***迭代***器”，它是什么？

Q1.1：Iterator 的所有方法（**例如 next()**）都被“ **iter** ”调用。这些方法在哪里定义？如果这些方法是在 Vector 类的特定内部类中定义的（正如我在网上找到的），那么 iterator() 方法返回什么？我们不能直接通过对象 'v' 调用这些方法吗？

Q1.2：根据Javadoc：Vector实现了{Cloneable、Collection、List、RandomAccess、Serializable}
这些都没有实现Iterator。那么Vector是如何实现Iterator的呢？

```
 2) In the declaration:  
    List list = new ArrayList(); 
```

Q1：List 是一个接口，ArrayList 是一个类。所以 new ArrayList() 创建了一个 ArrayList 的实例。
这个实例如何应用于“列表”，它又是什么？

谢谢.....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T09:49:47.330

Re 1)`Iterator`确实通常被实现为相应集合类的私有内部类。这就是为什么你看不到实际的实现类，只有接口。这很好，因为它的实现细节不是客户关心的。您可以在例如调试器中检查它的真实类型，或者在`Vector`与您的 JDK 安装捆绑在一起的源代码中查找它。

Vector 不实现`Iterator`自身 - 它仅从其`iterator`方法返回上面提到的内部类的实例。这个内部类实例有一个对`Vector`创建它的实例的引用，并且可以看到它的内部结构，这就是它可以遍历它的元素的原因。这就是迭代器模式有用的原因：它允许您遍历许多不同的集合（或实际上是`Iterable`s），而无需处理它们的实现细节。

Re 2）你`list`的正是它的样子：`ArrayList`类的一个实例。后者实现了`List`接口，因此 each`ArrayList`是一个`List`.

```
List list = new ArrayList(); 
```

是成语“接口程序，而不是实现程序”的一个例子。由于`list`上面声明的类型是`List`，您可以像使用其他任何类型一样使用它，`List`并且您的后续代码不依赖于它的实际实现。因此，如果后来发现`ArrayList`使用 a`LinkedList`或 a代替 a 会更好`CopyOnWriteArrayList`，您只需要更改上面的一行代码，其余代码仍然可以正常工作。而如果你声明`list`为

```
ArrayList list = new ArrayList(); 
```

后来意识到它的类型应该改变，你至少需要使用所有的代码，`list`并在提到它的地方相应地改变它的类型。此外，某些代码甚至可能使用特定于 的方法`ArrayList`，这些方法在其他实现类中不可用或工作方式不同，从而使更改成本更高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:00:11.310

Q1）您可以创建一个实现接口的实例。`iter`是对必须实现的对象的引用`Iterator`

Q1.1) 它们被实现为嵌套类。您应该能够在源代码中看到它。

iterator() 返回对迭代器的引用。

对象`v`没有实现迭代器。

Q1.2)

> 这些都没有实现迭代器。

这就是为什么你不能调用迭代器的任何方法的原因。

> 那么Vector如何实现Iterator

它没有。AbstractList 有一个实现 Iterator 的嵌套类

Q1）再次？

`list`是对一个对象的引用，该对象必须实现 ArrayList 所做的 List（或 null）

顺便说一句：除非你必须，否则我不会使用 Vector，而且我会在示例中使用泛型（它们已经存在 8 年了；）

# javascript - 加快了缓慢的 jQuery Mobile 页面转换 - 为什么？

> ID：10225542
> 
> 赞同：1
> 
> 时间：2012-04-19T09:47:49.013
> 
> 标签：javascript, jquery-mobile, cordova, jquery

背景：我有一个 jQuery 移动应用程序（单个 .htm，多 jqm 页面），其中一个页面包含一个列表视图，其中包含相当多的列表项（例如 300-500 个）。我在这里测试性能的界限，所以目前我的自定义“分页”将使用 CSS 一次隐藏除 25 个项目之外的所有项目。该应用程序使用 PhoneGap 部署到设备。

所以，对于我的问题。

我发现，当我使用下面的代码时，单击列表中的项目时，导航到列表项链接到的页面在设备上非常缓慢。这会处理点击，从列表项中提取一个 id 并将其存储，然后允许点击执行页面导航：

```
 $('#largeListView').on('vclick', 'a[href="#subView"]', function (e) {

        theSubView.setId($(this).data("id"));
    }); 
```

但是，下面的代码要快得多。它还存储 id，但随后阻止单击导致导航并手动更改页面：

```
 $('#largeListView').on('vclick', 'a[href="#subView"]', function (e) {

        theSubView.setId($(this).data("id"));

        e.preventDefault();
        $.mobile.changePage('#subView');
    }); 
```

更快的解决方案的唯一缺点（据我所知）是该项目不显示任何点击发生的 UI 反馈。

有谁知道为什么我在这里获得了巨大的速度提升，以及是否有办法加快选项 1 的速度？

我不喜欢以这种方式规避设计，如果我能获得良好的性能，我更愿意使用选项 1。

谢谢！

克里斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:04:19.780

只是一个猜测，但可能发生这种情况是因为默认浏览器行为会触发自定义事件并调用一些滚动机制，而 $.mobile 调用避免了这种开销......

我不认为你可以那么容易地改进它，但也许尝试使用一个小的延迟来异步执行这个

```
$('#largeListView').on('vclick', 'a[href="#subView"]', function (e) {
  var id = $(this).data("id");
  setTimeout(function() {
    theSubView.setId(id);
  }, 0);
}); 
```

# actionscript-3 - 处理大量服务器数据

> ID：10225544
> 
> 赞同：0
> 
> 时间：2012-04-19T09:48:03.990
> 
> 标签：actionscript-3, apache-flex, blazeds

我正在使用带有 BlazeDS 的 Flex 3 与 Java 层交互并获取数据。我一次获得超过 10000 行数据以显示在我的数据网格中。我一次显示 200 个并使用它为应用程序分页。（每当我调用下一个按钮链接时，都会发生服务器调用并获取下一个 200 数据）

我想知道是否有任何其他技术我们可以使用 flex 端来缓冲 10000 个数据并显示所有内容，而无需每次都调用服务器。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:11:04.547

您可以在 Flex 应用程序中放置一个中间层，该层可以保存其中的所有数据，然后对其执行分页。

1.  获取所有数据
2.  将其存储在 ArrayCollection（或 ArrayList、Array 或其他适合您需要的）中
3.  创建一个从中检索所需数据的方法，例如：

    ```
    retrieveData(offset:int, limit:int):ArrayCollection 
    ```

    它应该检索从**offset**开始并在**offset + limit**结束的数据。

4.  调用`retrieveData(500, 20);`应返回从位置 500 开始的 20 个项目。

希望有帮助。

# css - CSS：不包括行为

> ID：10225550
> 
> 赞同：0
> 
> 时间：2012-04-19T09:48:31.650
> 
> 标签：css, behavior, css3pie

我正在尝试使用[CSS3 PIE](http://css3pie.com/)在旧版浏览器中呈现一些 CSS3 样式。我正在使用 wordpress 并且已经实现了它（我已经把它从一个 ie 条件中取出，所以我可以在 firebug 中测试它）：

```
<style type="text/css">
        #breadcrumbs,
        #breadcrumbs ul#parent,
        #breadcrumbs ul#parent li ul,
        #breadcrumbs ul#parent li ul li,
        #searchform,
        #searchform #input, 
        #searchform #submit {behavior: url("<?php echo get_template_directory_uri();?>/PIE.htc");}</style> 
```

这输出：

```
<style type="text/css">
        #breadcrumbs,
        #breadcrumbs ul#parent,
        #breadcrumbs ul#parent li ul,
        #breadcrumbs ul#parent li ul li,
        #searchform,
        #searchform #input, 
        #searchform #submit {behavior: url("http://rcnhca.org.uk/sites/first_steps/wp-content/themes/megaamazing/PIE.htc");}</style> 
```

[http://rcnhca.org.uk/sites/first_steps/wp-content/themes/megaamazing/PIE.htc](http://rcnhca.org.uk/sites/first_steps/wp-content/themes/megaamazing/PIE.htc)在浏览器中正确解析，但是文件没有加载，并且没有从 firebug 网络面板请求它。

有谁知道发生了什么？可以在[http://rcnhca.org.uk/sites/first_steps/找到一个活生生的例子](http://rcnhca.org.uk/sites/first_steps/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:56:24.010

我不熟悉这个，但我希望这会对你有所帮助

样式类型="文本/css">

```
#breadcrumbs,
#breadcrumbs ul#parent,
#breadcrumbs ul#parent li ul,
#breadcrumbs ul#parent li ul li,
#searchform,
#searchform #input, 
#searchform #submit {behavior: url("http://rcnhca.org.uk/sites/first_steps/wp-content/themes/megaamazing/PIE.htc");}</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:03:19.857

我认为您必须指定服务器（目录）的路径，而不是 URL。例如，`/var/www/myproject/path/to/my/PIE.htc`。

# sql - 查询 SQL 数据库时出现 EOF 和 BOF 错误

> ID：10225551
> 
> 赞同：7
> 
> 时间：2012-04-19T09:48:33.363
> 
> 标签：sql, vbscript

我正在尝试从 vbs 查询 SQL 数据库，但是当没有找到记录时出现错误

> ADODB.Field : BOF 或 EOF 为 True，或者当前记录已被删除。请求的操作需要当前记录。

我想我需要使用 IF NOT 语句来捕获是否找不到记录，但我不知道它需要去哪里。

```
Do Until objFile.AtEndofStream
    strAppName = objFile.ReadLine

    ConnString="DRIVER={SQL Server};SERVER=aardvark002;UID=***;PWD=***;DATABASE=DEW_Users"
    SQL = "USE Win7AppData SELECT " & Chr(34) & strCountry & Chr(34) & " FROM AppsByCountry WHERE Application = '" & strAppName & "'"

    Set Connection = CreateObject("ADODB.Connection")
    Set Recordset = CreateObject("ADODB.Recordset")
    Connection.Open ConnString
    Recordset.Open SQL,Connection
    strApproval = Recordset(strCountry)
    If StrApproval = "YES" Then
        strApproval = "Approved"
    Else
        strApproval = "Denied"
    End If
    objExcel.Cells(intRow, 1).Value = strAppname 
    objExcel.Cells(intRow, 2).Value = strCountry
    objExcel.Cells(intRow, 3).Value = strApproval
    intRow = intRow + 1
Loop 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T09:52:51.067

我的 VBScript 有点生疏，但你应该能够在 Recordset 上使用 .EOF 来检查它是否在结尾：

```
Recordset.Open SQL,Connection
If Recordset.EOF = false Then
    ' have some rows, do what you want with them
End If 
```

[W3Schools 参考](http://www.w3schools.com/ado/prop_rs_bofeof.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-03T17:15:21.863

我正在检查`Recodset.EOF`and`Recordset.BOF`以确保两者都是 False，但每次我收到提到的错误。这花了我几个小时，但我终于意识到，如果你调用and`Recordset.Fields.count`被改为.`EOF``BOF``True`

我希望这会很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T23:38:55.980

如果您有多个记录，您也可能有另一个错误，那么如果您不想以无限循环结束，则需要移动记录指针，另一方面，我还缩短了您的代码如果您不打算再次使用它，需要关闭您的连接。

```
ConnString="DRIVER={SQL  Server};SERVER=aardvark002;UID=***;PWD=***;DATABASE=DEW_Users"
Set Connection = CreateObject("ADODB.Connection")
Connection.Open ConnString
Do Until objFile.AtEndofStream
  strAppName = objFile.ReadLine
  SQL = "USE Win7AppData SELECT " & Chr(34) & strCountry & Chr(34) & " FROM AppsByCountry WHERE Application = '" & strAppName & "'"
  Set Recordset = Connection.Execute(SQL)
  Do While not Recordset.EOF 
    strApproval = Recordset(strCountry)
    If StrApproval = "YES" Then
      strApproval = "Approved"
    Else
      strApproval = "Denied"
    End If
    objExcel.Cells(intRow, 1).Value = strAppname 
    objExcel.Cells(intRow, 2).Value = strCountry
    objExcel.Cells(intRow, 3).Value = strApproval
    intRow = intRow + 1
    Recordset.MoveNext
  End If
Loop
Connection.Close
Set Connection = nothing 
```

# jmeter - 基于 Java 的 ERP 应用程序的 Jmeter 兼容性

> ID：10225555
> 
> 赞同：0
> 
> 时间：2012-04-19T09:48:54.093
> 
> 标签：jmeter

我们需要对基于 Java 的 ERP 应用程序执行负载测试，并且我们正在考虑使用 JMeter。是否可以一次测试多个屏幕，因为第一个屏幕的输出是第二个屏幕的输入，请帮助我们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:20:15.730

如果你想复制用户导航，我相信你应该记录两个或更多不同的导航场景，然后简单地并行运行它们。有关如何记录导航的说明，请阅读[此文档](http://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf)。
另一方面，如果您的意思是使用请求的结果作为后续请求的输入，请查看[此处](http://jmeter.512774.n5.nabble.com/can-I-use-a-test-result-as-an-input-in-another-test-td3214281.html)。

# jquery - jquery 不包含在捆绑中

> ID：10225559
> 
> 赞同：5
> 
> 时间：2012-04-19T09:49:12.657
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4

我对我在项目中遇到的 jquery 的一个小问题感到困惑。该项目是 Visual Studio 11 中的 MVC4 站点。

问题是 jQuery 不包含在捆绑中，并且在我更新到 1.7.2 之前它似乎一直在工作，但不能确定。

我可以在捆绑文件的顶部看到 jQuery 文件的注释，但找不到它的任何代码。不过，似乎包括了所有其他文件（我自己的脚本和 jquery ui 文件）。

我已经尝试过捆绑过滤器并创建自己的捆绑包，但似乎没有任何效果。

我真的很感激任何帮助，因为当页面加载时，所有 java 脚本都会因为找不到函数而崩溃。如果我只是正常包含 java 脚本文件，这确实有效。

**编辑：**

全球.asax：

```
protected void Application_Start()
{
    BundleTable.Bundles.EnableDefaultBundles();
} 
```

_Layout.cshtml：

```
<script src="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Scripts/js")"></script> 
```

**更新1：**

我在 jQuery 文件中添加了一些代码，捆绑的文件在顶部包含了这些代码。

```
function Test(){ } 
```

然后改成这个了，这次没有代码了。

```
(function Test(){  }) 
```

奇怪的是，其他 jQuery 文件，如 UI 文件并没有被删除，而且它们的方式相同。

编辑：似乎这是有意的

**更新 2：**

进行了更多测试，发现哪个文件损坏了，如果我在我的自定义包中包含这些文件中的任何一个，它就会损坏

*   jquery.validate.js
*   jquery.validate.unobtrusive.js
*   jquery.unobtrusive-ajax.min.js

在他们之前我有这些，他们工作没有任何错误

*   jquery-1.7.2.min.js
*   jquery-ui-1.8.19.min.js
*   bootstrap.min.js

它仍然很奇怪，如果我在脚本中正常包含这些文件，`<script src="~/Scripts/jquery.validate.js"></script>`它们可以正常工作，没有错误。

虽然，如果我捆绑工作文件，然后像往常一样添加非工作文件，它们仍然会中断

_Layout.cshtml：

```
<script src="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/myBundle")"></script>
<script src="~/Scripts/jquery.validate.js"></script> 
```

全球.asax：

```
var bundle = new Bundle("~/js", new JsMinify());
bundle.AddFile("~/Scripts/jquery-1.7.2.min.js");
bundle.AddFile("~/Scripts/jquery-ui-1.8.19.min.js");
bundle.AddFile("~/Scripts/bootstrap.min.js");
BundleTable.Bundles.Add(bundle); 
```

编辑：似乎捆绑的 jquery 文件中发生了一些变化，这使得验证插件中断

**解决问题**

我尝试在更新之前添加旧文件，它可以工作！设法发现是来自 NuGet 的新 jQuery UI 1.8.19 崩溃了。

我直接从他们的网站下载了 jquery ui，并改用了那个，它成功了！

因此，似乎 jquery ui nuget 版本中的某些内容发生了变化，捆绑正在接受并更改/删除它，所以它会中断..

责怪哪一部分？jQuery UI NuGet 包或 mvc4 捆绑？捆绑问题有解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:15:42.590

**解决问题**

我尝试在更新之前添加旧文件，它可以工作！设法发现是来自 NuGet 的新 jQuery UI 1.8.19 崩溃了。

我直接从他们的网站下载了 jquery ui，并改用了那个，它成功了！

因此，似乎 jquery ui nuget 版本中的某些内容发生了变化，捆绑正在接受并更改/删除它，所以它会中断..

责怪哪一部分？jQuery UI NuGet 包或 mvc4 捆绑？捆绑问题有解决方案吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:01:46.117

我认为`EnableDefaultBundles()`试图包含一个特定版本的 jQuery，所以如果你说你已经升级了它（并且可能删除了旧版本）我会冒险猜测并说 MVC 试图捆绑一个不存在的文件不再。

您将不得不放弃使用`EnableDefaultBundles()`，或者至少编译一个额外的包并包含它。

你说你已经尝试过创建自己的，但你能再试一次吗？也许以下内容会有所帮助：

```
Bundle myJSBundle = new Bundle("~/MyJSBundle", typeof(JsMinify));
myJSBundle.AddDirectory("~/Scripts", "*.js", false);
BundleTable.Bundles.Add(myJSBundle); 
```

显然更改路径和其他内容以匹配您自己的项目。然后将其包含在页面上，例如：

```
<script src="@Url.Content("~/MyJSBundle")" type="text/javascript"></script> 
```

来源： http: [//www.dotnetexpertguide.com/2011/12/bundling-and-minification-aspnet-mvc4.html](http://www.dotnetexpertguide.com/2011/12/bundling-and-minification-aspnet-mvc4.html)

# javascript - 在画布中的另一个 png 上绘制一个 png

> ID：10225561
> 
> 赞同：1
> 
> 时间：2012-04-19T09:49:19.660
> 
> 标签：javascript, html, canvas, png, transparency

我在 JS/Canvas 中制作一个 rpg 地图创建者是为了好玩，但我有一个问题。我可以在画布上绘制图像，但无法在画布上已经绘制的另一个图像上绘制具有透明度的图像。

我希望蘑菇在草地上，而不是抹去它。网格只是一个帮手，我只有 1 个画布，我使用`putImageData`.

[http://img11.hostingpics.net/thumbs/mini_31288520120419113247.png](http://img11.hostingpics.net/thumbs/mini_31288520120419113247.png)（我们可以看到蘑菇图片有透明度）

[http://img11.hostingpics.net/thumbs/mini_71357220120419113257.png](http://img11.hostingpics.net/thumbs/mini_71357220120419113257.png)（似乎在这里不起作用）

我有你的想法，欢迎他们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:07:49.177

不要使用 putImageData 因为它会替换像素，使用

```
context.drawImage(document.getElementById('mushroomImg'),0,0 );
//syntax : drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight) 
```

JSFiddle 有两个图像：http: [//jsfiddle.net/GVPfj/3/](http://jsfiddle.net/GVPfj/3/)

（遗憾的是，我找不到透明的蘑菇，所以它是一座房子 :-)）

# javascript - JavaScript 括号将原始类型转换为对象

> ID：10225565
> 
> 赞同：6
> 
> 时间：2012-04-19T09:49:51.150
> 
> 标签：javascript

如果数字是原始类型，为什么我可以这样做：

```
> (12345).toString()
"12345" 
```

括号是否将原始类型转换为 a `Number`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T09:53:55.887

不，括号只是让解析器明白这`.`不是小数点。

`12345 .toString()`也将工作。

每当您访问它们的属性时，原始数字都会隐式转换为数字，但对象是临时的并且会立即丢失。例如：

```
var foo = 5;

foo.bar = "something";

console.log(foo.bar); // undefined 
```

字符串和布尔值也是如此。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T09:54:56.973

实际上，`1 .toString()`也可以。

```
>>> typeof(Number(1)) === typeof(1)
true
>>> var a=1; a.toString()
"1" 
```

它是解析器： 1.x 期望 x 是一个数字。

```
>>> 1.toString()
SyntaxError: identifier starts immediately after numeric literal
[Break On This Error] 
```

[你可以在这里](http://javascriptweblog.wordpress.com/2010/09/27/the-secret-life-of-javascript-primitives/)找到进一步的解释

> 如果原语没有属性，为什么 "abc".length 返回一个值？
> 
> 因为 JavaScript 很容易在原语和对象之间进行强制转换。在这种情况下，字符串值被强制转换为字符串对象，以便访问属性长度。字符串对象只使用了几分之一秒，之后它就被献给了垃圾收集之神——但本着电视发现节目的精神，我们将困住这个难以捉摸的生物并将其保存下来以供进一步分析……</p>

# wpf - 如何使用 Ironpython 代码将项目放入 XAML 组合框/列表框中？

> ID：10225567
> 
> 赞同：1
> 
> 时间：2012-04-19T09:49:54.037
> 
> 标签：wpf, xaml, combobox, listbox, ironpython

我有一个列表框和一个组合框，描述了下面的 XAML 代码，我试图从 IronPython 代码而不是 XAML 中填充这个列表框和组合框。

如何从代码中填充此列表？

在列表中，我需要多列。

```
<ComboBox
x:Name="comboBox1"
Grid.Column="0"
Grid.Row="0"
HorizontalAlignment="Left"
VerticalAlignment="Top"
Margin="53,14.223,0,0"
Width="54"
Height="19" />

<ListBox
x:Name="listBox1"
Grid.Column="0"
Grid.Row="0"
VerticalAlignment="Top"
Margin="0,30.223,14.5,0"
Height="368.639" HorizontalAlignment="Right" Width="442.619" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:15:19.937

使用以下 SO 帖子中接受的答案：[如何在 IronPython 中绑定到 ListBox？](https://stackoverflow.com/questions/6234476/how-do-i-bind-to-a-listbox-in-ironpython)我设法从 Ironpython 代码中填充和绑定 m 组合框和列表。

我会将所有代码放在这里，以防有人发现自己处于同样的情况：

首先需要更改列表框的 XAML 以指定绑定：

```
<DataTemplate x:Key="DataTemplate1">
             <Grid>
                  <Grid.ColumnDefinitions>
                     <ColumnDefinition Width="80"/>
                     <ColumnDefinition Width="*"/>
                  </Grid.ColumnDefinitions>
            <TextBlock Text="{Binding Path=lproperty, FallbackValue=Property}" />
            <TextBlock Text="{Binding Path=lvalue, FallbackValue=Value}" Grid.Column="1" HorizontalAlignment="Right" Margin="0,0,-60,0" Width="360" />                

            </Grid>     

</DataTemplate> 
```

那么您还需要将列表框内容绑定到此模板：

```
<ListBox
                            x:Name="listBox1"
                            Grid.Column="0"
                            Grid.Row="0"
                            VerticalAlignment="Top"
                            Margin="0,30.223,14.5,0"
                            Height="368.639" HorizontalAlignment="Right" Width="442.619" 
                            ItemsSource="{Binding}" ItemTemplate="{DynamicResource DataTemplate1}"/> 
```

我还将把填充组合框和列表框的整个代码放在这里，因为它不是那么大：

```
import wpf
from System.Windows import Application
from Window1 import Window1
from System.Windows.Controls import(ComboBox, 
    ComboBoxItem, ListBox, ListBoxItem)
from System.Collections.ObjectModel import *
from System.ComponentModel import *
from System.Windows.Controls import *
import pyevent 

entries = {
1 : ('Email', 'test.user@gmail.com' ), 
2 : ('Address', 'new york'),
3 : ('Notes', 'this is a dummy form'), 
4 : ('Mobile Phone', '57234985734'),
5 : ('Work Fax', '5432578943'), 
6 : ('Work Phone', '32465765765') 
}

politetitles = {
1 : ('Mr' ), 
2 : ('Ms'),
3 : ('Mrs'), 
4 : ('Sir'),
}

class NotifyPropertyChangedBase(INotifyPropertyChanged):
    """INotifyProperty Helper"""
    PropertyChanged = None
    def __init__(self):
        (self.PropertyChanged, self._propertyChangedCaller) = pyevent.make_event()

    def add_PropertyChanged(self, value):
        if self.PropertyChanged is not None: 
            self.PropertyChanged += value

    def remove_PropertyChanged(self, value):
        if self.PropertyChanged is not None: 
            self.PropertyChanged -= value

    def OnPropertyChanged(self, propertyName):
            if self.PropertyChanged is not None: 
                self._propertyChangedCaller(self, PropertyChangedEventArgs(propertyName))

class myListEntry(NotifyPropertyChangedBase):

@property
def lvalue(self):
    return self._lvalue

@lvalue.setter
def lvalue(self, value):
    self._lvalue = value
    self.OnPropertyChanged("lvalue")

@property
def lproperty(self):
    return self._lproperty

@lproperty.setter
def lproperty(self, value):
    self._lproperty = value
    self.OnPropertyChanged("lproperty")

window = Window1()

#print window
app = Application()

combo = ComboBox()
titleitems = politetitles.items()
for key, data in titleitems:
    item = ComboBoxItem()
    item.Content = data
    item.FontSize = 8
    combo.Items.Add(item)
window.comboBox1.ItemsSource = combo.Items

listitems = entries.items()
listb = ObservableCollection[myListEntry]()
for key, data in listitems:
    item = ListBoxItem()
    lineitem = myListEntry()
    lineitem.lproperty=data[0]
    lineitem.lvalue=data[1]
    listb.Add(lineitem)
window.listBox1.ItemsSource = listb
print listb
app.Run(window) 
```

# java - Java 将 Facebook created_time 转换为 UTC

> ID：10225569
> 
> 赞同：4
> 
> 时间：2012-04-19T09:49:59.083
> 
> 标签：java, facebook, facebook-graph-api

我正在使用 Facebook 图形 API 来检索用户墙信息。在那，我得到帖子创建的时间价值为：

```
created_time: "2012-04-19T09:00:02+0000" 
```

谁能建议我如何将这个时间转换为 Java 中的 UTC 或纪元值？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T10:00:33.573

您收到的日期格式是[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)。

如将[符合 ISO8601 的字符串转换为 java.util.Date 中](https://stackoverflow.com/questions/2201925/converting-iso8601-compliant-string-to-java-util-date)所述（使用[Joda-Time](http://joda-time.sourceforge.net/)）：

```
DateTimeFormatter parser = ISODateTimeFormat.dateTimeNoMillis();
String jtdate = "2012-04-19T09:00:02+0000";
System.out.println(parser.parseDateTime(jtdate)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T09:58:32.510

您基本上需要解析 ISO8601 日期格式。有一些库可以为您完成，或者您可以创建自己的解析器（相对简单），例如

[http://www.java2s.com/Code/Java/Data-Type/ISO8601dateparsingutility.htm](http://www.java2s.com/Code/Java/Data-Type/ISO8601dateparsingutility.htm)

# ruby-on-rails-3 - 轨道3 | 如何为所有控制器创建标准路由/动作？

> ID：10225571
> 
> 赞同：0
> 
> 时间：2012-04-19T09:50:17.917
> 
> 标签：ruby-on-rails-3

好吧，干！所以我认为向我的所有控制器（在我的例子中是副本）添加新操作（如现有的新操作，编辑）应该很容易。但是如何为所有控制器设置新路由？

*不进入 routes.rb 内的“循环”（即 %w().each ...）？*

我的意思是，我们想要 DRY 对吧？因此，您不想在每个资源的路由文件中复制您的操作。我想您应该能够轻松扩展默认操作/路由（索引、新建、编辑等）？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:21:12.623

查看源代码没有办法添加到资源的默认操作中。

但是，正如@juwiley 所说，这些方法只是`resources :item`创建大量方法的捷径。`member``collection`

你需要做的就是这样

```
class ActionDispatch::Routing::Mapper

  def resources_with_copy(*resources, &block)

    block_with_copy = lambda do
      block.call

      member do
        post :copy
      end
    end

    resources(*resources, &block_with_copy)
  end
end 
```

然后在你的 routes.rb 中说

```
resources_with_copy :items
resources_with_copy :posts do
  member do
    post :share
  end
end
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:58:24.417

AFIK 默认没有办法做到这一点。您可以猴子补丁资源以包含此功能：

[https://github.com/rails/rails/blob/b229bc70e50ec0887c5bb3aaaa9c6ee8af054026/actionpack/lib/action_dispatch/routing/mapper.rb#L982](https://github.com/rails/rails/blob/b229bc70e50ec0887c5bb3aaaa9c6ee8af054026/actionpack/lib/action_dispatch/routing/mapper.rb#L982)

...但我的直觉是，您最好重新考虑是否可以通过另一种方式创建此功能，因为您想要做的是“脱离轨道”。

一种选择是创建一个接受模型和 id 并创建克隆的 CloneController#new。这似乎会更干燥，并且不需要您在整个地方都使用大量的“clone_article”“clone_blog”“clone_user”路径。

显然，您需要仔细地将可以传入的模型/ID 列入白名单。

# xcode - 无法在 MacOSX Lion 上安装 XCode 4.0 - 4.1

> ID：10225578
> 
> 赞同：0
> 
> 时间：2012-04-19T09:51:03.600
> 
> 标签：xcode, macos, xcode4, osx-lion, xcode4.3

起初我安装的是 XCode 4.3。然后，我需要安装旧版本的 XCode，例如 4.1，以便能够在模拟器 iOS 4.1 上测试应用程序。操作系统 MacOSX Lion。

起初我只是尝试在文件夹 Developer 中安装 XCode 4.1，就像我以前一样。但是在开始安装时，我收到了一条[错误消息](http://qblx.co/IUKbDD)。然后，我尝试通过将文件夹移动到垃圾箱并清除来卸载该文件夹的 XCode 4.3 Application。重新启动后，我再次尝试安装 XCode 4.1 并再次遇到此问题。我在另一台同样安装了 XCode 4.3 的电脑上进行了测试，也遇到了同样的问题。

也许您知道 XCode 4.3 的根源在哪里？我还使用 CleanMyMac 清理了临时文件。

谢谢你。

# asp.net-mvc - MVC .NET [必需] 父模型上的 DataAnnotations 导致子模型中的 ModelState 无效

> ID：10225579
> 
> 赞同：0
> 
> 时间：2012-04-19T09:51:03.710
> 
> 标签：asp.net-mvc, asp.net-mvc-3, data-annotations

在保存子模型（VehicleModel）时，我想“关闭”父模型（VehicleManufacturer）的某个属性的必填字段验证，即：

```
public class VehicleManufacturer
{
    public virtual Guid Id { get; set; }

    [Required]
    [StringLength(50, MinimumLength = 1)]
    public virtual string Name { get; set; }
}

public class VehicleModel
{
    public virtual Guid Id { get; set; }

    [Required]
    [StringLength(50, MinimumLength = 1)]
    public virtual string Name { get; set; }

    public virtual VehicleManufacturer Manufacturer { get; set; }
} 
```

所以，当我保存一个新模型时，我只关心它的名称和制造商 ID，它们将从下拉列表中选择，但是，因为制造商名称在其实体中标记为 [必需]，它使我的 ModelState 无效保存新的 VehicleModel 时，因为 ManufacturerName 为 null :(

我想知道什么是最好的方法以及如何做到这一点。我可以想到一些解决方案，但似乎没有一个是正确的方法：

*   在 ModelState 检查之前设置一个“默认”ManufacturerName 值，即“-”只是为了满足 DataAnnotation
*   在我的 VehicleModelView 中填充 ManufacturerName 和 ManufacturerId - 如果您的父模型有一堆您不需要在子模型中使用的必填字段，那就不好了
*   关闭子模型的 [必需] 验证（不确定如何？）

你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:56:21.280

最简单的方法是为您不想显示的所需属性设置隐藏字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:12:38.163

一种可能的解决方案是将外键列添加到 VehicleManufacturer (VehicleManufacturerId) 到 VehicleModel 并在您的视图中使用该列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:48:44.443

该`IValidatableObject`接口用于自定义模型验证。

例如：

```
public class VehicleModel : IValidatableObject
{
    public virtual Guid Id { get; set; }

    [StringLength(50, MinimumLength = 1)]
    public virtual string Name { get; set; }

    public virtual VehicleManufacturer Manufacturer { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if(string.IsNullOrWhiteSpace(Name))
        {
           yield return new ValidationResult("Name is required")
        } 
    }
} 
```

然后在你的控制器调用中`ModelState.IsValid`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T03:49:38.880

我最终做的是用 ParentWithExtendedValidation 之类的东西对父模型进行子类化：Parent

在 ParentWithExtendedValidation 中，所有各种 [Required] 字段都被标记。

当我想专门编辑父对象时，我使用了 ParentWithExtendedValidation 类型——因为它是 Parent 的子类，一旦它通过模型验证，您就可以将其转换回父对象并将其传递给您的 DAL，而不会出现任何问题。

当您在关系中使用它时，例如编辑引用它的孩子，您可以使用常规的 Parent 类。

希望这可以帮助

EG 我有一个 Person 类——具有我所有的普通虚拟属性，并且只需要 ID（以使在 person->ID 上选择的验证仍然可以正常工作）

还有一个类 PersonEV

```
public class PersonWithExtendedValidation : Person
{

    [Required]
    public override string FullName { get; set; }
    [Required]
    public override string FirstName { get; set; }
    [Required]
    public override string LastName { get; set; }        
    [Required]
    public override string DomainName { get; set; }
    [Required]
    public override string WorkPhone { get; set; }
    [Required]
    public override string CellPhone { get; set; }
    [Required]
    public override string Email { get; set; }        
} 
```

然后在您的视图/控制器中使用例如 PersonEV 作为模型和参数。

一旦您检查了 ModelState.IsValid ，请转换回 (Person) 并正常传递到任何存储库等

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T06:18:35.603

行。我看了看这个，意识到我的方法很浪费。

这看起来怎么样？

我创建了一个名为 ExtendedValidationRequired 的注释。

它有一个静态值，可以打开或不打开扩展值的条件检查。

```
[AttributeUsage(AttributeTargets.Property | AttributeTargets.Field | AttributeTargets.Parameter, AllowMultiple = false)]

public class ExtendedValidationRequiredAttribute : RequiredAttribute
{

    // Summary:
    //     Initializes a new instance of the System.ComponentModel.DataAnnotations.RequiredAttribute
    //     class.
    public ExtendedValidationRequiredAttribute()
    {

    }

    // Summary:
    //     Checks that the value of the required data field is not empty.
    //
    // Parameters:
    //   value:
    //     The data field value to validate.
    //
    // Returns:
    //     true if validation is successful; otherwise, false.
    //
    // Exceptions:
    //   System.ComponentModel.DataAnnotations.ValidationException:
    //     The data field value was null.
    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        if (ExtendedValidation.IsExtendedValidationEnabled(validationContext.ObjectType))
        {

            return base.IsValid(value,validationContext);
        }
        else
        {
            return ValidationResult.Success;                
        }

    }

} 
```

然后我用 [ExtendedValidationRequired(typeof(MyClassName))] 标记我的有时需要（例如，当我直接编辑该类时）字段

这也适用于其他类型的验证器。

实际上，我继续创建了一组“有时开启”验证器并将我的设置移动到一个单独的类： public static class ExtendedValidation { private static Dictionary extendedValidationExemptions = new Dictionary();

```
 /// <summary>
    /// Disable extended validation for a specific type
    /// </summary>
    /// <param name="type"></param>
    public static void DisableExtendedValidation(Type type)
    {
        extendedValidationExemptions[type] = true;
    }
    /// <summary>
    /// Clear any EV exemptions
    /// </summary>
    public static void Reset()
    {
        extendedValidationExemptions.Clear();
    }

    /// <summary>
    /// Check if a class should perform extended validation
    /// </summary>
    /// <param name="type"></param>
    /// <returns></returns>
    public static bool IsExtendedValidationEnabled(Type type)
    {
        if (extendedValidationExemptions.ContainsKey(type))
        {
            return false;
        }
        else
        {
            return true;
        }
    }
} 
```

}

现在我只是在编辑子项时关闭 ExtendedValidation。

EG：编辑 Child 时，可以 DisableExtendedValidation(typeof(Parent)) 而不会妨碍。

编辑： Hrm，我意识到这不太管用。-- 我可以确定我在validationProperty 中查看的类吗？我想我总是可以传递父属性，但那是一个 PITA

# ruby-on-rails - 在 Rails 应用程序中实现 oauth：一个用户模型还是两个（用户 + 身份验证）？

> ID：10225586
> 
> 赞同：0
> 
> 时间：2012-04-19T09:51:20.847
> 
> 标签：ruby-on-rails, omniauth

在我学习 Rails 的过程中，我第一次涉足 oauth 领域。我有一个用户模型，并计划允许用户连接到多个服务。我希望这将是一个固定的服务列表，即我不希望将来添加新的身份验证服务（尽管永远不会说永远，对吧？）。

所以，我可以看到两种处理方式。

1.  拥有一个 uber User 模型，除了保存用户名、密码等之外，还存储 fb_uid、twitter_uid 等以及从这些服务中提取的任何数据。

2.  有一个 User 模型和一个关联的 Auth_Services 模型。用户名，密码等进入用户。Uid、user_id、提供者名称、oauth 数据等进入 Auth_Services。

我可以看到这两种方法的优点和缺点。我可以看到关于这两种方法的规范化数据库设计的意见。

所以我的问题是，对于以前这样做过的人，您使用了哪条路线，为什么？你遇到了什么问题，我在做决定时应该考虑或计划什么？

谢谢你帮助我学习！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:48:54.333

如果您甚至有可能添加进一步的身份验证，则必须使用这两个模型。无论如何，这就是我的理由。

# jquery - 使用源变量中的 JSON 值自动完成？

> ID：10225587
> 
> 赞同：4
> 
> 时间：2012-04-19T09:51:27.930
> 
> 标签：jquery, json, jquery-ui, object, autocomplete

`jQuerys .autocomplete()`函数的“源”选项有两种变体。

字符串数组：

```
[ "Choice1", "Choice2" ] 
```

具有标签和值属性的对象数组：

```
 [ { label: "Choice1", value: "value1" }, ... ] 
```

当直接传递给`.autocomplete()`函数时，它们都可以正常工作：

```
$('input').autocomplete({source: [ "Choice1", "Choice2" ], minLength: 0}); 
```

或者

```
$('input').autocomplete({source: [ { label: "Choice1", value: "value1" } ], minLength: 0}); 
```

但是当作为变量传递时，我无法工作：

```
var source = '[ "Choice1", "Choice2" ]';
$('input').autocomplete({source: source, minLength: 0}); 
```

这与将变量隐式转换为字符串有关 - 自动完成将变量中的值与它处理`AJAX source`字符串（字符串）的方式相同。

最终我想使用输入元素属性中的`JSON`值。`data-json`

为了增加兴趣：

```
$('input').autocomplete({source: $('input').data('json'), minLength: 0}); 
```

第一个变体完美地工作，但恢复到第二个变体的字符串行为。

使用`$('input').attr('data-json')`不适用于任何一种变体。

对这两种变体都有效的“hack”是这样做的：

```
$('input').autocomplete({source: eval($('input').attr('data-json')), minLength: 0}); 
```

我是否错过了一些允许将第二个变体中`.data()`明显有效`JSON`的对象作为对象返回的东西？

还有另一种方法，还是我只需要和平相处，`eval()`尽管周围有很多智慧，这可能不是一件好事？

谢谢你的想法。。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T09:53:24.850

```
var source = '[ "Choice1", "Choice2" ]'; 
```

那是*String*，而不是数组。

尝试不带引号：

```
var source = [ "Choice1", "Choice2" ]; 
```

如果您发现自己必须从 JSON 字符串中获取数据，请不要使用 eval（它是邪恶的），使用 JSON.parse（所有现代浏览器都有）

```
var source = JSON.parse( '[ "Choice1", "Choice2" ]' ); 
```

或者，因为您已经在使用 jQuery

```
var source = $.parseJSON( '[ "Choice1", "Choice2" ]' ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T02:30:31.630

这里的一个潜在问题是自动完成插件接受的“JSON”，并在[文档](http://jqueryui.com/demos/autocomplete/)中有详细说明：

```
[ { label: "Choice1", value: "value1" }, ... ] 
```

实际上不是有效的 JSON。JSONLint.com 使这一点显而易见。

我在我的字符串中完全复制了示例格式，但是虽然自动完成将直接接受该语法，但它不能转换为 js 对象，除非通过使用 eval()。

答案是我们需要引用属性名称和值。一个有效的符号是：

```
[ { "label": "Choice1", "value": "value1" }, { "label": "Choice2", "value": "value2" },...] 
```

希望能帮助别人！

# c - 打印 igraph_vector_ptr_t（向量列表 igraph_vector_t ）

> ID：10225603
> 
> 赞同：0
> 
> 时间：2012-04-19T09:52:32.950
> 
> 标签：c, igraph

我一直在尝试在 c++ 中包含 C Igraph 库（在 Eclipse 中），如果`print_vectorList(&vn1, stdout)`您收到 评论，此代码效果很好

```
cout<<VECTOR(v2)[0]<<endl------------>3        
cout<<VECTOR(v2)[1]<<endl------------>7 
```

如果你不评论 print_vectorList(&vn1, stdout) 你会得到

```
 0 1 4 9
 1 0 7 9
 2 3 5 9
 3 2 6 9
 4 0 5 8
 5 2 4 8
 6 3 7 8
 7 1 6 8
 8 4 5 6 7
 9 0 1 2 3 
```

和

```
cout<<VECTOR(v2)[0]<<endl------------>0        
cout<<VECTOR(v2)[1]<<endl------------>0 
```

怎么了？

```
#include <igraph.h>
#include <fstream>
#include <iostream>
#include <stdlib.h>
#include <vector>
#include <algorithm>

using namespace std;

void print_vector(igraph_vector_t *v, FILE *f) {
  long int i;
  for (i=0; i<igraph_vector_size(v); i++) {
    fprintf(f, " %li", (long int) VECTOR(*v)[i]);
  }
  fprintf(f, "\n");
}

void print_vectorList(igraph_vector_ptr_t * vl, FILE *f) {
      long int i,n;
      n = igraph_vector_ptr_size(vl);
      for (i=0; i<n; i++) {
        igraph_vector_t * vt;
        vt=(igraph_vector_t*)igraph_vector_ptr_e(vl,i);
        print_vector((igraph_vector_t*)vt,f);
        igraph_vector_destroy(vt);
        free(vt);
      }
}

long int GetElementVectorList(igraph_vector_ptr_t vl,long int i,long int j) {

         igraph_vector_t * vt;
         vt=(igraph_vector_t*)igraph_vector_ptr_e(&vl,i);
         return(VECTOR(*(igraph_vector_t*)vt)[j]);

}

int main() {

  igraph_t g;
  igraph_vector_t v;

  igraph_vector_init(&v,32);
  VECTOR(v)[0]=0; VECTOR(v)[1]=1;
  VECTOR(v)[2]=0; VECTOR(v)[3]=4;
  VECTOR(v)[4]=0; VECTOR(v)[5]=9;
  VECTOR(v)[6]=1; VECTOR(v)[7]=7;
  VECTOR(v)[8]=1; VECTOR(v)[9]=9;
  VECTOR(v)[10]=2; VECTOR(v)[11]=9;
  VECTOR(v)[12]=2; VECTOR(v)[13]=3;
  VECTOR(v)[14]=2; VECTOR(v)[15]=5;
  VECTOR(v)[16]=3; VECTOR(v)[17]=6;
  VECTOR(v)[18]=3; VECTOR(v)[19]=9;
  VECTOR(v)[20]=4; VECTOR(v)[21]=5;
  VECTOR(v)[22]=4; VECTOR(v)[23]=8;
  VECTOR(v)[24]=5; VECTOR(v)[25]=8;
  VECTOR(v)[26]=6; VECTOR(v)[27]=7;
  VECTOR(v)[28]=6; VECTOR(v)[29]=8;
  VECTOR(v)[30]=7; VECTOR(v)[31]=8;

  igraph_create(&g, &v, 0,0);

  // Neighbors

    igraph_vector_ptr_t vn1;
    igraph_vs_t vs;

   igraph_vector_ptr_init(&vn1, 0);
   igraph_vs_vector_small(&vs, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, -1);
   igraph_neighborhood(&g, &vn1,vs, 1, IGRAPH_OUT);

   print_vectorList(&vn1, stdout);  // **comment here and.....**

   igraph_vector_t v2;
   igraph_vector_init(&v2,2);
   VECTOR(v2)[0]=GetElementVectorList(vn1,6,1); VECTOR(v2)[1]=GetElementVectorList(vn1,6,2);

   cout<<VECTOR(v2)[0]<<endl;        // **you can get a good result here**
   cout<<VECTOR(v2)[1]<<endl;

  igraph_destroy(&g);
  igraph_vector_destroy(&v);
  igraph_vector_ptr_destroy_all(&vn1);
  igraph_vs_destroy(&vs);
  igraph_vector_destroy(&v2);

  return 0;
} 
```

功能 print 似乎发生了一些事情，但我不知道发生了什么。

提前致谢

放假

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:19:00.530

您正在破坏向量`print_vectorList`- 难怪之后当您尝试从 打印它时看不到它的内容`main`。

# xna - XNA 纹理拉伸模糊

> ID：10225610
> 
> 赞同：0
> 
> 时间：2012-04-19T09:53:22.530
> 
> 标签：xna, textures, stretch, fuzzy

如果我将纹理拉伸到目标矩形，并且我有一个简单的 1X2 精灵（窗口窗体按钮背景），XNA 会非常模糊地拉伸精灵，我会得到一个渐变，而不是底部深色和顶部浅色。有没有类似拉伸模式的东西，所以我在 Photoshop 中创建纹理时会拉伸它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:31:53.290

根据[这个](https://stackoverflow.com/questions/8338095/super-blurry-textures-xna)问题：

```
GraphicsDevice.SamplerStates[0] = SamplerState.PointWrap; 
```

# c++ - 返回参考 gcc 时将 0x30 添加到 %eax

> ID：10225611
> 
> 赞同：1
> 
> 时间：2012-04-19T09:53:22.977
> 
> 标签：c++, linux, pointers, gcc, disassembly

我有一个函数并调用它：

```
Class1& Class2::get()
{
   return *m_ptr;
}

Class1& c = m_class2->get(); 
```

m_ptr 是一个自定义智能指针，我可以在调试器中看到 m_ptr.m_p 为 0，我也可以在其运算符 T* 内部看到它确实返回 0。但是 c (&c) 的地址不是 NULL，它是 0x30！我在反汇编中看到的：

```
13059       return *m_ptr;
eaabbc7e:   mov 0x8(%ebp),%eax
eaabbc81:   add $0xb4,%eax
eaabbc86:   mov %eax,(%esp)
eaabbc89:   call 0xea9ce4c0  <operator T*>
eaabbc8e:   add $0x30,%eax
13060     } 
```

就在添加 $0x30,%eax 行之前，我可以看到 %eax 为 0，即运算符正确返回 NULL。

为什么要添加 0x30 的行在这里？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T10:16:33.480

尽管没有足够的信息来回答，但您的评论暗示`Class2`涉及多重继承，我会冒险猜测模板参数`T`是派生类，而不是`Class2`其本身。

所以`operator T*`返回一个指向这个派生类的指针。为了将其取消引用为 give `Class2&`，必须将其转换为`Class2*`，这可能涉及向指针添加偏移量，具体取决于编译器如何布置对象中的基类子对象。

显然，这仅在指针不为空时才有效；这就是为什么即使只使用结果来初始化引用，也决不能取消引用空指针的原因之一。

如果函数返回`Class2*`，那么您将按预期得到一个空指针；需要该转换才能将 null 转换为 null。在您的情况下，由于您在这种情况下通过取消引用指针来调用未定义的行为，因此编译器无需在执行转换之前检查 null 。

# javascript - 无法在 Telerik MVC 中触发复选框更改事件

> ID：10225624
> 
> 赞同：0
> 
> 时间：2012-04-19T09:54:04.203
> 
> 标签：javascript, jquery, html, telerik

我正在为复选框更改事件而苦苦挣扎。

这是代码：

```
<table>
    <tr>
        <td>
            <%=Html.CheckBox( "cbDisappear")%>
        </td>
    </tr>
</table>
<script type="text/javascript" language="javascript" src="../../Scripts/jquery-1.4.4.js">
    $("#cbDisappear").change(function () {
        var value = $(this).attr("checked") ? 'true' : 'false';
        alert(value);
    });
</script> 
```

上面的代码在简单的 html 页面中确实有效，我想可能 Telik.js 已经与 Jquery.js 混淆了。

此外，因为它是 MVC 应用程序，所以我尝试通过以下方式配置 HTML.Checkbox：

```
<%=Html.CheckBox("cbDisappear", new { change="onchange" })%> 
```

不幸的是，仍然没有任何反应。

顺便说一句，有谁可以告诉我为什么一个 HTML.Checkbox 会像这样在萤火虫中显示：

```
<td>
    <input id="cbDisappear" name="cbDisappear" type="checkbox" value="true"
    />
    <input name="cbDisappear" type="hidden" value="false" />
</td> 
```

非常感谢您的帮助，非常感谢。++++++++++++++++++++++++++++++++++++++++++++++++++++++ ++++++++++++++++++++++++++++++++++++

我放弃了 HTML 助手，改用 HTML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:06:24.950

在 jquery 中试试这个：

```
$("input[type='checkbox']").change( function() {   
alert(1); 
```

});

这也适用于 MVC

# c# - 如何从后面的代码中将类添加到列表项

> ID：10225625
> 
> 赞同：0
> 
> 时间：2012-04-19T09:54:08.550
> 
> 标签：c#, asp.net

我从后面的代码动态生成分页，但我的 html 设计不同。如何将类添加到列表项。代码如下

```
 if (pageCount > 0)
    {
        pages.Add(new ListItem("First", "1", currentPage > 1));
        for (int i = 1; i <= pageCount; i++)
        {
            pages.Add(new ListItem(i.ToString(), i.ToString(), i != currentPage));
        }
        pages.Add(new ListItem("Last", recordCount.ToString(), currentPage < pageCount));
    } 
```

同样的HTML是

```
 <ul class="pages-pagina">
<li class="pages previous"><a href="#">Previous</a></li>
<li class="pages selected"><a href="#">1</a></li>
<li class="pages"><a href="#">2</a></li>
<li class="pages"><a href="#">3</a></li>
<li class="pages"><a href="#">4</a></li>
<li class="pages"><a href="#">5</a></li>
<li>...</li>
<li class="pages last"><a href="#">10</a></li>
<li class="pages next"><a href="#">Next</a></li>

</ul> 
```

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T10:44:20.103

使用 ListItem 对象的 Attributes.Add。

```
ListItem li = new ListItem(i.ToString(), i.ToString(), i != currentPage);
li.Attributes.Add("class", "pages"); 
```

pages.Add(li);

# ios - 如何捕获包含所有内容的 UIWebview 的屏幕截图？

> ID：10225633
> 
> 赞同：5
> 
> 时间：2012-04-19T09:54:25.007
> 
> 标签：ios, cocoa-touch, uiwebview, uikit

我能够捕获整个网页的屏幕截图（包括屏幕外内容）。这在模拟器上运行良好，但在设备上却崩溃了。请帮助我，检查下面的代码（`browserView`是 UIWebview）。

```
UIImage *screenImage=[[UIImage alloc] init];
UIScrollView *browserScrollableView=[[UIScrollView alloc] init];
browserScrollableView=browserView.scrollView;   
UIGraphicsBeginImageContext(browserScrollableView.contentSize);
CGPoint savedContentOffset = browserScrollableView.contentOffset;
CGRect savedFrame = browserScrollableView.frame;

browserScrollableView.contentOffset = CGPointZero;
browserScrollableView.frame = CGRectMake(0, 0, browserScrollableView.contentSize.width, browserScrollableView.contentSize.height);

[browserScrollableView.layer renderInContext: UIGraphicsGetCurrentContext()];     
screenImage = UIGraphicsGetImageFromCurrentImageContext();

browserScrollableView.contentOffset = savedContentOffset;
browserScrollableView.frame = savedFrame;
UIGraphicsEndImageContext();

NSLog(@"Captured image size is %f X %f",screenImage.size.width,screenImage.size.height);

UIImageWriteToSavedPhotosAlbum(screenImage, nil, nil, nil); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-03-15T06:42:31.193

```
+ (UIImage*) captureWebView: (UIWebView*)webView {
    // capture webview
    UIImage *img = nil;
    UIGraphicsBeginImageContextWithOptions(webView.scrollView.contentSize, webView.scrollView.opaque, 0.0);
    {
        CGPoint savedContentOffset = webView.scrollView.contentOffset;
        CGRect savedFrame = webView.scrollView.frame;

        webView.scrollView.contentOffset = CGPointZero;
        webView.scrollView.frame = CGRectMake(0, 0, webView.scrollView.contentSize.width, webView.scrollView.contentSize.height);
        [webView.scrollView.layer renderInContext: UIGraphicsGetCurrentContext()];
        img = UIGraphicsGetImageFromCurrentImageContext();

        webView.scrollView.contentOffset = savedContentOffset;
        webView.scrollView.frame = savedFrame;
    }
    UIGraphicsEndImageContext();
    return img;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T12:46:16.067

我正在使用此功能及其对我的工作

```
-(UIImage*)captureScreen:(UIView*) viewToCapture
{
    UIGraphicsBeginImageContext(viewToCapture.bounds.size);
    [viewToCapture.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return viewImage;
} 
```

参数“viewToCapture”将是您的 webView。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T14:05:25.830

```
browserScrollableView=browserView.scrollView; 
```

是 NS_AVAILABLE_IOS(5_0);

检查您的设备 iOS 版本。

# php - 我的 PHP 版本中缺少 XMLReader？

> ID：10225635
> 
> 赞同：12
> 
> 时间：2012-04-19T09:54:43.523
> 
> 标签：php, wurfl

我正在尝试将 WURFL API 用于 PHP。我在初始化期间收到以下错误。

```
Fatal error: Class 'XMLReader' not found in /var/www/html/wurfl-api/WURFL/Xml/AbstractIterator.php on line 89 
```

我运行时的 PHP 版本`php -v`：

```
PHP 5.3.3 (cli) (built: Jul 22 2010 16:21:30) 
Copyright (c) 1997-2010 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2010 Zend Technologies 
```

为什么您认为我收到此错误？我的 PHP 版本过时了吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T09:58:22.590

您没有安装 XML 扩展。在类似 RedHat 的系统`yum install php53-xml`中，输入终端。或者您可以简单地添加`phpinfo();`到您的 PHP 代码以重新查看您的服务器配置并查找是否安装了 XML。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-10-30T17:35:23.767

安装在基于 debian 的系统中。

```
sudo apt install php7.2-xml 
```

当然用你正在使用的版本替换 php 版本。

您可以使用以下命令检查当前使用的 php 版本：

```
php -v 
```

安装完成后，如果您正在使用它，您将需要重新启动 apache 服务，或者 nginx。

```
sudo service apache2 restart 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T09:59:00.840

运行`php -m`以检查模块是否存在

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-21T13:49:42.120

我在运行通过 PuTTY 从开发服务器上的 excel 读取文件的 artisan 命令时遇到了这个错误。

解决方案是将 excel 扩展名从**xlsx**更改为**xls**。

# visual-studio - 无法创建新项目或项目：Visual Studio 2010 对话框初始化异常

> ID：10225637
> 
> 赞同：3
> 
> 时间：2012-04-19T09:54:48.913
> 
> 标签：visual-studio, visual-studio-2010

每当我执行 Add>New Item、Add>New Project 或 File>New Project VS2010 时都会引发对话框初始化异常，从而阻止我创建新项目或类。知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T10:38:09.980

听起来您可能遇到与第三方软件包或加载项相关的问题。以下是一些可以尝试的事情：

*   以管理员身份运行 Visual Studio。

*   您可以尝试在命令提示符中运行`devenv /Resetsettings`（请参阅[此处](http://msdn.microsoft.com/en-us/library/ms241273.aspx)），这应该可以修复任何损坏的设置

*   尝试运行`devenv /ResetSkipPkgs`（参见 [此处](http://msdn.microsoft.com/en-us/library/ms241276.aspx)），这将避免加载任何有问题的包。

*   尝试运行`devenv /Safemode`（参见[此处](http://msdn.microsoft.com/en-us/library/ms241278.aspx)）。如果它在安全模式下工作，那么问题很可能是第三方加载项或软件包。

*   你也可以试试`Devenv.exe /log <log path>"`。这将生成一个名为的文件`ActivityLog.xml`，它可能会为您提供更多线索。

如果这些都没有帮助，则从控制面板*修复Visual Studio。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T11:24:36.190

我在我的电脑上遇到了同样的问题，经过很长时间的搜索，我通过执行以下操作解决了它：

*   关闭 Visual Studio 2010 的所有实例
*   打开终端并转到`C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE`（取决于您的 VS 安装目录）。
*   运行命令：`devenv.exe /resetuserdata`并等待直到完成。
*   运行 Visual Studio。

# c# - 覆盖列表 财产

> ID：10225642
> 
> 赞同：0
> 
> 时间：2012-04-19T09:54:59.190
> 
> 标签：c#, list, overriding

我需要覆盖 List 类的属性。例如，我的课程设置如下：

```
 public class Customer
    {
        private int _ID;
        private string _CustomerName;
        private List<CustomerAddress> _CustomerAddressList;

        public int ID { get { return _ID; } set { _ID = value; } }
        public string CustomerName
        {
            get { return _CustomerName; }
            set { _CustomerName = value; }
        }
        public List<CustomerAddress> CustomerAddressList
        {
            get { return _CustomerAddressList; }
            set { _CustomerAddressList = value; }
        }
    }

    public class CustomerAddress
    {
        private string _Address1;
        private string _TelephoneNumber;

        public string Address1
        {
            get { return _Address1; }
            set { _Address1 = value; }
        }

        public virtual string TelephoneNumber
        {
            get { return _TelephoneNumber; }
            set { _TelephoneNumber = value; }
        }
    } 
```

现在我有我的`Business Layer`类，它继承了客户类。

我可以覆盖客户类的属性，但我不知道如何`CustomerAddress`在我的类中覆盖类的属性`CustomerBL`？我不想覆盖列表设置，而是覆盖列表中每个项目的各个属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:04:46.630

我认为您不应该从其他层的实体继承您的业务实体。改用映射（手动或使用[Automapper](http://automapper.org/)之类的工具）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:19:47.423

即使不是很清楚你想要达到什么目的，但考虑到你的评论：

> 所以我会创建另一个类 public class Worker ： Customer { public override CustomerAddress.TelephoneNumber {get; 放; 尝试像那样覆盖它是行不通的

我会这样做：

```
public class Customer 
{
    protected string telNumber =string.Empty; 
    public virtual string TelephoneNumber 
    {
      get { return telNumber ; }
      set {telNumber =value;}
    }
}

public class Worker : Customer 
{
   public override string TelephoneNumber 
   {
       get 
       {
          Console.WriteLine("Worker");
          return telNumber ; 
       }
       set {telNumber = value;}
   }
} 
```

之后，如果您在代码中使用它，如下所示：

```
Customer curst = new Worker(); 
var telNumber = curst.TelephoneNumber ; 
```

它会产生这样的输出：

```
Worker 
```

如果这不是您要的，请澄清。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:43:41.200

根据最初的设计，只有糟糕的解决方案：

```
 public class Customer
    {
        protected List<CustomerAddress> _customerAddresList 
           = new List<CustomerAddress>();
    }

    public class Worker : Customer
    {

    }

    public class CustomerAddress
    {
        protected string _Address1;
        public virtual string Address1
        {
            get { return "customer address: " + _Address1; }
            set { _Address1 = value; }
        }
    }

    public class WorkerAddress: CustomerAddress
    {
        public override string Address1
        {
            get { return "Worker Address: " + _Address1; }
        }
    } 
```

如果实体实例是继承的，我们有：

```
 // Inheriting instances

    public class CustomerBL : Customer
    {
        public void AddAdress(CustomerAddress address)
        {
            _customerAddresList.Add(address);
        }
    }

    public class WorkerBL: Worker
    {
        // Not inehritable, different signature
        public void AddAdress(WorkerAddress address)
        {
            _customerAddresList.Add(address);
        }
    } 
```

如果我们继承 BL 类，我们有：

```
 // Inheriting BL
    public class CustomerBL2 : Customer
    {
        public virtual void AddAdress(CustomerAddress address)
        {
            _customerAddresList.Add(address);
        }
    }

    public class WorkerBL2 : CustomerBL2
    {
        public override void AddAdress(CustomerAddress address)
        {
            if (!(address is WorkerAddress))
                throw new Exception();
            base.AddAdress(address);
        }
    } 
```

如果我们使用泛型，我们有这个

```
 // Using generics
    public class Generic<TAddress>
    {
        private List<TAddress> _addresList
            = new List<TAddress>();
        protected virtual List<TAddress> AddresList
        {
            get { return _addresList; }
        }
    }

    public class CustomerG : Generic<CustomerAddress>
    {
    }

    public class WorkerG : Generic<WorkerAddress>
    {

    } 
```

毫无疑问，问题在于有两种不同的继承链：

*   实体之一
*   另一个 BL 课程

并且不可能对哪个是正确的做法做出正确的决定（事实上，我认为，使用这种设计，没有办法做到正确）。

让实体和 BL 类相互独立要好得多，这样您就可以保持两个继承链独立，并决定在其链中可以继承和应该继承什么。

```
 public class Address
    {
    } 
```

实体可以相互继承。好吧，典型案例：

```
 public class Person
    {
        public List<Address> Adresses;
    }

    public class Worker: Person
    {
        // inherits adresses
    } 
```

继承 BL 类（不喜欢它）：

```
 public class PersonBl
    {
        // Functionality which is common fot all the inheritance chain
        public void PrintAdresses(Person person)
        {
        }

        // Functionality that can be specialized for each inherited entity
        public virtual void SaveAdresses(Person person)
        {
            // they're are treated differently in each case
        }

        // Functionality specific of person
        public void DoSomethingWithPerson(Person person)
        {
            // TODO
        }
    }

    public class WorkerBl : PersonBl
    {
        // Uses PersonBl PrintAdresses

        public override void SaveAdresses(Person person)
        {
            // do it for worker
        }

        // Functionality specific of Worker
        public void DoSomethingWithWorker(Worker worker)
        {
            // TODO
        }
    } 
```

“使用其他 BL 类的 BL 类”（这就是我喜欢的方式）：

```
 public class Person2Bl
    {
        // Functionality which is common for all the inheritance chain of entities
        public void PrintAdresses(Person person)
        {
        }

        public void SaveAdresses(Person person)
        {
           // specific for person
        }

        // Functionality specific of person
        public void DoSomethingWithPerson(Person person)
        {
        }
    }

    // doesn't inherit:

    public class Worker2Bl
    {
        // Use the logic in PersonBl2
        public void PrintAdresses(Worker worker)
        {
            // Really not necessary -> this could be done directly in the app code
            Person2Bl bl = new Person2Bl();
            bl.PrintAdresses(worker);
        }

        public void SaveAdresses(Worker worker)
        {
           // specific of Worker
        }

        public void DoSomethingWithWorker(Worker worker)
        {
            // specific of worker
        }
    } 
```

实际上，最好有一个 WorkerBl2 和 PersonBl2 都可以使用的 AddressBl

# ruby-on-rails - Rails - 使用部分或特定控制器视图时覆盖页面元素

> ID：10225645
> 
> 赞同：10
> 
> 时间：2012-04-19T09:55:10.660
> 
> 标签：ruby-on-rails, erb, ruby-on-rails-3.2

有没有办法`<head>`在 Rails 视图中附加或覆盖页面元素？

假设我有一些我只想包含在特定视图中的东西`<head>`，并且我正在使用`application.html.erb`来渲染我的其余视图。在这种情况下，我不想丢弃`application.html.erb`，而只是将其附加到一个特定页面的 head 元素上，仅此而已。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-19T10:17:24.267

在你的`application.html.erb`：

```
<head>
  <% if content_for? :for_head %>
    <%= yield :for_head %>
  <% end %>
</head> 
```

在您的“特定”视图中：

```
<% content_for :for_head do %>
  Something-to-put-in-head
<% end %> 
```

`:for_head`未预定义：命名由您决定。它可以是任何东西。

# linq - Linq to sql 查询检查用户名是否存在于表中？

> ID：10225655
> 
> 赞同：0
> 
> 时间：2012-04-19T09:55:47.817
> 
> 标签：linq, entity-framework, linq-to-sql, linq-to-entities

任何人请告诉我如何使用 linq to sql 和实体框架为**用户编写查询是否已经存在或不存在于表中？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T09:59:34.283

```
bool doesUserExist = myContext.Users.Any(u=>u.Username == "bob" && u.Password=="mypassword"); 
```

# java-me - J2ME 中的 Seekbar 和 Seek 功能

> ID：10225656
> 
> 赞同：1
> 
> 时间：2012-04-19T09:55:48.897
> 
> 标签：java-me, lwuit, midp, mmapi

如何在 J2ME 中为视频/音频播放器设计搜索栏及其功能？

我在 LWUIT 中尝试过使用 Slider Component，但它不能完美地工作。

使用了 WTK 示例中的示例代码，但是如果我们使用 J2ME Canvas，设计其他组件太难了。

# python - `Between` 使用 python 查询 mongodb

> ID：10225657
> 
> 赞同：0
> 
> 时间：2012-04-19T09:55:52.290
> 
> 标签：python, mongodb

我收集了下一个数据：

```
{
    status: "suspended",
    number: "087495623"
    hits: 10
}
{
    status: "pending",
    number: "035672790"
    hits: 30
}
{
    status: "approved",
    number: "048750023"
    hits: 20
} 
```

我想选择 hits > 10 和 hits < 30 的记录我正在使用 python 生成查询，所以我执行下一个：

```
dict = {"hits": {"&gt": 10}}
dict.update({"hits": {"&lt": 30}}) 
```

所以我试图在 dict: {"hits": {">": 10}, "hits": {"<": 30}} 中获取下一个值，然后执行：

```
db.test.find(dict) 
```

我只想获得第二行（点击次数> 10 并且点击次数< 30），但我也获得了第一行，因为当我使用相同的键更新 dict 时，它基本上会重写前一行。有什么我可以在这里做的吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:06:03.210

你所要做的：

```
dict['hits'].update({'&lt': 30}) 
```

而不是您的更新电话。

# linq - 类似于 LINQ 的 DefaultIfEmpty 和 FirstOrDefault 的 Groovy 方法

> ID：10225658
> 
> 赞同：4
> 
> 时间：2012-04-19T09:55:53.900
> 
> 标签：linq, groovy

Groovy 是否有任何方法（开箱即用）类似于 LINQ 中的 DefaultIfEmpty 或 FirstOrDefault 方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T10:24:09.273

`DefaultIfEmpty`可以覆盖：

```
def list = []
def defaultIfEmpty = list ?: [ 'was empty' ] 
```

`FirstOrDefault`更棘手，因为我相信如果列表中没有第一个元素，它会返回给定类型的默认值......但是，在 Groovy（就目前而言）中，无法检测对象的默认类型（除非它是原生类型）

你可以这样做：

```
Integer defaultIfEmpty = list[ 0 ] ?: 0 
```

然而应该注意的是`elvis operator ?:`Groovy[的真值](http://docs.codehaus.org/display/GROOVY/Groovy+Truth)，所以如果运算符左侧的元素在 Groovy 中的计算结果为 false（无论是`null`空列表还是字符串，数字 0 等），它将返回右手边）

还需要注意的是，我不是 .NET 专家，所以这两个函数的功能可能不正确。

# solr - solr 不区分大小写

> ID：10225660
> 
> 赞同：0
> 
> 时间：2012-04-19T09:55:59.800
> 
> 标签：solr, case-sensitive

我有一个问题，我试图搜索一个字段，就像 `modelnumbers:"ModeL SX4"`我没有得到数据一样。我试图使大小写不敏感的字段如下所示：

```
<arr name="modelnumbers">
<str>Model sX4</str>
</arr> 
```

尝试了所有可能的解决方案，例如在我的 schema.xml 中添加以下内容：

```
<fieldType name="text" class="solr.TextField" positionIncrementGap="100" autoGeneratePhraseQueries="true" >
   <analyzer type="index">
      <tokenizer class="solr.WhitespaceTokenizerFactory"/>
      <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
      <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
      <filter class="solr.LowerCaseFilterFactory" ignoreCase="true"/>
      <filter class="solr.PorterStemFilterFactory"/>
      <filter class="solr.StopFilterFactory"  ignoreCase="true"/>
   </analyzer>

   <analyzer type="query">

      <tokenizer class="solr.WhitespaceTokenizerFactory"/>
      <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
      <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
      <filter class="solr.LowerCaseFilterFactory" ignoreCase="true"/>
      <filter class="solr.StopFilterFactory"  ignoreCase="true"/>
      <filter class="solr.PorterStemFilterFactory"/>
   </analyzer>
</fieldType> 
```

并将其与以下字段一起使用：

```
 <field name="modelnumbers" type="text"   indexed="true"  stored="true"  multiValued="true" /> 
```

多次重新发布我的数据。不工作。如果我搜索“model sX4”，它可以工作，但任何其他修改，如“ModelL SX4”，都失败了。结果没有一致性。如果我尝试搜索“24aAB3”，另一个字段看起来像：“24AAB3”。这也行不通。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:51:20.180

您的问题位于 WordDelimiterFilterFactory 中。因为它将“ModelL SX4”拆分为“ModeL SX 4”或类似的东西。所以把 LowerCaseFilterFactory 放在 tokenizer 之后就可以了。

# jquery - Colorbox iframe 未在同一页面上打开

> ID：10225666
> 
> 赞同：0
> 
> 时间：2012-04-19T09:56:21.857
> 
> 标签：jquery, colorbox

我正在使用 colorbox iframe 打开外部页面的弹出窗口。在 HTML 页面中，有一些 HTML 内容和来自 javascript 的一些内容（在 AJAX 调用之后）附加到 HTML ul 标记。

类似于 // 初始化颜色框 $(".iframe").colorbox({iframe:true, width:"80%", height:"80%"}); // 这是在 document.ready 函数中 // 主页

```
<ul>
</ul>
</div>
<script>
---Some AJAx QUERY 
-- USE THE DATA FROM ajax QUERY TO CREATE A NEW <UL>
var ul_append="<a class=iframe href=#> </a>"
$(ul_append).appendTo('#grid10 ul');
</script> 
```

所以我看到的问题是，当我单击 ul_append 形成的标签时，它给了我这个错误

```
$close.html(settings.close).show is not a function
$close.html(settings.close).show(); 
```

"

前一个工作得很好......任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:37:35.330

我的猜测是您正在加载的 ajax 内容也包含 jQuery。这个 jQuery 的第二个版本正在用 colorbox 插件替换您最初加载和扩展的 jQuery 库，这在尝试使用它时会导致问题。

# java - Java方法表

> ID：10225668
> 
> 赞同：5
> 
> 时间：2012-04-19T09:56:28.567
> 
> 标签：java, jvm, virtual-machine, vtable

我学到了很多关于 C++ 如何在存在继承（多重、虚拟等）的情况下管理其虚拟表以及它如何将对象放置在内存中。

现在，Java 只需要担心单行继承，没有实例方法隐藏等，因此在这种情况下虚拟表应该更简单一些。我知道`Class`文件充当方法区域的“网关”，其中存储类型定义，包括我认为的方法字节码。我想到以下两个问题：

1.  Java中是否有任何vtable/method表结构？它是如何存储和链接到`Class`对象的？
2.  继承/动态方法调用如何解决？我的意思是：

具有以下类和实例：

```
class A{ int f(){...} }
class B extends A{ int f(){...} }

A a = new B();
a.f(); 
```

调用 B 中的 f()。A 通过 B 的文件解析`Class`正确的方法指针吗？

非常感谢您的评论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T10:03:24.973

在 Java 中，只指定了它必须做什么，没有指定它是如何做的。这有一些优点，因为可以以 C++ 不允许的方式优化代码。例如，“虚拟”方法可以由 JVM 内联，即使它们来自不同的库/jar。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T10:26:37.973

调用`a.f()`在 java 字节码汇编语言中实现为：

```
aload_1 // load the local variable a, here from local address 1
invokevirtual with index into the constant pool for
    method ref:
        class "A"
        nameAndType "f", "()I" 
```

在运行时，vtable 可能会解决对 Bf() 的调用。但正如您所见，类格式非常抽象，JVM 可以完全自由地加载类以实现“高效”实现。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-19T10:02:10.637

[这](https://stackoverflow.com/questions/460446/virtual-functions-in-c-sharp-and-java)是一个相关问题，其中包含正确链接的答案。需要注意的一点是，在我引用的 SO 问题中没有明确说明，Java 中的所有方法都是隐式虚拟的。如果对技术细节感到好奇，请查看[jvm.h](http://opensource.apple.com/source/gcc/gcc-1640/libjava/include/jvm.h)（搜索字符串“vtable”）。

# vb.net - 设置 TextBox 使用户不能输入非数字字符或空格

> ID：10225669
> 
> 赞同：-2
> 
> 时间：2012-04-19T09:56:29.580
> 
> 标签：vb.net, textbox

有没有办法设置 a `TextBox`in`vb`使其不接受用户输入的空格或非数字字符？我正在编写一个程序，`TextBox`其中`phoneField`用户应该只输入数字，如果用户尝试输入非数字字符或空格，则不应在`TextBox`. 那怎么可能呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:49:18.893

首先在掩码中使用 0 以仅允许数字字符。二、将ResetOnSpace属性赋值为false

> Me.MaskedTextBox.ResetOnSpace = False

这将拒绝用户输入的任何空格，除非它是提示的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:48:57.333

这是错误的处理方式。你会让你的用户对你的应用大发雷霆。取而代之的是，让他们输入他们想要的任何内容，并在后端编写代码，首先去除任何非数字，然后验证结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T22:58:27.157

我使用继承的 TextBox 控件完成了类似的操作。

这种方式的好处是它允许剪切、复制和粘贴正常工作。

```
''' <summary>
''' A TextBox control that only allows numeric input
''' </summary>
''' <remarks>Allows cut, copy and paste</remarks>
Public Class NumericTextBox
    Inherits TextBox
    Private _textBefore As String = ""
    Protected Overrides Sub OnTextChanged(e As System.EventArgs)
        Me.SuspendLayout()
        If MyBase.Text.Length > 0 AndAlso Not IsNumeric(MyBase.Text) Then
            ' The text has been changed to a non numeric value
            Dim selectionStart As Integer = MyBase.SelectionStart
            MyBase.Text = _textBefore
            MyBase.SelectionStart = selectionStart
        Else
            ' The current text is numeric (or blank) remember it in case it changes to an invalid value
            _textBefore = MyBase.Text
        End If
        MyBase.OnTextChanged(e)
        Me.ResumeLayout()
    End Sub
End Class 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T10:00:28.540

使用[MaskedTextBox 类](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.aspx)

类似的东西：

```
Me.MaskedTextBox1.Mask = "0-000-0000000" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-16T05:05:35.640

实际上，如果您的提示字符是空格，则正确的设置有效：

```
 .AllowPromptAsInput = False    
    .Mask = "00"     
    .ResetOnPrompt = False
    .ResetOnSpace = True 
```

# objective-c - 重新显示我的主 Cocoa 应用程序窗口

> ID：10225673
> 
> 赞同：4
> 
> 时间：2012-04-19T09:56:52.787
> 
> 标签：objective-c, macos, cocoa, nswindow

好的，尽管看起来很简单和愚蠢，但这是我的场景：

*   应用程序窗口（只有一个主窗口）被最小化
*   用户单击停靠菜单上的某些内容
*   我们想把那个主窗口带回来

简单的？

不完全的。

我尝试通过以下方式访问我的主窗口：

*   `[[NSApplication sharedApplication] mainWindow]`
*   `[[NSApplication sharedApplication] windows]`

然后发送一条`makeKeyAndOrderFront:`消息，但它根本没有出现。

我什至尝试过显示所有窗口（是的，它仍然认为我正在使用的“窗口”一两个（隐藏）表......），但仍然没有。

你能建议一种方法吗，我终于可以展示那个窗口，而不必在任何地方设置一个插座？

我不知道; 我可能太累了，没注意到，但这件事几乎是伤脑筋的……

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T10:34:54.680

您可以像这样取消最小化窗口：

```
if([aWindow isMiniaturized])
{
   [aWindow deminiaturize:self];
} 
```

但是，问题是窗口在最小化时会失去主要状态，因此您需要一些其他方法来识别窗口。

为什么不能只使用插座？

您可以让应用程序取消最小化所有最小化的窗口，如下所示：

```
for(NSWindow* win in [NSApp windows])
{
    if([win isMiniaturized])
    {
        [win deminiaturize:self];
    }
} 
```

当应用程序启动时，您可以存储对主窗口的引用并注册`NSWindowDidMiniaturizeNotification`. 这将告诉您主窗口何时最小化，这也可能对您有所帮助。

# javascript - Google Maps Javascript API v3 返回不同的 JSON？

> ID：10225674
> 
> 赞同：0
> 
> 时间：2012-04-19T09:56:57.940
> 
> 标签：javascript, json, google-maps-api-3

我知道[Google 给出的 JSON 输出格式](https://developers.google.com/maps/documentation/geocoding/#JSON)

但是，我有时会得到[稍微不同的格式](http://jsonviewer.stack.hu/#http://hastebin.com/raw/hubifinowa)。这是来自`results`回调函数中的变量`gecoder.geocode({'address': address}, callback)`

```
"location": {
          "Za": 37.3492097,
          "$a": -122.03260190000003
        }, 
```

...

```
"viewport": {
          "aa": {
            "b": 37.329901,
            "f": 37.37543489999999
          },
          "ba": {
            "b": -122.06526500000001,
            "f": -121.99577999999997
          }
        } 
```

注意位置、边界和视口下的键 - 它们与标准不同。这对我来说是个问题，因为我需要通过~~AJAX 调用~~将这个 JSON 发送到我的服务器并解析它，而我的解析器不能将“$a”作为有效的键名。

这是正常的还是我错过了什么？

编辑：我在云托管平台（salesforce.com）上。我们正在使用 Javascript API v3。我能够从本地 HTML 文件中复制此问题。 ~~我现在想这可能是因为我支持公司代理。有人遇到过这个吗？~~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:51:46.340

如果您仅使用记录的方法并获得未记录的响应，那么这是一个错误。在[问题列表](http://code.google.com/p/gmaps-api-issues/issues/list)中提交问题- 如果有一个始终产生错误响应的演示者地址，您将需要包含一个演示者地址。如果没有始终如一的错误地址，请提供尽可能多的详细信息。例如，重复的请求太靠近会发生这种情况吗？

确保您还使用不同的浏览器客户端进行测试，甚至可能使用不同的机器。您当前的浏览器或计算机中可能存在异常，导致 API 行为异常。

我建议用问题编号评论这个答案以供将来参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:52:48.523

正如对错误报告和 API 文档的评论中所指出的，`response`回调中的对象不是纯 JSON。为了得到一个 JSON 对象，我需要自己创建一个，如下所示：

```
//assume status is ok

var bestResult = getBestResultFromJSON(results);

var bounds = {'northeast' : {'lat' : 0, 'lng' : 0}, 'southwest' : {'lat' : 0, 'lng' : 0}};
var location = {'lat' : 0, 'lng' : 0};
var viewport = {'northeast' : {'lat' : 0, 'lng' : 0}, 'southwest' : {'lat' : 0, 'lng' : 0}};
// bounds not always available (https://developers.google.com/maps/documentation/javascript/reference#GeocoderGeometry)
if(bestResult.geometry.hasOwnProperty(bounds)) {
    bounds.southwest.lat = bestResult.geometry.bounds.getSouthWest().lat();
    bounds.southwest.lng = bestResult.geometry.bounds.getSouthWest().lng();
    bounds.northeast.lat = bestResult.geometry.bounds.getNorthEast().lat();
    bounds.northeast.lng = bestResult.geometry.bounds.getNorthEast().lng();
}
else {
    bounds = null;
}                       

viewport.southwest.lat = bestResult.geometry.viewport.getSouthWest().lat();
viewport.southwest.lng = bestResult.geometry.viewport.getSouthWest().lng();
viewport.northeast.lat = bestResult.geometry.viewport.getNorthEast().lat();
viewport.northeast.lng = bestResult.geometry.viewport.getNorthEast().lng();

location.lat = bestResult.geometry.location.lng();
location.lng = bestResult.geometry.location.lng();

var jsonResults = {'results' : [{'address_components' : bestResult.address_components,
              'formatted_address': bestResult.formatted_address,
              'geometry' : {'bounds' : bounds, 'location' : location, 'location_type' : bestResult.location_type, 'viewport' : viewport},
              'types' : bestResult.types}], 'status' : status}; 
```

# html - 如何自动设置宽度？

> ID：10225678
> 
> 赞同：0
> 
> 时间：2012-04-19T09:57:13.557
> 
> 标签：html, css

我需要创建一个包装器（容器）（内部有 2 到 4 个 div），例如：

```
<div class="wrapper">
   <div></div>
   <div></div>
   <div></div>
   <div></div>
</div> 
```

我的问题是我不能设置内部 div 的宽度，因为它们必须具有相等的宽度，所以如果我的包装器是 300 像素并且我只有两个内部 div（一次 150 像素）等等。

但我无法将宽度设置为 .css 文件，因为正如我所说，可以有 2 到 4 个 div。

问题是：是否可以自动调整内部 div 的大小（以获取整个包装器的宽度）？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T10:07:55.660

您可以`display:table`为此使用属性：

```
.wrapper{
    width:300px;
    border:2px solid green;
    display:table;
}
.wrapper > div{
    display:table-cell;
    border:1px solid red;
    height:50px;
} 
```

检查这个[http://jsfiddle.net/7E9Nj/](http://jsfiddle.net/7E9Nj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T10:00:08.313

也许使用百分比？如果您有 2 个 div，请放置`style="width:50%"`在每个 div 上。如果您有 4 个 div，请放置`style="width:25%"`在每个 div 上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T10:03:41.093

您可能想在您的内部 div 中尝试 %

例如，你可以有这样的东西：

```
<div id="wrapper">
    <div style="width:25%"></div>
    <div style="width:25%"></div>
    <div style="width:25%"></div>
    <div style="width:25%"></div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T10:10:39.207

试试jquery。这将起作用。

```
$(document).ready(function(){
var divWidth = parseInt($('.wrapper').css('width'));
var divSizes = parseInt($('.wrapper >div').size());
var divWidth = divWidth/divSizes;

$('.wrapper >div').each(function(){
$(this).css('width', divWidth+'px')
})
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T10:14:06.077

你可以简单地做到这一点

```
#wrapper > div {
  float:left;
  width:25%;
} 
```

# php - 无需登录即可存储信息

> ID：10225680
> 
> 赞同：0
> 
> 时间：2012-04-19T09:57:18.753
> 
> 标签：php

如果任何网站访问者在未登录应用程序的情况下填写表格，那么如果他从同一台电脑再次访问该网站，那么他应该能够查看他最后填写的信息。

但我不知道该怎么做。它是一个 PHP 应用程序。

谢谢高拉夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:06:28.000

Cookie 可能是最好的选择，但您可以使用 html 5、javascript 和[本地存储](http://www.w3schools.com/html5/html5_webstorage.asp)来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T10:01:28.593

您可以跟踪用户 IP 的记录，以便在用户填写表格时可以使用它的值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T10:02:28.593

一种可能的解决方案是将用户提供的信息保存到 cookie 中。但是 cookie 是由浏览器处理的，如果用户在关闭后告诉他的浏览器删除 cookie，信息将会丢失。

因此，这取决于用户的浏览器设置是否有效。

(http://php.net/manual/de/function.setcookie.php)

新浏览器的另一个解决方案是使用 DOM 存储作为 Supercookie。或者直接将表单信息存储到本地存储。

两者都是 HTML5 功能，并未在所有浏览器中正确实现。

[dom-storage-super-cookie](http://webdevwonders.com/dom-storage-super-cookie/)

[html5_webstorage](http://www.w3schools.com/html5/html5_webstorage.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T10:00:20.413

将信息存储在 cookie 中。当用户再次从同一个浏览器访问并预填写您的表单元素时，请阅读这些内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T10:01:45.593

一种可能的解决方案是使用持久性 cookie - 它们附加到浏览器并过期会话和浏览器重新启动。见[https://en.wikipedia.org/wiki/HTTP_cookie#Persistent_cookie](https://en.wikipedia.org/wiki/HTTP_cookie#Persistent_cookie)

如果用户愿意，可以拒绝和删除这些 cookie。

# sql - 在 SQL Server 的一行中获取总计

> ID：10225681
> 
> 赞同：0
> 
> 时间：2012-04-19T09:57:24.020
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

我有一个非常简单的 SQL 查询，它通过以下方式获得结果

```
COL-A         COL-B 
WINDCHILL   99.998889
WINDCHILL   96.000000 
```

现在我如何修改我的查询，以便在一行中获得总数？

```
COL-A         COL-B 
WINDCHILL   195.99 
```

必要的查询如下；

```
SELECT ISNULL([Task IT Assets], [Project IT Asset]) AS Asset ,
        SUM(P.ActualWork) AS taskHours
FROM    [IR.TimesheetHoursProjectTask] p
WHERE   p.ActualWork > 0
AND ([Task IT Assets] IS NOT NULL OR [Project IT Asset] IS NOT NULL)
GROUP BY ISNULL([Task IT Assets], [Project IT Asset]), ActualWork
ORDER BY p.ActualWork DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:14:44.453

很难理解您提供的数据与您提供的查询之间的关系。

该查询似乎完全符合您的需要，按资产分组的任务小时数。如果由于某种原因它没有，您可以使用 CTE：

```
with MY_QUERY as (
SELECT ISNULL([Task IT Assets], [Project IT Asset]) AS Asset ,
        SUM(P.ActualWork) AS taskHours
FROM    [IR.TimesheetHoursProjectTask] p
WHERE   p.ActualWork > 0
AND ([Task IT Assets] IS NOT NULL OR [Project IT Asset] IS NOT NULL)
GROUP BY ISNULL([Task IT Assets], [Project IT Asset]), ActualWork
)
select asset, taskHours
from MY_QUERY 
group by asset 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T10:01:23.213

您已经标记了两个特定的 sql 版本，但假设您可以使用支持公用表表达式的版本：

```
with sumTable as
(
    SELECT ISNULL([Task IT Assets], [Project IT Asset]) AS Asset ,  
            SUM(P.ActualWork) AS taskHours  
    FROM    [IR.TimesheetHoursProjectTask] p  
    WHERE   p.ActualWork > 0  
    AND ([Task IT Assets] IS NOT NULL OR [Project IT Asset] IS NOT NULL)  
    GROUP BY ISNULL([Task IT Assets], [Project IT Asset]), ActualWork   
)

SELECT Asset, Sum(taskHours)
FROM sumTable
GROUP BY Asset 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T10:01:36.113

一个快速的方法：

```
SELECT Asset, SUM(taskHours) FROM (
SELECT ISNULL([Task IT Assets], [Project IT Asset]) AS Asset ,
    SUM(P.ActualWork) AS taskHours
FROM    [IR.TimesheetHoursProjectTask] p
WHERE   p.ActualWork > 0
AND ([Task IT Assets] IS NOT NULL OR [Project IT Asset] IS NOT NULL)
GROUP BY ISNULL([Task IT Assets], [Project IT Asset]), ActualWork
) as table1
ORDER BY 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T10:01:39.283

我认为问题是你不应该`ActualWork`在你的`GROUP BY`条款中有。

试试这个：

```
SELECT ISNULL([Task IT Assets], [Project IT Asset]) AS Asset ,
        SUM(P.ActualWork) AS taskHours
FROM    [IR.TimesheetHoursProjectTask] p
WHERE   p.ActualWork > 0
AND ([Task IT Assets] IS NOT NULL OR [Project IT Asset] IS NOT NULL)
GROUP BY ISNULL([Task IT Assets], [Project IT Asset])
ORDER BY SUM(P.ActualWork) DESC 
```

# ruby-on-rails - RSpec 集成测试示例运行两次

> ID：10225682
> 
> 赞同：3
> 
> 时间：2012-04-19T09:57:26.070
> 
> 标签：ruby-on-rails, testing, rspec, integration

我最近开始在我的 Rails 应用程序中使用 RSpec 进行集成测试，以避免必须与多个测试框架保持同步，并且正在将我的 Cucumber 功能转换为 RSpec。

我已经成功运行了 1 个集成测试，但是，它似乎运行了两次该示例：

```
rspec spec/integration/create_article_spec.rb -f documentation

admin creates article
  successfully creates article

admin creates article
  successfully creates article

Finished in 0.51816 seconds
2 examples, 0 failures 
```

这是 create_article_spec.rb 的内容：

```
require 'spec_helper'

feature "admin creates article" do
 scenario "successfully creates article" do
  visit admin_articles_url
  click_link "New Article"
  fill_in "Title", with: "Test 1"
  fill_in "Body", with: "Test Article"
  click_button "Save"
  page.should have_content "New Article Published"
 end
end 
```

我找不到任何可能发生这种情况的原因，并且发生这种情况的所有其他情况都不适用于我的情况。

它似乎只发生在我的集成测试中，所有其他测试似乎都没有受到影响。

我希望有更多 RSpec 知识的人能找出我可能遗漏的地方。

# 版本

Rails (3.2.2) RSpec (2.8.0) RSpec-rails (2.8.1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T14:57:44.957

我意识到我的 spec_helper.rb 文件中有一行，包括我的集成测试文件夹中的所有文件，所以它们实际上被加载了两次。我删除了那条线，它解决了我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:57:11.113

您是否从以前版本的 rspec 升级？如果是这样（即使你没有检查）你可能有一个多余的`lib/tasks/rspec.rake`脚本。如果这样做，请删除该文件并重新运行测试。然后您应该看到它们只执行一次。

# android - 如何在android中的谷歌地图上设置自定义图标

> ID：10225687
> 
> 赞同：1
> 
> 时间：2012-04-19T09:58:03.697
> 
> 标签：android, google-maps, icons

我有谷歌地图的代码，因为我得到了三件事切换视图、定位和获取地址。查看我的输出图像。

这是我的 java 警报框代码

```
 if(stop - start > 1000){
            AlertDialog alert = new AlertDialog.Builder(Map1.this).create();
            alert.setTitle("pick an Option");
            alert.setMessage("I told to pick an option");
            alert.setButton("place a pinpoint", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {

                    OverlayItem overlayItem = new OverlayItem(touchedPoint,"what's up","2nd String");
                    CustomPinpoint custom = new CustomPinpoint(d, Map1.this);
                    custom.insertPinpoint(overlayItem);
                    overlayList.add(custom);

                }
            });

            alert.setButton2("get address", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {

                Geocoder geocoder = new Geocoder(getBaseContext(), Locale.getDefault());    
                    try{
                        List<Address> address = geocoder.getFromLocation(touchedPoint.getLatitudeE6() / 1E6, touchedPoint.getLongitudeE6() / 1E6, 1);
                        if(address.size() > 0){
                            String display = "";
                            for(int i = 0; i<address.get(0).getMaxAddressLineIndex(); i++){

                                display +=address.get(0).getAddressLine(i) + "\n";
                            }
                            Toast t = Toast.makeText(getBaseContext(), display, Toast.LENGTH_LONG);
                            t.show();
                        }

                    }catch(IOException e){

                    }
                }
            });

            alert.setButton3("Toggle View", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {

                    if(map.isSatellite()){
                        map.setSatellite(false);
                        map.setStreetView(true);
                    }else{ 
                        map.setStreetView(false);
                        map.setSatellite(true);
                    }

                }
            });

            alert.show();
            return true;
        } 
```

结果输出

![在此处输入图像描述](../Images/402cbb02c327c27eae9bebba0c94af09.png)

现在我想要的是，我必须再添加一个警报按钮来设置自定义图像图标（取自我们的手机 sd 卡）。因为当我们直接按下按钮时，就像浏览按钮一样设置图像，最后拍摄的图像将被设置在谷歌地图上。每当我们打开地图时，该图像也需要显示。如果您有相关代码，请发布。

# vim - 通过按 - 在 :Gstatus 窗口中切换文件显示“按 ENTER 或键入命令继续”消息

> ID：10225689
> 
> 赞同：1
> 
> 时间：2012-04-19T09:58:14.663
> 
> 标签：vim, vim-fugitive

我尝试了在[这里](http://vim.wikia.com/wiki/Avoiding_the_%22Hit_ENTER_to_continue%22_prompts)和[这里](http://vimdoc.sourceforge.net/htmldoc/message.html#hit-enter)找到的所有内容，以摆脱该消息，但无济于事。

如果我将 cmdheight 设置为 >1，那么它适用于一些切换，然后再次显示可怕的消息。（我可以将 cmdheight 设置为例如 3 以防止这种情况，但命令行看起来很难看）

`:file!`我试图通过检查值来查找使其显示消息的消息：

```
".git/index" [Not edited][RO] line 10 of 10 --100%-- col 1 
```

这应该不是问题，我想。

我还检查了`:v:scrollstart`变量：

```
1 # On branch master
2 # Your branch is ahead of 'origin/master' by 1 commit.
3 #
4 # Changes not staged for commit:
5 #   (use "git add <file>..." to update what will be committed)
6 #   (use "git checkout -- <file>..." to discard changes in working directory)
7 #
8 # modified:   zshrc
9 #
10 no changes added to commit (use "git add" and/or "git commit -a") 
```

可能是这样，但我不确定。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:17:10.797

我想这是键绑定。尝试：

```
:nnoremap - :<C-U>silent! execute <SNR>20_StageToggle(line('.'),line('.')+v:count1-1)<CR> 
```

如果这样可以解决问题，您需要使用相应的更改来更新 fugitive.vim

除此之外，您可以使用调试模式

```
:debug execute <SNR>20_StageToggle(line('.'),line('.')+v:count1-1) 
```

最后，查看文件（尤其是 .git/index 或 .git/index.lock）是否可访问和可写。

# r - 从向量中删除带有标签的数据

> ID：10225690
> 
> 赞同：0
> 
> 时间：2012-04-19T09:58:16.567
> 
> 标签：r

我有一个包含 html 标签的字符串向量，例如

```
 abc<-""welcome <span class=\"r\"><a href=\"abc\">abc</a></span> Have fun!"" 
```

我想删除这些标签并获得以下矢量

例如

```
 abc<-"welcome Have fun" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:08:46.783

尝试

```
> gsub("(<[^>]*>)","",abc) 
```

这说的是'用任何不是>的任何东西替换<的每个实例，直到一个>，什么都没有”

你不能这样做`gsub("<.*>","",abc)`，因为正则表达式是贪婪的，并且 .* 会匹配你文本中的最后一个 > （并且你会在你的例子中失去'abc'）。

如果您的标签中有 >，此解决方案可能会失败 - 但是否`<foo class=">" >`合法？毫无疑问，有人会想出另一个答案，涉及使用重量级 XML 包解析 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:00:56.563

`htmlParse`您可以使用或将您的 HTML 片段转换为 XML 文档 `htmlTreeParse`。然后，您可以将其转换为文本，即用 . 去除所有标签`xmlValue`。

```
abc <- "welcome <span class=\"r\"><a href=\"abc\">abc</a></span> Have fun!"
library(XML)
#doc <- htmlParse(abc, asText=TRUE)
doc <- htmlTreeParse(abc, asText=TRUE)
xmlValue( xmlRoot(doc) ) 
```

如果您还想删除链接的内容，可以使用`xmlDOMApply`XML 树进行转换。

```
f <- function(x) if(xmlName(x) == "span") xmlTextNode(" ") else x
d <- xmlDOMApply( xmlRoot(doc), f )
xmlValue(d) 
```

# android - 更新 ADT pugin 时出错“java.lang.NoClassDefFoundError: org.ksoap2.serialization.SoapObject”

> ID：10225696
> 
> 赞同：0
> 
> 时间：2012-04-19T09:58:43.510
> 
> 标签：android, android-emulator, ksoap2, android-ksoap2

这是我得到的错误......我试过像属性库一样将jar文件更改为单独的文件夹Libs ..

```
 04-19 15:02:58.419: E/AndroidRuntime(428): FATAL EXCEPTION: main
    04-19 15:02:58.419: E/AndroidRuntime(428): java.lang.NoClassDefFoundError: org.ksoap2.serialization.SoapObject
    04-19 15:02:58.419: E/AndroidRuntime(428):  at com.emigos.ontime.OntimeGps5Activity.Login(OntimeGps5Activity.java:174)
    04-19 15:02:58.419: E/AndroidRuntime(428):  at com.emigos.ontime.OntimeGps5Activity$1.onClick(OntimeGps5Activity.java:80)
    04-19 15:02:58.419: E/AndroidRuntime(428):  at android.view.View.performClick(View.java:2485)
    04-19 15:02:58.419: E/AndroidRuntime(428):  at android.view.View$PerformClick.run(View.java:9080)
    04-19 15:02:58.419: E/AndroidRuntime(428):  at android.os.Handler.handleCallback(Handler.java:587)
    04-19 15:02:58.419: E/AndroidRuntime(428):  at android.os.Handler.dispatchMessage(Handler.java:92)
    04-19 15:02:58.419: E/AndroidRuntime(428):  at android.os.Looper.loop(Looper.java:123)
    04-19 15:02:58.419: E/AndroidRuntime(428):  at android.app.ActivityThread.main(ActivityThread.java:3683)
    04-19 15:02:58.419: E/AndroidRuntime(428):  at java.lang.reflect.Method.invokeNative(Native Method)
    04-19 15:02:58.419: E/AndroidRuntime(428):  at java.lang.reflect.Method.invoke(Method.java:507)
    04-19 15:02:58.419: E/AndroidRuntime(428):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    04-19 15:02:58.419: E/AndroidRuntime(428):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    04-19 15:02:58.419: E/AndroidRuntime(428):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:07:32.983

在项目中创建新文件夹“libs”并将所有外部Jar文件复制到该文件夹​​中。然后右键单击项目->属性->Java构建路径->在这里将Jar文件的路径更改为“Libs”文件夹并删除您从计算机路径中提供的外部 jar 文件的路径。之后它将起作用。

注意：如果您的项目中已经存在文件夹“lib”，则只需将文件夹名称“lib”更改为“libs”。如果您不明白我的意思，请查看此网站：

[http://xrigau.wordpress.com/2012/03/22/fix-some-problems-with-libraries-in-the-adt-17-plugin-10/](http://xrigau.wordpress.com/2012/03/22/fix-some-problems-with-libraries-in-the-adt-17-plugin-10/)

文件夹名称应该是“libs”而不是“Libs”

# xslt - 递归变量

> ID：10225703
> 
> 赞同：0
> 
> 时间：2012-04-19T09:58:58.220
> 
> 标签：xslt

第一个 XML

```
<?xml version="1.0"?>
<response>
<status>
<code>0</code>
</status>
<newsList>
<news>

<id>1</id>
<title>some</title>
<date>30.11.2011T00:00.00</date>
<shortText>some short text</shortText>
<important>LOW</important>

</news> 
```

第二个 XML

```
<?xml version="1.0"?>
<response>
<status>
<code>0</code>
</status>
<newsList>
<news>

<id>1</id>
<text>
Some text here
</text>
</news> 
```

结果应该是第一个 XML 中的标题日期和短文本以及第二个 XML 中的文本不正确。

到目前为止，我在 XSLT 之下。

```
<xsl:template match="response">
  <h2>My CD Collection</h2>
  <table border="1">
    <tr bgcolor="#9acd32">
      <th align="left">Title</th>
      <th align="left">shortText</th>
      <th align="left">date</th>
      <th align="left">text</th>
    </tr>
    <xsl:for-each select="newsList/news">   
    <tr>
     <td><xsl:value-of select="title" /></td>
      <td><xsl:value-of select="shortText" /></td>
      <td><xsl:value-of select="date" /></td>
      <td><xsl:value-of select="document('news-details.xml')//news[id=$id_news]/text"/>
     </td>
    </tr>
    </xsl:for-each>
  </table>
</xsl:template>
</xsl:stylesheet> 
```

但这将始终显示新闻编号 1 中的文本。

我知道不可能更新价值，但如何才能完成呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:21:50.830

这是一个使用密钥的示例：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

  <xsl:output method="html" version="5.0"/>

  <xsl:param name="url2" select="'news-details.xml'"/>
  <xsl:variable name="doc2" select="document($url2, /)"/>

  <xsl:key name="k1" match="news" use="id"/>

  <xsl:template match="/">
    <html>
      <head>
        <title>Example</title>
      </head>
      <body>
        <table>
          <thead>
            <tr>
              <th>Title</th>
              <th>short text</th>
              <th>date</th>
              <th>text</th>
            </tr>
          </thead>
          <tbody>
            <xsl:apply-templates select="//news"/>
          </tbody>
        </table>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="news">
    <xsl:variable name="id" select="id"/>
    <tr>
      <td><xsl:value-of select="title"/></td>
      <td><xsl:value-of select="shortText"/></td>
      <td><xsl:value-of select="date"/></td>
      <td>
        <xsl:for-each select="$doc2">
          <xsl:value-of select="key('k1', $id)/text"/>
        </xsl:for-each>
      </td>
    </tr>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:20:09.857

```
 <xsl:template match="response">
    <h2>My CD Collection</h2>
    <table border="1">
      <tr bgcolor="#9acd32">
        <th align="left">Title</th>
        <th align="left">shortText</th>
        <th align="left">date</th>
        <th align="left">text</th>
      </tr>
      <xsl:apply-templates select="newsList/news"/>
    </table>
  </xsl:template>

  <xsl:template match="newsList/news">
    <xsl:variable name="id_news" select="ID"/>
    <tr>
      <td><xsl:value-of select="title" /></td>
      <td><xsl:value-of select="shortText" /></td>
      <td><xsl:value-of select="date" /></td>
      <td>
        <xsl:apply-templates select="document('news-details.xml')//news[id=$id_news]/text"/>
      </td>
    </tr>
  </xsl:template>

  <xsl:template match="text">
    <xsl:value-of select="."/>
  </xsl:template> 
```

# android - 软件设计：在哪里打开和关闭数据库

> ID：10225709
> 
> 赞同：0
> 
> 时间：2012-04-19T09:59:09.907
> 
> 标签：android, database, design-patterns, architecture, software-design

我正在开发一个 android 3.1 应用程序。

这个问题不是针对Android的，它是关于如何设计一个访问数据库的类。我在这里问是因为我的代码是针对 Android 的。

我有一堂课，`DBManager`可以使用**Sqlite 数据库**。这是其实现的一部分：

```
public class DBManager
{
    // Variable to hold the database instance
    private SQLiteDatabase db;
    // Database open/upgrade helper
    private DatabaseHelper dbHelper;

    public DBManager(Context _context)
    {
        Log.v("DBManager", "constructor");
        dbHelper = new DatabaseHelper(_context, SqlConstants.DATABASE_NAME, null, SqlConstants.DATABASE_VERSION);
    }

    public DBManager open() throws SQLException
    {
        Log.v("DBManager", "open");
        db = dbHelper.getWritableDatabase();
        return this;
    }

    public void close()
    {
        Log.v("DBManager", "close");
        db.close();
    }

        ...

        /**
     * Query all forms available locally.
     * @return A list with all forms (form.name and form.FormId) available on local db
     * or null if there was a problem.
     */
    public ArrayList<Form> getAllForms()
    {
        Log.v("DBManager", "getAllForms");
        ArrayList<Form> list = null;
        Cursor c = null;

        try
        {
            c = this.getAllFormsCursor();
            if (c != null)
            {
                int formNameIndex = c.getColumnIndex(SqlConstants.COLUMN_FORM_NAME);
                int formIdIndex = c.getColumnIndex(SqlConstants.COLUMN_FORM_ID);

                c.moveToFirst();
                if (c.getCount() > 0)
                {
                    list = new ArrayList<Form>(c.getCount());
                    do
                    {
                        Form f = new Form();
                        f.Name = c.getString(formNameIndex);
                        f.FormId = c.getString(formIdIndex);
                        list.add(f);
                    }
                    while (c.moveToNext());
                }
            }
        }
        catch (Exception e)
        {
            e.printStackTrace();
            list = null;
        }
        finally
        {
            if (c != null)
                c.close();
        }
        return list;
    }

    private Cursor getAllFormsCursor()
    {
        Log.v("DBManager", "getAllFormsCursor");

        return db.query(SqlConstants.TABLE_FORM,
                new String[] {
                SqlConstants.COLUMN_FORM_ID,
                SqlConstants.COLUMN_FORM_NAME}, null, null, null, null, null);
    }
} 
```

这是一个 AsyncTask 使用`DBManager`：

```
private class DbFormListAsyncTask extends AsyncTask<Void, Void, ArrayList<Form>>
{
    private Context mContext;
    private ProgressDialog loadingDialog;
    private DBManager dbMan;

    DbFormListAsyncTask(Context context)
    {
        this.mContext = context;
        loadingDialog = new ProgressDialog(mContext);
        loadingDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        loadingDialog.setMessage("Retriving forms. Please wait...");
        loadingDialog.setCancelable(false);
        loadingDialog.show();
    }

    @Override
    protected ArrayList<Form> doInBackground(Void... arg0)
    {
        dbMan = new DBManager(mContext);
        dbMan.open();

        return dbMan.getAllForms();
    }

    protected void onPostExecute(ArrayList<Form> forms)
    {
        if (forms != null)
        {
            ListActivity act = (ListActivity) mContext;
            act.setListAdapter(new AvaFormAdapter(act, R.layout.ava_list_item, forms));
        }
        else
        {
            TextView errorMsg = (TextView)
                    ((FormsListActivity) mContext).findViewById(R.id.formErrorMsg);
            errorMsg.setText("Problem getting forms. Please try again later.");
        }
        loadingDialog.dismiss();
        if (dbMan != null)
            dbMan.close();
    }
} 
```

如您所见，我必须：

1.  创建 DBManager 实例。
2.  打开数据库`dbMan.open()`
3.  称呼`dbMan.getAllForms()`
4.  `dbMan.close()`使用on关闭数据库`onPostExecute`。

我认为我可以添加 db.open() 和 db.close()`dbMan.getAllForms()`以避免每次使用`dbMan.getAllForms()`.

你怎么看待这件事？最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:08:09.713

我会把它放在里面`getAllForms()`或做类似的事情

```
protected ArrayList<Form> doInBackground(Void... arg0)
{
    dbMan = new DBManager(mContext);
    dbMan.open();
    ArrayList<Form> resutl = dbMan.getAllForms();
    dbMan.close();
    return result;
} 
```

由于您在获得结果后不需要数据库连接，您可以立即将其关闭。

编辑：如果您多次运行该 AsyncTask ，则打开/关闭将引入不必要的开销。在这种情况下，您可能希望从您的 Activity 中实例化 dbManager（可能是 DbManager 的构造函数中的 open()），并在您离开 Activity 后将其关闭。然后将 Dbmanager 传递给 AsyncTask。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T02:33:14.433

使您的数据库助手类成为单例，并且不要显式关闭`SQLiteDatabase`. 当您的应用程序的进程退出时，它将被关闭并刷新。

# php - 保护 PHP 代码

> ID：10225714
> 
> 赞同：-1
> 
> 时间：2012-04-19T09:59:28.517
> 
> 标签：php

我为一个客户做了相当大的项目，我想（以某种方式）确保代码表单事件中不诚实的客户不会为我的工作付钱。:) 合同中写明项目必须为应用程序提供来源。到目前为止，我主要是在 .NET 中编写代码，以保护自己免受这样的可能性，即我正在创建类女巫获取 POST 带有关闭应用程序的一些参数。这个类被扔进了一个已经编译好的dll中，所以没有人可以改变源代码。PHP中是否有类似的可能性？我可以做同样的事情（在 .NET 案例中），但是可以访问 PHP 的聪明客户可以找到上面的类，我只是把它删掉了。也许这是保护自己的其他方式？出于与上述类似的原因，也取消了对数据库的缝合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:37:19.797

PHP 是一种解释型语言；因此，它不会编译您的代码。您最好的选择是坚持使用 .NET，您可以在其中将应用程序的功能部分编译成 .dll，或者使用 Java 并将其编译成字节码。
PHP 不是为编译而构建的。
您可以做的可能是将应用程序托管在您的服务器上，直到客户端付款，然后将其上传到客户端的服务器。
或者您可以从您的服务器下载它（仅在付款后），以及任何人只需点击几下按钮即可配置的配置脚本；类似于某些 PHP 框架（例如 WordPress）的工作方式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-19T10:02:39.937

您可以使用 Zend Guard (http://www.zend.com/en/products/guard/) 保护您的代码。

# c++ - 我应该如何在基类中为派生类对象的基类部分实现运算符重载？

> ID：10225716
> 
> 赞同：4
> 
> 时间：2012-04-19T09:59:39.330
> 
> 标签：c++

我应该如何在基类中为派生类对象的基类部分实现运算符重载？

请参阅此示例代码并实现基类部分以在派生类对象上实现 * 运算符

```
class base {
     int x;
public:

};

class der : public base {
    int y;
public:
    const der operator*(const der& rh) {
        der d;
        d.y = y * rh.y;
        return d;
    }

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:11:22.753

```
class base {
     int x;
public:
     base & operator *=(const base &rh) {
         x*=rh.x;
         return *this;
     }
     base operator *(const base &rh) {
         base b = *this;
         b*=rh;
         return b;
     }
};

class der : public base {
    int y;
public:
    using base::operator*;
    der & operator*= (const der& rh) {
         base::operator*=(rh);
         y*=rh.y;
         return *this;
    }
    const der operator*(const der& rh) {
        der d = *this;
        d*=rh;
        return d;
    }

}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-19T10:09:25.893

实现`base::operator *`如下：

```
class base {
protected:
  int x;
public:
  base operator * (const base &rh) {
    base b;
    b.x = x * rh.x;
    return b;
  }
}; 
```

并将其称为，

```
der operator * (const der& rh) {
  der d;
  Base &b = d;  // <---- assign a temporary reference of 'base'
  b = static_cast<Base&>(*this) * rh; // <---- invoke Base::operator *
  d.y = y * rh.y;
  return d;
} 
```

# c++ - 使用 cmake 进行 boost 工作（致命错误：boost/smart_ptr.hpp: No such file or directory）

> ID：10225720
> 
> 赞同：1
> 
> 时间：2012-04-19T09:59:59.233
> 
> 标签：c++, qt, boost, opencv

在挖掘了几个小时之后，我终于需要一些专家的帮助。我是 cmake 的新手，正在尝试将我的 Visual Studio 2008 项目移植到 cmake。我的项目使用 opencv、qt 和 boost 库。现在我已经设法使用 opencv 和 qt 运行简单的 cmake 示例，但我被 boost 困住了。

瓶颈是这样的：CMake 找到正确的 boost 版本，找到库并且在配置时没有给出错误。但是当我尝试使用 make 构建项目时，它给了我：

> “致命错误：boost/smart_ptr.hpp：没有这样的文件或目录”

假设配置正确，cmake 应该能够找到 boost 包含目录。我已设置`BOOST_ROOT`为正确的 boost 根目录，这就是配置不会出错的原因。但是在运行 make 时会发生什么？我在这里错过了一些简单的东西吗？迫切需要帮助......如果这是一个愚蠢的问题，我很抱歉。

这是我的 CMakeLists.txt 文件：

```
cmake_minimum_required( VERSION 2.6 )

project (CMakeBoostTutorial)

find_package( Boost 1.46.1 COMPONENTS date_time REQUIRED)

link_directories ( ${Boost_LIBRARY_DIRS} )

include_directories ( ${Boost_INCLUDE_DIRS} )

add_executable ( helloworld helloworld.cc )

target_link_libraries (
    helloworld
    ${Boost_LIBRARIES}
    ) 
```

这是我的 helloworld.cc：

```
#include <iostream>
#include <stdlib.h>
#include <boost/smart_ptr.hpp>

using namespace std;<br/>
int main(int argc, char *argv[]){
    cout<<"Hello World";
  return 0;
} 
```

PS：如果我删除该`#include <boost/smart_ptr.hpp>`行，这将编译并运行良好

# xcode - 将字符串中的信息从一个视图传递到另一个视图

> ID：10225723
> 
> 赞同：1
> 
> 时间：2012-04-19T10:00:16.287
> 
> 标签：xcode, string

我已经看过这轮一些帖子，但从未真正找到明确的答案。我想将存储在字符串中的一些信息从一个视图传递到另一个视图 - Lts 说 view1 到 view2。我是否认为在新的 Xcode 中，只要我不释放 view1 中的字符串，它就会在传递给 view2 时存储它？谢谢

# php - 来自外部 php 文件的 PHP 变量

> ID：10225725
> 
> 赞同：0
> 
> 时间：2012-04-19T10:00:23.377
> 
> 标签：php, variables, global-variables

我有三个文件：

```
index.php 
/include/conf.php 
/include/database.php 
```

`conf.php`包含连接到数据库的变量。 `database.php`包含`conf.php`并具有将整个表作为数组返回的功能。`index.php`包括`/include/database.php`和调用`get_table('users');`

`XDebug`说我`$db_host, $db_user, $db_pass and $db_name`没有定义。

如何通过外部文件传递数据库相关变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:01:37.487

使用 PHP[定义](http://www.w3schools.com/php/func_misc_define.asp)函数

例如：

```
define("db_host", "localhost"); 
```

或使用

PHP[会话](http://www.w3schools.com/php/php_sessions.asp)变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T10:05:05.300

如果您在函数中使用这些变量，请使用**global** like

```
global $db_host, $db_user, $db_pass, $db_name; 
```

然后你可以使用这些变量。有关详细信息，[请参阅此处](http://php.net/manual/en/language.variables.scope.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T10:04:42.700

不正常，我用了include，我可以调用被包含页面的变量！尝试在 index.php 中包含这两个文件！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T10:07:20.437

在 conf.php 中将变量定义为常量，然后在包括 conf.php 的任何地方使用此变量

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T10:07:30.663

采用`include(*path to php page*);`

或者`include_once();`

或者`require();`

# c# - 应条件弱表 用于非编译目的？

> ID：10225727
> 
> 赞同：33
> 
> 时间：2012-04-19T10:00:25.850
> 
> 标签：c#, garbage-collection, clr, weak-references, ephemeron

我最近[`ConditionalWeakTable<TKey,TValue>`](http://msdn.microsoft.com/en-us/library/dd287757.aspx)在搜索`IDictionary`使用弱引用的类时遇到了这个类，正如[这里](https://stackoverflow.com/questions/2784291/good-implementation-of-weak-dictionary-in-net)和[这里](https://stackoverflow.com/questions/5764556/best-time-to-cull-weakreferences-in-a-collection-in-net/5764855#5764855)的答案中所建议的那样。

有[一篇权威的 MSDN 文章](http://blogs.msdn.com/b/dotnet/archive/2009/05/18/the-conditional-weak-table-enabling-dynamic-object-properties.aspx)介绍了该类并指出：

> 您可以在 System.Runtime.CompilerServices 命名空间中找到类 ...。它在 CompilerServices 中，因为它不是通用字典类型：我们打算让它只供编译器编写者使用。

后来又一次：

> ...条件弱表并非旨在成为通用集合...但是，如果您正在编写自己的 .NET 语言并且需要公开将属性附加到对象的能力，您绝对应该查看 Conditional弱表。

与此一致，该类的 MSDN 条目描述为：

> 使编译器能够将对象字段动态附加到托管对象。

所以很明显，它最初是为了一个非常特定的目的而创建的——帮助 DLR，而`System.Runtime.CompilerServices`命名空间体现了这一点。但它似乎发现了比这更广泛的用途——即使在 CLR 中也是如此。例如，如果我在[ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)中搜索[ConditionalWeakTable](http://msdn.microsoft.com/en-us/library/dd287757.aspx)的引用，我可以看到它在 MEF 类和内部 WPF类等中使用。[`CatalogExportProvider`](http://msdn.microsoft.com/en-us/library/system.componentmodel.composition.hosting.catalogexportprovider.aspx)`DataGridHelper`

我的问题是在编译器编写和语言工具之外使用[ConditionalWeakTable](http://msdn.microsoft.com/en-us/library/dd287757.aspx)是否可以，以及这样做是否存在任何风险，即在未来的 .NET 版本中会产生额外的开销或实现显着变化。（或者应该避免使用类似[这样](http://blogs.msdn.com/b/nicholg/archive/2006/06/04/617466.aspx)的自定义实现）。

还有进一步的阅读[here](http://weblog.ikvm.net/PermaLink.aspx?guid=7f47ad08-cdef-4dc2-b2fd-5dfdc1baf11d)、[here](http://blog.gx.weltkante.de/2011/06/true-weak-keyed-dictionary.html)和[here](https://stackoverflow.com/questions/8441055/is-it-possible-to-create-a-truely-weak-keyed-dictionary-in-c)关于[ConditionalWeakTable](http://msdn.microsoft.com/en-us/library/dd287757.aspx)如何利用一个隐藏的CLR实现的[ephemerons](http://en.wikipedia.org/wiki/Ephemeron)（通过`System.Runtime.Compiler.Services. DependentHandle`）来处理键和值之间的循环问题，以及这如何不能以自定义方式轻松完成。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-22T12:30:35.813

我看不出使用有什么问题`ConditionalWeakTable`。如果你需要蜉蝣，你几乎别无选择。

我认为未来的 .NET 版本不会成为问题 - 即使只有编译器会使用此类，Microsoft 仍然无法在不破坏与现有二进制文件的兼容性的情况下更改它。

至于开销 - 与普通字典相比肯定会有开销。拥有许多`DependentHandle`s 可能会很昂贵，类似于有多少`WeakReference`s 比普通引用更昂贵（GC 必须做额外的工作来扫描它们以查看它们是否需要被清空）。但这不是问题，除非您有很多（数百万）条目。

# php - 特定的 PHP Mysql 查询在根文件夹中不起作用

> ID：10225731
> 
> 赞同：0
> 
> 时间：2012-04-19T10:00:47.723
> 
> 标签：php, mysql, apache

先说一点历史。我们将一个站点从一个托管服务提供商 (hostexcellence) 转移到另一个 (1and1)，因为客户希望将自己的托管与我们的经销商托管分开。

该网站运行良好，除了一件事。

由于某种原因，在根文件夹中完成的特定查询不起作用，但在子文件夹中工作得很好。另外要注意的是，如果我执行一个应该返回多个结果的查询，它可以正常工作，但是如果我执行一个应该返回单个行项目的查询，它会返回一个空集。

这是其中一个查询

```
'SELECT `specials`.*, DATE_FORMAT(startdate, "%d %b %Y") AS sdate, DATE_FORMAT(enddate, "%d %b %Y") AS edate FROM `specials` WHERE enddate > NOW() and active = 1' 
```

但是，如果我在不同的表上运行类似的查询，它工作正常

```
'SELECT *, DATE_FORMAT(startdate, "%d %b %Y") AS sdate, DATE_FORMAT(enddate, "%d %b %Y") AS edate FROM events WHERE enddate >= NOW() AND active = 1' 
```

正如我上面提到的，这些不适用于网站的根文件夹，但可以在任何子文件夹中使用。

mysql_error() 不返回任何内容。它只返回一个空结果。

任何想法，因为我在过去两天一直试图追踪错误。

如果这有什么不同，它就在 apache 服务器上运行，并且目前该目录中没有 htaccess 文件。

提前致谢

***编辑***

我尝试了下面提到的所有方法，并重试了与该页面分开的查询，它们在其他页面和 phpmyadmin 中运行良好。所以我有点不知所措。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:06:11.713

你试过这个吗-

```
SELECT *, DATE_FORMAT(startdate, "%d %b %Y") AS sdate, DATE_FORMAT(enddate, "%d %b %Y") AS edate FROM specials WHERE enddate > NOW() and active = 1' 
```

此外，作为备份计划，检查您与数据库的连接并尝试从连接命令和 mysql_select_db
（或您用于选择数据库的任何方法）返回错误。

# apache-flex - TextArea htmlText 设置时不更新文本属性（Flex）

> ID：10225733
> 
> 赞同：0
> 
> 时间：2012-04-19T10:00:49.220
> 
> 标签：apache-flex, textarea, htmltext

如果在 mx TextArea 上设置 htmlText 属性，则 text 属性将保持“null”，直到手动编辑 TextArea。设置 htmlText 属性后，有没有办法更新 text 属性？

例如

textArea.htmlText = str; 跟踪（文本区域。文本）

结果=空

非常感谢，亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:22:22.370

通过在设置属性后调用`validateNow()`，您可以强制文本属性立即更新。`textArea``htmlText`

例如

```
textArea.htmlText = str;
textArea.validateNow();
trace(textArea.text);

result = HtmlToText( str ); 
```

# java - 检查特定格式的日期

> ID：10225735
> 
> 赞同：2
> 
> 时间：2012-04-19T10:00:51.823
> 
> 标签：java, date

我如何检查日期是否采用特定格式，例如“dd/MM/yyyy”，那么它会做一些事情，但如果它不是这种格式，或者是否有像“NA”这样的字符串，或者它应该有什么抛出错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T10:05:35.837

您可以尝试使用 解析日期`SimpleDateFormat`。如果有效，则日期为预期格式。

# iphone - 将selectAnnotationView缺失

> ID：10225738
> 
> 赞同：1
> 
> 时间：2012-04-19T10:01:01.123
> 
> 标签：iphone, mkannotationview, ios5.1, mkmapviewdelegate

在 MKMapViewDelegate 中，方法 mapView:didSelectAnnotationView 中的代码在选择注释视图之后执行（因此在标注气泡出现之后）。但我需要在标注气泡出现之前执行一些代码。所以，我需要像 mapView:* *Will* *SelectAnnotationView ... 这样不存在的东西。我能怎么做 ？谢谢 ！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-19T10:10:18.887

您可以使用此方法执行所需的功能：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control; 
```

# java - servlet 中的 ClasscastException

> ID：10225739
> 
> 赞同：0
> 
> 时间：2012-04-19T10:01:03.220
> 
> 标签：java, servlets, classcastexception

我尝试在 servlet 中实现插件系统。我编写了一个类来加载插件，它使用 URLClassLoader 来加载 jar 文件和 Class.forname 来加载类。
这是我的代码：
这部分创建 url 类加载器：

```
 public PluginLoader(ServletContext context, String[] pluginName, String[] classToLoad) throws PluginLoaderException{
            this.context = context;
            urls= new URL[pluginName.length];
            nameToURL(pluginName);
            //create class loader
            loader = new URLClassLoader(urls);
            //loading the plug-in
            loadPlugin(classToLoad);
        } 
```

这个初始化url：

```
 private void nameToURL(String[] pluginName) throws PluginLoaderException{
            try{
                for(int i=0;i<pluginName.length;i++){
                    urls[i] = context.getResource(pluginName[i]);
                }
            } 
```

最后这个创建对象：

```
 private void loadPlugin(String[] classToLoad) throws PluginLoaderException{
            try{
                iTest = (ITest) Class.forName(classToLoad[0],true,loader).newInstance();
            }
            catch(Exception e){
                throw new PluginLoaderException(e.toString());
            }
        } 
```

我设法创建了该对象，因为我可以操作它并检索它实现的接口，但我不能将它转换为 ITest 以在应用程序中操作它。我有一个 ClassCastException tplugin.toto.Toto cannot be cast to fr.test.inter.ITest 。
很奇怪，因为 Toto 实现了 ITest。

有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T10:23:51.300

您已经创建了一个类加载器问题——当您使用 进行测试时`instanceof ITest`，您使用的是`ITest`由默认类加载器加载的副本，但您正在测试由`URLClassloader`. 该类加载器已经加载了它自己的副本`ITest`，就 JVM 而言，它是一个完全不同的类型。

# c# - 如何限制用户在多个文本输入中输入重复文本

> ID：10225740
> 
> 赞同：0
> 
> 时间：2012-04-19T10:01:10.857
> 
> 标签：c#, java, jquery, html

我的网站有问题，用户正在填写表格，假设该表格中有两个文本框，我想这样做，如果用户`"Ahsan"`在第一个文本框中输入，则不允许他`"Ahsan"`在第二个文本框中输入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T10:05:36.190

这是一个[简单的例子](http://jsfiddle.net/aGnjZ/)

```
$(function() {
    $('#text1,#text2').change(function() {
        if ($('#text1').val() === $('#text2').val()) {
            alert('text matches');
        }
    });
});​ 
```

该代码使用[.change()](http://api.jquery.com/change/)函数触发更改任一文本输入的函数（使用[多重选择器](http://api.jquery.com/multiple-selector/)），然后使用[.val()](http://api.jquery.com/val/)比较值。

[.change()](http://api.jquery.com/change/)可以是[.blur()](http://api.jquery.com/blur/)或[keyup()或在使用](http://api.jquery.com/keyup/)[.submit()](http://api.jquery.com/submit/)提交表单时执行

## 更新

如果您需要检查大量输入...那么您可以使用[.each()](http://api.jquery.com/each/)：

```
$(function () {
    $('.inputclass').change(function () {
        var $current = $(this);
        $('.inputclass').each(function () {
            if ($(this).val() == $current.val() && $(this).attr('id') != $current.attr('id')) {
                alert('duplicate found');
            }
        });
    });
}); 
```

这使用类循环输入的每个值`inputclass`并检查重复项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:07:14.847

```
$('input:text').not(':first').on('blur', function() {
    var value = this.value;
    if(value.length) {
        $('input:text').not(this).each(function(){
            if(this.value == value) {
                alert('Error');
                return false;
            }
        });
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T10:15:52.223

你可以这样做：

例如，您的第一个文本框 id 是 txt1，第二个文本框 id 是 txt2。您想限制“Ahsan”在第二个文本框中输入。

$(文档).ready(函数(){

```
 var text1=$('#txt1').text();
 var text2=$('#txt2').text();

 if(text1!text2){
     //do your code
 }
 else {
   alert('value exist in textbox1');
 } 
```

})

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T10:06:05.290

尝试这个：

```
$('#lastInput').keyup(function () {
    if ($(this).val() === $('#firstInput').val()) {
        $(this).val('');
    }        
}); 
```

# java - 未调用自定义 ArrayAdapter

> ID：10225741
> 
> 赞同：0
> 
> 时间：2012-04-19T10:01:14.790
> 
> 标签：java, android, android-arrayadapter

我正在编写一个应用程序，从 RSS 提要中获取信息，使用 DOM 解析器（客户端 RSS 提要的问题）对其进行解析，然后在 ListView 中显示解析的对象。

出于某种原因，`getView()`没有被称为...

这是活动的代码：

```
public class NoPicList extends Activity {
    ListView list;
    NoPicAdapterV2 adapter2;
    ProgressDialog mDialog;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.no_pic_list);
        list = (ListView) findViewById(R.id.noPicListView);

        // get the request from the main activity
        Bundle b = getIntent().getExtras();
        String request = b.getString("REQUEST");

        mDialog = new ProgressDialog(this);
        mDialog.setCancelable(false);
        mDialog.setMessage("Lodaing Data");
        mDialog.show();

        new GetNewsAndCalendar().execute(request);
    }

    @Override
    protected void onPause() {
        mDialog.dismiss();
        super.onPause();
    }

    class GetNewsAndCalendar extends
        AsyncTask<String, Void, ArrayList<Message>> {

        @Override
        protected ArrayList<Message> doInBackground(String... params) {
            String url = params[0];
            DOMFeedParser parser = new DOMFeedParser(url);
            return parser.parse();
        }

        @Override
        protected void onPostExecute(ArrayList<Message> result) {
            adapter2 = new NoPicAdapterV2(NoPicList.this, R.layout.no_pic_list_item, result);
            list.setAdapter(adapter2);
            mDialog.dismiss();
            }

    }

} 
```

这是适配器的代码：

```
public class NoPicAdapterV2 extends ArrayAdapter<NewAndCalendar> {
    private ArrayList<Message> data;
    private LayoutInflater inflator;
    private Activity mActivity;

    public NoPicAdapterV2(Context context, int textViewResourceId,
        ArrayList<Message> result) {
        super(context, textViewResourceId);
        data = (ArrayList<Message>) result;
        mActivity = (Activity) context;
        inflator = (LayoutInflater) mActivity
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View vi = convertView;
        if (vi == null)
            vi = inflator.inflate(R.layout.no_pic_list_item, parent, false);

        TextView title = (TextView) vi.findViewById(R.id.noPicTitle);
        TextView subtitle = (TextView) vi.findViewById(R.id.noPicSubtitle);
        TextView id = (TextView) vi.findViewById(R.id.noPicID);

        title.setText(data.get(position).getTitle().toString());
        subtitle.setText(data.get(position).getDate().toString());
        id.setText(data.get(position).getDescription());

        return vi;
    }
} 
```

DOMFeedParser 代码是根据[IBM 开源 Java XML 解析器文章](http://www.ibm.com/developerworks/opensource/library/x-android/index.html?ca=dgr-lnxw82Android-XML&S_TACT=105AGX59&S_CMP=grlnxw82#list9)构建的。

非常感谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T10:04:43.210

您应该覆盖（在您的自定义适配器中）

```
getCount() 
```

并返回大小`data`以让适配器工作。或者您调用 ArrayAdapter 构造函数`data`

```
public ArrayAdapter (Context context, int textViewResourceId, T[] objects) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:36:05.163

您的 ArrayAdapter 不知道数组的内容，因此计数为 0。

改用这个超级构造函数：http: [//developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter%28android.content.Context,%20int,%20java.util.List%3CT%3E%29](http://developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter%28android.content.Context,%20int,%20java.util.List%3CT%3E%29)

像这样 ：

```
public NoPicAdapterV2(Context context, int textViewResourceId,
    ArrayList<Message> result) {
    // Here
    super(context, textViewResourceId, result);
    data = (ArrayList<Message>) result;
    mActivity = (Activity) context;
    inflator = (LayoutInflater) mActivity
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:32:40.797

我希望下面的代码能够工作，只需向 super(...) 添加一个参数

```
public NoPicAdapterV2(Context context, int textViewResourceId,
        ArrayList<Message> result) {
        super(context, textViewResourceId,result);
        data = (ArrayList<Message>) result;
        mActivity = (Activity) context;
        inflator = (LayoutInflater) mActivity
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
} 
```

# c# - 如何捕捉未处理的异常？

> ID：10225757
> 
> 赞同：0
> 
> 时间：2012-04-19T10:01:47.113
> 
> 标签：c#

> **可能重复：**
> [C# - 如何用简历实现一个捕获所有异常处理程序？](https://stackoverflow.com/questions/337702/c-sharp-how-to-implement-one-catchem-all-exception-handler-with-resume)

我想添加将捕获未处理异常的方法。我知道如何在 Appdomain 级别执行此操作 - 但我想在应用程序级别执行此操作（添加 Unhandled Exception 方法，以防出现 Unhandled Exception 时调用）

怎么做？

# html - 从多个源 IP ping 一台计算机。从文本中读取源 IP。将结果写入文本或网页

> ID：10225759
> 
> 赞同：1
> 
> 时间：2012-04-19T10:01:55.443
> 
> 标签：html, batch-file, ping

我需要从多个源 IP ping 一个 IP，并将结果写入文件或 HTML 页面以获取结果。我需要从所有 4 个 ping 中获取结果，包括 TTL 以及 4 个 ping 中有多少被丢弃以及 ping 时间。

我知道对于 IPv6，您可以在 ping 命令中使用 -S 触发器来指定源 IP，但是对于 IPv4 环境，您如何做到这一点。

设置：

Windows 2003 服务器 R2 标准 x64。.txt 文件包含我想用作源 IP 的 85 个 IPv4 地址 1 个目标 IPv4 地址将从一台中央服务器运行 将以管理员身份登录中央服务器

所需结果：显示按源 IP 结果分组的结果的 HTML 页面，包括所有 4 个 ping 回复时间、TTL、发送的总数据包、接收的总数据包和平均 ping 时间（以毫秒为单位）

现在让我把事情复杂一点。我所在的环境不允许我安装 Windows 2003 Server R2 标准 x64 正常安装中不包含的任何其他软件。自从编写 .bat 文件以来已经有很多年了，我对 .bat 文件的记忆力仍然很弱。所有 IP 地址都是 IPv4。虽然我确实有所有这些服务器的 FQDN，但我需要使用 IP（出于某种原因）

我有以下内容来创建所需的页面并从一个系统 ping 到多个系统，但剩下的就是我遇到问题的地方，因为我需要从多个到一个 ping，我的脚本给我的唯一结果是格式正确的 html 页面但是它只说 processing=done 我哪里出错了……请帮忙……</p>

谢谢

---编辑--- 通过将 ping 更改为 ping.exe 并将 %%i 放在引号中 - “%%i”现在我得到了结果，但不是我希望的好格式。它以 32 字节日期的 pining 127.0.0.1 格式给出结果：从 .... 回复，就好像只是输出到文本文件一样。我想做的是以表格格式显示它。已对以下代码进行了更改。

```
@echo off
echo ^<HTML^>^<HEAD^><TITLE^>SERVER PING INFO^</TITLE^>^</HEAD^> >>ping-results.html
echo ^<BODY GBCOLOR=#FFFFFF” TEXT=”#000000” LINK+#0000FF” VLINK=#800080”^> >>ping-results.html
echo ^<p align="center"^>^<table border="1" width="600"^> >>ping-results.html
echo ^<tr^>^<td^>^<B^>ping results^</td^> >> ping-results.html
for /F %%i in (c:\ping-results\serverIP.txt) do (
    echo Processing %%i...
    ping.exe "%%i" > "c:\ping-results\%%i.html" /format:htable.xsl
    echo ^<tr^>^<td^>%%i^</td^> >> ping-results.html
    echo ^<td^>^<a href="c:\ping-results\%%i.html"^>Results^</a^>^</td^> >> ping-results.html
    echo ^</tr^> >> ping-results.html
)
    echo ^<p align="center"^>^<b^>^<font size="+1" color="Red"^>^<BR^>Completed at >> ping-results.html time /T >> ping-results.html
echo - on >> ping-results.html
date /T >> ping-results.html
echo ^</font^>^</b^>^<BR^>^</p^> >> ping-results.html
echo.
echo DONE!! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T20:24:56.497

最好在构建 html 文件之前运行 ping 命令吗？

像这样（显然将 127.0.0.1 更改为您的服务器#）

```
@echo off
setlocal enabledelayedexpansion enableextensions
set count=0
for /f "delims=" %%a in ('ping -n 4 127.0.0.1') do (
    set /a count=!count!+1
    set pingrspn!count!=%%a
)
echo Response1: !pingrspn4!
echo Response2: !pingrspn5!
echo Response3: !pingrspn6!
echo Response4: !pingrspn7! 
```

现在您可以在“构建 html 文件”脚本中使用 vars: pingrspn4-pingrspn7。

不错的主意，虽然在动态构建一个 html，我喜欢它。

关于 ping 行上的 /format 选项的一个问题，我注意到 ping 没有 /format 参数，那么 /format 选项是否来自重定向符号？

[编辑] 所以我调整了您的文件（您缺少一些 html 代码）以格式化结果（server.html）页面

```
 :: setlocal options
        setlocal enabledelayedexpansion enableextensions
        set count=0
        for /f "delims=" %%a in ('ping -n 4 127.0.0.1') do (
            set /a count=!count!+1
            set pingrspn!count!=%%a
        )
        echo Response1: !pingrspn4!
        echo Response2: !pingrspn5!
        echo Response3: !pingrspn6!
        echo Response4: !pingrspn7!
:: write results file       
echo ^<HTML^>^<HEAD^><TITLE^>SERVER PING INFO^</TITLE^>^</HEAD^> >>ping-results.html 
echo ^<BODY GBCOLOR=#FFFFFF” TEXT=”#000000” LINK+#0000FF” VLINK=#800080”^> >>ping-results.html 
echo ^<p align="center"^>^<table border="1" width="600"^> >>ping-results.html 
echo ^<tr^>^<td^>^<B^>ping results^</td^> >> ping-results.html 
for /F %%i in (serverIP.txt) do (    
echo Processing %%i...     
 :: already ran the ping command, so rem it out
rem ping.exe "%%i" > "%%i.html" /format:htable.xsl   
:: write %%i.html
echo ^<HTML^>^<HEAD^><TITLE^>Individual PING^</TITLE^>^</HEAD^> >%%i.html 
echo ^<BODY GBCOLOR=#FFFFFF” TEXT=”#000000” LINK+#0000FF” VLINK=#800080”^> >>%%i.html 
echo ^<p align="center"^>^<table border="1" width="600"^> >>%%i.html 
echo ^<tr^>^<td^>^<B^>results^</td^> >> %%i.html  
        echo ^<tr^>^<td^>!pingrspn4! ^<^/td^>^<^/tr^> >> %%i.html 
        echo ^<tr^>^<td^>!pingrspn5! ^<^/td^>^<^/tr^>  >> %%i.html
        echo ^<tr^>^<td^>!pingrspn6! ^<^/td^>^<^/tr^>  >> %%i.html
        echo ^<tr^>^<td^>!pingrspn7! ^<^/td^>^<^/tr^>  >> %%i.html
        echo ^<^/body^> ^<^/table^> ^<^/html^> >> %%i.html
 echo ^<tr^>^<td^>%%i^</td^> >> ping-results.html     
 echo ^<td^>^<a href="%%i.html"^>Results^</a^>^</td^> >> ping-results.html     
 echo ^</tr^> >> ping-results.html )     
 echo ^<p align="center"^>^<b^>^<font size="+1" color="Red"^>^<BR^>Completed at >> ping-results.html 
 time /T >> ping-results.html 
 echo - on >> ping-results.html 
 date /T >> ping-results.html 
 echo ^</font^>^</b^>^<BR^>^</p^> >> ping-results.html 
 echo ^<^/body^> ^<^/table^> ^<^/html^> >>  ping-results.html 
 echo DONE!!
 ping-results.html 
```

# c++ - gcc 4.1.2 上的 Boost 进程间失败

> ID：10225760
> 
> 赞同：1
> 
> 时间：2012-04-19T10:01:59.810
> 
> 标签：c++, templates, gcc

我正在尝试使用 Boost::Interprocess 但在尝试使用**gcc 4.1.2**进行编译时出现一些编译器错误。我缩小了代码范围，并设法在没有提升的情况下重现了这个问题。代码是：

```
#include <iostream>
static const std::size_t offset_type_alignment = 0;

template<class T, class U>
struct pointer_to_other;

template<class T, class U, template<class> class Sp>
struct pointer_to_other< Sp<T>, U >
/*144*/{
   typedef Sp<U> type;
};

template <class PointedType, class DifferenceType, class OffsetType, std::size_t OffsetAlignment>
class offset_ptr
{
};
template <class T, class DifferenceType = std::ptrdiff_t, class OffsetType = std::size_t, std::size_t Alignment = offset_type_alignment>
class offset_ptr;

template<class T, class T2, class T3, std::size_t A, class U>
/*158*/struct pointer_to_other<offset_ptr<T, T2, T3, A>, U >
{
   typedef offset_ptr<U, T2, T3, A> type;
};

template<class VoidPointer>
class message_queue_t
{
   typedef VoidPointer                                                 void_pointer;
/*167*/   typedef typename pointer_to_other<void_pointer, char>::type         char_ptr;
};

int main()
{
/*177*/       message_queue_t< offset_ptr<void, std::ptrdiff_t, std::size_t, offset_type_alignment> > test;
} 
```

我得到的错误：

> .cc：在 message_queue_t 的实例化中 >
> 
> .cc:177：从这里实例化
> 
> .cc:167：错误：struct pointer_to_other、char> 的类模板实例不明确
> 
> .cc:144：错误：候选者是：struct pointer_to_other，U>
> 
> .cc:158: 错误: struct pointer_to_other, U>
> 
> .cc:167：错误：无效使用未定义类型âstruct pointer_to_other，char>
> 
> .cc:140：错误：âstruct pointer_to_other, char>â 的声明

在 MSVS 中，这编译得很好。[Ideone](http://ideone.com/0lRJP)也可以正常编译，但它使用**gcc 4.3.4**。

**重要的**

*   改变编译器是不可能的
*   我知道 Boost::Interprocess 没有用这个版本的 gcc 测试

我正在寻找的是一种解决方法。有任何想法吗？

PS - 模板是提升的一部分，但减少了，所以我不能真正改变它们。有什么办法可以改变：

```
 message_queue_t< offset_ptr<void, std::ptrdiff_t, std::size_t, offset_type_alignment> > test; 
```

为了让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:34:00.283

这是一个编译器限制。根本不支持。

# optimization - 结构字节填充

> ID：10225761
> 
> 赞同：0
> 
> 时间：2012-04-19T10:02:05.397
> 
> 标签：optimization, struct, padding, semantic-analysis

从给定的情况来看，我们可以说我们能够以不同的方式声明结构数组。正如我总结的那样，区别在于空间优化，即以下内容：

```
struct { /* 1600 bytes */
    int a, c, e;
    char b, d;
} array_of_struct [100]; 
```

如代码顶部所示，这占用了 1600 个字节。虽然这个

```
struct { /* 1400 bytes */
    int a[100], c[100], e[100];
    char b[100], d[100];
} struct_of_array; 
```

仅占用 1400 字节。我的问题是，当我们在实际应用中使用这类东西时，它们之间是否存在**语义**差异？优化是好的，但是当我们将结构数组声明为不同的形式时，是否可以改变代码的主要思想？

# math - 鼠标下的对象超出剪裁平面附近

> ID：10225763
> 
> 赞同：0
> 
> 时间：2012-04-19T10:02:15.707
> 
> 标签：math, opengl, matrix, 3d

我有一个透视投影。我想让一个对象跟随鼠标。当我将对象设置为几乎在近剪裁平面上时，它工作正常。但是当对象超出近剪裁平面时，与鼠标位置相比，它的运动越来越扭曲。我知道我需要更改 X 和 Y 坐标以反映修改后的 Z，但我不知道确切的方程式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:09:50.830

视口将贴图限制在近平面，因此靠近近平面的比例因子约为 1。因此，您所要做的就是根据视图坐标中对象的距离相对于近剪裁平面的距离进行缩放：

```
scale = Z_object / Z_near 
```

# python - FFT后的棋盘图案

> ID：10225765
> 
> 赞同：3
> 
> 时间：2012-04-19T10:02:31.607
> 
> 标签：python, fft, gaussian

我正在尝试通过在傅里叶空间中创建一个网格然后对其进行逆傅里叶变换来获得随机场来创建一个高斯随机场。为此，需要对傅里叶逆变换图像进行实值赋值。我似乎在 10^-18 - -22 阶的网格的虚部得到残差，所以我预计这是 FFT 中的数值误差。图像的真实部分在像素尺度上显示了一个奇怪的棋盘图案，其中像素从正跳到负。为了查看 FFT 功能是否正确，我尝试转换一个高斯，它应该返回另一个高斯，并且棋盘图案再次出现在图像中。取图像的绝对值时，它看起来不错，但我还需要它来允许我的高斯随机场的负值。

对于高斯的傅里叶变换，我使用以下代码：

```
#! /usr/bin/env python

import numpy as n
import math as m
import pyfits

def fourierplane(a):
  deltakx = 2*a.kxmax/a.dimkx #stepsize in k_x
  deltaky = 2*a.kymax/a.dimky #stepsize in k_y

  plane = n.zeros([a.dimkx,a.dimky]) #empty matrix to be filled in for the Fourier grid

  for y in range(n.shape(plane)[0]):
    for x in range(n.shape(plane)[1]):
      #Defining coordinates centred at x = N/2, y = N/2
      i1 = x - a.dimkx/2 
      j1 = y - a.dimky/2

      #creating values to fill in in the grid:    
      kx = deltakx*i1  #determining value of k_x at gridpoint
      ky = deltaky*j1  #determining value of k_y at gridpoint
      k = m.sqrt(kx**2 + ky**2) #magnitude of k-vector

      plane[y][x] = m.e**(-(k**2)/(2*a.sigma_k**2)) #gaussian
  return plane

def substruct():

  class fougrid:
    pass

  grid = fougrid()

  grid.kxmax = 2.00 #maximum value k_x
  grid.kymax = 2.00 #maximum value k_y

  grid.sigma_k = (1./20.)*grid.kxmax #width of gaussian

  grid.dimkx = 1024
  grid.dimky= 1024

  fplane = fourierplane(grid) #creating the Fourier grid

  implane = n.fft.ifftshift(n.fft.ifft2(fplane)) #inverse Fourier transformation of the grid to get final image

  ##################################################################
  #seperating real and imaginary part of the Fourier transformed grid
  ##################################################################

  realimplane = implane.real
  imagimplane = implane.imag

  #taking the absolute value:
  absimplane = n.zeros(n.shape(implane))
  for a in range(n.shape(implane)[0]):
    for b in range(n.shape(implane)[1]):
      absimplane[a][b] = m.sqrt(implane[a][b].real**2 + implane[a][b].imag**2)

  #saving images to files:
  pyfits.writeto('randomfield.fits',realimplane) #real part of the image grid
  pyfits.writeto('fplane.fits',fplane) #grid in fourier space
  pyfits.writeto('imranfield.fits',imagimplane) #imaginary part of the image grid
  pyfits.writeto('absranfield.fits',absimplane) #real part of the image grid

substruct() #running the script 
```

有谁知道这种模式是如何创建的以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:19:17.577

每当您在一个 DFT 域中看到意外的交替符号时，这可能意味着另一个 DFT 域中的数据在阵列中旋转了一半（类似于 fftshift）。如果您在一个域中有一个实数值的对称“驼峰”，那么以数组元素 0（而不是数组元素 n/2）为中心的那个驼峰将是最有可能不会在变换域中产生交替符号的排列。

# ruby-on-rails - 在 rspec 中打印响应

> ID：10225767
> 
> 赞同：8
> 
> 时间：2012-04-19T10:02:36.020
> 
> 标签：ruby-on-rails, rspec

我有一个无法开始工作的测试，所以我想通过打印响应来调试我的规范。

我已经尝试`print response.body`在我的规范中使用，但 test.log 或控制台中都没有输出。

我可能错过了一些东西。我应该尝试什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T11:24:24.983

您可以使用以下方法打印响应：

```
raise response.body 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-01T10:25:26.047

您可以使用

```
$stderr.puts response.body 
```

打印您的回复。但我建议只使用上面的代码进行测试并从 RSpec 单元测试中删除任何放置，编写输出某些内容的 RSpec 代码被认为是不好的做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-14T15:53:01.433

只需简单地使用

```
puts response.body 
```

# ios - 在 ios 中上传音频文件并收到意外响应

> ID：10225775
> 
> 赞同：1
> 
> 时间：2012-04-19T10:03:05.967
> 
> 标签：ios, audio, upload, nsurlconnection

这是我的代码`upload an audio file`。`I tried lot of questions and answers in stackoverflow`. 但我仍然没有得到任何改善。我必须上传一个带有`php link`. 如果我这样做，我`already exists`总是得到像“”这样的回应。我试图更改文件名并上传它。仍然得到相同的响应。实际上，我必须从服务器接收响应作为我上传的文件的链接。我对此一无所知`php`。任何人都可以帮我解决这个问题。任何帮助将不胜感激，以解决我的问题。

```
 NSData *fileData=[NSData dataWithContentsOfURL:soundFileURL];
    NSMutableURLRequest *request=[NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"https://somesite.com/upload.php"]];
    [request setHTTPMethod:@"POST"];

    NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
    NSMutableData *body = [[NSMutableData alloc]init];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"fvgv4r346r4r4h3ur543ty5u54y5u4574545g4g5.samr\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    //[soundFileURL lastPathComponent]
    [body appendData:[[NSString stringWithString:@"Content-Type: music/samr\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:fileData];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [request setHTTPBody:body];
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

//    NSLog(@"%@",[NSString stringWithUTF8String:[body bytes]]);

    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];
    NSLog(@"%@",returnString); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:33:06.870

`[body appendData:[[NSString stringWithString:@"Content-Type: music/samr\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];`

我怀疑这条线

还要检查您的输入变量

# java - Java 类加载阶段

> ID：10225776
> 
> 赞同：0
> 
> 时间：2012-04-19T10:03:07.143
> 
> 标签：java, jvm

既然类加载可以分为字节码加载、链接（验证、准备、可选解析）和初始化，那么这些阶段中的哪一个阶段负责方法区域中类型结构的分配和实例化，然后由`Class`对象使用？

# yii - left join yii

> ID：10225777
> 
> 赞同：-1
> 
> 时间：2012-04-19T10:03:13.600
> 
> 标签：yii, criteria

我有 2 个表
**student_job_log** ->id,job_id,student_id,created_dt
**student_info** ->id,user_id,first_name,last_name

我已经在模型中建立了关系（studentJobLog）

```
public function relations()
    {
        // NOTE: you may need to adjust the relation name and the related
        // class name for the relations automatically generated below.
        return array(
        'student_info'=>array(self::BELONGS_TO,'StudentInfo','id','joinType'=>'LEFT JOIN',
                                    'select'=>'first_name, last_name')),

        );
    } 
```

我得到了这个错误是什么问题。我的关系出了点问题，我不知道 :(

我想要学生信息中的名字和姓氏，请帮助我...... :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:13:50.760

外键必须是您当前模型中映射到 StudentInfo 的那个

```
 return array(
    'student_info'=>array(self::BELONGS_TO,'StudentInfo','student_id',),
    ); 
```

现在像这样使用它

```
echo $job->student_info->first_name . ', ' . $job->student_info->last_name; 
```

# wordpress - 更改要显示的帖子数量

> ID：10225778
> 
> 赞同：2
> 
> 时间：2012-04-19T10:03:15.223
> 
> 标签：wordpress, posts

如何告诉 Wordpress 根据显示的页面类型更改要显示的帖子数量？例如，所有搜索结果一次将显示 10 个帖子，而存档一次将显示 20 个帖子，等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:21:37.107

无需处理自定义查询和更改页面模板。尝试[WordPress › 自定义帖子限制 « WordPress 插件](http://wordpress.org/extend/plugins/custom-post-limits/)

**2015 年 3 月 6 日更新；插件在 WP 4.1 下工作正常**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T10:57:32.167

这应该移动到[https://wordpress.stackexchange.com/](https://wordpress.stackexchange.com/)
有 1 个全局设置（settings->reading）

如果您想更改个人设置，您将不得不调整您的主题。
放在[循环](http://codex.wordpress.org/The_Loop)`query_posts('post_per_page=XX')`之前还看：[query_posts](http://codex.wordpress.org/Function_Reference/query_posts)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T11:01:38.037

你要做的是处理 query_post() 函数。

请参阅此法典页面：[http ://codex.wordpress.org/Function_Reference/query_posts](http://codex.wordpress.org/Function_Reference/query_posts)

然后，您必须修改您的archive.php 和search.php 文件（取决于您的主题）以在循环之前调用此函数。

[此处](http://codex.wordpress.org/Function_Reference/query_posts#Usage)的所有内容都在一个非常简单的示例中进行了描述

希望这会有所帮助；）

# django - Django admin - 检测内联中更改的字段？

> ID：10225780
> 
> 赞同：0
> 
> 时间：2012-04-19T10:03:21.370
> 
> 标签：django, django-admin

是否可以在保存内联时检测到哪些字段发生了更改？我使用 save_formset 方法，但不知道如何检测更改的字段。我需要它来检测图像是否在管理员中被清除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:36:15.100

从数据库中检索现有条目，然后将其与您要保存的条目进行比较是实现此目的的一种非常简单的方法。

```
existing_entry = Model.objects.get(pk=entry_to_save.pk)
if existing_entry.image != entry_to_save.image:
    # Your image has been modified
entry_to_save.save() 
```

# eclipse - 使 Aptana / Eclipse 格式化程序忽略数组

> ID：10225789
> 
> 赞同：1
> 
> 时间：2012-04-19T10:04:01.357
> 
> 标签：eclipse, formatting, aptana, formatter

请参阅[Aptana PHP Formatter - 使用自定义格式规则](https://stackoverflow.com/questions/8660933/aptana-php-formatter-use-custom-formatting-rules)

我不希望格式化程序为数组中的每个元素添加换行符，因为这往往会使数组***的***可读性降低。

当然可以在它周围添加 // @formatter:off // @formatter:on 语句，但是有没有更好的方法让 Aptana 格式化程序完全忽略（很好的手动格式化）数组？

换句话说：我如何让 Aptana 完全忽略数组或更好地格式化它们。

谢谢，

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:53:49.630

使用带有 Aptana 插件的 Eclipse 时的临时解决方案：（您必须使用内置的 JS 编辑器打开 .js 文件并使用它进行格式化，然后返回 Aptana）。

[使用 Eclipse 格式化数组初始值设定项](https://stackoverflow.com/questions/5552192/formatting-array-initializers-with-eclipse)

# php - 不可利用的 php 函数（白名单）

> ID：10225791
> 
> 赞同：-1
> 
> 时间：2012-04-19T10:04:09.283
> 
> 标签：php, smarty, exploit

有没有人准备好**尽可能多的**安全/不可利用的 PHP 函数的白名单？

我正在构建一个 Web 应用程序，用户在其中输入 Smarty 模板（Smarty 版本 3）。应用程序通过 Smarty 运行此模板（使用适当的 Smarty_Security），然后使用 HTMLPurifier 清理生成的 HTML。

一切对我来说似乎都是安全的，但用户需要函数，以便它们可以用作 Smarty 修饰符。我可以将它们一一列入白名单，但这需要付出很多努力并且容易出错。我只找到了一个[黑名单——可利用的 PHP 函数](https://stackoverflow.com/questions/3115559/exploitable-php-functions)。

这是一个有点[相似的问题](https://stackoverflow.com/questions/6056386/php-as-template-engine-stored-in-mysql-whitelist-functions)，但没有合适的答案（对于我的情况）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:23:21.053

你看到这么棒的话题了吗？ [可利用的 PHP 函数](https://stackoverflow.com/questions/3115559/exploitable-php-functions)

因此，您可以在允许的功能列表和您脑海中的危险功能列表之间创建“array_diff”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T10:23:28.663

`Smarty_Security`开始于

```
$php_functions = array(
    'isset', 'empty',
    'count', 'sizeof',
    'in_array', 'is_array',
    'time',
    'nl2br',
); 
```

为数学添加（可能是安全的）操作以及更多的日期和数组内容：

```
$php_functions = array(
    'isset', 'empty',
    'count', 'sizeof',
    'in_array', 'is_array', 'join', 'explode'
    'time', 'date', 'strtotime', 'strftime'
    'nl2br',
    'intval', 'floatval', 'rand', 'srand', 
    'log', 'log10', 'pi', 'pow', 'sqrt', 'exp', 
    'floor', 'ceil', 'round', 'min', 'max', 'abs',
    'sin', 'cos', 'tan', 'atan', 'atan2',
); 
```

# macos - XCode 4.x 不包括 Perl MakeMaker。brew failed - 要求 Perl 文件。

> ID：10225794
> 
> 赞同：0
> 
> 时间：2012-04-19T10:04:20.793
> 
> 标签：macos, perl, homebrew, xcode4.3, makemaker

我正在尝试按照说明安装 node.js。刚安装 Homebrew。我试过这个。

```
冲泡安装 git -v
```

但是得到这个错误信息：make[2]: *** No rule to make target '...config.h', required by `perl.mak'. 停止。

它在“/System/Library/Perl/5.10.0/darwin-thread-multi-2level/CORE”中询问我的 config.h 文件，但我发现的文件只有“libperl.dylib”和“perl.h” . 也许是因为我使用的是 10.6 而不是 10.7？我为 Lion 安装了 Xcode 的命令行工具。

同样的问题。[git 没有安装在 Lion 上。](https://github.com/mxcl/homebrew/issues/7091)发布了一个[修复程序](https://github.com/mxcl/homebrew/commit/6f4b710)。但我不明白它对我有什么帮助。修复：

```

+ # Clean XCode 4.x 安装不包括 Perl MakeMaker
     32
+ ENV['NO_PERL_MAKEMAKER']='1' 如果 MacOS.lion？
     33
+
```

我的命令行：

```
==> 下载 http://git-core.googlecode.com/files/git-1.7.10.tar.gz

...（我删除的文字）

rm -f git-add--交互式 git-add--interactive+ && \
    INSTLIBDIR=`MAKEFLAGS= make -C perl -s --no-print-directory instlibdir` && \
    sed -e '1{' \
        -e 's|#!.*perl|#!/usr/bin/perl|' \
        -e'h'\
        -e ' s=.*=使用 lib (split(/:/, $ENV{GITPERLLIB} || "'"$INSTLIBDIR"'"));=' \
        -e'H'\
        -前任' \
        -e'}'\
        -e 's/@@GIT_VERSION@@/1.7.10/g' \
        git-add--interactive.perl >git-add--interactive+ && \
    chmod +x git-add--interactive+ && \
    mv git-add--interactive+ git-add--interactive
make[2]: *** 没有规则来制作目标 `/System/Library/Perl/5.10.0/darwin-thread-multi-2level/CORE/config.h'，这是 `perl.mak' 所需要的。停止。
make[1]: *** [instlibdir] 错误 2
make: *** [git-add--interactive] 错误 2
make: *** 等待未完成的工作....
==> 退出状态：2
https://github.com/mxcl/master/blob/master/Library/Formula/git.rb#L49
==> 构建环境
CPU：双核64位penryn
macOS：10.6.8-i386
代码：4.3
MacPorts/Fink：/sw/bin/fink
抄送：/usr/bin/clang
CXX: /usr/bin/clang++ => /usr/bin/clang
LD：/usr/bin/clang
CFLAGS：-Os -w -pipe -march=native -Qunused-arguments
CXXFLAGS：-Os -w -pipe -march=native -Qunused-arguments
制造标志：-j2
错误：执行失败：make prefix=/usr/local/Cellar/git/1.7.10 CC=/usr/bin/clang CFLAGS=-Os\ -w\ -pipe\ -march=native\ -Qunused-arguments LDFLAGS=安装 (git.rb:49)

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:47:35.797

安装你自己的 Perl。请按照10.6 Snow leopard 的[这些说明进行操作。](http://blogs.perl.org/users/peter_edwards/2011/06/installing-local-perl-and-libraries-on-mac-book-snow-leopard.html)

# actionscript-3 - Flex中的日期字段范围修复

> ID：10225796
> 
> 赞同：0
> 
> 时间：2012-04-19T10:04:23.290
> 
> 标签：actionscript-3, apache-flex, flex4

在 Flex 我有两个日期字段 startdate 和 enddate.. 现在，如果我选择一个开始日期，结束日期的日期范围应该只显示接下来的两天..（即：结束日期 = 开始日期 + 2 天和其他天应禁用且无法选择）。

```
 private function onScroll():void {
            endDate.selectableRange("");}
<mx:DateField id="startDt" change="onScroll()"/>
<mx:DateField id="endDate"/> 
```

需要建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:23:04.677

检查这个...这可以帮助你

```
<mx:DateField id="stDate"/>
<mx:DateField id="endDate" selectableRange="{{rangeStart: stDate.selectedDate,rangeEnd:new Date(stDate.selectedDate.fullYear,stDate.selectedDate.month,stDate.selectedDate.date+2)}}"/> 
```

# jquery - DropDownlist 通过 id 获取值

> ID：10225799
> 
> 赞同：0
> 
> 时间：2012-04-19T10:04:36.117
> 
> 标签：jquery

我尝试检索下拉列表值的值，但它打印未定义为什么？

```
var selected =  $("#checkedSelect option:selected").val(); 
```

我就这样

```
{foreach from=$allTypes value=types}
                        <option id="checkedSelect" value="{$types.id}">{$types.type}</option>
                           {/foreach} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:14:39.837

尝试这个：

```
 var x;
    $("#checkedSelect").change(function(){
         x = $(this).val();
         alert(x);
    }); 
```

# linux-kernel - 什么是 base_reachable_time（ARP 相关）proc 条目

> ID：10225800
> 
> 赞同：3
> 
> 时间：2012-04-19T10:04:36.537
> 
> 标签：linux-kernel, arp, proc

根据 arp(7) - Linux 手册页：

> base_reachable_time （自 Linux 2.2 起）一旦找到邻居，该条目被认为至少对 base_reachable_time/2 和 3*base_reachable_time/2 之间的随机值有效。**如果条目收到来自更高级别协议的积极反馈，则条目的有效性将被延长。**默认为 30 秒。该文件现在已过时，取而代之的是 base_reachable_time_ms。base_reachable_time_ms（自 Linux 2.6.12 起） 至于 base_reachable_time，但以毫秒为单位测量时间。默认为 30000 毫秒。

我不理解这种解释——尤其是关于来自更高级别协议的积极反馈的声明。有人请澄清吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:04:08.560

从[arp(7) 手册页](http://linux.die.net/man/7/arp)，

> 当一段时间后没有对现有映射的积极反馈时（请参阅下面的 /proc 接口），邻居缓存条目被认为是陈旧的。可以从更高层获得积极的反馈； **例如来自成功的 TCP ACK。其他协议可以使用 MSG_CONFIRM 标志向 sendmsg(2) 发送转发进度信号。**当没有向前进展时，ARP 会尝试重新探测。

基本上这意味着，如果在有很多成功的 ACK 的情况下发生了诸如持续 TCP 连接之类的事情，那么它假定它拥有的 IP/MAC 对是有效的，并且当表中的条目正常时不会打扰执行新的 ARP 请求到期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:11:34.953

对于 IPv6，该功能`ndisc_router_discovery`可以更新`base_reachable_time`.
IPv6 邻居发现协议（取代 ARP）获取此信息并对其进行更新。

# image - {$IMAGEBASE $13140000} 来自高级挂钩/注入库的单元中的指令：需要解释

> ID：10225801
> 
> 赞同：3
> 
> 时间：2012-04-19T10:04:42.713
> 
> 标签：image, delphi, hook, code-injection, base

**到目前为止我做了什么：**

我在 Aphex 的[AfxCodeHook.pas](http://www.delphibasics.info/home/delphibasicssnippets/afxcodehookbyaphex)单元中找到了它。

我还使用它浏览了一堆有趣的示例代码：

*   [注入库](http://www.delphibasics.info/home/delphibasicssnippets/afxcodehookexample-injectlibrary)（如何将 DLL 注入另一个进程）。
*   [Inject Library Ex](http://www.delphibasics.info/home/delphibasicssnippets/afxcodehookexample-injectlibraryex)（如何使用 Ex 方法将 DLL 注入另一个进程）。
*   [Create Process Ex](http://www.delphibasics.info/home/delphibasicssnippets/afxcodehookexample-createprocessex)（如何使用 Ex 方法将 DLL 注入到创建的进程中）。
*   [Inject Executable](http://www.delphibasics.info/home/delphibasicssnippets/afxcodehookexample-injectexecutable)（InjectLibraryEx 的真正威力：注入 EXE 文件的能力）。
*   [Simple Api Hooking](http://www.delphibasics.info/home/delphibasicssnippets/afxcodehookexample-simpleapihooking)（如何使用 afxcodehook 来操作对 windows apis 的调用）。

我也读过：

*   Embarcadero 的 RAD Studio 帮助进入[`Image base address`](http://docwiki.embarcadero.com/RADStudio/en/Image_base_address)和
*   [`Base address`](http://en.wikipedia.org/wiki/Base_address)维基百科中的页面。

* * *

**问题：**

我寻求经验丰富的 Delphi 编码人员对 Layman 术语中的 {$IMAGEBASE $13140000} 指令的知情意见和简单解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T10:11:19.253

这指定了 DLL 的首选基地址。如果 DLL 可以在这个地址加载，那么加载器就会这样做。如果不能，则需要重新定位，DLL 中的所有绝对跳转都需要调整到新地址。

当加载器尝试将 DLL 映射到进程地址空间时，它首先读取首选基地址。然后它计算出 DLL 的大小。最后，它检查是否可以找到从基地址延伸到基地址 + 大小的连续内存块。如果是这样，那么 DLL 将加载到首选基地址。如果另一个 DLL 或 exe 驻留在首选基地址，则需要重新定位 DLL。如果应用程序保留了与首选 DLL 加载地址空间重叠的堆内存，则需要重新定位 DLL。

如果需要重新定位 DLL，则其物理页面不能在进程之间共享。Windows 系统 DLL 已经仔细选择了基地址，以确保没有冲突并且可以共享它们。

如今，[地址空间布局随机化 (ASLR)](http://en.wikipedia.org/wiki/Address_space_layout_randomization)使事情变得更加复杂。

您可以从这些文章中了解更多信息：

*   [Dobbs 博士：重新定位 Win32 DLL](http://www.drdobbs.com/article/print?articleId=184416272&siteSectionName=windows)
*   [窥视 PE：Win32 可移植可执行文件格式之旅](http://msdn.microsoft.com/en-us/library/ms809762.aspx)

# c++ - 在哪里可以找到 cuda 4.1 的 cuda.rule 文件

> ID：10225808
> 
> 赞同：1
> 
> 时间：2012-04-19T10:05:06.423
> 
> 标签：c++, cuda, gpu

我是 CUDA 的初学者，我正在尝试运行 GPU Computing SDK 中给出的示例，但它给了我以下错误。

文件：C:\NVIDIA Corporation\NVIDIA GPU Computing SDK 4.1\C\src\vectorAdd\vectorAdd_vs2008.vcproj 行：22 列：4 错误消息：自定义构建规则文件 'C:\Program Files (x86)\Microsoft Visual Studio 9.0 \VC\VCProjectDefaults\NvCudaRuntimeApi.rules' 未找到或加载失败。文件“C:\NVIDIA Corporation\NVIDIA GPU Computing SDK 4.1\C\src\vectorAdd\vectorAdd_vs2008.vcproj”加载失败。

谁能告诉我缺少什么以及我在哪里可以得到这个规则文件，因为我无法在 SDK 中找到它。

谢谢，任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:27:35.007

您是否安装了 CUDA 工具包？“SDK”基本上是一组示例，您还需要工具包，因为它包含编译器本身。

当您安装 CUDA 工具包（可[在此处](http://developer.nvidia.com/getcuda)获得）时，它会将 NvCudaRuntimeApi.rules 安装到 Visual Studio 目录中。如果由于某种原因找不到 Visual Studio（例如，您在 CUDA 之后安装 VS），您可以在 \extras\visual_studio_integration\rules 中找到规则文件。

一旦您安装了 Toolkit 并让 SDK 示例正常工作，请查看[这篇文章](https://stackoverflow.com/a/2047892/214473)了解如何开始您自己的项目（或[这篇文章](https://stackoverflow.com/a/7285235/214473)适用于 VS2010）。

# aspnet-compiler - aspnet_compiler 中的错误？

> ID：10225814
> 
> 赞同：1
> 
> 时间：2012-04-19T10:05:26.500
> 
> 标签：aspnet-compiler

我有一个包含多个 Web 项目的解决方案。

我已将每个项目构建到自己的文件夹中（大约有 10 个项目）：

```
/build/projA
/build/projB
/build/projC 
```

如果我打电话

```
aspnet_compiler -v / -p \"build/#{proj}\" merged/#{proj} 
```

反过来，一切都很好。

如果我同时进行所有 10 次调用`aspnet_compiler`，我会收到程序集加载错误，说明引用的程序集正在使用中。

这是一个错误吗？为什么会被使用？不应该。

无法加载的程序集位于多个项目中，但每个项目的 bin 文件夹中都有自己的副本。

**更新：**似乎（对于某些）作为引用的引用的程序集。那些加载了完整绑定信息的似乎可以工作。

这是来自其中一个失败加载的转储`fuslogvw`

```
The operation failed.
Bind result: hr = 0x80070020\. The process cannot access the file because it is being used by another process.

Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
Running under executable  c:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\aspnet_compiler.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = andrew.bullock
LOG: DisplayName = Yahoo.Yui.Compressor
 (Partial)
WRN: Partial binding information was supplied for an assembly:
WRN: Assembly Name: Yahoo.Yui.Compressor | Domain ID: 2
WRN: A partial bind occurs when only part of the assembly display name is provided.
WRN: This might result in the binder loading an incorrect assembly.
WRN: It is recommended to provide a fully specified textual identity for the assembly,
WRN: that consists of the simple name, version, culture, and public key token.
WRN: See whitepaper http://go.microsoft.com/fwlink/?LinkId=109270 for more information and common solutions to this issue.
LOG: Appbase = file:///E:/build/ProjA/
LOG: Initial PrivatePath = E:\build\ProjA\bin
LOG: Dynamic Base = C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\src_projects_proja\061ad2e7
LOG: Cache Base = C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\src_projects_proja\061ad2e7
LOG: AppName = 627cc9a9
Calling assembly : (Unknown).
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: E:\build\ProjA\web.config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/src_projects_proja/061ad2e7/627cc9a9/Yahoo.Yui.Compressor.DLL.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/src_projects_proja/061ad2e7/627cc9a9/Yahoo.Yui.Compressor/Yahoo.Yui.Compressor.DLL.
LOG: Attempting download of new URL file:///E:/build/ProjA/bin/Yahoo.Yui.Compressor.DLL.
LOG: Assembly download was successful. Attempting setup of file: E:\build\ProjA\bin\Yahoo.Yui.Compressor.dll
LOG: Entering download cache setup phase.
ERR: Error extracting manifest import from file (hr = 0x80070020).
ERR: Setup failed with hr = 0x80070020.
ERR: Failed to complete setup of assembly (hr = 0x80070020). Probing terminated. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:10:10.260

如果你`ClientBuildManager`直接打电话，外面`aspnet_compiler`似乎没有问题，不知道为什么。

```
var parameter = new ClientBuildManagerParameter
    {
        PrecompilationFlags = PrecompilationFlags.ForceDebug
    };
var client = new ClientBuildManager("/", src, dest, parameter);
client.PrecompileApplication(); 
```

# java - 同步处理程序创建和访问

> ID：10225815
> 
> 赞同：0
> 
> 时间：2012-04-19T10:05:29.750
> 
> 标签：java, android, multithreading, handler

我在访问线程中创建的处理程序时有时会出现空指针异常。

我正在使用两种方法。

一种是带线程的服务，我在其中创建处理程序并通过服务方法访问它。其次是在活动中创建的线程，我在其中创建线程，启动它，并创建处理程序。

问题很简单，处理程序是与主线程异步创建的。我在主（gui线程）中访问它，所以有时它会创建，有时它会在获取它时为空。

我可以在 gui 线程上进行 while(handler == null){ } 但这确实是一个糟糕的解决方案。我正在寻找一些优雅的方式来做到这一点。

一切都在主线程中。

```
Thread t = new Thread(new Runnable {
Looper.prepare();
handler = new Handler();
Looper.Loop();
}
handler.post(new Runnable{}) //at this point sometimes handler is still null. 
and it is created like few ms later. But still at this point i need valid handler
to background thread 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:36:22.843

您可以使用 java 源的并发包。可能的解决方案：

*   [倒计时锁存器](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html)
*   [循环障碍](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CyclicBarrier.html)

它们为您封装了同步逻辑。

您的代码将类似于：

```
CyclicBarrier cb = new CyclicBarrier(2);
...
T1:
cb.await();
T2:
cb.await(); 
```

CyclicBarrier（或 CountDownLatch）将一直等待，直到给定数量的线程（在本例中为 2）正在等待屏障。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:17:06.683

1.  除非“hander”属性是 volatile，否则使用 while-loop 或 sleep 不仅不优雅，而且是错误的——即使你发现 handler 不为 null，也不允许使用它。由于写入处理程序和创建处理程序实例之间没有发生之前的关系，主线程可能会在其构造函数运行之前看到对处理程序的引用；

2.  传递简单引用的安全选择是 SynchronousQueue（它不是真正的队列，它没有内部容量，它只是在线程之间移动对象）。你会像这样使用它（在我看来，一些错别字很可能）：

```
 final SynchronousQueue<Handler> giveMeHandler = new SynchronousQueue();
    new Thread(new Runnable(){
       public void run(){
          Handler handler;
          // create a Handler;
          giveMeHandler.put(handler); // blocks until handler taken;
       }

    }).start();

    Handler handler = giveMeHandler.take(); // blocks until handler given 
```

# javascript - 如何在html中创建字体选择栏

> ID：10225816
> 
> 赞同：2
> 
> 时间：2012-04-19T10:05:30.293
> 
> 标签：javascript, html, css

我想创建一个下拉菜单，我们可以在其中看到所有可用的字体，我们可以选择我们选择的任何字体。我还想创建一个字体颜色选择小部件。存在大量的字体样式。我想知道如何获得所有这些字体以及如何创建一个小部件，用户可以使用该小部件选择他选择的颜色。

为了创建字体选择下拉菜单，我使用了列表，出于演示目的，我添加了 3-4 个字体名称并显示它们。它工作正常。谷歌给了我所有字体名称的列表，但我认为用 html 代码写下来并不是一个好方法。我想应该有一个 js 库来做这一切。有没有 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T13:02:30.170

可能有点矫枉过正......但这是我使用 Google Font API 和我不久前编写的[Document Fragment Builder脚本提出的字体选择器示例。](http://rlemon.github.com/FragBuilder.js/)

```
var FragBuilder = (function() {
    var applyStyles = function(element, style_object) {
        for (var prop in style_object) {
            element.style[prop] = style_object[prop];
        }
    };
    var generateFragmentFromJSON = function(json) {
        var tree = document.createDocumentFragment();
        json.forEach(function(obj) {
            if (!('tagName' in obj) && 'textContent' in obj) {
                tree.appendChild(document.createTextNode(obj['textContent']));
            } else if ('tagName' in obj) {
                var el = document.createElement(obj.tagName);
                delete obj.tagName;
                for (part in obj) {
                    var val = obj[part];
                    switch (part) {
                    case ('textContent'):
                        el.appendChild(document.createTextNode(val));
                        break;
                    case ('style'):
                        applyStyles(el, val);
                        break;
                    case ('childNodes'):
                        el.appendChild(generateFragmentFromJSON(val));
                        break;
                    default:
                        if (part in el) {
                            el[part] = val;
                        }
                        break;
                    }
                }
                tree.appendChild(el);
            } else {
                throw "Error: Malformed JSON Fragment";
            }
        });
        return tree;
    };
    var generateFragmentFromString = function(HTMLstring) {
        var div = document.createElement("div"),
            tree = document.createDocumentFragment();
        div.innerHTML = HTMLstring;
        while (div.hasChildNodes()) {
            tree.appendChild(div.firstChild);
        }
        return tree;
    };
    return function(fragment) {
        if (typeof fragment === 'string') {
            return generateFragmentFromString(fragment);
        } else {
            return generateFragmentFromJSON(fragment);
        }
    };
}());

function jsonp(url) {
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = url;
    document.getElementsByTagName('body')[0].appendChild(script);
}

function replacestyle(url) {
    if (!document.getElementById('style_tag')) {
        var style_tag = document.createElement('link');
        style_tag.rel = 'stylesheet';
        style_tag.id = 'style_tag';
        style_tag.type = 'text/css';
        document.getElementsByTagName('head')[0].appendChild(style_tag);
        replacestyle(url);
    }
    document.getElementById('style_tag').href = url;
}

function loadFonts(json) {
    var select_frag = [
        {
        'tagName': 'select',
        'id': 'font-selection',
        'childNodes': [
            {
            'tagName': 'option',
            'value': 'default',
            'textContent': 'Default'}
        ]}
    ];
    json['items'].forEach(function(item) {
        var family_name = item.family,
            value = family_name.replace(/ /g, '+');

        if (item.variants.length > 0) {
            item.variants.forEach(function(variant) {
                value += ':' + variant;
            });
        }

        select_frag[0].childNodes.push({
            'tagName': 'option',
            'value': value,
            'textContent': family_name
        });
    });

    document.getElementById('container').appendChild(FragBuilder(select_frag));
    document.getElementById('font-selection').onchange = function(e) {
        var font = this.options[this.selectedIndex].value,
            name = this.options[this.selectedIndex].textContent;
        if (font === 'default') {
            document.getElementById('sink').style.fontFamily = 'inherit';
        } else {
            document.getElementById('sink').style.fontFamily = name;
            replacestyle('https://fonts.googleapis.com/css?family=' + font);
        }
    };
}

jsonp("https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyDBzzPRqWl2eU_pBMDr_8mo1TbJgDkgst4&sort=trending&callback=loadFonts");​ 
```

这是[厨房水槽](http://jsfiddle.net/rlemon/ENpWt/)示例...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T11:02:15.533

Jukka K. Korpela 是对的，但关于你的问题：

[这](https://stackoverflow.com/questions/4547788/javascript-font-family-issue-in-ie)应该让您开始选择字体系列：

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
  <h1 id="liveh1">Some text</h1>
  <select id="selecth1FontFamily" name="selectFontFamily" onchange="updateh1family();">
    <option> Serif </option>
    <option> Arial </option>
    <option> Sans-Serif </option>                                  
    <option> Tahoma </option>
    <option> Verdana </option>
    <option> Lucida Sans Unicode </option>                               
  </select>
    <script>
      function updateh1family() {
        var selector = document.getElementById('selecth1FontFamily');
        var family = selector.options[selector.selectedIndex].value;
        var h1 = document.getElementById('liveh1')
        h1.style.fontFamily = family;        
      }

    </script>
</body>
</html> 
```

如果查看是否安装了字体很重要，您可以使用[此](http://www.lalit.org/lab/javascript-css-font-detect/)工具进行检查。如果可以使用 flash，你可以使用[font-detect-js 之](https://github.com/gabriel/font-detect-js)类的东西（他们也有一个[演示](http://font-detect.s3.amazonaws.com/edit.html?)，但我没有设法让它在 chrome 中工作）。

对于颜色选择器，我建议使用：[jscolor](http://jscolor.com/)

希望它有所帮助，祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-22T13:12:05.707

我创建了一个 jquery 库，用于在具有即时预览的下拉列表中显示所有 google 字体。[https://github.com/saadqbal/HiGoogleFonts](https://github.com/saadqbal/HiGoogleFonts)。它有两个回调方法：

*   **selectedCallback** - 当字体被选中但尚未加载时触发此事件。
*   **loadCallback** - 当字体被加载并准备好应用时触发此事件。这是您应该将字体应用于元素的地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T10:26:36.680

可以在 IE 上获取所有可用的字体，请参阅[http://www.cs.tut.fi/~jkorpela/listfonts1.html](http://www.cs.tut.fi/~jkorpela/listfonts1.html)

但是在一个控件中提供这样一个列表来让用户选择他喜欢的字体并不是一个好主意。该列表实际上肯定会包含作为文本字体毫无意义的菜单字体，例如幻想字体、Wingdings 字体、符号和具有奇怪字符库的字体。

任何“所有字体名称”列表要么是伪造的，要么只是在某些非常特定的条件下所有字体名称的列表。

让用户选择他喜欢的字体的最好方法是根本不设置字体系列，让浏览器设置（通常是用户可控的）发挥其全部作用。不过，有充分的理由不这样做（例如 Times New Roman 是最常见的出厂默认设置，大多数用户对更改浏览器中的字体设置不感兴趣）。

# c# - 无法解释标记“。” 在位置 6

> ID：10225818
> 
> 赞同：1
> 
> 时间：2012-04-19T10:05:33.233
> 
> 标签：c#, asp.net, textbox, datatable

我有一个文本框和一个日历扩展器，这是页面 Default.aspx 中的代码：

```
 <asp:TextBox ID="tbdate" runat="server"></asp:TextBox>

 <asp:CalendarExtender ID="CalendarExtender1" runat="server" TargetControlID="tbdate" 
      Format="dd.MM.yyyy">
 </asp:CalendarExtender> 
```

现在在 Default.aspx.cs 页面中，我尝试将 TextBox 中的值插入 DataTable 的新列中

```
 dt.Columns.Add("date", typeof(string), tbdate.Text); 
```

我有这个错误

无法解释标记“。” 在位置 6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:18:54.187

您需要先添加列：

```
dt.Columns.Add(new DataColumn("date", typeof(DateTime)); 
```

然后做一个循环并添加所需的日期：

```
foreach(DataRow row in dt.Rows)
{
 row["date"] = DateTime.Parse(tbdate.Text);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:10:06.553

我假设您不想将此日期值添加为`DataColumn` 但为`DataRow`：

```
DataTable dt = new DataTable();
dt.Columns.Add("date", typeof(DateTime));
dt.Rows.Add(DateTime.Parse(tbdate.Text)); 
```

顺便说一句，[`DataColumnCollection.Add`](http://msdn.microsoft.com/en-us/library/632cdz7z.aspx)您使用的重载是用于[`Expression`](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression.aspx).

如果要将此值添加到所有行：

```
var selectedDate = DateTime.Parse(tbdate.Text));
dt.Columns.Add("date", typeof(DateTime));
foreach(DataRow row in dt.Rows)
{
    row["date"] = selectedDate;
} 
```

# javascript - Javascript函数因全局变量而失败

> ID：10225824
> 
> 赞同：0
> 
> 时间：2012-04-19T10:05:43.927
> 
> 标签：javascript, variables, global

我已经使用此功能提交到任何 url 或“自我”，无论是否有查询字符串，很多次都没有任何问题。

```
function submitu(url, q) {
 var frm = document.<?php echo $formname ?>;
 if (url == '') {url = '<?php echo $thispage?>'; }
 frm.action = url+q; frm.submit(); } 
```

如果我尝试将 PHP 变量移到函数之外，如下所示，它将停止工作（frm 未定义错误）

```
var thispage = '<?php echo $thispage?>';
var frm = document.<?php echo $formname?>;
function submitu(url, q) {
 if (url == '') {url = thispage;}
 frm.action = url+q; frm.submit();} 
```

我也试过 var frm = document.forms[''];

我没有任何其他冲突的javascript，

(1)。谁能告诉我为什么这不起作用？(2)。如果将函数放置在 jquery $(function() {.....} 就绪函数的内部和顶部，为什么第一种方法也会失败？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:20:37.307

它失败了，因为在函数之外， var frm = document.formname; 将在页面加载时立即运行，即在实际构建表单元素之前，因此您会得到“未定义”。在函数内部时，只有在函数运行时才运行，此时 DOM 已完成并且可以找到它。

# c# - C# Webmail.Send方法如何更改人名

> ID：10225826
> 
> 赞同：2
> 
> 时间：2012-04-19T10:05:53.897
> 
> 标签：c#, .net, email, webmail

```
 WebMail.SmtpServer = SmtpServer;
                WebMail.UserName = SmtpUsername;
                WebMail.Password = SmtpPassword;
                WebMail.Send(
                        ReplayEmail,
                        subject,
                        body,
                        email
                    ); 
```

主题是例如“询问专家”

正文是html正文

电子邮件例如“domain@domain.com”

电子邮件发送到例如“domain2@domain.com”

现在，当我发送邮件时，我收到的邮件没问题，但作为发送邮件的人，我看到“domain2@domain.com”。如何改变这个？

邮件现在看起来像

```
domain2@domain.com Ask specialist 
```

我想要名字（例如 Adoo）和邮件

`Adoo Ask specialist`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:10:49.527

我假设`ReplayAddress`是`System.Net.Mail.MailAddress`在您未显示的其他地方的代码中定义的。MailAddress 有一个构造函数，它接受一个字符串`displayName`，如果我理解正确的话，它应该做你想做的事 - 文档在[这里](http://msdn.microsoft.com/en-us/library/1s17zfkf.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T10:11:55.330

如果我理解正确，在设置邮件时，您可以执行以下操作：

```
mail.To = new MailAddress("domain2@domain.com", "Adoo"); 
```

或者 ：

```
mail.To= @"\Adoo \ <domain2@domain.com>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T10:12:23.067

通常在 SMTP 中，您可以使用如下格式创建友好名称：

```
 WebMail.Send(
                    "\"Adoo\" <domain2@domain.com>",
                    subject,
                    body,
                    email
                ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T10:24:50.313

或者你可以使用

```
mail.To= @"&quot;Adoo&quot; &lt;domain2@domain.com&gt"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T10:14:11.237

您正在使用 WebMail 类，它为类的 .From 属性获取一个字符串。我会使用 MailAddress 类并执行以下操作：

```
MailAddress from = new MailAddress("domain2@domain.com", "Adoo Ask specialist"); 
```

# c# - 在多种日志记录方法中使用 StreamWriter 的实例

> ID：10225837
> 
> 赞同：1
> 
> 时间：2012-04-19T10:06:21.437
> 
> 标签：c#, .net

我想在我的应用程序中记录状态，并且我想避免将 TextWriter 参数传递给方法，例如

```
public static void M1(TextWriter w) 
```

到我调用的所有方法。无论如何要避免这样做？我想要类似以下的内容，但错误：当前上下文中不存在名称“w”

无论如何让streamwriter的实例对所有方法都可用？或类似的东西？如果可能的话，你能提供一个例子。

```
 public static void Main(string[] args)
    {
        using (StreamWriter w = File.CreateText(ConfigManager.logFile))
        {
            Log("start");
            M1();
            Log("end");
        }
    }

    public static void M1()
    {
        Log("M1 start");
        Log("M1 end");
    }

    public static void Log(string logMessage)
    {
        w.WriteLine("[{0}][{1}] {2} ", String.Format("{0:yyyyMMdd HH:mm:ss}", DateTime.Now),
            "Info", logMessage);
        w.Flush();
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T10:14:05.743

首先，您可能想看看 log4net 或 NLog，这两个日志框架可以提供很多功能并防止很多与日志相关的问题。

这些框架并不难使用，而且您可以很快启动并运行。但是，如果您想要一个快速简单的解决方案，如您的要求：

`w`在那个范围内是未知的。有几种方法可以解决这个问题，但在你的情况下，我建议如下：

创建一个为您记录日志的类：

```
public class Logger
{
    public void Log(string message)
    {
        using (StreamWriter w = File.CreateText(ConfigManager.logFile))
        {
            w.WriteLine("[{0}][{1}] {2} ", String.Format("{0:yyyyMMdd HH:mm:ss}",  DateTime.Now), "Info", logMessage);
            w.Flush();
        }
    }
} 
```

然后，只需调用该类。您可以在静态 Program 类中有一个（静态）全局变量，或者创建一个新实例并每次调用它。

静态，在您的 Program 类中定义，在任何函数之外：

`static Logger logger = new Logger();`

实例，只需在必要时现场定义：

`var logger = new Logger()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:11:47.927

如果您使用“using 语句”来创建流写入，那么它将在其范围之外不可用。 [微软](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)

```
Using(StreamWriter sw= new StreamWriter(filename))
{
   sw.Writeline("error");
} 
```

如果您想使用流作为全局变量，请尝试将 sw 声明为类成员。注意：如果用作全局变量，请记住关闭流写入器。

在你的情况下，它会是这样的

```
private static StreamWriter w;
public static void Main(string[] args)
{
    w = File.CreateText(ConfigManager.logFile);
    Log("start");
    M1();
    Log("end");        
}

public static void M1()
{
    Log("M1 start");
    Log("M1 end");
}

public static void Log(string logMessage)
{
    w.WriteLine("[{0}][{1}] {2} ", String.Format("{0:yyyyMMdd HH:mm:ss}", DateTime.Now),
        "Info", logMessage);
    w.Flush();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T10:12:50.537

如果您需要在不同的类中使用 StreamWriter，您可以选择：

1.  使它们继承自 LoggingClass 并在其中定义您的 StreamWriter

2.  使用您的静态软件和静态方法 Log 创建一个静态 Logger 类（更好的方式恕我直言）

    公共类 Logger { 私有静态 StreamWriter w; public void Log(string message) { if(w == null) w = File.CreateText(ConfigManager.logFile); { w.WriteLine("[{0}][{1}] {2} ", String.Format("{0:yyyyMMdd HH:mm:ss}", DateTime.Now), "Info", logMessage); w.Flush(); } } }

# ruby - 如果 Ruby 线程不是真正并行的，我能给它们带来什么用处？

> ID：10225838
> 
> 赞同：6
> 
> 时间：2012-04-19T10:06:24.213
> 
> 标签：ruby, multithreading, parallel-processing

当我第一次发现线程时，我尝试通过在许多线程中调用 sleep 来检查它们是否确实按预期工作，而不是正常调用 sleep。它奏效了，我很高兴。

但后来我的一个朋友告诉我，这些线程并不是真正并行的，睡眠一定是在假装它。

所以现在我写了这个测试来做一些真正的处理：

```
class Test
  ITERATIONS = 1000

  def run_threads
    start = Time.now

    t1 = Thread.new do
      do_iterations
    end

    t2 = Thread.new do
      do_iterations
    end

    t3 = Thread.new do
      do_iterations
    end

    t4 = Thread.new do
      do_iterations
    end

    t1.join
    t2.join
    t3.join
    t4.join

    puts Time.now - start
  end

  def run_normal
    start = Time.now

    do_iterations
    do_iterations
    do_iterations
    do_iterations

    puts Time.now - start
  end

  def do_iterations
    1.upto ITERATIONS do |i|
      999.downto(1).inject(:*) # 999!
    end
  end
end 
```

现在我很伤心，因为 run_threads() 不仅没有比 run_normal 表现好，它甚至更慢！

那么，如果线程不是真正并行的，我为什么要让我的应用程序复杂化呢？

**** 更新 ****

@fl00r 说如果我将线程用于 IO 任务，我可以利用它们，所以我又写了两个 do_iterations 变体：

```
def do_iterations
  # filesystem IO
  1.upto ITERATIONS do |i|
    5.times do
      # create file
      content = "some content #{i}"
      file_name = "#{Rails.root}/tmp/do-iterations-#{UUIDTools::UUID.timestamp_create.hexdigest}"
      file = ::File.new file_name, 'w'
      file.write content
      file.close

      # read and delete file
      file = ::File.new file_name, 'r'
      content = file.read
      file.close
      ::File.delete file_name
    end
  end
end

def do_iterations
  # MongoDB IO (through MongoID)
  1.upto ITERATIONS do |i|
    TestModel.create! :name => "some-name-#{i}"
  end
  TestModel.delete_all
end 
```

性能结果还是一样：正常>线程。

但现在我不确定我的虚拟机是否能够使用所有内核。当我测试过它时会回来。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T10:30:41.227

只有当你有一些缓慢的 IO 时，线程才能更快。

在 Ruby 中，您有全局解释器锁，因此一次只能工作一个线程。因此，Ruby 花费很多时间来管理应该立即触发哪个线程（线程调度）。因此，在您的情况下，当没有任何 IO 时，它会变慢！

您可以使用 Rubinius 或 JRuby 来使用真正的线程。

IO 示例：

```
module Test
  extend self

  def run_threads(method)
    start = Time.now

    threads = []
    4.times do
      threads << Thread.new{ send(method) }
    end

    threads.each(&:join)

    puts Time.now - start
  end

  def run_forks(method)
    start = Time.now

    4.times do
      fork do
        send(method)
      end
    end
    Process.waitall

    puts Time.now - start
  end

  def run_normal(method)
    start = Time.now

    4.times{ send(method) }

    puts Time.now - start
  end

  def do_io
    system "sleep 1"
  end

  def do_non_io
    1000.times do |i|
      999.downto(1).inject(:*) # 999!
    end
  end
end

Test.run_threads(:do_io)
#=> ~ 1 sec
Test.run_forks(:do_io)
#=> ~ 1 sec
Test.run_normal(:do_io)
#=> ~ 4 sec

Test.run_threads(:do_non_io)
#=> ~ 7.6 sec
Test.run_forks(:do_non_io)
#=> ~ 3.5 sec
Test.run_normal(:do_non_io)
#=> ~ 7.2 sec 
```

IO 作业在线程和进程中快 4 倍，而非 IO 作业在进程中的速度是线程和同步方法的两倍。

同样在 Ruby 中提供了[Fibers](http://apidock.com/ruby/Fiber)轻量级“协程”和很棒[的 em-synchrony gem](https://github.com/igrigorik/em-synchrony)来处理异步进程

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-19T11:09:33.373

fl00r 是对的，全局解释器锁防止了 ruby​​ 中多个线程同时运行，IO 除外。

该`parallel`库是一个非常简单的库，可用于真正的并行操作。安装`gem install parallel`。这是重写以使用它的示例：

```
require 'parallel'
class Test
  ITERATIONS = 1000

  def run_parallel()
    start = Time.now

    results = Parallel.map([1,2,3,4]) do |val|
        do_iterations
    end

    # do what you want with the results ...
    puts Time.now - start
  end

  def run_normal
    start = Time.now

    do_iterations
    do_iterations
    do_iterations
    do_iterations

    puts Time.now - start
  end

  def do_iterations
    1.upto ITERATIONS do |i|
      999.downto(1).inject(:*) # 999!
    end
  end
end 
```

在我的电脑（4 cpu）上，`Test.new.run_normal`需要 4.6 秒，而`Test.new.run_parallel`需要 1.65 秒。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-19T12:19:15.080

线程的行为由实现定义。例如，JRuby 使用 JVM 线程实现线程，而 JVM 线程又使用真实线程。

[Global Interpreter Lock](http://en.wikipedia.org/wiki/Global_Interpreter_Lock)仅出于历史原因而存在。如果 Ruby 1.9 只是突然引入了真正的线程，那么向后兼容性就会被破坏，并且会进一步减慢它的采用速度。

[Jörg W Mittag的](https://stackoverflow.com/users/2988/jorg-w-mittag)[这个答案](https://stackoverflow.com/a/57802/512904)在各种 Ruby 实现的线程模型之间提供了很好的比较。选择适合您需要的一种。

话虽如此，线程可用于等待子进程完成：

```
pid = Process.spawn 'program'
thread = Process.detach pid

# Later...
status = thread.value.exitstatus 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-19T15:52:41.493

即使线程不并行执行，它们也可以是完成某些任务的一种非常有效、简单的方法，例如进程内 cron 类型的作业。例如：

```
Thread.new{ loop{ download_nightly_logfile_data; sleep TWENTY_FOUR_HOURS } }
Thread.new{ loop{ send_email_from_queue; sleep ONE_MINUTE } }
# web server app that queues mail on actions and shows current log file data 
```

我还使用 DRb 服务器中的线程来处理我的一个 Web 应用程序的长时间运行的计算。Web 服务器在一个线程中开始计算并立即继续响应 Web 请求。它可以定期查看作业的状态并查看其进展情况。有关更多详细信息，请阅读[DRb Server for Long-Running Web Processes](http://phrogz.net/drb-server-for-long-running-web-processes)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-09T08:08:49.580

要查看差异的简单方法，请使用 Sleep 而不是 IO，后者也依赖于太多变量：

```
class Test

ITERATIONS = 1000

  def run_threads
    start = Time.now
    threads = []

    20.times do
      threads << Thread.new do
        do_iterations
      end
    end

    threads.each {|t| t.join } # also can be written: threads.each &:join

    puts Time.now - start
  end

  def run_normal
    start = Time.now

    20.times do
      do_iterations
    end

    puts Time.now - start
  end

  def do_iterations
    sleep(10)
  end
end 
```

即使在 MRB 上，这与 GIL 之间的线程解决方案也会有所不同

# paypal - 从 Paypal 获取自定义数据

> ID：10225841
> 
> 赞同：0
> 
> 时间：2012-04-19T10:06:35.177
> 
> 标签：paypal

我正在创建一个简单的在线贝宝商务，我对在完成订单付款后如何向卖家和买家发送数据有一些疑问。场景如下所示：

每个产品（法律文件）都有不同的形式，因为为了交付产品，买方需要为每个项目指定不同的信息。研究 Paypal 文档我了解到，当我单击购买按钮或添加到购物车时，我可以添加隐藏字段并将它们与交易一起发送。

付款完成后：

1.  买家将收到付款确认（确定由贝宝发送）
2.  卖家将在一封电子邮件中收到填写每种产品文件所需的所有必要信息。

我注意到使用沙箱，买方可以为卖方添加付款说明，但不幸的是，文本区域只允许有限的文本。

如果我理解正确，请告诉我。付款完成后，Paypal 将所有数据 (IPN) 发送回 paypal 脚本（包括通过使用表单发送的所有信息）。在这种情况下，我应该能够检查交易是否完成，如果完成，则解析回复并使用 PHP 通过电子邮件将数据发送给卖家。这是对的吗？

有人可以给我看一个简单的例子吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:16:41.153

交易完成后（订阅、一次性网络表单支付、快速结帐或其他），Paypal 将授权查询发送到您的 IPN 脚本（链接在您的 Paypal 配置文件中定义） IPN 值在此处描述 [https://www .paypalobjects.com/en_US/ebook/subscriptions/Appx-ipn_subscription_variables.html](https://www.paypalobjects.com/en_US/ebook/subscriptions/Appx-ipn_subscription_variables.html)

或在这里

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_IPNandPDTVariables](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_IPNandPDTVariables)

# c++ - 如何使用 C++ 编辑文本文件中的一行？

> ID：10225843
> 
> 赞同：2
> 
> 时间：2012-04-19T10:06:38.060
> 
> 标签：c++, file, fstream

我有一个这样的txt文件：

```
"shoes":12
"pants":33
"jacket":26
"glasses":16
"t-shirt":182 
```

我需要更换夹克的数量（例如从 26 到 42）。所以，我写了这段代码，但我不知道如何编辑有“夹克”这个词的特定行：

```
#include <iostream>
#include <fstream> 

using namespace std;

int main() {

    ifstream f("file.txt");
    string s;

    if(!f) {
        cout< <"file does not exist!";
        return -1;
    }

    while(f.good()) 
    {       
        getline(f, s);
        // if there is the "jacket" in this row, then replace 26 with 42.
    }

    f.close(); 
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T10:31:18.800

为了修改文本文件中的数据，您通常必须将整个文件读入内存，在那里进行修改，然后重写。在这种情况下，我建议为条目定义一个结构，其中`name`和`quantity`条目，定义为名称相等的相等性，以及重载`operator>>`并`operator<<`从文件中读取和写入它。然后，您的整体逻辑将使用以下功能：

```
void
readData( std::string const& filename, std::vector<Entry>& dest )
{
    std::ifstream in( filename.c_str() );
    if ( !in.is_open() ) {
        //  Error handling...
    }
    dest.insert( dest.end(),
                 std::istream_iterator<Entry>( in ),
                 std::istream_iterator<Entry>() );
}

void
writeData( std::string const& filename, std::vector<Entry> const& data )
{
    std::ifstream out( (filename + ".bak").c_str() );
    if ( !out.is_open() ) {
        //  Error handling...
    }
    std::copy( data.begin(), data.end(), std::ostream_iterator<Entry>( out ) );
    out.close();
    if (! out ) {
        //  Error handling...
    }
    unlink( filename.c_str() );
    rename( (filename + ".bak").c_str(), filename.c_str() );
} 
```

（我建议在错误处理中引发异常，这样您就不必担心`if`s 的 else 分支。除了`ifstream`首先创建的之外，错误条件是异常的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:20:24.780

首先，这在幼稚的方式中是不可能的。假设您要编辑所述行但写入更大的数字，文件中将没有任何空间。所以通常中间的eidts都是通过重写文件或者写副本来完成的。程序可能会使用内存、临时文件等并将其对用户隐藏，但在文件中间更改一些字节只会在非常受限的环境中工作。

所以你要做的是写另一个文件。

```
...
string line;
string repl = "jacket";
int newNumber = 42;
getline(f, line)
if (line.find(repl) != string::npos)
{
    osstringstream os;
    os << repl  << ':' << newNumber;
    line = os.str();
}
// write line to the new file. For exmaple by using an fstream.
... 
```

如果文件必须相同，则可以将所有行读取到内存中，如果内存足够的话，或者使用临时文件进行输入或输出。

# security - 使用 Cain 和 Abel 捕获同一网络中机器的流量

> ID：10225850
> 
> 赞同：1
> 
> 时间：2012-04-19T10:06:53.900
> 
> 标签：security, networking

我已经在机器（A）中安装了 Cain 和 Able。机器 A 通过 lan(B) 连接到另一台机器。现在我想分析机器B的所有流量。这可以通过在机器A上安装Cain和Abel来实现吗？
**编辑**
经过更多的调整后- cain 和 abel 能够嗅探机器 B 的数据包。但问题是我如何查看数据包。它仅显示捕获/嗅探的数据包数量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T12:25:45.460

灰，

正如我们在聊天中讨论的那样，虽然 Cain 是一个很好的 ARP 中毒工具，但 Wireshark 是一个更好的分析工具。好消息是，当您使用 Cain 接收 ARP 中毒数据包时，您还可以使用 Wireshark 同时嗅探数据包。

在此处获取二进制文件[http://www.wireshark.org/](http://www.wireshark.org/)

一旦您开始使用 cain 中毒，只需在 Wireshark 中选择您要中毒的相同界面，然后单击开始捕获。此视图将远远优于您在使用 Cain 时看到的视图。

值得注意的是，要知道还有其他 ARP 缓存中毒程序，它们更专为此类应用程序而构建。我发现的最好的之一是 ettercap。它也适用于 Wireshark 或您选择使用的任何其他嗅探器。

我希望我们的讨论有所帮助。

直流

# android - 当按矩阵缩放图像视图时，如何定义最大和最小缩放 lvl

> ID：10225851
> 
> 赞同：0
> 
> 时间：2012-04-19T10:06:58.500
> 
> 标签：android, android-imageview

嘿，这是我的课：

```
public class MultiTouchHandler implements OnTouchListener {
private static final int NONE = 0;
private static final int DRAG = 1;
private static final int ZOOM = 2;
private static final float MIN_ZOOM = 0.5f;
private static final float MAX_ZOOM = 2.0f;

private int mode = NONE;
private float oldDist;
private PointF mid;
private PointF start;
private Matrix matrix;
private Matrix savedMatrix;
private ImageView reticle;
private int imageWidth;
private int imageHeight;
private float[] values;
private boolean isTouched;
private float width;
private float height;
private float scale;

public MultiTouchHandler(ImageView v) {
    reticle = v;
    v.setOnTouchListener(this);
    mid = new PointF();
    start = new PointF();

    imageWidth = v.getDrawable().getIntrinsicWidth();
    imageHeight = v.getDrawable().getIntrinsicHeight();

    matrix = new Matrix();
    savedMatrix = new Matrix();
    values = new float[9];

}

public boolean onTouch(View v, MotionEvent event) {
    synchronized (this) {
        if(reticle.getScaleType() != ScaleType.MATRIX){
            reticle.setScaleType(ScaleType.MATRIX);
            matrix.postTranslate(reticle.getWidth()/2 - imageWidth/2, reticle.getHeight()/2 - imageHeight/2);
            reticle.setImageMatrix(matrix);
        }

        matrix.getValues(values);
        width = values[0]*imageWidth;
        height = values[4]*imageHeight;

        switch (event.getAction() & MotionEvent.ACTION_MASK) {
           case MotionEvent.ACTION_DOWN:
              savedMatrix.set(matrix);
              if(event.getX() > values[2] && event.getX() < values[2] + width &&
                  event.getY() > values[5] && event.getY() < values[5] + height){
                  start.set(event.getX(), event.getY());
                  isTouched = true;
              }
              mode = DRAG;
              break;

           case MotionEvent.ACTION_POINTER_DOWN:
               oldDist = spacing(event);
               if (oldDist > 10f) {
                  savedMatrix.set(matrix);
                  midPoint(mid, event);
                  mode = ZOOM;
               }
               break;

           case MotionEvent.ACTION_UP:
           case MotionEvent.ACTION_POINTER_UP:
              mode = NONE;
              isTouched = false;
              break;

           case MotionEvent.ACTION_MOVE:
              if (mode == DRAG && isTouched) {
                 matrix.set(savedMatrix);
                 matrix.postTranslate(event.getX() - start.x, event.getY() - start.y);
              }
              else if (mode == ZOOM) {
                  float newDist = spacing(event);
                  if (newDist > 10f) {
                     matrix.set(savedMatrix);
                     scale = newDist / oldDist;

                     Log.v("scale", "" + scale);

                     scale = Math.max(MIN_ZOOM, Math.min(scale, MAX_ZOOM));

                     Log.v("new scale", "" + scale);

                     matrix.postScale(scale, scale, mid.x, mid.y);
                  }
              }
              break;
        }
        reticle.setImageMatrix(matrix);
        return true;
    }
}

private float spacing(MotionEvent event) {
       float x = event.getX(0) - event.getX(1);
       float y = event.getY(0) - event.getY(1);
       return FloatMath.sqrt(x * x + y * y);
}

private void midPoint(PointF point, MotionEvent event) {
       float x = event.getX(0) + event.getX(1);
       float y = event.getY(0) + event.getY(1);
       point.set(x / 2, y / 2);
} 
```

}

问题是，它只适用于实际的捏合/缩放，而不适用于全球规模......我试图保存全球规模，每次我缩放时，我都会将实际规模乘以全球规模，但这是无用的......它接缝从矩阵中获得的比例是全局比例，但它不像一个比例。我究竟做错了什么？有人可以帮忙吗？感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T15:27:03.907

为什么没有人使用`ScaleGestureDetector`这种东西？我正在做一些非常相似的事情，并且正在使用一个扩展的小助手类`ScaleGestureDetector.SimpleOnScaleListener`。

```
class ScaleListener extends
    ScaleGestureDetector.SimpleOnScaleGestureListener {

    float scaleFactor;
    Matrix matrix;

    public ScaleListener(){
        super();
        scaleFactor = 1.0f;
        matrix = new Matrix();
    }

    public boolean onScale(ScaleGestureDetector detector){
        //updating the scalefactor after the current gesture
        scaleFactor *= detector.getScaleFactor();

        //making sure the scale is within the limits
        scaleFactor = Math.max(MIN_ZOOM, Math.min(scaleFactor, MAX_ZOOM));

        //applying the scale via a matrix to the imageview
        matrix.setScale(scaleFactor, scaleFactor);
        imageview.setImageMatrix(matrix)
    }
} 
```

我对你关于全局比例的问题有点困惑，但矩阵/比例因子包含图像视图的全局比例。希望这会有所帮助，即使它有点晚了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T06:32:35.467

所以这就是我解决它的方法......它不是很优雅，但它有效

```
else if (mode == ZOOM) {
                  float newDist = spacing(event);
                  if (newDist > 10f) {
                     matrix.set(savedMatrix);
                     matrix.getValues(values);

                     if(values[0] < MAX_ZOOM && values[0] > MIN_ZOOM){
                         scale = newDist / oldDist;
                         scale = Math.max(MIN_ZOOM, Math.min(scale, MAX_ZOOM));                          
                         matrix.postScale(scale, scale, mid.x, mid.y);

                         reticle.setImageMatrix(matrix);
                     } else if(values[0] >= MAX_ZOOM){
                         newScale = newDist / oldDist;
                         if(newScale < scale){
                             scale = newScale;
                             scale = Math.max(MIN_ZOOM, Math.min(scale, MAX_ZOOM));                          
                             matrix.postScale(scale, scale, mid.x, mid.y);

                             reticle.setImageMatrix(matrix);
                         }
                     } else if(values[0] <= MIN_ZOOM){
                         newScale = newDist / oldDist;
                         if(newScale > scale){
                             scale = newScale;
                             scale = Math.max(MIN_ZOOM, Math.min(scale, MAX_ZOOM));                          
                             matrix.postScale(scale, scale, mid.x, mid.y);

                             reticle.setImageMatrix(matrix);
                         }
                     }
                  }
              } 
```

这是我编辑的代码的唯一和平

# c# - 使用 .Descendents(value) 解析 XML 文档

> ID：10225857
> 
> 赞同：1
> 
> 时间：2012-04-19T10:07:15.263
> 
> 标签：c#, .net, xml, xml-parsing

我正在尝试解析我创建的 xml 文档。但是，如果有某些字符（包括空格，这是我的问题）则`xml.Descendants(value)`不起作用。`value`

我的 xml 结构如下：

```
<stockists>
  <stockistCountry country="Great Britain">
    <stockist>
      <name></name>
      <address></address>
    </stockist>
  </stockistCountry>
  <stockistCountry country="Germany">
    <stockist>
      <name></name>
      <address></address>
    </stockist>
  </stockistCountry>
  ...
</stockists> 
```

我用于解析的 C# 代码如下所示：

```
string path = String.Format("~/Content/{0}/Content/Stockists.xml", Helper.Helper.ResolveBrand());
XElement xml = XElement.Load(Server.MapPath(path));

var stockistCountries = from s in xml.Descendants("stockistCountry")
                                select s;

StockistCountryListViewModel stockistCountryListViewModel = new StockistCountryListViewModel
{
    BrandStockists = new List<StockistListViewModel>()
};

foreach (var stockistCountry in stockistCountries)
{
    StockistListViewModel stockistListViewModel = new StockistListViewModel()
    {
        Country = stockistCountry.FirstAttribute.Value,
        Stockists = new List<StockistDetailViewModel>()
    };

    var stockist = from s in xml.Descendants(stockistCountry.FirstAttribute.Value) // point of failure for 'Great Britain'
                   select s;

    foreach (var stockistDetail in stockist)
    {
         StockistDetailViewModel stockistDetailViewModel = new StockistDetailViewModel
         {
             StoreName = stockistDetail.FirstNode.ToString(),
             Address = stockistDetail.LastNode.ToString()
         };

         stockistListViewModel.Stockists.Add(stockistDetailViewModel); 
     }

     stockistCountryListViewModel.BrandStockists.Add(stockistListViewModel);
 }

 return View(stockistCountryListViewModel); 
```

我想知道我是否正确地处理了 Xml 解析，我的属性中是否不应该有空格等？如何修复它以便英国解析

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:14:01.257

> 但是，如果 value 具有某些字符，则 xml.Descendants(value) 不起作用

`XElement.Descendants()`期望*标记*的 XName ，而不是*值*。

而且 XML 标签确实不允许包含空格。

但是，您的示例 XML 只包含一个属性的值，并且那里的空间很好。

更新：

我想你需要

```
//var stockist = from s in xml.Descendants(stockistCountry.FirstAttribute.Value) 
//              select s;

var stockists = stockistCountry.Descendants("stockist"); 
```

# wpf - 从列表中取消选中任何一个 CellTemplate 复选框，我想取消选中 Header Checkbox

> ID：10225860
> 
> 赞同：0
> 
> 时间：2012-04-19T10:07:27.240
> 
> 标签：wpf, checkbox, wpfdatagrid, observablecollection, datagridcolumnheader

我创建了一个包含 4 列的数据表，其中 3 列是字符串，另一列是布尔类型。我将数据表（xmldatadocument）映射到 wpf 中的 datagridview。所以结果看起来数据网格中的文本列和复选框列。我在复选框列标题中添加了一个复选框标题模板。当 i\header 复选框未选中时，我可以取消选中列中的所有复选框。当标题 chekcbox 被选中时，我还可以检查列中的所有复选框。但是如果未选中该列中的复选框之一，我也需要取消选中标题复选框。请帮我解决这个问题。 . 我在下面添加了屏幕截图、XAML 和代码。

![数据网格视图](../Images/17e62b0eeff2e44c8d798355d7a60d55.png)

PS：使用 WPF 数据网格。

```
<dg:DataGrid.Columns>
                <dg:DataGridCheckBoxColumn Binding="{Binding Check}" Width="50" >
                    <dg:DataGridCheckBoxColumn.HeaderTemplate>
                        <DataTemplate x:Name="dtAllChkBx">
                            <CheckBox Name="cbxAll" Content="{x:Static properties:Resources.lblAll}" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"></CheckBox>
                        </DataTemplate>
                    </dg:DataGridCheckBoxColumn.HeaderTemplate>

public static ObservableCollection<Lst> list = new ObservableCollection<Lst>();
private void CheckBox_Checked(object sender, RoutedEventArgs e)
{
    for (int i = 0; i < list.Count; i++)
    {
        list[i].Check = true;
    }
}

private void CheckBox_Unchecked(object sender, RoutedEventArgs e)
{
    for (int i = 0; i < list.Count; i++)
    {
        list[i].Check = false;
    }
}

public class Lst : ObservableCollection<Lst>
{
    public bool Check { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:28:45.967

这是标题的控制模板

```
<Style x:Key="checkBoxHeaderStyle"
                           TargetType="{x:Type w:DataGridColumnHeader}">
                                                    <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type w:DataGridColumnHeader}">
                                    <CheckBox 
                                              IsChecked="{Binding  Path = IsSelectAllChecked , Mode = TwoWay}"/>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style> 
```

这是应用样式的模板列

```
<w:DataGridTemplateColumn MinWidth="50"
                                              HeaderStyle="{DynamicResource checkBoxHeaderStyle}"
                                              CanUserResize="False">
                        <w:DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <CheckBox Name="selectAllCheckBox"
                                                                  HorizontalAlignment="Center"                                              Margin="1,0,0,0"                                                                                            VerticalAlignment="Center"
                                          IsChecked="{Binding Path = IsSelected, Mode=TwoWay}" />
                            </DataTemplate>
                        </w:DataGridTemplateColumn.CellTemplate>
                    </w:DataGridTemplateColumn> 
```

被选中的属性是

```
public bool IsSelected
{
    get { return selected; }
    set { selected = value;
    OnPropertyChanged("IsSelected");
    }
} 
```

对于标题复选框

```
public bool IsSelectAllChecked
        {
            get { return isSelectAllChecked; }
            set
            {
                isSelectAllChecked = value;
                base.OnPropertyChanged("IsSelectAllChecked");
//Call the method which sets the IsSelected property to true of false, based on value
                SetAllCheckBoxesState(value);
            }

    } 
```

我希望它有帮助:)

# c# - 从 DataGridView 中提取数据并填充到 XML 中

> ID：10225863
> 
> 赞同：1
> 
> 时间：2012-04-19T10:07:33.077
> 
> 标签：c#, xml, datagridview, datatable, datasource

我想做的是在我的 Windows 窗体应用程序的业务逻辑中编写一个单独的函数。此函数接收 xml 文件路径和 datagridview 对象作为参数。

这应该有效：

```
DataTable dt = new DataTable();
dt = (DataTable)datagridview.DataSource;
DataSet ds = new DataSet(); 
ds.Tables.Add(dt);
ds.WriteXml(xml_file, System.Data.XmlWriteMode.IgnoreSchema); 
```

但是我每次都遇到错误：

```
dt = (DataTable)datagridview.DataSource;

[System.InvalidCastException] = {"Unable to cast object of type 'System.Windows.Forms.BindingSource' to type 'System.Data.DataTable'."} 
```

所以我在另一个博客中被建议尝试这个：

```
BindingSource bs = (BindingSource)dgv.DataSource;
dt = (DataTable)bs.DataSource; 
```

但我明白了

```
[System.InvalidCastException] = {"Unable to cast object of type 'ExportDataTestApp.NorthwindDataSet' to type 'System.Data.DataTable'."} 
```

我已经搜索并尝试了所有我不会感到惊讶的事情，因为我是 C# 新手，但我需要帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:17:01.863

您快到了。

```
BindingSource bs = (BindingSource)dgv.DataSource;
DataSet ds = (DataSet)bs.DataSource;
DataTable dt = ds.Tables["Customers"];  // or Tables[0] 
```

显然你正在绑定 DataSourse=myDataSet, DataMember="Tablename"

# java - 更快的方法：将数组传递给一个类并为每个循环执行一次，或者在一个类上执行一次 for each 循环

> ID：10225866
> 
> 赞同：1
> 
> 时间：2012-04-19T10:07:38.253
> 
> 标签：java, arrays, performance, class

我想知道哪种方法在性能和最佳实践方面是正确的。

我有一组 URL，我正在抓取这些页面的内容。我有一个单独的课程来处理抓取。

目前我将数组列表传递给类，然后类循环遍历数组内容，抓取每个数组的内容。我相信这是最好的方法。

我想到的另一种方法是遍历数组，然后将每个 URL 传递给类。这对我来说似乎会慢一些，但我不确定。

如果这两种方法都可行，那么它们的优缺点是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T10:11:34.533

我建议你做你认为最清晰和最简单的事情。

通过数组可能会稍微快一点，并且可能会节省几纳秒，但除非你正在做的事情是几纳秒的数量级，否则你不太可能分辨出其中的区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T10:20:51.053

从技术上讲，由于每页方法调用的额外开销（假设这是您正在做的事情），将每个项目传递给类会更慢：

```
URLProcessor up = new URLProcessor();
for(String url: URLs) {
   up.process(url); // method call for each URL
} 
```

代替：

```
up.process(URLs); // a single method call 
```

但是，这很可能不会以明显的方式影响运行速度，除非该方法被调用数百万次。程序中发生的重量级任务远不止于此。

# javascript - 在准备插入 DOM 的 Javascript 中创建内容的最佳方法是什么？

> ID：10225877
> 
> 赞同：0
> 
> 时间：2012-04-19T10:08:18.607
> 
> 标签：javascript, jquery, string, object

我看过一个关于创建内容并将内容附加到 DOM 的视频教程。他建议像这样写一个字符串：

`jQuery('<h2 class=myClass>Hello world</h2>').appendTo('article');`

与创建这样的对象相比是草率的：

`jQuery('<h2></h2>', {text: 'Hello world', class 'myClass'}).appendTo('article');`

我仍然有点不相信这是最好的方法。例如，我在这里有一个稍微复杂一点的 DOM 创建示例：- [http://jsperf.com/string-creation-dave](http://jsperf.com/string-creation-dave)使用建议的在 JS 中创建元素的方法比传递整个元素的字符串要慢很多.

因此，创建具有 JS 可读性的对象的唯一好处是什么？如何在 JS 中创建元素？您是只传递要插入到 DOM 中的字符串，还是在 JS 中生成对象并以这种方式构建对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:13:19.120

最干净的解决方案是通过`createElement`方法创建元素，设置其属性，然后将其插入到 dom 中。

如果您有更多元素，则构建相应的树并在完成后将整个树插入到 dom 中。

[来自 MDN 的](https://developer.mozilla.org/en/DOM/document.createElement)示例：

```
function addElement()
{
  // create a new div element
  // and give it some content
  newDiv = document.createElement("div");
  newContent = document.createTextNode("Hi there and greetings!");
  newDiv.appendChild(newContent); //add the text node to the newly created div.

  // add the newly created element and it's content into the DOM
  my_div = document.getElementById("org_div1");
  document.body.insertBefore(newDiv, my_div);
} 
```

但很严肃，谁想写这样的代码；）我个人会坚持你的第一个例子，无论你适合什么。

# javascript - 换行符转义符不起作用

> ID：10225878
> 
> 赞同：19
> 
> 时间：2012-04-19T10:08:30.370
> 
> 标签：javascript, html, newline

我们知道 \n 用于在 JavaScript 中提供新行。
我应该如何将它用于输出（在 for 循环中）：

```
str=prompt("Enter any string!");
    for(i=0;i<str.length;i++)
    {
        document.write('\n'+str.charCodeAt(i));
    } 
```

或者

```
str=prompt("Enter any string!");
    for(i=0;i<str.length;i++)
    {
        document.write('\n'+str.charCodeAt(i));
    } 
```

两者似乎都不起作用。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-19T10:11:15.400

这与 JavaScript 无关。在 HTML 中，所有空格（包括换行符）都被折叠并视为一个空格。

要在 HTML 中换行：

*   利用[`<br>`](http://www.w3.org/TR/html5/the-br-element.html#the-br-element)
*   [`<p>...</p>`](http://www.w3.org/TR/html5/the-p-element.html#the-p-element)或者用等将你的文本组织成段落）
*   或者，如果您要输出某种形式的格式化文本（如代码），您可以在[`<pre>...</pre>`](http://www.w3.org/TR/html5/the-pre-element.html#the-pre-element)元素（或应用了 、 或样式的任何元素[`white-space: pre`](http://www.w3.org/TR/CSS2/text.html#propdef-white-space)）`white-space: pre-wrap`中`white-space: pre-line`执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T10:11:17.900

如果您正在写入您想要的文档`document.write('<br/>'+str.charCodeAt(i));` - 或者将您的输出设置在一个`<pre>`标签（或另一个具有 a style 属性的元素`white-space:pre`）中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T10:36:31.057

使用 document.writeln() 方法。

writeln() 方法与 write() 方法相同，只是在每个语句后添加了一个换行符。

尝试这个

```
 str=prompt("Enter any string!");
 for(i=0;i<str.length;i++)
 {
    document.writeln(str.charCodeAt(i));
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-07T14:17:58.310

我提出了一个更好的解决方案。在行动中查看它[https://repl.it/@mamamia5x/Example](https://repl.it/@mamamia5x/Example)

在 css 中做

```
h1 span::before { 
  content: "\A";
  white-space: pre;
} 
```

用你拥有的任何东西替换 h1。现在，无论何时，都会`<span>`换行。因此，每当有人说 /n 时，它都会执行`<span>`并换行。

```
if (txt.charAt(i) == '/' && txt.charAt(i + 1) =='n'){
   document.getElementById("text").innerHTML += " <span>";
   i = i + 2;
} 
```

这是它的实际操作[https://repl.it/@mamamia5x/Example](https://repl.it/@mamamia5x/Example)，这是我将它用于[https://live-stream.mamamia5x.repl.co/](https://live-stream.mamamia5x.repl.co/)的一个项目。

我也使它与`<br>`. 如果你想这样做，你可以这样做

```
if (txt.charAt(i) == '<' && txt.charAt(i + 1) == 'b' && txt.charAt(i + 2) == 'r' && txt.charAt(i + 3) == '>'){ 
```

您也可以将两者混合在一起，它可以允许`/n`和`<br>`。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-12-25T06:42:51.223

使用**`<br>`** 而不是**\n** 它相对于 HTML

# c# - 从 AOP 建议调用自定义属性的问题

> ID：10225884
> 
> 赞同：0
> 
> 时间：2012-04-19T10:08:47.750
> 
> 标签：c#, attributes, aop, spring.net, spring-aop

我有一个建议和一个自定义属性。我想将该属性应用于从建议类调用的另一个方法上。但是该属性不会被调用。

我的 spring 配置看起来与 Spring.net 手册中的示例非常相似：

```
<object id="AspNetCacheAdvice" type="Spring.Aop.Support.AttributeMatchMethodPointcutAdvisor, Spring.Aop"> 
   <property name="advice"> 
      <object type="Aspect.AspNetCacheAdvice, Aspect"/> 
   </property> 
   <property name="attribute" value="Framework.AspNetCacheAttribute, Framework" /> 
</object> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:51:44.803

当从同一个类调用方法时，该方法不会被 Spring AOP 拦截，因为该方法不是在 aop 代理上调用，而是直接在它自己的目标上调用。还要确保配置代理工厂。

在此之前，我已经回答了一些相同的问题：

*   [Spring.net 使用 aop 的日志记录示例](https://stackoverflow.com/questions/8029460/spring-net-logging-example-using-aop/8029846#8029846)（在 aop 代理上）
*   [Asp.Net MVC 控制器：使用 Spring.Net 的声明性 AOP](https://stackoverflow.com/questions/4280143/asp-net-mvc-controller-declarative-aop-with-spring-net/4346791#4346791)（在 asp.net mvc 中的 aop 代理上）
*   [Spring.NET.AOP - ExceptionHandlerAdvice 不会替换自定义异常](https://stackoverflow.com/questions/8167718/spring-net-aop-exceptionhandleradvice-doesnt-replace-custom-exception/8168188#8168188)（在创建代理工厂时）

# sql-server - 使用二进制 OR 聚合位域值

> ID：10225885
> 
> 赞同：1
> 
> 时间：2012-04-19T10:08:49.387
> 
> 标签：sql-server, aggregate-functions, bit-manipulation, bit-fields

我有一个表，其中*int*值用作位域（每个位都是一个标志）。

现在我想用二进制操作（在我的情况下为 OR）聚合它们，以便：

```
SELECT 1 AS bitfield
INTO #TABLE
UNION ALL SELECT 1 + 2 + 8 + 32
UNION ALL SELECT 2 + 128
UNION ALL SELECT 2 + 32

SELECT AND_AGGR(bitfield) -- Invalid because AND_AGGR doesn't exist
FROM #TABLE

DROP #TABLE 
```

将导致价值`171`

有什么好方法可以做到这一点，希望不需要很多`|`和`MAX`（但如果你必须，你必须）？

我自己使用的是 MS SQL Server 2008，但其他服务器上的解决方案也很有趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:14:45.120

在 MySQL 和 PostgreSQL 上，您可以使用[`BIT_OR`](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_bit-or).

我不认为 SQL Server 有这个聚合函数。

你可以用很多来做到这一点，`MAX`正如`&`你所说：

```
MAX(x & 1) + MAX(x & 2) + ... + MAX(x & 128) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T10:25:18.733

如果您期待结果，那么您的意思是不是`171`二进制？`OR``AND`

在任何情况下，此解决方案都将值聚合到一个变量中：

```
SELECT 1 AS bitfield
INTO #TABLE
UNION ALL SELECT 1 + 2 + 8 + 32
UNION ALL SELECT 2 + 128
UNION ALL SELECT 2 + 32

DECLARE @i int = 0

SELECT @i = @i | bitfield
FROM #TABLE

SELECT @i

DROP TABLE  #table 
```

如果您想按另一个字段对聚合进行分组，这可能不符合您的要求。

它也不太可能在大桌子上表现良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-27T17:07:56.390

在 MS SQL 服务器中

```
DECLARE @agg  VARCHAR(MAX) = '0001,0011,0101,0101,0101'
SELECT CONVERT(binary(4), VALUE, 2) , VALUE  FROM STRING_SPLIT( @agg , ',')

DECLARE @sum AS BIGINT = 0
DECLARE @mul AS BIGINT = 0xffffffff
SELECT  @sum |= v
   , @mul &= v
FROM STRING_SPLIT( @agg , ',')
CROSS APPLY (VALUES (CONVERT(binary(4), VALUE, 2))) _(v)

PRINT FORMAT(@sum,'X8')
PRINT FORMAT(@mul,'X8') 
```

印刷

```
 VALUE
---------- ------------
0x00010000 0001
0x00110000 0011
0x01010000 0101
0x01010000 0101
0x01010000 0101

01110000
00010000 
```

用更复杂的话来说，您需要：

```
CREATE OR ALTER FUNCTION dbo.BOR( @agg VARCHAR(MAX))
RETURNS BIGINT
AS 
BEGIN
DECLARE @sum AS BIGINT = 0
SELECT  @sum |= CONVERT(BIGINT, VALUE)
FROM STRING_SPLIT( @agg , ',')
RETURN @sum
END

GO
CREATE OR ALTER FUNCTION dbo.BAND( @agg VARCHAR(MAX))
RETURNS BIGINT
AS 
BEGIN
DECLARE @mul AS BIGINT = 0xffffffffffffffff
SELECT  @mul &= CONVERT(BIGINT, VALUE)
FROM STRING_SPLIT( @agg , ',')
RETURN @mul
END
GO 
```

使用付款期位图时

```
;WITH delayedPayment AS
(SELECT * FROM ( VALUES 
    ( 123, 67, '2020-2-1')
   ,( 123, 67, '2020-4-1')
   ,( 123, 67, '2020-5-1')
   ,( 123, 67, '2020-6-1')
   ,( 123, 68, '2020-6-1')  -- another agreement
   ,( 123, 67, '2020-12-1')

   ,( 456, 69, '2020-4-1')
   ,( 456, 69, '2020-8-1')
   ,( 456, 69, '2020-10-1')
   ,( 456, 69, '2020-11-1')) _(cuno, loan, missedDuedate)
)
, delayPattern AS
(SELECT cuno
   ,  sum_months
   ,  bor_months
   ,  IIF( FORMAT( CAST(bor_months AS BIGINT), 'X16') LIKE '%111%', 'dalyad 3+ month in row', NULL) delayState
   FROM (SELECT cuno
         , SUM(POWER( 16.0, CONVERT( BIGINT, DATEDIFF( month, missedDuedate, '2020-12-1')))) sum_months
         , dbo.BOR( STRING_AGG( CONVERT( BIGINT, POWER( 16.0, DATEDIFF( month, missedDuedate, '2020-12-1'))),',')) bor_months
      FROM delayedPayment
      GROUP BY cuno
   ) s
)
SELECT cuno
   ,  FORMAT( CAST(sum_months AS BIGINT), 'X16') sum_months
   ,  FORMAT( CAST(bor_months AS BIGINT), 'X16') bor_months
   ,  delayState
FROM delayPattern

cuno    sum_months          bor_months          delayState
123     00000*10112*000001  00000*10111*000001  dalyad 3+ month in row
456     0000000100010110    0000000100010110    NULL 
```

但有时只需要思考一个，你可以用 SUM 来做

```
, delayPattern AS -- optimal
(SELECT cuno
   ,  bor_months
   ,  IIF( FORMAT( CAST(bor_months AS BIGINT), 'X16') LIKE '%111%', 'dalyad 3+ month in row', NULL) delayState
   FROM (SELECT cuno
         , SUM(POWER( 16.0, missedmonth)) bor_months
      FROM ( SELECT DISTINCT cuno
               , missedmonth
            FROM delayedPayment
            CROSS APPLY (VALUES ( DATEDIFF( month, missedDuedate, '2020-12-1'))) _(missedmonth)
            GROUP BY cuno, missedmonth
            ) ss
      GROUP BY cuno
   ) s
)

SELECT cuno
   ,  FORMAT( CAST(bor_months AS BIGINT), 'X16') bor_months
   ,  delayState
FROM delayPattern 
```

将打印

```
cuno    bor_months  delayState
123 0000010111000001    dalyad 3+ month in row
456 0000000100010110    NULL 
```

注意：我使用 HEX 格式和 POWER(16.0, X) ，只是为了懒惰， POWER(2.0, X) 是正确的，但是你需要 bin->string 格式化程序。像这样的东西：

```
CREATE OR ALTER FUNCTION dbo.toBinaryString(@p INT)
RETURNS VARCHAR(24)
AS 
BEGIN 
RETURN  REVERSE(REPLACE( REPLACE( 
    REPLACE( REPLACE( REPLACE( REPLACE( 
    REPLACE( REPLACE( REPLACE( REPLACE( 
    REPLACE( REPLACE( REPLACE( REPLACE( 
    REPLACE( REPLACE( REPLACE( REPLACE( FORMAT(@p,'X8'), 
        '0', '....'), '1', '...x'),'2', '..x.'),'3', '..xx'),
        '4', '.x..'), '5', '.x.x'),'6', '.xx.'),'7', '.xxx'),
        '8', 'x...'), '9', 'x..x'),'A', 'x.x.'),'B', 'x.xx'),
        'C', 'xx..'), 'D', 'xx.x'),'E', 'xxx.'),'F', 'xxxx'),
        '.','0'),'x','1'))
END 
```

# jquery - Jquery数据检索不起作用

> ID：10225886
> 
> 赞同：2
> 
> 时间：2012-04-19T10:08:58.737
> 
> 标签：jquery

我需要将数据存储到“ul”的每个“li”元素中，以防我像这样分配值：

```
$('li:eq(0)').data('some', {name:'some',age:'some'})

$('li:eq(1)').data('some', {name:'some',age:'some'}) 
```

那么它是否正确。或任何其他将数据设置为元素的简短方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:12:26.163

[`data()`](http://api.jquery.com/data) [无论如何都要遍历](https://github.com/jquery/jquery/blob/1.7.2/src/data.js#L305-311)jQuery 集中的每个元素，所以你可以这样做；

```
$('li').data('some', { 
    name: 'some', 
    age: 'some' 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:19:01.810

不确定您到底在问什么，但是，如果您有一些包含所有值的数组/对象并且想要为所有 LI 元素设置数据，那么您可能需要使用 $.each()。

例子：

```
$("#yourUL").find("li").each(function() {
  // $(this) will stand for current LI element
  $(this).data('some', yourVarForThisLI);
}); 
```

# httpwebrequest - HTTP 发布内容长度错误

> ID：10225888
> 
> 赞同：1
> 
> 时间：2012-04-19T10:09:10.290
> 
> 标签：httpwebrequest

我有一个发送多部分mime 的脚本，即带有附件的肥皂。我正在使用 C# httpWebRequest 类。我收到一条错误消息，提示需要内容长度，但我正在使用 webrequest 的 contentLength 属性在我的代码中动态设置内容长度。任何想法为什么会这样？谢谢！这是代码：

```
public void sendSOAPoverHttpVoda()
{
    try
    {
        string xmlDoc = this.soapXml;
        byte[] bytes;
        bytes = Encoding.UTF8.GetBytes(xmlDoc);
        long contentSize = bytes.Length;

        HttpWebRequest req =  (HttpWebRequest)WebRequest.Create(conectionUrl);
        req.SendChunked = true;
        CredentialCache credentialCacheObj = new CredentialCache();
        credentialCacheObj.Add(
            new Uri(conectionUrl),
            "Basic", new NetworkCredential("dddfff", "dddddd"));
        credentialCacheObj.Add(new Uri(conectionUrl), "Digest", new NetworkCredential("dddfff", "dddddd"));

        req.Credentials = credentialCacheObj;
        req.Method = "POST";
        req.ProtocolVersion = HttpVersion.Version11;

        req.ContentLength = xmlDoc.Length;
        req.ContentType = "multipart/related; boundary=\"----=cellsmart_mm7_SOAP\";type=\"text/xml\";Start=\"</cellsmart_mm7_submit>\"";
        req.AllowWriteStreamBuffering = true;

        req.Timeout = 20000;
        req.Headers.Add("SOAPAction", "");
        //req.Connection = "";

        if (bytes != null)
        {
            using (Stream outputStream = req.GetRequestStream())
            {
                outputStream.Write(bytes, 0, xmlDoc.Length);
            }
        }
        using (HttpWebResponse response = (HttpWebResponse)req.GetResponse())
        {
            Stream responseStream = response.GetResponseStream();
            StreamReader reader = new StreamReader(responseStream);
            string responseText = reader.ReadToEnd();
            Console.WriteLine("Response received from URI : " + responseText);
            Console.ReadLine();
        } 

        Console.ReadLine();
    }
    catch (Exception ex)
    {
        Console.WriteLine("Error : " + ex.Message + "\n" + ex.StackTrace);
        Console.ReadLine();
    }
} 
```

我得到的错误/异常是需要内容长度（411）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:20:20.560

您不能同时使用 SendChunked=true 和 ContentLength。最简单的做法是使用分块响应并省略 ContentLength。如果您愿意，您也可以保留 ContentLength 并省略 SendChunked。

如果您不熟悉它，维基百科[对分块有很好的描述](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:19:52.000

您将 contentLength 声明为您发送的 byte[] 的长度（'bytes'），然后使用 xmlDoc 的长度作为内容长度 - 这将给出与实际不同的长度。然后在 outputStream.Write 中使用相同的 xmlDoc.Length。

为什么在这两种情况下都不使用 bytes.Length ？或您已声明但从未使用过的 contentLength，我相信这是您的问题，您正在为 bytes.Length（从字符串转换的字节数组的长度）发送 xmlDoc.Length（字符串的长度），所以当文件比发送长度预期的长，错误返回。

尝试这个：

```
 public void sendSOAPoverHttpVoda()
    {
    try
    {
    string xmlDoc = this.soapXml;
    byte[] bytes;
    bytes = Encoding.UTF8.GetBytes(xmlDoc);

    HttpWebRequest req =  (HttpWebRequest)WebRequest.Create(conectionUrl);
    req.SendChunked = true;
    CredentialCache credentialCacheObj = new CredentialCache();
    credentialCacheObj.Add(
        new Uri(conectionUrl),
        "Basic", new NetworkCredential("dddfff", "dddddd"));
    credentialCacheObj.Add(new Uri(conectionUrl), "Digest", new NetworkCredential("dddfff", "dddddd"));

    req.Credentials = credentialCacheObj;
    req.Method = "POST";
    req.ProtocolVersion = HttpVersion.Version11;

    req.ContentLength = bytes.Length;
    req.ContentType = "multipart/related; boundary=\"----=cellsmart_mm7_SOAP\";type=\"text/xml\";Start=\"</cellsmart_mm7_submit>\"";
    req.AllowWriteStreamBuffering = true;

    req.Timeout = 20000;
    req.Headers.Add("SOAPAction", "");
    //req.Connection = "";

    if (bytes != null)
    {
        using (Stream outputStream = req.GetRequestStream())
        {
            outputStream.Write(bytes, 0, bytes.Length);
        }
    }
    using (HttpWebResponse response = (HttpWebResponse)req.GetResponse())
    {
        Stream responseStream = response.GetResponseStream();
        StreamReader reader = new StreamReader(responseStream);
        string responseText = reader.ReadToEnd();
        Console.WriteLine("Response received from URI : " + responseText);
        Console.ReadLine();
    } 

    Console.ReadLine();
}
catch (Exception ex)
{
    Console.WriteLine("Error : " + ex.Message + "\n" + ex.StackTrace);
    Console.ReadLine();
} 
```

}

# android - 从 Android 使用 WCF 服务上传图像：由于内容类型，无法处理

> ID：10225890
> 
> 赞同：0
> 
> 时间：2012-04-19T10:09:15.843
> 
> 标签：android, wcf, upload, apache-httpclient-4.x

尝试上传图片时出现以下错误。

> 无法处理消息，因为内容类型为“multipart/form-data;” 边界=AwQm1pbogJ6qQuZlUZjJ6kNOvbehrlyozA-w' 不是预期的类型 'text/xml; 字符集=utf-8'。

**安卓代码：**

```
HttpPost httppost = new HttpPost("http://192.168.1.111/androidservice/MediaUploadService.svc/uploadFile");
File photo = new File(Environment.getExternalStorageDirectory(), "01.jpg");
MultipartEntity t = new MultipartEntity();
t.addPart("t", new FileBody(photo));
httppost.setEntity(t);
HttpClient httpclient = new DefaultHttpClient();
HttpResponse response = httpclient.execute(httppost); 
```

**WCF 代码：**

```
namespace AndroidService
{
// NOTE: You can use the "Rename" command on the "Refactor" menu to change the class name "MediaUploadService" in code, svc and config file together.
public class MediaUploadService : IMediaUploadService
{
    public void UploadFile(Stream fileContents)
    {
       byte[] buffer = new byte[10000];
        int bytesRead, totalBytesRead = 0;
        do
        {
            bytesRead = fileContents.Read(buffer, 0, buffer.Length);
            totalBytesRead += bytesRead;
        } while (bytesRead > 0);
        File.WriteAllText(@"D:\\Vechile\log2.txt", totalBytesRead.ToString());
    }
}
} 
```

**捆绑：**

```
 <system.serviceModel>
<behaviors>
  <endpointBehaviors>
    <behavior name="httpBehavior">
      <webHttp />
    </behavior>
  </endpointBehaviors>

  <serviceBehaviors>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>

    <behavior name="PublishMetadataBehavior">
      <serviceMetadata httpGetEnabled="true" policyVersion="Policy15"/>
    </behavior>

  </serviceBehaviors>
</behaviors>

<bindings>
  <webHttpBinding>
    <binding name="WebHttpDtreaming" transferMode="Streamed" >
    </binding>
  </webHttpBinding>
</bindings>

<standardEndpoints>
  <webHttpEndpoint>
   <standardEndpoint name=""
                  helpEnabled="true"
                  automaticFormatSelectionEnabled="true"
                  maxReceivedMessageSize="1000000"/>
  </webHttpEndpoint>
</standardEndpoints>

<serviceHostingEnvironment multipleSiteBindingsEnabled="true" aspNetCompatibilityEnabled="true" /> 
```

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:02:29.487

试试这个 httppost.setHeader("content-type", "application/json")

# extjs - ExtJS TextField 点击外部按钮后输入键

> ID：10225891
> 
> 赞同：7
> 
> 时间：2012-04-19T10:09:16.940
> 
> 标签：extjs

我想在文本字段输入功能中调用按钮单击。

```
items: [
{
    xtype: 'form',
    id: 'myForm',
    items: [
    {
        xtype: 'textfield',
        id: 'myTextField',
        listeners: {
            specialkey: function(f,e){
                if(e.getKey() == e.ENTER){
                    console.log('Spacial Key = Enter'); // It's working
                    // But i wanna click btnSearch button click event
            }
            }
        }
    }
    ],
    buttons: [
        {
            text: 'Search',
            id: 'btnSearch',
            handlers: function(){
                // bla bla
                // bla bla
                // ...
            }
        }
    ]
}
]

var myform = Ext.getCmp('myForm');
myForm.getForm().submit() 
```

它正在工作，但 btnSubmit.click 功能不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:14:41.253

此代码有效：

```
 {
                            fieldLabel : 'Password',
                            name : 'j_password',
                            inputType : 'password',
                            allowBlank : false,
                            listeners : {
                                'render' : function(cmp) {
                                    cmp.getEl().on('keypress', function(e) {
                                        if (e.getKey() == e.ENTER) {
                                            submitform();
                                        }
                                    });
                                }
                            }
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:34:33.577

`doSearch()`创建类似的方法并从两个处理程序调用此方法会更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T13:54:37.830

根据您的范围，您可以尝试以下操作：

```
Ext.getCmp("btnSearch").handler.call(Ext.getCmp("btnSearch").scope); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T15:34:54.283

```
Ext.getCmp('btnSearch').focus(); 
```

我不这么认为，但它对我有用:)

谢谢大家

# objective-c - NSXMLParser 判断一个标签是否是一个空元素标签

> ID：10225895
> 
> 赞同：1
> 
> 时间：2012-04-19T10:09:29.887
> 
> 标签：objective-c, xml-parsing, nsxmlparser

我正在使用 NSXMLParser 解析具有空元素标签的 XML 文件：

```
<SAMPLETAG /> 
```

以及开始和结束标签：

```
<SAMPLETAG>
</SAMPLETAG> 
```

我正在使用 NSXMLParserDelegate 方法：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName 
```

现在我的问题是我使用的委托方法不会告诉我标签是空的还是开始标签。我真的很想知道它是什么样的标签！您知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T00:48:01.800

我不知道如何检查标签是否为空或开始标签，但您可能会考虑在解析之前进行一些正则表达式更正，例如将所有 <"SAMPLETAG/"> 替换为 <"SAMPLETAG"> <"/SAMPLETAG" > （忽略引号，如果我输入不带引号，则无法正确显示）。这是我处理这个问题的方法。

# charts - Highchart - 图例的工具提示

> ID：10225896
> 
> 赞同：3
> 
> 时间：2012-04-19T10:09:31.173
> 
> 标签：charts, highcharts, highstock

我正在使用 highcharts 来表示数据。在我基于条件的图表中，某些系列被禁用。

有没有办法删除`itemhoverstyle`禁用系列的图例属性？

有没有办法向图例项添加工具提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T04:03:53.057

您可以**从图例中****删除**该系列：

 **```
series:[{
    name: 'serie1',
    type: 'line',
    data: yourArrayOfData,
    showInLegend: false
}] 
```

如果您想更改悬停时的 css，则必须更改此 highcharts-legend 样式。

要向图例添加工具提示，请执行以下示例：
**[链接](http://jsfiddle.net/ricardolohmann/PtYtf/)****

# java - Java(ME) SQLlite 关于数据类型不匹配的恶性循环

> ID：10225897
> 
> 赞同：1
> 
> 时间：2012-04-19T10:09:39.707
> 
> 标签：java, blackberry, java-me, sqlite

我正在尝试从我的数据库中获取浮点值

以下检查其 null else 是否返回 1；（如果在 DB 中为 null 则有效，但如果为浮点数则错误）

```
month =  row.getString(39) != null ? row.getFloat(39): 1; 
```

另一方面，以下内容直接浮动。（如果在数据库中浮动，但如果为空则错误）

```
float test = row.getFloat(39); 
```

我将如何从数据库中获取浮点数，如果为空，则返回默认值。我无法以任何一种格式获取它，因为它在 diff 格式中会导致错误。

最好不要更改 SQL 语句。由于有 45 个变量，它会变得太大、混乱且难以管理。我还没有研究它，但我假设使用 SQL 我可以做某种`IFNULL(field,default)`. 或者也许这是最好的方法......虽然我可能`AS field`最终也需要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:37:01.987

以下似乎适用于任何数据类型。使用 getObject 并检查它是否为空。即使在浮点数的情况下，where`!= null`否则将是无效的比较。

```
month =  row.getObject(39) != null ? row.getFloat(39): 1; 
```

# php - 通过套接字发送 2 个请求

> ID：10225905
> 
> 赞同：1
> 
> 时间：2012-04-19T10:10:19.743
> 
> 标签：php, sockets, tcp

我正在尝试向同一连接发送 2 个响应。但我在发送时遇到问题。有时第二个请求丢失。

任何人都可以帮助如何确保第二个请求在同一连接上正确进行。

出于某种原因，我的客户接受了两个请求。1.消息计数。2.要显示的消息。

```
$valCount = str_pad(strlen($message), 4, "0", STR_PAD_LEFT);
socket_write($socket, $valCount) or die("[" . @date('H:i:s') ."] Could not send output\n");
socket_write($socket, $message) or die("[" . @date('H:i:s') ."] Could not send output\n"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:15:36.040

我观察到，当您在本地机器（客户端和服务器都在同一台机器上）上编程套接字时，会发生这种情况。

我的代码有两个响应从服务器发送到客户端，发生的情况是第一个响应被缓冲（实际上没有发送），当第二个请求到达时，它们都一起发送到客户端。

所以你的字符串可能有两个响应附加在一起。如果是这种情况，那么您不必担心，因为当服务器和客户端位于不同的机器上时，这不会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:21:26.713

请注意，`socket_write()`不保证传递给它的所有数据都已发送。从[手册页](http://php.net/manual/en/function.socket-write.php)：

> `socket_write()`不一定从给定缓冲区写入所有字节。有效的是，根据网络缓冲区等，尽管您的缓冲区更大，但只会写入一定数量的数据，甚至是一个字节。您必须小心，以免无意中忘记传输其余数据。

该函数将返回一个整数，该整数描述了成功发送的字节数。您需要检查返回值以确保正确发送所有数据。

像这样的东西：

```
// An array of the messages to send
$messagesToSend = array();
$messagesToSend[] = str_pad(strlen($message), 4, "0", STR_PAD_LEFT);
$messagesToSend[] = $message;

// Loop the message queue
foreach ($messagesToSend as $data) {

  // Loop while still data to send
  while ($data) {

    // Send data
    $bytesSent = socket_write($socket, $data);

    // Check for failures
    if ($bytesSent === FALSE) {
      die("[".date('H:i:s')."] Could not send output (".socket_strerror(socket_last_error($socket)).")\n");
    }

    // Trim the data that was sent off $data
    // This approach means that the while() loop will finish when all the data
    // has been sent - $data will be an empty string so will evaluate to FALSE
    $data = substr($data, $bytesSent);

  } // while

} // foreach 
```

# android - Android 检测无数据连接的可能性

> ID：10225908
> 
> 赞同：0
> 
> 时间：2012-04-19T10:10:24.403
> 
> 标签：android, connectivity

我有一个应用程序需要通过 GPRS 或 EDGE 以某个随机间隔与服务器通信。但是当用户正在通话或停用等时，应用程序无法访问互联网的可能性很小。此时我有两种情况的可恢复和不可恢复。

可恢复的场景

*   通话时（用户将挂断，数据连接将再次激活）
*   无信号（有时信号可能会掉线，手机会重新收到信号）

不可恢复的场景

*   飞行模式
*   停用数据连接

当它可以恢复时，我可以在某个定义的时间间隔后再次尝试连接。在不可恢复期间，我必须提醒用户。例如，如果用户停用数据连接或启用飞行模式，我必须提醒用户。

编辑：我可以通过其中一种意图检测飞行模式。我无法为其他人找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:45:41.490

如果有效连接可用，则返回以下代码

```
public boolean isConnectionsAvailable() {
         boolean lRet = false;
         try{
             ConnectivityManager conMgr =  (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
             NetworkInfo info= conMgr.getActiveNetworkInfo();  
             if(info != null && info.isConnected()) {  
                 lRet = true ;
             }else{  
                 lRet = false ;
                }
         }catch (Exception e) {
             Log.d("Connection Error", e.toString());
             lRet = false ;
        }
         return lRet;
       } 
```

在此之后，如果您的信号强度较低，那么您可以**通过设置相关超时**来发出 HTTP 请求。如果发生超时，请向用户提供相关警报消息，如下所示

```
public void serverCall(String pURL){

   if (isConnectionsAvailable()){
     // Call server by setting proper timeout

   }

} 
```

**编辑：**

检查飞行模式状态：

```
private static boolean isAirplaneModeOn(Context context) {

   return Settings.System.getInt(context.getContentResolver(),
           Settings.System.AIRPLANE_MODE_ON, 0) != 0;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:32:19.820

你可以尝试用 try and catch 来包围你的方法。如果该方法由于某种原因无法连接到您的服务器而失败，您可以从 Handler 调用 postDelayed 并在预定的时间长度内再次重新运行您的方法。

```
Handler mHandler = new Handler();
Runnable yourMethodRunnable = new Runnable(){
    @Override
    public void run(){
        yourMethod();
    }
};

private void yourMethod(){
    try{
        // talk to server
    } catch (InCallException e) {
        mHandler.postDelayed(yourMethodRunnable, delay)
    } catch (NoSignalException e) {
        // etc...
    } catch (OtherException e) {
        // etc...
    }
} 
```

异常只是示例，可能不存在，从 Android 开发人员文档中获取您想要捕获的异常，或者通过在每次重新制定与服务器的连接时查看 LogCat 的输出失败。

# drupal - 联系表格无法发送电子邮件

> ID：10225909
> 
> 赞同：0
> 
> 时间：2012-04-19T10:10:26.593
> 
> 标签：drupal, smtp, drupal-modules, sendmail

当我尝试使用联系表发送电子邮件时，我收到以下错误代码：

> 从 cliente@mirodinero.com 向 stokks@hotmail.it 发送电子邮件时出错：错误 SMTP：以下接收者失败：stokks@hotmail.it
> 
> SMTP 服务器错误：5.7.1：发件人地址被拒绝：不属于用户 bed513c

问题是什么？我已经google了，我没有找到解决方案。bed513c 是我在 smtp 模块管理页面中设置的 cliente@mirodinero.com 的实际用户。

我仍然无法弄清楚为什么会这样，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:42:10.110

您的 smtp 服务器很可能拒绝发件人的电子邮件地址。出于某种原因，drupal 联系表单使用用户提供的电子邮件地址来发送电子邮件。因此，joe blow 使用 joe@blow.com 的电子邮件地址在联系表格中输入他的信息并点击提交。Drupal 使用他的电子邮件地址 joe@blow.com 作为发件人，并使用站点管理员的电子邮件地址作为收件人。我的 smtp 服务器非常具体，如果我使用用户 jason@mysite.com 对我的 smtp 服务器进行身份验证，那么发件人始终必须是 jason@mysite.com。在 drupal 联系表单的情况下它不起作用，我的 smtp 服务器将拒绝发件人 joe@blow.com 并返回错误 5.7.1。Drupal 应该可以选择强制联系表单使用相同的电子邮件地址发送所有电子邮件，但出于某种奇怪的原因，它没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:07:15.693

检查你的drupal系统配置系统->站点信息。我为 SMTP 邮件设置和站点信息提供了相同的电子邮件 ID。问题得到了解决。

# c# - SQLCommandBuilder 效率

> ID：10225910
> 
> 赞同：2
> 
> 时间：2012-04-19T10:10:30.453
> 
> 标签：c#, asp.net, sql, .net, ado.net

[我从 msdn MSDN COMMAND BUILDER CLASS](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommandbuilder.aspx)得到这个摘录 。在 ASP.NET 中使用快速插入、更新或从表中删除是否可以，还是效率低下？！

```
 public static DataSet SelectSqlRows(string connectionString, string queryString, string tableName)
{
    using (SqlConnection connection = new SqlConnection(connectionString))
    {

        SqlDataAdapter adapter = new SqlDataAdapter();
        adapter.SelectCommand = new SqlCommand(queryString, connection);
        SqlCommandBuilder builder = new SqlCommandBuilder(adapter);

        connection.Open();

        DataSet dataSet = new DataSet();
        adapter.Fill(dataSet, tableName);

        //code to modify data in DataSet here

        builder.GetUpdateCommand();

       //Without the SqlCommandBuilder this line would fail
       adapter.Update(dataSet, tableName);

       return dataSet;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:24:54.173

您的代码在效率方面没有问题。一种建议是使用存储过程或参数化查询，而不是直接执行查询字符串，这将有助于防止 SQL 注入。

参考：

[http://www.dotnetperls.com/sqlparameter](http://www.dotnetperls.com/sqlparameter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:17:17.957

它与您执行的底层 SQL 语句一样高效。

# javascript - 如何让这段 JavaScript 代码在 Opera 中工作

> ID：10225911
> 
> 赞同：0
> 
> 时间：2012-04-19T10:10:34.543
> 
> 标签：javascript, html-table, cross-browser, opera

以下代码适用于最新版本的 Firefox、Chrome、Safari 和 IE，但不适用于 Opera。当我使用 Opera 单击添加按钮时，似乎已将一个非常薄的空间添加到行中，但没有其他内容......有人可以帮忙吗？表格：

```
<form method="post" action="send.php">
<table id="table">
<tr><th>job</th><th>comment</th></tr>
<tr>
<td><textarea name = "job[]"></textarea></td>
<td><textarea name = "comment[]"></textarea></td>
<tr>
</table>
<input type ="button" value="add entry" onclick="add('table')"/>
<input type ="submit" id="submit" value="submit"/> 
```

JavaScript：

```
var names = ['job[]', 'comment[]'];

function add(tableID) {
var table = document.getElementById(tableID);
var rowCount = table.rows.length;
var row = table.insertRow(rowCount);
var colCount = table.rows[0].cells.length;

for (var i=0; i<colCount; i++) {
    var newcell = row.insertCell(i);
    var newentry = document.createElement('textarea');
    newentry.type = "text";
    newcell.appendChild(newentry);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:05:40.140

设置`newentry.type`给出

`Uncaught exception: DOMException: NO_MODIFICATION_ALLOWED_ERR`

`textarea`实际上，[http://www.w3schools.com/tags/tag_textarea.asp](http://www.w3schools.com/tags/tag_textarea.asp)没有 type 属性。如果您要使用，您将需要该类型`input`。

如果您删除设置类型的行，则效果很好。

我还在您的代码中发现了另一个错误：您没有关闭第二行，而是打开了一个新行。

这是很好的代码：

`<tr>
<td><textarea name = "job[]"></textarea></td>
<td><textarea name = "comment[]"></textarea></td>
</tr>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T10:57:26.757

这一行:`newentry.type = "text";`导致 Opera: 中的异常`Uncaught exception: DOMException: NO_MODIFICATION_ALLOWED_ERR`。这条线无论如何都不做（至少在 Chrome 中），所以我想你可以删除它。

```
var newentry = document.createElement('textarea');
newentry.type = "text";
console.log(newentry.type); 
```

`-> textarea`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T10:16:45.403

使用原生 DOM 方法，例如`.createElement`创建所有浏览器都支持的 TR(row) 和 TD(cells)。

您的代码可能如下所示：

```
var names = ['job[]', 'comment[]'];

function add(tableID) {
var table = document.getElementById(tableID);
var rowCount = table.getElementsByTagName("TR").length;
var row = document.createElement("TR")
var colCount = table.getElementsByTagName("TR")[0].childNodes.length;

for (var i=0; i<colCount; i++) {
    var newcell = document.createElement("TD");
    row.appendChild(newcell);
    var newentry = document.createElement('textarea');
    newentry.type = "text";
    newcell.appendChild(newentry);
    }
}
table.appendChild( row );
} 
```

我没有测试上面的代码，但它会帮助你到达那里。

# c# - 如果 XAttribute = ""，则 csv 到 xml 不添加 xElement

> ID：10225915
> 
> 赞同：0
> 
> 时间：2012-04-19T10:10:41.557
> 
> 标签：c#, xml, linq

我已经从这样的 csv 文件创建了一个 xml 文件

```
private void button2_Click(object sender, EventArgs e)
        {
            String[] FileContent = File.ReadAllLines(csvPathFile);
            String XMLNS = "";
            int idCountProduct = 1;
            XElement Inv = new XElement("data",
                from items in FileContent
                let fields = items.Split(';')
                select new XElement("category",
                    new XAttribute("idCategory", fields[0]),
                    new XAttribute("CategoryName", fields[1]),
                    new XElement("products",
                        new XElement("product",
                            new XAttribute("IdProduct", idCountProduct++),
                            new XAttribute("Rif", fields[0]),
                            new XAttribute("ProductName", fields[2]),

                            new XElement("products",
                                new XElement("product",
                                    new XAttribute("IdProduct", idCountProduct++),
                                    new XAttribute("Rif", fields[0]),
                                    new XAttribute("ProductName", fields[3]),
                                    new XElement("products",
                new XElement("product",
                    new XAttribute("IdProduct", idCountProduct++),
                    new XAttribute("Rif", fields[0]),
                    new XAttribute("ProductName", fields[4]));
            File.WriteAllText(xmlPathFile, XMLNS + Inv.ToString());
        } 
```

这是我的 csv 文件

```
1;Beverages;Lemon Juice;;Orange Juice 
```

这是我要创建的 xml 文件

```
<data>
<category idCategory="1" CategoryName= "Beverages">
    <products>
      <product IdProduct="1" Rif="1" ProductName= "Lemon Juice" />
      <product IdProduct="2" Rif="1" ProductName= "Orange Juice" />
<products/>
<category/>
</data> 
```

这是我获得的xml文件

```
<data>
<categories>
<category idCategory="1" CategoryName= "Beverages">
    <products>
      <product IdProduct="1" Rif="1" ProductName= "Lemon Juice" />
      <product IdProduct="2" Rif="1" ProductName= "" />
      <product IdProduct="3" Rif="1" ProductName= "Orange Juice" />
<products/>
<category/>
<categories/>
</data> 
```

如果未分配 ProductName，如何避免添加产品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:19:16.353

向您的 LINQ 查询添加过滤器以过滤掉空产品：

```
where !String.IsNullOrEmpty(fields[4]) 
```

就在这之后：

```
let fields = items.Split(';') 
```

无论如何，如果您的条件如此简单，您甚至不需要它，您可以从 Split 指令本身中过滤掉条目：

```
let fields = items.Split(';', StringSplitOptions.RemoveEmptyEntries) 
```

**编辑** 您的代码非常固定，所以...您确定需要使用 LINQ 和 LINQ-to-XML 吗？我想它无论如何都会更具可读性......写这个：

```
 XElement data = new XElement("data");
        XDocument document = new XDocument(data);

        int counter = 0;
        foreach (string entry in File.ReadAllLines(csvPath))
        {
            string[] fields = entry.Split(new char[] { ';' },
                                StringSplitOptions.RemoveEmptyEntries);

            XElement category = new XElement("category",
                new XAttribute("idCategory", fields[0]),
                new XAttribute("CategoryName", fields[1]));
            data.Add(category);

            XElement products = new XElement("products");
            category.Add(products);

            for (int i = 2; i < fields.Length; ++i)
            {
                products.Add(new XElement("product",
                    new XAttribute("IdProduct", counter++),
                    new XAttribute("Rif", fields[0]),
                    new XAttribute("ProductName", fields[i])));
            }
        }

        document.Save(xmlPath); 
```

}

# openerp - openerp act_window 弹出新窗口，但主客户端消失

> ID：10225917
> 
> 赞同：2
> 
> 时间：2012-04-19T10:10:46.803
> 
> 标签：openerp

我正在构建一个 openerp 客户模块，在树视图中，每个条目都有一个按钮，按下时，将触发 act_window 操作并打开一个新的弹出窗口，但同时，主 gtk 客户端消失了（仅保留弹出窗口）。我也将“目标”设置为“新”，但还是一样。有任何想法吗？

客户端：Windows 上的 gtk-6.0.3

服务器：debian 2.6.32 上的 6.0.2

xml 看起来像：

```
<field name="type">tree</field>
<field name="arch" type="xml">
    <tree string="Field Schema">
        <field name="field_name" />
        <field name="field_type" />
        <button name="edit" type="object" string="View and Edit" icon="gtk-go-forward" />
    </tree>
</field> 
```

并且要触发的编辑功能如下所示：

```
def edit(self, cr, uid, ids, context=None):
    obj_name = some_fn_dynamic_get_obj_name_from_ids(ids)
    obj = self.pool.get(obj_name)
    if not obj:
        raise osv.except_osv('not supported')
    res_id = obj.create(....)
    ...
    return {
        'type': 'ir.actions.act_window',
        'name': 'View and Edit',
        'view_mode': 'form',
        'view_type': 'form',
        'res_model': obj_name,
        'res_id': res_id,
        'target': 'new',
        'context': context,
    } 
```

更新：调试到客户端的源代码后，我终于发现：我打错了：**nodestory**，正确的应该是**nodestroy**

```
 return {
        'type': 'ir.actions.act_window',
        ...
        'context': context,
        'nodestroy': True,
    } 
```

T_T

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T22:52:14.983

我看不出有什么明显的错误。该`target`属性在[开发人员手册](http://doc.openerp.com/v6.0/developer/2_7_menu_action/7_2_actions.html#window-action)中进行了讨论。我唯一能建议的就是在源代码中查找使用该`target`属性的示例，看看它们与您的有何不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T03:17:23.703

要阻止客户端消失，您需要添加：'nodestroy'：True，

# actionscript-3 - 无法在 pad 设备中访问 sqlite 数据库（dbfile），而在 flash builder Simulator 中同样可以正常工作

> ID：10225918
> 
> 赞同：0
> 
> 时间：2012-04-19T10:10:48.880
> 
> 标签：actionscript-3, apache-flex, ipad, sqlite, flash-builder

我已经为 ipad 设备在 flash builder 4.5 中开发了一个应用程序，它从数据库中检索数据，即 sqlite 模拟器访问数据库的路径是 File.documentsDirectory.resolvePath("assets/xyz.db"); 但是，当我在模拟器上测试时，一切正常（应用程序）都很好。但是当我在 ipad 上启动相同的应用程序时，它既没有检索也没有插入数据，你能不能取悦我，以便找出可能是什么问题，请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:27:06.133

`documentDirectory`iOS 设备不支持。改用它`applicationDirecty`，它适用于 Android 和 iOS 设备。

# java - Java 正则表达式从字符串中删除 SQL 注释

> ID：10225923
> 
> 赞同：3
> 
> 时间：2012-04-19T10:11:12.883
> 
> 标签：java, sql, regex

希望有人能帮我解决这个问题！

我有一个如下所示的 sql 文件：

```
CREATE TABLE IF NOT EXISTS users(
    id INT UNSIGNED NOT NULL AUTO_INCREMENT,
    firstname VARCHAR(30) NOT NULL,
    lastname VARCHAR(30) NOT NULL,

    PRIMARY KEY (id),
    CONSTRAINT UNIQUE (firstname,lastname)
)
ENGINE=InnoDB
;

INSERT IGNORE INTO users (firstname,lastname) VALUES ('x','y');
/*
INSERT IGNORE INTO users (firstname,lastname) VALUES ('a','b');
*/ 
```

我有一个 web 应用程序，它在启动时使用这个函数初始化一个 mysql 数据库：

```
public static void initDatabase(ConnectionPool pool, File sqlFile){
    Connection con = null;
    Statement st = null;
    String mySb=null;
    try{
        con = pool.getConnection();
        mySb=IOUtils.copyToString(sqlFile);

        // We use ";" as a delimiter for each request then we are sure to have well formed statements
        String[] inst = mySb.split(";");

        st = con.createStatement();

        for(int i = 0; i<inst.length; i++){
            // we ensure that there is no spaces before or after the request string
            // in order not to execute empty statements
            if(!inst[i].trim().isEmpty()){
                st.executeUpdate(inst[i]);
            }
        }
        st.close();
    }catch(IOException e){
        throw new RuntimeException(e);
    }catch(SQLException e){
        throw new RuntimeException(e);
    }finally{
        SQLUtils.safeClose(st);
        pool.close(con);
    }
} 
```

（这个功能是在网上找到的。作者，请原谅我没有引用你的名字，我丢了！！）

只要没有 SQL 注释块，它就可以完美运行。

该`copyToString()`功能基本上按照它所说的去做。我现在想要的是构建一个正则表达式，它将从字符串中删除块注释。我在文件中只有块注释`/* */`，没有`--`.

到目前为止我已经尝试过：

```
mySb = mySb.replaceAll("/\\*.*\\*/", ""); 
```

不幸的是，我不太擅长正则表达式......

我遇到了“匹配的字符串看起来像`/* comment */ real statement /* another comment*/`”等等的所有麻烦......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T10:19:49.110

尝试

```
mySb = mySb.replaceAll("/\\*.*?\\*/", ""); 
```

（注意`?`代表“[懒惰](http://www.regular-expressions.info/repeat.html)”）。

**编辑**：要涵盖多行注释，请使用以下方法：

```
Pattern commentPattern = Pattern.compile("/\\*.*?\\*/", Pattern.DOTALL);
mySb = commentPattern.matcher(mySb).replaceAll(""); 
```

希望这对你有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T10:19:49.350

您需要使用这样的勉强限定词：

```
public class Main {

    public static void main(String[] args) {
        String s = "The matched string look something like /* comment */ real statement /* another comment*/";
        System.err.println(s.replaceAll("/\\*.*?\\*/", ""));
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T10:26:02.530

尝试以下方法：

```
String s = "/* comment */ select * from XYZ; /* comment */";
System.out.println(s.replaceAll("/\\*.*?\\*/", "")); 
```

输出：

```
 select * from XYZ; 
```

`.*?`代表使用[懒惰而不是贪婪](http://www.regular-expressions.info/repeat.html)（这意味着默认情况下匹配最大的字符串，即贪婪=>您必须使用表达式中的 将`.*`其配置为非贪婪）。`?``.*?`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-14T15:03:25.850

它不会 100% 工作

注释可以是 SQL 中指定的有效字符串的一部分，在这种情况下，它们需要保留...

我只是在研究一个解决方案......似乎很复杂

到目前为止，我有：

```
\G(?:[^']*?|'(?:[^']|'')*?'(?!'))*?\/\*.*?\*\/ 
```

但它匹配所有内容，而我只需要匹配评论......并且刚刚发现它可能会在单行评论之前失败......该死

# android - 我应该在 JSON 中转换哪个集合并再次解析？

> ID：10225927
> 
> 赞同：0
> 
> 时间：2012-04-19T10:11:21.033
> 
> 标签：android, json, web-services, collections

对不起标题，我解释一下。

我正在开发一个使用 Google App Engine 上的 WebService 的 Android 应用程序。在我的 WebService 中，我通过 JAX-RS 在 JSON 中转换了一个 ArrayList，最终的 JSON 类似于

> {“课程”：[{“名称”：“blabla”，“教授”：“汤姆”}，{“名称”：“blabla”，“教授”：“汤姆”}]}

这是实用的还是有更好的方法？

然后我从 Android 应用程序中获取这个 JSON 并将其转换为 JSONObject 并使用在线找到的片段：

> DefaultHttpClient defaultClient = new DefaultHttpClient();
> 
> HttpGet httpGetRequest = 新的 HttpGet(s);
> 
> HttpResponse httpResponse = defaultClient.execute(httpGetRequest);
> 
> BufferedReader reader = new BufferedReader(new InputStreamReader(httpResponse.getEntity().getContent(), "UTF-8"));
> 
> 字符串 json = reader.readLine();
> 
> JSONObject jsonObject = 新 JSONObject(json);

我怎样才能回到我的 ArrayList？

我已经阅读了大量代码并尝试使用 Gson ......这应该很容易，但我昨天已经失去了一整天......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:25:44.580

```
 private class Info {
        public String name;
        public String prof;
    }

    ArrayList<Info> arrayList = new ArrayList<Info>();

    JSONArray array = jsonObject.optJSONArray("lessons");
    int len = array.length();

    for (int i = 0; i < len ; i++) {
     JSONObject tmp = array.optJSONObject(i);
     Info info = new Info();
     info.name = tmp.optString("name");
     info.prof = tmp.optString("prof");
      arrayList.add(info)
} 
```

检查拼写错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:33:56.973

如果你想使用内置的 JSON 类，你可以这样做：

```
DefaultHttpClient defaultClient = new DefaultHttpClient();
HttpGet httpGetRequest = new HttpGet(s);
HttpResponse httpResponse = defaultClient.execute(httpGetRequest);
BufferedReader reader = new BufferedReader(new InputStreamReader(httpResponse.getEntity().getContent(), "UTF-8"));
String json = reader.readLine();
JSONObject jsonObject = new JSONObject(json);
if (jsonObject.has("lessons")) {
    JSONArray jsonLessons = jsonObject.getJSONArray("lessons");
    List<Lesson> lessons = new ArrayList<Lesson>();
    for(int i = 0; i < jsonLessons.length(); i++) {
        JSONObject jsonLesson = jsonLessons.get(i);
        // Use optString instead of get on the next lines if you're not sure
        // the fields are always there
        String name = jsonLesson.getString("name");
        String teacher = jsonLesson.getString("prof");
        lessons.add(new Lesson(name, teacher));
    }
} 
```

只要确保你的 Json 总是在一行中到达。换行会破坏此代码，因为您只阅读该行。

我的选择是Gson。在这种情况下，您将创建一个课程类和一个计划类：

```
public class Lesson {

    String name;
    String prof;

}

public class Schedule {

    List<Lesson> lessons;
} 
```

请注意，字段名称对应于 json 字段。如果感觉更好，请随意将字段设为私有并添加一些 getter 方法。:-)

现在您可以解析出包含课程列表的 Schedule 对象：

```
DefaultHttpClient defaultClient = new DefaultHttpClient();
HttpGet httpGetRequest = new HttpGet(s);
HttpResponse httpResponse = defaultClient.execute(httpGetRequest);
Reader in = new InputStreamReader(httpResponse.getEntity().getContent(), "UTF-8");

Gson gson = new Gson();
Schedule schedule = gson.fromJson(in, Schedule.class);
List<Lesson> lessons = schedule.lessons; 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T10:15:30.040

从这篇文章下载我的例子。一个完整的源代码，展示了如何将对象转换为 json 对象。希望它有所帮助。[如何在我的 android 应用程序中保存一组简单对象？](https://stackoverflow.com/questions/9988041/how-to-save-an-array-of-simple-objects-in-my-android-app/9988081#9988081)

# jquery - 使用 jquery 验证插件验证多选

> ID：10225928
> 
> 赞同：3
> 
> 时间：2012-04-19T10:11:22.177
> 
> 标签：jquery, widget, jquery-validate, multi-select

试图弄清楚为什么我的收件人多选未验证表单提交。应至少选择 1 人。我将它设置为必需的，但它仍然没有显示错误。

[http://jsfiddle.net/mMZYT/](http://jsfiddle.net/mMZYT/)

JS：

```
var validateform = $("#pmForm").validate({
    rules: {
        recipient: {
            required: true
        },
        bcc: {
            required: true
        },
        subject: {
            required: true
        },
        message: {
            required: true
        }
    },
    invalidHandler: function(form, validator) {
        var errors = validator.numberOfInvalids();
        if (errors) {
            var message = errors == 1
            ? 'You missed 1 field. It has been highlighted.'
            : 'You missed ' + errors + ' fields. They have been highlighted.';
            $('.box .content-form').removeAlertBoxes();
            $('.box .content-form').alertBox(message, {type: 'warning', icon: true, noMargin: false});
            $('.box .content-form .alert').css({
                width: '',
                margin: '0',
                borderLeft: 'none',
                borderRight: 'none',
                borderRadius: 0
            });
        } else {
            $('.box .content-form').removeAlertBoxes();
        }
    },
    showErrors : function(errorMap, errorList) {
        this.defaultShowErrors();
        var self = this;
        $.each(errorList, function() {
            var $input = $(this.element);
            var $label = $input.parent().find('label.error').hide();
            $label.addClass('red');
            $label.css('width', '');
            $input.trigger('labeled');
            $label.fadeIn();
        });
    },
    submitHandler: function(form) {
        var dataString = $('#pmForm').serialize();
        $.ajax({
            type: 'POST',
            url: 'http://www.kansasoutlawwrestling.com/kowmanager/pmsystem/pmsubmit',
            data: dataString,
            dataType: 'json',
            success:  function(data) {
                if (data.error) {
                    $('.box .content').removeAlertBoxes();
                    $('.box .content').alertBox(data.message, {type: 'warning', icon: true, noMargin: false});
                    $('.box .content .alert').css({
                        width: '',
                        margin: '0',
                        borderLeft: 'none',
                        borderRight: 'none',
                        borderRadius: 0
                    });
                }
                else
                {
                    $('.box .content').removeAlertBoxes();
                    $('.box .content').alertBox(data.message, {type: 'success', icon: true, noMargin: false});
                    $('.box .content .alert').css({
                        width: '',
                        margin: '0',
                        borderLeft: 'none',
                        borderRight: 'none',
                        borderRadius: 0
                    }); 
                    $(':input','#pmForm')
                    .not(':submit, :button, :hidden, :reset')
                    .val('');  
                }
            }
        });
    }
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T16:26:37.913

您可以使用以下代码来验证所需的单个选择。

魔术发生在这一行：

```
ignore: ':hidden:not("#mySelect")' 
```

这是必要的，因为默认情况下 jQuery Validate 会忽略隐藏字段...

**HTML**

```
<form action="some/action" id="myForm" method="POST">

    Select: <select class="someSelect" name="mySelect" id="mySelect" multiple="multiple">
        <option value="some_val1">Some Value</option>
        <option value="some_val2">Some Other Value</option>
    </select>

    <input type="submit" value="Submit" />

</form> 
```

**Javascript/jQuery**

```
$(document).ready(function() {
    $('#mySelect').multiselect({
        noneSelectedText: 'Select Something (required)',
        selectedList: 3,
        classes: 'my-select'
    });

    $.validator.addMethod("needsSelection", function(value, element) {
        return $(element).multiselect("getChecked").length > 0;
    });

    $.validator.messages.needsSelection = 'You gotta pick something.';

    $('#myForm').validate({
    rules: {
        mySelect: "required needsSelection",
        input1: "required isPercent",
        input2: "required",
        input3: "required"
    },
    ignore: ':hidden:not("#mySelect")', // Tells the validator to check the hidden select
    errorClass: 'invalid'
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-23T11:24:30.183

接受的答案不再起作用。问题是这个`"getChecked"`论点不再做任何事情了。这是验证方法的更新工作版本

```
$.validator.addMethod("needsSelection", function (value, element) {
                var count = $(element).find('option:selected').length;
                return count > 0;
            }) 
```

# api - 自动翻译 .po 文件？

> ID：10225932
> 
> 赞同：33
> 
> 时间：2012-04-19T10:11:37.133
> 
> 标签：api, translate, po

曾经有一些服务使用 Google Translate API V1 来自动翻译`.po`文件。

谷歌已经停止了他们的 V1 API，并且在 V2 中，他们对 1.000.000 字收取 20 美元。

我已经搜索但找不到任何提供 V2 版本翻译的工具。您会期望有人更新他们的工具并为 20.000 字收取 2 美元并获得可观的利润。

是否有任何付费或免费工具可以自动翻译`.po`文件？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-06T23:29:27.390

~~有点晚了，但谷歌现在提供了这个功能~~

~~[http://translate.google.com/toolkit/list?hl=en#translations/active](http://translate.google.com/toolkit/list?hl=en#translations/active)~~

谷歌翻译已关闭此服务：/

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-22T22:28:33.807

查看我的免费 PHP 工具 Potrans，它使用 Google Translator API 翻译 PO 文件

从这里的 repo 下载：[https ://github.com/OzzyCzech/potrans](https://github.com/OzzyCzech/potrans)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-13T00:32:13.967

随意编辑这篇文章以进行更正或更好的错误处理。我不是`.po`文件格式方面的专家，但我认为这将满足我的 angular-gettext 需求。我认为我使用的唯一外部库是 Newtonsoft 的 Json.NET。我不隶属于 Fengly。它出现在谷歌上。如果您每 3 秒需要 1 次以上的翻译，我建议您使用不同的翻译 API。

* * *

**输入文件：template.pot**

```
msgid ""
msgstr ""
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: Comment
msgid "You do not have permission to view this application"
msgstr ""

msgid "You have permission to view this application"
msgstr "" 
```

**输入命令：`> program.exe template.pot en es_VE fr_FR`**

* * *

**输出文件 1：en.cache.json** 创建它是为了让您使用的任何翻译实用程序都不必一遍又一遍地点击。

```
{
  "es_VE": {
    "You do not have permission to view this application": "Tu no la habana permiso que vista este aplicación",
    "You have permission to view this application": "Tu tienes permiso que vista este aplicación"
  },
  "fr_FR": {
    "You do not have permission to view this application": "Vous le faites pas as autorisation a vue cette une demande",
    "You have permission to view this application": "Tuas autorisation a vue cette une demande"
  }
} 
```

**输出文件 2：es_VE.po**

```
msgid ""
msgstr ""
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: Comment
msgid "You do not have permission to view this application"
msgstr "Tu no la habana permiso que vista este aplicación"

msgid "You have permission to view this application"
msgstr "Tu tienes permiso que vista este aplicación" 
```

**输出文件 3：fr_FR.po**

```
msgid ""
msgstr ""
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: Comment
msgid "You do not have permission to view this application"
msgstr "Vous le faites pas as autorisation a vue cette une demande"

msgid "You have permission to view this application"
msgstr "Tuas autorisation a vue cette une demande" 
```

* * *

**资源**

```
public interface ICache
{
    void Add(string language, IEntry entry);

    IEntry Get(string language, string id);

    string GetSerialized();
}

public class JsonCache : ICache
{
    private Dictionary<string, Dictionary<string, string>> _cache;

    public JsonCache(string json)
    {
        this._cache = 
            json == null ?
            new Dictionary<string, Dictionary<string, string>>() :
            JsonConvert.DeserializeObject<Dictionary<string, Dictionary<string, string>>>(json);
    }

    public void Add(string language, IEntry entry)
    {
        if (!this._cache.ContainsKey(language))
        {
            this._cache.Add(language, new Dictionary<string, string>());
        }

        var languageCache = this._cache[language];

        languageCache.Add(entry.Id, entry.Value);
    }

    public IEntry Get(string language, string id)
    {
        if (!this._cache.ContainsKey(language))
        {
            return null;
        }

        var languageCache = this._cache[language];

        Entry result = null;

        if (languageCache.ContainsKey(id))
        {
            result = new Entry();
            result.Id = id;
            result.Value =  languageCache[id];
        }

        return result;
    }

    public string GetSerialized()
    {
        return JsonConvert.SerializeObject(this._cache, Formatting.Indented);
    }
}

public interface IReader : IDisposable
{
    IEntry Read();
}

public class PoReader : IReader
{
    private StreamReader _reader;

    public PoReader(string fileName)
    {
        this._reader = new StreamReader(fileName);
    }

    public void Dispose()
    {
        if (this._reader != null)
        {
            this._reader.Dispose();
        }
    }

    public IEntry Read()
    {
        var entry = new Entry();

        while (entry.Id == null || entry.Value == null)
        {
            var line = this._reader.ReadLine();
            if (line == null)
            {
                return null;
            }

            if (line.StartsWith(Constants.StartComment))
            {
                entry.Comment = line.Substring(Constants.StartComment.Length);
            }
            else if (line.StartsWith(Constants.StartId))
            {
                entry.Id = line.Substring(Constants.StartId.Length);
                // Remove the double quotes.
                entry.Id = entry.Id.Substring(1, entry.Id.Length - 2);
            }
            else if (line.StartsWith(Constants.StartValue))
            {
                entry.Value = line.Substring(Constants.StartValue.Length);
                // Remove the double quotes.
                entry.Value = entry.Value.Substring(1, entry.Value.Length - 2);
            }
        }

        // Skip the first entry
        if (entry.Id.Length == 0)
        {
            return this.Read();
        }

        return entry;
    }
}

public class CachedTranslator : ITranslator
{
    private ITranslator _translator;
    private ICache _cache;

    public CachedTranslator(ICache cache, ITranslator translator)
    {
        this._translator = translator;
        this._cache = cache;
    }

    public IEntry Translate(string language, IEntry entry)
    {
        var result = this._cache.Get(language, entry.Id);
        if (result == null)
        {
            result = this._translator.Translate(language, entry);
            this._cache.Add(language, result);
        }
        else
        {
            // We don't want to use the cached comment.
            var clone = new Entry();

            clone.Comment = entry.Comment;
            clone.Value = result.Value;
            clone.Id = result.Id;

            result = clone;
        }
        return result;
    }
}

public class FrenglyTranslator : ITranslator
{
    private string _password;
    private string _email;
    private string _inLanguage;

    public FrenglyTranslator(string email, string password, string inLanguage)
    {
        this._email = email;
        this._password = password;
        this._inLanguage = inLanguage;
    }

    public IEntry Translate(string language, IEntry entry)
    {
        var url = string.Format("http://syslang.com?src={4}&dest={0}&text={1}&email={2}&password={3}&outformat=json",
            language.Substring(0, 2),
            entry.Id,
            this._email,
            this._password,
            this._inLanguage);

        var result = new Entry();
        result.Id = entry.Id;
        result.Comment = entry.Comment;

        using (var client = new HttpClient())
        {
            var clientResult = client.GetStringAsync(url).Result;
            var jo = (JObject)JsonConvert.DeserializeObject(clientResult);               
            result.Value = jo.Property("translation").Value.Value<string>();
        }

        // Must wait 3 seconds between calls.
        Thread.Sleep(3001);

        return result;
    }
}

public interface ITranslator
{
    IEntry Translate(string language, IEntry entry);
}

public interface IWriter : IDisposable
{
    void Write(IEntry entry);
}

public class PoWriter : IWriter
{
    private StreamWriter _writer;

    public PoWriter(string fileName)
    {
        this._writer = new StreamWriter(fileName);

        var header = @"msgid """"
msgstr """"
""Content-Type: text/plain; charset=UTF-8\n""
""Content-Transfer-Encoding: 8bit\n""";

        this._writer.WriteLine(header);
    }

    public void Write(IEntry entry)
    {
        this._writer.WriteLine();

        if (entry.Comment != null && entry.Comment.Length > 0)
        {
            this._writer.WriteLine(Constants.StartComment + entry.Comment);
        }

        this._writer.WriteLine(string.Format("{0}\"{1}\"", Constants.StartId, entry.Id));
        this._writer.WriteLine(string.Format("{0}\"{1}\"", Constants.StartValue, entry.Value));
    }

    public void Dispose()
    {
        if (this._writer != null)
        {
            this._writer.Dispose();
        }
    }
}

public static class Constants
{
    public const string StartComment = "#: ";
    public const string StartId = "msgid ";
    public const string StartValue = "msgstr ";
}

public class Entry : IEntry
{
    public string Comment { get; set; }

    public string Value { get; set; }

    public string Id { get; set; }
}

public interface IEntry
{
    string Comment { get; }

    string Value { get; }

    string Id { get; }
}

class Program
{
    private const string cacheFileNameSuffix = ".cache.json";
    private const string frenglyEmail = "your.em@il.com";
    private const string frenglyPassword = "YourPassword";

    static void Main(string[] args)
    {
        //
        // INITIALIZE
        //
        var inFileName = args[0];
        var inLanguage = args[1];
        var outLanguages = args.Skip(2);

        // ICache
        var cacheFileName = inLanguage + cacheFileNameSuffix;
        var json = File.Exists(cacheFileName) ? File.ReadAllText(cacheFileName) : null;
        ICache cache = new JsonCache(json);

        // ITranslator
        ITranslator translator = new FrenglyTranslator(frenglyEmail, frenglyPassword, inLanguage);
        ITranslator cachedTranslator = new CachedTranslator(cache, translator);

        // IWriters
        var writers = new Dictionary<string, IWriter>();
        foreach (var language in outLanguages)
        {
            writers.Add(language, new PoWriter(language + ".po"));
        }

        try
        {
            using (IReader reader = new PoReader(inFileName))
            {
                //
                // RUN
                //
                IEntry entry = null;
                while (true)
                {
                    entry = reader.Read();
                    if (entry == null)
                    {
                        break;
                    }

                    foreach (var kv in writers)
                    {
                        var translated = cachedTranslator.Translate(kv.Key, entry);
                        kv.Value.Write(translated);
                    }
                }
            }
        }
        finally
        {
            // Store the cache.
            File.WriteAllText(cacheFileName, cache.GetSerialized());

            //
            // CLEANUP
            //

            // Dispose of the writers.
            foreach (var writer in writers.Values)
            {
                if (writer != null)
                {
                    writer.Dispose();
                }
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-04-21T17:01:44.920

[http://sourceforge.net/projects/po-auto-tran/?source=dlp](http://sourceforge.net/projects/po-auto-tran/?source=dlp)你去我刚刚下载并使用它，它工作得很好！！！我不知道这是否能回答你的问题，但它对我来说是一项工作

# ios - iOS UITableView：usingCAGradientLayer 导致初始对象不出现在表格视图中

> ID：10225935
> 
> 赞同：1
> 
> 时间：2012-04-19T10:11:48.920
> 
> 标签：ios, uitableview, cagradientlayer

正如我在[这里](https://stackoverflow.com/q/10225132/206613)的问题中讨论的那样，我尝试使用 CAGradientLayer 设置 UITableView 的背景颜色。我正在用 NSMutableArray 中的一些值填充 UITableView，如下所示......

```
- (void)viewDidLoad
{
    // ....
    if (!navigationItems) {
        navigationItems = [[NSMutableArray alloc] initWithObjects:@"1", @"2", @"3", @"4", nil];
    }

}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSArray *colors = [NSArray arrayWithObjects:(id)[[UIColor colorWithRed:213.0f/255.0f green:91.0f/255.0f blue:92.0f/255.0f alpha:1.0f] CGColor][[UIColor colorWithRed:213.0f/255.0f green:0.0f blue:0.0f alpha:1.0f] CGColor], nil];
    CAGradientLayer *gradientLayer = [CAGradientLayer layer];
    gradientLayer.colors = colors;
    gradientLayer.frame = tableView.bounds;

    [tableView.layer insertSublayer:gradientLayer atIndex:0];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    cell.textLabel.text = [navigationItems objectAtIndex:indexPath.row];
    cell.textLabel.textColor = [UIColor blackColor];

    return cell;
} 
```

发生的情况是，填充有初始值的单元格似乎与我设置的渐变颜色重叠。这些单元格中没有文本/边框出现（在这种情况下，单元格的值为`1`, `2`, `3`, `4`）。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T02:06:45.523

将 backgroundView 设置为 tableView 对我有用。我是这样做的：

```
CAGradientLayer *gradientLayer = [CAGradientLayer layer];
gradientLayer.colors = colors;
gradientLayer.frame = tableView.bounds;

//[tableView.layer insertSublayer:gradientLayer atIndex:0];

UIView *tableBackgroundView = [[UIView alloc] init];
[tableBackgroundView.layer insertSublayer:gradientLayer atIndex:0];
[self.tableView setBackgroundView:tableBackgroundView]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:44:28.030

注意`insertSublayer`方法！每次回收单元格时，您都会插入新层。因此，经过几次迭代，您将在单元格内拥有一堆层。

为避免这种情况，每次运行一个简单的循环，如下所示：

```
for (CALayer *layer in [cell.barView.layer.sublayers reverseObjectEnumerator]) {
    if ([layer isKindOfClass:[CAGradientLayer class]]) {
        [layer removeFromSuperlayer];
        break;
    }
} 
```

# linux - /usr/include/gnu/stubs.h:7:27：错误：gnu/stubs-32.h：没有这样的文件或目录

> ID：10225944
> 
> 赞同：12
> 
> 时间：2012-04-19T10:12:43.513
> 
> 标签：linux, gnu, i386

我正在尝试安装`roccc 2.0`. 我已经安装了所需的软件包。现在在安装它时，它给了我这个错误：

```
/usr/include/gnu/stubs.h:7:27: error: gnu/stubs-32.h: No such file or directory 
```

我搜索`gnu/stubs-32.h`并得知，对于 Linux 64 位它的 in`glibc-devel`和对于 Linux 32 位它的 in `libc6-dev-i386`.

我正在使用 Linux 32 位：i386 GNU/Linux，但`lib`无法解决此错误。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-14T21:27:04.113

如果您的 Linux 发行版基于 Redhat（Fedora/CentOS/RHEL）：

```
yum install glibc-devel.i686 
```

### 参考

*   [原始帖子答案解决了这个问题 RHEL x64](https://stackoverflow.com/questions/7412548/gnu-stubs-32-h-no-such-file-or-directory)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T09:28:13.213

头文件`gnu/stubs-32.h`位于`/usr/include/i386-linux-gnu/`但安装脚本试图在 中找到它`/usr/include/`，尝试此快速修复以完成安装：

`sudo ln -s /usr/include/i386-linux-gnu/gnu/stubs-32.h /usr/include/gnu/stubs-32.h`

安装完成后，您可以删除链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-15T18:30:09.367

包名不断变化，只需做一个

```
yum list glibc-devel 
```

找出当前的 32 位软件包。就我而言，它只列出了 2 个包，一个用于 32 位，一个用于 64 位。我刚刚安装了32位使用

```
yum install glibc-devel.i686 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T11:16:59.147

安装 'glibc-devel' 包，或者它在你的发行版中调用的任何东西。您可能还需要安装 ia32-libs lib32z1-dev lib32bz2-dev（您的发行版中的名称可能不同）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-14T08:54:22.390

该脚本正在尝试从 /usr/include/ 中获取 stubs-32.h，但未找到该脚本。要解决此问题，您必须添加一个“包含”路径（默认为`/usr/include`），如下所示：

```
C_INCLUDE_PATH=/usr/include/i386-linux-gnu/
export C_INCLUDE_PATH 
```

或者

```
export C_INCLUDE_PATH=/usr/include/$(gcc -print-multiarch) 
```

您可以在编译 Nachos 源代码时访问[Error "gnu/stubs-32.h: No such file or directory"](https://stackoverflow.com/questions/7412548/gnu-stubs-32-h-no-such-file-or-directory)以获取更多参考。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-04T21:58:35.340

如果在 Red Hat 发行版（例如 Fedora/CentOS/RHEL）上，您可以执行以下操作来找出提供给定文件的软件包：

```
$ repoquery -qf */stubs-32.h
glibc-devel-0:2.17-260.el7.i686 
```

然后安装它：

```
$ sudo yum install -y glibc-devel-0:2.17-260.el7.i686 
```

# solr - Solr 查询通配符查询准确的搜索字符串

> ID：10225946
> 
> 赞同：0
> 
> 时间：2012-04-19T10:12:52.887
> 
> 标签：solr, solr-query-syntax

我想在 schema.xml 中使用以下配置进行通配符查询

```
<fieldType name="textGeneral" class="solr.TextField" sortMissingLast="true" positionIncrementGap="100">
    <analyzer>
        <tokenizer class="solr.KeywordTokenizerFactory" />
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" preserveOriginal="1"/>
        <filter class="solr.LowerCaseFilterFactory" />
    </analyzer>
</fieldType> 
```

我想找到的数据是`The Frick Collection, New York.`

当我执行以下查询时，`q=image_copyright:"frick collection,"`一切都很好。

但是当我尝试添加通配符搜索时，`q=image_copyright:"*ck collection,"`我没有得到任何结果。

有谁知道如何使用 NGram Tokenizer 来减慢索引时间。

**编辑 2012/04/19** 我意识到你可以做这样的事情。`q=image_copyright:*ck?collection,*`但这不是 100% 正确的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-25T15:35:56.780

Solr 4.8 添加了对“复杂短语查询”的支持，其中包括带引号的通配符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:31:05.750

这是通配符查询未分析的众所周知的问题，请参见[此处](http://www.lucidimagination.com/search/document/a6b9144ecab9d0ff/search_phrase_wildcard)。

从最近发布的 3.6.0 开始，应该已修复此问题

# javascript - 我们不能在 IE 中使用 JSONP 而不是 XDR 进行跨域请求吗？

> ID：10225947
> 
> 赞同：0
> 
> 时间：2012-04-19T10:12:57.680
> 
> 标签：javascript, cross-domain

现在我正在使用 XDomainRequest 进行跨域请求，但它给出了拒绝访问错误，因为我将请求从 HTTPS 发送到 HTTP，即发送到不同的 http 协议。

我可以使用 JSONP 代替 XDR 吗？它会解决我的目的吗？

# jquery - 如何隐藏多个项目但只调用一次处理程序？

> ID：10225948
> 
> 赞同：2
> 
> 时间：2012-04-19T10:13:00.987
> 
> 标签：jquery, hide

我隐藏了多个这样的项目：

```
$('#item1,#item2,#item3').hide('slow',function() {
    console.log('hidden');
}); 
```

问题是这会记录四次。由于我无法控制的原因，我无法在每个元素上使用公共类。有没有一种很好的 jquery-ish 方法可以让这个处理程序只在最后一项隐藏后才触发？（或第一个，因为它们应该几乎是同时的）

此外，元素将被隐藏和显示多次，因此用于限制处理程序调用的任何内容都必须在之后重置。

我显然可以在处理程序中放入某种布尔值，但我希望有一个更清洁的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T10:21:07.790

你可以使用[$.when()](http://api.jquery.com/jQuery.when/)和[deferred.done()](http://api.jquery.com/deferred.done/)

```
$.when($('#item1,#item2,#item3').hide('slow')).done(function() {
   console.log('hidden');
}); 
```

[简单的工作示例](http://jsfiddle.net/pBgC5/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T10:16:12.550

关于什么...

```
$('#item1,#item2,#item3').hide('slow', function() {
    if ($(this).is(':last')){
        // code
    }
}); 
```

编辑：它不起作用，因为回调`$(this)`内部的上下文发生了变化。`hide()`首先尝试缓存选择器：

```
var $els = $('#item1,#item2,#item3');
$els.hide('slow', function(e) {
    if ($(this).is($els.last())){
        alert('test');
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T10:26:12.187

您可以使用队列（*尽管[@ManseUK 的答案](https://stackoverflow.com/a/10226069/128165)现在看起来是正确的方法*）

```
$({})
    .queue(function(next){
        $('#item1, #item2, #item3').hide('slow', next);
    })
    .queue(function(){
        console.log('hidden');
    }); 
```

演示在[http://jsfiddle.net/duzB8/](http://jsfiddle.net/duzB8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T10:16:42.067

```
var counter = 0;
$('#item1,#item2,#item3').hide('slow',function() {
    counter++;
    if ( counter == 3 ){ console.log('hidden'); }
}); 
```

# php - 奇怪、烦人且非常随机的会话超时

> ID：10225951
> 
> 赞同：3
> 
> 时间：2012-04-19T10:13:21.697
> 
> 标签：php, session-timeout

我有一个相当大的 PHP 应用程序（数千个唯一 URL、具有各种角色的用户登录等）PHP 在 php.ini 中将会话超时设置为 1 小时（3600 秒）。登录的工作方式是这样的：当用户成功登录应用程序时，关于用户的一些信息会存储在 $_SESSION 中，包括用户名、真实姓名、角色 id 等。在每个页面访问（通用代码）上，$ _SESSION 检查这些变量，如果它们存在，用户就去他们要求的地方。如果变量不存在，则用户将被重定向到“未登录”页面。

在过去的几年里，这一直运行良好，并且仍然运行良好 - 主要是。会话似乎非常随机地超时，没有任何警告或其他任何东西。对于已登录的用户，这看起来像这样：登录，做某事，导航到下一页 - 然后退出并返回“未登录”页面。自然，这非常烦人。然而，这种行为的随机性使得调查变得极其困难。

我从来没有在我的机器上用任何浏览器体验过它。办公室里有另一台机器，每个浏览器都会出现这种情况（至少我可以重现这个问题）。在另一台机器上，它发生在一个浏览器中，而不发生在另一个浏览器中。然而在另一台机器上它有时会发生而不是其他时候。今天我们接到了一位遇到此问题的客户的电话 - 但当要求在不同的浏览器中尝试时，它工作正常。

这与浏览器的版本无关，因为它可以在某些机器上运行，而不能在具有相同版本的其他机器上运行。此外，拥有两台相同设置的机器，有时会发生在一台机器上，但从不会发生在另一台机器上。所以总的来说，会议似乎发生了一些非常非常奇怪的事情，但我完全不知道该去哪里看。在过去几个月的大部分时间里，我一直在尝试对此进行调查，但一无所获。还有哪里可以看？

在这一点上，任何帮助都非常感激。

**添加：**这是我的 php.ini 的*会话*部分：

```
[Session]
session.save_handler = files
session.use_cookies = 1
session.name = PHPSESSID
session.auto_start = 0
session.cookie_lifetime = 0
session.cookie_path = /
session.cookie_domain =
session.cookie_httponly = 
session.serialize_handler = php
session.gc_divisor     = 100
session.gc_maxlifetime = 3600 
session.bug_compat_42 = 1
session.bug_compat_warn = 1
session.referer_check =
session.entropy_length = 0
session.entropy_file =
session.cache_limiter = nocache
session.cache_expire = 180
session.use_trans_sid = 0
session.hash_function = 0
session.hash_bits_per_character = 4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:32:19.163

我遇到了相同的问题，会话在某些盒子上随机超时，在其他盒子上始终如一，而在大多数盒子上根本没有。经过大量的试验和错误，我将我的问题追溯到一些具有紧凑隐私策略问题的 IE 机器。我们只是添加了一个像这样的标题 header('P3P: CP=Visit www.oururl.tld for our Privacy Policy.')，它阻止了旧 IE 的很多问题。这应该只适用于 3rd 方 cookie，但谁知道 IE。

其次，我发现有些机器在.domain.tld 上设置会话cookie 然后从domain.tld 访问它而不是通过www.domain.tld 访问它。确保所有请求都定向到 www 子域解决了大多数其他浏览器。

最后，我不得不从 php 接管设置会话超时，因为我们服务器的时区在自动设置时会导致问题。我只是将过期时间设置为 0，这样它就不会使用浏览器使 cookie 超时，直到用户关闭浏览器等结束“会话”。然后我在会话中添加了一个简单的 expires 变量并手动检查它，以便所有关于过期的检查和决定都是在我们服务器的时区而不是客户端中进行的。

这三件事解决了所有问题，但我强烈怀疑是由于谷歌和雅虎工具栏对浏览器缓存或浏览器临时 Internet 文件本身做了奇怪的事情而导致的最不可重现的实例。

如果您使用会话 ID 重新生成和 AJAX/其他异步调用，您可能还需要检查并确保您没有遇到任何竞争条件。通常在旧版浏览器中，当您重新生成 id 时，cookie 更新的速度不够快，甚至较新的浏览器时间可能刚好足以通过新请求提交旧 id 并导致会话中断。我对此的最佳解决方案是不在 AJAX 上重新生成会话 ID，而只在实际页面加载时重新生成，以便保持同步。还有其他几种方法，例如保留旧会话数据而不是自动删除它（在一定程度上也不安全，只有您的应用程序的需求可以确定）。

# android - 在android中使用dom解析xml数据

> ID：10225955
> 
> 赞同：1
> 
> 时间：2012-04-19T10:13:52.220
> 
> 标签：android, dom, android-parser

如何使用 DOM 解析这种类型的数据？这里有些文本在 CDATA 中，有些文本在正常中。

```
<error><![CDATA[This Mobile number already registered]]> with a different ICNO ( Hotline Number: +993498347334 )</error> 
```

谁可以帮我这个事。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:37:12.683

如果您作为 DOM 解析器进行解析，请尝试使用**factory.setCoalescing(true);** 这样 CDATA 就被删除了。

如果您首先需要 CDATA 中的内容，我建议从 xml 获取字符串，然后创建一个以 Hope 开头的子字符串，它会有所帮助。

# python - Python组合键输入检测——ESC和Enter

> ID：10225956
> 
> 赞同：0
> 
> 时间：2012-04-19T10:13:57.247
> 
> 标签：python, keyboard

在下面的 doDebuggingMenu 函数中，我使用 raw_input 函数（使用 Python 2.6）获取用户输入。这个函数一直等到用户输入一个字符序列并按下回车键。尽管如此，我希望用户只需按下键盘上的 ESC 按钮即可退出应用程序，而不必按 Enter（请参阅我打算实现此行为的函数中的最后一个 elif 块）。对于其他菜单选项，用户应该能够按下回车按钮，因为菜单中有需要输入两位数字的选项。我的问题是如何在以下函数中提供这种组合行为？谢谢

```
def doDebugingMenu():
    while(1):
        printDebugingMenu()

        char = raw_input("\nPlease, enter your selection in the debugging menu...:")       

        if  char == '1':
           doSetTraceLevelManually()   
        elif  char == '2':
           doSetTraceDomain() 
        elif  char == '3':
           doPrintLevels()                                            
        elif  char == '4':
           doPrintConfig()
        elif  char == '5':
           doPrintProfile()
        elif  char == '6':
           doPrintMap()
        elif  char == '7':
          doPrintCounters()
        elif(char == '8'):
          doRaiseAlarm()
        elif(char == '9'):
          doClearAlarm()       
        elif(char == '10'):
          doUpdateAlarm()
        elif(char == '11'):
          doShutdown()         
        #HERE I need to catch if ESC pressed            
        elif  char == 'ESC':
          break  

def printDebugingMenu():
       print "\n######################################"
       print "#                MENU                 #"
       print "######################################"
       print "1\.  setTraceLevel( traceLevel )"
       print "2\.  setTraceDomain()"
       print "3\.  PRINT Trace Domain and levels"  
       print "4\.  PRINT config"
       print "5\.  PRINT profile config"
       print "6\.  PRINT mapping config"
       print "7\.  PRINT counters"  
       print "8\.  Issue Alarm"
       print "9\.  Remove Alarm"
       print "10\. Update Alarm" 
       print "11\. Shutdown" 
       print "EXIT: press ESC" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:41:01.603

`raw_input()`不是你需要的。

您需要逐个字符处理输入，以便检测`ESC`功能键等。也许构建自己的输入功能，当您按 ENTER 时返回文本但在其他键上抛出异常，但是您需要处理退格键、光标移动、等等。您可以`curses`在 Unices 或`msvcrt`Windows 上的模块中找到原语。这是很多工作。但是，如果您正在编写大量基于控制台的程序，那么您拥有它并且它是可重用的。

但是，通常情况下，`Ctrl-C`如果用户想要退出程序并且不需要使事情复杂化，他们就很乐意使用。如果您想要一些花哨的东西，请编写一个 GUI 程序。由你决定。

在旁注中，那个`if`... `elif`...`elif`块看起来非常非pythonic。看看[这个](http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:41:05.223

恐怕要做到这一点，您将不得不使用该[`curses`](http://docs.python.org/py3k/library/curses.html)模块，但对于您的简单应用程序，我不会建议它。

另请注意，`if/elif`Python 中的 switch 通常使用`dict`s 完成。

# asp.net - Gridview 更新失败，没有错误消息。Visual Web Developer 中的访问数据源

> ID：10225961
> 
> 赞同：0
> 
> 时间：2012-04-19T10:14:03.860
> 
> 标签：asp.net, sql, ms-access

我有一个问题，我在过去 24 小时内一直在努力解决，所以为了避免我发疯，我想我会请人帮忙解决我的问题！

我正在使用 Visual Web Developer，在此我有一个 asp Gridview 元素，它从我的 AccessDataSource 中选择信息。（我可能会添加完美的作品。）

当我尝试更新 Gridview 中的信息时出现错误。我的更新 SQL 在 Access 中运行良好，但在 VWD 中它不会引发错误消息，但无法将新数据保存到数据库中。我已经在 asp 中为更新命令设置了参数，我也设置了“DataKeyNames”。

谁能帮我这个？我对此比较陌生，我只是看不出我哪里出错了。我一直在网上进行广泛的搜索，但仍然无法完全看到它，所以我认为我的下一个最佳选择是在这里询问。

提前谢谢了。:)

我的 ASP.net 代码：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
DataSourceID="AccessDataSource1" DataKeyNames="MemberID" 
style="z-index: 1; left: 0px; top: 147px; position: absolute; height: 133px;     
width:499px">
<Columns>
<asp:CommandField ShowEditButton="True" />
<asp:BoundField DataField="RaceID" HeaderText="RaceID" SortExpression="RaceID" />
<asp:BoundField DataField="MemberID" HeaderText="MemberID" SortExpression="MemberID" />
<asp:BoundField DataField="MemberName" HeaderText="MemberName"   
SortExpression="MemberName" />
<asp:BoundField DataField="PersonalTime" HeaderText="PersonalTime" 
SortExpression="PersonalTime" />
<asp:BoundField DataField="FinishPosition" HeaderText="FinishPosition" 
SortExpression="FinishPosition" />
<asp:BoundField DataField="Points" HeaderText="Points" 
SortExpression="Points" />
</Columns>
</asp:GridView>

<asp:AccessDataSource ID="AccessDataSource1" runat="server"     
DataFile="~/App_Data/myDatabase.mdb" 

SelectCommand="SELECT tblResult.RaceID, tblResult.MemberID, tblMember.MemberName, 
tblResult.PersonalTime, tblResult.FinishPosition, tblPoint.Points FROM ((tblRaceType  
INNER JOIN (tblRace INNER JOIN (tblMember INNER JOIN tblResult ON tblMember.MemberID = 
tblResult.MemberID) ON tblRace.RaceID = tblResult.RaceID) ON tblRaceType.RaceTypeID = 
tblRace.RaceTypeID) INNER JOIN tblPoint ON tblResult.FinishPosition = tblPoint.
[Position] AND tblRaceType.RaceTypeID = tblPoint.RaceTypeID) WHERE (tblResult.RaceID =    
?) AND (tblPoint.RaceTypeID = ?) ORDER BY tblResult.FinishPosition" 

UpdateCommand="UPDATE [tblResult] SET PersonalTime = ?, FinishPosition = ? WHERE  
MemberID = ? AND RaceID = ?">

<SelectParameters>
<asp:SessionParameter DefaultValue="0" Name="?" SessionField="raceID" />
<asp:SessionParameter DefaultValue="0" Name="?" SessionField="raceTypeID" />
</SelectParameters>

<UpdateParameters>
<asp:Parameter Name="PersonalTime" Type="String"/>
<asp:Parameter Name="FinishPosition" Type="Int64" />
<asp:Parameter Name="MemberID" Type="Int64" />
<asp:Parameter Name="RaceID" Type="Int64" />
</UpdateParameters>
</asp:AccessDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T23:12:06.947

stackoverflow 上的这个链接也有类似的情况。我不确定环境，但它可能不是 Visual Web Developer 问题。无论哪种方式都是链接：

[AccessDatasource 的更新什么都不做，但没有错误](https://stackoverflow.com/questions/1779086/update-of-accessdatasource-does-nothing-but-has-no-error)

看起来这个问题没有得到解决，但那里有一些提示可能会有所帮助。

-狡猾的

（我也遇到了同样的问题，所以如果你最终有一个好的解决方案，请发布它！！谢谢！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:26:46.027

对于其他有同样问题的人：

我必须将我已经存在的 VB 代码包装在“If Not Page.IsPostBack”中。认为这是通过重新加载页面和在执行更新命令之前干扰更新。

# javascript - 消除 如果没有值，则使用 jquery

> ID：10225967
> 
> 赞同：4
> 
> 时间：2012-04-19T10:14:23.763
> 
> 标签：javascript, jquery, ckeditor

如果检测到这一点如何隐藏属性`<p> &nbsp;</p>`

我的问题是当我的客户使用 ckeditor 插入数据（示例表）时，当我看到源代码时，ckeditor 会`<p> &nbsp;</p>`在表代码之后添加它。我知道如何用源代码手动删除这个（开源代码并删除），但不是我的客户！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-19T10:19:52.300

原始答案：[如何使用 jQuery 删除空的 p 标签？](https://stackoverflow.com/questions/6092855/how-do-i-remove-empty-p-tags-with-jquery)

尝试

```
$('p').each(function() {
 var $this = $(this);
 if($this.html().replace(/\s|&nbsp;/g, '').length == 0)
     $this.remove(); }); 
```

这是工作代码：http: [//jsfiddle.net/ambiguous/7L4WZ/](http://jsfiddle.net/ambiguous/7L4WZ/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T10:17:14.937

我认为这应该有效。非常快速和hacky

```
$("p").each(function() { 
   var $el = $(this);
   if($.trim($el.html()) == "&nbsp;") {
     $el.remove();
   }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T10:18:32.940

```
$('p').each(function(){
    var value = $.trim($(this).html());
    if(value == '&nbsp;'){
        $(this).remove();
    }
}); 
```

这将适用于所有 p 标签，因此最好使用其父标签编写选择器，因此它不应该影响其他页面元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-23T14:56:07.470

```
$('p').each(function() {
 var $this = $(this);
 if($this.html().replace(/\s|&nbsp;/g, '').length == 0)
     $this.remove(); }); 
```

这对我来说就像一个魅力。谢谢普拉内！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-29T02:10:31.183

```
$('p').filter(function() {
 return trim($(this).text()) == "";
 }).remove(); 
```

# wpf - 在 WPF 中异步更改图像

> ID：10225970
> 
> 赞同：0
> 
> 时间：2012-04-19T10:14:26.187
> 
> 标签：wpf, sockets

我正在通过网络套接字异步将 WriteableBitmap 图像作为字节 [] 发送到 WPF 应用程序。如何更改 WPF 图像控件中看起来像实时流式传输的图像..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:41:06.190

这是你想要的 -

[http://dotnetlearning.wordpress.com/2011/01/27/loading-images-asynchronously-in-wpf/](http://dotnetlearning.wordpress.com/2011/01/27/loading-images-asynchronously-in-wpf/)

# c# - 如何在asp.net MVC中获取当前Route并调整一个值？

> ID：10225971
> 
> 赞同：0
> 
> 时间：2012-04-19T10:14:34.580
> 
> 标签：c#, asp.net-mvc

我有一个请求，它有一条路线，但是在 global.asax 中设置了很多它们......一个典型的路线是......

```
routes.MapRoute(
                "NewStore",
                "{culture}/{client}/{brand}/NewStore/{action}",
                new
                {
                    culture = UrlParameter.Optional,
                    client = UrlParameter.Optional,
                    brand = UrlParameter.Optional,
                    controller = "NewStore",
                    action = "Index"
                }
                ); 
```

我需要创建一个 ddl 来切换页面上的文化。所以实际上我想要做的就是重新创建路由 url 但更改一个参数。所以我想做点什么...

```
 Route currentRoute = httpContext.GetCurrentRoute();
    Route englishCultureRoute = currentRoute;
    Route spanishRoute = currentRoute;
    englishCultureRoute.RouteData.Values["culture"] = "en-en"
    spanishRoute RouteData.Values["culture"] = "es-es"

@Html.SelectListForRoutes(englishCultureRoute,spanishRoute); 
```

所以上面是伪代码，我想在控制器中做第一个位，但我如何在 c# 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:51:32.467

您可以从控制器访问路由数据

```
RouteData 
```

如果你想分配新的值，你可以做这样的事情

```
public ActionResult Index(int id)
{
    RouteData.Values["id"] = 555;
    return View();
} 
```

在视图中，您可以从

```
@ViewContext.RouteData.Values["Id"] 
```

但是如果您对应用程序的全球化有更好的解决方案，您可以检查[一下](http://afana.me/post/aspnet-mvc-internationalization.aspx)

# android - android 采样分析器

> ID：10225980
> 
> 赞同：-1
> 
> 时间：2012-04-19T10:14:59.837
> 
> 标签：android, profiler

有人可以指出我的 android 应用程序采样分析器吗？搜索“整个”网络，没有找到。任何链接都非常感谢。可能是关于如何制作它的一些想法。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:15:53.567

在较新的版本中有 dalvik.system.profiler.SamplingProfiler (>= Honeycomb, iirc)。不过，它不是公开的，所以现在你必须使用反射来解决它。我们应该在未来的版本中对此做一些事情......

# php - 回声不显示第一行

> ID：10225982
> 
> 赞同：0
> 
> 时间：2012-04-19T10:15:19.583
> 
> 标签：php, row, echo

我的任务系统有这个问题，

每当一个新成员完成他的第一个任务时，它都不会出现。只有在第一个之后制作的。

```
 <?php

            $sql = mysql_query("SELECT * FROM todo WHERE member_id = '".$_SESSION['member_id']."' ORDER by id ASC");
            if (!$sql) {
                die ('invalid query: ' . mysql_error());
            }

                 $rows = mysql_fetch_assoc($sql);

            while($rows = mysql_fetch_array( $sql )) {    

?> 
```

之后，我只是回显所有内容（任务）。每一行在彼此之下。但是第一个任务没有出现。它仍然隐藏。

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:18:45.607

```
$rows = mysql_fetch_assoc($sql); 
```

这太多了。删除它。它获取第一行，因此 while 循环无法获取第一行。

另外，我暂时不会使用`mysql_fetch_array`，使用 mysql_fetch_assoc 来使用关联数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T10:19:27.480

调用 $rows = mysql_fetch_assoc($sql); 正在获取第一行，您不需要该行。发生的事情是该行获取第一行，并更新 $sql （这是结果集资源）以指向第二行，然后当您调用 mysql_fetch_array( $sql ) 它从第二行开始。

# android - Apache HttpClient 多个 GET 请求

> ID：10225985
> 
> 赞同：1
> 
> 时间：2012-04-19T10:15:41.287
> 
> 标签：android, apache, get, httpclient

我正在开发简单的 Android 应用程序，该应用程序从 Web 下载一些数据并将其保存到 SQLite 数据库中。

问题是需要保存大量文件。
我正在使用 Apache `DefaultHttpClient`，但我不明白如何发出许多 GET 请求。

现在官方 Apache 文档声明，应该有一个 HttpClient 来建立多个连接。我在这里找到了一些关于如何为每个应用程序制作单个 HttpClient（使用 Singleton 类等）的答案，但在那之后，我是否需要编写数百个 GET 请求来下载这些文件？

现在，最近我发现我需要的所有信息实际上都包含在一个 XML 文件中。

所以我正在考虑下载该文件，使用解析器查找我需要的内容，并将该信息传递给 HttpClient。

但我怎么能做到这样呢？

我在官方 Apache 文档上找到了很多很棒的信息，在这里，在许多博客上，但似乎没有一个提供关于如何发出多个 GET 请求的清晰简单的示例。

或者答案就这么简单，只需编写我需要的尽可能多的 GET 请求？（但在那种情况下，我需要数百甚至数千个 GET 请求）。

好的，我知道这个问题可能看起来很荒谬，但我对 JAVA 和 Android 开发几乎完全陌生。有一些小的编码经验，但这是我第一次进入“严肃”编程，所以非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:46:03.673

与其自己处理 GET 请求（尤其是对于大量数据），不如通过[`DownloadManager`](http://developer.android.com/reference/android/app/DownloadManager.html)类为您提供更好的服务。

# c - Linux 内核加密指南

> ID：10225989
> 
> 赞同：3
> 
> 时间：2012-04-19T10:15:58.193
> 
> 标签：c, cryptography, linux-kernel, kernel-module

我正在开发一个内核模块来加密/解密内核中的输入。我正在考虑使用在加密中实现的 AES 算法。*（关于可以在 Linux 加密中找到的有效算法的任何其他建议？）*

我在 Internet 上搜索了指南并阅读了 linux/crypto 文档，但我仍然无法理解如何使用它的基础知识（关于 Crypto 的 linux 内核文档并没有多大帮助..）。

你能给我看一个网站/指南/示例/甚至一本关于如何开始的小书吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:13:14.513

也许这个例子对你有用：[http ://www.logix.cz/michal/devel/cryptodev/cryptodev-20091126/](http://www.logix.cz/michal/devel/cryptodev/cryptodev-20091126/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-15T18:27:20.067

我以前也有你这样的烦恼。但我发现这个关于 Crypto API Linux 的绝对有用的网站。这是它： http: [//www.chronox.de/crypto-API/](http://www.chronox.de/crypto-API/)

# php - 当计时器在javascript文件上运行时禁用单独的php文件上的提交按钮

> ID：10225991
> 
> 赞同：0
> 
> 时间：2012-04-19T10:16:08.377
> 
> 标签：php, javascript, countdowntimer

我有一个 php 表单和一个名为 countdown.js 的单独 javascript 文件，该文件将计时器运行到目标日期，然后显示一条消息，我尝试了各种方法来让提交按钮在完成后禁用。

这是我的表格

```
<form id="MakeBid" action="MakeBid.php" method="POST">
<input type="hidden" name="propertyID" value ="1"/>
<div>Bid Now <input type="text" name="pricesoldfor"/></div> 
<input id = "submit" input type="submit" value="Submit" /> 
</form> 
```

这是我的java代码

```
function calcage(secs, num1, num2) {
    s = ((Math.floor(secs / num1)) % num2).toString();
    if (LeadingZero && s.length < 2) s = "0" + s;
    return "<b>" + s + "</b>";
}

function CountBack(secs) {
    if (secs < 0) {
        document.getElementById("cntdwn").innerHTML = FinishMessage;

        return;
    }
    DisplayStr = DisplayFormat.replace(/%%D%%/g, calcage(secs, 86400, 100000));
    DisplayStr = DisplayStr.replace(/%%H%%/g, calcage(secs, 3600, 24));
    DisplayStr = DisplayStr.replace(/%%M%%/g, calcage(secs, 60, 60));
    DisplayStr = DisplayStr.replace(/%%S%%/g, calcage(secs, 1, 60));
    document.getElementById("cntdwn").innerHTML = DisplayStr;
    if (CountActive) setTimeout("CountBack(" + (secs + CountStepper) + ")", SetTimeOutPeriod);
}

function putspan(backcolor, forecolor) {
    document.write("<span id='cntdwn' style='background-color:" + backcolor + "; color:" + forecolor + "'></span>");
}

if (typeof(BackColor) == "undefined") BackColor = "white";
if (typeof(ForeColor) == "undefined") ForeColor = "black";
if (typeof(TargetDate) == "undefined") TargetDate = "12/31/2020 5:00 AM";
if (typeof(DisplayFormat) == "undefined") DisplayFormat = "%%D%% Days, %%H%% Hours, %%M%% Minutes, %%S%% Seconds.";
if (typeof(CountActive) == "undefined") CountActive = true;
if (typeof(FinishMessage) == "undefined") FinishMessage = "";
if (typeof(CountStepper) != "number") CountStepper = -1;
if (typeof(LeadingZero) == "undefined") LeadingZero = true;
CountStepper = Math.ceil(CountStepper);
if (CountStepper == 0) CountActive = false;
var SetTimeOutPeriod = (Math.abs(CountStepper) - 1) * 1000 + 990;
putspan(BackColor, ForeColor);
var dthen = new Date(TargetDate);
var dnow = new Date();
if (CountStepper > 0) ddiff = new Date(dnow - dthen);
else ddiff = new Date(dthen - dnow);
gsecs = Math.floor(ddiff.valueOf() / 1000);
CountBack(gsecs);​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:39:34.707

我假设您的计时器运行良好并且消息显示正确。

你尝试过使用 jQuery 吗？要禁用提交按钮，只需插入以下行：

```
$("input[type=submit]").attr("disabled", "disabled"); 
```

这是你想要达到的目标吗？

同样在下面我粘贴了您解决类似问题的链接：

[jQuery禁用/启用提交按钮](https://stackoverflow.com/questions/1594952/jquery-disable-enable-submit-button)

编辑：

根据您的代码（并假设它正在工作），请执行以下操作：

*   将 jQuery 添加到您的站点：http: [//jquery.com/](http://jquery.com/)
*   修改你的 CountBack 函数，添加我`document.getElementById("cntdwn").innerHTML = FinishMessage;`之前和之后提供的代码`return;`

应该管用！

# sql - 3NF 数据库规范化 (Erwin)

> ID：10225993
> 
> 赞同：0
> 
> 时间：2012-04-19T10:16:12.830
> 
> 标签：sql, erwin

我有一张桌子，我正试图将它分成几张桌子以获得 3nf，有人可以帮我吗？当我使用 Erwin 数据模型验证器验证我的表时，我没有收到任何警告......但这不是 3nf(

[http://i43.tinypic.com/35mmuwx.png](http://i43.tinypic.com/35mmuwx.png)

和我的欧文方案：http: [//i42.tinypic.com/2hnvx3o.png](http://i42.tinypic.com/2hnvx3o.png)

将不胜感激任何帮助）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:32:27.363

您的错误是在 Title 和 Manager 上，您不应该有 employee_ID。您的 Employee 表上应该有 job_Id 和 mng_id，因此经理和 Title 在您的表上只存在一次，只需通过他们的 ID 从您的员工表中引用它们。job_start_date 和 job_end_date 应该在您的 Employee 表中，除非有真正的理由使用单独的表（例如存储多个开始/结束日期，但似乎并非如此）。薪水也是如此，尽管我不知道最低和最高薪水。如果该数据是职位固有的，那么这两个字段应该在 Title 表中。

# grails - 在剑道网格中连续添加按钮

> ID：10225994
> 
> 赞同：2
> 
> 时间：2012-04-19T10:16:20.680
> 
> 标签：grails

我在我的 grails 应用程序中使用 Kendo 网格，我的要求是每一行都应该显示一个按钮，单击该按钮时，插入一个新行，其值与顶行相同。请任何人帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:28:39.677

这个问题可以使用自定义模板来解决。例如：

```
$("#myGrid").kendoGrid({
    dataSource: {
        schema: {
            model: {
                id: "id"
            }
        }
    },
    columns: [
        {field: 'some_field', title: 'some title'},
        {field: '', title: '', template: '<a href="\\#" onclick="duplicateRow(#=id#); rertun false;">duplicate row</a>'}
    ]
}); 
```

请注意，此示例假定网格中的每个对象都有一个名为“id”的唯一字段。

一个示例 duplicateRow 方法：

```
function duplicateRow(id) {
    var selectedItem = $("#myGrid").data("kendoGrid").dataSource.get(id);
    var newItem = createNewItem(selectedItem);
    $("#myGrid").data("kendoGrid").dataSource.add(newItem);
} 
```

请注意，您必须编写 createNewItem 函数，该函数应该使用新 id 从 selectedItem 创建副本。插入新项目的位置取决于您在网格中使用的排序。

# jquery - 如何获取所有未选择的输入字段

> ID：10225995
> 
> 赞同：0
> 
> 时间：2012-04-19T10:16:26.013
> 
> 标签：jquery

```
var $inputs = $('.add-item-form :input'); 
```

这会获取所有输入字段，但也会选择我不想要的选择字段。

例如

```
<select><option>example</option></select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:17:43.373

使用 a`.not()`省略选择框

```
var $inputs = $('.add-item-form :input').not("select") 
```

或者使用 CSS 样式`:not`选择器

```
var $inputs = $('.add-item-form :input:not(select)'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:17:48.237

[`:input`](http://api.jquery.com/input-selector/)是一个 jQuery 特定的伪选择器，用于`input`、`textarea`、`button`和`select`元素。所以你可以这样做：

```
var $inputs = $('.add-item-form :input:not(select)'); 
```

...但您也可以直接说出您想要的内容：

```
var $inputs = $('.add-item-form input, .add-item-form textarea, .add-item-form button'); 
```

...这将有一个优势，如果浏览器支持`querySelectorAll`（并且几乎所有支持，在标准模式下），jQuery 可以只交给本地处理（而`:input`特定于 jQuery，所以不能由浏览器的本地东西处理）。

或者，当然，如果你不想要`textarea`和`button`元素，那真的很简单：

```
var $inputs = $('.add-item-form input'); 
```

...再次，这具有由浏览器优化的东西在可能的情况下处理的优势。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T10:20:26.603

如果您只想要`input`元素，请省略冒号：

```
$('.add-item-form input'); 
```

选择器`:input`选择所有输入、文本区域、选择和按钮元素。如果您只想要输入元素，只需说`input`.

*（如果您确实*需要 textarea 或 button 元素，则此答案不好。）