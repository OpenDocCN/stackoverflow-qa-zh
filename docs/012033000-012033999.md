# StackOverflow 问答 12033000-12033999

# perl - 未定义的子程序 &abc::abcUtil::PERL_DEBUG

> ID：12033003
> 
> 赞同：0
> 
> 时间：2012-08-20T06:18:20.030
> 
> 标签：perl

我有一个 perl 模块：`abcUtil.pm`它有一个子程序检查：

```
package abc::abcUtil
require "common.pl"
sub check {
   ..
   PERL_DEBUG("");
   // PERL_DEBUG is in common.pl
   ..
} 
```

当我执行这个时，它工作正常，但是当我在另一个 perl 中使用这个 pm 时：

```
require "common.pl"
use abc::abcUtil
sub func {
    abc::abcUtil::check();
} 
```

在这里，如果我打电话`func()`，我会收到这个错误：

```
"Undefined subroutine &abc::abcUtil::PERL_DEBUG .." 
```

此 perl 文件中还有其他直接出现的情况`PERL_DEBUG`正常。

可能有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:21:43.900

我相信您的问题是，如果您`require`的程序中有两个语句用于同一个文件，则该文件只会被引入一次。因此，在这种情况下，它只会被引入您的主文件。因此，模块看不到它。

`require`使用文件名并不是包含代码的复杂机制。它基本上是上面的一步`eval`。如果你想拥有自己的通用函数库，可以在这两个地方使用，只需将它们制作成一个模块即可。那么你就没有问题了。

# selenium - 如何为 Selenium-WebDriver 设置数据库连接？

> ID：12033007
> 
> 赞同：1
> 
> 时间：2012-08-20T06:18:58.900
> 
> 标签：selenium, selenium-rc, selenium-webdriver, selenium-grid

如果我运行 Selenium-WebDriver 测试用例，它将使用为应用程序配置的实际数据库运行。但我想为 Selenium-WebDriver 测试用例设置一个单独的数据库，例如。“测试数据库”。运行测试用例时，WebDriver 应该使用 TestDB。这可能吗？

如果可能的话，我们是否需要在任何配置文件 (*.xml) 或任何其他方式中进行配置？

请帮我？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:11:45.987

您可以使用配置到“TestDB”的应用程序副本进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:02:05.447

在 html 请求中添加一个额外的请求参数。例子 ：`http://www.abcd.com/?seleniumTest=true`

*seleniumTest*参数仅在 selenium 请求中可见。

在应用程序中捕获该参数，并根据 selenium 提供的请求参数选择数据库。如果`true`映射一个测试数据库，否则生产。

希望这有效。

# php - 根据从一组给定复选框中做出的选择，在 MySql 查询中选择随机数的“where 子句”

> ID：12033010
> 
> 赞同：0
> 
> 时间：2012-08-20T06:19:08.580
> 
> 标签：php, mysql, sql

我有一个时事通讯，其中有以下复选框：
`<input type="checkbox" name="assign[]" value="1" >designation_code_1`
`<input type="checkbox" name="assign[]" value="3" >designation_code_2`
`<input type="checkbox" name="assign[]" value="4" >designation_code_3`
`<input type="checkbox" name="assign[]" value="5" >designation_code_4`

我有两个表`tbl_designations`，`tbl_profile`下面提到的是我用来从各个表中检索值的查询。

```
SELECT 
    * 
FROM 
    tbl_designations AS A
        JOIN (
            SELECT 
                * 
            FROM 
                tbl_profile
            ) AS B
        ON A.is_placement = B.is_placement 
        AND A.designation_code = B.hierarchy 
        AND A.designation_id =5 
```

这个查询给了我 100 条记录**`each`**，这些记录对应于 ***X =(1,2,3,4)*****`designation_id = "X"`**

 ****X**的值是通过选中上面的复选框来确定的。如果我只选择一个复选框（比如第一个复选框），那么我将得到**`designation_id = 1`** 并且查询将根据复选框的选择/选择获取记录并给出所需的结果。

我的疑问是我应该写什么查询，以便当我一次选择多个复选框时，它会根据复选框中的**选择`(s)`**从表中提取记录 （表示对应于复选框的***值***）。

我正在使用`foreach`循环来获取存储在**`assign[]`**数组中的值。
**请帮忙**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:26:37.223

早上好好奇，

你可以这样写：

```
... and A.designation_id in (1, 2, 3) 
```

括号内的值应替换为从选定复选框返回的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:25:34.583

这很愚蠢。[`IN`](http://dev.mysql.com/doc/refman/5.1/en/comparison-operators.html#function_in)改为使用逗号[连接每个元素](http://php.net/manual/en/function.implode.php)。`$_POST['assign']`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T06:26:23.700

这并不能直接回答您的问题，但是当我编辑您的帖子以进行格式更改时，我忍不住看到了 SQL。

我在下面为您重写了它（您永远不应该使用 a`select *`作为连接 - 只需使用整个表，您的数据库就会对您*更*满意），您应该会找到更好的结果。

```
SELECT 
    * 
FROM 
    tbl_designations AS A
        JOIN tbl_profile B
        ON A.is_placement = B.is_placement 
        AND A.designation_code = B.hierarchy 
        AND A.designation_id =5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T06:29:01.297

试试这个：

```
where X in (1,2,3,4) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T06:39:33.610

您可以构建一个逗号分隔的字符串，并通过 FIND_IN_SET 函数在查询中使用它，例如 -

```
...
WHERE FIND_IN_SET(X, '1,2,3,4') 
```

[FIND_IN_SET(str,strlist)](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_find-in-set)函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-20T06:47:42.857

为每次刷新选择随机列数，我们使用这个：

```
$sql = mysql_query("SELECT * FROM $Tablename where column = '$bookmark' order by rand() limit 1"); 
```

:)**

# android - 如何在 Post 方法上获取内容

> ID：12033012
> 
> 赞同：1
> 
> 时间：2012-08-20T06:19:08.750
> 
> 标签：android

我已经使用了下面的代码`HttpPost`，它执行成功。但看不到回复。我明白了`InputStream`。我想知道里面的内容是什么。

我想显示为字符串格式。如何做到这一点。

```
 HttpPost httppost = new HttpPost(requestURL);
        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(params.length);

        for (int postValueCount = 0; postValueCount < params.length; postValueCount++)
            nameValuePairs.add(new BasicNameValuePair(params[postValueCount][0],params[postValueCount][1]));

        try {
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            Log.d("HttpPostRequest","URL : " + httppost.getRequestLine().getUri());
            Log.d("HttpPostRequest","Method : " + httppost.getRequestLine().getMethod());
            Log.d("HttpPostRequest","Parameters : " + nameValuePairs);
            response = httpclient.execute(httppost);
            status = response.getStatusLine();

            if (status.getReasonPhrase().equals("OK")) {
                httpEntity=response.getEntity();
                InputStream in = httpEntity.getContent();               
                return in;
            } else {
                Log.d("Http Status", status.getReasonPhrase());
            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:24:36.507

这是我在我的一个项目中使用的。

```
static String isToString(InputStream is) {
    StringBuilder sb = null;
    String result = null;
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        sb = new StringBuilder();
        sb.append(reader.readLine() + "\n");
        String line = "0";

        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }

        is.close();
        result = sb.toString();

    } catch (Exception e) {
        System.err.println("Error converting result " + e.toString());
        return null;
    }

    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T06:28:35.617

使用此代码：

```
HttpEntity entity = response.getEntity();
String response = EntityUtils.toString(entity); 
```

# mysql - 在 MySQL 中永久设置 auto_increment_offset

> ID：12033017
> 
> 赞同：0
> 
> 时间：2012-08-20T06:19:26.077
> 
> 标签：mysql, auto-increment

我以root身份运行命令：

```
set @@auto_increment_offset = 2; 
```

但从其他连接上看不到效果。为什么不？它是全球性的。

来自[http://dev.mysql.com/doc/refman/5.1/en/replication-options-master.html](http://dev.mysql.com/doc/refman/5.1/en/replication-options-master.html)：“如果设置了任一变量的全局值，则其影响将持续存在，直到全局值被更改或覆盖设置会话值，或者直到 mysqld 重新启动。”

这似乎与我所看到的不一致。

最终，我想知道是否有任何方法可以在不重新启动 mysqld 的情况下为所有客户端永久设置偏移量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T06:30:27.273

根据 MySQL[文档](http://dev.mysql.com/doc/refman/5.1/en/replication-options-master.html#sysvar_auto_increment_increment)，您需要为`auto_increment_offset`和`GLOBAL`设置值`SESSION`。

```
SET GLOBAL auto_increment_offset  = 2;
SET SESSION auto_increment_offset  = 2;

SHOW VARIABLES LIKE '%auto_increment_offset%'; 
```

如果设置了任一变量的全局值，其影响将持续到全局值被更改或通过设置会话值覆盖，或者直到 mysqld 重新启动。如果设置了本地值，则新值会影响当前用户在会话期间插入新行的所有表的 AUTO_INCREMENT 列，除非在该会话期间更改了值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T06:30:14.550

要全局设置它，您应该添加前缀 'GLOBAL' 或 '@@global.'。例如 -

```
SET @@GLOBAL.auto_increment_offset = 2; 
```

'@@' 与'SESSION' 或'@@session.' 相同，它设置会话变量。

[使用系统变量](http://dev.mysql.com/doc/refman/5.5/en/using-system-variables.html)。

# android - 简单的安卓计算器

> ID：12033020
> 
> 赞同：3
> 
> 时间：2012-08-20T06:20:02.520
> 
> 标签：android, calculator

我正在尝试构建一个简单的计算器。以下是活动文件：

```
 package com.example.calcsimple;

import android.os.Bundle;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.view.Menu; 
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.view.View.OnClickListener;

public class MainActivity extends Activity {

Button btnClr , btn0 , btn1 , btn2 , btn3 , btn4, btn5 , btn6 , btn7 , btn8 , btn9 , btnAdd , btnSub , btnMul , btnDiv , btnEq;
TextView textView1 ; 
double i1 , i2 , result=0;
boolean newValue = false;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    textView1 = (TextView) findViewById(R.id.textView1);

    btnClr = (Button) findViewById(R.id.btnClr);
    btn0 = (Button) findViewById(R.id.btn0);
    btn1 = (Button) findViewById(R.id.btn1);
    btn2 = (Button) findViewById(R.id.btn2);
    btn3 = (Button) findViewById(R.id.btn3);
    btn4 = (Button) findViewById(R.id.btn4);
    btn5 = (Button) findViewById(R.id.btn5);
    btn6 = (Button) findViewById(R.id.btn6);
    btn7 = (Button) findViewById(R.id.btn7);
    btn8 = (Button) findViewById(R.id.btn8);
    btn9 = (Button) findViewById(R.id.btn9);
    btnAdd = (Button) findViewById(R.id.btnAdd);
    btnSub = (Button) findViewById(R.id.btnSub);
    btnMul = (Button) findViewById(R.id.btnMul);
    btnDiv = (Button) findViewById(R.id.btnDiv);
    btnEq = (Button) findViewById(R.id.btnEq);

    btn0.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {

            textView1.append("0");
        }
    });

    btn1.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {

             if(newValue == true)
                 textView1.setText("1");
             else
                 textView1.setText(textView1.getText().toString() +  "1");

             newValue = false;
        }
    });

    btn2.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {

             if(newValue == true)
                 textView1.setText("2");
             else
                 textView1.setText(textView1.getText().toString() +  "2");

             newValue = false;
        }
    });

    btn3.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {

             if(newValue == true)
                 textView1.setText("3");
             else
                 textView1.setText(textView1.getText().toString() +  "3");

             newValue = false;
        }
    });

    btn4.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {

             if(newValue == true)
                 textView1.setText("4");
             else
                 textView1.setText(textView1.getText().toString() +  "4");

             newValue = false;
        }
    });

    btn5.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {

             if(newValue == true)
                 textView1.setText("5");
             else
                 textView1.setText(textView1.getText().toString() +  "5");

             newValue = false;
        }
    });

    btn6.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {

             if(newValue == true)
                 textView1.setText("6");
             else
                 textView1.setText(textView1.getText().toString() +  "6");

             newValue = false;
        }
    });

    btn7.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {

             if(newValue == true)
                 textView1.setText("7");
             else
                 textView1.setText(textView1.getText().toString() +  "7");

             newValue = false;
        }
    });

    btn8.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {

             if(newValue == true)
                 textView1.setText("8");
             else
                 textView1.setText(textView1.getText().toString() +  "8");

             newValue = false;
        }
    });

    btn9.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {

             if(newValue == true)
                 textView1.setText("9");
             else
                 textView1.setText(textView1.getText().toString() +  "9");

             newValue = false;
        }
    });

    btnAdd.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {

            i1 = Double.parseDouble(textView1.getText().toString());
            textView1.setText("");
            result = result + i1;
            textView1.setText(Double.toString(result));
            newValue=true ;  

        }
    });

    btnSub.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {

            i1 = Double.parseDouble(textView1.getText().toString());
            result = result - i1;
            textView1.setText(Double.toString(result));
            newValue=true ;  
            textView1.setText("");
        }
    });

    btnMul.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {
            i1 = Double.parseDouble(textView1.getText().toString());
            result = result * i1;
            textView1.setText(Double.toString(result));
            newValue=true ;  
            textView1.setText("");
        }
    });

    btnDiv.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {

            i1 = Double.parseDouble(textView1.getText().toString());
            result = result / i1;
            textView1.setText(Double.toString(result));
            newValue=true ;  
            textView1.setText("");

        }
    });

    btnEq.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {

            textView1.setText(Double.toString(result));
        }
    });

    btnClr.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {

            textView1.setText("");
            newValue=true;
            result = 0 ;
            i1=0;
        }
    });

    }

} 
```

以下是 XML 布局文件：

```
<AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+id/btn1"
    android:layout_width="44dp"
    android:layout_height="wrap_content"
    android:layout_x="6dp"
    android:layout_y="109dp"
    android:text="1" />

<Button
    android:id="@+id/btn2"
    android:layout_width="48dp"
    android:layout_height="wrap_content"
    android:layout_x="88dp"
    android:layout_y="108dp"
    android:text="2" />

<Button
    android:id="@+id/btn3"
    android:layout_width="44dp"
    android:layout_height="wrap_content"
    android:layout_x="174dp"
    android:layout_y="106dp"
    android:text="3" />

<Button
    android:id="@+id/btn4"
    android:layout_width="45dp"
    android:layout_height="wrap_content"
    android:layout_x="6dp"
    android:layout_y="184dp"
    android:text="4" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="30dp"
    android:layout_x="0dp"
    android:layout_y="4dp"
    android:text="" />

<Button
    android:id="@+id/btn5"
    android:layout_width="45dp"
    android:layout_height="wrap_content"
    android:layout_x="92dp"
    android:layout_y="186dp"
    android:text="5" />

<Button
    android:id="@+id/btn6"
    android:layout_width="45dp"
    android:layout_height="wrap_content"
    android:layout_x="175dp"
    android:layout_y="180dp"
    android:text="6" />

<Button
    android:id="@+id/btn7"
    android:layout_width="44dp"
    android:layout_height="wrap_content"
    android:layout_x="9dp"
    android:layout_y="261dp"
    android:text="7" />

<Button
    android:id="@+id/btn8"
    android:layout_width="44dp"
    android:layout_height="wrap_content"
    android:layout_x="94dp"
    android:layout_y="264dp"
    android:text="8" />

<Button
    android:id="@+id/btn9"
    android:layout_width="46dp"
    android:layout_height="wrap_content"
    android:layout_x="176dp"
    android:layout_y="263dp"
    android:text="9" />

<Button
    android:id="@+id/btn0"
    android:layout_width="45dp"
    android:layout_height="wrap_content"
    android:layout_x="96dp"
    android:layout_y="348dp"
    android:text="0" />

<Button
    android:id="@+id/btnAdd"
    android:layout_width="45dp"
    android:layout_height="wrap_content"
    android:layout_x="248dp"
    android:layout_y="105dp"
    android:text="+" />

<Button
    android:id="@+id/btnSub"
    android:layout_width="43dp"
    android:layout_height="wrap_content"
    android:layout_x="249dp"
    android:layout_y="181dp"
    android:text="-" />

<Button
    android:id="@+id/btnMul"
    android:layout_width="43dp"
    android:layout_height="wrap_content"
    android:layout_x="248dp"
    android:layout_y="267dp"
    android:text="X" />

<Button
    android:id="@+id/btnDiv"
    android:layout_width="44dp"
    android:layout_height="wrap_content"
    android:layout_x="248dp"
    android:layout_y="347dp"
    android:text="/" />

<Button
    android:id="@+id/btnEq"
    android:layout_width="44dp"
    android:layout_height="wrap_content"
    android:layout_x="176dp"
    android:layout_y="347dp"
    android:text="=" />

<Button
    android:id="@+id/btnClr"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_x="12dp"
    android:layout_y="346dp"
    android:text="Clear" />

</AbsoluteLayout> 
```

现在的问题是我没有找到任何方法来接收和存储来自用户的第二个操作数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:23:20.707

从您的代码看来，您的两个操作数都将输入到同一个`TextView`. 首先输入你的第一个操作数，然后按任意操作符，然后`TextView`第二个操作数将进入。此外，每个操作数似乎是由单独的按钮处理的，所以你只需要通过单击按钮来输入它们。

首先，输入您的第一个操作数，单击一个运算符，然后单击第二个操作数，然后单击`=`。这对你来说应该很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T06:09:18.657

```
'you can try this code..'
package com.example.showoff;

import java.util.ArrayList;
import android.os.Bundle;
import android.app.Activity;
import android.text.method.DigitsKeyListener;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

import android.widget.TextView;

public class MainActivity extends Activity {

        TextView edittest1;

        Button one, two, three, four, five, six, seven, eight, nine, zero, add, sub, mul, div, cancel, equal;

        ArrayList<Float> math = new ArrayList<Float>();
        float m1;
        float m2;
        float temp;

        int currentOperation = 0;
        int nextOperation;

        final static int ADD = 1;
        final static int SUBTRACT = 2;
        final static int MULTIPLY =3;
        final static int DIVISION = 4;
        final static int EQUALS = 0;
        final static int CLEAR = 1;
        final static int DONT_CLEAR = 0;
        int clearDisplay = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

            edittest1 = (TextView) findViewById(R.id.edittest1);

            one =(Button) findViewById(R.id.btnNum1Id);
            two =(Button) findViewById(R.id.btnNum2Id);
            three =(Button) findViewById(R.id.btnNum3Id);
            four =(Button) findViewById(R.id.btnNum4Id);
            five =(Button) findViewById(R.id.btnNum5Id);
            six =(Button) findViewById(R.id.btnNum6Id);
            seven =(Button) findViewById(R.id.btnNum7Id);
            eight =(Button) findViewById(R.id.btnNum8Id);
            nine =(Button) findViewById(R.id.btnNum9Id);
            zero =(Button) findViewById(R.id.btnNum0Id);
            add =(Button) findViewById(R.id.btnNumAddId);
            sub =(Button) findViewById(R.id.btnNumSubId);
            mul =(Button) findViewById(R.id.btnNumMulId);
            div =(Button) findViewById(R.id.btnNumDivId);
            cancel =(Button) findViewById(R.id.btnNumClearId);
            equal =(Button) findViewById(R.id.btnNumEqualId);

            edittest1.setKeyListener(DigitsKeyListener.getInstance(true,true));

            registerListeners();

    }

    private void registerListeners() {
        // TODO Auto-generated method stub

        one.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                if (clearDisplay == CLEAR) {
                    edittest1.setText("");
                }
                clearDisplay = DONT_CLEAR;
               edittest1.append("1");

            }
        });

        two.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                if (clearDisplay == CLEAR) {
                    edittest1.setText("");
                }
                clearDisplay = DONT_CLEAR;
                edittest1.append("2");

            }
        });

        three.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                if (clearDisplay == CLEAR) {
                   edittest1.setText("");
                }
                clearDisplay = DONT_CLEAR;
                edittest1.append("3");

            }
        });
        four.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                if (clearDisplay == CLEAR) {
                  edittest1.setText("");
                }
                clearDisplay = DONT_CLEAR;
                edittest1.append("4");

            }
        });

        five.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                if (clearDisplay == CLEAR) {
                   edittest1.setText("");
                }
                clearDisplay = DONT_CLEAR;
                edittest1.append("5");

            }
        });

        six.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                if (clearDisplay == CLEAR) {
                   edittest1.setText("");
                }
                clearDisplay = DONT_CLEAR;
                edittest1.append("6");

            }
        });
        seven.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                if (clearDisplay == CLEAR) {
                    edittest1.setText("");
                }
                clearDisplay = DONT_CLEAR;
                edittest1.append("7");

            }
        });

        eight.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                if (clearDisplay == CLEAR) {
                    edittest1.setText("");
                }
                clearDisplay = DONT_CLEAR;
                edittest1.append("8");

            }
        });

        nine.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                if (clearDisplay == CLEAR) {
                    edittest1.setText("");
                }
                clearDisplay = DONT_CLEAR;
                edittest1.append("9");

            }
        });
        zero.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                if (clearDisplay == CLEAR) {
                    edittest1.setText("");
                }
                clearDisplay = DONT_CLEAR;
                edittest1.append("0");

            }
        });
        add.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                calcLogic(ADD);
                }
            }
        );

        sub.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                calcLogic(SUBTRACT);
            }               
        });
        mul.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                calcLogic(MULTIPLY);

            }
        });
        div.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                calcLogic(DIVISION);                    
            }
        });
        equal.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                calcLogic(EQUALS);

            }
        });
        cancel.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                edittest1.setText("0");
                m1 = 0;
                m2 = 0;
                math.removeAll(math);
                currentOperation = 0;
                nextOperation = 0;    

            }
        });

}
    private void calcLogic(int operator){
         math.add(Float.parseFloat(edittest1.getText().toString()));

            if (operator != EQUALS) {
                nextOperation = operator;
            }
            else if  (operator == EQUALS){
                nextOperation = 0;
                //operator=' ';
            }

            switch (currentOperation) {
            case ADD:               
                m1 = math.get(0);
                m2 = math.get(1);

                math.removeAll(math);

                math.add(m1 + m2);

                edittest1.setText(String.format("%.3f", math.get(0)));

                break;
            case SUBTRACT:
                m1 = math.get(0);
                m2 = math.get(1);

                math.removeAll(math);

                math.add(m1 - m2);

                edittest1.setText(String.format("%.3f", math.get(0)));
                break;
            case MULTIPLY:
                m1 = math.get(0);
                m2 = math.get(1);

                math.removeAll(math);

                math.add(m1 * m2);

                edittest1.setText(String.format("%.3f", math.get(0)));
                break;
            case DIVISION:
                m1 = math.get(0);
                m2 = math.get(1);

                math.removeAll(math);

                math.add(m1 / m2);

                edittest1.setText(String.format("%.3f", math.get(0)));
                break;
            }

            clearDisplay = CLEAR;
            currentOperation = nextOperation;
            if (operator == EQUALS) {
                m1 = 0;
                m2 = 0;
                math.removeAll(math);
            }

        }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

# c# - 返回 NULL 的 TextBlock.GetBindingExpression

> ID：12033021
> 
> 赞同：8
> 
> 时间：2012-08-20T06:20:12.157
> 
> 标签：c#, .net, wpf

以下为我返回 NULL，知道为什么吗？

```
MultiBinding collectionRange = new MultiBinding();
collectionRange.Bindings.Add(new Binding("CurrentPosition") { Source = View });
collectionRange.Bindings.Add(new Binding("Count") { Source = View });
collectionRange.StringFormat = "{0} of {1}";
tbFooter.SetBinding(TextBlock.TextProperty, collectionRange);
var x = tbFooter.GetBindingExpression(TextBlock.TextProperty); 
```

MultiBinding 很好 - 属性有效并且它呈现在 UI 上..我似乎无法抓住绑定表达式（x 始终为 NULL）

我用这个方法错了吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-20T06:27:18.280

> 此方法实际上只是 BindingOperations.GetBindingExpression 方法的便捷包装。GetBindingExpression 将当前实例和 dp 参数传递给 BindingOperations.GetBindingExpression。
> 
> 如果您的绑定是 MultiBinding，请使用 BindingOperations.GetMultiBinding。

[请参阅此处](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.getbindingexpression.aspx)的“示例”部分中的“备注”部分和注释。

# javascript - 如何使用谷歌分析在页面重定向之前跟踪事件？

> ID：12033024
> 
> 赞同：10
> 
> 时间：2012-08-20T06:20:30.670
> 
> 标签：javascript, google-analytics

我使用 GA 的 trackEvent 记录用户在我的网站搜索自动完成时的点击事件。当用户单击自动完成项时，我记录了两个事件，然后页面重定向到结果页面。但问题是：“点击”和“查看”这两个动作的数量不相等，“点击”的数量>“查看”的数量。我看到这两个请求是在 firebug 中发送的，但是由于页面重定向，它们都被取消了。即使它们被取消，我也可以在 GA 中看到结果。我只是不明白为什么它们不相等？后一个有时会失败？

这是代码部分：

```
//trackEvent just use _gaq.push("trackEvent", xxx)
trackEvent("search", "click");
trackEvent("search", "view");
window.location.href = des; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-23T19:24:27.457

这是您的问题的答案：

[Google Analytics - 设置点击回调](https://developers.google.com/analytics/devguides/collection/analyticsjs/sending-hits#hitcallback)

# xml - Spring webservice客户端xml参数

> ID：12033038
> 
> 赞同：0
> 
> 时间：2012-08-20T06:21:49.783
> 
> 标签：xml, web-services, spring, parameter-passing

我的任务是创建一个简单的工具，调用一个特定的、基于 SOAP 的 Web 服务。

一般来说，我是 Java Spring 框架和 Web 服务的新手。我已经读了一段时间了。

到目前为止，我能够调用一个没有参数的方法并返回结果，但是我在向请求中添加参数时遇到了麻烦。

到目前为止的代码：

```
String msg = "<methodname xmlns=\"http://www.namespace.com/\">" +
                        "<param1>TEST</param1>"+
                        "<param2>TEST</param2>"+
                 "</methodname>";
    ApplicationContext appCon = new ClassPathXmlApplicationContext("appCon.xml");
    BeeSmartSpringConnector bee = (BeeSmartSpringConnector) appCon.getBean("BeeSmartConnector");
    bee.setDefaultUri("http://127.0.0.1:85/WebServices/TestBean?wsdl");
    bee.simpleSendAndReceive(msg); 
```

结果，Web 服务返回消息：

```
Required parameter not found! --&gt; Parameters : param1="null", param2="null" 
```

根据 WSDL 文件，这两个参数正是该方法所需要的。

你能告诉我我做错了什么吗？也许请求格式错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:42:47.850

将 msg 设置为...

```
String msg = "<ns:methodname xmlns:ns=\"http://www.namespace.com/\">" +
                        "<param1>TEST</param1>"+
                        "<param2>TEST</param2>"+
                 "</ns:methodname>"; 
```

# c++ - 信号化线程以启动特定功能

> ID：12033040
> 
> 赞同：1
> 
> 时间：2012-08-20T06:21:52.090
> 
> 标签：c++, multithreading, visual-studio-2010, visual-c++

我想将一些 CPU 密集型作业拆分为多个线程。我想用 4 个线程创建一个线程池。

我想知道非常快速的方法来执行以下操作：

1.  检查一个线程是否有空闲用于接收处理
2.  发信号通知一个线程以启动特定功能
3.  等待所有线程完成它们的工作

这应该尽可能快。我在 Windows 7 上的 Visual Studio 2010 中使用 C++。如果它比可移植方法更快，任何 Win7/VS2010 特定的解决方案都将是首选。

编辑：我在 MSDN 上找到了这个示例：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms686946(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686946(v=vs.85).aspx)

有没有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:28:59.410

第一种方式：[异步过程调用](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681951.aspx)。

另一种方式：[I/O Completion Ports](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365198.aspx)，可用于您的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T06:31:32.040

我不知道 Visual C++ 特定的线程池，但是我听说过一些`ppl.h`. [`boost threadpool`](http://threadpool.sourceforge.net/)我用过一个非官方的。和所有其他 boost 它在 Visual Studio 中编译得很好

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T06:35:30.903

Boost 线程库中的东西非常快。您可以启动 4 个线程，最终等待 boost::condition_variable。在主线程中，您可以将内容添加到任务队列，然后调用 boost::condition_variable::notify_one 以启动一个空闲线程（如果有）。一旦通知其中一个工作线程，它就会从任务队列中取出东西并继续这样做，直到队列为空。为了等待任务队列完成，让使任务队列为空的线程调用 boost::condition_variable::notify_all 并在主线程中等待该信号。显然，您需要使用互斥锁来保护这些东西的共享数据。

如果您有中型到大型的任务，并且几千或更少的任务应该在一秒钟内执行，这种技术就可以很好地工作。我没有使用这种技术处理较小任务的经验。

并行模式库 (PPL) 也非常擅长这些东西，它为您做了很多事情，但您没有那么多控制权。它仅适用于 Windows，但这对您来说似乎没问题。;)

* * *

编辑：您的链接似乎是一个很好的解决方案。使用 WINAPI 通常是您能做的最快的事情，因为其他 API 通常是在它的基础上构建的。然而，WINAPI 并没有提供很好的抽象。因此，我更喜欢 PPL、期货等来执行这样的任务。你的任务有多大？如果它们花费的时间超过几毫秒，那么您不必担心您正在使用的 api，因为这不是瓶颈。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T07:13:16.673

试试tbb

```
class SimpleTask: public tbb::task {

public:
    SimpleTask(const char *c ) {}
    task* execute() {
        //do task
        return 0;
    }
};
//execute tasks and wait
    tbb::task_scheduler_init init(50);//initialize pool
        tbb::task_list list;

        for(int i=0;i<30;i++){//create 30 task

            list.push_back(*new(tbb::task::allocate_root()) SimpleTask());
        }

tbb::task::spawn_root_and_wait(list);//execute and wait for all task or call spawn without wait 
```

# php - 在构造函数中设置 url

> ID：12033044
> 
> 赞同：1
> 
> 时间：2012-08-20T06:22:02.210
> 
> 标签：php

如果我在我的类中使用名为`$base_url = 'mydomain'`. 我怎样才能通过其他函数作为一般变量访问它？

我试过用创建一个测试函数，`echo $base_url`但它没有返回一个变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T06:23:37.270

使其成为类变量并使用`$this`

```
class MyClass {

    public $base_url; // change access modifier as needed

    public function __construct($base) {
        $this->base_url = $base;
    }

    public function getBaseUrl() {
        return $this->base_url;
    }

    public function url($url) {
        return $this->base_url . $url;
    }

}

$myClass = new MyClass('http://example.com/');
echo $myClass->url('register'); 
```

输出：`http://example.com/register`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:24:32.043

您必须`$base_url`在构造函数上方定义函数之外，然后通过`$this->base_url`.

# bash - 为什么 shell 脚本中的反引号不能帮助我 cd 到一个目录

> ID：12033046
> 
> 赞同：5
> 
> 时间：2012-08-20T06:22:10.947
> 
> 标签：bash, shell

我有一个带有以下代码的 shell 脚本：

```
dir=sample
`mkdir $dir`
`cp /home/bhavya/workspace/UnetStack/logs/log-0.txt $dir/log.txt`
`cd $dir` 
```

在反引号中的命令的最后一行`cd`，我无法`cd`进入相应的目录。但是一旦我删除了后面的引号，我就可以了`cd`。我想知道的是为什么没有`cd`后引号的工作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-20T06:33:19.813

当你跑的时候：

```
`mkdir $dir` 
```

shell 首先`mkdir $dir`在子shell 中运行命令，捕获其（标准）输出，然后将捕获的字符串作为命令运行。幸运的是，输出是空的，所以第二步什么也没执行。

然后当您运行时：

```
`cp /home/bhavya/workspace/UnetStack/logs/log-0.txt $dir/log.txt` 
```

副本在子shell中执行，输出被捕获并执行。同样，输出是空的，所以执行的第二阶段什么也没做。

然后你跑了：

```
`cd $dir` 
```

再一次，`cd`操作在一个子 shell 中运行，它在更改自己的当前工作目录后退出，但不影响父 shell（这是 Unix，不是 DOS`.bat`命令文件）。和以前一样，`cd`命令的输出被捕获并执行，但是输出是空的，所以没有什么可以执行的。

本质上，您不会像现在那样广泛使用反引号。

写下就足够了：

```
dir=sample
mkdir $dir
cp /home/bhavya/workspace/UnetStack/logs/log-0.txt $dir/log.txt
cd $dir
...other activity in the new directory... 
```

请注意，如果这是在脚本中，则执行脚本的正常方式仍会将父 shell 留在原始目录中。有一些方法可以让它影响原始 shell — 找出`.`命令（或者，在 中`bash`，`source`命令；这更容易搜索）。

您通常使用反引号（或者更好的`$(...)`符号）来捕获数据。例如：

```
gcc_lib_dir=$(dirname $(dirname $(which gcc)))/lib 
```

最里面的命令是`which gcc`; 它可能会产生`/usr/gcc/v4.7.1/bin/gcc`；内部`dirname`然后产生`/usr/gcc/v4.7.1/bin`；外部目录名产生`/usr/gcc/v4.7.1`；附加的`/lib`给出

```
gcc_lib_dir=/usr/gcc/v4.7.1/lib 
```

这也说明了为什么`$(...)`优于反引号表示法：

```
gcc_lib_dir=`dirname \`dirname \\\`which gcc\\\`\``/lib 
```

这更难正确，也更难打字！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T06:24:11.247

反引号在子 shell 中运行命令。子shell 更改了目录，但无法将其传播回脚本的shell。

# android - 如何在充当 USB 主机的 android 平板电脑中检测 USB？

> ID：12033051
> 
> 赞同：0
> 
> 时间：2012-08-20T06:22:18.940
> 
> 标签：android

我尝试在[USB Host](http://developer.android.com/guide/topics/connectivity/usb/host.html)的代码的帮助下开发一个示例应用程序。

```
public class MainActivity extends Activity {

UsbManager manager;
HashMap<String, UsbDevice> deviceList;
Button scanButton;
UsbDevice device;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    scanButton = (Button)this.findViewById(R.id.button1);
    scanButton.setOnClickListener(new OnClickListener ()
    {
        public void onClick(View v) 
        {
            checkForDevices ();
        }
    });
}

@Override
public void onResume ()
{
    super.onResume();
    checkForDevices ();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

protected void checkForDevices ()
{
    manager = (UsbManager) getSystemService(Context.USB_SERVICE);

    deviceList = manager.getDeviceList();
    device = deviceList.get("deviceName");
    //Collection<UsbDevice> devices = deviceList.values();

   if (device != null)
       Toast.makeText(this, "Device Found", Toast.LENGTH_LONG).show();
   else
       Toast.makeText(this, "Device NOT Found", Toast.LENGTH_LONG).show();
}
} 
```

当我在连接 USB 设备的情况下运行此代码时，我将 Toast 显示为“未找到设备”。

谁能帮我解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:26:02.417

检查您的设备是否支持主机模式。试试这个也许这可能会有所帮助：[Android USB 主机和隐藏设备](https://stackoverflow.com/questions/11183792/android-usb-host-and-hidden-devices)

# c++ - 如何默认包含某些头文件，这样我就不必在每个程序中都输入它们

> ID：12033052
> 
> 赞同：1
> 
> 时间：2012-08-20T06:22:19.523
> 
> 标签：c++, c

如何默认包含某些头文件，这样我就不必在每个程序中都输入它们：在 dev c++ 和 code::blocks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T06:27:24.683

制作一个全局头文件，该文件又包含您在每个项目中需要的任何文件，然后您只需包含该单个文件。

但是，我建议不要这样做，除非您所有不同的项目都非常相似。不同的项目有不同的需求，也需要不同的头文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T06:27:36.423

您*可以*在项目文件中发出编译器指令或制作脚本来执行“每个项目”包含，但总的来说我会避免这种情况。

源代码对于任何读者来说都应该尽可能的清晰，只要它的内容。每当我有显着改变其语义的源代码时，例如。通过我不知道的标题，这可能会很混乱。

最重要的是，如果您为某些不需要它们的编译单元“注入”这些头文件，则会对编译时间产生负面影响。

作为替代，如何引入`common.h/hpp`包含这些特定头文件的头文件？然后，您可以在所有需要它们的文件中包含您的公共标题，*并*一次更改所有依赖文件的公共标题集。[它还为使用预编译的头文件](http://en.wikipedia.org/wiki/Precompiled_header)打开了大门，这可能值得你看看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T07:37:45.033

来自 GCC 文档（AFAIK GCC 是您引用的开发环境使用的默认编译器）

> -包含文件
> 
> 处理文件，好像#include "file" 出现在主要源文件的第一行。但是，搜索文件的第一个目录是预处理器的工作目录，而不是包含主源文件的目录。如果在此处未找到，则会在 #include "..." 搜索链的其余部分中正常进行搜索。
> 
> 如果给出了多个 -include 选项，则文件将按照它们在命令行中出现的顺序被包含在内。
> 
> -macros 文件
> 
> 与 -include 完全一样，只是扫描文件产生的任何输出都会被丢弃。它定义的宏保持定义。这允许您从标头获取所有宏，而无需处理其声明。
> 
> -imacros 指定的所有文件都在 -include 指定的所有文件之前处理。

但使用这些通常是个坏主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T06:28:37.363

Dev c++ 与 MingW 编译器一起工作，这是 Windows 的 gcc 编译器。Gcc 支持预编译头文件，所以你可以试试。预编译头文件是您希望编译并添加到项目中每个目标文件的头文件。尝试在 Google 中搜索以获取一些信息。

Code::blocks 也支持它们，当与 gcc 一起使用时，甚至更好，所以它可能更容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T12:27:21.287

如果您选择的编辑器支持宏，请创建一个添加您喜欢的包含文件集的编辑器。一旦完成，你所要做的就是调用你的宏来省去重复输入，你就可以了。

希望这可以帮助。

# android - lib是否捆绑在APK中

> ID：12033053
> 
> 赞同：3
> 
> 时间：2012-08-20T06:22:20.660
> 
> 标签：android, dalvik

我已经在我的项目根目录中添加了一个 libs 文件夹，并且这些 libs 包含两个 jar 文件。当我编译源代码时，我会创建 APK。当我解压 APK 时，我看不到其中的 libs 文件夹？为什么这种行为，因为我认为库应该与 APK 捆绑在一起？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T06:28:59.660

我相信所有必要的类都放在 dex 文件中（Dalvik VM 可执行文件）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T06:30:12.680

当您包含一个然后相关代码从那里转换为与您自己的代码`jar`相同的字节码时，这一切都成为. 它是您在 C/C++ 中使用 NDK 为您的项目创建的本机库，它们作为文件捆绑到您的 apk 中。因为它们不是Java。`dex``apk``*.so``*.so`

# objective-c - CATransition 还为导航栏设置动画

> ID：12033054
> 
> 赞同：0
> 
> 时间：2012-08-20T06:22:27.380
> 
> 标签：objective-c, uiview, uinavigationcontroller, catransition

我想制作一个自定义动画来弹出我的导航控制器。我只想为视图设置动画，而不是导航栏。使用此代码，我为视图和导航栏设置了动画。我怎样才能只为视图设置动画？

```
CATransition* transition = [CATransition animation];
transition.duration = 0.3;
transition.type = kCATransitionFade;
transition.subtype = kCATransitionFromTop;

[self.navigationController.view.layer addAnimation:transition forKey:kCATransition];
[self.navigationController popViewControllerAnimated:NO]; 
```

当按下导航控制器栏中添加的自定义后退按钮时，将触发此代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:50:09.823

`popRootViewController:`这是一个为后退按钮和调用方法时执行自定义动画的代码。

这是一个扩展的类，`UINavigationViewController`它本身与 Apple 的文档相矛盾，它还使用 KVO 分配私有变量，一旦工程师更改`UINavigationController`类，它可能会停止工作，因此使用它需要您自担风险。

```
#import "MyNavigationController.h"

@interface MyNavigationController () <UINavigationBarDelegate> {
    // Flag that we will use to avoid collisions between navgiation bar
    // when we call popViewControllerAnimated: method directly
    BOOL _isPopping;
}
- (UIViewController *)myPopViewControllerAniamted:(BOOL)animated;
@end

@implementation MyNavigationController

- (id)init
{
    self = [super init];
    if (!self) return nil;
    // We can't intercept delegation of the original navigation bar,
    // we have to replace it with our own, by assigning new instance to
    // the private _navigationBar vairable
    UINavigationBar *navigationBar = [[UINavigationBar alloc] init];
    navigationBar.delegate = self;
    [self setValue:navigationBar forKey:@"_navigationBar"];

    return self;
}

// This is the delegate method called when you're about to pop navigation item
- (BOOL)navigationBar:(UINavigationBar *)navigationBar shouldPopItem:(UINavigationItem *)item
{
// If we're in the process of popping items we don't want to reenter
    if (!_isPopping) {
        [self myPopViewControllerAniamted:YES];
    }
    return YES;
}

// Similarly we have to override popToRootViewControllerAnimated:
// The only difference would be that we use not previous view as a
// target for the transfition, but the very first view
- (UIViewController *)popViewControllerAnimated:(BOOL)animated
{
    return [self myPopViewControllerAniamted:animated];
}

// Our custom popping method
- (UIViewController *)myPopViewControllerAniamted:(BOOL)animated
{
    _isPopping = YES;
    // If we got here, we have at least two view controllers in the stack
    UIViewController *currentViewController = self.topViewController;
    if (animated && self.viewControllers.count > 1) {
        UIView *currentView = currentViewController.view;
        UIViewController *previousViewController = [self.viewControllers objectAtIndex:self.viewControllers.count - 2];
        UIView *previousView = previousViewController.view;
        previousView.alpha = 0.0;
        [currentView.superview insertSubview:previousView belowSubview:currentView];
        // I use UIView just for the sake of the simplicity of this example
        // In case of core animation you will have to deal with delegates
        // to trigger view controller popping when animation finishes
        [UIView animateWithDuration:0.33 delay:0.0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
            currentView.alpha = 0.0;
            previousView.alpha = 1.0;
        } completion:^(BOOL finished) {
            [super popViewControllerAnimated:NO];
            _isPopping = NO;
        }];
    } else {
        [super popViewControllerAnimated:NO];
        _isPopping = NO;
    }
    return currentViewController;
}

@end 
```

再一次，它纯粹是作为可能的练习而完成的，我强烈建议阅读[UIViewController 指南](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html)，也许[Container View Controller](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)可以满足您作为自定义视图控制器行为的指定方式的需求。

希望能帮助到你！

# javascript - 如何在fancybox终止加载后调用javascript函数

> ID：12033055
> 
> 赞同：1
> 
> 时间：2012-08-20T06:22:36.557
> 
> 标签：javascript, jquery, fancybox

我这样称呼fancybox：

```
$(".add_exc").fancybox({
    maxWidth    : 1000,
    maxHeight   : 600,
    fitToView   : false,
    height      : '70%',
    autoSize    : true,
    closeClick  : false,
    openEffect  : 'none',
    closeEffect : 'none'
}); 
```

哪里`.add_exc`是：

```
<a class="add_exc fancybox.ajax" href="ajax_content.php">
    <img src="click.png" />
</a> 
```

在 ajax 内容中，我有一些复选框，如果存在某些元素，我需要检查父窗口内部，以便我可以检查 fancybox 中的复选框。

如果我在 ajax 内容中加载 javascript 内容，它将被丢弃。

我该如何解决？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:33:05.927

您可以尝试使用 fancybox 回调`afterLoad`

```
$(".add_exc").fancybox({
    // all other API options
    closeEffect : 'none',
    afterLoad : function(){
     myFunction();
     // or some jQuery
     $variable = $(".selector:checked").val();
    }
}); 
```

# iphone - 时间模式下的 UIDatePicker - 如何获取唯一的“小时值”

> ID：12033056
> 
> 赞同：1
> 
> 时间：2012-08-20T06:22:41.210
> 
> 标签：iphone, ios, datepicker

我想知道如何从`UIDatePicker`.

基本上，它获取时间值，例如从（例如）`13:34`收集。`[dateFormatter stringFromDate:datePicker.date]`

但是我想得到的是；只有小时值 → 13 而不是 13:34

如果有人显示源代码的一部分，将会有很大帮助。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T06:25:16.940

```
NSDateFormatter *timeFormat = [[NSDateFormatter alloc] init];
[timeFormat setDateFormat:@"HH"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T06:28:51.623

您需要更新 dateFormatter 的日期格式以获得您想要的。例如：

```
[dateFormatter setDateFormat:@"HH"];
NSString *hourString = [dateFormatter stringFromDate: datePicker.date]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T06:30:08.020

```
> NSDateFormatter *datePickerFormat = [[NSDateFormatter alloc] init];
> [datePickerFormat setDateFormat:@"HH"]; 
> NSString *datePickerStringToSave = [datePickerFormat stringFromDate:datePicker.date]; 
 NSLog(@"%@",datePickerStringToSave); 
```

有关日期格式模式的更多信息，请查看这些[http://unicode.org/reports/tr35/tr35-6.html#Date_Format_Patterns](http://unicode.org/reports/tr35/tr35-6.html#Date_Format_Patterns)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-05-10T10:40:02.113

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"HH"];
NSString *hour=[formatter stringFromDate:[timePicker date]]; 
```

# abap - BSP 应用程序：客户端 IP 地址

> ID：12033059
> 
> 赞同：0
> 
> 时间：2012-08-20T06:23:13.167
> 
> 标签：abap, sap-bsp

是否可以在 SAP BSP 应用程序中读取客户端 IP 地址？我们想保存 ip 以备后用。

通过 DMZ 中的 WebDispatcher 连接到 SAP WAS。

谢谢，h。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:48:30.843

这是一个如何执行此操作的快速示例；创建一个控制器并实现`DO_REQUEST`如下：

```
method do_request.
  data remote_ip type string.
  remote_ip = request->get_header_field( `~remote_addr` ).
  write( remote_ip ).
endmethod. 
```

编辑：虽然我无法使用网络调度程序对此进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:02:57.160

通常，这应该是可能的，但由于您在 Web Dispatcher 后面，我会说您只会看到 Web Dispatcher 的 IP。您可能必须在那里而不是在 BSP 应用程序中实现某种日志记录。

# iphone - 如何在 iOS 应用中实现互斥锁

> ID：12033060
> 
> 赞同：3
> 
> 时间：2012-08-20T06:23:13.220
> 
> 标签：iphone, ios

> **可能重复：**
> [GCD：如何从两个线程写入和读取变量](https://stackoverflow.com/questions/11070947/gcd-how-to-write-and-read-to-variable-from-two-threads)

我正在开发一个使用 sqlite 数据库的 iOS 应用程序。我必须执行多线程，但在 sqlite 数据库上我一次只能做一件事。所以我需要实现信号量的概念。所以请帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T06:37:29.980

您可以将该`@synchronized`指令用作互斥体。如果您有在使用单例创建并在整个项目中共享的单个数据管理器中操作 sqlite 数据库的所有方法，则可以使用该对象作为锁定令牌，例如：

```
- (void)myMethod:(id)globalDataManager {
    @synchronized(globalDataManager) {
        // Everything between the braces is protected by the @synchronized directive.
    }
} 
```

在数据管理器中，您可以使用`@synchronized(self)`相同的保护。

为此，您只需要一个互斥体，因此不必担心用于实现信号量的额外代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:39:47.927

> 我需要实现信号量的概念

信号量实现位于`#include <sys/semaphore.h>`.

# iphone - SECURITY_ERR：DOM 异常 18：在 iphone 电子邮件作曲家中

> ID：12033063
> 
> 赞同：2
> 
> 时间：2012-08-20T06:23:20.280
> 
> 标签：iphone, sql, cordova

我有一个带有电子邮件编写器和数据库连接的 ios 应用程序。发送电子邮件并返回主页后，我收到一条错误消息“security_err dom exception 18”。我认为问题在于在关闭电子邮件编写器后连接数据库。

这是我的数据库连接代码

```
var connection = null;
var name = "dbname";
var version = "1.0";
var display_name = "displaname";
var size = 200000;
    try{
        if(connection == null)
            connection = window.openDatabase(name, version, display_name, size);
        }
    catch(e){
        alert("SQL Error: "+e);
        return;
    } 
```

任何人都可以帮我解决它吗？

# java - 发送错误信息 在行动

> ID：12033064
> 
> 赞同：1
> 
> 时间：2012-08-20T06:23:36.823
> 
> 标签：java, struts, action, message

我正在操作中执行一些操作，并希望在某些数据输入不在有效范围内时显示错误消息。我们通常使用 javascript 方法进行预检查，但在这种情况下，我无法达到我需要检查的变量的值。

显示错误信息的网页部分是strut部分

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:57:02.863

您可以使用表单验证方法进行验证。在提交表单之前，它将检查您的条件。

例子 ：-

```
public ActionErrors validate(ActionMapping mapping,
            HttpServletRequest request) {

         //Write your code for range checking here

            return errors;
    } 
```

除了，这种方法很少有你需要做的设置`ApplicationResources.property file`

# java - 在scala中使用java格式化程序

> ID：12033066
> 
> 赞同：3
> 
> 时间：2012-08-20T06:23:41.963
> 
> 标签：java, scala

我正在将其他人的 java 代码转换为 scala（出于好奇，这是[这里](http://mallet.cs.umass.edu/topics-devel.php)的示例），并且在以下内容上遇到了编译器错误（稍微简化了）：

```
var out = new Formatter(new StringBuilder(), Locale.US)
out.format("%s-%d ", someObject, someInteger); 
```

这是我收到的错误消息：

```
[error]   (java.util.Locale,java.lang.String,<repeated...>
[java.lang.Object])java.util.Formatter <and>
[error]   (java.lang.String,<repeated...>[java.lang.Object])java.util.Formatter
[error]  cannot be applied to (java.lang.String, java.lang.Object, Int)
...
[error] one error found 
```

如果我将第二行更改为：

```
out.format("%s-%d ", someObject, someInteger.asInstanceOf[Object]); 
```

有人可以解释这是为什么吗？

这是否意味着在 java 中可以传递需要对象参数但在 scala 中不行的整数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T14:31:03.653

其他答案都添加了一些东西，但我不确定他们是否解释了问题所在。

这一切都归结为`Int`在 Scala 中是一个类，而`int`在 Java 中是一个原语。因此，在 Java 中，当您编写一个方法需要一个`Object`并且您传递一个`int`时，Java 会*自动*将其装箱在一个`java.lang.Integer`.

现在，Java 在 Scala 中的*等价*物`java.lang.Object`是`AnyRef`，但`Int`不是. 有一个合适的类型：. An既可以包含 Java 的子类，也可以包含Java 中的原语。如果您说一个方法期望并传递一个，那么它将被自动装箱，但不是 for 。*`AnyRef``Any``Any``java.lang.Object``Any``Int``AnyRef`*

 *因此，每当您与 Java 交互并且方法希望您传递装箱的原语时，您必须自己强制装箱。您可以在 Scala 中创建一个期待的方法`Any`，然后将其转换为`AnyRef`并调用 Java 等价物，以便在您要经常调用该方法时使事情变得更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T06:29:36.940

您没有指定如何`someInteger`定义，但我假设您正在尝试执行以下操作：

```
val someObject: Object = "this"
val someInteger = 3

var out = new Formatter(new StringBuilder(), Locale.US)
out.format("%s-%d ", someObject, someInteger); 
```

问题是当你`someInteger = 3`在 Scala 中说变量时，变量是 Scala 的`Int`而不是 Java 的`int`，而 Java`Formatter`不知道如何处理它。

如果您将声明更改为使用 Java 可以理解的整数类型，那么它就可以正常工作。例如：

```
import java.lang.Integer

val someInteger = new Integer(3) 
```

至于为什么丑陋的`asInstanceOf`版本有效？快速检查 REPL 会告诉你发生了什么：

```
scala> 3.asInstanceOf[java.lang.Object].getClass
res0: java.lang.Class[_ <: java.lang.Object] = class java.lang.Integer 
```

因此，当您调用`.asInstanceOf[java.lang.Object]`一个时`Int`，Scala 会返回一个`java.lang.Integer`.

但实际上，您应该以更类似于 Scala 的方式重写代码。如果你这样做了，安德鲁·麦卡勒姆会更开心。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T06:43:05.750

java和scala中的类层次结构不一样。 `java.lang.Object`在java中位于层次结构的根部。在 scala 中，`Any`类型位于根目录。因此，任何东西都可以传递给带有 type 参数的函数`Any`。但是，只能`java.lang.Object`将 的子类型传递给接受类型参数的函数`java.lang.Object`。

更糟糕的是，有两种类型的整数。有 scala 的 Int 类型和 java.lang.Integer。前者是在 scala 中将某些内容设置为数字文字时通常会得到的。后者是你得到的`new Integer(3)`or `3.asInstanceOf[Integer]`。事实证明，scala Int 不是从 java.lang.Object 继承的，而是 java.lang.Integer 继承的。因此，您不能将 scala Int 作为期望 java.lang.Object 的参数传递。这就是为什么这在scala中不起作用的原因。

Java 的故事有点奇怪。过去，java`int`无法传递到预期对象的位置；您需要将它们显式转换为`java.lang.Integer`. 但是，最近的一项更改（版本 5）会自动为您执行此操作。这称为自动装箱或拆箱，具体取决于转换的方式。所以这就是它在java中工作的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T06:40:58.447

正如 dhg 所说，scala 编译器将 Scala int 类型视为与 Java int 类型不同。您可以尝试导入`JavaConversions`隐式，看看是否有帮助。我不太了解确切的区别（我原以为它会对它们一视同仁）。

或者，您可以使用 Scala 格式化工具：

```
val someObject: Object = "this"
val someInteger = 3
val out = "%s-%d ".format(someObject, someInteger) 
```*

# c++ - 将此资源加载到单元测试 DLL 中该怎么办？

> ID：12033067
> 
> 赞同：0
> 
> 时间：2012-08-20T06:23:42.507
> 
> 标签：c++, windows, visual-c++, visual-studio-2012

我刚刚将我的所有测试从 Google Test 移植到 Visual Studio 2012 的单元测试框架。（长话短说；Google 的断言更好，但 Microsoft 使用开箱即用的 Dev11 单元测试资源管理器，这使得代码覆盖率变得非常容易......）

我把所有东西都移植好了，除了下面的类，它从 Win32 资源中读取一个以换行符分隔的文本文件，然后允许对该资源进行快速查找：

```
#include "pch.hpp"
#include "resource.h"
#include <functional>
#include <algorithm>
#include <iostream>
#include <iterator>
#include <boost/algorithm/string/split.hpp>
#include <boost/algorithm/string/case_conv.hpp>
#include <windows.h>
#include "Win32Exception.hpp"
#include "Whitelist.hpp"

using Instalog::SystemFacades::Win32Exception;

namespace Instalog {

    Whitelist::Whitelist( __int32 whitelistId , std::vector<std::pair<std::wstring, std::wstring>> const& replacements )
    {
        using namespace std::placeholders;

        HRSRC resourceHandle = ::FindResource(0, MAKEINTRESOURCEW(whitelistId), L"WHITELIST");
        if (resourceHandle == 0)
        {
            Win32Exception::ThrowFromLastError();
        }
        HGLOBAL resourceGlobal = ::LoadResource(0, resourceHandle);
        if (resourceGlobal == 0)
        {
            Win32Exception::ThrowFromLastError();
        }
        void * resourceData = ::LockResource(resourceGlobal);
        if (resourceData == 0)
        {
            Win32Exception::ThrowFromLastError();
        }
        wchar_t const* resourceDataCasted = static_cast<wchar_t const*>(resourceData);
        DWORD resourceLen = ::SizeofResource(0, resourceHandle);
        auto sourceRange = boost::make_iterator_range(resourceDataCasted, resourceDataCasted + (resourceLen / sizeof(wchar_t)));
        boost::algorithm::split(innards, sourceRange, std::bind1st(std::equal_to<wchar_t>(), L'\n'));
        std::for_each(innards.begin(), innards.end(), std::bind(boost::algorithm::to_lower<std::wstring>, _1, std::locale()));
        std::for_each(innards.begin(), innards.end(), [&replacements] (std::wstring &a) {
            std::for_each(replacements.begin(), replacements.end(), [&a] (std::pair<std::wstring, std::wstring> const&b) {
                if (boost::algorithm::starts_with(a, b.first))
                {
                    a.replace(a.begin(), a.begin() + b.first.size(), b.second);
                }
            });
        });
        std::sort(innards.begin(), innards.end());
    }

    bool Whitelist::IsOnWhitelist( std::wstring checked ) const
    {
        boost::algorithm::to_lower(checked);
        return std::binary_search(innards.begin(), innards.end(), checked);
    }

    void Whitelist::PrintAll( std::wostream & str ) const
    {
        std::copy(innards.begin(), innards.end(), std::ostream_iterator<std::wstring, wchar_t>(str, L"\n"));
    }

} 
```

不幸的是，Dev11 的测试项目生成的是 DLL，而不是 EXE，就像在 Google Test 的系统下一样。因此，在我能够将资源嵌入 EXE 并传递`NULL`给`FindResource`的第一个参数之前，现在 Visual Studio 在测试期间将 DLL 加载到其进程中。Visual Studio 里面当然没有我的自定义`WHITELIST`资源类型，所以这段代码很糟糕。

有什么办法可以吗

1.  告诉这段代码以某种方式查看正确的二进制文件，无论是测试 DLL 还是 EXE，取决于上下文？（目前此代码位于与真实 EXE 和测试 DLL 链接的静态库中）或
2.  在完全不使用 Win32 资源基础结构的情况下，将相对较大（几 MB）的文本文件干净地嵌入到 C++ 程序中？

应该注意的是，将资源放入附属 DLL（这可能是一个合理的解决方案）不是一种选择；该项目的一个要求是单个 EXE xcopy 部署。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T17:06:22.080

弄清楚了。我在`GetCurrentModule`这里使用了 hack ->[如何获取当前执行代码的 HMODULE？](https://stackoverflow.com/questions/557081/how-do-i-get-the-hmodule-for-the-currently-executing-code). 这给了我需要传递给 XxxResource API 的 HMODULE。

# php - 如何将二维数组的第二个值加在一起？

> ID：12033075
> 
> 赞同：0
> 
> 时间：2012-08-20T06:24:18.737
> 
> 标签：php

我有一个二维数组。

```
arr["id1"][10]
arr["id2"][20] 
```

如何将每个项目的第二个值加在一起。

例如 10 + 20 = 30（返回）

我需要遍历数组中的所有项目并将第二个值加在一起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T06:32:23.727

```
$res = 0;

foreach($arr as $v) {
  $res += $v;
} 
```

像这样，您将每个项目的值添加到 $res

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T06:35:56.577

这太奇怪了，但我有心情解决一些难题。

```
<?php

$odd_data["id1"][10] = 'Food item one';
$odd_data["id2"][20] = 'Food item two';

echo add_the_second_array_keys_of_the_array($odd_data);

function add_the_second_array_keys_of_the_array($odd_data)
{
   $total = 0;
    foreach($odd_data as $id)
    {
        foreach($id as $number=>$the_message)
        {
            $total += $number;   
        }
    }
    return $total;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T07:22:03.233

```
function collapse($array){
  return array_keys($array)[0];
}
print array_sum(array_map('collapse', $arr)); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-20T06:30:22.823

```
$result = array();

function sort($arr) {
    for($i=0; $i < sizeof($arr); $i+2)
    {
        $result[$i] = $arr[$i] + $arr[$i+1];
    }
} 
```

这将有结果存储总和值。（键的虽然会跳 2 例如 1, 3, 5 ...）

# c# - 如何在 ResourceManager 中找到可用的资源文化？

> ID：12033079
> 
> 赞同：7
> 
> 时间：2012-08-20T06:24:38.643
> 
> 标签：c#, .net, localization

我有一种情况，我想为我的应用程序提供一个“可用语言”的列表（顺便说一下，如果有可能的话，它是一个 ASP .NET MVC 3 应用程序）。我认为我可以以某种方式自动获取此列表，因为它应该只是构建中包含的 resx 文件（我不需要支持英语英国、德国奥地利或任何东西，只需要英语或德语），我想出了我将在下面介绍的方案（作为单例实现，因为它有点密集的方法）。

问题是，即使我没有这样的资源，在某些机器上它也会返回“阿拉伯语”，而在我的机器上（因为我安装了 VS 2012）它会返回所有这些资源（这对我来说比只返回两种真实文化加上阿拉伯语更有意义但似乎 ResourceManager 并不是为了让我获得这些信息而设计的，所以我可能不应该抱怨）。这是方案...

（我有一个 Strings.resx 和一个 Strings.de.resx 文件）

```
IEnumerable<CultureInfo> cultures =
    CultureInfo.GetCultures(CultureTypes.NeutralCultures)
        .Where(c =>
                   {
                       // Exclude the invariant culture and then load up
                       // an arbitrary string so the resource manager
                       // loads a resource set, then get the set for the
                       // current culture specifically and it is, sometimes
                       // (I thought always but I was wrong) null if no
                       // set exists
                       if (c.LCID == CultureInfo.InvariantCulture.LCID)
                           return false;

                       var rm = Strings.ResourceManager;
                       rm.GetString("HELLO", c);
                       return rm.GetResourceSet(c, false, false) != null;
                   }); 
```

所以我想，好吧，我可以根据特定语言的目录是否存在来做到这一点，如下所示：

```
var neutralCulture = new[]
{
    CultureInfo
        .CreateSpecificCulture(((NeutralResourcesLanguageAttribute)
                                Assembly
                                    .GetExecutingAssembly()
                                    .GetCustomAttributes(
                                        typeof (NeutralResourcesLanguageAttribute),
                                        false)[0])
                                .CultureName)
};

IEnumerable<CultureInfo> cultures =
    CultureInfo.GetCultures(CultureTypes.NeutralCultures)
        .Where(c => Directory.Exists(c.TwoLetterISOLanguageName))
        .Union(neutralCulture); 
```

这个“有效”（它返回英语和德语）但我认为这不是一个非常稳定的方法，因为它容易出现随机问题，比如有人创建文件夹并将其全部扔掉。我可能可以通过一些更明智的检查来缓解这些问题（where 子句迫切需要更复杂），但这是问题（最后）......

现在我正在考虑只使用一个配置文件并保持它完全简单，因为我真的不喜欢我必须去的地方，但是有没有更好的方法来做到这一点（或者：它可以以安全的方式自动完成） ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:37:14.813

我喜欢你的第二种自动检测方法。我要补充一点，您应该只执行一次（在应用程序启动时或作为静态构造函数的一部分）并将其设为静态，而不是在每次请求支持的文化信息时计算它。

我认为配置方法也可以，尽管它不是真正自动的。对于这种情况，我唯一的想法是，如果您正在为一种语言进行本地化，那么它就不会在雷达下潜入您的应用程序。话虽如此，此时添加配置值似乎是一件容易的事（或忘记做）。

我不知道 .NET Framework 中内置了任何东西来通过方法调用为您提供此信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-10T12:11:07.253

我发现没有有效和可靠的方法来做到这一点。

**在我的每个程序集中，我都编写了这样的代码来引用支持的文化。**这就是我们所能做的。添加本地化时，您必须记住更新此数组。

```
internal static class ThisAssembly
{
    static readonly string[] SupportedCultures = new string[] { "en-US", "de-DE", };
} 
```

我也尝试过：

*   枚举加载的卫星程序集：没有办法；
*   获取值`ResourceManager._resourceSets`：加载集的字典给出正确和无效的值。

但无济于事。

# iphone - 全局使用 MBProgressHUD + 使其成为单例

> ID：12033080
> 
> 赞同：25
> 
> 时间：2012-08-20T06:25:04.020
> 
> 标签：iphone, ios, singleton, mbprogresshud

在我的项目中，每个用户交互事件都会进行一次网络调用（这是 TCP，而不是 HTTP）。我需要 Activity Indicator 是全局的，以便随机**显示**`UIViewController`并 **隐藏**Class（处理网络活动的自`NetworkActivityManager`定义类，它不是 UIViewController 或 UIView 的子类）。

在网上搜索后，我发现**MBProgressHUD**用于相同目的，但我无法找到有关如何在全球范围内使用它的示例。（通过说全局，我的意思是**MBProgressHUD**的单例对象和显示和隐藏它的类方法。）

以下是我尝试过的，但是失败了：在**AppDelegate.h 中：**

`@property (nonatomic, retain) MBProgressHUD *hud;`

在**AppDelegate.m 中：**

`@synthesize hud;`

在一些随机的 UIViewController 对象中：

```
appDelegate.hud = [MBProgressHUD showHUDAddedTo:appDelegate.navigationController.topViewController.view animated:YES];
appDelegate.hud.labelText = @"This will take some time."; 
```

在隐藏它的同时，从`NetworkActivityManager`类：

```
[MBProgressHUD hideHUDForView:appDelegate.navigationController.topViewController.view animated:YES]; 
```

这会使项目在一段时间后崩溃（由于内存问题。）我在我的项目中使用 ARC，而且，我正在使用**MBProgressHUD**的 ARC 版本。

我错过了什么吗？

**重要问题：**

我可以让**MBProgressHUD**像 UIAlertView 一样工作吗？（说我的意思是独立于 UIView 的**MBProgressHUD**的实现——它`showHUDAddedTo:`用来展示自己的 sa）？？？

请注意：在上述隐藏 MBProgressHUD 的代码中，显示 MBProgressHUD 时的 View 可能会发生变化。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-08-22T11:40:17.350

您可以将其添加到您喜欢的课程中：

```
+ (MBProgressHUD *)showGlobalProgressHUDWithTitle:(NSString *)title {
    UIWindow *window = [[[UIApplication sharedApplication] windows] lastObject];
    MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:window animated:YES];
    hud.labelText = title;
    return hud;
}

+ (void)dismissGlobalHUD {
    UIWindow *window = [[[UIApplication sharedApplication] windows] lastObject];
    [MBProgressHUD hideHUDForView:window animated:YES];
} 
```

这可以在任何类上调用。使用这些类便捷方法时，您不需要对 HUD 保持强引用。

根据您的具体情况，您可能还需要处理在隐藏另一个 hud 之前请求新 hud 的情况。当一个新的进来或想出某种排队等时，你可以隐藏以前的 hud。

在显示新 HUD 实例之前隐藏之前的 HUD 实例非常简单。

```
+ (MBProgressHUD *)showGlobalProgressHUDWithTitle:(NSString *)title {
    UIWindow *window = [[[UIApplication sharedApplication] windows] lastObject];
    [MBProgressHUD hideAllHUDsForView:window animated:YES];
    MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:window animated:YES];
    hud.labelText = title;
    return hud;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-14T09:04:54.720

# 笔记...

与许多 iOS 问题一样，这现在已经彻底过时了。

这些天你肯定只是用一个微不足道的

# 容器视图

对于这样的任何问题。

初学者的完整容器视图教程..[教程！](https://stackoverflow.com/a/23403979/294884)

MBProgressHUD 在当时是一个神奇的解决方案，因为苹果的管道中有一个“巨大的漏洞”。

但是（就像过去的许多美好事物一样），现在这只是历史。今天不要做这样的事。

* * *

只是 FWIW，2014，这是我们使用的一个非常简单的设置。根据大卫劳森...

```
UIWindow *window = [[UIApplication sharedApplication] delegate].window 
```

正如 Matej 所说，只需使用 AppDelegate ......

```
#define APP ((AppDelegate *)[[UIApplication sharedApplication] delegate]) 
```

AppDelegate.h

```
// our convenient huddie system (messages with a hud, spinner)
@property (nonatomic, strong) MBProgressHUD *hud;
-(void)huddie; 
```

AppDelegate.m

```
-(void)huddie
{
// centralised location for MBProgressHUD
[self.hud hide:YES];

UIWindow *windowForHud = [[UIApplication sharedApplication] delegate].window;
self.hud = [MBProgressHUD showHUDAddedTo:windowForHud animated:YES];

self.hud.dimBackground = YES;
self.hud.minShowTime = 0.1;
self.hud.labelText = @"";
self.hud.detailsLabelText = @"";
} 
```

**在你使用它的代码中**设置标题- 因为**你经常**在运行期间更改它们。（“第 1 步”...“第 2 步”等）

```
-(void)loadBlahFromCloud
{
[APP huddie];
APP.hud.labelText = @"Connecting to Parse...";
APP.hud.detailsLabelText = @"step 1/2";

[blah refreshFromCloudThen:
    ^{
    [... example];
    }];
}

-(void)example
{
APP.hud.labelText = @"Connecting to the bank...";
APP.hud.detailsLabelText = @"step 2/2";

[blah sendDetailsThen:
    ^{
    [APP.hud hide:YES];
    [...  showNewDisplay];
    }];
} 
```

如果您愿意，可以更改 huddle 以将文本作为参数

你总是想要**self.hud.minShowTime = 0.1;** 避免闪烁

几乎总是**self.hud.dimBackground = YES;** 这也阻止了用户界面

当然，从概念上讲，当您提出这样的过程时，**您通常必须“稍微等待”才能开始工作/结束工作，就像使用 UI 进行任何类似的编程一样。**

所以在实践中代码通常看起来像这样......

```
-(void)loadActionSheets
{
[APP huddie];
APP.hud.labelText = @"Loading json from net...";

dispatch_after_secs_on_main(0.1 ,
    ^{
    [STUBS refreshNowFromCloudThen:
        ^{
        [APP.hud hide:YES];
        dispatch_after_secs_on_main(0.1 , ^{ [self buildActionsheet]; });
        }];
        }
    );
} 
```

方便的宏..

```
#define dispatch_after_secs_on_main( SS, BB )                   \
        dispatch_after(                                         \
            dispatch_time(DISPATCH_TIME_NOW, SS*NSEC_PER_SEC),  \
            dispatch_get_main_queue(),                          \
            BB                                                  \
            ) 
```

* * *

这就是所有历史了:) [https://stackoverflow.com/a/23403979/294884](https://stackoverflow.com/a/23403979/294884)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-12T13:22:31.787

[这个](https://stackoverflow.com/users/88854/matej-bukovinski)答案是我现在用于 5-6 个应用程序的答案，因为它在块内也能完美运行。但是我发现它有问题。我可以让它显示，但如果 UIAlertView 也存在，则不能让它消失。如果您查看实现，您就会明白为什么。只需将其更改为：

```
static UIWindow *window;

+ (MBProgressHUD *)showGlobalProgressHUDWithTitle:(NSString *)title {

    window = [[[UIApplication sharedApplication] windows] lastObject];
    MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:window animated:YES];
    hud.labelText = title;

    return hud;
}

+ (void)dismissGlobalHUD {

    [MBProgressHUD hideHUDForView:window animated:YES];
} 
```

这将确保您从显示的相同窗口中移除 HUD。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-24T03:15:31.647

我发现@Matej Bukovinski 的回答很有帮助，因为我刚开始使用 Swift，我使用他的方法的目的是为 MBProgressHUD 设置全局字体，我已将代码转换为 swift 并愿意分享以下代码：

```
class func showGlobalProgressHUDWithTitle(title: String) -> MBProgressHUD{
    let window:UIWindow = UIApplication.sharedApplication().windows.last as! UIWindow
    let hud = MBProgressHUD.showHUDAddedTo(window, animated: true)
    hud.labelText = title
    hud.labelFont = UIFont(name: FONT_NAME, size: 15.0)
    return hud
}

class func dismissGlobalHUD() -> Void{
    let window:UIWindow = UIApplication.sharedApplication().windows.last as! UIWindow
    MBProgressHUD.hideAllHUDsForView(window, animated: true)
} 
```

上面的代码被放入一个全局文件中，我在其中保存了所有全局帮助器和常量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T06:35:28.377

我已经使用它如下..希望它可以帮助你..

在`appDelegate.m`

```
-(void)showIndicator:(NSString *)withTitleString currentView:(UIView *)currentView
{ 
if (!isIndicatorStarted) {

    // The hud will dispable all input on the view
    self.progressHUD = [[[MBProgressHUD alloc] initWithView:currentView] autorelease]; 
    // Add HUD to screen 
    [currentView addSubview:self.progressHUD]; 
    self.progressHUD.labelText = withTitleString;
    [window setUserInteractionEnabled:FALSE];
    [self.progressHUD show:YES];

    isIndicatorStarted = TRUE;
}   
 } 

-(void)hideIndicator 
{ 

    [self.progressHUD show:NO]; 
    [self.progressHUD removeFromSuperview]; 
    self.progressHUD = nil;
    [window setUserInteractionEnabled:TRUE];
    isIndicatorStarted = FALSE;
} 
```

从随机视图：-

`[appDel showIndicator:@"Loading.." currentView:presentView.view];`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-30T13:52:51.140

**注意**：考虑到这个问题得到的观点，我决定发布我选择的解决方案。**这不是我的问题的答案。**（因此，接受的答案仍然被接受）

那时我最终使用了[SVProgressHUD](https://github.com/SVProgressHUD/SVProgressHUD)，因为它非常易于集成和使用。

您只需将 SVProgressHUD/SVProgressHUD 文件夹拖到您的项目中即可。（您也可以选择吃可可足类动物或迦太基）

* * *

**在 Objective-C 中：**

```
[SVProgressHUD show]; // Show
[SVProgressHUD dismiss]; // Dismiss 
```

* * *

**在斯威夫特：**

```
SVProgressHUD.show() // Show
SVProgressHUD.dismiss() // Dismiss 
```

* * *

**此外，显示和隐藏 HUD 需要在主线程上执行**。（具体来说，你需要这个来在后台的某个闭包中隐藏 HUD）

**例如：**

```
dispatch_async(dispatch_get_main_queue(), ^{
    [SVProgressHUD dismiss]; // OR SHOW, whatever the need is.
}); 
```

* * *

还有其他方法可以使用 HUD 显示自定义消息，在短时间内显示成功/失败和自动关闭。

**MBProgressHUD**仍然是开发人员的不错选择。只是我发现**SVProgressHUD**适合我的需要。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-28T12:37:51.033

要一次显示一个`MBProgressHUD`，您可以检查天气 HUD 是否已添加到同一视图中。如果没有，则添加 HUD，否则不要添加新的 HUD。

```
-(void)showLoader{    
    dispatch_async(dispatch_get_main_queue(), ^{
        BOOL isHudAlreadyAdded = false;

        UIWindow *window = [[[UIApplication sharedApplication] windows] lastObject];
        NSEnumerator *subviewsEnum = [window.subviews reverseObjectEnumerator];
        for (UIView *subview in subviewsEnum) {
            if ([subview isKindOfClass:[MBProgressHUD class]]) {
                isHudAlreadyAdded = true;
            }
        }
        if(isHudAlreadyAdded == false){
            [MBProgressHUD showHUDAddedTo:window animated:YES];
        }
    });
}

-(void)hideLoader{
    dispatch_async(dispatch_get_main_queue(), ^{
        UIWindow *window = [[[UIApplication sharedApplication] windows] lastObject];
        [MBProgressHUD hideHUDForView:window animated:YES];
    });
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-27T03:00:50.700

我正在使用来自@Michael Shang 的代码，并且在显示 HUD 时出现了各种不一致的行为。原来使用最后一个窗口是不可靠的，因为 iOS 键盘可能只是隐藏它。因此，在大多数情况下，您应该使用@David Lawson 提到的 AppDelegate 来获取窗口。

以下是 Swift 中的方法：

```
let window = UIApplication.sharedApplication().delegate!.window!!
let hud = MBProgressHUD.showHUDAddedTo(window, animated: true) 
```

但是，通过上述方式，您的 HUD 将显示在 iOS 键盘后面（如果它们重叠）。如果您需要 HUD 覆盖键盘，请使用最后一个窗口方法。

就我而言，发生的事情是我会显示 HUD，然后`resignFirstResponder()`立即调用隐藏 HUD 添加到的窗口。所以这是需要注意的，唯一可以保证坚持的窗口是第一个。

我最终创建了一个方法，如果需要，可以选择在键盘上方添加 HUD：

```
func createHUD(size: CGSize, overKeyboard: Bool = false) -> MBProgressHUD {
    let window = overKeyboard ? UIApplication.sharedApplication().windows.last!
                              : UIApplication.sharedApplication().delegate!.window!!
    let hud = MBProgressHUD.showHUDAddedTo(window, animated: true)
    hud.minSize = size
    hud.bezelView.style = .SolidColor
    hud.bezelView.color = UIColor(white: 0, alpha: 0.8)
    return hud
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-06-01T07:28:17.960

添加这两种方法以在单例类中显示或隐藏加载器

```
- (void)startLoaderWithText:(NSString *)title View:(UIView *)view{
    progressHud = [MBProgressHUD showHUDAddedTo:view animated:YES];
    progressHud.labelText = title;
    progressHud.activityIndicatorColor = [UIColor grayColor];
    progressHud.color = [UIColor clearColor];
    [progressHud show:YES];
}

- (void)stopLoader{
    [progressHud hide:YES];
} 
```

# javascript - iOS/HTML5 上的视频相关事件跟踪

> ID：12033084
> 
> 赞同：0
> 
> 时间：2012-08-20T06:25:21.983
> 
> 标签：javascript, ios, html, ios5, html5-video

如何在*iOS*`<video>`上使用标签跟踪各种参数（例如 Play/Pause/Stop/JumpToTime/Volume/others） ？我想听这些事件并执行一些特定于应用程序的操作。

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T15:06:19.073

看看[http://developer.apple.com/library/safari/#samplecode/HTML5VideoEventFlow/Listings/events_js.html#//apple_ref/doc/uid/DTS40010085-events_js-DontLinkElementID_5](http://developer.apple.com/library/safari/#samplecode/HTML5VideoEventFlow/Listings/events_js.html#//apple_ref/doc/uid/DTS40010085-events_js-DontLinkElementID_5)*

# python - Scikit-learn Naive Bayes 使用稀疏字符串分类的莫名其妙的结果

> ID：12033086
> 
> 赞同：3
> 
> 时间：2012-08-20T06:25:23.210
> 
> 标签：python, machine-learning, scikit-learn

我正在尝试使用 scikit learn 模块进行文本分类。它是一个包含许多独特单词的数据集。从以下示例中可以看出其性质，

```
train_counts = count_vect.fit_transform(data)
train_counts.shape

print len(range(len(data)-1)) 

clf = MultinomialNB(alpha=1).fit(train_counts, range(len(data)) )

docs_new = ['Modern Warfare 2', 'Modern Warfare 3', 'Modern Warfare 1', 'Modern Warfare 4', 'Modern Warfare', 'Mahjong Kakutou Club', 'Mass Effect 2']

new_counts = count_vect.transform(docs_new)
predicted = clf.predict(new_counts)

for doc, category in zip(docs_new, predicted):
    print '%r => %s' % (doc, target_names[category]) 
```

输出看起来像这样。

```
763
'Modern Warfare 2' => Call of Duty: Modern Warfare 3
'Modern Warfare 3' => Call of Duty: Modern Warfare 3
'Modern Warfare 1' => Call of Duty: Modern Warfare 3
'Modern Warfare 4' => Call of Duty: Modern Warfare 3
'Modern Warfare' => Call of Duty: Modern Warfare 3
'Mahjong Kakutou Club' => Mahjong Kakutou Club
'Mass Effect 2' => Mass Effect 2 
```

这是一个多项式示例，但我得到与伯努利示例相同的结果。我尝试使用 0 到 1000000 的 alpha 值。谁能向我解释为什么会这样？

编辑：我应该说清楚，存在以下课程使命召唤：现代战争，使命召唤：现代战争2 ......大多数其他游戏，所有游戏站游戏的列表均来自维基百科。

此外，完整版本，例如使命召唤：现代战争 2 作为测试字符串会产生相同的结果

我最初使用的是 NLTK 分类器，但由于某种原因，它没有放置太多有价值的词，例如“Kakutou”，而这些词在任何其他示例中都不存在。（显然 Scikit 有）它没有像 scikit 分类器那样的数字问题。

这里的任何指导或信息都将非常有价值。

谢谢

编辑：数据集来自这里[http://en.wikipedia.org/wiki/List_of_PlayStation_3_games](http://en.wikipedia.org/wiki/List_of_PlayStation_3_games)它的第一列，每个示例都有一个标签和相同的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-08T01:29:58.003

该代码没有显示 count_vect 是如何构造的，但如果它只是一个默认的 initialized `CountVectorizer`，那么它会忽略字符标记（即序列号），使所有“现代战争...”标题的标记与“现代战争”相同：

```
>>> from sklearn.feature_extraction.text import CountVectorizer as CV
>>> count_vect=CV()
>>> docs_new = ['Modern Warfare 2', 'Modern Warfare 3', 'Modern Warfare 1', 'Modern Warfare 4', 'Modern Warfare A', 'Modern Warfare 44', 'Modern Warfare AA', 'Modern Warfare', 'Mahjong Kakutou Club', 'Mass Effect 2']
>>> new_counts = count_vect.fit_transform(docs_new)
>>> count_vect.inverse_transform(new_counts)
[array([u'modern', u'warfare'], 
      dtype='<U7'), array([u'modern', u'warfare'], 
      dtype='<U7'), array([u'modern', u'warfare'], 
      dtype='<U7'), array([u'modern', u'warfare'], 
      dtype='<U7'), array([u'modern', u'warfare'], 
      dtype='<U7'), array([u'44', u'modern', u'warfare'], 
      dtype='<U7'), array([u'aa', u'modern', u'warfare'], 
      dtype='<U7'), array([u'modern', u'warfare'], 
      dtype='<U7'), array([u'club', u'kakutou', u'mahjong'], 
      dtype='<U7'), array([u'effect', u'mass'], 
      dtype='<U7')] 
```

这是因为 scikit 矢量化器具有默认设置`token_pattern=r'(?u)\b\w\w+\b'` 该模型只是随意打破关系，因为训练和预测都看不到这些标题之间的任何差异。你可以通过使用来解决这个问题`token_pattern=r'(?u)\b\w+\b'`

```
>>> from sklearn.feature_extraction.text import CountVectorizer as CV
>>> count_vect=CV(token_pattern=r'(?u)\b\w+\b')
>>> docs_new = ['Modern Warfare 2', 'Modern Warfare 3', 'Modern Warfare 1', 'Modern Warfare 4', 'Modern Warfare A', 'Modern Warfare 44', 'Modern Warfare AA', 'Modern Warfare', 'Mahjong Kakutou Club', 'Mass Effect 2']
>>> new_counts = count_vect.fit_transform(docs_new)
>>> count_vect.inverse_transform(new_counts)
[array([u'2', u'modern', u'warfare'], 
      dtype='<U7'), array([u'3', u'modern', u'warfare'], 
      dtype='<U7'), array([u'1', u'modern', u'warfare'], 
      dtype='<U7'), array([u'4', u'modern', u'warfare'], 
      dtype='<U7'), array([u'a', u'modern', u'warfare'], 
      dtype='<U7'), array([u'44', u'modern', u'warfare'], 
      dtype='<U7'), array([u'aa', u'modern', u'warfare'], 
      dtype='<U7'), array([u'modern', u'warfare'], 
      dtype='<U7'), array([u'club', u'kakutou', u'mahjong'], 
      dtype='<U7'), array([u'2', u'effect', u'mass'], 
      dtype='<U7')] 
```

# java - 如何在我的 JAR 中嵌入外部 .wav 文件？

> ID：12033089
> 
> 赞同：3
> 
> 时间：2012-08-20T06:25:51.993
> 
> 标签：java, eclipse, external, embedded-resource

我想要一个 JAR 而不是别的，我希望所有外部资源都包含在其中。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T06:35:31.170

您尝试对媒体进行的操作将使其成为通常称为“嵌入式资源”的内容。对于这种情况，只需将 WAV 文件放在 Jar 中并通过 URL 访问它们。请参阅此[信息。](https://stackoverflow.com/tags/embedded-resource/info)有关如何形成 URL 的[页面。](https://stackoverflow.com/tags/embedded-resource/info)

# macos - 无法签出 SVN 项目，错误是工作副本太旧

> ID：12033091
> 
> 赞同：1
> 
> 时间：2012-08-20T06:26:03.747
> 
> 标签：macos, svn, project, svn-checkout

我尝试在新计算机上查看 repo，但 mac os x 上的 Smart SVN 声称 ~/ProjectPath 的工作副本格式太旧 '0'。我尝试了我在网上找到的一切。我将 svn 升级到 1.7。 6，我还下载了最新版本的智能SVN，但它真的没有帮助。

svn upgrade 说如下

```
svn: E155019: Can't upgrade '/Users/ilker/Desktop/CallingCard_v2.0' as it is not a pre-1.7 working copy directory 
```

和 svn cleanup 说

```
svn: E200030: sqlite: no such table: wcroot 
```

我在这台机器上的唯一区别是我有 mac os x 10.6.8，而其他客户端至少有 10.7。我认为但这不重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:36:09.380

您是否尝试了`svn checkout`命令来获取新的工作副本而不是尝试`svn upgrade`当前的工作副本？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-18T06:41:45.203

我遇到了导致相同错误的略有不同的情况。
我在一个几乎只有 0% 可用空间的服务器上结帐。结帐从 SVN 下载了父目录，但没有下载内容。当我释放磁盘空间并进行检查时，问题仍然存在。
当我删除父目录并再次结帐时，问题消失了。因此，您可以尝试删除已签出的内容并再次结帐。

# java - 如何将对象从 servlet 传递给调用 JSP

> ID：12033092
> 
> 赞同：5
> 
> 时间：2012-08-20T06:26:13.617
> 
> 标签：java, jsp, servlets

如何将对象从 servlet 传递到调用 JSP。

我有一个调用 servlet 的 JSP。在这个 servlet 中，我正在设置 viewBean 的属性。现在，我想从 JSP 页面上的 Servlet 中获取这个属性值集。

如何从 Servlet 使这个 ViewBean 对象在 JSP 上可用。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-20T06:34:10.293

将对象放在会话中或请求中的 servlet 中，例如：

```
String shared = "shared";
request.setAttribute("sharedId", shared); // add to request
request.getSession().setAttribute("sharedId", shared); // add to session
this.getServletConfig().getServletContext().setAttribute("sharedId", shared); // add to application context 
```

您可以在 jsp 中阅读它，例如：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core" %>
<body>
<cut value= "${shared}"/>
<cut value= "${requestScope.shared}"/>
<cut value= "${requestScope.request.shared}"/>
${shared} 
```

或者使用带有代码的 scriptlet 阅读它：

```
<%
 String shared = (String)request.getAttribute("sharedId");
 String shared1 = (String)request.getSession().getAttribute("sharedId");
 String shared2 = (String)this.getServletConfig().getServletContext().getAttribute("sharedId");
%> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T06:39:49.923

好吧，首先您需要设置该值，以便您可以从您的页面访问它，例如：

```
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class MyServlet extends HttpServlet {
  public void doGet(HttpServletRequest request, HttpServletResponse response) {
    // Do some work.
    Person value = new Person("Matthew", "Abbott";

    request.setAttribute("person", person);

    // Forward to to the JSP file.
    request.getRequestDispatcher("showValue.jsp").forward(request, response);
  }
} 
```

接下来，您可以使用表达式语言访问值的属性：

```
<!DOCTYPE html>
<html>
  <head>
    <title>${person.forename} ${person.surname}</title>
  </head>
  <body>
    <h1>Hello ${person.forename}!!!</h2>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T06:43:32.830

在 servlet 的会话属性中添加该 ViewBean 对象。并在 jsp 中获取该变量。

在小服务程序中

ViewBean viewbwanObject= new ViewBean() session.setAttribyte("obj",vi);

在jsp中。

```
<% 
```

ViewBean v= (ViewBean)session.getAttribute("obj") %>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T06:33:48.533

像这样的东西应该工作

```
request.setParameter("nameOfmyObjectParam",MyObject); //or request.setAttribute
String yourJSP = "/WEB-INF/pages/yourJSP.jsp";

        RequestDispatcher rd = getServletContext().getRequestDispatcher(yourJSP);
        rd.forward(request, response); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T06:34:29.817

使用 Servlet API 将 bean 设置为 servlet 中的请求属性，如下所示 -

```
request.setAttribute("viewBean", viewBean); 
```

并使用 EL 在 JSP 中检索（使用）它，如下所示 -

```
${requestScope.viewBean} 
```

# python-3.x - 使用导入文件时，对象在 python 中没有属性“追加”

> ID：12033097
> 
> 赞同：0
> 
> 时间：2012-08-20T06:26:38.367
> 
> 标签：python-3.x

我不断收到此代码的属性错误。有谁知道为什么会这样？我知道不能附加“str”，但我正在尝试附加列表......任何帮助将不胜感激！

```
elif choice == "1":
    i=0
    eval_type = open("eval_type.txt", "r+")
    for line in eval_type:
        i+=1
        new_eval = input("What do you want to call the new evaluation?")
        points = input("How many points is this type worth?")
        if new_eval in line:
            print("\n", new_eval, "already exists.")
        else:
            eval_type.append(new_eval)
            print (new_eval, "has been added.")
    eval_type.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:30:40.170

`eval_type`在您的代码段中不是列表；它实际上是一种`file`类型；你不能附加到。

```
>>> x = open('test.txt','w')
>>> type(x)
<type 'file'> 
```

您应该在循环之前初始化一个空列表`for`并使用它。

# mysql - 将布尔列添加到现有表中

> ID：12033103
> 
> 赞同：29
> 
> 时间：2012-08-20T06:28:00.050
> 
> 标签：mysql, alter

我正在尝试将布尔列添加到现有表中

```
alter table chatuser add activerecord bool;
alter table chatuser add activerecord boolean; 
```

其中 activerecord 是我的布尔列

这些查询都不起作用。如何将布尔列添加到现有表？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-20T06:31:41.330

您必须定义添加的内容 - 列：

```
alter table chatuser  add column activerecord bool; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-20T06:32:00.327

缺少`COLUMN`关键字

```
ALTER TABLE ChatUser ADD COLUMN ActiveRecord TinyInt(1) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-02-10T08:22:51.290

添加默认值

```
ALTER TABLE my_table ADD COLUMN new_field TinyInt(1) DEFAULT 0; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-20T07:05:23.337

```
ALTER TABLE chatuser ADD activerecord BOOLEAN 
```

不需要“列”这个词

您的第二个查询在 mysql 中完全没问题（至少）。

尝试：

```
select * from chatuser; 
```

如果您看不到结果，请检查您的 mysql 服务器或其他东西，而不是查询，如果上面的选择查询有效，并且您还没有`activerecord` 命名列，我敢打赌您的查询会有效。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-19T21:06:16.487

我发现在 Microsoft SQL 上以下内容无效：

```
ALTER TABLE meTable ADD COLUMN someBoolCol TinyInt; 
```

省略“列”关键字有效：

```
ALTER TABLE meTable ADD someBoolCol TinyInt; 
```

# eclipse - eclipse没有在ubuntu上运行

> ID：12033105
> 
> 赞同：0
> 
> 时间：2012-08-20T06:28:02.857
> 
> 标签：eclipse

当我开始日食时，我只是得到了这个小日食窗口![在此处输入图像描述](../Images/d706feb7ed6cdbf515314096aea80717.png)

在此之后程序永远不会启动。上次我遇到了同样的问题。我虽然重新安装会解决它。有没有人遇到过类似的问题？

# java - 如何在android中为字符串应用选框

> ID：12033109
> 
> 赞同：2
> 
> 时间：2012-08-20T06:28:33.153
> 
> 标签：java, android

我正在尝试实现选框样式以在 android 中打印字符串。我可以使用静态数据来处理它，但对于动态它不显示选框样式。

当我打印时：

```
String st="this is test application testing for marquee" 
```

我得到了选框风格。

但是，在我获取数据时解析后：

```
<TextView
        android:id="@+id/twxmorq"
        android:layout_width="match_parent"
        android:layout_height="30dp"
        android:layout_marginBottom="5dp"
        android:layout_marginTop="5dp"
        android:ellipsize="marquee"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:marqueeRepeatLimit="marquee_forever"
        android:padding="5dip"
        android:scrollHorizontally="true"
        android:singleLine="true"
        android:textColor="#FF0000" /> 
```

我跑：

```
myString = myString + "| "+ json_data.getString("news_title").toString();

txt1 = (TextView) findViewById(R.id.twxmorq);
txt1.setText(myString1); 
```

而且我打印时*没有*选取框样式`mystring`。

请帮我。

**摘要**：对于字符串'ST'，我得到了一个选框样式的打印字符串，但`mystring1`我没有得到选框样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:52:26.210

使用下面的代码。

```
<TextView
    android:id="@+id/twxmorq"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5dp"
    android:layout_marginTop="5dp"
    android:ellipsize="marquee"
    android:marqueeRepeatLimit="marquee_forever"
    android:padding="5dip"
    android:scrollHorizontally="true"
    android:singleLine="true"
    ndroid:lines="1"
    android:textColor="#FF0000" 
    android:fadingEdge="horizontal"/> 
```

Java代码：-

```
myString = myString + "| "+ json_data.getString("news_title").toString();

txt1 = (TextView) findViewById(R.id.twxmorq);
txt1.setSelected(true);
txt1.setText(myString1); 
```

# javascript - JavaScript - 计算两个日期之间的天数（包括结束日期）？

> ID：12033117
> 
> 赞同：1
> 
> 时间：2012-08-20T06:29:12.123
> 
> 标签：javascript, date

*我已经搜索了很多找到这个答案，但找不到一个。*

我有 2 个日期，我想计算它们之间的天数

但我也希望计算结束日。

例子 ：

*   我和我的妻子从 [1 月 20 日] 到 [1 月 26 日] 去酒店，所以总共 7 天。

*我发现唯一*有效的代码是：

```
 Math.round((b - a) / ( 1000 * 60 * 60 * 24)) +1 
```

在哪里 ：

```
var a= new Date (y,0,20);
var b= new Date (y,0,26); 
```

我还做了一个嵌套循环来测试 150 年内的所有月份，它工作**正常**。

```
var y = 1970;
var m = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];
for(var i = 0; i < 150; i++)
{
    for(var j = 0; j < 12; j++)
    {
        var a = new Date(y + i, m[j], 20);
        var b = new Date(y + i, m[j], 26);
        var days = Math.round((b - a) / (1000 * 60 * 60 * 24)) + 1;
        if(days != 7) console.log(i + y); //tell me if result is unexpected.
    }
}
console.log('-FINISH-' + new Date().getTime()) 
```

**那么问题出在哪里？**

我不知道数学函数是`round`如何做到这一点的。

我们在这里谈论毫秒，我看不出*圆形行为*在哪里给了我正确的结果。

*（ps - 忘记 ceil 和 floor ，它们在这里没有帮助并且结果不一致），我也尝试在`b`值上加一天，并使用 ceil || 地板但没有成功*

[这是代码](http://jsbin.com/ewefan/4/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:50:19.337

你的四舍五入工作的原因是因为你只工作了一整天。`myDate.getTime()`将产生自 1970-01-01 以来的毫秒数。如果您总是分配日期，因为`new Date(y,m,d)`您将始终将`time`部分设置为`00:00:00.000`，因此日期比较将始终产生 86400000 的倍数，这是您的除数。这里的舍入在很大程度上是多余的。

如果您按照上面指定的方式创建所有日期，则唯一的时间舍入会起作用，即 date 的夏令时偏移量与 date 的夏令时偏移量`b`不同`a`。`round`将处理这些差异，因为它们很少超过一个小时。

从您的脚本来看，1970 年 10 月是有问题的（在 CEST 中），因为 10 月 20 日是夏令时，而 10 月 26 日不是。

```
var a = new Date(1970, 9, 20);
var b = new Date(1970, 9, 26);

(b - a) / (1000 * 60 * 60 * 24) // 6.041666666666667 
```

您可以通过四舍五入或使用 UTC 日期来解决此问题

```
var a = new Date(Date.UTC(1970, 9, 20));
var b = new Date(Date.UTC(1970, 9, 26));

(b - a) / (1000 * 60 * 60 * 24) // 6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T06:54:15.257

这是你的答案：

[http://www.direct.gov.uk/en/Nl1/Newsroom/DG_185398](http://www.direct.gov.uk/en/Nl1/Newsroom/DG_185398)

基本上，3 月 25 日有 23 小时而不是 24 小时。10 月 28 日有 25 小时。这就是为什么舍入效果很好，而地板/天花板却不行。

此外，如您所见，DST 日期每年都在变化（您可以在同一篇文章中看到），这就是为什么每 5-10 年只有一次地板/cail 测试失败的原因。在其他年份，DST 应用于不同的日期，因此测试结果似乎是正常的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T06:57:26.273

我找到了原因！:) （例如 2035 年）

```
Date {Sun Mar 25 2035 00:00:00 GMT+0100 (CET)} 
Date {Mon Mar 26 2035 00:00:00 GMT+0200 (CEST)} 
```

查看 GMT Times 一个是 GMT+0100 (CET)，一个是 GMT+0200 (CEST)

要始终获得没有回合的结果，您必须使用 UTC：

```
var a = Date.UTC(y + i, m[j], 25);
var b = Date.UTC(y + i, m[j], 26);
var days = (b - a) / (1000 * 60 * 60 * 24); 
```

我稍微修改了您的代码以找到此错误：

```
var y = 1970;
var m = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];
for(var i = 0; i < 150; i++)
{
    for(var j = 0; j < 12; j++)
    {
        var a = new Date(y + i, m[j], 25);
        var b = new Date(y + i, m[j], 26);
        var days = (b - a);
        if(days != 86400000) console.log(i + y, days); //tell me if result is unexpected.
    }
}

1983 90000000
1984 82800000
1988 90000000
... 
```

这已经在这里讨论过：

[http://www.webdeveloper.com/forum/archive/index.php/t-5195.html](http://www.webdeveloper.com/forum/archive/index.php/t-5195.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-20T06:41:00.603

正如在上一篇文章中已经回答的那样：

```
var days = Math.floor(enddate.getTime()-startdate.getTime())/(24*60*60*1000); 
```

# android - 如何在 onclick 方法中在 bundle 中传递字符串（如何在 onclick 中传递页面 contentpage 字符串）

> ID：12033118
> 
> 赞同：0
> 
> 时间：2012-08-20T06:29:14.443
> 
> 标签：android

How to pass string in bundle in `onClick`method (how to pass page contentpage string in `onclick`bundle)

```
 Button button[] = new Button[z];
 String pagetitle;
 String pagecontent;

                for (int k = 0; k < z; k++) {
                    button[k] = new Button(this);
                    addbutton.addView(button[k]);
                    pagetitle=null;
                    pagecontent=null;

                    for (int j = 0; j <= k; j++) 
                    {
                        pagetitle=stringArrayTitle.get(j);
                        pagecontent=stringArrayContent.get(j);

                        //System.out.println("titile array list"+ y);
                        button[k].setText(pagetitle);
                        button[k].setOnClickListener(new OnClickListener() {

                            public void onClick(View v) {
                                // TODO Auto-generated method stub
                                Bundle ba= new Bundle();                                    
                            }
                        });
                    }                       
                }
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:35:23.687

```
Intent intent = new
Intent(getApplicationContext(),SecondActivity.class);
intent.putExtra("myKey",AnyValue);  
startActivity(intent); 
```

现在您可以通过...获取传递的值

```
Bundle extras = intent.getExtras(); 
String tmp = extras.getString("myKey"); 
```

# servicestack - 如何查询 AppHost 的特定路由？

> ID：12033127
> 
> 赞同：2
> 
> 时间：2012-08-20T06:29:51.657
> 
> 标签：servicestack

基本上我有以下架构：

*   网站项目 (1)
*   领域项目 (2)
*   Api-项目 (3)

依赖项：

*   1 使用 2 和 3
*   3 次使用 2
*   2 什么都不用

在我的 Api 项目中，我定义了一个具体的实现`ServiceStack.Webhost.Endpoints.AppHostBase`，例如`ApiAppHost`：

```
public sealed class ApiAppHost : AppHostBase
{
    private ApiAppHost()
        : base("Description", typeof (ApiAppHost).Assembly) {}

    public override void Configure(Container container)
    {
        this.SetConfig(new EndpointHostConfig
        {
            ServiceStackHandlerFactoryPath = "api"
        });

        this.Routes.Add<Foo>("/foo", "POST");
    }

    public static void Initialize()
    {
        var instance = new ApiAppHost();
        instance.Init();
    }
} 
```

这很简单。

现在我想从我的网站项目中查询我*的*`this.Routes`（结合）以获取.`EndpointHostConfig.ServiceStackHandlerFactoryPath`*`Foo`*

 *如果不自己创建拦截器，我怎么能做到这一点？ServiceStack.Net 是否提供任何适合的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:33:44.513

目前我正在做这样的事情

```
public static class AppHostBaseExtensions
{
    public static string GetUrl<TRequest>(this AppHostBase appHostBase)
    {
        var requestType = typeof (TRequest);

        return appHostBase.GetUrl(requestType);
    }

    public static string GetUrl(this AppHostBase appHostBase, Type requestType)
    {
        var endpointHostConfig = appHostBase.Config;
        var serviceStackHandlerFactoryPath = endpointHostConfig.ServiceStackHandlerFactoryPath;

        var serviceRoutes = appHostBase.Routes as ServiceRoutes;
        if (serviceRoutes == null)
        {
            throw new NotSupportedException("Property Routes of AppHostBase is not of type ServiceStack.ServiceHost.ServiceRoutes");
        }
        var restPaths = serviceRoutes.RestPaths;
        var restPath = restPaths.FirstOrDefault(arg => arg.RequestType == requestType);
        if (restPath == null)
        {
            return null;
        }

        var path = restPath.Path;
        var virtualPath = "~/" + string.Concat(serviceStackHandlerFactoryPath, path); // bad, i know, but combining with 2 virtual paths ...
        var absolutePath = VirtualPathUtility.ToAbsolute(virtualPath);

        return absolutePath;
    }
} 
```

我知道这是错误的，因为有很多问题（路径组合，不考虑休息路径，不考虑休息路径和占位符），但它作为一个开始......

编辑：只有在`Configure(Container)`你的`AppHostBase`-implementation 中注册路由时，这才有效。它不适用于`RestServiceAttribute`-attribute ...*

# php - 支持 ctrl+click 的 PHP + JS(extJS) 开发的 IDE 是什么？

> ID：12033143
> 
> 赞同：2
> 
> 时间：2012-08-20T06:30:59.967
> 
> 标签：php, javascript, codeigniter, extjs

我目前正在向由 CI (php) 和 ExtJS (js) 制作的现有 Web 应用程序添加功能。我是 Extjs 的新手，我无法跟踪代码让我很沮丧，因为我不知道在哪里寻找声明。

现在有支持 ctrl+click（去声明）的 IDE 吗？我相信这会为我节省很多时间！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T06:33:34.617

我使用 Netbeans 7.2 IDE，它支持 Ctrl+单击 [http://netbeans.org/downloads/index.html](http://netbeans.org/downloads/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T07:58:46.200

我使用[Sublime Text 2](http://www.sublimetext.com/)。

我曾经使用过 netbeans、eclipse 和所有这些 IDE，但它们太慢了……

Sublime Text 2 快如闪电。您可以在其上安装很多扩展（包）（例如 CodeIgniter 片段 -> 我自己使用 CodeIgniter）。

你可以[在这里](http://www.youtube.com/watch?v=WPhhC31b8Sw)查看评论。

对于作为 ExtJs... 我在之前的工作中使用过 ExtJs，但我从未找到支持 ExtJs 的 IDE。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T08:39:56.073

`PHPStorm`也支持它。

# c++ - DLL 使用 sqlite3 从不同的进程写入相同的数据库文件

> ID：12033145
> 
> 赞同：1
> 
> 时间：2012-08-20T06:31:15.470
> 
> 标签：c++, dll, sqlite

我目前正在编写一个使用 sqlite3 与 Windows 系统上的数据库通信的 .dll。

现在，它非常简单，我刚刚编写了一个从数据库中插入和选择的测试程序。

然而，这个问题是我的 dll 将被同一系统上的多个程序使用，每个程序都写入同一个数据库文件。这当然会带来互斥锁问题。

在继续为它编写一个复杂的连接池之前，我想知道 sqlite3 库在多大程度上支持它。根据文档，有诸如“共享缓存”和“无互斥”模式之类的东西，由赋予`sqlite3_open_v2`函数的参数指定：[http ://www.sqlite.org/c3ref/open.html](http://www.sqlite.org/c3ref/open.html)

我也四处寻找一些 sqlite3 包装器，但我找不到任何适合我的多访问需求的东西。

有没有人有从使用相同 .dll 的多个进程写入 sqlite3 db 文件的经验？或者有没有人使用他们的运气`SHARED_CACHES`- 我似乎遇到了各种各样的问题。

任何关于此事的帮助都会很棒，谢谢！

~ 丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:54:23.527

只要你通过 SQLite3 访问同一个数据库文件，应该没问题。事实上，SQLite3 是专门为处理访问同一个数据库文件的多个进程而设计的。

SQL，作为一种规范，已经处理了多种访问，它为原子访问等（事务，诸如此类）提供了控制。只要你正确使用这些控件，你应该是文件。

SQLite3 有多个*线程*存在问题。

# java - 这个 [] 语法是什么意思？

> ID：12033150
> 
> 赞同：0
> 
> 时间：2012-08-20T06:31:45.387
> 
> 标签：java

`[1]`语句末尾是什么意思？

```
String magnitudeString = details.split(" ")[1]; 
```

不能这样写吗：

```
String [] magnitudeString = details.split(" "); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T06:33:17.020

`[1]`正在索引一个数组：结果[`String.split()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)是一个数组，并`[1]`从该结果中获取第二个元素。

这相当于：

```
String strs[] = details.split(" ");
String magnitudeString = strs[1]; 
```

所以它不能像你的建议那样重写。

显然，如果 的结果`split`少于 2 个元素，那么其中任何一个都是问题，因此`length`在访问数组元素之前进行检查是谨慎的，并且立即形式不会允许这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T06:32:48.313

它只是意味着该`split()`方法将返回一个数组，并且您将该数组的第二个索引处的内容分配给您的`String magnitudeString`（请记住，索引在 Java 中从 0 开始）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T06:43:34.217

它是由 . 返回的 String[] 数组的索引`details.split(" ")`。

一个建议使用

`String [] magnitudeString = details.split(" ");` 并迭代。

使用

> 字符串幅度String = details.split(" ")[1]

可能会给运行时异常`array index out of bound`

# c# - 我应该使用什么来代替“对齐”属性

> ID：12033155
> 
> 赞同：1
> 
> 时间：2012-08-20T06:31:56.993
> 
> 标签：c#, asp.net-mvc-3, razor, xhtml

我正在学习 asp.net mvc 3（使用 Razor）。我的 *.cshtml 视图之一具有以下代码：

```
<p align="center">
    <input class="actionButtons" type="submit" value="Complete order" />
</p> 
```

VS2010 C# 编译器向我显示“ *XHTML1.0 Transitional* ”检查消息（不是错误，不是警告），说该`align`属性应该被弃用，建议使用新结构。

那是什么建筑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T06:37:24.027

我认为这意味着`"text-align:center"`。或者其他方式是`style="margin-left:auto; margin-right:auto;"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T06:41:11.583

您需要使用 CSS 规则进行切换（如果您想将文本放置在 p 内部的中心）

```
<p style="text-align: center"> 
```

但是，如果要将 p 元素本身定位在中心，则需要对其进行宽度限制并将边距设置为自动：

```
<p style="width: 50%; margin-left:auto; margin-right:auto;"> 
```

更多关于水平对齐[的信息](http://www.w3schools.com/css/css_align.asp)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T06:38:40.270

基本上，您的问题的答案是在 CSS 中对齐事物的“新”方式，无论是文本还是其他元素，都是使用层叠样式表 (CSS)。

你应该看看这篇文章：[用 CSS 对齐内容](http://webdesign.about.com/od/css/p/css-align.htm%5d)，它解释了用 CSS 对齐内容的不同技术，并提供了详细解释的链接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T06:45:54.237

标签的in`HTML4`及以上`align`属性`p`已被弃用。你应该使用

```
<p style="text-align:center">
    <input class="actionButtons" type="submit" value="Complete order" />
</p> 
```

其他一些标签和属性已被弃用。[你可以在这里](http://fantasai.tripod.com/qref/HTML4/deprecated.html)阅读它们

# android - 需要支持日历事件

> ID：12033157
> 
> 赞同：1
> 
> 时间：2012-08-20T06:32:07.817
> 
> 标签：android

我正在使用 android 为工作门户开发移动应用程序，因为我有列表视图，我在列表视图日期列中使用了图像视图，我的要求是如果我单击图像视图，则自动添加日历事件。下面是我使用的代码，在我运行应用程序后，模拟器显示应用程序意外关闭，有时没有关于日历事件的响应，一切正常。请建议我感谢您的帮助。

```
Button btnLogin;
Button btnRegister;
Button btnsignUp;
ViewFlipper viewFlipper;
EditText etUserName;
EditText etPassword;

EditText etUserNameSignUp;
EditText etPasswordSignUp;
EditText etPhoneSignUp;

Button btnExit;
Button btnHome;
Button btnNotifications;
Button btnAvalability;
Button btnUpdate;

Button btnPublish;
Button btnStatus;
Button btnNotify;

String[] companies = new String[] { "Infosys", "Wipro", "Cisco", "ibm",
        "tcs", "NWS" };

int[] images = new int[] { R.drawable.notifications,
        R.drawable.notifications, R.drawable.notifications,
        R.drawable.notifications, R.drawable.notifications,
        R.drawable.notifications,

};

String[] dates = new String[] { "21/08/12", "22/08/12", "20/08/12",
        "16/08/12", "18/08/12", "24/08/12", };

String[] type = new String[] { "Face To Face", "Written", "Online",
        "telephonc", "group discussion", "telephonic" };

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.home);
    userName.add("Raghu");
    password.add("Raghu");

    viewFlipper = (ViewFlipper) findViewById(R.id.main);
    btnLogin = (Button) findViewById(R.id.loginButton);
    btnLogin.setOnClickListener(this);
    btnRegister = (Button) findViewById(R.id.signupButton);
    btnRegister.setOnClickListener(this);

    btnsignUp = (Button) findViewById(R.id.signupButton);
    btnsignUp.setOnClickListener(this);
    etUserName = (EditText) findViewById(R.id.userEditText);
    etPassword = (EditText) findViewById(R.id.pwEditText);

    etUserNameSignUp = (EditText) findViewById(R.id.regNameEditText);
    etPasswordSignUp = (EditText) findViewById(R.id.regEmailEditText);
    etPhoneSignUp = (EditText) findViewById(R.id.regPhEditText);

    btnHome = (Button) findViewById(R.id.homeButton);
    btnHome.setOnClickListener(this);

    btnExit = (Button) findViewById(R.id.exitButton);
    btnExit.setOnClickListener(this);

    btnNotifications = (Button) findViewById(R.id.listButton);
    btnNotifications.setOnClickListener(this);

    btnAvalability = (Button) findViewById(R.id.rightButton);
    btnAvalability.setOnClickListener(this);

    btnUpdate = (Button) findViewById(R.id.plusButton);
    btnUpdate.setOnClickListener(this);

    btnPublish = (Button) findViewById(R.id.publishButton);
    btnPublish.setOnClickListener(this);

    btnStatus = (Button) findViewById(R.id.updateButton);
    btnStatus.setOnClickListener(this);

    btnNotify = (Button) findViewById(R.id.notificationButton);
    btnNotify.setOnClickListener(this);

    // Each row in the list stores company name, interview date,
    // notification icon and type of interview
    List<HashMap<String, String>> aList = new ArrayList<HashMap<String, String>>();

    for (int i = 0; i < 6; i++) {
        HashMap<String, String> hm = new HashMap<String, String>();
        hm.put("cmp", companies[i]);
        hm.put("date", "   " + dates[i]);
        hm.put("img", Integer.toString(images[i]));
        hm.put("type", "   " + type[i]);
        aList.add(hm);
    }

    // Keys used in Hashmap
    String[] from = { "cmp", "date", "img", "type" };

    // Ids of views in lvrow.xml
    int[] to = { R.id.cmp, R.id.date, R.id.imgv, R.id.type };

    // Instantiating an adapter to store each items
    // R.layout.lvrow.xml defines the layout of each item
    SimpleAdapter adapter = new SimpleAdapter(getBaseContext(), aList,
            R.layout.listview, from, to);

    // Getting a reference to listview of listvi.xml layout file
    ListView listView = (ListView) findViewById(R.id.listview);

    // Setting the adapter to the listView
    listView.setAdapter(adapter);
    /*listView.setOnItemClickListener(listener);*/

}

OnItemClickListener listener = new OnItemClickListener() {

    // @Override
    // onItemClick(AdapterView<?> parent, View view, int position, long id)
    // {
    // ((TextView) view.findViewById(R.id.yourTextViewId)).getText();
    // // or do your stuff
    // }

    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        ImageView viewObj = (ImageView) arg1.findViewById(R.id.imgv);
        viewObj.setImageResource(R.drawable.bgrighticon);

    }
};

private void readContent(String uriString) {

    Uri calendarUri;
    Uri eventUri;
    if (android.os.Build.VERSION.SDK_INT <= 7 )
    {
      //the old way
      calendarUri = Uri.parse("content://calendar/calendars"); 
      eventUri    = Uri.parse("content://calendar/events");
    }
    else
    {
     //the new way
     calendarUri = Uri.parse("content://com.android.calendar/calendars");
     eventUri    = Uri.parse("content://com.android.calendar/events");
    } 

}

private void addEvent(){
    try {
        ContentValues event = new ContentValues();
        event.put("calendar_id", "1");
        event.put("title", "tet event");
        event.put("description", "hello this is testing of event");
        event.put("eventLocation", "Ahmedabad");
        Calendar c = Calendar.getInstance();
        long date = c.getTimeInMillis();
        event.put("dtstart", date);
        event.put("dtend", date);
        event.put("allDay", 1);
        event.put("eventStatus", 1);
        event.put("hasAlarm", 1);
        Uri eventsUri = Uri.parse("content://calendar/events");
        Uri url = getContentResolver().insert(eventsUri, event);
        Log.e("uri", url.toString());
    } catch (Exception e) {
        Log.e("error", e.getMessage());
        e.printStackTrace();
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.home, menu);
    return true;
}

public void onClick(View v) {
    if (v == btnLogin) {
        if (userName.contains(etUserName.getText().toString())
                && password.contains(etPassword.getText().toString()))

        {
            viewFlipper.setDisplayedChild(3);

        } else {

        }

        loggedin = true;

    } else if (v == btnRegister) {
        viewFlipper.setDisplayedChild(5);
    } else if (v == btnsignUp) {// reister new user
        // Take the values from the user entered data and save it in
        // Arraylist

    } else if (v == btnHome) {
        if (loggedin) {
            viewFlipper.setDisplayedChild(3);
        } else {
            viewFlipper.setDisplayedChild(0);
        }

    } else if (v == btnExit) {
        System.exit(0);
    } else if (v == btnNotifications) {
        if (loggedin) {
            viewFlipper.setDisplayedChild(4);
        }
    } else if (v == btnAvalability) {
        if (loggedin) {
            viewFlipper.setDisplayedChild(2);
        }
    } else if (v == btnUpdate) {
        if (loggedin) {
            viewFlipper.setDisplayedChild(1);
        }
    }

    else if (v == btnPublish) {
        if (loggedin) {
            viewFlipper.setDisplayedChild(2);
        }

    } else if (v == btnStatus) {
        if (loggedin) {
            viewFlipper.setDisplayedChild(1);
        }

    } else if (v == btnNotify) {
        if (loggedin) {
            viewFlipper.setDisplayedChild(4);
        }

    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:46:01.820

日历是 Google Apps 的一部分，因此在模拟器中不可用。

第一种方法：在安装了 Google Calendar 应用程序的 android 设备上测试您的应用程序。

第二种方法：在您的模拟器中安装 Google 日历应用程序并在其中测试您的应用程序。

[这个答案](https://stackoverflow.com/a/2927542/582571)会给你更多帮助。

编辑 ：

您可以检查是否安装了具有特定包名称的应用程序

```
public boolean check()
{
    try{
        ApplicationInfo info = getPackageManager().getApplicationInfo("packagename", 0 );
        return true;
    } catch( PackageManager.NameNotFoundException e ){
        return false;
    }
} 
```

# mysql - 像插入一样更新

> ID：12033160
> 
> 赞同：2
> 
> 时间：2012-08-20T06:32:20.797
> 
> 标签：mysql

是否可以像*insert一样执行**更新*？

 *```
UPDATE `table` SET `value` ('N','N','N','N','Y','Y','Y','N', 'N') WHERE `my_id` = '1' 
```

问题是要插入的值的数量我现在没有。它可以是 5 或 10。 ![在此处输入图像描述](../Images/d3366149a340188d3c29ca7676941b2d.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T06:49:33.043

replace 就像插入一样，它只是检查是否有重复的键，如果是它则删除该行并插入新的行，否则它只是插入

例如，如果存在 (Name,Type) 的唯一索引并且键入以下命令，则可以执行此操作

```
REPLACE INTO table1 (Name,Type,InitialValue,FinalValue) VALUES ('A',3,50,90 ) 
```

并且已经存在 Name = 'A' 和 Type = 3 的行，它将被替换

```
CREATE UNIQUE INDEX idx_name_type ON table1(Name,Type) 
```

编辑：快速说明 - 替换总是删除然后插入，因此在重负载中使用它从来都不是一个好主意，因为它在删除时需要排他锁，然后在插入时

一些数据库引擎有

插入 ... 在重复的密钥更新上 ...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T06:34:27.503

您必须指定`column-name`.

```
UPDATE `table` SET `Col1`='y',`Col2`='n' ... WHERE `ID`='1' 
```

或者想要更新一个或多个列/行：

```
UPDATE `table` Set Col1='Y' WHERE `ID` IN ('1','11','13') 
```*

# wordpress - Facebook喜欢按钮喜欢错误的网址

> ID：12033162
> 
> 赞同：0
> 
> 时间：2012-08-20T06:32:31.063
> 
> 标签：wordpress, facebook, redirect, button, facebook-like

首先，我已经看到了类似的帖子，但它们并不是我要问的。

我使用 Facebook Dev 为我的网站创建了一个点赞按钮，将代码插入其中，然后按钮就出现了。唯一的问题是当我单击按钮时它喜欢错误的 url。

我很确定问题是我将其设置为自动从 mydomain.com 重定向到最近的帖子。我认为这是用like按钮搞砸了作品，并导致它喜欢mydomain.com/mostrecentpost，而不是简单地喜欢mydomain.com。

有没有办法纠正这个问题而不必摆脱重定向（因为这不是一个选项）？

抱歉，如果这有点罗嗦，想确保我充分解释了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:10:29.020

> 有没有办法纠正这个问题而不必摆脱重定向（因为这不是一个选项）？

在请求的用户代理标头指向它是[Facebook 的爬虫](https://developers.facebook.com/docs/opengraphprotocol/#bestpractices)*的情况下*，不要重定向；

或将规范 URL 设置`http://example.com/mostrecentpost`为仅`http://example.com/`使用适当的 Open Graph 元标记。（尽管这意味着您将无法再点赞一个帖子，因为您的所有帖子都将指向您的基本域作为“真实”网站；所以第一个可能是更好的选择。）

# javascript - 可以insertBefore插入HTML标签吗？

> ID：12033165
> 
> 赞同：0
> 
> 时间：2012-08-20T06:33:01.120
> 
> 标签：javascript

在下面的脚本中，我在 DIV 的开头插入了一些代码。

```
 var mydiv = document.getElementById("myDIV");
    var mycontent = document.createElement("p");
    mycontent.insertBefore(document.createTextNode("Hello <b>World</b><br><bR>"));
    mydiv.insertBefore(mycontent,mydiv.firstChild); 
```

在我的网站上，代码作为文本插入，HTML 格式被忽略。有谁知道如何使用 javascript 将代码插入到 DIV 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T06:35:03.400

不能插入标签，只能插入 DOM 节点。DOM 节点可以是文本节点或元素节点（或其他一些您几乎肯定不关心的节点）。

区别很重要，因为您可以插入`<div></div>`但不能`<div>`。

要创建一个元素：

```
var myElement = document.createElement('div'); 
```

您的特定示例：

```
var myContent = document.createElement('p');
myContent.appendChild(document.createTextNode('Hello'));
var bold = document.createElement('b'); // Please don't use presentational elements in 2012
bold.appendChild(document.createTextNode('World');
myContent.appendChild(bold);
myContent.appendChild(document.createElement('br')); // Please don't use line breaks as margin/padding substitutes
myContent.appendChild(document.createElement('br')); 
mydiv.insertBefore(mycontent,mydiv.firstChild); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T06:38:58.970

您可以与元素结合使用并`innerHTML`获得简单的解决方案：

```
var mydiv = document.getElementById("myDIV");
var mycontent = document.createElement("p");
mycontent.innerHTML = 'Hello <b>World</b><br><bR>';
mydiv.insertBefore(mycontent, mydiv.firstChild); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T06:38:46.227

为什么不

```
var mydiv = document.getElementById("myDIV");
var mycontent = document.createElement("p");
mycontent.innerHTML = "Hello <b>World</b><br><bR>";
mydiv.insertBefore(mycontent,mydiv.firstChild);​ 
```

# javascript - Spring Security 中的基本身份验证（身份验证失败消息）

> ID：12033167
> 
> 赞同：3
> 
> 时间：2012-08-20T06:33:14.370
> 
> 标签：javascript, jquery, html, spring-security, basic-authentication

我正在开发网站（HTML、javascript、jQuery、Ajax、css），我在服务器端使用 spring 中的基本身份验证。我在 HTTP 请求的授权标头中发送 Basic="Base64 Endcoded Username & password"。登录在正确的用户名和密码上工作正常。但是在失败时，它会向我显示输入用户名和密码的默认提示。我该怎么做才能不显示提示，而是应该得到一个错误代码。这样，我就可以显示正确的失败消息。

* * *

春季安全

http://www.springframework.org/schema/beans/spring-beans-3.0.xsd [http://www.springframework.org/schema/security](http://www.springframework.org/schema/security) [http://www.springframework.org/schema/security/spring-安全-3.0.3.xsd](http://www.springframework.org/schema/security/spring-security-3.0.3.xsd) ">

```
<http create-session="never"> 
    <intercept-url pattern="/rest/user*" access="ROLE_USER" /> 
    <logout logout-success-url="/index.jsp" invalidate-session="true" />
    <http-basic />
</http> 

<authentication-manager>
    <authentication-provider>
    <password-encoder hash="md5"/>
        <jdbc-user-service data-source-ref="dataSource" 
            users-by-username-query="
                select UserName as username, Password as user_password,true 
                from User where username=?" 

            authorities-by-username-query="
                select UserName as username,'ROLE_USER' from User where username=?" 

        />
    </authentication-provider>

</authentication-manager> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T07:30:44.243

经过这么多的障碍..终于我做到了。

我已经在我的博客上发布了

[http://swapgo20.wordpress.com/2012/10/21/website-spring-security-basic-authorization-in-javascript/](http://swapgo20.wordpress.com/2012/10/21/website-spring-security-basic-authorization-in-javascript/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:52:51.660

默认情况下，`AuthenticationEntryPoint`当身份验证过程失败时，该类将用户重定向到登录页面。要更改默认行为并提供自定义身份验证失败页面，您可以在 security.xml 文件中指定一个条目

```
<form-login login-processing-url="your-login-check" login-page="/login"
            username-parameter="j_username" password-parameter="j_password"
            authentication-failure-url="/login/authenticationFailure" /> 
```

应该是这样！您将被重定向到`authentication-failure-url`xml 属性中指定的页面。

# github-api - Github API - 找出谁关闭了拉取请求

> ID：12033171
> 
> 赞同：5
> 
> 时间：2012-08-20T06:33:41.500
> 
> 标签：github-api, pull-request

如何使用 Github API 找出谁关闭了拉取请求？

例如[，这个拉取请求](https://github.com/twitter/bootstrap/pull/4461)由 myakura 打开，由 markdotto 关闭。但是[https://api.github.com/repos/twitter/bootstrap/pulls/4461](https://api.github.com/repos/twitter/bootstrap/pulls/4461)没有显示对 markdotto 的任何引用。

# javascript - Mac App Store 之类的 Javascript 按钮更改

> ID：12033172
> 
> 赞同：0
> 
> 时间：2012-08-20T06:33:41.990
> 
> 标签：javascript, button, switch-statement

好的，我想做的是制作一个看起来与 Mac App Store 中的应用商店界面完全相同的页面。我想要一个页面，当您单击一个按钮时（例如在应用商店中购买应用程序的那个），它会更改为另一个按钮，然后当您单击第二个按钮时，它会下载文件并切换按钮回到第一个。

说得通？如果我能找到一种方法来做到这一点，那就太棒了，因为我没有太多的 Javascript 经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:40:39.370

好吧，不是一个 UX 人，但只是把我的想法提供帮助..

```
<div id="first button"></div>  //Shows on page.
<div id="second button"><Link to actual download link></div>  // hidden by default 
```

单击“第一个按钮”..首先隐藏并在同一位置显示“第二个按钮”。单击第二个将下载文件并显示第一个按钮。您可以使用 JS 进行 div 隐藏和显示。而已。应该管用。

# javascript - 刷新 div 会在 struts2 中创建一个副本

> ID：12033173
> 
> 赞同：0
> 
> 时间：2012-08-20T06:33:43.153
> 
> 标签：javascript, jquery, html, refresh

我是 Javascript 新手，所以请多多包涵。

我有代码在子窗口关闭时刷新父窗口的 div。问题是当 div 的内容刷新时它会创建一个副本，我不知道为什么。我的代码如下。

在`head`父母的标签内，我正在这样做：

```
<html>
<head>
<script language="javascript" type="text/javascript">
function ParentWindowFunction()
{
    $(".mydiv").load("Welcome.jsp");
    return false;
}
</script>
</head>
<body>

<div class="mydiv">
    <img src="<s:property  value="#session.img"/>"  id="img"  width="200"  height="150" />
</div>
</body>

</html> 
```

在子窗口的`head`标签内，我有：

```
<html>
<head>
<script type="text/javascript">
function refreshAndClose() 
{

    window.opener.ParentWindowFunction();

    window.close();
}
</script>
</head>
<body  onbeforeunload="refreshAndClose();">
...
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:04:53.057

我找到了解决问题的方法，而不是刷新 div 我正在重新加载整个页面，就像这样

```
<script>     
    function winopen()
    {
        chatterinfo = window.open('fileupload.jsp',"chatterwin","scrollbars=no,resizable=yes, width=400, height=300, location=no, toolbar=no, status=no");

        chatterinfo.focus();        
    }
</script>
<script language="javascript" type="text/javascript">
    function ParentWindowFunction()
    {
        window.location="Login.action?uname=${uname}&&pass=${pass}";
    }
</script>
</head>
<body>

<div class="mydiv">
<img src="<s:property  value="#session.img"/>"  id="img"  width="200"  height="150" />
</div>
</body>
</html> 
```

在子窗口的头部标签内，我有：

```
<html>
<head>
<script type="text/javascript">
    function refreshAndClose() 
    {
        window.opener.ParentWindowFunction();
        window.close();
    }
</script>
</head>
<body >
<input type=button onclick="refreshAndClose();" />
</body>
</html> 
```

# jquery - 如何使用 jQuery 循环遍历字段值并更新具有相似 ID 的其他值？

> ID：12033176
> 
> 赞同：2
> 
> 时间：2012-08-20T06:34:14.737
> 
> 标签：jquery

我有以下表格：

```
<form >
   <input value="333" id="modal_Order_1" class="update-grid">
   <input value="xxx" id="modal_Link_1" class="update-grid">
   <input value="yyy" id="modal_Title_1" class="update-grid">
</form> 
```

和一张桌子：

```
<tr id="row_1" >
<td><input id="input_Order_1"></td>
<td><input value="x" id="input_Link_1"></td>
<td><input value="y" id="input_Title_1"></td>
</tr> 
```

我有以下代码，一一从表单中获取值并更新表格行。请注意，我的代码知道行号，因为它在 rowNum 变量中：

```
var rowNum = oSubmit.rownum;
var order = $form.find("#Content_Order").val();
var link = $form.find("#Content_Link").val();
var title = $form.find("#Content_Title").val();
$("#input_Order_" + rowNum).val(order);
$("#input_Link_" + rowNum).val(link);
$("#input_Title_" + rowNum).val(title); 
```

有没有一种方法可以为表单上具有 update-grid 类的每个输入值循环替换上面的代码，然后更新名称最后部分匹配的表字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T06:43:40.273

试试这个：

```
$('.update-grid').each(function(){
   var id = this.id.replace('modal', '');
   $('#input'+id).val(this.value)
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T06:44:01.017

```
$.each($('.update_grid'), function(i,e) {
    var ID = e.id.replace('modal', 'input');
    $("#"+ID).val(e.value);
}); 
```

# c++ - 您将如何在 C++11 中实现自己的读/写锁？

> ID：12033188
> 
> 赞同：45
> 
> 时间：2012-08-20T06:35:25.893
> 
> 标签：c++, multithreading, c++11, locking, readwritelock

我有一组需要用读/写锁保护的数据结构。我知道 boost::shared_lock，但我想有一个使用 std::mutex、std::condition_variable 和/或 std::atomic 的自定义实现，以便我可以更好地理解它是如何工作的（稍后再调整它） .

每个数据结构（可移动，但不可复制）都将继承自一个名为 Commons 的类，该类封装了锁定。我希望公共界面看起来像这样：

```
class Commons {
public:
    void read_lock();
    bool try_read_lock();
    void read_unlock();

    void write_lock();
    bool try_write_lock();
    void write_unlock();
}; 
```

...这样它就可以被某些人公开继承：

```
class DataStructure : public Commons {}; 
```

我正在编写科学代码，通常可以避免数据竞争；这个锁主要是为了防止我以后可能会犯的错误。因此，我的优先级是低读取开销，因此我不会过多地妨碍正确运行的程序。每个线程可能会在自己的 CPU 内核上运行。

你能告诉我（伪代码可以）一个读者/作者锁吗？我现在拥有的应该是防止作家饥饿的变体。到目前为止，我的主要问题是 read_lock 在检查读取是否安全与实际增加读取器计数之间存在差距，之后 write_lock 知道要等待。

```
void Commons::write_lock() {
    write_mutex.lock();
    reading_mode.store(false);
    while(readers.load() > 0) {}
}

void Commons::try_read_lock() {
    if(reading_mode.load()) {
        //if another thread calls write_lock here, bad things can happen
        ++readers; 
        return true;
    } else return false;
} 
```

我对多线程有点陌生，我真的很想了解它。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-09-29T22:59:12.950

这是使用互斥锁和条件变量的简单读/写锁的伪代码。互斥 API 应该是不言自明的。假设条件变量有一个成员`wait(Mutex&)`（原子地！）删除互斥锁并等待条件发出信号。`signal()`用唤醒*一个*服务员或`signal_all()`唤醒所有服务员的情况发出信号。

```
read_lock() {
  mutex.lock();
  while (writer)
    unlocked.wait(mutex);
  readers++;
  mutex.unlock();
}

read_unlock() {
  mutex.lock();
  readers--;
  if (readers == 0)
    unlocked.signal_all();
  mutex.unlock();
}

write_lock() {
  mutex.lock();
  while (writer || (readers > 0))
    unlocked.wait(mutex);
  writer = true;
  mutex.unlock();
}

write_unlock() {
  mutex.lock();
  writer = false;
  unlocked.signal_all();
  mutex.unlock();
} 
```

但是，这种实现有很多缺点。

## 每当锁可用时唤醒所有服务员

如果大多数等待者都在等待写锁，这是浪费 - 毕竟大多数等待者将无法获取锁，并继续等待。简单地使用`signal()`是行不通的，因为您*确实*想唤醒所有等待读取锁解锁的人。因此，要解决这个问题，您需要单独的条件变量来提高可读性和可写性。

## 没有公平。读者饿死作家

您可以通过跟踪挂起的读写锁的数量来解决这个问题，或者一旦出现挂起的写锁就停止获取读锁（尽管你会饿死读者！），或者随机唤醒所有读者或一个写者（假设您使用单独的条件变量，请参阅上面的部分）。

## 锁没有按照请求的顺序处理

为了保证这一点，您需要一个真正的等待队列。例如，您可以为每个等待者创建一个条件变量，并在释放锁后向队列头部的所有读取器或单个写入器发出信号。

## 由于互斥锁，即使是纯读取工作负载也会导致争用

这个很难修复。一种方法是使用原子指令来获取读或写锁（通常是比较和交换）。如果由于锁定而导致获取失败，您将不得不退回到互斥锁。但是，正确地做到这一点非常困难。另外，仍然会有争论——原子指令远非免费，尤其是在具有大量内核的机器上。

## 结论

正确实现同步原语是**困难**的。实现高效和公平的同步原语**更加** **困难**。它几乎没有回报。linux 上的 pthreads，例如包含一个读/写锁，它使用 futexes 和原子指令的组合，因此它可能优于你在几天的工作中所能想到的任何东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-31T04:52:49.253

[检查这个类](http://www.glennslayden.com/code/win32/reader-writer-lock)：

```
//
// Multi-reader Single-writer concurrency base class for Win32
//
// (c) 1999-2003 by Glenn Slayden (glenn@glennslayden.com)
//
//

#include "windows.h"

class MultiReaderSingleWriter
{
private:
    CRITICAL_SECTION m_csWrite;
    CRITICAL_SECTION m_csReaderCount;
    long m_cReaders;
    HANDLE m_hevReadersCleared;

public:
    MultiReaderSingleWriter()
    {
        m_cReaders = 0;
        InitializeCriticalSection(&m_csWrite);
        InitializeCriticalSection(&m_csReaderCount);
        m_hevReadersCleared = CreateEvent(NULL,TRUE,TRUE,NULL);
    }

    ~MultiReaderSingleWriter()
    {
        WaitForSingleObject(m_hevReadersCleared,INFINITE);
        CloseHandle(m_hevReadersCleared);
        DeleteCriticalSection(&m_csWrite);
        DeleteCriticalSection(&m_csReaderCount);
    }

    void EnterReader(void)
    {
        EnterCriticalSection(&m_csWrite);
        EnterCriticalSection(&m_csReaderCount);
        if (++m_cReaders == 1)
            ResetEvent(m_hevReadersCleared);
        LeaveCriticalSection(&m_csReaderCount);
        LeaveCriticalSection(&m_csWrite);
    }

    void LeaveReader(void)
    {
        EnterCriticalSection(&m_csReaderCount);
        if (--m_cReaders == 0)
            SetEvent(m_hevReadersCleared);
        LeaveCriticalSection(&m_csReaderCount);
    }

    void EnterWriter(void)
    {
        EnterCriticalSection(&m_csWrite);
        WaitForSingleObject(m_hevReadersCleared,INFINITE);
    }

    void LeaveWriter(void)
    {
        LeaveCriticalSection(&m_csWrite);
    }
}; 
```

我没有机会尝试它，但代码看起来不错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-19T20:34:21.900

[您可以按照此处](https://en.wikipedia.org/wiki/Readers%E2%80%93writer_lock#Using_a_condition_variable_and_a_mutex)的确切 Wikipedia 算法实现 Readers-Writers 锁（我写了它）：

```
#include <iostream>
#include <thread>
#include <mutex>
#include <condition_variable>

int g_sharedData = 0;
int g_readersWaiting = 0;
std::mutex mu;
bool g_writerWaiting = false;
std::condition_variable cond;

void reader(int i)
{
    std::unique_lock<std::mutex> lg{mu};
    while(g_writerWaiting)
        cond.wait(lg);
    ++g_readersWaiting;
    // reading
    std::cout << "\n reader #" << i << " is reading data = " << g_sharedData << '\n';
    // end reading
    --g_readersWaiting;
    while(g_readersWaiting > 0)
        cond.wait(lg);
    cond.notify_one();
}

void writer(int i)
{
    std::unique_lock<std::mutex> lg{mu};
    while(g_writerWaiting)
        cond.wait(lg);
    // writing
    std::cout << "\n writer #" << i << " is writing\n";
    g_sharedData += i * 10;
    // end writing
    g_writerWaiting = true;
    while(g_readersWaiting > 0)
        cond.wait(lg);
    g_writerWaiting = false;
    cond.notify_all();
}//lg.unlock()

int main()
{
    std::thread reader1{reader, 1};
    std::thread reader2{reader, 2};
    std::thread reader3{reader, 3};
    std::thread reader4{reader, 4};
    std::thread writer1{writer, 1};
    std::thread writer2{writer, 2};
    std::thread writer3{writer, 3};
    std::thread writer4{reader, 4};

    reader1.join();
    reader2.join(); 
    reader3.join();
    reader4.join();
    writer1.join();
    writer2.join();
    writer3.join();
    writer4.join();

    return(0);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-01-16T22:09:16.157

我相信这就是您正在寻找的：

```
class Commons {
    std::mutex write_m_;
    std::atomic<unsigned int> readers_;

public:
    Commons() : readers_(0) {
    }

    void read_lock() {
        write_m_.lock();
        ++readers_;
        write_m_.unlock();
    }

    bool try_read_lock() {
        if (write_m_.try_lock()) {
            ++readers_;
            write_m_.unlock();
            return true;
        }
        return false;
    }

    // Note: unlock without holding a lock is Undefined Behavior!
    void read_unlock() {
        --readers_;
    }

    // Note: This implementation uses a busy wait to make other functions more efficient.
    //       Consider using try_write_lock instead! and note that the number of readers can be accessed using readers()
    void write_lock() {
        while (readers_) {}
        if (!write_m_.try_lock())
            write_lock();
    }

    bool try_write_lock() {
        if (!readers_)
            return write_m_.try_lock();
        return false;
    }

    // Note: unlock without holding a lock is Undefined Behavior!
    void write_unlock() {
        write_m_.unlock(); 
    }

    int readers() { 
        return readers_; 
    }
}; 
```

对于 C++17 以来的记录，我们有 std::shared_mutex，请参阅：[https ://en.cppreference.com/w/cpp/thread/shared_mutex](https://en.cppreference.com/w/cpp/thread/shared_mutex)

# php - Aptana 3，php代码背景高亮

> ID：12033197
> 
> 赞同：3
> 
> 时间：2012-08-20T06:36:05.617
> 
> 标签：php, ide, aptana, aptana3

有人可以帮助删除 .php 中的 php 代码背景突出显示吗`Aptana 3.2.1`？

在早期版本的 aptana 3 中它很好，现在 - 所有 php 代码（在 .php 文件中）都有突出显示的背景，我找不到主题、外观设置来更改它。

截屏：

![在此处输入图像描述](../Images/a465ccc9be5a9d124984c8c73e579fbf.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T08:29:34.747

在默认 Aptana Studio 主题中找到设置`Preferences > Aptana Studio > Themes`，需要更改名为 -`Embedded Source`

# facebook - 我是 AS3 开发人员，我想开始为 Facebook 开发应用程序。从什么开始？

> ID：12033206
> 
> 赞同：-3
> 
> 时间：2012-08-20T06:37:33.667
> 
> 标签：facebook, actionscript-3, flash, facebook-graph-api

听起来很简单。需要建议（关于书籍、资源等）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:56:43.973

作为滚动您自己的外部接口调用的替代方法，有这个帮助 api，至少曾经被 Facebook 和 Adob​​e 支持：[http ://code.google.com/p/facebook-actionscript-api/](http://code.google.com/p/facebook-actionscript-api/)

完成此操作后，您需要将[Facebook 开发人员应用程序](https://developers.facebook.com/)添加到您的 FB 帐户，该页面上的说明涵盖了您可能想要构建的不同类型的应用程序。

除了您可能希望对 Facebook API 进行特定调用以共享或点赞或其他方式之外，您只是在开发普通的 AS3 应用程序（Web、AIR 桌面或 AIR 移动），没有特殊要求或限制，但如果您正在构建一个画布应用程序以放置在 Facebook 本身上，您可能需要在开始之前考虑尺寸，并为一定数量的 FB chrome 留出余地。

在书籍方面，Packt 去年出版了一本专门针对该主题量身定制的书籍：[Flash Facebook Cookbook](http://my.safaribooksonline.com/book/-/9781849690720)。

其他书籍和教程中的示例大部分都是针对 JavaScript 的，这当然和 AS 很相似，而且上面提到的 API 非常遵循 JS SDK 的形式，因此您应该会发现将示例从 JS 翻译为 AS 很简单. 请注意，Facebook API 在过去 18 个月中经历了重大发展，并且继续快速发展，因此示例和教程很快就会过时。

# magento - 如何将登录表单放入 Magento 的 Cms 页面？

> ID：12033208
> 
> 赞同：4
> 
> 时间：2012-08-20T06:37:58.290
> 
> 标签：magento

我想在 Magento 的 CMs 页面中添加一个登录表单，我尝试添加这个：

```
{{block type=”core/template”  template=”customer/form/login.phtml”}} 
```

在`content`CMS 页面的部分中，但它不起作用。请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T06:12:15.910

这段代码终于为我代言了。

```
{{block type ="Mage_Customer_Block_Form_login" template="customer/form/login.phtml" }} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:44:13.597

在您的主题中打开 cms.xml 并找到以下内容

```
<reference name="content">
<block type=”cms/page” name=”cms_page”/>
</reference> 
```

换成这个

```
<reference name="content">
<block type="customer/form_login" name="customer_form_login" template="customer/form/login.phtml"/>
<block type=”cms/page” name="cms_page"/>
</reference> 
```

然后你的代码应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:12:45.123

如果您的 magento 版本低于 1.6，请使用以下代码。

```
{{block type="customer/login" template="customer/form/login.phtml"}} 
```

如果您的 Magento 版本是 1.6 或更高版本

```
{{block type="customer/login" template="persistent/customer/form/login.phtml"}} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-24T12:44:37.430

试试这个：

```
{{block type="customer/form_login" name="customer_form_login_block" template="persistent/customer/form/login.phtml"}} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-01T18:39:10.027

这是一种无需修改任何文件的方法：

进入“设计”选项卡在“自定义布局更新 XML”中添加以下内容：

> <reference name="content">
> <block type="customer/form_login" name="customer_form_login" template="customer/form/login.phtml" after="-"/>
> </reference>

你去吧。您也可以在类别中执行此操作。

在 Magento 1.8.1 中测试（应该适用于大多数版本）

# c - 为什么我没有得到数组第一个元素的值？

> ID：12033209
> 
> 赞同：1
> 
> 时间：2012-08-20T06:38:10.053
> 
> 标签：c

在这个程序中，我提到的所有三个地址都引用了数组的第一个元素，但是当我取消引用它们时，为什么我没有得到数组第一个元素的值呢？

```
int main()  
{  
    int a[5] = {1,2,3,4,5};  
    printf("address a = %d\n",a);  
    printf("address of a[0] = %d\n",&a[0]);  
    printf("address of first element = %d\n",&a);  
    printf("value of first element of the array a =%d\n",*(a));  
    printf("first element =%d\n",*(&a[0]));  
    printf("a[0] = %d\n",*(&a));//this print statement again prints the address of a[0] 

    return 0;  
} 
```

我得到了前 3 个打印语句的数组第一个元素的地址，`a`当我取消引用所有 3 个时，我只得到第四个和第五个打印语句的值，而不是第六个打印语句（附有注释）的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T06:50:09.010

要记住的事情：

1.  数组的名称是它的第一个元素的地址

因此，由于数组名称是 a，那么打印 a 将为您提供`a[0]`（这也是数组的地址）的地址，即您将获得`&a[0]`(same as `a`) 的值并且`&a`是相同的

现在，您知道`a`并`&a[0]`引用第一个元素，您可以通过 3 种方式取消引用第一个元素：-

*   `*a`
*   `*(&a[0])`
*   `a[0]`- 请注意，在内部，这将转换为：`*(a+0)`

要记住的事情：

   2\. 给指针加一个整数，得到指向下一个元素的指针

这里，`&a`指向整个数组的地址。虽然 的值与and`&a`相同，但是，它是指向数组的指针，而不是指向第一个元素的指针。因此，如果您将 1 添加到ie ，您将超出此数组。`&a[0]``a``&a``&a + 1`

类似地，作为`&a[0]`和`a`是指向第一个元素的指针，向它们加 1 将为您提供数组的下一个元素（如果数组中定义了超过 1 个项目）。即`(a+1)`并`&a[0] + 1`从第一个元素指向下一个元素。现在，为了取消引用它们，您可以使用：

*   `*(a+1)`
*   `*(&a[0] +1)`
*   `a[1]`- 请注意，在内部，这将转换为：`*(a+1)`

添加更多信息以消除以下疑问：

*如果如this answer所述，数组的名称是其第一个元素的地址，那么 &a 将是第一个元素的地址。*

这个疑问的答案是“不”和“是”。

*   不，因为没有类似地址的地址。
*   为了理解是的，请考虑以下情况：

    假设您有 10 盒巧克力，每个盒子包含 5 块巧克力（在盒子内排成一排）并且盒子排成一排。

![5 盒，每盒 5 块巧克力](../Images/03241ab50cf9820a5e6f57a8419a88fe.png)

好的，足够的巧克力来解释。

在这里，盒子代表巧克力阵列。因此，我们有 5 盒每盒 5 块巧克力。对此的声明将是：

将其转换为 C，假设它`a`是一个包含 5 个数字的数组。

-现在，如果我让你告诉我第一个盒子的位置，那么，你将把它称为`&a`。如果我让你给我第二个盒子的位置，那么你将把它称为`&a +1`.

*   如果我让你告诉我第一个盒子里第一块巧克力的位置，那么你将把它称为`&a[0]`or`(a+0)`或`a`。
*   如果我让你告诉我第二个巧克力在第一个盒子里的位置，那么你将把它称为`&a[1]`or`(a+1)`或`a+1`。**注意**：在`(a+1)`中，as`a`是数组的名称，它是第一个元素的地址，它是一个整数。因此，`a`加 1 表示第二个元素的地址。
*   如果我让你告诉我第二盒巧克力的位置，那么，你会称它为`(&a+1)`
*   如果我让你告诉我第二盒巧克力中第一块巧克力的位置，那么，你将把它称为`*(&a+1)`或`*((&a+1) + 0)`
*   如果我让你告诉我第二盒巧克力中第三块巧克力的位置，那么，你会称它为`(*(&a+1))+2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:22:50.930

C 标准规定，类型为“类型数组”的表达式转换为类型“类型指针*”**并*指向数组的初始元素，除非表达式是`&`（或其他三个例外，如下所述）的操作数但与这个问题无关）。以下是这适用于您的示例的方式：

*   `a`是一个 int 数组。它被转换为指向 int 的指针。该值是 的初始元素的地址`a`。
*   在`&a[0]`中，`a[0]`首先处理。`a`再次转换为指向 int 的指针。然后应用下标运算符，它为数组的初始元素生成一个左值。最后，`&`取这个左值的地址，所以这个值就是 的初始元素的地址`a`。
*   其中`&a`,`a`是 的操作数`&`，因此**不会**`a`转换为指向 int 的指针。它仍然是一个数组，并获取它的地址。结果的类型是“指向 int 数组的指针”，它的值是数组的地址，它等于初始元素的地址。**`&a`**

 **为了完整起见：C 标准中的相关规则是 6.3.2.1 第 3 段。例外情况是：

*   数组表达式是 的操作数`&`。
*   数组表达式是 的操作数`sizeof`。
*   数组表达式是 的操作数`_Alignof`。
*   数组表达式是用于初始化数组的字符串文字。

最后一个意味着 in `char s[] = "abc";`,`"abc"`不转换为指向初始元素的指针；它仍然是一个数组，用于初始化 s。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T06:57:07.640

为了回答您的问题，根据定义，运算符`*`和`&`是这样的，它们可以抵消。获取变量的地址然后取消引用会返回变量。这是一个数组，`a`. 在大多数情况下，数组“衰减”到指针，因此您再次看到的是第一个元素的地址。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-20T06:43:31.260

是`a`一个指针并且`a[0]`是`*(a+0)`。所以当你写的时候`*(&a)`，你并没有取消引用它。**

# django - django {% static "admin/" %}' 生产 'admin' 仅在生产中缺少斜杠

> ID：12033210
> 
> 赞同：3
> 
> 时间：2012-08-20T06:38:18.723
> 
> 标签：django

好的，这里很奇怪的问题。

在管理站点的 base.html 文件中，他们有这个：

```
<script type="text/javascript">window.__admin_media_prefix__ = "{% filter escapejs %}{% static "admin/" %}{% endfilter %}";</script> 
```

重要的部分是这个`{% static "admin/" %}`。它仅用于 javascript 中的少量内容，其中之一是日期小部件的日历图标 url。

在本地这工作得很好，并且 url 最终成为`/static/admin/`. 然而，在生产中，它最终`http://myaws.s3.address/admin`没有尾部斜杠。

我一生都想不通这怎么可能发生。这是 Django 1.4。我`STATIC_URL`的 for aws 以斜杠结尾。这必须在某个地方的静态文件应用程序中吗？我不知道如何追踪这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T06:59:47.963

嘎！

发现了问题。它是 django 存储中的一个错误（特别是 s3）：

[http://code.larlet.fr/django-storages/issue/121/s3boto-admin-prefix-issue-with-django-14](http://code.larlet.fr/django-storages/issue/121/s3boto-admin-prefix-issue-with-django-14)

# android - 类在使用动作栏夏洛克时未发现异常

> ID：12033220
> 
> 赞同：2
> 
> 时间：2012-08-20T06:39:31.953
> 
> 标签：android, actionbarsherlock

我从主站点本身下载了 actionbar sherlock 库。我试图在我的应用程序中使用它。

```
import com.actionbarsherlock.app.SherlockActivity;
import android.os.Bundle;

public class Sherlockactivity extends SherlockActivity {
    /** Called when the activity is first created. */
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    } 
```

}

但是当我使用默认的 main.xml 布局启动应用程序时，我得到了这个异常。

```
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.android.sherlock/com.android.sherlock.SherlockActivity}: java.lang.ClassNotFoundException: com.android.sherlock.SherlockActivity in loader dalvik.system.PathClassLoader[/data/app/com.android.sherlock-1.apk] 
```

我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.android.sherlock"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="14" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.Sherlock" >
        <activity
            android:name=".SherlockActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我刚开始使用支持库。不知道如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T07:47:34.903

*   下载夏洛克动作条 zip。
*   来自现有源的新建->android 项目
*   从 sherlock bar 文件夹中选择库文件夹
*   在项目的属性中，*->android->add library*并设置您复制的文件夹。

请参阅[通过 ActionBarSherlock 在您的 Android 应用程序中使用 ActionBar](http://xrigau.wordpress.com/2012/03/15/using-an-actionbar-in-your-application-with-actionbarsherlock/)。

# android - 日历与android中的自定义添加帐户同步

> ID：12033224
> 
> 赞同：3
> 
> 时间：2012-08-20T06:39:52.923
> 
> 标签：android, calendar, sync

我想在日历中添加事件，我可以添加帐户，但我不知道如何与日历同步。

我应该创建一个新的日历 ID 吗？如何验证事件是在日历上创建的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:38:56.147

查看此**[Google 代码项目](http://code.google.com/p/android-calendar-provider-tests/)**，它将为您提供指导。

在该项目中，有一种方法可以为您提供与日历关联的帐户 ID 的 ID。

```
private int ListSelectedCalendars() {
        int result = 0;
        String[] projection = new String[] { "_id", "name" };
        String selection = "selected=1";
        String path = "calendars";

        Cursor managedCursor = getCalendarManagedCursor(projection, selection,
                path);

        if (managedCursor != null && managedCursor.moveToFirst()) {

            Log.i(DEBUG_TAG, "Listing Selected Calendars Only");

            int nameColumn = managedCursor.getColumnIndex("name");
            int idColumn = managedCursor.getColumnIndex("_id");

            do {
                String calName = managedCursor.getString(nameColumn);
                String calId = managedCursor.getString(idColumn);
                Log.i(DEBUG_TAG, "Found Calendar '" + calName + "' (ID="
                        + calId + ")");
                // You have to give email id in below line, right now i puted my email id
                if (calName != null && calName.contains("vimalrajpara2006@gmail.com")) {
                    result = Integer.parseInt(calId);
                }
            } while (managedCursor.moveToNext());
        } else {
            Log.i(DEBUG_TAG, "No Calendars");
        }

        return result;

    } 
```

基于该 ID，您还可以添加事件以及搜索。

```
private Uri MakeNewCalendarEntry(int calId/*Value received from ListSelectedCalendars function*/) {
        ContentValues event = new ContentValues();

        event.put("calendar_id", calId);
        event.put("title", "Today's Event [TEST]");
        event.put("description", "2 Hour Presentation");
        event.put("eventLocation", "Online");

        long startTime = System.currentTimeMillis() + 1000 * 60 * 60;
        long endTime = System.currentTimeMillis() + 1000 * 60 * 60 * 2;

        event.put("dtstart", startTime);
        event.put("dtend", endTime);

        event.put("allDay", 0); // 0 for false, 1 for true
        event.put("eventStatus", 1);
        event.put("visibility", 0);
        event.put("transparency", 0);
        event.put("hasAlarm", 0); // 0 for false, 1 for true

        Uri eventsUri = Uri.parse(getCalendarUriBase()+"events");

        Uri insertedUri = getContentResolver().insert(eventsUri, event);
        return insertedUri;
    } 
```

有关更多功能，请查看上面提到的 Google 代码项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T06:21:15.010

这对我有用，记得我正在使用 android 4.0

```
 void createCalendar(Datahelper dh, Context mContext, Account account) 
      { 
        final ContentValues v = new ContentValues(); 
            v.put(CalendarContract.Calendars.NAME,account.name);
            v.put(CalendarContract.Calendars.CALENDAR_DISPLAY_NAME, account.name);                  
        v.put(CalendarContract.Calendars.ACCOUNT_NAME, account.name);       
        v.put(CalendarContract.Calendars.ACCOUNT_TYPE, account.type); 
        v.put(CalendarContract.Calendars.CALENDAR_COLOR, Color.GREEN); 
        v.put(CalendarContract.Calendars.CALENDAR_ACCESS_LEVEL,Calendars.CAL_ACCESS_OWNER);         
        v.put(CalendarContract.Calendars.OWNER_ACCOUNT, account.name); 
        v.put(CalendarContract.Calendars._ID, 123);// u can give any id there and use same id any where u need to create event   
        v.put(Calendars.SYNC_EVENTS, 1); 
        v.put(Calendars.VISIBLE, 1); 
        Uri creationUri = asSyncAdapter(Calendars.CONTENT_URI, account.name, account.type); 
        Uri calendarData = mContext.getContentResolver().insert(creationUri, v); 
        long id = Long.parseLong(calendarData.getLastPathSegment()); 
       } 
    private Uri asSyncAdapter(Uri uri, String account, String accountType) 
        { 
        return uri.buildUpon().appendQueryParameter(CalendarContract.CALLER_IS_SYNCADAPTER, "true").appendQueryParameter                  (Calendars.ACCOUNT_NAME,account) .appendQueryParameter(Calendars.ACCOUNT_TYPE, accountType) .build(); 
        } 
        ContentValues values = new ContentValues();
        String eventTitle = eventsubject[i]; 
        values.put(Events.DTSTART, startMillis); 
        values.put(Events.HAS_ALARM, 1); 
        values.put(Events.DTEND, endMillis); 
        values.put(Events.EVENT_COLOR, Color.BLUE); 
        values.put(Events.TITLE, eventTitle); 
        values.put(Events.DESCRIPTION, ""); 
        values.put(Events.CALENDAR_ID, calendarId1); 
        values.put(Events.EVENT_TIMEZONE, TimeZone.getDefault() .getID()); 
        Uri uri = cr.insert(Events.CONTENT_URI, values); 
        long eventID = Long.parseLong(uri.getLastPathSegment()); 
        ContentValues reminders = new ContentValues(); 
        reminders.put(Reminders.EVENT_ID, eventID); 
        reminders.put(Reminders.METHOD, Reminders.METHOD_ALERT); 
        reminders.put(Reminders.MINUTES, 2); 
        Uri uri2 = cr.insert(Reminders.CONTENT_URI, reminders); 
        Log.e("Reminder", "addreminder" + uri2); 
```

# android - Get Calls 提供者内部结构

> ID：12033234
> 
> 赞同：1
> 
> 时间：2012-08-20T06:40:53.337
> 
> 标签：android, sqlite, android-contentprovider

我需要在不同的手机上获取呼叫提供商的内部结构（这主要是因为三星设备会导致问题，即底层**数据库架构**）。这是我的代码：

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        ............................

        dumpProvider();
    }

    private void dumpProvider() {

        Cursor cursor = getCallsCursor();
        try {
            BufferedWriter writer = getWriter();
            dumpColumnNames(cursor, writer);

            cursor.moveToFirst();
            do {
                dumpRecord(cursor, writer);
            } while (cursor.moveToNext());
            writer.close();
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            cursor.close();
        }

    }

    private void dumpRecord(Cursor cursor, BufferedWriter writer) throws IOException {
        String recordStr = "";
        int columnCount = cursor.getColumnCount();
        for (int columnIndex = 0; columnIndex < columnCount; columnIndex++) {
            recordStr += cursor.getString(columnIndex) + " ";
        }
        writer.append(recordStr);
        writer.newLine();
    }

    private void dumpColumnNames(Cursor cursor, BufferedWriter writer) throws IOException {
        String[] columnNames = cursor.getColumnNames();
        String columnNamesStr = "";
        for (String columnStr : columnNames) {
            columnNamesStr += columnStr + " ";
        }
        writer.append(columnNamesStr);
        writer.newLine();
    }

    private Cursor getCallsCursor() {
        ContentResolver cr = getContentResolver();
        Cursor cursor = cr.query(CallLog.Calls.CONTENT_URI, null, null, null, null);

        return cursor;
    }

    private BufferedWriter getWriter() throws IOException {
        ......................
    }

} 
```

在我的 LG 上运行**良好**，但在三星 S2 上运行时出现**异常**：

```
08-20 09:16:15.860: E/AndroidRuntime(19565): FATAL EXCEPTION: main
08-20 09:16:15.860: E/AndroidRuntime(19565): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.databasestrucutecollector/com.example.databasestrucutecollector.MainActivity}: android.database.sqlite.SQLiteException: no such column: sdn_alpha_id: , while compiling: SELECT sns_receiver_count, numberlabel, service_type, matched_number, type, contactid, lookup_uri, mime_type, sdn_alpha_id, sp_type, messageid, fname, simnum, lname, sns_pkey, account_id, formatted_number, call_out_duration, number, geocoded_location, account_name, is_read, raw_contact_id, source_data, cdnip_number, state, m_subject, date, real_phone_number, source_package, _id, sns_tid, name, normalized_number, name_reversed, _data, photo_id, logtype, reject_flag, has_content, m_content, country_code, frequent, cityid, bname, countryiso, numbertype, new, duration, cnap_name, address, e164_number, voicemail_uri FROM logs WHERE (logs.logtype=100 OR logs.logtype=110 OR logs.logtype=500 OR logs.logtype=800 OR logs.logtype=900 OR logs.logtype=1000 OR (logs.logtype=200 AND number NOT IN (SELECT number FROM logs WHERE number LIKE '%@%')) OR logs.logtype=300) AND ((((type != '4')))) ORDER BY date DESC
08-20 09:16:15.860: E/AndroidRuntime(19565):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
08-20 09:16:15.860: E/AndroidRuntime(19565):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
08-20 09:16:15.860: E/AndroidRuntime(19565):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
08-20 09:16:15.860: E/AndroidRuntime(19565):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
08-20 09:16:15.860: E/AndroidRuntime(19565):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-20 09:16:15.860: E/AndroidRuntime(19565):    at android.os.Looper.loop(Looper.java:137)
08-20 09:16:15.860: E/AndroidRuntime(19565):    at android.app.ActivityThread.main(ActivityThread.java:4511)
08-20 09:16:15.860: E/AndroidRuntime(19565):    at java.lang.reflect.Method.invokeNative(Native Method)
08-20 09:16:15.860: E/AndroidRuntime(19565):    at java.lang.reflect.Method.invoke(Method.java:511)
08-20 09:16:15.860: E/AndroidRuntime(19565):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
08-20 09:16:15.860: E/AndroidRuntime(19565):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
08-20 09:16:15.860: E/AndroidRuntime(19565):    at dalvik.system.NativeStart.main(Native Method)
08-20 09:16:15.860: E/AndroidRuntime(19565): Caused by: android.database.sqlite.SQLiteException: no such column: sdn_alpha_id: , while compiling: SELECT sns_receiver_count, numberlabel, service_type, matched_number, type, contactid, lookup_uri, mime_type, sdn_alpha_id, sp_type, messageid, fname, simnum, lname, sns_pkey, account_id, formatted_number, call_out_duration, number, geocoded_location, account_name, is_read, raw_contact_id, source_data, cdnip_number, state, m_subject, date, real_phone_number, source_package, _id, sns_tid, name, normalized_number, name_reversed, _data, photo_id, logtype, reject_flag, has_content, m_content, country_code, frequent, cityid, bname, countryiso, numbertype, new, duration, cnap_name, address, e164_number, voicemail_uri FROM logs WHERE (logs.logtype=100 OR logs.logtype=110 OR logs.logtype=500 OR logs.logtype=800 OR logs.logtype=900 OR logs.logtype=1000 OR (logs.logtype=200 AND number NOT IN (SELECT number FROM logs WHERE number LIKE '%@%')) OR logs.logtype=300) AND ((((type != '4')))) ORDER BY date DESC
08-20 09:16:15.860: E/AndroidRuntime(19565):    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:180)
08-20 09:16:15.860: E/AndroidRuntime(19565):    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:136)
08-20 09:16:15.860: E/AndroidRuntime(19565):    at android.content.ContentProviderProxy.query(ContentProviderNative.java:358)
08-20 09:16:15.860: E/AndroidRuntime(19565):    at android.content.ContentResolver.query(ContentResolver.java:317)
08-20 09:16:15.860: E/AndroidRuntime(19565):    at com.example.databasestrucutecollector.MainActivity.getContactsCursor(MainActivity.java:71)
08-20 09:16:15.860: E/AndroidRuntime(19565):    at com.example.databasestrucutecollector.MainActivity.dumpProvider(MainActivity.java:31)
08-20 09:16:15.860: E/AndroidRuntime(19565):    at com.example.databasestrucutecollector.MainActivity.onCreate(MainActivity.java:26)
08-20 09:16:15.860: E/AndroidRuntime(19565):    at android.app.Activity.performCreate(Activity.java:4470)
08-20 09:16:15.860: E/AndroidRuntime(19565):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
08-20 09:16:15.860: E/AndroidRuntime(19565):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931) 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:34:03.393

[正如这个答案](https://stackoverflow.com/a/11880353/1427177)中已经提出的那样，如果您知道需要查询的列，则可以指定一个选择：

```
String[] projection = new String[] {CallLog.Calls._ID, CallLog.Calls.CACHED_NAME, CallLog.Calls.DATE, CallLog.Calls.DURATION, CallLog.Calls.NUMBER, CallLog.Calls.TYPE };
Cursor cursor = context.getContentResolver().query( android.provider.CallLog.Calls.CONTENT_URI, projection, null, null, null ); 
```

但是，我仍在寻找一种无需选择即可查询*所有列的解决方案...*

这似乎是 S2 设备上的错误？有没有人在其他设备上也体验过？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:06:23.397

我不确定为什么你的代码崩溃了，对我来说似乎很好，

我写了一个方法来转储任何 ContentProvider uri 的所有数据，也许它会为你工作：

```
 cur = resolver.query(uri, null, null, null, sort);
        if (cur != null) {

            // BASIC STUFF
            Log.v(TAG, "count = " + cur.getCount());
            int columnCount = cur.getColumnCount();
            Log.v(TAG, "cols = " + columnCount);

            // PRINT ALL COLUMN NAMES
            cur.moveToFirst();
            StringBuilder sb = new StringBuilder();
            for (int i = 0; i < columnCount; i++) {
                sb.append(i).append(": ").append(cur.getColumnName(i)).append(", ");
            }
            Log.v(TAG, "COLUMNS: " + sb.toString());

            // PRINT ALL DATA
            do {
                sb = new StringBuilder();
                for (int i = 0; i < columnCount; i++) {
                    String value = cur.getString(i);
                    String name = cur.getColumnName(i);
                    sb.append(i).append(": ").append(value).append(". \t");
                }
                Log.v(TAG, sb.toString());
            } while (cur.moveToNext());
        } 
```

# html - 在单选按钮中移动文本

> ID：12033239
> 
> 赞同：0
> 
> 时间：2012-08-20T06:41:07.043
> 
> 标签：html, css, twitter-bootstrap

我怎样才能简单地移动文本，使其不会在`<input>`字段下方继续，而不`<div>`对文本进行换行？

![在此处输入图像描述](../Images/d9b7b2ff2e2a8aa595756ccf039f673f.png)

目前，我的 HTML 为：

```
<div class="answer">
<div class="control-group">
    <label class="radio">
        <input type="radio" id="a_0" name="a" value="86692726-ff5a-4f1f-b2f4-51a98e03eba0">
        Designer Brille Mode – Brille forum på Trendsales</label>
</div>
<div class="control-group">
    <label class="radio">
        <input type="radio" id="a_1" name="a" value="98f07484-5e65-47fc-bb46-b9a59125bdd2">
        Design by Me – unika og hjemmelavede annoncer på Trendsales</label>
</div>
<div class="control-group">
    <label class="radio">
        <input type="radio" id="a_2" name="a" value="248e7343-ddf7-4d61-94fa-e5425fa5f54b">
        Dansk Børne Mode på Trendsales</label>
</div>
</div> 
```

我正在使用[Bootstrap CSS Framework](http://twitter.github.com/bootstrap/base-css.html#forms) ，可以[在 JsBin](http://jsbin.com/epagep/1/)中找到一个**Live 示例**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:54:24.050

第一步：不要`input`用`label`.

第二步：将&的默认值更改为`display`，设置和。`input``label``block``width``float them`

所以 CSS 将类似于：

```
.answer {width:200px;overflow:hidden;}
input,label {display:block;float:left}
input {clear:left;width:16px;}
label {width:184px;} 
```

**演示：http:** [//jsfiddle.net/6v8Dc/](http://jsfiddle.net/6v8Dc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:46:32.800

`&nbsp;`而不是常规空间或[`display: inline-block;`](http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T06:53:41.920

***[演示](http://tinkerbin.com/9e4G3Oji)***

嗨，现在曾经`white-space nowrap`像这样

```
.control-group {
    white-space: nowrap;
} 
```

***[演示](http://tinkerbin.com/9e4G3Oji)***

# linux - ssh 代理在 cron 作业中转发

> ID：12033249
> 
> 赞同：3
> 
> 时间：2012-08-20T06:42:22.420
> 
> 标签：linux, ssh

我想知道为什么 ssh 代理转发在 cron 作业中不起作用。我有一个简单的脚本，例如：

```
ssh -A remote_host "ls ~" 
```

我可以在不输入任何密码的情况下运行此脚本，但是将其放入 cron 作业后，它总是失败：

```
Permission denied, please try again.

Received disconnect from ip_of_remote_host: 2: Too many authentication failures for myuser 
```

谁能告诉我如何解决这个问题？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:12:21.310

当您启动 ssh-agent 时，您需要将 SSH_AGENT_PID 或 SSH_AUTH_SOCK 存储在一个 env 文件中，并在您的 ssh 脚本中获取它，

这是我使用的一个脚本，很久以前从网上抓取的。

```
SSH_ENV=$HOME/.ssh/environment
function start_agent {
     echo "Initialising new SSH agent..."
     /usr/bin/ssh-agent | sed 's/^echo/#echo/' > ${SSH_ENV}
     echo succeeded
     chmod 600 ${SSH_ENV}
     . ${SSH_ENV} > /dev/null
     ssh-add id_rsa
}
if [ -f "${SSH_ENV}" ]; then
     . ${SSH_ENV} > /dev/null
     ps -ef | grep ${SSH_AGENT_PID} | grep ssh-agent$ > /dev/null || {
         start_agent;
     }
else
     start_agent;
fi 
```

如果密钥受密码保护，则手动运行它，它将存储在 $HOME/.ssh/environment 中，例如

```
SSH_AUTH_SOCK=/tmp/ssh-KldGwK6643/agent.6643; export SSH_AUTH_SOCK;
SSH_AGENT_PID=6644; export SSH_AGENT_PID; 
```

在你的 crontab 中。$HOME/.ssh/environment && ssh -A blabla

如果您的服务器重新启动，您需要再次手动运行 start_agent 脚本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T07:12:45.060

您必须在 ssh 客户端设置环境变量`SSH_AUTH_SOCK`才能启用 ssh-agent 功能（其中 crontab 没有为您设置）。

```
*/x * * * * SSH_AUTH_SOCK=agent-sock-file ssh remote "command" 
```

确保`agent-sock-file`crontab 运行时存在

# asp.net-mvc-3 - 在带有实体框架的 asp.net MVC 中键入由慢速 DB 引起的延迟时进行搜索

> ID：12033250
> 
> 赞同：3
> 
> 时间：2012-08-20T06:42:42.003
> 
> 标签：asp.net-mvc-3, entity-framework-4

当您使用 mvc 为网站键入功能时，我正在实现搜索。

我的控制器接受一个 Searchstring 参数并相应地返回记录。

我所做的是使用这个 javascript 将我的控制器调用到一个 div 中：

```
$("#SearchField").keyup(function (event) {
    $.ajax({
        cache: false,
        url: 'FolderList?searchString=' + $("#SearchField").val(),
        success: function (data) {
            $('#FolderList').empty().html(data);
        }
    });
}); 
```

这是我的控制器代码：

```
public ActionResult Search(string searchString, int? page)
        {

            var folders = db.Folders.AsQueryable();

            if (!String.IsNullOrEmpty(searchString))
            {
                folders = folders.Where(p => p.SearchField.ToLower().Contains(searchString.ToLower()));
            }

            int pageSize = Convert.ToInt32(System.Configuration.ConfigurationManager.AppSettings["FolderPageSize"]);
            int pageNumber = (page ?? 1);

            return View(folders.ToPagedList(pageNumber, pageSize));
        } 
```

问题是我在控制器（文件夹）中请求的数据库实体加载非常缓慢（数据库问题）。当您键入功能时，它会使搜索滞后很多，并且根本不可用。这是一个我无法从源头上解决的问题，我必须处理它。

所以我的问题是：有没有办法在内存中加载文件夹数据库实体，所以加载页面需要很长时间，但每次调用控制器之后都会很快。还是我实现这一目标的方式错了？还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T06:46:30.757

如果*文件夹*不包含大量数据，则在应用程序启动时加载所有行并将它们存储在缓存中是完全合理的，例如

```
Cache["folders"] = (from f in folders select f).ToList(); 
```

然后，更换

```
folders = folders.Where(p => p.SearchField.ToLower().Contains(searchString.ToLower())); 
```

和

```
folders = Cache["folders"].Where(p => p.SearchField.ToLower().Contains(searchString.ToLower())); 
```

请记住，如果应用程序域回收，缓存将清空。如果读取所有必要的行来填充缓存需要很长时间，您可能需要计划在应用程序域启动/回收时预热缓存。

# java - 用 Java 解决 n-puzzle（滑动拼图）的迭代深化 A Star (IDA*)

> ID：12033252
> 
> 赞同：3
> 
> 时间：2012-08-20T06:42:43.430
> 
> 标签：java, artificial-intelligence, puzzle, graph-algorithm, heuristics

我已经实现了一个能够用 A*解决[n 谜题的程序。](http://en.wikipedia.org/wiki/Fifteen_puzzle)由于状态空间太大，我无法预编译它，我必须在运行时计算可能的状态。以这种方式，A* 对于 3 拼图工作正常，但对于 4 拼图可能需要太长时间。使用通过线性冲突调整的曼哈顿距离，如果最优解需要大约 25 次移动仍然很快，大约 35 需要 10 秒，对于 40 需要 180 秒。我还没有尝试更多。
我认为那是因为我必须保留所有访问过的状态，因为我使用的函数是可接受的，但（我认为）不一致（我也尝试了 Hamming 和 Gaschnig 距离等等）。由于解决方案的空间是一个图，因此启发式也必须是一致的，否则算法可能会循环或不是最优的。这就是为什么我保留所有访问过的节点（它也写在“AI：一种现代方法”一书中）。但无论如何，这个存储一点也不慢。减慢的是保持要访问的节点队列有序。
所以我决定尝试 IDA*，正如我所见，它不需要这种存储（但我仍然必须保留所有访问过的状态以避免循环）。对于需要 35 次或更少移动的解决方案，它更快，但对于 40 次移动，它要慢得多。
这是我的代码。难道我做错了什么？

```
public static State solveIDAStar(State initialState) {
    int limit = initialState.getManhattanDistance() + 2 * initialState.getLinearConflicts();
    State result = null;
    while(result == null) {
        visitedStates.add(initialState); // It's a global variable
        result = limitedSearch(initialState, limit);
        limit = newLimit;
        visitedStates.clear();
    }
    return result;
}

public static State limitedSearch(State current, int limit) {
    for(State s : current.findNext()) {
        if(s.equals(GOAL)) {
            s.setParent(current);
            return s;
        }
        if(!visitedStates.contains(s)) {
            s.setPathCost(current.getPathCost() + 1);
            s.setParent(current);
            int currentCost = s.getManhattanDistance() + 2 * s.getLinearConflicts() + s.getPathCost();
            if(currentCost <= limit) {
                visitedStates.add(s);
                State solution = limitedSearch(s, limit);
                if(solution != null)
                    return solution;
            } else {
                if(currentCost < newLimit)
                    newLimit = currentCost;
            }
        }
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T07:26:00.583

旧东西下移了。

更改以便 newLimit 可以跳过步骤（最好的解决方案）：

```
State bestSolution; // add this global

public static State solveIDAStar(State initialState) {
    int limit = initialState.getManhattanDistance() + 2 * initialState.getLinearConflicts();
    bestSolution = null; // reset global to null
    State result = null;
    while(result == null) {
        visitedStates.add(initialState); // It's a global variable
        newLimit = INFINITY;
        result = limitedSearch(initialState, limit);
        limit = newLimit;
        visitedStates.clear();
    }
    return result;
}

public static State limitedSearch(State current, int limit) {
    for(State s : current.findNext()) {
        if(s.equals(GOAL)) {
            s.setParent(current);
            return s;
        }
        if(!visitedStates.contains(s)) {
            s.setPathCost(current.getPathCost() + 1);
            s.setParent(current);
            int currentCost = s.getManhattanDistance() + 2 * s.getLinearConflicts() + s.getPathCost();
            if(currentCost <= limit) {
                visitedStates.add(s);
                State solution = limitedSearch(s, limit);
                if(solution != null &&
                   (bestSolution == null || solution.getPathCost() < bestSolution.getPathCost()))
                        bestSolution = solution; // cache solution so far
            } else {
                if(currentCost < newLimit)
                    newLimit = currentCost;
            }
        }
    }
    return null;
} 
```

* * *

## 原始答案

所以我找到了一个开源实现。神奇的是，它也在java中。

该应用程序可以在这里测试：http: [//n-puzzle-solver.appspot.com/](http://n-puzzle-solver.appspot.com/)

具体相关的源代码是： [http ://code.google.com/p/julien-labs/source/browse/trunk/SlidingPuzzle/src/be/dramaix/ai/slidingpuzzle/server/search/IDAStar.java](http://code.google.com/p/julien-labs/source/browse/trunk/SlidingPuzzle/src/be/dramaix/ai/slidingpuzzle/server/search/IDAStar.java)

不确定下面建议的第一次更改可能会改变多少时间，但我很确定您需要进行第二次更改。

* * *

## 第一次改变

通过对比代码，你会发现这个函数

```
private Node depthFirstSearch(Node current, int currentCostBound, State goal) 
```

基本上是你在这里的功能

```
public static State limitedSearch(State current, int limit) 
```

Julien Dramaix 的实现没有：

```
if(!visitedStates.contains(s)) {
    ...
    visitedStates.add(s); 
```

所以把这两条线拿出来测试一下。

* * *

## 第二次改变

您的函数`public static State solveIDAStar(State initialState)`在 while 循环中做了一些奇怪的事情。

失败一次后，将最大深度（限制）设置为无穷大。基本上，在第 1 次迭代中，您会尝试找到与您的启发式方法一样好的解决方案。然后你试图找到任何解决方案。这不是**迭代深化**。

迭代深化意味着每次尝试时，都要深入一点。

确实，查看 中的 while 循环`public PuzzleSolution resolve(State start, State goal)`，您会发现`nextCostBound+=2;`. 这意味着，每次尝试时，请尝试通过最多 2 个动作找到解决方案。

* * *

否则，其他一切看起来都相似（尽管您对 State 类的确切实现可能略有不同）。

如果效果更好，您可能还想在[http://code.google.com/p/julien-labs/source/browse/#svn%2Ftrunk%2FSlidingPuzzle%2Fsrc%2Fbe%2Fdramaix%上尝试其他一些启发式方法2Fai%2Fslidingpuzzle%2Fclient](http://code.google.com/p/julien-labs/source/browse/#svn%2Ftrunk%2FSlidingPuzzle%2Fsrc%2Fbe%2Fdramaix%2Fai%2Fslidingpuzzle%2Fclient)。

启发式方法位于 server/search/heuristic 文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T21:07:20.850

一个小问题：您说“缓慢的是保持要访问的节点队列有序。”。在这种情况下，您可以使用“优先堆”。这是一个偏序队列，它总是返回 e 队列中的最小（或最大）项，插入、检索 - 删除是 O(log n)，因此这可以使您的初始 A* 算法更快一些。这里给你一个简单的实现，但是是用C#做的，你需要把它翻译成Java...

```
public class PriorityHeap<T>
{
    private int count;
    private int defaultLength = 10;
    private PriorityHeapNode[] array;
    private bool isMin;

    /// <summary>
    /// 
    /// </summary>
    /// <param name="isMin">true si quiere que la ColaHeap devuelva el elemento de menor Priority, falso si quiere que devuelva el de mayor</param>
    public PriorityHeap(bool isMin)
    {
        this.count = 0;
        this.isMin = isMin;
        this.array = new PriorityHeapNode[defaultLength];
    }
    public PriorityHeap(bool isMin, int iniLength)
    {
        this.count = 0;
        this.isMin = isMin;
        this.defaultLength = iniLength;
        this.array = new PriorityHeapNode[defaultLength];
    }

    public class PriorityHeapNode
    {
        T valor;
        int _priority;

        public PriorityHeapNode(T valor, int _priority)
        {
            this.valor = valor;
            this._priority = _priority;
        }

        public T Valor
        {
            get
            { return this.valor; }
        }
        public double Priority
        {
            get
            { return this._priority; }
        }

    }
    public int Count
    { get { return this.count; } }

    /// <summary>
    /// Devuelve true si la cola devuelve el valor de menor Priority, falso si el de mayor
    /// </summary>
    public bool IsMin
    { get { return isMin; } }

    /// <summary>
    /// Devuelve y quita el Valor Minimo si la cola lo permite,si no, retorna null
    /// </summary>
    /// <returns></returns>
    public PriorityHeapNode GetTopAndDelete()
    {
        PriorityHeapNode toRet;
        if (count > 0)
        {
            if (count == 1)
            {
                toRet = array[0];
                array[0] = null;
                count--;
                return toRet;
            }
            else
            {
                toRet = array[0];
                array[0] = array[count - 1];
                array[count - 1] = null;
                HeapyfiToDown(0);
                count--;
                return toRet;
            }
        }
        else return null;

    }

    /// <summary>
    /// Devuelve el tope pero no lo borra
    /// </summary>
    /// <returns></returns>
    public PriorityHeapNode GetTop()
    {
        return array[0];
    }
    public void Insert(PriorityHeapNode p)
    {
        if (array.Length == count)
            Add(p);
        else array[count] = p;
        count++;
        HeapyfiToUp(count - 1);
    }

    public void Clear()
    {
        count = 0;
    }

    #region Private Functions
    private int GetFather(int i)
    {
        return ((i + 1) / 2) - 1;
    }
    private int GetRightSon(int i)
    { return 2 * i + 2; }
    private int GetLeftSon(int i)
    { return 2 * i + 1; }

    private void Add(PriorityHeapNode p)
    {
        if (array.Length == count)
        {
            PriorityHeapNode[] t = new PriorityHeapNode[array.Length * 2];
            for (int i = 0; i < array.Length; i++)
            {
                t[i] = array[i];
            }
            t[count] = p;
            array = t;
        }
    }

    private void HeapyfiToUp(int i)
    {
        if (isMin)
        {
            int father = GetFather(i);
            if (father > -1 && array[father].Priority > array[i].Priority)
            {
                PriorityHeapNode t = array[father];
                array[father] = array[i];
                array[i] = t;
                HeapyfiToUp(father);
            }
        }
        else
        {
            int father = GetFather(i);
            if (father > -1 && array[father].Priority < array[i].Priority)
            {
                PriorityHeapNode t = array[father];
                array[father] = array[i];
                array[i] = t;
                HeapyfiToUp(father);
            }
        }
    }
    private void HeapyfiToDown(int i)
    {
        if (isMin)
        {
            #region HeapyFi To down Min
            int l = GetLeftSon(i);
            int r = GetRightSon(i);

            if (r < count)
            {
                PriorityHeapNode right = array[r];
                PriorityHeapNode left = array[l];
                int t;
                if (right != null && left != null)
                {
                    t = left.Priority < right.Priority ? l : r;
                }
                else if (right != null)
                    t = r;

                else if (left != null)
                    t = l;
                else return;

                if (array[t].Priority < array[i].Priority)
                {
                    PriorityHeapNode temp = array[t];
                    array[t] = array[i];
                    array[i] = temp;
                    HeapyfiToDown(t);
                }
            }
            else if (l < count)
            {
                PriorityHeapNode left = array[l];
                int t;
                if (left != null)
                    t = l;
                else return;
                if (array[t].Priority < array[i].Priority)
                {
                    PriorityHeapNode temp = array[t];
                    array[t] = array[i];
                    array[i] = temp;
                    HeapyfiToDown(t);
                }
            }
            #endregion
        }
        else
        {
            #region HeapyFi To down NOT Min
            int l = GetLeftSon(i);
            int r = GetRightSon(i);

            if (r < count)
            {
                PriorityHeapNode right = array[r];
                PriorityHeapNode left = array[l];
                int t;
                if (right != null && left != null)
                {
                    t = left.Priority > right.Priority ? l : r;
                }
                else if (right != null)
                    t = r;

                else if (left != null)
                    t = l;
                else return;

                if (array[t].Priority > array[i].Priority)
                {
                    PriorityHeapNode temp = array[t];
                    array[t] = array[i];
                    array[i] = temp;
                    HeapyfiToDown(t);
                }
            }
            else if (l < count)
            {
                PriorityHeapNode left = array[l];
                int t;
                if (left != null)
                    t = l;
                else return;
                if (array[t].Priority > array[i].Priority)
                {
                    PriorityHeapNode temp = array[t];
                    array[t] = array[i];
                    array[i] = temp;
                    HeapyfiToDown(t);
                }
            }
            #endregion
        }
    }
    #endregion
} 
```

希望这可以帮助...

# ruby-on-rails - SQLite 中的字段如何设置为非空？

> ID：12033254
> 
> 赞同：0
> 
> 时间：2012-08-20T06:42:49.870
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个名为 的表`posts`，我想要一些字段`not null`。所以每当没有数据时，我想产生一个味精。我怎样才能使字段为`not null`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:49:52.240

创建表时，只需在列的数据类型后添加“not null”，例如“text not null”。如果您尝试为该列添加具有空值的记录，这将导致引发异常。您可以在 Rails 应用程序中添加一个 catch/rescue 来捕获此异常。

但是，更好的方法可能是在您尝试使用 ActiveRecord 回调插入数据库之前验证数据......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:02:21.063

创建一个新的迁移来改变表：

```
change_column :table_name, :field_name, :null => false 
```

# php - 即使在删除空格后 PHP 标头在 MAMP 中也不起作用

> ID：12033257
> 
> 赞同：1
> 
> 时间：2012-08-20T06:43:25.840
> 
> 标签：php, mysql, redirect, header, mamp

我正在使用 MAMP，由于某种原因，我没有使用 php 中的标头进行重定向，如果其中有问题，有人可以看看下面的代码吗？？？

我读过类似的帖子，发现它是由标题标签之前的一种空格引起的，但在我的情况下不是。

请给你的建议...谢谢

```
<?php

$host="localhost"; // Host name 

$username="root"; // Mysql username 

$password="root"; // Mysql password 

$db_name="DBase"; // Database name 

$tbl_name="customers"; // Table name 

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from the form 
$myusername=$_POST['myusername']; 
$mypassword=$_POST['mypassword']; 

$myusername = stripslashes($myusername);
$mypassword = md5($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);
$sql="SELECT * FROM $tbl_name WHERE Username='$myusername' and Password='$mypassword'";
$result=mysql_query($sql);

$count=mysql_num_rows($result);

if($count==1){
session_register("myusername");
session_register("mypassword"); 
header("location:/Account/index.php");
}
else {
echo "Wrong Username or Password.";
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-22T08:59:05.057

我在 MAMP 中遇到了同样的问题，结果证明 output_buffering 在我的 php.ini 配置文件中被禁用。我所要做的就是重新打开它。

在 php.ini 中找到这一行：

```
output_buffering = Off 
```

并将其更改为：

```
output_buffering = 4096 
```

然后重启MAMP

有关更多详细信息，请参阅此帖子：http: [//hibbard.eu/php-headerlocation-not-working-in-mamp/](http://hibbard.eu/php-headerlocation-not-working-in-mamp/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T07:02:16.953

```
header('Location: http://example.com/Account/index.php');
exit; 
```

是一种方法，但您可以使用输出缓冲来解决这个问题，所有输出到浏览器的开销都在服务器中缓冲，直到您发送它。你可以通过在你的脚本中调用`ob_start()`and来做到这一点`ob_end_flush()`，或者在你的 php.ini 或服务器配置文件中设置 output_buffering 配置指令。

编辑和附加解决方案： ------>

您可以将输出缓冲用作

```
 <?php
    ob_start();
    $host="localhost"; // Host name 

$username="root"; // Mysql username 

$password="root"; // Mysql password 

$db_name="DBase"; // Database name 

$tbl_name="customers"; // Table name 

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from the form 
$myusername=$_POST['myusername']; 
$mypassword=$_POST['mypassword']; 

$myusername = stripslashes($myusername);
$mypassword = md5($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);
$sql="SELECT * FROM $tbl_name WHERE Username='$myusername' and Password='$mypassword'";
$result=mysql_query($sql);

$count=mysql_num_rows($result);

if($count==1){
session_register("myusername");
session_register("mypassword"); 
header("location:/Account/index.php");
}
else {
echo "Wrong Username or Password.";
}
    ob_end_flush();
    ?> 
```

问题是我们在开始发送输出后无法发送标头。为了解决这个问题，我们缓冲输出。函数 ob_start 打开输出缓冲。当输出缓冲处于活动状态时，不会从脚本发送输出（除了标题），而是将输出存储在内部缓冲区中。所以回显输出将被缓冲。接下来我们发送标题没有任何问题，因为我们还没有吐出任何输出。最后我们调用 ob_end_flush 来刷新内部缓冲区内容并停止输出缓冲。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T06:45:18.117

它应该是这样的：

```
header('Location: http://example.com/Account/index.php');
exit; 
```

# iphone - 如何让我的应用程序在后台运行？

> ID：12033266
> 
> 赞同：1
> 
> 时间：2012-08-20T06:43:48.270
> 
> 标签：iphone, background, nstimer

我正在开发一个警报应用程序。我在我的应用程序中使用 NSTimer。计时器工作得很好。但是当我最小化应用程序时，计时器停止工作。如何在应用程序关闭或最小化时使其工作？

这是我的代码

```
- (void) alarmSaveButtonAction:(id)sender {

timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self
                                       selector:@selector(onTimerEvent)
                                       userInfo:nil repeats:YES];  
}
-(void)onTimerEvent
{
    NSLog(@"saravanan");
    NSDate *now = [NSDate new]; 

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    dateFormatter.dateFormat = @"hh:mm:ss a";
    [dateFormatter setTimeZone:[NSTimeZone systemTimeZone]];
    NSLog(@"The Current Time is %@",[dateFormatter stringFromDate:now]);
    NSString *string2 = [NSString stringWithFormat:[dateFormatter stringFromDate:now]];
    NSLog(@"currenttime %@", string2);
    [dateFormatter release];

    Resource *resourceLoader = [[Resource alloc] init];

    NSDictionary *prefDic = [resourceLoader getPlistDataAsDictionary:@"preference"];

    NSDate *selectedDateTime = [[NSDate alloc]init];

    selectedDateTime = [prefDic objectForKey:@"alarmtime"];

    NSDateFormatter *dateFormatter1 = [[NSDateFormatter alloc] init];
    dateFormatter1.dateFormat = @"hh:mm:ss a";
    [dateFormatter1 setTimeZone:[NSTimeZone systemTimeZone]];
    NSLog(@"saravanan date %@",[dateFormatter1 stringFromDate:selectedDateTime]);
    NSString *string1 = [NSString stringWithFormat:[dateFormatter1 stringFromDate:selectedDateTime]];
    NSLog(@"currenttime %@", string1);
    [dateFormatter1 release];

    if ([string1 isEqualToString:string2]) 
    {
        NSLog(@"alarm scheduld");
        [self scheduledNotification];
        [timer invalidate];
        timer = nil;
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T06:55:27.393

对于警报使用预定的本地[通知](http://developer.apple.com/library/ios/ipad/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T06:51:54.983

你不能这样做，至少不能在公共 API 和应用商店规则的范围内。

# matlab - 使用 commsrc.pn 生成伪代码

> ID：12033271
> 
> 赞同：0
> 
> 时间：2012-08-20T06:44:30.817
> 
> 标签：matlab, sequence, pseudocode

我使用以下代码创建了我的 PN 生成器：

```
h=commsrc.pn('GenPoly',gfprimdf(3), 'InitialStates',[1 0 0], ...
             'CurrentStates', [1 0 0], 'Mask',[0 0 1], 'NumBitsOut',1) 
```

这是我的 PN 生成器的 GF 多项式：

```
>> gfpretty(h.GenPoly)
                                         3
                                1 + X + X 
```

h的当前状态是：

```
>> h.CurrentStates
   ans =
             1     0     0 
```

看 GF 多项式，我认为 h 的下一个状态应该是 [0 1 0]。但是 Matlab 将 h 的下一个状态变成 [1 1 0] 而不是期望值 [0 1 0]。

```
>> generate(h);
>> h.CurrentStates
 ans =
            1     1     0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:55:45.580

gfprimdf(...) 按顺序生成生成多项式`1+a1*x+a2*x^2+a3*x^3+...+x^N`并将其表示为向量

`[1 a_1 a_2 ... a_N-1 1]`

（多项式幂的升序）。但是，commsrc.pn 期望该向量按降序排列。

因此，在您的示例中，commsrc.pn 真正使用的生成多项式是 1+x^2+x^3，而不是预期的 1+x+x^3。如果您改为使用

`h=commsrc.pn('GenPoly',[1 0 1 1],'InitialStates',[1 0 0],'CurrentStates',[1 0 0],'Mask',[0 0 1],'NumBitsOut',1);`

生成一个输出位后的状态导致预期状态。

# iphone - xml rpc 请求错误

> ID：12033272
> 
> 赞同：1
> 
> 时间：2012-08-20T06:44:34.030
> 
> 标签：iphone, xml, xml-parsing, xml-rpc

在 iphone 我尝试连接我收到以下错误：

Content-Type 必须是“text/xml”、“multipart/*”、“application/soap+xml”、“或“application/dime”而不是“text/xml,application/xml”

它连接到许多 bugzilla 站点，但对于一个 bugzilla 站点，它给了我上述错误。

请帮帮我。

谢谢

# vim - 让 Vimwiki 使用 SnipMate（vim 插件）

> ID：12033273
> 
> 赞同：4
> 
> 时间：2012-08-20T06:44:41.283
> 
> 标签：vim, snipmate

我的问题是`<Tab>`当我在 vimwiki 文件中时，SnipMate 的完成不起作用。我正在通过`APACHE<Tab>`在插入模式下输入进行测试，但是当我在`.vimrc`.

即使`i_<Tab>`在 vimwikie 文件中`i_<C-R><Tab>`不起作用，也可以。我得到了可用片段的列表。奇怪的。

为了让它更陌生（好吧，至少对我来说），这`:imap`是 vimwiki 文件中的部分输出：

```
i  <Tab>       * <C-G>u<C-R>=snipMate#TriggerSnippet()<CR>
i  <C-R><Tab>  * <C-R>=snipMate#ShowAvailableSnips()<CR> 
```

我认为这些是正确的，并且在`<Tab>`完成工作的其他文件中，映射是相同的。

哦，如果您想建议按照[http://code.google.com/p/vimwiki/wiki/ChangeLog](http://code.google.com/p/vimwiki/wiki/ChangeLog)`let g:vimwiki_table_auto_fmt = 0`中的建议放入我的文件，我试过了，但它并没有解决我的问题。这是我在搜索中找到的唯一建议，所以这就是我在这里的原因。`.vimrc`

我不知道`.vimrc`你想要多少，所以我只想给你一些我认为与保持这个问题简短相关的内容：

```
" Vundle: The plugin manager for vim.                                        
    set runtimepath+=~/.vim/bundle/vundle/                                   
    call vundle#rc()                                                         
    Bundle 'gmarik/vundle'                                                   
" SnipMate: TextMate snippets for vim.                                       
    Bundle "MarcWeber/vim-addon-mw-utils"                                    
    Bundle "tomtom/tlib_vim"                                                 
    Bundle "honza/snipmate-snippets"                                         
    Bundle "garbas/vim-snipmate"                                             
" Vimwiki: A personal wiki for vim.                                          
    Bundle 'vim-scripts/vimwiki'                                             
    let g:vimwiki_hl_headers = 1                                             
    let g:vimwiki_hl_cb_checked = 1                                          
    let g:vimwiki_folding = 1                                                
    let g:vimwiki_fold_lists = 1                                             
    let s:vimwiki = {}                                                       
    let s:vimwiki.path             = '~/Vimwiki/wiki'                        
    let s:vimwiki.path_html        = '~/Vimwiki/html'                        
    let s:vimwiki.ext              = '.md'                                   
    let s:vimwiki.syntax           = 'markdown'                              
    let s:vimwiki.maxhi            = 1                                       
    let s:vimwiki.diary_rel_path   = 'Journal/'                              
    let s:vimwiki.diary_index      = 'index'                                 
    let s:vimwiki.diary_header     = 'Journal'                               
    let s:vimwiki.diary_sort       = 'asc'                                   
    let g:vimwiki_list = [s:vimwiki] 
```

谢谢

编辑：

我不知道为什么我在写上面的时候忘记了这一点。上面的输出`:imap`是不完整的。它还显示：

```
i  <Tab>       *@vimwiki#tbl#kbd_tab() 
```

不管 的价值`g:vimwiki_table_auto_fmt`。`.vimrc`这可能是我问题的根源。如果是这样，我想以某种方式摆脱它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-20T07:30:50.780

`@`输出中的显示`:imap`Vimwiki 定义了一个缓冲区本地`<Tab>`映射，它覆盖了 snipMate 的全局映射。一种

```
:iunmap <buffer> <Tab> 
```

应该解决这个问题。您可以将该命令放入`~/.vim/after/ftplugin/vimwiki.vim`以使其永久化。但显然 Vimwiki 允许自定义：

```
" Table mappings
if g:vimwiki_table_mappings
  inoremap <expr> <buffer> <Tab> vimwiki#tbl#kbd_tab()
  inoremap <expr> <buffer> <S-Tab> vimwiki#tbl#kbd_shift_tab()
endif 
```

因此，`:let g:vimwiki_table_mappings = 0`在您的 .vimrc 中也应该可以工作。

# api - 如何从 Yahoo Local 获取评论和评分？

> ID：12033274
> 
> 赞同：1
> 
> 时间：2012-08-20T06:44:43.427
> 
> 标签：api, yahoo, yahoo-api, review

如何使用诸如`http://local.yahoo.com/info-11057512-gray-s-papaya-new-york;_ylt=AqfdTH3jqpVj68gKIK09u6WGNcIF;_ylv=3`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T09:25:31.047

我得到了解决方案。我们可以通过传递 businessid 从下面的 url 获取评论和评级

旧：[http ://local.yahoo.com/rnr/getReviewNRating.php?bizId=1105712&mode=getReviews&rcnt=2&rstart=1&rsort=2](http://local.yahoo.com/rnr/getReviewNRating.php?bizId=1105712&mode=getReviews&rcnt=2&rstart=1&rsort=2)

新：[http ://local.yahoo.com/rnr/getReviewNRating.php?bizId=11057512&mode=getReviews&rcnt=2&rstart=1&rsort=2](http://local.yahoo.com/rnr/getReviewNRating.php?bizId=11057512&mode=getReviews&rcnt=2&rstart=1&rsort=2)

BizID 已从 1105712 更改为 11057512

# actionscript-3 - 删除movieclip子项的动作脚本

> ID：12033276
> 
> 赞同：0
> 
> 时间：2012-08-20T06:44:53.170
> 
> 标签：actionscript-3, flash, animation, actionscript

我在这个类中有一个文档类，我动态创建影片剪辑，将它们存储在一个数组中，最后使用 addChild 将其添加到舞台。没关系，问题是虽然我试图通过数组删除movieClips，但它抛出了一个错误：

# 1034：类型强制失败：无法将 []@26be1fb1 转换为 flash.display.DisplayObject。

这是我的代码：

```
 // Note i have declared the array outside the function, so that's not an issue
    function x (e:MouseEvent){

        if (thumbnails.length !== 0){ // Determine if any movieclips have already been created on stage and delete them
            for(var ctr:int = 0; ctr < thumbnails.length;ctr++ ){
                removeChild(thumbnails[ctr]);

            }

        }
        for (var i: int = 0;i < userIput; i++){ // Loop through and create instances of symbol

            var thumb:Thumbnail = new Thumbnail();

            thumb.y = 180; // Set y position
            thumb.x = 30 + ((thumb.width + 10) * i); 

            addChild(thumb);

            thumbnails[i] = [thumb]; // Add to array
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:04:09.370

当您`MovieClip`从中检索 时`Array`，您需要`DisplayObject`在尝试将其删除之前将其转换为：

```
 if (thumbnails.length !== 0){ // Determine if any movieclips have already been created on stage and delete them
        for(var ctr:int = 0; ctr < thumbnails.length;ctr++ ){
            removeChild(DisplayObject(thumbnails[ctr]));

        }

    } 
```

或者，您可以考虑使用基本类型设置为的`Vector`（类型安全版本） ：`Array``DisplayObject`

```
var thumbnails:Vector.<DisplayObject> = new Vector.<DisplayObject>();
thumbnails.push(new MovieClip());

this.addChild(thumbnails[0]);
this.removeChild(thumbnails[0]); 
```

如需进一步阅读，请查看有关[类型转换](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f87.html)的 Adob​​e 文档和[`Vectors`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Vector.html).

**更新：**

`Thumbnail`而不是向您的以下行添加一个实例，`Array`实际上是`Array`向您的缩略图添加一个包含单个元素的进一步`Array`（实际上您正在创建一个多维`Array`）：

```
// You're assigning an array literal with a single element 
// to this element of the the thumbnails array
thumbnails[i] = [thumb]; 
```

请尝试以下任一方法：

```
 // What you meant
 thumbnails[i] = thumb; 

 // Better
 thumbnails.push(thumb); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T10:18:39.403

出现的错误告诉您 Flash Player 无法转换`[]@26be1fb1`为 DisplayObject。`[]@26be1fb1`提示您无法转换地址的对象类型。`[]`是此处的对象类型，表示类型`Array`，因此当`removeChild()`被调用时，您尝试将数组传递给它，但该方法需要 DisplayObject。

### 为什么会发生这种情况

您的代码有一个非常简单但可能不引人注目的问题，即在此代码行：

```
thumbnails[i] = [thumb]; // Add to array 
```

`[]`您使用around将拇指放入数组中`thumb`。因此，您的代码实际上正在做的是将一个带有单个元素 ( `thumb`) 的数组添加到数组`thumbnails`中。之后，您将拥有一个包含单个元素的数组。

### 解决方案

将上面的行更改为：

```
thumbnails[i] = thumb; // Add to array 
```

这应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T21:58:00.567

对于您认为的问题：

使用 Vector 而不是 Array *或*将数组项转换为 Thumbnail 类

但主要的罪魁祸首可能是**你从来没有从数组中清除项目**，你从父/阶段中删除它们，但你没有从数组中删除它们......以及在数组中的特定位置添加项目**将导致不稳定的行为**：

你添加它们：
t[0] = item0_0
t[1] = item0_1
t[2] = item0_2
t[3] = item0_3

然后从阶段删除 item0_0, item0_1, item0_2, item0_3，但将它们留在数组中，
然后添加例如 2 个新的

t[0] = item1_0
t[1] = item1_1

所以你有：
在舞台上：
item1_0
item1_1

在数组中：
t[0] = item1_0
t[1] = item1_1
t[2] = item0_2
t[3] = item0_3

这应该有效：

```
var thumbnails:Vector.<Thumbnail> = new Vector.<Thumbnail>();

function x (e:MouseEvent) {

    var thumb:Thumbnail;

    for each(thumb in thumbnails){
        removeChild(thumb);
    }

    thumbnails = new Vector.<Thumbnail>(); // clear Vector by re-initiating it

    for (var i: int = 0;i < userIput; i++){ 
        thumb = new Thumbnail();

        // ...

        addChild(thumb);

        thumbnails.push(thumb);
    }
} 
```

# javascript - 仅针对文本文件过滤文件上传

> ID：12033278
> 
> 赞同：3
> 
> 时间：2012-08-20T06:45:07.460
> 
> 标签：javascript, html, asp.net-mvc, file-upload

我正在使用 Firefox 版本 14.0.1。我需要过滤上传文件窗口以仅显示`.txt`文件。

我的浏览器不仅支持文本文件`(text/plain)`。我可以通过指定这种格式来限制图像文件`("image/*")`。但我只需要在文件选择器窗口中过滤**文本文件。**

我的浏览器有问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-05-10T05:55:45.803

**只需这样做**...

```
$("#form").submit(function(e) {
  e.preventDefault();
  var checkUploadFileExtension =  $('input[type=file]').val().replace(/C:\\fakepath\\/i, '').split('.').pop();

  if(checkUploadFileExtension === 'txt') {
    alert("Success Uploaded!");
    //Do Something
  } else {
    alert("Please upload text file only");
    //Show error
  }
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<form id="form" name="form" method="post">
  <input name="file" id="file" type="file" accept="text/*" />
  <button class="btn operations-btn btn-default" id="submit">Upload</button>
</form>
```

我希望，对我的帖子有所帮助。谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T06:56:58.697

因此，根据[MDN 参考，输入元素](https://developer.mozilla.org/en-US/docs/HTML/Element/Input) `accept=[MIME Type]`在 Gecko 中未实现，目前您只能执行以下操作：`accept=image|audio|video`

您可以这样做的一种方法是在服务器端检查 asp.net-mvc 控制器上的类型。

但更好的方法是在客户端上使用一些 javascript： 像这样：

```
<script>
function checkExt() {
 if(document.mainForm.myfile.value.lastIndexOf(".txt")==-1) {
    alert("Please upload only .txt extention file");
    return false;
 }
}
</script>
<form name="mainForm">
<input type="file" name="myfile" onchange="checkExt();"/>
</form>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

看到它在这里运行：http: [//jsfiddle.net/Egr9V/](http://jsfiddle.net/Egr9V/)

如果您使用 JQuery，您可以使您的代码更流畅或使用本文所述的验证插件： [如何让 jQuery 在上传时限制文件类型？](https://stackoverflow.com/questions/651700/how-to-have-jquery-restrict-file-types-on-upload)

# jquery - jQuery 和 ASP.NET 更新面板

> ID：12033279
> 
> 赞同：1
> 
> 时间：2012-08-20T06:45:14.573
> 
> 标签：jquery, asp.net, updatepanel

我正在使用下面的代码在按下箭头按钮时切换几个不同的元素。如果我把它放在 ASP.net UpdatePanel 中，为什么这段代码不起作用？

```
$(document).ready(function () {
$(".togglerElement").click(function () {
    var target = $(this).attr("id");
    ToggleTest(target);
});

function ToggleTest(target) {
    var container = "#" + target + "Container";
    var arrowUp = "#" + target + "ArrowUp";
    var arrowDown = "#" + target + "ArrowDown";

    $(container).slideToggle("fast");
    $(arrowUp).toggle();
    $(arrowDown).toggle();
} 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:52:35.887

这些是一些有用的链接

[jQuery 论坛](http://forum.jquery.com/topic/asp-net-update-panel)

[Jquery 和 ajax 更新面板](http://www.dotnetfunda.com/articles/article471-jquery-and-aspnet-ajax-updatepanel.aspx)

[多一个](http://www.daharsh.net/tech/2008/01/aspnet-updatepanel-ajax-and-jquery.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:34:46.757

您需要`pageLoad`在 javascript 代码中实现方法，并在该函数中调用您的 jQuery 函数。而且你不能使用`click`. 您需要在更新面板中使用`on`if `.togglerElement`。

例如：

```
function pageLoad(){

 $(document).ready(function () {
   $("body").on('click','.togglerElement',function(){
      var target = $(this).attr("id");
      ToggleTest(target);
   });
 });
}

function ToggleTest(target) {
    var container = "#" + target + "Container";
    var arrowUp = "#" + target + "ArrowUp";
    var arrowDown = "#" + target + "ArrowDown";
    $(container).slideToggle("fast");
    $(arrowUp).toggle();
    $(arrowDown).toggle();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T19:06:07.320

试试这个

```
$(document).ready(function () {
$(".togglerElement").live('click',function () {
    var target = $(this).attr("id");
    ToggleTest(target);
});

function ToggleTest(target) {
    var container = "#" + target + "Container";
    var arrowUp = "#" + target + "ArrowUp";
    var arrowDown = "#" + target + "ArrowDown";

    $(container).slideToggle("fast");
    $(arrowUp).toggle();
    $(arrowDown).toggle();
}
}); 
```

# ruby-on-rails - 如何使用rails数据库？指导？

> ID：12033283
> 
> 赞同：0
> 
> 时间：2012-08-20T06:45:45.900
> 
> 标签：ruby-on-rails, ruby, database

我在理解如何在 Rails 上使用带有 ruby​​ 的数据库时遇到了一些麻烦。我知道当我生成脚手架和添加/编辑模型时，我的应用程序运行良好。我不明白的是，当我将 Rails 应用程序放到网上时，如果有任何变化，它是否仍然使用 db 文件夹中的 .sqlite3 文件？还是我将它连接到我的站点 SQL 服务器？

如果您确实切换并连接到 SQL 服务器，为什么会这样？

有没有关于这个主题的指南或教程，你可以指点我吗？我的搜索主要是迁移教程。我只是想弄清楚 Rails 在网站上的工作原理。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T06:58:02.790

您可以毫无问题地在生产环境中使用 SQLite，尽管它不是理想的选择。

在生产中更推荐使用更强大的解决方案。您可以在官方指南中查看如何切换： http: [//guides.rubyonrails.org/getting_started.html#configuring-a-database](http://guides.rubyonrails.org/getting_started.html#configuring-a-database)

# iphone - Webservicex.net 允许使用服务

> ID：12033284
> 
> 赞同：2
> 
> 时间：2012-08-20T06:45:52.190
> 
> 标签：iphone, ios, web-services

我一直在玩弄[http://webservicex.net](http://webservicex.net)提供的货币转换器 Web 服务，作为学习如何与 iPhone 应用程序中的 Web 服务交互的一种方式，并且我已经设法让货币转换器完美地工作。

此后，我扩展了我的应用程序以包含其他功能，使其与 App Store 上当前可用的功能有些“不同”。

我的问题是，如果我在 App Store 上发布了一个受广告支持的应用程序，我是否可以使用这个显然有人投入时间和精力制作的网络服务？直到一个月前，我什至不知道网络服务是什么或它是如何存在的，所以我不确定是否有任何礼仪（例如，在你的应用程序的“关于”页面中提及他们）或者这些事情是否普遍在那里免费使用？

我曾尝试通过电子邮件联系 Webservice X，但每次我都收到回信，因为他们的邮箱已满，这有助于让我更接近答案。是否有其他人使用过他们的服务或知道在广告支持的应用程序中允许使用他人网络服务的标准？

多谢你们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T08:24:52.157

使用他们的网络服务不会让你被拒绝。话虽如此，依赖他人的设备（您无法控制且不为使用付费）对于生产应用程序来说并不是一个好主意。我会做一些研究，以找到您认为更可靠或可以支付（最低金额）使用的服务。

我要给出的另一条建议是构建应用程序，以便它从您自己的 Web 服务获取数据并让所有基础数​​据都来自您。换句话说，建立自己的网站（从 GoDaddy 或其他服务每月只需 7 美元起），并在那里进行货币查找。构建您的服务器端进程，以便轻松地从一种服务交换到另一种服务，这样，如果由于某种原因您无法访问您一直在使用的货币转换器服务，那么在没有必须发布应用程序的全新版本（并等待 7 天以上的应用程序审核过程）。

换句话说，您构建的 Web 服务为 iOS 应用程序提供所有数据，并且您在 Web 服务器上获取货币数据。

我就是这样做的，以确保它是最可靠和最容易更改的，而不会影响已安装的 iOS 应用程序。

# ios5 - 如何将背景图像设置为情节提要中设置的 UINavigationbar

> ID：12033286
> 
> 赞同：0
> 
> 时间：2012-08-20T06:45:55.160
> 
> 标签：ios5, uinavigationbar, uistoryboard

我正在使用 Xcode 4.4.1 和 iOS 5。

我已经使用情节提要为几个视图控制器设置了导航栏。现在我想为所有这些导航栏设置背景图像。

所以在我的 AppDelegate.m 我放了这个，

```
- (void)applicationDidFinishLaunching:(UIApplication *)application
{
UIImage *naviImg=[UIImage imageNamed:@"first.png"];
[[UINavigationBar appearance]setBackgroundImage:naviImg forBarMetrics:UIBarMetricsDefault];
} 
```

但它不会改变任何 Viewcontroller 导航栏中的任何内容。谁能告诉我该怎么做，我对iOS开发很陌生。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:36:14.957

`viewController.h`首先，在要更改图像的位置设置导航栏的 IBOutlet 。

```
IBOutlet UINavigationBar *navigationBar; 
```

然后在 viewDidLoad 中写下这段代码，

```
[self.navigationBar setBackgroundImage:[UIImage imageNamed:@"wall.jpg"] forBarMetrics:UIBarMetricsDefault]; 
```

# c++ - 下面代码的算法复杂度是多少

> ID：12033297
> 
> 赞同：3
> 
> 时间：2012-08-20T06:48:03.630
> 
> 标签：c++, c, algorithm, big-o

以下代码的 Big-O 是 O(n) 还是 O(log n)？

```
for (int i = 1; i < n; i*=2)
        sum++; 
```

看起来像 O(n) 还是我完全错过了这个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-20T06:51:05.683

它是`O(logn)`，因为`i`每次都加倍。因此，总的来说，您需要迭代`k`时间，直到`2^k = n`，在这种情况下，它发生在`k = logn`(since `2^logn = n`) 时。

简单示例：假设`n = 100`- 那么：

```
iter1: i = 1
iter2: i = 2
iter3: i = 4
iter4: i = 8
iter5: i = 16
iter6: i = 32
iter7: i = 64
iter8: i = 128 > 100 
```

很容易看出，当`n`增加一倍时，会增加一次迭代，这是对数行为，而线性行为是增加迭代，以使 不断增加`n`。

**PS（编辑）：** *从数学上讲*，该算法确实是`O(n)`-因为大O表示法给出了*渐近上限*，并且您的算法渐近地“更快”地运行`O(n)`-确实如此`O(n)`-但它不是一个紧密的界限（不是`Theta(n)`）我怀疑这实际上是您正在寻找的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T06:51:35.157

复杂度为**O(logn)**，因为循环运行 (log [2] n - 1) 次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T06:51:18.300

O(log(n))，因为你只循环 ~log2(n) 次

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T06:51:21.770

不，复杂性不是线性的。尝试玩几个场景：对于 n = 2、n=4、n=16、n=1024，这个循环做了多少次迭代？n = 1024 * 1024 怎么样？也许这会帮助你得到正确的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T07:04:21.313

它是 O(log(n))。看代码num++；它循环 O(log(n)) 次。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-20T06:54:11.257

For 循环检查运行 lg(n) +1 次。内部循环运行 lg(n) 次。所以，复杂度是 O(lg n)，而不是 O(log n)。

如果 n==8，以下是代码的运行方式：

1.  我=1
2.  我=2
3.  我=4
4.  i=8 --退出条件

# .htaccess - Htaccess 重定向和重写

> ID：12033303
> 
> 赞同：0
> 
> 时间：2012-08-20T06:49:01.023
> 
> 标签：.htaccess, mod-rewrite

我正在尝试获取以下 URL 以进行重定向/重写

```
http://www.domain.com.au/posting?id=44404 
```

以下是所需内容：

```
http://www.domain.com.au/state/category/job_title 
```

有没有办法用 PHP MySQL Joomla 应用程序做到这一点？

这是使用自定义组件，所以我必须从 MySQL 数据库中检索状态、类别和 job_title 信息。有没有办法将它们插入 htaccess 或识别，以便它反映在 URL 字段上？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:53:54.247

这就是您要查找的内容：

[http://www.noupe.com/php/10-mod_rewrite-rules-you-should-know.html](http://www.noupe.com/php/10-mod_rewrite-rules-you-should-know.html)

但是，当您重定向时，您的 id 会丢失

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:58:08.140

您必须编写所有代码以在 .htaccess 文件中将每个 id 替换为所需的类别状态和职位，我认为您无法通过 mysql 检索并使用它们在 htaccess 文件中替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T07:09:08.450

如果您可以编写一个脚本来获取`/state/category/job_title`一个 id，那么您可以使用[RewriteMap](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritemap)。您只能在服务器配置或虚拟主机配置中定义映射，而不是在`.htaccess`文件中。

假设你有一个 perl 脚本，它解析了 state、category 和 job_title，做了一些数据库查找，然后输出`44404`或任何 id。然后你可以像这样定义映射：

```
RewriteMap jobmap prg:/path/to/your/script.pl 
```

然后在`htaccess`文档根目录中的文件中，您可以使用地图：

```
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/?$ /posting?id=${jobmap:$1/$2/$3} 
```

如果您想枚举每个`state/category/job_title`组合，还可以使用[文本文件](http://httpd.apache.org/docs/current/rewrite/rewritemap.html#txt)或[dbm 文件](http://httpd.apache.org/docs/current/rewrite/rewritemap.html#dbm)。或者，如果您已加载并配置了 mod_dbd，您还可以使用[SQL 选择查询](http://httpd.apache.org/docs/current/rewrite/rewritemap.html#dbd)

另一种选择是编写某种 php 脚本并通过它路由所有内容。它本质`script.pl`上将执行示例将执行的操作，解析`state/category/job_title`字段，并进行适当的数据库查找以获得 id。然后，您可以包含发布脚本并交出 id。

# jquery - 使用存储的变量作为 jQuery 中 replaceWith() 方法的参数

> ID：12033307
> 
> 赞同：1
> 
> 时间：2012-08-20T06:49:12.257
> 
> 标签：jquery, jquery-selectors

我将文本框的值存储在变量中：

```
var myname=$('#test').val(); 
```

然后使用的值替换位于以下位置`myname`的 html 标记：`<div class="name"></div>`

```
<td>
   <div class="name"></div>
</td> 
```

然后我用`$('.name').replaceWith(myname);`得到的最终结果为：

```
<td>
    **Value of myname**
</td> 
```

..但我失败了。

我也试`$('.name').replaceWith('<div>'+myname+'</div>');`了也没用。

请协助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T06:54:41.567

而不是替换整个 div，你应该只设置它的文本内容。

```
$('.name').text(myname); 
```

此方法的另一个好处是您不会冒险将任意 HTML 插入页面内容，如果有人将其姓名键入为`"<b>Hello!</b>"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T06:56:24.983

您可以使用

```
$('.name').html(myname); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T07:03:38.250

我已经尝试过了，这是有效的

jQuery

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#lnk').click(function () {
            var myname = $('#test').val();

            $('.name').replaceWith('<div>' + myname + '<div>');
        });
    });
</script> 
```

HTML

```
 <input type="text" id="test" />
<a href="javascript:void(0)" id="lnk">click here </a>

<table>
<tr>
<td>
<div class="name">aaa </div>
</td>
</tr>
</table> 
```

# android - 为什么 Google 不使用 Golang 或 python 作为 android 的语言？

> ID：12033309
> 
> 赞同：9
> 
> 时间：2012-08-20T06:49:37.493
> 
> 标签：android, go

既然 Go 语言有这么多好的优点，为什么 Google 不一步步将 Android 从 java 迁移到 Go，或者把选择权交给开发者呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T06:54:33.330

Python 对于一般任务来说并没有那么快，对于基于 gui 的应用程序也没有那么多用处。清晰和封闭的 API 定义并不是该语言的强项。

当谷歌后来收购的公司制造 Android 操作系统时，Go 语言甚至还不存在。它没有沙盒模型，这在今天似乎是一个重要的要求。

沙盒和快速的java语言在当时是一个非常合理的选择。与相对不为人知的 Go 语言作为平台的首选语言相比，如今大量的 Java 编码人员仍将使其成为更好的选择。谷歌从一开始就对让许多程序员制作应用程序非常感兴趣（他们甚至分发了许多免费设备），因此使用未知语言是没有意义的。

请注意，总是有来自 Go 社区的请求要求在 Android 上使用 Go 语言，但提供所有请求的 API 并不是一项轻松的任务，而且 Google 从未公开承诺尝试这样做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T07:00:12.497

给开发者一个选择总是好的，但是使用 java 作为标准而不是像 Go 这样的新语言的原因是，java 被更广泛地使用（到目前为止），这意味着他们的应用程序市场将以更快的速度扩张；产生更快的投资回报。

# android - 如何隐藏浏览器地址栏？

> ID：12033311
> 
> 赞同：3
> 
> 时间：2012-08-20T06:50:02.800
> 
> 标签：android, listview, twitter

我有这个代码，我正在处理 twitter rss 提要
我也有 main.xml 列表视图但我想知道如何隐藏浏览器地址栏。当我单击 twitter 提要时隐藏浏览器地址栏

xmlparsemain.java

```
public class xmlparsemain extends DashBoardActivity {
/** Called when the activity is first created. */
WebView ourBrow;
ListView lv1;
ProgressDialog ShowProgress;
public ArrayList<Post> PostList = new ArrayList<Post>();
public SitesList siteslist =new SitesList();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // making it full screen
    requestWindowFeature(Window.FEATURE_NO_TITLE);
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.twitter);

    setHeader(getString(R.string.Twitter), true, true, true);

    System.out.println(siteslist.getTwitterValue());

    lv1 = (ListView) findViewById(R.id.listView1);

    ShowProgress = ProgressDialog.show(xmlparsemain.this, "","Loading. Please wait...", true);
            new loadingTask().execute("http://api.twitter.com/1/statuses/user_timeline.rss?screen_name="+siteslist.getTwitterValue().toString()+"");

    lv1.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,int position, long id) {

            Intent intent = new Intent(Intent.ACTION_VIEW).setData(Uri.parse(PostList.get(position).getUrl()));
            startActivity(intent);
//              ourBrow.getSettings().setJavaScriptEnabled(true);
//              ourBrow.getSettings().setLoadWithOverviewMode(true);
//              ourBrow.getSettings().setUseWideViewPort(true);
//              ourBrow.setWebViewClient(new Intent(Intent.ACTION_VIEW).setData(Uri.parse(PostList.get(position).getUrl())));
//              ourBrow.setWebViewClient(new ourViewClient());
//              InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
//              imm.hideSoftInputFromWindow(ourBrow.getWindowToken(), 0);

        }
    });

}
class loadingTask extends AsyncTask<String, Void, String> {

    protected String doInBackground(String... urls) {

        SAXHelper sh = null;
        try {
            sh = new SAXHelper(urls[0]);
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }
        sh.parseContent("");
        return "";
    }

    protected void onPostExecute(String s) {
        lv1.setAdapter(new EfficientAdapter(xmlparsemain.this, PostList));
        ShowProgress.dismiss();
    }
}
class SAXHelper {
    public HashMap<String, String> userList = new HashMap<String, String>();
    private URL url2;

    public SAXHelper(String url1) throws MalformedURLException {
        this.url2 = new URL(url1);
    }
    public RSSHandler parseContent(String parseContent) {
        RSSHandler df = new RSSHandler();
        try {
            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();
            xr.setContentHandler(df);
            xr.parse(new InputSource(url2.openStream()));
        } catch (Exception e) {
            e.printStackTrace();
        }
        return df;
    }
}
class RSSHandler extends DefaultHandler {
    private Post currentPost = new Post();
    StringBuffer chars = new StringBuffer();
    @Override
    public void startElement(String uri, String localName, String qName,Attributes atts) {
        chars = new StringBuffer();
        if (localName.equalsIgnoreCase("item")) {
        }
    }

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {

        if (localName.equalsIgnoreCase("title") && currentPost.getTitle() == null) {
        currentPost.setTitle(chars.toString());
        }

        if (localName.equalsIgnoreCase("pubDate")&& currentPost.getDate() == null) {
            currentPost.setDate(chars.toString());
        }
        if (localName.equalsIgnoreCase("link")&& currentPost.getUrl() == null) {
            currentPost.setUrl(chars.toString());
        }

        if (localName.equalsIgnoreCase("item")) {
            PostList.add(currentPost);
            currentPost = new Post();
        }
    }

    @Override
    public void characters(char ch[], int start, int length) {
        chars.append(new String(ch, start, length));
    }
}
} 
```

post.java

```
public class Post {

private String title;
private String thumbnail;
private String url;
private String description;
private String date;

public String getTitle() {
    return title;
}

public void setTitle(String title) {
    this.title = title;
}

public String getThumbnail() {
    return thumbnail;
}

public void setThumbnail(String thumbnail) {
    this.thumbnail = thumbnail;
}

public String getUrl() {
    return url;
}

public void setUrl(String url) {
    this.url = url;
}

public void setDescription(String description) {
    this.description = description;
}

public String getDescription() {
    return description;
}

public void setDate(String date)  {
      this.date=date;      
    }

public String getDate() {
    return date;
}

} 
```

高效适配器.java

```
 public class EfficientAdapter extends BaseAdapter {
private Activity activity;
private ArrayList<Post> data;
private static LayoutInflater inflater = null;
//public ImageLoader imageLoader;
ViewHolder holder;

EfficientAdapter(Activity a, ArrayList<Post> d) {

    activity = a;
    data = d;
    inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

@Override
public int getCount() {
    return data.toArray().length;
}

@Override
public Object getItem(int position) {
    return position;
}

@Override
public long getItemId(int position) {
    return position;
}

public static class ViewHolder {
    public TextView label;

    public TextView addr;
            public ImageView image;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View vi = convertView;

    if (convertView == null) {
        vi = inflater.inflate(R.layout.row, null);
        holder = new ViewHolder();
        holder.label = (TextView) vi.findViewById(R.id.title);
        holder.addr = (TextView) vi.findViewById(R.id.details);
        holder.image = (ImageView) vi.findViewById(R.id.thumb);
        vi.setTag(holder);

    } else

    holder = (ViewHolder) vi.getTag();
    Resources res = activity.getResources();
    holder.label.setText(data.get(position).getTitle());
    holder.addr.setText(data.get(position).getDate());
    Bitmap micon1=BitmapFactory.decodeResource(res, R.drawable.tweet); 
    holder.image.setImageBitmap(Bitmap.createScaledBitmap(micon1, 72, 72, false));
    return vi;
}

 } 
```

如何隐藏浏览器地址栏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:57:06.157

据我所知，你不能，除了弹出窗口。由于它适用于 Android（因为您为 Android 标记了您的问题），所以浏览器栏应该在客户端滚动时自动隐藏（以及滚动条，直到它感应到触摸交互）。这是删除浏览器栏（以及滚动条，如果需要）的弹出窗口代码：

```
var popup = window.open("http://urlinquestion.com", "newPOPUP", 'toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=0,width=300,height=300') 
```

# javascript - 更新 JavaScript 对象中的嵌套属性

> ID：12033318
> 
> 赞同：4
> 
> 时间：2012-08-20T06:50:39.587
> 
> 标签：javascript

我想以编程方式将 'hello' 更改为 'hey'，该解决方案应该适用于任意数量的嵌套元素（我只使用 2 个级别来保持简单）。

```
var data = {level1: {level2 : 'hello' }}; 
```

我可以访问“数据”变量、路径（“级别 1/级别 2”）和新值（“嘿”）。

我试着做：

```
var parents = 'level1/level2'.split('/');
var target = data;
for(var i=0; i<parents.length; i++){
   target = data[parents[i]];
}
target = 'hey'; 
```

这个想法是旅行到根

```
target = data 
```

然后1级深

```
target = data['level1'] 
```

...继续前进

```
target = data['level1']['level2'] //data['level1'] === target 
```

并修改内容

```
target = 'hey' 
```

但是当我这样做时（target = target ['level2']），它看起来像丢失了对原始对象（数据）的引用。

我想我可以用路径构建一个字符串，然后对其进行评估：

```
eval("data['level1']['level2']='hey'); 
```

有没有更好的不涉及 eval() 的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T07:00:04.230

有两个问题。首先是您`data`在循环内部继续使用，这意味着您正在尝试访问顶级键而不是内部键。更改`target = data[parents[i]];`为

```
target = target[parents[i]]; 
```

第二个是当你改变变量时`target`，你不是在改变`data`变量，而是在改变`target`。如果您在前一次迭代中退出循环，您可以更新作为参考存储的对象：

```
for(var i=0; i<parents.length-1; i++){
   target = target[parents[i]];
}
target[parents[i]] = 'hey'; 
```

演示：http: [//jsfiddle.net/Lherp/](http://jsfiddle.net/Lherp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T06:56:03.313

尝试这样的事情：

```
var data = {level1: {level2 : 'hello' }};
var parents = 'level1/level2'.split('/');
var target = data;
for(var i=0; i < parents.length - 1; i++){
   target = target[parents[i]];
}
target[parents[i]] = 'hey'; 
```

还是我错过了什么？

编辑：我遗漏了一些东西（对不起，应该先测试一下..）

# r - 使用 ggplot2 绘制每个 x 值的数据集的平均值和标准差

> ID：12033319
> 
> 赞同：8
> 
> 时间：2012-08-20T06:50:53.983
> 
> 标签：r, ggplot2

我有一个看起来有点像这样的数据集：

```
a <- data.frame(x=rep(c(1,2,3,5,7,10,15,20), 5),
                y=rnorm(40, sd=2) + rep(c(4,3.5,3,2.5,2,1.5,1,0.5), 5))
ggplot(a, aes(x=x,y=y)) + geom_point() +geom_smooth() 
```

![图形输出](../Images/65e9514802b526eecd3f8acc75c48c62.png)

我想要与该图相同的输出，但不是平滑曲线，我只想在每组 x 值的平均值/标准差之间取线段。该图应该与上图类似，但呈锯齿状，而不是弯曲的。

我试过这个，但它失败了，即使 x 值不是唯一的：

```
ggplot(a, aes(x=x,y=y)) + geom_point() +stat_smooth(aes(group=x, y=y, x=x))
geom_smooth: Only one unique x value each group.Maybe you want aes(group = 1)? 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T07:05:48.203

`?stat_summary`是你应该看的。

这是一个例子

```
# functions to calculate the upper and lower CI bounds
uci <- function(y,.alpha){mean(y) + qnorm(abs(.alpha)/2) * sd(y)}
lci <- function(y,.alpha){mean(y) - qnorm(abs(.alpha)/2) * sd(y)}
ggplot(a, aes(x=x,y=y))  + stat_summary(fun.y = mean, geom = 'line', colour = 'blue') + 
            stat_summary(fun.y = mean, geom = 'ribbon',fun.ymax = uci, fun.ymin = lci, .alpha = 0.05, alpha = 0.5) 
```

![在此处输入图像描述](../Images/81db45809bc5e4a48e42fa798299788c.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T13:52:59.943

您可以使用其中一种内置汇总函数`mean_sdl`。代码如下所示

```
ggplot(a, aes(x=x,y=y)) + 
 stat_summary(fun.y = 'mean', colour = 'blue', geom = 'line')
 stat_summary(fun.data = 'mean_sdl', geom = 'ribbon', alpha = 0.2) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-05T14:55:22.243

使用 ggplot2 0.9.3.1，以下为我做了诀窍：

```
ggplot(a, aes(x=x,y=y)) + geom_point() +
 stat_summary(fun.data = 'mean_sdl', mult = 1, geom = 'smooth') 
```

“mean_sdl”是 Hmisc 包函数“smean.sdl”的实现，多变量给出了显示多少标准偏差（高于和低于平均值）。

有关原始功能的详细信息：

```
library('Hmisc')
?smean.sdl 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-20T14:26:51.360

您可以尝试按照 Hadley Wickham 在网站上的建议编写摘要函数：http `ggplot2`: [//had.co.nz/ggplot2/stat_summary.html](http://had.co.nz/ggplot2/stat_summary.html)。将他的建议应用于您的代码：

```
p <- qplot(x, y, data=a)

stat_sum_df <- function(fun, geom="crossbar", ...) { 
 stat_summary(fun.data=fun, colour="blue", geom=geom, width=0.2, ...) 
} 

p + stat_sum_df("mean_cl_normal", geom = "smooth") 
```

这导致了这个图形：

![在此处输入图像描述](../Images/2dcbb0d2fc8d1e8662837678af865c07.png)

# .net - .NET 选项 CompareTo

> ID：12033329
> 
> 赞同：1
> 
> 时间：2012-08-20T06:51:49.087
> 
> 标签：.net, vb.net

我知道在 .NET 中，对象可以实现 Comparator 和 Comparable 接口，然后覆盖 compare 和 compareto。

选项比较如何适应这一点？我知道 Option Compare 允许使用文本方法或二进制方法比较字符串。这些是比较器的不同实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T07:20:20.730

`Option Compare Text`来自原始的非.NET VB。它的存在是为了 VBx 用户的兼容性和/或方便，但它并不真正属于 .NET 框架范例，您可以在需要时提供比较器。

它只影响代码中完成的直接字符串比较，例如将运算符、、`=`或应用于变量和类型的文字。它不会覆盖任何 Comparable 接口，并且该类也没有任何接口。`<>``<``>``String``String`

我个人更喜欢不混合范式，因此根本不使用`Option Compare Text`。当我需要不区分大小写的比较时，我使用[`String.Compare(s1, s2, True)`](http://msdn.microsoft.com/en-us/library/zkcaxw5y.aspx)，当我需要为函数提供不区分大小写的比较器时，我通过[`StringComparer.CurrentCultureIgnoreCase`](http://msdn.microsoft.com/en-us/library/system.stringcomparer.currentcultureignorecase.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:11:27.003

请参阅[http://msdn.microsoft.com/en-us/library/t0k7484c(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/t0k7484c(v=vs.100).aspx)

Option(Explicit|Strict|Compare|Infer) 是让编译器知道在将 VB.NET 代码转换为可执行文件时要设置哪些标志（它们确定编译器如何解释您尝试对代码执行的操作，例如 Option Compare 切换文本（不区分大小写）或二进制（区分大小写）比较字符串操作）。它们与 .NET Framework 构造没有任何关系，并定义了 VB.NET 代码应如何被其他 .NET 语言（如 C# 或 F#）解释。

# ssis - 如果第一次失败，我如何停止包含超过 1 个数据流的包？

> ID：12033334
> 
> 赞同：0
> 
> 时间：2012-08-20T06:52:00.630
> 
> 标签：ssis

我有一个包含超过 1 个数据流的 SSIS 包，如果第一个数据流失败，我不想执行以下操作。如何停止包的执行。我尝试使用红色箭头和脚本任务什么都不做，但它不起作用。其他数据流也被执行，并将所有错误发送给我的 .net 客户端。我只需要失败的数据流的错误。

有谁知道怎么弄 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:01:43.617

您可以在您的上设置`MaximumErrorCount`To ，但这是默认值。包级别的值也是如此，如果您将其设置为，则如果您的任务失败，包将因错误而终止。`1``data flow task``1`

但正如我所说，这些是默认值，你不应该做任何事情。你们`data flow tasks`一起执行吗？如果这样做，请构建一条路径，该路径依次执行所有任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:48:37.023

您可以使用 Squence Container 并将所有数据流任务放入其中。我已经分享了示例的屏幕截图，调整了所有数据流任务的优先级，并为任务设置了成功条件。

![在此处输入图像描述](../Images/06073e81333ac677bbbcbc62deed595c.png)

# java - 在 Eclipse 中打开 java 文件时出错

> ID：12033335
> 
> 赞同：0
> 
> 时间：2012-08-20T06:52:08.103
> 
> 标签：java, eclipse

在 eclipse 中打开一个已经存在的 java 文件时，出现以下错误。几天前它可以正确打开。

```
Could not open the editor: failure 'java.io.IOException: Break Iterator Rule Data Magic Number Incorrect, or unsupported data version.' 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T07:08:03.320

如评论中所说，重新安装。:-)

# iphone - 如何在 ipad 的模型视图上隐藏键盘？

> ID：12033339
> 
> 赞同：0
> 
> 时间：2012-08-20T06:52:18.403
> 
> 标签：iphone, objective-c

当我们在此使用 UIModalPresentationFormSheet 时如何隐藏键盘当我单击键盘完成按钮时我的键盘没有从模型视图中隐藏此代码中的问题我以错误的方式调用此类

```
-(IBAction)BenefitManage
{
    manage*theManageView=[[[manage alloc]initWithNibName:@"manage" bundle:nil]autorelease];
    [theManageView setDelegate:self];
    theManageView.navigationItem.title =NSLocalizedString(@"Manage", @"Manage");
    navController = [[UINavigationController alloc] initWithRootViewController: theManageView]; 
    navController.modalPresentationStyle=UIModalPresentationFormSheet;
    //theManageView.modalPresentationStyle = UIModalPresentationFormSheet;
   // [self presentModalViewController:theManageView animated:NO];
    [self presentModalViewController:navController animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:09:44.747

单击完成按钮时，您应该隐藏键盘。

```
- (IBAction)done
{
    [self.textField resignFirstResponder];
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:03:00.323

只需这样做：

```
[self.view endEditing:YES]; 
```

# objective-c - 如何将 nib 文件中的图像带到子视图的前面

> ID：12033343
> 
> 赞同：0
> 
> 时间：2012-08-20T06:52:26.733
> 
> 标签：objective-c

我有一个 ViewController，其中它的 nib 文件包含一个图像，并且我已经对 ViewController 的视图进行了子视图。但是该视图隐藏了图像。[self.view bringSubviewToFront:myImageview];我试过这个但它不起作用。还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:00:25.040

如果您还没有，请显示文档大纲（从菜单中，编辑器->显示文档大纲）。在对象部分，列表中的定位是视图中的定位（列表更下方 == 更靠近前面）。子视图缩进并列在其父视图下。

使用它来确保没有视图覆盖图像。如果这没有帮助，请查看在运行时添加了哪些视图。

# c# - 停止从用户代理继承

> ID：12033347
> 
> 赞同：3
> 
> 时间：2012-08-20T06:52:45.480
> 
> 标签：c#, asp.net, css, webmatrix, webmatrix-2

我正在尝试创建一个样式化的 h4。

但是我的 h4 一直从一些用户代理继承？

这是什么用户代理。

我怎样才能阻止它这样做。它添加了我不想要的效果。

![在此处输入图像描述](../Images/a2b664e563d62cfedd5ab6a64f990bc7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:56:59.063

要停止从用户代理（Web 浏览器默认为各种 HTML 元素选择的样式）的继承，您需要使用良好的 CSS“重置”。

阅读[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)了解“重置”的介绍。

不同“重置”列表[http://www.cssreset.com/](http://www.cssreset.com/)

此外，如果您使用诸如 Twitter Bootstrap 之类的框架，它已经包含了合理的重置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T08:36:15.913

不，`h4`元素（或`h2`屏幕截图中的元素）不是从某些用户代理继承的。相反，它直接从用户代理样式表中*获取属性值。*“用户代理”实际上是指浏览器（例如，原则上，它也可以是索引机器人）。

您可以通过在样式表中分配属性来停止这种情况。实际上，您在示例中已经这样做了：`font-size`并且`font-weight`已被覆盖。该设置`display: block`可以被覆盖，例如通过添加`display: inline`到您的样式表中。

边距问题比较棘手，因为 WebKit 浏览器有其古怪之处，并且`-webkit-margin`显示的属性就好像它们没有被覆盖一样。但实际上，在`margin`设置标准属性时它们会被忽略，就像您的情况一样；查看“指标”窗格以查看此内容。

因此，您已经覆盖了用户代理样式表设置。一般来说，用户代理样式表可以包含*任何东西*，但使用 reset.css 样式表仍然是一种错误的方法。CSS 2.1 规范中 HTML 4的[默认样式表](http://www.w3.org/TR/CSS21/sample.html)是相当现实的，它告诉您要准备什么，例如`display`、`margin`、`font-weight`和`font-size`标题。

# php - 为什么使用另一种方式声明数组不起作用？

> ID：12033349
> 
> 赞同：-1
> 
> 时间：2012-08-20T06:53:18.613
> 
> 标签：php, arrays

```
foreach ($this->getGalleryImages() as $_image){
            $a=explode('/',$_image->getPath());
            $b=explode('-',$a[count($a)-1]);
            $colors[]=$b[1];                
        } 
```

为什么我不能更改`$colors[]=$b[1];` 为`$colors=$b[1];`. 但这`$color=array_unique($colors);`没关系。$color 它没有`[]`($color[])

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:56:52.147

`array_unique()`返回一个数组，因此如果将其分配给另一个变量 ( `$colors`)，该变量也将是一个数组。

`$b[1]`仅给出数组的一个元素 - 将其分配给另一个变量，您将得到一个“简单”变量，而不是数组。在这种情况下，要获取一个数组，您必须将该值作为一个条目添加到`$colors`（通过写入`[]`并再次使其成为一个数组）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:56:35.327

`$a []= $b`意思是“附加`$b`到数组`$a`”。

`$a = $b`意思是“设置`$a`参考`$b`”。

* * *

为了更直接地回答您的问题，您*可以*说`$colors = $b[1]`，但这意味着“让`$colors`引用索引处的元素`1`” `$b`，而*不是*“将索引处的元素添加`1`到`$b`数组中`$colors`”。

`array_unique`将唯一值作为数组返回。因此，您会将唯一值数组分配给`$colors`.

# android - Android 平板电脑 USB 主机模式是或否？

> ID：12033353
> 
> 赞同：1
> 
> 时间：2012-08-20T06:53:35.377
> 
> 标签：android, usb, host

我试图制作一个 android 应用程序，它使用需要平板电脑处于主机模式的 USB 设备，因此它可以从平板电脑获取电源。出于某种奇怪的原因，这种情况只会在我每次重新启动平板电脑时发生，并且只有在我插入电源插孔时才会发生。

所以我试图做出的解决方案是在重新启动后找出平板电脑是否处于 USB 主机模式，如果不是，则自动重新启动。

平板电脑已植根，因此超级管理员访问没有问题，我的重启代码工作正常，只是似乎找不到任何说明我如何检测主机模式的内容，有人可以与我分享这些知识吗？

在此先感谢彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:18:01.683

`releaseInterface()`并`close()`关闭连接和东西。我想那么你应该能够`getDeviceList()`或something。我不能太确定，因为我使用 slickdev 库连接到我的串行设备，但这个答案是基于这个页面的数据：

[http://developer.android.com/guide/topics/connectivity/usb/host.html](http://developer.android.com/guide/topics/connectivity/usb/host.html)

# javascript - 如何有效地将 Float32Array 插入 Float32Array？

> ID：12033354
> 
> 赞同：3
> 
> 时间：2012-08-20T06:53:38.143
> 
> 标签：javascript

我试图在花药 Float32Array 的中间插入一个 Float32Array。我目前正在创建一个新的 Float32Array 并使用 3 个 for 循环将元素插入到这个新的 Float32Array 中（1 个用于插入之前，1 个用于插入新的 Float32Array，1 个用于插入之后）。

这需要很长时间。有没有更快的方法将 Float32Array 插入另一个？例如，是否有类似于

```
// Suppose originalArray and insertedArray are 2 Float32Arrays of
// lengths 100000 and 5000 respectively, and I want to insert 
// insertedArray into originalArray at element 50000.

var combinedArray = new Float32Array(105000);
combinedArray.set(originalArray.subarray(0, 50000));
combinedArray.subarray(50000, 55000).set(insertedArray);
combinedArray.subarray(55000, 105000).set(originalArray.subarray(50000, 100000)); 
```

目前，上述代码不起作用，因为该`subarray`方法没有返回与`set`整个`Float32Array`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:18:52.143

你可以在一堆指令中做一些事情：

```
var combinedArray = new Float32Array(105000);
combinedArray.set(originalArray);
[].splice.apply(combinedArray, [50000, 0].concat([].slice.call(insertedArray, 0))); 
```

不过，我真的不知道它的性能。我担心它`combinedArray`会以某种方式转换为`Array`，从而占用大量内存，并且可能占用 CPU。不应该，但我不确定。

无论如何，该`set`方法有[第二个可选参数](https://developer.mozilla.org/en-US/docs/JavaScript_typed_arrays/Uint8Array#set%28%29)，即必须设置新元素的数组的偏移量。因此，您的最后两行将变为：

```
combinedArray.set(insertedArray, 50000);
combinedArray.set(originalArray.subarray(50000, 100000), 55000); 
```

也许这样更有效率。

**编辑**：它是，根据[这个测试](http://jsperf.com/inserting-elements-in-typed-arrays)。所以，你有你的方式。

# iphone - 更新 ans ios 应用程序导致问题，而重新安装工作正常

> ID：12033356
> 
> 赞同：-1
> 
> 时间：2012-08-20T06:53:42.060
> 
> 标签：iphone, ios, ipad, ios5, app-store

我遇到了一个奇怪的问题。上周我向 App Store 提交了更新的应用程序，当它上线时，我更新了我 iPhone 上已经安装的应用程序。我在我的家庭控制器表视图上看到了很多问题。之后我删除并重新安装了该应用程序，它工作正常。

我在其他一些测试设备上也发现了同样的行为。我发现这是一个大问题，因为最终用户永远不会重新安装，他总是会更新所有内容并找到这些问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:35:40.863

您的应用程序由于核心数据模型的更新而崩溃。解决方案是你需要学习coredata的数据迁移。[你可以在这里](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/Introduction.html)学习表格。

希望你能明白我的意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:05:55.783

此问题可能是由这两个版本之间的不兼容模型引起的。例如，如果您正在缓存模型对象，最好在升级时清除缓存以避免该问题。

# php - 覆盖同一属性上 __get 和 __set 的递归限制

> ID：12033357
> 
> 赞同：0
> 
> 时间：2012-08-20T06:53:43.890
> 
> 标签：php, php-internals

有没有办法覆盖同一属性的`__get`递归限制。`__set`我希望能够以不同于第一个条目的方式处理第二个重新进入。

此代码示例不实用，但最容易说明问题。

```
 class Foo {
     public function __set($name,$value){
         print "$name entered\n";
         this->$name = $value; // want it to recurse here
     }
 }

$a = new Foo();
$a->baz = "derp";
print $a->baz;

// should get (cannot test at the moment)
// baz entered
// derp  <- you get derp because the current php implementation creates an instance variable from the second call to __set 
```

我的互联网中断了，所以我在手机上打字，所以很可能有错别字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T11:20:27.953

我知道这是一个老问题，但我认为这就是你真正想要的。

```
<?php
class Foo {
    private $_data = array();
    public function __set($name,$value){
        print "$name entered\n";
        $this->_data[$name] = $value;
    }
    public function __get($name){
        if(array_key_exists($name, $this->_data)){
            return $this->_data[$name];
        } else {
            return false;
        }
    }
 }

$a = new Foo();
$a->baz = "derp";
print $a->baz;
?> 
```

[http://phpfiddle.org/main/code/4h0-an7](http://phpfiddle.org/main/code/4h0-an7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:59:22.527

使用该语法无法做到这一点。只需`__set`直接调用，例如：

```
class Foo {
     public function __set($name, $value) {
         print "$name entered\n";

         $this->__set($name, $value);
     }
} 
```

# c++ - 为什么这个值被设置为 0？O_O

> ID：12033360
> 
> 赞同：-3
> 
> 时间：2012-08-20T06:53:56.150
> 
> 标签：c++, cstring

`chMB()`是一个定义，`MessageBoxA( 0, text, "title", MB_OK );`所以它显示文本，我可以看到结果。我的问题是以下代码：

```
CString szWow;
szWow.Format( "%u", idCandidate );
chMB( szWow );

const __int64 i64set = i64VoteAmount+1;

CString addvote;
addvote.Format( "UPDATE dbo.CONSULENTRIES set m_uVoteAmount = %u WHERE m_idCandidate = %u", i64set, idCandidate );

chMB( addvote ); 
```

chMB(szWow); 显示 5

尽管 chMB( addVote ) 显示： UPDATE dbo.CONSULENTRIES set m_uVoteAmount = 1 WHERE m_idCandidate = 0

为什么这种字符串格式的 idCandidate 0 ？？？O___O

如果你需要这里是完整的codez：

```
VOTEAPPL CConsulApplication::VoteForApplied( const u_long idVoter, const __int64 idCandidate )
{
if( idVoter && idCandidate )
{

    /* Check if alredy voted */
    CQuery* pQuery = new CQuery;
    if( !pQuery->Connect( 3, DSN_NAME_CHARACTER01, DB_ADMIN_ID_CHARACTER01, DB_ADMIN_PASS_CHARACTER01 ) )
    {
        pQuery->DisConnect();
        SAFE_DELETE( pQuery );
        return VAPL_FAILURE;
    }

    CString szVoted;
    szVoted.Format( "SELECT * FROM dbo.CONSULVOTE WHERE m_idVoter = %u", idVoter );

    if( !pQuery->Exec( szVoted ) )
    {
        pQuery->DisConnect();
        SAFE_DELETE( pQuery );
        return VAPL_FAILURE;
    }

    pQuery->Fetch();

    __int64 i64Voter = pQuery->GetInt64( "m_idVoter" );

    if( i64Voter != 0 )
    {
        pQuery->DisConnect();
        SAFE_DELETE( pQuery );
        return VAPL_VOTED;
    }

    pQuery->DisConnect();
    SAFE_DELETE( pQuery );

    /* Get content and check if candidate exists */

    CQuery* pQuery2 = new CQuery;
    if( !pQuery2->Connect( 3, DSN_NAME_CHARACTER01, DB_ADMIN_ID_CHARACTER01, DB_ADMIN_PASS_CHARACTER01 ) )
    {
        pQuery2->DisConnect();
        SAFE_DELETE( pQuery2 );
        return VAPL_FAILURE;
    }

    CString szCandidate;
    szCandidate.Format( "SELECT * FROM dbo.CONSULENTRIES WHERE m_idCandidate = %u", idCandidate );

    if( !pQuery2->Exec( szCandidate ) )
    {
        pQuery2->DisConnect();
        SAFE_DELETE( pQuery2 );
        return VAPL_FAILURE;
    }

    pQuery2->Fetch();

    __int64 i64Candidate = pQuery2->GetInt64( "m_idCandidate" );
    __int64 i64VoteAmount = pQuery2->GetInt64( "m_uVoteAmount" );
    if( i64Candidate != 0 )
    {
        /* Insert at database that this guy has voted */
        CQuery* pInsertQuery = new CQuery;
        if( !pInsertQuery->Connect( 3, DSN_NAME_CHARACTER01, DB_ADMIN_ID_CHARACTER01, DB_ADMIN_PASS_CHARACTER01 ) )
        {
            pInsertQuery->DisConnect();
            SAFE_DELETE( pInsertQuery );
            return VAPL_FAILURE;
        }

        CString szInsert;
        szInsert.Format( "INSERT INTO dbo.CONSULVOTE values(%u,%u)", idVoter, idCandidate );

        if( !pInsertQuery->Exec( szInsert ) )
        {
            pInsertQuery->DisConnect();
            SAFE_DELETE( pInsertQuery );
            return VAPL_FAILURE;
        }

        pInsertQuery->DisConnect();
        SAFE_DELETE( pInsertQuery );

        /* Update vote amount */

        CQuery* pUpdate = new CQuery;
        if( !pUpdate->Connect( 3, DSN_NAME_CHARACTER01, DB_ADMIN_ID_CHARACTER01, DB_ADMIN_PASS_CHARACTER01 ) )
        {
            pUpdate->DisConnect();
            SAFE_DELETE( pUpdate );
            return VAPL_FAILURE;
        }

        CString szWow;
        szWow.Format( "%u", idCandidate );
        chMB( szWow );

        const __int64 i64set = i64VoteAmount+1;

        CString addvote;
        addvote.Format( "UPDATE dbo.CONSULENTRIES set m_uVoteAmount = %u WHERE m_idCandidate = %u", i64set, idCandidate );

        chMB( addvote );

        if( !pUpdate->Exec( addvote ) )
        {
            pUpdate->DisConnect();
            SAFE_DELETE( pUpdate );
            return VAPL_FAILURE;
        }

        pUpdate->DisConnect();
        SAFE_DELETE( pUpdate );

        return VAPL_SUCCESS;

    }

    pQuery2->DisConnect();
    SAFE_DELETE( pQuery2 );
    return VAPL_FAILURE;

}
return VAPL_FAILURE; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T07:00:50.590

问题在这里：

```
addvote.Format( "UPDATE dbo.CONSULENTRIES set m_uVoteAmount = %u WHERE m_idCandidate = %u", i64set, idCandidate ); 
```

格式字符串包含`%u`while 格式字符串 ( ) 后面的变量`i64set`类型错误 ( `__int64`)。

尝试更改类型（`%u`对应于 type `unsigned int`）或格式说明符：

```
addvote.Format( "UPDATE dbo.CONSULENTRIES set m_uVoteAmount = %I64d WHERE m_idCandidate = %u", i64set, idCandidate ); 
```

# android - 未从应用内计费中获得响应

> ID：12033363
> 
> 赞同：2
> 
> 时间：2012-08-20T06:54:04.243
> 
> 标签：android, in-app-purchase, in-app-billing

我正在我的应用程序中实施 Android 应用程序内计费但我没有从 Google play 获得 Json 响应。

```
 @Override
            public void onClick(DialogInterface dialog, int which) {
                dialog.dismiss();
                 if (Consts.DEBUG) {
                        Log.d(TAG, "buying: " + mItemName + " sku: " + mSku);
                    }
                 mSku="android.test.purchased";
                    if (mManagedType != Managed.SUBSCRIPTION &&
                            !mBillingService.requestPurchase(mSku, Consts.ITEM_TYPE_INAPP, mPayloadContents)) {
                        showDialog(DIALOG_BILLING_NOT_SUPPORTED_ID);
                    } else if (!mBillingService.requestPurchase(mSku, Consts.ITEM_TYPE_SUBSCRIPTION, mPayloadContents)) {
                        // Note: mManagedType == Managed.SUBSCRIPTION
                        showDialog(DIALOG_SUBSCRIPTIONS_NOT_SUPPORTED_ID);
                    }

            }
        }); 
```

我得到了谷歌播放请求卡号的屏幕。像“VISA XXX-FAKE”和接受和购买按钮。点击接受并购买后，我没有得到回应。

我认为在单击“确定”按钮购买时这里出了点问题。我没有更改示例代码中的任何内容。请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T17:37:47.897

我相信，在使用“VISA XXX-FAKE”方法时，只有在开发者帐户下预先注册设备 ID，才能获得签名回复。

# java - 将多个值绑定到表单上的一个字段

> ID：12033369
> 
> 赞同：0
> 
> 时间：2012-08-20T06:54:24.253
> 
> 标签：java, spring-mvc

我有 6 个输入框 - 每个输入框 4 位。输入 4 位数字后，光标会自动转到下一个输入框。都是强制性的。

现在可以在“onChange”事件上设置自动聚焦到下一个文本框。但是如何将这 6 个输入框的值绑定到表单上的一个字段。有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T16:41:53.840

在您的 JSP 中，您需要以下 6 个输入字段，

```
<form:input path="categoriesList[0].name" id="categoriesList[0].name" size="4"/>
<form:input path="categoriesList[1].name" id="categoriesList[1].name" size="4"/> 
```

等等..

在您的表单中，您需要将 categoriesList 声明为 ArrayList 或 Array 并且需要该字段的 setter 和 getter

# c++ - 异常处理 C++ 错误

> ID：12033374
> 
> 赞同：1
> 
> 时间：2012-08-20T06:55:02.283
> 
> 标签：c++, exception-handling

```
#include<iostream>
#include<stdlib.h>
#include<string.h>
using namespace std;
class div
{
    int x,y;
public:
    class dividebyzero
    {
    };
    class noerror1
    {
    };
    div(){};
    div(int a,int b)
    {
        x=a;
        y=b;
    }
    void error1()
    {
        if(y==0)
            throw dividebyzero();
        else
            throw noerror1();
    }
    int divide()
    {
        return (x/y);
    }
};
class naming
{
    char name[32];
public:
    class nullexception
    {
    };
    class noerror2
    {
    };
    naming(char a[32])
    {
        strcpy(name,a);
    }
    void error2()
    {
        if(strcmp(name,"")==0)
            throw nullexception();
        else
            throw noerror2();
    }
    void print()
    {
        cout<<"Name-----"<<name<<endl;
    }
};
int main()
{
    div d(12,0);
    try
    {
        d.error1();
    }
    catch(div::dividebyzero)
    {
        cout<<"\nDivision by Zero-------Not Possible\n";
    }
    catch(div::noerror1)
    {
        cout<<"\nResult="<<d.divide()<<endl;
    }
    naming s("Pankaj");
    try
    {
        s.error2();
    }
    catch(naming::nullexception)
    {
        cout<<"\nNull Value in name\n";
    }
    catch(naming::noerror2)
    {
        s.print();
    } 
    return 0;
} 
```

在编译此程序时，我收到以下错误

```
pllab55.cpp: In function ‘int main()’:
pllab55.cpp:61:6: error: expected ‘;’ before ‘d’
pllab55.cpp:64:3: error: ‘d’ was not declared in this scope
pllab55.cpp:72:22: error: ‘d’ was not declared in this scope
pllab55.cpp:74:20: warning: deprecated conversion from string constant to ‘char*’ [-Wwrite-strings] 
```

在声明类**命名**之前，一切运行良好。在声明命名之后，这些错误开始发生。我是 C++ 新手。请详细解释我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:12:41.140

您的类 div 与 std::div 同名。当你执行#using namespace std 时，结果是std 命名空间中的每个类都被导入到你当前的作用域中，这意味着std::div 现在基本上被称为div。如果您看到，这意味着您现在在同一范围内有两个名为 div 的类，即您自己的类和 std 类。

顺便说一句，您应该避免使用命名空间语法，而是使用类的完整限定符（例如 std::cout）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T07:02:16.383

标准命名空间中已经有一个**[std::div](http://en.cppreference.com/w/cpp/numeric/math/div)**，并且由于您使用 using namespace 指令而不是声明，它将`std`命名空间中的所有符号导入到当前范围。因此，也许重命名`div`课程会为您解决问题。

我尝试重命名它，它确实**[有效](http://ideone.com/X2Fnw)**。

所以要么重命名你的类，要么将它包装在你自己的命名空间中，这样它就不会与`std::div`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T07:04:49.277

您的类与您的`div`类冲突，`std::div`因此要么重命名您的类，要么将您的 div 类放在不同的命名空间中。

```
namespace me {
   struct div{};
}

me::div d; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T07:07:44.510

我在 gcc 中尝试了您的代码（稍微变体），但出现以下错误：

```
 /usr/include/stdlib.h:780: error: too few arguments to function 'div_t div(int, int)' 
```

恐怕您正试图覆盖标准库中的名称并遇到类和具有相同名称的函数的冲突。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T07:15:02.803

作为一般经验法则，如果您遇到此类问题，请尽量减少您的代码。例如，我把它减少到

```
#include<stdlib.h>

class div {
public:
  div (int a, int b) { }
};

int
main () {
  div d (12, 0);
  return 0;
} 
```

它仍然显示您的错误（至少是第一个错误 - 其他是后续错误）。这还可以让您减少对错误原因的可能假设 - 如您所见，您的新类“命名”不必对您看到的错误做任何事情。当我现在另外删除包含时，错误不再出现，这让我怀疑与 stdlib.h 中的某些符号存在命名冲突。将类“div”重命名为其他名称（如“CDiv”）后，它就可以工作了。

# .htaccess - Magento 301 htacess 重定向根本不起作用

> ID：12033376
> 
> 赞同：1
> 
> 时间：2012-08-20T06:55:02.853
> 
> 标签：.htaccess, magento

我正在编写一个 301 重定向，通过 htaccess 将旧流量重定向到新 url，例如我有旧 url

[http://www.thebedroom.com.au/catalogue/accessories/product134](http://www.thebedroom.com.au/catalogue/accessories/product134)

我需要将此请求重定向到

[http://www.thebedroom.com.au/melbourne-demons-bean-bag-cover.html](http://www.thebedroom.com.au/melbourne-demons-bean-bag-cover.html)

所以我在magento httpaccess上写了一个代码，如下所示

```
Redirect 301 http://www.thebedroom.com.au/catalogue/accessories/product134 http://www.thebedroom.com.au/melbourne-demons-bean-bag-cover.html 
```

没运气

也试过

```
Redirect 301 ^accessories/product134 http://www.thebedroom.com.au/melbourne-demons-bean-bag-cover.html 
```

但这不会重定向并在浏览器窗口上显示相同的 url。

任何人都知道这里有什么问题

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:15:20.607

尝试：

```
Redirect 301 /catalogue/accessories/product134 http://www.thebedroom.com.au/melbourne-demons-bean-bag-cover.html 
```

或者

```
RedirectMatch 301 product134 http://www.thebedroom.com.au/melbourne-demons-bean-bag-cover.html 
```

`product134`如果URI 中有任何实例，它将重定向。

# android - 在 android 中调用 Sap Web 服务时出现 XmlpullParserException

> ID：12033377
> 
> 赞同：0
> 
> 时间：2012-08-20T06:55:07.743
> 
> 标签：android, web-services, sap

我收到如下所示的错误。请告诉我哪里出错了。

这是我写的代码

```
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
               SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                 SoapEnvelope.VER12);
               envelope.setOutputSoapObject(request);
               try {

                       HttpTransportSE  httpTransport = new HttpTransportSE(URL);
                       httpTransport.call(SOAP_ACTION, envelope);
              // httpTransport.call(SOAP_ACTION, envelope);
               SoapObject result = (SoapObject) envelope.bodyIn;
                    Log.i("Result........................", result.toString());
                    System.out.println(result);
                    Toast.makeText(SAPSoapWebservicesActivity.this, result.toString(),
                                50000).show();

             } catch (IOException e) {
              // TODO Auto-generated catch block
              e.printStackTrace();
             } catch (Exception e) {
              // TODO Auto-generated catch block
              e.printStackTrace();
             }

08-20 12:01:01.606: WARN/System.err(939): org.xmlpull.v1.XmlPullParserException: expected: START_TAG {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG <html>@1:6 in java.io.InputStreamReader@4052df28) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:09:27.360

```
"org.xmlpull.v1.XmlPullParserException: expected: START_TAG" 
```

`XML Parsing Error`. 当未从服务器接收到 预先要求的格式化**响应时，解析器在解析时推送此异常。**

建议：

*   在`Parsing the response`从服务器之前，只需通过烘烤或打印在`LogCat`.
*   检查`Parameters`你传递给`Web Service Method`你正在调用的那个。如果需要`parameter or the method name does not match`，它会给你一个不合适的响应，在解析时会给出这个异常，就像解析器所期望的那样`"something else"`。

# c# - 反应式：试图理解主题 工作

> ID：12033378
> 
> 赞同：3
> 
> 时间：2012-08-20T06:55:12.530
> 
> 标签：c#, system.reactive

试图了解`Subject<T>`,`ReplaySubject<T>`和其他的工作原理。这是示例：

（主题是可观察的**和**观察者）

```
public IObservable<int> CreateObservable()
{
     Subject<int> subj = new Subject<int>();                // case 1
     ReplaySubject<int> subj = new ReplaySubject<int>();    // case 2

     Random rnd = new Random();
     int maxValue = rnd.Next(20);
     Trace.TraceInformation("Max value is: " + maxValue.ToString());

     subj.OnNext(-1);           // specific value

     for(int iCounter = 0; iCounter < maxValue; iCounter++)
     {
          Trace.TraceInformation("Value: " + iCounter.ToString() + " is about to publish");
          subj.OnNext(iCounter);
      }

      Trace.TraceInformation("Publish complete");
      subj.OnComplete();

      return subj;
 }

 public void Main()
 {
     //
     // First subscription
     CreateObservable()
         .Subscribe(
               onNext: (x)=>{  
                  Trace.TraceInformation("X is: " + x.ToString()); 
      });

     //
     // Second subscribe
     CreateObservable()
         .Subscribe(
               onNext: (x2)=>{  
                  Trace.TraceInformation("X2 is: " + x.ToString());
     }); 
```

案例1：奇怪的情况是 - 当我使用时`Subject<T>`没有订阅（???） - 我从来没有看到“X is：”文本 - 我只看到“Value is：”和“Max value is”......为什么不`Subject<T>`将值推送到订阅？

案例 2：如果我使用`ReplaySubject<T>`- 我确实看到了 Subscription 中的值，但我无法将`Defer`选项应用于任何内容。Not to `Subject`and not to Observable....所以每个订阅都会收到不同的值，因为`CreateObservable`函数是*冷*可观察的。在哪里`Defer`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T07:18:23.280

每当您需要凭空创建一个 observable 时，Observable.Create 应该是首先想到的。主体进图有两种情况：

*   您需要某种“可寻址端点”来提供数据，以便所有订阅者都能接收到它。将此与具有调用端（通过委托调用）和订阅端（通过委托结合 +- 和 -= 语法）的 .NET 事件进行比较。你会发现在很多情况下，你可以使用 Observable.Create 来达到同样的效果。

*   您需要在查询管道中多播消息，通过查询逻辑中的许多分支有效地共享可观察序列，而不会触发多个订阅。（想想为你的宿舍订阅一次你最喜欢的杂志，然后在信箱后面放一台复印机。你仍然需要支付一次订阅费，尽管你所有的朋友都可以在信箱上阅读通过 OnNext 发送的杂志。）

此外，在很多情况下，Rx 中已经有一个内置的原语可以完全满足您的需求。例如，有 From* 工厂方法来桥接现有概念（例如事件、任务、异步方法、可枚举序列），其中一些使用了隐藏的主题。对于多播逻辑的第二种情况，有 Publish、Replay 等一系列操作符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T08:22:52.720

您需要注意代码何时执行。

在“案例 1”中，当您使用 a 时`Subject<T>`，您会注意到在方法返回可观察对象之前对`OnNext`&完成的所有调用。由于您使用的是 a这意味着任何后续订阅都将错过所有值，因此您应该期望得到您所得到的 - 什么都没有。`OnCompleted``CreateObservable``Subject<T>`

您必须延迟对该主题的操作，直到您订阅了观察者。`Create`使用该方法来做到这一点。就是这样：

```
public IObservable<int> CreateObservable()
{
    return Observable.Create<int>(o =>
    {
        var subj = new Subject<int>();
        var disposable = subj.Subscribe(o);

        var rnd = new Random();
        var maxValue = rnd.Next(20);
        subj.OnNext(-1);
        for(int iCounter = 0; iCounter < maxValue; iCounter++)
        {
            subj.OnNext(iCounter);
        }
        subj.OnCompleted();

        return disposable;
    });
} 
```

为了简洁起见，我删除了所有跟踪代码。

所以现在，对于每个订阅者，您都可以在`Create`方法内获得新的代码执行，您现在可以从 internal 获取值`Subject<T>`。

使用`Create`方法通常是创建从方法返回的可观察对象的正确方法。

或者，您可以使用 a`ReplaySubject<T>`并避免使用该`Create`方法。然而，由于多种原因，这并不吸引人。它强制在创建时计算整个序列。这给了你一个冷的 observable，你可以在不使用回放主题的情况下更有效地制作它。

现在，顺便说一句，您应该尽量避免使用主题。一般规则是，如果您使用主题，那么您做错了什么。该`CreateObservable`方法最好这样写：

```
public IObservable<int> CreateObservable()
{
    return Observable.Create<int>(o =>
    {
        var rnd = new Random();
        var maxValue = rnd.Next(20);
        return Observable.Range(-1, maxValue + 1).Subscribe(o);
    });
} 
```

完全不需要主题。

让我知道这是否有帮助。

# javascript - 记录/跟踪 html 滑块控制移动

> ID：12033385
> 
> 赞同：0
> 
> 时间：2012-08-20T06:55:33.010
> 
> 标签：javascript, jquery, html, cordova

我在 iOS 的 phonegap/cordova 应用程序中有一个 HTML5 滑块（范围）控件，用于计算演示文稿中房地产销售的佣金 - 因此您移动滑块，它会根据不断上涨的销售价格和随着销售价格的增加而变化的百分比。都好。

想知道是否有人知道记录滑块位置的方法？

目的是将 iPad 交给下注者，当我们拿回 iPad 时，我们可以看到“热点”，因此每隔 500 毫秒左右记录一次位置。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:08:14.583

在该 dom 对象和更改/鼠标上添加一个侦听器，您可以将当前值推送到数组。

# c# - 如何打破注册表依赖？

> ID：12033386
> 
> 赞同：0
> 
> 时间：2012-08-20T06:55:47.597
> 
> 标签：c#, registry

我有一个从注册表中读取一些值的代码。

如何打破这种依赖？这是一段代码：

```
RegistryKey readKey = 
        Registry.LocalMachine.OpenSubKey("SOFTWARE\\MyCompany\\MySoft"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T07:02:38.540

您可以将配置信息从注册表中提取到配置文件中，`app.config`例如 .

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T08:48:58.967

两个可能的答案浮现在脑海

**1) 注册中心的代理服务**

**例如**

```
public interface IRegistryService {
    string GetRegistrySubKey(string path);
} 
```

IRegistryService 的默认实现实现了给定的代码，并且可以将模拟注入到被测单元中以进行单元测试。

**2) 使用[Moles](http://research.microsoft.com/en-us/projects/moles/)模拟 Registry 类。**

更多的工作需要设置。（需要下载和安装，并且需要一些项目/测试设置）但它是一个更通用的解决方案，因为 Moles 可用于模拟任何 BCL 类。

嗯，
艾伦。

# sql-server - 如何在 EXEC 中包含 ' （引号）

> ID：12033387
> 
> 赞同：0
> 
> 时间：2012-08-20T06:55:49.570
> 
> 标签：sql-server, tsql

在以下 T-SQL 代码中，如何将`@Name`和括`P`在引号中？

```
EXEC('xp_cmdshell ''echo IF EXISTS(SELECT * FROM sys.objects WHERE name = ' + @Name + ' AND type = P)>> C:\test.txt'', NO_OUTPUT')` 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:58:58.770

尝试这个：

```
declare @Name varchar(50)='test'

EXEC('xp_cmdshell ''echo IF EXISTS(SELECT * FROM sys.objects 
WHERE name = ''''' + @Name + ''''' AND type = ''''P'''')>> 
C:\test.txt'', NO_OUTPUT') 
```

# c# - Avalonedit 如何使线路变压器无效

> ID：12033388
> 
> 赞同：6
> 
> 时间：2012-08-20T06:56:00.810
> 
> 标签：c#, .net, wpf, avalonedit, invalidation

我已将派生自 DocumentColorizingTransformer 的 LineTransformerClass 添加到 TextEditor：

```
TxtEditCodeViewer.TextArea.TextView.LineTransformers.Add(new ColorizeAvalonEdit()); 
```

是否有任何编程方式在 Linetransformer 上调用失效？

我很容易假设，因为它被添加到 textview 中，以下应该可以工作：

```
TxtEditCodeViewer.TextArea.TextView.InvalidateVisual();
TxtEditCodeViewer.TextArea.TextView.InvalidateArrange();
TxtEditCodeViewer.TextArea.TextView.InvalidateMeasure(); 
```

但他们没有。以防万一，我也尝试了以下方法：

```
//TxtEditCodeViewer.TextArea.TextView.InvalidateVisual();
//TxtEditCodeViewer.TextArea.TextView.InvalidateArrange();
//TxtEditCodeViewer.TextArea.TextView.InvalidateMeasure();
//TxtEditCodeViewer.InvalidateVisual();
//TxtEditCodeViewer.InvalidateArrange();
//TxtEditCodeViewer.InvalidateMeasure();
//TxtEditCodeViewer.TextArea.InvalidateArrange();
//TxtEditCodeViewer.TextArea.InvalidateMeasure();
//TxtEditCodeViewer.TextArea.InvalidateVisual(); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-20T15:37:24.613

文本视图维护生成的视觉线的缓存。强制 WPF 重新绘制控件只会使其重新使用缓存中的结果，并且不会再次调用您的线路转换器。

您可以使用该`TextView.Redraw`方法使缓存的视线无效：

```
textEditor.TextArea.TextView.Redraw(segment); // invalidate portion of document
textEditor.TextArea.TextView.Redraw(); // invalidate whole document 
```

这适用于`ElementGenerators`和`LineTransformers`。

对于`BackgroundRenderers`，没有必要使视线无效。相反，只需告诉文本视图使您的背景渲染器所属的图层无效：

```
textEditor.TextArea.TextView.InvalidateLayer(this.Layer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T10:31:38.363

我有同样的问题。我设置了一些文本的背景颜色...

所以我必须在设置背景之前做一个解决方法（背景保存在缓存中）：

```
if (Txtpreview.TextArea.TextView.LineTransformers.Count > 2)
{
    Txtpreview.TextArea.TextView.LineTransformers.RemoveAt(1); // removes selection highlight
}
Txtpreview.TextArea.TextView.LineTransformers.Add(new MarkSameWord(Txtpreview.SelectedText)); 
```

# php - 正则表达式查找 html 评论但不是仅评论

> ID：12033395
> 
> 赞同：1
> 
> 时间：2012-08-20T06:56:57.103
> 
> 标签：php, regex, pattern-matching

我只想使用正则表达式匹配有效的 HTML 注释。我在stackoverflow上看到了很多问题，但没有人回答这个问题。 **允许匹配的模式**

```
<!-- some comments 1 -->
<!-- 1.91 -->
<!--
//-->
<!-- --> 
```

但不是这些仅限 IE 的评论

```
<!--[if IE]> <![endif]-->
<!--[if !IE]><!-->  <!--<![endif]-->
<!--[if IE 6]> <![endif]--> 
```

我认为如果在`<!--`返回 false 后发现它作为第一个字符，可以通过“[”的帮助来完成。您可以通过任何方式提供自己的解决方案。对于 php 仅使用 preg_replace

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:13:16.497

我真的不建议你使用正则表达式，但如果你坚持，这里有一个基本的正则表达式：[http ://regex101.com/r/wI2kF7](http://regex101.com/r/wI2kF7)

带有锚标签：[http ://regex101.com/r/tC9xH4](http://regex101.com/r/tC9xH4)

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T07:20:29.987

为什么要使用正则表达式？使用如下所示的[DOMXPath 查询](http://www.php.net/manual/en/domxpath.query.php)

```
'//comment()[not(starts-with(., "[if") or . = "<![endif]")]' 
```

有关工作示例，请参阅[http://codepad.viper-7.com/Yzs5zq 。](http://codepad.viper-7.com/Yzs5zq)

# mysql - 我的数据库设计看起来正确吗？M 对 M 关系

> ID：12033398
> 
> 赞同：0
> 
> 时间：2012-08-20T06:57:00.277
> 
> 标签：mysql, database, database-design, erd

![在此处输入图像描述](../Images/5832c4ab0f358193bc21c8e0876f00a2.png)

我担心的是 table/entity `price_for_different_regions`。只是我没有系统地学习过数据库设计，大部分东西都是自学的，有高手看看就好了。我正在使用 MySQL。

# actionscript-3 - 如何循环分层数据中的所有孩子？

> ID：12033400
> 
> 赞同：0
> 
> 时间：2012-08-20T06:57:04.473
> 
> 标签：actionscript-3, apache-flex, flex4, flex3

我有arraycollection，其中根任务包含孩子，孩子包含子孩子等等。

例如：

[0] 根1

```
 child1
       child2
           child3
                data 
```

[1] 根1

```
 child1
       child2
           child3
                child4
                   data 
```

我如何使用任何循环来循环这个

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:30:54.727

使用递归

```
loopChildren(root1)

function loopChildren(parent:Array):void {

    for(var i:String in parent){
        if(parent[i] is Array) loopChildren(parent[i]);
        else {
            //read data
        }
    }
} 
```

# wpf - 使用 Visual Studio 2012 在 wpf 工具包中找不到 AutoCompleteBox

> ID：12033404
> 
> 赞同：10
> 
> 时间：2012-08-20T06:57:15.743
> 
> 标签：wpf, wpftoolkit

这确实是一个想要的功能，AutoCompleteBox（显然不是 AutoCompleteComboBox）。但是，Visual Studio 2012 找不到 AutoCompleteBox 控件。但是我没有在早期版本的vs中尝试过，所以它可能不是版本问题。

我安装了 wpf 工具包，将这些扩展添加到我的 WPF 项目中：

*   WPF 工具包
*   WPF 工具包设计
*   WPF 工具包输入设计
*   WPF 工具包输入 Visual Studio 设计
*   WPF 工具包布局
*   WPF 工具包布局 Visual Studio 设计
*   WPF 工具包 Visual Studio 设计。

在我看来几乎像 virii。单词的每一个排列都被使用了......在我的 WPF 项目中很好，我补充道

`xmlns:toolkit="http://schemas.microsoft.com/wpf/2008/toolkit"`

到一个窗口并尝试添加一个自动完成框，如下所示：

```
<toolkit:AutoCompleteBox /> 
```

但是 AutoCompleteBox 似乎不存在，我输入时列出的第一个组件

```
<toolkit: 
```

是 ButtonBaseBehavior。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-20T07:23:11.770

并非所有工具包控件都包含在“主”命名空间中。

让我解释一下工具包 dll 是如何构建的：

您还可以通过 NuGet 安装 WPF 工具包：

```
PM> Install-Package WPFToolkit 
```

它将向您的项目添加三个 dll：

*   **WPFToolkit.dll**这包含工具包的核心/稳定控件，可以在`xmlns:toolkit="http://schemas.microsoft.com/wpf/2008/toolkit"`

*   **System.Windows.Controls.Input.Toolkit.dll** 这个 dll 包含*预览*控件，例如`AutoCompleteBox`和`Rating`

*   **System.Windows.Controls.Layout.Toolkit.dll**这个 dll 包含*预览*布局控件，如`Accordion`

*预览*控件不包含在主xmls 命名空间中，因此您需要使用对应预览 dll 的命名空间：

```
xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Input.Toolkit"

<controls:AutoCompleteBox /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-18T09:45:20.173

添加对（包含在 WPFToolkit 中）的引用： **`System.Windows.Controls.Input.Toolkit.dll`** 然后在顶部的 xaml 中：

```
xmlns:System_Windows_Controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Input.Toolkit" 
```

并在您的代码中的任何地方使用它，就像这样：

```
<System_Windows_Controls:AutoCompleteBox /> 
```

# ios - 检测人脸纵横比

> ID：12033407
> 
> 赞同：0
> 
> 时间：2012-08-20T06:57:37.367
> 
> 标签：ios

我正在 ios 中进行演示，用户从相机或照片库中拍摄照片，然后从肤色和眼睛的形状确定这个人是日本人、中国人还是亚洲人。是否有任何 ios 库可以帮助我实现这一目标。如果没有这样的图书馆，任何人都可以指导它是否是物理的，或者我应该遵循什么方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:06:16.733

您可能会研究[OpenCV](http://opencv.willowgarage.com/wiki/)以进行任何类型的特征检测。据我了解，该框架允许您检测特定的颜色形状等。并且应该可以帮助您实现目标。

然后就任何类型的基本人脸检测而言，您都可以使用 Apple 的[CIDetector](http://developer.apple.com/library/ios/#documentation/CoreImage/Reference/CIDetector_Ref/Reference/Reference.html)。

# plone - 更改自定义内容类型的内容列表中的链接

> ID：12033414
> 
> 赞同：2
> 
> 时间：2012-08-20T06:58:36.637
> 
> 标签：plone

我基于现有的“图像”类型创建了一个自定义内容类型。当我查看父文件夹的内容选项卡时，实际图像具有如下链接：

> .../arumsans/arumsans.png/视图

我的类型有这样的链接：

> .../arumsans/粗体

单击时仅在浏览器中显示图像。

如何修改这些链接的制作方式，以便我的类型具有

> .../arumsans/粗体/查看

或者

> .../arumsans/粗体/编辑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:25:19.180

您需要在工具`typesUseViewActionInListings`的`site_properties`属性表的属性中列出您的类型。`portal_properties`

要手动执行此操作，请导航到 ZMI，找到该工具并单击它，然后单击工作`site_properties`表，然后找到`typesUseViewActionInListings`条目并将`portal_type`您的自定义类型添加到该列表中。

要自动执行此操作，请将`propertiestool.xml`文件添加到定义类型的包的 GenericSetup 配置文件中，并确保它包含以下内容：

```
<?xml version="1.0"?>
<object name="portal_properties" meta_type="Plone Properties Tool">
 <object name="site_properties" meta_type="Plone Property Sheet">
  <property name="typesUseViewActionInListings" type="lines">
   <element value="YourCustomPortalType"/>
  </proyerty>
 </object>
</object> 
```

（`portal_type`填写您的值）并重新导入配置文件。

# java - Java解析异常

> ID：12033415
> 
> 赞同：0
> 
> 时间：2012-08-20T06:58:40.907
> 
> 标签：java, parsing, exception

我创建了一个休眠程序，当我尝试格式化日期时，出现以下错误：

> java.text.ParseException：无法解析的日期

```
SimpleDateFormat formatter=new SimpleDateFormat("dd/MM/yyyy");
SimpleDateFormat formatter1=new SimpleDateFormat("yyyy-MM-dd");
Date date1=null;
Date date2=null;
Date startdate=(Date)formatter.parse(startDate);
Date enddate=(Date)formatter.parse(endDate); 
```

如何解决解析异常？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:01:21.093

您正在尝试解析`startdate`，但它实际上不包含任何日期，因此`Exception`.

你应该试试：

```
String strDate = "2012-10-20";
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");
Date startDate = formatter.parse(strDate); 
```

# c++ - 非调用函数的编译器优化

> ID：12033416
> 
> 赞同：2
> 
> 时间：2012-08-20T06:58:47.127
> 
> 标签：c++, compiler-optimization, legacy

我在遗留代码中有一个函数，不再被调用。

我的问题是：编译器会针对未被调用的函数进行优化，还是可执行文件包含该函数的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T07:02:47.747

可能。它是实现、工具集和构建参数定义的。

更改优化设置、链接器标志和可见性（静态/私有/外部/内部/匿名命名空间）可能会增加最终可执行文件中省略它的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:04:07.453

死代码删除通常由链接器完成（因为编译器不知道使用或不使用哪些函数）。但是，有时编译器本身可以删除具有`static`链接的函数。

这是因为默认情况下所有函数都有外部链接。在声明外部链接变量时使用的保留术语“extern”可以（实际上是）在声明函数时省略。因此，如果那些没有声明为静态的，那么它们可以在其他地方使用，而编译器对此一无所知。

此外，GCC（如果您正在使用的话）具有 SSA 积极的死代码消除（-fssa-dce 标志），可以帮助删除不需要的代码。

如果您正在寻找删除死函数或部分的东西，那么您可以使用 gcov [http://gcc.gnu.org/onlinedocs/gcc/Gcov-Intro.html#Gcov-Intro](http://gcc.gnu.org/onlinedocs/gcc/Gcov-Intro.html#Gcov-Intro)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T07:04:46.460

如果它被编译成目标文件，那么编译器不知道你的函数是否会被使用。除非您使用链接时间优化 (lto) 或整个程序优化选项。如果函数在标头中-您可以将其设为静态，以便编译器可以对其进行优化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T07:08:34.507

它很有可能在文件中，因为可以通过动态方式进行运行时访问。例如一个串联的字符串会产生大量不同的函数名并用于访问它们。

尽管这种类型的实现很少见，但仍有可能，因此代码必须保持可用。

# azure - 关于 Azure 关联组性能

> ID：12033417
> 
> 赞同：2
> 
> 时间：2012-08-20T06:58:57.200
> 
> 标签：azure

如果“云服务”和“存储”在同一个 Affinity Group 中，性能会更好吗？还是和同一个数据中心一样？

我问这个是因为我觉得同一个 Affinity Group 中的“云服务”和“存储”更快，并且对于相同的 PartitionKey/RowKey 查询，我在同一个数据中心（美国南部）的存储中获得了更多的网络错误（超时）。

那么，如果有性能差异，我该如何更改“存储”亲和组？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T07:47:54.203

请查看 Neil 的以下博客文章，其中更详细地解释了 Affinity Group： http: [//convective.wordpress.com/2012/06/10/affinity-groups-in-windows-azure/](http://convective.wordpress.com/2012/06/10/affinity-groups-in-windows-azure/)。用博客文章的话说，本质上，Affinity Group 可以在数据中心内提供更高程度的服务协同定位。

要回答您的第二个问题，一旦您创建了具有位置或关联组参数的存储帐户，您以后将无法更改它。您需要删除该存储帐户并重新创建它。请注意，根据您存储帐户中的数据，删除该存储帐户可能需要一段时间。在“删除”存储帐户时，您将无法创建另一个同名的存储帐户。

# java - 在 Struts2 中，如何以 HTML 格式正确显示文本（从文本区域收集）？

> ID：12033419
> 
> 赞同：0
> 
> 时间：2012-08-20T06:59:35.317
> 
> 标签：java, html, jsp, struts2

现在我正在学习构建一个简单的 bbs 系统，人们可以在该系统中在 textarea 中发布文章。问题是当我显示字符串时，格式会丢失。

我知道如果你输出一个字符串`<s:property/>`，默认情况下它是 html 转义的（我猜 Struts 似乎使用 apache commons.lang.StringEscapeUtils）。但它不会逃脱 ' ' 到`&nbsp;`. 此外，它不会将 '/n' 转换为`<br/>`.

我应该怎么办？

顺便问一下，如何实现一个富文本编辑器（比如stackoverflow中使用的文本编辑器）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:08:53.820

我建议你最好不要依赖文本区域，最好使用某种文本编辑器。那里有很多 java-script 文本编辑器，您不需要任何额外的东西来将它们集成到您现有的 S2 应用程序中。几个选项是

1.  [天猫](http://www.tinymce.com/)
2.  [CK编辑器](http://ckeditor.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:17:46.000

因为这样做不是逃避，而是转变。

如果您想将空间更改为`&nbsp;`和`\n`，`<br/>`则需要自己进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-14T18:16:51.540

**在 textarea 中编辑 HTML，jQ 显示结果（不是 OP 中的 Struts2 req）**

抱歉，这是 OP O_o 中请求的 jQuery 实现 vs Struts2。希望它给 Struts2 用户一个起点？

这有一些控制按钮的格式，由 textarea 中的快捷键组合和动态显示更改的 div 支持。

```
<head>
    <title>Text Editor (test)</title>
<script type="text/javascript" src="../lib/js/jquery.min.js"></script>
<script type="text/javascript">
$(function(){
    updCont();
    var ht = window.innerHeight - $("#dvInput").css("height").replace(/[^.0-9]/g, '') - 30;
    $("#dvCont").css("height", ht + "px");
    $("#txtCont").keydown(function(e){
        var curKey = e.which ? e.which : e.key;
        if(e.ctrlKey && e.shiftKey){
            if([56,190,54].indexOf(curKey)>-1)
                e.preventDefault ? e.preventDefault() : (e.returnValue = false);
            if(curKey == 56) fmt("bull");// *
            else if(curKey == 190) fmt("indnt");// >
            else if(curKey == 54) fmt("para");// ^
        }else if(e.ctrlKey){
            if([66,73,13].indexOf(curKey)>-1)
                e.preventDefault ? e.preventDefault() : (e.returnValue = false);
            if(curKey == 66) fmt("bld");// B
            else if(curKey == 73) fmt("ital");// I
            else if(curKey == 13) fmt("crlf");// [enter]
        }
        updCont();
    });
    $("#inp").keydown(function(e){alert(e.which)})
});
function updCont(){
    $("#dvCont").html($("#txtCont").val());
}
function fmt(inAct){
    var oTxt = $("#txtCont");
    var s = oTxt[0].selectionStart;
    var e = oTxt[0].selectionEnd;
    var raVal = [oTxt.val().substring(0, s), oTxt.val().substring(s, e), oTxt.val().substring(e), s, e];
    var ofstStart = 0;
    var ofstEnd = 0;
    if(inAct=="bld"){
        oTxt.val(raVal[0] + "<b>" + raVal[1]  + "</b>" + raVal[2]);
        //if you don't want text selected, add raVal[1].length to ofstStart 
        ofstStart = 3;
        //uncomment if you want cursor after closing tag (and note also ofstStart same point to unselect)
        //ofstEnd = 4;
    }else if(inAct=="ital"){
        oTxt.val(raVal[0] + "<i>" + raVal[1]  + "</i>" + raVal[2]);
        ofstStart = 3;
        //ofstEnd = 4;
    }else if(inAct=="indnt"){
        oTxt.val(raVal[0] + "<div class='dnt'>" + raVal[1]  + "</div>" + raVal[2]);
        ofstStart = 17;
        //ofstEnd = 5;
    }else if(inAct=="bull"){
        oTxt.val(raVal[0] + "<br />&nbsp; &bull; " + raVal[1]  + raVal[2]);
        ofstStart = 20;
    }else if(inAct=="para"){
        oTxt.val(raVal[0] + "<p>" + raVal[1]  + "</p>" + raVal[2]);
        ofstStart = 3;
        //ofstEnd = 4;
    }else if(inAct=="href"){
        oTxt.val(raVal[0] + "<a href='' class='' title=''>" + raVal[1]  + "</a>" + raVal[2]);
        ofstStart = 29;
        //ofstEnd = 4;
    }else if(inAct=="crlf"){
        oTxt.val(raVal[0] + "<br />" + raVal[1]  + raVal[2]);
        ofstEnd = 5;
    }
    updCont();    
    oTxt[0].selectionStart = s + ofstStart;
    oTxt[0].selectionEnd = s + ofstStart + raVal[1].length;
    oTxt[0].focus();
}
</script>
<style>
.dnt{margin-left:40px;}
.styleBtn{width:20px;margin:2px 10px;border:1px solid black; padding:1px 7px;background-color:#EEE;float:left;text-align:center;}
</style>
</head><body>
<div id="dvInput">
<div style="border:1px solid black;border-radius:5px;background-color:silver;font-weight:bold;padding:2px 5px;float:left;">
    <div style="float:left;margin:2px 20px;">Text Input:</div>
    <span onclick="fmt('bld');" title="CTRL+B: Bold selected text">
        <div class="styleBtn"><b>B</b></div>
    </span>
    <span onclick="fmt('ital');" title="CTRL+I: Italicize selected text">
        <div class="styleBtn"><i>I</i></div>
    </span>
    <span onclick="fmt('indnt');" title="CTRL+Shift+>: <div> Indent a selected block of text\n(No remove shortcut.\nManually delete <div></div> to undo/outdent)">
        <div class="styleBtn">></div>
    </span>
    <!-- <span onclick="fmt('outdnt');">&lt;</span> -->
    <span onclick="fmt('bull');" title="CTRL+Shift+*: Bullet (and new line)">
        <div class="styleBtn">&bull;</div>
    </span>
    <span onclick="fmt('para');" title="CTRL+Shift+^: Paragraph <p> around highlighted/selected text">
        <div class="styleBtn">&para;</div>
    </span>
    <span onclick="fmt('crlf');" title="CTRL+Enter: New Line <br>">
        <div class="styleBtn">&ldsh;</div>
    </span>
    <span onclick="fmt('href');" title="CTRL+Shift+A: <a href>">
        <div class="styleBtn">&lt;a></div>
    </span>
<!-- <input id="inp" size="2">-enter char, get ascii number -->
</div>
<textarea id="txtCont" rows="10" style="width:100%;">
</textarea><br />
</div>
Display:
<div id="dvCont" style="border:1px solid black;border-radius:5px;overflow-y:auto;"></div>
</body>
</html> 
```

StackOverflow 编辑器有一些巧妙的格式，超出了我想要在我的显示中实现的范围。

# ios - 替代 google place api？

> ID：12033422
> 
> 赞同：4
> 
> 时间：2012-08-20T06:59:50.760
> 
> 标签：ios, openstreetmap, google-places-api

我正在开发一个使用 Google Place API 的 iphone 应用程序。据我所知，Google 允许此 Place API 每 24 小时 1000 次查询，如果使用信用卡验证帐户，则每 24 小时 100,000 次查询。每 24 小时超过 100,000 次查询将产生额外费用。

我问是否有任何其他选择而不是使用这个 Google Place API？可以支持无限查询。如果有，收费是多少？

我听说 openStreetMap 是免费的。但我不确定是否有任何一方提供基于此 OpenStreetMap 的 Place API，以及限制。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T06:43:42.950

Google Places API 不会因超出配额而向您收费，即使启用了结算功能，您也会收到`"status": "OVER_QUERY_LIMIT"`

根据 Places API 文档的[使用限制](https://developers.google.com/places/documentation/#usage_limits)部分：

> *   拥有 API 密钥的用户每 24 小时允许 1000 个请求。
>     
>     
> *   还通过 API 控制台验证身份的用户每 24 小时允许 100 000 个请求。通过在控制台中启用计费，需要信用卡进行验证。 **使用 Places API 不会从您的卡中收取费用**。

如果您希望每天请求超过 100 000 个查询，请登录并填写[Places API 配额提升请求表](http://places-quota-uplifts.appspot.com/)以及您的申请详细信息，然后我们将审核您的申请以确保其符合我们的[条款](https://developers.google.com/maps/terms)和[要求](https://developers.google.com/places/documentation/#Limits)，之后我们将联系您很快就会收到您的请求的结果。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-22T07:00:11.710

有一些替代方案：

*   [Yelp.com](http://yelp.com)
*   [Foursquare.com](http://foursquare.com)（每小时 5000 个请求，每天 120 000 个，使用 OpenStreetMap）

Yelp.com 有更严格的 API 使用限制，Foursquare.com 有更少的 API 使用限制，它们甚至允许响应缓存一段时间以提高应用程序性能。

# javascript - 在 TextArea 中上下滚动

> ID：12033423
> 
> 赞同：3
> 
> 时间：2012-08-20T07:00:00.527
> 
> 标签：javascript, jquery, html, xhtml

**在TextArea**中是否有任何特定的向上和向下滚动功能。**在TextArea**中向上/向下滚动时触发“onscroll” 。

此外，如何在文本区域的最后一行之后转到新行并在单击（滚动）时输入“破折号”（--）。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T07:46:21.347

我可能是错的，但据我了解，您正在使用一个实际上以编程方式为您滚动 textarea 的函数。如果这是正确的，则以下工作：

```
var scrollUp = function(elementId) {
    "use strict";
    var element = document.getElementById(elementId);
    element.scrollTop = 0;
};

var scrollDown = function(elementId) {
    "use strict";
    var element = document.getElementById(elementId);
    element.scrollTop = element.scrollHeight;
}; 
```

请参阅此处的 jsFiddle 示例：http: [//jsfiddle.net/WnHpj/3/](http://jsfiddle.net/WnHpj/3/)

如果您愿意，您当然可以使用**scrollTop**以较小的增量移动滚动条。

我真的不明白您对上一个问题的要求，如果您仍然需要帮助，请进一步解释。

**编辑**

破折号...添加此功能：

```
var addDashes = function(elementId) {
    "use strict";
    var element = document.getElementById(elementId);
    if(element.value.substring(element.value.length - 4, element.value.length) !== "\n--\n") {
        element.value = element.value + "\n--\n";
        element.focus();
    }
}; 
```

请参阅更新的 jsFiddle 示例：http: [//jsfiddle.net/sQVe/WnHpj/7/](http://jsfiddle.net/sQVe/WnHpj/7/)

希望那是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T07:15:28.683

```
$("#textbox").scroll(function(e){
 //this happens when there is a scrolling action in your element
}) 
```

# php - Magento：Paypal 将送货地址作为默认地址，而不是帐单地址

> ID：12033428
> 
> 赞同：2
> 
> 时间：2012-08-20T07:00:13.693
> 
> 标签：php, mysql, magento, paypal, e-commerce

我在基于 magento 的电子商务网站中使用“PayPal 网站付款标准”。在结帐时，如果用户输入单独的帐单和送货地址并前往贝宝网站进行付款，那么贝宝会将送货地址与信用卡字段一起显示为默认值。我想在那里显示默认账单，而不是运费。

我已`$request['address_override'] = 1;`从此文件中删除了此（行：238）``/app/code/local/Mage/Paypal/Api/Standard.php`

PayPal 始终默认发货，如果是，为什么？他们应该记帐，因为在贝宝页面上，用户正在付款。

请告知，我怎样才能通过默认账单而不是运费？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T08:27:26.460

```
find app/code/core/Mage/Paypal/Model/Standard.php

change

$address = $isOrderVirtual ? $order->getBillingAddress() : $order->getShippingAddress();
if ($isOrderVirtual) {
$api->setNoShipping(true);
} elseif ($address->validate()) {
$api->setAddress($address);
}

to

$address =$order->getBillingAddress();
if ($address->validate())
{
$api->setAddress($address);
}

http://blog.muabana2z.com/?p=70 
```

# apache - lotus.domino.Session 未序列化

> ID：12033435
> 
> 赞同：0
> 
> 时间：2012-08-20T07:01:00.147
> 
> 标签：apache, serialization, tomcat7, lotus-domino, lotus

我开发了一个基于 Java 的 Lotus Domino 电子邮件客户端应用程序。我将 lotus.domino.Session 对象保存在 httpsession.setAttribute 中用于会话管理。我们决定将应用程序部署在两个不同的服务器上并管理两者之间的负载平衡和会话复制。

现在我们在复制 lotus.domino.Session 时遇到问题，因为 lotus.domino.Session 没有序列化。

请帮助我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:32:36.160

AFAIK，你不走运。

Domino 对象（即 lotus.domino 包中的任何内容）存储指向 C API 对象的链接，该对象必须进行垃圾回收以避免内存泄漏。因此，如果 Domino 对象被序列化，它会在存储它的请求结束时变得有毒，因为它的 C 对象链接将在该请求结束时自动回收。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:19:34.937

正如 Leyrer 所说，不可能序列化任何 Domino 对象，因为它有一个无法存储的 C-API 后端组件。

此外，Session 对象也从未设计用于连接池。因此，即使您跳过序列化，您也可能会遇到其他问题。

根据您要完成的任务，您可以只使用重新创建会话和任何其他对象所需的引用来创建自己的可序列化对象。

# javascript - 我们可以在一个 js 文件中有多个 module.exports 语句吗

> ID：12033436
> 
> 赞同：2
> 
> 时间：2012-08-20T07:01:00.563
> 
> 标签：javascript, appcelerator, titanium-mobile

我是 javascript 的新手。我正在使用 Titanium studio 开发移动应用程序。我的问题是关于javascript的，如下所示。

我在这个文件中有一个名为 commonUi.js 的文件 js 文件，我正在定义可以在不同窗口中使用的通用 UI 组件。

现在我在 commonUi.js 中定义了两个对象函数，如下所示。

```
function component1(){

}

function component2(){

} 
```

现在我的核心问题是我可以在我的 commonUi.js 文件中编写以下两个语句吗

1.  module.exports = 组件1；
2.  module.exports = 组件2；

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T07:08:36.270

你的模块中只能有一个`module.exports =`，但你可以做这样的事情来实现你想要的：

```
var CommonUi = function() {

    var component1 = function() {

    }

    var component2 = function() {

    }

    return {
        component1: component1
       ,component2: component2
    }
}();

module.exports = CommonUi; 
```

然后你可以像这样使用它：`commonUi.component1();`

# iphone - 为 ios 编译 speex 库

> ID：12033437
> 
> 赞同：1
> 
> 时间：2012-08-20T07:01:04.513
> 
> 标签：iphone, ios, ipad, arm

实际上，我有`speex`库的源代码。它是用c写的。我想为`arm`架构编译它，以便我可以添加它并使用我的 iPad 项目。当我在我的 mac 中编译源代码时，它会为`i386`无法与 arm 架构一起使用的架构编译它。

如何编译 arm 架构的源代码？

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:48:56.290

最简单的方法是创建一个新的“库”项目，添加 speex 源，然后编译它。这个库项目当然是一个 iOS 库。一旦你可以编译它，你就可以将该项目添加到你的主项目中，它可以在模拟器和设备中工作。

当您将库项目添加到主项目时，您必须在目标中设置依赖项，并为标题添加路径 - 但您可以在 SO 上找到许多关于如何执行此操作的 Q&A 讨论。

这其中最困难的部分可能是获取 .configure 脚本构建的 config.h 文件（无论如何）。您可能可以使用生成的那个，并且很可能它会正常工作。

编辑：顺便说一句，Speex 已过时 - 有一个替代作品 - 请参阅[Speex 网站](http://www.speex.org)

# sql - SQL/Sybase 数据库不返回结果

> ID：12033441
> 
> 赞同：0
> 
> 时间：2012-08-20T07:01:35.843
> 
> 标签：sql

我正在将一个变量传递给包含公司列表的数据库...... var 正在传递，但数据库没有返回结果。我如何通过列表？我会使用什么样的 Where 语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:00:32.053

如果我们将逗号分隔的列表传递给存储过程以检索在字段中具有这些字符串之一作为值的许多记录，则我们使用 SQL 函数。此函数返回一个可用于过滤数据的表。

这是我们的函数（你应该在使用它之前执行创建）

```
CREATE FUNCTION [dbo].[GetTableFromString]
(
    @string NVARCHAR(4000),
    @separator CHAR
)
RETURNS @resultTable TABLE (string NVARCHAR(255))
AS
  BEGIN
    DECLARE @myString NVARCHAR(255)
    IF (LEN(@string) > 0)
      BEGIN
        DECLARE @start INT,
                @charIndex INT
        SET     @start = 1
        SET     @charIndex = CHARINDEX(@separator, @string, @start) -- Get the position of the first seperator

        WHILE ( @charIndex >= 0 )
          BEGIN
            IF @charIndex = 0 -- No seperator found, take the whole string and insert it in the result table
              BEGIN
                SELECT  @myString = SUBSTRING(@string, @start, LEN(@string) - @start + 1)
                SET     @charIndex = -1
              END
            ELSE
              BEGIN
                SELECT  @myString = SUBSTRING(@string, @start, CHARINDEX(@separator, @string, @start) - @start)
                SET     @start = CHARINDEX(@separator, @string, @start) + 1 -- Set the start position of the char after the seperator
                SET     @charIndex = CHARINDEX(@separator, @string, @start) -- Get the position of the next seperator
              END

            INSERT INTO @ResultTable (string) VALUES (@myString)
          END
      END

    RETURN 
  END 
```

这就是函数的使用方式：

```
SELECT  YourField1, 
        YourField2, 
        ... 
FROM    YourTableName 
WHERE   YourFieldx In ( SELECT  string 
                        FROM    dbo.GetTableFromString('IBM,WalMart,KMart', ',')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T16:09:59.580

我认为你需要发布你在做什么。

听起来好像您有一个 VARCHAR 变量，其中包含一个存储过程的逗号分隔列表，在这种情况下，SP 需要使用动态 sql，但我不知道。

# android - as3 android 在 sdcard 上保存远程声音 - 稍后访问？

> ID：12033442
> 
> 赞同：0
> 
> 时间：2012-08-20T07:01:37.000
> 
> 标签：android, actionscript-3, flash, air, audio

这段代码太酷了！试试看。它会在您的用户中创建一个名为 .007 的文件夹，并保存一个名为 yahoo.mp3 的 mp3。

如果权限设置正确，它也会在 android 设备上执行此操作。

一旦它创建了一个文件夹并保存了 mp3，它将遍历该文件夹并获取文件路径和文件名。

我的问题是：**您如何访问它并在 Android 上播放声音？如果您对其进行测试，它可以在桌面上运行，但不能在机器人上运行。任何想法为什么？**

```
import flash.filesystem.*;
var urlString:String = "http://YourWebsite.com/YourSound.mp3";
var urlReq:URLRequest = new URLRequest(urlString);
var urlStream:URLStream = new URLStream();
var fileData:ByteArray = new ByteArray();
urlStream.addEventListener(Event.COMPLETE, loaded);
urlStream.load(urlReq);

function loaded(event:Event):void
{
    urlStream.readBytes(fileData, 0, urlStream.bytesAvailable);
    writeAirFile();
}

function writeAirFile():void
{

    var file:File = File.userDirectory.resolvePath(".007/Yahoo.mp3");
    var fileStream:FileStream = new FileStream();
    fileStream.open(file, FileMode.WRITE);
    fileStream.writeBytes(fileData, 0, fileData.length);
    fileStream.close();
    trace("The file is written.");

    var desktop:File = File.userDirectory.resolvePath(".0");
    var files:Array = desktop.getDirectoryListing();
    for (var i:uint = 0; i < files.length; i++)
    {
        trace(files[i].nativePath);// gets the path of the files
        trace(files[i].name);// gets the name

        var mySound:Sound = new Sound();
        var myChannel:SoundChannel = new SoundChannel();
        var lastPosition:Number = 0;
        mySound.load(new URLRequest(files[0].nativePath));
        myChannel = mySound.play();

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T16:54:10.573

**file://** <-------**答案！**

知道了！在 Android 手机上访问“sdcard”所需的文件路径必须以：**file://**

如果你想从手机加载声音，它看起来像这样。这是需要的一条重要线路。我将在下面发布完整的代码。

```
mySound.load(new URLRequest("file://mnt/sdcard/AnyFolder/YourSound.mp3")); 
```

由于我在上面使用循环来获取特定文件夹中的所有文件，因此这是上面示例中对我有用的代码。

```
mySound.load(new URLRequest("file://"+files[0].nativePath)); 
```

**在 DROID 上加载和播放声音的完整代码**

```
var mySound:Sound = new Sound();
var myChannel:SoundChannel = new SoundChannel();
var lastPosition:Number = 0;
mySound.load(new URLRequest("file://mnt/sdcard/AnyFolder/YourSound.mp3"));
myChannel = mySound.play(); 
```

我非常努力地找到了这个答案。我希望这对很多人有帮助。**如果此代码对您有所帮助，请记得 +1。:)**

**我喜欢 StackOverflow！:)**

# php - PHP代码不工作，没有错误

> ID：12033444
> 
> 赞同：2
> 
> 时间：2012-08-20T07:01:42.077
> 
> 标签：php

我编写的这段代码由于未知原因无法正常工作。PHP 不报告任何错误或警告。

```
<html>
<head>
<title>PHP Blog</title>
</head>
<body>
<?php
require 'login.php';
$db_server = mysql_connect($db_hostname, $db_username, $db_password);

if (!$db_server) die("Unable to connect to MySQL: " . mysql_error());

mysql_select_db($db_database, $db_server)
    or die("Unable to select database: " . mysql_error());
if(isset($_POST['username']) and isset($_POST['password']))
{
    $pass = "test";
    $user = "test";
        if($_POST['username'] == "test" and $_POST['password'] == "test")
        {
            echo <<<_END
<form action="post.php" method="post"><pre>
Title: <input type="text" name="title">
Post:  <textarea rows="5" cols="64" name="post">
</textarea>
       <input type="submit" value="Submit">
</pre></form>
_END;
                if(isset($_POST['title']) and isset($_POST['post']))
                {
                    $title = $_POST['title'];
                    $post = $_POST['post'];
                    $query = "INSERT INTO blog(title,post) VALUES('$title', '$post')";
                    mysql_query($query);
                    echo 'Succesfully posted..';
                    echo '<a href="blog.php">Click here</a>';
                }

        }
        else
        {
            echo "Wrong Password!";
        }
}
?> 
```

一切正常，直到我设置变量`$_POST['title']`并`$_POST['post']`单击按钮。当我这样做时，我只会得到一个空白页。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T07:18:13.763

如果您提供的代码是**post.php**，这就是问题所在：

当您按下**提交**按钮时，**post.php**只接收`$_POST['title']`和`$_POST['post']`来自表单。

使`$_POST['username']`and为`$_POST['password']`空/为空。因此为 if 语句返回**FALSE ，并产生一个空白页。**

有很多方法可以解决这个问题，具体取决于您的实施。

1.  您可以从表单中传递用户名和密码值。如果您愿意，可以使用隐藏的输入类型或文本。

    ```
    <input type="hidden" name="username"><input type="hidden" name="password"> 
    ```

2.  在里面使用`$_POST['title']`and代替and`$_POST['post']``isset()``$_POST['username']``$_POST['password']`

还有很多..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T07:24:15.980

您必须在正文标记后立即回显登录表单。

如果没有，您将始终得到一个空白页面，因为您的用户名和密码将始终为空白。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T07:05:49.207

因为你的表格应该是：

```
echo <<<_END
    <form action="post.php" method="post"><pre>
    Username: <input type="text" name="username">
    Password: <input type="password" name="password">
    Title: <input type="text" name="title">
    Post:  <textarea rows="5" cols="64" name="post">
    </textarea>
    <input type="submit" value="Submit">
    </pre></form>
_END; 
```

你失去了你的`$_POST['username']`并且`$_POST['password']`没有测试被回应，因为你没有一个`else`for：

```
if(isset($_POST['username']) and isset($_POST['password'])) 
```

或者您可以将您的登录信息保存在会话中并使用它们，而无需让用户再次输入他的用户名和密码。

# c# - 使用 .xsd 文件验证数据

> ID：12033447
> 
> 赞同：1
> 
> 时间：2012-08-20T07:01:54.487
> 
> 标签：c#

我使用 .XSD 文件来验证数据格式，字符串字段应该只允许数字。有我使用的代码：

```
<xs:element name="OrderPurgeDays">
    <xs:simpleType>
        <xs:restriction base="xs:string">
            <xs:maxLength value="3"/>
            <xs:pattern value="[0-9]+"/>
        </xs:restriction>
    </xs:simpleType>
</xs:element> 
```

它没有用。

```
<OrderPurgeDays>a00</OrderPurgeDays> 
```

上面的数据也可以插入数据库。有什么我不知道的错误吗？

顺便说一句，我使用下面的代码

```
`SQLXMLBULKLOADLib.SQLXMLBulkLoad` objBL = 
                     new SQLXMLBULKLOADLib.SQLXMLBulkLoad();

objBL.ConnectionString = DatabaseConnection;
objBL.KeepIdentity = true;
objBL.CheckConstraints = true;
objBL.XMLFragment = true; 
```

将数据导入数据库。

或者，在将数据批量导入数据库之前，有没有其他方法可以验证数据格式

```
SQLXMLBULKLOADLib.SQLXMLBulkLoad 
```

要求是字符串字段应该是数字。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-20T08:14:12.463

OrderPurgeDate 应该有从 000 到 999 的数字作为字符串。要么更改 Pattern 属性应该具有字母数字值，要么将数据类型更改为整数并将限制值限制为 999。

# c# - 如何连接两个不同的窗体保持打开

> ID：12033448
> 
> 赞同：1
> 
> 时间：2012-08-20T07:01:57.033
> 
> 标签：c#, winforms

我开发了一个包含两种形式的桌面应用程序。点击第一个表格会打开第二个表格。现在打开第二个表单后，我想在桌面上同时移动两个表单。并且表格的位置也应该改变。意味着如果第二个表单在左侧打开并且我在到达最左边框后将两个表单移动到屏幕左侧，则第二个表单应该在第一个表单的右侧打开，反之亦然。现在我可以根据其位置在第一个表单的左侧或右侧打开第二个表单。（如果第一个表单位于左侧，则第二个表单将在其右侧打开，反之亦然）如何做到这一点？提前致谢..！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:17:46.147

将属性更改`StartPosition`为手动。然后您可以使用设置表单的位置

```
this.Location = new Point(any x coordinate, any y coordinate); 
```

您还可以使用子属性设置坐标`Left`。

```
this.Left = 300; 
```

同样是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:07:19.603

这可能不是您问题的直接答案，但您可以根据需要使用它。此代码显示了表单之间的耦合。当您想显示第二种形式时，请考虑第一种形式

```
 public partial class Form1 : Form
    {
 Form2 frm;
    public Form1()
    {
        InitializeComponent();
        frm = new Form2(this);
    }

    private void button1_Click(object sender, EventArgs e)//when you click button1 on form1 it shows form2
    {

        this.Hide();
        frm.Show();
    } 
```

现在是第二种形式

```
public partial class Form2 : Form
    {
        Form1 frm;
        public Form2(Form1 fr)
        {
            InitializeComponent();
            frm = fr;
        }

        private void button1_Click(object sender, EventArgs e)//when you click button1 on form2 it shows form1
        {
            this.Hide();
            frm.Show();

        }

       }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T08:52:11.283

> 表格 2 新表格 = 新表格 2();
> 
> > this.Hide();
> > 
> > > newForm.ShowDialog();
> > > 
> > > > this.Show();

# oop - 如何避免循环引用OOAD设计

> ID：12033450
> 
> 赞同：0
> 
> 时间：2012-08-20T07:02:13.683
> 
> 标签：oop

我有如下的类结构，下面的场景将创建一个循环引用。如何避免这种情况？

```
public class classA
{
    public classA()
    {
        classB b= new classB();
        b.classBMethod();
    }
    public void classAMethod()
    {
        Console.WriteLine("Class A Method");
    }
}
public class classB
{
    public classB()
    {
        classC c = new classC();
        c.classCMethod();
    }
    public void classBMethod()
    {
        Console.WriteLine("Class B Method");
    }
}
public class classC
{
    public classC()
    {
        classA a = new classA();
        a.classAMethod();
    }
    public void classCMethod()
    {
        Console.WriteLine("Class C Method");
    }
} 
```

> 如何避免循环引用？请告诉我设计这个的不同选择

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T07:19:15.617

您的代码没有循环引用问题。
当您开始遵循引用并最终到达您开始的地方时，就会发生循环引用。在您的情况下，您所做的是声明局部变量，然后您有：

```
new ClassA()-> (calls) -> new ClassB()->(calls)->new ClassC()->calls->new ClassA()-> (calls) -> new ClassB()->(calls)-> etc forever 
```

GC 足够聪明，可以解决循环引用，但是您所做的从根本上来说是有缺陷的。也许您应该解释一下您要实现的目标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T07:22:10.007

这正在创建一个没有尽头的螺旋数据结构。然而，解决这个谜题并且仍然能够从任何类（A、B 或 C）开始的最简单方法是向确定是否发生循环的对象添加一个公共布尔标志。如果此标志为假，则继续，如果为真，则停止循环。相反，如果您试图创建这个没有尽头的螺旋，您可能需要添加一个每帧调用一次的更新方法，以避免实例中的操作过载。

如果我确切地知道你试图用这种逻辑创建什么，我可以给出一个不那么模糊的答案。如果不清楚，我很抱歉。

# assembly - 程序集获取输入 - 使用 StdIn 的无效指令操作数

> ID：12033454
> 
> 赞同：0
> 
> 时间：2012-08-20T07:02:32.577
> 
> 标签：assembly, x86, masm32

我正在编写一个程序来练习获取输入和算术，当将用户的输入存储在缓冲区中然后用它们进行算术运算时，我得到错误 A2070 - 指令操作数无效。这是我的代码：

```
include C:\masm32\include\masm32rt.inc

.data
msg     db "Enter a number: ", 0
msg2    db "Enter another number: ",13,10,0
msg3    db "Your numbers: ", 13,10,0
msg4    db "Added = ", 0
spacer  db " ",13,10,0
msg5    db "Subtracted = ", 0
msg6    db "Multiplied = ", 0

ansadd  sdword 0
anstake sdword 0
ansmul  sdword 0

.data?
buffer1 db 12 dup(?)
buffer2 db 12 dup(?)

.code
start:
lea eax, msg
push eax
call StdOut

push 100
push buffer1             ;line 29
call StdIn

xor eax, eax

lea eax, msg2
push eax    
call StdOut

push 100
push buffer2             ;line 39
call StdIn

xor eax, eax

lea eax, buffer1
lea ebx, buffer2
add eax, ebx
push eax
pop ansadd

lea eax, buffer1
lea ebx, buffer2
sub eax, ebx
push eax
pop anstake

xor ebx, ebx
lea eax, buffer1
lea ecx, buffer2
mul eax
push eax
pop ansmul

xor eax, eax
xor ebx, ebx
xor ecx, ecx

lea eax, msg3
push eax 
call StdOut

lea eax, msg4
push eax
call StdOut

lea eax, ansadd
push eax
call StdOut

lea eax, msg5
push eax
call StdOut

lea eax, anstake
push eax
call StdOut

lea eax, msg6
push eax
call StdOut

lea eax, ansmul
push eax
call StdOut

push 0
call ExitProcess
END start 
```

以下是 MASM 的反馈`ml.exe`：

```
test.asm(29) - A2070 - Invalid instruction operands.
test.asm(39) - A2070 - Invalid instruction operands. 
```

变量有什么问题？我怀疑它可能是变量声明。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:14:07.090

您应该推送 buffer1 的地址 - 完全按照推送 mgs 和 mgs2 的地址进行操作...

代替

```
push buffer1 
```

做

```
lea eax, buffer1
push eax 
```

# java - 如何在 java/joda-time 中获取上一个日期，不包括周末

> ID：12033455
> 
> 赞同：1
> 
> 时间：2012-08-20T07:02:33.357
> 
> 标签：java, datetime, jodatime

我正在使用此代码获取上一个日期，但我想获取不包括日期的日期`Saturday and Sunday`

我用来获取上一个日期的代码：

```
import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;

public class Main {

    public static String previousDateString(String dateString) 
            throws ParseException {
        // Create a date formatter using your format string
        DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");

        // Parse the given date string into a Date object.
        // Note: This can throw a ParseException.
        Date myDate = dateFormat.parse(dateString);

        // Use the Calendar class to subtract one day
        Calendar calendar = Calendar.getInstance();
        calendar.setTime(myDate);
        calendar.add(Calendar.DAY_OF_YEAR, -1);

        // Use the date formatter to produce a formatted date string
        Date previousDate = calendar.getTime();
        String result = dateFormat.format(previousDate);

        return result;
    }

    public static void main(String[] args) {
        String dateString = "2012-08-20";

        try {
            // This will print 2012-08-19
            System.out.println(previousDateString(dateString));
        } catch (ParseException e) {
            System.out.println("Invalid date string");
            e.printStackTrace();
        }
    }
}` 
```

它工作正常，但需要获取不是周六或周日的前一个日期。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:11:33.727

您应该从对象中*获取* ，如果它的日期是减去天数，或者如果然后从日期/日历对象中减去天数。`DAY_OF_WEEK``calendar``next``MONDAY``three``SUNDAY``two`

```
 calendar.setTime(myDate);
 int dayOfWeek=calendar.get(Calendar.DAY_OF_WEEK);
 if(dayOfWeek==Calendar.MONDAY)
    calendar.add(Calendar.DAY_OF_YEAR, -3); 
 else
 if(dayOfWeek==Calendar.SUNDAY)
    calendar.add(Calendar.DAY_OF_YEAR, -2);
 else
    calendar.add(Calendar.DAY_OF_YEAR, -1); 
```

# php - 如何去除不需要的字符？

> ID：12033459
> 
> 赞同：-1
> 
> 时间：2012-08-20T07:02:44.627
> 
> 标签：php, character-encoding

当我将一些文本插入数据库中的“文本”字段时，它会自动生成一些不需要的字符，例如`Â`

我在用着`charset= iso-8859-1`

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:09:13.737

将 CHARSET=ISO-8859-1 更改为**CHARSET=UTF-8**

在这里阅读更多[http://en.wikipedia.org/wiki/UTF-8](http://en.wikipedia.org/wiki/UTF-8)

# php - 在 PHP 中压缩 JSON 字符串并在 Javascript 中解压缩以用于 Google API 的数据库查询

> ID：12033462
> 
> 赞同：1
> 
> 时间：2012-08-20T07:02:49.593
> 
> 标签：php, javascript, json, google-api, google-visualization

我在我的 PHP 代码中生成一个 JSON 文件（通过运行数据库查询）。这个 JSON 文件是在我的 Javascript 中使用Google 图表工具的[数据查询示例下载到客户端的：](https://developers.google.com/chart/interactive/docs/queries?hl=sv-SE)

```
function initialize() {
  // Replace the data source URL on next line with your data source URL.
  // Specify that we want to use the XmlHttpRequest object to make the query.
  var opts = {sendMethod: 'xhr'};
  var query = new google.visualization.Query('http://spreadsheets.google.com?key=123AB&...', opts);

  // Optional request to return only column C and the sum of column B, grouped by C members.
  query.setQuery('select C, sum(B) group by C');

  // Send the query with a callback function.
  query.send(handleQueryResponse);
}

function handleQueryResponse(response) {

  if (response.isError()) {
    alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
    return;
  }

  var data = response.getDataTable();
  var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
  chart.draw(data, {width: 400, height: 240, is3D: true});
} 
```

JSON 文件相当大。在 PHP 中压缩 JSONstring 并在 Javascript 中解压缩的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:12:38.730

@Gavin 在上面的评论中给出了正确答案：
他的回答是：查看 GZIP 压缩您的内容。如果您的服务器设置正确，它可以压缩任何应用程序/json 内容，然后您的浏览器“应该”自动解压缩它。[http://bearpanther.com/2012/04/11/gzip-json-generated-on-the-fly](http://bearpanther.com/2012/04/11/gzip-json-generated-on-the-fly)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T12:13:32.940

问题是“如何使用 PHP 压缩 JSON”。答案是使用`ob_gzhandler`。如果您无权访问服务器配置，请仅使用此方法。

我建议使用以下解决方案，您不必编写任何 PHP 代码并在所有 json 资源上获取 gzip：

**更改您的服务器配置以允许协商内容的自动 gzip'ing**

**阿帕奇.htaccess**

```
`AddOutputFilterByType DEFLATE text/html ... application/json` 
```

**Nginx 服务器.conf**

```
gzip             on; // if not already set
gzip_comp_level  9;
gzip_types       application/json; 
```

具有更多 gzip_types 的示例：

```
gzip_types text/text text/html text/plain text/xml 
           text/css application/x-javascript application/javascript 
           application/json; 
```

# pdf - 附件未显示在 pdf 文档中 - 使用 pdfbox 创建

> ID：12033470
> 
> 赞同：0
> 
> 时间：2012-08-20T07:03:30.200
> 
> 标签：pdf, embed, pdfbox, attachment

我正在尝试将 swf 文件附加到 pdf 文档。下面是我的代码（摘自 pdfbox-examples）。虽然我可以看到文件是根据文件的大小附加的 - 有和没有附件，但我无法在 pdf 文档中看到/找到它。我确实看到正确显示的文本内容。有人可以告诉我我做错了什么并帮助我解决问题吗？

```
 doc = new PDDocument();

        PDPage page = new PDPage();
        doc.addPage( page );
        PDFont font = PDType1Font.HELVETICA_BOLD;
        String inputFileName =   "sample.swf";

        InputStream fileInputStream = new FileInputStream(new File(inputFileName));

        PDEmbeddedFile ef = new PDEmbeddedFile(doc, fileInputStream );
        PDPageContentStream contentStream = new PDPageContentStream(doc, page,true,true);
        //embedded files are stored in a named tree
        PDEmbeddedFilesNameTreeNode efTree = new PDEmbeddedFilesNameTreeNode();
        //first create the file specification, which holds the embedded file
        PDComplexFileSpecification fs = new PDComplexFileSpecification();
        fs.setEmbeddedFile(ef);

        //now lets some of the optional parameters
        ef.setSubtype( "swf" );
        ef.setCreationDate( new GregorianCalendar() );

        //now add the entry to the embedded file tree and set in the document.
        Map<String, COSObjectable> efMap = new HashMap<String, COSObjectable>();
        efMap.put("My first attachment", fs );
        efTree.setNames( efMap );
        //attachments are stored as part of the "names" dictionary in the document catalog
        PDDocumentNameDictionary names = new PDDocumentNameDictionary( doc.getDocumentCatalog() );
        names.setEmbeddedFiles( efTree );
        doc.getDocumentCatalog().setNames( names ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:52:22.817

在经历了同样的事情之后，我发现这是一个已知问题。我猜附件已经有一段时间没有工作了。这是apache 论坛上的问题的[链接。](https://issues.apache.org/jira/browse/PDFBOX-811)这里有一个建议你可以使用的 hack。我试过了，它奏效了！

> *我发现的其他解决方法是在您调用 pDEmbeddedFilesNameTreeNode 上的 setNames 后删除限制： **((COSDictionary )efTree.getCOSObject()).removeItem(COSName.LIMITS);** 丑陋的hack，但它可以工作，无需重新编译pdfbox*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:10:37.560

要在 PDF 中“定位”或查看附件，您无法翻阅其页面以在其中找到任何痕迹（例如注释）。

例如，在 Acrobat Reader 9.x 中，您必须单击左侧边栏上的“查看附件”图标（看起来像一个回形针）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-22T10:55:16.410

附件适用于新版本的 PDFBox 2.0，

```
public static boolean addAtachement(final String fileName, final String... attachements) {
    if (Objects.isNull(fileName)) {
        throw new NullPointerException("fileName shouldn't be null");
    }

    if (Objects.isNull(attachements)) {
        throw new NullPointerException("attachements shouldn't be null");
    }

    Map<String, PDComplexFileSpecification> efMap = new HashMap<String, PDComplexFileSpecification>();
    /*
     * Load PDF Document.
     */
    try (PDDocument doc = PDDocument.load(new File(fileName))) {

        /*
         * Attachments are stored as part of the "names" dictionary in the
         * document catalog
         */
        PDDocumentNameDictionary names = new PDDocumentNameDictionary(doc.getDocumentCatalog());

        /*
         * First we need to get all the existed attachments, after that we
         * can add new attachments
         */
        PDEmbeddedFilesNameTreeNode efTree = names.getEmbeddedFiles();
        if (Objects.isNull(efTree)) {
            efTree = new PDEmbeddedFilesNameTreeNode();
        }

        Map<String, PDComplexFileSpecification> existedNames = efTree.getNames();

        if (existedNames == null || existedNames.isEmpty()) {
            existedNames = new HashMap<String, PDComplexFileSpecification>();
        }

        for (String attachement : attachements) {
            /*
             * Create the file specification, which holds the embedded file
             */
            PDComplexFileSpecification fs = new PDComplexFileSpecification();

            fs.setFile(attachement);

            try (InputStream is = new FileInputStream(attachement)) {
                /*
                 * This represents an embedded file in a file specification
                 */
                PDEmbeddedFile ef = new PDEmbeddedFile(doc, is);

                /* Set some relevant properties of embedded file */
                ef.setCreationDate(new GregorianCalendar());
                fs.setEmbeddedFile(ef);

                /*
                 * now add the entry to the embedded file tree and set in
                 * the document.
                 */
                efMap.put(attachement, fs);
            }
        }

        efTree.setNames(efMap);
        names.setEmbeddedFiles(efTree);
        doc.getDocumentCatalog().setNames(names);
        doc.save(fileName);
        return true;
    } catch (IOException e) {
        System.out.println(e.getMessage());
        return false;
    }

} 
```

# android - android中日历重复的算法

> ID：12033473
> 
> 赞同：2
> 
> 时间：2012-08-20T07:04:02.647
> 
> 标签：android, algorithm, calendar, recurrence

我正在寻找在我的 android 应用程序中实现日历重复的算法。重复频率是每天、每周、每月、每年。我需要发生日期，约会结束日期之前的发生次数。算法可以是 RFC 2445 或任何。

所以，任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:44:05.897

看看这个库：

[http://code.google.com/p/google-rfc-2445/](http://code.google.com/p/google-rfc-2445/)

# android - android中的导入错误

> ID：12033475
> 
> 赞同：0
> 
> 时间：2012-08-20T07:04:19.673
> 
> 标签：android, import, r.java-file

我导入了一个项目。我在每个文件中都看到了导入错误。在问题视图中，我有以下错误：

```
Project X is missing the required source folder 'Gen'
The project can't be built until the build path errors are resolved
Unable to resolve target 'android-10' 
```

在我的包资源管理器视图中，我没有看到 gen 文件夹，因此我可以对其进行调整。我该怎么办，我是android新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:11:03.627

检查您是否安装了 android-10 版本。

清理应用程序

右键单击项目->选择Android工具->修复项目属性

重新构建应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:06:25.157

尝试删除文件夹（如果存在）并在 Eclipse 中执行 Project Clean。大多数情况下，这有助于重新创建您的 gen 文件夹。

您也可以尝试手动重新创建它并使其成为源文件夹！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T07:06:27.660

确保您的项目构建目标和您使用的 API 级别匹配。

# regex - 多行的正则表达式替换

> ID：12033477
> 
> 赞同：-1
> 
> 时间：2012-08-20T07:04:24.067
> 
> 标签：regex, perl, awk

我需要在两行之间替换一个字符串。例如：

`"aaa\nfoo\nfoo\naaa\nfoo\nbbb\nfoo\nbbb"`==>`"aaa\nfoo\nfoo\naaa\nright\nbbb\nfoo\nbbb"`

我想像以下格式一样使用 perl 但失败了：

```
echo -e "aaa\nfoo\nfoo\naaa\nfoo\nbbb\nfoo\nbbb" | perl -pe "code here" 
```

那么有没有什么好的方法来处理呢？

两者都`perl`可以`awk`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T07:18:12.030

珀尔：

```
echo -e "aaa\nfoo\nfoo\naaa\nfoo\nbbb\nfoo\nbbb" | perl -p00e 's/aaa\nfoo\nbbb/aaa\nright\nbbb/' 
```

如果需要匹配模式多行，则必须更改记录分隔符。标志 m 和 s 也很有用。

也可以看看

```
perl --help         # -0
perldoc perlvar     # $/
perldoc perlre      # /Modifiers
perl -MO=Deparse -p00e 's/aaa\nfoo\nbbb/aaa\nright\nbbb/' 
```

呸：

```
echo -e "aaa\nfoo\nfoo\naaa\nfoo\nbbb\nfoo\nbbb" | awk 'BEGIN{RS=""}{sub(/aaa\nfoo\nbbb/,"aaa\nright\nbbb",$0);print}' 
```

# css - 设置 vaadin 表格高度以适合内容

> ID：12033478
> 
> 赞同：5
> 
> 时间：2012-08-20T07:04:29.377
> 
> 标签：css, vaadin

我在我的项目中使用 CustomLayout 来分离 UI 对象及其样式。

我的桌子有些问题。

我定义了一个 div，我希望表格的高度设置为 div 的高度。

哪个是最好的方法？

我想：

```
table.setsizeFull() ;
table.setPageLength(0); 
```

在代码中，但结果不是我想要的。我希望表格在 div 的尺寸中全尺寸，内部有或没有元素。

有什么建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T21:18:27.657

我正在解决一个类似的问题：我希望一个表随着我添加行而增长。我不关心它的确切高度，只要它显示所有数据行，并随着我添加行而增长。我还希望桌子总是在底部显示一些额外的空间。

这里的核心思想是我做了三件事：

*   不要叫`setHeight()`桌子。
*   我曾经`setPageLength()`按行定义表格高度——表格应该有多少行。
*   我调用`requestRepaint()`了我调整大小的元素。如果我调整了列元素的大小，我会在列元素上调用它。如果我调整了桌子的大小，我会在桌子上调用它。

这是一个通用代码示例，展示了我如何解决这个问题。我的代码不完整，但它可能会帮助您入门。

```
public class MyClass extends Table {

    public MyClass(...)
    {
        this.setWidth("100%"); // fill parent <td>'s width, allows draggable sizing.
        // note: do NOT setHeight().

        setupColumns(); // details not shown here
        setupBehavior(); // details not shown (listeners, etc)
        addDataToTable(); // details not shown

        adjustHeight();
    }

    // I also have a function to add rows to the table when 
        // a button is clicked.  That function calls adjustHeight() (shown below).

    public void adjustHeight()
    {
        this.setPageLength(this.getItemIds().size() + 1);
        this.requestRepaint();
    }
} 
```

[编辑/跟进] 我发现如果您使用`setColumnExpandRatio()`（动态列宽），使用此方法往往会导致在表格上呈现不必要的滚动条。`setColumnWidth()`因此，请注意，如果您使用我上面展示的技巧，您应该使用固定宽度的列 ( )。

# ruby-on-rails-3 - 遇到错误运行rails 2.2.2

> ID：12033479
> 
> 赞同：-3
> 
> 时间：2012-08-20T07:04:32.787
> 
> 标签：ruby-on-rails-3

```
ruby script/server
=> Booting WEBrick...
/home/rao/Documents/homir /vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb:74:in `establish_connection': Please install the postgres adapter: `gem install activerecord-postgres-adapter` (no such file to load -- active_record/connection_adapters/postgres_adapter) (RuntimeError)
    from /home/rao/Documents/homir /vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb:58:in `establish_connection'
    from /home/rao/Documents/homir /vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb:53:in `establish_connection'
    from ./script/../config/../vendor/rails/railties/lib/initializer.rb:392:in `initialize_database'
    from ./script/../config/../vendor/rails/railties/lib/initializer.rb:139:in `process'
    from ./script/../config/../vendor/rails/railties/lib/initializer.rb:112:in `send'
    from ./script/../config/../vendor/rails/railties/lib/initializer.rb:112:in `run'
    from /home/rao/Documents/homir /config/environment.rb:13
    from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in `gem_original_require'
    from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in `require'
    from /home/rao/Documents/homir /vendor/rails/activesupport/lib/active_support/dependencies.rb:153:in `require'
    from /home/rao/Documents/homir /vendor/rails/activesupport/lib/active_support/dependencies.rb:521:in `new_constants_in'
    from /home/rao/Documents/homir /vendor/rails/activesupport/lib/active_support/dependencies.rb:153:in `require'
    from /home/rao/Documents/homir /vendor/rails/railties/lib/commands/servers/webrick.rb:59
    from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in `gem_original_require'
    from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in `require'
    from /home/rao/Documents/homir /vendor/rails/activesupport/lib/active_support/dependencies.rb:153:in `require'
    from /home/rao/Documents/homir /vendor/rails/activesupport/lib/active_support/dependencies.rb:521:in `new_constants_in'
    from /home/rao/Documents/homir /vendor/rails/activesupport/lib/active_support/dependencies.rb:153:in `require'
    from /home/rao/Documents/homir /vendor/rails/railties/lib/commands/server.rb:49
    from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in `gem_original_require'
    from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in `require'
    from script/server:3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:02:07.773

该错误表明您正在使用prosgres，但您没有安装它的适配器。

只需添加`gem 'pg'`您的 gem 文件并运行`bundle install`.

# mysql - 库存管理数据库

> ID：12033482
> 
> 赞同：5
> 
> 时间：2012-08-20T07:04:45.460
> 
> 标签：mysql, database, database-design, stock

我正在开发一个库存管理应用程序这是场景：

- 用户使用以下信息输入购买的物品（物品编号、购买数量、购买价格、最低价格、购买日期）

每次操作，用户输入售出的商品，并附上以下信息（商品编号、售出数量、风的最终价格、交易日期），每次操作如果最终价格风小于风的最低价格

每次操作，一次风我都记录了交易的收益（最终风价-进货价）

问题是：您可以在不同的时间以不同的价格购买相同的产品，那么我们可以计算出共同利益，

例如，如果我有以下情况

购买的商品（T 恤），10 件，20 英镑，23 英镑，2012 年 8 月 10 日 购买的商品（T 恤），10 件，22 英镑，25 英镑，2012 年 8 月 19 日

在这种情况下，wind的操作我要怎么做才能以正确的购买价格收回物品并计算利润并将良好的信息记录在销售表中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T08:28:33.527

在金融领域，计算盈亏总是（大部分情况下）使用 FIFO 规则完成。

即：买入 10 20 美元，卖出 5 美元 @22 美元，买入 5 美元 21 美元，卖出 10 美元 @23，必须记录为

```
BUY 10 for $20 date1
BUY 5 for $21 date3 
```

并分别

```
SELL 5 @ $22 date2
SELL 10 @ $23 date4 
```

现在您要做的就是根据 FIFO 规则将它们配对并将中间投资组合写入数据库：

```
portfolios AFTER date
date1  10  profit/loss $0     avg-open $20
date2  5   profit/loss +$10   avg-open $20
date3  10  protit/loss +$10   avg-open $20.50
date4  0   profit/loss +$35   avg-open $0 
```

操作一一：`date1`我们以平均开盘价$20买入后。从`date1`到`date2`，我们卖出了一半的股票，从中获利，`5 * ($22 - $20 <- avg-open) = $10`在*该*交易之后，还剩下 5 只证券，平均开盘价为 20 美元。

从我们囤积 5`date2`只`date3`证券开始，盈亏保持不变，但平均开盘价上涨至 20.50 美元（20 美元 5 美元 + 21 美元 5 美元）。

最后，你将它们全部卖掉，利润`10 * ($23 - $20.50) = $25`加上之前的 10 美元，即 35 美元。

总而言之，您可以记录单笔交易 ( `BUY`/ `SELL`)，然后即时计算投资组合、平均开盘价和损益。

或者，您可以将投资组合连同迄今为止的损益和增量更新的平均开盘价一起存储。

我不建议两者都做（调试目的除外），因为这可能会给您带来数据级别的不一致，这是令人讨厌的。如果这样做，请选择其中一个表示作为主表示，并（重新）计算另一个以防出现不一致。

只是一个建议。

# flash - 自动播放参数在 Flash 播放器中不起作用

> ID：12033489
> 
> 赞同：1
> 
> 时间：2012-08-20T07:04:57.653
> 
> 标签：flash, video, parameters, video-player

我有一个嵌入式 Flash 电影播放器​​。目前它在页面加载时开始播放，我不希望这种情况发生。我已经添加了：

```
<param name="autoStart" value="false" /> 
```

但这没有任何区别，也没有：

```
<param name="autoStart" value="0" /> 
```

有谁知道阻止这种自动发生的另一种方法？

视频在[这里](http://libbymunro.com/index.php?id=12)，如果需要我的完整代码：

```
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,28,0" width="650" height="405" bgcolor="#000000" data="movies/movie01.swf" type="application/x-shockwave-flash">
<param name="quality" value="high" />
<param name="autoStart" value="false" />
<param name="BGCOLOR" value="#000000" />
<param name="menu" value="true" />
<param name="src" value="movies/movie01.swf" />
<param name="pluginspage" value="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash" />
</object> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:26:41.547

您需要在视频加载后手动停止视频或添加`stop()`对 swf 文件的调用。这很简单，但会完成工作。

# php - this-joomla 文章是否有扩展名

> ID：12033490
> 
> 赞同：0
> 
> 时间：2012-08-20T07:04:58.973
> 
> 标签：php, joomla, joomla2.5, joomla-extensions

我想插入一个链接，例如：

`<a href="http:/mysite.com/...article.php?id=100">President Bush resigned</a>`

到我网站首页的新闻部分`(width=100 height=200)`。文章内容当然是在 Joomla 的文章管理器中创建的，具有适当的部分和类别；并且`President Bush resigned`在链接中是文章标题。

我的问题很简单，是否有可用于 Joomla 的扩展程序允许我这样做：（在一个页面上创建一篇文章，然后在另一个页面上显示`title name`）`href`？我认为这类似于*新闻提要*，但仅供内部使用。我不知道如何实现这一点。希望有人能给我一个提示，让我从这里出发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T21:48:03.030

好的，是的，您可以使用以下几种方法简单地做到这一点：

1.  **模块**- 创建一个**模块**来显示*文章列表*并指定在哪些“页面”（菜单项）上显示它。
2.  **菜单项**- 创建*类别列表*类型的新**菜单项**

 *希望能帮助到你，

盖兹*

# ios - plist中的字符串不是标准字符串？使用 plist 中的字符串使应用程序崩溃。iOS

> ID：12033492
> 
> 赞同：0
> 
> 时间：2012-08-20T07:05:08.483
> 
> 标签：ios, nsstring, cocos2d-iphone, plist

对不起，长篇大论。当我第二次使用它时，来自 plist 的字符串会使我的程序崩溃。我有一个场景和一个对象的 cocos2d 项目（ [attach ）。](http://dl.dropbox.com/u/15739872/myzip.zip)还有一个 .plist 文件

```
HelloWorldLayer.h & .m (instantiate from CCLayer) 
NodeObject.h & .m (instantiate from CCNode)
Test.plist 
```

在**NodeObject**我有一个本地字符串和两个方法

```
@interface NodeObject : CCNode
{
    NSString *stringForPrint;
}
-(void)createObjWithString:(NSString *)string;
-(void)printString; 
```

在这两种方法中，我们打印在参数字符串中获得的*字符串*

```
-(void)createObjWithString:(NSString *)string
{
    stringForPrint = string;
    NSLog(@"NodeObject.createObjWithString stringForPrint >> %@", stringForPrint);
}

-(void)printString
{
    NSLog(@"NodeObject.printString stringForPrint >> %@", stringForPrint);
} 
```

Plis 内容是一个数组，其中包含一个带有项目类型字符串的字典。

```
Root 
-TestArray <Array>
--item 0 <Dictionary>
---type <String> == "This is string from plist" 
```

为了测试，我在场景中创建**NodeObject**并从 plist 中获取数据。并打印这个字符串。它工作正常。

```
if ([testDictionary objectForKey:@"TestArray"]) {
            for (NSDictionary *tempItemData in [testDictionary objectForKey:@"TestArray"]) {
                NSLog(@"type form plist in for loop > %@", [tempItemData objectForKey:@"type"]);//It's cool work. True string from plist.
            }
        } 
```

我将我的**NodeObject**创建到循环中。它又开始工作了。

```
if ([testDictionary objectForKey:@"TestArray"]) {
            for (NSDictionary *tempItemData in [testDictionary objectForKey:@"TestArray"]) {
                NodeObject *testObj = [NodeObject node];
                //and send it string from plist 
                [testObj createObjWithString:[tempItemData objectForKey:@"type"]];
            }
        } 
```

但！如果我尝试在 NodeObject 的 printString 方法中使用此字符串**，****应用**程序将崩溃而没有日志。[testObj 打印字符串]; //崩溃应用

 **我重复。使用手动字符串工作创建对象。如果使用 plist 中的字符串，则会崩溃。我摔断了头。并且仅在第二种方法中。在**createObjWithSrig**中它工作。

```
 //Work
    NodeObject *testObj = [NodeObject node];
    [testObj createObjWithString:@"manual string object"];
    [testObj printString]; // Print correct string

    //Crash
    NodeObject *testObj = [NodeObject node];
    [testObj createObjWithString:[tempItemData objectForKey:@"type"]];
    [testObj printString]; //Crash here 
```

我附上[项目文件](http://dl.dropbox.com/u/15739872/myzip.zip)。可以测试这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:11:19.777

`description`您可以使用和`class`方法检查变量背后隐藏的内容。

所以试试

`NSLog(@"Description %@ and class %@",[[tempItemData objectForKey:@"type"]description],[[tempItemData objectForKey:@"type"]class]);`

这可能会给你一些关于哪里出了问题的信息——也许它是空的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T06:44:54.897

在 Apple 论坛上，我找到了答案。我从 plist 中取出的对象是自动释放的。它不能只是分配和以后使用。

我应该使用保留或复制。

```
printString = [string retain]; 
```

解决了这个问题。**

# image - 从图像中提取颜色特征

> ID：12033493
> 
> 赞同：0
> 
> 时间：2012-08-20T07:05:09.283
> 
> 标签：image, image-processing, feature-extraction

我想从训练图像中提取颜色和纹理特征以进行自动注释。在谷歌上我发现算法一些算法。

有人可以指导我使用 C++ 完成这项任务的特定工具或现有代码吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:03:07.207

[OpenCV](http://opencv.org/)是一个具有 C++ 接口的大型计算机视觉库。它提供了计算大量颜色和纹理特征的函数。也许你应该看一些教程来了解它可以做什么： http: [//docs.opencv.org/doc/tutorials/tutorials.html](http://docs.opencv.org/doc/tutorials/tutorials.html)

祝你好运！

# jquery - Magento 灯箱、菜单和标签中的 jQuery 干扰

> ID：12033502
> 
> 赞同：1
> 
> 时间：2012-08-20T07:06:26.033
> 
> 标签：jquery, magento, lightbox, colorbox, magento-1.7

我正在编辑一个模板，我需要在其中添加一个在产品页面上显示一些 HTML 内容的灯箱。准确地说，不是“添加到购物车”按钮，而是会弹出一些内嵌灯箱内容的按钮。

我看过的所有灯箱替代品都要求我使用 CDN 继承 jQuery。像这样： `<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>`

我正在使用的模板在 head.phtml 和其他页面中使用了一堆自定义脚本。像：

```
<script type="text/javascript" src="<?php echo $this->getSkinUrl('js/ver_menu.js');?>"></script>
<script type="text/javascript" src="<?php echo $this->getSkinUrl('js/custommenu.js');?>"></script> 
```

因此，当我在 head.phtml 甚至产品页面中添加此行时，我的顶部菜单停止下拉并且产品信息选项卡停止工作，所有信息都显示在我的产品页面上（而不是出现在各自的选项卡下） .

有没有办法可以避免 jQuery 脚本之间的这种干扰，以使灯箱（在产品页面 - view.phtml 上）工作并且不影响我的菜单和信息选项卡。

已经为此苦苦挣扎了一段时间，主题作者也不愿意提供帮助。

我已经尝试过放置我在上面发布的 jQuery Line，但没有运气。任何方式我都可以使用 magento 的核心 jQuery 脚本来使我的灯箱工作......

另外，我使用 colorbox 来实现灯箱效果。(http://www.jacklmoore.com/colorbox)

我无能为力，但我可以为任何能帮助我解决这个问题的人提供晚餐和啤酒。真的要靠你们了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:10:42.303

我这样做我在/templatefiolder/page/html/head.phtml中添加了这个代码：

```
 <!-- adding jQuery -->
<script type="text/javascript" src="http://linktoJquery/jquery.tools.min.js"></script>

<script type="text/javascript">
//<![CDATA[
     var $j = jQuery.noConflict();
//]]>
</script> 
```

由于与原型冲突，我添加了这个 $j。在这种情况下，你总是必须像这样做 jQuery 事情：

```
<script>
// execute your scripts when DOM is ready. this is a good habit
$j(function() {     

    $j(".scrollable").scrollable();

});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:18:21.827

不要在 Magento 网站上通过 CDN 使用 jQuery。它会引起问题。相反，将其托管在您的服务器上。打开脚本，添加：

```
jQuery.noConflict(); 
```

在文件的末尾。将其重命名为类似 jquery.min.no-conflict.js 的内容，以便将来任何人都可以清楚地看到它在 noConflict() 模式下运行，并确保它在任何其他基于 jQuery 的脚本之前加载。

由于您处于 noConflict() 模式，您应该使用“jQuery”作为实例化器构建任何 jQuery 脚本，而不是 $（由 Prototype 使用，Magento 1.x 中使用的 javascript 框架）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T13:20:25.847

您尝试过的灯箱是 jQuery 插件，需要 jQuery 库。无论您是托管图书馆还是让其他人托管它（如 CDN）都没有关系。如果您的页面已经在运行 jQuery 版本，您可能根本不需要添加任何内容。

如果您的页面正在使用其他使用 $ 别名的脚本，那么您将需要使用 noConflict ，如 pspahn 所说。之后，如果不创建本地范围并将其分配到那里，您将无法再使用 '$' 作为 jQuery 的别名。例子：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>jQuery.noConflict();</script>
<script src='jquery.colorbox-min.js'></script>
<script>
  jQuery(document).ready(function(){
    var $ = jQuery; // create an alias for typing convenience
    $('a.example').colorbox();
  });
</script> 
```

# android - 删除账号后联系人存储未清空

> ID：12033504
> 
> 赞同：1
> 
> 时间：2012-08-20T07:06:44.347
> 
> 标签：android, contacts, android-contacts

我正在编写服务以将联系人与我的网络服务同步。

我通过帐户设置添加我的帐户。然后我将它与我的网络服务同步。一切都好。在我添加自定义帐户之前，我的设备上没有任何帐户。并且设备上的联系人存储应用程序的“数据”值为 0.00B。

同步后，我的所有联系人都会出现在联系人应用程序中。联系人存储应用程序没有“数据”值为 4.53Mb。

然后我从我的设备中删除我的帐户。联系人存储应用程序现在将“数据”值显示为 3.74Mb。

之后，我重新添加我的帐户并再次开始同步。同步完成后，Contact Storage 应用程序显示“数据”值广告 7.90Mb。

如果我重复前面的步骤，请联系存储应用程序“数据”值继续增长。

那为什么呢？好像我从我的网络服务下载的头像不干净。

当我删除我的帐户时如何删除它们？

我添加这样的头像：

```
public ContactOperations addAvatar(String avatarUrl) {
    contentValues.clear();
    if (!TextUtils.isEmpty(avatarUrl)) {
        try {
            byte[] avatar = NetworkUtils.downloadAvatar(avatarUrl);
            byte[] resizedAvatar = resizeBitmap(avatar);
            avatar = null;
            contentValues.put(Photo.PHOTO, resizedAvatar);
            contentValues.put(Photo.MIMETYPE, Photo.CONTENT_ITEM_TYPE);
            addInsertOperation();
        } catch (IOException e) {
            Log.e(ContactOperations.class.toString(), e.getMessage(), e);
        }
    }

    return this;
}

private void addInsertOperation() {
    ContentProviderOperation.Builder builder = ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI);
    builder.withValueBackReference(StructuredName.RAW_CONTACT_ID, 0);
    builder.withValue(ContactsContract.Data.MIMETYPE, StructuredName.CONTENT_ITEM_TYPE);
    builder.withValues(contentValues);
    batchOperation.add(builder.build());
} 
```

之后我在 BatchOperation 类上调用方法

```
public List<Uri> execute() {
    List<Uri> resultUris = new ArrayList<Uri>();

    if (mOperations.size() == 0) {
        return resultUris;
    }
    // Apply the mOperations to the content provider
    try {
        ContentProviderResult[] results = mResolver.applyBatch(ContactsContract.AUTHORITY,
                mOperations);
        if ((results != null) && (results.length > 0)){
            for (int i = 0; i < results.length; i++){
                resultUris.add(results[i].uri);
            }
        }
    } catch (final OperationApplicationException e1) {
        Log.e(TAG, "storing contact data failed", e1);
    } catch (final RemoteException e2) {
        Log.e(TAG, "storing contact data failed", e2);
    }
    mOperations.clear();
    return resultUris;
} 
```

# ruby-on-rails - 使用日期选择而不是 1 将默认年份和月份设置为 nil

> ID：12033507
> 
> 赞同：2
> 
> 时间：2012-08-20T07:07:11.430
> 
> 标签：ruby-on-rails, date, form-for

我正在使用以下代码行在 form_for 中选择日期

```
<%= f.date_select :scheduled, {:prompt => {:day => 'Day', :month => 'Month', :year => 'Year'}}, :class => 'date-field', :include_blank => true %> 
```

日期在使用的形式中是可选的。提交表单时，年月字段默认为 1，当字段留空时，api doc 的说明将发生。

下面是哈希

```
"todo"=>{"name"=>"date tezt", "scheduled(1i)"=>"1", "scheduled(2i)"=>"1", "scheduled(3i)"=>"1", "scheduled(4i)"=>"", "scheduled(5i)"=>"", "assigned_to_id"=>""}, "commit"=>"Create To-do", "action"=>"create", "controller"=>"todos", "project_id"=>"1", "todolist_id"=>"1"} 
```

你如何覆盖它，以便如果没有输入任何内容，生成的哈希包含 nil，对于年份和月份？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T02:54:44.440

问题在于 date_select 和 time_select 如何一起玩。

我需要将此选项添加到 time_select

```
:ignore_date => true 
```

完整代码如下

```
<%= form.date_select :scheduled, {:prompt => true}, :class => 'date-field'  %>
<%= form.time_select :scheduled,  {:minute_step => 15, :ignore_date => true, :ampm => true, :prompt => {:hour => 'Hour', :minute => 'Minutes'}}, :class => 'date-field' %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:24:11.863

添加`, :include_blank => true`参考[date_select](http://api.rubyonrails.org/v2.3.8/classes/ActionView/Helpers/DateHelper.html#M002258)

```
<%= f.date_select :scheduled, {:prompt => {:day => 'Day', :month => 'Month',
    :year => 'Year'}},  :class => 'date-field', :include_blank => true %> 
```

# php - PHP页面通过刷新显示用户状态

> ID：12033509
> 
> 赞同：0
> 
> 时间：2012-08-20T07:07:16.677
> 
> 标签：php, ajax, refresh, status

我有一个通过 SOAP 查询用户状态的 PHP 脚本。我想在用户状态发生变化时刷新页面，例如当用户拨打电话或挂断电话时。如何快速流畅地刷新页面以始终显示最新的用户状态？

我阅读了 Ajax 并在 HTML5 中搜索了解决方案。你有什么建议？

感谢您提供任何有用的帖子:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:17:50.230

我的建议是在页面加载之前不要加载和解释soap。

制作两页。

1 显示您想要的所有内容的内容页面，没有“最新状态” 加载内容页面时，向第二页发出 ajax 请求。（jQuery 示例）

```
$(document).ready(function(){
   $.ajax("lateststatus.php").done(function(data){
      // Change the name of the element to the element where you want to display the data
      document.getElementById("mycontentdiv").innerHTML = data;
      });
}); 
```

然后在第二个 php 文件（lateststatus.php）中加载soap 文件，只解释和生成你想在内容div 中显示的html 代码。

简而言之就是这样。

# c++ - C++ Linux - 将时区更改为某个时区

> ID：12033512
> 
> 赞同：1
> 
> 时间：2012-08-20T07:07:34.727
> 
> 标签：c++, linux

我正在尝试将我的服务器时间与客户端时间同步，我得到了获取服务器时间的代码，如下所示。如果我在服务器中运行它，则在客户端登录时。我将向客户端发送时间，但是如何将“客户端”系统时间更改为我从服务器发送的时间。

我用谷歌搜索了 setenv 等，但我们如何真正改变 Linux C++ 中的时间？

使用下面的代码，我可以获得当前时间：

```
/* localtime example */
#include <stdio.h>
#include <time.h>

int main ()
{
  time_t rawtime;
  struct tm * timeinfo;

  time ( &rawtime );
  timeinfo = localtime ( &rawtime );
  printf ( "Current local time and date: %s", asctime (timeinfo) );

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:35:46.657

A Linux (or Unix, or Posix) system measures the time from the [unix epoch](http://en.wikipedia.org/wiki/Unix_time). No timezone is really involved at the lowest level (the time related [syscalls](http://en.wikipedia.org/wiki/System_call), and the kernel). Timezone are a library thing, thru [localtime(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/localtime.3.html) and [strftime(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/strftime.3.html) and other functions.

Read also the [time(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/time.7.html) man page.

You really want to synchronize time (on both local and remote machines) using the [NTP protocol](http://en.wikipedia.org/wiki/Network_Time_Protocol) (use `ntpd`, `chrony`, `ntpdate` ....), or at least `rdate` (but NTP is preferable).

The system calls to query the time are [gettimeofday(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/gettimeofday.2.html), [time(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/time.2.html), [clock_gettime(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/clock_gettime.2.html) with `CLOCK_REALTIME`

You might use [settimeofday(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/settimeofday.2.html) and [adjtimex(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/adjtimex.2.html) syscalls to set the time. This usually requires root privilege.

# jquery - 锁定正在进行的操作

> ID：12033513
> 
> 赞同：1
> 
> 时间：2012-08-20T07:07:42.853
> 
> 标签：jquery, asp.net-mvc-3

我有一个 MVC 应用程序，我在文本框模糊函数上调用 jquery post 方法。问题是表单有很多输入字段，并且在每个输入字段上模糊调用相同的ajax方法，如果用户在不同的文本框中快速点击进出，ajax方法调用两次，导致错误的结果。

这是一个例子

```
 Flight 1
    Airline     Flight #    Class         Date
S1  TextBox1    TextBox2    TextBox3      TextBox4 
S2  TextBox1    TextBox2    TextBox3      TextBox4 
S3  TextBox1    TextBox2    TextBox3      TextBox4 
```

我厌倦的一个解决方案是在像这样调用 ajax 时禁用所有输入文件

```
function Submit() {
     $('input').attr("disabled", "disabled");
     $.post("/ItineraryBuilder/GetFlightData", { opportunityId: oppID}, function (data) 
     {
          $("#DivResult").html(data);
          $('input').removeAttr("disabled");
     }
} 
```

这会禁用所有输入字段并限制用户频繁地从文本框输入输出，这反过来又不会一次又一次地调用 Ajax 发布。但是一旦输入字段被禁用，焦点也会丢失，在这种情况下很难使用 TAB。

那么有什么方法可以锁定 ajax 调用或 Controller/Action 一段时间，直到一个操作正在进行中，另一个操作不会启动，或者有其他更好的方法来做到这一点？

希望我能澄清我的观点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T07:15:47.733

请改用叠加层。

我创建了一个名为 ElementOverlay 的小插件。你可以像这样使用它：

```
function Submit() {
     $('#yourForm').elementOverlay();

     $('input').attr("disabled", "disabled");
     $.post("/ItineraryBuilder/GetFlightData", { opportunityId: oppID}, function (data) 
     {
          $('#yourForm').elementOverlay('destroy');

          $("#DivResult").html(data);
          $('input').removeAttr("disabled");
     }
} 
```

这只会覆盖表单，因此用户可以使用页面的其余部分。

脚本：[https](https://github.com/jgauffin/griffin.jquery.tools/blob/master/Source/jquery.griffin.elementoverlay.js) ://github.com/jgauffin/griffin.jquery.tools/blob/master/Source/jquery.griffin.elementoverlay.js （点击“Raw”按钮下载）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T07:17:04.410

```
if($.active){ 
  //there's an ajax function running
}else{ 
  //there's no ajax function running
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T08:23:00.423

如果您喜欢自己的解决方案，除了失去焦点，您可以执行以下操作。

我使用复杂的“each”函数来确定下一个输入，因为“next()”可能不起作用，因为您似乎将表单放在了表格中。顺便说一句，你错过了一个结束“）；” 在你的电话后。

```
 $('input').on('blur', function(){
      $('input').attr('disabled', true);
      $(this).addClass('last-edited');
      var tagnext = false;
      $('input').each(function(){
          if(tagnext){
             $(this).addClass('next-focus');
             tagnext = false;
          }
          if($(this).hasClass('last-edited')){
             $(this).removeClass('last-edited');
             tagnext = true;
          }
      });
      Submit();           
    });

   function Submit(){
      $.post('/ItineraryBuilder/GetFlightData', { opportunityId: oppID}, function (data) 
      {
         $('#DivResult').html(data);
         $('.next-focus').focus();
         $('input').removeAttr('disabled');
      });
   } 
```

# java - 带有 Netbeans 的 Google 网络工具包？

> ID：12033515
> 
> 赞同：8
> 
> 时间：2012-08-20T07:07:46.110
> 
> 标签：java, gwt, netbeans

我更喜欢使用 Netbeans 作为我的 IDE 而不是 Eclipse。几年前，当我查看 Google Web 工具包时，没有很好的 GWT 的 Netbeans 插件，每个人都建议使用 Eclipse。现在情况如何？市场上有没有更好的插件，还是 Eclipse 是最好的选择？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T06:40:24.007

我也更喜欢 Netbeans 而不是 Eclipse。为了开发 GWT，我使用了以下设置步骤，但没有安装 gwt4nb 插件。由于我使用 IDE 仅用于代码分析和编辑帮助，并且直接在源代码树中操作文件和目录感觉很舒服。尽管这可能不适合您的情况，但我想对于许多开发人员来说，这些步骤应该足够好，因为您可以将 gwt 开发视为普通的 java 项目。

1.  安装 JDK、NetBeans-SE。提取 gwt 包。我有[gwt-1.7.1 的注释](https://github.com/minghuascode/GwtAjax/tree/master/orig/README)。如果在 Windows 64 位版本上运行，请安装 64 位 netbeans 和 jdk，以及 32 位 JRE。

2.  将 Hello 示例从 gwt 目录复制到 gwt 包目录之外的目录。创建一个已有java源代码的项目，并将该项目放在同一个Hello目录下。然后netbeans会在Hello目录下创建两个文件：nbbuild.xml和manifest.mf，并在Hello下创建自己的nbproject目录。我只是忽略这些文件。

3.  在 netbeans 的“项目”窗口中，右键单击“库”并选择“添加 JAR”以添加 gwt 目录中的 jar 文件。

4.  在 netbeans 的“文件”窗口（不是“项目”窗口）中，您将看到 Hello 示例附带的原始“build.xml”文件。编辑此文件，使“gwt.sdk”指向 gwt 包目录的位置。在 Windows 64 位上，还在“java”任务下添加“jvm”属性。它应该看起来像（只有 jvm=... 是新添加的）：

    <target name="hosted" depends="javac" description="运行托管模式">
       <java failonerror="true" fork="true" classname="com.google.gwt.dev.HostedMode"
             jvm="C: \\Users\\youhere\\Programs\\jre6.32\\bin\\java">
         <类路径>

5.  使用“文件”窗口，单击展开“build.xml”文件节点。然后右键单击“build.xml”下的“hosted”ant target，在上下文菜单中选择“Run Target”来构建并运行托管模式。

您通常使用的“build.xml”中的 ant 目标：

*   “build”：使用它来构建 javascript。
*   “hosted”：使用它来构建 java 并启动托管服务器和浏览器。

托管服务器启动后，您可以运行“构建”目标来构建 javascript，并立即由正在运行的托管服务器提供结果，而无需重新启动服务器。使用普通浏览器在“localhost:8888”查看 javascript 版本。您可以通过编辑“build.xml”文件来设置不同的端口。

通常我将 Hello 示例复制到不同的目录，并将其用作新项目的起点。之后手动编辑文件以匹配项目命名和目录结构。

我还将其他示例从 gwt 包复制到一个新目录，然后构建并运行它们以将其用作代码参考。如果您还想开发 servlet，请查看 DynaTable 示例的 servlet，并将文件创建或复制到项目中的相同目录结构中。

关于 gwt4nb 插件的说明：我安装了它，但发现它对我来说太重了。通过上述手动设置，我可以毫无困难地做我需要做的一切。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-20T08:25:06.690

我会说 Eclipse 是最好的免费选择。`Intellij IDEA`（付费版）也有很好的`GWT`支持，但不如`Eclipse`.

我认为唯一的*官方*支持是 eclipse，见这里：[https ://developers.google.com/web-toolkit/download](https://developers.google.com/web-toolkit/download)

根据我个人的经验，如果你想`GWT`和你的 有一个很好的整合`IDE`，去`Eclipse`。如果你打算使用`Maven`，我也建议`M2E` [http://m2eclipse.codehaus.org/](http://m2eclipse.codehaus.org/)

编辑

忘记说最重要的了。`Netbeans`顺便说一句，似乎对 GWT 有很好的支持，但我从未测试过，请参阅： http: [//netbeans.org/kb/docs/web/quickstart-webapps-gwt.html](http://netbeans.org/kb/docs/web/quickstart-webapps-gwt.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-16T16:27:25.477

我确信这不是正确和合适的答案。但是，如果您想权衡取舍，这只是一个想法。

```
sudo -i
cd ~/gwt
./projectCreator -ant build -out projects/myapplication
./applicationCreator -out projects/myapplication myapplication.client.MyApp 
```

然后，您可以导入项目...

1.  在 Netbeans 中创建一个新项目并选择“Java Project With Existing Ant Script”，
2.  将 Location 设置为`myapplication`之前创建的文件夹 将 Build Script 设置`build.ant.xml`为 projectCreator 创建的文件 将 Project Name 设置为更合适的名称
3.  打开项目属性并在 Java Sources 下单击 Add Folder。选择`projects/myapplication/src`文件夹并按 OK

请原谅，如果您不喜欢这种方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-11T05:49:59.240

听起来与[Battle for Eclipse 和 Netbean](https://stackoverflow.com/questions/4839908/netbeans-or-eclipse-for-java-development)相似，但您谈论的是**GWT**的关注点。因此，我认为您可以根据自己的经验进行选择，因为您更喜欢。您可以在各种 IDE 中进行 GWT 开发，因为我假设**GWT**在它的 SDK 上而不是在 IDE 上运行。但也有一些观点。示例：易于在每个 IDE 上生成、测试、开发 ..etc。

由于漂亮的 GUI，我个人也很喜欢 NetBean :)。但我正在使用 Eclipse IDE，因为我们的团队已经开发和配置了很长时间，所以我们很难更改 IDE（*有时很难更改 Eclipse 版本，因为我们无法想象新版本对我们的项目更可靠*)。但我并不是说 *Eclipse 是最好的选择*，正如我所描述的，您可以在任何其他 IDE 上配置您的 GWT 项目，也可以通过**GWT SDK**体验您的体验。

*“……每个人都建议使用 Eclipse。”* . 是的，您会看到大多数示例项目都是使用 Eclipse IDE 计算的。仅针对 GWT 方面，我认为您有机会选择 NetBean IDE 而不用担心。

您可以在 NetBean IDE 上开发 GWT 项目，如下所示...

> 1.) 首先，[下载](https://github.com/ksfreitas/gwt4nb/wiki/Downloads)并安装 gwt4nb 插件。（您可能有 exp 用于在 NetBean IDE 上安装插件）
> 
> 2.)[下载](http://www.gwtproject.org/download.html) GWT SDK 并将其解压到您的特定位置。
> 
> 3.) 创建一个新的**Java Web** –> **Web Application**。为您的应用程序命名并点击**Next**，直到您到达**Frameworks**选项卡。如果您已成功安装 gwt4nb 插件，您应该会看到列出的 Google Web Toolkit。选择 Google Web Toolkit 框架。
> 
> 4.) 接下来，浏览到 GWT SDK 安装文件夹。命名您的 GWT 模块并点击**Finish**。
> 
> 5.）清理并构建您的项目。（不要忘记等到成功完成构建。）
> 
> 6.) 运行项目，你的浏览器应该会启动并且按钮“点击我！” 和文字“你好，GWT！！！” 应该是可见的。

加油！现在您可以在 NetBean IDE 上创建 GWT 示例项目。

您还可以创建 GWT

*   测试用例
*   常数
*   模块
*   RPC 服务
*   绑定器

通过右键单击**your_project** > **Other...** > **Google Web Toolkit**。

*有一些有用的提示给你！*

# php - system.db.CDbConnection 在 yii 中执行超过 1 秒

> ID：12033516
> 
> 赞同：1
> 
> 时间：2012-08-20T07:07:46.550
> 
> 标签：php, yii

我是 yii 的新手，虽然我用 codeigniter 做了很多工作，只是试图将我的代码从 codeigniter 转换为 yii 但是 CDbconnection 的执行时间超过 1 秒，我附上了截图。还有我正在使用的 sql 代码。

```
$criteria = new CDbCriteria();
$criteria->select = "total_photos";

$data = array( 'Gallerys' => Gallerynames::model()->findAll($criteria)); 
```

请调查一下![日志的屏幕截图](../Images/a8ff70d822cbd36828fbd7ccb59d5e15.png)

**编辑：**

这是我的数据库配置

```
'db'=>array(
        'class' => 'system.db.CDbConnection',
        'connectionString' => 'mysql:host=localhost;dbname=yiiwiki',
        'emulatePrepare' => true,
        'username' => 'root',
        'password' => '',
        'charset' => 'utf8',
        'enableProfiling' => true,
        'schemaCachingDuration' => 3600,
    ), 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:11:55.173

来自[yii 指南](http://www.yiiframework.com/doc/blog/1.1/en/final.deployment#enabling-schema-caching)

> 因为 ActiveRecord 依赖于表的元数据来确定列信息，所以读取元数据并分析它需要时间。这在开发阶段可能不是问题，但是对于在生产模式下运行的应用程序，如果数据库模式不更改，那完全是浪费时间。

因此将 db 应用程序组件的schemaCachingDuration[设置](http://www.yiiframework.com/doc/api/1.1/CApplication#db-detail)[为](http://www.yiiframework.com/doc/api/1.1/CDbConnection#schemaCachingDuration-detail)大于零的值。'db'=>array('class'=>'system.db.CDbConnection', 'connectionString'=>'sqlite:/wwwroot/blog/protected/data/blog.db', 'schemaCachingDuration'=>3600, ) ,

请记住，您应该在应用程序配置中指定有效的[缓存](http://www.yiiframework.com/doc/api/1.1/CApplication#cache-detail)

**编辑** 看来您的问题不是由于架构。引用[此](https://stackoverflow.com/questions/9800577/why-is-constructing-pdo-connection-slow)更改`localhost`将`127.0.0.1`修复它

# javascript - 如何在初始化期间引用同一对象内的对象字段？

> ID：12033522
> 
> 赞同：4
> 
> 时间：2012-08-20T07:08:10.060
> 
> 标签：javascript, object, extjs, properties

我有一个表格。还有很多`textfields`。我使用`allowBlank`属性不允许用户将字段留空并`blankText`定义自定义“空白错误”文本。

```
{
 xtype: 'textfield',
 fieldLabel: 'Surname',
 name: 'person_surname',
 allowBlank: false,
 blankText: 'Please fill "Surname" field',                  
}, 
```

**我的问题是：**

有没有办法在同一个对象的另一个属性中使用 Ext.form.field.Text 的对象属性？

就像是：

```
{
 xtype: 'textfield',
 fieldLabel: 'Surname',
 name: 'person_surname',
 allowBlank: false,
 blankText: 'Please fill "' + fieldLabel + '" field',                  
}, 
```

（不起作用）

或者：

```
{
 xtype: 'textfield',
 fieldLabel: 'Surname',
 name: 'person_surname',
 allowBlank: false,
 blankText: 'Please fill "' + this.fieldLabel + '" field',                  
}, 
```

（也不起作用）

**更新：**

例如，在`minLengthText`属性中，我可以使用模板驱动的文本，例如“此字段的最小长度为 {0}”，它采用`minLength`同一对象的属性值。

我再说一遍：我使用 ExtJS 的对象初始化方法，对象字面量语法如下：

```
{
 xtype: 'textfield',
 fieldLabel: 'Surname',
 name: 'person_surname',
 allowBlank: false,
 blankText: 'Please fill "Surname" field',                  
}, 
```

这种语法非常简洁，这里不欢迎使用其他语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T07:16:34.943

您需要创建对象，获取对它的引用，然后通过它的引用来扩充它。

```
var obj = {
 xtype: 'textfield',
 fieldLabel: 'Surname',
 name: 'person_surname',
 allowBlank: false
};

obj.blankText = 'Please fill "' + obj.fieldLabel + '" field'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T07:33:29.780

如果您不想重写代码，请尝试在表单中添加侦听器

例子

```
listeners : {

               render : function(){
                   Ext.each(form.items.items,function(fld,idx){
                    if(fld.getXType()=='textfield'){
                       fld.blankText = fld.fieldLabel;
                    }
                   });
               }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T08:08:35.460

几种选择：

1）这个优于公认的答案，因为渲染侦听器是修改 DOM 相关对象属性的不良场所。它与渲染周期的工作方式有关，但之前更好，之后平均做，期间做不好。下面的一个可能仅适用于您处理的是字段的平面列表。

```
Ext.define('MyClass', {

    initComponent: function(){
        var fields = [{
            xtype: 'textfield',
            fieldLabel: 'Field 1'
        }, {
            xtype: 'textfield',
            fieldLabel: 'Field 2'
        }];

        Ext.Array.forEach(fields, function(field){
            field.blankText = 'Foo ' + field.fieldLabel
        });
        this.items = fields;
        this.callParent();
    }

}); 
```

2) 这为您提供了最大的控制权，再次，在定义字段后无需胡乱处理：

```
Ext.define('MyClass', {

    initComponent: function(){
        var wrap = this.wrap;

        this.items = [wrap({
            xtype: 'textfield',
            fieldLabel: 'Field 1'
        }), wrap({
            xtype: 'textfield',
            fieldLabel: 'Field 2'
        })];

        this.callParent();
    },

    wrap: function(config){
        config.blankText = 'Foo ' + config.fieldLabel;
        return config;
    }

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T07:14:36.807

我唯一能想到的是

```
new function(){
    this.xtype = 'textfield';
    this.fieldLabel = 'Surname';
    this.name = 'person_surname';
    this.allowBlank = false;
    this.blankText = 'Please fill "' + this.fieldLabel + '" field';                  
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T07:27:24.000

当你尝试做这些事情时，你有三个选择，真的：

```
var Object_1 = {};
Object_1.property_1 = "Something";
Object_1.property_2 = "I'm Really " + Object_1.property_1 + "!";

var Object_2 = {
    property_1 : "Something",
    property_2 : "I'm Really"
};

Object_2.property_2 += Object_2.property_1 + "!";

var Object_3 = (function () {
    var property1 = "Something",
        property2 = "I'm Really " + property1 + "!";

    return { property_1 : property1, property_2 : property2 };
}()); 
```

就用户定义的属性而言，这三个对象中的每一个最终都是等效的。就个人而言，我在 JavaScript 中大量使用#3，明确地避免您现在遇到的问题。

将属性和方法定义为函数中的变量，然后返回一个函数，然后该函数可以访问这些原始变量，或者返回一个对象（您可以将方法附加到该对象 - 只要方法是在原始函数内部定义的-- 可以访问内部变量）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-20T07:29:14.717

你写一个简单的解析器怎么样？

```
{
    xtype: 'textfield',
    fieldLabel: 'Surname',
    name: 'person_surname',
    allowBlank: false,
    blankText: 'Please fill [fieldlabel] field',                  
}, 
```

输出消息时，将宏替换`[fieldlabel]`为对象的`.fieldLabel`值。为您可能需要的其他内容添加其他宏。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-20T08:00:08.047

如果您的代码在支持[ECMAScript 5 Getters 和 Setters](http://ejohn.org/blog/javascript-getters-and-setters/)功能的浏览器中运行，您可以使用 getter 来实现您所需要的：

```
{
    xtype: 'textfield',
    fieldLabel: 'Surname',
    name: 'person_surname',
    allowBlank: false,
    get blankText(){ return 'Please fill "' + this.fieldLabel + '" field';}
}, 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-18T19:30:13.857

您可以执行以下操作：

```
({
    xtype: 'textfield',
    fieldLabel: 'Surname',
    name: 'person_surname',
    allowBlank: false,
    init: function() {
        this.blankText = `Please fill ${this.fieldLabel} field`;
        ...
        delete this.init;
        return this;
    }
}).init() 
```

# image - 将图像从 Access 数据库保存到 Dropbox 文件夹

> ID：12033524
> 
> 赞同：0
> 
> 时间：2012-08-20T07:08:25.053
> 
> 标签：image, ms-access, dropbox

我有一个带有存储项目图像的项目表的 MS Access 2010 应用程序。如何将此图像保存在 Dropbox 文件夹中？

示例

```
Table: ItemTable
Fields: ID = 0001, DESCRIPTION = Item1, CATEGORY = C1, CUSTOMER = Cust1,
 FOLDER = CATEGORY & "\" & CUSTOMER, IMAGE = Item1.jpg 
```

我需要将图像保存`Item1.jpg`在文件夹`C1`、子文件夹`Cust1`中到 Dropbox 中。该`IMAGE`字段的数据类型可以是字符串数据（图像文件位于本地电脑硬盘上的文件夹中），也可以是 OLE 对象，没关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:55:07.210

您可以在 VBA 中使用 FileCopy，例如：

```
FileCopy "C:\Images\Img1.jpg", "Z:\Users\Raul\Dropbox\Public\SavedImg1.jpg" 
```

# html - div 超出背景颜色

> ID：12033529
> 
> 赞同：0
> 
> 时间：2012-08-20T07:09:12.633
> 
> 标签：html, css, web-applications, stylesheet

我想要做的是，无论屏幕分辨率对读者来说有多大，背景颜色都将保持不变。我创建了一个高度设置为自动的 div。

```
.news-box{
margin-top:5%;
border-radius:6px;
background-color: #EEE;
border: 1px solid #EEE;
margin-left: 24%;
height:auto;
width:620px;
} 
```

这是它的样子

![在此处输入图像描述](../Images/ce63b03efabbf423197ae40186292207.png)

这是我对整个 html 的 CSS 规则

我正在使用这个 body css 规则。对于我的渐变

**整个页面的 CSS 规则**

```
html
{
  height:100%;
} 
```

**这出现在 .news-box 类之前**

```
body
{
background: rgb(125,126,125); /* Old browsers */
background: -moz-linear-gradient(top,  rgba(125,126,125,1) 39%, rgba(14,14,14,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(39%,rgba(125,126,125,1)), color-stop(100%,rgba(14,14,14,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(125,126,125,1) 39%,rgba(14,14,14,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(125,126,125,1) 39%,rgba(14,14,14,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(125,126,125,1) 39%,rgba(14,14,14,1) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(125,126,125,1) 39%,rgba(14,14,14,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#7d7e7d', endColorstr='#0e0e0e',GradientType=0 ); /* IE6-9 */
} 
```

这是没有 Div 的页面的样子

![在此处输入图像描述](../Images/b4a54aa6919b9b994fcabc77444dcef1.png)

有任何解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:15:01.363

***[演示](http://tinkerbin.com/Xj5EGi4y)***.....................

嘿，现在习惯`min height` `100%`了你`html and body`这样

```
html, body{
min-height:100%;

} 
```

***[演示](http://tinkerbin.com/Xj5EGi4y)***

# javascript - 仅限客户端的 Dropbox 访问

> ID：12033537
> 
> 赞同：2
> 
> 时间：2012-08-20T07:10:23.257
> 
> 标签：javascript, dropbox

我正在尝试编写一个实用程序来登录用户的 Dropbox 帐户并在浏览器中显示文件（带有一些额外的格式等）。我想只使用客户端技术而不需要任何服务器端代码来做到这一点。这可能吗？

我发现了这个：[http](http://code.google.com/p/dropbox-js/) ://code.google.com/p/dropbox-js/ - 还没有尝试过。它没有太多关于如何开始的文档。还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:46:02.833

选择器 API 不允许您对文件应用自定义格式。

如果要显示用户的整个 Dropbox，请创建一个具有完整 Dropbox 访问权限的应用程序，并使用[dropbox.js](https://github.com/dropbox/dropbox-js)读取用户的 Dropbox。

这将引导您设置应用程序：[https ://github.com/dropbox/dropbox-js/blob/master/doc/getting_started.md](https://github.com/dropbox/dropbox-js/blob/master/doc/getting_started.md)

这个特定的片段（列出目录的内容）与您最相关：[https ://github.com/dropbox/dropbox-js/blob/master/doc/getting_started.md#list-a-directorys-contents](https://github.com/dropbox/dropbox-js/blob/master/doc/getting_started.md#list-a-directorys-contents)

`readdir`文档：[http ://coffeedoc.info/github/dropbox/dropbox-js/master/classes/Dropbox/Client.html#readdir-instance](http://coffeedoc.info/github/dropbox/dropbox-js/master/classes/Dropbox/Client.html#readdir-instance)

`readdir`此处使用的 checkbox.js 示例应用程序： [https ://github.com/dropbox/dropbox-js/blob/master/samples/checkbox.js/public/checkbox.coffee#L135](https://github.com/dropbox/dropbox-js/blob/master/samples/checkbox.js/public/checkbox.coffee#L135)

如果遇到障碍，请在 dropbox.js GitHub 页面上打开一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:18:09.413

看一下这个：

[https://www.dropbox.com/developers/chooser](https://www.dropbox.com/developers/chooser)

他们为此有一个专门的文件。尝试演示并开始使用。

# php - 所需文件的异常致命错误

> ID：12033538
> 
> 赞同：0
> 
> 时间：2012-08-20T07:10:33.990
> 
> 标签：php, mysql, drop-down-menu

我正在尝试设计一个带有下拉框的注册页面。这需要 2 个数据库连接，一个在点击注册按钮时将数据发送到数据库，另一个从数据库中提取信息以填充下拉框。直到几天前，当我上传了一个与其他文件无关的文件时，我让这个脚本完美无缺，除了一个 require 语句来获取 config.inc.php （用于数据库连接和错误处理目的。）这个文件是几乎在我所有的脚本中都使用过，并且在我的网站中除了少数脚本之外的所有脚本都可以正常工作。上传此文件后，我的注册脚本部分填充下拉框不再起作用。

下面是有问题的脚本（我省略了数据验证和大部分 html 部分，如果需要，我可以重新添加它们。）

```
<?php
require_once('includes/config.inc.php');
$page_title = 'Register';

if ($_SERVER['REQUEST_METHOD'] == 'POST') {

    require_once(MYSQL);
    $trimmed = array_map('trim', $_POST);

    $fn = $ln = $usr = $pw = $bd = $gs = $bs = FALSE;
//DATA VALIDATION  

//END DATA VALIDATION
if($fn && $ln && $usr && $e && $pw && $bd && $gs && $bs) {
  $q = "SELECT user_id FROM Users WHERE email='$e'";
  $r = mysqli_query ($dbc, $q) or trigger_error("Query: $q\n<br/>MySQL Error: " . mysqli_error($dbc));
  if (mysqli_num_rows($r) == 0) {
    $a = md5(uniqid(rand(), true));
    $q = "INSERT INTO Users (first_name, last_name, user_name, email, password1, birthdate, gamespy_id, base, active, registration_date)      VALUES ('$fn', '$ln', '$usr', '$e', SHA1('$pw'), '$bd', '$gs', '$bs', '$a', NOW() )";
    $r = mysqli_query($dbc, $q) or trigger_error("Query: $q\n <br/>MySQL Error:" . mysqli_error($dbc));
    if  (mysqli_affected_rows($dbc) == 1){
      $body = "Thank you for registering with Gateway Aviation. To activate your account, please click on this link:\n\n";
      $body .= BASE_URL . 'activate.php?x=' . urlencode($e) . "&y=$a";
      mail($trimmed['email'],'Registration Confirmation', $body, 'From: noreply@virtual-aviation.org');
      echo '<h3> Thank you for registering! A&nbsp;confirmation email has been sent to your address. Please click on the link in that email in order to activeate your accout.</h3>';
exit();
    } else {
      echo '<p class="error>You could not be registered due to a system error. We apologize for any inconvenience.</p>';
    }
  } else {
    echo '<p class="error"> That email has already been registered. If you have forgotten your password, use the link to reset it.</p>';
  }
  } else {
    echo '<p class="error">Please try again</p>';
  }

}
?>

        <td><input type='text' name='gamespyid' value='<?php if(isset($trimmed['gamespyid'])) echo $trimmed['gamespyid'];?>'/></td>
      </tr>
       <td>Base:</td>
       <td><select name="base" size="1">
          <option>
            Select One
          </option>
<?php
require_once(MYSQL);
         $q = "SELECT  airport_id, CONCAT_WS(' ', airport_code,' - ' airport_name) FROM airports ORDER BY airport_code ASC";
         $r = mysqli_query ($dbc, $q);

         if (mysqli_num_rows($r) > 0) {
         while ($row = mysqli_fetch_array ($r, MYSQLI_NUM)) {
         echo "<option value=\"$row[0]\"";
         if (isset($_POST['existing']) && ($_POST['existing'] == $row[0]) ) echo 'selected="selected"'; echo ">$row[1]</option>\n";
         }
   } else {
   echo '<option>Please a new airport first.</option>';
    }
   mysqli_free_result($result); 

         ?>
        </select></td>
    </table>
   <input type='submit' name='submit' value='Register'/>
  </form>
</body>
</html> 
```

我也在我的错误日志中收到此错误 [20-Aug-2012 03:09:25] PHP 致命错误：无法重新声明 my_error_handler() （之前在 /home5/virtua15/public_html/gatewayaviation/includes/config.inc.php 中声明:36) 在第 56 行的 /home5/virtua15/public_html/gatewayaviation/includes/config.inc.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:12:07.717

你应该有

```
require_once('includes/config.inc.php');
require_once(MYSQL); 
```

但是为什么你需要配置和 MYSQL 两次？一旦对整个脚本足够了，如果您从它们开始，它将适用于任何`IF`语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:24:10.657

利用

> `require_once('includes/config.inc.php');`

在顶部并删除第二个`require('includes/config.inc.php');`实例。

保持连接打开，仅在脚本结束时关闭它。而是在使用从数据库中提取数据后处理结果`mysqli_free_result($result);`

# foreign-keys - 如何为非键表字段创建外键？

> ID：12033541
> 
> 赞同：1
> 
> 时间：2012-08-20T07:10:37.987
> 
> 标签：foreign-keys, abap, sap-data-dictionary

简单地说，我想创建一个具有组件 MAKTX 的结构，并与 MAKT-MAKTX 建立外键关系。更一般地说，我希望对不属于主键的字段进行外键检查。

我看到“非关键字段/候选人”按钮，但我真的不知道如何使用它。

另外，我不想使用“文本表的关键字段”关系......但我不知道这是否相关。

这甚至是我想做的一件好事吗？我看不出有什么理由不应该这样做，但你可能会反对。

[编辑]：我不得不提到我真的不知道我在做什么。我真的只想用另一个值来填充我创建的表，并确保我表中的这些值（即 MAKTX - 一种值）始终是来自 MAKT 的值。假设我使用 SELECT 语句进行初始填充，即使我稍后手动插入新条目，我也希望保持一致性。所以我不知道这是否有意义，如果可能的话，让系统自动执行此检查对我来说听起来是个好主意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T07:13:03.630

创建外键关系的主要条件是该字段应该是引用表中的主键。在表中创建外键时，该字段不一定是主键。主要原因是外键不能为空。

有关在abap中创建外键关系的分步过程，请参阅以下链接。

[http://learnabaponline.blogspot.in/2013/04/how-to-create-table-in-abap.html](https://web.archive.org/web/20170429181459/http://learnabaponline.blogspot.in/2013/04/how-to-create-table-in-abap.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:06:39.663

首先，我同意 vwegerts 的评论，你试图做的似乎没有任何意义。

也许这会更有意义：创建自己的不带 MAKTX 字段的表。然后创建一个数据库视图，将您的表和 MAKT 表连接起来（如果需要，可以在选择条件中设置默认语言）。这样，您就可以将描述与您的数据结合起来，而无需复制实际数据（这看起来就像您正在尝试做的那样）。

# c# - 如何在silverlight5中没有对话框的情况下将流保存在服务器上？

> ID：12033550
> 
> 赞同：1
> 
> 时间：2012-08-20T07:11:44.913
> 
> 标签：c#, asp.net, silverlight

我创建了一个应用程序，它从系统麦克风录制用户语音，并使用对话框将文件保存在系统硬盘上，效果很好！

但我的要求是，我想在**没有对话框的情况下将 Stream 保存在服务器上**

这是我到目前为止所尝试的：-

```
 private SaveFileDialog saveFileDialog = new SaveFileDialog()
 { 
   Filter = "Audio files(*.wav)|*.wav"
};

        protected void SaveFile()
        {
            if (saveFileDialog.ShowDialog() == false)
            {
                return;
            }

            StatusText = "Saving...";

            Stream stream = saveFileDialog.OpenFile();

            WavManager.SavePcmToWav(_sink.BackingStream, stream, _sink.CurrentFormat);

            stream.Close();

            MessageBox.Show("Your record is saved.");

            GoToStartState();
        }

public class WavManager
    {
        public static void SavePcmToWav(Stream rawData, Stream output, AudioFormat audioFormat)
        {
            if (audioFormat.WaveFormat != WaveFormatType.Pcm)
                throw new ArgumentException("Only PCM coding is supported.");

            BinaryWriter bwOutput = new BinaryWriter(output);

            // Write down the WAV header.
            // Refer to http://technology.niagarac.on.ca/courses/ctec1631/WavFileFormat.html
            // for details on the format.

            // Note that we use ToCharArray() when writing fixed strings
            // to force using the char[] overload because
            // Write(string) writes the string prefixed by its length.

            // -- RIFF chunk

            bwOutput.Write("RIFF".ToCharArray());

            // Total Length Of Package To Follow
            // Computed as data length plus the header length without the data
            // we have written so far and this data (44 - 4 ("RIFF") - 4 (this data))
            bwOutput.Write((uint)(rawData.Length + 36));

            bwOutput.Write("WAVE".ToCharArray());

            // -- FORMAT chunk

            bwOutput.Write("fmt ".ToCharArray());

            // Length Of FORMAT Chunk (Binary, always 0x10)
            bwOutput.Write((uint)0x10);

            // Always 0x01
            bwOutput.Write((ushort)0x01);

            // Channel Numbers (Always 0x01=Mono, 0x02=Stereo)
            bwOutput.Write((ushort)audioFormat.Channels);

            // Sample Rate (Binary, in Hz)
            bwOutput.Write((uint)audioFormat.SamplesPerSecond);

            // Bytes Per Second
            bwOutput.Write((uint)(audioFormat.BitsPerSample * audioFormat.SamplesPerSecond * audioFormat.Channels / 8));

            // Bytes Per Sample: 1=8 bit Mono, 2=8 bit Stereo or 16 bit Mono, 4=16 bit Stereo
            bwOutput.Write((ushort)(audioFormat.BitsPerSample * audioFormat.Channels / 8));

            // Bits Per Sample
            bwOutput.Write((ushort)audioFormat.BitsPerSample);

            // -- DATA chunk

            bwOutput.Write("data".ToCharArray());

            // Length Of Data To Follow
            bwOutput.Write((uint)rawData.Length);

            // Raw PCM data follows...

            // Reset position in rawData and remember its origin position
            // to restore at the end.
            long originalRawDataStreamPosition = rawData.Position;
            rawData.Seek(0, SeekOrigin.Begin);

            // Append all data from rawData stream into output stream.
            byte[] buffer = new byte[4096];
            int read;       // number of bytes read in one iteration
            while ((read = rawData.Read(buffer, 0, 4096)) > 0)
            {
                bwOutput.Write(buffer, 0, read);
            }

            rawData.Seek(originalRawDataStreamPosition, SeekOrigin.Begin);
        }
    } 
```

# blackberry - 黑莓的 ActiveSync 库？

> ID：12033553
> 
> 赞同：0
> 
> 时间：2012-08-20T07:11:52.807
> 
> 标签：blackberry, activesync

我正在编写一个跨平台的 BB 应用程序，该应用程序需要连接到 Exchange 服务器并使用 ActiveSync 下载邮件。是否有任何可用于 BB 的库或 API？请建议我如何在黑莓中执行此任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T05:54:14.933

您可以使用用 java 编写的用于 ActiveSync wbxml 的[KXML](http://kxml.sourceforge.net/)解析器或用于 JavaScript中的 ActiveSync 实现的[JavaScript库](https://github.com/mozsquib/jswbxml)

# r - 使用 ggplot 绘制带孔的多边形（在城市地图中）

> ID：12033560
> 
> 赞同：2
> 
> 时间：2012-08-20T07:12:13.953
> 
> 标签：r, ggplot2, shapefile

我有 3 个 shp 文件用于创建城市地图：

*   land.shp（绘制水面以上土地的多边形）
*   road.shp（绘制所有道路的多边形，注意其中一些是“圆形道路”，即中间有一个洞）
*   building.shp（多边形绘制所有建筑物）

我使用 QGIS 绘制了我想要的地图，然后我使用 ggplot 播放land.shp，然后使用 road.shp 和建筑 shp 再做一次。下面是谷歌地图的输出来说明我的问题：

![在此处输入图像描述](../Images/444928fbcef69fd646c519c5d683129b.png)

你可以看到它们之间有 2 座桥梁和一些海（我没有海 shp，我只是将背景设置为蓝色），用蓝点标记。在 R 中，该区域应该是一个洞，但它全是灰色的。同样的问题是用红点标记的灰色区域，这是一块土地，另一个用绿点标记的灰色区域，是被道路包围的建筑物。

我将在 road.shp 的洞中拥有陆地/海洋/建筑物，我无法使用 R 显示它们。

谁能教我如何在 R 中显示 road.shp 层背后的东西？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T07:40:00.270

绘制带孔多边形的一种常见约定是：

*   **具有逆时针方向**前进的点的封闭多边形形成**实心形状**
*   点**顺时针**前进的封闭多边形形成一个**洞**

所以，让我们构建一些数据并绘制：

```
library(ggplot2)

ids <- letters[1:2]

# IDs and values to use for fill colour
values <- data.frame(
  id = ids,
  value = c(4,5)
)

# Polygon position
positions <- data.frame(
  id = rep(ids, each = 10),
  #     shape      hole         shape        hole
  x = c(1,4,4,1,1, 2,2,3,3,2,   5,10,10,5,5, 6,6,9,9,6),
  y = c(1,1,4,4,1, 2,3,3,2,2,   5,5,10,10,5, 6,9,9,6,6)
)

# Merge positions and values
datapoly <- merge(values, positions, by=c("id"))

ggplot(datapoly, aes(x=x, y=y)) + 
  geom_polygon(aes(group=id, fill=factor(value))) +
  scale_fill_discrete("Key") 
```

![在此处输入图像描述](../Images/851d25ef262569ca7b40ec0e48bd2d2d.png)

# c# - wcf vs c# 网络编程

> ID：12033576
> 
> 赞同：2
> 
> 时间：2012-08-20T07:13:32.757
> 
> 标签：c#, wcf, network-programming

我想学习网络编程，在《C#简而言之》中有一个名为“networking”的章节，该章节包含'WebClient'、'HttpClient'、'FTP'、'TCP'等。但是有人跟我说要学WCF，我想知道WCF和c#网络编程有什么关系，我记得我在某个地方看到过WCF封装了网络编程，更灵活方便，但效率不高。这是否意味着它们之间的关系就像ado.net技术与orm？我应该学习哪个，网络编程还是WCF？c#网络编程是一种过时的技术吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:08:44.713

“网络编程”通常指的是套接字，这是网络通信的最低级别，处理网络上的推送字节 - 所有其他通信系统都建立在套接字之上。

大多数项目不直接使用套接字，因为您可以使用简单的高级系统，但我认为学习基础知识仍然值得，因为它并不复杂，它会帮助您处理那些高级系统中的问题。

下一个级别是 WebClient 和朋友，它们是相对简单的类，它们在套接字之上实现通信协议（例如 HTTP）。

绝对值得您花时间学习如何使用它们，因为它们简单且非常有用（例如，如果您想从 Internet 中提取文件或与 3rd 方服务通信）。

在您拥有 WCF 的最高级别上，这是一个广泛的（在我个人看来过于复杂和过度设计）的框架，它为您提供基于外部网络的服务的类接口，同时尝试（不成功）隐藏所有通信细节.

WCF 在大组织和“企业系统”中非常流行，因此，如果你想找到一份为大组织开发企业系统的工作，学习 WCF 是一个非常聪明的职业选择。

所以，我的建议是，从套接字开始，只学习基础知识——这将帮助你了解事情是如何在幕后工作的（当你必须调试网络问题时，这将变得非常有用）。

比继续学习更高级别的课程，编写一个简单的程序，使用 WebClient 从 Internet 读取页面，这样您就可以熟悉这个概念，不要为所有高级选项而烦恼，它们就在那里，您可以查找它们稍后当您需要它们时。

只学习套接字和 WebClient 的基础知识应该只需要几个小时，然后（如果你想在大型系统上工作）学习如何使用 WCF。

然后，您将获得简历所需的 WCF 知识，并且您将知道如何在不需要时使用庞大的框架，通过几行代码通过 Internet 获取一些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T07:19:05.017

如果您想学习网络编程，您将需要阅读有关***套接字***和 TCP/IP 的内容（如果您想流式传输或更小的数据包，请稍后阅读 UDP）。套接字是大多数操作系统用来处理 TCP/IP 等协议的 API。

你的比较是对的。WCF 是 .NET 网络层之上的框架。正如 ORM 是 ADO.NET 之上的框架一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T07:19:51.730

WCF 不是所谓的网络编程。它们是具有某种关系的两个概念。

通常网络编程意味着套接字编程和TCP/IP。您应该熟悉协议，例如 HTTP、FTP、SNMP 等。然后，您可以编写充当协议服务器和客户端的程序。网络编程仍然很热门，尽管它不再那么流行。

WCF 是一个 Web 服务框架，它只是 HTTP（主要是 SOAP）。

如果可能的话，你应该两者都学，或者至少两者都知道。

# c# - ASP.NET MVC 将原始 HTML 从控制器传递到视图

> ID：12033578
> 
> 赞同：7
> 
> 时间：2012-08-20T07:13:52.440
> 
> 标签：c#, html, asp.net-mvc, decode, viewdata

这几天我一直在摸不着头脑，我不确定这是我的环境问题还是基于 ASP.NET MVC 的代码本身的问题（尽管我有 5 年的 C# 经验）。我正在使用带有所有补丁的 Win7x64 和 VS 2008 最近的全新安装。

我将原始 HTML 存储在数据库表中，控制器根据我无法控制的一些规则选择性地加载该表。不幸的是，当尝试将值填充到控件中的视图数据中时，如下所示：

```
ViewData["HTMLData"] = DAO.HTMLDataGet(); 
```

当我看到输出时，它是转义/HTML 编码的。我尝试使用以下所有这些似乎都无法解决此问题：

```
<%: HttpUtility.HtmlDecode(ViewData["HTMLData"].ToString())%> 
```

和...

```
<%: Server.HtmlDecode(ViewData["HTMLData"].ToString())%> 
```

和...

```
<%: Html.Raw(ViewData["HTMLData"].ToString())%> 
```

...它可以很好地从数据库表中获取原始 HTML，但是无论我尝试什么，它都会继续强制执行该爆炸编码。从我在 MSDN 上阅读的内容来看，有一个脚注是关于由于 HTML 未正确解码而导致的问题，其中包含空格（我的就是这样）。因为我怀疑我是唯一一个面临这个问题的人，所以我向你们寻求一些想法。

我打算用正则表达式来进行页面清理，但我认为最好先从其他人那里得到一些建议，然后再强行使用它。提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-20T07:20:32.680

`<%:` *意思是*“必要时编码”。如果您不希望这样，那么*懒惰*的方法是使用`<%=`，但坦率地说，我建议您改为将其包装在 中`IHtmlString`，例如：

```
string yourEncodedHtml = ...
var html = new MvcHtmlString(yourEncodedHtml); 
```

现在，如果您存储*并*显示它，它应该采用“原样”的 html。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-20T07:25:27.850

尝试使用： **<%= %>**

```
<%= Html.Raw(ViewData["HTMLData"].ToString())%> 
```

**<%: %> 是 ASP.NET 4（和 ASP.NET MVC）中 HTML 编码输出的语法**

[更多细节](http://weblogs.asp.net/scottgu/archive/2010/04/06/new-lt-gt-syntax-for-html-encoding-output-in-asp-net-4-and-asp-net-mvc-2.aspx)

**今天如何对内容进行 HTML 编码**

ASP.NET 应用程序（尤其是那些使用 ASP.NET MVC 的应用程序）通常依赖于使用**<%= %>**代码块表达式来呈现输出。今天的开发人员经常在这些表达式中使用 Server.HtmlEncode() 或 HttpUtility.Encode() 辅助方法在输出渲染之前对输出进行 HTML 编码。

虽然这很好用，但它有两个缺点：

有点冗长 开发人员经常忘记调用 Server.HtmlEncode 方法——而且没有简单的方法来验证它在应用程序中的使用情况

**新的 <%: %> 代码块语法**

**在 ASP.NET 4 中，我们引入了一种新的代码表达式语法 (** <%: %> **)，它可以像 <%= %> 块一样呈现输出 - 但它也会在这样做之前自动对其进行 HTML 编码。这消除了对内容进行显式 HTML 编码的需要。**

我们选择了 <%: %> 语法，以便快速替换现有的 <%= %> 代码块实例。它还使您能够轻松地在代码库中搜索 <%= %> 元素，以查找和验证您未在应用程序中使用 HTML 编码的任何情况，以确保您具有正确的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-04T19:10:25.270

你几乎用过你尝试过的东西。给了我这样做的想法，这很有效：

```
Html.Raw(HttpUtility.HtmlDecode(ViewData["HTMLData"].ToString())) 
```

# ruby-on-rails - Capistrano 部署：git-checkout-index：无法写入文件，无法创建目录

> ID：12033581
> 
> 赞同：0
> 
> 时间：2012-08-20T07:14:20.450
> 
> 标签：ruby-on-rails, deployment, capistrano

我是使用 capistrano 部署 Rails 网站的新手。

**我成功地**将我的更改推送到了 git 存储库，没有出现任何错误。
现在我需要使用 Capistrano 将相同的更改推送到生产服务器。

当我运行时，`cap deploy` 我收到以下错误：

```
urjit@urjit-Lenovo:~/workspace/dev$ cap deploy    
  * executing `deploy'    
  * executing `deploy:update'    
 ** transaction: start    
  * executing `deploy:update_code'    
    executing locally: "git ls-remote git@github.com:devrepublicrep/devcockpit.git HEAD"
/usr/bin/git     
  * executing "git clone -q git@github.com:devrepublicrep/devcockpit.git      /home/devcockpit/releases/20120820062500 && cd /home/devcockpit/releases/20120820062500 && git checkout -q -b deploy c51262dbb81a66f307127c85add0786552c03cad && (echo c51262dbb81a66f307127c85add0786552c03cad >       /home/devcockpit/releases/20120820062500/REVISION)"    
    servers: ["dev.devrepublic.nl"]      
Password: 
    [dev.devrepublic.nl] executing command      
 ** [dev.devrepublic.nl :: err] error: git-checkout-index: unable to write file      public/javascripts/ckeditor/_source/plugins/embed/dialogs/embed.js        
 ** [dev.devrepublic.nl :: err] fatal: cannot create directory at public/javascripts/ckeditor/_source/skins/v2/images       
 ** [dev.devrepublic.nl :: err] fatal: Untracked working tree file '.gitignore' would be overwritten by merge.      
    command finished       
*** [deploy:update_code] rolling back
  * executing "rm -rf /home/devcockpit/releases/20120820062500; true"       
    servers: ["dev.devrepublic.nl"]      
    [dev.devrepublic.nl] executing command      
    command finished       
failed: "sh -c 'git clone -q git@github.com:devrepublicrep/devcockpit.git       /home/devcockpit/releases/20120820062500 && cd /home/devcockpit/releases/20120820062500 && git checkout -q -b deploy c51262dbb81a66f307127c85add0786552c03cad && (echo c51262dbb81a66f307127c85add0786552c03cad > /home/devcockpit/releases/20120820062500/REVISION)'" on dev.devrepublic.nl 
```

请帮我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:33:15.017

我得到了需要清理一些空间的答案。

所以我运行**cap deploy:cleanup**命令。

# html - 野生动物园灰色 html 颜色

> ID：12033583
> 
> 赞同：-1
> 
> 时间：2012-08-20T07:14:28.873
> 
> 标签：html, colors, safari

有人可以告诉我 safari 浏览器的 html 颜色是什么吗？

我曾一度找到它，但后来忘记并失去了来源。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:22:15.130

Safari 的窗口框架是渐变的。您可以使用任何现代图片编辑器的吸管工具来查找颜色。顶部导航栏似乎从浅`#C5C5C5`灰色到深灰色`#969696`，不包括边框。

![苹果浏览器](../Images/1e5547f31bc17d8682ae31be390ec3d4.png)

# mysql - MySQL查询以获取指定时间之前和之后的时间

> ID：12033585
> 
> 赞同：1
> 
> 时间：2012-08-20T07:14:32.410
> 
> 标签：mysql

我希望在指定日期和时间的 90 分钟（之前和之后）的时间间隔内从我的数据库中提取数据。目前我正在使用以下查询，但它返回零记录。请帮助我这样做。

```
SELECT *
FROM `ashwani_video_user_tbl`
WHERE `assigned_date`
BETWEEN from_unixtime( 1324363500 ) - INTERVAL 120
MINUTE AND from_unixtime( 1324363500 ) + INTERVAL 120
MINUTE
LIMIT 0 , 30 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:21:34.243

您需要使用**[DATE_ADD](http://www.w3schools.com/sql/func_date_add.asp)**和**[DATE_SUB](http://www.w3schools.com/sql/func_date_sub.asp)**

```
SELECT *
FROM `ashwani_video_user_tbl`
WHERE `assigned_date` BETWEEN 
                       DATE_SUB(from_unixtime(1324363500), INTERVAL 90 MINUTE) 
                       AND 
                       DATE_ADD(from_unixtime(1324363500), INTERVAL 90 MINUTE)
LIMIT 0 , 30 
```

[*SQLFiddle 演示*](http://sqlfiddle.com/#!2/6861a/8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:22:39.270

```
SELECT *
FROM `ashwani_video_user_tbl`
WHERE `assigned_date`
BETWEEN  1324363500 - 60*90   AND  1324363500 + 60*90
LIMIT 0 , 30 
```

90 - 分钟数，您可以更改此值。

# android - Spinner 监听器在不应该被调用时被调用

> ID：12033587
> 
> 赞同：1
> 
> 时间：2012-08-20T07:14:37.487
> 
> 标签：android, listener

当我设置选择时，这里会调用监听器。这里的问题是，我在侦听器之前设置选择。

我怎样才能避免这种行为？

```
Spinner spCategories = (Spinner) findViewById(R.id.spinnerCategories);
ArrayAdapter<String> aa = new ArrayAdapter<String>(this, R.layout.spinner_item, this.categoryList);
spCategories.setAdapter(aa);
spCategories.setSelection(selectedA);
spCategories.setOnItemSelectedListener(oiclSpCategories); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T07:31:12.013

尝试`OnItemSelectedListener`使用`post`方法注册：

```
spCategories.post(new Runnable() {
    public void run() {
        spCategories.setOnItemSelectedListener(oiclSpCategories);
    } 
}); 
```

# javascript - onclick事件在电话间隙android中不起作用

> ID：12033588
> 
> 赞同：1
> 
> 时间：2012-08-20T07:14:43.157
> 
> 标签：javascript, android, html, cordova

我已经创建了一个应用程序。在phoneGap中。它在 iphone 上工作正常，但在 android 点击事件中不起作用。知道我的代码有什么问题

这是我的 html:-

```
<div   id="logInScreen">
        <div class="logInScreen">
            <a class="main_logo" href="#"><img src="logo.png" alt=""/></a>
            <p class="main_text">Digital Discount Vouchers <br /> On Your Phone</p>
            <div id ="divRegister" class="main_reg" onclick="GeneralTransit('#register')">Register</div>
            <div id ="divNotNow" class="main_reg" onclick="GeneralTransit('#t_featured')">Not Now...</div>
            <div  id ="divLogin" class="main_reg" onclick="GeneralTransit('#login')">Login</div>
            <div class="main_forgot" onclick="GeneralTransit('#login_fog')">FORGOT PASSWORD?</div>
            <p class="main_text2">IN ORDER TO PURCHASE ADDITIONAL VOUCHERS <br /> YOU NEED TO BE REGISTERED</p>
            <p class="main_text3">POWERED BY YALLAMOB.COM</p>
        </div>
    </div> 
```

还有一些其他 div 可以根据条件隐藏和显示。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-20T07:29:00.393

我以为是失踪的`';'`（`GeneralTransit('#register');`）

但它在这里有和没有';'：http: [//jsfiddle.net/ZVFgW/11/](http://jsfiddle.net/ZVFgW/11/)

您的问题可能在其他地方。你是用 Chrome 还是 Firefox+Firebug 调试的？

# android - MediaPlayer android不播放

> ID：12033597
> 
> 赞同：-1
> 
> 时间：2012-08-20T07:15:39.350
> 
> 标签：android, media-player

我使用这些行在服务和活动中使用媒体播放器播放一些音频文件，但我的设备上没有声音，可能是什么原因？我应该怎么做才能理解什么是错的并最终解决这个问题？

```
 MediaPlayer mp = MediaPlayer.create(this, R.raw.alert);
    mp.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:24:28.167

查看[MediaPlayer 文档中的状态图。](http://developer.android.com/reference/android/media/MediaPlayer.html)

![](../Images/7b67771cd2a00bec3fe3eac8048512e5.png)

创建后`MediaPlayer`它处于空闲状态。如您所见，您需要在调用 start() 之前对其进行初始化和准备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T07:17:20.940

```
Intent viewMediaIntent = new Intent();   
viewMediaIntent.setAction(android.content.Intent.ACTION_VIEW);   
File file = new File(objectFilePath);   
viewMediaIntent.setDataAndType(Uri.fromFile(file), "audio/*");   
viewMediaIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);
startActivity(viewMediaIntent); 
```

[http://developer.android.com/reference/android/media/MediaPlayer.html](http://developer.android.com/reference/android/media/MediaPlayer.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T07:38:03.137

检查以下代码，它对我来说很好。我希望它也对你有用.....不要忘记在 android Manifest File 中添加音频播放权限

```
import android.app.Activity;
 import android.media.MediaPlayer;
  import android.media.MediaPlayer.OnBufferingUpdateListener;
  import android.media.MediaPlayer.OnCompletionListener;
  import android.os.Bundle;
  import android.os.Handler;
    import android.util.Log;
  import android.view.MotionEvent;
    import android.view.View;
     import android.view.View.OnClickListener;
     import android.view.View.OnTouchListener;
     import android.widget.Button;
     import android.widget.SeekBar;

                                                public class StreamAudioFromUrlSampleActivity extends Activity implements OnClickListener, OnTouchListener, OnCompletionListener, OnBufferingUpdateListener{
                    private Button btn_play,
                btn_pause,
                btn_stop;
private SeekBar seekBar;
private MediaPlayer mediaPlayer;
private int lengthOfAudio;
private final String URL = "http://android.erkutaras.com/media/audio.mp3";
private final Handler handler = new Handler();
private final Runnable r = new Runnable() { 
    @Override
    public void run() {
        updateSeekProgress();                   
    }
};

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    init();
}

private void init() {
    btn_play = (Button)findViewById(R.id.btn_play);
    btn_play.setOnClickListener(this);
    btn_pause = (Button)findViewById(R.id.btn_pause);
    btn_pause.setOnClickListener(this);
    btn_pause.setEnabled(false);
    btn_stop = (Button)findViewById(R.id.btn_stop);
    btn_stop.setOnClickListener(this);
    btn_stop.setEnabled(false);

    seekBar = (SeekBar)findViewById(R.id.seekBar);
    seekBar.setOnTouchListener(this);

    mediaPlayer = new MediaPlayer();
    mediaPlayer.setOnBufferingUpdateListener(this);
    mediaPlayer.setOnCompletionListener(this);

}

@Override
public void onBufferingUpdate(MediaPlayer mediaPlayer, int percent) {
    seekBar.setSecondaryProgress(percent);
}

@Override
public void onCompletion(MediaPlayer mp) {
    btn_play.setEnabled(true);
    btn_pause.setEnabled(false);
    btn_stop.setEnabled(false);
}

@Override
public boolean onTouch(View v, MotionEvent event) {
    if (mediaPlayer.isPlaying()) {
        SeekBar tmpSeekBar = (SeekBar)v;
        mediaPlayer.seekTo((lengthOfAudio / 100) * tmpSeekBar.getProgress() );
    }
    return false;
}

@Override
public void onClick(View view) {

    try {
        mediaPlayer.setDataSource(URL);
        mediaPlayer.prepare();
        lengthOfAudio = mediaPlayer.getDuration();
    } catch (Exception e) {
        //Log.e("Error", e.getMessage());
    }

    switch (view.getId()) {
    case R.id.btn_play:
        playAudio();
        break;
    case R.id.btn_pause:
        pauseAudio();
        break;
    case R.id.btn_stop:
        stopAudio();
        break;
    default:
        break;
    }

    updateSeekProgress();
}

private void updateSeekProgress() {
    if (mediaPlayer.isPlaying()) {
        seekBar.setProgress((int)(((float)mediaPlayer.getCurrentPosition() / lengthOfAudio) * 100));
        handler.postDelayed(r, 1000);
    }
}   

private void stopAudio() {
    mediaPlayer.stop();
    btn_play.setEnabled(true);
    btn_pause.setEnabled(false);
    btn_stop.setEnabled(false);
    seekBar.setProgress(0);
}

private void pauseAudio() {
    mediaPlayer.pause();
    btn_play.setEnabled(true);
    btn_pause.setEnabled(false);
}

private void playAudio() {
    mediaPlayer.start();
    btn_play.setEnabled(false);
    btn_pause.setEnabled(true);
    btn_stop.setEnabled(true);
} 
```

}

# php - CAST HEX as DATATIME - 如何获取日期？

> ID：12033598
> 
> 赞同：2
> 
> 时间：2012-08-20T07:15:38.857
> 
> 标签：php, sql-server, datetime, casting, hex

我在 PHP 中处理 SQL Server 数据库转储时遇到问题。

我有一个名为`datatime`的列，其值如下：

```
0x0000a0af00d7f2eb 
```

我需要在 PHP 中提取此列的日期和时间值。我没有可用的 SQL Server，所以我不能使用`CAST(0x0000a0af00d7f2eb AS datetime)`.

有人告诉我这个十六进制：`0000a0af00d7f2eb`是由 4 个字节的日期和 4 个字节的时间创建的。

所以我知道：

当我将`0000a0af`（前 4 个字节）更改为十进制时，我将从 1900 年开始获得天数。这很好。

但是当我试图改变最后的 4 个字节（所以应该有时间）：`00d7f2eb`到十进制时，我得到了一些我无法理解的东西。它应该是从午夜开始的时间，以毫秒为单位，有时这个值会低约 3 倍。

任何人都可以帮助转换`0000a0af00d7f2eb`为日期吗？我知道时间在早上 5 点到晚上 11 点之间，而这一天是上周。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:45:33.887

根据 Rene 链接的另一个问题中的[链接文章](http://www.sql-server-performance.com/2004/datetime-datatype/)，SQL Server 在第二组 4 个字节中存储 3.33 毫秒间隔，而不是毫秒。所以如果你用毫秒计算，你确实会得到大约 1/3 的时间。使用您的示例，让我们从转换为十进制开始

> 00d7f2eb -> 14152427 3.3ms 间隔

现在乘以 3.3 转换为毫秒，然后除以 1000 得到秒

> 14152427 * 3.3 / 1000 ~ 47127.58

所以这代表午夜后大约 47000 秒。一个小时除以 3600 秒

> 47127.58 / 3600 ~ 13.091

因此，这表示午夜后大约 13.1 小时的时间，这与 SQL Server 中的转换结果一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:05:58.183

```
select CAST(0x0000a0af00d7f2eb AS datetime) as t 
```

对我来说很好。它返回“2012 年 8 月 16 日 13:06:14-0700”。

# android - 如何在单击数组适配器中的按钮时收听

> ID：12033601
> 
> 赞同：0
> 
> 时间：2012-08-20T07:16:01.243
> 
> 标签：android, listview

我每行添加一个按钮以在数组适配器中显示该行中的地图。当单击该按钮时，我想获得该行中的值。如何在单击按钮时获得这些值。

我的课：

```
public class MyListAdapter extends ArrayAdapter<String> {

private final Context context;
private final ArrayList<HashMap<String, ArrayList<String>>> pjclist;
private final ArrayList<PermJorneyCycleBean> pjcarraylist ;
String villagename;
int black = Color.WHITE;
float village = 20f;
float depot = 16f;
int red = Color.RED;
int count;
ArrayList<String> Deoptname;

public MyListAdapter(Context context,ArrayList<HashMap<String, ArrayList<String>>>pjcretrivelist, String [] villagename,ArrayList<PermJorneyCycleBean>itempjcarraylist) {
  //    public MyListAdapter(Context context,ArrayList<PermJorneyCycleBean> pjcretrivelist, String [] villagename) {
    super(context, R.layout.scheduleplan,villagename);
    this.context = context;
    this.pjcarraylist=itempjcarraylist;
    this.pjclist=pjcretrivelist;
    count =pjcretrivelist.size();

}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LinearLayout rowView1=null;
    LinearLayout rowView=null;
    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    if (position<count){
    rowView1= (LinearLayout) inflater.inflate(R.layout.scheduleplan, null, true);
    rowView= (LinearLayout) rowView1.findViewById(R.id.plan);
    HashMap<String, ArrayList<String>> depotlistnew = new HashMap<String, ArrayList<String>>();
    depotlistnew = pjclist.get(position);
    Iterator<Entry<String, ArrayList<String>>> itr = depotlistnew.entrySet().iterator();

    while (itr.hasNext()) {
        Map.Entry pairs = (Map.Entry) itr.next();
        villagename = pairs.getKey().toString();
        createNewRow(rowView, villagename, black, village);
        Deoptname = (ArrayList) pairs.getValue();
        for (int i = 0; i < Deoptname.size(); i++) {
            String depotname = new String();
            depotname = Deoptname.get(i);
            createNewRow(rowView, depotname, red, depot);

        }

    }

    Button mapbutton = createbutton(rowView, "Locate on Map");
    mapbutton.setTag(position);
    mapbutton.setClickable(true);
    mapbutton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Toast.makeText(getContext(), " This is to depot map"+villagename,Toast.LENGTH_LONG).show();
        }
    });
    }

    else if (position==count){

        rowView1 = (LinearLayout) inflater.inflate(R.layout.schedulemap, null, true);

        Button villagebutton = (Button)rowView1.findViewById(R.id.getBack);
        villagebutton.setClickable(true);
        villagebutton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Toast.makeText(getContext(), "This is for Map"+villagename,Toast.LENGTH_LONG).show();
            }
        });

    }
    else if (position==count+1)
    {
    rowView1 = (LinearLayout) inflater.inflate(R.layout.scheduleplanlast, null, true);  
    Button backbutton = (Button)rowView1.findViewById(R.id.getBackHome);
    backbutton.setClickable(true);
    backbutton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Toast.makeText(getContext(), " This is to test it",Toast.LENGTH_LONG).show();
        }
    });
    }

    return rowView1;
}

public void createNewRow(LinearLayout ll1, String value, Integer color,float size) {
    TextView tv = new TextView(ll1.getContext());
    tv.setTextColor(color);
    tv.setTextSize(size);
    tv.setText(value);
    ll1.addView(tv);

}

public Button createbutton(LinearLayout ll1, String value) {
    Button backbutton = new Button(ll1.getContext());
    backbutton.setText(value);
    backbutton.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
    ll1.addView(backbutton);
    return backbutton;
}

public TextView createTextView(LinearLayout ll1, String value){
    TextView lattextview = new TextView(ll1.getContext());
    lattextview.setVisibility(0);
    lattextview.setText(value);
    lattextview.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
    ll1.addView(lattextview);

    return lattextview;
}

} 
```

单击这些按钮时，我无法获得位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T07:45:26.910

供您参考，我有以下代码片段，用于单击阵列适配器

```
 class MySimpleArrayAdapter extends ArrayAdapter<String> {
    private Context context;

    public MySimpleArrayAdapter(Context context) {
        super(context, R.layout.buddy_list);
        this.context = context;

    }

    public int getCount() {
        return speedList.size();
    }

    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {

        View rowView = convertView;

        if (rowView == null) {

            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            rowView = vi.inflate(R.layout.speeddial_list, null);
        }
        TextView name = (TextView) rowView.findViewById(R.id.Name);
        TextView buddyId = (TextView) rowView.findViewById(R.id.sipid);
        Button btn = (Button)rowView.findViewById(R.id.speeddialbtn);

        name.setText(speedList.get(position).getName());
        buddyId.setText(speedList.get(position).getNumber());
        btn.setText(Integer.toString(speedList.get(position).getSPDIndex()));

        /*name.setText(names.get(position).toString());
        buddyId.setText(buddyIds.get(position).toString());
        btn.setText(numberButton.get(position).toString());*/

        btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                if (!speedList.get(0).getName().equals("    No SpeedDial Found")) {
                    registerForContextMenu(getListView());
                    getListView().showContextMenu();
                } else {
                    unregisterForContextMenu(getListView());
                }

                selected_name_fromlist = speedList.get(position).getName();
                selected_number_fromlist = speedList.get(position).getNumber();
                System.out.println(" selected :" + selected_name_fromlist);
            }
        });
        return rowView;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:22:11.557

[这是ListView Row](http://androidforbeginners.blogspot.com/2010/03/clicking-buttons-in-listview-row.html)教程中一个很好的处理按钮点击。

# css - 如何将流体 div 居中在同一行上？

> ID：12033602
> 
> 赞同：0
> 
> 时间：2012-08-20T07:16:17.110
> 
> 标签：css, dreamweaver

我在 Dreamweaver 中使用流体网格布局，并且在同一行上有三个 div。它看起来不错，除了我想在页面上居中所有三个 div。现在他们都被转移到左边，因为这显然是他们被告知要做的。我只是不知道如何告诉他们要居中。

帮助将不胜感激！

它现在看起来完全像这样（不是我的图像）：

![](../Images/8ebb735d084fdfb565f3981fe87c2e36.png)

```
#item1 {
    clear: both;
    float: left;
    margin-left: 0;
    width: 32.6007%;
    display: block;
}
#item2 {
    clear: none;
    float: left;
    margin-left: 1.0989%;
    width: 32.6007%;
    display: block;
}
#item3 {
    clear: none;
    float: left;
    margin-left: 1.0989%;
    width: 32.6007%;
    display: block;

#featuredholder {
clear: both;
float: left;
margin-left: 0;
width: 100%;
display: block;
} 
```

编辑：

请看一下这张照片，看看我正在使用什么。![在此处输入图像描述](../Images/ab1e85838546d2d8d2f554c1f78aec18.png)

我需要那些 div 居中并且仍然保持流畅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:25:51.503

如果我理解正确，你只需要添加`margin: 0 auto;`到你的包装器中。

```
#wrapper
{
    width: 80%;
    margin: 0 auto;
    padding: 10px;
}

#item1 {
    float: left;
    width: 32.6007%;
}
#item2 {
    float: left;
    width: 32.6007%;
}
#item3 {
    float: left;
    width: 32.6007%;
}

span.clear /*clearfix*/
{
    display: block;
    clear: both;
} 
```

此外，您不需要`display: block;`在 div 上声明，因为默认情况下它是块级元素。也删除 div 上的清除，否则这会破坏浮动（这就是`span.clear`在你的三个 div 之后的用途。）

演示：http: [//jsfiddle.net/Kyle_Sevenoaks/ZSYnW/](http://jsfiddle.net/Kyle_Sevenoaks/ZSYnW/)

* * *

在您发表评论后，您需要添加一个额外的 div 来包裹居中的元素，将该 div 的边距设置为`0 auto`并重组 HTML 的其余部分，以便每个两个块都位于另一个包装器 div 中：)

[http://jsfiddle.net/Kyle_Sevenoaks/ZSYnW/1/](http://jsfiddle.net/Kyle_Sevenoaks/ZSYnW/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T07:19:07.773

嘿，现在习惯了这个 css 就像这样

```
#wrapper{
margin:0 auto;
width:800px;
overflow:hidden;
}

#item1, #item2 , #item3 {
float:left;
width:30%;
 }
#item1{
margin-left:3%;
} 
```

# android - project_create.sh：第 4 行：android：找不到命令（cygwin&android&jni）

> ID：12033611
> 
> 赞同：1
> 
> 时间：2012-08-20T07:17:20.037
> 
> 标签：android, opencv, batch-file, java-native-interface, cygwin

[http://www.stanford.edu/class/ee368/Android/Tutorial-2-OpenCV-for-Android-Setup-Windows.pdf](http://www.stanford.edu/class/ee368/Android/Tutorial-2-OpenCV-for-Android-Setup-Windows.pdf)

这是我正在关注的教程，我按照我运行的`JNI to opencv library` 步骤坚持并得出了结果`project_create.sh``cugwin``project_create.sh: line 4: android: command not found`

然后我`project_create.bat`用线创建了一个文件`android update project --name android-opencv --path .\ copy project.properties default.properties`

但它也想出`android`不被识别为内部或外部命令/可运行程序或批处理文件。

两者都不起作用`.sh`，`.bat`我无法继续前进。因为`ant`步骤取决于它有人可以告诉我如何解决它吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:28:32.887

Android 是一个可执行文件，位于`<path-to-your-SDK>/tools/`. 除非您的工作目录是 tools，或者您已将其添加到您的`PATH`.，否则您将收到此错误。

要修复它，要么编辑脚本以使用完整路径，要么将文件复制粘贴到工具目录中并运行它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:21:42.980

好吧，我终于成功了！

首先，修改project_create.sh把路径放到android之类的`C:/cygwin/home/Joyce/SDK/tools/android update project --name android-opencv --target 2 \ --path`

并且最好也将目标加起来，因为您不必处理“未找到目标”问题。

其次，不要在cygwin终端中运行`"sh ./project_create.sh"`，在windows终端中运行。

第三，确保 ant\bin 已经添加到 PATH 中，然后可以`"ant debug"`在 windows 终端中运行。

终于，得到了“BUILD SUCCESSFUL”！JNI 到 opencv 库完成！

# ios - iOS 中的大型 SQLITE 数据库

> ID：12033616
> 
> 赞同：2
> 
> 时间：2012-08-20T07:17:42.760
> 
> 标签：ios, database, ipad, sqlite

在我的 ios 应用程序中，我有一个超过 800.000 行的 sqlite 数据库。或多或少只有行中的文本。目前，我的 select 语句需要一分钟以上才能执行。这是正常的还是我有什么问题。

**有没有可能加快这项任务？**

我的问题是，我**不能**用网络服务或其他东西来做到这一点。它应该在没有任何互联网连接的情况下直接在 iPad 上执行。

任何想法都受到高度赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T07:31:09.237

很难提供抽象的建议，但总的来说：

1.  措施。找出瓶颈的*位置*和*原因*
2.  改进代码/数据库方案
3.  转到 1

(1) 的最佳工具是 SQLite 的“[解释计划](http://www.sqlite.org/eqp.html)”功能。这告诉你它将*如何*得到你的结果。如果花费超过一分钟，我想你会看到很多全表扫描。

(2) 的答案取决于您在 (1) 中找到的内容。您也许可以改进查询；您可能需要索引。

第（3）点很重要。不要猜测是什么让最好的性能提升。措施。

# c++ - 推断函子返回类型的通用方法？

> ID：12033620
> 
> 赞同：14
> 
> 时间：2012-08-20T07:17:59.737
> 
> 标签：c++, templates, lambda, c++11

[这个问题是如何推断函子返回值的类型的](https://stackoverflow.com/questions/12005749/how-to-deduce-the-type-of-the-functors-return-value)后续问题？ 我正在以更抽象的方式重新制定它。

给定模板函数的伪代码

```
template <typename Arg, typename Fn>
auto ComputeSomething(Arg arg, Fn fn) -> decltype(<decl-expr>)
{
// do something
// ............
return fn(<ret-expr>)
} 
```

where`<ret-expr>`是一个包含 的任意表达式`arg`，我应该用什么`<decl-expr>`来设置返回类型`ComputeSomething`等于函子的返回类型。

仿函数可以是类、lambda 或函数指针。

到目前为止我找到的部分解决方案。

(a) ecatmur 完成的我的链接问题的答案。本质上，它是在重复 return 语句`<decl-expr>`。问题：它很容易出错，如果包含局部变量则不起作用。

(b) 它仅适用于函数指针

```
template <typename Arg, typename Ret>
Ret ComputeSomething(Arg arg, Ret(*fn)(Arg)) 
```

(c) 它假设函子的参数是类型的`Arg`（一般情况下可能不成立）并且要求`Arg`是可默认构造的

```
template <typename Arg, typename Fn>
auto ComputeSomething(Arg arg, Fn fn) -> decltype(fn(Arg()) 
```

(d) 使用`std::declval`which 应该解除默认可构造的限制，如[如何在 template 中推断函数的返回类型中](https://stackoverflow.com/a/10293903/1345960)所建议的那样。有人可以解释它是如何工作的吗？

```
template <typename Arg, typename Fn>
auto ComputeSomething(Arg arg, Fn fn) -> decltype(fn(std::declval<Arg>()) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-20T07:23:52.987

使用[result_of](http://en.cppreference.com/w/cpp/types/result_of)。它是向后兼容的，可以`declval`消除代码中所有难看的痛苦。`&&`如果您实际上只是转发值，您仍然需要记住添加右值引用限定符 ( )。

我发现其他重要的事情：您的函数将参数转发给另一个函数。在这种情况下，您应该始终使用右值引用来传递参数。

如果您要做的只是提高可维护性：`RETURNS`围绕宏进行了多次尝试，以尽量减少返回类型声明和实际返回表达式之间的重复，但我还没有看到任何允许包含的函数体超过实际的返回语句。

至于如何`declval`工作：它的编译器依赖。它不允许出现在评估的内容中，并且它的参数可以是不完整的类型。见[20.2.4](http://en.cppreference.com/w/cpp/utility/declval)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-20T10:36:59.070

`std::declval`是一个仅声明（未定义）的函数模板。因此，它只能用于未评估的上下文中，例如 和 的`sizeof`论点`decltype`。它被声明为返回指定类型的右值。`decltype`这允许您使用它来为表达式中的函数调用制造一个虚拟参数。

例如

```
typedef decltype(fn(std::declval<Arg>())) t; 
```

声明为使用 type的右值`t`调用的结果的类型。这类似于您的情况 (c) ( )，但它不需要任何，因此它适用于没有默认构造函数的类型。`fn``Arg``fn(Arg())``Arg`

如果您的返回表达式使用类型的局部变量`foo`，那么`decltype(fn(std::declval<foo>()))`无论您如何构造`foo`.

如果您需要一个左值，例如命名对象或左值引用，那么您可以使用`std::declval<foo&>()`. 这允许您处理类型取决于您是否具有左值或右值的情况。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-20T12:01:03.883

这是我自己的解决方案，我能得到的最好的

```
template <typename Arg, typename Fn>
typename std::result_of<Fn(Arg)>::type ComputeSomething(Arg arg, Fn fn) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-20T07:29:03.220

要使 (c) 适用于任何东西，您需要 2 个重载。第 1 次如 (c) 所示，第 2 次：

```
template <typename Arg, typename Ret>
Ret ComputeSomething(Arg arg, std::function<Ret(Arg)> fn) 
```

此外，正如[gcc 错误 54111](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=54111)所示 - 返回类型的推断非常不可靠。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-20T07:24:12.787

(b) 的变体不仅与函数指针一起工作，应该类似于

```
template<typename Arg, typename Ret>
Ret ComputeSomething (Arg arg, function<auto (Arg) -> Ret> f) 
```

# c++ - 适用于 Linux 的免费可用并行 (MPI) 调试器？

> ID：12033622
> 
> 赞同：4
> 
> 时间：2012-08-20T07:18:03.683
> 
> 标签：c++, debugging, parallel-processing, mpi

是否有用于调试 MPI 并行 C++ 代码的非商业/免费可用 Linux 工具？像 Allinea DDT 或 TotalView 这样的东西？我知道如何利用 gdb 附加到并行运行代码的技巧。但我发现它们很乏味，只是为了进行一些快速调试。那么是否有任何基于 GUI 的工具（可能基于 gdb）直接支持并行调试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-03T05:34:53.657

我使用 openmpi 和 ddd（它是 gdb 的 GUI）：

mpirun -np 4 ddd my_program

之后，会出现 4 个窗口，每个进程都在自己的窗口中。如果您的程序必须以命令行参数开头，则它们在 ddd 窗口中给出，并且每个命令都必须在每个窗口中执行。这不是那么方便，但它确实有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T00:48:50.167

根据您使用的 MPI 实现，您可以运行

```
mpirun --gdb 
```

或者

```
mpirun -gdb -n 4 ./testc 
```

查看[英特尔的](https://software.intel.com/en-us/mpi-developer-guide-linux-debugging-1)文档以获取更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-06T07:21:26.667

Eclipse PTP ( [http://www.eclipse.org/ptp/](http://www.eclipse.org/ptp/) ) 可用于此目的

# java - 如何将表行值传递给 servlet？

> ID：12033627
> 
> 赞同：1
> 
> 时间：2012-08-20T07:18:17.467
> 
> 标签：java, jsp, jakarta-ee, servlets

我有一个表，它具有某些属性，并且在每行的最后一列中有一个按钮。

```
 <tr>
            <td>B001</td>
            <td>The Catcher In The Rye</td>
            <td>199</td>
            <td><select>
            <option>1</option>
            <option>2</option>
            <option>3</option>
            </select></td>  
            <td><button>Add To Cart</button></td>           
        </tr> 
```

我必须在我正在使用的 Servlet 中分别获取 id、name、price、quantity 中的整个行值。我怎么做？

使用表单我们可以做一些类似的事情 -

```
String name = request.getParameter("LoginName"); 
```

但是这里没有表的 id。那么如何实现相同的目的以便我可以检索特定行的值呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:31:00.803

在页面中放置一些隐藏字段以携带选定的行数据。

单击按钮时，使用 javascript 使用单击的行数据设置这些隐藏字段。

并提交表格。

试试这个[http://jsfiddle.net/LBJWQ/7/](http://jsfiddle.net/LBJWQ/7/)

这是 JSP & Servlets 101。你也应该阅读 HTML 和 Javascript。

# lotus-notes - 创建由框架包含的大纲（关于类别） - LOTUS NOTES 7

> ID：12033628
> 
> 赞同：0
> 
> 时间：2012-08-20T07:18:21.797
> 
> 标签：lotus-notes

伙计们！我是莲花笔记编程的新手，我有一个问题。

我想创建一个基于以下类别的大纲：按姓名、生日和电话号码对人员进行排序。每个人都可以解释我如何做到这一点吗？我应该创建一个嵌入式大纲吗？这个大纲应该包含在一个框架上。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:53:27.783

传统上，您将创建一个定义应用程序框架布局的框架集，然后将其中一个框架设置为显示一个页面，该页面又包含大纲。大纲框架的目标是显示视图的主框架——选定的大纲节点定义要显示的视图。

您需要创建多个视图，如果您希望每个排序视图都有链接，则为您描述的每个“排序依据”创建一个视图。然后，您的大纲将包含每个视图的条目。作为替代方案，您可以只创建一个视图并使列标题允许排序，前提是您可以在一个视图中显示所有必要的列。

# iphone - UIGestureRecognizer 问题

> ID：12033631
> 
> 赞同：0
> 
> 时间：2012-08-20T07:18:30.853
> 
> 标签：iphone, objective-c, ios, uigesturerecognizer

我有一个**UIView**并且我在视图上添加了***UILongGestureRecognizer***和***UIPanGestureRecognizer***。当我点击并按住它几秒钟时，我得到了 LongPress 识别的回调。

代码如下图

```
- (void)addPanGsetureForView:(UIView *)object
{    
    UIPanGestureRecognizer * panGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(panGestureRecognised:)];
    [object addGestureRecognizer:panGesture];
    [panGesture release];
}

- (void)addLongPressGsetureForView:(UIView *)object
{
    UILongPressGestureRecognizer * longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(imageLongPressed:)];
    [longPress setMinimumPressDuration:1.0];
    [object addGestureRecognizer:longPress];
    [longPress release];
} 
```

所以我想使用平移手势移动视图。因此，当在视图上没有移开手指的情况下识别出长按时，我希望平移手势得到识别。如果我移开手指并再次点击并平移它，它就会被识别。
*所以请帮我解决这个问题*。
提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T07:42:05.490

取自 Apple 关于[手势识别器的文档](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizers/GestureRecognizers.html)

**允许同时手势识别**

默认情况下，没有两个手势识别器可以尝试同时识别他们的手势。`gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`但是您可以通过实现协议的可选方法来更改此行为`UIGestureRecognizerDelegate`。当接收手势识别器的识别会阻止指定手势识别器的操作时调用此方法，反之亦然。返回 YES 以允许两个手势识别器同时识别他们的手势。

刚刚对此进行了测试，我认为它将解决您的问题！

# javascript - 两个 amCharts 图表未在 iPad 上使用 jQueryMobile 框架显示在同一页面上

> ID：12033632
> 
> 赞同：1
> 
> 时间：2012-08-20T07:18:31.710
> 
> 标签：javascript, jquery, ipad, jquery-mobile, amcharts

我正在使用 iPad 的 jQuery Mobile 框架创建一个 Web 应用程序。在我的应用程序中，我需要显示一些图表，所以我使用 Javascript amCharts 来绘制图表。

在我的应用程序中，我想在一个页面上显示折线图、条形图和 HTML 表格。有一段时间，只会显示一个元素。要么是折线图，要么是条形图，要么是 HTML 表格。所以我创建了三个 div 并将图表和 HTML 表格放在每个 div 中。我通过菜单选择显示或隐藏 div。请查看[虚拟应用程序](http://questoons.com/nidhi-testing/demo/)。

它在桌面浏览器和 Android 平板电脑上运行良好。当我在 iPad 上测试它时，它无法正常工作。它仅显示第一个折线图。如果我将其更改为条形图，则它不会显示图表。

我在javascript中隐藏和显示div，如下所示：

```
document.getElementById('barChartDiv').style.display='block';
document.getElementById('lineChartDiv').style.display='none';
document.getElementById('tableDiv').style.display='none'; 
```

那么为什么第二张图表没有出现在 iPad 上呢？请告诉我我做错了什么。jQuery Mobile 和 amCharts 框架有什么问题吗？

任何网络链接或源代码将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:56:57.247

更改 div 的显示样式后尝试调用 chart.validateNow()。

# facebook - 在请求中一起获取所有用户的活动提要

> ID：12033639
> 
> 赞同：0
> 
> 时间：2012-08-20T07:19:33.433
> 
> 标签：facebook, performance, facebook-graph-api, optimization

我有一个 facebook 应用程序，一旦用户使用我的网站，它就会在用户活动提要上发布。我还试图在我的网站上显示用户朋友的活动。为此，我正在为他的朋友取回我的应用程序在 facebook 上发布的提要。

但是，问题是，在第一个请求中，我得到了已安装我的应用程序的各个用户的所有朋友的列表。有一次，我得到这个列表，我可以得到他的朋友，但是，一次只能得到一个。

因此，如果用户有 50 个朋友使用我的网站，则需要 50 个请求才能向他显示他的朋友活动。facebook open graph 中是否有办法同时获取所有朋友的所有提要列表，或者使用最少数量的请求？

请提出一些方法来做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:02:45.543

如果您使用 FQL 来获取数据，您可以使用`WHERE uid IN (…,…,…)`一次为多个用户选择数据。

使用 FQL 可以进行多查询，或者使用 API 可以进行批量请求；减少获取数据所需的 HTTP 请求数。

# java - 服务中的多线程 (Android/Java)

> ID：12033642
> 
> 赞同：0
> 
> 时间：2012-08-20T07:19:58.520
> 
> 标签：java, android, multithreading, thread-safety

我的应用程序需要经常需要下载图像。所以我正在实施一个 IntentService 来服务下载请求。

第一个问题是 IntentService 按顺序提供下载服务，我希望有一种方法来确定下载的优先级并同时进行多个下载。

顺便说一句，我正在考虑使用（在 IntentService 内部）带有[PriorityBlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/PriorityBlockingQueue.html)的 ThreadPoolExecutor或结合 PriorityBlockingQueue 和 AsyncTasks。

解决这个问题的最佳方法是什么？还有其他一些合理的可能性吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:33:19.783

您使用 AsyncTask.... 以下代码段执行 AsyncTask 供您参考：

私有类 doSomethingDelayed 扩展 AsyncTask {

```
 private int num_runs = 0;

    @Override
    protected Void doInBackground(Void... gurk) {

        Log.v(TAG, "going into postData");

        long ms_before = SystemClock.uptimeMillis();
        try {
            Log.v(TAG, "Time Now is " + ms_before);
            postData();
            Log.v(TAG, "coming out of postData");
            publishProgress(num_runs);
        } catch (Exception e) {
            System.out.println("--DoSomeThing--" + e.getMessage());
        }

        return null;
    }

    @Override
    protected void onCancelled() {
        Context context = getApplicationContext();
        int duration = Toast.LENGTH_LONG;
    }

    @Override
    protected void onProgressUpdate(Integer... num_runs) {
        Context context = getApplicationContext();

            }
        } 
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T07:27:35.840

事实上，a`IntentService`会按顺序处理所有事情，并在没有更多可用 Intent 的地方关闭。我想当你有一个单独的线程来做你的事情时，这会出错。

您可以做的是使用“正常”`Service`并使用`AsyncTask`等。完成任务后，您可以调用`stopSelf()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T07:34:51.370

如果它在后台下载小东西，**android.os.AsyncTask**是一种方法。查看[http://code.google.com/p/minemessagevibrator/source/browse/trunk/src/com/mine/oauth/MineOAuthAccessActivity.java](http://code.google.com/p/minemessagevibrator/source/browse/trunk/src/com/mine/oauth/MineOAuthAccessActivity.java)以获取示例。

# spring - 在模型中设置一个值，并且无法通过 EL 在 JSP 中显示该值

> ID：12033646
> 
> 赞同：0
> 
> 时间：2012-08-20T07:20:22.173
> 
> 标签：spring, spring-mvc, tomcat7

我在阅读有关 spring mvc 的教程时遇到问题。该项目的 jsp 页面如下：

```
<html>
<head>

    <title>Spring 3.0 MVC Series: Hello World - ViralPatel.net</title>
</head>
<body>
hello!
    ${inf}
</body>
</html> 
```

当我在控制器中为 inf 设置一个值时，“${inf}”无法恢复该值。

我现在该怎么办？

谢谢

添加：控制器的代码：

```
package net.viralpatel.spring3.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.portlet.ModelAndView;

@Controller
public class HelloWorldController {

    @RequestMapping("hello")
    public ModelAndView helloWorld() {

        String message = "Hello World, Spring 3.0!";
        System.out.println(message);
        ModelAndView modelandview=new ModelAndView("hello");
        modelandview.addObject("inf", message);
        //return new ModelAndView("hello", "message", message);
        return modelandview;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:05:24.553

尝试将 ModelAndView 的导入更改为：

`org.springframework.web.servlet.ModelAndView`

# android - Android 音频管理器/服务错误：接收器和上下文包名称不匹配

> ID：12033647
> 
> 赞同：2
> 
> 时间：2012-08-20T07:20:28.557
> 
> 标签：android

我有这个错误：

```
E/AudioManager(2221): registerMediaButtonEventReceiver()   
           error: receiver and context package names don't match 
```

谁能详细说明我做错了什么？我试图将我所有的课程放在一个包下，但无济于事！

# php - Web 主机无法识别本机自动加载

> ID：12033653
> 
> 赞同：0
> 
> 时间：2012-08-20T07:20:55.573
> 
> 标签：php, codeigniter

我在 config.php 中添加了以下代码段之一：

```
 /*
| -------------------------------------------------------------------
|  Native Autoload - by Phil Sturgeon. New Version!
| -------------------------------------------------------------------
|
| Nothing to do with config/autoload.php, this allows PHP autoload to work
| for base controllers and some third-party libraries.
|
| If using HMVC you do not need this! HMVC will autoload.
|
| Place this code at the bottom of your application/config/config.php file.
*/
function __autoload($class)
{
    if (strpos($class, 'CI_') !== 0)
    {
        if (file_exists($file = APPPATH . 'core/' . $class . 'php'))
        {
            include $file;
        }
        elseif (file_exists($file = APPPATH . 'libraries/' . $class . 'php'))
        {
            include $file;
        }
    }
} 
```

出于某种原因，我发现我的虚拟主机抛出了一个错误；上面的代码只适用于我的本地主机 xampp！

当我从远程 Web 主机运行我的页面时，我收到此错误：

```
Fatal error: Class 'Frontend_Controller' not found in ....***some path***..../ci_centric/application/controllers/home.php on line 16 
```

**路径：**

> Frontend_Controller 扩展了 MY_Controller
> 
> MY_Controller 位于核心中，Frontend_Controller 位于库中
> 
> 家庭控制器扩展了 Frontend_Controller

***想知道为什么它在我的网络主机中不起作用，但在 localhost 中却可以正常工作！我需要编辑 php.ini 吗？请指教。***

远程 web 主机具有 PHP 版本 5.2.*

# git - git：更新供应商分支

> ID：12033655
> 
> 赞同：0
> 
> 时间：2012-08-20T07:20:58.313
> 
> 标签：git

我有一个带有分支`master`的git 存储库。`dev`还有一个供应商分支`vender`，我用来更新我的第三方库。

现在我已经进入这个项目有一段时间了，已经提交了大量的更改，并且还更新了几次第三方代码。（我从不将自己的更改添加到第三方库，只是从源代码更新它们）

我*以前*做的是：（可能是错误的）

```
(dev) $ git checkout vender
(vender) $ git merge dev
(vender) $ ... update third party libraries ...
(vender) $ git commit -am '...'
(vender) $ git checkout dev
(dev) $ git merge vender 
```

这样，我首先将整个合并`dev`到`vender`，然后在更新后`vender`，将其合并回`dev`. 这样做是将所有历史记录带入`vender`与更新第三方库无关的分支中。**我想让我的`vender`分支中的日志仅包含有关更新第三方库的提交。**

我认为我在合并时是错误的`dev`（`vender`我认为所有代码都必须在每个分支中——因为我是一个 git noob）。

我的第一个问题是：

是否可以不合并`dev`并`vender`继续更新它（我想这样做会显示`vender`仅包含第三方更新提交的日志）

现在，在这一点上，我有一个非常脏的`vender`分支——它包含我所做的所有提交，`dev`与第三方代码无关。我现在应该怎么做才能让`vender`分支正确显示第三方更新相关的提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:41:28.160

是的，你不应该合并`dev`，`vender`因为这不是必需的。

1.  `git stash`您可能有任何未保存的更改，以防万一。
2.  `git reflog`查看您所做的所有更改的日志，包括更改分支等。该日志显示了您所做的所有事情，时间倒退，并且是解决此问题的主要工具。
3.  在日志中找到您运行的点`git merge dev`，然后从该点（较早）下方的行中获取 SHA，这可能会说`checkout: moving from dev to vendor`。
4.  `vendor`签出后，运行它将`git reset --hard <SHA>`回到`vendor`所有这一切发生之前的位置。
5.  查找您为更新第三方库所做的每个提交的日志行/SHA，然后运行`git cherry-pick <SHA>`以在`vender`.
6.  至此`vender`一切都修复了，但我们还需要回去修复`dev`。
7.  `git checkout dev`
8.  在日志中找到您已签出 dev 的点，这可能是您在步骤 3 中找到的 SHA 之前的那个点。
9.  运行`git reset --hard <SHA>`它以将 dev 放回原来的位置。
10.  `git merge vender``vender`正确合并`dev`。

此时，使用 GitX 或 gitk 来确保您的历史看起来合理可能也是一个好主意。并且请在执行此操作之前进行备份以防万一:)

或者对于 steps`3.`和，如果您还没有将任何这些更改推送回服务器`9.`，您可能能够运行`git reset --hard origin/vender`，假设您有一个服务器。`git reset --hard origin/dev`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:28:37.883

你做了合并而不是变基，对吗？要清理供应商分支，您应该能够执行`git reset <commit>`. 如果它是穿插的（听起来有点像），那将是一个令人头疼的问题。

你有什么方法可以区分供应商分支提交和开发提交吗？如果是这样，您可以尝试交互式 rebase 来删除错误的提交。类似的东西`git rebase -i <commit>`会让你开始。

# symfony - 无法在学说2 symfony2中使用多个连接来检索用户的类别

> ID：12033659
> 
> 赞同：1
> 
> 时间：2012-08-20T07:21:42.357
> 
> 标签：symfony, doctrine-orm, many-to-many, dql

我创建了一个数据库和一个管理用户、来宾、类别的包：

*   一个用户可以有很多客人
*   一个客人可以属于许多类别
*   许多客人（用户的）可以属于一个类别
*   一个用户可以有很多类别

我已将关系设置如下：

```
User -> OneToMany -> Guests  
Guests <-> ManyToMany <-> Categories  
User -> OneToMany -> Categories 
```

来宾实体

```
class Guest
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
    * @ORM\ManyToOne(targetEntity="Acme\SomethingBundle\Entity\User", inversedBy="guests")
    * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
    */
    protected $user;

    /**
    * @ORM\ManyToMany(targetEntity="Category", inversedBy="guests")
    * @ORM\JoinTable(name="guests_categories")
    */
    protected $categories; 
```

用户实体

```
class User implements UserInterface
{
    /**
     * @ORM\Column(type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
    * @ORM\OneToMany(targetEntity="Acme\SomethingBundle\Entity\Guest", mappedBy="user")
    */
    protected $guests;

    /**
    * @ORM\OneToMany(targetEntity="Acme\SomethingBundle\Entity\Category", mappedBy="user")
    */
    protected $categories; 
```

类别实体

```
class Category
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
    * @ORM\ManyToOne(targetEntity="Acme\SomethingBundle\Entity\User", inversedBy="categories")
    * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
    */
    protected $user;

    /**
    * @ORM\ManyToMany(targetEntity="Guest", mappedBy="categories")
    */
    protected $guests; 
```

用户必须只能查看他的客人和类别 - 他们没有共享或其他东西。我已使用 DQL 查询成功检索到用户的客人及其类别的列表。

```
public function indexAction()
    {

        $user = $this->get('security.context')->getToken()->getUser();
        $userId = $user->getId();

        $em = $this->getDoctrine()->getEntityManager();
        $query = $em->createQuery( "SELECT g, u, c
                                    FROM Acme\SomethingBundle\Entity\Guest g
                                    JOIN g.user u
                                    LEFT JOIN g.categories c
                                    WHERE u.id = :userId
                                    ORDER BY g.surname ASC");
        $query->setParameter('userId', $userId); 
        $entities = $query->getResult();

        return $this->render('AcmeSomethingBundle:Guest:index.html.twig', array(
            'entities' => $entities
        ));
    } 
```

和一个树枝界面：

```
{% block body %}
    {% for entity in entities %}
    <div class="guestBox">
            <div class="guestName" >{{ entity.surname }} {{ entity.name }}</div>
            {% for category in entity.categories %}
            {{ category.name }}
            {% endfor %}
        </div>
    </div>
    {% endfor %}
{% endblock %} 
```

哪里有问题 ？当我尝试编辑访客条目（树枝中的表单）时，所有类别都列在多选框中，即使是当前登录用户尚未创建的类别。我无法获取用户的特定类别：

```
public function editAction($id)
    {
        $user = $this->get('security.context')->getToken()->getUser();
        $userId = $user->getId();

        $em = $this->getDoctrine()->getEntityManager();
        $query = $em->createQuery( "SELECT g, c, u
                                    FROM AcmeSomethingBundle:Guest g
                                    JOIN g.user u
                                    LEFT JOIN g.categories c 
                                    WHERE u.id = :userId
                                    AND g.id = :guestId");
        $query->setParameter('guestId', $id)
              ->setParameter('userId', $userId);
        $entity = $query->getSingleResult();

        if (!$entity) {
            throw $this->createNotFoundException('Wrong guest id');
        }

        $editForm = $this->createForm(new GuestType(), $entity);
        $deleteForm = $this->createDeleteForm($id);

        return $this->render('AcmeSomethingBundle:Guest:edit.html.twig', array(
            'entity'     => $entity,
            'editForm'   => $editForm->createView(),
            'deleteForm' => $deleteForm->createView()        
            ));
    } 
```

和一个树枝模板：

```
{% block body %}

<form action="{{ path('guest_update', { 'id': entity.id }) }}" method="post" {{ form_enctype(editForm) }}>

        {{ 'guest.form.categories'|trans }}
        {{ form_errors(editForm.categories) }}
        {{ form_widget(editForm.categories) }}

        <button type="submit" class="btn guestSave">{{ 'guest.form.save'|trans }}</button>
</form>

{% endblock %} 
```

更多信息： Symfony 分析器显示许多查询：

```
SELECT t0.id AS id1, t0.username AS username2, t0.salt AS salt3, t0.password AS password4, t0.email AS email5, t0.is_active AS is_active6 FROM users t0 WHERE t0.id = ?
Parameters: ['2']

SELECT g0_.id AS id0, g0_.name AS name1, g0_.surname AS surname2, g0_.email AS email3, g0_.address AS address4, g0_.phone AS phone5, g0_.mobile AS mobile6, g0_.description AS description7, g0_.created_at AS created_at8, g0_.updated_at AS updated_at9, g0_.is_activated AS is_activated10, u1_.id AS id11, u1_.username AS username12, u1_.salt AS salt13, u1_.password AS password14, u1_.email AS email15, u1_.is_active AS is_active16, c2_.id AS id17, c2_.name AS name18, c2_.description AS description19, g0_.user_id AS user_id20, c2_.user_id AS user_id21 FROM guest g0_ INNER JOIN users u1_ ON g0_.user_id = u1_.id LEFT JOIN guests_categories g3_ ON g0_.id = g3_.guest_id LEFT JOIN category c2_ ON c2_.id = g3_.category_id WHERE u1_.id = ? AND g0_.id = ?
Parameters: ['2', '33']

SELECT t0.id AS id1, t0.name AS name2, t0.description AS description3, t0.user_id AS user_id4 FROM category t0
Parameters: { } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:58:21.107

可能您应该以更具体的方式定义哪些类别将传递给您的 GuestType 表单。

您可以通过将选项“query_builder”传递给表单的构建器来做到这一点。例如。在 GuestType 中将是这样的：

```
$builder->add(...)
        ->add('category', 'entity', array (
            ...
            'label' => 'Some label',
            'required' => false,
            'query_builder' => function(CategoryRepository $repository) use($user) {
                 // should return doctrine's QueryBuilder object to create query which returns categories for specified $user                      
            }))
        ->add(...); 
```

看这里：[http ://symfony.com/doc/current/reference/forms/types/entity.html#query-builder](http://symfony.com/doc/current/reference/forms/types/entity.html#query-builder)

# actionscript-3 - 保持球速box2d

> ID：12033669
> 
> 赞同：0
> 
> 时间：2012-08-20T07:22:29.963
> 
> 标签：actionscript-3, flash, actionscript, box2d

我正在使用此代码来创建和投掷球。我想提高球的速度，它应该保持速度直到它被破坏。我应该怎么做才能得到结果？

```
 var sphereShape:b2CircleShape=new b2CircleShape(15/worldScale);
            var sphereFixture:b2FixtureDef = new b2FixtureDef();
            sphereFixture.density=1;
            sphereFixture.friction=3;
            sphereFixture.restitution=0.1;
            sphereFixture.filter.groupIndex = -1;
            sphereFixture.shape=sphereShape;
            ball_mc=new ballMc();
            ballCont_mc.addChild(ball_mc);
            var sphereBodyDef:b2BodyDef = new b2BodyDef();
            sphereBodyDef.type=b2Body.b2_dynamicBody;
            ball_mc.name="throwBall";
            ball_mc.hitCount=0;
            ball_mc.basketHit=0;
            sphereBodyDef.position.Set(arrow_mc.x/worldScale,arrow_mc.y/worldScale);
            birdSphere=world.CreateBody(sphereBodyDef);
            birdSphere.CreateFixture(sphereFixture);girl_mc.gotoAndStop(3);
            birdSphere.SetUserData(ball_mc);
            birdSphere.SetBullet(true);
            var distanceX:Number=arrow_mc.x-mouseX;
            var distanceY:Number=arrow_mc.y-mouseY;
            var distance:Number=Math.sqrt(distanceX*distanceX+distanceY*distanceY);
            var birdAngle:Number=Math.atan2(distanceY,distanceX);
            birdSphere.SetLinearVelocity(new b2Vec2(distance*Math.cos(birdAngle)/4,distance*Math.sin(birdAngle)/4)); 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:02:05.527

给球一个 Speed 变量并使用类似于以下的函数：

```
function run(Self)
 {
   Self._x+=Math.sin(Self._rotation*(Math.PI/180))*Self.Speed/10;
   Self._y+=Math.cos(Self._rotation*(Math.PI/180))*Self.Speed/10*-1;
 }//------------------------------------------------------------^run 
```

调用运行（ball_mc）；您希望它移动的每一帧。

像保持速度一样保持 Speed 变量。

自我就是球。您首先需要根据它应该移动的方向来设置它的旋转，但这是一个不同的主题，所以我将节省空间并留下那部分。

我希望这有帮助。

# java - 假 javax.mail.Session

> ID：12033673
> 
> 赞同：4
> 
> 时间：2012-08-20T07:22:55.113
> 
> 标签：java, email, jakarta-mail

我有一个发送电子邮件的应用程序。但是在我的开发环境中，我不希望应用程序发送电子邮件，而应该只在日志文件中打印消息。

有一个假的`javax.mail.Session`实现，我可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T16:44:56.103

对于这个问题，我会使用一个`javax.mail.Transport`注册到 SMTP 协议的自定义。

首先实现CustomTransport类

```
import javax.mail.Transport;
import javax.mail.*;

public class CustomTransport extends Transport {

  public CustomTransport(Session smtpSession, URLName urlName) {
    super(smtpSession, urlName);
  }

  @Override
  public void sendMessage(Message message, Address[] addresses) throws MessagingException {
    // Take the message and write it somewhere
    // e.g.: a logger or an OutputStream message.writeTo(...);
  }

  @Override
  public void connect() throws MessagingException {}

  @Override
  public void connect(String host, int port, String username, String password) throws MessagingException {}

  @Override
  public void connect(String host, String username, String password) throws MessagingException {}

  @Override
  public void close() {}
} 
```

之后，您可以使用该 CustomTransport 创建一个`javax.mail.Session`将您的邮件写入定义的位置

```
public Session getMailSession(){
  Properties props = new Properties();
  props.put("mail.transport.protocol", "smtp");
  props.put("mail.smtp.provider.class", CustomTransport.class.getName());
  props.put("mail.smtp.provider.vendor", "foo");
  props.put("mail.smtp.provider.version", "0.0.0");

  return Session.getInstance(props);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T09:58:22.020

如果您想将本地**Tomcat**安装配置为使用假`Transport`实现，

Session 实现似乎只从 home lib 文件夹和类路径 META-INF/javamail.providers 加载配置，请参阅[Session](http://docs.oracle.com/javaee/6/api/javax/mail/Session.html) javadoc。

如果您使用**Tomcat JNDI**配置邮件会话，只需将带有一个文件的附加 JAR 文件复制`META-INF/javamail.providers`到 Tomcat lib 文件夹：

```
$ mkdir META-INF
$ echo 'protocol=smtp; type=transport; class=CustomTransport;' > META-INF/javamail.providers
$ jar cf custom-transport.jar META-INF
$ cp custom-transport.jar $TOMCAT/lib/ 
```

您可以将上述类`CustomTransport`放入同一个 Jar 或应用程序中的任何位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T07:35:59.143

不完全是您所要求的，但[GreenMail](http://www.icegreen.com/greenmail/)是 SMTP、POP3 和 IMAP 协议的测试实现。您可以从 JUnit 启动 GreenMail 服务器并查询收到的电子邮件。这样您就可以使用整个堆栈，但`javax.mail`使用`localhost`在某个任意端口上运行的假服务器。

该库在 Maven 中可用：

```
<dependency>
    <groupId>com.icegreen</groupId>
    <artifactId>greenmail</artifactId>
    <version>1.3.1b</version>
    <scope>test</scope>
</dependency> 
```

# wordpress - 似乎无法在 wordpress 中注册 jquery

> ID：12033675
> 
> 赞同：0
> 
> 时间：2012-08-20T07:23:13.800
> 
> 标签：wordpress

嗨，我最近正在学习开发 wordpress 主题，起初我添加了 jquery 脚本和其他类似这样的脚本：

```
<script src="<?php bloginfo('template_directory') ?>//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script> 
```

但是今天在做一些教程时发现这不是最好的做事方式，所以我开始在互联网上搜索并找到了如何做到这一点：

```
 function register_js(){
    wp_deregister_script('jquery');
    wp_register_script('jquery' , '//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js');
   }
add_action('init' , 'register_js'); 
```

但是由于某些原因，我页面上的所有脚本都说未定义 jQuery 或未定义 $。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:45:08.777

您缺少 wp_enqueue_script 函数。

详细在这里：[http ://codex.wordpress.org/Function_Reference/wp_enqueue_scrip](http://codex.wordpress.org/Function_Reference/wp_enqueue_scrip)

**WordPress 示例：**

```
<?php
function my_scripts_method() {
    wp_deregister_script( 'jquery' );
    wp_register_script( 'jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js');
    wp_enqueue_script( 'jquery' );
}    

add_action('wp_enqueue_scripts', 'my_scripts_method');
?> 
```

# java - 如果 y = 1 和 y = y++，为什么当我打印 y 时的值是 1？

> ID：12033676
> 
> 赞同：37
> 
> 时间：2012-08-20T07:23:24.000
> 
> 标签：java

> **可能重复：**
> [“x = x++”之后的 x 是什么？](https://stackoverflow.com/questions/7911776/what-is-x-after-x-x)

```
int y = 1;
y = y++;
System.out.println("Value Of y :"+y); 
```

输出是 y 的值：1

我正在增加 y 并再次将其分配给“y”。y++ 因此首先使用该值，然后递增该值。因此它分配值并递增。所以我认为输出是2。

```
int y = 1;
int x = y++;
System.out.println("Value Of x :"+x);
System.out.println("Value Of y :"+y); 
```

输出为：
x 的值：1
y 的值：2

在这种情况下，它正在工作。我的意思是我认为的方式是正确的。

任何人都可以向我解释为什么吗？

# jquery - Twitter 引导药丸

> ID：12033677
> 
> 赞同：-1
> 
> 时间：2012-08-20T07:23:35.093
> 
> 标签：jquery, twitter-bootstrap

我正在使用 Twitter Bootstarp 药丸，这是我的 HTML 代码：

```
 <ul class="nav nav-pills">
    <li class="active"><a data-toggle="pill" href="#one">ONE</a></li>  
    <li><a data-toggle="pill" href="#two">TWO</a></li>
    <li><a data-toggle="pill" href="#three">THREE</a></li>
  </ul>

  <div id="one">
    div one content
  </div>

  <div id="two">
    div two content
  </div>

  <div id="three">
    div three content
  </div> 
```

此代码显示选项卡药丸，并在单击它时选择药丸，但不显示与锚标记的 href 属性对应的 div。

[http://webdesigntutsplus.s3.amazonaws.com/tuts/319_bootstrap_pills_tabs/Tabs-Pills-BEGIN/tabs-pills.html](http://webdesigntutsplus.s3.amazonaws.com/tuts/319_bootstrap_pills_tabs/Tabs-Pills-BEGIN/tabs-pills.html)

请指导我。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:57:02.300

终于得到了答案。我的 HTML 代码格式不正确。实际上我正在寻找这个 ![实际上我正在寻找这个](../Images/d4e384eac3a6d7ea3168c8a806b66bec.png)
。无论如何，谢谢你的回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:44:55.780

如果你想要“Tabbable nav”，你必须包含一个单独的 jQuery 插件。用法描述[here](http://twitter.github.com/bootstrap/javascript.html#tabs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T07:50:53.850

是的，您需要更改相关内容的标记以将选项卡链接到页面。

这是一个显示选项卡工作的小提琴：http: [//jsfiddle.net/rJxmc/](http://jsfiddle.net/rJxmc/)

# iphone - 强属性和弱属性有什么区别？

> ID：12033678
> 
> 赞同：4
> 
> 时间：2012-08-20T07:23:51.297
> 
> 标签：iphone, ios5, properties

因为强和弱属性是 iOS 5 中的新特性。如果有人告诉我什么时候使用哪个属性。

什么时候应该使用strong，什么时候应该使用weak？

```
@property(nonatomic,strong)

@property(nonatomic,weak) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:12:36.270

查看有关[自动引用计数 (ARC)的 Apple 文档](https://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

如果你没有时间阅读它：

> ARC 为对象和弱引用引入了几个新的生命周期限定符。弱引用不会延长它所指向的对象的生命周期，并且当对象没有强引用时会自动变为 nil。
> 
> **强**是默认值。只要有一个指向它的强指针，一个对象就保持“活动”。
> 
> **弱**指定不保持被引用对象活动的引用。当对象没有强引用时，弱引用设置为 nil。

由于 iOS 5 ARC 自动取消弱链接，当一个对象被卸载时，它的对象层次结构自动设置为 nil。因为这个原因，`Weak`是所有`outlet`属性的推荐关系。这些视图对象已经是视图控制器的视图层次结构的一部分，不需要保留在其他地方。声明你的 outlet 弱的最大好处是它可以节省你编写 viewDidUnload 方法的时间。

[查看有关内存管理](http://humblecoder.blogspot.ch/2009/08/iphone-tutorial-memory-management.html)的非常详细的文档。它在 ARC 之前，但它会帮助您了解内存管理。属性的 retain 关键字仍然适用于 ARC，并且只是 strong 的同义词。或另一个特定的[ARC 教程](http://www.raywenderlich.com/5773/beginning-arc-in-ios-5-tutorial-part-2)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T07:26:22.827

`strong`很像`retain`，`weak`很像`assign`。主要区别在于`weak`属性`nil`在分配给它们的对象被释放时转向。

例如：

```
@property (nonatomic, weak) id test;

...

- (void)example
{
    id foo = [[NSObject alloc] init];
    self.test = foo;
    foo = [[NSObject alloc] init];
    assert(self.test == nil);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T07:27:33.603

`Strong`意思是只要这个属性指向一个对象，那个对象就不会被自动释放。在非 ARC 中，它是`retain`.

`Weak`相反，意味着该属性指向的对象可以自由释放，但前提是它将属性设置为`nil`. 在 ARC 中，您使用 weak 来确保您不拥有它指向的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-11T08:46:57.503

**强弱之间有以下区别。**

1.如果我们声明变量strong，那么编译器直到内存中的Application实例才会释放它。当我们将nil值设置为该引用时，它会被编译器释放，默认情况下任何局部变量都是强变量。例如：- var str = "hello world"

如果我们设置 str = nil 那么它就会被释放。

2.如果我们将变量声明为强变量，那么它会被其他实例（类）保留，并且保留计数增加 1。

**弱属性。**

1.当我们声明弱属性时，它只包含数据/实例地址，直到强引用在内存中，如果强变量引用被释放，它会自动设置为零。

例如：- var str = "hello world" 弱 var stringVar = str

假设 str 包含 200 个堆地址并且我们设置 str = nil，然后编译器自动将弱属性引用设置为 nil。

**所以这就是在 stoary board ref 控制器中的原因，主视图只设置为强而其他是弱的，例如我们可以看到 UIButton、UILabel 等**

# svn - VisualSVN 和 Eclipse

> ID：12033680
> 
> 赞同：1
> 
> 时间：2012-08-20T07:24:01.250
> 
> 标签：svn, visualsvn-server, subversive

我在 Windows Server 2008 机器上安装了 VisualSVN。我是否必须更改防火墙设置以及如何更改？

顺便问一下，可以使用 Subversive 插件连接吗？我已经安装了 Subversive 插件和连接器。

当我输入存储库位置时，它总是给我一条错误消息。我怎么解决这个问题？

![指定存储库位置](../Images/72ab29b193dc02d01b5d5ae9e2b837aa.png)

![错误信息](../Images/1c2a189c1fe23c154644d8e795034555.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:16:08.943

您似乎输入了错误的存储库 URL。网址应该是`https://192.168.8.88/svn/repos`

当然，在从 Eclipse 连接之前，您必须在 VisualSVN 服务器管理器中创建存储库。

# algorithm - nPegs > 3 的河内塔（儿童游戏更轻松）

> ID：12033681
> 
> 赞同：0
> 
> 时间：2012-08-20T07:24:02.260
> 
> 标签：algorithm, math

我有一套 3 个用于 Hanoi Towers 游戏的钉子：

```
int[][] pegs = new int[N_PEGS][N_DISCS]; 
```

所以 peg 1 是`pegs[0]`， peg2 是`pegs[1]`， peg3 是`pegs[2]`。

鉴于`id`两个挂钩位置，我需要得到`id`另一个，因此：

```
if (startFromPeg == 0 && endAtPeg == 1) {
    useAsTempPeg = 2;
} 
```

换句话说，在集合 S = {0, 1, 2} 中，我希望在考虑参数 {s1, s2} 后留下元素。

对于一组 3 个钉子，我可以通过简单的数学来做到这一点，除非我弄错了：

```
useAsTempPeg = N_PEGS - startFromPeg - endAtPeg; 
```

这似乎总是给出正确的结果：

```
3 - 0 - 1 = 2 (ok)
3 - 0 - 2 = 1 (ok)
3 - 1 - 2 = 0 (ok) 
```

我怎样才能使这个公式通用并玩游戏`N_PEGS > 3`？（那样会是一个更容易的游戏，但这是故意的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:27:42.347

您可以使用 {Sum_of_peg_indices} - {Sum_of_pegs_selected}。所以对于 3 你有 (0+1+2)=3={Sum_of_peg_indices} ，所以你得到了你提到的公式。

# android - SSRS 网页的 Monodroid WebView 身份验证

> ID：12033689
> 
> 赞同：6
> 
> 时间：2012-08-20T07:24:22.393
> 
> 标签：android, security, webview, xamarin.android

我曾两次尝试通过身份验证访问网站，但我不确定我的尝试有什么问题。我会一一列举。有没有人试过这个并让它工作？

这对于 Java Android 程序员来说应该不难理解，我使用 monodroid *EDIT*也不重要（这很重要，因为我在下面有一个运行良好的 Java 实现）*END EDIT*。

我正在尝试通过 WebView 访问 SSRS RDL，我需要插入一些通用凭据。

**活动：**

```
 public static string username = "...";
    public static string password = "...";
    public static string website  = "http://10.0.0.5/Reports";

    private WebView webView;

    private void setupWebView(int attempt)
    {
        webView.Settings.JavaScriptEnabled = true;
        webView.Settings.BlockNetworkLoads = false;

        switch (attempt)
        {
            case 1:
                {
                    webView.SetHttpAuthUsernamePassword(website, "", username, password);                                              
                }break;
            case 2:
                {
                    webView.SetWebViewClient(new AuthenticationClient(this));                        
                }break;
        }
        webView.LoadUrl(website);
    }

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        webView = new WebView(this);

        setupWebView(1);//1 or 2 depending on what I am testing

        // Set our view from the "main" layout resource
        SetContentView(webView);           
    }
} 
```

**身份验证客户端：**

```
 //DECLARED IN ANOTHER FILE
    [Android.Runtime.Register("android/webkit/WebViewClient", DoNotGenerateAcw = true)]
    public class AuthenticationClient:WebViewClient
    {
        private Context _context;

        public AuthenticationClient(Context context)
        {
            _context = context;
        }

        public override void OnReceivedError(WebView view, ClientError errorCode, string description, string failingUrl)
        {
            Toast.MakeText(_context, "OnReceivedError: " + errorCode, ToastLength.Long);
            //base.OnReceivedError(view, errorCode, description, failingUrl);
        }

        public override void OnPageStarted(WebView view, string url, Android.Graphics.Bitmap favicon)
        {
            Toast.MakeText(_context, "OnPageStarted: " + url, ToastLength.Long);
            //base.OnPageStarted(view, url, favicon);
        }

        public override bool ShouldOverrideUrlLoading(WebView view, string url)
        {
            Toast.MakeText(_context, "ShouldOverrideUrlLoading: " + url, ToastLength.Long);
            view.LoadUrl(url);
            return true;
        }

        public override void OnReceivedHttpAuthRequest(WebView view, HttpAuthHandler handler, string host, string realm)
        {
            Toast.MakeText(_context, "OnReceivedHttpAuthRequest: " + host, ToastLength.Long);
            handler.Proceed(Activity1.username, Activity1.password);
        }
    }
    //END DECLARATION 
```

尝试 1：它甚至不尝试加载页面。我不断收到错误消息：
**chromium(18710): external/chromium/net/http/http_auth_gssapi_posix.cc:463: [0821/095922:WARNING:http_auth_gssapi_posix.cc(463)] 无法找到兼容的 GSSAPI 库**

尝试 2：不显示单个 toast 消息。

我已经看过： http:
[//developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)
[Using WebView setHttpAuthUsernamePassword?](https://stackoverflow.com/questions/2585055/using-webview-sethttpauthusernamepassword)
[WebView.setHttpAuthUsernamePassword() 不工作？](https://stackoverflow.com/questions/3134793/webview-sethttpauthusernamepassword-not-working)
[从 Web 应用程序将用户名和密码传递给 SSRS 2005 报告](https://stackoverflow.com/questions/8731679/passing-username-and-password-to-ssrs-2005-reports-from-web-application)

**其他**
东西 我现在已经用 Java 完成了它，它工作正常。我仍然需要一个 Mono for Android 解决方案：

```
public class Android_reporttestActivity extends Activity {
public static String username = "...";
public static String password = "...";
public static String website = "http://10.0.0.5/Reports";       

private WebView setupWebView()
{
    WebView webView = new WebView(this); 

    webView.setWebViewClient(
        new WebViewClient(){
            public void onReceivedHttpAuthRequest(WebView view, HttpAuthHandler handler, String host, String realm)
            {                           
                handler.proceed(username,password);
            }
        }
    );

    return webView;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    WebView webview = setupWebView();

    // Set our view from the "main" layout resource
    setContentView(webview);

    webview.loadUrl(website);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:33:32.247

为我运行以下命令可以让一切按预期工作：

```
[Activity (Label = "WebViewExample", MainLauncher = true)]
public class Activity1 : Activity
{
    string url;
    WebView mWebView;

    protected override void OnCreate (Bundle bundle)
    {
        base.OnCreate (bundle);

        // Set our view from the "main" layout resource
        SetContentView (Resource.Layout.Main);

        url = "http://awebsite.com"; 
        mWebView = (WebView)FindViewById<WebView> (Resource.Id.webview);
        mWebView.SetWebViewClient (new ViewClient (this));
        mWebView.Settings.JavaScriptEnabled = (true);
        mWebView.Settings.PluginsEnabled = (true);
        mWebView.LoadUrl (url);
    }

    class ViewClient : WebViewClient
    {
        Activity1 _activity;

        public ViewClient(Activity1 activity)
        {
            _activity = activity;   
        }

        public override void OnPageStarted (WebView view, string url, Android.Graphics.Bitmap favicon)
        {
            Console.WriteLine ("On Page Started");
        }

        public override void OnReceivedHttpAuthRequest (WebView view, HttpAuthHandler handler, string host, string realm)
        {
            Console.WriteLine ("On received Http auth request");
            handler.Proceed("username", "password");
        }

        public override bool ShouldOverrideUrlLoading (WebView view, string url)
        {
            Console.WriteLine ("Should Override Url Loading...");
            return base.ShouldOverrideUrlLoading (view, url);
        }
    }
} 
```

你的 toast 没有显示的原因可能是因为你没有在它们上调用“.Show()”，所以它们永远不会显示。

如果您仍然无法启动并运行它，那么提供一个我们可以用来攻击的 URL 将非常有用。

我希望这有帮助，

克里斯NTR

# sql - Oracle sql order by with character in order

> ID：12033690
> 
> 赞同：0
> 
> 时间：2012-08-20T07:24:24.937
> 
> 标签：sql, oracle, select, sql-order-by

美好的一天，也许有人可以帮助我，我想在 oracle sql 上获得 n 选择输出，但是当我订购时它是不正确的。

```
code_order
1.
2.
2.1
3.
4.2
10.1
10.0
21.
21.1
23.
31. 
```

它需要按数字排序，并且所有值都有一个句号`.`

有任何想法吗？？

谢谢，但我看到某些值可以包含非数值以及 C、B 等。

1.  1.  1.  1.  1.  1.  1.  1.  1.  1.  7C。40\. 50\. 51\. 6.

表格大纲：

code_order 是 varchar2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:39:49.430

```
 with
    val as
    (
      SELECT '1.' as c FROM dual
      union all
      SELECT '2.' as c FROM dual
      union all
      SELECT '3.' as c FROM dual
      union all
      SELECT '2.1' as c FROM dual
      union all
      SELECT '4.2' as c FROM dual
      union all
      SELECT '10.1' as c FROM dual
      union all
      SELECT '21.' as c FROM dual
      union all
      SELECT '10.0' as c FROM dual
      union all
      SELECT '21.1' as c FROM dual
      union all
      SELECT '23.' as c FROM dual
      union all
      SELECT '31.' as c FROM dual
    )
SELECT c FROM val
order by to_number(regexp_replace(c, '^(\d+)\..*$', '\1'))
    ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:29:17.320

利用`order by to_number(code_order)`

# android - 使用适用于 android 的 opengl ES 渲染两个不同的对象

> ID：12033693
> 
> 赞同：1
> 
> 时间：2012-08-20T07:24:27.383
> 
> 标签：android, opengl-es

在我的程序中，我正在渲染一个简单的三角形和一个带纹理的立方体，分别都可以正常工作，但是当我一起调用各自的绘制方法时，立方体的纹理不显示。

onSurfaceCreated 函数如下图所示：

```
public void onSurfaceCreated(GL10 gl, EGLConfig eglConfig) {
        cub.loadGLTexture(gl, this.context);
        //gl.glEnable(GL10.GL_TEXTURE_2D);            
        gl.glShadeModel(GL10.GL_SMOOTH);            
        gl.glClearColor(0.5f, 0.5f, 0.5f, 0.5f);    
        gl.glClearDepthf(1.0f);                    
        gl.glEnable(GL10.GL_DEPTH_TEST);           
        gl.glDepthFunc(GL10.GL_LEQUAL);            
        gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST); 
} 
```

onDrawFrame 如下图所示：

```
public void onDrawFrame(GL10 gl) {
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();
    GLU.gluLookAt(gl, 0, 0, -5, 0, 0, 0, 0, 2, 0);
    tri.draw(gl);       
    gl.glRotatef(-90, 1, 0, 0);
    gl.glTranslatef(-6, 0, 0);
    cub.draw(gl); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:24:55.537

我得到了答案。实际上，在将 3D 模型绑定到纹理之前，我只需要清除 2D 模型的颜色即可。谢谢大家。

# php - PHP ，读取通过 cURL 发送的 XML 文件

> ID：12033699
> 
> 赞同：3
> 
> 时间：2012-08-20T07:25:18.117
> 
> 标签：php, xml, url, curl, readxml

我有这段代码，我通过 cURL 将 XML 文件中的数据发送到新闻办公室。现在我想从媒体那里得到我的订单已确认或完成的反馈。我也想把它放在一个 XML 文件中。我知道如何通过 curl 发送文件，现在我想知道如何接收它们，以便读出数据。欢迎任何建议。

这就是我发送 XML 的方式：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $incomm_prod_server);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 4);
curl_setopt($ch, CURLOPT_POSTFIELDS, str_replace('{voucher_code}', $voucher_code, $xml_data));
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Connection: close')); 
```

所以这就是我为获取 XML 而做的事情：

> ```
>  $ch = curl_init();
>     curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
>     curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 5);
>     $result_xml = simplexml_load_string(curl_exec($ch)); 
> ```

但是我得到了 bool(false) 作为结果，所以没有发送 xml？

编辑：我可以像这样访问数据：

> ```
>  if ( $_SERVER['REQUEST_METHOD'] === 'POST' ){
>         $postText = file_get_contents('php://input');
>     }
>     die(var_dump($postText)); 
> ```

我上次编辑了一个，也许它会帮助其他人，我现在以这种方式访问​​我的 xml：

```
 if ( $_SERVER['REQUEST_METHOD'] === 'POST' ){
            $postText = file_get_contents('php://input');
        }
        $xml = new SimpleXMLElement($postText);
        $packing_number = $xml->xpath('/feedback/packing_number');
        $packing_status = $xml->xpath('/feedback/packing_status'); 
```

这会给你一个数组，你可以像这样访问它：

> $packing_number[0]

或者只是循环通过它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:30:57.333

好的，所以您在上面发布的代码并没有*真正*发送 XML 文件。它所做的只是将该 XML 文件的内容放入`$_POST`附加到请求的变量中。

要接收数据（另一方面），您所要做的就是查看`$_POST`变量，并且您的 XML 数据应该在那里。您将设置一个脚本并将数据发布到它（可能使用您在上面使用的相同方法），并且您可以访问内容。

# jquery - jQueryMobile：更改页面并刷新

> ID：12033701
> 
> 赞同：0
> 
> 时间：2012-08-20T07:25:22.003
> 
> 标签：jquery, jquery-mobile

我有一个多页 jquerymobile 网站，第一页上有一个列表。列表的每个元素都指向第二页，其内容取决于按下的列表元素。具体来说，我在第一页中有一个“位置”列表，在第二页中有特定位置的详细信息。

```
<ul id="location_list" data-role="listview">
    <li><a href="#location_page" data-id="1231">Location 1</a></li>
    <li><a href="#location_page" data-id="4056>Location 2</a></li>
    <li><a href="#location_page" data-id="7569">Location 3</a></li>
</ul> 
```

其中 data-id 属性是位置标识符。为了传递参数，我在列表元素上添加了一个 jQuery 函数，该函数找出按下的元素 data-id 值并将其存储在窗口变量中的一个变量中，然后再调用下一页。

```
$('#location_list').find("a").live("click",function(event){
    window.location_id = $(this).data("id");
}); 
```

第二页将读取 window.location_id 中的值并显示正确的内容。

一切正常，直到我刷新第二页。如果我这样做，我用来传递参数的变量（正确）为空，并且没有加载任何内容。我尝试在页面的 URL 中传递值（使用 href="#location_page?locid=1231" 链接列表）并解析 document.location 值，但它在逐页迭代中不起作用（如果我打印第二页的 URL 我只有“#location_page”而不是“#location_page?locid=1231”）

谁能帮我解决我的问题？也许有更好的方法在页面之间传递参数或使传递参数工作的方法。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:36:09.427

有更好的方法来传递参数。

`jQuery.data()`通过将数据附加到 DOM 来工作（就像您对`id`:所做的那样`<a ... data-id=""></a>`）。因为 jQuery Mobile 从不刷新并使用 AJAX 进行页面切换，所以该数据在整个移动应用程序/网站中都可用，但是一旦页面刷新，DOM 就会重新加载，并且它对之前附加的数据一无所知。

我认为你应该做的是以下几点。`locations.html`为列表创建一个页面，`location-details.html`为特定位置的详细信息创建一个页面。然后您可以轻松地通过 URL 传递数据。

例子：

```
<!-- locations.html -->
...
<ul id="locations_list" data-role="listview">
    <li>
        <a href="location-details.html?id=1">Location 1</a>
    </li>
    <li>
        <a href="location-details.html?id=2">Location 2</a>
    </li>
    <li>
        <a href="location-details.html?id=3">Location 3</a>
    </li>
    <li>
        <a href="location-details.html?id=4">Location 4</a>
    </li>
    <li>
        <a href="location-details.html?id=5">Location 5</a>
    </li>
</ul>
...

<!-- location-details.html -->
...
<script type="text/javascript">
    $(document).on('pageinit', function () {
        function setupLocationDetails () {
            var location_id = $.mobile.path.parseUrl($(location).attr('href')).search.replace('?id=', '');

            // Do whatever you need to do here.
        }

        setupLocationDetails();
    });
</script>
... 
```

# iphone - 如何使用 kAudioUnitSubType_LowShelfFilter 的 kAULowShelfParam_CutoffFrequency 参数来控制 Core Audio 中的低音？

> ID：12033705
> 
> 赞同：1
> 
> 时间：2012-08-20T07:25:46.290
> 
> 标签：iphone, objective-c, ios, core-audio, bass

在回答我的这个问题之前，您一定已经经历过这些。[如何使用 kAudioUnitType_Effect 的 kAudioUnitSubType_LowShelfFilter 来控制核心音频中的低音？](https://stackoverflow.com/questions/11881987/how-to-use-kaudiounitsubtype-lowshelffilter-of-kaudiounittype-effect-which-contr)缓慢而稳定地为音乐的低音控制做好准备。但还没有达到我的目标。现在我知道我必须改变**kAULowShelfParam_CutoffFrequency**来改变**低音**。

我在 5 到 7 天之前使用的以下代码。此代码可以正确播放音乐，但不能正确更改低音。看看这个代码片段： -

```
 - (void)awakeFromNib
{
printf("AUGraphController awakeFromNib\n");

mIsPlaying = false;

// clear the mSoundBuffer struct
memset(&mUserData.soundBuffer, 0, sizeof(mUserData.soundBuffer));

// create the URLs we'll use for source A and B
NSString *sourceA = [[NSBundle mainBundle] pathForResource:@"04 - Second Hand Jawaani - [rKmania.com]" ofType:@"mp3"];
NSString *sourceB = [[NSBundle mainBundle] pathForResource:@"Track2" ofType:@"mp4"];
sourceURL[0] = CFURLCreateWithFileSystemPath(kCFAllocatorDefault, (CFStringRef)sourceA, kCFURLPOSIXPathStyle, false);
sourceURL[1] = CFURLCreateWithFileSystemPath(kCFAllocatorDefault, (CFStringRef)sourceB, kCFURLPOSIXPathStyle, false);
[bassSlider addTarget:self action:@selector(selectEQPreset) forControlEvents:UIControlEventValueChanged];
}

// output unit
CAComponentDescription output_desc(kAudioUnitType_Output, kAudioUnitSubType_RemoteIO, kAudioUnitManufacturer_Apple);

// iPodEQ unit
CAComponentDescription eq_desc(kAudioUnitType_Effect, kAudioUnitSubType_AUiPodEQ, kAudioUnitManufacturer_Apple);

// multichannel mixer unit
CAComponentDescription mixer_desc(kAudioUnitType_Mixer, kAudioUnitSubType_MultiChannelMixer, kAudioUnitManufacturer_Apple);

printf("add nodes\n");

- (void)selectEQPreset;
{
AUPreset *aPreset = (AUPreset*)CFArrayGetValueAtIndex(mEQPresetsArray, value);
OSStatus result = AudioUnitSetProperty(mEQ, kAudioUnitProperty_PresentPreset, kAudioUnitScope_Global, 0, aPreset, sizeof(AUPreset));
if (result) { printf("AudioUnitSetProperty result %ld %08X %4.4s\n", result, (unsigned int)result, (char*)&result); return; };

printf("SET EQ PRESET %d ", value);
CFShow(aPreset->presetName);
} 
```

现在在这段代码之后，我知道我必须改变频率来改变低音，然后我使用下面的代码片段，但在下面的代码片段中，音乐没有播放并且它也给出了**excess_bad**。我只是在写我对代码所做的更改。看看当前的代码片段：-

```
// iPodEQ unit
CAComponentDescription eq_desc(kAudioUnitType_Effect, kAudioUnitSubType_LowShelfFilter, kAudioUnitManufacturer_Apple);

- (void)selectEQPreset;
{
AudioUnit lowShelfAU;
assert(lowShelfAU);
float frequencyInHz = 120.0f;
frequencyInHz = bassSlider.value;
OSStatus result = AudioUnitSetParameter(lowShelfAU,kAULowShelfParam_CutoffFrequency,kAudioUnitScope_Global,0,frequencyInHz,0);
if (noErr != result) 
{
    assert(0 && "error!");
    return ;
}
} 
```

**我现在正在使用这段代码，但这并没有改变频率。它甚至停止播放音乐并在这行代码上给出excess_bad错误..**

```
 AudioUnitSetParameter(lowShelfAU,kAULowShelfParam_CutoffFrequency,kAudioUnitScope_Global,0,frequencyInHz,0); 
```

请任何人帮助我，告诉我如何更改 kAULowShelfParam_CutoffFrequency 以便我可以通过滑块调整音乐的低音。任何有关这方面的帮助都将是非常可观的。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T02:59:17.483

`如您所知，苹果根据其用途创建了 3 个音频单元。remoteIO --> 用于输入和输出；mixer --> 用于混音器；对于某些音频效果是 eq 和 Filter 所以，如果您想切断音频频率，您需要创建一个过滤器单元并将它们连接在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:53:30.733

在您可以使用之前，`AudioUnit`您需要创建它。如果您使用的是，`AUGraph`您的代码将类似于：

```
AudioComponentDescription filterDescription = { kAudioUnitType_Effect, kAudioUnitSubType_LowShelfFilter, kAudioUnitSubType_LowShelfFilter, 0, 0 };

AUNode filterNode = -1;
OSStatus result = AUGraphAddNode(mAUGraph, &filterDescription, &filterNode);
if(noErr != result) {
    // Handle error
}

AudioUnit filterUnit = nullptr;
result = AUGraphNodeInfo(mAUGraph, filterNode, nullptr, &filterUnit);
if(noErr != result) {
    // Handle error
}

// Set parameters on filterUnit 
```

您的代码失败的原因是该行

```
AudioUnit lowShelfAU; 
```

`lowShelfAU`用未确定的值初始化。An`AudioUnit`是指针类型，因此无需初始化，它就指向未知的内存区域。我认为在声明变量时始终初始化变量是一种编程最佳实践，以捕获这些类型的错误：

```
AudioUnit lowShelfAU = nullptr; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T07:31:07.410

```
`AudioUnit lowShelfAU;` <-- that is an uninitialized garbage value 
```

您需要实际创建一个 AU 实例（Low Shelf）并将其添加到 AUGraph。

注意：编译器/分析器将为您识别此问题。我建议人们将警告级别调高，然后构建、分析和删除所有问题。重复直到干净。

# io - 使用 Scanf + input + enter 从标准输入进行双重输入，如何刷新？

> ID：12033708
> 
> 赞同：0
> 
> 时间：2012-08-20T07:25:57.277
> 
> 标签：io, go, stdin

我正在使用 Go 的便携式解压缩版本！每当我尝试使用 Scanf（以及相关函数）进行输入输出控制台实现时，插入运行时输入并使用 enter 进行验证时，程序的行为（它是一个循环）就像我输入了两次或三次一样。显然（就像在 C 中一样）调用读取函数后需要清除标准输入，但我不知道该怎么做。我似乎是唯一一个遇到这个愚蠢的基本问题的人（为什么？）

在这个无休止的循环程序中，即使在我糟糕的冲洗尝试之后，这个问题也会被问和回答 3 次：

```
package main
import "fmt"
import "time"
var globalBad, globalGood int
func Thread1() {
    var i int
    var t string
    for {
    fmt.Println("Please give I")
    fmt.Scanf("%d", &i)
    fmt.Println(t);
    flush();
    globalBad = i;
    //fmt.Println(i);
    time.Sleep(1000 * time.Millisecond);
    fmt.Println("Meet globalGood %f", globalGood )
    if i == 12 {return};
    }

}

func Endless(){
    var LocalBad int ;

for{
    if LocalBad != globalBad{
        LocalBad = globalBad;
        globalGood = globalBad*2;
        }
    time.Sleep(1000 * time.Millisecond);
}
}

func flush(){
    var i byte
    for i > 0{
    fmt.readByte(i, var j);
    }
    fmt.Println("Done");
}

func main() {
    globalBad = 0;
    go Thread1();
    Endless();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:32:41.877

我无法编译您的代码。真正有问题的线是`fmt.readByte(i, var j)`线。没有`fmt.readByte`功能，如果有也不会导出。该`var j`部分只是无效的。

此外，您在 goroutine 之间共享内存，但不以任何方式同步（例如通道）。这会导致各种奇怪的事情发生。

请修复你的代码（最好是 gofmt），我可以给你更具体的建议。

# javascript - jQuery 切换（）

> ID：12033712
> 
> 赞同：-4
> 
> 时间：2012-08-20T07:26:07.963
> 
> 标签：javascript, jquery

我正在观看使用 JQuery 切换的教程，我想在我的网站上使用它，但问题是我想在页面加载时将 div 隐藏起来，所以当有人访问该页面时，它只是一个按钮说一些文本以显示内容，当单击该按钮时，然后切换并显示内容，但由于我是新手，我不知道如何停止其默认打开状态：

```
function random_script(element,speed){
$(element).toggle(speed);
}

<input type="button" value"Show Results?" onClick="random_script('#somediv',1000);"/>
<div id="somediv"></div> 
```

那么有什么解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T07:34:23.390

```
<a href="javascript:void(0)" onClick="random_script('#somediv',1000);">Show Results?</a>
<div id="somediv" style="display:none;"></div> 
```

使用 JQuery ( [jsfiddle](http://jsfiddle.net/NyDXk/) ) 替代：

```
<script type="text/javascript">
    ​$('.showResult')​.click(function (){
        $(this).next('.result').toggle();
    });​​​​​​
</script>
<style>
    ​.result {
        display: none;
    }​
</style>

<a href="javascript:void(0)" class="showResult">Show Results?</a>
<div class="result">Some Result​​​​​​​​​​​​​​​​​​​​​​​​​​&lt;/div>​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T07:38:28.953

添加一个 CSS 规则

```
#somediv{ display:none;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T07:38:16.483

为了反转初始功能，`toggle()`您必须首先隐藏目标元素。您可以通过声明`#somediv{display:none}`它来实现这一点。

执行此操作时，`toggle()`将显示元素。

在这里，您有一个示例**[fiddle](http://jsfiddle.net/QhBKy/)**。

此外，您不应使用内联事件属性，而应使用真正的事件处理程序。

```
$("input").on("click".function(){
   random_script("#somediv",1000);
});

function random_script(element,speed){
    $(element).toggle(speed);
} 
```

是正确的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T07:28:27.667

你错过了`{}`for 功能。

```
function random_script(element,speed) {
  $(element).toggle(speed);
} 
```

# c# - Doxygen 没有记录枚举成员

> ID：12033713
> 
> 赞同：0
> 
> 时间：2012-08-20T07:26:08.270
> 
> 标签：c#, enums, doxygen

我正在尝试用 doxygen（1.8.0 版）记录具有一些枚举定义的 C# 代码。由于某种原因，它确实记录了枚举，但没有记录枚举的成员。

这是我的代码：

```
/// \file Test1.cs
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

///document for namespace
namespace testTheDoxygen
{

        /// <summary>
        /// Document for class
        /// </summary>
        public class Test1
        {

        /// <summary>
        /// Documentation for enum
        /// </summary>
        public enum ThisIsEnum
        {
            /// <summary>
            /// Document for member 1
            /// </summary>
            member1,

            /// <summary>
            /// Document for member 2
            /// </summary>
            member2
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:47:19.880

解决方案是更新 doxygen。我的示例代码适用于 1.8.2 版。

# php - 遍历内容并检索值

> ID：12033715
> 
> 赞同：0
> 
> 时间：2012-08-20T07:26:09.207
> 
> 标签：php, extract

我有一个这样的属性列表：

```
1000 Rope Bend Ter
Labelle, FL 33935
Hendry County
15811 Hendry Isles Blvd
Clewiston, FL 33440
Hendry County 
```

现在我需要提取第一行，并将其放在 MySQL 数据库中的地址字段下，然后提取城市（始终是第二行，后面有一个逗号），提取状态和 ZIP，将它们放在适当的 MySQL 列下.

因此，基本上，一个地址分 3 行，格式如上所示。地址、换行符、城市、州、邮政编码、换行符县（我不需要县信息）。

有人可以提示如何正确提取它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:37:34.957

***编辑***：更新了正则表达式

正则表达式`/^([^ ]+)\s*(.+)\s+([^,]+),\s*([^ ]+)\s*(.+)\s*(.+)/im`应该可以工作。

在 PHP 中使用它的方法是：

```
<?php
    $string = "1000 Rope Bend Ter\r\nLabelle, FL 33935\r\nHendry County\r\n15811 Hendry Isles Blvd\r\nClewiston, FL 33440\r\nHendry County";
    preg_match_all("/^([^ ]+)\s*(.+)\s+([^,]+),\s*([^ ]+)\s*(.+)\s*(.+)/im", $string, $matches);

    for ($i = 0; $i < count($matches[0]); $i++) {
        echo "Street number: " . $matches[1][$i] . "<br />";
        echo "Street name: " . $matches[2][$i] . "<br />";
        echo "City: " . $matches[3][$i] . "<br />";
        echo "State: " . $matches[4][$i] . "<br />";
        echo "Zip: " . $matches[5][$i] . "<br />";
        echo "County: " . $matches[6][$i] . "<br />";
        echo "<br /><br />";
    }
?> 
```

* * *

**输出：**

```
Street number: 1000
Street name: Rope Bend Ter 
City: Labelle
State: FL
Zip: 33935 
County: Hendry County

Street number: 15811
Street name: Hendry Isles Blvd 
City: Clewiston
State: FL
Zip: 33440 
County: Hendry County 
```

如果您需要解释正则表达式，请直说。

# c# - 当形式变得不可见时失去的价值

> ID：12033716
> 
> 赞同：0
> 
> 时间：2012-08-20T07:26:19.040
> 
> 标签：c#, winforms

我正在制作一个简单的向导。我创建了一个静态类来保存我的表单：

```
 namespace LABEL_AUTOMATION
    {
        static class ProjectHelper
        {
            public static Form1 frm1 = new Form1();
            public static Form2 frm2 = new Form2();
        }

    } 
```

对于form1的下一个按钮，我有以下代码：

```
 private void buttonNext_Click(object sender, EventArgs e)
    {
        this.Visible = false;
        ProjectHelper.frm2.Visible = true;
    } 
```

和 form2 的后退按钮的类似逻辑：

```
private void buttonPrevious_Click(object sender, EventArgs e)
{
    this.Visible = false;
    ProjectHelper.frm1.Visible = true;
} 
```

问题是当我在表单之间移动时，文本框等控件的值会被清除。

如何纠正它？

另外，当用户在表单之间切换时，我正在使用表单的可见更改事件来执行代码。但是，该事件在表单可见之前被触发。我可以使用其他任何活动吗？

**编辑：**我实际上并没有更改实际上创建和运行 Form1 的单独实例的 Program.cs 文件。所以我将代码更改为：

```
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    ProjectHelper.frm1.Show();
} 
```

但它给出了以下错误：

```
The type initializer for 'LABEL_AUTOMATION.ProjectHelper' threw an exception. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:33:50.590

为了解决您清除控件的问题，我将创建一个简单的 POCO 类来保存数据，并使用数据绑定将控件绑定到 POCO 类实例。这样，您在表单上输入的所有数据都会自动保存在 POCO 类中，当再次显示表单时，值会再次出现。

关于您的可见更改事件 - 一种选择是创建您自己的事件，并在表单中触发该事件。然后，您可以创建一个自动触发事件的基类。您在这个可见更改事件处理程序中到底在做什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T07:33:15.997

我认为您正在显示/隐藏不在`ProjectHelper`课堂上的表单实例。

你应该在 Main 做

```
ProjectHelper.frm1.Show(); 
```

或者

```
ProjectHelper.frm2.Show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T07:32:41.213

我不知道这个问题，但我认为，您可以在使其不可见之前将所有值保存在一些变量中，并在您的表单再次可见时加载此设置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T07:34:08.257

您必须将值保存在外部类中，或者在值更改时将值填充到两个表单元素中。

您可以使用事件`TextChanged`或`ValueChanged`在控制元素中，然后以其他形式设置值。或者使用外部类，您在其中设置值，每次切换时，您都必须从外部类重新加载值。

**提示**：我不会使用超过一种形式。只需使用一个表单和一些面板并将它们设置为可见或不可见。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T07:51:03.130

我建议制作一个表格，并`UserControl`为您的向导中的每个步骤制作一个表格。然后，您的表单管理面板的可见性并可以处理（或触发）事件。

这样你就不需要静态并且可以完全控制它的生命；和向导步骤中的数据。

其次，为每个向导步骤创建一个自定义类（数据持有者），并使用 Windows 窗体数据绑定将 UI 控件（和验证）数据绑定到您的数据持有者。这样，您不需要在向导步骤上进行事件处理来保存数据，并且向导本身将成为一个简单的视图。

# database - Oracle ctxcat.context 包含在某些搜索参数上表现出奇怪的行为

> ID：12033722
> 
> 赞同：5
> 
> 时间：2012-08-20T07:26:52.653
> 
> 标签：database, oracle, indexing, contains

在 Oracle Database 10g 和 Oracle Database Express Edition 11g 中，我遇到了一些奇怪的行为。我有一列被索引为 ctxsys.context 类型索引。当我使用 contains 函数查询表以获取结果时，它可以工作，除非我正在搜索的值是“Still”。然后它不返回任何结果。当我使用“仍然”之类的列搜索相同的数据时，我通常会得到结果。如果我使用包含搜索“Jazz”，那么我会正常得到结果。

下面是我用于在新创建的测试表上重现此行为的 sql。

```
-- Setup the table with an index and some data
create table "STILL_TEST" (
    "ID" number(22,0) primary key,
    "PROF_DATA_15" varchar2(255 char),
    "OTHER" varchar2(255 char),
    "SHORTER" varchar2(100 char)
);
insert into "STILL_TEST" values (1, 'Still', 'Still', 'Still');
insert into "STILL_TEST" values (3, 'Jazz', 'Jazz', 'Jazz');
CREATE INDEX "STILL_TEST_PROF_DATA_15" ON "STILL_TEST" ("PROF_DATA_15")
   INDEXTYPE IS "CTXSYS"."CONTEXT" PARAMETERS ('SYNC (ON COMMIT)');
commit;

-- Now query it a bit. See how both types of queries work if the
-- parameter is 'Jazz'
select * from "STILL_TEST" where prof_data_15 like 'Jazz';
select * from "STILL_TEST" where contains(prof_data_15, 'Jazz') > 0;
select * from "STILL_TEST" where prof_data_15 like 'Still';
-- So far so good, but why doesn't this next query return any results?
select * from "STILL_TEST" where contains(prof_data_15, 'Still') > 0; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T07:40:37.580

似乎默认停止列表在这里有问题。如果索引是使用空的停止列表创建的，那么 'still' 和其他关键字将被视为搜索参数。

以下使用空停止列表创建索引：

```
 CREATE INDEX "STILL_TEST_PROF_DATA_15" ON "STILL_TEST" ("PROF_DATA_15")
 INDEXTYPE IS "CTXSYS"."CONTEXT" PARAMETERS ('STOPLIST CTXSYS.EMPTY_STOPLIST'); 
```

以下是有关停止列表的更多信息的一些链接：

[http://docs.oracle.com/cd/A91202_01/901_doc/text.901/a90121/cdatadi9.htm](http://docs.oracle.com/cd/A91202_01/901_doc/text.901/a90121/cdatadi9.htm)

[http://docs.oracle.com/cd/A91202_01/901_doc/text.901/a90121/astopsu2.htm#43324](http://docs.oracle.com/cd/A91202_01/901_doc/text.901/a90121/astopsu2.htm#43324)

奇怪的是，根据上面的链接，“仍然”这个词没有出现在默认停止列表中。

# asp.net - 如何在 ASP.NET MVC 中创建组合框

> ID：12033723
> 
> 赞同：1
> 
> 时间：2012-08-20T07:27:05.513
> 
> 标签：asp.net, asp.net-mvc, vb.net, combobox

我正在使用 MVC4。我需要一个组合框，如果它不存在，它允许用户输入一个新值，或者如果它存在于可用值中，它将自动被选中。我怎样才能做到这一点？

```
@Html.DropDownListFor(Function(model) model.XYZ.Id, 
                      New SelectList(Model.XYZ, 
                                     "ID", 
                                     "Name", 
                                     Model.XYZList.First().Id)) 
```

这将生成一个 dropdownlist ，但不允许用户键入新条目。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:50:52.893

HTML 没有 Windows 窗体中的组合框。你应该试试javascript。查看 jquery 自动完成功能。

[http://jqueryui.com/autocomplete/#combobox](http://jqueryui.com/autocomplete/#combobox)

# silverlight - 我想要滚动查看器填充网格

> ID：12033724
> 
> 赞同：2
> 
> 时间：2012-08-20T07:27:20.957
> 
> 标签：silverlight

```
<navigation:Page 
    d:DesignHeight="768" d:DesignWidth="1366">
    <UserControl.Resources>
        <sdk:HierarchicalDataTemplate x:Key="Level3">
            <StackPanel Orientation="Horizontal">
                <ContentPresenter Margin="0 0 4 0" Content="{Binding IconUri}"/>
                <HyperlinkButton x:Name="TemplateLinkButton" Content="{Binding MenuCaption}" NavigateUri="{Binding Uri}"/>
            </StackPanel>
        </sdk:HierarchicalDataTemplate>
        <sdk:HierarchicalDataTemplate x:Key="Level2" ItemsSource="{Binding Path=Children}" ItemTemplate="{StaticResource Level3}">
            <StackPanel Orientation="Horizontal">
                <ContentPresenter Margin="0 0 4 0" Content="{Binding IconUri}"/>
                <HyperlinkButton x:Name="TemplateLinkButton" Content="{Binding MenuCaption}"  NavigateUri="{Binding Uri}"/>
            </StackPanel>
        </sdk:HierarchicalDataTemplate>
        <sdk:HierarchicalDataTemplate x:Key="Level1" ItemsSource="{Binding Path=Children}" ItemTemplate="{StaticResource Level2}">
            <StackPanel Orientation="Horizontal">
                <ContentPresenter Margin="0 0 4 0" Content="{Binding IconUri}"/>
                <TextBlock  Text="{Binding Path=MenuCaption}"/>
            </StackPanel>
        </sdk:HierarchicalDataTemplate>
    </UserControl.Resources>
        <Grid x:Name="LayoutRoot"    ShowGridLines="True" Background="Blue">
        <Grid.RowDefinitions>
            <RowDefinition Height="100"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <TextBlock  Grid.Row="0"  VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Text="Header" Name="textBlockHeader"/>
        <Grid  Grid.Row="1"     HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ShowGridLines="True" Background="Pink">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="200"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <ScrollViewer    Height="Auto" Background="CadetBlue">
                <sdk:TreeView Name="menuTree"  ItemTemplate="{StaticResource Level1}"     Background="Fuchsia">
            </sdk:TreeView>
        </ScrollViewer>
        <sdk:Frame  HorizontalAlignment="Stretch" Grid.Column="1" VerticalAlignment="Stretch" Source="" Name="contentFrame">
            <sdk:Frame.UriMapper>
                <sdk:UriMapper>
                    <sdk:UriMapping MappedUri="/VIEW/{page}.xaml" Uri="/{page}" />
                </sdk:UriMapper>
            </sdk:Frame.UriMapper>
        </sdk:Frame>
        </Grid>
    </Grid>
</navigation:Page> 
```

这是一个默认的布局标题菜单和内容框架，我希望滚动查看器填充网格 Grid2 的第一列。我尝试了 margin `VerticalAlignment` `height= "Auto"`，但它还没有工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:28:26.150

当您遇到填充和对齐问题时，查看是什么容器和/或子项导致此问题的一个好方法是为所有内容赋予不同的背景颜色。这样，你可以看到网格是否被拉伸，孩子长到哪里，......

这个问题已经解决了，但我只是想分享这个方法，因为它也帮助你找到了你的问题所在。

# c# - C#如何检测对象是否已被锁定

> ID：12033725
> 
> 赞同：44
> 
> 时间：2012-08-20T07:27:20.317
> 
> 标签：c#, multithreading, .net-4.0, locking

如何检测对象是否被锁定？

`Monitor.TryEnter`（如[Is there a way to detect if an object is locked?](https://stackoverflow.com/questions/1300199/c-sharp-anyway-to-detect-if-an-object-is-locked)中所述）对我不起作用，因为如果对象未锁定，它会锁定该对象。

我**只想**检查它是否被锁定，并且在我的代码中的其他地方我将使用`Monitor`该类来锁定对象。

我知道可以使用例如布尔字段（例如`private bool ObjectIsLocked`），但是使用锁定对象本身来检测它。

下面的示例代码显示了我想要做的事情：

```
private static object myLockObject = new object();

private void SampleMethod()
{
    if(myLockObject /*is not locked*/) // First check without locking it
    {
        ...
        // The object will be locked some later in the code
        if(!Monitor.TryEnter(myLockObject)) return;

        try
        {

            ....
        }
        catch(){...}
        finally
        {
            Monitor.Exit(myLockObject);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-20T22:53:07.697

**你做错了**。如果您没有锁定对象，则无法检查它是否已锁定（如果您有锁定，您会提前知道）。你可以“问”“被锁了吗？” 并得到一个“不”作为响应，然后在下一纳秒另一个线程可以获取锁，您的程序将进入损坏状态。这根本不是多线程应用程序的方式，也是 .NET 没有`Monitor.IsLocked`方法的原因。如果您的代码需要在获取锁之前检查锁，那么您就有设计问题。试图用不受保护的标志来解决它是一个糟糕的解决方案，它保证 100% 的机会不会起作用。

无论如何，不​​要使用`bool`var 来表示多线程处于*锁定*状态（因为您可能遇到相同的问题，您读取“false”，1 纳秒后另一个线程将写入“true”）。使用`Interlock.CompareExchange`.

```
private static int _lockFlag = 0; // 0 - free

if (Interlocked.CompareExchange(ref _lockFlag, 1, 0) == 0){
   // only 1 thread will enter here without locking the object/put the
   // other threads to sleep.

   Monitor.Enter(yourLockObject); 

   // free the lock.
   Interlocked.Decrement(ref _lockFlag);
} 
```

您会看到，您需要在*每个*可以获取对象锁定的位置上更改 _lockFlag。换句话说，您将围绕原生系统构建一个自定义锁系统。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-20T11:29:48.217

C# 中的 Monitor 类无法做到这一点

只需使用；

```
 var lockedBySomeoneElse = !Monitor.TryEnter(obj);
    if (!lockedBySomeoneElse) Monitor.Exit(obj);
    // the variable 'lockedBySomeoneElse' has the info you want 
```

像 readerwriterlockslim 这样的其他锁并没有真正的帮助。那个人可以告诉您有多少读者，但如果有作家忙，则不能；-(

另外，如果您使用自己的建议“private bool ObjectIsLocked”，我认为这是我会采取的路线，您应该使用

```
 private volatile bool ObjectIsLocked 
```

这将使 C# 通过多线程更新更好地反映对它的更改。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-20T07:39:07.270

[Monitor.IsEntered](http://msdn.microsoft.com/en-us/library/system.threading.monitor.isentered.aspx)应该可以解决问题。

编辑：我刚刚重新阅读了文档，它说：

> 确定当前线程是否持有指定对象的锁。

所以这还不够，因为您可能想知道其他线程是否持有锁？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T07:36:15.320

如果您想确保对象稍后仍可锁定，只需调用`TryEnter`并一直保持锁定。否则，如果您想稍后尝试锁定对象，只需调用`TryEnter`它并在它被锁定时立即解锁它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T07:57:54.960

从技术上讲，您可以检查对象的*同步块索引字段，该字段在**同步块数组*中具有关联的延迟分配结构的索引- 每个对象都有这个字段，每个用于同步的对象都有这个字段集。这些结构用于协调线程同步。但是，我非常怀疑您是否能够在没有*Profiling API*的情况下访问这些信息。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2018-02-02T17:17:06.540

我绝不提倡先检查锁然后输入代码块。但是，我在寻找一种方法来检查新函数无法锁定对象时发现了这个线程。基于 Monitor.IsEntered 的单元测试让我得到了我想要的东西。

# xcode - xcode 4.4.1 将 svn 工作副本视为 git

> ID：12033731
> 
> 赞同：1
> 
> 时间：2012-08-20T07:27:42.500
> 
> 标签：xcode, git, svn, xcode4

我在 Xcode 管理器中添加了一个 svn 存储库，然后使用 xcode 签出项目文件夹，然后在 xcode 的菜单->文件->源代码控制中，它显示“提交”、“推”、“拉”、“合并”而不是svn 命令。如果我使用“提交”，则表明所有文件都不受版本控制（文件前有问号）如果我使用拉/推/合并，则表示有本地未提交的更改。

我想知道如何让 Xcode 知道这是一个 svn 工作副本，而不是一个 git 副本。

PS：我使用 xcode 版本 4.4.1。

**编辑**

我发现了一些奇怪的东西，我删除了 xcode 存储库管理中的所有引用，它位于 xcode 管理器中。然后，每次我签出一个 subversion 存储库时，xcode 都会创建一个对 git 存储库的引用，该 git 存储库的路径位于我的主目录（该 git 存储库的位置是 /Users/my_name）。所以我认为 xcode 将我的整个主目录视为 git 工作副本（或存储库？）。我换了另一个用户并解决了这个问题。

但问题仍然存在，为什么 xcode 将我的主目录视为 git 存储库？在我的主目录中只有一个名为 .gitmodules 的文件可能与 git 有任何关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:35:47.423

我换了另一个用户，现在可以了。

# java - 带有 Java Web 服务的类路径，classNotFoundException

> ID：12033733
> 
> 赞同：1
> 
> 时间：2012-08-20T07:27:44.827
> 
> 标签：java, web-services, classpath

严重的问题在这里，我不知道该怎么办，一直在这个时间。收到此错误：

```
java.lang.ClassNotFoundException: User 
```

这是我的代码：

```
public class BookingServerPublisher{

public static void main(String[] args){

    System.out.println("Starting web Service,Press Ctrl + C to stop\n");
    // 1st argument is the publication URL
    // 2nd argument is an SIB instance
    Endpoint.publish("http://127.0.0.1:9876/bs", new BookingServerImpl());
}
}

@WebService(endpointInterface = "bs.BookingServer")

public class BookingServerImpl implements BookingServer{

User users = new User();

public void initData(){
    users.loadUsers();
}
}

@WebService
@SOAPBinding(style = Style.RPC)

public interface BookingServer{

@WebMethod void initData();

}

class BookingClient{

public static void main(String args[]) throws Exception{
    URL url = new URL("http://localhost:9876/bs?wsdl");
    // Qualified name of the service:
    // 1st arg is the service URI
    // 2nd is the service name published in the WSDL
    QName qname = new QName("http://bs/", "BookingServerImplService");
    // Create, in effect, a factory for the service.
    Service service = Service.create(url, qname);
    // Extract the endpoint interface, the service "port".
    BookingServer eif = service.getPort(BookingServer.class);

    eif.initData();
}
}

package bs;

import java.io.*;
import java.util.*;

public class User{

private static final long serialVersionUID = 1;

static ArrayList<User> userList = new ArrayList<User>();    //Dynamic List of all the User objects

String name;
String password;
String level;
boolean isAdmin = false;

User(){
    super();
}

//Method for loading User objects from data file
static void loadUsers(){
    try {
        FileInputStream stream = new FileInputStream("UsersData");
        ObjectInputStream read = new ObjectInputStream(stream);

        while(stream.available() != 0){
            Object obj = read.readObject();
             if(obj instanceof User){
                User users = (User) obj;
                userList.add(users);
            }
        }
        stream.close();
        read.close();
    }
    catch (Exception e) {
        e.printStackTrace();
    }
}

//Method for saving User objects to data file
static void saveUsers(){

    try {
        FileOutputStream stream = new FileOutputStream("UsersData");
        ObjectOutputStream write = new ObjectOutputStream(stream);

        for(int i = 0; i < userList.size();i++){
            if(userList.get(i) instanceof User){
                write.writeObject(userList.get(i));
            }
        }
        stream.close();
        write.close();
    }
    catch (Exception e) {
        e.printStackTrace();
    }
}
} 
```

所有文件中的包都是`bs`，我正在执行它`java bs.BookingServerPublisher`，

`java bs.BookingClient`从包含文件夹的`bs`文件夹，即`bs`'父目录，`BookingServerPublisher`控制台抛出错误。

任何人都可以帮助我，我真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:25:59.607

我假设它是失败的反序列化：

```
Object obj = read.readObject(); 
```

它失败了，因为对象在序列化时的完全限定类名是`User`（因此出现异常消息“ `java.lang.ClassNotFoundException: User`”）。但是您的代码库只有一个名为的类`bc.User`（因为它在“bc”包中）。从 Java 的角度来看，这些是完全不同且不相关的类。

您需要在序列化的两端使用相同的类。

# c# - stringbuilder 用变量附加文本

> ID：12033737
> 
> 赞同：2
> 
> 时间：2012-08-20T07:28:35.693
> 
> 标签：c#, asp.net-mvc

我有这一行，如何在文本中附加变量以构成标题？

```
 StringBuilder sb = new StringBuilder();
  week6 = model.SelectedSunday.AddDays(-7);
  week5 = week6.AddDays(-7);
  week4 = week5.AddDays(-7);
  week3 = week4.AddDays(-7);
  week2 = week3.AddDays(-7);
  week1 = week2.AddDays(-7);
  sb.AppendLine("Title, Total, " week6, week5, week4, week3, week2, week1 ); 
```

还有这段代码：

```
 var tradesmenReportData = _reportingService.GetTradeUKKPITradesmen(model.SelectedSunday);
  var jobSortedReportData = _reportingService.GetTradeUKKPIJobSorted(model.SelectedSunday);
  foreach (var item in tradesmenReportData)
  {
    sb.AppendLine(String.Concat("\"", item.Title, "\", item.Total, "\", item.Week6, "\", ", item.Week5, "\", ", item.Week4, "\", ", item.Week3, "\", ", item.Week2, "\", ", item.Week1));

  } 
```

在输出文件（excel）中，值有一个“附加到值？在上面的某处有一个额外的”。我哪里出错了？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T07:34:03.423

您可以使用[`StringBuilder.AppendFormat`](http://msdn.microsoft.com/en-us/library/cazfhf32%28v=vs.100%29.aspx)：

```
sb.AppendFormat("Title, Total, {0}, {1}, {2}, {3}, {4}, {5}"
               , week6, week5, week4, week3, week2, week1); 
```

> 将通过处理包含零个或多个格式项的复合格式字符串返回的字符串附加到此实例。每个格式项都替换为参数数组中相应参数的字符串表示形式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T07:39:00.377

```
sb.AppendFormat("Title, Total, {0}, {1}, {2}, {3}, {4}, {5}", week6, week5, week4, week3, week2, week1 ); 
```

AppendFormat 重载将用您传递给方法的参数（week6/week5 等）替换占位符。

对于第二个片段，您可以再次使用它：

```
sb.AppendFormat("\"{0}\", \"{1}\", \"{2}\", \"{3}\", \"{4}\", \"{5}\", \"{6}\", \"{7}\"", item.Title, item.Total, item.Week6, item.Week5, item.Week4, item.Week3, item.Week2, item.Week1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T07:34:32.003

您可以`StringBuilder.AppendFormat`按照其他答案中的说明使用；

您应该使用另一个选项（例如，当 have`string`但不是） ，因为它比 . 更具可读性。例如：`StringBuilder``string.Format``Concat`

```
sb.AppendLine(string.Format(@"\"{0}\" \"{1}\" \"{2}\" \"{3}\" \"{4}\" \"{5}\" \"{6}\" \"{7}\"", 
              item.Title, //0
              item.Total, //1
              item.Week6, //2
              item.Week5, //3
              item.Week4, //4
              item.Week3, //5
              item.Week2, //6
              item.Week1) //7
           ); 
```

# oracle11g - Oracle sql 开发人员 - 连接“xe”不存在？

> ID：12033738
> 
> 赞同：0
> 
> 时间：2012-08-20T07:28:35.713
> 
> 标签：oracle11g, oracle-sqldeveloper

我正在使用 oracle 11g express 和 sql developer。当我打开 SQL developer 时，我没有看到任何名为“xe”的连接。当我尝试使用名称 = xe、用户名 = xe、一些密码和角色 == sysdba 创建连接时，出现错误 -

```
Status : Failure -Test failed: ORA-01017: invalid username/password; logon denied 
```

为什么会发生这种情况，我怎么能看到 'xe' ？如何创建具有 sysdba 权限的连接？

请帮我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:35:16.697

在 sql-developer 的连接菜单中配置连接时：

![在此处输入图像描述](../Images/eeebebcfc67cf6d508d43465151e2c94.png)

您可以右键单击它，选择它，`properties`您将得到的可能是以下基本设置屏幕：

![在此处输入图像描述](../Images/82c62b45307063cb1f99ee90d4c9baf8.png)

或者，您可能需要使用“高级设置”配置连接：

![在此处输入图像描述](../Images/b1af9940dd3fc8156bee88a46e034d04.png)

无需提及用户名/密码区分大小写。
希望能帮助到你！

# cross-platform - 为不同的平台/设备创建应用程序

> ID：12033744
> 
> 赞同：2
> 
> 时间：2012-08-20T07:29:19.987
> 
> 标签：cross-platform, device, platform

我目前正在开发一个可以在任何设备上运行的应用程序，例如：Windows Phone、Android 设备、iPhone 和 Blackberry，而无需为每个平台编码，因此它不会在编码上花费太多时间。

什么应用程序、语言或想法可以让我为不同平台创建应用程序？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T07:33:42.670

看看[PhoneGap](http://phonegap.com/)。它将允许您制作可以在几乎所有移动操作系统中运行的移动应用程序，用 HTML+CSS 构建布局并用 JavaScript 编码逻辑。如果您了解这些技术，这是一个不错的选择，因为使用它的 API，您可以通过 JavaScript 访问大多数设备功能

# asp.net-mvc - 页面导航的最佳实践

> ID：12033750
> 
> 赞同：2
> 
> 时间：2012-08-20T07:30:08.987
> 
> 标签：asp.net-mvc

在大多数网站中，总是有一个“返回”到上一个按钮。我想知道它们通常会被实施。

基本上，我正在构建一个页面深度超过 5 级的网站。例如，页面级别如下：

> 高级搜索 => 搜索结果 => 搜索详细信息 => 申请工作 => 保存工作

我需要确保用户可以导航回上面的上一个级别，因此从“搜索详细信息”中，他们应该能够单击返回，然后返回到“搜索结果”页面，并保留所有以前的搜索条件。

我目前将“返回 url”存储为查询字符串参数的一部分，并在用户深入研究时附加 url。这样做的问题是，当用户潜入超过 3 个级别时，URL 会变得非常长且混乱。

asp.net MVC 应用程序处理此类问题的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:29:29.487

`I am currently storing the "back url" as part of the query string paramter and append the url as user dives in deeper. The issue with this is that when as user dives in more than 3 levels, the url get really long and messy.`

不要将其存储在您的网址中，而是存储在您的会话中。您可以轻松地创建一个类（如果有意义的话），封装您想要的所有内容，然后将其粘贴到您的会话中。如果您只是在存储最后一页的 url 之后，只需在会话中存储一个字符串。

```
Session["lastPage"] = "~/mypage.aspx"; 
```

它比将所有内容附加到您的 url 更清洁（并且更安全）。在这里使用 javascript 不是一个好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T07:35:57.690

试试这个旧的 javascript 方法

```
<a href="javascript:history.go(-1)">Go Back</a> 
```

或者

```
<input type="button" value="Go Back" onclick="history.go(-1)" /> 
```

这应该在每个页面上，但不能保证在所有情况下都能正常工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T07:41:06.260

让浏览器处理后退按钮，根本不（再次）将其添加到您的网站，因为有很多问题，例如用户打开新页面、新标签或在同一页面上发帖 - 或来自其他网站然后后面不是你想的那样。

您可以添加的是从一开始就知道的行菜单和/或树形菜单以及下一页/上一页。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T08:32:36.897

在我使用过的旧 Web 开发平台中（几年前），这是使用内置函数解决的。这个想法是服务器维护某种内部 url 集合并将它们映射到简单的数字。当您向集合中添加新的 url 时，服务器将首先检查该确切的 url 是否已经存在，如果存在则返回关联的数字。如果您添加的 url 是新的，它将被添加并返回一个新的数字。

几个示例来说明......让我们假设用户从页面开始：

```
http://foo.bar.com/search/ 
```

我将此页面称为“第 1 页”。添加搜索条件后，用户将在页面上看到结果：

```
http://foo.bar.com/search/results?jobTitle=CEO&etc&etc 
```

我将其称为“第 2 页”。在此页面上，用户可以单击打开特定结果并进入页面：

```
http://foo.bar.com/search/results/12313 
```

我将其称为“第 3 页”。

要使第 2 页和第 3 页具有“返回上一页”功能，需要使用一个额外的查询参数打开它们。当第 1 页生成第 2 页的 url 时，服务器将调用实用程序方法`SaveUrl()`（在某个合适的类上）并将结果附加到查询字符串，因此第 2 页的 url 变为：

```
http://foo.bar.com/search/results?jobTitle=CEO&etc&etc&return_url=1 
```

注意新的`return_url=1`查询参数。然后页面 2 将使用相应的`GetReturnUrl(1)`方法来获取要在“返回上一个”链接中使用的 url。此调用将带回之前添加的 url，即`http://foo.bar.com/search/`.

从第 2 页前进到第 3 页还需要使用相同的`SaveUrl()`. 第 3 页的新 url 将是：

```
http://foo.bar.com/search/results/12313?return_url=2 
```

在第 3 页上，将使用 获取“返回上一个”页面 url `GetReturnUrl(2)`，这将返回`http://foo.bar.com/search/results?jobTitle=CEO&etc&etc&return_url=1`。

因此，该系统通过存储当前页面的 url 并将其在 url 中提供给下一页来工作。并且由于当前页面的 url 以查询参数的形式包含对当前页面的上一页的引用，因此保留了返回上一页的路径。

我想我会解释这一点，因为我认为这是处理回到上一个线索的聪明方法。我并不是说这是任何行业标准或最佳实践......

**编辑**：关于这种方法的一些想法和考虑。

优点：

*   存储和检索 url 的简单方法，不会导致更长的查询字符串

缺点：

*   只要 url 包含返回所需的所有必要状态，就可以工作。
*   根据实现细节（全局 url 集合？会话中的用户特定 url 集合？保留在 Sql 服务器中？）它可能会导致 Web 场中的问题（所有服务器需要就存储为“1”的 url 达成一致）。
*   可能会导致高流量站点的内存问题（但这也取决于具体的实现）

# android - android sqlite3的多次写入

> ID：12033752
> 
> 赞同：1
> 
> 时间：2012-08-20T07:30:18.023
> 
> 标签：android, database, sqlite

如果我正在从一个活动执行数据库操作并且同时如果我的 android 服务启动（它也执行数据库插入），那么我们如何在 android 的 sqlite3 数据库中同时写入多个时间，那么如何处理数据库操作。

正如android开发者网站所说 [http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#setLockingEnabled%28boolean%29](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#setLockingEnabled%28boolean%29)

不推荐使用SetLocakingEnabled“**方法**”。那么我们如何在数据库中访问多个写入（插入）操作。

我还参考了用于锁定 [http://www.sqlite.org/faq.html#q5的 sqlite 文档](http://www.sqlite.org/faq.html#q5)

请提供任何相同的示例。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:43:52.477

我不确定您所说的多写访问是什么意思。但是您可能想要做的是用事务锁定数据库并执行插入，然后在完成时结束事务。

```
//in your database access class...assuming you have a list of objects to insert

public function void multiple_write(ArrayList<Object> list) {
  //this locks the database
  db.beginTransaction();
  for (Object obj : list) {
    db.insert(TABLE_NAME, null, getContentValues(obj));
  }

  db.setTransactionSuccessful();
  //this completes your transaction
  db.endTransaction();
} 
```

# c# - 参数信息不起作用

> ID：12033754
> 
> 赞同：1
> 
> 时间：2012-08-20T07:30:40.003
> 
> 标签：c#, visual-studio-2010, resharper

我无法让 Edit.ParameterInfo 命令工作，它突然停止工作一天到另一天。

我可以让它显示的唯一方法是当我最初创建这样的方法调用时：

```
this.MyMethod( 
```

我试过了：

*   通过 [Edit > IntelliSense > Parameter Info] 触发它
*   使用默认的 Ctrl + Shift + Space
*   在 VS- 和 Resharper- 设置中重置键绑定。
*   添加没有其他绑定的新键绑定。

我不太可能是唯一一个遇到过这个问题的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:00:36.293

该问题已在 Resharper 7.1.1 中修复：http: [//youtrack.jetbrains.com/issue/RSRP-336184](http://youtrack.jetbrains.com/issue/RSRP-336184)

# java - 在控制台上运行 Selenium 测试用例会引发很多错误

> ID：12033755
> 
> 赞同：0
> 
> 时间：2012-08-20T07:30:43.967
> 
> 标签：java, selenium, console, selenium-webdriver

看起来像一个愚蠢的问题，但我真的被困住了，任何帮助将不胜感激。

我将一个 selenium 测试用例导出为**Junit 4 Web 驱动程序**，并使用**eclipse**运行它，它可以正常运行并执行所有打算执行的适当任务。但是，如果我尝试使用**控制台**运行它，则会引发大量错误。

就像是 ：

> editCampaign.java:318：找不到符号符号：变量按位置：类 org.openqa.selenium.example.editCampaign driver.findElement(By.id("submit")).click();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:56:09.977

看起来您只是在类路径中缺少 Web 驱动程序库（在您的情况下为“By”类），请尝试添加

```
-classpath librariesDirectory 
```

到你的执行命令

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:45:00.023

看起来他无法通过 id 找到元素“提交”。尝试使用 CSS 选择器查找它。应该是这样的

```
driver.findElement(By.cssSelector("input[id='submit']")); 
```

# ios - IOS向自定义UIVIEW添加按钮

> ID：12033761
> 
> 赞同：0
> 
> 时间：2012-08-20T07:31:01.093
> 
> 标签：ios

我正在尝试有一个具有登录按钮的模式弹出视图。但是当我点击登录按钮时。单击登录按钮时，我将无法识别的选择器发送到类 0x1a846c。

```
loginView.opaque = NO;
loginView.autoresizingMask =
UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
[aSuperview addSubview:loginView];

//login button
const CGFloat DEFAULT_BUTTON_WIDTH = 280.0;
const CGFloat DEFAULT_BUTTON_HEIGHT = 50.0;
const float fbYoffset=150.0;
CGRect fbButtonFrame = CGRectMake(0, fbYoffset, DEFAULT_BUTTON_WIDTH, DEFAULT_BUTTON_HEIGHT);
UIButton *fbLoginButton = [UIButton buttonWithType:UIButtonTypeCustom];

[fbLoginButton setFrame:fbButtonFrame];

[fbLoginButton setTitle:NSLocalizedString(@"Login",nil) forState:UIControlStateNormal];
fbLoginButton.autoresizingMask =
UIViewAutoresizingFlexibleLeftMargin |
UIViewAutoresizingFlexibleRightMargin |
UIViewAutoresizingFlexibleTopMargin |
UIViewAutoresizingFlexibleBottomMargin;

[fbLoginButton addTarget:self action:@selector(login) forControlEvents:UIControlEventTouchUpInside];

[loginView addSubview:fbLoginButton];

-(void)login
{
    NSLog(@"Pressed login..");
} 
```

# jquery - jquery屏蔽输入插件不清除字段？

> ID：12033764
> 
> 赞同：2
> 
> 时间：2012-08-20T07:31:08.093
> 
> 标签：jquery, jquery-ui, jquery-plugins, mask, jquery-mask

在我的项目中，我使用以下这些插件进行验证

```
 jquery.validate.min.js, 
     jquery.ui.core.js,
     jquery.ui.widget.js, 
     jquery.ui.mask.js 
```

我这样称呼它：

```
 $('#txtShippingInfoPhone').mask({mask:"999-999-9999",clearEmpty: false}); 
```

默认输入框为空。像这样

```
 Phone number: 
```

当我在那个文本框上键入时，它看起来像这样

```
Phone number:___ ___ ____ 
```

而且，如果我输入了错误的电话号码，那么它就会接受。例如：

```
 [407-555-____] 
```

但是在这里，错误应该通过而不是接受该值。观察：它认为______也有价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:08:08.343

我不知道您如何验证表单，但如果是默认程序，您只是检查该字段是否不为空（必需）。

您需要检查电话值是否与之前的掩码匹配...然后继续验证。

例子

```
if($('#txtShippingInfoPhone').mask("valid")){
    /* It's valid, continue with the submit... */
    return true;
}else{
    /* It's NOT valid, trigger the error msg, and interrupt the submit... */
    return false;
}​ 
```

# jquery-ui - JQuery UI 对话框仅水平调整大小，而不是垂直调整

> ID：12033767
> 
> 赞同：3
> 
> 时间：2012-08-20T07:31:29.037
> 
> 标签：jquery-ui, jquery-ui-dialog, onresize

我正在尝试创建一个随窗口调整大小的 JQuery 对话框，我可以让它水平调整大小，但垂直大小似乎永远不会改变，代码如下：

var dlg = $("#dialog"); // 获取对话框容器。

```
dlg.dialog({
    title       : '',
    bgiframe    : true,
    draggable   : false,
    resizable   : true,
    dialogClass : 'dialogRecurso',
    width       : $(window).width(),
    height      : $(window).height(),
    stack       : true,
    zIndex      : 99999,
    autoOpen    : false,
    modal       : true,
    open        : function() {
      $(".ui-dialog-titlebar").hide();
    }
});

$(window).resize(function() {
    $("#dialog").dialog("option","height",$(window).height());
    $("#dialog").dialog("option","width",$(window).width());
}); 
```

知道为什么它不垂直增长吗？我验证了 resize 函数被调用并且尺寸是正确的，但是在创建对话框之后，对话框的高度似乎永远不会改变，关于为什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:04:28.630

您的代码似乎按预期工作，我能看到的唯一问题是您添加的 class `dialogClass : 'dialogRecurso'`。

我试图以相反的方式操作，并在保持代码活动的同时制作了一个不可调整大小的对话框。我很快发现，通过在我的 CSS 中添加这一行，窗口将停止调整大小：

```
.dialogRecurso{max-width:300px; max-height:200px;} 
```

这让我认为这将是一个**与 CSS 相关的问题**，与您的 Javascript 无关。

# html - ul li 文本垂直对齐略低于垂直中心

> ID：12033768
> 
> 赞同：2
> 
> 时间：2012-08-20T07:31:33.480
> 
> 标签：html, css, html-lists, vertical-alignment

我在将文本放在 ul li 中比中心垂直对齐稍低时遇到了一些麻烦。我的代码在[jsFiddle](http://jsfiddle.net/8Ncmq/)

我希望它是相同的，在大多数浏览器中看起来都一样，但文本比它低 10 px。

谢谢你。

```
<style>
#super-ul
    {
        list-style-type : none;
        padding-top     : 0;
        overflow        : hidden;
        float           : left;
    }

#super-ul li
    {
        display       : inline-block;
        border:1px solid red;
    }

#super-ul li img
    {
        vertical-align : middle;
    }

</style>

<ul id="super-ul">
<li><a href="#"><img src="http://www.google.by/images/icons/product/chrome-48.png" alt=""></a></li>
<li><div><a href="#">This text should be valigned center but 10px down</a></div></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:47:50.760

不完全是您正在搜索的解决方案，但您可以使用`<sub>`标签，字体调整大小。

问题是您无法指定将应用的边距。

（你也可以加倍`<sub>`标签来增加这个边距，但它开始很丑）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:25:35.470

我已根据您的要求使用`nth-child` **CSS 选择器**

查看更新的**CSS**

```
#super-ul
    {
        list-style-type : none;
        padding-top     : 0;
        overflow        : hidden;
        float           : left;
    }
    #super-ul li
    {
        display       : inline-block;
        border:1px solid red;

    }
        #super-ul li:nth-child(2n)
    {
        display       : inline-block;
        border:1px solid green;
        top:10px;
        position:relative;    
    }
    #super-ul li img
    {
        vertical-align : middle;
    } 
```

看演示：-

[http://jsfiddle.net/8Ncmq/36/](http://jsfiddle.net/8Ncmq/36/)

我希望你是这样的......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T11:45:08.683

试试这个

# super-ul li.test{ 位置：相对；顶部：10 像素；}

只需将此 li 应用于特定的 li

# java - maven 在运行 java 1.7 时以 jdk 1.4 模式编译 java 项目？

> ID：12033773
> 
> 赞同：4
> 
> 时间：2012-08-20T07:32:23.963
> 
> 标签：java, maven, pmd

我有一个大型 Maven 项目，分为一些模块。

我决定用 maven 给 pmd（代码质量检查）模块。

当我尝试使用命令测试 pmd 模块时

```
mvn pmd:pmd 
```

我收到以下类型的警告：

*   除非在 JDK 1.5 模式下运行，否则不能使用泛型！
*   在JDK 1.4模式下运行时不能使用注解！
*   不能在 pre-JDK 1.5 目标中使用 enum 作为关键字

看起来 maven 出于某种原因使用 jdk 1.4 编译项目。

`java -version`输出：

```
java version "1.7.0_05"
OpenJDK Runtime Environment (IcedTea7 2.2.1) (Gentoo build 1.7.0_05-b21)
OpenJDK 64-Bit Server VM (build 23.0-b21, mixed mode) 
```

我用的是gentoo linux。

```
Linux ufk-work 3.5.2-gentoo #1 SMP Sun Aug 19 18:58:32 IDT 2012 x86_64 Intel(R) Core(TM) i7-3770 CPU @ 3.40GHz GenuineIntel GNU/Linux 
```

`mvn -version`输出：

```
Apache Maven 3.0.4 (r1232337; 2012-01-17 10:44:56+0200)
Maven home: /usr/share/maven-bin-3.0
Java version: 1.7.0_05, vendor: Oracle Corporation
Java home: /usr/lib64/icedtea7/jre
Default locale: en_US, platform encoding: ANSI_X3.4-1968
OS name: "linux", version: "3.5.2-gentoo", arch: "amd64", family: "unix" 
```

那么有什么想法可以确保 maven 可以为 jdk 1.7 而不是 1.4 编译吗？

我用谷歌搜索并找到了 maven-compiler-plugin 的使用示例，如下所示：http: [//twit88.com/blog/2008/03/09/maven-compile-your-application-to-be-14- 15 或 16 兼容/](http://twit88.com/blog/2008/03/09/maven-compile-your-application-to-be-14-15-or-16-compatible/)

不幸的是，结果完全一样。

任何有关该问题的信息将不胜感激。

太感谢了！

冷杉

# 更新

我尝试将 maven-compiler-plugin 和 maven-pmd-plugin 添加到我的主 pom.xml 中，但结果完全相同。

更新后的 pom.xml 可以在[http://bpaste.net/show/41166/查看](http://bpaste.net/show/41166/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T07:39:25.177

您需要告诉 PMD 的目标版本：

```
<build>
  <pluginManagement>
    <plugins>
      <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-pmd-plugin</artifactId>
      <version>2.7.1</version>
      <configuration>
          <targetJdk>1.7</targetJdk>
          <rulesets>
              <ruleset>tools/pmd-rules.xml</ruleset>
          </rulesets>
      </configuration>
    </plugin>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.5.1</version>
        <configuration>
            <source>1.7</source>
            <target>1.7</target>
        </configuration>
    </plugin>

    </plugins>
  </pluginManagement>
</build>

<reporting>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-pmd-plugin</artifactId>
            <version>2.7.1</version>
        </plugin>
    </plugins>
</reporting> 
```

注意：几个月前不支持 1.7 JDK，您应该在文档中仔细检查它，否则您将无法使用菱形语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T07:37:00.330

在`pom.xml`：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5.1</version>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

# java - 将 JSON 数组从 android 发送到 servlet

> ID：12033781
> 
> 赞同：1
> 
> 时间：2012-08-20T07:33:08.867
> 
> 标签：java, android, servlets

我在从 Android发送`JSON Array`到t 时遇到问题。`Servle`但我可以`JSON Array`通过浏览器发送相同的内容。我花了很多时间试图解决这个问题，但找不到解决方案。

```
URL = "http://192.168.*.*:8080/Test/TestServlet?q=add&array=" 
```

我在最后添加了 JSON 数组：

```
[{"amount":"3","test":"test",...}] 
```

**GlassFish**服务器错误：

```
org.json.JSONException: A JSONArray text must start with '[' at character 0 of 
```

等待回复，谢谢。

**小服务程序：**

```
protected void doPost(HttpServletRequest request,HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("application/json");
    PrintWriter out = response.getWriter();
    String req = request.getParameter("q");

    try 
    {
        Class.forName("com.mysql.jdbc.Driver");
        System.out.println("Driver found");

        dbConnect = DriverManager.getConnection("jdbc:mysql://localhost/***",  
                                                       "root", "***");
        dbStatement = dbConnect.createStatement();

        if (req.equals("add")) {
            String json_array = request.getParameter("array");

            String query = null;
            org.json.JSONArray jArray = new org.json.JSONArray(json_array);
            for (int i = 0; i < jArray.length(); i++)
            {
              org.json.JSONObject obj = jArray.getJSONObject(i);
              query = 
                 "INSERT INTO *** (...) VALUES(" + obj.getInt("***") + ",'" +  
                 obj.getString("***") + "','" + obj.getString("***") + "','" +  
                 obj.getString("***") + "'," + obj.getDouble("***") + "," +  
                 obj.getDouble("***") + "," + obj.getDouble("***") + ",'" +  
                 obj.getString("***") + "','"+obj.getString("***")+"','','"+  
                 obj.getString("***") + "')";
            }

            dbStatement.executeUpdate(query);
    ... 
```

**安卓**

```
protected void sendJson(JSONArray json) 
{
      HttpClient client = new DefaultHttpClient();
      HttpConnectionParams.setConnectionTimeout(client.getParams(), 10000);
      HttpResponse response;
      try
      {
        HttpPost post = new HttpPost(URL);
        StringEntity se = new StringEntity(json.toString());  
        Log.i("JSON before sending", json.toString());

        se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
        post.setEntity(se);
        response = client.execute(post);

        /*Checking response */
        if(response!=null)
        {
          InputStream in = response.getEntity().getContent();   
          //Get the data in the entity
        }
    }
    catch(Exception e)
    {
      e.printStackTrace();
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:04:20.367

在浏览器上，您正在尝试使用 GET 方法，而在您的代码中，您正在使用 POST 方法。尝试在您的代码中使用 GET 方法。以下是要使用的 GET 方法的示例`HttpClient`

```
GetMethod get = new GetMethod("http://www.example.com/page");
method.setQueryString(new NameValuePair[] {
    new NameValuePair("q", "add"),
  new NameValuePair("array", "[{"amount":"3","test":"test"}]"),
}); 
```

然后用于`client.execute(post);`调用服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:11:48.497

StringEntity 会将您的 [ { } ] 编码为 %5B %7B %7D %5D，servlet 上的 getParameter 在您将其交给 JsonArray 解析之前可能不会解码这些。因此，url 解码 servlet 上的参数可能是您正在寻找的解决方法。

# javascript - 寻找一个好的在线 JS 混淆器仅用于缩小目的

> ID：12033787
> 
> 赞同：1
> 
> 时间：2012-08-20T07:33:31.173
> 
> 标签：javascript, obfuscation, minify

我已经烧毁了网络，但是我发现并测试了这些工具，对我来说似乎还不够。

*   [BrainJar 的 Chrunchinator](http://www.brainjar.com/js/crunch/demo.html)做了一个非常好的（在我看来）缩小工作，但没有任何代码混淆，

*   [在线 JavaScript/CSS 压缩](http://refresh-sf.com/yui/)，虽然声称正在做混淆（“仅缩小，没有符号混淆”复选框未选中）除了缩小之外什么也没做，有时甚至比 BrainJar 的更糟糕；不知道为什么，

*   [免费的 Javascript Obfuscator](http://www.javascriptobfuscator.com/default.aspx)确实最小化 + 混淆，但更像是出于安全目的（变量和函数的名称难以理解，没有缩小到最短）；它还在一些 SO 问题上被标记为不够安全，并且在一些更复杂的 JS 代码上也失败了（许多变量保持不变），

*   [Javascript Code Encrypter And Obfuscator](http://www.atasoyweb.net/Javascript_Encrypter/javascript_encrypter_eng.php)确实做得很好，但是混淆是面向安全性的，而不是最小化的，所以生成的代码虽然很难理解，但比源代码大一些。

我听说过很多好的解决方案（Yahoo 的 YUI，Google 的 Clousure），但它们都是可下载的库，没有在线的一键式解决方案。

我实际上正在寻找的是一个 JS 缩小器和混淆器，它将缩小代码（很像 BrainJar 的做法）并将所有变量、函数名等模糊为 1-2 个字符长度（尽可能短）。我知道这可能不太安全，但由于目的（内部项目），代码的大小而不是安全性是这里的关键。我还需要它作为一键式在线准备工具。

我希望我不要设置太多条件，这样的工具确实存在吗？:]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:36:20.160

我正在使用[http://smallerapp.com/](http://smallerapp.com/)来缩小我的 JS。它是 MAC 的一键式桌面解决方案。它使用 YUI 压缩器来压缩 javascript 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T07:36:32.800

GAE 上托管了 Google Closure Compiler的[在线版本](http://closure-compiler.appspot.com/home)。它工作得很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-03T16:48:50.067

我在[www.blimptontech.com](http://www.blimptontech.com)上的在线文件非常幸运。 您可以在那里压缩或合并您的 JS 文件。虽然我从未使用过合并功能。我认为它使用 uglify 来发挥它的魔力。

# c# - lock(new object()) -- 货物崇拜或一些疯狂的“语言特例”？

> ID：12033790
> 
> 赞同：88
> 
> 时间：2012-08-20T07:33:47.050
> 
> 标签：c#, thread-safety, locking

我正在审查顾问编写的一些代码，虽然已经出现了数十个危险信号，但我无法理解以下代码段：

```
private void foo()
{
    if (InvokeRequired)
    {
        lock (new object())
        {
            if (m_bar!= null)
                Invoke(new fooDelegate(foo), new object[] { });
        }
    }
    else
    {
        if(OnBazChanged != null)
            OnBazChanged();
    }
} 
```

lock(new object()) 在这里做什么？应该没有任何效果，因为它总是锁定在另一个对象上，但是这种锁定在整个代码中是持久的，即使在非复制和粘贴部分也是如此。这是 C# 语言中的一些特殊情况，它被编译成我不知道的东西，还是程序员只是采用了一些前一段时间碰巧工作的货物崇拜？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-08-20T07:38:42.787

如果有人看到这个，我不会感到惊讶：

```
private readonly object lockObj = new object();

private void MyMethod()
{
    lock(lockObj)
    {
        // do amazing stuff, so amazing it can only run once at a time
        // e.g. comands on the Mars Rover, or programs on iOS pre 4 / 5 ??
    }
} 
```

并认为他可以减少行数。

如果是这样的话，我会非常担心……

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-20T07:39:29.697

[这](http://social.msdn.microsoft.com/Forums/en-us/clr/thread/17ecc4d5-b860-4080-bc67-73a27b099827)是类似的问题和答案：

> 锁确保互斥——不能超过一个线程同时持有锁。锁用一个特定的对象实例来标识。您每次都在创建一个要锁定的新对象，并且您无法通知任何其他线程锁定该完全相同的对象实例。因此，您的锁定是无用的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T02:21:09.570

它可能是无用的。但它的存在可能会造成内存屏障。不确定 c# 是否会锁定省略，或者是否会保留锁定的排序语义。

# c# - c# dll在vfp中，无法使用

> ID：12033796
> 
> 赞同：0
> 
> 时间：2012-08-20T07:34:09.910
> 
> 标签：c#, .net, visual-foxpro

我已经用 C# 编写了我的代码，并构建了 dll。当我在 vfp 中创建对象时，出现错误。

我在 vfp 中使用下面的代码

```
SET LIBRARY TO bt_print.tlb
hh=CREATEOBJECT("bt_print.bt") 
```

我的 C# 代码是

我已选中“注册 COM 互操作”复选框。

请纠正我，我做错了什么。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:58:56.537

选中“使程序集 COM 可见”- 项目设置、应用程序页面、程序集信息。

在 C# 中，添加 ClassInterface 和 ProgId。

```
using System;
using System.Runtime.InteropServices;

namespace bt_print

{
    [ClassInterface(ClassInterfaceType.AutoDual)]
    [ProgId("bt_print.bt")]
    public class bt
    {
        public void search_bt()
        {
        }

        public void sendfile(String fl)
        {
        }
    }
} 
```

在 VFP 中，使用 NEWOBJECT() 函数。

```
hh = NEWOBJECT("bt_print.bt") 
```

# c# - 为什么 RelayCommand RaiseCanExecuteChanged 在单元测试中不起作用？

> ID：12033798
> 
> 赞同：10
> 
> 时间：2012-08-20T07:34:21.267
> 
> 标签：c#, wpf, mvvm, mvvm-light, relaycommand

我正在使用 Nuget (4.1.23.0) 上可用的当前版本的 MvvmLight，并且在单元测试中调用 RaiseCanExecuteChanged 似乎没有做任何事情。场景很简单，我有一个命令：

```
public RelayCommand FooCommand { get; private set; } 
```

我在视图模型构造函数中新建了它，并将它指向一些私有方法：

```
FooCommand = new RelayCommand(Foo, CanFoo);

private void Foo()
{
    // do some fooing.
}

private bool CanFoo()
{
    return SomeRequiredProperty != null;
} 
```

然后在`SomeRequiredProperty`我调用 RaiseCanExecuteChanged 的​​设置器中：

```
public object SomeRequiredProperty
{
    get
    {
        return someRequiredProperty;
    }

    set
    {
        someRequiredProperty = value;
        FooCommand.RaiseCanExecuteChanged();
    }
} 
```

现在在单元测试中，我执行以下操作：

```
// Arrange
var canExecuteChanged = false;
viewModel.FooCommand.CanExecuteChanged += (sender, args) => canExecuteChanged = true;

// Act
viewModel.SomeRequiredProperty = new object();

// Assert
Assert.That(canExecuteChanged, Is.True); 
```

测试失败，因为我的事件处理程序没有触发。这是为什么？

**更新：**该行为确实在运行时起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T02:05:34.033

固定的！

[nemesv](https://stackoverflow.com/users/872395/nemesv)是正确的，因为它`FooCommand.RaiseCanExecuteChanged()`只是调用`CommandManager.InvalidateRequerySuggested()`.

除此之外，`FooCommand.CanExecuteChanged`只需将处理程序转发到`CommandManager.RequerySuggested`事件：

```
public event EventHandler CanExecuteChanged
{
    add
    {
        ...
        CommandManager.RequerySuggested += value;
    }
    ... 
} 
```

**问题的原因**是[CommandManager](http://msdn.microsoft.com/en-us/library/system.windows.input.commandmanager.aspx)类中的以下代码行：

```
private void RaiseRequerySuggested()
{
    ...
    _requerySuggestedOperation = dispatcher.
        BeginInvoke(
            DispatcherPriority.Background,
            new DispatcherOperationCallback(RaiseRequerySuggested),
            null); // dispatcher is the Dispatcher for the current thread.

    ...
} 
```

此行将具有[DispatcherPriority](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherpriority.aspx) `Background`的工作项放置在[Dispatcher](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.aspx)工作项队列中。工作项应该通知`CommandManager.RequerySuggested`事件的所有处理程序。

**问题**是这个工作项永远不会运行。

**解决方案**是强制调度程序运行工作项。

我在MVVM Foundation CodePlex 页面上的[讨论中找到了解决方案。](http://mvvmfoundation.codeplex.com/discussions/68127)我设法将代码简化为以下帮助程序类。

```
public static class DispatcherTestHelper
{
    private static DispatcherOperationCallback exitFrameCallback = ExitFrame;

    /// <summary>
    /// Synchronously processes all work items in the current dispatcher queue.
    /// </summary>
    /// <param name="minimumPriority">
    /// The minimum priority. 
    /// All work items of equal or higher priority will be processed.
    /// </param>
    public static void ProcessWorkItems(DispatcherPriority minimumPriority)
    {
        var frame = new DispatcherFrame();

        // Queue a work item.
        Dispatcher.CurrentDispatcher.BeginInvoke(
            minimumPriority, exitFrameCallback, frame);

        // Force the work item to run.
        // All queued work items of equal or higher priority will be run first. 
        Dispatcher.PushFrame(frame);
    }

    private static object ExitFrame(object state)
    {
        var frame = (DispatcherFrame)state;

        // Stops processing of work items, causing PushFrame to return.
        frame.Continue = false;
        return null;
    }
} 
```

我的测试现在看起来像这样：

```
// Arrange
var canExecuteChanged = false;
viewModel.FooCommand.CanExecuteChanged += 
    (sender, args) => canExecuteChanged = true;

// Act
viewModel.SomeRequiredProperty = new object();
DispatcherTestHelper.ProcessWorkItems(DispatcherPriority.Background);

// Assert
Assert.That(canExecuteChanged, Is.True); 
```

而且，最重要的是，它通过了:)

# html - 如何加密HTML5视频源标签，避免用户知道视频路径？？？

> ID：12033803
> 
> 赞同：0
> 
> 时间：2012-08-20T07:34:39.480
> 
> 标签：html, video

我想限制用户直接查看我保存它们的网站中的视频路径。
请尽快恢复。
您的有用答案将不胜感激。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:39:55.937

我不知道是否可以这样做。

我想到的一些解决方案：

*   **使用SHA1**或**MD5**加密视频 URL，并通过 JavaScript/jQuery 将其解密。
*   使用 PHP 或其他动态 url，例如`http://example.com/video.php?id=1`（我认为最终他们将能够保存它，具体取决于您的实现）。

# javascript - 'get_masterTableView' 不在 NestedView 中找到的网格中

> ID：12033812
> 
> 赞同：2
> 
> 时间：2012-08-20T07:35:20.777
> 
> 标签：javascript, telerik, radgrid

我有一个网格（“gridA”），在嵌套视图中有另一个网格（“gridB”）

在“gridB”中有一个 RadMenu，当单击 rad 菜单时，会调用一个 js 函数，请参见下面的代码示例。

```
 function missionGridRadMenuClicking(rowIndex, missionGridId) {
            var grid = $find(missionGridId);

            var masterTableView = grid.get_masterTableView(); 
```

上面代码的最后一行出现以下错误。

> “对象不支持属性或方法‘get_masterTableView’”

我在用 IE 调试时附加了网格属性。调试的时候也看不到`get_masterTableView()`。

附图：[http ://www.telerik.com/ClientsFiles/383268_nestedGrid-properties-and-methods.jpg](http://www.telerik.com/ClientsFiles/383268_nestedGrid-properties-and-methods.jpg)

任何人都对这个问题有想法。我看到的主要不同是另一个网格的 NestedView 中的这个网格。

先感谢您，

# java - 是否有任何支持 java.nio.channels.SocketChannel 的 ssh 客户端？

> ID：12033813
> 
> 赞同：4
> 
> 时间：2012-08-20T07:35:21.050
> 
> 标签：java, ssh, client, selector, nio

我开发了一个代理应用程序，用户可以通过它远程登录并发送“连接到 xxx”命令以连接到 ssh 服务器。我使用 JSch 作为我的 ssh 客户端：

```
JSch jsch = new JSch();
Session session = jsch.getSession(username, ip, 22);
Channel channel = session.openChannel("shell");
InputStream inp = channel.getInputStream();
OutputStream oup = channel.getOutputStream();
MyReader myReader = new MyReader(userOutputStream, inp);
new Thread(myReader).start();
MyWriterThread myWriter = new MyWriter(userInputStream, oup);
new Thread(myWriter).start(); 
```

然后在这两个新线程中分别处理输入和输出。但是代理的性能随着并发线程过多的用户量的增加而迅速下降。所以我想使用 java.nio.channels.Selector 和 SocketChannel 来减少线程数量。但是我找不到支持 java.nio.* 的 ssh 客户端（例如：JSch、Apache sshd、sshtools 等）。是否还有其他支持 java nio 的 ssh 客户端？或者是否有一些方法可以将输入/输出流与 Selector 和 SocketChannel 连接起来？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-15T23:49:28.983

截至 2015 年，JSCH 有一个 nio 分支：

[https://github.com/lucastheisen/jsch-nio](https://github.com/lucastheisen/jsch-nio)

我已经使用过它，它确实显着提高了吞吐量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-02T00:56:09.113

还有 eBay 的[Parallec](http://www.parallec.io/)，它使用[Akka](http://akka.io/)。

# cocoa-touch - 在开发过程中，如何检查 coredata 版本控制是否正常工作？

> ID：12033815
> 
> 赞同：0
> 
> 时间：2012-08-20T07:35:30.770
> 
> 标签：cocoa-touch, core-data, core-data-migration

我已经向现有的 coreData 添加了一个实体，并且我也启用了`NSMigratePersistentStoresAutomaticallyOption`标志。因为我添加了一个实体，我猜！无需定义版本的自定义映射。

因此，我在选择版本 2 的情况下重新运行该应用程序，但在没有日志的情况下崩溃了。你能帮助我如何测试版本控制吗？

在此先感谢，文卡特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:53:13.790

当我提供两个标志时，重新运行该应用程序有效。即，`NSMigratePersistentStoresAutomaticallyOption`和`NSInferMappingModelAutomaticallyOption`。

如果它可以自动迁移，那么它可以重新运行，否则我们需要相应地编写映射和迁移管理器编码器。

问候，文卡塔劳 N.

# c++ - 为什么在 boost 程序（boost::filesystem）中输出“总线错误：10”？

> ID：12033816
> 
> 赞同：1
> 
> 时间：2012-08-20T07:35:36.183
> 
> 标签：c++, macos, boost, g++, boost-filesystem

[我在问题如何将字符串类型路径传递给 boost::filesystem:path 的构造函数](https://stackoverflow.com/questions/12031898/how-to-pass-a-string-type-path-to-boostfilesystempaths-constructor)中成功编译了程序？但是，输出结果显示的比预期的要多。

```
Folder status: 0
Bus error: 10 
```

第一行是唯一的预期结果。我不明白为什么第二个来了？

我通过 gdb 获得以下调试信息：

```
(gdb) run
Starting program: /Users/ZL/Desktop/mtfsg 
Reading symbols for shared libraries ++++............................. done
Folder status: 0

Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_PROTECTION_FAILURE at address: 0x00007fff5fc005a0
0x00007fff9046aab7 in std::basic_string<char, std::char_traits<char>, 
std::allocator<char>>::~basic_string ()
(gdb) bt
#0  0x00007fff9046aab7 in std::basic_string<char, std::char_traits<char>, 
std::allocator<char> >::~basic_string ()
#1  0x00000001000018dd in main () at m.cpp:12 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:32:07.567

最后，我在我的代码中找到了错误点：

在 OSxFS 类（tfs.h 文件）中，方法“string ShowStatus()”的返回类型“string”不正确。此方法不需要返回值，因为它的功能只是在屏幕上打印目录（文件夹）状态。所以，我用“void”替换了“string”返回类型。

方法“string ShowStatus()”的原始代码

```
**string** ShowStatus()
    {
      boost::filesystem::file_status folderStatus =
       boost::filesystem::status(mFolderPath);

      try
      {
        cout<<"Folder status: "<<boost::filesystem::is_directory(folderStatus)<<endl;
      }
      catch(boost::filesystem::filesystem_error &e)
      {
        cerr<<"Error captured: "<<e.what()<<endl;
      }
    } 
```

正确的代码：

```
**void** ShowStatus()
    {
      boost::filesystem::file_status folderStatus = 
       boost::filesystem::status(mFolderPath);

      try
      {
        cout<<"Folder status: "<<boost::filesystem::is_directory(folderStatus)<<endl;
      }
      catch(boost::filesystem::filesystem_error &e)
      {
        cerr<<"Error captured: "<<e.what()<<endl;
      }
    } 
```

# iphone - iOS - Resty 将图像发布到服务器

> ID：12033820
> 
> 赞同：0
> 
> 时间：2012-08-20T07:35:50.423
> 
> 标签：iphone, ios, rest, http-headers

我之前使用[这种方法](https://stackoverflow.com/a/937475/928315)将图像发布到服务器，但它有点复杂，因为我必须自己添加标题和边界。昨天我发现了一个名为[Resty](http://projects.lukeredpath.co.uk/resty/)的项目——“A simple Objective-C HTTP client for iOS and Mac”。但是，在阅读了它的所有文档后，我找不到任何上传图像文件的方法。请帮忙，非常感谢。

```
NSMutableDictionary *params = [NSMutableDictionary dictionary];
[params setObject:@"this is a title" forKey:@"title"];

// ***How can I add an image by Resty?***
[params setObject:UIImageJPEGRepresentation(self.image, 1.0) forKey:@"image"];

LRRestyClient *client = [LRResty client];
[client setUsername:userId password:userToken];
[client post:APIImageUrl payload:params withBlock:^(LRRestyResponse *response){
    NSLog(@"Done");
}]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T05:52:29.480

我使用[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/How-to-use)，它非常简单且功能强大。我认为使用这个库是另一种选择。

我的示例代码是...

```
NSURL *url = [NSURL URLWithString:@"http://endpoint"];
NSData *data = [self addMetadata:UIImageJPEGRepresentation(self.image, 1.0)];

ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[ASIFormDataRequest setDefaultTimeOutSeconds:90];
[ASIFormDataRequest setShouldThrottleBandwidthForWWAN:YES];

[request setNumberOfTimesToRetryOnTimeout:3];
[request setAllowCompressedResponse:NO];

[request setData:data withFileName:@"photo.jpg" andContentType:@"image/jpeg" forKey:@"image"];
[request startSynchronous]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:38:42.403

我认为这个框架不能正确处理图像数据和自定义参数你可以关注这个主题并创建正确的 NSData 格式

[如何使用 HTTP POST 上传图像和文本？](https://stackoverflow.com/questions/5422028/objective-c-how-to-upload-image-and-text-using-http-post)

或者，如果您个人想要更成熟的框架，我建议使用 restkit。在我的项目中，我使用此示例代码将图像发送到休息服务

```
 RKObjectManager *service = restkit_manager; //initialized previously
      [service loadObjectsAtResourcePath:@"/api/ChangeProfileImage" usingBlock:^(RKObjectLoader *loader) {
            loader.delegate      = self;
            loader.method        = RKRequestMethodPOST;
            loader.cachePolicy   = RKRequestCachePolicyNone;
            loader.objectMapping = (RKObjectMapping *) [service.mappingProvider mappingForKeyPath:MAPPING_PROFILE_IMAGE_UPDATE];

            NSMutableDictionary *params_dict = [NSMutableDictionary new];

           //custom parameters
           [params_dict setValue:UserKey forKey:@"UserKey"];

            RKParams *params = [RKParams paramsWithDictionary:params_dict];
            //encoded image
            [params setData:data MIMEType:@"image/png" forParam:@"FileName"];

            loader.params                = params;
            loader.serializationMIMEType = RKMIMETypeJSON;
        }]; 
```

这张幻灯片可能会给出想法[http://www.slideshare.net/tkalapun/restfull-with-restkit](http://www.slideshare.net/tkalapun/restfull-with-restkit)

# shell - 在运行时评估 Unix 中的变量

> ID：12033825
> 
> 赞同：1
> 
> 时间：2012-08-20T07:36:11.297
> 
> 标签：shell, unix, sed, awk

我有一些奇怪的要求要在 Unix 脚本中解决。

假设我有一个文件包含

```
a=4
b=3
c=a+b
d=c+a
e=a+b+5+d 
```

我必须得到像

```
a=4
b=3
c=7
d=11
e=23 
```

我已经尝试使用 AWK，使用的逻辑是 RHS 变量中可用的任何内容，例如，我将用 ${variable} 替换它

```
e=a+b+5+d 
```

将作为

```
e=${a}+${b}+5+${d} 
```

但我不确定如何`"a,b,d"`在 AWk 中当前运行的 shell 中获取价值。在将 a=4 写入文件后使用“source”关键字。但它不工作。

请提出其他方法，因为我认为我的方法行不通。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T07:42:29.767

如果您在文件中有公式`expr.sh`，那么这将起作用：

```
sed -e 's:=:=$((:' -e 's:$:)):' expr.sh |bash -x 
```

解释：`e=$((a+b+5+d))`将评估和之间的表达式`$((`（`))`包括扩展所有变量）并将结果分配给`e`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:11:32.100

```
bc -q inputfile <(echo '"a="; a; "b="; b; "c="; c; "d="; d; "e="; e; halt') 
```

如果您的 shell 或环境不支持进程替换：

```
{ cat inputfile; echo '"a="; a; "b="; b; "c="; c; "d="; d; "e="; e; halt'; } | bc -q 
```

如果您使用的是 GNU `bc`，则可以使用以下`print`语句：

```
bc -q inputfile <(echo 'print "a=", a, "\n", "b=", b, "\n", "c=", c, "\n", "d=", d, "\n", "e=", e, "\n"; halt') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T11:38:55.217

您可以在 shell 本身中执行此操作，无需外部工具。

如果 shell 是 ksh、bash 或 zsh，则将变量声明为整数，每个赋值将在解析时执行算术运算。

```
typeset -i a b c d e
. ./assignments.sh 
```

如果您事先不知道变量列表，请将其解析出来。

```
typeset -i $(<assignments.sh sed -n 's/^ *\([A-Z_a-z][0-9A-Z_a-z]*\)=.*/\1/p')
. ./assignments.sh 
```

请注意，这假定算术计算内部或符号周围没有空格`=`，并且文件中没有其他内容（可以在 shell 语法中添加注释，例如以 开头的行`#`）。

如果您只能假设一个 POSIX shell，或者如果算术分配包含空格，您将需要显式地进行算术计算。

```
while IFS='=' read -r var expr; do
  var=$((set -f; echo $var)) # strip leading and trailing whitespace from $var
  eval "$var=\$(($expr))"
done <assignments.sh 
```

同样，此代码假定文件仅包含如下行

```
a=3
b = a + 7 
```

如果需要，请添加错误检查。

# javascript - XMLHttpRequest : Access-Control-Allow-Origin 不允许

> ID：12033829
> 
> 赞同：0
> 
> 时间：2012-08-20T07:36:16.143
> 
> 标签：javascript

```
XMLHttpRequest cannot load http://example.mobi/. Origin http://www.example.mobi is not allowed by Access-Control-Allow-Origin. 
```

如何在两个相同的域上出现相同的来源错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:40:14.743

注意 url 不同，www 被认为是您应用程序下的默认子域，当您请求[http://example.mobi](http://example.mobi)时，它被假定为不同的 url。您应该使用相对 url 并让浏览器查询正确的 url。 .

希望有帮助..

# macos - 点击查看

> ID：12033832
> 
> 赞同：0
> 
> 时间：2012-08-20T07:36:31.327
> 
> 标签：macos

我有一个 Mac OS X 应用程序。当我在上面堆放一些窗户时，它有一个窗户。我点击了一个不接受鼠标的地方。下面窗口中的视图响应鼠标。如何避免这种情况。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T09:29:04.403

我使用方法 hitTest: 检查视图是否是窗口上最远的视图。

# sql-server - 您将如何在数据库中建模以下内容

> ID：12033834
> 
> 赞同：0
> 
> 时间：2012-08-20T07:36:32.807
> 
> 标签：sql-server

您将如何在数据库中建模以下内容（对象类型加下划线）？

> 一个。一个**学生**可以参加多个课程。
> 
> 湾。每个**班级**与一所学校相关联
> 
> C。一**所学校**可以有很多班
> 
> d。每个班级有一位老师
> 
> e. 一个**老师**可以教很多课

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T07:50:15.047

无论我使用哪种类型的数据集来包含这些对象，我都会拥有：

一个**学校**列表，每个都包含它的**班级**对象，每个都包含对其**教师**和**学生的***引用*。

 ***** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T08:49:45.710

欢迎来到 StackOverflow。作为新用户，您需要阅读[常见问题解答](https://stackoverflow.com/faq)以了解您应该提出的问题类型。大多数情况下，您需要付出一些努力，以及为什么您会遇到问题。

这是您的问题的指南

```
School(schoolID, name, ....)

--to associate with school add schoolID
Student(studentID, name, ...)

--to associate with school add schoolID
Teacher(teacherID, name, ....)

--associated with one school and one teacher as Foreign key
Class(classID, name,...., classTeacherID, schoolID) -- class belong to a Teacher and to a School

-- combination of studentID and classID must be unique
Student_AttendingClass(studentID, classID) -- Classes attended by student

Student   Class
-------------------
James     Class-A
James     Class-B
James     Class-C
Mike      Class-A
Mike      Class-C

--James attends 3 Classes: Class-A, Class-B and Class-C**

-- combination of teacherID and classID must be unique
Teacher_Class(teacherID, classID) --Classes taught by teacher

Teacher      Class
-------------------
Mr. Paul     Class-B
Mr. Paul     Class-C
Mr. Peter    Class-B
Mrs. Pat     Class-A
Mrs. Pat     Class-C

--Mr. Paul teaches Class-B and Class-C while Mr. Peter teaches only Class-B 
```

阅读有关实体关系的更多信息。这是一个：[表关系指南](https://stackoverflow.com/faq)****

# objective-c - 如何从可可 keyDown 事件中获取 unicode 字符串？

> ID：12033836
> 
> 赞同：1
> 
> 时间：2012-08-20T07:36:35.273
> 
> 标签：objective-c

我读过可可关键事件处理文档。并获得如下代码片段示例：问题是当我更改除英语以外的输入法（如中文）时。代码片段不起作用，它仍然返回单个字母字符，但不是 unicode 中文字符。有什么建议还是我遗漏了部分文件？

```
- (void)keyDown:(NSEvent *)theEvent
{
    [self interpretKeyEvents:[NSArray arrayWithObject:theEvent]];
}

// The following action methods are declared in NSResponder.h
- (void)insertTab:(id)sender
{
    if ([[self window] firstResponder] == self)
    {
        [[self window] selectNextKeyView:self];
    }
}

- (void)insertBacktab:(id)sender
{
    if ([[self window] firstResponder] == self)
    {
        [[self window] selectPreviousKeyView:self];
    }
}

- (void)insertText:(id)string
{
    [super insertText:string];  // have superclass insert it
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:43:05.870

如果默认实现（`[NSEvent characters]`？？`charactersIgnoringModifiers`）不起作用，您可以尝试通过事件的 访问该值`@property CGEvent`，然后查看是否使用类似`CGEventKeyboardGetUnicodeString`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T18:09:23.210

如果您正在捕获文本`NSTextView`（我猜您是，因为您有`-insertText:`），那么您可以使用`NSTextViewDelegate`捕获 Unicode 输入。

例如，实施`[NSTextViewDelegate textView:shouldChangeTextInRange:replacementString:]`.

与`NSEvent`在击键级别操作的 不同，此方法在更高级别的 Unicode 字符上操作。

# jquery-mobile - jquery mobile 播放声音 onclick

> ID：12033837
> 
> 赞同：0
> 
> 时间：2012-08-20T07:36:42.393
> 
> 标签：jquery-mobile, html5-audio

我正在使用 HTML5 和 jQuery mobile 为智能手机开发一个 Web 应用程序，并且我的页面中有 5 个按钮（5 个选项），所以我想为每个按钮播放不同的哔声。我怎样才能做到这一点！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:48:33.187

在您的 HTML 中的某处：

```
<button id="button1Id">Button 1</button> 
```

设置按钮的监听器，例如：

```
$("#button1Id").click( function (event) {
    //Prevent the default button action (I suppose the default click sound is,
    //if it exists on thedevice, is removed by this)
    e.preventDefault(event);

    //TODO: Insert code for audio file playback here

    $.mobile.changePage("destination.html");
} 
```

然后你可以对所有不同的按钮重复这个代码。我没有包含用于音频播放的代码，因为如果您需要帮助，问题中并不清楚。有几种方法可以实现它，例如，您可以使用：[https ://developer.mozilla.org/en-US/docs/HTML/Element/Audio](https://developer.mozilla.org/en-US/docs/HTML/Element/Audio)

# c++ - C/C++：释放或删除动态创建的内存块

> ID：12033842
> 
> 赞同：3
> 
> 时间：2012-08-20T07:37:13.583
> 
> 标签：c++, c, pointers, dynamic-memory-allocation

> **可能重复：**
> [C++ 删除 - 它删除了我的对象但我仍然可以访问数据？](https://stackoverflow.com/questions/1930459/c-delete-it-deletes-my-objects-but-i-can-still-access-the-data)

我正在尝试在 C/C++ 中释放一块动态创建的内存。
但是我使用的两种标准方法（malloc/free 和 new/delete）似乎都无法正常工作。
下面给出的两个代码的 o/p 是相似的。
这是使用 malloc/free 的代码：

```
 #include<stdio.h>
    #include<stdlib.h>

    int main(){
        int * arr;
        arr = (int *)malloc(10*sizeof(int)); // allocating memory
        int i;
        for(i=0;i<10;i++)
            arr[i] = i;
        for(i=0;i<10;i++)
            printf("%d ",arr[i]);
        printf("\n");
        free(arr); // deallocating
        for(i=0;i<10;i++)
            printf("%d ",arr[i]);
        printf("\n");
    } 
```

这是使用 new/delete[] 的代码：

```
 #include<stdio.h>
    #include<stdlib.h>

    int main(){
        int * arr;
        arr = new int[10]; // allocating memory
        for(int i=0;i<10;i++)
            arr[i] = i;
        for(int i=0;i<10;i++)
            printf("%d ",arr[i]);
        printf("\n");
        delete[] arr; // deallocating
        for(int i=0;i<10;i++)
            printf("%d ",arr[i]);
        printf("\n");
    } 
```

但是，即使在释放内存之后，它们都没有给出任何错误。
两种情况下的 o/p 相同：

```
0 1 2 3 4 5 6 7 8 9
0 0 2 3 4 5 6 7 8 9 
```

那么，在 C/C++ 中释放内存的正确方法是什么？另外，为什么即使在释放内存后数组也会被打印？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T07:39:45.163

因为释放/释放内存并不意味着*取消*或类似的事情。

释放内存（很可能）只会将那块内存标记为空闲，并且不会对它做任何其他事情，直到其他东西再次使用它。

这使得释放内存更快。

您在代码中拥有的是*未定义的行为*，因为您正在读取（使用）内存，而您根本不应该触摸这些内存。它被“释放”了，使用该内存可能会导致任何事情。在最好的情况下崩溃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T07:38:39.940

未定义的行为意味着**任何事情都可能发生**。包括看起来工作。

毫无疑问，当您访问已释放的内存时，您**会遇到未定义的行为。**就那么简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T07:38:59.577

系统可以自由地用释放的内存做任何它想做的事情，包括什么都不做。执行 a`free`或 a`delete` **并不能**保证释放的内存将被设置为零或任何其他值。数组中的值可能碰巧没有改变。这可能是典型的行为。

**但无论如何，在释放它之后**使用或访问这个内存是不正确的代码，并调用未定义的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T07:43:43.080

内存已被释放并已提供给操作系统用于其他任务。但是在这两者之间，如果操作系统不使用这个内存地址，之前在那个地址上写入的数据仍然存在。您的程序输出可以随时给出不同的输出，即未定义行为。

# objective-c - 提高 -[UIImage drawInRect:] CGContextRotateCTM 的性能

> ID：12033846
> 
> 赞同：1
> 
> 时间：2012-08-20T07:37:44.737
> 
> 标签：objective-c, ios, cocoa, core-graphics

我有一个项目，我必须在用户拇指下旋转一个大图像，它代表一个表盘，用户可以转动选择一年中的一天。我目前正在使用 CGContextRotateCTM() 和 -[UIImage drawInRect:] 但视网膜显示 iPad 上的性能并不好，具有讽刺意味的是，在视网膜前 iPad 上工作正常（只有 1/4 的像素可以推动）。我已经尽我所能来优化我的代码，仪器告诉我 87% 的时间都在 -[UIImage drawInRect:] 中。是否有人对如何获得一些显着的性能改进有任何提示，我是否应该寻找 CALayers 并旋转它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:48:52.817

将图像放在它自己的位置`UIImageView`，并将图像视图的`transform`属性设置为您的旋转变换。`CGContext`这将比使用旋转的 CTM将图像绘制成图像要快得多。

# javascript - 用于自动将一种类型的 url 更改为另一种类型的插件

> ID：12033850
> 
> 赞同：0
> 
> 时间：2012-08-20T07:37:49.160
> 
> 标签：javascript, url, firefox, plugins

我有一组形式为[http://www.foo.in/x/](http://www.foo.in/x/) * 的内部大学链接，它们只有在手动更改为[http://www.foo.in/x/y/](http://www.foo.in/x/y/) *时才有效

当我点击它们时，是否有任何插件可以帮助我自动将第一种类型的所有链接更改为第二种？如果没有，有没有办法编写这样的插件？

我在 linux 上使用 firefox/chrome。

我以前从未写过任何插件，也听说过 java 脚本但从未写过任何插件。

对于这个方向的任何链接，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:09:16.250

试试这个...简单的 jQuery 代码来替换文档上的所有链接，但仅限于特定的类。

**HTML**

```
<a href="http://www.foo.in/x/foo.html" class="link">Link one</a>
<a href="http://www.foo.in/x/bar.html" class="link">Link two</a>
<a href="http://www.foo.in/x/bar.html">Link tree (not affected)</a>​ 
```

**jQuery**

```
$(document).ready(function() {
    $('.link').each(function() {
        var newLink = $(this).attr('href');
        newLink = newLink.replace("/x", "/x/y");
        $(this).attr('href',newLink);
    });
}); 
```

[现场示例](http://jsfiddle.net/bFWR7/)

* * *

**编辑**以匹配新信息：

在浏览器中创建一个新书签（chrome 中的 crtl+D）并编辑书签 url。用以下代码替换 url：

```
javascript:function getLinks(){var arr=new Array();arr=document.getElementsByTagName("a");for(var i=0;i<arr.length;i++){var link=document.getElementsByTagName("a").item(i).href;newLink=link.replace("/x","/x/y");document.getElementsByTagName('a').item(i).href=newLink;}};getLinks(); 
```

不要错过最初的“ *javascrip:* ”

现在，当您在要替换链接的页面中时，只需单击书签，链接就会被替换。

# javascript - Javascript：动态更改 onclick 具有“window.open”

> ID：12033858
> 
> 赞同：0
> 
> 时间：2012-08-20T07:38:18.120
> 
> 标签：javascript, onclick, window.open

我想改变我的 onclick 的值，我试过了，但它不起作用。有什么帮助吗？

```
<a href='#' id='social' onClick="">click</a>
document.getElementById("social").onclick = "open_new_window('https://twitter.com/share?url=https%3A%2F%2F"+url+"&amp;via=iguestblogger&amp;text="+title+"');"; 
```

注意：`url`,`title`并且`open_new_window()`已经定义并且可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:39:51.920

无需更改`onclick`属性的值，只需绑定事件即可。

```
document.getElementById("social").onclick = function() {
  open_new_window('https://twitter.com/share?url=https%3A%2F%2F'+url+'&amp;via=iguestblogger&amp;text='+title);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:40:04.773

```
document.getElementById("social").onclick = function(){open_new_window('https://twitter.com/share?url=https%3A%2F%2F"+url+"&amp;via=iguestblogger&amp;text="+title+"');}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T07:40:20.960

假设前面已经定义了 url 和标题以及函数 open_new_window - 还要注意你的报价

```
<a href='#' id='social' >click</a>
<script>
document.getElementById("social").onclick = function()
  open_new_window("https://twitter.com/share?url=https%3A%2F%2F"+url+"&amp;via=iguestblogger&amp;text="+encodeURI(title));
  return false;
}
</script> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-20T07:49:42.553

```
document.getElementById("social").onclick = open_new_window('https://twitter.com/share?url=https%3A%2F%2F"+url+"&amp;via=iguestblogger&amp;text="+title+"'); 
```

# python - virtualenv 的跨平台接口

> ID：12033861
> 
> 赞同：17
> 
> 时间：2012-08-20T07:38:30.583
> 
> 标签：python, django, virtualenv, cloud-hosting, paas

我在 Windows 上开发了我的整个项目（Django、Python），所有的 PaaS 都使用 Linux。

```
VirtualEnv on Linux:

VirtualEnv_dir /
                 bin/ activate, activate_this.py
                 include /
                 lib /
                 local /

VirtualEnv of Windows:

VitualEnv_dir /
                Include/
                Lib /
                Scripts/ activate.bat, activate_this.py 
```

由于 virtualenv 在 Windows 和 Linux 中有很多不同。我应该如何在 PaaS 上使用我的 windows virtualenv？

**编辑：**

如果我在窗户上，我需要跑`call virtualenv_dir/scripts/activate.bat`进去。在 Linux 中，它的东西`source virtualenv_dir/bin/activate`。

现在，我的 repo 包含一个使用 Windows（使用 .bat）生成的 virtualenv。当我将 repo 推送到 Linux 系统时，我应该如何运行它？（bat 文件不起作用！）

我正在使用 OpenShift PaaS，我想在 Git repo 上放置一个 virtualenv。我怎样才能激活它？

什么是最好的解决方案

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-20T08:27:40.053

除非您使用某些 Windows 特定库；或替代 Python 实现（如 IronPython），没有什么可担心的。

许多人（包括我自己）使用 Windows 进行开发并在 Linux 上部署用于生产，并为此使用 virtualenv。它旨在使您的环境可移植。

您不会将整个 virtualenv 推送到 Linux。

准备好虚拟环境并且代码正常运行后，您应该冻结应用程序的要求：

```
pip freeze > requirements.txt 
```

在您的目标操作系统中；创建一个*空*的虚拟环境：

```
virtualenv --no-site-packages prod_env 
```

在最近的版本中`virtualenv`,`--no-site-packages`是默认值。

接下来，使用开发中的需求文件填充环境：

```
source prod_env/bin/activate
pip install -r requirements.txt 
```

当您有需求更改时，只需重新生成`requirements.txt`文件并`pip install -r requirements.txt`在生产中运行。

在某些情况下，您的生产系统无法访问 Internet 来下载软件包，因此该`pip install`技巧不起作用。对于这些场景，您可以创建自己的[私有 pypi 服务器](http://pypi.python.org/pypi/mypypi)并将您的包推送到那里。通过这条路线的额外好处是，您可以创建和推送私有包并使用普通的 setuptools 实用程序安装它们。

一旦你决定了哪个过程适合你——然后你在你的部署脚本中自动化它；通常与您的源代码管理系统挂钩。有些人更喜欢一个单独的发布工程过程（有一个发布经理——那是一个人，而不是一个程序）。

# regex - 正则表达式查找注释和字符串之外的单词

> ID：12033866
> 
> 赞同：0
> 
> 时间：2012-08-20T07:38:54.627
> 
> 标签：regex

我想制作一个脚本，将我在 Fortran 90 中的源代码的关键字大写，为此我考虑过使用正则表达式和`sed`（这可能是我的第一个错误：P）。但是，我还没有设法获得一个匹配项，它丢弃注释上的单词（在我的代码中，之后的所有内容`!`）和字符串（单`'...'`引号或双引号之间的所有内容`"..."`）。

这个想法是有一个包含 Fortran 的所有关键字（if、end if、subroutine、abs、allocate...）的列表，并将 sed 与这个正则表达式一起使用。请告诉我如何做到这一点，以及这种方法是否正确或有更好的方法来完成我想要的。它必须是可能的，因为编辑器以某种方式正确地突出了这些词。伙计，如果我能告诉 Emacs “请把蓝色单词大写！” :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:54:16.360

当然有更好的方法，但我现在不能说

因此，使用正则表达式，您应该执行以下步骤：

1.  删除注释和字符串；将它们存放在任何地方
2.  搜索关键字并做任何你想要的突出显示
3.  重置删除的字符串和注释

对于重置，您可能可以将它们替换为存储它们的数组的索引

如果您的字符串不超过几行，您可以每行执行这些步骤

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:58:57.627

不知道 sed，但是使用 Perl，您可以使用类似的东西：

```
perl -p -E 's/(\'[^\']*\'|"[^"]*"|!.*)|\b(if|end|subroutine|abs|allocate)\b/$1\U$2/gi' file 
```

（根据需要调整引用/评论表达式。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T19:49:03.553

最后一个朋友为我找到了一个解决方案，不是使用正则表达式而是 python。我在这里分享它以防其他人面临这个问题。这是python代码；它有两个参数：输入和输出文件。

```
#!/usr/bin/python

import sys
import re

if (len(sys.argv)<3):
  print "Try with two arguments."
  sys.exit()

FILEIN  = sys.argv[1]
FILEOUT = sys.argv[2]

substitutions = {                                    \
            "call":"CALL"                           ,\
            "parameter":"PARAMETER"                 ,\
            "allocatable":"ALLOCATABLE"             ,\
            "dimension":"DIMENSION"                 ,\
            "integer":"INTEGER"                     ,\
            "logical":"LOGICAL"                     ,\
            "double precision":"DOUBLE PRECISION"    \
            }

patterns = []
for s in substitutions:
  patterns.append(["(^[^!]*)\\b%s\\b"%s,"\\1%s"%substitutions[s]])
  patterns.append(['("[^"]*)\\b%s\\b([^"]*")'%substitutions[s],"\\1%s\\2"%s])
  patterns.append(["('[^']*)\\b%s\\b([^']*')"%substitutions[s],"\\1%s\\2"%s])
  patterns.append(["(\([^\)]*)\\b%s\\b([^\)]*\))"%substitutions[s],"\\1%s\\2"%s])

retList = []
f = open(FILEIN,"r")
for line in f:
  for p in patterns:
    prevLine=""
    nextLine="1"
    while (prevLine!=nextLine):
      nextLine = re.sub(p[0],p[1],line)
      prevLine = line
      line = nextLine
  retList.append(line)
f.close()

f = open(FILEOUT,"w")
f.write(''.join(retList))
f.close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T11:45:58.543

[https://gist.github.com/3414783](https://gist.github.com/3414783)

此命令应将关键字大写

警告：当关键字没有按照 Emacs 的方式编写时，字体化将会丢失。

# c++ - 如何用 c++ 表达匿名方法覆盖，就像在 java 中一样？

> ID：12033871
> 
> 赞同：0
> 
> 时间：2012-08-20T07:39:20.427
> 
> 标签：c++, syntax

```
new DialogInterface.OnKeyListener()
{
    @Override
    public boolean onKey(DialogInterface d, int keyCode, KeyEvent event) {
        return false;
    }

} 
```

以上使用起来非常方便，

用 C++ 编写它的最接近的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T07:40:34.810

在 C++ 中，您只能`virtual`通过定义覆盖方法。

C++11 引入了`override`关键字，它以与 Java 等效项相同的方式提醒您：

```
virtual void foo() override; 
```

在 C++11 之前没有这样的标准机制。

# c# - DbConnection 是否在超出范围时关闭和处置？

> ID：12033872
> 
> 赞同：2
> 
> 时间：2012-08-20T07:39:24.347
> 
> 标签：c#, .net, ado.net, garbage-collection, dispose

> **可能重复：**
> [关闭并处理 - 调用哪个？](https://stackoverflow.com/questions/61092/close-and-dispose-which-to-call)

我的数据层中的许多功能不受`try-catch`or`using`子句的保护。

我的 GUI 层有`try-catch`子句。这够了吗？

`dbConnection`如果引发异常，我可以依赖被处置和关闭的对象和其他对象吗？GUI 层将处理异常。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T07:41:31.547

> 这够了吗？

没有。除了 via 之外，没有任何东西是自动处理的`using`。超出范围时不会收集对象 - 垃圾收集会在以后发生，间歇性，并且是不确定的。

如果您正在创建连接，请使用`using`除非那是不可能的（例如异步回调）。否则，您很容易最终会留下大量打开的连接对象，从而使服务器饱和。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:55:14.827

如前所述，垃圾收集与超出范围的变量无关。就 DbConnection 的 close 和 dispose 而言，如果调用 Dispose，则在 SqlConnection 的情况下，如果关闭连接然后将其释放。尽管还有其他提供者需要我们明确关闭然后处置。例如，在 ODP.Net 的 OracleConnection 中配置，不关闭连接。

您需要了解 DbConnection 是一个抽象类，当涉及到实际行为时，它完全取决于具体类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T07:50:40.057

也许*可以*做到这一点，但这并不意味着这是一个好主意。

一般来说，我肯定会在处理 DB-Connection 的逻辑周围使用一个`try-catch-finally`子句（或）。`using`由于您所询问的原因，这不仅会更安全，而且事情处理得当也会更清楚，如果您以后决定更改 GUI 层中的某些内容，则更难意外搞砸.

您应该在尽可能靠近您需要的地方处理这种类型的逻辑（以及实例的创建和处置）。

注意：一个`Finally`子句可以让您确保连接已关闭，但如果您需要的话，仍然让任何异常“冒泡”到顶部。

# asp.net - 如何获取用户控件的控件路径属性？

> ID：12033876
> 
> 赞同：2
> 
> 时间：2012-08-20T07:39:34.797
> 
> 标签：asp.net

我有一个托管在内容占位符中的用户控件。

这只是一种情况，但用户控件在整个站点中都得到了使用。

用户控件负责生成 JSON 请求，令我惊恐的是，我注意到表单元素 ID/名称不是我所说的 - 而是以 controlID_ContentPlaceHolderID_UserControl_MyActualFormElementName 为前缀

我知道如果我使用的是 .net v4，我可以将其关闭，但该项目是 v2。

请告诉我如何在后面的代码中获取控制路径，我的意思是动态确定 ctl00_ContentPlaceHolder_UserControlID 部分。

然后我可以创建另一个表单元素->通过名称发布->然后在发布后的服务器端，知道我的表单元素是什么。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T07:55:45.463

`CliendID`仅当您在 javascript 中引用控件时才应使用。

[javascript中控件名称中的ClientID](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid.aspx)。它存在于每个 Web 控件中。

> 当 Web 服务器控件呈现为 HTML 元素时，HTML 元素的 id 属性设置为 ClientID 属性的值。ClientID 值通常用于通过 document.getElementById 方法访问客户端脚本中的 HTML 元素。

它结合了父控件的名称来为javascript中的元素生成一个唯一的id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T07:50:06.587

从我的头顶开始，未经测试，对于给定的用户控件递归地找到父链中的第一个控件，在回程期间，为每个[ClientId](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid.aspx)建立“路径” ；

```
public string ClientIdPath(Control ctl)
{
     if (ctl.Parent !=null ) 
     { 
         return = string.Format("{0}_{1}", ClientIdPath(ctl.Parent), ctl.ClientId ); 
     }
     else
     {
         return ctl.ClientId;
     }
} 
```

# sql - SQL 查找违反 UNIQUE together 索引的行

> ID：12033877
> 
> 赞同：9
> 
> 时间：2012-08-20T07:39:43.443
> 
> 标签：sql, oracle11g

我想在表中的两个（或更多）列上放置唯一索引，但我得到“找到重复键”。如何选择那些导致重复的行？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-20T07:41:57.860

您可以为此使用`Group By`和：`Having`

```
SELECT col1,
       col2
FROM   table
GROUP  BY col1,
          col2
HAVING Count(*) > 1 
```

基本上 - 对值进行分组，然后过滤多个实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:55:44.870

您可以使用以下方法之一：

```
SELECT t1.rowid
FROM   this_table t1
WHERE  EXISTS (SELECT '1'
               FROM   this_table t2
               WHERE  t2.column_value1 = t1.column_value1
                      AND t2.column_value2 = t1.column_value2
                      AND t2.rowid > t1.rowid);

SELECT *
FROM   this_table_name a
WHERE  a.rowid > ANY (SELECT b.rowid
                      FROM   this_table_name b
                      WHERE  a.col1 = b.col1
                             AND a.col2 = b.col2);

SELECT my_column,
       Count(my_column)
FROM   this_table_name
GROUP  BY my_column
HAVING Count (my_column) > 1; 
```

# asp.net - 在 Telerik DataGrid 中拖放只会触发一次

> ID：12033881
> 
> 赞同：0
> 
> 时间：2012-08-20T07:39:55.150
> 
> 标签：asp.net, drag-and-drop, telerik-grid

我正在尝试在我的用户控件中实现拖放功能，这实际上是我的自定义向导步骤之一。[我已经在在线演示http://demos.telerik.com/aspnet-ajax/grid/examples/programming/draganddrop/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/grid/examples/programming/draganddrop/defaultcs.aspx)中实现了所有大部分代码部分，并面临下一个情况：仅拖放触发一次。在此之后它不再起作用，除非我刷新页面。控制台中没有 javascript 错误、警告或日志消息。在不同的浏览器中行为是相同的。有没有人熟悉这种问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:52:39.453

解决。问题包含在 RadAjaxPanel 中。所以就像这样 RadAjaxPanel -> RadAjaxPanel -> DataGrid

# excel - 在 Excel 2007 中自定义功能区时的 Blanc vbCritical VBA 消息

> ID：12033888
> 
> 赞同：2
> 
> 时间：2012-08-20T07:40:26.683
> 
> 标签：excel, excel-2007, ribbon, vba

我正在开发一个 Excel-2007/VBA 应用程序，其中自定义了 ribon 并且确实遇到了一个大问题。

在我的 Robbpn 中，有 10 个按钮附加了一个 getVisible 回调，一个还有一个动态标签（也使用回调）（= 总共 11 个回调）。这些都工作正常。

然而确实出现了两个问题：

1 不那么重要但可能相关）当我在 VBA 中设置断点运行我的宏程序时，一旦该断点出现并且 VBA 编辑器出现，我会收到 11 次警报，显示消息：无法在中断模式下执行代码。

2（重要错误）。在我的 VBA 应用程序中，我正在使用 Connection.ODBCConnection.Refresh 进行 sql 查询。这个查询很慢。大约 10 秒后，尽管 screenupdating=false，但我的窗口背景会更改（变为浅蓝色）。此时出现 11 个错误警报中的第一个。这些警报不包含任何文本，仅包含 vbCritical 图标、确定和帮助按钮。当按下 OK 按钮（11 次）时，我的程序继续完成刷新，一切都很好。

无论如何要消除这些警报。（顺便说一下，on 错误不会捕获它们，也不受 Application.displayAlerts true 或 false 或 screenUpdating true 或 false 的影响）。

有人有一些解决这个问题的技巧吗？伟大的约翰

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-05T21:54:01.887

我找到了解决方案。在公式的高级 Excel 选项中关闭多标题计算。我发现其他文档表明功能区回调不是线程安全的。

第 1 项是使用功能区时的预期行为。第二项不是有意的，我还没有找到解决方案。就我而言，发生这种情况时，我的功能区复选框将失去其状态。

# objective-c - 转换格式为 yyyy-MM-dd'T'HH:mm:ss.SSS 的日期

> ID：12033892
> 
> 赞同：3
> 
> 时间：2012-08-20T07:40:58.057
> 
> 标签：objective-c, cocoa, nsdateformatter

我几乎没有`NSDate`包含符合此格式的值的对象`yyy-MM-dd'T'HH:mm:ss.SSS`

当我尝试转换为其他格式时，例如`MMM dd, yyyy HH:mm`格式化程序总是返回`nil`.

但是，如果我对通过`NSDate`object 获得的字符串值进行硬编码，它会毫无问题地转换为新格式。

我使用该方法在模型中填充我的`NSDate`对象`setValue:forKey:`，我觉得问题出在 JSON 库传递字符串值的地方。但是，调试显示`NSDate`has 包含通过 JSON 返回的值。

知道是什么导致了这种奇怪的行为吗？

这是我的转换代码：

```
NSDateFormatter *format = [[NSDateFormatter alloc] init];
[format setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SSS"];
NSString *createdDateStr = [format stringFromDate:modelObj.createdDate];
[format setDateFormat:@"MMM dd, yyyy HH:mm"];

NSDate *formattedDate = [format dateFromString:createdDateStr];
NSLog(@"========= REal Date %@",[format stringFromDate:formattedDate]); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-20T07:45:36.063

编辑：重读你的问题，我认为除了其他任何东西之外，你还有一个概念上的误解：

> 我有几个 NSDate 对象，其中包含符合以下格式的值

据我所知（诚然，我不是 Objective-C 程序员）一个`NSDate`对象对格式化一无所知。它只代表一个瞬间。它不知道它是从文本中解析出来的还是以其他方式创建的。

这就像`int`- 一个`int`变量不是十进制或十六进制，它只是一个数字。当你格式化和解析你指定的时候。同样，您*在解析和格式化时*`NSDateFormatter`用来描述您想要的格式。

 ** * *

您目前只有*一个* `NSDateFormatter`- 您正在将格式设置为`"yyyy-MM-dd'T'HH:mm:ss.SSS"`然后在调用之前将其*重置*`dateFromString`。您已将格式指定`modelObj.createdDate`为 ISO-8601 格式的代码片段，但随后尝试使用“MMM dd, yyyy HH:mm”格式对其进行*解析。*

我建议你有两个单独的`NSDateFormatter`对象：

```
NSDateFormatter *isoFormat = [[NSDateFormatter alloc] init];
[isoFormat setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SSS"];
NSString *createdDateStr = [format stringFromDate:modelObj.createdDate];

NSDateFormatter *shortFormat = [[NSDateFormatter alloc] init];
[shortFormat setDateFormat:@"MMM dd, yyyy HH:mm"];

NSDate *parsedDate = [isoFormat dateFromString:createdDateStr];
NSLog(@"========= REal Date %@",[shortFormat stringFromDate:parsedDate]); 
```

请注意，我已将您的`formattedDate`变量更改为`parsedDate`，因为这才是真正的 -`NSDate`通过解析文本创建的。

如评论中所述，除非您确实*需要*像这样格式化和解析，否则您不应该这样做。*我包含了您*所有的原始代码，只是为了展示如何格式化日期，然后用相同的`NSDateFormatter`. 只需：

```
NSDateFormatter *shortFormat = [[NSDateFormatter alloc] init];
[shortFormat setDateFormat:@"MMM dd, yyyy HH:mm"];    
NSLog(@"========= REal Date %@",[shortFormat stringFromDate:modelObj.createdDate]); 
```

一般来说，您应该避免不必要的转换。*从*文本转换为更自然的数据类型（`NSDate`在这种情况下，但同样适用于数字等）并在尽可能多的代码中使用该数据类型，仅在最后一刻转换为文本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T07:54:47.263

问题是您正在从具有一种格式的日期创建字符串，然后尝试将其转换回具有不同格式的日期。要从字符串创建日期，您应该使用与创建该字符串相同的格式，否则您将得到 nil。如果您确实需要其他格式的格式化字符串，则首先从具有正确格式的字符串创建日期，然后将其转换回您想要的格式的字符串。问题是顺序。

```
NSDateFormatter *format = [[NSDateFormatter alloc] init];
[format setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SSS"];
NSString *createdDateStr = [format stringFromDate:modelObj.createdDate];

NSDate *formattedDate = [format dateFromString:createdDateStr];

[format setDateFormat:@"MMM dd, yyyy HH:mm"];
NSLog(@"========= REal Date %@",[format stringFromDate:formattedDate]); 
```

其他方法是使用[Jon Skeet](https://stackoverflow.com/users/22656/jon-skeet)建议的不同格式化程序，以避免混淆......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T07:52:15.030

您有一个`NSDate`, `modelObj.createdDate`，并且您想将其格式化为特定格式的字符串 , `MMM dd, yyyy HH:mm`。您不需要将日期转换为字符串，然后再转换回另一个字符串，然后再转换`NSDate`回字符串。如果您对这两个操作使用相同的格式化程序，那么您最终会得到与开始时相同的日期。

您只需将日期格式化一次，即可获得最终所需的外观：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"MMM dd, yyyy HH:mm"];
NSLog(@"========= REal Date %@",[format stringFromDate:modelObj.createdDate]); 
```

它`NSDate`本身不“符合以下格式”。它*没有*格式——它是一个时间点，一个参考日期的偏移量。如果您`NSLog()`这样做，它确实会将自己格式化为人类可读的字符串（可能在幕后使用日期格式化程序），但这只是它选择的一种表示形式。

现在，您正在`nil`从第二个格式化操作中获得信息，`NSDate *formattedDate = [format dateFromString:createdDateStr];`因为您传递给格式化程序的字符串格式必须与格式化程序所期望的完全匹配。在这种情况下，它不会，因为您使用 format 创建了字符串`yyyy-MM-dd'T'HH:mm:ss.SSS`，但已经告诉格式化程序 expect `MMM dd, yyyy HH:mm`。格式化程序因此无法解析字符串，并返回`nil`以指示失败。*

# mercurial - windows下如何使tortoisehg的代理服务器设置生效？

> ID：12033897
> 
> 赞同：8
> 
> 时间：2012-08-20T07:41:30.467
> 
> 标签：mercurial, tortoisehg

我在 Windows 中为我的 tortoisehg 在“全局设置”中设置了代理服务器。当我尝试连接到 bitbucket 存储库时，tortoisehg 生成的命令行是`hg clone --debug-- http://bitbucket.org/<path to repo>`.

控制台显示如下：

```
using http://bitbucket.org/<path to repo>
proxying through http://172.19.6.47:8080
http auth: user <username>, password not set
sending capabilities command 
```

我还运行wireshark 来监控流量。令我惊讶的是，流量直接转移到了 bitbucket。我认为它应该首先将数据包发送到代理服务器。是不是意味着我的代理服务器没有生效？我该怎么做才能让它生效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T04:04:30.747

您的`mercurial.ini`文件应该有这样的部分：

```
[http_proxy]
host = aproxy.somedomain.com:1234 
```

检查它是否存在。也许它没有正确保存？

我如上所述做了一个假条目并尝试拉动并立即连接到代理失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-07T00:57:54.607

以下两个网页有正确答案。

(1) [http://d.hatena.ne.jp/falkenhagen/20091007/1254909363](http://d.hatena.ne.jp/falkenhagen/20091007/1254909363)

(2) [http://www.jameswampler.com/2010/06/10/configure-mercurial-hg-to-use-a-proxy-server/](http://www.jameswampler.com/2010/06/10/configure-mercurial-hg-to-use-a-proxy-server/)

从第二个链接，他说：

我的笔记本电脑大部分时间都在我们的公司防火墙后面，因此无法对 bitbucket.org 进行 hg 推送/拉取失败，因为它没有命中或代理服务器。要设置 Mercurial 以使用代理服务器，请编辑存储库的 .hg 文件夹中的 hrgc 文件并添加此部分：

```
[http_proxy]
host = foo.bar:8000
passwd = password
user = username 
```

只需将值更改为您的代理服务器主机名和端口、用户名和密码。

# python - 使用 python 从时间列表中创建平均值

> ID：12033905
> 
> 赞同：10
> 
> 时间：2012-08-20T07:42:22.437
> 
> 标签：python

我有一个巨大的时间列表（HH：MM：SS），我知道如果我想创建一个平均值，我可以将小时、秒和分钟分开并平均每个，然后将它们连接在一起。但是我觉得必须有更好的方法来做到这一点。有谁知道更好的方法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-06-09T17:03:40.080

转换为自午夜以来的秒数并取平均值存在问题。如果您在 23:50 和 00:10 执行此操作，那么您将在 00:00 时获得 12:00。

更好的方法是[平均角度](https://rosettacode.org/wiki/Averages/Mean_time_of_day)。

```
import datetime
import math
import numpy

def datetime_to_radians(x):
    # radians are calculated using a 24-hour circle, not 12-hour, starting at north and moving clockwise
    time_of_day = x.time()
    seconds_from_midnight = 3600 * time_of_day.hour + 60 * time_of_day.minute + time_of_day.second
    radians = float(seconds_from_midnight) / float(12 * 60 * 60) * 2.0 * math.pi
    return radians

def average_angle(angles):
    # angles measured in radians
    x_sum = numpy.sum([math.sin(x) for x in angles])
    y_sum = numpy.sum([math.cos(x) for x in angles])
    x_mean = x_sum / float(len(angles))
    y_mean = y_sum / float(len(angles))
    return numpy.arctan2(x_mean, y_mean)

def radians_to_time_of_day(x):
    # radians are measured clockwise from north and represent time in a 24-hour circle
    seconds_from_midnight = int(float(x) / (2.0 * math.pi) * 12.0 * 60.0 * 60.0)
    hour = seconds_from_midnight / 3600
    minute = (seconds_from_midnight % 3600) / 60
    second = seconds_from_midnight % 60
    return datetime.time(hour, minute, second)

def average_times_of_day(x):
    # input datetime.datetime array and output datetime.time value
    angles = [datetime_to_radians(y) for y in x]
    avg_angle = average_angle(angles)
    return radians_to_time_of_day(avg_angle)

average_times_of_day([datetime.datetime(2017, 6, 9, 0, 10), datetime.datetime(2017, 6, 9, 0, 20)])
# datetime.time(0, 15)

average_times_of_day([datetime.datetime(2017, 6, 9, 23, 50), datetime.datetime(2017, 6, 9, 0, 10)])
# datetime.time(0, 0) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-20T07:54:35.380

您不想以这种方式“平均”小时、分钟和秒的时间：

```
00:59:00
01:01:00 
```

平均到`01:00:00`，但不符合您提出的逻辑。

而是将所有时间间隔转换为秒，计算平均值并转换回`HH:MM:SS`.

```
00:59:00 -> 3540 seconds
01:01:00 -> 3660 seconds
            ============
average:    3600 seconds converted to HH:MM:SS -> 01:00:00 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-20T08:52:23.303

这是@eumiro 答案的一种可能实现，但正如@lazyr 所指出的，这种逻辑仅在这些是持续时间而不是时间的情况下才有效：

```
from datetime import timedelta

times = ['00:58:00','00:59:00','01:00:00','01:01:00','01:02:00']

print(str(timedelta(seconds=sum(map(lambda f: int(f[0])*3600 + int(f[1])*60 + int(f[2]), map(lambda f: f.split(':'), times)))/len(times)))) 
```

[还要感谢](https://stackoverflow.com/questions/775049/python-time-seconds-to-hms)@SilentGhost[的帖子和](https://stackoverflow.com/questions/9039961/finding-the-average-of-a-list)@Herms的帖子

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-20T08:12:46.500

[首先使用strptime](http://docs.python.org/library/time.html#time.strptime)将时间从字符串格式解析为时间结构，然后使用[mktime](http://docs.python.org/library/time.html#time.mktime)将时间从纪元转换为秒，然后您应该将所有秒相加并除以次数，然后使用[localtime转换回时间结构](http://docs.python.org/library/time.html#time.localtime)

这是一个例子：

```
import time

a = time.strptime("2000:11:12:13","%Y:%H:%M:%S")
b = time.strptime("2000:11:14:13","%Y:%H:%M:%S")

avg_time = time.localtime(((time.mktime(a)+time.mktime(b))/2))

>> time.struct_time(tm_year=2000, tm_mon=1, tm_mday=1, tm_hour=11, tm_min=13, tm_sec=13, tm_wday=5, tm_yday=1, tm_isdst=0) 
```

请注意，我添加了 2000 年，因为`mktime`它是`OverflowError`默认的 1900 年

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-16T15:29:27.843

您需要将其转换为**复数**，取参数，然后平均度数。

最后，您需要解析日期以获取所需内容，然后转换回原始小时。

```
from cmath import rect, phase
from math import radians, degrees

def meanAngle(deg):
    complexDegree = sum(rect(1, radians(d)) for d in deg) / len(deg)
    argument = phase(complexDegree)
    meanAngle = degrees(argument)
    return meanAngle

def meanTime(times):
    t = (time.split(':') for time in times)
    seconds = ((float(s) + int(m) * 60 + int(h) * 3600) 
               for h, m, s in t)
    day = 24 * 60 * 60
    toAngles = [s * 360\. / day for s in seconds]
    meanAsAngle = meanAngle(toAngles)
    meanSeconds = meanAsAngle * day / 360.
    if meanSeconds < 0:
        meanSeconds += day
    h, m = divmod(meanSeconds, 3600)
    m, s = divmod(m, 60)
    return('%02i:%02i:%02i' % (h, m, s))

print(meanTime(["15:00:00", "21:00:00"]))
# 18:00:00
print(meanTime(["23:00:00", "01:00:00"]))
# 00:00:00 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-20T07:59:13.687

我认为最好的办法是将所有这些值转换为秒数并对整个列表进行平均。我假设这些时间是`mylist`.

```
 time_list = map(lambda s: int(s[6:8]) + 60*(int(s[3:5]) + 60*int(s[0:2])), mylist)
 average = sum(time_list)/len(time_list)
 bigmins, secs = divmod(average, 60)
 hours, mins = divmod(bigmins, 60)
 print "%02d:%02d:%02d" % (hours, mins, secs) 
```

这基本上是eumiro推荐的。第一行计算每个字符串的秒数。第二行对它们进行平均。接下来的两行计算出秒数/分钟数/小时数，第三行很好地格式化了输出。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-09-10T17:49:42.177

对于已经贡献的出色答案，可能有另一种方法，但它是针对特定情况的。例如，如果您有兴趣平均一天中人们上床睡觉的时间，通常是下午 6 点到早上 6 点之间的某个时间，您可以首先将小时和分钟转换为小数，这样 12:30 = 12.5 ，在那之后，您只需将 24 添加到估计平均值的时间范围内。对于将占用 0:00 和 6:00 AM 之间的时间的睡眠情况，这些时间变为 24.0 和 30。现在您可以像往常一样估计平均值。最后，如果平均值大于 24，则只需再次减去 24 即可：

```
def hourtoDec(data):
    '''
    Transforms the hour string values in the list data
    to decimal. The format assumed is HH:mm.
    Values are transformed to float
    For example for 5:30pm the equivalent is 17.5 
    This funtion preserves NaN values
    '''
    dataOutput=[]
    for i in data:
        if not(pd.isnull(i)):
            if type(i)==type("a"):
                    h,m=i.split(':')
                    h=int(h)
                    m=int(m)
                    dataOutput.append(h+m/60.0)
            if isinstance(i, (np.float, float)):
                    dataOutput.append(i)
        else:
            dataOutput.append(i)
    return dataOutput

timestr=pd.DataFrame([ "2020-04-26T23:00:30.000", 
                      "2020-04-25T22:00:30.000", 
                      "2020-04-24T01:00:30.000", 
                      "2020-04-23T02:00:30.000"],columns=["timestamp"])
hours=timestr['timestamp'].apply(lambda x: ":".join(x.split("T")[1].split(":")[0:2]))
hoursDec=hourtoDec(hours)

times2=[]
for i in hoursDec:
    if i>=0 and i<6:
        times2.append(i+24)
    else:
        times2.append(i)

average=np.mean(times2)
if average>=24:
    average=average-24
print(average) 
```

# c# - 如何将treenode保存为xml并加载？

> ID：12033910
> 
> 赞同：0
> 
> 时间：2012-08-20T07:43:08.783
> 
> 标签：c#, xml, treeview

我试图保存和加载我的树视图的树节点，我用树节点列表创建了树，如下所示：

```
 [Serializable]
public class Tree : List<TreeNode>
{
    public void Save()
    {

       System.Xml.Serialization.XmlSerializer x = new System.Xml.Serialization.XmlSerializer(typeof(Tree));
       System.IO.FileStream s = new System.IO.FileStream(Application.StartupPath + "\\nodes.xml", System.IO.FileMode.Create);
        x.Serialize(s, this);
        s.Flush();
        s.Close();
    }

    public static Tree Load()
    {
        System.Xml.Serialization.XmlSerializer x = new System.Xml.Serialization.XmlSerializer(typeof(Tree));
        System.IO.FileStream s = new System.IO.FileStream(Application.StartupPath + "\\nodes.xml", System.IO.FileMode.OpenOrCreate);
        Tree tree = x.Deserialize(s) as Tree;
        s.Close();
        return tree;
    }
} 
```

然后在保存按钮中我写了这个：

```
 private void SaveButton_Click(object sender, EventArgs e)
    {
        this.SaveButton.Enabled = false;
        Tree tree = new Tree();
        foreach (TreeNode treeNode in this.treeView1.Nodes)
        {
            tree.Add(treeNode);
        }
        tree.Save();
        MessageBox.Show("Saved Successfully.", "", MessageBoxButtons.OK, MessageBoxIcon.Information);
        this.SaveButton.Enabled = true;
    } 
```

在加载的表格中，我使用了这个：

```
private void Form1_Load(object sender, EventArgs e)
    {

        Tree tree = Tree.Load();
        //Process Tree
        foreach (TreeNode node in tree)
        {
            TreeNode treeNode=new TreeNode(node.Text);

            this.treeView1.Nodes.Add(node);

        }
        //End Process Tree 
```

我没有做任何进一步的事情，我认为nodes.xml不正确如果我想创建xml文件我不知道在那里写什么我应该怎么做才能使它工作？它有**无效操作异常错误**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:09:36.443

这是一种更简单的方法，下面的代码更多地用于将任何对象转换为 XML 一旦您理解了这一点，请随时在需要的时间和地点尝试高级代码 [如何将树视图转换为 xml？](https://stackoverflow.com/questions/6419846/how-to-convert-treeview-to-xml)

这是一个如何序列化和对象到 XML 并反序列化它的示例，我希望这个示例对您有所帮助..

**要将任何对象或某些集合写入 xml 对象必须具有默认构造函数。

```
public static string SerializeToXmlString(object objectToSerialize) 
{
    MemoryStream memoryStream = new MemoryStream();
    System.Xml.Serialization.XmlSerializer xmlSerializer = 
        new System.Xml.Serialization.XmlSerializer(objectToSerialize.GetType());
    xmlSerializer.Serialize(memoryStream, objectToSerialize);
    ASCIIEncoding ascii = new ASCIIEncoding();
    return ascii.GetString(memoryStream.ToArray());
} 
```

**这应该将xml转回一个对象

```
public static object DeSerializeFromXmlString(System.Type typeToDeserialize, string xmlString) 
{
    byte[] bytes = System.Text.Encoding.UTF8.GetBytes(xmlString);
    MemoryStream memoryStream = new MemoryStream(bytes);
    System.Xml.Serialization.XmlSerializer xmlSerializer = 
        new System.Xml.Serialization.XmlSerializer(typeToDeserialize);
    return xmlSerializer.Deserialize(memoryStream);
} 
```

# qwebview - 如何让 QWebView 打开新窗口

> ID：12033919
> 
> 赞同：1
> 
> 时间：2012-08-20T07:44:18.540
> 
> 标签：qwebview

我是使用 QT 编程 c++ 的新手

我有一个包含 QWebView 的窗口

问题是当我进入一个使用java脚本的网站（例如：index.jsp）时，当js请求newwindow时，它没有打开，它只是用相同的内容刷新页面。当我检查请求的链接地址时，它是这样的（例如：www.website.com/index.jsp#）

那么我如何在同一个 QWebView 中打开此链接？

顺便说一句，我试图通过这段代码启用 javascript

```
// in the mainwindow 
ui->webView->settings()->setAttribute(QWebSettings::JavascriptEnabled,true);
ui->webView->settings()->setAttribute(QWebSettings::JavascriptCanOpenWindows,true);
ui->webView_2->page()->settings()->setAttribute(QWebSettings::JavascriptCanOpenWindows, true); 
```

并没有解决问题

# c - 计算数组的数量

> ID：12033920
> 
> 赞同：0
> 
> 时间：2012-08-20T07:44:27.063
> 
> 标签：c, llvm, clang

在 C 程序中如何计算数组的总数？

LLVM IR 中的数组声明对应于操作的*alloca*类型。所以

```
int a[10]; 
```

对应于

```
%a = alloca [10 x i32], align 4 
```

在 LLVM IR 中。

但我也注意到

```
 int j = 0; 
```

也对应一个 alloca 指令

```
 %j = alloca i32, align 4 
```

那么如何计算只对应数组的 alloca 指令的数量呢？

**编辑：**

```
 for (Function::iterator i = F.begin(), e = F.end(); i != e; ++i)
  {
      for (BasicBlock::iterator ii =(*i).begin(), ii_e = (*i).end(); ii != ii_e; ++ii) 
      {
           Instruction *n = dyn_cast<Instruction>(&*ii);
           for( int num = 0; num < n->getNumOperands(); ++num)  
            if(isa<ArrayType>(n->getOperand(num)->getType()))
        {
              // doesn't work
          errs()<<"yayayayay Array\n";
        }
       }
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T18:42:29.697

`AllocaInst`有公共方法`isArrayAllocation()`。您可以使用它来计算仅对应于数组的 alloca 指令的数量。

```
for (Function::iterator BB = F.begin(), BE = F.end(); BB != BE; ++BB)
  for (BasicBlock::iterator II = BB->begin(), IE = BB->end(); II != IE; ++II)
    if (AllocaInst *AI = dyn_cast<AllocaInst>(II))
      if (AI->isArrayAllocation())
        errs() << "Alloca of array is found!\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T07:51:07.890

打开[LLVM 演示页面](http://llvm.org/demo/)并编译以下代码

```
int main(int argc, char **argv) {
  int a[10];
  return 0;
} 
```

到 LLVM C++ API 调用。

这是如何`a`创建的：

```
AllocaInst* ptr_a = new AllocaInst(ArrayTy_6, "a", label_9); 
```

哪里`ArrayTy_6`是：

```
ArrayType* ArrayTy_6 = ArrayType::get(IntegerType::get(mod->getContext(), 32), 10); 
```

因此，要确定`alloca`您正在查看的指令是否正在定义数组，只需执行`isa<ArrayType>()`它的第一个参数即可。

有关更多信息，请参阅[LLVM 文档](http://llvm.org/doxygen/annotated.html)。

# bash - 如何命名一组执行相同操作但类型不同的函数？

> ID：12033922
> 
> 赞同：0
> 
> 时间：2012-08-20T07:44:32.553
> 
> 标签：bash

对于我正在编写的框架，我必须实现匹配器功能，例如`equals`（测试相等性并打印出不匹配时预期匹配的内容）。

问题是我需要为字符串和整数（可能还有数组）实现这个，我不知道如何根据它们的类型区分这些函数。一些想法是：

1.  使用某种前缀

    ```
    integer_equals '1' '2'
    string_equals '1' '2' 
    ```

2.  将类型传递给函数

    ```
    equals 'integer' '1' '2'
    equals 'string' '1' '2' 
    ```

3.  用 . 分隔前缀。（点）

    ```
    string.equals '1' '2'
    integer.equals '1' '2' 
    ```

其中哪一个最适合，即哪一个是最惯用的还是最不令人惊讶的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:47:26.760

我认为您的建议 1 (string_equals) 是最清晰且最不令人惊讶的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T07:49:58.933

也许就像在 tcl 中一样：

```
string equal s1 s2 
```

实现示例：一个函数返回状态，其他实现是写输出`if [ "$2" = "$3" ];then echo true; else echo false; end`，让调用者egt输出`r=$(string equal a z)`

```
string() {
  case "$1" in
  equal)
    [ "$2" = "$3" ]
    return $?
    ;;
  *)
    echo "'$1' not implemented" >&2
    return 1
    ;;
  esac
} 
```

和用法

```
if string equal a a; then echo true; fi
string equal a b; echo $?;   # exit status 0:true, <>0:false 
```

# facebook-graph-api - 未授予具有 ID 的应用程序使用属性消息的能力

> ID：12033924
> 
> 赞同：0
> 
> 时间：2012-08-20T07:44:41.223
> 
> 标签：facebook-graph-api, facebook-php-sdk, sharing

我正在尝试使用 php facebook sdk 和 facebook graph api 在我的墙上发布自定义 fb 对象。我收到了这个错误。我试过了，但找不到具体的答案。即使在 Facebook 本身上也没有提及。有没有人可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:58:55.357

我想您是在谈论发布 Open Graph 操作？

请参阅[https://developers.facebook.com/docs/opengraph/actions/#create](https://developers.facebook.com/docs/opengraph/actions/#create)：

> 需要审查的可选参数
> 
> 您必须在[Open Graph 提交流程](https://developers.facebook.com/docs/opengraph/opengraph-approval/)中请求这些可选属性。

该`message`参数是需要经过 Facebook 批准才能使用的参数之一。

# iphone - 如何仅在我们的 iPhone 应用程序中设置人像模式？

> ID：12033927
> 
> 赞同：1
> 
> 时间：2012-08-20T07:44:59.337
> 
> 标签：iphone, orientation, portrait

我在我的 iPhone 应用程序中遇到了一个奇怪的问题。我希望我的应用仅支持纵向模式，但由于某种原因我不能这样做（设备和模拟器）。

为了仅支持纵向模式，我执行了以下操作：

```
In the TARGET summary section on Xcode, I chose only portrait.
All my ViewControllers implements shouldAutorotateToInterfaceOrientation 
```

但正如我所说，它不起作用，奇怪的结果是应用程序支持所有方向（纵向、倒置、横向左侧、横向右侧）。有任何想法吗？

这就是我实现 shouldAutorotateToInterfaceOrientation 的方式

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
     // Return YES for supported orientations
     NSLog(@"Checking orientation %d", interfaceOrientation);
     return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:55:15.140

在应用程序的 info.plist 文件中设置您想要的方向键“支持的界面方向（iPhone）”。

这里我只使用横向，你可以使用纵向。

![在此处输入图像描述](../Images/8d3a0a3eb91fc546581704df365e8162.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T08:15:14.260

试试这个先生，

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
// Return YES for supported orientations
return UIInterfaceOrientationIsPortrait(interfaceOrientation);
} 
```

希望能帮助到你。谢谢 ：）

# gcc - 在 Ubuntu 11.10 上安装 Gentoo 前缀时出错

> ID：12033928
> 
> 赞同：0
> 
> 时间：2012-08-20T07:45:02.167
> 
> 标签：gcc, ubuntu, prefix, gentoo

我尝试按照[引导指南在 Ubuntu 11.10 上安装 Gentoo Prefix。](http://www.gentoo.org/proj/en/gentoo-alt/prefix/bootstrap-solaris.xml)

但是当我走到这一步时出现错误：`emerge --oneshot --nodeps "=sys-devel/gcc-4.2*"`

*   [的输出`emerge --info '=sys-devel/gcc-4.2.4-r01.4'`](http://paste.ubuntu.com/1152039/)
*   [的输出`emerge -pqv '=sys-devel/gcc-4.2.4-r01.4'`](http://paste.ubuntu.com/1152041/)

在[build.log](http://paste.ubuntu.com/1152020/)中，我发现一些错误，例如：

> /usr/include/stdint.h:27:24: 错误: bits/wchar.h: 没有这样的文件或目录

有人告诉我应该安装`build-essential`，但我已经安装了。如果我能提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:16:50.250

文件 /usr/include/bits/wchar.h 属于 sys-libs/glibc 包。在尝试编译 sys-devel/gcc 之前，请确保它已编译和/或正确安装。

# javascript - “Backbone.js 视图”中的单击事件不起作用

> ID：12033933
> 
> 赞同：3
> 
> 时间：2012-08-20T07:45:38.353
> 
> 标签：javascript, backbone.js

我尝试开始使用backbone.js，但我发现当我不使用“body”作为视图的el 时，事件不起作用。这是代码。您可以将其保存为 html 文件并运行它。

```
<html>
    <body>
        <button id='openEssay'>test</button>
        <div id='div' style='width:100px;height:100px;'></div><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
        <script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.6/underscore-min.js"></script>
        <script src="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min.js"></script><script>
    (function($){
        var AppView = Backbone.View.extend({

            el:'body',//success
    //fail  el:'#div',
    //fail    tagName: 'li',
    //fail    id:'div',
            initialize:function(){
                _.bindAll(this, 'openEssay');
            },
            events:{
                'click button#openEssay':'openEssay'
            },
            openEssay:function(){
                alert('a');
            }
       });
       var app = new AppView();
    })(jQuery);

    </script>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-20T08:41:54.110

`this.el`Backbone使用委托形式[`on`](http://api.jquery.com/on/)（或[`delegate`](http://api.jquery.com/delegate/)在旧的 Backbones 中）将事件处理程序绑定到视图，有关详细信息，请参阅[`Backbone.View#delegateEvents`](http://backbonejs.org/#View-delegateEvents)。所以如果你想要这些事件：

```
events: {
    'click button#openEssay':'openEssay'
} 
```

做任何事情都`this.$el.find('button#openEssay')`需要匹配一些东西（`this`当然，视图对象在哪里）。您的四次尝试中只有一次：

1.  `el: 'body'`
2.  `el:'#div'`
3.  `tagName: 'li'`
4.  `id: 'div'`

将放在`<button id="openEssay">`里面，所以当你按下按钮时`this.el`只有**(1)**会调用。`openEssay`如果你把你的按钮放在里面，`#div`那么**（2）**也可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-29T15:17:23.490

上面的答案对我非常有帮助，尤其是在模块化方面，就我而言，我正在尝试构建一种 View 组件以用于任何视图。但是事件的一部分总是什么都不做，为了解决这个问题，我只是在我的组件视图中放入了 el: 'body'，太容易了

```
var RoleView = BaseView.extend({
		el: 'body',
		template : doT.template(RoleTemplate),
		model : new SessionModel(),
		events: {
			"click #open-RoleModal" : "_OpenRoleModal",
            "click #normal-Role": "_makeRole"
        },
		initialize:function(options){
			BaseView.prototype.initialize.call(this,options);
		},
		_OpenRoleModal: function(){
          //it works
		},
        _makeRole : function() {
          //it works
        },
        close: function(){
            this.$el.empty().off();
        }

	});
```

# ruby-on-rails - 使用 Rails 搜索 MongoDB

> ID：12033934
> 
> 赞同：1
> 
> 时间：2012-08-20T07:45:46.893
> 
> 标签：ruby-on-rails, ruby, mongodb

当我这样做时，我正在使用 ruby​​ 1.9.3p194 和 rails 3.2.5

```
@authors = Author.all 
```

通过从我的数据库中输出所有名称，它可以正常工作。但

```
@authors = Author.where("name like ?", "%#{params[:q]}%") 
```

不管用。我正在使用MongoDB。我想在输入 R 时输出名称（Ram）。可能是什么解决方案？

* * *

通过这种方法，我可以仅通过我的字段 :name 搜索 params[:q]。我怎样才能添加其他字段名称也这样我想在文本字段中搜索这个参数 [:q] :role , :email 也一次？我用过|| 但它给出了错误。我必须在评论中写这个，但因为我的评论列表很长。我在这里问这个问题。对此感到抱歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T07:49:39.293

MongoDB 不像 SQL 那样使用“LIKE”查询。您（可以）使用正则表达式： [http ://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions)

要解决您的特定问题，您可以使用 `@authors = Author.where(name: /#{params[:q]}/)`，但我不完全确定这是否是一个安全问题。

# android - 如何在android中解析我的soap响应

> ID：12033936
> 
> 赞同：2
> 
> 时间：2012-08-20T07:46:09.640
> 
> 标签：android, parsing

我得到这样的回应，

```
AuthenticateResponse
{
  AuthenticateResult=anyType{Photo=anyType{}; 
  Result=false; 
}; 
```

我该如何解析它。我只`string`想要真或假的结果。

请帮我..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:56:29.167

这是一个 JSON 响应，尝试使用[JSON api](https://developer.android.com/reference/org/json/JSONObject.html)解析其内容并检索值。

# intellij-idea - IntelliJ IDEA 11.1.3 在“//”注释前用空格字符替换制表符

> ID：12033941
> 
> 赞同：1
> 
> 时间：2012-08-20T07:46:27.127
> 
> 标签：intellij-idea

我正在使用“IntelliJ IDEA 11.1.3”，当我重新格式化我的代码时，我想在注释之前（在同一行）有一些文本的情况下保留我的“//”注释之前的选项卡。

在以前版本的 IDEA 中这是可能的，但现在我找不到这种行为的设置（每次我重新格式化时，我的制表符都会转换为空格）。选中“代码样式”中的“智能选项卡”选项。

提前致谢！

* * *

是的当然。这是我的代码：

```
int fieldOne;        // comment1
int fieldNumberTwo;  // comment2
int fieldThree;      // comment3 
```

我希望我的评论完全低于另一个。字段和注释之间的空格由制表符和/或空格填充。

我想以完全相同的方式保留我的评论，但是当我重新格式化我的代码时，我得到的不是这样的：

```
int fieldOne;        // comment1
int fieldNumberTwo;       // comment2
int fieldThree;       // comment3 
```

字段和评论之间的空间现在只填充了空格。

我正在为我的 Java 源代码文件使用“智能选项卡”。

# ruby-on-rails - Rails 3.2 ActiveAdmin '集合不是分页范围。错误

> ID：12033944
> 
> 赞同：7
> 
> 时间：2012-08-20T07:46:58.327
> 
> 标签：ruby-on-rails, ruby, activeadmin

我正在使用 Rails 3.2 和 ActiveAdmin 0.4.4 开发应用程序。我有一个名为 Teaser (/app/models/teaser.rb) 的模型：

```
class Teaser < ActiveRecord::Base
  attr_accessible :img, :name, :url
  validates :img, :name, :presence => true
  mount_uploader :img, TeaserUploader
end 
```

我在其中添加了 ActiveAdmin (/app/admin/teaser.rb)：

```
# encoding: UTF-8
ActiveAdmin.register Teaser do
    form do |f|
        f.inputs "Teaser" do
            f.input :name, :label => 'Текст'
            f.input :url, :label => 'Ссылка'
            f.input :img, :as => :file, :label => 'Картинка'
        end
        f.buttons
    end
end 
```

现在，当我转到“http://localhost:3000/admin/teasers”时，我收到以下错误：

显示 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.4.4/app/views/active_admin/resource/index.html.arb 其中第 1 行提出：集合不是分页范围。在调用 :paginated_collection 之前设置 collection.page(params[:page]).per(10)。

当我在 linux (Ubuntu 12.04) 上测试我的应用程序时，我得到了同样的错误。

我可以通过这种方式解决这个问题（/app/admin/teaser.rb）：

```
# encoding: UTF-8
ActiveAdmin.register Teaser, :as => 'Somename' do 
```

但是如果我使用这种方法，我无法使用 /app/config/locales/XX.yml 翻译这个模型

所有其他型号都可以正常工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-04T10:49:40.923

在某些情况下，您需要做的就是在活动管理员中更改模型的标签

例子

**休息**

```
ActiveAdmin.register Stage do 
```

**作品**

```
ActiveAdmin.register Stage, as: "Opportunity Stage" do 
```

相同的案例适用于模型**页面**

***更新：5 月 30 日***

我又遇到了这个问题，模型像

> ActiveAdmin.register PageRedirects 做

在**application_controller.rb**我有这个：

```
before_filter :abc

def abc
  @page_redirects = ...
end 
```

我猜这个方法会覆盖来自 active-admin 控制器的@page_redirects。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T13:21:21.103

这是解决方案（/app/models/teaser.rb）

```
collection_action :index, :method => :get do
  scope = Teaser.scoped
  @collection = scope.page() if params[:q].blank?
  @search = scope.metasearch(clean_search_params(params[:q]))
end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-07T22:25:56.563

您可能有一个与冲突的控制器同名的变量。也许在您的 application_controller.rb 中？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-24T21:04:52.220

只是改进答案......我在使用活动管理过滤器时遇到问题，所以我不得不修改一点代码。它现在为我工作。

```
collection_action :index, :method => :get do
  scope = Teaser.scoped
  @search = scope.metasearch(clean_search_params(params[:q]))
  @collection =  @search.page()  
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-27T16:46:43.940

在 rails 4.1 中没有一个答案对我有用

在[github 问题](https://github.com/gregbell/active_admin/issues/1025#issuecomment-24894987)的讨论中，事实证明这是由于**活动管理员继承自应用程序控制器**这一事实引起的。
所以要回答这个问题，我想这个错误是由应用程序控制器中的@teasers 分配一些集合引起的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-04T07:56:02.710

您能否在活动管理页面上重命名资源名称，例如

```
ActiveAdmin.register Teaser, as: "Some other name" do 
```

这解决了我的问题。

我认为这是由于资源名称冲突。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-20T12:58:30.327

在活动管理员中添加默认范围为我解决了这个问题。

```
ActiveAdmin.register StaticPage, as: 'Static Page' do
  scope :all, default: true
  # ...
end 
```

# android - 将 TextWatcher 添加到具有 MenuItem.SHOW_AS_ACTION_ALWAYS 的 ActionBarSherlock 内的 EditText

> ID：12033955
> 
> 赞同：3
> 
> 时间：2012-08-20T07:48:20.027
> 
> 标签：android, android-edittext, actionbarsherlock, menuitem, textwatcher

我正在使用 ActionBarSherlock，我想用 MenuItem.SHOW_AS_ACTION_ALWAYS 在其中显示一个 EditText。它占据栏的整个宽度并根据需要显示。但是我在尝试向其中添加 TextWatcher 时遇到了麻烦。

所以根据这里接受的答案：http: [//goo.gl/ite6h](http://goo.gl/ite6h)我写：

```
 EditText search;
    public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {

    menu.add(0, 1, 1, R.string.inlineSearch).setIcon(R.drawable.action_search).setActionView(search).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
    return super.onCreateOptionsMenu(menu);
    }

    private TextWatcher filterTextWatcher = new TextWatcher() {
    public void afterTextChanged(Editable s) {
        Log.e("TextWatcher","after");
    }

    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        Log.e("TextWatcher","before");
    }

    public void onTextChanged(CharSequence s, int start, int before, int count) {
        Log.e("TextWatcher","onText");
    }

}; 

@Override
    public boolean onOptionsItemSelected(com.actionbarsherlock.view.MenuItem item) {
        Log.e("onOptions",""+item.getItemId()); // Line 150
        switch (item.getItemId()) {
            case 1:
                search = (EditText) item.getActionView();
                search.addTextChangedListener(filterTextWatcher);
                search.requestFocus();
                InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0);
        }  
        return true;
    } 
```

问题是，永远不会到达第 150 行（没有日志），并且没有任何侦听器未添加到搜索中（EditText）。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T19:19:57.823

供参考，

这对我有用，给了我整个 ActionBar 宽度的 EditText（即使使用 MenuItem.SHOW_AS_ACTION_ALWAYS，我似乎也无法做到没有 RelativeLayout）并调用它的 TextWatcher 方法：

```
EditText search;
public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {

    LayoutInflater inflater=(LayoutInflater)this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    RelativeLayout rl =(RelativeLayout)inflater.inflate(R.layout.search_text, null);
    search=(EditText)rl.getChildAt(0);
    search.addTextChangedListener(filterTextWatcher);
    menu.add(0, 1, 1, R.string.inlineSearch).setIcon(R.drawable.action_search).setActionView(rl).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

    return super.onCreateOptionsMenu(menu);
    }

private TextWatcher filterTextWatcher = new TextWatcher() {
public void afterTextChanged(Editable s) {
    Log.e("TextWatcher","after");
    }

public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    Log.e("TextWatcher","before");
    }

public void onTextChanged(CharSequence s, int start, int before, int count) {
    Log.e("TextWatcher","onText");
    }

    }; 
```

&我的布局/搜索文本：

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="horizontal" 
          android:layout_width="fill_parent" 
          android:layout_height="wrap_content" 
          android:gravity="fill_horizontal"
          >
    <EditText 
    android:id="@+id/search_text"
              style="@style/EditTextHoloDark"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:layout_marginLeft="4dip"
              android:imeActionId="1337"
              android:imeOptions="actionDone"
              android:inputType="textCapCharacters|textNoSuggestions"
              android:singleLine="true"
              android:hint="Search"
              android:textStyle="bold"
              android:drawableLeft="@drawable/action_search"

              />
    </RelativeLayout> 
```

# facebook - 此类对象尚不支持类似操作 - 有时

> ID：12033957
> 
> 赞同：1
> 
> 时间：2012-08-20T07:48:28.780
> 
> 标签：facebook, facebook-like, facebook-opengraph, built-in

我正在尝试发送内置的喜欢，但我得到了这个：“这种类型的对象尚不支持喜欢的动作”

它只发生在某些页面上。这里失败了：

```
curl -F 'access_token=UR_TOKEN' \
     -F 'object=http://stylowi.pl/594206' \
        'https://graph.facebook.com/me/og.likes' 
```

这里效果很好：

```
curl -F 'access_token=UR_TOKEN' \
     -F 'object=http://stylowi.pl/146306' \
        'https://graph.facebook.com/me/og.likes' 
```

为什么？相同的类型，类型...看起来相同。

这里喜欢不起作用： http: [//developers.facebook.com/tools/debug/og/object ?q=http%3A%2F%2Fstylowi.pl%2F594206](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fstylowi.pl%2F594206)

这里喜欢作品： http: [//developers.facebook.com/tools/debug/og/object ?q=http%3A%2F%2Fstylowi.pl%2F596269](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fstylowi.pl%2F596269)

那么为什么我会收到这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T00:49:44.763

我怀疑这是由需要[Like Button Migration](https://developers.facebook.com/docs/reference/plugins/like/migration/)的页面 594206 和不需要迁移的页面 146306 引起的。

请特别注意该文档中的这句话：

“将不再为使用 Like Button 社交插件注释的任何**新**Open Graph 对象页面创建 Facebook 管理页面”

因此，我怀疑页面 594206 在迁移公告（需要迁移）之前被抓取，而 146306 在公告之后被抓取。

# r - 如何将编码为“是”的值更改为 R 中的值 1？

> ID：12033960
> 
> 赞同：9
> 
> 时间：2012-08-19T23:02:18.727
> 
> 标签：r

我数据库中的变量被编码为“是”和“否”，但我想有“1”和“2”。

我尝试使用创建一个新变量，`ifelse`但是当我`list`编辑它时，它不起作用，如下所示：

```
CA <- ifelse((CANCER == "Yes"),1
ifelse(( CANCER == "No"),2 )))

list(CA)

[[1]]
NULL 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-20T04:28:28.017

如果你想使用`ifelse`，

```
CA <- ifelse(CANCER=="Yes", 1, 2) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-19T23:18:47.837

假设

```
levels(CANCER) 
```

返回

```
Levels: yes no 
```

如果您只是说，这可能对您来说是最简单的

```
CA<-factor(as.numeric(CANCER)) 
```

但是，通常您也可以使用

```
Cancer<-factor(CANCER) 
```

比假设

```
levels(Cancer) 
```

返回

```
Levels: yes no 
```

您可以更改级别

```
levels(Cancer)[1]<-"1"
levels(Cancer)[2]<-"2" 
```

或相应地切换标签。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T23:35:49.993

我们需要知道您的变量是否是一个因素。认为

```
foo <- c("yes","no","no","yes") 
```

如果 is.factor(foo) 返回 TRUE，例如，如果你这样做了`foo <- factor(foo)`，那么使用

```
levels(foo) <- c("2", "1") 
```

否则使用

```
foo[foo == "yes"] <- 1
foo[foo == "no"] <- 2 
```

此外， list() 不会做（我认为）你认为它会做的事情。如果要查看 foo 的值，只需输入 foo。执行上面的代码后...

```
foo
[1] 1 2 2 1 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-14T13:12:32.173

我只是想补充一点（因为当我第一次遇到这种类型的事情时它对我很有帮助）除非明确说明，否则因子的水平按字母顺序排列。

这不适用于这个特定问题，因为 CANCER 列中的因子水平是明确排序的。但是，对于使用读取的任何“是”/“否”编码数据集

```
my_df <- read.csv(file = "myfile.csv", stringsAsFactors = TRUE) 
```

“否”将被编码为`1`，“是”将被编码为`2`，因为 N 在字母表中位于 Y 之前。

因此，在这样的环境中：

```
my_df$CANCER <- as.numeric(my_df$CANCER) - 1 
```

将非常有用，因为现在每个“否”都是 a `0`，每个“是”都是`1`

希望这对那里的人有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T07:55:20.590

如果您强制使用按顺序设置的级别的因素`"yes","no"`：

```
foo <- factor(c("yes","no","no","yes"),levels=c("yes","no")) 
```

您可以简单地强制转换为数字：

```
as.numeric(foo) 
```

这给了你：

```
[1] 1 2 2 1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-20T10:03:06.910

或者-如果您有两个以上的选项，可能会更灵活-您可以使用该`merge()`功能。

例如，如果您有此数据框：

```
dtf <- data.frame(CANCER = c("No", "Yes", "Yes", "No"),
                  x = c(4, 5, 6, 7), 
                  # Keep character variables as characters, do not create factors
                  stringsAsFactors = FALSE) 
```

您可以将值编码的新方法存储在另一个数据框中：

```
moreinfo <- data.frame(CANCER = c("Yes", "No"),
                       CA = c(1, 2), 
                       stringsAsFactors = FALSE) 
```

然后将其与原始数据框合并：

```
merge(dtf, moreinfo, by = "CANCER")

  CANCER x CA
1     No 4  2
2     No 7  2
3    Yes 5  1
4    Yes 6  1 
```

注意：对不起这个`stringsAsFactors`参数，有必要防止 R 用你的字符变量自动创建因子，我建议你在加载数据时也使用它`read.csv()`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-19T21:28:42.163

聚会有点晚了，但你可以用 dplyr mutate 和 revalue

```
cancer_dat <- data.frame(CANCER = c("No", "Yes", "Yes", "No"),
                  x = c(4, 5, 6, 7))

cancer_dat =cancer_dat %>% mutate(CANCER = revalue(factor(cancer_dat$CANCER),
                                       c("Yes" = "1", "No" = "0"))) 
```

revalue 允许您以“旧名称”、“新名称”的形式将因子名称更改为其他名称

# c# - C++ 控制台程序的前端

> ID：12033965
> 
> 赞同：0
> 
> 时间：2012-08-20T07:48:55.513
> 
> 标签：c#, c++, html, frontend

我目前正处于 C++ 控制台程序开发的最后阶段。我遇到的问题是我的程序要求用户能够指示他们想要在大型动态网格（大约 50x50）上执行功能的位置。我设计的控制台实现非常笨重，难以使用。如果我有一个下拉框或类似的 IO 功能，对用户来说也很好。

有人建议我用 C# 或 HTML5 设计前端。我对 C# 的基本经验有限，对 HTML5 没有经验。我对 C++ 也还是比较陌生。我会很感激被指出正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:31:04.017

如果您的程序是按照大多数源代码管理系统的风格编写的，那么您的前端可以使用[系统](http://linux.die.net/man/3/system)函数或[进程管道](https://stackoverflow.com/questions/372198/best-way-for-interprocess-communication-in-c)（或者好的旧[popen](http://linux.die.net/man/3/popen)）来发出命令并处理它们。如果你不能做这样的事情，你可以查看你的代码并检查实际逻辑与命令行上的事物表示的联系程度。如果它紧密联系在一起（例如，您的`compute()`函数将字符串填充到正确的打印长度），则需要重构。如果不是，您可能只需在现有代码之上使用任何 GUI 工具包构建 GUI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:05:24.030

我会向你推荐简单的 GUI。在 QT 中创建 GUI 非常简单，有很多基础教程。下载并安装后：http: [//qt.nokia.com/products/](http://qt.nokia.com/products/)有一个名为“example”的目录。

对我来说，其他解决方案是另一个应用程序，它将以某种合理的格式（如 .xml）保存数据，您可以将其加载到您的程序中，如 ./MyComplicatedApplication MyData.xml

我不会搞砸 C#，为什么有两种不同的语言？维护起来会比较麻烦。请注意，在 QT 中编写 GUI 并不比在 C# 中更难，它将是跨平台代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T08:29:01.620

您可以在托管 C++ 中使用[DataGridView](http://msdn.microsoft.com/it-it/library/system.windows.forms.datagridview%28v=vs.80%29.aspx)，.NET API 在语言之间是相同的（出于实际目的）。DataGridView 公开了大量的方法/对象，只是因为它是一个非常有用/常用的接口。所以你可能会觉得它有些困难，但基本用法可以非常简单。

# javascript - Google Plus 一键后端错误 -32099

> ID：12033966
> 
> 赞同：3
> 
> 时间：2012-08-20T07:49:06.750
> 
> 标签：javascript, html, google-plus, google-plus-one

我在[网站](http://qbash.ru)上添加了 google plus 一个按钮。

3-4 个月以来一切正常。

但是现在当我点击一个按钮时，它变成了一个感叹号，我从谷歌得到了下一个 json：

```
[
    {
        "error": 
        {
            "code": -32099,
            "message": "Backend Error",
            "data": 
            [
                {
                    "domain": "global",
                    "reason": "backendError",
                    "message": "Backend Error"
                }
            ]
        },
        "id": "pos.plusones.insert"
    }
] 
```

有人知道这种错误的原因吗？

PS我也读过[这篇文章](https://support.google.com/plus/bin/answer.py?hl=en&p=plusone_button_error&answer=1199142)。但我在与第一个托管相同的[另一个站点上使用谷歌加一个按钮。](http://www.linux-faq.org/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T11:29:04.243

此错误表明当 Google 尝试获取页面时，您传递给 +1 按钮的 data-href 返回了 HTTP 500 错误。

例如，我尝试了引用[http://qbash.ru/Quotations/Details/339](http://qbash.ru/Quotations/Details/339)的 +1 按钮，但获取该 URL 会返回：

Извините, во время обработки Вашего запроса произошла ошибка。

使用标题：

```
Request URL:http://qbash.ru/Quotations/Details/339
Request Method:GET
Status Code:500 Internal Server Error 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-19T20:51:56.777

这也是 GP+ fetcher 的 UA：

```
Mozilla/5.0 (Windows NT 6.1; rv:6.0) Gecko/20110814 Firefox/6.0 
```

确保它没有被禁止。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-27T13:04:17.850

检查您是否正在运行 ZBBlock - 最新的签名（截至 1 月 26 日）似乎自动禁止此用户代理，因为它是“与木马配置文件匹配的严重过时的 Firefox 版本”

我在 ZBBlock 论坛上报告了这个

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-04-22T15:41:58.553

我认为当 Google 无法访问您的网页时会发生这种情况。例如，我正在处理无法访问的本地环境，并且得到相同的错误/响应。

# model-view-controller - 如何在 Zend Framework 中对模型视图控制器 (MVC) 进行物理分区？

> ID：12033967
> 
> 赞同：-5
> 
> 时间：2012-08-20T07:49:09.200
> 
> 标签：model-view-controller, zend-framework, partitioning, saas

我正在 Zend Framework 中开发基于 SaaS 的产品。系统应该是可扩展的，以分散应用服务器上的负载。所以我想在不同的服务器上物理分离模型-视图-控制器（MVC），而不是保留在同一个应用程序服务器上。这样他们就应该通过Web服务相互通信。

我是 Zend Framework 的新手，我知道在 Zend Framework 中是否可以在不同服务器上对 MVC 进行物理分区？如何实现？一个例子将帮助我提高我的信心水平。

你的回答会对我有很大帮助。

我提前感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:55:58.640

你为什么要这样做？你做过基准测试吗？与性能提升相比，您需要多长时间才能安全地实施此类系统？

如果您希望您的网站具有可扩展性，请不要进行**任何**预优化，过早的优化是**邪恶**的，真的。

构建您的应用程序，对其进行分析，找到瓶颈，并在以后进行优化。

可扩展的应用程序首先是可以轻松发展的应用程序，这意味着设计良好的架构。

您最好使用具有多个前端的负载均衡器，并在前端实例之间使用共享缓存，例如 memcached、Redis。

# xcode - Xcode 4.4.1，版权声明中的开发者名称

> ID：12033968
> 
> 赞同：1
> 
> 时间：2012-08-20T07:49:11.330
> 
> 标签：xcode, xcode4.5, xcode4.4

在早期版本的 Xcode 中，Xcode 在版权声明中写入“MyCompanyName”时遇到问题，但我通过在地址簿中的卡片中写入公司名称来修复它。现在我将 Xcode 更新到 4.4.1 并且出现了另一个问题：Xcode 开始在版权声明中使用我的登录名而不是全名。例子：

```
//  Created by Kreiri on 8/20/12. 
```

如何让 Xcode 再次自动使用我的全名？我不想创建自定义模板，我只想让 Xcode 4.4.1 使用与 Xcode 4.3 相同的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T12:11:43.337

自 Xcode 4.4.1 以来，他们改变了工作方式。现在它正在使用 Xcode 项目的*Organization*属性。

您可以通过在*Project Navigator*（左侧栏）中选择项目来对其进行编辑，然后在*Utilities 侧栏（右侧栏）中的**Project Documentation*下找到它。

来源：http: [//zanshin.net/2012/08/31/xcode-project-template-copyright-fixed/](http://zanshin.net/2012/08/31/xcode-project-template-copyright-fixed/)

# android - 启动一个活动并在不更改 ui 的情况下关闭它

> ID：12033971
> 
> 赞同：0
> 
> 时间：2012-08-20T07:49:44.360
> 
> 标签：android

我真的需要在不改变ui的情况下启动一个活动并关闭它，我想过一个透明的屏幕，这是最好的解决方案吗？有更好的吗？

由于任务亲和力，我真的需要一个活动

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T07:52:31.227

如果您不需要 UI，您可能正在寻找[Service](https://developer.android.com/reference/android/app/Service.html)或[BroadcastReceiver](https://developer.android.com/reference/android/content/BroadcastReceiver.html)

# macos - Geektool 无法运行 imagemagick 命令

> ID：12033973
> 
> 赞同：0
> 
> 时间：2012-08-20T07:49:57.310
> 
> 标签：macos, imagemagick, macports, automator, geektool

我最近在 macports 上安装了 imagemagick 以自动裁剪图像，但是该命令在终端中有效，但在 geektool 中无效。我尝试使用 automator，但它在那里也不起作用。这是代码：

```
convert -crop 455x140+240+430 /Library/Desktop\ Pictures/Halo/Halo_Stats-full.png /Library/Desktop\ Pictures/Halo/Halo_Stats_Cropped.png 
```

任何想法为什么这不起作用？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:10:04.113

应该是路径问题。如果你输入

```
which convert 
```

在终端，我会给你完整的转换路径。您应该能够将整个字符串用作命令，而不仅仅是“转换”

# java - selenium chromedriver 身份验证代理

> ID：12033981
> 
> 赞同：7
> 
> 时间：2012-08-20T07:50:25.717
> 
> 标签：java, proxy, selenium-webdriver

我需要使用 java 中的 selenium 2 中的 chromedriver webdriver 使用用户名和密码（即 USERNAME:PASSWD@IP:PORT）连接到代理服务器。我已经找到了不使用用户名和密码的方法，但还没有找到方法。

谢谢。

# jsf-2 - 使用 Freemarker 模板和 JSF 2.x 媒体资源文件夹

> ID：12033982
> 
> 赞同：0
> 
> 时间：2012-08-20T07:50:28.577
> 
> 标签：jsf-2, resources, html-email, freemarker, template-engine

我有一个使用 Freemarker 模板发送电子邮件的 JSF 2.x 应用程序。

我的问题最好描述如下：

*   在我的 Freemarker 模板中，我指的是托管在 JSF 网站上的媒体/图像；
*   我的资源位于“ **jsf2.x** ”`resources`文件夹中；
*   当然，我不能使用`<h:graphicImage library="images" name="logo.gif" ...`Freemarker 模板中的语法...

有没有人有任何解决方案？

我应该将图像附加到电子邮件中吗？

或者我应该为我的图像/媒体使用两个位置（一个公共位置，另一个在`resources`文件夹下）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:48:54.623

似乎这里有一些不相关的问题。

一个问题是附加图像 VS 通过电子邮件中的 URL 引用它们。我不认为这是决定的，这取决于很多事情。我说，如果图像不仅仅是装饰，而是收件人想要保留在他的邮件存档中的东西（如图表），嵌入是唯一的方法，除非你能保证图像 URL 在数月或数年后仍然有效. 如果它只是装饰......那很棘手。上次我检查时，邮件客户端默认阻止从 URL 加载图像。用户必须点击它们或其他东西才能加载它们，但也许他们可以永久启用来自发件人的图像。但如果图像不重要，大多数用户就不会关心，也永远不会看到它们。附加图片在这方面更防弹，但它增加了邮件的大小（不太礼貌），

另一个问题是与 JSF/FreeMarker 相关的问题。我不知道 JSF ......但除非它是一个可怕的设计，否则它必须有 Java API-s 通过它你可以获取资源 URL（如果你想在邮件中引用它），或者阅读资源（如果您想将其附加到邮件中）。然后从 FreeMarker 模板中，您可以调用已放入数据模型的对象的 Java 方法，因此您可以添加一些帮助对象，FreeMarker 可以从中获取 URL 或 base64 编码的内容。（如果您不能/不想添加到数据模型中，您仍然可以创建`TemplateDirectiveModel`或`TemplateMethodModelEx`实现并将它们拉入，如`<#assign resourceContentB64 = 'com.example.ResourceContentB64Directive'?new()>`.）

# jenkins - 通过 Jenkins 管理部署会是一种不好的做法吗？

> ID：12033988
> 
> 赞同：0
> 
> 时间：2012-08-20T07:50:56.637
> 
> 标签：jenkins, build-management

Jenkins 自然会用于自动构建/部署/测试和报告活动。但是，在 Jenkins 中管理所有与环境相关的活动是否也是一种不好的做法？我们使用 Microsoft Team Foundation Server 进行了此类操作。我们有自动构建/部署/测试活动，但我们也从 TFS 管理我们的数据库和应用程序部署活动。因此，如果我需要重新构建特定数据库，而不是运行部署数据库的手动脚本，我只需“右键单击并运行”数据库部署即可。与测试相同；如果我需要运行一堆 UI 测试，我会启动 UI 测试构建活动。

但是，我不确定这在 Jenkins 中是否是一个好的做法，以及这是否是一个好主意 :) 据我了解，Jenkins 可以使用 Ant，因此我们可以很容易地通过 Jenkins 执行单个 Ant 目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:06:04.333

Jenkins 非常易于管理，也是一个有趣的工具（根据我的个人经验）。最好的事情是它节省了大量的时间。我自己正在将 Jenkins 与 Ant 一起使用，我发现 Jenkins 让生活变得轻松 :)。分析您的项目需求将是一个很好的做法，然后您的想法必须一键完成！

如果你想要这个，那么 Jenkins 是最好的（使用 Ant）。

# xml - 从通过 Web 服务返回的 XML 填充 Flex 组合框

> ID：12033995
> 
> 赞同：0
> 
> 时间：2012-08-20T07:51:41.397
> 
> 标签：xml, apache-flex, flex3

我正在尝试从通过 Web 服务返回的 XML 填充 Flex 3 中的组合框。

这是代码：

```
 <mx:WebService id="Services" 
    wsdl="http://10.10.15.4///WebService.asmx?wsdl"
    useProxy="false">
    <mx:operation   name="getAccounts"
                    showBusyCursor="true"
                    fault="showErrorDialog(event)">                         
    </mx:operation>
    </mx:WebService> 
```

组合框的代码：

```
<mx:ComboBox id="accountPicker" labelField="Account" dataProvider="{Services.getAccounts.lastResult.Root.Node.Account}"/> 
```

我返回的 XML 如下所示：

```
<Root>
    <Node>
       <Account>Account1</Account>
    </Node>
   <Node>
       <Account>Account2</Account>
    </Node>
</Root> 
```

我在这里做错了什么？目前组合框为空白。如果我从 dataProvider 中删除 .Root.Node.Account ，那么它会返回 [Object Object]。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:18:55.920

1.  在处理 e4x 时，根是隐式的，所以你只想要`xmlObject.Node.Account`
2.  `Node.Account`给你一个账户节点的 XMLList。这些节点没有“帐户”属性，因此`labelField`无法正常工作。如果您只是省略`labelField`，组合框将在每个元素上调用 toString() ，这将自动成为内部文本。

所以你想要的是：

```
<mx:ComboBox id="accountPicker" dataProvider="{Services.getAccounts.lastResult.Node.Account}" /> 
```

# c - 在 C 编程中：在不使用三个循环的情况下以数值方式求解二维空间维度的偏微分方程

> ID：12033996
> 
> 赞同：1
> 
> 时间：2012-08-20T07:51:42.023
> 
> 标签：c, performance, loops, numerical, pde

我正在尝试用 C 语言编写一个程序，以数值方式求解 2 个空间维度的 PDE：W(x,p,t)。实际等式涉及的符号太多，我不知道如何在这里写，所以请原谅我没有提供它，但无论如何它都相当无关紧要。

为了解决这个等式，据我所知 - 我需要三个循环：

```
For (t=0;t<t_max;t+=1) 
 For (x=0;x<x_max;x+=1) 
  For (p=0;p<p_max;p+=1) 
   ( The numerical form of the equation, using a 2D array - W[x_max][p_max] ) 
```

这适用于一维。- 但问题是：在上述情况下，程序只需运行一百万年！- 我真的很害怕我可能只能活到 120 岁 - 所以我永远看不到它完整！

有什么方法可以在没有三个嵌套循环的情况下求解此类方程？是否有任何其他技术可以加快我的计算速度（例如通过并行化）？什么是了解更多关于求解 PDE 的好资源？

# c# - 如果使用 using 子句，是否需要关闭 DbConnection？

> ID：12033998
> 
> 赞同：8
> 
> 时间：2012-08-20T07:51:53.873
> 
> 标签：c#, .net, ado.net, using, dbconnection

> **可能重复：**
> [使用块会关闭数据库连接吗？](https://stackoverflow.com/questions/5243398/will-a-using-block-close-a-database-connection)

以下是`db.Close()`不必要的吗？

```
using (DbConnection db = GetDbConnection())
{
   // do data-access stuff
   // ...

   db.Close();
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-20T07:54:49.823

> 如果使用 using 子句，是否需要关闭 DbConnection？

不，如果使用 using 子句，是否不需要关闭 DbConnection？

和

是的，这里没有必要，因为当范围`using`结束时，连接将处理关闭和释放所有内存的意思。

由于`DBConnection`实现了接口，所以在方法中`IDisposable`就有了close函数。`Dispose``DBConnection`

但是，如果某些行在关闭行之后，那么它很有用

```
using (DbConnection db = GetDbConnection())
{
  // do data-access stuff
  // ...

  db.Close(); //Useless
} 
```

但在这里它很有用

```
using (DbConnection db = GetDbConnection())
{
  // do data-access stuff
  // ...

  db.Close(); //Useful

 // Some more code
} 
```

在这种情况下，你可以做

```
using (DbConnection db = GetDbConnection())
{
  // do data-access stuff
  // ...

}

// Some more code which was previously inside using section. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T08:03:08.910

只是为了确保我已经检查了代码:)

```
 protected override void Dispose(bool disposing)
    {
      if (disposing)
      {
        this._userConnectionOptions = (DbConnectionOptions) null;
        this._poolGroup = (DbConnectionPoolGroup) null;
        this.Close();
      }
      this.DisposeMe(disposing);
      base.Dispose(disposing);
    } 
```

这是继承自**DbConnection的****SqlConnection**的实现。如您所见，有**this.Close()**方法:)

 ***** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T07:54:04.817

据我所知，当`Dispose()`方法被调用时，`Close()`会自动执行。
所以`db.Close();`这里没有必要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T07:54:48.717

在右大括号处`Dispose()`被调用。

我认为在`DbConnection`该`Dispose`方法中也会检查连接是否关闭。所以不，这可能没有必要，但我个人认为这是一种很好的做法，可以提高可读性，并且不会影响性能，因为`Close`会以一种或另一种方式调用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T07:58:44.313

`SqlConnection`从(Derived of `DbConnection`) 类的 dispose 实现中提取的代码：

```
public void Dispose()
{
   Dispose(true);
}

protected override void Dispose(bool disposing)
{
  if (disposing)
  {
     this.Close();
  }
  base.Dispose(disposing);
} 
```

`using`关键字使用接口`IDisposable`。上面的方法是方法实现。它将关闭连接。****