# StackOverflow 问答 10803000-10803999

# jquery - jQuery - iPad/iPhone - 禁用后启用滚动

> ID：10803000
> 
> 赞同：2
> 
> 时间：2012-05-29T16:21:07.460
> 
> 标签：jquery, ios, ipad, scroll, dom-events

我使用以下方法禁用了 iPad 上的滚动：

```
function disableScrolling() {
    document.ontouchmove = function(e){
            e.preventDefault();
    }
} 
```

有没有办法简单地再次启用它？

它在以下功能中特别有用：

```
function enableScrolling() {
    // enable scrolling
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-29T16:25:56.413

这应该工作，

```
var disableScroll = false;

function disableScrolling() {
    disableScroll = true;
}

function enableScrolling() {
    disableScroll = false;
}

document.ontouchmove = function(e){
   if(disableScroll){
     e.preventDefault();
   } 
} 
```

# linq - 实体框架和linq查询构造

> ID：10803001
> 
> 赞同：1
> 
> 时间：2012-05-29T16:21:11.703
> 
> 标签：linq, frameworks, entity

我想知道是否有更好的方法来构造我的 linq 查询（我正在使用 EF CodeFirst）来访问我的表。现在，它产生以下查询：

```
exec sp_executesql N'SELECT 
[Project4].[Id] AS [Id], 
[Project4].[First] AS [First], 
[Project4].[Last] AS [Last], 
[Project4].[Email] AS [Email]
FROM ( SELECT 
    [Project3].[Id] AS [Id], 
    [Project3].[First] AS [First], 
    [Project3].[Last] AS [Last], 
    [Project3].[Email] AS [Email],
    CASE WHEN ([Extent5].[Id] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
    FROM   (SELECT 
        [Project2].[Id] AS [Id], 
        [Project2].[First] AS [First], 
        [Project2].[Last] AS [Last], 
        [Project2].[Email] AS [Email]
        (SELECT 
            SUM([Extent4].[Data]) AS [A1]
            FROM [dbo].[EventHistory] AS [Extent4]
            WHERE [Project2].[Id] = [Extent4].[UserId]) AS [C1]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[First] AS [First], 
            [Extent1].[Last] AS [Last], 
            [Extent1].[Email] AS [Email]
            (SELECT 
                SUM([Extent3].[Data]) AS [A1]
                FROM [dbo].[EventHistory] AS [Extent3]
                WHERE [Extent1].[Id] = [Extent3].[UserId]) AS [C1]
            FROM [dbo].[User] AS [Extent1]
            WHERE ( EXISTS (SELECT 
                1 AS [C1]
                FROM [dbo].[EventHistory] AS [Extent2]
                WHERE [Extent1].[Id] = [Extent2].[UserId]
            )) AND ([Extent1].[Id] = @p__linq__0)
        )  AS [Project2]
        WHERE [Project2].[C1] >= @p__linq__1 ) AS [Project3]
    LEFT OUTER JOIN [dbo].[EventHistory] AS [Extent5] ON [Project3].[Id] = [Extent5].  [UserId]
    WHERE [Project3].[C1] <= @p__linq__2
)  AS [Project4]
ORDER BY [Project4].[Id] ASC, [Project4].[C1] ASC',N'@p__linq__0 int,@p__linq__1 int,@p__linq__2 int',@p__linq__0=1717,@p__linq__1=300,@p__linq__2=400 
```

...这对我来说似乎很可怕，为什么它会创建所有这些不同的子选择？- 对我来说，它真的应该产生类似的东西：

```
select u.id, first, last, email, e.*
from user u 
left join eventhistory e
    on e.userid = u.id
   and e.data <= @param1
   and e.data >= @param2
   and u.id = @id 
```

我的代码看起来像这样：

```
IQueryable<User> query = from users in this.DataContext.Users.Include("EventHistoryList") 
                         where users.EventHistoryList.Any()
                         select users;

if (playerId.HasValue)
    query = query.Where(u => u.Id == playerId.Value);

if (dataLow.HasValue)
    query = query.Where(u => u.EventHistoryList.Sum(p => p.Data) >= dataLow.Value);

if (dataHigh.HasValue)
    query = query.Where(u => u.EventHistoryList.Sum(p => p.Data) <= dataHigh.Value);

query = query.OrderByDescending(orderBy).Skip(startEntity).Take(pageSize).ToList(); 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:37:52.777

看起来其中一个子选择处理分页，而其他选择是必要的，因为您正在对具有 0..* 关系的表应用聚合函数。我确信可以使查询看起来更好，但我不认为它是不必要的低效。

您认为它应该生成的查询将从数据库中获取整个结果集，并且还需要一个子选择来应用聚合函数。从数据库中获取整个结果集并在之后进行分页是非常低效的。

# ncrunch - NCrunch 显示未测试的循环支架

> ID：10803003
> 
> 赞同：2
> 
> 时间：2012-05-29T16:21:17.990
> 
> 标签：ncrunch

考虑下图中显示的代码块：

![在此处输入图像描述](../Images/eb1e5d21d07d8968a31c678958e5692f.png)

有一个讨厌的黑色/'这行代码没有被任何测试覆盖'点。

`foreach`考虑到它指的是循环的右括号，任何人都能够阐明任何测试如何不涵盖这一点？

如果循环的其余部分被覆盖（全为绿色），那么退出时肯定会击中端括号`foreach`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T16:28:12.313

我从未使用过`NCrunch`，但根据我对其他代码覆盖率产品的经验，我猜你没有一个测试用例，其中循环以“常规”方式退出而不点击`break`语句。

# javascript - 单击提交后希望我的表单值显示在另一个 div 中

> ID：10803004
> 
> 赞同：0
> 
> 时间：2012-05-29T16:21:19.130
> 
> 标签：javascript, jquery, html

我有一张票表格，当他们点击购买时，我希望将其保存并在另一个 div 中显示为“用户的票证信息”，而且他们还可以购买一张新票并添加到旧票。它不必保存在数据库或任何东西中，例如，当您单击刷新时，所有信息都会消失，您可以从头开始。我如何做的另一个例子是当我注册时，用户信息将进入我的记忆类。任何 javascript/jquery/html 都会有所帮助。贝娄是我工作的开始。谢谢^^ ![票证示例](../Images/95b501bebb96f8e29f547e24dccad8b2.png)

```
<html>
<body>
<form id="buyTicket" action="" method="POST">
                   <div id="ticketHeader">Buy Your ticket here</div><br></br>
                   <div>Number of persons :<input type="number" required id="numberOP" value="" placeholder="number of persons"/></div>
                   <div>Flight Destination:<input type="text" required id="destination" value="" placeholder="hawaii/thailand/spain"/></div>
                   <div>Depature          :<input type="text" required id="depature" class="datepicker" value="" placeholder="enter depature date"/></div>
                   <div>Return            :<input type="text" required id="return" class="datepicker" value="" placeholder="enter return date"/></div>
                   <div><button type="submit" class="button" id="buttonTicket">Buy Ticket</button></div>
             </form> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:34:10.513

就像本说使用`.val()` [http://api.jquery.com/val/](http://api.jquery.com/val/)来获取值。这是一个工作示例[http://jsfiddle.net/YNez9/](http://jsfiddle.net/YNez9/)

您将拥有 div，它显示右侧浮动的选定值

```
<div id="result" style="float:right;">
</div> 
```

并在提交时您要添加输入的值\或有一个占位符，您可以设置其值然后使其可见

```
$('#buyTicket').submit(function() {
  $('#result').append('<div>Number of persons :'+$('#numberOP').val()+'</div>');
  //.....
  //return false;
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T16:31:57.577

单击按钮后，您可以使用 val() 函数从表单中获取值。此处提供 Api 文档：http: [//api.jquery.com/val/](http://api.jquery.com/val/)。也许有点像这样：

```
$('#buttonTicket').click(function() {
    $('#ticketinfoheader').text($('#numberOfPersons').val());
}); 
```

# java - 如何将 List 从子类泛型转换为父类泛型？

> ID：10803005
> 
> 赞同：0
> 
> 时间：2012-05-29T16:21:22.673
> 
> 标签：java, list, openjdk, downcast

我正在修改开放的 JDK 以添加功能，但我已经遇到了两次没有好的解决方案。

有一个名为`JCStatement`extends的类`JCTree`。

问题：我想将 a`List<JCStatement>`转换为`List<JCTree>`.

很明显，一个类可以引用它的一个扩展，但是当我将它放在 List 上时，它就不起作用了。

我使用：`(List<JCTree>)((List<?>)params)`进行投射，它可以工作，但不能建立在 ant 上。IDE 给我以下警告：

```
Type safety: Unchecked cast from List<capture#1-of ?> to List<JCTree> 
```

所以这必须以某种方式解决。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:10:09.000

如果您知道不会将任何元素添加到列表中——因此它将是类型安全的——那么[`Collections.unmodifiableList(List<? extends E>)`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#unmodifiableList%28java.util.List%29)将返回一个`List<E>`.

这是完全类型安全且合法的，因为它强制保证您永远不会将非法元素添加到列表中，并且它是由 JDK 提供的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T16:32:08.453

**你不能做这个演员表。**

如果将 a`List<JCStatement>`转换为 a`List<JCTree>`然后将 JCTree（非 JCStatement）对象添加到该列表会发生什么？它破坏了`List<JCStatement>`类型安全。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T18:27:01.880

这似乎是 List 或泛型类型集合的问题。

有史以来最简单的解决方案：

```
ListBuffer<JCTree> ls = new ListBuffer<JCTree>();
for(JCVariableDecl v : params){ ls.append(v); }
return ls.toList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T16:31:50.093

像这样的东西对你有用吗？

```
import java.util.ArrayList;
import java.util.List;

class A {
}

class B extends A {
}

class C extends A {
}

public class Program {
    public static void foo(List<? extends A> list) {
    }

    public static void main(String[] args) {
        List<A> listA = new ArrayList<A>();
        List<B> listB = new ArrayList<B>();
        List<C> listC = new ArrayList<C>();
        List<? extends A> listX = (List<? extends A>) listB;
        List<? extends A> listY = (List<? extends A>) listC;

        foo(listA);
        foo(listB);
        foo(listC);
        foo(listX);
        foo(listY);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T17:05:26.160

如果你真的确定它是安全的，你可以通过 Raw Type 进行转换

```
List<Number> listA = new LinkedList<Number>();
List<Integer> listB = new LinkedList<Integer>();
listA = (List<Number>)(List) listB; 
```

我无法想象自己曾经认为这是解决问题的好方法，但它会做你想做的事，而且编译时泛型有一些令人讨厌的限制:)

总是会有一个 Unsafe 演员的警告，因为你所做的实际上是不安全的。编译器无法使其安全，您必须自己确定这一点。

# r - 如何在R中计算过去1个月的滚动平均值

> ID：10803010
> 
> 赞同：6
> 
> 时间：2012-05-29T16:21:45.543
> 
> 标签：r, window, time-series

我发现的大多数包和帖子都适用于固定大小的窗口或汇总的月/周数据。是否可以计算滚动 k 月平均值？

例如，对于**1 个月的滚动窗口**，假设数据为：

```
Date          Value
2012-05-28    101
2012-05-25     99
2012-05-24    102
....
2012-04-30     78
2012-04-27     82
2012-04-26     77
2012-04-25     75
2012-04-24     76 
```

前三个滚动的 1 个月窗口应该是：

```
1\. 2012-05-28 to 2012-04-30
2\. 2012-05-25 to 2012-04-26
3\. 2012-05-24 to 2012-04-25 
```

请注意，这不是固定宽度的滚动窗口。窗口实际上每天都在变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:11:43.507

我使用此代码根据每日价格数据计算每月平均值。

```
#function for extracting month is in the lubridate package
install.packages(c("plyr", "lubridate"))
require(plyr); require(lubridate)

#read the daily data
daily = read.csv("daily_lumber_prices.csv")
price = daily$Open
date = daily$Date

#convert date to a usable format
date = strptime(date, "%d-%b-%y")
mon = month(date)
T = length(price)

#need to know when months change
change_month = rep(0,T)

for(t in 2:T){
  if(mon[t] != mon[t-1]){
    change_month[t-1] = 1
  }
}

month_avg = rep(0,T)
total = 0
days = 0

for(t in 1:T){
  if(change_month[t] == 0){
    #cumulative sums for each variable
    total = total + price[t] 
    days = days + 1
  }

  else{
    #need to include the current month in the calculation
    month_avg[t] = (total + price[t]) / (days + 1)
    #reset the variables
    total = 0
    days = 0
  }
} 
```

因此，变量 month_avg 存储了每月平均值。

是这样的吗？此代码说明了月份的可变长度。当然有一种更有效的方法来做到这一点，但这很有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-13T07:51:57.507

[runner](https://gogonzo.github.io/runner/)包完全支持不规则间隔时间序列上的滚动窗口操作。要计算对象**的 1 个月**移动平均值，`x`必须指定`idx = date`（使跑步者时间相关）和`k = "1 months"`或`k = 30`（天），具体取决于对用户更重要的内容。用户可以[应用任何 R 函数](https://gogonzo.github.io/runner/articles/apply_any_r_function.html)- 在这种情况下我们执行`mean`.

```
# example data
x <- cumsum(rnorm(20))
date <- Sys.Date() + cumsum(sample(1:5, 20, replace = TRUE)) # unequaly spaced time series

# calculate rolling average
runner::runner(
  x = x, 
  k = "1 months", 
  idx = date, 
  f = mean
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-01T16:14:42.073

假设您的数据框`df`对我有用：

```
df$past_avg = sapply(df$Date, function(i){
    i = as.POSIXct(i)
    mean(subset(df, Date > (i - months(1)) & Date < i)$Value)
}) 
```

仅使用基数 R。您可以通过更改`months()`.

# python - 将自动提交设置为 true 是否比批量提交花费更长的时间？

> ID：10803012
> 
> 赞同：2
> 
> 时间：2012-05-29T16:22:03.283
> 
> 标签：python, mysql, odbc, pyodbc

我已经进行了一些试验，如果我设置`autocommit`为`False`.

但是，我担心在我的代码末尾进行一次提交，数据库行将不会更新。因此，例如，我对数据库进行了几次更新，但没有提交，查询数据库是否会给我旧数据？或者，它知道它应该首先提交吗？

或者，我完全误解了`commit`实际上是做什么的？

注意：我使用的是 pyodbc 和 MySQL。另外，我使用的表是 InnoDB，这有什么不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T16:37:19.333

有些情况会触发[隐式提交](http://dev.mysql.com/doc/refman/5.5/en/implicit-commit.html)。然而，在大多数情况下，不提交意味着其他连接无法使用数据。

这也意味着如果另一个连接尝试执行与正在进行的事务冲突的操作（另一个连接锁定了该资源），最后一个请求将不得不等待锁被释放。

至于性能问题，`autocommit`导致每一次更改都是即时的。在大表上性能损失将非常明显，因为每个`commit`索引和约束也需要更新/检查。如果您仅在一系列查询后提交，则索引/约束将仅在那时更新。

另一方面，没有足够频繁地提交可能会导致服务器有太多的工作试图保持两组数据之间的一致性。所以有一个权衡。

是的，使用`InnoDB`会有所作为。例如，如果您使用的是`MyISAM`根本没有事务，那么任何更改都将是永久性的（类似于 autocommit=True）。在 MyISAM 上，您可以使用[delay-key-write 选项](http://dev.mysql.com/doc/refman/5.5/en/sql-syntax-transactions.html)。

有关交易的更多信息，请查看[官方文档](http://dev.mysql.com/doc/refman/5.5/en/server-options.html#option_mysqld_delay-key-write)。有关优化的更多提示，请查看[这篇文章](http://www.informit.com/articles/article.aspx?p=377652&seqNum=4)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T16:36:28.110

InnoDB 的默认事务模式是 REPEATABLE READ，所有的读取都将在一个事务中保持一致。如果您在同一个事务中插入行并查询它们，您将看不到新插入的行，但它们会在您提交事务时存储。
如果要在提交事务之前查看新插入的行，可以将隔离级别设置为 READ COMMITTED。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T16:23:57.307

只要您使用相同的连接，数据库就应该向您显示一致的数据视图，例如到目前为止在此事务中所做的所有更改。

提交后，更改将被写入磁盘，并对其他（新）事务和连接可见。

# php - 'UTF-8' 中的'ISO-8859-1' 字符不再可读

> ID：10803016
> 
> 赞同：0
> 
> 时间：2012-05-29T16:22:12.467
> 
> 标签：php, character-encoding, mb-convert-encoding

当我尝试使用`mb_convert_encoding`函数在 PHP 中转换编码时遇到问题。

主要思想是更改具有“ISO-8859-1”编码的“CSV”文件的格式。我希望输出格式为“CSV”的格式为“UTF-8”编码，并且像输入一样可读。

`mb_convert_encoding`完成工作，但是，当我尝试使用 Notepad++ 打开格式化的 CSV 时，我得到了奇怪的字符，而不是“ISO-8859-1”原始 CSV 所具有的希腊字符。

这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:48:59.243

Notepad++ 可能以 ASCII 格式打开文件。单击编码-> UTF-8

# javascript - 为什么 .getPropertyValue() 不会为“borderRadius”属性返回值？

> ID：10803023
> 
> 赞同：6
> 
> 时间：2012-05-29T16:22:32.783
> 
> 标签：javascript, css

这是功能：

```
function lastmenuborder() {
    var articleparent = document.getElementById('article').parentNode;
    var articlestyle = window.getComputedStyle(articleparent,null).getPropertyValue('borderRadius');
    alert (articlestyle);
} 
```

我没有得到任何价值，但父节点的 css 是：

```
div#mainbody div.placeholder {
    border-radius: 3px;
} 
```

我必须改变什么才能返回“3px”？非常感谢所有帮助；我仍然是 JavaScript 的新手。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T17:33:39.780

对于`getPropertyValue()`，您使用连字符而不是 camelCase。

这适用于 Chrome...

```
.getPropertyValue('border-radius'); 
```

但是 Firefox 似乎需要使用这种语法的特定角落......

```
.getPropertyValue('border-top-left-radius'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:57:31.980

**getComputedStyle**在下面的 IE8 上不受支持，以修复此使用：

```
if (!window.getComputedStyle) {
       window.getComputedStyle = function(el, pseudo) {
           this.el = el;
               this.getPropertyValue = function(prop) {
               var re = /(\-([a-z]){1})/g;
               if (prop == 'float') prop = 'styleFloat';
               if (re.test(prop)) {
                   prop = prop.replace(re, function () {
                       return arguments[2].toUpperCase();
                   });
               }
               return el.currentStyle[prop] ? el.currentStyle[prop] : null;
           }
           return this;
       }
   }

var elem = window.getComputedStyle(document.getElementById('test'), "");
alert(elem.getPropertyValue("borderRadius")); 
```

# android - Android：图形滑块索引

> ID：10803026
> 
> 赞同：0
> 
> 时间：2012-05-29T16:22:41.500
> 
> 标签：android, slider, custom-component

我需要像这样制作一个滑块索引：

![在此处输入图像描述](../Images/33da34613067dc5f9f20186e3cfbe324.png)

（在这种情况下，它表示当前索引为 3）。

由于它似乎不是一个完整的解决方案，我必须制作一个自定义的。

我想到了2种可能：

*   创建一个自定义组件并使用 onDraw 绘制/更新圆圈。只有“几何”绘图。但它的效果有限。也许我想要一个闪亮的圆圈或其他东西，那是行不通的。另一方面，调整大小很容易。

*   使用位图。但我不知道这是否可能很贵......（如果我有 30 个或更多）。而且从某种意义上说，我必须缩小规模，这看起来不再好看了。

或者也许是别的什么？

任何人都可以建议我这样做的方法是什么......

谢谢。

# python - Python：列之间的三种不同分隔符，列到列表，最快的方式

> ID：10803031
> 
> 赞同：0
> 
> 时间：2012-05-29T16:23:07.330
> 
> 标签：python, delimiter

我有具有三个不同定界符的数据（如下）（第一个对数字有一个空格，第二个对数字有 3 个空格，最后一列是一个空格，然后是一个制表符对数字），我希望能够生成一个包含每列的顺序值的列表。

```
 8000.5   16745     0.1257
 8001.0   16745     0.1242
 8001.5   16745     0.1565
 8002.0   16745     0.1595
 8002.5   16745     0.1093
 8003.0   16745     0.1644 
```

我用 re 尝试了一些东西。在转换为字符串以查看是否可以以这种方式解析它之后，但是转换似乎有点冗长，我想知道是否有人知道更快的方法。理想的输出是

```
list 1 = [8000.5, 8001.0, 8001.5 ...]
list 2 = [16745, 16745, 16745, ...]
list 3 = [0.1257, 0.1242, 0.1565, ...] 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:25:04.810

只需使用`.split()`; 它会占用任意数量的空格并在其上拆分（完全忽略前导和尾随空格）：

```
>>> ex = ' 8000.5   16745     0.1257'
>>> ex.split()
['8000.5', '16745', '0.1257'] 
```

如果您需要浮点数而不是字符串，只需`float()`使用以下命令应用于每个值`map`：

```
>>> ex = ' 8000.5   16745     0.1257'
>>> map(float, ex.split())
[8000.5, 16745.0, 0.1257] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T16:27:11.263

采用`split()`

```
strs = """ 8000.5   16745     0.1257
 8001.0   16745     0.1242
 8001.5   16745     0.1565
 8002.0   16745     0.1595
 8002.5   16745     0.1093
 8003.0   16745     0.1644"""

list_col= map(list,zip(*(map(float,x.split()) for x in strs.split('\n'))))

print(list(list_col)) 
```

**输出：**列列表的列表

```
[[8000.5, 8001.0, 8001.5, 8002.0, 8002.5, 8003.0], [16745.0, 16745.0, 16745.0, 16745.0, 16745.0, 16745.0], [0.1257, 0.1242, 0.1565, 0.1595, 0.1093, 0.1644]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T16:29:02.590

```
txt = """ 8000.5   16745     0.1257
 8001.0   16745     0.1242
 8001.5   16745     0.1565
 8002.0   16745     0.1595
 8002.5   16745     0.1093
 8003.0   16745     0.1644 """

data = zip(*((float(s) for s in row.split()) for row in txt.split('\n'))) 
```

结果是

```
[(8000.5, 8001.0, 8001.5, 8002.0, 8002.5, 8003.0),
 (16745.0, 16745.0, 16745.0, 16745.0, 16745.0, 16745.0),
 (0.1257, 0.1242, 0.1565, 0.1595, 0.1093, 0.1644)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T17:19:05.183

还有另一种方法（`s`是初始字符串）：

```
>>> [map(float, col) for col in zip(*map(str.split, s.splitlines()))]
[[8000.5, 8001.0, 8001.5, 8002.0, 8002.5, 8003.0],
 [16745.0, 16745.0, 16745.0, 16745.0, 16745.0, 16745.0],
 [0.1257, 0.1242, 0.1565, 0.1595, 0.1093, 0.1644]] 
```

# sql - 超出字符宽度

> ID：10803033
> 
> 赞同：0
> 
> 时间：2012-05-29T16:23:09.597
> 
> 标签：sql, netezza

我创建了一个包含 A 列、B 列和 C 列的主表。每当我尝试使用以下命令从另一个表中插入行时：

```
INSERT INTO MASTER
select * from Table B 
```

我收到错误消息“超出字符宽度”。我不确定为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:30:33.943

可能是 的一个或多个列大小`Table B`大于 的相应列大小`MASTER`。

例如 - `Table B`'s`column1`可能是`VARCHAR(255)`并且`MASTER`'s`column A`可能小于 255。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T16:32:48.623

检查表 MASTER 的结构是否与表 B**完全相同。**

可能是 MASTER.colx 是字符串 (20) 而 B.colx 是字符串 (25) 的问题，或者可能是字符集问题 (unicode/latin-1/utf-8/iso-8859-x)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T16:38:31.133

考虑将表 MASTER 创建为：

```
select *
  into master
  from tableB
 where 1=0 
```

这将保证两个表之间的列数据类型相同。然后您可以再次尝试插入。

# android - 排列两个 Textview，因为它们需要空间，或者甚至在父级中分配它们

> ID：10803034
> 
> 赞同：0
> 
> 时间：2012-05-29T16:23:15.990
> 
> 标签：android, android-layout, textview

我已尝试使用`LinearLayout`/`layout_weight`或`RelativeLayout`但无法使布局按预期运行。

我想要做的是一个布局，两个`TextViews`水平排列，中间有一个分隔符。（包含）布局具有恒定的最大宽度，但可能小于（但不大于）。两者的宽度`TextViews`应该取决于它们的内容，但也应该有一个上边界，以便它们都适合这个布局。

这是两种情况的可视化：

a) 两者都`TextViews`适合它们的布局容器，并且应该与中间的分隔符对齐。下面，包含布局由外括号定义，并且*可能*大于`TextViews`.

```
[[abcdefgs][delim][12334345]             ] 
```

（容器）布局宽度可以是`wrap_content`或`fill_parent`

b) 两者`TextViews`都不适合其布局容器的（最大）宽度。然后它们应该均匀地分布在它们的布局内（具有最大宽度）。的文本`TextViews`然后被截断。

```
 ..... 50% .....         ..... 50% .....
[[abcdefghijk...][delim][123456789012...]] 
```

有人知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:19:44.383

我不知道这是否是您想要的（因为您的问题模棱两可），但看看这个布局是否有帮助：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ellipsize="end"
            android:text="TextView" />

        <View
            android:layout_width="2dp"
            android:layout_height="fill_parent"
            android:background="#99cc00" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ellipsize="end"
            android:text="TextView" />
    </LinearLayout>

    <View
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1" />

</LinearLayout> 
```

其中两者`View`之间的`TextViews`代表分隔符。在两者中插入更多文本`TextView`以查看它们占用的空间。

# java - 使用 XStream 和 JsonHierarchicalStreamDriver 输出值，如何舍入双精度数？

> ID：10803035
> 
> 赞同：1
> 
> 时间：2012-05-29T16:23:23.417
> 
> 标签：java, xml, json, xstream

类似的问题是here，正如答案所示，我确实尝试过使用转换器。

[格式化 XML 的十进制值](https://stackoverflow.com/questions/6505532/formatting-decimal-values-for-xml)

我正在将对象序列化为 xml 和 json。我在需要时使用 XStream 和 JsonHierarchicalStreamDriver。

对象具有 double 类型的属性。这些序列化很好。在 xml 中它被序列化为：

```
<value>3.14159265</value> 
```

在 json 中是：

```
value: 3.14159265 
```

我现在需要将值四舍五入到给定的小数位数。

在我第一次尝试时，我编写了一个转换器，它将所有双精度数四舍五入到小数点后 2 位。如上所示（除了值被四舍五入），但问题是不同的属性需要四舍五入到不同的有效数字，并且转换器不知道在“marshal”方法时有多少位小数。

我的第二次尝试使用自定义对象来替换双精度对象，它包含双精度对象和小数位数。需要另一个转换器，这适用于 xml，但在 json 中，它将值呈现为字符串（即引号中）而不是数字（这是我真正想要的）。

如何将四舍五入的双精度数呈现为数字？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:34:35.943

如果有人感兴趣，似乎 JsonHierarchicalStreamDriver 使用了一个名为 JsonWriter 的类。在它们之间，他们假设任何双精度数、整数等转换为 JSON 数字，而自定义对象将被转换为文本（即用引号括起来）。似乎无论如何都没有指定您希望如何呈现值。

如果您仍然需要完成，有几种选择。您也许可以使用 JsonHierarchicalStreamDriver 的替代方案。该文档暗示 JettisonMappedXmlDriver 的一个版本会将所有类似数字的字符串转换为 JSON 数字（并不总是需要）。

我使用了以下肮脏的技巧：

创建一个允许您删除引号的新作者：

```
public static class HackJsonWriter extends JsonWriter {
    public HackJsonWriter(Writer writer) {
        super(writer);
    }

    private boolean dropQuotes = false;

    public void dropQuotes() {
        dropQuotes = true;
    }

    public void allowQuotes() {
        dropQuotes = false;
    }

    @Override
    protected void addValue(String value, AbstractJsonWriter.Type type)
    {
        if (dropQuotes) {
            super.addValue(value, AbstractJsonWriter.Type.NULL);
        }
        else {
            super.addValue(value, type);
        }
    }
} 
```

通过以下方式覆盖编写器的创建：

```
new XStream(new JsonHierarchicalStreamDriver() {
    @Override
    public HierarchicalStreamWriter createWriter(Writer writer) {
        return new HackJsonWriter(writer);
    }
}); 
```

创建一个发现黑客并处理它的转换器。

```
public static class HackRoundedDoubleConverter implements Converter {

    private HackRoundedDoubleConverter() {
    }

    @Override
    public boolean canConvert(Class clazz) {
        return RoundedDouble.class.isAssignableFrom(clazz);
    }

    @Override
    public void marshal(Object value, HierarchicalStreamWriter writer, MarshallingContext context) {
        if (value == null) {
            return; // now that i think about it, this should probably write "null" (no quotes), but I was handling that elsewhere
        }
        RoundedDouble number = (RoundedDouble)value;
        if (Double.isNaN(number.getValue()) || Double.isInfinite(number.getValue())) {
            return; // at this point, we would have a problem.  an empty node will be created no matter what (and it translates to an empty object in javascript).
        }

        if (writer.underlyingWriter() instanceof HackJsonWriter) {
            HackJsonWriter hackWriter = (HackJsonWriter)writer.underlyingWriter();
            hackWriter.dropQuotes();
            writer.setValue(number.getRoundedValue());
            hackWriter.allowQuotes();
        }
        else {
            writer.setValue(number.getRoundedValue());
        }
    }

    @Override
    public Object unmarshal(HierarchicalStreamReader reader, UnmarshallingContext context) {
        // only interested in the one direction
        return null;
    }
} 
```

注册转换器：

```
 xstream.registerConverter(new HackRoundedDoubleConverter()); 
```

RoundedDouble 是一个具有两个属性、一个双精度值和多个小数位的类。

正如我所说，它是一种 hack（它非常脆弱，可能有很多我什至没有发现的问题），而且我可能在研究如何做时触犯了法律。我可能什至不会使用它，但它回答了我最初的问题。

# math - 逆（列）行主顺序变换

> ID：10803043
> 
> 赞同：2
> 
> 时间：2012-05-29T16:23:43.873
> 
> 标签：math

任何人都可以提供/参考多维行主要顺序的“索引->偏移”*转换的倒数。此外，（伪）代码将不胜感激。

*   [http://en.wikipedia.org/wiki/Row-major_order](http://en.wikipedia.org/wiki/Row-major_order)

举个例子，简化了引发我的问题的特定问题：我有一个 3 维数据层次结构，用 (a,b,c) 跨越的空间表示，其中 a、b 和 c 是大于或等于零的整数小于 N_a、N_b 和 N_c。我想将数据表示为一维数组。“偏移量”按行主要顺序给出如下：

```
 int offset(a, b, c){
      return a*N_b*N_c + b*N_c + c;
} 
```

那么反向转换是什么，即：

```
int a(int offset);
int b(int offset);
int c(int offset); 
```

此外，我如何将其推广到第 N 维索引？引发这个问题的问题是第 5 维。

万一这很重要，我正在用 c/c++ 编写。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T06:11:06.403

如果指数计算为

```
offset = row + column*NUMROWS 
```

那么倒数将是

```
row = offset % NUMROWS
column = offset / NUMROWS 
```

其中`%`是模数，`/`是整数除法。

这假设第一个元素位于偏移量 0、行 0 和列 0。如果它们从 1 开始，则必须在适当的位置加或减 1。

* * *

对于更高的维度，您必须对每个度量重复此操作。

```
offset = x + WIDTH*(y + HEIGHT*(z + DEPTH*time)); 
```

和相反的

```
x = offset % WIDTH
offset = offset / WIDTH

y = offset % HEIGHT
offset = offset / HEIGHT

z = offset % DEPTH
offset = offset / DEPTH

time = offset 
```

您还可以提取特定坐标：

```
z = (offset / (WIDTH * HEIGHT)) % DEPTH 
```

# android - android是否会记录启动时间？

> ID：10803052
> 
> 赞同：3
> 
> 时间：2012-05-29T16:24:13.233
> 
> 标签：android, logging, boot, safe-mode, parental-control

我正在为安卓制作一个家长控制/问责应用程序。它由一个在后台运行并在手机启动时启动的监控服务组成。

不幸的是，我发现当android以“安全模式”启动时，服务不会自动启动，因此我的应用程序存在严重缺陷。

在安全模式下，可以在不运行我的监控服务的情况下启动 Web 和其他应用程序。

我想如果在安全模式下无法监控应用程序活动，也许我至少可以让我的应用程序检测手机之前是否处于安全模式。然后它可能会提醒家长或责任伙伴？

Android是否保留任何日志？或者任何一般的引导日志？

# tridion - 动态查询已翻译的关键词

> ID：10803054
> 
> 赞同：5
> 
> 时间：2012-05-29T16:24:24.060
> 
> 标签：tridion

我正在尝试使用动态查询 api 根据用户受众管理器配置文件来确定 Tridion 中是否可用组件。

他们个人资料中的这些字段之一是“国家/地区”——在受众经理个人资料的扩展详细信息部分中记录为自由文本，但基于“国家/地区”类别中的关键字。不幸的是，由于客户的要求，我们无法将其存储为关键字。

预计正在开发的网站上的某些表格将使用来自受众管理器的个人资料信息预先填写，例如从下拉菜单中预先选择用户国家。

我担心的是，如果“国家”类别在另一个出版物中被翻译，则不可能在表格上预先填充国家下拉菜单，因为翻译的国家名称会有所不同。

是这样吗，还是可以翻译和受众经理简介？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:01:36.733

如果您可以获得本地关键字（您的示例中的中文关键字）。从那里您可以进行“使用项目”查找以找到父关键字。我没有具体的代码，但是如果您在 GUI 中签入，如果您在本地化关键字上执行 Where Used，则可以在 Used Items 选项卡中看到父项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:39:07.320

我不知道这对观众经理有多具体。这不是更多的一般蓝图问题吗？正如您所说，如果您翻译国名关键字，则翻译后的值当然就是将发布到内容交付系统的内容。在您的站点中使用翻译后的值可能是有意义的；否则你为什么要翻译它们？

如果有充分的理由想要使用未翻译的值，那么您可以通过也从父出版物发布并编写查询以在该出版物的上下文中操作来轻松地做到这一点。由于这两个值都可用，因此您可以构建程序逻辑以使用任何一个有意义的值，并且仍然可以从两者之间的明确关系中受益。

# android - 如何在 jni 函数中访问图像文件夹

> ID：10803059
> 
> 赞同：0
> 
> 时间：2012-05-29T16:25:04.273
> 
> 标签：android, java-native-interface

我有一个 android 项目，在该项目中我有一个包含一些图像的文件夹。现在我想要的是在 jni 函数中访问该文件夹。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:47:17.400

Android 应用程序本质上是一个 zip 文件，但是有很多很好的帮手可以获取这些资源。您需要记住的第一件事是，这些文件实际上并不在*文件夹*中，除非您将它们放在那里。

也就是说，对于您的情况，有许多可能的解决方案。

## JNI（几乎）一路走来

最适合 JNI 的方式是使用类似的方法

```
private native void processResources(AssetManager assets); 
```

在你的`Activity`, 并使用 JNI 从中撬出所有必要的资源，将它们放在磁盘上的某个位置，然后处理它们。

## 混入一点Java

可能更简单的方法是使用一些有助于资源管理的 Java 代码；就像是

```
private void processAll() {
    for (String resource : getResources().getAssets().list(mydir)) {
        process(getResources().getAssets().open(resource));
    }
    // exception handling omitted for readability
}

private void process(InputStream in) throws IOException {
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    byte[] buf = new byte[1024];
    for (int read = in.read(buf); read > 0; read = in.read(buf)) {
        out.write(buf, 0, len);
    }
    process(out.toByteArray());
}

private native void process(byte[] resource); 
```

并基于`byte[]`.

## 在文件系统上准备文件

第三种解决方案是将文件从包中移出并移到文件系统上，然后将本机代码指向该目录。

## 所以？

最后，这一切都取决于您究竟想对资源做什么，以及它们是否*真的*需要在文件系统上。我会让事情尽可能接近Java，并且只有在你真的需要时才使用本地（例如，你的图像处理代码）。

# javascript - 表单重新设计后 Javascript 不再有效

> ID：10803069
> 
> 赞同：0
> 
> 时间：2012-05-29T16:26:02.090
> 
> 标签：javascript, asp.net

我们将一段 javascript 注入到负责重定向的页面上，在重新设计页面和母版页之后，javascript 不再起作用。

Javascript完全如下

```
function PostVspForm()
{{
    var vspForm = document.forms['vsp'];
    if (!vspForm) vspForm = document.vsp;
    if (!vspForm.onsubmit || (vspForm.onsubmit() != false)) 
    {{
        vspForm.action = '{0}';
        vspForm.submit();
    }}
}}
PostVspForm(); 
```

我不确定它的作用或如何纠正它，记住它也需要像上面一样工作。

我相信它只是识别一个名为 vsp 的表单，该表单仍在页面上，但现在在调用 document.vsp 之后，该对象为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:46:53.703

您是否更改了此代码相对于它所针对的 vsp 表单的位置？如果是这样，您可能在页面中存在表单之前运行它。

尝试将您的 js 移动到页面底部，或将其包装在如下块中：

```
window.onload=function(){
  //your code here
  console.log(vspForm);
} 
```

如果你使用 jQuery，你可以这样做：

```
$(document).ready(function() {
  // your code here
}); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T16:28:46.317

这很奇怪。使用 Javascript 进行重定向或某种验证。我建议用 page_load() 方法中的代码替换它。

# android - 无法创建新的 AVD

> ID：10803074
> 
> 赞同：0
> 
> 时间：2012-05-29T16:26:28.143
> 
> 标签：android, ubuntu, avd

我将我的 android-sdk-linux 文件夹从办公室桌面复制到我的笔记本电脑，并设置了适当的路径，但无法创建任何 avd。仅在单击新 avd 时在控制台中显示此错误消息。

```
[2012-05-29 22:09:54 - SDK Manager] Failed to create the SD card.
[2012-05-29 22:09:55 - SDK Manager] Failed to create sdcard in the AVD folder. 
```

任何人请给我一些技巧

编辑：顺便说一句，在我的电脑中，我没有 home/username/.android/avd。那我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-12T18:50:47.263

在设置新的 Android SDK 时，我遇到了类似的问题。您提到的错误消息通常是由于对Android SDK目录中“工具”文件夹中文件的访问权限造成的。

利用

```
cd [Path to Android SDK]/Tools/ 
chmod 755 * 
```

同样对于`/home/[USER_NAME]/.android/avd folder`, 给予`777`许可使用

```
chmod 777 /home/[USER_NAME]/.android/avd command 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T07:39:21.327

只需删除保存在（文档和设置\用户名）中的android文件夹，删除.android文件夹重新启动你的电脑并打开eclipse并重新创建一个新的avd它工作正常..

# c - 如何修改recv来实现IO/非阻塞？

> ID：10803079
> 
> 赞同：0
> 
> 时间：2012-05-29T16:26:39.750
> 
> 标签：c, nonblocking, asyncsocket, recv

我正在尝试用 C 语言编写一个 I/O 非阻塞的服务器，因为有时它会因洪水请求而停机。环顾四周，我注意到 I/O 非阻塞可以解决我的问题。阅读 Beej 指南，我已经实现了 recvtimeout 函数，它设置了一个超时来处理来自客户端的数据。人们告诉我我必须使用**select**来避免这个问题，但我已经在函数 recvtimeout 中使用了它：

```
int Server::recvtimeout(int s, char *buf, int len, int timeout)
    {

    //Check if non-blocking
    fcntl(s, F_SETFL, O_NONBLOCK);
int flags = fcntl(s, F_GETFD);
if ((flags & O_NONBLOCK) == O_NONBLOCK) {
  fprintf(stderr, "nonblocking active");
}
else {
  fprintf(stderr, "nonblocking not active");
}
    //End check

fd_set fds;
int n;
struct timeval tv;
// set up the file descriptor set
FD_ZERO(&fds);
FD_SET(s, &fds);
// set up the struct timeval for the timeout
tv.tv_sec = timeout;
tv.tv_usec = 0;
// wait until timeout or data received
n = select(s+1, &fds, NULL, NULL, &tv);
if (n == 0){
    return -2; // timeout!
}
if (n == -1){
    return -1; // error
}
// data must be here, so do a normal recv()
return recv(s, buf, len, 0);
    } 
```

所以，我添加了一段代码，显示是否设置了 NONBLOCK ，但我从来没有读过*nonblocking active*，所以在我的代码中 nonblocking 是不活动的。如何修改我的代码以启用此功能？

问题是当我从客户端读取字符串并有这样的代码时：

```
 char headerstring[512];
    memset(headerstring,0,512);
    if(this->recvtimeout(client_fd,headerstring,sizeof(headerstring),10) < 0){
        close(client_fd);
    } 
```

一切正常，但是使用在事务期间关闭连接的泛洪器，服务器出现故障。我试过 try-catch 和其他任何东西......但没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:35:09.997

将套接字设置为非阻塞的正常方法是

```
 int x;
  x=fcntl(s,F_GETFL,0);
  fcntl(s,F_SETFL,x | O_NONBLOCK); 
```

在您的代码中，您正在使用

```
int flags = fcntl(s, F_GETFD); 
```

而你应该这样做

```
 x=fcntl(s,F_GETFL,0); 
```

因此，您的套接字实际上可能已启用非阻塞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:29:04.583

有几件事：

1.  通话后`select()`：

    ```
    if(n < 0) continue;
    if(FD_ISSET(s, &fds)) { //check if Socket ready for reading
       FD_CLR(s, &fds);  // Clear for next time
       // call recv()
    } 
    ```

2.  像这样将套接字设置为非阻塞：

    ```
    /* set socket as non-blocking */
    int x = fcntl(s, F_GETFL, 0);
    fcntl(s, F_SETFL, x | O_NONBLOCK); 
    ```

# jqgrid - JQGrid Grouping GroupText 格式化和修改

> ID：10803081
> 
> 赞同：5
> 
> 时间：2012-05-29T16:27:08.640
> 
> 标签：jqgrid, jqgrid-asp.net, jqgrid-php, jqgrid-formatter

我有一个实现分组的网格，但想扩展 groupText: 区域中显示的详细信息。理想情况下，我将能够获取有关该分组的数据并使用组名（{0} 默认值）显示在该组行中。

换句话说，我想要实现的是一种方法，不仅可以显示组名，还可以将 JSON 提要中包含的其他一些数据项显示到网格中。

我的搜索似乎缺少任何能够实现这一目标的人，但我希望有人能够对扩展此设置并提供对创建该区域的访问有所了解。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T19:32:06.727

我觉得你的问题很有趣，但实现并不简单。在我之前展示[的答案中，如何在分组的摘要行中使用自定义格式化程序。](https://stackoverflow.com/a/7622718/315935)

在[演示](http://www.ok-soft-gmbh.com/jqGrid/CustomGroupingFormatter.htm)中，您可以看到如何实现分组文本的自定义格式。该演示显示以下内容：

![在此处输入图像描述](../Images/817cb45edd2cabad88d0d64f6737b860.png)

该实现仅由可用于两个目的[的自定义格式化程序](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:custom_formatter)的实现组成：在按列分组的情况下，格式化相应列的内容和格式化分组文本。代码有点棘手，但我希望所有人都能遵循它。该代码使用输入参数的差异来定义是调用格式化程序来格式化列内容还是格式化分组文本。

在使用大量行的情况下，获取诸如“（test4，test7）”之类的文本的代码的一部分不是那么有效，但它可以工作。

下面是“日期”列的格式化程序代码，通常与预定义的`formatter: 'date'`. 我在部分代码中调用了原始日期格式化程序，但用于分组文本更复杂的代码：

```
formatter: function (cellval, opts, rowObject, action) {
    var fullOpts = $.extend({}, $.jgrid.formatter.date, opts),
        formattedDate = $.fmatter.util.DateFormat('Y-m-d', cellval, 'd-M-Y', fullOpts),
        groupIdPrefix = opts.gid + "ghead_",
        groupIdPrefixLength = groupIdPrefix.length,
        month = Number(cellval.split('-')[1]), // input format 'Y-m-d'
        names = [], data, i, l, item;

    // test wether opts.rowId start with opts.gid + "ghead_" and integer
    // and rowObject is the array and action is undefined.

    if (opts.rowId.substr(0, groupIdPrefixLength) === groupIdPrefix && typeof action === "undefined") {
        // custom formating of the group header
        // we just simulate some login by testing of the month > 9

        // the next code fragment is not effective, but it can be used
        // in case of not so large number of groups and the local data
        data = $(this).jqGrid("getGridParam", "data");
        for (i = 0, l = data.length; i < l; i++) {
            item = data[i];
            if (item.invdate === cellval) {
                names.push(item.name);
            }
        }

        return (month > 9 ? ('<span class="ui-icon ui-icon-alert" style="float: left;"></span>' +
            '<span style="color:tomato; margin-left: 5px;">') : "<span>") +
            formattedDate + ' (' + names.join() + ')</span>'
    }
    return formattedDate;
} 
```

**更新**：演示的固定版本在[这里](http://www.ok-soft-gmbh.com/jqGrid/CustomGroupingFormatter1.htm)。它使用`$.fn.fmatter`而不是当前从 jqGrid 方法中删除`$.fmatter.util.DateFormat`。

# android - 我如何更改我的 AndroidManifest，因为它正在由 maven 打包

> ID：10803088
> 
> 赞同：8
> 
> 时间：2012-05-29T16:27:37.353
> 
> 标签：android, maven, android-manifest, android-maven-plugin

我有 maven 目标更新清单在我的项目中工作，并根据我打包的配置文件更新我想要更改的属性；不幸的是，它改变了源代码管理中的清单。我希望它更改打包的清单，但不理会主版本。我没有在 target/ 下看到我可以指出的 AndroidManifest 版本。我正在使用 android-maven 插件版本 3.2

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-29T23:23:58.597

如果您使用[manifestVersionCode](http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html#manifestVersionCode)或[manifestVersionName](http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html#manifestVersionName)之类的配置来更新清单，这就是它的设计和工作方式，它将更改写入原始 AndroidManifest.xml。

看来您真正需要的是过滤清单而不是更新清单。资源过滤是 android-maven-plugin 支持并经常使用的另一种使用场景。

示例 AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mycompany.myapp"
    android:versionCode="${app.version.code}"
    android:versionName="${app.version.name}">
... ... 
```

示例 pom.xml：

```
<!-- value to be substituted in manifest -->
<properties>
  <app.version.code>1</app.version.code>
  <app.version.name>1.0.0-SNAPSHOT</app.version.name>
</properties>

... ...

<build>
  <resources>
    <!-- filter manifest and put filtered file in target/filtered-manifest/ -->
    <resource>
      <directory>${project.basedir}</directory>
      <filtering>true</filtering>
      <targetPath>${project.build.directory}/filtered-manifest</targetPath>
      <includes>
        <include>AndroidManifest.xml</include>
      </includes>
    </resource>
  </resources>

  ... ...

  <plugins>
    <plugin>
      <groupId>com.jayway.maven.plugins.android.generation2</groupId>
      <artifactId>android-maven-plugin</artifactId>
      <extensions>true</extensions>
      <configuration>
        <undeployBeforeDeploy>true</undeployBeforeDeploy>
        <!-- tell build process to use filtered manifest -->
        <androidManifestFile>${project.build.directory}/filtered-manifest/AndroidManifest.xml</androidManifestFile>
      </configuration>
    </plugin>

  ... ... 
```

现在 android-maven-plugin 将使用过滤后的 AndroidManifest.xml 并保持原来的 AndroidManifest.xml 不变。

希望这可以帮助。

更新：

你可能也需要这个：

```
<plugin>
        <artifactId>maven-resources-plugin</artifactId>
        <version>2.5</version>
        <executions>
            <execution>
                <phase>initialize</phase>
                <goals>
                    <goal>resources</goal>
                </goals>
            </execution>
        </executions>
    </plugin> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-11T09:13:09.587

我建议使用**maven-android-plugin的****manifest-update**目标来完成此操作：

 **```
<plugins>
    <plugin>
        <groupId>com.jayway.maven.plugins.android.generation2</groupId>
        <artifactId>android-maven-plugin</artifactId>
        <version>3.3.2</version>
        <!-- This is for maven update properties in AndroidManifest file. Working outside eclipse. -->
        <executions>
            <execution>
                <id>update-manifest</id>
                <phase>process-resources</phase>
                <goals>
                    <goal>manifest-update</goal>
                </goals>
                <configuration>
                    <manifest>
                        <versionCode>${project.codeVersion}</versionCode>
                        <versionName>${project.version}</versionName>
                    </manifest>
                </configuration>
            </execution>
        </executions>
    </plugin>
</plugins> 
```

您还需要定义`project.codeVersion`：

```
<properties>
    <project.codeVersion>1</project.codeVersion>
</properties> 
```

maven 会更新你的 AndroidManifest.xml：

> ```
> [INFO] --- android-maven-plugin:3.3.2:manifest-update (update-manifest) @ myapp ---
> [INFO] Attempting to update manifest d:\dsv\project\MyApp\AndroidManifest.xml
> [INFO] Setting android:versionName to 0.0.4
> [INFO] Setting android:versionCode to 1
> [INFO] Made changes to manifest file, updating d:\...\MyApp\AndroidManifest.xml 
> ```

更多关于**android:manifest-update**目标的信息[在这里](http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html)，你可以在那里找到一些有用的参数。

**重要提示：**此解决方案**仅**适用于命令行，m2e-android 尚不支持插件执行（请​​参阅此[问题](https://github.com/rgladwell/m2e-android/issues/78)）。**

# javascript - 无需单击 jQuery 即可创建摘要

> ID：10803094
> 
> 赞同：-1
> 
> 时间：2012-05-29T16:27:50.707
> 
> 标签：javascript, jquery, html, if-statement, append

我试图创造一种图片相对论的东西（不知道该怎么称呼它）。

它将做的是在图像集中创建水果的缩略图。我认为我在 if 语句中提出了一些问题。

这是HTML代码：

```
<div id="imageholder">
    <img src="images/1.png" id="img1" thumbnail="images/orange.png" title="orange"/>
    <img src="images/2.png" id="img2" thumbnail="images/apple.png" title="apple"/>
    <img src="images/3.png" id="img3" thumbnail="images/orange.png" title="orange"/>
    <img src="images/4.png" id="img4" thumbnail="images/lime.png" title="lime"/>
    <img src="images/5.png" id="img5" thumbnail="images/banana.png" title="banana"/>
</div>

<input type="submit" name="check" id="check" value="check" />

<ul id="thumb"></ul> 
```

这是jQuery代码：

```
function checkit(){
    var list = $('#thumb');
    $("#imageholder img").each(function() {
        var titleset = this.attr('title');
        var imageset = this.attr('thumbnail');
        var existing_item = $('#list_item_' + titleset);
        if (existing_item.length < 1) {
            var new_item = $('<li />');
            new_item.attr('id', 'list_item_' + titleset);
            new_item.html('<div class="summarytitle">' + titleset + '</div><img src="' + imageset + '" class="swatch_s" />');
            list.append(new_item);
        } else if (existing_item.length > 1) {
            $('#list_item_' + titleset).attr('src', imageset);
            $('#list_item_' + titleset).text(titleset);
        }
    });
}

$("#check").click(function(){
    checkit();
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T16:41:35.447

`this`是 JavaScript 对象，而**不是**jQuery 对象。您需要使用`$(this)`. 试试这个：

```
function checkit(){
    var list = $('#thumb');
    $("#imageholder img").each(function() {
        var titleset = $(this).attr('title');
        var imageset = $(this).attr('thumbnail');
        var existing_item = $('#list_item_' + titleset);
        if (existing_item.length < 1) {
            var new_item = $('<li />');
            new_item.attr('id', 'list_item_' + titleset);
            new_item.html('<div class="summarytitle">' + titleset + '</div><img src="' + imageset + '" class="swatch_s" />');
            list.append(new_item);
        } else if (existing_item.length > 1) {
            $('#list_item_' + titleset).attr('src', imageset);
            $('#list_item_' + titleset).text(titleset);
        }
    });
}

$("#check").click(function(){
    checkit();
}); //you were missing a ")" here too 
```

# oracle - 无法在存储过程中运行大型动态选择查询

> ID：10803095
> 
> 赞同：0
> 
> 时间：2012-05-29T16:27:54.233
> 
> 标签：oracle, plsql, oracle11g

我有一个正在执行动态选择查询的存储过程。查询字符串很大。下面是存储过程

```
创建或替换
程序 My_SP
(
procRefCursor out sys_refcursor,
--我这里的其他输入变量
)
是

dynSqlComplete varchar2(8000) := 'n/a';

开始

  dynSqlComplete := '这里的大查询';

  为 dynSqlComplete 打开 procRefCursor；

结尾;

```

当我运行这个 sp 它显示以下错误

> **ORA-00600: 内部错误代码, 参数: [qcscbAddToSelLists], [], [], [], [], [], [], [], [], [], [], []**

所以我将变量的大小减小`dynSqlComplete`到 varchar2(5000)，然后运行存储过程。我收到以下错误：

> **ORA-06502: PL/SQL: 数字或值错误: 字符串缓冲区太小**

我徒劳地尝试了很多东西，我也不想在这里添加它们，因为它会误导。

**-- 编辑 -- 2012 年 6 月 6 日**

大家好，

我能够查明问题，但我还不能解决它。我尝试逐部分运行查询，但发现引发错误的查询。它包含`START WITH`，当我评论它时，查询开始起作用。我已经给出了下面的代码并注释掉了给出错误的代码。

```
      选择 RowNum 作为 RowNumber1，
      GR.*,
      --LEVEL AS LineageLvl,
      VDE.*
    从
      （选择 *
      FROM group_relations left external join relation_classifier_instances RC on
      rc.relation_id = group_relations.Group_relation_id WHERE group_relation_type_id IN
      (19,20,32,38,42,43) 和 (rc.relation_id 为空)
      ) GR
    左外连接 Vendor_Feed_data_elements VDE
    ON GR.Group_Relation_Type_Id = 19
    AND GR.Primary_GroupField_Id = VDE.Vendor_Data_Element_Id
      /* 给出错误的代码
      从...开始
      (
        VDE.Vendor_Data_Element_Id 不为空）
      CONNECT BY nocycle 先于 GR.RELATED_GROUPFIELD_ID = GR.PRIMARY_GROUPFIELD_ID*/

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:52:41.430

您可以尝试在 11g 中使用 clob 和 CLOB，类似于（未经测试）：

```
declare
  l_sql clob;
  l_str1 varchar2(32767);
  l_str2 varchar2(32767);
begin
  dbms_lob.createtemporary(l_sql, false);

  l_str1 := 'some large SQL chunk';
  l_str2 := 'and the rest of large SQL chunk';

  l_sql := l_str1;
  dbms_lob.writeappend(l_sql, length(l_str2), l_str2);

  execute immediate l_sql;

  dbms_lob.freetemporary(l_sql);

end; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-29T16:34:10.027

确定不想要函数？这是我制作的类似内容的示例。

```
FUNCTION showbody(cust varchar2, receipt varchar2) 
    RETURN sys_refcursor AS retval sys_refcursor;
BEGIN
    OPEN retval FOR
        SELECT * 
        FROM comp.comp_remittance_details
        WHERE receipt_number=receipt 
            AND customer_number=cust;
    RETURN(retval);
END showbody; 
```

# jquery - 带有简单换行符的 jQuery 克隆

> ID：10803098
> 
> 赞同：3
> 
> 时间：2012-05-29T16:28:06.733
> 
> 标签：jquery, clone

```
<select id="things">
    <option>1</option>
    <option>2</option>
    <option>3</option>
</select>

$('#things').after($('#things').clone()); 
```

克隆时如何在这两个元素之间插入中断？有没有一种简洁的方法可以在一行代码中做到这一点？我试过了：

```
$('#things').after('<br/>' + $('#things').clone()); //returns [object object] 
```

[http://jsfiddle.net/ydAdS/](http://jsfiddle.net/ydAdS/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T16:32:08.827

您正在尝试添加一个字符串和一个对象。`<br/>`为代替创建一个 jQuery 对象：

```
$("#things").after( $("<br>").add( $("#things").clone() ) );​​​​​​​​​​ 
```

小提琴：http: [//jsfiddle.net/As2Se/](http://jsfiddle.net/As2Se/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T16:32:57.357

```
$('#things').after($('#things').clone()).after('<br>');​​​​​​​​​​​​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T16:44:08.980

```
$("#things").clone().insertAfter($("#things")).before('<br>'); 
```

**[演示](http://jsfiddle.net/thecodeparadox/As2Se/1/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T16:34:04.220

尝试 ：

```
$('#things').after($('#things').clone().before('<br>'));​​​​​ 
```

演示：http: [//jsfiddle.net/Fw46g/](http://jsfiddle.net/Fw46g/)

# c++ - 用于编译共享对象库文件的简单 makefile

> ID：10803109
> 
> 赞同：2
> 
> 时间：2012-05-29T16:28:42.237
> 
> 标签：c++, c, linux, gcc, x86-64

我需要一个非常简单的 makefile 来编译共享对象库文件 (*.so)。我还需要知道如何传递优化参数，如 -O2 和 -O3。我试图用谷歌搜索简单的例子，但所有的例子都是扭曲的。

我不需要创建像 *.so.1.0 这样的任何版本，而只需要创建一个简单的 *.so 文件。我的项目将有多个文件，所以我需要一个编译多个文件的示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T16:32:28.607

我能想到的最简单的makefile可以满足您的要求：

```
CXXFLAGS += -fPIC
CXXFLAGS += -O3
x.so: x.o y.o
    g++ -shared $^ -o $@ 
```

或者，您可能希望使用更多 make 的内置规则和变量：

```
CXXFLAGS += -fPIC
CXXFLAGS += -O3
x.so: x.o y.o
    $(LINK.cc) -shared $^ $(LOADLIBES) $(LDLIBS) -o $@ 
```

# hibernate - 无法通过休眠中的反射设置器错误设置字段值

> ID：10803110
> 
> 赞同：1
> 
> 时间：2012-05-29T16:28:45.347
> 
> 标签：hibernate, reflection, mapping, setter

我将此类 BidToolTradeLanes 定义如下：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

package com.catapult.bid.model;

/**
 *
 * @author Alok Shrestha
 */
public class BidToolTradeLanes {
    private int tradeLaneId;
    private String tradeLaneName;
    private int contractId;

public BidToolTradeLanes() {
}
public int getContractId() {
    return contractId;
}

public void setContractId(int contractId) {
    this.contractId = contractId;
}

public int getTradeLaneId() {
    return tradeLaneId;
}

public void setTradeLaneId(int tradeLaneId) {
    this.tradeLaneId = tradeLaneId;
}

public String getTradeLaneName() {
    return tradeLaneName;
} 
```

}

而且，我有上述类的映射文件：

```
<hibernate-mapping package="com.catapult.bid.model"  default-access="field"> 
<class name="BidToolTradeLanes" table="bt_trade_lane" schema="bidtool" >
    <id name="tradeLaneId" type="int" column="trade_lane_id">           
        <generator class="sequence">
             <param name="sequence">bidtool.trade_lane_trade_lane_id_seq</param>
        </generator>
    </id>  

    <property name="tradeLaneName" type="string">
        <column name="tradelane_name" length="20"/>
    </property>      
     <many-to-one class="Contracts" fetch="select" name="contractId">
         <column name="contract_id"/>
    </many-to-one>
</class> 
```

现在，每当我尝试运行此语句时，我都会收到错误消息

```
List list=session.createSQLQuery("select {t.*} from bidtool.bt_trade_lane t")
                  .addEntity("t",BidToolTradeLanes.class).list(); 
```

我得到的错误是：

```
could not set a field value by reflection setter of com.catapult.bid.model.BidToolTradeLanes.contractId 
```

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T16:48:53.720

Since `contractId` is mapped as `<many-to-one>` its type should be `Contracts`, not `int`.

That's the difference between database schema and object model: in your database schema you have foreign keys, whereas in the object model you have references to other objects.

Also note that `contract` as a name for the reference would be better than `contractId`, and that classes in object model are usually named in singular, not in plural.

**See also:**

*   [5.1.7\. Mapping one to one and one to many associations](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/mapping.html#d0e7576)

# java - 在 JSP 中显示 Java 内容

> ID：10803113
> 
> 赞同：1
> 
> 时间：2012-05-29T16:28:56.817
> 
> 标签：java, jsp

设置 - Tomcat 6.0.16 - MacBook

我有一个 JSP 页面，它调用一个单独的 Java 应用程序来搜索 Web 并返回内容。我希望在我的 JSP 页面上显示此内容。

我的 JSP 代码 - 调用下面的 JAVA

```
System.out.println("Test3");
Injector injector = Guice.createInjector(new GuiceInjector());
Run r = injector.getInstance(Run.class);
r.runSliceConsumer(); 
```

我的 JAVA - 这可以工作并将我的内容打印到终端窗口。

```
if (sliceHits == null) {
    System.err.println("Timeout occurred while fetching slices");
    return;
}
if (!sliceHits.isEmpty()) {
    System.out.println("Found some slices Yuhuuuu ! :-) ");
    String sliceContent = createSlices(sliceHits);
    System.out.println("sliceContent:");
    System.out.println(sliceContent);
} 
else {
    System.out.println("No Slices were found for this query");
} 
```

我的问题是我想在我的 JSP 网页中显示上面的内容，而不仅仅是终端窗口。我假设当以一种方式建立连接时，我的 JSP 调用我的 JAVA，我应该能够只显示结果但我有一些问题，我希望它只是我的语法。

我在 JSP 中的尝试

```
<div id="result-page-query" align='center'>
<%
    sliceContent = createSlices(sliceHits);
    out.println(sliceContent);
%>
</div> 
```

我不确定我是否正确解释了这一点，但基本上我试图在我的网页上显示“sliceContent”的内容

谢谢

编辑：

嗨，正如 jddsantaella 和 Hardik Mishra 在下面建议的那样，我必须导入必要的包。然后我在这种情况下创建了一个对象“kContent”并执行了该方法。

解决方案类似于以下

```
<%

    Run kContent = injector.getInstance(Run.class);
    kContent.runSliceConsumer();
    out.println(kContent);
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:40:34.390

您不应该在 JSP 中使用 Java 代码，这是不推荐的。无论如何，您可以打印由执行以下操作的方法返回的值：

```
...
<%=myObjetct.myMethod(...)%>
... 
```

在您的尝试中不清楚是什么`createSlices`。我想可能是

```
<%=r.runSliceConsumer()%> 
```

假设您的`runSliceConsumer`方法正在返回一些东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T03:58:26.553

不建议在 JSP 中使用 JAVA 代码。JSP 主要用于演示。

其次，`"org.apache.jasper.JasperException: Unable to compile class for JSP`是运行时异常。当您运行 JSP 并且如果之前编译的 JSP 发生了变化，您的 Web 容器会在运行时编译 JSP。

此外，您应该在 jsp 的开头[添加必要的导入语句](https://stackoverflow.com/questions/239147/how-do-you-import-classes-in-jsp/239293#239293)

```
<%@ page import="java.util.List" %>

<%@ page import="yourpackage.slicer" %> 
```

最后，

```
<%
    sliceContent = createSlices(sliceHits);
    out.println(sliceContent);
%> 
```

您可以从您的方法打印字符串返回值。只需检查调用方法，如`myObj.myMethod()`

# objective-c - FMDB 使用 AutoIncrement 插入

> ID：10803114
> 
> 赞同：2
> 
> 时间：2012-05-29T16:28:57.603
> 
> 标签：objective-c, sqlite, fmdb

一段时间以来，我一直在尝试解决这个问题，但似乎找不到解决方案。我有一个创建为：

```
 [db executeUpdate:@"CREATE TABLE 'MEDIA' (identifier INTEGER PRIMARY KEY AUTOINCREMENT, taskIdentifier INTEGER, type INTEGER, data BLOB)"] 
```

我应该如何在这个表中插入一条记录？我试过这个：

```
 [db executeUpdate:@"INSERT INTO 'MEDIA' VALUES($next_id,?,?,?)" withArgumentsInArray:arguments]; 
```

而 arguments 是一个具有 4 个值的 NSArray，第一个是一个虚拟值（因为它应该自动递增）但无济于事。这应该如何与 FMDB 一起使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T11:59:13.043

您需要问自己是否真的想在此处使用 AUTOINCREMENT 关键字。AUTOINCREMENT 与 INTEGER PRIMARY KEY 一起带来了非常具体的行为，[在此处](http://www.sqlite.org/autoinc.html)进行了描述。您很可能不需要它，在这种情况下，只需将 INTEGER PRIMARY KEY 留在列定义中即可。现在，定义为 INTEGER PRIMARY KEY 的列真正成为 ROWID 的别名，因此您有 2 个选项：

*   在 INSERT 语句中省略该列的值。这将自动在那里插入下一个可用值。来自文档： `The usual algorithm is to give the newly created row a ROWID that is one larger than the largest ROWID in the table prior to the insert.`所以您的 INSERT 看起来像这样：但参数数组将只包含*taskIdentifier*、*type*和*data*`[db executeUpdate:@"INSERT INTO 'MEDIA' VALUES(?,?,?)" withArgumentsInArray:arguments];`的 3 个值。

****   *像这样为标识符*列提供值：`[db executeUpdate:@"INSERT INTO 'MEDIA' VALUES(?,?,?,?)" withArgumentsInArray:arguments];`使用包含标识符的参数数组作为索引 0 上的*NSNumber*。***

# c - 如何检查 CLI 程序是否正在等待来自标准输入的输入？

> ID：10803122
> 
> 赞同：3
> 
> 时间：2012-05-29T16:29:19.670
> 
> 标签：c, windows, api, stdin

如何检查我刚刚使用 CreateProcess() 启动的 CLI 程序是否正在等待来自标准输入的 Windows C API 输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:49:20.060

正如上面的一些评论所说，一旦程序已经开始等待，您就无法检查您的程序是否正在等待标准输入。您可以使用事件处理程序，或者您可以简单地从标准输入读取超时，在发生超时时，您标记您正在等待输入并再次开始等待超时。

# wordpress - 在存档或作者页面中显示作者角色

> ID：10803123
> 
> 赞同：1
> 
> 时间：2012-05-29T16:29:24.097
> 
> 标签：wordpress, role, author

我想在循环外的存档和作者页面上显示作者角色我找到了这段代码，它在循环中运行良好 [在 Wordpress 中获取作者的角色](https://stackoverflow.com/questions/10489214/getting-an-authors-role-in-wordpress/10489289#10489289)

但是当我将此添加到存档和作者页面时，它会给我一个警告消息，称为

```
Warning: array_shift() expects parameter 1 to be array, null given in 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:24:05.440

这些示例使用我在**COMPLETE ANSWER** [Here](https://stackoverflow.com/questions/10489214/getting-an-authors-role-in-wordpress/10489289#10489289)中给出的函数。在您的 functions.php 文件中：

```
function get_user_role($id)
{
    $user = new WP_User($id);
    return array_shift($user->roles);
} 
```

在您的存档页面中：

```
if(have_posts()) : while(have_posts()) : the_post();
    $aid = $post->post_author;
    echo get_the_author_meta('user_nicename', $aid).' | '.get_user_role($aid);
endwhile;endif; 
```

至于你的作者模板，[Wordpress Codex on Author Templates](http://codex.wordpress.org/Author_Templates)有很多有用的信息。你可以这样做：

```
<?php
$curauth = (get_query_var('author_name')) ? get_user_by('slug', get_query_var('author_name')) : get_userdata(get_query_var('author'));
echo $curauth->user_nicename.' | '.get_user_role($curauth->ID);
?> 
```

# php - 从 txt 文件中加载一个数字并将其用作对象

> ID：10803124
> 
> 赞同：0
> 
> 时间：2012-05-29T16:29:28.177
> 
> 标签：php, string, object

我想加载一个包含数字的文件并将其用作数字（而不是字符串）。有什么解决办法吗？我得到的错误

```
Call to a member function seek() on a non-object 
```

我的 PHP 代码

```
$in = fopen('emails.txt','r');
$out = fopen('currentposition.txt', 'r+');
$pos = file_get_contents('currentposition.txt');
$in->seek($number1); 
while($kw = trim(fgets($in))) {
    //my code
    $position = $in->current();
    fwrite($out, $position);
}

fclose($in);
fclose($out); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:36:44.793

文件

```
$ cat /tmp/ll
9 
```

剧本 ：

```
<?php

$x = file_get_contents("/tmp/ll");
echo $x + 10;
?> 
```

输出：19

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T16:52:15.603

答案在您收到的错误消息中：这意味着您正在调用一个**方法**，即对象的成员函数，用于不是**对象**的东西（在面向对象编程的意义上）。`$in`不是一个类的对象，只是一个`resource`.

**编辑**

现在我正确理解了你想要完成的任务试试这个：

```
// use w - to truncate when writing (overwrite), b - in case you ever run this on Windows
$recordFile = fopen('currentposition.txt', 'wbr');
$emailsFile = fopen('emails.txt', 'r');
$pos = trim(fgets($recordFile));
// if first time and there was no 0 in the currentposition.txt
if(!isset($pos))
    $pos = 0;

//set the pointer
fseek($emailsFile, $pos);

// read the contents;
$content = fread($emailsFile, filesize($emailsFile));

// get the current position of the file pointer
$pos = ftell($emailsFile);

// write the last position in the file
fwrite($recordFile, $pos);

fclose($recordFile);
fclose($emailsFile); 
```

老实说，这应该有效，但尚未经过测试。我希望你能得到大致的想法。

**添加**

上面的代码一次将电子邮件文件的所有内容读取到一个（字符串）变量中。然后，您可以将其`\n`用作分隔符，例如`$allEmails = split('\n', $content);` 并将电子邮件放在一个数组中，您可以通过该数组进行循环。无论如何，这是相同的代码，但带有`while`循环，即逐行读取文件 - 对于非常大的文件（MBytes）会很好

```
// use w - to truncate when writing (overwrite), b - in case you ever run this on Windows
$recordFile = fopen('currentposition.txt', 'wbr');
$emailsFile = fopen('emails.txt', 'r');
$pos = trim(fgets($recordFile));
// if first time and there was no 0 in the currentposition.txt
if(!isset($pos))
    $pos = 0;

//set the pointer
fseek($emailsFile, $pos);

// while end of file is not reached
while(!feof($emailsFile)){
    // read one line of the file and remove leading and trailing blanks
    $kw = trim(fgets($emailsFile));
    // .... do something with the line you've read
    // get the current position of the file pointer
    $pos = ftell($emailsFile);    
    // you don't need to write the position in the $recordFile every loop!
    // saving it in $pos is just enough
}

// write the last position in the file
fwrite($recordFile, $pos);

fclose($recordFile);
fclose($emailsFile); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T16:38:23.613

使用`$pos`而不是`$number1`...？

# actionscript-3 - 发送 ARP 探测消息

> ID：10803128
> 
> 赞同：0
> 
> 时间：2012-05-29T16:29:46.900
> 
> 标签：actionscript-3, apache-flex, air

我有一个 IP 地址，我想知道它是否可用。谷歌搜索后，我知道一个可能的解决方案是创建一个 ARP 探测消息，然后将其发送到该地址。为了完成该任务，将使用 DatagramSocket。你能告诉我如何创建这样的消息（我不太了解网络），如果可能的话，给我一个小例子。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:19:21.770

我已经使用 JSP 服务来 ping 多个服务器，然后以 XML 格式返回结果，我的 flex 应用程序读取并呈现服务器状态。您可以在没有服务中间层的情况下执行此操作，只需使用 actionscript，但时间会更长一些，因为您必须等待 404 错误消息从每个页面返回。

方法 1：使用 JSP（或大多数其他语言）创建一个服务来轮询您想要的 IP（我轮询 IP 和这些 IP 上的端口）并返回 Flash 读取和呈现的 XML。

方法 2：在 flex 中使用多个 HTTPService 调用，每个调用都查询您的 IP。在你的结果代码中，做一些事情，在你的错误代码中，做一些别的事情。（注意：此方法仅在您尝试访问在服务器根目录中都有 crossdomain.xml 文件的可公开访问的网页时才有效）

# android - Android 和 FragmentManager

> ID：10803129
> 
> 赞同：2
> 
> 时间：2012-05-29T16:29:49.153
> 
> 标签：android, android-fragments

使用我的 Fragment 类中的这段代码：

```
FragmentManager fm = getFragmentManager(); 
```

我得到了空。为什么？我在android doc中找到了那句话：

> 请注意，在 getActivity() 之前，从片段被放入 FragmentTransaction 到它被提交并附加到其活动期间，这将是非空的。

但我完全不明白。怎么做才能不得到那个空值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:51:01.730

您的活动应该是 FragmentActivity 的一个实例，并从这里调用 getFragmentManager()

# visual-studio-2010 - 无法使用 Git Source Control Provider for Visual Studio 提交

> ID：10803130
> 
> 赞同：0
> 
> 时间：2012-05-29T16:29:53.930
> 
> 标签：visual-studio-2010, git, github

我对 GIT 世界很陌生，大多数概念对我来说都是陌生的。我按照此处的说明[http://gitscc.codeplex.com/wikipage?title=Installation&referringTitle=Documentation](http://gitscc.codeplex.com/wikipage?title=Installation&referringTitle=Documentation)并使用 vs 2010 安装了“Git Source Control Provider”。我在文档中看到的 Git Extension 和 TortoiseGit 也已安装。

我遵循其他说明并尝试创建 repo 并执行一些提交。当我在某处读到提交是本地操作时，我什至试图推动。但是这些都没有反映在服务器上，即我的 GitHub 帐户，事实上它甚至无法创建 repo，我不得不在我的 GitHub 帐户上手动完成。我认为以下两件事可能是一个问题。

*   我记得 Git Source Control Provider 安装没有要求我提供 GitHub 凭据，我也没有看到任何可以指定它的地方。我不确定，这可能是个问题吗？如果是，在哪里指定凭证？
*   我尝试使用 HTTP url 推送到我的仓库，但这需要花费大量时间（仅 1.5 MB）。所以我想也许它不会起作用并取消了这个过程。

很可能问题可能不是我上面提到的两点。无论如何，有人可以帮助了解问题吗？真的很感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:34:06.163

我强烈建议从命令行使用 Git，忘记 VisualStudio 集成。自 2008 年以来，我一直以这种方式工作。VisualStudio 集成被高估了。

命令行会给你

*   您之前发出的命令的可搜索历史记录（甚至在会话之间）
*   分支名称、文件名等的选项卡完成
*   可编写性
*   输出管道，以便您可以通过前任的输出组合命令

当您使用 Visual Studio 集成工具或其他 gui 工具时，您将失去 git 提供的所有这些巨大优势。

[MSysGit](http://msysgit.github.com/)非常容易上手。只需确保在安装它时将行结尾设置为在存储文件和检索文件时不会更改（除非您在其他操作系统上与其他人一起工作）。如果你错过了，你可以在之后更改它们

```
git config --global core.autocrlf false 
```

还要告诉 git 你在有自己的行尾的 Windows 上。您不希望它们在某些输出中被突出显示为有问题的：

```
git config --system core.whitespace cr-at-eol 
```

[对于您的凭据问题，请使用此处](http://help.github.com/win-set-up-git/)的说明设置项目。ssh 密钥设置是关键，如果你按照它所说的去做，它应该对你有用。

按照安装 msysgit 的说明进行操作时，请记住将行尾选项更改为底部选项。

如果你有问题，你可以在 gtalk 上 ping 我。（和我的身份证一样）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T15:11:30.023

我发现这篇文章非常有用，[http://codeasp.net/blogs/vivek_iit/microsoft-net/1881/how-to-user-github-with-visual-studio](http://codeasp.net/blogs/vivek_iit/microsoft-net/1881/how-to-user-github-with-visual-studio)。

它清楚地解释了整个过程。除了本地 repo 设置之外，我还遇到了 SSH 密钥的问题。这篇文章帮助我克服所有问题。现在一切都很顺利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T16:41:19.540

如果您是 git 初学者，请按照[GitHub 文档](http://help.github.com/win-set-up-git/)了解第一步。如果您是 git 新手，该插件的文档并不是很有帮助。或者查看[GitHub for Windows](http://windows.github.com/)作为替代方案。

您必须将本地存储库与 GitHub 上的存储库“链接”，方法是将其添加为“远程”并使用`git remote add origin git@github.com:username/repo.git`. 本地 git 应该如何知道你要推送到 GitHub？GitHub 与 git 没有直接关系，它只是 git 存储库的托管者。

**编辑**：您总是必须在 GitHub 上创建一个存储库。常见的工作流程是：

1.  在 GH 创建一个仓库
2.  将其克隆到本地
3.  在本地进行更改
4.  提交并推动他们

在这种情况下，您不必添加“原点”，因为它是在克隆时自动添加的。

# android - 以编程方式在 Android 中启动“添加 Google 帐户”活动

> ID：10803132
> 
> 赞同：6
> 
> 时间：2012-05-29T16:30:04.913
> 
> 标签：android, android-activity, android-account

我正在开发一个应用程序，它需要一个谷歌帐户才能获得某些选项。未检测到帐户时禁用选项，但我通过弹出窗口询问用户添加一个，如果用户单击是，则活动应该开始。显示全局“添加帐户”页面工作正常，但我想跳过那个不需要的额外步骤。毕竟，如果需要 Google 帐户，为什么要向某人提供添加 Exchange 帐户的选项，这只是令人困惑。所以我想默认使用新的 Google 帐户设置页面。

**爪哇**

```
try {
    Intent intent = new Intent();
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
    intent.setClassName( "com.google.android.gsf", "com.google.android.gsf.login.AccountIntroActivity");

    //if(getApplicationContext().getPackageManager().resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY) != null) {
        getApplicationContext().startActivity(intent);
    //} else {
        //getApplicationContext().startActivity(new Intent(Settings.ACTION_ADD_ACCOUNT).addFlags(Intent.FLAG_ACTIVITY_NEW_TASK));
    //}
} catch ( ActivityNotFoundException e) {
    e.printStackTrace();
} 
```

当我运行它时，会引发以下异常：

05-29 18:24:50.741: W/System.err(10875): android.content.ActivityNotFoundException: 找不到明确的活动类 {com.google.android.gsf/com.google.android.gsf.login.AccountIntroActivity }; 您是否在 AndroidManifest.xml 中声明了此活动？

**Androidmanifest.xml**

```
 <activity 
        android:name="com.google.android.gsf.login.AccountIntroActivity"/> 
```

**问题：**我在这里缺少什么？

**编辑：**

我尝试了另一种使用 addAccount 的方法，这不起作用，没有任何反应，没有引发错误，没有新的活动开始添加 Google 帐户。顺便说一句，原始版本中的整个 try catch 块都在 AlertDialog/ 侦听器中。

```
AccountManager acm = AccountManager.get();
acm.addAccount("com.google", null, null, null, null, null, null); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T21:06:01.903

好的，使用 AccountManager 方式的问题是我在方法调用中根本没有使用 Activity 上下文，或者没有正确使用。考虑到它在 DialogInterface 中使用的事实，这是有效的：

```
private void popup() {
     AlertDialog.Builder helpBuilder = new AlertDialog.Builder(this);
     helpBuilder.setTitle("Add Gmail account");
     helpBuilder.setMessage("These options rely on a Gmail account, but you 
     don't seem to have one configured. Would you like to configure one now?");

     helpBuilder.setPositiveButton("Yes",
     new DialogInterface.OnClickListener() {
         //@Override
         public void onClick(DialogInterface dialog, int which) {
             //try/ catch block was here
             AccountManager acm = AccountManager.get(getApplicationContext());
             acm.addAccount("com.google", null, null, null, thisclassname.this, 
             null, null);
            }
     });

     helpBuilder.setNegativeButton("No", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
             // close the dialog, return to activity
         }
     });    

     AlertDialog helpDialog = helpBuilder.create();
     helpDialog.show();
}//end method 
```

这可能需要更多的工作才能真正使用配置的帐户名，但现在，这回答了问题。

可悲的是，这需要许可，但我想事情就是这样

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T02:39:20.937

您实际上是在尝试使用私有 API——添加 Google 帐户活动的类名可能会更改，或者在不同的 Android 版本上可能已经不同。它位于 Google 服务包之一中，您当然不应该将其名称添加到清单中。简而言之，这是一个 hack，不要这样做。对您不起作用`AccountManager.addAcount("com.google",...)`（您需要`MANAGE_ACCOUNTS`许可）？

# python - 加权选择简短而简单

> ID：10803135
> 
> 赞同：53
> 
> 时间：2012-05-29T16:30:09.607
> 
> 标签：python, numpy

如果我在列表中有一组项目。我想根据另一个权重列表从该列表中进行选择。

例如，我的收藏是`['one', 'two', 'three']`，权重是`[0.2, 0.3, 0.5]`，我希望该方法在大约一半的抽奖中给我“三”。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-04-09T16:21:04.033

从[numpy](/questions/tagged/numpy "显示标记为“numpy”的问题") 1.7 版开始，您可以使用[`numpy.random.choice()`](http://docs.scipy.org/doc/numpy-1.7.0/reference/generated/numpy.random.choice.html)：

```
elements = ['one', 'two', 'three'] 
weights = [0.2, 0.3, 0.5]

from numpy.random import choice
print(choice(elements, p=weights)) 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2017-02-03T15:07:17.277

从 Python 3.6 开始，您可以使用[`random.choices`](https://docs.python.org/3/library/random.html#random.choices).

> 随机的。**选择**（*人口，权重=无，*，cum_weights=无，k=1*）

示例用法：

```
import random
random.choices(['one', 'two', 'three'], [0.2, 0.3, 0.5], k=10)
# ['three', 'two', 'three', 'three', 'three',
#  'three', 'three', 'two', 'two', 'one'] 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-29T16:30:10.027

这个函数有两个参数：一个权重列表和一个包含可供选择的对象的列表：

```
from numpy import cumsum
from numpy.random import rand
def weightedChoice(weights, objects):
    """Return a random item from objects, with the weighting defined by weights 
    (which must sum to 1)."""
    cs = cumsum(weights) #An array of the weights, cumulatively summed.
    idx = sum(cs < rand()) #Find the index of the first weight over a random value.
    return objects[idx] 
```

它不使用任何 python 循环。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-29T17:01:19.267

您可以使用[多项分布](http://en.wikipedia.org/wiki/Multinomial_distribution)（来自 numpy）来做您想做的事。例如

```
elements = ['one', 'two', 'three'] 
weights = [0.2, 0.3, 0.5]

import numpy as np

indices = np.random.multinomial( 100, weights, 1)
#=> array([[20, 32, 48]]), YMMV

results = [] #A list of the original items, repeated the correct number of times.
for i, count in enumerate(indices[0]):
    results.extend( [elements[i]]*count ) 
```

因此，第一个位置的元素出现了 20 次，第二个位置的元素出现了 32 次，第三个位置的元素出现了 48 次，这与你对权重的预期大致相同。

如果你很难理解多项分布，我发现[文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.random.multinomial.html)真的很有帮助。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-29T17:01:02.370

如果您不想使用`numpy`，您可以使用相同的方法，如下所示：

```
from random import random
from itertools import takewhile

def accumulate(iterator):
    """Returns a cumulative sum of the elements.
    accumulate([1, 2, 3, 4, 5]) --> 1 3 6 10 15"""
    current = 0
    for value in iterator:
        current += value
        yield current

def weightedChoice(weights, objects):
    """Return a random item from objects, with the weighting defined by weights 
    (which must sum to 1)."""
    limit = random()
    return objects[sum(takewhile(bool, (value < limit for value in accumulate(weights))))] 
```

一旦我们`itertools.takewhile()`到达我们想要停止的点，我们就会避免检查值，否则，这与[Mischa Obrecht的答案](https://stackoverflow.com/a/10803136/722121)基本相同，只是没有`numpy`。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-11T05:15:23.307

如何初始化您的列表以使您的选择与预期的权重相匹配。在这里，我列出了 100 个值，代表您想要的“拉动”百分比。

```
>>> import random
>>> elements = ['one', 'two', 'three'] 
>>> weights = [0.2, 0.3, 0.5]
>>>
>>> # get "sum" of result list of lists (flattens list)
>>> choices = sum([[element] * int(weight * 100)for element, weight in zip(elements, weights)], [])
>>> random.choice(choices)
three 
```

它不是累积的，但看起来它可能是您正在寻找的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-29T17:14:41.143

为了建立[Maus 的答案](https://stackoverflow.com/a/10803561/722121)，如果您想重复获得加权随机值，这非常好，如果您只想要一个值，您可以通过组合[`numpy.random.multinomial()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.random.multinomial.html)和非常简单地做到这一点[`itertools.compress()`](http://docs.python.org/release/3.1.5/library/itertools.html#itertools.compress)：

```
from itertools import compress
from numpy.random import multinomial

def weightedChoice(weights, objects):
    """Return a random item from objects, with the weighting defined by weights 
    (which must sum to 1)."""
    return next(compress(objects, multinomial(1, weights, 1)[0])) 
```

# matlab - 如何在 Matlab 中可视化 R^3 -> R 函数？

> ID：10803137
> 
> 赞同：7
> 
> 时间：2012-05-29T16:30:16.143
> 
> 标签：matlab, data-visualization

我有一个函数可以为空间中的每个点分配一个真实的值。如何在某个有界体积上可视化它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T18:12:48.903

在评论中扩展彼得的建议^^：

使用[scatter3](http://www.mathworks.nl/help/techdoc/ref/scatter3.html) *设置*`cdata`参数：

```
% generating some sample data
[x,y,z]=sphere(50);
x=x(:);y=y(:);z=z(:);

% the interesting stuff:
h=scatter3(x,y,z); 
```

给你

![分散3](../Images/2792e4f21188848504ec52cc9ef85510.png)

要添加颜色，请执行以下操作：

```
set(h,'cdata',z) 
```

或立即：

```
scatter3(x,y,z,'cdata',z); 
```

这导致

![在此处输入图像描述](../Images/e830e2f78b3ca1f43e3bb476637ba0e3.png)

这里的颜色向量只是 z 值，但它可以是任何东西（只要它与 x（以及 y 和 z）大小相同。

# mysql - 如何只从 mysql 获取不常见的记录

> ID：10803138
> 
> 赞同：-1
> 
> 时间：2012-05-29T16:30:25.023
> 
> 标签：mysql

现在我正在使用这个查询，但它向我显示了重复和不重复的列，我只想获得不重复的列，

```
<?

$queryy=mysql_query("SELECT   
 mybb_posts.pid, mybb_posts.subject,mybb_posts.message,mybb_posts.tid,
mybb_attachments.pid,mybb_attachments.aid
FROM mybb_posts
INNER JOIN mybb_attachments
USING(pid,pid)
ORDER  BY  `aid` DESC
LIMIT 7")or die($query."<br/><br/>".mysql_error());

while ($lista=mysql_fetch_array($queryy))
{
echo '

            <img src="attachment.php?aid='.$lista["aid"].'   " alt="" />
                <h4><a href="#" >'.$lista["subject"].'</a></h4>

            ';

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:35:45.733

尝试在您的选择中使用 DISTINCT。

```
SELECT DISTINCT
posts.pid, 
posts.subject,
posts.message,
posts.tid, 
attach.pid,
attach.aid 
FROM mybb_posts post
INNER JOIN mybb_attachments attach
ON mybb_posts.pid = mybb_attachments.pid
ORDER  BY  `aid` DESC LIMIT 7 
```

此 DISTINCT 查询应仅返回 PID 在两列中匹配的唯一结果。如果有多个实体与该 PID 相关，它将插入另一行。

只有在对实体使用聚合函数时才能使用 group by。例如： SELECT 中的 SUM(attach.aid) 将允许您按 PID 分组

如果您要为一条记录返回一堆不同的整数，并且不想要重复的行，您可以使用 group by 将结果汇总到一行中......

这是描述我的散文的参考。

[http://blog.sqlauthority.com/2007/03/29/sql-server-difference-between-distinct-and-group-by-distinct-vs-group-by/](http://blog.sqlauthority.com/2007/03/29/sql-server-difference-between-distinct-and-group-by-distinct-vs-group-by/)

# java - 映射多对一外键 Java EE

> ID：10803142
> 
> 赞同：0
> 
> 时间：2012-05-29T16:31:03.743
> 
> 标签：java, ejb, many-to-one

这是家庭作业，我不明白，因此感谢您的帮助。该系统是一个奥运奖牌统计模拟器。

我们有一个事件表和一个国家表：

```
statement.execute("create table EVENTS (EVENTNUMBER integer primary key not null, EVENTNAME varchar(32), " +
               " GENDER varchar(5), GOLD integer, SILVER integer, BRONZE integer)");

statement.execute("create table COUNTRIES (COUNTRYID integer primary key not null, NAME varchar(32)," +
                       "TOTALGOLD integer, TOTALSILVER integer, TOTALBRONZE integer)"); 
```

这些与实体有关：

```
@Entity
@Table(name = "COUNTRIES")
public class Country implements Serializable
{

   @Id
   private int countryID; // This is the primary key
   private String name;
   private int totalGold;
   private int totalSilver;
   private int totalBronze;
//getters, setters omitted

@Entity
@Table(name = "EVENTS")
public class Event implements Serializable
{

    @Id
    private int eventNumber;     // This is the primary key
    private String eventName;
    private String gender;       // Men, Women or Mixed
    @ManyToOne(optional=false)
    @JoinColumn(name="COUNTRYID", nullable=false, updatable=false)
    private Country gold, silver, bronze;

//getter, setter methods omitted 
```

问题是向 Event 添加三个 Country 实例变量来代表金、银和铜牌的获胜者，并包括关系类型。对我来说，多对一是有意义的。但是，当我尝试运行它时，我收到一个关于 join 错误的错误，因为它应该只允许一次写入，其余的为只读。

因此，我将 JoinColumn 更改为 insertable=false 并出现错误：列 'COUNTRYID' 不在 FROM 列表中的任何表中，或者出现在连接规范中，并且超出连接规范的范围，或者出现在 HAVING 子句中并且不在 GROUP BY 列表中。

在我的 QueriesBean 中使用此方法：

```
 public List<Event> getEvents()
   {
      List<Event> eventList = null;

      Query query = em.createQuery("SELECT e FROM Event e");
      eventList = (List<Event>) query.getResultList();

      return eventList;
   } 
```

也许有人可以给我一些指导？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:03:51.027

```
@JoinColumn(name="COUNTRYID", nullable=false, updatable=false)
private Country gold; 
```

上面一行的意思是：这个实体（Event）和Country实体之间有一个关联，这个关联是由表EVENTS中的“COUNTRID”列具体化的。

已经有一个问题：您在 EVENTS 表中没有任何 COUNTRYID 列。

```
@JoinColumn(name="COUNTRYID", nullable=false, updatable=false)
private Country gold, silver, bronze; 
```

上面一行的意思是：这个实体（Event）和Country实体之间存在三种不同的关联，所有这些关联都由同一列COUNTRYID具体化。这当然是不可能的。如果您有三个关联，则需要三个不同的列。

一个好的规则，不管你有没有注释，每行总是有一个声明。在三个单独的行中声明您的三个关联，并用正确的注释对它们中的每一个进行注释。他们每个人都是ManyToOne。他们每个人都有自己的专栏来实现关联。当然，该列必须存在于表中。

# php - 画布到图像，然后上传到服务器

> ID：10803147
> 
> 赞同：0
> 
> 时间：2012-05-29T16:31:40.620
> 
> 标签：php, jquery, html, canvas, upload

我试图保存画布 div，然后将其上传到服务器，但我无法让它工作。所以，这就是我所做的：

1.  我创建了一个画布 div，我将在其中使用 paperjs 进行绘制
2.  我保存那个画布 div（dataToURL 方法）
3.  我尝试上传它，但我不工作。

这是网络： [www.davidpenuela.com](http://www.davidpenuela.com)

我测试了使用 jquery 文件上传器（[测试 jquery 上传](http://davidpenuela.com/test/)器）将图像上传到我的服务器并且该脚本有效，但我可以在从我的画布保存时使其工作。

[canvas2image](http://www.nihilogic.dk/labs/canvas2image/)不适合我，它不上传任何东西。

编辑：设法让它工作，我会尽快发布它的方式。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:35:25.577

你不能让它工作，因为它不是文件上传。文件上传使用具有 `multipart/form-data`内容类型的编码表单数据。您的客户端代码正在发布未进行格式编码且具有`canvas/upload`内容类型的数据。您需要更新您的服务器代码以使其了解“画布/上传”内容类型，或者找到一种在上传之前对图像进行编码的方法。

# c - 如何使用 typedef 定义结构

> ID：10803152
> 
> 赞同：0
> 
> 时间：2012-05-29T16:31:52.200
> 
> 标签：c, typedef

我正在尝试执行以下操作：

```
typedef struct tagSTRUCT
{
    MYPROC lpfnMyProc;
} STRUCT, *HSTRUCT;

typedef void (*MYPROC)(HSTRUCT);

void version1(HSTRUCT ); // version of delegate MYPROC
void version2(HSTRUCT ); // another version
... 
```

，这给了我一个编译错误。我试图在结构 typedef 之前制作 'MYPROC' 的 typedef，但也出现了编译错误。我尝试使用 struct 的前向声明，但也遇到了编译错误：

```
struct tagSTRUCT;
typedef tagSTRUCT STRUCT, *HSTRUCT;
typedef void (*MYPROC)(HSTRUCT );
struct tagSTRUCT
{
   MYPROC lpfnMyProc;
}; 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T16:37:16.130

尝试这个：

```
struct tagSTRUCT;

typedef void (*MYPROC)(struct tagSTRUCT *);

typedef struct tagSTRUCT {
    MYPROC p;
} STRUCT, * HSTRUCT; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T16:39:44.470

试试这个：

```
typedef struct tagSTRUCT *HSTRUCT;
typedef void (*MYPROC)(HSTRUCT);

typedef struct tagSTRUCT
{
    MYPROC lpfnMyProc;
} STRUCT; 
```

这样您仍然可以将其称为`HSTRUCT`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T16:36:23.173

这是一种奇怪的周期性依赖，但以下方法可能有效：

```
struct tagSTRUCT;
typedef struct tagSTRUCT *HSTRUCT;
typedef void (*MYPROC)(HSTRUCT*);

typedef struct tagSTRUCT
{
    MYPROC lpfnMyProc;
} STRUCT, *HSTRUCT;

void version1(HSTRUCT ); // version of delegate MYPROC
void version2(HSTRUCT ); // another version 
```

# database - Google App Engine：将数据库内容保留在用户帐户中

> ID：10803157
> 
> 赞同：0
> 
> 时间：2012-05-29T16:32:06.173
> 
> 标签：database, google-app-engine, persistence, google-cloud-datastore

作为 Google App Engine 的新手，我有一个与此相关的问题：

[将数据存储在用户的 Google 帐户中](https://stackoverflow.com/questions/5708044/)

这是我真正想做的事情：

*   完全使用 Google App Engine 和 BigTable 创建应用程序以实现持久性
*   但我不想使用自己的 App Engine 帐户。相反，我想使用用户的帐户。例如，Android 应用程序应该使用用户帐户来保存其数据，而不是应用程序程序员的帐户。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:53:14.117

您的目标是使用用户的存储配额而不是应用程序的配额吗？

您无法使用 App Engine 的数据存储区（如果这就是您所说的“用于持久性的 BigTable”）来执行此操作，除非您做了一些非常奇怪的事情，例如让每个用户创建自己的 App Engine 应用程序并通过 REST 与其通信。

但是，您可以考虑使用[Drive SDK](https://developers.google.com/drive/get_started)来存储和检索数据。请注意，使用 Drive SDK 的应用程序必须通过 Chrome 应用商店安装。这是[使用 App Engine 的示例](https://developers.google.com/drive/examples/python)。

# r - 带有最小值和最大值标签的漂亮轴

> ID：10803160
> 
> 赞同：2
> 
> 时间：2012-05-29T16:32:16.657
> 
> 标签：r, axis-labels

我想画一个简单的条形图，如下所示：

```
test <- data.frame(y=c(1,3,53,10,30,35,50), x=c(1:7))
barplot(test$y, names.arg=test$x) 
```

![结果图](../Images/cfc2dda055a536c473e73702893dfba0.png)

我的问题是，如果最大值是某个“不漂亮”的数字，则 y 轴延伸得不够远。更好的是，如果轴扩展通过最大值并以大于最大值的某个“漂亮”值结束。

给定一个随机数据集（即这是一个函数），有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T16:42:47.123

您可以使用`pretty()`和的组合`range()`来自动选择更好的设置`ylim`：

```
test <- data.frame(y=c(1,3,53,10,30,35,50), x=c(1:7))
barplot(test$y, names.arg=test$x, 
        ylim = range(pretty(c(0, test$y)))) 
```

![在此处输入图像描述](../Images/8f4802cd0a0345ded98534fab62450df.png)

（感谢 Gavin Simpson 指出该`range(pretty(c(0, test$y)))`方法同样有效`range(pretty(c(0, max(test$y)))`）

# c# - 后面的代码在其 aspx 页面上无法识别我的控制变量

> ID：10803170
> 
> 赞同：1
> 
> 时间：2012-05-29T16:33:05.827
> 
> 标签：c#, asp.net

我有具有以下简单代码的 apsx 页面：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Team.master" AutoEventWireup="True" Inherits="Lib.team" Codebehind="team.aspx.cs" %>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" Runat="Server">

    <asp:GridView ID="GridView1" runat="server">
    </asp:GridView>

</asp:Content> 
```

我的背后代码如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Data;

namespace Lib
{
  public partial class team : System.Web.UI.Page
  {
    protected void Page_Load(object sender, EventArgs e)
    {
        SqlDataReader reader = DBData.ExecuteQuery("SELECT * FROM tblTeam");
        GridView1\. //This is where the error is
    }
  }
} 
```

我的问题是我似乎无法让后面的代码识别控制变量 GridView1。我在 VS2010 中使用 Web 应用程序，下面是我的项目树：

![在此处输入图像描述](../Images/a64e8e22173826e5aeb16590047a292e.png)

我认为这是我错过的非常简单的事情。我试图重新检查我的命名空间，我的继承子句，重新编译项目。任何帮助或指导将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:17:58.220

我尝试了每个人建议的所有步骤，但没有运气......我不太清楚为什么。但是，正如我写的一条评论中提到的那样，我有一个解决方法。基本上我只是将我的项目转换为网站项目而不是 Web 应用程序。

谢谢大家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T16:48:25.750

are you initiating a connection to the SQL instance? Your gridview will not populate unless you are directly connected to the database.

SQL conn = new SQL connection (connection string)

You can test this by calling the query or changing the query to alter a row in the database. If the database changes then you are already connected.

Might want to try initializing a new GridView instance also...

Here's a reference...

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.gridview.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.gridview.aspx)

So here is the work from school.

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.SqlClient;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        DataSet ds = new DataSet();
        DataTable dt = new DataTable();
        dt.Columns.Add("Project_ID", Type.GetType("System.Int32"));
        dt.Columns.Add("ProjectName", Type.GetType("System.String"));

        DataSet dsProd = new DataSet();
        DataTable dtProd = new DataTable();
        dtProd.Columns.Add("Product_ID", Type.GetType("System.Int32"));
        dtProd.Columns.Add("Product_Name", Type.GetType("System.String"));

        SqlConnection conn = new SqlConnection();
        conn.ConnectionString = @"Data Source=YAZEED-PC\YAZEED;Initial Catalog=ITS364_Project;Integrated Security=True";

        String strSQL = "Select Project_ID,ProjectName from project";
        SqlCommand command = new SqlCommand();
        SqlDataReader dr;
        try
        {
            conn.Open();
            command.Connection = conn;
            command.CommandText = strSQL;
            dr = command.ExecuteReader();
            while (dr.Read())
            {
                DataRow drr = dt.NewRow();
                drr[0] = dr[0];
                drr[1] = dr[1];
                dt.Rows.Add(drr);

            }
            ds.Tables.Add(dt);
            ddProj.DataValueField = "ProjectName";
            ddProj.DataTextField = "Project_ID";
            ddProj.DataSource = ds.Tables[0].DefaultView;
            ddProj.DataBind();
            txtProjName.Text = Convert.ToString(ddProj.SelectedItem.Value);
        }

        finally
        {
            conn.Close();
        }

        string strr = "Select Product_ID, Product_Name from Products";
        try
        {
            conn.Open();
            command.Connection = conn;
            command.CommandText = strr;
            dr = command.ExecuteReader();
            while (dr.Read())
            {
                DataRow drr = dtProd.NewRow();

                drr[0] = dr[0];
                drr[1] = dr[1];

                dtProd.Rows.Add(drr);

            }
            dsProd.Tables.Add(dtProd);
            ddProd.DataValueField = "Product_ID";
            ddProd.DataTextField = "Product_Name";
            ddProd.DataSource = dsProd.Tables[0].DefaultView;
            ddProd.DataBind();

            if (ddProd.SelectedIndex != -1)
            {
                txtProdQuantity.Text = getQuan(Convert.ToInt32(ddProd.SelectedValue));
                fillQtyCombo();
            }
        }
        finally
        {
            conn.Close();
        }

    }

}
protected string getQuan(int val)
{
    string str;
    SqlConnection conn = new SqlConnection();
    conn.ConnectionString = @"Data Source=YAZEED-PC\YAZEED;Initial Catalog=ITS364_Project;Integrated Security=True";
    conn.Open();
    String strSQL = "Select Product_Qty from Products where Product_ID = " + val + "";
    SqlCommand command = new SqlCommand();
    command.Connection = conn;
    command.CommandText = strSQL;
    str = Convert.ToString(command.ExecuteScalar());
    return str;
}
protected void btnAssignProducts_Click(object sender, EventArgs e)
{
    if (txtTaskName.Text == string.Empty)
    {
        msg.Text = "";

        this.error.Text = "Please enter Task Name";

    }
    else if (ddProj.SelectedIndex == -1)
    {
        msg.Text = "";
        this.error.Text = "Please Select Project";
    }
    else if (ddProd.SelectedIndex == -1)
    {
        msg.Text = "";
        this.error.Text = "Please select Product";
    }
    else if (Convert.ToInt32(ddProdQuantity.SelectedValue) == 0)
    {
        msg.Text = "";
        this.error.Text = "Please select Product Quantity ";
    }
    else
    {
        int rtn = 0;
        SqlConnection conn = new SqlConnection();
        conn.ConnectionString = @"Data Source=YAZEED-PC\YAZEED;Initial Catalog=ITS364_Project;Integrated Security=True";
        conn.Open();
        //String strSQL = "INSERT INTO Product_task (Project_ID,Product_ID,Product_Task_desc,Product_Task_Qty) values ("+ddProj.SelectedValue+","+ddProd.SelectedValue+",'"+txtTaskName.Text+"',"+ddProdQuantity.SelectedValue+")";
        String strSQL = "INSERT INTO Product_task (Project_ID,Product_ID,Product_Task_desc) values (" + Convert.ToInt32(ddProj.SelectedItem.Text) + "," + ddProd.SelectedValue + ",'" + txtTaskName.Text + "')";
        SqlCommand command = new SqlCommand();
        command.Connection = conn;
        command.CommandText = strSQL;
        rtn = Convert.ToInt32(command.ExecuteNonQuery());
        if (rtn > 0)
        {
            error.Text = "";
            msg.Text = "Record Saved Successfully";
        }
        else
        {
            msg.Text = "";
            error.Text = "Record Not saved Successfully, Kindly Try again.";
        }

    }

}
protected void ddProj_SelectedIndexChanged(object sender, EventArgs e)
{
    txtProjName.Text = Convert.ToString(ddProj.SelectedItem.Value);
}
protected void ddProd_SelectedIndexChanged(object sender, EventArgs e)
{
    if (ddProd.SelectedIndex != -1)
    {
        txtProdQuantity.Text = getQuan(Convert.ToInt32(ddProd.SelectedValue));
        fillQtyCombo();
    }
}
protected void fillQtyCombo()
{
    if (ddProd.SelectedIndex != -1)
    {
        int val = Convert.ToInt32(getQuan(Convert.ToInt32(ddProd.SelectedValue)));
        DataSet dsQty = new DataSet();
        DataTable dtQty = new DataTable();
        dtQty.Columns.Add("ID", Type.GetType("System.Int32"));
        dtQty.Columns.Add("VAL", Type.GetType("System.String"));

        for (int i = 1; val >= i; i++)
        {

            DataRow drr = dtQty.NewRow();

            drr[0] = i;
            drr[1] = i;

            dtQty.Rows.Add(drr);
        }
        dsQty.Tables.Add(dtQty);
        ddProdQuantity.DataValueField = "ID";
        ddProdQuantity.DataTextField = "VAL";
        ddProdQuantity.DataSource = dsQty.Tables[0].DefaultView;
        ddProdQuantity.DataBind();

    }
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T16:45:14.207

First thing to check: Are you seeing the control as a property in the relevant `ascx.designer.cs` class? If not then, delete the designer class and save the ASCX, this should cause it to be regenerated.

If this fails, i usually find it's visual studio or resharper playing up and a restart of VS usually solves the issue.

Hope that helps

# rest - 如何在 Backbone.js 中使用 Haskell Snap

> ID：10803171
> 
> 赞同：3
> 
> 时间：2012-05-29T16:33:14.550
> 
> 标签：rest, haskell, backbone.js, haskell-snap-framework

大多数 Haskell Web 应用程序框架似乎都专注于在服务器上做很多工作（模板、表单等）。然而，其他大多数人似乎都在客户端上移动越来越多的应用程序，并通过狭窄的 REST API 与服务器通信。

我正在寻找构建一个主要在客户端上运行的网络应用程序。我想将客户端基于[Backbone.js](http://backbonejs.org/)（或类似的），并使用 JavaScript 模板库完全在客户端上进行 HTML 模板。

我想在 Haskell 中实现服务器端，最好使用 Snap 框架。

有没有人尝试过以这种方式使用 Snap 框架？如何在 Snap 中使用 GET、POST、PUT、DELETE 方法实现基本的 REST API？或者我应该为我的服务器选择比 Snap 更简单的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T17:02:06.443

我有一个基于 Snap 的网站，它使用了相当多的客户端代码。它可能没有你想象的那么广泛，但它确实证明了这一点。我建议将 javascript 作为静态文件提供服务。[您可以使用 Snap 的方法](http://hackage.haskell.org/packages/archive/snap-core/0.8.1/doc/html/Snap-Core.html#v%3amethod)函数过滤 HTTP 方法。这是您如何使用它的一个想法：

```
fooHandler = method GET getter <|>
             method POST poster <|>
             method DELETE deleter
  where
    getter = ...
    poster = ...
    deleter = ... 
```

然后，您可以简单地通过为其添加路由来使用它：

```
addRoutes [ ("foo", fooHandler), ... ] 
```

# c# - 如何更改没有 ID 的类 css 的属性？

> ID：10803172
> 
> 赞同：1
> 
> 时间：2012-05-29T16:33:15.250
> 
> 标签：c#, asp.net, .net, css

*我正在使用可以更改的属性制作用户控件*

我有一个 HTML (.aspx)：

```
<div>
    <ul>
        <li id="li_id" runat="server" class="myStyle" visible="false"></li>
    </ul>
</div> 
```

（我的第一个 li 是错误的，另一个将被动态添加并希望确保至少有一个引用 css 类）

我的代码隐藏：

```
for (int i = 0; i < fotos.Count(); i++)
{
    if (File.Exists(Server.MapPath((fotos[i]))))
    {
        content_slider_inside.InnerHtml += @"<li id='img" + i.ToString() + "'><IMG SRC='" + fotos[i] + "' HEIGHT='490PX' /></li>";
        navigation.InnerHtml += "<li class='myStyle' runat='server'><a href='#img" + (i+1).ToString() + "'>" + (i+1).ToString() + "</a></li>";
    }
} 
```

我的 CSS (.css)

```
.myStyle
{
    /*empty*/
} 
```

**如何在不使用 ID 代码的情况下添加我的样式属性？**（因为它是生成 dinicamente）例如：

```
myStyle["background-color"]="red"; 
```

对于所有生成的动态更改 li css 属性

我对用 javascript 或 jquery 解决它不感兴趣

太感谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:42:47.077

使用“类”属性和 CSS 是设计元素样式的好方法。目前尚不清楚你试图“动态”做什么，但也许只是改变你的 CSS 就足够了（如果唯一的原因是提到 CSS 的类，你并不真的需要不可见的元素）：

```
.myStyle
{
    background-color:"red";
} 
```

如果你想单独设置它们的样式，你可以直接在 HTML 中内联：

```
navigation.InnerHtml += "<li style='background-color:red;' ... 
```

注意：如果您构建控件树而不是使用 InnerHtml 属性会更容易。至少不要指定`runat='server'`，因为在使用 InnerHtml 属性时它没有值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:02:27.100

我的问题的两个答案：

正如用户 Alexei Levenkov 所提到的，生成通用 HTML 控件 HtmlGenericControl

```
for (int i = 0; i < fotos.Count(); i++)
{
    if (File.Exists(Server.MapPath((fotos[i]))))
    {
        content_slider_inside.InnerHtml += @"<li id='img" + (i + 1).ToString() + "'><IMG SRC='" + fotos[i] + "' HEIGHT='490PX' /></li>";
        //navigation.InnerHtml += "<li id='item" + (i+1).ToString() + "' runat='server' class='menu_item'><a href='#img" + (i+1).ToString() + "'>" + (i+1).ToString() + "</a></li>";

        HtmlGenericControl a = new HtmlGenericControl("a");
        a.Attributes["href"] = "#img" + (i+1).ToString();
        a.InnerHtml = (i + 1).ToString();

        HtmlGenericControl c = new HtmlGenericControl("li");
        c.ID = "item" + (i+1).ToString();
        c.Attributes["runat"] = "server";
        c.Attributes["class"] = "menu_item";
        c.Controls.Add(a);

        navigation.Controls.Add(c);

        id_imgs.Add("img" + (i+1).ToString());
        id_items.Add("item" + (i+1).ToString());
    }
} 
```

然后我可以通过他的属性手动访问他们的样式

```
foreach(string i in id_items)
{
    HtmlGenericControl liItem = (HtmlGenericControl)navigation.FindControl(i);
    if (liItem != null)
    {
        if (menu_Item_Fondo != null)
            liItem.Style["background-color"] = menu_Item_Fondo;
        if (menu_Item_Hover_Fondo != null)
        {
            StringBuilder style = new StringBuilder();
            style.AppendLine(".navigation li a:hover { ");
            style.AppendLine(String.Format(" color: {0};", menu_Item_Hover_TextColor));
            style.AppendLine(String.Format(" background-color: {0};", menu_Item_Hover_Fondo));
            style.AppendLine("} ");
            style_menu_item.InnerText = style.ToString();
        }
    }
} 
```

要动态使用悬停添加一种标签样式

```
<div>
    <style id="style_menu_item" runat="server" class="class_style"></style>
    <ul>
        <li id="li_id" runat="server" class="myStyle" visible="false"></li>
    </ul>
</div> 
```

我很高兴！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T16:36:15.503

您可以使用各种各样的 CSS 选择器来做到这一点[http://www.w3.org/TR/CSS2/selector.html](http://www.w3.org/TR/CSS2/selector.html)

# ios - 处理大量注释

> ID：10803173
> 
> 赞同：1
> 
> 时间：2012-05-29T16:33:18.017
> 
> 标签：ios, mkmapview

我有大约**2000**个注释，在地图上显示所有注释太慢了。如何限制地图上的注释视图？`annotationsInMapRect`可能有用吗？如果您需要更多信息，请告诉我！

MKAnnotationView

```
- (MKAnnotationView *)mapView:(MKMapView *)aMapView viewForAnnotation:(id <MKAnnotation>)annotation
{

    if (![annotation isKindOfClass:[MyAnnotation class]])
    {

        return nil;
    }

    static NSString* AnnotationIdentifier = @"AnnotationIdentifier";

    MKAnnotationView *pinView = [aMapView dequeueReusableAnnotationViewWithIdentifier:AnnotationIdentifier];

    if (pinView == nil)
    {
        pinView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier];
        pinView.canShowCallout = YES;
    }
    else
        pinView.annotation = annotation;

    MyAnnotation *myAnn = (MyAnnotation *)annotation;
    pinView.image = [UIImage imageNamed:myAnn.icon];

    return pinView;

}

- (void)mapView:(MKMapView *)mv didAddAnnotationViews:(NSArray *)views 
{
    for(MKAnnotationView *annotationView in views) 
    {
        if(annotationView.annotation == mv.userLocation) 
        {
            MKCoordinateRegion region;
            MKCoordinateSpan span;

            span.latitudeDelta=0.005;
            span.longitudeDelta=0.005; 

            CLLocationCoordinate2D location=mv.userLocation.coordinate;

            region.span=span;
            region.center=location;

            [mv setRegion:region animated:YES];
            [mv regionThatFits:region];

            id annotation = annotationView.annotation;
            [self performSelector:@selector(selectUserLocation:) withObject:annotation afterDelay:0.5f]; 
        }
    }
} 
```

# c# - 服务器端显示字符串宽度

> ID：10803174
> 
> 赞同：0
> 
> 时间：2012-05-29T16:33:21.723
> 
> 标签：c#

如何根据字体系列（arial）和像素大小（12px）计算字符串的显示宽度大小？（如有必要，假设缩放级别为 100%）

我似乎有一些关于它的帖子，但我仍然无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:45:47.700

尝试使用 TextRenderer 类 - 请参阅此处的 MSDN 文档：http: [//msdn.microsoft.com/en-us/library/69ye7hc8.aspx](http://msdn.microsoft.com/en-us/library/69ye7hc8.aspx)

这是一个测量字符串“This is some text”的控制台应用程序示例：

```
using System;
using System.Windows.Forms;
using System.Drawing;

namespace TextMeasureExample
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine(TextRenderer.MeasureText("This is some text", new Font("Arial", 0.75f)));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T16:47:03.410

准确地做到这一点可能很困难。但这应该为您指明正确的方向：[如何使用 System.Drawing.Graphics.MeasureString？](http://forums.asp.net/t/1439998.aspx/1)

# javascript - three.js / webGL / GLSL - 利用随机数学

> ID：10803176
> 
> 赞同：3
> 
> 时间：2012-05-29T16:33:30.043
> 
> 标签：javascript, glsl, webgl, three.js

我正在使用three.js 来调用片段着色器——该着色器为我的材质指定一种颜色，分解为rgb——我想看看我是否可以将这些颜色乘以一个随机值。这是我目前使用的代码：

```
gl_FragColor = vec4( color.r*.5, color.g, color.b, smoothstep( 8000.0, -8000.0, gl_FragCoord.z / gl_FragCoord.w ) ); //MH - creates colors by multiplying color values 
```

如果它是 javascript，这就是我想要做的，但显然这在 GLSL 着色器脚本中不起作用：

```
gl_FragColor = vec4( color.r*Math.random(), color.g, color.b, smoothstep( 8000.0, -8000.0, gl_FragCoord.z / gl_FragCoord.w ) ); //MH - creates colors by multiplying color values 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T17:23:57.253

对于着色器中的伪随机值，我强烈推荐 Ashima[的 WebGL 噪声库](https://github.com/ashima/webgl-noise/wiki)。它接受 ax/y/z 值并吐出单纯形噪声。这意味着它从帧到帧都是稳定的。如果您需要改变的随机值，则将时间调制值传递给噪声函数。

# objective-c - 当我修改我的文件时发送 kevent NOTE_DELETE

> ID：10803181
> 
> 赞同：4
> 
> 时间：2012-05-29T16:33:43.367
> 
> 标签：objective-c, macos, kqueue

我尝试在文件上使用 kqeue 和 kevent，当我的文件被修改时，我将更新我的软件。当我的文件被删除时，我会删除我软件中的链接。

所以我初始化 kqueue

```
void myfct(char * path)
{ 
int kq;
int event_fd;
struct kevent events_to_monitor[NUM_EVENT_FDS];
struct kevent event_data[NUM_EVENT_SLOTS];
void *user_data;
struct timespec timeout;
unsigned int vnode_events;

kq = kqueue();

event_fd = open(path, O_EVTONLY);
user_data = path;
timeout.tv_sec = 0;        
timeout.tv_nsec = 500000000;    

vnode_events = NOTE_DELETE |  NOTE_WRITE | NOTE_EXTEND | NOTE_ATTRIB | NOTE_LINK | NOTE_RENAME | NOTE_REVOKE;
EV_SET( &events_to_monitor[0], event_fd, EVFILT_VNODE, EV_ADD | EV_CLEAR, vnode_events, 0, user_data);

    while (42) 
    {
        int event_count = kevent(kq, events_to_monitor, NUM_EVENT_SLOTS, event_data, num_files, &timeout);

        if (event_count) 
        {
            // Display the right event in event_data[0].fflags
        }
        else 
        {
            NSLog(@"No event.\n");
        }
    }
} 
```

然后当我调用 kevent 并修改我的文件时

我得到了 NOTE_ATTRIB 事件，然后是 NOTE_DELETE ...为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-02T10:50:25.100

As explained by arri in a comment:

Many applications and frameworks don't actually overwrite your file when saving. Instead, they create a new temporary file, write to that, copy the attributes from the old file to the temporary file (which triggers a `NOTE_ATTRIB`), then rename the temporary file over your old file (which triggers a `NOTE_DELETE`).

This is called an "atomic save". The advantage is that it's atomic: either the whole save works, or nothing is changed; even if someone unplugs the hard drive unexpectedly at the worst possible time, there is no chance that you end up with a garbled or incomplete file. And, while losing all your changes since the last save might be bad, losing the last 90% of your file is usually even worse.

# iphone - 带有分隔线图像的 UISegementedControl 包含空间

> ID：10803182
> 
> 赞同：5
> 
> 时间：2012-05-29T16:33:43.800
> 
> 标签：iphone, ios, uisegmentedcontrol

我正在使用背景和分隔线图像来自定义`UISegmentedControl`. 但是，分隔图像和段控件的背景图像之间会出现一个空格。

这是显示空格的屏幕截图

![在此处输入图像描述](../Images/84e0440d164062f6a3932d6dafdfe4f7.png)

这是我用来设置分段图像的代码

```
UIImage *selectedImage = [[UIImage imageNamed:@"segcontrol_selectround.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 10, 0, 10)];
UIImage *unselectedImage = [[UIImage imageNamed:@"segcontrol_unselectround.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 10, 0, 10)];
UIImage *leftSelected = [UIImage imageNamed:@"segcontrol_leftselected.png"];
UIImage *rightSelected = [UIImage imageNamed:@"segcontrol_rightselected.png"];
UIImage *neitherSelected = [UIImage imageNamed:@"segcontrol_bothunselected.png"];

[segment setBackgroundImage:unselectedImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[segment setBackgroundImage:selectedImage forState:UIControlStateSelected barMetrics:UIBarMetricsDefault];
[segment setDividerImage:leftSelected forLeftSegmentState:UIControlStateSelected rightSegmentState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[segment setDividerImage:rightSelected forLeftSegmentState:UIControlStateNormal rightSegmentState:UIControlStateSelected barMetrics:UIBarMetricsDefault];
[segment setDividerImage:neitherSelected forLeftSegmentState:UIControlStateNormal rightSegmentState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

我检查了所有的分隔线图像，它们都是相同的宽度并且不包含任何透明像素。

如何从分段控件中删除这些空格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T18:22:01.487

确保用于分隔线（ 、 和 ）的图像`leftSelected`宽度`rightselected`相同`neitherselected`。通常是因为`neitherselected`中间的线比其他线宽 1pt。他们都需要是一样的！

# c# - 带有下拉菜单的 Windows.Forms 按钮

> ID：10803184
> 
> 赞同：45
> 
> 时间：2012-05-29T16:33:48.247
> 
> 标签：c#, winforms, drop-down-menu

我正在.NET 上使用 Windows.Forms 开发简单的 C# 应用程序。我需要一些按钮来显示带有子类别的下拉菜单 - 很像 ToolStripMenu，但是按钮，你知道的。我搜索了它，但找不到任何变体。

我的问题是：有没有办法做到这一点，也许是一些允许附加菜单的秘密按钮属性？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2014-06-06T17:48:18.193

按钮右侧有向下箭头，您可以从设计器设置它的菜单：

![ss](../Images/c8fd2d90de49d39a3529940f94cc2f3a.png)

使用 ShowMenuUnderCursor：

![ss](../Images/214155d01ed1779bd780f36734720147.png)

菜单按钮类：

```
public class MenuButton : Button
{
    [DefaultValue(null)]
    public ContextMenuStrip Menu { get; set; }

    [DefaultValue(false)]
    public bool ShowMenuUnderCursor { get; set; }

    protected override void OnMouseDown(MouseEventArgs mevent)
    {
        base.OnMouseDown(mevent);

        if (Menu != null && mevent.Button == MouseButtons.Left)
        {
            Point menuLocation;

            if (ShowMenuUnderCursor)
            {
                menuLocation = mevent.Location;
            }
            else
            {
                menuLocation = new Point(0, Height);
            }

            Menu.Show(this, menuLocation);
        }
    }

    protected override void OnPaint(PaintEventArgs pevent)
    {
        base.OnPaint(pevent);

        if (Menu != null)
        {
            int arrowX = ClientRectangle.Width - 14;
            int arrowY = ClientRectangle.Height / 2 - 1;

            Brush brush = Enabled ? SystemBrushes.ControlText : SystemBrushes.ControlDark;
            Point[] arrows = new Point[] { new Point(arrowX, arrowY), new Point(arrowX + 7, arrowY), new Point(arrowX + 3, arrowY + 4) };
            pevent.Graphics.FillPolygon(brush, arrows);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-05-29T16:42:39.383

您可以在单击事件上显示 ContextMenuStrip：

```
private void button1_Click(object sender, EventArgs e) {
  contextMenuStrip1.Show(button1, new Point(0, button1.Height));
} 
```

要自行决定是在按钮上方还是下方显示菜单，您可以尝试使用以下代码，该代码测量菜单并确定它是否会部分显示在屏幕外：

```
private void button1_Click(object sender, EventArgs e) {
  Point screenPoint = button1.PointToScreen(new Point(button1.Left, button1.Bottom));
  if (screenPoint.Y + contextMenuStrip1.Size.Height > Screen.PrimaryScreen.WorkingArea.Height) {
    contextMenuStrip1.Show(button1, new Point(0, -contextMenuStrip1.Size.Height));
  } else {
    contextMenuStrip1.Show(button1, new Point(0, button1.Height));
  }    
} 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2014-11-27T14:56:45.917

稍微扩展[@Jaex 答案](https://stackoverflow.com/a/24087828/779521)以允许分隔线、箭头的条件绘制（如果未配置任何内容）以及主按钮主体和菜单箭头的单独单击事件。

应该注意的是，为了更好地对齐，您可以设置`button.TextAlign = System.Drawing.ContentAlignment.MiddleLeft;`

[![在此处输入图像描述](../Images/dee2bb938c9566d7542034387410ac2c.png)](https://i.stack.imgur.com/gY8Xf.png)

这是我的小改进

```
public class SplitButton : Button
{
    [DefaultValue(null), Browsable(true),
    DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
    public ContextMenuStrip Menu { get; set; }

    [DefaultValue(20), Browsable(true),
    DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
    public int SplitWidth { get; set; }

    public SplitButton() 
    {
        SplitWidth = 20;
    }

    protected override void OnMouseDown(MouseEventArgs mevent)
    {
        var splitRect = new Rectangle(this.Width - this.SplitWidth, 0, this.SplitWidth, this.Height);

        // Figure out if the button click was on the button itself or the menu split
        if (Menu != null && 
            mevent.Button == MouseButtons.Left &&
            splitRect.Contains(mevent.Location) )
        {
            Menu.Show(this, 0, this.Height);    // Shows menu under button
            //Menu.Show(this, mevent.Location); // Shows menu at click location
        }
        else
        {
            base.OnMouseDown(mevent);
        }
    }

    protected override void OnPaint(PaintEventArgs pevent)
    {
        base.OnPaint(pevent);

        if (this.Menu != null && this.SplitWidth > 0)
        { 
            // Draw the arrow glyph on the right side of the button
            int arrowX = ClientRectangle.Width - 14;
            int arrowY = ClientRectangle.Height / 2 - 1;

            var arrowBrush = Enabled ? SystemBrushes.ControlText : SystemBrushes.ButtonShadow;
            var arrows = new[] { new Point(arrowX, arrowY), new Point(arrowX + 7, arrowY), new Point(arrowX + 3, arrowY + 4) };
            pevent.Graphics.FillPolygon(arrowBrush, arrows);

            // Draw a dashed separator on the left of the arrow
            int lineX = ClientRectangle.Width - this.SplitWidth;
            int lineYFrom = arrowY - 4;
            int lineYTo = arrowY + 8;
            using( var separatorPen = new Pen(Brushes.DarkGray){DashStyle = DashStyle.Dot})
            {
                pevent.Graphics.DrawLine(separatorPen, lineX, lineYFrom, lineX, lineYTo);
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-29T16:42:33.097

最简单的选择是在仅显示单个按钮的未停靠 ToolStrip 中使用 ToolStripDropDownButton。然后您可以向其中添加子项目等。为此： - 将工具条拖到您的控件/表单上 - 使用布局助手添加 DropDownButton - 将 GripStyle 设置为 Hidden - 将 Dock 设置为 None

结果是一个独立的工具栏样式按钮，它支持您描述的下拉行为。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-06-07T19:41:48.013

很容易我们可以做到。这可能会有所帮助:)

```
ContextMenuStrip contextMenuStrip1 = new ContextMenuStrip();

        private void button1_Click(object sender, EventArgs e)
        {
            contextMenuStrip1.Items.Clear();
            contextMenuStrip1.Items.Add("item1");
            contextMenuStrip1.Items.Add("item2");

            contextMenuStrip1.Show(button1, new Point(0, button1.Height));
        }

        private void contextMenuStrip1_ItemClicked(object sender, ToolStripItemClickedEventArgs e)
        {
            if (e.ClickedItem.Text == "item1")
            {
                MessageBox.Show(e.ClickedItem.Text);
            }
        } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-05-14T04:49:42.240

上面 Jaex 的 MenuButton 类对我来说是完美的。我确实将下面的逻辑添加到 OnMouseDown 中，以便只有在我单击箭头时才会显示上下文菜单。如果我单击较大的部分，则会触发正常的单击事件。允许“默认”单击操作。

```
if (Menu != null && mevent.Button == MouseButtons.Left)
{
    if (mevent.Location.X >= this.Width - 14)
    {
        System.Drawing.Point menuLocation;

        if (ShowMenuUnderCursor)
        {
            menuLocation = mevent.Location; 
        }
        else
        {
            menuLocation = new System.Drawing.Point(0, Height);
        }

        Menu.Show(this, menuLocation);
    }
} 
```

认为这可能对某人有用。谢谢贾克斯

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-29T16:36:28.293

单击时在按钮下方显示上下文菜单。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-29T17:07:15.273

Infragistics 有 WinDropDownButton：[http ://help.infragistics.com/Help/NetAdvantage/WinForms/2012.1/CLR2.0/html/WinDropDownButton_About_WinDropDownButton.html](http://help.infragistics.com/Help/NetAdvantage/WinForms/2012.1/CLR2.0/html/WinDropDownButton_About_WinDropDownButton.html)

所以它肯定存在，但是您可能不是在寻找付费的第三方控件。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-12T15:16:40.947

我也在摆弄这个问题，并找到了一个非常简单的解决方案（尽管有点肮脏）：在`ComboBox`下放置 a `Button`，这样它就会在按钮旁边显示下拉箭头。

然后使用`SelectedIndexChanged`来`ComboBox`改变`Button`行为，或者立即执行您希望它执行的操作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-02-03T10:38:24.463

所以我想出了一个基于工具条的自定义控件，因此可以完全自定义文本和图像，每个按钮/动作都有自己的点击事件。并且可以在winform编辑器中设计。有一些小的布局问题，例如下拉项的对齐方式，但没有什么严重的问题。该按钮将使单击过的放置项目成为主要项目，这可以在`OnActions_DropDownItemClicked()`方法中更改

![按钮关闭](../Images/e2c36f315a7fce9e7828a3236f12ba6d.png)

![按钮掉落](../Images/6aa5cac1424e71ddf909f813344eff28.png)

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.ComponentModel.Design.Serialization;
using System.Drawing;
using System.Text;
using System.Windows.Forms;

//System.Windows.Forms.Design.ControlDesigner
namespace YourNamespace
{
    /// <summary>
    /// Implements a drop button using only standard winform controls
    /// </summary>
    [DesignerSerializer("System.Windows.Forms.Design.ToolStripCodeDomSerializer, System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a", "System.ComponentModel.Design.Serialization.CodeDomSerializer, System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")]
    [Designer("System.Windows.Forms.Design.ControlDesigner, System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")]
    public class DropButton : ToolStrip
    {
        #region Private Fields

        private List<ActionButtonInfo> _actionButtons = new List<ActionButtonInfo>();

        private ToolStripLayoutStyle _layoutStyle = ToolStripLayoutStyle.Flow;
        private int _splitButtonWidth = 30;
        private System.Windows.Forms.ToolStripDropDownButton btnActions;

        private System.Windows.Forms.ToolStripButton btnMainAction;

        #endregion Private Fields

        #region Public Properties

        /// <summary>
        /// Gets or sets the action buttons.
        /// </summary>
        public List<ActionButtonInfo> ActionButtons
        {
            get
            {
                return this._actionButtons;
            }

            set
            {
                this._actionButtons = value;
                SetupActionButtons();
            }
        }

        /// <summary>
        /// Gets or sets the drop down direction.
        /// </summary>
        public ToolStripDropDownDirection DropDownDirection
        {
            get; set;
        }

        /// <inheritdoc/>
        [Browsable(false)]
        public new ToolStripGripStyle GripStyle => ToolStripGripStyle.Hidden;

        /// <inheritdoc/>
        [Browsable(false)]
        public new ToolStripItemCollection Items
        {
            get
            {
                return base.Items;
            }
        }

        /// <inheritdoc/>
        [Browsable(false)]
        public new ToolStripLayoutStyle LayoutStyle => _layoutStyle;

        public new ToolStripLayoutStyle LayoutStyle1 => ToolStripLayoutStyle.Flow;

        /// <summary>
        /// Gets or sets the split button width.
        /// </summary>
        public int SplitButtonWidth
        {
            get
            {
                return _splitButtonWidth;
            }

            set
            {
                if(value < 10 || value > this.Width)
                {
                    throw new ArgumentOutOfRangeException();
                }

                _splitButtonWidth = value;
                ResizeButtons();
            }
        }

        #endregion Public Properties

        #region Private Methods

        /// <summary>
        /// The actual implementation that adds a button to the button list
        /// </summary>
        /// <param name="abi">The abi.</param>
        private void AddActionButtonImpl(ActionButtonInfo abi)
        {
            ToolStripItem tsi = new ToolStripButton
            {
                AutoSize = false,
                Text = abi.Text,
                Image = abi.Image,
                Tag = abi,
                Height = btnMainAction.Height,
                Width = btnMainAction.Width + btnActions.Width,
                TextImageRelation = TextImageRelation.ImageBeforeText,
                TextAlign = ContentAlignment.MiddleLeft,
                Padding = new System.Windows.Forms.Padding(2, 2, 2, 2)
            };

            btnActions.DropDownItems.Add(tsi);
        }

        private void OnActions_DropDownItemClicked(object sender, ToolStripItemClickedEventArgs e)
        {
            if(e.ClickedItem != null && !String.IsNullOrEmpty(e.ClickedItem.Text))
            {
                ActionButtonInfo abi = e.ClickedItem.Tag as ActionButtonInfo;
                if(abi != null)
                {
                    SetMainButton(abi);
                    abi.Clicked?.Invoke(this, null);
                }
            }
        }

        private void OnbtnActions_DropDownOpening(object sender, EventArgs e)
        {
            ToolStripDropDownMenu tdd = btnActions.DropDown as ToolStripDropDownMenu;

            tdd.DefaultDropDownDirection = ToolStripDropDownDirection.BelowLeft;
            tdd.ShowCheckMargin = false;
            tdd.ShowImageMargin = false;

            tdd.MinimumSize = btnMainAction.Size;
        }

        /// <summary>
        /// Resizes the buttons.
        /// </summary>
        /// <param name="suspend">If true, suspend.</param>
        private void ResizeButtons(bool suspend = true)
        {
            if(btnActions is null || btnMainAction is null)
                return;

            if(suspend)
                this.SuspendLayout();

            int marginX = (this.Margin.Left + this.Margin.Right);
            int marginY = (this.Margin.Top + this.Margin.Bottom);
            btnMainAction.Width = this.Width - _splitButtonWidth - marginX;
            btnActions.Width = _splitButtonWidth - marginX - 1;

            btnMainAction.Height = this.Height - marginY;
            btnActions.Height = this.Height - marginY;

            if(suspend)
                this.ResumeLayout(true);
        }

        /// <summary>
        /// Sets the main button.
        /// </summary>
        /// <param name="abi">The abi.</param>
        private void SetMainButton(ActionButtonInfo abi)
        {
            btnMainAction.Image = abi.Image;
            btnMainAction.Text = abi.Text;

            // btnMainAction.Click += abi.Clicked;
            btnMainAction.Tag = abi;
        }

        /// <summary>
        /// Setups the action buttons.
        /// </summary>
        private void SetupActionButtons()
        {
            if(_actionButtons.Count == 0)
            {
                btnActions.Enabled = false;
                return;
            }

            btnActions.Enabled = true;

            SetMainButton(_actionButtons[0]);

            foreach(ActionButtonInfo abi in _actionButtons)
            {
                AddActionButtonImpl(abi);
            }

            btnActions.DropDownOpening += OnbtnActions_DropDownOpening;
        }

        #endregion Private Methods

        #region Protected Methods

        /// <inheritdoc/>
        protected override void OnCreateControl()
        {
            System.ComponentModel.ComponentResourceManager resources = new System.ComponentModel.ComponentResourceManager(typeof(DropButton));

            base.OnCreateControl();

            this.btnMainAction = new System.Windows.Forms.ToolStripButton();
            this.btnActions = new System.Windows.Forms.ToolStripDropDownButton();

            this.SuspendLayout();

            this.Items.AddRange(new System.Windows.Forms.ToolStripItem[] {
            this.btnMainAction,
            this.btnActions});

            this.MinimumSize = new Size(100, 40);
            base.GripStyle = System.Windows.Forms.ToolStripGripStyle.Hidden;
            base.LayoutStyle = System.Windows.Forms.ToolStripLayoutStyle.Flow;
            this.AutoSize = false;
            this.Dock = DockStyle.None;

            // this.ItemClicked += new System.Windows.Forms.ToolStripItemClickedEventHandler(this.toolStripAction_ItemClicked);

            //
            // btnMainAction
            //
            this.btnMainAction.AutoSize = false;
            this.btnMainAction.BackColor = System.Drawing.Color.Gainsboro;
            this.btnMainAction.ForeColor = System.Drawing.Color.Black;
            this.btnMainAction.Font = new System.Drawing.Font("Segoe UI", 12F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Point);
            this.btnMainAction.ImageScaling = System.Windows.Forms.ToolStripItemImageScaling.None;
            this.btnMainAction.ImageTransparentColor = System.Drawing.Color.Magenta;
            this.btnMainAction.Name = "btnMainAction";
            this.btnMainAction.Size = new System.Drawing.Size(this.Width, this.Height);
            this.btnMainAction.Text = "Test";

            //
            // btnActions
            //
            this.btnActions.AutoSize = false;
            this.btnActions.AutoToolTip = false;
            this.btnActions.DisplayStyle = System.Windows.Forms.ToolStripItemDisplayStyle.Image;
            this.btnActions.BackColor = System.Drawing.Color.Gainsboro;
            this.btnActions.ForeColor = System.Drawing.Color.Black;
            this.btnActions.Font = new System.Drawing.Font("Segoe UI", 12F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Point);
            this.btnActions.Image = Properties.Resources.DropButtonArrow;
            this.btnActions.ImageScaling = System.Windows.Forms.ToolStripItemImageScaling.None;
            this.btnActions.Name = "btnActions";
            this.btnActions.ShowDropDownArrow = false;
            this.btnActions.Size = new System.Drawing.Size(_splitButtonWidth, this.Height);
            this.btnActions.TextImageRelation = System.Windows.Forms.TextImageRelation.Overlay;

            btnActions.DropDownDirection = ToolStripDropDownDirection.BelowLeft;
            btnActions.DropDownItemClicked += OnActions_DropDownItemClicked;

            ResizeButtons(false);

            this.ResumeLayout(false);
            this.PerformLayout();
        }

        /// <summary>
        /// Propagate font changes to the child controls
        /// </summary>
        /// <param name="e"></param>
        protected override void OnFontChanged(EventArgs e)
        {
            base.OnFontChanged(e);

            if(btnActions is null || btnMainAction is null)
                return;

            btnMainAction.Font = this.Font;
            btnActions.Font = this.Font;
        }

        /// <inheritdoc/>
        protected override void OnLayout(LayoutEventArgs e)
        {
            ResizeButtons(false);
            base.OnLayout(e);
        }

        #endregion Protected Methods

        #region Public Methods

        /// <summary>
        /// Adds an action button.
        /// </summary>
        /// <param name="actionButtonInfo">The action button info.</param>
        public void AddActionButton(ActionButtonInfo actionButtonInfo)
        {
            _actionButtons.Add(actionButtonInfo);

            if(_actionButtons.Count == 1)
                SetupActionButtons();
            else
                AddActionButtonImpl(actionButtonInfo);
        }

        #endregion Public Methods
    }
} 
```

# c# - ToLookup 与多个键

> ID：10803185
> 
> 赞同：17
> 
> 时间：2012-05-29T16:33:51.650
> 
> 标签：c#, .net, lookup

有没有办法要求`.ToLookup`LINQ 提供的功能需要多个键？

我承认一开始这似乎不直观，我希望没有实际的方法可以做到这一点，但我希望有人知道一种方法。

我基本上希望能够通过两个值进行查找，例如 a`string`和 an `int`，并使用这两个值检索对象。

# 例子

```
 public class MyClass {
      public string StringProp {get;set;}
      public int IntProp {get;set;}
      public object MoreData {get;set;}
    }

    public class Main {
      public void Main() {
        HashSet<MyClass> set = new HashSet<MyClass>();
        set.Add(new MyClass {StringProp = "a", IntProp = 1, MoreData = null});
        set.Add(new MyClass {StringProp = "c", IntProp = 4, MoreData = new object()});
        set.Add(new MyClass {StringProp = "a", IntProp = 2, MoreData = "upupdowndown"});
        set.Add(new MyClass {StringProp = "c", IntProp = 1, MoreData = string.Empty});
        set.Add(new MyClass {StringProp = "c", IntProp = 4, MoreData = string.Empty});
        // Using 'var' because I don't know how this would be defined.
        // I recognize that this will not compile - but this is what I'm trying to do.
        var lookup = set.ToLookup(x => x.StringProp && x.IntProp)
        MyClass c = lookup["a", 1].First(); // Should return the first element
        IEnumerable<MyClass> list = lookup["c", 4]; // Should return the 2nd and last elements
      }
    } 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-29T17:03:59.343

我会用`Tuple`s 来做这种事情：

```
var lookup = set.ToLookup(x => Tuple.Create(x.StringProp, x.IntProp));
MyClass c = lookup[Tuple.Create("a", 1)].First();
IEnumerable<MyClass> list = lookup[Tuple.Create("c", 4)]; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-29T17:23:11.610

因此，其他答案与我的想法一致，但是每次您想从查找中获取值时创建一个元组或匿名类有点麻烦。如果您可以将字符串和 int 粘贴到索引器中以获取值，那不是很好吗？通过创建自己的类来使用索引器包装查找，您可以做到这一点。

```
public class MyLookup<T1, T2, TOut>
{
    private ILookup<Tuple<T1, T2>, TOut> lookup;
    public MyLookup(IEnumerable<TOut> source, Func<TOut, Tuple<T1, T2>> keySelector)
    {
        lookup = source.ToLookup(keySelector);
    }

    public IEnumerable<TOut> this[T1 first, T2 second]
    {
        get
        {
            return lookup[Tuple.Create(first, second)];
        }
    }

    //feel free to either expose the lookup directly, or add other methods to access the lookup
} 
```

这是一个使用它的例子：

```
IEnumerable<MyClass> data = null; //TODO populate with real data
var lookup = new MyLookup<string, int, MyClass>(data
    , item => Tuple.Create(item.StringProp, item.IntProp));

IEnumerable<MyClass> someValue = lookup["c", 4]; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-29T16:57:06.020

虽然不是你真正想要的，但会做得很好：

```
var r = set.ToLookup(x => new { x.StringProp, x.IntProp });
var f = r[ new { StringProp = "a", IntProp = 1 } ].First(); 
```

# python - 所有排列但没有相反数字的列表

> ID：10803186
> 
> 赞同：3
> 
> 时间：2012-05-29T16:33:52.133
> 
> 标签：python, list, permutation

我需要创建一个所有排列的列表，但不包括那些有相同数量的符号改变的排列。

例如，从序列

```
[-2, -1, 1, 2] 
```

我会得到像这样的所有排列：

```
[-2, -1], [-2, 1], [-1, -2], [-1, 2], [1, -2], [1, 2], [2, -1], [2, 1] 
```

目前我使用以下代码：

```
permutation_items = []
permutations = itertools.permutations(range_items, items)
permutation_item = list(permutations) 
```

例如`range_items = [-2, -1, 1, 2]`，在哪里`items = 2`

然后消除我使用的所有相反的重复项

```
for element in permutation_items:
    flag=0
    for j in element:
        if ((j in element) & ((j*-1) in element)):
            flag = 1
            break
    if flag == 0:
        all_solutions.append(element) 
```

我认为这不是最好的方法，因为首先我创建了一个包含所有排列的列表，然后我删除了那些我不想要的，你能建议一个更好的方法吗？还因为如果我需要创建一个包含 10 个或更多数字的排列列表，它会变得非常大......

你认为我会对这些维度有一些问题吗？

请注意：使用这些排列我需要做进一步的操作（我需要找到给出所有可能的数字对的最小排列数），所以我认为我需要将它们存储在一个变量中，也是因为在我的结尾算法我需要将结果存储在文件中。

...好吧，伙计们，您的回答非常好，我喜欢您的兴趣...现在，如果我对变量“range_items”使用包含 30 个元素（正面和负面）的列表，则代码使用的时间非常长，我想问你一个多线程解决方案（所以我可以将代码加载到具有多个内核的集群中）......这可行吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-29T17:14:20.380

您基本上是在问如何组合`permutation`and `product`。以下比拒绝更有效（也更简单）：您只生成一次所有排列，然后旋转符号。它在时间 O(N!) 和空间 O(1) 方面是渐近最优的：

```
def plusAndMinusPermutations(items):
    for p in permutations(items):
        for signs in product([-1,1], repeat=len(items)):
            yield [a*sign for a,sign in zip(p,signs)] 
```

（`itertools`按 OP 使用）

演示：

```
>>> list( plusAndMinusPermutations([1,2]) )
[
 [-1, -2], 
 [-1, 2], 
 [1, -2],
 [1, 2],
 [-2, -1],
 [-2, 1],
 [2, -1],
 [2, 1]
] 
```

这效率更高`factorial(N)`！（假设您使用它的长度大于 2。）

或者，我们可以以相反的顺序组合它们（`list`如果你愿意，可以映射到元组上）：

```
def plusAndMinusPermutations(items):
    for signed in product(*[[-a,a] for a in items]):
        for p in permutations(signed):
            yield p

>>> list( plusAndMinusPermutations([1,2]) )
[
 (-1, -2), 
 (-2, -1), 
 (-1, 2), 
 (2, -1), 
 (1, -2), 
 (-2, 1), 
 (1, 2), 
 (2, 1)
] 
```

* * *

*编辑以响应 OP 编辑​​：*

> *我需要找到给出所有可能的数字对的最小排列数*--OP

我不确定这是什么意思，但根据你的措辞，你几乎可以肯定不需要做任何这些。只需使用现有方法对 0 到 10 的数字进行暴力破解，然后将结果输入[http://oeis.org/](http://oeis.org/)，您可能会找到一个明确的公式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T16:36:52.180

以下使用与您的代码相同的拒绝方法，但效率更高：

```
(s for s in itertools.permutations(l, 2) if len(set(map(abs, s))) == len(s)) 
```

`l` 序列在哪里。

唯一棘手的一点是`len(set(map(abs, s))) == len(s)`. 它将排列的所有元素的绝对值放入一个集合中，并确保该集合与排列具有相同的大小。

为了使其更快，您可以替换`len(s)`为排列的长度（`2`在上面的示例中）。

我能想到的唯一算法改进是从原始序列中删除重复的数字。这是否对您有很大帮助取决于您是否喜欢一开始就复制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T22:23:36.597

我想了更多，我想你会喜欢这个：

```
from collections import defaultdict
from itertools import permutations, product

def make_groups(seq):
    found = defaultdict(set)
    for num in seq:
        found[abs(num)].add(num)
    return [list(v) for v in found.itervalues()]

def selective_permutations(seq, r=None):
    for g in permutations(make_groups(seq), r):
        for p in product(*g):
            yield p 
```

它采用您的输入序列 - 例如`[-2, -1, 0, 1, 2]`- 并将其按互斥值分组 - so `[[-2, 2], [-1, 1], [0]]`。

然后它`permutations`在组上运行 - 例如，您将得到`[[-2, 2], [-1, 1]]`- 然后`product`针对生成的组运行 yielding `[[-2, -1], [-2, 1], [2, -1], [2, 1]]`，这就是我们正在寻找的。

它尊重 r 参数（对于序列长度），并且在平衡和不平衡序列上都进行了最有效的工作 - 例如：

```
for p in selective_permutations([-3,-2,1,2], 2):
    print p 
```

结果是

```
(1, 2)
(1, -2)
(1, -3)
(2, 1)
(-2, 1)
(2, -3)
(-2, -3)
(-3, 1)
(-3, 2)
(-3, -2) 
```

无需丢弃任何组合。

希望有帮助！;-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T19:57:11.603

假设你只想要成对的数字（如果不是，你必须用递归做一些事情），并且序列中没有相等的数字

```
def make_perm(sequens):
    perm_s = []
    for e1 in sequens:
        for e2 in sequens:
            if abs(e1) != abs(e2):
               perm_s += [[e1,e2]] 

    return perm_s

print make_perm([-2,-1,1,2]) 
```

输出：

```
[[-2, -1], [-2, 1], [-1, -2], [-1, 2], [1, -2], [1, 2], [2, -1], [2, 1]] 
```

此解决方案处理不同的项目长度。

```
def perm(list_to_perm,perm_l,items):
    if len(perm_l) == items:
        print perm_l
    else:
        for i in  list_to_perm:

            if i not in perm_l:
                if -i not in perm_l:
                    perm(list_to_perm,list(perm_l) +[i],items)

a = [-2,-1,1,2]
perm(a,[],2) 
```

输出：

```
[-2, -1]
[-2, 1]
[-1, -2]
[-1, 2]
[1, -2]
[1, 2]
[2, -1]
[2, 1] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-19T09:38:44.430

这可能看起来有点奇怪。我还在学习python。我正在复制代码，所以顺序更自然。可能有捷径。这原来是 Rosalind.info 问题的答案。我不喜欢代码，它有点吵，但它有效。

```
    def 有符号烫发（x）：
        如果 len(x) == 1：
            产量 x
            x[0]*=-1
            产量 x
        别的：
            对于我在范围内（len（x））：
            对于 [1, -1] 中的 s：
            y=[x[i]*s]
            对于签名Perm中的j（x [：i] + x [i + 1：]）：
              产量 y+j

```

然后打电话

```
    [x for x in signedPerm(list(set([abs(y) for y in [-1, -2, 1, 4]])))]

```

# php - PHP代码没有将数据写入MySQL

> ID：10803187
> 
> 赞同：0
> 
> 时间：2012-05-29T16:34:01.883
> 
> 标签：php, mysql

出于某种原因，我的 php 代码没有将我的变量写入我的 mysql 数据库。

一切正常，直到评论“死在这里”

```
<?php
$name = ucwords($_POST['name']);
$sex = ucwords($_POST['sex']);
$age = intval($_POST['age']);
$email = $_POST['email'];

//DB ACCESS
$db = mysql_connect("localhost", "root", "root");
mysql_select_db("namedb", $db);
//DB ACCESS

if ($sex != 'M' && $sex != 'F') {

echo "Please go back and enter either M or F for 'Sex' <br />";
echo "<a href='index.html'>Back</a>";
die;
}

if (is_int($age) != yes) {
echo "Please enter a number for your age. <br />";
echo "<a href='index.html'>Back</a>";
die;
}

$query = "INSERT INTO people (age, name, email, sex) VALUES($age, $name, $email, $sex)";
mysql_query($query) or die ("Error Updating DB"); //DIES HERE
echo "Thanks $name, we've added you to our database.";

?> 
```

我的数据库已全部设置完毕，我不知道它为什么不将数据发送到数据库。这是mySQL的图片 ![mysql](../Images/ea729c4701ab05dc18f4abfabb4f08cb.png)

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T16:35:43.083

```
$query = "INSERT INTO people (age, name, email, sex) VALUES('$age', '$name', '$email', '$sex')"; 
```

我不支持 mysql_*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T16:46:31.190

You should use this

```
 if (!is_int($age)){
       echo "Please enter a number for your age. <br />";
       echo "<a href='index.html'>Back</a>";
       die;
} 
```

It's cleaner and probably more effective since is_int() returns a true or false statement and the if (is_int) basically means if (is_int($foo == true).

# javascript - 如何在内容可编辑的 div 中获取插入符号像素坐标？

> ID：10803189
> 
> 赞同：1
> 
> 时间：2012-05-29T16:34:03.273
> 
> 标签：javascript, uiwebview

我在 web 视图中有一个内容可编辑的 div，如何获取 div 中插入符号的像素坐标？

# jquery - jQuery.each() 未正确处理从 PHP 返回的 JSON 以在 Google 地图上显示为新标记

> ID：10803193
> 
> 赞同：1
> 
> 时间：2012-05-29T16:34:16.183
> 
> 标签：jquery, ajax, google-maps, google-maps-api-3, google-maps-markers

根据用户在过滤表单中选择的内容并单击**提交，我将使用 , 生成的****PHP**脚本中的**JSON**数据返回到我的客户端，以更新所有返回的数据并将其显示为我的 Google 地图上的标记。**`SQL``jQuery.each()`**`JSON`****

 *******问题***不是将返回的`JSON`数据显示为新标记，而是将其*限制*在已显示的标记上（最初加载页面时的默认标记）。

我在这里做错了什么？

我使用[这个 jQuery 插件](http://code.google.com/p/jquery-ui-map/)来处理我的谷歌地图。

我返回的 JSON 如下所示：

```
[{"Name":"John Smith","Address":"123 Fake St.", "Telephone":"50011111" ,"Lat":"coord values","Lng":"coord values"},{...repeat...},{}] 
```

**Jquery 提交按钮：**

```
$('#myform').on('submit', function(e) {
                    e.preventDefault();
                    var myData = $('#myform').serializeArray();
                    $.getJSON('phpscript.php', myData, function(json){
                        var theMarkers = json;
                        // alert(JSON.stringify(json));
                        $.each(theMarkers, function(i, val) {                           
                            $('#map_canvas').gmap('addMarker', { 'position': new google.maps.LatLng(val.Lat, val.Lng), 'bounds':true, 'icon':'mymarker.png' } ).click(function(){                               
                                $('#map_canvas').gmap('openInfoWindow', { 'content': '<h1>'+val.Name+'</h1>'+'<h2 style="color: grey">'+val.Address+'</h2><p style="color: green">'+val.Telephone+'</p>' }, this);
                            });                     
                        });

                    }); 
                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:44:57.890

您确实意识到在您的`$.each`函数中，`i`是索引，并且`val`是当前迭代中的对象。

你确定它不应该是`val.Name`，`val.Address`等等，因为这会访问你的json对象中的那些值，另一方面`i.name`可能只是当前索引，比如`4.name`等等？？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:18:14.123

两个想法：

(1) Lat 和 Lng 真的是说`coord values`而不是实数吗？（我从字面上看评论）

(2) 是否`mymarker.png`存在（正确路径）并在浏览器中正确加载？由于我没有这个文件，所以当我测试时，直到我从源中删除它之前什么都没有出现。

我用它来测试它工作正常，下载了最新的 jquery-ui-map。我只是假设 jQuery ajax 部分工作正常，因为您在控制台中输出了预期的结果。

```
<html>
 <head>
 <style type="text/css">
  html, body, #map_canvas { margin: 0; padding: 0; height: 100% }
 </style>
 <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="jqueryuimap.js"></script>
<script type="text/javascript">
  var map;
  var mapOptions = { center: new google.maps.LatLng(0.0, 0.0), zoom: 2,
    mapTypeId: google.maps.MapTypeId.ROADMAP };

  function initialize() {
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    theMarkers = [
      {"Name":"John Smith","Address":"123 Fake St.", 
         "Telephone":"50011111" ,"Lat":"0.0","Lng":"0.0"},

      {"Name":"John Smith","Address":"123 Fake St.", 
         "Telephone":"50011111" ,"Lat":"10.0","Lng":"0.0"},

      {"Name":"John Smith","Address":"123 Fake St.", 
         "Telephone":"50011111" ,"Lat":"20.0","Lng":"0.0"}
    ]

    $.each(theMarkers, function(i, val) {
      $('#map_canvas').gmap('addMarker', 
        { 'position': new google.maps.LatLng(val.Lat, val.Lng), 
          'bounds':true } ).click(function(){                               
      $('#map_canvas').gmap('openInfoWindow', 
        { 'content': '<h1>'+val.Name+'</h1>'+
          '<h2 style="color: grey">'+val.Address+
          '</h2><p style="color: green">'+val.Telephone+'</p>' }, this);
       });   
    });
  }
  google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T17:19:44.123

一切正常。您必须在使用新标记填充地图之前调用它。

```
$('#map_canvas').gmap('clear', 'markers'); 
```****

# svn - Subversion：在转储->加载循环后如何修复工作副本

> ID：10803195
> 
> 赞同：2
> 
> 时间：2012-05-29T16:34:18.840
> 
> 标签：svn

几周前，我们的免费增值版 subversion 主机向我们发送了一条消息，说我们超出了我们的大小限制。经过几次尝试解决这个问题（并意识到如果不进行转储->加载循环和修剪，就不可能缩小存储库），我们决定是时候迁移到具有更宽松大小限制的新主机了（并迁移同时 git。）

然而，在此期间，我们被锁定为“只读”访问 - 这是不幸的，因为有一些重要的本地更改尚未签入。所以我决定采取严厉措施并通过转储删除旧的服务器版本-> 加载循环方法让我们重新启动并再次工作，这样我们就可以让我们的本地修改工作。在对所有内容进行本地备份后，我实际上转储了除最新版本 (r525) 之外的所有内容。

这一切都奏效了——经过一个涉及主机帮助的漫长过程，我已经成功转储->重新加载了我们的存储库，它处于修订版 1。

但是，现在我们的客户拒绝更新我们现有的工作副本，因为他们认为他们是修订版 525 的工作副本：

`svn: A reported revision is higher than the current repository HEAD revision.`

所以问题是：是否有可能“修复”我的工作副本以认为它处于修订版 1？

我意识到我可以签出一个新的工作副本——但同样，我们有一些本地编辑，如果可能的话，希望将它们整合起来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:06:16.283

您最安全的选择可能是创建一个带有更改的补丁（或多个补丁 - 如果我们正在谈论多个工作副本中的更改） - 这可以“离线”完成，而无需联系存储库。然后检查一个新的工作副本并将补丁应用到它。

您创建一个补丁`svn diff > patch.diff`并使用[`svn patch`](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.patch.html).

至于二进制文件的问题：您可以编写一个脚本，将修改后的二进制文件递归复制到新的工作副本。您可以创建一个已修改文件的列表，`svn status`然后按扩展名或其他属性将它们过滤掉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T02:36:58.303

从冲突文件夹中删除隐藏的 .svn 文件并更新到 HEAD。它将保留本地更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-27T16:12:40.677

使用较新版本的 Subversion，您可以使用 sqlite 修改工作副本数据库，这是相当危险的，您可能会完全破坏事情。如果你想试一试这里是如何。

首先找出远程存储库中的最新版本是什么：

```
$ svn info https://example.com/svn/project/trunk/
Path: trunk
URL: https://example.com/svn/project/trunk
Repository Root: https://example.com/svn
Repository UUID: fdecad78-55fc-0310-b1b2-d7d25cf747c9
Revision: 86002 <-- This is the value you want
Node Kind: directory
Last Changed Author: user@example.com
Last Changed Rev: 49367
Last Changed Date: 2008-05-23 17:01:34 +0100 (Fri, 23 May 2008) 
```

然后编辑 sqlite DB 并将修订更改为存储库中的最新版本：

```
cd .svn
$ sqlite3 wc.db 
SQLite version 3.7.13 2012-07-17 17:46:21
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> update nodes set revision = 86002 where revision > 86002;
sqlite> .exit
$ cd ..
$ svn up
Updating '.':
At revision 86002. 
```

如果最近在您的项目中进行了提交，您可能还需要运行此 SQL：

```
update nodes set changed_revision = 86002 where changed_revision > 86002; 
```

# css - 将 div 的内容放在中心

> ID：10803198
> 
> 赞同：1
> 
> 时间：2012-05-29T16:34:33.470
> 
> 标签：css, html

我有两个选择框和一个按钮面板，用于来回移动选项。现在它看起来像下面的第一张图片，我想将按钮与列表框垂直对齐，如下面的第二张图片

![在此处输入图像描述](../Images/839187b25fc447259d437196212a3a6f.png)

JSFiddle[在这里](http://jsfiddle.net/johnbk/Fq93w/)

任何帮助/指针都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T17:17:10.337

您可以使用 css 表。首先，你需要这个脚手架：

```
.table { display: table; }
.row { display: table-row; }
.cell { display: table-cell; }

[...]

<div class="table">
    <div class="row">
        <div class="cell">Lorem [...]</div>
        [...]
    </div>
</div> 
```

接下来，单元格的垂直排列由vertical-align: top|bottom|middle|baseline 确定。在引擎盖下：高度低于其行的单元格会自动接收顶部或底部填充。这样，一个单元格和一行就等于一。

查看您更新的代码：http: [//jsfiddle.net/Fq93w/21/](http://jsfiddle.net/Fq93w/21/)。这是 IE <= 7 的解决方法：

```
#rightListDiv, #controlPanel, #LeftListDiv {
    display: inline;
    zoom: 1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T16:38:05.410

`margin-top`根据您的需要添加价值，请参阅更新的小提琴：

[http://jsfiddle.net/Fq93w/11/](http://jsfiddle.net/Fq93w/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T16:48:42.593

Probably wrapping evrything inside one div and giving margin-top in % for controlPanel div, may work for you.

# ruby-on-rails - 根据某些属性将对象与现有对象关联

> ID：10803199
> 
> 赞同：0
> 
> 时间：2012-05-29T16:34:47.730
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

A 属于 B。从对象 A 的控制器的 create 方法中，如何根据对象 B 具有的某些属性查看所有对象 B 并获取某些匹配对象 B 的 id？最终目标是使用 b_id 外键将 A 分配给正确的 B 对象。

这是我目前拥有的，尽管它只创建新对象并且无法找到要关联的旧对象。我最终得到了一堆同名但具有不同 ID 的主机：

```
 #assign line to host
          begin
            #attempt to assign line to existing host
            line.host = host.where(:name => line.hostname).first
          rescue
            #create new host
            line.host = Host.new({:name => line.hostname})
          end 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-29T17:37:13.723

```
 #assign line to host
          line.host = Host.where(:name => line.hostname).first_or_create 
```

# processing - 使用 processing.js 进行体积渲染

> ID：10803200
> 
> 赞同：3
> 
> 时间：2012-05-29T16:34:58.030
> 
> 标签：processing, processing.js

给定一堆二维图像，如何使用 Processing/Processing.js 产生体积渲染效果？

目前我的想法是使用java（类似于imageJ）进行体积渲染->获取体积渲染图像的面作为单独的jpeg，并使用它们在处理中形成纹理立方体。

我想知道是否有人有更好的建议或关于如何使用所提出的方法的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T01:56:39.540

在 processing/processing.js 中，您可以将图像加载到数组中并在 z 轴上显示偏移量。您可能会发现使用[peasycam](http://mrfeinberg.com/peasycam/)可以更轻松地查看 3d 中发生的情况。

```
PImage[] imageArr; // load your images in setup()
float zOffset = 10;

void draw() {
    for (int i = 0; i < imageArr.length; i++) {
         float zVal = zOffset * float(i) - float(imageArr.length)*zOffset/2;
         pushMatrix();
         translate(0,0,zVal);
         imageMode(CENTER);
         image(imageArr[i], 0, 0);
         popMatrix;
    }
} 
```

如果您想做一些更像是图像数据的体素显示，您可以使用**PImage.pixels[]**读取图像颜色信息并显示半透明的相同颜色的**box()**。

我同意迈克的评论。如果你想在 processing.js 中做同样的事情，你必须只使用内置的方法/库，除非你能找到一个 javascript 等价物。

如果我离题了，也许张贴一张你想要做什么的图片将有助于澄清你的问题。

# core-data - 核心数据迁移非常慢

> ID：10803201
> 
> 赞同：4
> 
> 时间：2012-05-29T16:35:05.893
> 
> 标签：core-data, migration

我正在尝试执行核心数据迁移，一切正常，除了迁移本身需要 10 多秒。我正在使用 xcmapingmodel 在我的两个模型版本之间进行映射，这工作正常，除了它需要的时间长度。

在下面的代码中，“开始迁移”和“完成迁移”日志之间有 10 秒（或更长时间！）的暂停。有没有人遇到过如此缓慢的迁移？

我知道在迁移过程中所有数据都被复制并转移到了新的存储中，但我处理的不是一个*庞大*的数据集，可能是 20 个实体和 3,000 条记录，所以我无法想象它会花*那么*长时间。

我真的很感激任何帮助 - 谢谢！

迈克尔

```
NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
[NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

NSLog(@"Beginning migration");

if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error])
{
    NSLog(@"Auto migration failed, error %@, %@", error, error.userInfo);
    abort();
}   

NSLog(@"Finished migration"); 
```

# vb.net - 无效的演员表表达？

> ID：10803204
> 
> 赞同：2
> 
> 时间：2012-05-29T16:35:24.020
> 
> 标签：vb.net

如何从组合框中的值中删除无效的强制转换表达式以适合中的方程式`examgrade`？

我试图通过在 MSDN 等上查找它来解决它，但无法弄清楚。我尝试使用`Examgrade = ().ToString`，但没有奏效。

希望你们能指出我正确的方向。仅供参考，这是我的第一个真正的程序，我在 C# 中成功制作过一次，但删除了源文件，所以这是 Visual Basic，而且很容易做到这一点。

**星号标记问题行**

```
Public Class Calculator
Dim quarter3 As Integer
Dim quarter4 As Integer
Dim desiredgrade As String
Dim examgrade As String

 Private Sub Button1_Click(ByVal sender As System.Object, _
 ByVal e As System.EventArgs) Handles Button1.Click
    quarter3 = TextBox1.Text
    quarter4 = TextBox2.Text
    desiredgrade = ComboBox1.Text
    ****examgrade = ((desiredgrade - (quarter3 * 0.4) - _
    (quarter4 * 0.4)) / 0.2)****

    If examgrade > 100 Then
        Label5.Text = examgrade + " YOLO"
    ElseIf examgrade < 0 Then
        Label5.Text = "Impossible"
    Else
        Label5.Text = examgrade
    End If
End Sub

Private Sub ComboBox1_SelectedIndexChanged(ByVal sender _
As System.Object, ByVal e As System.EventArgs) Handles _
ComboBox1.SelectedIndexChanged
    Dim A As Integer
    Dim B As Integer
    Dim C As Integer
    Dim D As Integer
    A = 90
    B = 80
    C = 70
    D = 60
    ComboBox1.EndUpdate()
End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T16:44:50.973

`desiredgrade`是一个字符串

```
examgrade = ((Double.Parse(desiredgrade) - (quarter3 * 0.4) - _
            (quarter4 * 0.4)) / 0.2).ToString() 
```

我正在使用`Double`. `Integer`如果需要，您也可以使用。

```
examgrade = ((Integer.Parse(desiredgrade) - (quarter3 * 0.4) - _
            (quarter4 * 0.4)) / 0.2).ToString() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T16:49:54.377

Unless there's a specific reason for having examgrade as a String, try the following:

```
Dim examgrade as Integer

examgrade = ((CInt(desiredgrade) - (quarter3 * 0.4) - _
(quarter4 * 0.4)) / 0.2) 
```

VB will automatically convert examgrade to a String when you assign it to your label.

# ios - 具有循环行为的 iPhone 故事板

> ID：10803207
> 
> 赞同：0
> 
> 时间：2012-05-29T16:35:27.893
> 
> 标签：ios, storyboard, viewcontroller, reusability, avcapturesession

我在情节提要中有一系列 ViewController。现在一些转换循环回到之前的 ViewControllers。

我的问题是：

*   这会导致什么样的问题？
*   这对 ViewController 生命周期有什么影响？在另一个通过 ViewController 的过程中，它是再次创建还是被重用？
*   有什么更好的方法来做到这一点？

（我问这个是因为我使用的 AVCaptureSession 在第一次通过时工作正常，但在随后的通过中存在一些问题（从中断中恢复）。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T16:58:17.347

故事板中到视图控制器的每个 segue 都会创建该视图控制器的一个新实例。当您的故事板有转场循环时，您将循环浏览视图控制器的新实例，而不是重复使用。

# ruby-on-rails - Gmaps4Rails 自定义信息窗口

> ID：10803209
> 
> 赞同：2
> 
> 时间：2012-05-29T16:35:31.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gmaps4rails

我正在让 gmaps4rails 处理我的项目，但我正在努力自定义信息窗口的方面。我按照在 wiki 中找到的教程进行操作，除了 InfoBox 的回调部分对我（一个没有经验的 JS 程序员）来说有点困惑之外，我理解了大部分内容。当我单击标记时，我只得到“x”（关闭）按钮，但没有显示文本或按预期显示颜色。这是我的代码：

在 post.rb 中：

```
def gmaps4rails_infowindow
  # add here whatever html content you desire, it will be displayed when users clicks on the marker
  "<h4>#{self.title}</h4>"
end 
```

在 post.js.coffee 中：

```
Gmaps.map.infobox = (boxText) ->
  content: boxText
  disableAutoPan: false
  maxWidth: 0
  pixelOffset: new google.maps.Size(-140, 0)
  zIndex: null
  boxStyle:
    background: "url('http://google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.5/examples/tipbox.gif') no-repeat"
    opacity: 0.75
    width: "280px"

  closeBoxMargin: "10px 2px 2px 2px"
  closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif"
  infoBoxClearance: new google.maps.Size(1, 1)
  isHidden: false
  pane: "floatPane"
  enableEventPropagation: false 
```

在 gmaps4rails.css

```
.yellow { border: 1px solid black; margin-top: 8px; background: yellow; padding: 5px; } 
```

在我看来：

```
= gmaps("markers" => {"data" => @json, "options" => {"custom_infowindow_class" => "yellow" } }) 
```

如果有人能指出我正确的方向，我将不胜感激，因为这是我第一次使用地图。先感谢您！

编辑：

我的结果：

[http://postimage.org/image/45feoz3kl/](http://postimage.org/image/45feoz3kl/)

编辑2：

我不想虐待你，但一旦我明白发生了什么，我自己会好起来的，现在是最糟糕的。现在它甚至没有渲染，我得到了一堆错误。这是我的代码：

```
= gmaps("markers" => {"data" => @json, "options" => {"custom_infowindow_class" => "yellow" } })
- content_for :scripts
  :javascript
    Gmaps.map.infobox = function(boxText) {
      return {
        content: boxText
        ,disableAutoPan: false
        ,maxWidth: 0
        ,pixelOffset: new google.maps.Size(-140, 0)
        ,zIndex: null
        ,boxStyle: {
          background: "url('http://google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.5/examples/tipbox.gif') no-repeat"
          ,opacity: 0.75
          ,width: "280px"
          }
        ,closeBoxMargin: "10px 2px 2px 2px"
        ,closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif"
        ,infoBoxClearance: new google.maps.Size(1, 1)
        ,isHidden: false
        ,pane: "floatPane"
        ,enableEventPropagation: false
    }}; 
```

错误：

在 return 语句的行中出现“unexpected keyword_ensure, expecting $end”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T19:40:18.533

经过几番评论，我终于明白了（即使它毕竟很明显......）：

`Gmaps.map`是在页面加载时动态创建的。因此，每当您想向该对象添加属性时，您必须在调用**之后**将其添加**到**.`gmaps`**`content_for :scripts`**

 **在您的代码中：

```
= gmaps()

- content_for :scripts do
  :javascript
    Gmaps.map.infobox = function(.... 
```**

# ios - 文件是为存档而构建的，它不是被链接的体系结构（i386）

> ID：10803211
> 
> 赞同：79
> 
> 时间：2012-05-29T16:35:33.643
> 
> 标签：ios, iphone, xcode, ipad, linker-errors

我必须建立静态库。我想在我的 iPhone 和 ipad 应用程序中使用。当我尝试运行模拟器时，我得到链接错误。我是 iOS 开发的新手。好心的帮助；

> ld：警告：忽略文件/Users/valuelabs/Desktop/DruvaProject/libraries/libnetUtils.a，文件是为存档而构建的，它不是被链接的架构（i386）架构i386的未定义符号：
> “_OBJC_CLASS_$_netUtils”，引用自：ViewController.o ld 中的 objc-class-ref：未找到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我尝试在架构中添加 i386。但没有运气

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-01-03T17:11:24.723

在努力解决同样的问题并遵循更新构建设置、清除链接器搜索路径等所有公认的答案之后。我终于找到了一个适合我的答案。

在构建之前，请确保选择正确的类型（iPhone 模拟器）而不是 iOS 设备。然后重建。否则，您将尝试在您的 mac (i386) 上的模拟器上使用为 iOS 设备（arm 处理器）构建的库。应该很明显，但不是。

**前：**

![iOS 设备设置](../Images/01db4c0fdef439497347ecd4c945b35f.png)

**后：**

![iPhone 5.1 模拟器设置](../Images/4f5f1eb0d1811415c9faa317f6fa6b09.png)

现在，查看 Navigator 中的 Products 组 > 右键单击​​您的静态库（.a 文件）> 在 Finder 中显示，您会注意到它位于 Debug-iphonesimulator 文件夹中，而不是 Debug-iphoneos 中。本来我没注意文件夹的名字，要不我早就想到了。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2015-06-08T05:36:40.593

有时这些类型的错误会激怒您！

删除派生数据对我有用：

修复步骤

1) 在 XCODE > Windows > 项目 > 选择您的项目 > 删除派生数据 > 退出 XCODE 并重新打开它 > 如果您收到 MAC-O-Linker 构建失败错误 > 参考[此](https://stackoverflow.com/questions/5329001/apple-mach-o-linker-error-when-compiling-for-device/8893880#8893880)链接 > 再次清理并构建。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-02-06T01:28:57.837

您`libnetUtils.a`正在为与目标不同的架构构建。

检查 libnetUtils 构建设置。它所构建的架构及其支持的架构列表必须是目标架构的（弱）超集。这里的复杂性在于，生成的架构分布在各种设置中：“架构”、“仅构建活动架构”和“有效架构”。

“仅构建活动架构”设置使这特别令人困惑。例如，假设您正在为模拟器构建。如果 Debug 的“Build active architecture only”设置为 NO，它将构建“Architectures”和“Valid architectures”中列出的所有架构（可能是 armv7 等）。但是，如果 libnetUtils 将该设置设置为是（调试：是），则它仅适用于 i386。因此，当您的链接器尝试将 armv7 与 i386 链接时，它会失败。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2014-05-19T06:22:00.113

如果我收到忽略文件警告 - 我会`lipo -info`在忽略的文件上运行以找到它的架构，如下所示

```
lipo -info libnetUtils.a 
```

这将打印 i386、armv6、armv7、armv7s、x86_64 等。通常，该架构必须与您的目标构建平台相匹配。例如

*   i386 = ios 模拟器或 Mac os x 上的 32 位构建
*   armv6 armv7 arm7s = ios 设备
*   x86_64 = mac os x 上的 64 位构建

根据不匹配的情况，您必须为目标平台重建库或更改目标平台。

注意：对于胖二进制文件，`lipo -info`将打印上述架构的组合。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-05-29T16:50:26.210

I don't actually know if my advice is correct, but try checking this:

*   Select your project
*   Select "Build Settings"
*   Check Architectures:
    *   Valid architectures should be "armv6 armv7"
    *   Supported platforms should be "iphonesimulator iphoneos" (maybe iPad, I don't know)
    *   Base SDK – your iOS SDK (I have iOS 5.0).

Do not judge me if I am captain obvious :)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-05-29T16:37:17.390

这意味着您尝试使用的库并未针对 iOS 模拟器进行通用编译（i386 符号适用于 Mac）。不过，在实际设备上运行它应该可以正常工作。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-01-21T07:28:16.773

您还应该检查构建设置中的部署目标是否与依赖项和依赖项相同。我注意到我为静态库目标设置了 iOS 13，而为使用该库的框架定义了 iOS 10.0。切换到 10.0 解决了这个问题。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-10-02T14:41:19.390

有同样的问题，并从页面尝试了多种解决方案，但无济于事。我仍然有一条消息告诉我我的库不是为 arm64 构建的。

最后我是如何解决的：

*   在文本编辑器中打开库的 project.pbxproj
*   搜索**VALID_ARCHS**
*   出现 4 次，*其中 2 次不包含 arm64*
*   我在链中手动添加了 arm64 (VALID_ARCHS = "arm64 i386 armv7 armv7s")
*   重建库，一切都好

似乎有时 XCode 显示的构建设置不完整，并且与项目文件不完全对应。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-10-19T20:34:33.543

`Build Active Architecture Only`对我来说，将to设置为固定的`Multiple values`，要做到这一点，您必须将其扩展并设置`Debug`为`YES`and `Release`to `No`。现在，它可以在我的设备上编译。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2017-01-24T15:38:53.537

当我们在设备上运行应用程序时，不会出现此问题。您可以通过在 iOS 设备上运行代码来检查它。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2013-02-05T15:32:37.633

我也有一个 armv7s 架构。我删除了它并确保 armv6 和 armv7 是唯一列出的两个。现在可以使用

# java - Java 枚举实例化

> ID：10803212
> 
> 赞同：1
> 
> 时间：2012-05-29T16:35:33.977
> 
> 标签：java, enums, instantiation

```
public enum FOO{
    TATA(TOTO,TITI);

    public FOO(BAR bar1,BAR bar2) {
        bar1.associate(this,bar2);
    }
}

public enum BAR {
    TOTO,
    TITI;

    private FOO _foo;
    private BAR _bar;

    public void associate(FOO foo,BAR bar) {
        _foo = foo;
        _bar = bar;
    }
} 
```

问题是在我的代码中我在 FOO 之前调用了 BAR。结果是 BAR 中的字段为空。我终于找到了原因。（枚举仅在第一次调用时被实例化）。为了解决这个问题，我`FOO.TATA;`在特定文件中使用 Bar 之前添加了该问题。

所以我的问题是，有没有更优雅的方法来确保一个枚举在另一个枚举之前实例化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T16:52:54.157

由于它们彼此密切相关，我会将它们放在同一个类中，这将起到调解人的作用：

```
public class FooBar {
    static {
        Bar.TOTO.associate(Foo.TATA, Bar.TITI);
    }

    public enum Foo {
        TATA;
    }

    public enum Bar {
        TOTO,
        TITI;

        private Foo _foo;
        private Bar _bar;

        private void associate(Foo foo, Bar bar) {
            _foo = foo;
            _bar = bar;
        }

        public Foo getFoo() {
            return _foo;
        }

        public Bar getBar() {
            return _bar;
        }
    }

    public static void main(String[] args) {
        System.out.println(FooBar.Bar.TITI.getFoo());
        System.out.println(FooBar.Bar.TITI.getBar());
        System.out.println(FooBar.Bar.TOTO.getFoo());
        System.out.println(FooBar.Bar.TOTO.getBar());
    } 
} 
```

# c# - 通过正则表达式删除 xsi nil

> ID：10803216
> 
> 赞同：0
> 
> 时间：2012-05-29T16:35:51.227
> 
> 标签：c#, .net, xml, regex

我有一个第三方组件，它产生序列化的 xml 和解析 xml 并将值插入表的存储过程。

我在组件和 sql 存储过程中处理 xsi nil 时遇到问题。我无法控制更改组件或存储过程。所以属性解决方案上的 IsNullable 属性而不是过程解决方案上的 xsi=true 对我没有帮助。

我正在尝试使用正则表达式来处理这个问题。

```
.*xsi\:nil\=\"true\" \/\> 
```

上面的正则表达式匹配非常适合下面的输入

```
<Root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<prop1>
    <prop11>abc</prop11>
    <prop12 xsi:nil="true" />
    <prop13>def</prop13>
</prop1>
</Root> 
```

但不适用于此输入

```
<Root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><prop1><prop11>abc</prop11><prop12 xsi:nil="true" /><prop13>def</prop13></prop1></Root> 
```

所需的输出是

```
<Root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<prop1>
    <prop11>abc</prop11>
    <prop13>def</prop13>
</prop1>
</Root> 
```

更新：属性名称和级别仅在运行时已知。请参考下面的不同xml

```
<Root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<pa>
    <paa>abc</paa>
    <pab xsi:nil="true" />
    <pac>def</pac>
            <pad>
               <pada>val1</pada>
               <padb xsi:nil="true" />
               <padc>
                     <padca>vala</padca>
                     <padcb xsi:nil="true" />
               </padc>
            <pad>
</prop1>
</Root> 
```

上述 xml 的所需输出是

```
<Root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<pa>
    <paa>abc</paa>
    <pac>def</pac>
            <pad>
               <pada>val1</pada>
               <padc>
                     <padca>vala</padca>
               </padc>
            <pad>
</prop1>
</Root> 
```

有人可以帮我吗

谢谢，

埃森

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T16:59:23.307

使用此库中的 XPath：[https ://github.com/ChuckSavage/XmlLib/](https://github.com/ChuckSavage/XmlLib/)

我得到了 XElements `xsi:nil=true`：

```
XElement root = XElement.Load(file);
// or root = XElement.Parse(xml);
IEnumerable<XElement> result = root.XPath("//*[@xsi:nil={0}]", true);
result.ToList().ForEach(x => x.Remove());
root.Save(file);
// or xml = root.ToString(); 
```

我用这个 XML 对其进行了测试：

```
<Root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <prop1>
    <prop10 xsi:nil="true" />
    <prop11>abc</prop11>
    <prop12 xsi:nil="true" />
    <prop13>def</prop13>
    <prop14 xsi:nil="true" />
    <prop15>def</prop15>
    <prop16 xsi:nil="true" />
  </prop1>
</Root> 
```

并找到了所有 4 个 XElement。从那里他们被删除。

生成的 XML 是：

```
<Root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <prop1>
    <prop11>abc</prop11>
    <prop13>def</prop13>
    <prop15>def</prop15>
  </prop1>
</Root> 
```

如果您不关心`xsi:nil`是真的，并且您只想`xsi:nil`删除所有具有该属性的节点，您可以像这样构建 XPath：

```
IEnumerable<XElement> result = root.XPath("//*[@xsi:nil]"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T17:06:11.327

使用 Linq to XML

```
using System.Xml.Linq;

        var f = XDocument.Load("c:\\01.xml");
        var xsi = XNamespace.Get("http://www.w3.org/2001/XMLSchema-instance");
        var nills = from n in f.Root.Elements("prop1").Elements()
                    where n.Attribute(xsi + "nil") != null
                    select n;

        nills.ToList().ForEach(x => x.RemoveAttributes());

        f.Save("c:\\011.xml"); 
```

这产生了以下结果：

```
<?xml version="1.0" encoding="utf-8"?>
<Root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <prop1>
    <prop11>abc</prop11>
    <prop12 />
    <prop13>def</prop13>
  </prop1>
</Root> 
```

# css - 使用 CSS 为黑色图标赋予另一种颜色

> ID：10803217
> 
> 赞同：15
> 
> 时间：2012-05-29T16:35:52.823
> 
> 标签：css, masking

我看到了一些应用程序，即使包含黑色图标，也有一些应用程序如何使用 CSS 将图标转换为不同的颜色。我似乎无法重复这个过程

这是我的 back.css 文件：

```
.dashboard-buttons a {
    width: 80px; 
    height: 80px; 
    border: 1px solid #ccc; 
    margin: 0px 5px; 
    display:inline-block;
    border-radius: 10px;
    background:white; 
    text-decoration:none;
   -moz-box-shadow: inset 0 0 15px rgba(0,0,0, 0.25);
   -webkit-box-shadow: inset 0 0 15px rgba(0,0,0, 0.25);
}
.dashboard-buttons a:hover {
    text-decoration:underline;
}
.dashboard-buttons span, 
.dashboard-buttons img {
    display:inline; 
    font-size: 12px; 
    font-weight:bold;
}

.dashboard-buttons .sessions img { 
    background-color:#C60; 
}
.dashboard-buttons .sessions img {
    -webkit-mask-image:url(mobile/images/calendar2.png)
} 
```

html代码如下所示：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="stylesheet" type="text/css" href="back.css" />
         <title>West</title>
    </head>
    <body>
        <div class="dashboard-buttons">
            <a href="sessions.php" class="sessions">
                <img src="mobile/images/calendar2.png">
                <span>Sessions</span>
            </a>
        </div>
    </body>
</html> 
```

但它在我的 chrome 浏览器中不起作用。我错过了什么吗？

**附加说明** 我只需要支持现代 webkit 浏览器。无需担心 IE 或其他任何事情。

我在这里发布了我的代码[http://jsfiddle.net/ZnbF3/](http://jsfiddle.net/ZnbF3/)。第一次使用 jsfiddle，希望它能正常工作吗？如果没有，只需复制我上面已经发布的 html 文件和 css 文件。我在这个问题上附加了 calendar2.png。

![在此处输入图像描述](../Images/53e33872dbc511f197e7c6b467a3d7a0.png)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-29T17:13:15.843

您的代码不起作用，因为该`src`属性被用于在橙色版本之上显示黑色版本。您将能够通过这种方式仅使用 CSS 获得所需的结果：

```
.dashboard-buttons .sessions .img { width: 60px; height: 60px; background-color: #C60; }
.dashboard-buttons .sessions .img { -webkit-mask-image: url('http://i.stack.imgur.com/gZvK4.png'); } 
```

这是更改后的 HTML 片段：

```
<div class="dashboard-buttons">
   <a href="sessions.php" class="sessions">
       <div class="img"></div>
       <span>Sessions</span>
   </a>
</div>​ 
```

这是它的一个[工作示例](http://jsfiddle.net/WHWnp/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T16:58:56.657

Try use background image for your image, then use another div inside the first one to apply the alpha

```
 <style type="text/css">
        #image{background-image:url(/img/2012-05-24_1834.png);width:400px;height:400px;}
        #image #image_mask{background-color:red;width:400px;height:400px;opacity:0.4;filter:alpha(opacity=40); /* For IE8 and earlier */}
    </style>

</head>

<body>

        <div id="image">
                <div id="image_mask"></div>
       </div>
</body> 
```

sry for not using your code, i started to work in your awnser before you posted it

# javascript - 骨干 js 重页的 SEO

> ID：10803218
> 
> 赞同：16
> 
> 时间：2012-05-29T16:35:53.580
> 
> 标签：javascript, backbone.js, seo

我们大量使用主干来渲染我们的页面。所有数据都以 json 格式从服务器传递，html 在客户端上创建，带有骨干和胡须。这给SEO带来了很大的问题。我计划解决这个问题的一种方法是检测请求是否来自机器人，并使用 HtmlUnit 之类的东西在服务器上呈现页面并将其吐出。会喜欢一些替代的想法。也想知道我计划做的事情是否有缺陷。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T16:38:07.857

[使用Progressive Enhancement](http://en.wikipedia.org/wiki/Progressive_enhancement)和[Unobtrusive JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)构建您的网站。

当您做重要的 Ajax 工作时，请使用[历史 API](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)。

然后你就有了所有东西的真实网址，谷歌就不会有问题了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T16:44:00.193

我不一定喜欢你唯一的答案选择是重做一切以满足广泛的最佳实践。有充分的理由考虑使用不显眼的 Javascript 方法来做事，但作为一个需要 JS 的网站，也许有充分的理由这样做。让我们假设有。

如果您正在使用动态填充客户端模板的 Backbone.js 应用程序，我能想到的最佳方法是在下面的链接中。基本上，这相当于告诉无头浏览器运行一组导航命令以查看所有用户/产品/页面，并出于 SEO 原因在每一步保存一个静态 html 文件。

[使 JavaScript 生成的 HTML 可抓取的网站最不冗余的方法是什么？](https://stackoverflow.com/questions/10213185/whats-the-least-redundant-way-to-make-a-site-with-javascript-generated-html-cra/10274310#10274310)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-30T05:12:28.677

在我目前正在从事的一个项目中，我试图涵盖所有基础。骨干驱动的客户端、pushstate uris、可书签页面和 html 后备尽可能。我采用的方法是使用 Mustache 作为模板，将它们分解成漂亮的小组件以供我的主干视图使用，并以原始格式提供给客户端。当请求页面时，可以在服务器上处理模板以生成完整的页面，并将主干附加到它想要控制的元素。

这不是一个简单的设置，但到目前为止我还没有遇到任何障碍，也没有复制任何模板。我不得不为每个可用的 url 创建一个页面包装模板，因为 Mustache 不做“包装”，但我认为我应该能够通过在服务器上进行一些额外的编码来消除这些。

计划是能够在接口需要的地方将一些组件作为纯 js，而一些由服务器渲染并在需要的地方用 js 增强。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-19T16:52:44.510

如果您使用的是 node.js，请使用[rendr](https://github.com/rendrjs/rendr)

> 使用 Node.js 在客户端和服务器上呈现您的 Backbone.js 应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T11:29:49.467

使用 google ajax 抓取方案有利有弊 - 我将它用于社交网站 ( [http://beta.playup.com](http://beta.playup.com) )，结果好坏参半……

我写了一个 gem 来透明地处理这个作为 ruby​​ 用户的机架中间件（gem install google_ajax_crawler）（[https://github.com/benkitzelman/google-ajax-crawler](https://github.com/benkitzelman/google-ajax-crawler)）

阅读[http://thecodeabode.blogspot.com.au/2013/03/backbonejs-and-seo-google-ajax-crawling.html](http://thecodeabode.blogspot.com.au/2013/03/backbonejs-and-seo-google-ajax-crawling.html)

总结是，即使我成功地将渲染的 dom 快照发布到请求的搜索引擎，并且我可以使用网站管理员工具看到 Google 正在抓取该网站的 11,000 个页面，但我发现 Google 更倾向于将应用程序分类为各种状态（ urls）作为同一页面的版本，而不是作为单独的索引。尝试搜索 beta.playup.com - 即使呈现的内容在 url 之间发生了根本性的变化，也只列出了一个索引）....

# performance - Haskell：我可以在同一个惰性列表上执行多次折叠而不将列表保存在内存中吗？

> ID：10803221
> 
> 赞同：19
> 
> 时间：2012-05-29T16:36:03.443
> 
> 标签：performance, haskell, lazy-evaluation, bigdata

我的背景是生物信息学，尤其是下一代测序，但问题是通用的；所以我将以一个日志文件为例。

该文件非常大（千兆字节大，已压缩，因此无法放入内存），但易于解析（每一行都是一个条目），因此我们可以轻松编写如下内容：

```
parse :: Lazy.ByteString -> [LogEntry] 
```

现在，我想从日志文件中计算出很多统计数据。编写单独的函数是最简单的，例如：

```
totalEntries = length
nrBots = sum . map fromEnum . map isBotEntry
averageTimeOfDay = histogram . map extractHour 
```

所有这些都是形式`foldl' k z . map f`。

问题是，如果我尝试以最自然的方式使用它们，比如

```
main = do
    input <- Lazy.readFile "input.txt"
    let logEntries = parse input
        totalEntries' = totalEntries logEntries
        nrBots' = nrBots logEntries
        avgTOD = averageTimeOfDay logEntries
    print totalEntries'
    print nrBots'
    print avgTOD 
```

这将在内存中分配整个列表，这不是我想要的。我希望折叠同步完成，以便可以对 cons 单元进行垃圾收集。如果我只计算一个统计数据，就会发生这种情况。

我可以编写一个大函数来执行此操作，但它是不可组合的代码。

或者，这就是我一直在做的，我分别运行每个通道，但这每次都会重新加载和解压缩文件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T04:47:47.340

这是对 sdcvvc 的评论的评论，指的是这篇[“漂亮的折叠”文章](http://squing.blogspot.fr/2008/11/beautiful-folding.html) 太酷了——正如他所说，很漂亮——我无法抗拒添加实例`Functor`和`Applicative`其他一些现代化。比如说，同时折叠`x` `y`和`z`是一个简单的产品：`(,,) <$> x <*> y <*> z`. 我制作了一个 0.5GB 的小随机整数文件，在我生锈的笔记本电脑上计算长度、总和和最大值花了 10 秒。进一步的注释似乎没有帮助，但是编译器可以看到`Int`我感兴趣的全部内容；显而易见`map read . lines`的解析器导致了一场无望的空间和时间灾难，所以我粗暴地使用`ByteString.readInt`; 否则它基本上是一个`Data.List`过程。

```
{-# LANGUAGE GADTs, BangPatterns #-}

import Data.List (foldl', unfoldr)
import Control.Applicative 
import qualified Data.ByteString.Lazy.Char8 as B

main = fmap readInts (B.readFile "int.txt") >>= print . fold allThree
  where allThree = (,,) <$> length_ <*> sum_ <*> maximum_

data Fold b c where  F ::  (a -> b -> a) -> a -> (a -> c) -> Fold b c
data Pair a b = P !a !b

instance Functor (Fold b) where  fmap f (F op x g) = F op x (f . g)

instance Applicative (Fold b) where
  pure c = F const () (const c)
  (F f x c) <*> (F g y c') = F (comb f g) (P x y) (c *** c')
    where comb f g (P a a') b = P (f a b) (g a' b)
          (***) f g (P x y) = f x ( g y)

fold :: Fold b c -> [b] -> c
fold (F f x c) bs = c $ (foldl' f x bs)

sum_, product_ :: Num a => Fold a a
length_ :: Fold a Int
sum_     = F (+) 0 id
product_ = F (*) 1 id
length_  = F (const . (+1)) 0 id
maximum_ = F max 0 id
readInts  = unfoldr $ \bs -> case B.readInt bs of
  Nothing      -> Nothing
  Just (n,bs2) -> if not (B.null bs2) then Just (n,B.tail bs2) 
                                      else Just (n,B.empty) 
```

编辑：不出所料，因为我们必须处理上面的未装箱类型，并且从例如 2G 文件派生的未装箱矢量可以放入内存中，如果给数据明显重新编码，这一切都快两倍并且表现得更好。 Vector.Uboxed [http://hpaste.org/69270](http://hpaste.org/69270) 当然，这与具有像 Note 这样的类型无关，`LogEntry` 尽管`Fold`类型和折叠“乘法”在没有修改的情况下推广到顺序类型，因此例如与`Char`s上的操作相关联的折叠或`Word8`s 可以同时直接折叠在 ByteString 上。必须首先定义 a `foldB`，通过重新定义在各种 ByteString 模块中`fold`使用s 。`foldl'`但是`Fold`s 和产品`Fold`s 与折叠`Char`s 或`Word8`s的列表或向量相同

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-29T16:45:02.817

要多次处理惰性数据，在恒定空间中，您可以做三件事：

*   从头开始重新构建惰性列表*n*次
*   fuse *n*进入单个顺序折叠，在锁定步骤中执行每个步骤。
*   用于`par`同时进行*n*次并行遍历

这些是你的选择。最后一个是最酷的:)

# java - 无法将位图另存为 JPEG

> ID：10803222
> 
> 赞同：1
> 
> 时间：2012-05-29T16:36:11.037
> 
> 标签：java, android

我有一个用于绘图的位图对象，我想使用 JPEG 格式将其图像保存在 SDCARD 上。我有以下代码：

```
 public void saveBitmap() throws IOException {

        String path=Environment.getExternalStorageDirectory().getAbsolutePath()+"/output.jpg";
        File output=new File(path);

        BufferedOutputStream ous = null;
        try {
            ous=new BufferedOutputStream(new FileOutputStream(output));
            mBitmap.compress(CompressFormat.JPEG, 100, ous);
            ous.flush();
            ous.close();
        } finally {
            if (ous!=null) {
                try {
                    ous.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Log.e("closing", e.getMessage());
                }
            }
        }
    } 
```

但在执行此功能后，我总是可以看到黑色背景的 jpeg 文件。如果我将格式更改为 PNG，一切都会好的。我在哪里犯了错误？

绘图代码：

```
 @Override
    protected void onDraw(Canvas canvas) {

        canvas.drawColor(0x00FFFFFF);
        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
        canvas.drawPath(mPath, mPaint);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:47:36.290

jpeg 格式不支持透明度。这就是为什么它在保存时将透明度呈现为黑色。

# sql-server - 非聚集索引中的行定位符

> ID：10803226
> 
> 赞同：6
> 
> 时间：2012-05-29T16:36:21.893
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, non-clustered-index

我正在阅读`Non Clustered Index`其中说“`Nonclustered`索引仅包含索引列中的值和指向实际数据行的行定位器，而不是包含数据行本身。这意味着查询引擎必须采取额外的步骤才能找到实际数据。”

**查询**- 我不清楚`Row Locator`. 我假设它不是任何`Primary key`. 背景中发生了与`Row-Locator`唯一标识行有关的事情。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T16:37:54.363

如果表具有**唯一的聚集索引**，则“行定位器”由聚集索引的列组成。

**对于非唯一聚集索引**，“行定位器”由聚集索引的列以及 SQL Server 添加的新字段组成，以使引用唯一。新字段对用户不可见。它被称为“唯一符”，由四个字节组成。

在**没有聚集索引**（又名堆）的表中，“行定位器”是 RID 或行标识符。RID 指向一个物理位置。它由文件标识符 (ID)、页码和页面上的行号组成。

“行定位器”的一个实际结果是，为具有大量索引的表设置一个小主键是有意义的：) [此 MSDN 页面上的完整详细信息。](http://msdn.microsoft.com/en-us/library/ms177484%28v=sql.105%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T18:55:04.143

@Nilish：“候选键”是您决定将哪些列用作主键时使用的术语。而 SQL 对此一无所知。我不知道“备用键”是什么意思，只是它是另一组可能用于主键的列。

因此，SQL 中没有这些“优先级”的概念。SQL 不知道哪些列唯一标识记录，直到您通过创建主键告诉它。一旦定义了键，SQL 就会使用它们。

一个表要么没有索引（堆），要么没有唯一的聚集索引，或者有唯一的聚集索引。没有其他可能性。（主键通常是唯一的聚集索引。）

# django - Django - 调试 LiveServerTestCase 测试的最佳方法（POST 错误）

> ID：10803238
> 
> 赞同：2
> 
> 时间：2012-05-29T16:37:14.343
> 
> 标签：django, debugging, selenium

我正在从 django-nose 更新我的所有硒测试以使用 Django 1.4 的 LiveServerTestCase。问题是，我已经完全按照他们想要的方式设置了一个测试用例，但只有 GET 有效（无法发布到我的网站）。这也不是硒问题，因为它也不适用于我的 chrome 浏览器。我正在寻找调试想法和其他帮助来帮助我开始发现问题。提前致谢！

# charts - 具有 HighCharts 的多个系列时间线

> ID：10803256
> 
> 赞同：3
> 
> 时间：2012-05-29T16:38:25.750
> 
> 标签：charts, visualization, highcharts, google-visualization

在加入任何 JS 图表库之前，看看 HighCharts 是否可以使用此图表 - 非常感谢所有建议，例如建议可以明确支持我需要的替代方案。

*   X 轴是一个简单的时间线。
*   Y轴将有各种类别（标签左侧和右侧）
*   对于每个类别，我将有零到多个具有开始和结束日期的事件
*   我想有一条代表每个类别的细水平线（仅显示，无数据）
*   在每一行上，我想显示一个代表事件的粗条，从开始到结束日期。

听起来不太复杂，但我在 Tinterweb 上的任何地方都没有看到这种类型的图表示例。

在此先感谢，蒙蒂

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T13:32:09.523

*   **X 轴是一个简单的时间线。**

作为日期时间的 X 轴工作得很好。根据显示图表的时间跨度，它将自动格式化标签。[**您可以使用dateTimeLabelFormats**](http://www.highcharts.com/ref/#xAxis--dateTimeLabelFormats)和[**tickInterval**](http://www.highcharts.com/ref/#xAxis--tickInterval)修改默认格式。日期时间可以控制到毫秒。

*   **Y轴将有各种类别（标签左侧和右侧）**

您可以根据需要拥有任意数量的 Y 轴。您可以将它们放置在图表的任一侧或两侧。这是一个带有两个 Y 轴的图表[**示例**](http://www.highcharts.com/demo/combo-dual-axes)。您还可以在图表上拥有任意数量的系列。您可以将它们中的每一个绑定到特定的 Y 轴，并根据需要为它们提供所有不同的类型（例如样条、条形、饼形等）。

*   **对于每个类别，我将有零到多个具有开始和结束日期的事件**

如果您确实有一个没有任何数据的数据点，那么您可以将其指定为空。然后继续处理有数据的数据点。

*   **我想有一条代表每个类别的细水平线（仅显示，无数据）**
*   **在每一行上，我想显示一个代表事件的粗条，从开始到结束日期。**

我认为您在这里指的是网格线。如果是这样，那么您可以更改 [**gridLineWidth**](http://www.highcharts.com/ref/#xAxis--gridLineWidth)。您还可以更改颜色，如果需要，您可以添加次要网格线并根据需要对其进行操作。这可以在任一轴或两者上完成。

*   **补充笔记**

您还可以将其他数据发送到某个点以在工具提示中显示。[**如此处**](http://jsfiddle.net/6tc6T/3/)所示。在示例中，locked、unlocked 和 potential 是用户定义的变量。您可以在图表中绘制[**对象**](http://jsfiddle.net/c5gSE/)。您可以使您的图表可[**缩放**](http://jsfiddle.net/rJrnm/)。您可以[**向下钻取**](http://www.highcharts.com/demo/column-drilldown)图表以显示基于数据元素的其他数据。而这样的例子不胜枚举。你可以做很多事情。如果一切都失败了，您可以添加自己的自定义事件和函数来控制其他任何内容。

如果我对任何内容有疑问，我会通过[**参考**](http://www.highcharts.com/ref)或[**演示**](http://www.highcharts.com/demo/)进行搜索。如果我仍然无法弄清楚如何做某事，我会在这里询问并得到适合我的答案。

# html - 防止 HTML 内容重叠

> ID：10803257
> 
> 赞同：0
> 
> 时间：2012-05-29T16:38:30.650
> 
> 标签：html, css, navigation

我有以下代码： http: [//jsfiddle.net/pefGx/1/](http://jsfiddle.net/pefGx/1/)并且由于某种原因导航区域隐藏了内容，而不是仅仅让它进入下一行。我需要在那里输入什么样的代码才能让单词在它周围移动。我曾尝试将 ul 放在 div 中，但无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T16:40:37.030

删除`position: absolute;`.

内容不会围绕从正常流程中取出的内容（这是绝对定位所做的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T16:42:05.897

您只需`position:absolute;`要从导航类中删除即可。一切都会好起来的。

这是您更新的 jsfiddle [http://jsfiddle.net/pefGx/4/](http://jsfiddle.net/pefGx/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T18:07:58.290

正如其他人所说，删除绝对位置。然后，您可以根据需要使用边距属性将其向上移动。这是你的 JS Fiddle，导航向上移动了 40px

[http://jsfiddle.net/pefGx/5/](http://jsfiddle.net/pefGx/5/)

关键线是css中的margin-top。

# php - php中具有无限参数的函数

> ID：10803259
> 
> 赞同：2
> 
> 时间：2012-05-29T16:38:50.727
> 
> 标签：php, function

我只想制作一个类似的功能`array_merge ( array $array1 [, array $... ] )` 或简单的功能`myfunc($st1, $st2, $st3, $st4, $st5, etc)`

```
function make_my_merge($) {
     ..... operation to be performed ......
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T16:40:26.373

用于[`func_get_args()`](http://php.net/manual/en/function.func-get-args.php)访问传递给函数的所有参数（作为数组）。此外，您可以使用[`func_num_args()`](http://www.php.net/manual/en/function.func-num-args.php)来获取传入的所有参数的计数。

```
function make_my_merge () {
    if ( func_num_args() ) {
        $args = func_get_args();
        echo join( ", ", $args );
    }
}

// Foo, Bar
make_my_merge("Foo", "Bar");

// Foo, Bar, Fizz, Buzz
make_my_merge("Foo", "Bar", "Fizz", "Buzz"); 
```

键盘：[http ://codepad.org/Dk7MD18I](http://codepad.org/Dk7MD18I)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T16:41:04.457

使用[`func_get_args()`](http://us.php.net/manual/en/function.func-get-args.php)：

```
function make_my_merge() {
  $args = func_get_args();

  foreach ($args as $arg) {
    echo "Arg: $arg\n";
  }

} 
```

可以看出，您通过`func_get_args()`函数将所有参数传递给您的函数，该函数返回一个数组，您可以迭代使用`each`以处理传递的每个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T16:42:54.893

这应该会有所帮助：[PHP 函数变量参数](http://www.php.net/manual/en/functions.arguments.php#functions.variable-arg-list)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T16:48:20.213

你永远不会知道你想要多少个参数......所以你不能在我的观点中定义具有无限参数的精确函数。但我建议在一个函数中传递 2 个参数，一个是数组中的索引或值的数量，另一个是数组本身......它是这样的

```
<?php
$arr = array('val1','val2','val3',.....);
$count = count($arr);
$result = your_function($count,$arr);
?> 
```

您的函数看起来像这样，它位于顶部或其他 php 文件或类的某个位置

```
<?php
function your_function($count,$arr)
{
   //Here you know the number of values you have in array as $count
   //So you can use for loop or others to merge or for other operations
   for($i=0;$i<$count;$i++)
   {
          //Some operation
   }
}
?> 
```

# ipad - 设备不支持开发

> ID：10803260
> 
> 赞同：4
> 
> 时间：2012-05-29T16:38:53.423
> 
> 标签：ipad, provisioning, xcode-organizer

我的 iDevice 已连接到我的计算机，并且我一直在测试我的应用程序在其上构建。直到最近它一直运行良好。我进入我的 iPad 并删除了一个未使用的配置文件，并在 Organizer 中生成警告。此时，我决定重启我的设备（与开发无关的原因），当设备完成重启并连接时，**Organizer**会显示以下消息：

![无法支持开发错误消息](../Images/7ce7eec0c5900eea75b645b1c0cf1405.png)

“**不能支持发展**”是什么意思？我需要恢复我的设备吗？

我也试过这个想法，它以某种方式断开了：

![将设备添加到配置门户](../Images/9cddb52dfc7ec9030386dbb26a3922c0.png)

此时，Organizer 询问我的登录信息（使用我的开发 Apple ID 和密码）并告诉我（在 5-6 次尝试后）我的密码和登录不正确，即使我可以上网并使用这些确切的凭据登录.

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T19:24:51.957

重新启动手机和 Xcode，然后重新连接您的设备并确保按下管理器中的“用于开发”按钮。如果不起作用，请尝试删除然后重新添加您的设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T16:20:04.760

完美的！重启 iDevice 和 XCode。

如果这不起作用，请尝试在 developer.apple.com 上重置设备

# objective-c - 有没有办法在 AFNetworking 的后台线程上构建模型对象？

> ID：10803261
> 
> 赞同：2
> 
> 时间：2012-05-29T16:38:53.600
> 
> 标签：objective-c, ios, afnetworking

我正在构建一个 iOS 应用程序，我想知道是否有一种方法可以根据我在后台线程上的请求结果构建我的模型对象。AFHTTPClient 请求方法上的成功回调/块似乎都是在主线程上完成的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T15:08:35.470

使用`dispatch_async`：

```
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^(void) {
        // Do model serialization here, e.g.: 
        // NSMutableSet *mutableRecords = [NSMutableSet set];
        // for (NSDictionary *attributes in [JSON valueForKey:@"records"]) {
        //  [mutableRecords addObject:[[YourModelClass alloc] initWithDictionary:attributes]];
        // }

        dispatch_async(dispatch_get_main_queue(), ^(void) {
            // Execute callback passing, e.g.:
            // block(mutableRecords);
        });
    }); 
```

这将在请求操作的成功块中。该`block`变量将是传递给发出请求的方法的参数。有关更多信息，请参阅 iOS 示例项目。希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T15:57:51.310

AFHTTPRequestOperation 还有一个 'successCallbackQueue' 属性，默认设置为主队列，但您可以将其调整为您想要的任何队列。

# session - 从长时间运行的会话 bean 方法返回状态

> ID：10803262
> 
> 赞同：1
> 
> 时间：2012-05-29T16:39:02.240
> 
> 标签：session, jsf, ejb, status, long-running-processes

我正在使用 JSF 2.0 和在 Glassfish 3.1.2 上运行的 RichFaces 4.2.2。我已经创建了本地无状态会话 bean，它具有一个将由 JSF 托管 bean 调用的长时间运行的方法。

我希望能够将会话 bean 中的状态信息推送回托管 bean，以便我可以使用 RichFaces a4j:push 之类的东西将状态信息发送到浏览器。我相信这需要对会话 bean 方法的调用是异步的。当会话 bean 处理方法调用时，是否有将信息从会话 bean 推送回前端的模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:48:34.047

State**less** session beans (SLSB) are not supposed to hold any state (read: instance variables which are altered by the methods) because they are shared between all clients applicationwide. So they are useless to you if you need a session bean with some state which you can update during the process and which the client can request anytime. You need a state**ful** session bean (SFSB) instead. If you inject the SFSB in a session scoped JSF managed bean, then you'll be able to request the proper status from it and push it to the client throughout the HTTP session.

To understand the difference between SLSB and SFSB better, you may find this answer helpful: [JSF request scoped bean keeps recreating new Stateful session beans on every request?](https://stackoverflow.com/questions/8887140/jsf-request-scoped-bean-keeps-recreating-new-stateful-session-beans-on-every-req/8889612#8889612)

# sql - 如何持续交付基于 SQL 的应用程序？

> ID：10803268
> 
> 赞同：0
> 
> 时间：2012-05-29T16:39:27.463
> 
> 标签：sql, database, continuous-deployment

我希望将持续交付概念应用于我们正在构建的 Web 应用程序，并想知道是否有任何解决方案可以保护数据库免受意外错误提交。例如，擦除整个表而不是单个记录的错误。

根据持续交付理论，如何限制这个问题的影响，其中应用程序逐渐部署在基础设施的各个部分上？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:33:42.777

您担心的是数据库中发生了不良数据。解决方案是使用所有事务的完整日志记录，以便您可以退出您想要的事务。这通常用于完整备份/增量备份/完整日志记录的上下文中。

例如，假设您有完整的日志记录，SQL Server 允许您恢复到某个时间点 (http://msdn.microsoft.com/en-us/library/ms190982(v=sql.105).aspx)。

如果您正在创建和删除表，就日志所需的空间而言，这可能是一个昂贵的解决方案。但是，它可能会满足您的开发需求。

您可能会发现，对于这样的应用程序来说，完整日志记录太昂贵了。在这种情况下，您可能希望进行定期备份（每天？每小时？）并保留这些备份。为此，我发现 LightSpeed 是一款用于快速高效备份的好产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:02:19.633

首先，你不能仅仅通过查看什么是糟糕的 SQL 语句来判断。您可能想要删除表的全部内容。因此，物理上不可能拥有检测意图的自动化工具。

因此，为了保护您的数据库，首先要确保您处于完全恢复（不是简单）模式，并且每晚进行一次完全备份，并且每 15 分钟左右进行一次事务日志备份。现在，无论过程中断多么严重，您都不会丢失太多信息。您的 dbas 应经过培训，以便能够及时恢复到某个时间点。如果您没有任何 dbas，我建议您可以做的最好的事情来保护您的数据是雇用一些。这在任何重要的数据库环境中都是不可协商的，如果您的数据对业务至关重要，那么没有训练有素、经验丰富的 dbas 是非常危险的。

接下来，您需要像对待任何其他代码一样对待 SQL，它应该在脚本的源代码控制中。如果您非常担心意外删除，请编写删除脚本以将所有删除复制到临时表并每周左右删除一次临时表的内容。在代码审查中强制执行此约定。或者更好的是设置一个贯穿触发器的审计流程。审核完所有记录后，无需恢复数据库即可轻松恢复 150 次意外删除。我永远不会考虑在没有审核的情况下拥有任何企业应用程序。

所有 SQL 脚本无一例外都应该像其他代码一样进行代码审查。所有 SQL 脚本都应在 QA 上进行测试并通过，然后再进行生产。这将大大减少出错的可能性。任何开发人员都不应该拥有生产的写入权限，只有 dbas 应该拥有。因此，应该编写每个脚本，以便可以运行，而不是一次运行一个块，您可能会不小心忘记突出显示 where 子句。培训您的开发人员在脚本中正确使用事务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-16T10:40:33.880

通常采用的策略之一是记录增量 sql 语句而不是集体模式生成，以便您可以在更精细的级别控制更改：

```
ex: 
change 1:
UP:
Add column
DOWN:
Remove column

change 2:
UP:
Add trigger
DOWN:
Remove trigger 
```

一旦像这样增量捕获更改，您就可以拥有一个简单但高效的脚本来从任何版本升级（UP）到任何版本，而不必担心发生的更改。当更改 # 链接到 build 时，它变得更加有效。当您部署构建时，数据库也会自动升级（UP）或降级（DOWN）到该特定构建。

我们在 CloudMunch 有一个管道应用程序可以做到这一点。

# javascript - JqG rid 高级搜索 - 保存搜索

> ID：10803275
> 
> 赞同：0
> 
> 时间：2012-05-29T16:40:03.420
> 
> 标签：javascript, jquery, jqgrid

我正在创建一个网站并在我的页面上有一个 jqGrid。我通过向调用 jqGrid 'searchGrid' 函数的导航网格（寻呼机）添加自定义按钮来使用高级搜索功能。

```
$('#My_Grid_Id').jqGrid(settingsObject)
.navGrid('My_Grid_Id_toolbar1',{del:false,add:false,edit:false,refresh:false,search:false})
 .navButtonAdd('My_Grid_Id_toolbar1', 
 { 
    caption: 'Search', 
    buttonicon: 'ui-icon-search', 
    title: 'Search', 
    onClickButton: function() { 
        $(gridSelector).jqGrid ('searchGrid', {
            caption: 'Search',
            multipleSearch:true, 
            overlay: false,
            multipleGroup:true,
            recreateFilter: true
         });
     } 
}); 
```

我希望能够在用户离开页面时保存搜索设置，以便在用户返回时重新加载它们。我几乎有了一个可行的解决方案，但是在我保存并重新加载搜索设置后，搜索对话框窗口上的“重置”按钮无法按预期工作。搜索设置似乎在后台重置，但窗口没有刷新，网格仍然显示旧结果。

解释一下。我通过使用 ajax 调用将 potdata.filters 参数发送到服务器来捕获窗口卸载事件并存储搜索设置。然后我将数据存储在一个 cookie 中，以后可以加载。

```
$(window).unload( function () {
    $.ajax({
        type: "POST",
        url: saveUrl,
        dataType: 'json',
        traditional: true,
        async: false,
        data: { 
            searchSettings: $('#My_Grid_Id').getGridParam('postData').filters       
        }
    });
}); 
```

当我重新加载网格时，我检查我的 cookie 是否有值，然后将保存的过滤器插入到构造函数中的网格中。

```
postData: { 
    filters: mySavedSearchSettings                  
}, 
```

此时网格运行良好，搜索已保存，结果按预期显示。当我打开搜索窗口对话框时，搜索选项会按预期显示。但是当我单击“重置”按钮时，窗口没有正确更新，网格结果也没有。我试图将 onclick 事件添加到重置按钮以手动重置搜索，但似乎没有任何反应。

```
afterShowSearch: function() {
    $('.fm-button-icon-left').click(function(){
        $('#My_Grid_Id').jqGrid('setGridParam', { search: false, postData: { "filters": ""} }).trigger("reloadGrid");
    });
} 
```

任何人都可以提供任何帮助吗？我想我已经接近了，我只需要以某种方式重置搜索窗口然后重新加载网格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:08:14.397

答案原来是两件事。

首先，网格没有重新加载正确的数据，因为我没有正确处理服务器端代码。我最近开始使用 php，我遇到了一个错误，即代码没有正确识别过滤器发布数据为空/空。

其次，我可以通过调用“searchGrid”函数重新打开它来重置搜索窗口对话框。因此，在显示搜索后，我向重置按钮添加了一个点击事件，如下所示：-

```
$(gridSelector).navButtonAdd(gridSelector + '_toolbar1', 
    { 
        caption: 'Search', 
        buttonicon: 'ui-icon-search', 
        title: 'Search', 
        onClickButton: function() { OpenAdvancedSearchDialog(gridSelector); } 
    });
}

function OpenAdvancedSearchDialog(gridSelector) {
    $(gridSelector).jqGrid ('searchGrid', {
        caption: 'Search',
        multipleSearch:true, 
        overlay: false,
        multipleGroup:true,
        recreateFilter: true,
        afterShowSearch: function() {
            $('.fm-button-icon-left').click(function(){
                OpenAdvancedSearchDialog(gridSelector);
            });
       }
    });
} 
```

# matlab - NN中“偏见”的含义和意义是什么？

> ID：10803279
> 
> 赞同：1
> 
> 时间：2012-05-29T16:40:28.900
> 
> 标签：matlab, neural-network

我是 Neual Networks 的新手，我想我不完全理解 Matlab 的 NN 中的 'bias' 参数的作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:45:29.590

它只是意味着神经元计算中的一个附加项。通常你有一个神经元的输入向量`x`，然后你执行一个权重的点积，`w`。然后添加偏置项，`b`并应用非线性映射。

数字（每个神经元）是训练的`b`一部分，并且会在训练期间改变（除非你在训练中特别禁用它，但我知道没有理由这样做。）

术语*偏差*可能仅仅是因为它是神经元激活（来自加权输入）之外的附加值。一旦经过训练，偏差就是一个不依赖于神经元输入的固定项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T16:43:58.567

神经元的偏差基本上是一个不会改变的额外输入值。它被添加到正常输入中以获得神经元的总输入。

# c# - 更改 mvc 中的操作 URL

> ID：10803290
> 
> 赞同：0
> 
> 时间：2012-05-29T16:41:43.173
> 
> 标签：c#, asp.net-mvc, url-rewriting, asp.net-mvc-routing

有没有办法在不改变动作或调用的控制器的情况下更改 mvc 中给定动作的 URL？

如果是这样，如何在以下 MapRoute 上完成：

```
routes.MapRoute(
            "Estate.CloseDeal",
            "Estate/CloseDeal/{groupId}/{paymentType}/{mortgageValue}/{province}",
            new { controller = "Estate", action = "CloseDeal" },
            new { groupId = "\\d+", paymentType = "\\d+", mortgageValue = "\\d+", province = "\\d+" }
        ); 
```

所需的 URL 是：“.../estate-support/deal-closing/...”。目前它显示为“.../Estate/CloseDeal/...”

链接到此操作的按钮如下所示：

```
 <button detail="@Url.Action("CloseDeal", new { groupId = info.GroupId })" class="orange"> 
```

编辑1：

尝试更改为：

```
routes.MapRoute(
        "Estate.CloseDeal",
        "estate-support/deal-closing/{groupId}/{paymentType}/{mortgageValue}/{province}",
        new { controller = "Estate", action = "CloseDeal" },
        new { groupId = "\\d+", paymentType = "\\d+", mortgageValue = "\\d+", province = "\\d+" }
    ); 
```

此返回错误：您要查找的资源已被删除、名称已更改或暂时不可用。

编辑2：

更改第二个字符串适用于除此之外的所有路由 - 不同之处在于，此路由具有附加参数（groupID、paymentType 等）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T16:44:00.010

只需`"Estate/CloseDeal"`用 - 替换第二个字符串`"estate-support/deal-closing"`即可。

在这种特殊情况下，这很容易，因为路由没有通过控制器和操作名称参数化 - 即路由中没有`"{controller}/{action}"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-07T14:30:48.597

[您还可以使用RouteAttribute](https://msdn.microsoft.com/en-us/library/system.web.mvc.routeattribute%28v=vs.118%29.aspx)将路由直接应用于操作（如下所示）或控制器类本身

```
// Your controller class
// (You could add a Route attribute here)]
public class Estate
{
    // Directly apply a route (or 2?!) to this action
    [Route("estate-support/deal-closing")]
    [Route("clinched")] // You can add multiple routes if required
    public ActionResult CloseDeal()
    {
        ...
    }

    // And of course you can parameters to the route too, such as:
    [Route("customers/{customerId}/orders/{orderId}")]
    public ActionResult GetOrderByCustomer(int customerId, int orderId)
    {
        ...
    }

    ...
} 
```

为此，您需要通过调用[MapMvcAttributeRoutes](https://msdn.microsoft.com/en-us/library/system.web.mvc.routecollectionattributeroutingextensions.mapmvcattributeroutes%28v=vs.118%29.aspx)来启用它`RouteConfig.cs`：

```
public static void RegisterRoutes(RouteCollection routes)
{
    // Enable mapping by attibute in the controller classes
    routes.MapMvcAttributeRoutes();
    ...
} 
```

来自 docs.microsoft.com 的更多信息：[ASP.NET 中的属性路由](https://docs.microsoft.com/en-us/aspnet/web-api/overview/web-api-routing-and-actions/attribute-routing-in-web-api-2)
和此处：[C# Corner - MVC 中的路由属性](http://www.c-sharpcorner.com/article/route-attribute-in-Asp-Net-mvc/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T17:24:05.933

您需要更新`Url.Action`调用的参数或让您路由您想要呈现以匹配 Url.Action 调用的参数（即，如果使用使用名称的 Url>Action 覆盖，名称应该匹配）。

请注意，如果您希望人们可以将旧 URL 添加到收藏夹中，您可能希望通过添加路由将简单地重定向到新 URL 将旧 URL 映射到新 URL。

# jquery - 如何将 jquery.post 中的数据发送到使用 ViewModel 作为参数的 mvc 控制器？

> ID：10803292
> 
> 赞同：27
> 
> 时间：2012-05-29T16:41:47.570
> 
> 标签：jquery, asp.net-mvc, visual-studio-2010, c#-4.0

我正在用 asp.net mvc 编写应用程序。我有带有动作的控制器，它使用一些 ViewModel 作为参数。如何使用 jquery post 将表单数据发送到该 mvc 控制器。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-29T16:55:35.790

```
$.post("Yourcontroller/YourAction", { FirstName : $("#txtFirstName").val(), LastName : $("#txtLastName") } ,function(data){
  //do whatever with the response

}); 
```

我们传递的 ViewModel 属性名称和参数应该相同。即：您的视图模型应该有 2 个属性，称为`FirstName`和`LastName`他的一样

```
public class PersonViewModel
{
  public string FirstName { set;get;}
  public string LastName { set;get;}
  // other properties

} 
```

你的 Post 操作方法应该接受一个类型的参数`PersonViewModel`

```
[HttpPost]
public ActionResult YourAction(PersonViewModel model)
{
  //Now check model.FirstName 
} 
```

或者，如果您的视图是对 PersonViewModel 的强类型，您可以使用 jQuery 方法简单地将序列化的表单发送到 action`serialize`方法

```
$.post("Yourcontroller/YourAction", $("#formId").serialize() ,function(data){
  //do whatever with the response

}); 
```

**编辑：根据评论**

`Serialize`也会照顾孩子的财产。假设你有一个像这样的名为 Profession 的类

```
public class Profession
{
    public string ProfessionName { set; get; }
} 
```

你的 PersonViewModel 有一个类型的属性`Profession`

```
public class PersonViewModel
{
    //other properties
    public Profession Profession { set; get; }
    public PersonViewModel()
    {
        if (Profession == null)
            Profession = new Profession();
    }
} 
```

如果您从视图中填充这些数据，您将在 HttpPost Action 方法中获得这些数据。

![在此处输入图像描述](../Images/9e57487c5cd8c7f167daef373effa391.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-29T16:47:03.817

```
var myData = {
              Parameter1: $("#someElementId").val(),
              Parameter2: $("#anotherElementId").val(),
              ListParameter: { /* Define IEnumerable collections as json array as well */}
              // more params here
             }  
$.ajax({
    url: 'someUrl',
    type: 'POST',
    dataType: "json",
    contentType: 'application/json',
    data: JSON.stringify(myData)
});  

[HttpPost]
public JsonResult Create(CustomViewModel vm)
{
    // You can access your ViewModel like a non-ajax call here.
    var passedValue = vm.Parameter1;
} 
```

您还可以序列化整个表单并将其传递给控制器​​的操作方法。在你的ajax调用中：

```
data: $('form').serialize() 
```

# jquery - 如何在只读字段上禁用 jquery 验证？

> ID：10803294
> 
> 赞同：5
> 
> 时间：2012-05-29T16:41:49.743
> 
> 标签：jquery, asp.net-mvc-3, jquery-validate, readonly-attribute

我正在使用的产品使用 JQuery 验证和 MVC3 在幕后工作。我有一个字段，我将其切换为只读（基于下拉列表的值是否> 0）。

诀窍是，该字段非只读时需要必填，只读时无论是否有数据都需要提交无误。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-29T16:59:49.580

```
$.validator.setDefaults({
    ignore: ':hidden, [readonly=readonly]'
}); 
```

参数的默认`ignore`值为`":hidden"`。通过使用上面的代码重置默认值，您可以确保 jquery validate 仍然不会作用于隐藏的表单元素，但也不会作用于具有`readonly="readonly"`属性的元素。

**回复评论**

这听起来很奇怪，您可能需要发布一些代码才能获得更多帮助。您可以尝试删除验证错误的一件事是在切换 readonly 属性时手动验证表单，可能是这样的：

```
$('#the_text_box').attr('readonly', 'readonly');
$.validator.setDefaults(':hidden');
$('form').valid();
$.validator.setDefaults(':hidden, [readonly=readonly]'); 
```

您也可以在初始页面加载期间执行类似的操作，以避免即时验证错误消息。

```
$.validator.setDefaults(':hidden, [readonly=readonly]');
$('form').valid(); 
```

# java - Bean 名称“索引”的 BindingResult 和普通目标对象都不能用作请求属性

> ID：10803295
> 
> 赞同：1
> 
> 时间：2012-05-29T16:41:50.380
> 
> 标签：java, spring, spring-mvc

尝试访问控制器时出现问题。

这是我的控制器：

```
@Controller
@RequestMapping("/index.htm")
public class LoginController {

    @Autowired
    private UserService userService;

    @RequestMapping(method = RequestMethod.GET)
    public String showForm(Map model) {
        model.put("index", new LoginForm());
        return "index";
    }

    @RequestMapping(method = RequestMethod.POST)
    public String processForm(LoginForm loginForm, BindingResult result,
                              Map model) {

        if (result.hasErrors()) {
            HashMap<String, String> errors = new HashMap<String, String>();
            for (FieldError error : result.getFieldErrors()) {
                errors.put(error.getField(), error.getDefaultMessage());
            }
            model.put("errors", errors);
            return "index";
        }

        List<User> users = userService.getUsers();
        loginForm = (LoginForm) model.get("loginForm");

        for (User user : users) {
            if (!loginForm.getEmail().equals(user.getEmail()) || !loginForm.getPassword().equals(user.getPassword())) {
                return "index";
            }
        }

        model.put("index", loginForm);
        return "loginsuccess";
    }

} 
```

这是我的表格：

```
 <form:form action="index.htm" commandName="index">

        <table border="0" cellspacing="12">
            <tr>
                 <td>
                     <spring:message code="application.loginForm.email"/>
                 </td>
                 <td>
                    <form:input path="email"/>
                 </td>
                 <td class="error">
                    <form:errors path="email"/>
                 </td>
            </tr>
            <tr>
                 <td>
                     <spring:message code="application.loginForm.password"/>
                 </td>
                 <td>
                    <form:password path="password"/>
                 </td>
                 <td class="error">
                    <form:errors path="password"/>
                 </td>
            </tr>
            <tr>
                 <td>
                     <input type="submit" value="Submit"/>
                 </td>
            </tr>
        </table>

    </form:form> 
```

在提交表单时，我收到了这个异常：

```
java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'index' available as request attribute. 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T16:53:41.830

这是因为你只是在底部做这件事

```
model.put("index", loginForm); 
```

如果您从验证错误或成功返回，则模型映射中没有名为“index”的支持对象，因此您的表单标签`commandName="index"`适合。

一个常见的解决方案是简单地这样做

```
@ModelAttribute("index")
public LoginForm getLoginForm() {
  return new LoginForm();
} 
```

那么总会有一个存在，您可以从 GET 方法中添加它。

# bash - 修改 xargs 中的替换字符串

> ID：10803296
> 
> 赞同：70
> 
> 时间：2012-05-29T16:41:51.147
> 
> 标签：bash, xargs

当我使用时，`xargs`有时我不需要显式使用替换字符串：

```
find . -name "*.txt" | xargs rm -rf 
```

在其他情况下，我想指定替换字符串以执行以下操作：

```
find . -name "*.txt" | xargs -I '{}' mv '{}' /foo/'{}'.bar 
```

上一个命令会将当前目录下的所有文本文件移动到`/foo`其中，并将扩展名附加`bar`到所有文件中。

如果我不想将一些文本附加到替换字符串，而是想修改该字符串，以便可以在文件的名称和扩展名之间插入一些文本，我该怎么做？例如，假设我想做与上一个示例相同的操作，但文件应该重命名/从`<name>.txt`to `/foo/<name>.bar.txt`（而不是`/foo/<name>.txt.bar`）移动。

**更新**：我设法找到解决方案：

```
find . -name "*.txt" | xargs -I{} \
    sh -c 'base=$(basename $1) ; name=${base%.*} ; ext=${base##*.} ; \
           mv "$1" "foo/${name}.bar.${ext}"' -- {} 
```

但我想知道是否有更短/更好的解决方案。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2014-02-21T08:10:11.483

以下命令使用 xargs 构造移动命令，替换第二次出现的 '.' 使用 '.bar.'，然后使用 bash 执行命令，在 mac OSX 上工作。

```
ls *.txt | xargs -I {} echo mv {} foo/{} | sed 's/\./.bar./2' | bash 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2016-03-09T21:40:50.893

可以一次性完成（在 GNU 中测试），避免使用临时变量赋值

```
find . -name "*.txt" | xargs -I{} sh -c 'mv "$1" "foo/$(basename ${1%.*}).new.${1##*.}"' -- {} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-05-29T19:48:31.713

在这种情况下，`while`循环会更具可读性：

```
find . -name "*.txt" | while IFS= read -r pathname; do
    base=$(basename "$pathname"); name=${base%.*}; ext=${base##*.}
    mv "$pathname" "foo/${name}.bar.${ext}"
done 
```

请注意，您可能会在不同的子目录中找到具有相同名称的文件。你对被覆盖的重复项感到满意`mv`吗？

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-05-30T19:48:32.287

如果你安装了 GNU Parallel [http://www.gnu.org/software/parallel/](http://www.gnu.org/software/parallel/)你可以这样做：

```
find . -name "*.txt" | parallel 'ext={/} ; mv -- {} foo/{/.}.bar."${ext##*.}"' 
```

观看 GNU Parallel 的介绍视频以了解更多信息： [https ://www.youtube.com/playlist?list=PL284C9FF2488BC6D1](https://www.youtube.com/playlist?list=PL284C9FF2488BC6D1)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-29T18:31:15.710

如果你被允许使用 bash/sh 以外的东西，而且这只是一个花哨的“mv”……你可以试试古老的“rename.pl”脚本。我一直在 Linux 上使用它，在 Windows 上使用 cygwin。

[http://people.sc.fsu.edu/~jburkardt/pl_src/rename/rename.html](http://people.sc.fsu.edu/~jburkardt/pl_src/rename/rename.html)

```
rename.pl 's/^(.*?)\.(.*)$/\1-new_stuff_here.\2/' list_of_files_or_glob 
```

您还可以使用“-p”参数来重命名.pl，让它告诉您它会做什么，而无需实际执行。

我刚刚在我的 c:/bin （cygwin/windows 环境）中尝试了以下操作。我使用了“-p”，所以它吐出了它会做什么。这个例子只是拆分了基础和扩展，并在它们之间添加了一个字符串。

```
perl c:/bin/rename.pl -p 's/^(.*?)\.(.*)$/\1-new_stuff_here.\2/' *.bat

rename "here.bat" => "here-new_stuff_here.bat"
rename "htmldecode.bat" => "htmldecode-new_stuff_here.bat"
rename "htmlencode.bat" => "htmlencode-new_stuff_here.bat"
rename "sdiff.bat" => "sdiff-new_stuff_here.bat"
rename "widvars.bat" => "widvars-new_stuff_here.bat" 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-05-01T12:33:23.057

> 文件应重命名/`<name>.txt`移至`/foo/<name>.bar.txt`

您可以使用`rename`实用程序，例如：

```
rename s/\.txt$/\.txt\.bar/g *.txt 
```

^(提示：替换语法类似于`sed`or `vim`。)

然后使用以下命令将文件移动到某个目标目录`mv`：

```
mkdir /some/path
mv *.bar /some/path 
```

要根据文件名的某些部分将文件重命名为子目录，请检查：

> `-p`//在目标路径`--mkpath`中`--make-dirs`创建任何不存在的目录。

* * *

测试：

```
$ touch {1..5}.txt
$ rename --dry-run "s/.txt$/.txt.bar/g" *.txt
'1.txt' would be renamed to '1.txt.bar'
'2.txt' would be renamed to '2.txt.bar'
'3.txt' would be renamed to '3.txt.bar'
'4.txt' would be renamed to '4.txt.bar'
'5.txt' would be renamed to '5.txt.bar' 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-07-23T16:50:52.217

再加上[维基百科的文章](https://en.wikipedia.org/wiki/Xargs)令人惊讶地提供了丰富的信息

[例如：](https://en.wikipedia.org/wiki/Xargs#Shell_trick)

> ### 贝壳把戏
> 
> 实现类似效果的另一种方法是使用 shell 作为启动命令，并处理该 shell 中的复杂性，例如：

```
$ mkdir ~/backups
$ find /path -type f -name '*~' -print0 | xargs -0 bash -c 'for filename; do cp -a "$filename" ~/backups; done' bash 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-14T08:54:15.723

受上面@justaname 回答的启发，这个包含 Perl 单行代码的命令将执行此操作：

`find ./ -name \*.txt | perl -p -e 's/^(.*\/(.*)\.txt)$/mv $1 .\/foo\/$2.bar.txt/' | bash`

# asp.net - 预填表单元素和帖子

> ID：10803299
> 
> 赞同：0
> 
> 时间：2012-05-29T16:42:07.467
> 
> 标签：asp.net, http-post

我们有我需要从我的应用程序链接的第三方应用程序。对于那些第三方网站，我在哪里有我们的用户名和密码（它们是公共网站）。当用户点击这些链接时，我们需要预先填写用户名和密码并提交表单。就像用户的单点登录体验一样。有没有人试过这样做我们怎么能做到。我们需要用 iframe 还是用 DEV 打开网页？

ASP.NET、Jquery 和 Java Script 我们的平台。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T23:15:46.087

我最终将登录页面添加到我的项目中，并在最后使用 jquery 发布了填写用户名和密码的表单。不是很好的解决方案，但效果很好

# asp.net - ASP.NET 关于 Mono 可扩展性

> ID：10803300
> 
> 赞同：3
> 
> 时间：2012-05-29T16:42:12.727
> 
> 标签：asp.net, performance, mono, scalability

有谁知道任何获得大量流量的 ASP.NET Mono 生产网站 - 每天 1 亿次页面浏览量，每秒 100-300 次页面浏览量等？我在此处和 HighScalability.com 网站上进行了搜索，但没有找到任何内容。

* * *

为了澄清我的问题 - 我想知道如果我将我的 ASP.NET/C# 网站部署在 Mono/Apache/Linux 堆栈上，它是否会因为仅仅保持部署在 .NET/IIS/Windows Server 堆栈上而遭受性能打击？如果我要在两台硬件配置完全相同的独立服务器上部署相同的应用程序，一台服务器运行 .NET/IIS/Windows Server，另一台运行 Mono/Apache/Linux，然后进行一些基准测试（负载测试、压力测试）测试等），数字是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-21T04:01:58.687

您不能期望 ASP.NET 在 Mono 和 Linux 上的性能数字与您在 Windows 上所期望的相同。但是，随着 vNext（ASP.NET 的下一个版本）的出现，情况将有所改变，其中 Mono 和 Linux 被吹捧为一等公民。

这是一篇技术力量基准测试文章，其中包含各种 Web 框架的性能数据，包括单声道 - [http://www.techempower.com/benchmarks/](http://www.techempower.com/benchmarks/)

正如您所见，Mono 上的 ASP.NET 在任何类别中都远不及顶部。但是，这不应该成为在 Mono 上选择 ASP.NET 的障碍。这实际上取决于您的一组要求。即您试图满足每秒给定数量的请求的响应时间。Mono 上的 ASP.NET 很可能足以满足您的一组要求。除此之外，您和您的团队将通过使用熟悉的 C# 和 .NET 获得任何生产力提升，Mono 上的 ASP.NET 可能非常适合您。

# php - 脸书消息通知

> ID：10803302
> 
> 赞同：-1
> 
> 时间：2012-05-29T16:42:18.697
> 
> 标签：php, jquery, ajax

我试图向用户发送有关新消息的通知。这是我的代码，但什么也没发生：

```
<span id"not"><?php echo $nbmsg?>

function updatecontent(){
$('#not span').load('index.php'); 
} 

setInterval("updatecontent()", 5000 ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:45:30.633

不需要跨度，删除`$("#not span");`表示跨度在跨度内没有id的跨度

```
function updatecontent(){
   $('#not').load('index.php'); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T16:46:51.693

修复以下错误：

1.  `<span id"not">` **=>** `<span id="not">`
2.  `$('#not span').load('index.php');` **=>** `$('#not').load('index.php');`

并检查控制台以查看您发送的请求发生了什么。

你应该改变的最后一件事是：

```
setInterval("updatecontent()", 5000 ); 
```

到：

```
setInterval(updatecontent, 5000 ); 
```

这不是一个错误，但它可以让你从`eval`.

# c++ - oracle::occi::ResultSet::next() 使我的程序崩溃

> ID：10803306
> 
> 赞同：0
> 
> 时间：2012-05-29T16:42:37.257
> 
> 标签：c++, oracle, occi

我有一个在 Windows 7 上运行的 64 位 C++ 服务器应用程序，当它在数据库上进行选择并在结果集上调用 next() 时，进程简单地死掉，在 ResultSet->next( ）。数据库上的写入工作没有问题，读写都在 32 位版本上工作

我正在使用即时客户端和 SDK 附带的 11.2 版本的 win64 oracle 库

编辑：这是最简单的代码

```
const std::string sql("select * from schedule_import");

std::auto_ptr<IRecordSet> query = m_conn->Open(sql);

while(query->Next()) // dies
{
  const std::string key(query->GetField("bean_key"));
  //... 
```

IRecordSet 只是 DB 驱动程序常用功能的接口，如 next、getField，在此处实现

```
bool OracleRecordSet::Next()
{
  return m_pResultSet->next() != NULL; //crashes here
} 
```

其中 m_pResultSet 是 oracle::occi::ResultSet*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:27:37.450

我不熟悉 Oracle API，但问题是 m_pResultSet 是否不为 NULL（在分段错误的情况下）以及是否没有异常（在 abort()、raise() 堆栈的情况下）。

BR！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:31:56.923

经过多次尝试，我的问题得到了解决。

我将我的调试程序链接到 oraocci11.lib 因为我没有调试版本，我认为这并不重要。经过一番搜索，我找到了库的调试版本 oraocci11d.lib，带有相应的 dll，并且崩溃消失了

# actionscript-3 - 看看movieclip的孩子们是否在舞台上

> ID：10803312
> 
> 赞同：0
> 
> 时间：2012-05-29T16:42:56.510
> 
> 标签：actionscript-3

我正在使用 as3 创建一个平台游戏，需要查看movieclip _boundaries 的孩子是否在舞台上，这样我可以删除它们并降低计数器，以便不断生成更多。到目前为止，我所拥有的一切都在下面。请帮助，被困在这个几个星期。

```
var ObjectArray:Array = [];
var ChildrenColliding:Boolean = false;
var onStageCount:Number = 0;
function generateObjects():void{    
    if(_vx > 0 && onStageCount < 20){
        var Square:MovieClip;
        Square = new mcSquare();
        Square.x = Math.random() * 1000 + (Math.abs(_boundaries.x) + 50);
        Square.y = Math.random() * stage.stageHeight/2.5 + (stage.stageHeight/2.5);
        ObjectArray.push(Square);
        _boundaries.addChild(Square);
        onStageCount += 1;
    }
    for(var i in ObjectArray){
        Square[i] = Square.name;
        for(var a in ObjectArray){
            if(ObjectArray[i].hitTestObject(ObjectArray[a]) && a != i){ChildrenColliding = true;}
            while(ChildrenColliding){
            ObjectArray[i].x += (ObjectArray[a].height + 25);
            ObjectArray[i].y += (ObjectArray[a].width + 25);
            ChildrenColliding = false;
                if(ObjectArray[a].hitTestObject(ObjectArray[i]) && a != i){ChildrenColliding = true;}
            }
        }
    }
    //CHECK TO SEE IF CHILDREN ARE ON STAGE!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    for(var w in ObjectArray){
        if(_boundaries){
            onStageCount -= 1;
            trace("removed");
            _boundaries.removeChild(ObjectArray[w]);
            ObjectArray.splice(w, 1);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T22:36:38.060

您可能需要使用该`localToGlobal`方法来确定方形对象的位置。就像是：

```
for (var w in ObjectArray) {
    if (_boundaries) {
        var sq:MovieClip = ObjectArray[w];
        var pnt:Point = _boundaries.localToGlobal(new Point(sq.x, sq.y));
        if (pnt.x <= 0 || pnt.x >= _boundaries.stage.stageWidth || 
            pnt.y <= 0 || pnt.y >= _boundaries.stage.stageHeight) {

            // remove square
            onStageCount -= 1;
            trace("removed");
            _boundaries.removeChild(ObjectArray[w]);
            ObjectArray.splice(w, 1);
        }
    }
} 
```

在一般最佳实践的旁注中，保留以大写字母开头的单词作为类名（如 MovieClip、Sprite 或 MyCustomClass），并使用 camelCase 作为变量名。在与其他开发人员合作推广最佳实践时，这很有帮助。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T18:10:39.203

尝试这个：

```
//CHECK TO SEE IF CHILDREN ARE ON STAGE!!!!!!!!!!
for(var w in ObjectArray){
    if(_boundaries && _boundaries.contains(ObjectArray[w])){
        onStageCount -= 1;
        trace("removed");
        _boundaries.removeChild(ObjectArray[w]);
        ObjectArray.splice(w, 1);
    }
} 
```

# oop - 有类在 Ui 上显示数据好吗？

> ID：10803313
> 
> 赞同：1
> 
> 时间：2012-05-29T16:42:57.450
> 
> 标签：oop

X 类具有三个属性：left、right 和 sum。左 + 右 = 总和。它们存储精确值，例如，Left 是 51.2584165861，Right 是 55.8155984388，Sum 是 107.07401502496。

但在 UI 上，我必须将它们四舍五入为两位精度小数。他们将显示 Left = 51.26、Right = 55.82 和 Sum = 107.07，这是不正确的。51.26 + 55.82 应该是 107.08。

我认为计算其他两个值的一个值会很好，例如 Sum - Left 然后我们将 Right 显示在 Ui 上。

如果我为 Ui 创建一个新类，我会将所有属性移动到基类，然后更改当前类和 ui 类以从它派生。它们只有一个区别，原始类存储精确值，而 ui 类将存储 2 个精度值。也许我在 ui 类构造函数中应用了舍入。

我的问题是，在这个示例中为 Ui 创建类好吗？仅为 Ui 创建一个类的优缺点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T16:49:55.340

> is it good to create class for Ui in this sample?

Yes.

> What are pros and cons of create a class only for UI?

Pros: You're managing the UI data in one place. Your controller, in a model, view, controller architecture, deals with the UI model, rather than the UI components individually.

You can change the UI components without necessarily changing the UI model. As an example, you could change a check box to a toggle button without changing the model.

Cons: Your UI data model tends to be global across the UI. By definition, your UI model is a singleton.

# meteor - 在 Meteor 服务器中使用 Handlebars util 方法

> ID：10803315
> 
> 赞同：3
> 
> 时间：2012-05-29T16:43:07.480
> 
> 标签：meteor, handlebars.js

我正在开发我的第一个 Meteor 应用程序，并且试图在服务器端转义一个字符串。我希望使用 Handlebars.Utils.escapeExpression，但即使我添加了把手（我必须这样做，即使 Meteor 已经使用它？），我仍然得到

```
ReferenceError: Handlebars is not defined 
```

命中该代码时出错。有没有办法在我的项目中手动包含源代码的情况下调用该方法服务器端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:02:43.393

Meteor 仅在客户端上使用 Handlebars。[服务器端渲染在路线图上](https://trello.com/c/Lz07fBAm/7-server-side-rendering)。

此外，Meteor 附带的 Handlebars 不包括 Utils。

改为使用`{{{thingThatNeedsEscaping}}}`，[根据](http://handlebarsjs.com/expressions.html)取消转义它的文档。

另外，我认为没有必要在将内容插入数据库之前对其进行转义，如果您需要它，尽管还有其他 JS 函数（例如未弃用的[转义变体）。](https://stackoverflow.com/a/3608791/1269037)

# c - 在c程序中使用diskpart

> ID：10803316
> 
> 赞同：0
> 
> 时间：2012-05-29T16:43:18.563
> 
> 标签：c

在 Windows 中自动执行 diskpart 命令需要指向一个 .txt 文件，该文件包含您要执行的命令序列。我正在编写一个需要使用此自动化功能的 C 程序。我想让它完全独立于工作目录运行。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:50:25.613

Either use a fully qualified name for the file, or, with a bit more work, pass the commands from the C program to diskpart through an anonymous pipe using popen.

Example added:

```
#include <stdio.h>

int main ( int argc, char *argv[] )
{
    char buffer[MAXBUF];
    FILE *fp = popen("gzip -dc data.gz","r");

    while (fgets(buffer,MAXBUF,fp)) {
        /* Process line of data, here just print it out… */
        fputs(buffer,stdout);
    }

    printf ("Command exit status %d\n", pclose(fp));
} 
```

# varnish - Varnish VCL & Req.Url 匹配重定向

> ID：10803319
> 
> 赞同：0
> 
> 时间：2012-05-29T16:43:28.020
> 
> 标签：varnish, varnish-vcl

我目前为一般缓存等设置 Varnish，但也充当我们网站移动版本的重定向。

它工作得很好（就像 Varnish 一样！）并按预期重定向。我决定向 VCL 配置添加功能，不仅将手机重定向到网站的移动版本，而且还将访问移动网站链接的桌面（例如，在 Google 上）重定向到网站的桌面版本。

但是，我似乎无法以最令人费解的方式让它发挥作用。这是VCL：

# 忽略某些共享资源 if (req.url !~ ".(jpg|png|gif|gz|tgz|bz2|tbz|mp3|ogg|css)$") {

```
 # Let's detect if we're a Mobile
     if (req.http.User-Agent ~ "iP(hone|od)" || req.http.User-Agent ~ "Android" || req.http.User-Agent ~ "Symbian" || req.http.User-Agent ~ "^BlackBerry" || req.http.User-Agent ~ "^SonyEricsson" || req.http.User-Agent ~ "^Nokia" || req.http.User-Agent ~ "^SAMSUNG" || req.http.User-Agent ~ "^LG" || req.http.User-Agent ~ "webOS" || req.http.User-Agent ~ "^PalmSource") {

        # If we're a mobile, set the X-Device header.
        set req.http.X-Device = "mobile";
        # If we've not set a preference to the fullsite to override the redirect, and we're not accessing the mobile site, redirect. This all works fine.
        if ((req.http.Cookie !~ "fullsite")&&(req.url !~ "mobile")){
           error 750 "Moved Temporarily";
        }
     }
     else{
        # We're not mobile. I can see this header is set in the logs.
        set req.http.X-Device = "desktop";
        # If we're a desktop AND accessing the mobile site....
        if (req.url ~ "mobile"){
           # -------------------- THIS NEVER HAPPENS
           error 750 "Moved Temporarily";
        }
     }  
  } 
```

这里的逻辑有明显的错误吗？我可以看到没有任何 cookie 或任何其他可能干扰重定向的东西。如果有人对此有任何见解，我将永远感激不尽:)最好的问候B

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T16:23:15.150

我想我会重新审视一下，以防有人在阅读这个问题时遇到同样的问题——我们最终确实解决了这个问题，这是由于一个令人难以置信的基本疏忽。

之前还有另一个 VCL 条件干扰了重定向 - 部分匹配模块 (~) 将所有匹配的移动 url 重定向到桌面版本，因为这在 VCL 中较早出现。

这一点很明显，但我对任何有此问题的人的建议是检查这些部分匹配，并记住它可能会匹配 URL 的任何部分。

# linux - /sbin/service 懒惰快捷方式

> ID：10803320
> 
> 赞同：0
> 
> 时间：2012-05-29T16:43:31.663
> 
> 标签：linux, bash, ssh, centos

我正在运行 CentOS 5 并出于安全原因禁用了 root 登录。
现在，作为 root 我可以像这样启动和停止服务：

```
httpd restart
mysqld stop
postfix start 
```

但是对于我设置的新用户，我必须使用`/sbin/service process command`

如何设置用户也可以快速访问该过程？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T16:50:10.177

将 /etc/init.d/ 添加到路径中 - 例如

```
PATH=$PATH:/etc/init.d 
```

并将其放入用户的 .profile

# javascript - 花式框弹出窗口内的链接

> ID：10803322
> 
> 赞同：0
> 
> 时间：2012-05-29T16:43:37.900
> 
> 标签：javascript, jquery, html, css, fancybox

我有一个问题，我不知道如何解决。在我的程序中，当用户单击图像时，fancybox 脚本会运行，从而导致新图像显示为弹出窗口。但是，在该图像中，我也希望能够放置链接。基本上我想在弹出图像中使用特定宽度和高度以及位置的链接块，在链接中创建链接。这甚至可能吗？

这是一些代码：

```
<!--Using the fancybox functions -->
    <script type="text/javascript">
        $(document).ready(function(){
            $("#contentArea a").fancybox({
                'overlayShow'   : false,
                'transitionIn'  : 'elastic',
                'transitionOut' : 'elastic'

            });
            });
    </script> 
```

这是HTML：

```
<div id="contentArea" role="main">
             <a href="../images/IRPA_two-navigation-books.png" title="Raj Sharma" style="width: 217px;height: 117px;position: absolute;display: block;top: 340px;left: 450px; background-image:url(../images/transparent.png)"></a>         
</div> 
```

如您所见，我为特定位置的块链接创建了一个精美的图像弹出窗口。如何在弹出花式框图像中创建具有指定宽度/高度和位置的链接？

这是我正在使用的工具/库，以防有人感到困惑： http: [//fancybox.net/](http://fancybox.net/)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:54:30.550

您可以轻松地做到这一点：

```
var html = "<!--- some html here to add to the fancybox -->";
$('#fancybox-title-over').html(html);
$('#fancybox-title-over').css('background-color' , 'transparent'); 
```

它将出现在覆盖标题中，如[http://fancybox.net/上的第六个示例所示](http://fancybox.net/)

# jquery - Nivo 滑块：单击第一张幻灯片开始

> ID：10803323
> 
> 赞同：0
> 
> 时间：2012-05-29T16:43:39.990
> 
> 标签：jquery, nivo-slider

用于 jQuery 的 Nivo Slider：我确定我遗漏了一些东西，但是有没有办法通过单击第一个图像来启动和循环滑块？我有一系列 8 张图片，我将用它们替换 SWF，但第一张幻灯片显示“点击开始”。我知道我可以打开手动选项，但这不是我需要的。单击第一张图像时，我只需要滑块来启动它的循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:58:41.150

可能您必须设置`manualAdvance: true`- 在这里查看[完整的选项列表](http://nivo.dev7studios.com/support/jquery-plugin-usage/)。

然后只需将`click`事件侦听器附加到幻灯片/第一张幻灯片并将`manualAdvance`back 设置为`false`，这样它就可以继续播放

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T23:33:00.263

或者您可以将以下内容放在头部：

```
<script type="text/javascript">
   jQuery(window).load(function() {
   $('#Slider').data('nivoslider').stop();
   $('#Slider').live('click', function() {$('#Slider').data('nivoslider').start();});
    });
</script> 
```

# javascript - 我在游戏中的课程应该有多具体？（或其他任何地方）

> ID：10803329
> 
> 赞同：2
> 
> 时间：2012-05-29T16:44:02.127
> 
> 标签：javascript, python, oop, class

到目前为止，我制作了两款游戏，一款是简单的 2D MMO，另一款是具有更多功能的 2D 门户克隆。

无论如何，我注意到我在这两款游戏中的职业设计有所不同：

在 MMO 中，我会创建一个名为“Enemy”的类，这个类会接受一些参数，例如`image`and `attack_power`。

在类似 Portal 的游戏中，我会专门为每种对象创建类，例如“Box”或“Wall”或“Doors”。然后，这些将仅`position`作为参数，在里面我将它们标记为`movable`, `physics`with `true/false`，然后我将有一个更新函数来作用于这些对象。

解决此类问题的最佳方法是什么？我应该有多具体，我应该使用完全不同的东西吗？

我用 Python 和 Javascript 制作了这些游戏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T16:57:30.513

这取决于每个课程的目的、您使用的语言、您想要实现的目标、您想要解决的具体问题以及无数其他因素——每个问题和每个程序都是不同的.

我建议围绕 OO 设计的 SOLID 原则进行一些研究，这些原则更像是指南而不是规则，但是理解它们并将它们应用于实际问题可能会帮助您实现“良好”的类设计 - [http：/ /davesquared.net/2009/01/introduction-to-solid-principles-of-oo.html](http://davesquared.net/2009/01/introduction-to-solid-principles-of-oo.html)

没有“最佳”方法，因为解决问题没有普遍的正确或错误方法，当您考虑到在此过程中可能遇到的其他现实世界问题时，*完美的解决方案并不总是可能或可取的。*

您可能会考虑问自己的问题类型可能类似于

*   我的程序实际上**做**了什么？通常，当您开始考虑程序的工作方式时，最有用的类就会出现。例如，您的可移动 Box 类可能最终做的很少，以至于更容易将其表示为一个简单的结构，但您可能会发现 BoxMover 类的用途，它充满了“移动”逻辑，并且知道如何移动盒子。

*   我的程序中的不同实体的行为如何？你没有提到很多关于你的类的细节，所以只有你会知道它们是否做不同的事情，但是如果你最终得到了几十个几乎相同的类（特别是差异仅限于数据的地方），那么你可能已经走了太远。

*   我真正想对课程做什么？考虑接口很重要；OO 设计的重点更多是关于类的使用方式，而不是类存储的数据。（例如，与流行的看法相反，正方形可能与矩形完全没有共同之处）。类似地，一个只有单行 get-set 函数的类可能不会让你的生活变得更轻松，或者让你更接近找到一个好的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T17:01:24.507

> 解决此类问题的最佳方法是什么？

一些游戏开发人员会说 OOP 不是您将用于游戏的编程类型。他们将拥有一个全局数据存储，并使用程序代码来访问全局数据存储。

你是唯一能真正回答这个问题的人。你的课程是帮助还是阻碍了你的游戏编程？

> 我应该有多具体，我应该使用完全不同的东西吗？

尽可能具体地为游戏建模。在我看来，自从你完成了游戏，你就有了一个很好的模型。随着您获得更多开发经验，您将看到更多可以使用的模型。

# mysql - mysql并发和相同事务的麻烦

> ID：10803332
> 
> 赞同：0
> 
> 时间：2012-05-29T16:44:42.773
> 
> 标签：mysql, ruby-on-rails

好的，这是正在发生的事情的基本想法：

```
begin transaction
some_data=select something from some_table where some_condition;
if some_data does not exists or some_data is outdated
  new_data = insert a_new_entry to some_table
  commit transaction
  return new_data
else
  return some_data
end 
```

当多个进程同时执行上面的代码时（比如客户端同时发出很多相同的请求），会插入很多“new_data”，而实际上只需要一个。

我认为这是一个非常典型的并发场景，但我仍然无法找到一种体面的方法来避免它。我能想到的事情可能就像让一个工作进程来完成 select_or_insert 工作，或者可能将隔离级别设置为可序列化（不可接受）。但两者都让我不太满意。

PS：数据库是mysql，表引擎是innodb，隔离级别是可重复读

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:49:40.847

在您的初始`SELECT`，使用[`SELECT ... FOR UPDATE`](http://dev.mysql.com/doc/en/innodb-locking-reads.html).

这确保了在事务提交（或回滚）之前，记录被锁定以防止其他客户端读取它，因此他们等待`SELECT`命令并且不会继续执行其余逻辑，直到第一个客户端完成其`UPDATE`.

请注意，您将需要条件中`ROLLBACK`的事务`else`，否则锁将继续阻塞，直到连接断开。

# cocoa - Control network in cocoa app

> ID：10803338
> 
> 赞同：1
> 
> 时间：2012-05-29T16:45:10.117
> 
> 标签：cocoa, networking

I need to implent a control in my app. If there's no wireless network where I can connect, i need to create an ad-hoc network. It's possible to do it in obj-c with cocoa? I can't find anything about that. Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T03:56:38.880

我正在寻找同样的东西。到目前为止，我发现的只是苹果脚本和使用 automator 来完成同样的事情——但肯定有一些东西在那里。

# java - using tortoise svn for updating source code in maven

> ID：10803340
> 
> 赞同：0
> 
> 时间：2012-05-29T16:45:17.740
> 
> 标签：java, maven-plugin, maven-3

i am using the `scm plugin` in maven to *update* svn code each time i take a build. The goal specified for the plugin is update. I have tortoise svn installed in my system but when i execute the build it fails saying that svn update `command not found`. I realised that i need to install another svn client (like silk subversion) and then it works. So is there any way by which i can use tortoise svn only and execute the build or do i have to install another svn client? Also if i do use another svn client then will it anyway affect tortoise svn or cause any problem ? Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T16:52:54.247

您需要使用 svn 命令行客户端才能使 scm 插件工作。

此外，安装命令行 svn 客户端不会以任何方式影响 tortoise svn。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:25:35.760

您可以使用[svn-provider 代替](http://code.google.com/a/apache-extras.org/p/maven-scm-provider-svnjava/)SVN 的命令行工具，但最好是安装 SVN 命令行客户端而不是 TortoiseSVN 等。我不确定 TortoiseSVN CLI 和 SVN CLI 之间是否存在一些兼容性问题。

# django - How to override django static file development server?

> ID：10803344
> 
> 赞同：7
> 
> 时间：2012-05-29T16:45:34.187
> 
> 标签：django

I am beginning to use the application 'django.contrib.staticfiles' to collect static files into the /static/ directory of my project.

The problem is that, when I am using the django development server (manage.py runserver) it automatically serve static files.

It is usually fine, but in my case, I would like to serve these static files myself.

I would like to put in the urls.py file something like that :

```
urlpatterns += patterns('',
        url('^static/(?P<path>.*)$', myStaticMediaServe,{'document_root': settings.STATIC_ROOT ,'show_indexes': True}),
        ) 
```

The problem is that 'django.contrib.staticfiles' application has got the priority on '/static/' url when settings.DEBUG=True : I cannot find a way to make Django use my '/static/' urlpattern description while being in debug mode

If I remove 'django.contrib.staticfiles' from settings.py : my '/static/' urlpattern works but I loose static files collecting.

Do you have an idea to use 'django.contrib.staticfiles' AND use my own static files server through an urlpattern description AND have settins.DEBUG=True

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T22:15:48.413

我发现，默认情况下，django 'runserver' 本身会抢占 /static/ urls ：即使使用自定义中间件，您也不能强制 django 将 '/static/' 指向您的代码。

我发现的唯一解决方案是：对 './manage.py runserver' 使用 --nostatic 选项，然后可以使用他自己的 url 模式和视图来提供静态文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T16:53:29.877

设置`DEBUG`为`False`。Django 仅在`True`.

# drupal - Module field with feeds, module generating data

> ID：10803353
> 
> 赞同：0
> 
> 时间：2012-05-29T16:45:57.173
> 
> 标签：drupal, field

I have an issue with triming a field before it is saved. I wanted to use `substr()`, or `regex()` with `preg_match()`. I have built a Drupal 7 module, but it can't work at all. I have tried using the trim plugin in feeds tamper module, but it doesn't seem to work. The data I am using is from a feed from Google Alerts. I have posted this issue [here](http://drupal.org/node/1595384).

This is what I have done so far, and I know my regular expression is wrong; I was trying to get it do anything, just to see if I could get it to work, but I am pretty lost on how to add this type of function to a Drupal module.

```
function sub_node_save() {    
   $url = $node->field_web_screenhot['und'][0]['url'];
   $url = preg_match('~^(http|ftp)(s)?\:\/\/((([a-z0-9\-]*)(\.))+[a-z0-9]*)($|/.*$)~i',$url );
   $node->field_web_screenhot['und'][0]['url'] =$url;

  return ;
} 
```

I used the Devel module to get the field.

If there's an easy way to use `substr()`, I would consider that or something else.

Basically, I just want to take the Google redirect off the URL, so it is just the basic URL to the web site.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T22:00:42.333

根据您的问题和后来的评论，我建议为此使用 node_presave hook (http://api.drupal.org/api/drupal/modules!node!node.api.php/function/hook_node_presave/7)。它在插入（新）和更新操作之前调用，因此如果需要，您将需要额外的验证以防止它在节点更新上执行。

```
<?php
function MYMODULE_node_presave($node) {
// check if nodetype is "mytype"
    if ($node->type == 'mytype'){
        // PHP's parse_url to get params set to an array.
        $parts = parse_url($node->field_web_screenhot['und'][0]['url']); 
        // Now we explode the params by "&" to get the URL.
        $queryParts = explode('&', $parts['query']);

        $params = array();
        foreach ($queryParts as $param) {
            $item = explode('=', $param);
            $params[$item[0]] = $item[1];
        } 
        //valid_url validates the URL (duh!), urldecode() makes the URL an actual one with fixing "//" in http, q is from the URL you provided.
        if (valid_url(urldecode($parms['q']))){
            $node->field_web_screenhot['und'][0]['url'] = urldecode($parms['q']);
        }
    }
} 
```

# c# - DbConnection.Open 总是打开一个新的数据库连接还是可以重用一个连接池？

> ID：10803356
> 
> 赞同：4
> 
> 时间：2012-05-29T16:46:06.860
> 
> 标签：c#, .net, sql, ado.net, dbconnection

我不确定连接池在.NET 中实现的级别。当我打电话

```
using(var connection = new SqlConnection(connectionString))
{
    connection.Open(); 
```

我肯定会打开一个新的连接吗？或者我可以重用一个活动连接吗？SqlConnection 中存在的连接池在其他 DbConnection 实现中可以不存在吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T16:48:03.990

除非您另外指定，否则连接池会自动发生。如果您向下滚动到下面第一个链接中的“使用连接字符串关键字控制连接池”部分，您会看到“池”的默认值为 true。

[http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)

只要连接字符串完全相同（在这一点上大写/小写很重要），连接池就会在您没有任何干预的情况下创建。

OleDbConnection 和连接池也是如此。
[http://msdn.microsoft.com/en-us/library/ms254502.aspx](http://msdn.microsoft.com/en-us/library/ms254502.aspx)

# javascript - 将 JSP 值输出到 JavaScript 变量中

> ID：10803359
> 
> 赞同：0
> 
> 时间：2012-05-29T16:46:21.070
> 
> 标签：javascript, jsp

好的 - 所以我已经编写了这段代码来使用 JSP 输出值并将它们设置为 JS 变量，这样我就可以将它们传递给我的 Google Analytics 跟踪代码。

```
<dsp:droplet name="/atg/dynamo/droplet/ForEach">
            <dsp:param value="${CommerceItems}" name="array" />
            <dsp:param name="elementName" value="CommerceItem" />
            <dsp:oparam name="outputStart">var itemCatList ='</dsp:oparam>
            <dsp:oparam name="output"
                <dsp:getvalueof id="Category"param="CommerceItem.auxiliaryData.productRef.productWebType.productWebTypeDescription">${Category}|</dsp:getvalueof>
            </dsp:oparam>
            <dsp:oparam name="outputEnd">'; </dsp:oparam>
        </dsp:droplet> 
```

我不确定这是否是执行此操作的正确方法-以前将值设置为隐藏输入-然后使用 JS 来获取这些值。我试图消除额外的代码。

这样做有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:00:53.150

不，尽管对于将变量公开到 JS 中的最佳方法是什么意见不一。

但是，我发现上述内容不明显且难以阅读。如果有一种使用 JSON 的方法，我可能更喜欢它而不是构建一个以管道分隔的字符串，或者我会将它包装在一个自定义标签中，将所有这些抽象出来，这样休闲读者就不必做任何心理体操。

另一种选择是在 Java 代码中构建分隔字符串并直接公开它。

# jquery - Including Exponents in jQuery?

> ID：10803360
> 
> 赞同：1
> 
> 时间：2012-05-29T16:46:21.150
> 
> 标签：jquery, math, implementation, equation, exponent

How do you implement exponents in JQuery?

I'm modifying this:

```
$.fn.sumValues = function() {
var sum = 0; 
this.each(function() {
    if ( $(this).is(':input') ) {
        var val = $(this).val();
    } else {
        var val = $(this).text();
    }
    sum += parseFloat( ('0' + val).replace(/[^0-9-\.]/g, ''), 10 );
});
return sum; 
```

and

```
$(document).ready(function() {
$('input.price').bind('keyup', function() {
    $('span.total').html( $('input.price').sumValues() );
}); 
```

to calculate a more complex formula of summations from user input.

The formula itself is (a through g are user inputs):

Step 1) X=((1+(a/100))^b)*(c*12)

Step 2) X+d=e

Step 3) e-f-g=h

Can you help me implement this more effectively?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T16:47:59.243

```
var X = Math.pow(1+(a/100), b)*(c*12);

var e = X+d;

var h = e-f-g; 
```

[**Math.pow(base, exponent)**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/pow) is used for exponential calculation.

To set above value to input for example

```
$('#mortgage').val(X);

$('#utilities').val(e); 
```

and so on.

# mysql - Having trouble with MySQL Command 'LOAD DATA INFILE". I need to set first row as headers

> ID：10803364
> 
> 赞同：4
> 
> 时间：2012-05-29T16:46:49.007
> 
> 标签：mysql

Here is my code.

```
TRUNCATE TABLE dsw_data.inventory_sss2;
SET AUTOCOMMIT=0; 
LOAD DATA INFILE 'c:/inetpub/wwwroot/Data/inventory_sss.csv' INTO TABLE dsw_data.inventory_sss2 FIELDS TERMINATED BY  ',' OPTIONALLY ENCLOSED BY '"' LINES TERMINATED BY '\r'; 
COMMIT; 
```

Here is the resulting error

```
Error Code: 1366\. Incorrect integer value: 'CUST NO' for column 'sno' at row 1" 
```

I want the first row of the CSV to be the table headers, and the other rows to be the data.

Also how do I specify which rows should be numeric (If this is even needed, I'm not sure).

I have searched here and google, but haven't seen code samples to set the headers like I want.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T16:52:26.337

要回答您的第一个问题，您需要使用以下`IGNORE 1 LINES`语法：

```
TRUNCATE TABLE dsw_data.inventory_sss2;
SET AUTOCOMMIT=0; 
LOAD DATA INFILE 'c:/inetpub/wwwroot/Data/inventory_sss.csv' 
INTO TABLE dsw_data.inventory_sss2 
FIELDS TERMINATED BY  ',' 
OPTIONALLY ENCLOSED BY '"' 
LINES TERMINATED BY '\r'; 
IGNORE 1 LINES
COMMIT; 
```

更新为显式命名列并将主键设置为 null 以使用自动增量：

```
TRUNCATE TABLE dsw_data.inventory_sss2;
SET AUTOCOMMIT=0; 
LOAD DATA INFILE 'c:/inetpub/wwwroot/Data/inventory_sss.csv' 
INTO TABLE dsw_data.inventory_sss2 
FIELDS TERMINATED BY  ',' 
OPTIONALLY ENCLOSED BY '"' 
LINES TERMINATED BY '\r'; 
IGNORE 1 LINES
(your_first_column, your_second_column,...)
SET sno = NULL
COMMIT; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T16:52:11.880

添加

```
IGNORE 1 LINES 
```

对您的`LOAD DATA`查询：

```
LOAD DATA INFILE 'c:/inetpub/wwwroot/Data/inventory_sss.csv' INTO TABLE dsw_data.inventory_sss2 FIELDS TERMINATED BY  ',' OPTIONALLY ENCLOSED BY '"' LINES TERMINATED BY '\r' IGNORE 1 LINES; 
```

您不需要指定哪些字段是数字的，它将基于您要加载到的表。

# apache - Url masking through htaccess not working

> ID：10803371
> 
> 赞同：0
> 
> 时间：2012-05-29T16:47:08.787
> 
> 标签：apache, .htaccess, mod-rewrite, lithium

I was trying to setup Lithium Php framework. I followed the [documentation](http://lithify.me/docs/manual/getting-started/installation.wiki) for getting started. I have done this: *"make sure mod_rewrite is enabled, and the AllowOverride directive is set to 'All' on the necessary directories involved. Be sure to restart the server before checking things."* Rewrite module is enabled. Verified by

```
apache2ctl -M 
```

I have changed the AllowOverride in */etc/apache2/sites-available/default* file. Now when I go to *http://localhost/LithiumTestApp/*, the page loads but sans css, js, images etc as the links do not work. I can't seem to find what I have done wrong.

I'm running Apache2 on Ubuntu 11.10.

Edit: Contents of .htaccess are:

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteRule ^$   webroot/   [L]
RewriteRule (.*) webroot/$1 [L]
</IfModule> 
```

Part of Lithium Framework itself. I haven't changed anything here.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:19:28.257

我建议首先检查您的重写是否正常工作。我通常在我的 vhost 文件中设置一个重写日志路径（或者在你的 httpd.conf 或 apache2.conf 中设置它，无论你的操作系统使用哪个）。

```
RewriteLog "/var/log/apache2/rewrite.log"
RewriteLogLevel 5 
```

然后做：

```
tail -f /var/log/apache2/rewrite.log 
```

这将允许您在日志内容发生时查看日志内容并刷新页面并查看一切是否正常。我还建议查看您的 Apache 错误日志以查看请求中是否存在错误。

另外，请确保您的资源文件夹具有写入权限。

# javascript - javascript - call math.rand, then scale and convert to int, in a function argumnet

> ID：10803374
> 
> 赞同：0
> 
> 时间：2012-05-29T16:47:17.530
> 
> 标签：javascript, math

I need to perform the specified operations within the argumnts of a function. I saw this done once but I disremember the syntax.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T16:51:04.970

**Original answer** *see below for updated answer*

> ...to perform the specified operations within the argumnts of a function...

I have no idea what "within" might mean there. :-)

But perhaps this is what you're looking for:

```
function foo(num) {
    return Math.round(Math.rand() * num);
} 
```

More reading:

*   MDN's pages on the [`Math` object](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math)

* * *

**Updated answer**

Re your comment below:

> I need the math to happen where it says "num" :).

You can't do that in JavaScript. When declaring a function, all you can put where I have `num` above is the names of formal arguments. You can't have expressions there.

You *can* do this, though:

```
function foo(num) {
    num = Math.round(Math.rand() * num);

    // ...and use `num`...
} 
```

There's a very slight performance penalty for doing that rather than creating a new `var` within the function, e.g.:

```
function foo(n) {
    var num = Math.round(Math.rand() * n);

    // ...and use `num`...
} 
```

...but it's *very* slight, likely to be washed out by whatever else you're doing.

# python - Defining __getattr__ and __getitem__ on a function has no effect

> ID：10803384
> 
> 赞同：7
> 
> 时间：2012-05-29T16:48:23.553
> 
> 标签：python, metaprogramming

*Disclaimer* This is just an exercise in meta-programming, it has no practical purpose.

I've assigned `__getitem__` and `__getattr__` methods on a function object, but there is no effect...

```
def foo():
  print "foo!"

foo.__getitem__ = lambda name: name
foo.__getattr__ = lambda name: name
foo.baz = 'baz' 
```

Sanity check that we *can* assign properties to a function:

```
>>> foo.baz
'baz' 
```

Neat. How about the "magic getters"?

```
>>> foo.bar
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'function' object has no attribute 'bar'

>>> foo['foo']
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'function' object is not subscriptable

>>> getattr(foo, 'bar')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'function' object has no attribute 'bar' 
```

Is it possible to have a "magic getter" on a function object?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T16:48:23.677

Nope! Assigning `__getitem__` to an instance doesn't work on *any* type of object:

```
>>> class A(object):
...   pass
...
>>> a = A()
>>> a.__getattr__ = lambda name: name
>>> a.foo
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'A' object has no attribute 'foo' 
```

**And** you can't define `__getattr__` on the built-in function type:

```
>>> import types
>>> types.FunctionType.__getitem__ = lambda name: name
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: can't set attributes of built-in/extension type 'function' 
```

***And*** you can't subclass `types.FunctionType`:

```
>>> import types
>>> class F(types.FunctionType):
...   pass
... 
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: Error when calling the metaclass bases
type 'function' is not an acceptable base type 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T17:14:49.803

至少在新式类（这是 Python 3 中唯一的一种，也是您应该在 Python 2 中使用的那种）上，Python 只在类（及其祖先）上寻找魔法方法，而不是在实例上。[文档在这里](http://docs.python.org/reference/datamodel.html#special-method-lookup-for-new-style-classes)。

当然你不能修改函数类型，或者从它派生。然而，正如您所发现的，任何具有`__call__()`方法的类都会生成可调用的实例，所以这就是这样做的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T16:58:30.747

AHHA! Use `__call__`, and wrap the function in `F()`

```
class F(object):
    def __init__(self, fn):
        self.__dict__['fn'] = fn

    def __call__(self, *args, **kwargs):
        return self.fn(*args, **kwargs)

    def __getitem__(self, name):
        return name

    def __getattr__(self, name):
        return name

>>> foo = F(foo)
>>> f.bar
'bar'
>>> f['foo']
'foo'
>>> foo()
foo! 
```

# web-services - 如何在 THTTPRIO 中设置反馈？

> ID：10803386
> 
> 赞同：3
> 
> 时间：2012-05-29T16:48:24.457
> 
> 标签：web-services, delphi, delphi-2010

我已经开发了一个`Webservice`，我正在 Delphi 上使用它。

Indy 组件有一个`OnWork`事件，但我在 THTTPRIO 中没有找到类似的东西。

有`OnWork`活动`THTTPRIO`吗？我猜它在内部使用 Indy，但我对此不太确定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T17:11:08.223

您可以访问 THTTPRIO.HTTPWebNode 对象的事件。

例子：

```
procedure TYourClass.SomePostingDataEvent(Sent: Integer; Total: Integer);
begin
  //Do something
end;

procedure TYourClass.SomeReceivingDataEvent(Read: Integer; Total: Integer);
begin
  //Do something
end;

procedure TYourClass.SomeMethod;
begin
  YourHTTPRIO.HTTPWebNode.OnPostingData := SomePostingDataEvent;
  YourHTTPRIO.HTTPWebNode.OnReceivingData := SomeReceivingDataEvent;
end; 
```

希望这对你有帮助！

# objective-c - imageitem class define

> ID：10803392
> 
> 赞同：0
> 
> 时间：2012-05-29T16:48:50.523
> 
> 标签：objective-c, class, set, declaration

i need to build an application that define an array that should be made of image items. every image iten has an image, a name and a photographer name. i build my image item class and i want you to check if my define is correct and good(i just start to learn objective c). i want you to emphasize on the set's methods.

here is the photoitem.h:

```
#import <Foundation/Foundation.h>

@interface photoItem : NSObject
 {
     UIImage *imageView;
     NSString *photoNameLabel;
     NSString *photographerNameLabel;
     UIButton *viewPhoto;
 }
 @property(readonly) NSString *name;
 @property(readonly) NSString *nameOfPhotographer;
 @property(readonly) UIImage *imageItem;

 -(id)makePhotoItemWIthPhoto:(UIImage*)image name:(NSString*)photoName photographer:   (NSString*)photographerName;

@end 
```

here is my photoitem.m:

```
#import "photoItem.h"

@implementation photoItem

@synthesize name;
@synthesize nameOfPhotographer;
@synthesize imageItem;

-(id)makePhotoItemWIthPhoto:(UIImage*)image name:(NSString*)photoName photographer:(NSString*)photographerName
{
    [self setName:photoName];
    [self setNameOfPhotographer:photographerName];
    [self setImageItem:image];
    return self;
}

-(void) setName:(NSString *)name
{
    photoNameLabel = name;
}  

-(void) setNameOfPhotographer:(NSString *)nameOfPhotographer
{
    photographerNameLabel = nameOfPhotographer;
}

-(void)setImageItem:(UIImage *)imageItem
{
    imageView = imageItem;
}
@end 
```

i hope you could fix my errors(if there are some). thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:05:08.527

想到两个问题：

1)`-(id)makePhotoItemWIthPhoto:name:photographer:`可能会更好`-(id)initWithPhoto:name:photographer:`。否则调用者需要先`alloc`和`init`一个对象，这样才`self`有效，然后调用你的方法。在这一点上，返回`self`没有意义。例子：

```
-(idinitWithPhoto:(UIImage*)image name:(NSString*)photoName photographer:(NSString*)photographerName {
    self = [super init];
    if (self) {
        [self setName:photoName];
        [self setNameOfPhotographer:photographerName];
        [self setImageItem:image];
    }
    return self;
} 
```

2) 这三个只读属性似乎没有任何用途，因为它们与您在`makePhotoItemWIthPhoto:`方法中初始化的变量没有任何联系。

# php - 是什么破坏了另一个页面上的 $_SESSION 工作？

> ID：10803393
> 
> 赞同：0
> 
> 时间：2012-05-29T16:48:51.253
> 
> 标签：php

我有一个奇怪的问题。其中，我使用 $_SESSION 向用户显示登录错误。它工作没有问题。几天前，我已将我的主机从 Plesk 主机更改为运行 safe_mod 关闭的 cPanel 主机。不知何故，我在登录页面的 $_SESSIONs 不起作用。我在索引页面上测试了 $_SESSION 并且它工作正常并且它显示 $_SESSION 函数的工作没有任何问题。两个页面都包含相同的会话起始页面。

当我的函数文件包含在内时，登录页面也没有任何作用。（会话、发布项目、类、函数等什么都没有。）但是即使包含函数文件，一切都可以在索引页面上运行。这里发生了什么事？可能是什么原因？

PS：我正在为会员系统使用 UserCake。我的服务器不允许我在 htaccess 级别打开 PHP 错误，而且似乎什么也没有

```
error_reporting(E_ALL);
ini_set('display_errors', '1'); 
```

在我的错误日志中似乎也没有什么相关的。

编辑：我们成功地使用显示错误

```
ini_set('error_reporting', 8191); 
ini_set('display_startup_errors', 1); 
ini_set('display_errors', 1); 
```

感谢@JA，但似乎没有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:51:48.583

以下解决方案之一。

1.  把 session_start(); 在您从中访问 $_SESSION 的页面顶部。

2.  检查您的 php.ini，如果您不想遵循其他解决方案，可以将会话自动启动设置为 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T16:53:17.527

我知道这个答案很愚蠢......但我认为你错过了 session_start(); 在您的登录页面顶部

```
<?php session_start();?> 
```

或者我猜你必须使用相同的页面进行登录和注销。因此，会话由于配置错误而被取消设置或破坏。如果是这样，请检查一次代码或将文件分开以进行登录和注销...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T16:54:05.167

在文件顶部添加[session_start()](http://php.net/manual/en/function.session-start.php)

```
<?php session_start(); ?> 
```

# csv - 是否可以使用宏将 csv 批量转换为 xls？

> ID：10803395
> 
> 赞同：3
> 
> 时间：2012-05-29T16:48:54.747
> 
> 标签：csv, excel, batch-processing, file-conversion, vba

我有大量`csv`需要`.xls`格式的文件。是否可以使用宏运行批量转换或最好使用另一种语言？

我已使用此代码[http://www.ozgrid.com/forum/showthread.php?t=71409&p=369573#post369573](http://www.ozgrid.com/forum/showthread.php?t=71409&p=369573#post369573)来引用我的目录，但我不确定打开每个文件并保存它们的命令。这是我所拥有的：

```
Sub batchconvertcsvxls()
    Dim wb As Workbook
    Dim CSVCount As Integer
    Dim myVar As String

    myVar = FileList("C:\Documents and Settings\alistairw\My Documents\csvxlstest")
    For i = LBound(myVar) To UBound(myVar)

        With wb

            Application.Workbooks.OpenText 'How do I reference the myvar string ?
            wb.SaveAs '....

        End With

    Next
End Sub

Function FileList(fldr As String, Optional fltr As String = "*.*") As Variant
    Dim sTemp As String, sHldr As String
    If Right$(fldr, 1) <> "\" Then fldr = fldr & "\"
    sTemp = Dir(fldr & fltr)
    If sTemp = "" Then
        FileList = Split("No files found", "|") 'ensures an array is returned
        Exit Function
    End If
    Do
        sHldr = Dir
        If sHldr = "" Then Exit Do
        sTemp = sTemp & "|" & sHldr
    Loop
    FileList = Split(sTemp, "|")
End Function 
```

**编辑：文件是格式为 csv 的 .txt 文件**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-18T10:43:02.713

通过结合 Scott Holtzman 和“ExcelFreak”给出的代码，转换效果很好。最终代码如下所示：

```
Sub CSV_to_XLS()

Dim wb As Workbook
Dim strFile As String, strDir As String

strDir = "U:\path\"
strFile = Dir(strDir & "*.csv")

Do While strFile <> ""

    Set wb = Workbooks.Open(Filename:=strDir & strFile, Local:=True)
    wb.SaveAs Replace(wb.FullName, ".csv", ".xls"), 50 'UPDATE:
    wb.Close True

    Set wb = Nothing
    strFile = Dir
Loop

End Sub 
```

每次打开转换后的 .xls 文件都会引发警告：

“您尝试打开的文件‘文件名’的格式与文件扩展名指定的格式不同。在打开文件之前，请确认文件没有损坏并且来自受信任的来源。您要打开文件吗？现在？”

单击是，然后打开 .xls 文件。

有没有办法摆脱这个警告信息？每次打开 .xls 文件时，Excel 都会引发警告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T17:03:48.877

在更少的代码行中，这应该可以满足您的需求。但是，我会说这可能不是完成它的最快方法，因为您每次都在打开、保存和关闭工作簿。我会寻找一种更快的方法，但我忘记了这个方法。

```
Sub batchconvertcsvxls()

Dim wb As Workbook
Dim strFile As String, strDir As String

strDir = "C:\"
strFile = Dir(strDir & "*.csv")

Do While strFile <> ""

    Set wb = Workbooks.Open(strDir & strFile)
    With wb
        .SaveAs Replace(wb.FullName, ".csv", ".xls"), 50 'UPDATE:
        .Close True
    End With
    Set wb = Nothing
Loop

End Sub 
```

** 更新 ** 您需要 .xls 文件的正确文件格式枚举。我认为它是 50，但如果不是，您可以在此处查看[Excel File Type Enumeration](http://msdn.microsoft.com/en-us/library/bb241279%28v=office.12%29.aspx)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T17:08:12.267

Scott Holtzman 的代码几乎为我做到了。我必须进行两项更改才能使其正常工作：

1.  他忘记添加使我们的循环继续下一个文件的行。循环前的最后一行应为

    `strFile = Dir`

2.  Workbooks.Open 方法没有按预期读取我的 CSV 文件（整行最终成为第一个单元格中的文本）。当我添加参数`Local:=True`时，它起作用了：

    `Set wb = Workbooks.Open(Filename:=strDir & strFile, Local:=True)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-15T21:30:06.317

这至少在 Excel 2013 上正常工作。使用 FileFormat:=xlExcel8 参数而不是文件类型标记 50 创建打开时没有安全问题的文件。

子 CSV_to_XLS()

将 wb 调暗为工作簿 将 strFile 调暗为字符串，strDir 作为字符串

strDir = "C:\temp\" strFile = Dir(strDir & "*.csv")

Do While strFile <> ""

```
Set wb = Workbooks.Open(Filename:=strDir & strFile, Local:=True)
wb.SaveAs Replace(wb.FullName, ".csv", ".xls"), FileFormat:=xlExcel8
wb.Close True

Set wb = Nothing
strFile = Dir 
```

环形

结束子

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-19T16:27:33.040

这是一个很好的问题，我在互联网上找到了几个答案。只需进行非常小的更改（我无法编辑任何已发布的代码），我可以让事情变得更好：

```
Sub CSV_to_XLSX()

Dim wb As Workbook
Dim strFile As String, strDir As String

strDir = "C:\Users\acer\OneDrive\Doctorado\Study 1\data\Retest Bkp\Day 1\Sart\"
strFile = Dir(strDir & "*.csv")

Do While strFile <> ""

    Set wb = Workbooks.Open(Filename:=strDir & strFile, Local:=True)
    With wb
        .SaveAs Replace(wb.FullName, ".csv", ".xlsx"), 51
        .Close True
    End With
    Set wb = Nothing
    strFile = Dir
Loop

End Sub 
```

# ios - UITableView no requeue / redraw of cells on scroll

> ID：10803396
> 
> 赞同：0
> 
> 时间：2012-05-29T16:49:30.550
> 
> 标签：ios, uitableview

I've noticed the cells are taken out of memory when scrolled out of view and then added back into memory when scrolled into view.

I get the performance reasons for this, but since my table only has a couple of cells out of view, is there a way to turn off this caching feature?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:54:50.217

您可以尝试为每个索引路径使用不同的单元格标识符。

这样，`UITableView`将无法找到要出列的单元格，并且将提供一个新单元格。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSString * CellIdentifier = [NSString stringWithFormat:@"%d - %d", indexPath.row, indexPath.section];
    UITableViewCell * cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (!cell) cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

    return cell;
} 
```

您也可以完全跳过排队/出队，并自己保留对它们的引用，然后将它们返回`cellForRowAtIndexPath`：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    return [myCells objectAtIndex:indexPath.row];
} 
```

保存您的 s`myCells`的数组在哪里？`UITableViewCell`

# image - Can't serve images on an apache server

> ID：10803397
> 
> 赞同：0
> 
> 时间：2012-05-29T16:49:40.670
> 
> 标签：image, apache

I need to do some server migration stuff for my new job and I'm having a little trouble serving images. Using the chrome debugger, I get the following information when I try and access an image:

```
Request Method:GET
Status Code:500 Internal Server Error

Request Headersview source
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:max-age=0
Connection:keep-alive
Host:*.*.*.* ************(I replaced actual ip with stars)
User-Agent:Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.52 Safari/536.5

Response Headersview source
Connection:close
Content-Length:0
Content-Type:image/gif
Date:Tue, 29 May 2012 16:44:00 GMT
Server:Apache/2.2.3 (Red Hat) 
```

I tried chmod the entire directory where the image is stored to chmod 777 (I thought it was a permissions issue) but even that is not working.

Any ideas? Thanks.

# jquery - 自动完成电子邮件跨度不起作用

> ID：10803411
> 
> 赞同：0
> 
> 时间：2012-05-29T16:50:38.997
> 
> 标签：jquery, css, jquery-ui

我正在使用 jQuery UI 构建一个自动完成的电子邮件字段。
表格工作正常，但我有两个问题：

**第一个**

电子邮件不断彼此相邻添加，并在包含之外构建，`div`如下所示：

[屏幕视图](http://content.screencast.com/users/minagabriel/folders/Jing/media/bdecb895-23ce-40ad-bcdd-9e7d482863cf/2012-05-29_1246.png)

**代码**

```
<style type="text/css">

    #emailDiv
    {
        width: 300px;
        padding: 3px 3px 0;
        margin: 0 auto;
        border: 1px solid #aaa;
        background-color: #fff;
        cursor: text;
        position: absolute;
        float: left;
    }
    #email
    {
        border : none
    }
    #emailDiv span
    { 
       border:solid 1px black

        }

</style>
<script type="text/javascript">
    $(function() {
        $("#emailDiv").click(function() { $("#email").focus(); })
        $("#email").autocomplete({
            source: function(request, response) {
                $.ajax({
                    url: "AutoComplete.asmx/GetEmails",
                    data: "{ 'mail': '" + request.term + "' }",
                    dataType: "json",
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    dataFilter: function(data) { return data; },
                    success: function(data) {
                        response($.map(data.d, function(item) {
                            return {
                                value: item.Emails
                            }
                        }))
                    },
                    error: function(XMLHttpRequest, textStatus, errorThrown) {
                        alert(textStatus);
                    }
                });
            },
            select: function(e, ui) {
                var list = ui.item.value;
                var span = $("<span>").text(list);
                span.insertBefore("#email");

            },

            change: function() {
                $("#email").val("");

            }
        });
    });

</script>
</head>
 <body>
<form id="form1" runat="server">
<div>
<label>Email: </label>
<div id="emailDiv">
    <input type="text" id="email" />   
</div>
</div>
</form>
</body>
 </html> 
```

**第二个**

更改后我无法将电子邮件文本字段设置为空我必须单击外部某处`emailDiv`使其为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:07:33.660

如果我确实理解您的问题更正：

**对于你的第一个问题**

这取决于您的文档类型和剩余的全局 CSS 重置声明，但通过此示例，它解决了您的问题：

请参阅这个[工作小提琴](http://jsfiddle.net/zuul/QdhnF/)示例！

**CSS**

```
#emailDiv {
    width: 300px;
    padding: 3px 3px 0;
    margin: 0 auto;
    border: 1px solid #aaa;
    background-color: #fff;
    cursor: text;
    position: absolute;
    float: left;
}
#email {
    border: 0 none;
}
#emailDiv span {
    border: 1px solid black;
    float: left;
    padding: 2px;
    margin: 2px;
}
.clear {
    clear:both!important;
} 
```

**模拟 HTML**

```
<form id="form1" runat="server">
    <div>
        <label>Email: </label>
        <div id="emailDiv" class="clear">
            <span>soneone@something.com</span>
            <span>soneone@thing.com</span>
            <span>soneone@ss.com</span>
            <span>soneone@aa.com</span>
            <span>soneone@dd.com</span>
            <input type="text" id="email" />   
        </div>
    </div>
</form> 
```

* * *

**到你的第二个问题**

Add `$(this).val(''); return false;` to the end of your select function, this will prevent the value from being updated.

See this [Working Fiddle](http://jsfiddle.net/zuul/6tMwG/) Example!

```
$(function() {
  $("#emailDiv").click(function() {
    $("#email").focus();
  });

  $("#email").autocomplete({
    source: function(request, response) {
      $.ajax({
        url: "AutoComplete.asmx/GetEmails",
        data: "{ 'mail': '" + request.term + "' }",
        dataType: "json",
        type: "POST",
        contentType: "application/json; charset=utf-8",
        dataFilter: function(data) { return data; },
        success: function(data) {
          response($.map(data.d, function(item) {
            return {
              value: item.Emails
            }
          }));
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) {
            alert(textStatus);
        }
      });
    },
    select: function(e, ui) {
      var list = ui.item.value;
      var span = $("<span>").text(list);
      span.insertBefore("#email");

      // clear the input
      $(this).val(''); return false;
    }
  });
}); 
```

*It seems that on the source code, they check for false!*

# iphone - 什么时候*必须*一个应用程序包含 Reachability 类来测试网络可达性？

> ID：10803414
> 
> 赞同：0
> 
> 时间：2012-05-29T16:50:59.490
> 
> 标签：iphone, ios, ipad, reachability, cfnetwork

根据[Cocoa with Love](http://cocoawithlove.com/2010/04/network-data-requirements-on-iphone-os.html)的说法，当应用程序需要 WiFi（而不是蜂窝网络）时，需要可达性，例如，如果应用程序加载大量视频并且不打算通过 3G 使用。

我的应用程序使用互联网，无论是 WiFi 还是 3G，并且只从网络服务下载小数据。

有人可以澄清应用程序必须在哪些情况下进行此可达性测试吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:04:39.313

由于您仅使用互联网连接进行小数据下载，因此您真的不需要关心您使用的是 WiFi 还是 3G。

诚然，蜂窝纽托克有一些限制。查看第 9.3 和 9.4 段[AppStore Review Guidelines](https://developer.apple.com/appstore/resources/approval/guidelines.html)。您需要一个开发人员 ID 才能查看它，所以我认为我们不允许在这里引用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:06:41.967

如果您的应用程序需要知道“何时”访问网络的能力发生了变化，则需要可达性。

我已经看到建议总是首先尝试访问您的资源，如果您失败 - 使用来自 Reachability 的数据来找出原因。

# ruby - Ruby instance_eval confusion with load`

> ID：10803415
> 
> 赞同：1
> 
> 时间：2012-05-29T16:51:01.213
> 
> 标签：ruby, metaprogramming, minitest

I am trying to test a single method in ruby. It is in a separate file so basically:

a.rb:

```
def my_method
  ...
end 
```

in my a_spec.rb

```
require 'minitest/autorun'

Object.instance_eval do
  load("path_to/a.rb")

  def hello_world
    ...
  end
end 
```

When I try to run my test, it says that my_method is a private method while I can actually call `Object.hello_world` outright. What gives?

Also, is there an easier way to test plain ruby methods(no classes or modules) with minitest?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:37:17.510

执行上述加载不会将*a.rb*的方法作为单例方法添加到 Object。相反，它将方法添加到全局命名空间。（您在 self 引用 Object 类的块内进行加载的事实是无关紧要的。）

使用上面的代码，您应该能够在测试中直接调用 *my_method* ：

```
class MyTest <  MiniTest::Unit::TestCase

  def test_my_method
    assert my_method
  end

  def test_hello_world
    assert Object.hello_world
  end
end 
```

# javascript - 覆盖价值属性

> ID：10803423
> 
> 赞同：0
> 
> 时间：2012-05-29T16:51:26.093
> 
> 标签：javascript, ios, uiwebview, file-io

可以覆盖标签中的 value 属性吗？我的 JavaScript 代码

```
var element = document.createElement('input');
element.type = 'FILE';
element.__defineGetter__('value',function(){ return 'ololo'; });
alert(element.value); 
```

它显示空字符串。我也尝试用原型覆盖“价值”

```
function BPFILEINPUT(value)
{
    this.value = value;
}
BPFILEINPUT.prototype = element;
var myFileInput = new BPFILEINPUT('ololo');
alert(myFileInput.value); 
```

它工作，但崩溃

```
form.appendChild(myFileInput); 
```

我尝试通过 4shared.com 上的上传表单测试

```
var uplElems = aUploadForm.elements;

   for (var i = 0; i < uplElems.length; i++) {
       var currentUploadElement = uplElems[i]
       if (currentUploadElement.type == 'file') {
           if (currentUploadElement.value == '') {
               // skip
           } else {
               if (!checkFileLength(currentUploadElement)) {
                  return false;
               }
               filesToUpload += getNumberOfSelectedFiles(currentUploadElement);
           }
       }
   }
   if (filesToUpload < 1) {
       alert('You didn\'t select any file to upload yet.');
       return false;
 } 
```

**更新**

我使用 UIWebView。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T16:55:00.423

`<input type="file">`AFAIK，由于*安全*原因，您不能以编程方式设置值。用户必须明确点击它来设置它的值。

# .net - .Net UDP 使用多线程

> ID：10803424
> 
> 赞同：4
> 
> 时间：2012-05-29T16:51:27.670
> 
> 标签：.net

我有几辆车每 10 秒后通过 GPS 向服务器发送数据，服务器应该监听并解码数据以存储在数据库（Sql Server）中。每分钟将有数百个条目。我现在有一个单线程代码，这并不是很有帮助。在一个条目的处理时间内，很少有条目会被丢弃。我想创建一个多线程代码，以便当一个线程忙于处理时，数据包被移动到下一个可用线程。

据我所知，在查看了几个论坛之后，我意识到“yield”将有助于解决这个问题。但是我找不到合适的例子来说明如何使用产量？

有人可以通过发布一些示例来帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:09:52.720

我建议在接收时设置一个异步回调，然后将数据推送到队列中，从那里处理另一个线程上的队列。确保锁定该队列或使用 ConcurrentQueue 以免将线程碰撞在一起。

# sharepoint - SharePoint 设计器因缺少自定义活动所需的参数而出错

> ID：10803434
> 
> 赞同：0
> 
> 时间：2012-05-29T16:52:18.310
> 
> 标签：sharepoint, sharepoint-designer, sharepoint-workflow

我正在为 SharePoint 2010 制作自定义活动。当我在 SharePoint Designer 中删除活动并提供参数值时，我收到一个神秘的验证错误，它只是说：

> 此操作缺少必需的参数。

这是该操作的源代码：

```
using System;
using System.ComponentModel;
using System.Diagnostics;
using System.IO;
using System.Workflow.ComponentModel;
using System.Workflow.Activities;
using System.Workflow.ComponentModel.Compiler;
using Microsoft.SharePoint;
using Microsoft.SharePoint.WorkflowActions;

namespace SharePoint.Activities.IO
{
    public partial class CopyFile : SequenceActivity
    {
        public CopyFile()
        {
            InitializeComponent();
        }

        public static DependencyProperty SourceDirectoryProperty = DependencyProperty.Register("SourceDirectory", typeof(string), typeof(CopyFile));
        public static DependencyProperty TargetDirectoryProperty = DependencyProperty.Register("TargetDirectory", typeof(string), typeof(CopyFile));
        public static DependencyProperty ActionResultProperty = DependencyProperty.Register("ActionResult", typeof(string), typeof(CopyFile));
        public static DependencyProperty CreateDateProperty = DependencyProperty.Register("CreateDate", typeof(DateTime), typeof(CopyFile));
        public static DependencyProperty CompletionDateProperty = DependencyProperty.Register("CompletionDate", typeof(DateTime), typeof(CopyFile));
        public static DependencyProperty WFContextProperty = DependencyProperty.Register("WFContext", typeof(WorkflowContext), typeof(CopyFile));

        [Description("Path the files to perform the operation on")]
        [Browsable(true)]
        [DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
        [ValidationOption(ValidationOption.Required)]
        public string SourceDirectory
        {
            get { return (string)GetValue(SourceDirectoryProperty); }
            set { SetValue(SourceDirectoryProperty, value); }
        }
        [Description("Path the files are copied to")]
        [Browsable(true)]
        [DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
        [ValidationOption(ValidationOption.Required)]
        public string TargetDirectory
        {
            get { return (string)GetValue(TargetDirectoryProperty); }
            set { SetValue(TargetDirectoryProperty, value); }
        }
        [Description("Once the the operation completes, this is set to OK or the exception information")]
        [Browsable(true)]
        [DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
        [ValidationOption(ValidationOption.Optional)]
        public string ActionResult
        {
            get { return (string)GetValue(ActionResultProperty); }
            set { SetValue(ActionResultProperty, value); }
        }
        [Description("When the request was created")]
        [Browsable(true)]
        [DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
        [ValidationOption(ValidationOption.Optional)]
        public DateTime CreateDate
        {
            get { return (DateTime)GetValue(CreateDateProperty); }
            set { SetValue(CreateDateProperty, value); }
        }
        [Description("When execution stoped")]
        [Browsable(true)]
        [DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
        [ValidationOption(ValidationOption.Optional)]
        public DateTime CompletionDate
        {
            get { return (DateTime)GetValue(CompletionDateProperty); }
            set { SetValue(CompletionDateProperty, value); }
        }

        [Browsable(true)]
        [DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
        public WorkflowContext WFContext
        {
            get { return (WorkflowContext)GetValue(WFContextProperty); }
            set { SetValue(WFContextProperty, value); }
        }

        //protected override void Initialize(IServiceProvider provider)
        //{
        //    TraceIn();
        //    base.Initialize(provider);
        //    TraceOut();
        //}

        protected override ActivityExecutionStatus Execute(ActivityExecutionContext executionContext)
        {
            TraceIn();

            Debugger.Break();

            var isSiteAdmin = false;
            CreateDate = DateTime.Now;
            try
            {
                // Needs administrative credentials to get the web application properties ino
                SPSecurity.RunWithElevatedPrivileges(delegate
                {
                    using (var site = new SPSite(WFContext.Site.ID))
                    {
                        using (var web = site.AllWebs[WFContext.Web.ID])
                        {
                            isSiteAdmin = web.CurrentUser.IsSiteAdmin;
                            if (string.IsNullOrEmpty(SourceDirectory)) throw new ArgumentException("SourceDirectory cannot be null or empty");
                            if (!Directory.Exists(SourceDirectory)) throw new DirectoryNotFoundException("Could not find source directory: \"" + SourceDirectory + "\"");

                            if (string.IsNullOrEmpty(TargetDirectory)) throw new ArgumentException("TargetDirectory cannot be null or empty");
                            if (!Directory.Exists(TargetDirectory)) throw new DirectoryNotFoundException("Could not find target directory: \"" + TargetDirectory + "\"");
                            // Do something 
                            Debug.WriteLine(string.Format("Doing something amazing from {0} and moving it to {1}", SourceDirectory, TargetDirectory));
                        }
                    }
                });

                ActionResult = "OK";
            }
            catch (Exception ex)
            {
                ActionResult = isSiteAdmin ? ex.ToString() : ex.Message;
            }
            CompletionDate = DateTime.Now;

            var result = base.Execute(executionContext);

            TraceOut();

            return result;
        }

        private static void TraceIn()
        {
            Trace("Entering");
        }

        private static void TraceOut()
        {
            Trace("Exiting");
        }

        private static void Trace(string direction)
        {
            Debugger.Launch();
            var stackTrace = new StackTrace(2, false);
            var frame = stackTrace.GetFrame(0);
            Debug.WriteLine(direction + " " + frame.GetMethod().Name);
        }
    }
} 
```

这是 .action 文件。

```
<?xml version="1.0" encoding="utf-8" ?>
<WorkflowInfo>
    <Actions
        Sequential="then"
        Parallel="and">
        <Action
            Name="IO Activities"
            ClassName="SharePoint.Activities.IO.CopyFile"
            Assembly="SharePoint.Activities.IO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=abfb622251cf6982"
            Category="Custom Actions"
            AppliesTo="all">
            <RuleDesigner
                Sentence="CopyFiles from %1 to %2">
                <FieldBind
                    Field="SourceDirectory"
                    DesignerType="String"
                    Id="1"/>
                <FieldBind
                    Field="TargetDirectory"
                    DesignerType="String"
                    Id="2"/>
            </RuleDesigner>
            <Parameters>
                <Parameter
                    Name="SourceDirectory"
                    Type="System.String, mscorlib"
                    Direction="In"
                    DesignerType="StringBuilder"
                    Description="Directory where the source files are to move" />
                <Parameter
                    Name="TargetDirectory"
                    Type="System.String, mscorlib"
                    Direction="In"
                    DesignerType="StringBuilder"
                    Description="Directory where the files will be placed" />
                <Parameter
                    Name="ActionResult"
                    Type="System.String, mscorlib"
                    Direction="Optional" 
                    DesignerType="Hide" />
                <Parameter
                    Name="CreateDate"
                    Type="System.DateTime, mscorlib"
                    Direction="Optional" 
                    DesignerType="Hide" />
                <Parameter
                    Name="CompletionDate"
                    Type="System.DateTime, mscorlib"
                    Direction="Optional" 
                    DesignerType="Hide" />

                <Parameter 
                    Name="WFContext" 
                    Type="Microsoft.SharePoint.WorkflowActions.WorkflowContext, Microsoft.SharePoint.WorkflowActions" 
                    DesignerType="Hide" />
            </Parameters>
        </Action>
    </Actions>
</WorkflowInfo> 
```

这是[我在 social.msdn.microsoft.com 上的帖子](http://social.msdn.microsoft.com/Forums/en-US/sharepoint2010general/thread/ce5f8fe2-1976-44ae-8459-f431aa7d07fd)的链接。

## 更新

我什至尝试通过注释掉 .actions 文件中的参数、类中的属性以及注释掉 DependencyProperties 来删除所有参数。我仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T16:15:11.393

最终，看起来问题（在我把项目拆掉并重新开始之后）是不正确的设计器类型和丢失的 .

这是旧代码：

```
<FieldBind Field="Result" DesignerType="TextArea" Text="Action result message; returns OK on success" Id="3" /> 
```

这是正确的代码：

```
<FieldBind Field="Result" DesignerType="ParameterNames" Text="Action result message; returns OK on success" Id="3" /> 
```

一旦进行了更改，一切似乎都在工作。

# vim - 如何将文本从 vi 复制/粘贴到不同的应用程序

> ID：10803436
> 
> 赞同：3
> 
> 时间：2012-05-29T16:52:31.733
> 
> 标签：vim, vi

是否可以在不使用 :vs 的情况下复制/粘贴文本？如果我打开了两个 vi 窗口，我可以用鼠标复制/粘贴文本。我怎样才能用键盘做到这一点？

我发现了两个与此类似的现有问题，但都没有回答我的问题。
[如何将vi中的代码复制到剪贴板](https://stackoverflow.com/questions/5532878/how-to-copy-codes-in-vi-to-clipboard)
[将内容从一个文件复制并粘贴到VI中的另一个文件](https://stackoverflow.com/questions/4620672/copy-and-paste-content-from-one-file-to-another-file-in-vi)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T17:28:12.453

我敢肯定有很多方法，但我使用`marks`and来做到这一点`registers`。

## 分数

您可以在文件中的任何位置使用标记，`m`后跟要使用的标记的名称。

您可以使用 a 和 z（大写和小写）之间的任何字母来命名您的标记。

您可以使用 键转到包含标记的行`'`。

例如，`mx`用*标记 x*标记一行并将 `'x`光标移动到包含*标记 x*的行。

您可以使用反引号键转到标记的确切位置：`

例如，要从当前光标位置拉到包含标记 x 的行，您可以输入`y'x`

## 寄存器

为了使用剪贴板，您需要使用寄存器，它表示您可以存储您拉出的文本的位置。

就像您可以为每个字符使用不同的标记一样，您可以命名要提取文本的寄存器。

`"`您在拉/放时使用键来引用寄存器。

例如`"ay'x`，将在光标和包含 x 的行之间拉出文本以*注册 a*。

剪贴板由一个特殊的寄存器表示：`*`或者`+`取决于您的环境。

要将光标和包含标记 x 的行之间的文本拉到剪贴板，请输入以下内容：`"+y'x`

这表示：使用缓冲区`+`（剪贴板）来存储光标和包含标记 x 的行之间的文本。

完成此操作后，您的文本将在剪贴板中。您可以使用 CONTROL-V 将其粘贴到其他应用程序中。

注意：在某些环境中，剪贴板由名为`*`.

* * *

这可能听起来势不可挡，但一旦你习惯了它，它就会非常强大。

我每天使用数百次。

如果您正在编辑具有多个关键兴趣点的文件，您可以用不同的标记标记文件的每个部分，并在需要编辑的代码之间快速移动光标。

同样，如果您需要重复复制多段文本，则可以将每段文本存储在不同的寄存器中，以提高粘贴效率。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T17:20:19.603

您可以使用`+`寄存器复制/粘贴（阅读更多：[访问系统剪贴板](http://vim.wikia.com/wiki/Accessing_the_system_clipboard)）

`"+gyy`将拉出一条线，并将其放入`+`寄存器中。您可以`"+p`在正常模式下或`Ctrl+r +`在插入模式下粘贴到其他窗口中。

如果您不想使用拆分窗口，除了使用系统剪贴板之外，真的没有其他方法可以在窗口之间粘贴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-12T14:22:05.340

@up 用尽了这个主题。我可以补充一点，大多数与系统组合键相关的组合在 Gvim 的配置中找到你（例如，用于 CTRL+C CTRL+V 等的 Windows 映射在 mswin.vim 中）

# grails - 为什么实体ID在合并后递增？[圣杯]

> ID：10803442
> 
> 赞同：0
> 
> 时间：2012-05-29T16:52:51.547
> 
> 标签：grails, groovy, grails-orm

我想创建一个用于更新实体的通用代码。这是我想出的：

```
def update(id, Object updatedEntity) {
    def entity = findById(id)
    if (entity) {
        updatedEntity.id = id
        def mergedEntity = updatedEntity.merge()
        if (mergedEntity) {
            return mergedEntity
        } else {
            throw new ValidationException("Cannot update.", mergedEntity.errors)
        }
    } else {
        throw new IllegalArgumentException("No ${domainClass.getSimpleName()} with id=${id} found.")
    }
} 
```

为什么`mergedEntity`总是有增量`id`值（我的意思是如果`updatedEntity.id = 1`，那么`mergedEntity.id`将是 2。我该如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:47:55.357

我找到了导致所描述行为的原因：我的`id`参数始终是 String 的实例，所以当我传递 id = 1 时，实际的 id 值为“1”并且它不被视为 hibernate `id`。

除此之外，为了完成这项工作，我还必须覆盖`version`属性。

# java - 由于重绘方法不可见的对象 - Java Swing

> ID：10803445
> 
> 赞同：2
> 
> 时间：2012-05-29T16:53:05.817
> 
> 标签：java, swing, netbeans, repaint

问题来了，因为我覆盖了 jPanel 的paintComponent 方法，所以当我重新绘制所有对象时，所有对象都被隐藏，直到我聚焦它们。我需要覆盖paintComponent 方法，因为它是我在互联网上找到的唯一一个更改jFrame 的背景图像的答案。

所以首先我创建了一个 jPanel 类：

```
 public class JPanelFondoPrincipal extends javax.swing.JPanel {

    public JPanelFondoPrincipal(){    
        this.setSize(800,500);
    }

    @Override
    public void paintComponent(Graphics g){
        super.paintComponent(g);
        Dimension tamanio = getSize();
        ImageIcon imagenFondo = new ImageIcon(getClass().getResource("/images/fondo_principal.png"));        
        g.drawImage(imagenFondo.getImage(),0,0,tamanio.width, tamanio.height, null);        
        setOpaque(false);
    }
} 
```

在我的 jPanelForm 中：

```
private void formWindowOpened(java.awt.event.WindowEvent evt) {                                  
    // TODO add your handling code here:
    JPanelFondo p = new JPanelFondo();
    this.add(p);
    validate();
    p.repaint();
} 
```

我已经尝试将所有对象（标签、文本字段...）添加到新面板中，以便在重新绘制后添加它，并手动设置所有对象可见，但一切仍然不可见。

非常感谢，我需要在 6 天内完成应用程序，而且我每分钟都快疯了

* * *

**编辑：感谢CARDLAYOUT解决**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T16:54:28.307

*Swing 程序应该覆盖paintComponent() 而不是覆盖paint()。*

[http://java.sun.com/products/jfc/tsc/articles/painting/](http://java.sun.com/products/jfc/tsc/articles/painting/)

你应该`super.paintComponent(g);`首先在覆盖的paintComponent()中调用；

```
 public void paintComponent(Graphics g){
        super.paintComponent(g);
        Dimension tamanio = getSize();
        ImageIcon imagenFondo = new ImageIcon(getClass().getResource("/images/fondo_principal.png"));        
        g.drawImage(imagenFondo.getImage(),0,0,tamanio.width, tamanio.height, null);        
        setOpaque(false);
    } 
```

[这是](https://stackoverflow.com/questions/776180/how-to-make-canvas-with-swing)在 JPanel 组件上处理绘画的正确方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T17:27:38.053

*   不要`add`/`remove` `JPanels`或其内容在运行时，使用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)代替

*   你的`JPanelFondo p = new JPanelFondo();`不对应`public class JPanelFondoPrincipal extends javax.swing.JPanel {`

*   为了获得更好的帮助，请尽快使用[SSCCE](http://sscce.org/)编辑您的问题，

# java - 如何使用 ThreadPoolTask Executor 获取线程状态？

> ID：10803446
> 
> 赞同：1
> 
> 时间：2012-05-29T16:53:08.843
> 
> 标签：java, multithreading, spring

我正在修改一些遗留代码以使用 Spring 的`ThreadPoolTaskExecutor`. 此应用程序有一个父代理进程，它异步触发线程，然后使用 getState() 调用监视它们的状态。现在使用`ThreadPoolTaskExecutor`'s`execute()`方法来触发子线程`getState()`，即使在子线程的 run() 方法完成之后，它也总是返回“NEW”。

一种替代方法是在提供状态信息的子线程对象中手动维护一个属性，但我想知道在使用`ThreadPoolTaskExecutor`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:08:53.003

而是使用 Runnable 使用 Callable，而不是使用执行使用提交。

```
Sample usage for Callable

    private class TaskCallable implements Callable<SomeResponse> {
        private final SomeRequest request;

        public TaskCallable (final SomeRequest request) {
            this.request = request;
        }

        public SomeResponse call() throws Exception {
            SomeResponse response = someService.getData(request);
            return response;
        }
    }

    TaskCallable callable = new TaskCallable(request);
    Future<SomeResponse> future = pooledExecutor.submit(callable); 
```

你可以检查future.isDone()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:19:17.727

您可能正在传递一个扩展`Thread`到`execute()`何时应该传递一个实现的类的类`Runnable`。如果是这种情况，那么您的`Thread`课程将*永远不会*开始，并且将始终显示为`NEW`有意义的状态。

该[`execute()`方法](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/scheduling/concurrent/ThreadPoolTaskExecutor.html#execute%28java.lang.Runnable%29)需要一个`Runnable`类。您的代码工作的唯一原因是它`Thread`也实现了可运行。该类`ThreadPoolTaskExecutor`在内部管理自己的线程。然后，您的`Thread`类永远不会作为线程启动，只会`run()`调用它的方法。

# c++ - 为什么在这种情况下不调用复制构造函数

> ID：10803449
> 
> 赞同：4
> 
> 时间：2012-05-29T16:53:26.183
> 
> 标签：c++, constructor, copy-constructor, most-vexing-parse

说，我有一个A类

现在当我在做

```
A a(A()); 
```

到底发生了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T16:58:45.533

尽管有外表，但`A a(A());`不是一个对象定义。相反，它声明了一个被调用的函数，该函数`a`返回 an`A`并接受一个指向函数的指针，该函数不接受任何内容并返回一个`A`.

如果你想要一个对象定义，你必须添加另一对括号：

```
A a((A())); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-29T16:56:02.813

如果编写正确 -`A a((A()))`编译器直接在构造函数上下文中创建临时文件以防止额外的副本。这称为**复制省略**。与 RVO 和 NRVO 一起查找。

从您的评论中：

```
A a = A(); 
```

这**完全**等同于

```
A a((A())); // note extra pair of parenthesis 
```

正如@Naveen 正确指出的那样，`A a(A());`它受到大多数令人烦恼的解析的影响，因此您需要一组额外的括号来实际创建一个对象。

# iphone - 使用应用内购买解锁 iPad UI？

> ID：10803458
> 
> 赞同：2
> 
> 时间：2012-05-29T16:54:05.530
> 
> 标签：iphone, ios, in-app-purchase

> **可能重复：**
> [将通用应用程序作为缩放的 iPhone 应用程序运行？](https://stackoverflow.com/questions/10804047/running-a-universal-app-as-a-scaled-iphone-app)

我将为我的一个较新的应用程序尝试一种更具创造性的商业模式。我最初将该应用程序构建为一个通用应用程序，然后仅将其作为 iPhone 发布——当然，它仍然按比例运行。我正在考虑使用 IAP 来解锁真正的全高清 iPad UI。有没有人这样做过？想法？我喜欢这个想法，因为它仍然允许使用该功能而无需支付升级费用，但随后允许想要更简洁界面的用户只需多花几美元就可以拥有一个。我主要担心的是 Apple 不会喜欢这个，尽管我没有找到任何文档直接说明它是不允许的。

# github - 我如何自托管 Jekyll？

> ID：10803469
> 
> 赞同：2
> 
> 时间：2012-05-29T16:55:09.770
> 
> 标签：github, deployment, jekyll

我不想使用 github 来托管我的新作品集，我想从我自己的网站托管它。我该如何正确地做到这一点？显然，简单地上传所有文件是行不通的（我只看到 Jekyll 模板文本）。

有人做过吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T16:56:36.507

您必须使用 Jekyll 生成站点，然后将生成的文件上传到您的 Web 服务器。Jekyll 的[使用](https://github.com/mojombo/jekyll/wiki/Usage)和[部署](https://github.com/mojombo/jekyll/wiki/Deployment)文档有更详细的解释。

# captcha - Confident CAPTCHA 的可用性和安全性如何？还有其他选择吗？

> ID：10803472
> 
> 赞同：1
> 
> 时间：2012-05-29T16:55:35.403
> 
> 标签：captcha, spam-prevention

我正在尝试找到一个更容易在我的网站上使用的验证码。我目前有 reCAPTCHA，但用户很难在第一次就正确使用这些词。

我遇到了 Confident CAPTCHA（[在这里](http://confidenttechnologies.com/confident-captcha-demo/)），想知道你们对此有何看法。

1.  以前有人用过吗？
2.  它有多安全？
3.  是否有类似的 CAPTCHA，不包括 reCAPTCHA？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T00:02:54.183

有趣的验证码，我以前没见过这个。

我将尝试解决您关于`How safe is it?`. 没有可用的文档或示例代码可供检查，因此分析基于多次使用。

看起来它应该是相当安全的。我看到它使用第 3 方服务，因此您将依赖 API 调用来生成 HTML 标记并验证验证码。

在他们的演示中，您需要从总共 9 个图像中选择 4 个图像，这意味着猜测正确值的概率约为`0.000330688%`( `1/9 * 1/8 * 1/7 * 1/6`)。

它本质上是通过根据您选择的图像序列创建一个 alpha 验证码来工作的。因此，服务器生成一个随机挑战（猫、车辆、饮料、房子）并将每个元素与范围 [AZ] 中的一个随机字母相关联。

单击图像序列会根据分配给每个图像的字母（例如 PKIR）创建一个验证码，如果`cat = P`, `vehicle = K`, `drink = I`,`house = R`将被放置在隐藏的输入中并与表单一起提交。

因此，通过验证码的唯一方法是提供与服务器端图像序列一致的代码。

我会得出结论，它是相对安全的，因为没有办法仅在客户端击败验证码（[例如，参见这个问题](https://stackoverflow.com/q/10609201/892493)）。因为他们没有理由向客户（浏览器）展示与解决方案相关的任何内容；获得正确验证码的唯一方法是以正确的顺序选择正确的图像，这似乎是合乎逻辑的。

**结论：**

*   乍一看，验证码似乎是安全的（不容易绕过）。
*   这种特定的验证码可能更难转嫁给人类求解器（积极的）
*   根据数据库中对象和图像的数量，可能会生成单词到图像的数据库。
*   验证码的一个潜在缺点是某些单词可能需要对英语有中等程度的理解；非英语用户可能会被完全切断，或者至少必须付出额外的努力才能将单词翻译成他们的母语。
*   您可能想在移动设备上对此验证码进行可用性检查（只是一个想法）。

那是我的2美分，希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T19:27:12.850

我将它与广告一起使用，这非常安全。

关于英语，api支持多种语言，并根据浏览器语言调整问题。

我使用 GoogleTranslation 来帮助那些说 ConfidentCaptcha 无法使用的语言的人。

到目前为止没有问题。他们反应迅速，提供了很好的支持。

关于移动，如果你不使用广告，你有一个特殊的移动模式，这使得它非常容易适应微型设备。

# php - Informix 的变量绑定返回错误

> ID：10803475
> 
> 赞同：4
> 
> 时间：2012-05-29T16:55:43.733
> 
> 标签：php, pdo, informix

当我添加 :start 作为要跳过的参数时，出现以下错误。我知道如果我对 SKIP/NEXT 值进行硬编码并且 :customerID 保持不变，SQL 查询就可以工作。如果我删除 :start 子句并将其保留为`SKIP 1 FIRST 5 ... WHERE t1.customer_num = :customerID ...`正常工作。我找不到错误发生的原因。

错误

```
exception 'PDOException' with message 'SQLSTATE[HY004]: Invalid SQL data type: -11064 [Informix][Informix ODBC Driver]SQL data type out of range 
```

我试过的东西：

1.  使用 BindParam 而不是 BindValue 通过引用来绑定参数。
2.  使用 PDO_STR 尝试将 :start 绑定为字符串。没有成功。
3.  SQL 查询本身中 :start 的硬编码值。这行得通。
4.  使用`$sql->bindValue(':start', (int) 1, PDO:PARAM_INT);`——不行。
5.  通过首先分配给 PHP 变量来尝试数字 4，结果相同。

有什么建议么？我正在使用 PHP 5.3。（最近的东西）和 Informix 11 使用 PDO 连接器。同样，它仅适用于 customerID，但不适用于 :start 并返回上述错误。

```
$sql = null;
$sql= $conn->prepare('SELECT SKIP :start FIRST 5 TRIM(loc_esi_id) FROM customer       t1,customer_ts_data t2 WHERE t1.customer_num = :customerID AND t1.customer_num = t2.customer_num');

//Bind values to parameters(by value)
$sql->bindValue(':start',   $start ,PDO::PARAM_INT);
$sql->bindValue(':customerID', $customerID, PDO::PARAM_INT);

//$sql->bindParam(':count',$count,PDO::PARAM_INT);
$results = null;
try{
$sql->execute();
$results = $sql->fetchAll();
} catch (PDOException $e) {
//Error Handling, etc. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T01:00:04.723

通常，`:start`占位符的表示法既不是标准 SQL 语法也不是（本机）Informix 语法。您需要使用 a`?`作为占位符，因此：

```
$sql= $conn->prepare('SELECT SKIP ? FIRST 5 TRIM(loc_esi_id)
                        FROM customer t1
                        JOIN customer_ts_data t2 ON t1.customer_num = t2.customer_num
                       WHERE t1.customer_num = ? AND '); 
```

（如果这一切都需要在 PHP 中写成一行，我很抱歉为了可读性而牺牲了准确性）。

现在，PDO 系统有可能自动将`:start`符号转换为`?`，在这种情况下，我们遇到了不同的问题。但是，除非您确定该`:name`符号有效，否则……不确定的一个原因是`bindValue()`呼叫似乎需要名称，而不是`?`可能需要的数字。您的代码错误检查了`bindValue()`调用吗？

这个 ESQL/C 代码有效，产生了我期望的输出。

```
#include <stdio.h>
#include <stdlib.h>
int main(int argc, char **argv)
{
    $ char *dbase = "stores";
    $ int num_skip = 3;
    $ int num_fetch = 5;
    if (argc > 2)
    {
    fprintf(stderr, "Usage: %s [dbase]\n", argv[0]);
    exit(1);
    }
    if (argc == 2)
    dbase = argv[1];

    exec sql whenever error stop;
    exec sql connect to :dbase;

    exec sql prepare p from "select skip ? first ? tabid, tabname from informix.systables";
    exec sql declare c cursor for p;

    exec sql open c using :num_skip, :num_fetch;
    while (sqlca.sqlcode == 0)
    {
    $ int4 tabid;
    $ varchar tabname[129];
    exec sql fetch c into :tabid, :tabname;
    if (sqlca.sqlcode != 0)
        break;
    printf("%d: %s\n", tabid, tabname);
    }
    exec sql close c;

    exec sql free c;
    exec sql free p;
    exec sql disconnect all;
    return 0;
} 
```

### 输出

```
4: systabauth
5: syscolauth
6: sysviews
7: sysusers
8: sysdepend 
```

这表明如果正确使用占位符表示法，则可以将参数用于 SKIP 和 FIRST。

如果你找不到一种方法让它与 PDO 一起工作，你可能遇到了一个错误。如果您可以在将环境变量设置为某个类似值的情况下运行您的代码`SQLIDEBUG=2:/tmp/your_sub_dir/check`，那么您应该在一个名为`/tmp/your_sub_dir/check_21484_0_aedc1e0`. 数字模式有点变化。然后，您可以`sqliprint`在文件上运行程序并查看 PDO 发送到服务器的内容。这将是确定 PDO 或 Informix 中是否存在错误的一种非常快速的方法。

例如，我得到的部分输出`sqliprint`是：

```
C->S (20)               Time: 2012-05-29 17:55:08.65225
    SQ_CONNECT
         "stores" [6]
         "stores" [6]

C->S (72)               Time: 2012-05-29 17:55:08.65239
    SQ_PREPARE
        # values: 2
        CMD.....: "select skip ? first ? tabid, tabname from informix.systables" [60]
    SQ_NDESCRIBE
    SQ_WANTDONE
    SQ_EOT 
```

可以很清楚的看到发送的 SQL 语句。如果你没有看到`?`占位符，那么上游就有问题；Informix 的 PDO 驱动程序没有正常工作，或者被滥用。如果你看到`?`占位符，我们会遇到不同的问题，但如果这是问题，我会感到惊讶。

SQLIDEBUG 机制中唯一需要注意的是，您需要在连接到数据库的任何进程的环境中设置环境变量。对于独立的 ESQL/C 程序，这很简单。如果您正在使用 Web 服务器和 PHP，那可能会比较棘手 — 但可以做到。

# iframe - 包括带有 iframe 对 SEO 影响的横幅？

> ID：10803476
> 
> 赞同：0
> 
> 时间：2012-05-29T16:55:46.517
> 
> 标签：iframe, seo

我为我的网站制作了 HTML5 横幅。我想将它托管在我的服务器上，并通过 iframe 将其提供给其他站点。这对SEO有害吗？

将横幅上的链接作为指向我网站的链接吗？在这种情况下，我该怎么做才能将其计入 Google 排名/我还能如何将横幅包含在我的网站之外？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:00:01.837

它不会影响您的 SEO，因为 iframe 对搜索引擎不友好。更好的方法是使用 JavaScript 提供横幅，然后使用`<noscript>`链接回您的网站。然后您将从 SEO 中受益，因为该链接在所有搜索引擎算法中都是一个积极的排名因素。

# java - android restlet获取json数组

> ID：10803478
> 
> 赞同：0
> 
> 时间：2012-05-29T16:55:54.303
> 
> 标签：java, android, arrays, deserialization, restlet

我从服务器返回 json，如下所示：

```
[{"id":1,"group":[{"id":1,"subGroup":[{"id":1,"item":"X"}]}]}] 
```

如何获取数组组和子组？

我在 Android 客户端上使用 restlet。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:08:12.650

```
String mResponse = "[{"id":1,"group":[{"id":1,"subGroup":[{"id":1,"item":"X"}]}]}]";
JSONArray responseArrayJson = new JSONArray(mResponse); // This creates a JSON array from your response string.
JSONObject objectJson = responseArrayJson.getJSONObject(0); // gets the one and only JSON object in your array.
JSONArray groupArrayJson = objectJson.getJSONArray("group"); // gets the array indexed by "group". 
```

您也可以重复此模式以获得“子组”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:23:00.083

我解决了这个问题如下：

首先更改服务器的json：

从：

```
[{"id":1,"group":[{"id":1,"subGroup":[{"id":1,"item":"X"}]}]}] 
```

到

```
{"array":[{"id":1,"group":[{"id":1,"subGroup":[{"id":1,"item":"X"}]}]}]} 
```

第二个在Android客户端我做这个：

一个获取第一个数组的类，带有 firstArray“数组”的类 ServerModel：

```
public class ServerModel implements Serializable {
    private static final long serialVersionUID = 1L;
    private FirstArray[] array;
    public ServerModel() {
    }
    public ServerModel(FirstArray[] array) {        
        this.array = array;
    }
} 
```

第三类具有 secondArray “组”：

```
public class FirstArray implements Serializable {
    private static final long serialVersionUID = 1L;
    private SecondArray[] group;
    private int id;
    public FirstArray() {
    }
    public FirstArray(int id, SecondArray[] group) {
        this.id = id;
        this.group = group;
    }
} 
```

第四类与thirdArray“subGroup”：

```
public class SecondArray implements Serializable {
    private static final long serialVersionUID = 1L;
    private Itens[] subGroup;
    private int id;
    public SecondArray() {
    }
    public SecondArray(int id, Itens[] subGroup) {
        this.id = id;
        this.subGroup = subGroup;
    }
} 
```

最后是itens“item”的类

```
public class Itens implements Serializable {
    private static final long serialVersionUID = 1L;
    private String item;
    private int id;
    public Itens() {
    }
    public Itens(int id, String item) {
        this.id = id;
        this.item = item;
    }
} 
```

* * *

谢谢大家的帮助！！！

# sql - 以无限数量的不同值进行枢轴

> ID：10803483
> 
> 赞同：9
> 
> 时间：2012-05-29T16:56:17.517
> 
> 标签：sql, sql-server

我写了这个查询：

```
SELECT s, [1] AS a1, [2] AS a2, [3] AS a3, [4] AS a4
FROM (SELECT grade, aid, s FROM m) p
PIVOT
(
SUM(grade)
FOR aid IN ([1], [2], [3], [4])
) AS pvt ORDER BY pvt.s; 
```

返回结果：

```
s  a1  a2  a3  a4
1  25  69  95  56
2  27  99  16  87
. . . .
99 98  12  34  76 
```

这正是我想要的结果。我的问题是“援助”中并不总是有四个不同的值。是否可以重写此查询（或使用存储过程），以便“a*”列的数量取决于“辅助”中有多少不同的值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-29T16:59:04.350

您将需要使用 Dynamic Pivot 来获取所需的列列表。这将首先检索列列表，然后旋转该列表。与此类似的东西：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX);

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(aid) 
            FROM m 
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT s, ' + @cols + ' from 
            (
                select grade, aid, s
                from m
           ) x
            pivot 
            (
                sum(grade)
                for aid in (' + @cols + ')
            ) p 
            ORDER BY p.s'

execute(@query) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T10:55:33.303

Lamak：这是我使用列别名的方法。别名链接到另一个表中由“aid”链接的列中的值。

```
DECLARE
    @cols AS NVARCHAR(MAX),
    @colsAlias AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX);

SELECT @cols = STUFF((SELECT DISTINCT ',' + QUOTENAME(aid) 
    FROM m
    FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)'),1,1,'')

SELECT @colsAlias = STUFF((SELECT DISTINCT ',' + QUOTENAME(m.aid) + ' AS ' + QUOTENAME(n.aName)  
    FROM m INNER JOIN n ON m.aid = n.aid
    FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)'),1,1,'')

SET @query = 'SELECT s, ' + @colsAlias + ' FROM 
                (
                SELECT grade, aid, s
                    FROM m
                ) x

            PIVOT 
            (
                MIN(grade) FOR aid IN (' + @cols + ')
            ) p '

EXECUTE(@query) 
```

# c# - 我的应用会尝试使用什么配置？

> ID：10803484
> 
> 赞同：1
> 
> 时间：2012-05-29T16:56:22.793
> 
> 标签：c#, web-services

我有一个应用程序...

```
 [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
    public partial class SearchServiceClient : System.ServiceModel.ClientBase<Bi.Flight.BiSearchServiceFacade.BiSearchService.ISearchService>, Bi.Flight.BiSearchServiceFacade.BiSearchService.ISearchService {

        public SearchServiceClient() {
        }

        public SearchServiceClient(string endpointConfigurationName) : 
                base(endpointConfigurationName) {
        } 
```

我有一些调用无参数构造函数的客户端代码。我有2个问题...

1) 这是调用基于 REST 的服务的正常方式吗？因为我认为渠道工厂会更好。2）当无参数构造函数被调用时，这是否意味着它将尝试从配置中获取端点？如果是这样，它将寻找什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:03:50.310

1) 正在使用通道工厂*（*继承自 ServiceModel.ClientBase）

2) 是的，它将从`<system.serviceModel><client><endpoint />`您的 web/app.config 部分中获取端点信息

# c# - 如何从 DataGridView 在特定 Excel 单元格中插入值

> ID：10803488
> 
> 赞同：0
> 
> 时间：2012-05-29T16:56:26.833
> 
> 标签：c#, c#-4.0

您能帮我弄清楚如何将 DataGridView 值插入预定义的 excel 模板（插入特定单元格）吗？我的 Windows 窗体上有一个 DataGridView，它从用户输入中获取值。现在，我想让用户能够将 DataGridView 值导出到一个 excel 文件中（类似于附加的 excel 文件的文件）。据我所知，我必须创建标题并以编程方式将它们添加到代码中，但对于 DataGridView 部分，老实说我不知道​​该怎么做？如您所见，表格（框）从 B2 到 K2 开始，从 B21 到 K21 结束 现在我的问题是如何开始从 B4 - k4 导入值等等？有什么方法可以从 C# 格式化单元格的样式（如背景颜色或字体样式和大小）？我的意思是生成一个类似于以编程方式在附加的 Excel 中查看的表单。

提前感谢您的时间

![在此处输入图像描述](../Images/5b5670746496528e6a4affbe4d302bbb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:17:25.703

不确定这是否是您要查找的内容，但如果您使用的是 Office 互操作，则可以将二维数组插入 Excel 中的范围。

以下代码段可能不正确（附近没有 VS，而且我很长时间没有使用 excel 自动化），但您会明白的。

```
Excel.Range oRange = oSheet.Range("B2",Missing.Value); 
oRange.Resize(myArray.GetLength(0),myArray.GetLength(1)); 
oRange.Value = myArray; 
```

# sql - 使用 '%' 的 SQL 'LIKE' 查询，其中搜索条件包含 '%'

> ID：10803489
> 
> 赞同：40
> 
> 时间：2012-05-29T16:56:27.100
> 
> 标签：sql, sql-server, sql-like

我有一个如下的 SQL 查询。

```
Select * from table 
where name like '%' + search_criteria + '%' 
```

如果 search_criteria = 'abc'，它将返回包含`xxxabcxxxx`哪个是好的数据。

但是如果我的 search_criteria = 'abc%'，它仍然会返回包含 的数据`xxxabcxxx`，这不应该是这种情况。

我该如何处理这种情况？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-29T17:07:51.460

如果您希望将`%`符号 in`search_criteria`视为文字字符而不是通配符，请将其转义为`[%]`

```
... where name like '%' + replace(search_criteria, '%', '[%]') + '%' 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-29T17:11:22.057

使用转义子句：

```
select *
  from (select '123abc456' AS result from dual
        union all
        select '123abc%456' AS result from dual
       )
  WHERE result LIKE '%abc\%%' escape '\' 
```

结果

```
123abc%456 
```

您可以将转义字符设置为您想要的任何字符。在这种情况下，默认为 '\'。转义的 '\%' 变成文字，第二个 '%' 没有转义，所以又是通配符。

请参阅[SQL LIKE 子句的特殊字符列表](https://stackoverflow.com/questions/712580/list-of-special-characters-for-sql-like-clause)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-05-29T18:09:27.180

最简单的解决方案是完全省去“喜欢”：

```
Select * 
from table
where charindex(search_criteria, name) > 0 
```

我更喜欢charindex而不是like。从历史上看，它有更好的性能，但我不确定它现在是否有很大的不同。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-09-19T13:08:01.273

要转义 sql 中的字符，您可以使用`!`：

* * *

**示例 - 使用转义字符**

了解模式匹配时如何“转义字符”非常重要。这些示例专门处理 Oracle 中的转义字符。

假设您想在 SQL LIKE 条件中搜索 % 或 _ 字符。您可以使用 Escape 字符来执行此操作。

请注意，您只能将转义字符定义为单个字符（长度为 1）。

例如：

```
SELECT *
FROM suppliers
WHERE supplier_name LIKE '!%' escape '!'; 
```

此 SQL LIKE 条件示例标识 ! 字符作为转义字符。该语句将返回名称为 % 的所有供应商。

这是在 SQL LIKE 条件中使用转义字符的另一个更复杂的示例。

```
SELECT *
FROM suppliers
WHERE supplier_name LIKE 'H%!%' escape '!'; 
```

此 SQL LIKE 条件示例返回名称以 H 开头并以 % 结尾的所有供应商。例如，它将返回一个值，例如“Hello%”。

您还可以在 SQL LIKE 条件中使用带有 _ 字符的转义字符。

例如：

```
SELECT *
FROM suppliers
WHERE supplier_name LIKE 'H%!_' escape '!'; 
```

此 SQL LIKE 条件示例返回名称以 H 开头并以 _ 结尾的所有供应商。例如，它将返回一个值，例如“Hello_”。

* * *

参考：[sql/like](http://www.techonthenet.com/sql/like.php)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-29T16:59:30.140

```
Select * from table where name like search_criteria 
```

if you are expecting the user to add their own wildcards...

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-29T17:04:01.667

您需要转义它：在许多数据库中，这是通过在它前面加上反斜杠来完成的，`\%`.

就这样`abc`变成了`abc\%`。

您的编程语言将具有特定于数据库的功能来为您执行此操作。例如，[PHP](http://en.wikipedia.org/wiki/PHP)为[MySQL](http://en.wikipedia.org/wiki/MySQL)数据库提供了 mysql_escape_string()。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-29T16:59:33.307

Escape the percent sign `\%` to make it part of your comparison value.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-02T00:39:10.577

可能是这个帮助:)

```
DECLARE @SearchCriteria VARCHAR(25)
SET  @SearchCriteria = 'employee'
IF CHARINDEX('%', @SearchCriteria) = 0
BEGIN
SET @SearchCriteria = '%' + @SearchCriteria + '%'
END
SELECT * 
FROM Employee
WHERE Name LIKE @SearchCriteria 
```

# python - Python 线程优于简单的 while 循环或线程优化

> ID：10803490
> 
> 赞同：3
> 
> 时间：2012-05-29T16:56:34.497
> 
> 标签：python, multithreading, thread-safety

几个小时前，我问了一个关于 Python 多线程的问题。为了理解它是如何工作的，我做了一些实验，下面是我的测试：

* * *

使用线程的 Python 脚本：

```
import threading
import Queue
import time

s = 0;

class ThreadClass(threading.Thread):

    lck = threading.Lock()

    def __init__(self, inQ, outQ):
        threading.Thread.__init__(self)
        self.inQ = inQ
        self.outQ = outQ

    def run(self):
        while True:
            global s
            #print self.getName()+" is running..."
            self.item = self.inQ.get()
            #self.inQ.task_done()
            ThreadClass.lck.acquire()
            s += self.item
            ThreadClass.lck.release()
            #self.inQ.task_done()
            self.outQ.put(self.item)
            self.inQ.task_done()

inQ = Queue.Queue()
outQ = Queue.Queue()

i = 0
n = 1000000

print "putting items to input"
while i<n:
    inQ.put(i)
    i += 1

start_time = time.time()
print "starting threads..."
for i in xrange(10):
    t = ThreadClass(inQ, outQ);
    t.setDaemon(True)
    t.start()

inQ.join()
end_time = time.time()
print "Elapsed time is: %s"%(end_time - start_time)
print s 
```

* * *

以下具有与简单的 while 循环相同的功能：

```
import Queue
import time

inQ = Queue.Queue()
outQ = Queue.Queue()

i = 0
n = 1000000
sum = 0

print "putting items to input"
while i<n:
    inQ.put(i)
    i += 1

print "while loop starts..."
start_time = time.time()
while inQ.qsize() > 0:
    item = inQ.get()
    sum += item
    outQ.put(item)
end_time = time.time()

print "Elapsed time is: %s"%(end_time - start_time)
print sum 
```

* * *

如果您在您的机器上运行这些程序，您会发现线程比简单的 while 循环慢得多。我对线程有点困惑，想知道线程代码有什么问题。我该如何优化它（在这种情况下），为什么它比 while 循环慢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:36:10.263

线程总是很棘手，因为 Python 中的线程很特别。

要讨论优化，你必须关注特殊情况，否则没有单一的答案。我电脑上的初始线程解决方案在 37.11 秒上运行。如果使用局部变量对每个线程的元素求和，然后只在最后加锁，时间会下降到 32.62s。

好的。无线程解决方案在 7.47 秒上运行。伟大的。但是如果你想在 Python 中对大量数字求和，你只需使用内置函数 sum。因此，如果我们使用没有线程且内置总和的 List，则时间会下降到 0.09 秒。伟大的！

为什么？

Python 中的线程受全局解释器锁 (GIL) 的约束。他们永远不会并行运行 Python 代码。它们是真正的线程，但在内部，它们只允许在将 GIL 释放到另一个线程之前运行 X Python 指令。对于非常简单的计算，创建线程、锁定和上下文切换的成本远大于简单计算的成本。所以在这种情况下，开销是计算本身的 5 倍。当您不能使用异步 I/O 或当您有应该同时运行的阻塞函数时，Python 中的线程很有趣。

但是，为什么内置的 sum 比 Python 无线程解决方案要快呢？内置的 sum 是用 C 实现的，而 Python 循环在性能方面很糟糕。因此使用内置总和迭代列表的所有元素要快得多。

总是这样吗？不，这取决于你在做什么。如果您将这些数字写入 n 个不同的文件，线程解决方案可能会有机会，因为 GIL 在 I/O 期间被释放。但即便如此，我们仍需要检查 I/O 缓冲/磁盘同步时间是否不会改变游戏规则。这种细节使最终的答案变得非常困难。所以，如果你想优化某些东西，你必须拥有你必须优化的东西。要在 Python 中对数字列表求和，只需使用内置的 sum。

# knockout.js - How to notify parent of a change

> ID：10803495
> 
> 赞同：3
> 
> 时间：2012-05-29T16:56:59.763
> 
> 标签：knockout.js

I am using KnockoutJS and I would like to know of a way where a observable object in an observableArray can notify the parent of a change. Here is an example:

[http://jsfiddle.net/paragnair/CEEZ5/](http://jsfiddle.net/paragnair/CEEZ5/)

HTML:

```
<h1 id="heading"> <text data-bind="text:childrenCount"></text> Fields selected</h1>
<table id="form">
<tbody data-bind="foreach:children">
    <tr>
        <td data-bind="text:name"></td>
        <td><input type="checkbox" data-bind="checked:isSelected"/></td>
    </tr>
</tbody>
</table>

<a href="#" id="btn-add">Add More Fields</a>​ 
```

Javascript:

```
var Child = function(name) {
    var self = this;
    self.name = ko.observable(name);
    self.isSelected = ko.observable(false);
},
    Parent = function() {
        var self = this;
        self.children = ko.observableArray([
            new Child('One'),
            new Child('Two'),
            new Child('Three')
            ]);
        self.children.subscribe(function(children) {
            header.childrenCount($.map(children, function(a) {                
                return a.isSelected() ? 1 : null;
            }).length);
        });
    },
    header = {
        childrenCount: ko.observable(0)
    };

var parentModel = new Parent(),
    extra = parentModel.children().length;
ko.applyBindings(parentModel, $('#form')[0]);
ko.applyBindings(header, $('#heading')[0]);

function setHeading(childrenCount) {
    header.childrenCount(childrenCount);
}

$(document).ready(function() {
    $('#btn-add').click(function() {
        extra++;
        parentModel.children.push(new Child('Extra ' + extra));
        return false;
    });
});​ 
```

In the above example, I want to show the heading with the number of fields selected. I have a `subscribe` event for the `observableArray` but that only fires when something is added or removed from the array so when the user actually checks a checkbox in the fields list, the event is not fired. One way of achieving this is by adding a onchange event on the checkbox to call a method on parent which inturn calls some external method which updates the `childrenCount` on the `header` object. Is there a better way of doing this?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T18:11:14.153

我认为你可以用不同的方式来解决这个问题，同时消除不必要的复杂性。您不需要将模型分成单独的 applyBindings 调用。事实上，除非绝对必要，否则不建议这样做，因为它会增加复杂性，如果您不小心，可能会导致双重绑定。

其次，如果您的标头是您的 parentModels 孩子的结果，那么它确实应该是同一模型的一部分，OOP 原则可以而且应该在编写 KO 模型时应用。这是一开始就选择使用KO**的**优势。

以下是我将如何解决您的问题。

[http://jsfiddle.net/madcapnmckay/edJyp/](http://jsfiddle.net/madcapnmckay/edJyp/)

```
var Child = function(name) {
    var self = this;
    self.name = ko.observable(name);
    self.isSelected = ko.observable(false);
},
Parent = function() {
    var self = this;
    self.children = ko.observableArray([
        new Child('One'),
        new Child('Two'),
        new Child('Three')
        ]);

    this.childrenCount = ko.computed(function() {
        var count = 0;
        ko.utils.arrayForEach(self.children(), function (child) {
            if (child.isSelected()) {
                count++;
            }
        });
        return count;
    });

    this.addMore = function () {
        self.children.push(new Child("Extra " + (self.children().length + 1)));
    };
};

var ViewModel = function () {
    var self = this;
    this.parentModel = new Parent();  
};

ko.applyBindings(new ViewModel()); 
```

请注意 ViewModel 类是多余的，但我假设您拥有的功能比此处显示的更多，这些功能将被标记到此。

顺便说一句，为什么你觉得你需要在你的按钮上使用一个 jquery 点击处理程序？我经常看到这个错误，并且想知道文档中的哪些内容会引导您走上这条路？这也可以而且应该移动到您的 viewModel 上，我在示例中已经这样做了。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T17:16:22.277

最后我没有使用 subscribe 而是使用了`event`on `data-bind`，而后者又调用了外部函数`setHeading`。这是更新的小提琴：http: [//jsfiddle.net/paragnair/CEEZ5/5/](http://jsfiddle.net/paragnair/CEEZ5/5/)

# c++ - What is "clause 10" in the C++03 standard?

> ID：10803498
> 
> 赞同：3
> 
> 时间：2012-05-29T16:57:10.887
> 
> 标签：c++, standards

I was reading through the C++03 standard and noticed the usage of "Clause 10". Example:

> 8.5.1 Aggregates [dcl.init.aggr]
> 
> 1.  An aggregate is an array or a class (clause 9) with no user-declared constructors (12.1), no private or protected non-static data members (clause 11), no base classes ***(clause 10)***, and no virtual functions (10.3).

There is also Clause 9 and Clause 11\. What does this mean, is it referring to some other section in the standard?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T16:59:22.453

The clause is the topmost hierarchical thingy, i.e., clause 10 is §10\. Informally people refer to those as "sections", but the standard calls them "clauses".

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:00:38.767

> 这是什么意思，是指标准中的其他部分吗？

是的，它指的是“章节”。例如。第 9 条类。

# ios - Content tagging/bookmarking by users

> ID：10803501
> 
> 赞同：0
> 
> 时间：2012-05-29T16:57:35.213
> 
> 标签：ios, database, uitableview

I have a `UITableView` that is populated with content that can be tagged/bookmarked by a user. My app successfully sends the bookmark info to a server-side database when content is bookmarked. I'm trying to figure the most efficient way to display a bookmarked image in the respective cell if the content has already been bookmarked by the user.

For example, a user taps a cell's bookmark and the bookmark image displays a different image to verify the bookmark. The bookmark info is sent to the database. *This already works*

Here's where I need help...

When the user opens the app again, the `UITableView` is re-populated with data. If the cell contains content that has been bookmarked, I need to display the bookmarked image in the cell. Right now, I have a database query in `ViewDidLoad` that pulls the user's bookmarks. The only implementation I can think of is searching through the query data in `cellForRowAtIndexPath`. However, I know this is going to affect my scrolling performance. Is there a better way to do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:59:51.493

如果您没有数百万个书签，那么检查每个书签上的标记`cellForRowAtIndexPath`应该不会对性能产生太大影响。

以我的经验，表格视图滚动非常高效，并且仍然有足够的处理器时间来做其他事情。对索引处的值进行简单检查应该不会对其产生太大影响。也许解决它的最佳方法是解析您的查询结果并创建一个专用的 NSArray，每个索引处只有 YES/NO 标志，您可以在此期间检查`cellForRowAtIndexPath`以决定是否显示书签指示器。

如果您确实需要尽可能快地获得速度，您可以`viewDidLoad` 在每个特定索引处创建一个具有 0/1 值的 C 数组并访问它`array[index]`。这消除了 NSArray 中可能存在的任何额外开销。但同样 - 我的经验表明，对于这些用途，开销是最小的。

# java - EJB Remote Interface in Client App

> ID：10803505
> 
> 赞同：2
> 
> 时间：2012-05-29T16:57:58.567
> 
> 标签：java, ejb-3.0

I am starting with EJB and I am having a problem:

I am guided by this tut on youtube - [http://www.youtube.com/watch?v=6xJx9hpzkbs](http://www.youtube.com/watch?v=6xJx9hpzkbs) (It's in french but it doesn't really matter)

So basically what tut (And me as well) does is, create an EJB project, create stateless Session Bean (MyBean) and a Remote Interface (MyBeanRemote), with one simple method returning a string.

He also creates dynamic web project and uses the following code in a Servlets doGet method to call a bean method:

```
Context con = new InitialContext();
Object ob = con.lookup("MyBean/remote");

if(ob != null){
    MyBeanRemote bean = (MyBeanRemote) ob;
    // And then prints out the returned value from the method
} 
```

But the problem is that I have no MyBeanRemote interface avaliable in the client project. how does he get it? (5:17 on Video)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T18:10:51.407

t如果您的项目是基于 maven 的项目，您可以通过在 pom.xml 文件中添加插件来生成客户端 jar，如下所示

```
 <build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-ejb-plugin</artifactId>

            <configuration>
                <generateClient>true</generateClient>
                <clientIncludes>
                    <clientInclude>**/*Local.class</clientInclude>
                    <clientInclude>**/*Remote.class</clientInclude>
                    <clientInclude>**/*Exception.class</clientInclude>
                </clientIncludes>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T03:28:10.303

正如您在 2:47 分钟看到的那样，他在服务器中部署了 EJB（包括接口）。因此，您无需将其显式添加到项目中（这就是**远程**bean 的想法）。因此，您只需要知道名称的接口（“MyBean/remote”）即可进行查找。然后容器将解析并找到实现该接口的正确对象。

这是使用 EJB 的一种方式，稍后您可以看到您可以使用本地接口，甚至可以为您的 bean 使用无接口视图。也许你在想“远程到什么？本地到什么？” 好吧......到JVM（通常）。您仍然可以对同一 JVM 中的 EJB 进行远程调用（因为具有 EJB 的 JVM 存在于其他服务器中），这比本地/无接口调用具有更高的成本。

然后，这个基本概念通常用作：**依赖注入**，您只描述接口的对象（加上@EJB 注释），容器将找出正确的对象。

要了解有关何时选择本地与远程的更多信息，请参阅本文： [http ://docs.oracle.com/javaee/6/tutorial/doc/gipjf.html](http://docs.oracle.com/javaee/6/tutorial/doc/gipjf.html)

# security - simple GlassFish embedded security fails: Login failed: Unable to locate a login configuration

> ID：10803517
> 
> 赞同：0
> 
> 时间：2012-05-29T16:59:01.393
> 
> 标签：security, jakarta-ee, login, glassfish

I'm creating unit tests for our application, and I'm stuck. For testing I have a simple HelloWebServlet that I'm protecting via annotations:

@WebServlet(urlPatterns = {"/hello"}) @ServletSecurity(@HttpConstraint(rolesAllowed = {"user"}))

I'm starting the server the way that's always worked OK (see [1]) and creating users (see [2]) seems to be OK because output from CommandRunner calls to list-file-users and list-file-groups are correct, but I'm getting this error when I try to connect using the username and password:

WARNING: WEB9102: Web Login Failed: com.sun.enterprise.security.auth.login.common.LoginException: Login failed: Unable to locate a login configuration

The calling code uses the Jersey client API:

```
@Test
public void testPingServletLoggedIn() {
    Client client = Client.create();
    client.addFilter(new HTTPBasicAuthFilter(GlassFishServerHelper.USERNAME, "xx"));
    WebResource webResource = client.resource(GlassFishServerHelper.getBaseUri() + "/hello");
    ClientResponse clientResponse = webResource
            .accept(MediaType.TEXT_PLAIN)
            .get(ClientResponse.class);     // @GET
    assertEquals(ClientResponse.Status.OK, clientResponse.getClientResponseStatus());
} 
```

(Note: I tried to set javax.enterprise.system.core.security.level=FINE but that call failed with: PlainTextActionReporterFAILURENo configuration found for javax.enterprise.system.core.security . Drat!)

I've tried this against both glassfish-embedded-all-3.1.2.jar (our production version) and glassfish-embedded-all-3.2-b06.jar with the same results. What do you think would solve this? I've struggled and succeeded way too many times with GFE to give up without a fight!

==== [1] server startup (excerpt) ====

```
public static void startServer() {
        GlassFishProperties gfProps = new GlassFishProperties();
        gfProps.setPort("http-listener", PORT);
        GLASSFISH = GlassFishRuntime.bootstrap().newGlassFish(gfProps);
        GLASSFISH.start();

        enableDefaultPrincipleToRoleMapping();
        createUsersAndGroups();

        ScatteredArchive archive = new ScatteredArchive(WEB_APP_NAME, ScatteredArchive.Type.WAR);
        File classesDir = new File("out/production/simple-security-servlet-test");
        archive.addClassPath(classesDir);
        DEPLOYER = GLASSFISH.getDeployer();
        APP_NAME = DEPLOYER.deploy(archive.toURI());

private static void enableDefaultPrincipleToRoleMapping() throws GlassFishException {
    CommandRunner cr = GLASSFISH.getCommandRunner();
    CommandResult result = cr.run("set",
            "server-config.security-service.activate-default-principal-to-role-mapping=true");
} 
```

==== [2] user creation (excerpt) ====

```
private static void createUsersAndGroups() throws GlassFishException {
    CommandRunner commandRunner = GLASSFISH.getCommandRunner();
    File passwordFile = new File("password-file.txt");
    CommandResult result = commandRunner.run("create-file-user",
            "--passwordfile", passwordFile.getAbsolutePath(),
            "--groups", "user",
            USERNAME
    );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:57:57.633

尽管我的情况略有不同，但我遇到了同样的错误并设法解决了它。我从“maven-embedded-glassfish-plugin”maven 插件开始 GF 3.1.2，但这也可能对你有用。

尝试设置以下系统属性：

```
java.security.auth.login.config=target/test-classes/login.conf 
```

这应该指向 login.conf 文件的副本。您可以在任何 Glassfish 域文件夹的“config”文件夹中找到此文件。

# javascript - 用于多个输入的 jQuery Datepicker

> ID：10803518
> 
> 赞同：11
> 
> 时间：2012-05-29T16:59:03.857
> 
> 标签：javascript, jquery, jquery-ui, datepicker, jquery-ui-datepicker

我有一个 jQuery datepicker 脚本：

```
$(function() {
    $( "#datepicker" ).datepicker({ dateFormat: "yyyy-mm-dd" });
}); 
```

当我想为两个输入初始化这个脚本时，它只适用于第一个。如何将它用于两个输入？

```
<input type="text" name="MyDate1" id="datepicker">
<input type="text" name="MyDate2" id="datepicker"> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-29T17:00:31.820

只需将所有更改`id`为`class`.

```
<input type="text" name="MyDate1" class="datepicker">
<input type="text" name="MyDate2" class="datepicker">

$(function() {
  $( ".datepicker" ).datepicker({ dateFormat: "yyyy-mm-dd" });
}); 
```

也可以使用

```
$(function() {
  $( "input[name^=MyDate]" ).datepicker({ dateFormat: "yyyy-mm-dd" });
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T17:00:51.640

厌倦了重复这个，但仍然，我再重复一次。`id`s 必须是唯一的。所以，使用这个：

```
<input type="text" name="MyDate1" class="datepicker">
<input type="text" name="MyDate2" class="datepicker"> 
```

和

```
$(function() {
    $( ".datepicker" ).datepicker({ dateFormat: "yyyy-mm-dd" });
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-29T17:00:45.563

拥有重复的 ID 是无效的。您应该添加一个类：

```
<input type="text" name="MyDate1" class="datepicker" id="datepicker1">
<input type="text" name="MyDate2" class="datepicker" id="datepicker2"> 
```

然后你可以这样做：

```
$(function() {
    $( ".datepicker" ).datepicker({ dateFormat: "yyyy-mm-dd" });
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-02T07:32:50.117

按名称访问日期选择器功能：

```
$(function() {
    $('[name="MyDate1"]').datepicker({ dateFormat: "yyyy-mm-dd" });
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-23T21:42:40.853

如果输入字段是动态生成的，例如在 Django 模板中，您还可以动态添加类。

```
<input type="text" name="MyDate1" id="datepicker1">
<input type="text" name="MyDate2" id="datepicker2"> 
```

使用#id 获取输入字段并添加一个类

```
$(function() {
    $( "#datepicker1, #datepicker2" ).addClass('datepicker');
    $( ".datepicker" ).datepicker({ dateFormat: "yy-mm-dd" });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-18T14:46:08.700

```
<input type="text" name="MyDate1" id="datepicker1">
<input type="text" name="MyDate2" id="datepicker2"> 
```

只需使用#id 获取输入字段并应用 datepicker。

```
$(function() {
    $( "#datepicker1, #datepicker2" ).datepicker({ dateFormat: "yy-mm-dd" });
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-04T09:50:48.113

通过 id 访问日期选择器

```
<input type="text" name="MyDate1" id="datepicker1">
<input type="text" name="MyDate2" id="datepicker2">

$(function() {
  $( "input[id^=datepicker]" ).datepicker({ dateFormat: "dd-mm-yy" });
}); 
```

或按名称访问日期选择器：

```
<input type="text" name="MyDate1" id="datepicker1">
<input type="text" name="MyDate2" id="datepicker2">

$(function() {
   $( "input[name^=MyDate]" ).datepicker({ dateFormat: "dd-mm-yy" });
}); 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2016-12-30T09:47:16.560

```
 <script>
  $(document).ready(function() {
    $("#datepicker").datepicker();
  });
  $(document).ready(function() {
    $("#datepicker2").datepicker();
  });
  $(document).ready(function() {
    $("#datepicker3").datepicker();
  });
  </script> 
```

只需给表单提供 id 的： datepicker datepicker2 datepicker3

# sql - 带有 SQL 调用的 VB Msgbox

> ID：10803520
> 
> 赞同：0
> 
> 时间：2012-05-29T16:59:07.020
> 
> 标签：sql, vb6, if-statement

只是一个快速的 VB 问题 -

我使用的是 VB6，我只需要添加一个 If...Then 语句来在用户覆盖以前在 SQL 中填充的字段时提示用户。这将防止其他用户在不知道我已经更新它的情况下多次更新该字段。我只是不确定这个属于的顺序。以前，它是这样的：

1.  单击按钮时，测试与 sql 数据库的连接，如果当前为空，则使用 user1 的名称更新字段 userName。
2.  关闭sql连接

添加我的 If...Then 后，它更像是这样的：

1.  单击按钮时，测试连接，并使用 user1 的名称更新字段 userName （如果它为空）。
2.  更新后，将“更新”布尔字段（我添加了一个字段以在每次有 sql 更新时进行跟踪）更新为 True。
3.  在第一个语句的 End IF 之前添加了 IF 语句，声明 IF 'updated' = True，然后显示一个 YES/NO Msgbox 提示 user2 决定是否要继续第二次更新 userName 字段，并覆盖 user1 的名称，然后 End If。
4.  在第一个更新语句上结束 If。
5.  关闭 sql 连接。

最终目标是防止 user2 立即覆盖 user1 的更新，而不会收到 user1 已经更新它的某种类型的提示。我只是不确定我的代码是否应该围绕初始更新 IF..THEN，或者放在里面或者它最初检查字段是否为空的地方。任何帮助都会很棒。

我会提供实际的代码，但它是专有的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T22:19:50.483

我想这就是你的想法？

```
(connect to SQL, get field)
If strSQLField = "" Then
    If fUpdated = True Then
        nReturn = MsgBox "Do you want to overwrite the field?", vbYesNo
        If nReturn = vbYes Then
            (do overwrite code here)
        End If
    Else
        (do normal write code here)
    End If
End If
(close connection) 
```

# c++ - 如何处理默认构造函数和重载构造函数之间的歧义？

> ID：10803523
> 
> 赞同：7
> 
> 时间：2012-05-29T16:59:23.227
> 
> 标签：c++

A b(3) 行会产生歧义，因为它可以调用两个可能的构造函数中的任何一个。单参数参数化构造函数或具有默认参数的双参数参数化构造函数。我该如何解决这个问题？

```
#include<iostream>
using namespace std;
class A
{
    public:
    int a,b;
    A()
    {
        a=5;
        b=6;
    }
    A(int a1)
    {
        a=a1;
        b=54;
    }
    A(int a1,int b2=8)
    {
        a=a1;
        b=b2;
    }
    void show()
    {
        cout<<"a="<<a<<" b="<<b<<endl;
    }
};    
int main()
{
    A a(3); // I want A(int a1,int b2=8) to get executed
    A b(3); // I want A(int a1) to get executed
    a.show();
    b.show();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T17:11:12.130

首先，回答这个问题：

当你写作`A a(4)`时，你想`a.b.`成为：

选项 a) **54**

```
class A
{
    public:
    int a,b;
    A()
    {
        a=5;
        b=6;
    }
    A(int a1,int b2 = 54)
    {
        a=a1;
        b=b2;
    }
}; 
```

选项 b) **8**

```
class A
{
    public:
    int a,b;
    A()
    {
        a=5;
        b=6;
    }
    A(int a1,int b2 = 8)
    {
        a=a1;
        b=b2;
    }
}; 
```

错误是有原因的。**如果你不知道你想从代码中得到什么，你怎么能期望编译器呢？**

编辑：编辑后 - 不可能。没有那个确切的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:07:05.567

您对编译器的要求有歧义。

```
A(int a1)
{
    a=a1;
    b=54;
} 
```

和

```
A(int a1,int b2=8)
{
    a=a1;
    b=b2;
} 
```

当您的类仅由一个参数创建时，它们是相同的。首先用英语写下你对课堂的期望。然后，将其转换为 C++ 代码。示例：“如果我的类 A 仅使用一个参数创建，则使我的变量 a 等于该参数并使我的变量 b 为 54。如果它是由两个参数创建的，则将第一个给 a，第二个给b" 并且此表达式的代码是：

```
A(int a1,int b2=54)
{
    a=a1;
    b=b2;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T17:14:40.097

删除`A(int a1)`函数而不是`A b(3)`调用`A b(3, 54)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T17:13:24.653

在您的示例中，当仅使用单个参数调用它时，编译器无法判断您是指第二个还是第三个构造函数。

通常，如果您需要添加带有其他默认参数的新构造函数，您将使默认值产生与早期构造函数相同的行为并摆脱早期版本，例如在这种情况下，b2 的默认值必须为 54。或者不要给新的构造函数一个默认参数，只需要调用者明确地传递它。

我想另一种选择是让多个派生类具有默认构造函数，这些构造函数将不同的参数传递给基类构造函数。

```
class A
{
public:
    int a, b;
    A() { a = 5; b = 6; }
    A(int a1) { a = a1; b = 54; }
    A(int a1, int b1) { a = a1; b = b1; }
    ...
};

class B: public A
{
public:
    B(int a1): A(a1, 8) { }
}; 
```

想要 A::b 初始化为 8 而不是 54 的代码会创建一个 B 。但在许多情况下，这不是一个好的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-26T14:06:32.243

我删除了构造函数中的默认值 =8 并修复了它。您可以在构造函数的实现中指定 54，但不能指定参数。否则它将与没有 =8 参数的其他构造函数混淆。

# ruby-on-rails - Unable to create new app in rails

> ID：10803525
> 
> 赞同：0
> 
> 时间：2012-05-29T16:59:23.867
> 
> 标签：ruby-on-rails, terminal

My terminal is showing this at the start of the command line:

> **subalcharla@subal-charlas-macbook ~ $**

And as a consequence when try to create a new app using rails with the command:

**`subalcharla@subal-charlas-macbook ~ $ rails new sample_app --skip-test-unit`**

The app that appears in **Finder** in my Mac 10.5.8 is named **new** instead of **sample_app**. Also, --skip-test-unit does not seem to be working.

Please help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:14:11.187

看起来您安装了旧版本的 rails 来检查终端类型中的版本

```
rails -v 
```

如果版本 < 3.0，则将 rails 更新为 3.2

```
gem install rails -v 3.2 
```

# echo - 如何在 vim 中回显自定义启动消息

> ID：10803527
> 
> 赞同：10
> 
> 时间：2012-05-29T16:59:27.973
> 
> 标签：echo, startup, vim

有没有办法在启动时在 vim 中回显自定义消息？我尝试`echo "Message"`在我的 vimrc 中使用，但似乎什么也没有出现。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T17:07:40.513

您可能需要设置一个`autocmd`以确保在您的消息出现之前所有内容都已完成加载。

```
autocmd VimEnter * echo "Message" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T02:51:17.740

这是一个命令行版本，可能有助于与某种类型的启动器配合使用：

```
vim -c 'e .|redraw|echom "Welcome!"' 
```

# ruby-on-rails - Iterating through Rails relationships recursively to find specific parent class

> ID：10803539
> 
> 赞同：0
> 
> 时间：2012-05-29T17:00:16.173
> 
> 标签：ruby-on-rails, ruby

I have Discussions (polymorphic) that belong to Projects, Tasks and Subtasks. Tasks belong to Projects, and Subtasks to Tasks.

I have users connected to Projects via join table called 'synapses'. Synapse model has user_id, project_id and boolean field called :leader which signals if the user has leader (AKA admin) rights.

For a user to close(finish) the discussion, he needs to be a leader of current project or needs to be the creator of that discussion. Here is the 'finish' method in Discussions controller:

```
 33   def finish
 34     if current_user.leader? || current_user.discussions.include?(@discussion)
 35       @discussion.update_attribute(:finished, true)
 36       redirect_to polymorphic_path([@parent, Discussion])
 37       flash[:notice] = "Discussion '#{@discussion.name}' finished"
 38     else
 39       flash[:alert] = 'You must be an admin to do that'
 40     end
 41   end 
```

Since user model doesn't have leader attribute on itself, **I need to find the corresponding synapse between current user and project**(which does have leader boolean field, showing if the user can close the discussion). Here is the method I have in application_controller to find the synapse:

```
 9   def find_synapse(user,project)  
 10     user.synapses.find_by_project_id(project)
 11   end 
```

To find the synapse, I need to find the Project. So far I can find the parent of the Discussion, which can be either the Project, Task, or Subtask model.

The way I see it, I need to iterate through parents and than stop when the parent's is of the class Project (for loop?). How to do this? Is this the best way to go about it? BTW, I tried using switch-case (when @parent.class is Task, do this, when class is Project, do that), but seems hackish and I didn't manage it to work anyway.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:02:37.653

如果您`owning_product`在项目、任务、子任务上定义一个方法，使得

```
class Project
  def owning_project
    self
  end
end

class Task
  def owning_project
    project
  end
end

class Subtask
  def owning_project
    task.owning_project
  end
end 
```

然后，您可以致电`owning_project`讨论的家长并取回相关项目。在某种程度上，这与您的 case 语句几乎相同，但使用继承系统为您进行切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:28:31.687

如果你想让 switch-case 工作，它实际上必须打开`@parent`

```
case @parent
when Task
  ...
when Project
  ...
when Subtask
  ...
end 
```

# php - function below is not adding anything into textarea

> ID：10803541
> 
> 赞同：0
> 
> 时间：2012-05-29T17:00:21.230
> 
> 标签：php, javascript, jquery, html, ajax

I want the user to be able to add a question from a table row into a textarea. The textarea the question goes into depends on the ".plus" button the user selected to choose their question.

E.g. If the user clicked on the plus button on the top of the page, then the question when the user clicks on the "Add" button goes into the textarea on top of the page.

Another E.g. If the user clicked on the plus button in the 5th table row, the question when the user clicks on the "Add" button goes into the textarea within that row (5th row).

The problem I am having though is that when the user clicks on the "Add" button, nothing happens. It is suppose to close the modal window and insert the question into the correct textarea but nothing is happening. It is not closing the modal window and it is not inserting a question into a textarea.

What am I doing wrong?

Below is the code for the application:

```
<head>
    <script type="text/javascript">
        function insertQuestion(form) {
            var $tbody = $('#qandatbl > tbody');
            var $tr = $("<tr class='optionAndAnswer' align='center'></tr>");
            var $plusrow = $("<td class='plusrow'></td>");
            var $question = $("<td class='question'></td>");
            $('.questionTextArea').each(function () {
                var $this = $(this);
                var $questionText = $("<textarea class='textAreaQuestion'></textarea>").attr('name', $this.attr('name') + "[]").attr('value', $this.val());
                $question.append($questionText);
            });
            $('.plusimage').each(function () {
                var $this = $(this);
                var $plusimagerow = $("<a onclick='return plusbutton();'><img src='Images/plussign.jpg' width='30' height='30' alt='Look Up Previous Question' class='imageplus'/></a>").attr('name', $this.attr('name') + "[]").attr('value', $this.val());
                $plusrow.append($plusimagerow);
            });
            $tr.append($plusrow);
            $tr.append($question);
            $tbody.append($tr);
            form.questionText.value = "";
            $('.questionTextArea').val('');
        }

        function plusbutton() {
            // Display an external page using an iframe 
            var src = "previousquestions.php";
            $.modal('<iframe src="' + src + '" style="border:0;width:100%;height:100%;">');
            return false;
        }

        function closewindow() {
            $.modal.close();
            return false;
        }
        $(document).on('click', '.add', function () {
            console.log("clicked");
            //lets get our Question Text... 
            var theQuestion = $("td:first-child", $(this).parent()).text();
            //the row is present, let's then make sure that the proper cell gets oru data. 
            if ($('.activePlusRow').length > 0) {
                $('.activePlusRow').next('.textAreaQuestion').val(theQuestion);
                $('.activePlusRow').removeClass('activePlusRow');
            }
            $.modal.close();
            return true;
        });
        $(document).on('click', '.plusrow', function () {
            //adding a unique class for the purpose of the click. 
            $(this).addClass('activePlusRow');
        });
    </script>
</head>
<body>
    <form id="QandA" action="<?php echo htmlentities($action); ?>" method="post">
        <div id="detailsBlock">
            <table id="question">
                <tr>
                    <td rowspan="3">Question:</td>
                    <td rowspan="3">
                        <textarea class="questionTextArea" rows="5" cols="40" name="questionText"></textarea>
                    </td>
                </tr>
            </table>
            <table id="plus" align="center">
                <tr>
                    <th>
                        <a onclick="return plusbutton();">
            <img src="Images/plussign.jpg" width="30" height="30" alt="Look Up Previous Question" class="plusimage" name="plusbuttonrow"/>
            </a>
                        <span id="plussignmsg">(Click Plus Sign to look
                            <br/>up Previous Questions)</span>
                    </th>
                </tr>
            </table>
            <table id="questionBtn" align="center">
                <tr>
                    <th>
                        <input id="addQuestionBtn" name="addQuestion" type="button" value="Add Question"
                        onClick="insertQuestion(this.form)" />
                    </th>
                </tr>
            </table>
        </div>
        <hr/>
        <div id="details">
            <table id="qandatbl" align="center">
                <thead>
                    <tr>
                        <th class="plusrow"></th>
                        <th class="question">Question</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </form>
</body> 
```

The details stored in the modal window comes from a seperate script known as "previousquestions.php", Below is the code where it shows the result of the "QuestionContent" field only displayed and it's "Add" button after the user has compiled a search:

```
<?php 

      $output = "";
$output .= "
    <table border='1' id='resulttbl'>
      <tr>
      <th id='questionth'>Question</th>
      </tr>
";
        while ($questionrow = mysql_fetch_assoc($questionresult)) {
$output .= "
      <tr>
      <td id='questiontd'>{$questionrow['QuestionContent']}</td>
      <td id='addtd'><button type='button' class='add'>Add</button></td>
      </tr>";
        }
        $output .= "        </table>";

        echo $output;

  }

}

?> 
```

Thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:05:10.727

```
var $questionText = $("<textarea class='textAreaQuestion'></textarea>")
                           .attr('name',$this.attr('name')+"[]")
                           .val($this.val());  // .val() for set value to textarea 
```

# android - 如何强制 Android 构建脚本根据其 eabi 版本将本机库放入正确的库文件夹中？

> ID：10803542
> 
> 赞同：1
> 
> 时间：2012-05-29T17:00:21.760
> 
> 标签：android, android-ndk

我有一个应用程序，它使用各种目标的本地库——ARMv6、ARMv6+vfp、ARM7+vfp、ARM7+Neon、ARM7 + Tegra 以及一些通用库。我的目标是将所有库打包到一个 .apk 文件中，这样我就不必分发单独的构建 - 我不太关心 .apk 的总大小。

这是我的 Android.mk 脚本——只是一个例子，但有足够的信息：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
TARGET_ARCH_ABI := armeabi
LOCAL_MODULE := prebuilt_arm_v6vfp
LOCAL_SRC_FILES := ../bin/libplayer_v6vfp.so
LOCAL_EXPORT_LDLIBS := ../libplayer_v6vfp.so
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)
TARGET_ARCH_ABI := armeabi-v7a
LOCAL_MODULE := prebuilt_arm_v7n
LOCAL_SRC_FILES := ../bin/libplayer_v7n.so
LOCAL_EXPORT_LDLIBS := ../libplayer_v7n.so
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := player

LOCAL_SRC_FILES := some_cpp_sources...

LOCAL_LDFLAGS := -L$(LOCAL_PATH)/../bin
LOCAL_LDLIBS := -llog -lz -lm -lplayer_v7n -lplayer_v6vfp
LOCAL_ALLOW_UNDEFINED_SYMBOLS := true

include $(BUILD_SHARED_LIBRARY) 
```

现在我遇到了以下问题——它创建了`libs`带有子文件夹的`armeabi`文件`armeabi-v7a`夹——没关系。但是两个子文件夹的内容是一样的，都包含 libplayer_v7n.so 和 libplayer_v6vfp.so。

如何确保每个子文件夹根据其 eabi 版本仅包含正确版本的本机库？

**编辑1：**

如您所见，我将 libplayer.so 与两个共享库链接，它们具有兼容的接口。在检测到 CPU 类型后，我想在我的 Java 包装器中加载时动态选择正确的库。但这似乎是不可能的。知道如何动态选择正确的库吗？对于这种常见的情况，必须有解决方案。

**编辑2：**

看来我只能将我的 libplayer.so 与一个库链接，并且必须在运行时选择其正确版本。但是现在的问题是如何在 lib 文件夹中存储六个不同版本但同名的原生库。子文件夹似乎是一个明显的解决方案，但我不确定它是否可能。另一种解决方案是通过单独的 .apk 作为插件部署正确的库，但这正是我想避免的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:33:35.907

然后执行以下操作：

1.  用相同的名称命名特定于架构的库（例如：libplayer_arch.so）并将它们放在不同的目录中。
2.  将 libplayer.so 链接到 libplayer_arch.so
3.  像这样编写你的 Java 代码：

.

```
if (isArmv7())
{
    System.loadLibrary("armv7/libplayer_arch.so");
}
else
{
    System.loadLibrary("armv6/libplayer_arch.so");
}
System.loadLibrary("libplayer.so"); 
```

# css - 如何在css中显示子菜单时隐藏主菜单

> ID：10803543
> 
> 赞同：0
> 
> 时间：2012-05-29T17:00:22.467
> 
> 标签：css, wordpress

我正在为一个站点创建一个侧边栏菜单，它应该只在当前选定的页面中显示子菜单。该网站在wordpress中。我设法隐藏了未使用此 css 选择的页面的非活动子菜单项：

```
 .sub-menu { display: none; }
    .current_page_item .sub-menu, .current_page_parent .sub-menu { display: block;} 
```

但是如何隐藏主菜单项但仍显示其子菜单？这是[该站点的链接](http://cnhr.eugenenyawara.com/media-centre/)注意：我想隐藏所有主菜单项，以便我只有子菜单

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:11:25.883

这将隐藏当前项目锚。

```
.current_page_item > a {display:none;} 
```

（您可能需要根据您想要的外观调整子项目的左边距。）

# html - 用 Float 交换 HTML 元素，在旧版 IE 浏览器上不起作用

> ID：10803545
> 
> 赞同：1
> 
> 时间：2012-05-29T17:00:25.243
> 
> 标签：html, css, internet-explorer-7, internet-explorer-6, css-float

我有一些 3rd 方 API 构建的 HTML，所以我无法控制输出。**我唯一能改变的是CSS。**如果可能的话，我宁愿不使用 JavaScript。

我要做的是`float:left`在第二个元素上使用交换 2 个元素，因此它显示在第一个元素之前。这在现代浏览器上运行良好，但会导致“已交换”元素在较旧的 IE 浏览器（特别是 6 和 7，以及兼容模式下的 IE）上移动到第二行。

[jsFiddle 示例](http://jsfiddle.net/5rzVQ/6/)

## HTML（无法更改）

```
<div class="wrapper">
    <a class="page">Page: &nbsp;</a>
    <a class="previous">Prev</a>
    <span>
        <a>1</a>
        <a>2</a>
    </span>
    <a class="next">Next</a>
</div>​ 
```

## CSS

```
.wrapper{
    line-height:36px;
}
.wrapper span, .page{
    float:left;
}
.wrapper span a, .page{
    display:inline-block;
}
.wrapper span a{
    width:20px; 
}
.previous, .next{
    width:30px;
    display:inline-block;
} 
```

## 现代浏览器截图

![现代浏览器截图](../Images/bc840e464f47d0ebe670229ac7f732ef.png)

## Internet Explorer 屏幕截图

![Internet Explorer 屏幕截图](../Images/e6f93be23adf2c569fd67dd062f71060.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T03:49:22.453

这个问题原来是 IE6 和 IE7（IE8 中不存在）如何`float:right;`在左对齐元素中处理的错误。IE6 和 IE7 不是简单地将元素定位在最左边的点上，越过任何内容（就像现代浏览器所做的那样），而是将元素定位在最右边的点上（这在定义方面并没有太大的不同，但在这种情况下会有很大的不同）。

无论如何，要克服这个限制，`float:right;`不能用作解决方案。由于无法知道（没有 JavaScript，OP 声明不应该使用它）宽度`.content span`是多少（页数可变），因此无法在`.wrapper`. 取而代之的是，“Next”和“Prev”链接元素必须“*丢弃*”到最后，然后在计算出of`.wrapper`之后绝对（相对于 ）定位。`width``.wrapper`

[jsFiddle 示例](http://jsfiddle.net/5rzVQ/23/)

## 神奇的 CSS

```
.wrapper {
    float:left; /* Can be 'display:inline;' instead, but this makes it possible to treat this as "block" */
    clear:left; /* Can be discarded if 'float:left;' isn't used */
    position:relative; /* Keeps 'next'/'prev' contained */
}
.page, span {
    float:left; /* Positions 'Page:' and page numbers on left */
}
.page, span a {
    padding-right:.5em; /* Can change this to whatever */
}
.previous {
    position:absolute;
    right:-6em; /* Width (including padding, borders, etc) of .previous and .next */
    width:2.5em;
    padding-right:.5em;
}
.next {
    position:absolute;
    right:-3em; /* Width (including padding, borders, etc) of .next */
    width:2.5em;
    padding-right:.5em;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T21:25:42.957

您遇到的问题是`display:inline-block;`.

`block`IE6/7 有一个关于这种显示类型的已知问题，如果元素的默认显示类型是（即在你的情况下，因为你将它应用于`<div>`元素），它就不起作用。

解决方法是改为使用`display:inline;`。这种解决方法利用了 IE6/7 也有显示类型错误的事实，这意味着在某些情况下`inline`可以使用它来代替。`inline-block`

显然，您不希望它采用`inline`其他浏览器的样式，因此您需要使用 CSS hack、条件注释或其他方式来应用不同特定于 IE6/7 的样式。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T17:31:52.417

具体来说，哪个版本的 IE 是“旧 IE 版本”？如果它是 IE6，那么 bfrohs 是正确的，即 inline-block 可能会搞砸你。我弄乱了你的小提琴，想出了这个：

[http://jsfiddle.net/chippper/5rzVQ/15/](http://jsfiddle.net/chippper/5rzVQ/15/)

CSS：

```
.wrapper{
    line-height:36px;
}
.wrapper span, .page{
    float:left;
    display: inline;
}

.wrapper span a{
    width:20px; 
    float:left;
    display: block;
}
.previous, .next{
    width:30px;
} 
```

这似乎达到了你想要的效果。我没有在 IE 中检查，但它不使用 inline-block，所以它更有可能工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-29T17:07:36.780

使用标签名称作为 CSS 选择器在旧版本的 IE 中将无法正常工作。使用`id`or`class`名称作为 css 选择器，应该适合您。

# php - 在 WHERE 子句中使用变量

> ID：10803547
> 
> 赞同：1
> 
> 时间：2012-05-29T17:00:27.707
> 
> 标签：php, mysql

我是 MySQL 和 PHP 的新手。我有一个 HTML 表单，我想在其中将 1 个变量传递给我的 PHP 代码，然后在我的数据库上运行一个查询，以获取在“序列”列下保存该变量的记录。当我对要查找的“序列”进行硬编码时，我可以正常运行它，但是当我尝试使用变量时，我得到一个错误。

任何帮助将不胜感激！或者更好的方法来做到这一点。

这是我的错误：`Unknown column 'amg002' in 'where clause'`

这是我的代码；

```
$serial= $_POST['Serial'];
echo $serial;

//Connect To Database

$link = mysql_connect($hostname,$username, $password) OR DIE ('Unable to connect to database! Please try again later.');
echo "Connected to MySQL<br />";

//Select the database - 'SiteInfo'

// Collects data from "SiteInfo" table

//****This is where I am running into the error*** 

$sql = 'SELECT * FROM `SiteInfo` WHERE `Serial` ='.$serial; 

// This works!!!

//$sql = 'SELECT * FROM `SiteInfo` WHERE `Serial` ="amg002";';   

$data = mysql_query($sql)
or die(mysql_error());

// puts the "SiteInfo" info into the $info array

$info = mysql_fetch_array( $data );

//Print out the contents of the entry

echo "Site Name: ".$info['SiteName'] . "<br /";
Print "Serial Number: ".$info['Serial'] . "<br />";
Print "Location: ".$info['Location'] . "<br />";

// Close the database connection

mysql_close($link); 
echo "Connection Closed. <br />"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:07:43.913

我同意这是一个报价问题，但这是我的代码的外观。

```
 $sql = 'SELECT * FROM SiteInfo WHERE Serial = "' . $serial . '"'; 
```

或者

```
 $sql = "SELECT * FROM 'SiteInfo; WHERE 'Serial' = \"$serial\""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T17:01:42.710

看起来像一个报价问题：

```
 $sql = 'SELECT * FROM `SiteInfo` WHERE `Serial` ='.$serial.'; 
```

应该

```
 $sql = "SELECT * FROM `SiteInfo` WHERE `Serial` ='".$serial."'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T17:02:30.890

这意味着你的变量：

```
$_POST['Serial'] 
```

空空如也。如果代码不为空，则需要通过`isset`以下方式检查代码来运行代码：

```
if (isset( $_POST['Serial'])) {
  $serial= $_POST['Serial'];

  // your rest of the code
} 
```

此外，如果`Serial`是字符串而不是数字，则需要将其放在引号中，使用以下查询：

```
$sql = "SELECT * FROM `SiteInfo` WHERE `Serial` = '$serial'"; 
```

您还可以查看您的查询是什么样的：

```
$sql = "SELECT * FROM `SiteInfo` WHERE `Serial` = '$serial'"; 
echo $sql;
exit; 
```

# javascript - 扩展 Javascript 类和继承

> ID：10803549
> 
> 赞同：1
> 
> 时间：2012-05-29T17:00:32.260
> 
> 标签：javascript, class, prototype

好的，所以我一直在想办法让普通的旧 Javascript 像许多其他 OOP 语言一样具有某种扩展继承。但是我遇到了一个特定的问题，当一个类使用原型扩展父类时，该对象的每个子级共享变量而不是拥有自己的父级新实例。例如：

```
TestB.prototype = new TestA();
function TestB(){ }

function TestA(){
    var num = 0;    
    this.count = function(){
        num ++;
        console.log(num);
    }
}

var test = new TestB();
test.count();
var test2 = new TestB();
test2.count(); 
```

所以当代码运行时，控制台看起来像这样：

```
1
2 
```

我希望从父类继承的“num”变量对于每个实例都是唯一的，因此输出应该是：

```
1
1 
```

我假设会发生这种情况，因为当调用原型时，它只创建一个新的 TestA 实例，而不是每次调用 TestB 的构造函数时创建一个。问题是我还没有找到另一种方法让它工作？

感谢您的帮助（请注意，这实际上是为了更具体的用途，但我只是想创建一个超级简单的测试用例来清楚地说明问题。我没有使用外部库（如 jQuery 或prototype.js）的自由解决问题）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T17:15:58.870

您不应该在构造函数中定义方法，而是在原型中定义方法。这样可以节省内存，性能更好，并且可以干净地扩展类。

```
function TestA() {
    this.num = 0;
}

TestA.prototype = {

    count: function() {
        console.log( this.num++ );
    },

    constructor: TestA
};

function TestB(){
    TestA.apply( this, arguments ); //Run parent constructor when instantiating a child
}

TestB.prototype = Object.create( TestA.prototype ); //Don't invoke the constructor when merely establishing inheritance

var test = new TestB();
test.count(); //0
var test2 = new TestB();
test2.count(); //0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T17:19:37.853

据我所知，原型只有在读取属性时才会发挥作用。当您通过实例而不是原型编辑属性时，实例会使其成为同名的自己的属性和编辑后的值。原型值保持不变。

在您的示例中，您继承了一个从外部看不到的私有变量。因此，它不能被“编辑”，并将通过继承类的所有实例传递其值。

在[这个示例](http://jsfiddle.net/U8pcn/)中，它是`num`公开的，因此它在实例级别是可编辑和“可修补的”。

```
var test, test2;

function TestA() {
    this.num = 0;               //public num
    this.count = function() {
        this.num++;
        console.log(this.num);
    }
}

function TestB() {}            //instances of TestB don't have properties
TestB.prototype = new TestA();

test = new TestB();
test2 = new TestB();

//monitor the instances
console.log(test);
console.log(test2);

test.count();   //these create a num property at the instance level
test2.count();  //but the prototype num remains 0  
test2.count();
test2.count();  ​//test will have 1 and test2 will have 3 
```

* * *

计数操作之前：

```
Object -> TypeA -> TypeB -> test
           '-> num = 0       '->num = 0 (from TypeA)
           '-> count()       '->count() (from TypeA)

Object -> TypeA -> TypeB -> test2
           '-> num = 0       '->num = 0 (from TypeA)
           '-> count()       '->count() (from TypeA) 
```

计数操作后，原型`num`保持为 0，实例将具有`num`：

```
Object -> TypeA -> TypeB -> test
           '-> num = 0       '->num = 1 (on the instance)
           '-> count()       '->count() (from TypeA)

Object -> TypeA -> TypeB -> test2
           '-> num = 0       '->num = 3 (on the instance)
           '-> count()       '->count() (from TypeA) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T17:57:40.327

当您写入实例的继承属性时，会为该实例创建该属性的新副本。

例如，假设您有：

```
var objB1 = new TypeB();
var objB2 = new TypeB(); 
```

其中 TypeB 继承了`val`TypeA 的属性。

```
console.log(objB1.val);  // reads the inherited value of property val
console.log(objB2.val);  // also reads the inherited value of property val 
```

但是在您编写该属性的那一刻，例如：

```
objB1.val = 35; // objB1 now gets a new copy of the val property. 
```

或者

```
objB1.val++; // objB1 now gets a new copy of the val property. 
```

在上述两种情况下，当`objB1.val`写入时，它不再引用继承的属性，而是`val`创建属性的新副本，例如 objB1

如果要存储计数，一种方法是共享它；为方便起见，您可以将其设为父类的构造函数的属性。所以计数函数将变为：

```
function TestA(){
    this.count = function(){
        TestA.num++;
        console.log(TestA.num);
    }
}; 
```

TestA.num = 0;

# c# - 在后台模式下使用 MPMoviePlayerController 播放流音频

> ID：10803551
> 
> 赞同：1
> 
> 时间：2012-05-29T17:00:39.313
> 
> 标签：c#, iphone, xamarin.ios, mpmovieplayercontroller

我在这里的第一个问题...

我一直在寻找如何解决这个问题我使用monotouch创建我的MPMoviePlayerController这样的应用程序：

```
this.mp = new MPMoviePlayerController(new NSURL("http://stream3.dyndns.org:1935/iphone/xeco.stream/playlist.m3u8"));
this.mp.useApplicationAudioSession=false //also try with true
this.mp.PrepareToPlay();
this.mp.Play(); 
```

一切都很好，我听到了音频

笔记：

**我已经搜索了如何解决这个问题，并在我的 plist 文件中添加 UIBackgroundModes 和字符串音频作为许多成员的建议**。（使用 monotouch 中提供的 plist 编辑器）。还添加此代码来设置我的音频会话的类别：

```
AudioSession.Initialize();
AudioSession.Interrupted += delegate{
Console.Writeline("interrupted");
}
AudioSession.Category = AudioSessionCategory.MediaPlayback; //also try ambientsound and others 
```

**问题是：**

当应用程序进入后台、设备阻塞或按下主页按钮时，如何保持音频播放？

当按下 home 或阻止设备时，流似乎总是静音，当我返回应用程序时，音频开始非常快，这让我认为应用程序一直在流式传输，但只是听不到。

我只在 Iphone Simulator 上进行测试，我开始认为这可能只是在模拟器上引起的。有什么建议吗？

提前致谢。

更新：

我收到了 monotouch 的许可证和我在 iOS 开发程序上的注册，所以我在设备上测试了我的应用程序。它有效，重要的部分在 AudioSession 部分：

```
AudioSessionCategory.MediaPlayback; 
```

当使用播放器时：

```
this.mp.useApplicationAudioSession=false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T01:40:02.110

我收到了 monotouch 的许可证和我在 iOS 开发程序上的注册，所以我在设备上测试了我的应用程序。它有效，重要的部分在 AudioSession 部分：

```
AudioSessionCategory.MediaPlayback; 
```

当使用播放器时：

```
this.mp.useApplicationAudioSession=false 
```

该应用程序在设备上运行良好。单触规则！

# java - Android RSS 阅读器 - 教程错误

> ID：10803552
> 
> 赞同：0
> 
> 时间：2012-05-29T17:00:45.230
> 
> 标签：java, android, xml, rss, xml-parsing

我花了一天时间研究 Android RSS 阅读器。

我想在我的应用程序中解析一个非常简单的 XML 文件。[http://www.sportinglife.com/rss/transfer_wire.xml](http://www.sportinglife.com/rss/transfer_wire.xml)

该站点上有几个线程回答 RSS 问题，例如[https://stackoverflow.com/questions/1253788/simple-rss-parser-for-android](https://stackoverflow.com/questions/1253788/simple-rss-parser-for-android)。我已经尝试了所有解决方案，但是在运行代码时，Eclipse 中不断出现错误。

我从 2012 年 4 月找到了最近的 IBM 教程，它很好地解释了代码，并在一个类文件中提供了解决方案。[http://www.ibm.com/developerworks/xml/library/x-androidxml/index.html](http://www.ibm.com/developerworks/xml/library/x-androidxml/index.html)

我一步一步地按照本教程进行操作，但 Eclipse 抛出以下错误：

```
[Dex Loader] Unable to execute dex: Unexpected magic: [100, 101, 120, 10, 48, 49, 51, 0]
[FootballTransfers] Conversion to Dalvik format failed: Unable to execute dex: Unexpected magic: [100, 101, 120, 10, 48, 49, 51, 0] 
```

有没有人遇到过这个问题？我不知道这个错误是什么意思。

当我运行[https://stackoverflow.com/questions/1253788/simple-rss-parser-for-android](https://stackoverflow.com/questions/1253788/simple-rss-parser-for-android)线程中提供的解决方案时，我得到了同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:04:32.643

传递输入流而不是 url

```
 @Override
        protected Void doInBackground(String... urls) {

 arrayList = new NewsParser().getData(NewsMainActivity .this.getResources.openRawResourece(R.xml.feed));

            return null;
        } 
```

并在 getData 方法中将参数更改为 InputStream。

```
 public List<NewsBean> getData(InputStream istream) {
    DocumentBuilder builder = DocumentBuilderFactory.newInstance()
                    .newDocumentBuilder();

            System.out.println("Builder : " + builder);

            Document doc = builder.parse(istream);
    Document doc = builder.parse(istream);
.....
} 
```

# java - 从 2 或 4 字节转换为有符号/无符号 short/int

> ID：10803557
> 
> 赞同：7
> 
> 时间：2012-05-29T17:00:54.120
> 
> 标签：java, int, byte, type-conversion

我必须将字节转换为有符号/无符号整数或短整数。

下面的方法对吗？哪些是签名的，哪些是未签名的？

字节顺序：LITTLE_ENDIAN

```
public static int convertTwoBytesToInt1(byte b1, byte b2) {
    return (int) ((b2 << 8) | (b1 & 0xFF));
} 
```

VS。

```
public static int convertTwoBytesToInt2(byte b1, byte b2) {
    return (int) (( (b2 & 0xFF) << 8) | (b1 & 0xFF));
} 
```

和

```
public static int  convertFourBytesToInt1(byte b1, byte b2, byte b3, byte b4){
    return (int) ((b4<<24)+(b3<<16)+(b2<<8)+b1);
} 
```

VS。

```
public static int  convertFourBytesToInt2(byte b1, byte b2, byte b3, byte b4){
    return (int) (( (b4 & 0xFF) << 24) | ((b3 & 0xFF) << 16) | ((b2 & 0xFF) << 8) | (b1 & 0xFF));
} 
```

我**只**对这种转换形式感兴趣。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T17:09:00.873

每对的第一个方法 ( `convertXXXToInt1()`) 是有符号的，第二个 ( `convertXXXToInt2()`) 是无符号的。

但是，Java`int`始终是有符号的，因此如果`b4`设置了最高位，则结果`convertFourBytesToInt2()`将为负数，即使这应该是“无符号”版本。

假设一个`byte`值为`b2`-1 或十六进制的 0xFF。运算符将`<<`使其“提升”为`int`值为 -1 或 0xFFFFFFFF 的类型。移位 8 位后为 0xFFFFFF00，移位 24 字节后为 0xFF000000。

但是，如果应用按位运算`&`符，则高位将设置为零。这将丢弃符号信息。这是两个案例的第一步，更详细地制定了。

签：

```
byte b2 = -1; // 0xFF
int i2 = b2; // 0xFFFFFFFF
int n = i2 << 8; // 0x0xFFFFFF00 
```

未签名：

```
byte b2 = -1; // 0xFF
int i2 = b2 & 0xFF; // 0x000000FF
int n = i2 << 8; // 0x0000FF00 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-17T23:12:56.473

4 字节无符号转换存在问题，因为它不适合 int。下面的例程可以正常工作。

```
public class IntegerConversion
{
  public static int convertTwoBytesToInt1 (byte b1, byte b2)      // signed
  {
    return (b2 << 8) | (b1 & 0xFF);
  }

  public static int convertFourBytesToInt1 (byte b1, byte b2, byte b3, byte b4)
  {
    return (b4 << 24) | (b3 & 0xFF) << 16 | (b2 & 0xFF) << 8 | (b1 & 0xFF);
  }

  public static int convertTwoBytesToInt2 (byte b1, byte b2)      // unsigned
  {
    return (b2 & 0xFF) << 8 | (b1 & 0xFF);
  }

  public static long convertFourBytesToInt2 (byte b1, byte b2, byte b3, byte b4)
  {
    return (long) (b4 & 0xFF) << 24 | (b3 & 0xFF) << 16 | (b2 & 0xFF) << 8 | (b1 & 0xFF);
  }

  public static void main (String[] args)
  {
    byte b1 = (byte) 0xFF;
    byte b2 = (byte) 0xFF;
    byte b3 = (byte) 0xFF;
    byte b4 = (byte) 0xFF;

    System.out.printf ("%,14d%n", convertTwoBytesToInt1 (b1, b2));
    System.out.printf ("%,14d%n", convertTwoBytesToInt2 (b1, b2));

    System.out.printf ("%,14d%n", convertFourBytesToInt1 (b1, b2, b3, b4));
    System.out.printf ("%,14d%n", convertFourBytesToInt2 (b1, b2, b3, b4));
  }
} 
```

# ios - 单击按钮会导致 exe_bad_action

> ID：10803563
> 
> 赞同：0
> 
> 时间：2012-05-29T17:01:23.837
> 
> 标签：ios, ios5, automatic-ref-counting

我创建了一个全新的项目，并在视图中创建了一个带有按钮的新视图控制器。

我在应用程序中添加视图：didFinishLaunchingWithOptions

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.window.backgroundColor = [UIColor whiteColor];

    BOOL introDisplayed = [[NSUserDefaults standardUserDefaults] boolForKey:kIntroScreenSeenByUser];

    if(introDisplayed)
    {

    }
    else 
    {
        IntroView *introView = [[IntroView alloc] initWithNibName:@"IntroView" bundle:nil];
        [self.window addSubview:introView.view];
    }

    [self.window makeKeyAndVisible];

    return YES;
} 
```

.h 文件

```
@interface IntroView : UIViewController 

@property (weak, nonatomic) IBOutlet UIButton *clickMe;
- (IBAction)clicked:(id)sender;

@end 
```

.m 文件

```
#import "IntroView.h"

@interface IntroView ()
@end

@implementation IntroView
@synthesize clickMe;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)viewDidUnload
{
    [self setClickMe:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (IBAction)clicked:(id)sender {
    NSLog(@"clicked");
}
@end 
```

单击该按钮会导致 EXC_BAD_ACCESS(code=2 错误。有什么想法吗？我正在使用 ARC。

谢谢

**更新**

在名为“introViewController”的应用程序委托上创建了一个公共属性并更改了应用程序：didFinishLaunchingWithOptions

```
@synthesize introViewController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.window.backgroundColor = [UIColor whiteColor];

    BOOL introDisplayed = [[NSUserDefaults standardUserDefaults] boolForKey:kIntroScreenSeenByUser];

    introViewController = [[IntroView alloc] initWithNibName:@"IntroView" bundle:nil];
    if(introDisplayed)
    {

    }
    else 
    {
        [self.window addSubview:introViewController.view];
    }

    [self.window makeKeyAndVisible];

    return YES;
} 
```

这解决了错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:10:45.970

您正在创建 IntroView 控制器，并将其视图添加为子视图，但控制器本身已被释放。我不认为添加视图控制器的视图（然后让 ARC 丢弃控制器本身）是创建视图的可接受方式。

也许您可以让 IntroView 视图控制器成为应用程序委托类的属性，因此 ARC 不会释放它。

就我个人而言，我不会在应用程序代理创建视图和控制器时胡思乱想，而是让我的目标设置和我的 NIB 决定这一点。我想你这样做是因为你想要一些介绍屏幕。如果我想要一个屏幕，我会让我的主视图控制器继续并呈现我想要的任何介绍。这样，当介绍被关闭（或弹出，取决于您是推送还是呈现模式）时，我的主视图控制器仍然位于顶部（并且像 popToRootViewController 这样的有用方法可以完美运行）。

# c# - 时间：2019-04-10 标签：c#marshalingidispatchpointer

> ID：10803566
> 
> 赞同：3
> 
> 时间：2012-05-29T17:01:27.127
> 
> 标签：c#, com, idispatch

在我的代码调用的非托管 IDispatch 接口中，其中一个功能是

```
 [id(1), helpstring("method")]
    HRESULT Test(IDispatch* pDispatch, [out, retval] long* pRC); 
```

要调用它，我正在尝试：

```
 Object myObj =  Activator.CreateInstance(
                        Type.GetTypeFromProgID("MyObject.ProgID"));
        Object [] args = new Object[1];
        args[0] = myObj
        Object result = So.GetType().InvokeMember("Test", BindingFlags.InvokeMethod, null, So,args); 
```

显然这行不通。有人对如何将我的对象编组为 IDispatch 指针有任何建议吗？

谢谢

# macos - 子类 NSMenu

> ID：10803572
> 
> 赞同：0
> 
> 时间：2012-05-29T17:01:54.753
> 
> 标签：macos, cocoa, subclass, nsmenu

这是一个简单的问题...

只是：我将如何对 NSMenu 进行子类化？因为我不确定如何去做。

我想对其进行子类化以进行自定义绘图，例如。更改背景颜色等

这通常是这样做的，`- (void)drawRect:(NSRect)dirtyRect`因此我尝试子类化并使用该方法，但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:55:09.830

你不能通过继承 NSMenu 来做到这一点。您想使用 NSMenuItem`setView:`在菜单中进行自定义绘图。查看[MenuItemView 示例代码](https://developer.apple.com/library/mac/#samplecode/MenuItemView/Introduction/Intro.html#//apple_ref/doc/uid/DTS10004136)，了解它是如何完成的以及您可以用它做什么。

# java - 更新 Java 导致小程序停止工作 - 未找到 testJava2_1/TestVMApplet.class

> ID：10803577
> 
> 赞同：1
> 
> 时间：2012-05-29T17:02:09.327
> 
> 标签：java, applet

嘿，

在 Windows 7-64 位上将我的 java 版本从 6u31 更新到 7u4 后，小程序停止工作。我使用 java-32 位，浏览器也是 32 位（试过 IE9 和 Firefox 12.0），唯一的原因是更新 java.lang. 我使用了来自[http://www.java.com/en/download/testjava.jsp](http://www.java.com/en/download/testjava.jsp)的测试，结果如下：

```
 security: property package.access value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.org.apache.xerces.internal.utils.,com.sun.org.apache.xalan.internal.utils.
 security: property package.access new value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.org.apache.xerces.internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.javaws
 security: property package.access value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.org.apache.xerces.internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.javaws
 security: property package.access new value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.org.apache.xerces.internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.javaws,com.sun.deploy
 security: property package.access value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.org.apache.xerces.internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.javaws,com.sun.deploy
 security: property package.access new value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.org.apache.xerces.internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.javaws,com.sun.deploy,com.sun.jnlp
 security: property package.definition value null
 security: property package.definition new value com.sun.javaws
 security: property package.definition value com.sun.javaws
 security: property package.definition new value com.sun.javaws,com.sun.deploy
 security: property package.definition value com.sun.javaws,com.sun.deploy
 security: property package.definition new value com.sun.javaws,com.sun.deploy,com.sun.jnlp
 security: property package.access value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.org.apache.xerces.internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.javaws,com.sun.deploy,com.sun.jnlp
 security: property package.access new value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.org.apache.xerces.internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss
 security: property package.definition value com.sun.javaws,com.sun.deploy,com.sun.jnlp
 security: property package.definition new value com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss
 basic: Added progress listener: sun.plugin.util.ProgressMonitorAdapter@1cc55fb
 basic: Plugin2ClassLoader.addURL parent called for http://www.java.com/applet/TestVM2-test.jar
 network: Cache entry not found [url: http://www.java.com/applet/TestVM2-test.jar, version: null]
 network: Connecting http://www.java.com/applet/TestVM2-test.jar with proxy=DIRECT
 network: Connecting http://www.java.com:80/ with proxy=DIRECT
 network: Cache entry not found [url: http://www.java.com/applet/TestVM2-test.jar, version: null]
 network: Cache entry not found [url: http://www.java.com/applet/TestVM2-test.jar, version: null]
 network: Connecting http://www.java.com/applet/TestVM2-test.jar with proxy=DIRECT
 network: Connecting http://www.java.com:80/ with proxy=DIRECT
 network: Connecting http://www.java.com/applet/TestVM2-test.jar with proxy=DIRECT
 network: Connecting http://www.java.com:80/ with proxy=DIRECT
 java.net.SocketException: Permission denied: connect

 bla bla bla

network: Cache entry not found [url: http://www.java.com/applet/TestVM2-test.jar, version: null]
network: Connecting http://www.java.com/applet/TestVM2-test.jar with proxy=DIRECT
network: Connecting http://www.java.com:80/ with proxy=DIRECT
network: Cache entry not found [url: http://www.java.com/applet/TestVM2-test.jar, version: null]
network: Cache entry not found [url: http://www.java.com/applet/TestVM2-test.jar, version: null]
network: Connecting http://www.java.com/applet/TestVM2-test.jar with proxy=DIRECT
network: Connecting http://www.java.com:80/ with proxy=DIRECT
network: Connecting http://www.java.com/applet/TestVM2-test.jar with proxy=DIRECT
network: Connecting http://www.java.com:80/ with proxy=DIRECT
java.net.SocketException: Permission denied: connect

bla bla bla

network: Cache entry not found [url: http://www.java.com/applet/, version: null]
network: Cache entry not found [url: http://www.java.com/applet/testJava2_1/TestVMApplet.class, version: null]
network: Connecting http://www.java.com/applet/testJava2_1/TestVMApplet.class with proxy=DIRECT
network: Connecting http://www.java.com:80/ with proxy=DIRECT
network: Cache entry not found [url: http://www.java.com/applet/testJava2_1/TestVMApplet/class.class, version: null]
network: Connecting http://www.java.com/applet/testJava2_1/TestVMApplet/class.class with proxy=DIRECT
network: Connecting http://www.java.com:80/ with proxy=DIRECT
java.lang.ClassNotFoundException: testJava2_1.TestVMApplet.class

bla bla bla

basic: load: class testJava2_1/TestVMApplet.class not found.
java.lang.ClassNotFoundException: testJava2_1.TestVMApplet.class

bla bla bla

Ignored exception: java.lang.ClassNotFoundException: testJava2_1.TestVMApplet.class
basic: Dialog type is not candidate for embedding
basic: Removed progress listener: sun.plugin.util.ProgressMonitorAdapter@1cc55fb
basic: Loading Java Applet Failed...
security: Reset deny session certificate store 
```

我已经尝试了很多不同的选择，比如禁用防火墙、禁用 Java 控制面板上的下一代插件、清除缓存、卸载和重新安装（JRE 和 JDK）、玩混合模式安全验证，也许还有一些我不记得了。我不知道我还能尝试什么让它工作..任何人都经历过同样的事情并解决了它？

啊，作为公司政策，由于安全更新，我们必须尽可能坚持使用最新版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:57:10.520

好的，问题是我在使用 java 访问页面时连接到 VPN (CISCO)。从 Java 7 开始，由于 Ipv6 存在问题（http://jonathangiles.net/blog/?p=1126）。所以我从 VPN 连接中禁用了它，并将这一行添加到 java 运行时参数：-Djava.net.preferIPv4Stack=true

现在它工作正常。

# python - 在 Python 中复制 FORTRAN（通过 F2PY 调用）输出

> ID：10803579
> 
> 赞同：1
> 
> 时间：2012-05-29T17:02:15.877
> 
> 标签：python, unix, stdout, f2py

我正在通过 f2py 在 python 中使用一些 fortran 代码。我想将 fortran 输出重定向到我可以使用的变量。我发现这个问题很有帮助。 [在 Python 中重定向 FORTRAN（通过 F2PY 调用）输出](https://stackoverflow.com/questions/977840/redirecting-fortran-called-via-f2py-output-in-python)

但是，我还想*选择*将 fortran 代码写入终端并进行记录。这可能吗？

[我有以下愚蠢的课程，我从上面的问题和http://websrv.cs.umt.edu/isis/index.php/F2py_example](http://websrv.cs.umt.edu/isis/index.php/F2py_example)拼凑而成 。

```
class captureTTY:
    ''' 
    Class to capture the terminal content. It is necessary when you want to
    grab the output from a module created using f2py.
    '''
    def __init__(self,  tmpFile = '/tmp/out.tmp.dat'):
        ''' 
        Set everything up
        '''
        self.tmpFile = tmpFile       
        self.ttyData = []
        self.outfile = False
        self.save = False
    def start(self):
        '''
        Start grabbing TTY data. 
        '''
        # open outputfile
        self.outfile = os.open(self.tmpFile, os.O_RDWR|os.O_CREAT)
        # save the current file descriptor
        self.save = os.dup(1)
        # put outfile on 1
        os.dup2(self.outfile, 1)
        return
    def stop(self):
        '''
        Stop recording TTY data
        '''
        if not self.save:
            # Probably not started
            return
        # restore the standard output file descriptor
        os.dup2(self.save, 1)
        # parse temporary file
        self.ttyData = open(self.tmpFile, ).readlines()
        # close the output file
        os.close(self.outfile)        
        # delete temporary file
        os.remove(self.tmpFile) 
```

我的代码目前看起来像这样：

```
from fortranModule import fortFunction
grabber = captureTTY()
grabber.start()
fortFunction()
grabber.stop() 
```

我的想法是有一个名为静默的标志，我可以用它来检查我是否允许显示 fortran 输出。然后在我构建它时将其传递给 captureTTY，即

```
from fortranModule import fortFunction
silent = False
grabber = captureTTY(silent)
grabber.start()
fortFunction()
grabber.stop() 
```

我不太确定如何实现这一点。显而易见的事情是：

```
from fortranModule import fortFunction
silent = False
grabber = captureTTY()
grabber.start()
fortFunction()
grabber.stop()
if not silent:
    for i in grabber.ttyData:
        print i 
```

我不是这个的忠实拥护者，因为我的 fortran 方法需要很长时间才能运行，很高兴看到它实时更新，而不仅仅是在最后。

有任何想法吗？代码将在 Linux 和 Mac 机器上运行，而不是 Windows。我浏览了网络，但没有找到解决方案。如果有的话，我相信它会非常明显！

干杯，

G

***澄清***：

从评论中我意识到上述并不是最清楚的。我目前拥有的是记录 fortran 方法的输出的能力。但是，这会阻止它打印到屏幕上。我可以将它打印到屏幕上，但无法记录它。我希望可以选择同时执行这两项操作*，*即记录输出并将其实时打印到屏幕上。

顺便说一句，fortran 代码是一种拟合算法，我感兴趣的实际输出是每次迭代的参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:04:22.613

您是否在 Fortran 子例程中尝试过类似的操作？（假设`foo`是你要打印的，52是你的日志文件的单元号）

```
write(52,*) foo
write(*,*) foo 
```

这应该打印`foo`到日志文件和屏幕上。

# r - R：基于另一个列表重复列表的元素

> ID：10803585
> 
> 赞同：4
> 
> 时间：2012-05-29T17:03:02.353
> 
> 标签：r, list, repeat

我已经搜索过这个但徒劳无功。问题是我有两个列表，首先是要重复的元素，例如

```
my.list<-list(c('a','b','c','d'), c('g','h')) 
```

第二个列表是每个元素要重复的次数

```
repeat.list<-list(c(5,7,6,1), c(2,3)) 
```

我想创建一个新列表，其中 my.list 中的每个元素都根据 repeat.list 重复，即结果：

```
[[1]]
[1] "a" "a" "a" "a" "a" "b" "b"  "b" "b" "b" "b" "b" "c" "c" "c" "c" "c" "c" "d" 
[[2]]
[1] "g" "g" "h" "h" "h" 
```

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T17:09:29.173

使用`mapply`：

```
mapply(rep, my.list, repeat.list)
[[1]]
 [1] "a" "a" "a" "a" "a" "b" "b" "b" "b" "b" "b" "b" "c" "c" "c" "c" "c" "c" "d"

[[2]]
[1] "g" "g" "h" "h" "h" 
```

* * *

`lapply`也可以解决问题，但更冗长：

```
lapply(seq_along(my.list), function(i)rep(my.list[[i]], repeat.list[[i]]))
[[1]]
 [1] "a" "a" "a" "a" "a" "b" "b" "b" "b" "b" "b" "b" "c" "c" "c" "c" "c" "c" "d"

[[2]]
[1] "g" "g" "h" "h" "h" 
```

# c# - 改变局部函数

> ID：10803587
> 
> 赞同：0
> 
> 时间：2012-05-29T17:03:23.857
> 
> 标签：c#, winforms

我的 C# WinForms 项目有问题。我有一个功能，如果它们相互接触，应该改变按钮的位置。例如，如果我有`btn1`at`oldloction = (4,2)`和`btn2`at `oldlocaction (2,6)`，那么如果我移动按钮并且它们会触摸`bt1 new location = (2,6)`，`bt2 new location = (4,2)` 现在我用 2 个按钮做到了，它可以工作。

```
locationx - means the x  location on the button and its orgenize firat place of the location feat to the first buttons[0], the second feat to locationx[1] = buttons[1].location.x;
location - works the same ass locationx but uts the y locaion. 

    private void myText_MouseUp(object sender, MouseEventArgs e)
    {
       Point oldlocation = new Point(locationx[0], locationy[0]);
       Point oldlocation2 = new Point(locationx[1], locationy[1]);
       if (buttons[0].Location.Y == buttons[1].Location.Y)
       {
           buttons[1].Location = oldlocation;
           buttons[0].Location = oldlocation2;
       }
    } 
```

当我试图将它作为一个全局函数时它不起作用，我不知道为什么。

这是不起作用的全局函数的代码：

```
 private void myText_MouseUp(object sender, MouseEventArgs e)
    {

        for (int i = 0; i < counter; i++)
        {
            Point oldlocation = new Point(locationx[i], locationy[i]);
            for (int j = 0; j < counter; j++)
            {
                if (i != j)
                {
                    Point oldlocation2 = new Point(locationx[j], locationy[j]);
                    if (buttons[i].Location.Y != buttons[j].Location.Y)
                    {
                        buttons[j].Location = oldlocation2;
                        buttons[i].Location = oldlocation;
                    }
                    else if (buttons[i].Location.Y == buttons[j].Location.Y)
                    {
                        buttons[j].Location = oldlocation;
                        buttons[i].Location = oldlocation2;
                    }
                }

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:07:54.837

尝试使用按钮事件来调用函数，而不是创建自己的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T17:13:10.393

如果第二个函数不是包含按钮的控件或表单的一部分，它将无法访问按钮数组或 locationx 和 locationy。您可能需要将这些值作为参数传递给您的函数，或者确保将它们作为包含第二个函数的类的成员提供。请注意，实用程序函数通常不会接受“sender”和“MouseEventArgs” - 仅传递实用程序函数完成其工作所需的特定数据。

# html - 使用 HTML5/CSS3 更改工具提示位置

> ID：10803590
> 
> 赞同：2
> 
> 时间：2012-05-29T17:03:40.483
> 
> 标签：html, css, tooltip

我从一个站点获得了一些 CSS3 代码，当悬停在锚元素 ( `<a>`) 上时，它会提供一个很好的工具提示框。但是，工具提示总是出现在`<a>`. 如果锚点位于屏幕顶部，则工具提示不在浏览器的顶部边缘，如果锚点位于屏幕的右边缘，则工具提示将出现在浏览器的右侧。无论哪种情况，我都看不到工具提示的大部分内容。有没有办法根据锚点与屏幕边缘的接近程度动态地让工具提示出现在屏幕的可见区域中？

这是 CSS 和示例锚点：

```
.tooltip {
    border-bottom: 1px dotted #0077AA;
    color: #0077AA;
    cursor: help;
}

.tooltip:hover {
    color: #0099CC;
}

.tooltip:after {
    -moz-transition: opacity 0.4s ease-in-out, visibility 0.4s ease-in-out;
    -ms-transition: all 0.4s ease-in-out;
    -o-transition: all 0.4s ease-in-out;
    -webkit-transition: all 0.4s ease-in-out;
    background: rgba(0, 0, 0, 0.8);
    border-radius: 8px 8px 8px 0px;
    box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.5);
    color: #FFF;
    content: attr(data-tooltip);
    margin-top: -24px;
    opacity: 0;
    padding: 3px 7px;
    position: absolute;
    transition: all 0.4s ease-in-out;
    visibility: hidden;
}

.tooltip:hover:after {
    opacity: 1;
    visibility: visible;
}

.htooltip, .htooltip:visited, .tooltip:active {
    color: #0077AA;
    text-decoration: none;
}

.htooltip:hover {
    color: #0099CC;
}

.htooltip span {
    -moz-transition: opacity 0.4s ease-in-out, visibility 0.4s ease-in-out;
    -ms-transition: opacity 0.4s ease-in-out, visibility 0.4s ease-in-out;
    -o-transition: opacity 0.4s ease-in-out, visibility 0.4s ease-in-out;
    -webkit-transition: opacity 0.4s ease-in-out, visibility 0.4s ease-in-out;
    background-color: rgba(0, 0, 0, 0.8);
    border-radius: 15px 15px 15px 0px;
    box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.5);
    color: #fff;
    margin-left: 2px;
    margin-top: -75px;
    opacity: 0;
    padding: 10px 10px 10px 40px;
    position: absolute;
    text-decoration: none;
    transition: opacity 0.4s ease-in-out, visibility 0.4s ease-in-out;
    visibility: hidden;
    width: 350px;
    z-index: 10;
}

.htooltip:hover span {
    opacity: 1;
    position: absolute;
    visibility: visible;
} 
```

和 HTML：

```
<a class="htooltip" href="#">WA &mdash; Washington
 <span>Washington State is the northwesternmost state in the contiguous 48.</span>
</a> 
```

**更新：**

这是我的解决方案的第一次重击，以防它可能对某人有所帮助：

```
 <script type="text/javascript" src="jquery-1.7.2.js"></script>

    <style type="text/css">
        .htooltip, .htooltip:visited, .tooltip:active
        {
            color: #0077AA;
            text-decoration: none;
        }

        .htooltip:hover
        {
            color: #0099CC;
        }

        .htooltip span
        {
            background-color: rgba(0,0,0, 0.8);
            border-radius: 15px 15px 15px 0px;
            box-shadow: 3px 3px 5px rgba(0, 0, 0, 0.5);
            color: #fff;
            opacity: 0;
            padding: 10px 10px 10px 40px;
            position: absolute;
            text-decoration: none;
            visibility: hidden;
            width: 350px;
            z-index: 10;

            -moz-transition: opacity 0.4s ease-in-out, visibility 0.4s ease-in-out;
            -webkit-transition: opacity 0.4s ease-in-out, visibility 0.4s ease-in-out;
            -o-transition: opacity 0.4s ease-in-out, visibility 0.4s ease-in-out;
            -ms-transition: opacity 0.4s ease-in-out, visibility 0.4s ease-in-out;
            transition: opacity 0.4s ease-in-out, visibility 0.4s ease-in-out;
        }

        .htooltip:hover span
        {
            position: absolute;
            opacity: 1;
            visibility: visible;
        }
    </style>

<a onmouseover="SetTopLeft(this);" class="htooltip" href="#">WA &mdash; Washington<span>Washington State is the northwesternmost state in the contiguous 48.</span></a>

    <script type="text/javascript">
        function SetTopLeft(obj) {
            var mouseX = $(obj).offset().left;
            var mouseY = $(obj).offset().top - $(window).scrollTop();
            var screenWidth = $(window).width();
            var screenHeight = $(window).height();

            var top;
            var left;

            // If the tooltip would be too close to the top of the browser, show it below the element.
            if (screenHeight - mouseY > screenHeight - 50)
            {
                top = mouseY + 17;
            }
            else
            {
                top = mouseY - 60;
            }

            if (screenWidth - mouseX < 350 && mouseX < 350) // Close to the left and the right - center the span over the element.
            {
                left = mouseX / 2;
            }
            else if (screenWidth - mouseX < 350) // Close to the right - put span to the left.
            {
                left = mouseX - 350;
            }
            else
            {
                left = mouseX + 50; // Close to the left with extra space on the right - put span to the right.
            }

            $(obj).find("span").css("top", top);
            $(obj).find("span").css("left", left);
        }
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:06:04.680

看到这个[jsfiddler](http://jsfiddle.net/xEdvC/)。我添加了这几行：

```
.htooltip span {
    position: relative;
    top: 6em;
    left: 5em;
    /* ... */
} 
```

# ruby - STDIN 和 Powershell - 如何使编码匹配？

> ID：10803595
> 
> 赞同：5
> 
> 时间：2012-05-29T17:03:55.253
> 
> 标签：ruby, powershell, encoding, utf-8, cp1250

我对 Ruby (1.9.3) 和 Powershell 有疑问。

我需要编写一个交互式控制台应用程序来处理波兰语中的句子。我得到了帮助，可以用波兰语变音符号检索 ARGV 元素，但标准输入无法按我的意愿工作。

代码说明：

```
# encoding: UTF-8
target = ARGV[0].dup.force_encoding('CP1250').encode('UTF-8')
puts "string constant = dupą"
puts "dupą".bytes.to_a.to_s
puts "dupą".encoding

puts "target = " +target
puts target.bytes.to_a.to_s
puts target.encoding
puts target.eql? "dupą"

STDIN.set_encoding("CP1250", "UTF-8") 
# the line above changes nothing, it can be removed and the result is still the same
# I obviously wanted to mimic the ARGV solution

target2 = STDIN.gets
puts "target2 = " +target2
puts target2.bytes.to_a.to_s
puts target2.encoding
puts target2.eql? "dupą" 
```

输出：

```
string constant = dupą
[100, 117, 112, 196, 133]
UTF-8
target = dupą
[100, 117, 112, 196, 133]
UTF-8
true
dupą //this is fed to STDIN.gets
target2 = dup
[100, 117, 112]
UTF-8
false 
```

显然 Ruby 从未从 STDIN.gets 中获得第四个字符。如果我写一个更长的字符串，比如`dupąlalala`，程序中仍然只有三个初始字节。

*   我尝试过枚举字节并使用 getc 循环，但它们似乎从未到达 Ruby（它们在哪里丢失？）
*   我用过 chcp 65001 （似乎没有改变）
*   我已将 $OutputEncoding 更改为 [Console]::OutputEncoding; 现在看起来像这样：

    ```
     IsSingleByte      : True
     BodyName          : ibm852
     EncodingName      : Środkowoeuropejski (DOS)
     HeaderName        : ibm852 
     WebName           : ibm852
     WindowsCodePage   : 1250
     IsBrowserDisplay  : True
     IsBrowserSave     : True
     IsMailNewsDisplay : False
     IsMailNewsSave    : False
     EncoderFallback   : System.Text.InternalEncoderBestFitFallback
     DecoderFallback   : System.Text.InternalDecoderBestFitFallback
     IsReadOnly        : True
     CodePage          : 852 
    ```

*   我正在使用 Consolas 字体

如何在 Powershell 中正确阅读波兰语变音符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-21T03:42:50.693

我找到了一些相关信息。不确定这是完全正确的信息。但是，嘿，OP 已经有了另一个解决方案。

```
# Get "encoding" for code page 1250 (Central European)
$en=[System.Text.Encoding]::GetEncoding(1250)
# Looks like this:
IsSingleByte      : True
BodyName          : iso-8859-2
EncodingName      : Central European (Windows)
HeaderName        : windows-1250
WebName           : windows-1250
WindowsCodePage   : 1250
IsBrowserDisplay  : True
IsBrowserSave     : True
IsMailNewsDisplay : True
IsMailNewsSave    : True
EncoderFallback   : System.Text.InternalEncoderBestFitFallback
DecoderFallback   : System.Text.InternalDecoderBestFitFallback
IsReadOnly        : True
CodePage          : 1250

# Change STDIN's input encoding
[console]::InputEncoding=$en
$x = Read-Host 
# I typed in dupą 
#  (I set Polish in Languate Bar. 
#   Final letter is apostrophe on US English keyboard)
[int[]][char[]]$x
# output is: 100 117 112 261 (in hex): 64 75 70 105
# the final character (261) is "Latin Small Letter A with Ogonek" 
```

# ebay-api - eBay API 汽车网站 - 按属性搜索

> ID：10803600
> 
> 赞同：1
> 
> 时间：2012-05-29T17:04:04.583
> 
> 标签：ebay-api

我想知道是否有人知道 eBay API 中是否有按属性搜索电机类别的选项。

IE 按车辆年份搜索 - 品牌 - 型号？

基本上我希望能够使用年份、品牌和型号方法搜索汽车网站。

我已阅读此处的文档：

[http://developer.ebay.com/devzone/finding/callref/finditemsbycategory.html](http://developer.ebay.com/devzone/finding/callref/finditemsbycategory.html)

而且我找不到任何基于这些属性进行搜索的方法。我希望这里有人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-29T02:15:37.917

您可以按品牌、型号和年份进行专门搜索，而无需使用关键字。eBay 文档有点难以理解，但是他们在您使用[方面过滤器](https://developer.ebay.com/DevZone/finding/CallRef/findItemsAdvanced.html#Request.aspectFilter)搜索的实际站点上搜索的任何参数。例如，如果您想搜索 1994 年到 2001 年间的每辆本田思域，它看起来像这样：

```
http://svcs.ebay.com/services/search/FindingService/v1?
OPERATION-NAME=findItemsAdvanced&
SERVICE-VERSION=1.0.0&
SECURITY-APPNAME=YourAppID&
RESPONSE-DATA-FORMAT=JSON&
REST-PAYLOAD&
paginationInput.pageNumber=1&
paginationInput.entriesPerPage=100&
categoryId=6001&
keywords=&
outputSelector=AspectHistogram&
aspectFilter(0).aspectName=Make&
aspectFilter(0).aspectValueName=Honda&
aspectFilter(1).aspectName=Model&
aspectFilter(1).aspectValueName=Civic&
aspectFilter(2).aspectName=Model+Year&
aspectFilter(2).aspectValueName=1998%7C1999%7C2000%7C2001 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:00:06.477

所以我在 API 文档中找到了更深层次的解决方案。为了完成我需要做的事情，我需要像这样使用 findItemsAdvanced 调用：

```
http://svcs.ebay.com/services/search/FindingService/v1?
    OPERATION-NAME=findItemsAdvanced&
    SERVICE-VERSION=1.11.0&
    SECURITY-APPNAME=YourAppID&
    RESPONSE-DATA-FORMAT=XML&
    REST-PAYLOAD&
    paginationInput.entriesPerPage=2&
    keywords=1999%20chevrolet%20camaro&
    categoryId=40018 
```

该关键字将在搜索结果中搜索“项目兼容性”选项，因此对于该关键字，您只需要使用年份品牌和型号即可。

# objective-c - 将标志枚举中表示的天数转换为人类可读的天数

> ID：10803601
> 
> 赞同：3
> 
> 时间：2012-05-29T17:04:06.940
> 
> 标签：objective-c, date, enums

```
// Values of the individual days as powers of two
enum {
    kMonday = 64,
    kTuesday = 32,
    kWednesday = 16,
    kThursday = 8,
    kFriday = 4,
    kSaturday = 2,
    kSunday = 1,
}; 
```

将所有 127 天的变体转换为人类可读字符串的最快方法是什么？

例如，如果我得到数字 7，我想输出“Fri-Sunday”

如果我得到数字 66，我想输出“周一，周六”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T18:51:39.353

基本上你有两个选择：

*   创建一个工厂，您交出合并天数的整数，您将取回字符串

*   创建包装器对象，包装 int 并提供访问内部逻辑的方法

我写了一个包装器：

```
#import <Foundation/Foundation.h>

typedef NS_OPTIONS(NSUInteger, WeekDays) {
    kMonday     = 1 << 6,
    kTuesday    = 1 << 5,
    kWednesday  = 1 << 4,
    kThursday   = 1 << 3,
    kFriday     = 1 << 2,
    kSaturday   = 1 << 1,
    kSunday     = 1 << 0
};

@interface DaysWrapper : NSObject
-(id)initWithDays:(WeekDays)weekDays;
@end

@interface DaysWrapper ()
@property (nonatomic,retain) NSMutableArray *days;
@end

@implementation DaysWrapper{
    int internalDays;
}

+(instancetype)dayWrapperWithDayBitmask:(WeekDays)daybits
{
    return [[DaysWrapper alloc] initWithDays:daybits];
}

-(instancetype)initWithDays:(WeekDays)weekDays
{
    if (self = [super init]) {
        WeekDays wholeWeek = 127;
        internalDays = weekDays & wholeWeek;
        _days = [@[] mutableCopy];

        while (wholeWeek) {
            wholeWeek >>= 1;
            if (weekDays & (wholeWeek +1)) {
                [_days addObject:[NSNumber numberWithBool:YES]];
            } else {
                [_days addObject:[NSNumber numberWithBool:NO]];
            }
        }
    }
    return self;
}

-(NSString *)description
{
    static dispatch_once_t onceToken;
    static NSArray *dayNames;
    static NSDictionary *fullnamesForDayNames;
    dispatch_once(&onceToken, ^{
        dayNames = @[@"Mon", @"Tues", @"Wend",@"Thu", @"Fri",@"Sat", @"Sun"];
        fullnamesForDayNames = [[NSDictionary alloc] initWithObjects: @[@"Monday",@"Tuesday",@"Wendsday",@"Thursday",@"Friday",@"Saturday",@"Sunday"]
                                                             forKeys:dayNames];
    });

    NSMutableString *returnSting = [@"" mutableCopy];
    __block BOOL previousWasAvailable = NO;
    NSMutableArray *dayRanges = [@[] mutableCopy];
    [self.days enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        if (!previousWasAvailable && [obj boolValue])
            [dayRanges addObject:[@[] mutableCopy]];

        if ([obj boolValue]) {
            NSMutableArray *actualRange = [dayRanges lastObject];
            [actualRange addObject:dayNames[idx]];
        }
        previousWasAvailable = [obj boolValue];
    }];

    [dayRanges enumerateObjectsUsingBlock:^(NSMutableArray *rangeArray, NSUInteger idx, BOOL *stop) {

        if ([returnSting length]){
            [returnSting appendString:@","];
        }

        if ([rangeArray count] > 1) {
            [returnSting appendString: [rangeArray firstObject]];

            if ([rangeArray count] > 2){
                [returnSting appendString:@"-"];
            } else {
                [returnSting appendString:@","];
            }
        }

        if (idx == [dayRanges count]-1){
            [returnSting appendString: fullnamesForDayNames[[rangeArray lastObject]]];
        } else {
            [returnSting appendString:[rangeArray lastObject]];
        }
    }];

    return returnSting;
}

@end

int main(int argc, const char * argv[])
{
    @autoreleasepool {

        WeekDays monAndFriday    = kMonday | kFriday;
        WeekDays thurToSat       = kThursday | kFriday | kSaturday;
        WeekDays weekEnd         = kFriday | kSaturday | kSunday;
        WeekDays mondAndWeekend  = weekEnd | kMonday;
        WeekDays friSat          = kFriday | kSaturday;
        WeekDays everySecondDay  = 8 | 32 | 2;
        WeekDays moday           = kMonday;
        WeekDays workWeek        = kMonday | kTuesday | kWednesday | kThursday | kFriday;
        WeekDays wholeWeek       = workWeek | weekEnd;
        WeekDays notThursday     =  ~kThursday & wholeWeek;

        NSLog(@"%@", [DaysWrapper dayWrapperWithDayBitmask:monAndFriday]);
        NSLog(@"%@", [DaysWrapper dayWrapperWithDayBitmask:weekEnd]);
        NSLog(@"%@", [DaysWrapper dayWrapperWithDayBitmask:thurToSat]);
        NSLog(@"%@", [DaysWrapper dayWrapperWithDayBitmask:mondAndWeekend]);
        NSLog(@"%@", [DaysWrapper dayWrapperWithDayBitmask:friSat]);
        NSLog(@"%@", [DaysWrapper dayWrapperWithDayBitmask:everySecondDay]);
        NSLog(@"%@", [DaysWrapper dayWrapperWithDayBitmask:moday]);
        NSLog(@"%@", [DaysWrapper dayWrapperWithDayBitmask:workWeek]);
        NSLog(@"%@", [DaysWrapper dayWrapperWithDayBitmask:wholeWeek]);
        NSLog(@"%@", [DaysWrapper dayWrapperWithDayBitmask:notThursday]);
    }
    return 0;
} 
```

**输出**

```
Mon,Friday
Fri-Sunday
Thu-Saturday
Mon,Fri-Sunday
Fri,Saturday
Tues,Thu,Saturday
Monday
Mon-Friday
Mon-Sunday
Mon-Wend,Fri-Sunday 
```

**随意的想法**

*   而不是在数组名称中保存整数信息的副本`self.days`，您可以在每次需要时动态处理它以减少空间
*   工厂基本上具有相同的逻辑

* * *

通用代码大修（ARC、现代 obj-c 语法、NS_OPTIONS、……）2015 年 5 月 21 日

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T22:57:49.470

这是一个有趣的挑战。

```
#import <Foundation/Foundation.h>
enum {
    kMonday = 1 << 0,
    kTuesday = 1 << 1,
    kWednesday = 1 << 2,
    kThursday = 1 << 3,
    kFriday = 1 << 4,
    kSaturday = 1 << 5,
    kSunday = 1 << 6,
};
typedef int DayBits;

NSString * const shortDayNames[] = { @"Mon", @"Tues", @"Wed", @"Thurs", @"Fri", @"Sat", @"Sun" };
NSString * const fullDayNames[] = { @"Monday", @"Tuesday", @"Wednesday", @"Thursday", @"Friday", @"Saturday", @"Sunday" };

int main(int argc, const char * argv[])
{

    @autoreleasepool {
        // Demo all possible combinations
        for( DayBits days_as_bits = 0; days_as_bits < 128; days_as_bits++ ){
            // Create an index set from the bits
            NSMutableIndexSet * indexes = [NSMutableIndexSet indexSet];
            for( int bit = 0; bit < 7; bit++ ){
                if( days_as_bits & (1 << bit) ){
                    [indexes addIndex:bit];
                }
            }

            // Create string for result
            NSMutableString * daysDesc = [NSMutableString string];
            // Enumerate the index set backwards and build up the string
            __block BOOL contiguous = NO;
            [indexes enumerateIndexesWithOptions:NSEnumerationReverse 
                                      usingBlock:^(NSUInteger idx, BOOL *stop) {
                // Use short names unless this is the name that will appear 
                // at the end of the string
                NSString * const * dayNames = shortDayNames;
                if (0 == [daysDesc length]) {
                    dayNames = fullDayNames;
                }
                // If the previous index is present, we're working on a contiguous set
                if( [indexes containsIndex:(idx - 1)] ){
                    // If we were already in a contiguous set, just continue
                    if( contiguous ){
                        return;
                    }
                    // This is the end day of a contiguous set; place the name 
                    // and a hyphen
                    else {
                        [daysDesc insertString:[NSString stringWithFormat:@"-%@", dayNames[idx]]
                                                                  atIndex:0];
                        contiguous = YES;
                        return;
                    }
                }
                // We've reached the start day of a set. 
                // Turn off contiguous and fall through
                else {
                    contiguous = NO;
                }

                // Place a comma and today's name
                [daysDesc insertString:[NSString stringWithFormat:@", %@", dayNames[idx]]
                                                          atIndex:0];
            }];
            // Clean up extraneous comma and space at the beginning of the string
            daysDesc = [daysDesc stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@" ,"]];
            NSLog(@"%d: %@", days_as_bits, daysDesc);
        }

    }
    return 0;
} 
```

请注意，我调换了您`enum`的位置以使其正常工作，因此这实际上对您来说可能完全没用，但希望对您有所帮助。这意味着，例如， 7`kMonday | kTuesday | kWednesday`代替`kFriday | kSaturday | kSunday`，所以结果是`Mon-Wed`。

我认为索引集的使用可能是我必须提供的主要见解。

您也许可以通过一些工作来切换事物（取消反转枚举等）；我已经浪费了足够多的时间了^W^W^W满足了我对此的好奇。

# android - 使用 Activity 将 Android 中的标题栏居中

> ID：10803602
> 
> 赞同：1
> 
> 时间：2012-05-29T17:04:08.127
> 
> 标签：android, class, android-activity, centering, titlebar

所以我试图使用一个开始的第一个 activity.java 类来集中我的应用程序标题。

这是我的代码

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
   -----setTitle(R.string.app_name1); //Sets the title for this activity using the app_name1 string
    setContentView(R.layout.main); 
```

所以带有“-----”的行是我的标题代码（当然，我的真实代码中没有这个问题）。我正在使用字符串 app_name 从中提取标题，那么我将如何准确地将其居中？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:11:04.713

对于在中心居中标题栏，您可以创建自定义标题栏：

```
 setContentView(R.layout.main);
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE,
R.layout.title_bar); 
```

**标题栏.xml：**

```
<?xml version="1.0" encoding="utf-8" ?>
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linear" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    >
    <TextView
        android:id="@+id/centertxt"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="title bar"
        android:layout_centerInParent="true"
        android:layout_marginLeft="5dip"
        android:textStyle="bold"
        android:textColor="#ffffff"
        android:textSize="20sp"
       />
    </RelativeLayout > 
```

# python - 在谷歌应用引擎上调用终端脚本

> ID：10803603
> 
> 赞同：1
> 
> 时间：2012-05-29T17:04:17.160
> 
> 标签：python, google-app-engine

大约 5 个小时以来，我一直在尝试在我的本地网络上部署一个网站，我正在使用谷歌应用程序引擎并将在本地运行它。我试图做的是在用户单击我页面上的“提交”按钮后调用终端脚本。

该脚本将在我的服务器上运行（），好吧，该脚本运行良好，但每次我尝试调用它时 Google 应用引擎都会出错...

我正在使用 ubuntu 12.04，Python 在 GAE 中进行编程......并且错误发生在这一行......

```
subprocess.call(['sendSMS.sh %s %s' % (s1,s2)]) 
```

错误说：

> subprocess.call(['sendSMS.sh %s %s' % (s1,s2)]) AttributeError: 'module' object has no attribute 'call'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T00:18:10.963

Google App Engine 上没有`subprocess.call`。App Engine 没有文件系统（正如@bernie 在评论中解释的那样），您不能在 Google 基础架构上运行任意代码——只能运行 Python（以及 Java 和 Go）代码。

看起来您从未打算上传您的应用程序以在 Google 平台上运行（从那时起您无法使用连接到您自己的服务器的手机），这意味着您计划在生产中使用开发服务器。这是一个**非常糟糕的主意**——开发服务器用于在将您的应用程序上传到 Google 平台之前对其进行测试，并且永远不应该在生产环境中使用。

由于您拥有自己的服务器，因此您应该运行生产 Web 服务器，例如 Apache。如果您已经使用过`webapp2`（按照 App Engine 教程的建议），您仍然可以使用现有代码。只需使用 Apache 的[mod_wsgi](http://code.google.com/p/modwsgi/)，然后`webapp2`在您的服务器上的 Apache 中部署您的应用程序。

# bash - 功能多

> ID：10803605
> 
> 赞同：0
> 
> 时间：2012-05-29T17:04:29.997
> 
> 标签：bash

```
7zpar() {
7z t $1 && par2 c -r10 -u Recovery $1
} 
```

我试图通过一个函数将两个命令链接在一起，第一个运行没有问题，但第二个从不触发。我承认我是编程新手，我在网上搜索过我是否做错了什么。到目前为止，我还没有找到任何关于此的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:10:10.507

有什么理由不只在没有`&&`检查的情况下运行这两个？

```
7zpar() {
7z t $1 
par2 c -r10 -u Recovery $1
} 
```

`&&`，在您拥有它的上下文中，仅当第一个命令返回成功时才会运行第二个命令。赔率`7z`是返回 false 并且`par2`永远不会运行。除非你*想要*这种行为，否则就把它分开。

# ios - UITableViewCell 中的自定义附件视图不可见

> ID：10803609
> 
> 赞同：2
> 
> 时间：2012-05-29T17:04:48.047
> 
> 标签：ios, uitableview

我在ala`UIImageView`中放置了`accessoryView`一个：`UITableViewCell`

```
UIImage* dragHandleImage = [UIImage imageNamed:@"rtf_icon"];
UIImageView* dragHandleView = [[[UIImageView alloc] initWithImage:dragHandleImage] autorelease];

dragHandleView.tag = DRAG_HANDLE_TAG;
cell.accessoryView = dragHandleView; 
```

但是，当单元格显示在表格中时，附件视图图像仅在每个部分的第一行可见。在四处摸索之后，我发现在 tableview 的`willDisplayCell:`委托调用和单元格的显示之间的某处，accessoryView 的 alpha 属性设置为零。有没有办法阻止这种情况，所以图像是可见的？

编辑：它似乎是在`layoutSubviews`调用`UITableViewCell`.

编辑：完整的`cellForRowAtIndexPath:`功能很长并且充满了在这个特定实例中不会被击中的案例。填充单元格的代码如下：

```
cell.textLabel.hidden = NO;
cell.textField.hidden = YES;
cell.textLabel.tag = indexPath.section * indexPath.row;
NSString *filename = document.document.filename;
if([filename isEqualToString:@""])
{
    filename = [document.document previewItemTitle];
}
cell.textLabel.text = filename;
cell.showsReorderControl = NO; 
```

当图像可见时，以下代码填充单元格：

```
cell.textField.tag = indexPath.section;
cell.textField.hidden = NO;
cell.textField.text = [section numberedTitle];
cell.textField.enabled = canAddSections;
cell.textField.clearButtonMode = UITextFieldViewModeWhileEditing;
cell.textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
cell.textLabel.hidden = YES;
cell.showsReorderControl = NO; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:54:28.517

由于这些单元格是可编辑的，因此`editingAccessoryView`会显示。投入证明`accessoryView`来`editingAccessoryView`解决问题。不优雅，但实用。

# actionscript-3 - Datagrid 使用 ItemEditor 值更新 ItemRenderer

> ID：10803610
> 
> 赞同：0
> 
> 时间：2012-05-29T17:04:57.203
> 
> 标签：actionscript-3, apache-flex, mxml

我有一个带有 ItemRenderer 和 ItemEditor 的数据网格。单击时，由于我的数据网格是可编辑的，我可以修改编辑单元格的值。但是，当我使用 Tab 键验证这些更改时，例如，itemrender 值与开始时相同，没有出现任何更改。

你能告诉我如何解决这个问题吗？

```
<mx:DataGridColumn dataField="scRub2" headerText="{sNomCol2}" 
editable="true" width="{iNomCol2}"id="dgc1" wordWrap="true"
                                                                itemRenderer="itemRenderer.MultilineHTMLRenderer"
itemEditor="itemRenderer.irHtmlText"
editorDataField="htmlModif" 
```

// 项目编辑器

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<fx:Script>
    <![CDATA[

        public var htmlModif:String;
        protected function lblData_changeHandler(event:Event):void
        {
            htmlModif = lblData.htmlText;
        }
    ]]>
</fx:Script>

<mx:TextArea id="lblData" top="0" left="0" right="0" bottom="0"     
             htmlText="{dataGridListData.label}"  preinitialize="initTA()"
             change="lblData_changeHandler(event)">
    <fx:Script>
        <![CDATA[

            import flash.events.Event;

            import mx.controls.dataGridClasses.DataGridListData;

            import mx.controls.dataGridClasses.DataGridListData;
            import mx.controls.listClasses.BaseListData;
            [Bindable("dataChange")] private var _listData : BaseListData;

            override public function get listData():BaseListData
            {
                return _listData;            
            }                   
            override public function set listData( value : BaseListData ) : void
            {
                _listData = value;
            }

            private function onChange(event:Event):void
            {
                this.data[ (listData as DataGridListData).dataField ] = lblData.htmlText;
            }
            public function initTA():void {         
                addEventListener("dataChange", handleDataChanged);
            }   

            public function handleDataChanged(event:Event):void {       
                // Cast listData to DataGridListData. 
                var myListData:DataGridListData = 
                    DataGridListData(listData);
                // Access information about the data passed 
                // to the cell renderer.
                trace("row index: " + String(myListData.rowIndex) + 
                    " column index: " + String(myListData.columnIndex));

            }
        ]]>
    </fx:Script>
</mx:TextArea> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:22:30.177

我没有运行您的代码，但认为将字段**htmlModif**更改为**get**函数将解决您的问题

```
public var htmlModif:String;
        protected function lblData_changeHandler(event:Event):void
        {
            htmlModif = lblData.htmlText;
        } 
```

至

```
 public function get htmlModif():String
    {
        return lblData.htmlText;
    } 
```

希望有帮助

# c# - 为什么 ConverterParameter 在 wpf 和 Silverlight 中不可绑定？

> ID：10803615
> 
> 赞同：3
> 
> 时间：2012-05-29T17:05:15.773
> 
> 标签：c#, wpf, silverlight

我正在学习 wpf 几个星期，我很惊讶 WPF / Silverlight 具有强大的绑定功能。

我也很惊讶某些属性不支持绑定，例如转换器参数。我发现这是一种原始数据类型，因此我们无法将其与其他来源绑定。

我想知道为什么这些属性是不可绑定的？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T17:15:49.520

它不可绑定，因为[IValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter%28v=vs.85%29.aspx)不是逻辑树的一部分。
因此，它们不会继承使 DataBinding 成为可能的 DataContext。

你可以找到[一些关于如何使这样的对象继承 DataContext 的](http://blogs.msdn.com/b/mikehillberg/archive/2008/05/21/model-see_2c00_-model-do.aspx) [技巧](http://joshsmithonwpf.wordpress.com/2008/06/26/datacontextspy/)，但我会建议反对它：它是 hackish，最终它会损害你的代码的可读性（没有人希望 IValueConverter 中有绑定的东西）。

# objective-c - 滚动视图中图像之间的间隙

> ID：10803616
> 
> 赞同：2
> 
> 时间：2012-05-29T17:05:17.313
> 
> 标签：objective-c, ios

我正在构建一个带有 65x78 大小的图像的滚动视图。这是代码：

```
numberOfViews = [fotosJugadores count];

    for (int i = 0; i <    [fotosJugadores count]; i++) {

        UIImage *myImage = [UIImage imageNamed:[fotosJugadores objectAtIndex:i]];
        CGFloat yOrigin = i * myImage.size.width + 120;
        NSLog(@"my image %@", myImage);
        UIImageView *awesomeView = [[UIImageView alloc] initWithFrame:CGRectMake(yOrigin, 0, myImage.size.width, myImage.size.height)];
        awesomeView.tag = i;
        awesomeView.image = myImage;
        awesomeView.alpha = 0.5f;
        awesomeView.backgroundColor = [UIColor blackColor];
        [self.jugadorSlide addSubview:awesomeView];
        awesomeView=nil;

    }

    [jugadorSlide setBackgroundColor:[UIColor blackColor]];
    jugadorSlide.contentSize = CGSizeMake(65 * numberOfViews+240,78);
    jugadorSlide.layer.cornerRadius = 11;
    jugadorSlide.layer.masksToBounds = YES;
    [jugadorSlide setContentOffset:CGPointMake(((65 * numberOfViews)/2), 0)];
    //jugadorSlide.decelerationRate = UIScrollViewDecelerationRateNormal;
    [self scrollViewDidEndDragging:jugadorSlide willDecelerate:NO]; 
```

我试图在图像之间或多或少地添加 3 个点的间隙。我为内容大小和图像 x 原点添加空间，以便在最后一个和第一个图像以及滚动视图边缘之间留出空间，因此它们总是在滚动视图的中心完成。我尝试了不同的方法，但图像重叠。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:54:37.450

您没有在图像之间添加任何间隙。yOrigin 值始终位于前一个图像旁边。

您应该将边距（在您的情况下为 3 点）乘以图像索引到原点，如下所示：`CGFloat yOrigin = i * (myImage.size.width + 3) + 120;`

# objective-c - 如何确定 UITableView 中单元格的部分-objective-c

> ID：10803618
> 
> 赞同：0
> 
> 时间：2012-05-29T17:05:22.387
> 
> 标签：objective-c, uitableview, cells, sections

我正在处理具有搜索视图的应用程序，搜索视图包含一个带有 3 个部分的 tableView - 我通过手动实现该部分

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
{
    // Return the number of sections.
    return 3;
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section{

    if (section == 0){
        UITextField *title = [[UITextField alloc]initWithFrame:CGRectMake(0, 0, 320, 10)];
        [title setBackgroundColor:[UIColor lightGrayColor]];
        [title setTextAlignment:UITextAlignmentRight];
        [title setFont:[UIFont boldSystemFontOfSize:15]];
        [title setText:@"videos"];
        return title ;
    }
    if (section == 1){
        UITextField *title = [[UITextField alloc]initWithFrame:CGRectMake(0, 0, 320, 10)];
        [title setBackgroundColor:[UIColor lightGrayColor]];
        [title setTextAlignment:UITextAlignmentRight];
        [title setFont:[UIFont boldSystemFontOfSize:15]];
        [title setText:@"documents"];
        return title ; 
    }
    if (section == 2){
        UITextField *title = [[UITextField alloc]initWithFrame:CGRectMake(0, 0, 320, 10)];
        [title setBackgroundColor:[UIColor lightGrayColor]];
        [title setTextAlignment:UITextAlignmentRight];
        [title setFont:[UIFont boldSystemFontOfSize:15]];
        [title setText:@"questions"];
        return title ; 
    }
} 
```

现在，我使用 XML 接收的所有数据如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"> 
<channel>
    <title>documents</title>
        <item>
        <title>how to count the days</title>
        <link>some link...</link>
        <date>11/09/2007 16:45:00</date>
        <SupplierName>roei</SupplierName>
        <CategoryName>the omer</CategoryName>

      </item>

        <item>
        <title>research</title>
        <link>some link...</link>
        <date>16/05/2010 13:41:00</date>
        <SupplierName>eran</SupplierName>
        <CategoryName>shavoot</CategoryName>
      </item>

</channel>

<channel>
    <title> video </title>
                <item>
                <title>the end of holiday</title>
                <link>some link...</link>
                <date>06/06/2011 08:56:00</date>
                <SupplierName>dina</SupplierName>
                <CategoryName>shavoot</CategoryName>

              </item>

                <item>
                <title>bible</title>
                <link>some link...</link>
                <date>24/05/2012 10:00:00</date>
                <SupplierName>amir</SupplierName>
                <CategoryName>shavoot</CategoryName>        
              </item>

</channel>

        <channel>
            <title>questions</title>

                <item>
                <title>questions for shavvot</title>
                <link>some link...</link>
                <date>28/10/2008 13:31:00</date>
                <SenderName>אלי.ד.</SenderName>
                <CategoryName>holidays</CategoryName>
              </item>

                <item>
                <title>Shavoot</title>
                <link>some link...</link>
                <date>25/05/2008 01:01:00</date>
                <SenderName>amir</SenderName>
                <CategoryName>holidays</CategoryName>
              </item>

        </channel>

</rss> 
```

如您所见-我的标题带有部分的名称，但是我应该如何确定单元格的正确部分？我将所有数据解析为一个数组，然后使用字典将其取出：

```
NSDictionary *object = [ResultsArrayDisplay objectAtIndex:indexPath.row]; 
```

请帮助我，我经过几个小时的尝试，到目前为止在互联网上没有任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:21:22.610

这是你的问题：

> 我将所有数据解析为一个数组，然后使用字典将其取出：

将每个部分的数据放入其自己的数组中，然后用于`indexPath.section`确定要使用的数组。对于每个部分，它只会为您*提供该部分的*行，因此您可以使用`indexPath.row`来索引每个数组。

如果您坚持将所有内容保存在一个数组中，那么您将必须保持对每种类型的数量进行计数，然后使用它来确定您需要哪个数组索引。

无论哪种情况，请务必执行`numberOfRowsinSection:`. 如果您使用多个数组，那么这将只是该部分的数组计数，否则它将是该部分中使用的主数组的一部分。

# android - 如何使用新的 xml 属性并与旧的 Android 版本兼容？

> ID：10803620
> 
> 赞同：3
> 
> 时间：2012-05-29T17:05:40.297
> 
> 标签：android, android-widget

我在我的应用程序中添加了小部件功能，它与旧版本的 Android（回溯到 1.6）兼容。Android 3.1+ 中的小部件支持 xml 标签**resizeMode**，这是一个非常有用的功能，我希望允许用户调整其小部件的大小。

但我仍然希望向后兼容 1.6（或者 2.1 也足够好）。

我怎样才能做到这一点？我可以有选择性的xml吗？

目前我正在标记 1.6。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:58:57.847

您可以将用于更新 API 级别的资源放在受支持的最低 API 级别限定的资源目录中。例如，您可以将 1.6 版本的 xml 文件放在 res/layout 中，并将 3.1+ 版本放在 res/layout-v12 中（“-v12”资源仅在 Android 3.1 及更高版本下运行时才会考虑，无论目标水平是多少）。您可以将这些限定符（如此[处](http://developer.android.com/guide/topics/resources/providing-resources.html)所述）应用于任何资源类型，而不仅仅是布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T15:38:20.870

我也认为这会起作用，并在其中创建了文件夹**xml-v12**和**widget_info.xml**。在 XML 编辑器中，我得到：

```
error: No resource identifier found for attribute 'resizeMode' in package 'android' 
```

那是因为我使用的是 Google API v7 吗？如果将小部件项目替换为 Google API v12，它会向后兼容吗？

# php - 如何以随机顺序生成元素 0-9 的数组？

> ID：10803623
> 
> 赞同：1
> 
> 时间：2012-05-29T17:05:59.607
> 
> 标签：php, arrays

我想生成一个包含 10 个元素（0、1、2、...、9）但以随机顺序排列的数组。例如：

```
$result = array(5, 3, 1, 2, 9, 8, 7, 4, 6, 0); 
```

实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T17:06:47.667

```
$numbers = range(0,9);
shuffle($numbers); 
```

# python - 访问字典的列表值

> ID：10803625
> 
> 赞同：0
> 
> 时间：2012-05-29T17:06:04.713
> 
> 标签：python

我使用以下方法创建了一个列表字典：

```
names = defaultdict(list) 
```

我正在从文本文件中读取一行，将其分成 3 列。我将该行的第一列作为键，将其他两列作为列表中的值。我使用以下代码段如下：

```
with open('f.txt') as f:
    lines = [l.split() for l in f.readlines() if l.strip()]
    for l in lines:
            names[l[0]].append([l[1],l[2]]) 
```

我有这样的文本文件：

```
00:12:34:23:45:67       134     123.456

45:34:23:45:44:23       133     345.123

3f:32:dr:45:34:r5       133     212.345

00:12:34:23:45:67       134     555.555

00:12:34:23:45:67       136     555.556

00:12:34:23:45:67       134     555.560 
```

如果我运行我的程序来输出键：值对，输出是：

```
00:12:34:23:45:67 [['134', '123.456'], ['134', '555.555'], ['136', '555.556'], ['134', '555.560']]

45:34:23:45:44:23 [['133', '345.123']]

3f:32:dr:45:34:r5 [['133', '212.345']] 
```

如何访问列表的各个元素？例如，在此输出中，我想计算每个键的 133、134、135、136 的数量以及每种类型之间的时间差。例如，对于 key `00:12:34:23:45:67`，有 3 134 和 1 136。该键的 134 的最高值和最低值之间的时间差是 555.560-123.456。我想要所有 133,134,135,136 种类型的这个结果。很多天以来，我都在为这个问题而苦苦挣扎。请帮忙。非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T17:39:30.733

似乎这里有一个更好的数据结构......

```
from collections import defaultdict
names=defaultdict(lambda :defaultdict(list))

with open('f.txt') as f:
   lines = [l.split() for l in f.readlines() if l.strip()]
   for l in lines:
       names[l[0]][l[1]].append(float(l[2])) 
```

现在，要从 max/min 中获取计数和差异：

```
for k,v in names.items():
    for kk,vv in v.items():
        print k,kk,len(vv),max(vv)-min(vv) 
```

输出：

```
00:12:34:23:45:67 136 1 0.0
00:12:34:23:45:67 134 3 432.104
45:34:23:45:44:23 133 1 0.0
3f:32:dr:45:34:r5 133 1 0.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T17:36:16.047

要计算计数，您可以执行以下操作：

```
counts = {}
for key, values in names.items():
    for v in values:
        if v[0] in counts:
            counts[v[0]] += 1
        else:
            counts[v[0]] = 1 
```

# sql-server - Project 中的第二份报告总是失败

> ID：10803627
> 
> 赞同：1
> 
> 时间：2012-05-29T17:06:11.997
> 
> 标签：sql-server, reporting-services

好的，所以我正在学习 SSRS，我遇到了最奇怪的问题。

我在 2008 工作室创建了一个新的报告项目。现在我添加了一个报告就好了。它运行，一切都很棒！所以现在我正在尝试添加一个使用参数的报告。我认为这很简单，只需在查询中添加一个参数，微软就会处理“poof”，但报告总是失败。

所以，我决定从我的好报告中获取查询，失败！所以我一起删除了查询，失败！我删除报告并重新开始，没有任何查询，失败！我只是在最基本的报告中添加一个文本框，然后失败！

我不断收到同样的错误：

```
Could not find file 'C:\MyReports\MYReports\bin\Debug\ReportFile.rdl' 
```

有人知道为什么会这样吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:14:14.217

右键单击解决方案并转到属性。在“调试”部分中，使用您要运行的报告的名称。这听起来像是希望运行不存在的报告的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:09:43.490

您可能需要清理解决方案并重建报告。看起来 Visual Studio/Report builder 没有将 rdl 文件放在该文件夹中。

# json - REST 中的 json 支持

> ID：10803629
> 
> 赞同：0
> 
> 时间：2012-05-29T17:06:26.810
> 
> 标签：json, rest

我在 RESTAPI 中工作。我们有带有抽象类型的 XML 模式。我们添加了@Mapped 注解来支持 json。

但是我们在执行 POST 操作时仍然会遇到 JAXB 绑定异常。但 GET 操作适用于 JSON。在这种情况下需要做什么？

我们正在使用 jettison 库。

对于 JAX-RS 实现，我们使用的是 RESTEasy 库。JAXB 生成的类驻留在包“net.com.schema.services”中。

```
@GET
@Produces({"application/xml","application/json"})
@Mapped(namespaceMap = {
@XmlNsMap(namespace = "services.schema.com.net", jsonName = ""),
@XmlNsMap(namespace = "http://www.w3.org/2001/XMLSchema-instance", jsonName = "")
})
@Path(ID_REGEX)
@RBAC(type = { CRUDEnum.READ }, capability = { "APICap" })
public JAXBElement<RESTOperationType> getCustomer(@PathParam("id") int customerId);

@POST
@Path(CUSTOMERS)
@Produces({"application/xml","application/json"})
@Mapped(namespaceMap = {
@XmlNsMap(namespace = "services.schema.com.net ", jsonName = ""),
@XmlNsMap(namespace = "http://www.w3.org/2001/XMLSchema-instance", jsonName = "")
})
@Consumes({"application/xml","application/json"})
@RBAC(type = { CRUDEnum.CREATE }, capability = { "APICap" })
public JAXBElement<RESTOperationType> addCustomer(JAXBElement<RESTOperationType> restOprn) 
```

我尝试了上面的代码，我得到了 POST 操作的绑定异常。我尝试了另一种方法。

```
@POST
@Path(CUSTOMERS)
@Produces({"application/xml","application/json"})
@Mapped(namespaceMap = {
@XmlNsMap(namespace = "services.schema.com.net ", jsonName = ""),
@XmlNsMap(namespace = "http://www.w3.org/2001/XMLSchema-instance", jsonName = "")
})
@Consumes({"application/xml","application/json"})
@RBAC(type = { CRUDEnum.CREATE }, capability = { "APICap" })
public JAXBElement<RESTOperationType> addCustomer(@Mapped(namespaceMap = {
@XmlNsMap(namespace = "services.schema.com.net ", jsonName = ""),
@XmlNsMap(namespace = "http://www.w3.org/2001/XMLSchema-instance", jsonName = "")
})JAXBElement<RESTOperationType> restOprn); 
```

我在 addCustomer 方法中给出了 @Mapped 注释。现在，绑定异常已解决，并且在尝试从 JSON 输入读取数据时出现 NullPointer 异常。

# c# - 我需要从 WPF 中的 radtreeview 中删除突出显示

> ID：10803633
> 
> 赞同：1
> 
> 时间：2012-05-29T17:06:49.637
> 
> 标签：c#, wpf, telerik, styles, radtreeview

这是我的代码。我只需要取消 radtreeview 的亮点。我会像在其他人中那样使用 IsHitTestVisible，但是它不允许我单击触发器来扩展节点。任何帮助，将不胜感激。

```
 <telerik:RadTreeView x:Name="radTreeView" Margin="8" ItemsSource="{Binding Errors}" Background="Salmon" IsHitTestVisible="True" IsDropPreviewLineEnabled="False" IsDragTooltipEnabled="False" Focusable="False">
            <telerik:RadTreeView.ItemTemplate>
                 <HierarchicalDataTemplate ItemsSource="{Binding SubItems}" >
                    <Grid Background="Salmon">
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>

                        </Grid.RowDefinitions>
                        <TextBlock Text="{Binding Description}" IsHitTestVisible="False" />

                        <ListBox Grid.Row="1" ItemsSource="{Binding Messages}" Margin="20,0,0,0" BorderBrush="#00000000" BorderThickness="0" Background="Salmon" IsHitTestVisible="False" >
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Message}"/>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </Grid>

                </HierarchicalDataTemplate>

            </telerik:RadTreeView.ItemTemplate>
        </telerik:RadTreeView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T22:11:58.717

从不同的角度接近它。您应该尝试在 TreeViewItem 上更改以下内容：

*   SystemColors.HighlightBrushKey
*   SystemColors.HighlightTextBrushKey

例子：

```
<Style TargetType="TreeViewItem">
      <Style.Resources>
          <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="#FFF"/>
          <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="#000"/>
     </Style.Resources>  
</Style> 
```

这也适用于 Rad 控件。您只需要针对 RadTreeViewItem 进行调整。

# php - PHP 致命错误：无法重新声明 get_and_delete_option()

> ID：10803644
> 
> 赞同：1
> 
> 时间：2012-05-29T17:07:41.680
> 
> 标签：php, wordpress, flickr

我正在为使用 WordPress 的[flickerRSS RU](http://gianlucacrema.com/blog/flickrrssRU/)插件的客户工作。但是，当他们尝试在每页上调用多个函数时，会在 error_log 中收到此错误：

```
PHP Fatal error:  Cannot redeclare get_and_delete_option() (previously declared 
in .../wp-content/plugins/flickrrss-ru/flickrrssRU.php:21) in 
.../wp-content/plugins/flickrrss-ru/flickrrssRU.php on line 21 
```

第一个插件调用是：

```
get_flickrRSSRU(array(
    'set' => '72157624558519886',
    'num_items' => 3,
    'type' => 'set',
    'html' => ' <a href="%flickr_page%" title="%title%"><img src="%image_square%" alt="%title%"/ height="68px" ></a>')); 
```

其次是：

```
get_flickrRSSRU(array(
    'set' => '72157624558519886',
    'num_items' => 11,
    'type' => 'set',
    'html' => ' <a href="%flickr_page%" title="%title%"><img src="%image_square%" alt="%title%"/ height="75" ></a>')); 
```

如果通过 WordPress 加载插件，我不确定为什么这两个调用会尝试再次初始化插件。

我发现正在使用的这个特定功能在插件中是这样的：

```
$flickrRSSRU = new flickrRSSRU();
add_action( 'admin_menu', array(&$flickrRSSRU, 'setupSettingsPage') );
add_action( 'plugins_loaded', array(&$flickrRSSRU, 'setupWidget') );
register_activation_hook( __FILE__, array( &$flickrRSSRU, 'setupActivation' ));

function get_flickrRSSRU($settings = array()) {
    global $flickrRSSRU;
    $flickrRSSRU->printGallery($settings);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:09:12.740

各种事情可能导致函数被定义两次（或试图定义）。您可以使用[`function_exists()`](http://php.net/manual/en/function.function-exists.php)来检查函数是否已经被声明，如果还没有声明，则只声明它。

```
if ( ! function_exists('get_and_delete_option') ) {
    function get_and_delete_option( $foo, $bar ){
        return $foo . $bar;
    }
} 
```

想一想，我认为这是 WordPress 一开始的标准方法。

### 包括或要求*一次*

如果您包含此功能，请尝试使用[`include_once`](http://php.net/manual/en/function.include-once.php)or[`require_once`](http://www.php.net/manual/en/function.require-once.php)代替。这样，同一个文件就不会被多次添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:15:55.713

我的猜测是 flickrrssRU.php 中的第 49 行

```
if (!get_option('flickrRSSRU_settings')) $this->setupActivation(); 
```

这可能会调用`$this->setupActivation()`两次，即`get_and_delete_option()`在该方法中声明函数。它*应该*在插件激活时创建选项，但是似乎无法访问它。

查看您的`wp_options`表格，看看您是否可以在其中找到“flickrRSSRU_settings”键。

替代解决方案是将同一文件的第 21 行从

```
function get_and_delete_option($setting) { $v = get_option($setting); delete_option($setting); return $v; } 
```

到

```
if(!function_exists('get_and_delete_option')) {
    function get_and_delete_option($setting) { $v = get_option($setting); delete_option($setting); return $v; }
} 
```

但是，如果它没有找到设置，您以后可能会遇到其他问题。

# android - 哪种布局实际上在列表视图中显示联系人？

> ID：10803651
> 
> 赞同：0
> 
> 时间：2012-05-29T17:08:11.167
> 
> 标签：android, contacts, contact

我想将联系人列表视图中的联系人照片修改为更小的分辨率。但我似乎找不到定义列表视图条目的布局。我已经艰难地浏览了代码，但这是一个巨大的布局迷宫。有谁知道它可能是哪一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:29:33.760

试试这个，对我来说它有效......

使用`custom adapter`, by `extending a class to BaseAdapter`。您可以通过此方法创建要在您选择的 listView 上显示的视图。

任何延伸到 BaseAdapter 的类都将实现 4 种方法，`getCount, getItem,` `getItemId, getView`

# bash - 无法在我的 Node.js 应用程序中读取我的环境变量

> ID：10803653
> 
> 赞同：20
> 
> 时间：2012-05-29T17:08:30.843
> 
> 标签：bash, node.js, ubuntu, terminal, environment-variables

我在 Ubuntu 12.04 上，我只是在学习环境变量。我正在尝试从我的应用程序中读取自定义变量，但它始终显示为`undefined`. 这是我的测试应用程序的代码：

```
// app.js

console.log('Value: ' + process.env.NODE_ENV); 
```

如果我运行以下命令，您将看到该变量有一个值：

```
$ NODE_ENV=production
$ echo $NODE_ENV
production 
```

我可以`echo $NODE_ENV`整天，它会继续向我展示“生产”，但是当我`process.env.NODE_ENV`在我的 Node 应用程序中这样做时，它总是显示“未定义”。

```
$ node app.js
Value: undefined 
```

不过，这是奇怪的部分，如果我显示另一个我知道已经存在的环境变量，比如`process.env.PATH`，那么它就可以工作。

```
$ node app.js
Value: /usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games 
```

另一个怪癖是该命令`printenv list`似乎不包含我的自定义变量`NODE_ENV`，尽管它`echo $NODE_ENV`向我显示了正确的值。`printenv NODE_ENV`也没有显示任何内容，但`printenv PATH`显示了正确的值，就像我`PATH`在节点应用程序中访问时一样。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-29T17:12:40.400

您需要`export`shell 变量以使它们可用于您在 shell 中执行的进程。

比较此命令的输出：

```
FOO=bar; bash -c 'echo $FOO' 
```

输出如下：

```
export FOO=bar; bash -c 'echo $FOO' 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-05-10T12:26:23.093

我从一些非常愚蠢的事情中找到了我的方式。

我刚刚添加了新的导出变量，但我的节点进程仍然没有看到它们。然后我意识到重新启动节点进程是不够的——我还必须打开一个新终端（即 bash 实例）。一旦我这样做了，它工作得很好:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-10T21:16:14.907

如果您正在使用`dotenv`，请确保在访问环境中的变量之前进行配置。您的代码顺序在 js 中很重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T00:08:04.133

您可能需要考虑使用库来管理应用配置。

例如**nconf**通过帮助管理配置

*   命令行参数
*   环境变量
*   文件
*   ETC..

查看源代码是学习[https://github.com/flatiron/nconf的好方法](https://github.com/flatiron/nconf)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-23T18:51:15.733

从一些非常愚蠢的事情中找到了我的方式！我从主项目目录中的“src”文件夹运行我的服务器文件，因此我的 .env 在“src”文件夹本身（从我的服务器运行的位置）中运行。一旦我将 .env 放在我的主项目目录中，它就对我有用。确保您的“.env”在主目录中，而不是在“src”文件夹中。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-02-01T16:13:48.193

重新启动 bash（源 ~/.bashrc）。这将考虑到您的系统环境。

# android - 打开第三个活动并开始一个动作

> ID：10803655
> 
> 赞同：0
> 
> 时间：2012-05-29T17:08:55.110
> 
> 标签：android, android-activity

我想开发一个在后台运行的应用程序，并且总是启动一些特定的应用程序，我的应用程序会采取一些行动，例如：

当 Astro 打开我的应用程序时，必须访问 Astro 的菜单并选择一个选项。

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:31:57.427

根据第三个应用程序，无法启动您的应用程序。

但是，如果第三个应用程序执行特殊操作（拍照、录视频、拨打电话……或许多其他操作），您可以设置`BroadcastReceiver`并监听 Android 操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T17:13:26.857

您无法以这种方式控制应用程序。如果可以的话，这将是一个重大的安全问题。

# sparql - Sparql COUNT query using Jena api

> ID：10803657
> 
> 赞同：1
> 
> 时间：2012-05-29T17:09:00.370
> 
> 标签：sparql, semantic-web, jena, virtuoso

I want to get total count of sparql query results. I am using jena API for this in java. count query is working in virtuoso but its not working in java using jena api.

**Sparql Query:**

```
select ( count ( ?name ) AS ?total ) from < mygraph > 
where { ?name rdf:type foaf:Name} 
```

Its not working in jena API. I have read [http://www.w3.org/2001/sw/DataAccess/issues#countAggregate](http://www.w3.org/2001/sw/DataAccess/issues#countAggregate) So I think its not working in rdf but its working in Virtuoso sparql editor. So if u have a solution then plz let me know.And also tell me if there is alternative solution.

Thank you

Here is my java code,

```
String countQueryString="select ( count ( ?name ) AS ?total ) from < mygraph > 
where { ?name rdf:type foaf:Name}";
Query selectQuery = QueryFactory.create(countQueryString);
        QueryExecution qe = QueryExecutionFactory.sparqlService(Constant.SPARQL_ENDPOINT, selectQuery);
Resultset results=qe.execSelect();
if(results.hasNext())
{
    totalCount=countResult.next().get("total").toString();
} 
```

Below is the exception: HttpException: HttpException: 400 Bad Request: HttpException: 400 Bad Request.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:11:03.877

Take a look at the ARQ documentation for aggregate support (I encountered similar issues)

[http://jena.apache.org/documentation/query/group-by.html](http://jena.apache.org/documentation/query/group-by.html)

It seems that it doesn't support

```
(count(?variable) as ?binding) 
```

In the past I have also tried removing the parenthesis around the aggregate projection i.e:

```
select count ( ?name ) AS ?total from < mygraph > where { ?name rdf:type foaf:Name} 
```

But this was because Virtuoso actually had an issue with them.

# api - 如何创建 facebook 开放图形对象和操作？

> ID：10803662
> 
> 赞同：0
> 
> 时间：2012-05-29T17:09:22.410
> 
> 标签：api, facebook-opengraph

我在 facebook 中创建了一些应用程序，并在它们上尝试了开放图。我通过转到应用程序的设置页面创建了打开的图形对象和操作。我想知道我是否可以使用 facebook api 或其他东西以编程方式创建这些对象和操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:46:12.053

不，您不能以编程方式执行此操作。创建对象和动作是非常亲力亲为的，并且要求开发人员对这些对象和动作在显示中的设计方式感兴趣，以便为您的用户提供深度社交体验。将其保留在 UI 活动中会迫使开发人员注意他/她使用的动词、类型和项目。

# objective-c - 从另一个类访问实例变量——我可以使用类方法吗？

> ID：10803667
> 
> 赞同：3
> 
> 时间：2012-05-29T17:09:50.257
> 
> 标签：objective-c, instance-variables

我需要从另一个类 ( )访问 a `NSMutableArray`, in 。我尝试的解决方案是在其中创建一个类方法并从中调用它。显然，这是不可能的，因为这是对类方法的限制。我无法弄清楚解决方案。我能做些什么？`class1``class2``class1``class2`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:17:26.227

毫不奇怪，您需要一个实例才能访问实例变量。如果该实例适合您的设计，您可以使该实例成为*单例*，或者使您递增的变量`static`而不是 ivar，这将使其可以直接从类方法访问。

如果您需要从一个类方法访问多个实例，则您需要某种类型的对象*注册表*，例如`NSDictionary`通过键映射对象的注册表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T17:19:08.113

通常，您通过属性公开所需的实例变量。

此链接涵盖属性。

[http://cocoacast.com/?q=node/103](http://cocoacast.com/?q=node/103)

一旦公开了正确的变量，那么只需将对所需类的引用传递给给定的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T17:16:58.960

将实例变量作为参数传递给类方法应该可以解决问题。编辑：如果 class1 和 class2 只是实例，那么您将需要一个类变量。

# xslt - 在 xsl 变量 for-each 循环内时无法访问 xml 数据

> ID：10803670
> 
> 赞同：0
> 
> 时间：2012-05-29T17:09:59.533
> 
> 标签：xslt, saxon

在 for-each 循环中使用 xsl 变量时，我无法使用 x-path 正常访问 xml 数据（它循环正常）。尝试在循环外访问相同的数据时没有问题。

例子：

```
<xsl:variable name="teams">
        <team name="Team one" cg_id="155370" homepage="http://www.teamone.com" enabled="true" />
        <team name="Team two" cg_id="430906" homepage="http://www.teamtwo.com" enabled="true" />
</xsl:variable>

<xsl:for-each select="document('')/*/xsl:variable[@name='teams']/team[@active='true']">

    <xsl:value-of select="/DATA/ITEMS/ITEM/HEADERTXT" />

</xsl:for-each> 
```

我正在使用 saxon-he 9.3.0.5 (Kernow 1.7.2)

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:26:30.417

那么路径`/`选择当前上下文节点的根节点（文档节点）。当您使用两个文档时，主要输入文档和样式表文档，并且您使用`for-each`来访问样式表文档中的节点，您需要将主文档存储在`for-each`例如

```
<xsl:variable name="primary-doc" select="/"/> 
```

然后在 for-each 你可以使用

```
<xsl:value-of select="$primary-doc/DATA/ITEMS/ITEM/HEADERTXT" /> 
```

这就是为什么您的代码没有执行您想要的操作以及如何解决处理多个文档的问题的解释。

然而，使用带有节点的变量但随后访问它的整个方法`document('')`看起来相当奇怪，如果您有一个`$teams`带有临时文档的变量（您在 XSLT 2.0 中执行），您可以简单地执行

```
<xsl:for-each select="$teams/team[@active='true']">
  <xsl:value-of select="$primary-doc/DATA/ITEMS/ITEM/HEADERTXT"/>
</xsl:for-each> 
```

当然，对于两个文档，您需要确保存储另一个文档，而不是存储在 for-each 更改上下文节点和文档之外的变量中。

# ssl - IDN 的 SSL 证书中的 CN 和 DNS 字段使用哪种格式？

> ID：10803671
> 
> 赞同：5
> 
> 时间：2012-05-29T17:10:02.147
> 
> 标签：ssl, idn

如果我获得了 IDN 域的 SSL 证书，我应该期望 CN 字段中的值是域名的文字 UTF-8 字符串，还是转义的 punycode 版本？

X509v3 主题备用名称 DNS 条目的格式是否相同？

我可以查看一些示例 crt 文件，或链接到使用 SSL 的 IDN 吗？

有这方面的规范规范吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:04:03.467

假设您在谈论 HTTPS，传统上用于主机名验证的规则在[RFC 2818，第 3.1 节](https://www.rfc-editor.org/rfc/rfc2818#section-3.1)中定义，其中根本没有提到国际化域名。

最近，编写了一个“最佳实践”RFC，即 RFC 6125，以协调跨协议的主机名验证程序并阐明其他一些要点。以下是关于 IDN 的内容（[第 6.4.2 节](https://www.rfc-editor.org/rfc/rfc6125#section-6.4.2)）：

> ```
>  If the DNS domain name portion of a reference identifier is an
>  internationalized domain name, then an implementation MUST convert
>  any U-labels [IDNA-DEFS] in the domain name to A-labels before
>  checking the domain name.  In accordance with [IDNA-PROTO], A-labels
>  MUST be compared as case-insensitive ASCII.  Each label MUST match in
>  order for the domain names to be considered to match, except as
>  supplemented by the rule about checking of wildcard labels
>  (Section 6.4.3; but see also Section 7.2 regarding wildcards in
>  internationalized domain names). 
> ```

不幸的是，这在实践中可能对您没有帮助。首先，RFC 6125 相对较新，据我所知，很少有应用程序或库声称实现它。其次，并非所有库都严格遵守 RFC 2818（例如，浏览器有时可以更宽容地考虑哪些 CN 是可接受的）。

# android - findViewById 不适用于包含？

> ID：10803672
> 
> 赞同：56
> 
> 时间：2012-05-29T17:10:04.283
> 
> 标签：android

我有一个包括：

```
<include
    android:id="@+id/placeHolder"
    layout="@layout/test" /> 
```

包含布局看起来像（test.xml）：

```
<?xml version="1.0" encoding="utf-8"?>

<FrameLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/outer"
    ... >

    <ImageView
        android:id="@+id/inner"
        ... />
</FrameLayout> 
```

我似乎无法在运行时找到 id="inner" 的内部 ImageView：

```
ImageView iv = (ImageView)findViewById(R.id.inner);
if (iv == null) {
    Log.e(TAG, "Not found!");
} 
```

我应该能够找到它吗？似乎因为它使用了“包含”，所以普通的 findViewById 方法不起作用。

- - - - - 更新 - - - - - - - -

所以我可以找到分配给包含的 id：

```
View view = findViewById(R.id.placeHolder); // ok 
```

但我无法通过 id 找到它的任何孩子，例如：

```
view.findViewById(R.id.outer); // nope
view.findViewById(R.id.inner); // nope 
```

如果我尝试直接搜索它们，则与原始版本相同，例如：

```
findViewById(R.id.outer); // nope
findViewById(R.id.inner); // nope 
```

ids 可能只是在运行时从元素中剥离出来吗？

谢谢

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-05-29T17:15:16.913

尝试检索`<include />`然后在其中搜索

确保您的根与包含的 XML 文件中的根元素具有相同的 ID。例如

```
<include
    android:id="@+id/outer"
    layout="@layout/test" /> 
```

然后使用以下方法检索您的“内部”内容：

```
FrameLayout outer = (FrameLayout)findViewById(R.id.outer);

ImageView iv = (ImageView)outer.findViewById(R.id.inner);
if (iv == null) {
    Log.e(TAG, "Not found!");
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-03-03T15:21:57.580

我只是想为未来的 Google 员工添加这一点，我遇到了相反的问题，其中包含的 xml（在本例中为外部）的根布局在调用 findViewById() 时为空，但外部的子级不为空。

`include`通过删除“视图”（在本例中为 placeHolder）的 id 属性为我解决了这个问题。当它消失时，我可以找到外部但它是 id :)

如果您需要为该项目分配一个 id `include`，我认为最好将其包装在另一个视图组中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-05T16:45:07.273

不要给你包含的布局一个 ID

```
<FrameLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    app:layout_constraintTop_toBottomOf="@id/twitterItem"
    android:id="@+id/item1">

    <include
        layout="@layout/item_common_layout"/>

</FrameLayout> 
```

# item_common_layout

```
<FrameLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    ... >

    <ImageView
        android:id="@+id/inner"
        ... />
</FrameLayout> 
```

现在您可以找到内部视图：

```
ImageView iv = (ImageView) view.findViewById(R.id.inner); // works fine! 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T17:14:25.107

您可以尝试然后找到外部`parent`（让我们称之为`op`）然后尝试`op.findViewById()`吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-22T08:06:25.053

如果您已将 id 分配给`include`元素，并且在包含的布局中只有一个视图（没有任何`ViewGroup`），那么在我的情况下`AdView`，请使用元素的 id`include`而不是包含的视图。

```
<?xml version="1.0" encoding="utf-8"?>
<!--adview.xml-->
<com.google.android.gms.ads.AdView
        xmlns:ads="http://schemas.android.com/apk/res-auto"
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/adView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_alignParentBottom="true"
        ads:adSize="BANNER"
        ads:adUnitId="@string/admob_banner_id">
</com.google.android.gms.ads.AdView> 
```

activity_main.xml

```
<include
        layout="@layout/adview"
        android:id="@+id/adsLayout"
  /> 
```

活动中

```
AdView nullAdView=findViewById(R.id.adView); //this will give null
AdView adView = findViewById(R.id.adsLayout);  //this will be AdView 
```

如果您不给`id`元素`include`，则可以使用 view `id`。此外，如果您`view`在任何`ViewGroup`类似的内部`FrameLayout`，则可以使用 view `id`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-28T07:47:55.560

我有同样的问题。我发现我使用了一个错误的具有相同名称的函数和 2 个参数，如下所示：

```
public void onCreate(@Nullable Bundle savedInstanceState, @Nullable PersistableBundle persistentState) {
    super.onCreate(savedInstanceState, persistentState);
    setContentView(R.layout.activity_ble_connecting);
    //findViewByid() => wrong
} 
```

**只有一个参数的**正确函数：****

 **```
 protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_ble_connecting);
        //findViewByid() => correct
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-07T22:11:10.273

未来的研究人员：[https](https://stackoverflow.com/a/1760010/2790016) ://stackoverflow.com/a/1760010/2790016 当你添加一个 id 时，它会覆盖来自“真实布局”的外部标签的 id

鉴于大多数约束布局需要一个 id 来定位项目，从 include 中删除 id 并不是一个理想的答案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-30T09:58:01.173

我找到了这个问题的答案。

当我们同时设置 Incloud ID 和第一个内层时，就会出现这个问题。

我使用合并来解决问题。

```
 <include
    android:id="@+id/layout_stories"
    layout="@layout/layout_stories" /> 
```

在 layout_stories 中

```
<merge>
<LinearLayout
android:id="@+id/llItem">
 ...
</LinearLayout>
<merge> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-15T04:49:53.917

我按照[Daniel Wilson](https://stackoverflow.com/users/1866373/daniel-wilson)的回答得到了解决方案。我在同一个屏幕上多次使用相同的布局，并想使用不同的 id 来引用它们。因此，我没有将 id 分配给 include 标记，而是将它们简单地包装在另一个 viewGroup 中（我使用了 FrameLayout）并标识了 frameLayout 以访问内部子项。那成功了。例子：

在我的 main.xml 中：

```
<!--    ITEM 1-->
<FrameLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    app:layout_constraintTop_toBottomOf="@id/twitterItem"
    android:id="@+id/item1">

    <include
        layout="@layout/item_common_layout"/>

</FrameLayout>

<!--    ITEM 2-->
<FrameLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    app:layout_constraintTop_toBottomOf="@id/item1"
    android:id="@+id/item2">

    <include
        layout="@layout/item_common_layout"/>

</FrameLayout> 
```**

# asp.net-mvc-3 - 在 MVC3 项目中定期更新数据库

> ID：10803676
> 
> 赞同：0
> 
> 时间：2012-05-29T17:10:14.520
> 
> 标签：asp.net-mvc-3

我正在使用 ASP.NET MVC3 和实体进行数据库访问的 Web 项目。

我需要每天自动更新数据库。更具体地说，我需要检查数据库以查看记录是否超过一个月或更长时间并将其状态设置为旧（表中有一个状态和创建日期字段）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:49:24.367

如果您必须通过 .net 代码执行此操作并且无法创建 SQL 服务器任务，那么您可以创建一个由 Windows 计划任务启动的可执行文件。或者您的可执行文件可能是使用计时器的 Windows 服务。我不明白你为什么要把这个逻辑放在一个网站上。

# php - foreach 第二次没有获取数组数据

> ID：10803677
> 
> 赞同：0
> 
> 时间：2012-05-29T17:10:22.277
> 
> 标签：php, javascript, arrays

这个问题建立[在我之前的这个](https://stackoverflow.com/questions/10763530/adding-multiple-inputs-to-file-php-form-submit/10763568)问题之上......我有一个可以很好提交的 php 表单。我正在向其中添加一个“添加更多”功能，以再次添加整个字段集。

```
//access changes
if ($reqtype=="accesschange"){
    $subject="FORM: Request Access Change(s) To Exisiting Folder";
    $note .="Full Path of folder to change access: $fullpath \n\n";
    if($userpermissiongroup != ""){
        $note .="User Permission Group to be changed: $userpermissiongroup \n";
    }
    if($addreadaccess != ""){
        $note .="Additional users requiring read access: $addreadaccess \n";
    }
    if($addauthoraccess != ""){
        $note .="Additional users requiring author access: $addauthoraccess \n";
    }
    if($removeaccess != ""){
        $note .="Users to be removed from access: $removeaccess \n";
    }
    $note .="Data Steward, Program Manager, Project Lead, or Supervisor who can authorize access changes: $supervisor \n\n";
    $note .="Phone number of approving official: $phoneapprover \n";

} 
```

如果用户单击更多，则此 foreach 将遍历添加的字段：

```
 $addQues = array(
        "Full Path of folder to change access:",
        "User Permission Group to be changed:",
        "Additional users requiring read access:",
        "Additional users requiring author access:",
        "Users to be removed from access:",
        "Data Steward, Program Manager, Project Lead, or Supervisor who can authorize access changes:",
        "Phone number of approving official:",          
    );

foreach($_REQUEST['addfield'] as $k => $value) {
        $note .= "$addQues[$k] $value";
    } 
```

它将采用第一个字段，即 php 添加一个......然后是通过 javascript 添加的第一个字段集（用户添加），但它不会采用第二个或第三个......所以我的数据最终看起来像：

> 更改访问权限的文件夹的完整路径：t:\this-drive 要更改的用户权限组：dv group 需要读取访问权限的其他用户：jfla 需要作者访问权限的其他用户：azann 要从访问权限中删除的用户：dlint 数据管理员，项目经理，项目负责人，或可以授权访问更改的主管：gpone 审批官员电话号码：888-888-7777
> 
> 更改访问权限的文件夹的完整路径：o:\driveUser 要更改的权限组：odrive 组需要读取访问权限的其他用户：sjones 需要作者访问权限的其他用户：pvalle 要从访问权限中删除的用户：kpowerData 管理员、项目经理、项目负责人或主管可授权访问变更：bzell 审批官电话：777-777-7777
> 
> i:\new i group urusa mmalone jjon yokis 888-999-555
> 
> u:\ u group phammer midnite bmarley gdead 777-444-2222

为什么那个 foreach 没有第二次拿起 addQues() ？

VAR_DUMP $_REQUEST

> array(22) { ["name"]=> string(1) "" ["email"]=> string(14) "" ["add"]=> string(0) "" ["citystate"]= > string(4) ", " ["phone1"]=> string(0) "" ["phone2"]=> string(0) "" ["reqtype"]=> string(12) "accesschange" [" newpath"]=> string(0) "" ["usersaccess"]=> string(0) "" ["ryesaccess"]=> string(0) "" ["approvingofficer"]=> string(0) "" ["sphone"]=> string(0) "" ["comments"]=> string(0) "" ["fullpath"]=> string(14) "t:\this-drive" ["userpermissiongroup"] => 字符串(8) "dv" ["addreadaccess"]=>string(9) "jflat" ["addauthoraccess"]=> string(5) "bzat" ["removeaccess"]=> string(5) "dlit" ["supervisor"]=> string(6) "lnat" [ "phoneapprover"]=> string(12) "888-888-7777" ["addfield"]=> array(21) { [0]=> string(9) "o:\drive" [1](https://stackoverflow.com/questions/10763530/adding-multiple-inputs-to-file-php-form-submit/10763568)=> string(12) "odrive group" [2]=> string(6) "sjones" [3]=> string(6) "pvae" [4]=> string(7) "kpow" [5]= > string(8) "bdez" [6]=> string(12) "777-777-7777" [7]=> string(7) "i:\new" [8]=> string(7) "i group" [9]=> string(5) "urusa" [10]=> string(7) "mmalone" [11]=> string(4) "jjon" [12]=> string(5) "yokis" [13]=>字符串(11)“888-999-555”[14]=>字符串(4)“u:\”[15]=>字符串(7)“u组”[16]=>字符串( 7) "phammer" [17]=> string(7) "midnite" [18]=> string(7) "bmarley" [19]=> string(5) "gdead" [20]=> string(12) “777-444-2222”}[“c_id”]=>字符串（0）“”}

我得到的信息的 var_dump 是： var_dumb($_REQUEST['addfield']

> array(21) { [0]=> string(9) "o:\drive" [1](https://stackoverflow.com/questions/10763530/adding-multiple-inputs-to-file-php-form-submit/10763568) => string(12) "drive group" [2]=> string(6) "sjones" [3]=> string( 6) "pval" [4]=> 字符串(7) "kpow" [5]=> 字符串(8) "bdezl" [6]=> 字符串(12) "777-777-7777" [7]=> string(7) "i:\new" [8]=> string(7) "i group" [9]=> string(5) "urusa" [10]=> string(7) "mmalone" [11] => 字符串(4) "jjon" [12]=> 字符串(5) "yokis" [13]=> 字符串(11) "888-999-555" [14]=> 字符串(4) "u:\ " [15]=> string(7) "u group" [16]=> string(7) "phammer" [17]=> string(7) "midnite" [18]=> string(7) "bmarley" [19]=> 字符串(5) "gdead" [20]=>字符串（12）“777-444-2222”}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:50:34.950

如果我理解正确，您希望有一个表单，您可以在其中填写有关文件权限请求的详细信息，并动态地将更多请求添加到同一个表单。

您可能没有正确设置表单域的名称。如果第一个和第二个字段集有效，而其他字段集无效，则表单中最初的命名约定与动态添加的命名约定不同，并且动态添加的命名约定相互冲突。

我建议你使用 Chrome 来测试它，并打开开发者工具来查看页面的实时 HTML 代码，因为它是由 Javascript 更新的。

您的最后一个问题的表单字段命名如下：

```
<fieldset>
    <input name="fullpath" (...) />
    <input name="userpermissiongroup" (...) />
    <input name="addreadaccess" (...) />
    (...)
</fieldset> 
```

如果你想要几个这样的字段集，你需要使用数组表示法，正如你在最后一个问题的答案中所指出的那样。

这可能有点棘手，除非您知道自己在做什么。如果你只是添加数组括号，像这样；

```
<fieldset>
    <input name="fullpath[]" (...) />
    <input name="userpermissiongroup[]" (...) />
    <input name="addreadaccess[]" (...) />
    (...)
</fieldset>
<fieldset>
    <input name="fullpath[]" (...) />
    <input name="userpermissiongroup[]" (...) />
    <input name="addreadaccess[]" (...) />
    (...)
</fieldset> 
```

...您的数据将被提交，但它们不会被很好地分组。最好将它们分组为对象；

```
<fieldset>
    <input name="request[0][fullpath]" (...) />
    <input name="request[0][userpermissiongroup]" (...) />
    <input name="request[0][addreadaccess]" (...) />
    (...)
</fieldset>
<fieldset>
    <input name="request[1][fullpath]" (...) />
    <input name="request[1][userpermissiongroup]" (...) />
    <input name="request[1][addreadaccess]" (...) />
    (...)
</fieldset> 
```

这样，每个添加的请求数据都会很好地分组。此解决方案**要求**您在添加字段集的 javascript 中正确设置数字索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:39:20.903

正如您在`var_dump`输出中看到的，`addfield`是一个数组类型的字段，其中包含 21 个元素。具体来说，它包含您前面提到的三组字段值，但没有以任何方式组织。这就是为什么`$k`当您循环通过`$_REQUEST['addfield']`.

如果我是你，我可能会以与静态字段相同的方式命名动态添加的字段，即。`userpermissiongroup[]`等`addreadaccess[]`，然后将所有字段作为数组处理。

# sql - 在子查询中使用查询结果

> ID：10803678
> 
> 赞同：0
> 
> 时间：2012-05-29T17:10:23.910
> 
> 标签：sql, subquery, teradata

我在处理这个查询时遇到了问题。我已经阅读了很多东西，但还没有找到解决方案。问题出在子查询上——它真的不喜欢它。有人可以帮我解决这个问题吗？

第一个表表示已执行的工作表，第二个表显示员工信息。我基本上是在尝试使用作为 HR 代码的“position_reports_to”字段为员工获取主管姓名。顺便说一句，这是在 Teradata 中。

谢谢！

```
select
t1.record_number,
T1.record_created_by,
T2.last_name,
T2.first_name,
T2.employee_no,
t2.position_number,
T2.position_reports_to as SUPID,
(select last_name from T2 where SID=T2.position_nbr) as SUP
from T1
left join T2 on T1.record_created_by=T2.employee_no
where
t1.record_create_date=current_date 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T17:16:42.020

您可以尝试另一个`LEFT JOIN`而不是子查询：

```
SELECT
   t1.record_number,
   T1.record_created_by,
   T2.last_name,
   T2.first_name,
   T2.employee_no,
   t2.position_number,
   T2.position_reports_to AS SUPID,
   sup.last_name AS sup_last_name
FROM T1
LEFT JOIN T2 ON T1.record_created_by=T2.employee_no
LEFT JOIN T2 sup ON sup.SID=T2.position_nbr
WHERE t1.record_create_date=current_date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:26:51.917

您正在引用 T2，`WHERE SID = T2.position_nbr`但不清楚要使用哪个 T2。它可能是主 FROM 子句或子查询中的那个。由于存在歧义，查询将无法编译。

为了使它起作用，您需要为其中一个 T2 设置别名

例如

```
 SELECT
       .....
      (select last_name from T2 Sup where Sup.SID=T2.position_nbr) as SUP
 FROM  
     T1
     left join T2 on T1.record_created_by=T2.employee_no
      .... 
```

但是，正如[bfavaretto 的回答](https://stackoverflow.com/a/10803771/119477)所示，您可以再次加入同一张表，这通常表现得更好。

# java - Java：如何使用命令行打开程序并进行交互

> ID：10803679
> 
> 赞同：0
> 
> 时间：2012-05-29T17:10:26.640
> 
> 标签：java, runtime, cmd, inputstream, outputstream

在过去的几个小时里，我进行了很多搜索以打开 program.exe 并像 cmd 一样与它进行交互。我发现的解决方案不起作用或仅适用于打开 cmd 并运行诸如“dir”之类的命令。

我想打开一个程序（比如说program.exe），输入一个命令，解析输出，然后输入下一个命令。命令行窗口不必打开/可见，但我需要获取输出并输入更多命令。我怎样才能用Java做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:17:05.940

我认为您可能指的是打开另一个进程并从中运行命令行程序并将参数传递给该辅助进程。

如果是这样，您正在寻找的是[ProcessBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)。

你可以创建一个[Process](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html)并获取一个输入流来读取它，或者一个输出流来写回它。

您可能需要检查以下示例：

*   [执行命令](http://www.exampledepot.com/egs/java.lang/Exec.html)
*   [重定向命令的输出](http://www.exampledepot.com/egs/java.lang/ReadFromCommand.html)。
*   [向命令发送输入](http://www.exampledepot.com/egs/java.lang/WriteToCommand.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T17:16:07.240

你应该看看运行时。它是每个应用程序都拥有并且可以与环境交互的对象。 [http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html)

您可以使用“exec”启动一个程序，该程序将返回一个 Process 实例。您可以通过调用“process.getOutputStream();”来访问输出流

# java - 无法在小程序中使用 Swing UI - 调用公共方法

> ID：10803681
> 
> 赞同：1
> 
> 时间：2012-05-29T17:10:30.380
> 
> 标签：java, javascript, swing, applet, japplet

我的问题如下：我有一个`JApplet`嵌入到 HTML 页面和一个`form` 带有小程序公共方法的 JS 调用的按钮：

```
<input id="btnAppletSelectFiles" type="button" value="Select Files" 
    onclick="document.appletExcelUploader.SelectFiles();" /> 
```

在我的 JApplet 中，我有 FileChooser，例如：

```
public class ExcelUploader extends JApplet {

    private JFileChooser fc = new JFileChooser();
    // Some stuff
} 
```

我正在我的小程序的公共方法中编写这样的代码：

```
 public void SelectFiles() {
        int retVal = fc.showOpenDialog(ControlsPanel.this);

        if (retVal == JFileChooser.APPROVE_OPTION) {
            for (File file : fc.getSelectedFiles()) {
                System.out.println(file.getName());
            }
        }
    } 
```

因此，当单击 HTML 按钮时，文件对话框正常显示，我可以浏览目录并检查文件，但我不能按`Open`或`OK`按钮 - 我单击它但对话框仍然存在。

我认为我的线程有问题 - 我仍然以某种方式在“HTML 和 JS”线程中执行此操作，而不是在我的小程序的 GUI 线程或事件调度线程中。

如何解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:36:54.257

从 JavaScript 调用的受信任小程序中的方法不再受信任，因为 Java 无法解释堆栈中的所有代码帧。要解决此问题，请使用其中一种[`AccessController.doPrivileged(..)`](http://docs.oracle.com/javase/7/docs/api/java/security/AccessController.html#method_summary)重载方法。

# jquery - 在 jQuery 帖子中重定向之前显示通知

> ID：10803682
> 
> 赞同：1
> 
> 时间：2012-05-29T17:10:31.453
> 
> 标签：jquery, ajax

我试图在将用户重定向到另一个页面之前显示成功通知。我正在使用带有 jQ​​uery 1.7 的 Apprise 插件。问题是它重定向而不显示通知。如果我取出重定向，则通知将完美运行。谢谢你的帮助。

```
$.ajax({
            type:"POST",
            url:"create/process_vote.php",
            data: { answerid: aid },
                success: function(){
                    $(".status").text('Thank you for voting!');
                    $(".status").fadeIn("slow");
                    $(".status").delay(2000).fadeOut(1000);
                    window.location.href = "results.php?id=" + aid;
                }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:15:59.317

```
success: function(){
  $(".status").text('Thank you for voting!');
  $(".status").fadeIn("slow");
  $(".status").delay(2000).fadeOut(1000);

  setTimeout(function(){ window.location.href = "results.php?id=" + aid; }, 2000);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T17:14:55.030

Apprise 文档显示它具有回调函数。将重定向代码放在回调中。

```
$(document).ready(function(){
    apprise('Redirect?', {'verify' : true}, function(r){
        if (r) {
            window.location = 'http://google.com'
        }
    })
}); 
```

[爱普瑞斯文档](http://thrivingkings.com/apprise/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T17:12:02.050

使用**[window.confirm()](https://developer.mozilla.org/en/DOM/window.confirm)**

```
success: function(){
                    $(".status").text('Thank you for voting!');
                    $(".status").fadeIn("slow");
                    $(".status").delay(2000).fadeOut(1000, function() {
                      // if user agreed
                      // window.confirm() in short just confirm()
                      if(window.confirm('Are you sure?')) { 
                          window.location.href = "results.php?id=" + aid;
                      }

                    });

                } 
```

# mysql - 如何在 Perl CGI 中使用持久的 MySQL 数据库连接

> ID：10803683
> 
> 赞同：1
> 
> 时间：2012-05-29T17:10:33.737
> 
> 标签：mysql, perl

我正在做一个项目，我在其中使用 mysql 数据库和三个表：**Requests**、**Responses**和**Users**。

第一个（索引）页面是纯 HTML，其中链接可用。这些链接将执行 Perl 脚本以从数据库中获取数据并将数据传递到模板文件，因此将生成下一页。

我的问题是每次我需要从 MySQL 数据库中获取数据时，是否需要打开与数据库的连接，并在获得查询结果后再次关闭它？如何跨查询保持连接，从而无需重新连接到数据库？

我可以在单独的函数中将每个查询放在一个 Perl 文件中吗？如果是这样，如何提供 Perl 函数的链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T04:50:39.840

嗯，这实际上看起来更像是四个问题而不是一个。正如@DavidO 指出的那样，在 CGI 下，您不会跨页面请求维护持久的数据库连接。但是，让我回答您提出的主要问题：

> “我的问题是每次我需要从 MySQL 数据库中获取数据时，我是否需要打开与数据库的连接，并在得到查询结果后再次关闭它？”

如果您的 CGI 脚本需要针对给定请求对数据库运行多个查询，则无需为每个查询关闭并重新打开连接。查看[DBI](https://metacpan.org/module/DBI)文档，您会发现可以为每个请求创建一个数据库句柄，只要连接保持打开状态，您就可以使用它对数据库运行任意数量的查询。

展望未来，我鼓励您查看[DBIx::Class](https://metacpan.org/module/DBIx%3a%3aClass)，它可以为您抽象出大部分这些细节。如果您刚刚开始使用 Perl 和数据库，那么您会花很多时间去思考，但是一旦您熟悉了它，它就是真正的救命稻草。

# c++ - Eclipse CDT：无法解析符号“cout”

> ID：10803685
> 
> 赞同：62
> 
> 时间：2012-05-29T17:10:40.213
> 
> 标签：c++, eclipse, include, eclipse-cdt, include-path

错误如上。我有 eclipse 项目中应该包含的所有必要文件：

```
/usr/include/c++/4.6
/usr/include
/usr/include/linux
/usr/local/include 
```

等等

我试过了`std::cout`，`using namespace std;` `cout`但它仍然说未解决。

我已经导入`iostream`和`cstdlib`.

另外，我使用的是 Eclipse 3.7.2 的 Ubuntu 12.04。

代码片段：

```
#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <iostream>
#include "XPLMDisplay.h"
#include "XPLMGraphics.h"

int XPluginStart(char * outName,  char * outSig,  char * outDesc) {
    /* ... */
    std::cout << "test" << std::endl;
    /* ... */
} 
```

使用命名空间标准；

* * *

更新：我已经从现有代码创建了 eclipse 项目。创建一个新的 c++ 项目可以修复它。我将接受解释现有项目中的哪些设置可能导致此问题的答案（因此我不必剪切和粘贴我的所有项目）。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-05-29T17:39:40.310

很可能您的设置中缺少一些特定于系统的包含目录，这使得索引器无法正确解析 iostream，从而导致错误。在项目的上下文菜单中选择`Index -> Search For Unresolved Includes`将为您提供未解决的包含列表，您可以在其中搜索并在项目属性中`/usr/include`添加包含目录。`C++ Include Paths and Symbols`

在我的系统上，我必须添加`/usr/include/c++/4.6/x86_64-linux-gnu`要`bits/c++config.h`解决的目录和更多目录。

添加包含目录后不要忘记重建索引（Index -> Rebuild）。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-23T07:06:02.667

要摆脱您不想要的符号警告，首先您应该首先了解 Eclipse CDT 通常是如何出现未知符号警告的。这是它的过程，或多或少：

1.  Eclipse 检测系统上可用的 GCC 工具链
2.  您的 Eclipse 项目被配置为使用特定的工具链
3.  Eclipse 在工具链上进行发现以查找其包含路径和内置定义，即使用相关选项运行它并读取输出
4.  Eclipse 从包含路径中读取头文件
5.  Eclipse 索引项目中的源代码
6.  Eclipse 在编辑器中显示有关未解析符号的警告

从长远来看，解决早期步骤的问题可能会更好，而不是通过手动添加包含目录、符号等来覆盖它们的结果。

**工具链**

如果您安装了 GCC，并且 Eclipse 已检测到它，它应该将该 GCC 列为新 C++ 项目可以使用的工具链选项，该选项也将显示在右侧`Window -> Preferences -> C/C++ -> New CDT Project Wizard`的`Preferred Toolchains`选项卡框中。`Toolchains`如果它没有出现，请参阅[CDT 常见问题解答关于需要特殊环境的编译器的答案](http://wiki.eclipse.org/CDT/User/FAQ#I_installed_my_compiler.2C_which_requires_special_environment._How_can_I_instruct_Eclipse_to_use_it.3F)（以及Windows 用户的[MinGW](http://wiki.eclipse.org/CDT/User/FAQ#I_installed_MinGW_toolchain_on_my_PC_but_Eclipse_won.27t_find_it.)和[Cygwin](http://wiki.eclipse.org/CDT/User/FAQ#I_installed_Cygwin_on_my_PC_but_Eclipse_won.27t_find_it.)答案。）

如果您有一个现有的 Eclipse C++ 项目，您可以通过打开项目属性并从下拉菜单中`C/C++ Build -> Tool Chain Editor`选择所需的工具链来更改关联的工具链。`Current toolchain:`（`Display compatible toolchains only`如果您想要的工具链与之前在项目中设置的工具链有足够的不同，则必须先取消选中该框。）

如果在启动 Eclipse 后向系统添加了工具链，则需要重新启动它才能检测到工具链。

**发现**

然后，如果项目`C/C++ Build -> Discovery Options -> Discovery profiles scope`设置为`Per Language`，则在下一次构建期间，与项目关联的新工具链将用于自动发现包含路径和符号，并将用于更新显示的“内置”路径和符号在项目的`C/C++ General -> Paths and Symbols`和`Includes`选项`Symbols`卡中。

**索引**

有时您需要在设置工具链并进行构建后再次重新索引以使旧符号警告消失；右键单击项目文件夹并转到`Index -> Rebuild`执行此操作。

（使用 Eclipse 3.7.2 / CDT 8 测试）

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-10-18T09:50:31.047

感谢上面的答案。我正在为特定用例添加答案...

在具有两个目标架构的项目中，每个架构都有自己的构建配置（主要目标是嵌入式 AVR 平台；第二个目标是我的本地 Linux PC 用于运行单元测试）我发现有必要设置和`Preferences -> C/C++ -> Indexer -> Use active build configuration`添加然后重建索引。`/usr/include/c++/4.7``/usr/include``/usr/include/c++/4.7/x86_64-linux-gnu``Project Properties -> C/C++ General -> Paths and Symbols`

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-02-27T20:41:01.993

我首先在这里尝试了标记的解决方案。它有效，但它有点老套，每次更新 gcc 时都需要重做。通过执行以下操作，我终于找到了更好的解决方案：

1.  `Project`-> `Properties`-> `C/C++ General`->`Preprocessor Include Paths, Macros, etc.`
2.  `Providers`->`CDT GCC built-in compiler settings`
3.  取消选中`Use global provider shared between projects`（如果适合您的需要，您也可以修改全局提供程序）
4.  在`Command to get compiler specs`，`-std=c++11`最后添加
5.  `Index`->`Rebuild`

瞧，简单易行。希望这会有所帮助。

注意：我在开普勒。我不确定这是否适用于早期的 Eclipse。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-21T01:06:23.960

我正在使用 Ubuntu 12.04 / Eclipse 4.2.1 / CDT 8.1.1 并且我曾经在相当长一段时间内遇到过同样的问题：从 SVN 导入 C++ 项目会导致这些烦人的“未解决的包含”错误，我将不得不创建一个新项目并复制其中的文件作为解决方法（仍然是部分的，因为 SVN 功能不存在！）。

最后，我刚刚找到了一个简单、令人满意的解决方案：

*   去`Project -> Properties -> C/C++ General -> Preprocessor Include Paths, Macros etc. -> Providers`检查`Enable language settings providers for this project`。

*   重新启动 Eclipse。

希望这已经成功了。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-01-13T15:52:56.453

我在使用 MinGW 和 gcc 4.8.1 的 Eclipse 中遇到了与 *std::shared_ptr* 类似的问题。无论如何，Eclipse 都不会解析 *shared_ptr*。为了解决这个问题，我手动将 __cplusplus 宏添加到 C++ 符号和 - viola！- Eclipse 可以找到它。由于我将*-std=c++11*指定为编译选项，因此我（咳咳）假设 Eclipse 代码分析器也会使用该选项。所以，要解决这个问题：

1.  项目上下文 -> C/C++ 常规 -> 路径和符号 -> 符号选项卡
2.  在语言面板中选择 C++。
3.  添加符号**__cplusplus**，其值为**201103**。

唯一的问题是 gcc 会抱怨符号已经定义（！）但编译将像以前一样完成。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-15T13:14:58.040

对我来说，它有助于在 Properties -> C/C++-Build -> Discovery Options 中启用自动发现来解决这个问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-05-05T12:08:00.600

我只是删除了按钮中的所有错误：问题列表。然后关闭项目并重新打开项目清理项目构建全部运行

然后那些愚蠢的错误就消失了。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-10-31T08:49:08.143

如果所有其他方法都失败了，就像我的情况一样，那么只需禁用注释。我用自己的 makefile 开始了一个 c++11 项目，但无法解决所有问题。即使您禁用注释，eclipse 仍然可以帮助您进行一些自动完成。最重要的是，调试器仍然有效！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-05-04T12:21:08.283

`Eclipse CDT (Kepler)`我在`Windows`使用安装时遇到了同样的问题`Cygwin`。将项目属性指向我能想到的每个 Cygwin 包括后，它仍然找不到`cout`.

最后缺失的部分原来是`C:cygwin64\lib\gcc\x86_64-pc-cygwin\4.8.2\install-tool\include`.

总结一下：

*   右键单击项目
*   选择`Properties`
*   导航到`C/C++ General`> `Paths and Symbols`>`Includes`选项卡
*   点击`Add...`
*   点击`File system...`
*   浏览到 Cygwin 的位置`lib\gcc\x86_64-pc-cygwin\4.8.2\install-tool\include`
*   点击`OK`

这是我的项目包含的内容，当一切都说完并完成时： ![在此处输入图像描述](../Images/3e894eb655d17468b15e9e75527eddd3.png)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-09-16T02:29:42.943

你们在看错误的部分。最近对 Windows 感到沮丧后，当我在 Linux 中安装时，我意识到了差异，并且差异立即显现出来。

在新设置中，我在根据现有源创建的投影中有一个包含文件夹。我可以扩展它并看到大量包含；但是，我无法添加它们。这使我寻找列出这些文件的位置。

它们列在 Project Properties > C/C++ General > Preprocessor Includes > GNU C++ CDT GCC Built-in Compiler Settings [Shared] 下面是大量的包含。

这些设置由您选择的工具链设置。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-09-21T22:31:37.247

我在 Ubuntu 16.04 上使用 cmake 创建了 Makefile 项目。

当为 cmake 生成的 Makefiles 创建 eclipse 项目时，我创建了新项目，如下所示：

文件 --> 新 --> 带有现有代码的 Makefile 项目。

只有在这样做了几次之后，我才注意到“用于索引器设置的工具链”的默认设置为无。就我而言，我已将其更改为 Linux GCC，所有错误都消失了。

希望它有所帮助，如果它不是合法的解决方案，请告诉我。

干杯，

家伙。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-04-16T17:53:00.960

我在 ArchLinux 上更新 gcc 和 eclipse 后发生了这种情况。为我解决的问题是`Project -> C/C++ Index -> Rebuild`.

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-10-27T01:51:05.493

在我自己尝试了一堆东西之后又添加了一点建议，但它不起作用....

我安装了 GCC 并且正确设置了包含的路径。也有 std 错误，并且无法为 cout 工作（我怀疑 SL 中的任何内容......）

我花了一段时间才意识到没有安装 g++ - gcc 是但不是 g++。所以就这样做：

sudo apt-get install g++

重启日食。假设上面提到的关于 gcc 和包含路径的细节很好，你现在应该没事了......

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-08-19T22:26:24.693

我的有点容易弄清楚 **右键单击>运行方式>运行配置**

复选框**包括系统库、继承的电源**

# installation - 在 FDT 中将项目链接到 Robotlegs 文件

> ID：10803688
> 
> 赞同：0
> 
> 时间：2012-05-29T17:10:53.877
> 
> 标签：installation, swc, fdt, robotlegs

我正在 FDT 中尝试 HelloFlash -[来自演示包](https://github.com/robotlegs/robotlegs-demos-Bundle)。

我将robotlegs v1.5.2 作为链接资源来自：D:\as3-robotlegs\robotlegs-framework-v1.5.2\src

即使它们具有正确的包结构，robotlegs 文件也不会相互看到 - 例如，您无法控制单击以链接到父类或变量。

话虽如此，FDT 显示 Robotlegs 源代码中的一些文件存在错误（例如 Actor.as 没有导入语句）。也许这就是我遇到麻烦的原因。

我错过了什么？

我也更喜欢使用代码而不是 swc，这样我就可以逐步完成它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:10:54.347

## FDT 无法解析文件

> robotslegs 文件没有看到彼此...FDT 显示 Robotlegs 源代码中的一些文件存在错误（例如 Actor.as 没有导入语句）...。

如果您的源文件中有错误，FDT 将无法解析它们并将它们添加到项目模型中 - 给人的印象是 FDT 无法“看到”它们。

虽然您可能仍然可以编译（FDT 显示的错误只是对编译错误的预测，而不是保证），但您应该检查并修复错误（例如添加 import 语句）。默认情况下，FDT 有非常严格的错误检查，建议使用它。

## 将您的源代码附加到 SWC

> 我也更喜欢使用代码而不是 swc，这样我就可以逐步完成它。

您应该始终使用 SWC。使用库时，没有理由不使用 SWC（确切原因超出了此答案的范围，但主要与性能和内存有关）。

如果您希望能够拥有库的调试功能（例如通过调用堆栈设置），那么您应该将源代码附加到.SWC。

[在此处了解如何将源代码附加到 SWC](http://fdt.powerflasher.com/docs/Source_Attachment_For_SWCs)。

它看起来像这样：

![在此处输入图像描述](../Images/f36f7e9bb27f0ccc6429ebdd8975845b.png)

# c# - Metro UI：我正在切换 xaml 但图像未加载

> ID：10803700
> 
> 赞同：3
> 
> 时间：2012-05-29T17:11:29.010
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我有一个多 xaml 地铁应用程序。我想通过按钮单击在 xaml 之间切换。

```
private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        Window.Current.Content = new BlankPage1();
        this.InitializeComponent();
    }

    private void Button_Click_2(object sender, RoutedEventArgs e)
    {
        Window.Current.Content = new Sudoku.sudoku();
        Window.Current.Activate();            
    }

    private void Button_Click_3(object sender, RoutedEventArgs e)
    {
        TextTwist.text_twist ob= new TextTwist.text_twist();
        ob.InitializeComponent();
        Window.Current.Content = ob;           
    } 
```

这是具有按钮的主要 xaml 的逻辑代码。现在，当我单击 button1 (/button2/button3) 时，屏幕上会出现相应的 xaml，但未加载相关的图像。否则，它们在设计器中是完全可见的。

请帮帮我。

这是 xaml 片段的 1 个

```
<Grid x:Name="gridMain">
    <Grid.Background>
        <ImageBrush ImageSource="Assets/textTwist/blue_back.png"/>
    </Grid.Background>
    <ListView x:Name="lv"  HorizontalAlignment="Left" Height="565" Margin="49,99,0,0" VerticalAlignment="Top" Width="315" SelectionChanged="ListView_SelectionChanged_1" Opacity="0.95" FontSize="128">
        <ListView.Background>
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="Black" Offset="1"/>
                <GradientStop Color="#FF9CF147" Offset="0.261"/>
            </LinearGradientBrush>
        </ListView.Background>
    </ListView>
    <TextBox x:Name="txtblk" HorizontalAlignment="Left" Margin="436,207,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Height="126" Width="731" FontSize="72" AcceptsReturn="True" FontWeight="Bold" BorderThickness="0" Foreground="#FFF01D1D" CharacterSpacing="120">
        <TextBox.Background>
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="Black"/>
                <GradientStop Color="White" Offset="0.874"/>
            </LinearGradientBrush>
        </TextBox.Background>
    </TextBox>
    <Button x:Name="btnSubmit" Content="Submit Word" HorizontalAlignment="Left" Margin="874,479,0,0" VerticalAlignment="Top" Width="293" Click="btnSubmit_Click" Height="96" FontSize="36" FontWeight="Normal" FontFamily="Segoe Print">
        <Button.Background>
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="Black"/>
                <GradientStop Color="#FF7DE09C" Offset="0.926"/>
            </LinearGradientBrush>
        </Button.Background>
    </Button>
    <Image x:Name="imgWrong" HorizontalAlignment="Left" Height="277" Margin="436,433,0,0" VerticalAlignment="Top" Width="280" Source="Assets/textTwist/wronganswer.png" Stretch="UniformToFill" Visibility="Collapsed"/>
    <Image x:Name="imgRight" HorizontalAlignment="Left" Height="277" Margin="436,433,0,0" VerticalAlignment="Top" Width="280" Source="Assets/textTwist/rightanswer.png" Visibility="Collapsed"/>
    <Image HorizontalAlignment="Left" Height="146" Margin="480,28,0,0" VerticalAlignment="Top" Width="624" Source="Assets/textTwist/text-twist-turbo-art.jpg" Stretch="UniformToFill"/>
</Grid> 
```

关联的图像是网格背景图像、按钮图像等。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T09:57:33.843

使用 ms-appdata 或 ms-appx 格式设置图像源

```
<Image Source="ms-appdata:///local/myFileNotInTheAppPackage.png"/>

<Image Source="ms-appx:///Assets/myFilePartOfMyAppPackage.png"/> 
```

# c# - 获取对象的 AppDomain

> ID：10803706
> 
> 赞同：10
> 
> 时间：2012-05-29T17:12:15.153
> 
> 标签：c#, .net, remoting, .net-remoting

有什么方法可以确定在哪个 AppDomain 中创建了对象或 ObjectHandle 实例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T17:23:00.160

如果您的对象使用（例如）从另一个 AppDomain 到当前 AppDomain 的序列化“旅行”，那么它基本上是在您当前的 AppDomain 中“创建”的。源 AppDomain 可以是当前计算机上的单独进程或远程计算机上的另一个进程。据我所知，我认为 CLR 不会为您跟踪这些，因为您负责在进程之间移动对象。您可能需要向您的类添加一个字段，以便您可以设置和获取该信息。

或者考虑使用一个[LogicalCallContext](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.messaging.callcontext.logicalsetdata.aspx)对象，在跨应用程序域进行呼叫时为您跟踪此信息。[这](http://www.wintellect.com/cs/blogs/jeffreyr/archive/2010/09/27/logical-call-context-flowing-data-across-threads-appdomains-and-processes.aspx)是 Jeffrey Richter 写的一篇很好的博客。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-27T21:09:41.480

来自另一个应用程序域的对象是透明代理。可以获取真正的代理并访问包含域 id 的私有字段：

```
public static int GetObjectAppDomain(object proxy)
{
    RealProxy rp = RemotingServices.GetRealProxy(proxy);
    int id = (int)rp.GetType().GetField("_domainID", BindingFlags.Instance|BindingFlags.NonPublic).GetValue(rp);
    return id;
} 
```

如果不知道可能的应用程序域列表，[这里](https://stackoverflow.com/questions/388554/list-appdomains-in-process)有一种获取所有应用程序域列表的方法。

# java - SWT FileDialog 扩展

> ID：10803708
> 
> 赞同：0
> 
> 时间：2012-05-29T17:12:24.257
> 
> 标签：java, swt

我正在创建一个基于 SWT 的应用程序。我有一个名为“导入”的按钮，单击它会打开一个 swt FileDialog 以选择一个文件。打开此 FileDialog 时我有一个独特的要求，我只想显示来自特定文件夹的所有文件 [意味着不是整个文件系统，用户无法返回，]。提前谢谢 Tor

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:33:45.427

`FileDialog`有一个方法，`setFilterPath`允许您指定对话框的初始目录。

您将不得不进行修改`FileDialog`，以使用户无法返回高于初始目录的位置。这是 Eclipse 3.5 的源[代码](http://www.docjar.org/html/api/org/eclipse/swt/widgets/FileDialog.java.html)`FileDialog`。

# cloud-foundry - cloudfoundry上的mysql错误

> ID：10803710
> 
> 赞同：0
> 
> 时间：2012-05-29T17:12:38.587
> 
> 标签：cloud-foundry

我今天才看到这个错误。我在云上使用mysql已经有一段时间了。请告诉我为什么我现在收到此访问错误。

引起：com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：SELECT 命令拒绝用户 'uumI5f9ZOSxVz'@'172.30.49.187' 用于表 'person'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:46:16.217

正如原始用户在评论中发布的那样，

> 我忘了删除“目录”=“数据库”。由于在云中已经有一个，这会产生访问错误。– 马特·斯鲁姆 5 月 29 日 18:14

# heroku - 减少 JDK7 和 JRuby 的 slug 大小（或增加限制）

> ID：10803716
> 
> 赞同：1
> 
> 时间：2012-05-29T17:13:08.640
> 
> 标签：heroku, jruby, java-7

我正在为使用 JDK7 和 JRuby 1.7.0.preview1的[JRuby 开发 Heroku buildpack 的](https://github.com/jruby/heroku-buildpack-jruby)[一个分支。](https://github.com/bradleybuda/heroku-buildpack-jruby)好消息是它有效 - 坏消息是蛞蝓非常大。一旦我将 JRuby、JDK 和“Hello, world”Rails 3 应用程序捆绑在一起，部署时压缩的 slug 大小为 98.4 MB。这并不奇怪，因为 JDK 为 129 MB，而 JRuby 为 29 MB（均未压缩）。

由于 Heroku 对 slug 有 100MB 的限制，这给我留给实际应用程序开发的空间很小 - 很容易看出，即使是一个简单的 Rails 应用程序也会让我超过限制。

我已经从 JDK 和 JRuby 中删除了尽可能多的明显“可选”的东西（源代码、文档、示例、x86_64 以外的东西的本机库等）。我想知道是否有任何聪明的方法可以将事情从 slug 中移出，进一步减少 JDK 或 JRuby，或者实际上增加允许的 slug 大小。鉴于 Heroku 的 buildpack 支持以及将虚拟机和框架捆绑在 slug 中的实际做法，100MB 的上限比以前低得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T15:30:51.800

这不是我真正的领域，但我认为您可以通过 JDK JAR 并删除大量在服务器上没有意义的东西。我知道您删除了一些文件，但听起来您并没有修剪您保留的任何 JAR。例如，我刚刚登顶，看到了一堆 Swing 和 AWT 类。仅这些就应该为您购买几兆字节。我敢肯定，你会比我更清楚还有什么是移除的好人选。

**更新：**我很好奇，所以我试了一下。通过删除 Swing 和 AWT，我节省了 5.5MB。这似乎是一个坚实的开始，而且，大概更熟悉的人可能会很好地知道还有什么可能有意义的删除。

**更新 2：**我刚刚保存了另外 4.5MB，总共 10MB，`bzip2 --best`用于重新压缩（解压缩）java 存档。这个技巧只为 jruby 存档节省了半兆，但这仍然使总数减少了 10.5MB。

# css - 在列表项中垂直对齐图像和文本

> ID：10803722
> 
> 赞同：0
> 
> 时间：2012-05-29T17:13:24.640
> 
> 标签：css, styles, html-lists

使用下面的 css 样式将水平显示锚标记列表。

但是，我似乎无法在每个列表项中垂直显示图像和文本。关于如何做到这一点的任何建议。

谢谢

我对问题的解决方案

```
<html>
<head>
<style type="text/css">
li
{
display:inline;
}

table
{
display:inline;
}
</style>
</head>
<body>
<ul> 
<li>
<table>
<tr><a href="#"><img /></a></tr>
<tr><a href="#">one</a></tr>
</table>
</li> 
<li>
<table>
<tr><a href="#"><img /></a></tr>
<tr><a href="#">two</a></tr>
</table>
</li> 
<li>
<table>
<tr><a href="#"><img /></a></tr>
<tr><a href="#">three</a></tr>
</table>
</li> 
<li>
<table>
<tr><a href="#"><img /></a></tr>
<tr><a href="#">four</a></tr>
</table>
</li> 
<li>
<table>
<tr><a href="#"><img /></a></tr>
<tr><a href="#">five</a></tr>
</table>
</li>
</ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:17:34.893

您可以`<br />`在文本之前添加，如下所示：

```
<ul>
  <li><a href="#"><img /><br />one</a></li>
  <li><a href="#"><img /><br />two</a></li>
  <li><a href="#"><img /><br />three</a></li>
  <li><a href="#"><img /><br />four</a></li>
  <li><a href="#"><img /><br />five</a></li>
</ul> 
```

并将 CSS 更改为：

```
li {
  display: inline-block;
  list-style-type: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T17:22:44.887

图片的高度都一样吗？如果是这样，您可以将`line-height`值应用于`li a`规则。您可能不得不摆弄它才能找到正确的值，但这会奏效。

# javascript - 使用Javascript更改类，默认将一个元素的类设置为相反

> ID：10803735
> 
> 赞同：1
> 
> 时间：2012-05-29T17:14:32.140
> 
> 标签：javascript, class, default, background-color

首先，我意识到我的问题可能与其他一些帖子比较相似，但是，我尝试从其他帖子中实现代码，但无法让它按照我想要的方式工作。我对 Javascript 很陌生，所以请多多包涵。

我在单独的 div 元素中选择了一些链接，看起来像标签。每次我点击不同的链接时，活动链接的背景颜色都会从灰色变为白色，而之前活动链接的背景颜色也会从白色变为灰色。

这是我的难题：我想要主页链接的默认设置，以便在页面加载时它具有白色背景。

这是代码：

```
 div.none {
    background-color: #cccccc;
    border-radius: 10px 10px 0px 0px;
    float: right;
    padding: 5px 15px 3px 15px;
    }

    div.active {
    background-color: white;
    border-radius: 10px 10px 0px 0px;
    float: right;
    padding: 5px 15px 3px 15px;
    }

    ...

    <script type="text/javascript">

    var selected = null;

    function toggleClass(x) {
        if (selected != null)
            selected.className = 'none';

        selected = x;
        x.className = 'active';
    }

    </script>

    ...

    <div class="none" id="t1"><a class="menu" href="#1.html" onclick="toggleClass(t1)" target="tabs">Book Online</a></div>
    <div class="none" id="t2"><a class="menu" href="#2.html" onclick="toggleClass(t2)" target="tabs"> Contact</a></div>
    <div class="none" id="t3"><a class="menu" href="#3" onclick="toggleClass(t3)" target="tabs">News</a></div>
    <div class="none" id="t4"><a class="menu" href="#4" onclick="toggleClass(t4)" target="tabs"> Mobile Recording</a></div>
    <div class="none" id="t5"><a class="menu" href="#5" onclick="toggleClass(t5)" target="tabs"> Recording Studios</a></div>
    <div class="none" id="t6"><a class="menu" href="#6" onload="toggleClass(t6)" onclick="toggleClass(t6)" target="tabs">Home</a></div> 
```

如果您能提供帮助，请提前感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:18:18.213

将初始类更改`'active'`为主页链接...？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T17:27:00.317

将活动类添加到具有主页链接的 div（在设计时）

```
<div class="none active" id="t6"><a class="menu" href="#6" onload="toggleClass(t6)" onclick="toggleClass(t6)" target="tabs">Home</a></div>​ 
```

However, you will still have to write the logic in your javascript to remove that class when some other tab is selected and add the `active`class to the selected tab.

# ios - NSURLRequest Null（无编码问题）

> ID：10803736
> 
> 赞同：2
> 
> 时间：2012-05-29T17:14:33.850
> 
> 标签：ios, xml, nsstring, nsurlrequest

问题：

```
NSString *str = [[NSString alloc] initWithString:theList.artist];
NSLog(@"%@",str);     // Log gives me the correct string...

NSURLRequest *request = [[NSURLRequest alloc] initWithURL:[NSURL URLWithString:str]];
[self.webView loadRequest:request]; 
NSLog(@"%@", request);      //Log returns <NSURLRequest (null)> 
```

然后，如果我尝试：

```
NSString *str = [[NSString alloc] initWithString:@"http://totssants.com/index.html"];
                                       //which is the actual URL I am trying to load 
```

一切都很好...我可以将字符串传递到其他任何地方，但不能传递给请求...这可能是我正在解析的 XML 的问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:59:44.677

尝试

```
NSString *str = [theList.artist stringByReplacingOccurrencesOfString:@"\n" withString:@""];
str = [str stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

并确保 . 的开头或结尾没有空格`theList.artist`。那也会搞砸的。不止一次发生在我身上。

# java - 数独求解器调试

> ID：10803738
> 
> 赞同：3
> 
> 时间：2012-05-29T17:14:40.740
> 
> 标签：java, recursion, sudoku, backtracking

我知道以前有一些类似的帖子，但它们对我没有帮助。我正在编写一个可以解决数独的程序。我在这里找到了一个算法：[http](http://www.heimetli.ch/ffh/simplifiedsudoku.html) ://www.heimetli.ch/ffh/simplifiedsudoku.html 。我正在尝试用 java 编写它并从基于控制台的程序开始。由于某种原因，它进入了无限循环，即使我有办法阻止它。

```
package sudokuSolver;

public class Solver {
static int[][] board;   //teh board
static boolean solved;          //if the sudoku is solved

public static void main(String[] args) throws Exception 
{
    //establish temporary board for now
    final int[][] TUE24JAN = {{0,0,9,0,0,0,8,0,0},
                              {0,1,0,0,2,0,0,3,0},
                              {0,0,0,7,0,8,0,0,0},
                              {2,0,0,0,8,0,0,0,7},
                              {0,3,0,1,0,2,0,4,0},
                              {4,0,0,0,7,0,0,0,5},
                              {0,0,0,6,0,3,0,0,0},
                              {0,8,0,0,9,0,0,7,0},
                              {0,0,6,0,0,0,9,0,0},};

    final int[][] WED25JAN = {{2,5,0,0,0,0,4,0,0},
                              {0,0,3,1,0,0,7,0,0},
                              {0,0,0,0,8,4,0,6,0},
                              {4,0,0,0,0,0,0,8,0},
                              {7,0,0,0,1,0,0,0,4},
                              {0,3,0,0,0,0,0,0,9},
                              {0,9,0,6,5,0,0,0,0},
                              {0,0,1,0,0,9,2,0,0},
                              {0,0,2,0,0,0,0,4,3},};

    board = TUE24JAN;
    solved = false;
    printBoard();

    solve(0,0);
    System.out.println("\n");
    printBoard();
}

public static void solve(int x, int y) throws Exception
{
    //catches the end of the line
    if(y > 8)
    {
        y = 0;
        x++;
    }

    //catches the end of the board
    if(x > 8 || solved)
    {
        solved = true;
        return;
    }
    //put a number in the cell
    for(int i = 1; i < 10; i++)
    {
        if(!inRow(x, i) && !inCol(y, i) && !inBox(x, y, i) && !solved)
        {
            board[x][y] = i;
            solve(x, y+1);
            board[x][y] = 0;
        }
    }
}

//returns if the value is in the specified row
public static boolean inRow(int x, int val)
{
    for(int i = 0; i < 9; i++)
        if(board[x][i] == val)
            return true;
    return false;
}

//returns whether the value is in the specified column
public static boolean inCol(int y, int val)
{
    for(int i = 0; i < 9; i++)
        if(board[i][y] == val)
            return true;
    return false;
}

//returns whether the value fits based
public static boolean inBox(int x, int y, int val)
{
    int row = (x / 3) * 3;
    int col = (y / 3) * 3;
    for(int r = 0; r < 3; r++)
    for(int c = 0; c < 3; c++)
        if(board[row+r][col+c] == val)
            return true;
    return false;
}

public static void printBoard()
{

    for(int i = 0; i < 9; i++)
    {
        if( i % 3 == 0)
            System.out.println("----------------------");
        for(int j = 0; j < 9; j++)
        {
            if(j % 3 == 0)
                System.out.print("|");
            if(board[i][j] < 10 && board[i][j] > 0)
                System.out.print(board[i][j] + " ");
            else
                System.out.print("- ");
        }
        System.out.println("|");
    }
    System.out.print("----------------------\n");
} 
```

}

编辑：它不应该清除单元格，因为当它最终达到解决方案时，它会将已解决的更改为 true，这让它知道不再更改值。我没有收到堆栈溢出错误，它只是继续运行。我不小心让它运行了一个小时，它仍然在运行，它只是在某个点不断重复，从未达到解决状态，也从未达到第一个递归序列。

至于一步一步调试，你能做到吗？我使用 eclipse，但如果有一个不同的 IDE 允许你逐行运行，你能告诉我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:20:55.147

上面的代码示例没有充分利用递归的全部潜力，主要是对全局`solved`变量进行。我没有从头开始提出解决方案，而是尝试修复您提供的内容，以便您可以看到差异。如果您有任何疑问，请发表评论。没有调试，但有一点日志记录和上面提到的一些不错的评论，我想出了：

```
package sudoku;

public class Solver {
    static int[][] board; //teh board
    static boolean solved; //if the sudoku is solved

    public static void main(String[] args) throws Exception {

        //establish temporary board for now
        final int[][] TUE24JAN =
            {
                {0, 0, 9, 0, 0, 0, 8, 0, 0},
                {0, 1, 0, 0, 2, 0, 0, 3, 0},
                {0, 0, 0, 7, 0, 8, 0, 0, 0},

                {2, 0, 0, 0, 8, 0, 0, 0, 7},
                {0, 3, 0, 1, 0, 2, 0, 4, 0},
                {4, 0, 0, 0, 7, 0, 0, 0, 5},

                {0, 0, 0, 6, 0, 3, 0, 0, 0},
                {0, 8, 0, 0, 9, 0, 0, 7, 0},
                {0, 0, 6, 0, 0, 0, 9, 0, 0},
            };

        final int[][] WED25JAN =
            {
                {2, 5, 0, 0, 0, 0, 4, 0, 0},
                {0, 0, 3, 1, 0, 0, 7, 0, 0},
                {0, 0, 0, 0, 8, 4, 0, 6, 0},
                {4, 0, 0, 0, 0, 0, 0, 8, 0},
                {7, 0, 0, 0, 1, 0, 0, 0, 4},
                {0, 3, 0, 0, 0, 0, 0, 0, 9},
                {0, 9, 0, 6, 5, 0, 0, 0, 0},
                {0, 0, 1, 0, 0, 9, 2, 0, 0},
                {0, 0, 2, 0, 0, 0, 0, 4, 3},
            };

        board = TUE24JAN;
        solved = false;
        printBoard();

        solve(0, 0);
        System.out.println("\n");
        printBoard();
    } // end method main

    public static void solve(int x, int y) throws Exception {

        //printBoard();
        System.out.println(x + " : " + y);

        //catches the end of the line
        if (y > 8) {
            y = 0;
            x++;
        }

        //catches the end of the board
        if ((x > 8) || solved) {
            solved = true;
            return;
        }

        //put a number in the cell
        for (int i = 1; i < 10; i++) {

            if ((board[x][y] == 0)) { // cell to be filled

                if (!inRow(x, i) && !inCol(y, i) && !inBox(x, y, i)) { // can use number

                    board[x][y] = i;

                    solve(x, y + 1);

                    if (solved) {
                        return;
                    }

                    board[x][y] = 0;

                }
            }
            else {
                solve(x, y + 1);

                return;

            }
        } // end for
    } // end method solve

    //returns if the value is in the specified row
    public static boolean inRow(int x, int val) {

        for (int i = 0; i < 9; i++) {

            if (board[x][i] == val) {
                return true;
            }
        }

        return false;
    }

    //returns whether the value is in the specified column
    public static boolean inCol(int y, int val) {

        for (int i = 0; i < 9; i++) {

            if (board[i][y] == val) {
                return true;
            }
        }

        return false;
    }

    //returns whether the value fits based
    public static boolean inBox(int x, int y, int val) {
        int row = (x / 3) * 3;
        int col = (y / 3) * 3;

        for (int r = 0; r < 3; r++) {

            for (int c = 0; c < 3; c++) {

                if (board[row + r][col + c] == val) {
                    return true;
                }
            }
        }

        return false;
    }

    public static void printBoard() {
        StringBuilder sb = new StringBuilder();

        for (int i = 0; i < 9; i++) {

            if ((i % 3) == 0) {
                sb.append("----------------------\n");
            }

            for (int j = 0; j < 9; j++) {

                if ((j % 3) == 0) {
                    sb.append("|");
                }

                if ((board[i][j] < 10) && (board[i][j] > 0)) {
                    sb.append(board[i][j] + " ");
                }
                else {
                    sb.append("- ");
                }
            }

            sb.append("|\n");
        }

        sb.append("----------------------\n");
        System.out.println(sb.toString());

        /*try {
            Thread.sleep(100);
        }
        catch (InterruptedException e) {

            // TODO Auto-generated catch block
            e.printStackTrace();
        }*/
    } // end method printBoard
} // end class Solver 
```

# cocoa - 可可崩溃中的选项卡视图应用程序

> ID：10803742
> 
> 赞同：0
> 
> 时间：2012-05-29T17:14:54.903
> 
> 标签：cocoa, tabitem, tabview

我正在可可中创建一个选项卡视图应用程序，例如 Web 浏览器应用程序：

1.  我正在 awakefromnib 方法中使用子视图 Web 视图控制器（具有 Web 视图和文本字段）加载我的第一个选项卡。

2.  还有另一个带有“+”标签的选项卡项。当我单击它时，将调用 didTabSelected 委托方法。

3.  在其中我创建了一个新的选项卡项并添加了 webViewController 类的子视图（具有 webview 和一个文本字段）。

4.  在 webViewController.xib 的文本字段中，我将其操作设置为 IBAction，它正在丢失 Web 视图。

问题：

1.  当我运行应用程序时，即使我在选项卡之间切换，文本字段操作也会自动校准而无需按 Enter。

2.  当我在选项卡之间切换时，我的应用程序正在崩溃。

谢谢

我得到 EXEC_BAD_ACCESS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:50:11.200

您是否收到 EXEC_BAD_ACCESS 或无法识别的选择器之类的错误？对于前者，某些东西是空的或过度发布的，这就是问题所在。对于后者，您可能正在尝试调用不存在的方法。

# asp.net-mvc - 我的 ViewModel 上带有 Editable(false) 的注释呈现一个可编辑的文本框

> ID：10803752
> 
> 赞同：0
> 
> 时间：2012-05-29T17:15:34.827
> 
> 标签：asp.net-mvc, annotations, viewmodel

当我用以下内容注释我的 ViewModel 时：

```
 [Editable(false)]
 public string Name { get; set; } 
```

然后我在 Visual Studio 中创建一个新视图，并获得一个带有可编辑文本框的视图：

```
 <div class="editor-label">
        @Html.LabelFor(model => model.Name)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Name)
        @Html.ValidationMessageFor(model => model.Name)
    </div> 
```

这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:31:43.717

[http://forums.asp.net/t/1656755.aspx/1](http://forums.asp.net/t/1656755.aspx/1)

这篇文章讨论了该属性如何仅设置 ModelMetaData 的 IsReadOnly 属性。他说您可以创建一个 EditorFor 模板来读取该属性并将该字段设置为禁用，但在我看来，这不是该属性的预期功能。

# java - 在 Java/Spring 中使用注解的资源

> ID：10803762
> 
> 赞同：1
> 
> 时间：2012-05-29T17:16:03.350
> 
> 标签：java, xml, spring, annotations

有两种使用 Spring 的方法（注解/XML）。在 XML 中，我们在 XML 文件中指定所有内容。在注解中，我们使用诸如`<context:component-scan base-package="com.xyz" />` `<aop:aspectj-autoproxy />`etc 之类的命令。因此在注解中有完整的包扫描以识别依赖关系等。所以作为一个初学者，我想知道它对我们的应用程序的整体影响。

**编辑** 请不要为 Spring 的初始化而争吵。这是一个普遍的问题。你也可以举一个 Hibernate 的例子。支柱或其他任何东西。

错过了 Java 配置。所以关于那个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T17:30:29.473

据我所知，两种模式的良好混合将导致良好的应用。

XML - 随着它变得越来越冗长和难以维护。

注释 - 将使代码更易于阅读。好吧，您可以通过在 xml 中进行配置来严格维护包级别的扫描，这样它就不会影响您的应用程序。

由于 xml 是初始 spring 实例化的强制性内容，因此您无法避免这种情况。因此，理想情况下，混合将是一件好事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:21:28.027

我同意 raddykrish 的观点。

我也相信注释和 xml 配置的混合是最佳实践。

您可以将 Spring 配置分为两类。

1.  使用任何 Spring 模块或其他第三方工具与 Spring 集成所需的一次性配置。

2.  您需要创建的 bean 才能使它们注入。

使用 Spring Security、语言环境解析器、视图解析器等的配置属于第一类。您最好将它们放在 xml 中，以便更好地管理您的配置。

并且应用程序的控制器、服务、dao 等的 bean 应该被注释并让它们被 Spring 扫描。因为在一个大型应用程序中为它们中的每一个单独制作 xml bean 是非常繁琐的过程。它看起来很丑，而且很难管理。

希望这对您有所帮助。

干杯。

# java - 为什么在休眠中会生成额外的交叉连接？

> ID：10803770
> 
> 赞同：0
> 
> 时间：2012-05-29T17:16:41.530
> 
> 标签：java, hibernate, jakarta-ee, hql

*休眠查询*

```
hql.append("FROM TBucket t1 JOIN FETCH t1.prd JOIN FETCH t1.psAct "); 
```

*配置*

```
TBucket
@Table (name = "vw_f_t_bucket")

      @ManyToOne (cascade = { CascadeType.PERSIST, CascadeType.MERGE }, fetch = FetchType.EAGER, targetEntity = Posprd.class)
      @JoinColumns({
          @JoinColumn(name = "prod_key", referencedColumnName="prod_key"),
          @JoinColumn(name = "prod_cycle_key", referencedColumnName="cycle_key"),
      })

      public IPosprd getprd() {
        return prd;
      }

prd ( 

@Table (name = "snp_prd")
public class Posprd implements IPosprd {

)

      @ManyToOne (cascade = { CascadeType.PERSIST, CascadeType.MERGE }, fetch = FetchType.EAGER, targetEntity = Pospsact.class)
      @JoinColumn (name = "ps_act_key", nullable = false)
      public IPospsact getpsact() {
            return psAct;
      }      

psAct (
    @Table (name = "vw_ps_act_firm")
    public class PosPsact implements IPospsact {
) 
```

*生成查询*

```
FROM vw_f_t_bucket tbucke0_
         INNER JOIN snp_prd posprd1_
            ON tbucke0_.prod_cycle_key = posprd1_.cycle_key
               AND tbucke0_.prod_key = posprd1_.prod_key

        JOIN FETCH t1.psAct                 

         INNER JOIN vw_ps_act_firm pospsn2_
            ON tbucke0_.ps_act_key = pspsn2_.ps_act_key

CROSS JOIN snp_prd posprd3_
CROSS JOIN vw_ps_act_firm pospsn5_
where tbucke0_.prod_cycle_key=posprd3_.cycle_key and tbucke0_.prod_key=posprd3_.prod_key and tbucke0_.posn_acct_key=pospsn5_.posn_act_key 
```

正如您从上面看到的那样，hibernate 在最后生成交叉连接。这是为什么？如何阻止休眠生成这些交叉连接？

如果我只使用 hql 之类的

```
"FROM TBucket t1  "; 
```

它正在生成

```
from vw_f_t_bucket tbucke0_ 
cross join snp_prd psprd1_ cross join vw_psn_act_firm pspsn3_ 
```

我怎样才能让它进行常规连接而不是交叉连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:23:05.683

您既指定了急切获取，也指定了查询中的 JOIN FETCH。JOIN FETCH 是不必要的，因为该属性已被注释为急切获取（因此 FROM 中的内部连接。）

# android - 通过 Android 的 AccountManager 获取 Microsoft Exchange 身份验证令牌

> ID：10803774
> 
> 赞同：2
> 
> 时间：2012-05-29T17:16:59.027
> 
> 标签：android, authentication, exchange-server, single-sign-on, activesync

我正在开发一个可以连接到 SSL 的 php web 服务的 Android 3.0 程序（以 JSON 格式输出数据，我可以修改服务器）。连接到此服务的平板电脑有一个公司 Microsoft ActiveSync (exchange 2010) 帐户，并且只有该帐户（没有 google 帐户、FB 等）。我想编写一个程序，可以使用平板电脑的[android.accounts.AccountManager](http://developer.android.com/reference/android/accounts/AccountManager.html)中保存的凭据在该 PHP Web 服务上发出安全请求。我尝试遵循一些谷歌示例，但我认为问题出在我使用以下行时： `AccountManagerFuture<Bundle> data = am.getAuthToken(b, "JWT", options, this, ota, null);` 应用程序只是挂起，我没有得到任何结果。事实上，在 OnTokenAcquired 类中的任何一行设置断点都不会做任何事情。AKA OnTokenRequired 永远不会被执行

有什么建议或方向吗？我相信这可能有助于获取企业 android 客户端软件

```
import android.accounts.Account;
import android.accounts.AccountManager;
import android.accounts.AccountManagerFuture;
import android.app.Activity;
import android.os.Bundle;
import android.widget.EditText;
public class AcctestActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        AccountManager am = AccountManager.get(this);
        EditText et = (EditText) findViewById(R.id.editText1);
        OnTokenAcquired ota = new OnTokenAcquired(et);
        Account exchange = null;
        Bundle options = new Bundle();
        for(Account a : am.getAccounts()){
              if(a.type.equals("com.android.exchange") && a.name.endsWith("@domain.com"))
                     exchange = a;
        }
        AccountManagerFuture<Bundle> data = am.getAuthToken(exchange, "JWT", options, this, ota, null);
    }
} 
```

* * *

```
import android.accounts.AccountManager;
import android.accounts.AccountManagerCallback;
import android.accounts.AccountManagerFuture;
import android.accounts.AuthenticatorException;
import android.accounts.OperationCanceledException;
import android.os.Bundle;
import android.widget.EditText;
import android.widget.Toast;
import java.io.IOException;
import java.util.concurrent.TimeUnit;
public class OnTokenAcquired implements AccountManagerCallback<Bundle> {
       private EditText et;
       public OnTokenAcquired(EditText et){
              this.et = et;
       }
       public void run(AccountManagerFuture<Bundle> result) {
              Bundle bundle;
              try {
                     Toast.makeText(null, "Start!", Toast.LENGTH_LONG).show();
                     bundle = result.getResult(1, TimeUnit.SECONDS);
                     String token = bundle.getString(AccountManager.KEY_AUTHTOKEN);                         et.append("\nToken: " + token);
                     Toast.makeText(null, token, Toast.LENGTH_LONG).show();
              } catch (OperationCanceledException e) {
                     e.printStackTrace();
              } catch (AuthenticatorException e) {
                     e.printStackTrace();
              } catch (IOException e) {
                     e.printStackTrace();
              }            
       }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T02:31:08.220

您必须为 Exchange 帐户传递正确的令牌类型。我不知道它是什么，但我怀疑它会是“测试”。首先研究什么是正确的令牌类型（如果支持）。否则你的代码看起来没问题。但是，如何使用令牌对 Exchange 进行身份验证是另一回事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:36:47.633

在对源代码进行了几个小时的研究后，我发现了这段代码：

```
public Bundle  getAuthToken(AccountAuthenticatorResponse response, Account account, String authTokenType, Bundle loginOptions) throws NetworkErrorException {
     return null;
} 
```

这意味着，android exchange Authenticator 不为 Exchange-Server 提供基于令牌的身份验证...

# xml - 使用 xsd 打印 xml

> ID：10803779
> 
> 赞同：1
> 
> 时间：2012-05-29T17:17:24.123
> 
> 标签：xml, vb.net

下面的 soapresponsexmldocument 将只打印 xml 而不是 xsd

```
Dim soapResponseXmlDocument = New XmlDocument()
soapResponseXmlDocument.LoadXml(streamReader.ReadToEnd())
TextBox1.Text = Server.HtmlDecode(soapResponseXmlDocument.InnerXml) 
```

如何使用 xsd 打印

# android - 如何在代码中设置我的用户名和密码。？

> ID：10803780
> 
> 赞同：0
> 
> 时间：2012-05-29T17:17:25.367
> 
> 标签：android, security

```
Button loginbuttonbutton = (Button) findViewById(R.id.btnLogin);
loginbuttonbutton.setOnClickListener(new View.OnClickListener() {
    public void onClick(View view) {
        if(inputEmail.getText().toString() == "EdEffort@ncat.edu" &&
           inputPassword.getText().toString() == "Steelers") {
            Intent myIntent = new Intent(view.getContext(),
                                         Host_Setting_PageActivity.class);
            startActivityForResult(myIntent, 0);
        } else {
            System.out.println("Username or password is incorrect");
        }
    }
}); 
```

那是我的代码，应用程序实际上启动了，但是每当我点击登录按钮时，应用程序就会关闭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T17:19:03.620

首先用于`.equals()`比较字符串。

`==`比较字符串引用。不是值。

`.equals()`= 比较字符串字符是否相等

```
if((inputEmail.getText().toString().equals("EdEffort@ncat.edu")&&inputPassword.getText().toString().equals("Steelers")) 
```

如果强制关闭而不是将 logcat 放在这里..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T17:22:03.637

使用**equals** insead of **==**进行字符串比较

```
 loginbuttonbutton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            if(inputEmail.getText().toString().equals("EdEffort@ncat.edu") && inputPassword.getText().toString().equals("Steelers") ){
            Intent myIntent = new Intent(YOUR_CURRENT_ACTIVITY.this, Host_Setting_PageActivity.class);
            startActivityForResult(myIntent, 0);
        }
            else{
                System.out.println("Username or password is incorrect");
            }
        }
    }); 
```

并确保您在 manifest.xml中注册**YOUR_CURRENT_ACTIVITY.this**和**Host_Setting_PageActivity.class**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T17:47:33.833

你应该添加

Host_Setting_PageActivity.class 到你的 AndroidManifest

而且，您应该始终使用 .equals 而不是使用“==”来比较字符串，因为“==”将真正比较字符串对象的实例，而 .equals 将检查字符串的值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-29T10:15:16.850

不要`== method`在 if Condition 中使用，而是使用`.equals()`像 as 这样的方法

```
if(inputEmail.getText().toString().equals("abc") && inputPassword.getText().toString().equals("abc") ){
----------your code here-----------
} 
```

# php - 为什么我的 header() 函数没有重定向？

> ID：10803783
> 
> 赞同：2
> 
> 时间：2012-05-29T17:17:27.833
> 
> 标签：php, xml, header

我有以下脚本接收 xml 文件并使用`file_get_contents()`. 我想将此 xml 重定向到一个名为“register”的文件，但它不起作用，我不知道为什么。

```
 <?php
     $xml_post=file_get_contents('php://input');
     $xml=simplexml_load_string($xml_post);
     if($xml->action=='register')
       {
        header('Location: http://proiectis.host22.com/register.php');
        exit;
      }

 ?> 
```

我会很感激你的帮助。

这是我的xml：

```
 <xml version="1.0">

     <action>register</action>

     <parameters>

          <name>Ionel Popescu</name>

          <username>Ionel P</username>

      <email>ionel@popescu.com</email>

      <password>abdef01</password>

    </parameters>

    </xml> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:24:20.853

尝试：

```
if ((string) $xml->action === 'register') {
  // code
} 
```

而且你不需要`</xml>`在你的 xml 文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:56:34.210

我认为 XML 文档中存在误解。您的文档中没有 XML 标头，但您使用`<xml>`-element 作为根元素。试试这个：

```
<?xml version="1.0"?> <!-- This is a typical xml header -->
<result> <!-- An xml document must contain exactly 1 root element -->
  <action>register</action>
  <parameters>
    <name>Ionel Popescu</name>
    <username>Ionel P</username>
    <email>ionel@popescu.com</email>
    <password>abdef01</password>
  </parameters>
</result> 
```

原来的 PHP 代码现在应该可以工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T17:31:02.133

`$xml->action`返回`SimpleXMLElement`而不是您期望的字符串。所以使用这个代码：

```
 <?php
     $xml_post=file_get_contents('php://input');
     $xml=simplexml_load_string($xml_post);
     if((string)$xml->action == 'register')
       {
        header('Location: http://proiectis.host22.com/register.php');
        exit;
      }

 ?> 
```

# prolog - 检查一个句子的语法并获得语义

> ID：10803784
> 
> 赞同：0
> 
> 时间：2012-05-29T17:17:32.923
> 
> 标签：prolog, dcg

我是 prolog 的新手，我尝试编写答录机。起初，我想弄清楚问了什么，并检查正确的语法。

```
question(P) --> [where],[is], article(G,K,N), location(P,G,K,N).
location(P,G,K,N) --> [P], {member(P, [bakery, mcdonalds, kfc, embassy]),noun(G,K,N)}.

article(m, akk, sg) --> [a].
article(f, akk, sg) --> [an].

noun(m, akk, sg) --> [bakery]|[mcdonalds]|[kfc].
noun(f, akk, sg) --> [embassy]. 
```

但我收到了这个错误：

```
question(What, [where,is,a,bakery],[]).
ERROR: location/6: Undefined procedure: noun/3
ERROR:   However, there are definitions for:
ERROR:         noun/5 
```

但是，我发现 dcg 变量的最后两个参数是某种列表，但我真的没有找到关于该主题的任何内容......你有什么提示或解决方案给我吗？PS：我试图从德语语法中翻译示例，所以不要混淆；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:28:41.473

在`location`规则中，您将其放入`noun`内部`{}`，因此它被视为普通的 Prolog 规则。把它放在外面`{}`，你的语法“有效”（好吧，解析失败，但它不会抛出错误）。

```
location(P,G,K,N) --> [P], {member(P, [bakery, mcdonalds, kfc, embassy])},
                      noun(G,K,N). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T17:33:21.890

一个“DCG 谓词”有两个“隐藏”参数；noun(G,K,N) 将是名词(G,K,N,L,R)，其中 L 是输入列表，R 是识别名词后剩下的内容。

[swi-prolog 相关手册页](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.12%27,swi%28%27/doc/Manual/DCG.html%27%29%29)

请注意，最好使用谓词短语/[2,3] 而不是使用等效的谓词（实现可能会改变）。

正如 larsmans 所说，在这个代号中，名词应该在 {} 之外

# jira - 如何在 Jira 中创建我一周内工作的所有时间的报告

> ID：10803792
> 
> 赞同：25
> 
> 时间：2012-05-29T17:18:16.043
> 
> 标签：jira, jira-plugin, time-tracking

我们使用 Jira (plain jira, no greenhopper) 进行项目/任务管理，并使用单独的系统进行时间跟踪。

如何运行报告以提取我上周工作的所有时间？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-29T21:54:53.937

您可以使用自定义搜索查询创建自定义过滤器：

```
project = "My project" and timeSpent is not null and updated > startOfWeek("-1") and assignee was CurrentUser() 
```

有关 JQL 的更多信息在这里 - [https://confluence.atlassian.com/display/JIRA/Advanced+Searching#AdvancedSearching-Updated](https://confluence.atlassian.com/display/JIRA/Advanced+Searching#AdvancedSearching-Updated)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-18T11:05:45.010

## 工作已经完成

一种方法是安装[时间表插件](https://marketplace.atlassian.com/plugins/jira-timesheet-plugin)，该插件生成针对项目、任务记录的时间的表格细分，并允许您在 Excel 中导出信息。

我已经快速安装了插件以了解它的工作情况；

![时间表报告](../Images/3ee821fbcdb312452deaf7897ab0deea.png)

我认为这就是您在生成追溯时间数据时要寻找的东西。

## 剩下的工作

您可以使用[用户工作负载](https://confluence.atlassian.com/display/JIRA/User+Workload+Report)报告，该报告..

> 显示有关分配给特定用户的问题的有用时间跟踪信息。它显示分配给指定用户的未解决问题的数量，以及每个项目的剩余工作量。

要创建报告，您需要查看（任何）项目页面，然后从摘要屏幕右上角的“报告”链接中选择“用户工作量报告”。[JIRA 文档](https://confluence.atlassian.com/display/JIRA/User+Workload+Report)有更多说明。

例如，为自己生成的报告如下；

![在此处输入图像描述](../Images/a5ddef37b5464af217d55e085b66b785.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-21T09:33:44.103

您可以为此使用“JIRA Timesheet Reports and Gadget”，它会生成具有广泛配置选项的结构精美的报告。它需要花钱，但它仅适用于“工作日”或“订阅”等额外功能。主要时间表报告功能是免费的。它是为 OnDemand 预安装的，或者您可以为您的托管实例安装它。正如我所描述的，您可以在没有许可证的情况下使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-21T02:16:51.203

您也可以尝试我们的插件[Intelligent Reports](http://marketplace.atlassian.com/plugins/com.clariostechnology.intelligentreports)。它允许您在 Microsoft Word 中设计所需的输出格式，并使用简单的点击规则填写数据，允许您对记录时间的所有属性进行过滤、排序等。

它甚至附带两个时间表示例报告，一个项目时间表和一个跨项目时间表。这些应该很容易适应您的需要。

快速说明一下，仅 JQL 无法完全过滤记录的时间数据，因为它只会返回问题。例如，在另一个答案中给出的查询中，它将错过您可能针对分配给其他人的问题记录的任何工作。智能报告允许您从 JQL 查询开始，但直接使用记录时间的属性进一步细化它。

# actionscript-3 - 将列表项拖到 itemeditor

> ID：10803794
> 
> 赞同：0
> 
> 时间：2012-05-29T17:18:36.443
> 
> 标签：actionscript-3, apache-flex, flash-builder

我与 AIR 合作。

我必须打开窗口，一个带有列表（词汇表），另一个带有数据网格和可编辑单元格。目标是拖动列表中的项目并将其放在 itemEditor（数据网格）上的光标位置。我不知道该怎么做。

这在我用来执行相同操作的代码下方，而不是在 datagrid 中，而是在 textarea 上，它位于同一个 datagrid 窗口中。

// 在第一个窗口（词汇表）

```
<s:List dataProvider="{DP_GlossList2}" id="list2"
                            labelField="glNom"
                            dragEnabled="true"
                            dropEnabled="true"
                            dragMoveEnabled="true"
                            click="list2_clickHandler(event)"
                            height="60%" width="100%"/> 
```

// 在第二个窗口上：textarea 和 datagrid

// 拖放

```
 protected function retTTAfaire_dragDropHandler(event:DragEvent):void
        {
            retTTAfaire.text = retTTAfaire.text.substring(0,retTTAfaire.selectionAnchorPosition)+ " "+event.dragSource.dataForFormat("itemsByIndex")[0].glNom+
                " "+retTTAfaire.text.substring(retTTAfaire.selectionAnchorPosition+1);
        }

        protected function retTTAfaire_dragEnterHandler(event:DragEvent):void
        {
            DragManager.acceptDragDrop(spark.components.TextArea(event.target));

        } 
```

请帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:02:16.860

我没有确切的答案，但要调查的一个领域是使用该`getObjectsUnderPoint()`方法（来自 DisplayObjectContainer）。使用点 - 来自拖动/鼠标事件的本地坐标系。这将使您查看显示树的“右”分支。

我认为你最难弄清楚的部分是确切地知道你想与哪个元素进行交互——在这种情况下是项目编辑器。在迭代您的*可疑列表*时，您需要将其与 ItemEditor ( `IGridItemRenderer`) 已知但没有其他对象的接口进行比较。

此外，根据 mouseX/mouseY 坐标所在的引用，您很可能需要将其转换为项目编辑器所在的相同坐标系 - 在这种情况下，编辑器由 PopupManager（或 SystemManager）处理 - 或如果 Flex SDK 团队遵循与使用 halo 相同的范例，则应该是火花 - 但我还没有验证这一点。

我无法从您问题的措辞中看出，但如果您试图在打开项目编辑器后放置项目 - 由于焦点管理，这将变得非常困难。

# scala - 用于理解 2 参数映射函数

> ID：10803801
> 
> 赞同：0
> 
> 时间：2012-05-29T17:19:10.923
> 
> 标签：scala, for-loop

我尝试对元组使用压缩方法来浏览临时压缩列表

给它一个类似的东西：

```
val l1 : List[Int] = List(1,2,3)
val l2 : List[Int] = List(2,3,1)
val l3 : List[Int] = for ( (a,b) <- (l1,l2).zipped ) yield a+b 
```

这是一个综合示例，可以仅用 map 函数替换，但我想在更复杂的表达式中使用它。

它给了我错误： *参数数量错误；预期 = 2*这很有意义，因为 (l1,l2).zipped.map 有两个参数。在内部翻译两个参数映射函数以进行理解的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:29:03.187

```
scala> val l1 : List[Int] = List(1,2,3)
l1: List[Int] = List(1, 2, 3)

scala> val l2 : List[Int] = List(2,3,1)
l2: List[Int] = List(2, 3, 1)

scala> val l3 : List[Int] = for ( (a,b) <- (l1,l2).zip) yield a+b    
l3: List[Int] = List(3, 5, 4) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:53:37.290

您不能将压缩版本翻译成`for`语句，因为`for`它只是

```
(l1,l2).zipped.map{ _ match { case (a,b) => a+b } } 
```

and`zipped`的地图需要两个参数，而不是一个。For 不知道带有两个参数的映射，但它确实知道如何进行匹配。元组正是您将两个参数转换为一个参数所需的，而 zip 将为您创建它们：

```
for ((a,b) <- (l1 zip l2)) yield a+b 
```

每次迭代都会创建一个额外的对象。在许多情况下，这无关紧要。当它发生时，你最好把它完整地写出来。实际上，您可能会更好地使用`Array`，至少如果原语功能很重，那么您可以避免装箱并使用索引。

# ios - 通知中心的蓝点表示什么？

> ID：10803808
> 
> 赞同：3
> 
> 时间：2012-05-29T17:19:46.370
> 
> 标签：ios, apple-push-notifications

如果我为我的应用程序向设备发送 APN，那么当它出现在通知中心时，它的左侧会有一个蓝点。

这是否意味着什么？如果是这样呢？（如果选择通知来启动应用程序，那么之后该点仍然存在并且仍然是蓝色的，因此如果它应该指示诸如读取状态之类的内容，则它不起作用。）

# hibernate - 在一对多关系的哪一边我应该调用persist方法来持久化双方

> ID：10803809
> 
> 赞同：0
> 
> 时间：2012-05-29T17:19:54.780
> 
> 标签：hibernate, jpa, persistence

我正在使用 Hibernate，我有这两个类。

```
public class ApplicantYear{

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "APPLICANT_ID")
private Applicant applicant;
.
.
.

}

public class Applicant {
@OneToMany(mappedBy = "applicant", fetch = FetchType.LAZY, cascade = {CascadeType.PERSIST, CascadeType.REFRESH})
 private Set<ApplicantYear> applicantYears = new HashSet<ApplicantYear>();
.
.
.

}

Public void testPersistence(){

 Applicant appl= new ....
 ApplicantYear applYear= new(appl, ...) 
```

//我应该使用 appl.persist() 还是 applYear.persist() 以便双方都被持久化//一次？

```
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:33:14.970

正如在[API](http://docs.oracle.com/javaee/6/api/javax/persistence/CascadeType.html)中所说的，操作被级联到关联的实体。在您的情况下，这意味着调用

```
entityManager.persist(instanceOfApplicant) 
```

也将级联持久化操作到列表的元素`applicantYears`。刷新操作的功能类似。

# c# - 我的程序似乎正在跳过我的“如果”语句

> ID：10803810
> 
> 赞同：0
> 
> 时间：2012-05-29T17:20:06.073
> 
> 标签：c#, if-statement

我有一个将信息提交到 Access 数据库的 C# 应用程序。我填写了三个必填框，然后单击“提交”。当用户单击按钮时，脚本应以下列方式响应：

步骤 1\. 查看数据库表 A，查看 textBox1 中的值是否存在于数据库中。

步骤 2\. 如果值存在，则将 textBox1、textBox2 和 textBox3 的值分别添加到数据库表 B 列中。

步骤 3\. 如果三个文本框中的任何一个为空白，则显示一条消息。

步骤 4\. 如果 textBox1 中的值不在数据库表中，则显示一条消息。（最终，我计划用数据库字段的默认填充替换消息）

***问题：*****当我运行程序时，在上述任何一种情况下，结果都是上面的第 4 步。它似乎跳过了第一个“if”语句，直接跳到了“else”结果。**

任何帮助解决这个问题，将不胜感激！“Private Void”代码如下。提前致谢。

* * *

```
private void button1_Click(object sender, EventArgs e)
{
     OleDbCommand cmd = new OleDbCommand("select * from script_Orders where cust_Name = @UserID", vcon);
     OleDbParameter param = new OleDbParameter();
     param.ParameterName = "@UserID";
     param.Value = textBox1.Text;
     cmd.Parameters.Add(param);
     OleDbDataReader reader = cmd.ExecuteReader();
     {    
         if (reader.HasRows)
         {
             if (textBox1.Text == "" || textBox2.Text == "" || textBox3.Text == "")
             {
                 MessageBox.Show("You must fill in all fields.");
                 return;
             }
             else
             {
                 OleDbCommand dbCommand;
                 OleDbDataReader dbReader;
                 new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;data source=C:\Search\Database.accdb");
                 dbCommand = new OleDbCommand("select count(*) as Record_Count from script_received", vcon);
                 dbReader = dbCommand.ExecuteReader();

                  if (dbReader.Read() == true)
                      rowCount = dbReader["Record_Count"].ToString();
                  else
                      return;

                  var date = DateTime.Now.ToString("MM/dd/yyyy");
                  {
                      using (OleDbCommand command = new OleDbCommand("INSERT INTO script_Received (script, qty, emp_id, received_Date) VALUES (@script,@qty,@emp_Id,@rec_date)"))
                      {
                          command.CommandType = CommandType.Text;
                          command.Parameters.Add("@script", OleDbType.Integer).Value = textBox1.Text;
                          command.Parameters.Add("@qty", OleDbType.VarChar).Value = textBox2.Text;
                          command.Parameters.Add("@emp_id", OleDbType.VarChar).Value = textBox3.Text;
                          command.Parameters.Add("@rec_date", OleDbType.Date).Value = date;
                          command.Connection = vcon;
                          command.ExecuteNonQuery();
                      }
                      this.textBox1.Clear();
                      this.textBox2.Clear();
                      this.textBox1.Focus();
                  }
             }
        }
        else
        {
            MessageBox.Show("The value of textBox1  is not in the orders table");
            return;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:41:54.910

如果它跳转到`else`of`if(reader.HasRows)`而不抛出任何异常，那么`reader`must not be `null`，它的`HasRows`属性 must be `false`。这意味着您的查询成功执行但没有返回任何行。

您可以尝试`select`手动运行该语句，这可能有助于您了解问题所在。最有可能的是，您在文本框中输入的内容与任何`cust_name`值都不匹配。

# php - 按另一个排序数组 - PHP

> ID：10803811
> 
> 赞同：1
> 
> 时间：2012-05-29T17:20:13.203
> 
> 标签：php, arrays, sorting

我有 2 个数组，第一个包含对象的值，第二个包含它们的 ID。
以这种形式：

```
$values[0] applies to $ids[0]
$values[1] applies to $ids[1] 
```

我需要从最低到最高（值是整数）对第一个数组（使用 sort() ）进行排序 - 这不是问题。问题是，当我用值对数组进行排序时，我会丢失该值的 ID。
我的问题是：如何做到这一点

```
If $values[0] turns to $values[5], automatically turn $ids[0] to $ids[5] 
```

谢谢

更新：
$values 和 $ids 的内容：

```
$values[0] = 1.5;
$values[1] = 2.4;
$values[2] = 15.7;
$values[3] = 11.7;
$values[4] = 4.8;
$values[5] = 0.4;

$ids[0] = 1;
$ids[1] = 2;
$ids[2] = 3;
$ids[3] = 4;
$ids[4] = 5;
$ids[5] = 6; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T17:24:22.717

先组合数组，然后按键排序：

```
$newArr = array_combine($ids, $values);
ksort($newArr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:23:59.177

听起来您正在寻找[`array_combine()`](http://www.php.net/manual/en/function.array-combine.php)：

## 例子

```
<?php
$ids = array(2, 1, 3); // IDs
$values = array(a, b, c); // Values
$array = array_combine($ids, $values); // Combine arrays as ID => Value
ksort($arrays); // Sort new array
print_r($array); // Echo array 
```

## 输出

```
Array
(
 1 => b,
 2 => a,
 3 => c,
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T17:36:04.183

按照下面的代码......没有测试过......但它必须工作......容易理解......

```
<?php
$count = count($values);
for($i = 0; $i<$count; $i++)
{
   if($i == 0)
   {
      $sort1 = $values[$i];
      $sort2 = $ids[$i];
      $temp = 0;
   }
   if($sort1 > $values[$i])
   {
      $sort1 = $values[$i];
      $sort2 = $ids[$i];

      $temp_val = $values[$temp];
      $temp_id = $ids[$temp];

      $values['temp'] = $values[$i];
      $ids['temp'] = $ids[$i];

      $temp = $i;

      $values[$i] = $temp_val;
      $ids[$i] = $temp_id;  

   }
}
?> 
```

# google-docs-api - 如何使用 Google 的 OAuth 2.0 Playground for Document List API？

> ID：10803812
> 
> 赞同：0
> 
> 时间：2012-05-29T17:20:17.307
> 
> 标签：google-docs-api, google-drive-api

我在使用[OAuth 2.0 Playground](https://developers.google.com/oauthplayground)上的 Document List API 时遇到问题。除了这个之外，所有其他 API 都可以工作。该请求是从操场发送的：

```
GET /feeds/default/private/full/ HTTP/1.1
Host: docs.google.com
Content-length: 0
Authorization: OAuth <the oAuth string generated> 
```

响应返回为：

```
HTTP/1.1 400 Bad Request
status: 400
content-length: 19
x-xss-protection: 1; mode=block
x-content-type-options: nosniff
expires: Tue, 29 May 2012 17:11:47 GMT
x-google-cache-control: remote-fetch
server: GSE
via: HTTP/1.1 GWA
cache-control: private, max-age=0
date: Tue, 29 May 2012 17:11:47 GMT
x-frame-options: SAMEORIGIN
content-type: text/html; charset=UTF-8
-content-encoding: gzip

Invalid request URI 
```

API是因为Google Drive而被弃用还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:37:51.600

您必须通过将`?v=3`查询参数添加到 URI 或发送`GData-Version: 3.0`标头来向 API 的版本 3 发送请求。

# android - 如何在安卓手机的wifi网络中进行广播

> ID：10803817
> 
> 赞同：1
> 
> 时间：2012-05-29T17:21:16.973
> 
> 标签：android, sockets, network-programming, android-wifi

我有一个安卓手机网络，其中一部手机充当服务器。我尝试使用目标 IP 作为广播`'255.255.255.255.'`。但它无法发送消息。我在下面给出logcat。服务器 IP 为`192.168.43.1`. 我也试过了`'192.168.43.255'`。但也以徒劳而告终。对于代码，我参考了[http://thinkandroid.wordpress.com/2010/03/27/incorporating-socket-programming-into-your-applications/](http://thinkandroid.wordpress.com/2010/03/27/incorporating-socket-programming-into-your-applications/)

```
05-30 20:17:40.970: E/ClientActivity(698): java.net.UnknownHostException: /192.168.43.255
05-30 20:17:40.970: E/ClientActivity(698):  at java.net.InetAddress.lookupHostByName(InetAddress.java:506)
05-30 20:17:40.970: E/ClientActivity(698):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:294)
05-30 20:17:40.970: E/ClientActivity(698):  at java.net.InetAddress.getByName(InetAddress.java:325)
05-30 20:17:40.970: E/ClientActivity(698):  at project.android.aec.ConnectActivity$ClientThread.run(ConnectActivity.java:139)
05-30 20:17:40.970: E/ClientActivity(698):  at java.lang.Thread.run(Thread.java:1019) 
```

以下是用于获取广播IP的代码

```
 private InetAddress getBroadcastAddress() throws IOException {
        mWifi= (WifiManager) getSystemService(Context.WIFI_SERVICE);
        DhcpInfo dhcp = mWifi.getDhcpInfo();
        if (dhcp == null) {
          Log.d("BCast Address Fetch", "Could not get dhcp info");
          return null;
        }

        int broadcast = (dhcp.ipAddress & dhcp.netmask) | ~dhcp.netmask;
        byte[] quads = new byte[4];
        for (int k = 0; k < 4; k++)
          quads[k] = (byte) ((broadcast >> k * 8) & 0xFF);
        return InetAddress.getByAddress(quads);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:52:43.657

这是我用来获取广播地址的

```
for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
 NetworkInterface intf = en.nextElement();
 for (InterfaceAddress address : intf.getInterfaceAddresses()) {
   System.out.println(address.getBroadcast().toString().substring(1));;
 }
} 
```

参考链接中的代码是一个简单的 TCP Server/Client。如果您发布用于执行 UDP 广播的代码会更好。

# android - Android 在按钮单击时更改 TextView 的文本不起作用

> ID：10803823
> 
> 赞同：1
> 
> 时间：2012-05-29T17:22:11.627
> 
> 标签：android, textview, android-button

如标题所示，我正在尝试在我的 Android 应用程序中创建一个按钮来更改 TextView，但它无法正常工作......这是代码，我希望你们看看出了什么问题。仅供参考，我正在使用连接了 Android 2.3.3 模拟器的 NetBeans，因为稍后我将在我的手机 (2.3.6) 上运行。

主要java：

```
public class Rooster extends Activity
{
    private Button buttonSearch;

    /** Called when the activity is first created. */
    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        this.buttonSearch = (Button)this.findViewById(R.id.buttonSearch);
        this.buttonSearch.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                TextView textRooster = (TextView)findViewById(R.id.textRooster); 
                textRooster.setText("some text"); 
            }
        });
    } 
```

那么这是我的main.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="42px"
        android:layout_weight="1"
        android:gravity="center_vertical" >

        <EditText
            android:id="@+id/editSearch"
            android:layout_width="0dip"
            android:layout_height="37px"
            android:layout_weight="2"
            android:gravity="center"
            android:hint="Zoekopdracht" />

        <Button
            android:id="@+id/buttonSearch"
            android:layout_width="0dip"
            android:layout_height="37px"
            android:layout_weight="1"
            android:gravity="center"
            android:text="Zoek" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="39px"
        android:layout_weight="1"
        android:gravity="center" >

        <Button
            android:id="@+id/buttonChangeWijzigingen"
            android:layout_width="fill_parent"
            android:layout_height="37px"
            android:gravity="center"
            android:text="Zet wijzigingen aan" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="12" >

        <TextView
            android:id="@+id/textRooster"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:gravity="center_horizontal"
            android:text="Geen rooster opgezocht" />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:42:53.057

我认为您认为单击的按钮实际上被绘制了。尝试改变

```
 this.buttonSearch = (Button)this.findViewById(R.id.buttonSearch); 
```

至

```
 this.buttonSearch = (Button)this.findViewById(R.id.buttonChangeWijzigingen); 
```

它实际上并没有解决问题，只是更清楚地说明了问题所在。

# excel - 在 Excel VBA 中创建文件夹和子文件夹

> ID：10803834
> 
> 赞同：39
> 
> 时间：2012-05-29T17:23:14.370
> 
> 标签：excel, vba, macos, directory, create-directory

我有一个由另一张纸上的列表填充的公司下拉菜单。三列，公司、工作编号和零件编号。

创建工作后，我需要一个用于所述公司的文件夹和一个用于所述部件号的子文件夹。

如果你沿着这条路走，它看起来像：

> C:\图片\公司名称\零件编号\

如果公司名称或部件号存在，则不要创建或覆盖旧的。只需进行下一步。因此，如果两个文件夹都存在，则不会发生任何事情，如果一个或两个文件夹都不存在，则根据需要创建。

另一个问题是有没有办法让它在 Mac 和 PC 上同样工作？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2015-11-12T12:23:24.230

另一个在 PC 上运行的简单版本：

```
Sub CreateDir(strPath As String)
    Dim elm As Variant
    Dim strCheckPath As String

    strCheckPath = ""
    For Each elm In Split(strPath, "\")
        strCheckPath = strCheckPath & elm & "\"
        If Len(Dir(strCheckPath, vbDirectory)) = 0 Then MkDir strCheckPath
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-05-29T18:43:45.163

一个子和两个功能。子构建您的路径并使用函数检查路径是否存在，如果不存在则创建。如果完整路径已经存在，它将直接通过。这将在 PC 上运行，但您必须检查需要修改哪些内容才能在 Mac 上运行。

```
'requires reference to Microsoft Scripting Runtime
Sub MakeFolder()

Dim strComp As String, strPart As String, strPath As String

strComp = Range("A1") ' assumes company name in A1
strPart = CleanName(Range("C1")) ' assumes part in C1
strPath = "C:\Images\"

If Not FolderExists(strPath & strComp) Then 
'company doesn't exist, so create full path
    FolderCreate strPath & strComp & "\" & strPart
Else
'company does exist, but does part folder
    If Not FolderExists(strPath & strComp & "\" & strPart) Then
        FolderCreate strPath & strComp & "\" & strPart
    End If
End If

End Sub

Function FolderCreate(ByVal path As String) As Boolean

FolderCreate = True
Dim fso As New FileSystemObject

If Functions.FolderExists(path) Then
    Exit Function
Else
    On Error GoTo DeadInTheWater
    fso.CreateFolder path ' could there be any error with this, like if the path is really screwed up?
    Exit Function
End If

DeadInTheWater:
    MsgBox "A folder could not be created for the following path: " & path & ". Check the path name and try again."
    FolderCreate = False
    Exit Function

End Function

Function FolderExists(ByVal path As String) As Boolean

FolderExists = False
Dim fso As New FileSystemObject

If fso.FolderExists(path) Then FolderExists = True

End Function

Function CleanName(strName as String) as String
'will clean part # name so it can be made into valid folder name
'may need to add more lines to get rid of other characters

    CleanName = Replace(strName, "/","")
    CleanName = Replace(CleanName, "*","")
    etc...

End Function 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-11-14T16:42:45.870

我找到了一种更好的方法来做同样的事情，更少的代码，更高效。请注意，“”“”是引用路径，以防文件夹名称中包含空格。如有必要，命令行 mkdir 创建任何中间文件夹以使整个路径存在。

```
If Dir(YourPath, vbDirectory) = "" Then
    Shell ("cmd /c mkdir """ & YourPath & """")
End If 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-03-13T18:50:09.863

```
Private Sub CommandButton1_Click()
    Dim fso As Object
    Dim fldrname As String
    Dim fldrpath As String

    Set fso = CreateObject("scripting.filesystemobject")
    fldrname = Format(Now(), "dd-mm-yyyy")
    fldrpath = "C:\Temp\" & fldrname
    If Not fso.FolderExists(fldrpath) Then
        fso.createfolder (fldrpath)
    End If
End Sub 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-17T15:26:17.827

这里有一些很好的答案，所以我将添加一些流程改进。确定文件夹是否存在的更好方法（不使用 FileSystemObjects，并非所有计算机都允许使用）：

```
Function FolderExists(FolderPath As String) As Boolean
     FolderExists = True
     On Error Resume Next
     ChDir FolderPath
     If Err <> 0 Then FolderExists = False
     On Error GoTo 0
End Function 
```

同样地，

```
Function FileExists(FileName As String) As Boolean
     If Dir(FileName) <> "" Then FileExists = True Else FileExists = False
EndFunction 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-10-23T07:27:36.963

```
Function MkDir(ByVal strDir As String)
    Dim fso: Set fso = CreateObject("Scripting.FileSystemObject")
    If Not fso.FolderExists(strDir) Then
        ' create parent folder if not exist (recursive)
        MkDir (fso.GetParentFolderName(strDir))
        ' doesn't exist, so create the folder
        fso.CreateFolder strDir
    End If
End Function 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-15T04:13:05.080

这就像 AutoCad VBA 中的魅力一样，我从一个 excel 论坛中获取了它。不知道大家为什么搞得这么复杂？

> 经常问的问题
> 
> 问题：我不确定某个特定目录是否已经存在。如果它不存在，我想使用 VBA 代码创建它。我怎样才能做到这一点？
> 
> 答：您可以使用下面的 VBA 代码测试目录是否存在：

（下面的引号被省略以避免编程代码混淆）

* * *

```
If Len(Dir("c:\TOTN\Excel\Examples", vbDirectory)) = 0 Then

   MkDir "c:\TOTN\Excel\Examples"

End If 
```

* * *

[http://www.techonthenet.com/excel/formulas/mkdir.php](http://www.techonthenet.com/excel/formulas/mkdir.php)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-05-29T08:22:47.197

对于那些寻找适用于 Windows 和 Mac 的跨平台方式的人，以下工作：

```
Sub CreateDir(strPath As String)
    Dim elm As Variant
    Dim strCheckPath As String

    strCheckPath = ""
    For Each elm In Split(strPath, Application.PathSeparator)
        strCheckPath = strCheckPath & elm & Application.PathSeparator
        If (Len(strCheckPath) > 1 And Not FolderExists(strCheckPath)) Then
            MkDir strCheckPath
        End If
    Next
End Sub

Function FolderExists(FolderPath As String) As Boolean
     FolderExists = True
     On Error Resume Next
     ChDir FolderPath
     If Err <> 0 Then FolderExists = False
     On Error GoTo 0
End Function 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-03-19T14:17:38.170

这是创建子目录的没有错误处理的简短子：

```
Public Function CreateSubDirs(ByVal vstrPath As String)
   Dim marrPath() As String
   Dim mint As Integer

   marrPath = Split(vstrPath, "\")
   vstrPath = marrPath(0) & "\"

   For mint = 1 To UBound(marrPath) 'walk down directory tree until not exists
      If (Dir(vstrPath, vbDirectory) = "") Then Exit For
      vstrPath = vstrPath & marrPath(mint) & "\"
   Next mint

   MkDir vstrPath

   For mint = mint To UBound(marrPath) 'create directories
      vstrPath = vstrPath & marrPath(mint) & "\"
      MkDir vstrPath
   Next mint
End Function 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-11-14T16:56:08.657

从未尝试过使用非 Windows 系统，但这是我的库中的一个，非常易于使用。不需要特殊的库参考。

```
Function CreateFolder(ByVal sPath As String) As Boolean
'by Patrick Honorez - www.idevlop.com
'create full sPath at once, if required
'returns False if folder does not exist and could NOT be created, True otherwise
'sample usage: If CreateFolder("C:\toto\test\test") Then debug.print "OK"
'updated 20130422 to handle UNC paths correctly ("\\MyServer\MyShare\MyFolder")

    Dim fs As Object 
    Dim FolderArray
    Dim Folder As String, i As Integer, sShare As String

    If Right(sPath, 1) = "\" Then sPath = Left(sPath, Len(sPath) - 1)
    Set fs = CreateObject("Scripting.FileSystemObject")
    'UNC path ? change 3 "\" into 3 "@"
    If sPath Like "\\*\*" Then
        sPath = Replace(sPath, "\", "@", 1, 3)
    End If
    'now split
    FolderArray = Split(sPath, "\")
    'then set back the @ into \ in item 0 of array
    FolderArray(0) = Replace(FolderArray(0), "@", "\", 1, 3)
    On Error GoTo hell
    'start from root to end, creating what needs to be
    For i = 0 To UBound(FolderArray) Step 1
        Folder = Folder & FolderArray(i) & "\"
        If Not fs.FolderExists(Folder) Then
            fs.CreateFolder (Folder)
        End If
    Next
    CreateFolder = True
hell:
End Function 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-09-15T14:15:51.330

我知道这已经得到解答，并且已经有很多很好的答案，但是对于来到这里寻找解决方案的人，我可以发布我最终解决的问题。

以下代码处理驱动器的路径（如“C:\Users...”）和服务器地址（样式：“\Server\Path..”），它将路径作为参数并自动删除任何来自它的文件名（如果它已经是目录路径，则在末尾使用“\”），如果由于某种原因无法创建文件夹，则返回 false。哦，是的，如果需要，它还会创建子子目录。

```
Public Function CreatePathTo(path As String) As Boolean

Dim sect() As String    ' path sections
Dim reserve As Integer  ' number of path sections that should be left untouched
Dim cPath As String     ' temp path
Dim pos As Integer      ' position in path
Dim lastDir As Integer  ' the last valid path length
Dim i As Integer        ' loop var

' unless it all works fine, assume it didn't work:
CreatePathTo = False

' trim any file name and the trailing path separator at the end:
path = Left(path, InStrRev(path, Application.PathSeparator) - 1)

' split the path into directory names
sect = Split(path, "\")

' what kind of path is it?
If (UBound(sect) < 2) Then ' illegal path
    Exit Function
ElseIf (InStr(sect(0), ":") = 2) Then
    reserve = 0 ' only drive name is reserved
ElseIf (sect(0) = vbNullString) And (sect(1) = vbNullString) Then
    reserve = 2 ' server-path - reserve "\\Server\"
Else ' unknown type
    Exit Function
End If

' check backwards from where the path is missing:
lastDir = -1
For pos = UBound(sect) To reserve Step -1

    ' build the path:
    cPath = vbNullString
    For i = 0 To pos
        cPath = cPath & sect(i) & Application.PathSeparator
    Next ' i

    ' check if this path exists:
    If (Dir(cPath, vbDirectory) <> vbNullString) Then
        lastDir = pos
        Exit For
    End If

Next ' pos

' create subdirectories from that point onwards:
On Error GoTo Error01
For pos = lastDir + 1 To UBound(sect)

    ' build the path:
    cPath = vbNullString
    For i = 0 To pos
        cPath = cPath & sect(i) & Application.PathSeparator
    Next ' i

    ' create the directory:
    MkDir cPath

Next ' pos

CreatePathTo = True
Exit Function

Error01:

End Function 
```

我希望有人会觉得这很有用。享受！:-)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-09-19T02:33:30.070

这是一个递归版本，适用于字母驱动器和 UNC。我使用错误捕获来实现它，但如果没有人可以做到这一点，我很想看看它。这种方法从分支到根都有效，因此当您在目录树的根和较低部分没有权限时，它会有所帮助。

```
' Reverse create directory path. This will create the directory tree from the top    down to the root.
' Useful when working on network drives where you may not have access to the directories close to the root
Sub RevCreateDir(strCheckPath As String)
    On Error GoTo goUpOneDir:
    If Len(Dir(strCheckPath, vbDirectory)) = 0 And Len(strCheckPath) > 2 Then
        MkDir strCheckPath
    End If
    Exit Sub
' Only go up the tree if error code Path not found (76).
goUpOneDir:
    If Err.Number = 76 Then
        Call RevCreateDir(Left(strCheckPath, InStrRev(strCheckPath, "\") - 1))
        Call RevCreateDir(strCheckPath)
    End If
End Sub 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2017-04-02T20:38:23.297

```
Sub MakeAllPath(ByVal PS$)
    Dim PP$
    If PS <> "" Then
        ' chop any end  name
        PP = Left(PS, InStrRev(PS, "\") - 1)
        ' if not there so build it
        If Dir(PP, vbDirectory) = "" Then
            MakeAllPath Left(PP, InStrRev(PS, "\") - 1)
            ' if not back to drive then  build on what is there
            If Right(PP, 1) <> ":" Then MkDir PP
        End If
    End If
End Sub

'Martins loop version above is better than MY recursive version
'so improve to below

Sub MakeAllDir(PathS$)            

  ' format "K:\firstfold\secf\fold3"

  If Dir(PathS) = vbNullString Then     

 ' else do not bother

   Dim LI&, MYPath$, BuildPath$, PathStrArray$()

   PathStrArray = Split(PathS, "\")

      BuildPath = PathStrArray(0) & "\"    '

      If Dir(BuildPath) = vbNullString Then 

' trap problem of no drive :\  path given

         If vbYes = MsgBox(PathStrArray(0) & "< not there for >" & PathS & " try to append to " & CurDir, vbYesNo) Then
            BuildPath = CurDir & "\"
         Else
            Exit Sub
         End If
      End If
      '
      ' loop through required folders
      '
      For LI = 1 To UBound(PathStrArray)
         BuildPath = BuildPath & PathStrArray(LI) & "\"
         If Dir(BuildPath, vbDirectory) = vbNullString Then MkDir BuildPath
      Next LI
   End If 

 ' was already there

End Sub

' use like
'MakeAllDir "K:\bil\joan\Johno"

'MakeAllDir "K:\bil\joan\Fredso"

'MakeAllDir "K:\bil\tom\wattom"

'MakeAllDir "K:\bil\herb\watherb"

'MakeAllDir "K:\bil\herb\Jim"

'MakeAllDir "bil\joan\wat" ' default drive 
```

# java - Scala'没有什么可以覆盖'错误

> ID：10803835
> 
> 赞同：3
> 
> 时间：2012-05-29T17:23:22.587
> 
> 标签：java, scala

我在 Scala 中为 Hbase 编写 mapreduce 作业时遇到了这个奇怪的问题。问题是我的 scala 类可以说 ScalaMapReducer 必须扩展以下类 [http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/mapreduce/TableMapper.html](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/mapreduce/TableMapper.html)

但是当我这样做并“覆盖” map 方法（继承自 TableMapper 的超类 Mapper 形式）时，scala 会抱怨错误“map 不会覆盖任何内容”并且无法编译，而我可以在 Java 中毫无问题地这样做。

我找到了以下解决方法：

1) 定义一个 Dummy Java 类，它扩展了 TableMapper 类并用一些空实现覆盖地图。现在从 scala 扩展这个 Dummy 类。

2）我在 定义 Mappers 特征的goole[解决方法中找到了这个。](http://hadoop.happy-camper.st/browser/trunk/hbase-twitter/src/main/scala/st/happy_camper/hbase/twitter/mapreduce/TagScoringMapper.scala?rev=112)

虽然我猜这可能与内部课程有关，但我真的没有更多的线索和解释。

（**这是一个通用的 Scala 问题**）

**编辑**：来自我的 scala 类的示例代码，

```
class ScalaMapReducer extends TableMapper[Text,IntWritable]
{
    override def map(row:ImmutableBytesWritable,result:Result,context:Context):Unit  =
    {
        //..some code
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T20:23:16.920

根据提供的信息（即没有代码！） ，您犯的最可能的错误（并且您*已经*犯了一个）是错误使用类型参数之一。例如，如果接口定义了一个方法：

```
public interface I<T> { public void doStuff(T t); } 
```

也许您可能已经实现如下：

```
class I0 extends I[String] { override def doStuff[String](String s) }
                                               // ^^^^^^  ^^^^^^
                                               // oops, a type parameter 
```

虽然我不能确定，因为你没有向我们展示代码。如果您**使用的是 IDE**，为什么不让它填写一个空白的实现呢？（使用IDEA，这是`CTRL-i`）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T18:40:50.937

错误**映射不会覆盖任何**内容几乎总是因为映射中的键、值类型和归约定义不匹配。仔细检查一下，一些示例代码可能有助于更好地调试。

# eclipse - FDT 的 Haxe 查看器不会启动我的项目

> ID：10803837
> 
> 赞同：0
> 
> 时间：2012-05-29T17:23:29.503
> 
> 标签：eclipse, haxe, launching-application, fdt

我厌倦了使用浏览按钮设置启动 URI，但它似乎没有连接起来。此外，如果我尝试设置相对于项目的配置路径（bin/js/index-debug.html），它会报告“请选择有效的 URI 文件”。

![在此处输入图像描述](../Images/cd8958b5c5385817f73481f61031175a.png)

这是我的 .HXML 文件的示例，以了解更多详细信息：

```
-main ClassCollector
-cp lib/collector
-neko bin/collector/ClassCollector.n
-cmd neko bin/collector/ClassCollector.n src/main/haxe examples/main/haxe/All.hx -class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:23:29.987

> -cmd neko bin/collector/ClassCollector.n src/main/haxe examples/main/haxe/All.hx -class

使用 FDT for Haxe 时，您*当前*无法在 .HXML 文件中运行命令。这也会导致其他问题，例如缓慢的自动完成和其他错误。

这可能会在 FDT 的更高版本中发生变化。

# jsf - 在 JSF2 中呈现表单范围之外的组件

> ID：10803839
> 
> 赞同：4
> 
> 时间：2012-05-29T17:23:35.247
> 
> 标签：jsf, jakarta-ee, jsf-2, el

我正在创建一个简单的页面，在单击一个按钮后，它将一个 panelGroup 替换为另一个。首先，代码：

```
<h:body>

    <ui:composition template="/elements/templateWithMenu.xhtml">           
        <ui:define name="content">
            <div class="rightContent">

                <h:panelGroup id="lol" rendered="#{test.firstStep.booleanValue()}">

                    <h3>This should disappear</h3>

                    <h:form id="newPollForm1" rendered="#{test.firstStep.booleanValue()}"> 
                        <fieldset>
                            <h:commandLink value="Next" action="#{test.firstStepCompleted()}" >
                                <f:ajax execute="@all" render="lol" />
                            </h:commandLink>
                        </fieldset>
                    </h:form>

                </h:panelGroup>

                <h:panelGroup rendered="#{test.secondStep.booleanValue()}">
                    Works!
                </h:panelGroup>

            </div>     
        </ui:define>
    </ui:composition>

</h:body> 
```

支持 bean 只是将 firstStep 设置为 false，将 secondStep 设置为 true。

现在，当我尝试运行它时，我得到了`<f:ajax> contains an unknown id 'lol' - cannot locate it in the context of the component j_idt39`. 谷歌搜索了一下，我发现对于表单范围之外的元素，我需要使用 SEPARATOR_CHAR (:)。那没有用。所以我尝试弄乱#{component}和#{cc}的不同组合，但没有任何效果。我什至找到[了这个](http://illegalargumentexception.blogspot.co.uk/2009/10/jsf-working-with-component-identifiers.html)很棒的解释，但我又一次惨败。如果我使用@all，一切正常（一个面板被另一个面板替换），但我确实需要渲染一个特定的组件。

帮助？请？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T17:32:21.543

您需要改为更新公共父`<div class="rightContent">`级。这个**总是**被渲染的，因此保证了 JavaScript/Ajax 可以访问和维护它的孩子。替换它`<h:panelGroup layout="block">`并给它一个`id`.

```
<h:panelGroup layout="block" id="content" class="rightContent">
    <h:panelGroup rendered="#{test.firstStep}">
        <h3>This should disappear</h3>
        <h:form id="newPollForm1"> 
            <fieldset>
                <h:commandLink value="Next" action="#{test.firstStepCompleted()}" >
                    <f:ajax execute="@form" render=":content" />
                </h:commandLink>
            </fieldset>
        </h:form>
    </h:panelGroup>

    <h:panelGroup rendered="#{test.secondStep}">
        Works!
    </h:panelGroup>
</h:panelGroup> 
```

使用这个`Test.java`类：

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

@ManagedBean
@ViewScoped
public class Test {
    private int number = 0;

    public void firstStepCompleted() {
        number++;
    }

    public boolean isFirstStep() {
        return number == 0;
    }

    public boolean isSecondStep() {
        return number == 1;
    }
} 
```

请注意，我删除了表单上多余的`Boolean#booleanValue()`调用和重复的`rendered`contition。

如果这仍然不起作用，那么`/elements/templateWithMenu.xhtml`显然包含另一个命名容器组件，该组件已预先添加其 ID。对于还没有记住所有命名容器组件的初学者，一个简单的方法来计算真正正确的客户端 ID 是在浏览器中打开页面，右键单击并*查看源代码*，然后找到 JSF 生成的 HTML 元素并准确获取其`id`属性值（并`:`在 中加上前缀`<f:ajax render>`）。

# entity-framework-4 - 查询多对多和条件位置

> ID：10803840
> 
> 赞同：6
> 
> 时间：2012-05-29T17:23:54.697
> 
> 标签：entity-framework-4, ef-code-first

在我的 Context 文件中，我在 Location 类和 Program 类之间建立了多对多关系。

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {

            modelBuilder.Entity<Location>()
            .HasMany(u => u.Programs)
            .WithMany(r => r.Locations)
            .Map(m =>
            {
                m.ToTable("LocationsPrograms");
                m.MapLeftKey("LocationId");
                m.MapRightKey("ProgramId");
            });

        } 
```

我正在创建一个搜索/过滤表单，用户需要能够通过选择一个程序来过滤位置。

我的想法是查询联结 (M2M) 表，然后将其与位置表连接起来。

问题是除了我的 OnModelCreating 方法之外，我没有代表 M2M 表的类。

我可以举个例子来说明如何做到这一点吗？

基本上 select * from locations l join locationsprograms lp on l.LocationId = lp.locationid 和 lp.programid = 传入的任何内容。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T17:32:12.237

```
var locations = dbContext.Locations
    .Where(l => l.Programs.Any(p => p.ProgramId == whateverWasPassedInId))
    .ToList(); 
```

或者（因为您正在按的主键属性过滤`Program`）：

```
var locations = dbContext.Programs
    .Where(p => p.ProgramId == whateverWasPassedInId)
    .Select(p => p.Locations)
    .SingleOrDefault(); 
```

# xml - XmlReaderSettings.IgnoreWhiteSpace 或 XmlDocument.PreserveWhiteSpace 对 \n 不起作用

> ID：10803842
> 
> 赞同：0
> 
> 时间：2012-05-29T17:23:57.587
> 
> 标签：xml, vb.net, xmldocument

我有一个 XML 文档，它正在读取“\n”作为子节点。我正在尝试使用以下方法删除它：

```
XmlReaderSettings.IgnoreWhiteSpace = True 
```

或者

```
XmlDocument.PreserveWhiteSpace = False 
```

但它不工作。body 之后的子节点被读为“\n”而不是`<C></C>` 下面是一段代码：

```
Dim xrsSettings As New XmlReaderSettings()
xrsSettings.IgnoreComments = True

Dim xrReader As XmlReader = XmlReader.Create(context.Request.InputStream, xrsSettings)
Dim xdRequest As New XmlDocument()
xdRequest.Load(xrReader) 
```

这是 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
  <SOAP-ENV:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" SOAP-ENV:mustUnderstand="1">
      <wsse:UsernameToken xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
        <wsse:Username>user</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">pass</wsse:Password>
      </wsse:UsernameToken>
    </wsse:Security>
  </SOAP-ENV:Header>
  <SOAP-ENV:Body>
    <C xmlns="http://www.sdfsfsfs.com/3939" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" MessageContentCode="8" TimeStamp="2012-05-18T08:32:42" Version="6.000">
      <A HC="ABCD">
        <B CC="EUR" End="2012-06-30" IAI="false" IC="0" MC="P1" RPC="BAR" RPT="Overlay" Start="2012-05-18" YI="false">
          <RS>
            <R CC="EUR" ITC="DR">
              <BBGAS>
                <BBGA AQC="10" AAT="300" NOG="1" />
                <BBGA AQC="10" AAT="300" NOG="2" />
                <BBGA AQC="10" AAT="300" NOG="3" />
              </BBGAS>
            </R>
          </RS>
          <D N="Short">
            <T L="DE">BAR</T>
          </D>
        </B>
      </A>
    </C>
  </SOAP-ENV:Body></SOAP-ENV:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:49:27.367

这种行为是正确的。如果 XML 中没有指定 DTD（doctype 声明），则 whitespace [is not ignorable](http://www.codeproject.com/Articles/73083/Common-Pitfalls-in-System-Xml-4-0)。 [阅读此处](http://www.cafeconleche.org/books/xmljava/chapters/ch06s10.html)以了解有关解析模式和可忽略空白的更多信息。

尽管看起来您可能需要引入 DTD 来解决您的问题，但我更愿意关注为什么您不能在更高级别（稍后在您的应用程序中）跳过空格，这是处理漂亮打印的 XML 时的标准方法。

# javascript - 使用 flash、javascript、经典 asp 从 html 创建 CSV

> ID：10803846
> 
> 赞同：0
> 
> 时间：2012-05-29T17:24:22.080
> 
> 标签：javascript, flash, csv, asp-classic, innerhtml

首先让我说明我的最终目标是在我们网站的页面上创建导出到逗号分隔文件 (.csv) 或导出到 Excel 按钮。我们的网站目前有一个以 XML 格式返回数据的搜索机制。该 XML 被加载到 Microsoft.XMLDOM 对象中。

```
Dim objXMLDom
Set objXMLDOM = Server.CreateObject("Microsoft.XMLDOM") 
```

...

```
Function LoadXML(strXML)
    objXMLDOM.loadXML(strXML)
end function 
```

此 XML 数据被解析为一个名为的变量`myData`，并使用不同的列和行显示在 HTML 网格中。就像我上面说的，理想情况下我想在页面上添加一个可以导出到 csv 或 Excel 的按钮。我四处搜索，发现当代码在经典 ASP 中时这不是一件容易的事......所以我找到了一个半解决方法。

解决方法是使用[Downloadify](https://github.com/dcneiner/Downloadify)。*它是一个 jquery/flash 脚本，允许您将代码复制到 DOM 元素的 HTML 中，然后在客户端*将所有数据拉回。它在大多数情况下都有效......我遇到的唯一问题是添加一个换行符。我认为它会被删除进入 HTML 并再次退出。

这是我如何将数据放入元素的代码

```
for (i = 0; i < <%=RowCount %>; i++) {
    parent.document.getElementById('data').innerHTML += '\n';
    for (j = 0; j < <%=columnCount%>; j++) {
        parent.document.getElementById('data').innerHTML += myData[i][j];
        parent.document.getElementById('data').innerHTML += ',';

    }
}; 
```

这是我用来把它拉回来的：

```
function load() {
    Downloadify.create('downloadify', {
        filename: function() {
            return document.getElementById('filename').value;
        },
        data: function() {
            return document.getElementById('data').value;
        },
        onComplete: function() { alert('Your File Has Been Saved!'); },
        onCancel: function() { alert('You have cancelled the saving of this file.'); },
        onError: function() { alert('You must put something in the File Contents or there will be nothing to save!'); },
        swf: 'media/downloadify.swf',
        downloadImage: 'images/download.png',
        width: 100,
        height: 30,
        transparent: true,
        append: false
    }

    );

} 
```

我真的不太了解Flash，但是我尝试放入不同的字符串（`'<br>'`, `'&#13;'`, even `";:;"`）并`data : function`使用Flash的replace方法替换它们，但它似乎挂起并且永远不会完成处理（我认为这是因为我需要将替换方法放在一个while循环中，因为替换方法只替换一个实例并且我有很多）。

任何帮助将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:28:17.820

为什么不让 ASP 与 html 页面一起创建一个 .csv 文件？这似乎会容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:35:01.090

当我同时使用 Flash 和 ASP 时，我曾经遇到过这样的问题。我记得从 Flash 调用 ASP 并挂起。我认为解决方法是在 ASP 页面的末尾添加一个“response.end”。这似乎告诉服务器，“完成。现在回到 Flash。” 抱歉，我不能再确定了。很久以前了，我找不到代码。

# html - IE7 单选按钮 CSS 重置或覆盖

> ID：10803848
> 
> 赞同：0
> 
> 时间：2012-05-29T17:24:37.483
> 
> 标签：html, css, internet-explorer-7, radio-button

快速提问...

有没有办法重置 IE7 中单选按钮的 CSS 样式？我的意思是......我有一个页面有很多css样式，在应用了无数样式的某个点，他们用“输入”样式“触摸”了单选按钮，据我所知，在IE7，如果你用收音机触摸*颜色*属性，你会失去所有默认样式，留下一个丑陋的全黑单选按钮，而不是默认的绿色单选按钮。

因为我无法修改已经完成的样式，有没有办法覆盖或重置以前的规则并让默认规则接管？

如果您在 IE7 中查看[此](http://www.456bereastreet.com/lab/styling-form-controls-revisited/radio-button/)页面，您会明白我的意思……（收音机 1 和 2）

编辑：

```
<html>
<head>

<style type="text/css" media="all">
#el02 {
    background-color:#F00;
}

#el02 {
    background-color:white; //or none or whatever
}
</style>

</head>
<body>
    <input type="radio" id="el02">
    <label for="el02">Radio button 2</label>

</body>
</html> 
```

如果您在 IE7 中检查此代码，您将看到整个样式是如何被丢弃并且不应该被丢弃的。

显然我有可能做错了什么，如果是这种情况，请指点我正确的值来恢复风格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:44:30.650

这个问题已经被问过，就在这里：[Reset input style for checkboxes to default in IE](https://stackoverflow.com/questions/5353076/reset-input-style-for-checkboxes-to-default-in-ie) and answer is to modify your previous CSS, an explain was posted in an similar question here: [https://stackoverflow.com/a/381135 /1419432](https://stackoverflow.com/a/381135/1419432)

# c# - 从 ASP.NET 访问私人 wordpress 博客 rss 提要

> ID：10803855
> 
> 赞同：0
> 
> 时间：2012-05-29T17:25:28.383
> 
> 标签：c#, asp.net, wordpress, rss

我正在处理一个 ASP.NET 页面，该页面包含一个 XML 阅读器，该阅读器从 wordpress rss 提要读取、格式化帖子并将其粘贴到安全站点上。如何保护 wordpress 博客提要，以便除了 ASP.NET 应用程序之外没有人可以访问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T19:31:19.577

万一将来有人偶然发现这篇文章，我最终使用了 XML-RPC wordpress 插件的 JoeBlogs c# 包装器。有两件事需要注意： - 当我下载 dll 时，getrecentposts 中使用的参数类型有错误 - 另外，请确保 url 链接到您的 wordpress 博客的 xml-rpc.php 页面（如果您使用的是免费托管版本）

# .net - ColdFusion：在 cfobject 标记中引用 .NET DLL 时出现 NoClassDefFoundError

> ID：10803856
> 
> 赞同：0
> 
> 时间：2012-05-29T17:25:29.740
> 
> 标签：.net, coldfusion, coldfusion-9, coldfusion-8

我有一个 ColdFusion 9 实例和一个 .NET DLL。.NET DLL 是非常简单的字符串解析，可以让我在 CF 中更轻松地完成一些任务。每个想要使用字符串执行某些特定于客户端的任务的客户端都有一个 DLL，但是从原始源中提取这些项目的核心不会因客户端而异。

在这种情况下，我有一个看起来像这样的对象：

```
public class clsNotification : BaseClass
{
    public string GetSimpleString()
    {
        return "I was here";
    }

    public string GetNotificationsXml(int ProjectID)
    {
       return MybaseClass.getXML(ProjectID);
    }
} 
```

通知类是主 DLL，而 BaseClass 在单独的 DLL 中。

**更新：** 出于测试目的，我将所有内容都放在一个 DLL 中，但它仍然给我同样的错误。我收到的错误是：

```
coldfusion.xml.rpc.CFCInvocationException: [java.lang.NoClassDefFoundError :
System/Xml/XmlQualifiedName][java.lang.ClassNotFoundException :
System.Xml.XmlQualifiedName] 
```

不幸的是，我无权访问日志文件夹。我猜他们认为这是一个安全风险或什么的。我已将 System.Xml.dll 放入文件夹中，但 .NET 集成服务似乎仍未拾取它。

有什么新想法吗？为什么找不到 XmlQualifiedName？

**更新 2：** ColdFusion 代码非常简单。它是一个具有如下所述功能的 cfcomponent：

```
<cffunction name="GetNotificationsXml" access="remote" returntype="string" output="false">
    <cfargument name="ProjectID" type="numeric" required="yes">

    <cfobject name="myObj" type=".NET" 
        assembly="#ExpandPath("./")#Published .NET DLLs/Notifications.dll" 
        class="#Namespace#.clsNotifications">

    <cfset str=myObj.GetNotificationsXml(ProjectID) />

    <cfreturn str>
</cffunction> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:49:11.060

I kept having this issue where a class would instantiate but an exception would result in this error. What I figured out, through tinkering, is that even with the assembly list containing the proper dll it still fails since I presume the JNB Proxy doesn't include that class in the proxy generation.

What I do is instantiate the class directly like this:

```
<cfset nullObj=CreateObject(".net","System.Net.WebExceptionStatus"
          ,"C:\Windows\Microsoft.NET\Framework\v2.0.50727\System.dll")> 
```

So that when/if the exception occurs there is a generated proxy for the class and the error will not occur.

# javascript - 设置新频率时，Sinewave.js 不会播放多个音符

> ID：10803858
> 
> 赞同：0
> 
> 时间：2012-05-29T17:25:49.897
> 
> 标签：javascript, jquery

我在尝试让 sinewave.js-plugin 连续播放多个音符时遇到问题。

[链接到 sinewave.js Github 页面](https://github.com/0xfe/experiments/tree/master/www/tone)

这是我的代码。

```
scalePlayer = function(){
var command = arguments[0]; 

if (command == 'play'){
    sinewave.setFrequency(261.63); // C4
    sinewave.play();
}else if (command == 'pause'){
    sinewave.pause();
}else if (command == 'cmajor'){
    // C major scale
    var scale=[
        "130.81",
        "146.83",
        "164.81",
        "174.61",
        "196.00",
        "220.00",
        "246.94",
        "261.63"];
    s = scale.length;
    i=0;
    while (i<=s){
        setTimeout("sinewave.setFrequency("+parseFloat(scale[i])+")", 1000);
        console.log(parseFloat(scale[i]));
      i++;
     }  

}else if (command == 'test'){
        setTimeout("sinewave.setFrequency(300)", 1000);
        setTimeout("sinewave.setFrequency(500)", 1000);
}
} 
```

“测试”命令只播放两个音符中的第一个音符，而实际通过音阶频率的那个不播放任何内容，但会从数组中打印出正确的音调。

我想要实现的是“cmajor”命令会播放一个音阶，每 1 秒一个音符。

我觉得 setTimeout 引起了问题，我不明白为什么“测试”命令不会播放两个不同的音符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:33:36.830

尝试以下操作：

```
 while (i<s){
    setTimeout("sinewave.setFrequency("+parseFloat(scale[i])+")", 1000 * i);
    console.log(parseFloat(scale[i]));
  i++;
 } 
```

因为超时都是在循环中一个接一个地设置的，没有延迟（在 cpu 速度下，比如分配之间的几毫秒）。所以你需要把它们分开，就像告诉第一个，“等一秒钟”，下一个，“等两个”等等。

在测试时，我还注意到`i <= s`导致 NaN，所以我将其更改为`i < s`.

# ruby-on-rails - Rails 迁移后没有 PostgreSQL 外键

> ID：10803862
> 
> 赞同：2
> 
> 时间：2012-05-29T17:26:02.067
> 
> 标签：ruby-on-rails, postgresql, foreign-keys, database-migration

Rails 迁移中的“.references”关键字不会导致在 PostgreSQL 中创建外键。如何仅使用 Rails 的方式创建它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T17:33:39.707

Rails 没有为外键约束提供任何开箱即用的帮助。

[foreigner](https://github.com/matthuhiggins/foreigner) gem 增加了对外键的支持，尽管除了说之外你还需要指定它们`t.references :foo`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:18:30.463

[移民](https://github.com/jenseng/immigrant)gem 可以帮助添加丢失的外键。与[外国人](https://github.com/matthuhiggins/foreigner)宝石一起使用。

另一种选择是[schema_plus](https://github.com/lomba/schema_plus) gem。它在迁移期间自动创建外键。

# sql-server - 将位域表转换为表

> ID：10803863
> 
> 赞同：0
> 
> 时间：2012-05-29T17:26:05.713
> 
> 标签：sql-server, sql-server-2005

我有一个表格，显示位置，每个位置使用的每个工具都有一个 BIT 列：

```
CREATE TABLE dbo.[ToolsSelected] (
    [LocationID] NVARCHAR(40) NOT NULL,
    [Tool1] INTEGER DEFAULT 0 NOT NULL,
    [Tool2] INTEGER DEFAULT 0 NOT NULL,
    [Tool3] INTEGER DEFAULT 0 NOT NULL,
    [Tool4] INTEGER DEFAULT 0 NOT NULL,
    PRIMARY KEY ([LocationID])
);

LocID  Tool1  Tool2  Tool3  Tool4
-----  -----  -----  -----  -----
AZ     0      1      1      0
NY     1      0      1      1 
```

我需要通过 LocationID 将其转换为表格，指示哪些工具在哪些位置：

```
CREATE TABLE dbo.[ByLocation] (
    [LocationID] NVARCHAR(40) NOT NULL,
    [Tool] NVARCHAR(40) NOT NULL,  -- Column title of ToolsSelected table
    PRIMARY KEY ([LocationID],  [Tool])
);

LocID  Tool
-----  -----
AZ     Tool2
AZ     Tool3
NY     Tool1
NY     Tool3
NY     Tool4 
```

这个想法是每个位置都可以选择他们需要的工具，然后我需要查询工具表以获取每个所选工具的详细信息（版本等）。每个位置都是独一无二的；每个工具都是独一无二的。有没有办法做到这一点或更好的实施？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T17:50:08.563

这是直接问题的答案，仅给出 4 个工具列：

```
SELECT LocID = LocationID, Tool
FROM
(
    SELECT LocationID, Tool = 'Tool1' FROM dbo.ToolsSelected WHERE Tool1 = 1
    UNION ALL
    SELECT LocationID, Tool = 'Tool2' FROM dbo.ToolsSelected WHERE Tool2 = 1
    UNION ALL
    SELECT LocationID, Tool = 'Tool3' FROM dbo.ToolsSelected WHERE Tool3 = 1
    UNION ALL
    SELECT LocationID, Tool = 'Tool4' FROM dbo.ToolsSelected WHERE Tool4 = 1
) AS x
ORDER BY LocID, Tool; 
```

使用 40 列，您可以做同样的事情，但需要动态生成：

```
DECLARE @sql NVARCHAR(MAX);

SET @sql = N'';

SELECT @sql += ' 
    UNION ALL 
    SELECT LocationID, Tool = ''' + name + '''
    FROM dbo.ToolsSelected WHERE ' + name + ' = 1'
  FROM sys.columns WHERE [object_id] = OBJECT_ID('dbo.ToolsSelected')
  AND name LIKE 'Tool[0-9]%';

SELECT @sql = N'SELECT LocID = LocationID, Tool
    FROM
    (' + STUFF(@sql, 1, 17, '') + '
    ) AS x ORDER BY LocID, Tool;';

PRINT @sql;
-- EXEC sp_executesql @sql; 
```

* * *

****但是****

将这些存储为单独的列是灾难的根源。因此，当您添加 Tool41、Tool42 等时，您必须更改架构，然后更改通过参数等传递列名和 1/0 的所有代码。为什么不将这些表示为简单的数字，例如

```
CREATE TABLE dbo.LocationTools
(
  LocID  NVARCHAR(40),
  ToolID INT
); 
```

因此，在上述情况下，您将存储：

```
LocID  Tool
-----  ----
AZ     2
AZ     3
NY     1
NY     3
NY     4 
```

现在，当您传入他们选择的复选框时，大概从前端您会收到两个值，例如：

```
LocID: "NY"
Tools: "Tool1, Tool5, Tool26" 
```

如果这是正确的，那么您可以在用户创建或更改他们的选择时填充表格，首先使用拆分函数来分解由复选框指定的逗号分隔列表：

```
CREATE FUNCTION dbo.SplitTools
(
  @ToolList NVARCHAR(MAX)
)
RETURNS TABLE
WITH SCHEMABINDING
AS
   RETURN 
   (  
      SELECT ToolID = y.i.value('(./text())[1]', 'int')
      FROM 
      ( 
        SELECT x = CONVERT(XML, 
          '<i>' + REPLACE(REPLACE(@List, ',', '</i><i>'), 'Tool', '') 
          + '</i>').query('.')
      ) AS a CROSS APPLY x.nodes('i') AS y(i)
   );
GO 
```

（您忘记告诉我们您使用的是哪个版本的 SQL Server - 如果 2008 或更高版本，您可以使用表值参数作为拆分函数的替代方法。）

然后是处理它的过程：

```
CREATE PROCEDURE dbo.UpdateLocationTools
  @LocID NVARCHAR(40),
  @Tools NVARCHAR(MAX)
AS
BEGIN
  SET NOCOUNT ON;

  -- in case they had previously selected tools
  -- that are no longer selected, clear first:

  DELETE dbo.LocationTools WHERE LocID = @LocID;

  INSERT dbo.LocationTools(LocID, ToolID)
    SELECT @LocID, ToolID
    FROM dbo.SplitTools(@Tools);
END
GO 
```

现在您可以在不更改架构或代码的情况下添加新工具#s，因为您的复选框列表也可以从您的数据中生成 - 假设您有一个`dbo.Tools`表或想要添加一个表。该表还可用于数据完整性目的（您可以在 上放置外键`dbo.LocationTools.ToolID`）。

您可以非常简单地生成所需的查询：

```
SELECT LocID, Tool = 'Tool' + CONVERT(VARCHAR(12), ToolID)
  FROM dbo.LocationTools
  ORDER BY LocID, ToolID; 
```

没有冗余数据，没有带有难以管理的列的宽表，并且适当的索引甚至可以帮助您有效地使用 Tool3 搜索所有位置......

# php - MySQL - 我应该使用哪种哈希算法？

> ID：10803864
> 
> 赞同：0
> 
> 时间：2012-05-29T17:26:16.063
> 
> 标签：php, mysql

我有一个包含 360000 个单词（条目）的大型押韵数据库。每个单词都有一个类别（例如：'sheet' 和 'meet' 有类别 'eet'）。查找合适押韵的查询在我的网络空间中有点慢，所以我想通过将类别加密为只有数字的哈希来加快速度。（我听说更快，对吗？:)

我应该使用哪种哈希算法来加密单个单词字符串？它应该只包含数字。

或者您有其他加快数据库查询速度的建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:31:19.423

也许您可以将[levenshtein 算法](http://en.wikipedia.org/wiki/Levenshtein_distance)作为存储函数实现到 mysql 中，下面是一个示例，希望对您有所帮助：

```
DELIMITER //
CREATE FUNCTION levenshtein( s1 VARCHAR(255), s2 VARCHAR(255) )
  RETURNS INT
  DETERMINISTIC
  BEGIN
    DECLARE s1_len, s2_len, i, j, c, c_temp, cost INT;
    DECLARE s1_char CHAR;
    -- max strlen=255
    DECLARE cv0, cv1 VARBINARY(256);
    SET s1_len = CHAR_LENGTH(s1), s2_len = CHAR_LENGTH(s2), cv1 = 0x00, j = 1, i = 1, c = 0;
    IF s1 = s2 THEN
      RETURN 0;
    ELSEIF s1_len = 0 THEN
      RETURN s2_len;
    ELSEIF s2_len = 0 THEN
      RETURN s1_len;
    ELSE
      WHILE j <= s2_len DO
        SET cv1 = CONCAT(cv1, UNHEX(HEX(j))), j = j + 1;
      END WHILE;
      WHILE i <= s1_len DO
        SET s1_char = SUBSTRING(s1, i, 1), c = i, cv0 = UNHEX(HEX(i)), j = 1;
        WHILE j <= s2_len DO
          SET c = c + 1;
          IF s1_char = SUBSTRING(s2, j, 1) THEN 
            SET cost = 0; ELSE SET cost = 1;
          END IF;
          SET c_temp = CONV(HEX(SUBSTRING(cv1, j, 1)), 16, 10) + cost;
          IF c > c_temp THEN SET c = c_temp; END IF;
            SET c_temp = CONV(HEX(SUBSTRING(cv1, j+1, 1)), 16, 10) + 1;
            IF c > c_temp THEN 
              SET c = c_temp; 
            END IF;
            SET cv0 = CONCAT(cv0, UNHEX(HEX(c))), j = j + 1;
        END WHILE;
        SET cv1 = cv0, i = i + 1;
      END WHILE;
    END IF;
    RETURN c;
  END; 
```

来源[http://www.artfulsoftware.com/infotree/queries.php#552](http://www.artfulsoftware.com/infotree/queries.php#552)（通过添加修复`DELIMITER //`）

**测试示例脚本**

```
<?php
//I inserted these test words into a test database
$words = 'back, lack, pack, rack, sack, tack, yak, black, knack, quack, slack, smack, snack, stack, track, whack, attack,bale, fail, hail, mail, male, nail, pail, tale, rail, sail, stale, scale, snail, whale, detail, email,air, bare, care, chair, dare, fair, hair, pair, rare, wear, chair, flare, stare, scare, share, spare, square, there, where, aware, beware, compare, declare, despair, prepare, repair, unfair,ache, bake, fake, lake, make, rake, take, brake, break, flake, quake, snake, steak, awake, mistake,all, ball, call, doll, hall, fall, tall, crawl, small, baseball, football,an, can, fan, man, pan, ran, tan, van, plan, scan, span, began,and, band, hand, land, sand, bland, command, demand, expand, stand, understand,cap, gap, map, nap, tap, zap, chap, clap, flap, slap, snap, strap, trap, wrap,are, bar, car, far, jar, tar, star, scar, afar, guitar,at, bat, fat, mat, pat, rat, sat, flat, that, splat, combat,ate, date, fate, mate, late, gate, rate, wait, crate, great, plate, skate, slate, state, straight, trait, weight, create,bed, dead, fed, head, led, read, red, said, bread, fled, spread, thread, tread, instead,bell, fell, sell, well, yell, shell, smell, spell, farewell, hotel, motel,den, hen, men, pen, ten, glen, then, when, wren, again,bet, get, jet, let, met, pet, set, vet, wet, yet, threat, barrette, reset, upset,bin, chin, in, pin, tin, grin, thin, twin, skin, begin, within,king, ring, sing, wing, zing, bring, cling, fling, sling, spring, sting, string, swing, thing,bit, fit, hit, it, kit, lit, pit, sit, flit, knit, quit, skit, slit, spit, split, admit, commit, permit,bite, kite, bright, fight, fright, knight, night, might, right, tight, white, write, delight, tonight,go, hoe, low, mow, row, sew, toe, blow, crow, dough, flow, know, glow, grow, know, show, slow, snow, stow, though, throw, ago, although, below,cot, dot, got, hot, lot, not, pot, rot, tot, bought, fought, knot, taught, shot, spot, squat, forgot,crowned, found, ground, hound, mound, pound, round, sound, wound, around, surround,bows, hose, nose, rose, toes, blows, flows, froze, grows, those,cub, rub, sub, tub, club, stub, scrub, shrub ,bun, fun, gun, one, run, son, sun, ton, won, done, none, begun, outdone, undone';

//A Class for db connection
Class DB{
    private $db;

    function __construct($host,$dbname,$user,$pass){
        $this->dbhost = $host;
        $this->dbname = $dbname;
        $this->dbuser = $user;
        $this->dbpass = $pass;
    }

    private function connect(){
        if (!$this->db instanceof PDO){
            $this->db = new PDO('mysql:dbname='.$this->dbname.';host='.$this->dbhost, $this->dbuser, $this->dbpass);
            $this->db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        }
    }

    //A Model method for the levenshtein_query.
    public function levenshtein_query($word,$dist){
        $this->connect();
        $sql = "SELECT `word` FROM `words` WHERE levenshtein( :word ,`word` ) BETWEEN 0 AND $dist";
        $statement = $this->db->prepare($sql);
        $statement->bindParam(':word', $word, PDO::PARAM_STR);
        $statement->execute();
        return $statement->fetchAll(PDO::FETCH_ASSOC);
    }
}

//ini the model class
$model = new DB('localhost','test_db','root','');

//The Word posted
$word = 'eet';
$result = $model->levenshtein_query($word,1);

print_r($result);
/*
//The Result
Array
(
    [0] => Array
        (
            [word] => bet
        )

    [1] => Array
        (
            [word] => get
        )

    [2] => Array
        (
            [word] => jet
        )

    [3] => Array
        (
            [word] => let
        )

    [4] => Array
        (
            [word] => met
        )

    [5] => Array
        (
            [word] => pet
        )

    [6] => Array
        (
            [word] => set
        )

    [7] => Array
        (
            [word] => vet
        )

    [8] => Array
        (
            [word] => wet
        )

    [9] => Array
        (
            [word] => yet
        )

    [10] => Array
        (
            [word] => meet
        )

)

*/ 
```

也许它有点兴趣......

# c# - 如何使用 SPJobDefinitionCollection 的 GetEnumerator 方法

> ID：10803865
> 
> 赞同：1
> 
> 时间：2012-05-29T17:26:18.013
> 
> 标签：c#, unit-testing, sharepoint, moles, pex

**有人可以帮我吗？**

我需要为这种方法使用摩尔创建一个单元测试：

```
 public override void FeatureActivated(SPFeatureReceiverProperties properties)
    {
        SPWebApplication webApp = properties.Feature.Parent as SPWebApplication;
        foreach (SPJobDefinition job in webApp.JobDefinitions)
            if (job.Name == "AAAA") job.Delete();
        AssistantJob aJob = new AssistantJob(webApp);
        SPDailySchedule schedule = new SPDailySchedule();
        schedule.BeginHour = 2;
        schedule.BeginMinute = 30;
        schedule.BeginSecond = 0;
        schedule.EndHour = 3;
        schedule.EndMinute = 30;
        schedule.EndSecond = 0;
        aJob.Schedule = schedule;
        aJob.Update();
    } 
```

**但是，当我执行测试时，会出现以下错误消息：**

```
failing test: MoleNotImplementedException, SPPersistedObjectCollection`1.GetEnumerator() was not moled. 
```

**此错误发生在这一行：**

```
 foreach (SPJobDefinition job in webApp.JobDefinitions) 
```

**这是我的单元测试代码：**

```
 [PexMethod]
    public void FeatureActivated(
        [PexAssumeUnderTest]ApprovalAssistantCleanupEventReceiver target
    )
    {
        MSPFarm.BehaveAsNotImplemented();

        BSPFeatureReceiverProperties props = new BSPFeatureReceiverProperties();
        BSPFeature feature = new BSPFeature();
        MSPWebApplication webapp = new MSPWebApplication();

        props.Feature = feature;
        feature.Parent = webapp.Instance;
        webapp.JobDefinitionsGet = () => new MSPJobDefinitionCollection();

        target.FeatureActivated(props);

    } 
```

我在互联网上阅读过我需要使用 Binding 将 GetEnumerator() 实现到集合中。然后改变了我的单元测试来实现这个，但是错误是一样的。AssistantJob 类实现 JobDefinition 抽象类。

```
 webapp.JobDefinitionsGet = () => new MSPJobDefinitionCollection().Bind(new MApprovalAssistantJob[] {
            new MAssistantJob() {  },
            new MAssistantJob() {  }
        }); 
```

有人可以帮我在 MSPJobDefinitionCollection 中添加**MAssistantJob**项目**吗**？

对不起，我的英语不好。

非常感谢。

# c# - ASP.NET C# Datagrid 超链接

> ID：10803866
> 
> 赞同：1
> 
> 时间：2012-05-29T17:26:23.217
> 
> 标签：c#, asp.net, datagrid, hyperlink

我在这里尝试做的是让数据网格显示服务器上的文件列表，用户可以单击以下载或打开这些文件。该列表很好地填充了文件，我得到了文件夹中所有 pdf 文件的完整列表。当我在数据网格中单击它们时，链接将定向到应用程序根目录，而不是正确的文件夹。 **如何告诉数据网格超链接列去哪里？**

后面的 C# 代码：

```
DirectoryInfo dir = new DirectoryInfo(Server.MapPath("~") + "/Assets/reports/");
gridList.DataSource = dir.GetFiles("*.pdf");
gridList.DataBind(); 
```

ASP

```
<asp:DataGrid runat="server" id="gridList" Font-Name="Verdana"
<Columns>
<asp:HyperLinkColumn DataNavigateUrlField="Name" DataTextField="Name" 
       HeaderText="File Name"/>
</Columns>
</asp:DataGrid> 
```

我试着把它放在：

```
 NavigateUrl =  '<%# "~/Assets/reports/" + Eval("Name") %>'> 
```

但我得到一个“只有具有数据绑定事件的对象才支持数据绑定表达式。” 错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T17:31:16.510

干得好。

```
<asp:HyperLinkColumn DataNavigateUrlField="Name" 
  DataTextField="Name" 
  HeaderText="File Name"
  DataNavigateUrlFormatString="~\examfilemanager\{0}" /> 
```

在这里找到它。 [asp.net DataGrid 文件结构并链接回它](https://stackoverflow.com/questions/10177835/asp-net-datagrid-file-structure-and-linking-back-to-it)

# javascript - fancyBox 加载时的解除绑定错误

> ID：10803870
> 
> 赞同：1
> 
> 时间：2012-05-29T17:26:37.133
> 
> 标签：javascript, jquery, fancybox

这只发生在选定的网站上。我有一个书签。当用户单击并收到此错误时，我会打开一个框：

![在此处输入图像描述](../Images/bd1cb151340ba733da56d9f4806dfe54.png)

似乎表达式的 a.wrap 部分可以防止未定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:52:41.833

好吧，这很简单：语句是 an`and`并且应该是`or`.

更新：好的，事实证明这是有效的：

```
 if( a.wrap !=null && typeof a.wrap != "undefined" && typeof a.wrap.unbind != "undefined") {
            a.wrap.unbind(".fb");
      } 
```

代替：

```
 unbindEvents : function() {
        a.wrap && a.wrap.unbind(".fb"); 
```

根据此[链接](http://www.johndcook.com/blog/2010/01/12/software-sins-of-omission/)：30% 的缺陷是逻辑错误。

# asp.net - Asp.net 中的 Windows 工作流 4

> ID：10803875
> 
> 赞同：3
> 
> 时间：2012-05-29T17:26:50.613
> 
> 标签：asp.net, windows, workflow, workflow-foundation-4

我想知道是否有适合 Windows 工作流 4 初学者的好的教程或视频，以及如何在 asp.net 页面中使用工作流？

我想创建一个基本示例页面，该页面将询问用户一个问题，并根据他们的答案（使用工作流决策树）显示相关的下一个问题。

这甚至可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:48:44.540

是的，你可以做这样的例子，但方法略有不同。

创建具有多个接收响应活动的工作流服务。所有接收活动都与上下文相关。使用问题数据库并从数据库中获取当前问题并进行渲染。

Asp.net 页面上的启动按钮启动工作流服务。

工作流服务等待每个接收活动的输入，并通过提交按钮使用输入。

工作流活动在 db 中为当前用户提出了下一个问题。

# c++ - 堆栈内存 /STACK

> ID：10803882
> 
> 赞同：2
> 
> 时间：2012-05-29T17:27:18.897
> 
> 标签：c++, visual-studio-2010, vector, stack

对于我正在处理的程序，我经常需要从包含数十万个整数的文本文件中读取输入。目前，我正在读取一些值并将它们存储在一个向量中。每当我需要的值不在向量中时，我就会再次从输入文件中读取并清除旧值，以便为我当前正在读取的值腾出空间。

我想避免经常需要从输入文件中读取的情况，我想知道在出现问题之前我可以在向量中存储多少值。max_size() 返回 1073741823，所以我想我可以存储这么多元素，但我想知道该内存在哪里使用，以及拥有这么大的向量是否是个好主意。

当您这样创建向量时：

```
int main(){
std::vector<int> vec;
vec.push_back(3);
vec.push_back(4);

return 0;
} 
```

该向量现在是否使用堆栈内存？由于您的向量包含 2 个整数，这是否意味着正在使用 8 个字节的堆栈内存？

根据 MSDN 文档：

> 对于 x86 和 x64 机器，默认堆栈大小为 1 MB。

这似乎并不像很多内存。什么是您想要增加堆栈内存的情况示例？Visual Studio 中是否有任何方法可以准确监控当前正在使用的堆栈和堆内存量？

在这种情况下，我能做些什么来防止从输入文件中不断读取吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T17:29:56.400

> 该向量现在是否使用堆栈内存？

vec 对象在堆栈上，但随着它的增长，它会在内部在堆上分配内存

**编辑**

此外，您可以尝试使用内存映射文件，而不是读取所有文件并将其存储在向量中。据我了解（我自己没有使用过它们），您将受益于内核模式下的页面缓存和文件读取（因为操作系统将按需管理文件的加载）。

请注意，这只是关于在哪里进行调查的建议（我**认为**这可能是合适的，但我对内存映射文件不够熟悉，无法告诉您更多信息）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T17:30:30.657

`vector`将元素存储在堆中，而不是堆栈中。你是否真的应该分配那么多堆内存是另一回事，但你不会破坏你的堆栈。

# javascript - 正则表达式内部内容

> ID：10803883
> 
> 赞同：0
> 
> 时间：2012-05-29T17:27:25.853
> 
> 标签：javascript, regex

使用 JavaScript，我正在寻找其他两个字符串中的文本，而不包括这些字符串。例如：

输入：`ONE example TWO`

正则表达式：`(?=ONE).+(?=TWO)`

火柴：`ONE example`

我想：`example`

我真的很惊讶问号（应该只在查询中包含该字符串而不是结果）在字符串的末尾起作用，而不是在开头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:35:27.797

啊哈！我想到了。

例如，这里是如何在没有括号的情况下获取括号内的文本

```
(?<=\().+(?=\)) 
```

这是一个很好的参考：[http ://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

我的部分困惑是javascript的错。它显然不支持原生的“lookbehinds”。我发现了这个解决方法：http: [//blog.stevenlevithan.com/archives/mimic-lookbehind-javascript](http://blog.stevenlevithan.com/archives/mimic-lookbehind-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T17:30:07.803

（我使用 Python 的`re`模块来展示示例——具体如何执行取决于您的正则表达式实现 [例如，有些没有组——或反向引用]）

* * *

对第一个断言使用后向断言，而不是前向断言。

```
>>> re.search(r"(?<=ONE).+(?=TWO)", "ONE x a b TWO").group()
' x a b ' 
```

问题是零宽度断言`(?=ONE)`与文本“ONE”匹配，但不“使用”它——即它只是检查它是否存在，但保留字符串原样。然后`.+`开始阅读文本，并*消耗*它。

向后断言不向前看，它们向后看，所以在它*后面*的东西是“一”`.+`之前不会运行。

 ** * *

最好不要理会这些，而是​​使用组。考虑：

```
>>> re.search(r"ONE(.+)TWO", "ONE x a b TWO").group(1)
' x a b ' 
```*

# ruby-on-rails-3 - JSON 不正确地转义 Ruby 1.9.3 Rails 3.1.4

> ID：10803888
> 
> 赞同：1
> 
> 时间：2012-05-29T17:28:06.247
> 
> 标签：ruby-on-rails-3

我的 Rails 应用程序存在 JSON 编码问题：

```
h = {:status=>200, :promotions=>[{:id=>719788, :title=>"test"}]} 
```

和结果

```
puts h.to_json 
```

是

```
{"status":200,"promotions":{"{\"id\"=>719788, \"title\"=>\"test\"}":null}} 
```

这不是预期的结果！

这是正确的结果：

```
{"promotions":[{"title":"test","id":719788}],"status":200} 
```

什么会在 JSON 生成中产生这样的错误？

```
ruby -v
ruby 1.9.3p194 (2012-04-20) [x86_64-linux]
rails -v
Rails 3.1.4
gem list ==> json (1.6.6, 1.5.4) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:50:02.907

好的，这与 rails 或 ruby​​ 的配置无关...其中一位工程师将此添加到 Array 的 core_extensions

```
def to_hash # Recursively convert array to hash 
 inject({}) do |hash, (key, value)|
   value = value.to_hash if value.kind_of?(Array)
   hash.merge!({key => value})
 end
end 
```

我想我明天可以删除这个问题

# wpf - 窗口关闭事件不会释放内存和资源。如何解决 WPF 中的内存泄漏？

> ID：10803891
> 
> 赞同：0
> 
> 时间：2012-05-29T17:28:20.723
> 
> 标签：wpf, memory-leaks

最近我注意到我的 WPF 项目中存在严重的内存泄漏。如果简化项目，它有一个登录表单和一个主表单。在主窗体中，有 1 个用户控件由大约 30 个用户控件和 3 个按钮组成，1 个用户控件具有 3 个按钮和一个 Infragistics 数据网格。我使用后台工作人员每 30 秒查询一次数据库，仅用于数据网格。

在我使用 main form.close 注销主窗体并重新启动登录窗口后，我注意到每次 ANTS 内存分析器 7 测量到 6-7MB 增加。即使我有未注册的事件处理程序，请将变量设置为 null并调用了 GC.Collect()，内存泄漏还是一样的。我的问题是： 1\. 为什么关闭 wpf 窗口不释放内存和资源？我可以看到许多字符串（大部分来自 GUI）在 ANTs 分析器关闭窗口后仍在内存中。2\. 资源事件设置器定义的事件是否需要注销？我是否需要取消注册在 XAML 中声明的事件？3\. 从[WPF 内存泄漏](https://stackoverflow.com/questions/6547723/wpf-memory-leak)，人们说我们不应该使用 GC.Collect()，但我确实看到了一些改进。我们要不要使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:50:25.147

在将 WindowsFormsHost 用于 PictureBox 控件时，我遇到了一个类似的问题。使用 WF PictureBox 控件的 WPF 窗口无法完全释放，这就是为什么我每次重新打开子窗口时都会定期增加 ~10mb。自从我在 WPF 窗口关闭时开始清空 WFH 对象后，问题就解决了。如果您使用此类，请确保您清除所有 WF 控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T17:35:50.937

进入调试器，然后在“立即”窗口中键入：

```
.load C:\Windows\Microsoft.NET\Framework\v2.0.50727\sos.dll 
```

sos.dll 的路径各不相同。找出正确路径的方法是在“模块”窗格中查找 mscorwks.dll。无论从哪里加载，都是 sos.dll 的正确路径。

然后输入：

```
System.GC.Collect() 
```

这将确保收集到任何无法到达的东西。然后输入：

```
!DumpHeap -type <some-type-name> 
```

这将向您显示所有现有实例的表格以及地址。您可以像这样找出使实例保持活动状态的原因：

```
!gcroot <some-address> 
```

最初由[丹尼尔回答](https://stackoverflow.com/users/27423/daniel-earwicker)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T22:08:05.550

这取决于。WPF 中的用户控件本身不会释放，因此您必须覆盖该功能并允许它在您的控件中使用：

[http://msdn.microsoft.com/en-us/library/system.idisposable.dispose.aspx](http://msdn.microsoft.com/en-us/library/system.idisposable.dispose.aspx)

但就您而言，您需要按照 SlimGG 的建议至少执行一次 GC.Collect() 。

在大多数情况下，直接调用垃圾收集器被认为是不好的做法，因为它不是专门为您的控件调用它，而是为所有排队等待处理的对象调用它。

# c# - 线条颜色、线条样式、线条粗细组合框

> ID：10803892
> 
> 赞同：1
> 
> 时间：2012-05-29T17:28:29.290
> 
> 标签：c#, winforms, user-interface

我应该使用什么样的控件来开发像这样的图片框的屏幕？带有线条样式的组合框？

![线型选择对话框](../Images/13e4ce529cff227983100c97042c7c87.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-09-14T14:28:26.523

```
 <Rectangle Stroke="Black" Margin="5" Width="80" Height="4" StrokeDashArray="4 1 1 3" StrokeThickness="2" StrokeDashOffset="2"></Rectangle>
        <Rectangle Stroke="Black" Margin="5" Width="80" Height="4" StrokeDashArray="4 3" StrokeThickness="2" StrokeDashOffset="2"></Rectangle>
        <Rectangle Stroke="Black" Margin="5" Width="80" Height="4" StrokeDashArray="4 6" StrokeThickness="2" StrokeDashOffset="2"></Rectangle>
        <Rectangle Stroke="Black" Margin="5" Width="80"  Height="4" StrokeDashArray="4 8" StrokeThickness="2" StrokeDashOffset="2"></Rectangle>

    </ComboBox> 
```

# c# - 接口未从 mikroC Pro 接收字符串

> ID：10803894
> 
> 赞同：0
> 
> 时间：2012-05-29T17:28:32.800
> 
> 标签：c#, mikroc

我想使用 C# 接口将字符串从 mikroC pro 发送到 PC。我的代码是：

```
void main()
{
    while (1) 
    {
        if (UART1_Data_Ready())
        {
            UART1_Write_Text("mikroC");
            Delay_ms(1000);
        }
    }
} 
```

但是当在 C# 中接收到时，它第一次返回整个字符串，然后返回它的片段，就像它首先发送'm'然后发送'ikroC'。等等，因为我的 C# 代码是：

```
private void serialPort1_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
{
     MessageBox.Show(serialPort1.ReadExisting().ToString());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:07:56.153

MSDN 文档说：DataReceived 事件不保证为接收到的每个字节引发。使用**SerialPort.BytesToRead**属性确定缓冲区中还有多少数据要读取。有关详细信息，请参阅此[MSDN 文章](http://technet.microsoft.com/en-us/library/system.io.ports.serialport.datareceived.aspx)

# ruby-on-rails - Ruby On Rails - 充当可标记 - 更改参数名称：关键字

> ID：10803899
> 
> 赞同：0
> 
> 时间：2012-05-29T17:28:49.587
> 
> 标签：ruby-on-rails, keyword, acts-as-taggable-on, param

我想知道是否/如何在使用可标记时更改参数的名称：关键字？

今天我的网址是这样的：

```
http://www.foo.bar/tagged?keyword=baz 
```

我想将“关键字”更改为另一个词。

**控制器**

```
 def tagged
    @current_keyword = params[:keyword]
    @tags = FeedEntry.tag_counts_on(:keyword)
    @tagged_feed_entries = FeedEntry.tagged_with(params[:keyword]).order("published_at desc").paginate :page => params[:sida]
  end 
```

**看法：**

```
 <table class="table table-striped">
    <tbody>
    <% if @tags %>

        <% @tagged_feed_entries.each do |feed_entry| %>
            <tr>
              <td>
                <% today = Date.today %>
                <% if (today === feed_entry.published_at.to_date) %>
                    <span class="label label-success">
                <% else %>
                    <span class="label">
                <% end %>
                <%= format_stamp_to_date(feed_entry.published_at) %>
                kl:
                <%= I18n.localize(feed_entry.published_at, :format => '%H:%M') %>
                </span>

              </td>
              <td><%= link_to feed_entry.name, feed_entry_path(feed_entry) %></td>
            </tr>
        <% end %>

    <% end %>
    </tbody>
  </table>

  <%= will_paginate @tagged_feed_entries, :param_name => :sida %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:08:32.803

您应该能够替换 to 的所有`params[:keyword]`实例`params[:whatever]`。然后您的路径变为`http://www.foo.bar/tagged?whatever=baz`.

如果您有一个搜索表单，您也必须在那里进行相关更改。

# java - 在 Apache Jena 中创建带有嵌套节点的 RDF

> ID：10803900
> 
> 赞同：1
> 
> 时间：2012-05-29T17:28:53.173
> 
> 标签：java, rdf, semantic-web, jena

一个类似的问题已经在这里问过[如何从耶拿获取嵌套的 RDF/XML？](https://stackoverflow.com/questions/10476022/how-to-get-a-nested-structure-in-jena).

我没有找到有用的答案：作为作者，我想映射这样的东西：

```
<address>
   <street>...</street>
   <postcode>...</postcode>
   .
   .
   .
</adress> 
```

给出的答案是，在 RDF 中您必须考虑三元组，但在这里不适用吗？

*   （地址，有街道，...）
*   （地址，有邮政编码，...）
*   （人，有地址，...）

我问的另一个原因是，我使用 Jena Bean 从我的 Java 类模型中生成 RDF，结果也是一个嵌套结构。现在我想对 Apache Jena 做同样的事情，但我无法弄清楚，文档中没有任何提示，我试过了，到目前为止还不知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:13:23.647

你试过官方教程吗？它显示了如何做你所要求的。

他们正在为 VCard 命名空间使用预定义的字典，该字典随 Jena jars 一起提供，但只需浏览一下预定义的字典，就可以轻松定义自己的字典。

这是教程[http://jena.apache.org/tutorials/rdf_api.html#ch-Introduction](http://jena.apache.org/tutorials/rdf_api.html#ch-Introduction)

您还应该查看 RDF 验证器：[http](http://www.w3.org/RDF/Validator/) ://www.w3.org/RDF/Validator/ 它允许您验证您的 RDF（谁会猜到）并将其可视化为图形。它确实可以帮助您看到并意识到您在创建本体时所犯的错误。它为我节省了很多徒劳的努力和挫败感。

# c# - 如何正确处理自定义控件中的引用

> ID：10803901
> 
> 赞同：8
> 
> 时间：2012-05-29T17:29:02.097
> 
> 标签：c#, .net, winforms, visual-studio-2010, custom-controls

我使用 c# 构建了一个导出两个自定义控件的类库。这个类库依赖于一些引用，只要我只添加控件 DLL 作为引用，这些引用就会在构建时被适当地复制到 bin\Debug 目录中（使用自定义控件的解决方案）。到目前为止，一切都很好。

如果我现在将该输出目录中的控件添加到工具箱中并将一个放在设计器中的空表单上，Visual Studio 就会崩溃。如果我像这样从自定义控制解决方案调试[http://msdn.microsoft.com/en-us/library/5ytx0z24(VS.80).aspx](http://msdn.microsoft.com/en-us/library/5ytx0z24(VS.80).aspx)，我可以看到找不到引用的 DLL 之一的 IO 异常.

那么，是否有一种相当优雅的方式来放置依赖项以供*设计人员*找到它们？我尝试在项目设置中摆弄参考路径，但无济于事。每次更改一些代码时，我宁愿避免设置系统范围的路径和安装/注册控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T19:43:26.887

为什么不直接引用整个项目而不是手动复制到 dll 中呢？如果您对此有充分的理由，那很好，但似乎您在问一个不需要问的问题！:P

# objective-c - 如何处理标签栏控制器内的导航控制器？

> ID：10803904
> 
> 赞同：1
> 
> 时间：2012-05-29T17:29:18.087
> 
> 标签：objective-c, ios, xcode

我有以下情况：我从登录屏幕开始（我希望没有工具栏或标签栏。）用户登录后，我想显示一个标签栏，其中包含多个选项，每个选项都可以深入到他们的自己的视图层次结构。因此，这些选项卡中的每一个都必须具有导航控制器功能。

因此，最直接的解决方案是拥有一个标签栏控制器，然后让每个部分（总共 3 个）拥有自己的导航控制器。但是，问题是我希望整个应用程序中的每个页面都有一个注销按钮，这将使它们回到第一个屏幕。

我可以从每个页面的注销按钮开始，但这似乎是错误的。我还可以将标签栏控制器放在导航控制器中；但是我听说导航控制器应该始终在标签栏控制器内，而不是相反。

有什么建议么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:36:23.440

如果每个 UINavigationController 的根视图控制器是登录屏幕，为什么不`self.navigationItem.rightBarButtonItem`为每个适当的视图分配一个注销按钮。单击时，它可以调用您的注销功能，然后`popToRootViewControllerAnimated:`将您带回登录屏幕。

您可以`setNavigationBarHidden:animated:`在任何您想要或不希望显示导航栏的视图中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:39:48.030

将您的“登录”屏幕显示为导航控制器的标签栏控制器顶部的模式视图控制器。每当您从应用程序中的任何位置注销时，您都会呈现一个新的模式登录视图，然后可以在其他控制器不再可见时重置它们的状态。登录时，您关闭模式并显示选项卡栏控制器及其包含的任何内容。

# jquery - 在更改时动态打印输入字段和单选按钮

> ID：10803910
> 
> 赞同：0
> 
> 时间：2012-05-29T17:30:11.760
> 
> 标签：jquery

问题：我想请求帮助，根据您之前对单选按钮所做的选择，如何包含输入字段和单选按钮。

jQuery代码：

```
<script src="./js/jquery-1.7.2.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function()
    {
        $("input[name='authors']").change(function()
        {
            if(this.checked) 
            {
                if(this.value == 1) 
                {
                    $("#choice-1").show();
                    $("#choice-2").hide();
                }
                else if (this.value == 2)
                {
                    $("#choice-2").show();
                    $("#choice-1").hide();
                }
            }
        }
    });
</script> 
```

HTML 代码：

```
<label class="radio"><input type="radio" name="authors" id="authors" value="1">1 author</label> 
<label class="radio"><input type="radio" name="authors" id="authors" value="2">2 authors</label>

<div id="choice-1" style="display: none;">

    <label class="control-label">Gender:</label>

    <label class="radio"><input type="radio" name="FirstGender" id="FirstGender" value="1">Man</label>
    <label class="radio"><input type="radio" name="FirstGender" id="FirstGender" value="2">Woman</label>

</div>

<div id="choice-2" style="display: none;">

    <label class="control-label">Gender:</label>
    <label class="radio"><input type="radio" name="FirstGender" id="FirstGender" value="1">Man</label> 
    <label class="radio"><input type="radio" name="FirstGender" id="FirstGender" value="2">Woman</label>

    <label class="control-label">Gender:</label>
    <label class="radio"><input type="radio" name="SecondGender" id="SecondGender" value="1">Man</label> 
    <label class="radio"><input type="radio" name="SecondGender" id="SecondGender" value="2">Woman</label>

</div> 
```

所需功能：如果我单击单选按钮 1 作者，则应生成 1 个输入文本字段，标题为“作者姓名”，2 单选按钮（男/女），标题为“性别”。类似的方法适用于 2 位作者（参见代码中的注释）。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:36:44.987

```
$("input[name='authors']").change(function() {

    $('div[id^=choice]').hide();
    $('div#choice-' + this.value).show();

}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/g3j8W/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T17:34:49.767

您可以将它们放在 html 中并将它们包装在隐藏的 div 中。

```
<div id="choice-1" style="display: none>
   <!--your inputs for first choice -->
</div>

<div id="choice-2" style="display: none>
   <!--your inputs for second choice -->
</div>

if ($("input[name='authors']:checked").val() == '1') {
   $("#choice-1").show();
   $("#choice-2").hide();
} else if ($("input[name='authors']:checked").val() == '2') {
   $("#choice-2").show();
   $("#choice-1").hide();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T17:45:10.573

如果您的意思是要动态添加输入字段和单选按钮，如下所示：

```
var input = $('<input type="text">'),
    radio = $('<input type="radio">'),
    label = $('<label>'),
    output = $('#output'),
    authorLabel = label.clone().html('Author').appendTo(output),
    author = input.clone().attr('id','author').appendTo(output),
    rdmLabel = label.clone().html('Male').appendTo(output),
    rdm = radio.clone().attr({'name':'gender',value:'M'}).appendTo(output)
    rdfLabel = label.clone().html('Female').appendTo(output),
    rdf = radio.clone().attr({'name':'gender',value:'F'}).appendTo(output); 
```

# spring-mvc - Spring MVC Portlet Eclipse 插件

> ID：10803911
> 
> 赞同：3
> 
> 时间：2012-05-29T17:30:14.567
> 
> 标签：spring-mvc, eclipse-plugin, portlet

我被它困住了。请任何人了解 Eclipse 的简单门户/portlet 插件。请让我知道详细说明。因为我想通过使用 Spring MVC 来制作 portlet。我不想使用 Liferay！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T23:26:29.333

如果你想在 liferay portlets 中使用 spring mvc，你应该：

1.  使用 liferay 原型创建一个 maven portlet。
2.  在 pom.xml 中添加 spring、portlet 和 liferay 的所有库。
3.  配置您的 portlet 创建、web.xml、applicationContext.xml 和 portlet.xml
4.  编写你的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:51:13.600

您可以查看 Ashish Sarin 的“Portlets in Action”一书。

您将获得有关 portlet 和 Spring MVC 的所有信息。就个人而言，它对我帮助很大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T18:34:05.400

我建议你安装 Spring Source Tool Suite。这只是另一个 Eclipse，但其中预装了所有与 Spring 框架相关的插件。

我认为使用它创建 spring portlet 会更容易。

希望这对您有所帮助。

干杯。

# java - 在 Android 应用中使用 Java 获取特定的 XML 标记文本

> ID：10803912
> 
> 赞同：0
> 
> 时间：2012-05-29T17:30:15.210
> 
> 标签：java, android, xml, parsing

我一直在尝试使用 XmlResourceParser，但我觉得它不是适合这项工作的工具。我有一组包含子项目的项目，我想提取一个特定项目，例如此列表中的第二个项目：

```
<story>
    <id>1</id>
    <name>The First Room</name>
    <description>You aren't sure how you ended up here, but there is nothing in this room of interest. You should probably escape.</description>
    <direction>
        <name>North</name>
        <id>2</id>
    </direction>
    <direction>
        <name>East</name>
        <id>3</id>
    </direction>
</story>
<story>
    <id>2</id>
    <name>Moldy Room</name>
    <description>This room is filled with mold. It would be hazardous to your heath to stick around here.</description>
    <direction>
        <name>South</name>
        <id>1</id>
    </direction>
    <direction>
        <name>West</name>
        <id>4</id>
    </direction>
</story> 
```

简而言之，我希望能够通过“id”数字拉动它们，而不必设置我自己的对象。如果可能的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:57:39.627

您可以使用此代码：

```
 Resources res = activity.getResources();
        XmlResourceParser xpp = res
                .getXml(R.xml.myxml);
        xpp.next();
        int eventType = xpp.getEventType();
        eventType = xpp.next();
        eventType = xpp.next();
        eventType = xpp.next();

        short id = Short
                .parseShort(xpp.getText());

        Toast.makeText(
                activity.getApplicationContext(),
                "" + id, Toast.LENGTH_LONG)
                .show(); 
```

# c++ - C++ 风格：在命名空间中添加类型的指南？

> ID：10803913
> 
> 赞同：1
> 
> 时间：2012-05-29T17:30:23.523
> 
> 标签：c++, namespaces, styles

是否有关于何时使用“足够”类以保证将其添加到源文件的命名空间的样式指南（例如“使用 std::string”）？

我知道这在某种程度上是个人喜好问题，但我不喜欢我觉得我现在正在半随意地做这件事（例如，每当我开始厌倦输入 std::string 或其他任何东西时，并且在文件中不统一）。

到目前为止，我很少这样做（通过在每次使用中明确说明命名空间），但在某个点之后它确实开始损害可读性（行变得更快> 80个字符，看到 std::string 到处都是模板定义等）。使用一些 boost 类，这些东西也可以变得很长（boost::gregorian::date_duration）

# c++ - 对“SDL_main”的未定义引用

> ID：10803918
> 
> 赞同：11
> 
> 时间：2012-05-29T17:30:53.127
> 
> 标签：c++, sdl, codeblocks

我最近决定尝试使用带有 CodeBlocks 10.05 的 SDL。[我从http://www.sdltutorials.com/sdl-tutorial-basics](http://www.sdltutorials.com/sdl-tutorial-basics)上的教程开始，并尽力遵循它。不幸的是，我遇到了：

```
..\..\..\..\..\..\SDL\SDL-1.2.15\lib\libSDLmain.a(SDL_win32_main.o):SDL_win32_main.c|| undefined reference to `SDL_main'| 
```

当我尝试编译它时。

我已经搜索了这个网站和其他教程（主要是 LazyFoo 和 CodeBlocks wiki 上的教程）上的许多问题，但似乎找不到解决方案。

*   C:\SDL\SDL-1.2.15\include 已添加到编译器选项卡（搜索目录）
*   C:\SDL\SDL-1.2.15\lib 已添加到链接器选项卡中
*   库 libmingw32.a、libSDLmain.a、libSDL.dll.a 以该顺序链接
    *   来自 CodeBlocks 安装目录中 MinGW\lib 文件夹的 libmingw32.a
*   SDL.dll 位于 System32 文件夹和项目文件夹中

在尝试按照 CodeBlocks wiki 上的教程进行操作时，我被告知在给定目录中找不到 SDL.h（在创建新的 SDL 项目时）。

CApp.cpp

```
#include "CApp.h"
#include "SDL\SDL.h"

CApp::CApp(){
    Surf_Display=NULL;

    Running=true;
}

int CApp::OnExecute(){
    if (OnInit()==false){
        return -1;
}

SDL_Event Event;

while (Running){
    while (SDL_PollEvent(&Event)){
        OnEvent(&Event);
    }
    OnLoop();
    OnRender();
}

OnCleanup();
return 0;
}

int main(int argc, char* argv[]){
    CApp theApp;

    return theApp.OnExecute();
} 
```

CApp.h

```
#ifndef CAPP_H_INCLUDED
#define CAPP_H_INCLUDED
#include "SDL\SDL.h"

class CApp{
    private:
        bool Running;
        SDL_Surface* Surf_Display;

    public:
        CApp();
        int OnExecute();

    public:
        bool OnInit();
        void OnEvent(SDL_Event* Event);
        void OnLoop();
        void OnRender();
        void OnCleanup();
};

#endif // CAPP_H_INCLUDED 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2016-03-20T23:08:12.873

将这些参数放到主函数中。我也遇到了这个问题，几秒钟前我就解决了。

int main(int argv, char** args) { }

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-29T18:19:14.390

尝试`#undef main`所有与 SDL 相关的标头。

**更新。这不是一个有效的解决方案！**

正如 HolyBlackCat 所指出的，这是一个相当草率的修复。SDL 替换主函数以执行一些原本不可能的初始化和/或清理，然后回调到实际的用户函数。

拦截的工作原理是将用户的 main 函数的名称替换为`SDL_main`, 用一个简单的宏

```
#define main SDL_main 
```

然后，用户的函数不再是应用程序的入口点，而是使用 SDL 提供的入口点。提议`#undef`鲁莽地禁用拦截，人们应该争辩说它根本不应该工作。对于那些在此“修复”之后成功编译并运行 SDL 应用程序的人来说，这一定只是平台相关的巧合。

OP 错误的正确解决方案是确保包含的文件`main`被编译和链接，并且该函数具有正确的签名。正如其他人已经发布的那样。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-30T17:15:11.303

我能想到的问题的唯一合理原因是，当您在其中创建文件时`main`，您忘记将其添加到构建目标中。

![在此处输入图像描述](../Images/fa79fc2ccdca4b902b2abc6ad71e92ec.png)

您应该在我的 main.cpp 所在的列表中看到 CApp.cpp。右键单击它，然后单击属性。在弹出的窗口中单击构建选项卡。你应该看到这个：

![在此处输入图像描述](../Images/e7a9ac1caffee966cee302f39c4aabc4.png)

单击确定，按 Ctrl+F11（重建）。

祝你好运。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-09T07:10:52.567

最近，我遇到了这个问题，看了一些 YouTube 视频，还按照 LazyFoo 的安装指南，我不断收到“未定义对 SDL_main 的引用”错误。

在将 minGw 文件成功链接到我的项目属性后，我遵循了这里所说的一切，但是直到我添加到我的主要功能`int main (int argv, char** args)`并且瞧，它才起作用。

```
using namespace std;

int main(int argv, char** args) {    if(SDL_Init(SDL_INIT_VIDEO)<0)    {
       cout<<"Endl Init Failed."<<endl;
       return 1;    }

   cout<<"SDL Init succeeded."<<endl;

   SDL_Quit();    return 0; } 
```

为什么它起作用我仍然不清楚，但它仍然起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-16T10:55:05.490

`SDL_MAIN_HANDLED`在包含 SDL 库之前定义：

```
#define SDL_MAIN_HANDLED
#include <GL/glew.h>
#include <SDL2/SDL.h>
#include <SDL2/SDL_opengl.h> 
```

更多信息：[我正在使用未定义 SDL_main 的 SDL 函数。可以吗？](https://stackoverflow.com/questions/34079288/im-using-the-sdl-functions-without-the-sdl-main-be-defined-is-that-fine)

# branch - `git svn dcommit` 在分支上失败

> ID：10803926
> 
> 赞同：2
> 
> 时间：2012-05-29T17:31:36.570
> 
> 标签：branch, git-svn, cherry-pick, dcommit

我一直在使用`git-svn`与我公司的 svn repo 通信一段时间，没有任何大的头痛。

今天，“头痛”部分发生了巨大的变化：
我一直在`master/trunk`非常专注地工作，并且需要将大部分（但不是全部！）这些变更集合并到一个新的 svn 分支中，该分支源自一个预先存在的svn 分支。

基本上是这样的：

```
-----------1--1-----1--------1--1--1---  master/trunk
 \
  \
   2--2--2--2--2                                        versioned-release 
```

应该变成这样：

```
-----------1--1-----1--------1--1--1---  master/trunk
 \
  \
   2--2--2--2--2                                        versioned-release
                         \
                          \
                           1--1--1--1--1--1           new-versioned-release 
```

`不应该在 中的提交在哪里`new-versioned-release`，以及`x`来自各个分支的想要的提交`x`。`

 `所以我做了以下事情：

1.  `git checkout -b versioned-release-svn remotes/versioned-release`
2.  `git svn branch new-versioned-release -m "Preparing for merge of XXX"`
3.  `git checkout -b new-versioned-release-svn remotes/new-versioned-release`
4.  `git cherry-pick ...`对于每一个`1`，解决途中的任何冲突。

因为我想确定我真的要针对 repo 上的正确分支，然后我运行`git svn dcommit --dry-run`它并没有产生任何错误或警告，但告诉我......</p>

```
Committing to svn://username@$repo-host/$repo-name/$path/branches/new-versioned-release ... 
```

…接着是几`diff-tree`行。

所以我试图省略`--dry-run`提交的中途以......</p>

```
Item already exists in filesystem: File already exists: filesystem '/data/subvroot/$repo-name/db', transaction '20856-g3m', path '/$path/branches/new-versioned-release/some-directory' at /usr/libexec/git-core/git-svn line 862 
```

……还有**一堆**未分阶段的变化。

除了显而易见的——“WTF？！？” 和“我怎样才能在不失去我所做的一切的情况下摆脱这个烂摊子？” ——我有两个问题：

1.  假设我回到以前`git svn dcommit`：我如何让我的本地分支 dcommit 到其计划的目的地？
2.  现在看来很明显，这不是实现我想要的正确方法……但是*我*应该怎么做呢？

我为错误消息找到的所有内容，在某种程度上类似于我的情况，到目前为止，[这是另一个堆栈溢出问题](https://stackoverflow.com/questions/2922059/how-to-recover-from-an-unwanted-rename-using-git-svn-transaction-is-out-of-dat)，并且提出的“以某种方式 [...] 吹走`.git/svn`元数据目录”的解决方案并没有引起*我*的共鸣...... </p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-21T07:35:14.920

有人刚刚对我的老问题投了赞成票，所以我想我会分享一下我现在是如何做到这一点的。

它工作得非常好。

假设 git 存储库已使用

```
git svn clone \
    --prefix svn/ \
    --stdlayout \
    svn://username@$repo-host/$repo-name/$path
    $git_repo_name 
```

更改为 git repo，然后运行

```
git checkout svn/versioned-release
git svn branch new-versioned-release 
```

这将导致 SVN 服务器上的以下历史记录：

```
-----------1--1-----1--------1--1--1---  trunk
 \
  \
   2--2--2--2--2                                        versioned-release
                          \
                           \
                            3⭐️                                    new-versioned-release 
```

现在我会跑

```
git checkout svn/new-versioned-release
git checkout -b new-versioned-release

# resulting in the following **local** history:
#
# -----------1--1-----1--------1--1--1---  master (tracks 'svn/trunk')
#  \
#   \
#    2--2--2--2--2--3⭐️                         new-versioned-release (tracks 'svn/new-versioned-release') 
```

这是实现我想要的基础。

还有一个额外的提交，因为在 SVN 中的分支与在 Git 中的工作方式不同：创建一个分支总是意味着一个新的修订（又名提交），这就是它的`3⭐️`来源。这并不重要，但它就在那里。

我现在可以`git cherry-pick`所有`1`s，以这个本地历史结束：

```
-----------1--1-----1--------1--1--1---  master (tracks 'svn/trunk')
 \
  \
   2--2--2--2--2--3⭐️--1--1--1--1--1--1  new-versioned-release (tracks 'svn/new-versioned-release') 
```

当我现在`git svn dcommit`坐在`new-versioned-release`git 中时，SVN 服务器上的历史看起来就像我想要的那样：

```
-----------1--1-----1--------1--1--1---  trunk
 \
  \
   2--2--2--2--2                                        versioned-release
                          \
                           \
                            3⭐️--1--1--1--1--1--1    new-versioned-release 
```

唯一的区别是`3⭐️`创建第三个 SVN 分支的附加值。`

# ruby-on-rails - rails语法错误..意外结束

> ID：10803928
> 
> 赞同：-4
> 
> 时间：2012-05-29T17:31:55.253
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

收到以下错误：

```
SyntaxError in FriendsController#index

/Users/nelsonkeating/Desktop/ReminDeal/app/controllers/friends_controller.rb:32: syntax error, unexpected keyword_end, expecting ')'
/Users/nelsonkeating/Desktop/ReminDeal/app/controllers/friends_controller.rb:58: syntax error, unexpected $end, expecting keyword_end
Rails.root: /Users/nelsonkeating/Desktop/ReminDeal

Application Trace | Framework Trace | Full Trace
activesupport (3.2.3) lib/active_support/dependencies.rb:469:in `load'
activesupport (3.2.3) lib/active_support/dependencies.rb:469:in `block in load_file'
activesupport (3.2.3) lib/active_support/dependencies.rb:639:in `new_constants_in'
activesupport (3.2.3) lib/active_support/dependencies.rb:468:in `load_file'
activesupport (3.2.3) lib/active_support/dependencies.rb:353:in `require_or_load'
activesupport (3.2.3) lib/active_support/dependencies.rb:502:in `load_missing_constant'
activesupport (3.2.3) lib/active_support/dependencies.rb:192:in `block in const_missing'
activesupport (3.2.3) lib/active_support/dependencies.rb:190:in `each'
activesupport (3.2.3) lib/active_support/dependencies.rb:190:in `const_missing'
activesupport (3.2.3) lib/active_support/inflector/methods.rb:229:in `block in constantize'
activesupport (3.2.3) lib/active_support/inflector/methods.rb:228:in `each'
activesupport (3.2.3) lib/active_support/inflector/methods.rb:228:in `constantize'
activesupport (3.2.3) lib/active_support/dependencies.rb:554:in `get'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:69:in `controller_reference'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:54:in `controller'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:32:in `call'
journey (1.0.3) lib/journey/router.rb:68:in `block in call'
journey (1.0.3) lib/journey/router.rb:56:in `each'
journey (1.0.3) lib/journey/router.rb:56:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:600:in `call'
client_side_validations (3.1.4) lib/client_side_validations/middleware.rb:18:in `call'
warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
warden (1.1.1) lib/warden/manager.rb:34:in `catch'
warden (1.1.1) lib/warden/manager.rb:34:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.3) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `_run__4243183701801146600__call__3008343249707344054__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.3) lib/rails/engine.rb:479:in `call'
railties (3.2.3) lib/rails/application.rb:220:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
thin (1.3.1) lib/thin/connection.rb:80:in `block in pre_process'
thin (1.3.1) lib/thin/connection.rb:78:in `catch'
thin (1.3.1) lib/thin/connection.rb:78:in `pre_process'
thin (1.3.1) lib/thin/connection.rb:53:in `process'
thin (1.3.1) lib/thin/connection.rb:38:in `receive_data'
eventmachine (0.12.10) lib/eventmachine.rb:256:in `run_machine'
eventmachine (0.12.10) lib/eventmachine.rb:256:in `run'
thin (1.3.1) lib/thin/backends/base.rb:61:in `start'
thin (1.3.1) lib/thin/server.rb:159:in `start'
rack (1.4.1) lib/rack/handler/thin.rb:13:in `run'
rack (1.4.1) lib/rack/server.rb:265:in `start'
railties (3.2.3) lib/rails/commands/server.rb:70:in `start'
railties (3.2.3) lib/rails/commands.rb:55:in `block in <top (required)>'
railties (3.2.3) lib/rails/commands.rb:50:in `tap'
railties (3.2.3) lib/rails/commands.rb:50:in `<top (required)>'
script/rails:6:in `require'
script/rails:6:in `<main>' 
```

我的观点：

```
class FriendsController < ApplicationController

  def index
    @friends = Friend.all
end

  def show
    @friend = Friend.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @friend }
    end
  end

  def new
    @friend = Friend.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @friend }
    end
  end

  def edit
    @friend = Friend.find(params[:id])
  end

  def create
    @friend = Friend.new(params[:friend]
  end

  def update
    @friend = Friend.find(params[:id])

    respond_to do |format|
      if @friend.update_attributes(params[:friend])
        format.html { redirect_to @friend, notice: 'Friend was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @friend.errors, status: :unprocessable_entity }
      end
    end

  def destroy
    @friend = Friend.find(params[:id])
    @friend.destroy

    respond_to do |format|
      format.html { redirect_to friends_url }
      format.json { head :no_content }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T17:34:37.783

看起来您在更新结束时错过了结尾：

```
@friend = Friend.find(params[:id])
  respond_to do |format|
    if @friend.update_attributes(params[:friend])
      format.html { redirect_to @friend, notice: 'Friend was successfully updated.' }
      format.json { head :no_content }
    else
      format.html { render action: "edit" }
      format.json { render json: @friend.errors, status: :unprocessable_entity }
    end
  end
end #add this one :) 
```

而且您的 create 在它的末尾缺少一个右括号：

```
def create
  @friend = Friend.new(params[:friend])
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T17:34:20.717

您的`update`方法缺少它的`end`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-29T17:35:10.633

您的更新方法缺少结尾

# vb.net - 如何将文件夹中的所有 .txt 读入线程池

> ID：10803929
> 
> 赞同：0
> 
> 时间：2012-05-29T17:31:58.347
> 
> 标签：vb.net, threadpool

我将实现一个线程池来运行我的应用程序。我所有的内容都保存在我桌面上的一个文件夹下。

每个文件都是 .txt 格式。如何从给定文件夹中读取每个 .txt 文件，然后将 .txt 文件放入线程池/线程队列中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:35:40.337

这些将是开始寻找的好地方：[ThreadPool.QueueUserWorkItem](http://msdn.microsoft.com/en-us/library/4yd16hza.aspx)和[Directory.GetFiles](http://msdn.microsoft.com/en-us/library/wz42302f.aspx)

抱歉，我的 vb.net 生锈了，但这是 C#。

```
foreach (string file in Directory.GetFiles(folder, "*.txt"))
    ThreadPool.QueueUserWorkItem(ProcessFile, file);

void ProcessFile(Object fileNameObject)
{
    string fileName = (string)fileNameObject;
    string contents = File.ReadAllText(fileName);
    // ... process contents here.
} 
```

您的问题表示想要阅读，然后推入线程池，但我会反过来这样做，这样您就不会耗尽内存。将文件路径排入线程池中，然后让工作线程线程读取文件。

# entity-framework - 实体框架元数据异常 - dll 资源中没有 csdl、ssdl、msl

> ID：10803930
> 
> 赞同：4
> 
> 时间：2012-05-29T17:32:04.620
> 
> 标签：entity-framework, resources, metadata, edmx

我有 DAL（模型优先实体框架 4.1）和在单独的项目中使用它的服务。一切工作正常，但经过一些小的更改（例如我从数据库生成模型）它停止工作。我现在收到元数据异常。经过数小时的研究，我下载了 ILSpy 并检查了 DAL.dll 内部是否没有资源。我的连接字符串如下所示：

```
metadata=res://*/DataModel.TerminalRegistryModel.csdl|
         res://*/DataModel.TerminalRegistryModel.ssdl|
         res://*/DataModel.TerminalRegistryModel.msl; 
```

并且在 EDMX 文件元数据工件处理中设置为 Embed in Output Assembly。什么会导致我的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-26T08:05:28.590

标准元数据字符串如下所示：
`metadata=res://*/Model.csdl|res://*/Model.ssdl|res://*/Model.msl`
这在大多数情况下都可以正常工作。但是，在某些实体框架中会感到困惑并且不知道要查看哪个 dll。因此，将元数据字符串更改为：
`metadata=res://nameOfDll/Model.csdl|res://nameOfDll/Model.ssdl|res://nameOfDll/Model.msl`

# ios - 测试 OpenGL ES 性能

> ID：10803931
> 
> 赞同：1
> 
> 时间：2012-05-29T17:32:04.703
> 
> 标签：ios, opengl-es

我已经到了需要测试 OpenGL ES 渲染性能的项目阶段。我知道这`OpenGL ES Performance Detective`对于此类任务很方便。不幸的是，我无法在应用程序中初始化案例。

![在此处输入图像描述](../Images/86bb277b028708b62f90ea6780e9cf0d.png)

这与我的应用程序有问题有什么关系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:36:28.207

尝试使用不去除调试符号的配置，因为在大多数情况下，当您在使用仪器时遇到任何问题时，这似乎会有所帮助。

转到编辑方案窗口 -> 选择 Profile App -> 将构建配置更改为调试。

# asp.net-mvc-3 - 1 个视图中有 2 个模型

> ID：10803935
> 
> 赞同：0
> 
> 时间：2012-05-29T17:32:31.267
> 
> 标签：asp.net-mvc-3

我知道我的问题很愚蠢，但我不知道我的问题的解决方案，并且可以理解 stackoverflow 上的类似问题。我在做简单的博客。当我去这个博客中的一篇文章时，我必须看到他的文章和评论文本。它们在我的数据库中，但我不知道如何显示两者。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:36:28.667

您必须创建一个 ViewModel 来表示此视图或此视图所需的数据，例如：

```
public class OrderViewModel {

   public int Id { get; set; }
   public DateTime DateOrder { get; set; }
   public decimal Total { get; set; }
   public string CustomerName { get; set; }

   public List<Item> Items { get; set; }

   // other properties     
} 
```

你应该使用这个 ViewModel 来输入你的视图，例如（使用剃刀）：

```
@model Models.ViewModels.OrderViewModel 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:40:37.793

这取决于模型中注释的关系。通常评论应该是帖子的子集合。因此，在视图中，您应该能够使用以下内容（Razor）呈现评论：

```
@foreach (var comment in Model.Comments) {
    // comments display goes here
} 
```

确保当您将模型从控制器传递到视图时，您不会产生低效的查询。确保查询通过博客获取评论，具体取决于您在数据库中获取模型的方式。如果您使用的是 EF，那将是“包含”指令，例如

```
.Include(p => p.Comment); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T17:40:49.483

您可以为此特定视图创建自定义 ViewModel。像这样的东西：

```
public class BlogReaderViewModel
{
    // various fields which exist on either the post or the comments
} 
```

然后，您将绑定到该视图的视图模型。Controller 操作将获取它需要的模型并构建 ViewModel 的实例以传递给 View。

另一种选择是[使用`Tuple`](http://msdn.microsoft.com/en-us/library/system.tuple.aspx). 它是一个泛型类，充当多种其他类型的强类型容器。所以视图的模型会是这样的：

```
Tuple<Post, Comments> 
```

从整体设计的角度来看，我最大的建议是考虑您的模型如何相互关联并找到您的“聚合根”。对于带有评论的博客文章，听起来文章应该是聚合根。模型本身应该包含注释。像这样的东西：

```
public class BlogPost
{
    public string Title { get; set; }
    public string Body { get; set; }
    public IEnumerable<Comment> Comments { get; set; }
} 
```

这个想法是聚合根是父对象并且在内部知道它的子对象。您不必在每次想要使用对象时手动组合这些对象层次结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T17:34:40.233

一种选择是创建一个复合模型，该模型表示呈现视图所需的两组数据，并将每个子模型传递给视图本身的编辑器模板。

# java - 需要帮助在 java 中打包一个可执行的 .jar

> ID：10803936
> 
> 赞同：4
> 
> 时间：2012-05-29T17:32:35.913
> 
> 标签：java, jar

好的，我在编写一些代码时有这个文件用于调试目的。但是，我希望通过将其打包到可执行的 .jar 文件中来加快该过程。我一直在通过 eclipse 创建一个 jar 文件，并尝试按原样运行它。

jar ( `Derivitave Quiz.jar`) 的内容如下：

*   `DerivQuiz.java`
*   `DerivQuiz.class`
*   `Meta-INF`（空文件夹）
*   `pass.txt`

另外，我是否必须重新编写它以使用非命令行输出，例如`Jpane`/ `JOptionPane`，而不是`System.out.print()`？

我当前的代码在 Eclipse 中运行良好，但在移植到 jar 之后就不行了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:41:12.713

我认为您使这变得过于复杂，特别是如果您对创建 JAR 文件这样简单的任务感到困惑。

您只需要 JDK 附带的 javac.exe 和 jar.exe。查看本教程以向您展示如何正确执行此操作：

[http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/jar.html](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/jar.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T21:35:24.517

我确实必须将所有打印语句更改为使用`JOptionPane.showMessageDialog()`而不是`System.out.print()`.

经过进一步检查，创建的 jar 没有清单文件，不允许 jar 运行。

我通过在 下添加清单文件来解决此问题，`META-INF/manifest.xml`代码如下：

```
Manifest-Version: 1.0
Created-By: 1.6.0_27 (Sun Microsystems Inc.)
Main-Class: MCExploit 
```

除了我所做的其他调整外，添加它可以让 jar 完美运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T17:46:20.647

达菲莫的回答很好。但是让我补充一点：如果您使用的是 Eclipse，您只需转到 File -> Export 然后选择“Executable Jar”，它会自动执行此操作。这是一个很好的指南，可以通过几种不同的方式（包括使用 Eclipse）：

[http://viralpatel.net/blogs/2008/12/create-jar-file-in-java-eclipse.html](http://viralpatel.net/blogs/2008/12/create-jar-file-in-java-eclipse.html)

# php - 如何在自定义命名空间中使用 PEAR 库？

> ID：10803939
> 
> 赞同：1
> 
> 时间：2012-05-29T17:32:51.970
> 
> 标签：php, pear, autoload, netldap, spl-autoloader

当我声明了我的自定义命名空间时，我不能使用 PEAR 库。

命名空间和自动加载功能：

```
<?php
namespace ldapwrangler;
function autoload($class_name)
{
  $path = ROOT_DIR . "/inc/" . str_replace('\\', "/", $class_name) . ".class.php";    
  require_once($path);
}
spl_autoload_register('ldapwrangler\autoload');
?> 
```

如果我尝试这样的 ROOT_DIR/inc/ldapwrangler/LDAP.class.php：

```
<?php
namespace ldapwrangler;
require_once 'Net/LDAP2.php';

class LDAP{
    protected $connection;
    protected $defaultSearchBase;

    /**
     * @param $conf conf array containing ldap direction login and server.
     */
    function __construct($conf)
    {
        $this->connection = $this->set_connection($conf);
        $this->defaultSearchBase = $conf['basedn'];
    }
    /**
     * Bind to the directory configured in the $conf array
     * 
     * @param $conf conf array containing ldap direction login and server.
     */ 
    function set_connection($conf)
    {
        $ldap = Net_LDAP2::connect($conf);

        // Testing for connection error
        if (PEAR::isError($ldap)) {
            $msg = 'Could not connect to LDAP server: '.$ldap->getMessage();
            Logging::log_message('error',$msg);
            return false;
        }
        return $ldap;
    }

    //rest of the class...
    }
?> 
```

我收到这样的错误：

> 5 月 29 日 10:03:32 reagand-desktop apache2: PHP 致命错误: require_once(): 无法打开所需的 '/home/reagand/dev/ldap_wrangler/inc/ldapwrangler/Net_LDAP2.class.php' (include_path='.:/ usr/share/php:/usr/share/pear') 在第 18 行的 /home/reagand/dev/ldap_wrangler/config.php

仅供参考，第 18 行是 autoload 函数的 require_once() 部分。

如何告诉 php 不要为 Net_LDAP2 类使用 ldapwrangler 命名空间？或任何其他非 ldapwrangler 类，就此而言。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:08:49.813

声明您正在使用外部命名空间：

```
<?php

namespace ldapwrangler;
use Net_LDAP2;
require_once 'Net/LDAP2.php'; 
```

声明之外的每个类都`namespace`需要通过`use`关键字声明。

还请查看[PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)，这是一种用于命名空间使用等此类事情的标准。

# javascript - 获取 UL 内的所有 LI

> ID：10803951
> 
> 赞同：0
> 
> 时间：2012-05-29T17:33:39.723
> 
> 标签：javascript, jquery

我试图在`li`里面找到所有`ul`

如果我做

```
console.log(element); 
```

我在萤火虫中得到了 ul 元素输出。

如果我`console.log(element[0]);`不确定。

现在尝试找到我所做`li`的一切：`ul`

```
 $('li', element).each(function (index) {
            console.log(index);
}); 
```

但是我的索引永远不会被输出。

如果我做：

```
$('li', element[0]).each(function (index) {
            console.log(index);
            $(this).data('previousIndex', index);
        }); 
```

我得到太多的索引计数输出到我的控制台。我的 ul 只有 3-4 `li`，但我输出了一些错误的计数。

谁能告诉我我的错误？

**编辑：**

为了提供更多想法，我正在使用可排序插件。这是我执行`children()`. 我不确定为什么会这样。

![在此处输入图像描述](../Images/b98f74f34faa9e95348398d87c804897.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:35:31.467

我假设`element`仍然是 DOM 元素`<ul>`而不是 jQuery 对象。因为如果是，*就不*`element[0]`应该是未定义的。

 *因此，要在 jQuery 上操作 jQuery `element`，首先将其包装在 jQuery 中，然后用于`children('li')`获取直接子级`<li>`或`find('li')`获取所有后代（嵌套）`<li>`

```
//find all children li
$(element).children('li');

//find all descendant li (all nested li)
$(element).find('li'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:35:23.757

由于`li`是 的唯一有效子级`ul`，因此您只需获取`ul`'`children`属性（或`.children()`jQuery 中的方法调用）。*

# android - Android：尝试保存图像时相机没有响应“确定”按钮

> ID：10803961
> 
> 赞同：1
> 
> 时间：2012-05-29T17:34:26.067
> 
> 标签：android, image, camera

我是 android 新手，我正在尝试制作一部分代码来保存我的应用程序拍摄的图像，该应用程序使用默认的 android 相机。一旦我退出相机，我希望图像显示在不同的活动中。现在，如果我不保存它，一旦退出相机模式就会显示图像。但是如果我也尝试保存它，相机根本不会退出并且“确定”按钮没有响应。我正在尝试构建一个应用程序，它可以拍照并将其附加到电子邮件中，并将其与 GPS 位置数据一起发送。因此，开关盒的“发送消息”部分就是出于这个原因。

```
 public void onClick(View v) {

    // TODO Auto-generated method stub
    switch (v.getId()) {

    case R.id.Picture:
        File file = new File(Environment.getExternalStorageDirectory().getPath() + "/My Images/" + "bhe_app" + ".jpg");
        Uri imageUri = Uri.fromFile(file);

        i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        i.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);

        startActivityForResult(i, cameraData);

        break;

    case R.id.SendMessage:  //Sending message part 

        EditTextToString();

        EmailIntent = new Intent(android.content.Intent.ACTION_SEND);

        EmailIntent.putExtra(Intent.EXTRA_EMAIL,
                new String[] { "myEmail@gmail.com" });
        EmailIntent.putExtra(android.content.Intent.EXTRA_TEXT,
                MessageToBeReceived);
        EmailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "@"+Lattitude_data +"," +Longitude_data);

        // EmailIntent.setType("message/rfc822");
        EmailIntent.setType("image/jpeg");
        // EmailIntent.putExtra(Intent.EXTRA_STREAM, fileUri);

        startActivity(Intent.createChooser(EmailIntent,
                "Choose an Email client :"));
        break;

    }

}
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK) {
        Bundle extras = data.getExtras();
        bmp = (Bitmap) extras.get("data");
        iv.setImageBitmap(bmp);
        //iv is an image view in an activity where I display the image taken.
    //bmp is defined as being Bitmap.
    //  final static int cameraData =0

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T09:39:18.390

你忘了创建你写图像的目录。在创建文件对象之前添加此行。

```
File path = new File(Environment.getExternalStorageDirectory().getPath() + "/My Images/").
path.mkdirs(); 
```

# sql - 获取 BIT 列的 MAX 值

> ID：10803968
> 
> 赞同：60
> 
> 时间：2012-05-29T17:34:48.207
> 
> 标签：sql, sql-server, tsql, sql-server-2008, stored-procedures

我有一个 SELECT 请求，连接表中的“内部连接”是位类型的列。

如果连接表中最多一个值为 1，我想选择 1。如果不是这种情况，则值为 0。

所以如果我有：

```
PERSID | NAME
1      |  Toto
2      |  Titi
3      |  Tata 
```

第二张桌子

```
PERSID | BOOL
1      |  0
1      |  0
2      |  0
2      |  1 
```

我想有结果

```
Toto -> 0
Titi -> 1
Tata -> 0 
```

我试试这个：

```
SELECT 
     sur.*
    ,MAX(bo.BOOL)    

    FROM SURNAME sur              
    INNER JOIN BOOL bo
    ON bo.IDPERS = sur.IDPERS 
```

但是 MAX 在 BIT 列上不可用。那么我该怎么做呢？

谢谢，

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-05-29T17:37:01.007

您可以将其转换为 a ，如果需要`INT`，甚至可以将其转换回 a`BIT`

```
SELECT 
     sur.*
    ,CAST(MAX(CAST(bo.BOOL as INT)) AS BIT)
    FROM SURNAME sur              
    INNER JOIN BOOL bo
    ON bo.IDPERS = sur.IDPERS 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-29T17:36:24.600

尝试：

```
max(cast(bo.BOOL as int)) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-29T17:37:44.990

单程

```
SELECT 
     sur.*
    ,MAX(convert(tinyint,bo.BOOL))    

    FROM SURNAME sur              
    INNER JOIN BOOL bo
    ON bo.IDPERS = sur.IDPERS 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-10-04T12:37:40.320

您可以通过强制隐式转换来避免看起来凌乱的双重转换：

```
SELECT 
     sur.*
    ,CAST(MAX(1 * bo.BOOL) AS BIT)
    FROM SURNAME sur              
    INNER JOIN BOOL bo
    ON bo.IDPERS = sur.IDPERS 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T18:13:11.700

如果您只想要那些*只有*一个设置位的人：

```
declare @Surname as Table ( PersId Int, Name VarChar(10) )
insert into @Surname ( PersId, Name ) values
  ( 1, 'Toto' ), ( 2, 'Titi' ), ( 3, 'Tata' ), ( 4, 'Tutu' )

declare @Bool as Table ( PersId Int, Bool Bit )
insert into @Bool ( PersId, Bool ) values
  ( 1, 0 ), ( 1, 0 ),
  ( 2, 0 ), ( 2, 1 ),
  ( 4, 1 ), ( 4, 0 ), ( 4, 1 )

select Sur.PersId, Sur.Name, Sum( Cast( Bo.Bool as Int ) ) as [Sum],
  case Sum( Cast( Bo.Bool as Int ) )
    when 1 then 1
    else 0
    end as [Only One]
  from @Surname as Sur left outer join
    @Bool as Bo on Bo.PersId = Sur.PersId
  group by Sur.PersId, Sur.Name
  order by Sur.Name 
```

# android - 以编程方式在 Android 中使应用程序全屏显示

> ID：10803973
> 
> 赞同：28
> 
> 时间：2012-05-29T17:35:13.830
> 
> 标签：android, android-layout, android-activity

我知道可以通过活动清单中的标记使应用程序全屏显示`android:theme="@android:style/Theme.NoTitleBar.Fullscreen"`是否可以从应用程序内以编程方式切换到全屏模式？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-05-29T17:36:34.970

添加两行...

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
setContentView(R.layout.main); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-08-18T09:50:48.073

您可以创建新样式并添加

`<item name="android:windowFullscreen">true</item>`

或者您可以以编程方式执行此操作：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-29T17:41:25.570

在 setContentView 之前的 Activity onCreate 中添加：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // remove title
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.main);
} 
```

在 AndroidManifest.xml 文件中：

```
<activity android:name=".ActivityName"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen">
</activity> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-26T18:32:12.500

如果您需要全屏沉浸式模式（用于游戏、画廊等），这是我使用和推荐的解决方案。

最有效的方法是仅在需要时设置 SystemUIVisibility：

1.  在你的 onCreate()
2.  全屏模式丢失时使用 OnSystemUIChangeListener

公共类 BaseActivity 扩展 Activity {

```
@SuppressLint("InlinedApi")
private static final int UI_OPTIONS = View.SYSTEM_UI_FLAG_LOW_PROFILE
        | View.SYSTEM_UI_FLAG_FULLSCREEN
        | View.SYSTEM_UI_FLAG_LAYOUT_STABLE
        | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY
        | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION
        | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION;        

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Step 1
    hideSystemUI();

    // Step 2
    getWindow().getDecorView()
               .setOnSystemUiVisibilityChangeListener(new View
               .OnSystemUiVisibilityChangeListener() {
        @Override
        public void onSystemUiVisibilityChange(int visibility) {
            if ((visibility & View.SYSTEM_UI_FLAG_FULLSCREEN) == 0) {
                hideSystemUI();
            }
        }
    });
}

private void hideSystemUI() {
    ActionBar actionBar = getSupportActionBar();
    if (actionBar != null) actionBar.hide();
    getWindow().getDecorView().setSystemUiVisibility(UI_OPTIONS);
} 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-29T12:27:46.713

试试这个，

```
// remove title
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                     WindowManager.LayoutParams.FLAG_FULLSCREEN);
                     setContentView(R.layout.main); 
```

或者

```
<activity android:name=".ActivityName"
 android:label="@string/app_name"
 android:theme="@android:style/Theme.NoTitleBar.Fullscreen"/> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-09T11:46:16.707

在 onCreate() 方法中写

> requestWindowFeature(Window.FEATURE_NO_TITLE); this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);

# c++ - WhiteThresholdImage魔法

> ID：10803974
> 
> 赞同：0
> 
> 时间：2012-05-29T17:35:14.087
> 
> 标签：c++, visual-c++, graphicsmagick, magickwand, magick++

**如何将 WhiteThresholdImage 与 magick++ 一起使用？**

我搜索它并找到了解决方案，所以我尝试：

```
#include <Magick++.h>  
using namespace Magick;  

int main()  
{  
    Magick::InitializeMagick("");  
    Image image;  
    image.read("logo.jpg");  
    char* threshold = 20;  
    MagickLib::WhiteThresholdImage(image, threshold);  
} 
```

错误：无法将 'Magick::Image' 转换为 'MagickLib::Image* {aka MagickLib::_Image*}' 以将参数 '1' 转换为 'unsigned int MagickLib::WhiteThresholdImage(MagickLib::Image*, const char*) '</p>

```
 #include   
    using namespace Magick;  

    int main()  
    {  
        Magick::InitializeMagick("");  
        Image image;  
        image.read("logo.jpg");  
        char* threshold = 20;  
        WhiteThresholdImage(image, threshold);  
    } 
```

错误：未在此范围内声明“WhiteThresholdImage”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:42:51.977

您将 C API 与 C++ API 混合在一起，它们不能像那样混合。

WhiteThresholdImage() 函数不通过 Magick++ 公开。但是，quantumOperator() 方法可以做同样的事情（甚至更多）。以下将白色阈值像素超过 20% 的数值范围变为白色：

```
image.quantumOperator(AllChannels, ThresholdWhiteQuantumOp, 0.20*MaxRGB); 
```

# documentation - 如何配置 Natural Docs 以支持 Lua 语言？

> ID：10803981
> 
> 赞同：2
> 
> 时间：2012-05-29T17:35:46.087
> 
> 标签：documentation, lua

Natural Docs 是一个支持多种语言的文档生成器。但其中之一，不是 Lua。Natural Docs 有一个语言配置文件，允许它添加新的语言。

到目前为止，我已经在我的配置文件中添加了以下几行：

```
Language: Lua
  Extension: lua
  Line Comment: -- //
  Block Comment: [[ ]] --[[ --]] --[[ ]]
  Function Prototype Enders: end \n
  Variable Prototype Ender: \n 
```

但在运行 Natural Docs 后，文档只显示一个空网页。我一直在互联网上寻找解决方案，但我只发现“Languages.txt”文件的不同配置（不同的函数原型结束符、块注释符号等）

除此之外，我没有从默认设置中修改任何内容。

我还缺少其他东西吗？

# macos - osx 中的 .app 扩展产生了一个经典的应用程序，与需要 .app 的 python 2.7 冲突

> ID：10803983
> 
> 赞同：1
> 
> 时间：2012-05-29T17:36:02.800
> 
> 标签：macos, google-app-engine, python-2.7

[https://developers.google.com/appengine/docs/python/python27/using27](https://developers.google.com/appengine/docs/python/python27/using27)

上面的链接要求将 python 文件命名为“main.app”之类的名称，但 Mac OSX Lion 将此类文件视为“经典”Mac 应用程序。我也尝试将 python 文件命名为“main.application”，但仍然在 googleapps 日志中收到相同的错误消息，如下所示，并告诉我它们不是模块“main”。

```
ERROR    2012-05-29 17:10:35,136 wsgi.py:189]   
Traceback (most recent call last):
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/wsgi.py", line 187, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())  
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/wsgi.py", line 225, in _LoadHandler
    handler = __import__(path[0])  
ImportError: No module named main  
INFO     2012-05-29 17:10:35,143 dev_appserver.py:2904] "GET / HTTP/1.1" 500 - 
```

我的 app.yaml 文件如下。

```
application: shoppinglist
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /.*
  script: main.application

libraries:
- name: webapp2
  version: "2.5.1"
- name: django
  version: "1.3"
- name: PIL
  version: latest 
```

我究竟做错了什么？

布赖恩在亚特兰大

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T17:38:15.623

您没有将文件命名为“main.app”；这是 WSGI 应用程序的名称，它在文件“main.py”中定义`app`（或者，在您的情况下，`application`没有任何名称）。`app`

# python - 用 Python 解析 JavaScript href

> ID：10803991
> 
> 赞同：0
> 
> 时间：2012-05-29T17:36:33.947
> 
> 标签：python, parsing, beautifulsoup

在这方面遇到了很多麻烦......如果我只是不知道正确的搜索词来自己查找信息，那么对 Python 来说很抱歉。我什至不肯定这是因为 JS，但这是我有的最好的主意。

这是我正在解析的 HTML 部分：

```
...
<div class="promotion">
    <div class="address">
        <a href="javascript:PropDetail2('57795471:MRMLS')" title="View property detail for 5203 Alhama Drive">5203 Alhama Drive</a>
    </div>
</div>
... 
```

...以及我用来做这件事的 Python（这个版本是我最接近成功的版本）：

```
homeFinderSoup = BeautifulSoup(open("homeFinderHTML.html"), "html5lib")
addressClass = homeFinderSoup.find_all('div', 'address')
for row in addressClass:
    print row.get('href') 
```

...返回

```
None
None
None 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:03:56.943

```
# Create soup from the html. (Here I am assuming that you have already read the file into
# the variable "html" as a string).
soup = BeautifulSoup(html) 
# Find all divs with class="address"
address_class = soup.find_all('div', {"class": "address"})
# Loop over the results
for row in address_class:
  # Each result has one <a> tag, and we need to get the href property from it.
  print row.find('a').get('href') 
```

# php - AJAX简单的相同文件刷新

> ID：10803994
> 
> 赞同：0
> 
> 时间：2012-05-29T17:36:38.187
> 
> 标签：php, javascript, jquery, ajax

我现在没有办法测试这个，但我很好奇。使用 AJAX，您可以打开与 AJAX 调用相同的文件吗？我的目标是使用新的 POST 参数重新加载页面，无需刷新且仅使用一个文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:43:51.930

是的你可以。

我只是问你，为什么不重新加载页面，而是根据对 ajax 调用的响应重新加载/重建/销毁并创建所需的元素？根据您想要的结果，您可能希望这样做更好。用户方面的工作更多，但“web 2.0”体验更好。

# javascript - 列总和

> ID：10803996
> 
> 赞同：1
> 
> 时间：2012-05-29T17:36:43.050
> 
> 标签：javascript, jquery, ajax

请在此处参考上一个问题：[Sum total for column in jQuery](https://stackoverflow.com/questions/10802244/sum-total-for-column-in-jquery)

我使用了 Aymen 的解决方案，但我对其进行了编辑以满足我的需要。它停止工作，我的代码如下所示在 jsfiddle：http: [//jsfiddle.net/unKDk/15/](http://jsfiddle.net/unKDk/15/)

```
<table id="sum_table" width="300" border="1">
    <tr class="titlerow">
        <td>Apple</td>
        <td>Orange</td>
        <td>Watermelon</td>
        <td>Strawberry</td>
        <td>Total By Row</td>
    </tr>
    <tr>
        <td class="rowAA">1</td>
        <td class="rowAA">2</td>
        <td class="rowBB">3</td>
        <td class="rowBB">4</td>
        <td class="totalRow"></td>
    </tr>
    <tr>
        <td class="rowAA">1</td>
        <td class="rowAA">2</td>
        <td class="rowBB">3</td>
        <td class="rowBB">4</td>
        <td class="totalRow"></td>
    </tr>
    <tr>
        <td class="rowAA">1</td>
        <td class="rowAA">5</td>
        <td class="rowBB">3</td>
        <td class="rowBB">4</td>
        <td class="totalRow"></td>
    </tr>
    <tr class="totalColumn">
        <td class="totalCol">Total:</td>
        <td class="totalCol">Total:</td>
        <td class="totalCol">Total:</td>
        <td class="totalCol">Total:</td>
        <td class="totalCol">Total:</td>
    </tr>
</table> 
```

jQuery部分是

```
var totals=[0,0,0,0,0];
$(document).ready(function(){

    var $dataRows=$("#sum_table tr:not('.totalColumn, .titlerow')");

    $dataRows.each(function() {
        $(this).find('.rowAA').each(function(i){        
            totals[i]+=parseInt( $(this).html());
        });

        $(this).find('.rowBB').each(function(i){        
            totals[i]+=parseInt( $(this).html());
        });        
    });
    $("#sum_table td.totalCol").each(function(i){  
        $(this).html("total:"+totals[i]);
    });

}); 
```

1.  如何解决导致jquery计算错误的问题。
2.  如何按行计算总数
3.  我需要完全相同的类名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T17:43:05.377

我不太确定您想要什么，但是如果您只想按列对所有行求和，请参见下文..

```
var totalsByRow = [0, 0, 0, 0, 0];
var totalsByCol = [0, 0, 0, 0, 0];
$(document).ready(function() {

    var $dataRows = $("#sum_table tr:not('.totalColumn, .titlerow')");

    $dataRows.each(function(i) {
        $(this).find('td:not(.totalRow)').each(function(j) {
            totalsByCol[j] += parseInt($(this).html());
            totalsByRow[i] += parseInt($(this).html());
        });
    });

    for (var i = 0; i < totalsByCol.length - 1; i++) {
        totalsByCol[totalsByCol.length - 1] += totalsByCol[i];       
    }    

    $("#sum_table td.totalCol").each(function(i) {
        $(this).html("total:" + totalsByCol[i]);
    });

    $("#sum_table td.totalRow").each(function(i) {
        $(this).html("total:" + totalsByRow[i]);
    });
}); 
```

[**演示**](http://jsfiddle.net/unKDk/21/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:42:37.580

本质上，您希望定位`td`中间行中的所有元素。每次循环遍历 new`td`时，您都希望将其值添加到其行中的最后一个 td （除非它是该`td`行中的最后一个），以及`td`共享其索引的最后一行中的值。

```
$("#sum_table tr:not(:first,:last)").each(function(c,row) {
  $("td",row).text(function(i,t) {
    var n = parseInt( t, 10 ) || 0;
    $(this).nextAll(":last-child").text(function(a,o) {
      return n + ( parseInt( o, 10 ) || 0 );
    });
    $(row).nextAll("tr:last").find("td:nth-child("+(++i)+")").text(function(a,o){
      return "Total: " + ( n + ( parseInt( o.replace(/[^\d]/g,""), 10 ) || 0 ) );
    });
  });
}); 
```

​这应该适用于任何大小的任何表格，而不是将您限制为 x 列或 y 行。

小提琴：http: [//jsfiddle.net/unKDk/34/](http://jsfiddle.net/unKDk/34/)

### 附解说

我鼓励您阅读下面示例中的注释，因为它们将帮助您了解每一行的内容。

```
// For each table row that is not first or last
$("#sum_table tr:not(:first,:last)").each(function(c,row) {
  // For each td within this row
  $("td",row).text(function(i,t) {
    // Determine numerical value of this td's content
    var n = parseInt( t, 10 ) || 0;
    // Find last td in this row, change its text
    $(this).nextAll(":last-child").text(function(a,o) {
      // Increment its value with the value of current TD
      return n + ( parseInt( o, 10 ) || 0 );
    });
    // Find last row, and td within of same index as current td, change its text
    $(row).nextAll("tr:last").find("td:nth-child("+(++i)+")").text(function(a,o){
      // Increment its value (removing non-numbers) with the value of current td
      return "Total: " + ( n + ( parseInt( o.replace(/[^\d]/g,""), 10 ) || 0 ) );
    });
  // End our td loop
  });
// End our tr loop
}); 
```

# javascript - Eclipse 中的 JSDoc 自动完成文档不适用于 Class.create()

> ID：10803998
> 
> 赞同：2
> 
> 时间：2012-05-29T17:36:45.507
> 
> 标签：javascript, eclipse, documentation, prototypejs, jsdoc

我有类似的东西：

```
/**
* @class
*/
NS.MyAwesomeObject = Class.create();

NS.MyAwesomeObject.prototype = {
 /**
 * @param id - the id
 * @return - an alert dialog with an id
 */
 initialize : function(id){
    alert(id);
 }
} 
```

我错过了什么吗？我起床到NS。-> 自动完成：MyAwesomeObject，但我想要 NS.MyAwesomeObject。-> 自动完成：初始化（id）。

当我不使用 Class.create() 时，它适用于其他情况。我用谷歌搜索，[解决方案](http://code.google.com/p/jsdoc-toolkit/issues/detail?id=164)是添加@class，但这对我不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T14:31:00.017

它对我有用。顺便说一句，Eclipse 没有 jsDoc 3 支持。使用 jsDoc 3，您的代码如下所示：

```
var NS = {};

/** @class */
NS.MyAwesomeObject = Class.create(
    /** @lends NS.MyAwesomeObject.prototype */
    {
        /**
         * @constructs
         * @param {Number} id - the id
         * @returns {Void} - an alert dialog with an id
         */
        initialize:function (id) {
            alert(id);
        }
    }); 
```

jsDoc 3 的代码完成现在仅适用于 WebStorm（或其他 Jetbrains 产品）。

[Oo 任何 IDE 中的 javascript 代码完成](https://stackoverflow.com/questions/12446896/oo-javascript-code-completion-in-any-ide/12469427#12469427)（也有这个问题。）