# StackOverflow 问答 10488000-10488999

# r - 如何将相同长度的列表合并为一个？

> ID：10488001
> 
> 赞同：3
> 
> 时间：2012-05-07T19:36:02.440
> 
> 标签：r, list

假设我有两个列表：

```
 xx <- as.list(1:3)
 yy <- as.list(LETTERS[1:3]) 
```

如何将两者结合起来，使新列表的每个元素都是每个组件列表的相应元素的列表。因此，如果我将上述两者结合起来，我应该得到：

```
> combined_list
[[1]]
[[1]][[1]]
[1] 1

[[1]][[2]]
[1] "a"

[[2]]
[[2]][[1]]
[1] 2

[[2]][[2]]
[1] "b"

[[3]]
[[3]][[1]]
[1] 3

[[3]][[2]]
[1] "c" 
```

如果您可以提出解决方案，我想将其扩展到 3 或更多。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T19:44:07.717

这应该可以解决问题。很好，`mapply()`将采用任意数量的列表作为参数。

```
xx <- as.list(1:3)
yy <- as.list(LETTERS[1:3])
zz <- rnorm(3)

mapply(list, xx, yy, zz, SIMPLIFY=FALSE) 
```

# python - 单纯形噪声似乎只是给出随机结果

> ID：10488005
> 
> 赞同：2
> 
> 时间：2012-05-07T19:36:12.130
> 
> 标签：python, simplex-noise

我试图让我的单纯形噪声（基本上是复杂度更高的 perlin 噪声）工作并给我一些像这样的好东西：

![柏林噪声](../Images/7eb822e5308a8ea5ae3598f9440efb6d.png)

然而，我得到的只是看似随机的东西：

![蚂蚁大战](../Images/cfbd5691711482afb4525e4768cbe60b.png)

我正在使用[这里](http://code.google.com/p/battlestar-tux/source/browse/procedural/simplexnoise.py)的单纯形代码，并像这样使用它：

```
def generate(self):
    columns = []
    for x in range(0, self.width):
        rows = []
        for y in range(0, self.height):
            val = simplex.scaled_raw_noise_2d(0, 254, x, y)
            rows.append(val)
        columns.append(rows)
    return columns 
```

相当简单，但似乎我错过了一些东西。不知道是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T00:23:43.400

这是一个古老的问题，但不能不回答！当然，对于访客来说，即使你自己已经弄清楚了。

我对python没有太多经验，但在我看来问题是频率太高，准确地说是1.0。或者换句话说，噪声被缩小得太远导致噪声混叠。

要“放大”，需要降低频率。假设在您的库中没有其他方法可以做到这一点，这看起来像这样。

```
def generate(self):
    columns = []
    frequency = 1 / 10  # zoom in 10 times
    for x in range(0, self.width):
        rows = []
        for y in range(0, self.height):
            val = simplex.scaled_raw_noise_2d(0, 254, x * frequency, y * frequency)
            rows.append(val)
        columns.append(rows)
    return columns 
```

只是为了说明，这就是多倍频程噪声（看起来像浮云的东西）的工作原理，它在多个倍频程或 2 的幂（有时被错误地称为 octaves 的空缺的幂）上操纵噪声的频率变量）然后将它们加在一起并标准化或缩放到适当的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:17:02.320

我想你应该简单地把你的代码写成

```
def generate(self):
    return simplex.scaled_raw_noise_2d(0, 254, range(0, self.width), 
                                       range(0, self.width)) 
```

# scala - Scala 2.10 里程碑中的 toArray

> ID：10488007
> 
> 赞同：5
> 
> 时间：2012-05-07T19:36:19.530
> 
> 标签：scala, toarray, scala-2.10

以下 Scala 代码在 Scala 2.9 中运行良好，但在 Scala 2.10 Milestone 中会产生编译器错误。谁能给我一个提示如何创建一个 ArrayTag：

```
type Lit = Array[Int]
var list = List[Lit].empty
list ::= Array(1,2,3)
list ::= Array(4,5)
val arr = list.toArray 
```

Scala 2.10 中的错误消息是“没有可用于 Lit 的 ArrayTag”。

另外，我应该总是为新类型创建一个新的 ArrayTag 吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T20:58:19.030

这是一个错误，我已经提交了：[https ://issues.scala-lang.org/browse/SI-5769](https://issues.scala-lang.org/browse/SI-5769)

# iis - 配置 signalR 以在 IIS6 中工作

> ID：10488008
> 
> 赞同：2
> 
> 时间：2012-05-07T19:36:22.783
> 
> 标签：iis, asp.net-ajax, signalr

我正在开发一个 signalR 项目，并且在部署到运行 IIS6（Windows Server 2003）的服务器时遇到了 HTTP 404 错误。404 在信号器/集线器参考上。JabbR 聊天室中建议在 IIS 中添加通配符映射（* 到 aspnet_isapi）以解决该问题。这确实解决了 404 问题，但我开始收到错误“ASP.NET Ajax 客户端框架无法加载”。

如果我取消通配符，AJAX 会按预期加载和运行。我必须相信这种映射不是正确的方法；也许有一个处理程序需要在 web.config 文件中注册。

值得注意的是，整个解决方案在我的本地（Windows 7）开发机器上完美运行。

# asp.net - 我如何更改 DataPager 控件中的第一个和最后一个按钮的位置

> ID：10488019
> 
> 赞同：0
> 
> 时间：2012-05-07T19:36:49.337
> 
> 标签：asp.net, css, datapager

如何更改 DataPager 控件中元素的位置

我怎样才能得到这个订单

<< < 1 2 3 4 5 ... > >>

![在此处输入图像描述](../Images/a5152022eba0ababf3b5b2f750ee1c21.png)

这是我的代码

```
 <asp:DataPager ID="DataPager1" runat="server" PagedControlID="" PageSize="10"  >

        <Fields>
        <asp:NextPreviousPagerField
           ShowFirstPageButton="True"
           ButtonCssClass="" ButtonType="Link"
           FirstPageText="<<" LastPageText="<<"
           NextPageText=">" PreviousPageText="<"
           ShowLastPageButton="True" ShowNextPageButton="True"
           ShowPreviousPageButton="True" />

             <asp:NumericPagerField
                     ButtonType="Link"
                 PreviousPageText="privuse"
                       RenderNonBreakingSpacesBetweenControls="False"/> 

            </Fields>

  </asp:DataPager> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:48:22.803

好的，搜索后我资助答案

这是我编辑后的代码

```
 <asp:DataPager ID="DataPager1" runat="server" PagedControlID="" PageSize="10"  >

        <Fields>

        <asp:NextPreviousPagerField
             ButtonType="Link"
           LastPageText="<<"
         PreviousPageText="<"
           ShowLastPageButton="True"
             ShowPreviousPageButton="True" />

             <asp:NumericPagerField
                     ButtonType="Link"
                         PreviousPageText="privuse"
                         RenderNonBreakingSpacesBetweenControls="False"
        /> 

            <asp:NextPreviousPagerField
            ShowFirstPageButton="True"
            ButtonType="Link"
           FirstPageText=">>" 
            NextPageText=">"
           ShowNextPageButton="True" />

            </Fields>

  </asp:DataPager> 
```

# php - 带有 php zend 框架的谷歌应用程序（云）

> ID：10488021
> 
> 赞同：0
> 
> 时间：2012-05-07T19:37:00.130
> 
> 标签：php, mysql, google-app-engine, zend-framework

我只是想知道如何将我的 php zend 框架 web 应用程序上传到谷歌云，我尝试了很多东西，但仍然没有任何帮助，它不是一个大的 web 应用程序，但我仍然有一个数据库，而不是一个大的，尝试下载 appengine-java-sdk 并解决它。但是java sdk不会上传到谷歌？？？我读了这篇文章[http://www.webdigi.co.uk/blog/2009/run-php-on-the-google-app-engine/](http://www.webdigi.co.uk/blog/2009/run-php-on-the-google-app-engine/) 如果 jdk 在我的 Windows 7 上运行会很有意义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:27:44.120

Google App Engine 主要设计用于运行 Python 和 Java Web 应用程序。它并非旨在成为 PHP 托管服务，并且大多数 PHP 应用程序在未经重大修改的情况下将无法在 GAE 下运行。

（**注意：**这个问题是在 Google 于 2013 年 5 月[为 Google App Engine 引入 PHP 运行时](https://developers.google.com/appengine/docs/php/)之前提出的。现在*可以*在其上运行 PHP 应用程序，但有一些限制；请阅读链接文档了解详细信息！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-02T23:48:50.523

截至 2013 年 11 月，Google App Engine 确实有一个 PHP 运行时。我确实有几个 Zend 项目作为 GAE 应用程序运行。设置它也很容易。不需要那些可爱的 .htaccess 文件。这是我的 app.yaml 的配置方式：

```
application: current-freelance-gig-prj 
version: 1 
runtime: php 
api_version: 1 

handlers: 
- url: /img 
  static_dir: public/img 

- url: /js 
  static_dir: public/js 

- url: /css 
  static_dir: public/css 

- url: /.* 
  script: public/index.php 
```

我确信可能有一种更聪明的方法来列出所有这些静态目录，可能会将它们折叠成一个条目，但是，这仍然比 Apache 的重写规则更容易理解。

# batch-file - 在 DOS 批处理中使用空格和 () 解析文件名

> ID：10488025
> 
> 赞同：0
> 
> 时间：2012-05-07T19:37:21.870
> 
> 标签：batch-file, dos

如何在带有空格和“（”“）”的文件名上运行此批处理脚本？

```
:Start
@Echo off
Set _SourcePath=C:\tifs\*.tif
Set _OutputPath=C:\txts\
Set _Tesseract="C:\Program Files\Tesseract-OCR\tesseract.exe"
:Convert
For /F "usebackq delims=" %%A in (%_SourcePath%) Do Echo Converting %%A...&%_Tesseract% %%A %_OutputPath%%%~nA
:End   
Set "_SourcePath="
Set "_OutputPath="
Set "_Tesseract=" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:29:35.407

你有2个问题：

1）您需要一些额外的报价。

2) 你使用了错误的 FOR 形式。您的代码使用带有未引用的 IN() 子句的 /F 选项。这会尝试读取文件的内容，但由于您的名称包含通配符，这可能无法正常工作。我认为您想要一个 .TIF 文件列表，最好使用 FOR 的简单形式（无 /F 选项）来完成。

```
for %%A in (%_SourcePath%) do echo Converting "%%A"...&%_Tesseract% "%%A" "%_OutputPath%%%~nA" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:41:00.083

我会把它改成这样：

```
:Start
@Echo off
SETLOCAL ENABLEEXTENSIONS
SETLOCAL ENABLEDELAYEDEXPANSION
Set _SourcePath=C:\tifs\*.tif
Set _OutputPath=C:\txts\
Set "_Tesseract=C:\Program Files\Tesseract-OCR\tesseract.exe"
:Convert
For /F "usebackq delims=" %%A in (%_SourcePath%) Do Echo Converting %%A...&%_Tesseract% "%%A" "%_OutputPath%%%~nA"
:End   
Set "_SourcePath="
Set "_OutputPath="
Set "_Tesseract=" 
```

现在，我的回答可能行不通，但我认为它可能会给你足够的提示来弄清楚。

# ruby-on-rails - gem make_flaggable

> ID：10488028
> 
> 赞同：2
> 
> 时间：2012-05-07T19:37:34.867
> 
> 标签：ruby-on-rails

我目前正在按照[http://www.youtube.com/watch?v=GG-kCSx0taU&feature=related](http://www.youtube.com/watch?v=GG-kCSx0taU&feature=related)上的教程实施类似按钮，其中说我应该安装 gem 'make_flaggable', :git => 'git ://github.com/cavneb/make_flaggable.git'，当在我的gem文件中输入这个并运行'bundle install'时，我得到下面的错误，然后我运行bundle update，我得到另一个错误。关于如何解决这个问题的任何想法？谢谢

```
Bundler could not find compatible versions for gem "activerecord":   In Gemfile:
    make_flaggable (>= 0) ruby depends on
      activerecord (~> 3.0.0) ruby

    rails (= 3.2.1) ruby depends on
      activerecord (3.2.1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T23:12:44.370

您可以从[github.com/jaimeiniesta/make_flaggable](https://github.com/jaimeiniesta/make_flaggable)获得非常棒的 fork 。这很可能会让你摆脱这个错误。

感谢[jaimeiniesta](https://github.com/jaimeiniesta)的叉子...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-04T07:11:03.847

```
gem 'make_flaggable', :git => 'git://github.com/medihack/make_flaggable.git' 
```

为我工作。

# android - toDataURL 在安卓浏览器上不起作用

> ID：10488033
> 
> 赞同：6
> 
> 时间：2012-05-07T19:37:56.870
> 
> 标签：android, html, canvas

我有一个用户在画布上绘制的图像，我想将该图像保存在服务器上。

这些行在我的 ipad 上运行良好，但在我的 android(ver 2.3.3) 浏览器上运行良好：

```
var testCanvas = document.getElementById("sketchpad");  
var canvasData = testCanvas.toDataURL("image/png"); 
```

如果我提醒 canvasData 我只会得到：

> 数据：，

我错过了什么吗？是否可以在 android 上做，或者我应该看看其他方法、插件等？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T14:06:09.620

不幸的是，您的版本不支持它（我认为它仅在 ICS 中受支持），请查看报告的这个问题

[http://code.google.com/p/android/issues/detail?id=16829](http://code.google.com/p/android/issues/detail?id=16829)

应该有某种 JavaScript 实现来添加对它的支持，但我自己没有尝试过

[http://code.google.com/p/todataurl-png-js/](http://code.google.com/p/todataurl-png-js/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T10:32:11.217

不幸的是 toDataURL() 仅适用于 android 3.2 或更高版本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T16:10:03.763

这篇博文中描述了我们在多个 Android 手机上成功使用而无需修改的替代实现：

[http://jimdoescode.blogspot.co.uk/2011/11/trials-and-tribulations-with-html5.html](http://jimdoescode.blogspot.co.uk/2011/11/trials-and-tribulations-with-html5.html)

如果它工作正常，这将使用 toDataURL 方法，如果没有，则使用 javascript jpg 编码库来生成图像。

# c# - 在 Metro 风格应用程序上导航到新页面时获取值

> ID：10488036
> 
> 赞同：0
> 
> 时间：2012-05-07T19:38:04.563
> 
> 标签：c#, xaml, windows-runtime, winrt-xaml

[这是对这个问题](https://stackoverflow.com/questions/10413387/save-the-page-state-when-navigating-out)的某种跟进。

假设我有一个用户可以填写的表单，带有一个 ComboBox。组合框旁边有一个按钮。此按钮允许转到一个新页面，用户可以在其中管理组合框中存在的项目。如果用户添加了一个新项目然后导航回来，我想在组合框中选择这个新项目。

在 Android 上，我会使用[startActivityForResult()](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)来启动一个新活动，并在表单页面重新出现时取回新项目。

如何在 Metro 应用程序中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:01:02.813

您可以在导航到新页面之前在 App.cs 中创建一个全局变量，将值分配给全局变量。导航到新页面后，从全局变量中检索值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:30:52.190

您可以覆盖页面中的 OnNavigatedTo 方法并检查 e.NavigationMode == NavigationMode.Back 以确保您从另一个页面导航回来。然后你可以检查内容的变化。

# android - Galaxy Nexus 的编辑文本在横向中始终没有全屏显示

> ID：10488039
> 
> 赞同：1
> 
> 时间：2012-05-07T19:38:22.007
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-softkeyboard

在我的应用程序中，我有一个搜索按钮，单击该按钮将使 EditText 小部件可见，将焦点放在其中并显示键盘。当我这样做时，我称之为代码：

```
queryTextView.requestFocus();
    InputMethodManager imm = Utilities.getInputMethodManagerFromContext(getContext());
    imm.showSoftInput(queryTextView, InputMethodManager.SHOW_FORCED); 
```

这是我期望的第一次在风景中显示：

![工作示例](../Images/86746f4b923408c2eb71f96446466f4e.png)

一旦我输入文本并点击搜索，我将隐藏我的 EditText 并强制关闭键盘。我使用以下代码执行此操作：

```
InputMethodManager imm = Utilities.getInputMethodManagerFromContext(getContext());      
    imm.hideSoftInputFromWindow(getWindowToken(), 0); 
```

如果我再次按下按钮以使 EdidText 可见并再次显示键盘，我的屏幕将如下所示（仅在使用普通 Galaxy Nexus 键盘时）：

![破碎的风景](../Images/7e89f9f21c1af4b487781c48775379a6.png)

使用另一个键盘，例如 SwiftKey，我没有得到这种行为。我可以寻找哪些东西来找出为什么这个软键盘没有完全填满屏幕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:59:31.407

编辑：再三考虑，从您的屏幕截图看来，键盘正试图占据全屏，所以 onEvaluateFullscreenMode 应该返回 true ......也许问题出在某个地方`onCreateExtractTextView`

不是您要查找的内容，但是如果所有其他方法都失败了，也许您可​​以获取 AOSP 键盘源，遍历它并找出是否/为什么[onEvaluateFullscreenMode](http://developer.android.com/reference/android/inputmethodservice/InputMethodService.html#onEvaluateFullscreenMode%28%29)返回，或者根本没有调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-09T14:32:21.267

使用 android:imeOptions="flagNoFullscreen" 来实现该功能。

# c++ - 覆盖专用模板

> ID：10488041
> 
> 赞同：2
> 
> 时间：2012-05-07T19:38:39.420
> 
> 标签：c++, templates, boost, boost-gil

我一直在使用 Boost.GIL 来执行一些基本的图像处理程序。在 Boost.GIL 中，不同类型像素之间的色彩空间转换是通过一个泛型`convert_pixel( )`函数的模板特化来实现的。但是，例如，我很想用基于 LCMS 的东西来覆盖这些实现。

有没有办法覆盖模板的专业化，以便任何内部调用都`convert_pixel()`将使用新的基于 LCMS 的`convert_pixel()`？

# 最终回答

深入研究 GIL 设计手册（比教程更有趣），我发现 Adob​​e 建议如何解决这个问题。对于我们感兴趣的人，此链接提供了答案： http: [//www.boost.org/doc/libs/1_49_0/libs/gil/doc/html/gildesignguide.html#NewColorConversionDG](http://www.boost.org/doc/libs/1_49_0/libs/gil/doc/html/gildesignguide.html#NewColorConversionDG)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:46:16.127

我对 GIL 不熟悉，在文档中只发现了类似的功能。但是，可能不需要回答这个问题。

劫持原始调用，您应该能够覆盖转换。函数优先级应该来挽救这一天：普通函数总是比模板函数更受欢迎。假设原始模板特化是

```
template<> 
GIL_FORCEINLINE void boost::gil::copy_and_convert_pixels (const V1 &src, const V2 &dst, CC cc) { original_code; } 
```

您可以覆盖这个定义您的自定义非模板函数

```
GIL_FORCEINLINE void boost::gil::copy_and_convert_pixels (const V1 &src, const V2 &dst, CC cc) { overridden_code; } 
```

您应该特别注意将函数定义到具有相同名称的相同命名空间中，并在第一次调用之前将其包含在内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:29:59.213

FWIW，请参阅此答案以获取覆盖[示例](https://stackoverflow.com/a/11147193/24283)`boost::gil::color_convert`，以*扩展* `boost::gil::copy_and_convert_pixels`GIL 尚未提供的转换的行为。

我认为你会在尝试*替换*GIL 中定义的现有转换时遇到问题[`color_convert.hpp`](http://www.boost.org/doc/libs/1_49_0/libs/gil/doc/html/g_i_l_0070.html)；可能您想要/需要走的路线是定义一个新的颜色基础 cf rgb_t, cmyk_t （例如 lcms_t ？），然后定义`default_color_converter_impl<rgb_t,lcms_t>`与它互操作的东西。

# javascript - D3 力有向图。鼠标悬停显示标签

> ID：10488042
> 
> 赞同：3
> 
> 时间：2012-05-07T19:38:40.410
> 
> 标签：javascript, d3.js, label, visualization, force-layout

这与[这个问题有关](https://stackoverflow.com/questions/10475977/d3-js-force-directed-graph)。

警告！我是一个菜鸟程序员......非常感谢任何帮助！

我正在使用[http://mbostock.github.com/d3/ex/force.html](http://mbostock.github.com/d3/ex/force.html)在一些 php 生成的 json 数据上生成力导向图。我设法获得了一些代码（//[在 D3 强制有向图中突出显示选定节点、其链接及其子节点](https://stackoverflow.com/questions/8739072/highlight-selected-node-its-links-and-its-children-in-a-d3-js-force-directed-g)），从而在鼠标悬停时，除节点和连接节点之外的所有内容都会消失。这是我当前的代码：

[http://jsfiddle.net/WNHaB/](http://jsfiddle.net/WNHaB/)

我现在想在淡入淡出的同时将标题添加到节点和鼠标悬停的每个子节点。这将大大提高程序的可用性。知道怎么做吗？？？

**更新**

所以感谢 Nachtgold，我得到了节点上的标签，更改了字体颜色和大小。光标碰巧碰到文本标签时发生的闪烁非常烦人。我通过使用`.style("pointer-events", 'none')` 当前版本修复了这个问题：

[http://jsfiddle.net/dfETs/](http://jsfiddle.net/dfETs/)

我仍然想相对于节点移动文本，以免它们重叠。任何想法如何做到这一点？

非常感谢！

# hotkeys - Git Tower 热键（低优先级）

> ID：10488044
> 
> 赞同：4
> 
> 时间：2012-05-07T19:38:45.433
> 
> 标签：hotkeys, git-tower

我和同事都拥有相同版本的 Git Tower，当他专注于未提交的更改并点击空格键时，该文件被暂存以进行提交。当我按下空格键时，什么也没有发生。那是怎么回事？我喜欢我的热键！空格键在我的浏览器中选中复选框，但在 Git Tower 中没有。就像我在标题中所说的那样，这是一个“我很懒，不想使用鼠标，低优先级”的问题。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T11:10:29.230

您需要`Full Keyboard Access`在键盘首选项窗格中启用，请参见下图。复选框（如在 Git Tower 中）通常无法通过键盘焦点进行编辑/选择，因此空格键也不起作用。

![全键盘访问](../Images/58d52d7fc36e53ddd7a01e3a7793d8d5.png)

# jquery - jquery自动完成 - 使用远程数据源的缓慢响应

> ID：10488045
> 
> 赞同：1
> 
> 时间：2012-05-07T19:38:45.990
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我正在使用远程数据源，它是一个数据库查询。查询的最大结果是 1000。我正在使用“term”参数来过滤我的结果，但响应速度很慢。2 个字符实际上还不错，但是如果您键入一个字母，则返回几乎要 3 秒。我从 YUI 切换到 jquery。使用相同的数据源，我在 YUI 上的工作速度要快得多。响应是即时的 1 个字符。有一个更好的方法吗？代码如下。

```
$(function() {

    $("#xContact").autocomplete({
        minLength: 1,
        source: "<$strLower(HttpWebRoot)$>data/employee_lookup.php",
        focus: function( event, ui ) {
            $( "#xContact" ).val( ui.item.label );
            return false;
        },
        select: function( event, ui ) {
            $( "#xContact" ).val( ui.item.label );
            return false;
        }
    })
    .data( "autocomplete" )._renderItem = function( ul, item ) {
        return $( "<li></li>" )
            .data( "item.autocomplete", item )
            .append( "<a>" + item.label + "<br><span style='font-size:0.8em'>" + item.desc + "</span></a>" )
            .appendTo( ul );
    };
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T23:34:38.607

我相信这是处理远程数据源的库的问题

**我的推理**：我使用本地数据源具有完全相同的代码，具有更多数据，并且它会立即呈现在 1 个字符上。我知道这也不是我的远程数据源。如果我直接浏览到执行查询的服务器端页面，它会立即呈现结果。其中一个建议是它很慢，因为它正在为每个结果操作 DOM。好吧，它对本地资源做同样的事情。所以，我不买那个解释。唯一的区别是来源。所以，处理远程数据源肯定会有延迟。有人建议将远程数据源结果放入一个字符串中，然后将其用作源。我不应该那样做。如果可行，它将证明 jquery 不能以相同的方式处理远程数据源。假设我的远程数据源没有导致延迟（事实并非如此），本地和远程之间应该没有区别。它最终是一组数据。所以问题必须是远程数据源的处理和/或呈现

我将 YUI 与相同的远程数据源一起使用，它会立即在 1 个字符上呈现列表。因此，这证明它也不是数据源。我切换到 jquery 是因为我发现它总体上更好。我将查询限制为 250 条记录。它不是即时的，但它会在大约 1 秒内渲染。

# wpf - 如何让指挥家“指挥”？

> ID：10488046
> 
> 赞同：1
> 
> 时间：2012-05-07T19:38:50.333
> 
> 标签：wpf, caliburn.micro

我是 CM 的新手，但 Conductor 似乎是管理应用程序屏幕工作流程的合适模式。我还没有弄清楚如何让指挥，好吧，“指挥”在初始屏幕之外显示的屏幕。

我正在寻找一个可以连接到 CM 指挥器的地方，该指挥器将检测何时关闭屏幕。一旦屏幕被关闭，我可以调用一个类似状态机的类来决定接下来应该显示什么屏幕。这样，每个屏幕都不知道应用程序中的其他屏幕。

即：使用登录屏幕启动，用户登录，指挥收到“屏幕停用”通知，然后询问组件接下来应该显示什么屏幕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:20:15.300

假设您的 shellviewmodel 继承自 ConductorBase，则当前视图绑定到 ActiveItem 属性。要进行，您必须在 shell 上调用 ActivateItem 和 DeactivateItem 现有方法。这将触发执行视图、停用和激活视图模型的魔力。

# php - 如何对字段进行 foreach 插入查询？

> ID：10488047
> 
> 赞同：0
> 
> 时间：2012-05-07T19:38:53.843
> 
> 标签：php, validation, foreach, csv

我有一个字段，我确定输入字段中的条目将类似于 Edward、John、Jacob。

现在，我正在尝试为每个人插入一个新行。我正在这样做：

```
$person = mysql_real_escape_string($_POST['person']);

foreach($person_array as $value) 
{ 
$insert = "INSERT INTO people (Person)
VALUES ('".$value."')";

$query = mysql_query($insert) or die ("Error: ".mysql_error()); 

} 
```

使用上面的查询我无法插入到表中。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T19:45:31.840

如果 $_POST['person'] 确实是这样的值： "John, Edward, Jacob" 那么它只是一个字符串；您需要将其转换为带有爆炸的数组。此外，它应该是 $_POST 而不是 $POST。

```
$person = explode(',', $_POST['person']); 
```

然后你可以运行你的 foreach 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T19:46:30.697

您的输入应如下所示：`<input type="text" name="person[]">`

假设是这种情况，您正在`mysql_real_escape_string`阵列上运行。

试试这个：

```
$person = $POST['person'];
foreach($person as $value) {
    $value = mysql_real_escape_string($value);
    $insert = "INSERT INTO people (Person) VALUES ('$value')";
    $query = mysql_query($insert) or die("Error: ".mysql_error());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T19:48:40.790

正如[DampeS8N](https://stackoverflow.com/users/509610/dampes8n)评论的那样，`mysql_real_escape_string`返回一个字符串。您不能将其应用于`Array`.

此外，[anuragbh](https://stackoverflow.com/users/543331/anuragbh)在您的代码中发现了一个错字，它`$_POST`不是`$POST`.

最后，尝试转义循环中的特殊字符。

```
foreach($_POST['person'] as $value)
{
    $value = mysql_real_escape_string($value);
    //your query here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T19:42:33.770

你得到什么错误？它的主键是自动递增的吗？

还：

```
$person = mysql_real_escape_string($POST['person']); 
```

应该：

```
$person = mysql_real_escape_string($_POST['person']); 
```

# objective-c - 尝试根据与用户默认值的比较来枚举数组并选择对象

> ID：10488055
> 
> 赞同：1
> 
> 时间：2012-05-07T19:39:55.580
> 
> 标签：objective-c, cocoa-touch, nsarray, objective-c-blocks

我有一系列字典，代表抽认卡。其中一个键值对是`pgFinishedNumber`和工作簿中出现抽认卡的页面。用户还可以在应用程序中设置一个值`pagesDone`，来跟踪他们在工作簿中的进度。

我正在使用一个块来通过主闪存卡阵列并将卡片添加到另一个阵列，称为`myDailyArray`. 我想要移动页码大于值的抽认卡`pagesDone`，但我有两个问题。

当多个抽认卡具有相同的页码时，会出现第一个问题。发生这种情况时，只有第一张卡包含在 `myDailyArray`. 第二个问题发生在用户指出他所在的页码没有新的抽认卡时。发生这种情况时，阵列中的下一个抽认卡会提前添加。

我的块的代码在 中`viewWillAppear:`，如下所示：

```
- (void)viewWillAppear:(BOOL)animated {

//......some code

[theLevelArray.level1Array enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop)
{
NSMutableDictionary *dictDaily = [theLevelArray.level1Array objectAtIndex:idx];

[self.myDailyArray addObject:dictDaily];

int pgFinishedNumber = [[dictDaily objectForKey: @"pgFinishedNumber"] intValue];

if (pagesDone <= pgFinishedNumber)
    {
        *stop = YES;
    }  
}]; 
```

例如，工作簿的第 3 页介绍了两张抽认卡。这两张卡的`NSDictionary`s 都具有`3`的值`pgFinishedNumber`。当我输入`3`用户默认值`pagesDone`然后运行应用程序时，只有这两个中的第一个被添加到`myDailyArray`. 当我将 更改为`pagesDone`时`4`，不仅将两个`pgFinishedNumber`值为“3”的抽认卡添加到`myDailyArray`，而且*下一个*对象的`pgFinishedNumber`值为`5`! 我很迷惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:40:31.220

当达到大于或等于 的第一个页码时，您将停止迭代`pagesDone`。这意味着任何可能具有相同页码的后续页面都将被忽略。

`pgFinishedNumber`您应该在大于（但不等于）时停止迭代`pagesDone`并将 if 语句移动到块的顶部（在添加页面之前）。

我认为这也应该解决您的第二个问题，我认为这是由于 if 语句位于块的末尾。

像这样的东西应该工作：

```
NSArray *levelArray = [NSArray arrayWithObjects:
        [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithInt:1], @"pgFinishedNumber", nil],
        [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithInt:2], @"pgFinishedNumber", nil],
        [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithInt:3], @"pgFinishedNumber", nil],
        [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithInt:5], @"pgFinishedNumber", nil], nil];

NSMutableArray *myDailyArray = [NSMutableArray array];
int pagesDone = 4;
[levelArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop)
{
    NSMutableDictionary *dictDaily = (NSMutableDictionary *)obj;
    int pgFinishedNumber = [[dictDaily objectForKey: @"pgFinishedNumber"] intValue];
    if (pagesDone < pgFinishedNumber) {
        *stop = YES;
    } else {
        [myDailyArray addObject:dictDaily];
    }
}];
NSLog(@"%@", myDailyArray); 
```

# vb.net - 使用自定义事件进行控制

> ID：10488056
> 
> 赞同：0
> 
> 时间：2012-05-07T19:40:09.437
> 
> 标签：vb.net, events

我试图做的是即使在文本框控件上也有一个自定义，因此当控件上的布尔值设置为 false 时，它​​会触发此事件：

```
Public Property isError As Boolean = False

    Public Event IsInError As EventHandler

    Private Sub textInError() Handles Me.IsInError
        If isError = False Then
            Me.BackColor = isErrorColor
        End If
    End Sub 
```

我以前从未真正使用过事件处理程序，所以我对它们不太熟悉，所以我很可能在这里走错了路

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:50:22.003

是的，你在这个错误的轨道上。听你*自己的*事件总是一个强烈的迹象，表明你弄错了。您想编写一个属性设置器。像这样：

```
Public Property IsError() As Boolean
    Get
        Return hasError
    End Get
    Set(ByVal value As Boolean)
        If value == hasError Then Return
        hasError = value
        If hasError Then
            prevBackColor = Me.BackColor
            Me.BackColor = isErrorColor
            '' RaiseEvent IsInError(Me, EventArgs.Empty)  '' If you still need the event
        Else
            Me.BackColor = prevBackColor
        End If
    End Set
End Property

Private hasError As Boolean
Private prevBackColor As Color 
```

# mysql - 在 C 中关闭连接后，在函数中返回 MySQL 查询的结果

> ID：10488057
> 
> 赞同：3
> 
> 时间：2012-05-07T19:40:13.757
> 
> 标签：mysql, c

我在 C 中有这种奇怪的行为，我不明白。可能是我，因为我对 C 很陌生。我想要实现的是编写一个运行 MySQL 查询并返回结果的函数。奇怪的是，在下面的代码中，如果我关闭连接并释放结果（正如我所期望的那样），我存储在“retvalue”中的值似乎不再存在。当我在释放结果和关闭连接之前返回值时，返回值，但显然连接没有关闭，MySQL 最终会出现错误“连接太多”。

```
int CheckBox(char *mac)
{
MYSQL *conn;
MYSQL_RES *res;
MYSQL_ROW row;

/* database details */
char *server = "localhost";
char *user = "user";
char *password = "pw";
char *database = "db";
int retvalue;

conn = mysql_init(NULL);

/* connect to database */
if (!mysql_real_connect(conn, server,user, password, database, 0, NULL, 0))
{
    fprintf(stderr, "%s\n", mysql_error(conn));
    exit(1);
}

/* create and send SQL query */
char query[1600];
sprintf(query,"SELECT * FROM boxes WHERE mac = '%s'", mac);
if (mysql_query(conn, query))
{
    fprintf(stderr, "%s\n", mysql_error(conn));
    exit(1);
}

res = mysql_use_result(conn);
/* check result to see if we have a hit */
if ((row = mysql_fetch_row(res)) != NULL)
{

    printf("mac (%s) did exist with id %s.\n",mac,(char *)row[0]);
    retvalue = (int)row[0];
} else
{
    printf("mac (%s) did NOT exist ",mac);
    /* mac address did not yet exist, so create it */
    sprintf(query,"INSERT INTO boxes (mac) VALUES ('%s')",mac);
    if (mysql_query(conn, query))
    {
        fprintf(stderr, "%s\n", mysql_error(conn));
        exit(1);
    } else
    {
        printf("but now does\n");
        CheckBox(mac);
    }
}

/* close connection */
mysql_free_result(res);
mysql_close(conn);

/* return id number of box */
return retvalue;
} 
```

所以问题是：我是否正确地假设首先释放结果并关闭连接是正确的顺序？当我像这样运行函数时，为什么我分配给 retvalue 的值消失了？

感谢您对初学者很好:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:59:50.017

演员阵容`retvalue = (int)row[0]`错了。它将结果的地址（转换为 int）放入`retvalue`. `row[0]`是一个`char*`，所以你应该使用`retvalue=atoi(row[0])`.

# html - 链接元素“按钮”上的多行

> ID：10488061
> 
> 赞同：1
> 
> 时间：2012-05-07T19:40:30.263
> 
> 标签：html, css, hyperlink

我一直在不懈地尝试在我的链接按钮上添加多行文本 - 但我就是不知道该怎么做！（我在其他网站上看到过——但不记得在哪里）

这是我试图实现效果的“按钮”（样式元素）：http: [//jsfiddle.net/TAvUF/1/](http://jsfiddle.net/TAvUF/1/)

每次我试图实现我的目标时，我最终都会完全打破按钮。

谁能建议我如何做到这一点？我试过用谷歌搜索某种教程，但找不到。

我确信这很明显，我忽略了一些简单的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T19:44:28.247

只是在链接上摆弄你的东西，看起来你只需要添加：

```
display: block 
```

到 .bluebutton 样式。然后你可以摆弄按钮尺寸或填充以获得你喜欢的尺寸。我`<br />`在按钮文本中间用 a 进行了测试，效果很好。

# c++ - 在类声明之前调用类的成员函数

> ID：10488062
> 
> 赞同：2
> 
> 时间：2012-05-07T19:40:31.023
> 
> 标签：c++, function, scope, member

我在类声明之前定义一个宏。宏调用类的成员函数。我的示例代码如下。

示例类声明，

```
// sample.h

#include <sstream>
#include <iostream>
using namespace std;

#define CALCULATETEMP(a, b, c) {
int d = Sample::getTempIncrement(a,b,c);
stringstream ss;
ss << d;
cout << ss.str() << endl;
}

class Sample {
public:
    Sample();
    int getTempIncrement(int a, int b, int c);
    ~Sample();
}; 
```

示例类实现，

```
//sample.cpp

#include "sample.h"
Sample::Sample() {
}

int Sample::getTempIncrement(int a, int b, int c) {
    int temp = 5;
    int d = (a*temp) + (b+c)*temp;
    return d;
}

Sample::~Sample() {
} 
```

主程序，

```
//main.cpp

#include "sample.h"

int main(int argc, char* argv[]) {
    int a = 1;
    int b = 2;
    int c = 3;
    CALCULATETEMP(a, b, c);
    return 0;
} 
```

当我运行 main.cpp 时，在宏定义中的 sample.h 文件中出现错误：“Sample”不是类或命名空间名称。

如何在类范围之外和类声明之前调用类的成员函数？我对编程很陌生，您的反馈会对我有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:44:23.827

如果您希望宏跨越多行，则必须`\`在每行的末尾放置：

```
#define CALCULATETEMP(a, b, c) {         \
int d = Sample::getTempIncrement(a,b,c); \
stringstream ss;                         \
ss << d;                                 \
cout << ss.str() << endl;                \
} 
```

另外，你为什么不为此使用一个函数（而不是使用`stringstream`）？

```
class Sample {
public:
    Sample();
    int getTempIncrement(int a, int b, int c);
    ~Sample();
};

void calctemp(int a, int b, int c) {
    int d = Sample::getTempIncrement(a,b,c);
    stringstream ss;
    ss << d;
    cout << ss.str() << endl; // why are you using stringstream? It could be
                              // just cout << d << endl;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T22:09:44.863

我相信还有另一个问题。Sample::getTempIncrement() 未声明为静态，因此您需要宏中可用的 Sample 实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T19:44:32.933

你已经定义`CALCULATETEMP(a,b,c)`了被预处理器替换`{`，然后用一堆全局空间编码，这是非常非法的。

我建议回到关于预处理器宏的教程和/或阅读内联函数。

# php - 从PHP中的数组键中减去1的目的是什么

> ID：10488063
> 
> 赞同：0
> 
> 时间：2012-05-07T19:40:59.883
> 
> 标签：php, arrays, wordpress

我是 PHP 新手，并试图更好地理解 wordpress 源代码。在我的旅行中，我遇到了以下代码行......

```
$lastc = $data[$length-1]; 
```

谁能告诉我 $length-1 在数据数组中的用途是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T19:44:56.883

如果我们有一个数组：

```
$arr = array(1, 2, 3, 4, 5); 
```

那么`$length`,being `count($arr)`, 是 5。$data[$length - 1] 是最后一个元素（第四个索引）。

但是，您应该注意到这读起来很糟糕。这就是为什么开发人员可能应该使用：

```
$lastc = end($data); 
```

它返回数组的最后一个元素。

如果它是一个字符串，他们应该使用：

```
$lastc = substr($data, $length - 1); 
```

这将返回字符串的最后一个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T19:44:04.820

在这种情况下，此代码似乎旨在获取该特定字符串中的最后一个字符。在 PHP 中，您可以将字符串寻址为数组：

```
<?php
$str = "Hello world";
echo $str[6]; //outputs w;
?> 
```

（另见[PHP 手册](http://php.net/language.types.string)）。在这种情况下，代码似乎将特定字符串的长度存储在 中，获取最后一个字符所需的索引`$length`也是如此`$length-1`，因为索引从 0 开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T19:43:05.590

长度为 3的数组具有成员`0`和。所以不存在，但(aka ) 存在。`1``2``array[3]``array[3-1]``array[2]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T19:43:26.103

这很可能是一种获取数组中最后一个元素的方法。由于数组是零索引的，因此数组的最后一个元素比长度小一。例如，如果一个数组 $foo 有五个元素，那么最后一个元素可以通过 $foo[4] 引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T19:43:51.227

`$data[$length-1]`是如何获取数组的最后一个元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T19:44:13.647

它基本上是一种引用数组中最后一项的方法。由于数组以零索引开始，并且数组长度至少为 1（假设数组不为空），因此使用 $array[(count($array)-1)] 将为您提供最后一项。

如果您发现自己经常需要给定数组中的最后一个元素，我喜欢使用 array_reverse，这样我就可以简单地调用 $array[0]。

# ruby-on-rails - 在 Sunspot/Solr for Rails 中同时搜索多个模型

> ID：10488064
> 
> 赞同：3
> 
> 时间：2012-05-07T19:41:04.413
> 
> 标签：ruby-on-rails, model, solr, sunspot

简单的问题，如何使用 Sunspot 搜索多个模型？...我正在使用带有 Rails 的 Sunspot，但我似乎无法找到如何搜索多个模型。我需要创建一个单独的控制器还是可以将齿轮控制器与索引操作一起使用？

谢谢您的帮助。

（旁注：我在stackoverflow上发现了一个与此非常相似的问题，但他们没有发布他们的代码......所以我为任何冗余道歉。）

在我看来，我有以下几点：

```
<div class="side_bar_search">
    <%= form_tag gears_path, :method => :get do %>
      <p>
        <%= text_field_tag :search, params[:search] %>
        <%= submit_tag "Search", :name => nil %>
    <% end %>
</div> 
```

以及以下型号

**齿轮**

```
class Gear < ActiveRecord::Base
  attr_accessible :title, :size, :price, :sub_category_id, :user_id, :image, :image_a, :remote_image_url
  belongs_to :user
  belongs_to :sub_category
  has_one :category, :through => :sub_category
  has_many :comments, :dependent => :destroy 
  require 'carrierwave/orm/activerecord'
  mount_uploader :image, GearpicUploader
  mount_uploader :image_a, GearpicUploader

  searchable do
    text :title, :size, :price #need to add sub-category, and User Name.  
  end... 
```

**用户**

```
class User < ActiveRecord::Base 
  attr_accessible :first_name, :last_name, :email, :password, :password_confirmation, :userimage, :remove_userimage
  has_secure_password
  has_many :gears
  has_many :comments, :dependent => :destroy 
  has_one :store, :dependent => :destroy
  before_save :create_remember_token
  require 'carrierwave/orm/activerecord'
  mount_uploader :userimage, UserpicUploader

   searchable do
     text :first_name, :last_name
   end... 
```

**齿轮控制器**

```
class GearsController < ApplicationController
  def index
    @search = Gear.search do
        fulltext params[:search]
        paginate(page: params[:page])
    end

    @gears = @search.results
  end... 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-08T08:00:28.500

```
Sunspot.search [Gear, User] do
  ....
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:26:45.730

此外，可以派上用场的宝石是

[https://github.com/toptierlabs/acts_as_fulltextable](https://github.com/toptierlabs/acts_as_fulltextable)

它与搜索服务器没有任何依赖关系。

# java - 拥有一个不会更新用户 java 会话的 servlet

> ID：10488067
> 
> 赞同：0
> 
> 时间：2012-05-07T19:41:26.917
> 
> 标签：java, servlets, gwt-rpc

我有一个 servlet（GWT-RPC servlet），它仅用于检查用户会话是否已被清除（通过查看会话变量是否为空）。

问题在于，当它在用户浏览器中的计时器上运行时，每个检查会话是否已清除的请求都会将会话时间再更新 30 分钟。我可以尝试使计时器请求的频率低于会话超时。例如，如果会话每 30 分钟到期，而我每 35 分钟检查一次，则最多需要 70 分钟才能最终正确检测到会话已终止。

有人知道让 servlet 请求不更新会话的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:14:04.133

Servlet 规范要求任何访问会话的请求都会更新会话的最后访问时间，从而延长会话的生命周期。“正确”的解决方案取决于您需要知道会话是否已过期的确切原因。我怀疑你真正想要的是一个`javax.servlet.http.HttpSessionListener`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T22:29:34.540

这是我现在的解决方案...

创建一个更新名为“CUSTOM_LAST_SESSION_ACCESS”的会话变量的 servlet 过滤器。对 webapp 的任何请求都会将此变量更新为当前时间戳。

如果该变量在过去 30 分钟内已更新，则通过 ajax 进行 Javascript 计时器检查，如果没有使会话无效。

这意味着如果您从不关闭浏览器，会话将通过 javascript 调用无效。如果您关闭浏览器，标准的 Java 会话清理就会发生，因为在 30 分钟内没有发生任何 HTTP 请求。

# php - 获取电子邮件地址后显示下载链接。PHP/AJAX

> ID：10488069
> 
> 赞同：-2
> 
> 时间：2012-05-07T19:42:11.170
> 
> 标签：php, ajax, download

我们正在为我们的用户提供软件下载。

我们希望能够在用户提交将使用 ajax（可能是？）的电子邮件地址后向他们显示下载链接，并且他们的电子邮件地址将直接转到 icontact。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:17:51.107

你在使用框架吗？还是遵循模型-视图-控制器模式？

我认为一种解决方案（不是最好的解决方案）是进行 ajax 调用以保存电子邮件，检查它是否正确保存并显示链接，例如：

```
function saveMail(email){
  var xmlhttp;
  if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
  }
  else{// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
  //here you check and show the download link
  xmlhttp.onreadystatechange=function(){
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
      document.getElementById("downloadLink").innerHTML="<a href='download.php'>Download!</a>";   
  }
  var url = "saveEmail.php";
  var params = "email="+email;
  http.open("POST", url, true);
  http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  http.setRequestHeader("Content-length", params.length);
  http.setRequestHeader("Connection", "close");
  xmlhttp.send(params);
} 
```

这应该可以解决问题，但到目前为止它是一个非常糟糕的代码。如果您使用的是 MVC，则最好在控制器中执行此操作。

干杯!

# facebook-opengraph - 尽管页面上有 og:image 标签，但 Pinterest 图像为空白

> ID：10488070
> 
> 赞同：3
> 
> 时间：2012-05-07T19:42:12.710
> 
> 标签：facebook-opengraph, pinterest

在此页面上 > [http://matchcoverguy.com/kimballs-ice-cream-1920s-tall-universal/](http://matchcoverguy.com/kimballs-ice-cream-1920s-tall-universal/)

当我单击“固定”按钮时，出现的弹出窗口有一个空白图像。虽然，我在那里有一个开放的图形元标记：

```
<meta property="og:image" content="http://matchcoverguy.com/wp-content/uploads/Kimballs.jpg"/> 
```

我还能做些什么来让 Pin-it 按钮拉出图像吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T19:46:22.727

您的图像违反了 3:1 的最大图像比例；

它还缺少其他标签，请参阅[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)了解更多信息（尽管该工具目前没有提到 3:1 最大图像比例，但在文档中提到了）

# java - 如何使用 for 循环从 char 数组中绘制精灵

> ID：10488071
> 
> 赞同：2
> 
> 时间：2012-05-07T19:42:13.113
> 
> 标签：java, arrays, graphics, jframe

所以，基本上我现在正在尝试为我的游戏原型的角色精灵使用 char 数组，但我找不到一种工作方法来读取正确“行”中的每个元素以打印出角色（试图找到一个使用逐行填充矩形来绘制精灵的方法）。同样，我尝试了许多方法，例如`if (i % 5 == 0) y_temp += 5;`“缩进”以在新行上填充精灵的矩形，但没有一种方法有效。
建议/帮助任何人？

代码：

```
import java.awt.*;
import java.awt.event.*;  
import javax.swing.*;

public class test extends JFrame {
    private int x_pos, y_pos;
    private JFrame frame;
    private draw dr;
    private char[] WARRIOR;
    private Container con;
    public test() {
        x_pos = y_pos = 200;
        frame = new JFrame("StixRPG");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(1000, 500);
        frame.setResizable(false);
        frame.setVisible(true);
        con = frame.getContentPane();
        con.setBackground(Color.black);
        dr = new draw();
        dr.setBackground(Color.black);
        con.add(dr);
        WARRIOR = (
      " " +
        "!!!!!" +
        "!!ooo" +
        "!!!!!" +
        "#####" +
        "#####" +
        "#####" +
        "** **").toCharArray();
    }
    public static void main(String[] args) {
        test tst = new test();
    }
    class draw extends JPanel { 
        public draw() {
        }
        public void paintComponent(Graphics g) {
            super.paintComponents(g);
             int y_temp = y_pos;
            for (int i = 0; i < WARRIOR.length; i++) {
                 if (WARRIOR[i] == '!') {
                     g.setColor(new Color(0, 0, 204));
                    g.fillRect(x_pos+i*5, y_temp, 5, 5);
                }
                else if (WARRIOR[i] == 'o') {
                    g.setColor(new Color(204, 0, 0));
                    g.fillRect(x_pos+i*5, y_temp, 5, 5);
                }
                else if (WARRIOR[i] == '#') {
                    g.setColor(new Color(0, 0, 102));
                    g.fillRect(x_pos+i*5, y_temp, 5, 5);
                }
                else if (WARRIOR[i] == '*') {
                    g.setColor(Color.black);
                     g.fillRect(x_pos+i*5, y_temp, 5, 5);
                }
            }
        }   
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:46:46.437

如果我理解正确，您应该得到正确的坐标，如下所示：`x = i % 5; y = i / 5;`. 那么，您可以`fillRect(x*5, y*5, 5, 5);`.

**编辑：**我刚刚看到那个额外的空间。这意味着您必须先减去一个：
`x = (i-1) % 5; y = (i-1) / 5;`

**编辑2：**是的，然后当然你必须添加`y_pos`和`x_pos`：`fillRect(x_pos + x*5, y_pos + y*5, 5, 5);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T19:48:07.990

```
int x = (i-1)%5;
int y = (i-1)/5;

fillRect( x_pos + x*5, y_pos + y*5, 5, 5 ); 
```

*请注意，除然后乘很重要，因为

```
n (not always)== (n/5)*5 
```

在整数算术中。

# python - Python Fabric：将可执行文件放入远程机器时保留可执行文件的权限

> ID：10488073
> 
> 赞同：2
> 
> 时间：2012-05-07T19:42:28.927
> 
> 标签：python, permissions, fabric

我的可执行文件在将它们放入具有 Fabric 的远程服务器后失去了执行权限（文件是使用默认权限创建的）。

Fabric 是否提供了一种简单的方法来保持文件权限不变，或者我需要手动处理它们？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T02:33:29.670

如果你正在使用[put](http://docs.fabfile.org/en/1.4.1/api/core/operations.html#fabric.operations.put)看看它是 mirror_local_mode kwarg，或者如果你特别想要某种模式，那么还有一个用于 mode 的 kwarg。两者都有我提供的链接的简介。

# jquery - TypeError: undefined is not a function zclip

> ID：10488080
> 
> 赞同：0
> 
> 时间：2012-05-07T19:42:49.543
> 
> 标签：jquery, drupal, zclip

我包含了所需的文件，然后使用此代码调用 zclip，我尝试移动 js 文件的顺序并包括在页脚中但不工作。当我尝试在 firebug 控制台中运行此代码作为测试时，出现此错误。

```
TypeError: undefined is not a function 
```

这告诉我 zclip javascript 文件不起作用，我正在使用 jquery 1.4.4 运行 drupal 7

```
$('a.tocopy').zclip({
        path:'/sites/all/themes/my_theme/js/ZeroClipboard.swf',
        copy:$('#mini-panel-track_node_assets .view .view-content').text()
    });
$('a.tocopy').zclip({
        path:'/sites/all/themes/my_theme/js/ZeroClipboard.swf',
        copy:$('#mini-panel-track_node_assets .view .view-content').text()
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:48:48.323

那是因为`zclip`没有加载函数并且 jQuery 不知道该函数。首先加载jQuery，然后加载插件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-14T09:42:50.380

更改第 288 行：

```
$(this.domElement).data('zclipId', 'zclip-' + this.movieId); 
```

到

```
jQuery(this.domElement).data('zclipId', 'zclip-' + this.movieId); 
```

更新：现在它已修复：[https](https://github.com/patricklodder/jquery-zclip/blob/master/jquery.zclip.js) ://github.com/patricklodder/jquery-zclip/blob/master/jquery.zclip.js第296行：

# git - 我在哪里可以找到用户提交到我服务器上 gitosis 存储库的所有文件？

> ID：10488085
> 
> 赞同：0
> 
> 时间：2012-05-07T19:43:21.867
> 
> 标签：git, gitosis

我刚刚在我的服务器上安装了 gitosis 并成功创建了一个新的存储库。我可以提交对 git@IP:srv_repository.git 的更改，但我不知道在我的服务器上哪里可以找到这些文件（已提交更改）？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:53:15.850

这些*文件*可能在您的服务器上不直接可见。它们已被提交到`git`用户的主目录，位于目录内的某个位置`repositories`。这些都是*裸*仓库；要查看实际文件，您必须克隆相应的存储库。例如：

```
mkdir work
cd work
git clone ~/repositories/myrepo.git 
```

# opengl-es - 在 OpenGL ES 中绘制一个球体

> ID：10488086
> 
> 赞同：15
> 
> 时间：2012-05-07T19:43:25.347
> 
> 标签：opengl-es, geometry, opengl-es-2.0

我想绘制一个球体，我知道如何在 OpenGL 中使用诸如 glBegin() 和 glEnd() 之类的调用来绘制。

但是ES中什么都没有。

建议/教程链接？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-08T20:41:54.543

由于您已使用 OpenGL ES 2.0 对此进行了标记，因此我建议您使用另一种方法来创建平滑球体，即将它们绘制为光线追踪的冒名顶替者。无需计算复制平滑球体所需的许多顶点，您可以利用球体从任何角度看起来几乎相同的事实。

为此，您采用如下流程：

![球体冒名顶替者生成](../Images/8da574c218d3c28622a1dfa88002650c.png)

您将代表两个三角形的四个顶点发送到顶点着色器，然后将它们置换以创建一个始终面向用户的正方形。在该正方形内，您使用片段着色器对每个像素进行光栅化，并提供通过该正方形窗口查看球体时球体在该点所具有的颜色。

这种方法的优点是球体与显示器支持的分辨率一样平滑，并且球体可以轻松地从小到大缩放，而无需重新计算几何。它确实将渲染的负担从顶点处理器转移到了片段处理器，但对于单个球体，这在我使用过的 OpenGL ES 2.0 设备上并不是什么大问题。

我在[这个 iOS 应用程序中使用了这种技术，该页面上提供了该应用程序的源代码，并](http://www.sunsetlakesoftware.com/molecules)[在此处](http://www.sunsetlakesoftware.com/2011/05/08/enhancing-molecules-using-opengl-es-20)进一步讨论它。我使用的顶点着色器的简化版本如下所示：

```
attribute vec4 position;
attribute vec4 inputImpostorSpaceCoordinate;

varying mediump vec2 impostorSpaceCoordinate;
varying mediump vec3 normalizedViewCoordinate;

uniform mat4 modelViewProjMatrix;
uniform mediump mat4 orthographicMatrix;
uniform mediump float sphereRadius;

void main()
{
    vec4 transformedPosition;
    transformedPosition = modelViewProjMatrix * position;
    impostorSpaceCoordinate = inputImpostorSpaceCoordinate.xy;

    transformedPosition.xy = transformedPosition.xy + inputImpostorSpaceCoordinate.xy * vec2(sphereRadius);
    transformedPosition = transformedPosition * orthographicMatrix;

    normalizedViewCoordinate = (transformedPosition.xyz + 1.0) / 2.0;
    gl_Position = transformedPosition;
} 
```

简化的片段着色器是这样的：

```
precision mediump float;

uniform vec3 lightPosition;
uniform vec3 sphereColor;
uniform mediump float sphereRadius;

uniform sampler2D depthTexture;

varying mediump vec2 impostorSpaceCoordinate;
varying mediump vec3 normalizedViewCoordinate;

const mediump vec3 oneVector = vec3(1.0, 1.0, 1.0);

void main()
{
    float distanceFromCenter = length(impostorSpaceCoordinate);

    // Establish the visual bounds of the sphere
    if (distanceFromCenter > 1.0)
    {
        discard;
    }

    float normalizedDepth = sqrt(1.0 - distanceFromCenter * distanceFromCenter);

    // Current depth
    float depthOfFragment = sphereRadius * 0.5 * normalizedDepth;
    //        float currentDepthValue = normalizedViewCoordinate.z - depthOfFragment - 0.0025;
    float currentDepthValue = (normalizedViewCoordinate.z - depthOfFragment - 0.0025);

    // Calculate the lighting normal for the sphere
    vec3 normal = vec3(impostorSpaceCoordinate, normalizedDepth);

    vec3 finalSphereColor = sphereColor;

    // ambient
    float lightingIntensity = 0.3 + 0.7 * clamp(dot(lightPosition, normal), 0.0, 1.0);
    finalSphereColor *= lightingIntensity;

    // Per fragment specular lighting
    lightingIntensity  = clamp(dot(lightPosition, normal), 0.0, 1.0);
    lightingIntensity  = pow(lightingIntensity, 60.0);
    finalSphereColor += vec3(0.4, 0.4, 0.4) * lightingIntensity;

    gl_FragColor = vec4(finalSphereColor, 1.0);
} 
```

这些着色器的当前优化版本有点难以遵循，而且我还使用了环境光遮蔽照明，这些都没有。也没有显示这个球体的纹理，这可以通过适当的映射函数在球体表面坐标和矩形纹理之间转换来完成。这就是我为球体表面提供预先计算的环境光遮蔽值的方式。

# css-float - 如何在 span style="float: right" 后删除换行符

> ID：10488088
> 
> 赞同：2
> 
> 时间：2012-05-07T19:43:31.570
> 
> 标签：css-float, html, line-breaks

我需要在 td 中显示 3 个文本块，左侧第一个块，中间第二个块，右侧第三个块，没有换行符，所以它会显示

第一块 第二块 第三块

我试过了

```
<td>
    <span style="float: left; display:inline-block;">1st block </span>
    <span style="float: center; display:inline-block;">2ndblock </span>
    <span style="float: right; display:inline-block;">3rd block </span>
</td> 
```

似乎 float 会导致换行，即使使用 inline-block 也是如此。

请帮忙。非常感谢您。

# asp.net-mvc - MVC3 .NET 中的 Http 重定向

> ID：10488091
> 
> 赞同：2
> 
> 时间：2012-05-07T19:43:36.093
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing, http-redirect

所以我的网站在生产中运行并且间歇性地（是的，呃）......这些重定向似乎没有发生

```
public ActionResult Create()
{
    string newuserid = BizLayer.CreateUser();

    return RedirectToRoute("MyController/MyAction", new { userid = newuserid });
} 
```

用户创建得很好，代码肯定会通过生成 newuserid，但永远不会输入下一个控制器操作。所以我想知道我是否正确理解重定向。在输入新操作之前，新 URL 是否会被发送回客户端？输入 Create() 后，下一个操作中的处理是不可避免的（假设 Bizlayer 中没有崩溃）还是存在可以阻止它的浏览器情况？

这是它应该去的地方：

```
public ActionResult MyAction(string userid, DateTime? date) 
```

这是路由：

```
routes.MapRoute(
      "MyController/MyAction", // Route name
      "MyController/MyAction/{userid}/{date}", // URL with parameters
      new
      {
          controller = "MyController",
          action = "MyAction",
          date = UrlParameter.Optional
      } // Parameter defaults
      ); 
```

本质上我想知道，客户端可以拒绝 MVC 重定向并防止重定向到新的控制器操作发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:09:40.373

你有没有尝试过：

```
public ActionResult Create()
{
    string newuserid = BizLayer.CreateUser();

    return RedirectToRoute("MyController/MyAction", new { userid = newuserid, date = null });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:09:41.303

你试过这个吗？

```
return RedirectToAction("MyAction", "MyController", new { userid = newuserid }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T20:04:44.010

您是否尝试过指定 RouteValueDictionary 中的所有值？你可能想试一试...

```
RedirectToRoute(new { Controller = ..., Action=..., userid=...}) 
```

# c# - 如何在 C# 中使用具有 %UserProfile% 的字符串复制文件

> ID：10488093
> 
> 赞同：3
> 
> 时间：2012-05-07T19:43:47.067
> 
> 标签：c#, copy, profile, user-profile

我正在尝试使用此复制文件-

```
 private void button1_Click(object sender, EventArgs e)
    {
        Environment.GetFolderPath(Environment.SpecialFolder.UserProfile);
        if (File.Exists(@"C:\Users\%UserProfile%\AppData\Roaming\.minecraft\bin\minecraft.jar"))
            try
            {                  
                File.Copy(@"C:\Users\%UserProfile%\AppData\Roaming\.minecraft\bin\minecraft.jar", @"C:\Users\%UserProfile%\Documents\MinecraftBackup\minecraft.jar", true);
            } 
```

除非我将 %UserProfile% 更改为我的实际用户名，否则它将无法工作，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:49:25.547

代替：

```
C:\Users\%UserProfile%\AppData\Roaming\.minecraft\bin\minecraft.jar 
```

尝试

```
Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData), 
             @".minecraft\bin\minecraft.jar") 
```

事实上，任何时候你看到“ `C:\Users\%UserProfile%\AppData\Roaming\`”，你都应该使用“ `Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)`”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T20:02:25.867

```
var s = @"C:\Users\%UserProfile%\AppData\Roaming\";
var s2 = Environment.ExpandEnvironmentVariables(s); 
```

s2有扩展数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T19:50:10.443

该`%userprofile%`变量包括完整路径，一直到驱动器的根目录。

```
C:\Windows\System32>echo %userprofile%
C:\Users\[myusername] 
```

# .htaccess - .htaccess 假目录和用户名

> ID：10488094
> 
> 赞同：1
> 
> 时间：2012-05-07T19:43:47.500
> 
> 标签：.htaccess, url-rewriting

目前我在 .htaccess 文件中有这个代码来创建一个假目录

例如

```
http://www.mysite.com/something.php 
```

然后会变成

```
http://www.mysite.com/something 
```

我为此使用以下代码

```
Options +FollowSymLinks 
RewriteEngine On

RewriteCond %{SCRIPT_FILENAME} !-d 
RewriteCond %{SCRIPT_FILENAME} !-f

RewriteRule ^(\w+)$ ./$1.php 
```

但我现在想做的是允许用户拥有一个像

```
http://www.mysite.com/myusername 
```

然后该网址将指向此页面

```
http://www.mysite.com/profile.php?username=myusername 
```

我只是想知道这是否可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:21:16.263

用这个，

```
Options +FollowSymLinks 
RewriteEngine On

RewriteCond %{SCRIPT_FILENAME}.php -f
RewriteRule ^(\w+)$ $1.php [L,NC]

RewriteCond %{SCRIPT_FILENAME} !-d 
RewriteCond %{SCRIPT_FILENAME} !-f

RewriteRule ^([a-zA-Z0-9_.-]+)/?$ profile.php?username=$1 [L,NC,QSA] 
```

# iphone - __clang_analyzer__ 的重要性

> ID：10488100
> 
> 赞同：3
> 
> 时间：2012-05-07T19:44:12.663
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

**clang_analyzer**的重要性是什么，因为不使用它我看到分析器在下面的代码中大喊泄漏。

```
#ifndef __clang_analyzer__
CGPathRef pathWithRoundRect(CGRect iRect, CGFloat iRadius) {
    CGMutablePathRef returnVal = CGPathCreateMutable();
    CGPathMoveToPoint();
    CGPathAddArcToPoint();
    CGPathAddArcToPoint();
    CGPathAddArcToPoint();
    CGPathAddArcToPoint();
    CGPathCloseSubpath(returnVal);
    return returnVal;
}
#endif 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:52:20.693

`__clang_analyzer__`是一个宏，在为分析器编译程序时定义（参见[Clang 用户手册](http://clang.llvm.org/docs/UsersManual.html#analyzer_diagnositics)）。

当它被定义时，和之间的代码`#ifndef`没有`#endif`被编译，这意味着分析器看不到它，也不能告诉你`CGMutablePath`你从一个函数返回的拥有者，这个函数的名称并不表明它返回一个拥有参考。

您应该考虑添加`create`到函数名称的开头。

# android - android webview无意义错误android.webkit.WebView QuickSelect.resumeSelection nullpointerexception

> ID：10488106
> 
> 赞同：2
> 
> 时间：2012-05-07T19:44:22.570
> 
> 标签：android, webview

在我的 google android 开发者帐户中，我收到了这个错误。我检查了代码，但对我来说似乎毫无意义。我google了一下，没有结果？谁能帮我 ？

```
java.lang.NullPointerException
at android.webkit.WebView$QuickSelect.resumeSelection(WebView.java:14232)
at android.webkit.WebView$QuickSelect$EventHub.handleMessage(WebView.java:14690)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:150)
at android.app.ActivityThread.main(ActivityThread.java:4385)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
at dalvik.system.NativeStart.main(Native Method) 
```

# javascript - swf 上传 302 错误

> ID：10488110
> 
> 赞同：3
> 
> 时间：2012-05-07T19:44:27.030
> 
> 标签：javascript, cookies, http-headers, httprequest, swfupload

所以我有这个用于将 swfuploader 加载到页面上的 javascript 代码（[http://code.google.com/p/swfupload/](http://code.google.com/p/swfupload/)）

```
swfuPubThumbnailUploader = new SWFUpload({
  upload_url : "/upload_thumbnail",
  flash_url : "/Flash/swfupload.swf",
  file_size_limit : 512 + " MB",
  file_post_name: 'files[swf]',
  file_types : '*.jpg;*.jpeg;*.gif;*.png',
  file_types_description: "Image Files",
  file_queue_limit : 1,
  button_placeholder_id: 'swf-trans-file-selector',
  button_text: '',
  button_image_url: '',
  button_width: "85",
  button_height: "25",
  button_cursor : SWFUpload.CURSOR.HAND,
  button_window_mode : SWFUpload.WINDOW_MODE.TRANSPARENT,

  post_params : {
                "sid" : sid
  },

  preserve_relative_urls : true,
  file_queued_handler : fileQueued,
  file_queue_error_handler : fileQueueError,
  file_dialog_complete_handler : fileDialogComplete,
  file_dialog_start_handler : sLibraryFileDialogStart,
  upload_start_handler : sLibraryPubUploadStart,
  upload_progress_handler : sLibraryPubUploadProgress,
  upload_error_handler : sLibraryPubUploadError,
  upload_success_handler : sLibraryPubUploadSuccess,
  upload_complete_handler : sLibraryPubUploadComplete,
  queue_complete_handler : queueComplete, // Queue plugin event

  custom_settings: {
    progressTarget : ("fsPPUploadProgress")
  }
}); 
```

但是每当我使用 swfuploader 上传（上传图片，更具体地说......）时，swfuploader 都会抱怨 302 错误，这表明 url 正在重定向......但是当我访问上传 url '/upload_thumbnail' 时没有重定向发生并且上传网址加载正常......所以我检查了提琴手来检查这两个案例，这里是每个案例的请求

当我通过浏览器访问 /upload_thumbnail 时：

```
GET /upload_thumbnail HTTP/1.1
Host: my.domain.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Cookie: __utma=171146939.260757561.1311084520.1336078159.1336400574.117; __utmz=171146939.1311084520.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __utma=104299925.1228643063.1313075490.1335542105.1335567483.41; __utmz=104299925.1333981938.38.25.utmcsr=my.domain.com:8090|utmccn=(referral)|utmcmd=referral|utmcct=/browse/MD-2760; __qca=P0-29539114-1325619242917; SESS5ccc5f20cb72179af2f569e77eaa49da=6vde0rln7q3384k5lcvedsgfh3; SimpleSAMLAuthToken=_c2f653a6e9b18b10439d73849fb1142a7d43851998; __utmc=171146939; has_js=1
If-Modified-Since: Mon, 07 May 2012 19:13:38 +0000
If-None-Match: "1336418018" 
```

状态为 200 时加载正常

然后来自 swfuploader

```
POST /upload_thumbnail HTTP/1.1
Accept: text/*
Content-Type: multipart/form-data; boundary=----------gL6Ef1Ef1KM7Ij5gL6ae0gL6GI3GI3
User-Agent: Shockwave Flash
Host: my.domain.com
Content-Length: 847357
Connection: Keep-Alive
Pragma: no-cache
Cookie: __utma=171146939.1934231828.1323362429.1328283903.1333582993.5; __utmz=171146939.1323362429.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __utma=104299925.1653270920.1323362234.1334760245.1335992862.7; __utmz=104299925.1323362234.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); SESS5ccc5f20cb72179af2f569e77eaa49da=0qjn1gva2rhlcqiqp2g7liumd0; __qca=P0-1855943596-1327334275533 
```

最终状态为 302 并重定向到登录页面....

所以我发现罪魁祸首是 Cookie: request....如果我将浏览器的 COOKIE 请求切换为 swfuploader 的 Cookie 请求，则 swfuploader 请求将正确加载状态为 200...

我的第一个问题是......为什么？swfuploader 的 Cookie 请求有什么问题？

其次，如何将其转换为最顶部的我的 javascript SWFUpload 代码，以便浏览器中的实际 swfuploader 将其 Cookie 请求适当地修复....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-29T05:14:07.253

默认的**PHP 会话处理程序机制使用**您的**Cookie 和 User-Agent**将会话与用户匹配。由于 Flash 使用*"ShockWave Flash"*的用户代理向服务器标识自己，这与浏览器的 UA 不同，因此 php 会为请求分配一个新会话。

如果您输出`_POST`数据，然后将这些值与您获得的值进行比较，`session_start()`或者您将浏览器 UA 更改为与 Flash 发送的完全匹配，您可以检查这一点。

**解决方案？**

以任何您想要的方式将会话 ID 传递给服务器，默认值为`_POST`，并使用正确的 ID 初始化会话。

SWFUpload 为您提供`post_params`“[*定义将随每个上传文件发布的名称/值对*](http://demo.swfupload.org/Documentation/)”。

```
// SWFUpload example - taken from you own config file
post_params : {
    "sid" : sid => THIS WOULD BE YOUR SESSION ID!; you can put <?=session_id()?>
}, 
```

然后在服务器端...

```
// Prior to starting the session as you normally do you'll want to check if 
// you're trying to pass a session id by post, if so, initialize session with it
<?php
if(isset($_POST['sid']))
{
    session_id($_POST["sid"]);
}
session_start(); 
```

# java - 如何将图形放在 JPanel 上？

> ID：10488112
> 
> 赞同：6
> 
> 时间：2012-05-07T19:44:28.567
> 
> 标签：java, swing, graphics, jframe, jpanel

我在将图形添加到 JPanel 时遇到问题。如果我从 panel.add(new graphics()); 更改行 到 frame.add(new graphics()); 并且不要将 JPanel 添加到 JFrame，黑色矩形出现在 JFrame 上。我只是无法让黑色矩形出现在 JPanel 上，并且想知道是否有人可以帮助我解决这个问题。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

 public class Catch{

public class graphics extends JComponent{
    public void paintComponent(Graphics g){
    super.paintComponents(g);
    g.fillRect(200, 62, 30, 10);
    }
}

 public void createGUI(){
    final JFrame frame = new JFrame();
    JPanel panel = new JPanel();
    frame.setSize(500,500);
    frame.addMouseListener(new MouseAdapter(){
        public void mouseClicked(MouseEvent e) {
            System.out.println(e.getPoint().getX());
            System.out.println(e.getPoint().getY());
        }
     });
    panel.add(new graphics());
    frame.add(panel);
    frame.setVisible(true);
    frame.setDefaultCloseOperation(frame.DISPOSE_ON_CLOSE); 
}

public static void main(String[] args){
    Catch GUI= new Catch();
    GUI.createGUI();
   }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T20:23:45.897

自定义组件为 0x0 像素。

```
import java.awt.*;
import javax.swing.*;

public class Catch {

    public class MyGraphics extends JComponent {

        private static final long serialVersionUID = 1L;

        MyGraphics() {
            setPreferredSize(new Dimension(500, 100));
        }

        @Override
        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            g.fillRect(200, 62, 30, 10);
        }
    }

    public void createGUI() {
        final JFrame frame = new JFrame();
        JPanel panel = new JPanel();
        panel.add(new MyGraphics());
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                Catch GUI = new Catch();
                GUI.createGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T02:52:32.447

这是您可以查看的内容：

```
import javax.swing.*;
import java.awt.*;
public class GraphicsOnJPanel extends JFrame
{
    public GraphicsOnJPanel ()
    {
        setSize (Toolkit.getDefaultToolkit ().getScreenSize ());
        setResizable (false);
        setContentPane (new JPanel ()
        {
            public void paint (Graphics g)
            {
                g.setColor (Color.RED);
                g.fillRect (100, 100, 100, 100);
             }
         }
    );
          setVisible (true);
}

    public static void main (String args[])
    {
        new GraphicsOnJPanel ();
    }
} 
```

也许这有用？

# php - magento 自定义管理报告过滤器

> ID：10488124
> 
> 赞同：1
> 
> 时间：2012-05-07T19:45:08.530
> 
> 标签：php, magento, adminhtml

我几乎按照本指南[http://www.summasolutions.net/blogposts/custom-reports-magento](http://www.summasolutions.net/blogposts/custom-reports-magento)构建了一个自定义报告。但是我也希望能够添加过滤器；就像位于@报告->销售->订单的那个。

我试图弄清楚核心中所有必要的部分在哪里，但我一定遗漏了一些东西。他们似乎在 Mage/Sales/Block/Adminhtml/Report/Filter/Form

任何帮助都是极好的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T17:35:32.093

看一下`/app/code/core/Mage/Adminhtml/controllers/Report/SalesController.php`，然后转到`salesAction`，您会看到引用的两个块：

```
$gridBlock = $this->getLayout()->getBlock('report_sales_sales.grid');
$filterFormBlock = $this->getLayout()->getBlock('grid.filter.form'); 
```

您可以在`app/design/adminhtml/default/default/layout/sales.xml`标记为 的部分下找到定义`<adminhtml_report_sales_sale>`。请注意，此处通过操作方法设置了一些选项。这会将您定向到`sales/adminhtml_report_filter_form_order`，您可以在`app/code/core/Mage/Sales/Block/Adminhtml/Report/Filter/Form/Order.php`及其父级中找到它`../Form.php`。看看这些`_prepareForm()`功能，它应该会给你一个更好的模板来使用。请注意，这两个都是`Mage/Sales/Block/Adminhtml/Report/Filter/Form`.

# c# - 网格背景闪烁（Metro 应用程序）

> ID：10488127
> 
> 赞同：2
> 
> 时间：2012-05-07T19:45:25.773
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我有一个背景定义为 XAML 中的 ImageBrush 的网格。图像非常大（大约 1 MB，jpg）。当我导航到页面时，首先显示大约一秒钟的黑色背景，然后加载背景图像。它看起来不太好。如何解决这个问题？也许一些图像缓存或将图像加载到内存中？

**编辑：**由于应用程序应支持的最高分辨率，图像为 2560x1600。有没有办法检测屏幕分辨率并使用适当的图像？我还在 Windows 8 博客上阅读了一篇关于缩放图像的文章，但我找不到任何它是如何工作的示例。这个想法是，1366x768 为 100%，1920x1080 为 140%，2560x1600 为 180%，系统会根据用户的分辨率选择正确的背景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:49:39.607

您可以生成缩略图而不是 1 mb 的图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:39:24.513

我之前在 MSDN 上问过一个[类似的问题](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/78603167-121f-457c-b8d1-e15abfad0652/#78603167-121f-457c-b8d1-e15abfad0652)，但没有得到一个普遍有用的答案。如果您希望能够转到任何页面并立即看到图像 - 您需要在导航之前加载它。如果您想避免闪烁 - 您可以将画笔的不透明度设置为 0 并等待 ImageBrush 上的 ImageOpened 事件，然后再将不透明度设置为 1.0 以实现平滑的淡入过渡。

编辑*

最新版本的[WinRT XAML 工具包](http://bit.ly/WinRTXamlToolkit)有一个附加属性 (ImageExtensions.FadeInOnLoaded)，您可以在图像加载时使用它来淡入图像，这应该比在加载时简单地显示要好得多。也有样品。

要处理多个图像比例 - 您需要名称为 SplashScreen.scale-100.png、SplashScreen.scale-140.png、SplashScreen.scale-180.png 的图像，然后将图像源设置为 SplashScreen.png - 右侧分辨率的图像将自动被拾取。有关详细信息，请参阅此[msdn 文章。](http://msdn.microsoft.com/en-us/library/windows/apps/hh465362.aspx)

# sql - SQL：从文本中取出最后 4000 个字符

> ID：10488135
> 
> 赞同：1
> 
> 时间：2012-05-07T19:46:02.787
> 
> 标签：sql, sql-server, datalength

我有一个文本列，我想查看它是否超过 4000 个字符。如果它确实有超过 4000 个字符，则从最右边的字符开始，然后返回 4000 个字符。

我意识到以下代码不正确。但这是一个开始。

```
select 
case 
when datalength(column1) > 4000 then
right(column1, 4000)
case datalength(column1) <= 4000 then 
column1
end 
from table_1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:59:40.783

在 SQL Server 中：

```
SELECT CASE
    WHEN (DATALENGTH(column1) > 4000)
    THEN SUBSTRING(column1, DATALENGTH(test) - 3999, DATALENGTH(column1))
    ELSE column1
END
FROM table_1 
```

不太好，因为您要重新计算 DATALENGTH(column1) 三次。

**编辑**

使用 CTE 仅计算一次：

```
WITH CTE AS
(
    SELECT DATALENGTH(column1) AS LENGTH, column1 FROM table_1
)
SELECT CASE
    WHEN (LENGTH > 4000)
    THEN SUBSTRING(column1, LENGTH - 3999, LENGTH)
    ELSE column1
END
FROM CTE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:22:32.807

这适用于甲骨文。这是关于 Substr 的文档：http: [//psoug.org/definition/SUBSTR.htm](http://psoug.org/definition/SUBSTR.htm)

```
select (case when length(column1) > 4000 
             then substr(column1, -4000) 
             else column1 
        end) 
from table_1; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-07T19:49:21.650

在 SQL Server 中

```
SELECT
  CASE WHEN datalength(MyColumn) > 4000 THEN SUBSTRING(REVERSE(MyColumn), 1, 4000) ELSE MyColumn END AS MyGenCol 
```

# maven-plugin - Maven checkstyle 插件：向控制台打印警告

> ID：10488137
> 
> 赞同：6
> 
> 时间：2012-05-07T19:46:05.080
> 
> 标签：maven-plugin, maven-3, checkstyle

当我运行检查目标时，我似乎无法弄清楚如何让 maven-checkstyle-plugin 向控制台打印警告。

如果我配置为：

```
<module name="Checker">
    <module name="TreeWalker">
        <module name="NPathComplexity">
            <property name="max" value="5" />
            <property name="severity" value="warning" />
        </module>
    </module>
</module> 
```

...我在控制台中什么也看不到，并且检查没有失败。如果我将严重性更改为错误，则检查失败。

有任何想法吗？我错过了什么吗？

插件配置如下

```
<plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-checkstyle-plugin</artifactId>
                <version>2.9.1</version>
                <configuration>
                    <includeTestSourceDirectory>true</includeTestSourceDirectory>
                    <logViolationsToConsole>true</logViolationsToConsole>
                    <configLocation>
                        rules.xml</configLocation>
                </configuration>
                <executions>
                    <execution>
                        <phase>compile</phase>
                        <goals>
                            <goal>check</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T02:53:42.067

我有一个类似的问题。这个配置对我有用。

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-checkstyle-plugin</artifactId>
    <version>2.9.1</version>
    <configuration>
        <consoleOutput>true</consoleOutput>
    </configuration>
    <executions>
        <execution>
           <id>checkstyle</id>
           <goals>
               <goal>checkstyle</goal>
           </goals>
           <phase>prepare-package</phase>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-05T17:37:39.383

添加`<violationSeverity>warning</violationSeverity>`到`<configuration>`pom.xml 中对我有用：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-checkstyle-plugin</artifactId>
            <configuration>
                <logViolationsToConsole>true</logViolationsToConsole>
                <configLocation>checkstyle.xml</configLocation>
                <violationSeverity>warning</violationSeverity>
            </configuration>
            <executions>
            ...
            </executions>
            ...
        </plugin> 
```

另外，我的 checkstyle.xml 中有这个：

```
 <module name="Checker">

          <module name="SeverityMatchFilter">
              <!-- report all violations except ignore -->
              <property name="severity" value="ignore"/>
              <property name="acceptOnMatch" value="false"/>
          </module>

          ...

      </module> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T19:55:51.917

我假设您必须明确添加检查目标以将信息打印到控制台，如[文档中所述](http://maven.apache.org/plugins/maven-checkstyle-plugin/)。

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-checkstyle-plugin</artifactId>
    <version>2.9.1</version>
    <executions>
      <execute>
        <id>check</id>
        <goals><goal>check</goal></goals>
        <phase>prepare-package</phase>
      <execute>
    </executions>
  </plugin> 
```

根据您调用 mvn 的方式，您需要更改完成检查的阶段。maven-checkstyle-plugin 的默认绑定是验证阶段。要么在执行块中给出明确的阶段，要么只执行 mvn clean verify 并且可以省略阶段条目。

# django - django 基于类的视图没有反向

> ID：10488142
> 
> 赞同：0
> 
> 时间：2012-05-07T19:46:32.447
> 
> 标签：django, django-urls

我正在尝试 url 模板标签并偶然发现一个问题：

```
Caught NoReverseMatch while rendering: Reverse for ''location'' with arguments 
'(<City: New York>,)' and keyword arguments '{}' not found. 
```

在我的模板文件中，我有：

```
{% url 'location' city_name=city.name %} 
```

网址.py

```
url(r'^location/(?P<city_name>.*)/$', CityView.as_view(), name="location"), 
```

模型.py

```
def get_absolute_url(self):                                                                                                                                                                               
    return "/location/%s" % self.name 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:52:46.133

感谢[Maik Hoepfel](https://stackoverflow.com/users/753738/maik-hoepfel)在评论中更新：

Pre Django-1.5，您不需要以下`'`标记：

```
{% url 'location' city_name=city.name %} 
```

`url`但是，您可以通过从将来的模块加载来启用它们。而不是`{% load url %}`使用`{% load url from future %}`.

在您的情况下，在 Django 1.5 之前并且没有未来版本的 url，您可以使用：

```
{% url location city_name=city.name %} 
```

我怀疑它找不到您的 name 值，因为它实际上是在寻找`'location'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T19:24:38.810

对不起，我是新来的，所以我不知道这是否已经解决了你的问题。如果它还没有解决，错误消息在我看来它说你有位置参数并且没有关键字参数。

The reverse function is looking for a view witch accepts keyword-arguments. The urls.py entry is creating a keyword-argument ?P.

Please check if you have another entry in urls.py which is using positional-arguments like (.*) without the ?P<...>

Background: It is not possible to use positionell and keyword arguments at the same time.

# java - 如何使用 JavaHg Mercurial API 启用“大文件”扩展？

> ID：10488143
> 
> 赞同：2
> 
> 时间：2012-05-07T19:46:35.750
> 
> 标签：java, mercurial, javahg

我在 Grails 1.3.7 环境中使用 Mercurial 2.1.1 和 JavaHg 的每日快照。我正在尝试与启用了 largefiles 扩展的远程存储库进行交互。我创建了一个启用了 largefiles 扩展名的 hgrc 文件并将其设置`RepositoryConfiguration`为指向它。

我已经通过在 hgrc 文件中放置一个唯一的用户名并验证存储库在执行提交时使用该用户名来验证存储库指向正确的 hgrc。

```
RepositoryConfiguration repoConfig = new RepositoryConfiguration()
repoConfig.setHgBin(CH.config.hgbin)
repoConfig.setHgrcPath(CH.config.hgrc)
Repository repo = Repository.clone(repoConfig, tempDir, remoteDir); 
```

但是，当我尝试克隆启用了大文件的存储库时，我得到以下堆栈跟踪：

```
java.lang.RuntimeException: abort: unknown repository format: requires features
                            'largefiles' (upgrade Mercurial)!

at com.aragost.javahg.internals.Server.execHgCommand(Server.java:481)
at com.aragost.javahg.BaseRepository.<init>(BaseRepository.java:65)
at com.aragost.javahg.Repository.clone(Repository.java:93) 
```

如何启用 largefiles 扩展？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:01:27.823

它应该像您所做的那样使用启用 largefiles 扩展的 hgrc 文件。我[为 JavaHg 创建了一个测试用例](https://bitbucket.org/aragost/javahg/changeset/b67e0b376438)来测试它。

Jenkins 持续集成已成功执行所有 Mecurial 版本 >=2.0 的测试。

也许您可以将您的代码与测试用例进行比较，看看您做了什么不同？

# ios - 我的子视图控制器的弱或强属性？

> ID：10488149
> 
> 赞同：9
> 
> 时间：2012-05-07T19:47:21.583
> 
> 标签：ios, cocoa-touch, properties, uiviewcontroller, delegates

```
#import <UIKit/UIKit.h>
#import "UCMapviewController.h"
#import "UCMenuviewController.h"
#import "UCOverviewController.h"

@interface UCRootViewController : UIViewController

@property (weak, nonatomic) UCMapviewController *mapviewController;
@property (weak, nonatomic) UCMenuviewController *menuviewController;
@property (weak, nonatomic) UCOverviewController *overviewController; 
```

这是我的 UCRootViewController 的声明，它应该管理这些子视图控制器。他稍后还将成为他们的代表来处理何时应该显示或不显示一个控制器。

rootViewController 在 UIAppDelegate 中保持强大，并将始终保持活动状态。

那么让那些 sub-viewControllers 变弱是正确的吗？我不是 100% 确定，但据我所知，当没有指向它们的强指针时，弱指针会被释放。所以根是强的，让它们变弱是正确的，对吧？

```
#import <UIKit/UIKit.h>

@class UCRootViewController;
@interface UCOverviewController : UIViewController

@property (weak, nonatomic) UCRootViewController *rootviewController; 
```

这是我的一个子视图控制器的标题。他们有一个指向（后来的）委托 rootviewController 的弱指针。`@class UCRootviewController`声明让他们调用委托方法就足够了吗？我什至需要这个吗？

谢谢

编辑：我刚刚阅读[了一篇关于 ViewControllers](http://subjective-objective-c.blogspot.de/2011_04_01_archive.html)和段落的好文章：

> 始终使用高质量的视图控制器容器或 +[UIViewController presentModalViewController:animated:] 在应用程序中显示视图控制器。如果您需要在某处保留对视图控制器的引用，请使用弱引用，除非您真的希望它为缓存目的而保持更长时间。在这种情况下，请务必正确响应内存不足的情况。

它说使用弱引用，您对此有何看法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T19:53:06.340

强指针仅与您的 rootViewController 相关联。这并不意味着它会自动指向您的 rootViewController 中的其他 viewController。

您应该将这些属性设置为 strong，以确保您的其他 viewController 不会以您不希望它们的任何方式被释放。

如果您将它们推入导航堆栈就可以了，因为导航堆栈会自动强化指向它们的点。但是，如果您只是要将他们的视图作为子视图添加到您的 rootViewController 中，那么您需要确保这些属性是强大的。

当没有指向它们的强指针时，对象会被释放。由于没有指向您的其他视图控制器的强指针，它们将被释放。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T19:55:05.153

Strong 相当于保留，只是 ARC 会为您管理发布。弱是为了避免保留周期 - 父母保留孩子，反之亦然。

**__weak 指定一个不使被引用对象保持活动状态的引用。当对象没有强引用时，弱引用设置为 nil。**

这是一个链接：[Objective-C 中的 Weak and strong property setter attributes](https://stackoverflow.com/questions/7912555/weak-and-strong-property-setter-attributes-in-objective-c)

鉴于您想保留这些视图控制器，最好的选择是强参考！确保在您需要它们之前不会释放它们！

# attributes - Ubercart 自定义价格，将价格乘以用户输入的值

> ID：10488150
> 
> 赞同：0
> 
> 时间：2012-05-07T19:47:26.157
> 
> 标签：attributes, ubercart

我有一个 ubercart 产品，有多种选择，需要按人收费。我`Number of People`为数字 20-40 创建了一个名为选择框的属性。

我需要乘

```
(the price after the addition of the selected options) * Number of People 
```

我正在使用 Ubercart 自定义价格，它允许我进行必要的数学运算，但我不确定如何访问用户选择的`Number of People`.

所以基本上我需要：

```
$item->price = $item->price * ['number_of_people'] 
```

无论如何，我看不到从 $item 对象访问人数。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T01:20:38.213

您可以使用该`uc_attribute_tokens`模块在计算上获取“人数”属性的值，两个模块集成。检查模块上的*README.txt*文件以获取您需要使用的令牌，它将类似于：`[number of people]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:11:10.827

这是我的计算结果：

$item->price *= '[人]'; 或 $item->price = $item->price * '[people]';

这些单引号很重要，我在任何 attribute_tokens_module 文档或示例中都没有提到它们，但是没有它们，我一直收到错误，... unexpected '[' in...

# php - CodeIgniter - 检查真实结果的最佳方法

> ID：10488151
> 
> 赞同：1
> 
> 时间：2012-05-07T19:47:31.573
> 
> 标签：php, codeigniter

检查模型或其他任何地方的某些方法是否正确执行的最佳方法是什么？

这是一个好方法吗？

模型：

```
$data['field1'] = $this->input->post('field1');
$data['field2'] = $this->input->post('field2');
$data['field3'] = $this->input->post('field3');

if ($this->db->insert('table', $data))
{
   return TRUE;
}
else
{
   return FALSE;
} 
```

控制器：

```
if ($this->form_validation->run() == FALSE)
{
    $this->load->view('page_view', $data);
}
else
{
    if ($this->Model->Insert_data())
    {
       $this->session->set_flashdata("insertsuccess", TRUE);
    }
    else
    {
       $this->session->set_flashdata("inserterror", TRUE);
    }
    $this->load->view('page_view', $data);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T19:55:49.423

试试这些

// 插入

```
$this->db->insert_id(); 
```

// 更新和删除

```
$this->db->affected_rows(); 
```

// 选择

```
$this->db->num_rows(); 
```

# jquery - 已经完成后的 jQuery 操作

> ID：10488153
> 
> 赞同：1
> 
> 时间：2012-05-07T19:47:40.650
> 
> 标签：jquery

我正在尝试编写一个小的 jquery 代码，但我只是停留在一个点上。

这是我的示例代码 - [http://jsfiddle.net/KfA4k/3/](http://jsfiddle.net/KfA4k/3/)。

如您所见，有 2 个按钮，每个目标都针对特定的隐藏“警报”，并且有 1 个按钮可以激活特定的“警报”。

当您按下每个警报按钮时，它只会将特定类添加到“运行”按钮，因此我可以看到用户想要哪个警报。如果我用 FireBug 检查按钮，我会看到类正在正确更改，但 jQuery 只获取类中的硬编码。

如果你不明白问题，请查看我的[jsfiddle](http://jsfiddle.net/KfA4k/3/)示例代码，它会更容易理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T19:58:58.850

您应该只将一个事件真正连接到#run 按钮。

只需使用 if 语句来查看哪个社交活动是活跃的并切换特定的隐藏社交。

```
$('#social1').on('click', function() {
    $('a').removeClass('active');
    $(this).addClass("active");
});

$('#social2').on('click', function() {
    $('a').removeClass('active');
    $(this).addClass("active");
});

$('#run').on('click', function() {
    if ($("#social2").hasClass("active")) $('#hidden-social-2').animate({
        height: 'toggle'
    });
    else $('#hidden-social-1').animate({
        width: 'toggle'
    });
}); 
```

[http://jsfiddle.net/KfA4k/5/](http://jsfiddle.net/KfA4k/5/)

# python - 以下 Python 语句的等效 Scala 是什么？

> ID：10488154
> 
> 赞同：2
> 
> 时间：2012-05-07T19:47:46.640
> 
> 标签：python, scala

以下 Python 语句的等效 Scala 是什么？看起来它正在使用 unsigned long 或其他东西（Scala 没有）。

```
size = pack('!L', len(someString)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:05:01.673

此语句没有精确的一对一映射，但您可以接近。

在 Scala 中，您通常不会将二进制数据存储在字符串`pack`中。相反，您将其存储在`Array[Byte]`.

Scala 本身没有为此提供任何库，但 Java 有，您可以在 Scala 代码中使用它们。

```
val out = new java.io.ByteArrayOutputStream()
val writer = new java.io.DataOutputStream(out)
writer.writeInt(someString.length)
writer.close()
val data = out.toByteArray 
```

关于为什么会这样，有几点需要注意：

*   `DataOutputStream`以大端顺序写入，这与您`!`在 Python 代码中的使用相匹配。如果您以小端顺序编写，则必须使用[DataOutputStream 的小端实现](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/LittleEndianDataOutputStream.html)。
*   Python 的`pack`方法写入一个 long 为 4 个字节，`writeInt`与`DataOutputStream`. `writeLong`将与 中的`long long`(`q`或`Q`)相同`pack`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T20:39:33.970

根据 python 文档，该`pack`方法执行以下操作：

```
Return a string containing the values v1, v2, ... packed according to the given format. The arguments must match the values required by the format exactly. 
```

`!`意思是大端，意思`L`是`Unsigned Long`。

没错，Scala 没有无符号数字。但这并不重要，因为它只意味着传入的值必须在无符号长整数的范围内。

看到这个输出：

```
>>> pack("!L", 2442442424)
'\x91\x94\xb6\xb8'
>>> pack("!l", 2442442424)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
struct.error: 'l' format requires -2147483648 <= number <= 2147483647 
```

我认为 scala 或 java 的 stdlib 中没有等效的方法，但编写一个应该不难。您只需要将您的数字转换为大端，然后将其转换为字节数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T00:17:42.900

Scala 在其标准库中没有这样的东西：你应该看看 Java。

顺便说一句，你不能这样做`String`：你需要将这些方法应用于`Array[Byte]`. 问题`String`在于它是由 UTF-16 字符组成的，所以一些字节序列是非法字符串。

# javascript - jQuery date 函数在 IE 中返回错误的值

> ID：10488155
> 
> 赞同：0
> 
> 时间：2012-05-07T19:47:47.887
> 
> 标签：javascript, internet-explorer, date, time

我有这个 Twitter 功能，它与发布推文的日期建立了链接。它适用于 Firefox、Chrome 和 Safari。IE 虽然会产生错误的结果：NaN 或 NaN 几天前。进入函数的日期格式如下：`Fri Apr 10:19:06 +0000 2012`. 有人有什么想法吗？

```
html += '<a target="_blank" href="http://twitter.com/' + username + '#status_' + data[i].id_str + '">' + data[i].text + ' <i>' + Twitter.daysAgo(data[i].created_at) + '</i></a>';

daysAgo: function (date) {
    var d = new Date(date).getTime();
    var n = new Date().getTime();
    var numDays = Math.round(Math.abs(n - d) / (1000 * 60 * 60 * 24));
    var daysAgo = numDays + ' days ago';
    if (numDays == 0) {
        alert('Works 1');
        daysAgo = 'today';
    } else if (numDays == 1) {
        alert('Works 2');
        daysAgo = numDays + ' day ago';
    }
    return daysAgo; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:06:33.253

我通过删除时区偏移来解决它。Thu May 1- 13:51:30 +0000 2012 变成 Thu May 1- 13:51:30 2012 并修复了 NaN 错误。

# java - GWT ValueProxy 和 RequestFactory 域类型错误

> ID：10488156
> 
> 赞同：0
> 
> 时间：2012-05-07T19:47:53.240
> 
> 标签：java, gwt, requestfactory

我试图创建一个由只返回字符串（名称）和整数（id）的查询组成的值代理（BrowserDetailItem）。

SERVER 代码（每个类在不同的文件中）

```
public class BrowserDetailItem {

    private String name;
    private Integer id;

    public static EntityManager entityManager() {
        return (new UnitPersistence()).get();
    }

    BrowserDetailItem() {
    }

    BrowserDetailItem(String name, Integer id) {
        this.name = name;
        this.id = id;
    }

    public String getName() {

        if (name == null)
            return "";
        else
            return name;
    }

    public Integer getId() {

        if (id == null)
            return null;
        else
            return id;
    }

    public static List<BrowserDetailItem> getBrowserFilterList() {

        EntityManager entityManager = entityManager();
        try {

            List<BrowserDetailItem> tempList = new ArrayList<BrowserDetailItem>();

            Query query = entityManager
                    .createQuery("SELECT s.name,s.id FROM Song s, Playlist p, Composer c "
                            + "WHERE s.id_playlist = p.id AND c.id = p.id_composer ");

            tempList = query.getResultList();
            tempList.size();

            return tempList;

        } catch (Exception e) {
            return null;
        } finally {
            entityManager.close();
        }

    }
}
public class BrowserDetailItemDAO {

    public void save(BrowserDetailItem browserItem) {
    }

    public BrowserDetailItem findById(Integer id) {
        return null;
    }
}

public class BrowserDetailItemLocator extends
        Locator<BrowserDetailItem, Integer> {

    @Override
    public BrowserDetailItem create(Class<? extends BrowserDetailItem> clazz) {
        return new BrowserDetailItem();
    }

    @Override
    public BrowserDetailItem find(Class<? extends BrowserDetailItem> clazz,
            Integer id) {
        return getBrowserDetailItemDao().findById(id);
    }

    private BrowserDetailItemDAO getBrowserDetailItemDao() {
        return new BrowserDetailItemDAO();
    }

    @Override
    public Class<BrowserDetailItem> getDomainType() {
        return BrowserDetailItem.class;
    }

    @Override
    public Integer getId(BrowserDetailItem domainObject) {
        return domainObject.getId();
    }

    @Override
    public Class<Integer> getIdType() {
        return Integer.class;
    }

    @Override
    public Object getVersion(BrowserDetailItem domainObject) {
        // return domainObject.getVersion();
        return null;
    }

} 
```

共享代码（每个类在不同的文件中）

```
@ProxyFor(value = BrowserDetailItem.class, locator = BrowserDetailItemLocator.class)
public interface BrowserDetailItemProxy extends ValueProxy {

    public String getName();

    public Integer getId();

}

@Service(BrowserDetailItem.class)
public interface BrowserDetailItemRequest extends RequestContext {

    Request<List<BrowserDetailItemProxy>> getBrowserFilterList();
} 
```

我根据开发人员指南和[http://cleancodematters.com/2011/06/04/tutorial-gwt-request-factory-part-i/完成了所有接线](http://cleancodematters.com/2011/06/04/tutorial-gwt-request-factory-part-i/)

代码执行（返回查询并将结果分配给列表）直到返回 getBrowserFilterList() 然后我收到以下错误：

com.google.web.bindery.requestfactory.server.UnexpectedException：域类型 java.lang.Object[] 无法发送到客户端。

我究竟做错了什么？请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:28:53.473

解决了。

问题出在：tempList =`query.getResultList();`

从查询返回的结果列表是一个`List<Object[][]>`无法转换为`List<BrowserDetailItem>`.

这意味着返回方法不是返回`List<BrowserDetailItem>`一个ValueProxy，而是返回一个`List<Object[][]>`不能发送到服务器的。

解决方案是遍历 List 并在每次传递中创建一个新的 BrowserDetailItem：

```
 Query query = entityManager 
            .createQuery("SELECT s.name,s.id FROM Song s,  Playlist p, Composer c WHERE s.id_playlist = p.id AND c.id = p.id_composer "); 

        List results = query.getResultList(); // Fetches list containing arrays of object

        Iterator it = results.iterator();

        while (it.hasNext()) {

            Object[] result = (Object[]) it.next(); // Iterating through the array object

            tempList.add(new BrowserDetailItem ((String) result[0], (Integer) result[1]));
        }

        tempList.size();

        return tempList; 
```

我还删除了定位器是没有意义的，因为不需要持久性。

希望能帮助到你。

谢谢山姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:01:49.327

您的接口必须是 EntityProxy 而不是 ValueProxy

```
public interface BrowserDetailItemProxy extends EntityProxy{

    public String getName();

    public Integer getId();

} 
```

定位器的使用

[https://developers.google.com/web-toolkit/doc/latest/DevGuideRequestFactory#locators](https://developers.google.com/web-toolkit/doc/latest/DevGuideRequestFactory#locators)

使用定位器进行价值代理

[https://groups.google.com/d/msg/google-web-toolkit/J6uhnvH0Wjc/H07hfJWEZbEJ](https://groups.google.com/d/msg/google-web-toolkit/J6uhnvH0Wjc/H07hfJWEZbEJ)

# django - Django 1.1 Signals - 线程的奇怪计时问题

> ID：10488157
> 
> 赞同：0
> 
> 时间：2012-05-07T19:47:58.440
> 
> 标签：django, multithreading, django-signals

我有一个模型（PurchaseOrder - 缩写 PO）持有时间预算。用户可以将小时记录添加到此预算中，其中每个小时记录都会减少剩余预算。

我实施了更新剩余预算的信号。添加一小时记录后，预算相应减少。因为计算可能很耗时，所以我为此任务使用了一个线程。

```
def update_po_remaining_value(sender, instance, **kwargs):
    CalculatePOThread(sender, instance).start()   
post_save.connect(update_po_remaining_value, sender=HourRecord)       
post_delete.connect(update_po_remaining_value, sender=HourRecord) 
```

线程CalculatePOThread正在通过获取小时记录集并从预算中扣除总小时记录集来计算剩余的PO预算值

```
hr_set = HourRecord.objects.filter(purchase_order = po) 
```

在我的 dev.workspace 中，这工作得很好。在生产中， post_save 连接也可以正常工作，但我遇到了 post_delete 信号的奇怪问题。查询 HourRecord.objects.filter(purchase_order = po) 返回的小时记录总和仍然包含已触发 CalculatePOThread 线程的已删除小时记录，这种情况经常发生。

无论如何，我通过在执行查询之前向线程添加 6 秒的延迟来规避该行为。时间.sleep(6)。

有谁知道为什么会发生这种情况？似乎在记录真正从数据库中删除之前触发了 post_delete 信号..！？但这将是 Django 中的一个错误，这将是我最后的猜测。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:24:14.537

很难说，但我猜你遇到了线程安全问题。当你产生一个线程来处理一个长时间运行的任务时，你必须意识到，当它试图完成时，一个类似的线程很容易被触发执行相同的任务。通常，在使用线程时，您希望尽量减少它们的占用空间，或者换句话说，不要让它们高度依赖于数据库状态等。

*如果*需要数据库访问，在这种情况下，您需要设置锁以防止数据库同时被弄乱。不过，鉴于您正在运行 Django 1.1，这将变得更加困难。如何在 Django 1.1 中实现表级锁定将取决于您正在运行的数据库服务器，并保证自己的问题。

# django - DJANGO：如何根据相关模型的属性对对象进行排序？

> ID：10488158
> 
> 赞同：9
> 
> 时间：2012-05-07T19:47:58.527
> 
> 标签：django, sorting, django-select-related

我有一个 User 模型和 UserProfile 模型。在用户模型中，我想对我的查询进行排序，使其按姓氏的字母顺序排列。然后我想通过 User_profiles 的“title”属性（经理、主管、会计师等）对其进行排序。

楷模：

```
from django.contrib.auth.models import User

class UserProfile(models.Model):
    user = models.OneToOneField(User)
    title = models.CharField(max_length=20) 
```

看法：

```
def user_index(request):
    i = User.objects.all().order_by('last_name', 'title')
    return render_to_response('db/user_index.html', {'i': i ,}, context_instance=RequestContext(request)) 
```

“Title”不是 User 模型的属性，而是通过 UserProfile 模型与 User 相关联。如何按字母顺序对 UserProfile.title 进行排序？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-07T19:51:18.287

```
User.objects.order_by('last_name', 'userprofile__title') 
```

# bash - bash脚本中$（）内的命令

> ID：10488164
> 
> 赞同：4
> 
> 时间：2012-05-07T19:48:24.540
> 
> 标签：bash, export, debian

我是 linux 新手。我看到一个`JAVA_HOME`在提示符处设置环境变量的 bash 命令（这甚至是正确的术语吗？）：

```
export JAVA_HOME =$(readlink -f /usr/bin/java |sed "s:bin/java::") 
```

我知道里面的命令是做什么的`$()`。但这是`$()`为了什么？如果我不包括它，它就会失败。

显然，谷歌搜索`$()`效果不佳。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:55:11.607

`$()`称为命令替换。它用命令本身替换命令的输出。基本上有两种方法可以进行命令替换：

```
$(command) 
```

或带反引号

```
`command` 
```

第一个变体是首选的变体。

[您可以在此处](http://tldp.org/LDP/abs/html/commandsub.html)阅读有关命令替换的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T19:50:19.483

它用于获取`readlink`命令的输出。例如：

```
cnicutar@lemon:~$ os=$(uname)
cnicutar@lemon:~$ echo $os
Linux 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T19:50:28.573

`$(...)`表达式运行命令并替换命令的输出。尝试这样的事情：

```
echo $(date) 
```

所以在这个例子中，它获取`readlink`命令的输出并将其分配给`JAVA_HOME`（在运行它之后`sed`）。

查看`bash`手册页以获取更多详细信息。

# asp.net - 如何将多个列连接成单个值以显示在下拉列表中？

> ID：10488165
> 
> 赞同：1
> 
> 时间：2012-05-07T19:48:24.973
> 
> 标签：asp.net, sql, sql-server, sql-server-2008

我有一个用于填充下拉列表的日期字段。日期字段是这样`2012-05-01 00:00:00`的，我需要下拉列表看起来像这样`5/2012`。但是要拧紧东西，我需要先把日期拆开，然后再把它重新组装起来。

具体来说，我需要找到所有“不同的”月份和所有“不同的”年份，但我只想找到不同的年份，如果有一个日期字段包含该年份的月份，反之亦然。

所以我有以下数据

表：**预算**

```
id   Item   ItemDate
1     A     5/12/2012
2     B     5/14/2012
3     C     4/5/2012
4     D     4/7/2012
5     E     7/15/2011 
```

所以我希望我的下拉列表只显示以下内容：

```
5/2012
4/2012
7/2011 
```

我试过使用

```
SELECT DISTINCT datepart(Month, ItemDate) + ' ' + datepart(year, ItemDate) As ddlList 
FROM Budget 
```

但这会将月份添加到年份（5 + 2012 = 2017）。

然后我的asp

```
<asp:dropdownlist id="ddl1" runat="server" datasourceID="sqldatasrc" DataTextField="ddlList"></dropdownlist> 
```

有任何想法吗？我不确定我是否以正确的方式解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:59:46.803

# ASP.NET

如果我没记错的话，我相信您可以使用`DataTextFormatString`DropDownList 控件上可用的属性来格式化 boundfield 值。您必须将属性设置为 value **`{0:M/yyyy}`**。请确保该物业可用。我在 MSDN 中找不到它。

我只能找到[**ListControl.DataTextFormatString 属性**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.datatextformatstring.aspx)

# SQL

在连接这些值之前，您必须将日期时间字段值的`MONTH`和`YEAR`部分转换为`VARCHAR`或字符串数​​据类型。

### 演示

[**单击此处查看 SQL Fiddle 中的演示。**](http://sqlfiddle.com/#!6/b5353/2)

### 脚本：

```
SELECT  
DISTINCT    CAST(DATEPART(MONTH, ItemDate) AS VARCHAR) + '/' + 
            CAST(DATEPART(YEAR, ItemDate) AS VARCHAR) AS ddlList 
FROM        dbo.Budget 
```

### 编写相同脚本的替代方法：

```
SELECT  
DISTINCT    CAST(MONTH(ItemDate) AS VARCHAR) + '/' + 
            CAST(YEAR(ItemDate) AS VARCHAR) AS ddlList 
FROM        dbo.Budget; 
```

### 创建并插入脚本：

```
CREATE TABLE dbo.Budget
(
     Id         INT         NOT NULL 
  ,  Item       VARCHAR(10) NOT NULL
  ,  ItemDate   DATETIME    NOT NULL
)

INSERT INTO dbo.Budget (Id, Item, ItemDate) VALUES
 (1, 'A', '05/12/2012'),
 (2, 'B', '05/14/2012'),
 (3, 'C', '04/05/2012'),
 (4, 'D', '04/07/2012'),
 (5, 'E', '07/15/2012'); 
```

### 输出：

```
DDLLIST
-------
4/2012
5/2012
7/2012 
```

# asp.net-mvc-3 - MVC3 razor Webgrid 上的计算列

> ID：10488166
> 
> 赞同：0
> 
> 时间：2012-05-07T19:48:26.907
> 
> 标签：asp.net-mvc-3, c#-4.0, webgrid, razor-grid

这是我的 webgrid。我正在尝试添加一个显示计算值的列“EndDate”

```
var grid = new WebGrid(canPage: true, rowsPerPage: Model.PageSize, canSort: true, ajaxUpdateContainerId: "grid");
    grid.Bind(Model.MyRecords, rowCount: Model.TotalRecords, autoSortAndPage: false);

    grid.Pager(WebGridPagerModes.All);
    @grid.GetHtml(htmlAttributes: new { id = "grid" },
                        columns: grid.Columns(

                        grid.Column("StartDate", "Live Date"),
                        grid.Column("EndOffsetSeconds", "End in Seconds"),
                        grid.Column("StartDate"+TimeSpan.FromSeconds("OffsetSeconds"), "Difference"),

                        grid.Column(header: "Action", format: (item) => Html.ActionLink("Edit", "Edit", new { id = item.ID })),
                        grid.Column(format: (item) => Html.ActionLink("Copy", "CopyRecord", new { id = item.ID }))

                    )); 
```

我想显示 EndDate 代替第三列。

```
Enddate = StartDate+TimeSpan.FromSeconds(EndOffsetSeconds) 
```

在第三列我想显示 StartDate+TimeSpan.FromSeconds(EndOffsetSeconds) 的结果

其中 StartDate 是 DateTime 类型， EndOffsetSeconds 是 Integer 类型

示例 DateTime StartDate =05/20/2012 12:15:03 int EndOffsetSeconds=124000;

如何使用 Webgrid 添加计算列？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:58:23.117

您可以向模型添加属性并在 get 方法中进行计算。

```
class MyRecord
{
  public DateTime StartDate {get;set;}
  public int EndOffsetSeconds {get;set;}

  public DateTime CalculatedEndTime
  {
    get
    {
      return StartDate + TimeSpan.FromSeconds( EndOffsetSeconds );
    }
  }
} 
```

然后只需指向网格中的计算属性。

# linux - 有人可以解释这个命令行示例中的“$”是什么意思吗？

> ID：10488169
> 
> 赞同：0
> 
> 时间：2012-05-07T19:48:34.803
> 
> 标签：linux, jenkins

该脚本位于该页面[http://jenkins-php.org/](http://jenkins-php.org/)底部的“使用作业模板”标题下。

```
cd $JENKINS_HOME/jobs
git clone git://github.com/sebastianbergmann/php-jenkins-template.git php-template
chown -R jenkins:nogroup php-template/ 
```

我只是对 JENKINS_HOME 之前第一行中的“$”的含义感到困惑。我从来没有见过这样使用的美元符号，也没有使用谷歌搜索找到它的解释。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:49:17.963

这意味着存储在名为 JENKINS_HOME 的变量中的值。

这个命令

```
echo $JENKINS_HOME 
```

将显示存储在此变量中的值。

[此链接](http://lowfatlinux.com/linux-script-variables.html)提供了有关使用 shell 变量的简要介绍/摘要。基本上，分配给一个没有 的变量`$`，但为了获得它的值，有必要将 放在`$`一个感兴趣的变量前面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T19:50:19.960

表示它是一个变量，常用于$PATH、$USER、$HOME等环境变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T19:50:47.257

就像在 PHP 中一样，$ 表示 unix/linux shell 脚本中的变量。这包括环境变量。在 Windows 批处理脚本中，您将使用`%JENKINS_HOME%`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T19:54:17.583

它可能是一个[环境变量](http://en.wikipedia.org/wiki/Environment_variable#Unix)，（可能）包含 jenkins 安装的路径。要检查变量的值，只需在命令提示符下键入：

```
echo $JENKINS_HOME 
```

# c++ - 何时在 TriCore 仿真器中加载操作数？

> ID：10488171
> 
> 赞同：1
> 
> 时间：2012-05-07T19:48:45.313
> 
> 标签：c++, emulation, instruction-set

这是我在 Stack Overflow 上的第一篇文章，所以我希望我做得正确。;-)

我正在尝试开发 TriCore 仿真器，但无法决定何时加载指令操作数的策略。TriCore 可能是一种相当不起眼的微控制器，所以让我稍微解释一下架构。

有两种类型的指令，16 位和 32 位。是16位还是32位，由最后一个字节的位0决定；由于字节顺序是小端，它始终是内存中的第一个字节。那里没问题。

这两种指令类型有几种操作码格式，14 种用于 16 位指令，25 种用于 32 位指令。操作码分为两个独立的操作码字段，尽管大多数 16 位的操作码只有一个操作码字段。第一个操作码字段在低 8 位；它直接描述了 16 位指令的指令，对于许多 32 位指令，它描述了操作数编码，而第二个字段描述了实际指令（当然也有例外）。

我的计划是始终提取所有操作码字段（这有点烦人，因为第二个字段的位置对于所有指令格式都不相同）并将它们放在一起成一个 16 位值，该值将用于函数指针表.

根据这个值，我想提取操作数。例如，当在 32 位指令中第一个操作码是`0x8B`时，操作数是两个数据寄存器和一个 9 位常量。但是，也有一些非常乏味的例外情况：

`ADD.A`and`ADDSC.A`指令都有操作码 1 `0x01`== 。但是`ADD.A`使用三个地址寄存器，而`ADDSC.A`使用两个地址寄存器，一个数据寄存器和一个索引，编码到指令中。

最后我的问题是：在执行指令之前在这样的架构中加载操作数是否可行？还是先调用指令函数并在那里提取操作数会更好？

对于任何感兴趣的人，指令集手册在这里：[http ://www.infineon.com/dgdl/tc_v131_instructionset_v138.pdf?folderId=db3a304412b407950112b409b6cd0351&fileId=db3a304412b407950112b409b6dd0352](http://www.infineon.com/dgdl/tc_v131_instructionset_v138.pdf?folderId=db3a304412b407950112b409b6cd0351&fileId=db3a304412b407950112b409b6dd0352)

感谢您的任何提示！

顺便说一句：选择的语言是 C 或 C++。

* * *

（应要求，我将我的想法插入到我原来的问题中。）

好吧，我广泛考虑了我拥有的不同选择，我想我会解决以下问题。

我将整个过程分为两个部分：

1.  程序分析和操作数提取
2.  执行

在第一步中，每条指令都被加载并对齐到 32 位。然后将加载的指令与一组位掩码进行比较，以确定正确的操作码，它不仅告诉我最终必须执行什么，还告诉我如何加载操作数。在特定于地址模式的函数中，操作数被加载到指针中；指令立即数根据需要存储。

这归结为类似于以下的结构：

```
struct instruction_t {
    int32_t **operands;
    int32_t *immediates;
}; 
```

这将基本上分配给每条指令（最大的缺点：内存消耗。我为这种最坏情况（使用 64 位指针）的结构计算了大约 40 个字节，这意味着通常只有 16 位指令的 4 MB 程序将最终占用大约 80 兆内存。另一方面，我认为执行速度可能相当快）。

使用这种方法，我可以只实现每条指令一次，因为我的操作数如何加载并不重要——另外，使用相同的操作数集执行相同的指令就像在真实机器上一样。代码的执行仅意味着通过选择正确的结构并相应地调用指令函数来加载正确的操作数集。

我知道还有其他方法——我特别喜欢动态重新编译。但是这个系统相当复杂，具有不同的片上组件和 I/O 映射寄存器，无论如何都会添加大量样板代码。

我非常感谢对我的方法的一些评论。也许您知道更好的方法？

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-14T23:17:05.747

（将我的方法移到原始问题中。）

# asp.net-mvc-3 - 回发后保持jQuery自动完成文本框

> ID：10488172
> 
> 赞同：1
> 
> 时间：2012-05-07T19:48:46.373
> 
> 标签：asp.net-mvc-3, jquery-ui, jquery, jquery-plugins

我正在使用 jQuery ajax 异步检索数据列表并在文本框上调用自动完成以绑定 jQuery 页面就绪事件上的数据。自动完成文本框按预期工作。当用户点击表单上的提交按钮并且出现验证错误时，不起作用。该页面不会使用最后一个已知值重新填充文本框。我知道 HTTP 是一种无状态协议。我在尝试使用剃刀手动将值重新插入文本框或尝试弄乱自动完成设置以以某种方式重新填充所选值之间感到痛苦。我应该怎么办？

```
success: function (data) {

                //reappend data - get drop down list
                log("got data", data);

                var arr = [];

                $.each(data.vendors, function (i, val) {

                    arr.push({ label: val.Name, value: val.Name, item: val.Value });

                });

                var ele = $page.find("#vendorAuto");

                ele.autocomplete({ source: arr, html: true, select: function (event, ui) {

                    $page.find("#VendorID").val(ui.item.item);

                }}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:08:55.917

如何使用会话、cookie 或缓存来存储所选项目的值，然后在页面加载时测试值，如果那里有值，使用它来设置下拉列表。

# c++ - 虚函数是否覆盖基类中同名的非虚函数？

> ID：10488176
> 
> 赞同：6
> 
> 时间：2012-05-07T19:48:57.047
> 
> 标签：c++

是否符合以下标准？你能引用那个部分吗？

```
struct A
{
    virtual void func() = 0;
};

struct B
{
    void func(){}
};

struct C : public A, public B
{
    virtual void func(){ B::func(); }
}; 
```

我在 VS2010 中收到了一个奇怪的编译器警告，其等效但更复杂的代码指向`func`派生类中的声明：`warning C4505: unreferenced local function has been removed`. 我不知道为什么编译器认为类中声明的虚函数是本地的；但是我无法在更简单的示例中重现该警告。

# 编辑：

我想出了一个用于警告的小型复制案例。我认为我走错了路，假设它与功能隐藏有关。这是复制案例：

```
template<typename T>
struct C
{
    int GetType() const;
    virtual int func() const;   // {return 4;}  //  Doing this inline removes the warning <--------------
};

template<typename T>
int C<T>::GetType() const
{
    return 0;
}

template<>
int C<int>::GetType() const
{
    return 12;
}

template<typename T> 
int C<T>::func() const
{
    return 3; 
}

//  Adding the following removes the warning <--------------------
//  template<>
//  int C<int>::func() const
//  {
//      return 4;
//  } 
```

我很确定这只是一个 VS2010 错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T19:54:00.617

代码格式正确。 `C::func`覆盖`A::func`. `B::func`是一个不相关的函数。规范读取（10.3/2）：

> 如果在一个类和一个类`vf`中声明了一个虚成员函数，直接或间接地派生自一个与被声明，然后也是虚拟的（无论它是否被声明）并且它覆盖 111 。`Base``Derived``Base``vf``Base::vf``Derived::vf``Base::vf`

`C::func`与 同名`A::func`并且`A::func`是虚拟的，因此`C::func`覆盖`A::func`. `B::func`与 无关`A::func`；我不知道规范中有任何语言明确解决了这种情况。

Visual C++ 11 Beta 编译器不会为此代码发出任何警告或错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T19:58:22.510

通常，链接器不能将虚函数作为死代码消除，因为它们的地址必须出现在 vtable 中。但是，如果 vtable`struct C`被确定为死代码（如果所有构造函数也是死代码，则可能发生这种情况），那么最后剩余的引用也可以被消除。

因为函数是声明的`inline`，所以这种死代码删除优化不必等到链接时间；它可以由编译器完成。该标准说（见第 7.1.2 节）：

> **内联函数应在使用它的每个翻译单元中定义，**并且在每种情况下都应具有完全相同的定义（3.2）。[ 注意：在其定义出现在翻译单元中之前，可能会遇到对内联函数的调用。— 尾注] 如果函数的定义在其第一次声明为内联之前出现在翻译单元中，则该程序格式错误。如果具有外部链接的函数在一个翻译单元中声明为内联，则应在其出现的所有翻译单元中声明为内联；不需要诊断。`inline`具有外部链接的函数在所有翻译单元中应具有相同的地址。函数中的`static`局部变量`extern inline`总是指向同一个对象。正文中的字符串文字`extern inline`function 在不同的翻译单元中是同一个对象。[注意：出现在默认参数中的字符串文字不在内联函数的主体中，这仅仅是因为该表达式用于该内联函数的函数调用中。— 尾注] 在`extern inline`函数体中定义的类型在每个翻译单元中都是相同的类型。

如果编译器可以确定该函数从未在*此*翻译单元中使用，则它知道任何使用该函数的翻译单元必须包含其自己的相同定义，并将生成代码。所以它可以跳过代码生成，就好像它根本没有外部链接一样。

然而，生成警告是完全没有意义的，因为会有大量的误报（当`inline`函数被 odr-used 并且在其他编译单元中生成代码时）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T19:56:09.427

[让我为你谷歌它。](http://msdn.microsoft.com/en-us/library/z85eyax0%28v=vs.71%29.aspx)

> **`function`: 未引用的本地函数已被删除**
> 
> 给定的函数是本地的，在模块的主体中​​没有被引用；因此，该函数是死代码。
> 
> 编译器没有为这个死函数生成代码。

编译器静态确定该函数未被使用，因此它没有为该函数生成代码并警告您有无用的代码。比通常的*未使用变量*警告涉及更多，但效果大致相同：死代码气味。

# java - 如何在 JPanel 上创建一个新的画布？

> ID：10488177
> 
> 赞同：0
> 
> 时间：2012-05-07T19:49:06.707
> 
> 标签：java, swing, awt, jpanel

我正在 java 上制作类似 MSPaint 的应用程序，但我坚持创建新画布（白色背景 JPanel）

我的代码是这样的：

```
public void creaLienzo(){
        BufferedImage canvas=new BufferedImage(lienzo.getWidth(),
                lienzo.getHeight(),BufferedImage.TYPE_INT_RGB);
        Graphics2D g2=canvas.createGraphics();
        g2.setBackground(Color.WHITE);
        lienzo.paint(g2);
    } 
```

但是 JPanel 不绘制白色背景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:51:41.980

设置背景不是这样做的方法。

由于您只需要一次，请使用：

```
g2.setColor(Color.WHITE);
g2.fillRect(0, 0, getWidth(), getHeight()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T23:13:16.177

假设您有一个单独的画布面板，您可以这样做。

```
 public void addNew(JPanel panel)
 {
   panel.removeAll();
   panel.add(new Canvas());
 } 
```

您可以使用设置 jPanel 的背景颜色

```
jPanelName.setBackground(Color.white); 
```

# jquery - 在手机上禁用水平滚动 CSS

> ID：10488188
> 
> 赞同：1
> 
> 时间：2012-05-07T19:49:48.233
> 
> 标签：jquery, css

问题：如何删除具有固定宽度且绝对定位在整个页面左侧和右侧的 div 的水平滚动？

当我在手机上查看此内容时，我可以水平滚动查看多余的 div 内容。我只希望 div 向页面中心移动，然后只显示一点动画。

见演示：

[http://jsfiddle.net/PRQYJ/1/](http://jsfiddle.net/PRQYJ/1/)

# c# - 使用 SelectedDate 添加到 BlackoutDates

> ID：10488192
> 
> 赞同：0
> 
> 时间：2012-05-07T19:50:14.630
> 
> 标签：c#, wpf, xaml

下面包含一个小型演示程序。要重现该问题，请选择一个日期并单击“BlackoutDate”按钮。在我的系统上，我得到了一个`ArgumentOutOfRange`例外。

对于如何解决这个问题，有任何的建议吗？

XAML：

```
<Window x:Class="CalendarBlackoutDate.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <StackPanel>
        <Calendar Name="calendar"/>
        <Button Name="blackoutDateButton" Content="BlackoutDate" Click="blackoutDateButton_Click"/>
    </StackPanel>
</Window> 
```

C＃：

```
using System.Windows;
using System.Windows.Controls;

namespace CalendarBlackoutDate
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void blackoutDateButton_Click(object sender, RoutedEventArgs e)
        {
            calendar.BlackoutDates.Add(
                new CalendarDateRange(
                    calendar.SelectedDate.Value));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:34:25.390

所选日期的日历与停电相同？？所选日期不能为不适用日期。

```
 calendar1.BlackoutDates.Add(
            new CalendarDateRange(
                calendar2.SelectedDate.Value));

<Calendar Name="calendar1"/>
<Calendar Name="calendar2"/> 
```

如果一个日历

```
if (calendar1.SelectedDate == null) return;
DateTime dtBO = (DateTime)calendar1.SelectedDate;
calendar1.SelectedDate = null;
calendar1.BlackoutDates.Add(new CalendarDateRange(dtBO)); 
```

# c# - 如何通过从 datagridview 中选择行来删除和更新文本文件中的信息？

> ID：10488193
> 
> 赞同：0
> 
> 时间：2012-05-07T19:50:15.143
> 
> 标签：c#

像这样的文本文件：

```
id,name,username,password
1,x,js,111
2,y,mm,222 
```

我可以从文件中读取并将其放在 datagridview 上，这是代码

```
 private void buttonTadd_Click(object sender, EventArgs e)
    {
        FileStream fs = new FileStream(@"C:\Users\HP\Documents\Visual Studio 2008\Projects\BankServer\TellerFile.txt", FileMode.Append);
        StreamWriter sw = new StreamWriter(fs);
        sw.WriteLine(textBoxTNumber.Text +","+ textBoxTName.Text +","+ textBoxTUserName.Text +","+ textBoxTPassword.Text);
        sw.Close();
        dataGridViewTellers.Rows.Clear();
        StreamReader sr = new StreamReader(@"C:\Users\HP\Documents\Visual Studio 2008\Projects\BankServer\TellerFile.txt");
        string line;
        while ((line = sr.ReadLine()) != null)
        {
            dataGridViewTellers.Rows.Add(line.Split(','));
        }
        sr.Close();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T04:56:30.420

您可以使用正则表达式模式匹配来阅读它

`File.WriteAllText("Path", Regex.Replace(File.ReadAllText("Path"), "[Pattern]", "Replacement"));`

这个[链接](https://stackoverflow.com/questions/7370891/how-to-search-for-a-string-in-text-file-in-c-sharp)也可能有帮助

# android - ios报警功能受限？

> ID：10488200
> 
> 赞同：1
> 
> 时间：2012-05-07T19:50:43.007
> 
> 标签：android, ios, notifications, uilocalnotification, alarm

我有一个适用于 Android 和 iOS 的应用程序。我添加了一个本地通知，在应用程序用户指定的时间每 24 小时触发一次。在 Android 中，本地通知功能正是我所需要的，但在 iOS 中，它似乎缺少我需要的功能，除非我可能遗漏了一些东西......

假设用户将触发通知的时间设置为上午 11:00。在 Android 中，在上午 11 点，它会唤醒应用程序，转到广播接收器，我可以在调用 API 以获取最新数据的方法中运行代码。获取数据后，它会将通知发布给用户。

在 iOS 中，似乎必须预先安排发布给用户的数据。所以我必须在安排通知期间创建通知消息。我需要的是能够做一些更像上面例子的事情。

所以问题是，在计划触发通知时，我需要检查新数据，而不是前一天......

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T21:24:47.580

iOS 上并不完全存在相同的功能。

您可以使用`UILocalNotification`对象的功能设置本地通知。有了它，您可以设置`fireDate`等，这有点像没有服务器的推送通知。您可以发送消息、在应用图标上添加徽章、播放声音等。

现在的问题是操作系统没有启动该应用程序。该应用程序只是在操作系统中注册一个通知，然后在当时进行处理`fireDate`。这意味着您将无法检查数据并验证是否继续通知等。

[UILocalNotification 类参考](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html)

# jquery - jQuery简单的分页链接

> ID：10488202
> 
> 赞同：0
> 
> 时间：2012-05-07T19:50:45.727
> 
> 标签：jquery, plugins, pagination

是否有任何脚本或插件可以递归地更改分页链接的页码？

例如：

```
var max_links = 50;
var visible_links = 10;
var show_next = true;
var show_last = true;
var active_class = '.active';

$('.pagination-links').paginate();

<ul class="pagination-links">
<li><a></a></li>
</ul> 
```

我的意思是我只需要生成分页链接栏并很好地制作动画

谢谢你的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:54:54.750

看看这个：

[http://d-scribe.de/webtools/jquery-pagination/demo/demo_options.htm](http://d-scribe.de/webtools/jquery-pagination/demo/demo_options.htm)

# python - Python - 如何在列表中存储套接字和用户名？

> ID：10488213
> 
> 赞同：0
> 
> 时间：2012-05-07T19:51:48.113
> 
> 标签：python

有什么办法可以将套接字和用户名存储在列表中？我认为这是不可能的，因为列表中需要一个整数来存储索引。你们会建议我做什么？真的没有头绪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:10:33.290

最简单的方法是将元组存储在列表中。

```
l = list()
l.add(tuple(username, socket))

print l[0][0], l[0][1] # will print username and soket of first item 
```

或者您可以定义类，例如 UserSock 并用此类的实例填充列表

```
class UserSock:
    def __init__(self, username, socket):
        self.username = username
        self.socket = socket

l = list()
l.add(UserSock(username, socket))

print l[0].username l[0].socket # will print username and soket of first item 
```

# android - TextView 和 RelativeLayout 中的双中心文本问题

> ID：10488214
> 
> 赞同：1
> 
> 时间：2012-05-07T19:51:58.143
> 
> 标签：android, android-layout

我在已经居中的 TextView 中居中文本时遇到问题：

就是这样的布局：

```
<RelativeLayout>... 
<ImageView
    android:id="@+id/image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:src="@drawable/w0"
    android:layout_margin="10dip"
    android:background="@color/green1"
    />

<TextView
    android:id="@+id/temperature"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_alignBottom="@id/image"
    android:layout_alignTop="@id/image"
    android:layout_toRightOf="@id/image"
    android:text="15º"
    android:textSize="60dip"
    style="bold"
    android:textColor="@color/blue"
    android:gravity="center"
    android:layout_marginLeft="7dip"
    android:background="@color/green1"
    />

<TextView
    android:id="@+id/min_temperature"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@id/temperature"
    android:layout_toRightOf="@id/temperature"
    android:text="M 21º"
    android:textSize="20dip"
    style="bold"
    android:textColor="@color/blue"
    android:layout_marginLeft="5dip"
    android:background="@color/orange1"
    />

<TextView
    android:id="@+id/max_temperature"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@id/temperature"
    android:layout_toRightOf="@id/temperature"
    android:text="m 10º"
    android:textSize="20dip"
    style="bold"
    android:textColor="@color/blue"
    android:layout_marginLeft="5dip"
    android:background="@color/orange2"
    /> 
```

这就是显示的布局图像：

![布局图像](../Images/3a29522304fa6a8254165cf44ab34945.png)

我不明白为什么 15º 不在 TextView 中居中。问题是由于 TextView 使用 alignTop 和 alignBottom 强制居中，但我不明白为什么它不起作用。我知道我可以使用一些嵌套布局来解决这个问题，但我更喜欢仅使用 RelativeLayout 来获得解决方案，或者如果无法理解原因。

还有一种解决方案可以像现在一样将最大和最小 TextViews 与 15º 文本（不是 TextView）的顶部和底部对齐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:13:29.840

> 还有一种解决方案可以像现在一样将最大和最小 TextViews 与 15º 文本（不是 TextView）的顶部和底部对齐。

*   我不这么认为。您只能相对于 View 所代表的实际框进行制作。在 TextView 的情况下，框比文本大。无论文本在哪里或看起来如何，您所做的任何关系都将使用 Box 的位置。

尝试使用

android:layout_centerVertical="true"

除了你现在的重力之外，你的温度 TextView 上。

# c# - 带有嵌套循环的 Linq XML 查询

> ID：10488217
> 
> 赞同：0
> 
> 时间：2012-05-07T19:52:12.580
> 
> 标签：c#, xml, linq

我想阅读下面的 XML 并按以下顺序打印输出。你能帮忙查询吗？

![在此处输入图像描述](../Images/f197417e90a8b133e7794e6733ece388.png)

10 学科 1 A1 10 学科 2 B1 10 学科 3 C1 20 学科 1 B2 20 学科 2 A1 20 学科 3 C2

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T21:14:26.997

这是一个示例，您可以如何以所需的形式进行查询：

```
XDocument doc = XDocument.Load("test.xml");
var query = from l in doc.Descendants("L1")
            let id = l.Attribute("id").Value
            from subject in l.Descendants("Subject")
            select new
            {
                Id = id,
                SubjectName = (string)subject.Attribute("SubjectName"),
                Score = (string)subject.Attribute("Score")
            };

foreach (var result in query)
{
    Console.WriteLine(result);
} 
```

**输出：**

```
{ Id = 10, SubjectName = Subject1, Score = A1 }
{ Id = 10, SubjectName = Subject2, Score = B1 }
{ Id = 10, SubjectName = Subject3, Score = C1 }
{ Id = 20, SubjectName = Subject1, Score = B2 }
{ Id = 20, SubjectName = Subject2, Score = A1 }
{ Id = 20, SubjectName = Subject3, Score = C2 } 
```

# c# - Scrollviewer 逻辑滚动与物理滚动动画（触摸）

> ID：10488219
> 
> 赞同：1
> 
> 时间：2012-05-07T19:52:18.053
> 
> 标签：c#, wpf, scrollviewer

我有一个包含堆栈面板的滚动查看器。堆栈面板充满了我创建的用户控件。我想使用逻辑滚动，但使用左右平移的物理滚动方式。因此，当我将内容向左或向右平移并松开时，内容应与最明显的控件开始位置对齐。我正在使用 Microsoft Surface 的输入模拟器来模拟触摸。任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T22:40:02.770

您必须为任何自定义滚动实现 IScrollInfo 接口。以下链接应该会有所帮助

[http://www.switchonthecode.com/tutorials/wpf-tutorial-implementing-iscrollinfo](http://www.switchonthecode.com/tutorials/wpf-tutorial-implementing-iscrollinfo)

# java - MySQL InnoDB 中查询后获取的锁是什么

> ID：10488223
> 
> 赞同：1
> 
> 时间：2012-05-07T19:52:32.923
> 
> 标签：java, mysql

我正在尝试调查我的应用程序中的死锁问题。我的桌子看起来像这样。

```
CREATE TABLE `requests` (
  `req_id` bigint(20) NOT NULL auto_increment,
  `status` varchar(255) default NULL,
  `process_id` varchar(200) default NULL,
  PRIMARY KEY  (`req_id`),
  KEY `status_idx` USING BTREE (`status`),
  KEY `pk_idx_requests` USING BTREE (`req_id`),
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

*   服务（多线程）在此表上发出插入语句。
*   多个客户端在两个单独的事务中按顺序发出以下查询。

    update requests set process_id='" + hostName + "' where status='Received' and process_id is null order by req_id asc limit 100"

    select * from requests where process_id='"+ hostName + "' where status='Received';

    更新请求 set status='Processing' where req_id='xyz'

第三个查询中的 Req_id 是从第二个查询中检索到的请求 ID 列表。

但有时在客户端，我们会看到以下异常。

```
Deadlock found when trying to get lock; try restarting transaction
org.hibernate.exception.LockAcquisitionException: could not execute native bulk manipulation query 
```

上述查询是否会导致死锁，如果是，我们该如何解决？还有没有办法在本地重现这个问题？

这是“显示 innodb 状态”的输出

```
LATEST DETECTED DEADLOCK
------------------------
120507  6:03:21
*** (1) TRANSACTION:
TRANSACTION 115627, ACTIVE 1 sec starting index read
mysql tables in use 1, locked 1
LOCK WAIT 3 lock struct(s), heap size 1248, 25 row lock(s)
MySQL thread id 432399, OS thread handle 0x419e4940, query id 4111695 * * * Searching rows for update
update requests set process_id='**' where status='Received' and process_id is null order by req_id asc limit 100
*** (1) WAITING FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 4 page no 3797 n bits 136 index `PRIMARY` of table `db`.`requests` trx id 115627 lock_mode X locks rec but not gap waiting
Record lock, heap no 67 PHYSICAL RECORD: n_fields 27; compact format; info bits 0
*** (2) TRANSACTION:
TRANSACTION 115626, ACTIVE 1 sec updating or deleting
mysql tables in use 1, locked 1
3 lock struct(s), heap size 1248, 2 row lock(s), undo log entries 1
MySQL thread id 432403, OS thread handle 0x41c19940, query id 4111694 * * *  Updating
update requests set status='Processing', process_id='**' where req_id=3026296
*** (2) HOLDS THE LOCK(S):
RECORD LOCKS space id 4 page no 3797 n bits 136 index `PRIMARY` of table `db`.`requests` trx id 115626 lock_mode X locks rec but not gap
Record lock, heap no 67 PHYSICAL RECORD: n_fields 27; compact format; info bits 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T20:49:00.300

**一些背景**

MySQL 在第一次访问记录时对 UPDATE 语句进行写锁定。它不会将锁从读取提升到写入。它[基于当前索引锁定](http://dev.mysql.com/doc/refman/5.0/en/innodb-locks-set.html)。

在您的 UPDATE 语句中，MySQL 很可能使用状态列上的索引，因此 MySQL 会锁定 status = 'Received' 的每条记录。

请注意，只要您锁定多个唯一记录（使用唯一索引，例如主键），您就锁定了一个间隙（或范围）。

对单个记录的更新仍然需要下一个键锁，这意味着它会锁定所选记录和索引中的下一个记录。

同一索引上的两个 UPDATES（都具有下一个键）锁定不会冲突（它们将始终以相同的顺序锁定）。但是，由于您的范围锁定是针对二级索引的，因此它可能会死锁。

**这是正在发生的情况**：

假设您有两条记录，req_ids 为 1 和 2。

你的第一个事务根据状态索引更新，需要同时锁定记录 1 和记录 2，但不保证与主键顺序相同，所以它锁定记录 2，并且即将锁定记录 1。

您的第二个事务锁定 req_id 索引，需要更新记录 1。它立即锁定记录 1，但还需要对记录 2 执行 next-key 锁定。

这两个事务现在陷入僵局。事务 1 需要锁定记录 1，事务 2 需要锁定记录 2。

**解决方案**

为避免在您的情况下出现死锁，您可以使用 显式锁定整个表`LOCK TABLES`，或者在事务失败时简单地重试事务。MySQL 将检测到死锁，并且您的一个事务将被回滚。

MySQL 确实提供了一些说明来[帮助您处理死锁](http://dev.mysql.com/doc/refman/5.0/en/innodb-deadlocks.html)。

您似乎还应该删除冗余键 pk_idx_requests，因为您的主键已经包含该列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:20:16.207

是的，这些查询可能会导致死锁。事实上，正如 MySQL 文档中所提到的，即使在仅插入或删除单行的事务的情况下，您也可能会出现死锁。了解[如何应对死锁](http://dev.mysql.com/doc/refman/5.0/en/innodb-deadlocks.html)

您可以尝试索引 process_id 以尝试加快查询/更新。

# css - DIV 没有环绕它的子元素？

> ID：10488227
> 
> 赞同：0
> 
> 时间：2012-05-07T19:52:58.183
> 
> 标签：css

所以这是我的代码：

```
#headerMenu_outer #headerMenu_inner
{
    background-color:#333333;
}
#headerMenu_outer #headerMenu_inner li
{
    padding-left:15px;
    padding-right:15px; 
    text-align:center;
    font-size:13px;
    font-weight:bold;
    display:inline;
    color:#00FF33;
    background-color:#00CCCC;
    cursor:pointer;
} 
```

我希望 headerMenu_inner 位于 headerMenu_outer 的中心。通常，“margin-left：auto”和“margin-right：auto”有效。但是，headerMenu_inner 占据了 headerMenu_outer 的整个宽度。反正有没有让它不这样做？我希望它像李需要的那样宽。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T19:56:17.597

`#headerMenu_inner`很可能是块级元素，因此会占用尽可能多的水平空间。为该元素分配一个宽度，然后执行您的边距技巧，例如`margin: 0 auto`将其居中。

如果您希望它与 LI 一样宽，（在我的脑海中）将 LI 元素设置为不换行，然后将“内部”元素设置为`display: inline-block`.

# objective-c - 更改块内 NSString 的值

> ID：10488229
> 
> 赞同：2
> 
> 时间：2012-05-07T19:53:06.457
> 
> 标签：objective-c, ios

我在块内将值设置为 NSString 时遇到问题。

```
__block NSString *cityID = [[NSString alloc] init];
AFJSONRequestOperation *operation = [AFJSONRequestOperation
                                     JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id json) {
                                         cityID = [NSString stringWithFormat:@"%@",[[json valueForKeyPath:@"location"] valueForKey:@"id"]];
                                         NSLog(@"city id for 621352674 = %@",cityID);
                                     } failure:nil]; 
[operation start];
NSLog(@"city id for 621352674 = %@",cityID); 
```

第一个 NSLog 显示了 cityID 的正确值。但第二个什么也没显示。如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:58:57.880

第二个`NSLog()`不是等待块完成。这实际上是操作的重点：它在后台运行，因此当通过网络获取数据时，主线程和应用程序的 UI 不会被锁定。当您在开始操作后立即进行该调用时，该字符串的值没有改变。如果您更改 s 中字符串的文字部分`NSLog()`：

```
 NSLog(@"In Block: city id for 621352674 = %@",cityID);
                                 } failure:nil]; 
[operation start];
NSLog(@"After operation start: city id for 621352674 = %@",cityID); 
```

你可能会更清楚发生了什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T19:59:06.503

实际上，第二个 NSLog 先出现，第一个 NSLog 再出现......所以你收到的反馈是正确的。你没问题，你的字符串值已经设置好了，当操作完成时......

# java - Java - 在哪里放置 3rd 方 JAR 并在 Linux 上设置类路径

> ID：10488231
> 
> 赞同：2
> 
> 时间：2012-05-07T19:53:13.267
> 
> 标签：java, jar

基本上两个问题：

1) 我的第三方 JAR 应该去哪里？目前我不道德地将它们放在我的应用程序的包中，这是不道德的，例如因为第三方库是较低级别的，应该能够被我的所有应用程序依赖。

2）应该在哪里设置类路径？我看过的教程让它听起来应该是一个全局变量，但我不知道，因为它需要依赖于项目，即项目 X 需要库 L 和 M，但项目 Y 需要库 M 和 N。目前我只是为每个应用程序创建一个“cp”文件，但我想知道是否有更规范的 style.Z

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T20:04:26.227

你放入的罐子

```
JAVA_HOME/jre/lib/ext 
```

不需要在类路径中指定。因此，这对于您经常使用的库（例如 apache-commons）很有用。

很少使用的库最好用类路径调用。

设置类路径取决于您的使用情况，以及您是否在单用户机器上工作，是客户端还是服务器。许多 Java 应用程序是为服务器设计的，而您恰好只有一个类路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T20:00:46.427

1> 在我们的项目中，我们制作了一个仅包含第三方 jar 的“第三方”项目。主要应用程序位于一个单独的项目中，该项目仅引用第三方项目。

所以第一个问题的答案可能是，创建一个名为“第三方”的单独项目并将所有 jar 放在那里。

2> 通常，在 Linux 中，您制作 shell 变量并将它们指向您的 jars/class 文件，如下所示：-

```
# export GWT_HOME=/opt/smartgwt.jar 
```

然后，当您调用 Java 时，可以执行以下操作：-

```
# java -cp $GWT_HOME <your_main_class> 
```

# jira - 一小时内查询 Jira 状态变化

> ID：10488238
> 
> 赞同：1
> 
> 时间：2012-05-07T19:53:47.300
> 
> 标签：jira, jql

我需要在创建的一个小时内向 Jira 查询“进行中”的问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:36:13.833

根据[最新的 JIRA API 文档](http://docs.atlassian.com/jira/REST/latest/)，有一个用于 JIRA 的搜索 api。这是文档的链接：

[http://docs.atlassian.com/jira/REST/latest/#id161575](http://docs.atlassian.com/jira/REST/latest/#id161575)

此链接显示了如何针对搜索 api 发出 JQL 查询的详细信息。

[JIRA JQL 按日期搜索 - 有没有办法获取 Today() (Date) 而不是 Now() (DateTime)](https://stackoverflow.com/questions/2713770/jira-jql-searching-by-date-is-there-a-way-of-getting-today-date-instead-of)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T16:54:16.730

```
status = "In Progress" AND created < '1d' 
```

我希望这可以帮助你。如果你想看最近的，只需如下：

```
status = "In Progress" AND created < '1d' ORDER BY created DESC 
```

# c# - 查找丢失的外键

> ID：10488244
> 
> 赞同：1
> 
> 时间：2012-05-07T19:54:08.453
> 
> 标签：c#, linq, linq-to-sql

好的，我认为这很容易。`tblWorkouts`我在和之间有一对多的关系`tblPersonalRecords`。我现在已经删除了一些行`tblWorkouts`而不删除它们`tblPersonalRecords`（我应该设置一个外键和一个级联删除......）。

我试图找出一个查询来查找`tblPersonalRecords`. 这是我尝试过的：

```
from s in db.tblPersonalRecords
where s.tblWorkoutRecord.WorkoutSummaryID == null
select s 
```

那是行不通的。如何编写 LINQ 查询来查找我的孤立行？如果这有所作为，我正在使用 Linq2Sql。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T20:37:05.110

也许我误解了这个问题，但是当您从 tblWorkouts 删除行后根本没有更新行时，为什么要检查 tblPersonalRecords 中的值是否为空？

我希望可能的外键值现在指向 tblWorkouts 中不再存在的行，而不是为空。

如果是这样的话，那么也许这样的事情会有所帮助：

```
var ids = from w in db.tblWorkouts
          select w.id;

var rows = from s in db.tblPersonalRecords
           where !ids.Contains(s.tblWorkoutRecord.WorkoutSummaryID)
           select s; 
```

无论如何，如果您的原始声明，编译器会抱怨什么？你得到什么类型的错误？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T20:06:51.027

阅读您对您可能想要的问题的评论：

```
from s in db.tblPersonalRecords
where !db.PersonalWorkout.Any(x => s.WorkoutRecordID == x.WorkoutRecordID)
select s 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T21:06:19.617

这是有效的：

```
var result = from s in db.tblPersonalRecords
                         join j in db.tblWorkoutRecords on s.WorkoutRecordID equals j.WorkoutRecordID into PersonalWorkout
                         from j in PersonalWorkout.DefaultIfEmpty()
                         where j == null
                         select new
                         {
                             PersonalRecordID = s.PersonalRecordID,
                             WorkoutRecordIDPR = s.WorkoutRecordID,
                             WorkoutRecordID = j == null ? 0 : 1
                         }; 
```

# c# - 如何将数字的数字转换为 ASCII 字节？

> ID：10488245
> 
> 赞同：0
> 
> 时间：2012-05-07T19:54:13.680
> 
> 标签：c#, ascii

如果有`int x = 24`，如何将其转换为 2 字节数组，其中第一个字节存储`2`( `50`) 的值，第二个字节存储`4`( `52`) 的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:57:26.820

`System.Text.Encoding.ASCIIEncoding.GetBytes(x.ToString());`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T19:59:47.960

最简单的方法是先转换为字符串，然后将其转换为字节。

```
byte[] bytes = System.Text.Encoding.ASCII.GetBytes(x.ToString()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T20:08:26.250

您可以使用除法和模运算符：

```
byte[] data = new byte[] { (byte)(48 + x / 10), (byte)(48 + x % 10) }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T19:58:48.193

```
int x_int = 24;
string x_string = x_int.ToString();
var x_bytes = (from x in x_string select Convert.ToByte(x)).ToArray(); 
```

# regex - Google Docs 获取当前在给定时间编辑的协作者数量

> ID：10488246
> 
> 赞同：2
> 
> 时间：2012-05-07T19:54:17.630
> 
> 标签：regex, api, google-docs, google-docs-api

我想知道，是否可以访问**当前正在编辑 google doc 的协作者的数量**。

我的帐户拥有该文档，并且为公众启用了编辑功能。

我在考虑这些方面：

1) Google Docs API - 我试图在其中找到一些东西，但也许我没有找到正确的东西。如果可以实现我需要的东西，有没有人有经验？

2）通过命令行浏览器访问文档（并以某种方式授权 - 知道怎么做吗？），只需拉出整个 HTML 树，然后用正则表达式解析 HTML 以找到我要查找的特定数字，然后将其变为例如，每小时运行一次的 cron 作业。

非常感谢任何反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:43:34.520

> 1) Google Docs API - 我试图在其中找到一些东西，但也许我没有找到正确的东西。如果可以实现我需要的东西，有没有人有经验？

还没有这方面的线索。

> 2）通过命令行浏览器访问文档（并以某种方式授权 - 知道怎么做吗？），只需拉出整个 HTML 树，然后用正则表达式解析 HTML 以找到我要查找的特定数字，然后将其变为例如，每小时运行一次的 cron 作业。

[GoogleCL](http://code.google.com/p/googlecl/)听起来像你想要的。它将允许您从命令行编辑/删除/创建/下载/上传 Google Docs（从外观上看，还有更多）。从那里，您可能可以将此文档移植到您的本地计算机并做任何您想做的事情。

[GoogleCL Docs 的一些文档/示例](http://code.google.com/p/googlecl/wiki/ExampleScripts#Docs)

例如，

`google docs get "Super Cool Doc" superlocaldoc.txt`

对于身份验证，GoogleCL 似乎[打开了一个浏览器](http://code.google.com/p/googlecl/wiki/ConfigurationOptions)来对每个 Google 服务（文档、日历等）进行身份验证，但它声称您只需这样做一次（每个会话一次？每个满月一次？谁知道呢）。

# apache - 使用 ajp 协议连接到备用备用主机别名

> ID：10488253
> 
> 赞同：1
> 
> 时间：2012-05-07T19:55:07.953
> 
> 标签：apache, tomcat, reverse-proxy, ajp

我通过 ajp 协议连接到两个 tomcat 应用程序。两者都作为 ROOT.war 在单独的 tomcat 虚拟主机中运行。在服务器上，我已经配置了 /etc/hosts 文件

```
127.0.0.1       localhost  tcvh1 tcvh2 
```

阿帕奇httpd.conf：

```
Listen 80
NameVirtualHost *:80

<VirtualHost *:80>
        #ProxyPreserveHost On
        ServerName app1.example.com
        ProxyPass / ajp://tcvh1:8082/
        ProxyPassReverse / ajp://tcvh1:8082/

</VirtualHost>

<VirtualHost *:80>
        #ProxyPreserveHost On
        ServerName app2.example.com
        ProxyPass / ajp://tcvh2:8082/
        ProxyPassReverse / ajp://tcvh2:8082/
</VirtualHost> 
```

雄猫：

我将应用程序部署为： app1 -- $CATALINA_HOME/tcvh1/ROOT.war app2 -- $CATALINA_HOME/tcvh2/ROOT.war

现在，如果我将 tomcat 更改为在端口 8080 上运行，并将代理通行证更改为连接到[http://tcvh1:8080](http://tcvh1:8080)，**那么它可以工作**。但是如果我使用 AJP 的配置，**它就不起作用**。

为什么我的主机别名不适用于 AJP？有没有办法让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:09:26.817

它不起作用，因为 mod_proxy_ajp 总是将 httpd 接收到的主机头传递给 Tomcat，而 mod_proxy_http 将使用 ProxyPass 中定义的主机，除非 ProxyPreserveHost 设置为 On。

因为 - 就 httpd 而言 - 您的虚拟主机是 app1.example.com 和 app2.example.com，这些都是传递给您的 Tomcat 实例的内容。Tomcat 没有这些虚拟主机的记录。它有 tcvh1 和 tcvh2。因此，所有请求都将被路由到默认虚拟主机（在 server.xml 中的 Engine 元素上定义任何一个）。

有几种方法可以解决这个问题：

1.  重命名 Tomcat 虚拟主机以匹配您的 httpd 虚拟主机
2.  将别名（请参阅[http://tomcat.apache.org/tomcat-7.0-doc/config/host.html#Host_Name_Aliases](http://tomcat.apache.org/tomcat-7.0-doc/config/host.html#Host_Name_Aliases)）添加到您的 Tomcat 虚拟主机。

就个人而言，我会选择选项 2。更快更简单。

# ios - MKMapView 中的箭头图标

> ID：10488256
> 
> 赞同：0
> 
> 时间：2012-05-07T19:55:11.793
> 
> 标签：ios, cocoa, mkmapview

我的 iOS 应用程序中有一个 MKMapView，并想在其上添加“位置箭头”图标。我指的是您在标准地图应用程序上看到的箭头，它允许您转到用户位置。

知道如何添加它吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T10:41:48.463

不幸的是，位置服务没有标准图标。使用[Glyphish](http://glyphish.com/)之类的图标并创建自己的工具栏按钮。

这是默认情况下应包含但不包含的内容之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T01:40:06.937

**MKUserTrackingBarButtonItem**应该是您问题的答案。我相信下面的代码会有所帮助。

```
MKUserTrackingBarButtonItem *buttonItem = [[MKUserTrackingBarButtonItem alloc] initWithMapView:_mapView];
NSMutableArray *items = [[NSMutableArray alloc] initWithArray:curBar.items];
[items insertObject:buttonItem atIndex:0];
[curBar setItems:items]; //curBar is an UIToolbar 
```

# c# - C# TCP 服务器缓冲区

> ID：10488262
> 
> 赞同：-1
> 
> 时间：2012-05-07T19:55:31.163
> 
> 标签：c#, .net, sockets, networking, protocols

我一直试图让它工作一段时间，我什至搜索了大部分论坛，但到目前为止我一无所获。

我的问题： Process_send 完美运行，因为我的客户端可以接收服务器发送的所有内容。但是，当客户端说什么时，process_receive 函数中的缓冲区将返回为 null，即使 TransferredBytes 属性显示“46”，这是它应该是的。

请让我知道如何解决此问题。谢谢！

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net.Sockets;
using System.Threading;
using System.Net;

namespace MonkeySyncServer
{
    public partial class ServerForm : Form
    {
        public ServerForm()
        {
            InitializeComponent();
        }

        private void btn_startServer_Click(object sender, EventArgs e)
        {
            Server s = new Server(100, 1024);
            s.Init();
            s.Start(new IPEndPoint(IPAddress.Any, 1000));
        }

    }
    /// <summary>
    /// Implements the connection logic for the socket server.  
    /// </summary>
    class Server
    {
        private int m_numConnections;   // the maximum number of connections the sample is designed to handle simultaneously 
        private int m_receiveBufferSize;// buffer size to use for each socket I/O operation 
        BufferManager m_bufferManager;  // represents a large reusable set of buffers for all socket operations
        const int opsToPreAlloc = 2;    // read, write (don't alloc buffer space for accepts)
        Socket listenSocket;            // the socket used to listen for incoming connection requests
        // pool of reusable SocketAsyncEventArgs objects for write, read and accept socket operations
        SocketAsyncEventArgsPool m_readWritePool;
        int m_totalBytesRead;           // counter of the total # bytes received by the server
        int m_numConnectedSockets;      // the total number of clients connected to the server 
        Semaphore m_maxNumberAcceptedClients;

        /// <summary>
        /// Create an uninitialized server instance.  To start the server listening for connection requests
        /// call the Init method followed by Start method 
        /// </summary>
        /// <param name="numConnections">the maximum number of connections the sample is designed to handle simultaneously</param>
        /// <param name="receiveBufferSize">buffer size to use for each socket I/O operation</param>
        public Server(int numConnections, int receiveBufferSize)
        {
            m_totalBytesRead = 0;
            m_numConnectedSockets = 0;
            m_numConnections = numConnections;
            m_receiveBufferSize = receiveBufferSize;
            // allocate buffers such that the maximum number of sockets can have one outstanding read and 
            //write posted to the socket simultaneously  
            m_bufferManager = new BufferManager(receiveBufferSize * numConnections * opsToPreAlloc,
                receiveBufferSize);

            m_readWritePool = new SocketAsyncEventArgsPool(numConnections);
            m_maxNumberAcceptedClients = new Semaphore(numConnections, numConnections);
        }

        /// <summary>
        /// Initializes the server by preallocating reusable buffers and context objects.  These objects do not 
        /// need to be preallocated or reused, by is done this way to illustrate how the API can easily be used
        /// to create reusable objects to increase server performance.
        /// </summary>
        public void Init()
        {
            // Allocates one large byte buffer which all I/O operations use a piece of.  This gaurds 
            // against memory fragmentation
            m_bufferManager.InitBuffer();

            // preallocate pool of SocketAsyncEventArgs objects
            SocketAsyncEventArgs readWriteEventArg;

            for (int i = 0; i < m_numConnections; i++)
            {
                //Pre-allocate a set of reusable SocketAsyncEventArgs
                readWriteEventArg = new SocketAsyncEventArgs();
                readWriteEventArg.Completed += new EventHandler<SocketAsyncEventArgs>(IO_Completed);
                readWriteEventArg.UserToken = new AsyncUserToken();

                // assign a byte buffer from the buffer pool to the SocketAsyncEventArg object
                m_bufferManager.SetBuffer(readWriteEventArg);

                // add SocketAsyncEventArg to the pool
                m_readWritePool.Push(readWriteEventArg);
            }

        }

        /// <summary>
        /// Starts the server such that it is listening for incoming connection requests.    
        /// </summary>
        /// <param name="localEndPoint">The endpoint which the server will listening for conenction requests on</param>
        public void Start(IPEndPoint localEndPoint)
        {
            // create the socket which listens for incoming connections
            listenSocket = new Socket(localEndPoint.AddressFamily, SocketType.Stream, ProtocolType.Tcp);
            listenSocket.Bind(localEndPoint);
            // start the server with a listen backlog of 100 connections
            listenSocket.Listen(100);

            // post accepts on the listening socket
            StartAccept(null);

        }

        /// <summary>
        /// Begins an operation to accept a connection request from the client 
        /// </summary>
        /// <param name="acceptEventArg">The context object to use when issuing the accept operation on the 
        /// server's listening socket</param>
        public void StartAccept(SocketAsyncEventArgs acceptEventArg)
        {
            if (acceptEventArg == null)
            {
                acceptEventArg = new SocketAsyncEventArgs();
                acceptEventArg.Completed += new EventHandler<SocketAsyncEventArgs>(AcceptEventArg_Completed);
            }
            else
            {
                // socket must be cleared since the context object is being reused
                acceptEventArg.AcceptSocket = null;
            }

            m_maxNumberAcceptedClients.WaitOne();
            bool willRaiseEvent = listenSocket.AcceptAsync(acceptEventArg);
            if (!willRaiseEvent)
            {
                ProcessAccept(acceptEventArg);
            }
        }

        /// <summary>
        /// This method is the callback method associated with Socket.AcceptAsync operations and is invoked
        /// when an accept operation is complete
        /// </summary>
        void AcceptEventArg_Completed(object sender, SocketAsyncEventArgs e)
        {
            ProcessAccept(e);
        }

        private void ProcessAccept(SocketAsyncEventArgs e)
        {
            Interlocked.Increment(ref m_numConnectedSockets);
            Console.WriteLine("Client connection accepted. There are {0} clients connected to the server",
                m_numConnectedSockets);

            // Get the socket for the accepted client connection and put it into the 
            //ReadEventArg object user token
            SocketAsyncEventArgs readEventArgs = m_readWritePool.Pop();
            ((AsyncUserToken)readEventArgs.UserToken).Socket = e.AcceptSocket;
            byte[] d = e.Buffer;

            // As soon as the client is connected, post a receive to the connection
            bool willRaiseEvent = e.AcceptSocket.ReceiveAsync(readEventArgs);

            d = d;
            if (!willRaiseEvent)
            {
                ProcessReceive(readEventArgs);
            }

            // Accept the next connection request
            StartAccept(e);
        }

        /// <summary>
        /// This method is called whenever a receive or send opreation is completed on a socket 
        /// </summary> 
        /// <param name="e">SocketAsyncEventArg associated with the completed receive operation</param>
        void IO_Completed(object sender, SocketAsyncEventArgs e)
        {
            // determine which type of operation just completed and call the associated handler
            switch (e.LastOperation)
            {
                case SocketAsyncOperation.Receive:
                    ProcessReceive(e);
                    break;
                case SocketAsyncOperation.Send:
                    ProcessSend(e);
                    break;
                default:
                    throw new ArgumentException("The last operation completed on the socket was not a receive or send");
            }

        }

        private bool sendToClient(AsyncUserToken token, SocketAsyncEventArgs e, string s)
        {
            // Send 'Hello World' to the server
            byte[] buffer = Encoding.UTF8.GetBytes(s);
            Console.WriteLine("Sending: " + buffer.Length + " bytes of data");
            e.SetBuffer(buffer, 0, buffer.Length);            
            bool willRaiseEvent = token.Socket.SendAsync(e);
            return willRaiseEvent;
        }

        /// <summary>
        /// This method is invoked when an asycnhronous receive operation completes. If the 
        /// remote host closed the connection, then the socket is closed.  If data was received then
        /// the data is echoed back to the client.
        /// </summary>
        private void ProcessReceive(SocketAsyncEventArgs e)
        {
            m_bufferManager.SetBuffer(e);
           // check if the remote host closed the connection
            AsyncUserToken token = (AsyncUserToken)e.UserToken;
            if (e.BytesTransferred > 0 && e.SocketError == SocketError.Success)
            {
                //increment the count of the total bytes receive by the server
                Interlocked.Add(ref m_totalBytesRead, e.BytesTransferred);
              //  Console.WriteLine("The server has read a total of {0} bytes", m_totalBytesRead);
                Console.WriteLine("Received from client: {0}", Encoding.UTF8.GetString(e.Buffer, 0, e.BytesTransferred));

                byte[] data = new byte[1024];
               data = e.Buffer;
             String dataString = Encoding.UTF8.GetString(data);

                if (dataString.StartsWith("hello"))
                {
                    token.encryptionKey = Encoding.UTF8.GetString(data).Substring(5, dataString.IndexOf("world") - 5);
                    Console.WriteLine(token.encryptionKey);
                }
               /* bool willRaiseEvent = sendToClient(token, e, "hello world");

                if (!willRaiseEvent)
                {
                    ProcessSend(e);
                }*/

            }
            else
            {
                CloseClientSocket(e);
            }

        }

        /// <summary>
        /// This method is invoked when an asynchronous send operation completes.  The method issues another receive
        /// on the socket to read any additional data sent from the client
        /// </summary>
        /// <param name="e"></param>
        private void ProcessSend(SocketAsyncEventArgs e)
        {
            if (e.SocketError == SocketError.Success)
            {
                // done echoing data back to the client
                AsyncUserToken token = (AsyncUserToken)e.UserToken;
                // read the next block of data send from the client
                bool willRaiseEvent = token.Socket.ReceiveAsync(e);
                if (!willRaiseEvent)
                {
                //    e.SetBuffer(e.Offset, listenSocket.ReceiveBufferSize);
               //     ProcessReceive(e);
                }
            }
            else
            {
                CloseClientSocket(e);
            }
        }

        private void CloseClientSocket(SocketAsyncEventArgs e)
        {
            AsyncUserToken token = e.UserToken as AsyncUserToken;

            // close the socket associated with the client
            try
            {
                token.Socket.Shutdown(SocketShutdown.Send);
            }
            // throws if client process has already closed
            catch (Exception) { }
            token.Socket.Close();

            // decrement the counter keeping track of the total number of clients connected to the server
            Interlocked.Decrement(ref m_numConnectedSockets);
            m_maxNumberAcceptedClients.Release();
            Console.WriteLine("A client has been disconnected from the server. There are {0} clients connected to the server", m_numConnectedSockets);

            // Free the SocketAsyncEventArg so they can be reused by another client
            m_readWritePool.Push(e);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T21:14:37.980

只是基于代码的疯狂猜测。我建议您使用调试器逐步执行此代码，这样做时答案应该很清楚。

这些行是可疑的：

```
byte[] data = new byte[1024];
data = e.Buffer; // reassigns data, so that byte[1024] gets ignored.
String dataString = Encoding.UTF8.GetString(data); // Ignores the e.Offset value. 
```

我的猜测是缓冲区被零初始化，但由于我不知道的原因，套接字数据没有读入缓冲区的开头，而是读到其他地方。UTF8 编码器将 0 视为第一个字符（0 是 UTF8 中的字符串结尾指示符）并返回一个与 null 不同的空字符串。

将三行替换为：

```
String dataString = Encoding.UTF8.GetString(e.Buffer, e.Offset, e.BytesTransferred); 
```

# jquery - 将淡入淡出（）效果处理程序添加到 Jquery 中的切换背景图像函数

> ID：10488264
> 
> 赞同：0
> 
> 时间：2012-05-07T19:55:36.293
> 
> 标签：jquery

```
<script  type="text/javascript">

$(document).ready(function(){
  setInterval(spinna, 3000);

var index = 0,
   imgs = ['bg2.jpg', 'scrib.jpg'];
function spinna(){

      console.log(imgs[index]);
      $('#header_bg').fadeIn('slow',function(){
      $('#header_bg').css({   
        'background-image' : 'url(' + '<?php echo get_template_directory_uri(); ?>/library/images/'+ imgs[index] +'' + ')'            
      });  
   });          
    index == 0 ? index = 1 : index = 0;       
 }   
}); 
```

实时代码 [http://gmcfosho.com/](http://gmcfosho.com/)

这段代码我哪里出错了？

对此的任何帮助将是最有帮助的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:01:18.067

使用 Cycle 之类的插件可能更容易：http: [//jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/) 查看“scrollRight”效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:15:42.843

我终于找到了解决方案。有点取自对 OP 的评论。我使用了一个名为 flexslider 的插件并将其用作遮罩。这是有关如何实现的示例代码。

[http://www.designobvio.us/flex](http://www.designobvio.us/flex)

# java - JPanel 不显示按钮

> ID：10488266
> 
> 赞同：0
> 
> 时间：2012-05-07T19:55:47.227
> 
> 标签：java, swing, jframe, jpanel, jcomponent

我试图让 JPanel 显示一系列按钮。在每个按钮上都是与我的数独板值关联的值之一。我已经创建了我的板添加了一个菜单，现在我试图在菜单下方但在板之前显示可选选项......在同一个 Jframe 中。我希望我可以把我所有的按钮放到 JPanel 上，然后把那个面板放到 Frame 上。它将显示 JPanel，但不显示任何按钮。有一次我让面板显示，但它们都没有尺寸，而且有很多。我必须更具体的问题是我使用正确的代码来在我的 JPanel 上显示我的一系列按钮，该代码放置在包含我的数独板的框架中，这也是一系列按钮。

这个最终的工具栏和按钮对于这个单一的 JFrame 来说是否太多了，这就是它不起作用的原因吗？无论如何，这里只是我的 JPanel 工具栏的代码。

```
class ToolBar extends JPanel {
    // instance initializer (constructor equivalent)

    public ToolBar() {
        super();
        this.setLayout(myLayout);

        myLayout.setAlignment(FlowLayout.TRAILING);
        Button[] panelButton = new Button[size];

        //Rectangle rec = new Rectangle(330,45,BUTTON, BUTTON);
        //setBounds(rec);
        setPreferredSize(new Dimension(330, 45));

        for(int i = 0; i < size; i++) {
            Rectangle r = new Rectangle(12, 12, 22, 22);
            center = new ImageIcon(view.drawSymbol(i));

            panelButton[i]= new Button();
            panelButton[i].setIcon(center);
            panelButton[i].setOpaque(true);
            panelButton[i].setBorder(BorderFactory.createLineBorder(Color.black));
            panelButton[i].setBounds(r);

            this.add(panelButton[i]);
            this.setComponentOrientation(ComponentOrientation.LEFT_TO_RIGHT);
            this.setVisible(true);
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T20:35:15.437

我`setBounds`在工具栏上使用以使其可见，并将背景设置为红色只是为了测试它，用 Swing JButtons 替换 AWT 按钮，我还在按钮上设置了一些文本。我在我的测试代码上注释掉了一些东西以便编译，但把它们放回下面：

```
class ToolBar extends JPanel {
    // instance initializer (constructor equivalent)

    public ToolBar() {
        super();
        this.setLayout(myLayout);

        myLayout.setAlignment(FlowLayout.TRAILING);
        JButton[] panelButton = new JButton[5];
        this.setBackground(Color.red);
        this.setBounds(0, 0, 200, 200);

        //Rectangle rec = new Rectangle(330,45,BUTTON, BUTTON);
        //setBounds(rec);
        setPreferredSize(new Dimension(330, 45));

        for (int i = 0; i < 5; i++) {
            Rectangle r = new Rectangle(22, 22);                
            panelButton[i] = new JButton();
            panelButton[i].setText("       ");
            panelButton[i].setIcon(new ImageIcon(view.drawSymbol(i)));
            panelButton[i].setOpaque(true);
            panelButton[i].setBorder(BorderFactory.createLineBorder(Color.black));
            panelButton[i].setBounds(r);
            this.add(panelButton[i]);
            this.setComponentOrientation(ComponentOrientation.LEFT_TO_RIGHT);
            this.setVisible(true);
        }
    }
}; 
```

我还在下面发布了整个测试代码：

```
import java.awt.Color;
import java.awt.ComponentOrientation;
import java.awt.Dimension;
import java.awt.Rectangle;
import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JPanel;

/*
 * To change this template, choose Tools | Templates and open the template in
 * the editor.
 */
/**
 *
 * @author hahahaha
 */
public class NewJFrame extends javax.swing.JFrame {

    /**
     * Creates new form NewJFrame
     */
    public NewJFrame() {
        initComponents();
        this.add(new ToolBar());
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 400, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 300, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new NewJFrame().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    // End of variables declaration
    class ToolBar extends JPanel {
        // instance initializer (constructor equivalent)

        public ToolBar() {
            super();
            //this.setLayout(myLayout);

            //myLayout.setAlignment(FlowLayout.TRAILING);
            JButton[] panelButton = new JButton[5];
            this.setBackground(Color.red);
            this.setBounds(0, 0, 200, 200);

            //Rectangle rec = new Rectangle(330,45,BUTTON, BUTTON);
            //setBounds(rec);
            setPreferredSize(new Dimension(330, 45));

            for (int i = 0; i < 5; i++) {
                Rectangle r = new Rectangle(22, 22);
                //center = new ImageIcon(view.drawSymbol(i));
                panelButton[i] = new JButton();
                panelButton[i].setText("       ");
                //panelButton[i].setIcon(center);
                panelButton[i].setOpaque(true);
                panelButton[i].setBorder(BorderFactory.createLineBorder(Color.black));
                panelButton[i].setBounds(r);
                this.add(panelButton[i]);
                this.setComponentOrientation(ComponentOrientation.LEFT_TO_RIGHT);
                this.setVisible(true);
            }
        }
    };
} 
```

查找`this.add(new ToolBar());`我实例化的行并将您的工具栏添加到我的 JFrame。

一个忠告：

> 尽可能避免使用 AWT 组件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T20:27:36.683

不要使用 setPreferredSize 或 setBounds；让 LayoutManager 为您处理位置和尺寸。

根据您的需要，您可能需要考虑使用 JToolBar 而不是自己实现。

# jquery - 禁用和启用 Jquery 自动完成

> ID：10488271
> 
> 赞同：3
> 
> 时间：2012-05-07T19:56:37.040
> 
> 标签：jquery, jquery-ui, events, autocomplete

Jquery 自动完成 ( [LINK)](http://jqueryui.com/demos/autocomplete/)有一个关闭它的选项，如下所示：

```
$(input).autocomplete({ disabled: true }); 
```

我希望它被关闭，因为它的默认设置是响应 keyup。我宁愿让它在keydown上起作用。所以我把它关掉了，我写了一个带有事件 keydown 的函数，如下所示：

```
timer = 0;
function func (){ 

var val = $(input).val();
$(input).autocomplete('search', val);
}

$(input).live('keydown', function(){

    if (timer) {
        clearTimeout(timer);
    }

    timer = setTimeout(func, 50000); 
     $(input).autocomplete( "enable" );
}); 
```

它不起作用...这意味着它不会在 50000 毫秒后进行搜索，而是使用 keyup 进行默认设置。我应该改变什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:09:22.447

添加一个 keyup 事件并停止事件传播。

添加一个 keydown 事件并像这样调用它：`$("input").autocomplete('search', 'demo-value');`

```
$(input).autocomplete().keyup(function(event) {
  event.stopPropagation();
}).keydown(function() {
$(this).autocomplete('search', $(input).val());  //this or $(input)...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:01:25.463

```
$( "#autocomplete" )
      .keydown( function( event ) {
            var isOpen = $( this ).autocomplete( "widget" ).is( ":visible" );
            var keyCode = $.ui.keyCode;
            if ( !isOpen && ( event.keyCode == keyCode.UP || event.keyCode == keyCode.DOWN ) ) {
                  event.stopImmediatePropagation();
            }

      })
      .autocomplete({
            source: someSource
      }); 
```

# java - 如何提高以下从 Linkedlist 中删除元素的 java 方法的性能

> ID：10488272
> 
> 赞同：0
> 
> 时间：2012-05-07T19:56:39.067
> 
> 标签：java, multithreading, performance

从链表中删除节点的线程安全方法。

```
 public void delete(String x, LinkedList<String> list)
   {
      String lock = "false";
        for (int i = 0; i < list.size(); i++) {
            synchronized (lock) {
                if (list.get(i).equals(x)) {
                    lock = "true";
                    list.remove(i);
                }
                lock = "false";
            }
        }
   } 
```

非常感谢！

编辑：上述方法是线程安全的，但其性能需要提高。这是一道面试题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T20:00:30.190

1.  在方法本地的对象上同步并没有真正做任何有用的事情。此外，覆盖对您在同步块内锁定的对象的引用在目的上令人困惑。关于该代码用途的一些解释可能会帮助我们帮助您改进它:)

2.  实际的问题。 `get(i)`两者`remove(i)`都要求您将列表迭代到位置 i。如果使用列表的实际迭代器和迭代器的 remove 方法，则只需迭代整个列表一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T20:01:54.340

线程安全：

```
public void delete(String x, LinkedList<String> list) {
    synchronized (list) {
       for (Iterator<String> it = list.iterator(); it.hasNext();)
            if (it.next().equals(x)) it.remove();
    }
} 
```

但是，很可能，您的问题不是线程安全。您`list.delete()`在遍历列表时使用并得到了`ConcurrentModificationException`. 如果是这种情况，请随时删除同步块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T20:17:01.493

我会使用 List.removeAll

```
List<String> list = new LinkedList<>();
list.addAll(Arrays.asList("a,b,c,d,a,b,c,d,e,a,b,a,b".split(",")));
System.out.println("Before removeAll(a) " + list);

list.removeAll(Collections.singleton("a"));

System.out.println("After removeAll " +list); 
```

印刷

```
Before removeAll(a) [a, b, c, d, a, b, c, d, e, a, b, a, b]
After removeAll [b, c, d, b, c, d, e, b, b] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T21:51:26.367

```
public void delete(String x, LinkedList<String> list){
    Set<String> target = Collections.singleton(x);
    synchronized (list) {
        list.removeAll( target );
    }
} 
```

两件事情：

1.  在刚刚创建的字符串上同步什么都不做（嗯，不完全是，因为`"false"`是一个实习字符串，所有同步的代码都`"false"`将被同步，但这是一种获取应用程序范围同步的黑客方法，可能根本不是什么你打算）。您应该在列表上进行同步。使用列表的每个人都应该在列表上同步。尽管更好的做法是首先使用同步集合，从而消除`synchronized`使用代码中显式块的需要。
2.  `removeAll`通常是从集合中删除所有出现的一个或多个对象的最有效方法。在最坏的情况下，它等同于遍历集合并使用迭代器来删除项目（这是 的情况`LinkedList`），但对于某些实现（如`ArrayList`），它变得更加高效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T16:39:13.427

使用这个-> [http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#synchronizedList(java.util.List](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#synchronizedList(java.util.List) )

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T20:01:56.647

尝试使用开箱即用的 Java 集合 API 功能来同步集合。[官方文档。](http://docs.oracle.com/javase/tutorial/collections/implementations/wrapper.html)

您也可以使用迭代器来删除项目。正如文件所述：

> 如果使用显式迭代器，则必须从同步块中调用迭代器方法。不遵循此建议可能会导致不确定的行为。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-07T20:43:16.553

```
public void delete (String x, LinkedList<String> list) {

            synchronized (list) {
                Iterator<String> it = list.iterator();
                while (it.hasNext()) {
                    String y = it.next();
                    if (x.equals(y)) {
                        it.remove();
                    }
                }
            }
        } 
```

# ruby-on-rails - Rails - 使用按钮操作 UI 数据

> ID：10488273
> 
> 赞同：0
> 
> 时间：2012-05-07T19:56:52.313
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有两个包含值的列表框（select_tag），我想创建一个按钮，将值从一个传输到另一个。
我希望用户能够单击一个或多个值并将它们移动到另一个列表。
只有这样，提交按钮才会将其发送到服务器。

知道我应该如何实施它吗？
我应该使用什么组件/动作？

任何可以帮助我进一步谷歌的设计提示或参考都将受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T22:14:58.727

检查这个网站

```
http://elegantcode.com/2009/07/01/jquery-playing-with-select-dropdownlistcombobox/ 
```

基本上使用 jQuery，这是最简单的解决方案。

1.  通过它的 ID 或 css 获取元素
2.  通过选择器获取选定的值
3.  获取其他元素
4.  通过将 html 代码附加到现有列表来为新列表添加值

# batch-file - 将参数传递给 Windows 命令脚本

> ID：10488275
> 
> 赞同：1
> 
> 时间：2012-05-07T19:56:59.067
> 
> 标签：batch-file

我需要将参数从 wsf 文件传递​​到 bat 文件到 windows 命令脚本。在 wsf 文件中，我有：

```
Shell.Run("Something.bat ",&varparam,1,true) 
```

在Something.bat中：

```
sftp.exe testcommand.cmd %1 
```

在 testcommand.cmd 中：

```
open user@address
put %1 
```

但是 .cmd 文件无法访问参数值。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:53:26.890

为了将值传递到批处理中，您可以使用`call` 试试这个：

```
CALL Something.bat %varparam% 
```

而且我认为您的部分问题是您试图将值传递到已经是单独字符串的一部分的命令文件中。

你可以让你的 Something.bat 创建你的 testcommand 文件来让它工作。东西.bat：

```
echo open user@address testcommand.bat
echo put %1 >> testcommand.bat

sftp.exe -b testcommand.bat 
```

它并不完美，但我很确定

```
sftp.exe testcommand.cmd %variable% 
```

是你的问题。

# coldfusion - ColdFusion Builder - 打开项目

> ID：10488276
> 
> 赞同：3
> 
> 时间：2012-05-07T19:57:04.023
> 
> 标签：coldfusion, coldfusionbuilder

这可能听起来非常基本的 101 类型问题，但我真的需要帮助。我是 .net 后台开发人员，最近收到了 ColdFusion 中的现有项目代码。我想在 CF Builder 中打开这个现有代码。

我安装了 ColdFusion developer edition 和 ColdFusion builder 等先决条件。在 Visual Studio 中，我们通过双击资源管理器中的 csproj 文件或从文件 > 打开菜单并选择项目来执行此操作。在 CF Builder 中，我根本看不到该选项。代码中有扩展名为 CFM 和 CFC 的文件，两个 LCK 文件。在构建器中，没有打开项目选项（项目菜单中有一个，但始终处于禁用状态）。我也尝试过导入项目，但没有运气。有什么帮助吗？我正在使用 CF Builder 2 试用版。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-07T20:19:48.150

您应该能够通过以下步骤导入您的项目：

1.  文件 -> 导入
2.  其他 -> 现有文件夹作为新项目
3.  选择文件夹并提供项目名称（这仅在 IDE 内部）
4.  让 CFBuilder 做它的事情导入
5.  导入后，新项目将出现在您的项目视图中
6.  右键单击此视图中的项目文件夹，然后选择 Apply CF Nature

那应该将您的 CFML 项目导入 IDE 并“标记”为 CFML 项目。

# c# - 为什么我的应用程序无法打开存在的文件？

> ID：10488277
> 
> 赞同：0
> 
> 时间：2012-05-07T19:57:25.880
> 
> 标签：c#, web-services

我目前正在构建一个发送文件的 Web 服务，这也从正在发送的文件中获取 mime 类型，但由于某种原因，我的应用程序看不到文件，更不用说打开了。

我的路径是

```
file:\\C:\\Users\\Martin\\Documents\\Visual Studio 2010\\Projects\\HTML5Streamer\\
Debug\\Player\\player.html 
```

（这是由我的应用程序创建的。当我在本地使用 Chrome 并粘贴该地址时，我的应用程序被编译到该路径中的调试文件夹，它可以正常工作，chrome 可以查看和访问该文件，

我的 VS 以管理员身份运行，因此应用程序编译也以管理员身份运行，为什么它会获得正确的路径，然后`File.Exists()`说它不存在

```
 public string getMimeFromFile(string filename)
    {
        if (!File.Exists(filename))
            throw new FileNotFoundException(filename + " not found"); // this is thrown

        byte[] buffer = new byte[256];
        using (FileStream fs = new FileStream(filename, FileMode.Open))
        {
            if (fs.Length >= 256)
                fs.Read(buffer, 0, 256);
            else
                fs.Read(buffer, 0, (int)fs.Length);
        }
        try
        {
            System.UInt32 mimetype;
            FindMimeFromData(0, null, buffer, 256, null, 0, out mimetype, 0);
            System.IntPtr mimeTypePtr = new IntPtr(mimetype);
            string mime = Marshal.PtrToStringUni(mimeTypePtr);
            Marshal.FreeCoTaskMem(mimeTypePtr);
            return mime;
        }
        catch (Exception e)
        {
            return "unknown/unknown";
        }
    } 
```

调用它的方法是

```
private void ProccessPlayerRequest(HttpListenerContext context)
        {
            Uri content_uri = context.Request.Url;
            string filePath = ApplicationPath + content_uri.AbsolutePath.Replace('/', '\\');
//ApplicationPath = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase);
            string mimeType = getMimeFromFile(filePath);

            context.Response.Headers.Add("Content-Type: " + mimeType);
            streamFileToBrowser(filePath, context);
        } 
```

使用`string filePath = Path.Combine(ApplicationPath, @"Player\player.html");`生产时

```
"file:\\C:\\Users\\Martin\\Documents\\Visual Studio 2010\\Projects\\HTML5Streamer\\Debug\\Player\\player.html" 
```

是的 file:\ 是从 .Net Framework 中获得的

```
string ApplicationPath = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase);
            Service serv = new Service(ApplicationPath); 
```

发送到构造函数的这个应用程序路径是所有正确调用给出的，所以请不要说它不应该有 file:\，因为这是由 .Net Framework 给出的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:01:30.377

尝试`file:\\`从文件名的开头删除 。

**编辑：** 尝试在您的通话中使用`Application.ExecutablePath`而不是 CodeBase 参考。`Path.GetDirectoryName()`您可能必须添加对程序集的引用`System.Windows.Forms`。

```
string ApplicationPath = System.IO.Path.GetDirectoryName(Application.ExecutablePath); 
```

**编辑2：**

您也可以使用（取自我的 dll）：

```
public static FileInfo Application()
{
    return new FileInfo(Environment.GetCommandLineArgs()[0]);
} 
```

然后：

```
string ApplicationPath = Application().DirectoryName; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:05:31.683

`System.IO.File`适用于文件名，而不是 URI，因此`file:/`无法识别前缀。Chrome 之所以有效，是因为它正在为您将 URI 转换为系统文件名。

# r - 在 ggplot2 r 中添加轴刻度和标签

> ID：10488279
> 
> 赞同：4
> 
> 时间：2012-05-07T19:57:32.080
> 
> 标签：r, ggplot2, label

这里是数据。

```
X <- 1:10
Y <- rnorm (length(X), 5, 2)
ticks <- data.frame (t = c(5, 8, 9), l = c(1:3)) 

plot (X, Y, xaxt = "n")

axis(1, at = ticks$t, labels = ticks$l) 
```

我想在 ggplot2 中做类似的工作。我该怎么做

![在此处输入图像描述](../Images/6a253716f4e19249eb1820bb94f0810c.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T20:11:05.700

```
library(ggplot2)

X <- 1:10
Y <- rnorm (length(X), 5, 2)
ticks <- data.frame (t = c(5, 8, 9), l = c(1:3))

df <- data.frame(X, Y)

p <- ggplot(data=df, aes(x = X,y = Y) )
p <- p + scale_x_continuous(breaks=c(ticks$t), 
                            labels=c(ticks$l))
p <- p + geom_point()
p <- p + theme_bw()
p 
```

希望这可以帮助。

![轴标签和中断演示ggplot2](../Images/1f13966294c7a59dc921f045cef428fd.png)

# java - 验证连接的数据库 - Java 持久性 API

> ID：10488282
> 
> 赞同：1
> 
> 时间：2012-05-07T19:58:03.867
> 
> 标签：java, mysql, sql-server, eclipse, eclipselink

我正在使用 eclipse、eclipseLink、java 持久性 API (JPA) 和两个具有相同结构（相同表）的数据库（MYSQL 和 SQLServer）的 java 项目中工作。有时我需要检查用于应用条件语句（例如“if”或其他）的数据库。问题是：如何验证我是否使用参数连接到 MySQL 或 SQLServer 数据库并在参数中使用该信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:47:41.617

我解决了在 persistence.xml 配置文件中读取 tag**属性**和**Attribute** *name="eclipselink.target-database"的问题。*我使用了这些导入：

```
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.DocumentBuilder;
import org.w3c.dom.Document;
import org.w3c.dom.NodeList;
import org.w3c.dom.Node;
import org.w3c.dom.Element; 
```

这是我用来读取属性的函数：

```
public String DatabaseIdentifier() 
{
    String dbIdentifier=null ;
    try {
        //Creates a virtual file where is allowed for default the persistence.xml configurarion file
        File path= new File("src\\META-INF");

        //Using the xml libraries prepare the document to be read.
        DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
        Document doc = dBuilder.parse(new File(path+"\\persistence.xml"));
        doc.getDocumentElement().normalize();

        //Gets the list of properties  contained in the persistence.xml file
        NodeList listProperties= doc.getElementsByTagName("property");

        //We searching in the list of properties the attribute with the name 
        //eclipselink.target-database and there we get the database that 
        //is in use.
        for (int i = 0; i < listProperties.getLength(); i ++) {
            Node team = listProperties.item(i);

            if (team.getNodeType() == Node.ELEMENT_NODE)    
            {
                Element element = (Element) team;

            if (element.getAttribute("name").contains("eclipselink.target-database"))
                    {
                dbIdentifier=element.getAttribute("value").toString();
                System.out.println(element.getAttribute("value"));
                    }

            }
        }
    } catch (Exception e) 
    {e.printStackTrace();}
    return dbIdentifier;
} 
```

在另一个类中，您应该将此方法的返回分配给 String。这就是答案，现在您可以在“if”之类的条件语句中使用此信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:55:11.547

创建一个布尔值 connectedToDatabase 并将其初始化为 false。创建一个将建立连接的 try and catch 块。在尝试将 connectedToDatabase 初始化为 true。如果在尝试连接时捕获到异常，布尔值将保持为 false。

```
private boolean connectedToDatabase = false;

try
{
    connection = DriverManager.getConnection(urlOfDatabase);
    connectedToDatabase = true;
}catch(SQLException sqlException){
    sqlException.printStackTrace();} 
```

那么您可以创建一个 if 语句，如果 connectedToDatabase 为 false，则该语句将引发异常。只需确保该方法抛出 IllegalStateException。

```
if(!connectedToDatabase)
     throw new IllegalStateException("Not Connected To Database"); 
```

如果服务器出现故障，这将不起作用，因为它只会确定初始连接是否成功。

# c# - 如何管理 VSPackage 中的撤消/重做堆栈？

> ID：10488287
> 
> 赞同：3
> 
> 时间：2012-05-07T19:58:28.190
> 
> 标签：c#, vsx, vspackage

我创建了在 Visual Studio 代码窗口上下文菜单中提供某些功能的 VSPackage。这个动作包括几个代码编辑和一些周围的东西。

问题是，这些代码编辑中的每一个都被分别添加到撤消堆栈中。我想要的是将此操作作为一个原子单元来处理，即按 CTRL+Z 回滚所有代码编辑和其他所有内容（当然，还要将该单元放在重做堆栈的顶部）。

关于这个主题的文档非常糟糕，我唯一发现的是关于 IOleParentUndo 单元的东西 - 但我没有成功实施它。

我用

```
IVsTextLines.GetUndoManager() 
```

获得撤消管理器 - 这似乎是一个好的开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:16:29.317

如果撤消是在文档级别管理的，那么您可能必须使用 RunningDocumentTable 来枚举表，获取它们的撤消管理器，并从轨道中核对：

```
class NavigateListener: IVsRunningDocTableEvents3
{
    private HashSet<IVsTextView> views = new HashSet<IVsTextView>();
    private IVsRunningDocumentTable table;
    private uint cookie;
... 
```

在外面，调用这个注册调用——添加一个取消通知事件的取消注册调用。

```
public void Register()
{
    table =(IVsRunningDocumentTable)    Package.GetGlobalService(typeof(SVsRunningDocumentTable));
    // Listen to show/hide events of docs to register activate/deactivate cursor  listeners.
    table.AdviseRunningDocTableEvents(this, out cookie);
} 
```

运行表有很多事件，如保存等，但您可以在注册视图时进行监听：

```
public int OnAfterDocumentWindowHide(uint docCookie, IVsWindowFrame pFrame)
{
    IVsTextView view = VsShellUtilities.GetTextView(pFrame);
    if (view != null)
    {
        views.Add(view);
    }
} 
```

您可能会遇到保存更改但随后关闭的文档的问题...暂时将其删除...

```
public int OnBeforeDocumentWindowShow(uint docCookie, int fFirstShow, IVsWindowFrame pFrame)
{
    IVsTextView view = VsShellUtilities.GetTextView(pFrame);
    if (view != null)
    {
        views.Remove(view);
    }
    return VSConstants.S_OK;
} 
```

然后你可以做一个超级撤消核弹。我没有测试这部分——你必须玩它。

```
private void NukeFromOrbit()
{
    foreach( var view in views )
    {
        IVsTextLines buffer;
        view.GetBuffer(out buffer);
        IOleUndoManager manager;
        buffer.GetUndoManager(out manager);
        IEnumOleUndoUnits units;
        manager.EnumUndoable(out units);
        uint fetched=0;
        var unitArray = new IOleUndoUnit[1];
        while( units.Next(1, unitArray , out fetched ) == VSConstants.S_OK)
        {
            unitArray[0].Do(manager);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:01:19.260

我封装了下面的代码来撤消几个动作。

```
public class VSUndo : IDisposable
{
    public static UndoContext undoContext;

    public static VSUndo StartUndo()
    {
        undoContext = ((DTE2)Package.GetGlobalService(typeof(DTE))).UndoContext; 
        undoContext.Open(Guid.NewGuid().ToString());
        // return new instance for calling dispose to close current undocontext
        return new VSUndo(); 
    }

    public void Dispose()
    {
        undoContext.Close();
    }

} 
```

然后，您可以使用：

```
using (VSUndo.StartUndo())
{
   // couple of actions that may need to undo together
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T00:44:34.587

尝试使用这样的东西：

```
IDesignerHost host = ...;
DesignerTransaction transaction = host.CreateTransaction("Command Name");
try
{
  // Command Body
  TypeDescriptor.GetProperties(control)["Location"].SetValue(control, location);
  transaction.Commit();
}
catch
{
    transaction.Cancel();
    throw;
} 
```

# php - mkdir 功能，似乎没有工作

> ID：10488288
> 
> 赞同：1
> 
> 时间：2012-05-07T19:58:32.433
> 
> 标签：php, mysql, mkdir

我在我的 php 网页中创建了一个 mkdir 函数，但它似乎不起作用。

这里是：

```
mkdir("Game/" . $user . "/" . $name . ".actibuild", 0777, true); 
```

用户和名称在上面定义。这是代码片段：

```
 if (isset($_POST['name'])){
        if (isset($_POST['desc'])){
            $name = mysql_real_escape_string($_POST['name']);
            $desc = mysql_real_escape_string($_POST['desc']);
            $user = $check_user['Username'];
            mkdir("Game/" . $user . "/" . $name . ".actibuild", 0777, true);

            mysql_query("INSERT INTO `games`(`creator`, `name`, `desc`) VALUES ('$user', '$name', '$desc')");
            header('Location: Games.php');
        }
    } 
```

它正确地将这些查询运行到数据库中，但它没有创建这些目录。

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:00:40.697

检查当前目录：

`echo __FILE__;`

或者

`echo getcwd();`

并建立相对于该参考的路径。

或者

您可以使用 chdir("/") 将根目录设置为当前目录，然后尝试创建您的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:02:27.407

您使用相对路径，它可能不是您认为创建目录的位置，而是当前目录/web-root/etc。

尝试：

```
$path = "Game/" . $user . "/" . $name . ".actibuild";
is_writable('.') || die(realpath('.') . ' is not writable');
mkdir($path, 0777, true) || die(realpath($path).' directory not created');
print_r(realpath($path)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T20:02:57.520

你知道 PHP 在哪里执行吗？你有一个相对的系统路径（从游戏开始）。很有可能，您的目录*正在*创建（如果权限允许），但位于相对于工作目录的位置，该位置不一定与您的 PHP 脚本所在的位置相同。

# android - 字符串无法转换为 Json 数组

> ID：10488289
> 
> 赞同：0
> 
> 时间：2012-05-07T19:58:36.900
> 
> 标签：android, json, parsing

如何转换从这种格式的服务器返回的数据

```
[{"Food":"orange","Protein":"52","Water":"52","Magnesium":"12","Phosphorus":"12","Sodium":"12.5","Zinc":"45","Vit_C":"12","Fat_Sat":"12","Fat_Mono":"45","Vit_B12":"45","Calcium":"45","Calories":"4565","Fiber":"12","Cholesterole":"12","Potassium":"12","Sugar_Tot":"55","Iron":"45","Folic_Acid":"55","carbohydrates":"55","Vit_K":"5","Serving_Size":"\u062d\u0628\u0629"}] 
```

对此

```
"[{\"Food\":\"\\u062a\\u0641\\u0627\\u062d \\u0628\\u062f\\u0648\\u0646 \\u0627\\u0644\\u0642\\u0634\\u0631\\u0629\",\"Protein\":\"0.27\",\"Water\":\"86.67\",\"Magnesium\":\"4\",\"Phosphorus\":\"11\",\"Sodium\":\"0\",\"Zinc\":\"0.05\",\"Vit_C\":\"4\",\"Fat_Sat\":\"0\",\"Fat_Mono\":\"0\",\"Vit_B12\":\"0\",\"Calcium\":\"5\",\"Calories\":\"48\",\"Fiber\":\"1\",\"Cholesterole\":\"0\",\"Potassium\":\"90\",\"Sugar_Tot\":\"10.1\",\"Iron\":\"0.07\",\"Folic_Acid\":\"0\",\"carbohydrates\":\"13\",\"Vit_K\":\"0.6\"}]"; 
```

因为第一种格式在 emulator 2.2 中导致异常（ parssingorg.json.JSONException: Value of type java.lang.String cannot be convert to JSONArray）

```
this is part of my code :

try{
                    BufferedReader reader = new BufferedReader(new InputStreamReader(
                            is, "utf-8"), 8);
                    sb = new StringBuilder();

                    String line = "0";
                    while ((line = reader.readLine()) != null) {
                        sb.append(line);}

                    is.close();

                    result =sb.toString();
                   // result = result.replace('\"', '\'').trim();
                    Log.d("",result);
                    }
                    catch(Exception e){
                        Log.e("log_tag", "error" + e.toString());       
                        }

                        Log.d("",result);  
                    try{
                                                jArray = new JSONArray(result);
                        JSONObject json_data = null;

                        for (int i = 0; i < jArray.length(); i++) {
                         json_data = jArray.getJSONObject(i);
                         if(json_data!=null ) 
                          {
                             foodName=json_data.getString("Food");
                            Description=json_data.getInt("Calories");               
                             item.setName(foodName);
                             item.setDescription(10);
                             item.setSelected(false);
                             MealActivity.foodList.add(item);   
                             item=new ItemInList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:13:18.263

返回的 JSON 文件不完整，它缺少末尾的方括号来关闭数组。

如果此 JSON aways 返回，则在末尾手动添加右方括号

```
// your code
result =sb.toString();
if(!result.endsWith("]")) {
  result = result + "]";
}
// continue the rest of the cod 
```

您也可以使用此代码检查它是否是有效的 JSON [检查文件是否为 json、java](https://stackoverflow.com/questions/3679479/check-if-file-is-json-java)

我希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:13:58.640

我假设`]`行的末尾有一个从服务器返回的数据是一个带有 1 个 JsonObject 的 JSON 数组。您可以使用以下方法解析它：

```
JSONArray jArray = new JSONArray(result);
String foodName = jArray.getJSONObject(0).getString("Food"); 
```

等等..

# python - 如何动态修改函数的本地命名空间？

> ID：10488296
> 
> 赞同：4
> 
> 时间：2012-05-07T19:59:03.993
> 
> 标签：python, namespaces, locals

### 注意：这个问题假设 Python 2.7.3。

我正在寻找一种理智的方法来动态修改函数的本地命名空间，最好是以一种给主体函数添加最少混乱的方式。

我的想法看起来像这样：

```
import os
from namespace_updater import update_locals

def somefunc(x, y, z):
    # ...
    # ...
    # this and that
    # ...
    # ...

    if os.environ.get('FROBNICATE'):
        from frobnitz import frobnicate
        update_locals(frobnicate(locals()))

    #
    # life goes on, possibly with duly frobnicated local variables...
    # ...
    # ...
    # ... 
```

谢谢！

* * *

PS：以下是不起作用的方法。

最天真的方法是这样的：

```
locals().update(new_locals(locals()) 
```

...但是[文档`locals()`](http://docs.python.org/library/functions.html#locals)非常明确地警告不要依赖这种巫术来修改局部变量，所以请不要将其作为答案提交（除非您可以为无视文档的警告提供一个很好的案例）。

天真的规模中的下一个是

```
for k, v in new_locals(locals()).items():
    exec ('%s = v' % k) 
```

AFAICT，这样的代码不能“碍事”（即，它*必须*在函数体中），这并不理想。但真正的交易破坏者是`exec ('%s = v' % k)`黑客可能会导致一些奇怪的错误。

当我写“怪异的错误”时，我的意思是“对于`exec ('%s = v' % k)`像我一样脆弱的人来说看起来很奇怪的错误”。我对这个黑客的掌握有多脆弱？要回答这个问题，请考虑下面的脚本。它具有三种变体：（1）完全如图所示；(2) 删除第18行的前导`#`后；(3) 在删除第`#`15 行和第 18 行中的第一个之后（即对于这个变体，没有代码被注释掉）。我无法预测此脚本的变体 (2) 和 (3) 的行为。我什至无法以超过 50% 的置信度预测变体 (1) 的行为。这就是我对`exec ('%s = v' % k)`黑客。除非您可以自信且正确地预测该脚本的三个变体的行为方式（在 python 2.7 下），否则可以肯定地说，您对情况的掌握与我的一样脆弱，您可能也应该远离`exec ('%s = v' % k)`。

```
x = 'global x'                            # 01
y = 'global y'                            # 02
def main():                               # 03
    x = 'local x'                         # 04
    y = 'local y'                         # 05
    run(locals())                         # 06
    print 'OK'                            # 07
    return 0                              # 08
                                          # 09
def run(namespace):                       # 10
    global y                              # 11
    print locals().keys()                 # 12
    for k, v in namespace.items():        # 13
        print '%s <- %r' % (k, v)         # 14
        exec ('%s = v' % k) #in locals()  # 15
    print locals().keys()                 # 16
    x = x                                 # 17
    #z = lambda: k                        # 18
    print x                               # 19
    print y                               # 20
                                          # 21
exit(main())                              # 22 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T21:20:14.603

我将介绍我能想到的唯一接近合理的方法，然后我会尝试说服你不要使用它。

```
def process(**kw):
  mycode = """\
print 'Value of foo is %s' % (foo,)
print 'Value of bar is %s' % (bar,)
"""
  exec mycode in kw

vars = {'foo': 2, 'bar': 3}
process(**vars) 
```

使用这种方法，您至少可以防止代码注入攻击。包含代码“局部变量”的字典是明确指定的，因此您可以完全控制运行`exec`语句时的变量空间。您不必侵入函数对象或其他类似的内部。

我知道[装饰器模块](http://pypi.python.org/pypi/decorator)用于在动态创建的函数中操作参数名称`exec`的实现`@decorator`，并且可能还有其他常用模块使用它。但我只遇到过一种情况，`exec`它明显胜过 Python 中的替代方案，另一种情况是`eval`.

在您的问题中，我没有看到这种情况。除非`mycode`从上面需要做一些非常时髦的事情，比如创建一个带有参数名称的函数，否则`kw`你很可能只是简单地编写代码，并且可能`locals()`在紧要关头使用。

```
def process(**kw):
  print 'Value of foo is %s' % (kw['foo'],)
  print 'Value of bar is %s' % (kw['bar'],)

process(foo=2, bar=3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:19:09.420

可能是这样的

```
def foo():
    print(x)

foo.__globals__["x"] = "Hello Python"

foo() 
```

不幸的是，如果已定义变量，这在函数体中不起作用

```
def foo(flag):
    x = "Hello World"
    if flag:
        foo.__globals__["x"] = "Hello Python"

    print(x) 
```

在两个*标志*中打印*Hello World*是 True 还是 False

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T20:41:47.883

不确定是否可以仅使用外部功能。我创建了一个片段：

```
def get_module_prefix(mod, localsDict):
    for name, value in localsDict.iteritems():
        if value == mod:
            return name
    raise Exception("Not found")

def get_new_locals(mod, localsDict):
    modulePrefix = get_module_prefix(mod, localsDict)
    stmts = []
    for name in dir(mod):
        if name.startswith('_'):
            continue
        if name not in localsDict:
            continue
        stmts.append("%s = %s.%s" % (name, modulePrefix, name))
    return "\n".join(stmts)

def func(someName):
    from some.dotted.prefix import some.dotted.name
    #here we update locals
    exec(get_new_locals(some.dotted.name, "some.dotted.name", locals()))
    print locals()
    print someName # value taken from aModule instead of parameter value

func(5) 
```

在哪里：

*   `get_module_prefix`用于查找导入模块的名称，
*   `get_new_locals`返回可用于更新局部变量的赋值语句，

本地变量的实际更新是`exec(get_new_locals(some.dotted.name, locals()))`在我们简单地执行赋值语句的地方执行的，在这些语句中，我们将模块中的值分配给局部变量。

我不确定这是否是你真正的想法。*

# c# - 如何解析 .NET 中同一父 IIS 虚拟目录中不同站点的绝对 URL？

> ID：10488298
> 
> 赞同：2
> 
> 时间：2012-05-07T19:59:06.680
> 
> 标签：c#, asp.net, url, iis-6, virtual-directory

我的目标是跨多个网站共享图像、css、js 等，这些网站都托管在 IIS 的同一父虚拟目录下。当然，我可以对图像路径进行硬编码，但我希望 .NET 有一种方法可以使用 IIS 配置智能地解析 URL。

这是我的文件/虚拟目录结构：

> ```
> Parent Site (Virtual Directory)
>   default.aspx
>   mypage.aspx
>   otherpage.aspx
>   images
>     - logo.jpg
>   css
>     - site.css
>   Subsite1 (Virtual Directory)
>     - default.aspx
>     - products.aspx
>   Subsite2 (Virtual Directory)
>     - default.aspx
>     - products.aspx
>     - miscellaneous.aspx 
> ```

`Parent Site`、`Subsite1`和`Subsite2`都是为[http://parentsite.com](http://parentsite.com)、[http://subsite1.com](http://subsite1.com)和[http://subsite2.com](http://subsite2.com)分别设置的虚拟目录。我想在这些站点之间共享图像、js、css 等。

.NET 中是否有一种方法可以在从其中一个子站点（例如[http://subsite.com/default.aspx](http://subsite.com/default.aspx)`~/images/logo.jpg` ）调用时解析为[http://parentsite.com/images/logo.jpg](http://parentsite.com/images/logo.jpg)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T20:08:18.463

您应该创建一个`cdn`子域并将资源文件指向该子域，例如

```
http://cdn.parentsite.com/images/logo.jpg
http://cdn.parentsite.com/css/site.css 
```

ETC..

这`~/images/logo.jpg`永远不会解决除应用程序根以外的任何问题。这就是`~`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T13:42:31.750

在 IIS6 甚至 IIS7 中，您可以在所有子站点中使用一个新的虚拟目录，称为“资产”。

更新的站点布局：

```
Parent Site (Virtual Directory)
     default.aspx
     mypage.aspx
     otherpage.aspx
     assets
          -images
               - logo.jpg
          -css
               - site.css    

Subsite1 (Virtual Directory)
     - default.aspx
     - products.aspx
     assets (Virtual Directory to parent assets)

Subsite2 (Virtual Directory)
     - default.aspx
     - products.aspx
     - miscellaneous.aspx 
     assets (Virtual Directory to parent assets) 
```

使用这种结构，您可以与所有站点共享相同的“assets”文件夹，并且仍然可以作为“~/assets”访问它。这允许您将资产与 IIS 正在响应的任何域一起使用。

[http://parentsite.com/assets](http://parentsite.com/assets)

[http://childsite.com/assets](http://childsite.com/assets)

CDN 是一个不错的选择，但通常您会为每个站点创建单独的 DNS 条目，例如[http://cdn.parentsite.com](http://cdn.parentsite.com)和[http://cdn.childsite.com](http://cdn.childsite.com)，然后创建一些函数以将文件引用为[http： //cdn](http://cdn.(currentdomain) .(当前域)。

在我看来，使用共享资产文件夹的绝对或相对路径将使您的生活更轻松。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T20:10:51.567

一种选择是创建具有共享图像的 resources.site.com 或将其移动到 CDN。

然后，在每个消耗这些资源的站点中，都有一个配置设置资源所在的位置。这些站点使用配置设置将完全限定的 URL 格式化为资源。

由于您已在代码中抽象出 resources.site.com，因此它可能位于同一服务器、不同服务器、CDN 等中……没关系 - 您可以灵活地为它们提供服务。您也可以在同一台服务器上开始使用它，当您想要优化地理时，将其移动到 CDN。

# java - 从随机长 生成随机双精度

> ID：10488299
> 
> 赞同：1
> 
> 时间：2012-05-07T19:59:08.663
> 
> 标签：java, random, underflow

在 Java 中，我有一个随机生成器，它生成从 -2^63 到 2^63 的随机数，这不是 java.util.Random。

我需要在（0,1）中生成随机双精度，这是我到目前为止所做的：

```
return (seed/(double)(9223372036854775807L))/2+0.5;//seed is a random long 
```

这是正确的吗？是否有任何数值问题（下溢？）？

可以更好/更快吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:11:25.460

最快的方法可能只是将您的 long 中的前三位设置为`0`，然后使用这些位进行双精度：

```
double rand = Double.longBitsToDouble(seed & 0x1FFFFFFFFFFFFFFFL); 
```

这通过强制符号为正数和指数小于 0 来实现，这将导致尾数至少右移一次。假设 long 中的所有整数都是完全随机的，它给出了一个均匀分布。这是一个完整的 Java 程序，它使用 Random 生成随机长整数，然后使用此方法将它们转换为 0 到 1 之间的双精度数：

```
import java.util.Random;

class Main{
    public static void main(String[] args){
        Random rand = new Random();
        long seed = rand.nextLong();
        double x = Double.longBitsToDouble(seed & 0x1FFFFFFFFFFFFFFFL);
        System.out.println(x);
    }
} 
```

这是 10 次执行的输出：

```
1.1211565592484309E-247
8.84224349357039E-242
6.956043405745214E-271
3.747746366809532E-232
9.302628573486166E-158
1.1440116527034282E-166
1.2574577719255876E-198
5.104999671234867E-269
3.360619724894072E-213
1.5654452507283312E-220 
```

**编辑**

这给出了 0 和 1 之间所有可能双精度数的均匀分布。由于有更多的小双精度数，您可能永远不会看到接近 1 的数字。您可以通过基于现有位的位生成新指数来解决此问题，但是您需要一个循环来执行此操作，因此在将其考虑在内之后，它可能不是最快的方法：

```
long exponent = 0;
for(int i = 52; (seed >>> i & 1) > 0; i++) exponent++;
double x = Double.longBitsToDouble(seed & 0x000FFFFFFFFFFFFFL | ((1022 - exponent) << 52)); 
```

> 0.4773960377161338
> 0.929045618651037
> 0.7183096209363845
> 0.33962049395497845
> 0.45568660174922454
> 0.11670190555677815
> 0.09371618427480996
> 0.8192870898479095
> 0.9365016017283178
> 0.11311614413193898

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T20:03:28.423

我宁愿只看到一个部门。

```
0.5+(seed/1.84467440737096E+19); 
```

也就是说，您将遇到浮点精度问题，因为您有 64 个随机整数位，然后您尝试将其压缩为 53 位双精度。为浮点值制作一个专用生成器可能会更好，但我不能肯定地说，因为我不知道你的动机。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T20:07:33.883

我会使用[Math.scalb](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#scalb%28double,%20int%29)作为最有效的方法，并确保没有由于舍入或表示错误而导致的有趣行为

```
double d = Math.scalb(seed >>> 1, -63); 
```

您只能在双精度中使用 53 位，因此有些将被丢弃。

如果你跑

```
long seed = Long.MAX_VALUE;
System.out.println(Math.scalb(seed >>> 1, -63)); 
```

印刷

```
0.5 
```

种子为 0 你得到 0.0

种子为 -1，你得到 1.0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T20:03:23.590

不完全是。我认为更简单的方法是执行以下操作： `new Random(seed).nextDouble()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T20:05:14.697

除非我误读了您需要从 0 到 1 的随机双精度，否则 Java 内置的 Math.random 就是这样做的。因此，您可以避免当前正在进行的所有转换。

# ios - iOS中的静态声明错误

> ID：10488300
> 
> 赞同：1
> 
> 时间：2012-05-07T19:59:28.863
> 
> 标签：ios, compiler-errors

我在弄清楚如何解决此错误时遇到问题。以下代码片段在 XCode 4.2 中生成此错误：“ **'randomint' 的静态声明流非静态声明**”

```
//Returns a random integer number between low and high inclusive */
static inline int randomInt (int low, int high) {
    return (arc4random() % (high-low+1)) + low;
} 
```

关于如何修复它的任何建议？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:01:52.930

如果您的文件中某处有这样的一行：

```
inline int randomInt(int, int); 
```

删除它，或者在声明的开头添加静态，如下所示：

```
static inline int randomInt(int, int); 
```

# ruby-on-rails - Rails 3：如何从失败的验证中生成自定义错误消息

> ID：10488302
> 
> 赞同：11
> 
> 时间：2012-05-07T19:59:34.527
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, validation

我在用着

```
validates :feed_id, presence: true, uniqueness: true 
```

我应该如何生成自定义错误消息以指定用户已订阅此提要（feed_id）字段是重复的

我知道我可以做 validate_uniqueness_of 但它会不必要地混淆代码。如果唯一性验证失败，我如何传递特定的错误消息？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-07T20:07:46.870

将带有键`message`和所需消息的哈希作为值而不是`true`：

```
validates :feed_id, presence: true, uniqueness: {message: "already subscribed"} 
```

# c# - 如何在窗口中捕获数据

> ID：10488304
> 
> 赞同：4
> 
> 时间：2012-05-07T19:59:42.323
> 
> 标签：c#, windows

我的机器上安装了一个桌面应用程序。当我启动一个程序时，某种窗口会打开。比方说，这样的事情（只是例子）：

![在此处输入图像描述](../Images/aa047769a02f39621e53208ce24cfbe1.png)

所以，我想用 C# 编写一个应用程序，它会找到这个窗口并从中捕获一些数据。

我应该看什么工具？我想走一条阻力最小的路。

我需要从文本框中捕获图像、文本，还需要通过文本找到控件并单击它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T12:01:45.983

我建议你使用很酷但鲜为人知的[UI 自动化 API](http://en.wikipedia.org/wiki/Microsoft_UI_Automation)来完成这项工作。

为此，首先要测试的是启动相关的[UISpy](http://msdn.microsoft.com/fr-fr/library/ms727247.aspx)工具。它将在屏幕上显示所有可访问窗口的树。它还能够运行一些操作，例如按下菜单、选择项目等。这是使用所谓的[UI 自动化控件模式](http://msdn.microsoft.com/en-us/library/ms752362.aspx)，它提供了一种独立于控件类型或外观的对控件的功能进行分类和公开的方法控制。

因此，如果您可以使用 UI Spy 自动化此应用程序，您也可以使用 .NET 代码执行完全相同的操作（UISpy 本身只是使用底层 API）。

这是一篇关于 UI 自动化编程的有趣教程文章：[Microsoft UI 自动化库](http://msdn.microsoft.com/en-us/magazine/cc163288.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T22:30:59.460

您应该开始枚举该进程的所有窗口的句柄：

[https://stackoverflow.com/a/2584672/351383](https://stackoverflow.com/a/2584672/351383)

然后对于每个句柄获取有关文本和位置的信息，通过位置信息，您可以在该位置截取桌面的屏幕截图以获取图像 AFAIK 没有其他方法可以从正在运行的应用程序窗口获取图像。

当您获得控件的屏幕位置时，然后使用下面的链接模拟鼠标左键单击，在窗口中搜索一些文本，然后单击控件内的某个点，这是单击一个点的方法：

[https://stackoverflow.com/a/10355905/351383](https://stackoverflow.com/a/10355905/351383)

我整理了快速课程来收集流程数据：

```
 public static class ProcessSpy
  {
    public static List<ProcessSpyData> GetDataForProcess(string processName)
    {
      var result = new List<ProcessSpyData>();
      Process myProc = Process.GetProcessesByName(processName).FirstOrDefault();
      if (myProc != null)
      {
        var myHandles = EnumerateProcessWindowHandles(myProc);
        foreach (IntPtr wndHandle in myHandles)
        {
          result.Add(new ProcessSpyData(wndHandle));
        }
      }
      return result;
    }

    delegate bool EnumThreadDelegate(IntPtr hWnd, IntPtr lParam);

    [DllImport("user32.dll")]
    static extern bool EnumThreadWindows(int dwThreadId, EnumThreadDelegate lpfn, IntPtr lParam);

    static IEnumerable<IntPtr> EnumerateProcessWindowHandles(Process prc)
    {
      var handles = new List<IntPtr>();

      foreach (ProcessThread thread in prc.Threads)
        EnumThreadWindows(thread.Id, (hWnd, lParam) => { handles.Add(hWnd); return true; }, IntPtr.Zero);

      return handles;
    }
  }

  public class ProcessSpyData
  {
    private const uint WM_GETTEXT = 0x000D;

    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    static extern IntPtr SendMessage(IntPtr hWnd, uint Msg, int wParam, StringBuilder lParam);

    [DllImport("user32.dll")]
    private static extern bool GetClientRect(IntPtr hWnd, out RECT lpRect);

    [StructLayout(LayoutKind.Sequential)]
    private struct RECT
    {
      int left, top, right, bottom;

      public Rectangle ToRectangle()
      {
        return new Rectangle(left, top, right - left, bottom - top);
      }
    }

    [DllImport("user32.dll")]
    static extern bool ClientToScreen(IntPtr hWnd, ref Point lpPoint);

    public IntPtr WindowHandle { get; private set; }
    public string WindowText { get; private set; }
    public Rectangle ClientRect { get; private set; }
    public Rectangle ScreenPos { get; private set; }

    public ProcessSpyData(IntPtr windowHandle)
    {
      this.WindowHandle = windowHandle;
      GetWindowText();
      GetWindowSize();
    }

    private void GetWindowText()
    {
      StringBuilder message = new StringBuilder(1024);
      SendMessage(this.WindowHandle, WM_GETTEXT, message.Capacity, message);
      this.WindowText = message.ToString();
    }

    private void GetWindowSize()
    {
      var nativeRect = new RECT();
      GetClientRect(this.WindowHandle, out nativeRect);
      this.ClientRect = nativeRect.ToRectangle();

      Point loc = this.ClientRect.Location;
      ClientToScreen(this.WindowHandle, ref loc);
      this.ScreenPos = new Rectangle(loc, this.ClientRect.Size);
    }
  } 
```

这应该可以帮助您入门，但是您必须注意，如果应用程序使用非标准控件，则无法使用此方法从中获取文本，对于图像，查看可执行资源可能会获得更好的结果。

**更新**

获取各种控件类型（MFC、winforms、Delphi VCL 等）的控件文本将是一项非常艰巨的任务，但是对于 winforms，请参阅出色的[Managed Windows API ，他们甚至在](http://mwinapi.sourceforge.net/)[工具](http://mwinapi.sourceforge.net/tools.html)中有某种间谍应用程序，看看那个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T09:37:55.373

您要捕获什么样的数据？

您可以尝试收听 Windows 消息或读取内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T12:40:51.963

除了注入您要检查的应用程序之外，别无他法。这就是 UISpy 实际运行的方式。这也是为什么 UISpy 应该使用管理凭据运行的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T22:38:55.093

根据您将来要执行多少此类任务（或这项任务的重要性），您可以尝试投资像 Ranorex Spy（Ranorex 工作室是 ott）这样的东西。

链接：[http ://www.ranorex.com/product/tools/ranorex-spy.html](http://www.ranorex.com/product/tools/ranorex-spy.html)

# listview - JavaFX 2 中奇怪的控制宽度？

> ID：10488309
> 
> 赞同：6
> 
> 时间：2012-05-07T19:59:51.980
> 
> 标签：listview, user-interface, combobox, size, javafx-2

我是 JavaFX 2 的新手，对 ComboBox 和 ListView 的默认宽度感到困惑。我希望 ComboBox 更宽，以便文本“提示文本”完全可见，对于 ListView，我希望它更小，只有必要的宽度。代码和屏幕截图如下。

1) 我怎样才能实现 ComboBox 和 Listview 的大小都符合他们需要的宽度？

2）如何使两个控件具有相同的宽度（因此两个宽度中的最大值），是否可以在两者的宽度之间创建某种链接？我特别在为 FXML 寻找一个优雅的解决方案。

感谢您的任何提示！

```
@Override
public void start(Stage primaryStage) {
    ComboBox<String> comboBox = new ComboBox<String>();
    comboBox.setPromptText("the prompt text");
    ObservableList<String> items = FXCollections.observableArrayList();
    items.addAll("item 1", "item 2");
    comboBox.setItems(items);

    ListView<String> list = new ListView<String>();
    ObservableList<String> items2 =FXCollections.observableArrayList (
        "blue", "red");
    list.setItems(items2);

    VBox vBox = new VBox();
    vBox.getChildren().addAll(comboBox, list);

    primaryStage.setScene(new Scene(vBox, 200, 300));
    primaryStage.show();
} 
```

![在此处输入图像描述](../Images/3af49babe71ef7a1d0145c7b2101686f.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-07T20:48:00.920

> 2）如何使两个控件具有相同的宽度（因此两个宽度中的最大值），是否可以在两者的宽度之间创建某种链接？我特别在为 FXML 寻找一个优雅的解决方案。

看起来，默认情况下，ListView 的 maxWidth 无界，但 ComboBox 的 maxWidth 被限制在其初始项目列表的宽度。要使这些控件具有相同的宽度，最简单的方法是将它们放在布局管理器中（就像您所做的那样 - VBox），然后松开组合框的 maxWidth。

在代码中，您可以这样做：

```
comboBox.setMaxWidth(Double.MAX_VALUE); 
```

在 FXML 中，将以下属性定义添加到您的 ComboBox 元素中：

```
maxWidth="Infinity" 
```

您可以使用 John Gray 的绑定解决方案，但我发现上面更优雅。

> 1) 我怎样才能实现 ComboBox 和 Listview 的大小都符合他们需要的宽度？

我想你在这里问的是如何让组合框和列表视图只占用他们需要的空间，而不是更多。这一点，我相信有点棘手，JavaFX 平台并没有为此提供很多支持。

下面是一些示例代码，用于将列表框的大小固定为所需的最小值。

```
import javafx.application.Application;
import javafx.collections.FXCollections;
import javafx.scene.*;
import javafx.scene.control.ComboBox;
import javafx.scene.control.ListView;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.Priority;
import javafx.stage.Stage;

public class GridControlWidths extends Application {
  public static void main(String[] args) throws Exception { launch(args); }
  @Override public void start(Stage stage) {
    ComboBox<String> comboBox = new ComboBox<String>(FXCollections.observableArrayList("item 1", "item 2"));
    comboBox.setPromptText("the prompt text");

    ListView<String> list = new ListView<String>(FXCollections.observableArrayList ("blue", "red"));

    // layout the controls in a grid with appropriate constraints.
    GridPane grid = new GridPane();
    grid.add(comboBox, 0, 0);
    grid.add(list, 0, 1);
    grid.setVgrow(list, Priority.ALWAYS);  // make the list grow vertically as much as possible

    // unclamp the max width of the combo box.
    comboBox.setMaxWidth(Double.MAX_VALUE);

    // display the scene.
    stage.setScene(new Scene(grid, 200, 300));
    stage.show();

    // set the prefWidth of the listview based on the list cells (allowing 8 pixels for padding of the cells).
    double maxWidth = 0;
    for (Node n: list.lookupAll(".text")) {
      maxWidth = Math.max(maxWidth, n.getBoundsInParent().getWidth() + 8);
    }
    list.setPrefWidth(maxWidth);
  }
} 
```

FWIW，我相信当您只有几个项目时，推荐的方法是将您的项目放在 VBox 中，而不是使用 ListView 或 ChoiceBox 而不是 ComboBox，这样您就不需要进行单元格内省和更新布局管理器和控件始终为您提供首选宽度。ListView 经过优化以处理虚拟化列表的情况，该列表可以包含数千个任意大小的项目，您可能无法轻松计算布局宽度，这就是为什么我认为它带有默认的控件大小调整行为而不是将其调整为可能具有的最小尺寸。通常在使用 ListView 时，您只需为 listView 选择一个合理的 prefWidth 并将其设置在 listView 上，而不是像上面的示例所示那样内省项目。

此外，您拥有的一些提示文本被剪裁的图像（对我来说）似乎是 JavaFX 中的一个错误，当 ComboBox 提示文本比 ComboBox 更宽时，它无法正确计算 ComboBox 控件的首选宽度项目文本。由于 ComboBox 目前是一个全新的控件，并且我在 JavaFX 控件的早期版本中看到了此类问题并且它们已得到修复，因此我希望 ComboBox 的首选宽度计算将很快得到合理的修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:27:24.573

1）尝试设置`minWidth(x), prefWidth(x), maxWidth(x)`。这有帮助，但不确定这是一个好的决定。

2）使用`void bind(ObservableValue<? extends Number> observable);`绑定框架中的方法。它就是为这种情况而开发的。前任：

```
someProperty.bind(otherProperty); 
```

您也可以使用双向绑定来链接它们。

# r - 增加 R 中箱线图名称的大小

> ID：10488310
> 
> 赞同：16
> 
> 时间：2012-05-07T19:59:52.233
> 
> 标签：r, formatting, boxplot

我在找到答案时遇到问题，因为我不想增加 x 轴标签的大小，而是增加箱线图的名称属性。

我正在生成一个 1x3 子图，每个箱线图中显示 3 个框。

```
data1 = c(d1, d3, d3)
data2 = c(e1, e2, e3)
data3 = c(f1, f2, f3)
lbls = c("Label 1", "Label 2", "Label 3")
par(mfrow=c(1,3))
boxplot(data1, names=lbls, ylab="Components", main="First Plot", ylim=c(0,1500))
boxplot(data2, names=lbls, ylab="Components", main="Second Plot", ylim=c(0,1500))
boxplot(data3, names=lbls, ylab="Components", main="Third Plot", ylim=c(0,1500)) 
```

我尝试过使用, 等`par(cex.lab=1.5)`，`boxplot(..., label.cex=1.5)`但实际上并没有增加名称字段的大小，只有标签轴。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-07T20:05:57.270

将`par()`命令与适当的命令一起使用将允许您调整它的大小。

尝试使用以下两个不同大小的命令之一，它应该适合您。

```
par(cex.lab=1.5) # is for y-axis

par(cex.axis=1.5) # is for x-axis 
```

# assembly - 如何在屏幕边框处停止文本？

> ID：10488320
> 
> 赞同：1
> 
> 时间：2012-05-07T20:00:52.607
> 
> 标签：assembly

我正在制作这个小程序，我必须在屏幕上移动一个星号。问题是每次碰到边界时，我都会得到一个额外的星号。关于如何摆脱那个额外的星号有什么帮助吗？这是一个非常简单的程序。

到目前为止，这是我的代码：

```
.model small
.stack 256

.data
row  db 10                       ;Save the initial cursor coordinates in
col  db 40                       ;col and row.
msg1 db "*",'$'                  ;Asterisk to be used by the program.
msg2 db " ",'$'

mSetCursor macro                 ;Macro for placing the cursor in the screen.
;pre-conditions
;
;    None
;
;post-conditions
;
;    Asterisks will be printed on the screen,
;    depending on the location of the cursor.

push ax                       
push bx
push dx

mov bh,0
mov ah,2
mov dh,row
mov dl,col
int 10h

pop dx
pop bx
pop ax
endm

.code
main proc
mov ax,@data
mov ds,ax

mov ax,03                     ;Clean the screen.
int 10h

start:
mSetCursor                    ;Call the macro in charge of placing
                              ;the asterisk on the screen.
mov ah,10h
int 16h

cmp ah,2dh                    ;Using the scan code of the letter X, we end
je exit                       ;the program once the "X" key is pressed.

cmp ah,0bh                ;Using the scan code of the number 0, we clean
je clear                      ;the screen once the "0" key is pressed.

cmp ah,4bh                    ;Using the scan code of the left arrow,
je left                       ;we use the left arrow key to move the asterisk left.

cmp ah,48h                    ;Using the scan code of the up arrow,
je up                         ;we use the up arrow key to move the asterisk up.

cmp ah,4Dh                    ;Using the scan code of the right arrow, 
je right                      ;we use the right arrow key to move the asterisk right.

cmp ah,50h                    ;Using the scan code of the down arrow,
je down                       ;we use the down arrow key to move the asterisk down.

mov ah,9                  ;Code in charge of receiving the fifth message
mov dx, offset msg2           ;This code ensures that nothing happens while
int 21h                       ;keys that aren't arrow keys, 0, or X (quit) are pressed.
jmp start

left:                         ;We receive the asterisk, and decrease the value of col
mov ah,9                      ;This starts the leftward movement of the asterisk.
mov dx, offset msg1           ;Finally, we skip to the Start label.
int 21h                        
dec col

cmp col,00                ;Disallow that the asterisk move past the
je right                  ;left side of the screen.

jmp start                      

right:                        ;Receive the asterisk, and increase the value of col.
mov ah,9                      ;This starts the rightward movement of the asterisk.
mov dx, offset msg1           ;Finally, we skip to the Start label.
int 21h
inc col

cmp col,79                    ;Disallow that the asterisk move past the 
je left                   ;right side of the screen.

jmp start

down:                         ;We receive the asterisk and increase the value of row.
mov ah,9                      ;This starts the downward movement of the asterisk.
mov dx, offset msg1           ;Finally, we jump to the Start label.
int 21h
inc row

cmp row,24                ;Disallow that the asterisk move past the
je up                     ;bottom of the screen.

jmp start

up:                           ;We receive the asterisk, and decrease the value of row.
mov ah,9                      ;This starts the upward movement of the asterisk.
mov dx, offset msg1           ;Finally, we jump to the Start label.
int 21h
dec row

cmp row,-1                ;Disallow that the asterisk move past the
je down                   ;top of the screen.

jmp start

clear:
mov ax,03                     ;Clean the screen.
int 10h
jmp start

exit:                         ;Label that lets us end the program.
mov ah,4ch
int 21h

main endp
end main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:59:44.977

您的代码的问题是当它到达边缘时，它会收到两个中断来放置星号。详细地说，假设光标在右边缘。然后按下右键。现在它将跳转到 label `right`。它会在当前光标位置放置一个星号。然后递增`col`并跳转到 label `left`。在那里它会递减`col`以防止超出边缘。但是标签 left 还包含一个插入星号的中断，导致两个`*`.

为了防止这种情况，而不是先递增然后递减只是跳过`inc col`如果到达边缘。例如，您的`right`标签被修改为

```
right:                        ;Receive the asterisk, and increase the value of col.
mov ah,9                      ;This starts the rightward movement of the asterisk.
mov dx, offset msg1           
int 21h

cmp col,78                    ;Disallow that the asterisk move past the 
je start                      ;right side of the screen.

inc col

jmp start                     ;Finally, we skip to the Start label. 
```

您还必须为其他三个这样做。`cmp col, 78`根据您要停止的位置更改比较值。

在那里，我刚刚调试了您的代码，这很有趣。:)

# c# - 在 C# WPF 中运行一个进程至少 5 秒

> ID：10488321
> 
> 赞同：0
> 
> 时间：2012-05-07T20:01:05.057
> 
> 标签：c#, wpf, process, timer

我的目标是强制进程运行至少 5 秒（实际上是任何时间）。我正在使用带有 Service Pack 1 的 .NET Framework 3.5。这个想法是文档包含一些用户必须看到的信息，因此为了防止他们立即单击关闭文档，我们可以强制它保持打开状态一段时间。我开发了一个小型测试 UI，由一个按钮和三个单选按钮（每个文档一个）组成。这是我背后的代码...

我定义了文件路径的字符串，所选文件路径的字符串，以及存储进程 ID 的 int，如果它们可以退出程序的布尔值，以及线程和计时器声明，例如..

```
string WordDocPath = @"Some file path\TestDoc_1.docx";
string PowerPointPath = @"Some file path\Test PowerPoint.pptx";
string TextFilePath = @"Some file path\TestText.txt";
string processPath;
int processID;
bool canExit = false;

System.Threading.Thread processThread;
System.Timers.Timer processTimer; 
```

在构造函数中，我初始化线程和计时器，将线程的启动方法设置为一个名为 TimerKeeper() 的方法，然后启动线程。

```
processTimer = new System.Timers.Timer();
processThread = new System.Threading.Thread(new System.Threading.ThreadStart(timeKeeper));
processThread.Start(); 
```

我将计时器设置为 5 秒，然后它将 canExit 布尔值设置为 true。

```
 public void timeKeeper()
    {
        processTimer.Elapsed += new System.Timers.ElapsedEventHandler(processTimer_Elapsed);
        processTimer.AutoReset = false;
        processTimer.Interval = 5000;               //5000 milliseconds = 5 seconds
    }

    void processTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
        canExit = true;
    } 
```

剩下的是我的按钮的点击事件，它决定了使用哪个文件路径来启动进程，启动计时器，然后启动进程本身。

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {
        if ((bool)PowerPointRadioButton.IsChecked)
        {
            processPath = PowerPointPath;
        }

        if ((bool)WordDocRadioButton.IsChecked)
        {
            processPath = WordDocPath;
        }

        if ((bool)TextDocRadioButton.IsChecked)
        {
            processPath = TextFilePath;
        }

        try
        {
            canExit = false;
            processTimer.Start();

            while (!canExit)
            {
                processID = System.Diagnostics.Process.Start(processPath).Id;      
                System.Diagnostics.Process.GetProcessById(processID).WaitForExit();

                if (!canExit)
                {
                    processTimer.Stop();

                    MessageBox.Show("Document must remain open for at least 5 seconds.", "Error", MessageBoxButton.OK, MessageBoxImage.Error);

                    processTimer.Start();                   
                }
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error dealing with the process.\n" + ex.Message.ToString());
        } 
```

在大多数情况下，这实际上是有效的。用户仍然可以关闭文档，但如果还没有过 5 秒，它将重新打开。除了 word 文档 (.docx)。powerpoint 和 text 文件进展顺利，但 word 文档有一些奇怪的行为（请注意，所有 3 个文件都在同一个文件目录中）。当我选择 word 文档单选按钮并单击该按钮时，word 文档将打开，但我也收到来自 catch 块的消息框的提示，提醒我“对象引用未设置为对象上的实例”异常是抛出。这只发生在 word 文档中。就像我说的，word 文档仍然打开（我可以看到它的内容，就像 powerpoint 或文本文件一样）。异常会导致检查是否可以退出的行被跳过，

谁能在这里看到我的问题？或者是否有更好的方法来完成所有这些（我是 wpf/c# 新手）？我只是不明白为什么这只发生在 word 文档中，而不是 powerpoint 和文本文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:19:05.267

如果这是在用户的桌面上运行，您将受到安装的正确应用程序（例如 Word）及其配置方式的影响。如果这些是共享上的只读文件，那么我可以将它们转换为 XPS，以便您可以在 DocumentViewer 中显示它们。与其强迫他们等待 5 秒点击，不如让他们对已阅读并理解文档的对话框说“是”。或者按照 MilkyWayJoe 的建议，将其放在带有“我同意”按钮的页面上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:25:08.327

问题可能是关联的应用程序不是单词应用程序本身，而是一些代表您启动单词的中间应用程序。

要找出答案，请保留对进程对象的引用，并检查它是否已经终止，它的可执行路径是什么。

话虽如此，您为什么需要这种烦人的行为？你不能阻止人们另眼相看。是否应该满足某些法律要求或其他什么？

# php - 生成 XML 的 PHP 脚本使用 foreach 循环将来自三列表的节点元素之间的错误列值的文本

> ID：10488333
> 
> 赞同：0
> 
> 时间：2012-05-07T20:02:18.610
> 
> 标签：php, mysql, xml, foreach, while-loop

尝试从返回的 SQL 查询结果生成 XML 文件。SQL 查询从表中返回`ItemId`, `ItemName`, 。我想像这样列出XML 中的 s ：`ItemDescription``Items``ItemName`

**XML**

```
...
<item>
    <name>ItemName1</name>
</item>
<item>
    <name>ItemName2</name>
</item>
... 
```

**PHP**

```
...
    while($items = @mysql_fetch_assoc($query)){
    foreach($items as $row){
    }
        $node = $doc->createElement('item');
        $node = $root->appendChild($node);
        $child = $doc->createElement('name');
        $child = $node->appendChild($child);
        $value = $doc->createTextNode($row['ItemName']); // !
        $value = $child->appendChild($value);
    }}
... 
```

我的 XML 结构生成正确，但**问题是**我得到了每个项目的第一个字母`ItemDescription`，而不是`ItemName`在每个`name`元素中，如下所示：

```
...
<name>D</name>
...
<name>H</name>
... 
```

前两项的字符串描述以字母 D 和 H 开头。

是什么导致了这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:09:20.280

如果我理解正确，问题是循环遍历数组`foreach()`中的每个键/值对。`$row`我认为这不是您想要的行为，因为 mysql 结果集中的每一行通常不是多维的。因为找不到索引“ItemName”，所以它默认为 [0]（值的第一个字符）。

试试 while() 循环：

```
...
    $resultset = mysql_query( $query );
    while($row = @mysql_fetch_assoc($resultset)){
        $node = $doc->createElement('item');
        $node = $root->appendChild($node);
        $child = $doc->createElement('name');
        $child = $node->appendChild($child);
        $value = $doc->createTextNode($row['ItemName']); // !
        $value = $child->appendChild($value);
    }
... 
```

# java - Java：URI 中的非法字符

> ID：10488341
> 
> 赞同：1
> 
> 时间：2012-05-07T20:02:49.127
> 
> 标签：java, apache, http, url, uri

我试图用这个源代码请求谷歌地理 api

```
client = new DefaultHttpClient();
    HttpGet get=new HttpGet(uri);
        try {
            HttpResponse response = client.execute(get);
            int statusCode = response.getStatusLine().getStatusCode();
             if (statusCode == 200 ){
                    HttpEntity entity = response.getEntity();
                    InputStream is = entity.getContent();
                    try {
                        XMLReader parser = XMLReaderFactory.createXMLReader();
                        parser.setContentHandler(gh);
                        parser.parse(new InputSource(is));
                    } catch (IllegalStateException e) {
                        e.printStackTrace();
                    } catch (SAXException e) {
                        e.printStackTrace();
                    }
             }
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

URI 是不是像这样 [http://maps.googleapis.com:80/maps/api/geocode/xml?address](http://maps.googleapis.com:80/maps/api/geocode/xml?address) =Königstraße, Berlin&sensor=false

抛出异常：非法字符！

我怎样才能逃避 ä,ü,ö,ß 和空白？我尝试使用 ISO-8859-1 作为编码的 java.net.URLEncoder 没有成功:(

问候伊戈尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T20:08:50.773

您需要使用 UTF-8，而不是整个 URL 和 ISO-8859-1 对单个请求参数值进行 URL 编码。

```
String url = "http://maps.googleapis.com:80/maps/api/geocode/xml"
    + "?address=" + URLEncoder.encode("Königstraße, Berlin", "UTF-8") 
    + "&sensor=false"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:17:57.153

K%C3%B6nigstra%C3%9Fe UTF-8 百分比编码也可以。

# r - 从 R 中的文档语料库中删除“空”字符项？

> ID：10488343
> 
> 赞同：5
> 
> 时间：2012-05-07T20:02:53.947
> 
> 标签：r, text-mining, text-analysis, lda, topic-modeling

我正在使用 R 中的`tm`and`lda`包来对新闻文章语料库进行主题建模。但是，我遇到了一个“非字符”问题，因为`""`这会弄乱我的主题。这是我的工作流程：

```
text <- Corpus(VectorSource(d$text))
newtext <- lapply(text, tolower)
sw <- c(stopwords("english"), "ahram", "online", "egypt", "egypts", "egyptian")
newtext <- lapply(newtext, function(x) removePunctuation(x))
newtext <- lapply(newtext, function(x) removeWords(x, sw))
newtext <- lapply(newtext, function(x) removeNumbers(x))
newtext <- lapply(newtext, function(x) stripWhitespace(x))
d$processed <- unlist(newtext)
corpus <- lexicalize(d$processed)
k <- 40
result <-lda.collapsed.gibbs.sampler(corpus$documents, k, corpus$vocab, 500, .02, .05,
compute.log.likelihood = TRUE, trace = 2L) 
```

不幸的是，当我训练 lda 模型时，除了最常出现的单词是“”之外，一切看起来都很好。我尝试通过从下面给出的词汇中删除它并重新估计上面的模型来解决这个问题：

```
newtext <- lapply(newtext, function(x) removeWords(x, "")) 
```

但是，它仍然存在，如下所示：

```
str_split(newtext[[1]], " ")

[[1]]
 [1] ""              "body"          "mohamed"       "hassan"       
 [5] "cook"          "found"         "turkish"       "search"       
 [9] "rescue"        "teams"         "rescued"       "hospital"     
[13] "rescue"        "teams"         "continued"     "search"       
[17] "missing"       "body"          "cook"          "crew"         
[21] "wereegyptians" "sudanese"      "syrians"       "hassan"       
[25] "cook"          "cargo"         "ship"          "sea"          
[29] "bright"        "crashed"       "thursday"      "port"         
[33] "antalya"       "southern"      "turkey"        "vessel"       
[37] "collided"      "rocks"         "port"          "thursday"     
[41] "night"         "result"        "heavy"         "winds"        
[45] "waves"         "crew"          "" 
```

关于如何删除它的任何建议？添加`""`到我的停用词列表中也无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T21:39:39.543

我经常处理文本，但不是 tm，所以这是摆脱“”的两种方法。可能额外的“”字符是因为句子之间有双空格键。您可以在将文本变成一袋单词之前或之后治疗这种情况。您可以在 strsplit 之前将所有“”x2 替换为“”x1，也可以在之后进行（您必须在 strsplit 之后取消列出）。

```
x <- "I like to ride my bicycle.  Do you like to ride too?"

#TREAT BEFORE(OPTION):
a <- gsub(" +", " ", x)
strsplit(a,  " ")

#TREAT AFTER OPTION:
y <- unlist(strsplit(x, " "))
y[!y%in%""] 
```

你也可以试试：

```
newtext <- lapply(newtext, function(x) gsub(" +", " ", x)) 
```

我再次不使用 tm 所以这可能没有帮助，但这篇文章没有看到任何行动，所以我想我会分享可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:19:58.750

如果您已经设置了语料库，请尝试使用文档长度作为过滤器，将其作为标签附加到**meta()**，然后创建一个新的语料库。

```
dtm <- DocumentTermMatrix(corpus)

## terms per document
doc.length = rowSums(as.matrix(dtm))

## add length as description term
meta(corpus.clean.noTL,tag="Length") <- doc.length

## create new corpus
corpus.noEmptyDocs <- tm_filter(corpus, FUN = sFilter, "Length > 0")

## remove Length as meta tag
meta(corpus.clean.noTL,tag="Length") <- NULL 
```

使用上述方法，您只需 5 行代码即可高效地劫持**tm中现有的矩阵操作支持。**

# java - 如何更新存根类？（轴 2）

> ID：10488345
> 
> 赞同：0
> 
> 时间：2012-05-07T20:03:01.280
> 
> 标签：java, web-services, axis2, stub

我用 eclipse indigo、tomcat 7 创建了一个 web 服务，并使用了axis2。我做了一个简单的测试计算器，并使用存根类生成结果。所有作品。问题是在 Web 服务中添加新方法时。这个新方法不会出现在存根类中。

如何更新存根类？

谢谢

对不起我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T20:59:33.907

您可能忘记将操作添加到 WSDL 的绑定部分。绑定部分定义了如何通过您正在使用的协议（SOAP 等）访问操作。[这](http://www.w3schools.com/wsdl/wsdl_binding.asp)是描述绑定部分的页面。

如果您使用的是 WSDL 编辑器，它可能会自动为您生成绑定部分。例如，使用 Eclipse 图形 WSDL 编辑器，您可以单击绑定对象并选择“生成绑定内容...”。

# python - 如何检查数据库中的表是否存在以及如何显示错误？

> ID：10488347
> 
> 赞同：1
> 
> 时间：2012-05-07T20:03:10.407
> 
> 标签：python

如何在使用Python创建之前检查数据库中的表是否存在？

**我想检查它是否存在然后删除表。如果没有，则创建..**

另外，如果数据库代码有错误，如何显示错误？

（如果在 PHP 中。代码将是 die("....."); 用于错误处理.. 那么我应该在 Python 中使用什么？）

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:34:15.077

来自[MySQL 手动](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)使用

```
CREATE table IF NOT EXISTS ... 
```

如果表不存在则创建表。这甚至可能是标准 SQL（不确定，但它也可以在 sqlite 中工作）！

至于你的第二个问题“如果数据库代码有错误，如何显示错误？” 不确定你的意思。但是如果 MySQL 返回一个错误，那么数据库模块会将它变成一个 python 异常 - 请参阅[这个 StackOverflow 问题](https://stackoverflow.com/questions/1117828/python-mysqldb-exceptions)进行一些讨论

# c++ - 添加到向量而不复制结构数据

> ID：10488348
> 
> 赞同：15
> 
> 时间：2012-05-07T20:03:14.387
> 
> 标签：c++, vector

这可能是一个简单的 C++ 问题，但我正在重新学习 C++，并且不知道一些基础知识。我有一个类，其中包含一个带有对象向量的结构，所以是这样的：

```
struct my_struct{
    Irrelevant_Object object,
    vector<tuple> tuple_list;
} 
```

结构和元组（另一个结构）由架构预定义并在我的方法中提供给我；所以我不能改变它们。我想生成一个元组并将其插入到原来的空元组列表中。

简单的解决方案是分配一个新的元组对象，填充元组数据，然后调用 tuple_list.push_back() 并传入分配的元组。但这需要分配一个新的元组，只是为了让 push_back 方法将（大）元组结构的所有内容复制到向量的已经定义的内存空间中。因此，我支付了分配/删除的费用，以及将元组内容复制到向量中的较少费用来做到这一点。这似乎相当低效，并且由于这种方法将处于函数的关键路径中，因此我更喜欢更快的方法（诚然，我怀疑这种方法会成为瓶颈，而且我知道早期优化 == 不好。但是，我

所以我的问题是，有没有一种更快的方法来填充我的元组列表的内容而不分配和复制元组？如果这是一个数组，我可以使数组尽可能大，然后将对 tuple_list[0] 的引用传递给创建元组的函数。这样，函数可以填充数组中已分配元组的空内容，而无需分配新的元组或从一个元组复制到另一个元组。出于好奇，我尝试对向量进行此操作，并在我的迭代器指向 0x0 时出现段错误，因此我假设该语法不适用于向量。那么有没有一种快速的方法来完成这个任务？

由于这是一个学习语言和实际使用一样多的问题，因此请随意添加您认为有趣的任何其他相关的东西，我正在寻找学习。

谢谢。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-07T20:09:59.730

在 C++11 中，您可以使用[`std::vector::emplace_back`](http://en.cppreference.com/w/cpp/container/vector/emplace_back)，它就地构造新对象，因此使用此方法时不会复制。

通过使用此方法，您可以执行以下操作：

```
my_struct some_struct;
some_struct.tuple_list.emplace_back(1, 5, "bleh"); 
```

假设您的`tuple`对象包含此构造函数：

```
tuple::tuple(int, int, const std::string&) 
```

**编辑**：您还可以使用[移动语义](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2006/n2027.html#Move_Semantics)来存储预分配的元组：

```
my_struct some_struct;
tuple a_tuple;
/* modify a_tuple, initialize it, whatever... */
some_struct.push_back(std::move(a_tuple)); // move it into your vector 
```

或者使用对`tuple`存储在向量中之后的引用：

```
my_struct some_struct;
some_struct.tuple_list.emplace_back(1, 5, "bleh");
// store a reference to the last element(the one we've just inserted)
tuple &some_tuple = some_struct.tuple_list.back(); 
some_tuple.foo(); 
```

在上述所有解决方案中，您只创建一个`tuple`，同时还避免复制。

# c# - 高效的 DirectX 渲染

> ID：10488349
> 
> 赞同：1
> 
> 时间：2012-05-07T20:03:16.410
> 
> 标签：c#, graphics, directx, sharpdx

我正在尝试编写一个 DirectX 9.0 控件，该控件将多个 2-D 形状呈现到表面上并允许用户与这些形状进行交互。到目前为止，我已经能够将一百万个不同颜色的三角形渲染到一个网格上，然后用户可以使用鼠标在这个网格周围平移和缩放。但是，我相信，等不及了。我*知道*我这样做的效率很低……

目前，我为每个三角形都有一个顶点缓冲区，并且在每次渲染时，我都设置了流源并在一个巨人中绘制了图元-环形。对于一个实验，我尝试制作一个包含单个三角形的顶点缓冲区，并在另一个 for 循环中更改世界变换并绘制图元。表现很糟糕。

我真正需要的是某种方式来存储几个独特的形状（大约 100 个），并在世界各地对它们进行 1,000 或 10,000 多次标记。我还希望能够更改形状的单个实例的颜色。我不需要花哨的灯光/纹理/或类似的东西。只是一个简单的颜色。

那么，完成此任务的典型 DirectX 方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T22:44:05.560

您可以使用一些技术来做到这一点；我会先查看[索引缓冲区](http://msdn.microsoft.com/en-us/library/windows/desktop/bb173349%28v=vs.85%29.aspx)，然后随着场景变得更加复杂，转向支持[实例化。](http://http.developer.nvidia.com/GPUGems2/gpugems2_chapter03.html)

生成一个巨大的顶点和索引缓冲区，并使用索引缓冲区告诉它要使用缓冲区中的哪些顶点。您甚至可以优化以减少顶点缓冲区中重复顶点的数量（如果您有很多重叠），但即使是简单的实现也应该更快。

如果您想渲染大量变换的形状，使用顶点着色器是将处理挑战转移到设计用于并行处理它的设备的好方法。

一旦你使用着色器而不是固定功能管道，你可以将信息与每个顶点一起传递（可能在 Z 值或纹理坐标中对其进行编码）告诉 GPU 当像素着色器最终被光栅化为时要在像素着色器中做什么屏幕（例如更改图元的颜色）。

无论哪种方式，您的目标都是显着减少发送到 GPU 和从 GPU 发送的次数，因为每次使状态“不同步”时都要付出代价 - 例如，当您更改转换时。通常，每帧向卡发送一次大块比在整个帧过程中发送大量小块更快。

# c# - JSON.NET 无法反序列化包装的集合

> ID：10488351
> 
> 赞同：2
> 
> 时间：2012-05-07T20:03:19.233
> 
> 标签：c#, json.net

我有一个看起来像这样的包装列表：

```
[Serializable]
public class OrderManager : IEnumerable<Order>
{
    public OrderManager()
    { }

    private List<Order> orders = new List<Order>();

    public void AddOrder(Order order)
    {
        orders.Add(order);
    }

    public IEnumerator<Order> GetEnumerator()
    {
        return orders.GetEnumerator();
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        return orders.GetEnumerator();
    }
} 
```

我在这样的客户类中包含一个字段实例：

```
[Serializable]
public class Customer
{
    public Customer()
    { }

    private OrderManager _orders
        = new OrderManager();
    public OrderManager Orders
    {
        get { return _orders; }
        set { _orders = value; }
    }
} 
```

我像这样创建 JSON.NET 序列化程序：

```
private JsonSerializer GetSerializer()
{
    var serializer = new JsonSerializer();

    // on or off the type name handling doesn't help
    //serializer.TypeNameHandling = TypeNameHandling.All;

    var contractResolver = new DefaultContractResolver(true);
    contractResolver.IgnoreSerializableAttribute = false;
    contractResolver.IgnoreSerializableInterface = false;

    serializer.ContractResolver = contractResolver;

    serializer.PreserveReferencesHandling = PreserveReferencesHandling.All;
    serializer.ReferenceLoopHandling = ReferenceLoopHandling.Ignore;

    return serializer;          
} 
```

客户对象的序列化有效，但在反序列化期间出现错误：

> 在“Tests.SerializationTests+Customer”上将值设置为“_orders”时出错。

将 TypeNameHandling 设置为 All 我得到这个：

```
Type specified in JSON 'Tests.SerializationTests+Order[], Tests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' is not compatible with 'Tests.SerializationTests+OrderManager, Tests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'. Path '_orders.$type', line 1, position 232. 
```

知道如何让 Json.NET 与包装列表一起玩吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:21:28.420

我想你需要实施`ICollection<Order>`

```
public class OrderManager : IEnumerable<Order>,ICollection<Order> 
```

-

```
[Serializable]
public class OrderManager : IEnumerable<Order>,ICollection<Order>
{
    public OrderManager()
    { }

    private List<Order> orders = new List<Order>();

    public Order this[int i]
    {
        set { AddOrder(value); }
        get { return orders[i]; }
    }

    public void AddOrder(Order order)
    {
        orders.Add(order);
    }

    public IEnumerator<Order> GetEnumerator()
    {
        return orders.GetEnumerator();
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        return orders.GetEnumerator();
    }

    public void Add(Order item)
    {
        AddOrder(item);
    }

    public void Clear()
    {
        orders.Clear();
    }

    public bool Contains(Order item)
    {
        return orders.Contains(item);
    }

    public void CopyTo(Order[] array, int arrayIndex)
    {
        throw new NotImplementedException();
    }

    public int Count
    {
        get { return orders.Count; }
    }

    public bool IsReadOnly
    {
        get { return false; }
    }

    public bool Remove(Order item)
    {
        return orders.Remove(item);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:15:33.530

尝试以下两件事之一：

在您的列表周围创建一个名为 OrderCollection 的包装器集合类：

```
[Serializable]/[DataContract]
public OrderCollection : List<Order> { ... } 
```

或者尝试将 LIST 变成 ARRAY。

让我们知道其中一个是如何工作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T20:16:23.383

我不确定序列化是否适用于 IEnumerable，你能用 List 试试吗？

```
[Serializable]
public class OrderManager : List<Order> 
```

# python - 在matplotlib中用箭头连接轴上的一个点和另一个轴上的另一个点

> ID：10488355
> 
> 赞同：5
> 
> 时间：2012-05-07T20:03:34.000
> 
> 标签：python, matplotlib, plot, annotate

使用 matplotlib，我正在制作一个包含两个 Axes 对象（即两组 xy 轴）的图形。我想通过箭头或线连接两个点——一个从一个轴上选取，另一个从另一个轴上选取。

我尝试通过使用 annotate() 函数和 ConnectionPatch 对象来做到这一点，但在这两种方式中，箭头的一部分都被轴的“框架”隐藏了。请参见附图，其中我尝试通过 ConnectionPatch 对象连接两个轴的原点。

我还附上了用于生成图形的脚本。

有没有办法“向前”箭头（或将轴框架推到后面）？

![试图连接两个轴的原点。](../Images/f70bde2dd8c296953e38fc6d019d6206.png)

```
#!/usr/bin/python
# 
# This script was written by Norio TAKEMOTO 2012-5-7

import matplotlib.pyplot as plt
from matplotlib.patches import ConnectionPatch

# creating a figure and axes.
fig=plt.figure(figsize=(10,5))

ax1=plt.axes([0.05,0.15,0.40,0.80])

plt.xticks([0])
plt.yticks([0])
plt.xlim((-1.23, 1.23))
plt.ylim((-2.34, 2.34))

ax2=plt.axes([0.60,0.15, 0.30, 0.30])

plt.xticks([0])
plt.yticks([0])
plt.xlim((-3.45, 3.45))
plt.ylim((-4.56, 4.56))

# trying to connect the point (0,0) in ax1 and the point (0,0) in ax2
# by an arrow, but some part is hidden. I can't find a solution. Let's
# ask stackoverflow.

#xy_A_ax1=(0,0)
#xy_B_ax2=(0,0)
#
#inv1 = ax1.transData.inverted()
#xy_B_display = ax2.transData.transform(xy_B_ax2)
#xy_B_ax1     = inv1.transform(xy_B_display)
#ax1.annotate('Wundaba', xy=(0, 0), xytext=xy_B_ax1,
#             xycoords='data',textcoords='data', 
#             arrowprops=dict(arrowstyle='->'))

con = ConnectionPatch(xyA=(0, 0), xyB=(0, 0), 
                      coordsA='data', coordsB='data', 
                      axesA=ax1, axesB=ax2,
                      arrowstyle='->', clip_on=False)
ax1.add_artist(con)

plt.savefig('fig1.eps')
plt.savefig('fig1.png') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T20:17:49.440

一种简单的方法是将透明参数设置为`savefig()`，即`plt.savefig('fig1.png', transparent=1)`：

![在此处输入图像描述](../Images/9045718e57b97007967550f5483138c6.png)

或者您可以仅在第二张图上使用透明度：

`ax2.patch.set_facecolor('None')`

如第 21 行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-06T20:35:54.543

这可以通过[设置](https://github.com/matplotlib/matplotlib/issues/8744#issuecomment-307682968)轴上的 z 顺序来解决：

```
import matplotlib.patches
import matplotlib.pyplot as plt  # Vanilla matplotlib==2.2.2

figure, (ax1, ax2) = plt.subplots(1, 2)
ax1.set_zorder(1)
ax2.set_zorder(0)

patch = matplotlib.patches.ConnectionPatch(
    xyA=(0.0, 0.0),
    xyB=(0.0, 0.0),
    coordsA="data",
    coordsB="data",
    axesA=ax1,
    axesB=ax2,
    arrowstyle="->",
    clip_on=False,
)
ax1.add_artist(patch)

for ax in (ax1, ax2):
    ax.axis("scaled")
ax1.set_xlim(-0.25, 0.75)
ax1.set_ylim(-0.5, 0.5)
ax2.set_xlim(0.0, 1.0)
ax2.set_ylim(0.0, 1.0)
figure.savefig("example1.png") 
```

[![ConnectionPatch 的绘图](../Images/90748f24a2c228a22e854ffb1697ab9a.png)](https://i.stack.imgur.com/B7kUr.png)

# c++ - windows/osx/ipad 上的跨平台 GUI

> ID：10488356
> 
> 赞同：3
> 
> 时间：2012-05-07T20:03:40.267
> 
> 标签：c++, html, ios, user-interface, cross-platform

夏天我正在做一个项目，涉及完全重写一个大型应用程序，使其更加现代和跨平台兼容。它需要在 Windows、OS X 和 iPad 上运行。iPad 版本是当务之急。最好是将来也可以很容易地转换为 Web 应用程序。

我目前的计划是在 HTML/CSS/JS 中完成所有 GUI，使用 Chrome 嵌入式框架来呈现页面并处理交互性。这样所有的 UI 都是跨平台的，我只需要编写特定于平台的代码来显示它。这也意味着如果/当我将它移植到网络时，大部分 UI 已经是网络兼容格式。应用程序代码本身的其余部分也应该主要是跨平台的，只是纯 C++。iPad 没有 CEF，所以我正在考虑使用 UIWebView 类来做同样的事情。我很好奇您对在 iPad 上使用 HTML 作为 GUI 有何看法。

我主要担心的是：

*   性能 - 我不知道 UIWebView 的性能特征是什么，就将它用于 GUI 而言。会有很多交互式对话框，甚至需要一些动画。我对如何从 Javascript 与 Objective-C 进行通信进行了一些研究，最流行的方法（将文档位置设置为 MyApp:// 之类的自定义 URL，并从字符串中提取消息）似乎真的很慢.

*   可用性——iOS 用户习惯于某种标准的交互性（例如，非常平滑的过渡、可拖动的侧边栏，一切都快速而优美）。我相信我可以使用 CEF 在 Windows/OS X 上完成此任务，但不确定 iPad。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T21:26:37.813

我假设您使用的是带有最新版本 XCode（否则您将无法在 Mac OS X 或 iOS 上发布到 App Store）和 C++ 的 Mac。除此之外，您最好的选择是使用两个不同的工具包。我推荐适用于 Windows 和 Mac OS X 的 WxWidgets（它为两个平台提供本机外观）和适用于 iPad 的标准 iOS 工具包。

为两个平台使用单个工具包的问题在于它们彼此之间的不兼容程度。可以将 HTML5/CSS3/Javascript 用于 gui，但您必须制作三个独立的项目（每个平台一个）。虽然，我知道有一个工具包可用于使用 HTML/CSS 制作桌面应用程序，但我认为它与移动设备不兼容。

如果您现在想知道公司如何为 iOS、Android、Windows、Mac OS X 甚至 Linux 开发应用程序，那么他们是否有几个专门针对其平台的开发人员。所以他们将是一组 Windows 开发人员，另一组 Mac OS X 开发人员，等等。有时，如果他们使用 WxWidgets 或 Qt 等跨平台工具包，则不同的桌面开发人员组会合并为一个桌面开发组。

如果只有几个人在做这个项目，那么制作桌面和移动应用程序就更难了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:27:13.297

我决定为桌面和 iOS 使用 HTML。制作 3 个独立的项目并没有那么困难，而使用 HTML 进行渲染解决了大部分跨平台问题。感谢您的所有回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T05:09:13.100

您当然可以在 iPad 上使用 HTML5/CSS/JS GUI。甚至还有 GUI 框架可以帮助您解决这个问题。我认识的一个是[Enyo](http://enyojs.com)。你会发现更多。

基于这些技术构建的 GUI 的好处在于，在许多情况下，您可以使用 Web 浏览器在桌面上进行开发。

要部署到 iOS 设备，您可以手动将 GUI 放入其中`UIWebView`，或者您可以使用[phonegap](http://phonegap.com)，它会为您处理繁琐的工作，同时还允许您选择在 Android 和除 iOS 之外的其他一些移动平台上发布来自相同的来源。

对于桌面版本，您可能需要评估相同的 GUI 是否可以在嵌入式浏览器窗口中工作。不依赖手机/平板电脑硬件的 Enyo 应用程序在桌面网络浏览器中运行良好，但我怀疑用户可能会发现桌面使用的 GUI 很奇怪。如果您需要构建更传统的东西，那么如果您想要强大的功能和最佳的原生外观和感觉，我推荐[Qt ；如果您想要简单，我推荐](http://qt.nokia.com/products)[FLTK](http://www.fltk.org)。这两个框架都运行在 Windows、OS X 和 Linux 上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T07:17:40.063

您可以尝试使用 Embarcadero 商业和支持（在某种程度上）的 FireMonkey。亮点是跨平台编译和调试（！），在 Mac OS 和 Windows 上完全相似的行为（iOS 工作，但通常需要不同的形式），完全矢量化（！！）用户界面意味着它们可以放大/缩小和还以 3D 旋转，完全 3D 支持 (!!!) 以及内置到库中的动画和效果 - 即使它们不一定适合商业应用程序。它由一个非常好的和非常快速的 RAD 补充。

缺点是社区相对较小，版本 2 仍存在一些缺陷和缺失的组件，例如文件夹选择对话框、托盘图标支持和其他杂项。您可能想在平台上搜索问题。您可以使用 C++ 或 Delphi Object Pascal 为 Firemonkey 编写代码。

# red5 - red5 不使用 codecId=7 流式传输 flv

> ID：10488357
> 
> 赞同：0
> 
> 时间：2012-05-07T20:03:49.703
> 
> 标签：red5

我需要通过 Red5 流式传输 flv。一些文件（codecId=2）流的很好。但是其他格式为 avc 和 codecId=7 的 flv 没有流式传输……我有 Red5 0.9.0 RC2。

也许我需要插入一些罐子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T00:36:12.190

Red5 1.0 播放任何 flv 编解码器，我建议您使用更新的版本。[http://red5.googlecode.com/](http://red5.googlecode.com/)

# android - 如何在我创建的 Android WebView 中播放动态 mp4 视频

> ID：10488359
> 
> 赞同：1
> 
> 时间：2012-05-07T20:03:55.673
> 
> 标签：android, android-webview

这可能会节省一些阅读时间....尝试在我的 WEBVIEW 中播放 MP4 视频时，我不需要在 WEBVIEW 浏览器中播放视频。我完全可以接受一些可以为 Android 启动原生视频播放器的代码，只要它可以工作。如果有比我在这里找到的更好的解决方案，只要修改我的 WEBVIEW，我就全力以赴。

首先，我不是 Android 或 JAVA 开发人员。但是，提供代码并为我指明正确的方向通常会帮助我到达那里。在过去的 4 年里，我建立了一个拥有大量会员的网站。www.GoLiVeFitness.com 和 www.GoLiveFitness.com/Mobile。该解决方案是一个 Asp.Net 解决方案。它基本上是一个允许用户轻松搜索超过 4,800 个免费锻炼视频的网站。我们构建了应用程序的移动版本，它是一个缩小版但更简洁的版本。与其继续告诉用户将他们的智能手机浏览器指向移动网站，我决定使用 Android WebView 将网站加载到内置的 html5 浏览器中（如果我说得不正确，请原谅我）。

我完成了 webview，它完美地加载了网站。我什至能够将它部署在我的 Droid Charge 上，并且该网站完美地通过 web 视图加载。问题来了......所有类型的T-SQL（包括存储过程）正在查询和带回的动态视频将不会在webview中播放。当您单击播放按钮时，它看起来可能会启动，但它永远不会启动。我很快决定我的 webview 中没有足够的代码来处理类似的事情。同样，硬编码一些视频是行不通的。该网站有超过 4,800 个视频。例如，用户可以键入腿部并返回 130 次腿部锻炼。然后，他们可以通过触摸名称链接来选择一个并播放视频。****所以我的问题是如何让 WebView 浏览器播放 mp4 格式的视频。我在这里看到了一个可能有效的解决方案，但我 我在这方面还不够好，无法让代码正常工作。我希望有人可以帮助我修改代码以及我的 WebView。当我尝试时，我收到了很多，很多，很多错误。因此，我将首先粘贴在 WebView 浏览器中运行的 WebView 代码，然后粘贴解决方案代码，希望有人能告诉我应该更改哪些内容才能使其正常工作。警告：如果您能提供帮助，我很可能需要您真正向我展示正确的代码。同样，我对此很陌生。因此，我将首先粘贴在 WebView 浏览器中运行的 WebView 代码，然后粘贴解决方案代码，希望有人能告诉我应该更改哪些内容才能使其正常工作。警告：如果您能提供帮助，我很可能需要您真正向我展示正确的代码。同样，我对此很陌生。因此，我将首先粘贴在 WebView 浏览器中运行的 WebView 代码，然后粘贴解决方案代码，希望有人能告诉我应该更改哪些内容才能使其正常工作。警告：如果您能提供帮助，我很可能需要您真正向我展示正确的代码。同样，我对此很陌生。

-----我的 WebView 代码来自 GoLiveFitnessActivity.java 文件的代码---- package golivefitness.mob;

```
import android.app.Activity;
import android.drm.DrmManagerClient.OnErrorListener;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.os.Bundle;
import android.view.Gravity;
import android.view.KeyEvent;
import android.view.View;
import android.view.ViewGroup;
import android.webkit.WebChromeClient;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.FrameLayout;
import android.widget.LinearLayout;
import android.widget.VideoView;

public class GoLiveFitnessActivity extends Activity {

private WebView mWebView;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    WebView mWebView = (WebView) findViewById(R.id.webview);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.loadUrl("http://www.golivefitness.com/mobile");
    mWebView.setWebViewClient(new HelloWebViewClient());
}

   private class HelloWebViewClient extends WebViewClient {
       @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) 
       {
            view.loadUrl(url);
            return true;
        }
   }

   @Override
   public boolean onKeyDown(int keyCode, KeyEvent event) {
       if ((keyCode == KeyEvent.KEYCODE_BACK) && mWebView.canGoBack()) {
           mWebView.goBack();
           return true;
       }
       return super.onKeyDown(keyCode, event);
   }
} 
```

* * *

我从堆栈溢出复制的解决方案可能会解决我的问题 [如何使用 android 在 webview 中播放视频？](https://stackoverflow.com/questions/4989738/how-to-play-a-video-in-a-webview-with-android)

```
public class InredisChromeClient extends WebChromeClient implements          OnCompletionListener, OnErrorListener {
private InterfazWebInredis interfazWeb; // Use Your WebView instance instead

private VideoView mCustomVideoView;

private LinearLayout mContentView;
private FrameLayout mCustomViewContainer;
private WebChromeClient.CustomViewCallback mCustomViewCallback;
private LinearLayout mErrorConsoleContainer;
static final FrameLayout.LayoutParams COVER_SCREEN_GRAVITY_CENTER = new   FrameLayout.LayoutParams(
        ViewGroup.LayoutParams.FILL_PARENT,
        ViewGroup.LayoutParams.FILL_PARENT, Gravity.CENTER);

public InredisChromeClient(InterfazWebInredis iwi) {
    super();
    this.interfazWeb = iwi;
}

public void onShowCustomView(View view, CustomViewCallback callback) {
    // super.onShowCustomView(view, callback);
    if (view instanceof FrameLayout) {
        mCustomViewContainer = (FrameLayout) view;
        mCustomViewCallback = callback;
        mContentView = (LinearLayout) interfazWeb.findViewById(R.id.mainContainer);
        if (mCustomViewContainer.getFocusedChild() instanceof VideoView) {
            mCustomVideoView = (VideoView) mCustomViewContainer.getFocusedChild();
            // frame.removeView(video);
            mContentView.setVisibility(View.GONE);
            mCustomViewContainer.setVisibility(View.VISIBLE);
            interfazWeb.setContentView(mCustomViewContainer);
            mCustomVideoView.setOnCompletionListener(this);
            mCustomVideoView.setOnErrorListener(this);
            mCustomVideoView.start();
        }
    }
}

public void onHideCustomView() {
    if (mCustomVideoView == null)
        return;
    // Hide the custom view.
    mCustomVideoView.setVisibility(View.GONE);
    // Remove the custom view from its container.
    mCustomViewContainer.removeView(mCustomVideoView);
    mCustomVideoView = null;
    mCustomViewContainer.setVisibility(View.GONE);
    mCustomViewCallback.onCustomViewHidden();
    // Show the content view.
    mContentView.setVisibility(View.VISIBLE);
}

@Override
public void onCompletion(MediaPlayer mp) {
    mp.stop();
    mCustomViewContainer.setVisibility(View.GONE);
    onHideCustomView();
    interfazWeb.setContentView(mContentView);
}

@Override
public boolean onError(MediaPlayer mp, int what, int extra) {
    interfazWeb.setContentView(R.layout.main);
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:14:19.617

不知道你是否还在之后，但你可以在开始视频之前做这样的事情（我的视频存储在“res/raw”文件夹中）：

您的 VideoView 初始化代码：

```
VideoView vd = (VideoView)view.findViewById(R.id.video);
vd.setVideoURI(Uri.parse("android.resource:/PACKAGE_NAME/" + getVideo(context, "videoName")));
vd.start(); 
```

获取动态视频的代码：

```
public static int getVideo(Context context, String name)
{
    Assert.assertNotNull(context);
    Assert.assertNotNull(name);

    return context.getResources().getIdentifier(name, "raw", context.getPackageName());
} 
```

上面的代码基本上允许您将字符串名称传递给您的 setVideoURI 调用。第二段代码返回相关的 android ID 以播放视频（您可以在代码中的任何位置调用它）。

希望这可以帮助。

# javascript - 使用 CSS 移动 div

> ID：10488364
> 
> 赞同：0
> 
> 时间：2012-05-07T20:04:33.837
> 
> 标签：javascript, animation, css

这个问题应该很简单，但我是这些方法的新手。

简而言之，这就是我想要完成的：我想触发一个动画，将 div 移动指定数量的像素。而已。假设我在屏幕上有代表每个键盘箭头的按钮。每次单击箭头时，框将从其当前位置沿适当方向移动指定数量的像素。

我最初使用过渡来完成此操作，但它只工作一次。几个小时以来，我一直在寻找这个非常 BASIC 问题的答案，真的很沮丧。

请用基本的javascript回答。我不想为这个项目使用外部库。

（编辑）我不是在问如何在所有浏览器中实现这一点。我在问如何在任何浏览器中完成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:23:00.733

这是一个使用 Javascript/jQuery 的演示：

```
var $ball = $('#ball'); // cache our ball ;)

$('.btn').on('click',function(){
  var direction = $(this).data('move');
  $ball.stop(1); // clear animation queue
  switch (direction){
    case 'up':
      $ball.animate({top:'-=30'});
      break;
    case 'down':
      $ball.animate({top:'+=30'});
      break;
    case 'left':
      $ball.animate({left:'-=30'});
      break;
    case 'right':
      $ball.animate({left:'+=30'});
      break;
  }
});
```

```
#ball{
  position:absolute;
  left:60px;
  top:60px;
  width:20px;
  height:20px;
  background:red;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<button class="btn" data-move="up">U</button>
<button class="btn" data-move="down">D</button>
<button class="btn" data-move="left">L</button>
<button class="btn" data-move="right">R</button>

<div id="ball"></div>
```

## *[演示 jsBin](http://jsbin.com/jenoci/1/edit?html,css,js,console,output)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T20:28:16.950

假设您的 ElementToMove 绝对定位在 CSS 中，理论上您可以在点击处理程序中添加如下内容：

```
var elementToMove = document.getElementById( 'ElementToMove' );
while ( elementToMove.left < elementToMove.left + 10 )
{
  window.setTimeout(
    function ( )
     {
       elementToMove.style.left = (elementToMove.style.left + 1) + "px";
     },
     100
   );
 } 
```

第`10`2 行中的数字将是单击按钮时要移动的预定量。

本质上，它的作用是每十分之一秒（第`100`9 行）将对象移动 1 个像素，直到它移动到您想要的距离为止。你也可以完成同样的事情`setInterval( )`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T20:29:10.083

我使用 jquery 来捕获点击。我使用普通的旧 javascript 来移动 div。如果你想在 javascript 中做很多 DOM manip，我相信你会想要熟悉 jquery。

```
<html>
<head>
    <title>move it</title>
</head>
<body>
    <div id="box" style="position: absolute; left: 2px; top: 5px; width: 100px; height: 100px;
        background-color: Red;">
    </div>
    <div id="buttons" style="position: absolute; left: 2px; top: 100px;">
        <button id="down"  >
            down
        </button>
        <button id="right"  >
            right
        </button>
    </div>
</body>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">

    function moveDown() {
        var xx = document.getElementById('box');
        var top = parseInt(xx.style.top);
        xx.style.top = top + 12 + "px";
        console.log(xx.style.top);
    }

    function moveRight() {
        var xx = document.getElementById('box');
        var left = parseInt(xx.style.left);
        xx.style.left = left + 12 + "px";
        console.log(xx.style.top);
    }

    $(function () {
        $("#down").click(moveDown);
        $("#right").click(moveRight);
    });

</script>
</html> 
```

# java - 从 .jsp 到 html 页面的变量

> ID：10488367
> 
> 赞同：19
> 
> 时间：2012-05-07T20:04:42.683
> 
> 标签：java, html, jsp, servlets

我有一个`.jsp`从 servlet 传递变量的页面。假设我有一个`.jsp`页面

```
...
<body>
${Variable}
</body>
... 
```

并且让我们也假设`variable = "oh my god"`。还行吧。但是我怎样才能把这个变量放到`.html`浏览器显示变量值的页面上呢？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-07T20:05:59.637

你需要这样做：

```
<%= Variable %> 
```

生成的 HTML 将是：

```
<body>
oh my god
</body> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T20:41:44.107

实际上，目前在此处发布的最佳投票答案和解决方案 ( ) 与您在问题 ( )`<%= Variable %>`中提供的代码完全相同。`${Variable}`唯一的区别是**你的是应该使用**的，因为它更具可读性而且它不是任何该死的 scriptlet！

就我的观点而言，如果您想在播放 html 页面中使用您的 JSP 变量，您将需要 javascript 从 jsp 呈现的 html 中检索该变量，然后在实际的`newPage.html`. 您可以将隐藏的 iframe 放入其中`newPage.html`，在其中嵌入 jsp 页面作为该 iframe 的源，然后使用例如解析其 html`getElementById()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T21:00:28.907

有两种选择，使用`scriptlets`或`expression language`，我建议使用`expression language`.

很好地阅读了为什么[Scriptlet 不好](http://www.coderanch.com/t/466754/JSP/java/Why-EL-so-good-scriptlets)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-02T05:23:07.277

在访问 html 中的变量之前，您需要初始化变量，然后在另一个 JSP 代码块中进行任何计算和其他修改。现在您可以访问 html 中的变量。这是我对 Stackoverflow.com 的第一个回答，请专家通知我所犯的错误。

```
<body>
<% java.lang.Integer var=0; %>
<%
  int a;
  int b;
  var=a+b;
%>
<% out.print(var);%>
</body> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-13T15:12:38.197

虽然这个问题很老，但我认为它仍然是实际的，所以我会尝试从我的角度做出贡献。
问题很简单，我认为大多数答案只是回答不同的问题 - 因此 - 提供了一些混乱。
据我了解，这个问题是：

> 我可以在 html 中拥有 JSP 的动态变量（顺便说一句，**Expression Lnaguage**的一个元素），就像我在 jsp 中拥有它一样吗？

答案是**否定**的。

**JSP**转换为**Java Server Pages**，这就是这里的重点，即生成动态值并将其提供给**服务器**端的 jsp。你不能让你的html动态。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-02T09:27:42.650

```
long taskId = 223;
//
<input type="hidden" name="taskId" value=<%=taskId%> /> 
```

# c# - 康威的人生游戏——初始化

> ID：10488368
> 
> 赞同：2
> 
> 时间：2012-05-07T20:04:43.580
> 
> 标签：c#, .net

假设我们有一个包含 30 列和 30 行的 Grid。

人生游戏规则简而言之：

*   一个小区有八个相邻小区
*   一旦一个细胞有三个活的相邻细胞，一个细胞就会活着
*   如果一个细胞恰好有两个或三个活的相邻细胞，它就会存活下来

但是如何初始化一个确定大小的网格呢？是否有规则如何准确初始化某些单元格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T20:09:44.410

不，没有规则。事实上，这才是真正的重点，看看在具有各种起始配置的下一代中会发生什么。

您可以使用 ALIVE 或 EMPTY 随机初始化每个网格。但通常网格是由用户输入初始化的，例如在代表第一代的屏幕上随意绘制，然后开始模拟，以便屏幕显示后代。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T20:14:55.520

大多数情况下，它由用户初始化（仅需要用户操作）。当然你也可以选择自己初始化。

来自[维基百科](http://en.wikipedia.org/wiki/Conway%27s_Game_of_Life)：

> “游戏”是一个零玩家游戏，这意味着它的进化是由它的初始状态决定的，不需要进一步的输入。一个人通过创建初始配置并观察它如何演变来与生命游戏进行交互。

# ios - UIWebView：停止滚动，但不要禁用它

> ID：10488371
> 
> 赞同：2
> 
> 时间：2012-05-07T20:04:48.147
> 
> 标签：ios, uiwebview

我看到了很多关于如何在 web 视图中禁用滚动的答案，但我所追求的是不同的：假设用户正在滚动 web 视图，并且手指不再在设备上，但它仍在滚动（它没有停止，但它正在减速，这可能需要一秒钟左右）。然后，他们点击一个按钮。我希望 UIWebView 立即停止滚动（即取消其当前滚动）。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:10:36.747

UIWebView 类符合 UIScrollViewDelegate，因此在此处使用此答案：[如何以编程方式强制停止在 UIScrollView 中滚动？](https://stackoverflow.com/questions/3410777/how-can-i-programmatically-force-stop-scrolling-in-a-uiscrollview)您可以通过手动设置内容偏移量来停止滚动。

# cocos2d-iphone - Cocos 2D - Sprite Facing 方向

> ID：10488372
> 
> 赞同：0
> 
> 时间：2012-05-07T20:04:53.347
> 
> 标签：cocos2d-iphone

我很好奇如何确定精灵的朝向？我有一个按钮动作，可以在 x 轴上移动精灵 9 个像素，效果很好。然而，当精灵转向 -x 轴时，它仍然向正 x 轴移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:43:15.157

旋转和移动是两个不同的东西......旋转不决定方向......

如果你将它移向 x 轴..它不会面向 x 轴..它只会移动......如果你将它旋转一个角度，它仍然会沿着相同的方向移动，除非你改变它的移动......

旋转只是告诉精灵的面对......希望这会有所帮助.. :)

# html - HTML 是否设计为静态的？

> ID：10488375
> 
> 赞同：0
> 
> 时间：2012-05-07T20:05:20.623
> 
> 标签：html

我经常说这条规则：*“HTML 是静态的”*；换句话说：HTML 代码不打算在本地修改，除非您使用 JavaScript 或其他语言。

但是，对于 HTML5 规范，[应该是] 规则有一些例外。例如，有[**contenteditable**属性](http://dev.w3.org/html5/spec/editing.html#contenteditable)。

所以我的问题是：这条规则是否正式存在（来自专家）？为什么这个规则？打破这个规则有那么糟糕吗？

我问这些问题是因为我正在开发一个 JavaScript 框架。它允许开发人员使用 HTML 属性来修改用户操作（点击等）的页面内容。但是当我和一些开发者讨论这个原则时，说引用那个规则是一个错误的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:09:53.723

这是观察而不是规则。即使内容可编辑，我认为它仍然是静态的。

否则，您可能会对文本区域或文本字段说同样的话。您可以更改这些内容，但每次访问该页面时，该页面仍然是相同的（读取静态）。当满足某些条件时，页面上也不会出现其他内容。

> 但是当我和一些开发者讨论这个原则时，说引用那个规则是一个错误的想法。

同样，这不是规则，而是观察，纯 HTML**是**静态的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T20:07:49.590

我不是 100% 肯定的，但我在 W3 规范（官方规则手册）中找不到任何内容说 HTML*必须*是静态的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T20:09:49.073

取决于您的更改有多大……如果您正在使用 JS 进行核心更改，那么从 SEO 角度来看，这可能不是一个好主意。

但我也没有正式听说过这条规则。

# jpeg - JPEG 图像压缩中的量化

> ID：10488382
> 
> 赞同：0
> 
> 时间：2012-05-07T20:05:44.987
> 
> 标签：jpeg, quantization

> 在 JPEG 压缩中，损失发生在量化期间和 DCT 转换期间。

为什么我们在 JPEG 图像压缩中的 DCT 变换后量化后得到许多 0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:36:39.057

我可能误解了你的问题。获得“许多 0”是量化的重点。通过在霍夫曼码中的每个符号前面加上直到下一个系数的多少个零来隐式编码零。

JPEG 压缩中的量化是通过将每个系数与量化表中的相应值进行整数除法来完成的。如果系数小于量化表中的值，它将变为零。

在解码器中，系数乘以量化表中的值，以便它们恢复到以前的值（或多或少），除非系数为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T15:26:39.610

@Dragon66 说的是对的，DCT 矩阵除以一个量化矩阵并四舍五入为整数，当系数足够高时结果为 0。

这样做的原因是人眼对较低空间频率的噪声更敏感，但忽略了较高空间频率的大部分噪声。

当用 DCT 处理像素矩阵并得到结果矩阵时，左上角的系数代表像素块的平均亮度。向右移动，系数代表增加的水平空间频率。向下移动，系数代表增加的垂直空间频率。

因此，量化矩阵具有移动到右下角的较高分量。当系数在这些位置达到 0 时丢失的信息对图像本身来说不太重要，因为它代表更高的频率分量。

此处的完整解释： [http ://www.media-matters.net/docs/resources/Digital%20Files/MPEG/MPEG%20Encoding%20Basics.pdf](http://www.media-matters.net/docs/resources/Digital%20Files/MPEG/MPEG%20Encoding%20Basics.pdf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T20:32:25.937

在 DCT 变换之后，压缩器将每个 DCT 输出值除以一个“量化系数”，并将结果四舍五入为整数。量化系数越大，丢失的数据越多。由于四舍五入，您可能会看到很多 0。结果系数包含大量冗余数据。以下 Huffman 压缩将无损删除冗余，从而生成更小的 JPEG 数据。

[更多信息](http://www.fileformat.info/mirror/egff/ch09_06.htm)

# apache-flex - Spring/Flex（在线）到 Spring/Air（离线）

> ID：10488383
> 
> 赞同：0
> 
> 时间：2012-05-07T20:05:45.070
> 
> 标签：apache-flex, blazeds

我一直在做一个使用 Flex + Blazeds + Spring 的项目。现在由于连接问题，它的某些部分必须离线运行。问题是如何处理现有架构，尽可能地保留它，或者至少如何创建一个不太难发展的解决方案。我在网上搜索过很多类似的问题，但最常见的做法是把所有代码都写在actionscript中（包括业务逻辑、数据库访问、事务等等），我觉得特别不适合这种情况。我正在考虑使用嵌入在应用程序中的 Jetty 和某种可嵌入的数据库，例如 Java DB，这样我就可以正常访问我的 Spring 服务而无需任何大的改变。然而，一些同事不同意。他们认为在客户端上运行的 Web 服务器' s 机器可能会导致性能问题，因此可以采用更轻量级的解决方案。直到现在，还没有其他解决方案出现。你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T23:19:16.107

当然我不知道你的具体情况，但总的来说我会同意你的同事的看法。特别是如果您不想 24/7 全天候为您的用户提供帮助台服务。如果您的用户没有强大的机器，**性能可能确实是一个问题。**我知道 Jetty 非常轻量级，但在一些较旧的计算机上，您希望同时运行尽可能少的进程。

但我更关心的是应用程序的**可维护性。**对于初学者，您必须在用户机器上**安装**整个堆栈，这并不容易。一旦你得到了覆盖，你就会有**更多的失败点**。您的应用程序现在可能在 AIR 应用程序、本地服务器、数据库或其中一个层之间的连接中失败。

如果您认为您将在本地机器上部署的服务器将 100% 以与当前 Web 服务器相同的方式运行，那么您可能错了。您没有在线运行 Jetty 或嵌入式数据库，是吗？您的用户可能拥有您必须考虑的各种不同的操作系统。

您将如何将**更新**推送到您的应用程序？这是 AIR 应用程序中的一个非常简单的过程，但如果您还必须更新本地服务器端代码，这将变得更加困难。

我认为从长远来看，重写您的 AIR 应用程序中的一些逻辑会带来回报。这将花费您一些前期费用，但它会减少您的维护费用。我也不认为应该重写完整的模型。对于这些类型的在线/离线问题，您可以制定一种仅同步最重要数据的策略。而且，如果您不喜欢重复代码，您总是可以编写一个生成器来获取您的 Java 模型并创建 ActionScript 副本。

# oracle - Oracle 表单：如何通过切换单选按钮禁用/启用表单中的某些块或字段？

> ID：10488384
> 
> 赞同：2
> 
> 时间：2012-05-07T20:05:56.063
> 
> 标签：oracle, oracleforms

我的 Oracle 表单中有三个单选按钮。理想情况下，选择一个选项将启用 block1 并禁用 block2 和 block3。这怎么可能实现？全局变量？哪个触发器“监听”单选按钮的变化？

数据库是Oracle6i。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:30:13.517

查看 WHEN-RADIO-CHANGED 触发器。

如果您已经为表单定义了单选按钮，那么您知道单选组是您在表单上定义的字段，并且您可以根据需要为组定义任意数量的单选按钮。构建表单时，每个单选按钮都与特定值相关联。

当单选组中的一个单选按钮被更改/选择时，将触发 when-radio-changed 触发器。此时，根据按下的按钮，您将获得单选组的值。对按下的按钮执行所需的操作。因此，在触发器中实现此功能的 PL/SQL 骨架结构可能是：

```
IF :radio_group = '1' THEN
  -- enable/disable as many properties as desired for the blocks
  SET_BLOCK_PROPERTY('block1',property_to_enable,PROPERTY_TRUE);
  SET_BLOCK_PROPERTY('block2',property_to_disable,PROPERTY_FALSE);
  SET_BLOCK_PROPERTY('block3',property_to_disable,PROPERTY_FALSE);
ELSIF :radio_group = '2' THEN
  ...
ELSIF :radio_group = '3' THEN
  ...
END IF; 
```

# javascript - 使用 $.each 遍历具有多个属性的对象数组

> ID：10488387
> 
> 赞同：0
> 
> 时间：2012-05-07T20:05:59.623
> 
> 标签：javascript, jquery

我有一个名为“Contractors”的对象数组，其中每个承包商都将显示在屏幕上的一个框中，因此它们具有“id”、“posx”和“posy”属性。我希望能够将单击时的坐标从它们当前的位置更改为屏幕底部的一行，它们将按顺序显示。更改坐标的代码可以正常工作，但将框设置为这些坐标的动画则不能。

```
function moveto(){
                $.each(Contractors, function(index, value){                 
                    $(index).animate({top: this.posy},"slow");
                    $(index).animate({left: this.posx},"slow");
                });
            }
```

我不确定问题出在哪里，但我遇到了“无法读取未定义的属性'默认视图'”的问题。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:33:15.543

`index`是一个数字，因此将它放在 jQuery 对象中或在其上调用函数是没有意义的。

实际上，您的函数中根本没有 DOM 元素，因此如果不查看更多代码，就无法修复。

# c - C 和 Erlang：Erlang 端口示例

> ID：10488388
> 
> 赞同：8
> 
> 时间：2012-05-07T20:06:14.113
> 
> 标签：c, erlang, stdout, stdin, erlang-ports

*免责声明：该问题的作者对 Erlang 有一个平均的了解，对 C 有基本的了解。*

我现在正在阅读[互操作性教程用户指南](http://www.erlang.org/doc/tutorial/users_guide.html)。我已经成功编译了这个`complex.c`例子，它可以与 Erlang Port 一起使用，没有任何问题。

但是，我想了解实际的 C 代码是如何工作的。我一般理解它：在示例中，它从标准输入中读取 2 个字节并检查第一个字节。根据第一个字节，它调用`foo`或`bar`函数。这是我目前对它的理解的极限。

因此，如果我们同时采用`erl_comm.c`：

```
/* erl_comm.c */

typedef unsigned char byte;

read_cmd(byte *buf)
{
  int len;

  if (read_exact(buf, 2) != 2)
    return(-1);
  len = (buf[0] << 8) | buf[1];
  return read_exact(buf, len);
}

write_cmd(byte *buf, int len)
{
  byte li;

  li = (len >> 8) & 0xff;
  write_exact(&li, 1);

  li = len & 0xff;
  write_exact(&li, 1);

  return write_exact(buf, len);
}

read_exact(byte *buf, int len)
{
  int i, got=0;

  do {
    if ((i = read(0, buf+got, len-got)) <= 0)
      return(i);
    got += i;
  } while (got<len);

  return(len);
}

write_exact(byte *buf, int len)
{
  int i, wrote = 0;

  do {
    if ((i = write(1, buf+wrote, len-wrote)) <= 0)
      return (i);
    wrote += i;
  } while (wrote<len);

  return (len);
} 
```

和`port.c`：

```
/* port.c */

typedef unsigned char byte;

int main() {
  int fn, arg, res;
  byte buf[100];

  while (read_cmd(buf) > 0) {
    fn = buf[0];
    arg = buf[1];

    if (fn == 1) {
      res = foo(arg);
    } else if (fn == 2) {
      res = bar(arg);
    }

    buf[0] = res;
    write_cmd(buf, 1);
  }
} 
```

**每个功能实际上在那里做什么？`li, len, i, wrote, got`变量的实际用途是什么？**

还有一些小问题：

1.  为什么函数没有任何返回类型，甚至`void`s？
2.  当 Erlang 端口向 C 发送数据时，第一个字节确定要调用的函数。如果字节保存十进制 1，则`foo()`调用，如果字节保存十进制 2，则`bar()`调用。如果不进行任何更改，该协议可用于调用多达 255 个不同的 C 函数，每个函数只有 1 个参数。那正确吗？
3.  “添加长度指示器将由 Erlang 端口自动完成，但必须在外部 C 程序中显式完成”。这意味着什么？它是在哪一行代码上完成的？
4.  来自教程：“默认情况下，C 程序应从标准输入（文件描述符 0）读取并写入标准输出（文件描述符 1）。” 然后：“请注意，stdin 和 stdout 用于缓冲输入/输出，不应用于与 Erlang 的通信！” 这里有什么问题？
5.  为什么`buf`初始化为`[100]`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T02:00:52.673

*这个答案同样被否认（我不是 Erlang 或 C 程序员，我只是碰巧正在经历相同的材料）*

您的初始模型有点偏离。代码实际工作的方式是从 读取前两个字节`stdin`，假设它表示实际消息的长度，然后从 读取更多字节`stdin`。在这种特定情况下，实际消息总是两个字节（一个对应于函数的数字和一个要传递给它的整数参数）。

**0 - a)** `read_exact`从 读取`len`字节`stdin`，首先`read_cmd`使用`read_exact`以确定它应该读取多少字节（前两个字节表示的数字，或者如果可用的字节少于两个，则没有），然后读取那么多字节。`write_exact`将`len`字节写入`stdout`，`write_cmd`用于`write_exact`输出两个字节长度的标头，后跟一条适当长度的消息（希望如此）。

**0 - b)**我认为`len`上面已经充分涵盖了。`li`是用于为写入函数生成该两字节标头的变量的名称（我不能逐步带您完成移位操作，但最终结果是`len`在发送的前两个字节中表示）。`i`是一个中间变量，其主要目的似乎是确保不返回错误（如果返回，则返回错误代码作为 / 的`write`结果）。并跟踪已写入/读取的字节数，包含循环在大于.`read``read_exact``write_exact``wrote``got``len`

**1 -**我实际上不确定。我使用的版本是 type `int`，但在其他方面是相同的。我是从[Programming Erlang](http://pragprog.com/book/jaerlang/programming-erlang)的第 12 章中得到的，而不是您链接的指南。

**2 -**这是正确的，但是端口协议的重点是您可以更改它以发送不同的参数（如果您发送*任意参数，那么使用*[C 节点](http://www.erlang.org/doc/tutorial/cnode.html)方法而不是端口可能会更好）。例如，我在最近的一篇文章中[巧妙地修改了它](http://langnostic.blogspot.ca/2012/04/notes-from-borders-of-erlang.html)，以便它发送单个字符串，因为我只有一个要在 C 端调用的函数，从而无需指定函数。我还应该提到，如果您的系统需要调用超过 255 个用 C 编写的不同操作，您可能需要重新考虑它的结构（或者只使用整个 9 个并用 C 编写）。

**3 -**完成

```
read_cmd(byte *buf)
{
  int len;

  if (read_exact(buf, 2) != 2)   // HERE
    return(-1);                  // HERE
  len = (buf[0] << 8) | buf[1];  // HERE
  return read_exact(buf, len);
} 
```

在`read_cmd`功能和

```
write_cmd(byte *buf, int len)
{
  byte li;

  li = (len >> 8) & 0xff;        // HERE
  write_exact(&li, 1);           // HERE

  li = len & 0xff;               // HERE
  write_exact(&li, 1);           // HERE

  return write_exact(buf, len);
} 
```

在`write_cmd`函数中。我认为解释包含在`0 - a)`; 这是一个标头，它告诉/找出消息的其余部分将持续多长时间（是的，这意味着它只能是有限长度，并且该长度必须可以用两个字节表示）。

**4 -**我不完全确定为什么这会是一个问题。需要详细说明吗？

**5 -** `buf`是一个字节数组，必须明确界定（我认为出于内存管理目的）。我在这里将“”读`100`作“一个大于我们计划容纳的最大消息大小的数字”。实际选择的数字似乎是任意的，似乎任何 4 或更高的数字都可以，但我可以在这一点上得到纠正。

# delphi - 如何停止排序 ListView.AlphaSort

> ID：10488390
> 
> 赞同：3
> 
> 时间：2012-05-07T20:06:27.857
> 
> 标签：delphi, listview

德尔福 Xe2。Listview (Lv1) 与大列表项。Lv1 有标准的比较程序“TForm1.lv1Compare”。排序由标准程序 lv1.AlphaSort 开始；一切正常并正常排序。一个问题：如何在需要时立即停止开始的排序？

例子：

```
procedure tform1.button1.onclick(..);
begin
lv1.AlphaSort; // start sorting
end;

procedure tform1.button2.onclick(..);
begin
//lv1.StopSort; // stop sorting ???
end; 
```

或者可以在程序OnCompare中有什么停止的命令吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T20:26:07.173

宏内部正在[`TListView.AlphaSort`](http://docwiki.embarcadero.com/Libraries/en/Vcl.ComCtrls.TCustomListView.AlphaSort)被[`ListView_SortItems`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775131%28v=vs.85%29.aspx)调用，但我看不到有关如何在引用中停止排序过程的任何提及（即使通过回调函数），所以恐怕这是不可能的（至少是常规方式）。

就像 Sertac 在他的评论中建议的那样，一种可能的解决方法可能是在 OnCompare 事件中引发静默异常：

```
var
  YouWantToAbortSort: Boolean;

procedure TForm1.Button1Click(Sender: TObject);
begin
  YouWantToAbortSort := False;
  ListView1.AlphaSort;
end;

procedure TForm1.Button2Click(Sender: TObject);
begin
  YouWantToAbortSort := True;
end;

procedure TForm1.ListView1Compare(Sender: TObject; Item1, Item2: TListItem;
  Data: Integer; var Compare: Integer);
begin
  if YouWantToAbortSort then
    Abort;
  // some sorting function here ...
  Application.ProcessMessages;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T20:54:47.593

使用[VirtualTreeView](http://www.delphi-gems.com/index.php/controls/virtual-treeview)而不是 TListView 并在另一个线程中对您的数据进行排序。然后，您将有能力随时阻止它。

# java - JavaNIO：检查root用户从普通用户下运行的进程创建的文件锁？

> ID：10488391
> 
> 赞同：4
> 
> 时间：2012-05-07T20:06:49.457
> 
> 标签：java, permissions, locking, nio

我有两个要同步的进程。

进程 A 以 root 身份运行并在特定文件上创建可重入锁。进程 B 在“普通”用户下运行，应该等待进程 A 释放锁。

我尝试了很多方法，但由于文件权限错误而无法使其正常工作。这是代码：（删除了虚拟机同步的东西）：

锁：

```
FileChannel channel = new RandomAccessFile(pFile, "rw").getChannel();
lock = channel.tryLock(); 
```

有锁：

```
RandomAccessFile file = new RandomAccessFile(pFile, "rw");
FileChannel channel = file.getChannel();
FileLock lock = channel.tryLock();
if (lock == null) {
 return true;
}
lock.release(); 
```

我遇到的问题是锁被创建为：

```
-rw-r--r--. 1 root root 0 May  7 21:42 lockfile.lock 
```

如果我尝试检查锁（通过以普通用户身份运行的进程 B）我得到一个

```
java.io.FileNotFoundException: _lockfile_ (Permission denied)
    at java.io.RandomAccessFile.open(Native Method)
    at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212) 
```

我试图将目录隐藏到所有 g=rwx,o=rwx 但这似乎被忽略了。我尝试先创建文件 setWritable(true, false) 但这似乎已重置。我没有任何方法可以工作。我尝试在 hasLock 中使用模式“r”而不是“rw”，但这会导致 ChannelNotWritableException。

所以主要问题是：如何影响创建的锁文件的权限？

有人有什么建议吗？

问候迈克尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T01:12:09.920

您面对的是根进程，它掩盖了您在创建文件时提供的“rw”以拒绝对and`umask`的写访问。除了更改根目录之外，您无能为力，出于安全原因，这是一个非常糟糕的主意。`group``others``umask`

您应该考虑让锁定文件永久存在，或者像 Peter 建议的那样，使用已经是应用程序一部分的文件作为锁定文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T17:21:47.843

最后我得到了一个解决方案：

首先创建文件的方式是正确的。我犯的错误是我在创建文件之前设置了权限（期望权限存储在文件对象中并在创建时使用）。我必须先创建文件，然后将权限设置为 all 然后锁定它：

```
file.createNewFile();
file.setWritable(true, false);
FileChannel channel = new RandomAccessFile(file, "rw").getChannel();
channel.tryLock() 
```

锁定文件现在使用 worlwide-writable 创建（这可能是一个安全问题，但实际上没有可见问题，因为该文件不包含任何内容。

感谢大家帮助我找到解决方案！

问候迈克尔

# php - 确保股息大于除数的功能？

> ID：10488393
> 
> 赞同：1
> 
> 时间：2012-05-07T20:06:52.933
> 
> 标签：php, javascript, division

嘿只是好奇是否有一个函数可以用来以“正确的顺序”除以，这样被除数总是较大的数字？目前我这样做

```
x=5
y=10
z=0

if x>y{
z = x/y
}else{
z = y/x
} 
```

我只是想知道是否有一个函数可以用来在一行中执行此操作，例如

MakeSureDividendBigger(x/y)

类型的东西。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T20:09:07.050

**Javascript：**

```
var z = Math.max(x, y) / Math.min(x, y); 
```

或者一个函数：

```
function divideNice(x, y) {
    return Math.max(x, y) / Math.min(x, y);
}

var z = divideNice(x, y); 
```

**PHP：**

```
$z = max($x, $y) / min($x, $y) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T20:08:40.377

我怀疑这是否有特殊功能，但可能的一种解决方案是使用[三元条件运算符](http://www.php.net/manual/en/language.expressions.php)：

```
$z = $x > $y ? $x / $y : $y / $x;    // PHP

var z = x > y ? x / y : y / x;       // JavaScript 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T20:09:53.890

您可以使用`Math.max`和`Math.min`。

```
Math.max(x,y) / Math.min(x,y) 
```

*   [数学.max](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/max)
*   [数学.min](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/min)

或者在 Mozilla (Firefox) 中，您可以轻松地进行交换。

```
if(x < y)
   [x,y] = [y,x]

x/y 
```

这称为[解构赋值](https://developer.mozilla.org/en/New_in_JavaScript_1.7#Destructuring_assignment_%28Merge_into_own_page.2Fsection%29)。

# ruby-on-rails - Heroku Postgres 错误：列不存在

> ID：10488394
> 
> 赞同：0
> 
> 时间：2012-05-07T20:07:00.363
> 
> 标签：ruby-on-rails, postgresql, activerecord, heroku

部署到heroku（运行PG）后出现以下错误，尽管它在本地运行良好（运行sqlite3）

```
ActionView::Template::Error (PGError: ERROR:  column "calendar_day" does not exist
LINE 1: ...ated_at > '2012-04-09 19:39:54.787077') AND (date(calendar_d...
                                                         ^
SELECT  date(created_at) as calendar_day, count(*) as total_checkins FROM "checkins"  WHERE (user_id = 1 AND group_id = 1 AND created_at > '2012-04-09 19:39:54.787077') AND (date(calendar_day) = '2012-05-07') GROUP BY date(created_at) LIMIT 1):
...
app/helpers/groups_helper.rb:32:in `checkin_day' 
```

请注意，“calendar_day”不是持久表上的实际列，而是我使用 AS 语句动态定义的列（不确定这在技术上叫什么）。相关的辅助函数如下所示。基本上，在页面顶部我调用了 calendar_view，稍后我将结果作为 checkins 参数传递给 checkin_day。正是在这个 checkin_day 调用中，我遇到了错误。知道为什么这在本地运行良好但在 heroku 中运行良好吗？

```
def calendar_view(member, timeperiod)
  Checkin.select("date(created_at) as calendar_day, count(*) as total_checkins").where("user_id = ? AND group_id = ? AND created_at > ?", member.member.id, member.group.id, Time.now - timeperiod.days).group("date(created_at)")
end

def checkin_day(checkins, day)
  ch = checkins.where("date(calendar_day) = ?", day).first
  return ch.total_checkins if ch
  return 0
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:22:24.803

您在查询（投影）的 SELECT 部分定义的内容在评估 WHERE 子句（选择）期间不可用。您必须在那里再次定义它：

```
def checkin_day(checkins, day)
  ch = checkins.where("date(created_at) = ?", day).first
  return ch.total_checkins if ch
  return 0
end 
```

# windows - 查找前几个字符相同的文件

> ID：10488395
> 
> 赞同：-2
> 
> 时间：2012-05-07T20:07:02.233
> 
> 标签：windows, bash, shell

我试图找到一个 Windows shell 命令，它可以让我选择所有以相同 3 个字符开头的文件。例如，如果一个目录具有以下内容：

000你好 000世界 111foo 121bar

该命令将为我提供前两个文件。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:11:40.900

使用 bash 通配符

```
$ echo 000* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:16:53.050

Windows 命令行，对吧？

```
dir 000* 
```

`*`是与文件名中的任何字符匹配的通配符

`?`是与文件名中的单个字符匹配的通配符

根据您的新信息：

```
for /f %i in ('dir /b 000*') do (
   echo %i is the name of the file we found
   type %i
) 
```

如果您在批处理文件中，请使用`%%i`.

这假设您希望留在当前工作目录中。如果您想将目录树遍历到子目录，请查看使用`for /r`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T20:29:51.910

由于它被标记为 Windows，因此不清楚需要哪种类型的解决方案，但如果可以使用 Ruby，这可能会奏效。

```
# create a hash of arrays where the hash value is the first three letters of the
# file name and the value is an array of those entries.
h = Hash.new{|h,k| h[k] = []}
Dir.foreach(".") { |f| h[f[0..2]] << f }

# then print/use the ones that have multiple entries
h.each_key { |k| puts h[k] if h[k].length > 1 } 
```

# javascript - 同时淡入和淡出

> ID：10488400
> 
> 赞同：0
> 
> 时间：2012-05-07T20:07:35.890
> 
> 标签：javascript, jquery, css, html

下面的代码有效，但新图像直到前一个图像淡出后才会淡入。我希望它们同时淡入和淡出，以使其看起来好像新图像正在淡出旧图像。

html

```
<img id="BiblesandCommentaries_bg" src="_\images\backgrounds\BiblesandCommentaries_bg.jpg"/>
<img id="EnquirersLibrary_bg" src="_\images\backgrounds\EnquirersLibrary_bg.jpg"/>
<img id="NewBelievers_bg" src="_\images\backgrounds\NewBelievers_bg.jpg"/>
<img id="ChristianLiving_bg" src="_\images\backgrounds\ChristianLiving_bg.jpg"/>
<img id="FamilyLibrary_bg" src="_\images\backgrounds\FamilyLibrary_bg.jpg"/>
<img id="YoungAdultLibrary_bg" src="_\images\backgrounds\YoungAdultLibrary_bg.jpg"/> 
<img id="WorshipLibrary_bg" src="_\images\backgrounds\WorshipLibrary_bg.jpg"/>
<img id="BibleTeachings_bg" src="_\images\backgrounds\BibleTeachings_bg.jpg"/>
<img id="Leadership_bg" src="_\images\backgrounds\Leadership_bg.jpg"/>
<img id="SchoolofChrist_bg" src="_\images\backgrounds\SchoolofChrist_bg.jpg"/> 
```

js

```
$('#sidebar a').click(function() {
    $('#BiblesandCommentaries_bg, #EnquirersLibrary_bg, #NewBelievers_bg, #ChristianLiving_bg, #FamilyLibrary_bg, #YoungAdultLibrary_bg, #WorshipLibrary_bg, #BibleTeachings_bg, #Leadership_bg, #SchoolofChrist_bg').fadeTo("slow", 0);
    bgImage = $(this).attr('href')+'_bg';
    $(bgImage).fadeTo("slow", 1);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:13:00.663

当你在元素上调用淡入动画时，另一个淡出动画仍在执行，所以尽量不要淡出应该淡入的元素。代码是这样的：（我添加了`.not(bgImage)`部分。）

```
$('#sidebar a').click(function() {
     var bgImage = $(this).attr('href')+'_bg';    
     $('#BiblesandCommentaries_bg, #EnquirersLibrary_bg, #NewBelievers_bg, #ChristianLiving_bg, #FamilyLibrary_bg, #YoungAdultLibrary_bg, #WorshipLibrary_bg, #BibleTeachings_bg, #Leadership_bg, #SchoolofChrist_bg').not(bgImage).fadeTo("slow", 0);    
     $(bgImage).fadeTo("slow", 1);
}); 
```

# regex - 通过 htaccess 更正来自外部链接的错误查询字符串

> ID：10488402
> 
> 赞同：0
> 
> 时间：2012-05-07T20:07:41.820
> 
> 标签：regex, .htaccess, redirect, rewrite, hyperlink

有指向我的网站（我无法控制）的外部链接包含错误的查询字符串。这是一个例子：

```
http://www.example.com/page/&query=string 
```

以上结果在我的网站上出现了 404 页面。因为我的网站上存在“http://www.example.com/page/”，所以我想使用 .htaccess 文件删除任何错误的查询字符串，以便用户可以访问正确的内容。

所以我想要这个重写或重定向：

```
http://www.example.com/page/&query=string  -> http://www.example.com/page/ 
```

任何和所有的帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T23:26:04.597

以下应该按照您所说的向请求浏览器发出 301 重定向。

```
RewriteCond %{QUERY_STRING} query=string
RewriteRule ^/page/ /page/ [R=301] 
```

但是，您只想提供正确的内容，您可以通过以下方式避免 301 重定向：

```
RewriteCond %{QUERY_STRING} query=string
RewriteRule ^/page/ /page/ [PT,NS,E=QUERY_STRING:] 
```

它将完全删除 QUERY_STRING，因此请注意。

如果您想重写一些不同的查询字符串，但不是全部用于 /page/

```
RewriteCond %{QUERY_STRING} query=badstring1 [OR]
RewriteCond %{QUERY_STRING} query=badstring2 [OR]
RewriteRule ^/page/ /page/ [PT,NS] 
```

所有 RewriteRules 都假定您在某处有“RewriteEngine On”，您的主机很可能已经完成了这项工作。它还需要 Apache 中的 mod_rewrite 模块，我假设基于 .htaccess 请求正在使用该模块。

[http://httpd.apache.org/docs/2.4/mod/mod_rewrite.html](http://httpd.apache.org/docs/2.4/mod/mod_rewrite.html)

话虽如此，这似乎是非常不必要的，因为如果页面不需要参数，它会忽略它们，除非当然这是被传递给脚本的，在这种情况下你应该能够在代码中处理它，但也许你有一个导致问题的框架。

这是一本关于该主题的好书： [Pro Apache](https://rads.stackoverflow.com/amzn/click/com/B001FOPW8K) 参见第 277-299 页

# ios - 将多个参数发送到 Web 服务

> ID：10488404
> 
> 赞同：-2
> 
> 时间：2012-05-07T20:07:49.513
> 
> 标签：ios, ruby, json, web-services, params

我有一个这样的 JSON。

```
[
   {
      "created_at": "2012-05-07T19:17:16Z",
      "id": 80,
      "order_date": "2012-05-07 22:17:14",
      "order_done": false,
      "order_total": "14.7",
      "order_uuid": "e10655868d12d9855b83e02efb026eef056f1d92",
      "updated_at": "2012-05-07T19:17:17Z",
      "order_details": [
         {
            "created_at": "2012-05-07T19:17:17Z",
            "food_count": 2,
            "food_name": "Baileys Shaken with Ice",
            "food_place": "El Gringo Music Saloon",
            "food_price": "8.4",
            "id": 146,
            "order_id": 80,
            "updated_at": "2012-05-07T19:17:17Z"
         },
         {
            "created_at": "2012-05-07T19:17:17Z",
            "food_count": 1,
            "food_name": "Baileys Irish Martini",
            "food_place": "O'Malley's",
            "food_price": "6.3",
            "id": 147,
            "order_id": 80,
            "updated_at": "2012-05-07T19:17:17Z"
         }
      ]
   }
] 
```

现在我想将它们从 iOS 发送到 Ruby Web 服务。

是否可以使用一个请求 POST 将它们发送到 Web 服务？

现在我使用 2 个请求 POST 或 1 个请求 POST 和 1 个请求 UPDATE => ITS BAD!!!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:13:24.973

我认为如果你开始学习一些关于 Web 使用服务和 JSON 的教程会很好。像[这样](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)或[这样](http://www.raywenderlich.com/2965/how-to-write-an-ios-app-that-uses-a-web-service)甚至[这样](https://www.google.com.tr/search?sourceid=chrome&ie=UTF-8&q=how+to+use+json+in+ios+app)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:10:27.770

`accepts_nested_attributes_for :order_details`在您的模型中设置`Order`以接受您要推入的阵列:)

# android - 浏览器中的意图，是否可以在 Android 网络浏览器中从 Javascript 触发意图？

> ID：10488417
> 
> 赞同：2
> 
> 时间：2012-05-07T20:08:58.807
> 
> 标签：android, android-intent

我似乎无法找到答案的快速问题。

如果我在 Android 网络浏览器中......是否可以使用 JavaScript 触发“共享”意图？只是试图简化“分享到...”过程。

这可能是不可能的，但我想在向我的团队宣布之前确认一下。

添加信息：

我没有运行任何 Android 应用程序。只有一个 HTML 文件和一个 JS 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:16:16.380

这当然是可能的。看一下该[`WebView.addJavascriptInterface()`](http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29)方法，因为它应该能够准确地为您提供所需的东西。

[此处](http://developer.android.com/guide/webapps/webview.html#BindingJavaScript)`addJavascriptInterface()`详细介绍了使用的基础知识。

1.  创建将触发意图的类。这通常只是一个独立的类（无需扩展 a`Service`或`Activity`）。
2.  将此类绑定到您的`WebView`（这将是`addJavascriptInterface()`调用）。
3.  从您的 Javascript 中调用相应的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:15:14.353

如果您将用户重定向到您的应用程序活动意图过滤器正在引用的链接，是的，这是可能的。

# netbeans - Netbeans soapUI 插件

> ID：10488421
> 
> 赞同：0
> 
> 时间：2012-05-07T20:09:21.070
> 
> 标签：netbeans, soapui, netbeans-6.9, netbeans-plugins

我正在尝试为 Netbeans 6.9.1 安装soapUI 插件，但收到此消息。

```
Some plugins require plugin Lookup to be installed.
The plugin Lookup is requested in version >= 8.8.1 but only 8.3.1 was found.  
The following plugin is affected:       soapUI Web Service Testing 
```

有人可以帮忙吗？这是什么意思？我需要另一个插件吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:07:12.247

不知道 Netbeans 6.9.1，但在 Netbeans 7.2.x 中这很好用。[您可以从sourceforge 的 SoapUI NetBeans 插件](http://sourceforge.net/projects/soapui/files/soapui-netbeans-plugin/)下载 Soapui netbeans 插件，并使用 Tools / Plugins / Downloaded / Add Plugin .. 安装它并指向下载的 .nbm 文件。

# ios - 我是否必须为管理其他控制器的 rootviewController 实现一个视图，但自己不显示任何内容？

> ID：10488431
> 
> 赞同：0
> 
> 时间：2012-05-07T20:09:53.327
> 
> 标签：ios, cocoa-touch, uiviewcontroller, views

```
#import <UIKit/UIKit.h>
#import "UCMapviewController.h"
#import "UCMenuviewController.h"
#import "UCOverviewController.h"

@interface UCRootViewController : UIViewController

@property (strong, nonatomic) UCMapviewController *mapviewController;
@property (strong, nonatomic) UCMenuviewController *menuviewController;
@property (strong, nonatomic) UCOverviewController *overviewController; 
```

这是我的 rootviewController，它自己不显示任何东西，他只负责在需要时呈现其他视图控制器（后来成为这些控制器的代表）。

所以我的问题是，我必须为这个 rootviewController 实现一个视图吗？我已阅读 ViewController 编程指南，但找不到答案。

据我所知，rootviewController 使另一个控制器以他们自己的视图出现，然后将接管空间。这是错误的方法吗？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:13:34.610

通常我会以微妙的方式在应用程序委托中管理我的 rootViewController。例如，在一个带有 Login 的应用程序中`UIViewController`，我将展示`UIViewControllers`来自该 Login View Controller 的其余部分，例如，使用`presentModalViewController`. 但是拥有一个为你处理你的 rootViewController 这`UIViewControllers`不是一个坏方法，只要你记住一些细节（为此我建议你阅读[这个](http://subjective-objective-c.blogspot.com/2011/08/writing-high-quality-view-controller.html)）。[还有一个关于容器的很好的 WWDC 视图](https://developer.apple.com/videos/wwdc/2011/?id=102)。:)

**编辑1：**

1) MVC 可能是 iOS 中最常用的模式。开发iOS的时候很难不使用，但是正确实现需要一定的经验

2）是的，你不需要它。您可以使用 AppDelegate，通过玩`window.rootViewController`

3）模型是应用程序的逻辑部分，加上数据源。通常，您将有 2 层：逻辑和数据访问。在模型部分，您可以将两者都加入。控制器在视图（用户看到的）和模型之间架起了一座桥梁，在后台处理的逻辑和数据。您可以将 Xib 视为视图、`UIViewControllers`控制器以及为模型“加油”的其他类`UIViewControllers`。

# php - 阶乘的PHP函数但使用加法而不是乘法？

> ID：10488435
> 
> 赞同：3
> 
> 时间：2012-05-07T20:09:58.790
> 
> 标签：php, math

我知道数学函数`5 * 4 * 3 * 2 * 1`称为阶乘（并且有一个 PHP 函数：）`gmp_fact(n)`。

但是当你想加而不是乘时它叫什么？像这样：`5 + 4 + 3 + 2 + 1`？有没有一个 PHP 函数呢？还是我需要自己动手？我假设有一个类似这样的函数，但由于我不知道这种表达式的数学名称是什么，我似乎无法找到它的函数名称......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T20:12:17.553

`n * (n + 1) / 2`

这些被称为[三角数](http://en.wikipedia.org/wiki/Triangular_number)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T20:12:23.670

您可以将所有数字添加到数组中（或使用`range`），然后使用`array_sum`。

```
array_sum(range(1,5)); 
```

# html - HTML 5 CSS 3 @viewport 媒体查询

> ID：10488438
> 
> 赞同：3
> 
> 时间：2012-05-07T20:10:15.397
> 
> 标签：html, css, viewport

所以我正在浏览网页，看看是否有任何锁定方向的解决方案。我发现了这个：

> [http://www.w3.org/TR/css-device-adapt/](http://www.w3.org/TR/css-device-adapt/)

它指出使用@viewport 您应该能够锁定方向，但我找不到任何有关支持或其他信息的信息。我刚试过

```
 @viewport{
orientation: portrait;
} 
```

但它什么也没做，对此有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:59:59.830

您需要添加供应商前缀。

例子：

**IE10**

```
@-ms-viewport {
  width: 1024px;
  height: 768px;
} 
```

阅读更多[http://msdn.microsoft.com/en-us/library/ie/hh708740(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/hh708740(v=vs.85).aspx)

**歌剧**

```
@-o-viewport {
  width: 1024px;
  height: 768px;
} 
```

阅读更多[http://dev.opera.com/articles/view/an-introduction-to-meta-viewport-and-viewport/](http://dev.opera.com/articles/view/an-introduction-to-meta-viewport-and-viewport/)

[http://docs.webplatform.org/wiki/css/atrules/@viewport](http://docs.webplatform.org/wiki/css/atrules/@viewport)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:18:01.087

```
@viewport all and (max-width: 480px) {
 orientation:portrait;
} 
```

无法测试，但我相信这与`@media`CSS 的行为相同。

# c++ - 模棱两可的元函数或未定义的类型

> ID：10488440
> 
> 赞同：3
> 
> 时间：2012-05-07T20:10:20.003
> 
> 标签：c++, boost, metaprogramming, template-meta-programming, boost-mpl

我是元功能的新手。我想编写一个函数，将复合类型中某种类型的所有匹配项替换为其他类型。例如：`replace<void *, void, int>::type`应该是`int *`，`replace<void, void, int>::type`应该是`int`，等等。

到目前为止，我基本上以两种不同的方法失败了：

```
template
    <
        typename C, // Type to be searched
        typename X, // "Needle" that is searched for
        typename Y  // Replacing type
    >
struct replace
{
    typedef C type;
};

// If the type matches the search exactly, replace
template
    <
        typename C,
        typename Y
    >
struct replace<C, C, Y>
{
    typedef Y type;
};

// If the type is a pointer, strip it and call recursively
template
    <
        typename C,
        typename X,
        typename Y
    >
struct replace<C *, X, Y>
{
    typedef typename replace<C, X, Y>::type * type;
}; 
```

这对我来说似乎很简单，但我发现当我尝试时`replace<void *, void *, int>`，编译器无法决定是否使用`replace<C, C, Y>`或`replace<C *, X, Y>`在这种情况下，所以编译失败。

我尝试的下一件事是已经在基本函数中剥离指针：

```
template
    <
        typename C,
        typename X,
        typename Y
    >
struct replace
{
    typedef typename boost::conditional
        <
            boost::is_pointer<C>::value,
            typename replace
                <
                    typename boost::remove_pointer<C>::type,
                    X, Y
                >::type *,
            C
        >::type
    type;
}; 
```

...这是当我发现我也不能这样做的时候，因为当时`type`显然没有定义，所以我不能`typedef`从基本函数递归。

现在我没有想法了。你会如何解决这样的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T20:28:49.730

这是一个总体思路：

```
template <typename, typename> struct pattern;

template <typename T> struct pattern<T, T>
{
    template <typename U> struct rebind
    {
        typedef U other;
    };
};

template <typename A, typename B> struct pattern<A*, B>
{
    template <typename U> struct rebind
    {
        typedef typename pattern<A, B>::template rebind<U>::other * other;
    };
};

template <typename Haystack, typename Needle, typename New>
struct replace
{
    typedef typename pattern<Haystack, Needle>::template rebind<New>::other type;
}; 
```

测试：

```
#include <demangle.hpp>
#include <iostream>
int main()
{
    typedef replace<void, void, int>::type T1;
    typedef replace<void*, void, int>::type T2;

    std::cout << demangle<T1>() << std::endl;
    std::cout << demangle<T2>() << std::endl;
} 
```

印刷：

```
int
int* 
```

* * *

**编辑：**这是一个更完整的集合：

```
template <typename, typename> struct pattern;
template <typename, typename> struct pattern_aux;

template <typename A, typename B> struct pattern_aux
{
    template <typename U> struct rebind
    {
        typedef typename pattern<A, B>::template rebind<U>::other other;
    };
};

template <typename A, typename B, unsigned int N> struct pattern_aux<A[N], B>
{
    template <typename U> struct rebind
    {
        typedef typename pattern<A, B>::template rebind<U>::other other[N];
    };
};

template <typename A, typename B> struct pattern
{
    template <typename U> struct rebind
    {
        typedef typename pattern_aux<A, B>::template rebind<U>::other * other;
    };
};

template <typename T> struct pattern<T, T>
{
    template <typename U> struct rebind
    {
        typedef U other;
    };
};

template <typename A, typename B> struct pattern<A*, B>
{
    template <typename U> struct rebind
    {
        typedef typename pattern<A, B>::template rebind<U>::other * other;
    };
};

template <typename A, typename B> struct pattern<A const, B>
{
    template <typename U> struct rebind
    {
        typedef typename pattern_aux<A, B>::template rebind<U>::other const other;
    };
};

template <typename A, typename B> struct pattern<A volatile, B>
{
    template <typename U> struct rebind
    {
        typedef typename pattern_aux<A, B>::template rebind<U>::other volatile other;
    };
};

template <typename A, typename B> struct pattern<A const volatile, B>
{
    template <typename U> struct rebind
    {
        typedef typename pattern_aux<A, B>::template rebind<U>::other const volatile other;
    };
};

template <typename Haystack, typename Needle, typename New>
struct replace
{
    typedef typename pattern<Haystack, Needle>::template rebind<New>::other type;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T20:48:36.083

类似于您尝试的内容：

```
#include <typeinfo>
#include <type_traits>

template<typename C, typename X, typename Y>
struct replace {
private:

    typedef
        typename std::conditional <
            std::is_pointer<C>::value,
            typename std::remove_pointer<C>::type,
            C >::type
        strippedT;

    typedef
        typename std::conditional <
            std::is_same<strippedT, X>::value,
            Y,
            strippedT>::type
        replacedT;
public:

    typedef
        typename std::conditional <
            std::is_pointer<C>::value,
            replacedT*,
            replacedT >::type
        type;
};

int main()
{
    typedef replace<void*, void, int>::type T1;
    std::cout << typeid(T1).name() << '\n';  // prints Pi on my implementation

    typedef replace<void, void, int>::type T2;
    std::cout << typeid(T2).name();          // prints i
} 
```

克雷克的答案看起来好多了:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-05T18:56:45.167

按照您的代码，为什么不再添加一个专业

```
template
    <
        typename C,
        typename Y
    >
struct replace<C*, C, Y>
{
    typedef Y* type;
}; 
```

实时代码[示例结果](http://coliru.stacked-crooked.com/a/c32dae0b9fed56da)

或者更多：

```
template<class T>
struct tag_t {using type=T;};

template <class C, class X, class Y>
struct replace {};

template <class C, class Y>
struct replace<C, C, Y>: tag_t<Y> {};

template <class C, class Y>
struct replace<C*, C, Y>: tag_t<Y*>{}; 
```

实时代码[结果](http://coliru.stacked-crooked.com/a/f7dad13d3b107c59)

# sql - 我需要帮助确定使用日期范围限制器进行自联接的查询

> ID：10488442
> 
> 赞同：0
> 
> 时间：2012-05-07T20:10:24.033
> 
> 标签：sql, linq, self-join

假设我有一个包含四列的表：ID、ParentID、Timestamp、Value。ParentID 改变了值的含义。我需要返回该表中的所有条目，其中它们的 ParentID = 1 并且它们的时间戳在表中 ParentID = 2 的项目的时间戳和 ParentID.Value > 10 的项目的时间戳内。

例如，这里有一些数据：

```
ID    ParentID    TimeStamp    Value
1     1           51           1
2     2           52           11
3     1           53           2
4     1           54           3
5     2           55           9
6     1           56           4
7     2           57           12
8     1           58           5
9     1           53.5         1 
```

我需要一个查询来返回那些 ID 为 3、4、8 和 9 的行。这个查询在 SQL 或 LINQ 中会是什么样子？是否允许自己加入，你会在这里使用这种方法吗？我坚持如何确定时间戳范围。我正在使用 Sqlite。谢谢。

澄清：我想通过 ParentID = 2 的最新（按时间戳判断）行进行过滤。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T23:51:04.480

这个丑陋而缓慢的查询为每个 ParentID = 1 行找到足够的 ParentID = 2 行，并检查 Value 是否大于 10；如果是，则输出行：

```
select * 
  from table1
 where table1.parentid = 1
   and exists
       (
         select null
         -- Isolate previous ParentID = 2 row
         from
         (
           select p2.value
             from table1 p2
            where p2.timestamp < table1.timestamp
              and p2.parentid = 2
              -- Only one needed
            order by p2.timestamp desc
            limit 1
         ) p2_1
         -- Make sure it has appropriate value
         where p2_1.value > 10
       ) 
```

这值得在架构更改后更新表的上下文中运行一次。如果您可以将 ParentID 更改为真正的 ParentID（即，分层连接记录）查询将变得微不足道：

```
select Child.*
  from table1 Child
 inner join table1 Parent
    on child.ParentID = Parent.ID
 where Parent.Value > 10 
```

当然，必须在插入之前找到 ParentID，如果业务模型允许乱序插入，则会涉及一些数学问题。如果您所期望的只是简单地附加时间戳，这将是最简单的解决方案。

此查询有[Sql Fiddle](http://sqlfiddle.com/#!5/284a3/4)现场测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:21:38.787

这是一个不寻常的问题。如果这是家庭作业，你应该这样标记它。

以下查询似乎符合您的描述：

```
select p1.*
from (select *
      from table t
      where ParentId = 1
     ) p1 cross join
     (select min(TimeStamp) as minTS, max(TimeStamp) as maxTS
      from table t
      where ParentId = 2 and value > 10
     ) p2
where t.TimeStamp between minTS and maxTS 
```

您的问题的答案是“是”，所有 SQL 数据库都支持自联接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T20:55:52.727

使用 LINQ，如果它不必是一个查询，这应该可以工作：

```
var values = table.Where(a => a.parentid == 2 
                           && a.value > 10)
                  .Select(a.timestamp);

var min = values.Min();
var max = values.Max(); 

var result = table.Where(a => a.parentid == 1
                            && timestamp >= min 
                            && timestamp <= max)
                  .Select(a => a.value); 
```

# jquery - 具有多个复选框列并选择所有列标题的 GridView

> ID：10488443
> 
> 赞同：0
> 
> 时间：2012-05-07T20:10:27.530
> 
> 标签：jquery, asp.net

我在标题中使用 asp.net gridview 我有两列

```
column select all employee  | column select all employer 
```

所以我有两个用于两列的复选框，所以一旦它点击选择所有员工，它应该只为所有员工选择，雇主也一样

但如果只选择雇主，则以下代码同时选择雇员和雇主。

```
function SelectAllCheckboxes(chk) {
        $('#<%=gv.ClientID%>').find("input:checkbox").each(function () {
            if (this != chk) { this.checked = chk.checked; }
        });
    }

    function SelectAllCheckboxes1(chk) {
        $('#<%=gv.ClientID%>').find("input:checkbox").each(function () {
            if (this != chk) { this.checked = chk.checked; }
        });
    }

<asp:CheckBox ID="chkAll" runat="server" onclick="javascript:SelectAllCheckboxes(this);" />

<asp:CheckBox ID="chkAll1" runat="server" onclick="javascript:SelectAllCheckboxes1(this);" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:30:02.207

ASP - 在您的 GridView 中：

```
<asp:GridView id="gv" runat="server">
    <asp:TemplateField>
        <ItemTemplate>
            <asp:CheckBox id="cbxSelectEmployer" runat="server" CssClass="employer" />
        </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField>
        <ItemTemplate>
            <asp:CheckBox id="cbxSelectEmployee" runat="server" CssClass="employee" />
        </ItemTemplate>
    </asp:TemplateField>
</asp:GridView> 
```

ASP - “全选”复选框：

```
<asp:CheckBox ID="chkAll" runat="server" onclick="SelectAllCheckboxes(this, '.employee')" />
<asp:CheckBox ID="chkAll1" runat="server" onclick="SelectAllCheckboxes(this, '.employer')" /> 
```

jQuery

```
function SelectAllCheckboxes(chk, selector) {
    $('#<%=gv.ClientID%>').find(selector + " input:checkbox").each(function () {
        $(this).prop("checked", $(chk).prop("checked"));
    });
} 
```

# performance - 为什么 SSRS 在报告的两个不同部分中将一个单元格呈现为 div，而将另一个呈现为表格？

> ID：10488450
> 
> 赞同：0
> 
> 时间：2012-05-07T20:10:41.023
> 
> 标签：performance, service, reporting-services, reporting, rendering

我在执行非常缓慢的客户端上呈现报告服务时遇到问题。我检查过数据检索速度非常快，但 Internet Explorer 需要花费大量时间来呈现报告。

当我检查报告服务发出的 html 时，我发现单元格以两种不同的方式呈现。

1 - 在 DIV
内 2 - 在 TABLE 内

我知道 DIV 在渲染时优于表格。当您的报表具有大量单元格时，您可以观察到此行为。

谁能告诉我我可以在 RDL 中做什么来使每个单元格呈现为 DIV 而不是 TABLE？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:05:06.840

找到了答案。当设置为 False 时，单元格的 CanGrow 属性会导致单元格呈现为 TABLE。当此属性设置为 True 时，单元格将呈现为 DIV。这会减少报告服务呈现的 html 的大小，并且 Internet Explorer 会更快地呈现报告。

PS：只有在查看非常大的报告时才能看到差异。

# php - 如何在冗长的数组上执行多个 array_slice？

> ID：10488455
> 
> 赞同：3
> 
> 时间：2012-05-07T20:11:13.723
> 
> 标签：php, slice

我对php很陌生。我想在一个大数组上做多个数组切片。现在这是我的代码的一部分：

```
$row1 = array_slice($filtered, 0, 22);
$row2 = array_slice($filtered, 22, 22);
$row3 = array_slice($filtered, 44, 22);
$row5 = array_slice($filtered, 66, 22);
$row6 = array_slice($filtered, 88, 22);
$row7 = array_slice($filtered, 110, 22);
$row8 = array_slice($filtered, 132, 22);
$row9 = array_slice($filtered, 154, 22);
$row10 = array_slice($filtered, 176, 22); 
```

每次数组切片的起始位置比上一行多22。不是写出所有这些行（总共 674 行），而是有一个语句，我可以使用它来自动推进起始位置 22 直到它到达结束，以及将它分配给一个每次增加 1 的变量，如示例. 谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T20:16:37.923

您可以使用 php [array_chunk](http://php.net/manual/en/function.array-chunk.php)函数将原始数组拆分为任意大小的块

IE`$rows = array_chunk($filtered, 22);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:16:17.647

```
$previous = 0;
$current = 22;
$rows = array();

for ($current; $current < size($filtered); $current+22) {
    $rows[] = array_slice($filtered, $previous, $current);
    $previous = $current;
} 
```

`$filtered`当数组计数不能被 22 整除时，您需要一个特殊情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T20:33:21.740

使用[array_chunk](http://php.net/manual/en/function.array-chunk.php)然后[变量 variables](http://php.net/manual/en/language.variables.variable.php)。

```
$j = 1;
foreach( array_chunk($list, 22)  as $chunk){
    ${"row{$j}"} = $chunk;
    $j++;
} 
```

# php - 检查 url 中的图像大小

> ID：10488457
> 
> 赞同：0
> 
> 时间：2012-05-07T20:11:23.760
> 
> 标签：php, image, url, image-size

我发现了一个漂亮的小 php 函数来检查 url 是否是图像 - 还有一种方法可以确定该图像是否大于 1mb？

找到的解决方案：

我在这里找到了一个可行的解决方案：[php how to get web image size in kb?](https://stackoverflow.com/questions/6272663/php-how-to-get-web-image-size-in-kb)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:13:13.317

来自：[https ://stackoverflow.com/a/3894706/187954](https://stackoverflow.com/a/3894706/187954)

```
<?php
$headers = get_headers('http://humus101.com/wp-content/uploads/2009/11/Hummus-soup.jpg');
$size = null;
foreach($headers as $h){
    /** look for Content-Length, and stick it in $size **/
}
if ($size === null){ //we didn't get a Content-Length header
    /** Grab file to local disk and use filesize() to set $size **/
}

echo "image is $size bytes"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T20:33:39.290

我会参考这篇文章，我想它会回答你的问题。 [在 PHP 中获取远程文件的文件大小的最简单方法？](https://stackoverflow.com/questions/1401131/easiest-way-to-grab-filesize-of-remote-file-in-php)

有两种方法（我知道）。一种是使用 CURL 并仅获取标头（更有效，更不可靠），并且`file_get_contents (more reliable, less efficient)`.

使用 CURL，您可以获得`CONTENT_LENGTH`文件大小的标题。然后你可以从那里做简单的数学运算，看看它是否超过 1mb。问题在于远程服务器可能不支持该功能。

通过使用`strlen(file_get_contents("YOUR URL"))`可以获得文件中的总字节数，但是脚本必须先下载文件，如果是大图像，这是一个问题。

要检查文件类型，您可以使用 substr 检查文件扩展名。

像这样的东西可以工作，但有它自己的问题

```
$ext = substr($URL, -3, 3);

if($ext == 'jpg' || $ext == 'gif') {
   //is image
}else{
   //not image
} 
```

# qt - Qt pro 文件调用另一个makefile

> ID：10488458
> 
> 赞同：3
> 
> 时间：2012-05-07T20:11:25.023
> 
> 标签：qt, makefile, qmake

有没有办法在 Qt 中使用 .pro 文件来调用另一个 Makefile？例如，在 makefile 中，您可以使用：

```
make -f /other/path/Makefile 
```

有没有像使用 Qt 的 pro 文件一样的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T21:39:23.687

像这样的东西应该工作：

```
QMAKE_EXTRA_TARGETS += other
PRE_TARGETDEPS += other
other.commands = make -f /other/path/Makefile 
```

这将导致`make -f /other/path/Makefile`作为 make 过程的一部分被调用，并且还使您能够键入`make other`以运行该命令。

# jquery - 使用 jQuery 删除锚标记

> ID：10488464
> 
> 赞同：16
> 
> 时间：2012-05-07T20:11:58.160
> 
> 标签：jquery

我的html：

```
<div class="example">
   <a id="link" href="http://www.google.com">Example</a>
</div> 
```

jQuery

```
$('a#link').remove(); 
```

我想做的是在`<a>`删除标签后使 html 看起来像这样：

```
<div class="example">
  Example
</div> 
```

如何仅删除

```
<a> </a> 
```

部分？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-07T20:13:25.960

替代解决方案：

```
$("a#link").replaceWith($("a#link").text()); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-07-16T14:36:35.233

[`.contents()`](http://api.jquery.com/contents)获取*包含*文本节点的子节点。

[`.unwrap()`](http://api.jquery.com/unwrap)在保留选定节点的同时删除父元素。

这些函数自 2010 年发布的 jQuery 1.4 起就可用：

```
$('#link').contents().unwrap();
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.0/jquery.min.js"></script>
<div class="example">
   <a id="link" href="http://www.google.com">Example</a>
</div>
```

如果您的选择中有多个节点，它也会起作用：

```
$('a').contents().unwrap();
```

```
.one {
  color: red;
}
.two {
  color: green;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.0/jquery.min.js"></script>
<div class="one">
  <a href="#">Foo</a>
</div>
<div class="two">
  <a href="#">Bar</a>
</div>
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-07T20:12:37.543

试试这个：

要删除`a`但保留其文本，请尝试：

```
$('.example').html($('.example a#link').text()); 
```

或者

```
$('.example a#link').replaceWith($('.example a#link').text()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T20:13:40.797

要完全删除`a`元素：

```
// this approach is sloppy, but essentially it
// selects the element whose id is equal to 'link',
// finds the parent, and sets that parent's text
// to the text of the '#link' element:
$('#link').parent().text($('#link').text()); 
```

```
$('#link').parent().text($('#link').text());
```

```
a::after {
  content: ' (a element).';
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="example">
  <a id="link" href="http://www.google.com">Example</a>
</div>
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/rTQ6K/66/)。

这种方法是“草率的”，因为我们选择了两次相同的元素，而不是缓存引用或使用给定节点的固有属性。

或者：

```
// here we again find the parent of the given '#link'
// element, and update its text using the anonymous 
// function of the text() method:
$('#link').parent().text(function(i, text) {
  // i:    the first argument, is the index of the
  //       current element amongst the jQuery
  //       collection returned by the selector,
  // text: the second argument, is the existing
  //       text of the node prior to modification
  //       within the function.

  // here we simply return the same text, which
  // replaces the existing innerHTML of the
  // node with only the text:
  return text;
}); 
```

```
$('#link').parent().text(function(i, text) {
  return text;
});
```

```
a::after {
  content: ' (a element).';
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="example">
  <a id="link" href="http://www.google.com">Example</a>
</div>
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/rTQ6K/68/)。

或者，更简洁地说：

```
// here we find the element, access its contents
// (its childNodes) and unwrap those contents,
// with the unwrap() method, to remove the parent
// element of the contents and replace that parent
// with its contents:
$('#link').contents().unwrap(); 
```

```
$('#link').contents().unwrap();
```

```
a::after {
  content: ' (a element).';
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="example">
  <a id="link" href="http://www.google.com">Example</a>
</div>
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/rTQ6K/67/)。

甚至使用纯 JavaScript：

```
function removeAndRetain(node) {

  // caching references to the passed-in node,
  // and that node's parentNode:
  var el = node,
    parent = el.parentNode;

  // while the passed-in node has a firstChild:
  while (el.firstChild) {

    // we insert that firstChild before the
    // passed-in node, using parent.insertBefore():
    parent.insertBefore(el.firstChild, el);
  }

  // here we explicitly remove the passed-in node
  // from the document, using Node.removeChild():
  parent.removeChild(el);
}

removeAndRetain(document.getElementById('link')); 
```

```
function removeAndRetain(node) {
  var el = node,
    parent = el.parentNode;

  while (el.firstChild) {
    parent.insertBefore(el.firstChild, el);
  }
  parent.removeChild(el);
}

removeAndRetain(document.getElementById('link'));
```

```
a::after {
  content: ' (a element).';
}
```

```
<div class="example">
  <a id="link" href="http://www.google.com">Example</a>
</div>
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/rTQ6K/71/)。

并且，为了改进上述方法，允许它采用多个节点并与之一起工作：

```
function removeAndRetain(node) {

  // if Array.from() exists, we use that otherwise we
  // use an alternative method to convert the supplied node,
  // NodeList, HTMLCollection... into an Array:
  var nodes = Array.from ? Array.from(node) : Array.prototype.slice.call(node, 0),

  // initialising a variable for use in the
  // (later) loop:
    parent;

  // using Array.prototype.forEach() to iterative over
  // the Array of nodes:
  nodes.forEach(function(n) {
    // n: the first argument, is a reference to the 
    // current element of the Array over which
    // we're iterating.

    // assigning the current-node's parent to
    // parent variable:
    parent = n.parentNode;

    // as above, here we move the firstChild from
    // the current-node to become its previous
    // sibling:
    while (n.firstChild) {
      parent.insertBefore(n.firstChild, n);
    }

    // removing the current-node from the document:
    parent.removeChild(n);

    // normalizing the parent, so that adjacent
    // textNodes are merged together:
    parent.normalize();
  });
}

removeAndRetain(document.querySelectorAll('.example a')); 
```

```
function removeAndRetain(node) {
  var nodes = Array.from ? Array.from(node) : Array.prototype.slice.call(node, 0),
    parent;

  nodes.forEach(function(n) {
    parent = n.parentNode;

    while (n.firstChild) {
      parent.insertBefore(n.firstChild, n);
    }
    parent.removeChild(n);
    parent.normalize();
  });
}

removeAndRetain(document.querySelectorAll('.example a'));
```

```
a::after {
  content: ' (a element).';
}
```

```
<div class="example">
  <a id="link" href="http://www.google.com">Example1</a>
</div>
<div class="example">
  <a href="http://www.google.com">Example2</a>
</div>
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/rTQ6K/72/)。

参考：

*   JavaScript：
    *   [`Array.from()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from).
    *   [`Array.prototype.forEach()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach).
    *   [`Array.prototype.slice()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice).
    *   [`Function.prototype.call()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/call).
    *   [`Node.insertBefore()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/insertBefore).
    *   [`node.normalize()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/normalize).
    *   [`Node.parentNode`](https://developer.mozilla.org/en-US/docs/Web/API/Node/parentNode).
    *   [`Node.removeChild()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/removeChild).
    *   [`while (...)`声明](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/while)。
*   jQuery：
    *   [`contents()`](http://api.jquery.com/contents/).
    *   [`parent()`](http://api.jquery.com/parent/).
    *   [`text()`](http://api.jquery.com/text/).
    *   [`unwrap()`](http://api.jquery.com/unwrap/).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-19T16:21:05.643

您必须一起使用 find()、contents() 和 unwrap() 来 jQuery 删除锚标记链接。

```
jQuery('.myDiv').find('a').contents().unwrap(); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-03-29T13:40:15.903

我遇到了同样的问题 - 从文本中删除“a”标签。我不确定其他解决方案是否关心效率——它们都进行两次元素搜索。`'a#link'`此外，如果有多个元素，接受的解决方案将无法正常工作，例如：

```
<div class="example">
  <a id="link" href="http://www.google.com">Example 1</a>
  <a id="link" href="http://www.google.com">Example 2</a>
  <a id="link" href="http://www.google.com">Example 3</a>
</div> 
```

所以这是另一个解决方案，它不会尝试两次找到元素并且可以与多个元素一起正常工作：

```
$('a#link').each(function () {
    $(this).replaceWith($(this).text());
}); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-07-16T13:21:40.483

假设一个链接文本：

`<a href="http://stackoverflow.com/" class="link-style">MY link</a>`

使用以下代码仅删除链接（href），但保留**链接样式**类中定义的样式：

```
jQuery(".post-meta").find('a').each(function () {
    var obj = jQuery(this);
    obj.removeAttr("href");
}); 
```

# c - 快速整数到十进制转换

> ID：10488468
> 
> 赞同：3
> 
> 时间：2012-05-07T20:12:23.133
> 
> 标签：c, performance, data-conversion

给定一个（无符号）整数，将其转换为包含其十进制表示的字符串的通常最快的方法是什么？

最简单的做法是反复除以 10，直到达到零。我不喜欢这种方法，因为它

*   使用整数除法，这在某些集成平台上既慢又不可用
*   要求程序员事后翻转字符串。这使所需的内存操作数量增加了一倍。

我想到了以下将整数转换为十进制基数的方法。这是一个好主意吗？这是如何在函数的常见实现中完成的`printf`？

```
#include <stdint.h>

const static uint64_t i64_tab[20] = {
                     1u,
                    10u,
                   100u,
                  1000u,
                 10000u,
                100000u, /* 10^ 5 */
               1000000u,
              10000000u,
             100000000u,
            1000000000u,
           10000000000u, /* 10^10 */
          100000000000u,
         1000000000000u,
        10000000000000u,
       100000000000000u,
      1000000000000000u, /* 10^15 */
     10000000000000000u,
    100000000000000000u,
   1000000000000000000u,
  10000000000000000000u  /* 10^19 */
};

void uint64_to_string(char *out, uint64_t in) {
  int i;
  uint64_t tenpow;
  char accum;

  for (i = 19;i > 0;i--) {
    if (in >= i64_tab[i]) break;
  }

  do {
    tenpow = i64_tab[i];
    accum = '0';

    while (in >= tenpow) {
      in -= tenpow;
      accum++;
    }

    *out++ = accum;

  } while (i --> 0);

  *out = '\0';
}

const static uint32_t i32_tab[10] = {
           1u,
          10u,
         100u,
        1000u,
       10000u,
      100000u, /* 10^ 5 */
     1000000u,
    10000000u,
   100000000u,
  1000000000u, /* 10^9  */
};

void uint32_to_string(char *out, uint32_t in) {
  int i;
  uint32_t tenpow;
  char accum;

  for (i = 9;i > 0;i--)
    if (in >= i32_tab[i]) break;

  do {
    tenpow = i32_tab[i];
    accum = '0';

    while (in >= tenpow) {
      in -= tenpow;
      accum++;
    }

    *out++ = accum;

  } while (i --> 0);

  *out = '\0';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:35:31.957

我相信整数除以常数与乘法一样快，因为编译器将整数除法优化为常数除数的整数乘法。这是大多数优化编译器执行的重型数学技巧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T20:57:31.183

除了最简单的（例如 8 位）微控制器之外，最快的方法是使用除法，但通过一次生成多个数字来减少除法的次数。

[您将在此处](https://stackoverflow.com/questions/4351371/c-performance-challenge-integer-to-stdstring-conversion)找到我的问题的答案中高度优化的代码。在 C 中使用它应该是一个简单的编辑来消除`std::string`- 在实际转换中没有使用 C++ 功能。核心是

```
while(val>=100)
{
   int pos = val % 100;
   val /= 100;
   *(short*)(c-1)=*(short*)(digit_pairs+2*pos); // or use memcpy
   c-=2;
}
while(val>0)
{
    *c--='0' + (val % 10);
    val /= 10;
} 
```

我还为 8 位微控制器提供了优化的无除法代码，类似于问题代码中显示的想法，但没有循环。它最终得到了很多这样的代码：

```
 if (val >= 80) {
        ch |= '8';
        val -= 80;
    }
    else if (val >= 40) {
        ch |= '4';
        val -= 40;
    }
    if (val >= 20) {
        ch |= '2';
        val -= 20;
    }
    if (val >= 10) {
        ch |= '1';
        val -= 10;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T20:37:04.970

通常最快的方法是索引到一个足够大的指向字符串的指针数组。一次数组查找，一次指针取消引用。但是，它对内存的使用很重……这就是工程权衡的本质。多快才够快？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T20:47:12.813

MS 版本的 printf 以“幼稚”的方式执行此操作（在基于可选标志设置了一堆变量之后）：

```
 while (precision-- > 0 || number != 0) {
                digit = (int)(number % radix) + '0';
                number /= radix;                /* reduce number */
                if (digit > '9') {
                    /* a hex digit, make it a letter */
                    digit += hexadd;
                }
                *text.sz-- = (char)digit;       /* store the digit */
            } 
```

# c# - MVC3 Controller Action Result 'Remember' Passed-in Id

> ID：10488473
> 
> 赞同：0
> 
> 时间：2012-05-07T20:12:45.560
> 
> 标签：c#, asp.net-mvc-3

I have two action results in my Controller. Overview and About.

```
public ActionResult Overview(int id)
{
    return View(new OverviewModel() { Project = db.People.Find(id) });
}

public ActionResult About(int id)
{
    return View(new AboutModel() { Project = db.People.Find(id) });
} 
```

I would like to remember the id that was passed in to Overview and use it on the About as the default. I don't know how to keep this Id constant while the user switches tabs from Overview to About.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T20:15:06.243

You can try storing the id in TempData. Maybe something like this (not tested)

```
public ActionResult Overview(int id)
{
    TempData["YourId"] = id;
    return View(new OverviewModel() { Project = db.People.Find(id) });
}

public ActionResult About(int? id)
{
    id = id ?? int.Parse(TempData["YourId"].ToString());
    return View(new AboutModel() { Project = db.People.Find(id) });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T22:12:43.733

You can also use hidden html attribute if this data is not sensitive. it worked wonders for us and it saved us alot of processing power.

# java - Android - 将自定义视图添加到 ListView

> ID：10488476
> 
> 赞同：1
> 
> 时间：2012-05-07T20:13:04.957
> 
> 标签：java, android, xml, layout

我有一个`ListView`，我有一个习惯`View`，`PostView`。

我将如何去创建一个`new PostView()`，并将其添加到`ListView`via `.addFooterView()`，但仍然能够访问`PostView`.

现在我正在尝试：

```
// the footer
p = new PostView( this );

p.setTargetUri( C.API_CONTENT );
p.setRenderMode( PostView.MODE_TEXT | PostView.MODE_IMAGE );

commentListView.addFooterView( p ); 
```

但这失败了，当我尝试访问应该已经膨胀的 XML 组件时。

主要是：

```
public void setRenderMode( int renderMode )
{
  this.renderMode = renderMode;

  // fails
  this.postImagePreview = (ImageView)findViewById( R.id.new_post_image_preview );
} 
```

我要解决这个问题了吗？我有一个`onFinishInflate()`定义，但也许我过早地访问了视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:03:22.077

我的解决方案是只拥有一个超级自定义列表适配器，它能够返回不同类型的视图，并在生成的列表内容周围手动添加页眉和页脚视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:38:59.707

为什么不挂在成员变量中的实例而不是稍后调用 findViewById 呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T20:41:47.040

您的 setRenderMode 是在 PostView 中还是在使用 PostView 的 Activity 中？

如果它在活动中，您应该这样做：

```
this.postImagePreview = (ImageView)p.findViewById( R.id.new_post_image_preview ); 
```

其中 p 是对您创建的 PostView 的引用。

# android - 在 Andengine 中退出或退出游戏

> ID：10488478
> 
> 赞同：1
> 
> 时间：2012-05-07T20:13:10.310
> 
> 标签：android, android-intent, andengine

我试图通过finish（）和System.exit（0）退出游戏。但是finish（）只是退出活动而不是所有游戏。System.exit（0）正在重新启动而不是退出所有游戏。我该怎么办退出所有游戏游戏？它不应该在后台运行！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:17:02.240

finish() 应该适合你。

如果它让您的一些其他活动在 GameActivity 后面打开，那么您只需要确保所有活动都在完成时调用 finish() （如果您要移动到一个新活动）。这样，每当你在 GameActivity 上调用 finish() 时，它下面的 Stack 上应该没有任何东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T08:23:47.500

您应该使用`Process.killProcess(Process.myPid());`退出 apk。

# iphone - 在选定的单元格行返回 TableView

> ID：10488483
> 
> 赞同：0
> 
> 时间：2012-05-07T20:13:28.933
> 
> 标签：iphone, ios, segue

我有一个 UItableView 可以连接到不同的视图控制器。我正在使用一个返回 tableView 的 UITapGestureRecognizer。这个segue有效，但我希望它在最初选择的表格行中重新回到tableView。我该如何做到这一点？

编辑：编辑代码

```
- (void)viewWillAppear:(BOOL)animated  {

 appDelegate = [[UIApplication sharedApplication] delegate];
 NSLog(@"%@", NSStringFromCGPoint(appDelegate.testCGPoint));

 [self.tableView setContentOffset:appDelegate.testCGPoint animated:YES];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

 if ([segue.identifier isEqualToString:@"ShowDetail"]) {

   appDelegate.testCGPoint = [self.tableView contentOffset];

 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:17:36.767

您应该将表格视图的内容偏移量保存为一个值。
浮动表内容偏移量；
然后，将偏移量保存到该浮点数中。最后，当需要设置table view的内容偏移量时，
[self.tableView setContentOffset:CGPointMake(0,tableContentOffset) animated:YES];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T19:53:03.167

因此，在您的代码中，您创建了一个 CGPoint。但是，创建存在于方法 prepareForSegue 中。因此，您无法访问方法之外的点！对此的解决方案是在头文件中创建 CGPoint。
CGPoint tableContentOffest；
然后在您的 prepareForSegue 方法中，您所要做的就是设置表的偏移值。不要创建新的 CGPoint。
此外，在您的代码 [vc.tableView setContentOffset:_tableContentOffset animated:YES]; 你会想用 [vc.tableView setContentOffset:tableContentOffset animated:YES]; 而不是 _tableContentOffset。希望这有帮助！

# mongodb - 如何直接在 MongoDB 的 shell 中生成文档列表？

> ID：10488488
> 
> 赞同：0
> 
> 时间：2012-05-07T20:13:48.550
> 
> 标签：mongodb, mongodb-shell

我不想使用任何其他语言。只需打开 MongoDB 的 shell 并创建 100 000 个文档，其中 _id 递增 1。

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:22:53.103

MongoDB shell 是一个 javascript shell，所以你可以使用任何你可以在 javascript 中使用的东西：

```
> for (var i=0; i<100000; i++) { db.my_collection.insert({i: i}); } 
```

# ruby-on-rails - Rails - 错误未初始化常量 MyNamespace::OmniauthCallbacksController

> ID：10488496
> 
> 赞同：0
> 
> 时间：2012-05-07T20:14:18.587
> 
> 标签：ruby-on-rails, ruby, devise, omniauth

我收到这样的错误：

```
uninitialized constant Mobile::OmniauthCallbacksController 
```

这似乎是一个 routes.rb 问题。我究竟需要向我的命名空间添加什么才能使其正常工作？

这是路线范围：

```
 scope :module => :mobile, :as => :mobile do
    constraints(:subdomain => /m/) do
      devise_for :users, :path => "", :path_names =>
               { :sign_in => "login", :sign_out => "logout",
                 :sign_up => "signup" },
                 :controllers => {:sessions => "mobile/sessions" , :passwords => "mobile/passwords" , :confirmations => "mobile/confirmations" , :registrations => "mobile/registrations"}

      get "/home" => "home#index" , :as => "home"

    end
  end 
```

在 routes.rb 文件的其他地方有这样的片段：

```
 devise_scope :user do
    get "auth/:provider" => "users/omniauth_callbacks#passthru"
  end 
```

但我不确定如何让它在我正在工作的命名空间内工作。有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T21:57:17.927

我相信问题可能在于您对控制器使用这些值：

```
 {:sessions => "mobile/sessions" , 
  :passwords => "mobile/passwords" , 
  :confirmations => "mobile/confirmations" , 
  :registrations => "mobile/registrations"
} 
```

看起来代码正在进入这些控制器并试图`OmniauthCallbacksController`从`Mobile`.

# windows - .bash_history 不会在 Git for Windows (git bash) 中更新

> ID：10488498
> 
> 赞同：80
> 
> 时间：2012-05-07T20:14:30.950
> 
> 标签：windows, git, bash, git-bash

我正在使用适用于 Windows 的 Git（版本 1.7.8-preview20111206），即使我的 HOME 文件夹中有一个 .bash_history 文件，它也永远不会自动更新。当我启动 Git Bash 时，我可以在我手动添加到 .bash_history 文件的历史命令中看到，但它不会自动更新。

我使用该`shopt -s histappend`命令确保每次关闭 shell 时都会保存历史记录，但它不起作用。

如果我手动使用该`history -w`命令，那么我的文件会被更新，但我想了解为什么 shopt 命令不能按我的理解工作。

任何人都可以告诉我为什么会发生这种行为？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-06-05T16:34:35.533

我把这个放在我的`~/.bash_profile`

```
PROMPT_COMMAND='history -a' 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2014-09-19T19:32:46.680

正如[这里](https://groups.google.com/forum/#!topic/msysgit/7scTiXo89MA)所说，要在 Windows 上保存 git bash 历史记录，您不能使用`X`按钮关闭终端。请改用`exit`命令。无论接受的答案中提到的配置如何，都将保存命令历史记录。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2020-03-17T08:40:28.670

创建以下文件

```
~/.bash_profile
~/.bashrc 
```

并将以下行放入它们中

`PROMPT_COMMAND='history -a'`

要从控制台（git bash）本身执行此操作，请使用以下命令

```
echo "PROMPT_COMMAND='history -a'" >> ~/.bash_profile
echo "PROMPT_COMMAND='history -a'" >> ~/.bashrc 
```

**什么`history -a`意思**

从`history --help`命令

> -a 将此会话中的历史行追加到历史文件中

**是什么`PROMPT_COMMAND`？**

> Bash 提供了一个名为 PROMPT_COMMAND 的环境变量。在 Bash 显示提示之前，此变量的内容作为常规 Bash 命令执行。

**`.bash_profile`和之间的区别`.bashrc`**

`.bash_profile`为登录 shell 执行，而`.bashrc`为交互式非登录 shell 执行。

当您通过控制台登录（输入用户名和密码）时，无论是坐在机器上，还是通过 ssh 远程登录：在初始命令提示符之前执行 .bash_profile 以配置您的 shell。

但是，如果您已经登录到您的机器并打开了一个新的终端窗口 (xterm)，那么 .bashrc 会在窗口命令提示符之前执行。当您通过在终端中键入 /bin/bash 来启动新的 bash 实例时，也会运行 .bashrc。

在 OS X 上，终端默认每次都运行一个登录 shell，因此这与大多数其他系统略有不同，但您可以在首选项中进行配置。

参考

[https://www.tldp.org/HOWTO/Bash-Prompt-HOWTO/x264.html](https://www.tldp.org/HOWTO/Bash-Prompt-HOWTO/x264.html) [https://apple.stackexchange.com/questions/51036/what-is-the-difference-between-bash-profile-and -bashrc](https://apple.stackexchange.com/questions/51036/what-is-the-difference-between-bash-profile-and-bashrc)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-11-14T11:54:12.593

如果您在**VSCode**中使用 Git bash，请参阅上面 CM 的评论。

> 这适用于在 Visual Studio Code 中运行 git 的 bash，但我必须**把它放在 ~/.bashrc 而不是 ~/.bash_profile**。– 厘米 7 月 29 日 14:43

这为我解决了。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-09-18T04:06:32.313

如果您在 Windows 8 中使用 git bash，只需将其放入您的 ~/.bash_logout 文件中：

```
history > .bash_history 
```

显然你需要一个 ~/.bash_history 文件。

问候。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2021-08-23T15:14:56.170

Pablo R. 和 LinuxSecurityFreak提供的[Unix Stackexchange](https://unix.stackexchange.com/a/1292/396360)的更完整答案：

将以下内容添加到您的 ~/.bashrc

```
# Avoid duplicates
HISTCONTROL=ignoredups:erasedups
# When the shell exits, append to the history file instead of overwriting it
shopt -s histappend

# After each command, append to the history file and reread it
PROMPT_COMMAND="${PROMPT_COMMAND:+$PROMPT_COMMAND$'\n'}history -a; history -c; history -r" 
```

注意：“这个 PROMPT_COMMAND 解决方案的问题是每个历史项目的数字在每个命令之后都会发生变化:(。例如，如果您键入`history`(1) `ls`(2) rm，那么您`!1`需要重复 (1)，历史数字可能会改变并可能运行 rm 命令……”（克里斯·金普顿）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-01-20T13:51:51.203

对我来说，有效的是进入 C:\Users\MY_USER\ 并删除 .bash_profile 文件。

ps：我用的是windows 10

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-03-18T20:07:55.977

我正在使用 Windows 10，这是一个权限问题，我的临时解决方案是添加所有人组并赋予它对`~/.bash_history`文件的完全控制权。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-08T15:27:58.323

顺便说一句，对于那些使用便携式版本的 Git for Windows 的人，不需要创建 .bash_profile 或 .bashrc。只需添加到`C:<path to your Git Portable folder>\etc\bash.bashrc`：

```
PROMPT_COMMAND='history -a' 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-17T15:34:08.140

在另一篇文章中找到了答案：[https ://superuser.com/questions/555310/bash-save-history-without-exit](https://superuser.com/questions/555310/bash-save-history-without-exit)

如果您想在两个终端之间更新历史记录。

作为一个窗口用户，我`.bash_profile`在我的用户文件夹中创建了一个文件。然后我添加以下内容：`PROMPT_COMMAND='history -a;history -c;history -r'`

# javascript - jsRender 递归模板

> ID：10488499
> 
> 赞同：2
> 
> 时间：2012-05-07T20:14:35.150
> 
> 标签：javascript, jsrender

我正在尝试实现一种使用 jsRender 递归模板的方法。问题是，我的数据对象具有一元自引用层次结构，需要递归循环来显示所有属性。这里的例子是一个论坛帖子，可以包含任意数量的回复帖子。每个回复帖子可以包含任意数量的子帖子等。除了递归部分，我有以下代码工作。我只能通过谷歌找到一个对此的远程引用，所以这是我迄今为止所拥有的：

```
<script id="forumPostsTemplate" type="text/x-jsrender">
    <article class="forumPost">
        <header class="forumPostHeader">{{:PostSubject}}
            <div class="info">By: Some Person, {{:CreatedDate}} <a href="">Flag as innapropriate</a> </div>
        </header>
        <div class="content">
        {{:PostContent}} 
        {{for Replies}}
            {{:Replies tmpl="#forumPostsTemplate"}}
        {{/for}}
        </div>
    </article>
</script> 
```

有没有人有这种功能的经验？如果有帮助，我目前正在运行最新版本的 jsRender。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T22:58:52.013

根据 jsRender 的这个例子，这样调用你的模板是否有效？

[https://github.com/BorisMoore/jsrender/blob/master/demos/step-by-step/06_template-composition.html](https://github.com/BorisMoore/jsrender/blob/master/demos/step-by-step/06_template-composition.html)

```
 {{for Replies tmpl="#forumPostsTemplate"/}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T04:39:16.770

这三个不同版本的树标记控件正好说明了这种递归： http:
[//www.jsviews.com/#samples/tag-controls/tree](http://www.jsviews.com/#samples/tag-controls/tree)

# jquery - 正文中的元标记（用于 Javascript）

> ID：10488500
> 
> 赞同：1
> 
> 时间：2012-05-07T20:14:36.940
> 
> 标签：jquery, cross-browser, meta-tags

我正在编写一个 jQuery 插件，它基本上在单个`<div>`. 我正在考虑`<meta>`使用`<div>`.

如果我将`<meta>`标签放在文档正文中，它是有效的 HTML5，旧浏览器在解析页面时不会将所有`<meta>`标签移到头部是否合理安全？

`data-`属性是一个很好的解决方案，但我计划有*很多*，所以我认为类似的东西`<meta>`会更整洁。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T20:17:05.780

该[`<meta>`](http://dev.w3.org/html5/spec/the-meta-element.html#the-meta-element)元素仅在`<head>`HTML5 文档中有效（[元数据内容模型](http://dev.w3.org/html5/spec/content-models.html#metadata-content)仅在 中可接受`<head>`）。您应该使用 HTML5 jQuery 插件来传递配置数据是使用可以从 jQuery 访问的[`data-*`属性](http://dev.w3.org/html5/spec/global-attributes.html#embedding-custom-non-visible-data-with-the-data-attributes)[`.data()`](http://api.jquery.com/data/)，使用.

所以你的标记可能是：

```
<div class="widget" data-foo="bar"><div> 
```

你的 jQuery 将是：

```
$('.widget').widget({...options...}); 
```

这将是一个使用的函数：

```
$.fn.widget = function (...) {
    return this.each(function () {
        ...code...
        options.foo = $(this).data('foo'); //gets the value 'bar'
        ...more code...
    });
}; 
```

* * *

回复 OP 评论：

您使用的属性数量没有限制`data-*`，如果只是用于格式化，请将它们拆分为多行。空白在 HTML 中被压缩：

```
<div class="widget"
    data-foo="bar"
    data-fizz="buzz"
    data-lorem="ipsum"
    ...
    data-xyz="abc">
    ...contents...
</div> 
```

* * *

如果您有充分的理由将数据与数据分开，`<div>`您可以使用一个`<input>`字段，`type="hidden"`当我有一个需要与表单一起提交的交互式表单小部件时，我通常会使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T20:17:08.000

元不是要走的路，数据属性怎么样

[http://html5doctor.com/html5-custom-data-attributes/](http://html5doctor.com/html5-custom-data-attributes/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T20:18:31.750

除了头部之外，您不能`<meta>`在文档的任何部分放置标签。

您可以在`<meta>`标签本身内使用标签将该标签绑定到您的插件。 `<meta>`标签非常灵活。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T15:50:08.140

META 元素可用于识别文档的属性（例如，作者、到期日期、关键字列表等）并将值分配给这些属性。本规范没有定义一组规范的属性。

每个 META 元素指定一个属性/值对。name 属性标识属性，content 属性指定属性的值。

例如，以下声明为 Author 属性设置一个值：

```
<META name="Author" content="Dave Raggett"> 
```

lang 属性可以与 META 一起使用来指定 content 属性值的语言。这使语音合成器能够应用与语言相关的发音规则。

在这个例子中，作者的名字被声明为法语：

```
<META name="Author" lang="fr" content="Arnaud Le Hors"> 
```

笔记。META 元素是用于指定元数据的通用机制。但是，一些 HTML 元素和属性已经处理了某些元数据，作者可能会使用而不是 META 来指定这些元数据：TITLE 元素、ADDRESS 元素、INS 和 DEL 元素、title 属性和 cite 属性.

笔记。当 META 元素指定的属性采用 URI 值时，一些作者更喜欢通过 LINK 元素指定元数据。因此，以下元数据声明：

```
<META name="DC.identifier"
  content="http://www.ietf.org/rfc/rfc1866.txt"> 
```

也可以写成：

```
<LINK rel="DC.identifier" href="content="http://www.ietf.org/rfc/rfc1866.txt"> 
```

更多/来源：

[http://www.w3.org/TR/html4/appendix/notes.html#hB.4](http://www.w3.org/TR/html4/appendix/notes.html#h-B.4)和 [http://www.w3.org/TR/html4/struct/global.html#h-7.4.4.2](http://www.w3.org/TR/html4/struct/global.html#h-7.4.4.2)

# android - Android将数据传回调用类

> ID：10488503
> 
> 赞同：0
> 
> 时间：2012-05-07T20:15:04.063
> 
> 标签：android, class

我对我正在构建的 Android 应用程序感到困惑，因为它是我的第一个应用程序。我有两个类，我的第一个类称为“Options”，它调用第二个类“NetworkConnection”，它反过来检查是否有可用的网络连接，如果有我想传回一个“1”或者如果然后没有传回“0”。我这样做是因为我想在其他几个类中使用“NetworkConnection”，这似乎是最好的方法。有人会指点我一个简单的例子，只需在下面添加几行代码，我知道厚脸皮，但我无法解决，它不像普通的 Java？！非常感谢 ：）

公共类选项扩展活动{

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.options);
            NetworkConection nc = new NetworkConection();

    } 
```

}

//网络连接类

公共类 NetworkConnection 扩展 Activity {

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    myClickHandler(null);
}

public void myClickHandler(View view ) {

    ConnectivityManager connMgr = (ConnectivityManager) 
            getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
    if (networkInfo != null && networkInfo.isConnected()) {
        //pass back the value of 1
    } else {
       //pass back the value of 0 
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:33:13.033

我对你使用的逻辑有点困惑。如果您只想检查连接，为什么要在第二堂课中使用 Activity？

还有为什么要返回 0 和 1？为什么不返回布尔值 true 或 false？

所以我认为这就是你想要的？

```
public class Options extends Activity {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.options);
        NetworkConection nc = new NetworkConection();
        boolean networkAvail = nc.isNetworkConnAvail(); 

    }
} 
```

所以第二类你想检查连接是否可用。所以我创建了一个公共方法，以便您可以在选项类中调用。

```
public class NetworkConnection{

    public boolean isNetworkConnAvail() {

        ConnectivityManager connMgr = (ConnectivityManager) 
            getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
        if (networkInfo != null)
            return networkInfo.isConnected();

        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:39:18.777

要启动一项活动，您必须这样做：

```
final Intent intent = new Intent (Options.this, NetworkConnection.class);
startActivityForResult(intent, NETWORK_CONNECTION); 
```

上面的代码意味着你想开始一个活动。[`startActivityForResult`](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)意味着当新的接近并回到第一个（选项，在你的情况下）时，你会期待一些东西。结果可以在[`OnActivityResult`](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)（在选项中）使用代码 NETWORK_CONNECTION（您将在选项中创建的全局变量）捕获。

当您关闭 NetworkConnection 活动时，只需执行以下操作：

```
final Intent intent = new Intent();
intent.putExtra("myresult", thevalueyouwant);
setResult(Activity.RESULT_OK, intent);
finish(); 
```

这样，您将能够在 Options 活动的 onActivityResult 中读取“myresult”的值。

我的回答不完整，但您必须阅读更多有关这些方法的信息才能成功；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T20:31:37.277

为什么要扩展 Activity？您是否在测试时显示新视图？如果你是那么你需要使用 startActivityForResult 和使用 setResult 来返回结果

[http://developer.android.com/reference/android/app/Activity.html#startActivityForResult(android.content.Intent](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult(android.content.Intent) , int)

# php - 如何使用 php webservice 将图像上传到 Amazon S3？

> ID：10488507
> 
> 赞同：2
> 
> 时间：2012-05-07T20:15:31.003
> 
> 标签：php, file-upload, amazon-s3

我正在通过 web 服务使用 php 将图像上传到亚马逊 S3，但它显示以下错误：

无法打开流：没有这样的文件或目录并且打开失败需要'Zend/Service/Amazon/Abstract.php' (include_path='.:/usr/lib/php:/usr/local/lib/php') /home/jltcnyc1/public_html/mydb/S3.php

```
require_once 'S3.php';
$s3 = new Zend_Service_Amazon_S3(secret_id,key);
$s3->createBucket("photos");
$file=basename($_FILES['file']['name']);
$s3->putObject("photos/", "file");
echo $s3->getObject("photos"); 
```

文件详细信息已插入我的数据库，但未插入我的 S3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:38:21.097

您有一个路径错误，并且您的“Zend/Service/Amazon/Abstract.php”文件未找到。

在您的 S3.php 文件中，您需要从服务器根目录中包含“Zend/Service/Amazon/Abstract.php”的适当路径位置。

如果 Abstract.php 在您的服务器根目录中，则代码如下所示：

```
require_once 'Abstract.php'; 
```

或者，如果您的 S3.php 不在您的服务器根目录中，您可以`require_once`像这样在上面的代码中修复您的：

```
require_once 'path_to_zend/S3.php'; 
```

# sql-server-2008 - 如何解决 MDX 错误：“函数中指定的两个集合具有不同的维度。”？

> ID：10488526
> 
> 赞同：2
> 
> 时间：2012-05-07T20:17:24.897
> 
> 标签：sql-server-2008, mdx

```
WITH
SET TopCountry AS BOTTOMCOUNT( [Dimension Client].[Nazwa Firmy].MEMBERS, 3,      IIF(IsEmpty([Measures].[Fracht]), 0, [Measures].[Fracht]))
MEMBER [Order Count] AS (IIF(IsEmpty([Measures].[Facts Orders Count]), 0, [Measures].[Facts Orders Count]))

SELECT
[Order Count] ON COLUMNS,
TopCountry ON ROWS
FROM [N Wind PL2]
WHERE {
    ([Time].[Hierarchy].[Order Year].&[1997].&[1]),
    ([Time].[Hierarchy].[Order Year].&[1997].&[2]),
    ([Time].[Hierarchy].[Order Year].&[1997].&[3]),
    ([Dimension Client].[Kraj].&[USA]),
    ([Dimension Client].[Kraj].&[Meksyk])
} 
```

我有错误，我在标题中写了，我在谷歌中搜索了它，解决方案对我来说是无法理解的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T21:05:51.567

看起来您的 where 子句中的括号和大括号有点混淆了。尝试：

```
WHERE
    (
        {
            [Time].[Hierarchy].[Order Year].&[1997].&[1],
            [Time].[Hierarchy].[Order Year].&[1997].&[2],
            [Time].[Hierarchy].[Order Year].&[1997].&[3]
        },
        {
            [Dimension Client].[Kraj].&[USA],
            [Dimension Client].[Kraj].&[Meksyk]
        }
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:55:32.057

将层次结构放在一个大括号中，将维度放在一个大括号中

# java - getTimestamp() 在 MySQL JDBC 连接器中进行两次时区转换？

> ID：10488529
> 
> 赞同：11
> 
> 时间：2012-05-07T20:17:33.920
> 
> 标签：java, mysql, jdbc

我在 MySQL 数据库中有一个类型`DATETIME`为的列。`2012-05-07 19:59:12`我试图从数据库中检索这个值，假设它存储在 UTC 时区：

```
Calendar cal = Calendar.getInstance(new SimpleTimeZone(0, "UTC"));
Date date = resultSet.getTimestamp(1, cal);
System.out.println(date); 
```

它输出（`CEST`是我的本地时区，比 UTC 早 2 小时）：

```
Mon May 07 23:59:12 CEST 2012 
```

期望值为：

```
Mon May 07 21:59:12 CEST 2012 
```

我在 JDBC URL 中使用了这三个参数（`Europe/Berlin`与 相同`CEST`）：

```
..&useGmtMillisForDatetimes=true&useTimezone=true&serverTimezone=Europe/Berlin 
```

是我的缺陷还是应该在 JDBC 驱动程序中额外配置一些东西？我正在使用`mysql:mysql-connector-java:5.1.20`.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-08T09:38:26.660

使用这些[JDBC URL 参数](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html)，它可以工作：

```
useGmtMillisForDatetimes=true
useJDBCCompliantTimezoneShift=true
useLegacyDate‌timeCode=false
useTimezone=true
serverTimezone=UTC 
```

# php - 使用 html 标签时设置的 CKEditor 值

> ID：10488531
> 
> 赞同：0
> 
> 时间：2012-05-07T20:17:36.680
> 
> 标签：php, html, tags, ckeditor

[使用 JQuery 设置 CKEditor 值](https://stackoverflow.com/q/5519674/1347112)

我的问题是关于设置 CKEditor 的值。我可以在其简单文本时设置值，但是当文本中的值中有 html 标签时无法设置。

有什么线索吗？

也许已经存在类似的问题。

Javascript：

```
 CKEDITOR.instances.contentTexto.setData( '<?php echo $var_myRow['contents']; ?>' ); 
```

好的，所以我已经弄清楚了如何通过以下方式删除 html 标签：

```
$var_contentString = $var_myRow['contents'];
$var_contents = strip_tags($var_contentString);
echo $var_contents; 
```

它有效！现在，当我将变量发送到 setData(''); 像这样它仍然没有显示任何内容。这里发生了什么，有人可以解释一下吗？

此外，当我检查 pageSource 时，数据似乎与 setData(); 中的标签一起出现。功能。所以它纯粹是 CKEditor 与 html 标签的显示问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:45:08.700

尝试这个 ：

```
CKEDITOR.instances.contentTexto.setData('<?php 
    echo str_replace(array("'"),array("\\\'"),$var_myRow['contents']);
?>'); 
```

# c# - BackgroundAgent 中的计时器

> ID：10488539
> 
> 赞同：0
> 
> 时间：2012-05-07T20:18:12.513
> 
> 标签：c#, silverlight, windows-phone-7

这是我上一个问题的后续问题：[来自 AudioPlayerAgent 的 HttpWebRequest](https://stackoverflow.com/questions/10474656/httpwebrequest-from-audioplayeragent)

我正在寻找一种从我的 BackgroundAudioPlayer 内部每 20-30 秒运行一次函数的方法，以便查询 Web 服务器。

目前，我正在尝试以这种方式使用计时器：

```
public AudioPlayer()
    {
        if (!_classInitialized)
        {
            _classInitialized = true;
            // Subscribe to the managed exception handler
            Deployment.Current.Dispatcher.BeginInvoke(delegate
            {
                Application.Current.UnhandledException += AudioPlayer_UnhandledException;

            });
            trackTimer = new Timer(TrackTimerTick, null, 0, 2000);
        }
    } 
```

但是，每当我调用 NotifyComplete() 时，计时器不再滴答作响。有可能完成这项工作吗？如果是这样，怎么做？

# android - 配置更改后线性布局中的片段

> ID：10488545
> 
> 赞同：0
> 
> 时间：2012-05-07T20:18:55.880
> 
> 标签：android, configuration, orientation, fragment

我有一个包含线性布局和片段占位符的活动。

```
<RelativeLayout >

    <LinearLayout/>

    <fragment />

</RelativeLayout> 
```

在活动的 onCreate() 中，我将一个片段放置在片段占位符中，并将多个片段放置在线性布局中。在手机进行配置更改（例如方向更改）之前，这可以正常工作。

对于方向或配置更改，我没有做任何特别的事情。发生的事情真的很奇怪：片段占位符已正确填充，但线性布局现在包含重复的片段。即如果线性布局之前有`fragment1`并且`fragment2`在其中，它现在将显示`fragment1 fragment2 fragment1 fragment2`. 这里发生了什么？

作为附加说明：我正在使用反射来创建片段对象，但我认为这不会改变任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:28:08.273

当方向改变时，框架会自动将片段添加到您的视图中。仅当 paramBundle 为空时才执行添加片段事务。

示例（使用支持库）：

```
@Override
public void onCreate(Bundle paramBundle) {
    super.onCreate(paramBundle);
    if (paramBundle == null) {
        FragmentManager localFragmentManager = getSupportFragmentManager();
        FragmentTransaction localFragmentTransaction = localFragmentManager
                .beginTransaction();
        localFragmentTransaction.add(R.id.fragmentHost,
                new MyFragment(), MY_FRAGMENT_TAG);
        localFragmentTransaction.commit();
    }
} 
```

# wordpress - Wordpress 自定义帖子类型和分类仍然显示帖子类型中的所有帖子

> ID：10488547
> 
> 赞同：0
> 
> 时间：2012-05-07T20:19:05.363
> 
> 标签：wordpress

嘿，我目前非常沮丧，无法弄清楚这一点，我已经在整个互联网上查看了。我有一个名为“portfolio”的自定义帖子类型，我有一个名为“categories”的分类，其中包含“photography”和“catalog design”两个类别。我正在使用此代码

```
 query_posts(array(
            'post_type' => 'portfolio',
            'tax_query' => array(
                'taxonomy' => 'category',
                'field' => 'catalog-design',
                'terms' => 'catalog-design'
            )
        )); 
```

出于某种原因，它没有听分类法，只是显示投资组合中的所有内容。这个我也试过了还是不行

```
 query_posts(array(
            'post_type' => 'portfolio',
                            'category' => 'catalog-design'
        )); 
```

如果有人知道如何解决这个问题，那就太棒了，这里也是创建一切的代码

```
add_action('init', 'portfolio'); 
```

功能投资组合（）{

```
$labels = array(
    'name' => _x('Portfolio', 'edit and add portfolio items'),
    'singular_name' => _x('Portfolio Item', 'post type singular name'),
    'add_new' => _x('Add Portfolio Item', 'Portfolio Item'),
    'add_new_item' => __('Add New Portfolio Item'),
    'edit_item' => __('Edit Portfolio Item'),
    'new_item' => __('New Portfolio Item'),
    'view_item' => __('View Portfolio'),
    'search_items' => __('Search Portfolio'),
    'not_found' =>  __('Nothing found'),
    'not_found_in_trash' => __('Nothing found in Trash'),
    'parent_item_colon' => ''
);

$args = array(
    'labels' => $labels,
    'public' => true,
    'publicly_queryable' => true,
    'show_ui' => true,
    'query_var' => true,
    'menu_icon' => get_stylesheet_directory_uri() . '/library/images/portfolio.png',
    'rewrite' => true,
    'capability_type' => 'post',
    'hierarchical' => false,
    'menu_position' => null,
    'supports' => array('title', 'category', 'editor','thumbnail'),
    'taxonomies' => array('category', 'client')
  ); 

register_post_type( 'portfolio' , $args ); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:36:52.833

'category' 查找 ID。尝试：

```
query_posts(array(
        'post_type' => 'portfolio',
        'category_name' => 'catalog-design'
)); 
```

或者：

```
$cat = get_cat_ID('catalog-design');
query_posts(array(
        'post_type' => 'portfolio',
        'category' => $cat
)); 
```

# html - word 或 pdf 到托管的 HTML5 表单？

> ID：10488548
> 
> 赞同：1
> 
> 时间：2012-05-07T20:19:08.167
> 
> 标签：html, forms, pdf, ms-word

是否有良好的托管服务允许用户导入可以转换为 html5 形式的 word 文档或 pdf。那里有很多托管的 html5 表单构建器，但我没有找到任何允许简单导入这些标准格式的东西。我有数百页要转换成数字形式，并且宁愿不必从头开始重建每一页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:44:15.037

我相信[Crocodoc](https://crocodoc.com/why-crocodoc/)可能是您正在寻找的东西。

# c# - 如何使用 fiddler 检查两个网站之间的 Web 服务的流量？

> ID：10488553
> 
> 赞同：0
> 
> 时间：2012-05-07T20:19:46.100
> 
> 标签：c#, asp.net, web-services, http, fiddler

我们如何使用提琴手来检查两个网站之间的网络服务（xml）的流量？
[http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)

我为我的网站创建了两个子域。
例如我的网站是这样的：

> www.site.com

这些子域如下所示：

> www.sub1.site.com
> 
> www.sub2.site.com

这些站点位于 Web 服务器 (vps) 上，我正在使用本地系统观看它们（我的本地系统上已安装 fiddler）。
www.sub1.site.com 正在调用 www.sub2.site.com 网络服务。
是否可以使用 http 等断点捕获此 Web 服务数据？
我检查了很多次提琴手，但找不到如何？
如果不是 Fiddler 中的 XML 选项卡是什么？

非常感谢您的回答和帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T21:03:09.893

您不能为此使用 Fiddler2。Fiddler2 是一个 Web 代理，它通过在您自己的机器上运行的代理来路由您的浏览器请求。所以它只有在发出 HTTP 请求的“客户端”是本地的时才有效。例如，您的浏览器可能会向 www.sub1.site.com 发起 HTTP 请求，但从 www.sub1.site.com 到 www.sub2.site.com 的调用不会通过 Fiddler2 进行路由。将 Fiddler2 想象成位于您的浏览器和浏览器试图访问的任何站点之间。

如果您有权在服务器 (sub1) 上安装 Fiddler2，对于一些更复杂的场景，您可能会考虑使用[http://www.fiddler2.com/fiddler/help/reverseproxy.asp 。](http://www.fiddler2.com/fiddler/help/reverseproxy.asp)但是，如果您可以访问服务器，还有其他监控方法可能是更好的选择（例如日志文件）。

# javascript - 如何在保持相同布局的同时调整这些 div 的大小？

> ID：10488555
> 
> 赞同：1
> 
> 时间：2012-05-07T20:19:50.530
> 
> 标签：javascript, jquery, css

对不起标题，这是一个很难总结的问题。目前，我有一个如下所示的网站：

![http://i.imgur.com/a0vAo.png](../Images/6f88daf6c77e1323b2c889cad5cbc852.png)

（如您所知，它的灵感来自 Metro）。我已经在这里上传到 jsfiddle：http: [//jsfiddle.net/r46bY/4/embedded/result/](http://jsfiddle.net/r46bY/4/embedded/result/)

围绕所有内容的 div（由虚线边框表示）调整大小以适应用户的浏览器窗口，我希望按钮（只是彩色的 div）做同样的事情，但不知道如何做。目前，它们使用绝对定位并基于特定的屏幕尺寸就位。我希望他们保持相同的布局，但随着容器 div 调整大小。

我已经在 CSS 中尝试了液体值，但我无法正确定位。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:24:22.720

您的尺寸（包括边距）仅使用百分比而不是像素。在调整大小时，您只需调整周围 div 的大小，并且内容应该采用正确的尺寸。

# iphone - 递归实例化时故事板中的UI元素和IBOutlet变量？

> ID：10488556
> 
> 赞同：0
> 
> 时间：2012-05-07T20:19:50.803
> 
> 标签：iphone, objective-c, xcode4.2

**到目前为止我所做的：**

我正在使用 xcode 4.2。我创建了一个包含 ImageView 的 UITableView。UITableView 使用具有文件 MyTableViewController.m/.h 的类 MyTableViewController。我创建了一个名为 _bgimageview 的 IBOutlet 变量。然后在故事板中，在连接检查器中，我将 ImageView 连接到这个 _bgimageview 变量。在 MyTableviewController.m 的 viewDidLoad 函数中，我将背景图像设置为 _bgimageview。当我运行模拟器时，单击几个选项卡以访问 MyTableViewController，然后我会看到背景图像。到目前为止一切都很好。

**问题**

我也成功地构建了一个递归树，**但问题是我在树的根级别之后丢失了背景图像**。我想我知道为什么，但不知道如何解决。我在每次单击行时实例化一个新的 MyTableViewController，如下所示：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
        MyTableViewController *childView = [[MyTableViewController alloc] init];
        childView._menu = children; // an NSDictionary of children
        [self.navigationController pushViewController:childView animated:YES]; 
} 
```

如前所述，我在 viewDidLoad 函数中为背景图像填充 IBOutlet 变量。但是该 IBOutlet 变量通过 Storyboard 连接链接到 ImageView。在根级别以下的树级别中，我以编程方式实例化新的 MyTableViewControllers，因此，我可能会丢失背景图像的 IBOutlet 变量与情节提要中提到的实际 UIImageView 之间的关系。

有人可以再次向我保证这是问题所在，以及在以分层方式使用时如何将背景图像添加到 MyTableViewController ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:41:18.193

```
MyTableViewController *childView = [[MyTableViewController alloc] init]; 
```

此行创建视图控制器的新实例，而不参考情节提要。因此它不会连接您的任何插座 - 表格视图可能没问题，因为它是默认创建和连接的，但其他任何东西都不会连接。

您可以通过在 viewDidLoad 中记录您的图像视图出口来确认这一点——它将为零。

您应该通过将 segue 从表的行向下拖动到同一视图控制器的视图控制器对象来创建递归堆栈：

![在此处输入图像描述](../Images/7e68c51fd1b3e3d6c7f37b55e98515f5.png)

正如 Lvsti 在评论中指出的那样，您可以在`prepareForSegue:sender:`

# google-maps - 如何自定义谷歌地图方向不显示航点

> ID：10488559
> 
> 赞同：1
> 
> 时间：2012-05-07T20:20:09.827
> 
> 标签：google-maps, google-maps-api-3

我的问题是航点在方向列表中突出显示，例如：从航点 1 开始，航点 1 到航点 2，...

这是一个示例：[http ://www.ridersguide.co.uk/Ride_721](http://www.ridersguide.co.uk/Ride_721)

我想展示如何在不显示航点的情况下到达目的地的起点和说明。

你有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T21:01:01.820

您可以使用这些设置来抑制标记

```
 var directionsDisplay = new google.maps.DirectionsRenderer({
            suppressMarkers: true,
            suppressInfoWindows: true,

       }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T05:13:32.773

@Ramesh K 的回答通常是正确的。但是，这样，您也杀死了起点和终点的标记。然后您需要自己创建标记。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-07T20:29:22.563

我认为您的 api 调用在 Waypoint 中有默认值。

[在此处查找](https://developers.google.com/maps/documentation/javascript/reference#DirectionsWaypoint "看这里")将航点删除为旅行中“停留”的建议

# javascript - 如何应用 [^0-9] 正则表达式模式 javascript

> ID：10488564
> 
> 赞同：2
> 
> 时间：2012-05-07T20:20:47.313
> 
> 标签：javascript, regex

我有 id 的验证方法，每个 id 只能包含`[a-z0-9_]`不区分大小写的字符。`[^a-z]`似乎工作，但我想追加`[^0-9]`，但它不工作。一个字符串模式应该是什么样子？

```
function foo() {
  testUserIds = ['id23425860', 
  'yulka_rdtska',
  'im?sel=2000000001',
  'im?sel=2000000002'];
  for (id in testUserIds) {
    document.write(isUserIdValid(id) + '\r\n');
  }
}
function isUserIdValid(user_id) {
  var patt = new RegExp('[^a-z]', 'ig');
  return patt.test(user_id);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T20:23:39.033

这就是你需要的：

```
function isUserIdValid(user_id) {
  var patt = new RegExp('[^a-z0-9_]', 'ig');
  return patt.test(user_id);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T20:27:18.247

问题是您使用的是`for-in`构造而不是正确的`for`循环。用作`[^a-z0-9_]`您的正则表达式并正确迭代您的数组。

在 JavaScript 中，不要使用 迭代数组`for (elem in arr)`，因为该语法的目的是迭代对象的属性。而是使用`for (var idx=0; idx<something; idx++)`.

```
function foo() {
  testUserIds = ['id23425860', 
  'yulka_rdtska',
  'im?sel=2000000001',
  'im?sel=2000000002'];

  // Use an incremental for loop here, NOT a for-in
  // for-in is intended for iterating over object properties, not arrays.
  for (var i=0; i<testUserIds.length; i++) {
    console.log(isUserIdValid(testUserIds[i]) + '\r\n');
  }
}
function isUserIdValid(user_id) {
  var patt = new RegExp('[^a-z0-9_]', 'ig');

  // Return the inversion of this, so isUserValid() is true if the user is valid
  return !patt.test(user_id);
}

foo();
// Outputs
true
true
false
false 
```

请注意，您设置函数的方式与它所说的*相反。*您正在检查无效字符，因此返回反转：

```
// If it matched, it's invalid, otherwise valid
return !patt.test(user_id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T20:26:00.277

像这样的东西应该工作：

```
var patt = new RegExp(/^[0-9]+$/, "ig"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T20:30:43.640

```
function isUserIdValid(user_id) {
    var patt = new RegExp(/^[a-z0-9]+$/i);
    return patt.test(user_id);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T02:31:43.087

你应该声明它`testUserIds`是`var`一个局部变量，而不是一个全局变量。

```
function foo() {
  var testUserIds = ['id23425860', 
  'yulka_rdtska',
  'im?sel=2000000001',
  'im?sel=2000000002'];

  // rest of your code
} 
```

此外，要声明一个正则表达式，您可以用更简洁的斜杠将表达式包装起来，如下所示：

```
var patt = /[^a-z]/ig; 
```

有点离题，但我忍不住指出。

# selenium - Selenium grid2：如何针对单个节点运行多个测试？

> ID：10488569
> 
> 赞同：2
> 
> 时间：2012-05-07T20:21:38.047
> 
> 标签：selenium, webdriver, selenium-grid

我担心这是一个非常琐碎的问题。但是我在让 selenium Grid2 对单个节点运行多个测试时遇到了一些麻烦，据我了解，这应该可以通过设置 maxSessions 来实现。

这是我的设置： -Hub 完全标准运行 -Node 运行 Firefox，启用了 5 个实例和 5 个会话。

我使用 MBUNIT 创建了 6 个虚拟测试并添加了 [Paralizable] 以使它们并排运行。

这就是我所做的测试： 1：启动 2 个节点并运行所有测试（它们在每个节点上并行运行） 2：关闭 nodeA 并运行所有测试

在第 2 步中我被卡住了，我预计最后一个节点会一次运行 2 个测试，因为 maxSessions 设置为 5，但这不会发生，它只运行 1。

我怀疑我在某处启动集线器或节点时使用了错误的参数，但现在我无法弄清楚。有人想帮助 Grid2 的新手吗？:)

这大致是我的代码，非常基本，只是为了玩：

```
[TestFixture]
public class RemoteTest
{
  [Test]
  [Parallelizable]
  public void StartClose()
  {
    DesiredCapabilities cap = DesiredCapabilities.Firefox();

    IWebDriver driver = new RemoteWebDriver(new Uri("http://localhost:4444/wd/hub"), cap);

    driver.Navigate().GoToUrl("http://www.google.dk");

    driver.Quit();
  }
} 
```

使用的命令：

java -jar selenium-server-standalone-2.14.0.jar -role hub

java -jar selenium-server-standalone-2.14.0.jar -role node -hub [http://192.168.0.26:4444/grid/register](http://192.168.0.26:4444/grid/register)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:28:49.283

毫无疑问是微不足道的:)

启动服务器（使用以下命令）

> java -jar selenium-server-standalone-2.14.0.jar -role hub

启动节点（使用以下命令）

> java -jar selenium-server-standalone-2.14.0.jar -role node -hub [http://localhost:4444/grid/register](http://localhost:4444/grid/register)

如果您也尝试使用浏览器启动节点（请检查以下命令）

> -browser browserName=firefox,version=3.6,maxInstances=5,platform=LINUX

***maxInstances --> 表示可以在 Grid 节点上运行的同一浏览器的 Max 实例***

[Selenium 网格：MaxSessions 与 MaxInstances](https://stackoverflow.com/questions/13723349/selenium-grid-maxsessions-vs-maxinstances)

如果您在测试用例中指定了网格上不存在的功能，那么将没有匹配项，并且测试将无法运行。

请避免从节点运行测试，而是从集线器运行测试。我尝试了相同的实验，从服务器（HUB）运行测试，并注册了一个节点来运行并行测试用例，一切都很完美。

# mysql - 将查询中的单个值复制到 MySQL 触发器中的新列/变量中

> ID：10488574
> 
> 赞同：0
> 
> 时间：2012-05-07T20:21:59.200
> 
> 标签：mysql

# 问题：

将列值选择到`UPDATE`/`INSERT`触发器`NEW`变量时使用的正确语法是什么？

# 细节：

这是我正在使用的 [simplified] 表以及查询。为了这个例子的目的，我选择了递归的东西，在这种情况下是评论（即，一个人可以评论图片，也可以评论评论）。在任何给定时间，我都想知道评论在评论什么图片，但我不想查询表 n 次以获取该图片（因此我拒绝[邻接列表模型](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)），所以我有一个触发器在插入时复制目标图片。

**图片表：**

```
CREATE TABLE IF NOT EXISTS pictures
(
   id INT NOT NULL AUTO_INCREMENT,
   PRIMARY KEY ( id )
) 
```

**评论表：**

```
CREATE TABLE IF NOT EXISTS comments
(
   id INT NOT NULL AUTO_INCREMENT,
   picture_id INT NOT NULL,
   comment_id INT NOT NULL,
   PRIMARY KEY ( id ),
   FOREIGN KEY ( picture_id ) REFERENCES pictures ( id ),
   FOREIGN KEY ( comment_id ) REFERENCES comments ( id )
) 
```

**COMMENTS 触发器：**请注意`NEW.comment_id`和，因此，`NEW.picture_id`它们`NOT NULL`默认为零 ( `FALSE`)。在我的实际程序中，我必须`XOR`拒绝分配图片和评论 ID 的无效尝试。

```
CREATE TRIGGER bi_comments_fer BEFORE INSERT ON comments FOR EACH ROW
BEGIN
   IF ( NEW.comment_id )
   THEN
      select NEW.picture_id := picture_id from comments where id = NEW.comment_id;
   END IF;
END 
```

我试着包括一个`@`标志，像这样

```
select @NEW.picture_id := picture_id from comments where id = NEW.comment_id; 
```

但这也引发了语法错误。谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:25:12.023

```
SET NEW.picture_id := (SELECT picture_id FROM comments WHERE id = NEW.commend_id); 
```

# api - 将参数替换为公共方法会被视为重构，还是太过分了？

> ID：10488575
> 
> 赞同：0
> 
> 时间：2012-05-07T20:22:01.647
> 
> 标签：api, enums, refactoring

假设我有一个带有签名的方法：

```
public static bool ValidDateToSend(DateTime date, string frequency) 
```

该方法的内部是开启频率。

将频率从字符串更改为公共枚举，是否会被视为重构，还是太过分了？由于这是一个公共方法，因此在此代码之外可能有许多引用。重构的严格定义（我相信无畏重构的意思）是

> 用于重构现有代码体的规范技术，在不改变其外部行为的情况下改变其内部结构

在我看来，将方法参数更改为使用不兼容的类型确实会构成“更改其外部行为”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:32:00.570

“外部行为”是系统本身在输入和输出方面的行为。修改签名绝对是一种重构，尽管安全地执行它可能很困难。唯一的例外是当您的产品是 API 时，在这种情况下修改签名会影响客户，而不仅仅是重构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:33:09.010

改变它对我的外部行为表明代码的用户看到的东西发生了变化。如果方法本身包含在某种代码库中，则可以考虑更改其外部行为。如果该方法仅在内部使用并且对该方法的所有引用都发生了变化，那么外部行为不会发生变化，因此根据您列出的定义，它正在重构。如果它在代码库中，它可以被认为是一种增强。如果您认为代码库的用户必须重构他们的代码才能使用它，并且他们的代码的最终用户不会看到任何差异，那么它仍然可能被视为重构。

# symfony - Symfony2 - 如何在 Bundles 之间注册全局事件监听器

> ID：10488578
> 
> 赞同：0
> 
> 时间：2012-05-07T20:22:27.673
> 
> 标签：symfony

我有两个捆绑包：

*   发件人捆绑
*   接收包

首先进行一些操作并分派一个事件，比如说`something.done`. 现在我想接收这个事件并在 ReceiverBundle 中处理它，其中包含侦听器和分配给它的适当操作。我当然不想`$eventDispatcher->addListener()`在 SenderBundle 中！但我想自动为定义的事件注册监听器！

我想`services.xml`在 ReceiverBundle 中创建一个：

```
<services>
    <service id="some_listener" class="My\ReceiverBundle\Class">
        <tag name="kernel.event_handler" event="something.done" method="onSomethingDone" />
    </service>
</services> 
```

这是使用 DependencyInjection 自动加载的。

我发现这有点像工作……但不是。我管理的内容 - 发送事件后注册监听器。为什么？！

我可以在事件的调试工具栏中将我的事件视为“未调用侦听器”。我猜这是因为监听器是在事件发送后启动和注册的。

如何注册 Listener 与我的其他 Bundle 一起使用？它是在 Doctrine (doctrine.event_listener) 中以某种方式制作的，但我无法弄清楚它是如何完成的。：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:43:44.283

您想改用`kernel.event_listener`标签：

```
<services>
    <service id="some_listener" class="My\ReceiverBundle\Class">
        <tag name="kernel.event_listener" event="something.done" method="onSomethingDone" />
    </service>
</services> 
```

# ruby-on-rails - 从另一个可安装引擎访问一个可安装引擎的路线

> ID：10488580
> 
> 赞同：2
> 
> 时间：2012-05-07T20:22:38.377
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, ruby-on-rails-plugins, rails-engines

我正在制造一个新的可安装引擎。它是更大应用程序的一部分。我正在尝试使用另一个小型引擎的布局作为我的引擎，并且该引擎需要具有相同的布局。为此，我的应用控制器看起来像：

```
class ApplicationController < AnotherEngine::ApplicationController
     layout "AnotherEngine/AnotherEngine"    #Pointing to the layout file of other engine
end 
```

现在的问题是另一个引擎中有named_pa​​ths，我的引擎无法识别并抛出

```
ActionView::Template::Error (undefined local variable or method `some_path' for #<#<Class:0xbbd9524>:0xbbf85c8>) 
```

为什么应用程序无法找到路径？当我转到另一个引擎时一切正常，但是当我的引擎尝试使用另一个引擎的布局时，它又具有一些命名路径，我得到了这些错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T06:58:52.330

路线应该在engine_name.named_pa​​th的宿舍里！！它会像一个魅力:)

# php - PHP 电子邮件客户端 - 克服缓慢的发送/接收

> ID：10488581
> 
> 赞同：3
> 
> 时间：2012-05-07T20:22:42.600
> 
> 标签：php, email, smtp, imap

我开发了一个与 manta.com 类似的营销网站使用的 CRM。CRM 有一个内置的电子邮件客户端。基本上，它将姓名和电子邮件与文件中的地址相匹配，如果电子邮件来自客户，它将在电子邮件旁边加载他们的帐户信息。

整个系统工作，但在某些情况下很慢。因为该国的每个“地区”都由不同的公司管理，所以该软件连接到几个不同的邮件服务器，所有这些服务器的行为都不同。

在某些情况下（主要是使用 godaddy 服务器）发送电子邮件需要很长时间。如果他们有很多消息（500+），即使它是分页的，加载收件箱也需要很长时间。

我使用 pear Mail::Factory smtp 发送，内置 php imap 函数接收。

我正在考虑传出消息，我只会将电子邮件存储到数据库中，然后让 cron 脚本将其发送出去，然后他们可以发送电子邮件并立即继续。

有人对通过 IMAP 和 php 处理大型收件箱有任何想法/概念吗？我将无法控制邮件服务器本身，但可以完全控制 CRM 所在的服务器。

我不是在寻找代码，只是在寻找概念（如果你有的话）。

它是 Linux (ubuntu)、apache、mysql、php。如果需要，我可以使用 Zend。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:00:30.117

它看起来像是缓存电子邮件和使用忽略电子邮件正文的 imap_fetch_overview 函数的组合。这似乎消除了滞后的任何问题。我也可以用它来分页结果，所以我一次只加载一个小数字（25-50）。谢谢您的帮助。

# python - python正则表达式日期格式

> ID：10488586
> 
> 赞同：-2
> 
> 时间：2012-05-07T20:23:11.937
> 
> 标签：python, regex

我的正则表达式是 reg = "April \d{1,2}"

我想要“4 月 20 日”之类的内容

但不是“2000 年 4 月”

我如何解决它？

谢谢，

程

* * *

抱歉，需要修改我的问题，我使用的 reg 是

"((一月|二月|三月|四月|五月|六月|七月|八月|九月|十月|十一月|十二月|\

一月|二月|三月|四月|五月|六月|七月|八月|九月|九月|十月|十一月|十二月)\

\D{0,3}\

((1[0-9])|(2[0-9])|(3[0-1])|(0?[0​​-9])))"

想拿 4 月 20 日而不是 2000 年 4 月

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:25:09.670

尝试类似的东西`April \d\d?\b`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T21:01:47.877

大概这就是你想要的：

```
\w+\s*[1-2][0-9]|3[0-1]\b 
```

不过，它仍然允许像 2 月 30 日这样的事情，你需要根据你需要的准确度来调整它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T21:02:19.503

Python 正则表达式匹配尝试匹配 te 字符串的开头，因此`00`正则表达式匹配根本不使用结尾。要强制匹配直到字符串结尾，请使用`$`字符串结尾标记。

像`April \d{1,2}$`

# c# - 在字符串列表中查找子字符串

> ID：10488587
> 
> 赞同：22
> 
> 时间：2012-05-07T20:23:12.743
> 
> 标签：c#, .net, string, linq, substring

我有一个这样的列表，我希望能够在这个列表中搜索来自另一个字符串的子字符串。例子：

```
List<string> list = new List<string>();
string srch = "There";
list.Add("1234 - Hello");
list.Add("4234 - There");
list.Add("2342 - World"); 
```

我想`"There"`在我的列表中搜索并返回`"4234 - There"`。我试过了：

```
var mySearch = list.FindAll(S => s.substring(srch));
foreach(var temp in mySearch)
{
    string result = temp;
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-07T20:25:22.087

使用 Linq，只需检索第一个结果：

```
string result = list.FirstOrDefault(s => s.Contains(srch)); 
```

要在没有 Linq 的情况下执行此操作（例如，对于早期的 .NET 版本，例如 .NET 2.0），您可以使用`List<T>`'`FindAll`方法，在这种情况下，它将返回列表中包含搜索词的所有项目：

```
var resultList = list.FindAll(delegate(string s) { return s.Contains(srch); }); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-07T20:25:43.553

要返回所有条目：

```
IEnumerable<string> result = list.Where(s => s.Contains(search)); 
```

只有第一个：

```
string result = list.FirstOrDefault(s => s.Contains(search)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T20:34:50.193

你写的会导致编译错误

> 'string.Substring(int)' 的最佳重载方法匹配有一些无效参数

子字符串用于使用字符位置和/或结果字符串的长度来获取字符串的一部分。

例如 `srch.Substring(1, 3)`返回字符串“她”

正如其他人提到的那样，您应该使用`Contains`which 告诉您一个字符串是否出现在另一个字符串中。如果你想知道你会使用的实际位置`IndexOf`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-27T08:05:02.990

我必须做的同样的问题。

你需要这个：

```
myList.Where(listStrinEntry => myString.IndexOf(listStringEntry) != -1) 
```

在哪里：

`myList`is`List<String>`具有`myString`必须包含在任何位置的值

**因此，事实上您搜索 myString 是否包含列表中的任何条目。** 希望这是你想要的...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T20:44:33.453

我喜欢使用 indexOf 或 contains

```
someString.IndexOf("this");
someString.Contains("this"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-16T14:05:35.587

并用于`CaseSensitive`：

```
YourObj yourobj = list.FirstOrDefault(obj => obj.SomeString.ToLower().Contains("some substring")); 
```

或者

```
YourObj yourobj = list.FirstOrDefault(obj => obj.SomeString.ToUpper().Contains("some substring")); 
```

# python - 将参数传递给eclipse中的函数？

> ID：10488589
> 
> 赞同：-1
> 
> 时间：2012-05-07T20:23:28.060
> 
> 标签：python, eclipse

我进入 File-properties-edit-arguments 输入一个字符串。运行程序时我没有输出。

```
def print(n):
    print n 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:28:36.697

确保您从某个地方调用该方法，通常是 Python 文件中的一个`main()`或`test()`函数。另外，避免使用`print`，因为它掩盖了实际的语句/函数。（在 Python 2.x 中，这甚至不会*运行*- 您*必须*将其命名为`print`.）

```
def main():
    print(raw_input("Will print something "))

if __name__ == '__main__':
    main() 
```

# windows-phone-7 - Bing 地图上的绘图线消失了

> ID：10488611
> 
> 赞同：1
> 
> 时间：2012-05-07T20:25:24.957
> 
> 标签：windows-phone-7

我正在使用折线代码在我的应用程序的 bing 地图上画一条线。但是当我放大地图时，折线消失了。你知道我做错了什么吗？非常感谢您

代码如下所示：

```
MapPolyline polyline = new MapPolyline();
polyline.Stroke = stroke;
polyline.StrokeThickness = strokeThinkness;
polyline.Opacity = opacity;
polyline.Locations = locationsList;
MyMap.Children.Add(polyline); 
```

# android - android sdkversion 市场展示

> ID：10488612
> 
> 赞同：0
> 
> 时间：2012-05-07T20:25:25.550
> 
> 标签：android, google-play

首先，我的英语不是很好。我有一个问题：“如果我有一部搭载 Android 4.0 的手机并且我正在寻找特定的应用程序。但是，在该应用程序的 Android 清单中显示：maxsdkversion：“8”。该应用程序是否会显示在 android 4.0 上电话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:45:34.530

不，它不会显示。

根据文档[http://developer.android.com/guide/topics/manifest/uses-sdk-element.html](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

> 但是，在向用户提供可供下载的应用程序时，Google Play 将继续使用该属性作为过滤器。

这就是为什么，再次根据文档：

> 警告：不建议声明此属性。首先，无需将属性设置为阻止将应用程序部署到新版本的 Android 平台上，因为它们已发布。

# asp.net - 缺少 Microsoft.Reporting.WebForms.HttpHandler？

> ID：10488614
> 
> 赞同：1
> 
> 时间：2012-05-07T20:25:43.327
> 
> 标签：asp.net, reporting-services

通过 WS2008，我使用 SSRS 报告服务器（.RDL 文件）做了一个报告，以显示来自 SQL Olap Cube 的数据，并且一切正常。

**现在我想通过Microsoft Report Viewer**（我已经安装了版本 8 和 9）将此报告嵌入到带有 Asp.Net（IIS 7）的网页（.ASPX）中。

为此，我必须在其中添加一些行`Web.Config`以使用 http 处理程序来查看报告。

像这样的东西：

```
<add verb="*" path="Reserved.ReportViewerWebControl.axd"
type = "Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms,
 Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" /> 
```

如您所见，`Microsoft.Reporting.WebForms.HttpHandler`请求但未安装在服务器中，如下图所示

![安装的程序集列表](../Images/39e2fcd507d13b096b1ab1e489e2dc99.png)

那么我必须安装什么才能在服务器中安装这个处理程序？

这个话题缺少什么或我有什么误解？

在此先感谢谁能帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:46:33.377

HttpHandler 不需要单独安装 - 它是报表查看器控件的一部分。您拥有的配置条目适用于 IIS 6。如果您使用的是 IIS 7，它应该位于以下`<system.webServer>`部分：

```
<handlers>
    <add name ="ReportViewerWebControlHandler" preCondition="integratedMode" verb="*" path="Reserved.ReportViewerControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
</handlers> 
```

您需要删除其他配置条目才能正常工作。此外，还有一个[版本 10 的 Microsoft Report Viewer](http://www.microsoft.com/en-us/download/details.aspx?id=6442)可用。安装多个版本的 dll 时我遇到了问题，所以我会尝试只使用 10 并删除版本 8 和 9。

# javascript - 具有图像上传选项的富文本编辑器

> ID：10488617
> 
> 赞同：5
> 
> 时间：2012-05-07T20:26:02.137
> 
> 标签：javascript, jquery, rich-text-editor

我正在尝试使用 Codeigniter 创建一个内容管理系统。目前，我一直在寻找一个具有内置图像上传选项的文本编辑器（就像在 joomla 中一样），以便用户可以将图像从他们上传的图像中插入到内容中。

我找到了很多文本编辑器，但没有找到任何具有内置图像上传选项的编辑器。

您能否推荐一个具有图像上传选项的开源富文本编辑器？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-07T20:36:30.367

[TinyMCE](http://www.tinymce.com/) [示例在这里](http://www.tinymce.com/tryit/full.php)。（图片上传：转到图片 -> 单击“浏览”图标！

[Niceedit](http://www.nicedit.com/) [示例在这里](http://www.nicedit.com/demos.php?demo=1)

[CKEditor](http://ckeditor.com/) [示例在这里](http://ckeditor.com/demo)

我会推荐这3个！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T20:27:32.020

[CKEditor](http://ckeditor.com/)总是一个很好的解决方案

[在此处](http://ckeditor.com/demo)查看演示

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T20:28:28.930

[TinyMCE](http://www.tinymce.com/)与[MCImageManager](http://www.tinymce.com/enterprise/mcimagemanager.php)插件相结合是一个不错的选择。不过我有偏见，因为我认为 TinyMCE 很棒（一方面，它非常容易集成）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T20:28:51.487

你去买小 mce。它有一个图片上传插件，你必须从他们那里购买。我认为您不会获得任何具有免费图像上传功能的编辑器。

# java - Java 数组 binarySearch

> ID：10488621
> 
> 赞同：2
> 
> 时间：2012-05-07T20:26:11.480
> 
> 标签：java, arrays, binary-search

好的，伙计们，这是我的一段简单代码，我在其中构建了一个字符串数组并尝试在该数组中搜索一个字符串：

```
String[] arr = new String[5];
arr[0] = "ccc";
arr[1] = "aaa";
arr[2] = "bbb";
arr[3] = "eee";
arr[4] = "ddd";

System.out.println(Arrays.binarySearch(arr,"eee")); 
```

直接取自 Java 6 binarySearch 文档：“在进行此调用之前必须对数组进行排序。如果未排序，则结果未定义”！

实际上，我多次运行我的代码，输出总是 3，这是我的未排序数组中 eee 的位置，但结果似乎不是“未定义”，如文档所述。

我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T20:28:21.423

“未定义”并不意味着“肯定会给你错误的结果”，或者“肯定会崩溃”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T20:30:56.267

当我们谈论一段代码的行为时，术语“未定义”意味着程序执行可以做以下任何事情：

*   返回错误答案
*   永远循环
*   立即崩溃
*   损坏一些数据并在很久以后导致崩溃
*   做一些意外的事情（例如擦除你的硬盘）
*   幸运并返回正确答案

作为对程序员的建议，**不要调用未定义的行为**，因为任何事情都可能发生，无论好坏，现在或以后。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-07T20:28:12.083

您错过了“结果未定义”包括“正确”答案的可能性，就像在这种情况下一样。

如果您将 arr[1] 更改为“eee”，您将看到不同的结果。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-07T20:28:33.643

许多机构、书籍、教授等定义的二进制搜索要求元素以字母或数字方式排序。

```
import java.util.Arrays;

public class Main {
  public static void main(String[] args) {
    String[] arr = new String[6];
    arr[0] = "ccc";
    arr[1] = "aaa";
    arr[2] = "bbb";
    arr[3] = "eee";
    arr[4] = "ddd";
    arr[5] = "aaa";
    System.out.println(Arrays.toString(arr));
    System.out.println("\"eee\" was found at index: " + Arrays.binarySearch(arr, "eee"));
    Arrays.sort(arr);
    System.out.println(Arrays.toString(arr));
    System.out.println("\"eee\" was found at index: " + Arrays.binarySearch(arr, "eee"));
  }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-07T20:32:08.883

“未定义”意味着算法将在您的数组上运行，但不能保证结果是正确的（二分搜索强烈需要排序数组才能工作）。您的示例有效，因为这就是发生的情况：

*   输入二分搜索，第一个 = 0，最后一个 = 4，中间 = 2 比较
*   数组[中间] 与 "eee" ("bbb"<"eee") => first = 2 + 1; 中间= 3；
*   将 array[middle] 与 "eee" => "found" 进行比较；返回 3；

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-07T20:28:51.337

添加到esej的答案，这是您的程序的修改，它返回错误的答案：

```
public class Main {
    public static void main(String[] args) {
        String[] arr = new String[6];
        arr[0] = "ccc";
        arr[1] = "aaa";
        arr[2] = "bbb";
        arr[3] = "eee";
        arr[4] = "ddd";
        arr[5] = "aaa";

        System.out.println(Arrays.binarySearch(arr, "eee"));
    }
} 
```

# xml - 如何在 Visual Studio 项目文件执行批处理脚本代码中编写“或”代码

> ID：10488628
> 
> 赞同：0
> 
> 时间：2012-05-07T20:27:04.030
> 
> 标签：xml, visual-studio-2010, batch-processing

我正在使用 Visual Studio 项目文件，我需要修改 AfterBuild 块中的 Exec 命令，以便从“移动”命令中排除两个文件。具体来说，我正在尝试修改：

```
<Exec WorkingDirectory="$(_MyOutputDir)" Command="for /r %%i in (*) do if not &quot;%%~nxi&quot;==&quot;Sync Utility.exe.manifest&quot; move &quot;%%i&quot; &quot;%%i.deploy&quot;" IgnoreExitCode="true" /> 
```

做这样的事情：

```
<Exec WorkingDirectory="$(_MyOutputDir)" Command="for /r %%i in (*) do if not &quot;%%~nxi&quot;==&quot;Sync Utility.exe.manifest&quot; OR &quot;%%~nxi&quot;==&quot;Sync Utility.application&quot; move &quot;%%i&quot; &quot;%%i.deploy&quot;" IgnoreExitCode="true" /> 
```

我在“或”部分遇到错误。我试过用“或者如果不是”和“而不是”来代替它，但没有运气（在这里抓住稻草）。一位同事告诉我这是某种批处理文件脚本，但我对此完全不熟悉，因此任何可以帮助我更好地理解这一点的外部资源链接也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T02:39:48.227

尝试替换`OR`为`if not`. 这将创建一个嵌套的`if`，逻辑上等价于“and not”。

# html - 有没有办法以编程方式确定用户是从 YouTube 获取 Flash 视频还是原生视频

> ID：10488636
> 
> 赞同：2
> 
> 时间：2012-05-07T20:27:40.143
> 
> 标签：html, video, youtube

我正在尝试更深入地回答[我自己关于 YouTube 视频的无缝和沙盒的问题。](https://stackoverflow.com/questions/10324159/is-there-any-point-in-using-the-seamless-and-or-sandbox-attribute-for-youtube-if)工作已在[测试页面开始](http://keryx.se/dev/html5/sandboxed-seamless-youtube-test.html)

请注意，到目前为止，表单元素根本不起作用。

我想自动确定用户是否从 YouTube**获得Flash 或原生视频。**（**不是**用户可以获得的**。**）在正常情况下，我认为这“不关我的事”，而且由于安全限制，这可能是不可能的。

可能吗？如果是这样，怎么做？

# xml - 调用 TFS 2010 Web 服务

> ID：10488642
> 
> 赞同：0
> 
> 时间：2012-05-07T20:28:11.787
> 
> 标签：xml, web-services, soap, tfs

我想更改在 TFS Warehouse 和 TFS Cube 上生成报告之间的时间间隔，使用[stackoverflow 上这篇文章中的过程。](https://stackoverflow.com/questions/2825706/how-can-i-change-the-time-interval-for-the-generation-of-reports-in-tfs-2010)

但是，我似乎没有方便的对话框和“调用”命令能够对 TFS 服务器进行更改，相反，我看到了这个：

> POST /tfs/TeamFoundation/Administration/v3.0/WarehouseControlService.asmx HTTP/1.1 主机：内容类型：application/soap+xml；charset=utf-8 内容长度：长度

```
<?xml version="1.0" encoding="utf-8"?>
<soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">
  <soap12:Body>
    <ChangeSetting xmlns="http://schemas.microsoft.com/TeamFoundation/2005/06/Services/Controller/03">
      <settingId>string</settingId>
      <newValue>string</newValue>
    </ChangeSetting>
  </soap12:Body>
</soap12:Envelope> 
```

是我没有必要的权限来应用更改，还是需要更改 TFS 的设置以便我可以调用 Web 服务？无论如何，我需要知道如何调用 TFS Web 服务。

**编辑** 我发现我没有更改所需参数所需的权限：

> 错误：拒绝访问：[...] 需要对资源仓库的以下权限才能执行此操作：管理仓库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:38:43.773

我使用 Neno Loje 的两个工具来完成这个场景。

*   [http://msmvps.com/blogs/vstsblog/archive/2011/03/18/refresh-tfs-warehouse-cube-and-reports-on-demand.aspx](http://msmvps.com/blogs/vstsblog/archive/2011/03/18/refresh-tfs-warehouse-cube-and-reports-on-demand.aspx)
*   [http://msmvps.com/blogs/vstsblog/archive/2011/06/13/how-to-change-update-frequency-of-the-tfs-warehouse-cube.aspx](http://msmvps.com/blogs/vstsblog/archive/2011/06/13/how-to-change-update-frequency-of-the-tfs-warehouse-cube.aspx)

但是，您确实需要具有适当的权限。

# git - 我不能 git rebase --interactive 了

> ID：10488655
> 
> 赞同：9
> 
> 时间：2012-05-07T20:28:54.207
> 
> 标签：git, git-rebase

`git rebase --interactive`我在我的回购中尝试做一个严重的问题。我得到了神秘的错误`fatal: ref HEAD is not a symbolic ref`，我的 rebase 不再起作用。我必须`git rebase --abort`回到一个好的状态。

这是我收到的输出：[https ://gist.github.com/d38f1e2d2ec9bc480b6f](https://gist.github.com/d38f1e2d2ec9bc480b6f)

过去有人告诉我这是因为我处于“分离 HEAD”模式，但是如果我处于那种模式，我将如何进入 rebase？我肯定是从 开始`master`，然后运行`git rebase --interactive`​​git-rebase-todo 文本文件并将其修改为我想要的。然后发生此错误。

我已经问过这里工作的每个人，还有一些人在 freenode 上@#git。似乎没有人真正理解我的问题或知道解决方案是什么。谷歌搜索该错误没有产生任何结果，StackOverflow 上的相关搜索也没有任何结果。我似乎无法弄清楚这一点，从压缩我推送到 master 的每一个提交到现在将我所做的每一个小更改都推送为它自己的单独提交，这真的很蹩脚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T17:03:14.510

在“git rebase”期间，您要重新设置基准的 ref 被签出。如果那个 ref 是一个提交，那么你会得到一个分离的头；如果它是一个分支引用，则该分支被签出。如果在提交过程中发生 FATAL，那么您的工作目录将处于 munged 状态。例如，如果你在分支 Foo 并且你试图从 Bar 变基，那么在 FATAL 之后，你将在 Bar 或 Bar 之后的某个地方，并应用了一些变基提交。您可以通过简单地检查 Foo 来恢复。

```
git rebase --abort 
```

或者，如果 rebase 真的被楔入（参见下面的参考资料），如：

```
git checkout -f Foo 
```

之后，您可以安全地再次尝试 rebase 以尝试调试 FATAL 发生的原因。 [这](https://stackoverflow.com/q/10167119/1286639)是内存不足时 rebase 失败并且 'git rebase --abort' 不起作用的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-26T10:22:18.670

`git rebase --abort`对我不起作用。尽管变基输出已经提供了解决方案：

```
fatal: It seems that there is already a rebase-merge directory, and
I wonder if you are in the middle of another rebase.  If that is the
case, please try
        git rebase (--continue | --abort | --skip)
If that is not the case, please
        rm -fr ".git/rebase-merge"
and run me again.  I am stopping in case you still have something
valuable there. 
```

即在运行后`rm -fr ".git/rebase-merge`，事情又恢复了正常。

# c++ - GTK TextView - 创建静态显示格式

> ID：10488656
> 
> 赞同：2
> 
> 时间：2012-05-07T20:29:03.657
> 
> 标签：c++, user-interface, gtk, gtkmm, gtktextview

我正在尝试模拟一个硬件，这个硬件有一个静态的功能区显示。

为此，我想使用 TextView。我的显示器有 10 行，25 列。所以我认为 TextView 应该很容易。

基本上，我想说*“在 X 行插入/替换字符串 S，从 Y 列开始”*。我可能只需要更新特定的行，甚至是一行中的一列。

不过，我还没有成功地让它发挥作用。我能做的最好的事情是在创建 TextView 时用 10 行 25 个空格填充它，然后使用`get_iter_at_line_offset`获取一行的迭代器，然后将新文本推送到该行上。

但这将开始将文本附加到该行，而不是替换现有的。

我需要行和列控制（即需要能够在特定（X，Y）坐标处设置文本）。

我假设这在某种程度上可以使用标记。

谁能给我一个简单的例子来说明我如何做到这一点？不幸的是，关于这类事情的文档并不多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:30:25.410

您必须在特定的行 X 行获取一个迭代器，然后使用迭代器的`forward_chars()`方法向前移动 Y 个字符。然后删除你要替换的字符数，最后插入你要插入的文字。我认为，您可以使用迭代器来完成这一切 - 当您更改缓冲区时，迭代器会失效，但是当您删除文本时，您的迭代器之一会重新验证以指向文本所在的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:54:14.960

如果您的目标是 GTK+ 3.x，您应该真正考虑使用 Cairo。由于您实际上并不需要文本缓冲区，因此使用 GtkTextView 似乎有点矫枉过正并且有点错位。

查看关于如何[在 GTK+ 中使用 Cairo 绘图](http://developer.gnome.org/gtk3/stable/gtk-migrating-2-to-3.html#id1485153)的非常基本的介绍。然后看看[文本渲染 Cairo APIs](http://cairographics.org/manual/cairo-text.html)，这应该足以让您入门。

# javascript - 将变量添加到 .js 文件

> ID：10488662
> 
> 赞同：1
> 
> 时间：2012-05-07T20:29:40.880
> 
> 标签：javascript, jquery

我正在寻找一种在外部 .js 文件中发布变量的方法。

就像是：

```
<script type="text/javascript" src="/js/script-starter.js?var=value"></script> 
```

然后我想调用 var （因此，值）。这有可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T20:31:30.243

是的，有可能。您必须使用[document.getElementsByTagName](https://developer.mozilla.org/en/DOM/document.getElementsByTagName)`script`函数查找 DOM 中的所有标签（确保在尝试查找之前已加载 DOM），遍历结果列表，找到相应的脚本并解析属性以提取您正在寻找的价值。`src`

类似于以下内容：

```
var scripts = ​document.getElementsByTagName('script');
​for (var i = 0; i < scripts.length; i++)​ {
    var src = scripts[i].src;
    // Now that you know the src you could test whether this is the script
    // that you are looking for (i.e. does it contain the script-starter.js string)
    // and if it does parse it.
}​ 
```

就`src`属性的解析和从中提取查询字符串值而言，您可以使用[以下函数](https://stackoverflow.com/a/901144/29407)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T20:32:05.717

如果该脚本是接收查询字符串中的变量并返回 javascript 代码作为输出的服务器端脚本，则它可能是可能的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T20:33:48.450

如何在脚本文件加载之前声明变量：

```
<script type="text/javascript">var myVar = "Value"</script>
<script type="text/javascript" src="/js/script-starter.js"></script> 
```

所以你可以在你的脚本中使用这个变量。这可能是最简单的方法之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T20:33:58.057

为什么不将变量放在隐藏的 a 或 p 中

```
<a id="myHiddenVar" style="display:none;">variables</a> 
```

然后在您的 .js 中使用

```
var obj = document.getElementById("myHiddenVar").innerHTML; 
```

或 jQuery 风格

```
var obj = $("#myHiddenVar").text(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T20:52:11.150

```
function getJSPassedVars(script_name, varName) {
    var scripts = $('script'),
        res = null;

    $.each(scripts, function() {
        var src = this.src;
        if(src.indexOf(script_name) >= 0) {
            varName = varName.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
            var string = new RegExp("[\\?&]"+ varName +"=([^&#]*)"),
                args = string.exec(src);
            if(!args.length) { 
                res = null; 
            } else { 
                res = args[1]; 
            }
        }
    });
    return res;
}

console.log(getJSPassedVars('script-starter.js', 'var')); 
```

就我而言，我的应用程序文件夹结构如下：

```
MyApp/
     index.html
     jquery.js
     my.js 
```

上述函数在`my.js`with内`console.log`并将其包含在`index.html`.

# javascript - Jquery 在萤火虫中工作，但在页面中不工作

> ID：10488680
> 
> 赞同：0
> 
> 时间：2012-05-07T20:30:40.287
> 
> 标签：javascript, jquery, asp.net

我对 JQuery 编程很陌生，需要一些帮助！

我有一个 ASP.NET 数据透视表，并且该表的单元格中有一个 #revarious 值 1、2、3 或 4。无论选择哪个值，都会将单元格变为四种颜色之一。现在代码在萤火虫中工作但不起作用，当我把它放在我的页面标题的标签中时。

我究竟做错了什么？

```
<script type="text/javascript" src="../../../Scripts/jquery-1.6.1.min.js">

    $(document).ready(function () {

        $(".myGridView1 tr").each(function () {

            $("td").filter(function () { return $.text([this]) == '1'; }).css('background', 'green');

            $("td").filter(function () { return $.text([this]) == '2'; }).css('background', 'orange');

            $("td").filter(function () { return $.text([this]) == '3'; }).css('background', 'red');

            $("td").filter(function () { return $.text([this]) == '4'; }).css('background', 'blue');

        });

    });

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:34:16.157

每个脚本都需要自己的标签，如下所示：

```
<script type="text/javascript" src="../../../Scripts/jquery-1.6.1.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $(".myGridView1 tr").each(function() {
        $("td").filter(function() {
            return $.text([this]) == '1';
        }).css('background', 'green');

        $("td").filter(function() {
            return $.text([this]) == '2';
        }).css('background', 'orange');

        $("td").filter(function() {
            return $.text([this]) == '3';
        }).css('background', 'red');

        $("td").filter(function() {
            return $.text([this]) == '4';
        }).css('background', 'blue');

    });
});​
</script> 
```

原因是 Javascript 被加载到指定标记处的 html 中（如果您指定了 URL），并且据我所知，它将覆盖当前脚本标记内的内容。因此，如果您在`<script>`带有 URL 集的标签内有任何内容，它将被覆盖，因此不会执行。

此外，它是 Javascript 编程，而不是 jQuery 编程。jQuery 是一个与 Javascript 一起使用的库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T20:41:25.417

如果属性存在，`script`则忽略a 的内容。`src`换句话说，您需要两个`script`标签：一个包含 jQuery，另一个用于您的代码。您还需要做比您需要做的更多的工作：

```
$(function () {
   $(".myGridView1 tr td:contains(1)").css('background', 'green');
...
}); 
```

您可能可以进一步巩固它。只是一些注意事项：

`$.text([this])`与`$(this).text()`..没有太大区别。后者是首选。

你`.each`是没有意义的，因为`$("td")`选择器对整个文档进行操作。如果你真的想使用`.each`选择器作为上下文，你可以这样做`$("td", this)`。不过，我认为甚至没有必要使用`.each`。这只是一个额外的函数调用。

最后，您可以将`:contains`选择器用于您尝试使用`.filter`. 与选择器相比，我认为没有太多理由使用`.filter`选择器，除非该`.filter`方法非常复杂或者您想将其用于链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T21:13:56.623

您不能在包含您的页面代码的同一标记中包含外部脚本。它需要是一个单独的空标签：

```
<script type="text/javascript" src="http://code.jquery.com/jquery.js"></script>
<script>
   // my script
</script> 
```

**另外，一些注意事项：**

该`.each()`函数在您的代码中不做任何事情，除了运行过滤器函数太多次。对于 each `tr`，您正在查看**every** `td`，而不仅仅是当前行中的那些。如果您取出`.each()`，代码仍然有效：

演示：http: [//jsfiddle.net/jtbowden/dgswh/](http://jsfiddle.net/jtbowden/dgswh/)

其次，不用过滤，只需将函数添加到您的`.css()`调用中：

```
var colors = {'1': 'green', '2': 'orange', '3': 'red', '4': 'blue' };

$("td").css('background-color', function(index, value) {
    var txt = $(this).text();
    if(colors.hasOwnProperty(txt)) {
        return colors[txt];
    }
    return value;
}); 
```

演示：http: [//jsfiddle.net/jtbowden/dgswh/2/](http://jsfiddle.net/jtbowden/dgswh/2/)

这将您的代码减少到一个调用，而不是 4 个（并且每个调用只运行一次`td`）。如果您想将其限制在该表中，请更改选择器：

```
$(".myGridView1 td").css('background-color', function(index, value) { ... }); 
```

**跟进**

要从`td`更改颜色后删除文本，您可以执行以下操作：

```
$("td").css('background-color', function(index, value) {
    var txt = $(this).text();
    $(this).text("");  // ADD THIS LINE
    if(colors.hasOwnProperty(txt)) {
        return colors[txt];
    }
    return value;
}); 
```

如果您只想删除`td`s 匹配的文本，请移动该行：

```
$("td").css('background-color', function(index, value) {
    var txt = $(this).text();
    if(colors.hasOwnProperty(txt)) {
        $(this).text("");  // MOVE TO HERE
        return colors[txt];
    }
    return value;
}); 
```

需要注意的是，如果没有一些样式，如果你清空一个表格单元格，它可能会折叠到零宽度，或者如果一行上的所有单元格都是空的，那么该行可能会折叠到零高度。如果是这种情况，请在 CSS 中添加`min-height`和`min-width`定义`td`，或更改`$(this).text("")`为`$(this).html('&nbsp;')`

演示：http: [//jsfiddle.net/jtbowden/dgswh/5/](http://jsfiddle.net/jtbowden/dgswh/5/)

如果你想保留数字，但不可见，你可以`td`用 hidden 或 invisible包装 的内容`div`：

```
$(this).wrapInner("<div style='visibility:hidden'>"); 
```

或者：

```
$(this).wrapInner("<div style='display:none'>"); 
```

演示：http: [//jsfiddle.net/jtbowden/dgswh/6/](http://jsfiddle.net/jtbowden/dgswh/6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T20:43:03.160

假设我们不是在谈论不正确的脚本标签，这里有一个解决方案：

CSS：

```
.td1 {background-color:green}
.td2 {background-color:orange}
etc

$(".myGridView1 td").each(function() {
   $(this).addClass('td' + $(this).text());

 }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T20:49:17.720

```
<script type="text/javascript" src="../../../Scripts/jquery-1.6.1.min.js"></script>
<script type="text/javascript">

    $(function(){

        $(".myGridView1 td").each(function () {

            var that = $(this)

            switch( that.text() ){

                  case '1': that.css('background', 'green');
                  break;

                  case '2': that.css('background', 'orange');
                  break;

                  case '3': that.css('background', 'red');
                  break;

                  case '4': that.css('background', 'blue');
                  break;
            } 

        });

    });
</script> 
```

只是我的2美分。您应该避免创建新`$`的 jQuery 对象（越少越好）并且过滤器也非常低效。这样每个 jQuery 对象创建一次，每个函数运行一次。

# python - Python中的跨列表理解

> ID：10488684
> 
> 赞同：2
> 
> 时间：2012-05-07T20:30:52.490
> 
> 标签：python, list-comprehension

假设我有两个字符串列表：

`a = ['####/boo', '####/baa', '####/bee', '####/bii', '####/buu']`

其中#### 表示 4 位随机数。和

`b = ['boo', 'aaa', 'bii']`

我需要知道 list 中的哪个字符串条目`a`包含`b`. 我能够通过几个嵌套循环来完成此操作，然后使用`in`运算符检查字符串是否包含 b 中的当前条目。但是，对于 py 来说相对较新，我几乎可以肯定这不是最 Pythonic 或最优雅的编写方式。那么，有没有这样的成语来减少我的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T20:34:47.310

以下代码为您提供了一个数组，`a`其中斜线后面的部分是来自 的元素的索引`b`。

```
a_sep = [x.split('/')[1] for x in a]
idxs = [i for i, x in enumerate(a_sep) if x in b] 
```

要提高性能，请创建`b`一个集合而不是列表。

演示：

```
>>> a = ['####/boo', '####/baa', '####/bee', '####/bii', '####/buu']
>>> b = ['boo', 'aaa', 'bii']
>>> a_sep = [x.split('/')[1] for x in a]
>>> idxs = [i for i, x in enumerate(a_sep) if x in b]
>>> idxs
[0, 3]
>>> [a[i] for i in idxs]
['####/boo', '####/bii'] 
```

* * *

如果您更喜欢直接获取元素而不是索引：

```
>>> a = ['####/boo', '####/baa', '####/bee', '####/bii', '####/buu']
>>> b = ['boo', 'aaa', 'bii']
>>> [x for x in a if x.split('/')[1] in b]
['####/boo', '####/bii'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T20:40:11.393

ThiefMaster 的回答很好，和我的会很相似，但是如果你不需要知道索引，你可以走捷径：

```
>>> a = ['####/boo', '####/baa', '####/bee', '####/bii', '####/buu']
>>> b = ['boo', 'aaa', 'bii']
>>> [x for x in a if x.split('/')[1] in b]
['####/boo', '####/bii'] 
```

同样，如果`b`是 a `set`，这将提高大量元素的性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T20:38:39.507

```
>>> [i for i in a for j in b if j in i]
['####/boo', '####/bii'] 
```

这应该做你想要的，优雅和pythonic。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T20:42:11.520

```
import random
a=[str(random.randint(1000,9999))+'/'+e for e in ['boo','baa','bee','bii','buu']]

b = ['boo', 'aaa', 'bii']

c=[x.split('/')[-1] for x in a if x.split('/')[-1] in b]

print c 
```

印刷：

```
['boo', 'bii'] 
```

或者，如果您想要整个条目：

```
print [x for x in a if x.split('/')[-1] in b] 
```

印刷：

```
['3768/boo', '9110/bii'] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-07T20:49:18.283

正如其他答案所表明的那样，您可以使用集合操作来加快速度。这是一种方法：

```
>>> a_dict = dict((item.split('/')[1], item) for item in a)
>>> common = set(a_dict) & set(b)
>>> [a_dict[i] for i in common]
['####/boo', '####/bii'] 
```

# c++ - OpenGL 相机 - 使用 SetCursorPos(x,y); 时移动相机而不回弹？

> ID：10488688
> 
> 赞同：4
> 
> 时间：2012-05-07T20:31:06.433
> 
> 标签：c++, opengl, camera, mousemove, glulookat

当我尝试更新我的相机时遇到问题。

我想通过鼠标更改相机的俯仰和偏航（它的外观）但我希望鼠标保持定位在窗口的中心。

```
//where MouseP.x .y is the mouse position 
//(which is centered to the current window)

//get old position of the mouse
OldP.x = MouseP.x;
OldP.y = MouseP.y;

//work out the distance traveled
Delta.x = MouseP.x - OldP.x;
Delta.y = MouseP.y - OldP.y;

//update the camera(using  distance traveled)
Rot.Yaw -=Delta.x/5;
Rot.Pitch -= Delta.y/5;

//move mouse to the center of the screen
SetCursorPos(CENTER_SCREEN_X,CENTER_SCREEN_Y); 
```

问题是当鼠标设置为返回原点时，相机会快速返回到某个点。

我想通过从原点行进的距离而不是返回原点的距离来更新相机。

如果我把它拿出来，它会很好地工作，但当时的鼠标可能会离开窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:19:53.160

必须小心光标和 3D 鼠标移动。人们倾向于认为它是相关的，但实际上并非如此。阅读来自 msdn 的文章：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ee418864%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ee418864%28v=vs.85%29.aspx) “利用高清鼠标移动”这是如何在 3D 应用程序中获得鼠标输入。光标应该被隐藏。

如果您尝试将其重新居中，则会产生一种可怕的锯齿感，其中光标试图在用户移动鼠标时逃离中心，但被一个看不见的弹簧保持在原位。这看起来不是很专业。您无法抗拒，因为您的应用程序未在鼠标光标显示之前安排。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T20:43:39.817

我相信这里的问题是您的代码块可能在`WM_MOUSEMOVE`事件的捕获中？

当您调用 时`SetCursorPos`，它本身会生成另一个`WM_MOUSEMOVE`事件，因此您在移动鼠标时处理该代码块一次，并在您调用时再次`SetCursorPos`处理它，它的作用与此相反。

您可能不想将`SetCursorPos`WM_MOUSEMOVE 事件捕获放在内部，否则您将生成一个无限循环的消息（每个都会`SetCursorPos`生成另一个消息）。

也许您可以将此代码移到消息泵之外，并在更新循环中每帧运行一次：查询当前鼠标位置，进行相机变换，然后将光标设置回原点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-08T00:26:39.590

```
if(g_States::Instance().MouseLook())
{
    //Test the mouse input
    POINT mousePos;
    GetCursorPos(&mousePos);

    mouseX = mousePos.x; //g_InputEngine::Instance().GetX();
    mouseY = mousePos.y; //g_InputEngine::Instance().GetY();

    mouseX = mouseX - m_HalfWidth;
    mouseY = mouseY - m_HalfHeight;

    mouseFloat = mouseX * C_MOUSESMOOTHINGFACTOR;
    g_Scene::Instance().GetCamera()->RotateYaw(-mouseFloat);

    mouseFloat = mouseY * C_MOUSESMOOTHINGFACTOR;
    g_Scene::Instance().GetCamera()->RotatePitch(mouseFloat);

    //Reset mouse to center on the screen
    SetCursorPos(m_HalfWidth,m_HalfHeight);
} 
```

所以这是我之前为了好玩而开发的一个太空游戏原型的 Mouselook 功能，我所做的就是改变它来使用它`GetCursorPos(&mousePos);`。无论您的输入代码何时更新鼠标光标位置，这都会获取光标的当前位置。函数中的其余数学仅用于灵敏度和实际旋转相机。希望这段代码能帮助你的工作。

如果您需要更多解释，请告诉我。

编辑：我只记得我这样做的原因。这是因为屏幕闪烁它会移动，但是输入引擎会通过`SetCursorPos()`调用更新，因为我正在使用 WM_MOUSEMOVE 来更新输入引擎。我不确定您是如何获得您的意见的，但这仍然应该对您有所帮助。

# ios - 同时缩放和移动 UIScrollView

> ID：10488689
> 
> 赞同：1
> 
> 时间：2012-05-07T20:31:14.610
> 
> 标签：ios, uiscrollview, zooming

我有一个 UIScrollView 占据了屏幕的一部分，它的基本功能（滚动和缩放）工作得很好。例如，我可以用两根手指抓住滚动视图，左右滚动，同时放大或缩小内容。

我想添加同时上下移动 UIScrollView 的功能。请注意，我不想移动滚动视图的**内容**，而是移动滚动视图本身。

我试图向 UIScrollView 添加一个 UIPinchGestureRecognizer ，它允许我抓取和移动滚动视图，但随后我失去了缩放和滚动。似乎添加手势识别器会使所有默认操作停止（此外，当我调用 setZoomScale 时，我得到一个 EXC_BAD_ACCESS）。

我也考虑过检查触摸，但 UIScrollView 上的触摸未注册到主视图，因此我无法使用这些值更改其位置。

有人对如何实现这一点有任何建议吗？

# trigger.io - 有没有办法为 trigger.io 构建原生插件？

> ID：10488698
> 
> 赞同：7
> 
> 时间：2012-05-07T20:32:01.007
> 
> 标签：trigger.io

我有兴趣为 trigger.io 编写本机插件。这是否已经可能或在路线图上？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T14:02:37.907

它肯定在路线图上：我们从一开始就不允许这样做的主要原因是我们最初的主要重点是创建一个尽可能平稳和快速的开发周期。

我们正在接近我们 - 以及我们的用户 - 对工具非常满意的地步，现在是评估允许原生插件的最佳方式的时候了。

我们的主要目标始终是让移动开发像 Web 开发一样简单，所以我不会让原生插件降低对它们不感兴趣的用户的体验。然而，我们确实意识到它们是一个重要的工具，我们期待着扩展我们的平台以允许它们。

**更新**：我们已经为 Forge 推出了一个测试版的自定义插件 - 请参阅[http://current-docs.trigger.io/modules/native/index.html](http://current-docs.trigger.io/modules/native/index.html)

# c# - 如何使这个类可反序列化

> ID：10488702
> 
> 赞同：1
> 
> 时间：2012-05-07T20:32:10.617
> 
> 标签：c#, serialization, deserialization

我有一些从一个看起来像这样的服务中获得的 xml

```
<Pools>
    <Pool Code="WN" Name="Win" /> 
    <Pool Code="PL" Name="Place" /> 
    <Pool Code="SH" Name="Show" /> 
    <Pool Code="EX" Name="Exacta" /> 
    <Pool Code="PE" Name="Perfecta (Exacta)" /> 
</Pools> 
```

我想将其反序列化为以下类

```
public class Pools : List<Pool>
{
    public Pools() { }
public Pools(int capacity) : base(capacity){ }
}

public class Pool
{
    [XmlAttribute("Code")]
    public string Code { get; set; }
    [XmlAttribute("Name")]
    public string Name { get; set; }

    public Pool() {}

    public Pool(string code, string name)
    {
        Code = code;
        Name = name;
    }
} 
```

但它一直在失败，我不确定我做错了什么......我觉得这是 Pools 类的问题，但我不确定应用什么来使它工作

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:39:42.613

反过来做，你会很快发现问题。您的 Pools 类需要 [XmlRoot] 属性以确保元素名称不是“ArrayOfPools”。

```
[XmlRoot("Pools")]
public class Pools : List<Pool> {
   // etc...
} 
```

# php - 结果无法转换为 JSON 数组

> ID：10488708
> 
> 赞同：1
> 
> 时间：2012-05-07T20:32:52.393
> 
> 标签：php, android, json

我正在尝试从我的 android 应用程序中的 MYSQL 数据库返回数据，但是当我运行应用程序时，返回的结果无法转换为 JSON 数组“发生异常说 JSONException：java.lang.String 类型的值无法转换为 JSONArray "

我确保 php 脚本以 JSON 格式返回数据，并且在解析它之前的结果不是 null，它保存返回的数据。为什么会发生此异常以及如何解决？请帮我

**这是我的代码：**

```
 private class LoadData extends AsyncTask<Void, Void, String> { 

 private String result = "";
 private InputStream is = null;

 private ProgressDialog progressDialog;

protected void onPreExecute() 
{
       this.progressDialog = ProgressDialog.show(AddFood.this, "","Loading......");  
}

@Override
            protected String  doInBackground(Void... params)
            {
                 MealActivity.foodList = new ArrayList<ItemInList>();     

   try
   {
          ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
         nameValuePairs.add(new BasicNameValuePair("Name",entered_food_Name));
         HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://10.0.2.2/food.php");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs,"UTF-8"));
       HttpResponse response = httpclient.execute(httppost);
       HttpEntity entity = response.getEntity();
      is = entity.getContent();
       }
   catch(Exception e)
    {
        Log.e("log_tag", "Error in http connection "+e.toString());
      }
//convert response to string
   try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"utf-8"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
        }
        is.close();
        result=sb.toString();
        }
        catch(Exception e){
        Log.e("log_tag", "Error converting result "+e.toString());
        }
   Log.e("log_tag",result+ "result");
    return result;
    }

@Override
protected void onPostExecute(String  result) 
                   {
                              this.progressDialog.dismiss();

    try{
         Log.e("log_tag", " result before parsing " + result);

         String foodName="";
         int Description=0;

         JSONArray jArray = new JSONArray(result);
            JSONObject json_data=null;
            for(int i=0;i<jArray.length();i++)
            {
                json_data = jArray.getJSONObject(i);

             foodName=json_data.getString("Name");
             Description=json_data.getInt("Calories");              
             item.setName(foodName);
             item.setDescription(Description);
             item.setSelected(false);
             MealActivity.foodList.add(item);   
                                                             }

                                                                 }
            catch(JSONException e){
                Log.e("log_tag", "parssing error " + e.toString());
            }   

    }} 
```

**这是 php 脚本：**

```
<?php

 $con1=mysql_connect("localhost" , "user","pass" ) ;

 mysql_select_db("MYDB");
 mysql_query("SET NAMES utf8"); 

 $sql=mysql_query("select  Name,Calories  from food where Name LIKE      '%".$_REQUEST['Name']."%' ");

while($row=mysql_fetch_assoc($sql))
$output[]=$row;
$data =json_encode($output);
print($data);
mysql_close();

  ?> 
```

**返回数据**

```
 E/log_tag(491):  result before parsing             [{"Name":"\u0627\u0641\u0648\u0643\u0627\u062f\u0648","Calories":"160"}] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T22:33:27.407

您可以使用以下方法使您的代码看起来更简单：

```
String jsonStr = EntityUtils.toString(entity, HTTP.UTF_8); 
```

从实体获取字符串。

'解析'和左大括号之间的这么长的差距看起来很可疑：'['，看起来里面有一些控制字符。这里有一些提示：

1.  确保您正在使用 ASCII 编码编写 php 文件，可能您的 HTML 编辑器在 .php 文件的开头添加了 BOM 标记。
2.  确保 <?php 和 ?> 标记之外没有字符
3.  要验证结果字符串中有哪些坏字符，请将它们作为字节输出到日志中，UTF-8 BOM 如下所示：0xEF,0xBB,0xBF

否则你的 json 解析看起来不错

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T07:10:34.720

```
$sql=mysql_query("select  Name as name,Calories as cal  from food where Name LIKE      '%".$_REQUEST['Name']."%' "); 
```

只需少量更改，您的问题就会得到解决。

```
while($row=mysql_fetch_assoc($sql))

$name=$row['name'];

$cal=$row['cal'];

$data1 =json_encode($name);

$data2=json_encode($cal);

print($data1);
print($data2); 
```

# c# - 向现有数据绑定数据网格视图添加一行

> ID：10488711
> 
> 赞同：0
> 
> 时间：2012-05-07T20:32:59.977
> 
> 标签：c#

在我的 Windows 应用程序中，我有一个工作代码组合框，当用户从组合框中选择一个工作代码时，它将从数据库中获取相应的数据，并将其显示在组合框下方的 datagridview 中。一切都很好，我能够加载与所选工作代码相对应的数据。

我使用了这个代码

```
public void loadcompljobcodecombobox()
{
    completedcobcodeadapterTableAdapter cmpltjbcd = new completedcobcodeadapterTableAdapter();
    cmpltjbcd.Connection = new OleDbConnection(Program.ConnStr);

    DataTable dt= cmpltjbcd.GetData(int.Parse(cmbcutcode.SelectedValue.ToString()));

    if (dt.Rows.Count > 0)
    {
       cmbjobcode.ValueMember = "jobpk";
       cmbjobcode.DisplayMember = "jobcode";

       txtcompanyname.Text = "companyname";
       cmbjobcode.DataSource = dt;
    }
    else 
    {
       MessageBox.Show("NO JobCode to be invoiced");
    }
}

private void cmbjobcode_SelectedValueChanged(object sender, EventArgs e)
{
    tbltoinvoicedtableTableAdapter tbltoinvce = new tbltoinvoicedtableTableAdapter();
    tbltoinvce.Connection = new OleDbConnection(Program.ConnStr);

    if (cmbjobcode.SelectedValue != null)
    {
       DataTable dt = tbltoinvce.GetDataBy(int.Parse(cmbjobcode.SelectedValue.ToString()));
       dataGridView1.DataSource = dt;
    }
} 
```

现在我的要求是用户必须能够一次选择多个作业代码详细信息进行开票，即如果他从作业代码中选择一个值，则应将相应数据添加到 datagridview 中，当他选择另一个作业代码时，应将其相应数据添加为下一行在数据网格视图中。

我已经尝试了很多，但没有人能提出一个想法或例子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T21:12:36.167

如果我理解正确，我会尝试这样的事情。这未经测试，但这是一个想法。

在表单级别：

```
private BindingList<DataRow> jobList; 
```

然后添加到您当前的代码中......

```
private void cmbjobcode_SelectedValueChanged(object sender, EventArgs e)
   {
       tbltoinvoicedtableTableAdapter tbltoinvce = new tbltoinvoicedtableTableAdapter();
       tbltoinvce.Connection = new OleDbConnection(Program.ConnStr);
       if (cmbjobcode.SelectedValue != null)
       {
           DataRow job = tbltoinvce.GetDataBy(int.Parse(cmbjobcode.SelectedValue.ToString())).Rows[0];
           if (jobList == null)
           {
               jobList = new BindingList<DataRow>();
               jobList.Add(job);
               dataGridView1.DataSource = jobList;
           }
           else
           {
               if (!jobList.Contains(job));
                   jobList.Add(job);               
           }
       }
   } 
```

**编辑：这是假设您的工作数据仅包含一行数据，因为您的问题询问如何添加“一行”。

# performance - 升级后 asmx Web 服务变慢

> ID：10488712
> 
> 赞同：0
> 
> 时间：2012-05-07T20:33:02.893
> 
> 标签：performance, iis-7, iis-6

我正在将 C# asp.net asmx Web 服务从 ii6（32 位）转移到 Windows 2008 和 iis7（64 位）。我之前得到了大约 160 毫秒的近似 Web 方法执行时间。在 iis7 上，我现在得到了大约 320 毫秒，即使在将 web 方法减少到几乎没有要执行的代码之后也是如此。我意识到第一次调用有一个编译时间。这个时间是在大约 20 个电话之后，时间似乎已经稳定下来。

我想将运行 Web 方法的时间从 320 毫秒减少到 200 毫秒以下。这是为了帮助处理需要处理多个呼叫的情况。另一个问题是，当我在 1 秒内增加 20 个呼叫时，有时其中一个呼叫将需要大约 3 秒。这也是不可取的。

我尝试在发布模式下编译并从 web.config 中删除了调试编译。.asmx 文件只是引用要加载到 dll 二进制文件中的类。

不同的是，iis7 被配置为显示更详细的错误消息以帮助设置。但是，由于这只是发生错误时，我看不出它会如何减慢常规调用的速度。

我已经尝试过集成管道模式和经典管道模式，但仍然得到相似的时间。我还尝试将默认编译语言设置为 C#。我试过检查 ping 时间以确认它不是网络。IIS 从 Web 服务方法中有代码时就设置了一些数据库连接，但现在它基本上什么都不做，我不认为这应该是一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:37:23.700

仅供参考 - 问题不是 asmx、iis7、iis6、调试模式或管道模式。新的 IIS7 64 位服务器从内部 IP 地址开始，然后升级为公共 IP 地址。由于网络路由的差异，IP地址有所不同。IIS6 测试用例基于公共 ip。一旦我将公共 IP 用于 IIS7 服务器，时间就相当相似了。

# vim - 如何在 Vim 中永久显示当前文件的路径？

> ID：10488717
> 
> 赞同：94
> 
> 时间：2012-05-07T20:33:20.693
> 
> 标签：vim, vi

我知道`CTRL``g`显示您正在处理的当前文件。有没有办法修改我`.vimrc`的文件名/路径总是显示？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-05-07T20:35:16.590

在您的状态行中，添加一个`%F`以显示完整路径：

```
:help statusline

" Add full file path to your existing statusline
set statusline+=%F 
```

注意，`%F`将是完整路径。要获取相对于工作目录的路径，请使用`%f`.

如果您的状态行不可见，您可能首先需要将其配置为始终可见，通过`laststatus=2`

```
set laststatus=2 
```

查看`:help laststatus`选项的含义。通常，除非打开多个缓冲区，否则状态行可能会被隐藏或隐藏，但我发现一直使用这样的自定义非常有用，非常值得为它放弃一个屏幕行保留。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-11-13T06:32:27.037

设置 ls=2

在 vimrc 中添加它，您将始终在底部看到文件名。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-11-06T05:05:59.013

在使用 Vim 编辑文件时，我发现了两种在 gnome 终端的标题栏中显示文件路径的方法。

更简单（更好）的方法：将以下行添加到您的`~/.vimrc`：

```
set title 
```

这将在顶部显示：

```
filename.ext (~/path_to_directory_where_your_file_is/) - VIM 
```

更复杂的方法会显示绝对文件路径。在我最近写[的这篇博文中更详细地记录了](http://sampsonchen.com/2012/11/05/vim-tip-setting-file-name-in-the-title-bar-not-the-status-bar/)它。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-03-24T02:40:21.743

如果您使用的是[vim-airline](https://github.com/bling/vim-airline/ "vim 航空公司")，请输入`.vimrc`：

```
let g:airline_section_c = '%<%F%m %#__accent_red#%{airline#util#wrap(airline#parts#readonly(),0)}%#__restore__#' 
```

这是对航空公司默认值的修改，更改`%f`为`%F`。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-05-07T20:35:34.160

我发现获取我正在使用的文件的完整路径的唯一方法是：`:echo expand('%:p')`. 您可以根据需要重新映射 ctrl+g，但我个人不喜欢过多地偏离标准。我已经像这样映射了 F7：

```
map  <F7> <Esc>:echo expand('%:p')<Return> 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-11-17T08:42:47.087

我一直使用`:f`，但来自@MichaelBerkowski 的答案和链接太棒了！

`:f`显示路径、行数、修改状态、当前光标位置等...

我不知道，`CTRL``G`但它似乎大致相同。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-02-14T10:07:38.647

我认为状态栏非常强大和方便。开箱即用，它将显示文件名、光标位置和一些标志。但是你想和我一样，用文件的*完整路径替换**文件名*-part 。

 *因此，在编辑我`.vimrc`的状态行时，默认情况下可能看起来像这样：

```
.vimrc                                                        26,16           7% 
```

您可以通过以下方式查看状态行的设置：

```
:set statusline? 
```

但是，如果您没有进行任何更改并且没有模块更改，那么它将是空的。但是通过帮助部分 ( `:help statusline`) 中的示例，您会发现默认设置为：

```
:set statusline=%<%f\ %h%m%r%=%-14.(%l,%c%V%)\ %P 
```

因此，将其包含在您的`.vimrc`并更改`%f`为`%F`. 我还添加了文件类型标志 ( `%y`) 到我的状态行，因为我觉得它很方便。所以我得到的配置如下所示：

```
:set statusline=%<%F\ %h%m%r%y%=%-14.(%l,%c%V%)\ %P 
```

结果看起来像这样：

```
~/.vimrc [vim]                                                26,16           7% 
```

好读：

*   [文档](http://vimdoc.sourceforge.net/htmldoc/options.html#%27statusline%27)
*   [一本学习基础知识的好书](http://learnvimscriptthehardway.stevelosh.com/chapters/17.html)
*   [stackoverflow上有很多东西！](https://stackoverflow.com/search?q=[vim]+statusline)

*PS。我运行 vim 7.3*

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-02-13T00:27:49.370

如果您希望路径包含已解析的符号链接，请使用以下命令：

```
set statusline +=%{resolve(expand('%:p'))}\ %* 
```

要保留主目录的“~”缩写，包括`fnamemodify`

```
set statusline +=%{fnamemodify(resolve(expand('%:p')),':~')}\ %* 
```*

# puzzle - 生成所需难度的数独？

> ID：10488719
> 
> 赞同：8
> 
> 时间：2012-05-07T20:33:22.333
> 
> 标签：puzzle, sudoku

所以，我对数独谜题的生成做了相当多的阅读。据我所知，获得所需难度的数独谜题的标准方法是生成一个谜题，然后对其进行评分，然后重复进行，直到获得可接受的评分。这可以通过使用一些更复杂的求解模式（XY-wing、swordfish 等）通过回溯生成来细化，但这并不是我想要做的。

我想要做的，但一直找不到任何真正的资源，是从“难度值”（0-1.0 值，0 是最简单的，1.0 是最难的）生成一个谜题。

例如，我想创建一个难度适中的谜题，因此选择了值 0.675。现在使用该值，我希望能够生成一个中等难度的谜题。

有人知道这样的事情吗？或者也许有类似的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-24T15:31:44.763

添加另一个答案以即时生成所需难度的数独。

这意味着与其他方法不同，该算法**只运行一次**并返回与所需难度匹配的数独配置（**在一个范围内具有高概率或概率=1**）

生成（和评级）数独难度的各种解决方案都与[*基于人类的*技术和方法](http://www.learn-sudoku.com/basic-techniques.html)有关，这些技术和方法可以很*容易地*进行评级。

然后一个人（在生成数独配置后）用类人求解器**重新求解**数独，并根据求解器使用的技术（例如*对*、*x-wing*、*箭鱼*等）分配难度率。

**这种方法的问题** （以及我所拥有的用例的要求）

1.  为了生成具有给定难度的数独，使用以前的方法需要两次求解数独（一次使用基本算法，一次使用类人求解器）。

2.  **一个人必须（预先）生成许多数独游戏，这些数独游戏只有在被类人求解器解决后**才能被评为难度。因此，一个人无法即时生成所需的数独。

3.  类人求解器可能很复杂，并且在大多数情况下（如果不是全部）与 9x9 数独网格紧密耦合。所以不容易推广到其他数独（例如 4x4、16x16、6x6 等）

4.  类人技术的难度等级是非常主观的。例如为什么*x-wing*被认为比*隐藏单打*更难？（个人手动解决了许多困难的已出版数独难题，从未使用过此类技术）

使用了另一种方法，它具有以下好处：

1.  可以很好地推广到任意数独（9x9、4x4、6x6、16x16 等）
2.  具有所需难度的数独配置一次生成并即时生成
3.  难度等级是客观的。

**这个怎么运作？**

首先，一个简单的事实是，**谜题越难，需要解决的时间就越多**。

但是要解决的时间与线索（给定）的数量和每个空单元格要研究的平均替代方案密切相关。

扩展我[之前的回答](https://stackoverflow.com/a/25110517/3591273)，有人提到，对于任何数独游戏，线索的最小数量是谜题的客观属性（例如[**，对于 9x9 网格，拥有有效数独的最小线索数是 17**](http://arxiv.org/abs/1201.0749)）

可以从那里开始计算每个难度级别的最小线索数（线性相关）。

此外，在数独生成过程的每个步骤中，可以确保每个空单元格的平均备选方案（待研究）在给定范围内（作为所需难度的函数）

根据算法是否使用回溯（对于讨论的用例，算法不回溯），可以通过概率=1 或在界限内（分别）以高概率达到所需的难度。

使用该算法生成的数独测试和基于先前方法（类人求解器）的难度评级，显示了期望和估计的难度率之间的相关性，以及对任意数独配置的更大泛化能力。

（已经使用这个在线[数独求解器](http://www.sudoku-solutions.com/)（以及[这个](http://www.stolaf.edu/people/hansonr/sudoku/analyst.htm)）来关联测试数独的难度）

该代码可[在 github sudoku.js 上免费获得（连同示例演示应用程序）](https://github.com/foo123/sudoku.js)，CrossWord.js 的缩小版本，是同一作者的 JavaScript 专业填字游戏生成器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-04T01:02:05.513

数独难度以一种有趣的方式与为给定网格指定唯一解决方案所需的（最小）信息量相关联。

听起来像信息论，是的，它在这里也有应用。

数独谜题应该有一个独特的解决方案。此外，数独谜题具有某些对称性，即按行、按列和按子方格。

这些对称性指定了所需的最小线索数量（以及它们或多或少的位置），以便解决方案是唯一的（即使用数独编译器或回溯搜索之类的算法）。

这将是最困难/最难的数独难题级别（即最少需要的线索数）。然后通过允许比所需的最小数量更多的线索来生成所有其他难度级别，从不太难到容易。

应该注意的是，数独难度级别**不是标准**的，如上所述，一个人可以根据需要设置多少难度级别。标准是线索的最小数量（和位置）（这是最难的级别，并且与数独对称性相关），然后可以通过允许额外/冗余线索可见来生成任意多的难度级别也是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T14:48:45.323

它不像你问的那么优雅，但你可以用缓存来模拟这种行为：

1.  决定你想要多少个“桶”来拼图。例如，假设您选择 20。因此，您的存储桶将包含不同难度范围的谜题：0-.05、.05-.1、.1-.15、..、.9-.95、.95- 1
2.  生成一个谜题
3.  为拼图评分
4.  放入合适的桶中（或桶满时扔掉）
5.  重复直到你的桶被“填满”。存储桶的大小及其存储位置将取决于您的应用程序的需求。

然后，当用户请求某个难度拼图时，从他们选择的存储桶中给他们一个缓存的拼图。您可能还想考虑交换数字并改变已知难度的谜题的方向，以生成具有相同难度级别的类似谜题。然后，当您需要用新的谜题重新装满您的水桶时，根据需要重复上述操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T15:08:58.370

好吧，在你知道如何解决它之前，你不可能知道它有多复杂。并且数独求解（因此也包括难度等级）属于[NP-C 复杂性类](http://en.wikipedia.org/wiki/NP-complete)，这意味着（很可能）在逻辑上不可能找到一个（渐近地）比所提出的随机猜测和检查更快的算法。

但是，如果你能找到一个，你已经解决了[P 与 NP 的问题，并且应该为](http://en.wikipedia.org/wiki/P_versus_NP_problem)[菲尔兹奖牌](http://en.wikipedia.org/wiki/Fields_Medal)清理一个橱柜...... :)

# sql - SQL根据百分比分配随机数

> ID：10488720
> 
> 赞同：1
> 
> 时间：2012-05-07T20:33:24.673
> 
> 标签：sql, oracle, oracle10g

我有一个带有 userId 和用户名的表。我想根据百分比为每一行分配随机数。例如：我想为每一行分配 6、7、8。但是 50% 的记录应该分配 6 个。45% 的行应分配 7 个，其余 5% 的行应分配 8 个。

有没有办法在 SQL 中做到这一点？

输出应该是用户 ID、用户名、随机数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T21:00:06.890

如果 PL/SQL 是一个选项：

```
DECLARE
  RAND number := dbms_random.value;
BEGIN
  IF RAND <= 0.50 THEN
     RAND := 6;
  ELSIF RAND <= 0.95 THEN
     RAND := 7;
  ELSE
     RAND := 8;
  END IF;
  dbms_output.put_line(RAND); -- this line can be changed by the 'insert'
END; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T20:44:47.093

```
 select userid, username, case cast (dbms_random.value(0, 20) as int) 
    when 0 then 6
    when 1 then 6
    when 2 then 6
    when 3 then 6
    when 4 then 6
    when 5 then 6
    when 6 then 6
    when 7 then 6
    when 8 then 6
    when 9 then 6
    when 10 then 7
    when 11 then 7
    when 12 then 7
    when 13 then 7
    when 14 then 7
    when 15 then 7
    when 16 then 7
    when 17 then 7
    when 18 then 7
    when 19 then 8
    else -1 -- should never happen
 end as "RANDOM" 
   from mytable; 
```

因为这些值是随机生成的，所以这不会准确地给你 50/45/5 的比率，但如果你有大量的行应该接近它（并且随机数函数很好）

另一种方法是对`order by random`行分配 6 到前 50%，7 到下一个 45%，8 到其余部分。这将确保您拥有正确的比率：

```
with myset as (
    select userid, username
    from my_user_table
    order by dbms_random.value(0,1)
)
select * from
(
    select 
        userid, 
        username, 
        case when rownum <= (select count(*) from myset) * 0.50 then 6
            when rownum <= (select count(*) from myset) * 0.95 then 7
            else 8 
          end as random
    from myset) t
order by t.userid; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T20:41:30.143

我发现分配随机数的最佳方法是通过伪随机数生成器：

1.  枚举每一行
2.  计算公式以获得伪随机数
3.  使用它来选择合适的范围

对于您的情况：

```
SELECT t.*, 
       ( CASE 
           WHEN Mod(rownum * 71 + 107, 257) < .5 * 257 THEN 6 
           WHEN Mod(rownum * 63 + 107, 257) BETWEEN 0.5 * 257 AND 0.95 * 257 
         THEN 7 
           ELSE 8 
         END ) AS val 
FROM   (SELECT t.*, 
               Row_number() 
                 OVER ( 
                   partition BY NULL) AS rownum 
        FROM   t) t 
```

这个想法是，乘以一个素数，加上另一个素数，然后通过三分之一取余数是随机数的一个很好的近似值。不完美，但对于大多数用途来说已经足够了。

此外，这里的百分比是近似值。

# mysql - 简单的更新函数 MySQL

> ID：10488721
> 
> 赞同：0
> 
> 时间：2012-05-07T20:33:33.363
> 
> 标签：mysql, coldfusion

我有一个用 ColdFusion 9 编码的 CMS，它具有基本的登录功能，可以与我正在使用的套接字服务器一起使用。最近我设置了一个带付款的“VIP”订阅，但后来我意识到，2 个月过去了，我没有 SQL 来删除订阅。这是我的基本要求；`date_purchased`如果时间戳值为2 个月，我需要一些 SQL 来自动执行。它需要删除`vip_purchases`会话用户（仅限用户）的行，并将列更新`vip`为`0`in `users`。

我只需要为会话用户名执行此操作，并且仅当时间戳为 2 周时，并且仅当 VIP 中的值为`1`. 我的思路是：

```
update users set vip = 0 where username = session.username if vip = 1 if date_purchased = 2 months old 
```

我意识到这不是 SQL，那只是为了让它更清楚一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:44:43.637

关闭。:)

```
UPDATE users
SET vip = 0
WHERE username = sessionname 
AND vip = 1 
AND date_purchased <= (today - number of days wanted) 
```

您需要用您想要的任何时间范围条件替换`WHERE`（部分）的最后一部分；`today -`您的帖子令人困惑，因为它提到`2 weeks old`并且`2 months old`在相同的上下文中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:25:04.457

如果您计划通过 Coldfusion（而不是 MySQL 数据库内部）运行此重复执行的任务，则应通过 Coldfusion 管理员设置计划任务。该任务可以每天启动一次脚本来清理所有旧帐户。

确定后，您可以创建包含任务的 .cfm 或 .cfc 文件。

这可以是一个包含 cfquery 或 cfstoredproc 的简单文件，具体取决于您希望逻辑运行的位置。cfquery 将在 Coldfusion 中的 Web 服务器上运行逻辑，cfstoredproc 将要求数据库服务器在数据库服务器上运行 MySQL 逻辑。最好将其作为存储过程运行。

在这种情况下，您甚至不需要检查用户名。只需 SELECT 然后循环并更新 vip = 1 且 date_purchased 已过期的所有用户。

# magento - 对前端和管理路由器使用相同的 Magento 路由名称

> ID：10488730
> 
> 赞同：7
> 
> 时间：2012-05-07T20:34:10.350
> 
> 标签：magento, routing

我发现 Magento 路由逻辑存在问题，我想看看是否有人可以确认这一点。

Magento 将路由器 admin、standard 和 default 堆叠起来，一次处理一个。Magento 根据 URL 获取当前模块名称（请参阅`Mage_Core_Controller_Varien_Router_Standard::match())`，然后根据与 Magento 配置中的 frontName 的匹配项检查模块是否应由该路由器处理。如果找到匹配项，则路由它。如果没有，它继续到下一个路由器。

配置摘录：

```
    <管理员>
        <路由器>
            <我的路线>
                <使用>管理员</使用>
                <参数>
                    <module>MyNamespace_MyModule</module>
                    <frontName>我的路线</frontName>
                </args>
            </myroute>
        </路由器>
    </admin>
    <前端>
        <路由器>
            <我的路线>
                <使用>管理员</使用>
                <参数>
                    <module>MyNamespace_MyModule</module>
                    <frontName>我的路线</frontName>
                </args>
            </myroute>
        </路由器>
    </前端>

```

这意味着，如果您为前端路由器使用与管理路由器相同的名称，则管理路由器将始终首先匹配，即使在前端页面上也是如此。您的前端页面现在将像管理页面一样使用 admin 进行路由`base_url`，这可能与您商店的 URL 不同，从而导致重定向中断。

请注意，在管理基本 URL 与前端基本 URL 相同的 Magento 实例中，此问题并不明显。

谁能在这里确认我对路由器逻辑的评估是正确的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T22:42:06.380

您可能还想查看 Varien/Router/Standard.php，尤其是：

```
/**
 * checking if this admin if yes then we don't use this router
 *
 * @return bool
 */
protected function _beforeModuleMatch()
{
    if (Mage::app()->getStore()->isAdmin()) {
        return false;
    }
    return true;
} 
```

这在方法`match(Zend_Controller_Request_Http $request)`中被调用`collectRoutes($configArea, $useRouterName)`，`$useRouterName`有时会返回`admin`，也会返回`standard`前端请求。这个假设听起来是正确的，因为这完全取决于 magento 如何 在同一个类中构建和堆叠私有数组`_routes`：.`_modules``Mage_Core_Controller_Varien_Router_Standard`

我相信在这种情况下，您可能希望将`<use>`节点指定`standard`为前端和`admin`管理员，或者重写`<global>`节点中的控制器操作。

我认为你最好的选择是阅读：

*   [http://alanstorm.com/magento_dispatch_admin_cms_default_routers](http://alanstorm.com/magento_dispatch_admin_cms_default_routers)

[和/或使用X-debug](http://xdebug.org/)逐步执行逻辑。

甚至 Alan Storm 在他的文章中写道，用于前端和后端的相同路由器不应相同。

> 因此，如果出于某种原因，存储模型对象认为其处于管理模式，则此方法似乎可以确保标准路由器对象保释。像标准/管理员路由器关系一样，存储对象是另一个指向 Magento 开发过程的某些部分的东西.
> 
> store 对象是一个真正只适用于前端/购物车应用程序的模型。但是，由于 Magento 中的许多代码都假定 store 对象存在，因此它需要对管理控制台应用程序可用。反过来，这会在路由器级别造成麻烦，这就是导致此类检查的原因。许多抽象层，类/模块之间没有定义的契约，以及由于缺乏测试而对重构的恐惧总是会导致这种情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T04:15:56.710

这不是 Magento 错误，但在编写模块或使用第三方代码时需要注意。我已经在[这里](http://blog.kirkmadera.com/magento-routing-using-the-same-frontname-for-admin-and-frontend-routes/)澄清了问题和解决方案。本质上，应该始终使用现有的 adminhtml 路由，而不是创建新的管理路由。这使管理员中的 url 保持一致并避免冲突。感谢 Alan 和 Jared 帮助我更好地理解 Magento 路由。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-20T21:08:07.697

只是把我的 2 美分投入其中；今晚我当然注意到了这个问题！我正在构建一个自定义模块，我的**config.xml**路由器定义如下：

```
<admin>
    <routers>
        <namespace_module>
            <use>admin</use>
            <args>
                <module>Namespace_Module</module>
                <frontName>namespace_module</frontName>
            </args>
        </namespace_module>
    </routers>
</admin>
<frontend>
    <routers>
        <namespace_module>
            <use>standard</use>
            <args>
                <module>Namespace_Module</module>
                <frontName>namespace_module</frontName>
            </args>
        </namespace_module>
    </routers>
</frontend> 
```

我在前端收到 404 错误，而后端路由器工作得很好。我更改了前端名称，瞧：

```
<admin>
    <routers>
        <namespace_module>
            <use>admin</use>
            <args>
                <module>Namespace_Module</module>
                <frontName>namespace_module</frontName>
            </args>
        </namespace_module>
    </routers>
</admin>
<frontend>
    <routers>
        <namespace_module>
            <use>standard</use>
            <args>
                <module>Namespace_Module</module>
                <frontName>namespace_module_front</frontName>
            </args>
        </namespace_module>
    </routers>
</frontend> 
```

我猜使用一个独特的名字是有意义的！

# vim - voom 折叠标记切换键映射

> ID：10488734
> 
> 赞同：1
> 
> 时间：2012-05-07T20:34:29.930
> 
> 标签：vim

我经常使用 Voom，但我想映射键以切换折叠标记。

我目前拥有的是

```
imap <Tab>1 <esc>$a {{{1<esc>
nmap <Tab>1 <esc>$a {{{1<esc> 
```

但我更喜欢

```
imap <Tab><number> <esc>$a {{{<number><esc>
nmap <Tab><number> <esc>$a {{{<number><esc> 
```

有办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T01:00:18.340

试试这个：

```
for n in range(1,9)
  execute 'inoremap <Tab>'.n.' <Esc>$a {{{'.n.'<Esc>'
  execute 'nnoremap <Tab>'.n.' <Esc>$a {{{'.n.'<Esc>'
endfor 
```

# actionscript-3 - 在 Flash 中为 ComboBox 控件的“textField”属性设置“textFormat”样式时不显示文本？

> ID：10488737
> 
> 赞同：0
> 
> 时间：2012-05-07T20:34:39.820
> 
> 标签：actionscript-3, flash, controls, styles, components

在整个网络上，它说我应该能够使用以下代码更改 fl.controls.ComboBox 的样式，这最初是在这里建议的：http: [//blogs.adobe.com/pdehaan/2008/03/using_embedded_fonts_with_the_3.html](http://blogs.adobe.com/pdehaan/2008/03/using_embedded_fonts_with_the_3.html)

```
//assumes combobox is a fl.controls.ComboBox and has been populated and has an item selected; also assumes the Arial font has been properly embedded.
var textFormat:TextFormat = new TextFormat( "Arial", 12 );
combobox.textField.setStyle( "textFormat", textFormat );
combobox.textField.setStyle( "embedFonts", true );
combobox.dropdown.setRendererStyle( "textFormat", textFormat );
combobox.dropdown.setRendererStyle( "embedFonts", embedFonts ); 
```

除了在 textField 属性（这是一个 TextInput 组件）上调用 setStyle 的前两行之外，一切都正常工作。下拉的字体正确更新并显示正常，使用我设置的任何大小的嵌入式 Arial 字体，但显示所选项目文本的组合框的主要文本不起作用。它什么也不显示。

有没有其他人遇到过这个问题或能够重现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T02:22:20.573

我遇到了同样的问题。

显然，您需要在应用任何样式***之前填充组合框。***我从数据库中的列表中填充我的，一旦我将我的样式代码移动到我的加载器的 onComplete 处理程序中，一切都很顺利。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:21:00.537

我完成了以下教程并且没有任何问题，请尝试以下操作：

[AS3 中的组合框文本格式](http://www.rockabit.com/2008/04/15/combobox-text-formatting-in-as3/)

# c# - 在 wpf 中更改 stackpanel 的子索引

> ID：10488738
> 
> 赞同：4
> 
> 时间：2012-05-07T20:34:40.853
> 
> 标签：c#, wpf, controls, stackpanel

我想知道如何在**c# 代码**中更改StackPanel的**子索引**。

 **例如，我想让当前第二的孩子首先显示。更改索引时需要动画。

我正在使用 StackPanel，因为我需要 Orientation 属性来堆叠所有元素并将它们组合在一起。如果您有更好的想法来使用其他控件，我对此持开放态度。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T20:49:05.913

[StackPanel.Children](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.children.aspx)是一个[UIElementCollection ，它可以轻松地通过其](http://msdn.microsoft.com/en-us/library/system.windows.controls.uielementcollection.aspx)[Insert](http://msdn.microsoft.com/en-us/library/system.windows.controls.uielementcollection.insert.aspx)和[RemoveAt](http://msdn.microsoft.com/en-us/library/system.windows.controls.uielementcollection.removeat.aspx)方法对元素进行重新排序。**

# html - Css 和一个轻微的挫败感

> ID：10488741
> 
> 赞同：3
> 
> 时间：2012-05-07T20:34:52.347
> 
> 标签：html, css

我目前正在开发一个网页，并且`li`s 有一个`border-right`of`1px`作为分隔符。但是，边界不足以完成这项工作。

以下是代码段和一些屏幕截图：

## 菜单 HTML

```
<nav id="home-nav" class="posabs">
 <ul class="nav">
  <li id="hdoc" style="border-right:1px solid #aaa6a0;"><a href=""><span>Original Content</span></a></li>
  <li id="hpnd" style="border-right:1px solid #aaa6a0;"><a href=""><span>Production &amp; Digital</span></a></li>
  <li id="hcns" style="border-right:1px solid #aaa6a0;"><a href=""><span>Commercials &amp; Shorts</span></a></li>
  <li id="hind"><a href=""><span>Distribution &amp; Sales</span></a></li>
 </ul>
</nav> 
```

## CSS

```
<style type="text/css">
#home-nav a span{display:block;background-image:url(../images/guru_silos.png);background-norepeat:0 0;height:52px;text-indent:-9999px;}
#home-nav a{height:104px;}
#hdoc a{width:188px;height:48px;margin-right:35px;}
#hpnd a{width:191px;height:50px;margin-right:35px;}
#hcns a{width:209px;height:52px;margin-right:35px;}
#hind a{width:196px;height:51px;}
#hdoc ul li{border-left:1px solid #aaa6a0;height:50px;}
#hpnd ul li{border-left:1px solid #aaa6a0;height:50px;}
#hcns ul li{border-left:1px solid #aaa6a0;height:50px;}
#hind ul li{border-left:1px solid #aaa6a0;height:50px;}
#hdoc a span{width:188px;background-position:-190px -159px;margin:25px 0 0 14px;}
#hdoc a:hover span{background-position:0px -159px}
#hpnd a span{width:191px;background-position:-211px -105px;margin:25px 0 0 12px;}
#hpnd a:hover span{background-position:-211px -52px}
#hcns a span{width:209px;background-position:0px -53px;margin:25px 0 0 18px;}
#hcns a:hover span{background-position:0px 0px}
#hind a span{width:196px;background-position:-211px 0px;margin:25px 0 0 22px;}
#hind a:hover span{background-position:0px -107px}
</style> 
```

## 想要的样子

![http://i.stack.imgur.com/p2fXt.png](../Images/1314398901f0db88965eb63d666d3b39.png)

*CSS 的预期结果，来自 Illustrator 文件。请忽略缺少的背景。*

## 当前外观

![http://i.stack.imgur.com/kwo4M.png](../Images/bdc5f5ee9c4a16ac4f797f57074b58fe.png)

*我的 CSS 和 HTML 的当前结果。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:46:03.480

建议，请使 CSS 更具可读性，然后将其粘贴到此处。

关于这个问题，我要做的是将这个添加到 li `line-height: 50px`/* 你想要的任何高度 */ 然后`border-right:1px solid #666;`在这种情况下边框将是 50px，这是块的高度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T21:35:39.747

我做了一个简单的例子。语义很好，根据自己的喜好编辑它！我猜这就是你想要的？

[例子](http://jsfiddle.net/Autodealers/YHR5u/)

您可以使用“li a”的文本缩进来使用背景图像。干杯。

# java - JSP吐出错误，我认为这是由于结构？

> ID：10488748
> 
> 赞同：1
> 
> 时间：2012-05-07T20:35:17.213
> 
> 标签：java, html, jsp, ms-access

我现在在这个 JSP 上工作得很快，感觉我在这个 JSP 业务上学得很快。

但我不禁认为这是不对的？我已经在我的 locathost 下尝试过它，但当它通过我的浏览器吐出时我遇到了问题。所以我觉得我的结构错了，但老实说，; 无法锻炼出我出错的地方，我已经做了大约 5 个小时的 JSP，所以请给我这个怀疑的好处。

```
<%@ page contentType="text/html; charset=utf-8" language="java" import="java.sql.*" errorPage="" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<%@ page import="java.io.*" import="java.sql.*"%>
</head>
<body>

<!-- BELOW IS DATABASE CONNECTION SET UP -->
<% 
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
Connection con=DriverManager.getConnection("jdbc:odbc:database11"); 
// END OF  DATABASE CONNECTION SET UP 
// START OF TESTING 

String mysql="select * from hotels";
Statement s=con.createStatement();
ResultSet rst=s.executeQuery(mysql);

out.println("<table border='1' width='70%'>");
out.println("<tr>");
out.println("<td width='10%'>" + rst.getString ("NameofPlace") + "</td>");
out.println("<td width='10%'>" + rst.getString ("NameofPlace") + "</td>");
out.println("<td width='10%'>" + rst.getString ("Country") + "</td>");
out.println("<td width='10%'>" + rst.getString ("PricePerNight") + "</td>");
out.println("<td width='10%'>" + rst.getString ("MaximumPersons") + "</td>");
out.println("<td width='10%'>" + rst.getString ("StarRating") + "</td>");
out.println("<td width='20%'>" + rst.getString ("Description") + "</td>");
out.println("</tr>");

while (rst.next()) {

// Column Details of hotels

out.println("<tr>");
out.println("<td width='10%'>" + rst.getString ("NameofPlace") + "</td>");
out.println("<td width='10%'>" + rst.getString ("NameofPlace") + "</td>");
out.println("<td width='10%'>" + rst.getString ("Country") + "</td>");
out.println("<td width='10%'>" + rst.getString ("PricePerNight") + "</td>");
out.println("<td width='10%'>" + rst.getString ("MaximumPersons") + "</td>");
out.println("<td width='10%'>" + rst.getString ("StarRating") + "</td>");
out.println("<td width='20%'>" + rst.getString ("Description") + "</td>");
out.println("</tr>");
}

out.println("</table>");

rst.close();
con.close();

%>

</body>
</html> 
```

如果有什么我做错了，请告诉我，因为我可以想象它会非常整洁，结构良好或完美。

如果您对我在做什么感到好奇，请参阅我今天早上早些时候的帖子： [https ://stackoverflow.com/questions/10485667/university-jsp-booking-project#comment13551068_10485667](https://stackoverflow.com/questions/10485667/university-jsp-booking-project#comment13551068_10485667)

但是为什么它不起作用，非常感谢任何帮助！？

我的错误：

```
org.apache.jasper.JasperException: Exception in JSP: /0906055/index.jsp:24

21: 
22: out.println("<table border='1' width='70%'>");
23: out.println("<tr>");
24: out.println("<td width='10%'>" + rst.getString ("NameofPlace") + "</td>");
25: out.println("<td width='10%'>" + rst.getString ("NameofPlace") + "</td>");
26: out.println("<td width='10%'>" +  rst.getString ("Country") + "</td>");
27: out.println("<td width='10%'>" + rst.getString ("PricePerNight") + "</td>");

Stacktrace:
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:491)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:395)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:308)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:259)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:729)

root cause

javax.servlet.ServletException: [Microsoft][ODBC Driver Manager] Invalid cursor state
    org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:841)
    org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:774)
    org.apache.jsp._0906055.index_jsp._jspService(index_jsp.java:108)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:98)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:371)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:308)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:259)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:729)

root cause

java.sql.SQLException: [Microsoft][ODBC Driver Manager] Invalid cursor state
    sun.jdbc.odbc.JdbcOdbc.createSQLException(Unknown Source)
    sun.jdbc.odbc.JdbcOdbc.standardError(Unknown Source)
    sun.jdbc.odbc.JdbcOdbc.SQLGetDataString(Unknown Source)
    sun.jdbc.odbc.JdbcOdbcResultSet.getDataString(Unknown Source)
    sun.jdbc.odbc.JdbcOdbcResultSet.getString(Unknown Source)
    sun.jdbc.odbc.JdbcOdbcResultSet.getString(Unknown Source)
    org.apache.jsp._0906055.index_jsp._jspService(index_jsp.java:68)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:98)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:371)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:308)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:259)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:729)

note The full stack trace of the root cause is available in the Apache Tomcat/5.5.35 logs. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:24:28.600

这是已解决的问题，在查看我的代码后，我不得不到顶部区域并重复相同的细节。这就是它重复并签署大量错误的原因。

我知道有些人会流利地了解 JSP，并且会说这是不好的做法；（这是我刚刚学到的，所以我敦促你不要这样编码。但是 - 以供将来参考和任何可能在我鞋子里的人。

这是答案和完成的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<%@ page import="java.io.*" import="java.sql.*"%>
</head>
<body>

<!-- BELOW IS DATABASE CONNECTION SET UP -->
<% 
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
Connection con=DriverManager.getConnection("jdbc:odbc:webapps"); 
// END OF  DATABASE CONNECTION SET UP 
// START OF TESTING 

String mysql="select * from hotels";
Statement s=con.createStatement();
ResultSet rst=s.executeQuery(mysql);

out.println("<table border='1' width='70%'>");
out.println(" <tr>");
out.println(" <td width='10%'><b>Name of Place</b></td>");
out.println(" <td width='10%'><b>Country</b></td>");
out.println(" <td width='10%'><b>Price Per Night</b></td>");
out.println(" <td width='10%'><b>Maximum Persons</b></td>");
out.println(" <td width='10%'><b>Star Rating</b></td>");
out.println(" <td width='10%'><b>Description</b></td>");
out.println(" </tr>");

while (rst.next()) {

// Column Details of hotels

out.println(" <tr>");

out.println(" <td width='10%'>" + rst.getString ("NameofPlace") + "</td>");
out.println(" <td width='10%'>" + rst.getString ("Country") + "</td>");
out.println(" <td width='10%'>" + rst.getString ("PricePerNight") + "</td>");
out.println(" <td width='10%'>" + rst.getString ("MaximumPersons") + "</td>");
out.println(" <td width='10%'>" + rst.getString ("StarRating") + "</td>");
out.println(" <td width='20%'>" + rst.getString ("Description") + "</td>");
out.println(" </tr>");
}

out.println("</table>");

rst.close();
con.close();

%>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:43:18.613

你正在从一个非常非常古老的资源中学习。您使用的样式在 1990 年代后期就已经过时了。 *再也没有人*以这种方式编写 JSP。

这个想法是数据库访问不应该由 JSP 完成。

您还需要了解更多关于 JDBC 的知识。

您使用的 ODBC 数据源不知道您使用的 Access 数据库在哪里。请记住，JSP 代码在服务器上执行并创建发送到浏览器的 HTML。

我建议您对 Access 连接使用无 DSN 的 URL：

[http://www.jroller.com/sjivan/entry/dsn_less_jdbc_connection_to](http://www.jroller.com/sjivan/entry/dsn_less_jdbc_connection_to)

我会在 servlet 中建立这种连接。

我会得到 Hans Bergsten 的 O'Reilly 关于 JSP 的书并开始从中学习。它显示了多年前做事的正确方法。

更新：

```
Invalid cursor state 
```

发生这种情况是因为您试图在循环外访问 ResultSet。我已经更改了您的代码以修复它。看看这是否有帮助。在进一步学习之前，请先学习 Oracle 的 JDBC 教程。

```
<%@ page contentType="text/html; charset=utf-8" language="java" import="java.sql.*" errorPage="" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<%@ page import="java.io.*" import="java.sql.*"%>
</head>
<body>

<!-- BELOW IS DATABASE CONNECTION SET UP -->
<% 
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
Connection con=DriverManager.getConnection("jdbc:odbc:database11"); 
// END OF  DATABASE CONNECTION SET UP 
// START OF TESTING 

String mysql="select * from hotels";
Statement s=con.createStatement();
ResultSet rst=s.executeQuery(mysql);

out.println("<table border='1' width='70%'>");

while (rst.next()) {

// Column Details of hotels

out.println("<tr>");
out.println("<td width='10%'>" + rst.getString ("NameofPlace") + "</td>");
out.println("<td width='10%'>" + rst.getString ("NameofPlace") + "</td>");
out.println("<td width='10%'>" + rst.getString ("Country") + "</td>");
out.println("<td width='10%'>" + rst.getString ("PricePerNight") + "</td>");
out.println("<td width='10%'>" + rst.getString ("MaximumPersons") + "</td>");
out.println("<td width='10%'>" + rst.getString ("StarRating") + "</td>");
out.println("<td width='20%'>" + rst.getString ("Description") + "</td>");
out.println("</tr>");
}

out.println("</table>");

rst.close();
con.close();

%>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T20:44:43.637

您收到什么错误消息？这可能是告诉我们问题所在的重要线索！

我确实看到了一个错误：您的第一个 rst.getString 块是在第一个 rst.next 之前完成的。在执行第一个 rst.next 之前，缓冲区中没有记录，因此没有要获取的字符串。也许您认为在执行 next() 之前第一条记录可用？它不是。你做的第一个 next() 得到你的第一条记录。

还有一点是，在您的两个记录转储中，您都会两次获得“NameofPlace”。而你的 td 宽度的总和只有 80%。它应该总计 100% - td 百分比是相对于表格的宽度，而不是整个屏幕。（不过，这不会给你一个错误。浏览器只是猜测你的意思。）

# css - CKEditor 和 CakePHP 改变高度

> ID：10488751
> 
> 赞同：0
> 
> 时间：2012-05-07T20:35:33.453
> 
> 标签：css, cakephp, cakephp-1.3, ckeditor

我正在使用 CakePHP 进行开发，并且想修改使用 cake html helper 生成的 CKEditor 的高度，因为我需要在一个页面内有两个具有不同高度的编辑器。

我怎么能用css做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T19:20:48.830

如果我记得在视图中定义 ckeditor js 时可以执行此操作，例如

ed = CKEDITOR.replace("textarea", { height:"291", width:"400" });

检查此文档：

[http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.width](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.width)

[http://cksource.com/forums/viewtopic.php?t=13810](http://cksource.com/forums/viewtopic.php?t=13810)

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-24T03:36:13.827

```
<script type="text/javascript">
     CKEDITOR.replace( 'texarea', height:'350px',autoGrow_minHeight:'350px'});
</script> 
```

或者

```
<script type="text/javascript">
     CKEDITOR.replace( 'texarea', height:'350px',autoGrow_minHeight:'100%'});
</script> 
```

# php - SQL Server 获取行数

> ID：10488756
> 
> 赞同：2
> 
> 时间：2012-05-07T20:35:51.533
> 
> 标签：php, sql-server, count

我有一个名为的表`replies`，它有一个名为`topic_id`.

我想做的是计算topic_id为1的行数。

我试过

```
SELECT COUNT(*) 
FROM [***].[replies] 
WHERE [***].[topic_id] = '1' 
```

但在这种情况下，我不知道这是否是一个有效的查询。如果是，我怎样才能将它拉回到`$num_rows`我的 php 代码中调用的变量中？

注意：***实际上是我介绍的前缀。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T20:38:15.137

像这样的东西应该工作：

```
--declare the variable
DECLARE @num_rows INT

--get the total number of rows
SELECT @num_rows = COUNT(*) FROM replies WHERE topic_id = 1

--get a distinct count of rows (if for some reason you need it)
SELECT @num_rows = COUNT(DISTINCT reply_id) FROM replies WHERE topic_id = 1

--return the result set
SELECT @num_rows AS num_rows 
```

如果您只想返回一个名为`num_rows`虽然的列，这将是一种更有效的方法：

```
SELECT COUNT(*) AS num_rows FROM replies WHERE topic_id = 1 
```

# linux - 如何给su当前用户环境变量

> ID：10488758
> 
> 赞同：19
> 
> 时间：2012-05-07T20:36:00.413
> 
> 标签：linux, bash, ubuntu

我有一个通过`.bashrc`.

在`~/.bashrc`：

```
PROJ_HOME=~/Projects/stable 
```

从 bash shell，我想做这样的事情：

```
$ su -l kenneth -c 'echo $PROJ_HOME' 
```

但是，当我这样做时，`/home/kenneth/Projects/stable`不会打印出预期的内容。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-07T20:42:50.567

您是否尝试过选项 su -m ？

```
-m, --preserve-environment
              do not reset environment variables 
```

例如： su -m kenneth -c 'echo $PROJ_HOME'

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-07T21:26:45.567

您需要导出变量。您可能不需要使用该`-m`选项`su`来保护环境。

```
export PROJ_HOME=~/Projects/stable 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-07T20:40:05.933

尝试使用`su -m -l kenneth -c 'echo $PROJ_HOME'`. -m 应该保护环境。

编辑再读一次你的问题，我想我可能理解它颠倒了。你也可以试试这个：`su -l kenneth -c '. /home/kenneth/.bashrc; echo $PROJ_HOME'`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-13T08:24:54.847

您需要了解这里的多个步骤。

```
PROJ_HOME=~/Projects/stable 
```

*在当前 shell*中使用路径的*扩展*值创建一个变量。换句话说，如果您以 user 身份登录`luser`，该变量将包含类似`/home/luser/Projects/stable`.

如果意图是`su`获取值`/home/kenneth/Projects/stable`，您需要以该用户的身份评估此表达式，或者重写它以包含`kenneth`运行前的预期值`sudo`。

首先，如果作业在文件中`/etc/project.rc`，您可以简单地

```
su -l kenneth -c '. /etc/project.rc; echo "$PROJECT_HOME"` 
```

在第二种情况下，也许尝试类似

```
PROJECT_HOME=~kenneth/Projects/stable su -m -l kenneth -c 'echo "$PROJECT_HOME"' 
```

当然，这对 Kenneth 的值进行了没有吸引力的硬编码（并且您的 shell 实际上可能没有扩展`~kenneth`到 的主目录的功能`kenneth`，在这种情况下可能会使用[`getent`](https://www.man7.org/linux/man-pages/man1/getent.1.html)等）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-12-13T06:57:05.140

我还解决了这个问题，并通过将 env 变量导出到配置文件中进行了修复。下面是我的示例代码：

```
echo export runner_token=$(echo $resp_json | jq -r '.token') >> /etc/profile
su -p - ubuntu -c '$HOME/actions-runner/config.sh --url https://github.com/${gh_repo_user}/${gh_repo_name} --token "$runner_token"  --name MAC-AWS-RUNNER --labels ${gh_runner_labels}' 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-02-09T21:37:34.203

在命令周围使用单引号：

```
$ su -l kenneth -c 'echo $PROJ_PATH' 
```

双引号解释`$PROJ_PATH`root 看到的值（空字符串），然后以`"echo (empty string)"`用户 kenneth 执行命令。

单引号将`'echo $PROJ_PATH'`作为命令传递，并且`$PROJ_PATH`在 kenneth 的环境中的值将被回显。

# c# - 如何从传递给它并由它执行的委托中停止执行方法

> ID：10488759
> 
> 赞同：3
> 
> 时间：2012-05-07T20:36:07.247
> 
> 标签：c#, .net

我正在尝试编写一个接收委托的方法，并在循环中执行该委托。这不是很难，例如：

```
public static void RunInLoop<T>(IEnumerable<T> someCollection, 
                                 Action<T> action)
{           
        foreach (var item in someCollection)
        {
                action(item);
        }
} 
```

但是，假设我想为用户提供`RunInLoop`执行类似 的方法`break`，即停止循环的执行（或者只是简单地从 中返回`RunInLoop`）。

我想到了什么：

1.  编写一个名为的方法`Break()`——它抛出一个（私有）异常，然后`action(item)`用 try catch 包围，如果我捕获到我的（私有）异常——就返回。如果代表通过了 catchs ，这就不是很好了`Exception`。

2.  `foreach`在新线程中运行，并`Break()`通过杀死当前线程来实现。除其他原因外，在基于 UI 的应用程序（如 Silverlight）中使用我的方法时，这并不好，有时必须在 UI 线程中执行。

3.  我得到的另一个建议是接收一个额外的代表，条件是我将在每次执行结束时检查。我也不喜欢这样，因为它对用户来说不直观，并且限制`break`在迭代结束。不过，这是我目前的最后手段。

所以我还没有找到好的解决方案。有什么建议/方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T20:39:53.660

```
public static void RunInLoop<T>(IEnumerable<T> someCollection, 
                                 Func<T, bool> action)
{           
        foreach (var item in someCollection)
        {
                if(action(item))
                     break;
        }
} 
```

让“action”（如果您进行此更改，应将其重命名为 func）返回一个布尔值，指示您是否应该继续。

还值得一提的是，您的原始方法只是一种`ForEach`扩展方法。 [这](http://blogs.msdn.com/b/ericlippert/archive/2009/05/18/foreach-vs-foreach.aspx)是 Eric Lippert 的一篇博客文章，其中说明了为什么故意从框架中省略它以及为什么它真的不是一个好的做法（尽管很多人都在使用它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T21:48:37.783

你能不能只使用一个布尔值的静态/成员变量。

```
Action
{
    ...
    foreach
        if (!s_KeepGoing)
            break
    ...
} 
```

或者，如果您希望灵活地指定 bool，则让 Action 将 bool 的 ref 作为委托的第二个参数，并如上所述检查 bool。

```
public delegate void MyDelegate<in T>(T type, ref bool keepGoing);

public static void RunInLoop<T>(IEnumerable<T> someCollection, 
                                 MyDelegate<T> action)
{           
        foreach (var item in someCollection)
        {
                action(item, ref s_AnotherKeepGoing);
        }
} 
```

# c# - 在 github 上托管 VisualStudio 项目的指南

> ID：10488763
> 
> 赞同：7
> 
> 时间：2012-05-07T20:36:15.280
> 
> 标签：c#, visual-studio, git, github

我想在 github 上托管我的一些 C# VisualStudio 2010 项目。我猜至少添加一个最小`.git/info/exclude`文件是个好习惯。对于我的[FluentWpf](https://github.com/dharmatech/FluentWpf)项目，我的`exclude`文件中有这个：

```
FluentWpf/bin/*
FluentWpf/obj/* 
```

在将我的项目检查到 git 之前，是否还有其他最佳实践可以遵循？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T20:42:25.360

你可以使用 GitHub 的默认 .gitignore 文件：

[https://github.com/github/gitignore/blob/master/VisualStudio.gitignore](https://github.com/github/gitignore/blob/master/VisualStudio.gitignore)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T21:41:22.153

如果您碰巧使用 Git 扩展，它有自己的默认 .gitignore。在 Visual Studio 中，只需转到 Git 菜单 -> 编辑 .gitignore 并单击“添加默认忽略”。

在进行初始提交之前，我认为决定如何处理行尾也是一个好主意。

您可能知道，Windows 使用 CR-LF ASCII 字符的组合来表示行尾，而 UNIX 系统仅使用 LF 字符。如果您的项目仅在 Windows 上开发，我认为使用 UNIX 结尾没有任何意义，因此我会确保将`core.autocrlf`选项设置为`false`. 如果您的项目要在 Windows 和 UNIX 系统上进行编辑，您可以设置它`true`- 然后存储库将在内部将所有行结尾存储为 LF 字符，但磁盘上的文件将包含 CRLF。

这些至少是我会做出的选择，其他人可能会做不同的选择。无论您选择哪个选项，现在就选择它，因为稍后更改它可能会出现问题。

Git Extensions 允许您在 GUI 中更改此选项：Git->Settings->Global/Local 设置选项卡，“行尾”组框。

确保团队中的所有开发人员在他们的机器上都有相同的设置。

# javascript - 尝试对相互链接的三个输入字段进行自定义验证

> ID：10488764
> 
> 赞同：0
> 
> 时间：2012-05-07T20:36:24.237
> 
> 标签：javascript, html, forms, validation

我正在尝试编写一个 javascript 验证和 if 语句来表示以下内容：

> 字段 1 可以自行输入和提交。
> 
> 可以输入字段 2，但如果是这种情况，则还必须输入字段 3，然后可以提交字段 1、2 和 3，或者只提交字段 2 和 3，而没有字段 1。
> 
> 字段 3 如果按最后一句输入，还必须包括字段 2。

*我应该选择哪三个 VAR 进行一次验证？*

**这是我到目前为止所写的：**

```
function DoCustomValidation()
{
var first = document.forms["readings"] ["GlucoseLevel"].value;
var second = document.forms["readings"] ["SBP"].value;
var third = document.forms["readings"] ["DBP"].value;

if ( 
```

我知道如何以及在哪里创建验证并将验证放在我的 .PHP 文件等中，只是我很难编写 if else 语句，因为我使用 java 已经有一段时间了，而且我已经失去了联系。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T21:24:43.273

这是我能做到的最精简的。

```
function DoCustomValidation()
{
    var first = document.forms["readings"] ["GlucoseLevel"].value;
    var second = document.forms["readings"] ["SBP"].value;
    var third = document.forms["readings"] ["DBP"].value;

    if(!second==!third){
        if(!first===false){
            return true;
        }
        else if (!second===false){
            return true;
        }
    }
    return false;
} 
```

编辑：添加消息如果您想在表单提交失败时收到消息，试试这个

```
function DoCustomValidation()
{
    var first = document.forms["readings"] ["GlucoseLevel"].value;
    var second = document.forms["readings"] ["SBP"].value;
    var third = document.forms["readings"] ["DBP"].value;

    if(!second==!third){
        if(!first===false){
            return true;
        }
        else if (!second===false){
            return true;
        }
        else{
            alert("You cannot submit a blank form.");
        }
    }
    else{
        alert("The SBP and DBP must both be blank or both be filled.");
    }
    return false;
} 
```

写成这样，我不建议对您的验证消息使用警报（和那个特定的文本），但这是我在没有更多信息的情况下能做的最好的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:52:18.723

我认为这可以解决问题，如果第二个和第三个都是发送如果两者都有值，即使第一个没有值，那么如果第一个有值而其他两个是空的，那么你只有一个选择

```
function DoCustomValidation()
{
    ...
    if(second !="" && third != ""){
        //form submit
        return;
    }
    if(first != "" && second == "" && third == ""){
        //form submit
        return;
    }
} 
```

# html - 使用 HTML5 视频在 Firefox 中播放 MP4 文件

> ID：10488768
> 
> 赞同：20
> 
> 时间：2012-05-07T20:36:38.683
> 
> 标签：html, firefox, html5-video, mp4

我已经搜索了很多，但没有解决我的问题。

我有一个`video`标签运行如下：

```
<video 
  class="ne" 
  src="{{ page | video_url }}" 
  muted="true" 
  volume="0"  
  controls 
  width="720" 
  height="480" 
  poster="{{ page | video_poster_image_url }}" 
  type="video/mp4">
</video> 
```

我正在使用 Jekyll 作为 URL。他们工作正常。

该网站位于[switzerlandllc.com](http://switzerlandllc.com)。单击 FF 中的任何视频，它会显示一个图像和一个 X。Chrome 和其他浏览器工作正常。

如果您抓取视频的来源并将其加载到新标签中，它可以正常播放。至少它对我有用。

我已经添加了：

```
AddType video/ogg .ogv
AddType video/mp4 .mp4
AddType video/webm .webm 
```

到我的`htaccess`档案。我怀疑我不需要`.ogv`or `.webm`。

我不明白为什么加载视频 URL 会很好地播放视频，但将视频加载到视频标签中会失败。

有任何想法吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-07T20:40:20.307

这是由于 Firefox 中 video 标签内对 MP4 格式的支持有限造成的。直到 Firefox 21 才添加支持，并且仍然仅限于 Windows 7 及更高版本。有限支持的主要原因是 mp4 格式附带的版税。

直接从 Mozilla 工作人员或以下博客文章中查看[支持的媒体格式](https://developer.mozilla.org/en-US/docs/Web/HTML/Supported_media_formats)和[音频和视频元素支持的媒体格式以获取更多信息：](https://developer.mozilla.org/En/Media_formats_supported_by_the_audio_and_video_elements)

[http://pauljacobson.org/2010/01/22/2010122firefox-and-its-limited-html-5-video-support-html/](http://pauljacobson.org/2010/01/22/2010122firefox-and-its-limited-html-5-video-support-html/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-04T16:33:00.260

我可以确认 mp4 在视频标签中不起作用。无论你多么想弄乱服务器的类型标签、编解码器和 mime 类型。

疯狂，因为对于相同的确切视频，在相同的测试页面上，mp4 的旧嵌入标签在 Firefox 中工作得很好。我昨天整天都在搞这个。Firefox 一下子就像 IE，数小时又数小时，不计费。耶。

说到 IE，它在这方面失败得更加优雅。当它无法匹配格式时，它会落在标签之间的内容上，因此可以将视频放在嵌入对象周围，一切都很好。Firefox，不，尽管失败了，但它会显示海报图像（变灰，因此甚至不能用作备用），中间有一条错误消息。所以现在选项放在浏览器识别代码中（这意味着过去十年我们在嵌入视频方面一无所获）或放弃 html5。

# c++ - '"SDL.h" 没有找到这样的文件或目录' 编译时

> ID：10488775
> 
> 赞同：27
> 
> 时间：2012-05-07T20:37:04.997
> 
> 标签：c++, linux, sdl

这是我当前 Makefile 的一部分：

```
CFLAGS = -O2 -Wall -pedantic -std=gnu++11 `sdl-config --cflags --libs` -lSDL_mixer 
```

我已经正确安装了 libsdl，SDL.h 在它所属的 /usr/include/sdl 中，但它不会编译。我的 .h 文件中也有该行`#include "SDL.h"`，但仍然不行。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2016-12-02T21:12:10.497

对于[Simple Direct Media Layer 2](https://www.libsdl.org/) (SDL2)，在 Ubuntu 16.04 上安装后，通过：

```
sudo apt-get install libsdl2-dev 
```

我使用了标题：

```
#include <SDL2/SDL.h> 
```

和编译器链接器命令：

```
-lSDL2main -lSDL2 
```

此外，您可能还需要安装：

```
apt-get install libsdl2-image-dev  
apt-get install libsdl2-mixer-dev  
apt-get install libsdl2-ttf-dev 
```

使用这些标题：

```
#include <SDL2/SDL_image.h>
#include <SDL2/SDL_ttf.h>
#include <SDL2/SDL_mixer.h> 
```

和编译器链接器命令：

```
-lSDL2_image 
-lSDL2_ttf 
-lSDL2_mixer 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-07T20:39:33.093

如果头文件是`/usr/include/sdl/SDL.h`并且您的代码具有：

```
#include "SDL.h" 
```

您需要修复您的代码：

```
#include "sdl/SDL.h" 
```

或者告诉预处理器在哪里可以找到包含文件：

```
CFLAGS = ... -I/usr/include/sdl ... 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-07T20:56:15.210

大多数时候 SDL 在`/usr/include/SDL`. 如果是这样，那么您的`#include <SDL.h>`指令是错误的，它应该是`#include <SDL/SDL.h>`.

另一种方法是将`/usr/include/SDL`目录添加到包含目录中。为此，您应该添加`-I/usr/include/SDL`到编译器标志...

如果您使用的是 IDE，这也应该很容易......

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-08-20T03:15:56.917

头文件位于

```
/usr/include/SDL/SDL.h

       __OR__

/usr/include/SDL2/SDL.h  #  for SDL2 
```

在您的 C++ 代码中使用

```
#include <SDL.h>

       __OR__

#include <SDL2/SDL.h>    // for SDL2 
```

你有正确的用法

```
sdl-config --cflags --libs

       __OR__

sdl2-config --cflags --libs   #  sdl2 
```

这会给你

```
-I/usr/include/SDL -D_GNU_SOURCE=1 -D_REENTRANT
-L/usr/lib/x86_64-linux-gnu -lSDL

       __OR__

-I/usr/include/SDL2 -D_REENTRANT
-lSDL2 
```

有时您可能还会看到这种适用于标准安装的用法

```
pkg-config --cflags --libs sdl

       __OR__

pkg-config --cflags --libs sdl2   #  sdl2 
```

它为您提供

```
-D_GNU_SOURCE=1 -D_REENTRANT -I/usr/include/SDL -lSDL

       __OR__

-D_REENTRANT -I/usr/include/SDL2 -lSDL2   #  SDL2 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-28T12:05:11.497

最简单的想法是在编译代码时添加 pkg-config --cflags --libs sdl2。

`g++ file.cpp `pkg-config --cflags --libs sdl2``

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-13T11:20:03.647

有一个类似的情况，我不能使用[StackAttack](https://stackoverflow.com/users/4513646/stackattack)的解决方案，因为他指的是 SDL2，这是我使用的旧代码太新。

幸运的是，我们来自[askUbuntu](https://askubuntu.com/a/786301/363916)的朋友也有类似的情况：

[下载 SDL](https://www.libsdl.org/download-1.2.php)

```
tar xvf SDL-1.2.tar.gz
cd SDL-1.2
./configure
make
sudo make install 
```

# ruby-on-rails - Rails：使用 button_to 创建控制器的动作

> ID：10488778
> 
> 赞同：0
> 
> 时间：2012-05-07T20:37:14.673
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routes

为什么我不能让我的 button_to 指定控制器的创建操作而不是显示

我已经尝试过无数次将 :action => "create" 和其他类似的东西添加到 button_to 参数中

```
<%= button_to "subscribe", subscription_path(feed_url: @feed.feed_url)%> 
```

我需要在我的 routes.rb 中指定创建路由吗？如果是这样，我应该怎么做？

当以该行的方式使用时，我在加载时收到此错误：

路由错误

没有路由匹配 {:action=>"show", :controller=>"subscriptions", :feed_url=>"http://foo.com/rss"}

在 routes.rb 我将此作为订阅的唯一参考。

```
 resource :subscriptions 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T20:40:59.730

你需要使用，而不是。`subscripton**s**_path``subscription_path`

`subscription_path`用于显示特定订阅。
`subscriptions_path`用于显示所有订阅（通过 GET 请求）或创建新订阅（通过 POST 请求）。

```
<%= button_to "subscribe", subscriptions_path(feed_url: @feed.feed_url, :method => :post)%> 
```

# sql - Rails：从多个表中选择列

> ID：10488780
> 
> 赞同：3
> 
> 时间：2012-05-07T20:37:30.117
> 
> 标签：sql, ruby-on-rails

我是 Rails 的新手。我有三张桌子`a`，，，`b``c`

`b`有 2 列： `b1`和`b2`

`c`有 2 列：`c1`和`c2`

`a`有 3 列：`a1`, `b1`(外键) 和 `c1`(外键)

我想`distinct` `(b2, c2)`通过为`a1`

我尝试了类似的东西

```
a.find(:all, :joins => [:b, :c], :select => "b2, c2", :conditions => {:a => {:a1 => Time.now.midnight. ... Time.now}}, :group => "b2, c2") 
```

这`SQL`产生的效果很好，我能够看到结果。但我认为，由于我正在执行，因此`a.find`我无法从结果集中检索 。`b2``c2`

我怎样才能修改它以便我可以得到`b2`and `c2`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T22:07:17.523

如果您将`:select`条款修改为：

```
foo = a.find(:all, 
       :joins => [:b, :c], 
       :select => "distinct b.b2 as b2_value, c.c2 as c2_value", 
       :conditions => {:a => {:a1 => Time.now.midnight. ... Time.now}}, 
       :group => "b.b2, c.c2") 
```

我相信您会检索到一系列记录。然后尝试以下操作：

```
b2_value = foo.first["b2_value"] 
```

那应该检索您正在寻找的值。

另外，请注意，在查询中，我在使用它们的任何地方指定了表名和列——我认为这是更好的做法，并且当您有重复的列名（例如，`created_at`或`id`）时，也可以避免错误的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T21:56:02.450

尝试

```
a.find(:all, :include => [:b, :c], :select => "distinct b2, c2", :conditions ...) 
```

# python - Python - 如何在字典中搜索特定字符串？

> ID：10488784
> 
> 赞同：1
> 
> 时间：2012-05-07T20:38:12.157
> 
> 标签：python, dictionary

如果我有一个定义为 的字典`users = {}`，并且假设我在该字典中有一些数据，我怎么能在字典中搜索，如果我的搜索字符串与字典中的字符串匹配，我什么也不做。

```
for socket.user in MyServer.users:
    if ((MyServer.users.has_key(socket.user)) == false):
        MyServer.users[user].send(socket.message) 
```

所以这里是搜索用户字典，发现它存在，所以它应该什么都不做。我知道我的代码是错误的，但是我可以在第二行更改什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T20:46:04.587

```
users = {"A": 0, "B": 1, "C": 2}

key = "B"
value = "2"

if key in users: print("users contains key", key)
if value in users.values(): print("users contains value", value) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T20:41:28.073

> 如果我的搜索字符串与我的字典中的字符串匹配，我怎么能搜索字典，并且什么也不做。

```
if socket.user in MyServer.users: # search if key is in dictionary
   pass # do nothing 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T20:40:56.360

在 python 中，您可以使用[`pass`](http://docs.python.org/tutorial/controlflow.html#pass-statements)关键字基本上“什么都不做”。

```
for socket.user in MyServer.users:
    if MyServer.users.has_key(socket.user) == False:
        pass 
```

然而，更正确的方法是以一种你想要它做的方式编写你的代码；不做你不需要做的事。

```
for socket.user in MyServer.users:
    if MyServer.users.has_key(socket.user) == True:
        MyServer.users[user].send(socket.message) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T20:41:33.113

我错过了什么，或者这就是你要找的东西：

```
if socket.user in MyServer.users:
    # Send a message if it's a valid user
    MyServer.users[user].send(socket.message)
else:
    # Do nothing if it isn't
    pass 
```

# android - 如何在 onPictureTaken 功能后恢复安卓相机预览？

> ID：10488788
> 
> 赞同：7
> 
> 时间：2012-05-07T20:38:26.827
> 
> 标签：android, android-camera, android-capture

我正在开发一个从相机对象拍照并将其保存到 SD 卡的应用程序。除了某些东西外，它工作得很好。（我无法配置一些参数，例如分辨率）。但是当我拍照时它冻结在屏幕上。我只想在拍照后以相同的方式恢复预览和捕捉。这是完整的代码： [http ://bahacanaydin.blogspot.com/2012/05/package-com.html](http://bahacanaydin.blogspot.com/2012/05/package-com.html)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-08T00:29:25.730

您必须在函数`mCamera.startPreview();`内部`onPictureTaken()`重新启动预览，因为它会在拍摄照片时自动停止。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T18:32:41.810

也许这会有所帮助。来自[takePicture() 上的 Android SDK 文档](http://developer.android.com/reference/android/hardware/Camera.html#takePicture%28android.hardware.Camera.ShutterCallback,%20android.hardware.Camera.PictureCallback,%20android.hardware.Camera.PictureCallback,%20android.hardware.Camera.PictureCallback%29)：

> 调用此方法后，在 JPEG 回调返回之前，您不得调用 startPreview() 或拍摄另一张照片。

据我了解，JPEG 回调是 onPictureTaken() 的实现。因此，您应该推迟致电 startPreview。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-30T04:29:23.320

```
mCamera.takePicture(null, null, mPicture);
final Handler handler = new Handler();
handler.postDelayed(new Runnable() {
@Override
public void run() {
//Do something after 1000ms
       mCamera.startPreview();
           }
     }, 1000); 
```

# c# - 从服务器端访问网络存储 - 可能吗？

> ID：10488790
> 
> 赞同：11
> 
> 时间：2012-05-07T20:38:52.140
> 
> 标签：c#, asp.net, local-storage, web-storage, sessionstorage

我已经在网络存储（会话和/或本地）中存储了一些字符串，并且想知道是否可以在页面加载或服务器端初始化时检查这些存储的字符串（在我的例子中是 asp.net c#）。 ..因此，例如，我将知道不要从数据库中重新获取数据并使用上次页面加载时浏览器中已经存在的内容。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-07T20:42:17.137

不，那是不可能的。`sessionStorage`住在客户端。如果要在服务器上访问它，则必须编写读取该值的 javascript，将其放在隐藏字段中，以便将其发送到服务器。或者 javascript 从存储中读取值并重定向到服务器，将其作为查询字符串参数传递。服务器绝对没有办法直接访问这个存储。这是 sessionStorage 与 cookie 的缺点之一。

# linux - 尝试遵循 shell 脚本教程，收到“$: command not found”

> ID：10488795
> 
> 赞同：2
> 
> 时间：2012-05-07T20:39:23.270
> 
> 标签：linux, shell

我在这里遵循本指南： [http ://www.cyberciti.biz/tips/find-out-if-file-exists-with-conditional-expressions.html](http://www.cyberciti.biz/tips/find-out-if-file-exists-with-conditional-expressions.html)

每次我跑：`$ [ -f /etc/passwd ] && echo "File exists" || echo "File does not exists"`

我得到：

```
$: command not found
File does not exists 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T21:31:36.800

在大多数教程中，符号`$`or`%`用于表示您的 shell 提示符，它可能看起来像任何东西。`$`仅在符号后复制内容。

# python - 条件的Python模拟？真假

> ID：10488801
> 
> 赞同：0
> 
> 时间：2012-05-07T20:39:42.360
> 
> 标签：python

标准库中是否有python函数，如

```
def cond(condition, true, false):
  if condition:
    return true
  return false

x = 20
s = cond(x > 10, "x greater than 10", "x less or equals 10") 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T20:41:00.690

Python 有一个三元运算，但它是作为“if 表达式”完成的，而不是使用问号和冒号。

```
s = "x greater than 10" if x > 10 else "x less or equals 10" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T20:41:50.770

Python 有一个类似三元的运算符（它实际上称为*条件表达式*），其内容如下：

```
s = "x greater than 10" if x > 10 else "x less or equals 10" 
```

# multithreading - 如何在 Perl 中实现信号量线程通信？

> ID：10488806
> 
> 赞同：6
> 
> 时间：2012-05-07T20:39:57.327
> 
> 标签：multithreading, perl, process, multiprocessing, semaphore

*我的 Perl 脚本需要同时运行多个线程...*

```
use threads ('yield', 'exit' => 'threads_only');
use threads::shared;
use strict;
use warnings;
 no warnings 'threads';
use LWP::UserAgent;
use HTTP::Request;
use HTTP::Async;
use ... 
```

*...并且此类线程需要从网络获取一些信息，因此`HTTP::Async`使用。*

```
my $request = HTTP::Request->new;
   $request->protocol('HTTP/1.1');
   $request->method('GET');
   $request->header('User-Agent' => '...');

my $async = HTTP::Async->new( slots            => 100,
                              timeout          => REQUEST_TIMEOUT,
                              max_request_time => REQUEST_TIMEOUT ); 
```

*但是只有当其他线程这样说时，某些线程才需要访问网络。*

```
my $start = [Time::HiRes::gettimeofday()];
my @threads = ();
foreach ... {
  $thread = threads->create(
    sub {
           local $SIG{KILL} = sub { threads->exit };
           my $url = shift;
           if ($url ... ) {
             # wait for "go" signal from other threads
           }
           my ($response, $data);
           $request->url($url);
           $data = '';
           $async->add($request);
           while ($response = $async->wait_for_next_response) {
             threads->yield();
             $data .= $response->as_string;
           }
           if ($data ... ) {
             # send "go" signal to waiting threads
           }
         }
       }, $_);

  if (defined $thread) {
    $thread->detach;
    push (@threads, $thread);
  }
} 
```

*可能有**一个或多个**线程**在等待**“go”信号，并且可能有**一个或多个**线程可以**发送**这样的“go”信号。信号量一开始的状态是“ **wait** ”，一旦变成“ **go** ”，就一直这样。*

*最后，应用程序检查最大运行时间。如果线程运行时间过长，则会发送自终止信号。*

```
my $running;
do {
  $running = 0;
  foreach my $thread (@threads) {
    $running++ if $thread->is_running();
  }
  threads->yield();
} until (($running == 0) || 
         (Time::HiRes::tv_interval($start) > MAX_RUN_TIME));
$running = 0;
foreach my $thread (@threads) {
  if ($thread->is_running()) {
    $thread->kill('KILL');
    $running++;
  }
}
threads->yield(); 
```

* * *

*现在说到重点。我的问题是：*

1.  *我怎样才能最有效地在脚本中编写等待“信号量”的代码（参见上面脚本中的注释）。我应该只使用带有一些虚拟* `sleep` *循环的共享变量吗？*

2.  *我是否需要* `sleep` *在应用程序末尾添加一些循环以给线程时间进行自毁？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:58:05.913

您可能会查看[Thread::Queue](http://search.cpan.org/~jdhedden/Thread-Queue-2.12/lib/Thread/Queue.pm)来执行这项工作。您可以设置一个队列来处理等待“开始”信号的线程和发送“开始”信号的线程之间的信号。这是一个我没有测试过的快速模型：

```
...
use Thread::Queue;
...
# In main body
my $q = Thread::Queue->new();
...
$thread = threads->create(
    sub {
           local $SIG{KILL} = sub { threads->exit };
           my $url = shift;
           if ($url ... ) {
             # wait for "go" signal from other threads
             my $mesg = $q->dequeue();
             # you could put in some termination code if the $mesg isn't 'go'
             if ($mesg ne 'go') { ... }
           }
           ...
           if ($data ... ) {
             # send "go" signal to waiting threads
             $q->enqueue('go');
           }
         }
       }, $_);
... 
```

需要等待“go”信号的线程将在 dequeue 方法上等待，直到有东西进入队列。一旦消息进入队列，一个线程并且只有一个线程会抓取消息并处理它。

如果您希望停止线程以便它们不会运行，您可以在队列的头部插入一条停止消息。

```
$q->insert(0, 'stop') foreach (@threads); 
```

[Thread::Queue 和线程](http://search.cpan.org/~jdhedden/threads-1.86/lib/threads.pm)CPAN 分布中的示例更详细地显示了这一点。

在回答您的第二个问题时，不幸的是，答案是视情况而定。当您继续终止线程时，干净关闭需要什么样的清理？如果地毯从线下被拉出，可能发生的最坏情况是什么？您可能希望随时计划进行清理。您可以做的另一个选择是等待每个线程实际完成。

我的评论询问您是否可以删除`detach`调用的原因是因为此方法允许主线程退出而不关心任何子线程发生了什么。相反，如果您删除此调用，并添加：

```
$_->join() foreach threads->list(); 
```

到主块的末尾，这将要求主应用程序等待每个线程实际完成。

如果您保留该`detach`方法，那么如果您需要线程执行任何类型的清理，您将需要在代码末尾休眠。当你调用`detach`一个线程时，你告诉 Perl 的是当你的主线程退出时你不关心线程在做什么。如果主线程退出并且有线程仍在运行且已分离，则程序将在没有警告的情况下完成。但是，如果您不需要任何清理，并且仍然调用`detach`，请随时退出。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-16T05:05:14.407

试试这样的东西......

```
#!/usr/bin/perl

use threads;
use threads::shared;

$|=1;

my ($global):shared;
my (@threads);

push(@threads, threads->new(\&mySub,1));
push(@threads, threads->new(\&mySub,2));
push(@threads, threads->new(\&mySub,3));

$i = 0;

foreach my $myThread(@threads)

{
    my @ReturnData = $myTread->join ;
    print "Thread $i returned: @ReturnData\n";
    $i++;
}

sub mySub
{
    my ($threadID) = @_;

    for(0..1000)
    {
        $global++;
        print "Thread ID: $threadID >> $_ >> GLB: $global\n";
        sleep(1);
    }   
    return( $id );
} 
```

# java - 如何确定具体时间是否在给定范围之间？

> ID：10488810
> 
> 赞同：2
> 
> 时间：2012-05-07T20:40:12.097
> 
> 标签：java

问题：我有一个包含小时数的列表，例如：08:15:00 08:45:00 09:00:00 12:00:00 ...应用程序允许用户预约特定时间: 8:15:00，每次开会半小时。

问题：如何确定这样的预约是否需要空档？我知道 Calendar 类有 before() 和 after() 方法，但它不能解决我的问题。我的意思是如果12:00有预约，12:00有预约，那么在12:15再预约之前如何预防？

编辑：

我尝试过使用我之前提到的方法，例如：

```
Calendar cal1 = Calendar.getInstance(); // for example 12:00:00
Calendar cal2 = Calendar.getInstance(); // for exmaple 12:30:00
Calendar userTime = Calendar.getInstance(); // time to test: 12:15:00

if(user.after(cal1)&& user.before(cal2)){
... // do sth
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T20:52:46.343

检查要检查的日期是否在提供的两者之间：

```
SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy hh:mm");
Date before = sdf.parse("07/05/2012 08:00");
Date after = sdf.parse("07/05/2012 08:30");
Date toCheck = sdf.parse("07/05/2012 08:15");
//is toCheck between the two?
boolean isAvailable = (before.getTime() < toCheck.getTime()) && after.getTime() > toCheck.getTime(); 
```

要预订一个确定的时间，我会做一个有两个日期的课程和一个检查这个的方法：

```
public class Appointment{

 private Date start;
 private Date end;

 public boolean isBetween(Date toCheck){....}

} 
```

然后你可以简单地做一个`Schedule`类扩展`ArrayList`，添加一个方法`isDateAvailable(Date toCheck)`，迭代约会列表并检查没有人冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T20:47:35.977

我会有某种约会类，它有一个开始时间戳和一个持续时间，或者一个开始时间和一个结束时间。然后，在向日程表中添加新约会时，检查开始时间在新约会之前的约会不会超过建议的新约会的开始时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T20:47:56.130

好吧，您将如何做具体取决于您如何存储数据、格式等，但通常您要做的只是检查在请求时间到请求时间 + 请求长度之间的任何时间是否有约会。

```
// Example (using int time(1 = 1 minute), assuming that appointments can only be at 15min intervals)
boolean isHalfHourTimeSlotAvaliable(int time) {
    for (int i = 0; i < appointments.size(); i++) {
        if (appointments.get(i).time == time || appointments.get(i).time == time + 15) {
            return false;
        }
    }
    return true;
} 
```

# linux - 如何在两个接口之间建立 Telnet 连接？

> ID：10488814
> 
> 赞同：0
> 
> 时间：2012-05-07T20:40:47.353
> 
> 标签：linux, networking, network-programming, telnet, tunnel

我有以下网络：

```
PC1 --|¯¯¯¯¯¯¯¯¯|                            |¯¯¯¯¯¯¯¯¯|-- board2
PC2 --| gateway |-- (eth0) [server] (eth1) --| gateway |
PC3 --|_________|                            |_________|-- board1 
```

如您所见，服务器（运行 Linux）有 2 个接口，因此 PC 和嵌入式板卡不在同一个子网上。

我想开发一个简单的应用程序（或使用现有的应用程序），将传入的 Telnet 连接从`eth0`（使用特定端口）通过`eth1`.

我在服务器上**没有 root 权限**，但我有一个普通的 Unix 帐户。我不希望 PC 真正“登录”到服务器；我只是想让他们通过它来连接到电路板。服务器安装了 Python、PHP 和 Perl。

我想支持多个连接。端口号可用于将连接转发到正确的板（假设我有 10 个板，然后隧道侦听端口 3000 到 3009）。

我可以想象一个简单的 Web 应用程序来做到这一点，但我想要一个本地 Telnet 连接，它支持 CTRL+C 和所有这些东西，并允许您在运行 Windows 的 PC 上使用任何终端仿真器（即 PuTTY 或其他终端仿真器） .

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:50:45.630

听起来您正在寻找 TCP*代理*。代理接受一个端口上的连接，连接到另一个 IP/端口，然后来回传递流量。

如果你`xinetd`的系统上有你需要的东西。服务指令导致 xinetd 打开到另一个主机/端口的`redirect`连接并充当代理。有关示例，请参阅[此文档。](http://www.linuxfocus.org/English/November2000/article175.shtml)

[balance](http://www.inlab.de/balance.html)是另一个非常简单的代理工具，可以满足您的需求。这可能更容易以非`root`用户身份运行，尤其是因为它完全是在命令行上配置的。

由于您不在`root`服务器上，因此您需要在 > 1024 的端口上运行这些，否则您应该已准备就绪。

# python - python celery - ImportError: No module named _curses - 在尝试运行 manage.py celeryev 时

> ID：10488826
> 
> 赞同：11
> 
> 时间：2012-05-07T20:41:35.497
> 
> 标签：python, celery, curses

**背景**

Windows 7 x 64 Python 2.7 Django 1.4 Celery 和 Redis 包

在尝试运行 manage.py celeryev 时，我在终端中收到以下错误

```
import curses
File 'c:\Python2\lib\curses\__init__.py', line 15, in <module> from _curses import *
ImportError: No module named _curses 
```

我已经尝试查看其他帖子，但无法解决此问题。关于导致此错误的原因有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-07T22:36:51.913

根据[http://docs.python.org/library/curses.html，curses](http://docs.python.org/library/curses.html)模块仅在 Unix 平台上受支持。[尝试来自http://www.lfd.uci.edu/~gohlke/pythonlibs/#curses](http://www.lfd.uci.edu/~gohlke/pythonlibs/#curses)的 Windows 二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-25T21:04:43.790

根据[https://pypi.org/project/windows-curses/，curses](https://pypi.org/project/windows-curses/)模块可以通过以下方式安装在 Windows 平台上：

```
pip install windows-curses 
```

# google-calendar-api - 添加到 Google 日历的链接

> ID：10488831
> 
> 赞同：135
> 
> 时间：2012-05-07T20:41:58.947
> 
> 标签：google-calendar-api

我不清楚在将单个事件添加到用户 Google 日历的网站上具有链接的确切格式。我看到 eventbrite 已经在这里完成了，但我希望有一些明确的规格或正确方向的链接

[http://www.eventbrite.com/event/1289487893](http://www.eventbrite.com/event/1289487893)

[http://screencast.com/t/6vvh1khS](http://screencast.com/t/6vvh1khS)

* * *

## 回答 #1

> 赞同：266
> 
> 时间：2014-02-09T00:28:49.693

这是一个示例链接，您可以使用它来查看格式：

[https://www.google.com/calendar/render?action=TEMPLATE&text=Your+Event+Name&dates=20140127T224000Z/20140320T221500Z&details=For+details,+link+here:+http://www.example.com&location=Waldorf+ Astoria,+301+Park+Ave+,+New+York,+NY+10022&sf=true&output=xml](https://www.google.com/calendar/render?action=TEMPLATE&text=Your+Event+Name&dates=20140127T224000Z/20140320T221500Z&details=For+details,+link+here:+http://www.example.com&location=Waldorf+Astoria,+301+Park+Ave+,+New+York,+NY+10022&sf=true&output=xml)

注意关键查询参数：

```
text
dates
details
location 
```

这是另一个示例（取自[http://wordpress.org/support/topic/direct-link-to-add-specific-google-calendar-event](http://wordpress.org/support/topic/direct-link-to-add-specific-google-calendar-event)）：

```
<a href="http://www.google.com/calendar/render?
action=TEMPLATE
&text=[event-title]
&dates=[start-custom format='Ymd\\THi00\\Z']/[end-custom format='Ymd\\THi00\\Z']
&details=[description]
&location=[location]
&trp=false
&sprop=
&sprop=name:"
target="_blank" rel="nofollow">Add to my calendar</a> 
```

如果您愿意，这里有一个表格可以帮助您构建这样的链接（在前面的答案中提到）：

[https://support.google.com/calendar/answer/3033039](https://support.google.com/calendar/answer/3033039) *编辑：此链接不再为您提供可以使用的表格*

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2019-01-13T22:15:13.720

谷歌日历和其他日历服务有一个综合文档：[https ://github.com/InteractionDesignFoundation/add-event-to-calendar-docs/blob/master/services/google.md](https://github.com/InteractionDesignFoundation/add-event-to-calendar-docs/blob/master/services/google.md)

工作链接示例：`https://calendar.google.com/calendar/render?action=TEMPLATE&text=Bithday&dates=20201231T193000Z/20201231T223000Z&details=With%20clowns%20and%20stuff&location=North%20Pole`

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2020-02-21T17:27:37.950

我也成功地使用了这个 URL 结构：

基本网址：

```
https://calendar.google.com/calendar/r/eventedit? 
```

假设这是我的活动详情：

```
Title: Event Title
Description: Example of some description. See more at https://stackoverflow.com/questions/10488831/link-to-add-to-google-calendar
Location: 123 Some Place
Date: February 22, 2020
Start Time: 10:00am
End Time: 11:30am
Timezone: America/New York (GMT -5) 
```

我会将我的详细信息转换为这些参数（URL 编码）：

```
text=Event%20Title
details=Example%20of%20some%20description.%20See%20more%20at%20https%3A%2F%2Fstackoverflow.com%2Fquestions%2F10488831%2Flink-to-add-to-google-calendar
location=123%20Some%20Place%2C%20City
dates=20200222T100000/20200222T113000
ctz=America%2FNew_York 
```

示例链接：

[https://calendar.google.com/calendar/r/eventedit?text=Event%20Title&details=Example%20of%20some%20description.%20See%20more%20at%20https%3A%2F%2Fstackoverflow.com%2Fquestions%2F10488831 %2Flink-to-add-to-google-calendar&location=123%20Some%20Place%2C%20City&dates=20200222T100000/20200222T113000&ctz=America%2FNew_York](https://calendar.google.com/calendar/r/eventedit?text=Event%20Title&details=Example%20of%20some%20description.%20See%20more%20at%20https%3A%2F%2Fstackoverflow.com%2Fquestions%2F10488831%2Flink-to-add-to-google-calendar&location=123%20Some%20Place%2C%20City&dates=20200222T100000/20200222T113000&ctz=America%2FNew_York)

请注意，由于我使用“ctz”参数指定了时区，因此我使用本地时间作为开始日期和结束日期。或者，您可以使用 UTC 日期并排除时区参数，如下所示：

```
dates=20200222T150000Z/20200222T163000Z 
```

示例链接：

[https://calendar.google.com/calendar/r/eventedit?text=Event%20Title&details=Example%20of%20some%20description.%20See%20more%20at%20https%3A%2F%2Fstackoverflow.com%2Fquestions%2F10488831 %2Flink-to-add-to-google-calendar&location=123%20Some%20Place%2C%20City&dates=20200222T150000Z/20200222T163000Z](https://calendar.google.com/calendar/r/eventedit?text=Event%20Title&details=Example%20of%20some%20description.%20See%20more%20at%20https%3A%2F%2Fstackoverflow.com%2Fquestions%2F10488831%2Flink-to-add-to-google-calendar&location=123%20Some%20Place%2C%20City&dates=20200222T150000Z/20200222T163000Z)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-03-19T21:57:12.640

对于下一个人在谷歌上搜索这个主题，我编写了一个小的 NPM 包来简化生成 Google 日历 URL 的过程。它包括 TypeScript 类型定义，供需要的人使用。希望能帮助到你！

[https://www.npmjs.com/package/google-calendar-url](https://www.npmjs.com/package/google-calendar-url)

# python - 如何在 Python Paramiko 中通过 HTTP 代理 ssh？

> ID：10488832
> 
> 赞同：2
> 
> 时间：2012-05-07T20:42:10.617
> 
> 标签：python, ssh, paramiko, http-tunneling

我正在调整 Python 脚本，使其独立于操作系统并在 Windows 上运行。我已将其 ssh 系统调用更改为对[paramiko](http://www.lag.net/paramiko/)函数的调用。我被http代理身份验证的问题所困扰。在 Unix（实际上是 Cygwin）环境中，我会使用 ~/.ssh/config

```
Host *
    ProxyCommand corkscrew http-proxy.example.com 8080 %h %p 
```

有没有办法使用 paramiko（或 Python ssh 模块）使用或不使用开瓶器来获得相同的效果？[这篇文章](http://permalink.gmane.org/gmane.comp.python.paramiko/445)似乎暗示了这一点，但我不知道如何。

注意：我在防火墙后面，只允许使用端口 80。我需要控制 Amazon ec2 实例，所以我在这些机器上配置了 sshd 服务器以监听端口 80。在我的 cygwin+corkscrew 原型中一切正常，但是我想要一个没有 Cygwin 的 Python 脚本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-11-17T21:20:56.543

您可以使用任何预先建立的会话`sock`通过`SSHClient.connect(hostname,username,password,...,sock)`.

下面是通过 HTTP-Proxy-Tunnel (HTTP-CONNECT) 建立 SSH 隧道的代码片段。首先建立到代理的连接，并指示代理连接到 localhost:22。结果是已建立会话上的 TCP 隧道，通常用于隧道 SSL，但可用于任何基于 tcp 的协议。

此方案适用于默认安装`tinyproxy`with`Allow <yourIP>`并`ConnectPort 22`设置为`/etc/tinyproxy.conf`. 在我的示例中，代理和 sshd 在同一主机上运行，​​但您只需要任何允许您访问`CONNECT`ssh 端口的代理即可。通常这仅限于端口 443（提示：如果您让 sshd 在 443 上侦听，这将适用于大多数公共代理，即使出于互操作和安全原因我不建议这样做）。如果这最终允许您绕过防火墙，则取决于采用哪种防火墙。如果不涉及 DPI/SSL 拦截功能，你应该没问题。如果涉及 SSL 拦截，您仍然可以尝试通过 ssl 或作为 HTTP 有效负载的一部分进行隧道传输：)

```
import paramiko
import socket
import logging

logging.basicConfig(loglevel=logging.DEBUG)
LOG = logging.getLogger("xxx")

def http_proxy_tunnel_connect(proxy, target,timeout=None):
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        sock.settimeout(timeout)
        sock.connect(proxy)
        LOG.debug("connected")
        cmd_connect = "CONNECT %s:%d HTTP/1.1\r\n\r\n"%target
        LOG.debug("--> %s"%repr(cmd_connect))
        sock.sendall(cmd_connect)
        response = []
        sock.settimeout(2) # quick hack - replace this with something better performing.
        try: 
            # in worst case this loop will take 2 seconds if not response was received (sock.timeout)
            while True:
                chunk = sock.recv(1024)
                if not chunk: # if something goes wrong
                    break
                response.append(chunk)
                if "\r\n\r\n" in chunk: # we do not want to read too far ;)
                    break
        except socket.error, se:
            if "timed out" not in se:
                response=[se]
        response = ''.join(response)
        LOG.debug("<-- %s"%repr(response))
        if not "200 connection established" in response.lower():
            raise Exception("Unable to establish HTTP-Tunnel: %s"%repr(response))
        return sock

if __name__=="__main__":
    LOG.setLevel(logging.DEBUG)
    LOG.debug("--start--")
    sock = http_proxy_tunnel_connect(proxy=("192.168.139.128",8888), 
                                     target=("192.168.139.128",22),
                                     timeout=50)
    ssh = paramiko.SSHClient()
    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
    ssh.connect(hostname="192.168.139.128",sock=sock, username="xxxx", password="xxxxx")
    print "#> whoami \n%s"% ssh.exec_command("whoami")[1].read() 
```

输出：

```
DEBUG:xxx:--start--
DEBUG:xxx:connected
DEBUG:xxx:--> 'CONNECT 192.168.139.128:22 HTTP/1.1\r\n\r\n'
DEBUG:xxx:<-- 'HTTP/1.0 200 Connection established\r\nProxy-agent: tinyproxy/1.8.3\r\n\r\n'
#> whoami 
root 
```

[这里](http://daniel.haxx.se/docs/sshproxy.html) [有](https://wiki.archlinux.org/index.php/HTTP_tunneling)一些关于如何通过代理隧道的其他资源。只需做建立隧道所需的一切并将套接字传递给`SSHClient.connect(...,sock)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T21:27:57.920

有[paraproxy](http://pypi.python.org/pypi/paraproxy)，它实现了对 Paramiko 的代理支持。

您链接到的帖子暗示 Paramiko 可以在任意套接字上操作，但情况似乎并非如此。事实上，paraproxy 的工作原理是完成替换 paramiko 内部的特定方法，因为现有代码只是调用`socket.socket()`以获取套接字，并且不提供任何挂钩代理的方式。

# c# - 在 for 循环语句中动态创建属性名称

> ID：10488834
> 
> 赞同：1
> 
> 时间：2012-05-07T20:42:13.987
> 
> 标签：c#, .net, string, for-loop

我想在 for 语句中创建名为“Item”的类的新实例，但我不知道如何动态命名。

```
for (i=0; i < Counter; i++)
{
    MyClass "XXXX" = Class.method();
} 
```

如何创建 2 个字符串并命名？-例如-

```
for(i=0;i<2;i++){
  string name + i = "Hello" 
} 
```

**已编辑**

我有一些建议来达成我可以创建字典的解决方案。

```
 var bomItems = new Dictionary<Item, Item>();

       for (int i = 0; i < Count; i++)
       {
           Item bomItem = inn.newItem("Part BOM","add");
           bomItems.Add(bomItem + i, bomItem);
       } 
```

但是我在“bomItem + i”中遇到了一个合理的错误。我不能应用操作数 '+' 。明显地。

有人对此有任何答案吗？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T20:44:07.653

使用数组！

```
string[] myArray = new string[Counter];
for (int i = 0; i < Counter; i++){
  myArray[i] = "Hello";
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T20:45:10.127

您可以使用以下集合[`List<String>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)：

```
var list = new List<String>();
for (i=0; i<Counter; i++){
     list.Add("Hello " + i);
} 
```

**编辑**根据您的评论，您希望通过分配的名称访问变量。那么你应该使用 a[`Dictionary`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)代替（如果名称是唯一的）。

例如：

```
var names = new Dictionary<String, String>();
for (i=0; i < Counter; i++){
     names.Add("Name" + i, "Hello");
} 
```

现在您可以通过这种方式获取给定字符串键的字符串值：

```
String name10 = names["Name10"]; // "Hello" since all values are "Hello" in your sample 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T20:51:40.887

您可以使用[Dictionary (TKey,TValue)](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)类，其中键是您要计算的字符串。

```
Dictionary<string, string> myDictionary = new Dictionary<string, string>();
for (i=0; i < Counter; i++)
{
   myDictionary.Add("XXXX", "Hello");  // Matches your above example
} 
```

所以 XXXX 将是您的计数器字符串，而 Hello 将是您希望与之关联的字符串。然后您可以使用检索每个字符串

```
string myString = myDictionary[XXXX]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T20:51:22.483

另一种方法是使用[StringBuilder](http://msdn.microsoft.com/en-us/library/2839d5h5%28v=vs.71%29.aspx)，例如

```
var builder = new StringBuilder();
for (i=0; i<Counter; i++){
     builder.Append("Hello " + i);
} 
```

之后，如果您需要完整的字符串

`builder.ToString()`.

比简单的字符串操作要快得多。

# iphone - 通过内存地址定位 EXC_BAD_ACCESS

> ID：10488839
> 
> 赞同：0
> 
> 时间：2012-05-07T20:42:38.723
> 
> 标签：iphone

我有 NSZombieEnabled，并使用 Instruments 来获取有关我正在尝试解决的内存泄漏的一些信息。我没有切换到 ARC，因为我的公司没有让我们留出时间进行迁移。无论如何，我看到了对象类型，以及我的应用程序崩溃之前的调用。我还没有将其缩小到实际导致崩溃的原因。我试图保留我认为可能被过度释放的对象，只是为了看看这是否是罪魁祸首，但它仍然崩溃。在我在表中选择一行以推送具有该信息的新视图控制器后，最后两个调用是：

```
Release | 0 | Graphic Services | GSEventRunModal
Zombie | -1 | Graphic Services | GSEventRunModal 
```

当我设置了 All Exceptions 断点时，我看到了内存地址，但我不知道如何才能更好地查明导致 EXC BAD ACCESS 的实际对象。谢谢！

# c# - TwoWay 绑定不是真的 Two Way 吗？

> ID：10488845
> 
> 赞同：0
> 
> 时间：2012-05-07T20:43:07.747
> 
> 标签：c#, .net, wpf, binding

我有两种方式将字符串依赖属性绑定到 TextBox 的文本。

绑定看起来像这样：

```
Text="{Binding MyValue, Mode=TwoWay}" 
```

我有一些代码在 OnKeyUp （在附加属性中）中触发，设置`MyValue`. 但是，它没有将我的值应用到 Text 属性，而是相反。

以下是事件的顺序：

1.  用户输入如下所示的文本字符串：0299900650
2.  用户按下回车。
3.  在我的上键中，我将 MyValue 设置为 2999 并将焦点移至下一个字段。
4.  MyValue 的 setter 触发并使用 2999 执行 NotifiyPropertyChanged
5.  LostFocus 开火。
6.  MyValue 的设置器触发并使用 0299900650 执行 NotifiyPropertyChanged。

在我看来，我的价值并没有以某种方式回到“TextBox.Text”。当我失去焦点时，TextBox 正在使用它在 Text 属性中的值更新字符串的值（未更改的值，因为我的更改没有取回。）

这里有一些我不知道的 WPF 魔法吗？

注意：我已经仔细检查了我的绑定。（除了他们在 UI 上工作，所以我想他们去 UI 是正确的。）

注二：当我说“用户输入一个字符串”时，它实际上是一个扫描的条形码。但是由于我使用的是键盘楔形，就好像它是输入的一样。（但是，设置值的全部意义在于，如果用户扫描与打字相反，我会做一些不同的事情。）

**更新：** 我发现这是由于另一个属性有副作用。我能够解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:48:37.417

您只需跳入`WPF`绑定消息传递的并发冲突。为了证明这一点，请执行以下操作：

*   删除你的`OnKeyUp`偶数处理程序

和你做的一样。`Enter`单击时绑定机制会触发并将您的代码设置在属性后面。

如果您在 KeyUp 上进行操作，您的新值 2999 会被之后的绑定抑制。

要正确管理它，请使用[Converter](http://www.switchonthecode.com/tutorials/wpf-tutorial-binding-converters)并摆脱`OnKeyDown`订阅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T21:01:29.140

我发现这是由于另一个属性有副作用。我能够通过修复那个副作用来解决这个问题。

# sql - SQL 运算符？我在看什么？

> ID：10488850
> 
> 赞同：1
> 
> 时间：2012-05-07T20:43:21.843
> 
> 标签：sql, nested-sets

我找到了一个我试图在项目中使用的嵌套集模型的示例。我无法理解正在发生的事情的一小部分，这反过来又导致了它，所以我无法根据我的需要对其进行调整。该示例如下所示：

```
LOCK TABLE nested_category WRITE;

SELECT @myRight := rgt FROM nested_category
WHERE name = 'TELEVISIONS';

UPDATE nested_category SET rgt = rgt + 2 WHERE rgt > @myRight;
UPDATE nested_category SET lft = lft + 2 WHERE lft > @myRight;

INSERT INTO nested_category(name, lft, rgt)
VALUES ('GAME CONSOLES', @myRight + 1, @myRight + 2);

UNLOCK TABLES; 
```

我不明白在线上发生了什么`SELECT @myRight:=rgt FROM nested_category`。更具体地说，我没有掌握“@myRight := rgt”。那里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:45:38.853

看起来代码正在将`rgt`行中`nested_category`的值分配给`name = 'TELEVISIONS'`变量`@myRight`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T20:53:46.000

这是mysql中的赋值运算符。阅读此[http://dev.mysql.com/doc/refman/5.0/en/assignment-operators.html](http://dev.mysql.com/doc/refman/5.0/en/assignment-operators.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T20:47:56.167

```
SELECT @myRight := rgt FROM nested_category 
```

变量`myRight`将填充`rgt`表中列中的值`nested_category`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T20:54:09.817

至少[MySQL](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)和[Transact-SQL](http://msdn.microsoft.com/en-us/library/ff848809.aspx)支持用户定义的变量。

# objective-c - 如何绑定到表视图的多对多关系？

> ID：10488851
> 
> 赞同：0
> 
> 时间：2012-05-07T20:43:31.037
> 
> 标签：objective-c, cocoa, core-data, cocoa-bindings

我有一个带有数据库的程序：

问题 <->> 答案

这种关系是对多的。答案包含两个字段：值（是或否）和日期（创建视图时设置为现在）

我在 IB 中创建了一个窗口。在表中，第一列显示使用 ArrayController 的问题，第二列包括连接到最新答案的复选框。我不知道如何使用绑定从数据库中选择具有正确日期的特定答案。有没有办法将日期值从代码传递给 IB？我尝试使用两个单独的 ArrayController，但我不知道如何使用与第二个问题相关的答案来识别相关对象。也许有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T02:39:41.287

为什么不将所有数据存储在一个数组中，并通过键访问问题、答案和答案日期？或者您可以为此创建一个中间结构。

# java - 使用 JFreeChart 在 Java 中绘制数学函数

> ID：10488852
> 
> 赞同：2
> 
> 时间：2012-05-07T20:43:36.093
> 
> 标签：java, math, plot, jfreechart

我已经在谷歌上搜索了一段时间，没有找到任何有用的东西，所以我问你们。

我可以用 JFreeChart 绘制数学函数（例如正弦、余弦等）吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T20:59:09.667

JFreeChart 用于绘制数据，而不是函数。但是您应该能够创建一个 (x,y) 值的表，然后绘制它们。如果这是针对桌面应用程序，请查看 JavaFX api。该 API 包括用于绘制线条的图表和函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T20:57:33.907

我假设您可以自己绘制点，在这种情况下，您只需评估图中每个 x 的数学函数。

```
getY(float x) {
    return /*your function*/ Math.sin(x);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-30T00:21:16.720

可能没有内置的方法来绘制 sinx，但不需要。请记住，您所说的是 y=sin(x)！您需要绘制的是 x 和 y 值。创建一个 x 值循环，然后使用 Java 和 Math 将它们插入 sin(x)。这个答案就是你的 y 值！所以现在你有了你的 x 和 y 值来绘制 sin(x)。

例子

```
final XYSeries series1 = new XYSeries("First");

    for(double i = 0; i < 10; i += 0.2){
        double sinx = Math.sin(i);
        series1.add(i, sinx);
    }

    final XYSeriesCollection dataset = new XYSeriesCollection();
    dataset.addSeries(series1); 
```

# ruby-on-rails - haml_tag 直接输出到 Haml 模板

> ID：10488855
> 
> 赞同：8
> 
> 时间：2012-05-07T20:43:54.873
> 
> 标签：ruby-on-rails, ruby, haml

我的 HAML 模板的这个助手有什么问题？

```
 def display_event(event)
    event = MultiJson.decode(event)
    markup_class = get_markup_class(event)
    haml_tag :li, :class => markup_class do
      haml_tag :b, "Foo"
      haml_tag :i, "Bar"
    end
  end 
```

这是错误：

```
haml_tag outputs directly to the Haml template.
Disregard its return value and use the - operator,
or use capture_haml to get the value as a String. 
```

模板调用 display_event 是这样的：

```
 - @events.each do |event|
     = display_event(event) 
```

如果我使用常规标记，它将扩展到以下内容

```
%li.fooclass
   %b Foo
   %i Bar 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-07T20:59:26.380

线索在错误消息中：

```
Disregard its return value and use the - operator,
or use capture_haml to get the value as a String. 
```

从文档中[`haml_tag`](http://haml.info/docs/yardoc/Haml/Helpers.html#haml_tag-instance_method)：

> `haml_tag`直接输出到缓冲区；不应使用其返回值。如果您需要以字符串形式获取结果，请使用`#capture_haml`.

要修复它，请将您的 Haml 更改为：

```
- @events.each do |event|
  - display_event(event) 
```

（即使用`-`运算符而不是`=`），或更改要使用的方法[`capture_haml`](http://haml.info/docs/yardoc/Haml/Helpers.html#capture_haml-instance_method)：

```
def display_event()
  event = MultiJson.decode(event)
  markup_class = get_markup_class(event)
  capture_haml do
    haml_tag :li, :class => markup_class do
      haml_tag :b, "Foo"
      haml_tag :i, "Bar"
    end
  end
end 
```

这将使该方法返回一个字符串，然后您可以`=`在 Haml 中显示该字符串。

请注意，您只需进行*其中一项*更改，如果您同时进行两项更改，它们将相互抵消，您将不会显示任何内容。

# android - 如何在 Android 设备上编写手机外壳脚本

> ID：10488857
> 
> 赞同：1
> 
> 时间：2012-05-07T20:44:04.737
> 
> 标签：android, shell, adb, at-command

我需要为 Android 编写一个脚本，使用 ADB 下载，并在手机上执行以下操作：

1.  关闭协议栈（相当于AT命令AT+CFUN=0\n）
2.  开启协议栈（相当于AT指令AT+CFUN=1\n）
3.  建立 PDP 上下文

对于识别为 COM 端口的设备，这很容易 - 只需打开 COM 端口并发送适当的 AT 命令。但是我如何用 Android 设备做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-27T20:04:41.263

android 市场上的脚本管理器应该提供一些方向，以及使用、编写和调度此类脚本的催化剂。

# java - = 运算符抛出异常

> ID：10488858
> 
> 赞同：-1
> 
> 时间：2012-05-07T20:44:05.047
> 
> 标签：java, sorting

我是一个非常新手的 Java 程序员。我正在尝试使用 compareTo 函数对字符串数组进行排序。但是在我的代码中，“=”运算符导致代码出现问题。有人可以帮我吗？谢谢

```
public class StringSort 
{
    static String arr[]= ("Now","My","There","When");
        public static void main(String[] args) 
    {

        for(int i=0;i<arr.length;i++)
        {
            for(int j=0;j<arr.length;j++)
            {
                if(arr[i].compareTo(arr[j])<0)
                {
                    String t=arr[j];
                    arr[j]=arr[i];
                    arr[i]=t;
                }
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-07T20:45:15.327

在数组初始值设定项周围使用大括号而不是括号。

```
 static String arr[]= {"Now","My","There","When"}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T20:46:04.453

`static String arr[]= new String[]{"Now","My","There","When"};`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T20:46:03.603

当直接声明一个包含项目的数组时，您使用花括号。

```
static String arr[]= {"Now","My","There","When"}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T21:06:43.617

如果可以，最好将其设为私有和最终版本。也使用 Java 数组表示法代替 f C 表示法。

```
private final static String[] arr = {"Now","My","There","When"}; 
```

最好将字段的范围限制在它所在的位置（即创建、使用和丢弃）。即它仅用于一种方法，因此您可以在那里定义它。

```
public static void main(String[] args) {
    String[] arr = "Now,My,There,When".split(",");
    Arrays.sort(arr);
    System.out.println(Arrays.toString(arr));
} 
```

# jquery - 使用 jQuery 自动将事件处理程序添加到新创建的元素

> ID：10488861
> 
> 赞同：4
> 
> 时间：2012-05-07T20:44:13.293
> 
> 标签：jquery

准备好文档后，我将此事件处理程序附加到具有类 bubbleItemOff 的所有元素。我的问题是一些bubbleItemOff 元素是在触发文档就绪事件后动态创建的。

有没有办法自动将事件处理程序添加到新创建的元素，或者我必须在创建元素后显式地这样做？

```
 $(function() {
      $('.bubbleItemOff').mouseenter(function(e) 
       {
          //...
       });
   }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T20:45:25.060

您可以在委托事件方法中使用 jQuery[`on`](http://api.jquery.com/on/)方法：

```
$(".parentItem").on("mouseenter", ".bubbleItemOff", function(e) {
    //
}); 
```

这里`.parentItem`指`.bubbleItemOff`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T20:46:31.483

使用`on()`方法在公共父元素上使用事件委托（假设您使用的是 jQuery 1.7.x +），例如

```
$(function() {
    $('body').on('mouseenter', '.bubbleItemOff', function(e) 
    {
     ...
    }
} 
```

如果您使用的是旧版本，请`delegate()`改用。`body`随第一个共同的父元素改变`.bubbleItemOff`

# visual-studio - 在 Visual Studio 2010 中设置 Visual Studio 2008 网站项目

> ID：10488865
> 
> 赞同：0
> 
> 时间：2012-05-07T20:44:25.300
> 
> 标签：visual-studio, visual-studio-2010, visual-studio-2008

我的开发机器最近从 XP/VS 2008 升级到 Windows 7/VS 2010。我有一个网站项目，我需要在 2010 年继续作为网站（而不是 Web 应用程序项目）运行。理想情况下，我会就像解决方案文件位于我系统的 Web 根目录 (C:\Webs) 中，但如果它们位于我的文档中，那很好。

重要的部分是我有一个文件夹（称为 Data，位于 C:\Webs 下），其中包含大约 20 GB 的 .rft 和 .pdf 文件等，这些文件需要位于 Web 根目录上，因此应用程序可以访问这些文件文件，但不是构建过程的一部分。

我尝试使用我的文档中的解决方案设置一个新的空白网站，但问题是当我将文件夹从我的 web 目录（我需要从中运行）拖放到解决方案资源管理器窗口中时，实际文件被复制并复制到“我的文档”文件夹中，而不是指向文件的“指针”。

有人可以告诉我如何在 VS 2010 中设置一个新的网站样式项目并包含我的 Webs 文件夹中的文件，同时允许我从整个项目中排除我的 Data 文件夹，但可以通过以下方式访问其中的文件编码？

谢谢！麦克风

# html - 以原生 HTML5 模式和全屏嵌入 YouTube 视频

> ID：10488880
> 
> 赞同：14
> 
> 时间：2012-05-07T20:45:36.450
> 
> 标签：html, video, youtube

我一般都知道 HTML5 视频和全屏的问题。但是，这是关于嵌入式 YouTube 视频和使用 YouTube 默认 iframe 嵌入代码的。

背景是我试图更深入地回答[我自己关于 YouTube 视频的无缝和沙盒的问题。](https://stackoverflow.com/questions/10324159/is-there-any-point-in-using-the-seamless-and-or-sandbox-attribute-for-youtube-if)工作已在[测试页面开始](http://keryx.se/dev/html5/sandboxed-seamless-youtube-test.html)

（请注意，到目前为止，表单元素根本不起作用。）

问题是，如果我登录 HTML 试用版，目前我无法全屏播放**任何视频。**因此属性毫无意义。

是否有人对 YouTube 提供全屏的计划有**最新的了解，以及浏览器是否会因为安全限制而允许它，或者今天有解决该问题的方法？**

我不希望默认启用全屏。用户必须由他/她自己启动它。

使用替代视频播放器目前不是一种选择，因为其目的是测试 YouTube 的默认代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-16T06:48:36.727

将此添加到 iframe src 的末尾：

**允许全屏**

这应该是您的代码：

```
<iframe width="500" height="500" src="https://www.youtube.com/embed/0U8VA-0SF5E" frameborder="0" allowfullscreen></iframe>
```

# php - 为电话号码添加分隔符

> ID：10488882
> 
> 赞同：1
> 
> 时间：2012-05-07T20:45:52.870
> 
> 标签：php, explode

我需要转这个电话号码：

```
5555555555 
```

带分隔符的字符串：

```
"555.555.5555" 
```

这是我的代码：

```
$phone = 5555555555;
$phoneArray = explode(2, $phone);
print_r($phoneArray); 
```

它返回这个：

```
Array ( [0] => 555 [1] => [2] => 55555 ) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T20:51:32.453

你需要更多这样的东西：

```
$number = '123456789';
$segments = array();

$segments[] = substr($number, 0, 3);
$segments[] = substr($number, 3, 3);
$segments[] = substr($number, 6, 4);

$number = implode('.', $segments); // Comes out to 123.456.7890 
```

请注意，您需要先进行一些格式检查。您需要验证他们是否实际输入了一个没有分隔符号的 10 位数字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T20:55:09.173

有很多方法可以做到这一点，并且不需要 RegEx，但这里有一个很好且简单的带有 RegEx 的方法：

```
$phone = '5555555555';
echo preg_replace('/(\d{3})(\d{3})(\d{4})/', "$1.$2.$3", $phone); 
```

干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T20:58:56.120

您可能不想使用explode，因为您在字符串中没有已知的分隔符来导致拆分。您可以使用 str_split($phone,3) 这将为您提供 3 个 3 的数组元素和 1 的第 4 个。保留前两个并将最后两个合并到您的第三个数组元素中：

```
$phone = 5555555555;
$phoneArray = str_split($phone,3);
$phoneArray[2] .= phoneArray[3];

print_r($phoneArray); 
```

希望有帮助。

# javascript - Javascript：如何将对象数组转换为具有排序唯一数组的对象？

> ID：10488883
> 
> 赞同：5
> 
> 时间：2012-05-07T20:45:57.043
> 
> 标签：javascript

有具有这种结构的数据：

```
$input = [ { animal: 'cat', name: 'Rocky', value: 1 },
           { animal: 'cat', name: 'Spot',  value: 2 },
           { animal: 'dog', name: 'Spot',  value: 3 } ]; 
```

需要最快的方法来转换为这种格式：

```
$output = { animal: [ 'cat', 'dog' ],
            name: [ 'Rocky', 'Spot' ],
            value: [ 1, 2, 3 ] }; 
```

输出的键应该等于输入中每个对象中的每个键。并且输出值应该是具有排序唯一值的数组。我找到了几种使用嵌套循环的方法，但比我想要的要慢。输入数组有 30,000 个元素，每个对象有 8 个键，我能做的最好的事情是 Chrome 中的 300 毫秒。想降到100ms。有没有更快的方法使用 map 或 reduce？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-20T23:12:59.200

现代浏览器的另一种方式：

```
$input.reduce(function(acc, obj) {
  Object.keys(obj).forEach(function(k) {
    acc[k] = (acc[k] || []).concat(obj[k])
  })
  return acc
},{}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T20:55:59.783

这是一种方法。

```
$input = [ { animal: 'cat', name: 'Rocky', value: 1 },
           { animal: 'cat', name: 'Spot',  value: 2 },
           { animal: 'dog', name: 'Spot',  value: 3 } ];

$output = {animal:{},name:{},value:{}};

$input.forEach(function(v,i) { 
    $output.animal[v.animal] = 1;
    $output.name[v.name] = 1;
    $output.value[v.value] = 1;
});

$output.animal = Object.keys($output.animal);
$output.name = Object.keys($output.name);
$output.value = Object.keys($output.value); 
```

它可以避免每次都测试每个数组。您可以进行性能比较以查看是否有帮助。

***现场示例：http:*** [//jsfiddle.net/TJVtj/1/](http://jsfiddle.net/TJVtj/1/)

* * *

如果您不想对密钥进行硬编码，则可以将解决方案设为通用。

```
var keys = Object.keys($input[0]),
    $output = {};

keys.forEach(function(v) {
    $output[v] = {};
});

$input.forEach(function(v) {
    keys.forEach(function(vv) {
        $output[vv][v[vv]] = 1;
    });
});

keys.forEach(function(v) {
    $output[v] = Object.keys($output[v]);
}); 
```

***现场示例：http:*** [//jsfiddle.net/TJVtj/2/](http://jsfiddle.net/TJVtj/2/)

*警告。所有值都是字符串，因为它们是作为对象键获取的。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T21:13:08.803

```
function inArray(needle, haystack) {
    var length = haystack.length;
    for(var i = 0; i < length; i++) {
        if(haystack[i] == needle) return true;
    }
    return false;
} 
```

以上功能用于检查重复项

```
$output={};
for(i=0; i< $input.length; i++)
{
    if(!$output.animal) $output.animal=[];
    if(!$output.name) $output.name=[];
    if(!$output.value) $output.value=[];
    var ani=$input[i];
    if(ani.animal && !inArray(ani.animal, $output.animal)) $output.animal.push(ani.animal);
    if(ani.name && !inArray(ani.name, $output.name)) $output.name.push(ani.name);
    if(ani.value) $output.value.push(ani.value);
} 
```

[**演示。**](http://jsfiddle.net/heera/GrWm7/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T21:46:46.120

// 如果您不知道所有对象都具有相同的键，则需要查看每个对象-

```
var output= {},
input= [{
    animal:'cat', name:'Rocky', value:1
},{
    animal:'cat', name:'Spot', value:2
},{
    animal:'dog', name:'Spot', value:3
}];
input.forEach(function(itm){
    for(var p in itm){
        if(itm.hasOwnProperty(p)){
            if(!output[p]) output[p]= [];
            if(output[p].indexOf(itm[p])== -1) output[p].push(itm[p]);
        }
    }
});

Run.expose(output)// nonstandard object to string method

// returned value: (String)
{
    animal:[
        'cat',
        'dog'
    ],
    name:[
        'Rocky',
        'Spot'
    ],
    value:[
        1,
        2,
        3
    ]
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-07T20:50:57.907

试试[下划线](http://documentcloud.github.com/underscore/)，这种任务很棒）

# excel - 在vba的不同目录中另存为.xlsx

> ID：10488895
> 
> 赞同：2
> 
> 时间：2012-05-07T20:46:38.470
> 
> 标签：excel, vba, save, save-as

我正在尝试使用该`SaveAs`方法将 .csv 文档另存为 .xls 文档。但是，当我尝试指定文件夹时，它失败了。

例如，它将保存到这里的某个默认目录（我的文档，这不是我准备好的地方）：

```
Sub csv()
Workbooks.Open Filename:="directory/tmp.csv"
ActiveWorkbook.SaveAs Filename:="test.xlxs", FileFormat:=51, CreateBackup:=False
End Sub 
```

但这失败了：

```
Sub csv()
Workbooks.Open Filename:="directory/tmp.csv"
ActiveWorkbook.SaveAs Filename:="otherdirectory/test.xlxs", FileFormat:=51, CreateBackup:=False
End Sub 
```

有没有不同的方法来指定目录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T20:52:11.760

采用`FileFormat:=xlCSV`

这对我有用。

```
ActiveWorkbook.SaveAs Filename:="C:\test.csv", FileFormat:=6, CreateBackup:=False 
```

如有疑问，请录制宏:)

`FileFormat`常数`xlCSV`是。您可以输入`FileFormat:=xlCSV`，也可以使用它的实际值，即 6

**编辑**

我看到你已经编辑了这个问题 :) 让我再看一遍 :)

> > > 有没有不同的方法来指定目录？谢谢，

您指定的确切路径是什么？我用过`Filename:="C:\Users\Siddharth Rout\Desktop\Book1.xlsx"`，效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T20:07:17.537

您可以通过写出整个路径来执行 Siddarth 建议并指定目录。或者，如果您希望用户能够在保存时更改文件存储的目录，您可以使用：

ChDrive (文件路径) ChDir (文件路径)

其中文件路径将是与 Application.GetSaveAsFilename 一起使用的起始目录。然后，用户可以键入文件名或根据需要更改目录。

# php - 将变量传递到包含的 PHP 文件中以用作 MySQL 查询

> ID：10488896
> 
> 赞同：2
> 
> 时间：2012-05-07T20:46:39.377
> 
> 标签：php, mysql, variables, include

我无法将两个变量传递到包含的文件中。

可见页面：

```
<?php

$sqlCount = "This is a working MySQL query.";
$sqlQuery = "This is also a working MySQL query.";

include("include.php");

?> 
```

包括.php：

```
<?php

$result = mysql_query($sqlCount, $conn) or trigger_error("SQL", E_USER_ERROR);
//$result populates variables to be used in second portion of code
//don't need $result anymore

$result = mysql_query($sqlQuery, $conn) or trigger_error("SQL", E_USER_ERROR);
//rest of my code

?> 
```

当我不包含它时，该代码在可查看的 PHP 页面中有效。当我将 $sqlCount 和 $sqlQuery 移动到 include.php 中时，它也可以工作。

我能找到的唯一真正的解决方案是将它们声明为全局变量，但是当我尝试时它什么也没做。

*编辑：我想通了。$sqlQuery 在查询中有变量，直到在 include.php 文件中才被创建。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T21:36:02.707

你试过了吗

包括.php：

```
<?php

echo $sqlCount; die();   // just to be sure you have what you expect?
$result = mysql_query($sqlCount, $conn) or trigger_error("SQL", E_USER_ERROR); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T21:16:16.573

在我看来，更好的方法是将“include.php”中的代码重写为一个函数，然后您可以从“可查看页面”调用它：

包含.php

```
<?php
function included_function($sql_count, $sql_query)
{
    $result = mysql_query($sql_count, $conn) or trigger_error("SQL", E_USER_ERROR);
    //$result populates variables to be used in second portion of code
    //don't need $result anymore

    $result = mysql_query($sql_query, $conn) or trigger_error("SQL", E_USER_ERROR);
    //rest of my code
}
?> 
```

“可查看的页面”

```
<?php
include("include.php");

$sqlCount = "This is a working MySQL query.";
$sqlQuery = "This is also a working MySQL query.";

included_function($sqlCount, $sqlQuery);

?> 
```

# iphone - iPhone - 检测 SIM 卡的可用性

> ID：10488898
> 
> 赞同：11
> 
> 时间：2012-05-07T20:46:53.157
> 
> 标签：iphone, ios, core-telephony

我正在使用本主题中的答案。[iPhone - 如何确定设备的运营商（AT&T、Verizon 等？） ，这与](https://stackoverflow.com/questions/8161235/iphone-how-to-determine-carrier-of-the-device-att-verizon-etc/8161253#8161253)[在 iphone 中获取运营商详细信息](https://stackoverflow.com/questions/5204121/getting-operator-details-in-iphone)相同。虽然使用 SIM 卡时可以正常工作，但如果没有 SIM 卡，则返回的运营商名称是旧的运营商名称。它不会检测到 SIM 已被移除。

我知道这与 Apple 文档相矛盾，即如果没有载体，则 CTCarrier 对象应为零。但是在我的应用程序中，我记录了运营商信息，它给了我最新的运营商名称，尽管没有安装 sim。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-07T20:59:52.557

根据以下[文档](http://developer.apple.com/library/ios/DOCUMENTATION/NetworkingInternet/Reference/CTCarrier/Reference/Reference.html#//apple_ref/doc/uid/TP40009596-CH1-SW1)`[CTCarrier carrierName]`：

> 如果您为运营商配置设备，然后移除 SIM 卡，此属性将保留运营商的名称。

据我所知，您无法检测到是否安装了 SIM 卡。您只能使用 确定 WWAN 连接是否可用[`Reachability`](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-01-13T12:52:14.690

```
@import CoreTelephony;

-(BOOL)hasCellularCoverage
{
    CTTelephonyNetworkInfo *networkInfo = [CTTelephonyNetworkInfo new];
    CTCarrier *carrier = [networkInfo subscriberCellularProvider];

    if (!carrier.isoCountryCode) {
        NSLog(@"No sim present Or No cellular coverage or phone is on airplane mode.");
        return NO;
    }
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-12-16T13:15:13.333

CTCarrier对象有 5[个](https://developer.apple.com/library/IOS/documentation/NetworkingInternet/Reference/CTCarrier/Reference/Reference.html)属性：

```
allowsVOIP
carrierName
isoCountryCode
mobileCountryCode
mobileNetworkCode 
```

我已经对 CTCarrier 进行了一些测试，我得出的结论是，对于 iOS 7 ，在移除 SIM 时**，仅保留运营商名称和 allowVOIP**。isoCountryCode、mobileCountryCode 和 mobileNetworkCode 为 iOS 7 重置。这就是您可以检测 SIM 卡是否存在的方法。

对于 iOS 6，所有值都将保留。

我使用运行 iOS 7 的 iPhone 4S 和 iPhone 5 进行了测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-29T19:21:59.377

斯威夫特版本：

```
func hasCellularCoverage() -> Bool {

    let networkInfo = CTTelephonyNetworkInfo()

    guard let info = networkInfo.subscriberCellularProvider else {return false}

    if let carrier = info.isoCountryCode {
        print("No sim present Or No cellular coverage or phone is on airplane mode. Carrier = \(carrier)");
        return false
    }

    return true

} 
```

或者

```
func hasCellularCoverage() -> Bool {

    let networkInfo = CTTelephonyNetworkInfo()

    guard let info = networkInfo.subscriberCellularProvider else {return false}

    return info.isoCountryCode != nil ? false : true

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-30T09:51:50.510

希望对你有帮助：</p>

```
 if #available(iOS 12.0, *) {
        return CTTelephonyNetworkInfo().serviceSubscriberCellularProviders?.first?.value.mobileNetworkCode != nil
    } else {
        if let _ = CTTelephonyNetworkInfo().subscriberCellularProvider?.isoCountryCode {
            return true
        } else {
            return false
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-14T07:29:41.730

**斯威夫特 5.4 答案**

接受的答案已过时或不正确。

```
protocol SimCardServiceProtocol {
    var isAvailableSIM: Bool { get }
}

final class SimCardService: SimCardServiceProtocol {

    var isAvailableSIM: Bool {
        return CTTelephonyNetworkInfo().serviceSubscriberCellularProviders?.first?.value.mobileNetworkCode != nil
    }
} 
```

# mysql - Mysql：在不同节点之间拆分特定表的处理

> ID：10488902
> 
> 赞同：0
> 
> 时间：2012-05-07T20:47:18.347
> 
> 标签：mysql, database, algorithm

我有一个难题，也许你可以帮助我。

我有一个用作工作队列的表。记录已插入并需要处理。处理完一条记录后，将其从队列中删除。有一些限制：

*   在任何给定时间只有一个实体可以处理记录（“实体”是指：一个线程或连接到同一数据库的单独计算机）
*   实体有些动态。它们可能会改变（实体的数量或特征）
*   实体在 1 笔交易中处理记录
*   处理必须并行进行（如果实体 1 选择批次 1，实体 2 必须能够并行处理批次 2，无需等待实体 1 完成处理）
*   一旦实体选择了要处理的记录，则该记录所属的整个“批次”记录不得被其他实体选择。当我说“批处理”时，我的意思是该表（逻辑上）组织如下：
    *   第 1 行（批次 1）
    *   第 2 行（第 1 批）
    *   第 3 行（第 2 批）
    *   第 4 行（第 2 批）
    *   第 5 行（第 2 批）
    *   .... 等等。

因此，假设 entity1 和 entity2 都想从表中选择一个处理切片。如果 entity1 选择 row1，则 entity2 可以选择除 batch1 之外的任何其他内容（除 row1 和 row2 之外的任何其他内容）。

让我们抽象出处理部分，因为实际处理是什么并不重要。我很想知道如何阻止实体相互冲突，只使用 mysql 数据库，同时保持处理的并行性。

从我的角度来看，我看到了两个非常普遍的方向：

1.  使用某种状态字段，这表明特定实体已经选择了一批，并且必须将这个从未来的选择中排除。这个想法的缺点是如果选择批次的实体崩溃了，那么恢复其他实体的处理有点困难。
2.  使用mysql的锁，缺点是难以保证并行处理，而且不是顺序的。例如，我可以为实体 1 选择...进行更新。但是 entity2 不能执行相同的 select... for update，因为这将等待第一个实体完成处理，然后再获取它需要的批次。

我有兴趣知道：

*   哪个方向将导致最小的编码工作
*   我在这里还缺少其他方向吗（请记住，除了通过数据库之外，实体无法相互通信）
*   如果有这类问题的标准模式
*   如果你能指出一篇讨论这类问题的文章。
*   解决这个问题的最有效方法是什么。

所以我在这里是数据库必须在不同实体之间拆分一个表，以便处理，并且想知道最好的方法。我几乎不认为我是第一个处理这个问题的人，我想知道你的想法。另外，请注意，可以通过相当简单的标准（例如，batchId）分批拆分记录

亲切的问候，
安德烈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T21:25:31.653

嗯，根据您的描述，我看不出数据库记录锁定将如何做您想要的。数据库锁说“如果这条记录不可用，请等待”，而不是“如果这条记录不可用，请选择另一个”。

问题：当一个批次被处理时，它是否“完成”？我的意思是，假设节点 A 开始处理第 1 批。然后节点 B 出现，但无论你怎么做，发现第 1 批正在工作，因此它从第 2 批开始。然后节点 A 完成。然后节点 C 出现。当前未处理第 1 批。节点 C 应该得到第 1 批吗？还是第 1 批已经完成，第 2 批正在工作，所以我们必须继续进行第 3 批？如果完成了批处理，那么任何数据库锁定显然都不起作用，因为它不记得过去曾访问过记录，只记得现在正在发生的事情。

也许其他人有一个更聪明的解决方案，但我认为你将不得不使用状态标志来做到这一点。我会说：

创建一个单独的 Batch 表，每批有一条记录。在指向批处理表的工作队列表中放置一个外键。这样我们就可以保持数据标准化。

在批处理表中，添加一个状态标志，其中包含工作中和非工作中的值；或未处理的、工作中的和已处理的。（取决于批次是否一劳永逸地“完成”。）还创建一个“处理实体”字段，该字段标识哪个实体正在处理该批次（如果它在工作中），否则为 null。（如果唯一的状态是工作中和非工作中，则该字段可以兼作工作中标志：null=not in-work，not null=in-work。）

当实体开始处理批次时，它会将处理实体字段设置为实体 ID。完成后，它将字段重置为空。当一个实体正在寻找要处理的批次时，它会选择“其中 processing_entity 为空”（当然还有其他任何条件）。

然后，为了确保实体没有崩溃而离开标志集，每次实体启动时，它都会检查是否有 Batch 记录表明它正在处理它。如果是这样，它一定已经崩溃了，所以它会重置标志并进行任何清理。

这仅在实体集是固定的情况下才有效，例如，如果实体是服务器，或者它是来自线程池的线程。如果它们是可以任意来来去去的线程，它就行不通，因为你不能指望线程重新启动来告诉它没有完成工作。

我使用的另一种方法是在批处理记录中放置一个时间戳，说明我们何时开始处理。然后我有另一个进程不时运行，检查时间戳，并与一些合理的最大时间进行比较。例如，如果我们知道该进程应该花费几秒钟，并且我们看到一个时间戳是一小时前的，那么该进程要么死亡，要么挂起，我们应该适当地进行清理。这确实有一个问题，它要求您能够说出最长时间是多少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:48:47.577

我过去对此的解决方案是使用“唯一编号”更新表中的“batch_id”列，然后使用该唯一批次编号从表中进行选择。

因此，在您的情况下，实体 1 出现：“UPDATE tbl SET batch_id='123456789' WHERE batch_id='0' LIMIT 1”然后“SELECT * FROM tbl WHERE batch_id='123456789'”

实体 2 出现并以其唯一的编号“15791579”重复该过程（因此它无法更新批次 1）并选择批次 2 等。

# jquery - 将 RSS 转换为 JSON

> ID：10488903
> 
> 赞同：6
> 
> 时间：2012-05-07T20:47:23.407
> 
> 标签：jquery, json

我正在尝试将 RSS 转换为 JSON，但是当我在 Chrome 中使用控制台时出现此错误

> XMLHttpRequest 无法加载 [http://www.blastcasta.com/feed-to-json.aspx?feedurl=http://www.startalkradio.net/?page_id=354](http://www.blastcasta.com/feed-to-json.aspx?feedurl=http://www.startalkradio.net/?page_id=354)。Access-Control-Allow-Origin 不允许 Origin null。

jQuery：

```
$(document).ready(function() {
    var rss_url = "http://www.blastcasta.com/feed-to-json.aspx?feedurl=http://www.startalkradio.net/?page_id=354";

    $.ajax({
        type : 'GET',
        url : rss_url,
        succces : function(data) {
            $.each(data.rss, function(i, item) {
                $("#results").append('<ul>' + item.channel.item.description + '</ul>');

            });
        },
        dataType : 'json',
        async : true
    });

    function fetchRss(data) {
        $.each(data.rss, function(i, item) {
            $("#results").append('<ul>' + item.channel.item.description + '</ul>');

        });
    }

}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-07T20:50:51.680

**更新**：这个答案建议使用已弃用的 Google Feed API。其他选项包括 Superfeedr：[将 RSS 转换为 JSON](http://blog.superfeedr.com/convert-rss-to-json/)

发生该错误是因为 RSS 文件不在您的服务器中，因此您违反了 Access-Control-Allow-Origin。

试试这个用于 RSS 跨域目的的插件：

[http://jquery-howto.blogspot.com/2009/11/cross-domain-rss-to-json-converter.html](http://jquery-howto.blogspot.com/2009/11/cross-domain-rss-to-json-converter.html)

**编辑：**

**图书馆下载链接：**

[http://code.google.com/p/lomodroid/source/browse/src/functions/jquery.jgfeed.js](http://code.google.com/p/lomodroid/source/browse/src/functions/jquery.jgfeed.js)

**推特现场演示：**

[http://jsfiddle.net/oscarj24/NbDWb/](http://jsfiddle.net/oscarj24/NbDWb/)

**带有问题中使用的链接的实时演示：**

[http://jsfiddle.net/oscarj24/NbDWb/3/](http://jsfiddle.net/oscarj24/NbDWb/3/)

这会将 RSS 转换为 JSON

```
<script src="jquery.js"></script>
<script src="jquery.jgfeed.js"></script>
<script>
$.jGFeed('http://twitter.com/statuses/user_timeline/26767000.rss',
  function(feeds){
    // Check for errors
    if(!feeds){
      // there was an error
      return false;
    }
    // do whatever you want with feeds here
    for(var i=0; i<feeds.entries.length; i++){
      var entry = feeds.entries[i];
      // Entry title
      entry.title;
    }
  }, 10);
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T20:50:40.603

好吧，基本上它真的很简单。您无法加载该 URL，因为 JavaScript/您的浏览器不允许它。（因为同源政策）。

您将不得不使用脚本语言（如 PHP）或其他东西来完成，而不是通过 JavaScript

除非您有权访问源（RSS 位置）并且可以添加标题以允许源

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-20T02:51:55.960

[Google Feeds API](https://developers.google.com/feed/v1/devguide)可以轻松做到这一点。只需使用`google.feeds.Feed.JSON_FORMAT`结果格式。这也是[相关的文档](https://developers.google.com/feed/v1/devguide#resultJson)。

# mysql - 从“有效”日期表中获取第 n 个日期

> ID：10488905
> 
> 赞同：0
> 
> 时间：2012-05-07T20:47:44.493
> 
> 标签：mysql, date, limit

我有一张表，其中只包含未来 20 年的日期。我使用此表作为快速查找来确定与我的申请相关的日期的某些信息 - 例如，如果日期是假期，日期是否已用某个指标标记，等等。

我正在尝试做的是从我的表中提取第 n 个有效日期，从指定日期开始。本质上，我只是用有限子查询的返回值更新一个值。这是我的代码 - 我在限制上遇到错误。

```
UPDATE _piece_detail
INNER JOIN mail_classes 
   ON mail_classes.class_id = _piece_detail.class_id
SET _piece_detail.est_delivery_date = 
(SELECT date_value FROM date_lookup 
WHERE date_value >= _piece_detail.date_prepared AND holiday != 1 
LIMIT mail_classes.max_days,1)
WHERE est_delivery_date IS NULL; 
```

我试过转换`mail_classes.max_days`成一个整数，但仍然没有运气。我需要它是可变的，因为我需要计算的天数是基于邮件类的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:52:06.953

试试这个：

```
(SELECT min(date_value) FROM date_lookup 
 WHERE date_value >= _piece_detail.date_prepared AND holiday != 1) 
```

这将返回给定日期之后的第一个非节假日。

如果您担心性能，请在“nextNonHoliday”表中添加一个新列并预先计算这些值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:31:17.020

LIMIT 不能有可变参数，它们必须是常量。因此它既不能是表字段值，也不能是用户定义的变量。我建议以下解决方案：

```
SET @rownum:=0;
UPDATE _piece_detail
INNER JOIN mail_classes 
ON mail_classes.class_id = _piece_detail.class_id
SET _piece_detail.est_delivery_date = 
(
  SELECT date_value FROM 
  (
    SELECT date_value,(@rownum:=@rownum+1) AS rownum FROM date_lookup 
    WHERE date_value >= _piece_detail.date_prepared AND holiday != 1 
  ) 
  AS t_tmp
  WHERE t_tmp.rownum = mail_classes.max_days
)
WHERE est_delivery_date IS NULL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T02:14:25.127

我通过创建一个函数并将其与我的例程一起使用来解决这个问题。功能如下：

```
CREATE DEFINER=`sample`@`%` FUNCTION `get_valid_date`(start_date DATE, added_days INT) RETURNS date
    DETERMINISTIC
BEGIN
     DECLARE new_date DATE;

    SELECT date_value 
    FROM date_tbl
    WHERE date_tbl.date_value >= start_date
        AND date_tbl.day_of_week != 1
    LIMIT added_days,1
    INTO new_date;

     RETURN new_date;

END 
```

# jquery - 是否可以使用 jQuery 选择器在没有插件的情况下访问 Struts2 元素？

> ID：10488912
> 
> 赞同：2
> 
> 时间：2012-05-07T20:48:22.393
> 
> 标签：jquery, jsp, struts2

我是 Struts2 的新手，但我一直遇到 jQuery 选择器无法访问我们在 jsps 中定义的任何 Struts2 标记的问题。

我假设如果没有大量自定义代码或插件，它们就不会集成，但我无法找到任何明确的书面资料。当我进入[strut2-jQuery 插件](https://code.google.com/p/struts2-jquery/)页面时，他们提到最好在他们的常见问题解答中使用插件，但不是必需的。

我在这里错过了什么吗？如果我有一个元素的 struts2 标记并尝试使用 jQuery 选择它，它似乎不起作用。我说的是基本元素，比如

```
$('form').find(':input').change(function() { ...  //or

$('#testbutton').attr('disabled', true);  //or

 $('#formName').change(function() { 
          alert("Found form!"); 
     }); 
```

因此，当我查看查看源代码时，我看到了从标签生成的常规 html 代码，如果它来自 struts2 标签而不是具有相同 jQuery 选择器代码的常规 html 标签，我无法使用选择器访问这些特定元素。

另一个项目，我正在使用类似这样的东西来引用 jsp 页面上的 jQuery：

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T21:22:54.967

HTML 的生成方式与客户端（浏览器）无关，客户端不知道生成的 DOM 之外的任何内容。

如果有一个 ID，或者它是一个输入，jQuery 会找到它——我多年来一直使用纯 jQuery（和 Prototype）和 S2 应用程序没有问题。

还有什么不对劲的。

* * *

*编辑以显示 JSP、呈现的 HTML 和控制台输出。*

JSP：

```
<s:form action="simpleForm">
  <s:textfield name="fname"/>
  <s:submit value="Go!"/>
</s:form> 
```

呈现的 HTML（假设默认`"xhtml"`主题）：

```
<form id="simpleForm" name="simpleForm" action="/simpleForm.action" method="post">
  <table class="wwFormTable">
    <tr>
      <td class="tdLabel"></td>
      <td><input type="text" name="fname" value="" id="simpleForm_fname"/></td>
    </tr>

    <tr>
      <td colspan="2"><div align="right"><input type="submit" id="simpleForm_0" value="Go!"/>
      </div></td>
    </tr>
  </table></form> 
```

一些控制台输出：

```
> $("form")
[<form id=​"simpleForm" name=​"simpleForm" action=​"/​simpleForm.action" method=​"post">​…​&lt;/form>​]
> $("form").find(":input")
[<input type=​"text" name=​"fname" value=​"d" id=​"simpleForm_fname">​, 
 <input type=​"submit" id=​"simpleForm_0" value=​"Go!">​]
> $("form").find("input") // Don't need the ":"
[<input type=​"text" name=​"fname" value=​"d" id=​"simpleForm_fname">​,
 <input type=​"submit" id=​"simpleForm_0" value=​"Go!">​] 
```

# python - 如何在 Python 中获取用户访问令牌

> ID：10488913
> 
> 赞同：4
> 
> 时间：2012-05-07T20:48:28.357
> 
> 标签：python, facebook, sdk, token

我正在为 Facebook 使用非官方的 python sdk。这适用于很多图形 api 调用，但我最近的项目需要使用更多 FQL。某些表（例如通知）需要用户访问令牌而不是应用程序访问令牌。

使用时

```
graph.facebook.com/oauth/access_token?client_id=YOUR_APP_ID&client_secret=YOUR_A‌​PP_SECRET&grant_type=client_credentials 
```

看来我只得到了一个 App 令牌。因此，当调用通知表时，我会收到“102：请求此资源需要用户访问令牌”

这个项目根本不使用浏览器，主要是为了验证通知，以及从另一个应用程序生成的帖子。

在这种情况下，接收用户令牌的最佳方式是什么？

谢谢 N

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T21:59:03.887

如果没有登录用户使用 facebook 身份验证流程与您的应用程序直接交互，您将无法获取用户访问令牌。唯一可以在没有用户的情况下获得的令牌是应用程序令牌，您已经了解了这一点。

您可以手动创建用户令牌，我认为最简单的方法是使用[Graph Explorer tool](http://developers.facebook.com/tools/explorer)。只需在右上角选择您的应用程序，然后单击*“获取访问令牌”*按钮，然后您可以检查所需的权限，然后生成的令牌将出现在文本框中，复制并使用它。

问题在于访问令牌是短暂的（几个小时），如果您需要更长的时间，我建议您创建一个仅实现[服务器端身份验证](http://developers.facebook.com/docs/authentication/server-side/)的画布应用程序，该身份验证将以长 -活令牌（60 天），然后您可以将其持久化并在该时间段内使用它。

# objective-c - 淡出 NSScrollView 的顶部和底部

> ID：10488914
> 
> 赞同：2
> 
> 时间：2012-05-07T20:48:29.537
> 
> 标签：objective-c, xcode, macos, cocoa, nsscrollview

有没有办法让 NSScrollView 的顶部和底部边缘淡化为透明？我已经看到一些代码/答案通过向子视图添加某种颜色的渐变来“淡化”它，基本上，用背景颜色覆盖顶部和底部。但是，我希望它实际上淡化为 alpha=0，因此您实际上可以看到滚动视图后面的视图内容。我计划我的应用程序在这个 NSScrollView 后面有各种背景，并且在边框上没有任何类型的过渡，它看起来很便宜。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-16T09:09:14.903

[从这里](https://stackoverflow.com/a/29735912/978055)转换了一个简单的 iOS 实现以使用 macOS Swift。

把它放在你的`NSScrollView`子类中：

```
let fadePercentage: Float = 0.05

override func layout() {

    super.layout()

    let transparent = NSColor.clear.cgColor
    let opaque = NSColor.controlDarkShadowColor.cgColor

    let maskLayer = CALayer()
    maskLayer.frame = self.bounds

    let gradientLayer = CAGradientLayer()
    gradientLayer.frame = NSMakeRect(self.bounds.origin.x, 0, self.bounds.size.width, self.bounds.size.height)
    gradientLayer.colors = [transparent, opaque, opaque, transparent]
    gradientLayer.locations = [0, NSNumber(value: fadePercentage), NSNumber(value: 1 - fadePercentage), 1]

    maskLayer.addSublayer(gradientLayer)
    self.layer?.mask = maskLayer

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:06:58.420

这是为您准备的底部和顶部渐变：

[https://github.com/jnozzi/JLNFadingScrollView](https://github.com/jnozzi/JLNFadingScrollView)

> 您可以配置它的淡入淡出颜色（通常是灰色/黑色作为阴影或滚动视图的背景色作为'fade-to-nothing'）

# linux - bash脚本打开chrome然后在chrome关闭时关闭计算机

> ID：10488920
> 
> 赞同：3
> 
> 时间：2012-05-07T20:49:03.930
> 
> 标签：linux, bash, wait

我想用 bash 编写启动脚本，以使 ubuntu 盒子对爷爷更友好。

脚本应该：

打开 chrome 等到 chrome 关闭 关闭计算机

到目前为止我有

```
#!/bin/bash
if [ -z "$1" ]; then
    address="http:\\www.google.co.uk"
else
    address=$1
fi

echo starting the internet
google-chrome $address

while [ 1=1 ];
do
   grep_resp=$(ps aux | grep chrome)
   if [ -z "$grep_resp" ]; then
       echo turning computer off 
   else
       echo chrome still running
   fi
   sleep 5
done 
```

但“chrome”的 grep 在进程列表中

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T21:08:41.567

你得到那个错误是因为`$grep_resp`在这个......

```
if [ -z $grep_resp ]; then 
```

...可能会扩展为包含空格的字符串。如果你在它周围加上引号：

```
 if [ -z "$grep_resp" ]; then 
```

它会做你所期望的。但是，我认为所有这些都可能是不必要的。Chrome在运行时不会自动后台或任何东西，所以你应该能够做到这一点：

```
google-chrome $address
echo turning computer off
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T21:08:29.977

怎么样：

```
#!/bin/bash

user=gramps

sudo -u "$user" -- chrome "$1"; shutdown -P now 
```

脚本以root身份运行的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T21:08:31.223

第 14 行应该是

```
if [ -z "$grep_resp" ]; then 
```

它需要在引号中，因为字符串中有空格。

# ios - 核心数据中的 UIImage

> ID：10488922
> 
> 赞同：1
> 
> 时间：2012-05-07T20:49:10.590
> 
> 标签：ios, core-data, uiimage

此代码应将我的 uiimage 保存到核心数据。图像存储在它自己的实体中并喜欢另一个实体（关系）

```
 NSEntityDescription *imageEntity = [ NSEntityDescription insertNewObjectForEntityForName:kImage inManagedObjectContext:self.context];
    [imageEntity setValue:self.image forKey:kPicture];

    [newPerson setValue:imageEntity forKey:kPicture];

    NSError *error;
    if (![self.context save:&error]) {
        NSLog(@"Whoops, couldn't save new associate: %@", [error localizedDescription]);
    } 
```

在这里，我尝试将其取回，将其放在自定义单元格上的 uiimageview 中

```
 Person *crt = [self.fetchController objectAtIndexPath:indexPath];
    cell.name.text = crt.name;
    Image *img = crt.picture;
    cell.image.image = img.picture; 
```

这仅在第一次添加图片时有效......重新启动应用程序后，图像不再显示......这是为什么？它被设置为可转换的属性

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T20:57:58.407

您可以添加`UIImage`仅作为二进制数据。因此，您需要将实体的属性类型设置为`Binary Data`，并使用`CoreGraphics'`方法`UIImagePNGRepresentation(UIImage *image)`，该方法返回`NSData`并以这种方式保存。如果你想从数据库中提取它，你会得到`NSData`并使用方法创建一个图像`[UIimage imageWithData:(NSData *data)]`。
但我认为最好的实现是仅将图像的本地路径存储在数据库中，但实际文件存储在应用程序 Documents 文件夹中的文件夹中......只是一个建议。

# ksoap2 - 将 DateTime 响应映射到 java.util.Date（而不是 SoapPrimitive）

> ID：10488925
> 
> 赞同：0
> 
> 时间：2012-05-07T20:49:20.267
> 
> 标签：ksoap2, android-ksoap2

我在从响应中获取`Date`( ) 对象时遇到问题。这是响应 XML：`java.util.Date``ksoap2`

```
 <s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
    <s:Header></s:Header>
    <s:Body>
      <UpdateLocationResponse xmlns="http://tempuri.org/">
        <UpdateLocationResult>2012-05-07T13:34:34.7693883-04:00</UpdateLocationResult>
      </UpdateLocationResponse>
    </s:Body>
  </s:Envelope> 
```

这是我用来初始化信封和请求的代码（出于安全原因，使用***** ***代替真实姓名）：

```
static final String NAMESPACE = "http://tempuri.org/";
static final String URL = "http://****************.svc";

envelope.addMapping(NAMESPACE, "UpdateLocationResult", Date.class,
        new MarshalDate());
MarshalDate mdate = new MarshalDate();
mdate.register(envelope);
envelope.implicitTypes = true;

HttpTransportSE trans = new HttpTransportSE(URL);
trans.debug = true;

trans.call(SOAP_ACTION, envelope);
Object r = envelope.getResponse(); // r is always SoapPrimitive!!!
                                   // I want it to be a java.util.Date 
```

我尝试了命名空间、属性名称和编组器的所有组合，但无济于事。我总是得到`SoapPrimitive`回报`envelope.getResponse()`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:29:35.700

不也是一个字符串吗？尝试使用[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

这可能对您有用：

```
SoapPrimitive response = (SoapPrimitive) envelope.getResponse();
String strDate = response.toString(); 
```

# java - 如何向现有的 CSV 文件添加额外的列？

> ID：10488928
> 
> 赞同：1
> 
> 时间：2012-05-07T20:49:54.950
> 
> 标签：java, csv

您好 .csv 中需要快速帮助。

我应该如何添加一个额外的列来呈现 csv 文件。我在 .csv 文件中有 100 个客户信息。应用程序读取特定行后，附加一列“已读取此行”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:54:41.767

使用[OpenCSV](http://opencsv.sourceforge.net/#can-I-write)写入 csv 文件，您可以使用许多类似的第三方库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:58:02.730

无论您使用库还是制作自己的解析函数，您都需要执行以下操作：

1.  阅读文件。
2.  追加新列（基本上是静态字符串）。
3.  写入文件。

# java - 更改已实例化的实例变量的值的正确方法是什么？

> ID：10488929
> 
> 赞同：3
> 
> 时间：2012-05-07T20:49:57.767
> 
> 标签：java, instance-variables

如果我有一个具有私有可见性的实例变量，我应该使用 setter 来更改其值，还是直接更改值？

此示例中的实例变量只会在此类中更改，因此 setter 将是私有的。我认为使用 setter 是正确的方法，因为它可以本地化更改的方式/时间，但它只是出于某种原因困扰着我！

请参阅下面的代码，这可能有助于更清楚地表达我的问题

```
public class A {

private int i;

public A() {
   i = 5
}

private void doSomeCalculationsA() {
   //work done here which results in the value of i being directly changed
   i = 7
}

private void doSomeCalculationsB() {
   //work done here which results in change value of i being changed via the setter
   setI(5)
}

private void setI(int newValue) {
   i = newValue;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:53:50.953

我倾向于认为大多数时候更简单更清晰。如果你的 setI 只是一个二传手，我就不会拥有它。如果您想暗示该方法有一天可以做更多事情，您可能会考虑拥有一个，但对我来说[YAGNI](http://c2.com/xp/YouArentGonnaNeedIt.html)是最好的方法。

> “总是在你真正需要的时候实施，而不是在你预见到你需要它们的时候。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T20:53:34.137

除非在函数中实际完成了某些操作/计算，否则拥有私有 setter/getter 是没有意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T20:57:05.113

这里有两个考虑因素 - 可读性和刚性。如果这个变量真的是私有的，那么直接访问这个变量就很好了。它使变量引用更具可读性，因为毫无疑问引用是如何工作的以及它所引用的内容。一目了然，这一定是一个实例变量。

过去，我曾经建议为私有变量编写访问器，因为如果您需要更改获取值的方式（甚至是私有的），那么拥有大量直接引用可能会使问题变得棘手。这就是刚性问题。现在，我们有重构工具可以用一个菜单项抽象出一个变量，所以如果你需要创建和调用访问器，这并不难。所以，我改变了我的建议，更喜欢直接引用的简单性和可读性，而不是访问方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T20:53:15.777

最好的做法是调用类`setter/getter`的成员变量`Java POJO`，在你的情况下，我建议使用`setter`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T20:53:57.733

当且仅当变量没有从外部访问（即另一个对象请求它的值），那么在内部修改它是可以接受的。否则，您将不得不使用访问器/修改器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T20:54:06.953

使用 setter 的原因是如果您在更改变量时需要进行一些额外的更改或计算，或者提供从外部类对变量的有限访问。在这种情况下，它没有任何区别，但它增加了调用该方法所需的额外时间。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-07T20:55:33.383

这将取决于外部的另一个对象是否可以更改其值。例如，`ArrayList`该类具有`size`私有 setter`add`和`remove`操作的属性，而 getter 是公共的。如果另一个对象可以立即更改其值，那么您的 setter 应该是公开的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-07T20:56:33.870

最佳实践是有一个设置器，但没有它我不会觉得我做错了什么，因为我可以稍后添加它，只有在设置之前需要一些操作（例如验证）

在 OOP 术语中，由于您仍然被“封装”在对象的黑盒后面，我不确定它是否真的重要，并且没有设置器仍然可以。

我会尽量保持一致，并确保你有工作软件作为进度的衡量标准。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-07T20:56:44.333

我认为这里没有明显的赢家，这是风格问题。许多人更喜欢使用 setter，甚至在类中，说它提供了一个单一的更改点，例如验证，并且更容易跟踪谁更改了字段的值。尽管 IntelliSense 可以使用现代 IDE，但恕我直言，在大多数情况下都不需要验证，因此为它做准备可能只是一种推测性普遍性的温和案例。所以有时直接设置值会更简单。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-07T20:57:50.137

我使用一种方法的主要原因是如果一个变量与必须同时更改的第二个变量相关（考虑线程和并发问题）。

# ruby-on-rails - 匹配主干中的完整网址

> ID：10488932
> 
> 赞同：1
> 
> 时间：2012-05-07T20:50:11.077
> 
> 标签：ruby-on-rails, backbone.js

我正在寻找解决方案来为我的应用程序中的特定路由调用主干操作。

我知道可以匹配以下网址：

`localhost:3000/#posts/1`

但是如果我需要像这样匹配 url 怎么办：

`localhost:3000/posts/1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T21:21:35.200

选择加入新的 HTML 历史 API / `pushState`，例如：

```
 Backbone.history.start( { pushState : true } ); 
```

根据您的应用程序，您可能还需要采取其他步骤，例如：

> 请注意，使用真实 URL 需要您的 Web 服务器能够正确呈现这些页面，因此还需要进行后端更改。

[http://backbonejs.org/#History](http://backbonejs.org/#History)

# php - PHP - 数组元素问题

> ID：10488935
> 
> 赞同：2
> 
> 时间：2012-05-07T20:50:40.187
> 
> 标签：php, arrays

首先，我对 PHP 没有任何经验。我有 2 个阵列 - 最小压力和最大压力。他们都从数据库访问数据并创建一个简单的 xml 文件，如下所示：-

```
<pressuremaxhourly>1010,1009,1009,1009,1008,1008,1007,1005,1004,1003,1002,1002,1002,1002,1002,1002,1002,1002,1002,1002,1002,1001,1001,1001</pressuremaxhourly>
<pressureminhourly>1001,1009,1009,1008,1008,1006,1005,1004,1003,1002,1002,1002,1002,1002,1002,1002,1002,1002,1002,1001,1001,1001,1001,1001</pressureminhourly> 
```

问题是，如您所见，最小数组的第一个值始终等于最大数组的最后一个值（在本例中为“1001”）。这些数组每半小时左右被新值覆盖一次，但问题仍然存在。这是我使用的代码：-

```
$MaxPressure="select hour(datetime) AS hour, max(BarometricPressure) as MAXBP from minute WHERE DATETIME
BETWEEN (CURDATE() + INTERVAL (SELECT hour(NOW())) hour - INTERVAL 24 hour)
AND ((CURDATE() + INTERVAL (SELECT hour(NOW()))hour))
group by hour
order by (CURDATE() + INTERVAL (SELECT hour(NOW())) hour - INTERVAL 24 hour)";
$MaxPressureResult = mysql_query($MaxPressure) or  die('Failed to query'.mysql_error());

while ($row = mysql_fetch_object($MaxPressureResult)) {
    $maxpressure[]=$row->MAXBP;
}

$MinimumPressure="select hour(datetime) AS hour, min(BarometricPressure) as MINBP from minute WHERE DATETIME
BETWEEN (CURDATE() + INTERVAL (SELECT hour(NOW())) hour - INTERVAL 24 hour)
AND ((CURDATE() + INTERVAL (SELECT hour(NOW()))hour))
group by hour
order by (CURDATE() + INTERVAL (SELECT hour(NOW())) hour - INTERVAL 24 hour)";
$MinimumPressureResult = mysql_query($MinimumPressure) or  die('Failed to query'.mysql_error());

while ($minrow = mysql_fetch_object($MinimumPressureResult)) {
    $minimumpressure[]=$minrow->MINBP;
} 
```

这是用于创建 xml 文件的代码：-

```
$dom = new DOMDocument(); 
$root = $dom->createElement( "weatherdata" );
$dom->appendChild( $root );  
$item = $dom->createElement( 'item', "" );  
$root->appendChild($item);

$maxpressure = $dom->createElement( 'pressuremaxhourly', "$maxpressure[0],$maxpressure[1],$maxpressure[2],$maxpressure[3],$maxpressure[4], etc....for all values );  
$item ->appendChild($maxpressure);
$minimumpressure = $dom->createElement( 'pressureminhourly', "$minimumpressure[0],$minimumpressure[1],$minimumpressure[2],$minimumpressure[3],$minimumpressure[4], etc....for all values );  
$item ->appendChild($minimumpressure);
$dom->formatOutput = true;
$dom->save('Hourly.xml') 
```

注意：我已经检查了数据库中的数据并且它是正确的，所以很明显是脚本有问题。对不起，很长的问题和代码示例，希望有人可以提供帮助。

***#####$$$$$ 更新 $$$$$$#######*** 似乎 SQL 脚本不是问题所在。我将时间间隔设置为 24，当我在我的 SQL 工作台中运行 SQL 脚本时，它正在加载正确的结果。

然而，当它从上面的脚本运行时，第一个元素总是等于最后一个元素。IE。(minpressure[0] == minpressure[23])

还有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T20:56:19.453

如何创建这样的 xml 文件：

```
$dom = new DOMDocument(); 
$root = $dom->createElement( "weatherdata" );
$dom->appendChild( $root );  
$item = $dom->createElement( 'item', "" );  
$root->appendChild($item);

$maxpressure = $dom->createElement( 'pressuremaxhourly', implode(",",$maxpressure) );  
$item ->appendChild($maxpressure);
$minimumpressure = $dom->createElement( 'pressureminhourly', implode(",",$minpressure));  
$item ->appendChild($minimumpressure);
$dom->formatOutput = true;
$dom->save('Hourly.xml') 
```

# php - 从 vimeo url 获取 Vimeo id 的简单方法

> ID：10488943
> 
> 赞同：32
> 
> 时间：2012-05-07T20:50:59.503
> 
> 标签：php, regex, vimeo

我试图从 vimeo URL 中获取 id。还有比这更简单的方法吗？我看到的所有 vimeo 视频网址总是：

[https://vimeo.com/29474908](https://vimeo.com/29474908)

[https://vimeo.com/38648446](https://vimeo.com/38648446)

```
// VIMEO

$vimeo = $_POST['vimeo'];

function getVimeoInfo($vimeo)
{
    $url = parse_url($vimeo);
    if($url['host'] !== 'vimeo.com' &&
            $url['host'] !== 'www.vimeo.com')
        return false;
   if (preg_match('~^http://(?:www\.)?vimeo\.com/(?:clip:)?(\d+)~', $vimeo, $match)) 
   {
       $id = $match[1];
   }
   else
   {
       $id = substr($link,10,strlen($link));
   }

   if (!function_exists('curl_init')) die('CURL is not installed!');
   $ch = curl_init();
   curl_setopt($ch, CURLOPT_URL, "http://vimeo.com/api/v2/video/$id.php");
   curl_setopt($ch, CURLOPT_HEADER, 0);
   curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
   curl_setopt($ch, CURLOPT_TIMEOUT, 10);
   $output = unserialize(curl_exec($ch));
   $output = $output[0];
   curl_close($ch);
   return $output['id'];
}

$vimeo_id = getVimeoInfo($vimeo); 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-05-30T16:12:01.380

有很多有效的 vimeo URL。几个例子是

所有有效网址：

```
http://vimeo.com/6701902
http://vimeo.com/670190233
http://player.vimeo.com/video/67019023
http://player.vimeo.com/video/6701902
http://player.vimeo.com/video/67019022?title=0&byline=0&portrait=0
http://player.vimeo.com/video/6719022?title=0&byline=0&portrait=0
http://vimeo.com/channels/vimeogirls/6701902
http://vimeo.com/channels/vimeogirls/67019023
http://vimeo.com/channels/staffpicks/67019026
http://vimeo.com/15414122
http://vimeo.com/channels/vimeogirls/66882931 
```

所有无效网址：

```
http://vimeo.com/videoschool
http://vimeo.com/videoschool/archive/behind_the_scenes
http://vimeo.com/forums/screening_room
http://vimeo.com/forums/screening_room/topic:42708 
```

我编写了这个 java 正则表达式，它捕获所有上述有效 URL 并拒绝无效 URL。我不确定他们 vimeo 是否有更多有效的 URL。

```
(https?://)?(www.)?(player.)?vimeo.com/([a-z]*/)*([0-9]{6,11})[?]?.* 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-05-07T20:56:08.187

我认为使用[`parse_url()`](http://php.net/parse-url)是最好的选择：

```
$vimeo = 'https://vimeo.com/29474908';

echo (int) substr(parse_url($vimeo, PHP_URL_PATH), 1); 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2015-04-25T01:45:11.287

对于那些想要查看使用 PHP 完全实现的代码的人，我正在使用由 user2200660 提供并由 Morgan Delaney 格式化为 PHP 的正则表达式，这里是：

```
$vimeo = 'http://player.vimeo.com/video/67019023';

if(preg_match("/(https?:\/\/)?(www\.)?(player\.)?vimeo\.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/", $vimeo, $output_array)) {
    echo "Vimeo ID: $output_array[5]";
}

//outputs: Vimeo ID: 67019023 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-12-01T18:45:00.780

**[编辑]**您现在可以通过 API 完成这一切！

[如果您通过“链接”参数向搜索端点 ( https://developer.vimeo.com/api/endpoints/videos#GET/videos](https://developer.vimeo.com/api/endpoints/videos#GET/videos) )提供一个逗号分隔的 Vimeo url 列表，我们会将这些视频作为 API 响应返回.

例如

```
GET https://api.vimeo.com/videos?links=https://vimeo.com/74648232,https://vimeo.com/232323497 
```

**[原来的]**

Vimeo 提供了许多不同类型的视频 url，其中一些不包含 id。为了确保对所有 Vimeo 网址的支持，您应该直接向 vimeo 询问 ID。

您可以通过[oEmbed 端点](https://developer.vimeo.com/apis/oembed)询问 vimeo 。

有很多选项，但最简单的选项是向 url 发出 HTTP GET 请求`https://vimeo.com/api/oembed.json?url={vimeo_url}`，替换`{vimeo_url}`为适当的 url。

例如，要获取您在上面提供的 URL 的 ID ( [https://vimeo.com/29474908](https://vimeo.com/29474908) )，请发出 HTTP GET 请求

[https://vimeo.com/api/oembed.json?url=https://vimeo.com/29474908](https://vimeo.com/api/oembed.json?url=https://vimeo.com/29474908)

解析 JSON 响应，并获取`video_id`参数。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-04-14T21:19:06.143

这应该从各种 vimeo url 中检索 ID。

```
$url = 'https://vimeo.com/cool/29474908?title=0&amp;byline=0&amp;portrait=0';
$urlParts = explode("/", parse_url($url, PHP_URL_PATH));
$videoId = (int)$urlParts[count($urlParts)-1]; 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-06-01T21:48:44.420

当前有效的正则表达式：

```
function getIdFromVimeoURL(url) {
  return /(vimeo(pro)?\.com)\/(?:[^\d]+)?(\d+)\??(.*)?$/.exec(url)[3];
}

console.log(getIdFromVimeoURL("https://vimeo.com/channels/staffpicks/272053388"))
console.log(getIdFromVimeoURL("https://vimeo.com/272053388"))
console.log(getIdFromVimeoURL("https://player.vimeo.com/video/272053388"))

// ...etc.
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-12-24T09:30:25.500

如果有人需要它基于@user2200660 的 JavaScript 答案：

```
function getVimeoVideoId(url){

    var regex = new RegExp(/(https?:\/\/)?(www.)?(player.)?vimeo.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/);

    if ( regex.test(url) ) {
        return regex.exec(url)[5];
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-09T09:11:44.387

If you only need the Vimeo ID, you can use the RegExp non-capturing groups:

`(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(?:(?:[a-z0-9]*\/)*\/?)?([0-9]+)`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-22T13:16:15.687

这里有很多很好的答案，特别是@user2200660。

[https://stackoverflow.com/a/16841070/3850405](https://stackoverflow.com/a/16841070/3850405)

但是，以前的答案中不支持的用例是：

[https://vimeo.com/showcase/7008490/video/407943692](https://vimeo.com/showcase/7008490/video/407943692)

可以处理它的正则表达式和其他示例：

```
(https?:\/\/)?(www\.)?(player\.)?vimeo\.com\/?(showcase\/)*([0-9))([a-z]*\/)*([0-9]{6,11})[?]?.* 
```

[https://regex101.com/r/p2Kldc/1/](https://regex101.com/r/p2Kldc/1/)

```
$vimeo = 'http://player.vimeo.com/video/67019023';

if(preg_match("/(https?:\/\/)?(www\.)?(player\.)?vimeo\.com\/?(showcase\/)*([0-9))([a-z]*\/)*([0-9]{6,11})[?]?.*/", $vimeo, $output_array)) {
    echo "Vimeo ID: $output_array[6]";
} 
```

感谢 @zeckdude 提供 PHP 中的原始示例代码。

[https://stackoverflow.com/a/29860052/3850405](https://stackoverflow.com/a/29860052/3850405)

# c# - 将 Databound WinForm 数据插入数据库

> ID：10488948
> 
> 赞同：0
> 
> 时间：2012-05-07T20:51:18.750
> 
> 标签：c#, winforms, data-binding

我在互联网上搜索了几天如何创建可用于编辑值的数据绑定表单，但没有运气。如果有人可以帮助我，我将不胜感激！

读取值可以完美地工作，但更新/插入却不行。

表单加载：

```
newRow = issueTable.NewRow();
newRow["ID"] = Id;
issueTable.Rows.Add(newRow);
txtName.DataBindings.Add("Text", issueTable, "Name"); 
```

节省：

```
SqlCommandBuilder build = new SqlCommandBuilder(adaptor);
adaptor.InsertCommand = build.GetInsertCommand();
adaptor.Update(issueTable); 
```

我的问题是在 SQL 表中：“ID”被存储，但“名称”保持为空。对我来说奇怪的是，如果我监控 issueTable.Rows[0]["Name"]，它会返回表单上的值。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:20:13.083

问题是我想同时插入和编辑。我没有意识到如果一行处于插入状态，它会阻止更新。

解决方案：

加载：

```
newRow = issueTable.NewRow();
newRow["ID"] = Id;
issueTable.Rows.Add(newRow);
txtName.DataBindings.Add("Text", issueTable, "Name");
newRow.AcceptChanges(); //Remove the Insert State, to accept modifications
isNew = true; 
```

节省：

```
if (isNew)
{
    newRow.SetAdded(); //Add the Insert State back
    isNew = false;
}

SqlCommandBuilder build = new SqlCommandBuilder(adaptor);
adaptor.InsertCommand = build.GetInsertCommand();
adaptor.UpdateCommand = build.GetUpdateCommand();
adaptor.Update(issueTable); 
```

# json - Play2 找不到 JSON 的隐式读取或格式

> ID：10488950
> 
> 赞同：7
> 
> 时间：2012-05-07T20:51:27.787
> 
> 标签：json, scala, playframework-2.0, playframework-json

这是我的搜索对象：

```
package models.helper
import play.api.libs.json.Format
import play.api.libs.json.JsValue
import play.api.libs.json.JsObject
import play.api.libs.json.JsString

case class Search (name: String, `type`:String){

  implicit object SearchFormat extends Format[Search] {
    def reads(json: JsValue): Search = Search(
      (json \ "name").as[String],
      (json \ "type").as[String]
    )

    def writes(s: Search): JsValue = JsObject(Seq(
        "name" -> JsString(s.name),
        "type" -> JsString(s.`type`)
    ))  
  }
} 
```

我在使用 WS 调用 web 服务时尝试使用这个类：

```
val search = response.json.as[Search] 
```

但是 scala 编译器一直抱怨这一行：

> 没有为 models.helper.Search 类型找到 Json 反序列化器。尝试为此类型实现隐式读取或格式。

谁能告诉我我做错了什么？

*   从[https://sites.google.com/site/play20zh/scala-developers/working-with-json获取示例](https://sites.google.com/site/play20zh/scala-developers/working-with-json)
*   这个帖子讨论了同样的问题，但没有给出解决方案，什么网站上的例子？[https://groups.google.com/forum/?fromgroups#!topic/play-framework/WTZrmQi5XxY](https://groups.google.com/forum/?fromgroups#!topic/play-framework/WTZrmQi5XxY)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-07T21:14:46.903

确实，这个例子是错误的。您需要您的隐式`Format[Search]`值在隐式范围内可用。

在您的情况下，`Format[Search]`被定义为类的嵌套值`Search`，因此您只能从`Search`.

所以，你想要做的是在另一个地方定义它，在那里它可以被引用而不必创建一个实例`Search`，例如在一个`Formats`对象中：

```
object Formats {
  implicit SearchFormat extends Format[Search] {
    …
  }
} 
```

然后你可以按如下方式使用它：

```
import Formats.SearchFormat
val search = response.json.as[Search] 
```

您还可以通过在类的伴随对象中定义值来免除*进口税*。实际上，当需要给定类型的隐式值时，Scala 编译器会自动查找类型参数的伴随对象：`Format[Search]``Search`

```
case class Search(name: String, `type`: String)

object Search {
  implicit object SearchFormat extends Format[Search] {
    …
  }
} 
```

然后您可以使用它而无需导入它：

```
val search = response.json.as[Search] 
```

# linux-kernel - Linux（x86-64）中的多个大页面大小？

> ID：10488961
> 
> 赞同：12
> 
> 时间：2012-05-07T20:52:46.893
> 
> 标签：linux-kernel, tlb, mmu

x86-64 上的 Linux 是否支持多个大页面大小（例如，超过 4KB 基本页面大小的 2MB 和 1GB 页面大小）？如果是，有没有办法为给定的分配指定使用哪个大页面大小？换句话说，我的问题是在执行此操作时是否使用“MAP_HUGETLB”标志`mmap()`将它们映射到默认大小的大页面。无论如何请求分配映射到非默认的大页面大小？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-23T14:43:53.460

还没有，但它正在通过[LKML](http://lwn.net/Articles/501749/)工作。可以猜测，该功能将在几个发布时间内可用。

然后，您将能够使用这些标志`MAP_HUGE_2MB`并`MAP_HUGE_1GB`明确配置它。

# javascript - 如果未使用 new 运算符，则返回一个新对象

> ID：10488962
> 
> 赞同：1
> 
> 时间：2012-05-07T20:52:48.390
> 
> 标签：javascript, oop, google-chrome, object, v8

`Foo`我在名为创建对象的 js 中有一个“类”（函数） 。由于它使用非常频繁，我希望它避免在`new`要创建它的新实例时要求使用键盘：`Foo(something);`而不是`new Foo(something);`.

我让它在 Firefox 中工作：

```
function Foo(arg) {
    if (this instanceof Window)
        return new Foo(arg);

    //Object construction here.
    this.bar = "Hello " + arg;
} 
```

现在我可以通过将其作为函数调用来创建 Foo 的实例。

```
console.log(Foo("World").bar); //Output "Hello World" in console. 
```

虽然这在 FF 中有效，但在 Chrome 中却没有，我还不敢测试 IE。

chrome 的问题是它`window`确实是`DOMWindow`chrome的类型

```
Uncaught ReferenceError: Window is not defined 
```

并且`this instanceof DOMWindow`在 chrome 中不起作用，因为由于某种原因它给出了：

```
ReferenceError: DOMWindow is not defined 
```

我也尝试过使用`!(this instanceof Foo)`并且`typeof this`似乎总是给予`"object"`.

在所有浏览器上调用时，如何可靠地检测`new`关键字是否被省略？`Foo`

更新：`!(this instanceof Foo)`确实有效，我只是`return this`在我的实际`Foo`功能中迷路了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:55:49.580

我没有测试过，但也许这样的东西会起作用？

```
var realWindow = this;

function Foo(arg) {
    if (this === realWindow)
        return new Foo(arg);

    //Object construction here.
    this.bar = "Hello " + arg;
} 
```

当然，您需要确保`realWindow`在任何范围之外声明，以避免可能与`this`.

不过总的来说，虽然这*很*聪明，但我不建议仅仅为了节省一些打字字符而这样做。它混淆了未来开发人员的代码，通常不是好的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T20:59:37.410

在 Chrome 20、FF 12 和 IE 8 中测试这是一个 Foo 实例，并且应该可以正常工作：

```
function Foo(arg) {
    if (!(this instanceof Foo)) return new Foo(arg);

    //Object construction here.
    this.bar = "Hello " + arg;
}

var foo = Foo('World');
var baz = new Foo('Baz');

console.log(foo.bar);
console.log(baz.bar); 
```

作为小提琴：http: [//jsfiddle.net/YSEFK/](http://jsfiddle.net/YSEFK/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T21:01:25.040

反转条件呢？

```
function Foo(arg) {
    if (!(this instanceof Foo))
        return new Foo(arg);

    //Object construction here.
    this.bar = "Hello " + arg;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T21:01:09.827

你应该这样做的方式是检查当前实例与它自己的类型：

```
function Foo(...args...) {
    if (!(this instanceof Foo)) {
        return new Foo(...args...);
    }
    ...do stuff...
} 
```

它可以避免尝试检查全局对象，并且几乎可以在任何情况下工作（尽管在其他情况下可能没有意义）：

```
var a = {};
Foo.call(a); 
```

这应该返回什么？在我的示例中，它将返回一个新`Foo`实例，尽管您可能*不*希望它创建一个新的`Foo`.

# bash - Bash：如何在 osx bash 中用新行替换字符串？

> ID：10488963
> 
> 赞同：7
> 
> 时间：2012-05-07T20:52:53.943
> 
> 标签：bash, sed

我在谷歌上搜索了很多。我只想要这一行：

```
echo "Replace <newLine> it by <newLine> NEWLINE <newLine> in my OSX terminal <newLine> and bash script" | sed -e 's/<newLine>/\n/g' 
```

在我的 osx 终端和我的 bash 脚本中工作。我不能用`sed`这个吗？还有另一种单线解决方案吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-07T21:03:41.967

这是使用 sed

```
echo "Replace <newLine> it by <newLine> NEWLINE <newLine> in my OSX terminal <newLine> and bash script" | sed 's/<newLine>/\'$'\n/g' 
```

这是一篇解释原因的博文 - [https://nlfiedler.github.io/2010/12/05/newlines-in-sed-on-mac.html](https://nlfiedler.github.io/2010/12/05/newlines-in-sed-on-mac.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T21:00:50.103

仅使用 bash：

```
STR="Replace <newLine> it by <newLine> NEWLINE <newLine> in my OSX terminal <newLine> and bash script"
$ echo ${STR//<newLine>/\\n}
Replace \n it by \n NEWLINE \n in my OSX terminal \n and bash script

$ echo -e ${STR//<newLine>/\\n}
Replace 
 it by 
 NEWLINE 
 in my OSX terminal 
 and bash script 
```

这里有一个简单的解释 - 语法类似于 sed 的替换语法，但您使用双斜杠 ( `//`) 来表示替换字符串的所有实例。否则，仅替换第一次出现的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T23:10:42.810

这可能对您有用：

```
echo "Replace <newLine> it by <newLine> NEWLINE <newLine> in my OSX terminal <newLine> and bash script" |
sed 'G;:a;s/<newLine>\(.*\(.\)\)$/\2\1/;ta;s/.$//' 
Replace 
 it by 
 NEWLINE 
 in my OSX terminal 
 and bash script 
```

编辑：OSX 不接受多个命令，请参见[此处](https://unix.stackexchange.com/questions/13711/differences-between-sed-on-mac-osx-and-other-standard-sed)

```
echo "Replace <newLine> it by <newLine> NEWLINE <newLine> in my OSX terminal <newLine> and bash script" | 
sed -e 'G' -e ':a' -e 's/<newLine>\(.*\(.\)\)$/\2\1/' -e 'ta' -e 's/.$//' 
Replace 
 it by 
 NEWLINE 
 in my OSX terminal 
 and bash script 
```

还有一种方式：

```
echo "Replace <newLine> it by <newLine> NEWLINE <newLine> in my OSX terminal <newLine> and bash script" |
sed $'s|<newLine>|\\\n|g' 
Replace 
 it by 
 NEWLINE 
 in my OSX terminal 
 and bash script 
```

# installshield - 在安装过程中似乎无法从安装程序加载托管 dll？

> ID：10488964
> 
> 赞同：1
> 
> 时间：2012-05-07T20:53:09.067
> 
> 标签：installshield, custom-action, installshield-2012

我正在为包含 Windows 服务的应用程序开发安装程序。该服务需要用户提供用户名/密码才能从我们的服务器获取信息，所以我想在安装期间进行设置。我们还需要将该信息存储在服务配置文件中，因此必须对其进行加密。

因此，我希望安装程序在加密凭据时调用服务使用的相同 .dll。我设置了通过自定义操作向导创建的自定义操作。我将其设置为“在托管程序集中调用公共方法”并选择“与产品一起安装”作为位置。我可以选择 dll 和目标函数并通过向导设置所有内容。它在安装程序日志中解析的路径看起来正确...

但我得到了错误：

> 无法加载托管自定义操作程序集

所以不知道该怎么做才能让这个工作？

问题的第二部分是，如果最终用户没有安装 .NET 4，会发生什么？我将设置安装程序来安装它...但是会出现问题还是我们需要在安装过程的中途强制重新启动？如果是这样，我可能只是暂时存储未加密的内容，并让服务在首次运行时对其进行加密......此时这可能是简单的方法，但感觉不像是“正确”的方法。;)

# windows - 批处理：根据（fileA.txt 减去 fileB.txt）的结果创建 fileC.txt

> ID：10488967
> 
> 赞同：0
> 
> 时间：2012-05-07T20:53:15.620
> 
> 标签：windows, batch-file, foreach

我正在尝试创建一个批处理，该批处理创建一个包含 fileA.txt 中所有行的 fileC.txt，除了那些包含 fileB.txt 中行中的字符串的行：

伪：

```
foreach(line L in fileA.txt)
     excluded = false
     foreach(string str in fileB.txt)
          if L contains str 
               exclude = true
     if !excluded
          add L to fileC.txt 
```

如果 L ! 包含

例如

**fileA.txt：（**全部）

```
this\here\is\a\line.wav
and\this\is\another.wav
i\am\a\chocolate.wav
peanut\butter\jelly\time.wav 
```

**fileB.txt：（**那些被排除在外的）

```
another.wav
time.wav 
```

**fileC.txt：（**想要的结果）

```
this\here\is\a\line.wav
i\am\a\chocolate.wav 
```

我一直在摆弄 FINDSTR，但我似乎无法将它拼凑在一起.. 任何帮助或指点都非常感谢！

干杯! / 弗莱德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T22:18:11.973

答案应该很简单：

```
findstr /lvg:"fileB.txt" "fileA.txt" >fileC.txt 
```

以您的示例为例，上述内容确实给出了正确的结果。

但是有一个讨厌的 FINDSTR 错误，当使用多个区分大小写的文字搜索字符串时，它会变得不可靠。请参阅[为什么这个具有多个文字搜索字符串的 FINDSTR 示例找不到匹配项？](https://stackoverflow.com/questions/8921253/why-doesnt-this-findstr-example-with-multiple-literal-search-strings-find-a-mat)，以及随之而来的答案。有关未记录的 FINDSTR 功能和错误的“完整”列表，请参阅[Windows FINDSTR 命令的未记录功能和限制是什么？](https://stackoverflow.com/questions/8844868/what-are-the-undocumented-features-and-limitations-of-the-windows-findstr-comman).

因此，上面的简单代码可能会根据文件的内容而失败。如果您可以避免使用不区分大小写的搜索，那么解决方案很简单。

```
findstr /livg:"fileB.txt" "fileA.txt" >fileC.txt 
```

***编辑：*** *如果 fileB.txt 包含`\\`或. 以上两个版本都将失败`\"`。为了正常工作，必须将这些字符串转义为`\\\`和`\\"`*

但是，如果您必须使用区分大小写的搜索，那么没有简单的解决方案。对于纯批处理解决方案，您最好的选择可能是使用 /R 正则表达式选项。但随后您将不得不创建 fileB.txt 的修改版本，其中所有正则表达式元字符都被转义，以便字符串提供正确的文字搜索。这本身就是一个迷你项目。

对于区分大小写的解决方案，您最好的选择可能是获取第 3 方工具，例如 Windows 的 grep 或 sed。

***编辑：这是一个执行合理的纯批处理解决方案，几乎是防弹的***

我考虑做类似你问题中提出的逻辑的事情。但是使用批处理读取文件中的所有行相对较慢。此解决方案仅逐行读取排除文件。它使用 FINDSTR 重复读取“fileA.txt”中的行，每个搜索字符串一次。对于批处理文件，这是一种更快的算法。

读取文件的传统方法是使用 FOR /F 循环，但是使用 SET /P 的另一种技术更快，并且可以安全地使用延迟扩展。此方法的唯一限制是：

*   它从行中去除尾随控制字符
*   每行限制为 1021 字节
*   每一行都必须按照`<CR><LF>`Windows 标准终止。它不适用于以`<LF>`

当与/C 选项一起使用时，搜索字符串必须包含 each`\`和`"`转义。`\\``\"`

```
@echo off
setlocal enableDelayedExpansion
copy fileA.txt fileC.txt >nul
for /f %%N in ('find /c /v "" ^<fileB.txt') do set len=%%N
<fileB.txt (
  for /l %%N in (1 1 !len!) do (
    set "ln="
    set /p "ln="
    if defined ln (
      set "ln=!ln:\=\\!"
      set ln=!ln:"=\"!
      move /y fileC.txt temp.txt >nul
      findstr /lv /c:"!ln!" temp.txt >fileC.txt
    )
  )
)
del temp.txt
type fileC.txt 
```

# image - JSF 在不同的 Servlet 中从数据库/DAO 加载图像

> ID：10488969
> 
> 赞同：0
> 
> 时间：2012-05-07T20:53:23.273
> 
> 标签：image, spring, jsf, servlets, spring-data-jpa

我一直在阅读 BalusC 的指南，了解如何使用单独的 Servlet 通过 BufferedOutputStream 将图像的字节 [] 表示附加到 HttpServlet 响应，并理解这是必要的，因为 HTML Img 标记引用 URL / 不能接受字节流。

[http://balusc.blogspot.co.uk/2007/04/imageservlet.html](http://balusc.blogspot.co.uk/2007/04/imageservlet.html)

我在调整 BalusC 的示例时遇到的问题是我在 JSF 后面使用 Spring 和 Spring Data JPA，所以我的 ImageDAO 实际上是一个位于不同 Servlet（JSF Servlet）后面的 Spring Data JPA 存储库。

有什么方法可以让我处理由 JSF Servlet 后面的 Spring 容器管理的 ImageRepository 的句柄？

我预计对于那些将 IoC 用于他们的应用程序并诉诸编写单独的 Servlet 来满足 HTML Img 标签的需求的人来说，这是一个常见的绊脚石。编写一个单独的 Servlet 并尝试处理另一个 Servlet 感觉就像是对设计的绥靖/肮脏的黑客攻击！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T21:29:18.963

两条神奇的线似乎是：

```
WebApplicationContext context = WebApplicationContextUtils.getWebApplicationContext(getServletContext());
    yourRepository = (YourRepository) context.getBean("yourRepository"); 
```

# c# - 来自 IOperationInvoker 的方法名称

> ID：10488972
> 
> 赞同：3
> 
> 时间：2012-05-07T20:53:37.757
> 
> 标签：c#, wcf

我最近阅读了 Juval Lowy 的*Programming WCF Services，第三版*。我正在利用他`ParameterTracerInvoker : GenericInvoker`在下面显示的使用 NLOG 跟踪日志。它很好用，除了我认为可能不可能的一件事，那就是获取`MethodName`被调用的对象。正如您在`PreInvoke`方法中看到的，我正在记录输入，而不是方法名称。有人知道如何检索方法名称吗？

```
public abstract class GenericInvoker : IOperationInvoker
{
    internal readonly IOperationInvoker _oldInvoker;

    public GenericInvoker(IOperationInvoker oldInvoker)
    {
        Debug.Assert(oldInvoker != null);

        _oldInvoker = oldInvoker;
    }

    public virtual object[] AllocateInputs()
    {
        return _oldInvoker.AllocateInputs();
    }
    /// <summary>
    /// Exceptions here will abort the call
    /// </summary>
    /// <returns></returns>
    protected virtual void PreInvoke(object instance, object[] inputs)
    { }

    /// <summary>
    /// Always called, even if operation had an exception
    /// </summary>
    /// <returns></returns>
    protected virtual void PostInvoke(object instance, object returnedValue, object[] outputs, Exception exception)
    { }

    public object Invoke(object instance, object[] inputs, out object[] outputs)
    {
        PreInvoke(instance, inputs);
        object returnedValue = null;
        object[] outputParams = new object[] { };
        Exception exception = null;
        try
        {
            returnedValue = _oldInvoker.Invoke(instance, inputs, out outputParams);
            outputs = outputParams;
            return returnedValue;
        }
        catch (Exception operationException)
        {
            exception = operationException;
            throw;
        }
        finally
        {
            PostInvoke(instance, returnedValue, outputParams, exception);
        }
    }

    public IAsyncResult InvokeBegin(object instance, object[] inputs, AsyncCallback callback, object state)
    {
        PreInvoke(instance, inputs);
        return _oldInvoker.InvokeBegin(instance, inputs, callback, state);
    }

    public object InvokeEnd(object instance, out object[] outputs, IAsyncResult result)
    {
        object returnedValue = null;
        object[] outputParams = { };
        Exception exception = null;

        try
        {
            returnedValue = _oldInvoker.InvokeEnd(instance, out outputs, result);
            outputs = outputParams;
            return returnedValue;
        }
        catch (Exception operationException)
        {
            exception = operationException;
            throw;
        }
        finally
        {
            PostInvoke(instance, returnedValue, outputParams, exception);
        }
    }
    public bool IsSynchronous
    {
        get
        {
            return _oldInvoker.IsSynchronous;
        }
    }
}

public class ParameterTracerInvoker : GenericInvoker
{

    private readonly Logger _logger = LogManager.GetCurrentClassLogger();
    public ParameterTracerInvoker(IOperationInvoker oldInvoker)
        : base(oldInvoker)
    {
    }

    protected override void PreInvoke(object instance, object[] inputs)
    {
        //_logger.Trace(((SyncMethodInvoker)_oldInvoker).MethodName);
        _logger.Trace("Input Parameters:");

        foreach (object argument in inputs)
        {
            if (argument != null)
            {
                _logger.Trace(argument.ToString());
            }
            else
            {
                _logger.Trace("null");
            }
        }
    }

    protected override void PostInvoke(object instance, object returnedValue, object[] outputs, Exception exception)
    {
        foreach (object output in outputs)
        {
            _logger.Trace("Output Parameters:");
            _logger.Trace(output.ToString());
        }
        returnedValue = "aaaaaaaaaaaa";
        _logger.Trace("Returned: " + returnedValue ?? String.Empty);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T22:12:02.830

它`IOperationInvoker`本身不会为您提供操作名称，但为了使用自定义调用程序，您通常会使用操作行为。该行为可以访问操作名称，并且可以将其传递给您的自定义调用程序：

```
public class ParameterTracerOperationBehavior : IOperationBehavior
{
    // ...

    public void ApplyDispatchBehavior(OperationDescription operationDescription, DispatchOperation dispatchOperation)
    {
        var originalInvoker = dispatchOperation.Invoker;
        var operationName = operationDescription.Name;
        var newInvoker = new ParameterTracerInvoker(originalInvoker, operationName);
        dispatchOperation.Invoker = newInvoker;
    }
}

public class ParameterTracerInvoker
{
    private readonly Logger _logger = LogManager.GetCurrentClassLogger();
    private readonly string operationName;
    public ParameterTracerInvoker(IOperationInvoker oldInvoker, string operationName)
        : base(oldInvoker)
    {
        this.operationName = operationName;
    }

    // ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T07:46:16.113

我的完整示例

```
public class WcfTracingOperationBehavior : IOperationBehavior
  {

    #region Implementation of IOperationBehavior

    public void Validate(OperationDescription operationDescription)
    {

    }

    public void ApplyDispatchBehavior(OperationDescription operationDescription, DispatchOperation dispatchOperation)
    {
        dispatchOperation.Invoker = new WcfTracingOperationInvoker(dispatchOperation.Invoker, operationDescription);
    }

    public void ApplyClientBehavior(OperationDescription operationDescription, ClientOperation clientOperation)
    {

    }

    public void AddBindingParameters(OperationDescription operationDescription, BindingParameterCollection bindingParameters)
    {

    }

    #endregion

  } 
```

和

```
public class WcfTracingOperationInvoker : IOperationInvoker
      {

        private readonly IOperationInvoker _originalInvoker;

        private string ServiceFullName { get; set; }

        private string ServiceName { get; set; }

        private string MethodName { get; set; }

        public WcfTracingOperationInvoker(IOperationInvoker originalInvoker, OperationDescription operationDescription)
        {
            _originalInvoker = originalInvoker;

            var declaringType = operationDescription.SyncMethod.DeclaringType;
            if (declaringType != null)
            {
                ServiceFullName = declaringType.FullName;
                ServiceName = declaringType.Name;
            }

            MethodName = operationDescription.SyncMethod.Name;
        }

        #region Implementation of IOperationInvoker

        public object[] AllocateInputs()
        {
            SetMethodInfo();

            return _originalInvoker.AllocateInputs();
        }

        public object Invoke(object instance, object[] inputs, out object[] outputs)
        {
            var result = _originalInvoker.Invoke(instance, inputs, out outputs);

            return result;
        }

        public IAsyncResult InvokeBegin(object instance, object[] inputs, AsyncCallback callback, object state)
        {
            return _originalInvoker.InvokeBegin(instance, inputs, callback, state);
        }

        public object InvokeEnd(object instance, out object[] outputs, IAsyncResult result)
        {
            return _originalInvoker.InvokeEnd(instance, out outputs, result);
        }

        public bool IsSynchronous
        {
            get { return _originalInvoker.IsSynchronous; }
        }

        #endregion

        private void SetMethodInfo()
        {
            // The WcfContext is some my stuff.
            var wcfTraceActivity = WcfContext<WcfTraceActivity>.Current;

            wcfTraceActivity.ServiceName = ServiceName;
            wcfTraceActivity.ServiceFullName = ServiceFullName;
            wcfTraceActivity.MethodName = MethodName;
        }

      } 
```

# openid - OpenID Connect 提供者

> ID：10488973
> 
> 赞同：26
> 
> 时间：2012-05-07T20:53:46.393
> 
> 标签：openid, openid-connect

我们目前有一个基于 OpenID 的 Google AppEngine 应用程序。

我们现在正尝试将我们的应用程序与我们的客户内部 IT 系统集成，并且看到 OpenID 是一个非常复杂的实施规范。

我们还看到，Google 正在朝着 OpenID Connect 的方向发展（如果您查看 Google Drive）。

除了 Google 之外，还有其他知名的公共 OpenID Connect 提供商吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-30T14:43:27.533

有一个由[OpenID Connect Interop 4](http://osis.idcommons.net/wiki/OC4%3aOpenID_Connect_Interop_4)产生的实现列表和另一个基于由[UNNETT](http://openidtest.uninett.no/results)运行的 OpenID Connect 测试服务发布的测试结果的列表。从这两个来源中，我提取了以下列表（开放式和封闭式解决方案，OP 和客户端）：

*   [美国在线](http://www.aol.com)
*   [易趣](https://openidconnect.ebay.com/)
*   [埃德蒙·杰](http://openid.bitbucket.org/)
*   [伊曼纽尔·拉维特](https://gitorious.org/wenou)
*   [胶](http://www.gluu.org/cloud-identity/open-source/overview/)
*   [谷歌](http://oauthssodemo.appspot.com)
*   Heroku
*   [IBM](http://www.ibm.com)
*   [第 7 层](http://www.layer7tech.com)
*   [斜接](http://mitre.org)
*   [十一月马塔克](https://github.com/nov/openid_connect)
*   oic.info
*   oic4us
*   [橙子](http://pub-openid-int.orange.fr/oauth)
*   [Ping 身份](http://www.pingidentity.com)
*   [罗兰·海德伯格](https://github.com/rohe/pyoidc)
*   [伊藤亮](https://openidconnect.info/)

Gluu 已经被提及。另一个看起来很有趣的实现是[eBay 的](https://openidconnect.ebay.com/). 有一些[文档](https://openidconnect.ebay.com/oreo/Documentation.pdf)，但是那里提到的 GIT 存储库对我不起作用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-06T05:00:05.827

[我在这里](https://npmjs.org/package/openid-connect)为nodejs开发了一个模块

> 这是一个功能齐全的 OAuth 2 服务器实现，支持 OpenID Connect 规范。基于 [https://github.com/ammmir/node-oauth2-provider](https://github.com/ammmir/node-oauth2-provider)。

安装做

```
npm install openid-connect 
```

如果你使用 expressjs，你可以简单地做

```
var oidc = require('openid-connect').oidc();

//load all middleware
app.use(...

//routing
app.get('/authorization', oidc.auth()); 
```

你有你的授权端点。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-09T21:01:02.790

我也在开发自己的 RP（使用 JASPIC）和 OP（使用 JAX-RS）框架。每个都可以独立存在（我已经针对 Google 测试了 RP），但它旨在协同工作。 [https://github.com/trajano/openid-connect/](https://github.com/trajano/openid-connect/)

我编写它是为了尽可能多地限制依赖项，它实际上在自身和 Java EE 7 容器之外没有任何运行时依赖项。不幸的是，这限制了 WebSphere，因为 WebSphere 目前还不支持 Java EE 7。

更新：好的部分是[IBM WebSphere 中有 OpenID Connect 支持，](http://www-01.ibm.com/support/knowledgecenter/SSEQTP_8.5.5/com.ibm.websphere.wlp.doc/ae/twlp_config_oidc_rp.html?cp=SSEQTP_8.5.5%2F1-3-11-0-4-2-10-2)供那些需要使用 WebSphere 的人使用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-24T18:27:57.797

客户端和服务器端 OpenID Connect 的一个可行的开源实现是[MITREid Connect](https://github.com/mitreid-connect/)，它基于 Java、Spring 和 Spring Security。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-05T15:19:51.487

[django-oidc-provider](https://pypi.python.org/pypi/django-oidc-provider)可以帮助您提供开箱即用的所有端点、数据和逻辑，以便将 OpenID Connect 功能添加到您的 Django 项目中。

支持 Python 3 和 2。还有最新版本的 django。

在 GitHub 上查看：[https ://github.com/juanifioren/django-oidc-provider](https://github.com/juanifioren/django-oidc-provider)

问候。

*-伊格纳西奥*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-24T03:07:09.040

[自 2013 年 1 月的互操作 4 http://www.gluu.co/.fm8t](http://www.gluu.co/.fm8t)以来，Gluu 一直是领先的 OpenID Connect 提供商 之一，它仍然是最好的提供商之一。此外，它不仅仅是实现所有端点...... Shibboleth IDP 是一个优秀而全面的实现，但它是一个难以管理的问题。OX 还提供了一个易于使用的 Web UI，使 OP 的管理变得轻而易举。[在http://gluu.org](http://gluu.org)或我们的 wiki 在[http://ox.gluu.org](http://ox.gluu.org)查看更多信息！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-07-19T16:46:21.727

同时，OpenID Connect 互操作中的提供者列表（现在第 5 位）已扩展，请参阅： http://osis.idcommons.net/wiki/Category: [OC5_Solution](http://osis.idcommons.net/wiki/Category:OC5_Solution)

可在此处找到各种语言/环境的 OpenID Connect 开发人员库列表：http: [//openid.net/developers/libraries/](http://openid.net/developers/libraries/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-23T12:25:26.063

*OpenID Connect*还是有点新意。因此，查找*OpenID Connect*提供者的列表将是一项艰巨的任务。

*如果您正在寻找OpenID Connect*的开源实现，您可以查看：[Gluu.inc](http://www.gluu.org)。

# c++ - 用 C++ 编写大文件

> ID：10488975
> 
> 赞同：1
> 
> 时间：2012-05-07T20:53:47.783
> 
> 标签：c++, io

我正在编写 70 - 700gb 范围内的大文件。有没有人有经验，如果内存映射文件比常规写入块更有效？代码将在 c++ 中并在 linux 2.6 上运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T21:24:59.940

消费级驱动器的典型持续硬盘驱动器传输速度约为每秒 60 兆字节，阳光明媚，微风吹过，文件系统不会过于碎片化，因此磁盘驱动器磁头不必经常寻找。

因此，写入 700 GB 所需时间的硬性下限是 700 * 1024 / 60 = 11947 秒或 3 小时 20 分钟。再多的缓冲也无法解决这个问题，它很快就会被磁盘写入速度和处理器填充消防水带的能力之间的严重不匹配所淹没。仅在花费数倍以上的时间时才开始在代码或磁盘驱动器状态中查找问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T21:02:26.257

如果您从头开始写入文件，则从内存映射文件中没有任何收获。

如果您正在以任何其他模式编写文件，请更新问题:)

# java - 使用 JDBC PreparedStatement 在 MySql 中返回生成的键

> ID：10488979
> 
> 赞同：5
> 
> 时间：2012-05-07T20:54:05.307
> 
> 标签：java, jdbc, dao

我正在使用普通的[JDBC](http://en.wikipedia.org/wiki/Java_Database_Connectivity)进行[DAO](http://en.wikipedia.org/wiki/Data_access_object)层编程，因为我的*Tomcat*（服务托管）中的*Java 内存*只有 **61.38 MB 。**我在 MySQL 中有一个包含一列的表。当前的实现没有问题。但我想知道列中生成的值。**`AUTO_INCREMENT``AUTO_INCREMENT`**

 **当前代码在插入新行的方法中如下所示。

```
public Integer store(MyBean bean) throws DAOException {
    Connection conn = null;
    PreparedStatement ps = null;
    try {
        conn = getConnection();
        ps = conn.prepareStatement("INSERT ...");
        if (bean.getSomeProperty() != null) {
            ps.setShort(1, bean.getSomeProperty());
        } else {
            ps.setNull(1, Types.SMALLINT);
        }

        /* Other fields */

        int rows = ps.executeUpdate();
        if (rows == 1) {
            // RETURN the generated value
        }
        return null;
    } catch (SQLException e) {
        throw new DAOException(e);
    } finally {
        ...
    }
} 
```

我已经看到这是可能的**`Hibernate`**，但因为我的记忆力很小，所以不是一个可行的选择。

我很感激帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T15:32:01.577

有两种方法：

*   使用 JDBC 的概念`getGeneratedKeys()`。请参阅[http://dev.mysql.com/doc/connector-j/en/connector-j-usagenotes-last-insert-id.html#connector-j-examples-autoincrement-getgeneratedkeys](http://dev.mysql.com/doc/connector-j/en/connector-j-usagenotes-last-insert-id.html#connector-j-examples-autoincrement-getgeneratedkeys)

*   或者使用 MySQL 功能`LAST_INSERT_ID()`。请参阅[http://dev.mysql.com/doc/connector-j/en/connector-j-usagenotes-last-insert-id.html#connector-j-examples-autoincrement-select](http://dev.mysql.com/doc/connector-j/en/connector-j-usagenotes-last-insert-id.html#connector-j-examples-autoincrement-select)**

# c# - 使用visual basic提取部分查询字符串

> ID：10488980
> 
> 赞同：0
> 
> 时间：2012-05-07T20:54:05.587
> 
> 标签：c#, vb.net

我有一个查询字符串：

```
...default.aspx?date=May%202012 
```

我想得到`may`和`2012`分开使用：

```
Request.querystring("date") 
```

....每个类似的东西。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T21:02:38.997

您可以使用[`HttpUtility.UrlDecode`](http://msdn.microsoft.com/en-us/library/adwtk1fy.aspx)：

```
Dim dateParam = HttpUtility.UrlDecode(Request.QueryString("date"))
Dim dateParts = dateParam.Split(" "c)
Dim month = dateParts(0)
Dim year = dateParts(1) 
```

C＃

```
var dateParam = HttpUtility.UrlDecode(Request.QueryString["date"]);
var dateParts = dateParam.Split(' ');
var month = dateParts[0];
var year = dateParts[1]; 
```

**编辑**：正如@Servy 所评论的那样`HttpUtility.UrlDecode`，上面是多余的，因为[`Request.QueryString`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.querystring.aspx)它隐含地解码，但它没有伤害;-)

# php - fread fseek utf-8 文件 + 羊群？

> ID：10488983
> 
> 赞同：0
> 
> 时间：2012-05-07T20:54:25.307
> 
> 标签：php, file-io, filesystems

更改具有特定定义的 utf-8 编码文本文件的特定行的最佳方法是：

```
.
.
"VALIDATE_RESULT":"1", 
"VERIFY_RTL":"0",
.
.
"SERVER_CRASH_MSG":"system is down", 
```

我想**蜂拥而至**，改变，写作和释放。

我将使用代码：

```
<?php

$fp = fopen("file.txt", "r+");

if (flock($fp, LOCK_EX)) {  // acquire an exclusive lock
    //make your changes
    fflush($fp);            // flush output before releasing the lock
    flock($fp, LOCK_UN);    // release the lock
} else {
    echo "Couldn't get the lock!";
}

fclose($fp);

?> 
```

**file_get_contents**只是没有剪切它，因为它不使用flock 需要的句柄。

谢谢

# unix - 无法确定 SIGPIPE 的原因

> ID：10488984
> 
> 赞同：1
> 
> 时间：2012-05-07T20:54:34.090
> 
> 标签：unix, network-programming, ipc

我有一个客户端服务器，客户端向服务器发出文件操作。发出第一个读取/删除命令时，程序运行完美。但是当我发出第二个命令读取/删除时，它以退出代码 141 退出。我确定原因是 SIGPIPE。但无法解决它。有人可以帮我吗

```
#include <stdio.h>
#include <sys/types.h>
#include <unistd.h>
#include <errno.h>
#include <stdlib.h>
#include <sys/ipc.h>
#include <sys/msg.h>
#include <string.h>
#include <sys/wait.h>
#include <mqueue.h>
#include <sys/stat.h>
//#include <limits.h>
#include "Functions.h"

#define PIPE_BUF 50000
#define MAXMESGDATA (PIPE_BUF -2*sizeof(long))
#define MESGHDRSIZE (sizeof(Message_buf) -MAXMESGDATA)
#define MAX_SIZE 512

pid_t serverPid;
pid_t clientPid;

void Server(int readfd,int writefd)
{
Message_buf server_MessageBuf;
int operationStatus = 0;
char inputFileName[MAXMESGDATA];
char operationToBePerformed[MAXMESGDATA];
char messageOnPIPE[MAXMESGDATA];
ssize_t length;
if((length=mesg_recv(readfd,&server_MessageBuf))==0)
{
    printf("\n End of file while reading pathname");
}
strcpy(messageOnPIPE,server_MessageBuf.messageText);
printf("\n Server side Message on PIPE:%s \n ",messageOnPIPE);
operationStatus=interpretCommand(messageOnPIPE,operationToBePerformed,inputFileName);
if(strcasecmp(operationToBePerformed,"read")==0)
{
    readFile(writefd,inputFileName);
    //printf("\n Read %s ",inputFileName);
}
if(strcasecmp(operationToBePerformed,"delete")==0)
{
    deleteFile(writefd,inputFileName);
}
}

int main()
{
int pipe1[2],pipe2[2];
pipe(pipe1);
pipe(pipe2);
//signal(SIGPIPE, SIG_IGN);

pid_t pid;
pid=fork();
serverPid=pid;

if(pid==0)
{
    /*Call Server*/
    close(pipe1[1]);
    close(pipe2[0]);
    Server(pipe1[0], pipe2[1]);   
}
else
{
    close(pipe1[0]);
    close(pipe2[1]);
    Client(pipe2[0],pipe1[1]);      
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T21:14:54.277

您的服务器没有在循环中运行。它收到一条消息，然后关闭管道，因此第二次写入失败，并向客户端发送 SIGPIPE。

# r - 如何通过标记 x 轴的特定部分来绘制正态分布？

> ID：10488988
> 
> 赞同：21
> 
> 时间：2012-05-07T20:54:59.080
> 
> 标签：r

我正在使用以下代码在 R 中创建标准正态分布：

```
x <- seq(-4, 4, length=200)
y <- dnorm(x, mean=0, sd=1)
plot(x, y, type="l", lwd=2) 
```

我需要将 x 轴标记为平均值以及平均值上下三个标准差的点。如何添加这些标签？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-07T21:40:15.330

最简单（但不是一般）的方法是限制 x 轴的限制。+/- 1:3 sigma 将被标记为这样，平均值将被标记为 0 - 表示与平均值有 0 个偏差。

```
plot(x,y, type = "l", lwd = 2, xlim = c(-3.5,3.5)) 
```

![在此处输入图像描述](../Images/5ff153d94802bb614200fb8feda4e65c.png)

另一种选择是使用更具体的标签：

```
plot(x,y, type = "l", lwd = 2, axes = FALSE, xlab = "", ylab = "")
axis(1, at = -3:3, labels = c("-3s", "-2s", "-1s", "mean", "1s", "2s", "3s")) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-07T23:41:24.383

使用[此答案](https://stackoverflow.com/a/10489547/3924118)中的代码，您可以跳过创建`x`并仅`curve()`在`dnorm`函数上使用：

```
curve(dnorm, -3.5, 3.5, lwd=2, axes = FALSE, xlab = "", ylab = "")
axis(1, at = -3:3, labels = c("-3s", "-2s", "-1s", "mean", "1s", "2s", "3s")) 
```

但这不再使用给定的代码。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-27T17:52:10.767

一个非常低效和不寻常但非常漂亮的解决方案，它基于蒙特卡罗模拟的思想，是这样的：

1.  从给定分布（比如正态分布）模拟许多抽取（或样本）。
2.  使用 绘制这些绘图的密度`rnorm`。该`rnorm`函数以 ( *A,B,C ) 作为参数，并从以**B*为中心的正态分布中返回*A*样本的向量，标准差为*C*。

 **因此，要从标准正态（即平均值为 0，标准差为 1 的正态）中抽取大小为 50,000 的样本，并绘制其密度，我们执行以下操作：

```
x = rnorm(50000,0,1)

plot(density(x)) 
```

随着抽签次数趋于无穷，这将在分布中收敛到正常。为了说明这一点，请参见下图，从左到右、从上到下显示 5000、50000、500000 和 500 万个样本。[![5000,50000,500000 和 500 万个来自普通 PDF 的样本](../Images/755537269f86cd8f6337b49e2756ee87.png)](https://i.stack.imgur.com/gg24v.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-09-25T14:36:00.277

如果您喜欢在不使用 R 内置函数的情况下做某事的艰难方式，或者您想在 R 之外执行此操作，则可以使用以下公式。

[![在此处输入图像描述](../Images/2f65e04e7ef8ba3be32e802e22d0908c.png)](https://i.stack.imgur.com/TYhdq.png)

```
x<-seq(-4,4,length=200)
s = 1
mu = 0
y <- (1/(s * sqrt(2*pi))) * exp(-((x-mu)^2)/(2*s^2))
plot(x,y, type="l", lwd=2, col = "blue", xlim = c(-3.5,3.5)) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-12-06T21:33:47.717

一般情况下，例如：Normal(2, 1)

```
f <- function(x) dnorm(x, 2, 1)
plot(f, -1, 5) 
```

这是一个很笼统的，f可以自由定义，任意给定参数，例如：

```
f <- function(x) dbeta(x, 0.1, 0.1)
plot(f, 0, 1) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-04-26T07:56:49.747

我特别喜欢 Lattice 的这个目标。它可以轻松实现图形信息，例如曲线下的特定区域，这是您在处理诸如 find P(a < X < b) 等概率问题时通常需要的信息。请看一下：

```
library(lattice)

e4a <- seq(-4, 4, length = 10000)            # Data to set up out normal
e4b <- dnorm(e4a, 0, 1)

         xyplot(e4b ~ e4a,                   # Lattice xyplot
               type = "l",
               main = "Plot 2",
               panel = function(x,y, ...){
                   panel.xyplot(x,y, ...)
                   panel.abline( v = c(0, 1, 1.5), lty = 2)  #set z and lines

                   xx <- c(1, x[x>=1 & x<=1.5], 1.5)         #Color area
                   yy <- c(0,   y[x>=1 & x<=1.5], 0) 
                   panel.polygon(xx,yy, ..., col='red')
               }) 
```

[![在此处输入图像描述](../Images/5d099f249890c706081184193f06a810.png)](https://i.stack.imgur.com/9TqHh.png)

在这个例子中，我使两者之间的区域`z = 1`突出`z = 1.5`。您可以根据您的问题轻松移动此参数。

轴标签是自动的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-12-04T16:59:51.487

这是在函数中编写它的方法：

```
normalCriticalTest <- function(mu, s) {
  x <- seq(-4, 4, length=200) # x extends from -4 to 4
  y <- (1/(s * sqrt(2*pi))) * exp(-((x-mu)^2)/(2*s^2)) # y follows the formula 
of the normal distribution: f(Y)
  plot(x,y, type="l", lwd=2, xlim = c(-3.5,3.5))
  abline(v = c(-1.96, 1.96), col="red") # draw the graph, with 2.5% surface to 
either side of the mean
}
normalCriticalTest(0, 1) # draw a normal distribution with vertical lines. 
```

最后结果：

[![在此处输入图像描述](../Images/01c6a6bf2b8eefda1be942d22ffc2630.png)](https://i.stack.imgur.com/clOyi.jpg)**

# php - 黑莓网络工程和php

> ID：10488989
> 
> 赞同：1
> 
> 时间：2012-05-07T20:54:59.457
> 
> 标签：php, html, blackberry, blackberry-webworks

嘿，我想知道是否可以在 webworks 应用程序中使用 PHP？

也就是说，我正在尝试将信息从 HTML 表单传递到要在服务器上使用的 php 页面。那可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T01:36:38.833

php 是一种服务器端技术。Webworks 需要客户端技术，例如 HTML5 和 javascript

# c# - XamDataGrid 动态字段格式不佳

> ID：10488991
> 
> 赞同：0
> 
> 时间：2012-05-07T20:55:05.000
> 
> 标签：c#, wpf, infragistics, xamdatagrid

所以我有一个简单的窗口，它只包含一个 XamDataGrid，它保存在运行时生成的动态查询的预览数据......

```
public partial class DataPreview : Window
{
    public DataTable Data { get; set; }
    public DataPreview(string SQL)
    {
        InitializeComponent();

        this.DataContext = this;
        Data = DatabaseManager.ExecuteQuery(SQL);
    }
} 
```

我已将数据绑定到 XamDataGrid 的数据源...

```
<igDP:XamDataGrid DataSource="{Binding Data}" ScrollingMode="Immediate">
     <igDP:XamDataGrid.FieldSettings>
          <igDP:FieldSettings
             AllowEdit="False"/>
     </igDP:XamDataGrid.FieldSettings>
</igDP:XamDataGrid> 
```

现在这一切正常，问题是 XamDataGrid 中编辑器的数据类型有时与字段的数据类型不匹配。例如，所有数字都以美元符号显示。我试图添加这一行......

```
EditAsType="{x:Type sys:String}" 
```

它修复了除实际货币金额之外的所有内容，现在显示为 xx.xxxx，没有美元符号。我在网上找到的所有解决方案似乎都直接在 xaml 中编辑该字段，但由于这些字段都是动态的，所以这不是一个选项。我可以做些什么来在 xaml 中正确设置编辑器吗？或者我可以在代码中执行一些例程来将数据从 XamDataGrid 中正确显示？任何人都可以使用 XamDataGrid 以相关方式与所有动态列共享任何代码，但能够根据数据类型正确格式化它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T21:27:34.130

[可以使用ValueEditor.RegisterDefaultEditorForType](http://help.infragistics.com/Help/NetAdvantage/WPF/2011.1/CLR4.0/html/InfragisticsWPF4.Editors.v11.1~Infragistics.Windows.Editors.ValueEditor~RegisterDefaultEditorForType.html)设置用于特定类型字段的编辑器。如果编辑器是正确的类型，并且您希望更改给定类型的掩码，则可以使用[XamMaskedEditor.RegisterDefaultMaskForType](http://help.infragistics.com/Help/NetAdvantage/WPF/2011.1/CLR4.0/html/InfragisticsWPF4.Editors.v11.1~Infragistics.Windows.Editors.XamMaskedEditor~RegisterDefaultMaskForType.html)。

如果您希望为相同类型的不同字段设置不同的掩码或编辑器，则需要在创建 FieldLayout 后在代码中执行此操作。为此，您可以使用[FieldLayoutInitialized 事件](http://help.infragistics.com/NetAdvantage/WPF/2011.1/CLR4.0/?page=InfragisticsWPF4.DataPresenter.v11.1~Infragistics.Windows.DataPresenter.DataPresenterBase~FieldLayoutInitialized_EV.html)。

# javascript - 哪个 XSS OWASP 规则

> ID：10488992
> 
> 赞同：1
> 
> 时间：2012-05-07T20:55:05.837
> 
> 标签：javascript, xss, owasp

使用 OWASP 清单，保护这种情况的正确方法是什么？这是 javascript 字符串中的 url，其中 url 参数需要具有 xss 保护。

问题：

```
<script>
    var u = 'xyz.html?x=<% url.baddata %>'  
    dosomeAjax(u);
</script> 
```

可能的解决方案1：

```
var u = 'xyz.html?x=<% encodeForURL(url.baddata) %>' 
```

可能的解决方案2：

```
var u = 'xyz.html?x=<% encodeForJavaScript(url.baddata) %>' 
```

可能的解决方案3：

```
var u = 'xyz.html?x=<% encodeForJavaScript(encodeForURL(url.baddata)) %>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T02:28:16.740

应该使用解决方案 3：

```
//solution 3:
var u = 'xyz.html?x=<% encodeForJavaScript(encodeForURL(url.baddata)) %>'; 
```

如果我们将表达式重写为，则更容易看出这是正确的：

```
var u = '<% encodeForJavaScript("xyz.html?x=" + encodeForURL(url.baddata)) %>'; 
```

首先，我们通过`baddata`使用适当的转义函数附加到字符串常量来创建一个安全的 URL。然后我们把那个安全的 URL 放到一个 JavaScript 字符串中，所以我们必须调用 JavaScript 转义函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-01T01:13:22.690

我要回答我自己的问题。在一遍又一遍地处理这种情况之后，解决方案非常明显，原因也很明显。

首先也是最重要的：插入到 javascript 中的任何字符串都需要是 javascript 安全的。无论如何，这总是需要发生：

```
<script>
  var x = "<% encodeForJavaScript(someCrazyString) %>";
</script> 
```

这里的目标是确保此声明的安全。由于这是 javascript 代码，因此将其视为 javascript--这不是 url，因此 url 编码不正确。

现在，如果`x`要在 url 中使用它，则需要将其编码为 url。

唯一的事情是`x`现在是一个 javascript 字符串。所以服务器端编码是不可能的，因为字符串被推出了中间层，现在在浏览器中生存和呼吸。

解决方法是使用javascript的url编码功能： `encodeURIComponentz()`

```
<script>
  var x = "<% encodeForJavaScript(someCrazyString) %>";
  x = x + '234'
  var url = 'http://localhost/abc.cfm?x=' + encodeURIComponent(x)
</script> 
```

从来没有理由使用 2 个服务器端 XXS 编码函数。始终使用单个服务器端编码函数并为上下文使用正确的服务器端函数：

网址：

```
<a href="xyz.jsp?x=<% encodeForURL(someString) %>" target="_blank" >click here</a> 
```

js：

```
 <script>
   var x = "<% encodeForJavaScript(someCrazyString) %>";
 </script> 
```

json:

```
 <script>
   var x = {"x"  : "<% encodeForJSONinJS(someCrazyString) %>"};
 </script> 
```

## 更新（几年后）

执行 2 次服务器端编码将获得与一次在服务器端和一次在客户端进行编码相同的结果。所以解决方案 3 是正确的，当且仅当`var u`停留在 url 范围内。

**进行 2 次服务器端编码的危险在于，您只能在第一次**编码 的上下文中使用该片段。

以上面的示例为例，再添加 1 行：

```
 <script>
     var u = 'xyz.html?x=<% encodeForJavaScript(encodeForURL(url.baddata)) %>
     dosomeAjax(u);
     document.getElementById('someDivTag').innerHTML= u;
 </script> 
```

现在有问题，因为 u 是 url 编码的而不是 html 编码的。（在这种特殊情况下，这不会出现 xss 可变性，因为您无法将 url 编码的字符串分解到 js 范围内——尽管如此，还有许多其他情况需要对字符串进行 2x 编码）。

为了灵活性，我的偏好是在服务器上编码一次，并根据客户端的需要编码为：

```
 <script>
     var x = "<% encodeForJavaScript(someCrazyString) %>";
     var u = 'http://localhost/abc.cfm?x=' + encodeURIComponent(x)
     dosomeAjax(u);
     document.getElementById('someDivTag').innerHTML= u.toHtml();
 </script> 
```

哪里`toHtml()`是：

```
 var __entityMap = {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': '&quot;',
            "'": '&#39;',
            "/": '&#x2F;'
    };

    String.prototype.toHtml = function() {
            return String(this).replace(/[&<>"'\/]/g, function (s) {  
                    return __entityMap[s];
            });
    } 
```

我正在检查 Cheran Shunmugavel 的答案是否正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T21:13:39.410

```
var u = 'xyz.html?x=<% encodeForURL(encodeForJavaScript(url.baddata)) %>' 
```

EncodeForURL 应该放在最后。

`<`插入强制性“评估不好，你在想什么？？”`>`

# java - 带有 AlarmManager Android 应用程序的 For 循环

> ID：10488998
> 
> 赞同：0
> 
> 时间：2012-05-07T20:55:32.057
> 
> 标签：java, android, alarm

我正在尝试制作一个小型应用程序，它每 10 分钟显示一次通知，直到达到 2 小时，然后警报应该停止，当我使用它时`setRepeat()`它运行良好但我无法停止它，正如我在我的 prevoise 问题[HERE](https://stackoverflow.com/questions/10485358/stopping-alarm-android-application/10486265#10486265)中提到的那样，，

我尝试了很多方法，但仍然有问题警报没有停止......

我有一个使用 `mAlarmManager.set()`内部循环的想法，我写了一个代码，但循环只启动一次警报..

所以，我在这里问我如何实现这个想法并每 10 分钟显示一次通知，直到 2 小时！

如果您能提供帮助，我将不胜感激

提前致谢 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T21:02:39.033

你不想把它放在一个循环中。相反，让警报的未决意图触发代码检查已经过去了多少时间，并在适当的情况下取消警报。（这将进入您创建 PendingIntent 的类的 onReceive 方法中。）

或者，您可以从开始时间开始设置两个小时的另一个警报，这将触发代码以取消重复警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T21:18:43.187

您也可以在 for 循环中设置警报。

例子：

```
long next=0;
for (int i = 0; i < 12; i++) {
  alarmManager.set(AlarmManager.RTC_WAKEUP, mCurrentTime + 10*60*1000 + next, pendingIntent);
  next+=10*60*1000;
} 
```