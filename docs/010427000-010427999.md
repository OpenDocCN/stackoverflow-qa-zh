# StackOverflow 问答 10427000-10427999

# python - Python - OCR/图像处理：搜索和分割

> ID：10427000
> 
> 赞同：0
> 
> 时间：2012-05-03T07:31:48.740
> 
> 标签：python, image-processing, ocr

我正在研究本质上是 scantron 软件的东西。我正在用 python 写，我一直在尝试让光学识别工作。我已经到了给定一张带有白色背景和铅笔标记的图像的地步，我可以判断它是真还是假。下一步实际上是能够读取表单，并获取需要检查的每个位置。我可以完全控制表单的设计，所以现在我需要找到一种相对于子图像进行操作的方法。

基本上：给定一个图像，我希望能够相对于我可以搜索的子图像分割图像。这样，我可以让表单在左上角使用某种指示器（这样打印+扫描中的任何细微变化都不会搞砸）。然后，我需要能够相对于该子图像“剪切”图像。我知道 PIL 允许您切碎图像，但我找不到模糊的子图像搜索功能......关于下一步我应该去哪里的任何想法？

我也对如何实现这一点的其他想法持开放态度。

# jquery - 运行ajax提交方法的替代方法

> ID：10427004
> 
> 赞同：0
> 
> 时间：2012-05-03T07:32:09.960
> 
> 标签：jquery

大家好，我目前正在使用下面的代码在我的页面上运行 ajax 提交，并且想知道考虑到用于捕获用户数据的各种方法，这是否是处理它的最有效方法。

更好的方法需要什么？

这是我目前使用的 JavaScript 代码：

```
$(document).ready(function() {
    $("#submit").click(function() {
        $("#form").hide(300);
        $.post('run.php', $("#form").serialize(), 
        function(data) {
            $("#result").html(data);
        });
        return false;
    });
}); 
```

这是我的表格：

```
<form id="booking">
          <table width="600" cellpadding="2px" cellspacing="2px" style="font-size: 20px;">
            <tr>
              <th width="296" align="left">Date Of Wedding</th>
              <td width="288"><input name='date' type='text' class='larger' id='date' value='' size='20'/></td>
            </tr>
            <tr>
              <th align="left">Party Size</th>
              <td><input name='partySize' type='text' class='larger' id='partySize' value='' size='20' /></td>
            </tr>
            <tr>
              <th align="left">Catering Grade</th>
              <td>1:
                <input name='cateringGrade' type='radio' class='larger' value=1 size='12'/>
                2:
                <input name='cateringGrade' type='radio' class='larger' id='cateringGrade' value=2 size='12'/>
                3:
                <input name='cateringGrade' type='radio' class='larger' id='cateringGrade' value=3 size='12'/>
                4:
                <input name='cateringGrade' type='radio' class='larger' id='cateringGrade' value=4 size='12'/>
                5:
                <input name='cateringGrade' type='radio' class='larger' id='cateringGrade' value=5 size='12'/></td>
            </tr>
            <tr>
              <th align="left">&nbsp;</th>
              <td>&nbsp;</td>
            </tr>
            <tr>
              <th align="left">&nbsp;</th>
              <td><input name="submit" type="button" value="Submit" id="submit"/></td>
            </tr>
          </table>
        </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:36:51.253

$.post() 使用 $.ajax() 函数，所以两者都很好。

我更喜欢 $.ajax() 因为我发现它更符合逻辑且易于配置。

我会将您的脚本更改为：

```
$(document).ready(function() {
    $("#form").bind('submit', function(e) {
        e.preventDefault();
        $(this).hide(300);
        $.ajax({
            type: 'POST',
            url: 'run.php',
            data: $("#form").serialize(),
            success: function(data) {
                $("#result").html(data);
            }
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T07:40:29.297

```
$(document).ready(function() {
    $("#submit").click(function() {
        var form = $("#form");
        form.hide(300);
        $.ajax({
          url: 'run.php',
          type: form.attr('method'), // POST or GET,
          data: form.serialize(),
          success: function(data) {
             // handle with response
             $("#result").html(data);
          }
        });
        return false;
    });
}); 
```

但最好在表单提交功能中执行此操作，如下所示：

```
$(document).ready(function() {
        $('form').submit(function(e) {
            e.preventDefault();
            var form = $(this);
            form.hide(300);
            $.ajax({
              url: 'run.php', // you can also use form.attr('action') if url is dynamic
              type: form.attr('method'), // POST or GET,
              data: form.serialize(),
              success: function(data) {
                 // handle with response
                 $("#result").html(data);
              }
            });
        });
    }); 
```

# c++ - 单个进程中的多个 log4cxx Dom Configurator

> ID：10427006
> 
> 赞同：1
> 
> 时间：2012-05-03T07:32:22.407
> 
> 标签：c++, process, log4cxx

我有 2 个不同的 com 组件，它们在同一进程中实例化。两个组件都使用 Log4cxx DomConfigurator 并配置不同的 log4cxx config xml 文件。每个都为日志指定不同的路径。但是日志是在最新实例化的 com 组件指定的路径中创建的。

我希望这 2 个 COM 组件日志将在单独的文件中。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-23T12:00:45.303

我意识到这个线程已有几年历史了......但不觉得它得到了回答。

您的问题是如何将日志记录输出到每个组件的不同文件。这个问题的标题“单个进程中的多个 DOM 配置器”......不是您尝试做的事情的正确答案。

如果您使用的是 DOM 配置，您可以轻松定义多个将写入不同文件的 Appender。

```
<appender name="LogFileA" class="org.apache.log4j.FileAppender">
    <param name="file" value="/tmp/logs/logA.log"/>
    <param name="append" value="true"/>

    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d %c %-5p (%F:%L) - %m%n"/>
    </layout>
</appender>

<appender name="LogFileB" class="org.apache.log4j.FileAppender">
    <param name="file" value="/tmp/logs/logB.log"/>
    <param name="append" value="true"/>

    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d %c %-5p (%F:%L) - %m%n"/>
    </layout>
</appender> 
```

然后为每个组件定义一个记录器，该记录器将使用适当的 Appender。

```
<logger name="componentA">
    <priority value="all"/>
    <appender-ref ref="LogFileA"/>
</logger>

<logger name="componentB">
    <priority value="all"/>
    <appender-ref ref="LogFileB"/>
</logger> 
```

配置并检索指向适当记录器的指针：

```
log4cxx::xml::DOMConfigurator::configure("xml_config_file");
log4cxx::LoggerPtr componentA = log4cxx::Logger::getLogger("componentA");
log4cxx::LoggerPtr componentB = log4cxx::Logger::getLogger("componentB"); 
```

虽然我怀疑这个答案会帮助你......我希望它会帮助其他有类似问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:28:50.157

具有此代码的组件 1 或者您可以在任何组件都可以使用的 logcxx 包装器公共类中编写。

```
strPath = "AppLog1.dat";
log4cxx::BasicConfigurator::configure();
log4cxx::File cfgFile(strPath);
log4cxx::PropertyConfigurator::configureAndWatch(cfgFile, 60000); 
```

组件 2 具有相同的代码和不同的 AppLog2.dat 文件

示例 dat 文件。

```
#Log4cxx configuration file . 
#Final version of log4cxx config 
#Author - Sri  4/5/2012

# Root logger set to DEBUG using the A2 apender defined above. 
# Set options for appender named 'DT' 
# DT's layout is TTCC, using the 
# ISO8061 date format with context printing enabled. 

log4j.appender.DT=RollingFileAppender 
log4j.appender.DT.layout=TTCCLayout
log4j.appender.DT.File=.\\log\\log.log
log4j.appender.DT.layout.ContextPrinting=enabled
log4j.appender.DT.layout.DateFormat=ISO8601
log4j.appender.DT.rollingPolicy=org.apache.log4j.rolling.TimeBasedRollingPolicy
log4j.appender.DT.rollingPolicy.FileNamePattern=.\\log\\log-%d.log.zip

# Set options for appender named 'RawAppender' 
# RawAppender's layout is PatternLayout

log4j.appender.RawAppender=RollingFileAppender 
log4j.appender.RawAppender.layout=TTCCLayout
log4j.appender.RawAppender.File=.\\log\\Raw.log
log4j.appender.RawAppender.layout.ContextPrinting=enabled
log4j.appender.RawAppender.layout.DateFormat=ISO8601
log4j.appender.RawAppender.rollingPolicy=org.apache.log4j.rolling.
TimeBasedRollingPolicy
log4j.appender.RawAppender.rollingPolicy.FileNamePattern=.\\log\\RawData-%d.log.zip

# Set options for appender named 'ErrorAppender' 
# ErrorAppender's layout is TTCC, using the 
# ISO8061 date format with context printing enabled. 

log4j.appender.ErrorAppender=RollingFileAppender 
log4j.appender.ErrorAppender.MaxBackupIndex=10 
log4j.appender.ErrorAppender.layout=TTCCLayout
log4j.appender.ErrorAppender.File=.\\log\\Error.log
log4j.appender.ErrorAppender.layout.ContextPrinting=enabled
log4j.appender.ErrorAppender.layout.DateFormat=ISO8601
log4j.appender.ErrorAppender.rollingPolicy=org.apache.log4j.rolling.
TimeBasedRollingPolicy
log4j.appender.ErrorAppender.rollingPolicy.FileNamePattern=.\\log\\Error-%d.log.zip

# Root logger set to DEBUG using the A2 apender defined above. 

log4j.rootLogger=DEBUG, DT

# The logger 'DTError' inherits its level from the 
# logger hierarchy. Output will go to the appender's of the root 
# logger, DT in this case. 

log4j.logger.DTError=INHERIT,ErrorAppender 
```

///////////////////////////////////////// /////////////////// 当你编写第二个组件的配置文件时，只需更改日志路径或文件名。

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T07:40:19.033

如果您使用相同的进程或线程，则 logcxx 尝试覆盖前一个。所以最好启动另一个线程并分配 logcxx 来做下一个日志记录。那么一切都会好起来的。

# autocomplete - 如何使 UltraEdit 自动完成 C++ 类的类成员/函数？

> ID：10427007
> 
> 赞同：3
> 
> 时间：2012-05-03T07:32:36.603
> 
> 标签：autocomplete, ctags, ultraedit

我目前正在使用带有 Ctags 的 UltraEdit 来编辑 C++ 文件 (.cpp)。它的 Ctags 支持在我打字时自动自动补全符号——但它不能正确地将自己限制在一个非常盲目的类的成员中。如何让 UltraEdit 像 Vim+ctags+cppcomplete 一样更智能？到目前为止，我在网上找不到任何插件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T01:19:54.883

与 Eclipse 等 IDE 相比，UltraEdit 在自动完成方面做得不好，因为它不知道如何以特定语言的方式解析标记 - 即它无法知道您的变量/方法名称是什么并仅列出自动完成的那些。

但是，UltraEdit 确实有一个内置的默认自动完成功能（控制+空格）——UltraEdit 将在活动文件中从光标位置向后搜索 50K 以查找与部分键入的单词匹配的单词并显示这些单词。转到高级 > 配置 > 编辑器 > 自动完成，您可以在 X 个字符后勾选“自动显示自动完成对话框”选项。

此外，您可以设置特定语言的自动完成文件（UtlraEdit 的网站有[一些您可以下载的预定义文件](http://www.ultraedit.com/downloads/extras.html#autocomplete)）。因此，例如，您可以用一堆类名或其他常用词/标记填充此文件，它们也将始终出现在该文件类型的自动完成对话框中。通过首选项将特定的自动完成文件链接到文件类型：

1.  高级 > 配置 > 编辑器 > 自动换行/制表符设置
2.  单击更改列表
3.  键入 c 或 java 或任何扩展名 > 单击添加 > 单击确定
4.  在“为设置或默认选择扩展名”文本下，选择您刚刚创建的新扩展名。
5.  单击“浏览”以将该文件类型链接到特定的自动完成文件。
6.  单击“确定”退出“配置”对话框。

最后，从 UltraEdit 18 开始，编辑器在模板方面变得更好了*。*当您打开 ac 文件时，显示模板视图：视图 > 视图/列表 > 模板列表。您应该在该模板列表中看到一堆用于常见 c 结构（如 IF、DO 等）的智能模板。您也可以在此处创建自己的模板。

请注意，所有这些内容（在文件中搜索 50k 标记；在自动完成文件中列出标记；列出模板）都将显示在 control+space 上。

# autohotkey - 当它在autohotkey中用作热键时如何发送一封信

> ID：10427010
> 
> 赞同：2
> 
> 时间：2012-05-03T07:33:03.623
> 
> 标签：autohotkey

例如，我想按'v'通过自动热键获取'asdfv'，但是当我定义如下时：

v::发送 asdfv

脚本运行到无限循环，因为最后一个 v 被覆盖为快捷方式。所以问题是，我怎样才能得到我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T12:18:57.793

两种方式：

```
#UseHook On

v::send asdfv 
```

或者

```
$v::send asdfv 
```

# java - 如何在 pom 中添加仅包含依赖 jar 的构建 ear 文件

> ID：10427013
> 
> 赞同：0
> 
> 时间：2012-05-03T07:33:17.043
> 
> 标签：java, web-applications, maven-2, ear, pom.xml

我想使用 maven 创建一个只包含依赖 jar 文件的耳朵。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <dependencies>
        <dependency>
            <groupId>groupId</groupId>
            <artifactId>artifactId</artifactId>
        </dependency>
        ......
        ......
        ......
    </dependencies>

    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-ear-plugin</artifactId>
            <configuration>
                <modules>
                    <jarModule>
                        <groupId>groupId</groupId>
                        <artifactId>artifcatId</artifactId>
                        <includeInApplicationXml>true</includeInApplicationXml>
                    </jarModule>
                </modules>
                ...............
                ...............
            </configuration>
        </plugin>
    </plugins>          
</project> 
```

Maven 自动创建了 application.xml，其中包含这些 jar 的条目，但在部署时，我仍然在控制台中收到消息 - “没有在耳朵中找到模块。”

你能帮我弄清楚我在这里错过了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:26:00.340

EAR 文件应包含 WAR、RAR、SAR 和 EJB JAR。就 EAR 而言，包括基本库 JAR 在内的任何其他内容都是不重要的，而仅具有这些文件的 EAR 就 Java EE 应用程序服务器而言毫无用处。

# ruby - ruby - zeromq 检测到客户端超时，但客户端挂起

> ID：10427015
> 
> 赞同：1
> 
> 时间：2012-05-03T07:33:22.623
> 
> 标签：ruby, zeromq, mq

我正在尝试编写一个简单的 zmq 系统来替换 http 客户端/服务器。当服务器关闭/不可用时，我的客户端超时，但不会重试或停止。我错过了什么？

zmq_client.rb（修改版 Han Holl 的懒惰海盗客户端 from zeromq guide）

```
require 'rubygems'
require 'zmq'

context = ZMQ::Context.new
socket = context.socket(ZMQ::REQ)
socket.connect('tcp://localhost:5559')

retries = 2
timeout = 10

retries.times do |tries|
  message = "Hello #{tries}"
  raise("Send: #{message} failed") unless socket.send(message)
  puts "Sending string [#{message}]"

  if ZMQ.select( [socket], nil, nil, timeout)
    message = socket.recv
    puts "Received reply [#{message}]"
    break
  else
    puts "timeout"
  end

end
socket.close 
```

zmq_broker.rb（在 zeromq 指南中找到的 Oleg Sidorov 代码的修改版本）

```
require 'rubygems'
require 'ffi-rzmq'

context = ZMQ::Context.new
frontend = context.socket(ZMQ::ROUTER)
frontend.bind('tcp://*:5559')
poller = ZMQ::Poller.new
poller.register(frontend, ZMQ::POLLIN)

loop do
  poller.poll(:blocking)
  poller.readables.each do |socket|
    if socket === frontend
      loop do
        socket.recv_string(message = '')
        more = socket.more_parts?
        puts "#{message}#{more}"
        socket.send_string(message, more ? ZMQ::SNDMORE : 0)
        break unless more
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:00:45.887

在第一次超时后再次`Send: #{message} failed`尝试时，您应该会立即收到错误，因为您的 2nd将在 1st 之后直接发生，并且 REQ 套接字强制每个必须遵循 (successful, not timeout-ed) 。`send``send``send``send``recv`

在惰性海盗模式中，您可能需要发送多个请求才能获得回复。[0MQ 指南](http://zguide.zeromq.org/page%3aall#toc67 "导游")中建议的解决方案是在出错后关闭并重新打开 REQ 套接字。您的客户端不会关闭/重新打开 REQ 套接字。

您可能会发现指南[中的“Ruby 中的 Lazy Pirate 客户端”示例](http://zguide.zeromq.org/rb%3alpclient)很有帮助。

# mysql - LIKE 和 REGEXP 有什么区别？

> ID：10427020
> 
> 赞同：2
> 
> 时间：2012-05-03T07:33:57.353
> 
> 标签：mysql

我有一个 mySQL 通配符查询不起作用，可能是因为我使用 InnoDB 而不是 MyISAM。

```
SELECT a.product_id, a.category_id FROM products a 
LEFT JOIN users u ON u.userid=a.ownerid 
WHERE a.active=1 AND a.approved=1 
AND a.deleted=0 AND a.name LIKE '%*my*%' 
AND a.name LIKE '%*donuts*%' 
AND (a.name REGEXP '( )*(*my*)*( )*(*donuts*)( )*') 
```

每当使用单词而不是通配符时，它都可以正常工作，这不是问题。

我只是想知道，是

```
(a.name REGEXP '( )*(*my*)*( )*(*donuts*)( )*') 
```

已经做了一个之后真的需要

```
LIKE '%*my*%' AND a.name LIKE '%*donuts*%' 
```

有什么不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T07:57:21.037

> 有什么不同？

*   **正则表达式**

    ```
    (a.name REGEXP '( )*(*my*)*( )*(*donuts*)( )*') 
    ```

    这会产生错误，因为量词（例如未转义`*`字符）在组的开头（即紧跟在未转义`(`字符之后）无效。忽略发生这种情况的两次会产生：

    ```
    (a.name REGEXP '( )*(my*)*( )*(donuts*)( )*') 
    ```

    这与任何匹配`a.name`：

    1.  零个或多个空格，后跟
    2.  零次或多次出现：

        *   这封信`m`，然后是
        *   零个或多个字母`y`

        其次是

    3.  零个或多个空格，后跟
    4.  字符序列`donut`，后跟
    5.  零个或多个字母`s`，后跟
    6.  零个或多个空格
*   **简单的图案**

    ```
    a.name LIKE '%*my*%' AND a.name LIKE '%*donuts*%' 
    ```

    这与任何匹配`a.name`：

    1.  任何字符序列，后跟
    2.  字符序列`*my*`，后跟
    3.  任何字符序列

    **并**与：

    4.  任何字符序列，后跟
    5.  字符序列`*donuts*`，后跟
    6.  任何字符序列

# c# - 如何停止访问 SFTP 服务器上的无效文件？

> ID：10427021
> 
> 赞同：2
> 
> 时间：2012-05-03T07:33:58.630
> 
> 标签：c#, sftp

我的客户端已配置 SFTP 服务器并使用 FileWatcher 监视文件夹。一旦文件被复制到 SFTP 服务器，客户端就会选择它们。

如果在传输文件时连接中断，客户端会选择无效文件。

在这两者之间，我去删除无效文件，客户端已经从该文件夹中选择并删除了该文件。

在完成完整交易之前，我如何才能停止客户端对该文件的访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:41:13.827

您应该使用临时文件夹进行上传，并且只有在文件完全上传后才移动监控文件夹中的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:30:23.503

存在两个通用选项 - 将文件上传到不同的文件夹并将其移动（您已针对您的特定情况拒绝此操作）并使用不同的名称上传文件并在上传完成后重命名文件。

如果您控制服务器的架构，则可以执行以下技巧：上传名称为 filename..ext 的文件。服务器将检查文件名并知道预期的大小。一旦文件具有指定的大小，服务器就可以选择并重命名它。

# c++ - 微软的源注释语言（SAL）——有什么方法可以利用它吗？

> ID：10427023
> 
> 赞同：4
> 
> 时间：2012-05-03T07:34:07.493
> 
> 标签：c++, c, visual-c++, microsoft-sal, sal

有什么方法可以利用 Microsoft 的 SAL，例如通过保留此信息的 C 解析器？还是由 Microsoft 制造，仅供 Microsoft 内部使用？

它对于很多任务都非常有用，例如为其他语言创建 C 库绑定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:11:59.767

不确定您所说的“利用”是什么意思，但目前 VS 2011 Beta 在通过[/analyze](http://msdn.microsoft.com/en-us/library/ms173498%28v=vs.110%29.aspx)选项执行代码分析时使用 SAL 注释。注释只是来自[sal.h](http://msdn.microsoft.com/en-us/library/ms235402%28v=vs.110%29.aspx)的纯宏，微软鼓励使用（至少在 VS 环境中）。

如果您只是想在预处理步骤之后保留信息，您可以让宏扩展为自己，或者只是更改现有的开源预处理器之一以排除符号（VS 也有一些来自 SAL 的扩展选项宏），但是使用注释提供的信息将需要类似于自定义 LLVM 预传递或 GCC 插件的方式来执行此操作（如果编译代码，尽管您可以同时将它们用于绑定生成）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-24T22:16:00.143

SAL 注释可以通过静态分析找到大量错误。

[http://msdn.microsoft.com/en-us/library/windows/hardware/hh454825(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/hh454825%28v=vs.85%29.aspx)

我从来没有从头开始设置它，但我的开发环境每次构建时都会使用 prefast 进行静态分析。在编译时查找错误比在运行时查找要好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:34:53.673

就我个人的经验而言，源注释是一种快速查看参数应该如何传递或假定如何传递的有用方法。就利用这一点而言，我同意 prepass 可能是真正利用它的唯一方法，如果你对它的输出有特定的需求或期望，我可能会建议你自己编写。希望我帮助..

# java - RabbitMQ 连接处于阻塞状态？

> ID：10427028
> 
> 赞同：8
> 
> 时间：2012-05-03T07:34:26.480
> 
> 标签：java, rabbitmq

那时我连接到 RabbitMQ 服务器，我的连接显示处于阻塞状态，我无法发布新消息我有 6 GB 的可用内存，磁盘空间也约为 8 GB

如何在 RabbitMQ 中配置磁盘空间限制

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T23:24:41.380

我遇到了同样的问题。似乎rabbitmq服务器使用的内存超过了阈值

[http://www.rabbitmq.com/memory.html](http://www.rabbitmq.com/memory.html)

我运行以下命令来取消阻止这些连接：

rabbitmqctl set_vm_memory_high_watermark 0.6

（默认值为 0.4）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T22:27:22.157

默认情况下，[disk_free_limit](source: [1]) 必须超过可用 RAM 的 1.0 倍。在您的情况下确实如此，因此您可能需要检查究竟是什么阻塞了流程。为此，请阅读 [rabbitmqctl man](source: [2])，然后运行 ​​last_blocked_by 命令。这应该告诉你阻塞的原因。

假设它是内存（并且您不知何故没有正确计算可用磁盘空间），要更改 disk_free_limit，请阅读 [configuring rabbitmq.config]（来源：[1]），然后打开您的 rabbitmq.config 文件并添加以下行：`{rabbit, [{disk_free_limit, {mem_relative, 0.1}}]}`在配置声明中。我的 rabbitmq.config 文件如下所示：

```
[
{rabbit, [{disk_free_limit, {mem_relative, 0.1}}]}
]. 
```

当然，具体数字由您决定。

来源

1.  [http://www.rabbitmq.com/configure.html#configuration-file](http://www.rabbitmq.com/configure.html#configuration-file)
2.  [http://www.rabbitmq.com/man/rabbitmqctl.1.man.html](http://www.rabbitmq.com/man/rabbitmqctl.1.man.html)

# servlets - 服务器端代码中的线程安全

> ID：10427032
> 
> 赞同：0
> 
> 时间：2012-05-03T07:34:38.520
> 
> 标签：servlets, thread-safety, reentrancy

我是服务器端编码和 JSP/servlet 的新手。我有一个包含 3 个类的代码。第一个是从 java httpservlet 继承的 Serv 类。在这我实现了 doPost() 方法。在 doPost() 中，我使用第二类 ResourceClass 的对象。ResourceClass 是一个单例类。因此，基本上使用任何方法都是做类似 ResourceClass.getInstance().readResource(); 现在 readResource 进一步使用 Java Native 访问库从磁盘读取资源。现在我的问题是，因为据我了解，如果有 1000 个客户端针对每个新请求连接到我的服务器（Apache Tomcat），我将有一个新的 servlet 服务于该请求。但是所有这些 servlet 本质上都将使用相同的单例对象。因此，此读数将是线程安全的。

我不改变任何内部状态。所以我认为它不会影响我的输出，因此整个东西都是幂等的。但是所有这些请求是否都会排队，从而使单例类对象成为瓶颈。或者每个servlet都有自己的副本。

此外，如果我更改资源状态，那么在这种情况下它将是线程安全的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:41:30.100

首先，您不会为每个请求创建一个新的 servlet。相同的、唯一的 servlet 实例将用于同时处理所有请求。servlet 也是一个单例：Web 容器只实例化一个实例。

您说对 ResourceClass 单例的请求将排队。他们不会，除非您将该方法标记为`synchronized`或使用其他一些锁定机制。如果你不这样做，那么线程将同时调用你的单例方法。

不看你的单例代码和JNI库的代码就无法判断它是否是线程安全的。它是只读的这一事实表明它*可能*是线程安全的，但不能保证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:44:20.327

在 Java EE 服务器中，每个 servlet 只有一个实例。另一方面，每个http请求都由服务器在自己的线程中处理。

有一个实例，`ResourceClass`因为它是单例，因此如果`readResource()`方法同步，您将遇到瓶颈。

# android - 在服务中创建线程以完成繁重的工作是否有帮助？

> ID：10427033
> 
> 赞同：2
> 
> 时间：2012-05-03T07:34:39.287
> 
> 标签：android, android-service

我是否应该创建线程来做繁重的服务工作，如果没有，它会不会有任何风险，导致 ANR 或强制关闭？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:21:43.800

在android中使用以下创建线程

*   线
*   工作线程
*   处理程序线程
*   异步任务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T23:51:19.487

是的，您应该为此创建一个线程。或者您可以使用 AsyncTask 的子类并在 doInBackground() 中执行此操作。

[您可以在此处](https://developer.android.com/reference/android/os/AsyncTask.html)找到有关 AsyncTask 的文档。

# oracle - What are Double Quotes in Oracle (XMLElement)?

> ID：10427037
> 
> 赞同：-3
> 
> 时间：2012-05-03T07:35:19.863
> 
> 标签：oracle

What type does "Foo" have in the following:

```
select XMLElement("Foo", 'Bar') from dual 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T07:43:24.720

It doesn't have a "type" (i.e. it's not a number, date or character string) - it's just the label for the XML node.

The double-quotes stops Oracle from converting the label to uppercase, i.e.:

```
select XMLElement(Foo, 'Bar') from dual;

<FOO>Bar</FOO>

select XMLElement("Foo", 'Bar') from dual;

<Foo>Bar</Foo> 
```

# iphone - UIScrollView 与 UITableView 相比奇怪的 ScrollIndicator

> ID：10427040
> 
> 赞同：3
> 
> 时间：2012-05-03T07:35:50.897
> 
> 标签：iphone, objective-c, ios, xcode

我正在使用 UIScrollView 并且在滚动它时我注意到 ScrollIndicator 正在根据我的滚动插图缩小。但这不是 UITableView 的情况。

我试过做`[scrView setBounces:NO]`，但这并没有使它更加用户友好，而且它阻碍了滚动运动。

有什么方法可以使**UIScrollView scrollIndicator 与 UITableView scrollIndicator 相同**？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:21:59.123

对于 UITableViewController，您可以关闭 Bounces，这意味着 tableView 不能被弹性向上拉然后反弹回来。这也意味着滚动条不会缩小。

您可以使用以下命令将其关闭`setBounces`：

```
[self.tableView setBounces:NO]; 
```

您可以在 UIScrollView 中执行相同的操作。请参阅文档：http: [//developer.apple.com/library/ios/documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/instp/UIScrollView/bounces](http://developer.apple.com/library/ios/documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/instp/UIScrollView/bounces)

# .net - 在 .net Web 应用程序中使用 Open XML 所需的参考资料

> ID：10427041
> 
> 赞同：4
> 
> 时间：2012-05-03T07:36:00.563
> 
> 标签：.net, xml, ms-word

我即将放弃 .net 应用程序中的 Word 自动化，我将尝试使用 Open XML。

看来我需要参考：

```
using System.IO;
using System.IO.Packaging
using DocumentFormat.OpenXm;l.Packaging; 
```

经过一番搜索后，我发现您需要添加对 Windows Base 的引用才能显示 System.IO.Packaging。

要使用 DocumentFormat.OpenXml.Packaging，您需要参考什么？我在任何地方都找不到它。我认为您可能必须参考 Microsoft.Office 之类的东西，但这也不可用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T07:49:40.213

在我最新的项目（ASP.NET MVC3）中，我引用了这些：

*   DocumentFormat.OpenXML => 来自[Open XML Sdk](http://www.microsoft.com/en-us/download/details.aspx?id=5124)
*   视窗基地
*   系统文件

如前面评论中所述，您需要下载并安装 Open XML Sdk 才能查看程序集并引用它。

PS：看看[Open XML Powertools](http://powertools.codeplex.com/)项目，它是一个库（我想它可以通过 nuget 获得），可以让您的工作轻松一点。

# c# - 接线和拆线事件

> ID：10427043
> 
> 赞同：4
> 
> 时间：2012-05-03T07:36:12.813
> 
> 标签：c#

在某些情况下，我发现，开发人员取消连接事件，然后像这样再次连接它：

```
control.Click -= new eventHandler(eventHandler)
control.Click += new eventHandler(eventHandler) 
```

他们为什么这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T07:39:58.443

可能是因为中间有其他代码会触发事件，而他们不想`eventHandler`对其采取行动。恕我直言，这不是做事的最佳方式，但它很容易而且很有效。

如果两者之间*没有*其他代码，则不可能有理由再次删除并添加相同的事件处理程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T07:46:38.670

我可以用一个简单的场景来解释这一点。

想象一下，您有一个“button1”并且您在运行时添加了事件。

但是一旦单击此按钮。它背后的过程需要说“3分钟”才能完成。而且您不希望用户再次单击此按钮。

因此，您可以在第一时间取消接线。这样该人就不会一次又一次地单击该按钮。并将指令添加到队列中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-07T16:25:27.793

如果您调用连接事件的代码，并且如果它已经连接，您不会不小心再次连接它，您可以取消连接，然后重新连接它。这是上面的代码示例。

如果它一开始还没有连接，则不会引发错误。但是如果代码已经先运行，你不会让事件运行两次。因此，先拆线，然后重新布线。

# function - 为什么 vba 要我对函数/子调用使用赋值？

> ID：10427044
> 
> 赞同：5
> 
> 时间：2012-05-03T07:36:20.473
> 
> 标签：function, vba

我试图在我的 Excel VBA 项目中创建一个简单的日志函数。

我想传递当前的过程名称和一个字符串

日志功能目前看起来像这样：

```
Public Sub log(procName As String, message As String)
   dolog (procName & ": " & message)
End Sub 
```

我试图这样称呼它：

```
Dim C_PROC_NAME As String
C_PROC_NAME = "autoSave"
log(C_PROC_NAME, "test") 
```

那是行不通的，我希望我这样做：

```
test = log(C_PROC_NAME, "test") 
```

并且像这样初始化 C_PROC_NAME 也*不起作用*：

```
DIM C_PROC_NAME As String = "autoSave" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T07:42:28.003

如果你想用parens调用一个sub，你需要`Call`在前面放置一个关键字：

```
Dim C_PROC_NAME As String
C_PROC_NAME = "autoSave"
Call log(C_PROC_NAME, "test") 
```

或者你可以不带括号调用它：

```
Dim C_PROC_NAME As String
C_PROC_NAME = "autoSave"
log C_PROC_NAME, "test" 
```

# android - android:layout_gravity 并不总是按预期工作

> ID：10427047
> 
> 赞同：-3
> 
> 时间：2012-05-03T07:36:32.483
> 
> 标签：android

这个布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#ffffff"
android:orientation="vertical" >

<TextView
    android:id="@+id/main_tv"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:keepScreenOn="true"
    android:text="@string/hello"
    android:textAppearance="@android:style/TextAppearance.Large"
    android:textColor="#0000ff" />

<ProgressBar
    android:id="@+id/main_progressBar"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical" />

</LinearLayout> 
```

textView 水平居中，但 ProgressBar 为什么不垂直居中？

附言。我知道我可以使用相对布局来做到这一点。但我不明白为什么它不能使用线性？ps2。为什么投反对票，这是一个完全合法的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-23T19:06:56.687

首先，我意识到这是一个非常古老的问题，但也许有人研究这个可能会发现这很有帮助。

我不完全确定为什么您的确切示例不起作用，如果您现在这样做，请务必让我知道。如果您为进度条添加额外的 LinearLayout，我确实知道它会起作用。像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ffffff"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/main_tv"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:keepScreenOn="true"
        android:text="@string/hello"
        android:textAppearance="@android:style/TextAppearance.Large"
        android:textColor="#0000ff" />
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <ProgressBar
            android:id="@+id/main_progressBar"
            style="?android:attr/progressBarStyleHorizontal"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:41:03.677

```
<ProgressBar
    android:id="@+id/main_progressBar"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical" /> 
```

试试上面那个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T07:42:27.493

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#ffffff"
android:orientation="vertical" >

<TextView
    android:id="@+id/main_tv"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_gravity="center_horizontal"
    android:keepScreenOn="true"
    android:text="@string/hello"
    android:textAppearance="@android:style/TextAppearance.Large"
    android:textColor="#0000ff" />

<ProgressBar
    android:id="@+id/main_progressBar"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true" />

</RelativeLayout> 
```

# android - 如何在微调器中默认添加第一个值null。？

> ID：10427049
> 
> 赞同：0
> 
> 时间：2012-05-03T07:36:45.213
> 
> 标签：android, json, spinner

我从微调器中的 web 服务（Json）获取列表数据。但在微调器中的网络服务数据之前，我想显示空值。（需要第一个值为空）

请任何人帮助我..请给我一个示例代码。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:52:46.657

您可以添加一个代表您的空值的虚拟对象。但是微调器不是为此而设计的——它们应该包含一些数据（如果没有数据可用，则什么都不包含）。

因此，在您的情况下，我建议使用 a`ListView`或类似的东西，它可以在新活动中打开`startActivityForResult`并返回`Intent`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:53:35.117

你是用单线程做整个过程吗？

你可以使用你的监听器，首先你膨胀空数组/列表，然后你可以设置你的数据更改..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T07:58:00.447

微调器中的空值会给你一个非常烦人的异常。最好添加一些对象作为数组的第一个元素，例如“请选择一个”或“未选择任何内容”。当你创建你给微调器的数组时，首先添加这个元素，然后加载真实数据。

# html - CSS 定位：左手长菜单出现在页脚后面

> ID：10427050
> 
> 赞同：1
> 
> 时间：2012-05-03T07:36:49.803
> 
> 标签：html, css, positioning, footer, two-column-layout

我有一个固定且居中的 CSS 两列布局。在导航长而内容短的页面上，页脚不会重新定位到导航下方 - 它保持在内容区域的最小高度，并且导航位于页脚后面。

我已经在小提琴中包含了所有内容供您查看：http: [//jsfiddle.net/fmJqw/1/](http://jsfiddle.net/fmJqw/1/)

但本质上，我有以下结构：

```
<div id="wrapper">
   <div id="headerWrapper"></div>
   <div id="bcrumbwrapper"></div>
   <div id="midWrapper">
      <div id="navWrapper"></div>
      <div id="contentWrapper"></div>
   </div>
   <div class="clear"></div>
   <div id="footerWrapper"></div>
</div> 
```

CSS如下：

```
#wrapper{
    padding:0px;
    margin:0 auto;
    width:1000px;
    min-height:768px;
}
/*Header styles*/
#headerWrapper{
    padding:0px 0px 0px 0px;
    margin:0px;
    width:1000px;
    height:175px;
    position:relative;
}

#bcrumbWrapper{
    padding:0px 0px 0px 20px;
    margin:0px;
    width:980px;
    min-height:24px;
    position:relative;
}

#midWrapper{
    padding:0px;
    margin:0px;
    width:1000px;
    height:auto;
    position:relative;
}

#navWrapper{
    padding:20px 0px 0px 20px;
    margin:0px;
    float:left;
    width:200px;
    min-height:513px;
    position:absolute; 
    top:0; 
    bottom:0;
}

#contentWrapper{
    padding:15px;
    margin: 0px 0px 0px 220px;
    float:left;
    width:750px;
    min-height:503px;
    position:relative;
    background-color: #FFFFFF;
}

#footerWrapper{
    padding:5px 0px 0px 0px;
    margin:0px;
    width:1000px;
    height:40px;
    position:relative;
} 
```

任何帮助感激不尽！我在扯头发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:03:23.723

我从一个不是这里的会员的朋友那里找到了答案，所以想发帖供任何人将来参考。

因为我试图将两个项目都向左浮动，但对其中一个 div 使用绝对定位，所以事情发生了竞争。我删除了内容包装器上的浮动并删除了导航包装器上的绝对定位。然后我更改了包含 div 的背景颜色，以确保它看起来好像 navwrapper 运行了页面的长度。

于是变成了：

```
#midWrapper{
    padding:0px;
    margin:0px;
    width:1000px;
    height:auto;
    position:relative;
    background-colour: #EBE2CA;
}

#navWrapper{
    padding:20px 0px 0px 20px;
    margin:0px;
    float:left;
    width:200px;
}

#contentWrapper{
    padding:15px;
    margin: 0px 0px 0px 220px;
    width:750px;
    min-height:503px;
    position:relative;
    background-color: #FFFFFF;
} 
```

无需更改 html，也无需 javascript！

感谢您的协助 :) 并感谢我的朋友 Chris 的回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:47:54.260

您总是可以根据包含内容的 div 的高度，用一点 javascipt 动态更改最小高度，我认为这是#contentWrapper。

您可以检查 CSS Sticky 页脚：[http](http://www.cssstickyfooter.com/) ://www.cssstickyfooter.com/但由于您的标记的性质，它需要一些摆弄才能使其工作。

# spring-mvc - 使用 AOP-Spring 拦截器的书签重定向

> ID：10427052
> 
> 赞同：1
> 
> 时间：2012-05-03T07:36:55.640
> 
> 标签：spring-mvc, aop, interceptor

我正在尝试使用spring AOP编写一个拦截器。拦截器将查找请求URL是否是书签，如果是则重定向到身份验证页面。代码片段：

公共对象调用（MethodInvocation 调用）抛出 Throwable { logger.entering(this.getClass().getSimpleName(), "invoke", invocation);

```
 Object result = null;
    try {
        // Logic to exclude the beans as per the list in the configuration.
        boolean excluded = false;
        for (String excludebean : excludedBeans) {
            if (excludebean != null && excludebean.equalsIgnoreCase(invocation.getThis().getClass().getSimpleName())) {
                excluded = true;
                break;
            }
        }

        // If the Target Method is "toString", then set EXCLUDE to TRUE and process the request
        if(excluded == false && invocation.getMethod().getName().equalsIgnoreCase("toString"))
        {
            excluded = true;
        }

        // if user session object is available, then process the request or
        // else forward to the configured view.
        if (excluded || getSessionHolder().getUserVO() != null) {
            result = invocation.proceed();
        }
        else {
            logger.logp(Level.INFO, this.getClass().getSimpleName(),
                    "invoke(MethodInvocation)", "User Object is "+ getSessionHolder().getUserVO()
                            + ". So redirecting user to home page");
            result = new ModelAndView("redirect:/security/authenticate.do");

        }
    }
    catch (Throwable ex) {
        throw ex;
    }
    logger.exiting(this.getClass().getSimpleName(), "invoke");
    return result;
} 
```

当我调试控件按预期进入 else 块时，但在我返回结果后，控件转到加书签的 URl ratehr 的句柄方法，而不是重定向视图的处理程序。

请帮助我..提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:48:20.810

为什么拦截器需要 AOP。您可以使用常规拦截器轻松重定向。

```
public class RedirectInterceptor extends HandlerInterceptorAdapter{

    private String redirectMapping;

    public void setRedirectMapping(String redirectMapping) {
        this.redirectMapping = **maintenanceMapping**;
    }

    //before the actual handler will be executed
    public boolean preHandle(HttpServletRequest request, 
            HttpServletResponse response, Object handler)
        throws Exception {
                        if (somethingHappened){
            response.sendRedirect(redirectMapping);
            return false;
                        } else
                          return true;

    }
} 
```

# c++ - 网络摄像头校准

> ID：10427054
> 
> 赞同：0
> 
> 时间：2012-05-03T07:36:59.477
> 
> 标签：c++, c, opencv, camera-calibration

我有 2 个后勤网络摄像头，我想做立体三角测量，我必须测量 2 个网络摄像头的焦距。

我的问题是，如果我使用 openCv 来校准相机并生成内在和外在矩阵，我可以使用内在矩阵中生成的焦距值作为焦距的确切值。

简而言之，我想知道我是否可以使用 2 个网络摄像头进行立体三角测量，而不是使用整个立体摄像头...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:18:59.343

嗯，答案取决于你的意思`the exact value of focal length`. 如果您关心三角测量的准确性，那么您需要知道有几个因素会影响校准和三角测量的准确性。经验法则是拥有更宽的基线（两个相机之间的距离）以提高校准的准确性。其次，应该使用更多的点和更精确的点进行校准。第三，检查运行光束调整后的反投影误差。第四，当对远离相机的点进行三角测量时，不确定性更大。最后，除了第一个点，宽基线之外，两个相机之间的相对姿势非常重要，因为您应该考虑要对哪些点进行三角剖分以及它们应该在 3D 空间中的相对位置，然后你可以重建一些对你很重要的点，比其他点更准确。如果您提供有关您正在处理的问题的更多详细信息，也许您也会得到更详细的答案。我希望这会有所帮助。

# c++ - C++ 视频播放 + Alphas 和其他问题

> ID：10427059
> 
> 赞同：1
> 
> 时间：2012-05-03T07:37:27.300
> 
> 标签：c++, video

我正在制作一个简单的游戏，以娱乐和学习使用 SFML 进行 2D 内容。游戏相当简单。我不愿意说它是 HoG（隐藏对象游戏），但我想这将是一种快速表达我的观点的方法。基本上我使用 SFML 来加载和显示 2D 静止艺术并捕获鼠标事件。

无论如何...我想将视频剪辑添加到我的项目中。所有的艺术都被渲染了，例如..如果我的图像是一个有喷泉的公园，我想要一个循环的水流视频，这样图像即使只是静止的也有一些生命。

我所需要的只是能够在窗口中播放视频，最好与 sfml 兼容，但我正在规划项目中，如果需要，我可以换成其他东西。该项目将具有设定的分辨率（不可扩展），我只想加载视频并在 x,y 中的某个像素位置播放它们。因此，如果我有一个 1200x720 的图像，我会在某个位置循环播放一个 100x100 像素的视频，以使喷泉的水移动。

现在我想我可以将 2D 精灵加载到与背景图像匹配的视频上，以进行简单的遮罩。有一些格式，如 quicktime，可以将 alpha 通道直接嵌入到视频中，如果支持的话，那就太棒了。但布景设计中的一些规划应该意味着这并不是真正需要的。虽然如果支持的话，在系列设计中会打开更多选项。

我很擅长视频，因为我是一名专业的 3D 动画师，刚开始将编程作为学习爱好。因此，尽管我最近一直在使用 OGV，但视频的格式和容器并不是真正的问题。

我认为它需要的是

一次加载多个视频播放没有任何寄宿生或任何东西在窗口中的特定位置播放。无缝循环允许 zdepth 以便我可以将精灵放在上面

有谁知道我会开始调查这个吗？它看起来像是我可以使用的图书馆？最好是开源的，因为这只是一个有趣的项目，没有商业用途。

提前感谢您的任何想法。

# c# - 如何获取 DataNavigateUrlFields 的值？

> ID：10427060
> 
> 赞同：1
> 
> 时间：2012-05-03T07:37:28.067
> 
> 标签：c#, asp.net, .net, gridview, hyperlink

我有一个 DataTable，它通过`DataNavigateUrlField`.

在代码中我输入什么来获得该值，例如：

```
MessageNum = DataNavigateUrlField[MessageNumber]; 
```

在这里`DataNavigateUrlFields="MessageNumber"`，我可以在我的 C# 代码中做什么来获取 MessageNumber 的值？请我需要帮助。

```
<asp:HyperLinkField
    HeaderText="Subject"
    DataNavigateUrlFields="MessageNumber" 
    DataNavigateUrlFormatString="~/ViewMailContent.aspx?MessageNumber={0}"
    DataTextField="Subject" /> 
```

DataTable 设置为 GridView.DataSource，然后发送到页面，用户选择超链接，然后页面导航，我需要选择消息编号。

我注意到值显示在我的屏幕顶部的 Url 及其正确值，但是我如何获取值，是否可以在页面导航之前获取值？否则我认为该页面将不得不加载两次。

我大约一周前开始上网，所以不要给我极端的网络术语。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T08:01:21.910

你有（至少）两个选择：

1.  如果您需要目标页面（通过单击网格中的 url 导航到的页面）中的值，您只需编写

    示例（在后面的代码中）：

    ```
    Request.QueryString("MessageNumber") 
    ```

2.  如果您需要具有网格的页面中的值，您将重写 url 以指向一个 javascript 函数，该函数反过来可能会重定向到目标页面。

    ```
    <asp:HyperLinkField
        HeaderText="Subject"
        DataNavigateUrlFields="MessageNumber" 
        DataNavigateUrlFormatString="javascript:myFunction({0})"
        DataTextField="Subject" /> 
    ```

    函数（应该在源页面的 javascript 块中）：

    ```
    function myFunction(id)
    { 
        alert("Now you are leaving this page");
        document.location = "ViewMailContent.aspx?MessageNumber=" + id;
    } 
    ```

# salesforce - 在 salesforce 中分配日期。

> ID：10427062
> 
> 赞同：1
> 
> 时间：2012-05-03T07:37:37.247
> 
> 标签：salesforce

我写了一个批处理作业。在这个批处理作业中，我的条件是日期 > = 1/1/2012 我无法在查询中给出日期。你能帮我么。

全局 Database.QueryLocator 开始（Database.BatchableContext BC）{

```
 system.debug('Inside start');

    //date mydate = date.valueof(1/1/2012);
    return Database.getQueryLocator('select  name from opportunity');
} 
```

我有两种方式第一种是：将日期放入日期字段并将条件作为 date >= :mydate （在调试日志中显示错误为 Invalid date: 0 ）和第二种方式当我自己给出日期时as date >=: 1/1/2012（它在调试日志中显示为错误，作为意外令牌：/）

你能帮我么

谢谢阿努

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:45:42.950

您必须遵循正确的日期格式

```
YYYY-MM-DD

select name from opportunity where mydate >= 2012-01-01 
```

更多信息[在这里](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_calls_soql_select_dateformats.htm)

# erlang - erlang系统的设计图（图）

> ID：10427063
> 
> 赞同：3
> 
> 时间：2012-05-03T07:37:40.480
> 
> 标签：erlang

我已经阅读 4 erlang 的开源系统 3 个月了，它们是`rabbitmq, couchdb, gproc, jobs`.

它们与我之前的 c# 系统完全不同，因为它有很多进程并且不是面向对象的。

最好通过设计图（图表）来表达这些系统，而不仅仅是源代码。

你能告诉我哪种设计图（图表）和工具更适合这项工作吗？

如果有一些流程设计图（图表）的示例URL链接，那就更好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:20:30.563

据我所知，尚未开发出针对 Erlang 的可视化编程辅助工具。

如果您想使用图形抽象来了解软件中的依赖关系，您可以使用[XRef Tool](http://www.erlang.org/doc/apps/tools/xref_chapter.html)。该工具与 Erlang Digraph 库结合使用，还可以可视化这些依赖关系的图形，AFAIK。

希望这可以帮助！

编辑：[本文](http://www.erlang.org/euc/05/Widera.pdf)指的是一种在 Erlang 中创建用于可视化流程、消息传递和程序流的图表的方法。最后，您还可以使用[UML 序列图](http://www.ibm.com/developerworks/rational/library/3101.html)

# java - 正确实现等于

> ID：10427064
> 
> 赞同：1
> 
> 时间：2012-05-03T07:37:41.700
> 
> 标签：java, equals

我读过在实现 equals 时考虑别名是一个坏主意。
一个例子`equals`是`File`.
我想知道为什么这是一个坏主意？仅仅因为实现更难正确吗？
如果`FileA`和`FileB`引用同一个文件但具有不同的路径名，为什么它们不相等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:41:17.723

我认为`File`实际上是一个相当棘手的例子。

可以期望 Java 运行时知道[硬链接](http://en.wikipedia.org/wiki/Hard_link)吗？已安装的[NFS](http://en.wikipedia.org/wiki/Network_File_System)共享上的硬链接？

我认为“不”是对最后一个问题的公平答案，在这种情况下`File.equals()`只能在尽力而为的基础上工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T07:48:02.663

对于指向同一个实际文件的别名文件名，让 equals() 返回 true 是一个坏主意，因为它**违反**了关于相等行为的常见假设。

考虑以下示例：

*   即使它们现在引用相同的底层文件，这也可能在未来发生变化（例如，由于文件系统的变化使一个路径无效）。您希望现在平等的事物在未来保持平等（当然，除非您明确地改变它们）。
*   如果您转换文件（例如通过向上一个目录），那么结果也将不相等。这里违反的假设是您希望将相同的操作应用于两个相同的事物以产生相同的结果。

因此我们可以看到，考虑到别名会为两个所谓的“相等”对象产生一些意想不到的行为。当人们做出不正确的假设时，这可能会在未来引起奇怪和微妙的错误。

第二个但也相关的问题是，考虑别名可能会增加相当大的实现复杂性和性能开销。您通常希望`equals()`非常高效，因为它可能会经常被调用：如果它被迫对操作系统进行 IO 调用以确定文件别名，那么这种情况不太可能发生。

在这种情况下，我将实现一个完全不同的函数来测试指向相同的物理文件 -`refersToSameFile`或类似的东西。这允许您为操作使用更具描述性的名称，并避免弄乱对相等行为的期望。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T07:46:55.613

确切地说，他们为什么不能平等？或者他们为什么会这样做？

这只是口味和/或要求的问题。在某些情况下，您需要在两个别名之间进行多样化，在其他情况下，只有目标文件很重要。决定并不容易，因此做出决定至少要确保 java 版本之间的兼容性。

此外，在某些文件系统上，无法检测您是在处理链接还是实际文件（至少不是使用默认的 jre 工具）。

# ios - MPMoviePlayerController 给了我一个黑色的空视图，没有视频播放

> ID：10427065
> 
> 赞同：9
> 
> 时间：2012-05-03T07:37:43.340
> 
> 标签：ios, mpmovieplayercontroller

iOS 5.1，代码如下：

```
 MPMoviePlayerController *player =
    [[MPMoviePlayerController alloc] initWithContentURL: [NSURL URLWithString:@"map.mp4"]];
    [player prepareToPlay];
    [player.view setFrame: self.view.bounds];  // player's frame must match parent's
    [self.view addSubview: player.view];
    // ...
    [player play]; 
```

事实上，这和苹果参考说的一样，但是当我点击按钮使用这个功能时，只有一个黑色的矩形停留在那里，没有视频播放，没有声音发生，也没有暗恋，所以我想知道如何使这项工作

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-29T12:31:31.540

很抱歉很晚才回复。解决方案有点奇怪。但它帮助我在面对同样的问题时继续前进。

`MPMovieSourceTypeStreaming`是你错过的东西。

```
MPMoviePlayerController *player =
[[MPMoviePlayerController alloc] initWithContentURL: [NSURL URLWithString:@"map.mp4"]];
[player prepareToPlay];
[player.view setFrame: self.view.bounds];  // player's frame must match parent's
player.movieSourceType    = MPMovieSourceTypeStreaming;
[self.view addSubview: player.view];
// ...
[player play]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-03T08:38:14.387

您可能正在发送您的

```
[player play] 
```

消息太快了。

使用以下通知观察

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(playMovie:) name:MPMoviePlayerLoadStateDidChangeNotification object:player]; 
```

侦听 loadState 更改为可播放。要检查该更新，请执行以下操作：

```
- (void)playMovie:(NSNotification *)notification {
    MPMoviePlayerController *player = notification.object;
    if (player.loadState & MPMovieLoadStatePlayable)
    {
        NSLog(@"Movie is Ready to Play");
        [player play];
    }
} 
```

电影准备好后应该开始播放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T07:53:02.943

基于@Dinesh 的回答，您的 URL 创建不正确。的价值

```
[NSURL URLWithString:@"map.mp4"] 
```

将为零，因为 @"map.mp4" 不是有效的 URL。要从应用程序包中创建一个有效的 url，请按照 Dinesh 的说明进行操作。要创建一个远程 URL，您可以执行类似的操作

```
[NSURL URLWithString:@"http://www.jplayer.org/video/m4v/Big_Buck_Bunny_Trailer.m4v"] 
```

URL 应该包含它的所有部分：协议、主机、路径、文件。

干杯，费利佩

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T07:46:38.517

试试下面的代码从你的项目资源中播放视频：

```
 NSBundle *bundle = [NSBundle mainBundle];
  NSString *moviePath = [bundle pathForResource:@"map" ofType:@"mp4"];
  NSURL *movieURL = [[NSURL fileURLWithPath:moviePath] retain];

  MPMoviePlayerController *player =
  [[MPMoviePlayerController alloc] initWithContentURL:movieURL];
  [player prepareToPlay];
  [player.view setFrame: self.view.bounds];  // player's frame must match parent's
  [self.view addSubview: player.view];
    // ...
  [player play]; 
```

谢谢..！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-21T11:51:25.413

在主窗口上添加您的电影播放器​​控制器视图，例如：

```
 MPMoviePlayerController *player =
    [[MPMoviePlayerController alloc] initWithContentURL: [NSURL URLWithString:@"map.mp4"]];
    [player prepareToPlay];
    [player.view setFrame: self.view.bounds];

AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[appDelegate.window addSubview: player.view];

[player play]; 
```

希望它会起作用！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-31T11:23:31.053

请使用 MPMoviePlayerViewController 因为 MP4 文件。当你使用 MOV 然后工作完美！

```
MPMoviePlayerViewController *moviePlayerViewController;

-(void)PlayVideoController:(NSString*)videoUrl1 { 
    NSURL *fileURL = [NSURL URLWithString:videoUrl1]; 
    moviePlayerViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:fileURL];

    // Register for the playback finished notification.
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(myMovieFinishedCallback:) name:MPMoviePlayerPlaybackDidFinishNotification object:moviePlayerViewController.moviePlayer];

    //Present
    [self presentMoviePlayerViewControllerAnimated:moviePlayerViewController];

    // Play the movie!
    moviePlayerViewController.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
    [moviePlayerViewController.moviePlayer play];
}

-(void)myMovieFinishedCallback:(NSNotification*)aNotification {
    [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification object:moviePlayerViewController.moviePlayer];
    [moviePlayerViewController release], moviePlayerViewController = nil;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-03T16:17:46.253

您的播放器应该是您的视图控制器的属性，如下所示：

。H：

```
@property(nonatomic,weak)MPMoviePlayerController *moviePlayer; 
```

米：

```
 MPMoviePlayerController *player =
    [[MPMoviePlayerController alloc] initWithContentURL: [NSURL URLWithString:@"map.mp4"]];
    [player prepareToPlay];
    [player.view setFrame: self.view.bounds];  // player's frame must match parent's
    //set the player to your property
    self.moviePlayer=player;

    [self.view addSubview: self.moviePlayer.view];
    // ...
    [self.moviePlayer play]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-18T11:11:36.427

您可能需要交叉检查视频网址中的空格。以下代码对我有用。

```
- (IBAction)btnPlayVideo:(id)sender {

    self.strVideoUrl = [self.strVideoUrl stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    NSURL    *fileURL    =   [NSURL URLWithString:[NSString stringWithFormat:@"%@", self.strVideoUrl]];
    NSLog(@"Url to play = %@", self.strVideoUrl);

        self.moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];

        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(moviePlaybackComplete:)
                                                     name:MPMoviePlayerPlaybackDidFinishNotification
                                                   object:self.moviePlayerController];
        [self.moviePlayerController.view setFrame:self.view.bounds];
        [self.view addSubview:self.moviePlayerController.view];
        self.moviePlayerController.shouldAutoplay = YES;
        self.moviePlayerController.fullscreen = YES;
        self.moviePlayerController.controlStyle=NO;
        [self.moviePlayerController prepareToPlay];
        self.moviePlayerController.movieSourceType = MPMovieSourceTypeStreaming;

        [self.moviePlayerController play];

}

- (void)moviePlaybackComplete:(NSNotification *)notification
{
    self.moviePlayerController = [notification object];
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:MPMoviePlayerPlaybackDidFinishNotification
                                                  object:self.moviePlayerController];

    [self.moviePlayerController.view removeFromSuperview];
    self.closeVideAdProp.hidden = NO;
    btnCloseAd.hidden=FALSE;
} 
```

# android - 应用程序关闭时的广播接收器

> ID：10427066
> 
> 赞同：0
> 
> 时间：2012-05-03T07:37:44.080
> 
> 标签：android, android-activity, broadcastreceiver

我将为我的应用程序实现下载队列。它的功能之一是当网络连接或断开连接时。我想通知我的 QueueManger(Service) 更新项目状态并停止。我知道广播接收器的使用以及如何使用它。我的问题是如果我的应用程序弯下腰（完成）广播接收器会工作吗？它会通知应用程序吗？

如果没有，即使应用程序停止，也有任何方法可以实现此功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T07:47:00.137

如果您在 XML 中而不是以编程方式注册接收器，那么即使程序未运行，它也应该能够捕获这些。

请参阅问题，相同的解决方案将[Intent 操作应用于 android sdk 中的网络事件](https://stackoverflow.com/questions/2294971/intent-action-for-network-events-in-android-sdk)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T07:45:09.243

如果您`<receiver>` 在**AndroidManifest.xml**中定义了广播接收器并侦听 android 的默认操作字符串，那么*是的，它将起作用*。

否则，我建议您使用服务。它可以在后台静默运行并执行您想要的所有逻辑。当手机重新启动时（如果您编码正确），您的服务甚至可以自动触发。

# c# - 在按钮上绘制文本 - 外观差异

> ID：10427069
> 
> 赞同：2
> 
> 时间：2012-05-03T07:37:51.147
> 
> 标签：c#, winforms, fonts, paint

我有我的自定义按钮，我在其中覆盖了 OnPaint() 并仅在其中绘制文本。在运行时文本看起来不同 - 缺少字符之间的间距。这是按钮的设计和运行时的图像： ![在此处输入图像描述](../Images/81685cd45378b904a5bcacae2d660e75.png)

上色方法如下：

```
protected override void OnPaint(PaintEventArgs pevent)
{
    base.OnPaint(pevent);

    if (base.ContainsFocus)
    {
        // Draw inner dotted rectangle when button is on focus
        Pen pen = new Pen(Color.Gray, 3);
        Point p = base.Location;
        pen.DashStyle = System.Drawing.Drawing2D.DashStyle.Dot;
        Rectangle rectangle = new Rectangle(4, 4, Size.Width - 8, 
                                            Size.Height - 8);
        ControlPaint.DrawFocusRectangle(pevent.Graphics, rectangle);
    }

    // Draw the string to screen
    SizeF sf = pevent.Graphics.MeasureString(displayText, this.Font, 
                                             this.Width);
    Point ThePoint = new Point();
    ThePoint.X = (int)((this.Width / 2) - (sf.Width / 2));
    ThePoint.Y = (int)((this.Height / 2) - (sf.Height / 2));
    pevent.Graphics.DrawString(displayText, Font, 
              new SolidBrush(Color.FromArgb(255, 255, 254, 255)), ThePoint);
    this.Text = "";
} 
```

知道我哪里出了问题以及如何处理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:05:43.990

[Devils Child的回答](https://stackoverflow.com/a/10511103/366904)会影响线条和圆圈等的质量。

但是对于文本渲染，您可以使用：

```
e.Graphics.TextRenderingHint = TextRenderingHint.ClearTypeGridFit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:51:43.287

您需要像这样设置正确的平滑模式：

```
Graphics.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality 
```

然后，结果应该看起来不错。

# c# - 如果 Socket.Connect 失败，我可以说该域不存在吗？

> ID：10427072
> 
> 赞同：0
> 
> 时间：2012-05-03T07:38:10.380
> 
> 标签：c#, sockets

我想检查是否存在某些电子邮件域。

当`Dns.GetHostEntry(domain)`抛出异常时，我确定该域不存在。

1.  我可以说如果`Dns.GetHostEntry(domain)`成功则域确实存在，或者即使`Dns.GetHostEntry(domain)`成功并不意味着（仍然）该域存在？
2.  无法连接时我可以说同样的话`s.Connect`吗？我的意思是如果连接抛出异常，我可以说这样的域不存在吗？

如果 (1) 为真，那么为了检查域是否存在 (1) 就足够了，对吧？

```
public static bool Lookup(string domain)
{
    if (domain == null) throw new ArgumentNullException("domain");

    try {
       IPHostEntry ipHost = Dns.GetHostEntry(domain);
       var endPoint = new IPEndPoint(ipHost.AddressList[0], _dnsPort);

       return Transfer(endPoint);
    }
    catch (SocketException ex)
    {
          ++attempts;
    }
    return false;
}
public static bool Transfer(IPEndPoint endPoint)
{
    int attempts = 0;
    while(attempts <= _attempts)
    {                            
        try
        {
             var s = new Socket(endPoint.AddressFamily, SocketType.Stream, ProtocolType.Tcp);
             s.Connect(endPoint);
        }
        catch (SocketException ex)
        {
            ++attempts;
        }
        finally
        {
            s.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:42:14.663

尝试连接套接字时，您会说几件事：

*   从我的机器到目标机器有一条网络路径
*   网络路径没有防火墙和其他限制
*   目标机器在目标端口上托管服务
*   目标机器正在接受我在该目标服务上的连接

所有这些都发生**在**主机名被解析为 IP 之后。

所以你的问题的答案是*否定*的。如果`Socket.Connect`失败，则可能是该域不存在，或上述任何原因（可能还有更多）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:09:33.940

经过一些研究，我发现根据 dns 检查**mx 记录**会告诉我域是否可以接收电子邮件。如果 DNS 服务器确实返回域的 mx 记录，则仅表示该域可以接收电子邮件。如果没有返回 mx 记录，则域无法接收电子邮件 == 该域不存在

# android - 谷歌地图没有正确加载

> ID：10427082
> 
> 赞同：0
> 
> 时间：2012-05-03T07:38:49.170
> 
> 标签：android, android-mapview

我想通过菜单按钮在街景和卫星之间更改我的 GoogleMaps 视图。我使用的代码是：

```
 case R.id.item_satellite_view:
            mapView.setStreetView(false);
            mapView.setSatellite(true);
            mapView.invalidate();
            return true;

    case R.id.item_street_view:
            mapView.setSatellite(false);
            mapView.setStreetView(true);
            mapView.invalidate();           
            return true; 
```

我遇到的问题是地图只显示带有 X 的空白方块。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:23:56.797

您需要申请 Google Maps API 密钥。[前段时间](https://stackoverflow.com/questions/7603577/obtaining-google-maps-api-key)看我自己的问题

# php - 用户的计算机名称以及 IP 地址

> ID：10427084
> 
> 赞同：0
> 
> 时间：2012-05-03T07:38:54.993
> 
> 标签：php, javascript

嗨，我正在尝试获取我的用户的 IP 地址和计算机名称。我能够获得 IP 地址，但我没有获得计算机名称，我尝试了这些代码。

```
$ip=$_SERVER['REMOTE_ADDR']; 

gethostbyaddr($_SERVER['REMOTE_ADDR']);

$_ENV['COMPUTERNAME']; 
```

除了 ip 地址对我没有任何作用。我想获取客户端计算机名称

我想在我的服务器中提交这些 IP 地址和计算机名称。或者有没有更好的方法来识别回访者，因为大多数用户的 IP 地址每小时都在变化。我想计算来自特定电脑的用户访问我的网站的次数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:43:19.207

您无法获取计算机名称，因为 Web 浏览器不会将其发送到 Web 服务器。

尝试使用会话： [http ://www.tizag.com/phpT/phpsessions.php](http://www.tizag.com/phpT/phpsessions.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T07:43:01.310

> 我正在尝试获取...我的用户的计算机名称

你不能。

> 有没有更好的方法来识别回访者

使用 cookie/会话或登录系统。

# javascript - 在主干模型中覆盖 fetch() 方法

> ID：10427086
> 
> 赞同：22
> 
> 时间：2012-05-03T07:38:58.283
> 
> 标签：javascript, backbone.js

我想覆盖 Backbone 模型中的默认 fetch() 方法，因此仅在需要时调用它。

像这样的东西：

```
Account.Check = Backbone.Model.extend({
    model : Account.Item,

    url : Settings.Url.checkAccount,

    fetch : function(options) {         
                if (someCondition()) {
                    // do some stuff
            } else {
               super.fetch(options);
                }
    }
}); 
```

*我的问题是如何在// do some other stuff*部分中提供与默认 fetch() 方法相同的行为？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-03T07:41:53.450

这个应该做...

```
fetch : function(options) {         
           if (someCondition()) {
              // do some stuff
           } else {
              this.constructor.__super__.fetch.apply(this, arguments);
              // Or (less flexible)
              Backbone.Model.prototype.fetch.apply(this, arguments);    
           }
         } 
```

# java - 将 url 重定向到另一个应用程序

> ID：10427087
> 
> 赞同：2
> 
> 时间：2012-05-03T07:39:04.537
> 
> 标签：java, hibernate, jakarta-ee, struts

我有一个带有登录 ID 和密码的应用程序。从这个应用程序中，单击某个菜单项，我想重定向到另一个具有登录 ID 和密码的应用程序。

我正在尝试这样做，`session.setattribute`但无处可去。

这两个应用程序都是使用 Struts 和 Hibernate 在 Java EE 上构建的。有人可以建议怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:21:38.547

您在这里寻找的是所谓的“单点登录”，即不同的应用程序在它们之间共享用户凭据，因此用户只需登录一次。

正如您已经发现的那样，Web 应用程序之间不会共享会话。实际上，Java Servlet 规范中对此没有任何规定。根据您使用的应用程序服务器和部署架构，有许多用于此目的[的专有解决方案。](http://en.wikipedia.org/wiki/List_of_single_sign-on_implementations)最简单的示例是您使用的是 tomcat，并且您的所有应用程序都部署到相同的虚拟主机和领域（并使用相同的域）。然后您可以使用[单点登录阀](http://tomcat.apache.org/tomcat-7.0-doc/config/valve.html#Single_Sign_On_Valve)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:54:15.740

由于您的应用程序部署在同一个域上，您可以在响应中添加带有身份验证令牌的 cookie，并在其他应用程序的请求中读取身份验证令牌的值。

我能想到的其他选项是，创建一个 Authenticated 值并将其放入数据库中，然后将此值作为请求参数将重定向请求发送到其他应用程序。您的其他应用程序可以读取该身份验证值并使用数据库进行验证，并让用户传递登录名和密码页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T08:16:52.697

您不能直接通过 HttpSession 在 2 个单独的应用程序之间进行通信。您需要做的是使用 cookie 来实现这种通信。

也看看[这个线程](https://stackoverflow.com/questions/2415032/share-session-between-2-j2ee-applications-deployed-in-jboss-server)，因为你的似乎是那个线程的副本。

# uniqueidentifier - 根据 emailid 注册唯一用户

> ID：10427091
> 
> 赞同：5
> 
> 时间：2012-05-03T07:39:21.983
> 
> 标签：uniqueidentifier, user-registration, user-identification

我想根据他们在我的网站上的电子邮件 ID 注册用户，假设用户和他们的电子邮件 ID 字符串之间存在一对一的关系。但是[gmail 无法识别`.`email ids 中的 s](http://support.google.com/mail/bin/answer.py?hl=en&answer=10313#)。这意味着`juzerali@gmail.com`并且`juzer.ali@gmail.com`是相同的用户（或电子邮件 ID）。

我担心的不仅仅是这个用例，它可以通过简单地去除一串点来克服。不同的电子邮件提供商可能对电子邮件别名和符号有不同的政策。

我对社区的问题是，是否有任何事实上的规则/指南可以根据他们的电子邮件 ID 作为他们的唯一标识符来创建唯一用户？或者以前有人成功实施过这个吗？

注意：我检查了一些基于电子邮件 ID 注册的网站。他们似乎将两个 gmail id 与`.`s 的不同组合视为不同的电子邮件 id。这意味着同一个电子邮件帐户持有人可以在同一个站点上拥有两个帐户，我想避免这种情况。

**重要提示**：Oauth/OpenID 不是一个选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:32:42.777

尝试 facebook 登录并从 facebook API 获取用户名。但是如果您不想访问任何辅助服务进行身份验证，那么您不妨要求用户选择一个用户名，并在那里限制唯一性。据我所知，你无能为力！

```
Hotmail for example allows you to have any string after a +

for eg. abc@hotmail.com is same as abc+123@hotmail.com 
```

# opencv - OpenCV2.4.0 - facerec_demo 运行时错误

> ID：10427092
> 
> 赞同：0
> 
> 时间：2012-05-03T07:39:29.170
> 
> 标签：opencv

我是 OpenCV 的新手。我正在专门探索 OpenCV2.4beta 版本中添加的人脸识别功能。编译和执行后`samples/cpp/facerec_demo.cpp`，我得到以下运行时错误。

```
OpenCV Error: Assertion failed (depth == CV_8U || depth == CV_16U || depth == CV_32F) in cvtColor, file /home/truptivk/Desktop/Face Recognition /OpenCV-2.4.0-beta2/modules/imgproc/src/color.cpp, line 3143
terminate called after throwing an instance of 'cv::Exception'
what():  /home/truptivk/Desktop/Face Recognition /OpenCV-2.4.0-beta2/modules/imgproc/src/color.cpp:3143: error: (-215) depth == CV_8U || depth == CV_16U || depth == CV_32F in function cvtColor
Aborted (core dumped) 
```

倾倒它显示的深度值后`CV_64F`。

我为 AT&T 数据库创建了 csvfile.ext。（图像有 8 位灰度。）我使用的是 Ubuntu 12.04 32 位版本。我不知道它从哪里拿起`CV_64`F。

请帮我纠正这个错误。为了避免这种情况，需要什么？感谢和问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T21:28:43.153

我与编写人脸识别代码的 Philipp Wagner 取得了联系。我收到了他的回复。

> 他的回复：移植到 OpenCV 2.4 时发生了一个小错误。我一有时间就会在SVN中修复它。现在我已经 [在这里为 OpenCV 2.4 上传了一个更正的 facerec_demo.cpp](http://bytefish.de/dev/cpp/facerec_demo.cpp)

因此，在此说明中，我将关闭此线程。@karlphillip 非常感谢您提供的所有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:36:19.990

您正在尝试使用不是**官方/稳定**版本的 2.4Beta，因此我建议您在 OpenCV 邮件列表上请求帮助。

如果您正在考虑使用官方[2.4.0 版本](http://code.opencv.org/projects/opencv/repository/show/tags/2.4.0)，您可以获取它的源代码并自己编译。

它尚未在网站上，但您可以在存储库中找到它。

# javascript - 使用 CSS/JS 滚动的“液体”图块

> ID：10427094
> 
> 赞同：0
> 
> 时间：2012-05-03T07:39:35.010
> 
> 标签：javascript, css, html, layout, markup

我的任务是实现一个网页元素，它是一组应该在触摸设备上平滑滚动的图块，并支持通过网页中的按钮进行传统滚动：

![设计示例](../Images/2b19e70a756692f9bc181c9e3d32c70c.png)

在平板电脑上，当用户滚动投资组合图块时，他们应该滚动而不是整个页面。

这在布局/标记方面如何实现？也许您可以就如何实现相似性提供一个示例教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:48:25.597

您可以为瓷砖容器设置一个固定的高度，并使用：`overflow: scroll`和一些 JS 来设置样式，如下面的链接中所述。

有关移动特定触摸滚动的更多信息，请查看：

[http://cubiq.org/iscroll-4](http://cubiq.org/iscroll-4)

[http://blog.joelambert.co.uk/2011/10/14/a-fix-for-ios5-overflow-scrolling-scrollfix-js/](http://blog.joelambert.co.uk/2011/10/14/a-fix-for-ios5-overflow-scrolling-scrollfix-js/)

[http://johanbrook.com/browsers/native-momentum-scrolling-ios-5/](http://johanbrook.com/browsers/native-momentum-scrolling-ios-5/)

# .net - 将 .NET 程序集类型库导入 Delphi 不会生成过程

> ID：10427101
> 
> 赞同：2
> 
> 时间：2012-05-03T07:39:48.690
> 
> 标签：.net, delphi, dll, assemblies, ole

我正在尝试通过将其作为 COM 类型库导入来访问 Delphi 中的 .NET 程序集 (Position.dll)。一切似乎都可以导入，但生成的 Position_TLB.pas 文件仅包含创建类的函数。没有导入任何类方法或委托。

这就是我所做的。

1) 将 Position.dll 程序集添加到 GAC 中。

```
gacutil.exe -i Position.dll 
```

2）注册程序集

```
regasm.exe Position.dll 
```

3) 将程序集作为类型库导入 Delphi

所有导入的类看起来像这样：

```
 IID__MyClass: TGUID = '{F53EAE3D-9EB8-1111-B1F7-5DB609FDBEAE}';
  CLASS_MyClass: TGUID = '{E15581CD-FFF5-34CE-3434-D5484798900F}';

...

  _MyClass = interface;
  _MyClassDisp = dispinterface;
  MyClass = _MyClass;

// *********************************************************************//
// Interface: _MyClass
// Flags:     (4432) Hidden Dual OleAutomation Dispatchable
// GUID:      {F53EAE3D-9EB8-1111-B1F7-5DB609FDBEAE}
// *********************************************************************//
  _MyClass = interface(IDispatch)
    ['{F53EAE3D-9EB8-1111-B1F7-5DB609FDBEAE}']
  end;

...

// *********************************************************************//
// DispIntf:  _MyClassDisp
// Flags:     (4432) Hidden Dual OleAutomation Dispatchable
// GUID:      {F53EAE3D-9EB8-3538-B1F7-5DB609FDBEAE}
// *********************************************************************//
  _MyClassDisp = dispinterface
    ['{F53EAE3D-9EB8-1111-B1F7-5DB609FDBEAE}']
  end;

...

// *********************************************************************//
// The Class CoMyClass provides a Create and CreateRemote method to
// create instances of the default interface _P2100 exposed by
// the CoClass P2100\. The functions are intended to be used by
// clients wishing to automate the CoClass objects exposed by the
// server of this typelibrary.
// *********************************************************************//
  CoMyClass = class
    class function Create: _MyClass;
    class function CreateRemote(const MachineName: string): _MyClass;
  end;

...

class function CoMyClass.Create: _MyClass;
begin
  Result := CreateComObject(CLASS_MyClass) as _MyClass;
end;

class function CoMyClass.CreateRemote(const MachineName: string): _MyClass;
begin
  Result := CreateRemoteComObject(MachineName, CLASS_MyClass) as _MyClass;
end; 
```

MyClass 应该包含几个在 TLB 文件中看不到的方法和委托。

如果我在课堂上尝试代码完成，我会看到以下内容：

![在此处输入图像描述](../Images/3c4fc37c89b3deb3b80f85857955e57c.png)

我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T21:16:32.843

我也遇到过。不幸的是，您仅限于已添加到嵌入式类型库的内容。

这不是 Delphi 的“故障”，您无法修复它。

* * *

除非您想创建自己的托管 DLL，否则它知道如何调用其他托管库的托管方法，并且您自己将它们公开给 COM。

那么正确的任务是使用[dll](http://msdn.microsoft.com/en-us/library/ms973913.aspx)[*的免注册 COM*](http://msdn.microsoft.com/en-us/library/ms973913.aspx) ，这样您就不必强制用户注册*您的*COM/托管 dll。

我们已经使用[Microsoft Great Pains](http://www.microsoft.com/en-us/dynamics/erp-gp-overview.aspx)完成了它。`.dll`我们在知道如何调用托管 Great Pains 代码的 Visual Studio 中创建自己的代码。然后将所有这些方法公开给 COM。

# php - 在 error_reporting ON 的文档注释中使用 @class 标记时出现 Luracast Restler 错误

> ID：10427107
> 
> 赞同：1
> 
> 时间：2012-05-03T07:40:18.887
> 
> 标签：php, documentation, restler

我有一个使用 Luracast Restler API 在 PHP 中实现的 REST Web 服务。

如果我`@class`在暴露公共 API 方法的自定义类或实现执行身份验证的 iAuthenticate 方法的类中的文档注释中添加任何标签，如果错误报告为 ON，restler 将无法解析请求。

我认为问题在于 DocParser 类试图处理`@class`标签，就好像 PHP`Class`声明的位置一样。该类的方法`formatClass()`生成一个`undefined index`通知。如果错误报告为 ON，这将发送标头，因此当稍后 Restler 尝试发送响应时，它将无法更改标头以指示 JSON 内容已发送并被`Cannot modify header information - headers already sent`触发。

是否有任何解决方法或者只是 Restler Api 中的一个错误？（除了设置我的错误报告级别以避免发送通知）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:25:24.153

* * *

**更新：**它已在 Restler 2.1.5 中修复

* * *

这是一个存在于 Restler 2.1.4 中的错误，由 DocParser 引起，因为它需要`@class`特定格式的注释，如下所示

```
/**
 * @class ClassName(property=value&property2=value2)
 */ 
```

它用于在初始化后设置另一个类的属性。例如，我们可以使用它来告诉 XmlFormat 设置根名称，定义应该转换为属性的内容等，让我们以已知的 BMI 示例，添加 PHPDoc 注释，如下所示，

```
<?php
class BMI {
    /**
    * @class XmlFormat(root_name=self&attribute_names=height,weight)
    */
    function index($height=162.6, $weight=84) {
        $result = new stdClass();
        $cm = $height;
        $kg = $weight;

        $meter = $cm / 100;
        $inches = $meter * 39.3700787;
        $feet = round($inches/12);
        $inches = $inches % 12; 

        $result->bmi = round($kg/($meter*$meter),2);
        $lb = round($kg/0.45359237,2);

        if($result->bmi<18.5){
            $result->message = 'Underweight';
        }elseif ($result->bmi<=24.9){
            $result->message = 'Normal weight';
        }elseif ($result->bmi<=29.9){
            $result->message = 'Overweight';
        }else{
            $result->message = 'Obesity';
        }
        $result->metric = array('height'=>"$cm centimeter", 'weight'=>"$weight kilograms");
        $result->imperial = array('height'=>"$feet feet $inches inches", 'weight'=>"$lb pounds");
        return $result;
    }
} 
```

返回以下 XML

```
<?xml version="1.0"?>
<self>
    <bmi>31.77</bmi>
    <message>Obesity</message>
    <metric height="162.6 centimeter" weight="84 kilograms"/>
    <imperial height="5 feet 4 inches" weight="185.19 pounds"/>
</self> 
```

否则将是

```
<?xml version="1.0"?>
<response>
  <bmi>31.77</bmi>
  <message>Obesity</message>
  <metric>
    <height>162.6 centimeter</height>
    <weight>84 kilograms</weight>
  </metric>
  <imperial>
    <height>5 feet 4 inches</height>
    <weight>185.19 pounds</weight>
  </imperial>
</response> 
```

更多用例和解释可以在[这里找到](https://github.com/Luracast/Restler/issues/3)

`@class`当以意外格式定义时，它不应该抛出错误。我们将在下一个版本中修复它。

# java - 如何复制 List 的值而不是引用 进入另一个列表？

> ID：10427109
> 
> 赞同：24
> 
> 时间：2012-05-03T07:40:22.337
> 
> 标签：java, arraylist

也就是说，在不引用同一个对象的情况下，我需要将一个列表的元素值复制到另一个列表中。这些是列表：

```
List<Integer> listA = new ArrayList<Integer>();
List<Integer> ListB = new ArrayList<Integer>();

listA = (added some values);

listB = (do what?)... 
```

PS。我为初学者的问题道歉，但我从来没有做过这样的事情。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-03T11:42:48.737

绝对没有理由复制 Integer。Integer 是一个不可变的类。这意味着它的值是在创建 Integer 实例时设置的，并且永远不会改变。因此，整数引用可以由多个列表和线程共享而不必担心，因为任何人都无法更改其值。因此，您的问题没有真正的意义。

要创建一个`b`包含与另一个 List 相同的整数的 ArrayList `a`，只需使用以下代码：

```
List<Integer> b = new ArrayList<Integer>(a); 
```

当然 Integer 不会被克隆，但这是一件好事，因为克隆它们是完全没有必要的。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-03T07:50:36.460

您可以尝试查看[Collections.copy](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#copy%28java.util.List,%20java.util.List%29)方法：

> 公共静态无效副本（列表目标，列表源）
> 
> 将一个列表中的所有元素复制到另一个列表中。操作后，目标列表中每个复制元素的索引将与其在源列表中的索引相同。目标列表必须至少与源列表一样长。如果它更长，则目标列表中的其余元素不受影响。此方法以线性时间运行。
> 
> 参数： dest - 目的地列表。src - 源列表。

注意：以上内容适用于简单的数据类型，例如整数，但是，如果您有自己的对象，而这些对象又可能引用其他对象，则必须遍历每个对象并单独复制它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-03T07:47:42.963

使用该类的[方法](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#copy%28java.util.List,%20java.util.List%29)将`Collections`ArrayList 的所有元素复制到另一个 ArrayList：

```
Collections.copy(listA, listB); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T08:13:28.083

尝试使用它，而其他人给出的答案完全没问题。但根据我的选择，以下是最好的方法：

```
List<Integer> listB = new ArrayList<Integer>(listA); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-03T07:47:20.400

使用 clone() 和 Cloneable 你不会有很多运气——它只会创建一个浅拷贝。你可以使用这样的东西 - [http://javatechniques.com/blog/faster-deep-copies-of-java-objects/](http://javatechniques.com/blog/faster-deep-copies-of-java-objects/)。

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2012-05-03T07:42:24.317

尝试这个。

```
ListB.addAll(listA); 
```

# android - 如何使 scan-build(clang) 与预构建的 android gcc 一起工作？

> ID：10427111
> 
> 赞同：3
> 
> 时间：2012-05-03T07:40:25.930
> 
> 标签：android, gcc, clang, static-analysis, scan-build

我正在尝试使用 scan-build 为我用 C/C++ 编写的 android 本机项目执行静态源代码分析。我尝试了此页面上的说明（http://clang.llvm.org/get_started.html#build）来构建和运行扫描构建。所有这些都是在 Ubuntu 10.10 64 位版本中完成的。

由于我在 android 源代码中构建我的项目，因此使用的编译器是位于 android/prebuilt/linux-x86/toolchain/arm-eabi-4.4.0/bin/ 中的 gcc 和 g++。

据说我可以使用 --use-c++ 和 --use-cc 选项将 scan-build 配置为与 gcc/g++ 一起使用。但是当我运行命令时：（./run_scanbuild.sh 是构建脚本）

```
scan-build --use-cc=/home/chulwoo/8655_GB_AU_2_30/prebuilt/linux-x86/toolchain/arm-eabi-4.4.0/bin/arm-eabi-gcc --use-c++=/home/chulwoo/8655_GB_AU_2_30/prebuilt/linux-x86/toolchain/arm-eabi-4.4.3/bin/arm-eabi-g++ ./run_scanbuild.sh 
```

它说 ：

```
scan-build: 'clang' executable not found in '/home/chulwoo/Clang/llvm/tools/clang/tools/scan-build/bin'.
scan-build: Using 'clang' from path: /home/chulwoo/Clang/build/Debug+Asserts/bin//clang 
```

似乎 --use-c++ 和 --use-cc 选项被简单地忽略了。

有谁知道如何使 scan-build 与 android prebuilt gcc/g++ 一起工作？或者，在 android 中使用 Clang 构建我的项目是否可行？

提前致谢。斤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:57:14.983

好吧，这是一个愚蠢的问题。

只需使用以下命令构建它，它肯定会生成静态分析结果。这里假设 gcc 用于构建。

```
scan-build gcc ...whatever you wanna give as options... 
```

scan-build 真的是个不错的工具，希望大家喜欢。

# c# - Flexigrid / 动态调整行高

> ID：10427115
> 
> 赞同：1
> 
> 时间：2012-05-03T07:40:40.870
> 
> 标签：c#, jquery, asp.net, web-services, flexigrid

在开始之前检查此图像：[网格图像](http://postimage.org/image/gthl3j5nn/) ![在此处输入图像描述](../Images/6e10c727eb3621eba33d7cf55fea7fca.png)

我正在使用 jQuery flexigrid，我想动态调整行高。用户可以在运行时调整行高并将高度保存在数据库中，下次将应用更改的高度。

我需要一些关于从哪里开始的想法或一个示例解决方案，这对开始我的工作很有帮助。

我的开发环境是：ASP.NET、C#、jQuery 和 Web 服务。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T09:53:59.723

显然，您应该自定义原始的 flexigrid 代码。这是我认为我们可以遵循的一般步骤。

1.  应该将调整大小功能添加到`tr`表中。因为flexigrid`html table`用来显示。这是制作它的[示例](https://stackoverflow.com/questions/4439026/binding-resize-event-handler-to-table-row-with-jquery)。
2.  应添加 json 或其他格式来存储`Row`定义。
3.  自定义 flexigrid 的渲染功能，将 css 样式添加到`tr`存储在 DB 中的 json 中。

# batch-file - 如何使用 bat 制作字典

> ID：10427120
> 
> 赞同：1
> 
> 时间：2012-05-03T07:41:06.910
> 
> 标签：batch-file

我有一个给定的文件。我需要创建一个包含 27 个文件的文件夹。第一个文件包含给定文件中以 a 开头的按字母顺序排列的唯一单词，第二个文件以 b 开头，依此类推。

第 27 个文件包含以其他字符开头的单词。我设法用 做我的字典`awk`，但我必须这样做，`bat`这给我带来了很多问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T20:31:55.443

请注意，您没有要求我们*解释*批处理文件，对吧？:-)

```
@echo off
md folder
for /F "delims=" %%a in (theFile.txt) do (
   for %%b in (%%a) do (
      set word[%%b]=1
   )
)
for %%a in (A B C D E F G H I J K L M N O P Q R S T U V W X Y Z) do (
   (for /F "tokens=2 delims=[]" %%b in ('set word[%%a') do (
       echo %%b
       set word[%%b]=
   )) > folder\%%a.txt 2>NUL
)
(for /F "tokens=2 delims=[]" %%b in ('set word[') do (
   echo %%b
   set word[%%b]=
)) > folder\other.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-14T04:19:26.357

从技术上讲，我可以想到许多不同的方法可以做到这一点，但我建议你这样做：

```
@echo off
title dictionary
color 0a

echo enter the word you want for its definition.
echo.
set/p A=
if %A%==game GOTO game
ELSE
goto end
:end
Exit

:game
cls
echo.
echo game:a competitive activity involving skill, chance, or endurance on the part of two or more 
echo persons who play according to a set of rules, usually for their own amusement or for that of echo spectators.
echo.
pause
:end
Exit 
```

我只是说这个建议来自一个青少年！

# apache-flex - 我们如何获取 flex 应用程序的 google map api 密钥？

> ID：10427127
> 
> 赞同：0
> 
> 时间：2012-05-03T07:41:30.443
> 
> 标签：apache-flex, google-maps

我们如何获取 flex 应用程序的 google map api 密钥？

我正在使用显示谷歌地图的 flex Web 应用程序，它在本地主机中运行良好，但是当我在服务器中部署时，应用程序出错。

**

> 初始化失败：请检查 API 密钥、swf 位置、版本和网络可用性。

** 我该如何解决这个问题，请建议我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:45:58.577

首先，请了解 Flash Maps API 已被弃用，可能会在 2 年内关闭。因此，如果您正在开发一个将继续存在的项目，您应该使用 JavaScript Maps API。

如果这是一个现有的应用程序并且您移动了域或由于某种原因密钥不起作用，请按照以下说明请求密钥： [https ://developers.google.com/maps/documentation/flash/intro#API_Key](https://developers.google.com/maps/documentation/flash/intro#API_Key)

# c++ - 从 C# 调用非托管 C++ COM 服务器锁定不同的线程

> ID：10427132
> 
> 赞同：0
> 
> 时间：2012-05-03T07:41:54.347
> 
> 标签：c++, multithreading, com, interop, marshalling

我有一个不寻常的设置，我的 C++ 实例化了一个 C# COM 接口，该接口基本上是 C++ COM 本地服务器的代理，所以我们有 C++ -> C# -> C++（好吧，别问，它很复杂！）

现在，我的问题是，如果我从一个单独的线程调用 C#，导致调用 C++ 服务器，那么它会出现死锁。我当然明白在 C++ 中我们需要编组接口，但我认为在 C# 中没有必要（事实上，调用 C# 的线程已经编组了接口指针，这不是问题，它的由 C# 持有到服务器的接口就是问题）。

我错过了什么吗？

# wpf - WPF - 在用户控件中托管内容

> ID：10427133
> 
> 赞同：65
> 
> 时间：2012-05-03T07:41:54.707
> 
> 标签：wpf, user-controls

我正在尝试创建一个`Grid`具有两行的用户控件。第一行用于标题，第二行用于将在用户控件之外定义的内容，例如`Button`我们示例中的 a。

不知何故，我没有让它工作。

用户控件 1 xaml：

```
 <Grid Background="LightBlue">
    <Grid.RowDefinitions>
        <RowDefinition Height="50" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <TextBlock Text="Title" FontSize="30" Margin="10,0,0,0"/>
</Grid> 
```

主窗口xml：

```
 <Grid>
    <local:UserControl1>
        <Button>Click me</Button>
    </local:UserControl1>
</Grid> 
```

下面的图片应该解释我的问题是什么： ![在此处输入图像描述](../Images/a0f2424f137aa8481edebb5bee25081a.png)

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-05-03T07:53:09.310

以下代码

```
<local:UserControl1>
    <Button>Click me</Button>
</local:UserControl1> 
```

意味着您将`UserControl1`'s Content 属性设置为该按钮。这个按钮只是替换了那个`UserControls1`标记。因此，您在 UserControl1.xaml 中拥有的所有内容都不再存在。

**编辑**

如果您希望您的 UserControl 托管一些将在其外部设置的标记，您可以向其中添加一个`DependencyProperty`，例如：

```
 /// <summary>
    /// Gets or sets additional content for the UserControl
    /// </summary>
    public object AdditionalContent
    {
        get { return (object)GetValue(AdditionalContentProperty); }
        set { SetValue(AdditionalContentProperty, value); }
    }
    public static readonly DependencyProperty AdditionalContentProperty =
        DependencyProperty.Register("AdditionalContent", typeof(object), typeof(UserControl1),
          new PropertyMetadata(null)); 
```

并在它的标记中添加一些元素来承载额外的内容。这是扩展您提供的标记的示例：

```
<UserControl ... Name="userControl">
    <Grid Background="LightBlue">
        <Grid.RowDefinitions>
            <RowDefinition Height="50" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <TextBlock Text="Title" FontSize="30" Margin="10,0,0,0"/>
        <ContentPresenter Content="{Binding AdditionalContent, ElementName=userControl}" />
    </Grid>
</UserControl> 
```

现在您可以按如下方式使用它：

```
<local:UserControl1>
    <local:UserControl1.AdditionalContent>
        <Button>Click me</Button>
    </local:UserControl1.AdditionalContent>
</local:UserControl1> 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-05-03T08:03:43.910

您必须设置`ControlTemplate`：

```
<UserControl>
<UserControl.Resources>
    <Style TargetType="{x:Type local:UserControl1}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:UserControl1}">
                    <Grid Background="LightBlue">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="50" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <TextBlock Grid.Row="0" Text="Title" FontSize="30" Margin="10,0,0,0"/>
                        <ContentPresenter Grid.Row="1" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</UserControl.Resources>
</UserControl> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-03T08:05:29.770

您可以模板化用户控件以添加额外的视觉效果，例如`TextBlock`.

```
<UserControl>
<UserControl.Style>
  <Style TargetType="{x:Type UserControl}">
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate>              
          <Grid Background="LightBlue"> 
          <Grid.RowDefinitions> 
            <RowDefinition Height="50" /> 
            <RowDefinition Height="*" /> 
          </Grid.RowDefinitions> 
          <TextBlock Text="Title" FontSize="30" Margin="10,0,0,0"/> 
          <ContentPresenter Grid.Row="1" Content="{TemplateBinding Content}"  />
          </Grid> 
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
</UserControl.Style>
<Button>
  Click me!
</Button>
</UserControl> 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-08-26T10:41:33.370

使用模板

> < 内容控制 />

而不是使用 Content Presenter

所以放置这个：

```
<UserControl.Style>
        <Style TargetType="{x:Type UserControl}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type UserControl}" >
                          <Grid Background="LightBlue"> 
                           <Grid.RowDefinitions> 
                            <RowDefinition Height="50" /> 
                            <RowDefinition Height="*" /> 
                          </Grid.RowDefinitions> 
                           <TextBlock Text="Title" FontSize="30" Margin="10,0,0,0"/> 

                        <ContentControl  Grid.Row="1" Content="{TemplateBinding Content}"  />

                        </Grid> 
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Style> 
```

到您的用户控件

# jquery - 任何人都可以向我解释这个 filter(':first').click() 是如何工作的？

> ID：10427134
> 
> 赞同：1
> 
> 时间：2012-05-03T07:41:59.673
> 
> 标签：jquery

任何人都可以向我解释这个 filter(':first').click() 是如何工作的？

```
$(function() {
    var tabContainers = $('div.tabs > div');
    tabContainers.hide().filter(':first').show();
    $('div.tabs ul.tabNavigation a').click(function() {
        tabContainers.hide();
        tabContainers.filter(this.hash).show();
        $('div.tabs ul.tabNavigation a').removeClass('selected');
        $(this).addClass('selected');
        return false;
    }).filter(':first').click();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:43:17.587

它创建一个新的 jQuery 对象，其中包含第一个元素`$('div.tabs ul.tabNavigation a')`，然后`click`在该元素上触发事件。

请参阅[http://api.jquery.com/filter/](http://api.jquery.com/filter/)和[http://api.jquery.com/click/](http://api.jquery.com/click/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:18:44.237

就像这样：

当您单击`div.tabs ul.tabNavigation a`. 在您的代码中定义的 click 函数 `$('div.tabs ul.tabNavigation a')`将被执行。而且由于您添加了另一个点击 ie `filter(':first').click();`，之前执行的点击功能将再次执行 `first`ul a （即列表中的第一个链接）

# objective-c - 在 xcode 中使用线程调用函数

> ID：10427140
> 
> 赞同：5
> 
> 时间：2012-05-03T07:42:25.693
> 
> 标签：objective-c, ios, xcode, nsthread

我在 xcode 中创建了一个线程，并给出了要从该线程调用的函数名称。但我的问题是没有调用提供给调用的函数名称（知道何时在该函数中放置断点）

代码：

```
 NSThread* myThread; 
 [myThread start]; 
 [self performSelector:@selector(func1:) onThread:myThread withObject:nil waitUntilDone:false] 
```

后来我也试过这个：

```
NSThread* myThread = [[NSThread alloc] initWithTarget:self selector:@selector(func1:)object:nil];
[myThread start]; 
```

上面的 func1 是要调用的函数的名称。

那么任何人都可以告诉我如何创建线程并从那里调用 func1 ....

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-03T08:01:53.003

在您的第一个代码示例中，您实际上并没有创建一个新线程。您创建一个空`myThread`变量，然后调用`start`它，但这只会导致`start`被发送到`nil`. 然后将空线程变量发送到`performSelector:onThread:withObject:waitUntilDone:`可能什么都不做的方法。

您需要先正确创建一个线程，然后才能使用`performSelector:onThread:withObject:waitUntilDone:`.

或者，假设您不关心该方法在哪个后台线程上运行，那么简单地使用`performSelectorInBackground:withObject:`. 例如：

```
[self performSelectorInBackground:@selector(func1:) withObject:nil]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T07:51:15.987

如果有效，请尝试以下操作：

```
[NSThread detachNewThreadSelector:@selector(func1) toTarget:self withObject:nil]; 
```

由于您没有将任何对象传递给您的“func1”（又名：您的方法没有参数），因此您无需将“：”放在其名称之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T05:51:24.933

如果您的 func1 接受一个参数。那么肯定它必须与您使用的第二种方法一起使用。可能是你的 fuc1 没有正式的参数，你仍然像 @selector(fuc1:) 这样调用选择器并将对象作为 nil 传递。所以可能是由于这个原因它不起作用。这可能是原因之一。如果没有，请尝试。

# css - 案例之间的 CSS 切换

> ID：10427144
> 
> 赞同：0
> 
> 时间：2012-05-03T07:42:35.657
> 
> 标签：css, opera

我有这个 CSS：

```
.opera .lb-overlay:target {
width: auto;
height: auto;
bottom: 0px;
right: 0px;
padding: 8px 400px 12px 400px;
}

.lb-overlay:target {
width: auto;
height: auto;
bottom: 0px;
right: 0px;
padding: 8px 100px 12px 100px;
} 
```

我想做的是，当它的歌剧做这个填充时，其他填充物
做其他填充，
但它对我不起作用，任何人都可以告诉我这个我真的很感激

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:46:33.003

这个用于歌剧的 css hack 可能对您有用 @media all 和 (-webkit-min-device-pixel-ratio:10000)，而不是全部和 (-webkit-min-device-pixel-ratio:0) { #id {css rule} /*把你想要的 id 或 class 用于歌剧*/ }

# c# - 是否可以在第二个网格视图中计算总 计？

> ID：10427145
> 
> 赞同：0
> 
> 时间：2012-05-03T07:42:37.473
> 
> 标签：c#, gridview

我只是想知道。是否可以在第二个网格视图中计算小计的总计？我的意思是`GridView2`在`GridView1`：

```
<asp:GridView ID="grdOne">
   <asp:Gridview ID="grdTwo">
      <---SubTotal--->
      <---Grand Total--->
   </asp:Gridview>
</asp:GridView> 
```

因为我尝试了很多解决方案，但仍然没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:57:23.580

您也可以参考以下链接：

[http://www.asp.net/web-forms/tutorials/data-access/custom-formatting/displaying-summary-information-in-the-gridview-s-footer-cs](http://www.asp.net/web-forms/tutorials/data-access/custom-formatting/displaying-summary-information-in-the-gridview-s-footer-cs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:05:39.317

我假设您在标签或文本中填写小计，或者您可以在绑定时访问它的值，所以您要做的就是像这样对我们 RowDataBound_Event：

```
public int sum = 0;

protected void GirdView2_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {   
        //Sum the value of each subtotal
        sum = sum + subTotalValue;

        //Access the control that you want to to set the GrandTotal in
    }
} 
```

如果您仍然不明白，请详细告诉我您想要什么。

# r - 特定推文的转推计数

> ID：10427147
> 
> 赞同：2
> 
> 时间：2012-05-03T07:43:01.863
> 
> 标签：r, twitter

我正在使用“TwitteR”包和 R 程序来检索推文信息。尽管 Twitter API 提供

```
retweet_count’ function(https://dev.twitter.com/docs/faq#6899) 
```

我不知道如何在 R 中使用它。（也许`getURL`在 'RCurl' 包中使用''函数？）

基本上，我正在寻找方法

1.  特定推文被转发的次数

2.  在 R 中使用 Streaming API 获取实时信息，例如

    一个。新的追随者加入这些用户，并且

    湾。当他们发布推文或转推时，以及

    C。当他们发布的推文被其他人转发时

如果有人能帮助我找到线索以获取任何这些信息，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:01:56.573

我无法解决流式 API 问题，但是根据[这个有用的教程](http://heuristically.wordpress.com/2011/04/08/text-data-mining-twitter-r/)，如何处理转推。您可能可以使用它来专注于特定的推文，而不是每个用户的转发数量。这里的一些[帖子](http://blog.ouseful.info/category/syndication/rstats/)可能更有用。

```
# get package with functions for interacting with Twitter.com
require(twitteR) 
# get 1500 tweets with #BBC tag, note that 1500 is the max, and it's subject to mysterious filtering and other restrictions by Twitter
s <- searchTwitter('#BBC', n=1500) 
#
# convert to data frame
df <- do.call("rbind", lapply(s, as.data.frame))
#
# Clean text of tweets 
df$text <- sapply(df$text,function(row) iconv(row,to='UTF-8')) #remove odd characters
trim <- function (x) sub('@','',x) # remove @ symbol from user names 
#
# Extract retweets
library(stringr)
df$to <- sapply(df$to,function(name) trim(name)) # pull out who msg is to
df$rt <- sapply(df$text,function(tweet) trim(str_match(tweet,"^RT (@[[:alnum:]_]*)")[2]))      
#
# basic analysis and visualisation of RT'd messages
sum(!is.na(df$rt))                # see how many tweets are retweets
sum(!is.na(df$rt))/length(df$rt)  # the ratio of retweets to tweets
countRT <- table(df$rt)
countRT <- sort(countRT)
countRT.subset <- subset(countRT,countRT >2) # subset those RTd at least twice
barplot(countRT.subset,las=2,cex.names = 0.75) # plot them
#
#  basic social network analysis using RT 
# (not requested  by OP, but may be of interest...)
rt <- data.frame(user=df$screenName, rt=df$rt) # tweeter-retweeted pairs
rt.u <- na.omit(unique(rt)) # omit pairs with NA, get only unique pairs
#
# begin sna
library(igraph)
g <- graph.data.frame(rt.u, directed = T)
ecount(g) # edges (connections)
vcount(g) # vertices (nodes)
diameter(g) # network diameter
farthest.nodes(g) # show the farthest nodes 
```

# android - 使用 Facebook 对话框分享后 Android 应用程序崩溃

> ID：10427148
> 
> 赞同：1
> 
> 时间：2012-05-03T07:43:02.813
> 
> 标签：android, facebook, multithreading, dialog

我正在尝试将 Facebook SDK 集成到 Android 项目中。我在 Facebook 对话框中发布了一条墙消息，当我点击“分享”时，该消息会成功发布在我的 Facebook 墙上。但是我的游戏还是崩溃了！

我从扩展 Activity 的主类中调用它。为了弹出 facebook UI 对话框，我使用 runOnUiThread。（AsyncTask 在我的代码中不起作用。）

```
public static int fbShareScores( final String sBody ) 
{
try 
{   
  oThis.runOnUiThread ( 
    new Runnable ( ) 
    { 
      @Override
      public void run ( ) 
      { 
        Bundle params = new Bundle();
        params.putString("caption", "Caption");
        params.putString("description", sBody);
    params.putString("picture", URL_TO_PNG);
        params.putString("name", "Name");
        oThis.mFacebook.dialog(oThis, "feed", params, null);
      } 
    } 
  );
}
catch ( Exception e ) 
{ 
  Log.d(Globals.sApplicationName, "share scores: Dialog: " + e.getMessage());
}

return 1;
} 
```

这是我在 logcat 中的错误：

> D/Facebook-WebView(957)：Webview 加载 URL： [https ://m.facebook.com/dialog/feed](https://m.facebook.com/dialog/feed)W/AudioFlinger(32)：写入阻塞 80 毫秒，275 延迟写入，线程 0xff88 D/dalvikvm(957)：GC_CONCURRENT 释放 539K，15% 空闲 7403K/8647K，暂停 3ms+47ms D/webviewglue(957)：nativeDestroy 视图: 0x925250 D/Facebook-WebView(957): 重定向 URL: fbconnect://success?post_id=570020602_418386674846932 D/AndroidRuntime(957): 关闭 VM W/dalvikvm(957): threadid=1: 线程退出未捕获异常 ( group=0x40014760) E/AndroidRuntime(957): 致命异常: main E/AndroidRuntime(957): java.lang.NullPointerException E/AndroidRuntime(957): at com.facebook.android.FbDialog$FbWebViewClient.shouldOverrideUrlLoading(FbDialog.java :143) E/AndroidRuntime(957): 在 android.webkit.CallbackProxy.uiOverrideUrlLoading(CallbackProxy.java:219) E/AndroidRuntime(957): 在 android.webkit.CallbackProxy。handleMessage(CallbackProxy.java:319) E/AndroidRuntime(957): 在 android.os.Handler.dispatchMessage(Handler.java:99) E/AndroidRuntime(957): 在 android.os.Looper.loop(Looper.java: 126) E/AndroidRuntime(957): 在 android.app.ActivityThread.main(ActivityThread.java:3997) E/AndroidRuntime(957): 在 java.lang.reflect.Method.invokeNative(Native Method) E/AndroidRuntime(957) ): 在 java.lang.reflect.Method.invoke(Method.java:491) E/AndroidRuntime(957): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841) E/AndroidRuntime (957): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599) E/AndroidRuntime(957): 在 dalvik.system.NativeStart.main(Native Method) W/ActivityManager(67): Force整理活动 com.companyname.mainclassname/.MainClassName319) E/AndroidRuntime(957): 在 android.os.Handler.dispatchMessage(Handler.java:99) E/AndroidRuntime(957): 在 android.os.Looper.loop(Looper.java:126) E/AndroidRuntime( 957): 在 android.app.ActivityThread.main(ActivityThread.java:3997) E/AndroidRuntime(957): 在 java.lang.reflect.Method.invokeNative(Native Method) E/AndroidRuntime(957): 在 java.lang .reflect.Method.invoke(Method.java:491) E/AndroidRuntime(957): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841) E/AndroidRuntime(957): at com .android.internal.os.ZygoteInit.main(ZygoteInit.java:599) E/AndroidRuntime(957): at dalvik.system.NativeStart.main(Native Method) W/ActivityManager(67): 强制完成活动 com.companyname。主类名/.MainClassName319) E/AndroidRuntime(957): 在 android.os.Handler.dispatchMessage(Handler.java:99) E/AndroidRuntime(957): 在 android.os.Looper.loop(Looper.java:126) E/AndroidRuntime( 957): 在 android.app.ActivityThread.main(ActivityThread.java:3997) E/AndroidRuntime(957): 在 java.lang.reflect.Method.invokeNative(Native Method) E/AndroidRuntime(957): 在 java.lang .reflect.Method.invoke(Method.java:491) E/AndroidRuntime(957): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841) E/AndroidRuntime(957): at com .android.internal.os.ZygoteInit.main(ZygoteInit.java:599) E/AndroidRuntime(957): at dalvik.system.NativeStart.main(Native Method) W/ActivityManager(67): 强制完成活动 com.companyname。主类名/.MainClassNamedispatchMessage(Handler.java:99) E/AndroidRuntime(957): 在 android.os.Looper.loop(Looper.java:126) E/AndroidRuntime(957): 在 android.app.ActivityThread.main(ActivityThread.java: 3997) E/AndroidRuntime(957): 在 java.lang.reflect.Method.invokeNative(Native Method) E/AndroidRuntime(957): 在 java.lang.reflect.Method.invoke(Method.java:491) E/AndroidRuntime (957): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841) E/AndroidRuntime(957): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599 ) E/AndroidRuntime(957): at dalvik.system.NativeStart.main(Native Method) W/ActivityManager(67): 强制完成活动 com.companyname.mainclassname/.MainClassNamedispatchMessage(Handler.java:99) E/AndroidRuntime(957): 在 android.os.Looper.loop(Looper.java:126) E/AndroidRuntime(957): 在 android.app.ActivityThread.main(ActivityThread.java: 3997) E/AndroidRuntime(957): 在 java.lang.reflect.Method.invokeNative(Native Method) E/AndroidRuntime(957): 在 java.lang.reflect.Method.invoke(Method.java:491) E/AndroidRuntime (957): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841) E/AndroidRuntime(957): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599 ) E/AndroidRuntime(957): at dalvik.system.NativeStart.main(Native Method) W/ActivityManager(67): 强制完成活动 com.companyname.mainclassname/.MainClassName126) E/AndroidRuntime(957): 在 android.app.ActivityThread.main(ActivityThread.java:3997) E/AndroidRuntime(957): 在 java.lang.reflect.Method.invokeNative(Native Method) E/AndroidRuntime(957) ): 在 java.lang.reflect.Method.invoke(Method.java:491) E/AndroidRuntime(957): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841) E/AndroidRuntime (957): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599) E/AndroidRuntime(957): 在 dalvik.system.NativeStart.main(Native Method) W/ActivityManager(67): Force整理活动 com.companyname.mainclassname/.MainClassName126) E/AndroidRuntime(957): 在 android.app.ActivityThread.main(ActivityThread.java:3997) E/AndroidRuntime(957): 在 java.lang.reflect.Method.invokeNative(Native Method) E/AndroidRuntime(957) ): 在 java.lang.reflect.Method.invoke(Method.java:491) E/AndroidRuntime(957): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841) E/AndroidRuntime (957): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599) E/AndroidRuntime(957): 在 dalvik.system.NativeStart.main(Native Method) W/ActivityManager(67): Force整理活动 com.companyname.mainclassname/.MainClassName调用(Method.java:491) E/AndroidRuntime(957): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841) E/AndroidRuntime(957): 在 com.android.internal。 os.ZygoteInit.main(ZygoteInit.java:599) E/AndroidRuntime(957): at dalvik.system.NativeStart.main(Native Method) W/ActivityManager(67): 强制完成活动 com.companyname.mainclassname/.MainClassName调用(Method.java:491) E/AndroidRuntime(957): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841) E/AndroidRuntime(957): 在 com.android.internal。 os.ZygoteInit.main(ZygoteInit.java:599) E/AndroidRuntime(957): at dalvik.system.NativeStart.main(Native Method) W/ActivityManager(67): 强制完成活动 com.companyname.mainclassname/.MainClassName

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T02:09:37.040

当我将上面代码中的行更改为：

```
oThis.mFacebook.dialog(oThis, "feed", params, new PostStatusDialogListener()); 
```

然后添加一个新的DialogListener：

```
public class PostStatusDialogListener implements DialogListener 
{
  @Override
  public void onComplete(Bundle values) {
    Log.d(Globals.sApplicationName, "PostStatusDialogListener::onComplete");
  }

  @Override
  public void onFacebookError(FacebookError error) {
    Log.d(Globals.sApplicationName, "PostStatusDialogListener::onFacebookError: " + error.getMessage());
  }

  @Override
  public void onError(DialogError error) {
    Log.d(Globals.sApplicationName, "PostStatusDialogListener::DialogError: " + error.getMessage());
  }

  @Override
  public void onCancel() {
    Log.d(Globals.sApplicationName, "PostStatusDialogListener::onCancel");
  }
} 
```

# android - 您可以向刚刚加入您的接入点的客户发送消息吗？

> ID：10427152
> 
> 赞同：0
> 
> 时间：2012-05-03T07:43:19.233
> 
> 标签：android, wifi

我想知道是否有办法向进入您的 wifi 覆盖范围的用户发送消息？我不确定这是否可能或如何调用。

非常感谢您提示要查找的内容或一些示例代码（如果可能的话）！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:16:12.217

据我所知，唯一可能的是将软件添加到您的接入点以执行启动屏幕（或可能是登录页面）。

这不会完全解决您的用例，但就像您需要先登录的酒吧中的各种“免费”wifi 一样，您需要先打开浏览器并执行操作，然后才能建立真正的连接。

您可以跳过身份验证部分，并将您的消息放在启动屏幕上。

您可以在互联网上找到的一个随机示例是：[http](http://www.dd-wrt.com/wiki/index.php/NoCatSplash) ://www.dd-wrt.com/wiki/index.php/NoCatSplash 我没有使用它的经验，但它似乎可以达到上述目的，并且你可以很容易地从那里去。

我知道这不是 android 特定的答案，但据我所知，这不是 android 特定的问题：您想向连接到您的无线设备的人发送消息。

# ruby - 无法从远程计算机运行 sh 脚本

> ID：10427155
> 
> 赞同：3
> 
> 时间：2012-05-03T07:43:32.657
> 
> 标签：ruby, rvm, gem-bundler

我正在尝试从具有 RVM 的 Linux 计算机上的远程计算机运行以下脚本：

> plink.exe -pw root@<Linux ip> /root/script.sh
> 
> 错误：安装 /usr/local/rvm/gems/ruby-1.9.2-p290/cache/bundler-1.0.22.gem 时出错：bundler 需要 RubyGems 版本 >= 1.3.6

script.sh 是一个运行 ruby​​ 脚本的脚本。

我认为这个问题是由于与远程 Linux 上的 RVM 或捆绑器 gem 的某种勾结引起的。

有人可以建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:58:37.893

您需要确保您正在运行的脚本使用正确的 rvm 环境。它可能在 System ruby​​ 下运行。尝试运行一个更简单的脚本，首先输出“ruby ---version”和/或“which ruby​​”

编辑：

在您的 bash 脚本中，您可能需要执行以下操作：

```
[[ -s "/usr/local/rvm/scripts/rvm" ]] && . "/usr/local/rvm/scripts/rvm" #加载RVM函数
rvm 使用 1.9.2

```

# powershell - 如何使脚本在计算机上远程运行？

> ID：10427156
> 
> 赞同：1
> 
> 时间：2012-05-03T07:43:34.027
> 
> 标签：powershell, remoting, group-policy

我编写了一个脚本，用于从 forrest/domain 收集硬件和软件信息。我已经阅读了几篇关于从服务器上的计算机运行 PS 脚本的文章，但我想做相反的事情。

你怎么知道一个脚本是“可远程访问的”。我已经看到这个命令被使用：

```
Invoke-Command -ComputerName {serverName} –ScriptBlock { commands } 
```

除了计算机名还有其他选择吗？我认为这不是排他性的，因为多台计算机可以具有相同的名称..

这是我的脚本：

```
try{
    $ConfirmPreference="none"
    $error.clear()
    $erroractionpreference = "silentlycontinue"

    #Gets the date of this day, used as name for XML-file later.    
    $a = get-date -uformat "%Y_%m_%d"

    #Saves computername to compname variable(HELPER)
    $compname = gc env:computername

    #Gets the path to directory for all saved files and folders
    $scriptpath = Split-Path -parent $myinvocation.MyCommand.Definition

    #PC Serial Number, is used as name for directory containing XML files for this computer.
    $serialnr = gwmi win32_bios | select -Expand serialnumber

    #Creates a folder with the name of the computers hardware serialnumber if it does not exist.
    if(!(Test-Path -path $scriptpath\$serialnr)) {
        New-item -path $scriptpath -name $serialnr -type directory
    }

    #Username
    $username = gc env:username

    #System Info
    gwmi -computer $compname Win32_ComputerSystem | ForEach {$siname = $_.Name; $simanufacturer = $_.Manufacturer; $simodel = $_.Model}

    #Graphic card
    $gpuname = gwmi win32_VideoController | select -Expand Name

    #Processor Info
    gwmi -computer $compname Win32_Processor | ForEach-Object {$cpuname = $_.Name; $cpumanufacturer = $_.Manufacturer; $cpucores = $_.NumberOfCores; $cpuaddresswidth = $_.AddressWidth}

    #Memory
    $totalmem = 0
    $memsticks = gwmi -Class win32_physicalmemory
    foreach ($stick in $memsticks) { $totalmem += $stick.capacity }
    $totalmem = [String]$($totalmem / 1gb) + " GB"

    #Drive    
    $totalspace = 0
    $totalsize = gwmi -Class win32_logicaldisk
    foreach($size in $totalsize) { $totalspace += $size.size }
    $totalspace = "{0:N2}" -f ($totalspace/1Gb) + " GB"

    #Install time for windows OS
    $utctime = get-wmiobject win32_OperatingSystem | select-object -expandproperty installDate
    $installtime = [System.Management.ManagementDateTimeConverter]::ToDateTime($utctime);
    $installtime = Get-Date $installtime -uformat "%d/%m/%Y %X"

    #--------#
    #XML-form
    #--------#
    try{
    $erroractionpreference = "stop"
    $template = "<computer version='1.0'>
        <hardware>
            <serialnumber>$serialnr</serialnumber>
            <systeminfo>
                <name>$siname</name>
                <manufacturer>$simanufacturer</manufacturer>
                <model>$simodel</model>
            </systeminfo>
            <drive>
                <size>$totalspace</size>
            </drive>
            <memory>
                <size>$totalmem</size>
            </memory>
            <gpu>
                <name>$gpuname</name>
            </gpu>
            <cpu>
                <name>$cpuname</name>
                <manufacturer>$cpumanufacturer</manufacturer>
                <id>cpuid</id>
                <numberofcores>$cpucores</numberofcores>
                <addresswidth>$cpuaddresswidth</addresswidth>
            </cpu>
        </hardware>
        <software>
            <user>
                <name>$username</name>
            </user>
            <osinfo>
                <caption></caption>
                <installdate>$installtime</installdate>
                <servicepack></servicepack>
            </osinfo>
        </software>
    </computer>"

    $template | out-File -force $ScriptPath\$serialnr\$a.xml
    $systemroot = [System.Environment]::SystemDirectory
    $xml = New-Object xml
    $xml.Load("$ScriptPath\$serialnr\$a.xml")
    }catch{
    }

    #OSInfo, software
    $newosinfo = (@($xml.computer.software.osinfo)[0])
    Get-WmiObject -computer $compname Win32_OperatingSystem | 
    ForEach-Object {
            $newosinfo = $newosinfo.clone() 
            [String] $bitversion = $_.osarchitecture
            $newosinfo.caption = [String]$_.caption + "" + $_.osarchitecture
            $newosinfo.servicepack = $_.csdversion
            $xml.computer.software.AppendChild($newosinfo) > $null
    }
    $xml.computer.software.osinfo | where-object {$_.caption -eq ""} | foreach-object {$xml.computer.software.RemoveChild($_)}

    #-------Save and get content--------
    $xml.Save("$scriptpath\$serialnr\$a.xml")
    #$new = Get-Content $scriptpath\$serialnr\$a.xml
    #-----------------------------------

    if(!$?){
        "An error has occured"
    }
}catch{
    [system.exception]
    "Error in script: system exception"

}finally{
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:51:23.850

对于`-ComputerName`参数，您可以使用**NETBIOS 名称、IP 地址或完全限定域名**。有关更多详细信息，请参阅[TechNet 上的 Invoke-Command](http://technet.microsoft.com/en-us/library/dd347578.aspx)。

Seems like your script is "only" saving the data on the machine it is running, you will probably want it to return something in order to be useful with `Invoke-Command`.

# javascript - 图像尺寸验证

> ID：10427158
> 
> 赞同：1
> 
> 时间：2012-05-03T07:43:45.767
> 
> 标签：javascript, jquery

是否可以使用 jquery 类或 javascript 验证文件图像大小？

我可以这样做吗？我做了一些研究，但没有达到任何目标

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:53:34.753

如果要检查客户端上传的图像文件，请检查 HTML5 File API。以下是一些示例：

[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

您可以获取文件大小、查找其类型并访问二进制内容。

我正在使用 File API 从图像中读取 EXIF 标头，而无需将图像上传到服务器。

这是一个源代码：

[https://gist.github.com/980275/85da4a96a3bb23bae97c3eb7ca777acdea7ed791](https://gist.github.com/980275/85da4a96a3bb23bae97c3eb7ca777acdea7ed791)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:49:27.030

尝试这个：

```
<input type="file" id="loadfile" />
<input type="button" value="find size" onclick="Size()" /> 
```

脚本：

```
 function Size() {
        if ( $.browser.msie ) {
           var a = document.getElementById('loadfile').value;
               $('#myImage').attr('src',a);
               var imgbytes = document.getElementById('myImage').fileSize;
               var imgkbytes = Math.round(parseInt(imgbytes)/1024);
               alert(imgkbytes+' KB');
        }else {
               var fileInput = $("#loadfile")[0];
               var imgbytes = fileInput.files[0].fileSize; // Size returned in bytes.
               var imgkbytes = Math.round(parseInt(imgbytes)/1024);
                       alert(imgkbytes+' KB');
         }
    } 
```

# mysql - 措辞此 SQL 查询的更好/替代方式

> ID：10427160
> 
> 赞同：1
> 
> 时间：2012-05-03T07:43:51.087
> 
> 标签：mysql

写出以下查询的更好/更有效的方法是什么？

当前的 SQL 查询可以很好地完成它的工作，但我担心随着数据库变得更大的处理时间。

```
SELECT *
FROM room
JOIN catering ON room.room_id = catering.room_id
WHERE capacity BETWEEN '$minCapacity' AND '$maxCapacity' 
AND room.room_id NOT IN 
    (SELECT room_id
    FROM room_booking
    WHERE date_booked = '$us_date')
AND catering.grade = '$grade' ORDER BY room.capacity 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:47:52.203

您可以将 更改`NOT IN`为`NOT EXISTS`. 如果有很多数据可以提高性能：

```
SELECT *
FROM room
JOIN catering ON room.room_id = catering.room_id
WHERE capacity BETWEEN '$minCapacity' AND '$maxCapacity' 
AND NOT EXISTS
(
    SELECT
        NULL
    FROM
        room_booking
    WHERE
        date_booked = '$us_date'
        AND room.room_id=room_booking.room_id
)
AND catering.grade = '$grade' 
ORDER BY room.capacity 
```

# objective-c - 在太多对象中初始化某些值会使我的应用程序崩溃

> ID：10427163
> 
> 赞同：1
> 
> 时间：2012-05-03T07:44:13.930
> 
> 标签：objective-c, ios, singleton

我正在用模拟数据填充一个单例对象，以吐出一个函数，该函数返回所有这些数据进入的数组。

```
@interface menuItem : NSObject {
//Item's Name
NSString *itemName;
//String of Prices - "$4.50" or "$1.50 / $2.50 / $3.50"
NSArray *priceList;
//List of Ingredients 
NSArray *ingredientList;
//List of adjusted Quantities
NSArray *ingredientQuants; 
//Number of Sizes for corresponding prices
int numOfSizes;
}
- (NSString *)priceText;
@property (nonatomic, copy) NSString *itemName;
@property (nonatomic, copy) NSArray *priceList;
@property (nonatomic, copy) NSArray *ingredientList;
@property (nonatomic, copy) NSArray *ingredientQuants;
@property (nonatomic, assign) int numOfSizes;
@end 
```

该对象不关心我将多少个对象与 menuItems 一起放入其中，而这些对象的值存储在成分Quants 中，但是在多次声明之后，它厌倦了让那些确实声明了成分Quants 的对象，即使是在我存储之前声明的变量他们在那里，然后它决定在 main.c 上执行 EXEC_BAD_ACCESS

```
-(NSArray *)returnAllItems {
  return items;
}

- (void) loadMenu { 
   if(categories && items){ 
     return;
}
categories = [[NSArray alloc] initWithObjects:@"Coffee", @"Coffee Alternatives", @"Smoothies", @"Baked Goods", @"Sandwiches",@"Salads", nil];

NSArray *nyQuants = [[NSArray alloc] initWithObjects:@"No", @"Yes", nil];
//NSArray *ynQuants = [NSArray arrayWithObjects:@"Yes", @"No", nil];
NSArray *numQuants = [[NSArray alloc] initWithObjects:@"1", @"2", @"3", @"4", @"5", @"6", @"7", @"8", @"0", nil];
NSArray *espressoIList = [[NSArray alloc] initWithObjects:@"Decaf", @"Iced", @"Soymilk", @"Shots",nil];

menuItem *menuitemOne = [[menuItem alloc] init];
menuitemOne.itemName = @"Regular Coffee";
menuitemOne.priceList = [NSArray arrayWithObjects:@"$1.50",@"$1.95",@"$2.15", nil];
menuitemOne.numOfSizes = 3;
// menuitemOne.ingredientList = [NSArray arrayWithObjects:@"Decaf", @"Iced", nil];
//menuitemOne.ingredientQuants = [NSArray arrayWithObjects:nyQuants, nyQuants, nil];

menuItem *menuItemTwo = [[menuItem alloc] init];
menuItemTwo.itemName = @"Latte";
menuItemTwo.priceList = [NSArray arrayWithObjects:@"$2.55", @"$3.45", @"$3.75", nil];
menuItemTwo.numOfSizes = 3;
menuItemTwo.ingredientList = espressoIList;
menuItemTwo.ingredientQuants = [NSArray arrayWithObjects:nyQuants, nyQuants, nyQuants, numQuants, nil];

menuItem *mocha = [[menuItem alloc]init];
mocha.itemName = @"Mocha";
mocha.priceList = [NSArray arrayWithObjects:@"$3.15",@"$3.95",@"$4.75", nil];
mocha.numOfSizes = 3;
mocha.ingredientList = espressoIList;    
//THIS LINE BREAKS THE ENTIRE PROGRAM
NSArray *aaaa = [NSArray arrayWithObjects:@"ASD", @"DFG", nil];
mocha.ingredientQuants = [NSArray arrayWithObjects:aaaa, nil]; 
```

//更多的事情像上面一样发生

```
items = [NSArray arrayWithObjects:coffeeArray, espressoArray,smoothieArray, bakedArray, sandwichArray,saladArray, nil];

[nyQuants release];
[numQuants release];
[espressoIList release];

NSLog(@"Categories: %d", [categories retainCount]);
NSLog(@"items: %d", [items retainCount]);
NSLog(@"nyQuants: %d", [nyQuants retainCount]);
NSLog(@"numQuants: %d", [numQuants retainCount]);
NSLog(@"espresslist: %d", [espressoIList retainCount]);

} 
```

然后我初始化这个对象，获取它的成员数组并将它们放在一个视图控制器中：

```
 CBMenu *WholeMenu = [CBMenu sharedInstance];
    NSLog(@"MENU");
    NSArray *cats = [WholeMenu returnCategories];
    NSLog(@"Cats");
    NSArray *menu = [WholeMenu returnAllItems];
    NSLog(@"Menu");

    //What are these I don't even
    [cats retain];
    [menu retain];

    FoodMenuTwoViewController *mmvc = [[FoodMenuTwoViewController alloc]initWithData:cats :NO: YES];
    [mmvc setDataSource:cats];
    [mmvc setMenu:menu];
    [mmvc setTitle:@"Menu"];
    [self.navigationController pushViewController:mmvc animated:YES];

    //FOR SOME REASON IT DOESN'T LIKE ME RELEASING CATS AND MENU OR REMOVING THEIR
    //RETAIN STATEMENTS ABOVE PLEASE DON'T HURT ME.

    return; 
```

当 VC 中的第一个 bool 为 YES 时，它会显示类别列表。我看到了这一点，但是当视图被推入堆栈时出现，它会继续呕吐其所有器官并死亡。

NSZombieEnabled 告诉我 CharlieBrown[4285:fb03] *** -[__NSArrayI retain]: message sent to deallocated instance 0x6e06550

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:06:57.290

将 NSStrings 和 NSArrays 的属性设置为复制而不是保留，并且在您的 init 方法中不要在您的成分列表和 espressoIList 上使用 [[NSArray alloc] initWithObjects:] - 您不要对其他数组执行此操作（这是正确的）。否则你会得到内存泄漏。像使用其他大多数数组一样使用 NSArray arrayWithObjects。

编辑：

也改变这个

```
menuItemTwo.ingredientList = espressoIList; 
```

至

```
menuItemTwo.ingredientList = [NSArray arrayWithArray: espressoIList ]; 
```

编辑：

既然你说它没有帮助你进行这些调整，也许可以发布你用//更多这样的代码

我真的不明白你为什么会遇到这个问题。哪条线路导致崩溃？这个？

```
mocha.ingredientQuants = [NSArray arrayWithObjects:nyQuants, nil]; 
```

如果你把它排除在外，它就可以工作吗？

编辑：

在我看来，当您尝试将 nyQuants 添加到 mocha 数组时，它已被释放。似乎自动释放池被耗尽并且对象消失了——尽管我认为这只会在运行循环之后发生。尝试使用 alloc init 初始化您的 nyQuants 和其他数组，并在完成所有 menuItems 的声明后手动释放它们。我认为应该这样做！

所以，改变那些

```
NSArray *nyQuants = [NSArray arrayWithObjects:@"No", @"Yes", nil];
NSArray *ynQuants = [NSArray arrayWithObjects:@"Yes", @"No", nil];
NSArray *numQuants = [NSArray arrayWithObjects:@"1", @"2", @"3", @"4", @"5", @"6",     @"7", @"8", @"0", nil];
NSArray *espressoIList = [[NSArray alloc] initWithObjects:@"Decaf", @"Iced", @"Soymilk", @"Shots",nil]; 
```

像 espressoIList 一样要分配的所有内容都在此示例中，并在您的方法返回之前释放它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:10:07.427

If you are getting a NSArray - message sent to deallocated instance, means that you are using a variable with a negative retain count, you deleted/released it somehow.

In the header file you declared your arrays with `(nonatomic, retain)`, it means that their retain count is 1\. In the m file you should deallocate the arrays in the `- (void)dealloc{}` method. You initialized your arrays with arrayWithObjects method, and based on the [apple memory management](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/MemoryManagement.html) description, with this method you don't own these object, so you cannot release/delete/remove them.

# hibernate - 我是否需要包含 hibernate.jar 的所有 Maven 依赖项？

> ID：10427169
> 
> 赞同：1
> 
> 时间：2012-05-03T07:44:42.890
> 
> 标签：hibernate, maven, dependencies, pom.xml

我有使用 Hibernate 的项目：hibernate-core-3.6.7.Final.jar

在它的 POM 中，我发现：

```
 <dependency>
        <groupId>org.hibernate.javax.persistence</groupId>
        <artifactId>hibernate-jpa-2.0-api</artifactId>
    </dependency> 
```

我应该在我的应用程序中包含所有依赖项还是 Maven 自己做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:30:41.510

如果你`<dependency>`在你的 . 中指定 a `pom.xml`，不仅它的 jars 会被下载到你的本地存储库，而且还会下载一个 POM 文件。然后，Maven 将在此类 POM 文件中查找信息以找出它需要检索的其他库。这就是 Maven 的[传递依赖特性的想法](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Transitive_Dependencies)

因此，它依赖于存储在公共存储库中的此类 POM 文件的准确性和完整性。如果此类 POM 文件中的依赖项未更新或为空，则必须在`pom.xml`必要时在自己的文件中明确提供依赖项。

对于休眠， `hibernate-core`已经取决于`hibernate-jpa-2.0-api`如果`hibernate-jpa-2.0-api`您包含`hibernate-core`在`pom.xml`. 所以 ,`hibernate-jpa-2.0-api` 是冗余并且可以被移除。

如果您想将 JPA 接口与 hibernate 一起使用，您可以将其包含`hibernate-entitymanager`在其中，`<dependency>`因为它依赖于它`hibernate-core`，因此也会下载它。

最后，我建议您简单地包括`hibernate-entitymanager`在`<dependency>`：

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-entitymanager</artifactId>
    <version>3.6.7.Final</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T07:56:16.410

Maven 用于此。您应该为 Eclipse 安装 m2 插件（如果您在 Eclipse 上编码），然后右键单击您的项目 -> 更新项目依赖项。
但是 Maven 是用来做这个的，这意味着当你在项目中添加依赖项时，Maven 会下载这些库，并将它们添加到项目中的正确位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T08:23:35.283

您需要的所有依赖项都必须手动添加到您的 pom.xml 文件中。如果配置正确，maven 将自动下载与您添加的依赖项相对应的所有库，并且它们将准备好在您的应用程序中使用。

# python - 如何在python中将列表写入没有[]的文件

> ID：10427171
> 
> 赞同：1
> 
> 时间：2012-05-03T07:44:44.913
> 
> 标签：python, list

我写一个像`[1,2,45,6]`文件一样的列表。

```
next_queue += _follower_ids
nextqueue_file = open("data_queue.txt","w")
nextqueue_file.write(str(next_queue))
nextqueue_file.close 
```

这记录了我程序中的队列，如果我的程序失败，我可以读取文件中的进度，但问题是文件中的列表显示为：

```
[1,2,45,6] 
```

在`[]`文件中，它使这个过程变得困难。我如何写它就像`1,2,45,6`没有一样`[]`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T07:46:01.247

尝试：

```
nextqueue_file.write(", ".join(map(str, next_queue))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T07:47:22.997

```
nextqueue_file.write(','.join(map(str, next_queue))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T07:48:18.867

你可以使用：

```
with open('data_queue.txt', 'w') as f:
  f.write(','.join(str(x) for x in next_queue)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T08:14:36.847

这段代码已经为你编写好了，无需重新发明轮子：

```
import csv

with open("data_queue.txt", 'w') as f:
   csv.writer(f).writerow(next_queue) 
```

# c# - 如何取消选择/空白数据绑定组合框？SelectedIndex = -1 不起作用

> ID：10427172
> 
> 赞同：14
> 
> 时间：2012-05-03T07:44:52.020
> 
> 标签：c#, .net, winforms, combobox

我正在尝试取消选择（空白）我的 Windows 窗体应用程序中的一些组合框。在我的应用程序中，我有一个 Reset 方法，它将每个组合的 SelectedIndex 设置为 -1。我所有的组合框都是数据绑定的，即每个组合框都使用数据源填充。

我注意到有时我的重置方法有效，即它取消选择当前选定的项目并使组合空白。但是，有时它会在我尝试将其设置为 -1 后直接选择第一项 (SelectedIndex = 0)。从用户的角度来看，这看起来像是一个错误，因为它并不总是“清除”表单。

根据 MSDN：

“要取消选择当前选定的项目，请将 SelectedIndex 设置为 -1。如果项目是数据绑定项目，则不能将 ComboBox 项目的 SelectedIndex 设置为 -1。”

有谁知道解决方法？

非常感谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-12-01T19:22:37.873

使用 void 和 property 的组合

```
comboBox.ResetText();

 //to reset selected value
comboBox.SelectedIndex = -1; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-08-31T04:47:04.937

不知道是否有人仍然对此感兴趣，因为现在已经 5 年了，但我找到了一个非常简单的解决方法。完全不直观（我只是通过查看参考源代码才发现它），但实现起来很简单：

```
ComboBox1.FormattingEnabled = True; 
```

是的，这就是它的全部！

如果您很好奇，可以仔细阅读[源代码](http://www.dotnetframework.org/default.aspx/Dotnetfx_Win7_3@5@1/Dotnetfx_Win7_3@5@1/3@5@1/DEVDIV/depot/DevDiv/releases/whidbey/NetFXspW7/ndp/fx/src/WinForms/Managed/System/WinForms/ComboBox@cs/1/ComboBox@cs)以了解发生了什么。@CuppM 指出的错误的根本原因似乎是试图在数据源中设置位置：

```
if (!FormattingEnabled || SelectedIndex != -1) {
    this.DataManager.Position = this.SelectedIndex;
} 
```

我猜它应该只是 '&&' 而不是 '||' 在这种情况下，因为代码可能不应该将 Position 设置为无效值，而不管 FormattingEnabled 属性如何。

无论如何，它允许一个简单的解决方法。并且由于“格式”属性为空白时的默认行为是无操作的，因此您无需更改任何其他内容。它只是工作。:-)

（我应该注意，我只在 .NET 4.7 上尝试过这个，所以我不能说它是否适用于 .NET Framework 的早期版本。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T07:52:07.390

您可以尝试将选定的值或项目设置为`null`（`Nothing`在 VB 中）

我不记得抛出异常的行为。但是，我确实记得在组合框通常通过数据绑定事件进行数据绑定后，我曾经在组合框中插入一个名为 -1, (None) 的值。我建议获取列表中的数据并将新值插入此列表。现在将组合绑定到列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-27T16:13:47.123

只有以下代码对我有用，所以请尝试：

```
comboBox.ResetText();   //framework  4.0 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-24T14:14:47.007

ComboBox1.SelectedItem = null;

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-07-09T18:04:11.260

对于仍在查看这篇旧帖子的任何人，我想从[Hisham 的回答](https://stackoverflow.com/a/27235637/13675326 "希沙姆回答")中添加一个注释。
确保在插入他的代码**后清除您的列表。**

```
comboBox.ResetText();

//to reset selected value
comboBox.SelectedIndex = -1;
comboBox.Items.Clear(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-21T06:15:53.990

如果您的目标框架是 4.0 - 这是解决方案：

安装 .Net Framework 4.5（不要更改项目的目标框架，只需安装框架）。安装后，该行取消选择数据绑定组合框：

```
combobox.SelectedValue = 0; 
```

我的值成员是“Id”int 主键自动增量，因此该字段不包含值 0。但是，这不适用于不支持 .net45 的 Windows 版本

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-05T10:09:45.040

尝试设置 [ComboBoxObj].SelectedIndex=-1; 这将使其为空值。-1 表示取消选择或取消组合框的值

谢谢

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-03T07:52:10.997

尝试分配或`null`属性。`String.Empty`[`SelectedValue`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedvalue.aspx)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-07-17T07:02:26.600

试试这行代码：

```
combobox1.Items.clear(); 
```

这个对我有用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-01-07T09:37:31.060

这个问题我已经有一段时间了，但是如果你使用：

'ComboBox.ResetText();'

它将使文本“”并使组合框中的项目不受影响。

我在我的应用程序中使用了以下代码

```
 private void UpdateComboBox(ComboBox Box, string Group, List<string> Numbers)
        {
              Box.Items.Clear();
              Box.BeginUpdate();            
              Box.Items.Add("<<Add Contact>>");
              foreach (string item in Numbers)
              {
                   if(item != "")
                        Box.Items.Add(item);
              }
          Box.EndUpdate();
          Box.ResetText();
        } 
```

所以我最后运行该方法，一旦所有项目都在组合框中。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2012-08-02T14:56:50.017

将一个空项目添加到您的组合框中，如下所示：

```
cb.Items.Add(""); 
```

在此之后，您可以通过选择最后一个 cb 项目来取消选择您的组合框：

```
cb.SelectedIndex = cb.Items.Count - 1; 
```

给你！

您的组合框中的最后一个位置将是空的，但它不会打扰您。会吗？:-)

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2018-12-28T02:13:05.467

我收到以下错误：

> 位置 0 处没有行

当我设置`ComboBox.SelectedItem`为`-1`.

替换为`ComboBox.ResetText()`工作正常。这是使用**.Net 4.6.1**，默认情况下使用**VS 2013**。`TextFormatting = True``ComboBoxes`

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2012-05-03T07:49:41.307

您可以尝试使用此解决方案..

```
dataGrid.DataSource = Nothing

dataGrid.DataBind() 
```

希望它的帮助！..：D

# facebook - 更新现有 Open Graph 对象上的字段

> ID：10427182
> 
> 赞同：1
> 
> 时间：2012-05-03T07:46:00.447
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我有一个需要更新现有 Open Graph 对象中字段值的 Web 应用程序。特别是我正在尝试编辑照片上的位置。

但是我发现我根本无法直接更改任何字段。我一直在尝试使用 POST 方法和具有“user_photos”、“publish_stream”和“user_photo_video_tags”权限的 access_token 来使用[Graph API Explorer 。](https://developers.facebook.com/tools/explorer/)我正在尝试将照片的“标题”字段设置为另一个字符串值，并将“地点”字段设置为另一个地点 ID，例如墨尔本国际机场的 127571667351223。当我为这些命令单击提交时，响应窗口只会显示“真”。但是，当我检查对象时，它没有发生任何变化。

谁能解释为什么这些变化没有通过？

谢谢！

# jquery - 如何替换 HTML 标记的文本

> ID：10427186
> 
> 赞同：3
> 
> 时间：2012-05-03T07:46:22.300
> 
> 标签：jquery, html, text, tags, innerhtml

我不知道怎么称呼它，但让我称之为半内部文本。

例子

```
<div id='myDiv'>
    This is the semi-inner text
    <div id='other'></div>
    This is the semi-inner text
<div> 
```

我想删除/替换那些`This is the semi-inner text`使用 jquery 的。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T07:50:18.047

如果您只关心子节点...

```
$('#myDiv').contents().filter(function() {
    return this.nodeType == 3
}).each(function() {
    this.data = this.data.replace(/This is the semi-inner text/g, 'swapped');
});​ 
```

[js小提琴](http://jsfiddle.net/HPE9Y/)。

如果要检查所有后代节点，请在检测到元素节点 ( `this.nodeType == 1`) 时使函数递归。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T07:51:16.190

```
$('#myDiv')
    .contents()
    .filter(function() {
        return this.nodeType == 3;
    })
    .each(function() {
        $(this).remove();
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T07:49:26.767

使用 contents() 并过滤掉所有等于 3 的 nodeType 并删除它们：

```
$('#myDiv').contents().filter(function() {
    return this.nodeType == 3;
}).remove(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T07:49:41.977

使用以下代码替换内容

```
$("#other").html("your code"); 
```

并且用户将您的代码包装在带有 id 的 span 标记中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T07:49:51.153

最简单的方法是将其放置在具有如下 id 的跨度中：

```
<div id='myDiv'>
    <span id="myInnerText">This is the semi-inner text</span>
    <div id='other'></div>
    This is the semi-inner text
<div> 
```

然后像这样替换它：

```
$("#myInnerText").text("replacement text"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T08:09:08.570

你也可以这样做：

```
target_div = $("#myDiv")
  reg_exp  = /This is the semi-inner text/g;
  new_text = "some other text"

  target_div.html(
    target_div.html()
      .replace(
        new RegExp(reg_exp),
        new_text)
        );
 }); 
```

[演示](http://jsfiddle.net/96fH2/)

# django - django模板过滤器，使用2个或更多过滤器，如管道

> ID：10427193
> 
> 赞同：4
> 
> 时间：2012-05-03T07:46:59.080
> 
> 标签：django, django-template-filters

我想在模板上使用多个过滤器，如下所示：

```
value: {{ record.status|cut:"build:"|add:"5" }} 
```

其中 record.status 将是 build:n, 0 < n< 100 但我想将此值添加为基值 5。

我试过上面的代码，它只对第一个过滤器生效，所以我没有得到加5的值。

django 只支持一个过滤器吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T14:09:41.347

首先，回答您的问题“django 只支持一个过滤器吗？” 是 Django 确实支持*几乎无限*数量的链式过滤器（当然取决于您的平台和编写该数量的链式过滤器的能力=）。以一些代码为例（不是证明，但它是有道理的），它实际上是一个模板`'{{ x|add:1|add:1|...10000 in all...|add:1 }}'`

```
>>> from django.template import *
>>> t = Template('{{ x|'+'|'.join(['add:1']*10000)+' }}')
>>> t.render(Context({'x':0}))
u'10000' 
```

`cut`其次，请检查模板，确保您使用的是和的内置版本`add`；还要检查 之后的输出值，`cut`以确保它可以被强制为 int 而不会引发异常。
我刚刚检查并发现即使是 Django 0.95 也支持这种用法：

```
def add(value, arg):
    "Adds the arg to the value"
    return int(value) + int(arg) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T08:10:52.730

支持链接过滤器。如果您想弄清楚为什么它不起作用，那么我要做的是：

1.  安装ipdb
2.  在django/templates/defaultfilters.py中，找到“def add”，将“import ipdb; ipdb.set_trace()”放在函数顶部
3.  再次在浏览器中打开页面，您应该能够从运行 runserver 的终端跟踪代码的执行情况，并找出您没有得到预期结果的原因

一种更简单的方法是[制作自己的模板过滤器](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-filters)。它可能看起来像

```
from django.template import Library

register = Library()

@register.filter
def cut_and_add(value, cut, add):
    value = value.replace(cut, '')
    value = int(value) + add
    return value 
```

假设您将它保存在`yourapp/templatetags/your_templatetags.py`（并且`yourapp/templatetags/__init__.py`存在 - 它可以是空的）。然后你会在模板中使用它：

```
{% load your_templatetags %}

{{ record.status|cut_and_add:"build:",5 }} 
```

当然，这是未经测试的伪代码。但只要稍加努力，你就可以让它发挥作用。

# c++ - 在多个位置引用的对象

> ID：10427201
> 
> 赞同：0
> 
> 时间：2012-05-03T07:47:55.507
> 
> 标签：c++, boost

我试图弄清楚如何`items`在我的程序中进行管理。我想要一个统一的`inventory`系统，知道每个人在哪里`item`。然后拥有`container`实际保存库存的对象`items`，并通过`container`id 定位所有内容。

我的想法是`items`在`containers`inside中保存，然后在对象`boost::ptr_vetors`内部的哈希表中保存一个指针（可能是同一个） ，现在根据X 到Y 只是从一个指针向量中删除，并将其传递给另一个容器，或者在一个或另一个中完成所有工作。`inventory``inventory``container``container``container`

我很难考虑的问题是什么时候把所有的东西都拿出来。我只真正处理过一次将指针/对象保存在一个地方而不是多个地方，而且我知道如果我尝试删除已经被删除的东西，它至少会导致崩溃。首先想到的是从 中删除所有引用`containers`，并且仍然保留在 中`inventory`，然后单步执行并删除`inventory`. 这是可行的，还是我没有考虑这个权利，需要重新考虑？那么如果我只需要删除一个东西（保留其余部分）怎么办？

我担心在任何一种情况下都会取消对指针的验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:42:29.583

有几种方法可以做到这一点。

1.  使用`boost::shared_ptr`或`std::shared_ptr`与标准向量。这样，您就不必担心删除，并且只要没有指针引用该对象，就会逐渐释放内存。如果您需要经常销毁特定对象并且需要最少的代码，这将很有用。不利的一面是存储开销，如果大多数对象除了其余对象之外永远不会被销毁并且您有很多对象。而且，根据您移除对象的位置，它仍然可以在没有容器的情况下驻留在库存中，反之亦然。
2.  通过派生它们或将它们包装在另一个类中，赋予容器销毁和从库存中取消索引的责任。由于每个对象的指针仅出现在您所描述的一个容器中，因此只有库存可能包含额外的指针。因此，无论何时要删除一个对象，容器都必须查找清单以删除指向它即将销毁的对象的指针。间接费用是存货的簿记。
3.  使用内存池，它是一个容器，存储指向所有对象的指针，并在自身被销毁时负责它们的销毁。内存池可以是`boost::ptr_vector`其他容器，而其他容器是标准向量。这对于在系统中频繁添加和查询对象是有效的。缺点是内存池必须比您的容器和库存更长。否则，如果需要将单个对象与其他对象分开销毁，则必须像（2）中那样进行簿记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:43:22.413

`Boost::ptr_vector`当您传入该对象时，它会假定该对象的所有权。当您从该向量中删除一个对象时，它将被自动删除。您可以通过使用内置删除项目而不删除它们`auto_type`（请参阅农场庭院示例以了解用法）。

这意味着您实际上应该一次只拥有一个项目`ptr_vector`。但是，您将物品放在 a 中`ptr_vector`然后`ptr_vector`由您的库存对象（这是另一个 ptr_vector）拥有的想法应该可行。我从来没有这样做过，但应该没问题。

为了删除单个对象，您只需使用 container_id 和 item_id 查找它，然后将其从 item-level 中删除`ptr_vector`。要删除容器，只需将其从库存中移除即可。它会破坏它在那个时候包含的任何东西。

如果您想在不删除的情况下删除它们，请使用`auto_type`安全删除它们。`auto_type`如果您想使用指向对象的原始指针，您可以从 中释放它们并随心所欲。

# java - 实时流量api

> ID：10427202
> 
> 赞同：4
> 
> 时间：2012-05-03T07:47:56.893
> 
> 标签：java, api, opendata

是否有 API 可以让我了解某个地区/城市/位置的实时流量？

我没有想到任何位置，但是可以访问限制流量访问特定位置的 API。

谢谢阿布舍克 S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:30:51.947

我猜你的意思是一般的汽车交通 - 不知道任何我害怕 - 虽然有一些 API 用于实时巴士到达时间 - 请参阅 Ottowa 的这个：[http ://www.octranspo1.com/developers](http://www.octranspo1.com/developers)

# java - javax.crypto.BadPaddingException：给定的最终块未正确填充

> ID：10427205
> 
> 赞同：14
> 
> 时间：2012-05-03T07:48:04.010
> 
> 标签：java, encryption, padding

我必须在我的服务器上*解密*一个帧。加密帧通过套接字上的 GPRS 来自客户端设备。使用**TripleDes**和给定的密钥进行加密。我在服务器端使用相同的算法和密钥*。*Frame 是 Hex 和 Ascii 字符串的组合。现在的问题是：当我用零填充字节数组时，出现以下异常。

 **```
javax.crypto.BadPaddingException: Given final block not properly padded 
```

以下是我的代码：

```
byte[] key = new byte[]{31, 30, 31, 36, 32, 11, 11, 11, 22, 26,
               30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30};
myKeySpec = new DESedeKeySpec(key);
mySecretKeyFactory = SecretKeyFactory.getInstance("TripleDES");
de = mySecretKeyFactory.generateSecret(myKeySpec);

    Cipher c = Cipher.getInstance("TripleDES");
c.init(Cipher.DECRYPT_MODE, key);

    int l = completeHexStr.length();

    if (l%8==1){
        completeHexStr = completeHexStr + "0000000";
    }else if (l%8==7){
        completeHexStr = completeHexStr + "0";
    }
byte decordedValue[] =completeHexString.getBytes();
byte[] decValue = c.doFinal(decordedValue);
String decryptedValue = new String(decValue);
System.out.println("decryptedValue= " + decryptedValue); 
```

以下是我在代码中使用的函数：

```
 public String stringToHex(String base) {
            StringBuffer buffer = new StringBuffer();
            int intValue = 0;
            for (int x = 0; x < base.length(); x++) {
                intValue = base.charAt(x);
                String hex = Integer.toHexString(intValue);
                if (hex.length() == 1) {
                    buffer.append("0" + hex + "");
                } else {
                    buffer.append(hex + "");
                }
            }
            return buffer.toString();
        }
    public String byteToAscii(byte[] b, int length) {
            String returnString = "";
            for (int i = 0; i < length; i++) {
                returnString += (char) (b[i] & 0xff);
            }
            return returnString;
        } 
```

这是用于客户端加密的c代码。

```
#include <svc_sec.h>
const unsigned char fixed_key[] = { 0x31, 0x30, 0x31, 0x36, 0x32, 0x11, 0x11, 0x11, 0x22, 0x26, 0x30,
0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30};
int Comm_Encrypt_Data(unsigned char *Test_Input_Data, int Len_Input_Data)
{
int Count_Input_Data, Counter_Input_Data;
unsigned long Timer_1;
unsigned char Init_Vector[8];
int Counter_Init_Vector, Temp_Byte_Count;
unsigned char *Temp_Dst_Ptr, *Temp_Src_Ptr;
unsigned char Temp_Input_Frame[9], Temp_Output_Frame[9];
unsigned char Test_Output_Data[500];
unsigned char Test_Key_Arr[9];

memset(&Init_Vector[0], '\0', sizeof(Init_Vector));
memset(Test_Key_Arr, '0', sizeof(Test_Key_Arr));
memcpy(Test_Key_Arr, &fixed_key[0], 8);
Test_Key_Arr[sizeof(Test_Key_Arr)-1] = '\0';

Display_Data("KEY: ", Test_Key_Arr, sizeof(Test_Key_Arr)-1);

memset(Test_Output_Data, '\0', sizeof(Test_Output_Data));
memcpy(Test_Output_Data, Test_Input_Data, 48);

Count_Input_Data = Len_Input_Data -48 -3; //minus Data before payload, 3 bytes of '|' and CRC
Counter_Input_Data = 0;
while(Counter_Input_Data < Count_Input_Data)
{
Temp_Byte_Count = Count_Input_Data- Counter_Input_Data;
if(Temp_Byte_Count > 8)
Temp_Byte_Count = 8;

memcpy(Temp_Input_Frame, &Test_Input_Data[48+Counter_Input_Data], Temp_Byte_Count);
//succeeding bytes to be 0
if(Temp_Byte_Count < 8)
{
memset(&Temp_Input_Frame[Temp_Byte_Count], '0', (8-Temp_Byte_Count));

}

Display_Data("InPut Data Before Init",Temp_Input_Frame, Temp_Byte_Count);

//============Initialize the data
Temp_Dst_Ptr = (unsigned char *)Temp_Input_Frame;
Temp_Src_Ptr = (unsigned char *)&Init_Vector[0];
for(Counter_Init_Vector =0;Counter_Init_Vector < 8; Counter_Init_Vector++)
*Temp_Dst_Ptr++ ^= *Temp_Src_Ptr++;
//============Initializing data ends

DES(DESE, (unsigned char *)&Test_Key_Arr[0],
(unsigned char *)&Temp_Input_Frame[0], (unsigned char *)&Temp_Output_Frame[0]);
//DES(TDES3KE, (unsigned char *)&Test_Key_Arr[0],
// (unsigned char *)&Temp_Input_Frame[0], (unsigned char *)&Temp_Output_Frame[0]);
Display_Data("AFTER DES::::", Temp_Output_Frame, Temp_Byte_Count);

memcpy(&Test_Output_Data[48+Counter_Input_Data], Temp_Output_Frame, Temp_Byte_Count);
Counter_Input_Data += Temp_Byte_Count;

if(Counter_Input_Data < Count_Input_Data)
{
memcpy(Init_Vector, Temp_Output_Frame, 8);

}
}

{
memset(Test_Input_Data, '\0', Len_Input_Data);
memcpy(&Test_Input_Data[0], &Test_Output_Data[48], Counter_Input_Data); //1 Separator + 2 CRCs
}
Display_Data("Final Output Frame", Test_Input_Data, Counter_Input_Data);
return Counter_Input_Data;
} 
```

我是 java 新手`Cryptography`。请告诉我该怎么做？任何人都可以发布可以正常工作的代码来解密我的框架。提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-05T15:26:25.783

您的代码的主要问题是您使用默认的 PKCS5Padding 进行解密。`"TripleDES"`将导致`"TripleDES/ECB/PKCS5Padding"`内部。这是在 Sun JCE 提供程序中实现的；大多数其他提供商复制此默认值。

您似乎期望零填充，这意味着您应该`"DESede/ECB/NoPadding"`改用。之后，您可以使用外部函数来计算纯文本大小（如果您不小心，删除零填充可能会在最后删除零值纯文本）。

其他问题：

*   尝试在解密之前填充数据（您应该在解密*后**取消填充*数据）
**   encoding 和字符编码问题，例如尝试用 的字符值填充`"0"`，这可能是错误的*

 *我已经指出`"ECB"`是因为我不知道实际使用的模式。如果你能找到，你可以用正确的模式和填充算法修改你的问题。如果 ECB 不起作用，您可能还想尝试 CBC 模式。

请注意，除了非常特殊的情况外，使用 ECB 模式并不安全。使用随机 IV 的 CBC 是最低要求。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T08:25:36.523

(3)DES加密/解密8字节的块。由于并非所有文本都恰好是 8 个字节，因此最后一个块必须包含非纯文本原始字节。

诀窍是找出哪个是纯文本的最后一个字符。有时纯文本的长度是事先知道的 - 然后填充字符可以是任何东西。

如果纯文本的长度未知，则必须使用确定性填充算法，例如 PKCS5Padding。PKCS5Padding 总是执行填充，即使明文是 N * blocksize（以字节为单位）。这样做的原因很简单：否则它不知道最后一个字节是纯文本还是填充。

我稍后会尝试提供一个工作代码......必须对其进行测试。同时尝试使用填充算法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-03T11:13:28.887

如果文档没有告诉您在传入的密文上使用了什么填充，则使用“NoPadding”解密，它将接受最后一个块上的任何类型的填充。然后看看你最后一个块的十六进制。这将告诉您在加密端使用了什么填充。修改您的代码以期望正确的填充类型。[此处](http://en.wikipedia.org/wiki/Padding_%28cryptography%29)介绍了不同类型的填充。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-03T10:05:32.337

我已经看了一下你的`stringToHex`方法，它似乎是不正确的。试试这个：

```
 StringBuilder rep = new StringBuilder();
        for (byte b : base.getBytes) {
            rep.append(Integer.toString((b & 0xff) + 0x100, 16).substring(1));
        }
        System.out.println(rep); 
```

我还发现了这个[带有 Padding 的 TripleDes](http://eternusuk.blogspot.fr/2008/09/java-triple-des-example.html)示例；您可以尝试使用示例使用的算法和转换。***

# python - 将字符串与 Ascii 字符（STX、ETX）结合起来与一次写入字符串不同

> ID：10427208
> 
> 赞同：4
> 
> 时间：2012-05-03T07:48:19.877
> 
> 标签：python, python-2.x

我正在通过 TCP 套接字进行 API 集成。该协议要求每条消息以 STX (\x02) 开头并以 ETX (\x03) 结尾。

当我执行以下操作时，服务器会按预期做出反应：

```
s.send("\x02Message\x03") 
```

如果我像这样构建消息：

```
msg = "Message"
msg = "\x02" + msg + "\x03"
s.send(msg) 
```

我的理解应该是一样的，服务器没有按预期做出反应。我错过了什么？

（如果这有什么不同，我在 OS-X 上运行 Python 2.6.2）

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-03T09:07:50.957

它是否适用于：

```
msg = "\x02Message\x03"
s.send(msg) 
```

在某些情况下，我在发送命令中写入字符串或将字符串传递给方法时存在差异。

或者有什么结果：

```
msg = str("\x02" + msg + "\x03")
s.send(msg) 
```

?

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2018-07-30T14:17:45.893

当您在 python 中将字符串添加在一起时，组合字符串之间会添加空格。这可能是问题吗？

> msg = "消息"
> 
> 味精 = "\x02" + 味精 + "\x03"
> 
> 结果：“\x02 消息 \x03”

我建议使用：

> msg = ''.join('\x02', 消息, '\x03')

# php - 从两个数组创建新数组

> ID：10427210
> 
> 赞同：1
> 
> 时间：2012-05-03T07:48:21.853
> 
> 标签：php, arrays, variables, sum

好的，所以我有两个数组

```
Array ( 
[0] => 23225 
[1] => 23224 
[2] => 23212 
[3] => 23188 
[4] => 23048 
[5] => 23027 
[6] => 23024 
[7] => 23018 
[8] => 22994 
[9] => 22992 )

Array ( 
[0] => Array ( [id] => 2108 [person] => [time_id] => 9 [version_id] => 22992 [day] => 21 ) 
[1] => Array ( [id] => 2168 [person] => [time_id] => 9 [version_id] => 22994 [day] => 2 ) 
[2] => Array ( [id] => 2169 [person] => [time_id] => 9 [version_id] => 22994 [day] => 3 ) 
[3] => Array ( [id] => 2170 [person] => [time_id] => 9 [version_id] => 22994 [day] => 4 ) 
[4] => Array ( [id] => 2171 [person] => [time_id] => 9 [version_id] => 22994 [day] => 5 ) 
[5] => Array ( [id] => 2172 [person] => [time_id] => 9 [version_id] => 22994 [day] => 6 ) 
[6] => Array ( [id] => 2173 [person] => [time_id] => 16- [version_id] => 22994 [day] => 10 ) 
[7] => Array ( [id] => 2174 [person] => [time_id] => 16- [version_id] => 22994 [day] => 11 ) 
[8] => Array ( [id] => 2175 [person] => [time_id] => 16- [version_id] => 22994 [day] => 12 ) 
[9] => Array ( [id] => 2176 [person] => [time_id] => 16- [version_id] => 22994 [day] => 13 ) 
[10] => Array ( [id] => 2177 [person] => [time_id] => 9 [version_id] => 22994 [day] => 16 ) 
[11] => Array ( [id] => 2178 [person] => [time_id] => 9 [version_id] => 22994 [day] => 17 ) 
[12] => Array ( [id] => 2179 [person] => [time_id] => 9 [version_id] => 22994 [day] => 18 ) 
[13] => Array ( [id] => 2180 [person] => [time_id] => 9 [version_id] => 22994 [day] => 19 ) 
[14] => Array ( [id] => 2181 [person] => [time_id] => 9 [version_id] => 22994 [day] => 20 ) 
[15] => Array ( [id] => 2182 [person] => [time_id] => 16- [version_id] => 22994 [day] => 23 ) 
[16] => Array ( [id] => 2183 [person] => [time_id] => 16- [version_id] => 22994 [day] => 24 ) 
[17] => Array ( [id] => 2184 [person] => [time_id] => 16- [version_id] => 22994 [day] => 25 ) 
[18] => Array ( [id] => 2185 [person] => [time_id] => 16- [version_id] => 22994 [day] => 26 ) 
[19] => Array ( [id] => 2186 [person] => [time_id] => 16- [version_id] => 22994 [day] => 27 ) 
[20] => Array ( [id] => 2187 [person] => [time_id] => 9 [version_id] => 22994 [day] => 30 ) 
[21] => Array ( [id] => 2386 [person] => [time_id] => 9 [version_id] => 23018 [day] => 19 ) 
[22] => Array ( [id] => 2483 [person] => [time_id] => 10-- [version_id] => 23024 [day] => 2 ) 
[23] => Array ( [id] => 2484 [person] => [time_id] => 10-- [version_id] => 23024 [day] => 3 ) 
[24] => Array ( [id] => 2485 [person] => [time_id] => 10-- [version_id] => 23024 [day] => 4 ) 
[25] => Array ( [id] => 2486 [person] => [time_id] => 10-- [version_id] => 23024 [day] => 5 ) 
[26] => Array ( [id] => 2487 [person] => [time_id] => 10-- [version_id] => 23024 [day] => 6 ) 
[27] => Array ( [id] => 2592 [person] => [time_id] => 15-- [version_id] => 23027 [day] => 10 ) 
[28] => Array ( [id] => 2593 [person] => [time_id] => 15-- [version_id] => 23027 [day] => 11 ) 
[29] => Array ( [id] => 2594 [person] => [time_id] => 15-- [version_id] => 23027 [day] => 12 ) 
[30] => Array ( [id] => 2595 [person] => [time_id] => 15-- [version_id] => 23027 [day] => 13 ) 
[31] => Array ( [id] => 2877 [person] => [time_id] => 17- [version_id] => 23048 [day] => 23 ) 
[32] => Array ( [id] => 2878 [person] => [time_id] => 17- [version_id] => 23048 [day] => 24 ) 
[33] => Array ( [id] => 2879 [person] => [time_id] => 17- [version_id] => 23048 [day] => 25 ) 
[34] => Array ( [id] => 2880 [person] => [time_id] => 17- [version_id] => 23048 [day] => 26 ) 
[35] => Array ( [id] => 2881 [person] => [time_id] => 17- [version_id] => 23048 [day] => 27 ) 
[36] => Array ( [id] => 3487 [person] => [time_id] => 9 [version_id] => 23188 [day] => 2 ) 
[37] => Array ( [id] => 3488 [person] => [time_id] => 9 [version_id] => 23188 [day] => 3 ) 
[38] => Array ( [id] => 3489 [person] => [time_id] => 9 [version_id] => 23188 [day] => 4 ) 
[39] => Array ( [id] => 3490 [person] => [time_id] => 9 [version_id] => 23188 [day] => 5 ) 
[40] => Array ( [id] => 3491 [person] => [time_id] => 9 [version_id] => 23188 [day] => 6 ) 
[41] => Array ( [id] => 3642 [person] => [time_id] => 9 [version_id] => 23212 [day] => 19 ) 
[42] => Array ( [id] => 3643 [person] => [time_id] => 9 [version_id] => 23212 [day] => 21 ) 
[43] => Array ( [id] => 3694 [person] => [time_id] => 15-- [version_id] => 23224 [day] => 10 ) 
[44] => Array ( [id] => 3695 [person] => [time_id] => 15-- [version_id] => 23224 [day] => 11 ) 
[45] => Array ( [id] => 3696 [person] => [time_id] => 15-- [version_id] => 23224 [day] => 12 ) 
[46] => Array ( [id] => 3697 [person] => [time_id] => 15-- [version_id] => 23224 [day] => 13 ) 
[47] => Array ( [id] => 3706 [person] => [time_id] => 9 [version_id] => 23225 [day] => 10 ) 
[48] => Array ( [id] => 3707 [person] => [time_id] => 9 [version_id] => 23225 [day] => 11 ) 
[49] => Array ( [id] => 3708 [person] => [time_id] => 9 [version_id] => 23225 [day] => 12 ) 
[50] => Array ( [id] => 3709 [person] => [time_id] => 9 [version_id] => 23225 [day] => 13 ) ) 
```

第一个数组是第二个数组的array_unique (version_id)

我需要创建一个新的二维数组，它将是这两个数组的总和。第一维是第一个数组 (version_is)，第二维是天 (1-31)。例如，如果第 2、4、5 天的剩余 version_id 不相等，他们应该得到一个较低的 version_id

例如

```
 Array (
    [0] => Array (
            [0] => Array  ( [version_id] => 23225 [day] => 1 [time_id] => 9 [person] => )
            [1] => Array  ( [version_id] => 23225 [day] => 2 [time_id] => 15 [person] => )
            [2] => Array  ( [version_id] => 23225 [day] => 15 [time_id] => 15 [person] => )
            [3] => Array  ( [version_id] => 23225 [day] => 30 [time_id] => 9+ [person] => ))
    [1] => Array (
            [0] => Array  ( [version_id] => 23224 [day] => 1 [time_id] => 9 [person] => )
            [1] => Array  ( [version_id] => 23224 [day] => 2 [time_id] => 17 [person] => )
            [2] => Array  ( [version_id] => 23224 [day] => 15 [time_id] => 15 [person] => )
            [3] => Array  ( [version_id] => 23224 [day] => 30 [time_id] => 5+ [person] => ))) 
```

我希望你能理解我 ：）

**知道了！** 你能检查一下这是最佳解决方案吗？

```
foreach ($Array as $key => $value) {
    foreach ($value as $skey => $svalue) {
        $version_id=$Array[$key]['version_id'];
        for ($day=1; $day<=31; $day++) {
            if ($Array[$key]['day']==$day) {
                $New[$version_id][$day]['day']=$Array[$key]['day'];
                $New[$version_id][$day]['person']=$Array[$key]['person'];
                $New[$version_id][$day]['time_id']=$Array[$key]['time_id'];
                $New[$version_id][$day]['who']=$Array[$key]['who'];     
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:20:02.373

您需要创建一个二维数组。在 C++ 中，你会做这样的事情：

```
int varArray[9][59]; 
```

# c# - 导致电子邮件无法转发的常见原因有哪些？

> ID：10427212
> 
> 赞同：0
> 
> 时间：2012-05-03T07:48:24.790
> 
> 标签：c#, asp.net, smtp

我有正确的`smtp`in设置`web.config`，它运行没有错误，但是电子邮件没有转发给适当的用户这可能是这背后的原因，我错过了一些服务器设置，请点亮它。

虽然我看到它被保存在`specifiedPickupDirectory`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:19:59.717

我认为没有实用的方法来跟踪电子邮件，无论它是否在从您的服务器发送后发送，除非您从客户端收到无法发送的电子邮件。

但是您的电子邮件仍然可以作为垃圾邮件发送到客户端，或者可能被客户端服务器拒绝。

无论如何，您可以从您的身边处理异常，以便有机会发送电子邮件。

您可以尝试使用`System.Net.Mail.DeliveryNotificationOptions.OnSuccess`可以在[DeliveryNotificationOptions中找到的 wwhcih](http://msdn.microsoft.com/en-us/library/system.net.mail.deliverynotificationoptions.aspx)

也有类似的问题可以找到[如何检查 MailMessage 是在 .NET 中传递的？](https://stackoverflow.com/questions/4973725/how-to-check-mailmessage-was-delivered-in-net)

# jquery - 如何创建像 www.marriott.co.uk/default.mi 这样的 3D 轮播

> ID：10427214
> 
> 赞同：-2
> 
> 时间：2012-05-03T07:48:34.007
> 
> 标签：jquery, jquery-plugins, carousel, jcarousel

我需要一个 jquery carousel 插件，例如[www.marriott.co.uk/default.mi](http://www.marriott.co.uk/default.mi)网站，但没有找到。任何人都可以建议我，我可以从哪里得到它..？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T07:56:12.837

一些类似的轮播：

[http://fredhq.com/projects/roundabout/demos/standard](http://fredhq.com/projects/roundabout/demos/standard)

[http://www.professorcloud.com/mainsite/carousel.htm](http://www.professorcloud.com/mainsite/carousel.htm)

# c++ - 在以下 C++ 语句中放置 const 的好地方是什么

> ID：10427215
> 
> 赞同：5
> 
> 时间：2012-05-03T07:48:40.243
> 
> 标签：c++

考虑以下类成员：

```
std::vector<sim_mob::Lane *>  IncomingLanes_; 
```

如果我的 Lane 对象，上述容器应存储指向某些对象的指针。我不希望使用此变量作为参数的子程序能够修改 Lane 对象。同时，我不知道在哪里放置不会阻止我填充容器的 'const' 关键字。

你能帮我解决这个问题吗？

谢谢你，问候瓦希德

**编辑：** 根据我到目前为止得到的答案（非常感谢他们）假设这个样本：

```
#include <vector>
#include<iostream>
using namespace std;

class Lane
{
private:
    int a;
public:
    Lane(int h):a(h){}
    void setA(int a_)
    {
        a=a_;
    }
    void printLane()
    {
        std::cout << a << std::endl;
    }
};

class B
{

public:
    vector< Lane const  *> IncomingLanes;
    void addLane(Lane  *l)
    {
        IncomingLanes.push_back(l);
    }

};

int main()
{
    Lane l1(1);
    Lane l2(2);
    B b;
    b.addLane(&l1);
    b.addLane(&l2);
    b.IncomingLanes.at(1)->printLane();
    b.IncomingLanes.at(1)->setA(12);
    return 1;
} 
```

我的意思是：

> b.IncomingLanes.at(1)->printLane()

应该可以毫无问题地在 IncomingLanes 上工作并且

> b.IncomingLanes.at(1)->setA(12)

不应该被允许。（在上面的例子中，提到的两种方法都不起作用！）

除了解决问题，我还寻求良好的编程实践。因此，如果您认为上述问题有解决方案但方法不好，请告诉我们。谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T07:59:51.290

先绕道：在容器中使用智能指针，`shared_ptr`而不是原始指针。这将使您的生活变得轻松很多。

通常，您要查找的内容称为设计常量，即不修改其参数的函数。这可以通过传递参数来实现`const-reference`。此外，如果它是一个成员函数，则创建该函数`const`（即成为此函数`this`的`const`范围内，因此您不能使用它`this`来写入成员）。

如果不了解您的班级的更多信息，就很难建议您使用`const-reference`s 到车道的容器。这将使插入`lane`对象变得困难——这是一次性的事情，只能通过 ctor(s) 中的初始化列表来实现。

一些必须阅读：

*   全部[常见问题解答 18](http://www.parashift.com/c++-faq-lite/const-correctness.html)
*   Sutter 论[const 正确性](http://www.gotw.ca/publications/advice98.htm)

编辑：代码示例：

```
#include <vector>
#include <iostream>
//using namespace std; I'd rather type the 5 characters

// This is almost redundant under the current circumstance
#include <vector>
#include <iostream>
#include <memory>
//using namespace std; I'd rather type the 5 characters

// This is almost redundant under the current circumstance
class Lane
{
private:
    int a;
public:
    Lane(int h):a(h){}
    void setA(int a_) // do you need this?
    {
        a=a_;
    }
    void printLane() const // design-const
    {
        std::cout << a << std::endl;
    }
};

class B
{    
    // be consistent with namespace qualification
    std::vector< Lane const * > IncomingLanes; // don't expose impl. details
 public:
    void addLane(Lane const& l) // who's responsible for freeing `l'?
    {
        IncomingLanes.push_back(&l); // would change
    }
    void printLane(size_t index) const
    {
#ifdef _DEBUG 
        IncomingLanes.at( index )->printLane();
#else
        IncomingLanes[ index ]->printLane();
#endif
    }        
};

int main()
{
    Lane l1(1);
    Lane l2(2);
    B b;
    b.addLane(l1);
    b.addLane(l2);
    //b.IncomingLanes.at(1)->printLane(); // this is bad
    //b.IncomingLanes.at(1)->setA(12); // this is bad
    b.printLane(1);

    return 1;
} 
```

此外，正如 Matthieu M. 所建议的：

> 共享所有权更加复杂，因为很难分辨谁真正拥有该对象以及何时释放它（这是性能开销之上的）。所以 unique_ptr 应该是默认选择，而 shared_ptr 是最后的选择。

请注意，`unique_ptr`s 可能需要您使用`std::move`. 我正在更新要使用的示例`pointer to const Lane`（一个更简单的入门界面）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T07:59:33.893

你可以这样做：

```
std::vector<const sim_mob::Lane *>  IncomingLanes_; 
```

或者这样：

```
std::vector<sim_mob::Lane const *>  IncomingLanes_; 
```

在`C/C++`中，const *typename* * 和*typename* const * 含义相同。

**更新以解决更新的问题：**

如果你真的需要做的就是

```
b.IncomingLanes.at(1)->printLane() 
```

那么你只需要`printLane`像这样声明：

```
void printLane() const // Tell compiler that printLane doesn't change this
  {
  std::cout << a << std::endl;
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T08:00:51.150

我怀疑您希望对象能够修改元素（即，您不希望元素真正成为`const`）。相反，您希望非成员函数只能获得对 的只读访问`std::vector`（即，您希望禁止来自对象外部的更改）。

因此，我不会放在`const`任何地方`IncomingLanes_`。相反，我将公开`IncomingLanes_`为一对`std::vector<sim_mob::Lane *>::const_iterator`s（通过称为 and 之类的方法`GetIncomingLanesBegin()`）`GetIncomingLanesEnd()`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T08:10:49.393

你可以这样声明：

```
std::vector<const sim_mob::Lane *>  IncomingLanes_; 
```

您将能够从数组中添加或删除项目，但您希望能够更改项目，请参见下文

```
 IncomingLanes_.push_back(someLine); // Ok
   IncomingLanes_[0] = someLine; //error
   IncomingLanes_[0]->some_meber = someting; //error
   IncomingLanes_.erase(IncomingLanes_.end()); //OK
   IncomingLanes_[0]->nonConstMethod(); //error 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T07:59:37.463

如果您不希望其他例程修改 IncomingLanes，但您确实希望能够自己修改它，只需`const`在您调用的函数声明中使用。

或者，如果您无法控制这些功能，那么当它们是外部的时，不要让它们直接访问 IncomingLanes。将 IncomingLanes 设为私有并为其提供一个 const getter。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T08:04:36.827

如果不将指针也存储在向量 const 中，我认为你想要的东西是不可能的。

```
 const std::vector<sim_mob::Lane*> // means the vector is const, not the pointer within it
 std::vector<const sim_mob::Lane*> // means no one can modify the data pointed at. 
```

充其量，第二个版本可以满足您的需求，但是您将在整个代码中使用此构造，只要您想修改数据：

```
 const_cast<sim_mob::Lane*>(theVector[i])->non_const_method(); 
```

您是否考虑过不同的类层次结构，其中 sim_mob::Lane 的公共接口是 const 而 sim_mob::Really_Lane 包含非常量接口。那么向量的用户如果不使用dynamic_cast就不能确定“车道”对象是“真实的”吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-03T09:21:56.300

在我们得到`const`好处之前，您应该首先使用**封装**。

不要暴露于外部世界，它会变得**容易***得多*。`vector`

 *这里的弱 (*) 封装就足够了：

```
class B {
public:
    std::vector<Lane> const& getIncomingLanes() const { return incomingLanes; }

    void addLane(Lane l) { incomlingLanes.push_back(l); }

private:
    std::vector<Lane> incomingLanes;
}; 
```

以上是最简单的，但达到了目标：

*   类的客户不能修改`vector`自身
*   类的客户不能修改`vector`内容（`Lane`实例）

当然，班级可以`vector`完全访问内容并随意修改。

你的新`main`程序变成：

```
int main()
{
    Lane l1(1);
    Lane l2(2);
    B b;
    b.addLane(l1);
    b.addLane(l2);
    b.getIncomingLanes().at(1).printLane();
    b.getIncomingLanes().at(1).setA(12); // expected-error\
        // { passing ‘const Lane’ as ‘this’ argument of
        //   ‘void Lane::setA(int)’ discards qualifiers }
    return 1;
} 
```

(*) 这在某种意义上是*弱*的，即使属性本身没有暴露，因为我们在实践中将它的引用提供给外部世界，客户端并没有真正被屏蔽。*

# haskell - Haskell 记录，更清洁的方法？

> ID：10427217
> 
> 赞同：12
> 
> 时间：2012-05-03T07:48:56.890
> 
> 标签：haskell, record

我已经阅读了有关 Haskell 记录的一些问题，特别是同一模块中的两个元素不能具有相同名称的事实。

我知道您可以通过使用单独的模块来解决此问题，但我不想这样做，而是尝试了这种方法：

```
class HasX a where
  x :: a -> X

data D1 = D1 { d1_x :: X, ... }
instance HasX D1 where
  x = d1_x

data D2 = D2 { d2_x :: X, ... }
instance HasX D2 where
  x = d2_x 
```

（这只是获取，而不是集合，我当然需要编写更多代码来做集合）。

然而，似乎所有这些的类和实例声明看起来就像样板文件，应该能够使用模板 haskell 或其他东西来消除。

是否有 GHC 的库或扩展可以使这种方法编写起来不那么混乱？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T09:10:42.987

似乎[Data.Has](http://hackage.haskell.org/packages/archive/has/0.5.0.1/doc/html/Data-Has.html)封装了很多你正在寻找的东西。在他们的词汇表中，我认为他们的`Knows`type-class 更接近于 your `Has`，并且它也为注入提供了签名。

他们还使用标签机制来处理我认为您尚未考虑过的问题：包含具有相同类型的字段的记录。他们使用类型级别的标签来消除歧义。

为方便起见，似乎还有一些支持在[Has-TH](http://hackage.haskell.org/package/has-th)`Has`中为带有模板 Haskell 的实例提供生成器

您可以在 Oleg the Type Magician 的作品中找到更多类型级别的标签和其他与唱片相关的材料，例如[OOHaskell](http://homepages.cwi.nl/~ralf/OOHaskell/)（也与 Ralf Lämmel 合作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:26:34.410

data-accessor-template 至少可以帮助编写 set/get 访问器。也许有些人可以想出模板 Haskell 代码来为每个记录字段名称生成类和实例。但是，我自己不使用 Template Haskell 的东西。它限制你使用 GHC，甚至限制特定的 GHC 版本，因为 Template Haskell 在不同的 GHC 版本之间发生变化。每个模块拥有一个（主要）记录确实是有回报的。

# plone - 防止某些类型出现在 plone.app.theming 的文件夹列表中

> ID：10427220
> 
> 赞同：3
> 
> 时间：2012-05-03T07:49:40.143
> 
> 标签：plone, theming, diazo

我有一个网站，它有一个通过 plone.app.theming / Diazo 主题显示的公共 url，并且 url 仅限于通过 sunburst 显示的内容编辑器。

我希望某些门户类型仅出现在 cms 编辑器的列表中，而不出现在公共站点上。我注意到 folder_listing 模板`request/contentFilter`在定义时使用。有没有办法为主题视图的请求添加内容过滤器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:00:11.200

我最终使用 Plone 站点上的预遍历钩子解决了这个问题。这对我来说很有效，因为我可以根据请求的某些属性可靠地确定请求是针对主题视图还是针对编辑视图。

```
def SetupThemeView(site, before_traverse):
    """ If we're serving the public, themed, version then supplement the request
    """
    request = before_traverse.request
    if serving_theme_view(request):
        request.set('contentFilter', {'portal_type' : listable_types}) 
```

Where`serving_theme_view`确定我们是在为主题视图还是编辑器视图提供服务，并且`listable_types`是我们希望出现在主题视图的列表中的类型名称的元组。

然后我在我的 configure.zcml 中将其注册为订阅者

```
<subscriber
    for="Products.CMFCore.interfaces.ISiteRoot
         zope.traversing.interfaces.IBeforeTraverseEvent"
    handler=".events.SetupThemeView"
    /> 
```

# perl - 阿帕奇儿童挂/ mod perl

> ID：10427227
> 
> 赞同：1
> 
> 时间：2012-05-03T07:50:05.430
> 
> 标签：perl, apache, gdb, freeze, mod-perl2

我服务器上的 apache 子进程（ubuntu 12.04 从 11.10 升级，apache 2.2.22，perl 5.14.2，mod_perl 2.0.5）正在挂起。

我试图捕捉信号 usr2，并发出警报，但没有成功（当使用 sleep 进行测试时，它的工作方式与预期的一样，但当程序自行挂起时没有给出输出）

```
sub handler : method{
my $mask      = POSIX::SigSet->new(&POSIX::SIGUSR2, &POSIX::SIGALRM);
my $oldaction_usr2 = POSIX::SigAction->new();
my $oldaction_alarm = POSIX::SigAction->new();
my $action = POSIX::SigAction->new(sub {
    Carp::confess("hm caught SIGUSR2 or ALARM DEAD LOCK YOU can run but not hide!");
},$mask,&POSIX::SA_NODEFER);
POSIX::sigaction(&POSIX::SIGUSR2,$action, $oldaction_usr2);
POSIX::sigaction(&POSIX::SIGALRM,$action, $oldaction_alarm);
alarm(30); #max 30 seconds per request 
```

所以我使用 Apache 状态来获取挂起的孩子的 pid（cpu 时间没有增加，但只有 SS（自最近请求开始以来的秒数）。

然后我将 gdb 与 pid 连接起来以获取回溯：

```
(gdb) bt
#0  0x00007fc4610fb606 in myck_entersub (my_perl=0x7fc47f7f63e0, op=0x7fc484b40910) at lib/Params/Classify.xs:682
#1  0x00007fc477a67abd in Perl_convert () from /usr/lib/libperl.so.5.14
#2  0x00007fc477a6f769 in Perl_utilize () from /usr/lib/libperl.so.5.14
#3  0x00007fc477a9daef in Perl_yyparse () from /usr/lib/libperl.so.5.14
#4  0x00007fc477b1635d in ?? () from /usr/lib/libperl.so.5.14 
```

问题是我不知道如何解决这个问题或这意味着什么。在[modper 1 上，](http://perl.apache.org/docs/1.0/guide/help.html)我发现：

```
% gdb httpd <pid of spinning process>
(gdb) where
(gdb) source mod_perl-x.xx/.gdbinit
(gdb) curinfo 
```

但我不知道 .gdbinit 位于何处，或者我需要安装哪个软件包，还是我需要自己从源代码（可能使用[Devel::DebugInit::GDB](http://www.avabo.ro/docs/Linux_Docs/docs/html/languages/perl/perlman/pages/module/Devel%3a%3aDebugInit%3a%3aGDB.html)）制作这个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T01:50:59.107

问题可能是“Params::Classify”，它不是线程安全的。看：

[https://bugs.launchpad.net/ubuntu/+source/libmodule-runtime-perl/+bug/991650](https://bugs.launchpad.net/ubuntu/+source/libmodule-runtime-perl/+bug/991650)

[mod_perl 脚本在“使用”处理期间进入紧密循环](https://stackoverflow.com/questions/13054360/mod-perl-script-going-in-to-a-tight-loop-during-use-processing)

[http://www.perlmonks.org/?node_id=886909](http://www.perlmonks.org/?node_id=886909)

Params::Classify 的作者在 2011 年 11 月承认了这个问题，但尚未发布修复程序。

# jquery - Jquery自动完成：使用选项卡选择第一项并保持专注于搜索框

> ID：10427229
> 
> 赞同：8
> 
> 时间：2012-05-03T07:50:10.827
> 
> 标签：jquery, jquery-ui, autocomplete

当我使用 JQuery UI 自动完成时，我需要让 tab 键用自动完成结果中的第一项填充搜索框，然后包含一个空格，然后允许用户继续输入。

```
<div class="ui-widget">
  <form id="searchbox" method="GET" action="http://duckduckgo.com/">
    <input id="search" type="text" name="q">
    <input id="submit" type="submit" value="Search">
  </form>
</div>
<script>
var tabKey = 9;
$('#search').autocomplete({
    source: [ 'this', 'that', 'foobar' ],
    delay: 0,
    selectFirst: true,
    select: function(event, ui) { if (event.keyCode == tabKey) { 
      $('#search').focus().select();
    } }
});
// without this, the tab key doesn't trigger an event                                                                                       
$('.ui-autocomplete').keypress(function(event) {});
</script> 
```

换句话说，在上面的示例中，如果有人键入“th”，他们会在自动完成选项中看到“this”和“that”。点击选项卡会将“this”（注意空格）添加到输入中，并且焦点将保留在输入中。

有人可以告诉我我错过了什么吗？我不太懂Javascript，所以小字好:)

HEAD 部分可能还有更有用的信息（jquery 1.7.2）：

```
<script src="js/jquery-latest.js"></script>
<script src="js/jquery-ui-1.8.20.custom.min.js"></script>
<link rel="stylesheet" type="text/css" href="css/jquery-ui-1.8.20.custom.css" /> 
```

*编辑*：看来这`autoFocus: true`会让我走到那里。现在，如果我能弄清楚如何将注意力集中在输入框上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T08:24:43.223

Hiya**演示** [http://jsfiddle.net/DMDHC/](http://jsfiddle.net/DMDHC/)

希望这可以帮助， ：）

因此，如果您键入`Ra`，您会看到弹出 rambo 和其他选项，然后`tab`按键，您会看到它`added text + " "`会出现在文本框上，以便您可以继续键入。

我做的另一件事是`event.preventDefault();`防止任何默认行为，让你知道你在做什么bruv！B-)

**jQuery代码**

```
$( "#search" ).autocomplete({
    source: function( req, resp ) {
        $.post( "/echo/json/", {
            json: '["Rambo", "Foobar", "This", "That", "Batman", "Hulk"]',
            delay: 1
        }, function(data) {
            resp( data );
        }, "JSON" );
    },
        select: function(event, ui) {

             var TABKEY = 9;
            this.value = ui.item.value;

            if (event.keyCode == TABKEY) { 
                event.preventDefault();
                this.value = this.value + " ";
                $('#search').focus();
            }

            return false;
        }
});

​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-30T23:50:07.617

我用这个（咖啡脚本）：

```
$("#autocomplete").keydown (event) ->
    if event.keyCode != $.ui.keyCode.TAB then return true
    $(this).trigger($.Event 'keydown', keyCode: $.ui.keyCode.DOWN)
    false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-01T09:54:01.107

自动对焦将在下拉搜索中选择第一条记录...

然后，您的代码只需要包含`autoFocus: true,`如下内容：

```
$('#search').autocomplete({
    source: url,
    delay: 0,
    autoFocus: true,
    select: function( event, ui ) {
        $( "#id" ).val( ui.item.id );
        $(this).closest('form').submit();
    },
    focus: function( event, ui ) { event.preventDefault(); }
}); 
```

# sharepoint - sharepoint 2010 中访问量最高的 3 个页面

> ID：10427233
> 
> 赞同：1
> 
> 时间：2012-05-03T07:50:36.563
> 
> 标签：sharepoint, sharepoint-2010

我想在我的共享点网站主页中显示访问量最高的 3 个页面。我需要找出前 3 个页面的标题并将它们显示在链接中。我找到了方法。但它显示所有页面，如 allpages.aspx、settings.aspx... 我只需要前 3 个大多数用户创建的页面。到目前为止，我一直无法找出最好的方法来做到这一点。任何让我开始的建议将不胜感激。

问候，拉吉...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:03:14.227

You can create your custom Web Analytics Web Part derived from OOTB WAWP. Check some solution here: [http://farhanfaiz.wordpress.com/2011/06/21/sharepoint-2010-display-titles-instead-of-url%E2%80%99s-in-whatspopularwebpart/](http://farhanfaiz.wordpress.com/2011/06/21/sharepoint-2010-display-titles-instead-of-url%E2%80%99s-in-whatspopularwebpart/)

In your custom code you can make filtration functionality and skip undesired pages.

# orchardcms - 内容在页面上的放置位置

> ID：10427235
> 
> 赞同：0
> 
> 时间：2012-05-03T07:50:53.037
> 
> 标签：orchardcms

我正在使用 Orchard 1.4 并使用 Projection Widget。

我想知道的一件事是如何控制页面上内容的定位。

我知道小部件放置在指定区域，但是如果我想将投影模块的内容放在页面内容中的某个位置怎么办？

例如 ：

```
Title

Some Page content here

Projection Module content

Some more Page content here 
```

我怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:16:11.387

您通常使用placement.info 来更改呈现页面上部件的顺序。

# asp.net - ASPX 和 ASCX 之间的事件

> ID：10427238
> 
> 赞同：3
> 
> 时间：2012-05-03T07:50:58.793
> 
> 标签：asp.net, .net, events, ascx

我是 .NET 的初学者，从昨天早上开始搜索以解决我的问题，但没有找到解决方案。

这是我的问题：

我通过这种方式动态创建了一些用户控件，因为我需要提供参数：

```
List<ANNOUNCEMENT> listAnnouncement = getAnnoucements();
foreach(ANNOUNCEMENT ann in listAnnouncement)
{
    if(ann.IS_CURRENT_ANNOUNCEMENT && currentAnnouncement == null)
    {
         currentAnnouncement = ann;
    }
    List<Object> listParams = new List<Object>();
    listParams.Add(ann);
    AnnouncementPresentation ap = (AnnouncementPresentation)(Controller.LoadControl(Page, "~/UserControls/AnnouncementPresentation.ascx", listParams.ToArray()));
    /* important for the end of the method */
    ap.modifyAnnouncementButtonClick += new EventHandler(modifyAnnouncementButtonClick);
    pnl_announcements.Controls.Add(ap);
} 
```

在这个 ASCX 中，我有一个按钮，当用户单击它时，我想调用包含在我的 ASPX 中的方法，所以我在 ASCX 中执行此操作：

```
public event EventHandler modifyAnnouncementButtonClick;
protected void btn_modify_announcement_Click(object sender, EventArgs e)
{
    PageAdminAnnonces.currentAnnouncement = annonce;
    modifyAnnouncementButtonClick(sender, e);
} 
```

这在 ASPX 中：

```
protected void modifyAnnouncementButtonClick(object sender, EventArgs e)
{
     initListOfAnnouncement();
     lbl_errors.Text = currentAnnouncement.TITLE;
} 
```

我认为一切正常，但有一个问题：它工作一次，在方法结束时，我删除了我的 ASCX，如您所见，并创建新的 ASCX。但是他们没有方法，当我再次单击时，没有任何效果，因此重新加载了 ASPX。重新加载后，它再次工作。

我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:12:41.647

根据评论中的信息，我认为您的解决方案不起作用，因为您正在`Click`事件处理方法中重新创建控件，这在页面的生命周期中已经很晚了，不应该用于添加控件。

正如评论中提到的，我建议您**在**按钮的处理方法中创建`Page_Init`或`Page_Load`不重新创建控件。您还应该为每个人分配一个唯一的 ID。然后，在处理程序中，您可以使用方法来访问创建的控件。或者，您可以在创建时保存对控件的引用，以便以后轻松访问它们。**`Click``Click``FindControl`**

 **有用的链接：

*   [http://msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)
*   [http://visualstudiomagazine.com/articles/2010/10/11/more-on-adding-controls-dynamically.aspx](http://visualstudiomagazine.com/articles/2010/10/11/more-on-adding-controls-dynamically.aspx)**

# objective-c - 音频路由未更改时的耳机插件插入事件 - iOS

> ID：10427239
> 
> 赞同：1
> 
> 时间：2012-05-03T07:51:05.067
> 
> 标签：objective-c, ios, audiosession, headphones

我在 iPad 上工作。我想检测用户何时拔出耳机。首先，我在属性上使用了一个侦听器`kAudioSessionProperty_AudioRouteChange`。所以一切都运作良好，直到我决定添加一个按钮以在耳机仍插入时切换到扬声器。所以我现在面临一个问题，也许有人会有解决它的想法。

这是场景：

*   我插入耳机 -> 我的音频路由更改回调被调用
*   然后我将声音切换到扬声器（不拔下耳机）-> 调用音频路由更改回调
*   然后我拔下耳机（当声音仍在输出到扬声器时）-> 不调用音频路由更改回调，这似乎是合乎逻辑的。

但这是我的问题！所以我的问题是：你有没有办法检测到最后一个案例中耳机被拔掉了？

谢谢你的帮助

**编辑 ：**

好的，我找到了解决方法：

为了检测耳机是否插入，我在需要知道它的所有时间都执行一个测试函数（而不是使用布尔值），这可能对性能不太好，但它正在工作，这是我的代码给那些可能需要的人它 ：

```
//set back the default audio route
UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_None;
AudioSessionSetProperty(kAudioSessionProperty_OverrideAudioRoute, sizeof(audioRouteOverride), &audioRouteOverride);

//check if this default audio route is Heaphone or Speaker
CFStringRef newAudioRoute;
UInt32 newAudioRouteSize = sizeof(newAudioRoute);
AudioSessionGetProperty(kAudioSessionProperty_AudioRoute, &newAudioRouteSize, &newAudioRoute);

NSString *newAudioRouteString = (__bridge NSString *)newAudioRoute;

CFRelease(newAudioRoute);

//if this default audio route is not Headphone, it means no headphone is plugged
if ([newAudioRouteString rangeOfString:@"Headphones"].location != NSNotFound){
    NSLog(@"Earphone available");
    return true;
}
else {
    NSLog(@"No Earphone available");
    return false;
} 
```

希望它会帮助某人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-18T09:09:30.470

这是处理此问题的最佳教程：

[http://www.techotopia.com/index.php/Detecting_when_an_iPhone_Headphone_or_Docking_Connector_is_Unplugged_(iOS_4)](http://www.techotopia.com/index.php/Detecting_when_an_iPhone_Headphone_or_Docking_Connector_is_Unplugged_(iOS_4))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:07:52.927

我想出一个解决方案，方法如下：您在 AppDelegate 中为扬声器创建一个布尔值，比如说： `BOOL isSpeakerOn`。每次调用音频路由回调时，您都必须验证扬声器的当前情况以及您想要做什么。

# google-maps - 谷歌地图中的特定业务 POI 类型

> ID：10427240
> 
> 赞同：1
> 
> 时间：2012-05-03T07:51:05.817
> 
> 标签：google-maps

我已经在网上搜索了一段时间，但没有成功。我试图只在谷歌地图（API v3）上显示酒店，但我唯一能找到的就是关闭所有商业 POI。

```
mapTypeId: google.maps.MapTypeId.ROADMAP,
styles:
[
    {
        featureType: "poi.business",
        elementType: "labels",
        stylers:
        [
            {
                visibility: "off"
            }
        ]
    }
] 
```

所以我想知道，有没有办法“过滤”出特定的业务类型，如酒店、餐馆等，还有办法查看这些类型的列表吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:20:25.063

地点搜索可以是一个选项，如[本例](https://google-developers.appspot.com/maps/documentation/javascript/examples/place-search?hl=de)所示。

那里的搜索类型是“商店”，但对于[可用地点类型的列表，](https://developers.google.com/maps/documentation/places/supported_types)您可以使用“住宿”作为关键字，或者对于[这篇文章](http://groups.google.com/group/google-places-api/browse_thread/thread/0f7cea5416d15e58?pli=1)也可以使用“酒店”（有限制）。

[此示例](http://gmaps-samples-v3.googlecode.com/svn/trunk/localsearch/places.html)显示了一种创建过滤结果列表的方法。

# mysql - 在 mysql 中使用单个查询获取子类别的父名称

> ID：10427241
> 
> 赞同：2
> 
> 时间：2012-05-03T07:51:10.767
> 
> 标签：mysql

我有一个名为“类别”的 mysql 表。基本结构是这样的——

```
------     --------     ------
cat_id     cat_name     parent
------     --------     ------
1          test1        NULL
2          test2        NULL
3          test3        2
4          test4        1
5          test5        3 
```

现在我想要在单个查询中使用父类别**名称**（不仅是 id）的所有类别数据。那可能吗？我可以通过在while循环中使用第二个查询（获取孩子的父母姓名）并将数据合并为一个整体来做到这一点。但是可以通过单个查询来做到这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T07:53:02.010

**将表与自身**连接，使用`parent`列链接到父级的 cat_id。

```
SELECT c1.cat_id as childID, c1.cat_name ChildName, c2.cat_name as ParentName
from category c1
LEFT OUTER JOIN category c2
ON c1.parent = c2.cat_id 
```

*   注意：因为有些元素没有父元素（`NULL`），所以我放了一个`LEFT OUTER JOIN`，所以这些行也会显示出来。如果您不希望这样，请使用 a`JOIN`而不是`LEFT OUTER JOIN`.
*   您也可以显示线条，但显示其他内容（空或文本或...）而不是`NULL`使用`COALESCE`.
*   您可以将结果视为一个（大）新表，因此您可以像往常一样添加 WHERE 子句，例如过滤父名称：`WHERE c2.cat_name = 'test2'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:54:46.810

```
Select p.cat_id, p.cat_name, c.cat_id, c.cat_name, c.parent 
From category Left Join category On p.cat_id = c.parent 
Where p.cat_name = 'name' 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-07-15T11:00:26.287

选择 c1。`category_name`AS 类别，c2。`category_name`作为子类别 FROM (

SELECT * FROM `category` ) 作为 c1 内连接 (

SELECT * FROM `category` ) AS c2 ON c1。`category_id`= c2。`category_id`

# c# - 解决 WCF 错误：EncryptedKey 子句未使用所需的加密令牌“System.IdentityModel.Tokens.X509SecurityToken”包装

> ID：10427246
> 
> 赞同：4
> 
> 时间：2012-05-03T07:51:25.860
> 
> 标签：c#, wcf, wcf-security, x509certificate2

我有一个 WCF 客户端崩溃并出现错误“EncryptedKey 子句未使用所需的加密令牌'System.IdentityModel.Tokens.X509SecurityToken'。” 对于每一个回应。

我环顾四周，[这篇博客文章](http://webservices20.blogspot.com.au/2008/10/cryptic-wcf-error-messages-part-1-of-n.html)似乎表明问题出在我的证书设置上，但我不确定我做错了什么......

我的客户使用带有 MutualCertificateBindingElement 的自定义绑定来确保安全，我在代码中配置证书，如下所示：

```
client.ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = X509CertificateValidationMode.ChainTrust;
client.ClientCredentials.ServiceCertificate.SetDefaultCertificate
(
    StoreLocation.CurrentUser,
    StoreName.AddressBook,
    X509FindType.FindBySerialNumber,
    "[serial number 1]"
);

client.ClientCredentials.ClientCertificate.SetCertificate
(
    StoreLocation.CurrentUser,
    StoreName.My,
    X509FindType.FindBySerialNumber,
    "[serial number 2]"
); 
```

序列号与`<X509SerialNumber>`请求和响应消息中的元素中的值相匹配。

我注意到的一个差异是`<X509IssuerName>`请求中的元素和响应的格式不同：

```
Request:  CN=[CN], O=[O], L=[L], C=[C]
Response: C=[C],L=[L],O=[O],CN=[CN] 
```

这可能是导致问题的原因吗？

**更新**

原来是证书名称格式导致了问题。我设法通过使用自定义编码器将响应中的证书名称替换为 WCF 期望的名称来解决它。现在我有这个丑陋的黑客，但它有效，所以我会忍受它！

```
public override Message ReadMessage(ArraySegment<byte> buffer, BufferManager bufferManager, string contentType)
{   
    var msgContents = new byte[buffer.Count];
    Array.Copy(buffer.Array, buffer.Offset, msgContents, 0, msgContents.Length);
    bufferManager.ReturnBuffer(buffer.Array);
    var message = Encoding.UTF8.GetString(msgContents);

    // Fix certificate issuer name formatting to match what WCF expects.
    message = message.Replace
    (
        "C=[C],L=[L],O=[O],CN=[CN]",
        "CN=[CN], O=[O], L=[L], C=[C]"
    );

    var stream = new MemoryStream(Encoding.UTF8.GetBytes(message));     
    return ReadMessage(stream, int.MaxValue);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:55:41.580

您提到的发行人名称顺序很可能是问题所在。由于这些名称没有签名，我建议您在客户端中编写一个自定义编码器，将响应中的名称替换为请求中的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T01:37:01.423

除了明显的证书不匹配和禁止配置错误之外......我看到了一个试图访问私钥的问题。检查客户端是否对证书私钥具有适当的权限。如果您右键单击 certmanager 中的证书，您应该会看到 AllTask​​s/Manage Private Keys。将客户的进程标识添加到列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-21T14:47:38.437

还要确保您使用的证书是正确的。**我使用了缺少Subject Key Identifier**的自签名证书。

[WCF：EncryptedKey 子句未使用所需的加密令牌“System.IdentityModel.Tokens.X509SecurityToken”包装](https://stackoverflow.com/questions/46686785/wcf-the-encryptedkey-clause-was-not-wrapped-with-the-required-encryption-token)

# asp.net - 当用户从站点导航时，ASP.net MVC3 保存最后一个操作，当他们返回时重定向到该操作

> ID：10427250
> 
> 赞同：0
> 
> 时间：2012-05-03T07:51:45.690
> 
> 标签：asp.net, asp.net-mvc-3, session

基本上我所拥有的是一个使用 Windows Live Connect 进行身份验证的站点。当用户选择从主视图登录时，他们会被重定向到显然托管在其他地方的 WL 登录页面。一旦他们成功登录，他们就会被重定向到我网站上的 SignIn 操作，如果这是他们第一次访问，可能会将用户添加到我的数据库中，设置会话变量等。

不过现在的问题是，我总是让 SignIn 操作将 RedirectToAction 返回到主页。这对用户来说可能很烦人，因为他们现在必须导航回他们需要登录才能查看的任何页面。

我的第一个想法是在我的重要操作中添加以下内容以保存用户的当前位置：

```
Session["LastPage"] = RedirectToAction("Index", "Home"); 
```

然后在我的登录操作结束时，我尝试包括：

```
if (Session["LastPage"] != null)
    return (ActionResult)Session["LastPage"];
else
    return RedirectToAction("MyPage", "User"); 
```

但这实际上不起作用，因为显然每次用户离开和返回该站点时，我的会话都会重新启动。

我是否以正确的方式处理这个问题？如果是这样，我如何防止会话被擦除？如果我以完全错误的方式进行此操作，那么有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:33:50.227

您可以使用指向实时身份验证站点的重定向链接提供额外的查询字符串。

只需添加此查询字符串：

**&redirect_uri=你的网址**

**您可以使用Request.UrlReferrer**获取您以前的 URL

# django - Django admin 中的 unique_together 和隐式填充字段

> ID：10427252
> 
> 赞同：2
> 
> 时间：2012-05-03T07:52:04.940
> 
> 标签：django, admin, unique-constraint, autofill

假设我正在编写一个多博客应用程序，并且我希望每个作者为其文章使用唯一的标题（但每个用户都是唯一的，而不是全球唯一的）：

```
class Article(models.Model):
    author = models.ForeignKey('auth.User')
    title = models.CharField(max_length=255)
    #[...]

    class Meta:
        unique_together = (('title', 'owner'),) 
```

现在，我希望应用程序自动填充作者字段：

```
class ArticleAdmin(ModelAdmin):

    exclude = ('owner',)

    def save_model(self, request, obj, form, change):
        if not change:
            obj.owner = request.user
        obj.save() 
```

实际上这不起作用：如果我尝试使用现有的作者-标题组合创建一个新文章，Django 将不会检查唯一性（因为作者被排除在表单之外）并且当它到达数据库时我会得到一个 IntegrityError。

我想在 Article 类中添加一个干净的方法：

```
def clean(self):
    if Article.objects.filter(title=self.title, owner=self.owner).exists():
        raise ValidationError(u"...") 
```

但似乎在 ArticleAdmin.save_model()*之前*调用了Article.clean()，所以这不起作用。

这里已经提出了这个问题的[几个](https://stackoverflow.com/questions/2141030/djangos-modelform-unique-together-validation)[变体，但似乎没有一个解决方案对我有用：](https://stackoverflow.com/questions/6892162/django-1-3-createview-modelform-unique-together-validation-with-one-field-exclu)

*   我不能使用 Form.clean() 或其他没有可用请求的表单方法，因为我需要 request.user。
*   出于同样的原因，模型级别的验证是不可能的。
*   一些答案是指基于类的视图或自定义视图，但我想留在 Django 管理员的上下文中。

有什么想法可以在不重写一半管理应用程序的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:19:12.647

实际上，您正在寻找一种`request`在 ModelAdmin 中引入自定义表单的方法：

```
from django.core.exceptions import ValidationError

def make_add_form(request, base_form):
    class ArticleForm(base_form):
        def clean(self):
            if Article.objects.filter(title=self.cleaned_data['title'], owner=request.user).exists():
                raise ValidationError(u"...")
            return self.cleaned_data

        def save(self, commit=False):
            self.instance.owner = request.user
            return super(ArticleForm, self).save(commit=commit)

    return ArticleForm

class ArticleAdmin(admin.ModelAdmin):
    exclude = ('owner',)

    def get_form(self, request, obj=None, **kwargs):
        if obj is None: # add
            kwargs['form'] = make_add_form(request, self.form)
        return super(ArticleAdmin, self).get_form(request, obj, **kwargs) 
```

# java - 为什么 pom.xml 要求依赖版本？

> ID：10427256
> 
> 赞同：3
> 
> 时间：2012-05-03T07:52:20.233
> 
> 标签：java, maven, version, pom.xml, artifact

在 pom.xml 中用于休眠：

```
 <dependency>
        <groupId>org.hibernate.javax.persistence</groupId>
        <artifactId>hibernate-jpa-2.0-api</artifactId>
    </dependency> 
```

没有版本。但是当我在 Eclipse 中添加到我的应用程序 pom 时，我收到该版本必须是的错误。为什么会有这种差异？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T07:56:59.293

2.0 是支持的 JPA 的版本不是工件的版本

尝试

```
<dependency>
    <groupId>org.hibernate.javax.persistence</groupId>
    <artifactId>hibernate-jpa-2.0-api</artifactId>
    <version>1.0.1.Final</version>
</dependency> 
```

阿农

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T07:54:08.827

Maven 需要知道要下载/检查的版本。

添加一个`version`元素作为`dependency`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T07:58:43.210

您在 hibernate 的依赖项中看到的提取实际上有一个在父 pom 中定义的版本，在其 dependencyMgmt 部分中。这允许只在一个地方定义要使用的版本，并且该父 pom 的所有子级只需要指出他们想要的依赖项，它们就会自动获取父级中指定的版本。

在你的情况下添加一个`<version>`，或者在你的 pom.xml 中使用一个 dependencyMgmt 部分来指示你想要的 hibernate-jpa-2.0-api 的版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T08:00:58.760

有两种方法可以解决这些问题：

- 插入自己的版本，以便 Maven 知道您需要什么依赖项（它要么在本地存储库中搜索它，要么从 maven 存储库下载，或者你可以给它一个从哪里下载它的链接）

-添加一个使用您正在调用的工件的父级，然后您不需要该版本（它需要父版本）

# django - Django：在使用模板继承时在基本模板文件中加载自定义过滤器时出现问题

> ID：10427257
> 
> 赞同：3
> 
> 时间：2012-05-03T07:52:24.347
> 
> 标签：django, django-templates, django-1.4, django-template-filters

在`{% load custom_filters %}`模板中执行时，`{% extends "base.html" %}`一切正常，但是当我将负载移动到 base.html 模板时，过滤器会出现奇怪的行为。这是我的`custom_filters.py`：

```
from django import template
from django.template.defaultfilters import stringfilter

register = template.Library()

# To cut off strings at a specified character, at first occurance. Example:
#   time = 19:30:12.123456
#   {{ time|cut:'.' }}
#   returns: 19:30:12
@register.filter
@stringfilter
def cut(string, cutoff_point):
    return string.split(cutoff_point, 1)[0] 
```

当我将它加载到“结束模板”中时，行为符合预期。如果`time = 19:30:12.123456`然后`{{ time|cut:'.' }}`返回`19:30:12`. 当我在`base.html`返回值中加载它时`19:30:12123456`，与输入相同，但没有“截止点”。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T07:57:28.807

您应该`{% load ... %}`在每个模板中放置您想要使用自定义标签或过滤器的位置。

在您的情况下，调用 filter 也不是一个好主意`cut`，因为该过滤器[已经存在](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#cut)（并且它用于从您的字符串中剪切一个点）。

# javascript - 日期选择器未出现

> ID：10427258
> 
> 赞同：0
> 
> 时间：2012-05-03T07:52:29.917
> 
> 标签：javascript, date, datepicker, mootools

我正在尝试以第二绿色显示日期选择器，但日期选择器没有出现，但在第一绿色中它会很​​好。我应该修改什么？小提琴第一次约会很好，但是当我点击第二个文本框的绿色时，什么也没有出现。它需要什么类型的修改？

这是小提琴

[http://jsbin.com/unosar/8/edit#javascript,html,live](http://jsbin.com/unosar/8/edit#javascript,html,live)

请问有什么解决办法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T07:58:31.020

您对 2 个 div 使用相同的 id，或者将其更改为 class 或使用唯一 id，例如

```
#invokeDP {
 width: 20px;
 height: 20px;
 background: green;
 display: inline-block;    
}
  #invokeDP2 {
 width: 20px;
 height: 20px;
 background: green;
 display: inline-block;    
}

var dp = new DatePicker('.picker', {
  pickerClass: 'datepicker ',
  allowEmpty: true,
    toggleElements: ['invokeDP', 'invokeDP2'] //2 divs with 2 unique ids
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T08:05:56.587

您的 HTML 无效：您不能使用两次 a `id`，该`id`属性[必须是唯一的](http://www.w3.org/TR/html401/struct/global.html#adef-id)。

将它变成一个类就足够了，一切都会起作用（参见[http://jsbin.com/unosar/19/edit#javascript,html,live](http://jsbin.com/unosar/19/edit#javascript,html,live)）

此外，toggle_class 可以是一个简单的字符串，而不仅仅是一个数组：[http ://www.monkeyphysics.com/mootools/script/2/datepicker#examples](http://www.monkeyphysics.com/mootools/script/2/datepicker#examples)

顺便说一句，您应该改用官方改进的[mootools 日期选择器](https://github.com/arian/mootools-datepicker/)。

# windows-phone-7 - 检查用户是否登录或不在 Web 浏览器控件中

> ID：10427260
> 
> 赞同：0
> 
> 时间：2012-05-03T07:52:35.190
> 
> 标签：windows-phone-7, windows-phone-7.1

我正在尝试在 windows phone 7.1 中制作一个测试应用程序并且我在我的应用程序中使用 webBrowser 控件并提供外部网站的 url。用户在该表单中输入登录详细信息，然后按提交按钮。我如何知道用户已登录。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:17:37.550

您可以使用 WebBrowser.Navigating 事件跟踪用户被重定向到的 URL。检查 NavigatingEventArgs.Uri 属性。

然后，您只需要计算出登录页面重定向到的页面，如果用户正在导航到该页面，则他们已成功登录。

# ruby - 需要忽略基本的http auth

> ID：10427263
> 
> 赞同：0
> 
> 时间：2012-05-03T07:52:47.577
> 
> 标签：ruby, mechanize

我在获取页面源时遇到了麻烦。

```
 require 'mechanize'

    agent = Mechanize.new        
    page = agent.get("https://#{ip}/") 
```

结束有错误：

```
 /home/lord/.gem/ruby/1.9.1/gems/mechanize-2.4/lib/mechanize/http/agent.rb:682:in `response_authenticate': 401 => Net::HTTPUnauthorized for https://82.144.208.6/cgi-bin/welcome.cgi -- no credentials found, provide some with #add_auth -- available realms: r722 (Mechanize::UnauthorizedError)
from /home/lord/.gem/ruby/1.9.1/gems/mechanize-2.4/lib/mechanize/http/agent.rb:288:in `fetch'
from /home/lord/.gem/ruby/1.9.1/gems/mechanize-2.4/lib/mechanize.rb:407:in `get'
from /home/lord/ruby/ruby_backup/backup-done.ru:35:in `block (2 levels) in <main>' 
```

如何忽略 http auth 并获取源代码？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:22:43.870

异常包含页面访问器。文档对其进行了描述： http: [//mechanize.rubyforge.org/Mechanize/ResponseCodeError.html](http://mechanize.rubyforge.org/Mechanize/ResponseCodeError.html)

尝试：

```
begin
  page = agent.get ...
rescue Mechanize::ResponseCodeError => e
  page = e.page
end 
```

# crystal-reports - 水晶报表中列的不同标准

> ID：10427271
> 
> 赞同：0
> 
> 时间：2012-05-03T07:53:34.540
> 
> 标签：crystal-reports

在我的水晶报告中，我需要为每一列提供不同的标准来显示数据。主要是日期范围。例如。第 1 列：标准日期介于“2012-01-01”和“2012-01-31”之间 列 2：标准日期小于“2012-01-31”第 3 列：标准日期等于“2012-01-15”

是否有可能做到这一点？请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:14:46.437

对于 column0，只需将 {table.amount} 字段添加到画布。

然后添加这些公式字段：

```
//{@column1}
If {table.date} = Date(2012,1,1) Then {table.amount} Else 0

//{@column2}
If {table.date} IN Date(2012,1,1) TO Date(2012,1,31) Then {table.amount} Else 0

//{@column3}
If {table.date} < Date(2012,1,31) Then {table.amount} Else 0 
```

# php - Symfony 2 EntityManager 注入服务

> ID：10427282
> 
> 赞同：98
> 
> 时间：2012-05-03T07:54:18.760
> 
> 标签：php, symfony, dependency-injection

我已经创建了自己的服务，我需要注入学说 EntityManager，但我没有看到`__construct()`在我的服务上调用它，并且注入不起作用。

这是代码和配置：

```
<?php

namespace Test\CommonBundle\Services;
use Doctrine\ORM\EntityManager;

class UserService {

    /**
     *
     * @var EntityManager 
     */
    protected $em;

    public function __constructor(EntityManager $entityManager)
    {
        var_dump($entityManager);
        exit(); // I've never saw it happen, looks like constructor never called
        $this->em = $entityManager;
    }

    public function getUser($userId){
       var_dump($this->em ); // outputs null  
    }

} 
```

这是`services.yml`我的捆绑包

```
services:
  test.common.userservice:
    class:  Test\CommonBundle\Services\UserService
    arguments: 
        entityManager: "@doctrine.orm.entity_manager" 
```

我已经`config.yml`像这样在我的应用程序中导入了那个 .yml

```
imports:
    # a few lines skipped, not relevant here, i think
    - { resource: "@TestCommonBundle/Resources/config/services.yml" } 
```

当我在控制器中调用服务时

```
 $userservice = $this->get('test.common.userservice');
    $userservice->getUser(123); 
```

我得到一个对象（非空），但`$this->em`在 UserService 中为空，正如我已经提到的，从未调用过 UserService 上的构造函数

还有一件事，Controller 和 UserService 在不同的包中（我真的需要它来保持项目的组织性），但仍然：其他一切都很好，我什至可以调用

```
$this->get('doctrine.orm.entity_manager') 
```

在我用来获取 UserService 并获取有效（非空）EntityManager 对象的同一控制器中。

看起来我缺少配置或 UserService 和 Doctrine 配置之间的某些链接。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-05-03T07:58:43.350

你的类的构造方法应该被调用`__construct()`，而不是`__constructor()`：

```
public function __construct(EntityManager $entityManager)
{
    $this->em = $entityManager;
} 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2014-07-22T00:09:30.743

对于现代参考，在 Symfony 2.4+ 中，您不能再命名构造函数注入方法的参数了。根据[文档](http://symfony.com/doc/current/components/dependency_injection/types.html)，您将传入：

```
services:
    test.common.userservice:
        class:  Test\CommonBundle\Services\UserService
        arguments: [ "@doctrine.orm.entity_manager" ] 
```

然后它们将按照通过参数列出的顺序可用（如果有超过 1 个）。

```
public function __construct(EntityManager $entityManager) {
    $this->em = $entityManager;
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-08-29T20:22:58.453

请注意，从 Symfony 3.3 开始，EntityManager 已折旧。请改用 EntityManagerInterface。

```
namespace AppBundle\Service;

use Doctrine\ORM\EntityManagerInterface;

class Someclass {
    protected $em;

    public function __construct(EntityManagerInterface $entityManager)
    {
        $this->em = $entityManager;
    }

    public function somefunction() {
        $em = $this->em;
        ...
    }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-10-21T11:03:19.580

**从 2017 年和 Symfony 3.3**开始，您可以**将 Repository 注册为服务**，并拥有它的所有优势。

**查看我的帖子[How to use Repository with Doctrine as Service in Symfony](https://www.tomasvotruba.cz/blog/2017/10/16/how-to-use-repository-with-doctrine-as-service-in-symfony/)**以获得更一般的描述。

* * *

对于您的具体情况，经过调整的原始代码如下所示：

### 1\. 在您的服务或控制器中使用

```
<?php

namespace Test\CommonBundle\Services;

use Doctrine\ORM\EntityManagerInterface;

class UserService
{
    private $userRepository;

    // use custom repository over direct use of EntityManager
    // see step 2
    public function __constructor(UserRepository $userRepository)
    {
        $this->userRepository = $userRepository;
    }

    public function getUser($userId)
    {
        return $this->userRepository->find($userId);
    }
} 
```

### 2.创建新的自定义存储库

```
<?php

namespace Test\CommonBundle\Repository;

use Doctrine\ORM\EntityManagerInterface;

class UserRepository
{
    private $repository;

    public function __construct(EntityManagerInterface $entityManager)
    {
        $this->repository = $entityManager->getRepository(UserEntity::class);
    }

    public function find($userId)
    {
        return  $this->repository->find($userId);
    }
} 
```

### 3.注册服务

```
# app/config/services.yml
services:
    _defaults:
        autowire: true

    Test\CommonBundle\:
       resource: ../../Test/CommonBundle 
```

# c++ - 如何获取 IP 地址（IPv4 为 NULL，但 IPv6 存在），内容详情

> ID：10427284
> 
> 赞同：0
> 
> 时间：2012-05-03T07:54:24.290
> 
> 标签：c++, c, linux, networking

对不起，标题可能混淆了。例如，eth1 替代 br100。所以eth1的ipv4地址为NULL。

/etc/网络/接口

```
br100 Link encap:Ethernet HWaddr 00:0c:29:75:e2:0a
inet addr:192.168.11.249 Bcast:192.168.11.255 Mask:255.255.255.0 inet6 addr: fe80::20c:29ff:fe75:e20a/64 Scope:Link

eth1 Link encap:Ethernet HWaddr 00:0c:29:75:e2:0a
inet6 addr: fe80::20c:29ff:fe75:e20a/64 Scope:Link 
```

`NULL`当我获得 eth1 的 ipv4 时，如何读取值？

这是我的`getipv4`功能：

```
sIPv4 = new string[giIfaceCount];
struct ifaddrs *ifAddrStruct;
struct ifaddrs *ifa;
void *tmpAddrPtr;
if (getifaddrs(&ifAddrStruct) == -1)
{
    perror("getifaddrs");
    exit(1);
}
int iFlag4 = 0;
for (ifa = ifAddrStruct; ifa != NULL; ifa = ifa->ifa_next)
{
    if (ifa->ifa_addr->sa_family == AF_INET)
    {
        tmpAddrPtr=&((struct sockaddr_in *)ifa->ifa_addr)->sin_addr;
        char addressBuffer[1024];
        if (strcmp(inet_ntop(AF_INET, tmpAddrPtr, addressBuffer, 1024),"NULL") == 0)
        {
            cout << "addressBuffer = NULL" << endl;
        }
        else
        {
            inet_ntop(AF_INET, tmpAddrPtr, addressBuffer, 1024);
            if (strcmp(ifa->ifa_name,"lo") == 0)
            {
                continue;
            }
            else
            {
                *(sIPv4+iFlag4) = addressBuffer;
                testIPv4.append(addressBuffer);
                testIPv4.append(" ");
                iFlag4 = iFlag4+1;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:28:36.480

谢谢大家，我已经解决了我的问题。

简而言之，我将所有功能（关于`getIPv4`，`getMAC`... `getIPv6`）组合成功`getHostinfo`能。然后，它通过一个`for loop`（Interface Count）一一获取主机信息。

最后，我非常感谢所有的人。^__^

# charts - 如何根据 wpf 图表工具包中的图形找到鼠标单击位置坐标

> ID：10427286
> 
> 赞同：0
> 
> 时间：2012-05-03T07:54:28.637
> 
> 标签：charts, wpftoolkit

我正在研究 Wpf 工具包的图表。我将 x 轴设为 Freuency，将 Y 轴设为即时级别。该图是实时图。

我需要知道用户点击的点的坐标。

是否有任何事件引发或任何属性，我可以获得当前鼠标点坐标，或者我需要按照我自己的意思计算它，没有可用的内置方法。

提前致谢。

DJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:02:54.113

我认为这应该有所帮助：

Private Sub GroupChart_MouseLeftButtonDown(sender As Object, e As System.Windows.Input.MouseButtonEventArgs) 处理 GroupChart.MouseLeftButtonDown

```
 Dim SelectedIndex As Integer

    Dim element As DependencyObject = Mouse.DirectlyOver
    While (element IsNot Nothing And Not (TypeOf element Is ScatterDataPoint))
        element = VisualTreeHelper.GetParent(element)
    End While
    If Not IsNothing(element) Then
        Dim foundDataPoint As ScatterDataPoint = element
        Dim foundCanvas = VisualTreeHelper.GetParent(element)

        Dim ChildCount = VisualTreeHelper.GetChildrenCount(foundCanvas)

        For i = 0 To ChildCount - 1

            Dim CurrentContentPresenter = VisualTreeHelper.GetChild(foundCanvas, i)

            If Object.ReferenceEquals(foundDataPoint, CurrentContentPresenter) Then
                SelectedIndex = i
                Exit For
            End If

        Next

    End If

End Sub 
```

# java - 区分继承的类

> ID：10427291
> 
> 赞同：1
> 
> 时间：2012-05-03T07:55:04.227
> 
> 标签：java, extends

我有 3 节课，首先是 Person ：

```
public class Person {    
    Person() {

    }
} 
```

二是人的延伸工程师

```
public class Engineer extends Person { 
    Engineer() {

    } 
} 
```

和 Person 的另一个延伸

```
public class Doctor extends Person {
    Doctor() {

    } 
} 
```

最后一个是接受构造函数 Person 的 Work

```
public class Work {
    Work(Person p) {
    //how to insure that p is Engineer ?
    }
} 
```

如何检测对象 p 是 Engeneer 而不是来自另一个类？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T07:57:23.570

您可以使用`instanceof`关键字来检查对象的类型。它像这样工作

```
if(p instanceof Engineer) {
   // do Engineer stuff
} else {
   // not an Engineer object
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T07:57:55.847

您可以通过以下方式进行检查：

```
if (p instanceof Engineer) 
```

或者

```
if (p.getClass() == Engineer.class) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T07:57:13.050

使用类似的东西：

```
if (p.getClass() == Engineer.class) {
    //Is engineer
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T07:57:21.070

```
public class Work {

    // ensure only Engineer can pass in
    Work(Engineer p) {

    }
} 
```

或使用`instanceof`关键字

> 运算符将`instanceof`对象与指定类型进行比较。您可以使用它来测试对象是类的实例、子类的实例还是实现特定接口的类的实例。

```
public class Work {

    Work(Person p) {
        // make sure p is type of Engineer
        if(p instanceof Engineer) {
            // dowork
            Engineer e = (Engineer) p;
        } else {
            // not engineer or p is null
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T07:57:54.063

```
p.getClass() 
```

（从那里开始，`.getName()`）

或操作员`instanceof`（注意，医生和工程师将返回`instanceOf Person`为真；检查更具体的类）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-03T07:58:13.860

你不应该这样做。

```
Work(Engineer p) {
    // p is an Engineer
} 
```

或者

```
Work(Person p) {
    p.doWork(); // calls the appropriate work methopd for any person.
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-03T07:58:33.227

使用 instanceof 关键字

```
if(p instanceof Engineer) {
    // do something
}

if(p instanceof Doctor) {
    // do something
} 
```

但这不是正确的方法，您应该在工程师类中具有工程师的行为（方法），在博士类中具有医生的行为。

请参阅彼得的回答，运行时多态性将检测自动调用哪个方法。

IE

```
class Engineer extends Person {
    // properties
    // methods
    public void doWork() {
        // does engineering work
    }
}

class Doctor extends Person {
    // properties
    // methods
    public void doWork() {
        // does doctor work like check patients, operation or other his task
    }
}

class Work {
    Work(Person p) {
        p.doWork(); // if you pass engineer obj here, Engineer.doWork() is called. And if you pass doctor, Doctor.doWork() is called.
        // You don't need to use instanceof.
    }
} 
```

在上述情况下，Engineer 和 Doctor 具有相同的方法名称，但在某些情况下您可能需要使用 instanceof，例如 Doctor 将具有 checkPatient() 方法，Engineer 将具有一些不同的方法名称，例如 designEngine()，那么您将不得不使用 instanceof .

# ip - 是否有完美的程序将 IP 更改为 Country（意思是 100%！）？

> ID：10427292
> 
> 赞同：-1
> 
> 时间：2012-05-03T07:55:31.217
> 
> 标签：ip, geoip

我正在使用一个软件（称为 GeoIP）。

它有很多数据库，并且性能比其他数据库好。

但是，对我来说还不够。

这个软件的正确性可能是 99%。

我需要 100% 的准确率。

请让我知道完美的程序。

PS。没关系，该程序不是免费的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:58:20.010

肖特说，这是不可能的。您可以知道 IP 地址最初分配给了哪家公司，但您无法知道该公司使用该 IP 地址做了什么。如果他们把它交给国外的子公司，你就输了。

# c# - 文件存在于使用 C#、asp.net 的服务器上

> ID：10427293
> 
> 赞同：-6
> 
> 时间：2012-05-03T07:55:35.187
> 
> 标签：c#, asp.net

我想检查服务器磁盘上是否存在文件，我正在使用以下代码

```
if (File.Exists(Server.MapPath("~/Jaram Images/") + Path.GetFileName(product.Pic_Url2)))
                                            {
                                                WriteError("File  exist!");

                                                //PdfProdCell = new PdfPCell(iTextSharp.text.Image.GetInstance(Server.MapPath("~/Jaram Images/") + Path.GetFileName(product.Pic_Url2)), true);
                                            }
                                            else
                                                WriteError(Server.MapPath("~/Jaram Images/") + " File doesn't exist!"); 
```

但我收到此错误：

```
public static void WriteError(string errorMessage)
{
    try
    {
        string path = "~/Jaram PDF/PDFS/" + DateTime.Today.ToString("dd-mm-yy") + ".txt";
        if (!File.Exists(System.Web.HttpContext.Current.Server.MapPath(path)))
        {
            File.Create(System.Web.HttpContext.Current.Server.MapPath(path)).Close();
        }
        using (StreamWriter w = File.AppendText(System.Web.HttpContext.Current.Server.MapPath(path)))
        {
            w.WriteLine("\r\nLog Entry : ");
            w.WriteLine("{0}", DateTime.Now.ToString(CultureInfo.InvariantCulture));
            string err = "Error in: " + System.Web.HttpContext.Current.Request.Url.ToString() +
                          ". Error Message:" + errorMessage;
            w.WriteLine(err);
            w.WriteLine("__________________________");
            w.Flush();
            w.Close();
        }
    }
    catch (Exception ex)
    {
        WriteError(ex.Message);
    }

}

Log Entry : 
05/03/2012 15:50:51
Error in: http://localhost/WebStore/AdminNewAccount.aspx?role=+Administrator. Error Message:C:\inetpub\wwwroot\WebStore\Jaram Images\ File doesn't exist! 
```

* * *

我的日志功能喜欢这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T23:24:25.517

因此，据我了解，您会收到“错误”，因为您明确告诉代码即使成功也要编写错误。尝试使您的代码更易于阅读。我设置了一个简单的页面来测试您遇到的问题。在 HTML 中，我有：

```
<body>
<form id="form1" runat="server">
<div>
    <asp:Image runat="server" ID="TestPicture" />
</div>
</form>
</body> 
```

那么下面的代码在 CodeBehind 中。首先，它检查以确保文件是否存在，它将图像的 URL 设置为路径。如果文件不存在，它只是将图像的 URL 设置为“”。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        string serverPath = Server.MapPath("~/Test/") + Path.GetFileName("~/Test/TestImg.jpg");
        string imgUrl = "~/Test/TestImg.jpg";
        if (File.Exists(serverPath))
        {
            TestPicture.ImageUrl = imgUrl;
        }
        else
        {
            TestPicture.ImageUrl = "";
            //TestPicture.Visible = false;
            //TestPicture.ImageUrl = "Picture Not Available.jpg";

            //or do other error checking here
        }
    } 
```

对我来说，当文件存在时，图像会显示在网页上。当文件不存在时，没有可用的图像。我还注释了一些其他可能对您有意义的选项。“Picture Not Available.jpg”可能是一张库存图片，您可以使用它来显示图片不可用。

如果您仍然遇到问题，请确保在代码中放置断点并查看实际发生的情况。

# servlets - 如何将 xml 编码为 Base64 并作为 servlet 响应发回？

> ID：10427295
> 
> 赞同：2
> 
> 时间：2012-05-03T07:55:51.210
> 
> 标签：servlets, groovy, base64

我写了一个 servlet（扩展名为 .groovy），它应该以 Base64 编码返回 xml

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // TODO Auto-generated method stub
    String fileName=(String) request.getParameter("fileName")

    if (fileName == null || fileName.equals(""))throw new ServletException("Invalid or non-existent file parameter in SendXml servlet.")
    if (fileName.indexOf(".xml") == -1)fileName = fileName + ".xml"

    System.out.println(fileName)

    try {

      String relativeWebPath = "/WEB-INF/classes/com/abc/csm/xml/"+fileName
      String absoluteDiskPath = getServletContext().getRealPath(relativeWebPath)

      String fileContents=new File(absoluteDiskPath).text
      response.setContentType("text/xml")
      response.addHeader("Content-Disposition", "attachment filename="+ fileName)

      XmlHandler xm=new XmlHandler()

      PrintWriter out = response.getWriter()
      String enxml=xm.encodeBase64(fileContents)
      response.setContentLength((int) enxml.length)

      out.println(enxml)
      out.close()
      out.flush()
    } catch (Exception e) {       println e     } 
} 
```

XmlHandler encodeBase64 方法

```
def encodeBase64(String text) {
    return new String(Base64.encodeBase64(text.getBytes()))
} 
```

但我想有些东西不见了。请帮忙

**更新**

另外请评论从包中访问文件的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T08:13:57.193

您可以更换：

```
 String enxml=xm.encodeBase64(fileContents) 
```

和

```
 String enxml = fileContents.bytes.encodeBase64() 
```

或者，最好将编码传递给调用`getBytes`：

```
 String enxml = fileContents.getBytes( 'UTF-8' ).encodeBase64() 
```

另外，我相信您`attachment`的标题后面缺少分号...该行应为：

```
 response.addHeader( "Content-Disposition", "attachment; filename=$fileName" ) 
```

* * *

### 编辑、编解码示例：

编码：

```
String encoded = "tim_yates".getBytes( 'UTF-8' ).encodeBase64() 
```

解码：

```
String original = new String( encoded.decodeBase64(), 'UTF-8' )
assert original == 'tim_yates' 
```

# android - 如何将动画放在前面：bringToFront 和 zAdjustment/Z-ordering

> ID：10427298
> 
> 赞同：2
> 
> 时间：2012-05-03T07:56:00.867
> 
> 标签：android, animation, z-order

我有一个 LinearLayout，其中有两个视图，彼此相邻。当一个视图被点击时，它会动画到全屏。这对于右侧的视图来说很好，但对于左侧的视图却失败了：

**我无法在右视图之上为左视图设置动画**

不用bringToFront() 破坏我的布局。调整我的动画的 Z 顺序似乎不起作用。

不是解决方案：当我在左视图上使用“brintToFront()”时问题就消失了，但这会导致我的布局之后完全损坏，并且没有 brintToBack() 函数或任何其他功能。=> brintToFront = 不是一个好的解决方案？

调整我的动画的 Z 顺序似乎不起作用（不会改变任何东西）。

```
scaleAnimation.setZAdjustment(Animation.ZORDER_TOP);
translateAnimation.setZAdjustment(Animation.ZORDER_TOP);
AnimationSet set = new AnimationSet(true);
set.addAnimation(scaleAnimation);
set.addAnimation(translateAnimation);
set.setZAdjustment(AnimationSet.ZORDER_TOP);
myFrameLayout.startAnimation(set); 
```

为什么 Z 排序不能按预期工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-25T00:55:19.017

如果您扩展 LinearLayout 并覆盖以下方法，这应该是可能的：

```
getChildDrawingOrder (int childCount, int i) 
```

要确保布局使用您的功能，您需要调用 setChildrenDrawingOrderEnabled(true)

请参阅[视图组](http://developer.android.com/reference/android/view/ViewGroup.html#getChildDrawingOrder%28int,%20int%29%20ViewGroup)javadoc

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T15:44:33.327

对于您的 z 重新排序将适用，您需要在视图上请求新的布局，但在开始动画之前尝试这样做：

```
AnimationSet set = new AnimationSet(true);
// init animation ...
scaledView.bringToFront();
scaledView.requestLayout();
myFrameLayout.startAnimation(set); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T14:55:42.117

我想这个问题没有好的答案。

我现在也在为屏幕上的其他所有内容设置动画，所以如果视图 1 必须在视图 2 之上变得比我也为视图 2 设置动画更大，那么看起来视图 1 在视图 2 之上增长，而实际上视图 2 越来越小，而视图 1 越来越大。

相当多的工作和一个糟糕的解决方案，但我想这是唯一的解决方案。

# php - 使用同位素和帖子视图的 Wordpress 主题

> ID：10427301
> 
> 赞同：0
> 
> 时间：2012-05-03T07:56:03.930
> 
> 标签：php, javascript, css, wordpress, jquery-isotope

我在我的 wordpress 主题上使用同位素过滤。帖子显示为框并按类别过滤。

我想根据帖子视图的数量更改框的大小（添加一个额外的 css 类），以便访问量最大的帖子是最大的等等......

关于如何获取帖子查看次数并根据查看次数设置此附加类的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:15:29.663

首先，您需要跟踪查看次数。
看看这个：在[不使用插件的情况下跟踪帖子视图](http://www.catswhocode.com/blog/super-useful-wordpress-hacks-and-snippets)（需要滚动）
首先运行它。

# java - 向玩家发送消息时出现问题

> ID：10427302
> 
> 赞同：0
> 
> 时间：2012-05-03T07:56:04.970
> 
> 标签：java, file, search

我的 bukkit 插件有问题。我尝试做的是搜索一个文件，并逐行读取它（有效），然后如果该行中有一些文本，它必须返回该行，但它还必须返回所有其他行该文件中也包含该特定文本。当我有这些行时，我必须将这些行在消息中发送给播放器，这不是问题，但是当我发送我现在得到的行时，“\n”不起作用，这是代码我现在用：

```
 public String searchText(String text, String file, Player p)
    {
        String data = null;

        try {
            BufferedReader br = new BufferedReader(new FileReader(file));
            String line = null;

            while((line = br.readLine()) != null)
            {
                if(line.indexOf(text) >= 0)
                {
                    data += System.getProperty("line.separator") + line + System.getProperty("line.separator");
                }
                p.sendMessage("+++++++++++GriefLog+++++++++++");
                p.sendMessage(data);
                p.sendMessage("++++++++++GriefLogEnd+++++++++");
            }

            br.close();

        } catch (Exception e) {
            e.printStackTrace();            
        }

        return "";
    } 
```

返回的意思是空的，因为信息返回给玩家有点高：P 现在的问题是，我如何在数据变量中添加一个“\n”，因为当我在其余部分使用这个函数时我的代码，它给出了很多行，但没有“\ n”，那么我该如何输入呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:53:03.743

由于您的方法不应该返回任何内容，因此请删除您的 return 语句并将返回类型设置为 void。看起来您的代码会为您的搜索词出现的每一行输出一次数据字符串，请尝试：

```
data = "";
while((line = br.readLine()) != null)
{
    if(line.indexOf(text) >= 0)
    {
        //remove the first System.getProperty("line.separator") if
        //you don't want a leading empty line
        data += System.getProperty("line.separator") + line + 
            System.getProperty("line.separator");
    }
}
if (data.length() > 0) {
    p.sendMessage("+++++++++++GriefLog+++++++++++");
    p.sendMessage(data);
    p.sendMessage("++++++++++GriefLogEnd+++++++++");
} 
```

# ruby-on-rails - 无法在 before_save 修改变量？

> ID：10427307
> 
> 赞同：0
> 
> 时间：2012-05-03T07:56:22.243
> 
> 标签：ruby-on-rails, ruby, database, ruby-on-rails-3, activerecord

我的模型中有 ff 代码：

```
before_save :before_save_method

attr_accessor :corrective_change
attr_accessible :corrective_change
attr_accessible :corrective_desc

  private 
    def before_save_method
      if corrective_change == 0
        self.corrective_desc = corrective_desc_was
      end
    end 
```

但是，无论 的值`corrective_change`是多少，它的值`self.corrective_desc`仍然会根据用户的输入值进行更新。

所有变量的值都经过测试，我可以在记录器中正常查看它们，但条件不起作用。

谁能指出问题是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:22:12.160

1）您确定 Corrective_change 是整数而不是字符串？（比较 int 和 string = 失败）

2）这是一个新记录吗？如果是这样，corrective_desc_was 可能不存在（它不会在 2.3 中，不确定 3.x）

3）考虑尝试这个：

```
def before_save_method
  if self.corrective_desc_changed? && self.corrective_change == 0
    self.corrective_desc = self.corrective_desc_was
  else
    logger.info "corrective_desc not changed or corrective_change != 0"
  end
end 
```

4）此外，如果它是纠正性更改，那么可能 before_update 会比 before_save 更合适，因为这也会在创建时调用。

# c# - 从 C# 中的枚举创建 RadioButtons

> ID：10427308
> 
> 赞同：1
> 
> 时间：2012-05-03T07:56:23.383
> 
> 标签：c#, wpf, data-binding, enums, radio-button

我想用与枚举值对应的对象填充`StackPanel`a `RadioButton`。每个按钮的处理程序都应该运行一个任意计算，该计算采用相应的枚举值。

这是我想出的方法：

```
void EnumToRadioButtonPanel(Panel panel, Type type, Action<int> proc)
{
    Array.ForEach((int[])Enum.GetValues(type),
        val =>
        {
            var button = new RadioButton() { Content = Enum.GetName(type, val) };
            button.Click += (s, e) => proc(val);
            panel.Children.Add(button);
        });
} 
```

例如，假设我想要`RadioButton`s 作为 enum `FigureHorizontalAnchor`。我希望每个按钮的操作来设置`HorizontalAnchor`特定`Figure`调用的属性`figure`。这是我调用的方式`EnumToRadioButtonPanel`：

```
var figure = new Figure();

var stackPanel = new StackPanel();

EnumToRadioButtonPanel(stackPanel, typeof(FigureHorizontalAnchor),
    val =>
    {
        figure.HorizontalAnchor = (FigureHorizontalAnchor)
            Enum.ToObject(typeof(FigureHorizontalAnchor), val);
    }); 
```

我的问题是，有没有更好的方法来做到这一点？我应该改用“绑定”技术吗？`RadioButton`我在这里看到了一些关于 SO 的相关问题，但它们涉及在 XAML 中布置s ；我想通过 C# 中的代码来做到这一点。

这是上述内容的完整可运行演示。XAML：

```
<Window x:Class="EnumToRadioButtonPanel.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

</Window> 
```

后面的代码：

```
using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;

namespace EnumToRadioButtonPanel
{
    public partial class MainWindow : Window
    {
        void EnumToRadioButtonPanel(Panel panel, Type type, Action<int> proc)
        {
            Array.ForEach((int[])Enum.GetValues(type),
                val =>
                {
                    var button = new RadioButton() { Content = Enum.GetName(type, val) };
                    button.Click += (s, e) => proc(val);
                    panel.Children.Add(button);
                });
        }

        public MainWindow()
        {
            InitializeComponent();

            var figure = new Figure();

            var stackPanel = new StackPanel();

            Content = stackPanel;

            EnumToRadioButtonPanel(stackPanel, typeof(FigureHorizontalAnchor),
                val =>
                {
                    figure.HorizontalAnchor = (FigureHorizontalAnchor)
                        Enum.ToObject(typeof(FigureHorizontalAnchor), val);
                });

            var label = new Label();

            stackPanel.Children.Add(label);

            var button = new Button() { Content = "Display" };

            button.Click += (s, e) => label.Content = figure.HorizontalAnchor;

            stackPanel.Children.Add(button);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:11:50.723

As you suggest, there is more "WPF" ways to do it.

Do not create controls by code. It was somewhat ok with *WinForms*, but it's not how you wanna do it in *WPF*.

If you want to create a collection of controls out of a list of item, use `ItemsControl`:

```
<ItemsControl Source="{Binding ItemsIWantToCreateControlsFor}">
  <ItemsControl.ItemTemplate>
    <DataTemplate>
      <RadioButton
        Content="{Binding APropertyDefinedInMyItem}"
        Command="{Binding ACommandDefinedInMyItemThatIsExecutedWhenPressed}"/>
    </DataTemplate>
  </ItemsControl.ItemTemplate>
</ItemsControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:31:47.687

这是另一个版本，`EnumToRadioButtonPanel`它似乎通过对类型进行泛型来产生更清晰的代码。

```
void EnumToRadioButtonPanel<T>(Panel panel, Action<T> proc)
{
    Array.ForEach((int[])Enum.GetValues(typeof(T)),
        val =>
        {
            var button = new RadioButton() { Content = Enum.GetName(typeof(T), val) };
            button.Click += (s, e) => proc((T)Enum.ToObject(typeof(T),val));
            panel.Children.Add(button);
        });
} 
```

在这个版本中，调用`EnumToRadioButtonPanel`看起来像这样：

```
EnumToRadioButtonPanel<FigureHorizontalAnchor>(
    stackPanel,
    val => figure.HorizontalAnchor = val); 
```

代替：

```
EnumToRadioButtonPanel(stackPanel, typeof(FigureHorizontalAnchor),
    val =>
    {
        figure.HorizontalAnchor = (FigureHorizontalAnchor)
            Enum.ToObject(typeof(FigureHorizontalAnchor), val);
    }); 
```

下面是整个例子。XAML：

```
<Window x:Class="EnumToRadioButtonPanel.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

</Window> 
```

C＃：

```
using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;

namespace EnumToRadioButtonPanel
{
    public partial class MainWindow : Window
    {
        void EnumToRadioButtonPanel<T>(Panel panel, Action<T> proc)
        {
            Array.ForEach((int[])Enum.GetValues(typeof(T)),
                val =>
                {
                    var button = new RadioButton() { Content = Enum.GetName(typeof(T), val) };
                    button.Click += (s, e) => proc((T)Enum.ToObject(typeof(T),val));
                    panel.Children.Add(button);
                });
        }

        public MainWindow()
        {
            InitializeComponent();

            var figure = new Figure();

            var stackPanel = new StackPanel();

            Content = stackPanel;

            EnumToRadioButtonPanel<FigureHorizontalAnchor>(
                stackPanel,
                val => figure.HorizontalAnchor = val);

            var label = new Label();

            stackPanel.Children.Add(label);

            var button = new Button() { Content = "Display" };

            button.Click += (s, e) => label.Content = figure.HorizontalAnchor;

            stackPanel.Children.Add(button);
        }
    }
} 
```

# c# - 在 Visual Studio 中选择“添加新项”并选择“组件类”时会生成什么代码？

> ID：10427322
> 
> 赞同：2
> 
> 时间：2012-05-03T07:57:30.200
> 
> 标签：c#, .net, visual-studio, visual-studio-express

我问的原因是**Visual Studio Express**在选择“添加新项目”时缺少此项目。

因此，我想手动创建它，但我不知道要添加什么代码。

如果具有专业或更高版本的人会粘贴添加“组件类”时生成的 C# 代码，我真的会很高兴

**解决方案**

使用答案中的代码，但要获得组件的可视化部分，必须创建用户控件，而不仅仅是一个常规类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:00:37.977

代码部分

组件1.cs

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Diagnostics;
using System.Linq;
using System.Text;

namespace blabla
{
    public partial class Component1 : Component
    {
        public Component1()
        {
            InitializeComponent();
        }

        public Component1(IContainer container)
        {
            container.Add(this);

            InitializeComponent();
        }
    }
} 
```

编辑：

Component1.Designer.cs

```
namespace blabla
{
    partial class Component1
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary> 
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Component Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            components = new System.ComponentModel.Container();
        }

        #endregion
    }
} 
```

但是有一个视觉部分你会错过......

# scala - 命令式与功能式示例

> ID：10427323
> 
> 赞同：4
> 
> 时间：2012-05-03T07:57:30.463
> 
> 标签：scala, functional-programming, imperative-programming

我有一个以命令式和功能性（我在这里尽了最大努力）方式实现的方法。该方法遍历 ArrayBuffer[Creature]，计算到每个生物的距离并返回最近的或无（如果世界上没有生物，除了“this”）。

至关重要的：

```
private def closestEnemy: Option[Creature] = {
  var closest: Option[Creature] = None
  var distanceToClosest = Int.MaxValue

  for(creature <- game.creatures if creature != this) {
    val distance = distanceTo(creature)

    if(distance < distanceToClosest) {
      closest = Some(creature)
      distanceToClosest = distance
    }
  }

  closest
} 
```

功能：

```
private def closestEnemy: Option[Creature] =
  game.creatures filter { _ != this } map { creature => (creature, distanceTo(creature)) } match {
    case creaturesWithDistance if creaturesWithDistance.isEmpty => None
    case creaturesWithDistance => Some(creaturesWithDistance minBy { _._2 } _1)
  } 
```

功能代码看起来不那么明显（可能可以简化，但我不知道如何简化）而且我不确定我是否能够在一个月内快速阅读它。我的问题是习惯或功能问题不适合这种特殊情况吗？刚开始使用 Scala 的时候，你有没有这样的疑惑？一段时间后，您的功能技能是否有很大提高并完全击败了命令式方法？请发表您的经验。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T08:29:09.133

您可以使用 collect 更简单地执行此操作：

```
game.creatures collect { case creature if creature != this => (creature, distanceTo(creature)) } 
```

`collect`接受 a`PartialFunction`并且只会返回定义此函数的值，因此`creature == this`不会返回。

你也可以更换

```
case creaturesWithDistance if creaturesWithDistance.isEmpty => None 
```

和

```
case Seq() => None 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T09:58:20.767

如果您的主要目标是可读性，则以下内容将提供与您的代码相同的输出：

```
private def closestEnemy =
  game.creatures.filterNot(_ == this).sortBy(distanceTo).headOption 
```

这对我来说似乎非常清楚 - 几乎没有语法噪音，特别是与您的命令式版本相比。

不幸`sortBy`的是比 更昂贵`minBy`，更不幸的`minBy`是，Scala Collections API 中没有“安全”（其中“安全”意味着它`Option`在空列表上调用时返回一个空的）。不过，以下情况并不太可怕：

```
private def closestEnemy = game.creatures.filterNot(_ == this) match {
  case creatures if creatures.nonEmpty => Some(creatures.minBy(distanceTo))
  case _ => None
} 
```

因此，在这种情况下，您遇到了 Collections API 的合法缺点（否`safeMinBy`），但我个人仍然更喜欢维护此代码而不是您的命令式版本。

* * *

作为脚注：值得注意的是，您可以使用[pimp-my-library 模式](http://www.artima.com/weblogs/viewpost.jsp?thread=179766)来“修复”集合 API。只需将以下内容放在范围内：

```
implicit def makeSeqSafer[A](xs: Seq[A]) = new {
  def safeMinBy[B: Ordering](f: A => B) =
    if (xs.isEmpty) None else Some(xs.minBy(f))
} 
```

现在你有了一个安全、高效的`minBy`：

```
scala> List(1, 2, 3).safeMinBy(_ * 2)
res0: Option[Int] = Some(1)

scala> List.empty[Int].safeMinBy(_ * 2)
res1: Option[Int] = None 
```

在你的情况下：

```
private def closestEnemy =
  game.creatures.filterNot(_ == this).safeMinBy(distanceTo) 
```

# android - 无法在 Google Play 上更新我的应用

> ID：10427325
> 
> 赞同：0
> 
> 时间：2012-05-03T07:57:39.477
> 
> 标签：android, apk

我最近在Google play上上传了一个应用程序，几天后，我想发布一个新版本。我将版本代码更改为 2 并更改了应用程序的版本，对其进行签名然后尝试上传 apk 但 Google Play 显示此错误：`The new apk's versionCode (1) already exists.`

这是我的 AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest android:versionCode="2" android:versionName="1.2.0.028" android:installLocation="auto" package="co.autospace.mobile"
  xmlns:android="http://schemas.android.com/apk/res/android">
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <permission android:name="com.conduit.app_42978eedd3af493dbefa66ca078e6e61.app.permission.C2D_MESSAGE" android:protectionLevel="signature" />
    <uses-permission android:name="com.conduit.app_42978eedd3af493dbefa66ca078e6e61.app.permission.C2D_MESSAGE" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <application android:label="@string/app_name" android:icon="@drawable/icon" android:name="www.conduit.app.ConduitApp" android:debuggable="true">
        <activity android:label="@string/app_name" android:name="www.conduit.app.ConduitMainAct" android:launchMode="singleTop" android:configChanges="keyboardHidden|orientation">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="www.conduit.app.pgplugins.exbrowse.FullScrExternalBrowser" android:configChanges="keyboardHidden|orientation" />
        <activity android:theme="@android:style/Theme.Dialog" android:name="www.conduit.app.pgplugins.exbrowse.ModalExternalBrowser" android:configChanges="keyboardHidden|orientation" />
        <receiver android:name="www.conduit.app.C2DMReceiver" android:permission="com.google.android.c2dm.permission.SEND">
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <category android:name="com.conduit.app_42978eedd3af493dbefa66ca078e6e61.app" />
            </intent-filter>
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                <category android:name="com.conduit.app_42978eedd3af493dbefa66ca078e6e61.app" />
            </intent-filter>
        </receiver>
        <service android:name="www.conduit.app.pgplugins.media.AudioService" />
    </application>
    <uses-sdk android:minSdkVersion="7" />
</manifest> 
```

请告诉我它有什么问题。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-26T09:32:17.770

您必须在 Andriod Studio 的 build.gradle 中更改您的版本代码。然后我可以成功上传新的apk。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T08:02:58.790

看起来您正在上传版本代码为 1 的 apk。当您生成 apk 时要小心，更改代码版本，运行 clean 并构建，运行应用程序，导出 apk。不要覆盖以前的 apk，而是创建一个新的。我希望它会有所帮助。

# c# - C# EmguCV Image.setValue(...) 方法的 C++ OpenCV 等效项

> ID：10427338
> 
> 赞同：0
> 
> 时间：2012-05-03T07:58:16.950
> 
> 标签：c#, c++, opencv, emgucv

如果有人可以分享代码

C# EmguCV 框架中 Image.setValue(...) 方法的 C++(OpenCV) 等效项是什么。emgucv 参考： [http ://www.emgu.com/wiki/files/2.3.0/document/Index.html](http://www.emgu.com/wiki/files/2.3.0/document/Index.html)

例如接下来如何用 C++ 编写代码：

```
 private static Image<Gray, Byte> FilterPlate(Image<Gray, Byte> plate)
 {
  ...
  Image<Gray, Byte> thresh = plate.ThresholdBinaryInv(new Gray(120), new Gray(255));
  using (Image<Gray, Byte> plateMask = new Image<Gray, byte>(plate.Size))
  plateMask.SetValue(255.0);
  ...
  thresh.SetValue(0, plateMask);
  } 
```

尤其是接下来的 C++ 等价物是什么：

```
 thresh.SetValue(0, plateMask); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:46:27.413

我没有使用 EmguCV，但正如文档所说

```
 thresh.SetValue(0, plateMask); 
```

> 使用特定掩码将 Array 的元素设置为 val

所以，我认为，你可以使用

> void cvSet(CvArr* arr, CvScalar 值, const CvArr* mask=NULL)
> 
> ```
> Sets every element of an array to a given value. 
> ```

[http://opencv.willowgarage.com/documentation/operations_on_arrays.html#set](http://opencv.willowgarage.com/documentation/operations_on_arrays.html#set)

例子：

```
cvSet(thresh, CvScalar(0), plateMask); 
```

# c++ - 什么是“std::vector” 数据=示例”？

> ID：10427339
> 
> 赞同：-1
> 
> 时间：2012-05-03T07:58:17.200
> 
> 标签：c++

```
std::vector<unsigned char> Data = example 
```

我在互联网上的某个地方找到了这个，我认为它会将一个未知大小的字节数组写入给定地址，但我并不完全确定。谁能解释这是做什么的？

如果这不符合我的想法，那么有人可以帮助我生成一个 C++ 函数，该函数将地址和字节作为参数并将它们写入该地址，即：

```
myfunction(0xaddress, {0x10, 0x11, 0x12}); // something like this 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:02:50.460

向量的 = 运算符将复制右值的内容（假设右值是具有相同类型的向量类型或实现从相同类型转换为向量的类）。

这里没有地址被复制，只有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T08:39:06.790

如果要将 x 数量的字节写入地址，则有多种选择。

```
void myfunction(void* address, size_t count, const unsigned char data[])
{..}

const unsigned char bytes[] = {0x10, 0x11, 0x12};
myfunction (address, 3, bytes); 
```

其中第二个参数 count 是数组的长度。
或使用可变参数函数：

```
void myfunction(void* address, size_t count, ...)
{..}

myfunction (address, 3, 0x10, 0x11, 0x12); 
```

在所有情况下，您都需要明确给出字节数；编译器无法从数据中推断出这一点。

如果您想使用向量，这是可能的，但您需要在调用函数之前先填充向量，这样效率不高。

您不需要自己提供计数的唯一情况是，如果没有一个字节的值为 0，那么您可以编写

```
void myfunction(void* address, const char* str)
{..}

myfunction (address, "\x10\x11\x12"); 
```

因为你可以使用 strlen！

编辑：另外，`std::basic_string<unsigned char>`值得研究。但是在这里，给它一个包含`\x00`值的值也不是微不足道的。

# objective-c - 扩展核心数据生成的 NSManagedObject 类

> ID：10427340
> 
> 赞同：4
> 
> 时间：2012-05-03T07:58:19.853
> 
> 标签：objective-c, core-data, categories, nsmanagedobject, mogenerator

我第一次处理 Core Data，我想知道扩展 Xcode 为我的 NSManagedObject 实体生成的类的最佳实践是什么。

我看到了[mogenerator](https://github.com/rentzsch/mogenerator#readme)并且我也一直在使用与[SUPER HAPPY EASY FETCHING IN CORE DATA](http://www.cimgf.com/2011/03/13/super-happy-easy-fetching-in-core-data/)中建议的方法类似的方法。所以我有三种课程：

*   EasyFetching 类（只有一个类）；
*   一个生成的 NSManagedObject 子类（即：_Entity）；
*   具有一些自定义方法的自定义子类，例如查找所有非活动对象、清除对象的缓存等（即：实体）。

这种方法让我可以编写一些自定义代码，同时我可以重构我的核心数据实体并根据需要多次生成它。但是我也遇到了一些问题，比如无法为我的实体声明对象级方法（因为 NSManagedObjectContext 只知道我的 _Entity 类）。

现在我正在使用类别来扩展我的实体功能。这工作得更好，因为我可以有自定义对象级别的方法。我现在有三种类：

*   EasyFetching 类别（因为它有很多我所有的自定义代码都使用的方法）；
*   一个生成的 NSManagedObject 子类（即：Entity）；
*   我的 NSManagedObject 实体的自定义类别（即：Entity+Custom.h）。

我的问题是：你会推荐什么？

提前感谢您的回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:34:15.697

既然您已经发布了您的问题作为我的问题的答案[，](https://stackoverflow.com/questions/12577966/should-we-create-model-classes-when-we-use-core-data)我想我应该回答您的问题:)

Mogenerator看起来不错，试试看。

此外，您建议的类别方式也是一个不错的选择。

Infact here是一个[链接](http://www.sunetos.com/items/2011/07/24/how-to-use-custom-classes-with-core-data-without-fear/)，它准确地解释了如何这样做。

# foursquare - foursquare api 场地详情特价附近未退换货

> ID：10427345
> 
> 赞同：1
> 
> 时间：2012-05-03T07:58:35.020
> 
> 标签：foursquare

在进行 Foursquare 场地详情 API 调用时，json 响应中不存在 specialsNearby 字段。我尝试了数百个不同的场所，但没有一个包含此字段（尽管它们确实包含“特价”字段）。

我正在使用foursquare API的v2，并给它一个版本字符串v = 20120417。

在获得附近特价商品的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T18:05:00.003

看起来我们已经停止发送 specialsNearby 字段——一旦我可以与其他一些开发人员确认，我们将相应地更新文档。

**编辑：**我们确实弃用了这个字段，转而支持下面的探索端点。

但是，不用担心——有一种简单的方法可以获取相同的信息！

查看我们的探索端点——https: [//developer.foursquare.com/docs/venues/explore](https://developer.foursquare.com/docs/venues/explore)

将“intent=specials”传递给该端点，您将获得附近的所有特价商品。

# android - 从 SQLite 填充 CheckList

> ID：10427346
> 
> 赞同：0
> 
> 时间：2012-05-03T07:58:37.387
> 
> 标签：android, sqlite

我想从我的数据库中填充一个列表。

我有以下代码：

```
setContentView(R.layout.pro);
    addProFromDB();

} 
```

我应该如何填充多*xCodexInlinexPlacexHolderx*？

```
private void addProFromDB() {
    // TODO Auto-generated method stub

    ArrayList<String> results = new ArrayList<String>();
    SQLiteDatabase sampleDB = null;

    try {
        list = (ListView)findViewById(android.R.id.list);
        list.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
        sampleDB = this.openOrCreateDatabase(SAMPLE_DB_NAME, 1, null);
        sampleDB.execSQL("create table tbl_product("
                + "pro_id integer PRIMARY KEY autoincrement,"
                + "pro_name text," + "pro_price integer);");

        sampleDB.execSQL("insert into tbl_product(pro_name, pro_price) values ('oil', '200' );");

        Cursor c = sampleDB.query(SAMPLE_TABLE_NAMES, null, null, null, null, null,
                null);
        char pro_nameColumnIndex = (char) c.getColumnIndexOrThrow("pro_name");
        int pro_priceColumnIndex = (int) c.getColumnIndexOrThrow("pro_price");

    } finally {
        if (sampleDB != null)
        sampleDB.close();
    }
    setListAdapter(new ArrayAdapter<String>(this,
        android.R.layout.simple_list_item_checked, new ArrayList())); 
```

它没有给出任何错误，但也没有显示插入的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:08:57.493

您的代码段中存在许多问题。

1.  `tbl_product`每次运行应用程序时，您都在创建表。
2.  您每次都在新创建的表中插入新元素。
3.  最后你将空数组传递给你的`ArrayAdapter`as `new ArrayList()`

我建议您阅读任何教程，并逐步解决问题。

我建议您遵循[本教程](http://www.vogella.com/articles/AndroidSQLite/article.html#overview)，并`CursorAdapter`在使用 sqlite 时使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:28:05.880

我将修改您的代码，现在您可以检查并使用此代码，这可能对您有所帮助..

```
private void addProFromDB() {
// TODO Auto-generated method stub

ArrayList<String> results = new ArrayList<String>();
SQLiteDatabase sampleDB = null;

try {
    list = (ListView)findViewById(android.R.id.list);
    sampleDB = this.openOrCreateDatabase(SAMPLE_DB_NAME, 1, null);
    sampleDB.execSQL("create table if not exists tbl_product("
            + "pro_id integer PRIMARY KEY autoincrement,"
            + "pro_name text," + "pro_price integer);");

    sampleDB.execSQL("insert into tbl_product(pro_name, pro_price) values ('oil', '200' );");

    Cursor c = sampleDB.query(SAMPLE_TABLE_NAMES, null, null, null, null, null,
            null);
    char pro_nameColumnIndex = (char) c.getColumnIndexOrThrow("pro_name");
    int pro_priceColumnIndex = (int) c.getColumnIndexOrThrow("pro_price");

ArrayList list = new ArrayList()
list.add(pro_nameColumnIndex);
list.add(pro_priceColumnIndex);
setListAdapter(new ArrayAdapter<String>(this,
    android.R.layout.simple_list_item_checked, list));

} finally {
    if (sampleDB != null)
    sampleDB.close();
} 
```

# tomcat - 将单个 servlet 映射到根级别的 Tomcat URL

> ID：10427347
> 
> 赞同：0
> 
> 时间：2012-05-03T07:58:37.903
> 
> 标签：tomcat, mapping

这应该很快；只需要在短时间内得到答复...

我必须对部署在 Tomcat 5.5.16（在 IIS 之后）下的 webapp 进行一些维护。它当前设置了以下格式的 URL：

[http://server.com/myapp/UglyServletName1](http://server.com/myapp/UglyServletName1)

...他们只是希望它成为

[http://server.com/Friendly](http://server.com/Friendly)

显然，web.xml 中的 servlet-mapping 标记不足以映射 /myapp 之外的 URL。基本上，我只需要知道 - 是否有一种简单的方法可以在 Tomcat 中作为 url-pattern 或类似映射来执行此操作，或者在 IIS（或 Jakarta ISAPI 插件）中更容易做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:02:04.310

您可以使用[Tuckey 的 URL Rewrite Filter](http://www.tuckey.org/urlrewrite/)。

# reporting-services - 变量月 mmm 并附加到 SQL 选择 Reporting design Studio 2005 中的静态文本字段

> ID：10427352
> 
> 赞同：0
> 
> 时间：2012-05-03T07:59:13.657
> 
> 标签：reporting-services, reportingservices-2005, qlikview

我有一个字段名称为“SSBJAN”、“SSBFEB”、“SSMAR”等的预算表

我的选择查询在下面可以正常工作，我目前每月手动更改“SSBMAY”：

```
SELECT  SADIVO AS Division, SAWHSL AS Location, SSBMAY as BudgetSales, 
FROM BBSCDTA.SA04WH 
```

我希望从`Month(Today())`当前月份'mmm'中获取它，以便我可以将其附加到 SSB，以便它自动从表中选择当前月份。

下面我在 QlikView 编码中创建了它，但无法在报表设计器 SQL 中使用它。

我的 Qlikview 代码

```
Let Today='03/05/2012';
  let CalBud1=Upper(Month(Today()));
    let SSB=Upper('SSB');
let vCalBud=SSB&CalBud1; 
```

这将返回“SSBMAY”，下个月将返回“SSBJUN”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:43:37.553

假设您想要查询 T-SQL（Microsoft 的 SQL 方言）

```
SELECT
  SADIVO AS Division,
  SAWHSL AS Location,
  CASE MONTH(GETDATE())
   WHEN 1 THEN SSBJAN
   WHEN 2 THEN SSBFEB
   WHEN 3 THEN SSBMAR
   WHEN 4 THEN SSBAPR
   WHEN 5 THEN SSBMAY
   WHEN 6 THEN SSBJUN
   WHEN 7 THEN SSBJUL
   WHEN 8 THEN SSBAUG
   WHEN 9 THEN SSBSEP
   WHEN 10 THEN SSBOCT
   WHEN 11 THEN SSBNOV
   WHEN 12 THEN SSBDEC
   END as BudgetSales 
FROM BBSCDTA.SA04WH 
```

# sql - 电话簿和数据库：最好的选择是什么？

> ID：10427353
> 
> 赞同：1
> 
> 时间：2012-05-03T07:59:22.963
> 
> 标签：sql, database, ldap

我目前正在开发一个需要创建数据库的开发项目（我将使用 Postgre）。
该数据库的一部分必须为每个公司以及每个用户存储电话簿。这两种“类型”的电话簿存储在两个表中，尽管它们包含相同类型的信息：

```
PersonalPhoneBook(IdOwner, IdUser) 
  //Ids of the owner and a user he's in contact with.

CompanyPhoneBook(IdCompany, IdUser)
  //Ids of the company and a user it's in contact with 
```

将通过以下请求检索个人电话簿：

```
SELECT * F
ROM User 
WHERE IdUser IN 
  (SELECT IdUser FROM PersonalPhoneBook WHERE IdOwner = x); 
```

（这个请求没有优化，但你明白了要点）。

我还应该提到，由于这三个表，每个用户和公司都拥有他们想要的尽可能多的详细信息（电话号码、地址……）：

```
ContactDetail(IdContactDetail, LbContactDetail, ValueContactDetail)

Company_ContactDetail(IdCompany, IdContactDetail)

User_ContactDetail(IdUser, IdContactDetail) 
```

现在，我在该模型中没有考虑到一些事情：用户和公司希望在他们的电话簿中包括一些不是数据库用户的人。

所以我一直在探索几种解决方案，我需要建议来确定哪个是最好的：

*   制作另外两个表来存储这些“局外人”的固定数量的详细信息（2 个电话号码，1 个地址）。

*   让所有“局外人”用户（但我发现将它们存储在一起非常难看）

*   为每个公司和每个用户存储一个独立的电话簿（LDAP 类型）（然后复制数据）

*   保留公司和用户的详细联系信息系统，并为其他人使用 LDAP 系统

*   其他...？

# iphone - 用于 Objective-C 的 Orkut/Flickr 框架

> ID：10427354
> 
> 赞同：0
> 
> 时间：2012-05-03T07:59:23.460
> 
> 标签：iphone, objective-c, ios, xcode

我知道 iPhone 中的 Google+、Facebook 和 Twitter 框架。但对于我的新应用程序要求是用户应该能够通过 FB/Twitter/G+/Orkut/Flickr 发帖。

Orkut/Flickr有没有这样**的框架，**而不是 FB/Twitter/G+ 或者，我是否需要将用户重定向到 Orkut/Flickr 并将其作为 webview 中的传统做法放在 UIWebView 中。

提前感谢您的帮助:)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:07:05.917

你甚至在谷歌上搜索过这个：

Flickr：[http](http://www.flickr.com/groups/api/discuss/72157616815681140/) ://www.flickr.com/groups/api/discuss/72157616815681140/ 图书馆直接链接：[https ://github.com/lukhnos/objectiveflickr](https://github.com/lukhnos/objectiveflickr)

Orkut API：[https ://developers.google.com/orkut/](https://developers.google.com/orkut/)

# ruby-on-rails - 过滤器仅适用于 Rails 中的轮胎和 ElasticSearch 的一个模型

> ID：10427355
> 
> 赞同：5
> 
> 时间：2012-05-03T07:59:31.163
> 
> 标签：ruby-on-rails, ruby, elasticsearch, tire

我有几个用 elasticsearch 索引的模型，其中一个有一个需要过滤的关联，但是如果我在`search`方法中添加这样的东西

```
 search.filter :range, 'sessions.starts_on' => {:gte => start_date,
                                                 :lte => ends_on} 
```

然后所有模型都被过滤掉，因为它们没有这样的关联`sessions`。

那么有没有办法将过滤器仅应用于一个模型？

任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:26:48.813

为与该模型特别相关的轮胎索引创建一个模块，并将其包含在模型中。由于会话仅与模型相关联，因此它的引用将在将用于弹性搜索的文档中。您必须像这样在模型文档中合并会话文档，因为我们将文档的 json 传递给轮胎索引模块中的 elasticsearch

```
def to_model_json
    self.document.merge({"sessions" => sessions.as_json}).to_json
end 
```

此方法通过轮胎将 json 中的文档传递给 elasticsearch，这将把它们的会话合并到文档中。

在轮胎索引模块中给出一个索引名称，您可以将其传递给轮胎搜索对象以运行过滤器查询

现在创建一个轮胎搜索对象

```
search_object = Tire::Search::Search::new(Model.index_name, other attributes) 
```

您可以检查可以从[https://github.com/karmi/tire传递的其他属性](https://github.com/karmi/tire)

然后像这样运行您的搜索方法，它将给出所需的结果

```
 search_object.filter :range, 'sessions.starts_on' => {:gte => start_date,
                                                  :lte => ends_on} 
```

# c# - 如何在实体框架中设置默认值

> ID：10427358
> 
> 赞同：3
> 
> 时间：2012-05-03T07:59:41.413
> 
> 标签：c#, .net, sql-server-2008, entity-framework, default-value

我的数据库中有一个包含 52 列的表，我想编写一个函数来在该表中创建一行。
就我而言，我不想使用该表中的所有列，所以我创建了这样的模型。

```
[Table("CUST_MASTER")]
public class CustomerMaster
{
    [Key]
    [Column("CUSTOMER_ID")]
    public string Id { get; set; }

    [Column("CUSTOMER_NAME")]
    public string Name { get; set; }

    [Column("CUSTOMER_CITY")]
    public string City { get; set; }
 } 
```

有没有办法通过实体框架仅发送这些数据并将所有其他不可为空的字段设置为一些默认数据（对于字符串“”，对于小数点 0.0 等），而无需在我的模型中写入所有这些字段并手动执行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T08:09:19.020

When you do not incorporate a Table-column in your model then it won't be mapped and it will be totally ignored by all generated SQL.

So the only option is to specify a default value in your Database.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T17:40:47.050

我认为这个[旧建议](https://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1178967-columns-with-database-provided-default-value)就是你想要的。它明确提到了概念模型和存储模型之间缺乏映射。虽然不是一个非常流行/理解的想法。

**更新：** FWIW，[这](https://stackoverflow.com/a/14888693/2266481)表明在非 Code-First 场景中已经有可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T08:05:53.783

如果您在构造函数中设置值，您将通过代码获得默认值，但您可以考虑启用迁移，这样您就可以设置默认值。看看[这个stackoverflow问题](https://stackoverflow.com/questions/3137738/ef4-code-first-how-to-set-default-value-for-pocos)

# salesforce - 列表索引超出范围：1

> ID：10427361
> 
> 赞同：1
> 
> 时间：2012-05-03T07:59:52.493
> 
> 标签：salesforce

我创建了一个带有 2 个按钮 1 的 VF 页面，用于添加 inputtext 1 by 1 和 2nd 以删除 inputtext 1 by 1。该过程正在工作 1 点添加和删除。但是当谈到最后一个输入文本时，它是一个错误。例如：如果添加了 3 inputtext 1,2,3 我可以删除 3,2 但是当我删除第一个时它通过是一个错误 List index out of bounds: 1

这是我的代码

公共页面引用取消（）{

```
system.debug('@@@@@@@@@@@@@@@@@@@ eqLstNew Out ' + eqLstNew.size());
integer i =0;
  if( i<eqLstNew.size()){
    i++;
    system.debug('@@@@@@@@@@@@@@@@@@@ eqLstNew 1st ' + eqLstNew.size());
    system.debug('@@@@@@@@@@@@@@@@@@@ i size ' + i);
    eqLstNew.remove(i);

  }
  return null;
} 
```

任何人都可以找到解决方案并告诉我代码中有什么问题。

谢谢阿努

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:03:50.820

`i++`在结束时拨打电话`if`：

```
public PageReference cancel() {
system.debug('@@@@@@@@@@@@@@@@@@@ eqLstNew Out ' + eqLstNew.size());
integer i =0;
  if( i<eqLstNew.size()){
    system.debug('@@@@@@@@@@@@@@@@@@@ eqLstNew 1st ' + eqLstNew.size());
    system.debug('@@@@@@@@@@@@@@@@@@@ i size ' + i);
    eqLstNew.remove(i);
    i++;
  }
  return null;
} 
```

但我不明白你为什么要为此使用变量。如果你总是想返回第一个元素，你应该这样写。使用额外的变量（始终具有相同的值）会使它变得更加复杂。

```
public PageReference cancel() {
  if(eqLstNew.size() > 0){
    eqLstNew.remove(0);
  }
  return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:06:16.633

列表中的第一个元素位于索引 0，而不是索引 1。它在有多个元素时起作用，因为当您执行 list.remove(1) 时实际上是在删除列表中的第二个元素。如果要删除第一个元素，则应该改为 list.remove(0) 。

# android - 使用 Android 2.x 进行 HTTP 实时流式传输

> ID：10427364
> 
> 赞同：1
> 
> 时间：2012-05-03T07:59:57.907
> 
> 标签：android, http-live-streaming

由于 Android（官方）从 3.0 开始支持 HLS，我已经研究了在我的应用程序中包含 hls 的不同方法。

1.  使用像 nexstreaming 这样的库（相当昂贵）
2.  使用 HTML 5 播放器（hls 不适用于某些 2.3 设备）
3.  利用插件播放器，如 vitamio

我的问题是，第 3 种可能性效果最好，但我的客户不希望用户看到使用了插件。

有没有办法在不提示用户的情况下包含另一个 apk/安装它？或者也许有人对在 2.x 上玩 hls 有完全不同的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T04:15:20.393

到目前为止，Vitamio 是免费的（意味着收费）`personal/commercial`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:40:36.170

联系 vov.io 并购买 vitamio 的商业许可证。然后你可以将它捆绑在你的apk中。它仍然会比 nextreaming 便宜得多。

# ruby-on-rails - 需要从验证写入数据库

> ID：10427365
> 
> 赞同：1
> 
> 时间：2012-05-03T07:59:58.027
> 
> 标签：ruby-on-rails, ruby, activerecord

在我的模型中，我有向外部服务发送请求的自定义验证方法。根据响应，我将错误添加到`errors`数组中（如果有）。

如果有错误，我还需要创建新的`ErrorLog`模型记录，代表错误日志。问题是，当验证失败时，它会`ROLLBACK`在数据库上执行，并且我所有的新`ErrorLog`记录都丢失了。实施它的最佳方法是什么？

我也应该说`after_rollback`由于某种原因没有被调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:24:32.860

`after_rollback`仅在事务期间保存或销毁的对象上调用。`after_rollback`你是在你的主课上还是在你的课上设置回调`ErrorLog`？

事实上，`after_rollback`在你的类上使用回调`ErrorLog`似乎是最简单的方法。您将丢失`ErrorLog`实例的唯一情况是事务被回滚，所以这样的事情应该可以工作：

```
class MyClass < ActiveRecord::Base
  before_save :check_external

  def check_external
    unless external_says_i_am_okay?
      ErrorLog.create!(:message => 'oops')
    end
  end
end

class ErrorLog < ActiveRecord::Base
  after_rollback :save_anyway

  def save_anyway
    self.save!
  end
end 
```

当然，说了这么多，您可能需要考虑获取外部服务来验证模型的性能。例如，如果您在 Web 请求的范围内创建对象，它可能不够快。您还需要确保`ErrorLog#save`不会失败，因为此时您将超出事务的范围。

# ssis - 如何让 SSIS 等待文件存在和/或变得可用

> ID：10427366
> 
> 赞同：2
> 
> 时间：2012-05-03T08:00:18.757
> 
> 标签：ssis

场景：Package#1 创建一个包含多条消息（每行一条）的平面文件，该文件被放置在外部系统的“INPUT”文件夹中。该文件由外部系统拾取并处理，响应以相同格式写入“OUTPUT”文件夹中的文件。该文件在外部系统仍在处理消息时开始写入，因此将其写入为 foo.rsppro。当处理完成并写入所有响应消息时，它被重命名为 foo.rsp。

一旦完成（即重命名之后）并使用Package#2 处理该文件，我需要获取该文件，该文件将在Package#1 之后立即开始。当 Package#2 启动时，外部系统可能处于三种状态：

1.  处理第一条消息尚未完成且尚未写入响应文件，在这种情况下我需要等待 foo.rsppro 被写入，然后重命名为 foo.rsp
2.  正在处理并写入 foo.rsppro，在这种情况下，我需要等待 foo.rsppro 重命名为 foo.rsp
3.  处理完成，foo.rsppro 已经编写完成并重命名为 foo.rsp，此时我只需要处理 foo.rsp。

我努力了：

1.  使用正在使用的[文件任务](http://microsoft-ssis.blogspot.com/2012/01/custom-ssis-component-file-in-use-task.html)，但如果在任务开始时预期文件不存在，则会出错（即场景 1 和 2 的错误）
2.  使用[文件观察任务](http://www.konesans.com/products/file-watcher-task.aspx)，但似乎忽略了文件重命名设计，因此永远不会处理场景 1 或 2

除了构建[脚本任务](http://microsoft-ssis.blogspot.com/2011/05/wait-until-file-is-unlocked.html)之外，是否有可以处理所有三种场景的自定义任务？

编辑：SSIS 2008 R2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:22:00.650

嗯，似乎您可以通过在输出文件夹上使用 for each 循环容器并将其设置为只读 .rsp 文件来解决它。这将处理您的 .rsp 文件。

如果包 2 仅在包 1 完成后运行，场景 1 和 2 怎么会发生？据我了解， package1 重命名文件，因此它只会在所有文件都是进程并重命名时结束

编辑：

好的，不用担心，一切都有解决方案。怎么样，你在 package1 上创建一个名为 @TotalNumberOfFiles 的变量，其中包含要处理的文件总数，然后你使用 package 1 来调用 pacakge2 （不确定你是否已经这样做了，但如果不是很简单，只需使用执行 pacakge 任务）并在 package2 上创建一个“父包变量”（如果您从未做过，这也很简单），并且包 2 只是在输出文件夹上有带有 .rsp 扩展名的 @TotalNumberOfFiles 文件时开始处理?

EDIT2：我不知道 jf 有一个命令可以得到它，也许谷歌它，但如果你没有发现你可以添加一个指向输出目录的 foreachloop 容器并在脚本任务上做这样的事情：

```
Public Sub Main()
        Dts.Variables("User::filesCount").Value = Dts.Variables("User::FilesCount").Value + 1
        Dts.TaskResult = ScriptResults.Success
    End Sub 
```

完成计数后，只需与 TotalNumberOfFiles 进行比较。如果相等，则进行下一个任务，否则休眠一段时间再计数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:17:25.390

在您的情况下，只有脚本任务可以提供帮助。

如果可能，请考虑在脚本中使用 FileSystemWatcher，或者拥有一个应用程序/Windows 服务，该服务可以使用 FileSystemWatcher 监视文件系统并在触发事件时调用您的包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:51:14.543

最终使用的代码如下。基本上循环直到找到文件或达到指定的最大尝试次数。 `Imports System.Threading`是必需的`Thread.sleep`。它可能不是处理器效率最高的方法，但这是 100% 专用硬件，并且包是串行运行的。

```
'loop until number of required attempts is hit or file is found
        Do Until iCounter = iAttempts Or bFileFound = True

            'Check if the file exists
            If File.Exists(sFilename) Then

                'Switch bFileFound to true
                bFileFound = True

                'Report that file has been found to VERIFY_Input_File_Exists_INT variable
                Dts.Variables("VERIFY_Input_File_Exists_INT").Value = True

                Dts.Events.FireInformation(1, "DEBUG:", sFilename & " found successfully.", "", 0, False)

            Else

                'sleep for specified time
                Thread.Sleep(iInterval * 1000)

                Dts.Events.FireInformation(1, "DEBUG:", sFilename & " not found successfully. Sleeping for " & iInterval & "* 1000", "", 0, False)

            End If

            'increment counter
            iCounter = iCounter + 1

        Loop 
```

# ruby - 在 ruby 中测试包含可变字符的字符串

> ID：10427377
> 
> 赞同：0
> 
> 时间：2012-05-03T08:01:17.003
> 
> 标签：ruby, string, testing, variables, character

我可以做这样的事情吗？

```
string = "123" + rand(10).to_s + "abc"
=> "1237abc"
string.include?("123" + string.any_character(1) + "abc") # any_character(digit)
=> true 
```

关键是要知道字符串的一部分，比如让我们说一个 html 标记字符串，测试类似 Name Changes Every Day 之类的东西

并且每次都可以轻松地从源中找到标题，无论它可能是什么，但对我来说，它永远是一个字符，soooooo，这里有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:09:10.470

You can just use [regular expressions](http://www.ruby-doc.org/core-1.9.3/Regexp.html) with ruby. Example:

```
string = "123" + rand(10).to_s + "abc"
string.match /123\dabc/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:07:38.427

试试那个代码：

```
string = "123" + rand(10).to_s + "abc"
string =~ /123\dabc/ 
```

0 表示模式从 0 个字符开始。当模式不匹配时，这将返回 nil。如果您只想匹配整个文本更改`/123\dabc/`为`/^123\dabc$/`

# objective-c - Xcode 4.3.2 和 SBJSON

> ID：10427386
> 
> 赞同：0
> 
> 时间：2012-05-03T08:02:11.350
> 
> 标签：objective-c, ios

我正在开发一个`iOS`应用程序。我正在使用`Xcode 4.3.2`并且`SBJSON`，我已将所有 JSON 类导入到我的项目中，并且它编译得很好，但是当我在项目中导航时，我遇到了这样的崩溃：`-[__NSCFDictionary JSONRepresentation]: unrecognized selector sent to instance`

在我的代码中我这样做：`NSString *jsonString = [dic JSONRepresentation];` dic 是`NSDictionnary.`

感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:06:53.887

尝试以下代码，其中 responseString 是您从解析器收到的响应字符串。

```
SBJSON *json = [SBJSON new];    
NSMutableDictionary *jsonDictionary = (NSMutableDictionary*) [json objectWithString:responseString error:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:28:43.320

JSONRepresentation 不是 Apple 的 NSDictionary 类的一部分。

这是 JSON Api 中包含的一个非常有用的类别。

=> 你在使用[这个 JSON Api](https://github.com/stig/json-framework/blob/master/Classes/NSObject+SBJson.h)吗？

=> 您是否正确导入了 JSON Api 头文件？

=> 如果您查看代码，JSONRepresentation 类别是否声明为：

```
@interface NSDictionary (NSDictionary_SBJsonWriting)
/// Returns a string containing the receiver encoded in JSON.
- (NSString *)JSONRepresentation;
@end 
```

使用 .m 文件中的相应代码？

**编辑 ：**

如果您正在制作一个静态库并在其中使用 JSON Api（或其他 API），您应该在库的构建设置和调用项目的设置中进行一些更改。

*   在您的库构建设置中，检查“其他链接器标志”行。该值应为：“-ObjC”

*   在调用项目的构建设置中，“其他链接器标志”的值应该是“-all_load”

# mysql - 如何在特定行中查找具有空值的第一列名称

> ID：10427387
> 
> 赞同：0
> 
> 时间：2012-05-03T08:02:15.137
> 
> 标签：mysql, php-5.2

下面的查询可以很好地返回为空的列名，我想要完成的是让它返回到具有空值的第一个列名。我还有另一列名为 email 的每一行都有一个唯一的电子邮件地址。我的问题是我无法弄清楚执行此操作的适当语法。任何帮助表示赞赏！

我也为此使用php5.2。

```
 SELECT col FROM (SELECT 'GAME0' AS col, GAME0 AS value FROM USERNAME
       UNION ALL SELECT 'GAME1', GAME1 FROM USERNAME
       UNION ALL SELECT 'GAME2', GAME2 FROM USERNAME
       UNION ALL SELECT 'GAME3', GAME3 FROM USERNAME
       UNION ALL SELECT 'GAME4', GAME4 FROM USERNAME
       UNION ALL SELECT 'GAME5', GAME5 FROM USERNAME
       UNION ALL SELECT 'GAME6', GAME6 FROM USERNAME
       UNION ALL SELECT 'GAME7', GAME7 FROM USERNAME
       UNION ALL SELECT 'GAME8', GAME8 FROM USERNAME
       UNION ALL SELECT 'GAME9', GAME9 FROM USERNAME
       UNION ALL SELECT 'GAME10', GAME10 FROM USERNAME
       UNION ALL SELECT 'GAME11', GAME11 FROM USERNAME
       UNION ALL SELECT 'GAME12', GAME12 FROM USERNAME
       UNION ALL SELECT 'GAME13', GAME13 FROM USERNAME
       UNION ALL SELECT 'GAME14', GAME14 FROM USERNAME
       UNION ALL SELECT 'GAME15', GAME15 FROM USERNAME
       UNION ALL SELECT 'GAME16', GAME16 FROM USERNAME
       UNION ALL SELECT 'GAME17', GAME17 FROM USERNAME
       UNION ALL SELECT 'GAME18', GAME18 FROM USERNAME
       UNION ALL SELECT 'GAME19', GAME19 FROM USERNAME
    ) allValues 
    WHERE value is null and email='emailaddress' 
```

编辑：如果不需要上面的查询，我需要类似下面的东西，我可以在其中更改第一个空值的值。再次语法是我最大的问题。

```
update username
SET CASE GAME0
    WHEN GAME0 IS NOT NULL THEN GAME1
    WHEN GAME1 IS NOT NULL THEN GAME2
    WHEN GAME2 IS NOT NULL THEN GAME3
    WHEN GAME3 IS NOT NULL THEN GAME4
    WHEN GAME4 IS NOT NULL THEN GAME5
    WHEN GAME5 IS NOT NULL THEN GAME6
    WHEN GAME7 IS NOT NULL THEN GAME8
    WHEN GAME8 IS NOT NULL THEN GAME9
    WHEN GAME9 IS NOT NULL THEN GAME10
    WHEN GAME10 IS NOT NULL THEN GAME11
    WHEN GAME11 IS NOT NULL THEN GAME12
    WHEN GAME12 IS NOT NULL THEN GAME13
    WHEN GAME13 IS NOT NULL THEN GAME14
    WHEN GAME14 IS NOT NULL THEN GAME15
    WHEN GAME15 IS NOT NULL THEN GAME16
    WHEN GAME16 IS NOT NULL THEN GAME17
    WHEN GAME17 IS NOT NULL THEN GAME18
    WHEN GAME18 IS NOT NULL THEN GAME19
  END where EMAIL='emailaddress' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:20:03.167

你可以使这个查询更简单，并通过 php 进行一些计算：

```
$arr_field = array();
foreach(range(0, 19) as $i)
    $arr_field[] = "GAME{$i}";

$str_add = implode(' + ', $arr_field);
$str_select = implode(', ', $arr_field);

$query = 
mysql_query("
    SELECT {$str_select}
    FROM USERNAME
    WHERE ({$str_add}) IS NULL AND email = 'emailaddress'
");

// Then get the NULL column through a loop

while($row = mysql_fetch_assoc($query))
    foreach($arr_field as $h)
        if ( ! isset($row[$h])) {

            echo "Found column! {$h}<br />";
            break;

        } 
```

很显然，我将所有 20 个字段加在一起，如果这 20 个值中的任何一个为 NULL，则结果变为 NULL。我获取所有 20 个值，然后通过 php 循环查找 NULL 字段。

不过老实说，我会制作另一个结构，用第二个表来处理这些 GAME0 - GAME19 字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T08:08:21.017

我不太了解您的表结构，但这是一种简单的方法：只需添加`order by col limit 1`到您的查询中。

**编辑：**为此，您必须使用`"GAME00", "GAME01"`等。（您不必更改列名，只需更改您在字符串中放置的名称）

**编辑 2：**要包含它必须存在于您的子查询中的电子邮件地址，如下所示：

```
SELECT col FROM (SELECT 'GAME00' AS col, GAME0 AS value, email FROM USERNAME
   UNION ALL SELECT 'GAME01', GAME1, email FROM USERNAME 
```

（ETC）

# php - 从 csv 文件中删除第一行并根据它创建表

> ID：10427390
> 
> 赞同：1
> 
> 时间：2012-05-03T08:02:21.433
> 
> 标签：php, mysql, csv, fastercsv

嗨，我正在努力。

我正在尝试通过在 Windows 中使用 php将**CSV**一次上传到**mysql中。**所以我正在使用查询

```
LOAD DATA INFILE 'c:/Data/mysql/transaction_upload.csv'
INTO TABLE transaction_upload
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
ESCAPED BY '\\'
LINES TERMINATED BY '\r\n'; 
```

它将我的整个 csv 加载到表中。

问题是：

1.  条件是表“transaction_upload”应该已经存在。
2.  它也上传包含标题的第一行csv。

我希望从 CSV 中删除第一行，即标题不应在 DB 中有条目，并且自动创建的表名称为 CSV_file_name，列为 CSV 第一行的列。

请不要回答为在 php 中读取 CSV 的第一行并创建表，因为从中删除第一行的问题仍然存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:03:11.643

添加`IGNORE 1 LINES`到`LOAD DATA`命令的末尾。

正如[手册](http://dev.mysql.com/doc/refman/5.5/en/load-data.html)所说：

> 该选项可用于忽略文件开头的行。例如，您可以使用跳过包含列名的初始标题行：**`IGNORE`*`number`*`LINES`****`IGNORE 1 LINES`**
> 
> ```
> LOAD DATA INFILE '/tmp/test.txt' INTO TABLE test IGNORE 1 LINES;
> ```

如果该表尚不存在，MySQL 将引发错误。

# javascript - ExtJS 4 无法检查变量是否未定义并警告错误

> ID：10427391
> 
> 赞同：0
> 
> 时间：2012-05-03T08:02:25.387
> 
> 标签：javascript, extjs

我有：

```
dockedItems: [{
                xtype: 'toolbar',
                store: 'RecordsListStore',
                selModel: {
                    selType: 'cellmodel'
                }, 
```

和几个像这样的图标：

```
},{
                    icon: g_settings.iconUrl + 'view-icon.png',
                    text: 'View',
                    itemId: 'view-selected-record-from-grid',
                    scope: this
                },{ 
```

这是在我看来，在我的控制器中，我有一个像这样触发的函数：

```
'#view-selected-record-from-grid' : {
                click: this.onViewRecordClick
            } 
```

问题是我想显示一个警报消息。如果用户在未选择任何内容时单击按钮。在我的函数中，我得到所选项目的信息（如果有的话），如下所示：

```
onViewRecordClick: function()   {
        /**
     *Getting the id of the record from the selected row
     */
        var id = this.getRecordsListGrid().getSelectionModel().getCurrentPosition().row;
        var rec = Ext.data.StoreManager.lookup('RecordsListStore').getAt(id);
        rec = rec.data.id; 
```

之后我调用我的 Ajax 请求，所以在这两个部分之间我想检查值以及它们是否未定义（单击图标而不选择）以提醒用户注意这一点。但是，如果我只是试试这个：

```
if(id == undefined) { alert('No selection');} 
```

并在未选择任何内容时单击图标我没有收到警报消息，而是在控制台中收到错误消息

> this.getRecordsListGrid().getSelectionModel().getCurrentPosition().row; 未定义

就这样。我尝试了一些方法来绕过这个问题，因为看起来，函数会在它看到未定义的变量时停止，但仍然找不到有效的解决方案。

谢谢

勒隆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:05:56.380

检查是否`getCurrentPosition()`返回未定义。

# java - 如何为java SE 1.5创建一个半透明（窗口下方的空间应该是可点击的）窗口？

> ID：10427392
> 
> 赞同：2
> 
> 时间：2012-05-03T08:02:26.687
> 
> 标签：java, swing, user-interface, transparency, java-5

我遇到过许多制作透明窗口的文章（即通过截屏并将该图像绘制为背景）。但是使用它们我无法在我的小程序占用的空间上做任何事情（因为它不是点击）。

我也想知道透明区域什么时候可以点击？

谁能帮我提供一些参考资料？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:07:49.487

下面是一些很好的例子：

[http://www.andrels.com/wp-en_US/index.php/2010/03/creating-transparent-and-shape-windows-using-java-swingawt/](http://www.andrels.com/wp-en_US/index.php/2010/03/creating-transparent-and-shaped-windows-using-java-swingawt/)

[http://java.sun.com/developer/technicalArticles/GUI/translucent_shape_windows/](http://java.sun.com/developer/technicalArticles/GUI/translucent_shaped_windows/)

[http://today.java.net/pub/a/today/2008/03/18/translucent-and-shape-swing-windows.html](http://today.java.net/pub/a/today/2008/03/18/translucent-and-shaped-swing-windows.html)

# magento - 每个块中的 Magento Template.php 是否为属于这些模块的所有模板定义了通用方法？

> ID：10427400
> 
> 赞同：0
> 
> 时间：2012-05-03T08:03:25.093
> 
> 标签：magento

每个块中的 Template.php 是否为属于这些模块的所有模板定义了通用方法？

我对此很感兴趣。我正在研究一个插件，有一个名为 init.phtml 的模板，其中使用了 /Block/Template.php 中定义的方法。我不知道为什么它可以直接在 init.phtml 中调用 $this->methodInTemplateBlock()。谁能给我解释一下？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:24:44.420

如果您查看方法`Mage_Core_Block_Template::fetchView`，您将看到以下内容：

```
public function fetchView($fileName)
{
    ...
    try {
        $includeFilePath = realpath($this->_viewDir . DS . $fileName);
        if (strpos($includeFilePath, realpath($this->_viewDir)) === 0 || $this->_getAllowSymlinks()) {
            include $includeFilePath;
        } else {
            Mage::log('Not valid template file:'.$fileName, Zend_Log::CRIT, null, null, true);
        }
    ...
} 
```

如您所见，模板文件的内容直接包含在该类中的方法体中，这意味着您可以通过 $this 简单地引用该类实例。

# android - Android数据（文字+图片）存储

> ID：10427409
> 
> 赞同：-1
> 
> 时间：2012-05-03T08:04:12.063
> 
> 标签：android, image

我想创建一个包含以下数据的 android 应用程序：

四种不同语言的文本、日期和图像。

我的问题是我不知道存储这些数据的最佳方式。它们应该可供 lambda 用户使用，但不容易看到（--> 例如，不在 SD 卡上）。如果没有图像，我会直接选择 sqlite，但是……有了它，什么是最好的？

资产？sqlite（+图像作为blob）？sqlite（+图像路径）？XML？JSON？

另外，我想从大约 1000 个条目中随机选择一个，这些条目可能会由计算机科学知识较低的人插入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:15:52.917

存储在应用程序文件夹中的文件是应用程序私有的，无法轻松访问。

最简单的方法是将文本作为 xml 并将图像作为资产放在您的应用程序文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:12:33.027

If the images are static (ie.. not downloaded but distributed with your app) I would put these in assets (drawable).

With regards to the text, you could use strings.xml and localize this for the other 3 languages.

Hope I have understood your problem here.

# ios - 预期类型错误

> ID：10427410
> 
> 赞同：10
> 
> 时间：2012-05-03T08:04:18.870
> 
> 标签：ios, xcode, protocols

所以我创建了这个方法：

```
- (void)addToViewController:(SecViewController *)controller 
      didFinishEnteringItem:(NSString *)item;` <br> 
```

并在**SecViewController ***`Xcode`处不断给我`Expected a type`错误。这意味着什么？**SecViewController**不是类型？

 ***** * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-03T08:27:43.217

你必须声明`SecViewController`：

```
@class SecViewController; 
```

...在标题的顶部。

注意：不要只`#import`使用所有标题。这只会恶化您的标头依赖性。****

# sql-server - 在 SQL Server 中设置作业启用/禁用的权限

> ID：10427411
> 
> 赞同：1
> 
> 时间：2012-05-03T08:04:21.673
> 
> 标签：sql-server, sql-agent-job

已授予数据库用户`SQLAgentOperatorRole`，但设置作业启用/禁用时仍有错误。错误信息是：

> 对象“sysjobs”、数据库“msdb”、模式“dbo”的 SELECT 权限被拒绝

我们通过 设置作业启用/禁用`sp_update_job`。

评论：

执行以下语句时，会报错。

```
bool result = ObjectInstance.ExecuteStoreQuery<bool>("EXEC usp_prod_SetJobStatus @jobName={0}, @isEnable={1}", jobName, isEnable).FirstOrDefault(); 
```

但是，当使用下面的语句时，它会执行成功。

```
 ObjectInstance.ExecuteStoreCommand("EXEC msdb.dbo.sp_update_job @job_name={0}, @enabled={1}", jobName, isEnable); 
```

usp_prod_SetJobStatus SP：

```
CREATE PROCEDURE [dbo].[usp_prod_SetJobStatus]
    @jobName VARCHAR(200),
    @isEnable BIT
AS
BEGIN
    DECLARE @jobId uniqueidentifier
    DECLARE @result BIT

    SELECT @jobId = job_id FROM msdb.dbo.sysjobs WHERE name = @jobName
    IF(@jobId IS NOT NULL)
    BEGIN
        EXEC @result = msdb.dbo.sp_update_job @job_name=@jobName, @enabled=@isEnable    
    END
    ELSE
    BEGIN
        SET @result = 1
    END

    SELECT  @result
END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T00:35:23.313

我已经解决了这个问题。原因是用户在 sysjobs 表上没有 SELECT 权限。因此，我们需要为用户授予 SELECT 权限。

```
USE msdb
GRANT SELECT ON msdb.dbo.sysjobs TO useName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:39:27.900

您已赋予代理操作员角色启用和禁用的权限，但 SQLAgentOperatorRole 成员可以通过使用存储过程 sp_update_job 并指定 @enabled 和 @job_id（或 @job_name）参数的值来启用或禁用他们不拥有的本地作业。如果此角色的成员为此存储过程指定任何其他参数，则该过程的执行将失败..您必须对 sql server agnet 执行权限。

# asp.net-mvc-3 - 如何使用 restful 服务从 AD 检索用户到下拉列表

> ID：10427413
> 
> 赞同：1
> 
> 时间：2012-05-03T08:04:36.113
> 
> 标签：asp.net-mvc-3, active-directory, restful-url

我有 MVC3 项目基于声明的身份验证。

我已经设法让登录工作。

我现在要做的是`DropDownList`用组填充一个，然后`DropDownlist`用属于该组的用户填充另一个。到目前为止，我`DropDownlist`用来自本地数据库的用户填充。

这是我从某个办公室获取用户的方法

```
 private static void GetUsers(UsersContext.Format wFormat)
    {

        new UsersContext(new Uri("http://site/api/users"), wFormat)
            .Users
            .Where(x => x.Office.Equals("HomeOffice"))
            .ToList()
            .ForEach(
                item =>
                {
                   var user = item.DisplayName;
                });
    } 
```

这就是我的控制器现在填充的方式：

```
 public ActionResult Create()
    {
        var model = new TaskViewModel();
        var subjectypes = createNKIRep.GetAllSubjectTypesById();
        var customer = createNKIRep.GetAllCustomersByID();
        var teams = createNKIRep.GetAllTeamsByID();
        var users = createNKIRep.GetAllUsersByID();
        model.Teams = new SelectList(teams, "Id", "Name");
        model.Users = new SelectList(users, "Id", "Name");
        model.SubjectTypes = new SelectList(subjectypes, "Id", "Name");
        model.Company = new SelectList(customer, "Id", "CompanyName");

    }  
     return View(model); 
```

这是我填写下拉列表的视图

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
            <h4>Get users to customer</h4>    
            <legend></legend>
            <p>Subjecttype</p>
            <div class="editor-field">
                @Html.DropDownListFor(m => m.SubjectTypeName, Model.SubjectTypes, "Subjecttype", new { @class = "selectstyle" })
                @Html.ValidationMessageFor(model => model.SubjectTypeName)
            </div>

            <p>Team</p>
            <div class="editor-field">
                @Html.DropDownListFor(model => model.TeamName, Model.Teams, "Team", new { @class = "selectstyle"})
                @Html.ValidationMessageFor(model => model.TeamName)
            </div>

            <p>Users</p>
            <div class="editor-field">
                @Html.DropDownListFor(model => model.UserName, Model.Users, "Users", new { @class = "selectstyle"})
                @Html.ValidationMessageFor(model => model.UsersName)
            </div>

            <p>Customer</p>
            <div class="editor-field">
                @Html.DropDownListFor(model => model.CompanyName, Model.Company, "Company", new { @class = "selectstyle" })
                @Html.ValidationMessageFor(model => model.CompanyName)
            </div> 
```

所以我的问题是，我不知道如何`Dropdownlist`使用 RESTful 服务填充我的 AD 中的值。知道怎么做吗？

# asp.net-mvc - Web api 自定义路由

> ID：10427416
> 
> 赞同：4
> 
> 时间：2012-05-03T08:05:18.973
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我有一个名为 QuotaController 的控制器，我可以通过 httprequests 访问它，如下所示：

> 本地主机：12345/配额/

我想要的是在某处放置一个端点，以便我可以像这样访问它：

> 本地主机：12345/配额/增量

或者

> 本地主机：12345/配额/递减

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T08:07:27.447

您可以更改 Web api 路由定义以允许传递操作名称：

```
routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

进而：

```
public class QuotaController : ApiController
{
    public void Increment()
    {
        ...
    }

    public void Decrement()
    {
        ...
    }
} 
```

# button - 如何在 extjs 的底部栏中添加一个按钮？

> ID：10427417
> 
> 赞同：1
> 
> 时间：2012-05-03T08:05:23.903
> 
> 标签：button, extjs

我尝试使用以下代码在 extjs 的网格面板中添加一个文本文件和一个按钮：

```
 var shopIdInput = new Ext.form.TextField({
            emptyText: "请输入商户Id",
            width: 200
        });

        var deleteOneShopCacheBtn = new Ext.Button({
            text : '删除商户缓存',
            handler: deleteOneShopCache,
            minWidth : 100,
            cls: "delBtn"
        });
                 ......
        var grid = new Ext.grid.GridPanel({
            store: store,
            columns: columns,
            bbar: [shopIdInput, deleteOneShopCacheBtn],
            buttons: [clearRedressWordCacheBtn, clearSplitWordCacheBtn, clearRegionCacheBtn, clearCategoryCacheBtn, runCommandBtn],
            items: [commandForm],
            buttonAlign: 'center',
            stripeRows: true,
            autoExpandColumn: 'serverUrl',
            //title: '批量执行指令',
            sm: checkboxSelect,
            frame: true,
            autoHeight: true,
            enableColumnHide: false,
            renderTo : 'serverInfoList'
        }); 
```

但是 bbar 中的按钮 deleteOneShopCacheBtn 看起来不像按钮中的按钮 clearRedressWordCacheBtn 那样的普通按钮。当鼠标在它上面时，它会变成一个按钮。我试图通过设置属性 cls 来解决问题，但失败了，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T18:55:13.953

cls 配置允许您指定要应用于可渲染对象（在您的情况下为按钮）的其他类，但不会根据鼠标悬停在其上进行更改等。

您需要的是 deleteOneShopCacheBtn 上的侦听器并侦听鼠标悬停事件（另请参阅 Sencha 文档以获取按钮响应的事件列表）。你可以启动一个函数，让你的按钮看起来像你想要的任何东西。我目前在工作。如果今晚我回家后你仍然有这个问题，我可以发布一些代码。

另请参阅以下示例：
[按钮单击事件 Ext JS](https://stackoverflow.com/questions/3119152/button-click-event-ext-js) }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:19:25.347

我通常只是在按钮上添加一个图标来帮助它脱颖而出。所以只需为 iconCls 设置一个值：'mybuttonicon'

并在您的 css .mybuttonicon { background-image: url(../path/to/icon) !important;}

# c# - 如何在 Windows 7 上使用 MonoDevelop 的 SCP 发布 ASP.NET 应用程序

> ID：10427418
> 
> 赞同：2
> 
> 时间：2012-05-03T08:05:26.430
> 
> 标签：c#, ssh, monodevelop, fuse

我在 Windows 上使用 MonoDevelop，并且只获得用于 Web 部署的“本地文件系统”目标。根据这个站点：[http://monodevelop.com/documentation/creating_asp.net_projects](http://monodevelop.com/documentation/creating_asp.net_projects)，我需要 FUSE 文件系统来获得“SSH（FUSE）”目标类型。

![http://monodevelop.com/@api/deki/files/359/=AspNetWebDeployNew.png?size=webview](../Images/55a6201d8a1d32f026001244b1f30a44.png)

有没有人让这个在windows上运行？我需要采取哪些步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-23T09:59:23.830

正如 mhutch 所说，这在 Windows 上不起作用，因为 Windows 不支持 Fuse。

但是，您可以安装 Dokan + Dokan SSHFS。
然后，您需要下载 monodevelop 源代码，检查 Windows，并通过 dokan 命令行添加要挂载的功能。
然后在 Github 上发出拉取请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T01:24:32.897

SSH (FUSE) 部署处理程序使用`sshfs`FUSE 文件系统将删除文件系统临时挂载到本地目录，然后使用正常文件操作部署到该目录。

据我所知，FUSE 无法在 Windows 上运行，因此该功能无法在 Windows 上按原样运行。

MonoDevelop 现在包括 NSch，JSch SSH 库的一个端口，用于 git 支持。该库支持 SFTP，因此感兴趣的一方可以编写一个新的部署处理程序，使用它直接进行部署。我很乐意为任何有兴趣这样做的人提供指导。

# mongodb - 如何使用 Doctrine ODM for MongoDB 设置我自己的 MongoId？

> ID：10427421
> 
> 赞同：4
> 
> 时间：2012-05-03T08:05:45.117
> 
> 标签：mongodb, doctrine, mongodb-php, doctrine-odm

```
use Doctrine\ODM\MongoDB\Mapping\Annotations as ODM;

/**
 * @ODM\Document()
 */
class My_Doctrine_Model
{
    /** @ODM\id */
    protected $id;

    public function getId()
    {
        return $this->id;
    }

    public function setId($value)
    {
        $this->id = $value;
        return $this;
    }
} 
```

和代码

```
$myModel = new My_Doctrine_Model();
$myModel->setId(new MongoId());

// Id is my set id

$dm->persist($myModel);

// Id is my set id

$dm->flush();

// Id is overwritten and the object is inserted with an other one 
```

为什么 Doctrine 会覆盖我的设置 ID？有没有办法可以防止这种情况？

`PersistenceBuilder::prepareInsertData`当检查是否设置了 id 时，会设置新的 Id 。我不知道为什么 id 字段被排除在更改集之外。

### 更新

我又读了一点代码，发现原因`if`是`UnitOfWork::getDocumentActualData`.

```
else if ( ! $class->isIdentifier($name) || $class->isIdGeneratorNone()) {
    $actualData[$name] = $value;
} 
```

没有`else`所以没有为 id 设置值。
这是开发商深思熟虑的设计选择吗？

# 解决了

这是在我尚未更新到的最近提交中更新的。我不完全确定这是有意的。
[https://github.com/doctrine/mongodb-odm/commit/fb2447c01cb8968255383ac5700f95b4327468a3#L2L503](https://github.com/doctrine/mongodb-odm/commit/fb2447c01cb8968255383ac5700f95b4327468a3#L2L503)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-24T09:17:33.593

您可以使用 Doctrine ODM 的注释来使用自定义 ID 策略，例如 -

```
/** Document */
class MyPersistentClass
{
    /** @Id(strategy="NONE") */
    private $id;

    public function setId($id)
    {
        $this->id = $id;
    }

    //...
} 
```

有关 Doctrine ODM 可用的不同自定义 ID 策略的更多信息，请参见此处 - [http://doctrine-mongodb-odm.readthedocs.org/en/latest/reference/basic-mapping.html#basic-mapping-identifiers](http://doctrine-mongodb-odm.readthedocs.org/en/latest/reference/basic-mapping.html#basic-mapping-identifiers)

# typo3 - 带图形的 HMENU

> ID：10427427
> 
> 赞同：0
> 
> 时间：2012-05-03T08:06:07.990
> 
> 标签：typo3, typoscript

在 TYPO3 站点中，我有一个兄弟页面列表。每个页面在“媒体”字段中都有一些图像。我试图进行导航以转到上一个/下一个兄弟姐妹。到目前为止，我有这个：

```
# Append Sitenavi for projects
[PIDupinRootline = 43]

page.10.marks.MAIN.20 = HMENU
page.10.marks.MAIN.20{

    special = browse
    special{
        items = next|prev
    }

    1 = TMENU
    1{
        NO = 1
    }
}
[global] 
```

但是，id 喜欢使用“文件”字段中的第一张图片，而不是使用页面标题。我怎么能做到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:46:43.007

这是获取其他字段的方法：

```
page.10.marks.MAIN.20 = HMENU
page.10.marks.MAIN.20 {
  special = browse
  special {
    items = prev | next
  }

  1 = TMENU
  1 {
    NO = 1
    NO.stdWrap.field = subtitle // title
  }
} 
```

现在，如果您更改`subtitle // title`为`image`并添加`NO.stdWrap.wrap = <img src"|" />`，那么它应该可以工作。

# python - Python。写入文件，无法理解行为

> ID：10427434
> 
> 赞同：1
> 
> 时间：2012-05-03T08:06:29.180
> 
> 标签：python

我不明白为什么我不能在我的 python 程序中写入文件。我有字符串列表`measurements`。我只想将它们写入文件。它只写入 1 个字符串，而不是所有字符串。我不明白为什么。这是我的一段代码：

```
fmeasur = open(fmeasur_name, 'w')
line1st = 'rev number, alg time\n'
fmeasur.write(line1st)
for i in xrange(len(measurements)):
    fmeasur.write(measurements[i])
    print measurements[i]
fmeasur.close() 
```

我可以看到这些字符串的所有打印，但在文件中只有一个。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T08:08:56.990

The only plausible explanation that I have is that you execute the above code multiple times, each time with a single entry in `measurements` (or at least the *last* time you execute the code, `len(measurements)` is `1`).

Since you're overwriting the file instead of appending to it, only the last set of measurements would be present in the file, but *all* of them would appear on the screen.

**edit** Or do you mean that the data is there, but there's no newlines between the measurements? The easiest way to fix that is by using `print >>fmeasur, measurements[i]` instead of `fmeasur.write(...)`.

# javascript - IE8 陷入数组推送的无限循环

> ID：10427440
> 
> 赞同：0
> 
> 时间：2012-05-03T08:06:58.863
> 
> 标签：javascript

我很困惑以下循环导致 IE8 中的无限循环

```
for (var i in theArray) {
            this.theArray.push(theArray[i]);
} 
```

IE8 陷入无限循环，我不明白为什么，因为`this.theArray`它是一个全局数组，而`theArray`它是一个局部变量。

如果我有类似以下的内容，我会理解会发生无限循环：

```
for (var i in theArray) {
            theArray.push(theArray[i]);
} 
```

这只发生在 IE8 中。IE8 是否以不同的方式处理变量和范围？

编辑

这是我在一个对象中的内容

```
this.theArray = new Array();

this.selection = function(theArray) {
    for (var i in theArray) {
        this.theArray.push(theArray[i]);
    }
} 
```

编辑

我发现我将全局变量作为参数传递给函数。呸！为什么这在 IE8 中不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:12:48.070

首先，永远不要`for in`在数组上使用循环。它将遍历值以及增强的属性。

然后，`this`无法在您的代码中确定。`this`可能指的是全局对象。此外，您可能错过`var`了在局部变量中的使用，从而`theArray`指向`theArray`您要附加到的同一个全局变量。

```
var theArray = [1,2,3];

function foo(){
    theArray = [4,5,6]; //missing var, theArray is the global theArray
    for (var i in theArray) {
        //you are pushing to the same array you are fetching from
        this.theArray.push(theArray[i]);

        //[4,5,6,4,5,6,4,5,6,.....]
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:09:16.850

你应该尝试`self`而不是`this`

`self`是脚本运行的窗口或框架，所以它就像访问全局变量一样。

```
for (var i in theArray) {
    self.theArray.push(theArray[i]);
} 
```

如果这没有帮助，请为数组指定不同的变量名称。

或者：您确定这`theArray`是本地范围吗？`var`在定义 `theArray ?

```
var theArray 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T08:20:34.380

我读这个的方式，它应该进入一个无限循环。您正在枚举一个数组并同时向其中添加项目，即：

读取索引 i，创建 i+1，重复。

当您修改您正在枚举的集合时，其他语言会爆炸，这会给您一个错误指示。

我很惊讶它只在 IE8 中失败。我误读了您的代码片段吗？

# sql-server - 这是一个“正确”的数据库设计吗？

> ID：10427441
> 
> 赞同：8
> 
> 时间：2012-05-03T08:07:00.440
> 
> 标签：sql-server, database, performance, database-design

我正在使用新版本的第三方应用程序。在这个版本中，数据库结构发生了变化，他们说“提高性能”。

旧版本的 DB 具有如下一般结构：

```
TABLE ENTITY
(
    ENTITY_ID,
    STANDARD_PROPERTY_1,
    STANDARD_PROPERTY_2,
    STANDARD_PROPERTY_3,
    ...
)

TABLE ENTITY_PROPERTIES
(
    ENTITY_ID,
    PROPERTY_KEY,
    PROPERTY_VALUE
) 
```

所以我们有一个包含基本属性字段的主表和一个单独的表来管理用户添加的自定义属性。

新版本的数据库 insted 具有如下结构：

```
TABLE ENTITY
(
    ENTITY_ID,
    STANDARD_PROPERTY_1,
    STANDARD_PROPERTY_2,
    STANDARD_PROPERTY_3,
    ...
)

TABLE ENTITY_PROPERTIES_n
(
    ENTITY_ID_n,
    CUSTOM_PROPERTY_1,
    CUSTOM_PROPERTY_2,
    CUSTOM_PROPERTY_3,
    ...
) 
```

因此，现在当用户添加自定义属性时，会在当前`ENTITY_PROPERTY`表中添加一个新列，直到达到*最大列数*（由应用程序管理），然后创建一个新表。

所以，我的问题是：这是设计数据库结构的正确方法吗？这是**“提高性能”**的唯一方法吗？旧结构需要许多连接或子选择，但在我看来这个结构并不聪明（甚至不正确）......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T08:15:14.507

我之前已经在*假设*的（通常未经证实的）加入“费用”上看到了这一点——它基本上是将一个行重的数据表变成了一个列重的表。正如您所暗示的，它们在列用完时创建新表，从而遇到了自己的限制。

我**完全**不同意。

就个人而言，我会坚持旧结构并重新评估性能问题。这并不是说旧方法是正确的方法，在我看来它只是比“改进”略好，并且不需要对数据库表和 DAL 代码进行大规模重新设计。

这些表在我看来基本上是静态的......**缓存**将是一个更好的性能改进，而不会破坏数据库，我会首先考虑这样做。进行一次“昂贵”的获取并将其粘贴在内存中的某个位置，然后忘记您的麻烦（注意，我正在考虑管理缓存的需要，但静态数据是最容易管理的数据之一）。

或者，等待您遇到每个数据库的最大表数的那一天 :-)

其他人则建议了完全不同的商店。这是一个完全可行的可能性，如果我没有现有的数据库结构，我也会考虑它。也就是说，我看不出为什么这种结构不能适应 RDBMS。我已经在我从事过的几乎所有大型应用程序上看到了它。有趣的是，它们都走上了*类似*的路线，而且大多都是“成功”的实现。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T08:16:16.910

不，这不对。它是可怕的。

> 直到达到最大列数（由应用程序处理），然后创建一个新表。

这句话说明了一切。在任何情况下，应用程序都不应动态创建表。“旧”的方法也不是很理想，但既然你有让用户添加自定义属性的要求，它必须是这样的。

考虑一下：

*   您将失去所有类型安全性，因为您必须将所有值存储在“PROPERTY_VALUE”列中
*   根据您的用户，您可以让他们事先更改架构，然后让他们运行某种数据库更新批处理作业，因此至少所有属性都将以正确的数据类型声明。此外，您可能会丢失 entity_id/key 的东西。
*   看看这个：[http](http://en.wikipedia.org/wiki/Inner-platform_effect) ://en.wikipedia.org/wiki/Inner-platform_effect 。这肯定有它的味道
*   也许 RDBMS 不适合您的应用程序。考虑使用基于键/值的存储，如 MongoDB 或其他 NoSQL 数据库。( [http://nosql-database.org/](http://nosql-database.org/) )

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T08:15:23.683

根据我对数据库的了解（但我当然不是最有经验的），在您的数据库中执行此操作似乎是个坏主意。如果您已经知道用户可能拥有多少个最大自定义属性，我会说您最好将表列数设置为该值。

再说一次，我不是专家，但即时创建新列并不是像操作数据库那样。它会给你带来比什么都多的麻烦。

如果我是你，我要么修复自定义属性的数量，要么坚持使用旧系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T10:06:05.267

设计数据库没有“正确”的方法——除了著名的[“范式”](http://en.wikipedia.org/wiki/Database_normalization#Normal_forms)理论之外，我不知道有一套普遍认可的标准；许多数据库设计出于性能原因而忽略了这个标准。

但是有一些评估数据库设计的方法——性能、可维护性、可理解性等。很多时候，您必须相互权衡；这就是您的更改似乎正在做的事情 - 将可维护性和可理解性与性能进行交易。

因此，确定这是否是一个好的权衡的最佳方法是查看性能提升是否已实现。找出这一点的最佳方法是创建建议的模式，使用代表性数据集加载它，然后编写您需要在生产中运行的查询。

我猜测对于诸如“从 STANDARD_PROPERTY_1 = 'banana' 的实体中查找 STANDARD_PROPERTY_1 之类的查询，新设计不会明显更快。

我猜在检索给定实体的所有属性时它不会更快。事实上，它可能会稍微慢一些，因为新设计不需要对 ENTITY_PROPERTIES 进行单个连接，而是需要对多个表进行连接。您将返回“稀疏”结果 - 可能并非所有实体都会在所有 ENTITY_PROPERTIES_n 表的 property_n 列中具有值。

当您需要自定义属性的复合 where 子句时，新设计可能会明显更快。例如，找到一个实体，其中自定义属性 1 为真，自定义属性 2 为香蕉，自定义属性 3 不在 ('kylie', 'pussycat dolls', 'giraffe') 中，如果可以的话，速度会更快（可能）指定 ENTITY_PROPERTIES_n 表中的列而不是 ENTITY_PROPERTIES 表中的行。大概。

至于可维护性 - 糟糕。您的数据库访问代码现在需要更加智能，知道哪个表包含哪个属性，以及有多少列太多。有趣的错误的可能性很高 - 有更多的移动部件，我想不出任何明显的单元测试来确保数据库访问逻辑正常工作。

可理解性是另一个问题——这个解决方案不在大多数开发人员的工具箱中，它不是行业标准模式。旧的解决方案广为人知——通常称为“实体属性值”。这成为长期项目中的一个主要问题，您无法保证原始开发团队会继续存在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T08:14:10.003

我相信为每个实体创建一个新表来存储属性是一个糟糕的设计，因为您最终可能会用表来填充数据库。应用第二种方法的唯一优点是您不会遍历所有不适用于所选实体的冗余行。但是，在原始 ENTITY_PROPERTIES 表上的数据库上使用索引可以极大地提高性能。

我个人会坚持您的初始设计，应用索引并让数据库引擎确定选择数据的最佳方法，而不是将每个实体属性分离到一个新表中。

# matlab - 理解matlab中的[x:y]结构

> ID：10427449
> 
> 赞同：0
> 
> 时间：2012-05-03T08:07:30.207
> 
> 标签：matlab, vector

我不确定我是否正确理解了以下代码：

```
i1=[0:M-1];
c_ind(i1+1)=i1+1;
i1=[0:M-1];
d_ind(i1+1)=i1+1; 
```

我是否正确假设此代码片段生成两个向量*c_ind*和*d_ind*都包含数字 1, 2, 3, ..., M ？

非常感谢您的赞赏帮助 - 不确定这一点会导致进展困难；）

最佳
- astriffe

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:14:18.803

下面这段代码的八度输出。是的，它确实产生了两个向量，`c_ind`和`d_ind`，都从`1`到计数`M`。

我不知道为什么要这样写。

```
>> M = 4
M =  4
>> i1=[0:M-1]
    c_ind(i1+1)=i1+1
    i1=[0:M-1]
    d_ind(i1+1)=i1+1
i1 =

        0        1        2        3

>> c_ind =

        1        2        3        4

>> i1 =

        0        1        2        3

>> d_ind =

        1        2        3        4 
```

这实际上有效的原因是因为语法`array([indices]) = [values]`将列表映射`values`到由`indices`.

```
>> myvec2([1,4,7]) = [10,20,30]
myvec2 =

       10        0        0       20        0        0       30

>> myvec(5:7) = [10,20,30]
myvec =

        0        0        0        0       10       20       30 
```

# sql-server - 如何将路径传递给存储过程？

> ID：10427451
> 
> 赞同：0
> 
> 时间：2012-05-03T08:07:32.860
> 
> 标签：sql-server, stored-procedures, path

我的问题在我的标题中，我已经定义了一个具有以下内容的存储过程

```
CREATE PROCEDURE [dbo].[sp_doStuff]   
       @path CHAR(256), @databaseName sysname, @backupType CHAR(1)  
AS  
BEGIN 
   SET NOCOUNT ON;  

   DECLARE @sqlCommand NVARCHAR(1000)  
   DECLARE @dateTime NVARCHAR(20)  

   SELECT @dateTime = REPLACE(CONVERT(VARCHAR, GETDATE(),111),'/','') +  
   REPLACE(CONVERT(VARCHAR, GETDATE(),108),':','')   

   IF @backupType = 'F'  
           SET @sqlCommand = 'BACKUP DATABASE ' + @databaseName +  
           ' TO DISK = ' + @path + @databaseName + '_Full_' + @dateTime + '.BAK'''  

   IF @backupType = 'D'  
           SET @sqlCommand = 'BACKUP DATABASE ' + @databaseName +  
           ' TO DISK = ' + @path + @databaseName + '_Diff_' + @dateTime + '.BAK'' WITH DIFFERENTIAL' 

   IF @backupType = 'L'  
           SET @sqlCommand = 'BACKUP LOG ' + @databaseName +  
           ' TO DISK = ' + @path + @databaseName + '_Log_' + @dateTime + '.TRN'''  

   EXECUTE sp_executesql @sqlCommand  
END 
```

当我想运行以下命令时：

```
[dbo].[sp_doStuff] 'D:\FolderName\', 'MyDatabase', 'F'; 
```

它给了我这个错误：

> 消息 102，级别 15，状态 1，第 1 行
> 'D:' 附近的语法不正确。
> Msg 105, Level 15, State 1, Line 1
> 字符串 '' 后面的非闭合引号。

有谁知道为什么这会出错？我可以通过将路径硬编码到过程中来使其工作，但我希望能够在 aa 参数中传递它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:15:37.540

尝试

`' TO DISK = ''' + @path + @databaseName`

ETC...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T08:17:14.097

# mysql - 数据库设计：引用多个 1 到 0..1 关系

> ID：10427454
> 
> 赞同：1
> 
> 时间：2012-05-03T08:07:51.020
> 
> 标签：mysql, sql, database-design

我有许多不同的消息类型（比如说 20 种），我需要根据它们的日期和类型以下列方式选择它们

IE`... WHERE date BETWEEN [fromDate] AND [toDate] AND type = [0 - 20 different types]`

不同类型的消息很少有共同的列（日期是最重要的），但我总是需要“一口气”获取各种评论，按日期排序。消息具有自引用以允许线程对话。消息将始终是一种类型，并且只有一种类型。

因为我在存档中有 5.000.000 条消息，而会话中很少超过 50 条消息，所以我需要能够按日期或会话标识符有效地选择。因此，我有一个“所有消息之母”表和多个`1 .. 0-1`与消息表有关系的额外表：

```
messages:   [id, date, parent_id (nullable), ... ]
msgs_type1: [col1, col2, col3, col4, ...]
msgs_type2: [col1, col2, col3, col4, ...] 
```

**然后这是我的问题：** 您通常如何指定这些类型的表之间的关系？以例如以下方式加入表格有什么（缺点）优点：

```
messages: [id, date, parent_id (null), **msg_type_1 (null), msg_type_2 (null)**, ...]
msgs_type1: [col1, col2, col3, col4]
msgs_type2: [col1, col2, col3, col4]
... 
```

（消息中指定的可选关系）

```
messages: [id, date, **type**, parent_id (null)]
msgs_type1: [**message_id**, col1, col2, col3, col4]
msgs_type2: [**message_id**, col1, col2, col3, col4]
... 
```

（msgs_type 表中指定的强制关系，message 中指定的查找表）

一方面，拥有 20 个可选列感觉很脏，其中（仅）一列必须具有值才能指定消息的类型。

另一方面，改为使用“类型”枚举列，并使用它来手动推断要在哪个表中查找附加信息也感觉不对 - 并且可能会在大多数 ORM 中造成很大的痛苦。

那么这本书对这些类型的结构有什么看法呢？我有 200 条不同类型的消息的那一天呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T18:16:04.363

恕我直言：任何时候你都必须**改变你的数据库**，因为你已经添加了一个新的“类型”“某物”，正如他们所说，*你做错了*。我唯一对这种面向列的表感到满意的情况是，如果它是在生成报告之前完成的。或者，也许，在流程结束时完成，以减轻可能想要生成自己的查询的非技术用户的工作。

具有 5 到 1000 万行的正确索引和规范化的表结构应该仍然可以正常运行。

# c# - 如何将电子邮件保存到具有传递方法 =“网络”的位置

> ID：10427458
> 
> 赞同：1
> 
> 时间：2012-05-03T08:08:12.830
> 
> 标签：c#, asp.net, .net, email, smtp

在我的网络配置中，我可以设置交付方法 = 网络，但它仍然保存在指定的拾取目录中，还是我需要始终编写不同的应用程序？

```
<mailSettings>
    <smtp deliveryMethod="Network" from="">
        <network defaultCredentials="true" host="" password="" port="25" userName="" />
        <specifiedPickupDirectory pickupDirectoryLocation="C:\SentMail" />
    </smtp>
</mailSettings> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:12:38.160

试试这个：

```
<mailSettings>
    <smtp deliveryMethod="Network">
        <network host="mail.mydomain.com" port="25" />
    </smtp>

    <!-- Use this setting for development

    <smtp deliveryMethod="SpecifiedPickupDirectory">
        <specifiedPickupDirectory pickupDirectoryLocation="C:\Temp" />
    </smtp> -->
</mailSettings> 
```

取自[这里](http://weblogs.asp.net/dfindley/archive/2006/04/23/Migrating-from-System.Web.Mail-to-System.Net.Mail.aspx)。

# php - ProPlayer : 嵌入此视频已被其所有者禁用

> ID：10427462
> 
> 赞同：0
> 
> 时间：2012-05-03T08:08:27.823
> 
> 标签：php, wordpress

我在我的 WordPress 博客中使用 ProPlayer 视频插件。当我单击视频时，它显示**嵌入此视频已被其所有者禁用** 当我单独打开 URL 中的视频链接时，它播放良好。我猜是 ProPlayer Plugin 的问题。你能建议我解决这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:46:32.860

问题在于底层的 JW Player。

YouTube 从 AS2 迁移到 AS3，jw 播放器版本需要降级才能播放视频（[来源](http://www.longtailvideo.com/blog/17773/a-word-about-youtube-support-in-the-jw-player)）。

希望这个插件开发人员可以提供解决该问题的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T23:03:56.827

显然，答案就在问题标题本身： embedding was **disabled**。

您没有提及托管视频的网站，但 YouTube *（允许其他人将您的视频嵌入他们的网站）*和 Vimeo *（不允许任何人嵌入此视频）*具有此功能。

您唯一的选择是写信给视频所有者并询问“您能否启用视频嵌入功能？”

# prolog - 如何在 Prolog 中加入矩形？

> ID：10427464
> 
> 赞同：0
> 
> 时间：2012-05-03T08:08:48.237
> 
> 标签：prolog

我有一个关于如何连接矩形以使其成为另一种形状的问题？我创造了`rectangle/2`以下事实：

```
rectangle(1.14, 2.14).    %rectangle(Length, Width).
rectangle(1.36, 3.34).
rectangle(0.20, 2.35).
rectangle(1.00, 1.30). 
```

但是，这些事实是否正确？

[这](http://postimage.org/image/u7g22p1wv/)是我要创建的图像，[这](http://postimage.org/image/uy8s8h4a7/)是详细说明矩形组合方式的图像。

矩形应使用选定的边缘连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T13:28:50.240

两个数不构成矩形，因为矩形有 4 个点。

首先尝试构建带有 4 个参数的子句，如下所示：

```
rectangle(X1/Y1, X2/Y2, ..). 
```

然后你可以这样查询点：

```
?- rectangle(X1/Y2,_,_,_).
X1 = 42
Y1 = 42 
```

因此，您需要从给定的点推断实际的矩形，或者在构建代码时需要断言 rectacle/4 谓词。

# php - 如何使用正则表达式获取这个 substr？

> ID：10427465
> 
> 赞同：1
> 
> 时间：2012-05-03T08:08:50.047
> 
> 标签：php, regex, string, substring

我有 2 个字符串：

```
Ass. Présentation Chiara D29,5cm
Ass. Présentation Chiara Anthracite D29,5cm 
```

我只需要在第二个字符串中保留“Anthracite”这个词，因为这个词不在第一个字符串中

有可能做这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:13:52.720

您可以将字符串拆分为一个以空格分隔的数组，然后从项目数最多的数组中删除项目数最少的数组，剩下的就是您需要的单词。

**编辑：**

```
$string1 = "Ass. Présentation Chiara D29,5cm"
$array1 = explode(" ",$string1);

$string2 = "Ass. Présentation Chiara Anthracite D29,5cm"
$array2 = explode(" ",$string2);

$difference = array_diff($array2,$array1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T08:16:04.740

也许不是最好的方法，但尝试使用`explode`并`array_diff`像这样：

```
$arr1 = explode(' ', $str1);
$arr2 = explode(' ', $str2);
$diff = array_diff($arr2, $arr1); 
```

`$diff`将是存在于`$str2`但不存在于中的单词数组`$str1`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T08:16:20.780

```
$words1 = explode(" ",$str1);
$words2 = explode(" ",$str2);

print_r(array_diff($words1,words2); 
```

[http://php.net/manual/en/function.array-diff.php](http://php.net/manual/en/function.array-diff.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T08:26:06.443

尝试这个：

```
<?php

        $keywordString = "Ass. Présentation Chiara D29,5cm";
        $keywordArray  = explode(" ", $keywordString);        

        $string = "Ass. Présentation Chiara Anthracite D29,5cm";
        $stringArray = explode(" ", $string);

        foreach ($keywordArray as $keyword)
                $stringArray = preg_grep("/{$keyword}/i", $stringArray, PREG_GREP_INVERT);

        echo "<pre>";
        print_r($stringArray);
        echo "</pre>";
        exit;
?> 
```

# ios - Am I supposed do dispose the Image property of a UIImageView to help Garbage Collector in Monotouch?

> ID：10427467
> 
> 赞同：4
> 
> 时间：2012-05-03T08:08:56.633
> 
> 标签：ios, garbage-collection, uikit, xamarin.ios

On my quest to reduce memory usage, another question. I see that `UIImage` and `CGImage` might be candidates for high memory usage in my app. Wherever I use a UIImage, I try to wrap it in a using block to have it `Dispose()`'d as soon as possible.

However, often the `UIImage` ends up in a `UIImageView.Image` property. If I remove the `UIIImageView` from its Superview, am I supposed to `Dispose()` the `Image` property before and set it to null or is this wasted typing?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T13:34:42.207

> 我应该 Dispose() Image 属性吗

**快速回答：**没有。

**长答案：**

`UIImageView.Image`属性selector被[`image`](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIImageView_Class/Reference/Reference.html)保留。即使您（从托管端）处置它，*原生*的retainCount（Objective-C 是引用计数的）`UIImage`仍将高于 0，并且（原生端）`UIImage`不会被释放。

当您处理它时，`UIImageView`它会*释放*`UIImage`它使用的（Apple 的 Objective-C 代码），如果 retainCount 达到 0，它将被本机释放。

**如果**`UIImage`在您停止需要时和处理时之间有很大的延迟，`UIImageView`那么您可能需要设置`UIImageView.Image`为`null`. 这将释放（以 ObjC 方式，即将其 retainCount 减一），`UIImage`并且如果它没有在其他地方使用，它将被（本机）释放。

请注意，如果`UIImageView`未处置 ，则将其`Image`属性设置为另一个`UIImage`将具有相同的结果（旧的将被释放）。

# algorithm - opencv 用于查找轮廓的算法是什么？

> ID：10427474
> 
> 赞同：33
> 
> 时间：2012-05-03T08:09:08.317
> 
> 标签：algorithm, opencv, computer-vision, contour

我需要`cv::FindContours()`在程序中使用，我必须知道其背后的算法。

**openCV**用什么算法来寻找轮廓？

它是如何工作的？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-03T09:05:20.177

如果您阅读[文档](http://opencv.itseez.com/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html#findcontours)，则提到此函数实现了以下算法：

> Suzuki, S. 和 Abe, K.，通过边界跟踪对数字化二进制图像进行拓扑结构分析。CVGIP 30 1，第 32-46 页（1985 年）

OpenCV 是开源的，如果你想看看它是如何实现的，只需要阅读代码： [https ://github.com/opencv/opencv/blob/master/modules/imgproc/src/contours.cpp#L1655](https://github.com/opencv/opencv/blob/master/modules/imgproc/src/contours.cpp#L1655)

~~[该问题](https://stackoverflow.com/questions/3286024/is-there-any-official-place-to-find-opencv-article-references)的答案之一是[相关论文](http://tpf-robotica.googlecode.com/svn-history/r397/trunk/Vision/papers/SA-CVGIP.PDF)~~~~的链接~~，该链接已失效，并且该论文位于付费墙后面，也许谷歌可以帮助找到免费副本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-08-27T13:16:05.690

截至 2018 年 9 月，该论文可通过[Google Scholar](https://scholar.google.ca/scholar?q=Topological%20structural%20analysis%20of%20digitized%20binary%20images%20by%20border%20following&hl=en&as_sdt=0&as_vis=1&oi=scholart)获得。尽管如此，如果论文被删除，这里是摘要：

> 提出了两种边界跟随算法用于数字化二值图像的拓扑分析。第一个确定二值图像边界之间的环绕关系。由于外边界和孔边界分别与 l 像素的连通分量和孔具有一一对应的关系，因此所提出的算法产生了二进制图像的表示，可以从中提取某种特征而不重建图像。第二种算法是第一种算法的修改版本，它只遵循最外边界（即，没有被孔包围的外边界）。当使用顺序数字计算机时，这些算法可以有效地用于二进制图像的分量计数、收缩和拓扑结构分析。

# java - Java正则表达式查找子字符串

> ID：10427476
> 
> 赞同：3
> 
> 时间：2012-05-03T08:09:10.097
> 
> 标签：java, regex, substring

我有以下字符串“类（102）（401）”和“类（401）”我想找到正则表达式来查找子字符串，在我的情况下它总是返回最后一个括号值它是'（401）'

以下是我的代码

```
Pattern MY_PATTERN = Pattern.compile(".*(\\(\\d+\\))");
    Matcher mat = MY_PATTERN.matcher("Class (102) (401)");
    while (mat.find()){
        System.out.println(mat.group());
    } 
```

它正在返回

--( --) --( --)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:14:12.080

您可以使用：

```
Pattern MY_PATTERN = Pattern.compile(".*(\\(\\d+\\))"); 
```

[**看见**](http://ideone.com/ti286)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T08:30:50.327

**试试这个：**

```
(?<=\()[^\)(]+(?=\)[^\)\(]+$) 
```

**解释：**

```
<!--
(?<=\()[^\)(]+(?=\)[^\)\(]+$)

Options: ^ and $ match at line breaks; free-spacing

Assert that the regex below can be matched, with the match ending at this position (positive lookbehind) «(?<=\()»
   Match the character “(” literally «\(»
Match a single character NOT present in the list below «[^\)(]+»
   Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
   A ) character «\)»
   The character “(” «(»
Assert that the regex below can be matched, starting at this position (positive lookahead) «(?=\)[^\)\(]+$)»
   Match the character “)” literally «\)»
   Match a single character NOT present in the list below «[^\)\(]+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
      A ) character «\)»
      A ( character «\(»
   Assert position at the end of a line (at the end of the string or before a line break character) «$»
--> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T08:40:19.213

表达方式如何：`.*\\(([^\\(\\)]+)\\)[^\\(\\)]*$`

它发现 a`(`后跟非括号`[^\\(\\)]`（您想要的字符串），然后是 a `)`，之后只允许非括号，所以它必须是最后一个

# javascript - Dealing with pages with many script files

> ID：10427480
> 
> 赞同：0
> 
> 时间：2012-05-03T08:09:27.447
> 
> 标签：javascript, performance

Our project contains many pages which has up to 20 tabs, each works with different scripts. All the script files are referenced in `<head>` and loads on the first page load. Now we have performance issue because there are too many scripts on the page loads on opening it (about 2k lines of JavaScript per tab). The matter is in much cases user needs to work with 2-3 tabs and as a result more than 60% of code becomes not used. So we need any scripts lazy-loading solution to ease the pages. As HTML for every tab is loaded on demand we can put `<script>` references in every tab that will provide a good working solution. But I'm prety sure including references not in `<head>` is a bad style.
So I wonder, is there any another solution? How such problems are solved in big projects like us? Any advice will be helpfull.
Thanks in advance!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:14:07.167

jQuery 为这个解决方案提供了一个很好的功能：

```
$.getScript("my_lovely_script.js", function(){

   alert("Script loaded and executed.");
   // here you can use anything you defined in the loaded script

}); 
```

默认情况下不缓存。我在 jQuery 网站上寻找了一个解决方案，它声明了这个缓存脚本包含的解决方案。

```
jQuery.cachedScript = function(url, options) {

  // allow user to set any option except for dataType, cache, and url
  options = $.extend(options || {}, {
    dataType: "script",   //Note this
    cache: true,          //Enable caching
    url: url
  });

  // Use $.ajax() since it is more flexible than $.getScript
  // Return the jqXHR object so we can chain callbacks
  return jQuery.ajax(options);
};

// Usage
$.cachedScript("URL HERE").done(function(script, textStatus) {
  console.log( textStatus );
}); 
```

# java - how I can slow grind down the line in android?

> ID：10427486
> 
> 赞同：-1
> 
> 时间：2012-05-03T08:10:25.967
> 
> 标签：java, android, ondraw

I mean I want to drawline but slowly. I write this code to draw line in ondraw method.

```
.
.
.
.
caneta.setARGB(255, 255, 0,0);caneta.setStrokeWidth(10); 
canvas.drawLine(0, ys * 1/2, this.getWidth(), ys * 1/2, caneta);
.
.
. 
```

how I did it slowly?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:45:57.020

这几乎就像一个游戏循环的作品：

- 在 X 毫秒内使你的画布失效（使用循环和 Thread.sleep()）

- 每次循环后增加你的 X/Y 坐标

- 再次处理 onDraw() 中的新坐标

例子：

```
private int x1, x2;
    private int y1, y2;
    private View v;

    public void start()
    {
        for (int i = 0; i <= 250; i++)
        {
             v.invalidate();

             x2 += 1;

            try
            {
                Thread.sleep(50);
            }
            catch (InterruptedException e)
            {
            }
        }
    } 
```

在您现有的视图类中，您已经有了 onDraw 方法

```
 protected void onDraw(Canvas canvas)
        {
        //draw your line here using your X and Y member
                canvas.drawLine(x1, y1, x2, y2, caneta);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:26:00.540

在每个`onDraw`方法调用中，根据所需的速度逐步绘制一部分线。例如，如果你想要一个缓慢的绘图，在每次调用中将大小增加 5 个像素，直到达到整行。

```
private float linePercent = 0;
protected void onDraw (Canvas canvas){

    float lineX = this.getWidth() * linePercent;
    canvas.drawLine(0, ys * 1/2, lineX, ys * 1/2, caneta);
    linePercent += 0.05f;
    if(linePercent >= 1){
        linePercent = 0;
    }
} 
```

在后台线程中，`invalidate`在您的视图上安排一个。

# virtualization - How to set ip for vm from outside

> ID：10427487
> 
> 赞同：0
> 
> 时间：2012-05-03T08:10:27.037
> 
> 标签：virtualization, virtual-machine

I need to set ip from outside of virtual machine. Now we use dhcp server to bind static ip with their MAC. But when the number of vms is larger and large, that's not easy for administer. I want to make one interface for the clients to set the ip of the vm when creating it.

By now, i know i can mount the vm disk and config the network setting before creating the vm. there is one problem for that, the vm disk type may be various, and sometimes they may have totally different partition structure, and may be including LVM,etc. Besides this, i don't know whether it is possible to config ip for Windows operating system with this method.

I don't know how they do this, i mean those Virtual-machine product, like Vmware.

Edit:If those virtual-machine product don't give one interface for client to set ip for vm, then how they manage their ips. we have many many vms, and we specify ip for each of them, the client just use it, they are not authorized to set their ip from within the os, though set, it won't make any sense, they will can't connect to the internet. I think there must be one approach for this. Thanks, any help is appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:18:32.537

# android - Parse Error - Installing apk programmatically

> ID：10427488
> 
> 赞同：1
> 
> 时间：2012-05-03T08:10:38.537
> 
> 标签：android, android-intent, android-emulator, apk

I am trying to install an apk file programmatically. I referred this [site](https://stackoverflow.com/questions/4967669/android-install-apk-programmatically) for doing it.

Now the apk file is downloaded from an url and placed in SDCard. When I try to install it on the device using Intent method,

It is popping up following error

Emulator:

```
 "Parse Error - There is a problem parsing the package",
Logcat(W) : "Unable to read AndroidManifest.xml of /mnt/sdcard/download/myapp.apk",
Logcat(W) : "java.ioException: AndroidManifest.xml",
Logcat(W) : "Parse error when parsing manifest. Discontinuing installation".
Logcat(E) : "java.lang.SecurityException",
Logcat(E) : "java.lang.NullPointerException". 
```

Note: 1) I was able to install the same .apk file using adb. 2) I changed this .apk file to .pdf format before sending it to Server Team and then they changed it back to .apk. I am adding this coz there might be chances for error due to format conversion.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T05:37:13.577

安装至少在以下情况下会给出指定的错误：

*   **签名后更改包名称：**使用签名包的确切名称（而不是调整清单中的名称）

*   **包在更高的 API 级别上编译：**更正清单文件中的 API 级别

*   **包从 SD 卡执行：**从手机内存运行（安装）apk -file 或使用 adb 命令安装它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T05:20:38.057

请检查此代码

```
 private void installApk(){
                            Intent intent = new Intent(Intent.ACTION_VIEW);
                            Uri uri = Uri.fromFile(new File("/sdcard/path"));
                            intent.setDataAndType(uri, "application/vnd.android.package-archive");
                            startActivity(intent);} 
```

# symfony - Symfony2学说逆向工程，不能一对多生成代码

> ID：10427494
> 
> 赞同：1
> 
> 时间：2012-05-03T08:10:53.230
> 
> 标签：symfony, doctrine

当我尝试使用 symfony2 学说逆向工程工具时，我有一对多的关系。例如：

```
A: id, name; B: id, a_id, name 
```

所以逆向工程工具给了我类似的东西：

```
class A{  
  private id;
  private name;
}
class B{
  private id, 
  private A a;
  private name;
} 
```

但我需要的是：

```
class A{
  private id;
  private Bs;
  private name;
} 
```

我怎样才能让教义工具为我生成这个？因为数据在变化，我不想每次数据库变化时都重写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:06:20.533

我很抱歉成为坏消息的带来者，但你不能。唯一的选择是生成实体，然后自己添加细节。

[http://readthedocs.org/docs/doctrine-orm/en/2.0.x/reference/tools.html#entity-generation](http://readthedocs.org/docs/doctrine-orm/en/2.0.x/reference/tools.html#entity-generation)

> 此命令不适合经常使用。它是一个小帮手，并不能很好地支持所有映射边缘情况。使用此命令后，您仍然需要在实体中进行工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:29:41.697

也许你应该通过

[http://symfony.com/doc/current/book/doctrine.html](http://symfony.com/doc/current/book/doctrine.html)

我建议您更改实体文件，然后更新数据库。

# ios - 无法在 gdb 或 lldb 中设置观察点

> ID：10427496
> 
> 赞同：4
> 
> 时间：2012-05-03T08:11:25.553
> 
> 标签：ios, cocoa-touch, debugging, gdb, lldb

我正在尝试在设备上调试我的应用程序时设置观察点。我无法在 gdb 或 lldb 上设置它。

`watchpoint set`在 lldb 上，即使[此页面](http://lldb.llvm.org/lldb-gdb.html)提到它存在，我也没有在调试器中看到该选项。当我尝试运行时`watchpoint set`，lldb 告诉我该命令无效。

在 gdb 上，我确实可以设置观察点（使用`watch var`），但是当我尝试继续执行时，我得到了这个：

```
Can't set hardware watchpoints without the 'Z2' (write-watchpoint) packet. 
```

我在 gdb 窗口中看不到更多输出，我认为我也无法与之交互。该应用程序此时也仍处于挂起状态。

我在 OS X Lion 上使用 Xcode 4.3.2 (4E2002)。我尝试在装有 iOS 5.1 和 iOS 5.0.1 的设备上设置观察点，但在两者上都遇到了同样的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T02:22:18.753

在 Xcode 4.5 之前，不支持使用 lldb 或 gdb 进行 iOS 开发的观察点。

在 Xcode 4.5 中，它们支持使用 lldb 进行 iOS 和 Mac OS X 调试。

在 Xcode 中，在 locals 窗口中，您可以右键单击/控制单击变量，然后会有一个选项来设置观察点。在调试器控制台中，要在名为 foo 的变量上添加观察点，您可以执行以下操作

```
(lldb) watchpoint set variable foo 
```

最短的明确命令在 lldb 中始终有效，所以这会做同样的事情，

```
(lldb) w s v foo 
```

当前的 x86 和 arm cpus 仅支持同时设置 4 个观察点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:32:55.283

我在 Apple Dev Forums 的某处读到：“set 命令存在于主干版本中，但尚不存在于 Xcode 版本中。”

我也遇到了这个问题，我想监视一个变量并查看它的值在哪里变化......

# android - Lazy Loader for Images which have URI Not URL android

> ID：10427500
> 
> 赞同：1
> 
> 时间：2012-05-03T08:11:33.650
> 
> 标签：android, image, uri, loader, lazy-evaluation

I have to load a list of all my phonebook contacts (which is around 1000+ contacts). Previously whenever I had such a large list I used to use Lazy Loader which uses URL for fetching images. But since Phonebook contacts' images are saved as URIs, I am having trouble finding the right lazy loader. I constantly get Out of memory exception. Please need help

# java - TortoiseSVN 从命令行

> ID：10427506
> 
> 赞同：1
> 
> 时间：2012-05-03T08:12:07.773
> 
> 标签：java, svn, maven, tortoisesvn, release

我们正在 Subversion 和 Maven 环境中构建项目。我的客户强迫我使用[TortoiseSVN](http://tortoisesvn.tigris.org)来访问 svn。一切正常，但现在我想用它`maven release:prepare`来创建我的应用程序的发布版本。对我来说麻烦的是 maven 需要一个可以通过`svn`.

如果我理解它，正确的乌龟只允许使用 tortoise.exe 进行命令行访问。知道我如何告诉 maven 使用乌龟而不是 svn 吗？

不幸的是，由于客户端的策略，安装 cygwin 或任何其他 svn 客户端不是一个选项。:-(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T08:23:03.187

从 1.7 开始，TortoiseSVN 在 TortoiseSVN/bin 目录中包含一个 1.7 SVN 命令行客户端的副本。

如果使用此版本也不是一个选项，并且客户端不想让您安装命令行 SVN 客户端，请向我们解释此规则没有意义，因为命令行客户端只是相同的另一个用户界面SVN 库，如果他们坚持，那么你会浪费很多时间，他们会因此损失很多钱，手动做可以自动化的事情。

# playframework - play framework 2.0 - 如何启用 CRUD 模块

> ID：10427507
> 
> 赞同：9
> 
> 时间：2012-05-03T08:12:09.313
> 
> 标签：playframework, crud, playframework-2.0

我想知道如何在 Play V2.0 中启用 CRUD 模块，我为 V1.2.3 找到了这个文档：

```
http://www.playframework.org/documentation/1.2.3/crud 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T08:45:58.827

Play 2.0 目前没有 CRUD 生成

[https://groups.google.com/forum/#!msg/play-framework/0g7YhdzA6Fs/xXSoW25X4ekJ](https://groups.google.com/forum/#!msg/play-framework/0g7YhdzA6Fs/xXSoW25X4ekJ)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T01:00:13.320

您可以尝试[我的 Play2 CRUD 实现](https://github.com/hakandilek/play2-crud)。它不是您习惯使用 Django 的那个，但需要一点点努力才能完成这项工作。

# javascript - transformation- in to an array

> ID：10427509
> 
> 赞同：1
> 
> 时间：2012-05-03T08:12:24.013
> 
> 标签：javascript, arrays, data-structures

Input:

```
{ key : "value" ,
  list : [
    { 
        key : "values1" ,
        list : [
            { key : "value2" , list :[{ key : "simpleValue" } ]
            }
            ]
    },
    {
        key : "value3"
    }
]
} 
```

Output:

{key : ["value" , "values1" , "values2" , "simpleeValue", "values3"]}

the code that I wrote for conversion is

```
var outputArray=new Array();
var count=0;
  function recursion(testData){

if(testData.key==undefined)
{

return ;

}

else
{
    outputArray[count]=testData.key;
    count++;

for(var k in testData.list)
    {

    testData1=testData.list[k];
    recursion(testData1);
    recursion(testData.key);
    }

}

return outputArray;
} 
```

The output will only give me the value list an array,like [ 'value', 'values1', 'value2', 'simpleValue', 'value3' ], how do I use the hash method to get the correct output?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:39:01.173

嗯，这样的？？

```
var inpObj = { key : "value" ,list : [
                    {
                        key : "values1"
                    },
                    {
                        key : "value3"
                    }
                ]
            };

var outputObj = new Object;
var outputArray = new Array();

function recursion(testData){
    if(testData.key==undefined)
    {
        return;
    }
    else
    {
        var newKey={};
        //alert(testData.key);
        outputArray.push(testData.key);

        for(var k in testData.list)
        {
            testData1=testData.list[k];
            recursion(testData1);
            recursion(testData.key);
        }
    }

    return outputArray;
}

recursion(inpObj);
if (outputObj.key == undefined) outputObj.key = outputArray;
alert(outputObj.key.join(", ")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T13:48:58.007

我把这件事搞定了

```
var outputArray=new Array();

function recursion(testData){

if(testData.key==undefined)
{

return ;

}

else
{

    //alert(testData.key);
    outputArray.push(testData.key);

for(var k in testData.list)
    {
    testData1=testData.list[k];
    recursion(testData1);
    recursion(testData.key);
    }

}

var l={};
l.key=outputArray;
return l;
} 
```

# php - cakePHP pagination and passedArgs

> ID：10427510
> 
> 赞同：2
> 
> 时间：2012-05-03T08:12:27.290
> 
> 标签：php, cakephp, pagination, components

I am trying to build in a "search" box on a results page in my cakephp app. The page uses the cakePHP pagination component to show and "page" results. This is perfect, but I am having difficulties to get the next part to work.

**The desired outcome:**

1.  A cakephp form (post) with an input box and a couple of select boxes, including a date selector so that I can select between dates. The user should be able to populate these fields and submit
2.  On submit, the user selection should change the cakePHP pagination conditions in the controller
3.  In the view I want the pagination bar to keep record of the user selection, so that when I filter through different pages, it keeps the users search. I understand this can be achieved using $this->passedArgs, hence why I am using post and not get.

**The code:**

```
 // Form:
 <?php 
      echo $this->Form->create('search', array('class' => false));
           echo $this->Form->input('searchFor');
           echo $this->Form->input('dateFrom');
           echo $this->Form->input('dateTo');
      echo $this->Form->end(); 
 ?>

 // Controller:
 if($this->request->is("post")) {
      $filters = $this->request->data["search"];
      $this->passedArgs["searchFor"] = $filters["searchFor"];
      $this->passedArgs["dateFrom"] = $filters["dateFrom"]." 00:00:00";
      $this->passedArgs["dateTo"] = $filters["dateTo"]." 00:00:00";

      // Assign search parameters:
      if($this->passedArgs["searchFor"] != "") {
           $conditions["Model.field LIKE"] = "%".$this->passedArgs["searchFor"]."%";
      }

      $conditions["Model.created >="] = $this->passedArgs["dateFrom"];
      $conditions["Model.created <="] = $this->passedArgs["dateTo"];

 } else {
      $conditions = array("Result.status_id >=" => 12);
 }

 $this->paginate = array(
     'conditions' => $conditions,
     'order' => array('Result.created ASC'),
     'limit' => 20
 );

 $this->set("results",$this->paginate("Model");

 // The view file:
 <?php
      $this->Paginator->options(array('url' => $this->passedArgs));
 ?> 
```

**Where I am now:**

1.  The initial page loads with all of the results
2.  When I populate the search boxes it does return my results

**The problem:**

1.  I am convinced the way I am doing it is incorrect as I now need to do 2 checks, a) being if results has been posted and b) check if there is passedArgs available. I am 100% convinced this is not the right way of doing it.
2.  Let's say I have 2 free form fields for search, say name and surname, if I leave surname blank my url would be written as below, and this does not look or appear to be correct. That means I have to assign default values to ensure the items below does not happen, which does not appear to be very dynamic.

    [http://localhost/site/controller/action/surname:0/name:John/date:0/](http://localhost/site/controller/action/surname:0/name:John/date:0/)

3.  On refresh it says the page does not exist because the posted values is not available anylonger.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T09:48:34.007

通常我在控制器中这样进行：

```
//transform POST into GET
if($this->request->is("post")) {
    $url = array('action'=>'index');
    $filters = array();

    if(isset($this->data['searchFor']) && $this->data['searchFor']){
        //maybe clean up user input here??? or urlencode??
        $filters['searchFor'] = $this->data['searchFor'];
    }
    //redirect user to the index page including the selected filters
    $this->redirect(array_merge($url,$filters)); 
}

$conditions = array();
//check filters on passedArgs
if(isset($this->passedArgs["searchFor"])){
    $conditions["Model.field LIKE"] = "%".$this->passedArgs["searchFor"]."%";
}

//paginate as normal
$this->paginate = array(
     'conditions' => $conditions,
     'order' => array('Result.created ASC'),
     'limit' => 20
 ); 
```

这个想法是将表单发送的 POST 转换为 GET。所以你不会有分页器和刷新的问题

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:25:34.287

[通过使用这个搜索插件](https://github.com/cakedc/search)，你想要的东西可以做得更简单、更干。

它可以或多或少地自动化您想要的东西，而且它已经可以比您的代码做更多的事情。

所以我建议你直接使用插件或者看看它是如何做到的。:)

# php - Multiple actions triggered from navigation.xml

> ID：10427512
> 
> 赞同：1
> 
> 时间：2012-05-03T08:12:37.927
> 
> 标签：php, zend-framework, zend-navigation

We have a strange issue with the navigation xml, here's a snippet:

```
...
<registration>
      <label>Registration</label>
      <module>mine</module>
      <controller>registration</controller>
      <pages>
          <register>
             <label>Register</label>
             <module>mine</module>
             <controller>registration</controller>
             <action>doregistration</action>
           </register>
      </pages>
</registration>
... 
```

Every time we call the /mine/registration/index action, the /mine/registration/doregistration action gets triggered afterwards (when debugging it can take a second or two)

The /mine/registration/index does get displayed correctly.

This problem occurs throughout the whole application. When we change the action of the second (or sub-) page, this particular action is executed.

Is this a known issue in Zend? Has anyone had this problem before?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:40:56.957

也许这个例子，来自同一个应用程序，同样的问题，让事情更清楚：

在`navigation.xml`：

```
...
<over>
    <label>Over ons</label>
    <module>default</module>
    <controller>over</controller>
    <action>index</action>
    <pages>
        <wat>
            <label>Wat?</label>
            <module>default</module>
            <controller>over</controller>
            <action>wat</action>
        </wat>
        <wie>
            <label>Wie?</label>
            <module>default</module>
            <controller>over</controller>
            <action>wie</action>
        </wie>
        <contact>
            <label>Contact</label>
            <module>default</module>
            <controller>over</controller>
            <action>contact</action>
        </contact>
        <faq>
            <label>Help</label>
            <module>default</module>
            <controller>over</controller>
            <action>faq</action>
        </faq>
    </pages>
</over>
... 
```

对应的`OverController`看起来像这样：

```
class Default_OverController extends Custom_Controller_Action_EhcAction
{

public function indexAction()
{
    return $this->render('index');
}

public function contactAction()
{
    return $this->render('contact');
}

public function wieAction()
{
    return $this->render('wie');
}

public function watAction()
{
    return $this->render('wat');
}

public function faqAction()
{
    return $this->render('faq');
}
} 
```

如您所见，我们的控制器扩展了`Custom_Controller_Action_EhcAction`. 这是一个自定义类，它扩展`Zend_Controller_Action`并添加了一些额外的功能（日志记录、登录用户的身份，...）。这个自定义类不可能是我们问题的原因，如果我们不使用它仍然会发生。

在本例中，如果我们执行`default/over/wat`操作，应用程序还将调用以下节点`default/over/wie`。如果我们在 XML 中切换位置，结果是第二个调用始终是下一个或第一个底层节点。

我们不认为他们是 JavaScript 调用，因为如果我们检查与 Charles 的流量，只会调度一个调用。

此示例的视图脚本仅包含简单的 HTML，没有任何 PHP 或 JS...

希望这将使我们的问题更清楚......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:32:51.037

啊哈！我们找到了问题的原因：链接导航助手 [http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.navigation.links](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.navigation.links)

我们仍然没有真正的解决方案，但那些头部链接并不那么重要。我们不再使用它了。

# actionscript-3 - Adobe 录制声音并保存

> ID：10427518
> 
> 赞同：1
> 
> 时间：2012-05-03T08:13:18.363
> 
> 标签：actionscript-3, adobe, flash, mxml, mxmlc

在下面的代码中，我试图将麦克风内容保存到文件中。保存的文件不播放，每次保存文件时，我看到大小只有 10 个字节。我在代码中做错了什么.谁能告诉我正确的代码来保存它。保存的文件应该相应地播放录制的内容。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
<fx:Script>
    <![CDATA[
        import flash.events.SampleDataEvent; 
        import flash.media.Microphone;
        import flash.net.FileReference;
        import mx.controls.Alert;
        import flash.net.FileReference;
        import flash.display.Sprite;
        import flash.media.Sound;
        import flash.utils.ByteArray;
        import flash.external.ExternalInterface;

        public var _file:FileReference = new FileReference();
        [Bindable] private var micList:Array;
        public var mic:Microphone = Microphone.getMicrophone();
        protected var isRecording:Boolean = false;

        protected function startMicRecording():void 
        { 
            //var mic:Microphone = Microphone.getMicrophone();
            mic.gain = 60;
            mic.rate = 11;
            mic.setUseEchoSuppression(true);
            mic.setLoopBack(true);
            mic.setSilenceLevel(5, 1000);
            Alert.show("In recording");
            isRecording = true;
            mic.addEventListener(SampleDataEvent.SAMPLE_DATA, gotMicData);

        }

        protected function stopMicRecording():void 
        { 

            //isRecording = false;

            try{
            //_file.save( SampleDataEvent.SAMPLE_DATA, "recorded.wav" );
                _file.save(SampleDataEvent.SAMPLE_DATA , "recorded.flv" );
            }
            catch(e:Error)
            {
                Alert.show("In Stopmicrecording"+e);
            }

        }

        private function gotMicData(micData:SampleDataEvent):void 
        { 

            //mic.removeEventListener(SampleDataEvent.SAMPLE_DATA, gotMicData);

        }

        protected var soundRecording:ByteArray;
        protected var soundOutput:Sound;
        protected function playbackData():void 
        { 

        } 

        private function playSound(soundOutput:SampleDataEvent):void
        {

        }

    ]]>
</fx:Script>
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<mx:ComboBox x="150" id="comboMicList" dataProvider="{micList}" />
<mx:Button x="250" id="startmicrec" label="Start Rec" click="startMicRecording()"/>
<mx:Button x="350" id="stopmicrec" label="Stop Rec" click="stopMicRecording()"/> 
<!--<mx:Button x="50" id="setupmic" label="Select Mic" click="setupMicrophone()"/>-->
<mx:Button x="450" id="playrecsound" label="Play sound" click="playbackData()"/>

 </s:Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:45:26.620

您需要将交给您的数据存储`gotMicData`到 a中`ByteArray`，然后保存`ByteArray`。您正在保存事件名称，它是一个字符串（10 个字符长）。

完成此操作后，您需要加载文件并将样本数据传递给声音。您将声音播放 8 次......因为您以 11 KHz 采样但声音以 44 KHz（4x 写入）播放，声音是立体声但麦克风是单声道（再次是 2x）。

您不能将数据直接保存为 WAV 文件……您记录了原始数据。如果您想费心编写正确的 WAV 标头，那么您不必玩将样本数据交给对象并将文件交给`Sound`对象的游戏。这是一个超出这个问题范围的练习。

祝你好运！

```
 import mx.controls.Alert;

        public var mic:Microphone = Microphone.getMicrophone();
        public var recordedData:ByteArray;

        protected function startMicRecording():void 
        { 
            mic.gain = 60;
            mic.rate = 11;
            mic.setUseEchoSuppression(true);
            mic.setLoopBack(false);
            mic.setSilenceLevel(5, 1000);

            recordedData = new ByteArray();
            mic.addEventListener(SampleDataEvent.SAMPLE_DATA, gotMicData);

        }

        protected function stopMicRecording():void 
        { 
            mic.removeEventListener(SampleDataEvent.SAMPLE_DATA, gotMicData);

            try{
                var file:FileReference = new FileReference();
                file.save(recordedData, "recorded.dat" );
            }
            catch(e:Error)
            {
                Alert.show("In Stopmicrecording"+e);
            }

        }

        private function gotMicData(sample:SampleDataEvent):void 
        { 
            recordedData.writeBytes(sample.data, 0, sample.data.bytesAvailable);
        }

        protected var playbackFile:FileReference;
        protected var soundRecording:ByteArray;
        protected var soundOutput:Sound;
        protected function playbackData():void 
        { 
            playbackFile = new FileReference();
            playbackFile.addEventListener(Event.SELECT, playbackFileSelected);
            playbackFile.browse();
        } 

        private function playbackFileSelected(event:Event):void {
            playbackFile.addEventListener(Event.COMPLETE, playbackFileLoaded);
            playbackFile.load();
        }

        private function playbackFileLoaded(event:Event):void {
            soundRecording = playbackFile.data;
            soundOutput = new Sound();
            soundOutput.addEventListener(SampleDataEvent.SAMPLE_DATA, moreInput);
            soundOutput.play();
        }

        private function moreInput(event:SampleDataEvent):void {
            var sample:Number;
            for (var i:int = 0; i < 1024; i++) {
                if (soundRecording.bytesAvailable > 0) {
                    sample = soundRecording.readFloat();

                    // write the same byte 8 times:
                    //   Upsample from 11 KHz to 44 KHz (x4)
                    //   Mono to Stereo (x2)
                    for(var x:int = 0; x < 8; x++)
                        event.data.writeFloat(sample);
                }
            }
        } 
```

# android - 使用 greenDao 时出现 NoClassDefFoundError

> ID：10427519
> 
> 赞同：4
> 
> 时间：2012-05-03T08:13:25.807
> 
> 标签：android, sqlite, dao, noclassdeffounderror, greendao

我正在使用 greenDao 访问我的 Android 手机中的数据库。一切似乎都很好，并且遵守了。但是当我运行程序时，它在 DaoMaster.java -> OpenHelper 类，onCreate 方法在 createAllTables(db, false); 处崩溃；

以下是异常消息：

```
>05-03 15:40:34.109: E/AndroidRuntime(28587): FATAL EXCEPTION: main
05-03 15:40:34.109: E/AndroidRuntime(28587): java.lang.NoClassDefFoundError: com.hook38.sporttimer.model.sql.DaoMaster
05-03 15:40:34.109: E/AndroidRuntime(28587):    at com.hook38.sporttimer.model.sql.DaoMaster$OpenHelper.onCreate(DaoMaster.java:42)
05-03 15:40:34.109: E/AndroidRuntime(28587):    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:165)
05-03 15:40:34.109: E/AndroidRuntime(28587):    at com.hook38.sporttimer.controller.CountdownTimerStoreController.<init>(CountdownTimerStoreController.java:32)
05-03 15:40:34.109: E/AndroidRuntime(28587):    at com.hook38.sporttimer.controller.CountdownTimerController.<init>(CountdownTimerController.java:57)
05-03 15:40:34.109: E/AndroidRuntime(28587):    at com.hook38.sporttimer.CountDownTimerActivity.onCreate(CountDownTimerActivity.java:49)
05-03 15:40:34.109: E/AndroidRuntime(28587):    at android.app.Activity.performCreate(Activity.java:4465)
05-03 15:40:34.109: E/AndroidRuntime(28587):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-03 15:40:34.109: E/AndroidRuntime(28587):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-03 15:40:34.109: E/AndroidRuntime(28587):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-03 15:40:34.109: E/AndroidRuntime(28587):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-03 15:40:34.109: E/AndroidRuntime(28587):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-03 15:40:34.109: E/AndroidRuntime(28587):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-03 15:40:34.109: E/AndroidRuntime(28587):    at android.os.Looper.loop(Looper.java:137)
05-03 15:40:34.109: E/AndroidRuntime(28587):    at android.app.ActivityThread.main(ActivityThread.java:4424)
05-03 15:40:34.109: E/AndroidRuntime(28587):    at java.lang.reflect.Method.invokeNative(Native Method)
05-03 15:40:34.109: E/AndroidRuntime(28587):    at java.lang.reflect.Method.invoke(Method.java:511)
05-03 15:40:34.109: E/AndroidRuntime(28587):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-03 15:40:34.109: E/AndroidRuntime(28587):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-03 15:40:34.109: E/AndroidRuntime(28587):    at dalvik.system.NativeStart.main(Native Method) 
```

我对 NoClassDefFoundError 做了一些研究，这意味着 CLASSPATH 设置不正确。但我检查了构建路径，greenDao.jar 在库中。有什么我错过了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T02:13:02.353

我解决了这个问题。我使用的是 DaoExample 项目中的 greenDao.jar 文件。解决这个问题的方法是......从我的 java 构建路径中删除原始的 greenDao.jar。在我的项目下创建一个名为 libs 的文件夹。从 DaoExample 项目的 libs 文件夹中复制 geenDao.jar 文件，并将其粘贴到我自己项目的 libs 文件中。转到 Java 构建路径、库、导入 jar，然后添加新粘贴的 jar 文件。哇~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-21T21:04:06.707

解决方案非常简单 - 确保导出 Maven 依赖项：

1.  `Project Properties`-> `Java Build Path`-> `Order and Export`-> 打勾`Maven Dependencies` ![项目属性](../Images/f2952f5d1178a103d7adba1c1b65af45.png)
2.  清洁项目

# php - CakePHP 数据库字段更新失败

> ID：10427522
> 
> 赞同：0
> 
> 时间：2012-05-03T08:13:29.877
> 
> 标签：php, postgresql, cakephp

我正在使用 cakePHP 为什么不将名称插入表中，当表更新但没有名称时要传递一个空值接缝？

数据库中的表

```
CREATE TABLE tests (
id serial not null unique primary key,
name varchar,
created timestamp default CURRENT_TIMESTAMP

) 
```

添加.ctp

```
<?php
echo $this->Form->create('Post');
echo $this->Form->input('name');
echo $this->Form->end('RSVP');
?> 
```

测试模型

```
<?php
class Test extends AppModel {
var $name = 'Test';
} 
```

测试控制器

```
<?php
class TestController extends AppController {
public $helpers = array('Html', 'Form');

var $name = "Test";

public function index() {
    $this->set('tests', $this->Test->find('all'));
}

public function view($id = null) {
    $this->Test->id = $id;
    $this->set('Test', $this->Test->read());
}

public function add() {
    if ($this->request->is('post')) {
        if ($this->Test->save($this->request->data)) {
            $this->Session->setFlash('Your post has been saved.');
            $this->redirect(array('action' => 'index'));
        } 
        else {
            $this->Session->setFlash('Unable to add your post.');
        }
    }
}

public function edit($id = null) {
    $this->Test->id = $id;
    if ($this->request->is('get')) {
        $this->request->data = $this->Post->read();
    } 
    else {
        if ($this->Test->save($this->request->data)) {
            $this->Session->setFlash('Your post has been updated.');
            $this->redirect(array('action' => 'index'));
        } 
        else {
            $this->Session->setFlash('Unable to update your post.');
        }
    }
}

public function delete($id) {
        if ($this->request->is('get')) {
            throw new MethodNotAllowedException();
        }
        if ($this->Test->delete($id)) {
            $this->Session->setFlash('The post with id: ' . $id . ' has been deleted.');
            $this->redirect(array('action' => 'index'));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:48:28.130

在您的方法中，您错过了 include `$this->Test->create();`，这将向表中添加新行并在其中插入新数据。

```
public function add() {
    if ($this->request->is('post')) {
        $this->Test->create(); // missed this line
        if ($this->Test->save($this->request->data)) {
            $this->Session->setFlash('Your post has been saved.');
            $this->redirect(array('action' => 'index'));
        } 
        else {
            $this->Session->setFlash('Unable to add your post.');
        }
    }
} 
```

# c++ - 命名空间 std 中所有符号的列表

> ID：10427523
> 
> 赞同：4
> 
> 时间：2012-05-03T08:13:39.017
> 
> 标签：c++

我在哪里可以找到命名空间 std 中声明的所有符号的列表？

实在是找不到了，不知道去哪里找。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-09-27T05:28:13.093

它还没有完成，但 cppreference 正在构建这样一个列表。见这里：[http ://en.cppreference.com/w/cpp/symbol_index](http://en.cppreference.com/w/cpp/symbol_index)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T08:20:35.160

它们有很多，但你可以从[这里](http://www.cplusplus.com/reference/)开始。

# java - 更改一种方法的签名

> ID：10427533
> 
> 赞同：0
> 
> 时间：2012-05-03T08:14:11.420
> 
> 标签：java

所以我有以下方法

```
public static <T extends Comparable<? super T>> void bubbleSort( T[] a)
//public static void bubbleSort(Comparable[] a)
{
    for(int top = a.length-1; top > 0; top--)
        for(int i = 0; i < top; i++)
            if(a[i+1].compareTo(a[i]) < 0)
            {   T tmp = a[i];

                //Comparabl tmp = a[i];
                a[i] = a[i+1];
                a[i+1] = tmp;
            }
} 
```

如何更改方法签名以便能够从类似的东西中调用它

```
public int sortByTitle()
{
    return Sorting.bubbleSort(lib); // (lib is  lib = new ArrayList<Object>();
} 
```

我不能使用收集方法或比较器对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:20:33.357

您正在使用该类`.compareTo`未实现的方法，`Object`这反过来又不会使您的冒泡排序工作，因为不会有该`.compareTo`方法的实现。

在您的情况下，我认为最好创建一个实际实现可比较接口的项目的数组列表，这与您尝试做的相反（更改方法签名以适应方法调用）。

完成此操作后，您应该能够通过使用[toArray](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#toArray%28%29)方法将列表转换为数组来调用该方法。

另一件值得注意的事情是你的`bubbleSort`方法不返回任何东西，因此你的方法调用不应该编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:23:26.237

简而言之，在确保实现元素之前，您将无法执行此操作`lib`（`Comparable`如果无法比较元素，则无法排序）。

> 如何更改方法签名以便能够从类似的东西中调用它

你可以像这样改变它：

```
public static <T extends Comparable<? super T>> void bubbleSort(List<T> a) 
```

但是，更改签名是不够的，因为您必须使用`.size()`而不是`.length`，`.get(i)`而不是`[i]`等。换句话说，您必须重写方法。

再一次，该方法仅适用于 s 的列表`Comparable`，而不适用于 s 的任意列表`Object`。

# vbscript - 检查字符串是否“以”另一个字符串开头

> ID：10427537
> 
> 赞同：11
> 
> 时间：2012-05-03T08:14:16.957
> 
> 标签：vbscript

我想检查一个地址是否以[http://www.youtube.com](http://www.youtube.com)开头。

如果我有这样的事情

```
if rs("mainVideoName")="http://www.youtube.com*" then 
```

这不起作用，那我该怎么做呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-03T08:39:09.307

尝试这个：

```
 Function UrlStartsWith(string1, string2)
     UrlStartsWith = InStr(1, string1, string2, 1) = 1
 End Function

 If UrlStartsWith(rs("mainVideoName"), "http://www.youtube.com") Then

 End If 
```

Starts with 通过使用`IntStr`并确保它返回 1 作为找到搜索字符串的起始位置进行测试。由于您正在测试 URL，因此上面的代码使用 TextCompare 来区分大小写。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T08:16:22.667

您可以为此使用该`InStr()`功能：

```
Dim positionOfMatchedString 
positionOfMatchedString= InStr(rs("mainVideoName"),"http://www.youtube.com")

If positionOfMatchedString > 0 Then
  // Do your stuff here
End If 
```

正如 Anthony 指出的那样，这告诉您 string2*包含*在 string1 中。你可以把它写成：

```
If positionOfMatchedString = 1 Then 
```

*从 .开始*检查它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T13:36:22.623

怎么样...

```
Dim s: s = "http://www.youtube.com"
Dim l: l = Len(s)

If Left(rs("mainVideoName"), l) = s Then
    ' String begins with URL part '        
End If 
```

# entity-framework - 实体框架自动递增字段，不是 Id

> ID：10427540
> 
> 赞同：44
> 
> 时间：2012-05-03T08:14:27.953
> 
> 标签：entity-framework, ef-code-first, code-first

我知道这不是最理想的解决方案，但我需要向我的一个 EF Code First 对象添加一个自动递增字段。此列 id 不是 Id，它是一个 guid。

无论如何我可以在代码中定义自动递增字段，还是自己创建列并在数据库中定义它的自动递增工作？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-05-03T08:36:30.930

您可以使用 注释该属性`DatabaseGenerated(DatabaseGeneratedOption.Identity)`。EF 只允许每个表有一个标识列。

```
public class Foo
{
    [Key]
    public Guid Id { get; set; }

    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public long Bar { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-30T22:00:02.040

旧帖子认为我会分享我在 Entity Framework 6.1.3 中发现的内容。

我使用 C# 和 .NET Framework 4.6.1 创建了一个简单的数据层库，添加了一个简单的存储库/服务类、一个代码优先上下文类，并将我的 web.config 文件指向本地 SQL Express 2014 数据库。

在实体类中，我将以下属性构造函数添加到 Id 列：

```
[Key]
[DatabaseGenerated(DatabaseGeneratedOption.Identity)]
public Guid Id { get; set; } 
```

然后我通过在 Visual Studio 2015 包管理器中键入以下内容创建了一个新迁移：

添加迁移

为迁移命名，然后等待创建 DbMigtation 类。编辑类并添加以下 CreateTable 操作：

```
CreateTable(
"dbo.Article",
    c => new
    {
        Id = c.Guid(nullable: false, identity: true),
        Title = c.String(),
        Content = c.String(),
        PublishedDate = c.DateTime(nullable: false),
        Author = c.String(),
        CreateDate = c.DateTime(nullable: false),
    })
    .PrimaryKey(t => t.Id);
} 
```

上表是一个示例，这里的关键点是以下构建器注释：

```
nullable: false, identity: true 
```

这告诉 EF 将该列指定为 not nullabe，并且您希望将其设置为由 EF 播种的标识列。

使用以下命令再次运行迁移：

```
update-database 
```

这将运行迁移类首先删除表（Down() 方法）然后创建表（Up() 方法）。

Run your unit tests and/or connect to the database and run a select query you should see your table in its new form, add some data excluding the Id column and you should see new Guid's (or whatever data type your choose) to be generated.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-26T15:58:36.027

For those stumbling onto this question for EF Core, you can now create an auto-incrementing column with your model builder as follows:

```
builder.Entity<YourEntity>().Property(e => e.YourAutoIncrementProperty).UseNpgsqlIdentityAlwaysColumn(); 
```

Reference: [https://www.npgsql.org/efcore/modeling/generated-properties.html](https://www.npgsql.org/efcore/modeling/generated-properties.html)

# android - 点击通知状态栏后，手机上不显示进度条

> ID：10427541
> 
> 赞同：1
> 
> 时间：2012-05-03T08:14:28.143
> 
> 标签：android, download, android-notifications, android-progressbar

当我从服务器下载文件时，它的下载良好，在通知状态栏中显示进度条，但是当我从通知状态栏中选择时，它将打开该应用程序，但当时手机中没有显示进度条，但是它在模拟器上工作正常。请帮帮我......

## 谢谢..

```
 public class FileDownloadTestActivity extends Activity {

private static String url = "http://www.xxxxx.in/build/android/android/xyz.apk";
public static final int DIALOG_DOWNLOAD_PROGRESS = 0;
private Button startBtn;
private ProgressDialog mProgressDialog;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    startBtn = (Button) findViewById(R.id.download);
    Boolean boolean1=true;
    if(boolean1){
    startBtn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            new DownloadFileAsync().execute(url);
        }
    });
    boolean1=false;
    }
}

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DIALOG_DOWNLOAD_PROGRESS:
        mProgressDialog = new ProgressDialog(this);
        mProgressDialog.setMessage("Downloading file..");
        mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        mProgressDialog.setCancelable(false);
        mProgressDialog.show();
        return mProgressDialog;
    default:
        return null;
    }

}

class DownloadFileAsync extends AsyncTask<String, String, String> {

    NotificationManager notificationManager;
    Notification notification2;

    @Override
    protected void onPreExecute() { 
        super.onPreExecute();
         notification2 = new Notification(android.R.drawable.stat_sys_download, "downloading..." , System.currentTimeMillis());

         Intent intent = new Intent(getApplicationContext(),FileDownloadTestActivity.class);
           intent .setAction("android.intent.action.MAIN");
           intent .addCategory("android.intent.category.LAUNCHER");      
            final PendingIntent pendingIntent = PendingIntent.getActivity(getApplicationContext(), 0, intent, 0);

            notification2 = new Notification(android.R.drawable.stat_sys_download, "downloading..." , System.currentTimeMillis());
            notification2.flags = notification2.flags | Notification.FLAG_ONGOING_EVENT;
            notification2.contentView = new RemoteViews(getApplicationContext().getPackageName(), R.layout.custom_notification_layout);
            notification2.contentIntent = pendingIntent;
            notification2.contentView.setImageViewResource(R.id.status_icon,R.drawable.junow );
            notification2.contentView.setProgressBar(R.id.status_progress, 100, 1, false);
            getApplicationContext();
            notificationManager = (NotificationManager) getApplicationContext().getSystemService(Context.NOTIFICATION_SERVICE);
            showDialog(DIALOG_DOWNLOAD_PROGRESS);

    }

    @Override
    protected String doInBackground(String... aurl) {
        int count;

        try {

            URL url = new URL(aurl[0]);
            URLConnection conexion = url.openConnection();
            conexion.connect();

            int lenghtOfFile = conexion.getContentLength();

            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream(Environment.getExternalStorageDirectory()+"/xyz.apk");

            byte data[] = new byte[1024];
            long total = 0;

            while ((count = input.read(data)) != -1) {
                total += count;

                long var=(int) ((total * 100) / lenghtOfFile);
                publishProgress("" +var);
                output.write(data, 0, count);
                notificationManager.notify(1, notification2);   
            }
            output.flush();
            output.close();
            input.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;

    }

    protected void onProgressUpdate(String... progress) {
         mProgressDialog.setProgress(Integer.parseInt(progress[0]));
         notification2.contentView.setProgressBar(R.id.status_progress, 100,Integer.parseInt(progress[0]), false);
         notification2.contentView.setTextViewText(R.id.percent,"Downloading in progress  "+progress[0]+" %");

    }

    @Override
    protected void onPostExecute(String unused) {
        dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
        notificationManager.cancel(1); 
        Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setDataAndType(Uri.fromFile(new File(Environment.getExternalStorageDirectory() + "/xyz.apk")), "application/vnd.android.package-archive");
        startActivity(intent); 

    }
} 
```

}

# java - TestNG 参数失败

> ID：10427545
> 
> 赞同：0
> 
> 时间：2012-05-03T08:14:50.797
> 
> 标签：java, selenium-webdriver, testng

初学者testng总是加参数报错

请高手帮忙看看

谢谢！！

java代码：</p>

```
public class NewTest{

@Parameters({"names"})
@Test
public void test(String name){
    System.out.println(name);
} 
```

测试NGxml：</p>

```
<suite name="Suite" parallel="false">
   <parameter name="names" values="aaaaaaaaaa"></parameter>
   <test name="Test">
       <classes>
            <class name="com.test.NewTest"/>
       </classes>
   </test>
</suite> 
```

异常信息：</p>

```
org.testng.TestNGException: 
Parameter 'names' is required by @Test on method Test 
but has not been marked @Optional or defined
in D:\Documents and Settings\huohui\workspace\lianxi\src\test.xml 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:26:06.483

也许你应该试试`value="aaaaaaaaaa"`，不是`values="aaaaaaaaaa"`吗？

# php - PHP使用日期范围显示数据

> ID：10427551
> 
> 赞同：1
> 
> 时间：2012-05-03T08:15:30.347
> 
> 标签：php, mysql

来了，我有答案了。

我只是将 track_reports.php 更改为：

```
if (isset($_POST['chkOtdate']))
                    {
                        $date_from = $_POST['date_from'];
                        $date_to = $_POST['date_to'];
                        if (empty($bagianWhere))
                        {
                            $bagianWhere .= "ot_date between '$date_from' and '$date_to'";
                        }
                        else
                        {
                            $bagianWhere .= " AND ot_date between '$date_from' and '$date_to'";
                        }
                    } 
```

现在没有问题代码可以顺利运行了。感谢各位朋友的帮助。感谢您的建议和意见。

* * *

我的代码有问题：

1.  view_report.php

我们可以根据badge_id、employee_name 和ot_date（带范围）查看报告。当我尝试使用badge_id 和employee_name 发现没有问题时，数据显示。但是当我尝试使用日期范围查找时，发现错误。错误是：`: mysql_fetch_array() expects parameter 1 to be resource, boolean given in on line WarningC:\xampp\htdocs\siix_dev\overtime\track_reports.php327`

```
<form method="post" action="track_reports.php" name="form">
                    <table id="mytable">
                        <tr>
                            <td>
                                <input type="checkbox" name="chkBadge" onClick="apply(this.checked, 'textBox')"> <font class="category">Badge ID</font>
                            </td>

                            <td>
                                <input id="textBox" class="text sign" type="text" name="badge_id">
                            </td>
                        </tr>

                        <tr>
                            <td>
                                <input type="checkbox" name="chkEmp" onClick="apply(this.checked, 'textBox2')"> <font class="category">Employee Name</font>
                            </td>

                            <td>
                                <input id="textBox2" class="text sign" type="text" name="employee_name">
                            </td>
                        </tr>

                        <tr>
                            <td>
                                <input id="myCheckBox" type="checkbox" name="chkOtdate" onClick="apply(this.checked, 'textBox3')" onChange="apply(this.checked, 'textBox4')"> <font class="category">OT Date</font>
                            </td>

                            <td>
                                <font class="category">From</font> <input id="textBox3" class="text sign" type="text" name="date_from" ><font class="category"> To</font> <input id="textBox4" class="text sign" type="text" name="date_to" >
                            </td>
                        </tr>

                        <tr>
                            <td></td>
                            <td>
                                <input type="submit" name="submit" value="Submit">
                            </td>
                        </tr>
                    </table>
                </form> 
```

1.  track_reports.php

    ```
     $bagianWhere = "";

                    if (isset($_POST['chkBadge']))
                    {
                        $badge_id = $_POST['badge_id'];
                        if (empty($bagianWhere))
                        {
                            $bagianWhere .= "badge_id = '$badge_id'";
                        }
                    }

                    if (isset($_POST['chkEmp']))
                    {
                       $employee_name = $_POST['employee_name'];
                       if (empty($bagianWhere))
                        {
                            $bagianWhere .= "employee_name LIKE '$employee_name'";
                        }
                        else
                        {
                            $bagianWhere .= " AND employee_name LIKE '$employee_name'";
                        }
                    }

                    if (isset($_POST['chkOtdate']))
                    {
                        $date_from = $_POST['date_from'];
                        $date_to = $_POST['date_to'];

                        $query=mysql_query("select badge_id, employee_name from t_submissions where ot_date between '$date_from' and '$date_to'");
                        while($row=mysql_fetch_array($query)){
                            echo $row['badge_id'];
                            echo $row['employee_name'];
                        }
                    }

                    $query = "SELECT * FROM t_submissions WHERE ".$bagianWhere;
                    $hasil = mysql_query($query);
                    echo "                      
                    <div id='main' class='wrapper'>
                                    <div class='content-area'>

                    <table cellspacing='0' class='font'>";
                    echo "<tr><th class='th'>Badge ID</th><th class='th'>Employee Name</th><th class='th'>OT Date</th><th class='th'>Department</th><th class='th'>OT From</th><th class='th'>OT To</th><th class='th'>Remarks</th><th class='th'>Submissions By</th><th class='th'>Acknowledged By</th><th class='th'>Approved By</th></tr>";
                    while ($data = mysql_fetch_array($hasil))
                    {
                       echo "<tr><td class='td'>".$data['badge_id']."</td><td class='td'>".$data['employee_name']."</td><td class='td'>".$data['ot_date']."</td><td class='td'>".$data['dept_name']."</td><td class='td'>".$data['ot_from']."</td><td class='td'>".$data['ot_to']."</td><td class='td'>".$data['remarks']."</td><td class='td'>".$data['submission_by']."</td></tr>";
                    }
                    echo "</table>
                    <br>
                    <input type='button' VALUE='Back' onClick='history.go(-1);return true;'>
                    </div>
                    </div>
                    ";

                    ?> 
    ```

有人可以帮助我吗？感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:22:39.090

确保 ot_date 的数据类型是否为**datetime**？也许你用过**varchar**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:43:00.687

在上面的评论`ot_date`中，您声明存储“日期”的列具有 type `VARCHAR`。因此 MySQL 根本不将其内容识别为日期，而是将它们视为一系列无意义的（对它而言）字符（例如单词）。

您可以做的最好的事情是更改您的数据库，以便以 MySQL 识别为日期的格式存储此类日期，例如`DATE`数据类型。要在不丢失现有数据的情况下执行此操作：

1.  重命名现有列并在其位置添加一个新列：

    ```
    ALTER TABLE t_submissions
      CHANGE ot_date ot_date_old VARCHAR(size),
      ADD    ot_date DATE [NOT NULL] AFTER ot_date_old; 
    ```

2.  将旧列的内容复制到新列中，作为日期：

    ```
    UPDATE t_submissions SET ot_date = STR_TO_DATE(ot_date_old, '%d-%b-%Y'); 
    ```

3.  验证新列是否包含预期数据：

    ```
    SELECT ot_date, ot_date_old FROM t_submissions; 
    ```

4.  删除旧列（可选）：

    ```
    ALTER TABLE t_submissions DROP ot_date_old; 
    ```

接下来，为了使您的查询正常工作，MySQL 需要知道如何将提交的日期转换为日期，而不是将它们视为字符串：

```
SELECT badge_id, employee_name FROM t_submissions
WHERE ot_date BETWEEN STR_TO_DATE('%d-%b-%Y', ?) AND STR_TO_DATE('%d-%b-%Y', ?) 
```

请注意，我使用`?`了日期变量来代替日期变量，因为正如我在上面的评论中所提到的，您的代码当前受到 SQL 注入的影响，您**确实**应该将这些变量作为参数传递给 MySQL（因此，它们不会'没有得到 SQL 的评估）。阅读[Bobby Tables](http://bobby-tables.com)了解更多信息。

另请注意，您当前的表单**要求**用户以指定格式在文本框中输入日期，否则查询将失败。您最好要求用户从下拉列表（或某种形式的日历控件）中选择日期部分和/或执行验证，以确保提交的日期格式正确。

最后，在尝试读取可能不存在的记录集之前，您应该测试查询结果是否成功（因为在这种情况下确实没有）。

# forms - Symfony 2 如何使用某些标准嵌入集合表单

> ID：10427557
> 
> 赞同：3
> 
> 时间：2012-05-03T08:15:46.127
> 
> 标签：forms, collections, symfony, embed

我在使用嵌入集合表单时遇到问题，因为我想过滤给定集合上显示的数据。IE

```
<?php
Class Parent
{
    ... some attributes ...

    /**
     * @ORM\OneToMany(targetEntity="Child", mappedBy="parent", cascade={"all"})
     */
     private $children;

    ... some setters & getters ...

}

Class Child
{
    private $attribute1;

    private $attribute2;

    /**
     * @ORM\ManyToOne(targetEntity="Parent", inversedBy="children")
     * @ORM\JoinColumn(name="parent_id", referencedColumnName="id")
     */
     private $parent;

     ... some setters & getters ...
} 
```

然后我使用以下方法构建表单：

```
class ParentChildType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
        ->add('children', 'collection', array(
            'type' => ChildrenType(),
            'allow_add' => true,
        ));
    }
}
...
On controller:

    $parent = $this->getDoctrine()->getEntityManager()->getRepository('AcmeBundle:Parent')->find( $id );
    $forms = $this->createForm( new ParentChildType(), $parent)->createView();

    and then..

    return array('forms' => $forms->crateView()); 
```

我的问题是当我想按模型类和/或模型类过滤集合`$attribute1`时。`$attribute2``Child`

**有一种方法可以按此集合表单的条件进行过滤吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T17:03:35.677

似乎我必须在使用 CreateQuery 之前过滤对象，然后使用这个过滤的对象创建表单。像这样：

```
$parent = $this->getDoctrine()->getEntityManager()->createQuery("
            SELECT p, c 
            FROM AcmeBundle:Parent p
            JOIN p.children c
            WHERE c.attribute1 = :attr1
              AND c.attribute2 = :attr2
           ")
           ->setParameter('attr1', <some_value>)
           ->setParameter('attr2', <some_value>)
           ->getOneOrNullResult();
$forms = $this->createForm( new ParentChildType(), $parent)->createView();
....
return array('forms' => $form->createView()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:59:37.710

我指出你正确的方向（我希望）：

[http://www.craftitonline.com/2011/08/symfony2-ajax-form-republish/](http://www.craftitonline.com/2011/08/symfony2-ajax-form-republish/)

本文处理字段依赖关系。例如，当您选择一个国家/地区时，您将拥有属于该国家/地区的城镇出现在列表中。

看起来它看起来像你的问题

# spring - OSGi 包读取配置属性

> ID：10427561
> 
> 赞同：3
> 
> 时间：2012-05-03T08:16:12.243
> 
> 标签：spring, osgi

我`config.properties`的 OSGi 包中有。但 OSGi 包无法读取它。

```
Application context refresh failed (OsgiBundleXmlApplicationContext(bundle=dao, config=osgibundle:/META-INF/spring/*.xml))
org.springframework.beans.factory.BeanInitializationException: Could not load properties; nested exception is java.io.FileNotFoundException 
```

我正在使用 Spring 阅读`config.properties`

```
<bean id="propertyConfigurer"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="config.properties" />
</bean> 
```

似乎 OSGi 只读取`.xml`文件。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T19:31:47.523

您必须为您的 value 属性指定正确的资源。有一些[内置的实现](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/resources.html#resources-implementations)，例如：

*   类路径资源：`value="classpath:/META-INF/config.properties"`
*   文件系统资源：`value="file:C:/foobar/config.properties"`

如果您想将文件放在库之外，您可以使用系统属性（例如`-DpropertyFile=C:/loremIpsum/config.properties`）来指定路径，例如

```
value="file:${propertyFile}" 
```

从 Spring 3.0 开始。？即使有默认值

```
value="file:${propertyFile:C:/foobar/config.properties}" 
```

（*查看您的 OSGi 框架，了解如何设置系统属性。我也不确定 ClassPathResource 是否运行良好/是否推荐在 OSGi 环境中使用。*）

# c# - asp.net mvc 3 razor 在视图中更改模型值

> ID：10427567
> 
> 赞同：0
> 
> 时间：2012-05-03T08:16:22.327
> 
> 标签：c#, asp.net-mvc, razor

我有带有布尔属性 IsMale 的模型。鉴于我有带有值的表，我如何更改值？

我试过这个：

```
 <td>
            @if (item.IsMale == true)
            {
                @Html.DisplayFor(modelItem => "Male")
            }
            else
            {
               @Html.DisplayFor(modelItem => "Female")
            }
        </td> 
```

但我收到错误：

```
Templates can be used only with field access, property access, single-dimension array index, or single-parameter custom indexer expressions. 
```

在创建视图中，我如何制作单选按钮 >Male >Female 并以 bool 形式返回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:26:09.700

```
<td>

  @Html.Display(item.IsMale ? "Male" : "Female" )

</td> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T08:32:11.633

`@Html.DisplayFor`获取模型的一个属性并输出该属性的值。你想要做的是打印一个硬编码的字符串。你不需要`DisplayFor`那个。试试看嘛：

```
<td>
    @if (item.IsMale)
    {
        <text>Male</text>
    }
    else
    {
        <text>Female</text>
    }
</td> 
```

如果您不将性别设为布尔值，则更好的设计是。您可能想在以后添加“未指定”或其他内容。如果您将性别设置为“一流”实体，则不必对“男性”与“女性”的名称以及单选按钮进行硬编码：

假设您有一个名为“Gender”的类，其属性为“Name”。然后，您的 modelItem 将具有一个属性“Gender”，它是一个“Gender”类型的对象。

```
<td>@Html.DisplayFor(modelItem => modelItem.Gender.Name)</td> 
```

对于收音机，您可以从数据源中检索可用性别的完整列表，并将它们作为 RadioButtonList 放入 ViewModel。然后你可以简单地使用：

```
@Html.RadioButtonListFor(modelItem => modelItem.AllGenders) 
```

另请参阅[是否有人为 ASP.NET MVC 实现 RadioButtonListFor<T>？](https://stackoverflow.com/questions/2512809/has-anyone-implement-radiobuttonlistfort-for-asp-net-mvc/2590001#2590001)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T08:21:35.553

也许你可以使用这样的东西：

```
@Html.CheckBoxFor(model => model.IsMale) 
```

我看到这是您想要的单选按钮...

```
@Html.RadioButtonFor(model => model.IsMale, true)

@Html.RadioButtonFor(model => model.IsMale, false) 
```

# javascript - 按 2 个类和节点属性删除 div

> ID：10427570
> 
> 赞同：0
> 
> 时间：2012-05-03T08:16:28.403
> 
> 标签：javascript, jquery, css, html

想象一下，我们有一些这样的 div

```
<div class="row chapter" node="1">Chapter 1</div>
<div class="row section" node="1">Section 1</div> 
```

Ajax 接受必须删除的节点数组。我对此有几个问题

1）我正在使用以下功能

```
 $.each(result['nodes'], function(column, node)){
                   $(".row."+column).slideUp("slow").remove();
                } 
```

我不知道如何通过 2 个类和节点属性删除。怎么做？

2）AFAIK $.each 函数一一删除。可以一次性全部删除吗？3）如何处理验证问题？我是说，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:30:10.417

您可以使用数组收集选择器，加入它们并立即使用 remove all。

```
var toRemove = [];

$.each(result['nodes'], function(index, value){
    toRemove.push('.row.'+index+'[node='+value+']');
}

//$('.row.chapter[node=1], .row.section[node=1]')
$(toRemove.join(',')).slideUp("slow",function(){
    $(this).remove()
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T04:55:06.443

由于一个对象只有键值对，为了处理两个类和一个属性，您必须更改 JSON 的结构。我建议将其更改为 [{"class1":"foo","class2":"bar","node":1}]。使用该格式，这将用于收集节点：

```
$($.map(result['nodes'], function(o) {
    return "."+o.class1+"."+o.class2+"[node="+o.node+"]";
}).join(",")) 
```

正如约瑟夫所说，您的原始代码将很快删除节点，因此您需要将`remove()`参数放入`slideUp()`：

```
$($.map(result['nodes'], function(o) {
    return "."+o.class1+"."+o.class2+"[node="+o.node+"]";
}).join(",")).slideUp("slow", function() {
    $(this).remove()
}); 
```

示例 jsFiddle：http: [//jsfiddle.net/tSu8z/](http://jsfiddle.net/tSu8z/)

请注意，实际上没有“一个接一个”与“一次全部”的区别。使用上面的代码，jQuery 获得了一次将节点全部向上滑动的命令，但在内部它将遍历节点。同样，这些节点很可能看起来都被同时删除了，但 jQuery 实际上是在遍历它们。它看起来同时的唯一要求`slideUp`是异步的，它是。

# java - Java Web 应用程序：管理图片/缩略图库

> ID：10427572
> 
> 赞同：1
> 
> 时间：2012-05-03T08:16:34.637
> 
> 标签：java, spring-mvc

我对 Java Web 应用程序很陌生，我刚刚开始了一个示例项目，以便在这方面获得一些经验。

这是我目前正在处理的问题：假设我的 Web 应用程序将显示一堆项目，其中每个项目都带有一个包含一张小图片（缩略图）的网格。考虑到性能问题（在这里，我主要考虑每次用户加载项目列表时的有效负载大小），实现此类应用程序的最佳或常见做法是什么？

我们通常会为上传的图像文件创建一个较小尺寸的副本，还是我们使用一些 Javascript、CSS 转换来减少要显示的图像？

仅供参考，我将 Spring MVC 用于我的示例项目。

希望我的问题足够清楚。提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:26:06.327

最好的方法是在上传时为每张图片创建一个单独的缩略图文件。当您的客户展示您的画廊时，他只会得到缩小的图片，然后节省大量的下载和演示时间

# javascript - 用jquery刷新div

> ID：10427573
> 
> 赞同：17
> 
> 时间：2012-05-03T08:16:51.060
> 
> 标签：javascript, jquery, html, refresh

我想刷新一个div。它应该有来自服务器的新信息。所有其他答案都假设您已经从 $.ajax 请求中获取了新数据，并告诉您将该数据加载到您的 div 中，隐藏它，然后再次显示它，如下所示：

```
$("#panel").hide().html(data).fadeIn('fast'); 
```

我知道，我知道，我可能应该只使用 Ajax 获取数据。但现在，我只想刷新 div，不刷新页面，也不要将新的 HTML 放入 div。这可能吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-03T08:26:07.437

> 我只想刷新 div，而不刷新页面……这可能吗？

是的，尽管除非您更改 div 的内容，否则它不会做任何事情是显而易见的。

如果您只想要图形淡入效果，只需删除`.html(data)`调用：

```
$("#panel").hide().fadeIn('fast'); 
```

这是一个您可以随意使用的演示：http: [//jsfiddle.net/ZPYUS/](http://jsfiddle.net/ZPYUS/)

它更改了 div 的内容，而无需对服务器进行 ajax 调用，也无需刷新页面。不过，内容是硬编码的。如果不以某种方式联系服务器，您就无法对这个事实做任何事情：ajax、某种子页面请求或某种页面刷新。

html:

```
<div id="panel">test data</div>
<input id="changePanel" value="Change Panel" type="button">​ 
```

javascript:

```
$("#changePanel").click(function() {
    var data = "foobar";
    $("#panel").hide().html(data).fadeIn('fast');
});​ 
```

CSS：

```
div {
    padding: 1em;
    background-color: #00c000;
}

input {
    padding: .25em 1em;
}​ 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-15T12:36:14.720

我尝试了第一个解决方案，它可以工作，但是最终用户可以很容易地识别出 div 是fadeIn() 的刷新，没有淡入我尝试了 .toggle().toggle() 并且效果很好。你可以试试这样

```
$("#panel").toggle().toggle();
```

它对我来说非常有效，因为我正在开发一个信使并且需要最小化和最大化聊天框，这比上面的代码做得最好。

# google-maps-api-3 - KML 和融合表

> ID：10427575
> 
> 赞同：0
> 
> 时间：2012-05-03T08:16:53.837
> 
> 标签：google-maps-api-3

KML 和 Fusion Tables 有什么区别？什么时候可以使用它们？它们有什么好处和坏处？

问候， 约西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T14:48:25.320

根据谷歌开发者页面

[https://developers.google.com/kml/documentation/kml_tut](https://developers.google.com/kml/documentation/kml_tut)

> KML 是一种文件格式，用于在 Google Earth、Google Maps 和 Google Maps for mobile 等地球浏览器中显示地理数据。

它基本上是地理/空间/位置数据的 XML 表示。

另一方面，[Fusion Tables是基于云的数据表，您可以在其中添加/导入数据。](http://support.google.com/fusiontables/bin/answer.py?hl=en&answer=184641)然后，您可以通过多种不同方式查询这些表。谷歌还将允许您以多种不同的方式可视化数据，包括图表等，以及在地图上。

KML 和 Fusion Tables 是如何关联的？您可以将 KML 数据存储在 Fusion Table 的列中，Google 会将表中的行与 Google Map 进行映射。

简单;)

# php - 倒计时归零时如何显示消息？

> ID：10427577
> 
> 赞同：2
> 
> 时间：2012-05-03T08:17:07.990
> 
> 标签：php

我有一个问题需要您的帮助，如果您有任何解决方案，请帮助我。问题如下：我使用 $currenttime 和 $settime 变量来设置 currenttime 和 targettime

```
$currenttime = date('Y-m-d H:i:s');
$settime = "2012-o5-03 02:10:00";

$diff1 = abs(strtotime($currenttime) - strtotime($settime)); 
```

在 $diff1 的基础上，我们开始倒计时并且倒计时工作正常。

现在我想在 $settime 和 $currenttime 相等时显示一条消息，我已经使用了这个代码

```
 if(strtotime($currenttime) == strtotime($settime))
    {
        echo "Your time begin just now";
    } 
```

但是在倒计时归零后它应该显示消息但它没有显示，如果有人有任何解决方案请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:27:19.330

我看过你的代码，声明这样的 o 而不是 0 有一点错误

&我写的代码如下....

```
echo $currenttime = date('Y-m-d H:i:s');

echo $settime = "2012-05-03 12:20:50";

$diff1 = abs(strtotime($currenttime) - strtotime($settime));

if($currenttime != $settime)
{
    echo "Your time not yet set";
}
else
{
    echo "Your time begin just now";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T08:22:26.783

如果脚本没有在当前时间和触发时间相等的确切秒数运行，我倾向于比较比预期触发时间晚的时间。

```
if(strtotime($currenttime) >= strtotime($settime))
{
    echo "Your time begin just now";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T08:22:19.833

不要使用相等，如果你的脚本调用有点晚，你永远不会到达那里。使用大于`>`等于过去目标的所有时间执行此操作，或检查时间之间的差异是否很小（如`abs(time1 - time2) < 2`），因此您知道当前时间距目标时间近 2 秒。

# sql-server-2008 - 使用链接服务器时的字段长度限制

> ID：10427581
> 
> 赞同：0
> 
> 时间：2012-05-03T08:17:38.873
> 
> 标签：sql-server-2008, linked-server

我在数据库中有一个视图，该视图使用了曾经长度为 varchar 30 并且现在更新为 varchar 50 的列。

我可以直接在数据库上执行选择，它会返回预期的结果。

当我在链接服务器中执行查询的不同服务器上运行相同的查询时，会出现错误：

> 链接服务器“myserver”的 OLE DB 提供程序“SQLNCLI”返回的数据与列“[192.168.0.107].[MyDB].[dbo].[Myview].Mycolumn”的预期数据长度不匹配。（最大）预期数据长度为 30，而返回的数据长度为 50。

这不是插入到列长度为 30 的表中，我不知道长度 30 的来源。它实际上只是一个选择查询。

# ios - UIImagePickerController 白屏？

> ID：10427582
> 
> 赞同：0
> 
> 时间：2012-05-03T08:17:43.150
> 
> 标签：ios, delegates, uiimagepickercontroller, white-box

早上好。

我遇到了 UIImagePickerController 除了白色之外没有显示任何内容的问题。我的主头文件中有一个 320x320 UIImageView：

```
IBOutlet UIImageView *_cameraView; 
```

随着：

```
@property (nonatomic, retain) UIImagePickerController *_cameraPicker;
@property (nonatomic, retain) UIImage *_noCam; 
```

_noCam 是在用户没有相机时放置在视图中的图像。这很好用。

我正在尝试在这个方形视图顶部显示（没有标准相机 GUI，但现在可以等待）相机。在我的主要课程中，我有：

```
- (void)viewDidAppear:(BOOL)animated {
[super viewDidAppear:animated];
NSLog(@"viewDidAppear did appear too");
//camera view etc
if (![UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
    //code here to not allow picture taking, probably put up something saying you don'thave a camera on your device
    NSLog(@"no cam available");
    _noCam = [UIImage imageNamed:@"noCam.png"];
    [_cameraView setImage:_noCam];
} else {
    //take the shot
    _cameraPicker = [[UIImagePickerController alloc] init];
    _cameraPicker.delegate = _cameraView;
    _cameraPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
    NSLog(@"cam is available");
} 
```

}

我猜我在设置委托时遇到了问题。_self 给我一个类型的错误：

'来自不兼容的类型'ViewController *const _strong'

我正在使用 NSLogs 来检查方法是否正常工作，它告诉我调用了 viewDidLoad 和 viewDidAppear 方法并且检测到了摄像头但是我只是得到了白色视图。

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:20:15.647

您需要以某种方式显示选择器，您可以使用默认 GUI：

```
 [self presentModalViewController:_cameraPicker animated:YES]; 
```

或者查看[UIImagePickerController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)`cameraOverlayView`。

# android - 在自定义适配器内单击按钮更改编辑文本的文本

> ID：10427584
> 
> 赞同：0
> 
> 时间：2012-05-03T08:18:23.717
> 
> 标签：android

如何更改嵌入在列表视图中的编辑文本中的文本。我想更改按钮单击时的文本值

```
holder.txtQty.setTag(position);
    holder.plus.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            String val = holder.txtQty.getText().toString();
            Float f = new Float(val);
            f = f + 1;
            holder.txtQty.setText(f.toString().replace(".0", "").trim());
        }
    }); 
```

但在此只有第一行和最后一行编辑文本更改。我需要相应的编辑文本来更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:33:44.983

如果要更改edittext 的文本，则可以将其存储在arraylist 中。假设如果单击第三个元素，那么您可以从 arraylist 中获取（位置）然后设置它。最初将所有值设置为默认值。所以通过这种方式，您可以设置并最终从您的数组列表中获取文本。每次edittext文本将更改然后获取位置然后将其保存到您的arraylist...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:43:06.327

我会在您希望更改的文本列表中获取位置，编写一个公共方法来替换该位置的内容，然后通知自定义适配器数据集已更改。

例如：

```
public void replaceItemAt(int position, String newText)
{
    //Replace the item in the array list
    this.textfieldarraylist.set(position, newText);
    //Let the custom adapter know it needs to refresh the view
    this.notifyDataSetChanged();
} 
```

# javascript - Iphone：点击/点击“开始”按钮后，虚拟键盘不会隐藏

> ID：10427587
> 
> 赞同：3
> 
> 时间：2012-05-03T08:18:39.373
> 
> 标签：javascript, iphone, html

我有一个带有输入字段和提交按钮的表单。这里没什么好看的...

在 iPhone（iPhone 4S、iOS 5.1）上，我使用虚拟键盘填充输入字段，当我单击/点击键盘的 Go 按钮时，表单已提交。但是虚拟键盘在提交后不会隐藏。

如果我使用表单的提交按钮，键盘就会消失。仅当我单击键盘的 Go 按钮时才存在此问题

我应该检查任何 javascript 事件吗？或者你对我有什么暗示？

顺便说一句：在具有相同结构的其他形式中，不存在此问题。

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-03T08:30:29.650

在点击事件中使用此代码来关闭虚拟键盘

`document.activeElement.blur();`

# perl - 理解一个简单的 Perl 结构

> ID：10427593
> 
> 赞同：0
> 
> 时间：2012-05-03T08:19:08.957
> 
> 标签：perl

作为一个非 Perl 程序员，我想确定我已经很好地理解了我将要移植到 Python 的结构，

使用时：

```
if (s/^([$PChar])(.)/$2/) {
  print $1,"\n";
  $finished = 0;
} 
```

*   $1, $2 等匹配正则表达式
*   s/搜索/替换为/

我真的不确定匹配/替换是否在打印 $1 之前完成？并且它是否在当前缓冲区内“就地”完成（即 $F，即 $_ 逐行读取，按其空格字符拆分），这正在改变它（所以如果我理解得很好，（[$PChar]）当@字符串的开头在上述语句中被完全剥离/丢失时）？

编辑：不，也许它没有丢失，第一个括号部分被捕获，然后打印为 $1 + 换行符然后......不，不明白什么变成了 $2...... 可能是缓冲区更改为第二个括号部分？/结束编辑。

还有任何环境或允许在 Win 平台上进行一些逐步调试的最佳环境是什么？我知道有这个，我不会问这个问题。而且我不需要学习 Perl，只需要能够阅读和适应这个脚本。

这是引人入胜的部分：

```
@F = split;
for( $j=0; $j<=$#F; $j++) {
  my $suffix="";
  $_ = $F[$j];
  # separate punctuation and parentheses from words
  do {
$finished = 1;
# cut off preceding punctuation
if (s/^([$PChar])(.)/$2/) {
  print $1,"\n";
  $finished = 0;
}
# cut off trailing punctuation
if (s/(.)([$FChar])$/$1/) {
  $suffix = "$2\n$suffix";
  $finished = 0;
} 
```

整个脚本 tokenize.pl 可以在[这里](http://opus.lingfil.uu.se/tools/public/uplug/ext/tree-tagger/cmd/tokenize.pl)看到，而原始的 tar.bz 如果从[这里](ftp://ftp.ims.uni-stuttgart.de/pub/corpora/tagger-scripts.tar.gz)

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:26:03.370

```
# try to delete the first character from the string contained in
# $_ if that character is one of the characters contained in
# the string $PChar. The deletion is done by replace the first and
# second character by only the second character.
if (s/^([$PChar])(.)/$2/) {

  # if the replacement was successful, print the deleted character.
  print $1,"\n";
  $finished = 0;
} 
```

# javascript - 将变量放入 css 按钮的 href 属性

> ID：10427594
> 
> 赞同：3
> 
> 时间：2012-05-03T08:19:15.530
> 
> 标签：javascript, css, html

我想将包含 url 的变量影响到 css 按钮的 href 属性，我尝试了 location.href 但它不起作用。

这是我的按钮说明：

```
 <div>
          <p><a id="gameNextLevel" class="button"  href="">Next</a></p>
      </div> 
```

这是我的 JSF 相关代码：

```
 var uiNextLevel = $("gameNextLevel");
            matchingGame.savingObject.currentLevel="game6.html";

                uiNextLevel.click(function(e) {
                e.preventDefault();
                                // location.href = "login.html";
                 location.href =  matchingGame.savingObject.currentLevel;  

                }); 
```

请有任何想法，提前谢谢你:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:21:51.747

您错过了`#`选择器中的哈希，这意味着`id`

```
var uiNextLevel = $("#gameNextLevel"); 
```

此外，对于“死链接”，`#`也在`href`.

```
<a id="gameNextLevel" class="button"  href="#">Next</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T08:52:08.753

```
 uiNextLevel.click(function(e) {
                e.preventDefault();

                $(this).attr("href") =  matchingGame.savingObject.currentLevel;  

                }); 
```

# ruby-on-rails-3 - 如何在我的 Rails 应用程序中知道名称 Helpers

> ID：10427595
> 
> 赞同：0
> 
> 时间：2012-05-03T08:19:16.680
> 
> 标签：ruby-on-rails-3, helpers

我有路线，

```
resources :categories do
resources :products
end 
```

我如何检查在 Rails 应用程序中创建的所有帮助程序的名称，

在[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

有文档，但我可以列出名称，以便我可以轻松查看和使用助手名称。

**更新：** 经过一番研究，我发现“资源：类别”被称为 REST 完整资源，“资源”生成类似“categories_path、categories、edit_category_path、new_category 等”的代码。

现在我的问题是如何列出为“resource :cateogires do resources :products end”生成的代码

比如，edit_category_product_path，我想知道为这个嵌套资源生成的所有路径代码。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:21:45.183

`rake routes`+ `_path`or输出的第一列`_url`

# jquery - 通过 jquery modal 提交表单到 codeigniter 控制器

> ID：10427596
> 
> 赞同：0
> 
> 时间：2012-05-03T08:19:35.137
> 
> 标签：jquery, ajax, codeigniter, modal-dialog

我在通过 ajax jquery 提交表单时遇到问题。我的问题是，如何在不刷新页面的情况下将 jquery 模态表单提交给 codeigniter 控制器？同时，如果提交的数据包含来自codeigniter控制器的错误（验证），jquery将如何显示错误信息？

这是我的代码

**js脚本**

```
$(function() {

// Dialog
$('#dialog').dialog({
    autoOpen: false,
    width: 380,
    height:300,
    buttons: {
        'Save': function() {

  function submitForm(){

  $.ajax({
  type : 'POST',
  url : 'http://localhost/hmvc/index.php/sysconfig/sysmenu/create',
  data : $('#menu_form').serialize(),
  success : function(data) {
      // Show OK message
      alert('ok');
  },
  error: function(error){
      // Show error message
      alert('error');
  }
});

return false;
}

        },
        'Cancel': function() {
            $(this).dialog("close");
        }
    } 
 }); 

// Dialog Link
$('#dialog_link').click(function(){
    $('#dialog').dialog('open');
    return false;
}); 

}); 
```

**控制器**

```
function _validate()
{
    $config = array(

                array(
                'field'=>'sysmenu_name',
                'label'=>'menu name',
                'rules'=>'trim|max_length[30]|htmlspecialchars|required|xss_clean'
                ),

                array(
                'field'=>'sysmenu_link',
                'label'=>'hyperlink',
                'rules'=>'trim|max_length[100]|htmlspecialchars|required|xss_clean'
                ),

                array(
                'field'=>'sysmenu_sequence',
                'label'=>'sequence',
                'rules'=>'trim|max_length[2]|htmlspecialchars|required|xss_clean'
                )

              );

    $this->form_validation->set_rules($config);

    $this->form_validation->set_error_delimiters('<div class="error_msg">', '</div>');
}

function create()
{
  if($this->input->is_ajax_request())
  {
    $this->_validate();
    if($this->form_validation->run($this)==FALSE)
    {

           echo validation_errors();
    }

    } else {

        $menu_level = getValue_where('sysmenu_level',"sysmenu_id ='".$this->input->post('sysmenu_parent_id')."'",'base_sysmenu') + 1;

        $data = array(
                'sysmenu_name'=>$this->input->post('sysmenu_name'),
                'sysmenu_parent_id'=>$this->input->post('sysmenu_parent_id'),
                'sysmenu_link'=>$this->input->post('sysmenu_link'),
                'sysmenu_level'=>$menu_level,
                'sysmenu_sequence'=>$this->input->post('sysmenu_sequence')
                );

        $this->sysmenu_model->insert_menu($data);
        $this->index();
    }
} 
```

**看法**

```
<div id="dialog" title="<?php echo $this->lang->line('add_new_menu') ?>">
<div class="notice_msg"><?php echo $this->lang->line('compulsary'); ?></div><br />

<div class="errors"><!-- append the error message here --></div>

<?php echo form_open('','class=normal_form name=create_menu id=menu_form'); ?>
<label><?php echo $this->lang->line('menu_name'); ?></label><?php echo form_input('sysmenu_name'); ?>*<br />
<label><?php echo $this->lang->line('parent_menu'); ?></label><?php //echo form_input('sysmenu_parent_id'); ?><?php echo form_dropdown('sysmenu_parent_id', dropdown_where('sysmenu_id','sysmenu_name',"sysmenu_level = 1",'base_sysmenu'), ''); ?><br />
<label><?php echo $this->lang->line('menu_link'); ?></label><?php echo form_input('sysmenu_link'); ?>*<br />
<label><?php echo $this->lang->line('menu_sequence'); ?></label><?php echo form_input('sysmenu_sequence','','size=12, maxlength=2'); ?>*<br />
<label>&nbsp;</label><?php //echo form_submit('data',$this->lang->line('btn_save')); ?>
<?php echo form_close(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:56:30.977

使用以下标准。

在 Controller 类中使用一种方法来初始化 View Page。

```
 public function CreateStudents() {

        $this->load->helper('form'); // include form helper

        $data['title'] = "Create Students Page"; //Title of the page

        $this->load->view('templates/header', $data); // header
        $this->load->view('createstudents', $data);  // main content
        $this->load->view('templates/footer', $data); // footer
    } 
```

然后创建 Ajax 方法。提交表单时执行此方法。

```
 public function CreateStudentsAjax() {

    $this->load->helper('form');
    $this->load->library('form_validation');
    $this->form_validation->set_error_delimiters('', '');

    $this->form_validation->set_rules('roll', 'Roll Number', 'required');
    $this->form_validation->set_rules('name', 'Name', 'required');
    $this->form_validation->set_rules('phone', 'Phone', 'required');

    if ($this->form_validation->run()) {

        $this->welcome_model->InsertStudents();
        echo json_encode("Oks");
    } else {

        $data = array(
            'roll' => form_error('roll'),
            'name' => form_error('name'),
            'phone' => form_error('phone')
        );

        echo json_encode($data);
    }
} 
```

在视图页面中添加一个表单

```
 <div id="message">

 </div> 

<?php echo form_open('welcome/CreateStudentsAjax'); ?>

    <label for="roll">Student Roll Number</label>
    <input type="text" id="txtRoll" value="" name="roll"/>

    <label for="Name">Students Name</label>
    <input type="text" id="txtName" value="" name="name"/>

    <label for="Phone">Phone Number</label>
    <input type="text" id="txtPhone" value="" name="phone"/>

    <input type="submit" name="submit" value="Insert New Students"  />

    <?php echo '</form>'; ?> 
```

脚本是

```
<script type="text/javascript">

        $(document).ready(function(){

            $('form').submit(function(){
                //alert('ok');      
                $.ajax({
                    url:this.action,
                    type:this.method,
                    data:$(this).serialize(),
                    success:function(data){
                        var obj = $.parseJSON(data);

                        if(obj['roll']!=null)
                        {                               
                            $('#message').text("");
                            $('#message').html(obj['roll']);
                            $('#message').append(obj['name']);
                            $('#message').append(obj['phone']);
                        }
                        else
                        {                               
                            $('#message').text("");
                            $('#message').html(obj); 
                        }

                    },
                    erro:function(){
                        alert("Please Try Again");
                    }                        
                });
                return false;
            });                        
        });

    </script> 
```

这就是全部。希望大家喜欢代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:49:50.377

我会尽力提供帮助，但您必须对其进行测试：

1.  确保您的表单返回 false，以便您将禁用它的默认行为（如[http://s.zah.me/IouBgK](http://s.zah.me/IouBgK)但经过一些修改，添加`return false;`并更改`data`为`data : $('#yourformID').serialize(),`）。
2.  您必须在控制器中检查您提交的数据，以查看它是否是 ajax 请求`$this->input->is_ajax_request()`，然后您将回显验证结果或您的控制器将执行的任何操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T08:31:10.557

您必须手动提交表单，并在 AJAX 调用中处理成功/错误。

从内部调用这样的函数`Save`：

 `````
function submitForm(){

 $.ajax({
  type : "POST",
  url : "sysconfig/sysmenu/create",
  data : postData, // Add your form data as inputname1=value1&inputname2=value2....
  success : function(data) {
   // Show OK message
  },
  error: function(error){
   // Show error message
  }
 });
} 
`````

# google-sheets - 如何在 Google 表格中将数字转换为小时

> ID：10427597
> 
> 赞同：16
> 
> 时间：2012-05-03T08:19:50.123
> 
> 标签：google-sheets, google-sheets-formula

1950 分钟是 32.5 小时。如何使用 Google 表格中的公式计算此值？

我正在记录完成任务所花费的分钟数，并且需要一种将这些数字转换为 Google 电子表格中的小时数的方法。

我有一列包含分钟行，每个任务1行。然后需要将此列的总和相加，然后转换为小时。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-05-08T14:57:10.567

这是一个将分钟转换为小时：分钟的函数，

```
=if( A1 = 0 ; "" ; concatenate( quotient( A1 ; 60 ) ; ":" ;MOD(A1  ; 60) )) 
```

62 --> 1:2

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-01-01T21:19:48.680

使用 convert 函数将数值转换为不同的度量单位

```
=CONVERT(A1; "mn"; "hr") 
```

[文档](https://support.google.com/docs/answer/6055540)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-03T09:23:57.957

1.  使用函数将所有值相加**`=SUM(number1,number2,number3,number4,...)`**。示例：`=SUM(A1:A200)`将 A1、A2、A3 ... 到 A200 的所有数字相加。
2.  将总小时数（它位于具有 =SUM 函数的字段中）除以 60（当然是 1 小时 60 分钟），**`=DIVIDE(number1,number2)`** 例如：`=DIVIDE(A201,60)`。如果将`=SUM`函数放在字段 A201 中，则将该字段的结果除以 60。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-08-29T12:57:26.217

这是一个将分钟转换为 的函数`hour:minutes`：

```
=CONVERT(A1,"mn","hr")/24 
```

其中 A1 是您要转换的部分

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-06-04T22:48:13.367

皮埃尔的回答大部分是正确的。但是，如果分钟数低于 0，它不会正确输出时间。如果您需要处理负时间量，请改用以下公式：

```
=CONCATENATE(IF(AND(A1 < 0, A1 > -60), "-", ""), QUOTIENT(A1, 60), ":", TEXT(MOD(ABS(A1), 60), "00")) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-03-16T01:18:39.300

**我已经改进了它：**

* * *

*   123到适当的2h 3min
*   不要显示无意义的 0。
    *   不显示“0 分钟”（数字完全可以被 60 整除）例如 120 分钟到 2 小时而不是 2 小时 0 分钟
    *   不显示“0h”（数字小于 60）例如 40min 到 40min 而不是 0h 40min
*   要使用只需将 A1 替换为包含分钟的单元格的单元格编号。

* * *

```
=IF (A1=0, "", CONCATENATE ( IF(QUOTIENT(A1,60)=0, "", CONCATENATE (QUOTIENT(A1,60),"h ")  ), IF(MOD(A1,60)=0,"",CONCATENATE (TEXT(MOD(A1,60),0),"min")))) 
```

# ruby - `highline` gem 已经安装，但是 `commander` 拒绝安装

> ID：10427599
> 
> 赞同：0
> 
> 时间：2012-05-03T08:19:53.043
> 
> 标签：ruby, gem, highline

当我输入`gem install commander`时，我得到：

```
Error installing commander:
commander requires highline (~> 1.6.11) 
```

我什至做了`gem install highline`（“成功安装了highline-1.6.11”），我得到了同样的错误。此错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:17:39.283

检查您是否在适当的`bundle`和/或`rvm`会话上下文中。

也许您`highline`在一个上下文中安装了正确的版本，但 gem 是从另一个上下文加载的。

# javascript - 通过 jQuery 检查 jquery 不显眼的验证是否为真

> ID：10427600
> 
> 赞同：9
> 
> 时间：2012-05-03T08:19:53.183
> 
> 标签：javascript, jquery, asp.net-mvc-3, validation, unobtrusive-validation

我使用 MVC 3 模型验证属性和 jquery unobtrusive 来显示验证错误消息，当表单提交返回确认时也使用脚本。所以我需要检查所有字段是否有效，然后返回 Confirm: 类似于以下伪脚本：

```
$('div.FormNeedConfirm form').submit(function () {
    if ($(this).validate() == true) {
        var Message = $('#FormConfirmMessage').val();
        return confirm(Message);
    }
}); 
```

但我不知道 if 条件下到底应该是什么。你的建议是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-05T05:18:59.487

```
if ($(this).valid()) {

    var Message = $('#FormConfirmMessage').val();
    return confirm(Message);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:45:03.307

`if ($(this).validate() = true) // your if condition should be "==".` 改成这样

```
if ($(this).validate() == true) 
```

# php - Zend Server CE 5.6.0 和 WSO2 WSF/PHP 的 PHP malloc 错误

> ID：10427607
> 
> 赞同：2
> 
> 时间：2012-05-03T08:20:18.213
> 
> 标签：php, wso2, zend-server-ce

从 Zend Server Community Edition 5.5 升级到 5.6 后，当我尝试使用 WSO2 Web Services Framework for PHP 连接到 Web 服务时，PHP 遇到 malloc 错误。

wsf_php_client.log 中的最后一行输出是

```
[debug] (...)/wso2/2.1.0/scripts/dynamic_invocation/wsf_wsdl_util.php(1329) [WSF/PHP] importing xsd: (...) from: (...) 
```

PHP抛出的错误是

```
php(38384,0xa0ab0540) malloc: *** error for object 0x401bf61: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug 
```

每次尝试的内存地址 0xa0ab0540 似乎都是一致的。

有没有办法找出问题出在哪里？是在 php 可执行文件中，在 apache PHP 模块中还是在 WSF/PHP 本身中可以找到问题？

Zend Server CE 5.6 运行 PHP 5.3.9

```
PHP 5.3.9-ZS5.6.0 (cli) (built: Dec 22 2011 12:28:41) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:33:50.433

malloc 错误似乎与 WSF 扩展有关。在我从源代码重建它之后，我让它按预期工作。与之前的唯一区别是我在编译时添加`CC=clang CXX=clang`了命令。`./configure`

**更新：** 我的结论有点为时过早。如果我在 WSDL 模式下运行 WSF，则会出现 malloc 错误。如果我明确发送 SOAP 信封，我不会收到错误消息。在 Zend Server CE 5.5 上运行时，WSDL 模式运行良好。

# javascript - 在 php html 中单击返回时显示除图像之外的所有值

> ID：10427609
> 
> 赞同：0
> 
> 时间：2012-05-03T08:20:26.020
> 
> 标签：javascript, html

```
<input type='submit' onclick="history.go(-1)" /> 
```

通过使用它，字段中的所有值都显示，但图像不显示。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:23:13.733

您应该检查浏览器中是否禁用了缓存 - 或者您的 img 没有。

它应该工作，你应该看到图像。

也许缓存禁用机制已打开。

# google-maps-api-3 - 如何使用 jquery-ui-map 获取点击事件的纬度和经度

> ID：10427610
> 
> 赞同：3
> 
> 时间：2012-05-03T08:20:27.023
> 
> 标签：google-maps-api-3, jquery-ui-map

使用“用于 jQuery 和 jQuery Mobile 的 Google 地图 v3 插件”时，如何在单击地图时检索鼠标指针下的纬度和经度值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T05:01:51.903

即使点击事件侦听器已经添加到插件内部的地图中，返回的事件对象也不会给出 latLng 值。从我的代码中将点击事件侦听器添加到地图对象，对我有用（通过引用[这个](https://stackoverflow.com/a/10659359/679822)答案找到了解决方案）。

```
var map = $('#map_canvas').gmap('get', 'map');
$(map).addEventListener('click', function(event) {
    alert(event.latLng);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T23:11:17.453

johansalllarsson 的解决方案对我很有用，所以这是我的代码示例：

```
<script type="text/javascript" src="js/jquery-1.8.0.min.js"></script>
<script src="http://maps.google.com/maps/api/js?sensor=true" type="text/javascript"></script>
<script src="js/jquery.ui.map.full.min.js" type="text/javascript"></script> 
<script type="text/javascript">
$(function() {
    $('#map').gmap();
    $($('#map').gmap('get', 'map')).dblclick(function(event) {
        alert(event.latLng);
    });
});
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T20:39:42.807

```
$($('#map_canvas').gmap('get', 'map')).click(function(event) {
    console.log(event.latLng);
}); 
```

见[http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-geocoding.html](http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-geocoding.html)

# php - 简单的 php mysql 搜索的奇怪输出

> ID：10427612
> 
> 赞同：-1
> 
> 时间：2012-05-03T08:20:28.733
> 
> 标签：php, mysql, search

我正在尝试构建一个简单的搜索，该搜索首先从通过 url 从 HTML 表单传递到该脚本的表单中获取“查询”。运行脚本后，我会得到输出：Resource id #140Resource id #141Resource id #142。为什么我会得到这个输出，这是什么意思？

旁注我只是使用“回声”作为查看每个变量输出的一种方式。

```
<?php 
//connect to database
mysql_connect("localhost", "user", "password") or die("Error connecting to database: " .mysql_error());

mysql_select_db("dataBase") or die(mysql_error());

?>
<?php
$query = $_GET['query']; 
// gets value sent over search form

$user_id = mysql_query("SELECT id FROM users WHERE email = '$query'") or die(mysql_error());
echo $user_id;

$account_id = mysql_query("SELECT 'account_id' FROM accounts_users WHERE 'user_id' LIKE ('$user_id')") or die(mysql_error());
echo $account_id;

$user_name = mysql_query("SELECT 'account_name' FROM accounts WHERE 'id' LIKE ('$account_id')") or die(mysql_error());
echo $user_name;    
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:22:11.973

这不是打印结果的方式。该方法`mysql_query`返回一个资源，您必须在循环中使用该资源才能实际打印结果。例如，在[官方文档页面](http://php.net/manual/en/function.mysql-query.php)中的第二个示例中循环。

PS`$query = $_GET['query'];`使用此语句可能会遇到**Sql 注入**问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T08:27:22.687

尝试类似的事情 - 在第一次“SELECT”查询之后：

```
 while($user_id_obj = mysql_fetch_object($user_id))
    {
      echo $user_id_obj->id;
    } 
```

*   您实施的方式导致[SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)
*   [SQL 注入攻击示例](http://www.unixwiz.net/techtips/sql-injection.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T08:41:16.407

这可以通过两种方式实现。哪种方式对您有用取决于您的要求。

1.如果您的查询结果包含一个值，那么在您的代码中进行更改的以下代码将对您有用。

```
<?php 
//connect to database
mysql_connect("localhost", "user", "password") or die("Error connecting to database: " .mysql_error());

mysql_select_db("dataBase") or die(mysql_error());

?>
<?php
$query = $_GET['query']; 
// gets value sent over search form

$result_user = mysql_query("SELECT id FROM users WHERE email = '$query'") or die(mysql_error());
if (!$result_user) {
    die('Could not query:' . mysql_error());
}
$user_id=mysql_result($result_user,0); // outputs first user's id
echo $user_id;
$result_accountuser = mysql_query("SELECT 'account_id' FROM accounts_users WHERE 'user_id' LIKE ('$user_id')") or die(mysql_error());
if (!$result_accountuser) {
    die('Could not query:' . mysql_error());
}
$account_id=mysql_result($result_accountuser,0); // outputs first accounts_users's account_id
echo $account_id;
$result_account = mysql_query("SELECT 'account_name' FROM accounts WHERE 'id' LIKE ('$account_id')") or die(mysql_error());
if (!$result_account) {
    die('Could not query:' . mysql_error());

}
echo mysql_result($result_account,0); // outputs first accounts's account_name
?> 
```

2.或者您的查询包含多个结果或多个行，而不是您的代码中的以下更改将对您有所帮助

```
<?php 
//connect to database
mysql_connect("localhost", "user", "password") or die("Error connecting to database: " .mysql_error());

mysql_select_db("dataBase") or die(mysql_error());

?>
<?php
$query = $_GET['query']; 
// gets value sent over search form

$result_user = mysql_query("SELECT id FROM users WHERE email = '$query'") or die(mysql_error());
        while($row=mysql_fetch_array($result_user))
        {
                $user_id = $row['id'];
                echo    $user_id;
        }

$result_accountuser = mysql_query("SELECT 'account_id' FROM accounts_users WHERE 'user_id' LIKE ('$user_id')") or die(mysql_error());
        while($row=mysql_fetch_array($result_accountuser))
        {
                $account_id = $row['account_id'];
                echo $account_id;

        }

$result_account = mysql_query("SELECT 'account_name' FROM accounts WHERE 'id' LIKE ('$account_id')") or die(mysql_error());
        while($row=mysql_fetch_array($result_account))
        {
                echo $row['account_name'];

        }

?> 
```

# json - 可以使用 curl 上传外部 json 文件而不是 --data 吗？

> ID：10427616
> 
> 赞同：5
> 
> 时间：2012-05-03T08:20:34.833
> 
> 标签：json, rest, curl

通过 curl 测试 REST POST api 时，是否可以从外部 json 文件发送数据，而不是通过内联`--data`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T08:26:03.663

要指定文件中的数据，请使用 --data @filename。从 curl 的手册页：

> 如果您以字母 @ 开始数据，则其余部分应该是从中读取数据的文件名，或者 - 如果您希望 curl 从标准输入中读取数据。文件的内容必须已经是 URL 编码的。也可以指定多个文件。因此，将使用 --data @foobar 从名为“foobar”的文件发布数据。

# coronasdk - 如何在电晕中使用橡皮擦？

> ID：10427618
> 
> 赞同：-2
> 
> 时间：2012-05-03T08:20:43.423
> 
> 标签：coronasdk

在我的应用程序中，我画线和圆圈。如何擦除线条。使用触摸功能擦除线条和圆圈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:45:32.753

你想删除触摸对象？

```
local function onTouch(event)    
    local object = event.target    
    object:removeSelf()   
    return true 
end 

object:addEventListener("touch",onTouch) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T12:24:02.313

object:removeSelf() 肯定会帮助你

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-04T11:21:30.097

尝试放置一些与背景颜色相同的物体。

# ios - 滚动列表时应用程序崩溃

> ID：10427624
> 
> 赞同：0
> 
> 时间：2012-05-03T08:21:15.490
> 
> 标签：ios, uitableview, crash

我已经与许多其他人一起看到了这个问题，浏览了所有主题，但我似乎无法找到解决方案。

所以我有一个普通的表格视图，其中一个单元格链接到一个 .xib 文件，在第一次启动时一切看起来都很正常，但是一旦我开始滚动应用程序立即崩溃。

通过启用僵尸对象，我遇到了这个错误：

> 2012-05-03 16:18:13.008 coop_dev[27547:f803] *** -[ActivityTableViewController tableView:cellForRowAtIndexPath:]: 消息发送到释放的实例 0x6853990

但我不确定要寻找什么或可能出现什么问题：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    ItemCell *cell = (ItemCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell == nil) 
    {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"ItemCell" owner:nil options:nil];
        cell = [topLevelObjects objectAtIndex:0];
    }

    Item *item = [self.activity objectAtIndex:indexPath.row];

    [[cell projectLabel] setText:item.project];
    [[cell descriptionLabel] setText:item.description];
    [[cell timeLabel] setText:item.time];
    [[cell timeAgoLabel] setText:item.timeAgo];
    //cell.avatar = [UIImageView item.avatar];

    cell.descriptionLabel.numberOfLines = 0;
    [cell.descriptionLabel sizeToFit];

    // remove the right arrow
    cell.accessoryType = UITableViewCellAccessoryNone;

    return cell;
} 
```

它在第一次启动时运行良好，但之后就崩溃了

编辑

我在一个新项目中重新创建了这个问题，只是一个带有一些数据的基本表，一旦你开始滚动它就会崩溃。下载：[http ://dl.dropbox.com/u/274185/TestTable.zip](http://dl.dropbox.com/u/274185/TestTable.zip)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T05:21:29.233

在您的`FirstViewController.xib`中，删除`UITableViewController`，但留下`UITableView`。发生崩溃是因为`File's Owner`已经在 中设置为类`FirstViewController`，`Identity Inspector`就像你有第二个`UITableViewController`。还要确保它`UITableView`已连接到控制器的视图出口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:23:22.663

你正在出队代码有点偏离......试试我的：

```
 UITableViewCell *cell = [[UITableViewCell alloc] init];
cell = nil;
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                   reuseIdentifier:@"cell"]
            autorelease];

    cell.imageView.image = nil;
    cell.textLabel.text = nil;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T08:29:37.750

检查你的`ItemCell`类的`dealloc`方法，你可能过度释放了一些东西。

# javascript - 无需登录即可阅读 Facebook 页面上的提要

> ID：10427642
> 
> 赞同：2
> 
> 时间：2012-05-03T08:22:39.653
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

是否可以创建一个网站，并使用 JavaScript，从 Facebook 页面读取提要并将其显示给我的网站访问者，而无需他们登录，或者甚至拥有 Facebook。

我在 Facebook 文档中迷失了 :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T06:17:08.727

感谢@mch here commes 版本，它使用 php 作为代理来使用 JavaScript 读取 Facebook 提要。

在您的服务器上放置一个名为 proxy.php 的文件并添加以下代码：

```
<?php
// always add this header to ensure the JSON is output in the correct format
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
header("Cache-Control: no-cache");
header("Pragma: no-cache");
header('Content-Type: application/json; charset=utf-8'); 

$graphUrl = $_POST[graphUrl];
if ($graphUrl == "") {
    $graphUrl = "https://graph.facebook.com/facebook/feed/";
}

//App Info, needed for Auth
$app_id = "1234567890";
$app_secret = "0000011122234334445556aaass";

//retrieve auth token
$authToken = fetchUrl("https://graph.facebook.com/oauth/access_token?type=client_cred&client_id={$app_id}&client_secret={$app_secret}");

//Echo back json to read client side.
echo fetchUrl("{$graphUrl}?{$authToken}");

function fetchUrl($url){
    $ch = curl_init();
    curl_setopt($ch,CURLOPT_SSL_VERIFYPEER,false);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_TIMEOUT, 20);
    $retData = curl_exec($ch);
    curl_close($ch); 
    return $retData;
}
?> 
```

将 app_id、app_secret 更改为您的应用程序 ID。在此处创建应用程序[https://developers.facebook.com/apps/](https://developers.facebook.com/apps/)

在您的代理文件旁边创建一个 HTML 文件。添加此代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>FB reader</title>
</head>
<body>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {

            var timeout = 5000,
                load_error;

            load_error = function (jqXHR, textStatus, errorThrown) {
                if (errorThrown === "timeout") {
                    alert('Server bussy');
                } else {
                    alert('error: 404', textStatus + ": " + errorThrown);
                }
            };      

            $(document).ready(function() {
                console.log('Loading from Facebook...\n');

                //Change data: {graphUrl: 'https://graph.facebook.com/iambounty/feed'},  to what ever you want.
                $.ajax({
                    type: 'POST',
                    url: 'proxy.php',
                    data: {graphUrl: 'https://graph.facebook.com/iambounty/feed'}, 
                    timeout:  timeout,
                    error: load_error,
                    success: function (rv) {
                        var data = rv.data,
                            len = data.length,
                            i,
                            out = '';
                        for (i = 0; i < len; i += 1) {
                            if (data[i].description) {
                                out += data[i].description + '\n\n';
                            }
                        }
                        console.log(out);
                    }
                });

            });
        });
    </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T09:10:57.640

您可以使用 PHP 在服务器端执行此操作。在 Facebook 开发者中心创建一个 facebook App，获取 App Key 和 Secret Key。

```
$profile_id = "1234567890";     

//App Info, needed for Auth
$app_id = "0001234567890";
$app_secret = "abc123ebf123f3g5g6j";

/* USE THIS LINE INSTEAD OF THE "veryfypeer" LINE BELOW */
Facebook::$CURL_OPTS[CURLOPT_CAINFO] = '/path/to/crt/fb_ca_chain_bundle.crt';

//retrieve auth token
$authToken = fetchUrl("https://graph.facebook.com/oauth/access_token?type=client_cred&client_id={$app_id}&client_secret={$app_secret}");

$data['feed_data'] = fetchUrl("https://graph.facebook.com/{$profile_id}/feed?{$authToken}");

function fetchUrl($url){
         $ch = curl_init();

/* DO NOT USE THE FOLLOWING LINE: I'VE COMMENTED IT OUT HERE */
//      curl_setopt($ch,CURLOPT_SSL_VERIFYPEER,false);
             curl_setopt($ch, CURLOPT_URL, $url);
             curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
             curl_setopt($ch, CURLOPT_TIMEOUT, 20);

         $retData = curl_exec($ch);
         curl_close($ch); 

         return $retData;
    } 
```

...在 Javascript 方面，我认为这是不可能的，因为 FB API Secret 必须对公众隐藏。[从这里获取的信息](http://illuminatikarate.com/blog/facebook-graph-api-requires-access-token-for-feed-access/)

# html - 如何将 CSS 附加到我的模板？

> ID：10427643
> 
> 赞同：1
> 
> 时间：2012-05-03T08:22:55.350
> 
> 标签：html, css, django, templates

我想将 css 附加到我在 Django 中的模板。我在项目的主文件夹中创建了静态目录，并在 settings.py 添加了这些行：

```
import os
ROOT = os.path.dirname(os.path.abspath(__file__))
path = lambda *a: os.path.join(ROOT, *a)
PROJECT = os.path.basename(ROOT) 
```

然后我在 settings.py 中定义了 vars

```
MEDIA_ROOT = path('media')
MEDIA_URL = '/media/'
STATIC_ROOT = path('static')
STATIC_URL = '/static/'
STATICFILES_DIRS = path('static') 
```

在模板中，我以这种方式链接到 css：

```
<link href="{{ STATIC_URL }}css/mycss.css" rel="stylesheet"> 
```

Django 使用这样的源代码生成页面：

```
<link href="/static/css/mycss.css" rel="stylesheet"> 
```

如果我尝试`http://127.0.0.1:8000/static/css/myss.css`从 Chrome 源代码查看器访问此链接 ( )，它会返回：

```
A server error occurred.  Please contact the administrator. 
```

我究竟做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:27:33.940

在开发中，您必须将特定的 URL 模式添加到`urls.py`.

[Django 文档在这里](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-development)详细讨论了这一点。

请注意，您应该**在生产中禁用此 url**。这个对另一个非常相似的问题的回答应该可以帮助您解决这个问题[。](https://stackoverflow.com/a/10410498/1211429)

# actionscript-3 - as3 中当时的 TOUCH_POINT 和 GESTURE 事件

> ID：10427647
> 
> 赞同：0
> 
> 时间：2012-05-03T08:23:08.693
> 
> 标签：actionscript-3, flash, multi-touch

我一直在与 as3 中的多点触控问题作斗争。我正在尝试制作一个应用程序，用户应该能够在舞台周围移动图片（touch_point）以及通过手势（捏合手势）对其进行缩放。甚至可能吗？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:03:55.223

These functions will handle the pinch, zoom and dragging.

```
import flash.events.GestureEvent;
import flash.events.TransformGestureEvent;
import flash.events.GesturePhase;
import flash.events.Event;
import flash.events.MouseEvent;

function fl_ZoomHandler (e:TransformGestureEvent):void {
e.target.scaleX *=  e.scaleX;
e.target.scaleY *=  e.scaleY;

if (e.phase==GesturePhase.END) {
        e.currentTarget.stopDrag();
    }

}

function fl_StartDrag (e:MouseEvent):void {
e.currentTarget.startDrag (false);
theDragItem = e.currentTarget;
}

function fl_StopDrag (e:MouseEvent):void {  
e.currentTarget.stopDrag();
}

function fl_RotateHandler (e:TransformGestureEvent):void {
e.target.rotation +=  e.rotation;

if (e.phase==GesturePhase.END) {
        e.currentTarget.stopDrag();
    }
} 
```

And these are the event listeners to apply to the item you want to affect.

```
YOUROBJECT.addEventListener(MouseEvent.MOUSE_DOWN, fl_StartDrag, false, 0, true);
YOUROBJECT.addEventListener(MouseEvent.MOUSE_UP, fl_StopDrag, false, 0, true);
YOUROBJECT.addEventListener(TransformGestureEvent.GESTURE_ZOOM, fl_ZoomHandler, false, 0, true);
YOUROBJECT.addEventListener(TransformGestureEvent.GESTURE_ROTATE, fl_RotateHandler, false, 0, true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-01T03:14:04.607

也许这可能有用

[http://help.adobe.com/en_US/as3/dev/WS1ca064e08d7aa93023c59dfc1257b16a3d6-7ffd.html](http://help.adobe.com/en_US/as3/dev/WS1ca064e08d7aa93023c59dfc1257b16a3d6-7ffd.html)

以与基本触摸事件相同的方式处理手势事件。您可以监听由TransformGestureEvent 类、GestureEvent 类和PressAndTapGestureEvent 类中的事件类型常量定义的一系列手势事件。

还有一个新问题出现了.. 按下并点击？刷卡？ [http://i.msdn.microsoft.com/dynimg/IC504532.png](http://i.msdn.microsoft.com/dynimg/IC504532.png)每个图形解释

这个网站很棒

万岁堆栈溢出！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T23:17:21.890

不要同时使用两者，您可以轻松地使用 TouchEvent 属性进行一些调整以制作手势事件。

# regex - 正则表达式替换零

> ID：10427654
> 
> 赞同：1
> 
> 时间：2012-05-03T08:23:47.800
> 
> 标签：regex

我想要一些关于以下正则表达式的帮助。

```
00  should be replaced by Null
01  should be left as it is
0   should be replaced by Null 
```

如果有一个 0 或两个 0，那么它们应该被 Null 替换

我的尝试是

```
select regexp_replace('0','^0',NULL) from dual 
```

但我的代码对 01 不起作用

得到这个工作使用

```
select regexp_replace('01','^0(0)?',NULL) from dual 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:26:48.247

这行得通吗？

```
select regexp_replace('0','^0+$',NULL) from dual 
```

我相信这应该用 NULL 替换只包含 0 的字符串。

我从[这里](http://docs.oracle.com/cd/B19306_01/server.102/b14200/ap_posix001.htm#i690819)得到了 oracle 正则表达式语法。

如果您只想更新一个或两个零的字符串，请使用以下命令：

```
select regexp_replace('0','^0{1,2}$',NULL) from dual 
```

或者

```
select regexp_replace('0','^0(0)?$',NULL) from dual 
```

# c++ - 乱码编译器 (MinGW) 输出

> ID：10427655
> 
> 赞同：4
> 
> 时间：2012-05-03T08:23:48.210
> 
> 标签：c++, c, linked-list, mingw

我一直在尝试编译一些我在其他地方拍摄的基本链表示例。

我遇到的问题更多的是用户类型。我想这张照片说明了一切：

![](../Images/36288b4b6df5e827b237c364f36e3c0e.png)

所有奇怪符号的原因是什么？正常的 MinGW 输出应该类似于 error: invalid conversion from 'void*' to 'element*'</p>

这就是我遇到的问题，但我很乐意收到有关错误本身的解释。这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
struct element {
       int info;
       struct element *next;
};
int main(void){
struct element *head, *node;
int arv;
head = NULL;
printf("Enter number! (0 to exit)");
scanf("%d",&arv);
while (arv != 0){
      node = malloc(sizeof *node);
      node->next = head;
      node->info = arv;
      head = node;
      printf("Enter number! (0 to exit)");
      scanf("%d",&arv);
}
} 
```

***编辑*** 解决！感谢您的信息。类似的问题：

[mingw g++ 以错误的语言给出警告（德语而不是英语）](https://stackoverflow.com/questions/10191063/mingw-g-gives-warnings-in-wrong-language-german-instead-of-english)

[MinGW 的非本地化版本？](https://stackoverflow.com/questions/9268379/non-localized-version-of-mingw)

至于解决方案，我从“\mingw\share\locale”中删除了所有内容。虽然可能不是最佳做法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:38:03.083

我在这里疯狂地猜测，但是您的编译器*可能*会使用 UTF-8 输出以您的语言本地化的错误消息，并且您的终端不理解 UTF-8 并将其显示在某些 Windows 代码页中。您的语言设置是否配置为非拉丁语言？

# wpf - 在 Datagrid 中编辑文本框后按 Enter 时应选中复选框

> ID：10427656
> 
> 赞同：0
> 
> 时间：2012-05-03T08:23:50.770
> 
> 标签：wpf, mvvm, datagrid, checkbox

我有一个带有复选框的数据网格和一个连续的文本框。当值为文本框被修改并按下回车时，应根据值是否被修改来检查复选框。请告诉我我该怎么做？我没有文件后面的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:47:32.310

```
 <DataGrid...ItemsSource={Binding ViewModel.YourRowItems
 ...some column
   <TextBox Text="{Binding SomeText}"...

 ....some column
   <CheckBox IsChecked="{Binding IsChecked="{Binding IsSomeProp}".. 
```

在 ViewModel 中，当 SomeText 属性改变时，翻转/更新 IsSomeProp，它会通过绑定更新 IsChecked

```
public string SomeText
{
   get {return _someText;}
   set
   {
       if (_someText != value ..
       {
           _someText = value;

           if(value != _originalSomeText)
              IsSomeProp = true;//this of course will raise prop changed for IsSomeProp
           RaisePropertyChanged( ()=> SomeText);
       }
    } 
```

...无论如何，这就是要点

# xml - 如何将 XSLT 模板应用到一个元素的次数与文档中另一个元素的数量一样多？

> ID：10427657
> 
> 赞同：3
> 
> 时间：2012-05-03T08:23:54.490
> 
> 标签：xml, xslt, xpath

这对我来说很难用英语表达，所以举个例子可能会有所帮助。假设我有几个称为句子的元素，它由几个术语组成。在 XML 的另一部分中，有一组带有语言代码的元素。我想为每个句子应用与语言数量一样多的模板，并使用适当的语言代码调用该模板。由此：

```
<description>
    <sentences>
        <sentence>
            <term type="adjective">nice</term>
            <term type="tripType">cycling</term>
        </sentence>
        <sentence>
            <term type="adjective">boring</term>
            <term type="tripType">hike</term>
        </sentence>
    </sentences>
    <languages>
        <l>cs</l>
        <l>en</l>
    </languages>
</description> 
```

我想制作这样的东西：

```
<div>
 <p><span>cs</span> nice cycling</p>
 <p><span>en</span> nice cycling</p>
</div>

<div>    
 <p><span>cs</span> boring hike</p>
 <p><span>en</span> boring hike</p>
</div> 
```

我试图使用`<xsl:for-each select="/description/languages/l">`，但这将内容设置`l`为当前元素，我无法再使用术语 stuff。

任何想法将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:49:44.723

```
<xsl:template match="description">
  <xsl:apply-templates select="sentences/sentence" />
</xsl:template>

<xsl:template match="sentence">
  <xsl:variable name="terms" select="term" />
  <div>
    <xsl:for-each select="../../languages/l">
      <p>
        <span><xsl:value-of select="." /></span>
        <xsl:apply-templates select="$terms" />
      </p>
    <xsl:for-each>
  </div>
</xsl:template>

<xsl:template match="term">
  <xsl:apply-templates select="." />
  <xsl:if test="position() &lt; last()"> </xsl:if>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T12:43:23.150

**这个简单的转换（没有明确的条件）**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="sentence">
  <xsl:variable name="vSentence" select="."/>
  <div>
       <xsl:for-each select="/*/languages/l">
         <p>
           <span><xsl:value-of select="."/></span>
           <xsl:apply-templates select="$vSentence/term"/>
         </p>
       </xsl:for-each>
     </div>
 </xsl:template>

 <xsl:template match="term[position() > 1]">
  <xsl:text> </xsl:text>
  <xsl:value-of select="."/>
 </xsl:template>
 <xsl:template match="l"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<description>
    <sentences>
        <sentence>
            <term type="adjective">nice</term>
            <term type="tripType">cycling</term>
        </sentence>
        <sentence>
            <term type="adjective">boring</term>
            <term type="tripType">hike</term>
        </sentence>
    </sentences>
    <languages>
        <l>cs</l>
        <l>en</l>
    </languages>
</description> 
```

**产生想要的正确结果**：

```
<div>
   <p><span>cs</span>nice cycling</p>
   <p><span>en</span>nice cycling</p>
</div>
<div>
   <p><span>cs</span>boring hike</p>
   <p><span>en</span>boring hike</p>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T08:32:52.303

您可以将当前元素（术语 stuff，如果我理解正确的话）分配给一个变量，然后在 for-each 循环中使用该变量：`<xsl:variable name="term" select="current()"/>`

# c++ - 插入 STL 向量

> ID：10427659
> 
> 赞同：0
> 
> 时间：2012-05-03T08:24:00.433
> 
> 标签：c++

使用 C++ STL 向量，我们正在构建一个包含 N 个元素的向量，出于某种原因，我们选择将它们插入向量的前面。向量前面的每个元素插入都会强制所有现有元素移位 1。这导致向量元素的 (1+2+3+...+N) 整体移位，即 (N/2)(N +1) 轮班。

我的问题是作者是如何获得 (1+2+3+...N) 的，我认为它应该是 1+1+1..N，因为我们将一个元素移动到一个位置以在一开始就变空？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T08:36:41.003

从`[vector.modifiers]/2`（描述`vector::insert`）：

> 复杂度：复杂度与插入的元素数量加上到向量末端的距离成线性关系。

每次添加元素时，到向量末端的距离都会增加 1。

第一次添加元素，有1个要插入，到末尾的距离为0，所以复杂度是1+0=1。第二次，有1个要插入，到末尾的距离end 是 1，所以复杂度是 1 + 1 = 2。第三次，到 end 的距离是 2，所以复杂度是 1 + 2 = 3。这就是创建 1 + 2 + 3 + ... + 作者描述的 N 模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T08:30:37.230

在插入`n`时，`n`向量中当前存在需要移动的元素。

```
vector<int> values;
for (size_t i = 0; i < N; ++i)
{
     //At this point there are `i` elements in the vector that need to be moved
     //to make room for the new element
     values.insert(values.begin(), 0); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T08:28:14.017

第一个值被移动 N-1 次，每次插入新值时它都必须移动。第二个值移动了 N-2 次，因为在它之后只添加了 N-2 个值。下一个值被移动 N-3 等等。最后一个值不会移动。

我不知道为什么作者说的是 N 而不是 N-1。但是您感到困惑的原因是，作者计算了单个值的移位，而您计算了涉及多个单个值移位的移位过程的数量。

# javascript - 如何从控制台获取信息

> ID：10427660
> 
> 赞同：0
> 
> 时间：2012-05-03T08:24:03.177
> 
> 标签：javascript, eclipse, error-handling, console

我正在使用 Java 和 Javascript 开发应用程序，并且我有一个电子邮件服务，如果应用程序发生错误，用户可以向我发送自动电子邮件。我现在让它向我发送一封空白电子邮件，但我希望它从控制台获取错误消息并将其粘贴到电子邮件中。我必须编写代码才能将其添加到电子邮件中，但如何从控制台获取信息？

编辑：

```
2012-05-03 10:20:46,449 [mobileapp] DEBUG Resolving exception from handler [null]: org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' not supported
2012-05-03 10:20:46,449 [mobileapp] WARN  Request method 'GET' not supported
2012-05-03 10:20:46,449 [mobileapp] DEBUG Null ModelAndView returned to   DispatcherServlet with name 'mvc-dispatcher': assuming HandlerAdapter completed request handling
2012-05-03 10:20:46,449 [mobileapp] TRACE Cleared thread-bound request context: org.apache.catalina.connector.RequestFacade@741848 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:07:34.297

如果您使用 JavaScript，则没有“真正的”控制台。而是安装一个为您提供此功能的插件 - 例如 FireBug（用于 Firefox）或只使用 Chrome。这对我有用，当您执行 console.log("whatever") 时，它应该显示在那里。

祝你好运！

# android - 使代码晦涩难懂

> ID：10427667
> 
> 赞同：1
> 
> 时间：2012-05-03T08:24:37.040
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

有几种工具可以轻松地对应用程序进行逆向工程并轻松显示所有类和资源。我的问题是有什么方法可以使代码变得晦涩难懂。我的代码是独一无二的，我不希望任何人对其进行逆向工程。我想要了解预防方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:14:26.577

> 我的问题是使代码晦涩难懂的方法是什么

在不严重影响运行时性能的情况下，没有什么能给您带来比 ProGuard 的显着改进。

> 我的代码是独一无二的，我不希望任何人对其进行逆向工程。

然后不要将该代码放在其他人的机器上。将其保存在您的服务器上。

> ProGuard 是否也隐藏了我的数据库？

不。

> 这对我来说是一个重要的资源。

如果“重要资源”是指“我的数据库是独一无二的，我不希望任何人阅读它”，那么不要将数据库放在其他人的机器上。将其保存在您的服务器上。

用户设备上的任何东西——代码或数据——都可以被该用户通过足够的工作访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T08:50:53.023

除了 proGuard 之外，还有一些免费的混淆器，但大多数应用程序都会使用 proGuard，因为它是谷歌推荐和支持的。

所以你需要知道的一切：（关于proguard及其他）

[http://android-developers.blogspot.de/2010/09/proguard-android-and-licensing-server.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed:+blogspot/hsDu+(Android+Developers+Blog)](http://android-developers.blogspot.de/2010/09/proguard-android-and-licensing-server.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed:+blogspot/hsDu+(Android+Developers+Blog))

[https://stackoverflow.com/questions/2531187/android-and-obfuscation](https://stackoverflow.com/questions/2531187/android-and-obfuscation)

# windows - 我可以启动只能从同一进程访问的 http 服务器吗？

> ID：10427672
> 
> 赞同：0
> 
> 时间：2012-05-03T08:25:12.553
> 
> 标签：windows

我想在同一个进程中为一个WebBrowser控件启动一个http服务器，但是我不想让其他进程访问，有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:58:40.290

打开 TCP/IP 端口（例如侦听端口）可以仅限于环回接口 (127.0.0.1)，因此只有本地进程可以访问它）但不能仅限于当前进程。如果你无法控制 Web 服务器的实现：你就完蛋了。如果不是：您可以使用一些只有您的进程知道的信息，并添加一个特殊的标头字段，该字段必须存在于 Web 服务器才能提供服务。这是一个kludge，但它可能会起作用。

# iphone - SIP注册接口

> ID：10427674
> 
> 赞同：0
> 
> 时间：2012-05-03T08:25:17.440
> 
> 标签：iphone, objective-c, sip

有谁知道是否有任何 SIP 提供商提供允许用户直接从 iPhone 应用程序注册的 API。作为在我的应用程序中注册的用户，他们也应该在 sip 提供者（一个 sip 帐户）中注册。这可能吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:17:54.580

我从来没有遇到过具有复制 SIP 注册的 API 的 SIP 提供商。这实际上是一个奇怪的请求，因为 SIP 注册的目的是让服务器知道 SIP 客户端可用以及可以在哪里联系它。如果您在 SIP 之外执行该功能，您能否确定 SIP 客户端可用？如果是这样，您是否总是知道可以联系到哪个地址，特别是考虑到 SIP 中使用的联系地址经常由于 NAT 而被破坏？

许多提供商提供的是设置静态 SIP URI 转发的能力，例如，您可以设置一条规则，规定所有来电都应转发到 SIP URI sip:me@somewhere.com。设置这种规则可以消除在很多情况下注册的需​​要，因为提供商现在将始终将呼叫转发到该 SIP URI，而不管帐户上是否注册了任何设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:16:21.250

一旦您在特定提供商处拥有 SIP 帐户，*所有*标准 SIP 提供商都允许您通过标准[SIP 协议](http://en.wikipedia.org/wiki/Session_Initiation_Protocol)进行注册。它是一个类似于 HTTP 的协议，您可以直接组装消息。但很可能您需要创建消息、处理呼叫状态等的称为*SIP 客户端*的东西。有很多开源 SIP 客户端，即使是 iPhone 也有开放的 API。一个非常受欢迎的此类客户端称为[pjsip](http://pjsip.org)，它可能对您来说很有趣。

# windows - 汇编指令如何无法读取它所在的内存

> ID：10427676
> 
> 赞同：3
> 
> 时间：2012-05-03T08:25:25.917
> 
> 标签：windows, exception, memory-management, x86

在 Windows XP 中使用一些作为 Windows 服务工作的软件并从登录屏幕重新启动我看到一条臭名昭著的错误消息

> “00x...”处的指令引用了“00x...”处的内存。无法读取内存。

我向开发人员报告了问题，但再次查看消息，我发现地址是相同的。所以

> “00xdf3251”处的指令引用了“00xdf3251”处的内存。无法读取内存。

这是否是程序中的错误，但内存/访问权限的状态是什么，或者阻止指令读取它所放置的内存的其他东西是什么。它是特定于服务的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:59:43.557

我猜想有人试图在地址 0xdf3251 处执行指令，并且该位置没有由可读和可执行的内存页（也许完全未映射）备份。

如果是这种情况，则异常（实际上是页面错误）源自该指令，并且异常处理程序在堆栈上具有其地址（要返回的位置，以防异常可以以某种方式解决并且错误指令在执行时重新启动）处理程序返回）。这是您看到的第一个地址。

页面错误处理程序读取的`CR2`寄存器，即您看到的第二个地址，也具有相同的地址，因为它必须包含不可访问的内存位置的地址，而不管页面错误是否由以下原因引起：

*   完全没有映射（根本没有映射页面）
*   缺少写权限（页面是只读的）
*   缺少执行权限（页面设置了不执行位）或
*   缺乏内核权限（页面被标记为只能在内核中访问）

并且无论是在数据访问期间还是在获取指令时（后者是我们的情况）。

这就是如何使指令和内存访问地址相等。

代码很可能存在导致内存损坏的错误，并且某些指针（或堆栈上的返回地址）被指向不可访问的内存位置的虚假值覆盖。然后以一种或另一种方式指示 CPU 继续在那里执行（很可能使用以下指令之一：`jmp`, `call`, `ret`）。也有可能在某处出现比赛条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:03:02.013

这种崩溃最常见的原因是堆栈损坏。一种非常常见的类型是堆栈缓冲区溢出。在存储在堆栈上的数组中写入太多数据，它会用数据覆盖函数的返回地址。然后，当函数返回时，它会跳转到虚假的返回地址，并且由于该地址处没有代码，程序会失败。他们将很难修复错误，因为没有简单的方法可以找出损坏发生的位置。

这是一种相当臭名昭著的错误，它是恶意软件的主要攻击媒介。因为它可以控制程序跳转到带有数据的任意代码。您应该与这些开发人员坐下来并指出这一点，这是一个重大的安全风险。治愈很容易，他们应该更新他们的工具。如今，针对缓冲区溢出的对策已[内置于编译器](http://msdn.microsoft.com/en-us/library/8dbf701c%28v=VS.80%29.aspx)中。

# c++ - 扩展具有私有构造函数和析构函数的单例类会给出编译时警告

> ID：10427677
> 
> 赞同：2
> 
> 时间：2012-05-03T08:25:30.773
> 
> 标签：c++, design-patterns, inheritance, singleton, extend

我正在使用 C++ (Qt)。

我正在扩展一个单例类，而一个子类只有静态方法。我没有创建子类的任何实例。单例类的构造函数和析构函数都是私有的，所以我无法访问它的构造函数和析构函数。

```
 class Singleton 
 { 
   private :
           Singleton();
           ~Singleton();
   public :
      // some methods.
 }

 class SubClass : public Singleton
 {
   // There is NO constructor or destructor
   public:
   // Only some STATIC methods.
 } 
```

我使用调用父级的 getInstance()的**SubClass::getInstance() 。**我只使用子类的静态方法（所以不需要实例化子类）。

所以我的问题是，我在编译时收到警告-

“子类：无法生成析构函数，因为基类析构函数不可访问”。

我想摆脱这些警告，还想知道这种设计是否违反了单例设计模式？

* * *

**我想实现什么？**

我正在为应用程序创建记录器。我正在使用第三方库的记录器类（QxtCore 库的 QxtLogger）。这个 QxtLogger 类是一个单例并且具有私有的构造函数和析构函数。我想要一个单例类，其中包含 QxtLogger 拥有的所有方法和一些额外的静态方法（特定于我的应用程序）。

所以我创建了一个继承 QxtLogger 的类，并为其添加了一些静态方法。我担心的是扩展生成警告的单例类（因为基类构造函数和析构函数不可访问）。所以我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T08:44:41.280

您不能扩展没有可见构造函数的类。这就是类设计者的意图。

如果他们想要扩展类，他们会创建构造函数/析构函数`protected`。

我建议你使用组合而不是继承。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T09:06:37.633

**停止！**

除了对 Singleton 反模式的可疑使用（再次）之外，您应该记住 C++ 不是 Java。

因此，有**更好**的继承方式来扩展类的功能：自由函数！

```
void extend1(Singleton& s, ...);

int extend2(Singleton const& s); 
```

请注意，这些函数`Singleton`通过引用获取类有两个原因：

*   很明显，他们依赖它
*   它为重构铺平了道路，因为你什么时候会摆脱 Singletonness

# email - OSGi GWT org.apache.commons.mail.EmailException

> ID：10427681
> 
> 赞同：0
> 
> 时间：2012-05-03T08:25:59.480
> 
> 标签：email, gwt, osgi, classloader, apache-commons-email

我有一个 OSGi 应用程序，它有一个命令行界面和一个 GWT 界面。我有一个单独的包负责发送电子邮件。它使用 Apache Commons 电子邮件。

电子邮件包仅提供一种发送电子邮件的方法，并且所有属性目前都是硬编码的。

当我从命令行发送电子邮件时，它会获得对捆绑包的引用并毫无问题地发送电子邮件。

当我从 GWT 界面发送电子邮件时，它会获取对捆绑包的引用并尝试发送电子邮件，然后抛出以下异常

`org.apache.commons.mail.EmailException: Sending the email to the following server failed : mail.interzet.ru:25 at org.apache.commons.mail.Email.sendMimeMessage(Email.java:1242) at org.apache.commons.mail.Email.send(Email.java:1267) at com.ardor.email.internal.EmailServiceImpl.send(EmailServiceImpl.java:134) at com.ardor.email.internal.EmailServiceImpl.sendChangeEmail(EmailServiceImpl.java:66) at com.ardor.web.server.CustomerProxyServiceImpl.changeEmail(CustomerProxyServiceImpl.java:93) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569) at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208) at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248) at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62) at javax.servlet.http.HttpServlet.service(HttpServlet.java:755) at javax.servlet.http.HttpServlet.service(HttpServlet.java:848) at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:558) at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:488) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:520) at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:233) at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:973) at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:417) at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:192) at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:907) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:110) at org.eclipse.jetty.server.Server.handle(Server.java:346) at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:442) at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:941) at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:801) at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:224) at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:51) at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:586) at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:44) at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:598) at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:533) at java.lang.Thread.run(Thread.java:662) Caused by: javax.mail.NoSuchProviderException: Unable to locate provider for protocol: smtp at javax.mail.Session.getProvider(Session.java:229) at javax.mail.Session.getTransport(Session.java:338) at javax.mail.Session.getTransport(Session.java:368) at javax.mail.Transport.send(Transport.java:67) at javax.mail.Transport.send(Transport.java:48) at org.apache.commons.mail.Email.sendMimeMessage(Email.java:1232)`

怎么会这样？它正在运行相同的代码

`HtmlEmail email = new HtmlEmail();`

 ````
email.setHostName(SMTP_HOST);
email.setAuthentication(SMTP_USER, SMTP_PASS);

email.setFrom(SMTP_EMAIL, SMTP_NAME);
email.addTo(emailAddress, customerName);
email.setSubject("Subject");
email.setTextMsg("This is my message");
email.setHtmlMsg("This is the HTML");

email.send(); 
````  `困惑！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:27:07.360

尝试在发送电子邮件之前插入：

```
Security.addProvider(new com.sun.net.ssl.internal.ssl.Provider());   
final Properties props = new Properties();  
props.setProperty("mail.transport.protocol", "smtp");   
props.setProperty("mail.host", SMTP_HOST);  
props.put("mail.smtp.auth", "true");  
props.put("mail.smtp.port", "465");  
props.put("mail.debug", "true");  
props.put("mail.smtp.socketFactory.port", "465");  
props.put("mail.smtp.socketFactory.class","javax.net.ssl.SSLSocketFactory");  
props.put("mail.smtp.socketFactory.fallback", "false");  
Session session = Session.getDefaultInstance(props, new javax.mail.Authenticator() {   
    protected PasswordAuthentication getPasswordAuthentication() {  
        return new PasswordAuthentication(SMTP_USER, SMTP_PASS);  
    }  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:10:43.700

我不完全确定为什么，但事实证明这是一个简单的类路径错误。似乎 OSGi 包可以访问 javax.mail_1.4.0.jar 并且战争无法访问它。

我将它添加到应用程序 WEB-INF/lib 中，它现在可以正常工作了。

对我来说仍然没有意义，为什么它需要访问它，因为 OSGi 捆绑包在不从 GWT 调用时可以访问它`

# google-app-engine - 如何在不存在引用的情况下使用 referenceProperty 创建模型实体？

> ID：10427689
> 
> 赞同：0
> 
> 时间：2012-05-03T08:26:06.853
> 
> 标签：google-app-engine, google-cloud-datastore

我有两个模型班 Team 和 Student。每个 Team 实体都有多个 Users 实体，我认为“一对多”是一个合适的模型。我这样编码：

```
class Team(db.Model):
    teamNmae = db.StringProperty(required=True)
    teamID = db.IntegerProperty(required=True)
class Users(db.Model):
    name = db.StringProperty(required=True)
    reference = db.ReferenceProperty(Team,collection_name=teamMembers) 
```

按照[这个文档](https://developers.google.com/appengine/articles/modeling)，我需要先创建一个 Team 实体，然后创建引用设置为此 Team 实体的用户。但是，问题来了，我想先创建用户，然后用户才能创建团队。那么，当我创建一个不存在团队的用户时如何设置参考？

**编辑1**：

我编写了简单的代码来测试是否可以在不创建引用实体的情况下创建实体。

```
 _author__ = 'Steven_yang'
import os
import webapp2
from google.appengine.ext import  db
from google.appengine.ext.webapp import template
defaultStu = [
    'qingWANG',
    'stevenYANG',
    'jingZHU',
    'conghuiHE',
    'lianDUAN',
    'xinHAO'
]
class Students(db.Model):
    #reference = db.ReferenceProperty(Team,collection_name='teamMember',required=False)
    name = db.StringProperty(required=True)
class Team(db.Model):
    teamName = db.StringProperty(required=True)
    teamID = db.IntegerProperty(required=True)
def createStu():
    stu_count = Students.all().count(1)
    if stu_count == 0:
        for stu in defaultStu:
            newStu = Students(name = stu)

            newStu.put()
class testReferenceHandler(webapp2.RequestHandler):
    def get(self):
        createStu()
        self.render_page()
    def render_page(self):
        stus = Students.all().fetch(10)
        templateValues={}
        templateValues['stus'] = stus
        form = os.path.join(os.path.dirname(__file__),'template/testref.html')
        renderForm = template.render(form,templateValues)
        self.response.out.write(renderForm)
app = webapp2.WSGIApplication([('/testref',testReferenceHandler)],debug=True) 
```

HTML文件是：

```
<body>
    {% for s in stus%}
    <div>{{s.name}}</div>
    {% endfor%}
</body>
</html> 
```

当我注释掉 ReferenceProperty 行时，一切都很好。当我添加 ReferenceProperty 行时，出现**server error**。那么，如果没有之前创建的引用，我就无法创建实体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:39:16.570

您是否尝试在创建实例时设置`reference`为`Team`模型？`None``User`

还将您的代码片段的最后一行更改为：

```
reference = db.ReferenceProperty(Team,required=False) 
```

即添加`required=False`。这就是[这个答案](https://stackoverflow.com/a/7550402/1211429)中的建议。

# php - PHP：register_shutdown_function 并不总是适用于 Symfony 2

> ID：10427692
> 
> 赞同：-1
> 
> 时间：2012-05-03T08:26:26.297
> 
> 标签：php, error-handling, symfony

我正在尝试使用 register_shutdown_function 来“捕获”PHP 致命错误，以便我可以返回干净的错误消息。

在一个简单的 PHP 文件中，以下两个测试用例都得到了正确处理，并返回了我的自定义 500 错误。

```
register_shutdown_function('handleShutdown');

//Test Case #1
$nullVar = null;
$nullVar->test();

//Test case #2
$uninitialisedVar->test();

function handleShutdown()
{
$error = error_get_last();
if ($error !== NULL)
{
    ob_clean();
    header('HTTP/1.0 500 Internal Server Error');
    echo 'Something bad happened';
}
} 
```

然而，当在控制器内部的 Symfony 2 操作中使用相同的机制时，不再处理测试用例 #2：我的处理程序仅在变量之前已初始化时才被调用。但是，在这两种情况下，我们都在处理同一种致命错误（调用非对象的成员方法）。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:05:25.827

在调试模式下 Symfony2 调用`set_error_handler`可能与`register_shutdown_function`. 在生产模式下不会发生。

# php - PHP 两个日期之间的月差？

> ID：10427694
> 
> 赞同：15
> 
> 时间：2012-05-03T08:26:42.740
> 
> 标签：php, datediff

> **可能重复：**
> [如何使用 PHP 计算两个日期之间的差异？](https://stackoverflow.com/questions/676824/how-to-calculate-the-difference-between-two-dates-using-php)
> [php中的日期差异？](https://stackoverflow.com/questions/1940338/date-difference-in-php)

我在一个变量中有两个日期，比如

```
$fdate = "2011-09-01"

$ldate = "2012-06-06" 
```

现在我需要他们之间的月差。
例如，如果您从 09 月（9 月）到明年 06 月（6 月）计算，答案应该是 10 - 结果是 10。
我怎样才能在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-04T07:13:27.467

更优雅的解决方案是使用[DateTime](http://www.php.net/manual/en/class.datetime.php)和[DateInterval](http://www.php.net/manual/en/class.dateinterval.php)。

```
<?php

// @link http://www.php.net/manual/en/class.datetime.php
$d1 = new DateTime('2011-09-01');
$d2 = new DateTime('2012-06-06');

// @link http://www.php.net/manual/en/class.dateinterval.php
$interval = $d2->diff($d1);

$interval->format('%m months'); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-03T08:28:18.900

看看[`date_diff`](http://www.php.net/manual/en/datetime.diff.php)：

```
<?php
$datetime1 = date_create('2009-10-11');
$datetime2 = date_create('2009-10-13');
$interval = date_diff($datetime1, $datetime2);
echo $interval->format('%m months');
?> 
```

# javascript - Override function (e.g. "alert") and call the original function?

> ID：10427708
> 
> 赞同：33
> 
> 时间：2012-05-03T08:28:08.870
> 
> 标签：javascript, overriding

I would like to override a Javascript built-in function with a new version that calls the original (similarly to overriding a method on a class with a version that calls `super` in many languages). How can I do this?

For example...

```
window.alert = function(str) {
    //do something additional
    if(console) console.log(str);

    //super.alert(str) // How do I do this bit?
} 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-05-03T08:30:32.800

Store a reference to the original function in a variable:

```
(function() {
    var _alert = window.alert;                   // <-- Reference
    window.alert = function(str) {
        // do something additional
        if(console) console.log(str);
        //return _alert.apply(this, arguments);  // <-- The universal method
        _alert(str);                             // Suits for this case
    };
})(); 
```

The universal way is [`<original_func_reference>.apply(this, arguments)`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply) - To preserve context and pass all arguments. Usually, the return value of the original method should also be returned.

However, it's known that `alert` is a void function, takes only one argument, and does not use the `this` object. So, `_alert(str)` is sufficient in this case.

Note: IE <= 8 throws an error if you try to overwrite `alert`, so make sure that you're using `window.alert = ...` instead of `alert = ...`.

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-03T08:31:54.720

There is no "super". Anyway, create a closure to "keep" around the original function-object.

Note the "self invoking function" that returns a new function-object (that is assigned to the `window.alert` property). The new function-object returned creates a closure around the *variable* `original` which evaluates to the original *value* of `window.alert` that was passed in to the "self invoking function".

```
window.alert = (function (original) {
  return function (str) {
    //do something additional
    if(console) {
      console.log(str)
    }
    original(str)
  }
})(window.alert) 
```

However, I *believe* some browsers may prevent `alert` and other built-ins from being modified...

Happy coding.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-03T08:31:43.563

I'm assuming your question is how do you overwrite a built-in and still be able to call it. First off as a disclaimer, you should never overwrite built ins unless you have a good reason for doing it since it will make it impossible to debug/test.

This is how you would do it:

```
window._alert = window.alert;
window.alert = function(str) { 
     if(console) console.log(str);
     window._alert(str);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-01T11:04:06.480

How to do simple classical inheritance in Javascript:

```
SuperClass.call(this) // inherit from SuperClass (multiple inheritance yes) 
```

How to override functions:

```
this.myFunction = this.myFunction.override(
                    function(){
                      this.superFunction(); // call the overridden function
                    }
                  ); 
```

The override function is created like this:

```
Function.prototype.override = function(func)
{
 var superFunction = this;
 return function() 
 {
  this.superFunction = superFunction;
  return func.apply(this,arguments);
 };
}; 
```

Works with multiple arguments.
Fails when trying to override undefined or nonfunctions.
Makes "superFunction" a "reserved" word :-)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T08:32:33.117

JavaScript does not use a classical inheritance model. There is a nice [article here](http://www.crockford.com/javascript/inheritance.html) which describes a way to write your classes so that a similar syntax can be used, but it's not natively supported.

# javascript - 多文件上传Html Jsp

> ID：10427709
> 
> 赞同：1
> 
> 时间：2012-05-03T08:28:11.163
> 
> 标签：javascript, html, jsp

我正在尝试上传两个文件，但网页中的提交按钮不起作用。它不会触发事件。但仍然无法正常工作。但是当我上传单个文件时它可以工作。这里 J-query 用于更改选择下拉列表。如果是彩信或 VCF，那么我们必须上传第二个文件。有时只提交是行不通的。

```
 $("select#msgtype").change(function () {

            var mt =   $("#msgtype").val();

            if(mt == 'VCF' || mt == 'MMS'){
            $("#taM").hide();
            $("#bus11").show();
            }else{
            $("#taM").show();
            $("#bus11").hide();
            }
            });

    });

function fun()
{
    alert("submit");
       window.document.form11.action="newcamp.jsp";
       window.document.form11.method= "post";
        window.document.form11.enctype="multipart/form-data";
       window.document.form11.submit();
} 
```

和html表单

```
 <form name="form11" >

<table>
    <tr>
      <td><label class="lab">MSISDN:</label></td>
        <td><label class="lab1"><%= msisdn %></label></td>

   </tr>
         <tr>
      <td><label class="lab">SourceAddress:</label></td>
        <td><input type="Text" id="c" size="35" class="text1" name="c" /></td>

</tr>

<tr>
      <td><label class="lab">CampaignName:</label></td>
    <td><input type="Text" id="c1" size="35" class="texta" name="cname"/></td>

</tr>

<tr>
    <td><label class="lab">Message Type:</label></td>
    <td> <select name="cp" class="texta" id="msgtype"  style="width: 328px " >
                        <option value="TEXT">Text</option>
                        <option value="FLASH">Flash Message</option>
                        <option value="VCF">Business Card</option>
                        <option value="unicode">Language/Unicode Message</option>
                        <option value="MMS">MMS</option>
                        </select></td>

</tr>
<tr>
  <td><label class="lab">Message:</label></td>
  <td><div id="bus11">
      <input type="file"  name="file"  />
 </div>
  <div id ="taM">
<textarea rows=3 cols=35 name="msg" id="msg1" class="texta"></textarea>

</div>
</td>

</tr>
<tr>
  <td><label class="lab">StartTime:</label></td>
  <td>
    <input type="Text" id="demo1" size="35" name="stime" class="texta" on/>
    <img src="images/cal.gif" onclick="javascript:NewCssCal('demo1','yyyyMMdd','dropdown',true,'24',true)" style="cursor:pointer"/>

</td>
</tr>
<td><label class="lab">EndTime:</label></td>
  <td>
    <input type="Text" id="demo2" size="35" class="texta" name="etime" />
    <img src="images/cal.gif" onclick="javascript:NewCssCal('demo2','yyyyMMdd','dropdown',true,'24',true)" style="cursor:pointer"/>

</td>

<tr>
  <TD> </TD>
  <TD></TD>
</tr>
<tr>
  <td><label class="lab">ListofMSISDN:</label></td>
  <td>
        <input type="file" id="fl1" name="file"  />
  </td>

<tr>
  <td COLSPAN=2><CENTER><br>
              <input TYPE="submit" id="submit1" NAME="submit" VALUE="submit" onclick="fun();" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <input TYPE="reset" class="button" /></CENTER></td>

</tr>
</table>
</form> 
```

感谢您的快速回复，但是当我当时尝试上传两个文件时，它甚至没有进入 jsp 文件……我的 jsp 代码是

```
List<String> field = new ArrayList<String>();
List<FileItem> items = new ServletFileUpload(new DiskFileItemFactory()).parseRequest(request);

for (FileItem item : items) {
            if (item.isFormField()) {
                String fieldvalue = item.getString();
                field.add(fieldvalue);
            } else {

                 InputStream filecontent = item.getInputStream();
                 myString = IOUtils.toString(filecontent, "UTF-8");

            }
        } 
```

# android - 如何增加媒体播放器的音量

> ID：10427713
> 
> 赞同：4
> 
> 时间：2012-05-03T08:28:20.427
> 
> 标签：android, android-mediaplayer

我正在编写一个应用程序，在某些情况下会通过警报声警告用户。我的问题是，在某些情况下，用户可能会降低媒体播放的音量，甚至媒体音量是无声的。我想以编程方式检查音量并将其增加到 100%，然后播放警报。

任何的想法？请注意，我已经测试过`mediaPlayer.setVolume(1,1)`，没有任何改变。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T08:33:47.463

这不是设置音量的功能。这是将音量设置为任何值：

```
AudioManager audioManager = (AudioManager) this.getSystemService(Context.AUDIO_SERVICE);
// For example to set the volume of played media to maximum.
audioManager.setStreamVolume (AudioManager.STREAM_MUSIC, audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC),0); 
```

# windows - Win32/Dll：调用DLL函数时跳转到的地址？

> ID：10427717
> 
> 赞同：2
> 
> 时间：2012-05-03T08:28:52.370
> 
> 标签：windows, winapi, dll, assembly, x86

当执行“调用”指令来调用 DLL 导出函数时，它会将 EIP 设置为存储在 DLL 中的函数的地址。如果同时执行的另一个程序，调用属于同一个DLL的同一个函数，跳转地址是否相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T08:36:57.293

简短的回答是*视情况而定*。

DLL 是按部分组织的，每个部分*可以*由许多进程共享。通常只有共享代码段（*当 DLL 在相同的基地址加载时*）并且每个进程都有其*私有数据段*。

DLL 的优点之一是您可以在许多进程之间共享它们的代码（然后您可以节省系统内存，因为系统不会加载它们的许多实例）。当然，数据不能（通常）共享，因此必须为每个实例*复制数据。*

这意味着**通常**DLL 代码的内存在不同的进程之间共享，那么它**可能**具有相同的地址。我说“可能”是因为[Virtual Address Space](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366912%28v=vs.85%29.aspx)，即使内存是共享的，也不能保证它在每个进程上都具有相同的地址。为了快速测试使用`GetProcAddress`并多次运行该过程以比较函数地址，您可以使用[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx)中的这个简单程序：

```
#include <windows.h>
#include <iostream>

void _tmain()
{
    typedef void (WINAPI *PGNSI)(LPSYSTEM_INFO);

   SYSTEM_INFO si;
   ZeroMemory(&si, sizeof(SYSTEM_INFO));

   PGNSI fnGetNativeSystemInfo = reinterpret_cast<PGNSI>(GetProcAddress(
       GetModuleHandle(TEXT("kernel32.dll")),  "GetNativeSystemInfo"));

   std::cout << fnGetNativeSystemInfo << std::endl;
} 
```

您应该（通常）看到每个导出函数的相同地址，但您可能看不到。依赖这种行为从来都不是一个好主意。好的，这就是故事，但由于 ASLR，过去几年发生了一些变化，也请看一下[这篇文章](http://blogs.msdn.com/b/michael_howard/archive/2006/05/26/address-space-layout-randomization-in-windows-vista.aspx)。

如果您必须使用相同的 DLL 在进程之间共享数据，则最好使用一些共享内存，请查看[MSDN 上的这篇文章](http://msdn.microsoft.com/en-us/library/ms686958%28v=vs.85%29.aspx)作为示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T08:34:41.647

由于其他程序/进程被映射到它们自己单独的地址空间，我怀疑地址是否相同。

# c++ - 分配 QTcpSocket 对象

> ID：10427719
> 
> 赞同：0
> 
> 时间：2012-05-03T08:29:05.470
> 
> 标签：c++, qt, qtcpsocket

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:46:47.587

check declaration: if you wrote `QTcpSocket socket;` you declare a object not a pointer. In this case you can t construct it with `new`.

You should declare `QTcpSocket* socket;`

# c# - 远程访问 Web 服务 (Microsoft Visual Studio 2008)

> ID：10427724
> 
> 赞同：0
> 
> 时间：2012-05-03T08:29:32.377
> 
> 标签：c#, visual-studio

我尝试使用 Visual Studio 2008 创建一个 hello world Web 服务，我得到了这里的地址

```
http://localhost:49398/Service1.asmx 
```

当我在本地访问和使用此 Web 服务时似乎没有问题，但是当我尝试使用其他计算机访问此 Web 服务时，它会失败。我通过猜测尝试了几个地址，但似乎没有运气。

```
http://1.2.3.4/Service1.asmx
http://1.2.3.4:49398/Service1.asmx 
```

我完全不知道我应该做什么才能访问它。非常感谢您的帮助。

**更新**

我不知道它是 asmx 还是 WCF，但我通过 new project->web->asp.net web service application-> CTL + F5 开始编译它

这是来自 www.youtube.com/watch?v=qOqEKpYbTzw 的教程

您能否建议有关如何将其托管到 IIS 的教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:36:38.133

开发 Web 服务器 ( Cassini ) 不支持远程访问，因此您需要使用 IIS。

您还需要在您使用的任何防火墙中打开该端口。

来自远程机器的 url 将是：

```
http://1.2.3.4:49398/Service1.asmx 
```

# qt - Qt for Embedded Linux：运行 ./configure 时出现错误

> ID：10427734
> 
> 赞同：2
> 
> 时间：2012-05-03T08:29:58.667
> 
> 标签：qt, makefile

我是 Qt 新手，我正计划使用 ARM GNU 工具链为我的 ARM Cortex-A8 处理器平台构建 Qt 库。我在该目录中使用 Qt for Embedded Linux (qt-everywhere-opensource-src-4.6.2) 我必须首先使用`./configure`. 我给出的选项是这样的 -

```
./configure -embedded arm -xplatform qws/linux-arm-g++ -little-endian -webkit -no-qt3support -no-cups -no-largefile -optimized-qmake -no-openssl -nomake tools -qt-mouse-tslib -qt-kbd-linuxinput 
```

当我运行它时，我得到了这些系列的错误。`make`找不到命令 c。配置本身`Makefile`会在执行 ./configure 命令时生成它运行的内容，因此我什至无法从工具 c 更改为 ARM GNU 工具。

```
c -o qfile.o -pipe   -DQMAKE_OPENSOURCE_EDITION -I. -Igenerators -Igenerators/unix -Igenerators/win32 -Igenerators/mac -Igenerators/symbian -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/include -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/include/QtCore -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/global -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/xml -DQT_NO_PCRE -DQT_BUILD_QMAKE -DQT_BOOTSTRAPPED -DQT_NO_TEXTCODEC -DQT_NO_UNICODETABLES -DQT_NO_COMPONENT -DQT_NO_STL -DQT_NO_COMPRESS -I/usr/local/ti-sdk-am180x-evm/linux-devkit/arm-arago-linux-gnueabi/usr/share/qtopia/mkspecs/linux-g++ -DHAVE_QCONFIG_CPP -DQT_NO_THREAD -DQT_NO_QOBJECT -DQT_NO_GEOM_VARIANT  /home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/io/qfile.cpp
make: c: Command not found
make: [qfile.o] Error 127 (ignored)
c -o qfsfileengine_unix.o -pipe   -DQMAKE_OPENSOURCE_EDITION -I. -Igenerators -Igenerators/unix -Igenerators/win32 -Igenerators/mac -Igenerators/symbian -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/include -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/include/QtCore -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/global -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/xml -DQT_NO_PCRE -DQT_BUILD_QMAKE -DQT_BOOTSTRAPPED -DQT_NO_TEXTCODEC -DQT_NO_UNICODETABLES -DQT_NO_COMPONENT -DQT_NO_STL -DQT_NO_COMPRESS -I/usr/local/ti-sdk-am180x-evm/linux-devkit/arm-arago-linux-gnueabi/usr/share/qtopia/mkspecs/linux-g++ -DHAVE_QCONFIG_CPP -DQT_NO_THREAD -DQT_NO_QOBJECT -DQT_NO_GEOM_VARIANT  /home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/io/qfsfileengine_unix.cpp
make: c: Command not found
make: [qfsfileengine_unix.o] Error 127 (ignored)
c -o qfsfileengine_iterator_unix.o -pipe   -DQMAKE_OPENSOURCE_EDITION -I. -Igenerators -Igenerators/unix -Igenerators/win32 -Igenerators/mac -Igenerators/symbian -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/include -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/include/QtCore -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/global -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/xml -DQT_NO_PCRE -DQT_BUILD_QMAKE -DQT_BOOTSTRAPPED -DQT_NO_TEXTCODEC -DQT_NO_UNICODETABLES -DQT_NO_COMPONENT -DQT_NO_STL -DQT_NO_COMPRESS -I/usr/local/ti-sdk-am180x-evm/linux-devkit/arm-arago-linux-gnueabi/usr/share/qtopia/mkspecs/linux-g++ -DHAVE_QCONFIG_CPP -DQT_NO_THREAD -DQT_NO_QOBJECT -DQT_NO_GEOM_VARIANT  /home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/io/qfsfileengine_iterator_unix.cpp
make: c: Command not found
make: [qfsfileengine_iterator_unix.o] Error 127 (ignored)
c -o qfsfileengine.o -pipe   -DQMAKE_OPENSOURCE_EDITION -I. -Igenerators -Igenerators/unix -Igenerators/win32 -Igenerators/mac -Igenerators/symbian -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/include -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/include/QtCore -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/global -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/xml -DQT_NO_PCRE -DQT_BUILD_QMAKE -DQT_BOOTSTRAPPED -DQT_NO_TEXTCODEC -DQT_NO_UNICODETABLES -DQT_NO_COMPONENT -DQT_NO_STL -DQT_NO_COMPRESS -I/usr/local/ti-sdk-am180x-evm/linux-devkit/arm-arago-linux-gnueabi/usr/share/qtopia/mkspecs/linux-g++ -DHAVE_QCONFIG_CPP -DQT_NO_THREAD -DQT_NO_QOBJECT -DQT_NO_GEOM_VARIANT  /home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/io/qfsfileengine.cpp
make: c: Command not found
make: [qfsfileengine.o] Error 127 (ignored)
c -o qfsfileengine_iterator.o -pipe   -DQMAKE_OPENSOURCE_EDITION -I. -Igenerators -Igenerators/unix -Igenerators/win32 -Igenerators/mac -Igenerators/symbian -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/include -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/include/QtCore -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/global -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/xml -DQT_NO_PCRE -DQT_BUILD_QMAKE -DQT_BOOTSTRAPPED -DQT_NO_TEXTCODEC -DQT_NO_UNICODETABLES -DQT_NO_COMPONENT -DQT_NO_STL -DQT_NO_COMPRESS -I/usr/local/ti-sdk-am180x-evm/linux-devkit/arm-arago-linux-gnueabi/usr/share/qtopia/mkspecs/linux-g++ -DHAVE_QCONFIG_CPP -DQT_NO_THREAD -DQT_NO_QOBJECT -DQT_NO_GEOM_VARIANT  /home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/io/qfsfileengine_iterator.cpp
make: c: Command not found
make: [qfsfileengine_iterator.o] Error 127 (ignored)
c -o qregexp.o -pipe   -DQMAKE_OPENSOURCE_EDITION -I. -Igenerators -Igenerators/unix -Igenerators/win32 -Igenerators/mac -Igenerators/symbian -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/include -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/include/QtCore -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/global -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/xml -DQT_NO_PCRE -DQT_BUILD_QMAKE -DQT_BOOTSTRAPPED -DQT_NO_TEXTCODEC -DQT_NO_UNICODETABLES -DQT_NO_COMPONENT -DQT_NO_STL -DQT_NO_COMPRESS -I/usr/local/ti-sdk-am180x-evm/linux-devkit/arm-arago-linux-gnueabi/usr/share/qtopia/mkspecs/linux-g++ -DHAVE_QCONFIG_CPP -DQT_NO_THREAD -DQT_NO_QOBJECT -DQT_NO_GEOM_VARIANT  /home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/tools/qregexp.cpp
make: c: Command not found
make: [qregexp.o] Error 127 (ignored)
c -o qvector.o -pipe   -DQMAKE_OPENSOURCE_EDITION -I. -Igenerators -Igenerators/unix -Igenerators/win32 -Igenerators/mac -Igenerators/symbian -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/include -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/include/QtCore -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/global -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/xml -DQT_NO_PCRE -DQT_BUILD_QMAKE -DQT_BOOTSTRAPPED -DQT_NO_TEXTCODEC -DQT_NO_UNICODETABLES -DQT_NO_COMPONENT -DQT_NO_STL -DQT_NO_COMPRESS -I/usr/local/ti-sdk-am180x-evm/linux-devkit/arm-arago-linux-gnueabi/usr/share/qtopia/mkspecs/linux-g++ -DHAVE_QCONFIG_CPP -DQT_NO_THREAD -DQT_NO_QOBJECT -DQT_NO_GEOM_VARIANT  /home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/tools/qvector.cpp
make: c: Command not found
make: [qvector.o] Error 127 (ignored)
c -o qbitarray.o -pipe   -DQMAKE_OPENSOURCE_EDITION -I. -Igenerators -Igenerators/unix -Igenerators/win32 -Igenerators/mac -Igenerators/symbian -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/include -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/include/QtCore -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/global -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/xml -DQT_NO_PCRE -DQT_BUILD_QMAKE -DQT_BOOTSTRAPPED -DQT_NO_TEXTCODEC -DQT_NO_UNICODETABLES -DQT_NO_COMPONENT -DQT_NO_STL -DQT_NO_COMPRESS -I/usr/local/ti-sdk-am180x-evm/linux-devkit/arm-arago-linux-gnueabi/usr/share/qtopia/mkspecs/linux-g++ -DHAVE_QCONFIG_CPP -DQT_NO_THREAD -DQT_NO_QOBJECT -DQT_NO_GEOM_VARIANT  /home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/tools/qbitarray.cpp
make: c: Command not found
make: [qbitarray.o] Error 127 (ignored)
c -o qdir.o -pipe   -DQMAKE_OPENSOURCE_EDITION -I. -Igenerators -Igenerators/unix -Igenerators/win32 -Igenerators/mac -Igenerators/symbian -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/include -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/include/QtCore -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/global -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/xml -DQT_NO_PCRE -DQT_BUILD_QMAKE -DQT_BOOTSTRAPPED -DQT_NO_TEXTCODEC -DQT_NO_UNICODETABLES -DQT_NO_COMPONENT -DQT_NO_STL -DQT_NO_COMPRESS -I/usr/local/ti-sdk-am180x-evm/linux-devkit/arm-arago-linux-gnueabi/usr/share/qtopia/mkspecs/linux-g++ -DHAVE_QCONFIG_CPP -DQT_NO_THREAD -DQT_NO_QOBJECT -DQT_NO_GEOM_VARIANT  /home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/io/qdir.cpp
make: c: Command not found
make: [qdir.o] Error 127 (ignored)
c -o qdiriterator.o -pipe   -DQMAKE_OPENSOURCE_EDITION -I. -Igenerators -Igenerators/unix -Igenerators/win32 -Igenerators/mac -Igenerators/symbian -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/include -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/include/QtCore -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/global -I/home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/xml -DQT_NO_PCRE -DQT_BUILD_QMAKE -DQT_BOOTSTRAPPED -DQT_NO_TEXTCODEC -DQT_NO_UNICODETABLES -DQT_NO_COMPONENT -DQT_NO_STL -DQT_NO_COMPRESS -I/usr/local/ti-sdk-am180x-evm/linux-devkit/arm-arago-linux-gnueabi/usr/share/qtopia/mkspecs/linux-g++ -DHAVE_QCONFIG_CPP -DQT_NO_THREAD -DQT_NO_QOBJECT -DQT_NO_GEOM_VARIANT  /home/sandeep/Downloads/qt-everywhere-opensource-src-4.6.2/src/corelib/io/qdiriterator.cpp 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T17:37:47.543

为了解决这个问题，我做了两件事。

首先，在`qmake.conf`我给定平台的文件中，我确保我拥有编译器和其他工具设置的完整路径。我使用的是`linux-arm-g++`. 例如，我的编译器位于：`/home/lucid/compiler/linux-gnueabi-g++`. 这就是我为 QMAKE_CXX、QMAKE_LINK 和 QMAKE_LINK_SHLIB 输入的内容。对于 QMAKE_CC 也是如此。

```
 QMAKE_CC          = /home/lucid/compiler/linux-gnueabi-gcc
 QMAKE_CXX         = /home/lucid/compiler/linux-gnueabi-g++
 QMAKE_LINK        = /home/lucid/compiler/linux-gnueabi-g++
 QMAKE_LINK_SHLIB  = /home/lucid/compiler/linux-gnueabi-g++ 
```

还要确保将包含设置为正确的子路径`include(../common/linux.conf)`可能需要`include(../../common/linux.conf)`。

其次，我设置了`PATH=location_of_compiler:$PATH`库和编译器，以便从正确的位置拉出。在尝试编译所有 QT 之前，我使用 HelloWorld 应用程序的简单构建对此进行了测试。

我不知道两者是否都是必要的，`PATH`可能就足够了，但在我看来，我需要两者都做。

# jquery - 从 LINQ 结果集中删除列名

> ID：10427748
> 
> 赞同：0
> 
> 时间：2012-05-03T08:31:20.617
> 
> 标签：jquery, json, linq, datatable

不知道我的问题是否正确或我的计划是否正确，但我正在使用数据`jquery`表插件并`datasource`从`Json`转换`LINQ`结果中获取它。

我的问题是，我的结果集包括我认为 Jquery DataTable(client) 不需要的 datatable(ado) 中的列名称。

如果我在将其转换为 json 之前不包含或更确切地说从我的 LINQ 结果中删除列名，是否有可能？

这是我的服务器代码。

```
 context.Response.ContentType = "application/json";
 var y = from t in dt select t;
 ret = JsonConvert.SerializeObect(y, Formatting.None);

 context.Response.Write(ret); 
```

上面的代码返回一个包含所有列名的结果。我也在使用 JSON.NET

这是我如何填充我的 dt

```
dsTableAdapters.dtTableAdapter adap = new dsTableAdapters.dtTableAdapter();
adap.Fill(ds.dt); 
```

输出 JSON：

```
[
[
    "COL1": 1,
    "COL2": "R1C2"
},
{
    "COL1: 2,
    "COL2": "R2C2"
},
{
    "COL1": 3,
    "COL2": "R3C3"
}
] 
```

基于 jquery Datatable 插件的所需输出必须是：

```
[
[
    1,
    "R1C2"
],
[
    2,
    "R2C2"
],
[
    3,
    "R3C3"
]
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T00:44:01.763

```
var y = (from t in dt.AsEnumerable() 
         select new { COL1= t.Field<string>("FirstName"), 
                      COL2 = t.Field<string>("LastName") }).ToList(); 
```

假设 dt 是您的 DataTable 并且您在其中有 2 个名为 FirstName 和 LastName 的列，并且您只想输出那些。

这将起作用。经测试。

[http://msdn.microsoft.com/en-us/library/system.data.datatableextensions.asenumerable.aspx](http://msdn.microsoft.com/en-us/library/system.data.datatableextensions.asenumerable.aspx)

DataTable 上的`AsEnumerable`扩展方法将返回 DataRows 的集合。然后您使用必填字段从您的 Linq 结果中进行投影。由于它是 dataRow 类型，因此您需要指定每个列的类型。

# xml - Flex 4 xml 节点做一些奇怪的事情

> ID：10427759
> 
> 赞同：0
> 
> 时间：2012-05-03T08:32:06.373
> 
> 标签：xml, actionscript-3, apache-flex, nodes, arraycollection

我已经创建了一些代码来保存一个 xml 文件并加载一个 xml 文件，并且它都完美地完成了。

这是我发现错误的地方。当我保存一个 xml 文件然后加载它并最终重新保存它时，它确实很奇怪

所以我保存了一个看起来像这样的文件

```
<partlist>
  <item>
    <series>51 Series</series>
    <part>29251</part>
    <size>29251-6-6</size>
    <alt></alt>
    <description>BSP Swiv FM, BN</description>
  </item>
  <item>
    <series>51 Series</series>
    <part>29251</part>
    <size>29251-8-8</size>
    <alt></alt>
    <description>BSP Swiv FM, BN</description>
  </item>
</partlist> 
```

当我将它加载到我的 flex 应用程序中然后重新保存时，它看起来像这样

```
<partlist>
  <item>
    <series>
      <series>51 Series</series>
    </series>
    <part>
      <part>29251</part>
    </part>
    <size>
      <size>29251-6-6</size>
    </size>
    <alt>5654</alt>
    <description>
      <description>BSP Swiv FM, BN</description>
    </description>
  </item>
  <item>
    <series>
      <series>51 Series</series>
    </series>
    <part>
      <part>29251</part>
    </part>
    <size>
      <size>29251-8-8</size>
    </size>
    <alt>
      <alt/>
    </alt>
    <description>
      <description>BSP Swiv FM, BN</description>
    </description>
  </item>
</partlist> 
```

保存和加载的值存储在 Arraycollection 中，这是我创建节点的方式

```
var SavelistXml:XML=new XML();
SavelistXml = <partlist/>;
for (var i:Number = 0; i < PartsArray.length; i++)
{
var obj:Object = Object(PrintListGrid[i]);

var newItemNode:XML= <item/>;                   
var newSeriesNode:XML = <series/>;
newSeriesNode.appendChild(obj.PartGroup);
var newPartNode:XML = <part/>;
newPartNode.appendChild(obj.PartType);
var newSizeNode:XML = <size/>;
newSizeNode.appendChild(obj.PartNumber);
var newAltPartNode:XML = <alt/>;
newAltPartNode.appendChild(obj.AltPartNum);
var newDescriptionNode:XML = <description/>;
newDescriptionNode.appendChild(obj.PartDesc);

newItemNode.appendChild(newSeriesNode);
newItemNode.appendChild(newPartNode);
newItemNode.appendChild(newSizeNode);
newItemNode.appendChild(newAltPartNode);
newItemNode.appendChild(newDescriptionNode);

SavelistXml.appendChild(newItemNode);
} 
```

不知道它为什么起作用，但是一旦数据来自加载的文件，它就会停止正常工作。例如，如果我提醒 obj.PartGroup 它给了我正确的值，但是 appendChild() 正在它自身的节点内创建它自身的节点

# webdriver - 如何在嵌入式 QT Webkit 浏览器中运行 Selenium WebDriver 测试？

> ID：10427761
> 
> 赞同：8
> 
> 时间：2012-05-03T08:32:13.880
> 
> 标签：webdriver, selenium-webdriver, qtwebkit

我正在开发一系列使用 Google Web Toolkit (GWT) 编写的 Web 应用程序。作为我们测试的一部分，我们已经成功使用 selenium-rc 很长时间了。我们希望迁移到 Selenium 2 并使用 WebDriver 界面。

复杂之处在于我们的一个客户是一个定制的 .Net 应用程序，它使用嵌入式 QT Webkit 浏览器启动我们的 Web 应用程序。我们担心迁移到 Selenium 2 将意味着我们无法在此客户端中运行 Selenium 测试，这将是一个大问题，因为它目前包含我们的大多数客户。

做了一些研究后，我能找到的只是谷歌代码上的[webkitdriver](http://code.google.com/p/webkitdriver/)项目。然而，这似乎只是支持针对我们不想要的无头 webkit 进行测试。

有没有其他人有使用 Selenium 2 和 WebDriver 测试嵌入式 QT webkit 浏览器的经验？我希望能够完成这项工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-27T12:01:45.090

我知道，这是一个老问题，但如果你仍然对它感兴趣，你可以使用不久前开源的 Qt WebDriver。您可以在此处了解更多信息[https://github.com/cisco-open-source/qtwebdriver/wiki](https://github.com/cisco-open-source/qtwebdriver/wiki)。顺便说一句，您也可以测试 Qt 应用程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T16:43:47.253

这将是很多工作。对于[PhantomJS](http://phantomjs.org)，我们集成了[Ghost 驱动程序](https://github.com/detro/ghostdriver)，它是[WebDriver Wire](http://code.google.com/p/selenium/wiki/JsonWireProtocol)协议的实现（参见 1.8 版的[发行说明](http://phantomjs.org/release-1.8.html)）。从 Ghost Driver 的源代码中可以看出，它绝非易事。最重要的是，您需要将协议实现挂钩到各种 QtWebKit API，这也是相当多的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-19T09:38:20.460

看看[WWW::WebKit](https://metacpan.org/pod/WWW::WebKit)，它是 WWW::Selenium 的替代品，使用 Gtk3::WebKit 作为浏览器，而不是依赖外部 Java 服务器和安装的浏览器。

# javascript - 主干集合是否自动解析加载的数据

> ID：10427764
> 
> 赞同：1
> 
> 时间：2012-05-03T08:32:36.310
> 
> 标签：javascript, backbone.js

尝试使用主干集合初始化抓取json数据，结果数据为空。主干集合是自动将json数据解析到模型还是我们必须手动解析？

```
 var Book = Backbone.Model.extend({
    title:"",
    isbn:"",
    img:""  
 });

 var Books = Backbone.Collection.extend({
    model:Book,
    url:'latest.json',
    // parse:function(data){
    //  console.log(data);
    // },       
    initialize: function(){
        this.fetch();
    }
 }); 
```

编辑添加到我的示例 json 中，我使用 jsonlint.com 进行验证。

```
[
    {"title":"American Pie","isbn":"345354356","img":"/image/pie.png"},
    {"title":"Long Tails","isbn":"567575576g","img":"/image/long_tails.png"},
    {"title":"Pirates","isbn":"567575765","img":"/image/pirates.png"}
] 
```

在 JSFiddle 链接中添加。

[http://jsfiddle.net/mochatony/5E3Nc/14/](http://jsfiddle.net/mochatony/5E3Nc/14/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:37:07.820

您需要先确保这些工作正常

*   没有脚本错误（在 javascript 控制台中检查它们）

*   Collection.fetch 请求更正 url（请参阅 Chrome 网络检查器中的资源部分）

*   检查响应`mime/type`是否正确“application/json”并且服务器确实提供 JSON 字符串

*   确保 JSON 响应**格式**正确（我遇到了这个问题。它必须是一个数组而不是一个对象 ex `[{},{},{},{}]`:)

*   最后从服务器刷新（清除缓存）

### 更新

这是一个 JsFiddle 来演示使用[http://jsfiddle.net/5E3Nc/16/](http://jsfiddle.net/5E3Nc/16/)

**注意：**只有在从您要构建模型集合的服务器发送自定义响应时，才必须显式编写解析

顺便说一句，我注意到你这样做了

```
initialize:function(){
  this.fetch();
} 
```

这行不通。例如，您应该在集合本身之外使用集合

```
var col = Backbone.Collection.extend({url:"data.json"});
var instance = new col({model:Tweet});
instance.fetch(); 
```

# xml - 基于预定义输出字符串的 XSLT 转换

> ID：10427765
> 
> 赞同：2
> 
> 时间：2012-05-03T08:32:45.907
> 
> 标签：xml, xslt-1.0, xslt-grouping, xslt

我需要 xslt 来转换，我的 Xml 如下

```
 <OrderReferences>
            <OrderRef>
              <OrderRef>OrderRef1</OrderRef>
              <Type>ERP</Type>
            </OrderRef>
            <OrderRef>
              <OrderRef>OrderRef2</OrderRef>
              <Type>CUSTOMER</Type>
            </OrderRef>
            <OrderRef>
              <OrderRef>OrderRef3</OrderRef>
              <Type>EXT</Type>
            </OrderRef>
          </OrderReferences> 
```

我的输出应该是

```
<OrderReference> (OrderReference for ERP should appear here) </OrderReference>
<OrderReferenceCustomer> (CustomerReference for Customer should appear here) </OrderReferenceCustomer>
<OrderReferenceExternal> (ExtReference for EXT should appear here) </OrderReferenceExternal> 
```

让我知道这是否可以实现。XSLT 1.0 版本更可取，因为我希望它用于 .Net。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:44:11.130

您需要使用**xsl:element**根据**Type**元素创建新的元素名称。试试这个 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="OrderRef">
      <xsl:element name="Erp{substring(Type, 1, 1)}{translate(substring(Type, 2, string-length(Type) - 1), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz')}Reference">
         <xsl:value-of select="OrderRef" />
      </xsl:element>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

当这应用于您的示例 XML 时，将输出以下内容

```
<OrderReferences>
   <ErpErpReference>OrderRef1</ErpErpReference>
   <ErpCustomerReference>OrderRef2</ErpCustomerReference>
   <ErpExtReference>OrderRef3</ErpExtReference>
</OrderReferences> 
```

这应该可以处理包含任何值的**Type元素。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:57:26.947

**这个简短而简单的转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="OrderRef[Type='ERP']">
     <OrderReference><xsl:value-of select="OrderRef"/></OrderReference>
 </xsl:template>

 <xsl:template match="OrderRef[Type='CUSTOMER']">
     <OrderReferenceCustomer><xsl:value-of select="OrderRef"/></OrderReferenceCustomer>
 </xsl:template>

 <xsl:template match="OrderRef[Type='EXT']">
     <OrderReferenceExternal><xsl:value-of select="OrderRef"/></OrderReferenceExternal>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<OrderReferences>
    <OrderRef>
        <OrderRef>OrderRef1</OrderRef>
        <Type>ERP</Type>
    </OrderRef>
    <OrderRef>
        <OrderRef>OrderRef2</OrderRef>
        <Type>CUSTOMER</Type>
    </OrderRef>
    <OrderRef>
        <OrderRef>OrderRef3</OrderRef>
        <Type>EXT</Type>
    </OrderRef>
</OrderReferences> 
```

**产生确切想要的正确结果（与当前接受的答案不同）：**

```
<OrderReference>OrderRef1</OrderReference>
<OrderReferenceCustomer>OrderRef2</OrderReferenceCustomer>
<OrderReferenceExternal>OrderRef3</OrderReferenceExternal> 
```

# android - Android：麦克风音量级别（可能）、自动增益、FFT、Butterworth、Audacity

> ID：10427767
> 
> 赞同：2
> 
> 时间：2012-05-03T08:32:51.010
> 
> 标签：android, filter, fft, microphone, audacity

我正在尝试录制赛车的声音并使用 FFT 分析录制的音频并找到引擎频率。如果我只吹口哨，一切正常，我可以看到一个清晰的图表，对应于我的口哨声低和高等等。我为从 FFT 获得的频率与时间的不同幅度创建了一个具有不同颜色的热图。音频记录如下：

```
private class RecordAudio extends AsyncTask<Void, float[], Void> {
        @Override
        protected Void doInBackground(Void... params) {
            try {
            int bufferSize = AudioRecord.getMinBufferSize(sampleRateMain,
                    channelConfiguration, audioEncoding);
            AudioRecord audioRecord = new AudioRecord(
                    MediaRecorder.AudioSource.DEFAULT, sampleRateMain,
                    channelConfiguration, audioEncoding, bufferSize);
            short[] buffer = new short[blockSize];
            audioRecord.startRecording();
            float[] audioData = new float[blockSize];
            try{
            SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMdd_HHmmss");
            String currentDateandTime = sdf.format(new Date());

            BufferedWriter writer;
            String pathtemp = Environment.getExternalStorageDirectory().getAbsolutePath();
            String filename ="/"+currentDateandTime;
            path = pathtemp +filename;
            writer = new BufferedWriter (new FileWriter(path,false));
            int i2=0;
            while (started) {   
                if(i2==10){                 
                    datastructures tempdata = new datastructures();
                    i2=0;
                    audioRecord.read(buffer, 0, blockSize);         
                    float sum = 0;
                    for (int i = 0; i < blockSize; i++) {
                        audioData[i] = (float) ( buffer[i]);
                        writer.write(audioData[i]+" ");
                            if (audioData[i] <= 0) {
                                audioData[i] = audioData[i] * (-1);
                            }
                            sum = sum + audioData[i];
                    }   
                    writer.newLine();
                    tempdata.freqsum = sum;
                    mainData.add(tempdata);
                }
                i2++;                   
            }
            writer.close();
            }
            catch(IOException e){
                e.printStackTrace();
            }               
            audioRecord.stop();         
        } catch (Throwable t) {
            Log.e(TAG, "Audio recording Failed");
        }
        return null; 
    }
} 
```

所以我将音频数据存储在 SD 卡上。为了减少 i 循环通过 i2 的数据，并且只在 i2=0...10 中记录一次；在应用程序的下一部分中，我让用户剪切一部分音频数据，并仅将这部分加载到一个名为 trimmed 的向量中。然后我对这些频率进行 FFT。但似乎数据中只有过载。

录音时是否可以触发麦克风的自动增益？

我如何将录制和保存的音频数据加载到 Audacity 中？（我为原始数据尝试了不同的导入设置，但它似乎不起作用） [这是一个示例文件](https://docs.google.com/open?id=0B3l6goBmnRXDTW9LUHhzT2hlRUk)

我实现了一个巴特沃斯滤波器，如果我做对了，应该在 FFT 之前应用滤波器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T07:11:52.527

我无法回答您的麦克风增益问题，但至于您的过滤器问题：这取决于您如何实现过滤器。[巴特沃斯滤波器通常通过 Z 变换（递归关系）](http://en.wikipedia.org/wiki/Z-transform#Linear_constant-coefficient_difference_equation)实现为 IIR（无限脉冲响应，即滤波器的输出取决于先前的输出）滤波器。如果您以这种方式实现了滤波器，那么您应该在进行 FFT 之前将滤波器应用于时域样本。

如果您需要一个滤波器，并且无论如何都要进行 FFT，那么您最好通过卷积和[卷积定理](http://en.wikipedia.org/wiki/Convolution_theorem)来实现 FIR 滤波器，而不是使用巴特沃斯或其他 s/z 域滤波器。

# javascript - 如何在 HTML5 画布上以交互方式绘制形状？

> ID：10427770
> 
> 赞同：2
> 
> 时间：2012-05-03T08:32:59.617
> 
> 标签：javascript, html, canvas, shapes, mouse-cursor

我需要用鼠标光标在 HTML5 画布上绘制一个形状，例如正方形或圆形；并且它应该是可调整大小的，然后，当用户完成绘图时，画布内的形状的坐标应该是可检索的。

关于如何使用 JavaScript 实现这一点的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T20:45:35.917

您可能会对JavaScript 库[Paper.js](http://paperjs.org/)感兴趣。解释网站介绍 - “这提供了一个使用 HTML 5 Canvas 的矢量图形框架”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:53:18.140

Canvas 对您正在绘制的对象的性质一无所知。这意味着比调用`arc`方法之后，你得到的只是屏幕上的一堆像素。

这里有两种方法 - 您可以在画布上编写自己的对象模型包装器。每次你要画东西时，你应该存储对象信息——形状、坐标和其他任何需要的东西。这是一种相当不错的方法，但请注意——它并不像人们想象的那么微不足道。

第二种方法是使用 SVG 而不是画布，并从盒子中获取对象模型。

# asp.net - 是否有某种方法可以配置 web.config 并使 Razor 在 ASP.Net 4 普通 Web 应用程序中可用？

> ID：10427771
> 
> 赞同：2
> 
> 时间：2012-05-03T08:33:00.600
> 
> 标签：asp.net, razor, web-application-project

不是网页应用程序 - 我使用了 VisualStudio 2010，它是一个多项目解决方案。

现在 Web 应用程序在 .Net 4.0 中，但其中包含 200 多个 aspx 文件，今天我只是尝试添加一些 Razor 引用，看看它是否可以工作 - 令人惊讶的是，它给了我一种可能的感觉？

这是我制作的 web.config 文件，但它给了我“不提供此类页面”。错误。谁能帮我看看是否可行？

这是我修改后的 web.config

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <configSections>
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
      <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
    </sectionGroup>
  </configSections>
  <connectionStrings>
  </connectionStrings>
  <appSettings>
    <add key="webpages:Enabled" value="false" />
  </appSettings>
  <system.web.webPages.razor>
    <host factoryType="System.Web.WebPages.Razor.WebRazorHostFactory, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.WebPages.WebPage">
      <namespaces>
        <add namespace="System.Web.WebPages" />
        <add namespace="System.Web.WebPages.Html" />
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Routing" />
      </namespaces>
    </pages>
  </system.web.webPages.razor>
  <system.web>
    <httpRuntime requestValidationMode="2.0" maxRequestLength="1048576000" executionTimeout="99999" />
    <customErrors mode="Off" />
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
    </compilation>
    <pages validateRequest="false">
      <namespaces>
        <add namespace="System.Web.WebPages" />
        <add namespace="System.Web.WebPages.Html" />
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Routing" />
      </namespaces>
    </pages>
    <httpHandlers>
      <add path="*.cshtml" verb="GET,HEAD,POST,DEBUG" type="System.Web.HttpForbiddenHandler" />
    </httpHandlers>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true">
      <add name="PBHttpModule" type="WebCider.PortalBuilder.Framework.Web.Http.PBHttpModule, WebCider.PortalBuilder.Framework.Web" />
    </modules>
    <directoryBrowse enabled="true" />
    <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="1048576000" />
        <fileExtensions>
          <add fileExtension=".cshtml" allowed="true" />
        </fileExtensions>
      </requestFiltering>
    </security>
    <handlers>
    </handlers>
  </system.webServer>
  <runtime>
  </runtime>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:42:05.213

您实际上不需要修改当前 Web 表单应用程序中的任何内容。您可以简单地首先将`~/Foo.cshtml`Razor 文件添加到具有以下内容的根目录，例如：

```
@DateTime.Now 
```

然后只需导航到`http://example.com/Foo.cshtml`. 您添加到 web.config的`<system.web.webPages.razor>`部分在 WebForms 应用程序中是无用的，因为您没有返回呈现`System.Web.WebPages.WebPage`实例的视图结果的控制器。显然，由于这个事实，您不能在这些 Razor 模板中使用 HTML 助手。在 WebMatrix 中，它只是简单的 Razor。

# php - CSRF 令牌 Zend 框架和 Webkit 请求

> ID：10427772
> 
> 赞同：1
> 
> 时间：2012-05-03T08:33:10.230
> 
> 标签：php, zend-framework, csrf

我为我的表单编写了一个 CSRF 保护并添加了一个隐藏令牌。帖子被发送到相同的操作。所以我的`formAction`代码如下所示：

```
if($this->getRequest()->isPost()) {
    $token = $this->_getParam('token');
    if(isset($this->session->token) && 
       isset($cellarToken) && 
       $token == $this->session->token) {
         ......process form.......
    }
    else {
       error_log('possible CSRF attack');
    }
}
else {
    $this->session->token =  md5(uniqid(mt_rand(),true));
    $this->view->token = $this->session->token;
} 
```

在我看来html我添加：

```
<input type="hidden" value="<?= $this->token; ?>" name="token" /> 
```

这适用于所有主流浏览器，但在 Chrome、Safari 等 Webkit 浏览器中确实存在一些问题。在这里，我在后台收到对我的联系人的第二个 GET 请求，该请求会生成一个新令牌，因此该表单无效....

有谁知道第二个请求来自哪里？如果它是我自己的代码，那么所有浏览器中都会有第二个请求......

问候

# sql-server - 更改特定日期范围的布尔值

> ID：10427774
> 
> 赞同：1
> 
> 时间：2012-05-03T08:33:34.317
> 
> 标签：sql-server

嗨，我正在 ASP.NET 中从事酒店预订项目。我想制作一个过滤器，以便我可以按日期（例如 6 月 1 日至 6 月 5 日之间）搜索可用房间，然后预订该房间。我该如何将该房间的状态更改为“不可用”期间，以便想要在 5 月 15 日至 30 日之间预订该房间的人可以这样做。房间的状态是我数据库中的布尔值。

![在此处输入图像描述](../Images/6309a64400187098e0d29adf09df579e.png)

到目前为止，我显示了所有可用状态的房间。但是当我在数据库中引入房间时设置了状态。但我不知道如何更改状态以及是否可以在一段时间内将房间的状态设置为 true，然后假的另一个时期

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:41:08.770

首先你的数据库结构不正确。您必须在预订表中有状态字段，以便您每天都有过渡历史记录。

因为在您目前的情况下，您的房间要么全天可用，要么全天关闭。您应该制作一个房间状态表，您应该在其中记录日常状态，并根据该表验证您的房间选择。

将状态的默认值设为 true。因此，默认情况下，每个房间都可以默认预订。

@ianco 斯洛伐克，我真的觉得你必须改变你的数据库结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:56:36.173

[Status] 字段的目的是显示当前是否有可用房间，不是吗？如果是，那么您可以将其设置为已计算 - 创建一个返回布尔值（您的状态字段类型）的 sql 函数，并检查当前没有保留。

请在此处阅读有关计算字段的更多信息，并在[此处阅读有关性能的更多](http://msdn.microsoft.com/en-us/library/ms191250.aspx)[信息](http://blog.sqlauthority.com/2010/08/03/sql-server-computed-column-persisted-and%C2%A0performance/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T12:06:07.220

您请求的内容不需要更改数据库结构，并且要支持 MarkP3rry 描述的超时功能，您只需向您的 Reservation 表添加一个字段：`BookingDate DATETIME`. 您应该使用预订表检查可用性。如果没有对与提供的开始日期和结束日期重叠的房间进行预订，则该房间在该期间可用，除非预订已被取消。

要确定两个日期之间有哪些房间可用，请使用以下查询：

```
SELECT r.*
FROM Room r LEFT JOIN Reservation v ON r.RoomID = v.RoomID
    AND NOT (@StartDate >= Date_Check_Out OR @EndDate <= Date_Check_In)
    AND v.cancel = 0
WHERE v.ReservationID IS NULL 
```

`@StartDate`这将为您提供所有在和之间没有保留的房间`@EndDate`。您当然可以通过房间状态、房间类型等进一步过滤。此查询假定已完成对提供的日期的验证，即 that`@StartDate < @EndDate`和 that `Reservation.Check_In_Date < Reservation.Check_Out_Date`。加入将返回所有房间，并且仅返回日期与提供的开始日期和结束日期重叠的预订。添加`AND v.cancel = 0`仅包括尚未取消的预订。然后我们过滤掉有任何预订数据的结果，剩下的是两个日期之间的可用房间。

# iphone - 如何在 iphone 中控制可重复使用的单元格

> ID：10427776
> 
> 赞同：0
> 
> 时间：2012-05-03T08:33:42.143
> 
> 标签：iphone, objective-c

我必须在标签上打印日期。日期来自数据库，它显示正确但问题是我必须将数据库日期与当前日期进行比较。如果数据库日期小于当前日期，那么标签应该打印字符串@“到期”，否则打印像这样的日期：03/05/2012。我在我的自定义单元类中执行的这段代码我在我滚动表格视图时传入控制器类的方法中编写了这段代码然后值改变了我错的地方请帮助我

```
- (void) updateContent: (Tasksmodal*) taskobject{
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
        [dateFormat setDateFormat:@"dd/MM/yyyy"];

        NSString* duedate = [dateFormat stringFromDate:taskobject.DueDate];

        NSDate *currentdate;
        currentdate=[NSDate date];
        //NSDateFormatter *dateFormat1 = [[NSDateFormatter alloc] init];
        //[dateFormat1 setDateFormat:@"dd/MM/yyyy"];
        NSString* duedate1 = [dateFormat stringFromDate:currentdate];

  if ([currentdate compare:taskobject.DueDate]!=NSOrderedDescending) {
DateLable.text=@"Due";
DateLable.textColor=[UIColor redColor]; 
```

}

```
else{
    DateLable.text=duedate;
    DateLable.textColor=[UIColor blackColor];
}

} 
```

在我的控制器类中 .m // 自定义表格视图单元格的外观。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    TasksList * cell =(TasksList*) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[TasksList alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier] autorelease];

    }
    //[[[cell contentView] subviews] makeObjectsPerformSelector: @selector(removeFromSuperview)]; 
    taskobject=(Tasksmodal*)[self.lstTasks objectAtIndex:indexPath.row];    
    [cell updateContent:taskobject];

return cell;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:39:13.017

你不能这样比较`NSString`。你不是在比较日期。查看[NSDate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html)文档。寻找`compare`。

```
 if ([currentdate compare:taskobject.DueDate]!=NSOrderedDescending) {
        DateLable.text=@"Due";
        DateLable.textColor=[UIColor redColor];
    }
    else{
        DateLable.text=duedate;
        DateLable.textColor=[UIColor blackColor];
    } 
```

您的代码也泄漏了`NSDateFormatter`s. 您可以使用单个`NSDateFormatter`来格式化 2 个日期，无需分配新的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:01:54.100

您可以直接比较 NSDate 对象，这实际上将是一种很好且快速的方法，而不是您正在做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T08:43:36.227

您的比较`(duedate<=duedate1)`是检查内存地址`duedate`是否小于内存地址，`duedate1`因为它们都是指针类型。这可能不是您真正想要的:-)。尝试这样的事情：

```
if ([taskobject.DueDate timeIntervalSinceNow] <= 0) {
    ... due
}
else {
    ... not due
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T08:56:14.770

NSComparisonResult 结果 = [taskobject.DueDate 比较：[NSDate 日期]]；

```
if(result>0)
    DateLable.text=@"Due";
else
   DateLable.text=duedate; 
```

# java - 使用 ReentrantLock 实现阻塞并发

> ID：10427780
> 
> 赞同：3
> 
> 时间：2012-05-03T08:33:59.710
> 
> 标签：java, multithreading, concurrency, reentrantlock

我试图通过阻止异步尝试使用 RentrantLock 修改实体的给定实例（由键标识）来实现一个类以在我的 java 应用程序中强制并发。目标是阻止/排队多个并发尝试修改对象的给定实例，直到先前的线程完成。该类以通用方式实现这一点，允许任何代码块获得锁并在完成后释放它（与 RentrantLock 语义相同），并添加了仅阻塞线程试图修改对象的相同实例（如标识通过一个键），而不是阻止所有进入代码块的线程。

这个类提供了一个简单的结构，允许只为一个实体的一个实例同步一个代码块。例如，如果我希望为来自 id 为 33 的用户的所有线程同步一段代码，但我不希望来自任何其他用户的线程被服务用户 33 的线程阻塞。

该类实现如下

```
public class EntitySynchronizer {
  private static final int DEFAULT_MAXIMUM_LOCK_DURATION_SECONDS = 300; // 5 minutes
  private Object mutex = new Object();
  private ConcurrentHashMap<Object, ReentrantLock> locks = new ConcurrentHashMap<Object, ReentrantLock>();
  private static ThreadLocal<Object> keyThreadLocal = new ThreadLocal<Object>();
  private int maximumLockDurationSeconds;
  public EntitySynchronizer() {
    this(DEFAULT_MAXIMUM_LOCK_DURATION_SECONDS);
  }
  public EntitySynchronizer(int maximumLockDurationSeconds) {
    this.maximumLockDurationSeconds = maximumLockDurationSeconds;
  }
  /**
   * Initiate a lock for all threads with this key value
   * @param key the instance identifier for concurrency synchronization
   */
  public void lock(Object key) {
    if (key == null) {
      return;
    }
    /*
     * returns the existing lock for specified key, or null if there was no existing lock for the
     * key
     */
    ReentrantLock lock;
    synchronized (mutex) {
      lock = locks.putIfAbsent(key, new ReentrantLock(true));
      if (lock == null) {
        lock = locks.get(key);
      }
    }
    /*
     * Acquires the lock and returns immediately with the value true if it is not held by another
     * thread within the given waiting time and the current thread has not been interrupted. If this
     * lock has been set to use a fair ordering policy then an available lock will NOT be acquired
     * if any other threads are waiting for the lock. If the current thread already holds this lock
     * then the hold count is incremented by one and the method returns true. If the lock is held by
     * another thread then the current thread becomes disabled for thread scheduling purposes and
     * lies dormant until one of three things happens: - The lock is acquired by the current thread;
     * or - Some other thread interrupts the current thread; or - The specified waiting time elapses
     */
    try {
      /*
       * using tryLock(timeout) instead of lock() to prevent deadlock situation in case acquired
       * lock is not released normalRelease will be false if the lock was released because the
       * timeout expired
       */
      boolean normalRelease = lock.tryLock(maximumLockDurationSeconds, TimeUnit.SECONDS);
      /*
       * lock was release because timeout expired. We do not want to proceed, we should throw a
       * concurrency exception for waiting thread
       */
      if (!normalRelease) {
        throw new ConcurrentModificationException(
            "Entity synchronization concurrency lock timeout expired for item key: " + key);
      }
    } catch (InterruptedException e) {
      throw new IllegalStateException("Entity synchronization interrupted exception for item key: "
          + key);
    }
    keyThreadLocal.set(key);
  }
  /**
   * Unlock this thread's lock. This takes care of preserving the lock for any waiting threads with
   * the same entity key
   */
  public void unlock() {
    Object key = keyThreadLocal.get();
    keyThreadLocal.remove();
    if (key != null) {
      ReentrantLock lock = locks.get(key);
      if (lock != null) {
        try {
          synchronized (mutex) {
            if (!lock.hasQueuedThreads()) {
              locks.remove(key);
            }
          }
        } finally {
          lock.unlock();
        }
      } else {
        synchronized (mutex) {
          locks.remove(key);
        }
      }
    }
  }
} 
```

此类使用如下：

```
private EntitySynchronizer entitySynchronizer = new EntitySynchronizer();
entitySynchronizer.lock(userId);  // 'user' is the entity by which i want to differentiate my synchronization
try {
  //execute my code here ...
} finally {
  entitySynchronizer.unlock();
} 
```

问题是它不能完美地工作。在非常高的并发负载下，仍然存在一些具有相同*键*的多个线程没有同步的情况。我已经通过并进行了相当彻底的测试，无法弄清楚为什么/在哪里会发生这种情况。

有并发专家吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T08:43:33.403

您应该解决的一件事是：

```
ReentrantLock lock;
synchronized (mutex) {
  lock = locks.putIfAbsent(key, new ReentrantLock(true));
  if (lock == null) {
    lock = locks.get(key);
  }
} 
```

这错过了并发地图的全部要点。你为什么不这样写：

```
ReentrantLock lock = new ReentrantLock(true);
final ReentrantLock oldLock = locks.putIfAbsent(key, lock);
lock = oldLock != null? oldLock : lock; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T09:15:42.220

您的解决方案缺乏原子性。考虑以下场景：

*   线程 A 进入`lock()`并从映射中获取现有锁。
*   线程 B 输入`unlock()`相同的密钥，解锁并从映射中移除锁（因为线程 A 尚未调用`tryLock()`）。
*   线程 A 成功调用`tryLock()`.

一种可能的选择是跟踪从地图“签出”的锁的数量：

```
public class EntitySynchronizer {
    private Map<Object, Token> tokens = new HashMap<Object, Token>();
    private ThreadLocal<Token> currentToken = new ThreadLocal<Token>();
    private Object mutex = new Object();

    ...

    public void lock(Object key) throws InterruptedException {
        Token token = checkOut(key);
        boolean locked = false;
        try {
            locked = token.lock.tryLock(maximumLockDurationSeconds, TimeUnit.SECONDS));
            if (locked) currentToken.set(token);
        } finally {
            if (!locked) checkIn(token);
        }
    }

    public void unlock() {
        Token token = currentToken.get();
        if (token != null) {
            token.lock.unlock();
            checkIn(token);
            currentToken.remove();
        }
    }

    private Token checkOut(Object key) {
        synchronized (mutex) {
            Token token = tokens.get(key);
            if (token != null) {
                token.checkedOutCount++;
            } else {
                token = new Token(key); 
                tokens.put(key, token);
            }
            return token;
        }
    }

    private void checkIn(Token token) {
        synchronized (mutex) {
            token.checkedOutCount--;
            if (token.checkedOutCount == 0)
                tokens.remove(token.key);
        }
    }

    private class Token {
        public final Object key;
        public final ReentrantLock lock = new ReentrantLock();
        public int checkedOutCount = 1;

        public Token(Object key) {
            this.key = key;
        }
    }
} 
```

请注意，`tokens`不必如此，`ConcurentHashMap`因为无论如何它的方法都是在同步块中调用的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T09:04:36.570

我假设您并没有真正使用您的课程，如下所示：

```
private EntitySynchronizer entitySynchronizer = new EntitySynchronizer();
entitySynchronizer.lock(userId);  // 'user' is the entity by which i want to differentiate my synchronization
try {
  //execute my code here ...
} finally {
  entitySynchronizer.unlock();
} 
```

但是有一个 EntitySynchronizer 的单例实例吗？因为否则那是你的问题。

# asp.net - 如何调查 ASP.net 应用程序上的 SQL Server 超时错误？

> ID：10427786
> 
> 赞同：4
> 
> 时间：2012-05-03T08:34:25.420
> 
> 标签：asp.net, sql-server, sql-server-2008, connection-timeout

我们在 NopCommerce - ASP.net MVC3 Web 应用程序上面临服务器超时错误。

当我们结束 sql 进程时，错误只会重新出现。结束时，它开始正常工作一段时间，然后又开始发生。

仅在最近几天才发生这种情况，在此之前它运行良好。请注意，其代码没有进行重大更新。

我们不知道可能是什么问题以及如何调查和解决它？是连接池相关问题还是什么？

这是堆栈跟踪：

> 超时已过。在操作完成之前超时时间已过或服务器没有响应。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Data.SqlClient.SqlException：超时已过期。在操作完成之前超时时间已过或服务器没有响应。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [SqlException (0x80131904): 超时。操作完成前超时时间已过或服务器无响应。] System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) +296 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +415 System .Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +2657 System.Data.SqlClient.SqlDataReader.ConsumeMetaData() +88 System.Data.SqlClient.SqlDataReader.get_MetaData() +114 System.Data.SqlClient.SqlCommand.FinishExecuteReader（SqlDataReader ds，RunBehavior runBehavior，字符串 resetOptionsString）+505 System.Data.SqlClient.SqlCommand.RunExecuteReaderTds（CommandBehavior cmdBehavior，`2 identifierValues, List`1 generateValues) +269 System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter 适配器) +528

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:44:18.223

@Dharmik Bhandari，可能有几个问题。尝试以下操作

*   增加池大小
*   设置 CommandTimeOut = 0（无限）
*   设置 ConnectionTimeOut = 0（无限）
*   数据库功能结束后立即释放连接资源

# highcharts - Highcharts 在多个数据集之间切换

> ID：10427788
> 
> 赞同：0
> 
> 时间：2012-05-03T08:34:41.787
> 
> 标签：highcharts, dataset, toggle

我刚刚开始研究这个很棒的工具，我有几个问题。这是小提琴：

[http://jsfiddle.net/gh/get/jquery/edge/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-drilldown/](http://jsfiddle.net/gh/get/jquery/edge/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-drilldown/)

```
$(function () {
    // Create the chart
    $('#container').highcharts({
        chart: {
            type: 'column'
        },
        title: {
            text: 'Browser market shares. January, 2015 to May, 2015'
        },
        subtitle: {
            text: 'Click the columns to view versions. Source: <a href="http://netmarketshare.com">netmarketshare.com</a>.'
        },
        xAxis: {
            type: 'category'
        },
        yAxis: {
            title: {
                text: 'Total percent market share'
            }

        },
        legend: {
            enabled: false
        },
        plotOptions: {
            series: {
                borderWidth: 0,
                dataLabels: {
                    enabled: true,
                    format: '{point.y:.1f}%'
                }
            }
        },

        tooltip: {
            headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
            pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.2f}%</b> of total<br/>'
        },

        series: [{
            name: 'Brands',
            colorByPoint: true,
            data: [{
                name: 'Microsoft Internet Explorer',
                y: 56.33,
                drilldown: 'Microsoft Internet Explorer'
            }, {
                name: 'Chrome',
                y: 24.03,
                drilldown: 'Chrome'
            }, {
                name: 'Firefox',
                y: 10.38,
                drilldown: 'Firefox'
            }, {
                name: 'Safari',
                y: 4.77,
                drilldown: 'Safari'
            }, {
                name: 'Opera',
                y: 0.91,
                drilldown: 'Opera'
            }, {
                name: 'Proprietary or Undetectable',
                y: 0.2,
                drilldown: null
            }]
        }],
        drilldown: {
            series: [{
                name: 'Microsoft Internet Explorer',
                id: 'Microsoft Internet Explorer',
                data: [
                    [
                        'v11.0',
                        24.13
                    ],
                    [
                        'v8.0',
                        17.2
                    ],
                    [
                        'v9.0',
                        8.11
                    ],
                    [
                        'v10.0',
                        5.33
                    ],
                    [
                        'v6.0',
                        1.06
                    ],
                    [
                        'v7.0',
                        0.5
                    ]
                ]
            }, {
                name: 'Chrome',
                id: 'Chrome',
                data: [
                    [
                        'v40.0',
                        5
                    ],
                    [
                        'v41.0',
                        4.32
                    ],
                    [
                        'v42.0',
                        3.68
                    ],
                    [
                        'v39.0',
                        2.96
                    ],
                    [
                        'v36.0',
                        2.53
                    ],
                    [
                        'v43.0',
                        1.45
                    ],
                    [
                        'v31.0',
                        1.24
                    ],
                    [
                        'v35.0',
                        0.85
                    ],
                    [
                        'v38.0',
                        0.6
                    ],
                    [
                        'v32.0',
                        0.55
                    ],
                    [
                        'v37.0',
                        0.38
                    ],
                    [
                        'v33.0',
                        0.19
                    ],
                    [
                        'v34.0',
                        0.14
                    ],
                    [
                        'v30.0',
                        0.14
                    ]
                ]
            }, {
                name: 'Firefox',
                id: 'Firefox',
                data: [
                    [
                        'v35',
                        2.76
                    ],
                    [
                        'v36',
                        2.32
                    ],
                    [
                        'v37',
                        2.31
                    ],
                    [
                        'v34',
                        1.27
                    ],
                    [
                        'v38',
                        1.02
                    ],
                    [
                        'v31',
                        0.33
                    ],
                    [
                        'v33',
                        0.22
                    ],
                    [
                        'v32',
                        0.15
                    ]
                ]
            }, {
                name: 'Safari',
                id: 'Safari',
                data: [
                    [
                        'v8.0',
                        2.56
                    ],
                    [
                        'v7.1',
                        0.77
                    ],
                    [
                        'v5.1',
                        0.42
                    ],
                    [
                        'v5.0',
                        0.3
                    ],
                    [
                        'v6.1',
                        0.29
                    ],
                    [
                        'v7.0',
                        0.26
                    ],
                    [
                        'v6.2',
                        0.17
                    ]
                ]
            }, {
                name: 'Opera',
                id: 'Opera',
                data: [
                    [
                        'v12.x',
                        0.34
                    ],
                    [
                        'v28',
                        0.24
                    ],
                    [
                        'v27',
                        0.17
                    ],
                    [
                        'v29',
                        0.16
                    ]
                ]
            }]
        }
    });
});
```

```
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/data.js"></script>
<script src="https://code.highcharts.com/modules/drilldown.js"></script>

<div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
```

1.  如何将更多数据集加载到这种类型的图表中（并隐藏它们，以便稍后我可以在它们之间切换）？
2.  默认情况下，如果您在图例中有更多系列，单击其中一个将添加/删除该系列。但是如何在组之间切换？所以只有点击的数据集是可见的，其他的都是隐藏的。
3.  是否可以将更多数据集加载到向下钻取部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:10:45.370

如果您使用的是 Visual Studio，我发现使用[DotNet.Highcharts](http://dotnethighcharts.codeplex.com/)是一个非常有用的补充。它使您无需编写 java 脚本即可对 Highcharts 进行编程。

如果是这种情况，那么我在[这里](https://stackoverflow.com/questions/10250876/using-highcharts-and-dotnet-highcharts-to-play-multiple-series/10262718#10262718)的答案可能会让您感兴趣。我创建了一个系列数未定的 Highchart。您可以在括号内添加向下钻取选项

```
allSeries.Add(new Series 
```

# c# - 如何在 C# 中添加您的肥皂请求标头

> ID：10427789
> 
> 赞同：7
> 
> 时间：2012-05-03T08:34:46.030
> 
> 标签：c#, soap, header, wsse

**标题对象**

```
[Serializable]
[DataContract(Namespace = "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd")] // This object serialize specific namespace
public class Security
{
    [DataMember] // This object serialize without namespace
    public UsernameToken UsernameToken;
}

public class UsernameToken : IXmlSerializable
{

    public string Username { get; set; }
    public string Password { get; set; }

    public XmlSchema GetSchema() { return null; }

    public void ReadXml(System.Xml.XmlReader reader)
    {
        reader.MoveToContent();

        Username = reader.ReadElementString("Username");
        reader.ReadStartElement();

        Password = reader.ReadElementString("Password");
        reader.ReadEndElement();
    }

    public void WriteXml(XmlWriter writer)
    {
        writer.WriteElementString("Username", Username);
        writer.WriteElementString("Password", Password);
    }
} 
```

**设置端点标头**

```
SubscriptionWSImplServiceClient client = new SubscriptionWSImplServiceClient();

//Create wsse security object
Security security = new Security();
UsernameToken usernameToken = new UsernameToken { Password = password, Username = uname };
security.UsernameToken = usernameToken;

//Serialize object to xml
XmlObjectSerializer xmlObjectSerializer = new DataContractSerializer(typeof(Security), "Security", "");

//Create address header with security header
AddressHeader addressHeader = AddressHeader.CreateAddressHeader("Security", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd", security, xmlObjectSerializer);

//Create new endpoint with addressHeader that contains security header
EndpointAddress endpoint = new EndpointAddress(new Uri("http://127.0.0.1/mpp/subscriptionService"), new[] { addressHeader });

//Set new endpoint
client.Endpoint.Address = endpoint; 
```

# jsf-2 - 如何在自定义验证消息时替换占位符

> ID：10427790
> 
> 赞同：1
> 
> 时间：2012-05-03T08:34:49.630
> 
> 标签：jsf-2

我想为我的 h:message 覆盖消息我做了什么我做了 message.properties 文件并将其添加到 faces-config.xml 中，如下所示

```
<application>
     <message-bundle>
            pk.mazars.basitMahmood.MyMessage
  </message-bundle>
</application> 
```

这是文件

```
javax.faces.converter.DateTimeConverter.DATE = {2}: ''{0}'' could not be understood as a date.
javax.faces.converter.DateTimeConverter.DATE_detail = Invalid date format.

javax.faces.validator.LengthValidator.MINIMUM = Minimum length of ''{0}'' is required.
javax.faces.component.UIInput.REQUIRED = {1}: Value is required 
```

在我的代码中，我使用了这样的东西

```
<h:inputText id="username" value="#{user.username}"
             size="20" required="true" label="Username">                   
</h:inputText>
<h:message for="username" style="color:red" /> 
```

但我得到这样的东西 ![在此处输入图像描述](../Images/2b84132227c0d37c525e16ec4fc8d4f3.png)

我想要而不是得到`{1}: value is required`. 我明白了`username: Value is required`。我怎样才能`{1}`用价值代替。我也试过`{0}`和'{2}'。但我得到相同的结果？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:44:56.430

这里是如何

```
javax.faces.component.UIInput.REQUIRED = {0} Value is required 
```

`{0} instead of {1}`

[这里是对您可以在 JSF 2.0.x 中覆盖的所有可用消息的完整参考](http://svn.apache.org/repos/asf/myfaces/core/branches/2.0.x/api/src/main/resources/javax/faces/Messages.properties)

尝试重新启动网络服务器...

原因`javax.faces.component.UIInput.REQUIRED = {0} Value is required`应该有效

# segmentation-fault - dlatrs 子程序在调用子程序时释放计数器

> ID：10427791
> 
> 赞同：0
> 
> 时间：2012-05-03T08:35:00.137
> 
> 标签：segmentation-fault, fortran, subroutine, abort, fortran77

我一直在尝试调试使我的模拟软件崩溃的段错误/sigabort。我已经能够将此跟踪到某个 LAPACK 子例程，更改（或实际上解除分配，我认为）子例程中的一个网格计数器，该子例程（通过一些其他子例程）调用此 LAPACK 子例程。这是我跟踪此错误的 gdb 调试会话：

```
(gdb) break trifactorize
Breakpoint 1 at 0x44ad28: file /home/nspeelman/chem1d/src/solver.f, line 925.
(gdb) run
Starting program: /home/nspeelman/chem1d/bin/chem1d

(gdb) watch k
Hardware watchpoint 2: k
(gdb) c
Continuing.
Hardware watchpoint 2: k

Old value = 4
New value = 1
0x000000000044ad48 in trifactorize (lsing=@0x7fffffffdedc) at /home/nspeelman/chem1d/src/solver.f:927
927           DO k = 1, Npoint
(gdb) c
Continuing.
Hardware watchpoint 2: k

Old value = 1
New value = -214061846
dlatrs (uplo=@0x4ffea4, trans=@0x4ffe98, diag=@0x4ffe94, normin=@0x7fffffffbeab, n=@0x3043664, a=0x16867060, 
    lda=@0x4fcda4, x=0x7fffffffcf90, scale=@0x7fffffffbe98, cnorm=0x7fffffffd910, info=@0x7fffffffdc2c, _uplo=5, 
    _trans=12, _diag=4, _normin=1) at /home/nspeelman/chem1d/src/lapack/src/dlatrs.f:334
334                 DO 20 J = 1, N - 1
(gdb) c
Continuing.

Program received signal SIGABRT, Aborted.
0x00002aaaab480265 in raise () from /lib64/libc.so.6 
```

和回溯：

```
(gdb) bt
#0  0x00002aaaab480265 in raise () from /lib64/libc.so.6
#1  0x00002aaaab481d10 in abort () from /lib64/libc.so.6
#2  0x00002aaaaad88c9e in internal_unpack (d=0x62e9, s=0x62e9)
    at ../../../gcc-4.3.4/libgfortran/runtime/in_unpack_generic.c:104
#3  0x000000000044b41c in trifactorize (lsing=@0x7fffffffdedc) at /home/nspeelman/chem1d/src/solver.f:940
#4  0x3f68b52055ec1bbd in ?? ()
#5  0x3f62d2224f8b7801 in ?? ()
#6  0x3f62e59e02e2572f in ?? ()
#7  0x3f70bab1bd0628c7 in ?? ()
#8  0x3f70cdc893daf1cf in ?? ()
#9  0x3f5a3418697ab4dc in ?? ()
#10 0x3f6b117db1893c97 in ?? ()
#11 0x3f6e0dd1b55652b4 in ?? ()
#12 0x3f6864101f64d2f0 in ?? ()
#13 0x3f7359216186a4dc in ?? ()
#14 0x3f527ee1ff8feb69 in ?? ()
#15 0x3f672c7c504a10f8 in ?? ()
#16 0x3f68f2c8e0ee6963 in ?? ()
#17 0x3f54726715d81583 in ?? ()
#18 0x3f68f2c8e0ee6963 in ?? ()
#19 0x3f6df6a7d0f5e9a5 in ?? ()
#20 0x3f5ef57fdf747822 in ?? ()
#21 0x3f56ef95d71519b0 in ?? ()
#22 0x3f6b736cc1c1feb4 in ?? ()
#23 0x3f60fb91d9400ca4 in ?? ()
#24 0x3f56ef95d71519b0 in ?? ()
#25 0x3f4b4753f00f24d5 in ?? ()
#26 0x3f5a8b9cc465a316 in ?? ()
#27 0x3f3855b423b18a6b in ?? ()
#28 0x3f568360294ec05f in ?? ()
#29 0x3f3679d6e42a4759 in ?? ()
#30 0x3f228fe18a3e97ab in ?? ()
#31 0x3f50df603cf17c50 in ?? ()
#32 0x3f5d0cea5690c8f8 in ?? ()
#33 0x3f550552679170e1 in ?? ()
#34 0x3f3d0ebaa18f7a6f in ?? ()
#35 0x3f66a1b9ef4a7dc4 in ?? ()
#36 0x3f345e9bec8a3d7a in ?? ()
#37 0x3f43854a676ff7cb in ?? ()
#38 0x3f4acbe712d1ba00 in ?? ()
#39 0x3f191497deb0cd86 in ?? ()
#40 0x3f48e220ec5df7ee in ?? ()
#41 0x3f4326498a95447b in ?? ()
#42 0x3f2e05ee4edaa6ff in ?? ()
#43 0x3f285f8e79fe6b92 in ?? ()
#44 0x3f58240bec575a1d in ?? ()
#45 0x3f47c79be94754f7 in ?? ()
#46 0x3f5cf356ce58b75a in ?? ()
#47 0x3f28c2a87c82305d in ?? ()
#48 0x3f35fca48157c9e4 in ?? ()
#49 0x3f41c924b53cdbae in ?? ()
#50 0x3f477c6c115fb520 in ?? ()
#51 0x0000000000000000 in ?? () 
```

我已经能够使用带有 gfortran 4.6.1 的 Ubuntu 11.10、带有 gfortran 4.6.3 的 Ubuntu 12.04、带有 gfortran 4.3.4 的 Scientific Linux 5.6 和带有 gfortran 4.5.0-1 的 Microsoft Windows 进行复制。当我在 Linux 机器上使用英特尔编译器时，我无法重现此错误，但我无法在 Windows 上使用 ifort，因为我使用的是学术许可证。但我需要用 gfortran 解决这个问题，因为我需要为一些学生准备一个 Windows 版本。我将编译器标志 -funroll-all-loops -fno-f2c -O3 用于发布版本，将标志 -fno-f2c -O0 -g3 用于调试版本。这两种选择都会产生这些问题。

此外，此错误仅在使用大型阵列时才可重现。我正在使用最大大小的数组（500，Ns）和大小的工作数组（Ns，Ns，500）。模拟不崩溃使用 Ns = 53，当它崩溃时 Ns = 153，但 Ns 的声明大小为 200。

最后我会展示崩溃的代码：solver.f, subroutine trifactorize：

```
 lSing = .FALSE.

      DO k = 1, Npoint
c---- Compute (jacB(k)-jacA(k)*jacC(k-1)). -----------------------------
         SELECT CASE ( k )
            CASE ( 1 )
            CASE DEFAULT
               CALL DGEMM( 'N', 'N', Ns, Ns, Ns, -1.0D0, jacA(:,:,k),
     >                     NsMax, jacC(:,:,k-1), NsMax, 1.0d0,
     >                     jacB(:,:,k), NsMax )
         END SELECT
c---- Factor with Gaussian elimination and estimate condition number.---
         norm = DLANGE( '1', Ns, Ns, jacB(:,:,k), NsMax, Work )
         CALL DGETRF( Ns, Ns, jacB(:,:,k), NsMax, ip(:,k), INFO )
         CALL DGECON( '1', Ns, jacB(:,:,k), NsMax, norm, Condit(k),
     >                Work, IWork, INFO )
c         WRITE(*,*)k,condit(k)
         IF ((1.0d0+condit(k)).EQ.1.0d0 .AND. iLogging.EQ.iDebug) THEN
            Write(line,10) 'Singular Jacobian Matrix'
            CALL ScreenWrite(line, iNormal)

            Write(line,11) 'Gridnumber: ', k
            CALL ScreenWrite(line, iNormal)

            lSing = .TRUE.
            RETURN
         ENDIF

c---- Compute jacC/jacB'-matrix ----------------------------------------
         CALL DGETRS( 'N', Ns, Ns, jacB(:,:,k), NsMax, ip(:,k),
     >                jacC(:,:,k), NsMax, INFO )
      ENDDO

 10   FORMAT(9X,3('-'),1X,9('-'),1X,9('-'),1X,A)
 11   FORMAT(9X,3('-'),1X,9('-'),1X,9('-'),1X,A,i4)

      CALL LogWrite('==> Decompose : Finished', iDebug)

RETURN 
```

dlatrs.f:

```
*
*           A is lower triangular.
*
            DO 20 J = 1, N - 1
               CNORM( J ) = DASUM( N-J, A( J+1, J ), 1 )
   20       CONTINUE
            CNORM( N ) = ZERO 
```

我一直想知道我是否使用了错误的编译器标志，或者我是否偶然发现了一个罕见的 gfortran 错误。希望有人知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:49:58.583

我已经在我的 Ubuntu 机器和我的 Windows build slave 上安装了 gcc 4.7.0，这个问题在 Windows 和 Ubuntu 中都完全消失了。所以看来这个错误是用最新版本的 gcc 修复的。

# c# - 如何在 c# 中向 Outlook 2010 发送电子邮件？

> ID：10427793
> 
> 赞同：3
> 
> 时间：2012-05-03T08:35:04.360
> 
> 标签：c#, asp.net, visual-studio-2010

尽管我的服务器没有安装 Outlook 2010 及其在 Intranet 区域内，是否可以使用 Outlook 发送电子邮件？因为这里的每个人都和outlook沟通，并且拥有一个独一无二的outlook账号。如何从我的应用程序发送电子邮件？我很确定我不能使用以下代码来解决我的问题，请有人帮助我。

代码：

```
// Create the Outlook application.
Outlook.Application oApp = new Outlook.Application();
// Create a new mail item.
Outlook.MailItem oMsg = (Outlook.MailItem)oApp.CreateItem(Outlook.OlItemType.olMailItem);
// Set HTMLBody. 
//add the body of the email
oMsg.HTMLBody = body;
//Add an attachment.
//String sDisplayName = "MyAttachment";
///int iPosition = (int)oMsg.Body.Length + 1;
//int iAttachType = (int)Outlook.OlAttachmentType.olByValue;
//now attached the file
//Outlook.Attachment oAttach = oMsg.Attachments.Add(@"C:\\fileName.jpg", iAttachType, iPosition, sDisplayName);

//Subject line
oMsg.Subject = subject;
// Add a recipient.
Outlook.Recipients oRecips = (Outlook.Recipients)oMsg.Recipients;
// Change the recipient in the next line if necessary.
Outlook.Recipient oRecip = (Outlook.Recipient)oRecips.Add(address);
oRecip.Resolve();
// Send.
oMsg.Send();
// Clean up.
oRecip = null;
oRecips = null;
oMsg = null;
oApp = null; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T21:29:02.147

这是我在我的一个项目中使用的示例片段：

```
using System.Net.Mail;
using System.Net;

private void SendMail( string targetMail, 
                       string shownTargetName, 
                       string[] attachmentNames) {
  var fromAddress = new MailAddress("support@infinibrain.net", "MailSendingProgram");
  var toAddress = new MailAddress(targetMail, shownTargetName);
  const string fromPassword = "12345isAbadPassword";
  subject = "Your Subject";
  body = 
        @"
          Here
          you can put in any text
          that will appear in the body
        ";
  var smtp = new SmtpClient {
    Host = "smtp.mailserver.com",
    Port = 587,
    EnableSsl = true,
    DeliveryMethod = SmtpDeliveryMethod.Network,
    UseDefaultCredentials = false,
    Credentials = new NetworkCredential(fromAddress.Address, fromPassword)
  };

  using (var message = new MailMessage(fromAddress, toAddress) {
                             Subject = subject,
                             Body = body }
        ) {
    foreach(string filePath in attachmentNames[]) {
      Attachment attachMail = new Attachment(filePath);
      message.Attachments.Add(attachMail);
    }

    try {
      smtp.Send(message);
      MessageBox.Show("E-Mail sent!");
    } catch {
      MessageBox.Show("Sending failed, check your internet connection!");
    }
  }
} 
```

在此示例中，我包含了使用文件附件所需的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T08:43:38.817

例如，如果您想发送不需要 Outlook 的电子邮件，则需要电子邮件地址

```
MailMessage mail = new MailMessage();
mail.From = ""; // put the from address here
mail.To = ""; // put to address here
mail.Subject = ""; // put subject here
mail.Body = ""; // put body of email here
SmtpMail.SmtpServer = ""; // put smtp server you will use here
// and then send the mail
SmtpMail.Send(mail); 
```

并阅读此[发送电子邮件](http://social.msdn.microsoft.com/forums/en/netfxnetcom/thread/a75533eb-131b-4ff3-a3b2-b6df87c25cc8/)

**编辑**

但是如果你想使用 OUTLOOK 试试这个

```
using Outlook = Microsoft.Office.Interop.Outlook;

Outlook.Application oApp = new Outlook.Application();

                    Outlook.MailItem email = (Outlook.MailItem)(oApp.CreateItem(Outlook.OlItemType.olMailItem));
                    email.Recipients.Add("EmailAddress@google.com");
                    email.Subject = "Subject";
                    email.Body = "Message";

                    ((Outlook.MailItem)email).Send(); 
```

**编辑2**

第一个代码示例

```
System.Net.Mail.MailMessage mm = new System.Net.Mail.MailMessage();
mm.From = new System.Net.Mail.MailAddress("mymail@gmail.com");//who send
mm.To.Add(new System.Net.Mail.MailAddress("Yourmail@gmail.com"));//where send
mm.Subject = "Subj";
mm.Body = "text";
System.Net.Mail.SmtpClient client = new System.Net.Mail.SmtpClient("127.0.0.1");
client.Send(mm); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T22:54:51.113

在 asp.net 中，您还可以使用脚本管理器通过用户的 Outlook 发送电子邮件：

```
//add this to your page body (or in master page body)
<asp:ScriptManager ID="ScriptManager1" runat="server" EnablePageMethods="true"/>

//add this to your SendEmailButton_Click() event
string email = "mailto:recipient@domain.com?subject=my subject&body=my message.";
StringBuilder sb = new StringBuilder();
sb.Append("document.location.href='" + email + "';");
ScriptManager.RegisterStartupScript(this.Page, this.GetType(), "sendemail", sb.ToString(), true); 
```

# nhibernate - 除非急切地预加载，否则如何在 NHibernate 中不加载引用/集合？

> ID：10427796
> 
> 赞同：1
> 
> 时间：2012-05-03T08:35:19.933
> 
> 标签：nhibernate, lazy-loading

我想创建一个要求，在显示之前预加载所有必需的实体，以尽量减少因疏忽而导致的数据库调用量。是否可以强制 NHibernate 在返回之前测试集合？

我想到了`NHibernateUtil.IsInitialized()`在返回对象之前进行检查之类的事情，但不确定如何在不手动为每个属性手动执行的情况下全局实现它。

注意：我不想为整个应用程序启用预加载，只需引入一个更智能的延迟加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:54:48.383

消费者应指定急切加载哪些路径，DAL 应使用 SetFetchMode/Fetch 急切加载路径。然后获取所有数据。

对评论的回答：在加载数据之后

*   `session.Close()`丢弃会话
*   `session.Clear()`分离所有实例
*   `session.Evict(obj)`分离 obj 和关联实体

例如

```
foreach (var item in queryresults)
{
    session.Evict(item);
} 
```

所有未初始化的代理和集合现在都将抛出 LazyLoadExceptions

# cordova - Phonegap 条码扫描仪构建

> ID：10427798
> 
> 赞同：0
> 
> 时间：2012-05-03T08:35:36.060
> 
> 标签：cordova, phonegap-plugins

我已经使用 zxing 插件创建了一个 qrcode 扫描仪它适用于模拟器。但现在我不知道要为它创建一个构建。我在我的 config.xml 文件中包含以下行

```
<plugins name="BarcodeScanner" value="com.phonegap.plugins.barcodescanner.BarcodeScanner"/> 
```

我还需要创建plugin.xml吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T00:50:48.623

phonegap build 不支持“随心所欲”的插件。只支持一个插件。

所以你不能使用带有插件的phonegap build。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T08:01:47.500

您正在通过自己设置开发环境并使用您的计算机构建/签名来创建我看到的这个应用程序。

[我使用http://build.phonegap.com](http://build.phonegap.com)很快就取得了成功——不要太快把它写下来！它有那个插件（条形码），我所要做的就是在我的项目的根目录中创建一个 config.xml：

```
<!-- phonegap build config.xml syntax -->
<?xml version="1.0" encoding="UTF-8"?>
  <widget xmlns     = "http://www.w3.org/ns/widgets"
           xmlns:gap = "http://phonegap.com/ns/1.0"
           id        = "com.phonegap.xxx-xxx"
           version   = "3.0.1">
   <name>Web Remote</name>

<description>
    WebRemote Application
</description>
<!-- more info here-->
<gap:plugin name="BarcodeScanner" /> <!-- use latest release by default -->

</widget> 
```

看到 <gap:plugin name="BarcodeScanner" /> 了吗？

这就是我在 phonegab 构建中所要做的，告诉它*使用*BarcodeScanner 插件编译我的应用程序。我试过了，它有效！这是一种美。不，这不是您在本机编译中的做法，因为您自己构建它，请确保您的头脑中有 ' 因为您的应用程序需要能够与本机插件（https://github. com/phonegap/phonegap-plugins/blob/master/iPhone/BarcodeScanner/barcodescanner.js（如果使用 iOS）。

顺便说一句 - 你没有提到你正在为哪个平台（iOS 等）构建，所以我只是假设 iOS。

# java - 亚马逊 DynamoDB 驱动程序

> ID：10427799
> 
> 赞同：0
> 
> 时间：2012-05-03T08:35:36.417
> 
> 标签：java, netbeans, driver, amazon-dynamodb

我可能在这里偏离了目标，但我刚刚开始探索 DynamoDB，我想知道是否有可用的驱动程序？我目前使用 netbeans 和 glassfish，我正在尝试像使用 MySQL 和 connectorJ 一样设置连接池。

在 netbeans 中设置数据库连接我去：

数据库 > 新连接

然后，系统会提示我使用预注册的驱动程序之一（Oracle、ConnectorJ 等）或添加一个新驱动程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T23:25:54.500

没有任何 glassfish/javaEE/hibernate 风格的驱动程序。您可以使用 AWS 开发工具包，它甚至具有[Hibernate-ish 持久性模型](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/JavaSDKHighLevel.html)。

# .net - 参考项目的最佳实践

> ID：10427804
> 
> 赞同：0
> 
> 时间：2012-05-03T08:36:01.227
> 
> 标签：.net, web-services, dll

在一个包含大量相互使用的项目（即 DLL）的大型网站中——最好的方法是什么？

A. 将所有内容放在一个 bin/output 文件夹中。直接相互引用 DLL。这会使项目严重超载吗？

B. 无论我将 DLL 放在哪里，都将它们制作成 web 服务，并让它们以这种方式相互访问。

C. 其他...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:47:59.720

如果有多个项目相互交互，那么最好将它们放在一个解决方案中，然后在可执行项目中引用该项目。但是，如果您不能将它们放在一个解决方案中并且只想使用 dll，那么最好将它们放在项目的文件夹中并从那里引用它们。这样，您将能够在一组中管理 dll。我不确定这是否会使您的项目严重超载。如果您需要所有这些 dll，那么将它们放在哪里都没有关系，最终它们都会被复制到 bin/debug 文件夹中。
但是如果你想通过服务为每个项目公开功能，然后在你的可执行项目中使用它，这可能会导致一些性能问题。您需要考虑[设计](http://msdn.microsoft.com/en-us/library/ee658090.aspx)考虑

# iphone - 当我想使用 outputStream 创建文件时，我总是得到 -1

> ID：10427805
> 
> 赞同：0
> 
> 时间：2012-05-03T08:36:09.323
> 
> 标签：iphone, objective-c, c

我想将一些数据写入文本文件，但我总是得到“错误”，因为 bytesWritten 的值为 -1。我已经调试过 dataLength 和 dataBytes 都可以，我认为我有权在桌面上创建文件。这是什么原因造成的，我该如何解决？代码如下：

```
void savedata(NSData *data)
{
    NSInteger       dataLength;
    const uint8_t * dataBytes;
    NSInteger       bytesWritten;
    NSInteger       bytesWrittenSoFar;
    dataLength = [data length];
    dataBytes  = [data bytes];

    NSOutputStream *fileStream = [NSOutputStream outputStreamToFileAtPath:@"~/Desktop/12.txt" append:NO];

    bytesWrittenSoFar = 0;
    do {
        bytesWritten = [fileStream write:&dataBytes[bytesWrittenSoFar] maxLength:dataLength - bytesWrittenSoFar];
        assert(bytesWritten != 0);
        if (bytesWritten == -1) {
            NSLog(@"Wrong!");
            break;
        } else {
            bytesWrittenSoFar += bytesWritten;
        }
    } while (bytesWrittenSoFar != dataLength);
}

int main(int argc, const char * argv[])
{
    @autoreleasepool {
NSData* data = [@"sadas" dataUsingEncoding:NSUTF8StringEncoding];

savedata(data);

return 0;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:55:23.053

您必须`-open`在写入流之前调用它。如果您阅读[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSOutputStream_Class/Reference/Reference.html#//apple_ref/occ/clm/NSOutputStream/outputStreamToFileAtPath%3aappend%3a)，则有一点注意事项：

> **讨论**
> 
> 必须先打开流，然后才能使用它。

以后有问题的时候也可以通过查询`-streamStatus`和`-streamError`方法获取更多信息。

# objective-c - 如何正确从 UIColor 获取亮度？

> ID：10427806
> 
> 赞同：2
> 
> 时间：2012-05-03T08:36:11.737
> 
> 标签：objective-c, rgb, uicolor, brightness, hsb

我尝试做从 UIColor 获取 B（亮度）的方法。

问题出在方法的第二部分。当我记录结果时 bri 等于 _red。哪里有问题？

```
-(void)rgbToHSBWithR:(float)_red G:(float)_green B:(float)_blue {
_red = _red / 255.0;
_green = _green / 255.0;
_blue = _blue / 255.0;
UIColor *color = [UIColor colorWithRed:_red green:_green blue:_blue alpha:1];

float hue, sat, bri, alpha;

[color getHue:&hue saturation:&sat brightness:&bri alpha:&alpha];

NSLog(@"R: %f, G: %0.2f, B: %0.2f, V: %f", _red, _green, _blue, bri); 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T18:48:40.120

答案是：

```
 b = (red / 255.0) * 0.3 + (green / 255.0) * 0.59 + (blue / 255.0) * 0.11; 
```

它工作正常。

# wxwidgets - wxWidgets 获取 wxlistctrl 标题标签

> ID：10427812
> 
> 赞同：1
> 
> 时间：2012-05-03T08:36:40.177
> 
> 标签：wxwidgets, listctrl

如何检索 wxlistctrl 的标签信息？我试过类似的东西：

```
wxListItem  itemCol;

m_listCtrl->GetColumn(0, itemCol);
printf("%s\n", itemCol.GetText().c_str()); 
```

但它不起作用，我得到一个空字符串！

有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:11:26.417

```
wxListItem column;
column.SetText(_("Column 1"));
m_List->InsertColumn(0, column);

wxListItem result;
result.SetMask(wxLIST_MASK_TEXT);
m_List->GetColumn(0, result);
wxMessageBox(result.GetText()); 
```

# java - 如何将文件添加到指定的嵌入式 JAR 资源

> ID：10427813
> 
> 赞同：0
> 
> 时间：2012-05-03T08:36:40.257
> 
> 标签：java

我正在使用一些 API，其中有一个类 Reader，它有一个方法 readXml(String path)

现在当我使用这种方法并给出一些在我的计算机中的路径时

```
 Reader reader = new Reader();
           reader.readXml("C:\\work\\myfile.xml"); 
```

它总是无法读取文件

在API文档中提到了

```
 readXml(java.lang.String resourcePath) 
      Loads the orthography model, from the specified embedded JAR resource. 
```

所以我需要将我的文件放在一些嵌入式 jar 资源中吗，如果是的话，这样做的方式是什么，然后从中读取

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:55:52.697

措辞有点奇怪，但我认为文档的意思是资源路径是类加载器用来加载资源的路径。因此，该文件不在文件系统中搜索，而是在类路径中搜索，遵循[ClassLoader.getResource()](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResource%28java.lang.String%29)中详述的规则。

因此，应该可以从类路径访问 XML 文件。假设`c:\work`在类路径中，资源路径因此应该是`"myfile.xml"`或`"/myfile.xml"`取决于此方法的实现方式。如果`c:\`是在类路径中，那么路径应该是`"work/myfile.xml"`或`"/work/myfile.xml"`。

如果此库是通用 API 并且设计良好，则它应该接受资源路径以外的其他内容作为参数，例如 java.io.Reader 或 java.io.InputStream。

# javascript - 这些 Jquery 选择器是什么意思？

> ID：10427815
> 
> 赞同：1
> 
> 时间：2012-05-03T08:36:41.723
> 
> 标签：javascript, jquery, jquery-selectors

我无法弄清楚这两行是什么意思：

```
var template = $("#" + model + " #grid #template").clone();
var templateHtml = $("#templatebody", template).html(); 
```

我无法理解这里的选择器。我知道 clone() 和 html() 做什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:40:08.680

```
$("#" + model + " #grid #template") 
```

这是在一个元素 id内部寻找一个带有`id`of的元素，在这个内部和元素里面设置了 which 在变量中。`template``grid``id``model`

例如，如果`model`是字符串：'container'：

```
<div id="container">
    <div id="grid">
        <div id="template"></div> <!-- this div would be selected -->
    </div>
</div> 
```

* * *

```
$("#templatebody", template) 
```

这是一个“上下文”选择器；它正在寻找包含在变量中的`#templatebody`元素内的元素。`template`请注意，在这种情况下，上下文选择器无关紧要，因为在给定页面中应该只有一个元素具有 set `id`。

例子

```
var template = $("#container"); // note - can also be a string: "#container"
$("#templatebody", template) 
```

```
<div id="container">
    <div id="templatebody"></div> <!-- this div would be selected -->
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T08:39:57.430

第一个是具有 ID 的元素`template`，在另一个具有 ID的元素内，该元素位于具有变量`grid`ID 的父元素内。`model`

将模型设置为`test`

```
model = "test" 
```

结果如下：

```
<div id="test">
    <div id="grid">
         <div id="template">   <--- this element is found
         </div>
    </div>
</div> 
```

这意味着在您的 HTML 中存在多个具有相同 ID 的元素，这不是一个好主意，因为它经常会混淆选择器。（我相当肯定它也是无效的 HTML）

第二种是简单地`templateBody`在第一个选择器中找到的模板元素中找到具有 ID 的元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T08:40:37.100

假设`model`包含字符串`"model"`。以下选择器：

```
$("#" + model + " #grid #template") 
```

查找具有 id =`template`并包含在具有 id = 的元素中的元素，该元素`grid`本身包含在具有 id = 的元素中`model`。选择器：

```
$("#templatebody", template) 
```

`templatebody`在先前匹配的元素（的克隆）中查找 id =的元素。

话虽如此，第一个选择器可以写成`$("#template")`因为 id 应该是唯一的。如果不是这种情况，那么您将得到意想不到的结果。此外，以引入重复 ID 的方式克隆元素是一个坏主意。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T08:39:26.447

首先，选择器中的 3 个 ID？感觉有点矫枉过正。但是您所做的是克隆`#template`并从克隆中找到一个具有 id 的孩子`#templatebody`并取出其 HTML 内容。你不需要克隆它来获取 HTML 文本。

```
// Find the #template that is a child of #grid and #grid is a child of #<insertModel> and clone it
var template = $("#" + model + " #grid #template").clone();
// Find #templatebody child of template ( http://api.jquery.com/jQuery/#jQuery2 ) and get the HTML text thats in #templatebody 
```

var templateHtml = $("#templatebody", 模板).html();

如果您的标记看起来像：

```
<div id="model">
    <div id="grid">
        <div id="template"><b>Hi</b> there!</div>
    </div>
</div> 
```

您的 templateHTML 变量将包含`'<b>Hi</b> there!'`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T08:41:03.973

```
var template = $("#" + model + " #grid #template") 
```

将选择带有网格和模板的 id 以及模型变量的 id。要找出这是什么，您可以 alert(model) 它将显示该值。

然后选择包含在您之前定义的模板变量中的 templatebody 元素。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-03T08:51:25.507

在寻找相同元素的意义上，代码等同于编写

```
var template = $("#" + model).find("#grid).find("#template").clone(),
    templateHtml = template.find("#templatebody").html(); 
```

*   找到everelement有什么和id等于model的值，
*   在其中找到一个id为grid的元素
*   在其中找到一个模板 id 的。
*   克隆找到的元素搜索
*   在具有 id templateBody 的克隆中。

但是，如果 html 是有效的，那么只有一个 id 为 #template 在这种情况下，代码可以简化为

```
var template = $("#template").clone();
    template.find("#templateBody"); 
```

除了不测试模板和网格以及网格和模型之间的父/子关系之外。如果需要，不能使用简化版

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-03T08:51:08.873

第一行在 #" + 模型中的 #grid 中查找 ID 为 #template 的元素。

ID 在页面上应该是唯一的，理想情况下，第一行应该替换为：

```
var template = $("#template").clone();
template.attr("id", "newid"); // assign a new unique id 
```

# django - 换行符/换行符 Django

> ID：10427824
> 
> 赞同：-1
> 
> 时间：2012-05-03T08:37:10.270
> 
> 标签：django, django-templates

我正在使用 js 创建一些 html，方法是 {{description| linebreaksbr}} 我不断收到未终止的字符串文字错误。

我知道这是因为 JS 不喜欢字符串在没有 '\' 的情况下位于不同的行上，但是这段代码用于生产服务器，它可以很好地格式化字符串

```
+ '<p class="description">Complete the following riddle end location.<br /><br />Riddle Details:<br />The year Lincoln was born + The 17th digit of Pi.'
+ '</p>' 
```

但是在我的本地主机上，我得到了

```
+ '<p class="description">Complete the following riddle 
<br />
<br />Riddle Details:
<br />The year Lincoln was born + The 17th digit of Pi.'
+ '</p>' 
```

代码只是

```
<script type='text/javascript'>
var html = '<p class="description">{{description|linebreaksbr }}'
         + '</p>'
</script> 
```

我最近刚刚从生产服务器复制了所有数据。对于 django 不理解的换行符，这可能是一种奇怪的格式吗？

***发现问题不知道哪里出了问题，但我认为这与 pgadmin3 导出数据的方式有关。我将数据导出到文本文件并运行 sql 以插入所有内容/创建表。

对于有问题的数据，我只是将其复制并粘贴到文本文件中，删除新行并通过在每个末尾按 Enter 重新添加它们，然后将数据重新保存到数据库中，这很好。

不完全确定发生了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:41:44.600

我敢打赌这是行终止符的问题。Windows 使用两个字符序列；linux和mac用一个。我猜你在 dev 中收到了一个以 Windows 结尾的字符串，但无论出于何种原因，你的 python 设置都需要单字符行终止符（也许你在 cygwin 上运行）？

# python - 水平排列十六进制

> ID：10427830
> 
> 赞同：1
> 
> 时间：2012-05-03T08:37:30.617
> 
> 标签：python, binary, hex

我有一个需要以十六进制显示的二进制文件。代码如下：

```
file=open('myfile.chn','rb')  
for x in file:     
    i=0
    while i<len(x):
        print ("%0.2X"%(x[i]))
        i=i+1
        if (i>=10): 
            i=0
            break
file.close() 
```

我得到的结果如下：

```
FF  
FF  
01  
00  
01  
00  
35  
36  
49  
EC      
.   
.   
. 
```

为了显示结果，我需要更改代码的哪一部分，如下所示？

```
FF FF 01 00 01   
00 35 36 49 EC  
.  
. 
```

（每个字节之间有一个空格）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T09:00:02.407

因为你只需要 10 个元素，我会使用：

```
print(" ".join("%0.2X" % s for s in x[:10])) 
```

或者如果你想包括整行：

```
print(" ".join("%0.2X" % s for s in x)) 
```

您的初始版本仍然存在错误。您的输入被读取为每行一个字符串。类型转换“%0.2X”失败（“%s”有效）。我认为您无法每行读取二进制文件。\n 只是另一个字节，不能解释为换行符。

当您有一系列 int 值时，您可以使用 group 方法创建 n 个元素的分区。group 方法在[itertools recipies](http://docs.python.org/library/itertools.html#recipes)中。

```
from itertools import zip_longest

def grouper(n, iterable):
    args = [iter(iterable)] * n
    return zip_longest(fillvalue=None, *args)

width=10
x = range(1,99)
for group in grouper(width, x):
    print((" ".join("%0.2X" % s for s in group if s))) 
```

输出：

```
01 02 03 04 05 06 07 08 09 0A
0B 0C 0D 0E 0F 10 11 12 13 14
15 16 17 18 19 1A 1B 1C 1D 1E
1F 20 21 22 23 24 25 26 27 28
29 2A 2B 2C 2D 2E 2F 30 31 32
33 34 35 36 37 38 39 3A 3B 3C
3D 3E 3F 40 41 42 43 44 45 46
47 48 49 4A 4B 4C 4D 4E 4F 50
51 52 53 54 55 56 57 58 59 5A
5B 5C 5D 5E 5F 60 61 62 
```

到 bytes_from_file 读取字节作为生成器：

```
def bytes_from_file(name):
    with open(name, 'rb') as fp:
        def read1(): return fp.read(1)
        for bytes in iter(read1, b""):
            for byte in bytes:
                yield byte

x = bytes_from_file('out.fmt') #replaces x = range(1,99) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T08:49:35.333

这应该这样做。

```
for i, x in enumerate(file):
    print ("%0.2X" % (x)),
    if i > 0 and i % 5 == 0:
        print 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T08:49:53.133

```
file=open('myfile.chn','rb')  
for x in file:

       char=0
       i=0
       while i<len(x):
           print ("%0.2X "%(x[i])),
           char += 1
           if char == 5:
               char=0
               print ''
           i=i+1
           if (i>=10): 
               i=0
               break
file.close() 
```

# android - 每天在指定时间使用警报服务关闭蓝牙

> ID：10427831
> 
> 赞同：1
> 
> 时间：2012-05-03T08:37:33.347
> 
> 标签：android, alarmmanager

我打算开发一个应用程序，它会询问用户一周中几天的蓝牙打开和关闭时间，然后使用警报服务来执行此操作。我使用以下 grunt 代码进行测试。

```
Intent myIntent = new Intent(AndroidAlarmService.this, MyAlarmService.class);

 pendingIntent = PendingIntent.getService(AndroidAlarmService.this, 0, myIntent, 0);

       AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
       /*
       Calendar calendar = Calendar.getInstance();
       calendar.setTimeInMillis(System.currentTimeMillis());
       calendar.add(Calendar.SECOND, 30);
       alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(),  
       pendingIntent);

       */

       Calendar cur_cal = new GregorianCalendar();
       cur_cal.setTimeInMillis(System.currentTimeMillis());
       Calendar cal = new GregorianCalendar();
       cal.add(Calendar.DAY_OF_YEAR, cur_cal.get(Calendar.DAY_OF_YEAR));
       cal.set(Calendar.HOUR_OF_DAY, 13);
       cal.set(Calendar.MINUTE, 23);
       cal.set(Calendar.SECOND, 0);
       cal.set(Calendar.MILLISECOND, cur_cal.get(Calendar.MILLISECOND));
       cal.set(Calendar.DATE, cur_cal.get(Calendar.DATE));
       cal.set(Calendar.MONTH, cur_cal.get(Calendar.MONTH));

   alarmManager.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pendingIntent); 
```

但这不会在下午 1:30 触发我的服务。注释掉的代码工作正常。它会在当前时间 30 分钟后触发我的警报。但是当我硬编码的时候。它不起作用。我无法弄清楚 Calender cal 的代码片段中的错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:42:48.490

如果你想要一个重复的警报，你应该使用它`alarmManager.setRepeating(...)`。`alarmManager.set(...)`只会触发一次。

# delphi - 用delphi在Excel工作表中写阿拉伯语？

> ID：10427832
> 
> 赞同：1
> 
> 时间：2012-05-03T08:37:33.873
> 
> 标签：delphi, excel, unicode, delphi-7

我想使用 Delphi 在 Excel 工作表中编写阿拉伯语文本。当我在纸上写字时，我会得到类似 ÌÇÝÇ 的内容。另外，如何从 Delphi 代码中更改 excel 数据类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:46:52.613

1.  打开控制面板。
2.  双击区域和语言选项。
3.  在“标准和格式”中，选择“阿拉伯阿尔及利亚”。
4.  在“位置”下，选择“阿尔及利亚”。
5.  在“语言”选项卡中，选中“为复杂的脚本和从右到左书写的语言安装文件”，并勾选“为东亚语言安装文件​​”。
6.  现在转到“高级”选项卡并选择“阿拉伯阿尔及利亚”。
7.  重新启动你的电脑，瞧。（我们其他人向您确认）

# python - Django / Python获取“error_message”：使用正则表达式的“多次重复”

> ID：10427839
> 
> 赞同：0
> 
> 时间：2012-05-03T08:38:45.857
> 
> 标签：python, regex, django

我正在尝试向我们拥有的聊天服务添加更有效的发誓过滤器，但似乎无法让我的正则表达式在我的实时 django 服务器上工作。

我在 Python 2.6.7 上运行最新的稳定 Django。

这是我的代码：

```
def replacement(match):
    return "*" * len(match.group(0))

def censored_string(cFilter, dirty):
    clean = str(dirty)
    wordList = cFilter.mutations.split(',')
    wordList.sort(key = len)
    wordList.reverse()

    for swear_word in wordList:
        target_word = swear_word.strip()
        result = re.sub("(?i)\\b(("+target_word+"){1,})(s{0,1})\\b",replacement, clean)
        clean = result
    return clean 
```

记录在案 - 这可以使用我的本地服务器设置工作，我可以确认它也使用 python 2.6.7 和相同的 django 版本，但是自大约 10 个月前以来我没有做太多 django 或 python 并且最近继承了这个服务器设置 - 如果我缺少一些东西，请告诉我。

错误的输出如下：

```
{
    "error_message": "multiple repeat",
    "traceback": ... "result = re.sub(\"(?i)\\\\b(\"+target_word+\"){1,}(s{0,1})\\\\b\",censored_word(target_word), clean)\n\n  File \"/usr/lib/python2.6/re.py\", line 151, in sub\n    return _compile(pattern, 0).sub(repl, string, count)\n\n  File \"/usr/lib/python2.6/re.py\", line 245, in _compile\n    raise error, v # invalid expression\n\nerror: multiple repeat\n"
} 
```

我尝试过有无贪心等等，但现在迷路了 - 任何输入将不胜感激

干杯，

迈克尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T09:03:07.023

我认为问题不在于正则表达式，而在于您的单词列表。该列表可能包含被解释为正则表达式特殊字符的字符。这对我有用：

```
#!/usr/bin/python
import re

def replacement(match):
    return "*" * len(match.group(0))

def censored_string(dirty):
    clean = str(dirty)
    wordList = ["fuck", "shit", "damn"]

    for swear_word in wordList:
        target_word = swear_word.strip()
        result = re.sub("(?i)\\b(("+target_word+"){1,})(s{0,1})\\b",replacement, clean)
        clean = result
    return clean

print censored_string("god damn i love bananas and fucking fuckfuck shits")
# god **** i love bananas and fucking ******** ***** 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:23:42.180

从字面上看，“多次重复”错误`re`意味着有多个重复指令应用于您的模式中的同一表达式。

重复指令可以是`*`, `+`, `?`, `{m}`,`{m,n}`等。如果将多个这些指令应用于一个模式，您将收到该错误。同样，它很可能`target_word`包含您可能忘记转义的正则表达式特殊字符。用`re.escape()`它来做到这一点，再给它一次机会。

IE

```
result = re.sub("(?i)\\b((" + re.escape(target_word) + "){1,})(s{0,1})\\b", replacement, clean) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-27T08:21:21.807

有人请从 Devy 对上面的答案投赞成票。

我自己的用例也与 "re" 和 "Django" 一起使用。

得到错误——“在位置 12 多次重复”我的初始代码如下——

```
str_7 = re.findall(r'([\d+]{1,20}[A-Z])',str_7)
## multiple repeat at position 12# 
```

上面的错误 ---> (r'([\d+]{1,20} - 不能有 "\d+" AND {1,20} ，两者都在一起。

同样`re.escape`正如其他地方所建议的那样，这不是理想的解决方案 - 尽量不要有多个 - “重复指令”

因此，在我的情况下 - "加号运算符" 或 "正闭包" 不应跟在 "大括号运算符" {m,n}

# asp.net-mvc - MVC 3 动态视图

> ID：10427841
> 
> 赞同：0
> 
> 时间：2012-05-03T08:38:58.833
> 
> 标签：asp.net-mvc, linq, dynamic, view

我对 MVC (3) 相当陌生，并且正在构建一个应用程序，它将在整个过程中使用各种数据项的列表。

我可以为每个视图构建一个视图，但认为每个视图都相似（带有数据列的 HTML 表），因此使用通用视图会更有意义。

控制器都使用 DAL 中的 Linq 来返回条目，例如

*达尔*

```
public List <MyObject> getAllEntriesOfSomeType()
{
    var myobjects = from r in db.something
                    where r.status ==1
                    select r;
    return myobjects.ToList();
} 
```

*控制器*

```
MyObjectClass o = new MyObjectClass();

return View(o.getAllEntriesOfSomeType()); 
```

*看法*

在不与该对象绑定的视图中，我想动态显示列名和数据，例如

```
<thead>
    <tr>
        @int cols = 0;
        @foreach(c in Model.Columns)
        {
            <th>
                @cols+=1;
                @c.DisplayName
            </th>
        }
    </tr>
</thead>
<tbody>

@foreach(m in Model)
{
    <tr>
        @(int i = 1;i<=cols;i++)
        {
            <td>
                @m[i].Value
            </td>
        }
    </tr>
}
</tbody> 
```

...

有没有（简单！）实现上述目标的方法。我想过将模型转换为 DataTable，但似乎没有一个简单的方法（阅读一些关于 ObjectShredder 的内容）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T23:04:32.867

MVC 实际上是为您要显示/编辑的每组数据提供不同的视图。

这样当事情发生变化时（它们会发生变化），您就有了这种分离，允许您在不影响其他视图或页面的情况下更改视图或页面。

也就是说，这并不意味着你不能对你正在做的事情很聪明。

如果您说您的数据都非常相似，那么您会遇到它们都继承自相同接口或基本类型的问题，对吗？

喜欢：

```
public class MyObjectClass : IMyObjectClassCommonStuff
{  
} 
```

然后在您的**局部**视图中（以便您可以重用在不同页面上显示的数据），您可以像这样在视图中使用模型：

```
@model IList<IMyObjectClassCommonStuff> 
```

然后，您可以像往常一样编写视图，引用界面中的公共字段。

# java - 构造函数问题：实际和正式列表的长度不同

> ID：10427846
> 
> 赞同：1
> 
> 时间：2012-05-03T08:39:09.397
> 
> 标签：java

我的问题是我有两个类，第一个是实现 Runnable 的实现类，第二个是扩展 frameview 的 interfaceView

但是当我尝试在实现类中创建 interfaceView 的对象时，例如

```
interfaceview check1 ;
check1.get_sms_validation(); 
```

它给了我

> java.lang.IllegalArgumentException：空应用程序

例外

实现类的代码是

但是当我这样做的时候

```
interfaceview check1 = new interfaceview () ;
  check1.get_sms_validation(); 
```

它告诉我在 interfaceview 类中创建一个构造函数，当我这样做时它给了我一个错误

> 实际列表和正式列表的长度不同。

我的实现类的代码是

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

package smsapp;
import java.io.*;
import java.net.*;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.*;
import org.smslib.GatewayException;
import org.smslib.TimeoutException;
import org.smslib.modem.*;
import org.smslib.InboundMessage;
import org.smslib.OutboundMessage;
import org.smslib.Service;
import java.awt.event.ActionEvent;
import java.util.ArrayList;
import java.util.Random;
import org.jdesktop.application.SingleFrameApplication;
/**
 *
 * @author ist
 */
public class Implementation implements Runnable {

    private boolean login;
    public static Service srv;
    public static OutboundMessage outMsg;
    public static String defaultPort="COM7";
    public static ArrayList<OutboundMessage> queuedMessages = new ArrayList<OutboundMessage>();
    static QueueSendingNotification queueSendingNotification = new QueueSendingNotification();
    private boolean phoneConnected;
    Thread t;
    String msg ="1";
    public String Data_For_File ;
    public  String messageFor_File = null;
    public int check = 0;
    Random generator;
    public String message;
    private SingleFrameApplication SingleFrameApplication;
   // private String messageFor_File1;
    public String messageFor_File1 = null;
//   public InterfaceView = new InterfaceView ();

    Implementation()
    {
        phoneConnected = false;
    }

    public boolean connectPhone(String comPort)
    {
        try
        {

            srv = new Service();
            SerialModemGateway gateway = new SerialModemGateway("Modem 0", comPort, 9600, "", "");
            gateway.setInbound(true);
            gateway.setOutbound(true);
            gateway.setSimPin("0000");
            srv.addGateway(gateway);

        }
        catch(Exception e)
        {
             System.out.println("Could Not connect to the Modem. Please try again.\n");

        }
        this.phoneConnected = true;
        return true;
    }

    public boolean startService()
    {
        try
        {
            if(phoneConnected)
            {
                srv.startService();
                t = new Thread(this);
                t.start();
                generator  = new Random( 19580427 );
            }
            else
            {
                return false;
            }
        }
        catch(Exception e)
        {
             try
             {
                 System.out.println("Service Start Error ");
                 e.printStackTrace();
                 srv.stopService();
                 return false;
             }catch(Exception ee)
             {
                 System.out.println("Service Stop Error");
                 e.printStackTrace();
                return false;

             }
        }
        srv.setOutboundNotification(queueSendingNotification);
//        myTimer = new Timer (10000,runProcess);
//        myTimer.setInitialDelay(0);
//        myTimer.start();
        return true;
    }

    public boolean stopService()
    {
        try
        {
            srv.stopService();
            t.stop();
        }catch(Exception e)
        {
            System.out.println("There was an error in disconnecting.");
            e.printStackTrace();
            return false;
        }
        return true; 
    }

    public void run()
    {
       // processOutMessage("1");
      //  processOutMessage();

        while (true)
        {
//            System.out.println(alpha++);
            InterfaceView.statusMessageLabel.setText("Checking inbound messages");
            try {
                //            System.out.println("Checking inbound messages");
                            readMessages();

            } catch (FileNotFoundException ex) {
                Logger.getLogger(Implementation.class.getName()).log(Level.SEVERE, null, ex);
            }
            InterfaceView.statusMessageLabel.setText("Processing messages");
//            System.out.println("Checking outbound messages");
        //    processMessages();
            InterfaceView.statusMessageLabel.setText("Checking outbound messages");
//            System.out.println("Checking outbound messages");
          //  sendMessages();
            InterfaceView.statusMessageLabel.setText("Waiting ... ");
            try {
                readMessages();
            } catch (FileNotFoundException ex) {

                Logger.getLogger(Implementation.class.getName()).log(Level.SEVERE, null, ex);
            }
            try
            {
                t.sleep(5000);
            } catch (InterruptedException e) {System.out.println("Thread Pause Exception");}
        }
    }

    static class QueueSendingNotification implements org.smslib.IOutboundMessageNotification
    {

        public void process(String gtwId, OutboundMessage msg)
        {
            try {
                System.out.println("Sent Message from: " + gtwId + " , " + msg.getId());
                queuedMessages.remove(msg);
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }
        }
    }

    public void readMessages() throws FileNotFoundException
    {
        int check_Lenght = 0;

        if (srv.getServiceStatus() == Service.ServiceStatus.STARTED)
        {
            try{
                System.out.print ("\n\n\n\n\n" + "in the print block of above the interfaceview declaration");
                 InterfaceView check1 = new InterfaceView(SingleFrameApplication);
                InboundMessage msg = null;
                java.util.LinkedList<InboundMessage> list = new java.util.LinkedList<InboundMessage>();
                srv.readMessages(list, InboundMessage.MessageClasses.UNREAD);
                for (int i = 0; i < list.size(); i++)
                {

                    msg = list.get(i);

                    //TODO: submit the incoming messages to the database from this point. 
                    System.out.println("New incoming message from: " + msg.getOriginator() +" : \t" + msg.getText() + "\n");
                    saveSMS(msg.getOriginator(),msg.getText());
                    messageFor_File = msg.getText();

                    // Concatination of data
                    if (! messageFor_File.equals("Y"))     {           
                      Data_For_File = messageFor_File +  Data_For_File ;
                      check_Lenght = Data_For_File.length();
                     System.out.print("The Value for Data For File" + messageFor_File );

                          if (check_Lenght >= check){
                              System.out.println("\n\n\n" + "I am in x " );
                              DataPacketing call = new DataPacketing();
                              call.Write_To_File(Data_For_File);
                             }
                                 //put the message into database.
                               srv.deleteMessage(msg);

                    }
                    else 
                    {

                    messageFor_File1 = messageFor_File;
                    srv.deleteMessage(msg);
                    Read_Message_Notification ();

                    }
                }

            }

            catch(Exception e)

            {
                e.printStackTrace();
            }

        }

    }

    private void saveSMS(String originator, String text)
    {

        try
        {

        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    public void processOutMessage(String sms)
    {
        try
        {
          // outMsg = new OutboundMessage ("03456305252", sms);
           // outMsg = new OutboundMessage ("03219409778", sms);
            outMsg = new OutboundMessage ("03456305252", sms);
            outMsg.setId("1");
            queuedMessages.add(outMsg);
            srv.queueMessage(outMsg);

            msg=msg+1;
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }

public String Read_Message_Notification () throws TimeoutException {

 // int check_Lenght;
 //String messageFor_File1 = "";

   System.out.println(messageFor_File1);

return   messageFor_File1;
}

} 
```

我的 InterfaceView 类的代码是

```
/*
 * InterfaceView.java
 */

package smsapp;

import java.io.IOException;
import java.util.logging.Level;
import org.jdesktop.application.Action;
import org.jdesktop.application.ResourceMap;
import org.jdesktop.application.SingleFrameApplication;
import org.jdesktop.application.FrameView;
import org.jdesktop.application.TaskMonitor;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import javax.swing.Timer;
import javax.swing.Icon;
import javax.swing.JDialog;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JProgressBar;
import org.smslib.InboundMessage;
import org.smslib.TimeoutException;
import org.smslib.helper.*;

/**
 * The application's main frame.
 */

public class InterfaceView extends FrameView {

     private final String s = null;
    public String fileName;
    public String filePath;
    public float fileLength;
    public int No_Of_SMS;
    public String check = "N";
    public  DataPacketing [] Packets_Array  = null;
    public  DataPacketing start  = new DataPacketing ();
    public SingleFrameApplication app1 = new SingleFrameApplication ()
          {

       @Override
       protected void startup() {
           throw new UnsupportedOperationException("Not supported yet.");
       }
   };

    private void customizations()
    {

    private void botton_startServiceMouseClicked(java.awt.event.MouseEvent evt) {                                                 
        if (!this.botton_startService.isEnabled())
            return;
        javax.swing.JInternalFrame j = new javax.swing.JInternalFrame();
            JOptionPane.showMessageDialog(j ,
                    "Please wait while the service is being connected.",
                    "Starting Server!",
                    JOptionPane.PLAIN_MESSAGE);
        if (instance.startService()) {
            j = new javax.swing.JInternalFrame();
            JOptionPane.showMessageDialog(j ,
                    "Service Started Successfully.",
                    "Service Started",
                    JOptionPane.INFORMATION_MESSAGE);
            this.botton_startService.setEnabled(false);
            this.botton_connectPhone.setEnabled(false);
            this.botton_stopService.setEnabled(true);
        } else {
            j = new javax.swing.JInternalFrame();
            JOptionPane.showMessageDialog(j ,
                    "Service could not be started. Please connect the phone and try again.",
                    "Service Start Error",
                    JOptionPane.ERROR_MESSAGE);
            this.botton_connectPhone.setEnabled(true);
        }
    }                                                

    private void botton_connectPhoneMouseClicked(java.awt.event.MouseEvent evt) {                                                 
        if (!this.botton_connectPhone.isEnabled())
            return;
        if (!(instance.connectPhone(this.comPorts.getSelectedItem().toString()))) {
            javax.swing.JInternalFrame j = new javax.swing.JInternalFrame();
            JOptionPane.showMessageDialog(j ,
                    "Phone could not be connected. Please check the ports and try again.",
                    "Phone Connection Error",
                    JOptionPane.ERROR_MESSAGE);
        }
        //this.botton_connectPhone.setEnabled(false);

    }                                                

    private void formPropertyChange(java.beans.PropertyChangeEvent evt) {                                    
        if (!(instance.connectPhone(instance.defaultPort) && (instance.startService())))
        {
            this.botton_connectPhone.setEnabled(true);
            this.botton_startService.setEnabled(true);
            this.botton_stopService.setEnabled(false);         

        }      

    }                                   

    private void SelectFileActionPerformed(java.awt.event.ActionEvent evt) {                                           
        // TODO add your handling code here:
        JFileChooser chooser = new JFileChooser();
        chooser.showOpenDialog(null);
        File f = chooser.getSelectedFile();
        fileName = f.getName();
        filePath = f.getPath();
        fileLength = f.length();
       // System.out.println("You have chosen: " + fileName+"\n from the path: "+filePath+"\n of the length: "+fileLength+" KB");         

        //------------------------------------- Calculating the Number Of SMS Required from the File Size

        float temp = fileLength/120;
        No_Of_SMS = (int) Math.ceil(temp);

        String SMS = " "+No_Of_SMS+" SMS";         
        SmsRequired.setText(SMS);
        String size2 = " "+fileLength+" KB";       
        FileName.setText(fileName);
        FileSize.setText(size2);

        this.FileName.setVisible(true);
        this.FileSize.setVisible(true);
        this.SmsRequired.setVisible(true);       
        this.jLabel3.setVisible(true);
        this.jLabel4.setVisible(true);
        this.jLabel6.setVisible(true);
        DataPackets.setText(" InterKnot:\\"+filePath);

        try {
            Packets_Array  =   start.Driver(fileName,filePath,fileLength,No_Of_SMS);
        } catch (IOException ex) {
            java.util.logging.Logger.getLogger(InterfaceView.class.getName()).log(Level.SEVERE, null, ex);
        }       
        this.DataPackets.setVisible(true);

      //  DataPacketing setFile = new DataPacketing();
      //setFile.File_Name_Path(fileName, filePath);

}                                          

    private void FileNameActionPerformed(java.awt.event.ActionEvent evt) {                                         
        // TODO add your handling code here:
}                                        

    private void FileNameKeyPressed(java.awt.event.KeyEvent evt) {                                    
        // TODO add your handling code here:
}                                   

    private void ReadandSendFileActionPerformed(java.awt.event.ActionEvent evt) {                                                
        // TODO add your handling code here:

     //  DataPacketing [] Packets_Array  = null;
      // DataPacketing start  = new DataPacketing ();
         System.out.println("I am not yet in if");
        String s = null; 
         if(check.equals("N")){
        System.out.println("Do i Come here ????");
             try {
        //InboundMessage userNo = null;
            //String info = "User: " +  "wants to share file :"+ FileName+ " of size: "+FileSize+ "with you.To allow Reply Y";
                 String newInfo = "User Wants to share a file with you. To allow reply Y";
                System.out.println("\n\n\n\n\n" + newInfo);
                message1.processOutMessage(newInfo);

                         System.out.print("\n\n\n\n\n\n" + "I am In try to check for the read notification message");

                          }catch (Throwable t) {
                               System.out.println("The Exception" + t);

                  }

             Implementation check1 = new Implementation ();
            try {

                check = check1.Read_Message_Notification();

            } catch (TimeoutException ex) {

                java.util.logging.Logger.getLogger(InterfaceView.class.getName()).log(Level.SEVERE, null, ex);
            }

        if (check.equals("Y")){

        //  --------------------------------------------converting String Array into String

        StringBuffer result = new StringBuffer();

        //  -------------------------------------------- LOOP to send WHOLE file 

        for(int i=0; i<Packets_Array.length; i++)
        { 

                String s1 = Packets_Array[i].Data_Segment;
                System.out.println(s1);
                message1.processOutMessage(s1);
        }                

        //  -------------------------------------------- To send First Packet of file

        }

         }

        else
        {

        System.out.println("The User Refused to Allow the Transfer");

        }
    }                                               

    private void FileSizeActionPerformed(java.awt.event.ActionEvent evt) {                                         
        // TODO add your handling code here:
    }                                        

    private void FileSizeKeyPressed(java.awt.event.KeyEvent evt) {                                    
        // TODO add your handling code here:
    }                                   

    private void SmsRequiredActionPerformed(java.awt.event.ActionEvent evt) {                                            
        // TODO add your handling code here:
    }                                           

    private void SmsRequiredKeyPressed(java.awt.event.KeyEvent evt) {                                       
        // TODO add your handling code here:
    }                                      

    private void DataPacketsActionPerformed(java.awt.event.ActionEvent evt) {                                            
        // TODO add your handling code here:
    }                                           

    private void DataPacketsKeyPressed(java.awt.event.KeyEvent evt) {                                       
        // TODO add your handling code here:
    }                                      

    // Variables declaration - do not modify                     
    private javax.swing.JTextField DataPackets;
    private javax.swing.JTextField FileName;
    private javax.swing.JTextField FileSize;
    private javax.swing.JLabel PicGlobe;
    private javax.swing.JButton ReadandSendFile;
    private javax.swing.JButton SelectFile;
    private javax.swing.JTextField SmsRequired;
    private javax.swing.JButton botton_connectPhone;
    private javax.swing.JButton botton_startService;
    private javax.swing.JButton botton_stopService;
    public static javax.swing.JComboBox comPorts;
    private javax.swing.JFileChooser jFileChooser1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JProgressBar jProgressBar1;
    private javax.swing.JTabbedPane jTabbedPane1;
    private javax.swing.JPanel mainPanel;
    private javax.swing.JMenuBar menuBar;
    public static javax.swing.JLabel statusMessageLabel;
    public static javax.swing.JLabel statusMessageLabel1;
    private javax.swing.JPanel tab_settings;
    // End of variables declaration                   
    Object table_keywords_columns[] = { "Keyword",  "Reply Text"};
    Object table_outgoingSMS_columns[] = { "Number",  "Text", "Time"};
    Object table_incomingSMS_columns[] = { "Number",  "Text", "Time", "Auto-Reply Keyword"};
    private final Timer messageTimer;
    private final Timer busyIconTimer;
    private final Icon idleIcon;
    private final Icon[] busyIcons = new Icon[15];
    private int busyIconIndex = 0;
    private Implementation instance; 
    private JDialog aboutBox;
    public Implementation message1 = new Implementation();
    JProgressBar progressBar;

   void messagecheck(){
   System.out.print ("\n\n\n\n\n\n\n" + "I am in the message code of the interfaceview class");

   }

} 
```

该怎么办 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:43:03.060

你的第一个例子失败了，因为你没有为变量分配任何东西，所以它是`null`并且你得到一个`NullPointerException`.

您的第二个示例失败，因为构造函数需要参数并且您没有提供它们。您需要查看`interfaceview`类的构造函数并提供相关参数。

例如， if`interfaceview`的唯一构造函数如下所示：

```
public interfaceview(String foo) {
   // ...
} 
```

...然后要创建它，您必须提供`String`：

```
interfaceview check1 = new interfaceview("Some string here"); 
```

* * *

我认为退后一步并学习一些 Java 教程可能会很有用（那里不乏它们）。此外，仅仅为了它的价值，通常在 Java 中的接口和类是用最初封顶的驼峰式写成的，例如，`InterfaceView`而不是`interfaceview`. 如果您愿意，您可以忽略该约定，但遵循它会使代码对其他人更清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:44:53.277

导致的第一个错误`check1`未初始化，因此出现空点错误。接口导致的第二个错误不能`new`在jave中，您需要正常调用实现接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T08:45:08.253

> 界面视图检查1；check1.get_sms_validation();

会给你一个 NullPointerException 因为它还没有被初始化。

> interfaceview check1 = new interfaceview () ; check1.get_sms_validation(); 它告诉我做一个构造函数

更有可能有一个已经存在但您没有使用的构造函数。

> 实际列表和正式列表的长度不同。

您没有使用您认为的构造函数。

# mysql - 主索引与二级索引：性能差异

> ID：10427847
> 
> 赞同：1
> 
> 时间：2012-05-03T08:39:11.003
> 
> 标签：mysql, database-performance, database-indexes

我有一个小问题：主索引和二级索引的性能有什么区别？是什么导致了这种差异？

我在谷歌搜索，我发现二级索引存储在另一个表中，所以这会减慢所有操作。但是还有其他一些原因可以证明性能下降是合理的？

非常感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T12:41:39.820

聚集表是没有“堆”部分的 B-Tree - 行直接存储在聚集索引（主键）的 B-Tree 结构中。B-Tree 的节点可以拆分或合并，因此物理位置或行可以改变，所以我们不能有一个从二级索引到行的简单“指针”，所以二级索引必须包含完整的副本能够可靠地识别行的主索引字段。

这适用于 Oracle、MS SQL Server，[也适用于 InnoDB](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)。

这意味着聚集表中的二级索引比基于堆的表中的二级索引“胖”，其中：

*   降低数据聚类，
*   降低缓存的有效性，
*   使它们的维护成本更高，
*   最重要的是，对查询性能有影响：
    *   通过二级索引查询可能需要双重查找——一次通过二级索引查找“关键”数据，另一次通过主索引查找行本身（Oracle 有一些有趣的优化可以避免二次查找，但 InnoDB 没有， 据我所知）。
    *   另一方面，二级索引自然会[覆盖](http://use-the-index-luke.com/sql/glossary/covering-index)更多字段，因此在传统的基于堆的索引需要表访问的情况下，可以完全避免第二次查找。但是，在基于堆的索引中也可以实现相同的效果，只需向其添加更多字段即可。

让我引用[使用索引，卢克！](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)：*“索引组织表和聚集索引的优势大多仅限于不需要第二个索引的表。”*

真可惜，因为 MySQL 不允许您独立于存储引擎选择集群。

# android - 请参阅库中的 ActionBarSherlock

> ID：10427850
> 
> 赞同：27
> 
> 时间：2012-05-03T08:39:17.600
> 
> 标签：android, actionbarsherlock

> **可能重复：**
> [ActionBarSherlock 4.0 不起作用。但是 3.5.1 可以。](https://stackoverflow.com/questions/9442781/actionbarsherlock-4-0-doesnt-work-but-3-5-1-do)

我正在尝试将 ActionBarSherlock 用于我的应用程序，但是在从另一个库项目中引用 ActionBarSherlock 时似乎存在问题。

这是因为我使用一个 UI 项目来创建所有活动，但这个项目实际上是一个库。所以我需要这个UI项目中的ActionBarSherlock组件，但是当我提到ActionBarSherlock时出现以下错误：

```
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:4: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionBar'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:6: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionBar.Solid'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:8: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:10: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.Solid'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:12: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.Solid.Inverse'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:15: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionBar.TabView'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:17: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.TabView'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:19: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.TabView.Inverse'.
...\ActionBarSherlockLibrary\res\values\abs__styles.xml:89: error: Error: No resource found that matches the given name: attr 'android:dividerPadding'.
...\ActionBarSherlockLibrary\res\values\abs__styles.xml:88: error: Error: No resource found that matches the given name: attr 'android:showDividers'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:22: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionBar.TabBar'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:24: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.TabBar'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:26: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.TabBar.Inverse'.
...\ActionBarSherlockLibrary\res\values\abs__styles.xml:101: error: Error: No resource found that matches the given name: attr 'android:textAllCaps'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:29: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionBar.TabText'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:31: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.TabText'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:33: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.TabText.Inverse'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:36: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionButton'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:38: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionButton'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:41: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionButton.CloseMode'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:43: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionButton.CloseMode'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:46: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionButton.Overflow'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:48: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionButton.Overflow'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:51: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionMode'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:53: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionMode'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:55: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionMode.Inverse'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:58: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.PopupMenu'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:60: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.PopupMenu'.
...\ActionBarSherlockLibrary\res\values\abs__styles.xml:184: error: Error: No resource found that matches the given name: attr 'android:dividerPadding'.
...\ActionBarSherlockLibrary\res\values\abs__styles.xml:183: error: Error: No resource found that matches the given name: attr 'android:showDividers'.
...\ActionBarSherlockLibrary\res\values\abs__styles.xml:213: error: Error: No resource found that matches the given name: attr 'android:spinnerMode'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:63: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Spinner'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:65: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.Spinner'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:68: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ListView.DropDown'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:70: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ListView.DropDown'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:73: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.PopupWindow'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:75: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.PopupWindow'.
...\ActionBarSherlockLibrary\res\values\abs__styles.xml:257: error: Error: No resource found that matches the given name: attr 'android:animationResolution'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:78: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ProgressBar'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:80: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ProgressBar'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:83: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ProgressBar.Horizontal'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:85: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ProgressBar.Horizontal'.
...\ActionBarSherlockLibrary\res\values\abs__styles.xml:305: error: Error: No resource found that matches the given name: attr 'android:textAllCaps'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:88: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionBar.Menu'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:91: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionBar.Title'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:93: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionBar.Title.Inverse'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:95: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionBar.Subtitle'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:97: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionBar.Subtitle.Inverse'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:99: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionMode.Title'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:101: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionMode.Title.Inverse'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:103: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionMode.Subtitle'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:105: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionMode.Subtitle.Inverse'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:108: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.PopupMenu'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:110: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.PopupMenu.Large'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:112: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.PopupMenu.Large'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:114: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.PopupMenu.Small'.
...\ActionBarSherlockLibrary\res\values-v14\abs__styles.xml:116: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.PopupMenu.Small'.
...\ActionBarSherlockLibrary\res\values-v11\abs__themes.xml:4: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo'.
...\ActionBarSherlockLibrary\res\values-v11\abs__themes.xml:6: error: Error: No resource found that matches the given name: attr 'android:windowActionBar'.
...\ActionBarSherlockLibrary\res\values-v14\abs__themes.xml:4: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo'.
...\ActionBarSherlockLibrary\res\values-v11\abs__themes.xml:8: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Light'.
...\ActionBarSherlockLibrary\res\values-v11\abs__themes.xml:10: error: Error: No resource found that matches the given name: attr 'android:windowActionBar'.
...\ActionBarSherlockLibrary\res\values-v14\abs__themes.xml:6: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Light'.
...\ActionBarSherlockLibrary\res\values-v14\abs__themes.xml:8: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Light.DarkActionBar'.
...\ActionBarSherlockLibrary\res\values-v14\abs__themes.xml:14: error: Error: No resource found that matches the given name: attr 'android:actionBarWidgetTheme'.
...\ActionBarSherlockLibrary\res\values-v14\abs__themes.xml:20: error: Error: No resource found that matches the given name: attr 'android:windowActionBar'.
...\ActionBarSherlockLibrary\res\values-v14\abs__themes.xml:24: error: Error: No resource found that matches the given name: attr 'android:windowActionBar'.
...\ActionBarSherlockLibrary\res\values\abs__themes.xml:183: error: Error: No resource found that matches the given name: attr 'android:windowActionBar'.
...\ActionBarSherlockLibrary\res\values\abs__themes.xml:184: error: Error: No resource found that matches the given name: attr 'android:windowActionModeOverlay'.
...\ActionBarSherlockLibrary\res\values\abs__themes.xml:185: error: Error: No resource found that matches the given name: attr 'android:windowCloseOnTouchOutside'.
...\ActionBarSherlockLibrary\res\values-v14\abs__themes.xml:28: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Dialog'.
...\ActionBarSherlockLibrary\res\values\abs__themes.xml:209: error: Error: No resource found that matches the given name: attr 'android:windowActionBar'.
...\ActionBarSherlockLibrary\res\values\abs__themes.xml:210: error: Error: No resource found that matches the given name: attr 'android:windowActionModeOverlay'.
...\ActionBarSherlockLibrary\res\values\abs__themes.xml:211: error: Error: No resource found that matches the given name: attr 'android:windowCloseOnTouchOutside'.
...\ActionBarSherlockLibrary\res\values-v14\abs__themes.xml:30: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Light.Dialog'. 
```

所以它似乎找不到 Holo 主题，即使所有项目都有`android:targetSdkVersion="15"`。是否有解决此问题的方法，或者只是无法从库中引用 ActionBarSherlock？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-05-03T08:55:00.840

我通过将 ActionBarSherlock**库****和****我的项目**的项目**构建目标**更改为 Android 4.0.3 ( **API 15** ) 来解决。

 ******您可以使用**Project Properties**并单击**Android 部分**来执行此操作。

请记住在更改 API 级别后进行**项目清理。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T08:50:33.523

您需要将 ABS 添加到您的库项目以及您的其他项目中。******

# php - 使用 JQuery 和 AJAX 更新 SQL

> ID：10427851
> 
> 赞同：1
> 
> 时间：2012-05-03T08:39:20.860
> 
> 标签：php, jquery, sql, ajax

我的网站上有一个回复框，我希望人们根据他们是否来点击勾选或交叉图像。我目前有一个更新 SQL 数据库的 PHP 系统，但它会重新加载页面。

我试过这段代码：

```
$(document).ready(function() {
    var options = {
        url: 'process.php',
        type: 'post',
        data: 'attending',
        success: success
    };

    // bind to the form's submit event
    $('.attending').click(function {
        $(this).ajaxSubmit(options);
        return false;
    });

    function success(responseText, $form) {
        $(".attending").hide();
        $(".success").fadeIn();
    } 
}); 
```

RSVP 按钮是带有标签的链接但我正在为此苦苦挣扎，任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:48:19.050

ajaxSubmit 函数是[jquery 表单插件](http://jquery.malsup.com/form/)的一部分……您是否在页面中包含该插件？（您没有用 jquery-forms-plugin 标记问题，所以我猜不是）如果这是您第一次使用 jQuery ajax，我建议您首先使用 .ajax 方法，即使它的代码行数更多，以了解那里发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:47:31.113

在单击处理程序中声明函数后，您错过了括号，试试这个：

```
// bind to the form's submit event
$('.attending').click(function() {
    $(this).ajaxSubmit(options);
    return false;
}); 
```

或者更好：

```
// bind to the form's submit event
$('.attending').click(function(e) {
    e.preventDefault();
    $(this).ajaxSubmit(options);
}); 
```

# web-services - 是否所有功能都可以以 RESTful 方式中断？

> ID：10427852
> 
> 赞同：2
> 
> 时间：2012-05-03T08:39:25.713
> 
> 标签：web-services, restful-architecture

RESTFul 主要基于这四个动作： `GET,POST,PUT,DELETE`

但是，如果我想将 a `item`from更改`location A`为`location B`... 我该怎么做？

我应该有两个功能吗？

`DELETE /item/locationA/1`

`PUT /item/locationB/1`

谢谢。

# c# - 调试后台工作者

> ID：10427856
> 
> 赞同：2
> 
> 时间：2012-05-03T08:39:36.260
> 
> 标签：c#, debugging, backgroundworker

我正在使用 Visual Studio 2010，我`Debugger.Launch`的应用程序的第一行是一个更新工具。这是我可以足够快地将调试器附加到更新程序的唯一方法。

（根据快捷方式参数更新两个程序之一，然后启动更新的程序。）

我遇到的问题是，当我将调试器附加到进程时，我无法进入调试器。我已经尝试将其`Debugger.Launch`放入 backgroundworker 线程中，但这仍然不会让我介入。

线程仍在运行，因为如果我尝试启动两个（当然设置了断点），则会出现异常。

从 Visual Studio 运行它并通过调试属性窗口发送命令 args 时，我没有这个问题。能够将调试器附加到已安装的应用程序对我来说更加有用。（目前它在 Visual Studio 中工作，但不能从启动 exe 开始）

有谁知道此问题的修复或解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:19:23.650

调用 Debugger.Break() 而不是 Debugger.Launch()。

[http://msdn.microsoft.com/library/system.diagnostics.debugger.break.aspx](http://msdn.microsoft.com/library/system.diagnostics.debugger.break.aspx)

# java - 简单的摇摆应用。jar文件在我的电脑上运行，其他的不行

> ID：10427857
> 
> 赞同：3
> 
> 时间：2012-05-03T08:39:52.567
> 
> 标签：java, netbeans, jar, manifest

这是我的第一个问题，如有错误请见谅。我会尽力提供我能提供的所有信息。基本上我已经编写了一个简单的摇摆应用程序，它只是将图像加载到 JPanel 中并显示它。我正在使用 Netbeans 7.1，并且拥有最新版本的 Java SDK。无论如何，我已经使用 NetBeans 7.1 中的“构建”功能将我的应用程序部署到 Jar 文件中。当我在我的 PC 上双击 Jar 文件时，它运行没有问题。但是，当我将它放在其他计算机上时（到目前为止已在其他 2 台计算机上进行了测试，均使用最新的 JRE）它无法打开，并引用以下错误：

> 找不到主类：swong.Startup。程序将会退出

swong 是我的包名，Startup 是我的 main 方法的位置。我检查了使用 Netbeans 构建创建的清单文件，它 [清单] 确实包含我的主要方法类的位置。

通过搜索，我遇到了类路径设置错误的类似问题，但我不明白这如何导致我的特定错误。

如果有人可以帮助我，我会欣喜若狂。我已经学习了一年左右的java，并且掌握了很好的方法，但是我从来没有能够制作一个可以在不是我自己的计算机上运行的Jar。所以，10分，提前感谢。

xo。

编辑：感谢您的回复。我正在轮班工作并且被淹没了，但我明天会测试和戳这些回复并提供更多信息。再次感谢。xo

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:44:30.517

检查您的 jar 文件是否具有以下结构（至少）

```
jarfile.jar
  |---------- swong
                |---------- Startup.class
  |---------- META-INF
                |---------- MANIFEST.MF 
```

似乎缺少“启动”类。也许你的 jar 只包含 .java 文件，而不是编译的类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T09:00:48.313

我在分发我的应用程序时遇到了同样的问题。有一种解决方案，您可以使用“java -jar AppName.jar”创建一个批处理文件，并要求用户双击该批处理文件来执行您的应用程序。我所做的是为您的应用程序提供 JRE 安装 exe（例如：jre_1.7.0）。现在创建一个批处理文件（install.bat），其中写入以下命令

jre_1.7.0 -> 这将在用户的电脑上安装 jre

设置路径="C\Program Files\Java\jre_1.7.0\bin"

java -jar yourAppName.jar

为什么我安装了 JRE，因为不同的人安装了不同的 JRE 版本。因此，这使得设置已安装 JRE 的 bin 文件夹的路径和调用“java -jar”命令变得困难。因此，您知道 JRE 安装将创建哪些文件夹，因此很容易设置路径并使用“java-jar”命令执行 jar 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:17:18.773

当您尝试使用不同的 Java Runtime Environment 然后 java7 启动 java7 编译的类时，此错误消息可能是错误的 java7 错误。您是否验证过，您的 .jar 是在其他测试机器上的 Java7 环境中启动的？有时会发生，您安装了不同版本的 JRE，您可能不确定实际启动的是哪一个。

要检查使用了哪个环境，您可以在注册表中检查以下值：HKEY_CLASSES_ROOT\jarfile\shell\open\command

这应该指向您最新的 JRE。或者，如果您还想与 java6 保持兼容，请在构建环境中定义适当的编译级别。

# android - Android：MapView - getMapCenter() 不准确？

> ID：10427860
> 
> 赞同：0
> 
> 时间：2012-05-03T08:40:09.087
> 
> 标签：android, android-mapview

我将尝试将我的问题分解为一个简单的示例。我试图画一个恰好位于视图中间的圆圈。为此，我在 Overlay 的 draw 方法中使用了以下代码：

* * *

```
GeoPoint mapCenter = mapView.getMapCenter();
Projection projection = mapView.getProjection();

int centerLat = mapCenter.getLatitudeE6();
int centerLong = mapCenter.getLongitudeE6();

Point pCircleCenter = new Point();

GeoPoint circleCenter = new GeoPoint(centerLat, centerLong);

projection.toPixels(circleCenter, pCircleCenter);

canvas.drawCircle(pCircleCenter.x, pCircleCenter.y, 30, testPaint); 
```

* * *

当我运行代码时，圆圈正好在屏幕的中间。当我垂直滚动时，它也停留在中间，但是当我水平滚动时，圆圈在滚动方向上略微移动。几个卷轴后，圆圈完全不在位置，而不是停留在中间。

（这只是我的问题的简化版本，但我需要以这种方式获得中间，而不是仅仅将其粘贴到视图的中间。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T01:32:43.503

一种选择是`ImageView`通过布局文件添加一个。

# ios - 我怎样才能让 NSSet 更容易保存在 CoreData 中？

> ID：10427863
> 
> 赞同：-1
> 
> 时间：2012-05-03T08:40:19.473
> 
> 标签：ios, xcode, core-data

我有 30 个房间，每个房间应该有 5 个相同的 RoomAttributes。

我在 Room 和 RoomAttributes 之间有多对多的关系。

我的解决方案是，创建 30 * 5 = 150 个 RoomAttributes 并为每个房间制作 NSSet 的 RoomAttributes。这是分配的工作。

我如何创建房间：

```
Raum *raum = [NSEntityDescription insertNewObjectForEntityForName:@"Raum" inManagedObjectContext:context];

raum.raumName = @"Main";
raum.etage = @"2\. Stock, Raum 1.203";
raum.beschreibung = @"Gut beleuchtet";
raum.raumpreis = [NSNumber numberWithDouble:210];
raum.raumname = @"Besprechungsraum"; 
```

我如何创建 RoomAttributes：

```
Raumattribute *attribute =[NSEntityDescription insertNewObjectForEntityForName:@"Raumattribute" inManagedObjectContext:context];
    attribute.attributname = @"Beamer";
    attribute.schalter = [NSNumber numberWithBool:NO];

    Raumattribute *attribute2 =[NSEntityDescription insertNewObjectForEntityForName:@"Raumattribute" inManagedObjectContext:context];
    attribute2.attributname = @"Behindertengerecht";
    attribute2.schalter = [NSNumber numberWithBool:NO]; 
```

我如何创建 NSSet：

```
NSSet *attributeFurRaum = [NSSet setWithObjects:attribute1, attribute2,nil];  
raum.raumattribute = attributeFurRaum; 
```

我怎样才能让这更容易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:50:31.450

**已编辑

啊，我明白了 - 对不起，我误解了原来的问题 - 编辑使它更容易。

为此，我将创建三个辅助方法

```
-(RaumAttribute*)roomAttributeWithName:(NSString *)name andSchalter:(BOOL)schalter
{
    Raumattribute *att =[NSEntityDescription insertNewObjectForEntityForName:@"Raumattribute" inManagedObjectContext:context];
    att.attributname = name;
    att.schalter = schalter;
    return att;
}

-(NSSet *)roomAttributes
{
    NSArray *atts = [@"Beamer,Behindertengerecht" componentsSeparatedByString:@","];
    NSMutableSet *roomAttributes = [NSMutableSet set];
    for(NSString *name in atts)
    {
        [roomAttributes addObject:[self roomAttributeWithName:name andSchalter:NO]];
    }
    return roomAttributes;
}

-(Raum *)raumFromDictionary:(NSDictionary *)details
{
    Raum *raum = [NSEntityDescription insertNewObjectForEntityForName:@"Raum" inManagedObjectContext:context];
    raum.raumName = [details valueForKey:@"raumName"];
    raum.etage = [details valueForKey:@"etage"];
    raum.beschreibung = [details valueForKey:@"beschreibung"];
    raum.raumpreis = [details objectForKey:@"raumpreis"];
    raum.raumname = [details objectForKey:@"raumname"];
    return raum;
} 
```

然后您可以将您的预定对象数据存储在 plist 或 JSON 中 - 将其解析为字典，然后执行如下操作：

```
NSArray *raumDictionaries = //code to get array of dictionaries from a plist or whatever  source
NSSet *raumAttributeSet = [self roomAttributes];
for(NSDictionary *raumDict in raumDictionaries)
{
    Raum *raum = [self raumFromDictionary:raumDict];
    raum.raumattribute = raumAttributeSet;
    //save context
} 
```

# objective-c - NSDictionary 从 API 拆分数据

> ID：10427865
> 
> 赞同：0
> 
> 时间：2012-05-03T08:40:21.913
> 
> 标签：objective-c, ios, xcode, api

我正在尝试将我在 NSDictonary 中的 json 数据拆分为我可以使用的较小部分，但是我似乎被卡住了。

我从我使用的 api 接收的数据是当前的公共交通数据。这是我收到的数据：

```
{
    Storingen =     {
        Gepland =         {
            Storing =             {
                Advies = "U kunt gebruikmaken van de omreisroute of de bussen reis tussen Alphen a/d Rijn en Gouda met de NS-bus reis vanaf zondag 29 april van Alphen a/d Rijn naar Gouda met de trein via Woerden reis tussen Leiden Centraal en Gouda via Den Haag Centraal";
                Bericht = "
\n        <p>
\n            <b>Wanneer: van zaterdag 28 april tot en met zondag 6 mei</b>
\n            <br/>
\n            <b>Oorzaak: door geplande werkzaamheden</b>
\n            <br/>
\n            <b>Advies: U kunt gebruikmaken van de omreisroute of de bussen</b>
\n            <br/>\treis tussen Alphen a/d Rijn en Gouda met de NS-bus<br/>\treis vanaf zondag 29 april van Alphen a/d Rijn naar Gouda met de trein via Woerden<br/>\treis tussen Leiden Centraal en Gouda via Den Haag Centraal<br/><br/><b>Extra Reistijd: een kwartier tot een half uur</b><br/></p>
\n    ";
                Oorzaak = "door geplande werkzaamheden";
                Periode = "van zaterdag 28 april tot en met zondag 6 mei";
                Traject = "Alphen a/d Rijn-Gouda";
                Vertraging = "een kwartier tot een half uur";
                id = "2012_apn_gd_28apr_6mei";
            };
        };
        Ongepland = "";
    };
} 
```

到目前为止，我有这个：

```
-(void)loadJson
{
    dispatch_async(kBgQueue, ^{
        NSData* data = [NSData dataWithContentsOfURL:kJsonURL];
        [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];
    });

}

- (void)fetchedData:(NSData *)responseData {
    NSError* error;
    NSDictionary *json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];
    NSDictionary *storingen = [json objectForKey:@"Storingen"];
    NSDictionary *gepland = [storingen objectForKey:@"Gepland"];

    NSLog(@"%@", json);

} 
```

目前，该 api 仅返回一个“Gepland”，计划中，“Storing”，故障。但是在保存时间可以有更多的功能。api 将其作为“存储”键中的数组返回。我的问题是，可以说，我怎样才能循环通过“存储项目并使用他们的数据来制作一个只有一个标签的表格视图和一个包含所有其他信息的详细视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:51:46.377

使用可以将字典中的数据用作表中的数据源。我认为你会得到一个带有 NSDictionaries 的 NSArray。所以它应该是这样的：

```
NSArray *storingen = [json objectForKey:@"Storingen"];

for (NSDictionary *storing in storingen ){
     NSString *advies = [storing objectForKey:@"Advies"];
} 
```

然而，JSON 和普通解析器的一个令人讨厌的部分是，如果只有 1 个中断（Een 存储是一个中断），您将获得一个 NSDictionary，否则如果有多个，您将获得一个 NSArray。你可以这样解决：

```
- (void)fetchedData:(NSData *)responseData {
    NSError* error;
    NSDictionary *json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];
    id storingen = [json objectForKey:@"Storingen"];
    NSDictionary *gepland = [storingen objectForKey:@"Gepland"];

    NSMutableArray *result = [[NSMutableArray alloc] init];

    if ([storingen isKindOfClass:[NSArray class]]) {
        result = storingen;
    }
    else {
        [result addObject:storingen];
    }
} 
```

现在， storageen 将始终是一个数组，您可以使用该数组在 UITableView 中显示它，例如

薇尔成功！

# java - GWTP Eclipse 插件生成空演示者

> ID：10427870
> 
> 赞同：0
> 
> 时间：2012-05-03T08:40:54.530
> 
> 标签：java, eclipse, gwtp

我正在尝试创建一个 GWTP 示例应用程序。有一个非常[好的截屏视频](http://www.youtube.com/watch?v=cC-Qh4q1lCI)，但我必须处理一个没有出现在那里的问题（但是，根据评论，更多的新手不得不处理错误）。我使用 Eclipse Helios 和[此处建议](http://code.google.com/p/gwt-platform/wiki/EclipsePlugin)的插件。我是否处理不兼容的版本？

当我生成 时，除了包字符串之外`WelcomePresenter`什么都没有。和中也没有添加任何内容。我尝试添加自己需要的所有内容，但这有点困难，因为，我尝试创建这个应用程序来了解 GWTP 的工作原理。`WelcomePresenter.java``WelcomeView.java``ClientGinjector.java``ClientModule.java`

有人可以提供所需的`WelcomePresenter.java`和（可以在截屏视频中看到`WelcomeView.java`其他两个类，所以这不是一个真正的问题）？`my.pack.client.gin`这种 Eclipse GWTP 插件行为的原因是什么？

我不确定这是否是操作系统的特殊问题，我尝试使用 Ubuntu 生成演示者。

**更新**：上次在 Eclipse 中使用 Ubuntu 安装 GWTP 插件时，我没有遇到这个问题，这很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:13:39.120

如果您想了解 GWTP，最好不使用 Eclipse 插件开始。这就像说您想学习 Java 并且您已经在使用 Eclipse。第一件事，从头开始。

要创建视图和演示者，只需按照[此处](http://code.google.com/p/gwt-platform/wiki/GettingStarted#Using_GWTP)的教程进行操作。如果您想要更多灵感，请查看完全有效的项目[示例。](http://code.google.com/p/gwt-platform/wiki/RunningGwtpSamples)它可以帮助您熟悉基本的 GWTP 概念。

如果您仍然坚持使用它们，请发布到目前为止的代码。

对于您在 Eclipse 插件中看到的错误，我建议直接在他们的网站上联系 GWTP 成员。我从来没有使用过他们的插件，所以我不知道它是如何工作的，潜在的问题是什么。

# build - 从属性文件中检索参数

> ID：10427875
> 
> 赞同：7
> 
> 时间：2012-05-03T08:41:15.557
> 
> 标签：build, automation, hudson, jenkins, jenkins-plugins

我有几个使用相同参数和参数值的 Jenkins 参数化作业。当我必须更改其中一个参数的默认值时，我需要检查所有这些作业并重新配置它们。

这个问题的一个简单解决方案是从配置文件（在主/工作区中）检索所有参数的选项，但我找不到足够的实现。

**我希望能够使用标准 Java 配置文件** *（格式为“key”=“value”）提供构建* **，然后在构建期间像其他所有参数一样引用这些参数。**

您知道合适的解决方案吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T11:08:36.303

使用[EnvInject 插件](https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin)从文件中读取参数作为*注入环境变量*构建步骤中的环境变量。问题是你不能轻易地覆盖它们。一种解决方案是将它与[Conditional BuildStep Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Conditional+BuildStep+Plugin)结合使用。然后，您可以定义一个默认为*false的布尔参数**OVERRIDE 。**只有当OVERRIDE*为*false*时，您才能有条件地运行*Inject*构建步骤。当您需要使用手动提供的值覆盖参数时（在自定义调用中运行作业）指定覆盖值并将*OVERRIDE*设置为*true*******.******

 **** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:27:13.943

我在我的 hudson 工作中使用 hudson 和 ant 并设置参数（客户）。然后，此参数是我用 ant 打开的属性文件的名称，如下所示：

```
<loadproperties> srcFile="${project.dir}/build/resources/${customer}.properties"/> 
```***

# ruby-on-rails-3 - Rails 3 - 路由和参数化名称

> ID：10427881
> 
> 赞同：0
> 
> 时间：2012-05-03T08:41:23.533
> 
> 标签：ruby-on-rails-3, routes, parameterized

我在我的模型中使用这个规则：

```
 def to_param
    "#{self.name.parameterize}"
  end 
```

在我的助手中：

```
 def articles_menu
    menu = '<ul>'
    Article.all.each do |article|
      menu += '<li>'
        menu += link_to "#{article.name}", article
      menu += '</li>'
    end
    menu += '</ul>'
    return menu.html_safe
  end 
```

但是当我去的时候`/articles/my-new-flat`，我会得到错误

```
ActiveRecord::RecordNotFound in ArticlesController#show

Couldn't find Article with id=my-new-flat 
```

还想念我别的东西，或者我的应用程序有什么问题吗？我虽然对于名称的参数化只需要在模型中设置规则...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:45:10.267

使用 FriendlyId gem 它有你需要的一切，这里是链接[https://github.com/norman/friendly_id/blob/master/README.md](https://github.com/norman/friendly_id/blob/master/README.md)

您的代码的问题是集线器下的 rails 试图通过“id”属性查询您的模型，而不是查询“name”属性。FriendlyId gem 为你想要的模型修补这个

# javascript - 客户端通过获取 JSON 请求侦听来自服务器的传入数据

> ID：10427882
> 
> 赞同：0
> 
> 时间：2012-05-03T08:41:26.493
> 
> 标签：javascript, jquery, json, get

我有一个客户端获取从服务器获取某些数据的 JSON 请求，只要有东西进入服务器（服务器有 10 秒的时间间隔侦听传入数据），客户端就会获取数据。

现在的问题是客户端得到的所有数据都在一个**队列**中，每个时间间隔后都一个接一个出来，所以每个时间间隔只显示一个数据。

我希望来自服务器的每个数据都应该独立于时间间隔显示。任何帮助表示赞赏！

```
function getRequest(i) {
        $.getJSON(
                '/nextdocument',
                function(data) {

                    console.log(data.documentID + data.description +
                                data.price + data.instanceId + data.errorMessage);
                }
        );
        setTimeout(function() {
            getRequest(i);
        }, 11000);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:46:22.937

您应该查看[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)，它只是“实时数据获取”的总称。这包含技术，如

*   轮询（你正在做的）
*   “守住线”（我忘记了正确的术语），服务器直到有新东西到达服务器才响应，从而模拟“推送”
*   使用 Flash 来利用它的流媒体功能

您还应该查看用于双向“推送”数据传输的[WebSockets](http://en.wikipedia.org/wiki/WebSocket)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-17T21:22:50.643

OP写道：

> 感谢您的建议，我已经通过以下代码解决了它：
> 
> ```
> function getRequest() {
>     $.ajax({
>         url: '/nextdocument',
>         type: 'GET',
>         async: true,
>         cache: false,
>         timeout: 11000, 
>         success: function(data) {
>             console.log(data.documentID + data.description +
>                         data.price + data.instanceId);
>             setTimeout(
>                     'getRequest()',
>                     1000
>             );
> 
>             data["ok"] = data.ok;
>             data["errorMessage"] = data.errorMessage;
>             $.ajax(
>                     {
>                         url: "/customerdone",
>                         data: JSON.stringify(data),
>                         processData: false,
>                         type: 'POST',
>                         contentType: 'application/json'
>                     }
>             )
>             //no document if no read in
>             if (data.ok == "false") {
>                 console.log(data.errorMessage);
>             }
>         }
>     })
> } 
> ```

# java - 从 URL 加载 xml 时设置超时？

> ID：10427884
> 
> 赞同：2
> 
> 时间：2012-05-03T08:41:29.957
> 
> 标签：java, xom

直接从 URL 加载 xml 时是否可以设置超时？

```
Builder parser = new Builder();
Document doc = parser.build("http://somehost"); 
```

这有时可能需要几分钟，并且能够直接在库中超时非常方便。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T09:16:22.733

您需要使用 build(InputStream inStream) api 而不是 build(String systemID)。

```
URL url = new URL("http://somehost");
con = url.openConnection();
con.setConnectTimeout(connectTimeout);
con.setReadTimeout(readTimeout);
inStream = con.getInputStream();
Builder parser = new Builder();
Document doc = parser.build(inStream); 
```

# javascript - 使用 kineticjs 进行交互式绘图

> ID：10427886
> 
> 赞同：7
> 
> 时间：2012-05-03T08:41:30.913
> 
> 标签：javascript, canvas, kineticjs

我想通过单击和拖动来绘制一个矩形。我怎样才能做到这一点 ？我必须将点击事件侦听器放在哪里？在舞台上还是在层上？我有以下代码，但它不起作用：

```
stage = new  Kinetic.Stage({...})
layer = new Kinetic.Layer({...})

stage.add(layer)

stage.on('click', function() {
   var pos  = stage.getMousePosition();
   var rect = new Kinetic.Rect({
       x: pos.x,
       y: pos.y,
       width: 10,
       height: 10,
   });
   layer.add(rect);
   layer.draw(); 
}) 
```

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-07T18:44:46.463

据我所知，在 kineticjs 的舞台上没有“点击”事件。你应该使用这样的东西：

```
stage.getContainer().addEventListener('mousedown', function(evt) {}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T16:17:18.207

链接到显示我一直在努力的小提琴：

[http://jsfiddle.net/robtown/SGQq7/22/](http://jsfiddle.net/robtown/SGQq7/22/)

它是一组使用 KineticJS 和 Sketch.js 的绘图工具

您需要选择“制作草图”以徒手绘制，然后选择“将草图复制到动力学”将您的草图复制到动力学阶段。选择“制作矩形”制作一个矩形。

我需要包含代码来发布此内容，因此这是您选择“制作矩形”按钮时的代码：

$('#makeRect').click(function (e) {

```
 followRect = new Kinetic.Rect({
                width: 120,
                height: 40,
                x: -200,
                y:-200,                    
                stroke: 'red',
                strokeWidth: 3
            });
            drawLayer.setVisible(true);

            drawLayer.add(followRect);
            drawLayer.draw();
            makeRect = true;
            drawLayer.on("mousemove", function (e) {
                if (makeRect) {
                    followRect.setX(e.x+5);
                    followRect.setY(e.y+5);
                    drawLayer.draw();
                }
            }); 
```

这将创建一个跟随鼠标的矩形，直到您单击画布，然后将矩形拖放到舞台的 Redlines 层中：

drawLayer.on("mousedown", 函数 (e) {

```
 //for (var f = 0 ; f < 1; f++) {
                //alert(e.length);
                if (makeRect) {
                    addToRedlineLayer(e.x, e.y);
                }
                //}
                    followRect.setX(-200);

                    drawLayer.setVisible(false);
                return;

            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T19:02:28.030

我遇到了完全相同的问题，Guilherme 的方法确实非常有效。

但是有一个简单的替代方法：创建一个与画布大小相同的透明 Rect（动态矩形）：

```
<script type='text/javascript'>//<![CDATA[ 
window.onload=function(){
    function writeMessage(messageLayer, message) {
        var context = messageLayer.getContext();
        messageLayer.clear();
        context.font = '18pt Calibri';
        context.fillStyle = 'black';
        context.fillText(message, 10, 25);
    }

    var stage = new Kinetic.Stage({
      container: 'container',
      width: 578,
      height: 200
    });
    var shapesLayer = new Kinetic.Layer();
    var messageLayer = new Kinetic.Layer();

    var rect = new Kinetic.Rect({
        x:0,
        y:0,
        width:stage.getWidth(),
        height:stage.getHeight(),
        stroke:0
    });

    rect.on('mousemove', function() {
        var mousePos = stage.getMousePosition();
        var x = mousePos.x;
        var y = mousePos.y;
        writeMessage(messageLayer, 'x: ' + x + ', y: ' + y);
    });

    stage.getContainer().addEventListener('mouseout', function(evt) {
        writeMessage(messageLayer, '');
    });

    shapesLayer.add(rect);

    stage.add(shapesLayer);
    stage.add(messageLayer);
}//]]>  
</script> 
```

当您将鼠标悬停在画布上时，上面的代码将打印鼠标的 x 和 y 位置（id 为“容器”的 div）。您当然需要在使用此代码之前加载 KineticJS 库。

# xampp - 如何在子目录中的 xampp localhost 中执行 mod_rewrite？

> ID：10427887
> 
> 赞同：0
> 
> 时间：2012-05-03T08:41:31.820
> 
> 标签：xampp

我是 htaccess 的新手，我在让 mod_rewrite 工作时遇到问题。

我正在尝试更改以下内容：

[http://localhost/login/sitepage.php?linklabel=editted](http://localhost/login/sitepage.php?linklabel=editted)

至

[http://localhost/login/sitepage/editted](http://localhost/login/sitepage/editted)

我在网上查看了很多解决方案，但没有一个有效。我已经使用了 phpinfo() 并加载了 mod_rewrite，并且我已经能够将用户定向到带有 htaccess 文件的 404.php 文件。

任何帮助都会非常感谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:56:31.440

# linux - 检查两个文件的一部分是否相等

> ID：10427888
> 
> 赞同：5
> 
> 时间：2012-05-03T08:41:33.043
> 
> 标签：linux, bash, diff

`diff`是否可以使用（或另一个简单的 bash 命令）检查两个文件的第一行是否相等？

[通常检查第一行/最后一行的相等性`k`，甚至是 i 到 j 行]

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T08:48:13.153

区分两个文件的前 k 行：

```
$ diff <(head -k file1) <(head -k file2) 
```

同样，要区分最后 k 行：

```
$ diff <(tail -k file1) <(tail -k file2) 
```

区分线 i 到 j：

```
diff <(sed -n 'i,jp' file1) <(sed -n 'i,jp' file2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T09:02:37.593

与上面的 dogbane 相比，我的解决方案似乎相当基本和初学者，但在这里都是一样的！

```
echo "Comparing the first line from file $1 and $2 to see if they are the same."

FILE1=`head -n 1 $1`
FILE2=`head -n 1 $2`

echo $FILE1 > tempfile1.txt
echo $FILE2 > tempfile2.txt

if diff "tempfile1.txt" "tempfile2.txt"; then
    echo Success
else
    echo Fail
fi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T10:39:48.980

我的解决方案使用[patchutils](http://cyberelk.net/tim/software/patchutils/)程序集合的[filterdiff](http://www.linuxmanpages.com/man1/filterdiff.1.php)程序。以下命令显示了 file1 和 file2 从行号 j 到 k 之间的区别：

```
diff -U 0 file1 file2 | filterdiff --lines j-k 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T08:50:45.370

下面的命令显示两个文件的第一行。

```
krithika.450> head -1 temp1.txt temp4.txt
==> temp1.txt <==
Starting CXC <...> R5x BCMBIN (c)  AB 2012

==> temp4.txt <==
Starting CXC <...> R5x BCMBIN (c)  AB 2012 
```

如果两个文件中的第一行相等，则下面的命令显示 yes。

```
krithika.451> head -1 temp4.txt temp1.txt | awk '{if(NR==2)p=$0;if(NR==5){q=$0;if(p==q)print "yes"}}'
yes
krithika.452> 
```

# gmail - 在可安装的 Google Marketplace 列表中包含 GMail 侧边栏小工具

> ID：10427890
> 
> 赞同：4
> 
> 时间：2012-05-03T08:41:37.900
> 
> 标签：gmail, google-apps, google-apps-marketplace, igoogle

我想构建一个可以在 Google Apps Marketplace 上列出的应用程序，以便组织管理员可以一键安装它。

该应用程序通过 Gmail 中的侧边栏与 Google 进行交互。我已经能够使用“通过 URL 添加小工具”GMail 实验室功能开始对此进行测试，但现在我想将它打包到管理员可以同时向所有用户推出的应用程序中。

[Google 的应用程序清单文档](https://developers.google.com/google-apps/marketplace/manifest)提到了如何添加上下文小工具，但没有提到边栏小工具。有没有人有在应用程序清单中添加侧边栏小工具的经验？

**我想嵌入的侧边栏示例：**

```
<Module>
  <ModulePrefs height="400" title="Mike's First Sidebar!">
    <Require feature="views"/>
    <Require feature="dynamic-height"/>
    <Require feature="settitle"/>
  </ModulePrefs>
  <Content type="html" view="home">
    <![CDATA[
      <h2>Todo:</h2>
          <ul>
             <li>Create a sidebar gadget</li>
             <li>Add it to an application</li>
             <li>List the application on the marketplace</li>
          </ul>
    ]]>
  </Content>
</Module> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T00:46:27.767

缺少文档仅仅是因为这不是受支持的功能。

# python - 阻止 Python 使用多个 cpu

> ID：10427900
> 
> 赞同：1
> 
> 时间：2012-05-03T08:42:39.270
> 
> 标签：python, multithreading, parallel-processing, cpu-usage

使用 python 运行脚本时出现问题。我没有在 python 中进行任何并行化，也没有调用任何 mpi 来运行脚本。我只是执行“python myscript.py”，它应该只使用 1 个 cpu。

但是，当我查看命令“top”的结果时，我发现 python 正在使用我几乎 390% 的 cpu。我有一个四核，所以 8 个线程。我不认为这有助于我的脚本运行得更快。所以，我想了解为什么 python 使用多个 cpu，并阻止它这样做。

有趣的是，当我运行第二个脚本时，那个脚本也占了 390%。如果我运行第三个脚本，它们每个的 cpu 使用率都会下降到 250%。前段时间我用matlab遇到过类似的问题，我解决的方法是用-singlecompthread启动matlab，但是不知道用python怎么办。

如果有帮助，我将在我的脚本中求解泊松方程（根本没有并行化）。

* * *

更新：我的朋友在他自己的电脑上运行代码，它只需要 100% cpu。我不使用任何 BLAS、MKL 或任何其他东西。我仍然不知道 400% cpu 使用率的原因是什么。SLATEC 库中有一个 fortran 算法，它解决了 Ax=b 系统。我认为那部分使用了大量的cpu。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:00:53.973

您的代码可能正在调用一些使用 C/C++/等的函数。下。在这种情况下，可以使用多个线程。

您是否正在调用任何仅将 python 绑定到一些更有效实现的函数的库？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:01:51.113

您的代码是否使用了 SciPy 或其他 Python 数字库，这些库与英特尔 MKL 或其他供应商提供的使用 OpenMP 的库相关联？如果底层 C/C++ 代码使用 OpenMP 并行化，则可以通过将环境变量设置为 1 将其限制为单个线程`OMP_NUM_THREADS`：

`OMP_NUM_THREADS=1 python myscript.py`

如果与相应的并行驱动程序链接（默认链接行为），英特尔 MKL 在许多地方（LAPACK、BLAS 和 FFT 函数）肯定是并行的，并且默认启动与可用 CPU 内核数量一样多的计算线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T10:13:40.037

您始终可以设置您的进程亲和性，使其仅在一个 cpu 上运行。在 Linux 上使用“taskset”命令，或在 Windows 上使用进程资源管理器。

这样，您应该能够知道您的脚本使用一个或多个 cpu 是否具有相同的性能。

# c++ - C++ 语义问题，const value_type 指向指针*

> ID：10427901
> 
> 赞同：0
> 
> 时间：2012-05-03T08:42:40.470
> 
> 标签：c++, arrays

我试图让这个 C++ 方法返回一个 b2Fixture 实例数组。它迭代了一系列 JRContact 实例，其定义如下：

```
struct JRContact {
    b2Fixture *fixtureA;
    b2Fixture *fixtureB;
    bool operator==(const JRContact& other) const
    {
        return (fixtureA == other.fixtureA) && (fixtureB == other.fixtureB);
    }
}; 
```

nb 我对 C++ 完全陌生，请毫不犹豫地提及我可能在该代码中所做的奇怪事情 ;-)

以下无法编译（MacOS 上的 XCode 编译器），请参阅注释中的错误：

```
id AbstractContactListener::getFixturesOfTypeCollidingWithFixture(b2Fixture *fix, int type){

    std::vector<b2Fixture> fixtures;

    std::vector<JRContact>::iterator ct;
    JRContact contact;

    for (ct = _contacts.begin(); ct != _contacts.end(); ct++){

        contact = *ct;

        if ( 
                ( (fix == contact.fixtureA) || (fix == contact.fixtureB) ) &&
                ( contactContainsType(contact, type) )
            ){

            if (fix == contact.fixtureA) {

                // error: Semantic Issue: Reference to type 'const value_type' (aka 'const b2Fixture') could not bind to an lvalue of type 'b2Fixture *'

                fixtures.push_back(contact.fixtureB);
            }

            else {

                // error: Semantic Issue: Reference to type 'const value_type' (aka 'const b2Fixture') could not bind to an lvalue of type 'b2Fixture *'
                fixtures.push_back(contact.fixtureA);
            }
        }
    }

    // error: Semantic Issue: No viable conversion from 'std::vector<b2Fixture>' to 'id'
    return fixtures;
} 
```

谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:47:13.747

改变 ：

```
std::vector<b2Fixture> fixtures; 
```

到 ：

```
std::vector<b2Fixture *> fixtures; 
```

关于返回类型，您可以将其更改为`void*`or`std::vector<b2Fixture *> *`并使用：`return &fixtures;`

但请注意，您的向量是本地的，因此分配它以不返回指向无效位置的指针。（当然记得在使用完后释放它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T08:46:19.517

目前还不清楚你想要做什么，但问题是你告诉编译器`AbstractContactListener::getFixturesOfTypeCollidingWithFixture`将返回 an`id`而你却返回一个`std::vector<b2Fixture>`.

从函数的名称来看，我猜您可能想要返回 a `vector`，因此将签名更改为：

```
std::vector<b2Fixture> AbstractContactListener::getFixturesOfTypeCollidingWithFixture
                                                      (b2Fixture *fix, int type) 
```

当您应该推送对象时，您也在向量中推送指针：

```
fixtures.push_back(*(contact.fixtureB)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T08:46:21.680

向量`fixtures`包含`b2Fixture`实例，但它`contact.fixtureA`是一个`b2Fixture*`.

任何一个：

*   取消引用它：

    ```
    fixtures.push_back(*(contact.fixtureA)); // Same for 'fixtureB'. 
    ```

    或者，

*   更改类型`fixtures`：

    ```
    std::vector<b2Fixture*> fixtures; 
    ```

函数返回类型与实际返回的内容之间也存在不匹配。如果要返回`fixtures`，请让返回类型与 的类型匹配`fixtures`。

# php - RecursiveDirectoryIterator + RecursiveIteratorIterator + RegexIterator 无法正常工作

> ID：10427904
> 
> 赞同：1
> 
> 时间：2012-05-03T08:42:57.227
> 
> 标签：php, tree, iterator, subdirectory

我喜欢在带有子目录的目录中获取所有 .less 文件。[我在php.net](http://www.php.net/manual/en/class.recursivedirectoryiterator.php#97228)找到了这个好看的代码。

难道我做错了什么？有什么改变吗？例子错了吗？看起来第一个找到了 .less.bak 文件。

```
$Directory = new RecursiveDirectoryIterator( CHILD_DIR . '/less' );
$Iterator = new RecursiveIteratorIterator( $Directory );
$Regex = new RegexIterator($Iterator, '/^.+\.less$/i', RecursiveRegexIterator::GET_MATCH);

print_r( $Directory  );
print_r( $Iterator  );
print_r( $Regex  ); 
```

输出如下：

```
RecursiveDirectoryIterator Object
(
    [pathName:SplFileInfo:private] => /var/www/secret/wayne/wp-content/themes/bootgen_child/less/bootgen_layout.less.bak
    [fileName:SplFileInfo:private] => bootgen_layout.less.bak
    [glob:DirectoryIterator:private] => 
    [subPathName:RecursiveDirectoryIterator:private] => 
)
RecursiveIteratorIterator Object
(
)
RegexIterator Object
(
    [replacement] => 
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:30:50.697

评论并没有在这句话中说出全部真相

> $Regex 将为每个 PHP 文件包含一个索引数组。

你实际上需要迭代`$Regex`，因为转储不会给你一个通常的数组

```
foreach($Regex as $file) {
  var_dump($file);
} 
```

# php - uploadify 上传后返回一个值

> ID：10427906
> 
> 赞同：0
> 
> 时间：2012-05-03T08:42:59.357
> 
> 标签：php, mysql, uploadify

我想要做和实现的是：

1.  我想在用户注册期间上传图片。假设，我有一个接受输入作为名称和输入文件上传（上传按钮）和保存按钮的表单。

上传.php

```
$targetFolder = 'uploads';
if (!empty($_FILES)) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetPath = $targetFolder;
    $targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];

    // Validate the file type
    $fileTypes = array('jpg','jpeg','gif','png'); // File extensions
    $fileParts = pathinfo($_FILES['Filedata']['name']);

    if (in_array($fileParts['extension'],$fileTypes)) {
        move_uploaded_file($tempFile,$targetFile);
        echo '1';
    } else {
        echo 'Invalid file type.';
    }
} 
```

Javascript

```
jQuery('#file_upload').uploadify({
        'swf'      : plug+'/uploadify-v3.1/uploadify.swf',
         'uploader' : plug + '/uploadify-v3.1/uploadify.php'
        // Put your options here
    }); 
```

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:05:05.607

您可以为此使用 3 个事件：

*   [http://www.uploadify.com/documentation/uploadify/onuploaderror/](http://www.uploadify.com/documentation/uploadify/onuploaderror/)
*   [http://www.uploadify.com/documentation/uploadify/onuploadsuccess/](http://www.uploadify.com/documentation/uploadify/onuploadsuccess/)
*   [http://www.uploadify.com/documentation/uploadify/onuploadcomplete/](http://www.uploadify.com/documentation/uploadify/onuploadcomplete/)

我建议您使用`onuploaderror`并更改您的 php 脚本的返回码以匹配，以便它只处理错误。

# c# - AppFabric 缓存 - 获取问题

> ID：10427908
> 
> 赞同：1
> 
> 时间：2012-05-03T08:43:02.820
> 
> 标签：c#, appfabric

我有两个客户端应用程序连接到 Windows Server AppFabric 集群（只有一个节点）。客户端 1 将具有日期时间字段的对象放入缓存（所有实体都在不同的 C# 类库项目中定义）。当我通过客户端 1**获取**此对象时，一切看起来都很好，但是当我通过客户端 2 检索相同的对象时，我将日期时间字段设置为 01-01-0001 00:00:00。**但是，如果我用[DataMember]**属性装饰 DateTime 字段，它就可以正常工作。有人可以告诉我发生了什么吗？

更新：Client1 是 WCF 服务，Client 2 是 ASP.NET 应用程序。使用的框架是4.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:49:27.617

AppFabric 序列化类型（使用`NetDataContractSerializer`）。如果该类型用 装饰`[DataContract]`，则只有标记为的成员`[DataMember]`才会被序列化。如果类型没有用 装饰`[DataContract]`，那么 IIRC 它默认为行为，即序列化字段 -在这种情况下`BinaryFormatter`它可能需要也可能不需要。`[Serializable]`

所以：听起来类型是数据合同，所以是的；你需要标记它`[DataMember]`- 否则它将假定全零值（`DateTime.MinValue`，又名 01-01-0001 00:00:00）

# c# - ListView 可见属性

> ID：10427912
> 
> 赞同：2
> 
> 时间：2012-05-03T08:43:32.080
> 
> 标签：c#, asp.net

我有一个搜索结果页面，其中列表视图可见属性始终`false`位于第一页加载，即使我将值设置`true`为如下所示。似乎线路被忽略了？首次加载时无法设置此属性是否有原因？

![在此处输入图像描述](../Images/ebafa17c4ac399dade92a637a7a6f398.png)

**编辑：**页面加载事件

```
protected void Page_Load(object sender, EventArgs e)
{
   if (!IsPostBack)
   {
      if (Request.QueryString["query"] != null)
      {
         _searchTerm = Request.QueryString["query"].ToString();
         GetSearchResults();
         txtSearchBox.Text = _searchTerm;
       }
    }
 } 
```

列表视图标记

```
<asp:PlaceHolder runat="server" ID="SearchResults" Visible="false">
 ...
<asp:ListView id="lvSearch" runat="server">
    <LayoutTemplate>
        <ul id="SearchResultsList">
            <asp:PlaceHolder runat="server" ID="itemPlaceholder"></asp:PlaceHolder>
        </ul> 
    </LayoutTemplate>
    <ItemTemplate>
        <li class="searchResult">
            <h2><%#DataBinder.Eval(Container.DataItem, "Title")%></h2>
            <p><%#DataBinder.Eval(Container.DataItem, "HighlightedPreview")%></p>
            <a href="<%#DataBinder.Eval(Container.DataItem, "URL")%>"><%#DataBinder.Eval(Container.DataItem, "URL")%></a>
        </li>
    </ItemTemplate>
</asp:ListView>
<div runat="server" id="NoResults" visible="false">
    <p>The current search has returned no results. Please enter another search term in the box above.</p>
</div>
</asp:PlaceHolder> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:08:14.080

检查它是否不在 DIV-NoResults 或其他不可见的容器中。

# google-maps - 谷歌地图事件监听器

> ID：10427915
> 
> 赞同：4
> 
> 时间：2012-05-03T08:43:38.540
> 
> 标签：google-maps, google-maps-api-3

我的事件监听器有问题。我在“地图”中创建了“点击”事件侦听器，每次用户点击地图时都会创建一个新标记。每个标记都有自己的信息框，其中包含删除标记的链接。

问题是当我单击信息框中的删除链接时，总是会触发地图的单击事件。标记已成功删除，但它会创建一个新标记。我怎样才能解决这个问题？我只想删除标记。

这是代码：

```
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #map_canvas { height: 100% }
</style>

<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=123456778&sensor=true"></script>
<script type="text/javascript" src="infobox.js"></script>
<script type="text/javascript">
    var map;
    var markers = [];
    var infowindows = [];
    var marker_cnt = 0;
    var marker_icons = { 'mall' : 'mall.png', 'train_station': 'train.png','park' : 'park.png', 'bank':'bank.png'};
    var infoWindow;

    var places = [
                    ['Central','mall',1.2892612468505713,103.84759068489075,'central mall'] ,
                    ['Dhoby Ghaut','train_station',1.298550049775337,103.84589552879333,'Dhoby Ghaut'] ,
                    ['Outram Station', 'train_station',1.2812595487889478,  103.83896470069885,'Outram Station'],
                    ['City Hall', 'bank',   1.2932084559435784, 103.85241866111755,'City Hall Station'],
                    ['Little India Station', 'train_station',   1.3071308997488136,     103.84971499443054,'Little India Station'],
                    ['Emily Park', 'park',  1.3071308997488136,     103.84971499443054,'Emily Park']                        
                ];

    var myOptions = {
         content: 'loading...'
        ,boxStyle: { 
          background: "#ccc"
          ,opacity: 1
          ,width: "280px"
          ,height: "100px"
          ,padding: "10px"
         }
        ,closeBoxMargin: "10px 2px 2px 2px"
        ,closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif"
        ,pane: "floatPane"
        ,enableEventPropagation: false 
    };

    var infowindow = new  InfoBox(myOptions);   
        google.maps.event.addListener(infowindow, 'click', function () {
            console.log('aaaa');
        }); 

    function initialize() 
    {
        var myLatlng = new google.maps.LatLng(1.2892826990902386,103.84409308433533);
        var myOptions = {
                zoom: 16,
                center: myLatlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                disableDefaultUI: true
            }

        map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

        google.maps.event.addListener(map, 'click', function(event){
            placeMarker(event.latLng,event.getPosition);
        });

        loadMarkers();
    }

    function loadMarkers()
    {
        for(var i = 0 ; i < places.length; i++)
        {
            var spot = places[i];
            var spot_latlng = new google.maps.LatLng(spot[2],spot[3]) ;

            var marker = new google.maps.Marker({
                map:map,
                draggable:false,
                position: spot_latlng,
                title: spot[0],
                icon: marker_icons[spot[1]],
                html: '<h1>'+spot[4]+'</h1>  <a href="http://www.google.com" target="_blank"> website </a>'
            });

            markers.push(marker);

            google.maps.event.addListener(marker, 'click', function () {
                infowindow.setContent(this.html);
                infowindow.open(map, this);
            }); 
        }
    }

    function unloadMarkers()
    {
        for(var i = 0; i < markers.length; i++)
        {
            markers[i].setMap(null);
        }
    }

    function setMapCenter(index)
    {
        var spot = places[index];
        var spot_latlng = new google.maps.LatLng(spot[2],spot[3]);
        infowindow.setContent(markers[index].html = spot[4]);
        infowindow.open(map, markers[index]);
        map.setCenter(spot_latlng);
    }

    function placeMarker(location,position) 
    {

        marker = new google.maps.Marker({
            map:map,
            draggable:true,
            animation: google.maps.Animation.DROP,
            position: location,
            html: '<a href="#" onclick="removeMarker('+ (markers.length) +')">delete marker</a> <br/> '+ location
         });

        markers.push(marker);
        google.maps.event.addListener(marker, 'click', function () {
            infowindow.setContent(this.html);
            infowindow.open(map, this);
        }); 

        google.maps.event.addListener(marker,'dragend',function(){

            var html_content = '<a  href="#">delete marker </a> <br/>'+ this.position;
            this.html=html_content;
            infowindow.setContent(this.html);
            infowindow.open(map,this);
        });

        google.maps.event.addListener(marker,'dragstart',function(){
            infowindow.close(map,this);
        });
    }

    function removeMarker(index)
    {
        markers[index].setMap(null);
        infowindow.close(map, markers[index]);
        infowindows[index].close();
        return false;
    }

</script>

<style type="text/css">
    html{
        font:12px Arial, Helvetica, sans-serif;
        color:#333;
        padding:0;
        margin:0;
    }
    .listmenu{
        height:300px;

    }

    .listmenu ul {
        margin: 0 0 5px 0;
        padding: 0 0 2px 0;
        list-style-type: none;
        width:185px;
    }

    .listmenu li a {
        color: #333;
        display: block;

        height: 16px;
        padding: 4px 0 4px 14px;
        text-decoration: none;
        font-weight:bold;
        background-color:#fff;
    }

    .listmenu li a:hover {
        background-color: #666;
        color:#fff;
    }
    </style>

<body onload="initialize()">

<div id="map_canvas" style="width:1000px; height:300px; border: 3px solid #666"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:12:31.977

将点击事件作为参数传递给 removeMarker()

```
 marker = new google.maps.Marker({
        map:map,
        draggable:true,
        animation: google.maps.Animation.DROP,
        position: location,
        html: '<a href="#" onclick="removeMarker('+ (markers.length) +',event)">\
                delete marker</a> <br/> '+ location
     }); 
```

然后您将能够停止事件的传播：

```
function removeMarker(index,event)
{   
    try{event.cancelBubble=true;}//IE
    catch(e){event.stopPropagation();}//others

    markers[index].setMap(null);
    infowindow.close(map, markers[index]);
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:00:57.760

谢谢回复。我已经解决了这个问题。我通过删除“onclick”并将javascript放置到href来修复它 `<a href='javascript: removeMarker(index)'> remove </a>`

# php - 未为登录用户显示表单

> ID：10427917
> 
> 赞同：0
> 
> 时间：2012-05-03T08:43:46.140
> 
> 标签：php, mysql, forms

请在我的脚本方面需要你的帮助。我正在尝试仅为已登录的用户在我的网站上的部分中发布对新闻项目的评论。如果没有，则会向他们显示登录或注册的链接，并且不会显示“发表评论”输入框。然后，当他们登录时，应该显示表单。

当他们未登录时，表单不会显示，但在他们登录时也不会显示表单。

请问哪里有问题。感谢您的时间和耐心。我很欣赏它。

```
 <?php 

if (!isset($_SESSION['username']))  {

echo "<a href=\"login.php\">Login</a>     OR <a href=\"register.php\">Register</      a> to make a comment" ; 
             }
             exit();
 ?>

  <?php

  if (isset($_POST['submit'])) {

     //process form

             }

           ?>
     Post A Comment <br/>  
      <form action="<?php echo $_SERVER       ['PHP_SELF']; ?>" method="post"> 
                    <textarea type="text"  name                  = "comment_body" title='Post A      Comment'  class='OpenInput_Text'  ></       textarea><br/> 
 <input type="submit" name="submit"      value="Post Comment"> 
 </form>  
 </div> 
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:45:19.783

您将需要开始您的会话。

代替

```
<?php 

if (!isset($_SESSION['username']))  { 
```

和

```
<?php 
session_start();
if (!isset($_SESSION['username']))  { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:47:54.327

.. 这是因为您正在退出脚本

```
exit(); 
```

我认为您想将其推上一行，以在用户未登录的情况下结束脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T08:50:27.630

移动`exit()`内部`if (!isset($_SESSION['username'])) { ... }`而不是之后。

# python - django ORM可以处理条件mysql语句吗

> ID：10427919
> 
> 赞同：0
> 
> 时间：2012-05-03T08:43:52.577
> 
> 标签：python, mysql, django, orm

我需要编写以下查询

```
SELECT id, name, (

                     CASE WHEN photo =  ''
                     THEN  'DEFAULT_PIC'
                     ELSE photo
                     END
                  ) AS image
       FROM admin_category 
```

ORM可以处理吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T08:48:22.823

它可以在模型中完成。

```
class Category(models.Model):
    ...

    @property
    def image(self):
        return self.photo or u'DEFAULT_PIC'

# usage
category.image 
```

# android - Android中的3D饼图

> ID：10427921
> 
> 赞同：4
> 
> 时间：2012-05-03T08:43:57.103
> 
> 标签：android, pie-chart

我想使用openGL for android app制作一个3D饼图，任何人都可以帮助我吗？我已经扩展了`GLSurfaceView`类和`GLSurfaceView.Renderer`接口，但我不确定如何使饼图的顶点绘制一个圆柱体。谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-15T18:09:26.193

这很简单：double ycount=45.0,ncount=0=35.0,zcount=20.0;
网页视图 w1; w1 = (WebView) findViewById(R.id.webpiechart); w1.getSettings().setJavaScriptEnabled(true); w1.loadUrl(" [http://chart.apis.google.com/chart?cht=p3&chs=400x150&chl=YES|NO|NOT_PARTICIPATED&chd=t](http://chart.apis.google.com/chart?cht=p3&chs=400x150&chl=YES|NO|NOT_PARTICIPATED&chd=t) :"+ycount+","+ncount+","+zcount);

注意：您需要互联网许可：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# java - Jackson - 反序列化为不同的类型

> ID：10427929
> 
> 赞同：0
> 
> 时间：2012-05-03T08:44:20.360
> 
> 标签：java, json, spring-mvc, polymorphism, jackson

使用 Jackson，我如何让一个应用程序使用一组类对 JSON 进行序列化/反序列化，但让另一个应用程序反序列化相同的 JSON 并加载这些类的不同实现？

我有一个（Spring MVC）Web 应用程序，它允许用户在脚本中定义步骤，然后将在客户端应用程序中执行。步骤可能是类似`ShowDialogStep`的，具有类似的属性`dialogText`，或`WaitStep`具有的属性`duration`。

客户端应用程序将从服务器加载步骤集合。但是，客户端实例化的类需要具有特定于执行的功能，例如`execute()`，在这种情况下，`WaitStep`它将跟踪等待的时间。显然，服务器端应用程序永远不需要知道这一点，并且在不那么琐碎的示例中，步骤的执行/更新逻辑涉及各种特定于客户端的依赖关系。

所以，回顾一下我需要：

*   将“原型”类映射到 JSON 的服务器应用程序；
*   客户端应用程序读取*相同*的JSON，但实例化特定于执行的类而不是“原型”类。

这是否可以在客户端映射器上配置，也许如果 JSON 是使用相对类名（而不是完全限定的）序列化的，那么可以将反序列化器配置为在不同的包中查找具有执行逻辑的实现在他们中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T16:17:54.157

您可以使用这种方法：

在服务器端：

```
@JsonTypeInfo(use=JsonTypeInfo.Id.NAME, 
      include=JsonTypeInfo.As.PROPERTY, property="@type")
class Prototype {
...
}

objectMapper.registerSubtypes(
            new NamedType(Prototype.class, "Execution"),
            ...
); 
```

然后它将序列化一个 Prototype 实例并添加一个 bean 类型：

```
{
  "@type" : "Execution",
  ...
} 
```

在客户端：

```
@JsonTypeInfo(use=JsonTypeInfo.Id.NAME, 
      include=JsonTypeInfo.As.PROPERTY, property="@type")
class Execution {
...
}

objectMapper.registerSubtypes(
            new NamedType(Execution.class, "Execution"), // the same name
    ....
);
objectMapper.readValue(....); // will be deserialized to an Execution instance 
```

# c# - WPF自定义控件指导——水平树

> ID：10427931
> 
> 赞同：0
> 
> 时间：2012-05-03T08:44:22.737
> 
> 标签：c#, wpf, wpf-controls

我被要求为我们需要的功能创建一个新控件，我真的在努力研究如何以通用和灵活的方式最好地实现这一点。

基本上，该控件与树视图非常相似，您可以在其中单击一个节点，然后其子项将出现在该节点下方。

对于这个控件，他们想要这样 - 当您单击一个节点时，它的子节点会显示在父容器的左侧，依此类推。

我已经用油漆做了一个快速（超级快速）的图表......（请不​​要笑，这太可怕了！:)）

![这就是它的样子](../Images/201829246bfde9670532ab6365ae7f5c.png)

因此，您应该从一个项目列表开始，然后逐步遍历所选项目的子项。

所以我的问题是真的，你从哪里开始这样的事情..？我对数据方面很好，但 XAML 确实让我感到困惑，它需要非常通用，以便它可以处理 100 个子面板

任何帮助都会很棒。

干杯。圣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:01:27.023

如果您在设计时关注用户控件和已知绑定 - 这很容易，但作为自定义控件 - 我对好的答案非常感兴趣

![在此处输入图像描述](../Images/445394ab14af027336510f119bc5fba6.png)

就像我说的，如果你知道集合绑定和子级，这很容易做到。但它可能是获得自定义控件的开始。

```
<UserControl>
<UserControl.Resources>
    <Style x:Key="{x:Type ListBox}" TargetType="{x:Type ListBox}">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="ItemContainerStyle">
            <Setter.Value>
                <Style TargetType="ListBoxItem">
                    <Setter Property="VerticalContentAlignment" Value="Stretch"></Setter>
                </Style>
            </Setter.Value>
        </Setter>
        <Setter Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <UniformGrid Columns="1"/>
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <DataTemplate DataType="{x:Type local:TreeItems}">
        <Grid VerticalAlignment="Stretch">
            <Border BorderBrush="Black" BorderThickness="1" >
                <TextBlock Margin="5" Text="{Binding Name}"/>
            </Border>
        </Grid>
    </DataTemplate>
</UserControl.Resources>
<StackPanel Orientation="Horizontal">
    <ListBox x:Name="root" ItemsSource="{Binding}"></ListBox>
    <ListBox x:Name="Lvl1" ItemsSource="{Binding ElementName=root, Path=SelectedItem.Childs}" />
    <ListBox x:Name="Lvl2" ItemsSource="{Binding ElementName=Lvl1, Path=SelectedItem.Childs}" />
</StackPanel>
</UserControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:50:32.687

[Josh Smith 的这篇文章](http://www.codeproject.com/Articles/17025/Custom-TreeView-Layout-in-WPF)是一个很好的起点。

如果您只需要一个分层数据控件，则最好使用 a`TreeView`而不是滚动您自己的控件，因为它可能比您想象的要复杂（选择、键盘导航等）

# websphere - Websphere 7，使用 jython 的会话超时

> ID：10427932
> 
> 赞同：1
> 
> 时间：2012-05-03T08:44:30.317
> 
> 标签：websphere, jython

是否可以通过 jython 脚本设置应用程序会话超时（即图像）？

[http://prntscr.com/8t1n8](http://prntscr.com/8t1n8)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:51:00.473

在下面的代码片段中，更改节点名称和服务器名称以匹配您自己的名称。使用“invalidationTimeout”属性指定会话超时（在下面的示例中设置为 45 分钟），您也可以指定其他相关属性，如下所示。

```
server = AdminConfig.getid("/Node:was7host01Node01/Server:server1")
sms=AdminConfig.list("SessionManager",server)
AdminConfig.modify(sms,'[[tuningParams [[allowOverflow "true"] [invalidationTimeout "45"] [maxInMemorySessionCount "1000"]]]]')
AdminConfig.save() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:38:02.487

是的，您需要使用`AdminConfig`来创建这个对象序列：

1.  找到`WebModuleDeployment`适合您的模块。
2.  在 下查找或创建`WebModuleConfig`子对象`WebModuleDeployment`。
3.  在. `SessionManager`_`WebModuleConfig`
4.  在. `TuningParams`_`SessionManager`
5.  设置对象的`maxInMemorySessionCount`属性`TuningParams`。

我不精通 Jython，但下面的 Jacl 脚本应该可以做到这一点。如果您熟悉 WAS 中的 Jython 脚本，那么它应该很容易翻译。

```
set appName myApp
set modName myWeb.war
set maxInMemorySessionCount 1000

# Find the WebModuleDeployment.
set appDepl [$AdminConfig getid /Deployment:$appName/]
foreach webModDepl [$AdminConfig list WebModuleDeployment $appDepl] {
  set uri [$AdminConfig showAttribute $webModDepl uri]
  if {$uri == $modName} {
    # Find or create the WebModuleConfig.
    set webModCfg [$AdminConfig list WebModuleConfig $webModDepl]
    if {[string length $webModCfg] == 0} {
      puts "Adding WebModuleConfig to $webModDepl"
      set webModCfg [$AdminConfig create WebModuleConfig $webModDepl {}]
    }

    # Find or create the SessionManager.
    set sessionManager [$AdminConfig list SessionManager $webModCfg]
    if {[string length $sessionManager] == 0} {
      puts "Adding SessionManager to $webModCfg"
      set sessionManager [$AdminConfig create SessionManager $webModCfg {}]
    }

    # Find or create the TuningParams.
    set tuningParams [$AdminConfig list TuningParams $sessionManager]
    if {[string length $tuningParams] == 0} {
      puts "Adding TuningParams to $sessionManager"
      set tuningParams [$AdminConfig create TuningParams $sessionManager {}]
    }

    # Set the maxInMemorySessionCount parameter.
    puts "Setting maxInMemorySessionCount=$maxInMemorySessionCount in $tuningParams"
    $AdminConfig modify $tuningParams [list [list maxInMemorySessionCount $maxInMemorySessionCount]]
  }
}

$AdminConfig save 
```

# asp.net-mvc - 什么时候应该对 Asp.net MVC 视图进行单元测试

> ID：10427945
> 
> 赞同：0
> 
> 时间：2012-05-03T08:45:30.010
> 
> 标签：asp.net-mvc, unit-testing, view

假设您有一个项目，其中有许多开发人员在同一个 Asp.net MVC 应用程序上工作。项目是一个长期的项目，所以团队成员会随着时间而改变。这意味着在这段时间里，我们达到了某些观点似乎（完全）与其他观点不同的地步。标记明智。

为了随着时间的推移保持 UI 尽可能一致，假设最初的团队开发了一种流畅的 Html 辅助方法，用于创建通用视图结构。IE：

```
Html.CreateHeader("Header text")
    .CreateForm(Url.Action(...))
    .AddSegment("Person")
    .EditorFor(model => model.Person)
    .AddSegment("...")
    .EditorFor(model => model.Company)
    ... 
```

尽管这确实为日常 Asp.net MVC 视图代码添加了额外的抽象，但它使视图随着时间的推移保持一致。当然，当使用这些流利的助手时。

**但是**。尽管这些辅助方法中的每一个都可以进行单元测试，但我想知道测试视图本身有什么好处？

## 问题

1.  我的观点是你不会对任何静态的东西（即视图）进行单元测试。因此，除非视图具有丰富的客户端功能，否则不应测试任何内容。但如果是这样，您将使用 ie 测试 Javascript 代码。QUnit 库。这种想法是否正确，或者测试本质上是静态的东西真的有意义吗？我们只会测试某些元素及其内容的存在吗？

2.  可以测试视图的哪些其他方面以及为什么要测试它们？

> 在我的开发过程中，我注意到单元测试应该只对非平凡的代码进行。换句话说，至少有一个分支的方法应该被测试，而其他的方法足够长以至于即使没有分支也不完全清楚他们所做的事情。
> 
> 我倾向于避免为本质上微不足道的方法编写单元测试，因为它们除了消耗开发人员的时间之外没有任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:48:55.357

视图应该只呈现提供给它们的数据，因此无论如何都不应该有任何逻辑要测试。

在我看来，视图的“测试”属于集成测试。（检查一切看起来都不错，链接到正确的地方等）

# magento - 如何在特定类别中显示“比较产品”和“最近比较的产品”部分？

> ID：10427947
> 
> 赞同：0
> 
> 时间：2012-05-03T08:45:34.573
> 
> 标签：magento

我只想在特定类别（例如电子产品）中显示“比较产品”和“最近比较的产品”部分。而不是无处不在。

我怎样才能做到这一点？我应该更改代码还是只更改布局和如何？请建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:26:15.643

我的解决方案是修改模板（phtml 文件）

您必须处理 1）产品列表（也来自搜索）2）产品详细信息

这是 list.phtml 的一个例子

```
<ul class="add-to-links">
                    <?php if ($this->helper('wishlist')->isAllow()) : ?>
                        <li><a href="<?php echo $this->helper('wishlist')->getAddUrl($_product) ?>" class="link-wishlist"><?php echo $this->__('Add to Wishlist') ?></a></li>
                    <?php endif; ?>
                    <?php if($_compareUrl=$this->getAddToCompareUrl($_product)): ?>
                        <li><span class="separator">|</span> <a href="<?php echo $_compareUrl ?>" class="link-compare"><?php echo $this->__('Add to Compare') ?></a></li>
                    <?php endif; ?>
                </ul> 
```

我将把编写“添加到比较链接”的代码包装在一个 if（当前类别是电子产品）中，然后瞧

问候朱塞佩

# ms-access - 有什么理由在较小的 MDB 文件上运行 JETCOMP？

> ID：10427950
> 
> 赞同：0
> 
> 时间：2012-05-03T08:45:41.920
> 
> 标签：ms-access, jet

如果文件相对较小（即 0-200MB），是否有任何理由`JETCOMP.EXE`在文件上运行或任何其他压缩方法？`MDB`

我可以理解它是否接近大小限制（例如，对于某些较旧的 MDB 格式为 1GB），那么它是有道理的，但是还有其他需要吗？

运行 JETCOMP（或类似）失败会导致数据损坏问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:03:05.287

在任何大小的 Access 数据库上运行常规压缩是一种很好的做法，因为它有几个好处：首先是文件的大小，如果 200mb 左右不是问题，但不会受到伤害。如果您修改了任何表结构或添加了新表，它还将重新索引所有表，这一点尤其重要。它将重新评估任何查询以确保它们具有最快的执行计划。

就导致损坏的紧凑型故障而言，紧凑型所做的第一件事是创建原始文件的备份副本，这样如果它失败，您仍然可以恢复原始文件，因此您不应该遇到任何腐败问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:53:03.103

Access 数据库很容易出现数据损坏，尤其是当数据库通过网络共享时。不时地运行 Compact 和 Repair 以确保 DB 处于最佳状态不会有什么坏处。

# java - java中的linux shell脚本

> ID：10427951
> 
> 赞同：2
> 
> 时间：2012-05-03T08:45:42.540
> 
> 标签：java, linux, shell

我在 linux 中使用下面的 shell 代码我希望它在 Java 中实现。我想在 JAVA 中调用这个命令

```
mailq | grep -B1 -i temporarily | grep -iv deferred | \
egrep -i 'jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec' | \
awk -F" " '{print $1}' | awk '{print  substr($0,10,14)}' 
```

mailq 命令显示排队的邮件消息，其中有相应的 Id 和错误。就像在上面的命令中一样，我正在寻找其中包含暂时禁用消息的消息，并获取上面的消息，其中它的 id 出现在 ******* *09089 中，就像这样检查月份，而不是打印该 id 的最后 5 个字符

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:50:31.480

```
 String cmd = "mailq | grep -B1 -i temporarily | grep -iv deferred | "
              +"egrep -i 'jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec' |" 
              + " \'{print $1}\' | awk \'{print  substr($0,10,14)}\'";
    try
    {
      ProcessBuilder pb = new ProcessBuilder("bash", "-c", cmd);
      Process p = pb.start();
      p.destroy();
    }
    catch (Exception e)
    {e.printStackTrace();} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T08:51:11.403

这里 [http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T08:52:36.393

通常，此类问题在 java 中由“运行时”类处理。在这里[Runtime example java](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html) 你可以找到一个如何做到这一点的例子

较新的方法将使用 ProcessBuilder 类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T08:56:40.010

如果我理解正确的话，你想和这个 shell 命令做同样的事情，但是在纯 Java 中，而不是通过 Java 运行它。端口的优点之一是便携性。

我认为您希望[JavaMail](http://www.oracle.com/technetwork/java/javamail/index.html "JavaMail API")进行邮件访问。我不是这个 API 的专家，但我在一个小型[处理](http://Processing.org)程序中使用它来展示它的用法：[电子邮件草图](http://bazaar.launchpad.net/~philho/+junk/Processing/files/head:/_SmallPrograms/Email/)。

然后你需要过滤掉结果并隔离出你想要的部分，这并不难。

# lwuit - lwuit的唱片店

> ID：10427952
> 
> 赞同：2
> 
> 时间：2012-05-03T08:45:44.613
> 
> 标签：lwuit

LWUIT 是否有 j2me 记录存储的实现？

我制作了一个使用 j2me 记录存储的 lwit 应用程序。但是，我觉得使用 lwuit api 而不跳入 j2me api 将有助于使应用程序更便携。我对吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T00:23:34.517

是的，LWUIT 有一个唱片店。检查`Storage`LWUIT IO 的类，但这仅在 LWUIT 1.5 中可用。

是的，它会让它更便携。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:12:51.193

您可以为此使用 J2ME 记录存储，即 RMS 记录管理存储。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-18T11:45:32.770

RS 不需要 LWUIT

```
public static void writeDataToRecordStore(byte[] aData, final String aDir) {
    if (aData == null) {
        return;
    }
    RecordStore iRecord = null;
    try {
        iRecord = RecordStore.openRecordStore(aDir, true);
        if (iRecord.getNumRecords() > 0) {
            iRecord.setRecord(1, aData, 0, aData.length);
        } else {
            iRecord.addRecord(aData, 0, aData.length);
        }
    } catch (Exception ex) {

    } finally {
        if (iRecord != null) {
            try {
                iRecord.closeRecordStore();
            } catch (Exception ex) {
            }
            iRecord = null;
        }
    }
}

/**
 * Read data from Record Store
 *
 * @param aDir
 * @return
 */
public static byte[] readDataFromRecordStore(final String aDir) {
    RecordStore iReccord = null;
    try {
        iReccord = RecordStore.openRecordStore(aDir, false);
        if (iReccord.getNumRecords() > 0) {
            // Has data
            return iReccord.getRecord(1);
        }
    } catch (Exception otherEx) {
    } finally {
        if (iReccord != null) {
            try {
                iReccord.closeRecordStore();
            } catch (Exception ex1) {
            }
        }
    }
    return null;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-02T20:34:46.927

Lwuit 在 HTML 组件中使用 Record Store。而且我认为，使用记录存储与 LWUIT 无关。它们都是独立的功能。LWUIT 用于用户界面/视图，记录存储用于数据/模型。

# sql-server-2005 - 对表行进行分组并将结果连接到另一个表

> ID：10427953
> 
> 赞同：0
> 
> 时间：2012-05-03T08:45:45.353
> 
> 标签：sql-server-2005, join

我有这三个表：

**表格1 ：**

```
 InvoiceId         InvoiceNumber        CompanyId
    -------------------------------------------------
       3                   1                  2
       4                   2                  2
       6                   1                  1
       7                   3                  2
       8                   4                  2
       9                   2                  1 
```

**表 2：**

```
 CompanyId          CompanyName
    -------------------------------
       1                  Name1
       2                  Name2 
```

**表 3：**

```
 InvoiceId        AcceptDate       AcceptType
    ---------------------------------------------
       3                AAAA               O
       3                BBBB               P
       6                CCCC               P
       4                DDDD               O
       7                EEEE               O
       9                FFFF               P
       7                GGGG               P 
```

*表 1 和表 3 具有一对多的关系，表 3 具有多个链接的行。表 3 每个 InvoiceId 最多有 2 行。*

**任务**

我想对表 3 行进行分组以给出以下结果：

```
 InvoiceId       AcceptDate1      AcceptDate2
    --------------------------------------------
        3              AAAA             BBBB
        6              CCCC             null
        4              DDDD             null
      and .... 
```

然后将这些结果与表 1 和表 2 相结合，得出：

```
 InvoiceId     InvoiceNumber        AcceptDate1    AcceptDate2      Name
    --------------------------------------------------------------------------
       3               1                  AAAA           BBBB          Name2
       4               2                  DDDD           null          Name2
       7               3                  EEEE           GGGG          Name2
       8               4                  null           null          Name2
       6               1                  CCCC           null          Name1
       9               2                  FFFF           null          Name1 
```

AcceptDate1 和 AcceptDate2 是静态的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:19:29.977

你想要的是[Pivot the data](http://www.tsqltutorials.com/pivot.php)。

```
BEGIN TRAN

create table #table1 (InvoiceId int, InvoiceNumber int, CompanyId int)
create table #table2 (CompanyId int, CompanyName varchar(50))
create table #table3 (InvoiceId int, AcceptDate datetime, AcceptType char(1))
insert into #table1 values (3, 1, 2)
insert into #table1 values (4, 2, 2)
insert into #table1 values (6, 1, 1)
insert into #table1 values (7, 3, 2)
insert into #table1 values (8, 4, 2)
insert into #table1 values (9, 2, 1)
insert into #table2 values (1, 'Name1')
insert into #table2 values (2, 'Name2')
insert into #table3 values (3, '2012-01-01', 'o')
insert into #table3 values (3, '2012-01-02', 'p')
insert into #table3 values (6, '2012-01-03', 'p')
insert into #table3 values (4, '2012-01-04', 'o')
insert into #table3 values (7, '2012-01-05', 'o')
insert into #table3 values (9, '2012-01-06', 'p')
insert into #table3 values (7, '2012-01-07', 'p')

SELECT #table1.InvoiceId, #table1.InvoiceNumber, t.o as [AcceptDate1], t.p as [AcceptDate2], #table2.CompanyName
FROM #table3 pivot (max(AcceptDate) for AcceptType IN ("o", "p")) as t
JOIN #table1 on #table1.InvoiceId = t.InvoiceId
JOIN #table2 on #table2.CompanyId = #table1.CompanyId

ROLLBACK 
```

这给出了：

```
InvoiceId   InvoiceNumber AcceptDate1             AcceptDate2             CompanyName
----------- ------------- ----------------------- ----------------------- --------------------------------------------------
3           1             2012-01-01 00:00:00.000 2012-01-02 00:00:00.000 Name2
4           2             2012-01-04 00:00:00.000 NULL                    Name2
6           1             NULL                    2012-01-03 00:00:00.000 Name1
7           3             2012-01-05 00:00:00.000 2012-01-07 00:00:00.000 Name2
9           2             NULL                    2012-01-06 00:00:00.000 Name1

(5 row(s) affected) 
```

# jquery - Chrome 和 IE8 上的 jQuery 函数行为

> ID：10427960
> 
> 赞同：1
> 
> 时间：2012-05-03T08:46:05.570
> 
> 标签：jquery, html, css

我有这个函数，可以看到它在这个例子中是如何工作的。

jsfiddle 链接：http: [//jsfiddle.net/Ksb2W/74/](http://jsfiddle.net/Ksb2W/74/)

此功能在小提琴示例中效果很好，但如果我想从上面的小提琴示例中添加该功能，我的项目中的行为是不同的，我不明白为什么，因为我验证了 css 并且似乎没问题。该功能可以帮助我将鼠标悬停在鼠标悬停上并专注于单击内联显示的两个表格，并在描述较高并在多行的同一 td 中显示时计算 td 高度。在 IE 8 和 Chrome 上情况更糟。

这是我需要集成该功能的项目，主要延迟在表的第 14-15 行：http: [//mainpage.ueuo.com](http://mainpage.ueuo.com)

谢谢你。

# filtering - ZeroMQ 主题过滤与 Pub/Sub（Java 绑定）

> ID：10427962
> 
> 赞同：12
> 
> 时间：2012-05-03T08:46:16.960
> 
> 标签：filtering, publish-subscribe, zeromq

如何让 ZeroMQ 支持主题和模式匹配？

例如

```
stocks.*
stocks.appl 
```

根据我的理解 ZeroMQ ..主题将成为消息的一部分，因此我需要以某种方式将主题与订阅者中的实际消息分开。分离主题和消息的最佳方法是什么？您需要特殊字符（例如 SOH）吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T09:39:12.203

需要使用 pub/sub 信封

[Pub-Sub 消息信封](http://zguide.zeromq.org/page%3aall#Pub-Sub-Message-Envelopes)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-24T16:06:11.827

引用[http://zeromq.org/area:faq](http://zeromq.org/area%3afaq)：

> 我可以使用正则表达式或通配符订阅消息吗？
> 
> > 不，仅前缀匹配。

# c# - WiX 3.5 和 Visual Studio WiX 项目中的产品版本

> ID：10427968
> 
> 赞同：1
> 
> 时间：2012-05-03T08:46:34.400
> 
> 标签：c#, visual-studio-2010, wix, wix3.5

在另一个关于为 WiX 安装程序设置产品版本属性的问题中（[如何将 WiX 安装程序版本设置为当前构建版本？](https://stackoverflow.com/questions/626033/how-can-i-set-the-wix-installer-version-to-the-curent-build-version)），投票最多的答案（我已经尝试过并且有效）建议：

*“您可以使用`Product/@Version="!(bind.FileVersion.<FileId>)"`Light.exe 将使用 FileId 引用的文件版本填充该值。”*

...这很好，但在使用 WiX VS 项目的收获功能时，在 Visual Studio WiX 项目中显得有些脆弱，因为可执行文件的 FileId**可能会**发生变化。

[除了使用 FileVersion 预处理器扩展 ( http://wixfileversionext.codeplex.com/](http://wixfileversionext.codeplex.com/) )之外，还有更安全的方法可以从 Visual Studio 中自动生成的 .wxs 文件中引用特定文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:36:41.073

`-t`您可以通过 XSL 转换（的选项）运行生成的 .wxs 文件，该转换`heat.exe`将自动生成的文件 ID 替换为您选择的 ID。因此，您将能够从其他地方安全地引用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:11:49.673

我们使用我们的构建系统来控制所有版本，并将其作为 msbuild 属性传递给 WiX 项目。

```
<PropertyGroup>
    <version_major Condition=" '$(version_major)' == '' ">0</version_major>
    <version_minor Condition=" '$(version_minor)' == '' ">0</version_minor>
    <build_number Condition=" '$(build_number)' == '' ">0</build_number>
    <build_vcs_number Condition=" '$(build_vcs_number)' == '' ">0</build_vcs_number>
    <InstallerVersion>$(version_major).$(version_minor).$(build_number).0</InstallerVersion>
</PropertyGroup> 
```

并在 WiX 源代码中使用`Product/@Version="$(var.InstallerVersion)"`. 如果您的构建系统还控制二进制文件的版本控制，这将起作用。

# algorithm - 如何查找图循环中的哪些顶点

> ID：10427972
> 
> 赞同：1
> 
> 时间：2012-05-03T08:47:13.400
> 
> 标签：algorithm, graph, graph-algorithm

例如。对于 1->2、2->3、3->4、4->2，我想打印 2、3、4。我尝试了 DFS，当我找到之前访问过的顶点时，我去父级直到我不要得到这个顶点，但它不能很好地工作。有时它会进入无限循环。

运行dfs：

```
int i;
for (i = 0; i < MAX_VER; i += 1)
    if (ver[i].v == 0 && ver[i].nb > 0)
        dfs(i); 
```

dfs:

```
ver[v].v = 1;

int i;
for (i = 0; i < ver[v].nb; i += 1) {
    ver[ver[v].to[i]].p = v;

    if (ver[ver[v].to[i]].v == 0)
        dfs(ver[v].to[i]);
    else
        // cycle found
        printCycle(ver[v].to[i]);
} 
```

和打印周期：

```
printf("\cycle: %d ", v);

int p = ver[v].p;

while (p != v) {
    printf("%d(%d) ", p, v);

    p = ver[p].p;
}

printf("\n"); 
```

顶点结构：

```
int *to; // neighbor list

int nb; // how many neighbor
int p; // parent
short v; // was visited? 0 = false, 1 = true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:58:42.973

听起来您正在寻找“强连接组件” - 所以您很幸运，有一个众所周知的算法可以在图中找到这些。见[塔利安](http://en.wikipedia.org/wiki/Tarjan%27s_strongly_connected_components_algorithm)。

该算法在那篇文章中有很好的描述，但是有点冗长，所以我不会在这里粘贴。此外，除非您这样做是为了学习，否则使用现有的实现可能会更好，实现起来并不难，但也不*是**那么*容易。

**编辑**。看起来这个问题实际上是一个骗局......这让我很痛苦，但它可能需要关闭，抱歉。请参阅[在有向图中检测循环的最佳算法](https://stackoverflow.com/questions/261573/best-algorithm-for-detecting-cycles-in-a-directed-graph)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:02:32.787

您应该使用顶点着色来避免 DFS 中的无限循环。首先，所有顶点都标记为白色。当您第一次发现一个顶点时（它被标记为白色），您应该将它标记为灰色。如果你发现了一个灰色顶点，你会发现一个循环。

# powershell - Powershell：在 FileSystemAccessRule 中结合 ContainerInherit 和 ObjectInherit？

> ID：10427978
> 
> 赞同：4
> 
> 时间：2012-05-03T08:47:33.230
> 
> 标签：powershell, enums

我正在编写一个脚本，该脚本应该为文件夹及其所有内容设置文件系统访问权限。

要影响所有内容，包括子文件夹和文件，应根据 .NET 文档将 ContainerInherit 和 ObjectInherit 结合起来。但我无法让它工作，我不确定语法。

示例代码：

```
$ar = new-object System.Security.AccessControl.FileSystemAccessRule(New-Object System.Security.Principal.NTAccount($user),FullControl,ContainerInherit,InheritOnly,Allow) 
```

那会起作用，所以只能使用`ObjectInherit`，但是我怎样才能将它们结合起来呢？像这样使用引号和逗号是`"ContainerInherit,ObjectInherit"`行不通的，因为它显然不允许混合字符串和非字符串参数。

我也尝试过使用`-and`运算符，但这只会给我一个错误。将枚举分配给变量 ( `$inherit = ContainerInherit,ObjectInherit`) 也不起作用。

那么，关于如何做到这一点的任何提示？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T09:22:01.497

您可以使用 -bor 合并它们（类似于其他语言中的 |）。如另一个答案所示，使用逗号从字符串中解析它也可以。

我还更正了您的示例语法，这个示例应该可以工作。

```
$if=[Security.AccessControl.InheritanceFlags]
$fsr=[Security.AccessControl.FileSystemRights]
$pf=[Security.AccessControl.PropagationFlags]
$flags = [Security.AccessControl.InheritanceFlags]($if::ContainerInherit -bor $if::ObjectInherit)

$ar = new-object Security.AccessControl.FileSystemAccessRule ((New-Object System.Security.Principal.NTAccount($user)),$fsr::FullControl, $flags, $pf::InheritOnly, "Allow") 
```

但更简单的是只使用字符串：

```
new-object Security.AccessControl.FileSystemAccessRule ($user, "FullControl", "ContainerInherit,ObjectInherit", "InheritOnly", "Allow") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T09:09:36.283

我不在电脑前，但试试这个：

[System.Security.AccessControl.InheritanceFlags]'ContainerInherit,ObjectInherit'

# jquery - 停止在歌剧中工作的ajax请求

> ID：10427989
> 
> 赞同：0
> 
> 时间：2012-05-03T08:48:25.800
> 
> 标签：jquery, ajax, asp.net-mvc, opera

html:

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <title>TestGamePlay</title>
    <link href="/Content/Site.css" rel="stylesheet" type="text/css" >
    <script src="/Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="/Scripts/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script>
    <script src="/Scripts/jquery.validate.min.js" type="text/javascript"></script>
    <script src="/Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>

</head>
<body>

<div id="js1">
</div>
<span><a data-ajax="true" data-ajax-method="Post" data-ajax-mode="replace" data-ajax-update="#js1" href="/Kamikaze2/Start?cost=5&amp;gameId=84cada66-c01b-419d-9df3-620663a1dc8d">5</a></span> 
</body>
</html> 
```

控制器：

```
[AjaxOnly]
        public ContentResult Start(int cost, Guid gameId)
        {
return new ContentResult() { Content = "Start game" };
} 
```

仅 ajax 属性

```
public class AjaxOnlyAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (!filterContext.HttpContext.Request.IsAjaxRequest())
            filterContext.HttpContext.Response.Redirect("/");
    }

    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {

    }
} 
```

在 mozile 中一切正常。歌剧（v. 11.62）我重定向到“/”

可能是什么原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:19:40.123

我重新启动我的电脑，它工作

# android - android：胎儿异常问题：主要

> ID：10427990
> 
> 赞同：0
> 
> 时间：2012-05-03T08:48:28.567
> 
> 标签：android, zooming, drag

我从一本书中复制了这段代码并尝试运行它，基本上它在屏幕上绘制一个矩形，然后尝试对其应用缩放和拖动。但不幸的是它不起作用并给我胎儿错误。有什么问题？

这是代码：

```
public class DrawStuffActivity extends Activity implements
    OnTouchListener {

      MyView myView;
      int numberOfFingers = 0;
      float oldX[] = new float[2], oldY[] = new float[2];
      Rect rectangle = new Rect(0, 0, 100, 100);
      DisplayMetrics metrics = new DisplayMetrics();
      @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        myView = new MyView(this);
        setContentView(myView);
        myView.setOnTouchListener(this);
        getWindowManager().getDefaultDisplay().
          getMetrics(metrics);
      }
    public boolean onTouch(View view, MotionEvent event) {
        switch (event.getActionMasked()) {
        case MotionEvent.ACTION_DOWN:
          numberOfFingers = 1;
          oldX[0] = event.getX(0);
          oldY[0] = event.getY(0);
          break;
        case MotionEvent.ACTION_POINTER_DOWN:
          numberOfFingers = 2;
          oldX[1] = event.getX(1);
          oldY[1] = event.getY(1);
          break;
        case MotionEvent.ACTION_MOVE:
          handleMove(event);
          break;
        case MotionEvent.ACTION_POINTER_UP:
        case MotionEvent.ACTION_UP:
          numberOfFingers--;
          break;
        }
        view.invalidate();
        return true;
      }
    float newX[] = new float[2], newY[] = new float[2];
    int xChange[] = new int[2], yChange[] = new int[2];
    int diffX, diffY;
    int newLeft = rectangle.left, newTop = rectangle.top,
        newRight = rectangle.right,
        newBottom = rectangle.bottom;
    void handleMove(MotionEvent event) {
      newX[0] = Math.round(event.getX(0));
      newY[0] = Math.round(event.getY(0));
      xChange[0] = Math.round(newX[0] - oldX[0]);
      yChange[0] = Math.round(newY[0] - oldY[0]);
      oldX[0] = newX[0];
      oldY[0] = newY[0];
      switch (numberOfFingers) {
      case 1:

          newLeft = rectangle.left + xChange[0];
            newTop = rectangle.top + yChange[0];
            newRight = rectangle.right + xChange[0];
            newBottom = rectangle.bottom + yChange[0];
            if (newLeft < 0 || newRight > metrics.widthPixels) {
              newLeft = rectangle.left;
              newRight = rectangle.right;
            }
            if (newTop < 0 || newBottom > metrics.heightPixels) {
              newTop = rectangle.top;
              newBottom = rectangle.bottom;
            }
            rectangle =
                new Rect(newLeft, newTop, newRight, newBottom);
            break;
          case 2:
            newX[1] = Math.round(event.getX(1));
            newY[1] = Math.round(event.getY(1));
            diffX =
                Math.abs(Math.round(newX[1] - newX[0]))
                    - Math.abs(Math.round(oldX[1] - oldX[0]));
            diffY =
                Math.abs(Math.round(newY[1] - newY[0]))
                    - Math.abs(Math.round(oldY[1] - oldY[0]));
            oldX[1] = newX[1];
            oldY[1] = newY[1];
            newLeft = rectangle.left - diffX / 2;
            newTop = rectangle.top - diffY / 2;
            newRight = rectangle.right + diffX / 2;
            newBottom = rectangle.bottom + diffY / 2;
            rectangle =
                new Rect(newLeft, newTop, newRight, newBottom);
            break;
          }

    }

    // The handleMove method is in Listing 3-6.
      class MyView extends View {
        Paint whitePaint = new Paint();
        MyView(Context context) {
            super(context);
            whitePaint.setColor(Color.WHITE);
          }
          @Override
          public void onDraw(Canvas canvas) {
            canvas.drawRect(rectangle, whitePaint);
          }
        }
      } 
```

这是错误：

```
 05-03 08:40:57.597: E/AndroidRuntime(278): FATAL EXCEPTION: main
05-03 08:40:57.597: E/AndroidRuntime(278): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.allmycode.draw/com.allmycode.draw.DrawstaffActivity}: java.lang.ClassNotFoundException: com.allmycode.draw.DrawstaffActivity in loader dalvik.system.PathClassLoader[/data/app/com.allmycode.draw-1.apk]
05-03 08:40:57.597: E/AndroidRuntime(278):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
05-03 08:40:57.597: E/AndroidRuntime(278):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-03 08:40:57.597: E/AndroidRuntime(278):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-03 08:40:57.597: E/AndroidRuntime(278):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-03 08:40:57.597: E/AndroidRuntime(278):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-03 08:40:57.597: E/AndroidRuntime(278):  at android.os.Looper.loop(Looper.java:123)
05-03 08:40:57.597: E/AndroidRuntime(278):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-03 08:40:57.597: E/AndroidRuntime(278):  at java.lang.reflect.Method.invokeNative(Native Method)
05-03 08:40:57.597: E/AndroidRuntime(278):  at java.lang.reflect.Method.invoke(Method.java:521)
05-03 08:40:57.597: E/AndroidRuntime(278):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-03 08:40:57.597: E/AndroidRuntime(278):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-03 08:40:57.597: E/AndroidRuntime(278):  at dalvik.system.NativeStart.main(Native Method)
05-03 08:40:57.597: E/AndroidRuntime(278): Caused by: java.lang.ClassNotFoundException: com.allmycode.draw.DrawstaffActivity in loader dalvik.system.PathClassLoader[/data/app/com.allmycode.draw-1.apk]
05-03 08:40:57.597: E/AndroidRuntime(278):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
05-03 08:40:57.597: E/AndroidRuntime(278):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
05-03 08:40:57.597: E/AndroidRuntime(278):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
05-03 08:40:57.597: E/AndroidRuntime(278):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
05-03 08:40:57.597: E/AndroidRuntime(278):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
05-03 08:40:57.597: E/AndroidRuntime(278):  ... 11 more 
```

manifest.xml 似乎还可以：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.allmycode.draw"
    android:versionCode="1"
    android:versionName="1.0" >

  <uses-sdk android:minSdkVersion="3" android:targetSdkVersion="10" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".DrawstaffActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:54:36.817

对我来说很好。可能与您的项目设置有关。我刚刚创建了一个新项目并将您的代码复制到其中。一个可以移动的白色方块。

[编辑] 现在，当您发布 logcat 的其余部分时，更容易看到发生了什么。classnotfound 错误时有发生。我了解到解决它的最简单方法是创建一个新项目，并将代码移动到新项目中。

[再次编辑]

您的清单：.DrawstaffActivity 您的代码：DrawStuffActivity

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:11:23.560

`DrawStuffActivity`在`AndroidManifest`文件中注册您的活动类。

# maven - 如何使用具有依赖关系的maven uber pom？

> ID：10427991
> 
> 赞同：0
> 
> 时间：2012-05-03T08:48:35.910
> 
> 标签：maven, maven-2, pom.xml, parent-pom

我有一个简单的 maven 插件，它又依赖于父 pom 文件。父 pom 文件有十个（10 个）第 3 方 jar 依赖项，它们已使用以下命令安装在我的本地存储库中。

```
mvn install:install-file -Dfile=foo.jar -DgroupId=com.foo.bar -DartifactId=foo1.jar -Dversion=1.1.0.0 -Dpackaging=jar 
```

同样，我已将所有其他 9 个 jar 安装到我的本地仓库中。这是 uber pom.xml 文件。

```
<project>
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.foo.bar</groupId>
  <artifactId>maven-uber-pom</artifactId>
  <packaging>pom</packaging>
  <version>1.1.0.0</version>
  <name>maven-uber-pom</name>
  <url>http://maven.apache.org</url>
  <dependencies>
    <dependency>
      <groupId>com.foo.bar</groupId>
      <artifactId>foo1.jar</artifactId>
      <version>1.0.0.0</version>
    </dependency>
    <dependency>
      <groupId>com.foo.bar</groupId>
      <artifactId>foo2.jar</artifactId>
      <version>1.0.0.0</version>
    </dependency>
    <dependency>
      <groupId>com.foo.bar</groupId>
      <artifactId>foo3.jar</artifactId>
      <version>1.0.0.0</version>
    </dependency>
    <dependency>
      <groupId>com.foo.bar</groupId>
      <artifactId>foo4.jar</artifactId>
      <version>1.0.0.0</version>
    </dependency>
   :
   :
  </dependencies> 
```

我试图通过以下方式在我的插件的 pom.xml 文件中引用这个 uber pom：

```
<project>
  <parent>
    <groupId>com.foo.bar</groupId>
    <artifactId>maven-uber-pom</artifactId>
    <version>1.1.0.0</version>
  </parent> 
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.foo.bar</groupId>
  <artifactId>foo-maven-plugin</artifactId>
  <packaging>maven-plugin</packaging>
  <version>1.1.0.0</version>
  <name>foo bar plugin</name>
  <url>http://maven.apache.org</url>
</project> 
```

在此之后，我尝试使用 pom.xml 文件安装我的插件

```
mvn install                  <command> 
```

Maven 尝试从中央存储库[http://repo1.maven.org/maven2](http://repo1.maven.org/maven2)下载第 3 方工件依赖项，但随后失败。因为没有可以在中央回购中找到这样的坐标的工件。

自从我绝望以来，我也尝试过使用 uber-pom 作为插件依赖项。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:27:34.757

父 POM 中的 groupId 和对父 POM 的引用中的 groupId 不匹配。groupId、artifactId 和 version 必须完全匹配才能让 Maven 找到父级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T20:03:50.320

默认情况下，Maven 将首先在本地存储库中搜索依赖项。如果没有找到，它将搜索您的全局/自定义存储库（默认情况下仅设置中央存储库）。你`mvn install`在uberpom上跑过吗？如果是这样，请检查它在本地仓库中的路径是否正确。

我不确定您是否只是忘记将其适应您的示例，但是“uberpom”定义具有`com.foo.bar`groupId 并且您的插件上的用法具有`com.oracle.weblogic.test`. 不过，这可能是一个错字。我还假设您所有的第 3 方依赖项都已正确安装（检查他们的 pom）。

只是为了它，检查是否`<localRepository>`在您的 settings.xml 中设置。通常你不必设置它，但试一试。

我不是任何专家，但我希望它有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T01:25:20.707

尝试`mvn install -o`强制离线模式。Out 可能会指出问题所在。

当您运行 install-file 命令时，您是否指定了生成 pom 并生成校验和？

手动检查您的 Maven 存储库中的 jar 以查看它们是否正确安装。

# html - 如何仅使用锚标记和 css 制作此菜单而不使用 ul 和 li？

> ID：10427993
> 
> 赞同：-1
> 
> 时间：2012-05-03T08:48:39.593
> 
> 标签：html, css

如何仅使用锚标记和 css 制作此菜单而不使用 ul 和 li？

我在 Joomla 中有一个菜单，默认情况下使用`<ul> and <li>`标签创建菜单，我希望`<a>`仅使用标签来完成。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:07:58.340

使用这个 CSS：

```
a
{
 display: inline-block;
 width: 10px; // whatever size
} 
```

这将帮助您将标签显示为菜单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:10:59.987

试试这个......[我的例子](http://jsfiddle.net/chrismackie/xXRUr/)

# sql-server-2000 - 使用 Microsoft Sync Framework 和 SQL Server 2000

> ID：10427995
> 
> 赞同：0
> 
> 时间：2012-05-03T08:48:43.257
> 
> 标签：sql-server-2000, microsoft-sync-framework

是否可以将 Microsoft Sync 框架与 SQL Server 2000 一起使用？

我试过了，一种方法很好......从服务器到客户端。双向不工作。在客户端上所做的更改不会更新到服务器。

请让我知道是否需要在服务器端进行任何更改才能使其正常工作。

谢谢卡提克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:50:23.777

我假设您使用了本地数据库缓存向导，并且您只需将同步方向更改为双向...

仅更改同步方向是不够的...尝试此处的步骤：[演练：扩展本地数据库缓存以支持双向同步](http://msdn.microsoft.com/en-us/library/cc761546.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:57:36.330

根据[MSDN 上的 Microsoft Sync Framework](http://msdn.microsoft.com/en-us/library/cc281959%28v=sql.100%29.aspx)：

> *ADO.NET 的同步服务通过以下方式支持数据库：*
> 
> *在脱机方案中，客户端数据库必须是 SQL Server Compact 3.5 版本 3.5 或更高版本。服务器可以是任何有 ADO.NET 提供程序可用的数据库。*
> 
> *在协作方案中，每个对等数据库必须是**SQL Server 2000 Service Pack 4**或更高版本。*

那么：您是否安装了 SQL Server 2000 的 SP4？

# php - jquery ajax 成功函数只工作一次

> ID：10427997
> 
> 赞同：0
> 
> 时间：2012-05-03T08:48:53.667
> 
> 标签：php, jquery, ajax

我正在尝试实现一个利用 jquery 的 post 功能动态更新数据库的表单。我意识到的是，在用户单击“更新”按钮后，成功函数会被回调，并显示“更新成功”消息。

我对 stackoverflow 世界的问题是为什么在随后的点击中（不刷新页面）我没有收到同样的成功消息。此外，具有讽刺意味的是，我的数据库正在更新，所以我知道 AJAX 调用正在通过。

我在下面发布了我的代码：

JS

```
var TEAM = { 
update: function() {

    var form_data = $('form').serialize();
    $.ajax({
        type: "POST",
        url: "../manager/edit_team.php",
        data: form_data,
        error: function() {
            $('#status').text('Update failed. Try again.').slideDown('slow');
        },
        success: function() {
            $('#status').text('Update successful!');
        },
        complete: function() { 
            setTimeout(function() {
                $('#status').slideUp('slow');
                }, 3000);
        },
        cache: false
    });
}
}

// jQuery Code for when page is loaded
$(document).ready(function()
{
 $("#update").on("click", function() {
     TEAM.update();
 });
 }); 
```

PHP（我也欢迎任何其他评论）

```
require '../includes/config.php';
include '../includes/header.html';

// autoloading of classes
function __autoload($class) {
    require_once('../classes/' . $class . '.php');
}

// Site access level -> Manager
$lvl = 'M'; 

// Assign user object from session variable
if (isset($_SESSION['userObj']))
{
    $manager = $_SESSION['userObj'];
}
else 
{
    session_unset();
    session_destroy();
    $url = BASE_URL . 'index.php';
    ob_end_clean();
    header("Location: $url");
    exit(); 
}

// Establish database connection
require_once MYSQL2;

// Assign Database Resource to object
$manager->setDB($db);

// Authorized Login Check
if (!$manager->valid($lvl))
{
    session_unset();
    session_destroy();
    $url = BASE_URL . 'index.php';
    ob_end_clean();
    header("Location: $url");
    exit(); 
}

// Check for a valid game sch ID, through GET or POST:
if ( (isset($_GET['z'])) && (is_numeric($_GET['z'])) )
{
    // Point A in Code Flow
    // Assign variable from myteams-m.php using GET method
    $id = $_GET['z'];
}
elseif ( (isset($_POST['z'])) && (is_numeric($_POST['z'])) )
{
    // Point C in Code Flow
    // Assign variable from edit_team.php FORM submission (hidden id field)
    $id = $_POST['z'];
}
else 
{
    // No valid ID, kill the script.
    echo '<p class="error">This page has been accessed in error.</p>';
    include '../includes/footer.html';
    exit();
}

$team = new ManagerTeam();
$team->setDB($db);
$team->setTeamID($id);
$team->pullTeamData();

$flag = 0;
echo $flag . "<br />";
// Confirmation that form has been submitted:   
if ($_SERVER['REQUEST_METHOD'] == 'POST')
{   // Point D in Code Flow

    // Assume invalid values:
    $tname = FALSE;

    // Validate team name
    if ($_POST['tname'])
    {
        $tname = $_POST['tname'];

    }
    else 
    {
        echo '<p class="error"> Please enter a team name.</p>';
    }       

    // Validate about team information
    if ($_POST['abouttm'])
    {
        $abtm = trim($_POST['abouttm']);

    }
    else 
    {
        $abtm = '';
    }

    // Check if user entered information is valid before continuing to edit game
    if ($tname)
    {
        if($team->editTeam($tname, $abtm) == True)
        {
            echo '<p>Team was successfully updated</p>';
            $flag = 1;
        }
        else 
        {
            echo '<p>No changes were made</p>';
            $flag = 2;
        }
    }
    else
    {   // Errors in the user entered information
        echo '<p class="error">Please try again.</p>';
    }

}   // End of submit conditional.
echo $flag . "<br />";
// Point B in Code Flow
// Always show the form...

// Get team name attribute
$team->pullTeamData();
$teamname = $team->getTeamAttribute('tmname');
$about = $team->getTeamAttribute('about');

if ($teamname != '') // Valid user ID, show the form.   
{
    // Headliner
    echo '<h2>Edit Team</h2>';

    // Create the form:
    echo '
    <div id="EditTeam"></div>
    <div id="Team">
        <fieldset id="TeamDetails">
            <legend>Edit Team</legend>
            <form method="post" id="information">
            <p id="status"></p>
            <input type="hidden" name="z" value="' . $id . '" />                
            <p>
                <label for="tname">New Team Name:</label><br/>
                <input type="text" name="tname" id="tname" size="10" maxlength="45" value="' . $teamname . '" />
            </p>
            <p>
                <label for="abouttm">Team Information:</label><br/>
                <textarea id="abouttm" name="abouttm" cols="30" rows="2">"' . $about . '"</textarea><br />
                <small>Enter something cool about your team.</small>
            </p>
            <p>
                <input type="hidden" name="id" id="id">
                <input type="button" value="update" id="update" />
            </p>
        </form>
        </fieldset>
    </div>';                

}
else 
{   //Not a valid user ID, kill the script
    echo '<p class="error">This page has been accessed in error.</p>';
    include '../includes/footer.html';
    exit();
}   

// Close the connection:
$db->close();
unset($db);

include '../includes/footer.html';
?> 
```

你会注意到我还定义了一个 $flag 来帮助调试，但具有讽刺意味的是，无论点击“更新”按钮的次数如何，它都会输出 0。所以没有迹象表明数据库正在更新，但是当我检查表时，它肯定是。

我感谢任何帮助或指示。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:08:53.670

**`#status`消息未显示，因为您已将其隐藏**，`slideUp()`要再次显示，您需要向`slideDown()`他们显示。

```
 success: function() {
        $('#status').text('Update successful!');
-ADD->  $('#status').slideDown('slow');
    },
    complete: function() { 
        setTimeout(function() {
            $('#status').slideUp('slow');
            }, 3000); 
```

执行方式与在错误处理程序中执行的方式相同：
`success: function(){`
`$('#status').text('Update successful!').slideDown('slow');`
`...`

好像你早就知道了，只是忘记了……

其他可能*有用*的方法是`stop()`确保在新动画开始时停止先前的动画，这在使用*长*超时/动画时尤其重要。
（有用=*可以防止其他可见性问题并确保消息不会开始跳进跳出*）
（长=*大约0,5-1,5秒或更长，如果在此期间可能发生其他事情，那么它很长...* )

例如，这将`clear fx queue`和： `finish running animation immediately``slideUp()`

```
$('#status').stop(true, true).slideUp('slow'); 
```

## 您还询问了对其他代码部分的建议

如果您至少两次使用相同的代码，或者如果它是可以重用的通用方法，请使其可重用：

```
function redirect_to( $page ) {
    session_unset();
    session_destroy();
    $url = BASE_URL . $page;
    ob_end_clean();
    header("Location: $url");
    exit(); 
}

if ($condition == true) {
    redirect_to( 'index.php' );`
} 
```

# css - 使用 element+element 定位多个以下元素

> ID：10427998
> 
> 赞同：1
> 
> 时间：2012-05-03T08:48:56.007
> 
> 标签：css, css-selectors

`<p>`我想要做的是使用以下代码针对多个目标：

```
h1+p
{
    margin-left: 20px;
}

h2+p
{
    margin-left: 27px;
}

h3+p
{
    margin-left: 35px;
} 
```

下面是我想要达到的效果：

![效果](../Images/c94eb49dbc87cd9e62393798ac27efbe.png)

问题是当有一个新`<p>`元素时，文本块显然会恢复到它的正常位置，没有边距，并且不再与标题内联。

（像这样）

![问题](../Images/9b553da763c5c3ce91442c816a0a73f6.png)

有没有更好的方法来解决这个问题？（或适用于该问题的一种）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T08:51:19.020

您可以通过使用通用的兄弟选择器而不是相邻的兄弟选择器来实现这*一点*：`~``+`

```
h1~p
{
    margin-left: 20px;
}

h2~p
{
    margin-left: 27px;
}

h3~p
{
    margin-left: 35px;
} 
```

但是，请注意这一点，特别是如果您的`h1`、`h2`和`h3`元素`p`都共享同一个父元素。由于样式级联的方式以及兄弟选择器的工作方式，`p`最后一个元素之后的所有`h3`元素都将获得 35 像素的边距，即使容器中的最后一个标题是`h1`or `h2`。

例如，如果你有这个 Markdown：

```
# 标题 1

段落

段落

## 标题 2

段落

段落

### 标题 3

段落

段落

## 标题 2

段落

段落

```

最后*四个*段落将有 35 像素的边距，包括最后两个段落`h2`，因为您的`h3~p`规则是级联顺序中的最后一个，并且所有元素共享同一个父级。这可能是也可能不是您想要达到的效果（我猜不是）。

恐怕没有纯粹的 CSS 解决方法；您将不得不使用 JavaScript 对呈现的标记进行后处理，以根据您的标题将类等添加到您的段落中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:04:04.370

这是你想要达到的目标吗？[http://jsfiddle.net/chrismackie/5DgNH/](http://jsfiddle.net/chrismackie/5DgNH/)