# StackOverflow 问答 11009000-11009999

# cocos2d-x - 在 Cocos2d Windows phone 中创建 Menutem

> ID：11009000
> 
> 赞同：0
> 
> 时间：2012-06-13T05:58:22.807
> 
> 标签：cocos2d-x

我想在单个 menuItem 中添加 Sprite 和 Label，两者都是可点击的，但在 C# 中，您不能从多个类扩展。

我从 menuItemLabel 类扩展并用 menuItemSprite 组合类。

但是当我点击标签时它工作正常，但 MenuItemSprite 没有响应点击事件。

如果有人知道此问题的解决方案，请回复此问题。

```
public class menuitem4 : CCMenuItemLabel
{
    public static menuitem4 itemwith(CCNode normal, CCNode selected, CCNode label, SelectorProtocol target, SEL_MenuHandler selector)
    {
        menuitem4 pRet = new menuitem4();
        pRet.a = CCMenuItemLabel.itemWithLabel(label,target, selector);
        Specie1Store sp = (Specie1Store)target;
        pRet.a.position = new CCPoint(500,100);
        sp.addChild(pRet.a);
        pRet.initWithLabel(label, target, selector);
        return pRet;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T03:43:40.190

您可以创建一个扩展 CCNode 的类并将 CCMenuItemImage 和 CCMenuItemLabel 添加为子项。

# javascript - 用 raphael js 绘制杆形圆柱体

> ID：11009002
> 
> 赞同：0
> 
> 时间：2012-06-13T05:58:23.140
> 
> 标签：javascript, raphael

我想用 raphael js 画一个杆状结构，给它渐变效果，这样它就会显示出 3-d 效果。但由于我只是一个初学者，我无法做到这一点。谁能建议我怎么做？谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T20:15:37.227

我会告诉你我所知道的。你会想用渐变填充你的对象。我做了几个矩形给你看。和他们一起玩，了解渐变填充的工作原理。这就是我所做的。:)

```
var paper = Raphael("holder");
paper.setSize(400, 400);
rect = paper.rect(25, 50, 25, 300).attr({fill: "180-#FFF:10-#f00:80-#000:95"});
rect = paper.rect(100, 50, 25, 300).attr({fill: "0-#FFF:10-#f00:80-#000:95"});
rect = paper.rect(175, 50, 25, 300).attr({fill: "90-#FFF:5-#f00:80-#000:95"}); 
```

填充中的第一个数字是填充的旋转。颜色后面的数字（例如#FFF:5）是偏移量。

这是一个类似的问题，有一些很好的答案/信息： [How to create gradient object with Raphael](https://stackoverflow.com/questions/575747/how-to-create-gradient-object-with-raphael)

# android - 如何在android中分配更多的本机内存？

> ID：11009004
> 
> 赞同：0
> 
> 时间：2012-06-13T05:58:32.213
> 
> 标签：android, memory-management

单击文本视图时，我正在尝试在我的应用程序中执行翻转动画。

这是我的应用程序的内存信息

```
** MEMINFO in pid 1497 [com.example.android] **
                native   dalvik    other    total
        size:    36372    11911      N/A    48283
   allocated:    24025     6903      N/A    30928
        free:      646     5008      N/A     5654
       (Pss):     3330     8732    21309    33371
(shared dirty):   1456     4100     3272     8828
(priv dirty):     3256     6828    19300    29384

Objects
       Views:        0        ViewRoots:        0
 AppContexts:        0       Activities:        0
      Assets:        2    AssetManagers:        2
Local Binders:       10    Proxy Binders:       15
Death Recipients:    1
OpenSSL Sockets:     0

SQL
        heap:        0       memoryUsed:        0
pageCacheOverflo:    0  largestMemAlloc:        0

Asset Allocations
zip:/data/app/com.example.android-1.apk:/resources.arsc: 17K 
```

我在 LogCat 中收到此错误

```
06-13 11:12:49.005: E/dalvikvm-heap(1497): 1200000-byte external allocation 
too large for this process. 
```

我认为它可能是因为我只有`646kb`免费的。但从原生内存“大小”可以推断，可以分配更多的原生内存。为什么虚拟机不分配更多内存？谢谢。

# c++ - 在 C++ WIN32 中识别后台进程并将其置于前台

> ID：11009009
> 
> 赞同：6
> 
> 时间：2012-06-13T05:59:05.770
> 
> 标签：c++, winapi

谁能告诉我如何识别特定的后台进程（即，已经运行的应用程序）并将其带到前台？例如，如果记事本应用程序在后台运行，当我运行我的 WIN32 应用程序时，它应该识别记事本应用程序并且记事本应该弹出或进入前台。

我尝试了 SwitchToThisWindow() 函数，但它的工作方式类似于 Alt+tab。它不会识别后台进程。

请建议我为此的演练指南..

谢谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T11:23:16.887

目前尚不清楚“后台进程”是什么意思，但这里有一些想法：

使用[EnumWindows](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633497(v=vs.85).aspx)获取桌面上的*所有*顶级 HWND。这将包括一堆你不想要的东西，你必须过滤掉。建议您使用 Spy++ 来查看 HWND 树的外观，以及您会在此处找到的 HWND 类型：

从这个集合中，您需要过滤掉或忽略不可见的 HWND（使用 IsWindowVisible 或检查 WS_VISIBLE 样式）。

还要过滤出设置了 WS_POPUP 的窗口——这些窗口包括工具提示、菜单弹出窗口、浮动工具栏等。

要过滤掉当前活动的窗口，（如果你还不知道的话）使用 GetGUIThreadInfo with idThread=0; GUIHREADINFO.hwndActive 返回活动窗口，因此任何不是它的顶级 HWND 都是非活动窗口。

如果您正在寻找最小化的窗口，您可以使用[IsIconic(hwnd)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633527(v=vs.85).aspx)检测到那些。

最后，当您找到一个您认为是“背景”的窗口时，您可以使用 GetWindowText 获取标题，或使用 GetWindowThreadProcessId 获取进程 ID。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T07:41:04.933

> 但是有什么方法可以识别后台进程

这是 Unix shell 的概念，Windows 没有。现在我有 10 个“后台”进程创建了不在前台的窗口，另外 50 个左右没有。它们都不是后台进程，它们都同样具有背景。您通常单击窗口的任务栏按钮或按 Alt+Tab 将其中一个切换到前台。或者在代码中调用 SetForegroundWindow()。

# c# - UNC 路径不适用于 .NET？

> ID：11009013
> 
> 赞同：8
> 
> 时间：2012-06-13T05:59:15.543
> 
> 标签：c#, .net, windows, disk-io

我正在运行一个非常简单的程序，它试图在同一台机器上的一个文件夹中列出文件，该文件使用 UNC 格式指定（如[http://msdn.microsoft.com/en-us/library/windows/中所述桌面/aa365247%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx)）：

```
 static string rootDir = @"\\?\d:\share\input"; `static void Main(string[] args)
{
    char[] invlidChars = Path.GetInvalidPathChars();
    foreach (char invChar in invlidChars)
    {
        if (rootDir.Contains(invChar.ToString()))
        {
            Console.WriteLine("InvChar - {0}", invChar);
        }
    }
    string[] matchFiles = Directory.GetFiles(rootDir);
}` 

但是 Directory.GetFiles() 不起作用并抛出 ArgumentException（当 - *path 是零长度字符串、仅包含空格或包含一个或多个由 InvalidPathChars 定义的无效字符*时抛出）。Console.Writeline() 不打印任何内容，这确认路径中没有无效字符。当我使用“\\UNC\?\d:\share\input”或“\\UNC\?\machinename\share\input”或“\\?\machinename\share\input”时，我得到了同样的异常。

"d:\share\input" 确实是一个共享文件夹。

有谁知道可能出了什么问题？

谢谢！

            回答 #1

赞同：9

时间：2012-06-13T06:41:57.787

问题是`\\?\`.NET 不支持 Windows API 约定。如果您仔细阅读您的链接中的链接`\\?\`并不表示 UNC 路径，而是 Windows API 的特殊约定：

对于文件 I/O，`\\?\`路径字符串的“”前缀告诉 Windows API 禁用所有字符串解析并将其后面的字符串直接发送到文件系统。

.NET 兼容的 UNC 格式将是`\\machinename\d$\share\input`. 有关更多信息，请参阅[此](https://stackoverflow.com/questions/6867463/is-there-a-net-api-to-return-the-equivalent-extended-path-string-of-a-given-pat)答案。

.NET 不支持它的原因很可能是扩展路径约定并非在所有平台上都可用，因此不能保证框架可以正常工作。

```

# android-notifications - 安卓：通知

> ID：11009014
> 
> 赞同：2
> 
> 时间：2012-06-13T05:59:19.060
> 
> 标签：android-notifications

我必须像在 iphone 类型 appicon 通知中那样制作 appicon 通知。我必须在 android 中以编程方式在我的应用程序图标上实现显示一些数据的小图像或纯图像的通知。所以，到目前为止，我已经尝试通过通知管理器实现，但是我无法在我的应用程序图标上实现任何通知图像。请向我建议一些在 android 中通过应用程序图标显示通知的可能方法。参考请提供 SMS Unread Count apk 的源代码。

# c# - 检查输入是否为数字且仅包含数字 0-9

> ID：11009017
> 
> 赞同：1
> 
> 时间：2012-06-13T05:59:56.133
> 
> 标签：c#, .net

我正在使用 C#。如何验证输入字符串是否为整数并且仅由数字 0-9 组成？

一个额外的要求是它应该总是由精确的 9 位数字组成；不多不少。

例如，

> 确定：118356737、111111111、123423141、
> 
> 错误：11a334356、1.2.4.535、1112234.222 等

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T06:02:23.860

您可以使用任一正则表达式：

```
string input = "123456789";
bool isValid = Regex.IsMatch(input, @"^\d{9}$"); 
```

或 LINQ：

```
string input = "123456789";
bool isValid = input.Length == 9 && input.All(char.IsDigit); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T06:03:33.440

**更新**。根据评论，您需要使用正则表达式来确保正确处理所有案例。

使用正则表达式检查正确的表达式

```
string inputStr = "";
if(Regex.IsMatch(inputStr, @"^\d{9}$");) 
{
 //now check for int
 int result;
 if(int.TryParse(inputStr, out result) 
 {
   //it IS an integer 
   //the result integer is in the variable result.
 }
} 
```

有关[int.TryParse()](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)的更多信息，请参见 msdn 。注意：double、float、long 等也有各自的`TryParse()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T06:04:12.270

您可以使用正则表达式来验证输入字符串。下面的模式匹配 9 个数字，第一个数字不应该是 0。

`^[1-9]\d{8}$`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T06:03:37.627

添加这个ajax控件

<

```
asp:FilteredTextBoxExtender ID="FilteredTextBoxExtender5" runat="server" TargetControlID="yourtextbox"
                                    FilterType="Custom, Numbers" ValidChars="." /> 
```

或在验证工具箱中使用正则表达式

```
<asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" ControlToValidate="TextBox1"
ErrorMessage="Please Enter Only Numbers" Style="z-index: 101; left: 424px; position: absolute;
top: 285px" ValidationExpression="^\d+$" ValidationGroup="check"></asp:RegularExpressionValidator> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-04T11:49:58.330

如果你想为小数点工作，试试这个

```
string input="12356";
bool valid= Regex.IsMatch(input, @"^[-+]?\d+\.?\d*$")); // returns true;

string input="123.456";
bool isValid= Regex.IsMatch(input, @"^[-+]?\d+\.?\d*$")); //returns true

string input="12%3.456";
bool isValid= Regex.IsMatch(input, @"^[-+]?\d+\.?\d*$")); //returns false 
```

[点击这里查看详细说明](http://codeissue.com/issues/i24e27059aec154/how-to-check-if-string-input-is-integer-or-not-in-c)

# csh - C Shell 无差别打印成功信息

> ID：11009020
> 
> 赞同：2
> 
> 时间：2012-06-13T06:00:03.600
> 
> 标签：csh

如果两个文件没有区别，我想检查如何打印成功消息。

例子

```
diff file1 file2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T06:05:04.807

shell 环境`$?`给出最后一个命令的结果。如果文件匹配，则为 0，如果文件不同，则为非 0。

```
diff file1 file2
if ($? == 0) then
    echo "Same"
else
    echo "Different"
endif 
```

如果您正在这样做，您可能需要考虑`diff -q`哪个只会返回结果代码而不将差异输出到标准输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T06:06:20.607

如果文件相同，则退出代码`diff`为零，如果文件不同，则退出代码为零，如果有错误，则退出代码为 2。用于`$?`检查最后一条命令的退出代码，或直接在`if`条件中使用该命令。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T06:09:28.353

您也可以使用 wc 检查输出的长度

# gwt - 如何强制从 gwt 中的建议框列表中进行选择

> ID：11009021
> 
> 赞同：1
> 
> 时间：2012-06-13T06:00:20.430
> 
> 标签：gwt, suggestbox

嗨

我们正在使用 gwt SuggestBox，它在用户开始输入此框中时显示建议。但是，最终用户有可能只是键入某些内容而不从列表中选择任何内容。

如果用户未从列表中选择任何内容，我们希望避免此用例并显示错误。

关于我们如何实施这一点的任何建议？真正的问题是如何获取当前显示的建议列表？我在SuggestOracle类中没有看到任何方法来获取列表？

那么，无论如何不触发另一个查询来获取当前显示的建议列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:32:22.230

监听`ValueChangeEvent`底层证券`TextBox`并检查该值是否与任何可选值匹配（您可以调用 SuggestOracle 并在它返回零个或多于 1 个结果时显示错误；如果它返回单个结果，您可能想要检查值是否相等）。

# .net - “选择前 1 1” VS “如果存在（选择 1”

> ID：11009022
> 
> 赞同：48
> 
> 时间：2012-06-13T06:00:29.257
> 
> 标签：.net, sql-server

我有一些 .NET 代码以适中的间隔检查是否存在 SQL 记录。我希望让这张支票尽可能“便宜”。

我想知道两个查询的特征：

```
IF EXISTS(SELECT 1
          FROM   BigTable
          WHERE  SomeColumn = 200)
  SELECT 1 AS FOUND
ELSE
  SELECT 0 AS FOUND 
```

VS

```
SELECT TOP 1 1
FROM   BigTable
WHERE  SomeColumn = 200 
```

它们都产生相似的执行计划。但是 SELECT TOP 1 1 似乎执行得更快：要解析的查询更少，当找不到记录时，它发送的管道更少。我还假设它在客户端运行得更快，因为我只需要检查记录计数，而不是编组 IF EXISTS 的返回值。

大多数性能优势都可以忽略不计。但是，如果两者始终返回相同的结果，那么为什么不选择*稍微*快一点的方法呢？

“SELECT TOP 1 1”是检查 .NET 中是否存在记录的最佳方式吗？

（我们使用 .NET 3.5，我试图避免使用 LINQ，因为它没有在应用程序的其他地方使用。我们还有一些正在迁移/重写的遗留 VB6 应用程序，因此它们可能也需要执行此操作。）

编辑：关于设计的更多细节。该记录是一个“标题”。当找到此标头时，还有另一个包含子记录的表将被读取/解析。没有记录是一件好事：没有工作要做。

EDIT2：缺少满足条件的记录会更频繁地发生。他们以零星的浪潮出现。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-13T06:14:54.093

我建议使用`IF EXISTS(SELECT * ...)`，除非这实际上会导致性能问题。它以比替代方式更好理解的方式表达了查询的*意图。*

*除非您确实需要*表中的行数，否则我会避免`COUNT(*)`（如在当前答案中） 。

 *如果您想要从结果中检查行数的“效率”，我可能会选择：

```
select 1 where exists(select * from BigTable where SomeColumn=200) 
```

这会产生与您的第二个查询相同的结果集（0 或 1 行）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-13T06:12:21.973

这是你想要的，而不是 IF 语句

```
 SELECT ISNULL(
     (SELECT TOP 1 1 FROM BigTable where SomeCol = 200), 0); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-02-06T20:21:53.607

根本没有区别，exists 甚至不会评估您语句的选择部分。所以，用你喜欢的那个。

```
declare @test table (name varchar(20))

-- comment out inserts for testing.
insert into @test (name) values ('bob the builder')
insert into @test (name) values ('bob the builder')

-- for giggles, put 1/0 here. You'll find that divide by zero error.
select 1 from @test

-- notice that you don't receive a divide by zero error.
-- the bit in the select portion is never executed, ever.
if not exists (select 1/0 from @test) select 'Yay!'
if     exists (select 1/0 from @test) select 'Boo!' 
```

事实上，您可以互换使用这些：

```
... select * ... 
... select 1 ... 
... select top 1 * ... 
... select top 1 1 ... 
... select 'John Jacob Jingleheimer Schmidt' ... 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-30T21:17:36.170

我肯定会选择第二个选项：

```
SELECT TOP 1 1
FROM   BigTable
WHERE  SomeColumn = 200 
```

即使 I/O 和 CPU 数量基本相同，执行计划也更简单高效。

* * *

## 回答 #5

> 赞同：-16
> 
> 时间：2012-06-13T06:06:32.113

不确定 SQL Server，但在其他数据库中，标准方法是：

```
SELECT COUNT(*) FROM BigTable where SomeCol = 200; 
```

实际效率取决于您的索引等。*

# ios - 如何用 backBarButtonItem 替换 leftBarButtonItem

> ID：11009023
> 
> 赞同：1
> 
> 时间：2012-06-13T06:00:33.490
> 
> 标签：ios, uinavigationcontroller

在 Interface Builder 中，我创建了一个视图作为 Storyboard 的一部分，它过去只显示在一个不同的上下文中（作为 UITabBarController 的视图）。

现在我想重用这个视图作为 UINavigationController 视图的一部分，但它通常可以正常工作。唯一的问题是，在 IB 中，我放置了一个按钮作为 leftBarButtonItem。因此，当我将同一个视图控制器推送到导航控制器的堆栈上时，它不会再自动放置 backBarButtonItem。

是否有关于如何处理这种情况的标准方法？我是否必须自己删除按钮，具体取决于视图控制器是 UITabBarController 还是 UINavigationController 的一部分？我想将按钮保留在 IB 中。因此，例如在 viewDidDisappear 上将 leftBarButtonItem 设置为 nil 只是一种帮助。这确实正确显示了 backBarButtonItem，但是当用户返回该屏幕时，我将不得不再次手动设置 leftBarButtonItem。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T06:15:20.963

然后尝试使用这个：

```
self.navigationItem.leftBarButtonItem = self.navigationItem.backBarButtonItem; 
```

# objective-c - 学习 NSBlockOperation

> ID：11009027
> 
> 赞同：19
> 
> 时间：2012-06-13T06:01:01.097
> 
> 标签：objective-c, ios, nsoperation, nsoperationqueue, nsblockoperation

我是块的忠实粉丝，但没有将它们用于并发。经过一番谷歌搜索，我拼凑出这个想法，将我学到的所有东西都隐藏在一个地方。目标是在后台执行一个块，完成后，执行另一个块（如 UIView 动画）...

```
- (NSOperation *)executeBlock:(void (^)(void))block completion:(void (^)(BOOL finished))completion {

    NSOperation *blockOperation = [NSBlockOperation blockOperationWithBlock:block];

    NSOperation *completionOperation = [NSBlockOperation blockOperationWithBlock:^{
        completion(blockOperation.isFinished);
    }];

    [completionOperation addDependency:blockOperation];
    [[NSOperationQueue mainQueue] addOperation:completionOperation];    

    NSOperationQueue *backgroundOperationQueue = [[NSOperationQueue alloc] init];
    [backgroundOperationQueue addOperation:blockOperation];

    return blockOperation;
}

- (void)testIt {

    NSMutableString *string = [NSMutableString stringWithString:@"tea"];
    NSString *otherString = @"for";

    NSOperation *operation = [self executeBlock:^{
        NSString *yetAnother = @"two";
        [string appendFormat:@" %@ %@", otherString, yetAnother];
    } completion:^(BOOL finished) {
        // this logs "tea for two"
        NSLog(@"%@", string);
    }];

    NSLog(@"keep this operation so we can cancel it: %@", operation);
} 
```

我的问题是：

1.  当我运行它时它可以工作，但我错过了什么......隐藏的地雷吗？我还没有测试过取消（因为我还没有发明一个长操作），但这看起来会起作用吗？
2.  我担心我需要限定我的 backgroundOperation 声明，以便我可以在完成块中引用它。编译器没有抱怨，但是那里潜伏着一个保留循环吗？
3.  如果“字符串”是一个 ivar，如果我在块运行时观察到它的键值会发生什么？或者在主线程上设置一个计时器并定期记录它？我能看到进步吗？我会宣布它是原子的吗？
4.  如果这按我的预期工作，那么它似乎是隐藏所有细节并获得并发的好方法。为什么 Apple 不为我写这个？我错过了什么重要的东西吗？

谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-06T05:17:00.490

我不是 NSOperation 或 NSOperationQueues 方面的专家，但我认为下面的代码要好一些，尽管我认为它仍然有一些警告。对于某些目的可能就足够了，但不是并发的通用解决方案：

```
- (NSOperation *)executeBlock:(void (^)(void))block
                      inQueue:(NSOperationQueue *)queue
                   completion:(void (^)(BOOL finished))completion
{
    NSOperation *blockOperation = [NSBlockOperation blockOperationWithBlock:block];
    NSOperation *completionOperation = [NSBlockOperation blockOperationWithBlock:^{
        completion(blockOperation.isFinished);
    }];
    [completionOperation addDependency:blockOperation];

    [[NSOperationQueue currentQueue] addOperation:completionOperation];
    [queue addOperation:blockOperation];
    return blockOperation;
} 
```

现在让我们使用它：

```
- (void)tryIt
{
    // Create and configure the queue to enqueue your operations
    backgroundOperationQueue = [[NSOperationQueue alloc] init];

    // Prepare needed data to use in the operation
    NSMutableString *string = [NSMutableString stringWithString:@"tea"];
    NSString *otherString = @"for";

    // Create and enqueue an operation using the previous method
    NSOperation *operation = [self executeBlock:^{
        NSString *yetAnother = @"two";
        [string appendFormat:@" %@ %@", otherString, yetAnother];
    }
    inQueue:backgroundOperationQueue 
    completion:^(BOOL finished) {
        // this logs "tea for two"
        NSLog(@"%@", string);
    }];

    // Keep the operation for later uses
    // Later uses include cancellation ...
    [operation cancel]; 
} 
```

您的问题的一些答案：

1.  **取消**。通常您将 NSOperation 子类化，以便您可以`self.isCancelled`更早地检查并返回。看到[这个线程](https://stackoverflow.com/questions/3859631/subclassing-nsoperation-to-be-concurrent-and-cancellable)，这是一个很好的例子。在当前示例中，您无法检查是否已从您提供的块中取消操作以进行操作，`NSBlockOperation`因为当时还没有这样的操作。在调用块时取消`NSBlockOperation`s 显然是可能的，但[很麻烦](https://stackoverflow.com/questions/8113268/how-to-cancel-nsblockoperation)。`NSBlockOperation`s 用于特定的简单情况。如果您需要取消，则最好进行子类`NSOperation`化:)

2.  我认为这里没有问题。虽然注意两件事。a）我更改了方法 do 以在当前队列中运行完成块 b）需要一个队列作为参数。正如@Mike Weller 所说，您应该更好地提供`background queue`，这样您就不需要为每个操作创建一个，并且可以选择用于运行您的东西的队列:)

3.  我想是的，你应该做`string` `atomic`. 您不应该忘记的一件事是，如果您向队列提供多个操作，它们可能不会按该顺序运行（必然），因此您最终可能会在`string`. 如果您需要一次连续运行一项操作，您可以执行以下操作：`[backgroundOperation setMaxConcurrentOperationCount:1];`在开始对操作进行排队之前。[不过，文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)中有一个值得阅读的说明：

    > **其他操作队列行为** 操作队列根据其优先级和准备情况执行其排队的操作对象。如果所有排队的操作对象具有相同的优先级并且在它们被放入队列时准备好执行——也就是说，它们的 isReady 方法返回 YES——它们将按照它们提交到队列的顺序执行。对于最大并发操作数设置为 1 的队列，这等同于串行队列。但是，您永远不应该依赖操作对象的串行执行。操作准备情况的更改可能会更改生成的执行顺序。

4.  我想在阅读这些行之后你就知道了:)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-13T07:22:17.960

您不应该`NSOperationQueue`为每个`executeBlock:completion:`呼叫创建一个新的。这很昂贵，并且此 API 的用户无法控制一次可以执行多少操作。

如果您要返回`NSOperation`实例，那么您应该让调用者决定将它们添加到哪个队列。但在这一点上，你的方法真的没有做任何有用的事情，调用者也可以`NSBlockOperation`自己创建。

如果您只是想要一种简单易用的方法来在后台分离一个块并在它完成时执行一些代码，那么您最好使用这些`dispatch_*`函数进行一些简单的 GCD 调用。例如：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    // do your background work
    // ...

    // now execute the 'completion' code.
    // you often want to dispatch back to the main thread to update the UI
    // For example:

    dispatch_async(dispatch_get_main_queue(), ^{
        // update UI, etc.
        myLabel.text = @"Finished";
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-27T08:59:23.417

不需要设置一个在完成时运行的块并添加这样的依赖项。`NSBlockOperation`就像所有`NSOperation`子类已经有一个[`completionBlock`](https://developer.apple.com/documentation/foundation/nsoperation/1408085-completionblock?language=objc)属性，它会在块完成工作时自动运行：

```
@property(copy) void (^completionBlock)(void); 
```

完成块在其块移动到`finished`状态时运行。

# jquery - 使用 jquery 验证电话号码

> ID：11009030
> 
> 赞同：1
> 
> 时间：2012-06-13T06:01:15.883
> 
> 标签：jquery, validation

我正在尝试验证电话号码。该网站位于美国，但客户可能来自世界各地。我正在使用 jQuery 来验证输入。我将非常感谢为验证提供的提示。谢谢。

```
<input 
     name="phone"  
     type="text" 
     id="phone" 
     minlength="7"
     maxlength="15" 
     style="
               font-family: Verdana;
               color:#FFFFFF;
               font-size: 13px;
               background-color: #0E0E0F;
               border: 1px solid #740086;
               width:385px;
               margin-bottom:10px;
           "
     size="385"
     value="Phone #"
     onfocus="if(this.value==this.defaultValue)this.value='';" 
     onblur="if(this.value=='')this.value=this.defaultValue;"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T06:08:57.370

用户 JQuery 验证引擎..它很简单..cool 和我见过的最干净的验证框架..`http://www.position-relative.net/creation/formValidator/` 这个插件已经处理了电话号码验证..如果这还不够，那么您可以添加自己的自定义正则表达式来执行验证.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T06:49:34.127

[http://www.phoneformat.com/](http://www.phoneformat.com/)

您可以使用此库进行验证。它还为您格式化数字。真正令人印象深刻的图书馆

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T06:08:33.180

电话号码因区域而异。解决这个问题的最简单方法是验证是否为空。但是，如果您确实需要验证电话号码，则必须考虑区号、区域并尝试要求用户不要输入任何特殊字符。例如，如果我想验证来自阿根廷布宜诺斯艾利斯的手机号码，我将使用至少 2 个输入字段：一个用于区号，一个用于实际号码。

[这里](http://blog.stevenlevithan.com/archives/validate-phone-number)给出了另一种解决方案

还有一个：询问用户国家代码（或从下拉列表中选择），然后是区号（可能是另一个下拉列表，尽管动态设置一个会很好，考虑到国家已经选择），然后输入另一个实际数字。不要尝试验证数字本身，而是要求用户不要输入任何特殊字符或空格，并检查是否输入了数字。但是，我认为这真的不值得付出努力。如果您真的需要用户的真实号码，您应该让某人拨打该号码并进行验证

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T06:14:56.143

首先，我推荐使用*标准的* [jquery 验证器插件](http://docs.jquery.com/Plugins/Validation)。它具有用于验证 URL、电子邮件甚至[美国电话号码](http://docs.jquery.com/Plugins/Validation/CustomMethods/phoneUS)等的内置*模板*。

下一个挑战是如何扩展验证器插件以验证*任何*电话号码。电话号码格式因地区而异，因此您可以将验证限制为可以接受的字符。例如，只接受数字 (0-9)、括号、破折号等。

然后，您可以将插件扩展为：

```
jQuery.validator.addMethod("phoneAny", function(phone_number, element) {
phone_number = phone_number.replace(/\s+/g, ""); 
return this.optional(element) || phone_number.length > 9 &&
    phone_number.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/); 
```

正则表达式与您接受的上述字符集相匹配。

# c# - ASPxGridView -“程序或函数‘可删除’需要参数‘@id’，但未提供。”

> ID：11009037
> 
> 赞同：1
> 
> 时间：2012-06-13T06:01:37.913
> 
> 标签：c#, asp.net, stored-procedures, devexpress

我正在使用 devexpress，我有两个问题。

我的插入存储过程工作正常。

我指定了`ASPxGridView.KeyFieldName`属性。

1.  问题在于`delete`存储过程。我得到错误`Procedure or function 'delete' expects parameter '@id', which was not supplied.`

2.  第二个问题是`update`存储过程。我得到错误`Procedure or function updatetable has too many arguments specified.`

我的源代码：

// sql脚本

```
USE [Data]
GO
/****** Object: StoredProcedure [dbo].[deletetable] Script Date: 06/12/2012 
17:11:07   ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- Batch submitted through debugger: SQLQuery3.sql|0|0|C:\Users\Ali\
AppData\Local\Temp\~vsBA26.sql
ALTER procedure [dbo].[deletetable]
@id int
as
delete from Tablo where id= @id

USE [Data]
GO
/****** Object: StoredProcedure [dbo].[updatetable] Script Date: 06/12/2012 
17:13:52 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- Batch submitted through debugger: SQLQuery5.sql|0|0|C:\Users\Ali
\Desktop\SQLQuery5.sql
ALTER procedure [dbo].[updatetablo]
@name VARCHAR(50),
@surname VARCHAR(50),
@job VARCHAR(50),
@age INT,
@id INT

as
UPDATE Table
set name= @name, surname= @surname, job= @job, age= @age
where (id= @id) 
```

//.aspx

```
<%@ Page Language="C#" AutoEventWireup="true" 
CodeBehind="devexpresskullanimi.aspx.cs"       
Inherits="veritabani_uygulamasi.devexpresskullanimi" %>

<%@ Register assembly="DevExpress.Web.ASPxGridView.v10.2, Version=10.2.5.0,            
Culture=neutral, PublicKeyToken=b88d1754d700e49a" 
namespace="DevExpress.Web.ASPxGridView" tagprefix="dx" %>
<%@ Register assembly="DevExpress.Web.ASPxEditors.v10.2, 
Version=10.2.5.0, Culture=neutral, 
PublicKeyToken=b88d1754d700e49a"      
namespace="DevExpress.Web.ASPxEditors" tagprefix="dx" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org    /TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
<div>

</div>

<dx:ASPxGridView ID="ASPxGridView1" runat="server" AutoGenerateColumns="False"
ClientIDMode="AutoID" CssFilePath="~/App_Themes/DevEx/{0}/styles.css"
CssPostfix="DevEx" DataSourceID="SqlDataSource1" Width="277px"
KeyFieldName="id">
<Columns>
<dx:GridViewCommandColumn ShowSelectCheckbox="True" VisibleIndex="0">
<EditButton Visible="True">
</EditButton>
<NewButton Visible="True">
</NewButton>
<DeleteButton Visible="True">
</DeleteButton>
</dx:GridViewCommandColumn>
<dx:GridViewDataTextColumn FieldName="name" VisibleIndex="0">
</dx:GridViewDataTextColumn>
<dx:GridViewDataTextColumn FieldName="surname" VisibleIndex="1">
</dx:GridViewDataTextColumn>
<dx:GridViewDataTextColumn FieldName="job" VisibleIndex="2">
</dx:GridViewDataTextColumn>
<dx:GridViewDataTextColumn FieldName="age" VisibleIndex="3">
</dx:GridViewDataTextColumn>
<dx:GridViewDataTextColumn FieldName="id" VisibleIndex="4">
</dx:GridViewDataTextColumn>
</Columns>
<Settings ShowFilterRow="True" />
<Images SpriteCssFilePath="~/App_Themes/DevEx/{0}/sprite.css">
<LoadingPanelOnStatusBar Url="~/App_Themes/DevEx/GridView/StatusBarLoading.gif">
</LoadingPanelOnStatusBar>
<LoadingPanel Url="~/App_Themes/DevEx/GridView/Loading.gif">
</LoadingPanel>
</Images>
<ImagesFilterControl>
<LoadingPanel Url="~/App_Themes/DevEx/GridView/Loading.gif">
</LoadingPanel>
</ImagesFilterControl>
<Styles CssFilePath="~/App_Themes/DevEx/{0}/styles.css" CssPostfix="DevEx">
<Header ImageSpacing="5px" SortingImageSpacing="5px">
</Header>
<LoadingPanel ImageSpacing="5px">
</LoadingPanel>
</Styles>
<StylesEditors ButtonEditCellSpacing="0">
<ProgressBar Height="21px">
</ProgressBar>
</StylesEditors>
</dx:ASPxGridView>
<asp:Label ID="lblMessage" runat="server" Text="Label"></asp:Label>
<asp:SqlDataSource ID="SqlDataSource1" runat="server"
ConnectionString="<%$ ConnectionStrings:NetConnectionString %>"
SelectCommand="selecttablo" DeleteCommand="deletetable"
DeleteCommandType="StoredProcedure" InsertCommand="inserttable"
InsertCommandType="StoredProcedure" OldValuesParameterFormatString=""
SelectCommandType="StoredProcedure" UpdateCommand="updatetable"
UpdateCommandType="StoredProcedure">
<DeleteParameters>
<asp:Parameter Name="id" Type="Int32" />
</DeleteParameters>
<InsertParameters>
<asp:Parameter Name="name" Type="String" />
<asp:Parameter Name="surname" Type="String" />
<asp:Parameter Name="job" Type="String" />
<asp:Parameter Name="age" Type="Int32" />
<asp:Parameter Name="id" Type="Int32" />
</InsertParameters>
<UpdateParameters>
<asp:Parameter Name="name" Type="String" />
<asp:Parameter Name="surname" Type="String" />
<asp:Parameter Name="job" Type="String" />
<asp:Parameter Name="age" Type="Int32" />
<asp:Parameter Name="id" Type="Int32" />
</UpdateParameters>
</asp:SqlDataSource>
</form>
</body> 
```

谁能看到问题可能是什么，或者给我一个关于如何解决这个问题的提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:49:29.897

如果您指定了**DataKeyNames**，请不要使用

```
<asp:Parameter...> 
```

而是尝试使用：

```
<asp:ControlParameter Name="ID" ControlID="YourGridViewName" PropertyName="SelectedDataKey.Value" /> 
```

如果你想使用**asp:parameter.../**那么你应该使用SqlDataSource 的**删除**、**插入**或**选择事件并实现以下操作：**

```
protected void yourDataSource_deleting(object sender, ObjectDataSourceMethodEventArgs e)
{
     e.InputParameters["yourParameterName"] = value;
} 
```

# jquery - $(document).ready 或 $(window).load 用于 jQuery 循环

> ID：11009042
> 
> 赞同：1
> 
> 时间：2012-06-13T06:01:59.800
> 
> 标签：jquery, jquery-cycle

我正在使用 Jquery Cycle 滚动图像，我目前正在使用 $(document).ready，问题是图像加载了一半并且循环效果开始了，

```
$(document).ready(function(){
$('#gallery').cycle({
        fx: 'scrollLeft,scrollLeft,scrollLeft,scrollLeft' ,
        speed:  1000,
        pause:   3
         });
 }); 
```

我应该使用 $(window).load 在开始效果之前等待所有图像加载，问题是图像将堆叠在另一个之上。

所以请建议我的问题的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:13:13.227

您可以使用此库来帮助您加载所有图像，然后在需要时加载它们

[http://thinkpixellab.com/pxloader/](http://thinkpixellab.com/pxloader/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T05:38:33.790

您还可以使用加载整个内容后触发的 jQuery(window).load() 事件。

像这样使用。

```
jQuery(window).load(function($) {

 $('#gallery').cycle({
    fx: 'scrollLeft,scrollLeft,scrollLeft,scrollLeft' ,
    speed:  1000,
    pause:   3
     });

}); 
```

希望对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T06:05:10.730

```
#gallery { width: SOMEDEFAULTWIDTH; height: SOMEDEFAULTHEIGHT; } 
#gallery img { display:none; } 
```

为避免图像堆叠在其他图像之上，`display: none`jquery 循环插件将在启动时显示它们。

# python - 如何通过python获取用户为HTML页面提供的文本输入？

> ID：11009051
> 
> 赞同：2
> 
> 时间：2012-06-13T06:02:45.750
> 
> 标签：python, html, beautifulsoup

如何通过python获取用户为HTML页面提供的文本输入？

例如

```
<html>
<input id="post_form_id" name="fooput" value="" />
</html> 
```

现在，用户在文本字段中输入值 abcxyz。如何使用 python 获得该值？我已经知道它是如何通过 javascript 完成的，但我想使用 python 来完成。

另外，我已经尝试过 Beautiful Soup，但它只能返回字段的预设值。所以我可以

```
soup=BeautifulSoup(open("myhtmldoc.htm")) 
print soup.find('input')['value'] 
```

但这只会给我预设值，而不是用户给出的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T06:10:21.393

您需要编写一个在提交表单时调用的脚本。通常，您使用一些处理各种细节的框架。

像这样的轻量级框架[`Flask`](http://flask.pocoo.org)使这项任务变得容易：

```
from flask import Flask, render_template

app = Flask(__name__)

app.route('/',methods=['GET','POST'])
def print_form():
    if request.method == 'POST':
        return render_template('form.html',result=request.form['fooput'])
    if request.method == 'GET':
        return render_template('form.html')

if __name__ == '__main__':
    app.run() 
```

在你的`form.html`：

```
{% if result %}
    You entered: {{ result }}
{% endif %}
<form method="POST" action=".">
   <input id="post_form_id" name="fooput" value="" />
   <input type="submit">
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T20:55:57.513

非常好的文档： http: [//flask.pocoo.org/docs/0.10/quickstart/](http://flask.pocoo.org/docs/0.10/quickstart/) 看看。

编辑：更快一点找到： http: [//flask.pocoo.org/docs/0.10/quickstart/#accessing-request-data](http://flask.pocoo.org/docs/0.10/quickstart/#accessing-request-data)

# javascript - 如何删除字符串Javascript中的所有字符？

> ID：11009053
> 
> 赞同：0
> 
> 时间：2012-06-13T06:02:59.903
> 
> 标签：javascript, string, string-formatting, money-format, removeall

我有一个发送货币价值的表格，例如

```
<input type="text" name="amount" value="N50,000.00 NGN" />
<input type="button" value="submit"> 
```

我想删除金额字段中的所有字符，只留下这种格式的数字；

```
<input type="text" name="amount" value="50000" />
<input type="button" value="submit"> 
```

使用 javascript 执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T06:20:49.457

利用

```
Number('N50,000.00 NGN'.replace(/[a-z, ]/gi,'')); 
```

如果您只想要整数部分，请使用：

```
parseInt(Number('N50,000.00 NGN'.replace(/[a-z, ]/gi,'')),10); 
```

该`replace`部分首先从字符串中删除所有字母字符、逗号和空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T06:32:55.340

尝试这个

```
 var i = "N50,000.00 NGN";
 parseInt(i.replace(/[^\d\.]/gi, ""), 10); 
```

在线示例：http: **[//jsbin.com/ojumir](http://jsbin.com/ojumir)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T06:19:14.810

您可以尝试遍历字符串并获取数字字符并将它们附加到结果字符串中。我不知道这是否是最好的方法，但它是一种有效的方法。

```
var res = "";
for (var c in str) { if (str[c].match(/\d/)) { res += str[c];  }  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T06:21:07.480

尝试这个

```
 <script type="text/javascript" language="javascript">

        function doWork() {
            var amount = document.getElementsByName('amount');
            var str = amount[0].value;
            var temp = '';
            for (i = 0; i < str.length; i++) {
                if (!isNaN(str[i]))
                    temp += str[i];
            }
            amount[0].value = temp;
        }
    </script>

<input type="text" name="amount" value="N50,000.00 NGN" />
<input type="button" value="submit" onclick="doWork();"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T06:24:40.660

首先认为你想要做的是使用这样的东西从数字中删除字符串或值

```
<input type="text" name="amount" value="N50,000.00 NGN" />
<input type="button" value="submit">

var amount =  $('input[name=amount]').val().replace(/[A-Za-z$-]/g, "");
   amount=amount.replace(",", "");
   amount=parseInt(amount).toFixed(0); 
```

这是一个工作示例

[http://jsfiddle.net/C69u4/](http://jsfiddle.net/C69u4/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T14:40:43.823

```
<script type="text/javascript" language="javascript">

    function doWork() {
        var amount = document.getElementsByName('amount');
        amount[0].value = parseInt(amount[0].value.replace(/[^0-9.]/g, "")).toFixed(0);
    }
</script>

<input type="text" name="amount" value="N50,000.00 NGN" />
<input type="button" value="submit" onclick="doWork();"> 
```

# ios - phonegap ios加载屏幕不显示

> ID：11009055
> 
> 赞同：0
> 
> 时间：2012-06-13T06:03:07.217
> 
> 标签：ios, cordova

我首先将图标从外部文件夹拖到 Iphone 部署信息部分，然后将文件（因为它们显示在我的 www 文件夹的根级别）拖到资源组的图标和启动部分。我还删除了闪屏和图标的所有 phonegap 默认图像。[加载屏幕文件以 .png 格式出现，并且在指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)之后具有正确的名称和大小（正常为 480x320，视网膜为 960x640）。

虽然应用程序图标立即显示，但启动屏幕不会显示在我的设备上，即带有 ios 4.1 的 iphone 3。Iphone 3 仍然显示 phonegap 默认屏幕。任何人都知道如何解决这个问题？

我只有一台测试设备，但在模拟器上显示了正确的加载屏幕。我已经清理了项目并重新启动了 xcode。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:33:26.723

从 Xcode 的产品菜单中运行“清洁”命令。

在为此苦苦挣扎了一段时间后，这终于是覆盖Phonegap默认启动屏幕的简单命令（假设图像设置和命名正确）。

# android - Android - 没有调试日志的 adb logcat

> ID：11009062
> 
> 赞同：61
> 
> 时间：2012-06-13T06:03:50.740
> 
> 标签：android, adb

我不想从`adb logcat`命令中查看调试日志。我的手机中有大量调试日志，我不想看到它们。

`adb logcat --help`说`" *:I "`将仅输出信息日志，但是否有任何选项可以过滤除调试之外的所有日志。

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-06-13T06:27:36.440

从[此处的文档](https://developer.android.com/studio/command-line/logcat#filteringOutput)中，当您指定日志级别过滤器时，它将显示该级别及更高级别的所有消息。级别指定为：

> 日志消息的标记是一个短字符串，指示消息源自的系统组件（例如，“视图”表示视图系统）。
> 
> 优先级是以下字符值之一，从最低到最高优先级排序：
> 
> *   V：详细（最低优先级）
> *   D：调试
> *   一：信息
> *   W：警告
> *   E：错误
> *   F：致命的
> *   S：静音（最高优先级，从未打印任何内容）
> 
> ...
> 
> 以下过滤器表达式显示所有标签上优先级为“警告”或更高的所有日志消息：
> 
> ```
> adb logcat *:W 
> ```

因此，考虑到这一点，通过您提到的过滤器`*:I`将记录除详细和调试日志之外的所有内容。

除非您打算显示 Verbose 以及其他日志级别，否则我认为您不能这样做，因为指定 Verbose 包括 Verbose 之上的任何内容。

如果是这种情况，对特定标签而不是特定日志级别或两者的某种组合进行过滤可能对您很有用。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-13T06:23:24.040

`adb logcat *:I`将显示优先级为 INFO 及更高的 **所有日志。**

> 优先级是以下字符值之一，从最低到最高优先级排序：
> 
> *   V - 详细（最低优先级）
> *   D——调试
> *   我——信息
> *   W——警告
> *   E - 错误
> *   F——致命的
> *   S — Silent（最高优先级，从未打印任何内容）

以上信息可在 [使用 Logcat 写入和查看日志中找到](https://developer.android.com/studio/debug/am-logcat)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-07-15T08:47:13.990

**要在某些华为**设备上启用日志记录：

*   拨打*#*#2846579#*#*

*   选择“项目菜单”

*   选择“背景设置”

*   选择“日志设置”

*   选择“日志切换”

*   启用“登录”

*   选择“日志级别设置”

*   启用“调试”

*   按“返回”键

*   选择“转储和记录”

*   启用“打开转储和日志”

*   按“返回”键 5 次返回主屏幕。

*   重启手机。

LogCat 现在应该可以工作了。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-09-27T20:18:23.270

`logcat`不会让您仅显示调试，但您可以显示调试及更高版本（调试、信息、警告、错误、致命）：

`adb logcat YourLogTag:D *:S`

`*:S`禁止来自其他应用程序的日志。

您可以通过管道传输结果`grep`以仅显示调试：

`adb logcat YourLogTag:D *:S | grep "D YourLogTag"`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-03-21T12:11:56.240

如果您使用的是**zsh**，例如*Catalina OSX*而不是 bash，您可能需要执行以下命令：

使用 --- --- 用下面的任何内容`noglob adb logcat *:E`替换**E。**

或者，您也可以使用 --- `adb logcat '*:E'`--- （引号）

```
V: Verbose
D: Debug
I: Info
W: Warning
E: Error
F: Fatal
S: Silent 
```

原因是 Zsh 将通配符解释为您想要扩展以该字母结尾的文件，而不需要引号或 noglob 前缀。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-13T06:10:49.247

您可以使用其包名称为特定应用程序创建过滤器。

# android - android进度条背景不透明度

> ID：11009063
> 
> 赞同：2
> 
> 时间：2012-06-13T06:03:55.657
> 
> 标签：android, opacity, android-progressbar

我一直在使用 Android ProgressBar。这里唯一的是针对特定应用程序，我需要 ProgressBar 不具有半透明背景。我的意思是你仍然可以看到它背后的视图，因为进度条是半透明的。

实际上我需要一个完整的背景不透明度（黑色，白色，没关系）。只要可以使用进度条隐藏后面的面板。
我不能只使用面板本身并设置背景，因为它是一个 Web 面板（发生 JS 的事情）。

感谢您的回复

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T07:20:37.320

尝试这个：

```
TextView tv = (TextView) progressDialog.findViewById(android.R.id.message);
tv.setTextColor(Portlet.MessageFontColor);

View v = (View) tv.getParent();
((ScrollView) v).setBackgroundColor(Portlet.messageBackColor);

v = (View) v.getParent();
v.setBackgroundColor(Portlet.messageBackColor);

LinearLayout ll = (LinearLayout) v.getParent();
ll.setBackgroundColor(Portlet.messageBackColor); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:27:04.113

我解决了我的问题。实际上我创建了自己的自定义进度条。可以在此处找到示例： [创建自定义进度对话框](http://www.hrupin.com/2011/09/how-to-make-custom-indeterminate-progressbar-in-android-or-how-to-change-progressbar-style-or-color)

然后我只是使用这种方法模糊了对话框的背景： [Blur Dialog](http://www.stealthcopter.com/blog/2010/01/android-blurring-and-dimming-background-windows-from-dialogs/)

希望有帮助！

# asp.net - AJAX/UpdatePanel 在 IIS7 上不起作用

> ID：11009070
> 
> 赞同：0
> 
> 时间：2012-06-13T06:04:27.740
> 
> 标签：asp.net, ajax

我有一个简单的 ASP.NET UpdatePanel，它在我运行 Visual Studio (Casini) 时按预期工作。

但是，一旦部署到我的本地 IIS，它就不再工作了。

什么配置错误？

我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" />
        <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
                <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
            </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="Button1" />
            </Triggers>
        </asp:UpdatePanel>
    </div>
    <input id="Text1" type="text" />
    </form>
</body>
</html> 
```

...和代码隐藏：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace Presentation.Web
{
    public partial class WebForm1 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            Label1.Text = DateTime.Now.ToString();
        }
    }
} 
```

在 Casini 中，标签会在没有回发的情况下更新。在 IIS 上，会发生回发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:12:59.630

在 web.config 文件的 Handlers 部分添加以下行：

`<add name="Ajax" verb="POST,GET" path="ajax/*.ashx" type="Ajax.PageHandlerFactory, Ajax"/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T06:09:14.407

ASP.NET AJAX 要求网页与 XHTML 兼容（不是 HTML 4.0）。事实上，在 web.config 中没有 mode=Transitional 将阻止 scriptManager 甚至在页面中呈现，并且每次 AJAX 命中都会像常规回发一样。

放入 web.config xhtmlConformance mode="Transitional"/>

[Chk链接它应该可以帮助你](http://weblogs.asp.net/varadam/archive/2011/03/22/microsoft-jscript-runtime-error-sys-is-undefined.aspx)

# asp.net - LIKE 部分用于从 SQL Server 2005 的数据库中搜索字符

> ID：11009071
> 
> 赞同：0
> 
> 时间：2012-06-13T06:04:33.727
> 
> 标签：asp.net, sql-server-2005, c#-2.0

`tbSearch.Text`是页面上的文本框值，`searchText`是在下拉列表框选择索引更改事件时收到的字符串数据类型值。

我从文本框和下拉列表框中完美地接收到这两个值，但我无法从表中搜索数据。

存储过程：

```
ALTER PROCEDURE showData
@search varchar(MAX)=NULL,
@status varchar(50)=NULL
AS
BEGIN   
    if @status = 'LANDLINE' and @search != ''
    BEGIN
       SELECT c.contid    AS ID, 
          c.contname  AS Person, 
          b.bustype   AS Business, 
          c.comp      AS Company, 
       c.email1    AS Email, 
       c.email2    AS Email, 
       c.website   AS Website, 
       c.landline1 AS Landline, 
       c.landline2 AS Landline, 
       c.mobile1   AS Mobile, 
       c.mobile2   AS Mobile, 
       c.street    AS Street, 
       c.city      AS City, 
       c.zip       AS ZipCode, 
       c.state     AS State, 
       c.country   AS Country 
    FROM   contactinfo c 
       LEFT OUTER JOIN businessinfo b 
                    ON c.bustype = b.bustype 
    WHERE  c.landline1 LIKE '%' + @search + '%' 
        OR c.landline2 LIKE '%' + @search + '%' 
   END
END
RETURN 
```

调用 C# 代码：

```
protected void btSearch_Click(object sender, EventArgs e)
{
    DataSet ds = new DataSet();

    cmd = new SqlCommand("showData", con);
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.AddWithValue("@search", tbSearch.Text);
    cmd.Parameters.AddWithValue("@status", searchText);

    da = new SqlDataAdapter(cmd);
    ds.Clear();
    da.Fill(ds);  

GridViewSearch.Visible = true;
    GridViewSearch.DataSource = ds.Tables[0];
    GridViewSearch.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:52:22.177

将 NULL 替换为 ' '

```
@Search varchar(MAX)=''
@status varchar(50)='' 
```

# mysql - MySQL如何计算一个字符串字段的相关性？

> ID：11009073
> 
> 赞同：0
> 
> 时间：2012-06-13T06:04:40.010
> 
> 标签：mysql

我正在尝试将两个不同的数据（例如位置）与表中的产品相关联。所以我需要关联零售数据库中的两列位置和产品。我有一种数值相关的方法，但我不知道如何处理字符串相关。请对此提供帮助..并感谢您的支持

问候， 沙希坎特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:38:14.553

沙什康特。

如果你把字符串中的每个字符都当作一个数字呢？

目前最常用的计算机系统，使用文本编码 UTF8、ANSI、ASCII ...，其中字母表具有实际存储和处理的“数字”值...

例如，字符串“correlate”可以表示为 8 位或 16 位的序列号，即：

十六进制表示法（C、O、R、R、E、L、A、T、E）变为：43、4F、52、52、45、4C、41、54、45

十进制 67, 79, 82, 82, 69, 76, 65, 84, 69

帐户有每个位置，而不是从 0 到 9 的数字，而是 0 到 256（8 位）。

有一些细节需要考虑，但出于实际目的可能会有所帮助。

问候， 卡洛斯·鲍尔

# android - 不从微调器调用弹出窗口

> ID：11009075
> 
> 赞同：0
> 
> 时间：2012-06-13T06:04:50.813
> 
> 标签：android, android-alertdialog, android-spinner

与参考。我之前的问题[View.onClickListner not called from other class](https://stackoverflow.com/questions/10993583/view-onclicklistner-not-called-from-other-class)

我有一个日期时间对话框，它被称为我的这个方法

```
public static void markTime(final String ref){
        myClass c = new myClass();

        if(c.getTime() == null)
        {
            c.setTime(Utils.getCurrentDateTime());
        }
        else
        {
           final DateTimeDialog dateTimeDialog = new DateTimeDialog(context, "title", c.getTime());
           dateTimeDialog.show();
           dateTimeDialog.initListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    c.setTime(dateTimeDialog.getDate());
                    dateTimeDialog.dismiss();
                }
            });
        }
    } 
```

我在我的应用程序中调用 markTime() 和各个地方并且工作正常，但是在微调器中调用时，它没有显示弹出。我的微调器代码是

```
public void onItemSelected(AdapterView<?> itemName, View view, int pos, long id) {
            switch(pos)
            {
            case 0:
                Toast.makeText(instance, "markTime0", Toast.LENGTH_SHORT).show();
                com.acs.inurse.common.Utils.markTime(ref);
                break;
            case 1:
                Toast.makeText(instance, "markTime1", Toast.LENGTH_SHORT).show();
                com.acs.inurse.common.Utils.markTime(caseRef);
                break;
            }
        } 
```

弹出不是从微调器调用的。我哪里错了我不知道。或者我没有包含一些代码？？？请帮忙！！！！

**每次选择更改时都会显示注意**吐司，但不会弹出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:04:13.723

我为所有的麻烦感到抱歉。我得到了答案。就是这样，我将错误的上下文传递给了 DateTimeDialog。假设我需要来自 Activity1 的 DateTimeDialog，但我正在传递 Activity 2 的上下文。

谢谢大家的帮助，

# pdf - PdfSharp，合并几个 pdf 页面并将文本放在合并的 pdf 之上

> ID：11009076
> 
> 赞同：2
> 
> 时间：2012-06-13T06:04:55.467
> 
> 标签：pdf, pdfsharp

我想将几个单独的pdf页面合并为一个pdf，同时在第一页的顶部放一个数字。某种水印，但左上对齐。

有谁知道如何解决这个问题？

现在我得到以下代码来合并文件：

```
 Console.WriteLine("Merging started.....");
    PdfDocument outputPDFDocument = new PdfDocument();
    foreach (string pdfFile in pdfFiles)
    {
        PdfDocument inputPDFDocument = PdfReader.Open(pdfFile, PdfDocumentOpenMode.Import);
        outputPDFDocument.Version = inputPDFDocument.Version;

        foreach (PdfPage page in inputPDFDocument.Pages)
        {
            outputPDFDocument.AddPage(page);
        }
    }
    outputPDFDocument.Save(outputFilePath);
    Console.WriteLine("Merging Completed");
            addOverlay(outputPDFDocument); 
```

编辑：我通过在保存后打开组合文档然后添加文本来使其工作。

```
 public static void addOverlay(PdfDocument combined_pdf)
{
    PdfDocument document = combined_pdf;

    // Select the first page
    PdfPage page = document.Pages[0];

    page.Orientation = PageOrientation.Portrait;

    XGraphics gfx = XGraphics.FromPdfPage(page, XPageDirection.Downwards);

    // Write on top of background with known colors
    gfx.DrawString("TEXT ON PDF PAGE", new XFont("Helvetica", 12, XFontStyle.Regular), XBrushes.White, 10, 0, XStringFormats.TopLeft);

    // Save the new modified document...
    document.Save("final_path");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:22:23.753

我不确定最好的方法，但我知道两种肯定会奏效的方法：

1.  像 PDFsharp 示例两页合一一样做（仅修改为一页合一）
2.  保存文件后（就像现在一样），您可以打开它进行修改并将文本添加到页面（请参阅 PDFsharp 附带的水印示例）

方法 2 保持页面不变。使用方法 1，您必须注意源文件中不同的页面大小 - 但您也有机会将所有页面缩放为单一格式（例如 DIN A4），这可能比具有多个不同页面的文件更易于用户使用格式。

# ajax - data-transition 和 data-ajax 可以在一起吗？

> ID：11009080
> 
> 赞同：1
> 
> 时间：2012-06-13T06:05:25.547
> 
> 标签：ajax, forms, button, jquery-mobile

[我已经在 J​​qmobile 中一起](https://stackoverflow.com/questions/10943770/data-transition-and-data-ajax-together-in-jqmobile)阅读了这篇文章Data-transition 和 data-ajax 。它说数据转换不能与 data-ajax=false 一起使用。我为我的表单和按钮使用了 data-ajax，以便它将我的数据显示在第二页上。但我也想使用数据转换，因为我希望它通过幻灯片等动画转换到另一个页面。如果我想同时使用它们，还有什么选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:04:16.720

您不能同时使用两者。

您不必`data-ajax='false'`显示第二页。

# python - 应用程序在 convert_to_south 后显示为“未同步”

> ID：11009083
> 
> 赞同：2
> 
> 时间：2012-06-13T06:05:53.900
> 
> 标签：python, django, database-schema, database-migration, django-south

我在我的应用程序上运行了 convert_to_south 命令。一切似乎都很好：迁移在 south_migrationhistory 表中， migrate --list 将迁移显示为已应用，但是当我执行 syncdb 时，应用程序仍显示为“未同步”。它建议我迁移那些（什么都不做，因为没有什么要迁移的）

这种行为是预期的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T06:34:31.743

只要您没有收到任何错误，这很好。在 Django/South 中创建表有两种方法：

*   运行`syncdb`它会自动创建 Django 的初始表。
*   运行应用程序的初始迁移，该应用程序还会创建该应用程序的表。

这些是不同的方法：“同步”的表不是通过迁移创建的，反之亦然。因此，如果 South 通过初始迁移制作了表格，那么它们没有“同步”是正确的。

要检查它是否正常工作，您需要：表中的一个条目`south_migrationhistory`（即，South 知道迁移已经完成）和数据库中具有正确结构的表。如果是这样的话，那就没什么好担心的了。

# php - 限制下载pdf文件

> ID：11009084
> 
> 赞同：0
> 
> 时间：2012-06-13T06:05:54.407
> 
> 标签：php, html, pdf, download

我正在从事在线 pdf 图书馆项目。在这个我有一个功能，任何用户都可以读取文件。但如果文件是可读的，那么我肯定可以下载。有什么办法可以阻止用户下载该文件。？如果他想下载文件而不是他必须注册..php pdf库可以帮助我们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:04:00.633

这是不可能的。正如杰米所说，阅读正在下载。当用户正在读取文件时，浏览器正在将该文件下载到临时文件中。因此，即使您禁用下载按钮，用户也可以单击“文件 -> 另存为”或从临时文件夹中复制该文件。

一个解决方案是只向公众提供一个示例（例如前几页），并且要访问完整的，他们需要注册。我没有更好的解决方案来手动将 2 个文件保留在服务器中 - 完整和抽象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T06:13:46.610

使用 js/jquery，当点击下载按钮时，触发注册页面，完成后您可以允许下载。类似于 docstoc.com

# c# - Wpf 的 ComboBox 未触发 SelectedIndex

> ID：11009090
> 
> 赞同：0
> 
> 时间：2012-06-13T06:06:41.707
> 
> 标签：c#, wpf, wpf-controls

我有一个场景，组合框可以具有相同的字符串值。对于 exa 组合框可以在下拉列表中有以下值：“Test”、“Test1”、“Test1”、“Test1”、“Test2”、

在选定索引的基础上，我正在填充另一个组合框。我的 Xaml 看起来像：

```
<Grid >
    <Grid.RowDefinitions>
        <RowDefinition Height="40"></RowDefinition>
    </Grid.RowDefinitions>
    <ComboBox ItemsSource="{Binding Path=ComboList, Mode=OneWay}"
              SelectedIndex="{Binding Path=ComboIndex, Mode=TwoWay}"/ >
</Grid> 
```

ViewModel 看起来像：

```
class TestViewModel : INotifyPropertyChanged
{
    private IList<string> _comboList = new List<string>
                                      {
                                          "Test",
                                          "Test1",
                                          "Test1",
                                          "Test1",
                                          "Test2",
                                      };       

    public IList<string> ComboList
    {
        get { return _comboList; }
    }

    private int _comboIndex;

    public int ComboIndex
    {
        get { return _comboIndex; }
        set
        {
            if (value == _comboIndex)
            {
                return;
            }

            _comboIndex = value;
            OnPropertyChanged("ComboIndex");
        }
    }

    private void OnPropertyChanged(string prop)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(prop));
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

我面临的问题是 SelectedIndex 不会被解雇，因为我在相同的字符串值之间感到困惑（比如将值从索引 1 处的“Test1”更改为索引 2 处的“Test1”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:30:47.993

当我需要这样的关系时，我在我的视图模型中创建关系并简单地绑定到这个集合

```
 public class MyItem
 {
    public string Name {get; set;}//your Test, Test1, Test1 ...
    public List<string> Childs {get; set;} // the childs depending on the the Name
 } 
```

在您的视图模型中，您现在可以创建 MyItem 列表并根据需要填充它。

```
 public List<MyItem> MyItemList {get;set;} 
```

在 xaml 中，您现在可以简单地创建相关的组合框。

```
 <ComboBox ItemsSource="{Binding Path=MyItemList}"
          SelectedItem="{Binding Path=ComboIndex, Mode=TwoWay}"/ >

 <ComboBox ItemsSource="{Binding Path=ComboIndex.Childs}"
          SelectedItem="{Binding Path=MySelectedPropForChild, Mode=TwoWay}"/ > 
```

所以你不必关心任何索引，因为你已经建立了你的关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T06:51:47.873

而不是绑定到 a `List<string>`，封装字符串，例如

```
public class Item
{
    public Item(string v){ Value = v; }
    public string Value{get; private set;}
} 
```

并绑定到一个`List<Item>`.

然后修改您的 Xaml 以指定 DisplayMemberPath

```
<ComboBox ItemsSource="{Binding Path=ComboList, Mode=OneWay}"  
          DisplayMemberPath="Value"
          SelectedIndex="{Binding Path=ComboIndex, Mode=TwoWay}"/ > 
```

这对我有用。

# java - 当只有几个项目时，如何使警报对话框显示列表视图的所有项目？

> ID：11009091
> 
> 赞同：2
> 
> 时间：2012-06-13T06:06:52.957
> 
> 标签：java, android, listview, layout, dialog

我创建了一个对话框，但遇到了一个问题，即只有列表中的部分项目可以显示在布局中。其他的只有滚动列表视图后才能看到，下图是显示对话框时的效果。

该对话框是一个警报对话框，我使用 alert.builder 创建它，它的布局是`LinearLayout`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T06:25:01.553

您可以创建另一个扩展对话框并覆盖方法的类`onstart()`。在那里你可以做你的事情......这不会影响你的主要活动。

# ruby-on-rails-3 - Rails 种子文件退出循环创建少于指定用户

> ID：11009097
> 
> 赞同：1
> 
> 时间：2012-06-13T06:07:36.637
> 
> 标签：ruby-on-rails-3, seed

我在 rails 3.2.2 应用程序中有一个种子文件，它为我创建用户来测试站点布局和表单。它应该生成一个管理员和 10 个用户，但它只创建管理员和 2 个用户，而没有解释它为什么停止。在我检查数据库之前，它不会抛出异常并且一切看起来都很好。

这是代码

```
require 'faker'

# Create an Admin user to test the site with
Admin.create first_name: "Admin",
         last_name: "User",
         email: "admin.user@example.com",
         password: "foobarbaz",
         password_confirmation: "foobarbaz"

# Generate 10 users to test with
10.times do
  student_address = { street: Faker::Address.street_address,
                  city: Faker::Address.city,
                  state: Faker::Address.us_state_abbr,
                  zipcode: Faker::Address.zip_code }
  first_name = Faker::Name.first_name
  last_name = Faker::Name.last_name

  Student.create first_name: first_name,
             last_name: last_name,
             email: "#{first_name}.#{last_name}@example.com",
             student_id: rand(10 ** 6).to_s.rjust(6,'0'),
             address_attributes: student_address,
             phone_number: Faker::PhoneNumber.phone_number,
             password: "foobar",
             password_confirmation: "foobar"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:14:14.257

如果您希望 create 或 update_attributes 为无效记录引发异常，则需要使用相应的“bang”版本。

```
Student.create! 
```

# jsf - 部署时未找到 FacesServlet

> ID：11009102
> 
> 赞同：2
> 
> 时间：2012-06-13T06:08:04.970
> 
> 标签：jsf, tomcat, netbeans, primefaces

我有一个示例应用程序，可以在我的本地机器上使用带有 GlassFish 的 Netbeans。我从 StackOverflow 获得了很多帮助，帮助我启动并运行它。下一步是尝试将其部署在真实服务器上。我发现我可以在 EATJ 上试用它，所以我使用 Netbeans 生成 WAR 文件并上传了 WAR 文件。它不起作用，我在其中一个日志中发现了以下内容

```
INFO: ContextListener: contextDestroyed()
Jun 12, 2012 10:45:33 PM org.apache.catalina.core.ApplicationContext log
INFO: Marking servlet Faces Servlet as unavailable
Jun 12, 2012 10:45:33 PM org.apache.catalina.core.StandardContext loadOnStartup
SEVERE: Servlet /ww1 threw load() exception
java.lang.ClassNotFoundException: javax.faces.webapp.FacesServlet
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1701) 
```

我刚刚重新启动了 Tomcat 服务器，这样我就有了一个干净的状态。从时间戳可以看出我是同步的。在 INFO 中，它告诉我它使 Faces Servlet 不可用。因此，如果它只是使其不可用，它就找不到该类也就不足为奇了。因此，当我尝试运行我的应用程序时，它会失败。

我不明白的是为什么它决定首先让它不可用，以及我能做些什么。

在我本地机器上的 Netbeans 中，我使用的是 GlassFish，而在 EATJ 上使用的是 Tomcat。WAR 文件中是否有一些内容可能使其无法在 Tomcat 上运行？很难相信，但也许。我正在使用带有 primefaces 的 jsf 2.0，如果这有什么不同的话。

自从 GlassFish 与 Netbeans 捆绑后，我从未在我的本地机器上运行过 Tomcat，它运行良好。也许我必须在本地机器上加载 Tomcat 来测试它？我不知道该怎么想，所以我需要请教一些建议。

PS 我记得我添加了 glassfish-web.xml 以消除烦人的警告。我添加的行是

```
<parameter-encoding default-charset="UTF-8"/> 
```

也许我需要删除 glassfish-web.xml？另一方面，它与使 FacesServlet 不可用有什么关系？问题似乎比这更深。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T09:00:46.110

Glassfish 附带捆绑的 jsf 库。Tomcat没有。因此，您要么需要将 jsf 库放到 tomcat 库中，要么在构建项目时将它们添加到您的 war 文件中。[你可以在这里](http://javaserverfaces.java.net/download.html)
下载 jsf 。

# javascript - 在 AJAX 中创建数组后逗号存在

> ID：11009104
> 
> 赞同：0
> 
> 时间：2012-06-13T06:08:14.447
> 
> 标签：javascript, ajax, arrays, comma

我有一个与从外部文件中获取的数组数据有关的问题。使用的脚本是 .js 文件中的 AJAX。从外部文件（.php）获取数据后，数组数据的值显示在每个数组数据前面的逗号。我的代码有什么问题吗，如果有任何方法可以解决这个问题，请告诉我。

非常感谢专家的帮助。谢谢！

示例代码：

```
var i = 1;
var loadPcs = [];
var deststop = [];
var datestop = [];

while (i <= counter)
{

    deststop[i]= encodeURI(document.getElementById('stop'+i).value);
    deststop[i] = deststop[i] + ("%");

    datestop[i]= encodeURI(document.getElementById('depDate'+i).value);
    datestop[i] = datestop[i] + ("%");

    notes[i]= encodeURI(document.getElementById('notes'+i).value);
    notes[i] = notes[i] + ("%");

    i = i + 1;  
}

    {

    var stopdest = deststop;
    var stopdate = datestop;

        http.open('get', 'insert.php?&deststop='+stopdest+'&datestop='+stopdate+'&loadPcs='+loadPcs+'&notes='+notes+'&counter='+counter);  
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:17:50.953

您从 1 开始数组索引

```
 var i =1 
```

将索引值设为零

```
 var i=0 
```

我认为它将第一个值作为空值，因此它显示空值，然后显示一个逗号。因为在 javascript 中，数组将用分隔符“，”分隔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T06:59:31.277

试试这个：
而不是使用数组取一个字符串变量，看看下面的代码

```
var deststop = "";
while(i <= counter)
{
   deststop += encodeURI(document.getElementById('stop'+i).value) + "%" ;
} 
```

用字符串变量替换所有数组并附加数据，如上面代码中所做的那样。

# http - 我可以在“Accept-Ranges”标题中指定自定义范围类型吗？

> ID：11009107
> 
> 赞同：4
> 
> 时间：2012-06-13T06:08:49.247
> 
> 标签：http, http-headers

常见的“接受范围”标头是字节。但是，对我来说，可能有几十种其他类型的范围是有道理的。

我正在编写一个采用日期范围的 API 资源。在接受范围标头中指定日期并期望来自客户端的范围标头是否有意义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T12:49:44.750

我一直在研究与 Accept-Ranges & Range 标头相同的主题，这似乎是传递分页数据的良好候选者。

HTTP1.1 规范指出：

> 范围单位 = 字节单位 | **其他范围单位**

这表明您可以使用自己的单位类型，但接着说

> HTTP/1.1 定义的唯一范围单位是字节。HTTP/1.1 实现可以忽略使用其他单位指定的范围。

尽管唯一支持的范围单位是字节，但该声明确实强调 HTTP 1.1 可以（不应该）忽略其他单位中的范围——所以这取决于你吗？

但是，HTTP 标头包含与消息正文相关的数据，而不是消息正文所代表的内容，因此仅支持字节单位才有意义，因为字节范围可以应用于消息正文，无论它代表什么资源。而日期范围是基于上下文的范围，仅适用于某些情况。

正如您在问题中提到的那样，实现日期范围的一种方法是在对该 URL 的 HEAD 或 OPTIONS 请求的响应中提供自定义*Accept-Ranges*标头，然后将带有任何 GET 请求的*Range标头传递给相同的 URL*

我认为是否以这种方式使用它取决于开发人员，但对我来说，这个孔对于这个方形钉来说有点太圆了！传递查询字符串中的值。

**参考：**

```
3.12 Range Units

HTTP/1.1 allows a client to request that only part (a range of) the response entity be included within the response. HTTP/1.1 uses range units in the Range (section 14.35) and Content-Range (section 14.16) header fields. An entity can be broken down into subranges according to various structural units.

      range-unit       = bytes-unit | *other-range-unit*
      bytes-unit       = "bytes"
      other-range-unit = token

The only range unit defined by HTTP/1.1 is "bytes". HTTP/1.1 implementations MAY ignore ranges specified using other units.

HTTP/1.1 has been designed to allow implementations of applications that do not depend on knowledge of ranges. 
```

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.12](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.12)

# windows-phone-7 - 为什么 DownloadStringCompleted 方法总是在 windows phone 7 中返回相同的结果？

> ID：11009112
> 
> 赞同：3
> 
> 时间：2012-06-13T06:09:03.907
> 
> 标签：windows-phone-7

我们面临一个问题，DownloadStringCompleted 方法总是在 windows phone 7 中返回相同的结果？

首先通过服务绑定挂起的请求。显示列表框中的请求放置了两个按钮。当单击该调用接受服务时，该服务更新表。再次调用显示先前结果的待处理请求服务。为什么请告诉我...

代码：

```
private void getpendingrequests()
{
 WebClient wcgetfriends = new WebClient();
                    wcgetfriends.DownloadStringAsync(
                    new Uri("http://{ipaddress}/Network/Reccords/GetFriends?userid=" + userId));
                    wcgetfriends.DownloadStringCompleted +=
                     new DownloadStringCompletedEventHandler(
                                    wcgetfriends_DownloadStringCompleted);
}

 void wcgetfriends_DownloadStringCompleted(object sender,
                 DownloadStringCompletedEventArgs e)
        {

            String resultgetfriends = null, responseCode = null;
            using (var reader = new StringReader(e.Result))
            {
                resultgetfriends = reader.ReadToEnd();
            }
            XmlReader xmlDoc = XmlReader.Create(new MemoryStream(System.Text.UTF8Encoding.UTF8.GetBytes(resultgetfriends)));

            while (xmlDoc.Read())
            {
                if (xmlDoc.NodeType == XmlNodeType.Element)
                {

                    if (xmlDoc.Name.Equals("ResponseCode"))
                    {
                        responseCode = xmlDoc.ReadInnerXml();

                    }

                }

            }
            if (Convert.ToInt32(responseCode) == 200)
            {

                string result1 = e.Result.ToString();

                XDocument xmlDocu = XDocument.Load(new MemoryStream(System.Text.UTF8Encoding.UTF8.GetBytes(result1)));

                interestrates = (from rts in xmlDocu.Descendants("Friend")

                                 select new SampleCheckedData
                                 {

                                     Id = (string)rts.Element("userid"),
                                     Name = (string)rts.Element("name"),
                                     Icon = (string)rts.Element("imageurl"),

                                 }).ToObservableCollection<SampleCheckedData>();

                this.lstFriendRequuest.ItemsSource = interestrates;

            }
            if (Convert.ToInt32(responseCode) == 201)
            {
                MessageBox.Show("UserId is not type of integer");
            }
            if (Convert.ToInt32(responseCode) == 202)
            {
                MessageBox.Show("User not exists");
            }
            if (Convert.ToInt32(responseCode) == 203)
            {
                MessageBox.Show("No Pending Requests");
            }

        }

private void requestaccept()
{
 WebClient wcacceptrequest = new WebClient();
                    wcacceptrequest.DownloadStringAsync(
                    new Uri("http://{ipaddress}/Network/Reccords/FriendRequestAcceptance?userid=" + userId + "&frienduserid=" + _id + "&acceptid=" + 1));
                    wcacceptrequest.DownloadStringCompleted +=
                     new DownloadStringCompletedEventHandler(
                                    wcacceptrequest_DownloadStringCompleted);
                    Image b = sender as Image;
                    var res = interestrates.Where(a => a.Id.Equals(((System.Windows.FrameworkElement)(e.OriginalSource)).Tag)).ToList();
                    if (res.Count == 1)
                        interestrates.Remove(res.First());
}

   void wcacceptrequest_DownloadStringCompleted(object sender,
                DownloadStringCompletedEventArgs e)
        {

            String resultaccept = null, responseCode = null;
            using (var reader = new StringReader(e.Result))
            {
                resultaccept = reader.ReadToEnd();
            }
            XmlReader xmlDoc = XmlReader.Create(new MemoryStream(System.Text.UTF8Encoding.UTF8.GetBytes(resultaccept)));

            while (xmlDoc.Read())
            {
                if (xmlDoc.NodeType == XmlNodeType.Element)
                {

                    if (xmlDoc.Name.Equals("ResponseCode"))
                    {
                        responseCode = xmlDoc.ReadInnerXml();

                    }

                }

            }
            if (Convert.ToInt32(responseCode) == 200)
            {

                lstFriendRequuest.ItemsSource = "";
                interestrates = new ObservableCollection<SampleCheckedData>();
                bindGetFriends();

            }
            if (Convert.ToInt32(responseCode) == 201)
            {
                MessageBox.Show("UserId is not type of integer");
            }
            if (Convert.ToInt32(responseCode) == 202)
            {
                MessageBox.Show("Friend Id not type of integer");
            }
            if (Convert.ToInt32(responseCode) == 203)
            {
                MessageBox.Show("Accept id not type of integer");
            }

        } 
```

请告诉我为什么在 bindfriends 方法中得到以前的结果......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T07:17:07.353

这几乎可以肯定是由手机或某些网络代理中的缓存引起的。

为了防止缓存，您可以尝试做几件事 - 如果您想始终禁用缓存，那么最快的方法之一就是在 GET 请求的末尾添加一个唯一编号 - 例如

```
 WebClient wcgetfriends = new WebClient();
                wcgetfriends.DownloadStringCompleted += wcgetfriends_DownloadStringCompleted;
                wcgetfriends.DownloadStringAsync(
                    new Uri(
                        "http://{ipaddress}/Network/Reccords/GetFriends?userid=" 
                        + userId 
                        + "&ignored=" 
                        + DateTime.UtcNow.Ticks)); 
```

* * *

还有其他类似的问题和答案：

*   [WP7 HttpWebRequest 没有缓存](https://stackoverflow.com/questions/4461610/wp7-httpwebrequest-without-caching)
*   [WebClient 下载奇怪的行为](https://stackoverflow.com/questions/9177698/webclient-download-weird-behavior)
*   [我应该禁用 WebClient 缓存吗？](https://stackoverflow.com/questions/9859137/should-i-disable-webclient-caching)

# html - Mac 上的高度

> ID：11009113
> 
> 赞同：4
> 
> 时间：2012-06-13T06:09:05.910
> 
> 标签：html, macos, google-chrome, safari

以下代码：

`<input style="height: 80px; width: 200px;" value="test button">`

在 Windows、Linux 等上运行良好。但是 Mac 使用系统按钮样式作为`<input>`标签。这些似乎无法自定义高度（Firefox 会覆盖系统按钮样式，所以没问题，但 Mac 上的 Chrome 和 Safari 存在以下问题）：

没有 80px 宽和 200px 高的按钮，而是 Mac 按钮样式和顶部和底部的间隙。宽度设置得很好。

如何覆盖它以便 Mac 上的 Chrome 和 Safari 显示一个高按钮？

编辑：这是在 Mac 上发生的事情： ![Mac输入{高度：200px;  } 问题](../Images/ff904521eeeb52c5c630ed02f4422b25.png)
这是应该发生的事情（适用于 Windows、Linux）：

![正常输入{高度：200px;  }](../Images/9081e9984c9d2ea992ba90dfb7984563.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T06:43:33.827

添加 ：

```
input[type=button] {
    -webkit-appearance: button;
} 
```

在你的 CSS 中:-)

[这](http://css-infos.net/property/-webkit-appearance)是此属性可以采用的所有值的列表。默认情况下，WebKit 对按钮使用自定义样式（具有固定高度）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T06:42:09.677

添加 type="button" 后尝试

```
<input style="height: 80px; width: 200px;" value="test button" type="button"> 
```

# gmail - 电子邮件批准脚本遇到服务器错误

> ID：11009122
> 
> 赞同：0
> 
> 时间：2012-06-13T06:09:37.097
> 
> 标签：gmail, google-apps-script

[我已经按照 James Ferreira 的 youtube 教程在此处](http://www.youtube.com/watch?v=eduG0XZ9mDs&list=PL73FAFB4E8303DA97&index=4&feature=plcp)完成了电子邮件批准脚本。

请求的电子邮件发送成功，但“批准”/“拒绝”没有成功。点击“批准”或“拒绝”，谷歌会给我一个错误：“谷歌文档遇到服务器错误。” ......

知道可能导致错误的原因或如何最好地调试它吗？

谢谢。

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:32:09.293

确保您在电子邮件中构建和发送的 URL 是正确的。您应该使用将脚本发布为服务时显示的 URL。

# php - 在接口（OOP）中添加属性是一种好习惯吗

> ID：11009124
> 
> 赞同：2
> 
> 时间：2012-06-13T06:10:00.710
> 
> 标签：php, oop, zend-framework

请参阅以下对象：

```
interface IMedia
{
    public function getThemed();
    public function getDownloadLink();
}

class Video implements IMedia
{
    public function getThemed() {}
    public function getDownloadLink() {}
} 
```

如果有一些常见的属性，例如：

```
public $size;
public $uploadedDate;
public $hitCounts; 
```

它们可以添加到 IMedia 吗？还是建议在那个地方使用抽象类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T06:16:58.303

@Muneer

首先这是不可能的。接口不允许这样做。我建议做这样的事情：

```
interface IMedia {

}

abstract class AbstractMedia implements IMedia {
  public $property = "value";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T06:15:07.093

好吧，总的来说，您当然希望尽可能抽象。因此，为了避免仅针对访问器/突变器的类型转换，访问器/突变器完全有意义。现在将有机会引入一个仅用于属性实现的抽象类。

# excel - Excel公式获取最后两个逗号之间的文本

> ID：11009126
> 
> 赞同：1
> 
> 时间：2012-06-13T06:10:08.103
> 
> 标签：excel

我在单元格 A1 中有这些数据：

```
Majestic Properties Design District, LLC, Ste. 101, 35 NE 40TH ST, Miami, FL 33137 
```

还有一些其他具有这些格式地址的单元格，例如

```
Fortune International Realty Iriondo Ecker & Assoc. Inc., Ste 25, 260 Crandon Blvd, Key Biscayne, FL 33149 
```

我想要的输出是

```
Miami
Key Biscayne 
```

等等

为了得到邮编和状态，我做了

```
=RIGHT(A1,8) 
```

但是现在我需要获取城市（即最后一个逗号之间的文本）。

我不想将 TEXT 用于 COLUMN 或任何 VBA。我想用一个公式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T09:45:01.703

这个公式也应该有效，不依赖于邮政编码的长度......

`=TRIM(LEFT(RIGHT(SUBSTITUTE(A1,",",REPT(" ",100)),200),100))`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T06:57:22.287

也许是这样：

```
=REPLACE(LEFT(A1,LEN(A1)-10),1,FIND("|",SUBSTITUTE(A1,",","|",LEN(A1)-LEN(SUBSTITUTE(A1,",",""))-1))+1,"") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T07:06:43.327

您询问如何提取夹在单元格中第一个和第二个最右边逗号之间的文本。

*从单元格的左侧*开始计算字符的实例很容易。然而，在 Excel 中*从右*开始计数是出了名的困难。计数越高，难度越大：通常，如果您想找到`n`第一个字符实例，您需要输入的工作表公式的长度会呈指数增长，例如`4^n`！（如果您想在一个公式中执行此操作。）

您可能想看看我对类似问题的这些早期答案。

*   [如何从 Excel 列中提取最后一个子字符串？](https://stackoverflow.com/a/6135343/119775)
*   [Excel - 从字符串中获取文件路径](https://stackoverflow.com/a/5505006/119775)

这些答案显示了如何从右侧确定字符的*第一个*实例的位置（然后将整个文本提取到该字符的左侧或右侧）。您不仅需要找到( ) 的第一个实例，还需要找到*第二个*实例，这样您的公式将比这些答案中的公式长 16 倍。同样，*如果*您想在一个公式中执行此操作。`,``n=2`

 *如果有一个包含中间结果的额外单元格是可以接受的，那么您可以这样做：

在单元格 A6 中：您的地址文本

在单元格 A7 中，我们删除右侧的第一个逗号以及之后的所有文本：

```
=LEFT(A6,FIND(CHAR(1),
 SUBSTITUTE(A6,$A$3,CHAR(1),LEN(A6)-LEN(SUBSTITUTE(A6,$A$3,""))))-1) 
```

在单元格 A8 中，我们只保留下一个最右边逗号之后的文本：

```
=TRIM(MID(A7,FIND(CHAR(1),
 SUBSTITUTE(A7,$A$3,CHAR(1),LEN(A7)-LEN(SUBSTITUTE(A7,$A$3,""))))+1,LEN(A7))) 
```

请注意，我将`,`分隔符存储在 cell 中`A3`，因此很容易更改。

完毕。结果如下所示：

![在此处输入图像描述](../Images/4b42416bd67d4f75b89093f7d94e166d.png)

如果您必须只有 1 个公式并且没有具有中间结果的单元格，则在单元格的公式中`A8`，将每个实例替换`A7`为`LEFT(A6,FIND(CHAR(1), SUBSTITUTE(A6,$A$3,CHAR(1),LEN(A6)-LEN(SUBSTITUTE(A6,$A$3,""))))-1)`。我忘记了Excel中公式长度的限制......*

# c++ - 打印您使用参数定义的方法名称

> ID：11009130
> 
> 赞同：1
> 
> 时间：2012-06-13T06:10:34.163
> 
> 标签：c++, .net, visual-c++, dev-c++

我们正在使用一种方法

```
#define CM_VALUE_1                       CM_Method(3001) 
```

CM_Method 是在同一文件中定义的方法。

我只想在 vc++ 中`CM_Method(3001)`使用打印`CM_VALUE_1`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T06:42:26.030

间接使用 stringize 预处理器运算符来获得您想要的。

```
#define MAKE_STR(X) #X
#define MAKE_STR2(X) MAKE_STR(X)

std::cout << MAKE_STR(CM_VALUE_1)
          << " is " << MAKE_STR2(CM_VALUE_1)
          << std::endl; 
```

将导致

```
CM_VALUE_1 is CM_METHOD(3001) 
```

如果参数 to`MAKE_STR2`本身是一个宏，则在调用 时会对其进行扩展`MAKE_STR`，因此结果是参数定义的字符串化，而不是宏名称本身。

# asp.net - .NET Framework 4.0 和 WindowXP IIS

> ID：11009133
> 
> 赞同：0
> 
> 时间：2012-06-13T06:10:48.977
> 
> 标签：asp.net, .net, iis, frameworks

我已将 .net framework 4.0 安装到我的 windows XP 中，但在设置 IIS 期间我找不到任何 asp.net 4.0 版本。问题是什么？提前谢谢你。

![在此处输入图像描述](../Images/2b4374f091be8a584b531f74f7f2d997.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T06:14:03.007

您可以尝试运行以下命令：

```
c:\windows\microsoft.net\framework\v4.0.30319\aspnet_regiis.exe -iru 
```

这应该在您的 XP 机器上使用 IIS5.1 重新注册 ASP.NET。如果这不起作用，请按照[此处](http://msdn.microsoft.com/en-us/netframework/aa569263)的 Web 平台安装并在您的计算机上重新安装它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T06:24:35.443

我发现我之前在我的机器上安装了 .net framework 4.0 客户端版本的问题，感谢 Matthew Abbott 提供了 .net framework 4.0 完整版的链接。

# html - html列表 当用户按下回车键时中断

> ID：11009134
> 
> 赞同：0
> 
> 时间：2012-06-13T06:10:52.983
> 
> 标签：html

我有一个 contenteditable div 元素，其中包含一个使用`<ol>`. 如果用户选择了不是 a 的其他地方，则不会创建`<li>`新`<li>`项目。如果用户在创建列表后按两次回车，则不会`<li>`创建任何项目。

如何强制 div 元素中的所有行成为一个`<li>`项目？

我没有小提琴帐户，但是如果您将 contenteditable 标记添加到此处的示例中，您可以在操作中查看/测试它[http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_lists](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_lists)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:30:42.190

的效果`contenteditable`因浏览器而异，但是当列表位于可编辑区域内而不是声明为可编辑的元素时，问题中描述的行为很常见。原因似乎是由于封闭元素是可编辑的，因此实施者认为应该有一种方法可以退出列表，例如在其后添加内容。

如果您更改单个 contenteditable 块，例如

```
<div contenteditable>
some stuff
<ol><li>test</li></ol>
some other stuff
</div> 
```

到三个这样的街区，

```
<div contenteditable>
some stuff
</div>
<ol contenteditable><li>test</li></ol>
<div contenteditable>
some other stuff
</div> 
```

然后行为发生变化：在列表中按两次 Enter 只会在那里添加一个空项目。

但是有一个问题`<ol contenteditable>`：它似乎让 IE 9 省略了列表编号（或`ul`列表项目符号），没有明显的方法让它放在那里。（编辑：这只发生在 Quirks 模式下。但是这个错误可能存在于早期的 IE 版本中以不同的模式。我建议`contenteditable`在包装元素上使用，而不是`ol`直接使用列表元素。）

# google-docs - 需要帮助来创建新的 Google 电子表格

> ID：11009136
> 
> 赞同：1
> 
> 时间：2012-06-13T06:11:07.573
> 
> 标签：google-docs, google-sheets, google-spreadsheet-api

我想使用 C#在我的[http://docs.google.com帐户中创建一个新的电子表格。](http://docs.google.com)可以创建一个新的电子表格。请显示一些有助于我创建电子表格的语法或有价值的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:41:41.790

您必须使用 Documents List API 创建一个新的电子表格。该文档包含完整的 C# 示例：

[https://developers.google.com/google-apps/documents-list/#creating_or_uploading_spreadsheets](https://developers.google.com/google-apps/documents-list/#creating_or_uploading_spreadsheets)

# php - PHPUnit 代码覆盖停止但不报告任何错误

> ID：11009139
> 
> 赞同：0
> 
> 时间：2012-06-13T06:11:42.273
> 
> 标签：php, phpunit, code-coverage

当使用 codecoverage 执行 PHPUnit 时，覆盖率生成只是停止而没有任何错误，并且不会生成报告。

该问题是由一个文件中的致命错误引起的，但是很难在没有任何错误出现的情况下找到错误所在。

我已经确认`display_errors`开启，并且我`error_reporting`在 php.ini 中设置为 -1

经过从覆盖范围中排除文件的大量测试后，我发现文件有误，以及错误是什么（类没有实现继承的抽象方法），但如果我遇到实际错误，这可能会更快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:11:42.867

问题出在正在使用的 PHPUnit 配置中。

我已经设置了这样的错误报告：

```
<php>
    <ini name="error_reporting" value="E_ALL & ~E_STRICT" />
</php> 
```

我认为这应该可行，但您似乎只能提供常量 ( `E_ALL`) 或文字值，而不是这样的表达式。此配置会将 error_reporting 设置为`'E_ALL & ~E_STRICT'`，而不是正确的数值，从而使所有错误都被忽略。

我通过在 phpunit 引导文件中设置 error_reporting 解决了这个问题。

# java - 如何确定用户何时取消从网站下载文件 --- tr:fileDownloadActionListener

> ID：11009146
> 
> 赞同：2
> 
> 时间：2012-06-13T06:12:11.993
> 
> 标签：java, jsf, download, trinidad

我在特立尼达图书馆使用 JSF 1.2

在我的 xhtml 文件中，为了启用下载，我正在使用`<tr:fileDownloadActionListener`>。

我如何知道用户何时取消下载文件？

# java - 如何从 jTextField 中检索信息

> ID：11009147
> 
> 赞同：1
> 
> 时间：2012-06-13T06:12:16.947
> 
> 标签：java, sql, swing, jtextfield, parseint

我正在做一个个人项目。我正在创建一个打卡时钟程序，所以我需要帮助的部分是用户在 jTextField 中输入 uid 的地方。因此，我需要检索 uid(#######)，然后使用 sql 语句在数据库中搜索该 uid。这就是我到目前为止所拥有的。问题是 jTextField1.getText 下有一条红线，当我运行它时，说 =

`"setInt(int,int) in java.sql.PreparedStatement cannot be applied to (int,java.lang.String) pstmt.setInt(1, jTextField1.getText());"`

任何帮助表示赞赏。谢谢你。

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    // TODO add your handling code here:
    try{
        stmt = con.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE);
        String sql = "SELECT * FROM Students WHERE STUDENTID = ?";
        PreparedStatement pstmt = con.prepareStatement(sql);
        pstmt.setInt(1, jTextField1.getText()); // Retrieve uid from jTextField
        ResultSet rs = pstmt.executeQuery();
        while(rs.next()){
            String first = rs.getString(2);
            String last = rs.getString(3);
            String hours = rs.getString(6);

            fName.setText(first);
            lName.setText(last);
            tHours.setText(hours);
        }
    }
    catch(SQLException err){
        JOptionPane.showMessageDialog(Student.this, err.getMessage());
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T06:17:07.323

`jTextField1.getText()`将返回 String 用于`parseInt`转换为 int

```
pstmt.setInt(1, Integer.parseInt(jTextField1.getText())); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T06:18:56.850

正如您从[文档](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#setInt%28int,%20int%29)中看到的那样，该`setInt()`方法将两个参数都作为`int`.

```
public void setInt(int parameterIndex,
                   int x) 
```

所以，你需要改变这个：

```
 pstmt.setInt(1, jTextField1.getText()); 
```

到：

```
 pstmt.setInt(1, Integer.parseInt(jTextField1.getText())); 
```

因为该`getText()`方法[返回一个 String](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#getText%28%29)。

# php - 我们如何检查用户是否已经使用facebook api多用户选择朋友对话框向朋友发送了邀请？

> ID：11009150
> 
> 赞同：0
> 
> 时间：2012-06-13T06:12:28.383
> 
> 标签：php, facebook, facebook-graph-api

API 中有什么东西可以让我们检查邀请是否已经发送给那个特定的朋友？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:19:23.967

当请求成功发送时，用户将被重定向到

```
http://example.com/response?request=REQUEST_ID&to=ARRAY_OF_USER_IDS 
```

您将获得所创建请求的请求 ID 和接收用户 ID 数组。

如果有错误，浏览器会重定向到

```
 http://example.com/response?error_code=ERROR_CODE&error_msg=ERROR_MSG 
```

参考结帐[http://developers.facebook.com/docs/reference/dialogs/requests/](http://developers.facebook.com/docs/reference/dialogs/requests/)

# mysql - 插入忽略不会忽略

> ID：11009153
> 
> 赞同：0
> 
> 时间：2012-06-13T06:12:40.077
> 
> 标签：mysql, sql, insert, exists

此代码：将**始终**插入行，从不检测存在

```
$r =  mysql_query("INSERT IGNORE INTO facebook (uid,fid) VALUES ('".$_SESSION['id']."','".$persone['id']."')") or die(mysql_error()); 
```

为什么？

编辑：请不要，输入值总是相同的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T06:22:23.807

`INSERT IGNORE`仅适用于主键字段。如果您的`facebook`表没有设置主键，您可以这样做：

```
alter table facebook add primary key (uid) 
```

在此之后，`INSERT IGNORE`不会插入重复的行。

# ios - 为什么我的平移手势只会轻推其视图并停止？

> ID：11009154
> 
> 赞同：3
> 
> 时间：2012-06-13T06:12:42.407
> 
> 标签：ios, uipangesturerecognizer

这是 UIPanGesture 子类：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"touches began");
   self ->origLoc = [[touches anyObject] locationInView:self.view.superview];
   [super touchesBegan:touches withEvent:event];
}

- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
if (self.state == UIGestureRecognizerStatePossible) {
    CGPoint loc = [[touches anyObject] locationInView:self.view.superview];
    CGFloat deltaX = fabsf(loc.x - origLoc.x);
    CGFloat deltaY = fabsf(loc.y - origLoc.y);
    if (deltaY >= deltaX) {
        self.state = UIGestureRecognizerStateFailed;
    } else {
    [super touchesMoved:touches withEvent:event];
    }
}
}

- (CGPoint) translationInView:(UIView *)v {

CGPoint proposedTranslation = [super translationInView:v];
proposedTranslation.y = 0;
return proposedTranslation;

} 
```

这是我的子类 UIPanGesture 调用的方法：

```
- (void)dragging: (UIPanGestureRecognizer *)p {    

UIView *vv = p.view;

if (p.state == UIGestureRecognizerStateBegan || p.state == UIGestureRecognizerStateChanged) {
    CGPoint delta = [p translationInView:vv.superview];
    CGPoint c = vv.center;
    c.x += delta.x;
    c.y += delta.y;
    vv.center = c;
    [p setTranslation:CGPointZero inView:vv.superview];
 }    
} 
```

当我试图拖动我的视图时，它只是移动了一个非常小的量然后停止。我需要继续轻推它才能让它移动。有任何想法吗？

提前致谢，

迈克尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T01:11:10.473

在我之前的评论中，我不清楚您为什么要进行子类化，但您澄清了这是因为您有多个手势处理程序正在进行。很好。

因此，这里有一些自定义平移手势的示例代码，Horizo​​ntalPanGestureRecognizer，仅当第一个移动是水平的时才会触发：

```
// HorizontalPanGestureRecognizer.h

#import <UIKit/UIKit.h>

@interface HorizontalPanGestureRecognizer : UIPanGestureRecognizer
@end 
```

和

```
// HorizontalPanGestureRecognizer.m

#import "HorizontalPanGestureRecognizer.h"
#import <UIKit/UIGestureRecognizerSubclass.h>

@interface HorizontalPanGestureRecognizer ()
{
    BOOL _hasConfirmedDirection;
    BOOL _wasHorizontal;
    CGPoint _origLoc;
}
@end

@implementation HorizontalPanGestureRecognizer

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesBegan:touches withEvent:event];

    UITouch *touch = [touches anyObject];

    _hasConfirmedDirection = NO;

    _origLoc = [touch locationInView:self.view];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesMoved:touches withEvent:event];
    if (self.state == UIGestureRecognizerStateFailed) return;

    if (!_hasConfirmedDirection)
    {
        CGPoint translation = [self translationInView:self.view];

        _hasConfirmedDirection = YES;
        _wasHorizontal = (fabs(translation.x) > fabs(translation.y));
    }
    if (!_wasHorizontal)
        self.state = UIGestureRecognizerStateFailed;
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesEnded:touches withEvent:event];

    if (!_wasHorizontal)
        self.state = UIGestureRecognizerStateFailed;
}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesCancelled:touches withEvent:event];

    if (!_wasHorizontal)
        self.state = UIGestureRecognizerStateFailed;
}

- (CGPoint)locationInView:(UIView *)view
{
    CGPoint superLocation = [super locationInView:view];

    if (_hasConfirmedDirection)
        superLocation.y = _origLoc.y;

    return superLocation;
}

- (CGPoint)translationInView:(UIView *)view
{
    CGPoint superTranslation = [super translationInView:view];

    if (_hasConfirmedDirection)
        superTranslation.y = 0.0f;

    return superTranslation;
}

@end 
```

然后你可以让你的主视图控制器中的处理程序适当地使用它（在这个例子中，只是拖动一个 UILabel ）。在 viewDidLoad 中，创建手势：

```
HorizontalPanGestureRecognizer *recognizer = [[HorizontalPanGestureRecognizer alloc] initWithTarget:self action:@selector(handleCustomPan:)];
[self.view addGestureRecognizer:recognizer]; 
```

然后处理程序看起来像：

```
- (void)handleCustomPan:(UIPanGestureRecognizer *)sender 
{    
    switch (sender.state) {
        case UIGestureRecognizerStateChanged:
            if (!_panLabel)
            {
                // In my case I'm creating a UILabel to drag around, whereas you might just drag
                // whatever countrol you want to drag.
                //
                // But, regardless, I'm keeping track of the original center in _panLabelOrigCenter

                [self makePanLabel:sender]; 
            }

            CGPoint translate = [sender translationInView:self.view];
            _panLabel.center = CGPointMake(_panLabelOrigCenter.x + translate.x, _panLabelOrigCenter.y + translate.y);

            break;

        case UIGestureRecognizerStateEnded:
            [self removePanLabel];
            break;

        default:
            break;
    }
} 
```

（显然，这是 ARC 代码。如果不是 ARC，请添加必要的附加代码行以进行例行内存管理。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T06:27:22.773

触摸移动的失败情况看起来对早期运动非常敏感。

考虑让它不那么敏感...

```
- (BOOL)movementIsHorizontalX:(CGFloat)x andY:(CGFloat) y {

    CGFloat absX = fabs(x);
    CGFloat absY = fabs(y);

    // if x is small, then accept small y values but not large ones
    if (absX < 4) return absY < 4;

    // now we can express horizontal-ness as a slope.  we've ruled out small x, so this is a stable calculation
    CGFloat slope = absY / absX;
    return slope < 0.10;

    // you could generalize by passing in the x threshold and percentage slope constants
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T19:29:13.303

我意识到我的错误。我搬家了

```
 [super touchesMoved: touches withEvent:event]; 
```

在 if 语句之外，现在它似乎工作正常。不是 100% 确定它为什么现在有效，但我很高兴它确实有效。

现在要弄清楚如何防止 UIScrollView 接受平移手势，直到这个手势取消/失败......

# python - 如何在python中分隔符的第一个实例上拆分字符串

> ID：11009155
> 
> 赞同：12
> 
> 时间：2012-06-13T06:12:45.957
> 
> 标签：python, regex, string

我需要使用 python 拆分字符串，但仅在字符串中分隔符的第一个实例上。

我的代码：

```
for line in conf.readlines():
    if re.search('jvm.args',line):
        key,value= split('=',line)
        default_args=val 
```

问题是 `line`，其中包含`jvm.args`如下所示：

```
'jvm.args = -Dappdynamics.com=true, -Dsomeotherparam=false,' 
```

我希望我的代码`jvm.args`在第一个“=”时偶然拆分为键和值变量。re.split 默认情况下会这样做吗？如果没有建议将不胜感激！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-13T06:17:09.253

这[`str.partition`](http://docs.python.org/library/stdtypes.html#str.partition)是为了：

```
>>> 'jvm.args= -Dappdynamics.com=true, -Dsomeotherparam=false,'.partition('=')
('jvm.args', '=', ' -Dappdynamics.com=true, -Dsomeotherparam=false,') 
```

从文档：

> **str.partition(sep)**
> 
> 在第一次出现 sep 时拆分字符串，并返回一个 3 元组，其中包含分隔符之前的部分、分隔符本身和分隔符之后的部分。如果未找到分隔符，则返回一个包含字符串本身的 3 元组，后跟两个空字符串。
> 
> 2.5 版中的新功能。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-13T06:26:46.363

从[`split`文档](http://docs.python.org/library/stdtypes.html#str.split)

> str.split([sep[, maxsplit]])
> 
> 返回字符串中单词的列表，使用 sep 作为分隔符字符串。如果给定 maxsplit，则最多完成 maxsplit 拆分（因此，列表最多有 maxsplit+1 个元素）

```
>>> 'jvm.args= -Dappdynamics.com=true, -Dsomeotherparam=false,'.split('=',1)
['jvm.args', ' -Dappdynamics.com=true, -Dsomeotherparam=false,'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T06:18:18.550

我认为这应该有效：

```
lineSplit = line.split("=")
key = lineSplit[0]
value = "=".join(lineSplit[1:]) 
```

正如有人在评论中建议的那样：您可以只解析一次字符串并找到 "=" ，然后从该点拆分它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T06:24:03.303

我想我会把我的评论变成（未经测试的）代码，因为它可能在低于`str.partition()`. 例如，对于需要正则表达式的更复杂的分隔符，您可以使用`re.match()`find `pos`。但三联画的建议得到了我的投票。

干得好：

```
pos = -1
for i, ch in enumerate(line):
    if ch == '=':
        pos = i
        break
if pos < 0: raise myException()

key = line[:pos]
value = line[pos+1:] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T06:49:46.530

我会完全跳过使用正则表达式，对于简单的字符串比较，它们并不是真正需要的。

示例代码使用内联方法生成 dict 内置用于生成字典的键值元组（我没有打扰文件迭代代码，您的示例在那里是正确的）：

```
line="jvm.args= -Dappdynamics.com=true, -Dsomeotherparam=false, "

# Detect a line that starts with jvm.args
if line.strip().startswith('jvm.args'):
    # Only interested in the args
    _, _, args = line.partition('=')

    # Method that will yield a key, value tuple if item can be converted
    def key_value_iter(args):
        for arg in args:
            try:
                key, value = arg.split('=')
                # Yield tuple removing the -d prefix from the key
                yield key.strip()[2:], value
            except:
                # A bad or empty value, just ignore these
                pass

    # Create a dict based on the yielded key, values
    args = dict(key_value_iter(args.split(','))) 
```

打印参数将返回：

```
{'appdynamics.com': 'true', 'someotherparam': 'false'} 
```

我想这就是你真正追求的；）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T07:04:48.473

正如您在[上一个问题](https://stackoverflow.com/questions/11008681/python-search-for-a-string-and-append-to-it-using-regular-expression)中所建议的那样， ConfigParser 是最直接的方法：

```
import ConfigParser

from io import StringIO

conf = u"""
[options]
foo=bar
jvm.args= -Dappdynamics.com=true, -Dsomeotherparam=false, 
"""

config = ConfigParser.ConfigParser()
config.readfp(StringIO(conf))
print config.get('options', 'jvm.args') 
```

# oracle - 如果列不存在则更改表

> ID：11009156
> 
> 赞同：5
> 
> 时间：2012-06-13T06:12:51.697
> 
> 标签：oracle, oracle11g, alter-table

在表中，我想检查特定列是否存在。如果该列不存在，我想更改表并创建该列。

我正在使用 Oracle 11g。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T06:24:02.760

尝试这个：

```
declare p_count NUMBER;

select count(1) int p_count
from ALL_TAB_COLUMNS 
where OWNER = '<SCHEMA_NAME>' 
and TABLE_NAME = '<TABLE_NAME>' 
and COLUMN_NAME = '<COLUMN_NAME>';

IF p_count = 0 THEN
    --add your column
END IF; 
```

最终（取决于权利）您可以使用`user_tab_columns`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-01T21:47:53.620

或者，您可以忽略该错误：

```
declare
    column_exists exception;
    pragma exception_init (column_exists , -01430);
begin
    execute immediate 'ALTER TABLE db.tablename ADD columnname NVARCHAR2(30)';
    exception when column_exists then null;
end;
/ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T07:10:19.557

如果您只想添加不存在的列，只需发出`ALTER TABLE ADD (mycolumn ...);`. 如果语句引发异常 ( `ORA-01430: column being added already exists in table`)，则该列已经存在，您可以忽略该异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T06:20:00.320

查看 user_tab_columns 表以检查该列是否存在，并相应地执行

# node.js - CloudFoundry 上的 NodeJS：应用程序文件名

> ID：11009162
> 
> 赞同：1
> 
> 时间：2012-06-13T06:13:18.610
> 
> 标签：node.js, cloud-foundry

我正在 CloudFoundry [http://docs.cloudfoundry.com/frameworks/nodejs/nodejs.html](http://docs.cloudfoundry.com/frameworks/nodejs/nodejs.html)上部署 NodeJS 应用程序。
我的应用程序基于[https://github.com/seafoox/node-express-twitter-bootstrap](https://github.com/seafoox/node-express-twitter-bootstrap)。这里我们有两个 js 文件

1) server.js
2) app.js。

server.js 用作此应用程序的起点。当我将它部署到 CloudFoundry 时，应用程序无法正常工作。我通过使用命令“node server.js”在本地主机上运行它成功地测试了它。在进一步调试时，我发现 CloudFoundry 通过调用“node app.js”来启动应用程序。是否可以通过调用“node server.js”来配置 CloudFoundry 服务器以启动应用程序。我可以通过使用 package.json 来实现这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T08:46:10.953

您可以在 package.json 文件中指定启动脚本，如下所示；

{ "name":"hello-node", "version":"0.0.1", "dependencies":{ "express":"" }, "scripts": { "start": "server" } }

在这种情况下，如果我有两个脚本 app.js 和 server.js，npm 将使用 server.js 而不是 app.js。如果您实际上在应用程序的根目录中只有 server.js，那么 npm 无论如何都会默认运行它。

有关 package.json 的更多信息，请参阅[http://npmjs.org/doc/json.html](http://npmjs.org/doc/json.html)

# javascript - 按键查找数组中最近的 2 个元素

> ID：11009167
> 
> 赞同：-2
> 
> 时间：2012-06-13T06:13:48.943
> 
> 标签：javascript, jquery, arrays, object

我正在寻找一个函数，该函数将根据已知对象值从对象数组中搜索壁橱 2 元素。如果存在直接匹配，该函数将返回 2 个最接近的元素的索引或单个索引。它将通过每个元素中的 p 变量进行搜索。

（可以安全地假设 p 变量不会出现多次）

```
var orbit = [ // p is percent
    { p:   0, x:   0, y:   0, z: 1.2 }  
    { p:  30, x:  30, y: 100, z: 0.5 }  
    { p:  45, x: 100, y:  30, z: 0.7 }  
    { p:  75, x:  60, y:   0, z: 1.0 }  
    { p: 100, x:   0, y:   0, z: 1.2 }  
];

function ValueToIndexes (value) {
    return [close1, close2];
}; 
```

如果值为 60，它将返回 [2,3]
如果值为 30，它将返回 [1]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:31:05.230

可能是这样的：

```
function ValueToIndexes(orbit, value) {
    var sorted = orbit.sort(function (obj1, obj2) {
        return Math.abs(obj1.p - value) - Math.abs(obj2.p - value);
    });

    if (sorted[0].p === value)
        return [sorted[0]];

    return [sorted[0], sorted[1]];
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T15:01:59.477

```
var ValueToIndices = function (orbit, value) {

    var 
        /* storage for distances */
        distances = [],

        /* sort helper */ 
        sortByDistance = function (a, b) {
            return a.d - b.d;
        };

    /* iterate over orbit */
    for (var i = 0; i < orbit.length; i++) {

        /* a direct match returns immediately */
        if (orbit[i].p === value) {
            return [i];
        }

        /* else collect all distances to the value */
        distances.push({
            i: i,
            d: Math.abs(orbit[i].p - value)
        });
    }

    /* sort the distances */
    distances.sort(sortByDistance);

    /* return the indices of the first two */
    return [distances[0].i, distances[1].i];
}; 
```

# c# - 在 Windows Phone 7 应用程序的日历中选择日期时出现 NotSupportedException 异常

> ID：11009168
> 
> 赞同：0
> 
> 时间：2012-06-13T06:13:49.803
> 
> 标签：c#, windows-phone-7, calendar

我正在做一个 Windows Phone 7 应用程序，它使用来自 namespace 的日历控件`System.Windows.Controls`。我的日历控件位于同一命名空间的 TabControl 内。

当我选择一个日期时，会收到以下“NotSupportedException”消息：

> “这种类型的 Collection 不支持从不同于 Dispatcher 线程的线程更改其 SourceCollection。”

这种类型的错误可能是什么原因，我可以为此提供解决方案吗？![在此处输入图像描述](../Images/e71e32dc183d0be0d8bd0972fc4c0bf5.png)

异常详细信息：未处理 System.NotSupportedException 消息=此类集合不支持从不同于 Dispatcher 线程的线程更改其 SourceCollection。StackTrace：在 System.Windows.Controls.SelectedDatesCollection.InsertItem(Int32 index, DateTime item) at System.Collections.ObjectModel.Collection`1.Add(DateTime item) at System.Windows.Controls.SelectedDatesCollection.AddRange(DateTime start, DateTime end) 在 System.Windows.Controls.Primitives.CalendarItem.AddSelection(CalendarDayButton b) 在 System.Windows.Controls.Primitives.CalendarItem.Cell_MouseLeftButtonUp(Object sender, MouseButtonEventArgs e) 在 System.Windows.Controls.Primitives.CalendarDayButton.OnMouseLeftButtonUp( MouseButtonEventArgs e) 在 System.Windows.Controls.Control。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:50:02.363

当您更改此日期时会发生什么？我的意思是有什么处理这个事件吗？您似乎正在尝试从 UI 线程以外的其他线程更改列表（可能是列表框中的数据源？）。

# c# - 强制 HtmlAgilityPack 使用 chrome

> ID：11009172
> 
> 赞同：0
> 
> 时间：2012-06-13T06:13:59.230
> 
> 标签：c#, xpath, web-scraping, html-agility-pack

如何强制 HtmlAgilityPack 使用 Chrome 对 XPath 中某些内容的解释？

例如，这两行代码指向网页上完全相同的内容，但是 xpath 完全不同。

对于铬：

```
/html/body[@class=' hasGoogleVoiceExt']/div[@class='fjfe-bodywrapper']/div[@id='fjfe-real-body']/div[@id='fjfe-click-wrapper']/div[@id='appbar']/div[@class='elastic']/div[@class='appbar-center']/div[@class='appbar-snippet-primary']/span 
```

对于火狐：

```
//*[@id='appbar']/div/div[2]/div[1]/span 
```

我想使用 Chrome，但是对于这两个查询我都收到了 null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:19:25.257

Html Agility Pack 不依赖于任何浏览器。它使用 .NET XPATH 实现。你不能改变它，除非你完全重写它。

您在浏览器中看到的 HTML 可能与您为 url 下载的 HTML 非常不同，因为第一个 HTML 可能已被动态代码（javascript、DHTML）修改。

如果您有现有的 HTML 或 URL，我们可以为您提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T16:12:53.487

这是我使用从 Chrome 复制的 XPATH 发现的结果： - 我必须删除所有 tbody 元素并将正斜杠加倍，然后以下代码将返回正确的元素。

> doc.DocumentNode.SelectSingleNode("//html//body//center//table[3]//tr//td//table//tr//td//table//tr//td//table[ 3]//tr[3]//td[3]//table//tr//td//table");

# c# - 如何在 TcpListener 线程和主线程之间传输数据？

> ID：11009178
> 
> 赞同：0
> 
> 时间：2012-06-13T06:14:32.680
> 
> 标签：c#, tcp, buffer, tcplistener

我有一个基于 C# 的套接字通信线程。服务器中的缓冲区是 1024 字节，现在我需要一种在通信线程和主线程之间传输数据的方法。我怎样才能做到这一点？我是否需要打开一个新缓冲区，然后将数据复制到其中？或者我可以从客户端或服务器的缓冲区中获取数据吗？

```
private void ServerResponse()
    {
        byte[] buff = new byte[1024];
        string msg;
        int len;
        try
        {
            if (!Stream.CanRead)
            {
                return;
            }

            stopFlag = false;
            while (!stopFlag)
            {
              len = Stream.Read(buff, 0, buff.Length);
                if (len < 1                    
                  {
                    Thread.Sleep(200);
                    continue;
               }
            }
       }
 } 
```

以上是服务器用来从客户端获取数据的函数。我的问题是我是否可以将此函数获取的数据发送到主线程，或者我应该在上面的函数定义之外设置一个新缓冲区并将数据复制到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:19:38.933

如果您的主线程通常称为 UI 线程，那么本次讨论将为您提供一些想法：[如何使用后台工作人员更新 GUI](https://stackoverflow.com/questions/1862590/how-to-update-gui-with-backgroundworker)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T06:21:31.540

您需要将收到的消息写入主线程可访问的缓冲区。您可以通过为每个接收到的消息创建一个新缓冲区（一个字节数组）并将该缓冲区添加到[ConcurrentQueue<>](http://msdn.microsoft.com/en-us/library/dd267265.aspx)来做到这一点，这对于多线程读取器/写入器场景很有用。这样，您的侦听线程会将收到的消息写入队列，并且您的主线程可以以线程安全的方式从同一队列中读取消息。

根据您的用例，您可能能够构建一个更有意义的对象（例如请求对象）并将其传递给主线程而不是传递字节。

编辑：基于评论

假设您`ConcurrentQueue<byte[]>`在公共范围内定义了 a ：

```
public ConcurrentQueue<byte[]> ReceivedMsgs = new ConcurrentQueue<byte[]>(); 
```

您可以在侦听器线程中执行类似的操作（在将消息字节读入之后`buff`）：

```
var msg = new byte[len];
Buffer.BlockCopy(buff, 0, msg, 0, len);
this.ReceivedMsgs.Enqueue(msg); 
```

然后在主线程中，您可以将消息出列：

```
byte[] msg;
if (server.ReceivedMsgs.TryDequeue(out msg))
{
    //use msg
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T06:24:55.340

取决于数据需要如何传输到主线程。如果以字节为单位，则直接调用以下代码即可。如果没有，首先将数据转换为可呈现的形式，然后调用代码：

```
// Place this on the main thread's class initialization.
private static readonly SynchronizationContext _syncContext =
    SynchronizationContext.Current;

// Then your worked thread will be like this:
if (len < 1)                  
{
    Thread.Sleep(200);
    continue;
}
else
{
    _syncContext.Post(o => MainThreadClass.ReceiveData((byte[])buff), buff);
} 
```

# nunit - 如何教 SpecFlow 向我的测试类添加额外的 NUnit 属性

> ID：11009181
> 
> 赞同：8
> 
> 时间：2012-06-13T06:14:43.047
> 
> 标签：nunit, specflow, class-attributes

[SpecFlow](http://www.specflow.org)很棒——它对我们进行适当的集成测试很有帮助。

我想知道的一件事是是否有办法告诉 SpecFlow 向它在功能代码隐藏文件中创建的测试类添加额外的 NUnit 属性。

现在，我的测试类生成如下：

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("TechTalk.SpecFlow", "1.8.1.0")]
[System.Runtime.CompilerServices.CompilerGeneratedAttribute()]
[NUnit.Framework.TestFixtureAttribute()]
[NUnit.Framework.DescriptionAttribute("Some action description here")]
public partial class MySampleFeature
{  
   ......
} 
```

SpecFlow 中有什么方法可以告诉它添加一个额外的 NUnit 属性来定义测试的类别 - 像这样：

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("TechTalk.SpecFlow", "1.8.1.0")]
[System.Runtime.CompilerServices.CompilerGeneratedAttribute()]
[NUnit.Framework.TestFixtureAttribute()]
[NUnit.Framework.DescriptionAttribute("Some action description here")]
[NUnit.Framework.Category("LongRunningTests")]   <== add this "Category" attribute
public partial class MySampleFeature
{  
   ......
} 
```

将其手动添加到生成的代码隐藏是浪费 - 下次 SpecFlow 重新生成该代码隐藏时，我必须记住再做一次（很可能，我会忘记）。

如果 SpecFlow 中尚不存在该功能 - 如何请求添加此功能？:-)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T06:43:39.463

事实上，如果您在功能或场景上使用[标签（查找标签部分）](https://github.com/techtalk/SpecFlow/wiki/Using-Gherkin-Language-in-SpecFlow)`NUnit.Framework.Category` ，则该属性已受支持。所以如果你写

```
@LongRunningTests
Feature: MySampleFeature 
```

它将生成正确的`Category`属性。

但是，如果您想拥有其他自定义属性，则需要编写一个自定义生成器提供程序来实现接口，并在配置的 specflow 部分中`IUnitTestGeneratorProvider`注册[unitTestProvider](https://github.com/techtalk/SpecFlow/wiki/Configuration)的属性。`generatorProvider`

[您可以在github](https://github.com/techtalk/SpecFlow/tree/master/Generator/UnitTestProvider)找到内置实现的源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-24T01:24:28.980

要添加到@nemesv 的好答案，添加后：

@LongRunningTests 功能：MySampleFeature

要从控制台执行，请执行以下操作：

nunit3-console.exe myTests.dll --where "cat==LongRunningTests"

# php - 如何在 HMVC CodeIgniter 中设置主控制器

> ID：11009188
> 
> 赞同：1
> 
> 时间：2012-06-13T06:15:28.023
> 
> 标签：php, codeigniter

我在 CodeIgniter 中使用 HMVC [https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home)

如何设置在访问仅限用户的页面时自动运行的控制器。这是为了检查用户当前是否登录。我已经做了一个助手来检查用户是否登录：

```
<?php 
if(!defined('BASEPATH')) exit('No direct script access allowed');
if (!function_exists('is_logged_in')){
    function is_logged_in(){
        $CI =& get_instance();
        $logged_in = FALSE;
        $user_data = $CI->session->userdata('logged_in');
        if(!empty($user_data)){
            $logged_in = TRUE;
        }
        return $logged_in;
    }   
} 
```

但我唯一知道的是在每个模块上的每个控制器的构造函数上调用此方法。我会在每个控制器上重复相同的代码，只是为了检查用户是否登录。基本上我希望每次用户尝试访问模块目录中的内容时调用这个函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:24:42.017

一种选择是扩展主控制器类（我猜是 CI_contorller）并在该控制器的构造函数中调用此辅助方法。然后从这个新控制器扩展所有其他用户相关的控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:49:17.373

您可以为此使用 _remap()。如果您正在使用一个，您可以将它放在 MY_Controller 中，有关更多信息，请阅读[控制器用户指南](http://codeigniter.com/user_guide/general/controllers.html)

这是您可以开始的事情。

```
function _remap($method)
{
    if (method_exists($this, $method) && $this-my_custom_helper->is_logged_in())
    {
        $this->$method();
    }
    else
    {
        redirect('/auth/login/');
    }
} 
```

# sql - 将表数据从一个 SQL Server 导出到另一个

> ID：11009189
> 
> 赞同：83
> 
> 时间：2012-06-13T06:15:28.323
> 
> 标签：sql, sql-server, sql-server-2005, export

我有两个 SQL Server（都是 2005 版）。

我想将几个表从一个迁移到另一个。

我试过了：

*   在源服务器上，我右键单击数据库，选择`Tasks/Generate scripts`. 问题是下`Table/View options`没有`Script data`选项。

*   然后我用来`Script Table As/Create script`生成 SQL 文件以便在我的目标服务器上创建表。但我仍然需要所有数据。

然后我尝试使用：

```
SELECT * 
INTO [destination server].[destination database].[dbo].[destination table] 
FROM [source server].[source database].[dbo].[source table] 
```

但我得到了错误：

> 对象包含超过最大数量的前缀。最大值为 2。

有人可以指出我的问题的正确解决方案吗？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-06-13T06:24:17.987

试试这个：

1.  `Script Table As / Create Script`使用步骤中的脚本在目标服务器上创建表

2.  在目标服务器上，您可以发出 T-SQL 语句：

    ```
    INSERT INTO dbo.YourTableNameHere
       SELECT *
       FROM [SourceServer].[SourceDatabase].dbo.YourTableNameHere 
    ```

这应该工作得很好。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2014-09-30T15:32:14.560

只是为了显示另一个选项（对于 SQL Server 2008 及更高版本）：

1.  右键单击数据库-> 选择“任务”-> 选择“生成脚本”
2.  选择要复制的特定数据库对象。假设一张或多张桌子。点击下一步
3.  单击高级并向下滚动到“要编写脚本的数据类型”，然后选择“架构和数据”。点击确定
4.  选择保存生成脚本的位置，然后单击下一步继续

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-13T06:24:16.643

任务/生成脚本中有脚本表选项！一开始我也错过了！但是您可以在那里生成插入脚本（非常好的功能，但在非常不直观的地方）。

当您进入“设置脚本选项”步骤时，请转到“高级”选项卡。

[这里](http://www.sqlblog.lv/2012/06/skriptu-generesana-tabulas-datiem.html)描述的步骤（图片可以理解，但我在那里用拉脱维亚语写）。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-06-13T06:25:48.540

尝试使用 SQL Server[导入和导出向导](http://msdn.microsoft.com/en-us/library/ms141209.aspx)（在任务 -> 导出数据下）。

它提供在目标数据库中创建表。然而，正如您所见，脚本向导只能创建表结构。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-03-29T12:39:23.167

如果您没有链接服务器的权限，以下是使用 Sql Server 导入/导出向导将表从一台服务器导入到另一台服务器的步骤：

*   右键单击要从中复制的源数据库。
*   选择任务 - 导出数据。
*   在数据源中选择 Sql Server Native Client。
*   选择您的身份验证类型（Sql Server 或 Windows 身份验证）。
*   选择源数据库。
*   接下来，选择目标：Sql Server Native Client
*   输入您的服务器名称（要将表复制到的服务器）。
*   选择您的身份验证类型（Sql Server 或 Windows 身份验证）。
*   选择目标数据库。
*   选择复制数据。
*   从列表中选择您的表。
*   点击下一步，选择立即运行，或者如果您想稍后运行，也可以选择将包保存到文件或 Sql Server。
*   结束

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-06-13T06:38:40.003

如果已经使用脚本创建了表，那么还有另一种复制数据的方法是使用 BCP 命令将所有数据从源服务器复制到目标服务器

**要将表数据导出到源服务器上的文本文件中：**

```
bcp <database name>.<schema name>.<table name> OUT C:\FILE.TXT -c -t -T -S <server_name[ \instance_name]> -U <username> -P <Password> 
```

**从目标服务器上的文本文件导入表数据：**

```
bcp <database name>.<schema name>.<table name> IN C:\FILE.TXT -c -t -T -S <server_name[ \instance_name]> -U <username> -P <Password> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-06-13T06:23:06.760

用于将数据从源复制到目标：

```
use <DestinationDatabase>
select * into <DestinationTable> from <SourceDataBase>.dbo.<SourceTable> 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-06-13T11:39:10.863

只是为了踢球。

由于我无法创建链接服务器并且仅连接到生产服务器还不足以使用`INSERT INTO`我做了以下操作：

*   创建了生产服务器数据库的备份
*   在我的测试服务器上恢复了数据库
*   执行插入语句

它是一个后门解决方案，但由于我遇到了问题，它对我有用。

由于我创建了空表`SCRIPT TABLE AS / CREATE`，以便传输我无法使用的所有键和索引`SELECT INTO`。`SELECT INTO`仅当目标位置上不存在表但它不复制键和索引时才有效，因此您必须手动执行此操作。using 语句的缺点`INSERT INTO`是您必须手动提供所有列名，而且如果某些外键约束失败，它可能会给您带来一些问题。

感谢所有的回答者，有一些很好的解决方案，但我决定接受 marc_s anwser。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-06-13T06:22:42.040

您不能选择源/目标服务器。

如果数据库在同一台服务器上，您可以这样做：

如果表的列相等（包括顺序！），那么您可以这样做：

```
INSERT INTO [destination database].[dbo].[destination table]
SELECT *
FROM [source database].[dbo].[source table] 
```

如果你想这样做一次，你可以备份/恢复源数据库。如果您需要更频繁地执行此操作，我建议您启动一个 SSIS 项目，在其中定义源数据库（在那里您可以选择任何服务器上的任何连接）并创建一个项目，您可以将数据移动到那里。在此处查看更多信息：http: [//msdn.microsoft.com/en-us/library/ms169917%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-us/library/ms169917%28v=sql.105%29.aspx)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-03-28T01:06:30.150

可以通过 SQL Server Management Studio 中的“导入/导出数据...”来完成

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-07-16T20:08:43.627

这在某种程度上是一个解决方案，但它对我有用，我希望它也适用于其他人的这个问题：

您可以在要导出的表上运行 select SQL 查询，并将结果保存为驱动器中的 .xls。

现在创建要添加包含所有列和索引的数据的表。这可以通过右键单击实际表并选择 Create To script 选项轻松完成。

现在您可以右键单击要添加表的数据库，然后选择 Tasks>Import 。

导入导出向导打开并选择下一步。选择 Microsoft Excel 作为输入数据源，然后浏览并选择您之前保存的 .xls 文件。

现在选择目标服务器以及我们已经创建的目标表。

注意：如果有任何基于身份的字段，在目标表中您可能希望删除身份属性，因为该数据也将被插入。因此，如果您仅将其作为 Identity 属性，则导入过程会出错。

现在点击下一步并点击完成，它将显示正在导入的记录数，如果没有发生错误则返回成功。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-11-03T15:48:09.557

如果你有另一个选择：c# .net。特别是 Microsoft.SqlServer.Management.Smo 命名空间。

我在我的一个 SSIS 包的脚本组件中使用类似于以下的代码。

```
var tableToTransfer = "someTable";
var transferringTableSchema = "dbo";

var srvSource = new Server("sourceServer");
var dbSource = srvSource.Databases["sourceDB"];

var srvDestination = new Server("destinationServer"); 
var dbDestination = srvDestination.Databases["destinationDB"];

var xfr = 
    new Transfer(dbSource) {
        DestinationServer = srvDestination.Name,
        DestinationDatabase = dbDestination.Name,
        CopyAllObjects = false,
        DestinationLoginSecure = true,
        DropDestinationObjectsFirst = true,
        CopyData = true
    };

xfr.Options.ContinueScriptingOnError = false; 
xfr.Options.WithDependencies = false; 

xfr.ObjectList.Add(dbSource.Tables[tableToTransfer,transferringTableSchema]);
xfr.TransferData(); 
```

我想我必须明确搜索 Microsoft.SqlServer.Smo 库并将其添加到引用中。但除此之外，这对我来说一直有效。

**更新**：命名空间和库比我记得的要复杂。

对于库，添加对以下内容的引用：

*   Microsoft.SqlServer.Smo.dll
*   Microsoft.SqlServer.SmoExtended.dll
*   Microsoft.SqlServer.ConnectionInfo.dll
*   Microsoft.SqlServer.Management.Sdk.Sfc.dll

对于命名空间，添加：

*   Microsoft.SqlServer.Management.Common
*   Microsoft.SqlServer.Management.Smo

# javascript - CKEditor 中有哪些 execCommand 命令可用？

> ID：11009193
> 
> 赞同：2
> 
> 时间：2012-06-13T06:15:52.150
> 
> 标签：javascript, ckeditor

谁能告诉我`execCommand`CKEditor 中有哪些可用的命令？喜欢`editor.execCommand('bold')`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-06T08:36:54.703

您可以使用的命令取决于已安装的插件。
这个可用的 CKEditor 命令列表可以使用`CKEDITOR.instances.editor1.commands`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T20:58:37.020

不幸的是，JSDocs 中没有指定命令。

但是，每个命令都是按`editor#addCommand`方法添加到编辑器中的，因此您可以为它们 grep 代码：

```
> grep -R addCommand * 
```

关于 Daevo 的回应 - 工具栏配置由按钮名称组成 - 而不是命令名称。通常每个按钮都有相应的命令，但不一定是规则。

> Tnnks for rply..是否有任何命令可以选择特定文本..？

有三个与选择相关的命令——“selectAll”、“selectNextCell”、“selectPreviousCell”。但是，如果您想进行自定义选择，请查看 Range 和 Selection API。简而言之 - 你必须创建范围和调用`range#select`方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T07:05:55.533

它们可以是任何命令。这将包括此处列出的所有内置命令[http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Toolbar](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Toolbar)

另外和命令您或插件创建。

我想重点是允许您调用 afterCommandExec 和 beforeCommandExec 以便您可以在单击按钮时执行自己的代码。

# xslt - 使用 JXPATH 添加节点

> ID：11009195
> 
> 赞同：1
> 
> 时间：2012-06-13T06:16:10.877
> 
> 标签：xslt, xpath, apache-commons, jxpath

我正在使用 jxpath 打印所有节点并将子节点添加到此 xml 中的功能标记

```
<extracts>
<extract>
<id>1</id>
<features>
<feature>1</feature>
<feature>2</feature>
</extract>
</extracts> 
```

这就是我的代码的样子（至少可以工作的部分 - 它打印一些信息）：

```
 import org.apache.commons.jxpath.ri.model.*;
    import org.apache.commons.jxpath.JXPathContext;
    import org.apache.commons.jxpath.Pointer;

try {
DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
ByteArrayInputStream bais = new ByteArrayInputStream(getBytesFromFile(file));
Document doc = builder.parse(bais);

JXPathContext jxpathCtx = JXPathContext.newContext(doc.getDocumentElement());
jxpathCtx.setLenient(true); 
```

我要求的第一部分——打印这些节点——是微不足道的：

```
for (Iterator iter2 = jxpathCtx.iterate("/extract/*"); iter2.hasNext();) 
{
    System.out.println("\n Value is : " + iter2.next().toString() +"\n");

} 
```

我要求的第二部分是我得到了什么

**我需要添加一个新条目 --a new *< feature >3</feature >*节点 UNDER UNDER UNDER UNDER`<features>`下`< extract >`**programatically

它可能类似于隔离该节点 - 然后向它​​添加一个子节点 - 我只是不知道如何去做：

```
org.apache.commons.configuration.HierarchicalConfiguration.NodeNode node = (Node)jxpathCtx.selectNodes("/extract/lastruns/lastrun");

for (Element node : nodes)
{

} 
```

任何想法/帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:28:20.480

**这个 XSLT 转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*" name="identity">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="feature[last()]">
  <xsl:call-template name="identity"/>
    <feature>3</feature>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于提供的 XML 文档时**（更正为格式正确）：

```
<extracts>
    <extract>
        <id>1</id>
        <features>
            <feature>1</feature>
            <feature>2</feature>
        </features>
    </extract>
</extracts> 
```

**产生想要的正确结果**：

```
<extracts>
   <extract>
      <id>1</id>
      <features>
         <feature>1</feature>
         <feature>2</feature>
         <feature>3</feature>
      </features>
   </extract>
</extracts> 
```

**说明**：

正确使用和覆盖**[身份规则](http://www.dpawson.co.uk/xsl/sect2/identity.html)**。

# selenium - 出现错误：缺失；在 Selenium IDE 中

> ID：11009199
> 
> 赞同：-1
> 
> 时间：2012-06-13T06:16:53.257
> 
> 标签：selenium

我正在使用下面的 javascript 起诉 storeEval 命令：

```
Command: storeEval

Target : javascript{

var d= new Date();
var a= d.getDate();
var b= d.getMonth()+1;
var c=d.getFullYear();
var x=d.getHours();
var y= d.getMinutes();
var z= d.getSeconds();
var f=new String();
var s=f.concat(b+'/'+a+'/'+c);
var f1=new String();
var s1= f1.concat(x+':'+y+':'+z);
var time; 
if(x<12) {  time='Am'; } 
else { time='Pm'; }
var s2 = f1.concat(s+'\t'+s1+'\t'+time); s2

}

Value: abc 
```

我收到以下错误：

> [错误] 抛出异常：缺失；声明之前。

我将日期存储在一个变量`abc`中，以便我可以进一步将其与标签匹配。

请帮忙。

问候，

安贾利·瓦斯瓦尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T06:24:30.763

使用此代码

```
 Command: storeEval

 Target : javascript(var d= new Date();
 var a= d.getDate();
 var b= d.getMonth()+1;
 var c=d.getFullYear();
 var x=d.getHours();
 var y= d.getMinutes();
 var z= d.getSeconds();
 var f=new String();
 var s=f.concat(b+'/'+a+'/'+c);
 var f1=new String();
 var s1= f1.concat(x+':'+y+':'+z);
 var time; 
 if(x<12) {  time='Am'; } 
 else { time='Pm'; }
 var s2 = f1.concat(s+'\t'+s1+'\t'+time); s2)

 Value: abc 
```

在 java 脚本中使用“()”而不是“{}”。请让我知道它是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T13:39:44.357

我个人在尝试做这样的事情时遇到了这个错误..

```
storedVars['currentRow'] = ${currentRow}+1 
```

当我在脚本中进一步重命名变量时，更改了名称并且效果很好

```
storedVars['currentUserRow'] = ${currentUserRow}+1 
```

另外我正在使用流插件并尝试使用**gotoIf** (GoToIf) 命令，但发现我必须将变量括在引号中，猜测是这样字符串比较才能正常工作，[在这里找到了这个建议](https://groups.google.com/forum/#!topic/selenium-users/oFUmVr-2Fxo)

```
"${moduleScore}" == "Not observed" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T07:46:52.837

您发布的 java 脚本代码存在编译问题。这就是您收到错误的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-16T08:50:13.367

```
var s2 = f1.concat(s+'\t'+s1+'\t'+time); s2 
```

此行有错误。你缺少';' 在s2之后。更正并告诉我

# java - 文件分类器 - fileNotFoundException

> ID：11009206
> 
> 赞同：0
> 
> 时间：2012-06-13T06:17:13.200
> 
> 标签：java, user-interface, nullpointerexception, java.util.scanner, filenotfoundexception

我正在尝试创建一个程序来读取 a `File`，将内容（单词）保存在 an 中`ArrayList`，对 进行排序`ArrayList`，然后将*排序* `ArrayList`后的内容写回`File`.

我不知道为什么，它一直给我一个`FileNotFoundException`或一个`NullPointerException`（两者都在发生，这有点奇怪）......

这是我的代码，如果有人可以提供帮助，那就太好了。

谢谢。

顺便说一句，代码包含四个类：

DriverClass、View（GUI）、ReadFile 和 WriteFile。

你可以忽略评论，我只是为自己写的——它们很明显。对于“field.getText();” 假设用户输入 `C:\Users\Corecase\Desktop\test.txt` 我已经尝试过`C:\\Users\\Corecase\\Desktop\\test.txt)`，但这也不起作用。

再次感谢！

```
public class DriverClass 
{
    public static void main(String[] args)
    {
        View open= new View();
    }
} 
```

//看法

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;

public class View implements ActionListener
{
private JFrame frame = new JFrame("File Sorter");
private JPanel mainPane = new JPanel();
private JPanel textPane = new JPanel();
private JPanel buttonPane = new JPanel();
private JButton sortButton = new JButton("Sort");
private JLabel label = new JLabel("Enter file path: ");
public JTextField field = new JTextField(25);

private Font f = new Font("Trebuchet MS", Font.PLAIN, 20);

public View()
{
    frame.setSize(500,500);
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.add(mainPane);

    mainPane.setLayout(new GridLayout(2,1));
    mainPane.setBackground(Color.gray);

    mainPane.add(textPane);
    mainPane.add(buttonPane);

    textPane.setLayout(new GridLayout(2,1));
    textPane.add(label);
    textPane.add(field);
    buttonPane.add(sortButton);
    field.setFont(f);
    sortButton.setFont(f);
    label.setFont(f);

    sortButton.addActionListener(this);
}
public void actionPerformed(ActionEvent e)
{
    if(e.getSource() == sortButton)
    {
        ReadFile r = new ReadFile(field.getText());
        WriteFile w = new WriteFile(field.getText());

        r.openFile();
        r.readAndSortFile();
        r.closeFile();

        w.openFile();
        w.writeFile(r.getList());
        w.closeFile();
    }
}
} 
```

//读取文件

```
import java.io.*;
import java.util.*;

public class ReadFile extends View
{
private ArrayList<String> words = new ArrayList<String>();
private String fileName = new String();
private Scanner x;

public ReadFile(String address)
{
    fileName = address;
}
public void openFile()
{
    try
    {
        x = new Scanner(new File(fileName));
    }
    catch(Exception e)
    {
        field.setText("Could not read file.");
    }
}

public void readAndSortFile()
{
    while(x.hasNext())
        words.add(x.next());

    sort();
}

public void closeFile()
{
    x.close();
}

public ArrayList<String> sort()
{
    String temp = "";

    for(int index = 0; index < words.size(); index++)
    {
        for(int inner = 0; inner < words.size(); inner++)
        {
            if((words.get(inner)).compareTo(words.get(inner+1)) > 0)
            {
                temp = words.get(inner);
                words.set(inner, words.get(inner + 1));
                words.set(inner + 1, temp);
            }
        }
    }
    return words;
}

public ArrayList<String> getList()
{
    return words;
}
} 
```

//写文件

```
import java.io.*;
import java.util.*;
import java.lang.*;

public class WriteFile extends View
{
private Formatter x;
private String fileName = new String();

public WriteFile(String address)
{
    fileName = address;
}

public void openFile()
{
    try
    {
        x = new Formatter(fileName);
    }
    catch(Exception e)
    {
        field.setText("Could not write to file.");
    }
}

public void writeFile(ArrayList<String> myWords)
{
    for(int index = 0; index < myWords.size(); index++)
        x.format("%s", myWords.get(index), "\n");//%s means string - in this case ONE string
}

public void closeFile()
{
    x.close();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:46:59.833

您的代码中有几个问题：

*   `ReadFile`并且`WriteFile`正在扩展`View`，根据构造函数，您将有多个`JFrame`打开的实例，因为您使框架在构造函数中可见`frame.setVisible(true);`，`ReadFile`并且`WriteFile`只需要引用`JTextField`应该更新的内容，只需将其作为参数传递。

*   你`sort`肯定会`IndexOutOfBoundsException`为这条线投掷

    if ((words.get(inner)).compareTo(words.get(inner + 1)) > 0) {

    此行到达最后一个索引时将不起作用，为什么不使用简单`Collections.sort(words);`

*   你没有检查用户是否输入了路径，如果没有输入，你将进入`NullPointerException`你的`ReadFile`，理想情况下如果找不到文件，即你的扫描仪为空，不要继续。目前您正在显示一条错误消息，但您的代码并没有停在那里，它仍然会尝试读取和排序错误的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T06:56:24.167

我已经尝试了您的示例并对其进行了调试。我使用 c:\\dir\\file.text 作为 GUI 的参数并且文件被正确读取，所以它不存在你的问题。我得到的异常来自这段代码：

```
 for (int index = 0; index < words.size(); index++) {
        for (int inner = 0; inner < words.size(); inner++) {
            if ((words.get(inner)).compareTo(words.get(inner + 1)) > 0) {
                temp = words.get(inner);
                words.set(inner, words.get(inner + 1));
                words.set(inner + 1, temp);
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T10:18:48.360

您的代码中有几个问题。您正在扩展 View 以获取 textField 'field' 的引用！这不是要走的路。您应该使用异常处理来完成这个简单的任务。您也不能同时读取和写入文件！所以你需要在这里分开职责。当你读完文件后，关闭它，然后用你想使用的任何作家再次打开它。最后说明：您可以使用 FileChooser 获取路径，这样您就无需检查有效输入！如果你想做硬的方式并强制用户手动输入路径，你必须添加转义字符'/'，在你的情况下，一个有效的路径将是 `C:\\Users\\Corecase\\Desktop\\test.txt`

 `Change the following code in 'View.java'

```
 if (e.getSource() == sortButton)
    {
        ReadFile r;
        try
        {
            r = new ReadFile(field.getText());
            r.readAndSortFile();

            WriteFile w = new WriteFile(field.getText());
            w.writeFile(r.getList());

        } 
        catch (FileNotFoundException e1)
        {
            field.setText(e1.getMessage());
            e1.printStackTrace();
        }       
    } 
```

and change 'WriteFile.java' to

```
public class WriteFile
{
    private Formatter x;
    private String fileName;

    public WriteFile(String address) throws FileNotFoundException
    {
        fileName = address;
        try
        {
            x = new Formatter(fileName);
        } catch (Exception e)
        {
            throw new FileNotFoundException("Could not write to file.");
        }
    }

    public void writeFile(ArrayList<String> myWords)
    {
        for (int index = 0; index < myWords.size(); index++)
            x.format("%s%s", myWords.get(index), System.lineSeparator());

        // now you are done writing so close the file.

        x.close();
    }
} 
```

Change 'ReadFile.java' to` 

```
public class ReadFile
{
    private ArrayList<String> words;
    private String fileName;
    private Scanner x;

    public ReadFile(String path) throws FileNotFoundException
    {
        fileName = path;
        words = new ArrayList<String>();
        try
        {
            x = new Scanner(new File(fileName));
        } catch (Exception e)
        {
            throw new FileNotFoundException("File Doesn't exist in the place you specified.");
        }
    }

    public void readAndSortFile()
    {
        while (x.hasNext())
            words.add(x.next());
        Collections.sort(words);

        // Now you are done reading and sorting, so close the file.
        x.close();
    }

    .
    .
    .
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T10:42:55.537

`FileNotFoundException`表示未找到该文件。

`NullPointerException`表示您试图取消引用空指针。

如果那不能回答你的问题，我不知道是什么。StackOverflow 不是调试服务。

# grails - 连接表中的列不为空

> ID：11009209
> 
> 赞同：0
> 
> 时间：2012-06-13T06:17:39.350
> 
> 标签：grails, grails-orm

我有一个域类：

```
class Author {
    String name
    static hasMany = [superFantasticAndAwesomeBooks: Book, superBadAndUltraBoringBooks: Book]
} 
```

当使用内存数据库时，这一切都很好，但是，当在 Oracle 上运行时，`Book`集合在连接表中建模，因为列名太长而无法创建。

所以，然后我尝试指定连接表属性：

```
static mapping = {
    superFantasticAndAwesomeBooks joinTable: [key: awesomeBooks]
    superBadAndUltraBoringBooks joinTable: [key: boringBooks]
} 
```

问题（如果未指定，则不会发生`joinTable`）是连接表是在与`awesomeBooks`和对应的列的位置创建`boringBooks`的`NOT NULL`（它们需要为空，因为 a`Book`将是 an`awesomeBook`或 a `boringBook`）

有没有办法配置`joinTable`允许`NULL`列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:02:30.833

另一种选择是自己使用域类映射连接表，例如：

```
class AuthorBook {
    Author author
    Book book
    String status

    static constraints = {
        author(nullable:false)
        book(nullable:false)
        status(nullable:false,inList:['SuperFantasticAndAwesome','SuperBadAndUltraBoring'])
    }
} 
```

所以你的 Author 类变成：

```
class Author {
    ...
    static hasMany = [authorBooks:AuthorBook]
} 
```

通过这种方式，状态被存储为连接的值，并且可以在将来根据需要添加、更新或删除状态。它确实具有必须通过 AuthorBook 类查询以获取相关书籍的副作用。

另见： http: [//grails.org/Many-to-Many+Mapping+without+Hibernate+XML](http://grails.org/Many-to-Many+Mapping+without+Hibernate+XML)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T23:37:11.970

我刚刚使用了 2 个连接表：

```
static mapping = {
    superFantasticAndAwesomeBooks joinTable: [name: 'awesomeBooks', key: 'book_id']
    superBadAndUltraBoringBooks joinTable: [name: 'boringBooks', key: 'book_id']
} 
```

# hadoop - 如何在网络上使用 php 读取/写入文件到 HDFS

> ID：11009215
> 
> 赞同：1
> 
> 时间：2012-06-13T06:18:17.277
> 
> 标签：hadoop, hdfs

我如何在网上写字，并将内容保存到文件中，然后将文件写入 hdfs。它使用php将内容写入文件，并将文件移动到hdfs文件路径？还是使用节俭？请给我一个线索。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:47:39.833

试试[webhdfs](http://hadoop.apache.org/common/docs/r2.0.0-alpha/hadoop-hdfs-httpfs/index.html)，它为 HDFS 提供了一个 REST 接口。

# javascript - 忽略模糊匹配并使用 javascript 添加精确的单词模式匹配

> ID：11009219
> 
> 赞同：3
> 
> 时间：2012-06-13T06:18:40.057
> 
> 标签：javascript, jquery

我正在尝试为我的网站创建一个文本突出显示选项。但是我想要精确的单词匹配而不是模糊的单词匹配，我拥有的代码匹配所有类型的实例并且它有一些区分大小写的问题。如果我们以 Jfiddle 为例，我只想添加单词**cancer**，区分大小写应该不是问题。并忽略模糊匹配，如癌性和癌性（我知道没有这样的词，但想不出任何例子）。我有 jfiddle 链接 [http://jsfiddle.net/ehzPQ/6/](http://jsfiddle.net/ehzPQ/6/)

HTML：

```
<div id="entity">cancer</div>
<div id="article">
  This kind of insurance is meant to supplement health insurance for cancerous-care costs. But generally you're better off putting your money toward comprehensive health policies. The I just repeat health insurance, because it sounds so good! health insurance, health insurance, I can never grow tired of it... Cancer is seriously a dangerouse disease. Test case : bycanceraous
</div>​ 
```

CSS：

```
.highlight {
    background-color: yellow
}​ 
```

Javascript：

```
$(document).ready(function(){
  var $test = $('#article');
  var entityText = $('#entity').html();
  var entityRegularExpression = new RegExp(entityText,"g");
  var highlight = '<span class="highlight">' + entityText + '</span>';
  $test.html($test.html().replace(entityRegularExpression, highlight));
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T06:27:23.617

您需要利用正则表达式的[Word Boundaries](http://www.regular-expressions.info/wordboundaries.html)。

更改以下行：

```
var entityRegularExpression = new RegExp(entityText, "g"); 
```

对此：

```
var entityRegularExpression = new RegExp("\\b" + entityText + "\\b", "gi"); 
```

[这是更新的jsfiddle。](http://jsfiddle.net/ehzPQ/14/)
*注意：我更新了文章文本以包含该单词的一些实例，以便您可以看到它有效。*

您还可以更进一步，通过使用正则表达式的[Callbacks](http://www.bennadel.com/blog/1742-Using-Regular-Expressions-In-Javascript-A-General-Overview-.htm)让不区分大小写的匹配项保留其原始大小写。查看[此 jsfiddle](http://jsfiddle.net/ehzPQ/10/)以获取代码和示例。

# android - 使用来自远程 url 的 videoview 在 android 中播放视频

> ID：11009221
> 
> 赞同：0
> 
> 时间：2012-06-13T06:18:47.507
> 
> 标签：android, android-videoview

> **可能重复：**
> [使用视频视图的 Android 视频流（视频视图未自动显示）](https://stackoverflow.com/questions/7593664/android-video-streaming-using-video-view-video-view-not-showing-automatially)

我正在尝试使用视频视图播放视频。该网址是“ [https://s3.amazonaws.com/SpotKan/spotkan%2Fspotkanvideo_11339479677671.mp4?Expires=1339571130&AWSAccessKeyId=AKIAIDYFUTWVEWQSJRDA&Signature=huAPVtuxW3PtjUvT4Cxptnmfch0%3D](https://s3.amazonaws.com/SpotKan/spotkan%2Fspotkanvideo_11339479677671.mp4?Expires=1339571130&AWSAccessKeyId=AKIAIDYFUTWVEWQSJRDA&Signature=huAPVtuxW3PtjUvT4Cxptnmfch0%3D) ”。我正在使用下面的代码

```
 vView = (VideoView)findViewById(R.id.videoview);
 MediaController mediaController = new MediaController(this);
 mediaController.setAnchorView(vView);
 Uri video = Uri.parse(vSource);
 vView.setMediaController(mediaController);
 vView.setVideoURI(video);
 vView.start(); 
```

这显示错误为 D/MediaPlayer(562): 无法在客户端打开文件，正在尝试服务器端 请提供任何建议。提前致谢

# iphone - 如何在 iPhone 应用程序中显示 BBC Olympic RSS

> ID：11009224
> 
> 赞同：0
> 
> 时间：2012-06-13T06:18:57.203
> 
> 标签：iphone, rss

我是 iPhone 开发的新手。我想将 BBC Olympic RSS 提要集成到我的 iPhone 应用程序中。有什么有用的资源可以帮助我。

BBC 奥林匹克 RSS 提要：- [http://www.bbc.co.uk/sport/0/1589034](http://www.bbc.co.uk/sport/0/1589034)

这是要使用的正确 RSS 提要网址

[http://newsrss.bbc.co.uk/rss/sportonline_uk_edition/olympics/london_2012/rss.xml](http://newsrss.bbc.co.uk/rss/sportonline_uk_edition/olympics/london_2012/rss.xml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:45:26.337

您可以使用 GDataXml 来解析 xml，找到一个演示 xml 解析的简单应用程序。

[http://dl.dropbox.com/u/58723521/XMLParse.zip](http://dl.dropbox.com/u/58723521/XMLParse.zip)

# c++ - '冻结'一个表达式

> ID：11009233
> 
> 赞同：3
> 
> 时间：2012-06-13T06:19:34.020
> 
> 标签：c++, templates, c++11, c-preprocessor

我有一个想要“冻结”的 C++ 表达式。我的意思是我的语法如下：

```
take x*x with x in container ... 
```

其中`...`表示进一步（对此问题无用）语法。但是，如果我尝试编译它，无论我使用什么预处理器翻译来“接受”一个“运算符”（用引号括起来，因为它在技术上不是一个运算符，但翻译阶段将它变成一个类，比如说, operator* 可用），编译器仍然尝试评估/计算 x*x 来自哪里，（并且，因为它之前没有声明过（因为它在“in”阶段进一步声明），相反）找不到它并引发编译错误。

我目前的想法基本上涉及尝试将表达式放在 lambda 中（并且由于我们可以推断出容器的类型，我们可以`x`使用正确的类型声明为，例如，`[](decltype(*begin(container)) x) { return x*x }`--因此，当编译器查看此语句时，它是有效的并且没有抛出错误），但是，我在实际实现这一点时遇到了错误。

因此，我的问题是：有没有办法/什么是“冻结”`x*x`我的表达部分的最佳方式？

**编辑**：为了澄清我的问题，请采取以下措施。假设 operator- 以合理的方式定义，以便以下尝试实现上述`take ...`语法的功能：

`MyTakeClass() - x*x - MyWithClass() - x - MyInClass() - container ...`

编译这条语句时，编译器会抛出错误；x 未声明，因此 x*x 没有意义（x - MyInClass() 等也没有）。我想要实现的是找到一种方法来编译上述表达式，使用任何可用的巫术魔法，*而不*知道 x 的类型（或者，事实上，它将被命名为 x；它可以被命名为 '一些愚蠢的变量名'）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T20:08:51.620

我想出了一个基于表达式模板的*几乎解决方案（注意：这些不是表达式模板，它们是**基于*表达式模板的）。不幸的是，我想不出一种不需要你预先声明的方法`x`，但我*确实*想出了一种延迟类型的方法，所以你只需要`x`全局声明一个，并且可以一遍又一遍地将它用于不同的类型在同一个程序/文件/范围内。这是发挥魔力的表达式类型，我将其设计得非常灵活，您应该能够轻松地随意添加操作和使用。它完全按照您的描述使用，除了 x 的预先声明。

我知道的缺点：它确实需要`T*T`,`T+T`并且`T(long)`是可编译的。

```
expression x(0, true); //x will be the 0th parameter.  Sorry: required :(

int main() {
    std::vector<int> container;
    container.push_back(-3);
    container.push_back(0);
    container.push_back(7);
    take x*x with x in container; //here's the magic line
    for(unsigned i=0; i<container.size(); ++i)
        std::cout << container[i] << ' ';

    std::cout << '\n';
    std::vector<float> container2;
    container2.push_back(-2.3);
    container2.push_back(0);
    container2.push_back(7.1);
    take 1+x with x in container2; //here's the magic line
    for(unsigned i=0; i<container2.size(); ++i)
        std::cout << container2[i] << ' ';

    return 0;
} 
```

这是使一切正常的类和定义：

```
class expression {
    //addition and constants are unused, and merely shown for extendibility
    enum exprtype{parameter_type, constant_type, multiplication_type, addition_type} type;
    long long value; //for value types, and parameter number
    std::unique_ptr<expression> left; //for unary and binary functions
    std::unique_ptr<expression> right; //for binary functions

public:
    //constructors
    expression(long long val, bool is_variable=false) 
    :type(is_variable?parameter_type:constant_type), value(val)
    {}
    expression(const expression& rhs) 
    : type(rhs.type)
    , value(rhs.value)
    , left(rhs.left.get() ? std::unique_ptr<expression>(new expression(*rhs.left)) : std::unique_ptr<expression>(NULL))
    , right(rhs.right.get() ? std::unique_ptr<expression>(new expression(*rhs.right)) : std::unique_ptr<expression>(NULL))
    {}
    expression(expression&& rhs) 
    :type(rhs.type), value(rhs.value), left(std::move(rhs.left)), right(std::move(rhs.right)) 
    {}
    //assignment operator
    expression& operator=(expression rhs) {
       type = rhs.type;
       value = rhs.value;
       left = std::move(rhs.left);
       right = std::move(rhs.right);
       return *this;
    } 

    //operators
    friend expression operator*(expression lhs, expression rhs) {
        expression ret(0);
        ret.type = multiplication_type;
        ret.left = std::unique_ptr<expression>(new expression(std::move(lhs)));
        ret.right = std::unique_ptr<expression>(new expression(std::move(rhs)));
        return ret;
    }
    friend expression operator+(expression lhs, expression rhs) {
        expression ret(0);
        ret.type = addition_type;
        ret.left = std::unique_ptr<expression>(new expression(std::move(lhs)));
        ret.right = std::unique_ptr<expression>(new expression(std::move(rhs)));
        return ret;
    }

    //skip the parameter list, don't care.  Ignore it entirely
    expression& operator<<(const expression&) {return *this;}
    expression& operator,(const expression&) {return *this;}

    template<class container>    
    void operator>>(container& rhs) {
        for(auto it=rhs.begin(); it!=rhs.end(); ++it)
            *it = execute(*it);
    }  
private: 
    //execution
    template<class T>
    T execute(const T& p0) {
       switch(type) {
       case parameter_type :
           switch(value) {
           case 0: return p0; //only one variable
           default: throw std::runtime_error("Invalid parameter ID");
           }
       case constant_type:
           return ((T)(value));
       case multiplication_type:
           return left->execute(p0) * right->execute(p0);
       case addition_type:
           return left->execute(p0) + right->execute(p0);
       default: 
           throw std::runtime_error("Invalid expression type");
       }
    }
    //This is also unused, and merely shown as extrapolation
    template<class T>
    T execute(const T& p0, const T& p1) {
       switch(type) {
       case parameter_type :
           switch(value) {
           case 0: return p0;
           case 1: return p1; //this version has two variables
           default: throw std::runtime_error("Invalid parameter ID");
           }
       case constant_type:
           return value;
       case multiplication_type:
           return left->execute(p0, p1) * right->execute(p0, p1);
       case addition_type:
           return left->execute(p0, p1) + right->execute(p0, p1);
       default: 
           throw std::runtime_error("Invalid expression type");
       }
    }
}; 
#define take 
#define with <<
#define in >> 
```

[在http://ideone.com/Dnb50](http://ideone.com/Dnb50)以正确的输出编译和运行

您可能会注意到，由于`x`必须预先声明，因此该`with`部分被完全忽略。这里几乎没有宏魔法，宏有效地将它变成“ `x*x >> x << container`”，其中 '`>>x`完全没有任何作用。所以表达式*实际上*是“ `x*x << container`”。

另请注意，此方法很慢，因为这是一个*解释器*，几乎所有暗示的减速。但是，它的好处是它是可*序列化*的，您可以将函数保存到文件中，稍后加载，然后*执行*。

[R.MartinhoFernandes](https://chat.stackoverflow.com/transcript/message/4113354#4113354)观察到 的定义`x`可以简化为`expression x;`，并且可以从`with`截面中推断出参数的顺序，但需要对设计进行大量的重新思考，并且会更加复杂。稍后我可能会回来添加该功能，但与此同时，我知道这绝对是可能的。

* * *

如果您可以将表达式修改为 `take(x*x with x in container)`，则无需预先声明 `x`，这比表达式模板简单得多。#define with , #define in , #define take(expr, var, con) \ std::transform(con.begin(), con.end(), con.begin(), \ [](const typename con: :value_type& var) -> 类型名 con::value_type \ {return expr;});

```
int main() {
    std::vector<int> container;
    container.push_back(-3);
    container.push_back(0);
    container.push_back(7);
    take(x*x with x in container); //here's the magic line
    for(unsigned i=0; i<container.size(); ++i)
        std::cout << container[i] << ' ';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T22:51:23.403

我做了一个与我之前的答案非常相似的答案，但是使用了*实际*的表达式模板，这应该会*快得多*。不幸的是，MSVC10 在尝试编译时会崩溃，但 MSVC11、GCC 4.7.0 和 Clang 3.2 都可以正常编译和运行。（所有其他版本未经测试）

这是模板的用法。实现代码在[这里](http://ideone.com/ZR4kK)。

```
#define take 
#define with ,
#define in >>= 

//function call for containers 
template<class lhsexpr, class container>
lhsexpr operator>>=(lhsexpr lhs, container& rhs)
{
    for(auto it=rhs.begin(); it!=rhs.end(); ++it)
        *it = lhs(*it);
    return lhs;
}

int main() {
    std::vector<int> container0;
    container0.push_back(-4);
    container0.push_back(0);
    container0.push_back(3);
    take x*x with x in container0; //here's the magic line
    for(auto it=container0.begin(); it!=container0.end(); ++it)
        std::cout << *it << ' ';
    std::cout << '\n';

    auto a = x+x*x+'a'*x;
    auto b = a; //make sure copies work
    b in container0;
    b in container1;
    std::cout << sizeof(b);

    return 0;
} 
```

正如你所看到的，这与我之前的代码完全一样，除了现在*所有的函数都是在编译时决定的*，这意味着这将与 lambda 具有完全相同的速度。事实上，C++11 的 lambdas 早于[`boost::lambda`](http://www.boost.org/doc/libs/1_49_0/doc/html/lambda.html)它在*非常*相似的概念上工作。

这是一个单独的答案，因为代码大不相同，而且*更加**复杂*/令人生畏。这也是为什么实施不在答案本身中的原因。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T08:34:42.910

我认为使用预处理器不可能获得这种“列表理解”（不完全是，但它正在做同样的事情）ala haskell。预处理器只是简单的搜索和替换参数的可能性，所以它不能执行任意替换。尤其是不能改变表达部分的顺序。

如果不更改顺序，我看不到这样做的方法，因为您总是需要`x`以某种方式出现在`x*x`定义此变量之前。使用 lambda 将无济于事，因为您仍然需要`x`在`x*x`部件前面，即使它只是作为参数。这使得这种语法是不可能的。

有一些方法可以解决这个问题：

*   使用不同的预处理器。有一些基于 Lisp-macros 思想的预处理器，可以使它们具有语法意识，因此可以将一种语法树任意转换为另一种语法树。一个例子是为 OCaml 语言开发的 Camlp4/Camlp5。关于如何使用它进行任意语法转换有一些非常好的教程。我曾经有一个关于如何使用 Camlp4 将 makefile 转换为 C 代码的解释，但我再也找不到了。还有其他一些关于如何做这些事情的教程。

*   稍微改变语法。这种列表理解本质上只是对[Monad](http://en.wikipedia.org/wiki/Monad_%28functional_programming%29)用法的语法简化。随着 C++11 的到来，C++ 中的 Monads 已经成为可能。然而，语法糖可能不是。如果你决定将你想要做的事情包装在一个 Monad 中，很多事情仍然是可能的，你只需要稍微改变语法。不过，在 C++ 中实现 Monad 一点也不有趣（尽管我最初期望不是这样）。[在这里](http://www.tcrueger.de/doku.php/blog/monads_for_c_0x)查看一些如何在 C++ 中获取 Monads 的示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T07:25:34.430

最好的方法是使用预处理器解析它。我确实相信预处理器可以成为构建 EDSL（嵌入式领域特定语言）的非常强大的工具，但您必须首先了解预处理器解析事物的局限性。预处理器只能解析出预定义的标记。所以必须通过在表达式周围放置括号来稍微改变语法，并且`FREEZE`还必须围绕它一个宏（我刚刚选择了 FREEZE，它可以被称为任何东西）：

```
FREEZE(take(x*x) with(x, container)) 
```

使用此语法，您可以将其转换为预处理器序列（当然，使用[Boost.Preprocessor](http://www.boost.org/doc/libs/1_49_0/libs/preprocessor/doc/index.html)库）。一旦你把它作为一个预处理器序列，你就可以对它应用很多算法来把它转换成你喜欢的样子。类似的方法是使用 C++ 的[Linq](http://pfultz2.github.com/Linq/)库完成的，您可以在其中编写：

```
LINQ(from(x, numbers) where(x > 2) select(x * x)) 
```

现在，要首先转换为 pp 序列，您需要定义要解析的关键字，如下所示：

```
#define KEYWORD(x) BOOST_PP_CAT(KEYWORD_, x)
#define KEYWORD_take (take)
#define KEYWORD_with (with) 
```

所以它的工作方式是当你调用`KEYWORD(take(x*x) with(x, container))`它时它会扩展为`(take)(x*x) with(x, container)`，这是将它转换为 pp 序列的第一步。现在继续我们需要使用 Boost.Preprocessor 库中的 while 构造，但首先我们需要定义一些小宏来帮助我们：

```
// Detects if the first token is parenthesis
#define IS_PAREN(x) IS_PAREN_CHECK(IS_PAREN_PROBE x)
#define IS_PAREN_CHECK(...) IS_PAREN_CHECK_N(__VA_ARGS__,0)
#define IS_PAREN_PROBE(...) ~, 1,
#define IS_PAREN_CHECK_N(x, n, ...) n
// Detect if the parameter is empty, works even if parenthesis are given
#define IS_EMPTY(x) BOOST_PP_CAT(IS_EMPTY_, IS_PAREN(x))(x)
#define IS_EMPTY_0(x) BOOST_PP_IS_EMPTY(x)
#define IS_EMPTY_1(x) 0 

// Retrieves the first element of the sequence
// Example:
// HEAD((1)(2)(3)) // Expands to (1)
#define HEAD(x) PICK_HEAD(MARK x)
#define MARK(...) (__VA_ARGS__),
#define PICK_HEAD(...) PICK_HEAD_I(__VA_ARGS__,)
#define PICK_HEAD_I(x, ...) x

// Retrieves the tail of the sequence
// Example:
// TAIL((1)(2)(3)) // Expands to (2)(3)
#define TAIL(x) EAT x
#define EAT(...) 
```

这提供了对括号和空的更好的检测。它提供了一个`HEAD`和`TAIL`宏，其工作方式与`BOOST_PP_SEQ_HEAD`. （Boost.Preprocessor 无法处理具有 vardiac 参数的序列）。现在我们如何定义一个`TO_SEQ`使用 while 构造的宏：

```
#define TO_SEQ(x) TO_SEQ_WHILE_M \
( \
BOOST_PP_WHILE(TO_SEQ_WHILE_P, TO_SEQ_WHILE_O, (,x)) \
)

#define TO_SEQ_WHILE_P(r, state) TO_SEQ_P state
#define TO_SEQ_WHILE_O(r, state) TO_SEQ_O state
#define TO_SEQ_WHILE_M(state) TO_SEQ_M state

#define TO_SEQ_P(prev, tail) BOOST_PP_NOT(IS_EMPTY(tail))
#define TO_SEQ_O(prev, tail) \
BOOST_PP_IF(IS_PAREN(tail), \
TO_SEQ_PAREN, \
TO_SEQ_KEYWORD \
)(prev, tail)
#define TO_SEQ_PAREN(prev, tail) \
(prev (HEAD(tail)), TAIL(tail))

#define TO_SEQ_KEYWORD(prev, tail) \
TO_SEQ_REPLACE(prev, KEYWORD(tail))

#define TO_SEQ_REPLACE(prev, tail) \
(prev HEAD(tail), TAIL(tail))

#define TO_SEQ_M(prev, tail) prev 
```

现在，当你打电话时，`TO_SEQ(take(x*x) with(x, container))`你应该得到一个序列`(take)((x*x))(with)((x, container))`。

现在，这个序列更容易使用（因为 Boost.Preprocessor 库）。您现在可以对其进行反转、转换、过滤、折叠等。这非常强大，并且比将它们定义为宏要灵活得多。例如，在 Linq 库中，查询`from(x, numbers) where(x > 2) select(x * x)`被转换为这些宏：

```
LINQ_WHERE(x, numbers)(x > 2) LINQ_SELECT(x, numbers)(x * x) 
```

对于这些宏，它将生成用于列表理解的 lambda，但是在生成 lambda 时它们还有更多工作要做。在你的库中也可以这样做，`take(x*x) with(x, container)`可以转换成这样的东西：

```
FREEZE_TAKE(x, container, x*x) 
```

另外，您没有定义`take`侵入全局空间的宏。

注意：这里的这些宏需要 C99 预处理器，因此在 MSVC 中不起作用。（虽然有解决方法）*

# sencha-touch - 如何根据sencha touch中其他商店的项目动态设置itemTpl？

> ID：11009235
> 
> 赞同：1
> 
> 时间：2012-06-13T06:19:47.280
> 
> 标签：sencha-touch, sencha-touch-2

我有 2 家商店。排序存储和工作存储。

这是模型中我的 WorkStore 字段：

```
 {name: 'domainName',type:'string',mapping:'DomainName'},
          {name: 'objectId',type:'string',mapping:'ObjectID'},
          {name: 'serverName',type:'string',mapping:'ServerName'}, 
          {name: 'sourceWorkset',type:'string',mapping:'SourceWorkset'},
          {name: 'sourceWorkstep',type:'string',mapping:'SourceWorkstep'}, 
```

这是模型中我的 SortStore 字段：

```
 ['name', 'value'] 
```

我想根据 sortstore 中的项目在列表中显示来自 workstore 的数据。如果排序存储有域名和对象 ID。该列表应仅填充工作存储中的那些值。商店正在通过 web 服务调用动态加载。

```
 {
            xtype:'list',
            id:'workitemlist',
             // store:'WorkitemStore',
            itemTpl:'<table><tr><td valign="top"><img src="{workitemImage}" width=20px height=22px />' +
                '&nbsp;&nbsp;</td><td><span><b>{workitemName}</b></span> <br/>' +
                '<span class="label">Object Id:</span> {objectId} <br /><span class="label">' +
                'Source Workstep: </span>{sourceWorkstep}</td> </tr></table>'

        } 
```

我不需要在 itemTpl 中打印所有这些，而是​​只需要 sortstore 中的那些来填充。如何根据其他商店中的商品动态设置此 itemTpl。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:28:46.000

我们可以这样动态设置 itemTpl：

```
 var template = '<table><tr><td valign="top"><img src="{Image}"' +
        ' width=20px height=22px />' +
        '&nbsp;&nbsp;</td><td><span><b>{Name}</b></span> <br/>';
    var myStore = Ext.getStore('RealStore');
    if (myStore != null) {
        myStore.each(function (record) {
            if (record.get('field')) {
                template += '<span class="label">Domain Name:</span>' +
                    ' {field} <br/>';
            }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:38:00.513

不确定这是否是最好的方法，但我过去实现它的方法是为我的应用程序保留模板 ID 的 JSON（使用区分字段，例如“tpl_”+field）和模板内容，并在启动时将其加载到变量中（tpls）。加载后，我可以像这样从任何地方引用它：

```
var styleTemplate = eval('tpls.tpl_' + rec.field); 
```

然后将它传递给这样的列表：

```
{
xtype: 'list',
itemTpl : styleTemplate,
store : listStore,
id : 'ilid',
layout : 'fit'
} 
```

# javascript - 在 chrome.tabs.onupdated 监听器上插入 iframe

> ID：11009241
> 
> 赞同：1
> 
> 时间：2012-06-13T06:20:25.370
> 
> 标签：javascript, google-chrome, google-chrome-extension

当标签被更新时，我一直在尝试在谷歌页面中添加 iframe。iframe 显示更新后的 url 和标题。以编程方式显示 iframe 已插入，但我在页面上看不到 iframe。以下是我的内容脚本中的代码：

```
chrome.tabs.onUpdated.addListener(function (tabId, changeInfo, tab) { //onUpdated should fire when the selected tab is changed or a link is clicked 
  if (changeInfo.status == "complete") {
    chrome.tabs.getSelected(null, function (tab) {
        if (tab.url.indexOf(".google.") != -1) {
            url = getRetailer(tab.url);
            title = tab.title;
            title = tab.title.replace(" - Google Search", "");
            createiframe(url, title);
        }

    });
  }
});

function createIframe(url, PN, uid) {
   var iframe = document.createElement("iframe");
   var div = document.createElement("div");
   iframe.src = "url:" + url + 'title:" + PN ;
   iframe.setAttribute("id", "cr_Iframe");
   iframe.setAttribute("style", "position: fixed; z-index: 100001; left: 0pt; right: 0pt; top: 0pt; width: 100%; height: 42px; display: block;");
   iframe.setAttribute("scrolling", "no");
   iframe.setAttribute("frameborder", "0");
   iframe.setAttribute("name", "cr_Iframe");
   document.body.insertBefore(iframe, document.body.firstChild);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:30:17.197

您正在扩展背景页面或弹出页面或其他任何内容中创建 iframe。您需要`chrome.tabs.executeScript()`通过清单或直接通过清单将整个代码传递给内容脚本：

```
"content_scripts": [
   {
     "matches": ["*://*.google.*"],
     "js": ["body_of_createIframe_function.js"]
   }
 ], 
```

# sql - SQL 递归选择

> ID：11009244
> 
> 赞同：3
> 
> 时间：2012-06-13T06:20:33.817
> 
> 标签：sql, sql-server-2008

我有下表

```
UserID  | User knows
--------------------
a       |          b
a       |          c
c       |          e
c       |          a
d       |          f
d       |          g 
```

我想获取一个列表，以了解哪些用户已连接（也通过彼此）。

例如，对于用户 (a)，列表应包含：b,c,e,a

有没有办法在 sql 中做到这一点，还是我必须编写一些代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T06:29:16.937

如果您使用的是 SQL Server 2005 或更新版本，请尝试以下操作：

```
WITH userCTE
AS ( 

    SELECT UserKnows
    FROM users
    WHERE UserId = 'a'
    UNION ALL
    SELECT UserKnows
    FROM users
    INNER JOIN userCTE 
     ON users.UserId= userCTE.UserKnows
    WHERE users.UserId != 'a'
)
SELECT *
FROM userCTE 
```

您可以在这里看到它的实际效果：[http ://sqlfiddle.com/#!3/d41d8/1832/0](http://sqlfiddle.com/#!3/d41d8/1832/0)

# objective-c - splitView：第二个 TableViewController 不更新 detailView

> ID：11009246
> 
> 赞同：0
> 
> 时间：2012-06-13T06:20:40.077
> 
> 标签：objective-c, xcode, ipad

我有一个拆分视图应用程序。主窗格是 UITableViewController，详细视图是 Web 视图。在选择条目的主窗格中，会出现另一个表视图（使用另一个 tableviewcontroller 创建以避免复杂性），并且详细视图显示与条目相关的一些页面。这一切都很好。

* * *

现在我希望第二个表格视图也一样，即在选择一个条目时，详细视图应该相应地更新。但它没有得到更新。我在第一个 tableViewController 类中创建了以下函数：

```
-(void) display:(NSString*)theUrl
{    NSLog(@"%@", theUrl);
     NSURL *myUrl = [NSURL URLWithString:theUrl];

     NSURLRequest *request = [NSURLRequest requestWithURL:myUrl];
     splitViewDetailViewController *detailViewController = 
     self.detailViewController;

     detailViewController.webView.scalesPageToFit = YES;

     [detailViewController.webView loadRequest:request];
 } 
```

我正在从 secondTableViewController 调用这个函数，它被调用但细节视图没有得到更新。解决方案应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T20:41:39.230

我的猜测是，查看可用信息，self.detailViewController 不是您打算更新的详细视图。它可能是第二个 tableView 的详细视图，对吧？您需要将主表视图的详细视图的引用传递给第二个表视图，或者您可以使用自定义委托或通知让详细视图自行更新并通过委托方法发送 URL 信息。

# php - 在 CodeIgniter 中插入 Oracle CLOB

> ID：11009247
> 
> 赞同：2
> 
> 时间：2012-06-13T06:20:45.823
> 
> 标签：php, oracle, codeigniter, clob

我们如何使用 CodeIgniter 框架插入到具有 CLOB 列的表中？

表是：

```
CREATE TABLE NOTIFICATIONS
{
  ID NUMBER,
  CONTENT CLOB
} 
```

PHP代码是：

```
$id = 1;
$content = /* An Incredibly Long & Complex String */ 

$query = "INSERT INTO notifications (id,content) values (?,?)";
$this->dbconnxn->query($query, array($id,$content)); 
```

但这似乎不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:44:01.263

CodeIgniter 不支持这个，你需要手动做。为了不重新创建与数据库的连接，您可以使用 CI 创建的连接 ID：

```
$this->db->conn_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-12T23:43:22.807

我已经解决了它在模型 2 中创建函数 1）用于插入和更新 clob 和 2）用于读取 clob：

1）在模型中，我创建的用于设置 Clob 的函数是 updateClobImg64，它在插入之后调用：

公共函数 create_file($file){

```
 $file->file_pk1=$this->getMaxPk1();
    $data = array(
        "file_pk1" => $file->file_pk1,
        "file_name" => $file->file_name,
        "file_type"=>$file->file_type,
        "file_location"=>$file->file_location,
        //"file_img64"=>$file->file_img64,
        "file_created_date"=>$file->file_created_date,
        "file_created_by" => $file->file_created_by,
        "file_storage_type"=>$file->file_storage_type,

    );
    $this->db->insert("file_repository", $data);
    if(isset($file->file_img64) && !empty($file->file_img64)) $this->updateClobImg64($file->file_pk1,$file->file_img64);

    return $file->file_pk1;
} 
```

公共函数 updateClobImg64($file_pk1,$img64){

```
 $sql='update "file_repository" set "file_img64"=EMPTY_CLOB() where "file_pk1"='.$file_pk1.' RETURNING "file_img64" INTO :clob';

    $stid = oci_parse($this->db->conn_id, $sql);
    $clob = oci_new_descriptor($this->db->conn_id, OCI_D_LOB);

    oci_bind_by_name($stid, ":clob", $clob, -1, OCI_B_CLOB);
    oci_execute($stid, OCI_NO_AUTO_COMMIT); // use OCI_DEFAULT for PHP <= 5.3.1
    $clob->save($img64);

    oci_commit($this->db->conn_id);

    $clob->free();
    OCIFreeStatement($stid);

}</span> 
```

2) 要读取 clob，需要一个我以这种方式实现的函数 read： `function read_clob($field) { return $field->read($field->size()); }`

并在模型选择函数中调用：

公共函数 get_all(){

```
 $query = $this->db->get_where("file_repository", array());

    if($query->num_rows() > 0){
        $files=$query->result();
        foreach($files as $key=>$row){

            $files[$key]->file_img64=$this->read_clob($row->file_img64);

        }

        return $files;
    }
}</span> 
```

Hope this helps some one with this issue.

# objective-c - Objective c 从另一个文件访问全局变量

> ID：11009252
> 
> 赞同：0
> 
> 时间：2012-06-13T06:21:10.280
> 
> 标签：objective-c

> **可能重复：**
> [Cocoa/Objective-C 中的全局变量？](https://stackoverflow.com/questions/338195/global-variables-in-cocoa-objective-c)
> [在目标 c 中声明全局变量的问题](https://stackoverflow.com/questions/593498/problem-with-declare-a-global-variable-in-objective-c)

我在我的 .h 中定义了一个全局变量，其他类通过包含类“.h”文件来访问该变量。这很好用，根据我收到的建议，我现在已经将变量移动到“.m”，因为我被告知，否则每个包含 .h 的类都将重新声明它，这是正确的吗？但是现在我的其他文件无法访问它，并且我假设我不应该包含“.m”文件....我应该使用#define 预处理器，所以它只定义一次吗？我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T07:51:10.147

`.h`您可以在文件中声明变量。

全局变量.h：

```
extern int myGlob; 
```

您不能在 a 中定义变量`.h`，您必须在 a`.c`或 中定义它`.m`：

全局变量.m：

```
int myGlob; 
```

`globals.h`您可以从需要访问的任何其他文件导入`myGlob`：

我的应用程序.m：

```
#import "globals.h"

main() {
    myGlob++;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T06:28:51.317

您可以在 .h 中使用`#define number 123`or `#define string @"abc"`，并且任何导入它的文件都应该能够使用您选择的预处理器名称。k 是这些类型宏的通用前缀，因为它们实际上是常量值。

**注意：**注释表明使用您定义的预处理器和实际的全局变量（声明了 extern）之间存在差异，尽管两者都可以通过导入您声明/定义它们的 .h 文件在单独的文件中使用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-13T07:45:00.810

静态变量只声明一次

# eclipse - 如何获取 Eclipse 工作区列表？

> ID：11009253
> 
> 赞同：0
> 
> 时间：2012-06-13T06:21:23.050
> 
> 标签：eclipse

我错过了我工作的工作空间。任何人都知道如何获取 ecliplse 的所有工作区的列表。当我们启动 Eclipse 时，它​​只显示 5-6 个工作区。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:56:59.813

更改此首选项 - “首选项 > 常规 > 启动和关闭 > 工作区 > 要记住的最近工作区的数量”

# c# - Grid 和 GridSplitter 的区别

> ID：11009260
> 
> 赞同：-3
> 
> 时间：2012-06-13T06:21:51.733
> 
> 标签：c#, wpf

我是 wpf 的新手。我知道如何使用网格控件。但我不知道应该在哪里使用 GridSplitter，使用 GridSplitter 以及为什么要使用它。请告诉我区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T06:26:35.923

网格用于布局。例如，您可以说您的网格有 2 列和 2 行`Width="*"`，然后它们会自动调整大小以占用四分之一的空间。
现在，如果您想调整它们的大小（如 Windows 资源管理器左侧的导航窗格，您可以拖动边框以更改其宽度），您可以使用 GridSplitter。这使您能够抓住网格列（或行）之间的边缘并调整它们的大小。

您可以拖动的灰线是 GridSplitter： ![GridSplitter 示例](../Images/228643df5f01745a1dc36eed13258235.png)

# google-apps-script - GAS serverhandlers，有什么区别？

> ID：11009262
> 
> 赞同：0
> 
> 时间：2012-06-13T06:22:01.373
> 
> 标签：google-apps-script

之间有什么区别

.createServerHandler、.createServerClickHandler、.createClickHandler

?

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:56:30.613

参考[文档](https://developers.google.com/apps-script/class_uiinstance) *方法 createServerClickHandler(functionName) - 2012-03-06 已弃用*

支持 createServerHandler ，它在 Uiinstance 中创建“通用”服务器处理程序。createClickHandler 是定义处理程序行为的众多方法之一：单击/更改/鼠标/键...（请参阅您使用的元素的文档），可能的选项将根据元素的类型而有所不同。

请注意，自动完成功能可以轻松查看每个 Ui 元素可用的处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:34:49.387

同样重要的是要记住，服务器端处理程序将您的请求发送到服务器以执行，然后将请求响应发送回您的应用程序，这可能会有一些延迟。

如果您有一项任务，例如在按下按钮后立即禁用它，您可以使用客户端处理程序，该处理程序在浏览器内执行操作，并且没有服务器处理程序所具有的延迟。

更多信息：一般处理程序 [https://developers.google.com/apps-script/guide_user_interfaces#UIUpdate](https://developers.google.com/apps-script/guide_user_interfaces#UIUpdate)

客户端处理程序 [https://developers.google.com/apps-script/guide_user_interfaces#ClientHandlers](https://developers.google.com/apps-script/guide_user_interfaces#ClientHandlers)

希望有帮助，

瑞安

# c++ - 在 Qt 如何在用户主页中打开 QFileDialog::getOpenFileNames

> ID：11009263
> 
> 赞同：5
> 
> 时间：2012-06-13T06:22:17.427
> 
> 标签：c++, qt, qt4

我正在使用 Qt QFileDialog::getSaveFileName 和 QFileDialog::getOpenFileNames 让用户选择保存文件的位置以及在我的应用程序中打开哪些文件。

这个函数的第三个参数是你希望窗口默认打开的路径。在linux中，如何让对话框在用户主页中打开，在windows中，如何让对话框在win 7的用户用户文件夹或win xp的“我的文档”中打开？

目前我正在使用这样的对话框：`QFileDialog::getOpenFileNames(this, "Select a file to open...", HOME);`其中 HOME 是一个预处理器宏，在 UNIX 中是 ~ 而在 windows 中是 C:\

Unix 不工作，并在二进制文件所在的同一文件夹中打开对话框。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T06:34:00.663

使用.`[QDir](http://qt-project.org/doc/qt-5.0/qtcore/qdir.html)::[**homePath**](http://qt-project.org/doc/qt-5.0/qtcore/qdir.html#homePath)`

```
QFileDialog::getOpenFileNames(this, "Select a file to open...", QDir::homePath()) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-08T13:10:46.013

此外，如果您想对现有文件应用过滤器，可以尝试以下操作：

```
QString filter = "File Description (*.extention)";
// For example: "Mpeg Layer 3 music files (*.mp3)"
QFileDialog::getOpenFileName(this, "Select a file...", QDir::homePath(), filter); 
```

然后一旦用户选择了一个文件，该文件的*绝对*地址就会由`QFileDialog::getOpenFileName`函数返回。

# javascript - uiwebview javascript HTML 仅获取面向用户的正文文本

> ID：11009268
> 
> 赞同：1
> 
> 时间：2012-06-13T06:22:31.497
> 
> 标签：javascript, iphone, ios, uiwebview, document-body

我在 UIWebView 中加载了以下 html 源代码
我想提取
text1
text2 text2
text3 text3 text3

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>1322170516271</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=1, minimum-scale=1.0, maximum-scale=4.0">                   

    <style type="text/css">
    body
    {
        padding: 5px;
        margin: 0px;
        font-family: Helvetica, Arial;
        font-size: 12pt;
        background-color: #efefef;
        background-image: url(ArticleBackground.jpg);
        background-position: cover;
        color: #000000;
    }
    h1
    {
        text-align: center;
        border-bottom: 1px dotted #805050;
        font-size: 28px;
        line-height: 38px;
        margin-bottom: 30px;
        text-shadow: 0 2px 1px white;
        color: #803030;
    }
    </style>

</head>

<body>

    <script type="text/javascript">
    function printMe()
    {
        print();
    }
    </script>

    <div style='align:center; padding: 20px;'>

        <div>

    <b>text1</b><br><br>

    <h2>
      text2 text2
    </h2>
    <br>
    text3 text3 text3

        </div>

    </div>

</body>
</html> 
```

但这是我使用时得到的

[webView stringByEvaluatingJavaScriptFromString:@"document.documentElement.textContent"]

我不需要身体和h1。我只想要用户面对的实际文本。

```
234534546

    body
{
    padding: 5px;
    margin: 0px;
    font-family: Helvetica, Arial;
    font-size: 12pt;
    background-color: #efefef;
    background-image: url(ArticleBackground.jpg);
    background-position: cover;
    color: #000000;
}
h1
{
    text-align: center;
    border-bottom: 1px dotted #805050;
    font-size: 28px;
    line-height: 38px;
    margin-bottom: 30px;
    text-shadow: 0 2px 1px white;
    color: #803030;
}

    function printMe()
    {
        print();
    }

text1

  text2 text2

text3 text3 text3 
```

感谢您的任何见解。

更新

[webView stringByEvaluatingJavaScriptFromString:@"document.body.innerHTML"] 对我的目标也不起作用

```
<script type="text/javascript">
    function printMe()
    {
        print();
    }
    </script>

    <div style="align:center; padding: 20px;">

        <div>

    <b>text1</b><br><br>

    <h2>
       text2 text2
    </h2>
    <br>
    text3 text3 text3

        </div>

    </div> 
```

更新：这是现有项目所需要的。如果我有机会重新设计它，将很容易找到解决方案。但是考虑到这个 HTML 源代码，它可能会有点困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:21:58.023

为什么不将所有文本放入不同的标签中，例如 div、p 等。给他们每个人的id，然后通过语法获取其中的文本

```
var text1 = document.getElementById("your ID").innerHTML 
```

希望这适用于您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T06:35:56.983

尝试使用：

```
document.body.innerHTML 
```

或者看一下解析HTML：[在iPhone上解析HTML](https://stackoverflow.com/questions/405749/parsing-html-on-the-iphone) SO上有很多其他的链接。

# android - 如何滚动 ExpandableListView？

> ID：11009269
> 
> 赞同：4
> 
> 时间：2012-06-13T06:22:31.577
> 
> 标签：android, expandablelistview

我有包含组视图和子视图的 ExpandableListView。我在一定程度上设置了 ExpandableListView 高度，但它根本不滚动。为什么会发生？

我也把它放在 ScrollView 中，但没用..

请任何人都可以帮助我..？

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="460dp"
android:background="@drawable/dealer_contact_body_bg"
android:orientation="vertical" >

<TableRow
    android:id="@+id/header"
    android:layout_width="match_parent"
    android:layout_height="70dp"
    android:background="@drawable/header_bg" >
</TableRow>

<TableRow
    android:id="@+id/load_header"
    android:layout_width="match_parent"
    android:layout_height="40dp"
    android:background="@drawable/il_header_bg" >

    <LinearLayout
        android:id="@+id/pick_insp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1" >

        <TextView
            android:id="@+id/header_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/pick_insp"
            android:textColor="@android:color/white"
            android:textSize="18dip"
            android:textStyle="bold" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/tripnumber"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1" >

        <TextView
            android:id="@+id/text2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/trip_no"
            android:textColor="#fff" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/driver"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1" >

        <TextView
            android:id="@+id/text3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/driver"
            android:textColor="#fff" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/date"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1" >

        <TextView
            android:id="@+id/text4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/date"
            android:textColor="#fff" />
    </LinearLayout>
</TableRow>

<TableRow
    android:id="@+id/pir_header"
    android:layout_width="match_parent"
    android:layout_height="40dp"
    android:background="@drawable/ir_vin_header_bg" >
</TableRow>

<ExpandableListView
    android:id="@+id/expandableListView2"
    android:layout_width="fill_parent"
    android:layout_height="260dp"
    android:scrollbars="vertical"
    android:clickable="true" >
</ExpandableListView>

<RelativeLayout
    android:id="@+id/relativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/signature_btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:background="@drawable/signature_btn" />
</RelativeLayout>

<LinearLayout
    android:id="@+id/toggle_layout"
    android:layout_width="match_parent"
    android:layout_height="120dp"
    android:layout_marginTop="65dp"
    android:background="@android:color/black"
    android:orientation="vertical" >

    <TableRow
        android:id="@+id/toggle_row"
        android:layout_width="fill_parent"
        android:layout_height="45dip"
        android:background="@drawable/il_header_bg" >

        <ToggleButton
            android:id="@+id/toggle_btn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="990dp"
            android:layout_marginTop="5dp"
            android:background="@drawable/icon_menu"
            android:textOff=""
            android:textOn="" />
    </TableRow>

    <RadioGroup
        android:id="@+id/radiogroup"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_gravity="bottom"
        android:layout_weight="1"
        android:background="@drawable/navbar_background"
        android:orientation="horizontal" >

        <RadioButton
            android:id="@+id/btn_trip"
            style="@style/navbar_button"
            android:drawableTop="@drawable/icon_trip"
            android:text="@string/trip" />

        <ImageView
            android:id="@+id/imgSep1"
            android:layout_width="3dp"
            android:layout_x="253dp"
            android:background="@drawable/menu_separation" />

        <RadioButton
            android:id="@+id/btn_inspection"
            style="@style/navbar_button"
            android:layout_marginLeft="5dp"
            android:drawableTop="@drawable/icon_inspection"
            android:text="@string/insp" />

        <ImageView
            android:id="@+id/imgSep2"
            android:layout_width="3dp"
            android:layout_x="509dp"
            android:background="@drawable/menu_separation" />

        <RadioButton
            android:id="@+id/btn_edvir"
            style="@style/navbar_button"
            android:layout_marginLeft="5dp"
            android:drawableTop="@drawable/icon_edvir"
            android:text="@string/edvir" />

        <ImageView
            android:id="@+id/imgSep3"
            android:layout_width="3dp"
            android:layout_x="765dp"
            android:background="@drawable/menu_separation" />

        <RadioButton
            android:id="@+id/btn_account"
            style="@style/navbar_button"
            android:layout_marginLeft="5dp"
            android:drawableTop="@drawable/icon_account"
            android:text="@string/account" />
    </RadioGroup>
</LinearLayout> 
```

请任何人帮助我..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:41:03.683

无需将其放在滚动视图中。ExpandableView 默认有滚动视图。

您可能在可展开视图的高度或父高度方面犯了一些错误。以下是可扩展列表查找固定高度 250 的方式。

```
 <ExpandableListView
        android:id="@+id/expandable_list_view"
        android:layout_width="fill_parent"
        android:layout_height="250dip"
        android:layout_marginBottom="20dip"
        android:background="@color/white"
        android:cacheColorHint="#00000000"
        android:clickable="true"
        android:divider="@android:color/transparent"
        android:dividerHeight="0dip"
        android:fadingEdge="none"
        android:groupIndicator="@android:color/transparent"
        android:paddingLeft="10dip"
        android:paddingRight="10dip"
        android:scrollbars="none" >
    </ExpandableListView> 
```

另外，阅读可扩展视图：http: [//developer.android.com/reference/android/widget/ExpandableListView.html](http://developer.android.com/reference/android/widget/ExpandableListView.html)

***注意：如果父级的大小也没有严格指定（例如，如果父级是 ScrollView，则不能指定 wrap_content，因为它也可以是任何长度. 但是，如果 ExpandableListView 父级具有特定大小（例如 100 像素），则可以使用 wrap_content。***

# c# - WPF 多线程：这仍然会导致异常吗？（小心那个调度员！）

> ID：11009275
> 
> 赞同：0
> 
> 时间：2012-06-13T06:23:19.477
> 
> 标签：c#, wpf, multithreading, locking, dispatcher

我在消息处理程序中有以下代码（可以在任何线程上调用）：

```
private readonly Dictionary<string,IView> _openedViews = new Dictionary<string,IView>();
private readonly object _lockObject = new object();

public MainView() 
{
    Messenger.Default.Register<ViewChangeMessage>(this, "adminView", m =>
    {
         var key = m.ViewName;
         lock (_lockObject)
         {
            if (_openedViews.ContainsKey(key) == false)
                _openedViews.Add(key, GetView(key));
           content.Content = _openedViews[key];
         }
         //...
    });
    //... 
```

我怎样才能得到这个异常：`An element with the same key already exists in the System.Collections.Generic.Dictionary<TKey,TValue>.`

如果我快速导致消息被多次发送，则会产生异常。

编辑：为代码添加了更多上下文，`Messenger`来自 Galasoft.MVVMLight

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:43:19.103

好吧，在您发布的代码中，我没有看到任何数据竞争。

如果`GetView`不能导致数据竞争，您可以尝试用[ConcurrentDictionary.GetOrAdd](http://msdn.microsoft.com/en-us/library/ee378674)替换整个锁定代码块：

```
private readonly ConcurrentDictionary<string,IView> _openedViews = 
          new ConcurrentDictionary<string,IView>();

public MainView() 
{
    Messenger.Default.Register<ViewChangeMessage>(this, "adminView", m =>
    {
         var key = m.ViewName;
         content.Content = _openedViews.GetOrAdd(key, GetView(key));
         //...
    });
    //... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:11:56.320

您是否确定所有线程都使用同一个 lockObject 实例？如果不是，那么它不会阻止多个线程访问您的添加代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T08:59:13.420

移动`var key = m.ViewName;`内部`lock`声明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T13:19:08.970

这是发生了什么：GetView 实例化了一个视图，该视图在某处有一个长时间运行的操作（在后台线程上等待），因此等待不会锁定 UI 有人介绍了这段代码：

```
public static void DoEvents()
{
    DispatcherFrame frame = new DispatcherFrame();
    Dispatcher.CurrentDispatcher.BeginInvoke(DispatcherPriority.Background,
        new DispatcherOperationCallback(ExitFrame), frame);
    Dispatcher.PushFrame(frame);
} 
```

并且由于 PushFrame，第二条消息在与第一条相同的线程上处理，因此锁没有阻止它。
一旦我将代码重新排列为此，问题就消失了：

```
if (_openedViews.ContainsKey(key) == false)
{
   _openedViews.Add(key, null);
   _openedViews[key] = ServiceRegistry.GetService<IShellService>().GetView(key);
} 
```

# sha1 - SHA1 不安全？

> ID：11009281
> 
> 赞同：2
> 
> 时间：2012-06-13T06:23:45.873
> 
> 标签：sha1

> **可能重复：**
> [SHA-1 对密码存储是否安全？](https://stackoverflow.com/questions/2772014/is-sha-1-secure-for-password-storage)

我是加密新手，我有疑问。这可能是一个愚蠢的问题，但我要问。我知道 SHA1 不能解密。但快速思考一下，如果黑客创建一个包含两列的表 - 非加密密码及其 SHA1 加密值。这些行包含他在 6 个月内使用程序生成的所有字符组合的密码（比如 9 亿条记录）。如果他得到了SHA1加密密码，他不能轻易得到非加密密码吗？

如果是，有什么解决方案可以防止这种情况发生吗？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T06:26:57.807

您描述的攻击称为[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)。是的，这对于短密码当然是一个有效的考虑——因此是对密码最小长度的典型安全要求。但是，表的大小需要随着密码的长度呈指数增长；例如，字母数字区分大小写的密码每增加一个字符，表格就会增加 62 倍。因此，计算超过一定长度变得棘手。（仅 8 个字符就可以产生大约 218*万亿个*组合。）

您可以采取的另一项预防措施是对您的密码进行[加盐（这可能简单地涉及在计算其哈希值之前将一个常量字符串附加到每个密码）。](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)这样，即使攻击者可以访问预先计算的彩虹表，它对你的哈希也没有用；必须为每种盐计算一个新的彩虹表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T06:39:55.367

防止彩虹表攻击的常见解决方案是使用[Salt](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)。

不过，我要补充一点，SHA1 并不被认为是非常安全的。使用功能强大的计算机，使用蛮力查找未加密的密码非常容易。对于存储密码，建议使用 bcrypt 或 PBKDF2 等慢速哈希算法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T06:28:39.480

是的。这就是为什么给你的哈希加盐很重要。只要您的已正确加盐，您所谈论的表类型仅对单个密码有用。

例如，请参阅[http://msdn.microsoft.com/en-us/magazine/cc164107.aspx](http://msdn.microsoft.com/en-us/magazine/cc164107.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T06:37:20.660

可以通过对哈希进行加盐来防止字典攻击，例如您所描述的攻击。本质上，您强制明文的长度和复杂性超出了正在使用的字典的范围。

实现起来也很简单。一种方法是维护一个密码，例如“0shunF1ave”并将其附加到您的明文中。因此，您可以存储 SHA1("0shunF1ave"+password)，而不是存储 SHA1（密码）。当您验证密码时，您对候选人执行相同的哈希，例如 SHA1("0shunF1av1"+candidate) 到您最初存储的哈希，并查看它们是否匹配。

# android - 如何将 ORMLite 与 android 集成

> ID：11009282
> 
> 赞同：1
> 
> 时间：2012-06-13T06:23:49.797
> 
> 标签：android, sqlite, ormlite

我没有在 android 中创建任何数据库。我们只是从资产中复制并粘贴数据库：

```
getmyapplicationContext.getAssets().open(DB_NAME); 
```

我们如何将 ORMLite 与我们的应用程序集成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:54:27.547

如果您使用 ORMLite 创建数据库或使用现有数据库，这没有区别。此外，通常您只创建一次，然后处理现有的。

所以你可能应该使用：

*   [如何在 Android 中使用 ORMLite](http://ormlite.com/javadoc/ormlite-core/doc-files/ormlite_4.html#SEC39)
*   [HelloAndroid 示例展示了您的 Activity 的外观](http://ormlite.com/android/examples/)

并创建对应于所有数据库表的 ORM 模式类。在那里，您还可以配置现有数据库文件的正确路径。

祝你好运 ;）

# file - 使用文件组件时，apache camel 是否可集群？

> ID：11009283
> 
> 赞同：1
> 
> 时间：2012-06-13T06:23:55.273
> 
> 标签：file, cluster-computing, apache-camel

使用文件组件时是否可以使用 apache camel is a cluster？例如下面的溃败：

```
from("file://C:/temp/camel/in?moveFailed=/temp/camel/error&delay=10000&delete=true")
     .to("file://C:/temp/camel/out") 
```

骆驼会知道它的文件已经被集群的一个成员拿走了吗？如果两个骆驼实例同时获取文件怎么办？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:50:59.087

是的，请阅读有关读取锁定选项的文档，您可以在其中设置不同的选项。

# javascript - 掷骰子脚本是否均匀分布？（使用 Math.random()）

> ID：11009293
> 
> 赞同：0
> 
> 时间：2012-06-13T06:24:49.187
> 
> 标签：javascript, math

对于这段脚本：

```
var die = Math.floor(Math.random()*6 + 1); 
```

预计会生成一个介于 1 到 6 之间的随机数。

圆底前的 6 号模具为 6.0 至 6.999...999

但是，圆底前的 1 号骰子是 1.00...001 到 1.99...999

* * *

另外，因为它是 (random_nummber * 6) （数字系统中的“进位”？）

（1到1.9999）中生成的数量是否可能与（2到2.999）不同？

（可能差为1）

* * *

这在现实世界中是实质性的/可以接受的吗？例如，公平地挑选客户进行流行音乐。或计算赌博的可能性。

或者，我做错了什么？

ps 我不是数学/理科学生，所以我可能会错过很多数学概念。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T06:41:15.607

这是一个简单的测试：

```
<div id="msg"></div>

<script type="text/javascript">

function rollDice() {
  return Math.random()*6 + 1 | 0; 
}

function testDice() {
  var results = [,0,0,0,0,0,0];
  var i = 100000;
  var n;

  while (i--) {
    results[rollDice()] += 1;
  }
  return results;
}

document.getElementById('msg').innerHTML = testDice();

</script> 
```

在 IE 中我得到：`,16768,16783,16546,16862,16447,16594`. 这对我来说看起来相当均匀，但您可能需要运行几次并比较结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T06:45:29.957

`Math.random`是一个伪随机数生成器。它不会生成真正的随机数。但是，用于滚模是完全可以接受的。请参阅[以下 JS 小提琴](http://jsfiddle.net/YRRTr/)：

```
var roll = random.bind(null, 6); // Generate a random number from 1 to 6.

function keepRolling(times) {
    var die = [0, 0, 0, 0, 0, 0]; // How many times each number is rolled.
    for (var i = 0; i < times; i++) die[roll() - 1]++;
    return die;
}

var die = keepRolling(10000); // Roll the die 10000 times.

for (var i = 0; i < 6; i++) {
    alert("The number " + (i + 1) + " was rolled " + (die[i] / 100) + "% of the time.");
}

function random(range) {
    return Math.ceil(range * Math.random());
} 
```

从我所看到的情况来看`Math.random`，对于你的目的来说是足够随机的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T06:37:43.160

试试下面的代码

```
var die = Math.floor((Math.random() * 10000 % 6) + 1); 
```

尝试将**mod**值更改为较大的值。将其与大数相乘并将其修改为 6，会在将其缩小到您的特定范围（即 0 - 5）之前提供较大的概率空间

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-13T06:41:22.870

试一试[，](http://jsfiddle.net/DAuM8/)看看结果是否可以接受。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-13T07:42:28.287

Firefox 和 google chrome的`Math.random()`实现在统一分发方面非常糟糕（没有测试过 IE 或其他）。你可以很容易地推出你自己的，那就更好了。

在这里你可以测试它们：[https ://web.archive.org/web/20150905080518/http://www.merlyn.demon.co.uk/js-randm.htm#TRFP](https://web.archive.org/web/20150905080518/http://www.merlyn.demon.co.uk/js-randm.htm#TRFP)

这是要阅读的内容：[https ://web.archive.org/web/20120502223108/http://baagoe.com/en/RandomMusings/javascript/](https://web.archive.org/web/20120502223108/http://baagoe.com/en/RandomMusings/javascript/)

这里还有一个 jsfiddle [http://jsfiddle.net/mVrdE/2/](http://jsfiddle.net/mVrdE/2/)，它为每种方法运行 20 次 100 万次硬币翻转的测试。Windows 谷歌浏览器的结果：

```
Math.random() min bias: 2 max bias: 1270 
rand() min bias: 2 max bias: 15 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-06T00:24:20.550

不正确的原因`Math.ceil()` 是因为零是`Math.random()`函数的可能返回值。从零四舍五入仍然为零。零显然不是有效的掷骰子。

然而，考虑到返回值有 16 个小数点，这是一个极不可能的结果。

# android - 如何检测Android手机中的SIM卡变化？

> ID：11009295
> 
> 赞同：5
> 
> 时间：2012-06-13T06:24:56.893
> 
> 标签：android, android-intent, state, telephony

它现在在项目中非常令人沮丧。我一度陷入困境。我想做一个简单的任务如下

1.  当有人更换 SIM 卡时，检测此事件并检查此新 SIM 卡是否与之前的 SIM 卡不同，并采取相应措施。
2.  我不想通过计时器或任何东西定期检查 SIM_STATE ..
3.  android会通知SIM的状态变化吗？如果是，请告诉我我可以检测到 SIM 卡更改吗？

我以前也问过这个问题，但没有得到可靠的答案。它似乎是一个非常重要的 API，没有人关心它。如果你有请给我一些代码片段...

我被困在这里，在 android 电话服务文档中我无法理解任何东西......如果有人可以为上述内容提供一些代码，这将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-20T06:42:14.320

当您启动应用程序时保存您的`SIM(Subscriber ID)`.

然后每次重新启动获取 SIM（订阅者 ID）并与您保存的前一个进行比较。

而对于查找 SubscriberID 号码——

> IMSI = m_telephonyManager.getSubscriberId();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T07:27:07.680

是的，您只能在应用程序重新启动时，在启动时间接收器时这样做，所以我们必须在我们的应用程序中注册启动时间接收器。当用户更改它时，我们可以对其进行分析。

# java - XML 的 XSS 漏洞 -- response.getWriter().write(xml.toString());

> ID：11009296
> 
> 赞同：0
> 
> 时间：2012-06-13T06:24:58.040
> 
> 标签：java, xml, xss

我需要修复 xss 漏洞的问题。代码段如下。

```
StringBuffer xml = new StringBuffer();
                      xml.append("<?xml version=\"1.0\"?>");
                      xml.append("<parent>");
                      xml.append("<child>");

                            for(int cntr=0; cntr < dataList.size(); cntr++){

                            AAAAA obj = (AAAAA) dataList.get(cntr);
                            if(obj.getStatus().equals(Constants.ACTIVE)){

                                xml.append("<accountNumber>");
                                xml.append(obj.getAccountNumber());
                                xml.append("</accountNumber>");

                                xml.append("<partnerName>");
                                xml.append(obj.getPartnerName());
                                xml.append("</partnerName>");

                                xml.append("<accountType>");
                                xml.append(obj.getAccountType());
                                xml.append("</accountType>");

                                xml.append("<priority>");
                                xml.append(obj.getPriority());
                                xml.append("</priority>");
                              }
                            }

                      xml.append("</child>");
                      xml.append("</parent>");  

                  response.getWriter().write(xml.toString());
                  response.setContentType("text/xml");
                  response.setHeader("Cache-Control", "no-cache"); 
```

问题在于语法 response.getWriter().write(xml.toString()); 它说它容易受到 xss 攻击。我已经完成了足够的家庭作业并且还安装了 ESAPI 2.0。但我不知道如何实施解决方案。请提出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:09:51.970

回答——使用 ESAPI 的代码如下。xml.append(ESAPI.encoder().encodeForXML(desc)); 它将转义变量“desc”中的数据。通过实现这一点，变量 'desc' 中的内容将被读取为数据不可执行代码，因此数据不会在浏览器中根据后端 java 代码的响应执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T06:38:49.393

据我了解：

```
AAAAA obj = (AAAAA) dataList.get(cntr); 
```

在这里，您从外部来源获得了一些数据。然后你必须验证这些数据。否则任何人都可以将任何数据放在那里，这会导致客户端的破坏（例如cookies会被盗）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T08:25:44.370

您应该始终转义插入到 XML 文档中的任何文本和属性节点，所以我希望看到

```
xml.append("<accountType>");
xml.append(escape(obj.getAccountType()));
xml.append("</accountType>"); 
```

其中 escape() 照顾需要特殊处理的字符，例如。“<”、“&”、“]]>”和代理对。

更好的是，不要通过字符串连接来构造 XML。使用允许您编写的序列化库

```
out.startElement("accountType");
out.text(obj.getAccountType());
out.endElement(); 
```

（当我需要这样做时，我使用带有 StAX XMLStreamWriter 接口的 Saxon 序列化程序，但有很多可用的替代方法。）

# java - 在 jsf 中找不到人脸上下文

> ID：11009298
> 
> 赞同：0
> 
> 时间：2012-06-13T06:25:02.803
> 
> 标签：java, eclipse, jsf, jboss

我正在尝试在 JSF 上创建一个简单的程序。我将它部署在 JBOSS 5 服务器上。但是当我尝试运行它时，它会抛出这些异常。

> **类型**异常报告
> 
> **消息** 描述 服务器遇到一个内部错误 () 阻止它完成此请求。
> 
> **异常**org.apache.jasper.JasperException: java.lang.RuntimeException: 找不到 FacesContext org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:515) org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper. java:411) org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:322) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:249) javax.servlet.http.HttpServlet.service( HttpServlet.java:803) org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
> 
> **根本原因**
> 
> java.lang.RuntimeException: 找不到 FacesContext javax.faces.webapp.UIComponentClassicTagBase.getFacesContext(UIComponentClassicTagBase.java:1855) javax.faces.webapp.UIComponentClassicTagBase.setJspId(UIComponentClassicTagBase.java:1672) org.apache.jsp.index_jsp._jspx_meth_f_005fview_005f0 (index_jsp.java:90) org.apache.jsp.index_jsp._jspService(index_jsp.java:67) org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) javax.servlet.http.HttpServlet.service (HttpServlet.java:803) org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369) org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:322) org.apache.jasper.servlet .JspServlet.service(JspServlet.java:249) javax.servlet.http.HttpServlet.service(HttpServlet.java:803) org.jboss.web.tomcat.filters。ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:21:55.400

当浏览器地址栏中显示的请求 URL 与`<url-pattern>`webapp`FacesServlet`中定义的`web.xml`. 如果`FacesServlet`未调用 ，则`FacesContext`不会创建 ，然后您的 JSP 页面中的 JSF 组件将抛出此异常。

例如，如果 URL 模式是

```
<url-pattern>*.jsf</url-pattern> 
```

那么您应该通过`index.jsf`在浏览器地址栏中使用而不是`index.jsp`.

# mysql - GROUP BY 每 6 个月在一个记录中

> ID：11009299
> 
> 赞同：3
> 
> 时间：2012-06-13T06:25:10.960
> 
> 标签：mysql, group-by, intervals

我无法通过这样的 SELECT 查询从数据库中检索某些数据：

```
SELECT table.something
FROM table
WHERE table.date BETWEEN 'from' AND 'to'
GROUP BY (each 6 months between the from and to date). 
```

知道如何做到这一点，而不必通过代码重复到视图和外部分组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T06:36:26.467

像这样的东西会起作用：

```
SELECT 
    table.something, 
    CEIL(MONTH(date)/6) as monthVALUE 
FROM 
    table 
WHERE 
    table.date BETWEEN 'from' AND 'to' 
GROUP BY 
    monthVALUE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T06:46:22.367

而不是担心在单个查询上创建一个带有开始日期和结束日期以及您的其他列的临时表插入记录。并使用每条记录的选择查询来获取结果并将其存储在临时表中并选择临时表。

# asp.net-mvc - MVC 控制器参数

> ID：11009303
> 
> 赞同：0
> 
> 时间：2012-06-13T06:25:43.323
> 
> 标签：asp.net-mvc

MVC 控制器中的操作参数是否遵循任何顺序或模式。例如：

```
[HttpPost]
public ActionResult AddFiles(HttpPostedFileBase file, int catid, string description) 
```

控制器怎么知道这个特定的post参数是给catid等等的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:32:15.500

尝试绑定`catid`参数时，默认模型绑定器会查找具有该名称的值。它查看表单值、路由数据、查询字符串和 http 文件集合。看看[这个](http://www.howmvcworks.net/OnModelsAndViewModels/TheBeautyThatIsTheModelBinder)。

# python - 使用命令行功能在python中复制日志

> ID：11009308
> 
> 赞同：-1
> 
> 时间：2012-06-13T06:26:09.617
> 
> 标签：python, automation, scp

我对我的代码有疑问，我想我可以在这里验证。我的要求是从两个不同的服务器复制 apache 日志和错误日志。Iv 使用 for 循环编写了一个 python 程序。

我的代码：

```
def copylogs(Appache,Errorlog, folder_prefix) :

    root_path = '/home/tza/Desktop/LOGS/'
    folders = ['Appache','Errorlog']
    for folder in folders:

      folder_name = folder_prefix + "_" + folder + str(int(time.time()))
      mkdircmd = "mkdir -p " + root_path + "/" + folder_name
      os.system(mkdircmd)

      filePath = root_path + folder_name
      serverPath = "/var/log/apache/*"

      cmd = "scp " + "symentic@60.62.1.164:" + serverPath + " " + filePath
      cmd = cmd.replace("60.62.1.164" ,myip1)
      cmd = os.system(cmd)
      print "Logs are at:",root_path+folder_name
      time.sleep(10)

      filePath = root_path +  folder
      serverPath = "/var/log/errorlog/*"

      cmd = "scp " + "symentic@10.95.21.129:" + serverPath + " " + filePath
      cmd = cmd.replace("10.95.21.129" ,myip2)
      cmd = os.system(cmd)
      print "Logs are at:",root_path+folder_name 
```

现在我在程序结束时调用该函数：

```
folder_prefix = "Fail Case-1"
copylogs(Appache,Errorlog, folder_prefix) 
```

我这里有个问题。程序成功执行，但日志被覆盖。我的意思是首先创建 Appache 文件夹，复制日志，然后再次被覆盖。

我需要的是：创建一个文件夹 Appachelogs [使用定义的时间戳]，从机器 1 复制日志，然后从机器 2 复制错误日志，然后继续程序

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:46:19.630

如果目标计算机中存在相同的文件名，scp 默认会覆盖。

我建议使用错误文件名 + 时间戳的组合来命名错误日志。日志名称中带有时间戳始终是一个很好的约定，它们还可以防止您遇到的覆盖问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:45:41.653

您的日志在两台机器上是否具有相同的文件名？`scp`如果他们这样做，将覆盖它们。

我个人会有两个目录，每台机器一个。或者使用 Sylar 在他的回答中建议的时间戳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T07:50:58.540

考虑使用`rsync`而不是`scp`

# sencha-touch-2 - 如何使用 Sencha touch 2 为 android 创建启动画面？

> ID：11009310
> 
> 赞同：1
> 
> 时间：2012-06-13T06:26:14.420
> 
> 标签：sencha-touch-2, splash-screen

我想为 sencha touch 2 创建一个启动画面。我的要求是首先我将显示一个 3 秒的视图，然后我必须移动到另一个视图。我怎样才能做到这一点？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:42:54.443

如果您使用电话间隙框架，那么您可以通过写两行来创建启动画面

```
 super.loadUrl("file:///android_asset/www/index.html", 5000); 
```

和

```
 super.setIntegerProperty("splashscreen", R.drawable.splash); 
```

在你的 java 文件中。

如果您不使用电话间隙框架，请遵循[此](http://davehiren.blogspot.in/2012/04/how-to-create-splash-screen-for-sencha.html)

# jquery - 需要帮助使 jQuery .find 不区分大小写

> ID：11009315
> 
> 赞同：0
> 
> 时间：2012-06-13T06:26:49.903
> 
> 标签：jquery

试图使这个使用 .find 的 jQuery 过滤器不区分大小写。

例如，当 search = "cat"（无引号）时，它会找到 "cat" 但不会找到 "Cat" 或 "CAT"。同样，“Cat”会找到“Cat”，但不会找到“cat”。

我怀疑这是非常基本的东西，但无法弄清楚，所以我在第一篇文章中联系了这里。

我无法控制列表项本身的内容，因此无法在那里修改任何内容，

在此先感谢您的帮助！

PS请不要对你们可能很初级的东西大喊大叫。;)

```
 $("#filter").live("keyup", function (ev) {
    var $filter = $(this),
        keyCode = ev.keyCode || ev.which,
        search;

    if (keyCode === 27) { //ESC
      $filter.val("");
    }

    search = $(this).val();
    $("#results").find("li").each(function () {
      var $li = $(this);
      if (search === "") {
        $li.show();
      } else {
        if (_.include(service_names, search)) {
          $li.toggle($li.hasClass("items-" + search));
        } else {
          if ($li.text().search(search) > 0) {
            $li.show();
          } else {
            $li.hide();
          }
        }
      }
    });
 }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T06:30:18.137

将两个字符串都转换为小写，然后进行搜索：

```
search = $(this).val().toLowerCase();

$li.text().toLowerCase().search(search); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T06:29:56.187

您想要进行不区分大小写的搜索。尝试使用正则表达式`search(/string/i)`

```
$("#filter").live("keyup", function (ev) {
    var $filter = $(this),
        keyCode = ev.keyCode || ev.which,
        search;

    if (keyCode === 27) { //ESC
      $filter.val("");
    }

    search = $(this).val() ;
    // added
    var search_regex = new RegExp(search, 'i');
    $("#results").find("li").each(function () {
      var $li = $(this);
      if (search === "") {
        $li.show();
      } else {
        if (_.include(service_names, search)) {
          $li.toggle($li.hasClass("items-" + search));
        } else {
          // changed here
          if (search_regex.test($li.text())) {
            $li.show();
          } else {
            $li.hide();
          }
        }
      }
    });
 }); 
```

# jquery - tinymce - 自定义 tinyMCEPopup.close

> ID：11009317
> 
> 赞同：1
> 
> 时间：2012-06-13T06:26:59.383
> 
> 标签：jquery, internet-explorer, popup, tinymce

我为 tinymce 开发了一个自定义文件管理器。但是，即使在 firefox 中将图像添加到 tinymce 中，它也无法在 ie 中使用以下代码块。

```
 tinyMCE.activeEditor.selection.setContent("<img src='" + $(this).attr("data-url") + "' style='width:150px; height:150px;' />"); 
```

在 Internet Explorer 中，它会删除 tinymce 中的所有内容并添加图像，因为“tinyMCE.activeEditor.selection”为空。关于这一点，我发现了以下帖子。 [设置光标/插入符号位置的最佳方法是什么？](https://stackoverflow.com/questions/1253303/whats-the-best-way-to-set-cursor-caret-position#answer-2709438)

但是在用户打开文件管理器弹出窗口后，他/她可能想要在不添加文件的情​​况下关闭它。如果发生这种情况，我应该删除我为光标/插入符号位置添加的 html，以便在 ie 中找到以后的选择。

我尝试添加一个点击事件来关闭弹出窗口的链接，但是它不起作用。我需要感知弹出窗口并对其进行自定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:00:16.650

使用此代码，我可以删除插入符号 html。

```
 $($(parent.document).find("a.mceClose")[0]).mousedown(function () {
                if ($.browser.msie) {
                    var ed = tinyMCE.activeEditor;
                    var html = $(ed.dom.select('div#filemanager_wrapper')[0]).html();
                    $(ed.dom.select('div#filemanager_wrapper')[0]).replaceWith(html)
                }

            }); 
```

# regex - 使用正则表达式验证数学表达式？

> ID：11009320
> 
> 赞同：9
> 
> 时间：2012-06-13T06:27:19.267
> 
> 标签：regex

我想使用正则表达式验证数学表达式。数学表达式可以是这样的

1.  它可以是空白的，意味着没有输入任何内容

2.  如果指定，它将始终以运算符`+`or`-`或`*`or开头，`/`并且始终后跟一个可以有任意位数的数字，并且该数字可以是十进制（包含`.`在数字之间）或整数（没有“。”符号内数字）。例子：`*0.9`, `+22.36`, `- 90`,`/ 0.36365`

3.  然后可以跟在第 2 点（上一行）中提到的内容。例子：`*0.9+5`, `+22.36*4/56.33`, `-90+87.25/22`,`/0.36365/4+2.33`

请帮帮我。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-13T06:35:11.630

像这样的东西应该工作：

```
^([-+/*]\d+(\.\d+)?)* 
```

[正则表达式演示](http://regexr.com?31884)

*   `^`- 字符串的开头
*   `[-+/*]`- 这些运营商之一
*   `\d+`- 一个或多个数字
*   `(\.\d+)?`- 一个可选的点，后跟一个或多个数字
*   `()*`- 整个表达式重复零次或多次

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-20T02:09:10.753

您可以尝试使用[moo](https://github.com/no-context/moo)等生成这样的正则表达式：

```
(?:(?:((?:(?:[ \t]+))))|(?:((?:(?:\/\/.*?$))))|(?:((?:(?:(?<![\d.])[0-9]+(?![\d.])))))|(?:((?:(?:[0-9]+\.(?:[0-9]+\b)?|\.[0-9]+))))|(?:((?:(?:(?:\+)))))|(?:((?:(?:(?:\-)))))|(?:((?:(?:(?:\*)))))|(?:((?:(?:(?:\/)))))|(?:((?:(?:(?:%)))))|(?:((?:(?:(?:\()))))|(?:((?:(?:(?:\))))))) 
```

此正则表达式匹配任意数量的 int、float、大括号、空格和操作符`+-*/%`。

但是，诸如此类`2+`的表达式仍将由正则表达式验证，因此您可能希望改用解析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-25T18:49:29.257

如果你想要消极或积极的表达，你可以这样写>
`^\-?[0-9](([-+/*][0-9]+)?([.,][0-9]+)?)*?$`

还有第二个
`^[(]?[-]?([0-9]+)[)]??([(]?([-+/*]([0-9]))?([.,][0-9]+)?[)]?)*$`

在表达式中有括号但不计算您需要验证它的方法或正则表达式的数字。// 方法

```
 public static bool IsPairParenthesis(string matrixExpression)
    {
        int numberOfParenthesis = 0;
        foreach (char character in matrixExpression)
        {
            if (character == '(')
            {
                numberOfParenthesis++;
            }
            if (character == ')')
            {
                numberOfParenthesis--;
            }
        }

        if (numberOfParenthesis == 0)
        { return true; }
        return false;
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-06-25T16:03:22.670

这是 java 正则表达式，但这只是在没有大括号的情况下

```
[+\-]?(([0-9]+\.[0-9]+)|([0-9]+\.?)|(\.?[0-9]+))([+\-/*](([0-9]+\.[0-9]+)|([0-9]+\.?)|(\.?[0-9]+)))* 
```

这也是java代码中的大括号
在这种情况下，我替换`(..)`为数字（..），应该匹配没有大括号模式

```
 //  without brace pattern
    static Pattern numberPattern = Pattern.compile("[+\\-]?(([0-9]+\\.[0-9]+)|([0-9]+\\.?)|(\\.?[0-9]+))([+\\-/*](([0-9]+\\.[0-9]+)|([0-9]+\\.?)|(\\.?[0-9]+)))*");
    static Pattern bracePattern = Pattern.compile("\\([^()]+\\)");

    public static boolean matchesForMath(String txt) {

        if (txt == null || txt.isEmpty()) return false;
        txt = txt.replaceAll("\\s+", "");
        if (!txt.contains("(") && !txt.contains(")")) return numberPattern.matcher(txt).matches();
        if (txt.contains("(") ^ txt.contains(")")) return false;
        if (txt.contains("()")) return false;

        Queue<String> toBeRematch = new ArrayDeque<>();
        toBeRematch.add(txt);
        while (toBeRematch.size() > 0) {
            String line = toBeRematch.poll();
            Matcher m = bracePattern.matcher(line);
            if (m.find()) {
                String newline = line.substring(0, m.start()) + "1" + line.substring(m.end());
                String withoutBraces = line.substring(m.start() + 1, m.end() - 1);
                toBeRematch.add(newline);
                if (!numberPattern.matcher(withoutBraces).matches()) return false;
            }

        }
        return true;
    } 
```

# node.js - 如何将字符串附加到文件？

> ID：11009324
> 
> 赞同：4
> 
> 时间：2012-06-13T06:27:33.563
> 
> 标签：node.js

我有几个进程 node.js。我只想在每个请求中向一个文件添加一个字符串（例如 nginx、apache 等中的日志文件）。最好的方法是什么？简单的：

```
fs.open(file, "a", 0744, function (err, fd) {
    if (err) throw err;
    fs.write(fd, data, null, 'utf8', function (err, written) {
        if (err) throw err;
    });
}); 
```

要不然 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T16:05:01.853

这将起作用，但是如果它不断打开和关闭文件，它可能不是最佳解决方案。对于写入速度更快的东西，我会尝试将其与 fs.createWriteStream 进行基准测试，特别是因为这为您提供了可以在路由中使用的范围。

```
var fs = require("fs");

   //set dummy data as random number
var data = Math.floor(Math.random()*11);
   //Set our log file as a writestream variable with the 'a' flag
var logFile = fs.createWriteStream('log.txt', {
  flags: "a",
  encoding: "encoding",
  mode: 0744
})
   //call the write option where you need to append new data
logFile.write(new Date().toSting + ': ' data);
logFile.write(new Date().toSting + ': ' data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T09:18:00.080

另一种解决方案是`fs.appendFile`. 正如 Sdedelbrock 指出的那样，`fs.createWriteStream`它比这种方法快得多，因为它不需要不断地打开和关闭文件。我在我的机器上编写了一个小基准，它快了大约 3 倍，绝对值得。

# c# - 如何使用Container获取绑定数据？

> ID：11009328
> 
> 赞同：2
> 
> 时间：2012-06-13T06:27:42.570
> 
> 标签：c#, wpf, data-binding

据了解，如果您希望从 ListBox 中的项目中获取容器，您可以使用：

```
ListBoxItem lbi1 = (ListBoxItem)(listBox.ItemContainerGenerator.ContainerFromIndex(0)); 
```

（来源：[http](http://bea.stollnitz.com/blog/?p=7) ://bea.stollnitz.com/blog/?p=7 ）

假设上面的列表框绑定到一个列表，我该如何做相反的事情？例如，如果我想使用容器（`lbi1`在上面的示例中）获取列表中的数据绑定数据怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:57:23.260

好的，我想我找到了答案:)

对于 ListBox 项或其他类似的 ContentControl，可以通过以下方式检索数据：

```
Class data = (Class)lbi1.Content; 
```

对于其他控件，例如 TreeViewItems，由于它们不是 ContentControls，因此可以通过访问 DataContext 来检索数据：

```
Class data = (Class)treeViewItem.DataContext; 
```

# oop - 持有集合的对象与该集合中的对象之间存在什么样的关系？

> ID：11009331
> 
> 赞同：0
> 
> 时间：2012-06-13T06:27:53.177
> 
> 标签：oop, uml

如果我们考虑一个 UML 图，其中我们有一个对象，其中包含另一个类的对象集合。两个类之间会有什么样的关系。

是聚合还是组合？

具有集合的对象不会直接拥有这些对象，而是集合将持有它们。但是在这种情况下，我们可以将其表示为 1 对多、包含类型的关系吗？

我对 UML 很陌生，如果这似乎是一个完全的菜鸟问题，我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:50:54.113

**更少的 UML，更多的概念，实用的答案**

您有第一个对象，其中包含另一个第二个对象。

第二个对象本身就是一个集合，其中包含多个对象元素。

从非常技术、设计或编程的角度来看，有人可能会认为元素与第一个对象无关，而是与第二个对象相关，作为它的容器。

第一个对象将**包含和管理对象的过程委托**给第二个对象。

我在设计和编程中多次使用过这个案例。在许多集合库（数组、列表、堆栈）中，每个项目都有对容器的引用。

我有时会在每个项目中添加对第一个对象本身的引用。

因此，您可能会将主要的第一个对象和集合对象视为单个对象。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:30:02.153

***组合***是一种“部分”关系，例如：每辆汽车都有引擎，如果引擎不存在，汽车就无法工作。所以汽车和发动机之间的关系，就是组合。

但是***聚合***是一种“具有”关系，在聚合中，对象可以像汽车和收音机一样*独立存在。*

所以，如果你的关系太强，它是组合还是不是聚合。

# c# - 如何在 VS 2012 Professional RC 中添加假货程序集？

> ID：11009332
> 
> 赞同：32
> 
> 时间：2012-06-13T06:27:55.887
> 
> 标签：c#, tdd, visual-studio-2012, microsoft-fakes

根据下面关于 VS 2012 和 Microsoft Fakes Test Framework 的两篇文章，我应该能够在我的测试项目的引用中右键单击一个程序集，然后选择“添加 Fakes 程序集”以在 Visual Studio 11 中创建一个新的 Microsoft Fakes 框架程序集/ 2012\. 但是我没有在 VS 2012 RC Professional 中找到它应该在的上下文菜单项。我可能需要引用 Microsoft.QualityTools.Testing.Fakes 程序集，但在添加引用搜索中也找不到它。自测试版以来，所需的菜单是否发生了变化？我需要安装扩展程序吗？

**如何在 VS 2012 Professional RC 中添加假货程序集？**

参考文章：

*   [在 VS11 中使用 Fakes 进行简单的单元测试存根和垫片](http://blogs.interknowlogy.com/2012/03/05/using-fakes-for-easy-unit-test-stubs-and-shims-in-vs11/)
*   [为被测系统创建假货](http://www.peterprovost.org//blog/2012/04/15/visual-studio-11-fakes-part-1/)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-25T15:24:32.970

**更新：** VS2012 Update 2 将在 Premium 中包含 Fakes 支持。

请参阅[http://blogs.msdn.com/b/bharry/archive/2013/01/30/announcing-visual-studio-2012-update-2-vs2012-2.aspx](http://blogs.msdn.com/b/bharry/archive/2013/01/30/announcing-visual-studio-2012-update-2-vs2012-2.aspx)

我在 Microsoft Connect 门户中问过这个问题……答案令人失望：

> RC 文档不正确。假货仅在 VS Ultimate 中可用。我已经转达了您对 Fakes 团队的担忧。目前，我们没有任何关于 VS 2012 的 PEX 的信息。

我的详细问题是：

> MSDN 文档指出，Fakes 框架是用于单元测试代码隔离的 Moles 框架的继承者，在 Premium 和 Ultimate 版本中可用。
> 
> [http://msdn.microsoft.com/en-us/library/dd264975(v=vs.110)](http://msdn.microsoft.com/en-us/library/dd264975(v=vs.110))
> 
> 此外，在 MSDN 博客的其他地方，Peter Provost 几个月前在 VS2011 版本中也证实了这一点：
> 
> [http://blogs.msdn.com/b/visualstudioalm/archive/2012/03/09/10279666.aspx](http://blogs.msdn.com/b/visualstudioalm/archive/2012/03/09/10279666.aspx)
> 
> 但是，当我今天试用 Premium RC 时，我在我的测试项目中看不到包含要测试的代码的示例 DLL 的“添加假货程序集”上下文菜单选项。只有在我安装了 Ultimate RC 之后，我才获得了 Fakes 菜单支持。
> 
> 这促使我要求您澄清以下内容：
> 
> 1）我的观察是否正确，Fakes 确实只适用于 Ultimate？是因为它依赖于 IntelliTrace，这是一个 Ultimate 独有的功能吗？
> 
> 2) 如果是，那么为什么会有相互矛盾的信息表明 Fakes with Premium 的可用性？
> 
> 3) 为什么 Fakes 框架现在要依赖于 IntelliTrace，而在 VS 2010 中没有这种依赖关系的情况下它运行良好？这实质上是切断了使用 VS 2010 专业版甚至高级版的 Moles 的现有用户，并且由于他们现有的对 Moles 进行单元测试的依赖而将他们升级到 VS 2012 提出了问题。
> 
> 4) 我们已经在 VS 2010 专业版中使用 Moles。所以这个观察确实让我担心目前在我们的 C# 开发人员中使用 Moles 的决定。充其量，我们可以考虑为我们庞大的开发人员群升级到 Premium（鉴于我们也有代码覆盖支持）......但是为了获得 UT 支持而直接升级到 Ultimate 是不可能的。
> 
> 我希望尽早澄清这些要点，以便我们可以开始寻找 Moles 的替代品，以防您确实决定将 Fakes 保留在 VS 2012 Ultimate 中。

# android - android中视图寻呼机内的Webview

> ID：11009333
> 
> 赞同：6
> 
> 时间：2012-06-13T06:28:16.253
> 
> 标签：android, android-layout

我`WebView`在视图的底部有一个`ViewPager`... 当我滑过`ViewPager`. 视图继续向下移动。（我想重点是 webview）我不确定这是否是由于`WebView`. 使用 html 数据加载 webview `webView.loadDataWithBaseURL(null, data, "text/html","utf-8",null);`

每次加载下一个项目时页面向下移动，这很烦人。我`ImageView`在视图顶部有一个

任何指针？

这是xml：

```
<ScrollView
        android:id="@+id/scroll_view_1"
        style="@style/some_style"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:fadingEdge="none" >

        <LinearLayout
            android:id="@+id/linear_layout_1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/some_drawable"
            android:orientation="vertical" >

            <RelativeLayout
                android:id="@+id/relative_layout_1"
                android:layout_width="fill_parent"
                android:layout_height="250dp"
                android:paddingLeft="5dip"
                android:paddingRight="5dip" >

                <LinearLayout
                    android:id="@+id/linear_layout_2"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_alignParentBottom="true"
                    android:layout_marginTop="5dip"
                    android:gravity="center" >

                    <PageIndicator
                        android:id="@+id/page_indicator"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:padding="10dip" />
                </LinearLayout>

                <RelativeLayout
                    android:id="@+id/relative_layout_2"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:layout_alignParentTop="true"
                    android:visibility="visible" >

                    <TextView
                        android:id="@+id/text_view_1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentRight="true"
                        android:layout_centerVertical="true"
                        android:layout_marginRight="10dip"
                        android:text="1/50"
                        android:textColor="#000000"
                        android:textSize="16sp" />

                    <ImageView
                        android:id="@+id/image_view_1"
                        android:layout_width="35dip"
                        android:layout_height="35dip"
                        android:layout_marginRight="5dip"
                        android:layout_toLeftOf="@id/text_view_1"
                        android:scaleType="centerInside"
                        android:src="@drawable/some_drawable_3" />

                    <ImageView
                        android:id="@+id/image_view_2"
                        android:layout_width="35dip"
                        android:layout_height="35dip"
                        android:layout_marginRight="5dip"
                        android:layout_toLeftOf="@id/image_view_1"
                        android:scaleType="centerInside"
                        android:src="@drawable/some_drawable_4" />
                </RelativeLayout>
            </RelativeLayout>

            <RelativeLayout
                android:layout_width="relative_layout_3"
                android:layout_height="wrap_content"
                android:background="#f8f8f8"
                android:gravity="center_vertical"
                android:orientation="horizontal"
                android:paddingBottom="5dip"
                android:paddingTop="5dip" >

                <LinearLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerInParent="true"
                    android:gravity="center_vertical" >

                    <ImageView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:scaleType="centerInside"
                        android:src="@drawable/some_drawbale_2" />

                    <TextView
                        android:id="@+id/text_view_2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_vertical"
                        android:layout_marginLeft="6dip"
                        android:gravity="left|center_vertical"
                        android:paddingLeft="3dip"
                        android:paddingRight="7dip"
                        android:text="$121.00"
                        android:textColor="#000000"
                        android:textSize="16sp"
                        android:textStyle="bold" />

                    <Button
                        android:id="@+id/button_1"
                        android:layout_width="95dip"
                        android:layout_height="30dip"
                        android:layout_gravity="center_vertical"
                        android:layout_marginLeft="15sp"
                        android:background="@drawable/some_drawable_5"
                        android:gravity="center"
                        android:textSize="15dip" />
                </LinearLayout>
            </RelativeLayout>

            <TextView
                android:id="@+id/text_view_3"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dip"
                android:layout_marginRight="10dip"
                android:layout_marginTop="10dip"
                android:gravity="left"
                android:lineSpacingExtra="2dip"
                android:text="Some Text"
                android:textColor="#000000"
                android:textSize="16sp"
                android:textStyle="bold" />

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:paddingBottom="10dip"
                android:paddingTop="15dip" >

                <WebView
                    android:id="@+id/web_view"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="10dip"
                    android:layout_marginRight="10dip"
                    android:focusable="false"/>
            </LinearLayout>
        </LinearLayout>
    </ScrollView> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-13T07:25:31.377

我有同样的问题。并且将此属性添加到最顶层的线性布局解决了这个问题。试试这个，

```
 android:descendantFocusability="blocksDescendants". 
```

在您的情况下，将此添加到 ScrollView 内的线性布局并检查。

# iphone - 在应用程序内创建应用程序设置

> ID：11009334
> 
> 赞同：0
> 
> 时间：2012-06-13T06:28:19.247
> 
> 标签：iphone, ios, uiviewcontroller, application-settings, settings.bundle

我想将我的所有应用程序设置从**设置**转移到应用程序内部。

就像我的设置中有这样的设置 ![在此处输入图像描述](../Images/c2967dcff2c7e8ec39444bb763378b40.png)

我想从我的应用程序中处理它。主要问题是，当我需要更改设置时，我需要最小化杀死我的应用程序以保存其更改。所以我想通过单击一个标签栏按钮将它放在我的应用程序中吗？所以我可以随时从我的应用程序内部更改它。

如何将所有这些放在我在应用程序中创建的自定义视图中。提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:37:32.957

如果我没有误解，那么我认为您的要求是这样的：

[如何从我的应用程序中打开设置应用程序？](https://stackoverflow.com/questions/377102/how-do-i-open-the-settings-application-from-my-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:09:44.653

如果您使用的是 iOS5.1，则认为您无法从您的应用程序访问（获取/设置保存的项目）Settings.app 请参阅[链接](https://stackoverflow.com/questions/9664315/access-settings-app-in-ios)以供参考。

# java - Cygwin 上的 tdbloader：获取 FileNotFoundException：d:\cygdrive\d\....\node2id.idn

> ID：11009335
> 
> 赞同：1
> 
> 时间：2012-06-13T06:28:25.800
> 
> 标签：java, jena

我对耶拿/TDB 完全陌生。我要做的就是使用 tdb 脚本或通过 java api 从一些示例 rdf、N3 等文件中加载数据。我尝试`tbdloader`在 Cygwin 上使用来加载数据（tdb-0.9.0，在带有 IBM Java 1.6 的 Windows XP 上）。以下是我运行的命令：

```
$ export TDBROOT=/cygdrive/d/Project/Store_DB/jena-tdb-0.9.0-incubating
$ export PATH=$TDBROOT/bin:$PATH 
```

我还在*tdbloader 脚本*中更改了 java 的*类路径*，如[Cygwin 上的 tdbloader 中所述： java.lang.NoClassDefFoundError](https://stackoverflow.com/questions/6089278/tdbloader-on-cygwin-java-lang-noclassdeffounderror)：

 *```
exec java $JVM_ARGS $SOCKS -cp "PATH_OF_JAR_FILES" "tdb.$TDB_CMD" $TDB_SPEC "$@" 
```

因此，当我运行`$ tdbloader --help`它时，它会正确显示帮助。但是当我跑步时

```
$ tdbloader --loc /cygdrive/d/Project/Store_DB/data1 
```

或者

```
$ tdbloader --loc /cygdrive/d/Project/Store_DB/data1 test.rdf 
```

我收到以下异常：

```
 com.hp.hpl.jena.tdb.base.file.FileException: Failed to open: d:\cygdrive\d\Project\Store_DB\data1\node2id.idn (mode=rw)
        at com.hp.hpl.jena.tdb.base.file.ChannelManager.open$(ChannelManager.java:83)
        at com.hp.hpl.jena.tdb.base.file.ChannelManager.openref$(ChannelManager.java:58)
        at com.hp.hpl.jena.tdb.base.file.ChannelManager.acquire(ChannelManager.java:47)
        at com.hp.hpl.jena.tdb.base.file.FileBase.<init>(FileBase.java:57)
        at com.hp.hpl.jena.tdb.base.file.FileBase.<init>(FileBase.java:46)
        at com.hp.hpl.jena.tdb.base.file.FileBase.create(FileBase.java:41)
        at com.hp.hpl.jena.tdb.base.file.BlockAccessBase.<init>(BlockAccessBase.java:46)
        at com.hp.hpl.jena.tdb.base.block.BlockMgrFactory.createStdFile(BlockMgrFactory.java:98)
        at com.hp.hpl.jena.tdb.base.block.BlockMgrFactory.createFile(BlockMgrFactory.java:82)
        at com.hp.hpl.jena.tdb.base.block.BlockMgrFactory.create(BlockMgrFactory.java:58)
        at com.hp.hpl.jena.tdb.setup.Builder$BlockMgrBuilderStd.buildBlockMgr(Builder.java:196)
        at com.hp.hpl.jena.tdb.setup.Builder$RangeIndexBuilderStd.createBPTree(Builder.java:165)
        at com.hp.hpl.jena.tdb.setup.Builder$RangeIndexBuilderStd.buildRangeIndex(Builder.java:134)
        at com.hp.hpl.jena.tdb.setup.Builder$IndexBuilderStd.buildIndex(Builder.java:112)
        at com.hp.hpl.jena.tdb.setup.Builder$NodeTableBuilderStd.buildNodeTable(Builder.java:85)
        at com.hp.hpl.jena.tdb.setup.DatasetBuilderStd$NodeTableBuilderRecorder.buildNodeTable(DatasetBuilderStd.java:389)
        at com.hp.hpl.jena.tdb.setup.DatasetBuilderStd.makeNodeTable(DatasetBuilderStd.java:300)
        at com.hp.hpl.jena.tdb.setup.DatasetBuilderStd._build(DatasetBuilderStd.java:167)
        at com.hp.hpl.jena.tdb.setup.DatasetBuilderStd.build(DatasetBuilderStd.java:157)
        at com.hp.hpl.jena.tdb.setup.DatasetBuilderStd.build(DatasetBuilderStd.java:70)
        at com.hp.hpl.jena.tdb.StoreConnection.make(StoreConnection.java:132)
        at com.hp.hpl.jena.tdb.transaction.DatasetGraphTransaction.<init>(DatasetGraphTransaction.java:46)
        at com.hp.hpl.jena.tdb.sys.TDBMakerTxn._create(TDBMakerTxn.java:50)
        at com.hp.hpl.jena.tdb.sys.TDBMakerTxn.createDatasetGraph(TDBMakerTxn.java:38)
        at com.hp.hpl.jena.tdb.TDBFactory._createDatasetGraph(TDBFactory.java:166)
        at com.hp.hpl.jena.tdb.TDBFactory.createDatasetGraph(TDBFactory.java:74)
        at com.hp.hpl.jena.tdb.TDBFactory.createDataset(TDBFactory.java:53)
        at tdb.cmdline.ModTDBDataset.createDataset(ModTDBDataset.java:95)
        at arq.cmdline.ModDataset.getDataset(ModDataset.java:34)
        at tdb.cmdline.CmdTDB.getDataset(CmdTDB.java:137)
        at tdb.cmdline.CmdTDB.getDatasetGraph(CmdTDB.java:126)
        at tdb.cmdline.CmdTDB.getDatasetGraphTDB(CmdTDB.java:131)
        at tdb.tdbloader.loadQuads(tdbloader.java:163)
        at tdb.tdbloader.exec(tdbloader.java:122)
        at arq.cmdline.CmdMain.mainMethod(CmdMain.java:97)
        at arq.cmdline.CmdMain.mainRun(CmdMain.java:59)
        at arq.cmdline.CmdMain.mainRun(CmdMain.java:46)
        at tdb.tdbloader.main(tdbloader.java:53)
Caused by: java.io.FileNotFoundException: d:\cygdrive\d\Project\Store_DB\data1\node2id.idn (The system cannot find the path specified.)
        at java.io.RandomAccessFile.open(Native Method)
        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:222)
        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:107)
        at com.hp.hpl.jena.tdb.base.file.ChannelManager.open$(ChannelManager.java:80)
        ... 37 more 
```

我不确定*node2id.idn*文件是什么，为什么期待它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:27:13.313

该文件`node2id.idn`是 TDB 的内部索引文件之一。这不是您必须为自己创建或管理的东西。我自己刚刚尝试过`tdbloader`cygwin，它对我来说效果很好。我可以想到两种基本的可能性：

*   你的磁盘已满
*   TDB 索引已损坏

如果这是您要加载到原本为空的 TDB 中的第一个文件，则第二种可能性不太可能。如果要加载到非空 TDB 中，请尝试删除 TDB 映像并重新开始。请注意，TDB 本身并不管理并发写入：如果您有多个进程写入单个 TDB 映像，则必须在应用程序级别处理锁定，或者使用 TDB 的[事务](http://jena.apache.org/documentation/tdb/tdb_transactions.html)。

当然，最后一种可能性是你的磁盘是片状的。您可能想在另一台机器上尝试您的代码。

如果这些建议都没有帮助，请将完整的最小测试用例发送到 Jena 用户列表。*

# android - 如何从 logcat 知道配对是否成功？

> ID：11009344
> 
> 赞同：1
> 
> 时间：2012-06-13T06:29:09.897
> 
> 标签：android, android-logcat

我现在正在阅读 logcat，试图了解为什么 2 台设备无法通过蓝牙连接。有没有办法仅通过读取 logcat 来知道 2 个设备是否配对成功？我没有随身携带这些设备，只是想通过阅读日志来了解情况。

也许我应该寻找`BluetoothBondState`. 这些状态在某处有定义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:17:59.833

从您的评论和[文档](http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html#BOND_BONDED)中扩展：

在键合期间，常数`public static final int BOND_BONDING`具有值`11 (0x0000000b)`。

而一旦绑定成功，常数`public static final int BOND_BONDED`就有了价值`12 (0x0000000c)`。

# android - 在android中以编程方式更改相机分辨率设置

> ID：11009347
> 
> 赞同：5
> 
> 时间：2012-06-13T06:29:22.813
> 
> 标签：android, android-intent, android-camera, high-resolution

我正在使用以下代码打开相机。是否可以通过编程将相机分辨率设置为高？

```
private void openDefaultCameraApp() {
    Intent i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    startActivityForResult(i, CAPTURE_PHOTO_CONSTANT);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T06:38:54.953

您必须`MediaStore.EXTRA_OUTPUT`在意图中添加一个。另外，您必须为要保存的图片指定一个 Uri。这将保存全分辨率图像，否则，它只会捕捉一个小图像。

请参阅 Android 文档：[ACTION_IMAGE_CAPTURE](http://developer.android.com/reference/android/provider/MediaStore.html#ACTION_IMAGE_CAPTURE)

可以发送标准 Intent 操作以使相机应用程序捕获图像并返回它。调用者可以传递一个额外的`EXTRA_OUTPUT`来控制这个图像将被写入哪里。如果`EXTRA_OUTPUT`不存在，则在额外字段中将小尺寸图像作为 Bitmap 对象返回。这对于只需要小图像的应用程序很有用。如果`EXTRA_OUTPUT`存在，则将全尺寸图像写入 Uri 值`EXTRA_OUTPUT`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T06:48:00.947

我认为它不可能看到下面的链接：

[使用 ACTION_IMAGE_CAPTURE 以较低分辨率打开 Android 相机](https://stackoverflow.com/questions/7913282/open-android-camera-in-lower-resolution-with-action-image-capture)

您必须从相机预览屏幕手动设置分辨率。

如果即使您的相机分辨率设置为高，您也获得了小快照，那么请使用 Zed Scio 的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T06:37:34.423

您可以使用[此](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getSupportedPictureSizes%28%29)方法获取所有支持的图片尺寸。

```
public List<Camera.Size> getSupportedPictureSizes () 
```

您将获得`List`支持的图片尺寸。然后从此，您可以使用[此](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setPictureSize%28int,%20int%29)方法设置您想要的任何大小。

```
public void setPictureSize (int width, int height) 
```

# python - Python 中的无尽应用

> ID：11009357
> 
> 赞同：1
> 
> 时间：2012-06-13T06:30:25.700
> 
> 标签：python, multithreading

我有一个我希望始终在后台运行的 python 脚本。应用程序所做的是它转到 Oracle 数据库并检查是否有要向用户显示的消息，如果有，则使用 pynotify 显示通知。

我尝试使用 Timer 对象，但它只在选择时间之后调用该方法。我希望它在选择时间之后每次调用。

```
if __name__ == '__main__':
  applicationName = "WEWE"
    # Initialization of the Notification library
  if not pynotify.init(applicationName):
   sys.exit(1)         

  t = threading.Timer(5.0, runWorks)
  t.start() 
```

会做这项工作，有没有更好的方法？

```
 if __name__ == '__main__':
      applicationName = "WEEWRS"
        # Initialization of the Notification library
      if not pynotify.init(applicationName):
       sys.exit(1)         
      while True:
       t = threading.Timer(5.0, runWorks)
       t.start() 
```

但这给了我另一个问题。

```
thread.error: can't start new thread

(r.py:12227): GLib-ERROR **: creating thread 'gdbus': Error creating thread: Resource temporarily unavailable 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:20:39.933

我解决了减少字符串创建的问题。以下错误 -

```
thread.error: can't start new thread

(r.py:12227): GLib-ERROR **: creating thread 'gdbus': Error creating thread: Resource temporarily unavailable 
```

资源不足时出现。以下是更正后的代码。

```
if __name__ == '__main__':
  applicationName = "DSS POS"
  # Initialization of the Notification library
  if not pynotify.init(applicationName):
   sys.exit(1)         

  flagContinous = True
  timeout = 5
  # This loop will continously keep the application in the background
  while flagContinous:
   time.sleep(timeout)
   runWorks()
  # After 30 seconds, "hello, world" will be printed 
```

我还使用了一个锁定文件，这样脚本就不会多次运行。

```
pid = str(os.getpid())
  pidfile = "/tmp/mydaemon.pid"

  # If we have a lock already block the program
  if os.path.isfile(pidfile):
    print "%s already exists, exiting" % pidfile
    sys.exit()
  else:
    file(pidfile, 'w').write(pid)
  # Do all the work
  applicationName = "DSS POS"
  # Initialization of the Notification library
  if not pynotify.init(applicationName):
   sys.exit(1)         

  # Controls for the application
  flagContinous = True
  timeout = 5
  # This loop will continously keep the application in the background
  while flagContinous:
   time.sleep(timeout)
   runWorks()
  # After 30 seconds, "hello, world" will be printed  

  # Release the file
  os.unlink(pidfile) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:24:28.247

使用这个简单的守护程序脚本总是更好：http: [//www.jejik.com/articles/2007/02/a_simple_unix_linux_daemon_in_python/](http://www.jejik.com/articles/2007/02/a_simple_unix_linux_daemon_in_python/)

它做得很好！

# facebook - 通过 Graph API 在 Facebook 页面上查找用户交互

> ID：11009360
> 
> 赞同：2
> 
> 时间：2012-06-13T06:30:44.177
> 
> 标签：facebook, facebook-graph-api

给定一个 Facebook 用户 id 和一个 Facebook 页面 id，有没有办法在不首先下载整个提要的情况下找到用户在页面上所做的所有交互（发表评论、喜欢帖子等）？

我有该页面的访问密钥，如有必要，我可以为用户获取一个。

例如，在页面 315390295169855（Ninja Saga 页面）上，用户 ID 100002190613755 对帖子 315390295169855_401357983239752 发表了评论。我想搜索该页面，以便可以找到此类交互。

**我尝试过的事情**

我试过了

```
https://graph.facebook.com/315390295169855/feed?q=100002190613755&access_token=FOO 
```

但这似乎没有奏效。

我还考虑过先下载整个提要，然后再进行搜索。然而事实证明这是不切实际的，例如 Ninja Saga 页面有数以万计的交互，并且可能会导致用户开始玩farmville，而不是等待兆字节长的预搜索下载完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:49:19.847

您在那里有答案-从您在页面连接上检索的帖子中提取评论列表`/feed`-我认为调用的默认返回也`/feed`包括每个帖子上的少量最近评论，您可以检索休息一下`/POST_ID/comments`

# python - Apache 没有选择 Python 包的详细信息

> ID：11009362
> 
> 赞同：0
> 
> 时间：2012-06-13T06:31:02.007
> 
> 标签：python, apache

我有一个脚本：

```
#!/usr/local/bin/python

import cgi
import pymysql as MySQLdb
import os,sys,traceback
import cgitb
from xml.dom.minidom import Document
import site
from distutils.sysconfig import get_python_lib
import distutils.sysconfig

print "Content-type: text/html"
print

print os.environ['PYTHONPATH'].split(os.pathsep)
print os.environ['PATH'].split(os.pathsep)
print distutils.sysconfig.get_python_lib()
print os.sep.join([sys.prefix, 'lib', 'python' + sys.version[:3], 'site-packages'])
print(get_python_lib())
print sys.version
print sys.prefix
print MySQLdb.__dict__
print "Test complete"
print MySQLdb.VERSION 
```

当我执行它时，我得到：

```
curl "http://box.com/cgi-bin/first.py"

['/usr/local/lib/python2.7/site-packages']
['/usr/local/bin/', '/usr/kerberos/sbin', '/usr/kerberos/bin', '/usr/local/bin', '/bin', '/usr/bin', '/usr/X11R6/bin']
/usr/local/lib/python2.7/site-packages
/usr/local/lib/python2.7/site-packages
/usr/local/lib/python2.7/site-packages
2.7.3 (default, Jun  6 2012, 10:53:07)
[GCC 4.1.2 20080704 (Red Hat 4.1.2-48)]
/usr/local
{'__name__': 'pymysql', '__file__': '/usr/local/lib/python2.7/site-packages/pymysql', '__path__': ['/usr/local/lib/python2.7/site-packages/pymysql'], '__doc__': None, '__package__': None}
Test complete 
```

注意 print MySQLdb.VERSION 值没有被打印出来。现在，当我在命令行中使用相同的程序时：

```
bin:>/usr/local/bin/python

Python 2.7.3 (default, Jun  6 2012, 10:53:07)
[GCC 4.1.2 20080704 (Red Hat 4.1.2-48)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import cgi
>>> import pymysql as MySQLdb
>>> import os,sys,traceback
>>> import cgitb
>>> from xml.dom.minidom import Document
>>> import site
>>> from distutils.sysconfig import get_python_lib
>>> import distutils.sysconfig
>>> print "Content-type: text/html"
Content-type: text/html
>>> print

>>>
>>> print os.environ['PYTHONPATH'].split(os.pathsep)
['/usr/local/lib/python2.7/site-packages']
>>> print os.environ['PATH'].split(os.pathsep)
['/usr/kerberos/sbin', '/usr/kerberos/bin', '/usr/local/bin', '/bin', '/usr/bin', '/usr/X11R6/bin']
>>> print distutils.sysconfig.get_python_lib()
/usr/local/lib/python2.7/site-packages
>>> print os.sep.join([sys.prefix, 'lib', 'python' + sys.version[:3], 'site-packages'])
/usr/local/lib/python2.7/site-packages
>>> print(get_python_lib())
/usr/local/lib/python2.7/site-packages
>>> print sys.version
2.7.3 (default, Jun  6 2012, 10:53:07)
[GCC 4.1.2 20080704 (Red Hat 4.1.2-48)]
>>> print sys.prefix
/usr/local
>>> print MySQLdb.__dict__
{'DBAPISet': <class 'pymysql.DBAPISet'>, 'FIELD_TYPE': <module 'pymysql.constants.FIELD_TYPE' from '/usr/local/lib/python2.7/site-packages/pymysql/constants/FIELD_TYPE.pyc'>, 'Binary': <function Binary at 0x2b2ba7b805f0>, 'InternalError': <class 'pymysql.err.InternalError'>, 'Time': <type 'datetime.time'>, 'NUMBER': DBAPISet([0, 1, 3, 4, 5, 8, 9, 13]), '__path__': ['/usr/local/lib/python2.7/site-packages/pymysql'], 'connect': <function Connect at 0x2b2ba7b807d0>, 'escape_dict': <function escape_dict at 0x2b2ba70a1140>, 'DATE': DBAPISet([10, 14]), 'escape_string': <function escape_string at 0x2b2ba70a1410>, 'times': <module 'pymysql.times' from '/usr/local/lib/python2.7/site-packages/pymysql/times.pyc'>, 'MySQLError': <class 'pymysql.err.MySQLError'>, 'threadsafety': 1, 'NULL': 'NULL', 'thread_safe': <function thread_safe at 0x2b2ba7b808c0>, 'TimeFromTicks': <function TimeFromTicks at 0x2b2ba7b80500>, 'Timestamp': <type 'datetime.datetime'>, 'charset': <module 'pymysql.charset' from '/usr/local/lib/python2.7/site-packages/pymysql/charset.pyc'>, '__package__': 'pymysql', 'Date': <type 'datetime.date'>, 'ProgrammingError': <class 'pymysql.err.ProgrammingError'>, 'TimestampFromTicks': <function TimestampFromTicks at 0x2b2ba7b80578>, 'converters': <module 'pymysql.converters' from '/usr/local/lib/python2.7/site-packages/pymysql/converters.pyc'>, 'Connect': <function Connect at 0x2b2ba7b807d0>, 'NotSupportedError': <class 'pymysql.err.NotSupportedError'>, 'DataError': <class 'pymysql.err.DataError'>, 'STRING': DBAPISet([253, 254, 247]), 'version_info': (1, 2, 2, 'final', 0), '__builtins__': {'bytearray': <type 'bytearray'>, 'IndexError': <type 'exceptions.IndexError'>, 'all': <built-in function all>, 'help': Type help() for interactive help, or help(object) for help about object., 'vars': <built-in function vars>, 'SyntaxError': <type 'exceptions.SyntaxError'>, 'unicode': <type 'unicode'>, 'UnicodeDecodeError': <type 'exceptions.UnicodeDecodeError'>, 'memoryview': <type 'memoryview'>, 'isinstance': <built-in function isinstance>, 'copyright': Copyright (c) 2001-2012 Python Software Foundation.
All Rights Reserved.

Copyright (c) 2000 BeOpen.com.
All Rights Reserved.

Copyright (c) 1995-2001 Corporation for National Research Initiatives.
All Rights Reserved.

Copyright (c) 1991-1995 Stichting Mathematisch Centrum, Amsterdam.
All Rights Reserved., 'NameError': <type 'exceptions.NameError'>, 'BytesWarning': <type 'exceptions.BytesWarning'>, 'dict': <type 'dict'>, 'input': <built-in function input>, 'oct': <built-in function oct>, 'bin': <built-in function bin>, 'SystemExit': <type 'exceptions.SystemExit'>, 'StandardError': <type 'exceptions.StandardError'>, 'format': <built-in function format>, 'repr': <built-in function repr>, 'sorted': <built-in function sorted>, 'False': False, 'RuntimeWarning': <type 'exceptions.RuntimeWarning'>, 'list': <type 'list'>, 'iter': <built-in function iter>, 'reload': <built-in function reload>, 'Warning': <type 'exceptions.Warning'>, '__package__': None, 'round': <built-in function round>, 'dir': <built-in function dir>, 'cmp': <built-in function cmp>, 'set': <type 'set'>, 'bytes': <type 'str'>, 'reduce': <built-in function reduce>, 'intern': <built-in function intern>, 'issubclass': <built-in function issubclass>, 'Ellipsis': Ellipsis, 'EOFError': <type 'exceptions.EOFError'>, 'locals': <built-in function locals>, 'BufferError': <type 'exceptions.BufferError'>, 'slice': <type 'slice'>, 'FloatingPointError': <type 'exceptions.FloatingPointError'>, 'sum': <built-in function sum>, 'getattr': <built-in function getattr>, 'abs': <built-in function abs>, 'exit': Use exit() or Ctrl-D (i.e. EOF) to exit, 'print': <built-in function print>, 'True': True, 'FutureWarning': <type 'exceptions.FutureWarning'>, 'ImportWarning': <type 'exceptions.ImportWarning'>, 'None': None, 'hash': <built-in function hash>, 'ReferenceError': <type 'exceptions.ReferenceError'>, 'len': <built-in function len>, 'credits':     Thanks to CWI, CNRI, BeOpen.com, Zope Corporation and a cast of thousands
    for supporting Python development.  See www.python.org for more information., 'frozenset': <type 'frozenset'>, '__name__': '__builtin__', 'ord': <built-in function ord>, 'super': <type 'super'>, 'TypeError': <type 'exceptions.TypeError'>, 'license': Type license() to see the full license text, 'KeyboardInterrupt': <type 'exceptions.KeyboardInterrupt'>, 'UserWarning': <type 'exceptions.UserWarning'>, 'filter': <built-in function filter>, 'range': <built-in function range>, 'staticmethod': <type 'staticmethod'>, 'SystemError': <type 'exceptions.SystemError'>, 'BaseException': <type 'exceptions.BaseException'>, 'pow': <built-in function pow>, 'RuntimeError': <type 'exceptions.RuntimeError'>, 'float': <type 'float'>, 'MemoryError': <type 'exceptions.MemoryError'>, 'StopIteration': <type 'exceptions.StopIteration'>, 'globals': <built-in function globals>, 'divmod': <built-in function divmod>, 'enumerate': <type 'enumerate'>, 'apply': <built-in function apply>, 'LookupError': <type 'exceptions.LookupError'>, 'open': <built-in function open>, 'quit': Use quit() or Ctrl-D (i.e. EOF) to exit, 'basestring': <type 'basestring'>, 'UnicodeError': <type 'exceptions.UnicodeError'>, 'zip': <built-in function zip>, 'hex': <built-in function hex>, 'long': <type 'long'>, 'next': <built-in function next>, 'ImportError': <type 'exceptions.ImportError'>, 'chr': <built-in function chr>, 'xrange': <type 'xrange'>, 'type': <type 'type'>, '__doc__': "Built-in functions, exceptions, and other objects.\n\nNoteworthy: None is the `nil' object; Ellipsis represents `...' in slices.", 'Exception': <type 'exceptions.Exception'>, 'tuple': <type 'tuple'>, 'UnicodeTranslateError': <type 'exceptions.UnicodeTranslateError'>, 'reversed': <type 'reversed'>, 'UnicodeEncodeError': <type 'exceptions.UnicodeEncodeError'>, 'IOError': <type 'exceptions.IOError'>, 'hasattr': <built-in function hasattr>, 'delattr': <built-in function delattr>, 'setattr': <built-in function setattr>, 'raw_input': <built-in function raw_input>, 'SyntaxWarning': <type 'exceptions.SyntaxWarning'>, 'compile': <built-in function compile>, 'ArithmeticError': <type 'exceptions.ArithmeticError'>, 'str': <type 'str'>, 'property': <type 'property'>, 'GeneratorExit': <type 'exceptions.GeneratorExit'>, 'int': <type 'int'>, '__import__': <built-in function __import__>, 'KeyError': <type 'exceptions.KeyError'>, 'coerce': <built-in function coerce>, 'PendingDeprecationWarning': <type 'exceptions.PendingDeprecationWarning'>, 'file': <type 'file'>, 'EnvironmentError': <type 'exceptions.EnvironmentError'>, 'unichr': <built-in function unichr>, 'id': <built-in function id>, 'OSError': <type 'exceptions.OSError'>, 'DeprecationWarning': <type 'exceptions.DeprecationWarning'>, 'min': <built-in function min>, 'UnicodeWarning': <type 'exceptions.UnicodeWarning'>, 'execfile': <built-in function execfile>, 'any': <built-in function any>, 'complex': <type 'complex'>, 'bool': <type 'bool'>, 'ValueError': <type 'exceptions.ValueError'>, 'NotImplemented': NotImplemented, 'map': <built-in function map>, 'buffer': <type 'buffer'>, 'max': <built-in function max>, 'object': <type 'object'>, 'TabError': <type 'exceptions.TabError'>, 'callable': <built-in function callable>, 'ZeroDivisionError': <type 'exceptions.ZeroDivisionError'>, 'eval': <built-in function eval>, '__debug__': True, 'IndentationError': <type 'exceptions.IndentationError'>, 'AssertionError': <type 'exceptions.AssertionError'>, 'classmethod': <type 'classmethod'>, 'UnboundLocalError': <type 'exceptions.UnboundLocalError'>, 'NotImplementedError': <type 'exceptions.NotImplementedError'>, 'AttributeError': <type 'exceptions.AttributeError'>, 'OverflowError': <type 'exceptions.OverflowError'>}, '__file__': '/usr/local/lib/python2.7/site-packages/pymysql/__init__.pyc', 'IntegrityError': <class 'pymysql.err.IntegrityError'>, 'escape_sequence': <function escape_sequence at 0x2b2ba70a11b8>, 'DATETIME': DBAPISet([12, 7]), 'sys': <module 'sys' (built-in)>, 'Connection': <function Connect at 0x2b2ba7b807d0>, 'VERSION': (0, 5, None), 'Error': <class 'pymysql.err.Error'>, '__name__': 'pymysql', 'install_as_MySQLdb': <function install_as_MySQLdb at 0x2b2ba7b80938>, 'constants': <module 'pymysql.constants' from '/usr/local/lib/python2.7/site-packages/pymysql/constants/__init__.pyc'>, 'DateFromTicks': <function DateFromTicks at 0x2b2ba7b80488>, 'BINARY': DBAPISet([249, 250, 251, 252]), '__version__': '0.5.None', '__all__': ['BINARY', 'Binary', 'Connect', 'Connection', 'DATE', 'Date', 'Time', 'Timestamp', 'DateFromTicks', 'TimeFromTicks', 'TimestampFromTicks', 'DataError', 'DatabaseError', 'Error', 'FIELD_TYPE', 'IntegrityError', 'InterfaceError', 'InternalError', 'MySQLError', 'NULL', 'NUMBER', 'NotSupportedError', 'DBAPISet', 'OperationalError', 'ProgrammingError', 'ROWID', 'STRING', 'TIME', 'TIMESTAMP', 'Warning', 'apilevel', 'connect', 'connections', 'constants', 'converters', 'cursors', 'escape_dict', 'escape_sequence', 'escape_string', 'get_client_info', 'paramstyle', 'threadsafety', 'version_info', 'install_as_MySQLdb', 'NULL', '__version__'], 'err': <module 'pymysql.err' from '/usr/local/lib/python2.7/site-packages/pymysql/err.pyc'>, 'InterfaceError': <class 'pymysql.err.InterfaceError'>, 'paramstyle': 'format', 'TIMESTAMP': DBAPISet([12, 7]), 'get_client_info': <function get_client_info at 0x2b2ba7b80848>, '__doc__': '\nPyMySQL: A pure-Python drop-in replacement for MySQLdb.\n\nCopyright (c) 2010 PyMySQL contributors\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the "Software"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n', 'Warning': <class 'pymysql.err.Warning'>, 'OperationalError': <class 'pymysql.err.OperationalError'>, 'ROWID': DBAPISet([]), 'TIME': DBAPISet([11]), 'apilevel': '2.0', 'DatabaseError': <class 'pymysql.err.DatabaseError'>}
>>> print "Test complete"
Test complete
>>> print MySQLdb.VERSION
(0, 5, None)
>>> 
```

我不确定我应该做些什么额外的事情才能使 curl 调用（就像通过浏览器一样）也可以工作。问题是当我运行时它会出错：

```
curl "http://box.com/cgi-bin/first.py"

AttributeError: 'module' object has no attribute 'VERSION' 
```

解决了！！！！

问题是 /usr/local/lib/python2.7/site-packages/pymysql 及其子目录中的文件确实具有执行权限。将它们更改为 755（全部）后，问题已解决。

# iphone - 在 iOS 中动态添加图像

> ID：11009365
> 
> 赞同：0
> 
> 时间：2012-06-13T06:31:21.113
> 
> 标签：iphone, objective-c, ios

按照规则，要在 iOS 中显示图像，图像必须位于同一项目的项目文件夹中。如果我在项目文件夹以外的文件夹中有图像，有没有办法将图像动态导入项目并显示在 iOS 屏幕上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:12:14.837

当您说“项目文件夹”时，您是指捆绑包吗？如果是这样，您可以将动态检索到的图像存储到应用程序的文档文件夹中并从那里检索它们，例如通过以下方式获取文档文件夹：

```
NSString *documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]; 
```

然后您可以在您的文档中使用该文档`imageWithContentsOfFile`路径并以这种方式加载您的 UIImages。

或者当您说“项目文件夹”时，您是指应用程序的文档文件夹还是捆绑包？如果是这样，那么您必须解释这些图像在哪里以及您要做什么。

# objective-c - 从 NSString 动态追加和删除子字符串

> ID：11009366
> 
> 赞同：0
> 
> 时间：2012-06-13T06:32:09.510
> 
> 标签：objective-c, ios, xcode, nsstring, substring

我正在从 NSString 动态追加和删除子字符串-

在特定的操作中，我正在附加使用（我在添加新字符串时使用逗号分隔符）-

```
self.selectedString = [self.selectedString length] < 1 ? newSelectedString 
                                                       : [self.selectedString stringByAppendingFormat:@",%@",newSelectedString]; 
```

删除 - 现在这个逗号在删除字符串时给我带来了问题。目前我正在为此使用解决方案 -

```
self.selectedString = [self.selectedString stringByReplacingOccurrencesOfString:newSelectedString
                                                                     withString:@""];

NSRange rangeSingleComma = [self.selectedString rangeOfString:@","];
NSRange rangeDoubleComma = [self.selectedString rangeOfString:@",,"];
if (rangeSingleComma.location == [self.selectedString length] - 1) {
    self.selectedString = [self.selectedString substringToIndex:[self.selectedString length] - 1];
}
if (rangeSingleComma.location == 0) {
    self.selectedString = [self.selectedString substringFromIndex:1];
}
if (rangeDoubleComma.location != NSNotFound) {
    self.selectedString = [self.selectedString stringByReplacingOccurrencesOfString:@",,"
                                                                         withString:@","];
 } 
```

但这是一种非常肮脏的方法，任何人都可以为此提出一个好的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T06:43:11.137

你可以做这样的事情

```
NSString *str = @"aaa,bbb,ccc";
NSMutableArray *arr = [[str componentsSeparatedByString:@","] mutableCopy];

int indexToRemove = -1;
for (int i = 0; i < arr.count; i++) {
    NSString *string = [arr objectAtIndex:i];
    if([string isEqualToString:@"aaa"])
    {
        indexToRemove = i;
        break;
    }
}

if(indexToRemove != -1)
{
    [arr removeObjectAtIndex:indexToRemove];
}

NSString *newString = [arr componentsJoinedByString:@","]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T06:41:33.093

您是否需要将此逗号分隔列表存储为字符串？相反，请尝试维护 NSString 的 NSArray/NSMutableArray。这使得随意添加或删除任何项目变得容易。当您需要数组的逗号分隔字符串表示时，只需执行以下操作：

```
 [self.selectedArray componentsJoinedByString:@","] 
```

如果您还想使用您的`self.selectedString`属性，只需将上面的代码行放在 getter 方法中：

```
 - (NSString *) selectedString {
      return [self.selectedArray componentsJoinedByString:@","]
 } 
```

# mpi - 台式机 CPU 上的 MPI 和 OpenMP

> ID：11009371
> 
> 赞同：3
> 
> 时间：2012-06-13T06:32:32.907
> 
> 标签：mpi, openmp

我只是想知道 OpenMP（共享内存）和 MPI（分布式内存）怎么可能在像 i7 这样的普通桌面 CPU 上运行。是否有某种虚拟机可以在这些 CPU 上模拟共享和分布式内存？我问它是因为在学习 OpenMP 和 MPI 时，显示了超级计算机的结构，具有共享内存或分布式内存的不同节点，每个节点都有自己的处理器和内存。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T10:55:39.013

MPI 不假设 MPI 进程如何以及在何处运行。就 MPI 而言，进程只是具有称为其*等级*的唯一地址的实体，而 MPI 使它们能够以消息的形式发送和接收*数据*。消息传输的确切方式留给实现。该模型非常通用，以至于 MPI 几乎可以在任何可以想象的平台上运行。

*OpenMP 使用线程*处理共享内存编程。线程只是可以访问共享内存空间的并发指令流。它们可以在单个 CPU 内核上以分时方式执行，也可以在单个 CPU 芯片内的多个内核上执行，或者它们可以分布在通过某些复杂网络连接在一起的多个 CPU 之间，从而允许它们访问彼此的内存。

鉴于这一切，MPI 并不要求每个进程都在专用 CPU 内核上执行，或者数百万个内核必须放在与某些高速网络连接的单独板上 - 性能和技术限制一样。您可以愉快地在单个 CPU 内核上运行 100 个进程的 MPI 作业，尽管性能会*非常非常糟糕*，但它仍然可以工作（假设有足够的可用内存）。这同样适用于 OpenMP - 它不需要将每个线程都安排在专用的 CPU 内核上，但这样做可以提供最佳性能。

这就是为什么 MPI 和 OpenMP 被称为*抽象*的原因——它们足够通用，以至于在源代码保持不变的情况下，执行硬件可以有很大的不同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T08:59:30.247

现代的基于多核 CPU 的 PC*是*共享内存计算机。将每个内核视为一个处理器是一个合理的近似，并且它们都可以平等地访问相同的 RAM。这种近似隐藏了处理器和芯片架构的许多细节。

在共享内存计算机上使用消息传递（其中 MPI 是一种标准）一直是可能的（嗯，也许并非总是如此，但几乎只要 MPI 存在），您就可以运行相同的 MPI启用程序，就像在真正的分布式内存机器上一样。

在应用程序级别，程序员只关心对 MPI 例程的调用。在系统级别，MPI 运行时将这些调用（在集群或超级计算机上）转换为通过互连发送内容的指令。在共享内存计算机上，它可以将这些调用转换为通过内部总线发送内容的指令。

这绝不是对您提出的主题的全面介绍，但这就是 Google 和所有已发布资源的目的。

# ssl - 带有 SSL 的 IIS7.5 Web 服务器前面的 Cloudfront

> ID：11009372
> 
> 赞同：0
> 
> 时间：2012-06-13T06:32:33.920
> 
> 标签：ssl, amazon-web-services, amazon-cloudfront

我的 asp.net 应用程序前面有一个 CloudFront detro，提供动态内容。所有的缓存周期都设置好了，一切看起来都很好。

我使用 cloudfront 主要是为国际访问者加速网站。我在使用 SSL 的网站上有一个注册页面。我知道我不能将我自己的 SSL 与 cloudfront 一起使用，但是有没有一种方法可以告诉 cloudfront 在用户导航到其中一个 HTTPS 页面时将其指向原点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:00:57.507

安全页面上的 url 必须使用 https 前缀，否则浏览器会抱怨混合模式内容。这意味着请求必须以 https 的形式开始。这使得以您建议的方式进行重定向是不可能的。

您最好的选择是在您的页面中有逻辑来确定您的 url 和协议的主机部分，以便如果它是安全连接，则您的所有内容 url 都以 https://[cloudfront- 形式的安全主机/协议为前缀安全主机名]/[您的内容]

如果连接不安全，则使用 http 返回标准 CDN 主机名。

唯一的缺点是用户会看到请求发送到您的域以外的域。不过，这应该不是太大的问题。

# java - 如何比较两种不同格式（时间戳和java.util.date）的sql查询时间？

> ID：11009373
> 
> 赞同：1
> 
> 时间：2012-06-13T06:32:34.963
> 
> 标签：java, jdbc

我的 sql 查询是由这个 java 代码生成的：

```
public boolean generateFileForTable(java.util.Date lastSyncTime, NGMasterSyncData ngMasterSyncData, String fileName){
    StringBuffer query = new StringBuffer(200);
    query.append("Select ");
    query.append(ngMasterSyncData.getOperationModeCol());
    query.append(", ");
    query.append(ngMasterSyncData.getColumnList());
    query.append(" FROM ");
    query.append(ngMasterSyncData.getTableName());
    query.append(" WHERE ");
    query.append(ngMasterSyncData.getLastModifiedCol());
    query.append(" > ? "); 
```

里面的值在哪里`getLastModifiedCol()`是时间戳格式`(07-JUN-12 11.30.00.000000000 PM)`和在准备好的语句中？，我们正在转换收到的时间`(11-06-2012 11-59-50) in java .util.sql` ，所以基本上我想以时间戳格式将这个时间与我在参数中收到的时间进行比较`(last synn time -11-06-2012 11-59-50)`。

我应该如何进行？我应该在我准备好的陈述中写些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:58:55.237

好吧，kapil，在 java.sql.Date 中，您只能比较无时间日期，但正如我们看到的，您的日期中有时间，所以您应该使用 java.sql.Timestamp。整个工作解决方案如下。

```
 PreparedStatement prest = con.prepareStatement(query);

  prest.setTimestamp(1, new java.sql.Timestamp(lastSyncTime.getTime())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T06:51:09.393

在preparedStatement 中插入值时，请执行此操作：

```
 ps.setTimestamp(1, new Timestamp(myDate.getTime())); 
```

# jquery - Jquery .toggleClass() 滑动位置改变

> ID：11009378
> 
> 赞同：2
> 
> 时间：2012-06-13T06:33:04.487
> 
> 标签：jquery, jquery-animate, show-hide, slide, toggleclass

通过单击按钮，div 通过 css 属性更改其位置。但是，我希望 div 幻灯片从一个位置动画到另一个位置。

注意：`#window`必须有`width:100%;`and `height:100%;`，并且`.closed`位置必须是`top:-100%;`，不能与 'px' 一起使用。

风格

```
 .open {
    top:0%;
    }

    .closed {
    top:-100%;
    } 
```

脚本

```
$(function() {
        $( "#button" ).click(function(){
            $( "#window" ).toggleClass( "open", "closed" );
            $( "#window" ).toggleClass( "closed", "open" );
            return false;   
        });
    }); 
```

html

```
<div id="button" style="background:#EEE; cursor:pointer; width: 50px; height:50px; z-index:2;">Window</div>

<div id="window" class="closed" style="position:absolute; background:#000; width: 100%; height:100%; margin-top:-50px; z-index:1;"></div> 
```

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:45:10.037

您可以使用 jQueryUI 库中的[toggleClass](http://jqueryui.com/demos/toggleClass/)函数，它支持动画。jQueryUI 是一个单独的下载。

不要有两个类（“open”和“closed”），而是考虑只有“open”类，并默认关闭元素。这样一来，相信toggleClass功能会更好用。

$('#window').toggleClass("open", 500);

其中 500 是动画完成的时间（以毫秒为单位）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:09:42.587

使用 2 个类和 toggleClass 方法来解决这样的问题是很荒谬的，因为 jQuery 已经有了 toggle()、slideToggle()、fadeToggle() 等方法，它们可以在不使用任何额外类的情况下提供完全相同的结果：

```
$( "#window" ).toggle();
$( "#window" ).slideToggle();
$( "#window" ).fadeToggle(); 
```

# python - 图像投影的更高采样率

> ID：11009379
> 
> 赞同：1
> 
> 时间：2012-06-13T06:33:15.813
> 
> 标签：python, image, image-processing

我的软件应该判断谱带，并给定谱带的位置，找到谱带的峰值点和宽度。

![在此处输入图像描述](../Images/3930a8ea74e99fa19cb0e28498b967df.png)

我学会了[对图像进行投影](https://stackoverflow.com/questions/9768232/correct-method-and-python-package-that-can-find-width-of-an-images-feature)并[找到每个峰的宽度](https://stackoverflow.com/questions/10764569/these-spectrum-bands-used-to-be-judged-by-eye-how-to-do-it-programmatically)。

* * *

但我需要一种**更好的方法来找到投影**。

我使用的方法将 1600 像素宽的图像（例如 1600X40）缩小为 1600 长的序列。理想情况下，我想使用相同的图像将图像减少到 10000 长的序列。

我想要更长的序列，因为 1600 点提供**的分辨率太低**。单个点会导致测量值有很大差异（如果一个带从 18 到 19 判断，则有 4% 的差异）。

如何从同一图像中获得**更长的投影？**

我使用的代码：[https ://stackoverflow.com/a/9771560/604511](https://stackoverflow.com/a/9771560/604511)

```
import Image
from scipy import *
from scipy.optimize import leastsq

# Load the picture with PIL, process if needed
pic         = asarray(Image.open("band2.png"))

# Average the pixel values along vertical axis
pic_avg     = pic.mean(axis=2)
projection  = pic_avg.sum(axis=0)

# Set the min value to zero for a nice fit
projection /= projection.mean()
projection -= projection.min() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T07:07:59.190

你想要做的叫做[插值](http://en.wikipedia.org/wiki/Interpolation)。Scipy 有一个 interpolate 模块，具有针对不同情况的一大堆不同的功能，看看[这里](http://docs.scipy.org/doc/scipy/reference/interpolate.html)，或者专门用于图像[这里](http://docs.scipy.org/doc/scipy/reference/ndimage.html#module-scipy.ndimage.interpolation)。

[这](https://stackoverflow.com/questions/10971359/shape-preserving-piecewise-cubic-interpolation-for-3d-curve-in-python/10972865#10972865)是一个最近提出的问题，其中包含一些示例代码，以及显示发生了什么的图表。

但意识到**插值不会使您的数据更准确非常重要，因此在这种情况下它对您没有帮助。**

**如果您想要更准确的结果，您需要更准确的数据。**没有其他办法。您需要从更高分辨率的图像开始。（如果您重新采样或插值，您的结果将**不太**准确！）

**更新 - 因为问题已经改变**

@Hooked 提出了一个很好的观点。另一种思考方式是，您可以从光谱图像中的每个水平行生成 40 个图表（如您发布的图像中的较低图表），而不是立即平均（这确实会丢弃数据中的方差），所有这些图表将非常相似，但峰值位置、高度和宽度会有一些变化。您应该计算这 40 个图像中每个峰的位置、高度和宽度，然后结合这些数据（匹配 40 个图表中的峰），并使用适当的方差作为误差估计（对于峰位置、高度，和宽度），通过使用中心极限定理。这样您就可以充分利用您的数据。但是，我相信这是假设频谱图中的每一行之间有一定的独立性，这可能是也可能不是？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T14:14:49.333

我想为@fraxel 的回答提供更多细节（渴望发表评论）。他是对的，你不能得到比你输入的*更多的信息，但我认为它需要一些细节......*

1.  您正在投影您的数据`1600x40 -> 1600`，*似乎*您正在丢弃一些数据。虽然在技术上是正确的，但投影的全部意义在于将高维数据带到低维。这只有在......
2.  您的数据可以在较低维度中充分表示。如果我错了，请纠正我，但看起来您的数据确实是一维的，垂直轴是 x 轴上该特定点（波长？）的可变性的度量。
3.  鉴于投影是有意义的，我们如何才能最好地总结每个特定波长点的数据？[在我之前的回答](https://stackoverflow.com/a/9771560/249341)中，您可以看到我取了每个点的*平均值*。在没有关于系统特定属性的其他信息的情况下，这是一个合理的一阶近似。
4.  如果您愿意，您可以保留*更多信息。*下面我绘制了沿 y 轴的方差。这告诉我，当信号较高时，您的测量具有更大的可变性，而在信号较低时具有较低的可变性（这似乎很有用！）： ![在此处输入图像描述](../Images/1c998cacef5843e542d8190cc373a4ed.png)
5.  那么*你*需要做的是在投影之前决定你将如何处理那些额外的 40 像素数据。它们在物理上意味着一些东西，作为研究人员，您的工作是以有意义的方式解释和投射这些数据！

生成图像的代码如下，规范。数据取自您原始帖子的屏幕截图：

```
import Image
from scipy import *
from scipy.optimize import leastsq

# Load the picture with PIL, process if needed
pic         = asarray(Image.open("spec2.png"))

# Average the pixel values along vertical axis
pic_avg     = pic.mean(axis=2)
projection  = pic_avg.sum(axis=0)

# Compute the variance
variance = pic_avg.var(axis=0)

from pylab import *

scale = 1/40.

X_val = range(projection.shape[0])
errorbar(X_val,projection*scale,yerr=variance*scale)
imshow(pic,origin='lower',alpha=.8)
axis('tight')
show() 
```

# javascript - 从 html 查询中删除

> ID：11009382
> 
> 赞同：2
> 
> 时间：2012-06-13T06:33:33.177
> 
> 标签：javascript, jquery

在我的 jQuery 中，我有一个`myTable`字符串：

```
var myTable = "<table width='100%'><tr>"; 
```

在`<td>`s中添加一些数据后`myTable`喜欢

```
myTable += <td>...</td><td>...</td> 
```

然后像这样关闭表格：

```
myTable += "</tr><table>" 
```

`myTable`字符串现在是：

```
"<table width='100%'><tr><td>...</td><td>...</td></tr><table>" 
```

是否可以从表中删除最后一个（并且只有最后一个）`"</tr><table>"`。`<td>`s 可以包含嵌套的`<table>`s。

所以最后`myTable`应该是这样的 `<table width='100%'><tr><td>...</td><td>...</td>"`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T06:41:15.827

我不知道你需要这个有什么用，但根据你的代码，你可以这样做：

```
if (myTable.substr(0, (myTable.length-12)) === '</tr></table>') {
  myTable = myTable.substr(0, (myTable.length-12));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T06:50:41.803

我认为针对您的问题的更好做法和更好的解决方案是像这样创建您的表格

```
$('<table></table>',{
    width:'100%', id:'yourTable', and many other values 
    }).appendTo('#insertTableIntoHere'); 
```

然后，当您想添加任何 tr 时，您只需执行

```
 $('#yourTable').append($('<td></td>',{custom attributes}) ); 
```

当您需要附加任何其他`<tr>`内容时也是如此，所有这些都是使用 jQuery 时的更好做法，希望对您有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T06:37:57.967

你可能会尝试做

```
$('table td:last-child').remove(); 
```

只要确保你的目标是正确的元素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T06:38:43.230

试试这个：

```
var myTable = myTable.replace('</tr><table>', '') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T06:41:05.920

我认为这可能对你有用

```
myTable.replace('</tr><table>', ''); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T06:42:29.367

使用字符串替换

```
 myTable =  myTable.replace("</tr></table>",""); 
```

对于您的问题，最好使用字符串替换

# java - @RequestBody 无法读取 MultiMap

> ID：11009384
> 
> 赞同：2
> 
> 时间：2012-06-13T06:33:38.230
> 
> 标签：java, spring-mvc, jackson, multimap

我正在尝试从 apache 集合中使用`MultiValueMap`（实现）。`MultiMap`我正在使用 Spring MVC 的`@RequestBody`注释。但是，我不断得到`HTTPMediaTypeNotSupportedException`. 当我将实现更改`Map`为`Map`从 Java Util 使用时，它工作正常。

有什么线索吗？Jackson API 不能与核心 JDK 类型以外的任何东西一起使用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T07:20:16.617

使用`@RequestBody`转换参数`HttpMessageConverter`。因为`MultiValueMap`您应该注册一个自定义转换器。有关更多详细信息，请查看[this](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-ann-requestbody)和[this](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/remoting.html#rest-message-conversion)。

# regex - 用于 grep 文件特定段落的正则表达式

> ID：11009386
> 
> 赞同：0
> 
> 时间：2012-06-13T06:33:50.463
> 
> 标签：regex, shell, unix, scripting, grep

嗨，我正在研究一个 shellscript.. 假设这是我的 shell 脚本运行的数据

```
 Ownership
               o Australian Owned
   ?
   Ads for Mining Engineers
   232 results for
mining engineers in All States
   filtered by Mining Engineers [x] category
     * [ ]
                    [34]get directions
       Category:
       [35]Mining Engineers
       [36]Arrow Electrical Services in Wollongong, NSW under Mining
       Engineers logo
            [37]email
            [38]send to mobile
            [39]info
            Compare (0)
     * [ ]
       . [40]Firefly International
       Designers & Manufacturers. Service, Repair & Hire.
       We are the provider of mining engineers in Mt Thorley, NSW.
       25 Thrift Cl, Mt Thorley NSW 2330
       ph: (02) 6574 6660
            [41]http://www.fireflyint.com.au
            [42]get directions
       Category:
       [43]Mining Engineers
       [44]Firefly International in Mt Thorley, NSW under Mining Engineers
       logo
            [45]email
            [46]send to mobile
            [47]info
            Compare (0)
     * [ ]
       [48]Materials Solutions
       Materials Research & Development, Slurry Rheology & Piping Design.
       We are a well established company servicing the mining industry &
       associated manufacturing industries in all areas.
       Thornlie WA 6108
       ph: (08) 6468 4118
            [49]www.materialssolutions.com.au
       Category:
       [50]Mining Engineers
       [51]Materials Solutions in Thornlie, WA under Mining Engineers logo
            [52]email
            [53]send to mobile
            [54]info
            Compare (0)
     * [ ]
       . [55]ATC Williams Pty Ltd
       Our services are available from concept to completion of the works.
       Today, as the rebranded ATC Williams, we continue to expand our
       operations across Australia and in locations around the world.
       Unit 1, 21 Teddington Rd, Burswood WA 6100
       ph: (08) 9355 1383
            [56]www.atcwilliams.com.au
            [57]get directions
       Category:
       [58]Mining Engineers
       [59]ATC Williams Pty Ltd in Burswood, WA under Mining Engineers
       logo
            [60]email
            [61]send to mobile
            [62]info
            Compare (0) 
```

我需要获取看起来像这样的地址

```
 * [ ]
       . [55]ATC Williams Pty Ltd
       Our services are available from concept to completion of the works.
       Today, as the rebranded ATC Williams, we continue to expand our
       operations across Australia and in locations around the world.
       Unit 1, 21 Teddington Rd, Burswood WA 6100
       ph: (08) 9355 1383
            [56]www.atcwilliams.com.au 
```

那我该怎么办..我一直在研究正则表达式，比如

> ^*(.?[\w\W?\s?]*)+(.com.au)$

但这没有帮助..当我给输入文件提供我想要的地址匹配时，它匹配地址..但是当批量给出时，它没有帮助。所以有人可以帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:50:57.577

我发现您的正则表达式存在一些问题

```
^*(.?[\w\W?\s?]*)+(.com.au)$
 ^ ^           ^ ^ ^   ^
 1 1           2 2 1   1 
```

1.  需要转义的特殊字符

2.  **匹配所有内容的贪婪量词直到最后一个 ".com.au"**，在量词之后添加一个`?`使其不贪婪 ==> 匹配尽可能少（意味着直到在行末尾找到的第一个 ".com.au" ）。

    ==> 这是你的主要问题

3.  你嵌套量词`*)+`，你不需要那个

4.  在您的示例中，“*”和“.”之间有空格，因此要么匹配空格，要么完全删除点，它将与您的字符类匹配。

5.  行首和“*”之间也有空格

所以，试试这个

```
 ^\s*\*([\w\W?\s?]*?)(\.com\.au)$ 
```

[在 Regexr 上](http://regexr.com?3188a)查看

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:21:39.933

**试试这个**

```
^\s*\*\s*\[ \][^\*]+?[.]com[.]au$ 
```

**解释**

```
^        # Assert position at the beginning of a line (at beginning of the string or after a line break character)
\s       # Match a single character that is a “whitespace character” (spaces, tabs, and line breaks)
   *        # Between zero and unlimited times, as many times as possible, giving back as needed (greedy)
\*       # Match the character “*” literally
\s       # Match a single character that is a “whitespace character” (spaces, tabs, and line breaks)
   *        # Between zero and unlimited times, as many times as possible, giving back as needed (greedy)
\[       # Match the character “[” literally
\        # Match the character “ ” literally
\]       # Match the character “]” literally
[^\*]    # Match any character that is NOT a * character
   +?       # Between one and unlimited times, as few times as possible, expanding as needed (lazy)
[.]      # Match the character “.”
com      # Match the characters “com” literally
[.]      # Match the character “.”
au       # Match the characters “au” literally
$        # Assert position at the end of a line (at the end of the string or before a line break character) 
```

# c++ - SDK 代码生成器

> ID：11009387
> 
> 赞同：0
> 
> 时间：2012-06-13T06:33:51.120
> 
> 标签：c++, design-patterns

我有特定的 SDK，我想根据用户输入编写代码生成器。我设计了 UI 来获取用户的输入。这种任务是否有任何已知的设计模式。让我困惑的问题是

我应该在哪里以及如何存储用户输入。我应该将它们存储在内部数据结构或某种形式`xml`或`json`格式中，以便可以再次使用。

我将其作为 Visual Studio 包的一部分执行此操作，并为此编写了菜单项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:04:14.547

在我看来，这不能笼统地回答。在哪里存储用户输入数据取决于它有多少（它是否适合内存？）以及您是否希望使用它比程序运行更长时间（例如，在再次运行时记录或加载用户输入）。

使用哪种设计模式取决于您对用户输入的具体操作，而不是用户输入这一事实。例如，如果您将生成的代码视为一个对象，并且您将生成多个这些对象，您可以考虑实现“Builder”设计模式来生成该代码对象。如果生成的代码将具有一个通用结构，而用户输入只是稍微改变了它，您可以查看“模板方法”。

# android - android上的任务和backstack

> ID：11009393
> 
> 赞同：2
> 
> 时间：2012-06-13T06:34:16.767
> 
> 标签：android, android-intent, back-stack

我对 android backstack 有疑问，请考虑我在同一个应用程序中有两个活动 A 和 B 的场景，

1.  从 A 开始。
2.  从 A 发射 B 使用`FLAG_ACTIVITY_NEW_TASK`
3.  从 B 启动 A 使用`FLAG_ACTIVITY_NEW_TASK`
4.  按返回按钮 3 次返回主屏幕。

我的问题是 backstack 如何使用这个标志，是每次创建新任务并且之前的任务被推送到后台还是在同一任务之上创建活动。

我的疑问是，如果第一个是正确的，那么后退按钮是否真的从堆栈顶部删除了活动，如果第二个是正确的，那么该标志在正确意义上的用途是什么。

提前致谢。

问候， 罗希特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:27:57.373

首先，**除非**您在清单中为 B 明确设置，否则使用启动 B`FLAG_ACTIVITY_NEW_TASK`不会**创建**新任务。原因是，默认情况下，应用程序中的所有活动都具有相同的和overrides 。**`android:taskAffinity``taskAffinity``taskAffinity``FLAG_ACTIVITY_NEW_TASK`**

 ****如果您已将 A 和/或 B 的 taskAffinity 设置为不同（或均为空）**，则其工作方式如下：

*   用户从主屏幕启动 A。您现在有一项任务（我们称之为 TaskX）
*   A 使用 FLAG_ACTIVITY_NEW_TASK 启动 B。您现在有两个任务（我们将新任务称为 TaskY）。TaskX 被推到后台，TaskY 在前台。
*   B 使用 FLAG_ACTIVITY_NEW_TASK 启动 A。你仍然只有两个任务。B（在TaskY中）启动了A，它创建了A的一个新实例并将其放入TaskX中，因为A的第一个实例与A的第二个实例具有相同的taskAffinity）。这也导致 TaskX 进入前台，TaskY 进入后台。
*   按“返回”。A 的第二个实例从堆栈中移除，然后您返回到 TaskX 中 A 的第一个实例。按“返回”键返回**当前任务**。
*   按“返回”。从堆栈中删除 A 的第一个实例。TaskX 现在是空的，因为它没有任何活动。前一个任务（TaskY）被带到前台，B 被恢复。
*   按“返回”。B 的实例从堆栈中移除。TaskY 现在为空并显示主屏幕。**

# r - SAS - 在 a 和 b 之间选择 n 个等距的值

> ID：11009394
> 
> 赞同：1
> 
> 时间：2012-06-13T06:34:30.580
> 
> 标签：r, sas, sample

您将如何在 SAS 中翻译以下 R 命令

```
sequence <- seq(from=a, to=b, length.out=n) 
```

换句话说，您将如何在 SAS 中选择和`n`之间的等距值？`a``b`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T08:08:57.383

您可以使用 DO 循环在 SAS 中轻松复制此操作，之前已将所需值存储在宏变量中。我不确定您在什么情况下使用它，但是下面的代码将创建一个具有所需行数和等距值的数据集。希望这将为您指明正确的方向。

```
%let n=5;
%let a=1;
%let b=2;
%let x=%sysevalf((&b.-&a.)/(&n.-1));

%put    n = &n.
        a = &a.
        b = &b.
        x = &x.;

data test;
do i=&a. to &b. by &x.;
output;
end;
run; 
```

# python-3.x - 机械化标签 br.set_handle_gzip 有什么作用？

> ID：11009398
> 
> 赞同：1
> 
> 时间：2012-06-13T06:34:49.367
> 
> 标签：python-3.x, mechanize, mechanize-python

我正在尝试使用 python mechanize 模块来编写一些脚本。当我运行它时，我收到以下错误。这个 set_handle_gzip 实际上是什么？

```
manoj@ubuntu:~/pyth$ python rock.py                                    │                                                                      
rock.py:15: UserWarning: gzip transfer encoding is experimental!       │                                                                      
  br.set_handle_gzip(True)                                             │                                                                      
Traceback (most recent call last):                                     │                                                                      
  File "rock.py", line 60, in <module>                                 │                                                                      
    br.follow_link(text='Sign out')                                    │                                                                      
  File "/usr/lib/python2.7/dist-packages/mechanize/_mechanize.py", line│                                                                      
 569, in follow_link                                                   │                                                                      
    return self.open(self.click_link(link, **kwds))                    │                                                                      
  File "/usr/lib/python2.7/dist-packages/mechanize/_mechanize.py", line│                                                                      
 553, in click_link                                                    │                                                                      
    link = self.find_link(**kwds)                                      │                                                                      
  File "/usr/lib/python2.7/dist-packages/mechanize/_mechanize.py", line│                                                                      
 620, in find_link                         
    raise LinkNotFoundError()                                          │                                                                      
mechanize._mechanize.LinkNotFoundError 
```

我该如何克服这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T21:29:12.733

由于以下行而生成 gzip 传输编码警告：

```
br.set_handle_gzip(True) 
```

要删除警告消息，请更改`True`为`False`。

至于错误消息，这是因为您的脚本无法在您正在使用的页面上找到显示“退出”的链接。

```
br.follow_link(text='Sign out') 
```

将此行中的文本值更改为与页面上使用的值相同的值。这将解决你的问题。

# python - python django send_mail 不起作用，因为不支持 smtp 服务器

> ID：11009405
> 
> 赞同：1
> 
> 时间：2012-06-13T06:35:52.333
> 
> 标签：python, qmail

我首先尝试在我的 python 代码中使用 django send_mail 函数。

但是我的实时服务器不支持 SMTP，因此我被要求尝试使用 qmail-inject 或邮件，它们是 unix 命令。

有没有人这样做过？我们如何从 python 代码中设置主题、收件人等，并使用 qmail-inject 或作为 unix 命令的邮件发送电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:53:44.790

您需要创建一个[自定义电子邮件后端](https://docs.djangoproject.com/en/dev/topics/email/?from=olddocs#defining-a-custom-email-backend)来为您发送邮件。您可以自定义[此代码段](http://djangosnippets.org/snippets/1864/)，它使用`sendmail`适合您场景的命令并将其替换为适当的命令。

一旦你有你的自定义后端，设置`EMAIL_BACKEND`指向`settings.py`Python*模块路径* **而不是**文件系统路径。

# android - 开始日历活动

> ID：11009407
> 
> 赞同：4
> 
> 时间：2012-06-13T06:35:57.587
> 
> 标签：android, android-calendar

我只是想`Calendar Activity`从我的`Activity`. 我的代码中有以下代码`Button OnClickListener`：

```
Intent calIntent = new Intent(Intent.ACTION_INSERT);
calIntent.setData(Uri.parse("content://com.android.calendar/events/"));  
startActivity(calIntent); 
```

但是当我单击 时`Button`，我的设备挂起，然后我必须强制关闭没有响应的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:40:44.610

这是因为[日历](http://developer.android.com/reference/java/util/Calendar.html)内容 Uri 因 android 的不同版本（API 级别）而异。尝试此代码以获取相应 API 级别的日历 Uri。

```
/*
  * Determines if it's a pre 2.1 or a 2.2 calendar Uri, and returns the Uri
  */
 private String getCalendarUriBase(Context con) {
     String calendarUriBase = null;
     Uri calendars = Uri.parse("content://calendar/calendars");
     Cursor managedCursor = null;
     try {
         managedCursor = managedQuery(calendars, null, null, null, null);
     } catch (Exception e) {
         // eat
     }

     if (managedCursor != null) {
         calendarUriBase = "content://calendar/";
     } else {
         calendars = Uri.parse("content://com.android.calendar/calendars");
         try {
             managedCursor = managedQuery(calendars, null, null, null, null);
         } catch (Exception e) {
             // statement to print the stacktrace
         }

         if (managedCursor != null) {
             calendarUriBase = "content://com.android.calendar/";
         }

     }

     return calendarUriBase;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T06:42:04.517

这是我个人的 CalendarOrganizer 课程，他们改变了如何从冰淇淋三明治访问日历，事实上，在冰淇淋三明治之前，建议使用他们的在线服务来更新日历，因为谷歌日历可能会被更改甚至没有安装。

**编辑**：我了解到我需要处理意图问题，但冰淇淋三明治上的某些手机会从 Intent.ACTION_INSERT 而不是 Intent.ACTION_EDIT 崩溃。因此，我更新了我的实现。感谢[这篇文章](https://stackoverflow.com/q/9926830/969325)的解决方案。

```
import android.content.Context;
import android.content.Intent;
import android.provider.CalendarContract;
import android.provider.CalendarContract.Events;

public class CalendarOrganizer {
    private final static int ICE_CREAM_BUILD_ID = 14;
    /**
     * Creates a calendar intent going from startTime to endTime
     * @param startTime
     * @param endTime
     * @param context
     * @return true if the intent can be handled and was started, 
     * false if the intent can't be handled
     */
    public static boolean createEvent(long startTime, long endTime, String title, String description, 
            String location, boolean isAllDay, Context context) {
        int sdk = android.os.Build.VERSION.SDK_INT;
        if(sdk < ICE_CREAM_BUILD_ID) {
            // all SDK below ice cream sandwich
            Intent intent = new Intent(Intent.ACTION_EDIT);
            intent.setType("vnd.android.cursor.item/event");
            intent.putExtra("beginTime", startTime);
            intent.putExtra("endTime", endTime);
            intent.putExtra("title", title);
            intent.putExtra("description", description);
            intent.putExtra("eventLocation", location);
            intent.putExtra("allDay", isAllDay);
//          intent.putExtra("rrule", "FREQ=YEARLY");

            try {
                context.startActivity(intent);
                return true;
            } catch(Exception e) {
                return false;
            }
        } else {
            // ice cream sandwich and above
            Intent intent = new Intent(Intent.ACTION_EDIT);
            intent.setType("vnd.android.cursor.item/event");
            intent.putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, startTime);
            intent.putExtra(CalendarContract.EXTRA_EVENT_END_TIME, endTime);
            intent.putExtra(Events.TITLE, title);
            intent.putExtra(Events.ACCESS_LEVEL, Events.ACCESS_PRIVATE);
            intent.putExtra(CalendarContract.EXTRA_EVENT_ALL_DAY , isAllDay);
            intent.putExtra(Events.DESCRIPTION, description);
            intent.putExtra(Events.EVENT_LOCATION, location);

//          intent.putExtra(Events.RRULE, "FREQ=DAILY;COUNT=10") 
            try {
                context.startActivity(intent);
                return true;
            } catch(Exception e) {
                return false;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T03:30:05.747

作为记录，ICS 日历意图记录在这里

[http://developer.android.com/guide/topics/providers/calendar-provider.html#intents](http://developer.android.com/guide/topics/providers/calendar-provider.html#intents)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T06:40:57.480

这是对我有用的代码（使用> v4）：

```
Uri uri = Uri.parse("content://com.android.calendar/events");
Intent calIntent = new Intent("android.intent.action.INSERT", uri)
    .setAction(Intent.ACTION_INSERT);
startActivity(calIntent); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-03T22:27:45.533

这是对我有用的代码

无需在清单中创建活动。

适用于所有安卓平台。

将显示当月的日历视图

```
 long epoch = new Date.getTime();
            Uri.Builder builder = CalendarContract.CONTENT_URI.buildUpon();
            builder.appendPath("time");
            ContentUris.appendId(builder, epoch);
            Intent intent = new Intent(Intent.ACTION_VIEW)
                    .setData(builder.build());
            startActivity(intent); 
```

# c# - MySQL BLOB 图像数据逐渐丢失？

> ID：11009408
> 
> 赞同：5
> 
> 时间：2012-06-13T06:36:08.030
> 
> 标签：c#, mysql, image, image-processing, blob

在 mysql`MyISAM`表中，我有一个列类型`mediumblob`并将捕获的图像存储为 blob 数据。我得到了一些有趣且有问题的图像。一些图像是`gradually losing`数据。

```
Field          type  
--------------------------
image         mediumblob 
```

`my.ini`最大允许数据包大小集`max_allowed_packet = 8M`

![图像1](../Images/e6228c07766c20d9d92e06e8676222f4.png) ![图2](../Images/89248af3c28ba1470a9d76fdc0a701b2.png) ![图3](../Images/fad46cb225a6d752117ae87fb4b93530.png)

*这就是问题*

当`C#`应用程序从服务器获取数据时，这种图像每次都会丢失随机大小的数据。我在图像数据中得到了`10-12`这样的坏图像。`100000+`

这种行为的原因可能是什么？任何人都有任何想法/解决方案如何解决/避免这个问题。

**更新 1：**
从 PictureBox 中读取字节

```
MemoryStream ms = new MemoryStream();
byte[] ret = null;

try
{
     picturebox.Image.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);
     byte[] Data = new byte[ms.Length];
     ms.Read(Data, 0, (int)ms.Length);
     ret = byteData;
     ms.Close();
 } 
```

将字节数组作为中等 blob 数据保存到数据库中。从数据库中检索数据时，我正在转换阅读器数据：

```
byte[] Data = (byte[])reader["Image"]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T17:30:03.160

首先，正如 Sarke 提到的，将文件内容存储在数据库中并不是最好的主意（文件元数据是完全不同的故事。

为什么？

1.  性能：在大多数情况下，操作系统文件缓存将优于 DBMS 中内置的任何内容。
2.  灾难恢复：在失败时丢失所有/大多数文件的几率比文件系统要高得多，而且恢复要困难得多
3.  扩展：如果您超出单个服务器的容量，则添加应用程序级分片是微不足道的，并且不会降低性能。多服务器数据库设置更“痛苦”
4.  多种解决方案/易于迁移：有大量用于大型文件集合存储的硬件和软件解决方案，它们之间的迁移比 DBMS 之间的迁移简单得多

我存储了近 200 万张图像，这些图像存储在一个简单的文件夹结构中：`/xx/yy/filename`，其中文件名 = 文件的 md5（+ 发生哈希冲突时的可选编号），xx = md5 的前 2 个字符，yy = md5 的第 3 和第 4 个字符. 它工作得很好，我不应该在很长一段时间内得到任何与 FS 相关的减速（至少 2 个数量级）。

回到你的问题，有3个选项

1.  这些文件永远不会正确保存到数据库中。上传照片的应用程序可能有问题或图像太大。您`max_allowed_packet`将图像大小限制为 ~8 MB，`mediub_blob`最多可存储 16 MB。为了排除这一点，将其增加到`max_allowed_packet`32 MB 并进行测试。您需要确保在任何时候没有图像超过此大小，并确保应用程序在上传照片时正确完成工作。如果您可以找到上传并显示正常的图像（来自 DB！），但后来却没有，那么这不是原因。
2.  文件在更新过程中损坏 - 如果有任何东西以任何方式更新照片，那么即使原始文件很好，更新的文件也可能不是 - 例如，它可能超过第 1 点的大小限制。
3.  （最不可能的）如果文件在没有损坏的情况下被存储和更新，那么它在存储时被损坏->没有报告 MySQL 错误（这不会被忽视）我会查看服务器硬件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T07:35:48.487

罪魁祸首是 MyISAM 存储类型。

我们使用 InnoDB 存储存储了 100 万张图像并进行了压力测试，我们得到了正确的结果。要么文件被正确检索，要么根本没有被检索（小于 0.01%），因为 InnoDB 是酸兼容的。

当我们转移到 MyISAM 时，丢失数据的失败率增加到 20%，与您的情况相同。原因是，MyISAM 使用表锁，所以在写入过程中，整个表都被锁定，并且在超时的情况下，它确实会覆盖导致数据丢失的某些内容。

我们现在已经把所有东西都转移到了 MS SQL，因为 InnoDB 性能很好，但它仍然从不重用已删除的文件空间，所以 InnoDB 不断地增长。MS SQL express 有 10gb 的限制，所以我们创建了 4-8gb 的页面并在那里存储 blob。而且我们有自己的自定义复制，可以在具有相同配置的网络上的三台服务器上复制文件。

将文件存储在磁盘上是不好的，原因有很多，每个人都在说文件系统是为高性能而设计的，可以存储数百万个文件，这是不正确的，当你有超过 10 万个文件时，驱动器无法更快地执行。它们在处理一个大文件然后处理 1000 个小文件时表现良好。目前我们正在存储 1000 万个文件并将其存储在 db 中更有意义，因为 db 对查询进行了优化并进行了良好的缓存。您可以在[http://akashkava.com/blog/127/huge-file-storage-in-database-instead-of-file-system/阅读更多内容](http://akashkava.com/blog/127/huge-file-storage-in-database-instead-of-file-system/)

这就是发明 MongoDb、Hadoop、Azure Blob Store、Haystack 和 Amazon S3 的确切原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T02:49:15.750

我认为您首先需要弄清楚是您的应用程序还是某些外部进程（备份/恢复？）更改了这些数据。实际上，如果文件应该保持不变，我认为您的应用程序需要更新此图片（即使用相同的数据更新字段）的理由很少。

一旦您发现应用程序的哪些部分更新了此字段，您可能需要发布一些代码以查看是否没有发生转换、转义或其他任何事情。

如果像我假设的那样，这种更新永远不会发生，那么`BEFORE UPDATE`在表上设置触发器将使您能够准确地知道问题何时发生，并可能有助于识别可能的模式。比较`OLD`和`NEW`值并在日志表中记录尽可能多的相关可用数据 - 请注意，比较大型 BLOB 可能会成为性能杀手，请密切关注您的性能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T13:00:09.350

我的公司选择将图像存储在数据库之外。我们注意到，与您使用的 Blob 一样，Blob 很容易出现损坏和性能问题。我们在 MSSQL、Sybase 和 Faircom 中看到了同样的问题。

每当应用程序需要访问图像时，它都需要访问可以找到该图像的网络（或基于 Web）的存储。然后数据只存储图像的路径。

由于图像是文件系统中某处的平面文件，因此如果需要更新记录（即添加注释以描述图像），则其自身的图像不会重新编译到 blob 中，并且没有机会它被破坏了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-16T12:36:44.883

您使用什么 API 从数据库中获取数据？给我们一些获取数据的代码。

通常，BLOB 是使用某种“流”从数据库中读取的，因此如果您使用它，可能需要切换到比 ADO.NET 更强大的东西。

此页面可能有用：[http ://dev.mysql.com/doc/refman/5.5/en/connector-net-programming-blob.html](http://dev.mysql.com/doc/refman/5.5/en/connector-net-programming-blob.html)

# cloud-foundry - 为 Cloud Foundry 身份验证编写插件

> ID：11009412
> 
> 赞同：0
> 
> 时间：2012-06-13T06:36:38.230
> 
> 标签：cloud-foundry

我需要将 Cloudfoundry 与第三方身份验证工具集成，例如 Keystone。我需要编写一个插件，可以将它附加/安装到云代工厂，而无需在 Cloudfoundry 中更改任何代码。如果我想使用来自 keystone 的身份验证，我将为 Cloudfoundry 安装插件。代码更改应该只转到插件而不是 Cloudfoundry 代码。

请让我知道如何实现这一目标。

在此先感谢 Sateesh B.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T02:05:46.080

以下链接[https://github.com/cloudfoundry/vcap-java-client](https://github.com/cloudfoundry/vcap-java-client)是一个 java 客户端库，它对 vcap（又名云代工厂）进行安静的调用。现在在我看来，如果您想在高级术语中使用自定义身份验证方法（无论您选择什么），您必须将其变成适配器设计模式。

一旦您的用户通过了您的身份验证，您的应用程序就可以通过其他调用或库（例如[https://github.com/cloudfoundry/vcap-java-client](https://github.com/cloudfoundry/vcap-java-client) ）与 Cloud Foundry 通信，并创建他们的帐户等。您只需添加您自己的身份验证层，然后您可以使用来自经过身份验证的用户的数据来创建或获取云代工厂信息/应用程序。

这样你就没有接触过云代工，你可以轻松地实现不止一种身份验证方式。

# linux - 如何将带空格的参数传递给 sed 命令？

> ID：11009413
> 
> 赞同：2
> 
> 时间：2012-06-13T06:36:56.420
> 
> 标签：linux, bash, shell

我的 shell 脚本中有以下函数

```
fnChangeTxt()
{
        sed -i 's/<div id="'$1'"><p>*.*</<div id="'$1'"><p>'$2'</' /var/www/html/alarm.html
} 
```

我想使用下面的通过 $2 参数将字符串传递给 sed 命令。

```
fnChangeTxt 'demo' 'This text to sed' 
```

然而这不起作用并产生错误，我认为这是由于空格，因为下面的命令工作正常。

```
fnChangeTxt 'demo' 'This_text_to_sed' 
```

有没有办法用空格做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T15:24:07.733

将参数（`$1`等）括在双引号中以防止它们被分词（并防止其他一些可能令人不快的额外解析）：

```
sed -i "s/<div id=\"$1\"><p>*.*</<div id=\"$1\"><p>$2</" /var/www/html/alarm.html 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T06:48:30.847

尝试使用转义字符：

```
fnChangeTxt 'demo' 'This\ text\ to\ sed' 
```

# android - Android谷歌地图纬度，经度精度

> ID：11009415
> 
> 赞同：0
> 
> 时间：2012-06-13T06:37:17.967
> 
> 标签：android, google-maps

我的应用程序使用将显示多个位置的 MapView。

我将这些地方的纬度和经度以度数存储在数据库中。

纬度、经度的精度为小数点后 14 位。

如果我必须确定两个地理位置是否相同，我应该考虑多少精度

或者更确切地说，我可以忽略多少精度，以便我没有非常靠近每个引脚的引脚

地图视图中的其他？

如果两个位置相同，那么我计划在地图上放置一个图钉，然后单击图钉时，它将显示位于该位置的地点列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:45:12.380

Location 类中有一个函数叫做 distance between：

```
Location.distanceBetween(double startLatitude, double startLongitude, double endLatitude, double endLongitude, float[] results) 
```

您可以使用它来计算点之间的距离并标记最小值。

距离的计算不仅仅是计算直线上两点之间的距离，而是考虑到地球的椭圆形状，使其尽可能准确。

对于用例，您需要在实际写入结果的方法末尾提供浮点数组。

[之间的距离](http://developer.android.com/reference/android/location/Location.html#distanceBetween%28double,%20double,%20double,%20double,%20float%5B%5D%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T06:46:59.660

这取决于无聊的答案：

1.  缩放级别
2.  地球上的什么地方（纬度）
3.  您（或更确切地说是用户）感到满意的分离像素数。可能因设备而异！物理距离很重要。

对于 1)，每个缩放级别可以有一定数量的小数或（或以英尺/米为单位的距离）。

对于 2，您可以根据纬度改变小数点或具有固定数量的米/英尺，但您需要将其转换为米/英尺。仍然取决于缩放级别。

# c++ - (C++) 奇怪的位图问题 - 灰度颜色

> ID：11009419
> 
> 赞同：0
> 
> 时间：2012-06-13T06:37:24.390
> 
> 标签：c++, colors, bitmap, grayscale

我在用 C++ 创建位图时遇到了一个奇怪的问题。我正在使用 BITMAPFILEHEADER 和 BITMAPINFOHEADER 结构来创建 8 位灰度图像。位图数据通过 DMA 来自相机，因为 unsigned char 具有与预期完全相同的长度。保存图像并打开它，它包含颜色？！

它应该是这样的：[http](http://www.freeimagehosting.net/qd1ku)
://www.freeimagehosting.net/qd1ku 它是这样的：[http ://www.freeimagehosting.net/83r1s](http://www.freeimagehosting.net/83r1s)

你知道这是从哪里来的吗？

位图的标题是：

42 4D 36 00 04 00 00 00 00 00 36 00 00 00 28 00 00 00 00 02 00 00 00 02 00 00 01 00 08 00 00 00 00 00 00 00 04 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00

```
    信息标题：
    42 4D 它是一个位图
    36 00 04 00 位图大小 = 0x04 00 36 - 标题大小 = 512x512
    00 00 00 00 保留
    36 00 00 00 偏移量 = Sizeof(Bitmapinfoheader);
    28 00 00 00 Sizeof(Bitmapinfoheader);
    00 02 00 00 =0x200 = 512 像素。
    00 02 00 00 相同
    01 00 = 1 - 标准。不再使用。
    08 00 颜色部门 = 8 位。
    00 00 00 00 压缩：0 = 无。
    00 00 00 00 文件大小或零
    00 00 00 00 X-Dot-Per-Meter，可以保留 0
    00 00 00 00 y-Dot-Per-Meter，可以保留 0
    00 00 00 00 如果为零，则使用所有 255 种颜色
    00 00 00 00 如果为零，则不使用颜色表值

```

你知道这是从哪里来的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:14:06.163

在 Windows 下，如果您没有为 8 位图像提供调色板，则会为您提供系统默认调色板。我不记得添加调色板的 win32 方式，但它应该像创建一个 256 元素的 char 数组一样简单，其中每个条目的值与其索引相同，然后在适当的位置将其写入文件并更新偏移参数等。

# wix - Wix Patch - 卸载补丁时弹出系统重启对话框

> ID：11009421
> 
> 赞同：0
> 
> 时间：2012-06-13T06:37:33.407
> 
> 标签：wix, installation, patch

我一直在通过比较旧版本和新版本的 pdb 文件来生成补丁文件。补丁文件（msp）安装成功，**没有弹出**系统重启对话框。在卸载补丁**重新启动系统对话框时弹出**。请让我知道如何在卸载时限制重新启动系统对话框。

补丁文件

```
<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <Patch 
      AllowRemoval="yes"
      Manufacturer="Test"
      MoreInfoURL="http://www.test.com/"
      DisplayName="Patch 1.0.1"
      Description="Patch"
      Classification="Update" 
        >

    <Media Id="5000" Cabinet="RTM.cab">
      <PatchBaseline Id="RTM">
        <Validate ProductId="no" />        
      </PatchBaseline>
    </Media>

    <PatchFamilyRef Id="PatchFamily"/>
  </Patch>

  <Fragment>
    <PatchFamily Id='PatchFamily' Version='1.0.1' Supersede='yes' >
      <!--<ComponentRef Id="C__F12B37CBEAE157D538B2BAC1CF30713C"/>
      <ComponentRef Id="C__3430F83A3728AE39FA075656EBFCA0BD"/>-->
    </PatchFamily>
  </Fragment>
</Wix> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:20:12.143

有一个属性可以做到这一点，但我不确定它是否适用于补丁。

`<Property Id="MSIRESTARTMANAGERCONTROL" Value="Disable" />`

这应该完成你正在尝试做的事情。如果您对此还有其他问题，请告诉我。

# php - ModX/PHP：在连接数据库的根目录中有我自己的文件吗？

> ID：11009429
> 
> 赞同：0
> 
> 时间：2012-06-13T06:38:06.780
> 
> 标签：php, database, connect, modx

我在我的 ModX CMS 的根目录中有一个我想用于 JSON 目的的 php 文件。

我想将该文件连接到数据库，而不会暴露任何关键信息，例如数据库用户名和密码。

有一个配置文件包含位于可从浏览器访问的文件夹中的信息，但我不知道如何将该信息返回到我的 php 文件。

任何人都可以帮助我：a）直接从我的 php 文件安全地连接到数据库 b）使用存储在已经安全的配置文件中的变量进行连接

任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:18:13.980

如果你想在你的额外文件中使用 modx 的所有功能，你可能想从外部加载 modx... [http://rtfm.modx.com/display/revolution20/Loading+MODx+Externally](http://rtfm.modx.com/display/revolution20/Loading+MODx+Externally)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:16:06.310

基本上我只是在配置文件中添加了一个 include() 并且它起作用了。唯一的问题是删除 ModX 添加到数据库名称的 ` 标记。请让我知道是否有人需要进一步澄清这一点

# java - Coherence 锁定-解锁使用

> ID：11009430
> 
> 赞同：2
> 
> 时间：2012-06-13T06:38:10.227
> 
> 标签：java, caching, locking, oracle-coherence

我有一个关于连贯锁定解锁机制的测试样本，如下所示：

```
public class Test {

    public static void main(String[] args) throws InterruptedException, IOException, IllegalArgumentException, IllegalAccessException {

        Trt test=new Trt();
        test.lock();
        Thread a=new Thread(test);
        a.start();
    }

    public static class Trt implements Runnable{

        NamedCache cache=null;

        @Override
        public void run() {

            System.out.println(cache.unlock("asd"));

        }

        public void lock(){
            cache= CacheFactory.getCache(Globals.REGISTRY_CACHE_NAME);

            System.out.println(cache.lock("asd"));

        }

    }
} 
```

所以结果是：

```
true
false 
```

我期待的结果是：

```
true
true 
```

但情况是，我只有一项“测试”，我都在使用它，而且它只有一个缓存实例。所以缓存的所有者就是那个缓存实例。

为什么它无法关闭它并`false`最终返回？

谢谢

阿里

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T12:37:41.100

来自 Oracle Coherence 开发人员指南：

> 当锁到位时，调用者（在同一线程或同一集群节点中，取决于*租约粒度*配置）负责释放锁。

默认情况下，Coherence 使用线程所有权粒度，因此这可能是未释放锁的原因。

> *thread*的值意味着锁由获得它们的线程持有并且只能由该线程释放。*member*的值表示锁由集群节点持有，集群节点上运行的任何线程都可以释放锁。

请参阅[http://docs.oracle.com/cd/E24290_01/coh.371/e22837/api_transactionslocks.htm#BEIIEEBB](http://docs.oracle.com/cd/E24290_01/coh.371/e22837/api_transactionslocks.htm#BEIIEEBB)和[http://docs.oracle.com/cd/E24290_01/coh.371/e22837/appendix_operational.htm #BAGJBCEF](http://docs.oracle.com/cd/E24290_01/coh.371/e22837/appendix_operational.htm#BAGJBCEF)了解更多详情。

# android - SQLite 数据库不工作

> ID：11009431
> 
> 赞同：0
> 
> 时间：2012-06-13T06:38:16.453
> 
> 标签：android, database, android-emulator

我正在尝试从用户那里获取值并使用 SQLite 数据库显示它。我使用了以下代码，但在模拟器上运行时出现错误“不幸停止”。DBAdapter.java 文件用于创建数据库，result.java 使用函数。

结果.java

```
public class result_mode extends Activity implements OnClickListener{
EditText e1, e2, e3, e4, e5;
  DBAdapter db = new DBAdapter(this);
Intent saveIntent;
Intent homeIntent;
Intent abortIntent;
@Override
 public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.res);
  DBAdapter db = new DBAdapter(this);
  getFullList();
        e2 = (EditText)findViewById(R.id.name);
        e1=(EditText)findViewById(R.id.id);
        e3=(EditText)findViewById(R.id.age);
        e5=(EditText)findViewById(R.id.doc);
        e4=(EditText)findViewById(R.id.editText2);
        Button b1 = (Button) findViewById(R.id.abort);
        Button b2 = (Button)findViewById(R.id.home);
        Button b3 = (Button)findViewById(R.id.save);
        b1.setOnClickListener(this);
        b2.setOnClickListener(this);
        b3.setOnClickListener(this);

}

 public void DisplayTitle(Cursor c)
    {
    Toast.makeText(this,
    "UID: " + c.getString(0) + "\n" +
    "NAME: " + c.getString(1) + "\n" +
    "AGE: " + c.getString(2) + "\n" +
    "CONTACT: " + c.getString(3)+ "\n" +
    "Referred By: " + c.getString(4),
    Toast.LENGTH_LONG).show();

    }   
 public void insert() {     

        //insert
        db.open();
        long id;
        id = db.insertPatient(e1.toString(), e2.toString(), e3.toString(), 
                e4.toString(), e5.toString());
        db.close();

 }

 public void getFullList(){

            db.open();
            Cursor c = db.getResult();
            if (c.moveToFirst())
            {
            do {
            DisplayTitle(c);
            } while (c.moveToNext());
            }
            db.close();
     }

 public void handleClick(View v) {
        insert();
        getFullList();
    }

 public void onClick(final View v) {
     switch(v.getId()){
         case R.id.save:
            saveIntent = new Intent(result_mode.this,menuActivity.class);
            startActivity(saveIntent);

         break;
         case R.id.abort:                   
             abortIntent = new Intent(result_mode.this,test_me.class);
            startActivity(abortIntent);
         break;
         case R.id.home:
             homeIntent= new Intent(result_mode.this,TestActivity.class);
            startActivity(homeIntent);

         break;
     }} 
```

}

DBAdapter.java

```
 public class DBAdapter
      {
        public static final String KEY_UID = "_id";
        public static final String KEY_NAME = "name";
        public static final String KEY_CONTACT = "contact_num";
        public static final String KEY_AGE = "age";
         public static final String KEY_DOC = "doc"; 
        private static final String TAG = "DBAdapter";

        private static final String DATABASE_NAME = "test";
        private static final String DATABASE_TABLE = "table1";
        private static final int DATABASE_VERSION = 1;
        //drop table titles
         private static final String DATABASE_CREATE ="create table patient (" 
     +"ID INTEGER primary key AUTOINCREMENT,"
     + "NAME TEXT,"
     + "AGE NUMBER,"
     + "CONTACT NUMBER,"
     + "DOC TEXT);";
      private final Context context;
    private DatabaseHelper DBHelper;
        private SQLiteDatabase db;

public DBAdapter(Context ctx)
{
    this.context = ctx;
    this.DBHelper = new DatabaseHelper(this.context);
}

private static class DatabaseHelper extends SQLiteOpenHelper 
{
    DatabaseHelper(Context context) 
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) 
    {
        db.execSQL(DATABASE_NAME); 
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, 
    int newVersion) 
    {               
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        onCreate(db);
    }
} 

public DBAdapter open() throws SQLException 
{
    this.db = this.DBHelper.getWritableDatabase();
    return this;
}

public void close() 
{
    this.DBHelper.close();
}

//---insert a title into the database---
public long insertPatient( String id, String name, String age, String contact, String doc )
{
ContentValues initialValues = new ContentValues();
initialValues.put(KEY_NAME, name);
initialValues.put(KEY_UID, id);
initialValues.put(KEY_CONTACT, contact);
initialValues.put(KEY_AGE, age);
initialValues.put(KEY_DOC, doc);    

return db.insert(DATABASE_TABLE, null, initialValues);
}
/*---deletes a particular patient---
public boolean deletePatient(long rowId)
{
return db.delete(DATABASE_TABLE, KEY_ROWID +
"=" + rowId, null) > 0;
}*/
//---retrieves all the titles---
public Cursor getResult()
{
return db.query(DATABASE_TABLE, new String[] {
        KEY_UID ,KEY_NAME, KEY_AGE, KEY_CONTACT,KEY_DOC
},
null,
null,
null,
null,
null);
}
//---retrieves a particular title---
public Cursor getPatient(long id) throws SQLException
{
Cursor mCursor =
db.query(true, DATABASE_TABLE, new String[] {
        KEY_UID ,KEY_NAME, KEY_AGE, KEY_CONTACT,KEY_DOC
}
 , KEY_UID + "=" + id,
          null, null, null, null, null
        );
if (mCursor != null) {
mCursor.moveToFirst();
}
return mCursor;
}
//---updates a title---
public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
    // TODO Auto-generated method stub

}
} 
```

活动日志：

```
 06-13 12:17:23.581: D/AndroidRuntime(565): Shutting down VM
06-13 12:17:23.581: W/dalvikvm(565): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
06-13 12:17:23.621: E/AndroidRuntime(565): FATAL EXCEPTION: main
06-13 12:17:23.621: E/AndroidRuntime(565): java.lang.RuntimeException: Unable to start activity ComponentInfo{achira.test/achira.test.result_mode}: android.database.sqlite.SQLiteException: Can't downgrade database from version 33 to 1
06-13 12:17:23.621: E/AndroidRuntime(565):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
06-13 12:17:23.621: E/AndroidRuntime(565):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-13 12:17:23.621: E/AndroidRuntime(565):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-13 12:17:23.621: E/AndroidRuntime(565):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-13 12:17:23.621: E/AndroidRuntime(565):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-13 12:17:23.621: E/AndroidRuntime(565):  at android.os.Looper.loop(Looper.java:137)
06-13 12:17:23.621: E/AndroidRuntime(565):  at android.app.ActivityThread.main(ActivityThread.java:4424)
06-13 12:17:23.621: E/AndroidRuntime(565):  at java.lang.reflect.Method.invokeNative(Native Method)
06-13 12:17:23.621: E/AndroidRuntime(565):  at java.lang.reflect.Method.invoke(Method.java:511)
06-13 12:17:23.621: E/AndroidRuntime(565):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-13 12:17:23.621: E/AndroidRuntime(565):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-13 12:17:23.621: E/AndroidRuntime(565):  at dalvik.system.NativeStart.main(Native Method)
06-13 12:17:23.621: E/AndroidRuntime(565): Caused by: android.database.sqlite.SQLiteException: Can't downgrade database from version 33 to 1
06-13 12:17:23.621: E/AndroidRuntime(565):  at android.database.sqlite.SQLiteOpenHelper.onDowngrade(SQLiteOpenHelper.java:307)
06-13 12:17:23.621: E/AndroidRuntime(565):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:168)
06-13 12:17:23.621: E/AndroidRuntime(565):  at achira.test.DBAdapter.open(DBAdapter.java:62)
06-13 12:17:23.621: E/AndroidRuntime(565):  at achira.test.result_mode.getFullList(result_mode.java:69)
06-13 12:17:23.621: E/AndroidRuntime(565):  at achira.test.result_mode.onCreate(result_mode.java:30)
06-13 12:17:23.621: E/AndroidRuntime(565):  at android.app.Activity.performCreate(Activity.java:4465)
06-13 12:17:23.621: E/AndroidRuntime(565):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-13 12:17:23.621: E/AndroidRuntime(565):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-13 12:17:23.621: E/AndroidRuntime(565):  ... 11 more

 new log :

         06-13 13:01:33.395: E/AndroidRuntime(897):     at                 da   lvik.system.NativeStart.main(Native Method)
         06-13 13:01:33.395: E/AndroidRuntime(897): Caused by: java.lang.reflect.InvocationTargetException
         06-13 13:01:33.395: E/AndroidRuntime(897):     at java.lang.reflect.Method.invokeNative(Native Method)
         06-13 13:01:33.395: E/AndroidRuntime(897):     at java.lang.reflect.Method.invoke(Method.java:511)
         06-13 13:01:33.395: E/AndroidRuntime(897):     at android.view.View$1.onClick(View.java:3039)
         06-13 13:01:33.395: E/AndroidRuntime(897):     ... 11 more
         06-13 13:01:33.395: E/AndroidRuntime(897): Caused by: java.lang.NullPointerException
         06-13 13:01:33.395: E/AndroidRuntime(897):     at achira.test.result_mode.insert(result_mode.java:61)
         06-13 13:01:33.395: E/AndroidRuntime(897):     at achira.test.result_mode.handleClick(result_mode.java:81)
         06-13 13:01:33.395: E/AndroidRuntime(897):     ... 14 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:47:04.730

看起来您更改了私有静态最终 int DATABASE_VERSION = 1; 从 33 以前........

根据例外

```
android.database.sqlite.SQLiteException: Can't downgrade database from version 33 to 1 
```

现在只需将版本设置为 33 或更高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T06:48:42.207

在`onCreate()`中，您调用`execSQL()`的`DATABASE_NAME`是一个简单的字符串“测试”。agrument to`execSQL()`必须是有效的 SQL 命令。这只是代码中的几个问题之一。

# lotus-notes - 如何获取 $Revisions 字段的序列号？

> ID：11009441
> 
> 赞同：1
> 
> 时间：2012-06-13T06:38:47.897
> 
> 标签：lotus-notes, lotusscript, lotus-formula

实际上我必须在 $Revisions 字段中获取序列号。

![请看下图。，我需要得到标记的值](../Images/7018a2548053f421a5529c0df36d0ed6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:31:23.423

据我所知，获取此信息的唯一方法是使用 Notes C API 中的 NSFItemQueryEx 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:01:33.843

试试这个，@Elements($Revisions)

# ios - 如何将 LDAP“jpegPhoto”转换为 NSString 到 UIImageView

> ID：11009448
> 
> 赞同：0
> 
> 时间：2012-06-13T06:39:44.467
> 
> 标签：ios, nsstring, uiimage, ldap, openldap

我正在尝试使用 iOS openLDAP 框架从 openLDAP 服务器中提取 LDAP“jpegPhoto”属性。该框架将数据提取为 NSStrings 的字典。

我需要将“jpegPhoto”的 NSString（也似乎是 base64 编码）转换为 UIImage，最终结果是我在用户登录时将 jpegPhoto 显示为用户的图像。

更多信息：

```
-(NSDictionary *)doQuery:(NSString *)query:(NSArray *)attrsToReturn {
    ...
    while(attribute){
        if ((vals = ldap_get_values_len(ld, entry, attribute))){
            for(int i = 0; vals[i]; i++){
                //Uncomment if you want to see all the values.
                //NSLog(@"%s: %s", attribute, vals[i]->bv_val);
                if ([resultSet objectForKey:[NSString stringWithFormat:@"%s",attribute]] == nil){
                    [resultSet setObject:[NSArray arrayWithObject:[NSString stringWithFormat:@"%s",vals[i]->bv_val]] forKey:[NSString stringWithFormat:@"%s",attribute]];
                }else{
                    NSMutableArray *array = [[resultSet objectForKey:[NSString stringWithFormat:@"%s",attribute]] mutableCopy];
                    [array addObject:[NSString stringWithFormat:@"%s",vals[i]->bv_val]];
                    [resultSet setObject:array forKey:[NSString stringWithFormat:@"%s",attribute]];
                }
            }
            ldap_value_free_len(vals);
        };
        ldap_memfree(attribute);
        attribute = ldap_next_attribute(ld, entry, ber);
    };
    ...
}

-(UIIMage *)getPhoto{
    NSString *query = [NSString stringWithFormat:@"(uid=%@)",self.bindUsername];
    NSArray *attrsToReturn = [NSArray arrayWithObjects:@"cn",@"jpegPhoto", nil];
    NSDictionary *rs = [self doQuery:query:attrsToReturn];
    NSString *photoString = [[rs objectForKey:@"jpegPhoto"] objectAtIndex:0];
    NSLog(@"The photoString is: %i %@",[photoString length],@"characters long"); //returns 4
    NSData *photoData = [NSData dataWithBase64EncodedString:photoString];
    UIImage *userPhoto = [UIImage imageWithData:photoData];
    return userPhoto;
}

- (void)viewDidLoad {
    [super viewDidLoad];
    self.studentNameLabel.text = [NSString stringWithFormat:@"Hi %@!",[self.ldap getFullName]];
    self.studentPhotoImage.image = [self.ldap getPhoto];
    [self checkForProctor];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T05:39:35.473

试试这个代码

```
NSData *dataObj = [NSData dataWithBase64EncodedString:beforeStringImage];
UIImage *beforeImage = [UIImage imageWithData:dataObj]; 
```

Stackoverflow中有很多类似的问题。请参考以下链接

[UIImage 到 base64 字符串编码](https://stackoverflow.com/questions/3889478/uiimage-to-base64-string-encoding)

[UIImage 来自 NSString 中保存的字节](https://stackoverflow.com/questions/1101002/uiimage-from-bytes-held-in-nsstring)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T20:45:33.823

（由于没有发布用于从 LDAP 获取图像数据的工作代码，我想添加这个答案以使未来的访问者受益。）

缺少的部分是将二进制数据读入`NSData`对象，而不是`NSString`当您的二进制数据中可能包含 NULL（零）值时，例如图像或 GUID。

`value = [NSData dataWithBytes:vals[0]->bv_val length:vals[0]->bv_len];`

```
+ (NSArray *)searchWithBaseDN:(const char *)baseDN andFilter:(const char *)filter andScope:(int)scope {
    ...
    while(entry)
    {
        // create a dictionary to hold attributes
        NSMutableDictionary *dictionary = [[NSMutableDictionary alloc] init];

        attribute = ldap_first_attribute(ld, entry, &ber);
        while(attribute)
        {
            if ((vals = ldap_get_values_len(ld, entry, attribute)))
            {
                if (ldap_count_values_len(vals) > 1) {
                    NSMutableArray *values = [[NSMutableArray alloc] init];
                    for(int i = 0; vals[i]; i++) {
                        [values addObject:[NSString stringWithUTF8String:vals[i]->bv_val]];
                    }
                    [dictionary setObject:values forKey:[NSString stringWithUTF8String:attribute]];
                } else {
                    NSObject *value = nil;
                    if (strcmp(attribute, "thumbnailPhoto") == 0 || strcmp(attribute, "objectGUID") == 0) {
                        value = [NSData dataWithBytes:vals[0]->bv_val length:vals[0]->bv_len];
                    } else {
                        value = [NSString stringWithFormat:@"%s", vals[0]->bv_val];
                    }
                    [dictionary setObject:value forKey:[NSString stringWithUTF8String:attribute]];
                }

                ldap_value_free_len(vals);
            };
            ldap_memfree(attribute);
            attribute = ldap_next_attribute(ld, entry, ber);
        };
...
} 
```

# asp.net - 每个视图的 MVC 不同标题

> ID：11009449
> 
> 赞同：3
> 
> 时间：2012-06-13T06:39:46.727
> 
> 标签：asp.net, asp.net-mvc

我有这个 _Layout.cshtml

```
<body>
    <div id="wrapper">
<div id="header-wrapper">
    <div id="header">
        <div id="logo">
                //SOME LOGO LOGIC

        </div>
    </div>
    <div id="menu-wrapper">

        //SOME MENU LOGIC

    </div>
    <!-- end #menu -->
    <div id="banner">
        <div id="slider"> <a href="#" class="button previous-button">&lt;</a> <a href="#" class="button next-button">&gt;</a>
            <div class="viewer">
                <div class="reel">
                    <div class="slide">
                        <h2>Stallen..</h2>
                        <p>Her kan du skrive noe tekst</p>
                        <a class="link" href="~/horse/riversidestar">Full story ...</a><img src="~/images/img01.jpg" width="900" height="350" alt="" /></div>
                    <div class="slide">
                        <h2>Riverside Star i naturen</h2>
                        <p>Her kan du skrive noe tekst</p>
                        <a class="link" href="~/horse/riversidestar">Full story ...</a><img src="~/images/img02.jpg" width="900" height="350" alt="" /></div>
                </div>
            </div>
            <div class="indicator">
                <ul>
                    <li class="active">1</li>
                    <li>2</li>
                </ul>
            </div>
        </div>
        <script type="text/javascript">//SOME SCRIPT</script>

    </div>
</div>

<div id="page">
    <div id="content">
         @RenderBody()

    </div>

    <div id="sidebar-bg">
        <div id="sidebar">
            <h2>Nyheter</h2>
            @{Html.RenderAction("ShortNewsList", "News");}
        </div>
    </div>

    <div style="clear: both;">&nbsp;</div>
</div> 
```

现在，它只有在每个视图上都不同的 renderBody 部分。当我进入不同的视图时，如何使用 id=banner 更改 DIV 的内容

当我尝试将它添加到另一个视图中时，它当然会在布局中非常错误

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T06:43:26.107

您可以使用[Razor 部分](http://blogs.msdn.com/b/marcinon/archive/2010/12/15/razor-nested-layouts-and-redefined-sections.aspx)。在您的布局中定义一个部分：

```
@RenderSection("Banner", required: false) 
```

并在您看来覆盖此部分：

```
@section Banner {
    ... contents of the banner specific to that view
} 
```

您还可以定义一个默认横幅，这样您就不需要在每个视图中覆盖：

```
@if (!IsSectionDefined("Banner"))
{
    ... put the default banner contents here
}
else
{
    @RenderSection("Banner", required: true)
} 
```

# c++ - OpenCV：如何从以太网摄像机捕获帧

> ID：11009452
> 
> 赞同：8
> 
> 时间：2012-06-13T06:39:57.523
> 
> 标签：c++, opencv, ethernet, ip-camera

我之前编写了 USB 网络摄像头，其唯一目的是从摄像头获取实时帧并显示在窗口中。为此，我使用了 cvCaptureFromCAM，它适用于 USB 相机（参见下面的代码）。

我想知道如何从千兆以太网摄像机捕获帧？我想我需要使用一些 API 从一些默认 IP 地址捕获帧。有人能指出我正确的方向吗？

我将在 Intel i3 处理器上的 Windows 7 上使用 C++ 和 OpenCV。

```
#include "cv.h"
#include "highgui.h"
#include <stdio.h>

// A Simple Camera Capture Framework 
int main() {
    CvCapture* capture = cvCaptureFromCAM( CV_CAP_ANY );
    if ( !capture ) {
        fprintf( stderr, "ERROR: capture is NULL \n" );
        getchar();
        return -1;
    }

    // Create a window in which the captured images will be presented
    cvNamedWindow( "mywindow", CV_WINDOW_AUTOSIZE );

    // Show the image captured from the camera in the window and repeat
    while ( 1 ) {
        // Get one frame
        IplImage* frame = cvQueryFrame( capture );

        if ( !frame ) {
            fprintf( stderr, "ERROR: frame is null...\n" );
            getchar();
            break;
        }

        cvShowImage( "mywindow", frame );

        // Do not release the frame!
        // If ESC key pressed, Key=0x10001B under OpenCV 0.9.7(linux version),
        // remove higher bits using AND operator
        if ( (cvWaitKey(10) & 255) == 27 ) break;
    }

    // Release the capture device housekeeping
    cvReleaseCapture( &capture );
    cvDestroyWindow( "mywindow" );
    return 0;
} 
```

**更新**

所以现在我可以在供应商提供的软件 GUI 中显示实时图像。但我仍然想使用摄像机的 IP 地址显示图像（可能还有视频）。

知道摄像头的IP地址后，为什么无法访问摄像头发送的数据（图像）并在浏览器上显示？我尝试在浏览器（192.169.2.4）上输入摄像机的 IP 地址（即 192.169.2.3），但显示“找不到页面”。这是什么意思？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-12-28T20:14:14.667

您可以使用 genIcam API 做到这一点。genIcam 是相机的通用接口（USB、GigE、CameraLink 等）。它由多个模块组成，但我们将专注于 GenTL（传输层）。[您可以在此处](http://www.emva.org/wp-content/uploads/GenICam_GenTL_1_5.pdf)阅读有关 GenTL 文档的更多信息。我建议使用作为 GenTL 消费者的 Basler API 或 Baumer API（生产者和消费者在 GenTL 文档中进行了描述）。我使用了 Baumer API，但两者都应该可以工作。

注意：我使用的是 Baumer HXG20 单声道。

**下载和安装的东西**

1.  Visual Studios 社区版（我使用 2015 [LINK](https://www.visualstudio.com/downloads/)）
2.  堡盟 GAPI SDK，[链接](http://www.baumer.com/us-en/products/identification-image-processing/software-and-starter-kits/baumer-gapi-sdk/)
3.  openCV（这里是为 c++ 构建 openCV 3 的 youtube 教程）[这里](https://www.youtube.com/watch?v=7SM5OD2pZKY)

**使用 CAMERA EXPLORER 测试相机**

最好在 Camera Explorer 程序中验证您的网络接口卡 (NIC) 和相机是否正常工作和玩耍。您可能需要在 NIC 上启用巨型数据包。您也可以使用 IPconfig 程序配置摄像机 IP（DHCP 或静态 IP）。

**设置视觉工作室**

堡盟 GAPI SDK 程序员指南（第 4 章）中介绍了设置环境变量和配置 Visual Studio，位于以下目录中

`C:\Program Files\Baumer\Baumer GAPI SDK\Docs\Programmers_Guide`

*   检查您是否具有以下系统变量（如果使用 64 位版本），或根据需要创建变量（请参阅程序员指南中的第 4.3.1 节）。

*   名字=`GENICAM_GENTL64_PATH`

*   价值 =`C:\Program Files\Baumer\Baumer GAPI SDK\Components\Bin\x64\`

*   在 Visual Studios 中，创建一个新的 C++ 项目并更新以下属性（请参阅程序员指南中的第 4.4.1 节）。

*   C/C++ > 常规 > 附加包含目录 =`C:\Program Files\Baumer\Baumer GAPI SDK\Components\Dev\C++\Inc`

*   链接器 > 常规 > 其他库目录 =`C:\Program Files\Baumer\Baumer GAPI SDK\Components\Dev\C++\Lib\x64`

*   链接器 > 输入 > 附加依赖 =`bgapi2_genicam.lib`

*   构建事件 > 构建后事件 > 命令行 =`copy "C:\Program Files\Baumer\Baumer GAPI SDK\Components\Bin\x64"\*.* .\`

**创建 .CPP 文件以在 OPENCV 窗口中显示图像流**

最简单的入门方法是使用 Baumer GAPI SDK 中提供的示例代码之一并对其进行修改以添加 openCV 功能。要使用的示例代码是 005_PixelTransformation，位于此处

`C:\Program Files\Baumer\Baumer GAPI SDK\Components\Examples\C++\src\0_Common\005_PixelTransformation`

将此 .cpp 文件复制并粘贴到您的项目源目录中，并确保您可以构建和编译。它应该捕获 8 张图像并从每张图像的前 6 行中打印出前 6 个像素值。

将这些`#include`语句添加到 .cpp 源文件：

```
#include <opencv2\core\core.hpp>
#include <opencv2\highgui\highgui.hpp>
#include <opencv2\video\video.hpp> 
```

`main()`在函数开头添加这些变量声明

```
// OPENCV VARIABLE DECLARATIONS
cv::VideoWriter cvVideoCreator;                 // Create OpenCV video creator
cv::Mat openCvImage;                            // create an OpenCV image
cv::String videoFileName = "openCvVideo.avi";   // Define video filename
cv::Size frameSize = cv::Size(2048, 1088);      // Define video frame size (frame width x height)
cvVideoCreator.open(videoFileName, CV_FOURCC('D', 'I', 'V', 'X'), 20, frameSize, true); // set the codec type and frame rate 
```

在原始的 005_PixelTransformation.cpp 文件中，第 569 行有一个`for`循环，循环超过 8 个图像，其中显示`for(int i = 0; i < 8; i++)`. 我们希望将其更改为连续运行。我通过将其更改为一个`while`循环来做到这一点

```
while (pDataStream->GetIsGrabbing()) 
```

在我们的新`while`循环中，有一条`if`语句检查像素格式是“单色”（灰度）还是彩色。在原始文件中，它从第 619 行开始，到 692 行结束。紧接在`if`and`else`语句大括号之后，在`pImage->Release();`语句之前，我们需要添加 openCV 部分以将图像显示到窗口中。添加以下代码行

```
}   // This is the closing brace for the 'else color' statement 

// OPEN CV STUFF
openCvImage = cv::Mat(pTransformImage->GetHeight(), pTransformImage->GetWidth(), CV_8U, (int *)pTransformImage->GetBuffer());

// create OpenCV window ----
cv::namedWindow("OpenCV window: Cam", CV_WINDOW_NORMAL);

//display the current image in the window ----
cv::imshow("OpenCV window : Cam", openCvImage);
cv::waitKey(1); 
```

需要注意的一件事是`openCvImage`对象中的像素格式。我的相机是单声道 8 位的，所以我需要指定`CV_8U`. 如果您的相机是 RGB 或 10 位像素，您需要提供正确的格式（请参阅[此处](http://docs.opencv.org/2.4/modules/core/doc/basic_structures.html#mat-type)的 openCV 文档）。

您可以参考其他示例来调整相机参数。

现在，一旦您构建和编译，您应该打开一个显示相机图像的 openCV 窗口！

表示赞许，满意，胜利！！！！

[![为更多的投票点赞！！！！！！](../Images/6cf57baee0e938c64ea6f15444f7ca3b.png)](https://i.stack.imgur.com/1fnUD.jpg)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T12:30:31.297

如果没有运行网络服务器，您将无法访问相机上的图像（检查其文档）。尝试在命令提示符下键入：

```
telnet 192.169.2.3 80 
```

如果 telnet 超时，您的摄像机未在默认端口 80 上运行服务器。

另请参阅此问题：[C++ 代码从 IP / 以太网摄像机 (AXIS Cam) 捕获图像](https://stackoverflow.com/questions/15462323/c-code-capturing-image-from-ip-ethernet-cameras-axis-cam?rq=1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-06T03:19:40.660

添加到[标记 jay](https://stackoverflow.com/users/5156102/mark-jay)的答案（我可以确认使用 Baumer-GAPI2 2.8.1 和 VC10 编译器和 Baumer TXG06 相机在 Win32 程序中的 Win7x64 上工作）。如果相机设置为抓取`Mono8`并且您打算抓取相同格式的图像，`CV_8UC1`那么在`005_PixelTransformation.cpp`示例中您可以完全避免创建`BGAPI2::Image* pTransformImage`and`BGAPI2::Image* pImage`并且只需`cv::Mat`使用缓冲内存指针构建`GigE_cam`：

```
bool GigE_cam::operator>>(cv::Mat& out_mat)
{
    bool success(false);
    try
    {
        _p_buffer_filled = _p_data_stream->GetFilledBuffer(static_cast<bo_uint64>(_timeout_ms));
        if(_p_buffer_filled != 0)
        {
            if(_p_buffer_filled->GetIsIncomplete())
            {
                _p_buffer_filled->QueueBuffer();
            }
            else
            {
                if(_p_buffer_filled->GetPixelFormat() == "Mono8")
                {
                    _image_out_buffer = cv::Mat(static_cast<int>(_p_buffer_filled->GetHeight()), 
                                                static_cast<int>(_p_buffer_filled->GetWidth()), 
                                                CV_8UC1, 
                                                static_cast<uchar*>(_p_buffer_filled->GetMemPtr()));
                    if(_image_out_buffer.data)
                    {
                        _image_out_buffer.copyTo(out_mat);
                        success = true;
                    }
                }
                else if(_p_buffer_filled->GetPixelFormat() == "Mono10")
                {
                    // Todo transform to BGR8 etc. not implemented
                }
                _p_buffer_filled->QueueBuffer(); // Queue buffer after use
            }
        }   
    }
    catch(BGAPI2::Exceptions::IException& ex)
    {
        _last_BGAPI2_error_str = ex.GetType();
    }
    return success;
} 
```

此代码以 66.5 fps 从相机（776 X 582 像素）获取全帧，即使数据表也仅声称 64.0 fps。我很想知道他们的 API 是否会在 Debian 上发挥同样的作用。

[![传入图像](../Images/88bf8bf2f36ff6aca8019a196dd4d718.png)](https://i.stack.imgur.com/ALJ4m.jpg)

# oracle - 禁用触发器仍在工作

> ID：11009454
> 
> 赞同：1
> 
> 时间：2012-06-13T06:40:04.413
> 
> 标签：oracle, triggers, oracle10g

我们正在使用 Oracle 10 DB，它使用多个触发器从用作主键的序列中检索值。其中一个触发器被**禁用**，但它似乎仍在触发，因为表中的记录已使用有效的主键成功插入。

这怎么可能？为什么这个“插入前”触发器在被禁用后仍然有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:18:08.900

我认为只有在插入语句不提供 PK 值（PK 为空）时，触发器才会调用序列来获取 PK 值。执行插入的应用程序可能会调用序列并为 PK 提供一个值。

也许您可以通过在表中插入一条 PK 值为空的记录来自己测试它。如果您收到错误，触发器将被禁用。

# objective-c - 如何更改此代码以使其不违反 MVC 原则？

> ID：11009457
> 
> 赞同：1
> 
> 时间：2012-06-13T06:40:56.443
> 
> 标签：objective-c, ios, model-view-controller, uiviewcontroller

我正在为化学反应制作一个测验应用程序。该应用程序给用户一个问题，用户在两个单独的文本字段中输入反应物和产物。

我有一个数据类，其中包含所有可能的测验问题。然后，根据特定参数，数据类从可能的问题池中选择一定数量的问题，并将它们打乱成一个数组，`quizQuestions`.

我也有一个视图控制器，`quizController`. 对于每个问题，`quizController`都会加载一个新的实例。vc需要数据来知道要显示哪个问题，正确答案是什么等。

这是我在数据和 vc 之间进行通信的原始解决方案。

我创建了一个数据类的实例，`data`. 我`vc1`为第一个问题创建，并将其设置`data`为 的属性`vc1`，并将其标记设置为 1，以便从数据中加载第一个问题。

在用户回答第一个问题后，我创建了一个新的视图控制器，`vc2`在 的方法中`vc1`，使标签 1 比最后一个 vc 的标签多，以便加载第二个问题，并从 ' 属性传递`data`到`vc1`' `vc2`s。

然后我重复其他问题。

但是，这不是很好的设计，我正在寻找更好的解决方案。我认为我不能使用类方法，因为`data`它应该包含一组随机问题。下面我有数据类的代码。

```
// the data class as it is now, designed for instance methods

- (id)init {
self = [super init];
if (self) {

    //Questions of the same type belong to a "ROW" (Reaction of Week)
    //individual questions
    // Items in array: (1)Question, (2)Reactants, (3)Products, (4)Elements for keyboard

    NSArray *R1Q1 = [[NSArray alloc] initWithObjects:@"Methanol is burned completely in air", @"2CH₃OH(l) + 3O₂(g)", @"2CO₂(g) + 4H₂O", @"C,H,O", nil];
    NSArray *R1Q2 = [[NSArray alloc] initWithObjects:@"Ammonia is burned in excess oxygen gas", @"4NH₃(g) + 7H₂O(l)", @"4NO₂(g) + 6H₂O(l)", @"N,H,O", nil];
    NSArray *R1Q3 = [[NSArray alloc] initWithObjects:@"Hydrogen sulfide gas is burned in excess oxygen gas", @"2H₂S(g) + 3O₂(g)", @"CO₂(g) + 2SO₂(g)", @"H,S,O", nil];

    NSArray *R2Q1 = [[NSArray alloc] initWithObjects:@"Solid potassium is added to a flask of oxygen gas", @"K(s) + O₂(g)", @"KO₂(s)", @"K,O", nil];
    NSArray *R2Q2 = [[NSArray alloc] initWithObjects:@"Sodium metal is dropped into a flask of pure water", @"2Na(s) + H₂O(l)", @"2Na⁺(aq) + 2OH⁻(aq) + H₂(g)", @"Na,H,O", nil];
    NSArray *R2Q3 = [[NSArray alloc] initWithObjects:@"A piece of lithium is heated strongly in oxygen", @"4Li(s) + O₂(g)", @"2Li₂O(s)", @"Li,O", nil];

    NSArray *R3Q1 = [[NSArray alloc] initWithObjects:@"Solutions of potassium chloride and silver nitrate are mixed", @"Ag⁺(aq) + Cl⁻(aq)", @"AgCl(s)", @"K,Cl,Ag,N,O", nil];
    NSArray *R3Q2 = [[NSArray alloc] initWithObjects:@"Solutions of iron(III) nitrate and sodium hydroxide are mixed", @"Fe³⁺(aq) + 3OH⁻(aq)", @"Fe(OH)₃(s)", @"Fe,N,O,Na,H", nil];
    NSArray *R3Q3 = [[NSArray alloc] initWithObjects:@"Solutions of nickel iodide and barium hydroxide are mixed", @"Ni²⁺(aq) + 2OH⁻(aq)", @"Ni(OH)₂(s)", @"Ni,I,Ba,OH", nil];
    // add rest

    //organize questions into groups
    row1 = [[NSArray alloc] initWithObjects:R1Q1, R1Q2, R1Q3, nil];
    row2 = [[NSArray alloc] initWithObjects:R2Q1, R2Q2, R2Q3, nil];
    row3 = [[NSArray alloc] initWithObjects:R3Q1, R3Q2, R3Q3, nil];
    //add rest

    // array containing all questions
    allRows = [[NSMutableArray alloc] initWithObjects:row1, row2, row3, nil];

    //in a real situation, needs to be given to class dynamically 
    self.maxRowNumber = 3;
    self.questionsPerRow = 2;
}

return self;
}

- (void)selectQuestions {

self.quizQuestions = [[NSMutableArray alloc] init];

for (int j = 0; j<self.maxRowNumber; j++) {
   //shuffle each row
    NSMutableArray *row = [NSMutableArray arrayWithArray:[allRows objectAtIndex:j]];
    [row shuffle];

    //add questions from each row
    for (int k = 0; k<self.questionsPerRow; k++)       
       [quizQuestions addObject:[row objectAtIndex:k]];

}

[quizQuestions shuffle];

} 
```

查看控制器代码摘录

```
 # pragma mark Cell Setup
    //1st cell in tableview
    - (void) setUpEquationCell: (UITableView *) tableView  {

    equationCell = (EquationCell *) [tableView dequeueReusableCellWithIdentifier:@"equationCell"];

    if (equationCell == nil) {   
        NSArray *nib =   [[NSBundle mainBundle] loadNibNamed:@"EquationCell" owner:self options:nil];
        equationCell = (EquationCell*) [nib objectAtIndex:0];
        [equationCell.leftButton addTarget:self action:@selector(addDissociateCell) forControlEvents:UIControlEventTouchUpInside];
        [equationCell.rightButton addTarget:self action:@selector(addBalanceCell) forControlEvents:UIControlEventTouchUpInside];
    }

}

    - (void) setUpBalanceCell: (UITableView *) tableView  {
            //2nd cell in tableview

    balanceCell = (BalanceCell *) [tableView dequeueReusableCellWithIdentifier:@"balanceCell"];

    if (balanceCell == nil) {   
        NSArray *nib =   [[NSBundle mainBundle] loadNibNamed:@"BalanceCell" owner:self options:nil];
        balanceCell = (BalanceCell*) [nib objectAtIndex:0];

        // stores data from equation cell into model
        for (FormulaLabel *label in equationCell.leftView.equationOrder) 
            [leftData.equation addObject:label.text];                                                 

        for (FormulaLabel *label in equationCell.rightView.equationOrder)  
            [rightData.equation addObject:label.text];

        [leftData setUpBalancedEquation];
        [rightData setUpBalancedEquation];
        [self setUpView:balanceCell.leftView fromArray:leftData.equation toArray:leftBalanceItems];
        [self setUpView:balanceCell.rightView fromArray:rightData.equation toArray:rightBalanceItems];
        [self addBalanceTapMethodInArray:leftBalanceItems Data:leftData];
        [self addBalanceTapMethodInArray:rightBalanceItems Data:rightData];
    }

}
    - (void) setUpDissociateCell: (UITableView *) tableView  {
    dissCell = (DissociateCell *) [tableView dequeueReusableCellWithIdentifier:@"dissCell"];

    if (dissCell == nil) {   
        NSArray *nib =   [[NSBundle mainBundle] loadNibNamed:@"DissociateCell" owner:self options:nil];
        dissCell = (DissociateCell*) [nib objectAtIndex:0];

        leftData.disEquation = [[NSMutableArray alloc] init];
        rightData.disEquation = [[NSMutableArray alloc] init];

        // stores data from equation cell into model
        for (FormulaLabel *label in equationCell.leftView.equationOrder) 
            [leftData.disEquation addObject:label.text];                                                 

        for (FormulaLabel *label in equationCell.rightView.equationOrder)  
            [rightData.disEquation addObject:label.text];

        [self setUpView:dissCell.leftView fromArray:leftData.disEquation toArray:leftDisItems];
        [self setUpView:dissCell.rightView fromArray:rightData.disEquation toArray:rightDisItems];
        [self addDissTapToArray:leftDisItems fromData:leftData inView:dissCell.leftView];
        [self addDissTapToArray:rightDisItems fromData:rightData inView:dissCell.rightView];
        [dissCell.dissociateButton addTarget:self action:@selector(dissociate) forControlEvents:UIControlEventTouchUpInside];
        }
    [dissCell.rightButton addTarget:self action:@selector(addBalanceCell) forControlEvents:UIControlEventTouchUpInside];

}

    - (void)addDissociateCell {

    [cellOrder addObject:@"dissociateCell"];
    [table reloadData];
    NSIndexPath *myIndexPath = [NSIndexPath indexPathForRow:0 inSection:([cellOrder count]-1)];
    [table scrollToRowAtIndexPath:myIndexPath atScrollPosition:UITableViewScrollPositionTop animated:YES];
}

- (void) addDissTapToArray:(NSMutableArray*)viewOrder fromData:(EquationData*)data inView:(UIView*)view {

    NSString *leftOrRight;

    if (view == dissCell.leftView) 
        leftOrRight = @"left";    
    else 
        leftOrRight = @"right";

    for (int j=0; j < [viewOrder count]; j++) {

        if (j%2==0) {
            UIView *formulaView = [viewOrder objectAtIndex:j];
            //dissociate method
            FalseTarget *target = [[FalseTarget alloc] initWithVC:self leftOrRightView:leftOrRight];
            UITapGestureRecognizer* tap = [[UITapGestureRecognizer alloc] initWithTarget:target action:@selector(dissTap:)]; 
            [formulaView addGestureRecognizer:tap];

            // cancelling method
            FalseTarget *target2 = [[FalseTarget alloc] initWithVC:self Data:data ViewList:viewOrder view:view];
            UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:target2 action:@selector(dissLongTap:)];
            [formulaView addGestureRecognizer:longPress];
                  }

    }
}
- (void)addCompoundToLabel:(UIGestureRecognizer *)recognizer leftOrRight:(NSString*)leftRight{
    if( [recognizer state] == UIGestureRecognizerStateEnded ) {
        FormulaLabel* label = (FormulaLabel*)[recognizer view];  
        dissIndex = label.tag;
        dissCell.unDissociated.text = label.text;
        currentDissCellView = leftRight;
    }
}

- (void)dissociate {

    EquationData *data;
    NSMutableArray *viewOrder;
    UIView *view;

    if ([currentDissCellView isEqualToString:@"left"]) {
        data = leftData;
        viewOrder = leftDisItems;
        view = dissCell.leftView;
    }

    else {
        data = rightData;
        viewOrder = rightDisItems;
        view = dissCell.rightView;
    }

    FormulaLabel *c1 = [dissCell.leftTextField.equationOrder objectAtIndex:0];
    FormulaLabel *c2 = [dissCell.rightTextField.equationOrder objectAtIndex:0];
    [data updateDisEquationAtIndex:dissIndex withCompound1:c1.text Compound2:c2.text];

    for (UIView *view in viewOrder) 
        [view removeFromSuperview];

    [viewOrder removeAllObjects];
    [self setUpView:view fromArray:data.disEquation toArray:viewOrder];
    [self addDissTapToArray:viewOrder fromData:data inView:view];

}

- (void) cancelIons:(id)sender fromData:(EquationData *)data inView:(UIView *)view withViewList:(NSMutableArray *)viewlist {
    if( [sender state] == UIGestureRecognizerStateEnded ) {

        FormulaLabel* label = (FormulaLabel*)[sender view];  
        int index = label.tag;
        [data.disEquation removeObjectAtIndex:index];

        for (UIView *formulaView in viewlist) 
            [formulaView removeFromSuperview];

        [viewlist removeAllObjects];
        [self setUpView:view fromArray:data.disEquation toArray:viewlist];
        [self addDissTapToArray:viewlist fromData:data inView:view];

    }
}

    - (void)addBalanceCell {

    [cellOrder addObject:@"balanceCell"];
    [table reloadData];
    NSIndexPath *myIndexPath = [NSIndexPath indexPathForRow:0 inSection:([cellOrder count]-1)];
    [table scrollToRowAtIndexPath:myIndexPath atScrollPosition:UITableViewScrollPositionTop animated:YES];

    leftBalanceItems = [[NSMutableArray alloc] init];
    rightBalanceItems = [[NSMutableArray alloc] init];
}

    - (void) addBalanceTapMethodInArray:(NSMutableArray *)balanceItems Data:(EquationData *)data {

    FalseTarget *target = [[FalseTarget alloc] initWithVC:self Data:data ViewList:balanceItems view:nil];

    for (UIView *view in balanceItems) {
        UITapGestureRecognizer* tap = [[UITapGestureRecognizer alloc] initWithTarget:target action:@selector(tap:)];
        [view addGestureRecognizer:tap];
    }

}

    - (void)updateBalanceLabelofSender:(UIGestureRecognizer*)sender fromData:(EquationData *)data inArray:(NSMutableArray *)balanceItems {

    FormulaLabel* label = (FormulaLabel*)[sender view];
    int oldWidth = label.frame.size.width;
    label.text = [data updateBalancedatIndex:label.tag];
    [label sizeToFit];
    int newWidth = label.frame.size.width;
    int difference = newWidth - oldWidth;
    int labelIndex = label.tag * 2;

    for (int j = 0; j<[balanceItems count]; j++) {
        // adjusts coordinate of  all views to the right of tapped item

        if (j > labelIndex){
            UIView *item = [balanceItems objectAtIndex:j];
            item.frame = CGRectMake(item.frame.origin.x + difference, item.frame.origin.y, item.frame.size.width, item.frame.size.height);
        }
    }
}

    - (void)setUpView:(UIView *)view fromArray:(NSMutableArray *)equationData toArray:(NSMutableArray *)balanceItems {

    int labelCount = 0; //label #
    int startingPoint = 5; //x vaiue where first label starts

    for (NSString *equationText in equationData) {

        //add text
        FormulaLabel *tempLabel = [[FormulaLabel alloc] initWithFrame:CGRectMake(startingPoint, 2, 10, 22)];
        tempLabel.text = equationText;
        [tempLabel sizeToFit];
        [view addSubview:tempLabel];
        tempLabel.tag = labelCount;
        [balanceItems addObject:tempLabel];
        //set location of '+'
        startingPoint = tempLabel.frame.origin.x + tempLabel.frame.size.width + 3;

        if (labelCount != [equationData count]-1) { //not the last label

            UILabel *plus = [[[UILabel alloc] initWithFrame:CGRectMake(startingPoint, 5, 10, 10)]autorelease];
            plus.text = @"+";
            plus.font = [UIFont systemFontOfSize:13];
            [plus sizeToFit];
            [view addSubview:plus];
            startingPoint = plus.frame.origin.x + plus.frame.size.width + 3;
            [balanceItems addObject:plus];
        }

        labelCount ++;
        [tempLabel release];
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:36:17.707

我想在这里你应该使用模型结构。

**1.模型：**模型代表实体。在您的情况下，我可以创建两个实体 Round, Question

```
@interface Round: NSObject {

    NSUInteger *roundId; // 1, 2 = if it is required to check then this mi
    NSArray *questions; // Array that contains objects for Question entity
}

@interface Question:NSObject {

    NSString *questionText;
    NSString *options1Text;
    NSString *options2Text;
    NSString *options3Text;
}

@interface DataManager:NSObject {

    NSArray *rounds; // Array that contains object for Round entity
}

+(void)sharedInstance; 
```

**2\. DataManger**：DataManager 将管理您的实体对象。这个数据管理器将是一个 sharedInstance 类。因此，在初始化管理器时，将创建实体并插入数据。

**3\. ViewController：**现在在视图控制器中可以直接使用sharedInstace，像这样：

```
[[DataManager sharedInstance] rounds] 
```

您可以轻松获取用于创建 sharedInstance 类的代码。

现在您可以在整个应用程序中的任何位置使用此轮次。所以它会很安静很容易访问。例如，如果您需要第 1 轮第 2 题第 3 选项，则以相同的方式编写代码

第1轮

```
Round *r = [[[DataManager sharedInstance] rounds] objectAtIndex:0]; 
```

问题2

```
Question *q = [[r questions] objectAtIndex:1]; 
```

问题文本和选项 3

```
NSLog(@"questionText : %@  3rd Option: %@", q.questionText, q.option3Text) 
```

享受编码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:44:02.747

为什么不能使用带有问题属性的视图控制器类，在该类中重载属性的 setter 方法以将 UI 更新为新数据：

在 QuestionViewController.h 文件中：

```
@property (retain, nonatomic) Question* myQuestionData; 
```

在 QuestionViewController.m

```
-(void) setMyQuestionData:(Question*)newData {
   [myQuestionData autorelease];
   myQuestionData = [newData retain];
   [self updateUIElements];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T06:51:04.060

我不会那样做，因为你强迫`UIViewController`他们了解数据模型（同时使它成为财产）。我会做的是一个类，使用类方法（而不是对象方法）将创建数据源。您仍然必须以`UIViewController`某种方式保存数据，但我认为 a`NSArray`或 a`NSDictionary`就足够了：

```
-(void)viewDidLoad{
  [superViewDidLoad];
  myArray = [MyModel createDataSourceForTag:myTag];
} 
```

# jquery - 在 jQuery 中检索动态生成的 textarea 的值？

> ID：11009469
> 
> 赞同：1
> 
> 时间：2012-06-13T06:41:30.223
> 
> 标签：jquery, jquery-selectors, dom-traversal

```
<div id="post">
  <form name="postComment" id="commentPost6" action="javascript:void(0);" method="post"
    target="_top" onsubmit="return commentPost(6)">
     <textarea name="comment" id="comment6" class="commentText" 
        cols="10" rows="3" accesskey="1">
     </textarea><br>
     <input type="submit" name="submit" id="commentpost" value="Submit" accesskey="2">
  </form>
</div> 
```

这是我**的帖子**div 标签，我有**多个**具有相同 id="post" 的 div 标签，表单和字段是动态生成的，**表单**和**文本区域**的 id都是唯一的，因此在点击时检索这些值没有问题提交时，我调用**commentPost**方法。

```
function commentPost(postId)
{
    alert("Inside commentpost");
    //how to retrive/access value of textarea here

} 
```

如何获得文本区域的价值？以防万一

是的，我知道拥有多个具有相同 ID 的元素是无效的 HTML。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T06:44:51.137

```
$('#comment'+postId).val(); 
```

你为什么不简单地使用类而不是 id？（邮政）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T06:46:06.143

```
function commentPost(postId)
{
    alert("Inside commentpost");
    aler($("#commentPost"+postId).find('textarea').val());

} 
```

这将为您提供 textarea 值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T06:53:39.007

**修改后的 HTML**（`post`现在是一个类，`javascript:`从中删除`action`）：

```
<div class="post">
  <form name="postComment" id="commentPost6" action="" method="post"
    target="_top" onsubmit="return commentPost(this)">
     <textarea name="comment" id="comment6" class="commentText" 
        cols="10" rows="3" accesskey="1">
     </textarea><br>
     <input type="submit" name="submit" id="commentpost" value="Submit" accesskey="2">
  </form>
</div> 
```

**Javascript：**

```
function commentPost(form)
{
    var textAreaValue = $(form).find('.commentText').val();
    console.log(textAreaValue);
} 
```

* * *

更好的是，您应该开始编写**高级事件处理程序**，而不是这些内联的（`onsubmit=""`和朋友）。jQuery 为此提供了[很好的方法](http://api.jquery.com/category/events/)。

```
$('.post form').submit(function (e) {
    var textAreaValue = $(this).find('.commentText').val();
    console.log(textAreaValue);

    e.preventDefault(); //to prevent default event - which is form submission
}); 
```

内联事件处理程序非常适合快速测试，但它们很快会导致无法维护、混乱的 HTML 源代码。您应该遵循[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)的规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T07:00:48.283

试试这个：

取决于您是否以上述形式传递与您的命名标准匹配的 postId，您有 6 个。

```
function commentPost(postId) {
        alert("Inside commentpost");
        // One way.
        var $testAreaValue = $('textarea.commentText#comment' + postId).val();
        alert($testAreaValue);
        // second way.
        $testAreaValue = $('#comment' + postId).val();
        alert($testAreaValue);
} 
```

希望能帮助到你。

# visual-studio-2010 - Microsoft Fakes 可以在 Visual Studio 2010 中使用吗？

> ID：11009477
> 
> 赞同：17
> 
> 时间：2012-06-13T06:42:16.900
> 
> 标签：visual-studio-2010, visual-studio-2012, microsoft-fakes

我们有使用 Visual Studio 2010 专业版的开发人员和一些试用 Visual Studio 2012 的开发人员。两个版本之间的项目兼容性很好。

如果我们引入新的 Fakes Framework 进行单元测试，Visual Studio 项目是否仍与 2010 兼容？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T17:59:10.183

目前 Microsoft Fakes 在 VS 2010 中不起作用。项目将编译但是使用 Fakes 的测试会抛出 NotSupportedException 并带有以下堆栈跟踪。

```
at Microsoft.QualityTools.Testing.Fakes.UnitTestIsolation.UnitTestIsolationRuntime.InvokeEvent(T value, Action`1 eh)
at Microsoft.QualityTools.Testing.Fakes.UnitTestIsolation.UnitTestIsolationRuntime.OnAttachedUnsupportedMethod(MethodBase method)
at Microsoft.QualityTools.Testing.Fakes.UnitTestIsolation.UnitTestIsolationRuntime.CheckInstrumentation(MethodBase method)
at Microsoft.QualityTools.Testing.Fakes.UnitTestIsolation.UnitTestIsolationRuntime.InternalAttachDetour(Object optionalReceiver, MethodBase method, Delegate detourDelegate)
at Microsoft.QualityTools.Testing.Fakes.UnitTestIsolation.UnitTestIsolationRuntime.AttachDetour(Object optionalReceiver, MethodBase method, Delegate detourDelegate) 
```

我建议使用 Moles，它是 Microsoft Fakes 的早期版本。这是关于从痣转移到假货的精彩[文章。](http://www.richonsoftware.com/post/2012/04/20/Comparing-Microsoft-Moles-in-Visual-Studio-2010-to-Microsoft-Fakes-in-Visual-Studio-11.aspx)

# android - 对于 Android 应用程序，如何从 *.xml 文件中读取字符串？

> ID：11009478
> 
> 赞同：0
> 
> 时间：2012-06-13T06:42:19.277
> 
> 标签：android, string, arrays

[让我们从http://developer.android.com/resources/tutorials/hello-world.html](http://developer.android.com/resources/tutorials/hello-world.html)中详细介绍的 Hello World 程序开始。

让我们添加文件 res/values/arrayfile.xml 。不幸的是，Stack Overflow 拒绝显示标签，所以我将描述这个文件中的内容。有两个字符串数组，一个名为“trees”，一个名为“bondactors”。歌手类别下的项目是（按顺序）：“橡树”、“柳树”、“枫树”和“桦树”。Bondactors 类别下的项目（按顺序）：“Sean Connery”、“George Lazenby”、“Roger Moore”、“Pierce Brosnan”和“Daniel Craig”。

让我们修改 HelloAndroid.java 文件，以便它可以显示 res/values/arrayfile.xml 中列出的任何项目。

如何让 Android 应用打印“Pierce Brosnan”来代替“Hello，Android”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T06:51:16.733

参考：http: [//developer.android.com/guide/topics/resources/string-resource.html](http://developer.android.com/guide/topics/resources/string-resource.html)

```
Resources res = getResources();
String[] bondactors = res.getStringArray(R.array.bondactors_array); 
```

祝你好运。

# asp.net - 如何在 sql 语句中使用传递给 asp.net webservice 的参数？

> ID：11009481
> 
> 赞同：1
> 
> 时间：2012-06-13T06:42:40.190
> 
> 标签：asp.net, sql, ios, web-services, sql-server-2008

你好，我建立了一个与 iPhone 通信的 web 服务。

我想在表格中显示来自所选街道的房间，为此我必须通过 asp.net 网络服务将一些 ID 从我的 iPhone 与 JSON 传递到 sql 数据库。

我的网络方法如下所示：

```
 [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    [WebMethod]
    public string Room(string street_id, string country_id, string city_id)
    {
        return RoomHelper.Room(street_id, country_id, city_id);
    } 
```

我的 sql 语句应该是这样的：

```
SELECT Roomname FROM Room WHERE street_id = (passed street_id) AND country_id = (passed country_id) AND city_id = (passed city_id) 
```

如何在我的 sql 语句中使用传递的参数来过滤房间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:50:42.783

```
using (SqlConnection conn = new SqlConnection("<my connection string>"))
{
    conn.Open();
    using (SqlCommand cmd = new SqlCommand("SELECT Roomname FROM Room WHERE street_id = @streetId AND country_id = @countryId AND city_id = @cityId", conn))
    {
        cmd.Parameters.AddWithValue("@streetId", street_id);
        cmd.Parameters.AddWithValue("@countryId", country_id);
        cmd.Parameters.AddWithValue("@cityId", city_id);
        using (var reader = cmd.ExecuteReader())
        {
            // retrieve your data per row or as you wish
            while (reader.Read())
            {

            }
        }
    }
} 
```

# mysql - VARCHAR 列在 mySql 中可索引是否有任何限制？

> ID：11009483
> 
> 赞同：1
> 
> 时间：2012-06-13T06:42:58.683
> 
> 标签：mysql, indexing, varchar

我知道 VARCHAR 列没有任何限制，它可以达到 mysql 中的 ROW 限制大小（65,535 字节）。

现在 VARCHAR 列是否可以被索引？还是取决于存储引擎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:55:39.540

是的，有一个限制：

从文档 -*所有存储引擎支持每个表至少 16 个索引和至少 256 字节的总索引长度。大多数存储引擎都有更高的限制。*

更多信息 -[列索引](http://dev.mysql.com/doc/refman/5.5/en/column-indexes.html)。

在这种情况下，您可以为索引指定前缀长度，例如 -

```
CREATE TABLE table1 (
  column1 VARCHAR(255) DEFAULT NULL,
  UNIQUE KEY UK_table1_column1 (column1(10))
); 
```

# php - 为什么当前未安装mysql驱动程序本地服务器上出现错误？

> ID：11009485
> 
> 赞同：1
> 
> 时间：2012-06-13T06:43:16.597
> 
> 标签：php, zend-framework, pdo

我有一个`php`使用 开发的项目`zend framework`，当我托管到我的本地服务器（CentOS）时，出现以下错误：

```
The mysql driver is not currently installed 
```

我已经**在 php.ini 上安装并启用了 pdo_mysql**，但它不影响我的 phpinfo。phpinfo 只显示**pdo_sqlite**看不到 pdo_mysql。

我机器上的另一个问题是`phpinfo`显示`PHP version 5.2.8`，从终端显示 PHP 5.1.6。我的机器上有两个 php 版本吗？高度赞赏帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:39:39.597

检查您的 phpinfo() 输出中使用的 php.ini 文件的位置，并确保调整该文件。在一台计算机上运行多个版本的 php 是完全可能的。

它将在输出顶部附近显示为（这是我的）：

```
 Loaded Configuration File      /etc/php5/apache2filter/php.ini 
```

这将是您需要编辑以影响您的网络服务器实例 php 行为的文件的位置。

确保`extension=php_pdo_mysql.so`在其中加载 mysql pdo 驱动程序

最后还要确保`extension_dir`使用绝对路径指向您的库所在的目录；你可以在**Core**下的 phpinfo() 中找到它（当你想明显地调整它时，在你的 php.ini 中）

# ios - 如何与 Dropbox 同步核心数据

> ID：11009487
> 
> 赞同：1
> 
> 时间：2012-06-13T06:43:27.367
> 
> 标签：ios, core-data, dropbox, xcode4.2

我正在开发一个基于财务的应用程序，我需要在其中添加 Dropbox 同步功能。对于我在应用程序中添加/编辑/删除的每个条目，更改应应用于 Drop Box 中的数据。为此，我搜索并找到了[delta](https://www.dropbox.com/developers/reference/api#delta)，我们可以从中找到本地 DB 和 Drop Box DB 之间的差异，并与旧 DB 同步差异。

我的疑问是我应该以什么格式将核心数据保存在 Drop Box 中？[增量](https://www.dropbox.com/developers/reference/api#delta)是否足以同步数据？

# android - 在android中使用语音命令如何导航页面

> ID：11009488
> 
> 赞同：0
> 
> 时间：2012-06-13T06:43:29.157
> 
> 标签：android

我想开发一个应用程序来使用语音命令将一个页面导航到另一个页面

这是我的代码

```
 public class mainActivity extends Activity implements OnClickListener {
/** Called when the activity is first created. */

 ArrayList<String> StoredCommand = new ArrayList<String>();

private static final String TAG = "VoiceRecognition";

private static final int VOICE_RECOGNITION_REQUEST_CODE = 1234;

private static final Context View = null;

private ListView mList;

private Handler mHandler;

private Spinner mSupportedLanguageView;

/**
 * Called with the activity is first created.
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mHandler = new Handler();

    StoredCommand.add("Path Recoder");
    StoredCommand.add("Path Selector");
    StoredCommand.add("Stop");
    StoredCommand.add("Pause");

    // Inflate our UI from its XML layout description.
    setContentView(R.layout.main);

    // Get display items for later interaction
    Button speakButton = (Button) findViewById(R.id.btn_speak);

    mList = (ListView) findViewById(R.id.list);

    mSupportedLanguageView = (Spinner) findViewById(R.id.supported_languages);

    // Check to see if a recognition activity is present
    PackageManager pm = getPackageManager();
    List<ResolveInfo> activities = pm.queryIntentActivities(
            new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH), 0);
    if (activities.size() != 0) {
        speakButton.setOnClickListener(this);
    } else {
        speakButton.setEnabled(false);
        speakButton.setText("Recognizer not present");
    }

    // Most of the applications do not have to handle the voice settings. If the application
    // does not require a recognition in a specific language (i.e., different from the system
    // locale), the application does not need to read the voice settings.
    refreshVoiceSettings();
}

/**
 * Handle the click on the start recognition button.
 */
public void onClick(View v) {
    if (v.getId() == R.id.btn_speak) {
        startVoiceRecognitionActivity();
    }
}

/**
 * Fire an intent to start the speech recognition activity.
 */
private void startVoiceRecognitionActivity() {
    Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);

    // Specify the calling package to identify your application
    intent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE, getClass().getPackage().getName());

    // Display an hint to the user about what he should say.
    intent.putExtra(RecognizerIntent.EXTRA_PROMPT, "Speech recognition demo");

    // Given an hint to the recognizer about what the user is going to say
    intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
            RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);

    // Specify how many results you want to receive. The results will be sorted
    // where the first result is the one with higher confidence.
    intent.putExtra(RecognizerIntent.EXTRA_MAX_RESULTS, 5);

    // Specify the recognition language. This parameter has to be specified only if the
    // recognition has to be done in a specific language and not the default one (i.e., the
    // system locale). Most of the applications do not have to set this parameter.
    if (!mSupportedLanguageView.getSelectedItem().toString().equals("Default")) {
        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE,
                mSupportedLanguageView.getSelectedItem().toString());
    }

    startActivityForResult(intent, VOICE_RECOGNITION_REQUEST_CODE);
}

/**
 * Handle the results from the recognition activity.
 */
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == VOICE_RECOGNITION_REQUEST_CODE && resultCode == RESULT_OK) {

        // Fill the list view with the strings the recognizer thought it could have heard
        ArrayList<String> matches = data.getStringArrayListExtra(
                RecognizerIntent.EXTRA_RESULTS);
        mList.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,
               matches));

        StringBuilder sb=new StringBuilder()  ;
        for (String match:matches){

        switch(resultCode) {
        case RESULT_OK:
            Log.i(TAG, "RESULT_OK");

            if(StoredCommand==matches)
            {
                //Button next=(Button)findViewById(R.id.btn_speak);
                 if (matches.contains("Path Recoder"))
                {

                 Intent myIntent = new Intent(View, PahtRecoder.class);
                 startActivityForResult(myIntent, 0);
                }

                 else if(matches.contains("path selector"))
                 {
                     Intent myIntent = new Intent(View, Pahtselector.class);
                     startActivityForResult(myIntent, 0);

                 }
                 else if(matches.contains("stop"))
                 {
                     Intent myIntent = new Intent(View, Pahtselector.class);
                     startActivityForResult(myIntent, 0);

                 }
                 else if(matches.contains("start"))

                 {

                     Intent myIntent = new Intent(View, Pahtselector.class);
                     startActivityForResult(myIntent, 0);
                 }
                 }

            else
            {
                Log.i(TAG, "COMMAND_NOT_MATCHING");
            }

            break;
        case RESULT_CANCELED:
            Log.i(TAG, "RESULT_CANCELED");
            break;
        case RecognizerIntent.RESULT_AUDIO_ERROR:
            Log.i(TAG, "RESULT_AUDIO_ERROR");
            break;
        case RecognizerIntent.RESULT_CLIENT_ERROR:
            Log.i(TAG, "RESULT_CLIENT_ERROR");
            break;
        case RecognizerIntent.RESULT_NETWORK_ERROR:
            Log.i(TAG, "RESULT_NETWORK_ERROR");
            break;
        case RecognizerIntent.RESULT_NO_MATCH:
            Log.i(TAG, "RESULT_NO_MATCH");
            break;
        case RecognizerIntent.RESULT_SERVER_ERROR:
            Log.i(TAG, "RESULT_SERVER_ERROR");
            break;
        default:
            Log.i(TAG, "RESULT_UNKNOWN");
            break;
        }

        }

    }

    else{
        Log.e("TAG", "Recognition is Failed");
    }

    super.onActivityResult(requestCode, resultCode, data);
}

private void refreshVoiceSettings() {
    Log.i(TAG, "Sending broadcast");
    sendOrderedBroadcast(RecognizerIntent.getVoiceDetailsIntent(this), null,
            new SupportedLanguageBroadcastReceiver(), null, Activity.RESULT_OK, null, null);
}

private void updateSupportedLanguages(List<String> languages) {
    // We add "Default" at the beginning of the list to simulate default language.
    languages.add(0, "Default");

    SpinnerAdapter adapter = new ArrayAdapter<CharSequence>(this,
            android.R.layout.simple_spinner_item, languages.toArray(
                    new String[languages.size()]));
    mSupportedLanguageView.setAdapter(adapter);
}

private void updateLanguagePreference(String language) {
    TextView textView = (TextView) findViewById(R.id.language_preference);
    textView.setText(language);
}

/**
 * Handles the response of the broadcast request about the recognizer supported languages.
 *
 * The receiver is required only if the application wants to do recognition in a specific
 * language.
 */
private class SupportedLanguageBroadcastReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, final Intent intent) {
        Log.i(TAG, "Receiving broadcast " + intent);

        final Bundle extra = getResultExtras(false);

        if (getResultCode() != Activity.RESULT_OK) {
            mHandler.post(new Runnable() {
                @Override
                public void run() {
                    showToast("Error code:" + getResultCode());
                }
            });
        }

        if (extra == null) {
            mHandler.post(new Runnable() {
                @Override
                public void run() {
                    showToast("No extra");
                }
            });
        }

        if (extra.containsKey(RecognizerIntent.EXTRA_SUPPORTED_LANGUAGES)) {
            mHandler.post(new Runnable() {

                @Override
                public void run() {
                    updateSupportedLanguages(extra.getStringArrayList(
                            RecognizerIntent.EXTRA_SUPPORTED_LANGUAGES));
                }
            });
        }

        if (extra.containsKey(RecognizerIntent.EXTRA_LANGUAGE_PREFERENCE)) {
            mHandler.post(new Runnable() {

                @Override
                public void run() {
                    updateLanguagePreference(
                            extra.getString(RecognizerIntent.EXTRA_LANGUAGE_PREFERENCE));
                }
            });
        }
    }

    private void showToast(String text) {

        Toast.makeText(mainActivity.this, text, 1000).show();
    }
} 
```

根据存储的命令，我需要导航这些页面。但结果是谷歌语音选项工作，但命令不起作用。我的模式匹配有什么问题......请给我解决方案。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:33:10.673

试试这个作为一个最小的实现`onActivityResult()`：

```
if (requestCode == VOICE_RECOGNITION_REQUEST_CODE && resultCode == RESULT_OK)
{
    ArrayList<String> matches = data.getStringArrayListExtra(
            RecognizerIntent.EXTRA_RESULTS);
    mList.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,
               matches));
    for (String bestMatch:matches)
    {
        if (bestMatch.equalsIgnoreCase("Path Recoder"))
        {
            Intent myIntent = new Intent(View, PahtRecoder.class);
            startActivityForResult(myIntent, 0);
        }
        else if(bestMatch.equalsIgnoreCase("Path Selector"))
        {
            Intent myIntent = new Intent(View, Pahtselector.class);
            startActivityForResult(myIntent, 0);
        }
        else if(bestMatch.equalsIgnoreCase("Stop"))
        {
            Intent myIntent = new Intent(View, Pahtselector.class);
            startActivityForResult(myIntent, 0);
        }
        else if(bestMatch.equalsIgnoreCase("Pause"))
        {
            Intent myIntent = new Intent(View, Pahtselector.class);
            startActivityForResult(myIntent, 0);
        }
        else
        {
            Log.i(TAG, "COMMAND_NOT_MATCHING");
        }
    }
} 
```

**进一步更新：**我最初的帖子是错误的 -`StoredCommand`不应该使用；在较旧的语音识别平台上，他们将获得一份可能的话语列表，并且引擎会尝试将您所说的内容与可能性相匹配。但是，Android 上的默认引擎不需要这个。顺便问一下，你的`mList`显示是什么？

另请注意，我没有测试上面的任何代码......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:49:42.097

大家好，这是使用语音命令从一页导航到另一页的代码。它对任何人都有用

public class mainActivity extends Activity implements OnClickListener { /** 首次创建活动时调用。*/

```
private static final String TAG = "VoiceRecognition";

private static final int VOICE_RECOGNITION_REQUEST_CODE = 1234;

private static final Context View = null;

private ListView mList;

private Handler mHandler;

private Spinner mSupportedLanguageView;

/**
 * Called with the activity is first created.
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mHandler = new Handler();

    // Inflate our UI from its XML layout description.
    setContentView(R.layout.main);

    // Get display items for later interaction
    Button speakButton = (Button) findViewById(R.id.btn_speak);

    mList = (ListView) findViewById(R.id.list);

    mSupportedLanguageView = (Spinner) findViewById(R.id.supported_languages);

    // Check to see if a recognition activity is present
    PackageManager pm = getPackageManager();
    List<ResolveInfo> activities = pm.queryIntentActivities(
            new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH), 0);
    if (activities.size() != 0) {
        speakButton.setOnClickListener(this);
    } else {
        speakButton.setEnabled(false);
        speakButton.setText("Recognizer not present");
    }

    // Most of the applications do not have to handle the voice settings. If the application
    // does not require a recognition in a specific language (i.e., different from the system
    // locale), the application does not need to read the voice settings.
    refreshVoiceSettings();
}

/**
 * Handle the click on the start recognition button.
 */
public void onClick(View v) {
    if (v.getId() == R.id.btn_speak) {
        startVoiceRecognitionActivity();
    }
}

/**
 * Fire an intent to start the speech recognition activity.
 */
private void startVoiceRecognitionActivity() {
    Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);

    // Specify the calling package to identify your application
    intent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE, getClass().getPackage().getName());

    // Display an hint to the user about what he should say.
    intent.putExtra(RecognizerIntent.EXTRA_PROMPT, "Speech recognition demo");

    // Given an hint to the recognizer about what the user is going to say
    intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
            RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);

    // Specify how many results you want to receive. The results will be sorted
    // where the first result is the one with higher confidence.
    intent.putExtra(RecognizerIntent.EXTRA_MAX_RESULTS, 5);

    // Specify the recognition language. This parameter has to be specified only if the
    // recognition has to be done in a specific language and not the default one (i.e., the
    // system locale). Most of the applications do not have to set this parameter.
    if (!mSupportedLanguageView.getSelectedItem().toString().equals("Default")) {
        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE,
                mSupportedLanguageView.getSelectedItem().toString());
    }

    startActivityForResult(intent, VOICE_RECOGNITION_REQUEST_CODE);
}

/**
 * Handle the results from the recognition activity.
 */
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == VOICE_RECOGNITION_REQUEST_CODE && resultCode == RESULT_OK) {

        // Fill the list view with the strings the recognizer thought it could have heard
         ArrayList<String> matches = data.getStringArrayListExtra(
                    RecognizerIntent.EXTRA_RESULTS);
            mList.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,
                       matches));
           for (String bestMatch : matches) {
                if (bestMatch.contains("record") || bestMatch.contains("cod") || bestMatch.contains("ed")) {
                    // Intent myIntent = new Intent(View, PahtRecoder.class);
                    // startActivityForResult(myIntent, 0);
                    Intent my = new Intent(getApplicationContext(),
                            PathRecorderStart.class);
                    startActivityForResult(my, 0);
                }

                else if (bestMatch.contains("select") || bestMatch.contains("elect") || bestMatch.contains("ct")) {
                    // Intent myIntent = new Intent(View, PahtRecoder.class);
                    // startActivityForResult(myIntent, 0);
                    Intent my = new Intent(getApplicationContext(),
                            PathSelectorOptions.class);
                    startActivityForResult(my, 0);
                }

                else {
                    Log.i(TAG, "COMMAND_NOT_MATCHING");
                }

            }
    }

    super.onActivityResult(requestCode, resultCode, data);
}

private void refreshVoiceSettings() {
    Log.i(TAG, "Sending broadcast");
    sendOrderedBroadcast(RecognizerIntent.getVoiceDetailsIntent(this), null,
            new SupportedLanguageBroadcastReceiver(), null, Activity.RESULT_OK, null, null);
}

private void updateSupportedLanguages(List<String> languages) {
    // We add "Default" at the beginning of the list to simulate default language.
    languages.add(0, "Default");

    SpinnerAdapter adapter = new ArrayAdapter<CharSequence>(this,
            android.R.layout.simple_spinner_item, languages.toArray(
                    new String[languages.size()]));
    mSupportedLanguageView.setAdapter(adapter);
}

private void updateLanguagePreference(String language) {
    TextView textView = (TextView) findViewById(R.id.language_preference);
    textView.setText(language);
}

/**
 * Handles the response of the broadcast request about the recognizer supported languages.
 *
 * The receiver is required only if the application wants to do recognition in a specific
 * language.
 */
private class SupportedLanguageBroadcastReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, final Intent intent) {
        Log.i(TAG, "Receiving broadcast " + intent);

        final Bundle extra = getResultExtras(false);

        if (getResultCode() != Activity.RESULT_OK) {
            mHandler.post(new Runnable() {
                @Override
                public void run() {
                    showToast("Error code:" + getResultCode());
                }
            });
        }

        if (extra == null) {
            mHandler.post(new Runnable() {
                @Override
                public void run() {
                    showToast("No extra");
                }
            });
        }

        if (extra.containsKey(RecognizerIntent.EXTRA_SUPPORTED_LANGUAGES)) {
            mHandler.post(new Runnable() {

                @Override
                public void run() {
                    updateSupportedLanguages(extra.getStringArrayList(
                            RecognizerIntent.EXTRA_SUPPORTED_LANGUAGES));
                }
            });
        }

        if (extra.containsKey(RecognizerIntent.EXTRA_LANGUAGE_PREFERENCE)) {
            mHandler.post(new Runnable() {

                @Override
                public void run() {
                    updateLanguagePreference(
                            extra.getString(RecognizerIntent.EXTRA_LANGUAGE_PREFERENCE));
                }
            });
        }
    }

    private void showToast(String text) {

        Toast.makeText(mainActivity.this, text, 1000).show();
    }
}

} 
```

# c++ - 在库中使用自定义类型列表

> ID：11009495
> 
> 赞同：0
> 
> 时间：2012-06-13T06:44:09.817
> 
> 标签：c++, stl, static-libraries

我有一个静态库来构建并在其他应用程序中使用它。
在我的静态库中，我想维护一个自定义类型的列表。对于列表，我使用标准模板库中的列表。我正在使用标准迭代器来遍历列表。
我测试了两个类，即自定义类型和一个管理自定义类型列表的类，直接在主类中包含文件。一切都按预期工作。
现在我想将它编译为一个静态库并在其他应用程序中使用它。当我编译一个库时，它编译没有错误。在将库包含到应用程序中时，我收到错误为**"Conflicting types for 'operator=='"**。
我正在使用 Xcode 4 进行开发工作。
这个“MyClass”是我的自定义类型，在列表中使用。

```
class MyClass {

    private:
        const void* handler;

    public:
        MyClass(const void*, int);
        MyClass(const MyClass&);
        virtual ~MyClass();
        void* getHandler();
        friend bool operator==(const MyClass&, const MyClass&);
    }; 
```

我的类.cpp：

```
 MyClass::MyClass(const void* subscriber) 
    {
        handler = subscriber;

    }

    MyClass::MyClass(const MyClass& subscriber)
    {
        handler = subscriber.handler;

    }

    MyClass::~MyClass()
    {

    }

    void* MyClass::getHandler()
    {
        return (void *)handler;
    }

    bool operator==(const MyClass& lhs, const MyClass& rhs)
    {
        if(lhs.handler == rhs.handler)
        {
            return true;
        }
        return false;
    } 
```

遍历list的代码片段如下：

```
static list<MyClass> dataHandlers;

void DeviceServiceListner::unsubscribeRawData(const void* handler) {
    // check list of registered handlers and remove given from the list
    list<MyClass>::iterator it = dataHandlers.begin();
    MyClass subscriber = *it;
    while(it != dataHandlers.end()) {
        if (subscriber.getHandler() == handler) {
            dataHandlers.remove(subscriber);
            break;
        }
         it++;
    }

} 
```

**编辑：** 来自 Xcode 的错误日志是：

```
In file included from /Users/mobiplex/svn/Software/iPhone Interface Library/InterfaceLib/InterfaceLib/src/bluetooth/DataListener.cpp:10:
In file included from /Users/mobiplex/svn/Software/iPhone Interface Library/InterfaceLib/InterfaceLib/Libraries/DeviceServiceListner.h:17:
In file included from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/usr/include/c++/4.2.1/list:69:
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/usr/include/c++/4.2.1/bits/stl_list.h:1196:5: error: conflicting types for 'operator=='
    operator==(const list<_Tp, _Alloc>& __x, const list<_Tp, _Alloc>& __y)
    ^
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/usr/include/c++/4.2.1/bits/stl_list.h:265:5: note: previous definition is here
    operator==(const _List_iterator<_Val>& __x,
    ^
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/usr/include/c++/4.2.1/bits/stl_list.h:1232:5: error: conflicting types for 'operator!='
    operator!=(const list<_Tp, _Alloc>& __x, const list<_Tp, _Alloc>& __y)
    ^
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/usr/include/c++/4.2.1/bits/stl_list.h:271:5: note: previous definition is here
    operator!=(const _List_iterator<_Val>& __x,
    ^
2 errors generated. 
```

“DataListner”是应用程序类，我在其中包含库中的“DeviceServiceListener”。错误的可能原因是什么，我该如何解决？

提前致谢。

# javascript - opener.document() 不能在 CHROME 上工作

> ID：11009496
> 
> 赞同：0
> 
> 时间：2012-06-13T06:44:12.703
> 
> 标签：javascript

以下脚本在 CHROME 浏览器中不起作用，IE 很好。

我已经改变了`opener.document`......到`window.opener.document`......但同样的情况。
它不会关闭窗口并将数据传输到父页面。

```
function mycoupon() {
    window.open("my_coupon3.jsp?amt=<%=pay_price2%>",
                'coupon_win',
                'toolbar=no,location=no,directories=no,status=no,menubar=no,scrollb‌​ars=yes, resizable=no,width=780,height=540');
}

function sel_coupon(c_id, amt) {
    var tot = opener.document.joinform.Org_totalprice.value;
    tot = String(Number(tot) - Number(amt));
    opener.document.joinform.totalprice.value = tot;
    opener.document.joinform.coupon_id.value = c_id;
    opener.document.joinform.all["tot"].innerHTML = maskNum(opener.document.joinform.Org_totalprice.value) + "USD - " + maskNum(amt) + " USD &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><font color='red'>Total : " + maskNum(tot) + " USD</font></b> ";
    opener.cal_payment_money();
    self.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:00:25.817

定义一个全局变量并为新窗口分配一个引用，然后在您的`sel_coupon()`函数中使用它。

这是一个例子：

```
var new_window_handle;

function mycoupon() {
    new_window_handle = window.open("my_coupon3.jsp?amt=<%=pay_price2%>",
                'coupon_win',
                'toolbar=no,location=no,directories=no,status=no,menubar=no,scrollb‌​ars=yes, resizable=no,width=780,height=540');
}

function sel_coupon(c_id, amt) {
    var tot = new_window_handle.opener.document.joinform.Org_totalprice.value;
    tot = String(Number(tot) - Number(amt));
    new_window_handle.opener.document.joinform.totalprice.value = tot;
    new_window_handle.opener.document.joinform.coupon_id.value = c_id;
    new_window_handle.opener.document.joinform.all["tot"].innerHTML = maskNum(new_window_handle.opener.document.joinform.Org_totalprice.value) + "USD - " + maskNum(amt) + " USD &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><font color='red'>Total : " + maskNum(tot) + " USD</font></b> ";
    new_window_handle.opener.cal_payment_money();
    self.close();
} 
```

如果您对这种行为的原因感兴趣，那是因为 IE 假定默认值`window`是最新的。所以这就是为什么当你在 IE 上运行代码时它会尝试`opener`在新窗口中查找，但其他浏览器会更严格一些（在这种情况下更好）

# java - 点击按钮播放声音

> ID：11009497
> 
> 赞同：-2
> 
> 时间：2012-06-13T06:44:16.310
> 
> 标签：java, android, xml, eclipse, button

我已经浏览了这个网站上关于我的问题的几个已回答的问题，但无法让它发挥作用。我正在尝试让按钮在单击后播放声音。

Java代码：

```
package jg.AvengersSoundboard;

import android.app.Activity;
import android.os.Bundle;

public class Activity2 extends Activity {
    private Object mp;
    /** Called when the activity is first created. */
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main2);
    }
} 
```

XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#ffffff"  >

<Button
    android:id="@+id/button1"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Brain bag full of cats (HULK)"/>

<Button
    android:id="@+id/button2"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Do you think this madness will end in your rule? (THOR)" />

<Button
    android:id="@+id/button3"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Freedom (LOKI)" />

<Button
    android:id="@+id/button4"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Genius, Playboy, Billionaire. (STARK)" />

<Button
    android:id="@+id/button5"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="I have an army, we have a Hulk.  (STARK)" />

<Button
    android:id="@+id/button6"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="I put a bullet in my mouth. (HULK)" />

<Button
    android:id="@+id/button7"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="I&apos;m bringing the party to you (STARK)" />

<Button
    android:id="@+id/button8"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Last time in Germany (Cpt. America)" />

<Button
    android:id="@+id/button9"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Move away please" />

<Button
    android:id="@+id/button10"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Submarine (HULK)" />

<Button
    android:id="@+id/button11"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Tell me nobody kissed me (STARK)" />

<Button
    android:id="@+id/button12"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="You mean peace" />

   <Button
       android:id="@+id/Button02"
       android:layout_width="match_parent"
       android:layout_height="55px"
       android:text="Previous"
       android:textSize="18px" >

</Button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:01:58.883

首先，您必须使用 XML 文件中的按钮 ID 创建按钮的对象，如下所示：

```
Button one = (Button)this.findViewById(R.id.button1);
Button two = (Button)this.findViewById(R.id.button2);
Button zero = (Button)this.findViewById(R.id.button3); 
```

……其他人也一样……

现在创建一个`media player`像这样的实例变量：

```
MediaPlayer mp; 
```

现在在你的`OnCreate`方法上写这个：

```
mp = MediaPlayer.create(this, R.raw.mamacita_zero/*Your Sound file in raw folder*/); 
```

现在为您的按钮设置一个 onClickListener ：

```
zero.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                mp.start();
            }
        }); 
```

在每个按钮上，您都可以使用相同的方法来播放声音。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T06:58:15.077

您需要将声音文件存储在 res/raw/beep.mp3

```
private MediaPlayer mp; 
```

将此添加到按钮单击事件中

```
 mp = MediaPlayer.create(this, R.raw.beep);
    mp.start();//to start playing the sound 
```

阻止那个

```
 mp.stop(); 
```

# winforms - 错误 C3645：__clrcall 不能用于编译为本机代码的函数

> ID：11009500
> 
> 赞同：1
> 
> 时间：2012-06-13T06:44:35.043
> 
> 标签：winforms, visual-studio-2010, visual-c++, sse

我正在尝试在 VS 2010 的 Windows 表单应用程序中使用 SSE 指令。我在我的应用程序中使用**sum_array**函数，在以下链接中给出 [SSE 指令来添加数组的所有元素](https://stackoverflow.com/questions/10930595/sse-instructions-to-add-all-elements-of-an-array)

但是当我编译应用程序时，它给出了以下错误

```
 error C3645: 'plot_rectangle::Form1::sum_array' : __clrcall cannot be used on functions compiled to native code 
```

因为我也在我的应用程序中使用**OpenCV**函数，所以我必须为此选择 /clr 编译器选项。

那么当我们将 SSE 与 OpenCV 一起使用时，该错误的解决方案是什么。

我也尝试过在编译指示之间使用 SSE 指令，例如

```
#pragma managed(push, off)
uint32_t sum_array(const uint8_t a[], int n)
{
    const __m128i vk0 = _mm_set1_epi8(0);       // constant vector of all 0s for use with _mm_unpacklo_epi8/_mm_unpackhi_epi8
    const __m128i vk1 = _mm_set1_epi16(1);      // constant vector of all 1s for use with _mm_madd_epi16
    __m128i vsum = _mm_set1_epi32(0);           // initialise vector of four partial 32 bit sums
    uint32_t sum;
    int i;

    for (i = 0; i < n; i += 16)
    {
        __m128i v = _mm_load_si128((const __m128i *)&a[i]);      // load vector of 8 bit values
        __m128i vl = _mm_unpacklo_epi8(v, vk0); // unpack to two vectors of 16 bit values
        __m128i vh = _mm_unpackhi_epi8(v, vk0);
        vsum = _mm_add_epi32(vsum, _mm_madd_epi16(vl, vk1));
        vsum = _mm_add_epi32(vsum, _mm_madd_epi16(vh, vk1));
                                                // unpack and accumulate 16 bit values to
                                                // 32 bit partial sum vector

    }
    // horizontal add of four 32 bit partial sums and return result
    vsum = _mm_add_epi32(vsum, _mm_srli_si128(vsum, 8));
    vsum = _mm_add_epi32(vsum, _mm_srli_si128(vsum, 4));
    sum = _mm_cvtsi128_si32(vsum);
    return sum;
}
#pragma managed(pop) 
```

但得到同样的错误。

任何机构都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T06:57:31.800

您不能在编译为 IL 的代码中使用内联汇编或 SSE 内在函数。解决方法很简单，将它写在一个单独的辅助函数中，用#pragma managed 括起来，如下所示：

```
#pragma managed(push, off)
void func foo(args...)
{
   // It's fine here
   //...
}
#pragma managed(pop) 
```

并从您的 Form1::sum_array() 方法中调用该函数。

# c# - 找到最佳案例场景 C#

> ID：11009506
> 
> 赞同：0
> 
> 时间：2012-06-13T06:45:07.127
> 
> 标签：c#, .net

我有以下要解决的问题，但我不知道如何解决这个问题：

有相邻的停车场，它们的位置类似于一条直线。每个停车场都有一个分配给它的价值（利润）。您可以根据需要购买任意数量的批次，但它们必须彼此相邻（在一个连续的集合中）。

输入（这是给定的/您将输入的内容）：

手数：9

每个停车场的值：即：-5、0、7、-6、4、3、-5、0、2

表示（为了便于查看）每个框包含每手的利润：

![在此处输入图像描述](../Images/85196f6b3f14bbd037ce0c83471b31b3.png)

输出：应该是：3 6 8 含义：3 - 开始手数 #，6 - 结束手数 #，8 - 总利润 (7 - 6 + 4 + 3)

如果有多个答案，程序应该写出包含最少数量的停车场的答案。如果仍然有多个可能的答案，您的程序可以编写其中任何一个。

请帮忙。提前致谢。

编辑：我得到了它的工作：

```
 /// <summary>
    /// The problem 2.
    /// </summary>
    public class MySuperAwesomeClass
    {
        #region Constants and Fields

        /// <summary>
        /// The seq end.
        /// </summary>
        private static int seqEnd = -1;

        /// <summary>
        /// The seq start.
        /// </summary>
        private static int seqStart;

        #endregion

        // Quadratic maximum contiguous subsequence sum algorithm.
        #region Public Methods and Operators

        /// <summary>
        /// The max sub sum 2.
        /// </summary>
        /// <param name="a">
        /// The a.
        /// </param>
        /// <returns>
        /// The max sub sum 2.
        /// </returns>
        public static int maxSumSub(int[] a)
        {
            int maxSum = 0;

            for (int i = 0; i < a.Length; i++)
            {
                int thisSum = 0;
                for (int j = i; j < a.Length; j++)
                {
                    thisSum += a[j];

                    if (thisSum > maxSum)
                    {
                        maxSum = thisSum;
                        seqStart = i;
                        seqEnd = j;
                    }
                }
            }

            return maxSum;
        }

        #endregion

        #region Methods

        /// <summary>
        /// The main.
        /// </summary>
        private static void Main()
        {
            Console.WriteLine("Enter N:");
            string stringInput = Console.ReadLine();
            int[] a = new int[Convert.ToInt16(stringInput)];

            Console.WriteLine("Enter profit values:");
            for (int i = 0; i < Convert.ToInt16(stringInput); i++)
            {
                string value = Console.ReadLine();
                a[i] = Convert.ToInt16(value);
            }

            int maxSum = maxSumSub(a);
            Console.WriteLine(string.Format("{0} {1} {2}", seqStart, seqEnd, maxSum));
            Console.ReadKey();
        }

        #endregion
    } 
```

除了我不知道这部分：如果有多个答案，程序应该写一个包含最少数量的停车场的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:05:56.930

这是经典的**最大子集和问题**。没有代码，因为这是家庭作业，但这是一般解决方案。如果您仍然卡住，我相信您可以通过搜索标题在线找到代码。

1.  为最大子集创建第一个/最后一个索引变量。这些将保留我们答案的停车位。在您的示例中分别为 3 和 6。
2.  为最大子集的总和创建一个 sum 变量。这将包含我们答案的总和。8 在你的例子中。
3.  制作另一组第一/最后/总和变量，我们将成为我们的“当前”变量。
4.  从停车位的开头开始。将当前第一个和当前最后一个变量放在开头并更新总和。
5.  现在，您将通过移动当前最后一个变量并更新总和来遍历每个停车位。
6.  如果当前总和大于 max-so-far 总和，则将所有当前变量保存到 max-so-far 变量中。
7.  如果在任何时候我们的电流总和下降到负数或变为零，我们的子集就不再帮助我们获得最大值，所以通过将电流首先移动到电流最后一个位置并将电流总和重置为零来重新启动它。
8.  一旦我们到达终点，返回 max-so-far 变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:08:27.863

这里有一个提示，你可以让算法更高效：看看每一端的总数是如何加起来的。例如，根据您提供的内容，从左侧算起总数为 -5、-5、2、-4、0、3、-2、-2、0，从右侧算起总数为 2、2 , -3, 0, 4, -2, 5, 5, 0。

# objective-c - 如何将视频路径转换为nsdata？

> ID：11009508
> 
> 赞同：4
> 
> 时间：2012-06-13T06:45:12.087
> 
> 标签：objective-c, ipad, video

我在我的 ipad 应用程序中录制视频，然后获取保存在我的 ipad 中的路径

```
 /private/var/mobile/Applications/F1F1F9A4-41FB-4E80-9070-4A9EC8BA8823/tmp/capture-T0x24ae10.tmp.ND2S7e/capturedvideo.MOV 
```

我也发现这个文件是我的组织者。现在我想将此文件路径转换为 ​​NSData。我怎么做？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-13T06:48:07.700

用这个：

```
NSData *videoData = [NSData dataWithContentsOfFile:strURL]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-11T09:59:40.790

```
NSString *filPath=@"file_url";
NSData *dt=[NSData dataWithContentsOfURL:[NSURL URLWithString:filePath]]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-15T12:25:29.437

我也有同样的问题

```
NSString *filePath1 = [[NSBundle mainBundle] pathForResource:@"Waterfall_h264" ofType:@"mov"];
NSError *error = nil;
NSData *data1 = [NSData dataWithContentsOfFile:filePath1 options:nil error:&error]; 
```

我也认为您可能不会将视频文件包含到链接库中。转到：**目标部分**->**构建阶段选项卡**->**编译源**->**单击 + 按钮**->**选择您的视频文件**-> **clcik on add button**。

现在再试一次...希望这会有用...:)

# php - 从源中检索 JSON 文件并将其放入目录并使用 PHP 定期更新

> ID：11009512
> 
> 赞同：1
> 
> 时间：2012-06-13T06:45:20.043
> 
> 标签：php, json, wordpress, api, caching

我正在使用 WordPress，并使用来自我的网站内容源的 JSON 格式的 API 数据，例如：[http ://api.source.com/data.json](http://api.source.com/data.json)

但是加载我的网站需要更长的时间，因为每次加载的页面总是会从源代码读取文件，问题是如何将 JSON 文件存储到 WordPress 目录并每 12 小时自动更新一次？

抱歉英语不好，但希望你明白我的意思，请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:49:55.953

有多种选择。

1.  使用 memcache -> 将检索到的 json 存储在 memcache 中，并在每 12 小时后过期。这将是最快的查找。 [http://www.php.net/manual/en/memcache.examples-overview.php](http://www.php.net/manual/en/memcache.examples-overview.php)

2.  数据库 -> 使用键将检索到的 json 存储在数据库表中，您可以根据 json 的大小使用 varchar 、 text 或 blob 数据类型。

3.  写入文件->将json写入任何具有写入权限的目录中的文本文件，然后从那里读取。 [http://php.net/manual/en/function.file-put-contents.php](http://php.net/manual/en/function.file-put-contents.php)

# javascript - Jquery UI - 在点击的 div 上动态绑定 keypress 事件

> ID：11009513
> 
> 赞同：1
> 
> 时间：2012-06-13T06:45:20.380
> 
> 标签：javascript, jquery, jquery-ui, keyboard-events, jquery-resizable

[jsFiddle 演示链接](http://jsfiddle.net/e2yfC/24/)

嗨，伙计们，当我单击上面演示中给出的 div 层时，我想绑定 keypress 事件处理程序。该功能是使用删除键删除选定的图层。

但是当我按下删除键时，按键处理程序不会触发。请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T06:47:57.633

删除“ `()`”：

```
$this.on("keypress", keyAction); 
```

您正在添加`undefined`as handler:在您的情况下`$this.on("keypress", keyAction())`等于`$this.on("keypress", undefined)`，因为`keyAction`函数不返回任何内容。

此外，您`div`必须是可聚焦的，以便接收键盘事件。出于这个原因，您需要添加`tabindex`它：

```
<div class="dragClass" tabindex="0"> 
```

然后`selectAction`将焦点放在您的 div 以接收按键事件：

```
$this.focus(); 
```

这是[**演示**](http://jsfiddle.net/A7YbJ/)

有关在静态元素上添加 s 的更多信息，`keyboard event`例如`div`，请查看[此处](http://www.w3.org/WAI/GL/WCAG20/WD-WCAG20-TECHS/SCR29.html)：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T06:50:05.853

```
Use this code it execute for delete key        
             $("#ParentDIV").keyDown(function (e) {
              if (e.keyCode == 46) {
               // Do it
              }
             }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T07:00:40.130

为了让元素接收按键事件，它需要焦点。一种方法是添加一个tabindex。如果您单击您的元素，然后单击下面小提琴中的键盘按钮，您将获得您的事件。我稍微剥掉了小提琴并移除了干扰焦点的可拖动对象。

[http://jsfiddle.net/e2yfC/27/](http://jsfiddle.net/e2yfC/27/)

# c# - MVC 3 Code first First，内置成员身份验证

> ID：11009514
> 
> 赞同：1
> 
> 时间：2012-06-13T06:45:24.937
> 
> 标签：c#, .net, asp.net-mvc-3, code-first

我想使用代码优先 EF 4.1 来构建我的应用程序。我正在使用 MVC 3。我同时想使用会员身份验证。我看到的问题主要是如何对工具生成的会员用户表和我通过代码创建的模型执行外键。

例如：

dbo.aspnet_Users 有一个 guid 作为 PK 我想在我的用户表 (dbo.Users) 中创建一个与我的 PK 具有相同 GUID 的用户。

有没有一种方法可以在不被匹配数据暗示的情况下形成这种关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:00:10.810

我不确定您要达到的目标。如果您想将自定义数据与用户相关联，您可以使用配置文件。您喜欢“复制”某些用户信息是否有特殊原因？

# java - 无法加载jsp页面

> ID：11009518
> 
> 赞同：1
> 
> 时间：2012-06-13T06:45:55.327
> 
> 标签：java, jsf

**我正在尝试创建一个简单的 JSF 项目，但 index.jsp 页面未打开并引发异常**

> javax.faces.FacesException：在第 5 行处理 JSP 页面 /index.jsp 时发生异常
> 
> 2: <%@ taglib prefix="f" uri="http://java.sun.com/jsf/core"%> 3: <%@ taglib prefix="h" uri="http://java. sun.com/jsf/html"%> 4:5:6:7:8:
> 
> **堆栈跟踪：**
> 
> > org.apache.myfaces.context.servlet.ServletExternalContextImpl.dispatch(ServletExternalContextImpl.java:347) org.apache.myfaces.application.jsp.JspViewHandlerImpl.buildView(JspViewHandlerImpl.java:486) org.apache.myfaces.application.jsp。 JspViewHandlerImpl.renderView(JspViewHandlerImpl.java:337)
> 
> org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:41)
> 
> org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:140) at javax.faces.webapp.FacesServlet.service(FacesServlet.java:187) at org.apache.myfaces.webapp.MyFacesServlet.service(MyFacesServlet.爪哇：103）
> 
> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) 在 org.jboss.web.tomcat.filters.ReplyHeaderFilter 的 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)。 doFilter(ReplyHeaderFilter.java:96) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) at org.apache .catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve .java:190) 在 org.jboss.web.tomcat.security.JaccContextValve。在 org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70) 处调用(JaccContextValve.java:92)在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) 在 org.jboss.web.tomcat.service.jca .CachedConnectionValve.invoke(CachedConnectionValve.java:158) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330) 在org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:828) 在 org.apache.coyote.http11。Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:601) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447) at java.lang.Thread.run(Unknown Source) 原因： org.apache.jasper.JasperException：在第 5 行处理 JSP 页面 /index.jsp 时发生异常
> 
> 2: <%@ taglib prefix="f" uri="http://java.sun.com/jsf/core"%> 3: <%@ taglib prefix="h" uri="http://java. sun.com/jsf/html"%> 4:5:6:7:8:
> 
> Stacktrace：在 org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:411) 在 org.apache.jasper.servlet.JspServlet 的 org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:498) .serviceJspFile(JspServlet.java:322) 在 org.apache.jasper.servlet.JspServlet.service(JspServlet.java:249) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:803) 在 org.apache。 catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java: 638）在 org.apache.catalina.core 的 org.apache.catalina.core.ApplicationDispatcher.processRequest（ApplicationDispatcher.java:444）。ApplicationDispatcher.doForward(ApplicationDispatcher.java:382) at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:310) at org.apache.myfaces.context.servlet.ServletExternalContextImpl.dispatch(ServletExternalContextImpl.java:341) ... 26 更多原因：java.lang.RuntimeException：在 javax.faces.webapp.UIComponentClassicTagBase.setJspId(UIComponentClassicTagBase.java:1672) 的 javax.faces.webapp.UIComponentClassicTagBase.getFacesContext(UIComponentClassicTagBase.java:1855) 找不到 FacesContext ) 在 org.apache.jsp.index_jsp._jspx_meth_f_005fview_005f0(index_jsp.java:87) 在 org.apache.jsp.index_jsp._jspService(index_jsp.java:64) 在 org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase. java:70) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:803) 在 org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369) ... 36 更多

**我认为这是一个服务器错误，但是当我尝试从浏览器访问服务器时。它工作正常。我已经检查了 JSF 库，它也包含在 jboss 服务器下，可以请帮助我...**

**索引.jsp**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="f"  uri="http://java.sun.com/jsf/core"%>
<%@ taglib prefix="h"  uri="http://java.sun.com/jsf/html"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<f:view>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<h:outputLabel value="i am here!!!!!!"></h:outputLabel>
</body>
</html>
</f:view> 
```

由于信誉级别，我无法上传文件夹结构的图像..

**lib 文件夹不包含任何库，而是位于 javaResources:src 文件夹内的库中。**

# css - 将容器中的多个选择器定位为新的不同样式

> ID：11009519
> 
> 赞同：1
> 
> 时间：2012-06-13T06:45:58.247
> 
> 标签：css, css-selectors

假设我们有几个元素（`p`, `h4`, `h5`, `h6`, `label`）包含在`div.container`. 所有元素都已在容器外设置样式

```
p, h4, h5, h6, label{color: #fff;} 
```

但是当它们包含在那个特殊的容器中时，我们想为它们设置新的样式，所以我通常会写：

```
div.container p, div.container h4, 
div.container h5, div.container h6, 
div.container label{color: #ddd;} 
```

一切都很好，只是这太长了，太编码了。有没有办法（更短的编码）来定位所有这些元素？像：

```
div.container [p, h4, h5, h6, label] {color: #ddd;} 
```

**注意：**我不想使用预处理器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:54:09.410

不是在纯 CSS 中，而是在 SCSS ( [Sass](http://sass-lang.com/) ) 中：

```
div.container {
  p, h4, h5, h6, label {color: #ddd;}
} 
```

演示：http: [//jsfiddle.net/Guffa/rq7hx/](http://jsfiddle.net/Guffa/rq7hx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:30:40.300

没有预处理器就没有绝对的方法可以做到这一点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-13T07:01:37.720

如果没有有关您的标记的更多信息，我只能说：

您可以删除标签选择器（这是不必要的。）：

```
.container p,
.container h4, 
.container h5,
.container h6, 
.container label {
    color: #ddd;
} 
```

**另一方面**，您可以使用 CSS 的级联原则并添加所有、 、 和`p`相同`h4`的`h5`类（例如），然后您可以像这样堆叠 CSS：`h6``label``.example`

```
.example { color: #fff; }
.container .example { color: #ddd; } 
```

# android - PropertyInfo.getName() ...等很多方法都无法解析

> ID：11009522
> 
> 赞同：1
> 
> 时间：2012-06-13T06:46:30.097
> 
> 标签：android, web-services, ksoap2, android-ksoap2

这是我的项目的屏幕截图：

![这是我的项目的截图：](../Images/49673d0e51dc821d299683ccee36391b.png)

隐藏在错误窗口后面的行是：

```
pi.setValue(namePart);
pi.setType(Integer.class); 
```

正如你所看到的，我已经包含了`ksoap-j2se-full-2.1.2.jar`，并且所有的导入都已经到位。仍然`pi.setName("");`（以及它下面的所有）给出分辨率错误！显然，PropertyInfo 类中不存在这样的方法......我已经用谷歌搜索过了，似乎没有其他人在网络或 StackOVerflow 上的任何地方都有任何这样的问题！请帮助我被困在学习 Ksoap 和 Web 服务的起点！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T07:13:55.637

好像您使用的是错误的**ksoap2-j2se**库。您需要使用[`ksoap2-android`](http://code.google.com/p/ksoap2-android/)库才能使其正常工作。

# javascript - 在 D3 Streamgraph 中正确使用 stack.values([accessor])？

> ID：11009524
> 
> 赞同：1
> 
> 时间：2012-06-13T06:46:45.113
> 
> 标签：javascript, layout, d3.js, area, stream-graph

我正在尝试使用值访问器创建一个 D3 流图，其中每层包含额外的数据，如[D3 API 参考](https://github.com/mbostock/d3/wiki/Stack-Layout#wiki-values)和[Stack Overflow 上的这个问题所示](https://stackoverflow.com/questions/10526388/how-to-attach-properties-other-than-x-y-y0-to-a-layer-of-streamgraph-in-d3)。

标题附加得很好，但似乎没有附加值。关于可能出现问题的任何想法？

我是 d3 的新手，所以我确信它很简单。代码如下。

```
var layers = [
  {
    "name": "apples",
    "values": [
      { "x": 0, "y":  91},
      { "x": 1, "y": 290}
    ]
  },
  {  
    "name": "oranges",
    "values": [
      { "x": 0, "y":  9},
      { "x": 1, "y": 49}
    ]
  }
];

var     m = 2; // number of samples per layer
var width = 960,
    height = 500,
    mx = m - 1,
    my = 350;

var stack = d3.layout.stack()
    .offset("wiggle")
    .values(function(d) { return d.values; });

var area = d3.svg.area()
    .x(function(d) { 
        return d.x * width / mx; 
    })
    .y0(function(d) { 
        return height - d.y0 * height / my; 
    })
    .y1(function(d) { 
        return height - (d.y + d.y0) * height / my; 
    });

var vis = d3.select("#chart")
  .append("svg")
    .attr("width", width)
    .attr("height", height);

vis.selectAll("path")
    .data(stack(layers))
  .enter().append("path")
    .attr("d", area)
  .append("title")
    .text(function(d) { return d.name; }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T16:09:39.923

堆栈布局知道您指定的值访问器，但区域生成器不知道。因此，您必须传递`d.values`而不是传递`d`给区域生成器，如下所示：

```
.attr("d", function(d) { return area(d.values); }) 
```

# ember.js - 从存储中删除记录而不引起对 DS.Store#commit 的服务器调用

> ID：11009527
> 
> 赞同：2
> 
> 时间：2012-06-13T06:46:49.163
> 
> 标签：ember.js, ember-data

我正在开发一个推送应用程序，需要在不调用任何操作的情况下从 DS.Store 中删除项目。我可以使用 load() 插入对象，但需要能够在另一个客户端上删除对象后“卸载”它。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-12T01:36:58.123

```
record.unloadRecord(); 
```

这会清除记录上`belongsTo`的`hasMany`关系，然后将记录转换为`deleted.saved`状态，所有这些都无需向服务器发送任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T06:30:51.230

而不是从商店中删除记录，我只需要更改记录状态。

```
record.get('stateManager').goToState('deleted.saved'); 
```

对于 ember-data V ~1.0 使用：

```
record.transitionTo('deleted.saved'); 
```

# entity-framework - 急切加载，包括派生类的导航属性

> ID：11009529
> 
> 赞同：4
> 
> 时间：2012-06-13T06:46:58.507
> 
> 标签：entity-framework, entity-framework-4, ef-code-first

示例类结构

```
class Order
{
    public int Id { get; set; }     
    public DateTime Date { get; set; }

    public List<OrderDetail> Details { get; set; }
}

class OrderDetail
{
    public int Id { get; set; }
    public int Qty { get; set; }

    public Item Item { get; set; }
}

class Item
{
    public int Id { get; set; }
    public string Name { get; set; }
}

class ElectronicItem : Item
{
    public MoreDetail Detail { get; set; }
}

class MoreDetail
{
    public int Id { get; set; }
    public string SomeData { get; set; }
} 
```

为了用所有导航属性填充订单对象，我写了

```
context.Orders.Include("Details").Include("Details.Item") 
```

我也想加载 MoreDetail 对象，因此我尝试了

```
context.Orders.Include("Details").Include("Details.Item.Detail") 
```

它没有用。如何加载完整的订单对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:58:31.093

目前这是不可能的，但它是[用户数据语音](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1249289-include-property-of-derived-classes)社区要求的功能，正如您已经找到的那样。[MS Connect](https://connect.microsoft.com/VisualStudio/feedback/details/594289/in-entity-framework-there-should-be-a-way-to-eager-load-include-navigation-properties-of-a-derived-class)上也有相关的错误。

您根本无法急切加载派生类型的导航属性，但您可以使用单独的查询加载它们：

```
var moreDetails = context.MoreDetails; 
```

EF 应该自动修复您的导航属性。如果您在原始查询中对订单使用过滤器，则还必须在更多详细信息查询中应用该过滤器：

```
var moreDetails = cotnext.MoreDetials.Where(m => m.Item.Order ....); 
```

# android - Android - 逗号作为数字键盘上的小数分隔符

> ID：11009533
> 
> 赞同：8
> 
> 时间：2012-06-13T06:47:04.630
> 
> 标签：android, locale, android-softkeyboard, galaxy, comma

我们需要一个用于`EditText`. 键盘应具有基于设备所选区域设置的小数分隔符。我们通过将自定义设置`DigitsKeyListener`为`EditText`

```
public class NumericDigitsKeyListener extends DigitsKeyListener {

    @Override
    protected char[] getAcceptedChars() {

        char[] acceptedCharacters = null;

            acceptedCharacters =  new char[] {
                    '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',
                    new DecimalFormatSymbols(Locale.getDefaultLocale()).getDecimalSeparator()

        return acceptedCharacters;
    }

    /**
     * @see android.text.method.DigitsKeyListener#getInputType()
     */
    public int getInputType() {
        return InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL;
    } 
```

以上似乎适用于大多数设备，但对于三星 Galaxy S-II，软键盘的键盘中没有逗号。设备的 swype 键盘显示逗号，但默认键盘没有。

[我已尝试覆盖此处](https://stackoverflow.com/a/10498873)提到的 DigitsKeyListener

有没有办法可以强制所有设备在数字键盘上使用逗号（如果适用，甚至总是）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:06:57.887

我认为您的代码与使用相同的问题：

android:inputType="numberDecimal" android:digits="0123456789,"

（除了你的代码更通用）

*问题 - 据我了解，当inputType*为*numberDecimal*时，某些键盘不尊重*数字*属性。这是一个[记录在案的错误](http://code.google.com/p/android/issues/detail?id=2626)，我发现避免这种行为的唯一方法是使用*inputType="text"*并设置输入过滤器来限制字符。当然，键盘不适合数字，但找不到更好的解决方案。过滤器将是这样的：

 ***```
mEditText.setFilters(new InputFilter[] { new DecimalInputFilter() });

public class DecimalInputFilter implements InputFilter {

    private static final String ALLOWED_CHARS = "0123456789,";

    @Override
    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
        if (source instanceof SpannableStringBuilder) {
            final SpannableStringBuilder sourceAsSpannableBuilder = (SpannableStringBuilder)source;
            for (int i = end - 1; i >= start; i--) { 
                final char currentChar = source.charAt(i);
                 if (!StringUtils.contains(ALLOWED_CHARS, currentChar)) {    
                     sourceAsSpannableBuilder.delete(i, i+1);
                 }     
            }
            return source;
        } else {
            final StringBuilder filteredStringBuilder = new StringBuilder();
            for (int i = 0; i < end; i++) { 
                final char currentChar = source.charAt(i);
                if (StringUtils.contains(ALLOWED_CHARS, currentChar)) {    
                    filteredStringBuilder.append(currentChar);
                }     
            }
            return filteredStringBuilder.toString();
        }
    }
} 
```***

# c# - Yahoo Contact API Json 反序列化问题

> ID：11009535
> 
> 赞同：0
> 
> 时间：2012-06-13T06:47:11.570
> 
> 标签：c#, .net, json, json.net, yahoo-api

我正在反序列化 yahoo Contacts api 的 json 响应，一切进展顺利，但我在一个字段中遇到问题`fields`，它是一个数组，但在所有元素中`value`都不同，如何处理它。在两个字段中，这是字符串，在其他元素对象中。这是我的示例 json

```
"fields": [
      {
       "created": "2008-12-29T13:47:21Z",
       "updated": "2008-12-29T13:47:21Z",
       "uri": "http://social.yahooapis.com/v1/user/ASASASASASASA/contact/8/email/18",
       "id": "18",
       "type": "email",
       "value": "papi@ymail.com",
       "editedBy": "OWNER"
      },
      {
       "created": "2010-03-30T07:02:04Z",
       "updated": "2011-06-25T05:01:51Z",
       "uri": "http://social.yahooapis.com/v1/user/ASASASASASASA/contact/8/guid/42",
       "id": "42",
       "type": "guid",
       "value": "BMM5JTQVDB7G4EBPO2D5ESE3TI",
       "editedBy": "OWNER",
       "isConnection": "false"
      },
      {
       "created": "2008-12-29T13:47:21Z",
       "updated": "2008-12-29T13:47:21Z",
       "uri": "http://social.yahooapis.com/v1/user/ASASASASASASA/contact/8/name/17",
       "id": "17",
       "type": "name",
       "value": {
        "givenName": "Hitesh",
        "middleName": null,
        "familyName": "Lohar",
        "prefix": null,
        "suffix": null,
        "givenNameSound": null,
        "familyNameSound": null
       },
       "editedBy": "OWNER"
      }
     ] 
```

我为 Field 创建了以下课程

```
public class YahooField
    {
        [JsonProperty("created")]
        public string Created { get; set; }

        [JsonProperty("updated")]
        public string Updated { get; set; }

        [JsonProperty("uri")]
        public string Uri { get; set; }

        [JsonProperty("id")]
        public string Id { get; set; }

        [JsonProperty("type")]
        public string Type { get; set; }

        //here confusion
        //[JsonProperty("value")]
        //public (String or class) Value { get; set; }

        [JsonProperty("editedBy")]
        public string EditedBy { get; set; }

        [JsonProperty("isConnection")]
        public string IsConnection { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:50:58.030

value 属性只是另一个对象。创建一个名为 ValueField 的新类并添加一些属性：

1.  给定的名称
2.  中间名字
3.  姓
4.  字首
5.  后缀
6.  GivenNameSound
7.  姓氏音

并将此类作为属性添加到您的 YahooField 类中

```
public class YahooField
    {
        [JsonProperty("created")]
        public string Created { get; set; }

        [JsonProperty("updated")]
        public string Updated { get; set; }

        [JsonProperty("uri")]
        public string Uri { get; set; }

        [JsonProperty("id")]
        public string Id { get; set; }

        [JsonProperty("type")]
        public string Type { get; set; }

        [JsonProperty("value")]
        public ValueField Value { get; set; }

        [JsonProperty("editedBy")]
        public string EditedBy { get; set; }

        [JsonProperty("isConnection")]
        public string IsConnection { get; set; }
    } 
```

您应该编写自己的合同解析器来检测属性 Value 是否为 String 类型。这样您就可以中断默认行为并实现您自己的逻辑。

只需从 DefaultContractResolver 派生您的 CustomContractResolver 并覆盖您实现所需的虚拟方法。

```
public class CustomContractResolver: DefaultContractResolver
{
//override the methods you need.
} 
```

您可以通过执行以下操作来设置自定义合同解析器：

```
 JsonConvert.SerializeObject(
    product,
    Formatting.Indented,
    new JsonSerializerSettings { ContractResolver = new CustomContractResolver() }
  ); 
```

# android - 如何在sqlite db中存储自定义arraylist并检索它？

> ID：11009536
> 
> 赞同：0
> 
> 时间：2012-06-13T06:47:19.980
> 
> 标签：android, sqlite

```
class A{
String str1="";
String str2="";
ArrayList<B> barr=new ArrayList<B>();

}

class B{
int a;
double d;
}

**ArrayList<A> aArr=new ArrayList<A>();** 
```

我想将 aArr 列表存储在 sqlite db 的列中并检索它。

我想我可以将它转换为 JSON 字符串。怎么做？

任何人帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:59:49.983

如果您已经在使用[Gson](http://code.google.com/p/google-gson/)或计划使用它，那么我建议您将列表对象转换为*Json 字符串*，然后将其存储`Text`在 SQLite 中的类型列中。使用相同的库从 json 字符串重构您的对象也非常容易。这只是我的一个建议，因为我个人喜欢处理字符串而不是玩字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:09:08.253

对此没有内置功能，尤其是在仅将 arraylist 存储在 1 列中时。您可以将 A 类转换为字符串，并按特定字符分隔数据，但这不是正确的方法。

您需要一个新的数据库系统，如下所示：

**你的桌子：**

您的专栏 | 其他一些专栏 | 和另一个专栏 | ArraylistA_id

**Arraylist一张表：**

ArraylistA_id | 字符串1 | 字符串2 | ArraylistB_id

**ArraylistB 表：**

ArraylistB_id | 整数 | 双倍的

在这个数据库系统中，列“ArraylistA id”和“ArraylistB id”是指向另一个表中其他行的指针。因此，例如，当您的 arraylistA 存在于以下情况时：

数组列表 A{

{"TEST", "TEST", ArrayListB{{1,1.0}, {2, 2.0}, {3, 3.0}}}

{"HELLO", "HELLO", ArrayListB{{9,9.0}, {8, 8.0}, {7, 7.0}}}

};

比 sql 数据库中的记录如下：

**你的桌子：**

```
Your Column | Some other Column | and another Column | ArraylistA_id

                                                           1 
```

**Arraylist一张表：**

```
ArraylistA_id | String1 | String2 | ArraylistB_id

   1           TEST      TEST          1

   2           HELLO     HELLO         2 
```

**ArraylistB 表：**

```
ArraylistB_id | int | double

  1            1      1.0

  1            2      2.0

  1            3      3.0

  2            9      9.0

  2            8      8.0

  2            7      7.0 
```

完整故事的要点是，您永远不应该将这样的数组列表存储在一列中，在执行此类操作之前，您需要一个适当的数据库系统。这是我在火车上的平板电脑上做的，当我到学校时，我会清理一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T06:26:23.863

你可以试试这个方法。

```
public long insertString(String newString) 
  {
    ContentValues newStringValue = new ContentValues();

    newStringValue.put(KEY_STRING, newString);

    return db.insert(DATABASE_TABLE, null, newStringValue);
  } 
```

# jakarta-ee - 删除后的 SFSB 调用

> ID：11009539
> 
> 赞同：0
> 
> 时间：2012-06-13T06:47:56.527
> 
> 标签：jakarta-ee, java-ee-6, cdi, jboss7.x, jboss-weld

我正在开发一个具有多个 SFSB 的应用程序，它们都实现了相同的接口。

为了在运行时决定使用哪个具体实现，我有以下工厂方法：

```
@SuppressWarnings("rawtypes")
@Inject @Any Instance<SFSBInterface> sfsbSource;

public <T> SFSBInterface<T> initBeanForm(Class<T> clazz, Class<? extends SFSBInterface<T>> sfsbClass, Annotation... qualifiers) {
    SFSBInterface<T> sfsb = sfsbSource.select(sfsbClass, qualifiers).get();
    return sfsb;
} 
```

每个具体的实现都实现了一个@Remove 注释方法。现在我有一个案例，我想删除这个 sfsb 并在调用这个方法时获得一个新的实例。

我正在调用 remove 方法并删除对该对象的所有引用，但该实例一直在内存中。当我现在请求这个类的一个实例时，我得到了相同的实例，我之前为此调用了 remove。

我的问题是：

1.  如果我使用我调用 remove 方法的这个实例，我会遇到问题吗？
2.  删除的实例保留在内存中是否正常？
3.  我怎样才能有效地删除这个实例？
4.  我怎样才能获得我的班级的一个真正的新实例？

亲切的问候克里斯蒂安

顺便说一句：我正在使用 JBoss 7.1.1 和 Weld

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:17:11.480

> 当我现在请求这个类的一个实例时，我得到了相同的实例，我之前为此调用了 remove。

我会说这种行为超出了规范，因此高度依赖于供应商。新 bean 可以从旧实例池中获取（这似乎是这里的情况）或新创建的。这个策略可以（理论上）随着你的应用服务器的新版本而改变，甚至更糟：从一个环境到另一个环境。

一个核心问题是您如何确定它是“新实例”？

我认为，如果你能忍受它，这并不容易回答。

下一步应该做的是检查新 bean 的生命周期钩子。如果一切都被调用并且所有依赖项都被正确注入，那么恕我直言，它看起来相当不错。

否则请随时更新问题:)

# php - 从网页中获取屏幕截图 url

> ID：11009542
> 
> 赞同：1
> 
> 时间：2012-06-13T06:48:03.530
> 
> 标签：php

我正在做一个应用程序，我想在其中获取谷歌应用程序的屏幕截图 url。在这里我可以抓取特定应用程序的网页，并且在该页面中，屏幕截图 url 位于 div 内（...）。这个 div还包含标题、宽度等。但我只想获取屏幕截图 url。如何获取屏幕截图 url。我的应用程序现在显示以下数组。

```
Array ( 
[0] => src="https://lh5.ggpht.comV07YvaK8lOPyiXOQmC4xTce7VskJzhavKOkEhoMw4KWnFNfOBB8ruIiVmRKhJ6nq8aE=h230" [1] => class="doc-screenshot-img 
[2] => lightbox 
[3] => goog-inline-block"data-baseUrl="https://lh5.ggpht.com/V07YvaK8lOPyiXOQmC4xTce7VskJzhavKOkEhoMw4KWnFNfOBB8ruIiVmRKhJ6nq8aE" 
[4] => title="Angry 
[5] => Birds 
[6] => Space" 
[7] => itemprop="screenshots" 
[8] => />) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:56:00.047

不知道你在这里究竟想要什么。

尝试（jQuery）

```
// Cycle through all screenshots
$('.doc-screenshot-img')​.each(function() {
    // Get the URL to the screenshot
    $(this).attr('src');             
});​ 
```

# asp.net - 安装 BizTalk 适配器包后出错

> ID：11009547
> 
> 赞同：2
> 
> 时间：2012-06-13T06:48:15.550
> 
> 标签：asp.net, biztalk

在 BizTalk 研讨会期间，我安装了 Microsoft BizTalk Adapter Pack 和 Microsoft BizTalk Adapter Pack (x64)。

第二天，当我尝试在本地调试一个 ASP.NET Web 窗体站点时，我收到了一个服务器错误：

```
Unable to load one or more of the requested types. The following information may be a subset of the Type/LoaderException information present - inspect with debugger for complete view.
Check assemblies [Microsoft.Adapters.SAP, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35] and/or types [Microsoft.Adapters.AdapterUtilities.AdapterHelper,
Microsoft.Adapters.AdapterUtilities.FileNameHintHelper,
Microsoft.Adapters.AdapterUtilities.TimeoutHelper,
Microsoft.Adapters.AdapterUtilities.AdapterMessage,
Microsoft.Adapters.AdapterUtilities.AdapterBodyWriter,
Microsoft.Adapters.AdapterUtilities.CommonAdapter,
Microsoft.Adapters.AdapterUtilities.CommonBinding,
Microsoft.Adapters.AdapterUtilities.CommonStandardBindingElement,
Microsoft.Adapters.Internal.LayeredChannelBindingElement.LayeredAsyncDelegateData,
Microsoft.Adapters.Internal.LayeredChannelBindingElement.LayeredAsyncResultSignalFinishedDelegate,
Microsoft.Adapters.Internal.LayeredChannelBindingElement.LayeredAsyncResult,
Microsoft.Adapters.Internal.LayeredChannelBindingElement.ILayeredOutboundChannelHandler,
Microsoft.Adapters.Internal.LayeredChannelBindingElement.ILayeredInboundChannelHandler,
Microsoft.Adapters.Internal.LayeredChannelBindingElement.LayeredBindingElement,
Microsoft.Adapters.Internal.LayeredChannelBindingElement.LayeredChannelBehaviour,
Microsoft.Adapters.Internal.LayeredChannelBindingElement.StaticContext`1,
Microsoft.Adapters.Internal.LayeredChannelBindingElement.LayeredChannelFactory`1,
Microsoft.Adapters.Internal.LayeredChannelBindingElement.LayeredChannelFactory`1+OnOpenDelegate,
Microsoft.Adapters.Internal.LayeredChannelBindingElement.LayeredChannelFactory`1+OnCloseDelegate,
Microsoft.Adapters.Internal.LayeredChannelBindingElement.TChannelPlusUserData`1]. Information from LoaderExceptions property [The specified module could not be found. (Exception from HRESULT: 0x8007007E),
The specified module could not be found. (Exception from HRESULT: 0x8007007E),
The specified module could not be found. (Exception from HRESULT: 0x8007007E)]. 
```

有没有人遇到过同样的错误并设法摆脱它？

问题是我要调试的站点没有使用任何连接到 BizTalk 的东西。可以这么说，它刚刚停止工作。

任何帮助表示赞赏。谢谢！

//马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:06:28.930

运行 BizTalk 安装程序并卸载所有不必要的适配器（x86 和 x64）。

就我而言，我在卸载以下内容时保留了 Microsoft SQL Server 的适配器：Oracle Database、Oracle E-Business Suite、mySAP Business Suite。

# stored-procedures - SQL Server存储过程，在CASE子句内的Else语句中返回多个值

> ID：11009549
> 
> 赞同：1
> 
> 时间：2012-06-13T06:48:31.143
> 
> 标签：stored-procedures, in-clause

我想在 where 子句中使用 CASE 和 IN 子句

*   当 User Status = 1 时，CASE 应该返回 1
*   当 User Status = 2 时，CASE 应该返回 2
*   当 User Status = 3 时，CASE 应该返回 3
*   当 User.Status = NULL 时，它应该显示所有状态为 1、2 和 3 的用户

但是下面的查询引发了语法错误。

询问：

```
SELECT *
FROM User
where isInternalUser = 0 and DeleteMark <> 1 and
User.Status IN 
(
   CASE @UserStatus          // case for UserStatus
       WHEN 0 THEN 0
       WHEN 1 THEN 1
       WHEN 2 THEN 2
       ELSE (0,1,2)           
    END                      
) 
```

谁能帮帮我..

谢谢，阿尼什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:14:27.417

尝试不使用该`CASE`语句，但检查是否`@UserStatus IS NULL`：

```
SELECT *
FROM User
WHERE isInternalUser = 0 AND DeleteMark <> 1 AND (
    (@UserStatus IS NOT NULL AND Status = @UserStatus)
    OR (@UserStatus IS NULL AND Status IN (0, 1, 2))
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T06:51:00.860

```
User.Status IN 
(
    SELECT s FROM (
        SELECT 1 s union SELECT 2 s union SELECT 3 s
    ) a
    WHERE @UserStatus is null or @UserStatus = s
) 
```

# java - Jasper Reports：根据字段值动态显示图像

> ID：11009550
> 
> 赞同：1
> 
> 时间：2012-06-13T06:48:34.653
> 
> 标签：java, jasper-reports, ireport

我正在使用 Jasper Reports 和 iReport 来生成我的应用程序的报告。我需要根据数据库上的查询在报告中显示图像。图像是平面图，内部有其他字段表示测量值等。

IE 有两个图像：IMAGE1 和 IMAGE2 链接到 Field_ONE 和 Field_TWO。

*   如果 Field_ONE 是 != null 那么我想在文档中显示 IMAGE1 和图像内的字段；

*   如果 Field_TWO 是 != null 并且 Field_ONE 等于 null 那么我想在之前显示 IMAGE1 的地方显示 IMAGE2

*   如果 Field_TWO 是 != null 和 Field_ONE != null 那么我想并排显示 IMAGE1 和 IMAGE2 。

请注意，我可能有 5 或 6 张图像，因此如果不使用标签在它们之间留下空格，就很难涵盖所有可能性。

简而言之：我需要类似 Android 中的布局，我可以在其中根据字段动态添加计划，并按照添加计划的顺序生成图像及其相关字段。

希望能帮到你，谢谢！

注意：根据报告的结果，我可以拥有多个相同类型的图像，因此几乎不可能用图层覆盖它

![Field_Two 仅](../Images/a0ca545bb4a416419cf4a1f4742591ae.png)

![第一场和第二场](../Images/57034410630b4f61e52ea7a5f8daed34.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T07:04:28.827

**图层（静态）解决方案**

1.  将问题分解为案例。例如，案例 1 显示图像 1，案例 2 显示图像 2 和 3，案例 3 显示图像 4 等等......
2.  对于 i 到 n（对于 n 个案例）
    *   为案例 i 创建所有元素。
    *   添加一个新层，第 i 层。如果“图层”窗口被隐藏，请转到“窗口”>“图层”。
    *   Select the elements added, right click and `Send to layer`. Choose layer i.
    *   Right click on the layer in the Layers window and update the Print When Expression. For example, `$F{Field_ONE} != null`
    *   Repeat. FYI, you can click on the eye on the layer (in the Layers window) to hide the applicable elements to hide the clutter.
3.  Done, each design you made for each case will only appear when the Layer's print when expression yields true.

**Subreport (dynamic) Solution**

1.  Create a report, lets call it subreport.
    *   Set the width and height of the page to be the height and width of your image section for a given record.
    *   Set the all of the page margins to 0
    *   Change the column of the report to the number of images you'd like to have in a single row.
    *   Change the print order to 'Horizontal'
2.  Add N parameters for the N field that needs to be associated with an image.
3.  Remove all the bands in the page except for the detail band.
4.  Write a dummy query that will return an image name depending on whether a given field is null or not. For example, `select 'Ascent.jpg' as image from dual where $P{FIELD_1} is not null`. You need to do this for each field and `union all` the select statements.
5.  In the detail section, add an Image element and set the value to be the path to your picture using the `image` field from the query above. For example, `"C:/WINDOWS/Web/Wallpaper/"+$F{IMAGE}`.
6.  Go to your original report and add the subreport to your detail section.
    *   Link the fields in the original report to the parameters, created in #2, in the subreport.

在我测试它之前，我不想发布这个解决方案。如果有不清楚的地方，我可以发布我的样本，它有很多行。您需要子报表的原因是因为您的主报表有 1 列并且垂直填充，但您需要图像在多列中水平填充。对于每个不为空的字段，子报表查询将按语句顺序返回一条记录。然后将在列中填充记录。

![生成报告示例，使用 WinXP 壁纸作为图像](../Images/ec4be809cac2476c446dae8354989bd9.png)

# java - @JoinTable 使用导入键而不是主键

> ID：11009552
> 
> 赞同：2
> 
> 时间：2012-06-13T06:49:16.983
> 
> 标签：java, hibernate, jpa, annotations, jointable

使用 JPA/Hibernate 3.6/DB2。

我有以下异常： 原因：org.hibernate.AnnotationException：SecondaryTable JoinColumn cannot reference a non primary key

造成的：

```
public class XRequest {
  @ManyToOne
  @JoinTable(
    name = "RequestBatch",
    joinColumns = @JoinColumn(name = "requestBatchID", referencedColumnName="requestBatchID"),
    inverseJoinColumns = @JoinColumn(name = "requestVersionID")
  )
  private Requestversion requestversion;
} 
```

requestBatchID 不是主键，而是从 RequestBatch 表中导入的键（在那里，它确实是主键）。为什么 JoinTable 必须使用主键？我的意思是，我不是刚刚定义这是一个多对一关联吗？为什么它必须是主键？

指定：这是表格的样子。

```
XRequest (
requestId int (primary)
requestBatchId int (imported key from RequestBatch)
)

RequestBatch (
requestBatchId int (primary)
requestVersionId int 
)

RequestVersion (
requestVersionId int (primary)
) 
```

想要的结果是 Hibernate 为我构建的这个 SQL 查询：

```
select xr, rv 
from XRequest xr
left outer join RequestBatch rb on rb.requestBatchId = xr.requestBatchId 
inner join RequestVersion rv on rb.requestVersionId = rv.requestVersionId 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:09:05.547

如果您阅读 @JoinTable 上的[JPA 文档](http://www.objectdb.com/api/java/jpa/JoinTable)，您将看到有关[joinColumns](http://www.objectdb.com/api/java/jpa/JoinTable/joinColumns)和[inverseJoinColumns](http://www.objectdb.com/api/java/jpa/JoinTable/inverseJoinColumns)的描述：

> 连接表的外键列引用实体的主表...

我想这足以理解约束。

# php - 获取同名输入的值

> ID：11009554
> 
> 赞同：0
> 
> 时间：2012-06-13T06:49:22.177
> 
> 标签：php

好的，我的任务是编写一个简单的 php 票务系统。我不知道如何从称为年龄的输入中获取所有值

我的代码看起来像这样，我真的不知道从这里去哪里

```
<form id="form" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
        <fieldset>
            <label for="number">Ticket count </label>
            <input type="number" name="number" />
            <input id="submit" type="submit" value="Set ages" class="submit"/>

            <?php
                $numberOfTickets = $_POST['number'];
                for($i=1;$i <=$numberOfTickets;$i++){
                    echo "<select class='ages' name='ages'>";
                    echo "<option value='adult'>18 år och uppåt</option>";
                    echo "<option value='youth'>13 – 18 år</option>";
                    echo "<option value='child'>7 – 12 år</option>";
                    echo "<option value='baby'>under 7  år</option>";
                    echo "</select>";
                }
            ?>

        <input class="submit" type="submit" name="submit" value="Beställ biljett" />
        </fieldset>
    </form>
    </div><!--content-->
    <?php
        class Ticket
        {           
          public function price($age)
          {
            return $price;
          }
          public function ages($ages)
          {
                foreach($ages as $f)
                {
                    echo "$f</br>";
                }
          }

        }
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T06:58:22.520

由于 <select> 在循环内，我假设有多个名为“ages”的选择。如果是这种情况，请执行以下操作：

```
echo "<select class='ages' name='ages[]'>"; 
```

要获取 PHP 中的值，请使用以下命令：

```
$_POST['ages'] 
```

那将是一个数组。使用 for、foreach、implode 或将数组转换回文本所需的任何内容。

如果这不是你的意思，请解释更多。

# android - SQLite 按字段排序

> ID：11009556
> 
> 赞同：0
> 
> 时间：2012-06-13T06:49:27.810
> 
> 标签：android, sqlite

我是 SQLite 的新手，我不知道如何按字段排序。我搜索使用“ORDER BY”，但我做得不好。我有一个类来实现 SQLite 函数，如下所示：

```
public class PLSQLiteOpenHelper extends SQLiteOpenHelper{
public String TableNames[];
public String FieldNames[][];
public String FieldTypes[][];
public static String NO_CREATE_TABLES = "no tables";
private String message = "";

public PLSQLiteOpenHelper(Context context, String name, CursorFactory factory, int version, String tableNames[], String fieldNames[][], String fieldTypes[][]) {
    super(context, name, factory, version);
    TableNames = tableNames;
    FieldNames = fieldNames;
    FieldTypes = fieldTypes;
}

@Override
public void onCreate(SQLiteDatabase db) {
    if(TableNames == null){
        message = NO_CREATE_TABLES;
        return;
    }

    for(int i = 0; i < TableNames.length; i++){
        String sql = "CREATE TABLE " + TableNames[i] + "(";
        for(int j = 0; j < FieldNames[i].length; j++)
            sql += FieldNames[i][j] + " " + FieldTypes[i][j] + ",";
        sql = sql.substring(0, sql.length() - 1);
        sql += ")";
        db.execSQL(sql);
    }
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    for(int i = 0; i < TableNames[i].length(); i++){
        String sql = "DROP TABLE IF EXISTS " + TableNames[i];
        db.execSQL(sql);
    }
    onCreate(db);
}

public void execSQL(String sql) throws java.sql.SQLException{
    SQLiteDatabase db = this.getWritableDatabase();
    db.execSQL(sql);
}

public Cursor select(String table, String[] columns, String selection, String[] selectionArgs, String groupBy, String having, String orderBy){
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.query(table, columns, selection, selectionArgs, groupBy, having, orderBy);
    return cursor;
}

public long insert(String table, String fields[], String values[]){
    SQLiteDatabase db = this.getWritableDatabase();
    ContentValues cv = new ContentValues();
    for(int i = 0; i < fields.length; i++)
        cv.put(fields[i], values[i]);
    return db.insert(table, null, cv);
}

public int sort(String table, String updateFields[], String orderBy){
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.query(table, updateFields, null, null, null, null, orderBy);

    ContentValues cv = new ContentValues();
    int i = 0;
    while(cursor.moveToNext()){
        cv.putNull(updateFields[i]);
        i++;
    }
    return db.update(table, cv, null, null);
}

public int delete(String table, String where, String[] whereValue){
    SQLiteDatabase db = this.getWritableDatabase();
    return db.delete(table, where, whereValue);
}

public int update(String table, String updateFields[], String updateValues[], String where, String[] whereValue){
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues cv = new ContentValues();
    for(int i = 0; i < updateFields.length; i++)
        cv.put(updateFields[i], updateValues[i]);
    return db.update(table, cv, where, whereValue);
}

public String getMessage(){
    return message;
}

@Override
public synchronized void close(){
    super.close();
}
} 
```

我知道我需要一起使用“选择”和“更新”功能，但我不知道如何调用它们以便按字段名称对表格进行排序。任何人都可以通过以下信息告诉我函数调用顺序吗？

```
Table Names: "t_passwordlist"
Field Names: "f_id", "f_service", "f_user", "f_pwd", "f_lanuch"
Field Types: "INTEGER PRIMARY KEY AUTOINCREMENT", "text", "text", "text", "text"
Order By: "f_service" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:15:57.257

创建您的帮助类的对象，然后以这种方式调用该方法。

```
Cursor cursor = pLSQLiteOpenHelper.select("table_name", new String[] { "f_id", "f_service", "f_user", "f_pwd", "f_lanuch" }, null, null, null, null, "f_service"); 
```

希望这可以帮助。

# iphone - 点击后的文本字段笔尖 (IOS5)

> ID：11009557
> 
> 赞同：-1
> 
> 时间：2012-06-13T06:49:29.550
> 
> 标签：iphone, ios, objective-c, ios5, uitextfield

我正在为**iOS 5**开发一个应用程序。

在点击文本字段以添加项目并拉下当前屏幕后，我试图按下笔尖。当我将以下代码附加到按钮时，它可以工作：

`-(IBAction)addView:(id)sender`在修饰

不幸的是 - 当我在 textField 上做类似的事情时，我没有得到相同的结果。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:53:56.103

您可以使用下面的 textField 委托并为功能编写您自己的条件

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField 
```

返回 NO 不显示键盘

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:11:54.577

要在您的水龙头上推送 nib 文件，`UITextFeild`您需要使用 textfield 的委托方法

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField 
```

现在你需要做的是如下推送你的视图：

```
 - (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
    {
         ViewController  *vc = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
        [self.navigationController pushViewController:vc animated:YES];
return  NO;

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T06:54:25.140

使用 TextField 的 Delegate 并设置您的 textfieldDelegate = self：

```
 - (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
 {  
    //Your code to push nib
    return NO 
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T06:54:35.170

您可以使用委托方法：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T09:15:59.463

```
- (void)textViewDidEndEditing:(UITextView *)textView {
         //Push your view here 
} 
```

# google-maps - 谷歌地图和谷歌静态地图的坐标差异

> ID：11009561
> 
> 赞同：1
> 
> 时间：2012-06-13T06:49:41.023
> 
> 标签：google-maps, google-maps-api-3, google-static-maps

我正在编写一个应用程序，用户可以在其中指向 Google Maps 地图中的位置（使用 Google Maps API）。我通过以下方式抢占位置：

```
google.maps.event.addListener( my_map, 'click', function(mouseEvent){

     var position = mouseEvent.latLng;
     //position = 41.57187486787156, 0.609094047546364
}); 
```

然后，在另一个页面中，我使用从用户标记点抓取的坐标使用 Google 静态地图显示具有所有标记位置的图像：

```
<img alt="map image" src="http://maps.googleapis.com/maps/api/staticmap?sensor=false&size=550x380&markers=label:A|41.57187486787156, 0.609094047546364"> 
```

谷歌静态地图将标记显示在稍微向南的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:47:06.163

静态地图的位置精度限制为 6 位小数，标记位置将四舍五入并设置为`41.571875,0.609094`

您还需要对动态地图内的值进行四舍五入，以便在两个地图上获得相同的标记位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:24:00.390

静态的意思是“恒定——永不改变”。动态是“变化的”。您可以对数据库进行动态更改，而无需关闭实例并重新启动以使更改生效。但是，如果您不更新控制文件，那么当您关闭和启动时，动态更改就消失了——它不是永久性的。静态站点适用于那些无法定期更改或更新的站点。动态站点是那些定期更改或更新的站点。

# sql-server - 基于选择更新到同一个表 - 再次和再次

> ID：11009563
> 
> 赞同：3
> 
> 时间：2012-06-13T06:49:50.533
> 
> 标签：sql-server, tsql

在 Microsoft SQL Server 中：

我已经多次看到这个问题，但看不到任何人解决问题：

```
UPDATE theTable t1
SET t1.col2 =
    (SELECT (10 * (col1 + col2))
     FROM theTable t2
     WHERE t1.busRelAccount = t2.busRelAccount
     AND t2.rowName = 'POS'
    )
WHERE t1.busRelAccount = t2.busRelAccount
AND t1.rowName = 'INVENTORY'
; 
```

有没有人在不使用 CURSOR 和循环表格的情况下解决了这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T06:54:21.297

不是 100% 确定您要做什么 - 但很可能，您可以`UPDATE`更简单地编写语句 - 如下所示：

```
UPDATE t1
SET t1.col2 = 10 * (t2.col1 + t2.col2)
FROM theTable t1
INNER JOIN theTable t2 ON t1.busRelAccount = t2.busRelAccount
WHERE 
    t1.rowName = 'INVENTORY'
    AND t2.rowName = 'POS'
; 
```

基本上，您在两个表之间定义一个 JOIN（实际上都是同一个表），然后定义如何`t1`根据来自的列更新列`t2`

# copy - 在 Photoshop 中复制和粘贴会在图像上留下透明边缘

> ID：11009566
> 
> 赞同：0
> 
> 时间：2012-06-13T06:49:59.980
> 
> 标签：copy, photoshop, transparent, paste

我正在剪切图像以在我网站的各个部分使用；页眉、页脚等。当我复制并粘贴到新图层时，它会留下“羽化”边缘。即使我将此设置为零。所有复制和粘贴的图像周围都有 1 像素的边距，当使用 CSS 组装为网页时，所有图像之间都会留下很少的线条。我是一名专业的平面设计师，但我已经退出游戏太久了（整整 2 年）。神救救我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:00:47.627

我不能 100% 确定初始资产（例如页眉和页脚）的来源，所以我有点困惑（有些链接可能很好），但值得检查一些事情以确保。为选取框点击 M 并检查那是羽毛的数量。L 用于套索（远射）并检查它，还要检查任何图层样式。

一个不错的小选择，如果您要导出单个资产，请转到文件 > 脚本 > 将图层导出到文件。从长远来看，这可能会为您节省很多麻烦。

希望这可能会有所帮助...

另外你是如何复制的？它是来自 Photosohop 内部还是您放置图层？你在使用选框工具吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T08:14:25.753

试试看，不要使用裁剪工具..改用选择工具。选择工具提供像素级精度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:51:07.927

除了羽化之外，请尝试在您的选择中关闭抗锯齿。做出选择后，在选择选项工具栏中取消选中“抗锯齿”。

![在此处输入图像描述](../Images/eb5cab20d7c588f5de435e445b25f869.png)

如果设置了此项，photoshop 将尝试将选区的边缘与周围的像素进行平均，以使其更好地“混合”。如果您尝试进行准确的像素级选择，这比无用更糟糕。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-06T21:49:36.213

在 Photoshop CC 中，使用选框工具选择后，右键单击以访问羽化选项。输入 0.1，然后复制粘贴。那应该照顾它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-02T09:36:32.933

我刚遇到这个问题。我剪切并粘贴，然后拖到一个新图像中，该图像创建了一个带有粘贴的新图层。然后我意识到羽化是错误的。我更改了设置，但忘记将活动图层更改回背景图层，所以我正在剪切和粘贴我最初所做的羽化剪切。掌心。

# python - os.fork() 后退出子进程

> ID：11009567
> 
> 赞同：8
> 
> 时间：2012-06-13T06:50:00.580
> 
> 标签：python, fork

之后调用哪个函数退出子进程是正确的`os.fork()`？

`os._exit()` [状态](http://docs.python.org/library/os.html#os._exit)的文档：

> 标准的退出方式是`sys.exit(n)`.
> 
> `_exit()`通常应该只在 . 之后的子进程中使用`fork()`。

它没有说明是否可以使用`sys.exit()`. 所以：

1.  是吗？
2.  这样做有什么潜在的副作用吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T07:52:37.487

[unix 方式](http://www.unixguide.net/unix/programming/1.1.3.shtml)是，如果您是 a 的孩子，`fork`则调用[_exit](http://linux.die.net/man/2/_exit)。[exit](http://linux.die.net/man/3/exit)和之间的主要区别在于`_exit`整理`exit`更多 - 调用`atexit`处理程序，刷新`stdio`等，而`_exit`用户空间中的东西最少，只是让内核关闭其所有文件等。

这非常直接地转化为 python 世界，`sys.exit`只需要做什么`exit`和做更多的 python 解释器关闭，`os._exit`尽可能少的地方。

如果你是一个孩子`fork`并且你打电话`exit`而不是`_exit`那么你最终可能会调用退出处理程序，当它退出导致未定义的行为时，父级将再次调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:11:18.040

`os._exit(n)`您没有引用的部分文档是

> 以状态 n 退出进程，不调用清理处理程序、刷新 stdio 缓冲区等。

所以，我是如何阅读这篇文章的，`os._exit()`只要你共享文件处理程序，你就应该使用（这样它们就会被另一个进程关闭（），并且你自己负责刷新缓冲区（如果它对你的情况很重要）。没有**共享**资源（比如在“文件”中）——没关系。

因此，如果您的子进程仅用于计算，并且提供原始数据（而不是资源处理程序），那么使用`exit()`.

# c# - 什么是 C# 中等效的 VB 语句短语“Chr(0)”？

> ID：11009568
> 
> 赞同：9
> 
> 时间：2012-06-13T06:50:01.173
> 
> 标签：c#, vb6, vb6-migration

什么是`Chr(0)`C# 中等效的 VB 语句表达式？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-13T06:53:20.507

我相信的等价物是`'\0'`

我删除了评论，因为我认为在帖子中更新更合适:)

```
sValue = vValue + Chr(0) 'As mentioned in your comment 
```

可以写成

```
sValue += "\0"; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-13T06:57:41.787

您可以使用`(char)0`. 或者`'\0'`，当然。如果要调用方法，可以使用`Convert.ToChar(0)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T06:57:34.173

等效为 (char)0 。如果您正在寻找转义序列和其他字符，您可以使用 \n ，同样

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-13T07:09:00.097

```
sValue == vValue + Strings.Chr(0) 
```

您可以使用[此网站自己尝试](http://www.developerfusion.com/tools/convert/vb-to-csharp/)

# java - 开源 PDF 阅读器

> ID：11009571
> 
> 赞同：-2
> 
> 时间：2012-06-13T06:50:10.893
> 
> 标签：java, c++, pdf, open-source, pdf-reader

我目前正在开展一个项目，该项目需要我向用户显示 PDF 文档等。

**是否有免费的开源 PDF 阅读器，我可以自定义和构建我的项目？**

Java 代码库将是完美的，但 C/C++ 也可以。读者不一定需要很花哨，但它应该能够完全自己处理显示PDF文件。此外，如果软件许可证允许专有性质的代码定制，我更愿意。

**如果不存在这样的 PDF 阅读器，是否有一个我可以利用的 PDF 库，除了解析它之外，它还可以处理/帮助*显示*PDF 内容？**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:10:49.273

我还建议调查 MuPDF。它是开源的，但您需要符合 GPL 才能以这种方式使用它，但它也可以获得商业许可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T06:55:15.757

至于免费图书馆，看看[poppler](http://poppler.freedesktop.org/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T07:30:25.927

Suns PDR-Renderer 和 Multivalent 都是开源的，并且有 JPedal 和 Icepdf 的操作系统版本。

# vb.net - Autofac - 从注册的程序集中解决特定的实现

> ID：11009572
> 
> 赞同：1
> 
> 时间：2012-06-13T06:50:13.560
> 
> 标签：vb.net, autofac

我正在使用 Autofac 并希望解决当前程序集的正确实现

我有一个 DataContextFactory 接口和类：

```
Public Interface IDataContextFactory
  Inherits IDisposable

  Function GetDataContext() As IDataContext

End Interface 
```

和接口的实现

```
Public Class CDataContextFactory
  Implements IDataContextFactory

  Private m_oDbContext As IDataContext

  Public Sub New(ByVal i_oDbContext As IDataContext)
    m_oDbContext = i_oDbContext
  End Sub

  Public Function GetDataContext() As CoreData.IDataContext Implements CoreData.IDataContextFactory.GetDataContext
    Return m_oDbContext
  End Function

End Class 
```

所以现在我在每个注册的程序集中都有不同的 IDataContext 实现。例如，我有一个名为 ReportData 的程序集，其中包含数据上下文

```
Public Class CReportDataContext
  Inherits DbContext
  Implements IDataContext

    ---
End Class 
```

以及另一个程序集 CommonData 中的一个实现

```
Public Class CFacadeDataContext
  Implements IDataContext

    ---
End Class 
```

然后我在每个程序集中都有我的 IRepository 的实现。例如

```
Public MustInherit Class CBaseReadRepository(Of T As {IEntity, Class})
  Implements IReadRepository(Of T)

  Private m_oDataContextFactory As IDataContextFactory
  Private m_oDataContext As IDataContext

  Protected ReadOnly m_oObjectDataSet As CQuery(Of T)

  Public Sub New(ByVal i_oDataContextFactory As IDataContextFactory)
    m_oDataContextFactory = i_oDataContextFactory
    m_oObjectDataSet = DataContext.ObjectDataSet(Of T)()
  End Sub

    ----
End Class 
```

那么我该如何解决DataContextFactory将解析Assembly ReportData中的CReportDataContext和Assembly CommonData中的CFacadeDataContext

这是我的 ContainerBuilder 注册：

```
Dim builder As New ContainerBuilder()

Dim oData = Assembly.Load("ReportData")
builder.RegisterAssemblyTypes(oData).Where(Function(t) t.Name.EndsWith("DataContext")).As(Of IDataContext) _
  .AsImplementedInterfaces.SingleInstance

oData = Assembly.Load("CommonData")
builder.RegisterAssemblyTypes(oData).Where(Function(t) t.Name.EndsWith("DataContext")) _
  .AsImplementedInterfaces().SingleInstance

builder.RegisterAdapter(Of IDataContext, IDataContextFactory)(Function(x) New CDataContextFactory(x)) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:11:21.757

Autofac 没有对这种用例的内置支持。一般来说**，建议您尽量不要将特定实现与消费者联系起来，**因为这会破坏整个 IoC 模式——您最好在类中“新建”您需要的依赖类型，而不是注入它。

如果您*绝对必须*将它们捆绑在一起，那么您只有几个选择。两者都不漂亮，并且都需要您更改注册内容的方式 - 您可能无法`RegisterAssemblyTypes`像现在一样进行程序集扫描。

首先，**您可以使用命名注册**。当你注册你的`IDataContext`，你给它一个名字。当您注册您的消费类时，您告诉构建器您希望使用哪个命名实例。

```
builder.RegisterType<MyDataContext>().Named<IDataContext>("some-name");
var contextParam = ResolvedParameter.ForNamed<IDataContext>("some-name");
builder.RegisterType<MyConsumer>().As<IConsumer>().WithParameter(contextParam); 
```

其次，您可以为消费者**注册一个表达式而不是一个类型：**

```
builder.Register(c => new Consumer(new SomeContext())).As<IConsumer>(); 
```

最后，**您可以创建一个特殊的模块**来确定消费者来自哪个程序集，并尝试将其与相应的`IDataContext`. 这更“自动”，但要复杂得多。存根可能如下所示：

```
public class DataContextModule : Autofac.Module
{
  protected override void AttachToComponentRegistration(
    IComponentRegistry componentRegistry,
    IComponentRegistration registration)
  {
    registration.Preparing += OnComponentPreparing;
  }

  public static void OnComponentPreparing(object sender, PreparingEventArgs e)
  {
    Type typeBeingResolved = e.Component.Activator.LimitType;
    // TODO: Do some reflection to determine if the type takes an IDataContext
    // in the constructor. If it doesn't, bail. If it does...

    var parameter = new ResolvedParameter(
      (p, i) => p.ParameterType = typeof(IDataContext),
      (p, i) => {
        // TODO: Use i (the IComponentContext for the resolution)
        // to locate the right IDataContext from the list of registrations,
        // resolve that one, and return it so it can be used in
        // constructing the consumer object.
      });
  }
} 
```

就像我说的，不漂亮。

如果您有能力影响您的设计，那么制作标记界面可能会更容易，例如：

```
public interface ICoreDataContext : IDataContext { } 
```

然后在你的构造函数中使用特定的接口：

```
public SomeClass(ICoreDataContext context); 
```

这样类型解析就可以工作了。（标记接口也不是世界上最好的模式，但它可以说比将事物的单个实现与特定的消费类型联系起来更好。）

# vb.net - 如何在 pt 或 inc. 中获取字体宽度和高度？

> ID：11009573
> 
> 赞同：1
> 
> 时间：2012-06-13T06:50:16.653
> 
> 标签：vb.net, graphics, reporting-services, fonts, font-size

如何计算特定字体系列符号的宽度和高度。例如，我有 Courier New（尺寸 12pt）。我可以计算此字体的每个符号的宽度和高度（以磅或英寸为单位）吗？我应该使用哪个公式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T09:35:16.507

我想通了。对于这样的事情，我们可以使用静态类 TextRenderer 的 .net 方法 MeasureText

```
String text1 = "Measure this text";
Font arialBold = new Font("Arial", 12.0F);
Size textSize = TextRenderer.MeasureText(text1, arialBold); 
```

# java - 搜索特定键android的哈希映射数组

> ID：11009576
> 
> 赞同：2
> 
> 时间：2012-06-13T06:50:39.820
> 
> 标签：java, android

我有一个这样`ArrayList`的：`HashMap`

```
ArrayList<HashMap<String, String>> playListSongs = new ArrayList<HashMap<String, String>>(); 
```

我这样填充列表：

```
for (int i1 = 0; i1 < nl.getLength(); i1++) {
  // creating new HashMap
  HashMap<String, String> map = new HashMap<String, String>();
  Element e = (Element) nl.item(i1);
  // adding each child node to HashMap key => value
  map.put(KEY_SONGS, String.valueOf(i1));
  map.put(KEY_FILE, parser.getValue(e, KEY_FILE));
  map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
  map.put(KEY_FILE, parser.getValue(e, KEY_FILE));
  map.put(KEY_ALBUM, parser.getValue(e, KEY_ALBUM));
  map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
  map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
  map.put(KEY_ARTWORK, parser.getValue(e, KEY_ARTWORK));
  // Songs List of selected playlist
  playListSongs.add(map);
  // list view bind
  PopulateList(playListSongs);
} 
```

现在我想从 HashMap-array-list(playListSongs) 中获取特定艺术家的专辑和歌曲以及歌曲数量，以将其绑定到列表视图。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:22:09.907

您可以使用此方法获取特定艺术家的歌曲：

```
private ArrayList<String> getSongsByArtist(String artist){
    ArrayList<String> songs = new ArrayList<String>();
    for (HashMap<String, String> hashMap : playListSongs) {
        if(hashMap.get(KEY_ARTIST).equals(artist)){
            songs.add(hashMap.get(KEY_TITLE));
        }
    }
    return songs;       
} 
```

要获得不同的艺术家，请使用以下方法：

```
private ArrayList<String> getDistinctArtists(){
    HashMap<String,String> duplicateTracker = new HashMap<String, String>();
    ArrayList<String> distinctArtists = new ArrayList<String>();
    for (HashMap<String, String> hashMap : playListSongs) {
        // Check whether artist is already added or not
        if(duplicateTracker.containsKey(hashMap.get(KEY_ARTIST))==false){
            //Add artist name to hash map
            duplicateTracker.put(hashMap.get(KEY_ARTIST), hashMap.get(KEY_ARTIST));
            distinctArtists.add(hashMap.get(KEY_ARTIST));
        }
    }
    return distinctArtists;     
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:00:07.903

像这样试试

```
 for (int i1 = 0; i1 < playListSongs.size(); i1++) {
                    HashMap<String, String> map = playListSongs.get(i1);
String artist=map.get(KEY_ARTIST);                    
String songs=   map.get(KEY_SONGS);
String file=   map.get(KEY_FILE);
String duration=   map.get(KEY_DURATION);

SongDescription description=new SongDescription(artists,songs,file,duration);
desList.add(description);                     
if(artists.equals(desiredAtrist)){
songs----------->You need
} 
```

}

# ghostscript - 是否可以将笔画转换为gs中的填充？

> ID：11009580
> 
> 赞同：2
> 
> 时间：2012-06-13T06:50:45.057
> 
> 标签：ghostscript

是否有任何选项可以告诉 gs 将笔画转换为填充？类似于 Adob​​e Illustrator 的“扩展”功能？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:34:57.770

您不能将笔画转换为填充，不。

您可以使用 strokepath PostScript 运算符，这将用一个路径替换当前路径，该路径包含如果将“stroke”应用于该路径将绘制的形状。

strokepath 的结果可用于填充、剪辑和 pathbbox 操作，但本身不适合描边。

我完全不清楚为什么要用填充替换笔触，因为两者将覆盖完全相同的区域。我对 Adob​​e Illustrator 完全不熟悉，因此以它为例对我没有帮助。也许您可以解释您真正想要做什么，以及为什么不能在生成 PostScript 的应用程序中执行它，这几乎总是一个更好的解决方案。

# java - Zimbra：使用 HttpClient 将联系人下载为 CSV 文件

> ID：11009581
> 
> 赞同：2
> 
> 时间：2012-06-13T06:50:49.710
> 
> 标签：java, apache-commons-httpclient, zimbra

我正在尝试使用以下代码从 Zimbra 下载联系人：

```
public static void getHTTPFile() {

    HttpClient client = new HttpClient();

    List<String> authPrefs = new ArrayList<String>(2);
    authPrefs.add(AuthPolicy.DIGEST);
    authPrefs.add(AuthPolicy.BASIC);
    client.getParams().setParameter(AuthPolicy.AUTH_SCHEME_PRIORITY, authPrefs);

    client.getState().setCredentials(
    new AuthScope(HOST, new Integer(PORT).intValue(), AuthScope.ANY_REALM),
    new UsernamePasswordCredentials(NAME, PASSWORD)
    );

    GetMethod get = new GetMethod("http://"+HOST+":"+PORT+"/home/"+USER+"/contacts?fmt=csv");
    get.setDoAuthentication(true);

    try {
        int status = client.executeMethod(get);

        System.out.println(status + "\n" + get.getResponseBodyAsString());
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        get.releaseConnection();
    }
} 
```

但我收到错误 404 (Not Found) ：

```
13 juin 2012 08:40:47 org.apache.commons.httpclient.auth.AuthChallengeProcessor selectAuthScheme
INFO: Basic authentication scheme selected
404
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
<title>Error 404 no such item</title>
</head>
<body><h2>HTTP ERROR 404</h2>
<p>Problem accessing /service/home/USER/contacts. Reason:
<pre>    no such item</pre></p><hr /><i><small>Powered by Jetty://</small></i><br/> 
```

我的网址错了吗？关于[文档](http://wiki.zimbra.com/wiki/ZCS_6.0%3aZimbra_REST_API_Reference%3aGet_Contacts)似乎不是。

认证有问题吗？我没有收到错误 401（未经授权）。

任何想法？

谢谢你的帮助。

**编辑：**

Zimbra 在服务器端有限制吗？例如，我们只能通过网络浏览器或智能手机访问它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:51:47.943

在 REST 服务中，HTTP 消息是协议的一部分，404 可能意味着服务正常但找不到您的用户。您是否尝试过其他用户？或者也许你可以在 api 上有一个默认的测试用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T07:11:43.777

我对 Zimbra 没有任何线索，但在您的 URL`"http://"+HOST+":"+PORT+"/home/"+USER+"/contacts?fmt=csv"`中，`USER`var 似乎应该被一个真实的用户名替换，例如`bob`。但是在 404 响应中，您请求的 url 是：`/service/home/USER/contacts`。在我看来，您想向用户请求联系人`USER`，但没有使用此名称的用户。这样对吗？

# android - Android 呼叫转移和电话会议

> ID：11009588
> 
> 赞同：3
> 
> 时间：2012-06-13T06:51:04.543
> 
> 标签：android, telephony

任何人都可以告诉我，对于 android，是否可以通过在应用程序级别进行编码来处理呼叫转移和呼叫会议？

我们可以通过在android中以编程方式将来电转发到任何其他电话号码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-12T06:40:06.087

嗯，我发现了一些对你来说很有趣的东西。试一试：

*   [Android 编程 - 呼叫转移](http://danielthat.blogspot.com/2013/03/android-programming-call-forwarding.html)

但是，电话会议并不是那么容易的任务。您需要**CCXML**并且应该对会议管理器进行编程以进行尝试。请参阅：

*   [是否有任何 API 支持在 Android 中以编程方式进行电话会议？](https://stackoverflow.com/questions/11430620/is-there-any-api-support-to-make-conference-calls-programatically-in-andriod)

# objective-c - 在 iPAD 中注销时应用程序崩溃

> ID：11009593
> 
> 赞同：0
> 
> 时间：2012-06-13T06:51:31.897
> 
> 标签：objective-c, ios, ipad, memory-management, ios4

我的问题是针对 iPAD 的，我也知道 iOS 的基本内存管理，但我遇到了不同的问题。

由于我已经构建了一个应用程序，其中我有几个 UIViewControllers 和 UIViews，所以我有一个 loginController，它在我启动应用程序时被调用。

我的 MainView 是一个单一屏幕，所有 ViewController 都已加载并放置在各自的位置，并且应用程序运行良好且流畅。

问题：

当我注销时出现问题，大多数情况下我的应用程序在我的 mainView 控制器行上说崩溃`EXC_BAD`了 `[super dealloc]`。

至于现在，我已经在我`cleanUP`的所有 viewControllers 中添加了一个自定义函数，当用户从应用程序注销时会调用它。

这是正确的方法吗？

据我所知，我们可以在我们的 etc. 函数中进行清理，`didload`并且也会调用 dealloc。

但是在这里我有一个 iPAD，当我的所有视图控制器都在我面前打开时，当我从应用程序注销时它们将关闭或不可见。

那么如何解决我的崩溃问题以及如何在我的 iPAD 中管理内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:10:45.153

我知道解决不良访问问题的最好方法是使用带有 Zombie 工具的 Instruments。您可能知道，当您遇到错误的访问问题时，是因为您尝试访问已释放的对象。

尝试转到产品 -> 配置文件并选择僵尸。点击记录并重现您的崩溃。然后检查指向导致崩溃的对象的指针并查找保留计数。

# html - 锚标签的正确实现

> ID：11009597
> 
> 赞同：0
> 
> 时间：2012-06-13T06:51:51.193
> 
> 标签：html, xhtml, anchor

我想知道是否有正确的方法来实现锚标记，因为我已经看到了以下示例`<p id="somename">text</p>`等`<h1 id="someheader">header</h1>`

然后将其引用为`<a href="#somename">Link</a>`or `<a href="#someheader">Link</a>`。我知道锚也可以实现为`<p><a name="somename"></a>text</p>`.

除了用于 CSS 和 Javascript 的 ID 属性之外，将 ID 属性用作锚点是否仍然可以接受？还能有什么其他问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T06:53:37.487

> 除了用于 CSS 和 Javascript 的 ID 属性之外，将 ID 属性用作锚点是否仍然可以接受？

是的。使用 id 是现代方法。这是识别文档的一部分的通用方法。能够将它重用于需要识别文档的一部分的其他事物（CSS、JS 等）是一个优势）。

> 还能有什么其他问题？

Netscape 4 不支持它（您可能不应该关心它）。

# powershell - bash 上 `which` 的 cmd/powershell 等价物是什么？

> ID：11009598
> 
> 赞同：38
> 
> 时间：2012-06-13T06:51:51.483
> 
> 标签：powershell, cmd

我想知道 CMD shell 使用的是哪个版本的可执行文件。在任何 unix shell 中，我都会使用`which`它来找到它。

Windows shell 中是否有等效命令？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-06-13T06:53:23.217

各种各样的。

1.  `where`是直接等价的：

    ```
    C:\Users\Joey>where cmd
    C:\Windows\System32\cmd.exe 
    ```

    请注意，在 PowerShell 中`where`本身是 的别名`Where-Object`，因此您需要`where.exe`在 PowerShell 中使用。

2.  在`cmd`您还可以使用`for`：

    ```
    C:\Users\Joey>for %x in (powershell.exe) do @echo %~$PATH:x
    C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe 
    ```

3.  在 PowerShell中，如果您传递一个参数`Get-Command`，它的别名`gcm`会执行相同的操作（但也适用于 PowerShell 中的别名、cmdlet 和函数）：

    ```
    PS C:\Users\Joey> Get-Command where

    CommandType     Name          Definition
    -----------     ----          ----------
    Alias           where         Where-Object
    Application     where.exe     C:\Windows\system32\where.exe 
    ```

    第一个返回的命令是要执行的命令。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T11:51:15.183

该`WHERE`命令与 unix 不太一样，`which`因为它列出了在当前目录或 PATH 中找到的所有匹配文件。正如乔伊所说，列出的第一个是执行的那个。创建一个只返回第一个找到的批处理脚本很简单。

```
@echo off
for /f "delims=" %%F in ('where %1') do (
  echo %%F
  exit /b
) 
```

但是`WHERE`比较慢。

下面是一个更快且功能更多的 WHICH.BAT 脚本。它使用广泛的延迟扩展切换，因为：1）如果有未引用的特殊字符，扩展 %PATH% 是不可靠的。2) 在启用延迟扩展时扩展 FOR 变量会损坏包含`!`.

```
::WHICH.BAT  CommandName  [ReturnVar]
::
::  Determines the full path of the file that would execute if
::  CommandName were executed.
::
::  The result is stored in variable ReturnVar, or else it is
::  echoed to stdout if ReturnVar is not specified.
::
::  If no file is found, then an error message is echoed to stderr.
::
::  The ERRORLEVEL is set to one of the following values
::    0 - Success: A matching file was found
::    1 - CommandName is an internal command
::    2 - No file was found and CommandName is not an internal command
::    3 - Improper syntax - no CommandName specified
::
@echo off
setlocal disableDelayedExpansion

set "file=%~1"
setlocal enableDelayedExpansion

if not defined file (
  >&2 echo Syntax error: No CommandName specified
  exit /b 3
)

:: test for internal command
echo(!file!|findstr /i "[^abcdefghijklmnopqrstuvwxyz]" >nul || (
  set "empty=!temp!\emptyFolder"
  md "!empty!" 2>nul
  del /q "!empty!\*" 2>nul >nul
  setlocal
  pushd "!empty!"
  set path=
  (call )
  !file! /? >nul 2>nul
  if not errorlevel 9009 (
    >&2 echo "!file!" is an internal command
    popd
    exit /b 1
  )
  popd
  endlocal
)

:: test for external command
set "noExt="
if "%~x1" neq "" if "!PATHEXT:%~x1=!" neq "!PATHEXT!" set noExt="";
set "modpath=.\;!PATH!"
@for %%E in (%noExt%%PATHEXT%) do @for %%F in ("!file!%%~E") do (
  setlocal disableDelayedExpansion
  if not "%%~$modpath:F"=="" if not exist "%%~$modpath:F\" (
    endlocal & endlocal & endlocal
    if "%~2"=="" (echo %%~$modpath:F) else set "%~2=%%~$modpath:F"
    exit /b 0
  )
  endlocal
)
endlocal

>&2 echo "%~1" is not a valid command
exit /b 2 
```

**更新**

我不得不对上面的脚本进行重大修改，因为如果在 PATH 中的某处碰巧存在具有相同根名称的 exe 文件，它会错误地将内部命令列为外部命令。

# ruby-on-rails - 当两个类具有相同的名称时，Rails 会得到错误的类

> ID：11009600
> 
> 赞同：1
> 
> 时间：2012-06-13T06:51:58.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, model

在我的 Rails 中，我有以下模型：

STI 子类

```
class Subscription::Discount < Subscription
  def self.new_with_url
    ...
  end
end 
```

和另一个模型类（做完全不同的事情，这是一个 STI 基类）

```
class Discount < ActiveRecord::Base
end 
```

所以在我的控制器中，我`Subscription::Discount`在创建用户时使用：

```
@user.subscription = ::Subscription::Discount.new_with_url() 
```

但是它抱怨：`undefined method 'new_with_url' for #<Class:0x007fbb499c6740>`

我认为 Rails 没有用`new_with_url`. 最重要的是，我不确定是什么`#<Class:0x007fbb499c6740>`。所以，两个问题：

1.  在不重命名任何模型的情况下，如何`Subscription::Discount`正确引用？
2.  为什么错误消息说`#<Class:0x007fbb499c6740>`，如果 `Discount`不是那个匿名类，我可以理解。

编辑：

以下是所有相关模型：

```
app/model/discount.rb
app/model/coffee_discount.rb (CoffeeDiscount < Discount)
app/model/subscription.rb
app/model/subscription/discount.rb (Subscription::Discount < Subscription) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:12:01.900

该方法已命名`create_with_url`，但您正在调用`new_with_url`.

修复方法名称。

# php - 使用for循环php打印名称

> ID：11009601
> 
> 赞同：2
> 
> 时间：2012-06-13T06:52:04.923
> 
> 标签：php, html

在 PHP 中使用 for 循环可以让数字与变量名相关联吗？

前任：

```
$name1="hi";
$name2="khj";

for($i=0;$i<=2;$i++)
{
echo ..
} 
```

我们如何使用 for 循环打印 $name1 和 $name2？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T06:54:42.670

是的，这称为[变量插值](http://hydrogen.informatik.tu-cottbus.de/wiki/index.php/PHP_Variable_Interpolation)。

```
$name1="hi";
$name2="khj";

for($i=1;$i<=2;$i++) {
    $var = 'name' . $i;
    echo $$var;
} 
```

**注意：** PHP 中有多种用于变量插值的语法。另外，我将您的循环修改为从`1`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T06:54:47.513

```
 for($i = 1; $i <= 2; $i++)
    {   
        echo $name{$i};
    } 
```

不过，将它放在一个数组中会更容易，这就是我们拥有它们的目的。

```
 $names = array();
    $names[1] = 'A';
    $names[2] = 'B';

    foreach($names as $name)
    {
        echo $name; 
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T06:55:51.497

把它放在for循环中：

```
echo ${'name'.$i}."\n"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-13T07:00:00.140

最好使用类似的东西： -

```
$names[] = $name1;
$names[] = $name2;

foreach($names as $name){
    echo $name;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T06:55:07.380

这将打印 name1 和 name2 。并且 i 值必须从 1 开始

```
 for($i=1;$i<=2;$i++)
       {
         echo ${'name'.$i}."<br>";
        } 
```

# ios - 如何处理并发执行的大量数据（NSOperationQueue 或 Blocks）

> ID：11009602
> 
> 赞同：2
> 
> 时间：2012-06-13T06:52:13.250
> 
> 标签：ios, concurrency, queue, objective-c-blocks, nsoperationqueue

我必须一次处理大量数据。因此我使用 Blocks 或 NSOperationQueue。一切正常，直到要处理的数据量超过内存限制。这会导致即时应用程序崩溃。

原因是我必须处理的数据包大约是。100KB 大。在超过 300-400 个此操作在队列中排队后，内存限制已超出。

现在我想知道你们如何处理类似的问题？顺便说一句：我没有找到限制队列大小的方法，除非我添加同步任务，这将导致堆栈在返回之前完成。

提前感谢您的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:20:06.480

NSOperation*大致*相当于 ThreadPoolExecutor。所以你已经在使用它了。如果你正在耗尽你的内存，你的并发方法可能不是问题。

听起来您正在构建 300-400 个任务（NSOperations 或 GCD 块）并在执行它们*之前耗尽内存。*为什么不让它们在您添加它们时执行？这就是 NSOperationQueue 和 GCD 队列的*用途*，很像 ThreadPoolExecutor。

# ios - 多个视图控制器订阅蓝牙通知

> ID：11009605
> 
> 赞同：0
> 
> 时间：2012-06-13T06:52:27.647
> 
> 标签：ios, uiviewcontroller, delegates, bluetooth

伙计们，我是iOS开发的新手。我设计了一个实现CBCentralManagerDelegate、CBPeripheralDelegate的类A。还。有一个协议可以用一种易于理解的方法将蓝牙通知包装起来。

我现在的问题是，我有多个视图控制器需要响应蓝牙通知。我不知道如何使它工作。我是否让我的视图控制器代表我的 A 类？好像有点尴尬 实现这一目标的最佳方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:58:02.680

如果我正确理解您的设计，您将包装您需要处理的任何通知以及使用 A 类发送回您的任何委托回调 - 我认为这一点也不尴尬，只需为此类定义一个协议以建立良好的委托给您项目中需要这些服务的任何其他类并将它们连接起来。在我看来，最好将这个类设置为单例，这样它将是唯一一个管理回调和通知的类，并且在整个应用程序中都可以轻松访问。

祝你好运

# google-maps-api-3 - 动画地标和 MarkerClusterPlus

> ID：11009606
> 
> 赞同：0
> 
> 时间：2012-06-13T06:52:30.587
> 
> 标签：google-maps-api-3, markerclusterer

我正在使用 MarkerClusterPlus，v.2.0.9 并且偶然注意到如果集群隐藏动画地标（您缩小）然后您显示地标（您放大），则地标停止动画。例如，如果您已退回地标，则在隐藏/显示后您会看到简单的地标。

后来我发现，有2.0.14版本存在，但是这个效果还是存在的。

谢谢，德米特里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:11:13.467

是的，2.0.14 是最新版本。如果您在问题中包含一小部分代码来显示您的确切问题，这将有所帮助。

此外，还有一个[实用程序库 v3 问题列表](http://code.google.com/p/google-maps-utility-library-v3/issues/list)；看看那里。我在该列表中看到了与您的问题相似的问题。您可能能够找到类似或相关的问题并对该问题进行投票以提高问题的优先级。或者，如果您的问题不同，您可以仔细检查所有内容，如果很明显您遇到了真正的问题，您可以在那里提交问题报告。

# c++ - 获取无效参数错误 (22)

> ID：11009617
> 
> 赞同：1
> 
> 时间：2012-06-13T06:53:29.657
> 
> 标签：c++, linux, arm

我正在 x86-64 机器上为 Linux 编写代码。它在 x86-64 上运行良好，但我将相同的代码移植到基于 ARM 的设备上，现在我收到错误：计时器代码的参数无效。以下是我的计时器代码：

```
/**
* FUNCTION NAME : startRetryCount
* @brief start the retry count
* @param isAuth: if true start retry for Auth message else for Normal message
* @return true if success and false if not
*/
bool startRetryCount(bool isAuth)
{
    m_RetryAuth = isAuth;
    stopRetryCount();

    struct sigevent sigev;
    struct itimerspec itval;
    struct itimerspec oitval;
    struct sigaction sigact;

    if(sigemptyset(&sigact.sa_mask) == -1)
    {
        printLog(LOG_ERROR,"[%s:%d#%s] <<<< sigemptyset >>>> : %s\n",
                            __FILE__,__LINE__,__func__,strerror(errno));
    }

    sigact.sa_flags = SA_SIGINFO;
    sigact.sa_sigaction = signalHandler;

    m_RetryCount = ConfigureManager_SingleTon::getInstance()->getRetryCount();
    printLog(LOG_INFO,"**Retry Count Started**\n"); 
    printLog(LOG_INFO,"Number of Retry Count:%d\n",m_RetryCount);
    printLog(LOG_INFO,"Retry time is:%d\n",
            ConfigureManager_SingleTon::getInstance()->getRetryTime());

    // set up sigaction to catch signal
    if (sigaction(SIGTIMER, &sigact, NULL) == -1)
    {
        printLog(LOG_ERROR,"[%s:%d#%s] <<<< time_settime >>>> : %s\n",
                            __FILE__,__LINE__,__func__,strerror(errno));
        return false;
    }

    //Create the POSIX timer to generate signo
    sigev.sigev_notify = SIGEV_SIGNAL;
    sigev.sigev_signo = SIGRTMAX;
    sigev.sigev_value.sival_int = RETRY_ID;

    if (timer_create(CLOCK_REALTIME, &sigev, &m_RetryTimerId) == 0)
     {
        itval.it_value.tv_sec = ConfigureManager_SingleTon::getInstance()->getRetryTime();
        itval.it_value.tv_nsec = 0L;
        itval.it_interval.tv_sec = itval.it_value.tv_sec;
        itval.it_interval.tv_nsec = itval.it_value.tv_nsec;

        if (timer_settime(m_RetryTimerId, 0, &itval, &oitval) != 0)
        {
            Utility_SingleTon::printLog(LOG_ERROR,"[%s:%d#%s] <<<< time_settime >>>> %s\n",
                                __FILE__, __LINE__,__func__,strerror( errno ));
            return false;
        }
    }
    else
    {
        printLog(LOG_ERROR,"[%s:%d#%s] <<<< timer_create >>>> %s",
                                __FILE__, __LINE__,__func__,strerror( errno ));
        return false;
    }
    return true;
}

/**
* FUNCTION NAME : stopRetryCount
* @brief stop the retry count
*/
voidstopRetryCount()
{
    if(m_RetryTimerId != NULL) 
    {
        if(timer_delete(m_RetryTimerId) != 0)
        {
            printLog(LOG_ERROR,"[%s:%d#%s] Timer delete error [%d]=%s\n",__FILE__, __LINE__,__func__,errno,strerror(errno));
        }
        m_RetryCount = 0;
        m_RetryTimerId = NULL;
        printLog(LOG_INFO,"Retry Timer Stopped!\n");
    }
} 
```

错误的打印日志是：

```
[src/manager.cpp:686#stopRetryCount] Timer delete error [22]=Invalid argument 
```

我已经尝试了很多来找出困扰基于 ARM 的设备的问题，但不幸的是我无法解决这些问题。任何帮助将不胜感激。

编辑：

为了模拟我的情况，我创建了示例程序，现在我知道在 misral SAM-9 处理器上，定时器和线程共同不起作用，如果我在主线程中启动定时器并且我尝试通过子线程停止该定时器，那么它给出了那个错误。这是 sample.cpp 文件源：

```
#include "devicetimer.h"

int DeviceTimer::counter = 0;

timer_t DeviceTimer::testTimer1Id = 0;

void DeviceTimer::timer1Stop()
{

    if(testTimer1Id != 0)
    {
        if(timer_delete(testTimer1Id) == -1)
        {
            printf("Timer Delete Error\nError Number = %d\nError Message = %s\n",errno,strerror(errno));
            exit(1);
        }
        else
        {
            printf("Timer Delete Successfully\n");
        }       
    }
}

void DeviceTimer::signalHandler(int signo, siginfo_t* info, void* context)
{
    if (signo == SIGTIMER)
    {
        printf("counter %d\n\n",++counter);
    }
}

int DeviceTimer::timer1start()
{
    struct sigevent sigev; //signal event struct
    struct itimerspec itval;
    struct itimerspec oitval;
    struct sigaction sigact;

    sigemptyset(&sigact.sa_mask);
    sigact.sa_flags = SA_SIGINFO;
    sigact.sa_sigaction = signalHandler;

    // set up sigaction to catch signal
    if (sigaction(SIGTIMER, &sigact, NULL) == -1)
    {
        printf("time_settime error \n");
        return -1;
    }

    //Create the POSIX timer to generate signo
    sigev.sigev_notify = SIGEV_SIGNAL;
    sigev.sigev_signo = SIGTIMER;
    sigev.sigev_value.sival_int = 2;

    if (timer_create(CLOCK_REALTIME, &sigev, &testTimer1Id) == 0)
     {
        itval.it_value.tv_sec = 1;
        itval.it_value.tv_nsec = 0L;
        itval.it_interval.tv_sec = itval.it_value.tv_sec;
        itval.it_interval.tv_nsec = itval.it_value.tv_nsec;

        if (timer_settime(testTimer1Id, 0, &itval, &oitval) != 0)
        {
            printf("Error in set time \n");
            return -2;
        }
    }
    else
    {
        printf("Error in creating timer \n");
        return -3;
    }
    return 0;
}

void* DeviceTimer::threadFunction(void* data)
{
    DeviceTimer *deviceTimer = (DeviceTimer *) data;

    while(1)
    {
        printf(".\n");
        usleep(100000);
        if(counter > 25)
        {
            deviceTimer->timer1Stop();
            break;
        }
    }   
    return NULL;
}

void DeviceTimer::startThread()
{
    if(pthread_create(&m_Thread, NULL, DeviceTimer::threadFunction, this) != 0)
    {
        printf("Error in creating Thread\n");
        exit(1);
    }
}

int main()
{
    DeviceTimer deviceTimer;

    deviceTimer.timer1start();
    deviceTimer.startThread();

    while(1)
    {
    }

    return 0;   
} 
```

以下是输出：

```
counter 26
Timer Delete Error
Error Number = 22
Error Message = Invalid argument 
```

如果有人遇到同样的问题，请帮我解决这个问题。

谢谢和BR，尤维

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:29:22.437

确保您的计时器 ID 是正确的类型 ( `timer_t`)。如果您不小心使用了其他类型，`timer_delete()`则可能会发生此类错误，因为无法识别 ID。

# sql - SQL 选择段

> ID：11009620
> 
> 赞同：2
> 
> 时间：2012-06-13T06:53:37.350
> 
> 标签：sql, sql-server-2008

我正在使用 SQL Server 2008。

我有一个包含 x 行数的表。我想总是将 x 除以 5 并选择第三组记录。

假设表中有 100 条记录：

```
100 / 5 = 20 
```

第三段将是记录 41 到 60。

我如何才能在 SQL 中仅计算和选择第 3 段？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T06:56:30.337

您可以使用[`NTILE`](http://msdn.microsoft.com/en-us/library/ms175126.aspx).

> 将有序分区中的行分布到指定数量的组中。

例子：

```
SELECT col1, col2, ..., coln
FROM
(
    SELECT
        col1, col2, ..., coln,
        NTILE(5) OVER (ORDER BY id) AS groupno
    FROM yourtable
)
WHERE groupno = 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T06:58:16.583

[`NTILE`](http://msdn.microsoft.com/en-us/library/ms175126.aspx)这是排名功能的完美用途。

基本上，您在 CTE 中定义查询并将 NTILE 添加到您的行中 - 一个从 1 到 n 的数字（ 的参数`NTILE`）。您按某列对行进行排序，然后获得要查找的 n 组行，并且可以对这些“组”数据中的任何一个进行操作。

所以尝试这样的事情：

```
;WITH SegmentedData AS
(
   SELECT  
      (list of your columns),
      GroupNo = NTILE(5) OVER (ORDER BY SomeColumnOfYours)
   FROM dbo.YourTable
)
SELECT * 
FROM SegmentedData
WHERE GroupNo = 3 
```

当然，您也可以`UPDATE`在 CTE 之后使用语句来更新这些行。

# winforms - 平板电脑的Winform应用程序？

> ID：11009621
> 
> 赞同：2
> 
> 时间：2012-06-13T06:53:37.403
> 
> 标签：winforms, tablet, android, tablet-pc, mobile-devices

我有一个客户想要一个可以更新在线数据库的旅行应用程序，他不想购买笔记本电脑，他想要平板电脑或类似的东西。我没有为移动设备创建特殊应用程序的知识或愿望，我想创建一个 winform，就像我一直针对 pc 时所做的那样。平板电脑（据我了解只是普通电脑？）在我的国家仍然非常昂贵。

是否有一个简单的调整让winform应用程序在安卓平板电脑上运行，或者我必须为它构建一个特殊的应用程序？还有其他解决方案吗？（我开始为它写一个网页，但使用winforms要容易得多）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:03:10.793

本机 WinForms 应用程序不会直接在 Android（或任何非 Windows 平台）上运行。您可能希望首先查看用于移植 .NET 代码 Android的[MonoDroid](http://docs.xamarin.com/android) （以及一般用于将 .NET 代码移植到非 Windows 平台的[Mono ）。](http://www.mono-project.com/Main_Page)

跨平台的成功移植需要以非常解耦的方式构建应用程序。应用程序抽象部分的核心业务逻辑应该很容易移植，但具体实现（特别是视图和数据/服务访问）将需要针对不同的具体平台进行一些重新实现。所以整体架构需要非常解耦和可插拔。

可以选择 Windows 平板电脑吗？使用 Microsoft 的各种新技术（Windows 8、Metro UI 等），您可以构建一个针对多个基于 Microsoft 的平台的应用程序。这可以轻松满足成为“平板电脑”的要求（如果该要求不是更具体的“Android 平板电脑”）。但是，它不会是旧的 WinForms 风格的应用程序。

一般来说，您会发现该行业一直在稳步远离 WinForms，这正是这个原因。它不移植到其他平台，并且今天需要各种各样的平台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-28T09:33:49.303

忘记转换我几年前处于类似的位置，我做的事情更容易更快，我认为更聪明。只需制作一个带有漂亮大控件的 winform 来处理对接缩放锚点等，这样它就会看起来不错并且可以与小型智能设备一起使用。

确保在您的应用程序中传递一些启动程序参数，并且当传递一个特殊参数而不是打开应用程序的主要桌面形式时，会以全屏模式打开该新形式。

现在棘手的部分在其他地方。我已经设置了一个小型 Windows 2008 r2 服务器，允许在其上运行远程应用程序。

创建一个用户帐户，您将允许使用我们讨论的特定参数访问该服务器和您的应用程序。（例如 myapp.exe -remote）

他将获得的任何设备都可以在 android 中下载免费应用程序，如 2x rdp 或 microsoft rdp。与您的服务器建立新连接（如果您没有静态 ip，您可以使用任何您喜欢的免费 ddns）并连接您之前使用的 Windows 服务器帐户。

如果已正确设置此帐户，则只会运行您的应用程序，并且只会显示您所做的新迷你 winform。

最终用户将进行一次简单的单击，然后通过他的 Internet 连接执行一个简单的远程桌面，该桌面仅适用于您的应用程序。（需要一次路由器配置）

这样，您将只维护一个源代码，并且他将具有较低的带宽成本，并且可以在断开连接的情况下继续他的工作而不会丢失数据。

I use that for years in mobiles tablets and pos systems. Its fast its stable its secure its easy to maintain (nothing on the client side) and you don't waste months of learning wpf or doing xamarin converting.

# iphone - AGImagePickerController 难度

> ID：11009623
> 
> 赞同：2
> 
> 时间：2012-06-13T06:53:38.323
> 
> 标签：iphone, ios, xcode, ipad

所以我`AGImagePickerController`在 iPad 中使用，我成功地将我选择的图像保存在 中`NSDocumentDirectory`，并将其加载到数组中。这`AGImagePickerController`是在我的`UIButton`，所以当它被点击时，选择器就会出现。但我的问题是，即使我去**另一个**`viewcontroller`. 谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:25:18.660

I think you have to maintain a dictionary or a hash-map for the images which is marked or unmarked separately.

And when your pop up appears you have to redraw all the check-marks which are marked and unmarked corresponding to the NSDictionary images which are present their as a key.

I have also used same type of technique in one of my project.

I hope this works for you and in case if you want code snippet, please let me know.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:29:24.023

目前还没有对此的支持，但我可以在一段时间内添加它。

# android - 获取android中动态列表视图的行ID以添加到购物车

> ID：11009628
> 
> 赞同：2
> 
> 时间：2012-06-13T06:53:59.320
> 
> 标签：android, listview, contextmenu, cart, rowid

我的 android 客户端应用程序上有动态列表视图，可以从远程 mysql 数据库接收数据。我有一个上下文菜单，在用户单击该列表视图的任何行时打开。该菜单上有一个名为“添加到购物车”的选项。选择上下文菜单选项时，我想将单击的行项目添加到购物车中。那么如何获取行 ID 以将选择/单击的行项目添加到购物车，就像购物车一样？我稍后需要在我的“显示购物车”类中显示选定的行项目。请帮助..提前谢谢。我没有找到很多用实际代码讨论它的文章。我的列表视图显示类在这里：

```
public class MainMenu extends ListActivity {
Intent intent = getIntent();
InputStream is;
@Override

public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  String result = "";
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://10.0.2.2/phpmyadmin/php.php");
           HttpResponse response = null;
    try {
        response = httpclient.execute(httppost);
    } catch (ClientProtocolException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } 
    HttpEntity entity = response.getEntity();
    try {
        is = entity.getContent();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {

        e.printStackTrace();
    }
    Log.e("log_tag", "connection success ");

    BufferedReader reader = null;
    try {
        reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    StringBuilder sb = new StringBuilder();
    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");

        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    try {
        is.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    result=sb.toString();

    JSONArray jArray = null;
    try {
        jArray = new JSONArray(result);
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    int arrayLength=jArray.length();
    String F_NAME[]=new String[arrayLength];

    for(int i=0;i<arrayLength;i++){
           JSONObject json_data = null;
        try {
            json_data = jArray.getJSONObject(i);
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
           try {
            F_NAME[i]=json_data.getString("F_NAME");
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }}
setListAdapter(new ArrayAdapter<String>(this, R.layout.list,F_NAME));
ListView lv = getListView();
    lv.setTextFilterEnabled(true); registerForContextMenu(lv);}

 public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) { super.onCreateContextMenu(menu, v, menuInfo); MenuInflater inflater = getMenuInflater(); inflater.inflate(R.menu.fltmenu, menu); menu.setHeaderTitle("Ask for");}
public boolean onContextItemSelected(MenuItem item) { //find out which menu item was pressed switch (item.getItemId()) {
        case R.id.ToCart:
            Dotocart();
            return true;
            default:
            return false;}}private void Dotocart() {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:58:57.613

```
 @Override
    public boolean onContextItemSelected(MenuItem item) {
    AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo)item.getMenuInfo();
            int menuItemIndex = item.getItemId();
            int position = (info.position);
.... 
```

menuItem 索引返回选择的上下文菜单项（添加到图表，...）和 info.position 被单击的列表的位置。（如果您还有填充列表视图的数据列表，则可以通过相同的索引获取它。

# php - preg_replace 与 preg_filter

> ID：11009629
> 
> 赞同：7
> 
> 时间：2012-06-13T06:54:06.530
> 
> 标签：php

`preg_replace`和 和有什么区别`preg_filter`？在某些情况下使用其中一个而不是另一个有什么优势吗？我尝试阅读文档，但仍然不太明白有什么区别。请赐教。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-22T17:17:14.903

`preg_filter`over的好处`preg_replace`是你可以检查是否有任何东西被替换，因为`preg_filter`如果没有被替换则返回 null ，而`preg_replace`不管怎样都返回主题。

```
$subject = 'chips';
$pattern = '/chops/';
$replacement = 'flops';

if (is_null(preg_filter($pattern, $replacement, $subject)) { // true
    // do something
}

echo preg_replace($pattern, $replacement, $subject); // 'chips' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T06:56:56.133

> preg_filter() 与 preg_replace() 相同，只是它只返回匹配的（可能转换的）主题。有关此函数如何工作的详细信息，请阅读 preg_replace() 文档。

来自：[这里](http://php.net/manual/en/function.preg-filter.php)

所以如果签名是

```
preg_filter ( mixed $pattern , mixed $replacement , 
              mixed $subject [, int $limit = -1 [, int &$count ]] ) 
```

它将`$subject`参数“转换”（所有匹配项`regex pattern`都是替换的）返回到一个数组中

# windows-phone-7 - 在设备中部署 windows phone 7 应用程序

> ID：11009639
> 
> 赞同：2
> 
> 时间：2012-06-13T06:54:48.367
> 
> 标签：windows-phone-7

我创建了一个 Windows Phone 7 应用程序。我需要在设备中测试它。我有诺基亚 Lumia 710（操作系统：Mango7.5），我需要部署我在此设备中创建的应用程序并对其进行测试。我需要遵循的分步程序是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:04:02.460

首先，您应该有一个 Microsoft [Apphub](http://create.msdn.com/en-US/)开发人员帐户，您需要该帐户来[开发人员解锁](http://msdn.microsoft.com/en-us/library/ff769508%28v=vs.92%29.aspx)设备。（使用 Windows Phone SDK 中的“Windows phone 开发人员注册”工具）

开发人员解锁设备后，在 Visual Studio 中，选择调试目标为“Windows Phone 设备”而不是“模拟器”并开始调试（或部署您的应用程序）。还要确保您已安装并运行最新版本的[Zune 。](http://www.zune.net/en-GB/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:03:14.667

如果您想在您的设备上测试您的应用程序，您必须使用“合法方式”（微软方式）：

1) 确保您已在 AppHub 上注册为开发者并已支付订阅费用。

2) 安装最新版本的 Zune 软件。

2) 通过 USB 插入手机并让 Windows 设置驱动程序。

3) 午餐 Zune 软件，并确保它拿起你的设备。Zune 软件是设备的网关，它始终需要运行，以便您的 PC 上的任何软件能够与手机通话——包括调试时的 Visual Studio。

4) 接下来，您需要使用 Windows Phone 开发者注册工具解锁您的设备，该工具位于开始菜单的 Windows Phone 开发者工具文件夹中。

得到这个文本形式[http://cisforcoder.wordpress.com/2010/10/22/unlocking-your-wp7-device-for-app-development/](http://cisforcoder.wordpress.com/2010/10/22/unlocking-your-wp7-device-for-app-development/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T07:05:35.493

**看起来难以置信……**

不幸的是，如果您想被允许将代码上传到您的手机，您需要有一个[AppHub 帐户（99 美元） 。](http://create.msdn.com/en-US/home/faq)

我知道的唯一方法是购买[ChevronWP7 令牌（不再可用）](http://lassic.tiktok.biz/search.asp?srchAthOrBib=sangha&EventID=runauckland&Edition=2011r5&pbSearch=quick%20search)并将其升级为免费的 AppHub 帐户。或者拥有[dreamspark](https://www.dreamspark.com/)帐户——这也可以让您拥有一个免费的AppHub 帐户。

1.  [如何解锁设备](http://msdn.microsoft.com/en-us/library/hh202924%28VS.92%29.aspx)？

> **可以解锁 Windows Phone 设备以进行开发和测试** **使用活动帐户**。根据帐户类型，每个设备的帐户仅限于一定数量的设备解锁和应用程序。
> 
> 对于个人和公司账户：
> 
> ```
> 3 device unblocks
> 
> 10 apps per device 
> ```
> 
> 对于学生帐户：
> 
> ```
> 1 device unlock
> 
> 10 apps per device 
> ```

# javascript - 使用后退按钮后如何从上一页获取单选值？

> ID：11009644
> 
> 赞同：0
> 
> 时间：2012-06-13T06:55:16.740
> 
> 标签：javascript, html, onload, radio

我正在创建这样的表格：

如果选择b，文本框被禁用，但是在这个页面之后有一个确认页面，当你使用后退按钮切换回来时，文本框又被打开了，那么js中有什么方法可以检查单选和在加载之后改变结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:08:55.533

嗨，为什么不将标志值存储在 html5 存储对象（例如 sessionStorage/localStorage）中，请访问[Html5 存储文档](http://diveintohtml5.info/storage.html)以获取更多详细信息。使用它，您可以在本地临时/永久存储中间标志，然后访问您的标志，然后根据标志更改文本框的状态

```
if(sessionStorage.getItem('flag')=='1')
{
document.getElementById("textbox").disabled = true;
} 
```

在您的 onload 函数中添加上述检查。

重定向到下一页时使用

```
sessionStorage.setItem('flag',1); 
```

设置标志

# asp.net - 单击太阳菜单时，如何确保顶级菜单项具有选定的 CSS 类？

> ID：11009647
> 
> 赞同：1
> 
> 时间：2012-06-13T06:55:34.387
> 
> 标签：asp.net, css, menu, tabs

我有两个用于**选项卡和子选项卡的****ASP.NET 4.0 菜单控件**和**一个用于页面左侧导航的树控件**。

 ****我正在使用**选定的 CSS 类**来确保**选定的选项卡/子选项卡/导航**是**不同的颜色**。

每当我选择这些控件的项目之一时，**选择的 CSS 应用在它上面**但父选择**状态丢失**。

在查看子页面时，如何确保**顶级菜单项具有选定的 CSS 类**？

**主菜单：**

```
<asp:SiteMapDataSource ID="SiteMapDataSource1" runat="server" ShowStartingNode="false" />

<asp:Menu ID="mainMenu" runat="server" Orientation="Horizontal" 
MaximumDynamicDisplayLevels="0" RenderingMode="Table"
DataSourceID="SiteMapDataSource1"
ViewStateMode="Enabled">
<StaticMenuStyle CssClass="menu"/>
<StaticMenuItemStyle CssClass="menuItem"/>
<StaticSelectedStyle CssClass="menuSelectedItem"/>
</asp:Menu> 
```

**子菜单：**

```
<asp:SiteMapDataSource ID="SiteMapDataSource2" runat="server" ShowStartingNode="false"     StartingNodeOffset="1"/>

<asp:Menu ID="Menu1" runat="server" Orientation="Horizontal" 
MaximumDynamicDisplayLevels="0" RenderingMode="Table"
DataSourceID="SiteMapDataSource2"
ViewStateMode="Enabled">
<StaticMenuStyle CssClass="menu"/>
<StaticMenuItemStyle CssClass="menuItem"/>
<StaticSelectedStyle CssClass="menuSelectedItem"/>
</asp:Menu> 
```

**左侧导航：**

```
<asp:SiteMapDataSource ID="SiteMapDataSource3" runat="server" ShowStartingNode="false" 
StartingNodeOffset="2" />

<asp:TreeView ID="TreeView1" runat="server"
DataSourceID="SiteMapDataSource3" 
ExpandDepth="2" NodeIndent="0">
<ParentNodeStyle Font-Bold="False" />
<HoverNodeStyle ForeColor="#5555DD" />
<SelectedNodeStyle BackColor="GhostWhite"/>
<NodeStyle BackColor="LightSteelBlue"/>
</asp:TreeView> 
```

**CSS：**

```
.menu
{
  background-color: black;
  font-size: 12px;
  font-family: Arial;
  font-weight: bold;
}
.menuItem td
{
  height: 24px;
  width: 120px; 
  background: url(Images/unselectedTab.jpg) no-repeat;
  text-align: center;
  vertical-align: middle;
}

.menuSelectedItem td
{
 height: 24px;
 width: 120px;
 background: url(Images/selectedTab.jpg) no-repeat;
 text-align:center;
 vertical-align:middle;  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:13:39.320

没有阅读您的代码，但根据我的说法，如果您想保留所选的父菜单项，那么您将必须检查您的代码是否没有被删除。在您的脚本中可能有一些代码，例如 -

```
$(this).parent().removeClass("selected"); 
```

如果存在，请评论此行并检查它是否有效。如果没有这样的事情，那么您将不得不申请如下课程 -

```
$(this).parent().addClass("selected"); 
```

上述两行代码，您都会在单击菜单时调用的函数内部找到。****

# c# - Convert.DateTime 引发错误：字符串未被识别为“06-13-2012”的有效日期时间

> ID：11009655
> 
> 赞同：7
> 
> 时间：2012-06-13T06:56:40.270
> 
> 标签：c#, datetime

我在我的数据库中插入一个日期，该值来自：

```
s.theDate = Convert.ToDateTime("06-13-2012"); 
```

我收到错误消息“字符串未被识别为有效的日期时间”。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-13T06:59:58.417

试试这个：

```
DateTime.ParseExact("06-13-2012", "MM-dd-yyyy", System.Globalization.CultureInfo.InvariantCulture) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T07:01:46.537

```
s.theDate = DateTime.ParseExact("06-13-2012", "MM-dd-yyyy", System.Globalization.CultureInfo.InvariantCulture) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T07:26:36.810

查看使用 an`ToString`的`DateTime`类型的行为`InvariantCulture`，这是：

```
new DateTime(2012, 6, 13).ToString(CultureInfo.InvariantCulture) 
```

结果是：

```
06/13/2012 00:00:00 
```

因此，相反，可以假设用不变的文化解析日期可以正常工作：

```
Convert.ToDateTime("06-13-2012", CultureInfo.InvariantCulture) 
```

......确实如此。

话虽如此，*假设*日期/时间格式有点危险。我想说的是，在考虑 UI 时，您希望格式是特定于文化的。否则，您会希望格式与文化无关。尽管 Microsoft 已采用 MM/dd/yyyy 作为与文化无关的格式，但它是一种模棱两可的格式，我不想在其上构建大型系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T07:04:03.600

只需`ParseExact`按照已经建议的方式使用或填充`Convert.ToDateTime`第二个参数：

```
Convert.ToDateTime("06-13-2012", new DateTimeFormatInfo{FullDateTimePattern = "MM-dd-yyyy"}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T07:29:43.230

您可以（imo 应该）使用一个名为 ISO 8601 的全球标准。使用这个标准，这就是你最终的结果。

```
Convert.ToDateTime("2012-06-03"); 
```

# .net - vb 9 net 激活richtextbox上的链接

> ID：11009656
> 
> 赞同：0
> 
> 时间：2012-06-13T06:56:47.737
> 
> 标签：.net, richtextbox, hyperlink

我有一个richboxtext，我有一些带有链接的文本。如何激活它们？现在它们被找到了，光标变为手形，我可以按下它们，但没有其他反应。当我单击它时，我想在浏览器中打开它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:59:55.757

Protected Sub Link_Clicked(ByVal sender As Object, ByVal e As System.Windows.Forms.LinkClickedEventArgs) 处理 RichTextBox1.LinkClicked System.Diagnostics.Process.Start(e.LinkText) End Sub

我们就是我:))

# facebook - 来自页面（应用程序）选项卡的 Facebook 通知

> ID：11009660
> 
> 赞同：0
> 
> 时间：2012-06-13T06:57:03.517
> 
> 标签：facebook

我正在 facebook 中开发一种问答应用程序，用户提出问题，管理员回答他们。当管理员回答问题时，我希望能够向用户发送通知（facebook 地球的东西）。我发现我可以使用[请求对话框](https://developers.facebook.com/docs/reference/dialogs/requests/)完成，但如果可以代表页面而不是管理员本人发送对话框，我无法找到任何地方。

所以我的问题可以做到这样我就不必显示管理员姓名了吗？也许有更好的方法来完成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:43:12.660

请求对话框旨在邀请用户使用该应用程序，而不是发送其他通知，因为该对话框用于“用户到用户”通知，而您所描述的是“应用程序到用户”通知。

应用程序请求不会出现在地球图标中，但用户会在书签应用程序部分的应用程序名称旁边看到一个计数器（显示通知数量）。

[您可以在请求文档](http://developers.facebook.com/docs/requests/)和[社交渠道](http://developers.facebook.com/docs/channels/)中阅读有关此问题的更多信息。

# android - 如何将日期字符串与存储在 android 中的 sqlite 中的日期进行匹配或比较？

> ID：11009662
> 
> 赞同：0
> 
> 时间：2012-06-13T06:57:16.217
> 
> 标签：android, date, sqlite, datepicker

实际上，我在过去 3 或 4 周内一直在努力解决这个问题，但还没有解决。我正在使用 android 中的 Sqlite 数据库，其中我在我的活动中使用了日期选择器控件一旦用户设置了日期，我会将日期存储到字符串中，然后将其发送到数据库，它工作正常但是当我试图根据日期选择器控件上设置的日期来检索日期，然后它没有给我所需的输出，它只显示了在我的目录日志中打开数据库的一行。

数据库类

```
//Table Definition with Columns
private static final String CREATE_MYCOMPANY =
    "create table company " + " (" + "_id" + " integer primary key autoincrement, "
    + "company_date" +" date);";

//Insert Method
public long create(String str) {

    ContentValues args = new ContentValues();
    args.put(KEY_COMPANY_DATE, str);

    return mDb.insert(MYCOMPANY, null,args);
}

//Method For Fetching the row on the basis of Date.//
    public Cursor fetchdate(String datr) throws SQLException, ParseException {

    Cursor mCursor =
        mDb.query(true, MYCOMPANY, new String[] {KEY_COMPANY_ID,
                KEY_COMPANY_DATE}, KEY_COMPANY_DATE /*+" BETWEEN date('2012-6-10') AND date('2012-6-14')"*/ 
                 + " = " + datr, null,
                null, null, null, null);

    if (mCursor != null) {
        mCursor.moveToFirst();
    }

    return mCursor;

} 
```

活动类代码

```
//Date picker 
DatePicker  dt = (DatePicker)findViewById(R.id.datePicker1);

//Converting the Date into the string format  
String day = String.valueOf(dt.getYear())+"-" +String.valueOf(dt.getMonth() + 1)
            +"-"+String.valueOf(dt.getDayOfMonth());

//Method for displaying the rows of table on date basis
public void DisplayAllCmpData(){

        employeeTable.open();
        try{
          Cursor c = employeeTable.fetchdate("2012-6-13");
          if (c.moveToFirst())
           {
             do {
              System.out.println("bool2");
                 DisplayCmpTitle(c);
                } while (c.moveToNext());
           }
         }catch(Exception e){
        System.out.println(e);
     Toast.makeText(this,e.toString(),Toast.LENGTH_LONG).show();
           }
         employeeTable.close();
    }

//Function For Displaying the all record.//    
    public void DisplayCmpTitle(Cursor c)
    { 

    System.out.println("bool");
       Toast.makeText(this,
           "ID: " + c.getString(0) + "\n" +
           "DATE: " + c.getString(1)
           , Toast.LENGTH_LONG).show();

    } 
```

提前感谢您的任何帮助！！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:11:46.127

```
mDb.query(true, MYCOMPANY, new String[] {KEY_COMPANY_ID,
                KEY_COMPANY_DATE}, KEY_COMPANY_DATE /*+" BETWEEN date('2012-6-10') AND date('2012-6-14')"*/ 
                 + " = '" + datr+"'", null,
                null, null, null, null); 
```

# android - 使用解析中的 api 在 android 中发送推送通知

> ID：11009663
> 
> 赞同：0
> 
> 时间：2012-06-13T06:57:20.263
> 
> 标签：android, notifications, push-notification, parse-platform

我目前正在为客户端开发一个 android 应用程序，它需要使用来自 parse.com 的推送通知。我已经能够从模拟器发送通知，也可以在有人从那里发送消息时从服务器接收消息，但我想这样做，以便服务器根据条件自动向我发送通知。是否有可能，如果可以，有人可以指导如何去做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:35:52.557

您的客户需要注意情况并发送消息。您从哪个事件触发了通知？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T01:43:27.953

你可以使用 Parse Cloud Code。如果您在 3rd 方服务器中有 XML 解析代码，请通过 Parse Cloud Code 中的 REST 对 3d 方服务器进行外部调用。在 Parse Cloud Code 中，您可以检查日期属性更改，如果满足您的条件，您可以从 Parse Cloud Code 发送推送通知。因此，您的 android 应用程序应该只与 Parse Cloud Code 通信，并让云代码与您的 3rd 方服务器通信。

# android - fm 作为 Eclipse 中的 android 应用程序

> ID：11009667
> 
> 赞同：0
> 
> 时间：2012-06-13T06:57:23.340
> 
> 标签：android

我在下面的行中有一个错误。

```
aManager = (AudioManager)getSystemService(this.AUDIO_SERVICE); 
```

该错误表明`Context.AUDIO_SERVICE`应该以静态方式访问静态字段。解决办法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T06:58:40.513

以静态方式访问它。答案就在您的问题本身中：

```
aManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE); 
```

# wpf - 对 AutomationElement 使用 FindFirst 或 FindAll 方法后找不到控件

> ID：11009673
> 
> 赞同：1
> 
> 时间：2012-06-13T06:58:01.813
> 
> 标签：wpf, ui-automation

我为 wpf 应用程序自动化 ui 测试。在做了一些步骤之后，我试图找到控件，但是当我使用 FindFirst 或 FindAll 方法时，窗口中的许多控件都丢失了。现在，我做了一个实验： 第一部分：

```
System.Diagnostics.Process.Start(@"C:\application.exe");
Thread.Sleep(2000);
Condition windowCondition = new PropertyCondition(AutomationElement.NameProperty, "Window Title");

AutomationElement window = AutomationElement.RootElement.FindChildByCondition(windowCondition);
window.SetFocus();
int x = 512;
int y = 384;
SetCursorPos(x, y);

// Click on coordinates:
mouse_event(MOUSEEVENTF_LEFTDOWN, x, y, 0, 0);
mouse_event(MOUSEEVENTF_LEFTUP, x, y, 0, 0); 
```

之后，我可以找到我需要的所有控件，并且所有工具（UISpy、UIAVerify ant others）都可以找到所有控件。

第 2 部分：我只添加了 2 个字符串：

```
System.Diagnostics.Process.Start(@"C:\application.exe");
Thread.Sleep(2000);
Condition windowCondition = new PropertyCondition(AutomationElement.NameProperty, "Window Title");

AutomationElement window = AutomationElement.RootElement.FindChildByCondition(windowCondition);

// New strings here:
Condition controlCondition = new PropertyCondition(AutomationElement.AutomationIdProperty, "ConnectButton");
AutomationElement control = window.FindFirst(TreeScope.Descendants, controlCondition);

window.SetFocus();
int x = 512;
int y = 384;
SetCursorPos(x, y);

// Click on coordinates:
mouse_event(MOUSEEVENTF_LEFTDOWN, x, y, 0, 0);
mouse_event(MOUSEEVENTF_LEFTUP, x, y, 0, 0); 
```

现在，我可以发现那些控件并不真正可见，而那些可见的 - 未检测到。

怎么了？谢谢

# sphinx - 狮身人面像中的自定义排序/按特定字段上的匹配和距离对结果进行排序

> ID：11009681
> 
> 赞同：0
> 
> 时间：2012-06-13T06:58:37.277
> 
> 标签：sphinx

我正在使用**狮身人面像 2.0**。

**我想达到以下结果：**

1.  用户将输入带有其他搜索词的标签，与用户输入标签相关联的文档应该排在最前面，按距离排序。
2.  之后，文档不包含按距离排序的那些标签。

**我在做什么：**

我正在使用@name、@tag、@streetname 等同时搜索不同的参数，所以我在下面使用

`$cl->SetMatchMode(SPH_MATCH_EXTENDED);`

并使用按距离对结果进行排序`$cl->SetSortMode(SPH_SORT_EXTENDED, '@geodist asc');`

标签字段可以包含多个值，我正在使用 OR 运算符来获得所需的结果。

如果我只搜索@tags，那么我就能达到我提到的要求。但是如果用户输入是@tag food|dinner @city london @name tax

然后结果名称为：London Taxi，街道：London 位于顶部或其他位置，按 lat-long 打破排序顺序。因为伦敦有两个参数。我只想按标签排序，不想在排序顺序中包含其他搜索词的权重。

排名模式为：`$cl->setRankingMode(SPH_RANK_PROXIMITY_BM25);`

有什么建议可以解决这个问题吗？或任何其他方式来实现它。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:27:38.567

我认为解决这个问题的方法是安排标签字段上的匹配以提高排名。必须对其进行测试，但类似这样的东西......

```
$cl->setFieldWeights(array('tags' => 100000));

$cl->setSelect("*,IF(@weight>100000,1,0) AS matchtags");

$cl->SetSortMode(SPH_SORT_EXTENDED, 'matchtags DESC, @geodist ASC'); 
```

# python - 查找没有edge-networkx python的节点对

> ID：11009691
> 
> 赞同：3
> 
> 时间：2012-06-13T06:59:28.193
> 
> 标签：python, nodes, networkx, graph-theory

我想找到所有可能的节点对，*它们没有*连接它们的边，然后检查这些节点对是否在另一个图中有边。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:15:39.070

如果您不关心性能，那么您可以尝试：

```
g1Edges = Graph1.edges()
notG1Edges = set()
for a in Graph1.nodes():
    for b in Graph1.nodes():
        if a != b and (a,b) not in g1Edges:
            notG1Edges.add( (a, b) )
# print edges missed in Graph1 and Graph2
print notG1Edges.difference( Graph2.edges_iter() ) 
```

注意1：这是有向图

注意 2：如果您想从 Graph2 中找到不存在于 Graph1 中的边子集，那么假设最好对 Graph2 中的边进行操作

# javascript - Qunit 可以自动运行测试吗？

> ID：11009695
> 
> 赞同：0
> 
> 时间：2012-06-13T06:59:40.973
> 
> 标签：javascript, qunit

我在 Qunit 中创建了几个测试。是否可以自动运行测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:41:33.833

我想你可以试试这种方式

```
<script type="text/javascript">
    var tests = [
        { page: "Page01.htm", title: "Test Page 01 - click me to view test page" },
        { page: "Page02.htm" },
        { page: "Page01.htm" }
    ];
    var seq = true; // false to run tests simultaneously
    var runerDne = function(failures, total) {
        // get notified when runner completes
    }
    QUnit.run(tests, seq, runerDne); 
```

这会自动加载 3 页并相应地执行。希望这对您有所帮助。

# c - OpenGL中奇怪的方形照明伪影

> ID：11009698
> 
> 赞同：7
> 
> 时间：2012-06-13T06:59:57.117
> 
> 标签：c, opengl, lighting

我有一个程序可以生成高度图，然后使用 OpenGL 将其显示为网格。当我尝试添加照明时，最终会出现奇怪的方形覆盖网格。它们在某些区域比其他区域更引人注目，但始终存在。

我使用的是四边形网格，但切换到三角形网格后没有任何变化。我已经使用了至少三种不同的方法来计算顶点法线，都具有相同的效果。我使用着色器手动进行照明，但使用内置 OpenGL 照明系统时没有任何变化。

我最新的法线生成代码（面是顶点的索引数组，即顶点数组）：

```
int i;
for (i = 0; i < NINDEX; i += 3) {
    vec v[3];
    v[0] = verts[faces[i + 0]];
    v[1] = verts[faces[i + 1]];
    v[2] = verts[faces[i + 2]];

    vec v1 = vec_sub(v[1], v[0]);
    vec v2 = vec_sub(v[2], v[0]);

    vec n = vec_norm(vec_cross(v2, v1));

    norms[faces[i + 0]] = vec_add(norms[faces[i + 0]], n);
    norms[faces[i + 1]] = vec_add(norms[faces[i + 1]], n);
    norms[faces[i + 2]] = vec_add(norms[faces[i + 2]], n);
}

for (i = 0; i < NVERTS; i++) {
    norms[i] = vec_norm(norms[i]);
} 
```

虽然这不是我使用的唯一代码，但我怀疑它是否是问题的原因。

我用以下方法绘制网格：

```
glEnableClientState(GL_VERTEX_ARRAY);
glVertexPointer(3, GL_FLOAT, 0, verts);

glEnableClientState(GL_NORMAL_ARRAY);
glNormalPointer(GL_FLOAT, 0, norms);

glDrawElements(GL_TRIANGLES, NINDEX, GL_UNSIGNED_SHORT, faces); 
```

而且我目前没有使用任何着色器。

这可能是什么原因造成的？

编辑：更全面的截图集：

*   [线框](http://i.stack.imgur.com/6LIK3.png)
*   [平面着色，OpenGL 光照](http://i.stack.imgur.com/NJ6bo.png)
*   [平滑着色，OpenGL 光照](http://i.stack.imgur.com/WTJsK.png)
*   [在着色器中完成照明](http://i.stack.imgur.com/AYNUJ.png)

对于最后一个，着色器代码是

顶点：

```
varying vec3 lightvec, normal;

void main() {
    vec3 lightpos = vec3(0, 0, 100);
    vec3 v = vec3(gl_ModelViewMatrix * gl_Vertex);
    normal = gl_NormalMatrix * gl_Normal;

    lightvec = normalize(lightpos - v);

    gl_Position = ftransform();
} 
```

分段：

```
varying vec3 lightvec, normal;

void main(void) {
    float l = dot(lightvec, normal);
    gl_FragColor = vec4(l, l, l, 1);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:59:17.113

您需要在片段着色器中规范化法线，如下所示：

```
varying vec3 lightvec, normal;

void main(void) {
    vec3 normalNormed = normalize(normal);
    float l = dot(lightvec, normalNormed);
    gl_FragColor = vec4(l, l, l, 1);
} 
```

不过，这可能很昂贵。在这种情况下，使用定向光也可以使用顶点照明。所以在顶点着色器中计算光照值

```
varying float lightItensity;

void main() {
    vec3 lightpos = vec3(0, 0, 100);
    vec3 v = vec3(gl_ModelViewMatrix * gl_Vertex);
    normal = gl_NormalMatrix * gl_Normal;

    lightvec = normalize(lightpos - v);

    lightItensity = dot(normal, lightvec);

    gl_Position = ftransform();
} 
```

并在片段着色器中使用它，

```
varying float light;

void main(void) {
    float l = light;
    gl_FragColor = vec4(l, l, l, 1);
} 
```

我希望这能解决它，如果没有，请告诉我。

编辑：这是一个小图，解释了最有可能发生的事情

![在此处输入图像描述](../Images/75636495bc1f68c7c55fa619afec846a.png)

编辑2：

如果这没有帮助，请添加更多三角形。插入高度图的值并在其间添加一些顶点。

或者，尝试更改您的细分方案。例如，像这样的等边三角形网格可以使伪影不那么突出。

![在此处输入图像描述](../Images/80ba8af268892cec05302078d56b6024.png)

你必须在你的高度图上做一些插值。

否则我不知道..祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:02:57.360

对于非着色器版本，我没有明确的答案，但我想补充一点，如果您在片段着色器中进行逐像素照明，您可能应该在片段着色器中对法线和 lightvec 进行归一化。

如果你不这样做，它们就不是单位长度（两个归一化向量之间的线性插值不一定是归一化的）。这可以解释您在着色器版本中看到的一些伪影，因为点积的大小会根据与顶点的距离而变化，这看起来就像您所看到的那样。

编辑：另一个想法，在渲染非着色器版本时，您是否对网格进行了任何非均匀缩放（不同的 x、y、z）？如果你缩放它，那么你需要通过反比例因子修改法线，或者设置`glEnable(GL_NORMALIZE)`. 有关更多信息，请参见此处： [http ://www.lighthouse3d.com/tutorials/glsl-tutorial/normalization-issues/](http://www.lighthouse3d.com/tutorials/glsl-tutorial/normalization-issues/)

# javascript - 客户端设置了 multipart/form-data 请求的文件部分的内容类型错误

> ID：11009706
> 
> 赞同：3
> 
> 时间：2012-06-13T07:00:37.690
> 
> 标签：javascript, xmlhttprequest, multipartform-data, asyncfileupload, http-status-code-400

我正在尝试`multipart/form-data`使用以下 JavaScript 和 jQuery 发送：

```
var formData = new FormData();

formData.append("projectName", $("#projectNameInput").val());

var file = $("#fileInput")[0].files[0];
formData.append("content", file);

var xhr = new XMLHttpRequest();
xhr.open('POST', '/project', true);
xhr.onload = function(ev) {
  // Handling logic omitted
};
xhr.send(formData); 
```

但是，某些客户端浏览器（Firefox 和 Chrome）`400 Bad Request`从服务器接收。在检查标头和请求负载时，我发现一些浏览器为文件设置了明确的内容类型，如下所示：

```
------WebKitFormBoundaryEuDIpEU2Ci8VNwNJ 
Content-Disposition: form-data; name="content"; filename="testfile.ext" 
Content-Type: EXT Project Data (64bit)

------WebKitFormBoundaryEuDIpEU2Ci8VNwNJ 
```

在一个工作请求中，`Content-Type`应该如下：`Content-Type: application/octet-stream`，服务器可以正确处理。

我怀疑这与浏览器的配置或文件关联有关。有没有办法为请求的文件部分显式设置内容类型？

某些使用 Firefox 和 Chrome 的用户会出现此问题。但是，有些用户可以使用 Chrome 和 Firefox 成功上传。我们的应用程序不支持 IE。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T07:18:36.687

好的，我们设法解决了这个问题。事实证明，注册到客户端系统的内容类型实际上在某些安装了某些第三方应用程序的客户端计算机上格式错误。

我们无法以编程方式更改部件的内容类型浏览器集。正如 Michael-O 指出的，您应该始终使用在[IANA](http://www.iana.org/assignments/media-types/index.html)注册的内容类型。这是标准的[链接](https://www.rfc-editor.org/rfc/rfc2045#section-5)。

在这种情况下，将非法内容类型注册到客户系统的是第三方软件。内容类型可能不包含空格，因此内容类型`EXT Project Data`显然是非法的。我们通过将注册的内容类型更改为[自定义内容](http://en.wikipedia.org/wiki/Internet_media_type#Prefix_x)类型来解决此问题。所以我们现在使用的内容类型是`application/x-ext-project-data`，然后在服务器端正确处理。

# windows-8 - Metro App Certification 因字节码生成而挂起性能测试

> ID：11009713
> 
> 赞同：0
> 
> 时间：2012-06-13T07:01:28.377
> 
> 标签：windows-8, microsoft-metro

我尝试使用 Javascript 构建 Metro-style-app，当我运行 Windows App Cert Kit (WACK) 认证工具时，测试总是在性能测试中失败，并显示以下消息：

> **测试字节码生成时检测到以下错误：**
> 此包可用于开发或 Authoringmodus。卸载软件包并以正常方式重新安装。

我在我的应用程序中使用 jquery 和一些 jquery-mobile 库。那是问题吗？该错误对我来说没有意义，因为它没有说明我应该重新安装哪个包。我也尝试卸载应用程序本身（通过右键单击应用程序）并在 VS2012 的 Release-Modus 中重新构建它，但 WACK 工具总是提示此错误:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:25:33.227

如果您不运行 Store -> Create App Package 并选择“否”并按下一步按钮，则发现 WACK 工具总是显示此错误。之后，WACK-Tool 会自动启动并通过字节码生成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:49:16.050

首先保存所有带有签名的 utf 8 编码格式的 javascript 文件，![在此处输入图像描述](../Images/3381e281f78a97a31ad5450dc16773fb.png) 然后创建应用程序包 [http://msdn.microsoft.com/en-us/library/windows/apps/hh975357.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh975357.aspx)

那么如果您已经安装了最新的 Windows 应用程序认证工具包，那么您将能够在创建应用程序包后看到使用 Windows 应用程序认证工具包按钮运行。

# java - 使用 map-reduce 构建分布式 KD 树

> ID：11009714
> 
> 赞同：2
> 
> 时间：2012-06-13T07:01:32.573
> 
> 标签：java, hadoop, mapreduce, kdtree

我正在尝试使用 map-reduce 构建分布式 KD 树。分布式 KD 树的描述可以在这里找到[Dkd-Tree](http://www.mohamedaly.info/research/distributed-kd-trees)

我有一个尺寸为 20 的图像的特征向量。我必须根据上面的链接构建分布式 kd 树，还可以查看此图像[Kdtree](https://78462f86-a-fa7ed8f8-s-sites.googlegroups.com/a/mohamedaly.info/www/files/distributed-kd-trees-example.png?attachauth=ANoY7cpl8XFabo9DJ9YnOr1h0IxLO2_LtII8z7vjN6sRVoaXx_B8Yzd8zrj6e_EvE3ytAG7NY6wo-2kSZYaGSGJUxhYfEwdydOm5kOgwc9ZybpNukCkJvtkIaX20-EbJ7T7TIzbWajYXOqYh_5y6wO6QnZJvMnW9MMiDpVF_gq0_xAHWjoyJ_TPEK7uSPlnQ0z13S56-0yg-BZ_XZrXACjDUqdpjeQfDEbilrt73M_e1-SXFnRokrpY%3D&attredirects=0) ![kdree](../Images/c062ffec7c15ac23bf4dabefbd125095.png)

我已经设置了数百万张图像。 **那么我可以使用什么方法来构建树的顶部（图像的第二部分）？** 我对各个节点之间的图像分布感到困惑。

***如果树是在第一次 map-reduce 操作中构建的 HDFS，那么我如何在下一次 map-reduce 操作中访问它？***

# vb.net - VB.Net UI 丢失

> ID：11009715
> 
> 赞同：1
> 
> 时间：2012-06-13T07:01:33.607
> 
> 标签：vb.net, winforms, visual-studio-2012

我正在使用 Visual Studio 2012 制作 Vb.Net 应用程序。简而言之，我添加了带有一些 RibbonItems 的 DotNetBar RibbonControl 作为我的菜单。发生的事情是我的一个选项卡以及其中的所有按钮突然丢失了。我在我的文档大纲上搜索过它仍然没有运气。

但更奇怪的是，当我尝试使用相同的名称重新创建它时，它会显示一个警报“属性值无效”，并显示消息“名称 AppPOButton 已被另一个组件使用”。

当我在表单的设计器上检查它时，我确实发现了以下几行：

```
Me.AppPOButton = New DevComponents.DotNetBar.ButtonItem() 
```

和

```
 'AppPOButton
    '
    Me.AppPOButton.ButtonStyle = DevComponents.DotNetBar.eButtonStyle.ImageAndText
    Me.AppPOButton.Image = Global.ProjectBMT.My.Resources.Resources.approval
    Me.AppPOButton.ImageFixedSize = New System.Drawing.Size(40, 40)
    Me.AppPOButton.ImagePosition = DevComponents.DotNetBar.eImagePosition.Top
    Me.AppPOButton.Name = "AppPOButton"
    Me.AppPOButton.SubItemsExpandWidth = 14
    Me.AppPOButton.Text = "Approve"
    Me.AppPOButton.Visible = False 
```

和

```
 Friend WithEvents AppPOButton As DevComponents.DotNetBar.ButtonItem 
```

有没有人可以解释为什么会这样？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-01T21:39:59.183

这种行为本身很奇怪，但实际上不是问题，所有功能区样式都适用于“容器”，如果您检查功能区控件并单击左上角按钮会看到这些移动四个容器的小箭头，这些对象持有按钮、图像和其他控件。在右侧面板（属性）的设计窗口中，您仍然可以看到删除选项卡时“丢失”的控件的名称，这也是一个容器。

脚步：

1.  在您的设计视图中添加一个容器并将其停靠到功能区控件窗体中。
2.  单击右上角按钮（右箭头）并选择“布局功能区”，这将调整所包含控件的长度和高度。
3.  添加将包含您拥有的所有控件的选项卡。

它们仍然处于设计器形式的事实证明它们仍然存在，这种行为只是在您的表单上方设置的控件的位置和顺序中的一个小故障；-)

# oop - OOP - 如果一个类创建一个类的实例，该实例是否也成为一个对象？

> ID：11009719
> 
> 赞同：0
> 
> 时间：2012-06-13T07:01:53.253
> 
> 标签：oop, class, object

听起来不像公案，只是想知道是否有关于类和对象的明确规则。我曾经认为类是蓝图，而对象是它们的创造。但是如果一个蓝图的组合创造了另一个蓝图，那么后一个蓝图是否也成为一个对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:38:15.657

你的问题似乎有点哲学...... :) “对象”和“实例”在 OOP 中是同义词。

如果我正确理解了您的问题，您的疑问是：**“如果对象仍然是由定义其类型的另一个类创建的对象，那么它仍然是对象吗？”**

答案是**“是”**，实例是按照其类定义的“模型”创建的对象，但由于许多原因，您可以以间接方式实例化一个类，例如静态方法（工厂类的工厂方法，例如）而不是直接使用`new`语句。

如果您想看到一些，Java 中的一个简单示例可能是：

```
public class MyClass {
    public MyClass(){}
}

public class MyClassFactory{

    public getInstance(){
        return new MyClass();
    }
} 
```

在这种情况下，实例不是由 直接返回`MyClass`，而是从其工厂类返回。然而它也是一个对象......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:07:40.243

在我所知道的几乎每个 OO 环境中，实例都与对象*相同*。

`new`对象/实例是由客户端创建（例如 with ）还是由类（例如使用单例或工厂）创建并不重要。

如果您在类的上下文中谈论蓝图，那么从蓝图创建蓝图是继承，而不是实例化。

# sql - sql里面的列数据操作

> ID：11009721
> 
> 赞同：1
> 
> 时间：2012-06-13T07:01:58.257
> 
> 标签：sql, ms-access

我有一个增加日期（有间隙）和相应值的表

```
date        | value
01.02.2012  | 10
02.02.2012  | 11
03.02.2012  | 33
07.02.2012  | 34
08.02.2012  | 13 
```

我正在寻找日期之间值的差异表，如下所示：

```
02.02.2012 - 01.02.2012  | 11 - 10 = +1
03.02.2012 - 02.02.2012  | 33 - 11 = +22
07.02.2012 - 03.02.2012  | 34 - 33 = +1
08.02.2012 - 07.02.2012  | 13 - 34 = -21 
```

现在我将表加载到 excel 中并在那里进行计算，但我觉得有一种可能的方法可以通过在数据库中使用 sql 命令来获取它。有没有？

UPD。实际上我使用 access 作为数据库系统，但如果有区别，我可以切换到最适合的一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T07:08:07.043

您没有指定 DBMS，但这是适用于大多数现代 DBMS 的 ANSI SQL（它不完全是您想要的输出，但它确实显示了两个值之间的差异）。

```
select date, 
       value,
       value - lag(value) over (order by date) as diff
from your_table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:45:40.943

由于我认为无法`Lag`访问类似的分析功能，因此您需要使用相关的子查询：

```
SELECT  Date,
        Value,
        NextDate,
        NextValue,
        (NextValue - Value) AS ValueDifference,
        DATEDIFF("D", Date, NextDate) AS DateDifference
FROM    (   SELECT  T.Date,
                    T.Value,
                    (   SELECT  TOP 1 Date
                        FROM    LagTest T1
                        WHERE   T1.Date >  T.Date
                        ORDER BY Date
                    ) AS NextDate,
                    (   SELECT  TOP 1 Value
                        FROM    LagTest T1
                        WHERE   T1.Date >  T.Date
                        ORDER BY Date
                    ) AS NextValue
            FROM    LagTest T
        ) AS T 
```

# c# - C# 文件写入 - 插入随机字符

> ID：11009722
> 
> 赞同：2
> 
> 时间：2012-06-13T07:01:58.900
> 
> 标签：c#, file, stream

我正在使用 Visual Studio 2008 编写一个 C# 实用程序来合并数据库脚本以进行发布。

这是代码的样子

```
strPath = txtInputFolder.Text;

DirectoryInfo di = new DirectoryInfo(strPath);
FileInfo[] lstFile = di.GetFiles("*.sql");

string strScriptPath = System.IO.Path.Combine(strPath, lblOutput.Text);
FileStream foutput = System.IO.File.Create(strScriptPath);
BinaryWriter writer = new BinaryWriter(foutput, Encoding.UTF8);

string strLine;
foreach (FileInfo fi in lstFile)
{
   strLine = string.Empty;

   strLine = "\r\n\r\n/*--------- " + fi.Name + " -------------*/" + "\r\n\r\n";
   writer.Write(strLine);

   //some processing
}

foutput.Close();
MessageBox.Show("Done"); 
```

此代码运行良好，并根据需要创建一个 script.sql 文件；但随机字符

```
 =

      /*--------- script1.sql -------------*/

      A

      /*--------- script2.sql -------------*/

      I

      /*--------- script3.sql -------------*/

      H 
```

这是一个一致的问题，我不确定出了什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T07:03:59.887

你为什么使用[BinaryWriter](http://msdn.microsoft.com/en-us/library/system.io.binarywriter.aspx)？顾名思义，这是用于编写二进制文件，而不是文本文件。请改用[StreamWriter](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)。还要确保您已将`IDisposable`资源包装在`using`语句中：

```
strPath = txtInputFolder.Text;
DirectoryInfo di = new DirectoryInfo(strPath);
FileInfo[] lstFile = di.GetFiles("*.sql");

string strScriptPath = System.IO.Path.Combine(strPath, lblOutput.Text);
using (FileStream foutput = System.IO.File.Create(strScriptPath))
using (StreamWriter writer = new StreamWriter(foutput, Encoding.UTF8))
{

    string strLine;
    foreach (FileInfo fi in lstFile)
    {
        strLine = string.Empty;

        strLine = "\r\n\r\n/*--------- " + fi.Name + " -------------*/" + "\r\n\r\n";
        writer.Write(strLine);
        //some processing
    }
}
MessageBox.Show("Done"); 
```

或者使用 LINQ 来简化您的代码：

```
string strPath = txtInputFolder.Text;
DirectoryInfo di = new DirectoryInfo(strPath);
FileInfo[] lstFile = di.GetFiles("*.sql");

string strScriptPath = Path.Combine(strPath, lblOutput.Text);

File.WriteAllLines(
    strScriptPath, 
    lstFile.Select(
        fi => string.Format(
            "\r\n\r\n/*--------- {0} -------------*/\r\n\r\n{1}", 
            fi.Name, 
            File.ReadAllText(fi.FullName)
        )
    ),
    Encoding.UTF8
);

MessageBox.Show("Done"); 
```

# android - 如何在 android 中读取本地 Pdf、XlS、DOC 文件

> ID：11009730
> 
> 赞同：2
> 
> 时间：2012-06-13T07:02:23.617
> 
> 标签：android, android-widget, android-webview, filereader, pdf-reader

我正在尝试创建一个项目，我需要我的应用程序在其中读取本地存储的 pdf、doc、xls 文件。

我不知道该怎么做。我想在我的 web 视图中显示所有本地存储的文件。是否有任何库来呈现这些文件或任何其他方式来做到这一点？如果有人可以指导我，那将是我的荣幸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:11:51.260

```
package com.cdn.file;

import java.io.File;
import java.io.FilenameFilter;
import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class FileExplorerActivity extends Activity {
    /** Called when the activity is first created. */
    private Button buttonList, buttonBack;
    // Stores names of traversed directories
    ArrayList<String> str = new ArrayList<String>();
    // Check if the first level of the directory structure is the one showing

    private static final String TAG = "F_PATH";
    private List<Item> fileList;
    private Item item;
    private File path = new File(Environment.getExternalStorageDirectory() + "");
    private String chosenFile = "";

    ListView listViewDir;
    ListAdapter adapter;
    ListFile listFileAdaptor;
    int value = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        listViewDir = (ListView) findViewById(R.id.listViewDir);

        buttonBack = (Button) findViewById(R.id.buttonBack);
        buttonBack.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

            }
        });

        buttonList = (Button) findViewById(R.id.buttonList);
        buttonList.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                if (isSdPresent()) {
                    Toast.makeText(FileExplorerActivity.this, "Un Mounted",
                            Toast.LENGTH_SHORT).show();
                    loadFileList();
                    listFileAdaptor = new ListFile(FileExplorerActivity.this,
                            fileList);
                    listViewDir.setAdapter(listFileAdaptor);

                }

                else {
                    Toast.makeText(FileExplorerActivity.this, "Mounted",
                            Toast.LENGTH_SHORT).show();
                }

            }

        });

        listViewDir.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
            //  if (value == 0) {
                    chosenFile = fileList.get(position).getFile();
                /*} else {
                    chosenFile = backList.get(position).getFile();
                    value =0;
                }*/
                File sel = new File(path + "/" + chosenFile);

                Log.v("Prashant111 ==", sel.toString());
                Log.v("Prashant222 ==", "" + sel.toURI());

                if (sel.isDirectory()) {

                    // Adds chosen directory to list
                    str.add(chosenFile);

                    path = new File(sel + "");

                    loadFileList();
                    listFileAdaptor = new ListFile(FileExplorerActivity.this,
                            fileList);
                    listViewDir.setAdapter(listFileAdaptor);

                    // Log.d(TAG, path.getAbsolutePath());

                    Log.d("Prashant333 ==", "" + path.toURI());

                    Log.d("Prashant444 ==", "" + path.toString());

                }

                // Checks if 'up' was clicked

                // File picked
                else {
                    Intent intent = new Intent(Intent.ACTION_VIEW);
                    Uri uri = Uri.fromFile(new File(chosenFile));
                    intent.putExtra(Intent.ACTION_VIEW, uri);
                    Intent chooser = Intent.createChooser(intent, "Prashant");
                    startActivity(chooser);

                }

            }
        });
    }

    public static boolean isSdPresent() {
        return android.os.Environment.getExternalStorageState().equals(
                android.os.Environment.MEDIA_MOUNTED);

    }

    private class Item {
        public String file;
        public int icon;

        public String getFile() {
            return file;
        }

        public void setFile(String file) {
            this.file = file;
        }

        public int getIcon() {
            return icon;
        }

        public void setIcon(int icon) {
            this.icon = icon;
        }

    }

    private void loadFileList() {
        try {
            path.mkdirs();
        } catch (SecurityException e) {
            Log.e(TAG, "unable to write on the sd card ");
        }

        // Checks whether path exists
        if (path.exists()) {
            FilenameFilter filter = new FilenameFilter() {
                @Override
                public boolean accept(File dir, String filename) {
                    File sel = new File(dir, filename);
                    // Filters based on whether the file is hidden or not
                    return (sel.isFile() || sel.isDirectory())
                            && !sel.isHidden();

                }
            };

            String[] fList = path.list(filter);
            fileList = new ArrayList<FileExplorerActivity.Item>();

            for (int i = 0; i < fList.length; i++) {
                item = new Item();
                item.setIcon(R.drawable.file_icon);
                item.setFile(fList[i]);
                // fileList.add(item);
                // Convert into file path
                File sel = new File(path, fList[i]);

                Log.v("sel ====", sel.toString());

                String name = sel.getName();

                // Set drawables
                if (sel.isDirectory()) {
                    item.setFile(name);
                    item.setIcon(R.drawable.directory_icon);
                    fileList.add(item);

                } else {
                    if (name.endsWith(".mp4") || name.endsWith(".3gp")) {
                        Log.v("aaaaaaaaaaa", name);
                        item.setFile(name);
                        item.setIcon(R.drawable.icon);
                        fileList.add(item);
                    } else {

                        fileList.remove(item);
                    }
                }
            }

        } else {
            Log.e(TAG, "path does not exist");
        }

    }

    class ViewHolder {
        TextView textViewName;
        ImageView view;
    }

    class ListFile extends BaseAdapter {
        List<Item> fileList;
        private LayoutInflater inflator;
        Context context;

        ListFile(Context context, List<Item> fileList) {
            this.fileList = fileList;
            this.context = context;
            inflator = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        }

        @Override
        public int getCount() {

            return fileList.size();
        }

        @Override
        public Object getItem(int position) {

            return fileList.get(position);
        }

        @Override
        public long getItemId(int position) {

            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            ViewHolder holder;
            if (convertView == null) {
                if (getItemViewType(position) == 0) {
                    convertView = inflator.inflate(R.layout.file_list, null);
                }

                holder = new ViewHolder();

                holder.textViewName = (TextView) convertView
                        .findViewById(R.id.textView1);
                holder.view = (ImageView) convertView
                        .findViewById(R.id.imageView1);

                convertView.setTag(holder);
                // Set the display text
            } else {
                holder = (ViewHolder) convertView.getTag();
            }
            holder.textViewName.setText(fileList.get(position).getFile());

            holder.view.setImageResource((fileList.get(position).getIcon()));

            return convertView;
        }
    }
} 
```

尝试使用此代码。我正在拍摄视频文件，但您可以指定所需的文件类型。

# sql-server - 主键值不变

> ID：11009731
> 
> 赞同：0
> 
> 时间：2012-06-13T07:02:25.833
> 
> 标签：sql-server, database, visual-studio-2010, sql-server-2008

我正在使用 Visual Studio 2010 处理 asp.net mvc3 项目和 sql server 2008。我有一个表，该表的主键是 int 数据类型。我将身份规范设置为“是”，身份是否为“是”，身份增量和身份种子“1”。当表为空并且可以轻松保存数据时一切正常，但是当我关闭 Visual Studio 时，再次打开它并想要保存数据时出现中断，显示主键的值为“1”。（我删除了一次数据库的数据，删除后第一行的主键是5，其他行是6,7，...）。这个问题的解决方案是什么？你的回答会很有帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:41:16.117

*自动间隙删除没有解决方案：身份列总是有间隙是有充分理由的。例如，删除的行可能在某个历史记录或审计表中，您不想重用它。

但是，您可以使用[DBCC CHECKIDENT重置列](http://msdn.microsoft.com/en-us/library/ms176057.aspx)

请注意此处的问题：[SQL 服务器标识列值从 0 而不是 1 开始](https://stackoverflow.com/questions/724668/sql-server-identity-column-values-start-at-0-instead-of-1/724689#724689)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:07:12.663

对主键使用序列类型可能会有所帮助...

# wordpress - 如何在 Wordpress 上显示登录用户的评论（仅）

> ID：11009734
> 
> 赞同：2
> 
> 时间：2012-06-13T07:02:40.043
> 
> 标签：wordpress, comments

我目前正在使用 wordpress 构建一个利基 Q+A 网站，用户可以使用该网站登录并发布问题或登录并回答问题。

问题当前存储为帖子，答案存储为评论。我希望问答者能够登录并在一个页面上查看他们的所有评论（答案），并带有指向原始帖子（问题）的链接。

我可以很容易地以这种方式列出帖子（即在一页上列出所有登录用户的帖子，即他们的原始问题），但似乎不能用评论来做到这一点（即在一页上列出所有登录用户的答案。）有吗有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:19:39.027

1.  单击“*设置”* > “*讨论*” ，然后从那里设置您想要的内容。有一个选项只允许注册会员发表评论。
2.  [http://pastebin.com/EJcghXAW](http://pastebin.com/EJcghXAW) - 请参阅第 39 行的代码，同样的方法也适用于您的情况。

评论的查询是正常的 wordpress 方式，但您需要将其包含在上面链接和指出的条件中。

**使用示例：**

```
<?php
if ( is_user_logged_in() ) {
    $user_id = get_current_user_id();
    $args = array(
        'status' => 'approve',
        'order' =>  'DESC',
        'user_id' => $user_id
    );
    $comments = get_comments($args);
    foreach($comments as $comment) :
        echo '<p>'; 
        echo($comment->comment_author . '<br />' . $comment->comment_content);
        echo '</p>';
    endforeach;
}
?> 
```

# c# - 从 Datalist 到 Edit.aspx

> ID：11009736
> 
> 赞同：0
> 
> 时间：2012-06-13T07:02:59.653
> 
> 标签：c#, asp.net, sql-server

我在一个房地产网站上工作，我正在使用数据列表（ASP.NET / C#）来显示列表，我不知道该怎么做的下一步是，如果我点击链接“编辑” , 选择该特定房屋的信息并将其显示在 Edit.aspx 中，并且数据列表的每个字段都显示在文本框中。

我的数据库非常简单，只有 4 个字段：IDhouse、Price、Bedroom、ImgHouse。

如果有人可以帮助我，我将不胜感激，谢谢。

代码：

```
<asp:DataList ID="DataList1" runat="server" DataKeyField="IDhouse" 
                        DataSourceID="SqlDataSource1"/>
                        <ItemStyle ForeColor="#000066" />
                        <ItemTemplate>
                            <table>
                                <tr>
                                    <td class="style2">
                                    Price : <asp:Label ID="Label1" runat="server" Text='<%# Eval("Price", "{0:C}") %>' /><br />
                                    Beds : <asp:Label ID="Label2" runat="server" Text='<%# Eval("Bedroom") %>' /><br />
                                        <br />
                                        <br />
                                        <br />
                                        <br />
                                        <br />
                                        <br />
                                        <br />
                                        <asp:HyperLink ID="HyperLink2" runat="server">Delete</asp:HyperLink>
                                        &nbsp;&nbsp;
                                        <asp:HyperLink ID="HyperLink1" runat="server">Edite</asp:HyperLink>
                                    </td>

                                    <td class="style1">
                                        <asp:Image  ID="Image1" runat="server" Height="201px" Width="331px"  
                                            ImageUrl='<%# "~/DisplayImg.ashx?IDhouse="+ Eval("IDhouse") %>'/>
                                    </td>
                                </tr>
                            </table>

                        </ItemTemplate>

      </asp:DataList> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:20:35.083

代替

```
<asp:HyperLink ID="HyperLink1" runat="server">Edite</asp:HyperLink> 
```

和

```
<a href="Edit.aspx?id=<%# Eval("IDhouse") %>">Edit</a> 
```

并在 Edit.aspx 页面上，根据从查询字符串中获取的 IDhouse 值加载所需的数据

# javascript - 使用 Razor 和 MVC3 对 webgrid 的寻呼机方法进行 CSS 修复

> ID：11009739
> 
> 赞同：6
> 
> 时间：2012-06-13T07:03:12.720
> 
> 标签：javascript, css, asp.net-mvc, webgrid

我将 MVC3 与 Razor 一起使用，为了显示网格，我正在使用**WebGrid**，而对于这个网格的分页，我正在使用以下代码。

我的问题：**分页按钮在选择/单击和未选择/单击时都应保持相同的大小。**

我遇到了一些 css 问题，我使用 CSS 和 javascript 来实现我的客户想要的设计，我已经在[这个](http://fiddle.jshell.net/Z5L4g/)小提琴链接[http://fiddle.jshell.net/Z5L4g/上复制了它](http://fiddle.jshell.net/Z5L4g/)

**剃刀代码**

```
@grid.Pager(mode: WebGridPagerModes.All, numericLinksCount: 15, firstText: "<<", lastText: ">>", previousText: "<", nextText: ">") 
```

**我的 CSS 代码** 正文 { font-family: Calibri; 背景颜色：#D8D8D8；边距顶部：0px；文字装饰：无；}

```
 #footer:not([href]) {
    letter-spacing: 0px;
    }

    #footer {
    text-align: center;
    margin-top: 10px;
    }

    .pagingCss {
    font-size: 13px;
    }

    .whiteBox {
    background-color: 
    white;
    color: 
    black;
    padding-right: 7px;
    padding-left: 7px;
    padding-top: 4px;
    padding-bottom: 4px;
    text-decoration: none;
    margin-top: 10px;
    letter-spacing: 0px;
    }

    .blackBox {
    background-color: 
    black;
    color: 
    white;
    padding-right: 7px;
    padding-left: 7px;
    padding-top: 4px;
    padding-bottom: 4px;
    text-decoration: none;
    margin-top: 10px;
    letter-spacing: 0px;
    }

    .pagingCss a {
    font-size: 13px;
    color: white;
    text-decoration:none;
    } 
```

**我用过的Javascript代码**

```
 var keywords = ['>>', '<<', '<', '>'];

    function linklabels() {

        var footerDiv = document.getElementById('footer');
        var oldLinks = footerDiv.getElementsByTagName('A');

        var oldLinksCount = oldLinks.length;
        var keywordsCount = keywords.length;

        for (var i = 0; i < oldLinks.length; i++) {

            if (oldLinks[i].firstChild.nodeValue == '>>' || oldLinks[i].firstChild.nodeValue == '<<' || oldLinks[i].firstChild.nodeValue == '>' || oldLinks[i].firstChild.nodeValue == '<') {
                var my_div = null;
                var newDiv = null;

                var newDiv = document.createElement("span");
                var newContent = document.createTextNode(oldLinks[i].firstChild.nodeValue);
                newDiv.appendChild(newContent);
                newDiv.className = "whiteBox";

                oldLinks[i].firstChild.nodeValue = "";

                oldLinks[i].appendChild(newDiv);
            }
            else {
                var my_div = null;
                var newDiv = null;

                var newDiv = document.createElement("span");
                var newContent = document.createTextNode(oldLinks[i].firstChild.nodeValue);
                newDiv.appendChild(newContent);
                newDiv.className = "blackBox";

                oldLinks[i].firstChild.nodeValue = "";

                oldLinks[i].appendChild(newDiv);
            }

        } // end of for

        //  footer

    }
    window.onload = linklabels; 
```

**这是使用上述代码后我的 HTML 的呈现方式** ![这是它的外观](../Images/277081540e27f25a10affb4a53ec1263.png)

并且代码呈现为html如下

```
<div id="footer" class="pagingCss">

<a href="/CompanySearch/Home/Results?page=1">
    <span class="whiteBox">&lt;&lt;</span>
</a>

<a href="/CompanySearch/Home/Results?page=5">
    <span class="whiteBox">&lt;</span>
</a>

<a href="/CompanySearch/Home/Results?page=1">
    <span class="blackBox">1</span>
</a>

<a href="/CompanySearch/Home/Results?page=2">
    <span class="blackBox">2</span>
</a>

<a href="/CompanySearch/Home/Results?page=3">
    <span class="blackBox">3</span>
</a>

<a href="/CompanySearch/Home/Results?page=4">
    <span class="blackBox">4</span>
</a> 

<a href="/CompanySearch/Home/Results?page=5">
    <span class="blackBox">5</span>
</a>

6 <a href="/CompanySearch/Home/Results?page=7">
<span class="blackBox">7</span>
</a>

<a href="/CompanySearch/Home/Results?page=8">
    <span class="blackBox">8</span>
</a>

<a href="/CompanySearch/Home/Results?page=9">
    <span class="blackBox">9</span>
</a> 

<a href="/CompanySearch/Home/Results?page=10">
    <span class="blackBox">10</span>
</a> 

<a href="/CompanySearch/Home/Results?page=7">
    <span class="whiteBox">&gt;</span>
</a> 

<a href="/CompanySearch/Home/Results?page=10">
    <span class="whiteBox">&gt;&gt;</span>
</a>
    </div>​ 
```

我知道必须有一些非常简单的方法或技巧来做到这一点，我只是找不到......请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T08:05:00.870

正如我在评论中所说，

不要试图治愈症状。在您的情况下，CSS 修复无法解决问题，因为[text nodes 没有选择器](https://stackoverflow.com/q/5688712/800214)。

一个快速的 jquery 修复会解决这个问题：

```
$(function() {  
 $("#footer").contents().filter(function() {

     var $this = $(this);
     return $this.children().length == 0 && $.trim($this.text()).length > 0;

 }).wrap("<span class='selectedBox' />");       
}); 
```

这将用一个带有 selectedBox 类的 span 包装您的单独文本元素，您必须为其添加一些 css。 [你可以在这里看到它的实际效果。](http://jsfiddle.net/Z5L4g/11/)

**这里的更新** [是一个完整的解决方案](http://fiddle.jshell.net/Z5L4g/15/) 这也替换了您的链接标签 javascript 代码：

```
function isNumber(n) {
  return !isNaN(parseFloat(n)) && isFinite(n);
}

$(function() {  
 $("#footer a").contents().wrap("<span class='blackBox' />");
 $("#footer").find("a span").each(function(){
    var val = $.trim($(this).text());
    if (!isNumber(val))
       $(this).attr('class', 'whiteBox');      
  });    

 $("#footer").contents().filter(function() {

     var $this = $(this);
     return $this.children().length == 0 && $.trim($this.text()).length > 0;

 }).wrap("<span class='whiteBox' />");       
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T07:12:26.943

所选数字显示时没有包装元素，因此它是内联渲染的。

尝试将其包装在像这样的跨度标记中：http: [//jsfiddle.net/Z5L4g/2/](http://jsfiddle.net/Z5L4g/2/)

我已经将选定的数字包装在一个带有选定类的跨度中，它与黑盒类具有相同的规则，除了具有透明背景和黑色文本颜色。

我不会说这是一个 CSS 问题，而是一个标记问题。选定的页面指示器没有任何宽度或高度，并且不能设置样式，因为它只是文本。

建议：要么更改标记，要么用javascript拆分#footer的innerHTML并从那里开始工作。我会选择第一个选项。

# ruby-on-rails - 如何将用户设置为延迟工作

> ID：11009744
> 
> 赞同：1
> 
> 时间：2012-06-13T07:03:42.907
> 
> 标签：ruby-on-rails, devise, delayed-job, database-schema

我正在将 rails 功能作为延迟工作运行。问题是我所拥有的会话信息不会出现在延迟的工作中（我没想到会这样）。因此，我的用户已登录，并且该登录告诉 rails 要命中的 postgres 模式。

假设用户“dave”被分配给方案 1。
他以进程的 id 作为参数（比如：id => 18）点击“run long process”。DJ 得到动作，但找不到 long_process 记录 find(18)，因为它返回 nil。公共表中没有记录，因此不会在那里找到。

我试图传递我当前的用户令牌，我可以将它传递给函数。但我在那里无能为力。我想为当前操作的本地范围切换用户，因为它是唯一有权访问表的用户。DJ 击中的下一个动作可能不是针对同一个用户，因此它不应该拥有对先前用户表的权限。

编辑...

* * *

在上传模块

```
def self.find_ex(id)
    return ( (id.class == 'String' && id.count('-') > 0) ? 
                          find_by_guid(id) : find(id) );
end 
```

在上传控制器中

```
 def run_now
    @upload = Upload.find_ex(params[:id]);
    render :json=>@upload.to_hash(), status: 200  
    ew = EDMWorker.new
    ew.runUploadJob(params[:id])
  end 
```

在它自己的文件中

```
class EDMWorker
    def runUploadJob(id)
       upload = Upload.find_ex(id);
       upload.run_job();
    end 
    handle_asynchronously :runUploadJob, :priority => 10, :queue => 'public'  
end 
```

延迟作业表中的错误报告顶部

```
Couldn't find Upload with id=68 
```

* * *

第一点起作用。找到并完美呈现对象。
数据在“1”.uploads 中。
延迟作业“动作”中的调用（我怀疑）是针对“public”.uploads 调用的，它应该始终为空。
我无法在延迟作业类中调用 sign_in(user)，因为该函数未定义。所以我很茫然。如何让延迟的工作人员知道哪个会话创建了它的任务？

# c - C 语言的 PGP 库

> ID：11009745
> 
> 赞同：0
> 
> 时间：2012-06-13T07:03:56.453
> 
> 标签：c, public-key-encryption, pgp

我正在用 C 语言开发一个客户端服务器通信应用程序。我想使用一些公钥加密来加密它们之间的消息。我发现 PGP（相当好的隐私）是一个很好的政策。那么是否有任何库可用于在我的应用程序中嵌入 PGP。我需要密钥生成、短信加密（最大 1024 字节长度的文本）、短信解密。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T07:14:08.897

你应该看看[GPG](http://www.gnupg.org/related_software/libraries.html)（GNU 替代 PGP）。

还有[GnuTLS](http://www.gnutls.org/)或众所周知的[OpenSSL](http://www.openssl.org/)库。

# c# - 如何修复我的 MVC3 路由

> ID：11009748
> 
> 赞同：4
> 
> 时间：2012-06-13T07:04:01.040
> 
> 标签：c#, asp.net-mvc-3, routing, global-asax

我的 ASP.NET MVC3 应用程序中的路由存在一些问题，它确实不能按我的意愿工作。

**Global.asax 中的路由定义**

```
routes.MapRoute(
            "News", // Route name
            "{lang}/{controller}/{action}/{page}/{id}", // URL with parameters
            new { lang = "pl", controller = "News", action = "Index", page = 1, id = UrlParameter.Optional } // Parameter defaults
        ); 
```

所以我想在两种情况下使用它：

1.  `/{lang}/{controller}/{action}/{page}`- 转到特定分页的页面
2.  `/{lang}/{controller}/{action}/{page}/{id}`- 记住当前页面，并转到特定的页面`id`。

生成我使用的**链接：**

```
@Html.RouteLink(i.ToString(), "News", new { lang = ViewBag.Lang, page = i }) 
```

其中`i`是页数，lang 是语言。

在**控制器**中，我处理它的女巫**动作**：

```
public ViewResult Index(string lang, int page = 1) 
```

**问题**

`@Html.RouteLink`给了我链接`/pl/News/Index/2`（当点击“2”时），但我的控制器没有处理它，页面仍然是“1”。因此，当我两次单击相同的链接时，它会给出：`/pl/News/Index/2/2`然后页面等于“2”。

如果有人可以向我解释它是如何工作的，我能做些什么来解决它？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:39:39.433

我猜您在这里缺少的是路由系统使用当前请求中的变量值来生成出站规则。

例如 - 如果你在页面 /pl/News/Index/2 你有

```
lang = "pl", controller = "News", action = "Index", page = 2 
```

如果您尝试生成这样的规则

```
@Html.RouteLink(i.ToString(), "News") 
```

路由系统将使用已经存在的变量，如*lang*和*page*，并将生成完全相同的 URL - /pl/News/Index/2。

当然，您在 Html.RouteLink 中传入匿名类型的值会被优先处理，并将覆盖当前请求中的值。因此，在您的示例中，您应该考虑**生成链接时所在的 URL**。

优先顺序为：

1.  匿名类型传递的变量
2.  请求变量
3.  路由中定义的默认值。

这部分好像

```
lang = ViewBag.Lang 
```

是没用的，因为如果您不提供*lang*将从请求中获取 - 所以它将被保留。

**更新**（可能不相关）：

您还应该记住，如果您有多个匹配规则 - 路由系统将选择**第**一个满足约束的规则（例如，请求中的值不应与默认变量冲突）

**更新2**：

路由系统使用请求变量直到第一个明确指定的变量（通过匿名类型），所以如果您明确指定*lang* - 不会重用请求变量（在您的情况下，因为*lang*是您的 url 中的第一段）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:42:14.287

我认为您的部分问题是您有点违反约定，并且由于 MVC 依赖约定来成功路由，因此您的映射有点失败。

我建议像这样重写你的路由：

```
routes.MapRoute(
            "News", // Route name
            "{controller}/{action}/{lang}/{id}/{page}", // URL with parameters
            new { controller = "News", action = "Index", lang = "pl", page = 1, id = UrlParameter.Optional } // Parameter defaults
        ); 
```

URL 最常见的情况似乎是：

```
http://yourdomainhere/news/pl/some-sort-of-permalink/1 
```

# javascript - js中根据分辨率计算字体大小

> ID：11009752
> 
> 赞同：0
> 
> 时间：2012-06-13T07:04:10.667
> 
> 标签：javascript, css

如何更改网站的字体大小以适应每个屏幕分辨率。我已经对此进行了搜索，但仍然无法获得所需的结果。所以请让我知道可以使用java脚本根据分辨率计算字体大小的准确公式。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:11:39.110

尝试将字体放在 em 或百分比中。默认浏览器字体大小为 16 像素。您可以通过设置正文字体大小将文档正文字体大小 10px 更改为基本字体`62.5% = (10/16)*(100)`

现在，

```
1em = 10px
100% = 10px 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T07:23:01.103

你说的是这个[**概念**](http://jsfiddle.net/matmuchrapna/2tQ5T/1/)吗？

如果你是，这是 css 唯一的概念证明：

```
html { font-size: 62.5%; }
body { font-size: 1em;}

@media (max-width: 300px) {
    html { font-size: 70%; }
}

@media (min-width: 500px) {
    html { font-size: 80%; }
}

@media (min-width: 700px) {
    html { font-size: 120%; }
}

@media (min-width: 1200px) {
    html { font-size: 200%; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T15:39:00.167

我不确定您要寻找什么尺寸，但这会让您进入球场。你在寻找这样的东西吗？

```
var fontSize = Math.round((12/window.innerWidth)*1200);
document.body.style.fontSize = fontSize+'px'; 
```

对于这些窗口宽度，您将看到类似这样的内容...

```
480 = 30
768 = 19
1024 = 14
1200 = 12 
```

您可能需要设置一个最小值，以便在大屏幕上字体不会很小。

# editor - MyEclipse 中 IntelliJ 想法等效的 F11key

> ID：11009755
> 
> 赞同：1
> 
> 时间：2012-06-13T07:04:21.760
> 
> 标签：editor, intellij-idea, myeclipse

我曾经使用 IntelliJ IDEA 作为我的开发环境，最近开始使用 MyEclipse。

在 IntelliJ 中，按下该`F11`键可切换书签。IntelliJ 在编辑器左侧创建一个*tic*或*正确标记*，并在编辑器右侧创建一个黑色图标以指示该行已添加书签。

然后按下`SHIFT` `F11`会显示您的书签列表，从而启用另一种在代码库中导航的方式。

是否`MyEclipse`有类似的功能，如果有，我该如何使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T22:43:05.970

以下博客条目讨论了 Eclipse 而非 MyEclipse 中的书签功能。

它包括向`// TODO`代码添加注释的替代策略，该策略将其放置在任务视图中，但在协作项目中，我认为最好为因招致的技术债务和未来代码重构而产生的任务留下**TODO**注释。

[http://www.luisdelarosa.com/2005/02/16/eclipse-tip-use-bookmarks-to-track-important-places-in-your-code/](http://www.luisdelarosa.com/2005/02/16/eclipse-tip-use-bookmarks-to-track-important-places-in-your-code/)

# ruby - 在 irb shell 内编辑

> ID：11009757
> 
> 赞同：0
> 
> 时间：2012-06-13T07:04:27.973
> 
> 标签：ruby, irb

我可以在 irb shell 中进行编辑吗？

```
irb(main):001:0> class MyClass
irb(main):002:1> def initialize(aStr)
irb(main):003:2> @avar = astr
irb(main):004:2> end
irb(main):005:1> def MyClass.new(aStr)
irb(main):006:2> @anewvar = aStr.swapcase
irb(main):007:2> end
irb(main):008:1> end
=> nil
irb(main):009:0> object = MyClass.new("ghazal")
=> "GHAZAL" 
```

有什么办法可以回去说行号`003`并添加或删除语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:40:10.690

irb 似乎不支持这样的操作。也许您可以使用**interactive_editor**解决这个问题。有了它，你可以从irb启动一个vi编辑器，退出编辑器后，你输入的内容会被irb立即保存和评估。

详情请参阅以下页面。

[https://github.com/jberkel/interactive_editor](https://github.com/jberkel/interactive_editor)

# asp.net - 文件上传错误 - Internet Explorer 无法显示网页

> ID：11009761
> 
> 赞同：0
> 
> 时间：2012-06-13T07:04:43.793
> 
> 标签：asp.net, file-upload, web-config, filesize, httpruntime

我知道这个问题已经在其他线程中被问过，但是所提供的解决方案都不能解决我的问题。

当我上传大于~4MB（即大于默认值）的文件时，我收到“Internet Explorer 无法显示网页”错误。（文件较小没有问题）。

这是我到目前为止所做的：

1）编辑的网络配置：

```
<httpRuntime maxRequestLength="20480" executionTimeout="3600" enable="true"/>
<customErrors mode="Off"></customErrors> 
```

和

```
<requestLimits maxAllowedContentLength="20000000000" /> 
```

2) 更新主机文件 (C:\Windows\System32\drivers\etc\hosts) 以删除行：

:: 1个本地主机

3) 在 IE、Chrome 和 Firefox 上测试（都有相同的问题）。

4) 尝试使用 IE 的开发人员工具，但不太确定要查找什么。

非常感谢您对此的任何建议/指导！我已经花了将近 2 天的时间，但仍然无法弄清楚。我认为它一定是文件大小问题（因为我加载了较小的文件......）

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T07:14:42.907

我遇到了同样的问题，通过在 system.web 下的 web.config 中添加以下内容得到了解决。

```
<httpRuntime maxRequestLength="20480" executionTimeout="3600" enable="true"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T08:13:56.490

还有两件事要看：

1) 您是否正在运行**UrlScan**或其他一些 IIS 插件？您可以通过选择您的网站并单击*ISAPI 过滤器*来检查 IIS 控制台。如果是这样，请检查它是否也有需要覆盖的上传大小限制：例如*C:\Windows\System32\inetsrv\urlscan\urlscan.ini* , `[RequestLimits]`, `MaxAllowedContentLength=1073741824`。

2) 检查您的*全局*.config 文件：*machine.config*和*根级别的 web.config*，例如*C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Config*（对于运行 .NET 4 的 64 位应用程序）`<system.web />`和*C:\Windows\System32\inetsrv\config*中的*applicationHost.config*以防万一那里有任何非标准设置，例如或。我怀疑这不是问题，因为如果是，您可能会在屏幕或应用程序事件日志中看到某种消息；不过，还有其他东西可以在您的清单上打勾。*`<system.webServer />``allowDefinition="MachineOnly"``allowOverride="false"`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T07:03:21.980

假设你有文件上传控制如下：

`<asp:FileUpload ID="flUpImg" runat="server"/>`

上传完成后，您通常通过单击按钮将文件上传到服务器。在该按钮单击事件中检查

`flUpImg.PostedFile.ContentLength`

设 xxxx 为返回值。记下它并停止调试。转到 web.config 文件并将以下标记编辑为

`<httpRuntime maxRequestLength="value greater than xxxx"/>`

其中 xxxx 是上传文件的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-18T16:55:42.363

关键是标签`maxRequestLength="20480"`内部。`<httpRuntime>`它失败了，因为该页面拒绝了您正在测试的文件，该文件显然大于 20MB。如果您检查您正在测试的文件，您可能会注意到这一点。

尝试将此数字设置得更高，您将获得一些成功！：

```
<httpRuntime maxRequestLength="51200" executionTimeout="3600" enable="true"/> 
```*

# java - Google App Engine 应用程序 (Java) 中的 Facebook 登录

> ID：11009762
> 
> 赞同：3
> 
> 时间：2012-06-13T07:04:45.330
> 
> 标签：java, facebook, google-app-engine

目前，我的 appengine 应用程序的用户可以使用他们的 gmail 帐户登录该站点。我想允许用户使用他们的 Facebook 帐户登录。这该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:46:01.940

哎呀，我没看你的帖子，我想[这](https://developers.facebook.com/docs/guides/web/)就是你的意思？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:11:59.960

这是你想要的吗 ？

[Google 应用引擎：创建 facebook 应用](https://developers.google.com/appengine/articles/shelftalkers?hl=nl-BE)

# ios - 如何在 iOS 中使用 UIView 的 UIViewAnimationCurveEaseIn？

> ID：11009765
> 
> 赞同：0
> 
> 时间：2012-06-13T07:05:06.627
> 
> 标签：ios

我正在尝试将带有 UIViewAnimationCurveEaseIn 的子视图添加到 MyMainView 中。我的 ViewController.xib 文件中有两个 UIView。MainView 中有一个按钮，当我单击该按钮时，我想用 UIViewAnimationCurveEaseIn 调用另一个视图。

在某些 iOS 应用程序中，新视图会从下方以幻灯片形式出现。我认为这与 UIViewAnimationCurveEaseIn 一起使用。我也想这样做。如果我错了，请指导我如何做到这一点。或者我在哪里可以阅读该功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:10:57.217

尝试这个：

```
AViewController *aVC = [[AViewController alloc]initWithNibName:@"AViewController" bundle:nil];
//[self.navigationController pushViewController:aVC animated:NO];
[UIView transitionFromView:self.view toView:aVC.view duration:0.5f options:UIViewAnimationCurveEaseIn completion:^(BOOL doneDissolve){
            [self.view addSubview:aVC.view];
        }];
 [aVC release]; 
```

# grep - 使用 grep 过滤 Doxygen 输出

> ID：11009769
> 
> 赞同：2
> 
> 时间：2012-06-13T07:05:15.393
> 
> 标签：grep, doxygen, tcsh

我想用 grep 过滤 doxygen 警告，以抑制某些参数的未记录参数警告。我正在尝试这个：

```
doxygen doxycfgfile | grep -v "parameter x" 
```

但是，这似乎对输出绝对没有影响。包含的行`parameter x`和所有其他行都不会被抑制。输出似乎完全相同。

我正在使用 tcsh。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T09:19:49.427

这大概是因为未记录的参数警告消息被写入标准错误（*stderr*），而不是标准输出（*stdout*）。使用管道 ( `|`) 您只需将标准输出通过管道传输到`grep`的输入。

你可以尝试做类似的事情

```
doxygen doxycfgfile |& grep -v "parameter x" 
```

从[高级 bash 脚本指南](http://tldp.org/LDP/abs/html/)：

> 如果`|&`使用，标准错误通过管道`command1`连接到标准输入；`command2`它是 的简写`2>&1 |`。

请注意，这是在 Bash 4 中添加的，因此对于早期版本，您将`2>&1 |`使用`|&`.

或者，您可以使用类似的东西摆脱标准错误输出

```
doxygen doxycfgfile 2>/dev/null 
```

askubuntu 上的这个[答案](https://askubuntu.com/q/24953)是我答案的来源。

# java - 在 Smack 中上传文件时出错

> ID：11009772
> 
> 赞同：0
> 
> 时间：2012-06-13T07:05:24.457
> 
> 标签：java, smack

我使用 Jabber Smack API 创建了一个聊天应用程序。我已成功接收文件（来自另一个名为 "Gajim" 的应用程序），但我的上传仅在几秒钟内失败。在“协商”传输状态之后，我得到一个“错误”状态。

我通过提供“完全合格”的 jabber ID 更正了此错误，但现在在我接受来自另一个 (Gajim) 客户端的传输后，传输会无限期地停留在“协商流”中。

我的 swingWorker 类有以下代码：

```
 OutgoingFileTransfer transfer;

    @Override
    public Void doInBackground() {

        transfer = manager.createOutgoingFileTransfer("vedant1811@jabber.org/Gajim");
        File uploadFile = fileChooser.getSelectedFile();
        try {
            transfer.sendFile(uploadFile, "test");
        } catch (XMPPException ex) {
            System.out.println("sendFile Error");
            ex.printStackTrace();
        }
        while (!transfer.isDone()) {
            if (transfer.getStatus().equals(Status.error)) {
                transferLabel.setText("ERROR!!! " + transfer.getError());
            } else {
                transferLabel.setText("Uploading File: " + uploadFile.getName()
                        + "   STATUS: " + transfer.getStatus());
                fileProgressBar.setValue((int) (100 * transfer.getProgress()));
            }
            try {
                Thread.sleep(500);
            } catch (InterruptedException ex) {
                System.out.println("thread.sleep error");
                ex.printStackTrace();
            }
        }

        return null;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:25:53.057

错误出现在 jabber 服务器中。使用 openfire 服务器解决了我所有的问题

# java - JScrollPane 在 JPanel 上使用时不会出现

> ID：11009773
> 
> 赞同：6
> 
> 时间：2012-06-13T07:05:32.610
> 
> 标签：java, swing, jpanel, jscrollpane, layout-manager

我已经尝试了几个小时来找到解决问题的方法，但我没有运气。这是一个示例代码：

```
import java.awt.BorderLayout;
import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;

public class Example extends JFrame
{
    private static final long serialVersionUID = 1L;

    public Example()
    {
        JPanel contentPane = (JPanel) getContentPane();
        contentPane.setLayout(new BorderLayout());

        JPanel panTop = new JPanel(new BorderLayout());
        //JPanel panBottom = new JPanel(new BorderLayout());

        JPanel panTopCenter = new JPanel();
        //JPanel panTopLeft = new JPanel();
        //JPanel panTopRight = new JPanel();

        panTop.add(panTopCenter, BorderLayout.CENTER);
        //panTop.add(panTopLeft, BorderLayout.WEST);
        //panTop.add(panTopRight, BorderLayout.EAST);

        contentPane.add(panTop, BorderLayout.CENTER);
        //contentPane.add(panBottom, BorderLayout.SOUTH);

        JPanel pan = new JPanel();
        pan.setLayout(new BoxLayout(pan, BoxLayout.Y_AXIS));
        for(int i = 0; i < 50; i++) pan.add(new JButton("Button " + i));
        JScrollPane scrollPane = new JScrollPane(pan);
        panTopCenter.add(scrollPane);

        pack();
        setLocationRelativeTo(null);
        setVisible(true);
    }

    public static void main(String[] args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {           
            @Override
            public void run()
            {
                new Example();
            }
        });
    }
} 
```

**快照：**

![在此处输入图像描述](../Images/e8b42bd4c91910cf20c2ffd8072252b0.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T14:01:21.650

我总是必须像这样设置视口的首选大小。

```
import java.awt.*;
import javax.swing.*;

public class Example extends JFrame {

    public Example() {
        setDefaultCloseOperation(EXIT_ON_CLOSE);

        Box box = new Box(BoxLayout.Y_AXIS);
        for (int i = 0; i < 50; i++) {
            box.add(new JButton("Button " + i));
        }
        JScrollPane sp = new JScrollPane(box);
        Dimension d = new Dimension(box.getComponent(0).getPreferredSize());
        sp.getVerticalScrollBar().setUnitIncrement(d.height);
        d.height *= 10; // Show at least 10 buttons
        sp.getViewport().setPreferredSize(d);

        add(sp, BorderLayout.CENTER);
        pack();
        setLocationRelativeTo(null);
        setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                Example e = new Example();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-13T15:10:32.457

不要设置任何尺寸！如果进行此更改，则会出现滚动条。

```
JPanel panTopCenter = new JPanel(new GridLayout()); 
```

基本问题是以`FlowLayout`显示它所需的最小尺寸显示组件，对于滚动窗格，即（决定为）0x0。通过`GridLayout`在构造函数中使用不带参数的 a 并将滚动窗格添加为唯一组件，它将被迫填充可用空间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T07:14:18.937

在容器或顶级容器中`JScrollPane`为单一的情况下，您必须设置首选大小。`JComponent`

```
scrollPane.setPreferredSize(new Dimension(100,500)); 
```

更好的是`GridLayout`用于相同类型的`JComponent`s。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-30T08:11:02.257

最好的解决方案，快速和简单，是使用[`JXPanel`](http://grepcode.com/file/repo1.maven.org/maven2/org.swinglabs.swingx/swingx-core/1.6.5-1/org/jdesktop/swingx/JXPanel.java#JXPanel)来自 SwingX 的，它是准标准的并且实现了`Scrollable`.

# android - 无法解决 ActivityNotFoundException

> ID：11009779
> 
> 赞同：1
> 
> 时间：2012-06-13T07:06:01.180
> 
> 标签：android, android-intent, broadcastreceiver, intentfilter

我正在向这样的广播接收器发送意图。

```
Intent cpIntent = new Intent();
cpIntent.setClassName("com.android.contacts", "com.android.contacts.EABContactsAppReceiver");
cpIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
cpIntent.setAction(IMS_SUBSCRIBE); 
cpIntent.putExtra("contactid",contactid);
startActivity(cpIntent); 
```

在接收端我接受的意图如下：

```
else if( intent.getAction().equals(ContactsListActivity.IMS_SUBSCRIBE )){ 
// this is a dummy event just to start the application
Log.d("ContactsAppReceiver", "IMS_SUBSCRIBE");
final String id = intent.getStringExtra("contactid");
Log.d(TAG,"id :"+id); 
```

我还在`Manifest`文件中声明了活动和意图过滤器。

```
<receiver android:name="com.android.contacts.EABContactsAppReceiver">
            <intent-filter>
                <!-- <action android:name="com.sec.android.app.sns.action.UPDATE_ACTIVITY" />
-->             <!--<action android:name="com.sec.siso.imsservice.IMS_SERVICE_READY_EVENT" />-->
                            <action android:name="android.intent.action.BOOT_COMPLETED"/>
                            <action android:name="android.intent.action.ACTION_SYNC_STATE_CHANGED"/>
                <!-- <action android:name="com.sec.android.app.sns.action.UPDATE_MESSAGE" />
-->
                <action android:name="com.sec.siso.SUBSCRIBE"/>
                <action android:name="com.sec.siso.logs.SUBSCRIBE"/>
            </intent-filter>
        </receiver> 
```

但是我仍然得到`ActivityNotFoundException`。谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T07:32:39.523

在您的第一个代码中，您尝试启动一个活动而不是发送广播。你应该更换

```
startActivity(cpIntent); 
```

和

```
sendBroadcast(cpIntent); 
```

# android - TelephonyManager 给我 null

> ID：11009781
> 
> 赞同：-1
> 
> 时间：2012-06-13T07:06:17.920
> 
> 标签：android

电话经理`Null`在我使用此代码时给我电话号码 -

```
TelephonyManager tMgr=(TelephonyManager)getSystemService(TELEPHONY_SERVICE);
String mPhoneNumber = tMgr.getLine1Number();
Log.i(TAG, "PH No"+mPhoneNumber); 
```

**允许：：**

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

`null`当我打印它时它会得到我....

```
06-13 12:29:02.749: INFO/Login(5273): PH Nonull 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:11:52.193

getLine1Number(); 返回存储在 SIM 卡的 MSISDN 上的任何内容，某些运营商未填写该内容。

在您的情况下，我非常确定 MSISDN 未填写。

你应该记住一件事。

getLine1Number() 有时会返回空值或最初存储在 SIM 卡中的电话号码。

# php - 是否可以使用其 API 将新订阅者添加到 Aweber 的列表中？

> ID：11009782
> 
> 赞同：0
> 
> 时间：2012-06-13T07:06:19.713
> 
> 标签：php, aweber

我正在尝试使用其 API 将新订阅者添加到 Aweber 的列表中： [https](https://labs.aweber.com/docs/code_samples/subs/create) ://labs.aweber.com/docs/code_samples/subs/create 因为，他们已经提到这是可能的。

但是，我怎样才能得到下面的键？a) $accessKey b) accessSecret
c) $account_id

它需要真正的 Awebers 帐户吗？请在这方面提供帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:10:45.373

[在http://labs.aweber.com](http://labs.aweber.com)注册一个帐户，您将在那里获得这些详细信息。

# facebook - Facebook 赞和注销

> ID：11009785
> 
> 赞同：0
> 
> 时间：2012-06-13T07:06:29.183
> 
> 标签：facebook, logout

我对 Stackoverflow 和编码很陌生，但我会尽力使这个问题尽可能清晰和简单：

我正在寻找一个网页，其中有一个 Facebook Like 按钮和一个 Logout 按钮，可以让用户退出 Facebook 帐户......所以用户可以 Facebook Like，输入登录信息，然后注销。这是我到目前为止的脚本，但我已经刷新以便注销工作并直接返回主页。非常感谢您的帮助：

互动链接：http: [//jsfiddle.net/nrdnx/11/](http://jsfiddle.net/nrdnx/11/)

代码：

```
<html>
    <head>
      <title>My Great Web page</title>
    </head>
    <body>
<div id="fb-root"></div>

<script>
window.fbAsyncInit = function() {
    FB.init({
      appId      : '271358172932770', // App ID
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
    getStatus();
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));

</script>

</script>

       <iframe src="http://www.facebook.com/plugins/like.php?href=www.facebook.com/orangeleaflawrence"
        scrolling="no" frameborder="0"
        style="border:none; width:450px; height:80px"></iframe>

<a href="javascript:void();" onclick="getStatus()">Get Status</a>

<div id="logout"><a href="logout.html">Logout of Facebook</a></div>

<script>

FB.Event.subscribe('auth.authResponseChange', function(response) {
  alert('The status of the session is: ' + response.status);
});

function getStatus(){

FB.getLoginStatus(function (response) {
  alert(response.status);
  if (response.status === 'connected') {

      document.getElementById('logout').style.display='';
    // the user is logged in and has authenticated your
    // app, and response.authResponse supplies
    // the user's ID, a valid access token, a signed
    // request, and the time the access token 
    // and signed request each expire
  } else if (response.status === 'not_authorized') {
    document.getElementById('logout').style.display='none';
    // the user is logged in to Facebook, 
    // but has not authenticated your app
  } else {

    // the user isn't logged in to Facebook.
       document.getElementById('logout').style.display='none';
  }
 }
);

}

</script>

</body>
 </html> 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:11:21.303

我不确定我是否完全了解您的问题，但是注销 sdk 功能在这里：http: [//developers.facebook.com/docs/reference/javascript/FB.logout/](http://developers.facebook.com/docs/reference/javascript/FB.logout/)

# apache-flex - 查找一个点是在 flex 原始对象内部还是外部

> ID：11009786
> 
> 赞同：0
> 
> 时间：2012-06-13T07:06:29.183
> 
> 标签：apache-flex, graphics, primitive

我有一些使用弹性原始类创建的形状，如椭圆、矩形、路径等。

我怎样才能找到一个点是在这些对象的内部还是外部？（我只需要内容区域，不需要透明部分。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:19:06.710

hitTestPoint函数[正是](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#hitTestPoint%28%29)您要寻找的。将第三个参数指定为`true`，它就可以解决问题。

**更新：**您需要按`Graphic`元素包装原语，然后使用该元素执行检查。*示例*：

```
<s:Graphic id="myEllipse">
    <s:Ellipse height="100" width="200">                              
        <s:stroke>
            <s:SolidColorStroke color="#000000" weight="1"/>
        </s:stroke>
        <s:fill>
            <s:SolidColor color="#0000FF"/>
        </s:fill>
    </s:Ellipse>
</s:Graphic>

//......
myEllipse.hitTestPoint(someX,someY,true) 
```

# java - 声明性 OSGi 服务

> ID：11009790
> 
> 赞同：1
> 
> 时间：2012-06-13T07:06:50.393
> 
> 标签：java, service, osgi

我有一个关于声明性 OSGi 服务的问题。我有以下界面：

```
 public interface PrintService {
    public void print();
  } 
```

及其实施：

```
 public class PrintServiceImpl implements PrintService {

      @Override
      public void print() {
        System.out.println("Hello from PrintServiceImpl!");
      }
    } 
```

OSGI-INF/component.xml：

```
<scr:component xmlns:scr="http://www.osgi.org/xmlns/scr/v1.1.0" name="service">
   <implementation class="service.PrintServiceImpl"/>
   <service>
      <provide interface="print.PrintService"/>
   </service>
</scr:component> 
```

清单.MF：

```
Service-Component: OSGI-INF/component.xml 
```

在我安装服务并启动它之后，什么也没发生。如何激活它并将“ *Hello from PrintServiceImpl!* ”打印到控制台。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:27:20.533

您应该明确表示您希望服务在捆绑包启动时启动。否则，它会被懒惰地实例化，并且认为没有其他服务需要 PrintService，它根本不会被实例化。

您可以使用属性控制您的服务生命周期（关于捆绑生命周期）`enabled`和`immediate`. `enabled`是微不足道的：指示捆绑包启动时您的服务是否启用。`immediate`指示此服务是否懒惰。*将立即*`immediate="true"`启动您的服务，将应用惰性实例化（即等到其他一些服务将此服务作为依赖项请求）*`immediate="false"`*

 *例如

```
<scr:component xmlns:scr="http://www.osgi.org/xmlns/scr/v1.1.0" name="PrintService"
activate="activate" 
deactivate="deactivate"
modified="modified"
enabled="true" 
immediate="true"> 
```

正如 Chris 提到的，如果您希望您的服务在激活时执行某些操作，您应该在`activate`生命周期方法中添加一些代码（请注意，可以在组件描述符中指定方法的名称，就像上面明确完成的那样）

```
protected final void activate() {
    print();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T11:08:28.077

为什么你希望你的`print`方法被调用？它是服务接口的一部分，因此在您可以绑定到它并调用它的客户端之前，它不会被调用。

如果您`services`在控制台中键入命令，您应该会看到您的捆绑软件正在发布`print.PrintService`服务；这意味着您的组件正在工作。如果您没有看到这一点，那么您可能会错过 Tom Seidel 在上述评论中建议的 SCR 捆绑包之类的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T21:30:12.247

也许您想通过您的激活方法进行打印？

```
public class PrintServiceImpl implements PrintService {
    protected final void activate() {
        System.out.println("Hello from PrintServiceImpl!");
    }
    protected final void deactivate() {
        System.out.println("Goodbye from PrintServiceImpl!");
    }
    ...
} 
```

否则，Neil 的答案是正确的：您需要一个通过 ServiceTracker 使用服务或`<reference>`显式调用 print() 方法的客户端。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T13:45:17.440

以上所有答案都是正确的。现在要在 shell 上打印一些东西，你可以编写如下内容：

```
public interface PrintService {
    public void print();
} 
```

实施：

```
public class PrintServiceImpl implements PrintService {

      @Override
      public void print() {
        System.out.println("Hello from PrintServiceImpl!");
      }
} 
```

组件.xml：

```
<scr:component xmlns:scr="http://www.osgi.org/xmlns/scr/v1.1.0" name="service">
   <implementation class="service.PrintServiceImpl"/>
   <service>
      <provide interface="print.PrintService"/>
   </service>
</scr:component> 
```

现在您可以使用命令来调用您的打印方法：

```
public class PrintCommand implements Command {

    private PrintService printer;

    public void setPrinter(PrintService printer) {
        this.printer = printer; 
    }

    public void unsetPrinter(PrintService printer) {
        this.printer = null;
    }

    @Override
    public void execute(String line, PrintStream arg1, PrintStream arg2) {    
        printer.print();
    }

    @Override
    public String getName() {
        return "print";
    }

    @Override
    public String getShortDescription() {
        return "just a printer";
    }

    @Override
    public String getUsage() {
        return "print";
    }

} 
```

您的 component.xml 应该有一个新条目：

```
<component name="PrintCommand">
    <implementation class="PrintCommand"/>
    <service>
        <provide interface="org.apache.felix.shell.Command"/>
    </service>
    <reference
        name="printer"
        interface="PrintService"
        bind="setPrinter"
        unbind="unsetPrinter"
        cardinality="1..1"
        policy="static"
    />
</component> 
```

命令界面是 Apache Felix Shell 的一部分，如果您现在运行 Felix 并`help`在控制台中输入，您将看到所有已注册的命令，并且还有 PrintCommand `print`。如果您现在在 shell 中键入 print，您将看到文本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-29T12:59:13.553

你有没有得到这个工作？对我来说，Eclipse .ds 包还没有启动，因此该服务还没有注册（还）。当我手动启动它时，我的服务已正确注册。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-28T15:12:22.977

使用注解时，会在 OSGI-INF/... 文件夹下自动生成 XML 文件。

```
 public interface PrintService {
    public void print();
  }

  implementation with annotations: 

  @Component(service = PrintService.class)
  public class PrintServiceImpl implements PrintService {

      @Activate
      public void activate() {
         print();
      }

      @Override
      public void print() {
        System.out.println("Hello from PrintServiceImpl!");
      }
    } 
```

正如我之前所说，XML 文件是自动创建的。使用@Component(service = PrintService.class) 注解，我们将PrintService 注册到OSGi 框架（如ServiceTracker 中的registerService 方法）。注册服务时，将调用 Activate 方法。方法名可以是任何东西。只需在 OSGi 框架中添加@Activate 注释以说“当服务注册时，调用@Activate 注释下的方法”。*

# c# - 调整二进制序列化

> ID：11009793
> 
> 赞同：0
> 
> 时间：2012-06-13T07:07:07.280
> 
> 标签：c#, serialization, binary

我在数据库中有一个包含二进制序列化对象的 base64 字符串。

在对象中，有一个我想要调整的字符串属性。

在不知道“修复”字符串的实际类型的情况下是否有可能？字符串的长度会改变，这就是为什么我不想简单地替换该值。

更一般地说，二进制序列化对象的结构是什么？

# javascript - PartialView MVC3 的脚本未加载

> ID：11009794
> 
> 赞同：0
> 
> 时间：2012-06-13T07:07:09.727
> 
> 标签：javascript, asp.net-mvc-3

我正在使用 ASP MVC3，我正在使用部分视图，但问题是无法将脚本加载到相同的视图中。以下是我尝试过的代码：

```
<script type="text/javascript">
    $('#bodytag').load(function () {
        alert('Load was performed.');
    });
</script>
<div class="acc-expand-bkg" id="bodytag">
    <div class="submenu_dropdown clearfix">
        <div class="filter_bar clearfix">
            <div class="left" style="margin-left: 10px;">
                <label style="width: auto; margin-top: 7px;">
                    Standard:</label>
                @Html.DropDownList("teamDetailId", ViewBag.TeamNames as SelectList, null, new { id = "teamDetailId" })
            </div>
        </div>
    </div>
</div> 
```

上面的部分视图没有被脚本加载。我尝试使用 document.ready ，但它都不起作用。你能告诉我同样的工作吗？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:13:55.293

试试这样：

```
<script type="text/javascript">
    alert('Load was performed.');
</script> 
```

但通常不应将脚本放置在局部视图中。它们不应与标记混合。通常脚本属于单独的 javascript 文件。所以更好的方法是在一个单独的文件中定义一个 javascript 函数：

```
function doSomething() {
    alert('Load was performed.');
} 
```

然后在使用 AJAX 加载部分视图后调用此 javascript 函数：

```
$.ajax({
    url: 'some url',
    type: 'post',
    success: function(result) {
        $('#someId').html(result);
        // the partial view was injected into the DOM => now we could
        // invoke our function:
        doSomething();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:14:23.987

[load](http://api.jquery.com/load/)函数用于使用 ajax 从服务器加载内容并更新指定 html 元素的内部内容。您必须将服务器`url`作为第一个参数传递给该方法。

```
$('#bodytag').load('ajax/test.html', function() {
  alert('Load was performed.');
}); 
```

您必须将脚本块放在 html 下方。

# java - PermGen和Heap，区别及其意义

> ID：11009795
> 
> 赞同：15
> 
> 时间：2012-06-13T07:07:10.603
> 
> 标签：java, memory, jvm, heap-memory

朋友们，

你能告诉我堆和永久代的意义、区别和用途吗？此外，最好知道它们分别加载了哪些类。

与 Java VM 规范相关的解释将非常有帮助

谢谢普尼斯

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-13T07:25:40.420

内存（堆）是分代管理的，或者是保存不同年龄对象的内存池。当代填满时，垃圾收集发生在每一代中。对象在一代中分配给较年轻的对象或`young generation`，并且由于婴儿死亡率，大多数对象都死在那里。

当任何新对象被构造时，它都会进入伊甸园空间，这是`Young Generation`.

如果对象在一段时间后仍然活着，它会转到`tenured generation`长寿对象所在的位置。

如果对象应该存在直到存在过度进程，则对象被移动到`Perm Generation`. `Java classes`存储在永久代中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T07:12:15.227

良好的链接在[PermGen 实际上代表什么？](https://stackoverflow.com/questions/318942/what-does-permgen-actually-stand-for). 特别喜欢这个[博客](https://blogs.oracle.com/jonthecollector/entry/presenting_the_permanent_generation)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-04T22:01:34.770

我对 PermGen 和其他堆内存部分也有同样的疑问。经过一番搜索，我终于得出了结论。

Java HotSpot VM 需要从操作系统获取的内存，这种内存称为堆内存。现在众所周知的堆内存用于存储对象并保存其他重要的东西。

短寿命 Java 对象存储在年轻代中，如果这些对象仍需要进一步执行，则将其转移到终身/老年代。并且根据 Generation Garbage Collector 的类型，内存被清理。

那么永久一代（PermGen）呢？Java HotSpot VM 在 PermGen 中加载类/类结构，JVM 使用它来存储加载的类和其他元数据。PermGen 不用于存储对象。

除了对象和类结构之外，JVM 代码本身还加载分析器代理代码和数据等。

所以基本上，堆 = 对象 + 类结构 + JVM 架构。

参考： [Java Docs](http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/gc01/index.html)， [Java GC 指南](https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/toc.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T07:12:49.350

好吧，我不是专家，但是 PermGem 内存驻留在堆中，因为它就像一个特殊的地方，所有类都在运行时加载。所以如果你有太多的类，PermGem 会抛出 OutOfMemoryException。并且堆存储您在 java 代码中实例化的对象，其中 GC 收集堆栈中正在运行的线程中的任何变量未引用的对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-08T14:25:37.033

我相信 Permgen 只是堆内存中的内存区域。它是为特殊目的而创建的，例如持有 String。

所有创建的对象都不会获得 Permgen Memory 仅适用于 JDK 6 或更低版本中的 String 等特殊类。

在现代 JDK 8 及以上版本中，没有找到 Pergen，但是引入了像非堆这样的新内存和其他各种缓存内存。

# validation - JSF：不同验证器标签的不同验证消息？

> ID：11009797
> 
> 赞同：3
> 
> 时间：2012-06-13T07:07:13.770
> 
> 标签：validation, jsf, jakarta-ee, jsf-2

在我的 JSF+Primefaces 应用程序中。我正在使用 JSF 验证器标签来验证文本框的输入

```
<p:inputText value="#{createAccessPrivilegeBean.name}" id="name" label="name" size="55" required="true"
    requiredMessage="#{messages.requiredError}" validatorMessage="#{messages.alphaNumericError}">
    <f:validateRegex pattern="#{validatorBean.accessprivilegeValidator}"></f:validateRegex>
    <f:validateLength maximum="10"></f:validateLength>
</p:inputText> 
```

现在对于必需的消息，我已经在 requiredMessage 属性中为我使用的所有其他验证标签指定了消息，我在 validatorMessage 属性中定义了常见消息。

我需要单独的消息进行不同的验证，例如如果 validateRegex 失败我需要不同的验证消息，或者如果 validateLength 失败我需要不同的验证消息。

我怎样才能做到这一点 ？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:30:16.593

这是解决方案的链接：

[http://www.mkyong.com/jsf2/customize-validation-error-message-in-jsf-2-0/](http://www.mkyong.com/jsf2/customize-validation-error-message-in-jsf-2-0/)

感谢丹尼尔。

# c# - MVC .Net 查看模型的嵌套列表

> ID：11009800
> 
> 赞同：2
> 
> 时间：2012-06-13T07:07:33.403
> 
> 标签：c#, asp.net-mvc, model-view-controller, architecture

我有一个抽象类，其中有 3 个从此类继承的其他类：-

```
public abstract class AbstractTask
{
  [Key]
  public int ID {get; set;}
  [DisplayName("Featured Task")]
  public bool Featured { get; set; }
  // various other properties
}

public class HighLevelTask : AbstractTask
{
  [DisplayName("Workstream Description")]
  public String Workstream { get; set; }
  public virtual ICollection<MidLevelTask> MidLevelTasks { get; set; }
}

public class MediumLevelTask : AbstractTask
{
  public int HighLevelTaskID { get; set; }
  public virtual ICollection<DetailLevelTask> DetailLevelTasks { get; set; }
}

public class DetailLevelTask : AbstractTask
{
 public int MidLevelTaskID { get; set; }
} 
```

因此，高级任务可以包含任意数量的中级任务，而中级任务可以包含任意数量的详细任务。任何级别的任务都可以通过从抽象类继承的属性设置为“精选”。

在 HTML 视图中，我想呈现一个嵌套的“特色”任务列表。所以我想在一个控制器动作中像这样来收集所有的特色任务，但我对呈现这个的最佳方式感到困惑。

```
 var qryHighLevelTasks = from t in context.HighLevelTasks
                          where t.Featured == true
                          select t;
  var rsHighLevelTasks = qryHighLevelTasks.ToList();

  foreach(var highLevelTask in rsHighLevelTasks)
  {
     // get all mid level featured tasks related to this high level task
     var qryMidTasks = from midLevelTasks in context.MidLevelTasks
                       where midLevelTasks.Featured == true
                       && midLevelTasks.HighLevelTaskID == highLevelTask.ID
                       select midLevelTasks;
     var rsMidLevelTasks = qryMidTasks.ToList();

     foreach (var midLevelTask in rsMidLevelTasks)
     {
        // get all detail level featured tasks related to this mid level task
        var qryDetailTasks = from detailLevelTasks in context.DetailLevelTasks
                             where detailLevelTasks.Featured == true
                             && detailLevelTasks.MidLevelTaskID == midLevelTask.ID
                             select detailLevelTasks;
        var rsDetailLevelTasks = qryDetailTasks.ToList();                    
        }                
   } 
```

也许我应该有一个复合模型来表示特色任务？或者，还有更好的方法？有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:05:19.690

我建议使用“部分视图”来呈现“特色任务”的嵌套列表。

此外，请尝试首先关注您的视图模型。您的视图模型中可能有一组“特色任务”，并将这些集合传递给您的局部视图以进行渲染。这里有一些可能有帮助的链接：

1)[部分视图和强类型自定义视图模型](http://www.mikesdotnetting.com/Article/105/ASP.NET-MVC-Partial-Views-and-Strongly-Typed-Custom-ViewModels)

2)[我如何：在 ASP.NET MVC 部分视图中处理数据？](http://www.asp.net/mvc/videos/mvc-2/how-do-i/how-do-i-work-with-data-in-aspnet-mvc-partial-views)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T15:08:03.613

您可以使用 LINQ 投影来检索嵌套项：

```
var featuredItems = from hl in context.HighLevelTasks where hl.Featured == true
                    select new
{
   MidLevelTasks = from md in context.MidLevelTask where md.MidLevelTaskID = h1.TaskID,
   DetailLevelTasks = from ll in context.DetailLevelTask where ll.LowLevelTaskID = md.MidLevelTaskID
}; 
```

您还可以使用编辑器模板来呈现嵌套视图：

主视图：

```
foreach(item in Model.HighLevelTasks)
{
   @Html.EditorFor(item);  
} 
```

高级任务视图：

```
<!-- HTML here to render the parent record -->
foreach(item in Model.MidLevelTasks)
{
  @Html.EditorFor(item)
} 
```

..以类似的模式，为中间和详细级别任务创建编辑器模板。

# android - 3.1 上的 Android 启动画面或加载屏幕

> ID：11009803
> 
> 赞同：0
> 
> 时间：2012-06-13T07:07:45.330
> 
> 标签：android, android-3.1-honeycomb

我从教程中制作了一个启动画面，它在 Android 2.3+ 甚至 Android 4.0+ 上运行良好，但如果我在我的 Galaxy Tab（**Android 3.1**）上运行它，它会**启动 TWICE 应用程序。** 真的很烦人，我该怎么做才能在 3.1 上解决这个问题？

这是代码：

```
public class SplashScreen extends Activity 
{

protected boolean _active = true;
protected int _splashTime = 2000; // time to display the splash screen in ms

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);

    try{

    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT);
    overridePendingTransition(0 , 0);

    // thread for displaying the SplashScreen
    Thread splashTread = new Thread() {
        @Override
        public void run() {
            try {
                int waited = 0;
                while(_active && (waited < _splashTime)) {
                    sleep(100);
                    if(_active) {
                        waited += 100;
                    }
                }
            } catch(InterruptedException e) {
                // do nothing
            } finally {
               // finish();

                try{
                    Intent i = new Intent();
                    i.setClass(SplashScreen.this, MySecondActivity.class);
                    startActivity(i);
                    finish();
                }
                catch(Exception e)
                {
                    ki(e);
                }

            }
        }
    };

    splashTread.start();

    }catch(Exception ex)
    {
        ki(ex);
    }

 }

@Override
public void onBackPressed() {
   return;
}   

 //Toaster
    public void ki(Exception message)
    {
    Toast myToast = Toast.makeText(getApplicationContext(), message.toString(), 1);
    myToast.show();
}

} 
```

如您所见，这是一个简单的线程活动更改，但是当它更改时，它会启动 MySecondActivity 两次。

有没有搞错？

编辑：

我刚刚意识到，这个错误只有当我**在横向模式下启动应用程序时**才会发生，而它是在启动/加载屏幕上。也许这是解决这个问题的宝贵信息..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:15:59.380

我认为你不应该使用睡眠。也许你可以试试这个。

```
private void popSplash() {
    Message msg = splashHandler.obtainMessage();
    splashHandler.sendMessageDelayed(msg, 2000);
}

private Handler splashHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) 
    {
        super.handleMessage(msg);
        startActivity(new Intent(SplashScreen.this,MySecondActivity.class);;
        finish();
    }
}; 
```

只需在 onCreate 中调用 popSplash。

* * *

这对我有用 -

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    Display d = getWindowManager().getDefaultDisplay();
            // For tablets, to avoid dublicate onCreates.
    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:18:07.973

```
public class SplashScreen extends Activity {
    protected boolean _active = true;
    protected int _splashTime = 5000;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);

        // thread for displaying the SplashScreen
        Thread splashTread = new Thread() {
            @Override
            public void run() {
                try {
                    int waited = 0;
                    while(_active && (waited < _splashTime)) {
                        sleep(100);
                        if(_active) {
                            waited += 100;
                        }
                    }
                } catch(InterruptedException e) {
                    // do nothing
                } finally {
                    finish();
                    Intent i = new Intent(SplashScreen.this, MyApp.class);
                    startActivity(i);
                }
            }
        };
        splashTread.start();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            _active = false;
        }
        return true;
    }
} 
```

# ruby-on-rails - 如何一举删除一个回形针附件并创建另一个

> ID：11009804
> 
> 赞同：1
> 
> 时间：2012-06-13T07:07:54.993
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip

我有一个具有多个“资产”的模型“文章”，这是一个多态模型，我使用回形针将图像附加到。当我**编辑**一篇文章时，我希望能够删除旧图像，并在同一笔画中添加新图像。我正在使用 fields_for，它看起来足够通用，因为[Rails API 说](http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for)我可以将它用于特定的资产实例。所以这是我表格的相关部分：

**形式：**

```
=f.fields_for :assets do |ff|
  =ff.label "image"
  =ff.file_field :image

-unless @article.assets.first.image_file_name.nil?
  -@article.assets.each do |asset|
    =f.fields_for :assets, asset do |fff|
      =image_tag(asset.image.url(:normal))
      =fff.label "delete image"
      =fff.check_box :_destroy 
```

第一个`fields_for`是为文章添加图像，第二个部分是删除已经存在的资产。此表单可以添加资产、删除资产，但不能同时进行。这就是问题所在。我怀疑`check_box`没有足够的指导或什么。

**资产模型：**

```
class Asset < ActiveRecord::Base
  belongs_to :imageable, :polymorphic => true

  has_attached_file :image, :styles => { :normal => "100%",:small => "100 x100>",:medium => "200x200>", :thumb => "50x50>" },
                        :storage => :s3, 
                        :s3_credentials => "#{Rails.root}/config/s3.yml", 
                        :path => "/:attachment/:id/:style/:filename" 
```

**文章控制器/编辑：**

```
 def edit
    @article = Article.find(params[:id])
    @assets = @article.assets
    if @assets.empty?
      @article.assets.build
    end
  end 
```

我期待看到您的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T05:33:38.103

由于我可怜的求救声被置若罔闻，我被迫独自出发（可能是最好的）。我通过摆弄表单的逻辑发现了解决方案。以下是允许我在一个表单提交中添加回形针附件和删除一个（或多个）的设置：

**形式：**

```
= form_for(@article, :action => 'update', :html => { :multipart => true}) do |f|
.
.
.
  -@assets.each do |asset|
        =f.fields_for :assets, asset do |asset_fields|
          -if asset_fields.object.image_file_name.nil?
            =asset_fields.label "image"
            =asset_fields.file_field :image
          -else
            =image_tag(asset_fields.object.image.url(:normal))
            =asset_fields.check_box :_destroy 
```

我的设置是：一个`article`has_many `assets`，它是一个为我保存图像附件的多态模型。

研究：

[http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for](http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for)

[创建用于删除属于产品的上传的表单](https://stackoverflow.com/questions/10085007/creating-a-form-for-deleting-uploads-that-belongs-to-products)

-第二个链接：提供了在提供`object`的表单助手上使用方法的洞察力`fields_for`，在我的情况下，`asset_fields.object...`它让我可以弄乱`@assets`

这是感兴趣的文章控制器方法：

```
 def edit
    @article = Article.find(params[:id])
    @assets = @article.assets
    @article.assets.build
  end 
```

# wordpress - 如何找到 WordPress 自定义组合功能的基础知识

> ID：11009807
> 
> 赞同：0
> 
> 时间：2012-06-13T07:08:12.427
> 
> 标签：wordpress, wordpress-theming, portfolio

我正在寻找一些帮助来确定我最近在许多 WordPress 主题中看到的一种非常常见的自定义组合的基本构建块。Namely, it's an animation of the portfolio items when the "category" is selected.

要了解我的意思，请查看两个具有此功能的主题：http: [//themes.kubasto.com/website/portfolio/portfolio-small-one/](http://themes.kubasto.com/website/portfolio/portfolio-small-one/) http://themes.pixelwars.org/responsy/portfolio。 html

两者之间的这个功能是如此相似，以至于我不得不相信有一些共同的代码核心可以运行它们，但我似乎找不到它！

有没有人对这两者都有什么见解？或者如何复制此功能？

非常感谢你的帮助。

-缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:57:52.413

第一个是使用 Dave DeSandro 的 jquery Masonry，第二个是使用它的大哥 Isotope 和过滤器。

[你可以在http://www.metafizzy.co](http://www.metafizzy.co)查看它的所有文档

我建议只购买同位素，这是一项很棒的工作，并且文档和示例使您易于掌握。Stackoverflow 上有几个线程，作者也提供了帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:10:05.550

为此有几个 jQuery 插件。最常见的是砌体。但还有一个我更喜欢的（因为它更轻，更符合我的基本需求），叫做 Wookmark (http://www.wookmark.com/jquery-plugin)

# php - 在 PHP MySQL 数据库中获取行

> ID：11009809
> 
> 赞同：0
> 
> 时间：2012-06-13T07:08:20.023
> 
> 标签：php, mysql

我想在此函数中增加 $x 以获取表中的下一条记录。但它只增加一次。任何帮助表示赞赏

这是我调用的函数，

```
<script type="text/javascript">
    function getnextques(){
        document.getElementById("quescontent").innerHTML= '<?php
        $x++;
        $res = mysql_query("SELECT * FROM question_content WHERE id=".$x) or die(mysql_error());  
        while($row=mysql_fetch_array($res)){
            echo $row['ques'] ;
        }; 
        ?>'
}
</script> 
```

从 ，

```
<a href="javascript:getnextques()" class="startbutton" id="mediumone"> Next </a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T07:10:22.490

你不能像那样`Javascript`和`PHP`. PHP是基于服务器端的，javascript是基于浏览器的。

您应该为此使用 Ajax ( `jQuery`)

例如：

```
<script type="text/javascript">
var x = 0;
function getnextques(){
    var newX = x++;
    $.ajax({
        type: "POST",
        url: 'script.php',
        data: { x: newX },
        success: function(data) {
            document.getElementById("quescontent").innerHTML = data;
        }
    });
}
</script> 
```

和`script.php`

```
<?php
    // mysql connection
    $x = (int) $_POST['x'];
    $res = mysql_query("SELECT * FROM question_content WHERE id=".$x) or die(mysql_error());  
    while($row=mysql_fetch_array($res)){
        echo $row['ques'] ;
    }
 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:13:22.153

您的 php 代码在服务器上运行，并将静态返回到运行 javascript 的浏览器。您需要使用[Ajax](http://api.jquery.com/jQuery.ajax/)来动态获取内容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-13T07:14:26.817

如果您不熟悉 Ajax，或者由于任何原因无法使用它，请将用户带到下一页以显示下一个问题。

# maven - 在 Maven 测试阶段访问下载的文件

> ID：11009813
> 
> 赞同：1
> 
> 时间：2012-06-13T07:08:30.487
> 
> 标签：maven, repository

我有一个 Maven 构建，我需要在集成测试阶段访问一组特定的文件。这些文件作为 zip 文件从 URL 下载（它们实际上是 Jenkins 工件），并且需要在开始集成测试之前对其进行解压缩。zip 文件每天更新​​不超过一次（当 Jenkins 作业运行时），通常很少。zip 文件相当大（500MB），解压缩需要相当长的时间（约 10 分钟），因此**只有**在更新 zip 文件后才能进行下载和解压缩。

我第一次尝试这样做是创建一个 Maven 模块，该模块在其预集成测试阶段调用一个 ant 脚本以在本地目录中下载/解压缩，但我无法弄清楚如何正确设置依赖项以便该模块在运行任何其他测试之前执行。

这样做的最简单方法是什么，而无需设置单独的存储库来存储文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:36:31.880

您应该考虑使用[Maven 依赖插件](http://maven.apache.org/plugins/maven-dependency-plugin/index.html)，它可以满足您的需求。

首先确保您的 zip 文件可以从您公司的存储库或您自己的本地存储库访问，请看[这里](http://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html)。我刚刚通过发出以下命令尝试使用 eclipse zip 文件：

```
$> mvn install:install-file -Dfile=eclipse-jee-indigo-SR1-win32-x86_64.zip -DgroupId=eclipse -DartifactId=eclipse -Dversion=1.0-SNAPSHOT -Dpackaging=zip 
```

好的，现在您可以从 maven 轻松访问您的 zip 文件。现在将这些行添加到您`pom.xml`需要解压这些文件的位置（我使用了我新上传的 eclipse 工件，但您可以轻松地替换为您的）：

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
                <execution>
                    <id>unpack</id>
                    <phase>pre-integration-test</phase>
                    <goals>
                        <goal>unpack</goal>
                    </goals>
                    <configuration>
                        <artifactItems>
                            <artifactItem>
                                <groupId>eclipse</groupId>
                                <artifactId>eclipse</artifactId>
                                <version>1.0-SNAPSHOT</version>
                                <type>zip</type>
                            </artifactItem>
                        </artifactItems>
                        <includes>**/*.ini</includes>
                        <outputDirectory>${project.build.directory}</outputDirectory>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

`<phase/>`指示何时应完成解包。

标签是可选的`<includes/>`，只是我想展示的东西。这样整个拉链就不会被拆开，大大减少了时间。

现在仅当 zip 已更改且您想要实现的目标时才会执行解包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:39:22.803

如果您的 ZIP 文件可作为 Maven 依赖项使用，我认为您可以执行以下操作：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <executions>
      <execution>
        <id>unpacking</id>
        <phase>initialize</phase>
        <goals>
          <goal>unpack</goal>
        </goals>
        <configuration>
          <artifactItems>
            <artifactItem>
              <groupId>org.your.group.to.zip</groupId>
              <artifactId>the-zip</artifactId>
              <version>1-SNAPSHOT</version>
              <type>zip</type>
              <overWrite>false</overWrite>
              <outputDirectory>src/main/resources/something</outputDirectory>
              <excludes>*/somePath/**, */someOtherPath/**, **/pom.xml</excludes>
            </artifactItem>
          </artifactItems>
          <!-- Do not store markers in target so that they survive a mvn clean -->
          <markersDirectory>src/main/resources/markers/</markersDirectory>
        </configuration>
      </execution>
    </executions>
  </plugin> 
```

将标记存储在与目标不同的目录中可以防止它们在 mvn clean 期间被删除，因此整个解包应该只在 ZIP 实际更改时进行。

我不能 100% 确定上面的配置是否完全符合您的需求，但总体思路应该可以进行一些调整。请特别参阅[本](https://maven.apache.org/plugins/maven-dependency-plugin/examples/unpacking-artifacts.html)文档和本文档的[这一](https://maven.apache.org/plugins/maven-dependency-plugin/unpack-mojo.html)部分。

# cocoa-touch - 从周数计算日期

> ID：11009816
> 
> 赞同：0
> 
> 时间：2012-06-13T07:08:45.300
> 
> 标签：cocoa-touch, date, time

如何计算只有星期数和星期几的日期？

例如，第 24 周，星期二，2012，星期从星期一开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:20:51.250

非常方便，NSCalendar 会为你做所有的数学计算。首先，使用 NSDateComponents 设置参数：

```
NSDateComponents *comps = [[NSDateComponents alloc] init];
[comps setWeek:24];
[comps setWeekday:3]; //map weekday names to numbers (e.g., Sunday is 1)
[comps setYear:2012]; 
```

然后使用这些日期组件创建一个公历：

```
 NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar]; 
```

并抓住你的 NSDate：

```
 NSDate *date = [gregorian dateFromComponents:comps]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:18:36.947

```
 NSDate *now = [NSDate date];
    NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateComponents *comp = [gregorian components:NSYearCalendarUnit fromDate:now];
    [comp setWeek:24];
    [comp setDay:1]; 
    NSDate *resultDate = [gregorian dateFromComponents:comp];
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"MMM d, yyyy"];

    NSString *myDateString = [formatter stringFromDate:resultDate];

    [gregorian release]; // Clean up allocated objects by releasing them
    [formatter release];

    NSString * date = [NSString stringWithFormat:@"Week of %@", myDateString]; 
```

# java - 如何从字符串中获取整数列表

> ID：11009818
> 
> 赞同：10
> 
> 时间：2012-06-13T07:08:58.847
> 
> 标签：java

我的字符串包含`Integer`用空格分隔：

```
String number = "1 2 3 4 5 " 
```

如何`Integer`从此字符串中获取列表？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-13T07:11:35.860

您可以使用 a 一次[`Scanner`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)读取一个整数的字符串。

```
Scanner scanner = new Scanner(number);
List<Integer> list = new ArrayList<Integer>();
while (scanner.hasNextInt()) {
    list.add(scanner.nextInt());
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-13T07:12:47.750

```
ArrayList<Integer> lst = new ArrayList<Integer>();
for (String field : number.split(" +"))
    lst.add(Integer.parseInt(field)); 
```

使用 Java 8+：

```
List<Integer> lst = 
    Arrays.stream(number.split(" +")).map(Integer::parseInt).collect(Collectors.toList()); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-13T07:11:21.193

```
String number = "1 2 3 4 5";
String[] s = number.split("\\s+"); 
```

然后通过使用将其添加到您的列表中`Integer.parseInt(s[index]);`

```
List<Integer> myList = new List<Integer>();
for(int index = 0 ; index<5 ; index++)
             myList.add(Integer.parseInt(s[index]); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-07-13T13:33:48.027

在 Java 8 中，您可以使用流并以更紧凑的方式获得转换：

```
 String number = "1 2 3 4 5 ";
    List<Integer> x = Arrays.stream(number.split("\\s"))
            .map(Integer::parseInt)
            .collect(Collectors.toList()); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-04-24T10:54:02.070

使用 Java8 Stream API 映射和`mapToInt`函数，您可以轻松地将其归档：

```
String number = "1 2 3 4 5";
List<Integer> x = Arrays.stream(number.split("\\s"))
        .map(Integer::parseInt)
        .collect(Collectors.toList()); 
```

或者

```
String stringNum = "1 2 3 4 5 6 7 8 9 0";

List<Integer> poolList = Arrays.stream(stringNum.split("\\s"))
        .mapToInt(Integer::parseInt)
        .boxed()
        .collect(Collectors.toList()); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-13T07:12:55.727

首先，使用`split()`方法将String变成String数组。

其次，使用`getInteger()`方法将String转换为Integer。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-13T07:17:42.873

```
 String number="1 2 3 4 5";
 List<Integer> l=new ArrayList<Integer>();
 String[] ss=number.split(" ");
 for(int i=0;i<ss.length;i++)
 {
   l.add(Integer.parseInt(ss[i]));
 }

System.out.println(l); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-13T07:24:32.647

仅使用数组的简单解决方案：

```
// variables
String nums = "1 2 3 4 5";
// can split by whitespace to store into an array/lits (I used array for preference) - still string
String[] num_arr = nums.split(" ");
int[] nums_iArr = new int[num_arr.length];
// loop over num_arr, converting element at i to an int and add to int array

for (int i = 0; i < num_arr.length; i++) {
    int num_int = Integer.parseInt(num_arr[i])
    nums_iArr[i] = num_int
} 
```

这几乎涵盖了它。如果你想输出它们，例如控制台：

```
// for each loop to output
for (int i : nums_iArr) {
      System.out.println(i);
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-02-08T23:19:37.063

我想介绍分词器类以按任何分隔符分割。输入字符串只被扫描一次，我们有一个没有额外循环的列表。

```
 String value = "1, 2, 3, 4, 5";
    List<Long> list=new ArrayList<Long>();
    StringTokenizer tokenizer = new StringTokenizer(value, ",");
    while(tokenizer.hasMoreElements()) {
        String val = tokenizer.nextToken().trim();
        if (!val.isEmpty()) list.add( Long.parseLong(val) );
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-13T07:10:37.853

用**空格**分割，得到一个数组，然后将其转换为列表。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-06-13T07:11:26.403

您可以将其拆分，然后对其进行迭代，将其转换为数字，例如：

```
 String[] strings = "1 2 3".split("\\ ");
    int[] ints = new int[strings.length];
    for (int i = 0; i < strings.length; i++) {
        ints[i] = Integer.parseInt(strings[i]);
    }
    System.out.println(Arrays.toString(ints)); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-06-13T07:14:42.347

您首先使用正则表达式拆分字符串，然后遍历数组，将每个值转换为所需的类型。

```
String[] literalNumbers = [number.split(" ");][1]
int[] numbers = new int[literalNumbers.length];

for(i = 0; i < literalNumbers.length; i++) {
    numbers[i] = Integer.valueOf(literalNumbers[i]).intValue();
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-10-22T12:28:19.827

我需要一种更通用的方法来从字符串中检索整数列表，所以我编写了自己的方法。我不确定它是否比上述所有更好，因为我没有检查过它们。这里是：

```
public static List<Integer> getAllIntegerNumbersAfterKeyFromString(
        String text, String key) throws Exception {
    text = text.substring(text.indexOf(key) + key.length());
    List<Integer> listOfIntegers = new ArrayList<Integer>();
    String intNumber = "";
    char[] characters = text.toCharArray();
    boolean foundAtLeastOneInteger = false;
    for (char ch : characters) {
        if (Character.isDigit(ch)) {
            intNumber += ch;
        } else {
            if (intNumber != "") {
                foundAtLeastOneInteger = true;
                listOfIntegers.add(Integer.parseInt(intNumber));
                intNumber = "";
            }
        }
    }
    if (!foundAtLeastOneInteger)
        throw new Exception(
                "No matching integer was found in the provided string!");
    return listOfIntegers;
} 
```

@key 参数不是强制性的。如果删除方法的第一行，则可以将其删除：

```
 text = text.substring(text.indexOf(key) + key.length()); 
```

或者你可以用“”喂它。

# jquery - addClass - 可以在同一个 div 上添加多个类吗？

> ID：11009820
> 
> 赞同：86
> 
> 时间：2012-06-13T07:09:00.767
> 
> 标签：jquery

jQuery添加多个类

这是我当前的代码，我知道它的错误代码

```
$('.page-address-edit').addClass('test1').addClass('test2'); 
```

* * *

## 回答 #1

> 赞同：196
> 
> 时间：2013-05-04T07:05:35.690

```
$('.page-address-edit').addClass('test1 test2 test3'); 
```

[参考 - jQuery](http://api.jquery.com/addClass/)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-06-13T07:10:16.500

你可以做

```
$('.page-address-edit').addClass('test1 test2'); 
```

更多[在这里](http://api.jquery.com/addClass/)：

> 一次可以将多个类添加到匹配元素的集合中，用空格分隔，如下所示：
> 
> ```
> $("p").addClass("myClass yourClass"); 
> ```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-13T07:11:02.160

您可以通过用空格分隔类名来添加多个类

```
$('.page-address-edit').addClass('test1 test2 test3'); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-06-13T07:13:00.913

除了不能添加相同的类之外，您的代码还可以`test1`。

```
$('.page-address-edit').addClass('test1').addClass('test2'); //this will add test1 and test2 
```

你也可以做

```
$('.page-address-edit').addClass('test1 test2'); 
```

# jquery - 自定义属性选择和赋值

> ID：11009821
> 
> 赞同：0
> 
> 时间：2012-06-13T07:09:01.473
> 
> 标签：jquery, html

```
<ul class="slist single required" id="list-fieldtype" data-vt-name="list-fieldtype" >
            <li style="float:none;"><a class="sbox selected" data-vt-value="type_text" data-vt-selected="1">Text</a></li>
            <li style="float:none;"><a class="sbox" data-vt-value="type_number" data-vt-selected="0" >Number</a></li>
            <li style="float:none;"><a class="sbox" data-vt-value="type_date" data-vt-selected="0" >Date</a></li>
            <li style="float:none;"><a class="sbox" data-vt-value="type_yesno" data-vt-selected="0" >Yes/No</a></li>
            <li style="float:none;"><a class="sbox" data-vt-value="type_multi" data-vt-selected="0" >Multiple Choice Answers</a></li>
        </ul>

var $selected = $('.selected');
var new_fieldtype= $("#list-fieldtype").find( $selected ).removeClass('selected'); //this works

var new_fieldtype= $("#list-fieldtype>li>a").find( $selected ).data('vt-selected','0'); // does not work
         $("#list-fieldtype").find( 'type_text' ).addClass('selected'); // does not work
         $("#list-fieldtype>a[data-vt-value=type_text]").addClass('selected'); // does not work 
```

我如何使最后三个语句起作用？有任何想法吗 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:20:58.053

[.data()](http://api.jquery.com/data/)只能用于**获取**数据属性的值，**不能设置它们**。您必须使用[.attr()](http://api.jquery.com/attr/)来设置属性的值。

```
 $selected.attr('data-vt-selected', 0); 
```

如果您的数据属性键 if `data-vt-value`，则传递给[.data()](http://api.jquery.com/data/)的键是`vtValue`

```
 var value = $selected.data('vtSelected'); 
```

对于最后一条语句，选择器是错误的：anchor 不是 UL 的直接子代！

```
$('#list-fieldtype > a[data-vt-value=type_text]')
// should be
$('#list-fieldtype a[data-vt-value=type_text]') 
```

**[演示](http://jsfiddle.net/didierg/y5GJ7/)**

*注意这样做是没有意义的`$("#list-fieldtype").find( $selected )`。`$selected`已经是您要使用的元素，因此直接使用它。*

# apache - Apache mod_deflate 不压缩 javascript/css

> ID：11009827
> 
> 赞同：0
> 
> 时间：2012-06-13T07:09:33.863
> 
> 标签：apache, xampp, mod-deflate

我正在尝试在 xampp 上进行 Gzip 压缩，现在这是在我的 .htaccess 中

```
<IfModule mod_deflate.c>

    AddOutputFilterByType DEFLATE text/html text/plain text/css application/json
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE text/xml application/xml text/x-component
    AddOutputFilterByType DEFLATE application/xhtml+xml application/rss+xml application/atom+xml
    AddOutputFilterByType DEFLATE image/x-icon image/svg+xml application/vnd.ms-fontobject application/x-font-ttf font/opentype

</IfModule> 
```

HTML 文件被压缩，但 JavaScript 和 CSS 文件没有任何反应。有谁知道为什么？如何解决这个问题？（如果可能的话）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:40:53.833

好吧...愚蠢的错误...浏览器仍然使用缓存版本...

# android - 两个 TextView 使用 XML 独占一行显示

> ID：11009831
> 
> 赞同：0
> 
> 时间：2012-06-13T07:09:46.310
> 
> 标签：android, android-layout, textview

我的 ListView 项目有两个 TextView。**我想使用 XML**一次显示其中一个。我不想以编程方式执行此操作。怎么做？

例如：当 TextView A 有文字时，TextView B 消失。当 TextView A 为空时，出现 TextView B。

![在此处输入图像描述](../Images/85db0bac7415a34269785ad477918f37.png)

我的代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/groupNameTextView"
        android:layout_width="wrap_content"
        android:layout_height="50dip"
        android:text="TextView"
        android:textSize="20dip"
        android:textColor="@color/ForestGreen"
        />

    <TextView
        android:id="@+id/topRatedPlaceNameTextView"
        android:layout_width="wrap_content"
        android:layout_height="50dip"
        android:text="TextView"
        android:textSize="20dip" 
        android:textColor="@color/Azure"
        />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T07:13:26.483

抱歉，你不能用 xml 来做到这一点，通过在你`getView()`的 List 的适配器中以编程方式检查，比如

```
if(textview1.getText().toString.length()>0)
     textview2.setVisibilty(View.GONE);
else
     textview1.setVisibilty(View.GONE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:15:44.477

TextView A 有一个文本，然后在 TextView B 中设置 setVisibility(View.VISIBLE) 或 setVisibility(View.VGONE)，对于 TextView B 也是如此。您在 CustomAdapter 类的 getView 方法中执行此操作。

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T07:22:11.587

你会同时用文字显示它们吗？如果没有，并且您没有样式差异（文本大小/颜色），您可以只使用单个文本视图吗？

否则，如果 A 和 B 具有不同的大小/颜色/字体/其他，并且假设它们永远不会同时具有文本，那么像您一样使用 wrap_content 应该确保 A 在没有文本时获得宽度为 0，并且B 将占用所有空间。否则，如果 B 没有文本，则 A 将占用其内容所需的空间。

# css - CSS 未在 IE 中显示（任何版本）

> ID：11009832
> 
> 赞同：1
> 
> 时间：2012-06-13T07:09:50.937
> 
> 标签：css, google-chrome, cross-browser, internet-explorer-9

在我的网站上线之前，我正在对其进行一些最终测试。我已经在 Chrome 中构建了它，并且我正在寻找在 IE 中完成的所有工作！

我有一个我构建的精灵没有在 IE 中显示...

HTML

```
<a href="https://plus.google.com/111035429397283398622/" target="_blank"><img src="http://127.0.0.1:600/wordpress/wp-content/uploads/2012/06/spacer.gif" class="sprite social plus1" alt="Join our Circles on Google+" /></a>

<a href="http://www.facebook.com/primorisfinancial" target="_blank"><img src="http://127.0.0.1:600/wordpress/wp-content/uploads/2012/06/spacer.gif" class="sprite social facebook" alt="Like Primoris Financial on Facebook" /></a>

<a href="http://au.linkedin.com/in/benjaminirons" target="_blank"><img src="http://127.0.0.1:600/wordpress/wp-content/uploads/2012/06/spacer.gif" class="sprite social linkedin" alt="Benjamin Irons on LinkedIn" /></a>

<a href="http://primorisfinancial.blogspot.com" target="_blank"><img src="http://127.0.0.1:600/wordpress/wp-content/uploads/2012/06/spacer.gif" class="sprite social blogger" alt="Primoris Financial on Blogger" /></a>

<a href="http://twitter.com/PrimorisFinPlan" target="_blank"><img src="http://127.0.0.1:600/wordpress/wp-content/uploads/2012/06/spacer.gif" class="sprite social twitter" alt="Follow Primoris Financial on Twitter" /></a>

<a href="http://www.youtube.com/PrimorisFinancial" target="_blank"><img src="http://127.0.0.1:600/wordpress/wp-content/uploads/2012/06/spacer.gif" class="sprite social youtube" alt="Primoris Financial on YouTube" /></a> 
```

使用以下 CSS

```
.sprite {background:url(http://127.0.0.1:600/wordpress/wp-content/uploads/2012/06/Social-CSS-Sprite-Test.png);}
    .social {height:32px;}

/* Social Buttons */

        .plus1 {width:32px; background-position:0px 0px;}
        .facebook {width:32px; background-position:-33px 0px;}
        .linkedin {width:32px; background-position:-66px 0px;}
        .blogger {width:32px; background-position:-99px 0px;}
        .twitter {width:32px; background-position:-132px 0px;}
        .youtube {width:32px; background-position:-165px 0px 
```

;}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:18:18.173

据我所知，主要问题之一是您在不使用引号/语音标记的情况下链接到 CSS 中的图像。正如dystroy所说，不要硬链接到图像，最好相对像这样：

```
{background:url('../wp-content/uploads/2012/06/Social-CSS-Sprite-Test.png');} 
```

这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:13:38.837

从图像中删除 src（使用 span 比使用 img 更好）。

将您的 css 中的 URL 修复为相对的，而不是指向 127.0.0.1 (localhost)。

检查您是否拥有正确的 HTML 标头：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

# powershell - Powershell：未填充参数/参数

> ID：11009834
> 
> 赞同：7
> 
> 时间：2012-06-13T07:09:51.810
> 
> 标签：powershell

我有一个 PowerShell 脚本：

```
param (
    [Parameter(Mandatory=$true)][string]$input,
    [Parameter(Mandatory=$true)][string]$table
)

Write-Host "Args:" $Args.Length
Get-Content $input |
    % { [Regex]::Replace($_, ",(?!NULL)([^,]*[^\d,]+[^,]*)", ",'`$1'") } |
    % { [Regex]::Replace($_, ".+", "INSERT INTO $table VALUES (`$1)") } 
```

`Write-Host part`用于调试。
我将它作为`.\csvtosql.ps1 mycsv.csv dbo.MyTable`（从powershell shell）运行，并得到

```
Args: 0
Get-Content : Cannot bind argument to parameter 'Path' because it is an empty s
tring.
At C:\temp\csvtosql.ps1:7 char:12
+ Get-Content <<<<  $input |
    + CategoryInfo          : InvalidData: (:) [Get-Content], ParameterBinding
   ValidationException
    + FullyQualifiedErrorId : ParameterArgumentValidationErrorEmptyStringNotAl
   lowed,Microsoft.PowerShell.Commands.GetContentCommand 
```

我传递的任何参数都会得到完全相同的错误，如果我尝试使用命名参数也会出现相同的错误。

什么会导致参数不能传入？

**更新**：PowerShell ISE 使用 GUI 提示向我询问这些参数，然后给我同样的错误，关于它们没有被传入。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T07:28:05.470

除非您使用 ValueFromRemainingArguments 属性标记参数（指示 cmdlet 参数是否接受与此参数关联的所有剩余命令行参数），否则 Args 将“禁用”。如果您只需要参数计数，请调用特殊变量：

```
$PSBoundParameters.Count 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T07:32:07.723

*   不要混在一起。使用 $args 或参数。
*   另请注意 $input 是一个特殊变量，不要将其声明为参数。[http://dmitrysotnikov.wordpress.com/2008/11/26/input-gotchas/](http://dmitrysotnikov.wordpress.com/2008/11/26/input-gotchas/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-13T14:35:07.960

您正在使用位置参数（即未命名）调用脚本，而 PowerShell 不知道如何将它们映射到您的脚本参数。您需要使用参数名称调用脚本：

```
.\csvtosql.ps1 -input mycsv.csv -table dbo.MyTable 
```

或更新您的脚本以指定您首选的位置参数顺序：

```
param (
    [Parameter(Mandatory=$true,Position=0)]
    [string]
    $input,

    [Parameter(Mandatory=$true,Position=1)]
    [string]
    $table
) 
```

# java - 清除 Jackrabbit 数据

> ID：11009836
> 
> 赞同：0
> 
> 时间：2012-06-13T07:10:05.867
> 
> 标签：java, jackrabbit, jcr

在使用我们的应用程序（内部使用 Jackrabbit 1.6.4 存储文档）几个月后，客户的数据库 (Oracle) 的`VERSION_BUNDLE`表中已经有超过 600 万行 - 我们的一些数据正在使用 Jackrabbit 版本控制功能同一文档的多个实例。我们预计在接下来的几个月/几年中，该应用程序的使用量会增加，因此也预计 Jackrabbit 中存储的数据会加速增长。

我们的一些运营人员担心此表（以及该`DEFAULT_BUNDLE`表）中的记录数。有没有办法安全地从这些表中清除一些数据？我想简单地通过 Jackrabbit API 删除文档不会这样做，对吧？

我们需要担心表中的记录数吗？其他人在他们的 Jackrabbit 安装中看到了多少数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:40:24.867

与其拥有同一个文档的多个实例，为什么不拥有一次然后引用它呢？我们通过将节点的路径/标识符存储为另一个节点的属性来做到这一点，这样我们就可以轻松地查找它。

要删除不需要的版本，您可以使用`VersionHistory.removeVersion()`.

我不知道 jackrabbit 1.6 但在 2.4 中删除节点/版本似乎会从版本/默认表中删除相应的条目。我不认为我想手动删除条目！

# android - ClassCastException：Android 中的线性布局

> ID：11009837
> 
> 赞同：0
> 
> 时间：2012-06-13T07:10:09.220
> 
> 标签：android, classcastexception, android-linearlayout

我正在编写我的第一个 android 应用程序，但遇到了一个问题：在我尝试打开一个新 Activity 后应用程序关闭。

这是活动代码：

```
package com.WNF;

import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.app.ListActivity;
import android.content.Intent;

public class Actiemenu extends ListActivity{

String[] array = { "","henk","henk2" };

@Override 
public void onCreate(Bundle savedInstanceState) { 

super.onCreate(savedInstanceState); 
setContentView (R.layout.actiemenu);

setListAdapter(new ArrayAdapter<String> (this, R.layout.actiemenu, array));
    ListView lv = getListView();
    lv.setTextFilterEnabled(true);

lv.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

        if (position == 0) {
            Intent een = new Intent(Actiemenu.this, Acties.class);
            startActivity(een);
        }
        else if (position == 1) {
            Intent twee = new Intent(Actiemenu.this, Acties2.class);
            startActivity(twee);
        }
    }
});
getIntent();
}
} 
```

这是 logcat 的日志：

```
06-13 06:50:13.920: E/AndroidRuntime(335): FATAL EXCEPTION: main
06-13 06:50:13.920: E/AndroidRuntime(335): java.lang.IllegalStateException: ArrayAdapter requires the resource ID to be a TextView
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:347)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.widget.AbsListView.obtainView(AbsListView.java:1430)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.widget.ListView.makeAndAddView(ListView.java:1745)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.widget.ListView.fillDown(ListView.java:670)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.widget.ListView.fillFromTop(ListView.java:727)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.widget.ListView.layoutChildren(ListView.java:1598)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.widget.AbsListView.onLayout(AbsListView.java:1260)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.view.View.layout(View.java:7175)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.view.View.layout(View.java:7175)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.view.View.layout(View.java:7175)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.view.View.layout(View.java:7175)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.view.View.layout(View.java:7175)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1140)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.os.Looper.loop(Looper.java:123)
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-13 06:50:13.920: E/AndroidRuntime(335):  at java.lang.reflect.Method.invokeNative(Native Method)
06-13 06:50:13.920: E/AndroidRuntime(335):  at java.lang.reflect.Method.invoke(Method.java:507)
06-13 06:50:13.920: E/AndroidRuntime(335):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-13 06:50:13.920: E/AndroidRuntime(335):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-13 06:50:13.920: E/AndroidRuntime(335):  at dalvik.system.NativeStart.main(Native Method)
06-13 06:50:13.920: E/AndroidRuntime(335): Caused by: java.lang.ClassCastException: android.widget.LinearLayout
06-13 06:50:13.920: E/AndroidRuntime(335):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:340)
06-13 06:50:13.920: E/AndroidRuntime(335):  ... 30 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:12:45.663

只需更仔细地查看您的异常，您就会知道为什么您的活动会引发异常：`ArrayAdapter requires the resource ID to be a TextView`。因此，您必须将代码更改为：`setListAdapter(new ArrayAdapter<String> (this, R.id.yourTextViewId, array));`

在这里您可以找到有关[ArrayAdapter](http://developer.android.com/reference/android/widget/ArrayAdapter.html)的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:16:43.517

在android ArrayAdapter 是预定义的适配器，它已经定义了它的get 函数。因此，适配器需要一些预定义的 id，例如“text: 用于文本视图。所以它提供了一些预定义的 XML 布局。所以要么使用它们，要么......

因此，如果想使用您自己的布局和自己的 id，只需让您的自定义适配器扩展 ArrayAdapter 并覆盖 getview 函数......

[如何在单独的类中使用自定义 ArrayAdapter？](https://stackoverflow.com/questions/6958279/how-to-use-a-custom-arrayadapter-in-a-separate-class)

[如何使用 ArrayAdapter<myClass>](https://stackoverflow.com/questions/2265661/how-to-use-arrayadaptermyclass)

# perl - (perl Net::SMTP) 使用 gmail smtp 服务器的身份验证失败

> ID：11009844
> 
> 赞同：2
> 
> 时间：2012-06-13T07:10:31.100
> 
> 标签：perl, smtp, gmail

我编写了一个 perl 脚本来使用 gmail 的 smtp 服务器发送电子邮件：smtp.gmail.com -

```
use Net::SMTP;

my $smtp = Net::SMTP->new('smtp.gmail.com',
                    Port=> 587,
                    Timeout => 20,
                    Hello=>'user@gmail.com'
                    );
print $smtp->domain,"\n";
$sender = "user@gmail.com";
$password = "mypassword";
$smtp->auth ( $sender, $password ) or die "could not authenticate\n";
$receiver = "user@gmail.com";

$subject = "my custom subject";
$smtp->mail($sender);
$smtp->to($receiver);
$smtp->data();
$smtp->datasend("To: <$reciever> \n");
$smtp->datasend("From: <$sender> \n");
$smtp->datasend("Content-Type: text/html \n");
$smtp->datasend("Subject: $subject");
$smtp->datasend("\n");
$smtp->datasend('the body of the email');
$smtp->dataend();
$smtp->quit();
print "done\n\n"; 
```

对于“用户”，我有我的 gmail 用户名，对于“我的密码”，我有密码。但是，当我运行此代码时，它会在身份验证本身停止，给出：无法进行身份验证。

我能够连接到 google 的 smtp 服务器，因为我得到：'mx.google.com'，结果是：
print $smtp->domain,"\n";

我做错了什么？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T07:27:36.123

```
use Net::SMTP;
my $smtp = Net::SMTP->new .... 
```

afaik，您需要使用加密连接通过 gmail 发送，使用*Net::SMTP::TLS*或 *Net::SMTP::SSL*（使用端口 465）

```
Hello=>'user@gmail.com' 
```

“你好”不是电子邮件地址，而是将您的主机名放在那里

```
$sender = "user@gmail.com";
...
$receiver = "user@gmail.com"; 
```

把这些放在单引号中

如果您仍然收到“无法验证”。确保已安装模块*MIME::Base64*和*Authen::SASL*。

```
 $smtp->datasend("To: <$reciever> \n"); 
```

应该是*$receiver*，而不是*$reciever*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:04:01.823

Gmail[在端口 587 上使用 TLS/STARTTLS，在端口 465 上使用 SSL](http://support.google.com/mail/bin/answer.py?answer=13287)。请遵循[从 Perl 通过 Google SMTP 发送电子邮件](http://robertmaldon.blogspot.com/2006/10/sending-email-through-google-smtp-from.html)。或者，您可以使用[Email::Send::SMTP::Gmail](http://p3rl.org/Email%3a%3aSend%3a%3aSMTP%3a%3aGmail)。我推荐这个，因为它更容易使用并且有更多的功能。

# c++ - C++、VS2010：避免下载 MS 可再发行包。静态链接？

> ID：11009851
> 
> 赞同：4
> 
> 时间：2012-06-13T07:10:59.393
> 
> 标签：c++, visual-studio-2010

VS2010 可以将所有内容链接到需要的 exe 文件中吗？或者我应该将 MS VS2010 文件放入安装包中吗？我不希望用户考虑下载和安装某些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:20:34.003

为此在大型MFC项目中尝试使用静态链接，使用VS2010，发现还是需要运行VS2010 SP1 redist包。该软件在很大程度上可以在没有它的情况下运行，但用户会看到相当数量的额外随机错误，一旦安装了 redist，这些错误似乎奇迹般地消失了。我猜它会更新运行时所依赖的其他 Windows 组件，但这只是一个猜测。我的建议是将它包含在您的安装中。

# php - 检查 In_Array（在递归关联数组中）

> ID：11009875
> 
> 赞同：-3
> 
> 时间：2012-06-13T07:12:33.700
> 
> 标签：php, arrays, recursion, associative-array

我有一个类似的数组：

```
array(2) {
  [0]=>
  array(2) {
    ["code"]=>
    string(2) "en"
    ["name"]=>
    string(7) "English"
  }
  [1]=>
  array(2) {
    ["code"]=>
    string(2) "bg"
    ["name"]=>
    string(9) "Bulgarian"
  }
} 
```

如何检查字符串保加利亚语是否是上述数组的一部分，或者语言代码“en”是否是数组的一部分？如果我不必使用 foreach 循环整个数组并将字符串与每个元素 ['code'] 或 element['name'] 进行比较，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T07:19:10.520

```
// $type could be code or name
function check_in_array($arr, $value, $type = "code") {
  return count(array_filter($arr, function($var) use ($type, $value) {
    return $var[$type] === $value;
  })) !== 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:45:35.593

我知道我的代码使用了 foreach，但它很容易理解和使用。

```
$language=array();
$language[0]['code']='en';
$language[0]['name']='English';
$language[1]['code']='bg';
$language[1]['name']='Bulgaria';

var_dump(my_in_array('Bulgaria', $language));

function my_in_array($search, $array) {
    $in_keys = array();
    foreach($array as $key => $value){
        if(in_array($search, $value)){
            $in_keys[]=$key;
        }
    }
    if(count($in_keys) > 0){
        return $in_keys;
    }else{
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T07:22:31.937

您可以使用此功能进行递归搜索

```
function in_arrayr($needle, $haystack) {
        foreach ($haystack as $v) {
                if ($needle == $v) return true;
                elseif (is_array($v)) return in_array($needle, $v);
        }
        return false;
} 
```

或者你可以在你的数组上使用[json_encode](http://php.net/manual/en/function.json-encode.php)并搜索子字符串的出现:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-25T15:32:40.620

我有类似的问题，所以我做了这个函数，它就像in_array，但它可以递归地在数组中搜索。我认为这是正确的，但我没有在很多情况下进行测试。（对不起我的英语我是法国人）

```
function in_arrayr($needle, $haystack) {
if(is_array($haystack)){
    foreach($haystack as $elem){
        $a = in_arrayr($needle,$elem)||$a;
    }
}
else{
    $a = (($needle == $haystack)? true: false);
}
    return $a;
} 
```

# javascript - 我应该为每个连接创建一个新的 Redis 客户端吗？

> ID：11009880
> 
> 赞同：1
> 
> 时间：2012-06-13T07:12:51.413
> 
> 标签：javascript, database, node.js, redis

我正在看这个代码片段：

```
var addSnippet = function( req, res ) {
  getPostParams( req, function( obj ) {
      var r = redis.createClient();

      r.stream.on( 'connect', function() {
        r.incr( 'nextid' , function( err, id ) {
          r.set( 'snippet:'+id, JSON.stringify( obj ), function() {
            var msg = 'The snippet has been saved at <a href="/'+id+'">'+req.headers.host+'/'+id+'</a>';
            res.respond( msg );
          } );
        } );
      } );
    });
}; 
```

它来自这里：[http](http://howtonode.org/node-redis-fun) ://howtonode.org/node-redis-fun 。

我不太明白发生了什么事。从示例中，我认为 Redis 客户端是数据库和程序员之间的某种接口，但现在似乎他们正在为每个代码提交创建一个新客户端（他们在教程中构建的应用程序是接受代码片段提交并将它们存储在数据库中）！

另外，Redis 数据库存储在哪里？在与脚本相同的目录中？我该如何改变它？

我将 Redis 与 Node.js 一起使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T07:19:13.577

呃，看起来他们正在为每个客户端创建一个 redis 连接。这绝对不推荐。

Redis 是一个数据库。这就像 MySQL。您可以通过客户端访问它，但它是在您的服务器上运行的程序。数据由它处理，因此您不必担心它在哪里。如果您确实担心，可以查看 redis 配置。更多信息在这里：[http](http://redis.io) ://redis.io （文档非常好）。

要“修复”代码并仅使用一个客户端，您必须像这样使用它：

```
/**
 * Move this at the top, this way it's not run once per client,
 * it is run once the node program is launched.
 */
var r = redis.createClient();

var addSnippet = function( req, res ) {
  getPostParams( req, function( obj ) {    
      r.stream.on( 'connect', function() {
        r.incr( 'nextid' , function( err, id ) {
          r.set( 'snippet:'+id, JSON.stringify( obj ), function() {
            var msg = 'The snippet has been saved at <a href="/'+id+'">'+req.headers.host+'/'+id+'</a>';
            res.respond( msg );
          } );
        } );
      } );
    });
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T01:51:30.140

必须实现连接池，否则代码将陷入困境。我还将 redis 与 django-redis-backend 一起使用，代码片段如下所述。它会给你一个想法。

```
class CacheConnectionPool(object):

    def __init__(self):
        self._connection_pools = {}

    def get_connection_pool(self, host='127.0.0.1', port=6379, db=1,
                            password=None, parser_class=None,
                            unix_socket_path=None):
        connection_identifier = (host, port, db, parser_class, unix_socket_path)
        if not self._connection_pools.get(connection_identifier):
            connection_class = (
                unix_socket_path and UnixDomainSocketConnection or Connection
                )
            kwargs = {
                'db': db,
                'password': password,
                'connection_class': connection_class,
                'parser_class': parser_class,
            }
            if unix_socket_path is None:
                kwargs.update({
                    'host': host,
                    'port': port,
                })
            else:
                kwargs['path'] = unix_socket_path
            self._connection_pools[connection_identifier] = redis.ConnectionPool(**kwargs)
        return self._connection_pools[connection_identifier]

pool = CacheConnectionPool() 
```

# android - Android：实现字体时出错

> ID：11009883
> 
> 赞同：1
> 
> 时间：2012-06-13T07:13:07.743
> 
> 标签：android, typeface

我正在制作一个应用程序，我的类在其中扩展`RelativeLayout`和实现`OnClickListener`但我的问题是我无法设置`TypeFace`它的给予`Exception`

```
public class Viewnew extends RelativeLayout implements OnPageChangeListener {
Context mContext; 
```

当我使用

```
Typeface tf=Typeface.createFromAsset(mContext.getAssets(), "fonts/trbuc.ttf"); 
```

我收到异常，`mContext`异常如下：

```
E/AndroidRuntime(15203): Caused by: java.lang.RuntimeException: native typeface cannot be made
E/AndroidRuntime(15203): at android.graphics.Typeface.<init>(Typeface.java:240)
E/AndroidRuntime(15203):at android.graphics.Typeface.createFromAsset(Typeface.java:214) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:20:31.283

改成

```
Typeface tf=Typeface.createFromAsset(getContext().getAssets(), "fonts/trbuc.ttf"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:24:46.917

为此使用以下代码。

```
// Font path
String fontPath = "fonts/trbuc.ttf";

// text view label
TextView txtGhost = (TextView) findViewById(R.id.mTxtViewCustomFont);

// Loading Font Face
Typeface tf = Typeface.createFromAsset(mContext.getAssets(), fontPath);

// Applying font
txtGhost.setTypeface(tf); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T07:23:14.997

上下文显然不是问题，因为这不是 NullPointer。

问题是您指定的字体文件。首先，检查路径是否正确。如果是，请尝试加载不同的字体文件，看看是否有效。Android 无法加载所有字体。它很挑剔。因此，如果您能找到类似的字体，请尝试一下。我希望这最终对你有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T11:45:57.540

我用**.otf**代替**.ttf**并且它起作用了。谢谢大家的帮助

# c# - 未使用以下条件启用列表框

> ID：11009887
> 
> 赞同：0
> 
> 时间：2012-06-13T07:13:28.620
> 
> 标签：c#, asp.net, listbox

在我的操作中，我想编辑员工列表。在这个时候我使用下面的语句来禁用列表框。

```
 this.lstbox.Attributes.Add("Disabled", ""); 
```

更新后使用以下代码启用列表框。

```
 this.lstbox.Attributes.Add("enabled", ""); 
```

第一个条件工作正常，但第二个条件不返回任何错误并且列表框未启用。

请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:20:04.917

我认为您应该删除“已禁用”属性：

```
lstbox.Attributes.Remove("Disabled"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:21:23.640

没有接触过asp.net，但在查看：“[列表框启用示例](http://asp-net-example.blogspot.co.il/2009/03/how-to-enable-disable-listbox.html)”之后

你不能写：

```
lstbox.Enabled = true;
lstbox.Enabled = false; 
```

# wso2 - WSO2 数据服务不适用于命名查询（准备语句）

> ID：11009888
> 
> 赞同：1
> 
> 时间：2012-06-13T07:13:29.220
> 
> 标签：wso2, wso2esb, esb, wso2dss

我只是想在 Oracle XE DB 上做一个连接到 HR 模式的简单数据服务。我刚刚写了一个简单的查询，它接受一个输入参数并根据传递的绑定数据相应地获取结果。

我的查询如下所示

```
SELECT first_name,last_name,email,phone_number,hire_date,salary 
FROM employees 
WHERE first_name like :Bind_name 
```

我添加了一个输入变量 Bind_name 并在我请求服务时传递它。

但是，当我触发该服务时，我看到以下错误并且在网络上找不到相关帮助。

```
[2012-06-13 12:42:08,101] ERROR {org.wso2.carbon.dataservices.core.description.query.SQLQuery} -  org.apache.commons.dbcp.DelegatingPreparedStatement cannot be cast to java.sql.CallableStatement
java.lang.ClassCastException: org.apache.commons.dbcp.DelegatingPreparedStatement cannot be cast to java.sql.CallableStatement
    at org.wso2.carbon.dataservices.core.description.query.SQLQuery.setStringValue(SQLQuery.java:1943)
    at org.wso2.carbon.dataservices.core.description.query.SQLQuery.setParamInPreparedStatement(SQLQuery.java:1411)
    at org.wso2.carbon.dataservices.core.description.query.SQLQuery.createProcessedPreparedStatement(SQLQuery.java:1380)
    at org.wso2.carbon.dataservices.core.description.query.SQLQuery.processNormalQuery(SQLQuery.java:802)
    at org.wso2.carbon.dataservices.core.description.query.SQLQuery.runQuery(SQLQuery.java:2069)
    at org.wso2.carbon.dataservices.core.description.query.Query.execute(Query.java:252)
    at org.wso2.carbon.dataservices.core.engine.CallQuery.execute(CallQuery.java:185)
    at org.wso2.carbon.dataservices.core.engine.CallQueryGroup.execute(CallQueryGroup.java:110)
    at org.wso2.carbon.dataservices.core.description.operation.Operation.execute(Operation.java:71)
    at org.wso2.carbon.dataservices.core.engine.DataService.invoke(DataService.java:592)
    at org.wso2.carbon.dataservices.core.engine.DSOMDataSource.execute(DSOMDataSource.java:99)
    at org.wso2.carbon.dataservices.core.engine.DSOMDataSource.serialize(DSOMDataSource.java:110)
    at org.apache.axiom.om.impl.llom.OMSourcedElementImpl.internalSerialize(OMSourcedElementImpl.java:691)
    at org.apache.axiom.om.impl.util.OMSerializerUtil.serializeChildren(OMSerializerUtil.java:563)
    at org.apache.axiom.om.impl.llom.OMElementImpl.internalSerialize(OMElementImpl.java:875)
    at org.apache.axiom.soap.impl.llom.SOAPEnvelopeImpl.serializeInternally(SOAPEnvelopeImpl.java:283)
    at org.apache.axiom.soap.impl.llom.SOAPEnvelopeImpl.internalSerialize(SOAPEnvelopeImpl.java:245)
    at org.apache.axiom.om.impl.llom.OMSerializableImpl.serializeAndConsume(OMSerializableImpl.java:193)
    at org.apache.axis2.transport.http.SOAPMessageFormatter.writeTo(SOAPMessageFormatter.java:74)
    at org.apache.axis2.transport.http.CommonsHTTPTransportSender.sendUsingOutputStream(CommonsHTTPTransportSender.java:409)
    at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:286)
    at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:443)
    at org.apache.axis2.receivers.AbstractInOutSyncMessageReceiver.invokeBusinessLogic(AbstractInOutSyncMessageReceiver.java:45)
    at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110)
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
    at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
    at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
    at org.wso2.carbon.core.transports.CarbonServlet.doPost(CarbonServlet.java:199)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.wso2.carbon.bridge.BridgeServlet.service(BridgeServlet.java:164)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:154)
    at org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer.java:254)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
    at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:396)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:356)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1534)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
[2012-06-13 12:42:08,106] ERROR {org.wso2.carbon.dataservices.core.engine.DataService} -  DS Fault Message: Error in 'SQLQuery.processNormalQuery'
DS Code: DATABASE_ERROR
Source Data Service:-
Name: EmployeeService
Location: \EmployeeService.dbs
Description: N/A
Default Namespace: http://ws.wso2.org/dataservice
Current Request Name: findByEmployeeNameLike
Current Params: {Bind_name=S%}
Nested Exception:-
java.lang.ClassCastException: org.apache.commons.dbcp.DelegatingPreparedStatement cannot be cast to java.sql.CallableStatement

DS Fault Message: Error in 'SQLQuery.processNormalQuery'
DS Code: DATABASE_ERROR
Source Data Service:-
Name: EmployeeService
Location: \EmployeeService.dbs
Description: N/A
Default Namespace: http://ws.wso2.org/dataservice
Current Request Name: findByEmployeeNameLike
Current Params: {Bind_name=S%}
Nested Exception:-
java.lang.ClassCastException: org.apache.commons.dbcp.DelegatingPreparedStatement cannot be cast to java.sql.CallableStatement

    at org.wso2.carbon.dataservices.core.description.query.SQLQuery.processNormalQuery(SQLQuery.java:844)
    at org.wso2.carbon.dataservices.core.description.query.SQLQuery.runQuery(SQLQuery.java:2069)
    at org.wso2.carbon.dataservices.core.description.query.Query.execute(Query.java:252)
    at org.wso2.carbon.dataservices.core.engine.CallQuery.execute(CallQuery.java:185)
    at org.wso2.carbon.dataservices.core.engine.CallQueryGroup.execute(CallQueryGroup.java:110)
    at org.wso2.carbon.dataservices.core.description.operation.Operation.execute(Operation.java:71)
    at org.wso2.carbon.dataservices.core.engine.DataService.invoke(DataService.java:592)
    at org.wso2.carbon.dataservices.core.engine.DSOMDataSource.execute(DSOMDataSource.java:99)
    at org.wso2.carbon.dataservices.core.engine.DSOMDataSource.serialize(DSOMDataSource.java:110)
    at org.apache.axiom.om.impl.llom.OMSourcedElementImpl.internalSerialize(OMSourcedElementImpl.java:691)
    at org.apache.axiom.om.impl.util.OMSerializerUtil.serializeChildren(OMSerializerUtil.java:563)
    at org.apache.axiom.om.impl.llom.OMElementImpl.internalSerialize(OMElementImpl.java:875)
    at org.apache.axiom.soap.impl.llom.SOAPEnvelopeImpl.serializeInternally(SOAPEnvelopeImpl.java:283)
    at org.apache.axiom.soap.impl.llom.SOAPEnvelopeImpl.internalSerialize(SOAPEnvelopeImpl.java:245)
    at org.apache.axiom.om.impl.llom.OMSerializableImpl.serializeAndConsume(OMSerializableImpl.java:193)
    at org.apache.axis2.transport.http.SOAPMessageFormatter.writeTo(SOAPMessageFormatter.java:74)
    at org.apache.axis2.transport.http.CommonsHTTPTransportSender.sendUsingOutputStream(CommonsHTTPTransportSender.java:409)
    at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:286)
    at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:443)
    at org.apache.axis2.receivers.AbstractInOutSyncMessageReceiver.invokeBusinessLogic(AbstractInOutSyncMessageReceiver.java:45)
    at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110)
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
    at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
    at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
    at org.wso2.carbon.core.transports.CarbonServlet.doPost(CarbonServlet.java:199)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.wso2.carbon.bridge.BridgeServlet.service(BridgeServlet.java:164)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:154)
    at org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer.java:254)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
    at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:396)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:356)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1534)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.ClassCastException: org.apache.commons.dbcp.DelegatingPreparedStatement cannot be cast to java.sql.CallableStatement
    at org.wso2.carbon.dataservices.core.description.query.SQLQuery.setStringValue(SQLQuery.java:1943)
    at org.wso2.carbon.dataservices.core.description.query.SQLQuery.setParamInPreparedStatement(SQLQuery.java:1411)
    at org.wso2.carbon.dataservices.core.description.query.SQLQuery.createProcessedPreparedStatement(SQLQuery.java:1380)
    at org.wso2.carbon.dataservices.core.description.query.SQLQuery.processNormalQuery(SQLQuery.java:802)
    ... 50 more
[2012-06-13 12:42:08,110] ERROR {org.apache.axis2.transport.http.CommonsHTTPTransportSender} -  DS Fault Message: Error in 'SQLQuery.processNormalQuery'
DS Code: DATABASE_ERROR
Source Data Service:-
Name: EmployeeService
Location: \EmployeeService.dbs
Description: N/A
Default Namespace: http://ws.wso2.org/dataservice
Current Request Name: findByEmployeeNameLike
Current Params: {Bind_name=S%}
Nested Exception:-
java.lang.ClassCastException: org.apache.commons.dbcp.DelegatingPreparedStatement cannot be cast to java.sql.CallableStatement

org.apache.axis2.AxisFault: DS Fault Message: Error in 'SQLQuery.processNormalQuery'
DS Code: DATABASE_ERROR
Source Data Service:-
Name: EmployeeService
Location: \EmployeeService.dbs
Description: N/A
Default Namespace: http://ws.wso2.org/dataservice
Current Request Name: findByEmployeeNameLike
Current Params: {Bind_name=S%}
Nested Exception:-
java.lang.ClassCastException: org.apache.commons.dbcp.DelegatingPreparedStatement cannot be cast to java.sql.CallableStatement

    at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
    at org.apache.axis2.transport.http.SOAPMessageFormatter.writeTo(SOAPMessageFormatter.java:78)
    at org.apache.axis2.transport.http.CommonsHTTPTransportSender.sendUsingOutputStream(CommonsHTTPTransportSender.java:409)
    at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:286)
    at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:443)
    at org.apache.axis2.receivers.AbstractInOutSyncMessageReceiver.invokeBusinessLogic(AbstractInOutSyncMessageReceiver.java:45)
    at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110)
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
    at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
    at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
    at org.wso2.carbon.core.transports.CarbonServlet.doPost(CarbonServlet.java:199)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.wso2.carbon.bridge.BridgeServlet.service(BridgeServlet.java:164)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:154)
    at org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer.java:254)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
    at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:396)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:356)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1534)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: javax.xml.stream.XMLStreamException: DS Fault Message: Error in 'SQLQuery.processNormalQuery'
DS Code: DATABASE_ERROR
Source Data Service:-
Name: EmployeeService
Location: \EmployeeService.dbs
Description: N/A
Default Namespace: http://ws.wso2.org/dataservice
Current Request Name: findByEmployeeNameLike
Current Params: {Bind_name=S%}
Nested Exception:-
java.lang.ClassCastException: org.apache.commons.dbcp.DelegatingPreparedStatement cannot be cast to java.sql.CallableStatement

    at org.wso2.carbon.dataservices.core.engine.DSOMDataSource.execute(DSOMDataSource.java:105)
    at org.wso2.carbon.dataservices.core.engine.DSOMDataSource.serialize(DSOMDataSource.java:110)
    at org.apache.axiom.om.impl.llom.OMSourcedElementImpl.internalSerialize(OMSourcedElementImpl.java:691)
    at org.apache.axiom.om.impl.util.OMSerializerUtil.serializeChildren(OMSerializerUtil.java:563)
    at org.apache.axiom.om.impl.llom.OMElementImpl.internalSerialize(OMElementImpl.java:875)
    at org.apache.axiom.soap.impl.llom.SOAPEnvelopeImpl.serializeInternally(SOAPEnvelopeImpl.java:283)
    at org.apache.axiom.soap.impl.llom.SOAPEnvelopeImpl.internalSerialize(SOAPEnvelopeImpl.java:245)
    at org.apache.axiom.om.impl.llom.OMSerializableImpl.serializeAndConsume(OMSerializableImpl.java:193)
    at org.apache.axis2.transport.http.SOAPMessageFormatter.writeTo(SOAPMessageFormatter.java:74)
    ... 35 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:03:06.020

在这里找到我使用的 .dbs 文件，

```
<data name="DDD">   
<config id="ds1">      
  <property name="org.wso2.ws.dataservice.driver">oracle.jdbc.driver.OracleDriver</property>      
  <property name="org.wso2.ws.dataservice.protocol">jdbc:oracle:thin:@localhost:1521/xe</property>      
  <property name="org.wso2.ws.dataservice.user">xxx</property>      
  <property name="org.wso2.ws.dataservice.password">xxx</property>
</config>   
<query id="q1" useConfig="ds1">      
  <sql>select EMPLOYEENUMBER  from employees where LASTNAME like :Bind_name</sql>      
  <result element="Entries" rowName="Entry">         
     <element name="EMPLOYEENUMBER" column="EMPLOYEENUMBER" xsdType="xs:string" />      
  </result>      
<param name="Bind_name" sqlType="STRING" />   
</query>   
<operation name="op1">      
  <call-query href="q1">         
     <with-param name="Bind_name" query-param="Bind_name" />      
  </call-query>   
</operation>
</data> 
```

要求是，

```
<p:op1 xmlns:p="http://ws.wso2.org/dataservice">
  <!--Exactly 1 occurrence-->
  <p:Bind_name>d%</p:Bind_name>
</p:op1> 
```

它按预期工作正常。您也可以发布您的 dbs 文件吗？

# c# - C# 中的委托模式与委托关键字

> ID：11009890
> 
> 赞同：9
> 
> 时间：2012-06-13T07:13:35.793
> 
> 标签：c#, design-patterns, delegates

来自[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms173172.aspx)：

> 委托是一种安全封装方法的类型，类似于 C 和 C++ 中的函数指针。与 C 函数指针不同，委托是面向对象的、类型安全的和安全的。

我知道它是什么以及如何使用它。但我想知道它是否是基于我知道的委托模式（来自[维基百科](http://en.wikipedia.org/wiki/Delegation_pattern)）编写的。
它们之间有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T07:21:35.323

[当您实现委托模式](http://en.wikipedia.org/wiki/Delegation_pattern)时，C#（不是模式）委托可能很有用，只需查看维基百科中的这个委托模式实现以及我的更改：

```
//NOTE: this is just a sample, not a suggestion to do it in such way

public interface I
{
    void F();
    void G();
}

public static class A
{
    public static void F() { System.Console.WriteLine("A: doing F()"); }
    public static void G() { System.Console.WriteLine("A: doing G()"); }
}

public static class B
{
    public static void F() { System.Console.WriteLine("B: doing F()"); }
    public static void G() { System.Console.WriteLine("B: doing G()"); }
}

public class C : I
{
    // delegation 
    Action iF = A.F;
    Action iG = A.G;

    public void F() { iF(); }
    public void G() { iG(); }

    // normal attributes
    public void ToA() { iF = A.F; iG = A.G; }
    public void ToB() { iF = B.F; iG = B.G; }
}

public class Program
{
    public static void Main()
    {
        C c = new C();
        c.F();     // output: A: doing F()
        c.G();     // output: A: doing G()
        c.ToB();
        c.F();     // output: B: doing F()
        c.G();     // output: B: doing G()
    }
} 
```

再次，委托在这里*可能*有用，但不是因为它被引入。您应该将其视为低级构造而不是模式。[在与事件](http://msdn.microsoft.com/en-us/library/8627sbea%28v=vs.100%29.aspx)的配对中，它可用于实现[发布者/订阅者（观察者）模式](http://en.wikipedia.org/wiki/Observer_pattern)- 只需看看[这篇文章](http://msdn.microsoft.com/en-us/library/ee817669.aspx)，或者它有时可以帮助您实现[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)- 这在[LINQ](http://msdn.microsoft.com/en-en/library/bb397926%28v=vs.100%29.aspx)中被积极使用：

```
public void Linq1() 
{ 
    int[] numbers = { 5, 4, 1, 3, 9, 8, 6, 7, 2, 0 }; 

    // n => n < 5 is lambda function, creates a delegate here
    var lowNums = numbers.Where(n => n < 5); 

    Console.WriteLine("Numbers < 5:"); 
    foreach (var x in lowNums) 
    { 
        Console.WriteLine(x); 
    } 
} 
```

**总结一下：**语言委托不是模式本身，它只是允许您将函数作为[第一类对象](http://en.wikipedia.org/wiki/First-class_function)来操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T07:25:53.777

[委托模式](http://en.wikipedia.org/wiki/Delegation_pattern)是：

> 一种设计模式[...]，其中一个对象不执行其声明的任务之一，而是将该任务委托给关联的帮助对象。

不幸的是，该页面没有详细说明何时使用它或从中衍生出什么模式，除了

> 委托模式是构成其他软件模式（例如组合（也称为聚合）、混合和方面）基础的基本抽象模式之一。

从[描述委托](http://en.wikipedia.org/wiki/Delegation_%28programming%29)的页面中，您可以看出它是将功能的实现委托给在运行时可能知道也可能不知道的类。当您说`Foo.Bar()`时，它的实现可能会将执行*委托*`Bar()`给前面提到的“帮助对象”。

现在对于 C# 委托，如前所述，这只是一个函数指针。它可以通过在编译时或运行时分配委托方法来帮助实现委托模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T07:22:48.350

*委托模式*是对象将任务的责任委托给外部方法的一种方式。它使用*委托*来跟踪该方法。*所以委托*的一种用途是实现*委托模式*。

例如，该模式在`List<T>.Sort(comparison)`方法中使用，其中排序算法使用您提供给它的委托来比较项目。

# post - 对 postdata 使用 HTTPWebRequest ...我在这里缺少什么？

> ID：11009894
> 
> 赞同：2
> 
> 时间：2012-06-13T07:13:40.473
> 
> 标签：post, cookies, httpwebrequest, postdata

我一直在设计一个程序，帮助用户浏览和使用在线约会网站。该程序的一部分允许用户通过该程序发送消息，但我在使用 pof.com 网站时遇到了问题。

我已经验证了 postData 变量生成的字符串与我的浏览器发送的字符串完全匹配。这是我认为问题所在的代码：

```
 pofMessage = HttpUtility.UrlEncode(pofMessage)
    Dim postData As String = sendParameter1 & "=" & sendParameter1_Value & "&autologinid=" & autoLoginID & "&message_id=" & messageID & "&u=" & u & "&p_id=" & p_ID & "&receiver=" & receiver & "&profile_idb=" & profile_idb & "&usersendtob=" & usersendtob & "&i=" & i & "&v=" & v & "&subject=" & pofSubject & "&message=" & pofMessage & "&sendmessage=Send+Quick+Msg"
    Dim encoding As New UTF8Encoding
    Dim bytedata As Byte() = encoding.GetBytes(postData)
    'postData = "7512b8a8=b5818092d0d1d696329a2f6a8e9ef5b7&autologinid=vfnbrfzx4cptyhoimlojxs54&message_id=&u=Ca_Polo&p_id=40749839&reciever=janebrandy2000&profile_idb=40749839&usersendtob=44672906&i=18213689&v=13&subject=Hi&message=sorry...I+meant+my+great+grandmother.++She+was+a+very+sweet+person.&sendmessage=Send+Quick+Msg"

    Dim postReq As HttpWebRequest = DirectCast(WebRequest.Create("http://www.pof.com/sendmessage.aspx"), HttpWebRequest)
    postReq.Method = "POST"
    postReq.KeepAlive = True
    postReq.CookieContainer = loginCookie
    postReq.ContentType = "application/x-www-form-urlencoded"
    postReq.Referer = "http://www.pof.com/viewprofile.aspx?profile_id=" & profileAddressSend(arrayIndex)
    postReq.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:11.0) Gecko/20100101 Firefox/11.0"
    postReq.ContentLength = bytedata.Length
    MessageBox.Show(postData)
    Dim postReqStream As Stream = postReq.GetRequestStream()
    postReqStream.Write(bytedata, 0, bytedata.Length) 
```

我不知道这是否有用，但这是实时 HTTP 标头给我的：

```
--------------BEGIN HEADERS---------------------------

http://www.pof.com/sendmessage.aspx

POST /sendmessage.aspx HTTP/1.1
Host: www.pof.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
DNT: 1
Connection: keep-alive
Referer: http://www.pof.com/viewprofile.aspx?profile_id=40749839
Cookie: ft=Friday, May 04, 2012 10:56:08 PM; __utma=181982502.1869691959.1336197311.1339544889.1339562544.21; __utmz=181982502.1338435116.11.2.utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=(not%20provided); usernameb=my_username; tmp_track=18213689; __utmv=181982502.|2=intent=want%20to%20date%20but%20nothing%20serious=1^3=age=35=1^4=Gender=Male%20United%20States=1; __gads=ID=b617d731de96c1fd:T=1336199229:S=ALNI_MaTMf9mj4CcziGfucCbsyfH-o2CdA; tbtext002=Dating%2CA; t_user_id=18213689; ASP.NET_SessionId=vfnbrfzx4cptyhoimlojxs54; __utmc=181982502; POFIMSession=634751342250621962; __utmb=181982502.4.10.1339562544; alogin=vfnbrfzx4cptyhoimlojxs54; mp_60ea1aa63a18cdb7ab1fb007106b9de3_mixpanel=%7B%22distinct_id%22%3A%20%22137d031c4821a4-050684bdf5e497-43534134-100200-137d031c4837d%22%2C%22%24initial_referrer%22%3A%20%22%24direct%22%2C%22%24initial_referring_domain%22%3A%20%22%24direct%22%7D
Content-Type: application/x-www-form-urlencoded
Content-Length: 308
7512b8a8=b5818092d0d1d696329a2f6a8e9ef5b7&autologinid=vfnbrfzx4cptyhoimlojxs54&message_id=&u=my_username&p_id=40749839&reciever=janebrandy2000&profile_idb=40749839&usersendtob=44672906&i=18213689&v=13&subject=Hi&message=this+is+a+sample+message&sendmessage=Send+Quick+Msg
HTTP/1.1 302 Found
Cache-Control: private
Content-Type: text/html; charset=utf-8
Location: /inbox.aspx?messagesent=1&p_id=40749839&Guid=18213689&SID=vfnbrfzx4cptyhoimlojxs54#in
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Wed, 13 Jun 2012 04:44:32 GMT
Content-Length: 214

-----------------------END HEADERS--------------------- 
```

这是我已经验证的（我认为......除非我遗漏了什么）：postData 是准确的。我使用的 cookie 用于浏览网站（即，如果我想查看我的收件箱，cookie 将允许我这样做。如果 cookie 不起作用，我无法查看我的收件箱）。

我在这里想念什么？

# iphone - 在 iphone 的 facebook 中发布到朋友墙？

> ID：11009895
> 
> 赞同：4
> 
> 时间：2012-06-13T07:13:43.493
> 
> 标签：iphone, facebook, facebook-graph-api

嗨，我正在尝试使用这样的朋友 ID 在我的朋友墙上发帖

```
[facebook requestWithGraphPath:@"1581445658/feed"
                          andParams:[NSMutableDictionary dictionaryWithObject:@"hello very good morning" forKey:@"message"]
                      andHttpMethod:@"POST"
                        andDelegate:self]; 
```

但收到错误 400 错误请求。请建议我如何摆脱这个糟糕的要求。

注意：此方法在开始出现此错误后的前 10-15 次有效。现在它不断地给出这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:20:52.927

我认为你的 ID 被 FB 屏蔽了。所以你尝试过其他ID？

# photoshop - Photoshop 吸管设置背景颜色，而不是前景

> ID：11009899
> 
> 赞同：15
> 
> 时间：2012-06-13T07:13:56.910
> 
> 标签：photoshop

我已经忍受这个可能太久了。出于某种奇怪的原因，当我使用 Photoshop CS5 吸管工具时，它会设置背景颜色——这真的很烦人。在我使用 Photoshop 的这些年里，我从未经历过这种情况。每次设置颜色时，我都被迫使用 x 键盘快捷键来交换背景/前景颜色。

如何让吸管工具恢复默认设置？（无需重新安装:)

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-13T07:18:47.767

哇 - 好的，这很容易。转到窗口>颜色，然后确保前景色是选定的颜色。选中的那条线周围有一条非常细的、几乎不引人注意的线。我的设置在背景色上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:39:43.493

您也可以在工具栏中单击要设置的颜色，然后选择颜色。这就是我通常做的反正我想！

# image - 如何使用 xslt 显示图像

> ID：11009907
> 
> 赞同：0
> 
> 时间：2012-06-13T07:14:24.640
> 
> 标签：image, xslt

我有以下代码

```
<xsl:template name="toggle">
        <xsl:param name="target"/>
        <xsl:param name="show"/>
            <input type="image" src="glass.png" /> 
                <xsl:attribute name="onclick">
                  toggle('<xsl:value-of select="$target"/>','<xsl:value-of select="$show"/>');
                </xsl:attribute>
            </input>
</xsl:template> 
```

我想添加一个不属于 xml 文件的外部图像。我想用图像替换我的提交按钮。使用上述代码时，我无法将图像作为输出。关于如何做的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:20:02.190

您知道要生成什么 HTML 吗？

如果您这样做，请告诉我们。

如果不这样做，那么您遇到的是 HTML 问题，而不是 XSLT 问题。

永远不要尝试在 XSLT 中编写代码，直到您知道您希望它生成什么输出 HTML。实际上，我认为是 Dijkstra 说在你知道你想要它产生什么输出之前，你不应该开始编写任何程序。一个很好的原则。当应用于 XSLT 时，请记住这种意义上的输出是 HTML 文档，而不是浏览器显示的屏幕。

# .htaccess - RewriteRule 不会更改 http 响应标头中的位置

> ID：11009911
> 
> 赞同：2
> 
> 时间：2012-06-13T07:14:28.727
> 
> 标签：.htaccess, mod-rewrite, redirect, http-redirect

我在 .htaccess 文件中有此代码，可将 domain1.com 中的所有页面重定向到另一个域：

```
RewriteRule (.*) http://www.domain2.com/$1 [R=301,L] 
```

但它不起作用。我用萤火虫检查了响应标头，但 Location 指令仍然有 domain1.com 而不是 domain2.com 。似乎并没有改变。我在某处读到某些服务器在规则中需要一个问号，但我不知道应该把它放在哪里。我的操作系统是 debian sqeeze，apache 版本是 2.2.16 。

编辑：这个问题导致一个循环，firefox给出：

```
The page isn't redirecting properly
Firefox has detected that the server is redirecting the request for this address in a way that will never complete.
*   This problem can sometimes be caused by disabling or refusing to accept
      cookies. 
```

我的服务器在英镑服务器后面。

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:18:28.447

如果您要将所有流量重定向到域，那么我建议您使用[`Redirect`](http://httpd.apache.org/docs/2.0/mod/mod_alias.html#redirect). 它的效率远高于`mod_rewrite`. 特别是如果这是您唯一的`RewriteRule`.

```
Redirect permanent / http://www.domain2.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:30:30.123

两个域是否由同一个文档根服务？如果是这样，您需要在请求 domain2.com 时阻止它重定向：

```
RewriteCond %{HTTP_HOST} !domain2.com$ [NC]
RewriteRule (.*) http://www.domain2.com/$1 [R=301,L] 
```

# c# - 带有列表视图的 C# 建议

> ID：11009920
> 
> 赞同：2
> 
> 时间：2012-06-13T07:15:04.227
> 
> 标签：c#, filelist

我做了一个应用程序，您输入个人信息，您可以将其保存在目录中（C:\Inforation\example.txt）。现在我需要添加新的按钮和列表视图，但我不知道如何使用列表视图。按下按钮后，我需要在列表视图中查看目录中的所有 .txt 文件。

如果有帮助，这是代码的一部分：

```
 {

        if (!Directory.Exists("C:\\Informacija"))
            Directory.CreateDirectory("C:\\Informacija");

        MessageBox.Show("Save", "My notification", MessageBoxButtons.OK, MessageBoxIcon.Asterisk);
        using (TextWriter writer = File.CreateText("C:\\Informacija\\" + textBox1.Text + " " + textBox2.Text + ".txt"))
        {
            writer.WriteLine("Name: " + textBox1.Text);
            writer.WriteLine("Surname: " + textBox2.Text);
            writer.WriteLine("Birthday:" + dateTimePicker1.Value.ToShortDateString());
            writer.WriteLine("Person code:" + textBox4.Text + textBox3.Text);
            writer.WriteLine("Birth place:" + textBox5.Text);
            writer.WriteLine("Thelephone number: " + textBox6.Text);
            writer.WriteLine("Family status: " + comboBox2.Text);
            writer.WriteLine("E-mail:" + textBox8.Text + "@" + comboBox1.Text);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T07:21:54.427

添加一个按钮并简单地清除 lisview，然后重新加载该按钮中的文件。

像这样的东西...

```
 ListView1.Items.Clear();

        string[] files = Directory.GetFiles(WHATEVERPATH);
        foreach (string file in files)
        {

            string fileName = Path.GetFileNameWithoutExtension(file);
            ListViewItem item = new ListViewItem(fileName);
            item.Tag = file;

            ListView1.Items.Add(item);

        } 
```

# java - 如何检测 JMS 实例是否在 jboss 集群中启动

> ID：11009921
> 
> 赞同：1
> 
> 时间：2012-06-13T07:15:15.223
> 
> 标签：java, jboss, jms, jndi

我有一个集群的 jboss 环境和一些 JMS 队列。我只希望一次运行一个队列实例。我是 JMS API 的新手。我可以编写一些代码来检测集群中运行的 JMS 实例来实现这一点吗？我已经看到了通过 JNDi 查找来查找队列是否存在的代码，但我认为它只查找服务器的 JVM 而不是整个集群。请指教。

谢谢！阿尼鲁德

# jquery - 如何修复仪表板插件中的小部件？

> ID：11009922
> 
> 赞同：2
> 
> 时间：2012-06-13T07:15:21.250
> 
> 标签：jquery, jquery-plugins, dashboard

我正在尝试根据我的需要调整此处演示的插件[http://www.gxdeveloperweb.com/dashboardplugin/demo/dashboard.html](http://www.gxdeveloperweb.com/dashboardplugin/demo/dashboard.html)。

最紧迫的是小部件必须有参数（例如在配置文件中）——小部件位置在方案上是“固定的”或“不固定的”。

那么我怎么能做到这一点以及如何使小部件不可拖动？

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T00:52:23.610

您可以只添加拥有`items`属性，并且只拥有没有固定类的项目。

**这是一个小提琴：http:** [//jsfiddle.net/MadLittleMods/DUSKm/](http://jsfiddle.net/MadLittleMods/DUSKm/)

以及这里的简单代码：

**jQuery：**

```
$('#container').sortable({
    items: '.item:not(.fixed)'
});
$('#container').disableSelection();
​ 
```

**HTML：**

```
<div id="container">
    <div class="item">Item 1</div>
    <div class="item">Item 2</div>
    <div class="item fixed">Item 3</div>
    <div class="item">Item 4</div>
</div>​ 
```

# android - 使用来自网络的图像填充画廊

> ID：11009926
> 
> 赞同：1
> 
> 时间：2012-06-13T07:15:46.083
> 
> 标签：android

此处的教程[http://www.edumobile.org/android/android-beginner-tutorials/creating-image-gallery/](http://www.edumobile.org/android/android-beginner-tutorials/creating-image-gallery/)教授如何将资源中的图像放入画廊

这是设置要显示的图像的部分：

```
private Integer[] mImageIds = {
            R.drawable.icon,
            R.drawable.icon,
            R.drawable.icon
    };

public View getView(int position, View convertView, ViewGroup parent) {
        ImageView i = new ImageView(mContext);
        i.setImageResource(mImageIds[position]);
        i.setLayoutParams(new Gallery.LayoutParams(150, 100));
        i.setScaleType(ImageView.ScaleType.FIT_XY);
        i.setBackgroundResource(mGalleryItemBackground);
        return i;
    } 
```

但我想显示一些来自网络的图像。所以这就是我所做的：

```
String gallery1 = "http://www.myimages.com/1.png";
URL ulrn = new URL(gallery1);
HttpURLConnection con = (HttpURLConnection)ulrn.openConnection();
InputStream is = con.getInputStream();
Bitmap bmp = BitmapFactory.decodeStream(is);

    if (null != bmp){
      bmp = getResizedBitmap(bmp,150,120);  //resize the thumb
      i.setImageBitmap(bmp);
      i.setLayoutParams(new Gallery.LayoutParams(150, 100));
      i.setScaleType(ImageView.ScaleType.FIT_XY);
      i.setBackgroundResource(mGalleryItemBackground); 
```

但是使用我上面做的方法我只能在画廊内显示一张图片，而我还需要在画廊内显示另一张图片，例如来自[http://www.myimages.com/2.png](http://www.myimages.com/2.png)和[http:// /www.myimages.com/3.png](http://www.myimages.com/3.png)。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:23:45.340

在这里您调用一次 Image 链接，但 Gallery baseAdapter 类 getView 调用每个项目。你需要每次都打电话。

为 URL 创建一个数组。喜欢

字符串[] URl={http://www.myimages.com/2.png , [http://www.myimages.com/,png,http://www.myimages.com/2.png](http://www.myimages.com/,png,http://www.myimages.com/2.png) };

并从您的 getView 方法中调用此方法

```
 public Drawable ImageOperations(String imageurl) {
        try {
            InputStream is = (InputStream) new URL(imageurl).getContent();
            Drawable drawable = Drawable.createFromStream(is, "src");
            return drawable;
        } catch (MalformedURLException e) {
            return null;
        } catch (IOException e) {
            return null;
        }

    } 
```

然后编辑您的 getView 方法的某些行。

```
i.setImageDrawable(ImageOperations(URl[position])); 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:28:12.733

使用下面的延迟加载 Listview 的链接代码，根据您的要求将 Listview 更改为 Gridview，它可能会对您有所帮助。

[延迟加载列表视图](https://github.com/thest1/LazyList)

# ipad - ios中的文件上传插件不起作用

> ID：11009935
> 
> 赞同：1
> 
> 时间：2012-06-13T07:17:01.613
> 
> 标签：ipad, cordova, phonegap-plugins

我正在使用 xcode 在 mac os 中开发一个 phonegap 项目。在xcode中，如果我创建一个基于cordova的应用程序，它会自动创建cordova-1.6.0.js。我正在使用 fileupload 插件将 svg 文件发送到我的服务器。在 fileupload.js 中，我编写了如下的警报 fileuplaoder 函数，

```
 var FileUploader = function() { 
    alert("gi");
} 
```

此警报正在工作，但是当我在上传功能下给出警报时，

```
FileUploader.prototype.upload = function(server, file, params, fileKey, fileName, mimeType, success, fail, progress) {
    alert("upload");
    this._doUpload('upload', server, file, params, fileKey, fileName, mimeType, success, fail, progress);
}; 
```

此警报不起作用。我在 html 页面中对这个插件的调用是，

```
window.plugins.fileUploader.upload('http:192.168.1.54:8080/downloadFiles', '/Users/User/Library/Application Support/iPhone Simulator/5.0/Applications/408DBBC7-67F7-4E8B-B41C-663CDC0377B5/Documents/image5_1.jpg.txt.svg', {foo: 'bar'}, 'myPhoto', 'image5_1.jpg.txt.svg', 'image/svg', 
                                                function(result) {
                                                console.log('Done: ' + result);
                                                }, 
                                                function(result) {
                                                console.log("Error: " + result);
                                                }, 
                                                function(loaded, total) {
                                                var percent = 100 / total * loaded;
                                                console.log('Uploaded  ' + percent);

                                                }
                                                ); 
```

在 fileupload.js 中有 cordova.addConstructor 方法。但是在我生成的cordova.1.6.0.js 文件中没有这样的方法。我不知道发生了什么。请帮助我使用这个插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T09:46:04.903

我找到了解决方案。科尔多瓦文件 api 本身有一个上传和下载选项。它工作正常。代码是，

```
document.addEventListener("deviceready", onDeviceReady, false);

            // Cordova is ready
            //
            function onDeviceReady() {
                window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
            }

            function gotFS(fileSystem) {
                fileSystem.root.getFile("image5_2.jpg.svg", {create: true, exclusive: false}, gotFileEntry, fail);
            }

            function gotFileEntry(fileEntry) {
                var localpath=fileEntry.fullPath;
                uploadPhoto(localpath);
                //fileEntry.createWriter(gotFileWriter, fail);
            }

            function uploadPhoto(imageURI) {
                alert(imageURI);
                var options = new FileUploadOptions();
                options.fileKey="file";
                options.fileName="image5_2.jpg.svg";
                options.mimeType="image/svg+xml";

                var params = new Object();
                params.value1 = "test";
                params.value2 = "param";

                options.params = params;

                var ft = new FileTransfer();
                ft.upload(imageURI, "http://192.168.1.54:8080/POC/fileUploader", win, fail, options);
            }

            function win(r) {
                console.log("Code = " + r.responseCode);
                console.log("Response = " + r.response);
                console.log("Sent = " + r.bytesSent);
            }

            function fail(error) {
                alert("An error has occurred: Code = " + error.code);
                console.log("upload error source " + error.source);
                console.log("upload error target " + error.target);
            } 
```

请使用这个。

# wpf - 命名空间声明中的限定名称

> ID：11009936
> 
> 赞同：6
> 
> 时间：2012-06-13T07:17:02.730
> 
> 标签：wpf, xml, xaml, qualified-name

在阅读[了 MSDN-XAML Namespaces](http://msdn.microsoft.com/en-us/library/ms747086.aspx)和[MSDN-Understanding XAML Namespaces](http://msdn.microsoft.com/en-us/library/aa468565.aspx)之后，我仍然不明白拥有**Qualified Name (QName)**的目的。

以下面的命名空间声明为例：

> xmlns:x='http://www.w3.org/1999/XSL/Transform'

`x`是完整 URI（在本例中为 URL）的前缀缩写：`http://www.w3.org/1999/XSL/Transform`. 然后就是这个 QName，叫做`xmlns`. mdsn 中 QName 的定义是：

> 这个包含前缀的完整名称是限定名称 (QName) 的词汇形式：

那应该是什么意思，为什么它在那里，因为 t 语句已经有一个定位器和一个前缀来标识要使用的命名空间及其名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:36:03.983

我认为这不仅仅是一个 XAML 问题，它只是一个 XML 命名空间问题。

xmlns 属性（一个特殊的属性）只是在 XML 中用来定义命名空间的属性。它说“这里有一个命名空间声明”。如果您不添加前缀，那么您是在告诉它将作为属性值的名称空间设置为页面的默认名称空间。如果您完全省略默认命名空间，则假定它是属性的值（在 = 之后和引号之间）。

XAML 是 XML，并选择使用 XML 机制来声明命名空间。我猜他们可能已经创建了自己的机制来执行此操作，但是由于他们没有，如果您按照问题中的提示添加了命名空间，而没有 xmlns:，则应用程序处理 XML（在这种情况下为 .NET 框架，解析 XAML 文件）不会知道您正在尝试定义命名空间；它会认为您正在向定义它的元素添加一个名为“x”的属性（这很可能不是为该元素定义的属性）。

有关 XML 命名空间的更多信息

[http://www.w3.org/TR/REC-xml/](http://www.w3.org/TR/REC-xml/)

[http://www.w3schools.com/XML/xml_namespaces.asp](http://www.w3schools.com/XML/xml_namespaces.asp)

[http://en.wikipedia.org/wiki/XML_namespace](http://en.wikipedia.org/wiki/XML_namespace)

# java - 如何在 Netbeans 中重新排序自动生成的方法？

> ID：11009940
> 
> 赞同：7
> 
> 时间：2012-06-13T07:17:07.057
> 
> 标签：java, netbeans, generated-code

例如，当使用 Netbeans 的功能从 GUI 生成事件处理程序时，虽然生成的方法的主体是可编辑的，但我无法找到一种方法来更改类代码中生成的方法的顺序。

生成的代码不允许剪切和粘贴。

相反，我该怎么做？

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T08:27:34.520

你不能在 Netbeans 中做到这一点。这不是真正的优先事项，因为您可以使用导航器代替。

如果您真的想移动这些块，请使用其他编辑器（Gedit、记事本...）打开 Java 文件并在此处重新排列这些块。

您还可以删除`//GEN-FIRST`and`//GEN-LAST`以使它们在 Netbeans 中可编辑。

# moss - MOSS 2007 中央管理员显示空白页

> ID：11009941
> 
> 赞同：1
> 
> 时间：2012-06-13T07:17:07.723
> 
> 标签：moss

我们的中央管理站点始终显示空白页面。在错误日志中找不到任何错误。没有事件记录在事件查看器中。在这个问题上打破了我们的头脑。

有人可以帮忙解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:21:59.420

我们在中央管理站点的应用程序池帐户中将“启用 32 位应用程序”设置为 False，它起作用了。

# spring-security - Spring Security中的客户端证书认证

> ID：11009944
> 
> 赞同：3
> 
> 时间：2012-06-13T07:17:12.810
> 
> 标签：spring-security, client-server, keystore, truststore

我需要在 Glassfish 3 中配置“客户端证书身份验证”。我尝试了很多场景但无法配置。要求是 - 导入 .cer 文件的用户可以单独访问该应用程序。

因此，我们需要以这样一种方式进行配置，即我们需要验证上传到浏览器中的 .cer 文件（客户端试图通过该文件访问应用程序）。

验证证书文件后，我们需要显示登录屏幕 (form-login)。此外，我们验证用户的用户名/密码。

我尝试了几个配置（在 applicationCONtext-security.xml 文件中）但徒劳无功。

谁能告诉如何配置弹簧安全性，以便客户端证书身份验证（首先完成）然后是表单登录（接下来完成）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:52:59.107

Spring 不对其设置 SSL 连接的 Glassfish 执行 SSL。当请求到达 Spring Security 时，所有 Spring Security 都知道请求是通过安全通道进入的，但不知道安全通道是如何配置的。

要设置客户端证书身份验证，您需要将 glassfish 配置为需要客户端证书来设置 SSL 连接，并在客户端未提供有效证书时拒绝连接。

这样，如果客户端未向 glassfish 提供有效证书，您将获得所需的行为 glassfish 永远不会将调用路由到 spring。

我确实知道如何使用 glass fish 设置客户端 ssl 身份验证，所以我无法为您提供确切的详细信息，但谷歌应该知道答案。

# android - 将活动放在首位 - 我正在丢失数据

> ID：11009946
> 
> 赞同：1
> 
> 时间：2012-06-13T07:17:32.247
> 
> 标签：android, android-activity, android-intent

当我收到消息时，我需要将活动放在前面。我使用以下代码：

```
public void BringToFront()
{
    Intent intent = new Intent();
    intent.setFlags(Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT);
    intent.setClass(getApplicationContext(), getClass());
    startActivity(intent);
} 
```

当我将活动置于顶部时，即使该活动未被操作系统杀死，先前的数据也会丢失。有没有办法在不丢失数据的情况下恢复活动，或者我无论如何都需要恢复数据？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:24:44.743

你的代码不起作用。您的 Activity 仅在其位于前面时才处于活动状态。如果不在前面，则无法处理，因此您的方法将永远不会被调用。Activity 应该始终保存它想要保留的数据，无论是在 onSaveInstanceState 中还是在数据更改时。有很多方法可以在活动之间保存数据。如果您希望您的活动位于前面，则必须关闭所有位于它之上的活动。如果您再次需要这些活动，您应该让他们保存数据，并使用新数据再次启动它们。

我建议您阅读有关活动如何工作的文档....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T10:28:01.317

只需根据您的情况在您的活动中使用此方法即可。它会起作用的。

```
protected void moveToFront() {
        if (Build.VERSION.SDK_INT >= 11) { // honeycomb
            final ActivityManager activityManager = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
            final List<RunningTaskInfo> recentTasks = activityManager.getRunningTasks(Integer.MAX_VALUE);

            for (int i = 0; i < recentTasks.size(); i++) 
            {
                   Log.d("Executed app", "Application executed : " 
                           +recentTasks.get(i).baseActivity.toShortString()
                           + "\t\t ID: "+recentTasks.get(i).id+"");  
                   // bring to front                
                   if (recentTasks.get(i).baseActivity.toShortString().indexOf("Your app pckg name") > -1) {                     
                      activityManager.moveTaskToFront(recentTasks.get(i).id, ActivityManager.MOVE_TASK_WITH_HOME);

               }
        }
    }
} 
```

您还需要在清单中添加以下权限。

```
<uses-permission android:name="android.permission.GET_TASKS" />
<uses-permission android:name="android.permission.REORDER_TASKS" /> 
```

# c# - 绑定中的共享依赖属性更新问题

> ID：11009947
> 
> 赞同：1
> 
> 时间：2012-06-13T07:17:42.657
> 
> 标签：c#, wpf, xaml, dependency-properties

我有一个在两个 WPF 类之间共享的只读依赖项属性。所以我把这个属性设为共享属性。在 XAML 上绑定此属性时，它采用其默认值并且无法更新。但是如果我使用这个属性的主要所有者，它的值可以被更新。

那么你的建议是什么？

```
public  class A
{
    private static readonly DependencyPropertyKey XPropertyKey =
        DependencyProperty.RegisterReadOnly("X", 
        typeof(Point), typeof(A), 
        new FrameworkPropertyMetadata(new Point(0, 0),  
        FrameworkPropertyMetadataOptions.Inherits | 
        FrameworkPropertyMetadataOptions.AffectsRender));

    public static readonly DependencyProperty XProperty =  
        RelativeMousePointPropertyKey.DependencyProperty;

    public Point X
    {
        get { return (Point)GetValue(XProperty); }
        set { SetValue(XProperty, value); }
    }

    public void SetRelativeMousePoint(Point point)
    {
        SetValue(XPropertyKey, point);
    }
}

public class B
{ 
    //I use this class for binding
    public static readonly DependencyProperty XProperty = 
        A.XProperty.AddOwner(typeof(B));

    public Point X
    {
        get { return (Point)GetValue(X); }
    }
} 
```

# matlab - matlab & beagleboard xm

> ID：11009949
> 
> 赞同：1
> 
> 时间：2012-06-13T07:17:44.557
> 
> 标签：matlab, ubuntu, beagleboard

我可以在 beagleboard xm 上安装 matlab（运行 ubuntu 12.04）吗？如果我不能在 beagleboard xm 上运行 matlab。我安装了 octave，它运行完美，但我需要使用 Matlab。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T23:45:07.443

最简洁的答案是不。zellus 是正确的。Matlab 需要 SSE2 指令集。所有 ARM 芯片都不支持 SSE2。只是架构不同。请参阅 Mathworks 上的讨论：http: [//www.mathworks.co.kr/matlabcentral/newsreader/view_thread/320518](http://www.mathworks.co.kr/matlabcentral/newsreader/view_thread/320518)

[http://www.mathworks.co.uk/support/solutions/en/data/1-B3MR75/](http://www.mathworks.co.uk/support/solutions/en/data/1-B3MR75/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T11:11:15.563

参考[系统要求 - 2012a 版](http://www.mathworks.ch/support/sysreq/current_release/linux.html)MATLAB 仅在

> 任何支持 SSE2 指令集的 Intel 或 AMD x86 处理器**

如[BeagleBoard-xM 产品详细信息所述](http://beagleboard.org/hardware-xM)

> BeagleBoard-xM 提供额外的 ARM ® Cortex TM-A8

配备ARM处理器。因此，我希望 MATLAB 不会运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T14:20:50.293

使用[适当的工具箱，您可以生成代码而不是在](http://www.mathworks.com/products/embedded-coder/arm-adaptor.html)[BeagleBoard](http://www.mathworks.com/academia/beagleboard/)等 ARM 处理器上运行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T07:36:42.453

正如已经指出的那样，您可能不想（或不能）在 beagleboard 上安装 Matlab，但让 Matlab 生成将在板上运行的 C 代码。为此，您将需要 Matlab Coder 或 Matlab Embedded Coder。嵌入式工具箱产生“更好/更清洁”的代码，但比其非嵌入式替代品更昂贵。另请注意，如果您需要对 Matlab simulink 模型执行相同操作，则需要更多工具箱。

# math - 如何找到三角形的第三个坐标

> ID：11009950
> 
> 赞同：2
> 
> 时间：2012-06-13T07:17:44.540
> 
> 标签：math, geometry, trigonometry, equation

这不是家庭作业。我们正在尝试在一个项目的圆圈之间建立双重连接线。

给定任何类型的三角形（因为它会被旋转）

*   AB是已知的
*   交流是已知的
*   BC 知道在哪里
*   AB 等于 BC（它们都是圆的半径）

点 A 是 (x1,y1) 并且是已知的。它是圆的中心点。点 B 是 (x2,y2) 并且是已知的。它是圆边缘上的点，连接到远程圆的中心。

点 C 是未知的 (x3,y3) 并且是我们想要弄清楚的。我认为我们需要使用余弦定律，但到目前为止还没有奏效。

感谢任何能提供帮助的人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:50:50.643

您拥有的信息比获得答案所需的信息多得多，而且与余弦定律无关

基本上你只需要A、B、AC和BC

1.  你画一个圆，A为圆心，AC为边

2.  你画另一个圆，以 B 为中心，BC 为边缘

这两个圆会有两个相交点，它们是 C 的两个可能位置

把它放在数学上：

你有两个二元二次方程：

*   (x-x1)^2 + (y-y1)^2 = AC^2
*   (x-x2)^2 + (y-y2)^2 = BC^2

你需要从这两个方程中得到 (x, y)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:29:39.317

您*可以*使用余弦定律，因为您知道三角形 (AB)、(BC) 和 (AC) 的三个边的长度。余弦定律指出

```
(BC)^2 = (AC)^2 + (AB)^2 - 2 (AC)(AB) cos theta 
```

其中 theta 是三角形在顶点 A 处的内角。重新排列得到

```
theta = acos(((BC)^2 - (AC)^2 - (AB)^2)/(-2 (AC)(AB))) 
```

那么你的答案是（以矢量表示法）：

```
(x,y) = (x1,y1) + (AC)*(v1,v2) 
```

其中`(v1,v2)`是从 A 到 C 方向上的单位向量。（*即*，以标量表示法`x=x1+(AC)*v1`和`y=y1+(AC)*v2`）。我们可以通过将单位向量从 A 到 B 旋转角度 theta 来获得 v1 和 v2：

```
v1 = (cos(theta)*(x2-x1) + sin(theta)*(y2-y1))/(AB)
v2 = (cos(theta)*(y2-y1) - sin(theta)*(x2-x1))/(AB) 
```

翻转 theta 的符号以获得两个解决方案中的另一个。

请注意，可以通过观察以下内容来避免计算 theta：

```
cos(theta) = ((BC)^2 - (AC)^2 - (AB)^2)/(-2 (AC)(AB))
sin(theta) = sqrt(1-((BC)^2 - (AC)^2 - (AB)^2)/(-2 (AC)(AB))^2) 
```

这可能比三角函数更快地评估。

# java - Java和mysql数据库

> ID：11009951
> 
> 赞同：-1
> 
> 时间：2012-06-13T07:17:46.913
> 
> 标签：java, mysql, jsp

我只是想通过以下脚本将我的页面连接到 mysql 数据库。

* * *

```
//  import java.sql.*;

try {
    Class.forName("com.mysql.jdbc.Driver");  
    Connection con = DriverManager.getConnection("jdbc::mysql:://localhost::3306/schooldatabase","root","passwd"); 
    Statement st=con.createStatement();
    String sqlquery="INSERT INTO `schooldatabase`.`test` (`name`) VALUES ('anyname');";
    con.commit();

}

catch(SQLException e){

} 
```

但是会弹出以下错误消息。

* * *

```
type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: An exception occurred processing JSP page /final.jsp at line 20

18:     
19:     try {
20:         Class.forName("com.mysql.jdbc.Driver");  
21:         Connection con =   DriverManager.getConnection("jdbc::mysql:://localhost::3306/schooldatabase","root","passwd");  
22:         Statement st=con.createStatement();
23:         String sqlquery="INSERT INTO `schooldatabase`.`test` (`name`) VALUES ('anyname');";

Stacktrace:
org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:568)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:455)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

* * *

我的驱动程序名称是否适合 mysql 数据库？请指导我将 java 连接到数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:23:56.353

似乎 JDBC URL 有几个额外的冒号

```
jdbc::mysql:://localhost::3306/schooldatabase","root","passwd" 
```

尝试这个

```
jdbc:mysql://localhost::3306/schooldatabase","root","passwd" 
```

同样正如人们在这里指出的那样，还请包括驱动程序 jar 文件。只需将 jar 放在`WEB-INF/lib`您的 Web 应用程序的文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:24:33.433

您已在 java lib 目录中包含 mysql jar 文件

和

你必须设置类路径

```
Class.forName("com.mysql.jdbc.Driver");  
Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/schooldatabase","root","passwd"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T07:27:47.247

第 20 行正在加载驱动程序 com.mysql.jdbc.Driver，但没有找到它。请在类路径中
包含**mysql-connector-java-5.XXX.jar 。**

下载链接[http://dev.mysql.com/downloads/connector/j/](http://dev.mysql.com/downloads/connector/j/)

看看下面的例子 [http://www.roseindia.net/jsp/connect-jsp-mysql.shtml](http://www.roseindia.net/jsp/connect-jsp-mysql.shtml)

# iphone - 从dirrerent按钮选择图像时如何调用imagepickerdelegate方法两次

> ID：11009954
> 
> 赞同：0
> 
> 时间：2012-06-13T07:18:11.127
> 
> 标签：iphone, objective-c, image

我对 X Code 比较陌生，我正在开发照片拼贴应用程序，当我从一个选择器中选择图像时，图像选择器工作正常，但我想从不同的图像选择器中选择不同的图像，然后图像选择器无法正常工作

任何人都可以帮我解决我的问题。这是我的代码

`

```
-(IBAction)imagepickMethod1:(id)sender
{
    imagepicker=[[UIImagePickerController alloc]init];
    imagepicker.delegate=self;
    imagepicker.sourceType=UIImagePickerControllerSourceTypePhotoLibrary;
    [self presentModalViewController:imagepicker animated:YES];
     button1.tag=100;
}
-(IBAction)imagepickMethod2:(id)sender
{
    imagepicker1=[[UIImagePickerController alloc]init];
    imagepicker1.delegate=self;
    imagepicker1.sourceType=UIImagePickerControllerSourceTypePhotoLibrary;
    [self presentModalViewController:imagepicker1 animated:YES];

}

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo
{
    [picker dismissModalViewControllerAnimated:YES];
    imagepicker.view.hidden=YES;

        photoPreviewImageView.image=image;

}
-(void)imagePickerController1:(UIImagePickerController *)picker1 didFinishPickingImage:(UIImage *)image1 editingInfo:(NSDictionary *)editingInfo1
{
    [picker1 dismissModalViewControllerAnimated:YES];
    imagepicker.view.hidden=YES;
             photoPreviewImageView1.image=image1;

} 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:44:43.347

```
//Take two imageView in your .h file
UIImageView *imgViewForFirstPicker;
UIImageView *imgViewForSecondPicker;

// Alloc these images in view did load 

imgViewForFirstPicker = [[UIImaeView allo] initWithFrame:(give your rect)];

// Similarly for second imageView and add to both in self.view

-(IBAction)imagepickMethod1:(id)sender
{
    UIImagePickerController *imagepicker=[[UIImagePickerController alloc]init];
    imagepicker.delegate=self;

    imagepicker.tag=100;
    imagepicker.sourceType=UIImagePickerControllerSourceTypePhotoLibrary;
    [self presentModalViewController:imagepicker animated:YES];
}
-(IBAction)imagepickMethod2:(id)sender
{
    UIImagePickerController *imagepicker1=[[UIImagePickerController alloc]init];
    imagepicker1.delegate=self;
    imagepicker1.tag=101;
    imagepicker1.sourceType=UIImagePickerControllerSourceTypePhotoLibrary;
    [self presentModalViewController:imagepicker1 animated:YES];
}

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage: (UIImage*)image editingInfo:(NSDictionary *)editingInfo
{
    [picker dismissModalViewControllerAnimated:YES];
    if(picker.tag == 100)
    imgViewForFirstPicker.image=image;
    else
    imgViewForSecondPicker.image=image;
} 
```

试试这个希望它会帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:24:09.433

`UIImagePickerController`创建一个相当重的对象，所以我认为不建议创建它的多个实例。如果您也这样做，这可能是导致问题的原因。如果您也可以共享您的代码，那就太好了，这样我们就可以对您的问题有更多的了解

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T07:41:22.187

建议仅在图像选择器上使用。从您提供的代码中，您正在尝试创建两个不同的 imagepicker 委托方法，但实际上两次都只会调用其中一个。

您应该在 imagePicker 实例上创建并根据您需要更改的图像更改其标签，然后在`-didFinishPickingImage`检查中`if (picker.tag == SOME_TAG)`然后适当设置。

# android - 更新 tabwidget 中的第三次点击活动时出现错误

> ID：11009955
> 
> 赞同：0
> 
> 时间：2012-06-13T07:18:12.187
> 
> 标签：android, android-intent, refresh

我有个问题。我在不同的活动中有两个刷新按钮，它可以工作，但是当我第三次单击时，出现错误。是否有必要放一个光标来控制它？

刷新代码：

```
refrescar.setOnClickListener(new OnClickListener(){
@Override
public void onClick(View arg0)              {
Intent anterior = getIntent();
anterior.setFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
View vista = getLocalActivityManager().startActivity("registratsi", anterior).getDecorView();
setContentView(vista);
  }
}); 
```

> 06-13 07:22:59.904: E/src(315):
> 
> 06-13 07:23:01.384：D/dalvikvm(315)：GC_EXTERNAL_ALLOC 在 60 毫秒内释放了 5105 个对象/356600 个字节 06-13 07:23:02.315：E/Bitmap(315)：返回 06-13 07:23:02.334 : E/src(315):
> 
> 06-13 07:23:02.694: E/Bitmap(315): 返回 06-13 07:23:02.704: E/src(315):
> 
> 06-13 07:23:03.084: E/Bitmap(315): 返回 06-13 07:23:03.095: E/src(315):
> 
> 06-13 07:23:03.424: E/dalvikvm-heap(315): 531392 字节的外部分配对于这个进程来说太大了。06-13 07:23:03.424: E/GraphicsJNI(315): VM 不允许我们分配 531392 字节 06-13 07:23:03.424: D/skia(315): --- 解码器->解码返回 false 06-13 07:23:03.424: D/AndroidRuntime(315): 关闭 VM 06-13 07:23:03.424: W/dalvikvm(315): threadid=1: 线程退出但未捕获异常 (group=0x4001d800) 06 -13 07：23：03.464：E/AndroidRuntime（315）：致命异常：主要 06-13 07：23：03.464：E/AndroidRuntime（315）：java.lang.OutOfMemoryError：位图大小超过 VM 预算 06-13 07 :23:03.464: E/AndroidRuntime(315): at android.graphics.BitmapFactory.nativeDecodeStream(Native Method) 06-13 07:23:03.464: E/AndroidRuntime(315): at android.graphics.BitmapFactory.decodeStream(BitmapFactory .java:459) 06-13 07:23:03.464:

其他按钮：

```
 btnReload.setOnClickListener(new OnClickListener()          {           @Override           public void onClick(View arg0)              { //                >Intent anterior = getIntent();
            Intent anterior = new Intent (webPushActivity.this, webPushActivity.class);
             View vista = getLocalActivityManager().startActivity("social",
                     anterior)
                        .getDecorView(); 
                   setContentView(vista);           }       }); 
```

其他错误：

> 06-13 09:50:13.493: E/AndroidRuntime(1274): 致命异常: main 06-13 09:50:13.493: E/AndroidRuntime(1274): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. nimbosolutions.projecte1/com.nimbosolutions.projecte1.webPushActivity}：java.lang.NullPointerException 06-13 09:50:13.493：E/AndroidRuntime(1274)：在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663) 06 -13 09:50:13.493: E/AndroidRuntime(1274): 在 android.app.ActivityThread.startActivityNow(ActivityThread.java:2503) 06-13 09:50:13.493: E/AndroidRuntime(1274): 在 android.app .LocalActivityManager.moveToState(LocalActivityManager.java:127) 06-13 09:50:13.493: E/AndroidRuntime(1274): 在 android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339) 06-13 09:50:13.493 : E/AndroidRuntime(1274): 在 com.nimbosolutions.projecte1.webPushActivity$3.onClick(webPushActivity.java:177) 06-13 09:50:13.493: E/AndroidRuntime(1274): 在 android.view.View.performClick(View.java:2408) 06-13 09 :50:13.493: E/AndroidRuntime(1274): 在 android.view.View$PerformClick.run(View.java:8816) 06-13 09:50:13.493: E/AndroidRuntime(1274): 在 android.os。 Handler.handleCallback(Handler.java:587) 06-13 09:50:13.493: E/AndroidRuntime(1274): 在 android.os.Handler.dispatchMessage(Handler.java:92) 06-13 09:50:13.493: E/AndroidRuntime(1274): 在 android.os.Looper.loop(Looper.java:123) 06-13 09:50:13.493: E/AndroidRuntime(1274): 在 android.app.ActivityThread.main(ActivityThread.java :4627) 06-13 09:50:13.493: E/AndroidRuntime(1274): 在 java.lang.reflect.Method.invokeNative(Native Method) 06-13 09:50:13.493: E/AndroidRuntime(1274):在 java.lang.reflect.Method.invoke(Method.java:521) 06-13 09:50:13.493: E/AndroidRuntime(1274): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit. java:868) 06-13 09:50:13.493: E/AndroidRuntime(1274): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 06-13 09:50:13.493: E/ AndroidRuntime(1274): 在 dalvik.system.NativeStart.main(Native Method) 06-13 09:50:13.493: E/AndroidRuntime(1274): 由: java.lang.NullPointerException 06-13 09:50:13.493: E/AndroidRuntime(1274): 在 com.nimbosolutions.projecte1.webPushActivity.onCreate(webPushActivity.java:71) 06-13 09:50:13.493: E/AndroidRuntime(1274): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation .java:1047) 06-13 09:50:13.493: E/AndroidRuntime(1274): 在 android.app.ActivityThread。performLaunchActivity(ActivityThread.java:2627) 06-13 09:50:13.493: E/AndroidRuntime(1274): ... 15 更多

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:31:07.767

您正在创建一个位图，以下行说明出了什么问题：

```
java.lang.OutOfMemoryError: bitmap size exceeds VM budget 06-13 07:23:03.464: 
```

也许您正在创建太多位图。或者您的位图太大。在旧版本的 Android 中，即使您创建了第二个位图，bitmapFactory 也存在一个错误，会引发这些内存错误，因此您必须回收所有位图。较新版本的 Android 似乎没有这些问题，或者可能是因为现在有更多内存。

尝试只创建一个位图，并在使用后回收它。如果您使用多个位图，请确保将它们缩小到您需要的大小。那应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:40:23.613

对于这个例外：

```
java.lang.OutOfMemoryError: bitmap size exceeds VM budget 06-13 07:23:03.464: 
```

我已经给出了我的答案[位图大小超出 Vm 预算错误 android](https://stackoverflow.com/questions/10737582/bitmap-size-exceeds-vm-budget-error-android/10738115#10738115)。请通过它，它应该可以解决您的问题。

谢谢 ：）

# jquery - 使用jquery，mvc3和html5在asp.net中上传和处理带有进度条的文件

> ID：11009956
> 
> 赞同：3
> 
> 时间：2012-06-13T07:18:14.073
> 
> 标签：jquery, asp.net, html, upload, progress-bar

我看到有不少上传/progressbar 组件，其中大部分使用 swf/flash。

我正在应用程序中实现一项功能，该功能需要上传一个小文件（< 1 Mb），然后将其加载到数据库中（长时间操作 - 10 -15 分钟，不要问：/）。

我想显示导入过程的两个阶段的进度信息。您推荐的实现此功能的策略是什么？我应该考虑什么工具？

客户主要使用 IE8，但我想尽可能避免使用 Flash。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:39:54.963

你说 HTML5，然后你提到 IE8。在 IE8 上，您必须使用 jquery [uploadify](http://www.uploadify.com/)，但如果您有现代浏览器，则可以使用 HTML5（请参阅[教程](http://www.alexanderschnitzler.de/2011/06/howto-build-an-html5-file-uploader-with-ajax/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:31:58.107

您必须使用模型框，请参阅以下链接... [http://www.queness.com/resources/html/modal/jquery-modal-window.html](http://www.queness.com/resources/html/modal/jquery-modal-window.html) 上传文件时调用，此模型框功能，上传后关闭自动调用 this , $.modal.close() 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:57:28.470

如果您使用的是 HTML5 文件阅读器，那么文件进度很容易捕捉。阅读 HTML5 Rocks 上的 HTML5 field reader API 文章以获取有关文件阅读器 API 的更多信息。

[Filr 阅读器 API](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

# windows - OEMToCharW 返回错误的字符

> ID：11009962
> 
> 赞同：1
> 
> 时间：2012-06-13T07:18:58.113
> 
> 标签：windows, delphi, unicode, command-line, delphi-7

我从控制台应用程序（CMD）读取输入缓冲区，如下所示：

```
var
pBuffer     : array [0..2400] of Widechar;
dBuffer     : array [0..2400] of WideChar;
CReadBuffer : Cardinal;
BytesRead   : Cardinal;
begin
// ....
 ReadFile(BuffHandle, pBuffer[0], CReadBuffer, BytesRead, nil);
 pBuffer[BytesRead] := #0; // Finish/End the WideString
 OemToCharW(pBuffer, dBuffer);
 MessageBoxW (0, dBuffer, '', 0);
// ....
end; 
```

出于某种原因，我得到了奇怪的字符...... CMD 应该有 oem 字符集。我之前使用过 OEMtoCharA，效果很好。我做错了什么？

感谢帮助。

编辑：我使用 Delphi7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T07:45:06.623

如您所说， CMD 具有 OEM 字符集，这意味着 pBuffer 应声明为

```
pBuffer: array[0..2400] of AnsiChar; 
```

现在再试一次（我自己现在无法检查）。

事实证明，在 Delphi 7 中的声明[`OemToCharW`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647493.aspx)不正确。在 Delphi 7 中，第一个参数被错误地声明为`PWideChar`when it should be `PAnsiChar`。您应该`OemToCharW`在代码中正确重新声明，并可能考虑[`OemToCharBuffW`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647494.aspx)改用。

# java - Java - JSlider 自定义，但加载时，它不显示相同的样式，这是预期的

> ID：11009963
> 
> 赞同：3
> 
> 时间：2012-06-13T07:19:06.247
> 
> 标签：java, swing, jslider

我有这个自定义的 JSlider，它将在许多其他表单/窗口中使用。但是当我使用`MyJSlider`它时显示以下样式：

![在此处输入图像描述](../Images/7a70f48e95c5c62d16115e7b3262d4fe.png)

预期输出为：

![在此处输入图像描述](../Images/c02a9a2ebca1ab5db484319c2a32e4c8.png)

**YumYumYum.java：**

```
import java.awt.EventQueue;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.WindowConstants;

public class YumYumYum {

  private JFrame f = new JFrame();

  public YumYumYum() {

    f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);

    MyJSlider slider = new MyJSlider();
    JPanel p = new JPanel();
    p.add(slider);    

    f.getContentPane().add(p);
    f.setSize(320, 240);
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }

  public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
      @Override
      public void run() {
        new YumYumYum();
      }
    });
  }
} 
```

**MyJSlider.java：**

```
import javax.swing.*;
import javax.swing.plaf.synth.SynthLookAndFeel;

public class MyJSlider extends JSlider {

  public MyJSlider() {    
    try {
      SynthLookAndFeel laf = new SynthLookAndFeel();
      laf.load(MyJSlider.class.getResourceAsStream("/demo.xml"), MyJSlider.class);
      UIManager.setLookAndFeel(laf);
    } catch (Exception e) {
      e.printStackTrace();
    } 
    setOrientation(JSlider.VERTICAL);
    setMinimum(-24);
    setMaximum(12);
    setVisible(true); 
  }

} 
```

**演示.xml：**

```
<synth>
    <style id="backingStyle">
        <opaque value="TRUE"/>
        <font name="Dialog" size="12"/>
        <state>
            <color value="WHITE" type="BACKGROUND"/>
            <color value="BLACK" type="FOREGROUND"/>
        </state>
    </style>
    <bind style="backingStyle" type="region" key=".*"/>

    <style id="SliderTrackStyle">
        <opaque value="TRUE"/>
        <state>
            <color type="BACKGROUND" value="ORANGE"/>
        </state>
    </style>
    <bind style="SliderTrackStyle" type="region" key="SliderTrack" />

    <style id="SliderThumbStyle">
        <opaque value="TRUE"/>
        <state>
            <color type="BACKGROUND" value="RED"/>
        </state>
        <state value="PRESSED">
            <color type="BACKGROUND" value="GREEN"/>
        </state>

    </style>
    <bind style="SliderThumbStyle" type="region" key="SliderThumb" />
</synth> 
```

跟进：

```
final MyJSlider veryFirst= new MyJSlider(); // Hide first one: Style is not showing
final MyJSlider vSlider0 = new MyJSlider(); // Style - starts
final MyJSlider vSlider1 = new MyJSlider();
final MyJSlider vSlider2 = new MyJSlider();
final MyJSlider vSlider3 = new MyJSlider();    
final MyJSlider vSlider4 = new MyJSlider();    
final MyJSlider vSlider5 = new MyJSlider();  
final MyJSlider vSlider6 = new MyJSlider();
final MyJSlider vSlider7 = new MyJSlider();    
final MyJSlider vSlider8 = new MyJSlider(); 
final MyJSlider vSlider9 = new MyJSlider(); // Style - continue....

// JPanel
MyJSliderPanel eqPanel = new MyJSliderPanel();     
// Hide the first one always. As it does not shows the Style
eqPanel.add(veryFirst);    

vSlider0.addChangeListener(new ChangeListener() {
  @Override
  public void stateChanged(ChangeEvent ce) {
    eq();
  }
});
eqPanel.add(vSlider0);

vSlider1.addChangeListener(new ChangeListener() {
  @Override
  public void stateChanged(ChangeEvent ce) {
    eq();
  }
});
eqPanel.add(vSlider1);

vSlider2.addChangeListener(new ChangeListener() {
  @Override
  public void stateChanged(ChangeEvent ce) {
    eq();
  }
});
eqPanel.add(vSlider2);

vSlider3.addChangeListener(new ChangeListener() {
  @Override
  public void stateChanged(ChangeEvent ce) {
    eq();
  }
});
eqPanel.add(vSlider3);

vSlider4.addChangeListener(new ChangeListener() {
  @Override
  public void stateChanged(ChangeEvent ce) {
    eq();
  }
});
eqPanel.add(vSlider4);

vSlider5.addChangeListener(new ChangeListener() {
  @Override
  public void stateChanged(ChangeEvent ce) {
    eq();
  }
});
eqPanel.add(vSlider5);

vSlider6.addChangeListener(new ChangeListener() {
  @Override
  public void stateChanged(ChangeEvent ce) {
    eq();
  }
});
eqPanel.add(vSlider6);

vSlider7.addChangeListener(new ChangeListener() {
  @Override
  public void stateChanged(ChangeEvent ce) {
    eq();
  }
});
eqPanel.add(vSlider7);

vSlider8.addChangeListener(new ChangeListener() {
  @Override
  public void stateChanged(ChangeEvent ce) {
    eq();
  }
});
eqPanel.add(vSlider8);

vSlider9.addChangeListener(new ChangeListener() {
  @Override
  public void stateChanged(ChangeEvent ce) {
    eq();
  }
});
eqPanel.add(vSlider9);
eqPanel.setSize(100, 100); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T07:31:41.750

*您需要在创建任何 GUI 组件之前设置外观。*. 例如：您正在调用：

```
UIManager.setLookAndFeel(laf); 
```

....**晚了**。

* * *

## 示例（使用您的`demo.xml`）：

```
public class Test {

    public static void main(String[] args) {

        try {
            SynthLookAndFeel laf = new SynthLookAndFeel();
            laf.load(Test.class.getResourceAsStream("demo.xml"), Test.class);
            UIManager.setLookAndFeel(laf);
        } catch (Exception e) {
            e.printStackTrace();
        }

        JFrame f = new JFrame();
        f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        f.add(new JSlider() {{
            setOrientation(JSlider.VERTICAL);
            setMinimum(-24);
            setMaximum(12);
            setVisible(true);
        }});
        f.setSize(320, 240);
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }
} 
```

输出正确的屏幕截图。

# javascript - 如何将第三方 JavaScript 库添加到 Meteor 应用程序？

> ID：11009971
> 
> 赞同：49
> 
> 时间：2012-06-13T07:19:42.250
> 
> 标签：javascript, meteor

`jquery.center.js`我想向Meteor 应用程序添加一个 JavaScript 前端插件，例如。

如果我将它放在我的`app/`目录中并刷新页面，我会收到此错误：

> 您的应用程序正在崩溃。这是最新的日志。
> 
> node.js:201
> 抛出 e；// process.nextTick 错误，或第一次滴答时的“错误”事件
> ^
> ReferenceError: jQuery 未定义
> 在 app/jquery.center.js:43:1
> at /Users/crapthings/Desktop/app/.meteor/local/build /server/server.js:111:21
> at Array.forEach (native)
> at Function。（/Users/crapthings/Desktop/app/.meteor/local/build/server/underscore.js:76:11）
> 在/Users/crapthings/Desktop/app/.meteor/local/build/server/server.js： 97:7
> 退出并显示代码：1
> 您的应用程序正在崩溃。等待文件更改。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-14T05:37:18.697

您将 jquery 插件 javascript 文件直接放在 app 文件夹中，以便为客户端和服务器加载 javascript 文件。

**根据 Meteor 文档：**
客户端从以下位置加载 javascript：project/public 和 project/client
服务器从以下位置加载 javascript：project/public 和 project/server 文件夹。

从 v1.0 开始，Meteor 在客户端内部使用 jQuery，因此您可以直接使用您的库而无需添加 jQuery。但是，建议您明确地将 jQuery 添加到您的 Meteor 项目中：

> 流星添加jQuery

Meteor 文档深入解释[了 JavaScript 文件是如何加载的以及静态资源应该去哪里](https://guide.meteor.com/structure.html)（CSS、图像）。

另请参阅**[如何为 Meteor 重新打包现有库](https://github.com/raix/Meteor-community-discussions/issues/14)**。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-14T01:23:47.697

将其放在`client`文件夹中，使其仅在客户端上加载，服务器上不需要 jQuery。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-06-22T16:08:31.820

在 MeterorJS 1.3.x 中执行此操作的一种方法

`public\js\`在目录下添加JS文件

[![在此处输入图像描述](../Images/00da69a356cdb61610d0cdfd7994a5b3.png)](https://i.stack.imgur.com/inM30.png)

使用 client/main.js 中的 $.getScript 从 Meteor.startup 方法加载它如果要控制脚本加载顺序，请为每个 js 文件使用多个 $.getScript 进行控制。

[![在此处输入图像描述](../Images/4e4d77c94ebbce04d71f060dd41cc32a.png)](https://i.stack.imgur.com/AwWNh.png)

```
Meteor.startup(function(){
    $.getScript('js/fhir-client.js', function(){
        // script should be loaded and do something with it. 

    });
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-28T05:11:13.837

从 Meteor 1.3 开始，您可以[直接通过他们的 npm 包将 3rd 方 JavaScript 库添加到 Meteor 项目](https://guide.meteor.com/using-npm-packages.html)：

```
meteor npm install --save moment 
```

服务器端和客户端包都无需修改即可工作，因为 Meteor 的 ES2015 模块系统负责在客户端创建类似 Node 的环境，就像 browserify 或 webpack 所做的那样。

如果 npm 包碰巧无法正常运行，请在[Atmoshpere](http://atmospherejs.com/)上查找包装器。Atmosphere 是 Meteor 的官方第 3 个软件包存储库，但在 Meteor v1.3 之后，相关性越来越低。它最终会被[淘汰](https://guide.meteor.com/atmosphere-vs-npm.html)。

### 历史

在 Meteor 1.3 之前，您必须[为 Meteor 重新打包 3rd 方库](https://github.com/raix/Meteor-community-discussions/issues/14)。开发了一个名为 Autopublish 的工具来自动化该过程。在 Meteor Development Group 停止在 meteor.com 上提供免费托管后，Autopublish 也停止了。

# java - javax.el.PropertyNotFoundException: /demo.xhtml @24,55 value="#{UserBean.favYear3}": 目标不可达，标识符 'UserBean' 解析为 null

> ID：11009974
> 
> 赞同：2
> 
> 时间：2012-06-13T07:19:50.967
> 
> 标签：java, eclipse, jsf, jakarta-ee, jsf-2

我想在 JSF 中有一个列表框。我写了一个简单的代码，但它不起作用。在演示页面中，我看到一个没有列表的空框，在用户页面中我有错误。

用户Bean.java

```
@ManagedBean
@SessionScoped   
public class UserBean implements Serializable{
    public String favYear3;//list box

    public String getFavYear3() {
        return favYear3;
    }

    public void setFavYear3(String favYear3) {
        this.favYear3 = favYear3;
    }
    public static class Year{
        public String yearLabel;
        public String yearValue;

        public Year(String yearLabel, String yearValue){
            this.yearLabel = yearLabel;
            this.yearValue = yearValue;
        }

        public String getYearLabel(){
            return yearLabel;
        }

        public String getYearValue(){
            return yearValue;
        }

    }

    public Year[] year3List;

    public Year[] getFavYear3Value() {

        year3List = new Year[3];
        year3List[0] = new Year("Year3 - 2000", "2000");
        year3List[1] = new Year("Year3 - 2010", "2010");
        year3List[2] = new Year("Year3 - 2020", "2020");

        return year3List;
    }

} 
```

演示.xhtml

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>first jsf page</title>
</head>
<h:body>
    <h1>JSF 2 check example</h1>

    <h:form>
        <h:selectOneListbox value="#{UserBean.favYear3}">
            <f:selectItems value="#{UserBean.favYear3Value}" var="y"
                itemLabel="#{y.yearLabel}" itemValue="#{y.yearValue}" />
        </h:selectOneListbox>
    </h:form>

</h:body>
</html> 
```

用户.xhtml

```
<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>second jsf page</title>
</head>
<h:body>
    <h:outputText value="#{UserBean.favYear3}"/>
</h:body>
</html> 
```

我的问题：在演示页面中我有一个空框。在用户页面中，错误是：

```
type Exception report

message 

description The server encountered an internal error () that prevented it from fulfilling this request.

exception 

javax.servlet.ServletException: javax.el.PropertyNotFoundException: /demo.xhtml @24,55 value="#{UserBean.favYear3}": Target Unreachable, identifier 'UserBean' resolved to null
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:321)

root cause 

javax.faces.component.UpdateModelException: javax.el.PropertyNotFoundException: /demo.xhtml @24,55 value="#{UserBean.favYear3}": Target Unreachable, identifier 'UserBean' resolved to null
    javax.faces.component.UIInput.updateModel(UIInput.java:848)
    javax.faces.component.UIInput.processUpdates(UIInput.java:730)
    javax.faces.component.UIForm.processUpdates(UIForm.java:268)
    javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1109)
    javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1109)
    javax.faces.component.UIViewRoot.processUpdates(UIViewRoot.java:1218)
    com.sun.faces.lifecycle.UpdateModelValuesPhase.execute(UpdateModelValuesPhase.java:74)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:308) 
```

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T10:49:42.933

您在 EL 中的托管 bean 名称是错误的。您已将 bean 声明如下：

```
@ManagedBean
@SessionScoped   
public class UserBean implements Serializable{ 
```

当您不指定 的`name`属性时`@ManagedBean`，它将使 Javabeans 命名约定默认为第一个字符小写的类名，就像这样`userBean`，但是您尝试使用确切的类名来引用它们`#{UserBean}`。您需要将此名称相应地修复为`#{userBean}`.

JSF 2.x**不需要**`faces-config.xml`注册。去掉它。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:25:13.620

您必须使您的 bean 可访问/可管理。为此，您可以

使用 CDI ( `@Named`) 或 JSF ( `@ManagedBean`) 注释对其进行注释：

```
@Named
@SessionScoped
public class UserBean implements Serializable{...} 
```

或者像这样描述`faces-config.xml`它`managed-bean`：

```
<managed-bean>
  <managed-bean-name>userBean</managed-bean-name>
  <managed-bean-class>com.example.UserBean</managed-bean-class>
  <managed-bean-scope>session</managed-bean-scope>
</managed-bean> 
```**

# objective-c - 播放暂停的 AVAudioRecorder 文件

> ID：11009975
> 
> 赞同：7
> 
> 时间：2012-06-13T07:19:54.367
> 
> 标签：objective-c, xcode, avaudioplayer, avaudiorecorder

在我的程序中，我希望用户能够：

*   录下他的声音，
*   暂停录制过程，
*   听听他录的
*   然后继续录制。

我已经成功地达到了可以使用 AVAudioRecorder 和 AVAudioPlayer 录制和播放录音的地步。但是每当我尝试录制、暂停录制然后播放时，播放部分都会失败且没有错误。

我可以猜测它没有播放的原因是因为音频文件尚未保存并且仍在内存中或其他东西。

有没有办法可以播放暂停的录音？如果有请告诉我如何

我正在使用 xcode 4.3.2

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-18T07:50:10.143

如果要播放录音，那么是的，您必须先停止录音，然后才能将文件加载到 AVAudioPlayer 实例中。

如果您希望能够播放某些录音，然后在听完录音后添加更多录音，或者在中间说录音..那么您就有麻烦了。

您必须创建一个新的音频文件，然后将它们组合在一起。

这是我的解决方案：

```
// Generate a composition of the two audio assets that will be combined into
// a single track
AVMutableComposition* composition = [AVMutableComposition composition];
AVMutableCompositionTrack* audioTrack = [composition addMutableTrackWithMediaType:AVMediaTypeAudio
                                                                 preferredTrackID:kCMPersistentTrackID_Invalid];

// grab the two audio assets as AVURLAssets according to the file paths
AVURLAsset* masterAsset = [[AVURLAsset alloc] initWithURL:[NSURL fileURLWithPath:self.masterFile] options:nil];
AVURLAsset* activeAsset = [[AVURLAsset alloc] initWithURL:[NSURL fileURLWithPath:self.newRecording] options:nil];

NSError* error = nil;

// grab the portion of interest from the master asset
[audioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, masterAsset.duration)
                    ofTrack:[[masterAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0]
                     atTime:kCMTimeZero
                      error:&error];
if (error)
{
    // report the error
    return;
}

// append the entirety of the active recording
[audioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, activeAsset.duration)
                    ofTrack:[[activeAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0]
                     atTime:masterAsset.duration
                      error:&error];

if (error)
{
    // report the error
    return;
}

// now export the two files
// create the export session
// no need for a retain here, the session will be retained by the
// completion handler since it is referenced there

AVAssetExportSession* exportSession = [AVAssetExportSession
                                       exportSessionWithAsset:composition
                                       presetName:AVAssetExportPresetAppleM4A];
if (nil == exportSession)
{
    // report the error
    return;
}

NSString* combined = @"combined file path";// create a new file for the combined file

// configure export session  output with all our parameters
exportSession.outputURL = [NSURL fileURLWithPath:combined]; // output path
exportSession.outputFileType = AVFileTypeAppleM4A; // output file type

[exportSession exportAsynchronouslyWithCompletionHandler:^{

    // export status changed, check to see if it's done, errored, waiting, etc
    switch (exportSession.status)
    {
        case AVAssetExportSessionStatusFailed:
            break;
        case AVAssetExportSessionStatusCompleted:
            break;
        case AVAssetExportSessionStatusWaiting:
            break;
        default:
            break;
    }
    NSError* error = nil;

    // your code for dealing with the now combined file
}]; 
```

我不能完全归功于这项工作，但它是根据其他几个人的意见拼凑而成的：

[AVAudioRecorder / AVAudioPlayer - 将录音附加到文件](https://stackoverflow.com/questions/4649918/avaudiorecorder-avaudioplayer-append-recording-to-file)

（我暂时找不到其他链接）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-04-23T05:20:33.590

我们对我们的应用程序有与 OP 描述的相同的要求，并且遇到了相同的问题（即，如果用户想听她到目前为止录制的内容，则必须停止录制，而不是暂停）。我们的应用程序（[项目的 Github](https://github.com/society-for-the-blind/Access-News-Reader-iOS)存储库）`AVQueuePlayer`用于播放和类似于[kermitology 的回答](https://stackoverflow.com/questions/11009975/play-a-paused-avaudiorecorder-file#13438421)的方法来连接部分录音，但有一些显着差异：

*   在**Swift中实现**
*   **将多个**录音连接成一个
*   **不弄乱曲目**

最后一项背后的基本原理是，简单的录音`AVAudioRecorder`只有一个轨道，整个解决方法的主要原因是连接资产中的这些单一轨道（参见**附录 3**）。那么为什么不使用`AVMutableComposition`'`insertTimeRange`方法来`AVAsset`代替`AVAssetTrack`呢？

相关部分：（[完整代码](https://github.com/society-for-the-blind/Access-News-Reader-iOS/blob/master/Access%20News%20Reader/RecordViewController.swift)）

```
import UIKit
import AVFoundation

class RecordViewController: UIViewController {

    /* App allows volunteers to record newspaper articles for the
       blind and print-impaired, hence the name.
    */
    var articleChunks = [AVURLAsset]()

    func concatChunks() {
        let composition = AVMutableComposition()

        /* `CMTimeRange` to store total duration and know when to
           insert subsequent assets.
        */
        var insertAt = CMTimeRange(start: kCMTimeZero, end: kCMTimeZero)

        repeat {
            let asset = self.articleChunks.removeFirst()

            let assetTimeRange = 
                CMTimeRange(start: kCMTimeZero, end: asset.duration)

            do {
                try composition.insertTimeRange(assetTimeRange, 
                                                of: asset, 
                                                at: insertAt.end)
            } catch {
                NSLog("Unable to compose asset track.")
            }

            let nextDuration = insertAt.duration + assetTimeRange.duration
            insertAt = CMTimeRange(start: kCMTimeZero, duration: nextDuration)
        } while self.articleChunks.count != 0

        let exportSession =
            AVAssetExportSession(
                asset:      composition,
                presetName: AVAssetExportPresetAppleM4A)

        exportSession?.outputFileType = AVFileType.m4a
        exportSession?.outputURL = /* create URL for output */
        // exportSession?.metadata = ...

        exportSession?.exportAsynchronously {

            switch exportSession?.status {
            case .unknown?: break
            case .waiting?: break
            case .exporting?: break
            case .completed?: break
            case .failed?: break
            case .cancelled?: break
            case .none: break
            }
        }

        /* Clean up (delete partial recordings, etc.) */
    } 
```

该图帮助我了解了期望什么以及从哪里继承的问题。（`NSObject`在没有继承箭头的情况下隐含为超类。）

[![在此处输入图像描述](../Images/da116b4244eed1481c65aef4f5c55c2c.png)](https://i.stack.imgur.com/fWTJk.png)

* * *

**附录 1：**我对此`switch`部分持保留意见，而不是在 上使用 KVO `AVAssetExportSessionStatus`，但文档很清楚`exportAsynchronously`' 的回调块“在写入完成或写入失败时调用”。

**附录 2：**以防万一有人遇到以下问题`AVQueuePlayer`：[“一个 AVPlayerItem 不能与多个 AVPlayer 实例关联”](https://stackoverflow.com/questions/30657462/an-avplayeritem-cannot-be-associated-with-more-than-one-instance-of-avplayer/49932017#49932017)

**附录 3：**除非您以立体声录制，但据我所知，移动设备只有一个输入。此外，使用精美的音频混合还需要使用`AVCompositionTrack`. 一个好的 SO 线程：Proper [AVAudioRecorder Settings for Recording Voice？](https://stackoverflow.com/questions/2149280/proper-avaudiorecorder-settings-for-recording-voice)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T10:16:28.087

RecordAudioViewController.h

```
 #import <UIKit/UIKit.h>
 #import <AVFoundation/AVFoundation.h>
 #import <CoreAudio/CoreAudioTypes.h>

   @interface record_audio_testViewController : UIViewController <AVAudioRecorderDelegate> {

IBOutlet UIButton * btnStart;
IBOutlet UIButton * btnPlay;
IBOutlet UIActivityIndicatorView * actSpinner;
BOOL toggle;

//Variables setup for access in the class:
NSURL * recordedTmpFile;
AVAudioRecorder * recorder;
NSError * error;

 }

 @property (nonatomic,retain)IBOutlet UIActivityIndicatorView * actSpinner;
 @property (nonatomic,retain)IBOutlet UIButton * btnStart;
 @property (nonatomic,retain)IBOutlet UIButton * btnPlay;

 - (IBAction) start_button_pressed;
 - (IBAction) play_button_pressed;
 @end 
```

RecordAudioViewController.m

```
 @synthesize actSpinner, btnStart, btnPlay;
   - (void)viewDidLoad {
    [super viewDidLoad];

//Start the toggle in true mode.
toggle = YES;
btnPlay.hidden = YES;

//Instanciate an instance of the AVAudioSession object.
AVAudioSession * audioSession = [AVAudioSession sharedInstance];
//Setup the audioSession for playback and record. 
//We could just use record and then switch it to playback leter, but
//since we are going to do both lets set it up once.
[audioSession setCategory:AVAudioSessionCategoryPlayAndRecord error: &error];
//Activate the session
[audioSession setActive:YES error: &error];

  }

 - (IBAction)  start_button_pressed{

if(toggle)
{
    toggle = NO;
    [actSpinner startAnimating];
    [btnStart setTitle:@"Stop Recording" forState: UIControlStateNormal ];  
    btnPlay.enabled = toggle;
    btnPlay.hidden = !toggle;

    //Begin the recording session.
    //Error handling removed.  Please add to your own code.

    //Setup the dictionary object with all the recording settings that this 
    //Recording sessoin will use
    //Its not clear to me which of these are required and which are the bare minimum.
    //This is a good resource: http://www.totodotnet.net/tag/avaudiorecorder/
    NSMutableDictionary* recordSetting = [[NSMutableDictionary alloc] init];
    [recordSetting setValue :[NSNumber numberWithInt:kAudioFormatAppleIMA4] forKey:AVFormatIDKey];
    [recordSetting setValue:[NSNumber numberWithFloat:44100.0] forKey:AVSampleRateKey]; 
    [recordSetting setValue:[NSNumber numberWithInt: 2] forKey:AVNumberOfChannelsKey];

    //Now that we have our settings we are going to instanciate an instance of our recorder instance.
    //Generate a temp file for use by the recording.
    //This sample was one I found online and seems to be a good choice for making a tmp file that
    //will not overwrite an existing one.
    //I know this is a mess of collapsed things into 1 call.  I can break it out if need be.
    recordedTmpFile = [NSURL fileURLWithPath:[NSTemporaryDirectory() stringByAppendingPathComponent: [NSString stringWithFormat: @"%.0f.%@", [NSDate timeIntervalSinceReferenceDate] * 1000.0, @"caf"]]];
    NSLog(@"Using File called: %@",recordedTmpFile);
    //Setup the recorder to use this file and record to it.
    recorder = [[ AVAudioRecorder alloc] initWithURL:recordedTmpFile settings:recordSetting error:&error];
    //Use the recorder to start the recording.
    //Im not sure why we set the delegate to self yet.  
    //Found this in antother example, but Im fuzzy on this still.
    [recorder setDelegate:self];
    //We call this to start the recording process and initialize 
    //the subsstems so that when we actually say "record" it starts right away.
    [recorder prepareToRecord];
    //Start the actual Recording
    [recorder record];
    //There is an optional method for doing the recording for a limited time see 
    //[recorder recordForDuration:(NSTimeInterval) 10]

}
else
{
    toggle = YES;
    [actSpinner stopAnimating];
    [btnStart setTitle:@"Start Recording" forState:UIControlStateNormal ];
    btnPlay.enabled = toggle;
    btnPlay.hidden = !toggle;

    NSLog(@"Using File called: %@",recordedTmpFile);
    //Stop the recorder.
    [recorder stop];
}
  }

  - (void)didReceiveMemoryWarning {
// Releases the view if it doesn't have a superview.
[super didReceiveMemoryWarning];

// Release any cached data, images, etc that aren't in use.
  }

  -(IBAction) play_button_pressed{

//The play button was pressed... 
//Setup the AVAudioPlayer to play the file that we just recorded.
AVAudioPlayer * avPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:recordedTmpFile error:&error];
[avPlayer prepareToPlay];
[avPlayer play];

  }

   - (void)viewDidUnload {
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
//Clean up the temp file.
NSFileManager * fm = [NSFileManager defaultManager];
[fm removeItemAtPath:[recordedTmpFile path] error:&error];
//Call the dealloc on the remaining objects.
[recorder dealloc];
recorder = nil;
recordedTmpFile = nil;
  }

  - (void)dealloc {
[super dealloc];
  }

 @end 
```

RecordAudioViewController.xib

拿 2 个按钮。1个用于开始录制，另一个用于播放录制

# javascript - 如何通过jquery验证器使用日期月年的三个文本框来验证出生日期

> ID：11009976
> 
> 赞同：1
> 
> 时间：2012-06-13T07:19:59.690
> 
> 标签：javascript, jquery-validate

我需要使用带有三个单独文本框的 jquery 验证器来验证出生日期，分别代表日月和年。

如何做到这一点请帮助。

HTML 代码

```
<input type="text" maxlength="2" placeholder="DD" class="dob-day  fillone" name="dob-day" id="dob-day" data-fieldgroup="dob" data-fillone-field="true" />
<input type="text" maxlength="2" placeholder="MM" id="dob-month" class="dob-month fillone" data-fieldgroup="dob" data-fillone-field="true">
<input type="text" maxlength="4" placeholder="YYYY" class="dob-year fillone" id="dob-year" data-fieldgroup="dob" data-fillone-field="true"> 
```

我正在使用数据组对文本框进行分组

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:59:40.670

您应该为此创建一个自定义验证方法，并使用 `groups`validate 提供的选项：

```
/* Custom validation method to validate a date based on several fields: */
$.validator.addMethod("datemultiple", function(value, element, params) {
    var daySelector = params[0],
        monthSelector = params[1],
        yearSelector = params[2],
        day = parseInt($(daySelector).val(), 10),
        month = parseInt($(monthSelector).val(), 10),
        year = parseInt($(yearSelector).val(), 10),
        dateEntered = new Date(year, month - 1, day);

    return this.optional(element) || !isNaN(dateEntered.valueOf());

}, "Please enter a valid date");

$(document).ready(function() {
    $("#myform").validate({
        groups: {
            /* Only display one validation message for day, month, and year: */
            dateOfBirth: "dob-day dob-month dob-year"
        },
        rules: {
            'dob-day': {
                required: true,
                datemultiple: ["#dob-day", "#dob-month", "#dob-year"]
            },
            'dob-month': {
                required: true
            }
        },
        /* Place error messages after the "year" field */
        errorPlacement: function ($error, $element) {
            if ($element.data("fieldgroup") === "dob") {
                $error.insertAfter("#dob-year");
            }
        }
    });
}); 
```

**示例：http:** [//jsfiddle.net/xHC86/](http://jsfiddle.net/xHC86/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T15:48:35.333

我编写了一个 Javascript 模块来处理数据是否有效，您可以在 JSFiddle 链接中查看完整的工作示例。

[http://jsfiddle.net/dceast/vmHjN/](http://jsfiddle.net/dceast/vmHjN/)

这是进行验证的模块：

```
var compareDate, checkDates = false;
var validateObject = {
    init: function(year, month, day) {
        return this.compareDate.init(year, month, day);
    },
    compareDate: {
        init: function(year, month, day) {
            var isValid = false;
            // Compensate for zero based index, if month was not
            // subtracted from one 0 === Jan, 1 === Feb, 2 === Mar
            month -= 1;

            // Create a new date object with the selected
            // year, month, and day values and retrieve the
            // milliseconds from it.
            var mSeconds = (new Date(year, month, day)).getTime();
            var objDate = new Date();

            // Set the time of the object to the milliseconds 
            // retrieved from the original date. This will
            // convert it to a valid date.
            objDate.setTime(mSeconds);

            // Compare if the date has changed, if it has then
            // the date is not valid 
            if (objDate.getFullYear() === year &&
                objDate.getMonth() === month &&
                objDate.getDate() === day) 
            {
                isValid = true;
            }
            return isValid;
        }
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T07:27:53.230

抱歉，我不会说英语

您可以分别检查日期 < 30 或 31 月 月 < 12 年 ...

我认为当你使用三个文本框时很容易 :( 只是 js

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T09:39:20.967

```
var compareDate, checkDates = false;
var validateObject = {
    init: function(year, month, day) {
        return this.compareDate.init(year, month, day);
    },
    compareDate: {
        init: function(year, month, day) {
            var isValid = false;
            // Compensate for zero based index, if month was not
            // subtracted from one 0 === Jan, 1 === Feb, 2 === Mar
            month -= 1;

            // Create a new date object with the selected
            // year, month, and day values and retrieve the
            // milliseconds from it.
            var mSeconds = (new Date(year, month, day)).getTime();
            var objDate = new Date();

            // Set the time of the object to the milliseconds
            // retrieved from the original date. This will
            // convert it to a valid date.
            objDate.setTime(mSeconds);

            // Compare if the date has changed, if it has then
            // the date is not valid
            if (objDate.getFullYear() === year&&
                objDate.getMonth() === month &&
                objDate.getDate() === day)
            {                
                if(objDate <= new Date())
                {
                    isValid = true;
                }                   
            }
            return isValid;
        }
    }
};

$(function() {
    var validateButton = $('#btValidate');

    validateButton.click(function(e) {
        var month = parseInt(document.getElementById('month').value, 0),
            day = parseInt(document.getElementById('day').value, 0),
            year = parseInt(document.getElementById('year').value, 0),
            alertBox = $('#alert'),
            isValid = false;

        isValid = validateObject.init(year, month, day);
        var color, message;

        if (isValid === true)
        {
            color = "#008000";
            message = "Your date is valid!";
        }
        else if (isValid === false)
        {
            color = "#F00";
            message = "Your date is not valid!";
        }
        alertBox.css('background', "" + color)
            .html("<p>"+ message +"</p>")
            .stop()
            .animate({
                width: "200px",
                paddingLeft: "75px"
            }, 1750, "easeOutBounce", function() {
                $(this).animate({
                    width: "0px",
                    paddingLeft: "0px"
                }, 1000, "easeInBounce");
        });
    });
}); 
```

这里的工作代码：http: [//jsfiddle.net/vmHjN/140/](http://jsfiddle.net/vmHjN/140/)

# macos - NSButton 在 setTransparent:NO setEnabled:YES 之后高亮显示

> ID：11009981
> 
> 赞同：0
> 
> 时间：2012-06-13T07:20:27.173
> 
> 标签：macos, cocoa, cocoa-bindings

我有 2`NSButton`秒，两者都是带边框的瞬时按下按钮。我有一个主窗口，其他视图被换入和换出。这两个按钮位于主窗口自定义视图（下一个，上一个）中，有助于在视图中导航。

当我在下一个按钮的帮助下到达 2 视图时，我使上一个按钮启用并可见。因此，如果此时我按下上一个按钮，第一个视图将被交换，我使上一个按钮透明并启用。

此时，如果您按下下一个按钮导航到第二个视图，则将换入第二个视图并再次显示上一个按钮。但**在这里突出显示**。我怎样才能摆脱这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:50:36.153

I hope you will get some better answers, but a general technique that I have found to work in cases like this is to wait with enable/disable actions until things have settled down for the new configuration of the views.

After all (if I have read your description correctly), you are hiding a button in the middle of its own action handler.

Postponing this is easily obtained by dispatching your enable/disable code on the next (or, more correctly, a later) invocation of the run loop of the main thread:

```
dispatch_async(dispatch_get_main_queue(), ^{

    // Enable or disable your buttons here.
}); 
```

As a solution it is somewhat of a hack, but on the other hand, waiting until your main view is no longer in a state of flux before you re-configure your navigation UI is not a bad approach.

# jquery - 如何跨移动设备提供图像

> ID：11009982
> 
> 赞同：0
> 
> 时间：2012-06-13T07:20:28.627
> 
> 标签：jquery, css, image, html, mobile

我正在为移动设备开发一个网页，包括智能手机和平板电脑。

我正在使用 jQueryMobile，因此大多数功能在所有设备上都运行良好。

我的问题是，我想使用非常高分辨率的图像，以便使用平板电脑获得最佳质量。如果我使用 720X1280 - 该页面在平板电脑上看起来很棒 - 但在智能手机上 - 不会发生缩小。

我是否必须使用 320x480 构建 - 然后缩放将在平板电脑上发生？有没有什么灵魂或指导方针？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T07:28:17.667

使用响应式图像。这样该图像将根据设备的大小进行缩放。

```
img {
  width: 100%;
  max-width: 100%;
} 
```

上面的 css 代码会自动取父容器的大小。

这里有一些很好的例子和文章。

[http://filamentgroup.com/examples/responsive-images/](http://filamentgroup.com/examples/responsive-images/)

[http://mobile.smashingmagazine.com/2011/07/22/responsive-web-design-techniques-tools-and-design-strategies/](http://mobile.smashingmagazine.com/2011/07/22/responsive-web-design-techniques-tools-and-design-strategies/)

自适应图像的 Javascript 插件：

[http://adaptive-images.com/](http://adaptive-images.com/)

灵活图像的好教程：

[http://www.flexiblewebbook.com/downloads/FlexibleWebDesign_sample_ch9.pdf](http://www.flexiblewebbook.com/downloads/FlexibleWebDesign_sample_ch9.pdf)

# javascript - 使用javascript动态更改html内容的语言

> ID：11009985
> 
> 赞同：-2
> 
> 时间：2012-06-13T07:20:36.487
> 
> 标签：javascript, jquery

我创建了一些内容为英文的 html 页面。现在我需要根据用户选择动态地将语言更改为普通话（新加坡语言），而不需要重定向页面。请任何人帮我这样做。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:54:58.080

看看这个 [语言](http://www.w3schools.com/html5/att_global_lang.asp)

您可以将变量作为属性值传递，它将保存用户选择的语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:29:03.577

这样的事情可能会有所帮助： [https ://translate.google.com/manager/?hl=en](https://translate.google.com/manager/?hl=en)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T07:32:33.437

如果您希望有 2 个选择：

*** 从服务器获取真实内容**：你不能在客户端这样做，你可能必须有一个 Web 应用程序从数据库获取真实内容作为示例，并且使用 AJAX 一切都会很棒。

*** 从客户端获取翻译内容**：您可以使用 Google 工具和 API 来实现，您可以从：[http](http://translate.google.com/translate_tools) ://translate.google.com/translate_tools 开始 并进行自定义。

我不喜欢这样使用谷歌翻译（添加一个下拉列表进行翻译）你现在可以知道为什么在你测试之后，它的性能和视图问题。

**编辑**：也许这个链接对你也有帮助：http: [//labnol.blogspot.com/2005/11/add-language-translation-to-website.html](http://labnol.blogspot.com/2005/11/add-language-translation-to-website.html)

# java - 是否可以像 JNDI 一样在 tomcat7 中的 context.xml 中设置值和访问权限？

> ID：11009987
> 
> 赞同：4
> 
> 时间：2012-06-13T07:20:43.227
> 
> 标签：java, tomcat, servlets, jakarta-mail, jndi

我想在 context.xml 文件中设置一些值并从我的 Servlet 中访问它们，就像我们在 JNDI 中访问一样：

```
mail.smtp.host=smtp.gmail.com
mail.smtp.port=465 
```

我可以这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T09:17:06.713

是的，见上文，您可以做得更好：您可以将整个邮件会话放入 context.xml：

```
 <Resource
      name="mail/xyz"
      type="javax.mail.Session"
      auth="Container"
      mail.pop3.connectiontimeout="60000"
      mail.pop3.host="pop.hhhh.net"
      mail.pop3.port="110"
      mail.pop3.timeout="60000"
      mail.smtp.auth="true"
      mail.smtp.connectiontimeout="60000"
      mail.smtp.host="smtpout.hhhh.net"
      mail.smtp.port="3535"
      mail.smtp.sendpartial="true"
      mail.smtp.timeout="60000"
      mail.store.maildir.autocreatedir="true"
      mail.store.protocol="pop3"
      mail.transport.protocol="smtp"
      mail.from="abc@xyz.com"
      mail.user="xyz"
      mail.host="xyz.com"
      mail.debug="false"
      password="xyz"
      /> 
```

然后将其查找为`java:comp/env/mail/xyz`javax.mail.Session。

请注意，如果您提供该`password`属性，Tomcat 也会为您安装一个 Authenticator。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T07:37:37.410

是的，绝对有可能

```
<Environment name="testEnvEntry" value="Got It"
         type="java.lang.String" override="false"/> 
```

然后像这样访问：

```
Object lookedUp = null;
try {
    InitialContext initialContext = new InitialContext();
    lookedUp = initialContext.lookup("java:/comp/env/testEnvEntry");
} catch (NamingException e) {
    e.printStackTrace();
} 
```

它类似于您`<env-entry>`在`web.xml`.

你可以阅读`Environment` [这里的官方文档](http://tomcat.apache.org/tomcat-7.0-doc/jndi-resources-howto.html#context.xml_configuration)

# php - 如何将复选框中的选中值收集为 javascript 数组/字符串？

> ID：11009995
> 
> 赞同：3
> 
> 时间：2012-06-13T07:21:02.623
> 
> 标签：php, javascript, forms, checkbox

我想知道如何在 mysql 数据库中以复选框的形式搜索用户提供的输入。但在此之前，我需要将选中的字段放入一个 javascript 数组/字符串中，以便我可以使用 url 将其传递给 PHP。

```
<form>
    <input type="checkbox" id="interests" name="interests" value="Food">`
    <input type="checkbox" id="interests" name="interests" value="Movies">`
    <input type="checkbox" id="interests" name="interests" value="Music">`
    <input type="checkbox" id="interests" name="interests" value="Sports">`
</form> 
```

对于其他表单元素，例如文本和选择输入，我可以执行上述操作，但不确定如何为复选框执行此操作。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T07:27:21.427

而不是

```
<form> 
<input type="checkbox" id="interests" name="interests[]" value="Food"> 
<input type="checkbox" id="interests1" name="interests[]" value="Movies"> 
<input type="checkbox" id="interests2" name="interests[]" value="Music"> 
<input type="checkbox" id="interests3" name="interests[]" value="Sports"> 
```

将 name 属性从更改`interests`为`interests[]` 应该解决您的问题。如果我对属性有误，我很抱歉，PHP 有点不习惯，但我很确定。无需对 javascript 做任何事情。这样就容易多了。当然，如果你不想轻松...

关于您通过数据库搜索的第一个问题，我不明白您为什么需要这样做？如果它是一个复选框，您确切地知道它应该是什么，所以只需将其插入到您的数据库中，如下所示：

```
INSERT INTO your_table values(user_id_i_guess, interests...); 
```

你明白了吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T07:38:28.990

### 代码中的问题

*   不要`id`对多个元素使用相同的

*   将复选框的名称更改为`interests[]`

**jQuery**

```
var vals = [];

$(':checkbox:checked[name^=interests]').val(function() {
   vals.push(this.value);
}); 
```

如果要将数组转换为逗号分隔的字符串，请尝试

```
val.join(','); 
```

### 笔记

`$(':checkbox:checked[name^=interests]')``name`选择器以 .开头选择所有选中的复选框`interests`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T07:24:20.880

1.  您必须为复选框使用不同的 id（元素的 id 必须是唯一的）
2.  为复选框兴趣 [] 命名并提交表单 - 在服务器上，您可以使用数组 $_POST['interests'] 或 $_GET['interests']

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T07:30:28.627

假设您的表单有名称，

```
var c = [],
    els = document.forms.formName.elements,
    len = els.length;

for ( var i = 0; i < length; i++ ) {

    if ( els[ i ].type === 'checkbox' ) {

        // If you want to add only checked checkboxes, you can use:
        if ( els[ i ].checked ) c.push( els[ i ].value );

        // If you don't care, just use:
        c.push( els[ i ].value );
    }
}

console.log( c ); // Array of the checkboxes values 
```

如果您不关心旧版浏览器，则可以使用`map`更简洁的代码：

```
var c = [].map.call( document.forms.formName.elements, function( el ) {
    if ( el.type === 'checkbox' ) {
        if ( el.checked ) return el.value;
    }
} ); 
```

如果你有 jQuery，这里有一些 codez：

```
var c = $( ':checkbox:checked' ).map( function() {
    return $( this ).val();
} );

console.log( c ); // Array of the checkboxes values

// To be more precise (so, more performant), you can use the following selector:
$( ':checkbox:checked', document.forms.formName.elements ) 
```

# http - 通过 HTTP .NET 获取 RTSP

> ID：11009996
> 
> 赞同：1
> 
> 时间：2012-06-13T07:21:03.640
> 
> 标签：http, rtsp, vapix

我在 asp.net C# 中，我想从通过 HTTP 隧道传输的轴相机获取 RTSP 流。为此，我正在关注[轴 api 文档](http://www.axis.com/files/manuals/vapix_video_streaming_43387_en_1112.pdf)（从第 16 页开始）。我向带有授权标头的相机发出 HTTP 请求，`RTSP Describe`命令是 base 64 编码并通过 POST 发送到相机 URL。这是 HTTP 请求。

```
POST http://195.29.168.2:20000/axis-media/media.amp HTTP/1.1
User-Agent: Fiddler
Authorization: Basic VXNlcjpDQG1VNTNy
Host: 195.29.168.2:20000
Content-Length: 214
Content-Type: application/x-rtsp-tunnelled

[Base 64 encoded Describe command]
DESCRIBE rtsp://195.29.168.2:20000/axis-media/media.amp
     ?videocodec=h264&resolution=640x480 RTSP/1.0\r\n
    CSeq: 0\r\n
    User-Agent: Axis AMC\r\n
    Accept: application/sdp\r\n 
```

我打算从`Describe`命令中获取 trackId 参数，然后在后续`Setup`命令中使用它来建立与服务器的会话，但是每次发送此请求时，相机都会发送 400（错误请求）参数。我究竟做错了什么？
**注意：**所有请求都是从提琴手发出的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T21:15:02.647

我遇到了同样的问题。事实证明，您需要在一行中将每个参数发送到相机。如：

```
DESCRIBE rtsp://195.29.168.2:20000/axis-media/media.amp?videocodec=h264&resolution=640x480 RTSP/1.0
CSeq: 0
User-Agent: Axis AMC
Accept: application/sdp 
```

如果您按照如下所示进行操作，相机会在中间获得一个换行符并搞砸请求。有点烦人的是轴页面上的 api 显示它的格式是这样的。

```
DESCRIBE rtsp://195.29.168.2:20000/axis-media/media.amp
     ?videocodec=h264&resolution=640x480 RTSP/1.0 
```

我不会使用提琴手，它完全停止了 RTSP 为我工作。Wireshark 工作正常。我使用腻子与相机进行通信。我最终想使用网络浏览器并使用 PHP 来发送/接收命令，但我不知道该怎么做。

如果 GET 请求如下所示，我知道如何发送它，因为它只是在 url 中

```
http://myserver/axis-cgi/mjpg/video.cgi?resolution=320x240&compression=25&camera=1 
```

但是当它看起来像下面这样时，我对如何从网络浏览器将它发送到服务器感到困惑..

```
 SETUP rtsp://myserver/axis-media/media.amp/
trackID=1?videocodec=h264&resolution=640x480 RTSP/1.0
CSeq: 2
User-Agent: Axis AMC
Transport: RTP/AVP;unicast;client_port=20000-20001 
```

如果有人可以提供帮助，那就太好了，我只是在学习 php，我可以使用它吗？

# c++ - 路径如何存储在这种结构中，以及如何将其转换为其他内容？

> ID：11009997
> 
> 赞同：3
> 
> 时间：2012-06-13T07:21:21.203
> 
> 标签：c++, c, string, winapi, type-conversion

我正在查看[FastCopy](https://github.com/laurent22/fastcopy)的代码。我想添加一些选项，以便将文件删除到回收站而不是永久删除。

我遇到的第一个问题是路径的存储方式——作为一种`BYTE[1]`类型。我认为它可能是一些指向真实路径的指针，但如果它只是一个字节，则可能不是。完整结构见下文：

```
struct MoveObj {
    _int64      fileID;
    _int64      fileSize;
    enum        Status { START, DONE, ERR } status;
    DWORD       dwFileAttributes;
    BYTE        path[1];
}; 
```

知道这意味着什么吗？

我的第二个问题是我需要将此字符串转换为一些名为“PCZZTSTR”的可怕 MS 类型，以便它可以与[SHFILEOPSTRUCT 结构](http://msdn.microsoft.com/en-us/library/windows/desktop/bb759795%28v=vs.85%29.aspx)一起使用。有什么建议我可以如何进行这种转换？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T07:51:52.923

`path[1]`最后的单元素数组`struct`只是实现可变大小结构的通用 C 技巧。在 C99 标准之前，C 语言中不允许使用可变大小的结构，因此程序员以这种方式实现它。

存储路径的字节序列从该数组的第一个元素 ( `path[0]`) 开始，但为结构分配的内存比 多`sizeof(MoveObj)`，因此数组本身的长度超过一个字节。如果数组的长度没有存储在结构中，我猜它是以零结尾的。

PCZZTSTR 可能听起来很吓人，但本质上它只是一个简单的 C 风格的`TCHAR`s 字符串，它以*两个* `'\0'`字符结尾。P（指向 a 的指针），CZ（C 风格，以零结尾） Z（双零结尾），T（[TCHAR](http://msdn.microsoft.com/en-us/library/cc842072.aspx)），STR（字符串）。

您必须将字节转换`path`为s（在旧平台`TCHAR`中是普通的 s，而在现代基于 Unicode 的 Windows 中是 s），在字符串的末尾再放一个，然后你就得到了.`char``WCHAR``\0``PCZZTSTR`