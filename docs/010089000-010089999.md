# StackOverflow 问答 10089000-10089999

# asp.net - 如何在不打开的情况下调用aspx页面

> ID：10089003
> 
> 赞同：0
> 
> 时间：2012-04-10T12:41:05.223
> 
> 标签：asp.net, html, forms, http-post

我有一个 aspx 页面，我需要调用它而不直接进入该页面。
我试图从表单中进行 POST，但它会在浏览器中打开此操作 url。

```
<form method="POST" action="http://mysite/actionpage.aspx">

        <input type="submit" value="Submit" />
        </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:43:22.077

如果在您的情况下允许使用 jQuery，您可以使用 jQuery ajax 来调用该页面

```
 $("form").submit(function(e){
     e.preventDefault();
     $.post("yoursecondpage",function(data){
       //do whatever with the response from that page
     });    
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:44:25.053

`curl`如果您在 *nix 系统上，则可以使用。

这是有关如何将数据发布到页面的参考。结果将通过命令行返回。

[执行 post 请求的 curl 命令行语法是什么？](https://superuser.com/questions/149329/what-is-the-curl-command-line-syntax-to-do-a-post-request)

以下是供参考的语法：

`curl -d "param1=value1&param2=value2" http://example.com/resource.cgi`

或者

`curl -F "fileupload=@filename.txt" http://example.com/resource.cgi`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T12:47:48.053

你可以通过ajax来实现。例如，如果您添加对 jQuery 的脚本引用，事情会变得容易得多，您可以执行以下操作：

```
<script type="text/javascript">
   function postIt()
   {
     $.post( 
       "http://mysite/actionpage.aspx" 
        , function(data)
        {
          // data was returned from the server 
          alert("data posted in the background");
        } );
   }
 </script> 
```

您通过后台完成的处理。

您的最终 HTML 将是：

```
 <form method="POST" action="http://mysite/actionpage.aspx">     

       <input type="submit" value="Submit" onclick="postIt();" />     
  </form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T12:52:36.453

I haven't tested , but looks like you are navigating to .aspx means server page, i.e. you need to use **runat="Server"** in your tags like this

# windows - windows7上cygwin下无法列出和安装xemacs包

> ID：10089011
> 
> 赞同：0
> 
> 时间：2012-04-10T12:41:35.373
> 
> 标签：windows, cygwin, xemacs

我在家用笔记本电脑上全新安装了 cygwin 和 xemacs。我正在尝试进入 xemacs 中的软件包列表，但运气不佳。

首先，我收到一条错误消息，告诉我“ftp.XXX.com 似乎不是 pty”。按照[此处](http://newsgroups.derkeiler.com/Archive/Comp/comp.emacs.xemacs/2007-09/msg00003.html)的说明，我能够告诉 efs 使用 lftp，并克服了该错误。

现在我被告知：

`Process not open for writing: #<process "*ftp yyy@ftp.xxx.org*" pid 9999 state:exit>`

知道那里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:42:48.880

问题与您使用的 ftp 有关。从消息中，我相信您正在尝试使用 Windows 自带的 ftp。它不起作用，因为本机 Windows ftp 不像 pty。

我可以建议的最佳解决方案是安装 ftp 的 Cygwin 端口。

# python - 如何将 Scrapy 与 Mysql 结合使用？

> ID：10089012
> 
> 赞同：0
> 
> 时间：2012-04-10T12:41:45.523
> 
> 标签：python, django, scrapy

我正在尝试创建一个网络爬虫，给定一些起始 url，提取所有元素并跟随它们，以便提取里面的文本和 . 我正在运行一个 Django 应用程序，给定一个查询字符串，它返回以前存储在 Mysql 数据库中的所有项目。在我看来，最好的选择是使用 Scrapy，给他一些起始 url，他可以通过简单地提取页面中的所有 url 来找到其他的 url，然后他会跟着他们提取这些页面的内容。

1.  是否可以将先前提取的数据插入到 Mysql 数据库中（因为我在 scrapy.org 上没有找到任何有关此的信息）？
2.  是否有内置函数来决定扫描的“深度”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:24:43.543

我只想阅读所有的scrapy文档，可能有更好的方法来做到这一点，但在项目管道中我刚刚在那里保存了数据。对于每个已处理的项目，检查它是否已经在您的 mysql 中，如果没有则保存它！[http://doc.scrapy.org/en/latest/topics/item-pipeline.html](http://doc.scrapy.org/en/latest/topics/item-pipeline.html)

阅读“深度”：使用[DepthMiddleware](http://readthedocs.org/docs/scrapy/en/latest/topics/spider-middleware.html?highlight=depth#module-scrapy.contrib.spidermiddleware.depth)。您可以从请求对象中读取它，例如`request.meta['depth']`.

# html - 包含 HTML 字符串的数据表

> ID：10089014
> 
> 赞同：0
> 
> 时间：2012-04-10T12:41:58.677
> 
> 标签：html, winforms, datatable

在 Winforms 应用程序中，我有一个数据表，其中一个列包含 HTML 字符串。我想在表单或 HTML 中呈现整个数据表内容，其中也应该呈现内部 HTML 内容。

我正在使用 C# 来执行此操作。我想要 HTML 的原因是数据表包含一个报告，而内部 HTML 包含指向图像的链接。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:46:07.433

我不知道您使用的是什么语言，但您需要对数据表中的 HTML 字符串进行 HTML 编码。大多数语言将包含一个将字符串作为参数的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:47:54.733

为什么要将 HTML 放在 Windows 应用程序中？你有 HTML 编辑器吗？

对于 web，正常的过程是将数据存储在一个普通的表中，然后在加载时将 HTML 放在一个`<div>`. 如果放入`runat="server"`，则`div`可以从服务器端设置 innerhtml 属性。

# ruby-on-rails - 模型属于另一个模型中的多个属性

> ID：10089020
> 
> 赞同：0
> 
> 时间：2012-04-10T12:42:30.583
> 
> 标签：ruby-on-rails, ruby, attributes, polymorphism, has-one

这可能是一个愚蠢的问题，但我在这里有点困惑：

我有一个用户模型，它有两个属性：头发和眼睛，可以有一个颜色值。

我宁愿在用户表的头发和眼睛列中将颜色作为字符串引用两次，而是将一个单独的颜色模型关联到我的用户模型，我的属性将指向该模型。

我不知道该怎么做。我需要 has_one、has_many 还是多态关联？如何设置我的用户和颜色模型？我需要为头发和眼睛创建特定模型吗？

这是我在 rails 控制台中想要的：

```
u = User.first  
u.update_attribute(:hair, Color.find_by_name("blue")  
u.update_attribute(:eyes, Color.find_by_name("green")  
u.save  

u.eyes # green  
u.hair # blue 
```

我知道这是一个非常基本的问题，但我真的需要一些帮助！

谢谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:48:08.980

用户方案应包含`hair_color_id`和`eyes_color_id`字段

```
class User < ActiveRecord::Base
  belongs_to :hair_color, class_name: "Color"
  belongs_to :eyes_color, class_name: "Color"
end 
```

所以。

```
u = User.new
u.hair_color = Color.find_or_create_by_name("blue")
u.eyes_color = Color.find_or_create_by_name("green")
u.save
...
u.hair_color.name
#=> blue 
```

# unix - 如何撤消 tar 操作？

> ID：10089022
> 
> 赞同：1
> 
> 时间：2012-04-10T12:42:32.863
> 
> 标签：unix, freebsd, tar, undo

我使用了**tar -cvf sample_directory/***并没有指定 file.tar.gz。所以文件夹中的 Makefile 是某种不可读的格式。有没有办法恢复我的 Makefile？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T15:21:14.260

The Makefile within the folder contains the output from the `tar` command, so it's not "some unreadable format", it's gzipped tar format. that tar archive won't contain your missing Makefile though.

The comments about recovering the Makefile from your backups or from your version control system are apt. This is in fact what you need to do.

If you don't have a backup or the Makefile wasn't checked in to a version control system, then there isn't a feasible way to recover its contents.

Aside from the issue of your poor lost Makefile, a piece of advice about using `tar`: never tar up a bunch of individual files inside a directory. Always tar up the directory itself instead. There is not much more annoying than untarring an archive that contains a big bunch or files instead of a single directory (which then contains files). Doing that makes a mess by littering files all over the directory that happens to be the current directory. Please be nice to whoever is going to extract your tar files (which might be yourself, later on!), follow convention, and tar up complete directories.

```
tar -czf file.tar.gz sample_directory 
```

As a bonus, if you do it that way, and you forget the output filename like this:

```
tar -czf sample_directory 
```

You won't squash anything, you'll just get an error.

# sql-server - 忽略 SSDT 部署后脚本中的错误

> ID：10089023
> 
> 赞同：1
> 
> 时间：2012-04-10T12:42:33.083
> 
> 标签：sql-server, database, visual-studio, sql-server-data-tools

使用 SSDT 发布我的数据库后，我需要填充代码列表。因此，我在项目中添加了新的部署后脚本，并从中使用 SQLCMD :r 命令调用另一个脚本，每个脚本都将数据插入到一个表中。但是如果表已经被填满，就会违反主键约束并且整个设置被破坏。

如何抑制部署后脚本中的错误？`:on error ignore`不支持SQLCMD 命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:09:42.273

这是一个很好的例子，说明如何使用 MERGE 语句而不是原始 INSERT 来实现您正在寻找的东西。

[http://blogs.msdn.com/b/ssdt/archive/2012/02/02/including-data-in-an-sql-server-database-project.aspx](http://blogs.msdn.com/b/ssdt/archive/2012/02/02/including-data-in-an-sql-server-database-project.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:16:59.397

为什么不修改脚本以避免重新插入现有值？使用公用表表达式，您会得到类似的东西：

```
;with cte as (select *, row_number() over (partition by ... order by ...) as Row from ... )
  insert into ...
    select ...
    from cte where not exists (...) and cte.Row = 1 
```

没有你的表定义就不能更明确......

# default - FB.login() 扩展权限

> ID：10089028
> 
> 赞同：2
> 
> 时间：2012-04-10T12:42:46.867
> 
> 标签：default, facebook-javascript-sdk

我正在使用以下代码从用户那里获取我的 facebook 应用程序的权限。

```
function checkLoginStatus(response) {           
            if (response.authResponse) {
                //user is already logged in and connected                   
            } else {                
                FB.login(function(response) {
                    if (response.authResponse) {
                        //user logged in                            
                    } else {
                        //user cancelled login or did not grant authorization                           
                    }
                }, {scope:'email,user_birthday,status_update,publish_stream,user_about_me'});
            }
        } 
```

我得到一个对话框，后面有“允许”和“跳过”按钮。！[在此处输入图像描述][1]

现在，即使我单击“不允许”（出现在 x 按钮上）或单击“跳过”按钮，也会将应用程序添加到我的应用程序设置中，并带有“代表我发布”（发布流）允许。这是否意味着“publish_stream”是应用程序的默认权限？

谢谢灰

# java - Java 客户端连接到 SignalR？

> ID：10089031
> 
> 赞同：32
> 
> 时间：2012-04-10T12:42:57.047
> 
> 标签：java, .net, signalr

我想从 Java 客户端连接到 SignalR 服务器。那可能吗？

有没有人写过一个java客户端来连接SignalR？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T12:09:55.533

我没有找到适用于 Android 的 SignalR 客户端，所以我开始自己开发一个。您可以在[https://github.com/erizet/SignalA](https://github.com/erizet/SignalA)查看。~~目前，它更像是一个概念验证，而不是一个已完成的库。~~它现在已更新到 SignalR 1.0 版本中使用的协议版本 1.2。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-16T19:31:25.497

微软刚刚发布了一个 java 客户端[https://github.com/SignalR/java-client](https://github.com/SignalR/java-client)甚至是一个 Android 客户端。

# mysql - 线程中的 MySQL 断言失败

> ID：10089032
> 
> 赞同：1
> 
> 时间：2012-04-10T12:42:57.760
> 
> 标签：mysql, assertion, mysql-error-2013

为什么这个查询失败？

```
SELECT
    SUB_COMMODITY,
    `VOL` AS Sales,
    `VOL_CHANGE` AS Dollar_change,
    `VOL_SHARE` AS Dollar_share,
    `VOL_SHARE_CHANGE` AS Dollar_share_change,
    `U_VOL` AS Unit_sales,
    `UVOL_CHANGE` AS Unit_change,
    `UVOL_SHARE` AS Unit_share,
    `UVOL_SHARE_CHANGE` AS Unit_share_change,
    `VOL_MKT_SHARE` AS Market_share,
    `PERIOD`
FROM `calculatedsummary`
WHERE WEEK = 52
AND PERIOD BETWEEN '2012-03-01' AND '2012-03-31'
AND MKT = '000 Total Market'
AND COMMODITY = 'CONDIMENTS SAUCES'
AND SUB_COMMODITY = 'BBQ SAUCE'
AND BRAND_FAMILY_DESC = 'Total'
AND session_id = 'ADBCDEFGHIJQLMNOPQRSTUVWXYZ' 
```

MySQL服务器日志：

*   InnoDB：文件 row0sel.c 第 2441 行中线程 2292 中的断言失败
*   InnoDB：断言失败：buf + data_len <= original_buf + buf_len
*   InnoDB：我们故意生成一个内存陷阱。
*   [InnoDB：向http://bugs.mysql.com](http://bugs.mysql.com)提交详细的错误报告。
*   InnoDB：如果你得到重复的断言失败或崩溃，甚至
*   InnoDB：mysqld启动后，可能有
*   InnoDB：在
*   InnoDB 表空间。请参阅
*   InnoDB：[http ://dev.mysql.com/doc/refman/5.5/en/forcing-innodb-recovery.html](http://dev.mysql.com/doc/refman/5.5/en/forcing-innodb-recovery.html)
*   InnoDB：关于强制恢复。
*   InnoDB：线程 1544 在文件 os0sync.c 第 474 行中停止
*   InnoDB：线程 2028 在文件 os0sync.c 第 781 行中停止

并且还会收到 #2013 错误 - 在查询期间丢失与 MySQL 服务器的连接

但如果我改变

> > **session_id = 'ADBCDEFGHIJQLMNOPQRSTUVWXYZ'**
> > 
> > 至
> > 
> > **session_id LIKE '%ADBCDEFGHIJQLMNOPQRSTUVWXYZ%'**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:44:10.523

我解决了问题，

显然，我使用的表将 50 多个字段设置为 VARCHAR 255，这太大了，因此通过将字段大小减小到准确的大小，问题得到了解决。

# javascript - 主窗口关闭时重定向弹出窗口

> ID：10089034
> 
> 赞同：1
> 
> 时间：2012-04-10T12:43:11.597
> 
> 标签：javascript, jquery, popup, popupwindow

当用户单击按钮时会打开一个弹出窗口。此弹出窗口将转到一个暂停页面，并等待用户离开网站或关闭浏览器。

然后当用户离开或关闭浏览器时，它会将弹出位置重定向到不同的站点。

我尝试了以下代码的几种变体：

```
win=window.open('google.com','popup'); //just to illustrate the "win" = my window.open().

$(window).bind('beforeunload', function() {
   window.win.location.href="http://the-new-location.com";
   //tried something like this as well:
   //win.location.href="http://the-new-location.com";
}); 
```

但没有运气。我对 javascript /jquery 并不精通，因此对于如何完成这项工作的任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:03:02.337

我找到了一个解决方案：

```
win=window.open('google.com','popup');

window.onunload = redirect;
function redirect(){
   window.win.location.href="http://the-new-url.com";
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:08:02.897

我知道你已经有一个原型工作，但如果你想要 jquery 选项：

```
var popup = window.open('http://google.com', 'popup');

$(window).unload(function() {
    if(!popup.closed) {
        popup.location.href = 'http://surveyurl.com/';
    }
}); 
```

您还应该检查是否存在 popup.close 。

# ios - 使用 CATransform3D 性能不佳

> ID：10089038
> 
> 赞同：3
> 
> 时间：2012-04-10T12:43:32.790
> 
> 标签：ios, cocoa-touch, quartz-graphics

我正在尝试使用 CALayer 3d 转换创建一个 3D 用户界面。我已经想出了实现这一点的基本技术，但是我的实时性能很差。具体来说，用户应该能够交互地“平移”界面“场景”。

在下面的代码片段中，“模型”是我要设置动画的图层。“相机”是一个 CATransform3D 矩阵，我通过应用触摸转换不断更新它。

该方法有效，但平移非常缓慢。如果我使用 CGAffineTransform 取消注释该部分，我将获得快速响应的平移 - 但我失去了平移时应该发生的视角变化。

```
- (void)didPan:(UIPanGestureRecognizer*)pan
{
    if (pan.state==UIGestureRecognizerStateChanged) 
    {
        CGPoint p = [pan translationInView:self.view.window];

        camera = CATransform3DTranslate(camera, p.y, 0, -p.x);
        model.transform = CATransform3DConcat(camera, modelView);

        // CGAffineTransform tA = self.view.transform;
        // tA = CGAffineTransformTranslate(tA, p.x, p.y);
        // self.view.transform = tA;

        [pan setTranslation:CGPointZero inView:self.view.window];
    }
} 
```

如何提高渲染性能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T06:51:29.277

好的，我自己解决了：问题是隐式动画。每个 model.transform = ... 调用都会触发一个隐式动画，导致行为非常缓慢。在创建“模型”层时，禁用转换键的隐式动画，解决了这个问题：

```
model.actions = [NSDictionary dictionaryWithObjectsAndKeys:
                   [NSNull null], @"transform",
                   nil]; 
```

现在一切都很快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T07:03:06.087

我还想出了一种更简洁的方法来应用相机变换，如下所示：

```
camera = CATransform3DTranslate(camera, p.x, p.y, 0);  
mainLayer.sublayerTransform = CATransform3DConcat(camera, CATransform3DPerspective); 
```

我的视口在哪里`mainLayer`，并且`CATransform3DPerspective`是一个常量 CATransform3D，定义如下：

```
CATransform3D const CATransform3DPerspective = {
    1.0, 0.0, 0.0, 0.0,
    0.0, 1.0, 0.0, 0.0,
    0.0, 0.0, 1.0, -1.0/500.0,
    0.0, 0.0, 0.0, 1.0
}; 
```

这样，我什至不必再禁用隐式动画了——它就可以工作了。

# javascript - jPlayer MP3 流在 IE 中不起作用

> ID：10089039
> 
> 赞同：1
> 
> 时间：2012-04-10T12:43:35.470
> 
> 标签：javascript, jquery, internet-explorer, stream, jplayer

我在 Javascript 中创建了一个 jPlayer 对象的实例，它将 MP3 流加载到播放器中，然后自动播放（因此`.jPlayer('play');`在准备函数的末尾。

这在所有浏览器中都可以正常工作，通常情况下，Internet Explorer 除外。尽管我很想放弃对它的支持，但有太多预期的访问者使用它，所以我需要想出一些解决方案。

这是我正在使用的代码 - 有什么方法可以修改它以允许它在 IE 中运行，还是我需要添加一些仅限 IE 的异常？

```
<!-- jQuery/jPlayer JS includes here -->
<script type="text/javascript">
//<![CDATA[
    $(document).ready(function(){
        $("#jquery_jplayer_1").jPlayer({
            ready: function (event) {
                $(this).jPlayer("setMedia", {
                    mp3: "http://website.com:port/;stream/1"
                }).jPlayer('play');
            },
            swfPath: "js",
            supplied: "mp3",
            solution: "flash,html",
            wmode: "window"
        });
    });
//]]>
</script>
<div id="jquery_jplayer_1" class="jp-jplayer"></div>
<div id="jp_container_1" class="jp-audio">
    <div class="jp-type-single">
        <div class="jp-no-solution">
            <span>Update Required</span>
            To play the media you will need to either update your browser to a recent version or update your <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.
        </div>
    </div>
</div>
//Custom player controls go here. 
```

# php - 如何从同一服务器上的多个站点访问共享文件

> ID：10089040
> 
> 赞同：0
> 
> 时间：2012-04-10T12:43:39.543
> 
> 标签：php, cpanel, whm

我有一个专用服务器，运行着相当多的站点。我有一个文件，我想使用 php 包含从一个站点共享给所有其他站点。我知道 URL 包括被关闭是有充分理由的，所以有什么安全的方法来共享文件吗？

即 site1 的文件位于[http://www.site.com/shared_file/share.php](http://www.site.com/shared_file/share.php)

我希望能够使用站点 2、3、4、5 等访问它

```
<?php include ("/home/site/public_html/shared_file/share.php");?> 
```

有任何想法吗？目前我收到一个权限被拒绝错误。服务器正在运行 WHM 和 CPanel（最新版​​本）。

谢谢布雷特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:51:08.260

通常像这样的东西是通过包含路径处理的。

1.  为您的文件创建特殊位置，例如`/libs/php/`
2.  把你的文件放在那里
3.  在您的 php 脚本中添加包含路径`set_include_path(get_include_path(). PATH_SEPARATOR . '/libs/php/')`；
4.  简单到`require_once`或`include_once`或`include`与该位置的相对路径

例如，如果您的文件位于`/libs/php/shared/share.php`您需要使用`require_once`shared/share.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:05:46.257

如果您可以直接访问服务器外壳，那么使用符号链接怎么样？

```
ln -s source dest 
```

（假设它是 Linux 服务器）。

# c# - 为什么服务器不使用 C# 中的套接字在本地传输中接收所有 UDP 数据包？

> ID：10089045
> 
> 赞同：3
> 
> 时间：2012-04-10T12:44:02.627
> 
> 标签：c#, multithreading, sockets, udp, packets

我有一个服务器和一个客户端应用程序，客户端向服务器发送一堆数据包。使用的协议是UDP。客户端应用程序生成一个新线程以循环发送数据包。服务器应用程序还生成一个新线程来循环等待数据包。

这两个应用程序都需要根据传输进度保持 UI 更新。[这个问题](https://stackoverflow.com/questions/10066884/how-to-properly-keep-the-ui-updated-while-transferring-packets-in-c)已经解决了如何正确保持 UI 更新。基本上，服务器和客户端应用程序都会为每次循环迭代引发一个事件（下面的代码），并且都将随着进度保持 UI 更新。像这样的东西：

```
private void EVENTHANDLER_UpdateTransferProgress(long transferedBytes) {
    receivedBytesCount += transferedBytes;
    packetCount++;
} 
```

`receivedBytesCount`每个应用程序中的计时器将使用来自和的最新信息更新 UI `packetCount`。

客户端应用程序完全没有问题，一切似乎都按预期工作，并且每次发送数据包时 UI 都会正确更新。服务器是有问题的...

传输完成后，`receivedBytesCount`将`packetCount`与发送的总字节数或客户端发送的数据包数不匹配。顺便说一下，每个数据包的大小为 512 字节。服务器应用程序正在计算调用 from`Socket.ReceiveFrom()`返回后立即收到的数据包。而且似乎由于某种原因没有收到它应该收到的所有数据包。

我知道我正在使用 UDP，它不能保证数据包实际上会到达目的地，并且不会执行重新传输，因此可能会丢失一些数据包。但我的问题是，由于我实际上是在本地测试，服务器/客户端都在同一台机器上，为什么会发生这种情况？

如果我`Thread.Sleep(1)`在客户端发送循环中放置一个（似乎转换为 15 毫秒暂停），服务器将接收所有数据包。由于我在本地执行此操作，因此客户端发送数据包的速度非常快（没有`Sleep()`调用），服务器无法跟上。这是问题所在还是可能在其他地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:59:56.010

'如果我在客户端发送循环中放置一个 Thread.Sleep(1)（这似乎转换为 15 毫秒的暂停），服务器将接收所有数据包'

套接字缓冲区已满，堆栈正在丢弃消息。UDP 没有流量控制，因此，如果您尝试在紧密循环中发送大量数据报，一些数据报将被丢弃。

使用你的 sleep() 循环，（啊！），在 UDP 之上实现某种形式的流量控制，实现某种形式的非网络流量控制，（例如，使用异步调用、缓冲池和线程间通信） ，或使用内置流量控制的不同协议。

如果你在网络堆栈上铲东西的速度比它消化的速度快，如果它偶尔抛出，你不应该感到惊讶。

# ios - iOS PDF 生成：如何在 PDF 中绘制 MkMapView？

> ID：10089046
> 
> 赞同：2
> 
> 时间：2012-04-10T12:44:07.540
> 
> 标签：ios, pdf, uikit, drawing, mapkit

我正在寻找这方面的例子，但在任何地方都找不到。

这很简单。我有一个带有一堆注释的 MkMapView。我可以很容易地打印出来。

也就是说，我还想从中生成一个 PDF 文档。内容会与打印的不同，所以我会以定制的方式绘制它。

然而，似乎缺乏关于如何做这件事的例子。我可以在我的视图中绘制几乎所有其他内容，但 MapKit 似乎遵循不同的规则。

我希望答案很简单，但缺乏例子让我怀疑它是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-10-23T05:40:45.027

使用以下代码创建图像：

```
let render = UIGraphicsImageRenderer(size: self.mapView.bounds.size)
let image = render.image { _ in
  self.mapView.drawHierarchy(in: self.mapView.bounds, afterScreenUpdates: true)
} 
```

然后您可以将此图像放入 PDF 中：

```
 let imageView = UIImageView(image: image)

    let documentDirectory = FileManager.default.urls(for: .documentDirectory, in: .userDomainMask).first!
    let outputFileURL = documentDirectory.appendingPathComponent("mapView.pdf")

    print("URL:", outputFileURL) // When running on simulator, use the given path to retrieve the PDF file

    let pdfRenderer = UIGraphicsPDFRenderer(bounds: mapView.bounds)

    do {
        try pdfRenderer.writePDF(to: outputFileURL, withActions: { context in
            context.beginPage()
            imageView.layer.render(in: context.cgContext)
        })
    } catch {
        print("Could not create PDF file: \(error)")
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:07:51.330

我尚未对其进行测试，但这就是我以编程方式截取视图的屏幕截图的方式......然后我将这些图像添加到 PDF 中：

```
UIGraphicsBeginImageContextWithOptions(self.frame.size, NO, 0.0);

[self drawRect:self.frame];

UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext(); 
```

您将替换`self`为您正在处理的任何视图。同样，我还没有对此进行测试，但基本思想是创建一个新的图形上下文，然后告诉目标视图自己绘制，然后将所有图形上下文信息捕获到 UIImage 中。

# html - Html css IE7 内联块

> ID：10089049
> 
> 赞同：0
> 
> 时间：2012-04-10T12:44:30.657
> 
> 标签：html, css, internet-explorer-7

我在 IE7 中遇到了一个简单表单的问题。

在FF和其他浏览器中，我没有问题。

```
<form class="hotline_form">
     <fieldset>
         <legend>TEST</legend>
         <div class="field">
             <label class="question">Name:</label><input name="name"  type="text">
         </div>
         <div class="field">
             <label class="question">Username:</label><input name="name"  type="text">
         </div>
     </fieldset>
</form> 
```

我的 CSS 样式：

```
form.hotline_form{
    margin:0; padding: 0;
}
form.hotline_form fieldset{
    border: 0;
    padding: 0;
    margin: 25px 0 0 0;
}
form.hotline_form fieldset legend{
    width: 100%;
    padding: 0px 0px 5px 0px;
    margin: 5px 0px 5px 0px;
    border-bottom: 1px solid #999;
}
form.hotline_form fieldset div.field label{
    display: inline-block; 
    width: 130px; 
    padding: 0pt 20px 0pt 0pt;
    margin-top:5px;
    vertical-align: top;
    zoom:1; *display: inline; _height: 15px; /* IE7 fix*/
}
form.hotline_form fieldset div.field input, form.hotline_form fieldset div.field select, form.hotline_form fieldset div.field textarea{
    width: 330px;
    margin: 5px 0px 0px 0px;
    padding: 1px 0px 1px 0px;
}
form.hotline_form div.submit{
margin: 40px 0 0;
padding: 0 0 5px;
width: 100%;
}
form.hotline_form div.submit input{
    float: right;
    padding: 0px 7px 0px 0px;
} 
```

注意我尝试过的修复

```
zoom:1; *display: inline; _height: 15px; /* IE7 fix*/ 
```

我从[http://flipc.blogspot.com/2009/02/damn-ie7-and-inline-block.html得到的](http://flipc.blogspot.com/2009/02/damn-ie7-and-inline-block.html)

在 Firefox 中它显示如下：

![在此处输入图像描述](../Images/bcfa2373bb3b4705e57a97c24930524a.png)

和 IE7：

![在此处输入图像描述](../Images/e3b850134c889ff68223828b4a70f072.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:47:41.130

我通常为 Internet Explorer 加载不同的 .CSS 文件，它使我的代码保持干净：

```
<!--[if IE 7]> <link href="ie7.css" rel="stylesheet" type="text/css"> <![endif]-->
<!--[if IE 8]> <link href="ie8.css" rel="stylesheet" type="text/css"> <![endif]--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:47:50.033

这可能是 IE 处理填充的时髦方式的一个例子吗？您的字段集是否紧紧围绕这些文本框？

[http://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug](http://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:48:22.630

在 IE 中看到很多，这是 IE 如何格式化代码告诉它的问题

最好的办法是使用 JS 来识别正在运行的浏览器，然后为 IE 构建自定义样式表。这里有一些链接可以帮助你

[http://javascript.about.com/library/blbrsdet.htm](http://javascript.about.com/library/blbrsdet.htm)

[http://www.w3schools.com/js/js_browser.asp](http://www.w3schools.com/js/js_browser.asp)

祝你好运:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T12:52:16.547

我会给 div.field overflow:hidden 然后 float:left; 标签和输入，确保在使用浮动元素的边距时给它们一个 display:inline;

无需 hack，适用于所有浏览器，您可以为标签和输入设置高度和行高。

# java - Java - 在所有线程完成后等待初始化活动

> ID：10089052
> 
> 赞同：2
> 
> 时间：2012-04-10T12:44:42.503
> 
> 标签：java

我很少有线程可以并行执行活动。只有在所有线程都完成后，我才必须继续进行后续的活动。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T12:49:33.287

您应该看一下[`join()`Thread 类中的方法](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#join%28%29)。连接可用于允许一个线程等待另一个线程完成。它也被重载以允许指定等待另一个线程完成的时间。[连接作为 Java 并发教程的一部分进行了讨论](http://docs.oracle.com/javase/tutorial/essential/concurrency/join.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T12:49:49.510

对所有线程执行 thread.join()。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T12:49:51.180

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#join](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#join) ()

您可以使用 Thread.join() 来等待线程完成。查看 Javadoc 以获取更多信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-10T12:54:21.360

我认为使用[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html)实际上比 Thread.join() 更可取，因为它应该可以更好地扩展。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-10T12:59:16.860

从概念上讲，解决您的问题的一种方法是创建一个[观察者对象](http://en.wikipedia.org/wiki/Observer_pattern#Java)，您正在运行的每个线程都将引用该对象。一旦一个线程完成，它就会通知观察者它执行了他的任务。Observer 每次收到这种通知，都会增加一个计数器，一旦计数器达到线程数，就意味着所有线程都完成了。然后观察者可以开始最后的任务。

那是为了理论。如果你想要一个内置的java类：[CountDownLatch](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html)

# android - 当联系人应用程序的用户数据被清除时应用程序重新启动

> ID：10089058
> 
> 赞同：1
> 
> 时间：2012-04-10T12:44:59.013
> 
> 标签：android, android-contacts

我的应用程序适用于标准的 android 联系人，因此我的权限如下`AndroidManifest.xml`：

```
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" /> 
```

唉，当我清除标准联系人应用程序的用户数据（设置 -> 应用程序 -> 管理应用程序 -> 全部 -> 联系人 -> 清除数据）时，我的应用程序`com.example.dialer`重新启动：

```
04-05 15:39:21.161 I/InstalledAppDetails( 9019): Clearing user data for package : com.android.providers.contacts
04-05 15:39:21.181 I/Process (  252): Sending signal. PID: 8774 SIG: 9
04-05 15:39:21.181 I/Process (  252): Sending signal. PID: 8761 SIG: 9
04-05 15:39:21.181 I/Process (  252): Sending signal. PID: 8368 SIG: 9
04-05 15:39:21.181 I/ActivityManager(  252): Force stopping package com.android.providers.contacts uid=10017
04-05 15:39:21.181 I/ActivityManager(  252): Kill com.sonyericsson.android.socialphonebook (pid 8774): provider com.android.providers.contacts.SemcContactsProvider2 in dying process android.process.acore
04-05 15:39:21.181 I/ActivityManager(  252): Kill com.example.dialer (pid 8761): provider com.android.providers.contacts.SemcCallLogProvider in dying process android.process.acore
04-05 15:39:21.231 D/dalvikvm( 9019): GC_CONCURRENT freed 1572K, 52% free 3798K/7815K, external 4576K/5694K, paused 1ms+4ms
04-05 15:39:21.251 E/InputDispatcher(  252): channel '2b440330 com.example.dialer/com.example.dialer.Dialer (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
04-05 15:39:21.251 E/InputDispatcher(  252): channel '2b440330 com.example.dialer/com.example.dialer.Dialer (server)' ~ Channel is unrecoverably broken and will be disposed!
04-05 15:39:21.251 I/WindowManager(  252): WINDOW DIED Window{2b440330 com.example.dialer/com.example.dialer.Dialer paused=false}
04-05 15:39:21.261 I/ActivityManager(  252): Process com.example.dialer (pid 8761) has died.
04-05 15:39:21.261 W/ActivityManager(  252): Scheduling restart of crashed service com.example.dialer/.ContactsService in 5000ms
04-05 15:39:21.281 I/InstalledAppDetails( 9019): Cleared user data for package : com.android.providers.contacts 
```

是否可以阻止这种情况并改为更新我的应用程序的状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:10:40.623

AFAIK, if your app contains CONTACT related permissions, means your app is associated with contact app somehow and is dependent on that.

When user cleared the contact app data, whole Contact package is restarted by the system(you can see in logs). That means all applications having CONTACTS related permissions will be restarted.

So I don't think you can stop this.

# php - 限制包含 HTML 标记的文本的输入长度

> ID：10089062
> 
> 赞同：2
> 
> 时间：2012-04-10T12:45:05.860
> 
> 标签：php, html, strlen

我有一个 php 网站，我可以在其中管理文章。在添加新文章表单上，有一个富文本框（允许 HTML 输入），我想限制字符输入计数。我在服务器端检查，所以使用[`strlen()`^(*Docs*)](http://php.net/strlen)方法。

问题`strlen`似乎是给出了一个太大的数字。我尝试使用[`html_entity_decode()`^(*Docs*)](http://php.net/html_entity_decode)从字符串中获取 html 标签，但生成的字符串长度似乎仍然是错误的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T12:48:02.697

`html_entity_decode`只解码 HTML 实体，它不会忽略 HTML 标签。尝试：

```
strlen(strip_tags(html_entity_decode($string))); 
```

或多字节等价物：

```
mb_strlen(strip_tags(html_entity_decode($string)), 'auto'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:53:59.887

您想获取字符数，但不想计算 HTML 标记。

您可以通过使用 HTML 解析器来做到这一点，例如`DOMDocument`. 您加载文档（或片段），获取代表文档内容的主体标签，获取它`nodeValue`，规范化它的空白，然后使用 UTF-8 兼容的字符计数功能：

```
$doc = new DOMDocument();
$doc->loadHTMLFile('test.html');
$body = $doc->getElementsByTagName('body')->item(0);
$text = $body->nodeValue;
$text = trim(preg_replace('/\s{1,}/u', ' ', $text));
printf("Length: %d character(s).\n", mb_strlen($text, 'utf-8')); 
```

示例输入`test.html`：

```
<body>
    <div style='float:left'><img src='../../../../includes/ph1.jpg'></div>

    <label style='width: 476px; height: 40px; position: absolute;top:100px; left: 40px; z-index: 2; background-color: rgb(255, 255, 255);; background-color: transparent' >
    <font size="4">1a. Nice to meet you!</font>
    </label>
    <img src='ENG_L1_C1_P0_1.jpg' style='width: 700px; height: 540px; position: absolute;top:140px; left: 40px; z-index: 1;' />

    <script type='text/javascript'> 

    swfobject.registerObject('FlashID');
    </script>

    <input type="image" id="nextPageBtn" src="../../../../includes/ph4.gif" style="position: absolute; top: 40px; left: 795px; ">

</body> 
```

示例输出：

```
Length: 58 character(s). 
```

规范化的文本是：

```
1a. Nice to meet you! swfobject.registerObject('FlashID'); 
```

请注意，这会计算文本大小，包括`<script>`标签内的文本等内容。

# bluetooth - Windows 8 上的蓝牙 SPP 设备

> ID：10089064
> 
> 赞同：2
> 
> 时间：2012-04-10T12:45:16.073
> 
> 标签：bluetooth, microsoft-metro, spp

我一直在努力研究如何与在 Windows 8 Metro 风格应用程序中使用串行端口配置文件 (SPP) 的蓝牙设备进行通信。我开始得出结论，目前不可能，但想知道是否有其他人能够让这个工作，或者能想到任何尝试。

似乎没有可用的 API 来执行此操作，但是否可以连接到较低级别的设备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:01:25.370

根据 Microsoft 代表的说法，这在 Metro 中是不可能的：

[http://social.msdn.microsoft.com/Forums/en-US/tailoringappsfordevices/thread/0cb2a6c1-d1f1-4872-aa32-709acd90b94d](http://social.msdn.microsoft.com/Forums/en-US/tailoringappsfordevices/thread/0cb2a6c1-d1f1-4872-aa32-709acd90b94d)

应该可以编写自定义驱动程序来完成此操作，但这比编写 Metro 应用程序更具挑战性。

# windows - Windows 7 远程桌面连接与 FTP 服务冲突？

> ID：10089067
> 
> 赞同：0
> 
> 时间：2012-04-10T12:45:36.700
> 
> 标签：windows

今天我使用 Windows 7 远程桌面连接连接到另一台计算机，我刚刚在这台计算机上设置了 IIS FTP 服务器。然后我更改了 windows 7 防火墙的入站规则以允许 FTP 服务。完成后，我失去了与计算机的连接，无法使用远程桌面连接连接到它。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:34:09.427

我知道基于 OnlineVNC 的另一个解决方案。OnlineVNC 是一个内嵌 FTP 服务器的远程桌面，互不冲突。非常容易设置和快速。也许它会为你提供充分的帮助。 [http://www.onlinevnc.com/support/configuring-ftp-based-file-transfer.html](http://www.onlinevnc.com/support/configuring-ftp-based-file-transfer.html)

# model-view-controller - 如何使用 Activator 为 datrow 动态创建实例

> ID：10089068
> 
> 赞同：0
> 
> 时间：2012-04-10T12:45:39.283
> 
> 标签：model-view-controller, generics, reflection, datarow, activator

我想使用这样的激活器为数据行创建实例

```
 dataItem = Activator.CreateInstance<T>(); 
```

当我使用此代码时，我遇到了异常

没有为此对象定义无参数构造函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:54:29.337

[DataRow 的唯一构造函数是 internal](http://msdn.microsoft.com/en-us/library/system.data.datarow.datarow.aspx)。通过调用[DataTable.NewRow()](http://msdn.microsoft.com/en-us/library/system.data.datatable.newrow.aspx)创建 DataRow 。

# php - 告诉我用户名已经存在的声明

> ID：10089075
> 
> 赞同：1
> 
> 时间：2012-04-10T12:46:06.540
> 
> 标签：php, mysqli, prepared-statement

下面的查询并没有告诉我用户名已经存在于数据库中，即使它确实存在。

我正在尝试学习如何绑定参数等，但我认为自己在某个地方感到困惑。

```
<?php
    // Include config.php
    require_once("".$_SERVER['DOCUMENT_ROOT']."/admin/config.php");

    // top.inc.php
    require_once($top_inc);
?>

<!-- Meta start -->
<title></title>
<meta name="description" content="" />
<meta name="keywords" content="" />
<!-- Meta end -->

<!-- CONTENT START -->

<?php
    // sidebar.inc.php
    require_once($sidebar_inc);

    // main.inc.php
    require_once($main_inc);

    // check if form has been submitted
    if($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['submit'])){

        // initialize form errors array
        $error    = array();

        // fetch form data
        $username = $_POST['username'];
        $email    = $_POST['email'];
        $password = $_POST['password'];

        // validate form data
        if(!preg_match(constant("USERNAME_REGEX"), $username)){
            $error[] = "Please enter a username. Use 3 to 15 digits and letters";
        }
        if(!preg_match(constant('PASSWORD_REGEX'), $password)){
            $error[] = "Please enter a password. Minimum of 6 characters required";
        }
        if(!empty($password) && $password == $username){
            $error[] = "Your pasword cannot be you username for security reasons";
        }
        if(empty($email)){
            $error[] = "Please enter your email address";
        }
        if(!empty($email) && !filter_var($email, FILTER_VALIDATE_EMAIL)){
            $error[] = "Your email address is not valid";
        }

        // connect to database
        sql_con();

        // Get instance of statement
        $stmt = mysqli_stmt_init($connect);

        // sql statement
        $UserExists = "
                    SELECT
                        `user_login`
                    FROM
                        `users`
                    WHERE
                        `user_login` = ? ";

        // prepare sql statement for execution
        if (mysqli_stmt_prepare($stmt, $UserExists)) {

            // bind parameters [s for string]
            mysqli_stmt_bind_param($stmt, "s", $username) or die(mysqli_stmt_error());
            // execute statement
            mysqli_stmt_execute($stmt) or die(mysqli_stmt_error());
            // check if username is found
            if(mysqli_stmt_num_rows($stmt) > 0 ){
                $error[] = 'The username you have choose has already been taken';
            }
        }

        // If errors found display errors
        if(!empty($error)){
            foreach($error as $msg){
                echo "$msg <br />";
            }
    } else {
            echo 'My Query Worked!';
        }
    }
    // signup.tpl template location
    $tpl = 'inc/tpl/signup.tpl';
    // load signup form template
    PageContentTemplate($tpl);
?>

<!-- CONTENT FINISH -->

<?php
    // footer.inc.php
    require_once($footer_inc);
?> 
```

基本上它只是回显“我的查询有效”，即使它应该说用户名已经被使用，我在表单上输入详细信息和我知道已被使用的用户名并提交表单，我知道我正在做某事可能真的很傻，但对 mysqli 和绑定参数等很陌生。即使我看过一些例子，我也不知道我哪里出错了。

老实说，我不确定这是否是程序风格的最佳方式，我不知道 PDO/OOP，我改变的主要原因是通过在查询中使用占位符等来避免 SQL 注入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:45:41.997

我现在看到了。您之前没有调用`mysqli_stmt_store_result()`它`mysqli_stmt_num_rows()`不会报告正确的值。

```
 // prepare sql statement for execution
    if (mysqli_stmt_prepare($stmt, $UserExists)) {

        // bind parameters [s for string]
        mysqli_stmt_bind_param($stmt, "s", $username) or die(mysqli_stmt_error());
        // execute statement
        mysqli_stmt_execute($stmt) or die(mysqli_stmt_error());

        // check if username is found
        // FIRST : store the store the result set so num_rows gets the right value
        mysqli_stmt_store_result($stmt);

        // Now this should be 1 instead of 0
        if(mysqli_stmt_num_rows($stmt) > 0 ){
            $error[] = 'The username you have choose has already been taken';
        }
    } 
```

[从文档：](http://www.php.net/manual/mysqli-stmt.num-rows.php)

> 返回结果集中的行数。mysqli_stmt_num_rows() 的使用取决于您是否使用 mysqli_stmt_store_result() 来缓冲语句句柄中的整个结果集。
> 
> 如果使用 mysqli_stmt_store_result()，mysqli_stmt_num_rows() 可能会立即被调用。

# performance - SOLR 问题 - 搜索查询过多

> ID：10089081
> 
> 赞同：0
> 
> 时间：2012-04-10T12:46:38.433
> 
> 标签：performance, solr

我们有一个使用 SOLR 进行搜索的 PHP Web 应用程序。APP 使用 CURL 连接到 SOLR 服务器，并与数千个预定义的关键字循环运行。这将在给定时间为 SOLR 创建数千个不同的搜索查询。

我的问题是，当单个用户登录应用程序时，一切都按预期工作。当有多个用户尝试运行应用程序时，我们会从服务器获取此响应。

> 连接 xxx.xxx.xxx.xxx 失败：无法分配请求的地址无法连接到 xxx.xxx.xxx.xxx：无法分配请求的地址失败

我们的假设是，SOLR 服务器无法在给定时间处理这么多的搜索查询。如果是这样，克服这个问题的解决方案是什么？SOLR中是否有类似keep-alive的设置？

任何帮助将不胜感激。

谢谢，

阿伦小号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:43:37.627

对关键字的一个子集进行 OR 运算并只执行一个查询呢？
然后，如果没有找到，请尝试使用下一个关键字子集？

对于这种特殊情况，我认为您需要提高应用程序性能，而不是 SOLR，即使您需要做一些诡计。

> SOLR中是否有最大连接限制？

这在很大程度上取决于您使用的硬件和操作系统，可能还取决于您使用的 servlet 容器。

如果您需要 SOLR 的更多性能，您可能需要调整架构（您可以在此处发布以获得更多帮助）、垂直销售（ram 目录或 SSD）或考虑主从设置。

# jquery - 正则表达式未终止的字符串常量错误Javascript

> ID：10089083
> 
> 赞同：0
> 
> 时间：2012-04-10T12:46:49.433
> 
> 标签：jquery, regex, validation

我使用了这个正则表达式 ^(?=. *[a-zA-Z].* )[a-zA-Z0-9 ?.! *@#'\s]{2,200}$。它应该包含特殊的 (!* @#) 字母数字字符，并且最多允许 200 个字符。但是在这里我得到了像未终止的字符串常量这样的错误..在谷歌我试过......它是说我们需要用 \ 替换像 $,* 这样的元字符我做不到..任何人都可以帮助我

我的代码是这样的

```
$.validationEngineLanguage = {
    newLang: function(){
        $.validationEngineLanguage.allRules = {
            "required": { // Add your regex rules here, you can take telephone as an   example
                "regex": "none",
                "alertText": "This field is required",
                "alertTextCheckboxMultiple": "* Please select an option",
                "alertTextCheckboxe": "* This checkbox is required",
                "alertTextDateRange": "* Both date range fields are required"
            },
            ---
             ----
            "passwordval": {
            "regex":^(?=.*[a-zA-Z].*)[a-zA-Z0-9 ?.!*@#'\s]{2,200}$,
            "alertText": "* Not a valid password"
            },
            };

    }
};

$.validationEngineLanguage.newLang(); 
```

我在“passwordval”中遇到问题：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:58:02.490

```
var reExample = new RegExp("^(?=.[a-zA-Z].)[a-zA-Z0-9 ?.!@#'\s]{2,200}$"); 
```

注意“”

```
reExample.test("dfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdfdfsfsdfsdf"); 
```

以上产生错误

```
reExample.test("dfsfsdfsdfdfsfsd"); 
```

这产生了真

（假设您使用的是 javascript）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:08:54.083

您的正则表达式中似乎有错误

*   更改此行

    ```
    "regex" : ^(?=.*[a-zA-Z].*)[a-zA-Z0-9 ?.!*@#'\s]{2,200}$, 
    ```

    到

    ```
    "regex" : "^(?=.*[a-zA-Z].*)[a-zA-Z0-9 ?.!*@#'\\s]{2,200}$", 
    ```

注意

```
The double quote around the regular expression and the extra \ before \s 
```

# mysql - MySQL“不同”加入超级慢

> ID：10089084
> 
> 赞同：1
> 
> 时间：2012-04-10T12:46:54.077
> 
> 标签：mysql, join, distinct

我有以下查询，它给了我正确的结果。但是超级慢。让它变慢的是

```
AND a.id IN (SELECT id FROM st_address GROUP BY element_id) 
```

部分。查询应该显示我们从哪些国家获得了多少订单。
一个人可以有多个地址，但在这种情况下，我们只想要一个。
否则它将多次计算订单。也许有更好的方法来实现这一目标？一个人或某事的独特连接？

```
SELECT cou.title_en, COUNT(co.id), SUM(co.price) AS amount
FROM customer_order co
JOIN st_person p ON (co.person_id = p.id)
JOIN st_address a ON (co.person_id = a.element_id AND a.element_type_id = 1)
JOIN st_country cou ON (a.country_id = cou.id) 
WHERE order_status_id != 7 AND a.id IN (SELECT id FROM st_address GROUP BY element_id)
GROUP BY cou.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:18:46.910

您是否尝试将 IN 替换为 EXISTS？

```
AND EXISTS (SELECT 1 FROM st_address b WHERE a.id = b.id) 
```

一旦找到与条件匹配的第一行，EXISTS 部分就应该停止子查询。我已经阅读了关于这是否真的发生的相互矛盾的评论，因此您可能会在其中设置限制 1 以查看是否有任何收益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:27:48.213

我找到了一个更快的解决方案。诀窍是与子查询连接：

```
JOIN (SELECT element_id, country_id, id FROM st_address WHERE element_type_id = 1 GROUP BY 
```

这是完整的查询：

```
SELECT cou.title_en, COUNT(o.id), SUM(o.price) AS amount 
FROM customer_order o
JOIN (SELECT element_id, country_id, id FROM st_address WHERE element_type_id = 1 GROUP BY element_id) AS a ON (o.person_id = a.element_id)
JOIN st_country cou ON (a.country_id = cou.id) 
WHERE o.order_status_id != 7 
GROUP BY cou.id 
```

# java - 针对 XSD 验证 XML 顺序的框架

> ID：10089089
> 
> 赞同：0
> 
> 时间：2012-04-10T12:47:01.867
> 
> 标签：java, xml, xsd, xml-validation

我正在寻找一个 Java 框架，它可以针对 XSD 验证 XML 中元素的顺序。我已经尝试过 JDK 5 的 javax.xml.Validate 和热门文章[http://www.ibm.com/developerworks/xml/library/x-javaxmlvalidapi/index.html](http://www.ibm.com/developerworks/xml/library/x-javaxmlvalidapi/index.html) 但都没有给我具体的结果。这些实现方式之一或另一个告诉我 xml 无效，但无法为我提供具体的错误描述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:55:21.437

也许看看这个页面： [https ://www.java-tips.org/java-ee-tips-100042/175-java-architecture-for-xml-binding/1833-what-is-new-in- jaxb-20.html](https://www.java-tips.org/java-ee-tips-100042/175-java-architecture-for-xml-binding/1833-what-is-new-in-jaxb-20.html)

您可以使用 JAXB 在 XML 中完成几乎所有操作

# mysql - Mysql 子查询无法识别父查询中的字段

> ID：10089090
> 
> 赞同：0
> 
> 时间：2012-04-10T12:47:03.390
> 
> 标签：mysql, subquery

我在另一个子查询中有一个带有子查询的查询。因此，底层子查询无法识别顶层子查询中的字段。我该如何解决？

```
SELECT codigo, descricao 
FROM statusplano sp, previsao pr
WHERE sp.codigo = pr.status
AND pr.plano = 13
AND sp.codigo = (SELECT codigo FROM statusplano sp1 WHERE ordem = (SELECT max(sp2.ordem) FROM statusplano sp2 WHERE sp2.codigo = pr.codigo AND pr.dataPrevista <= now())) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:05:33.187

尝试这个

```
SELECT
codigo,
descricao
FROM sp2,
previsao pr
WHERE sp.codigo = pr.status
AND pr.plano = 13
AND sp.codigo = (SELECT
                   codigo
                 FROM sp2
                 WHERE ordem = (SELECT
                                  max(sp2.ordem)
                                FROM statusplano sp2
                                WHERE sp2.codigo = pr.codigo
                                    AND pr.dataPrevista <= now())) 
```

# python - 将压缩的 csv 导入 mongo 集合时优化 python 代码性能

> ID：10089091
> 
> 赞同：2
> 
> 时间：2012-04-10T12:47:07.280
> 
> 标签：python, mongodb

我需要将压缩的 csv 导入 mongo 集合，但有一个问题 - 每条记录都包含太平洋时间的时间戳，必须将其转换为与在同一记录中找到的 (longitude,latitude) 对相对应的本地时间。

代码如下所示：

```
def read_csv_zip(path, timezones):
  with ZipFile(path) as z, z.open(z.namelist()[0]) as input:
    csv_rows = csv.reader(input)
    header = csv_rows.next()
    check,converters = get_aux_stuff(header)
    for csv_row in csv_rows:
      if check(csv_row):
        row = {
          converter[0]:converter[1](value) 
          for converter, value in zip(converters, csv_row) 
          if allow_field(converter)
        }
        ts = row['ts']
        lng, lat = row['loc']
        found_tz_entry = timezones.find_one(SON({'loc': {'$within': {'$box': [[lng-tz_lookup_radius, lat-tz_lookup_radius],[lng+tz_lookup_radius, lat+tz_lookup_radius]]}}}))
        if found_tz_entry:
          tz_name = found_tz_entry['tz']
          local_ts = ts.astimezone(timezone(tz_name)).replace(tzinfo=None)
          row['tz'] = tz_name
        else:
          local_ts = (ts.astimezone(utc) + timedelta(hours = int(lng/15))).replace(tzinfo = None)
        row['local_ts'] = local_ts
        yield row

def insert_documents(collection, source, batch_size):
  while True:
    items = list(itertools.islice(source, batch_size))
    if len(items) == 0:
      break;
    try:
      collection.insert(items)
    except:
      for item in items:
        try:
          collection.insert(item)
        except Exception as exc:
          print("Failed to insert record {0} - {1}".format(item['_id'], exc))

def main(zip_path):
  with Connection() as connection:
    data = connection.mydb.data
    timezones = connection.timezones.data
    insert_documents(data, read_csv_zip(zip_path, timezones), 1000) 
```

代码如下：

1.  检查从 csv 读取的每条记录并将其转换为字典，其中可能会跳过某些字段，重命名某些标题（从出现在 csv 标题中的标题），可能会转换某些值（转换为日期时间、整数、浮点数。 ETC ...）
2.  对于从 csv 读取的每条记录，都会在**timezones**集合中进行查找，以将记录位置映射到相应的时区。如果映射成功 - 该时区用于将记录时间戳（太平洋时间）转换为相应的本地时间戳。如果没有找到映射 - 计算一个粗略的近似值。

当然，**时区**集合已被适当索引 - 调用`explain()`确认它。

这个过程很慢。自然，必须查询每条记录的**时区集合会降低性能。**我正在寻找有关如何改进它的建议。

谢谢。

**编辑**

timezones 集合包含 8176040 条记录，每条记录包含四个值：

```
> db.data.findOne()
{ "_id" : 3038814, "loc" : [ 1.48333, 42.5 ], "tz" : "Europe/Andorra" } 
```

**编辑2**

好的，我已经编译了[http://toblerity.github.com/rtree/](http://toblerity.github.com/rtree/)的发布版本并配置了 rtree 包。然后，我创建了与我的时区集合相对应的 rtree dat/idx 文件对。所以，`collection.find_one`我没有打电话，而是打电话`index.intersection`。令人惊讶的是，不仅没有任何改善，而且现在效果更慢了！可能是 rtree 可以微调以将整个 dat/idx 对加载到 RAM (704M) 中，但我不知道该怎么做。在那之前，它不是替代品。

一般来说，我认为解决方案应该涉及任务的并行化。

**编辑3**

使用时的配置文件输出`collection.find_one`：

```
>>> p.sort_stats('cumulative').print_stats(10)
Tue Apr 10 14:28:39 2012    ImportDataIntoMongo.profile

         64549590 function calls (64549180 primitive calls) in 1231.257 seconds

   Ordered by: cumulative time
   List reduced from 730 to 10 due to restriction <10>

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.012    0.012 1231.257 1231.257 ImportDataIntoMongo.py:1(<module>)
        1    0.001    0.001 1230.959 1230.959 ImportDataIntoMongo.py:187(main)
        1  853.558  853.558  853.558  853.558 {raw_input}
        1    0.598    0.598  370.510  370.510 ImportDataIntoMongo.py:165(insert_documents)
   343407    9.965    0.000  359.034    0.001 ImportDataIntoMongo.py:137(read_csv_zip)
   343408    2.927    0.000  287.035    0.001 c:\python27\lib\site-packages\pymongo\collection.py:489(find_one)
   343408    1.842    0.000  274.803    0.001 c:\python27\lib\site-packages\pymongo\cursor.py:699(next)
   343408    2.542    0.000  271.212    0.001 c:\python27\lib\site-packages\pymongo\cursor.py:644(_refresh)
   343408    4.512    0.000  253.673    0.001 c:\python27\lib\site-packages\pymongo\cursor.py:605(__send_message)
   343408    0.971    0.000  242.078    0.001 c:\python27\lib\site-packages\pymongo\connection.py:871(_send_message_with_response) 
```

使用时的配置文件输出`index.intersection`：

```
>>> p.sort_stats('cumulative').print_stats(10)
Wed Apr 11 16:21:31 2012    ImportDataIntoMongo.profile

         41542960 function calls (41542536 primitive calls) in 2889.164 seconds

   Ordered by: cumulative time
   List reduced from 778 to 10 due to restriction <10>

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.028    0.028 2889.164 2889.164 ImportDataIntoMongo.py:1(<module>)
        1    0.017    0.017 2888.679 2888.679 ImportDataIntoMongo.py:202(main)
        1 2365.526 2365.526 2365.526 2365.526 {raw_input}
        1    0.766    0.766  502.817  502.817 ImportDataIntoMongo.py:180(insert_documents)
   343407    9.147    0.000  491.433    0.001 ImportDataIntoMongo.py:152(read_csv_zip)
   343406    0.571    0.000  391.394    0.001 c:\python27\lib\site-packages\rtree-0.7.0-py2.7.egg\rtree\index.py:384(intersection)
   343406  379.957    0.001  390.824    0.001 c:\python27\lib\site-packages\rtree-0.7.0-py2.7.egg\rtree\index.py:435(_intersection_obj)
   686513   22.616    0.000   38.705    0.000 c:\python27\lib\site-packages\rtree-0.7.0-py2.7.egg\rtree\index.py:451(_get_objects)
   343406    6.134    0.000   33.326    0.000 ImportDataIntoMongo.py:162(<dictcomp>)
      346    0.396    0.001   30.665    0.089 c:\python27\lib\site-packages\pymongo\collection.py:240(insert) 
```

**编辑4**

我已经并行化了代码，但结果仍然不是很令人鼓舞。我相信它可以做得更好。有关详细信息，请参阅我自己对这个问题的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:21:25.220

好的，我已经并行化了代码，但它的运行速度只有两倍，这是我的解决方案：

```
write_batch_size=100
read_batch_size=100
count_parsed_csv_consumers=15
count_data_records_consumers=1
parsed_csv_queue = Queue()
data_record_queue = Queue()

def get_parsed_csv_consumer(converters, timezones):
  def do_work(csv_row):
    row = {
      converter[0]:converter[1](value) 
      for converter, value in zip(converters, csv_row) 
      if allow_field(converter)
    }
    ts = row['ts']
    lng, lat = row['loc']
    found_tz_entry = timezones.find_one(SON({'loc': {'$within': {'$box': [[lng-tz_lookup_radius, lat-tz_lookup_radius],[lng+tz_lookup_radius, lat+tz_lookup_radius]]}}}))
    if found_tz_entry:
      tz_name = found_tz_entry['tz']
      local_ts = ts.astimezone(timezone(tz_name)).replace(tzinfo=None)
      row['tz'] = tz_name
    else:
      local_ts = (ts.astimezone(utc) + timedelta(hours = int(lng/15))).replace(tzinfo = None)
    row['local_ts'] = local_ts
    return row
  def worker():
    while True:
      csv_rows = parsed_csv_queue.get();
      try:
        rows=[]
        for csv_row in csv_rows:
          rows.append(do_work(csv_row))
        data_record_queue.put_nowait(rows)
      except Exception as exc:
        print(exc)
      parsed_csv_queue.task_done()
  return worker

def get_data_record_consumer(collection):
  items = []
  def do_work(row):
    items.append(row)
    if len(items) == write_batch_size:
      persist_items()
  def persist_items():
    try:
      collection.insert(items)
    except:
      for item in items:
        try:
          collection.insert(item)
        except Exception as exc:
          print("Failed to insert record {0} - {1}".format(item['_id'], exc))
    del items[:]
  def data_record_consumer():
    collection    # explicit capture
    while True:
      rows = data_record_queue.get()
      try:
        if rows:
          for row in rows:
            do_work(row)
        elif items:
          persist_items()
      except Exception as exc:
        print(exc)
      data_record_queue.task_done()
  return data_record_consumer

def import_csv_zip_to_collection(path, timezones, collection):
  def get_threads(count, target, name):
    acc = []
    for i in range(count):
      x = Thread(target=target, name=name + " " + str(i))
      x.daemon = True
      x.start()
      acc.append(x)
    return acc

  with ZipFile(path) as z, z.open(z.namelist()[0]) as input:
    csv_rows = csv.reader(input)
    header = next(csv_rows)
    check,converters = get_aux_stuff(header)

    parsed_csv_consumer_threads = get_threads(count_parsed_csv_consumers, get_parsed_csv_consumer(converters, timezones), "parsed csv consumer")
    data_record_consumer_threads = get_threads(count_data_records_consumers, get_data_record_consumer(collection), "data record consumer")

    read_batch = []
    for csv_row in csv_rows:
      if check(csv_row):
        read_batch.append(csv_row)
        if len(read_batch) == read_batch_size:
          parsed_csv_queue.put_nowait(read_batch)
          read_batch = []
    if len(read_batch) > 0:
      parsed_csv_queue.put_nowait(read_batch)
      read_batch = []
    parsed_csv_queue.join()
    data_record_queue.join()
    # data record consumers may have some items cached. All of them must flush their caches now.
    # we do it by enqueing a special item, which when fetched causes the respective consumer to
    # terminate its operation
    for i in range(len(data_record_consumer_threads)):
      data_record_queue.put_nowait(None)
    data_record_queue.join() 
```

过程是这样的：

1.  解析的 csv 行被批处理（批处理的大小由 决定`read_batch_size`）
2.  当一批已解析的 csv 行已满时，它会被放入`parsed_csv_queue`以供来自的多个消费者使用`parsed_csv_consumer_threads`
3.  解析后的 csv 行消费者很慢，因为它必须使用 mongo 查询 () 来查找时区，因此准确地说`timezones.find_one`，其中有很多。`count_parsed_csv_consumers`
4.  已解析的 csv 消费者将其输入转换为数据记录。转换后的记录是批处理的（保留批处理大小，即`read_batch_size`），并且一旦批处理已满，则将其放入另一个队列中 -`data_record_queue`
5.  数据记录消费者从中获取一批数据记录`data_record_queue`并将它们插入到目标 mongo 集合中。
6.  数据记录消费者比解析的 csv 记录消费者快得多，因此它们的数量要少得多，事实上，我只使用了一个，但可以通过`count_data_records_consumers`常量更改它。

在第一个版本中，我将单个记录放入队列中，但分析显示这`Queue.put_nowait`非常昂贵，因此我被迫通过批处理记录来减少放入的数量。

无论如何，性能是两倍快，但我希望有一个更好的结果。以下是分析结果：

```
>>> p.sort_stats('cumulative').print_stats(10)
Fri Apr 13 13:31:17 2012    ImportOoklaIntoMongo.profile

         3782711 function calls (3782429 primitive calls) in 310.209 seconds

   Ordered by: cumulative time
   List reduced from 737 to 10 due to restriction <10>

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.016    0.016  310.209  310.209 .\ImportOoklaIntoMongo.py:1(<module>)
        1    0.004    0.004  309.833  309.833 .\ImportOoklaIntoMongo.py:272(main)
        1   17.829   17.829  220.432  220.432 .\ImportOoklaIntoMongo.py:225(import_csv_zip_to_collection)
   386081   28.049    0.000  135.297    0.000 c:\python27\lib\zipfile.py:508(readline)
   107008    7.588    0.000  102.938    0.001 c:\python27\lib\zipfile.py:570(read)
   107008   50.716    0.000   95.302    0.001 c:\python27\lib\zipfile.py:598(read1)
    71240    3.820    0.000   95.292    0.001 c:\python27\lib\zipfile.py:558(peek)
        1   89.382   89.382   89.382   89.382 {raw_input}
   386079   43.564    0.000   54.706    0.000 .\ImportOoklaIntoMongo.py:103(check)
    35767   40.286    0.001   40.286    0.001 {built-in method decompress} 
```

我对分析器输出有点怀疑，因为它似乎只显示主线程结果。确实——[如何在 Python 中分析多线程程序？](https://stackoverflow.com/questions/653419/how-can-i-profile-a-multithread-program-in-python)

# java - GWT + symfony2，我疯了吗？

> ID：10089093
> 
> 赞同：0
> 
> 时间：2012-04-10T12:47:08.377
> 
> 标签：java, jquery, gwt, symfony, seo

有没有人有集成 GWT 和 Symfony2 的经验？目前我正在使用前端是 JQuery + HTML 的 Symfony2。尽管已经使用了 JQuery，但编写 Javascript 让我发疯。

我想知道有没有成功的案例？GWT 可以为我生成 javascript。我只需要编写类型安全和面向对象的 Java。

但是，还有另一个问题，在 GWT 的正常实践中，HTML 元素都是动态创建的。因此，当搜索引擎正在抓取一个页面时，它没有可以抓取的元素。这是影响SEO排名的严重问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:59:29.100

GWT 是一个强大的工具，您可以用 java 编写代码，GWT 将生成跨浏览器支持的 JavaScript。

动态页面是动态创建的。这些页面对于访问该网站的用户来说效果很好，但对于搜索引擎爬虫来说却不是很好。

为什么？因为在用户选择生成它们的变量之前，动态生成的页面实际上并不存在。搜索引擎蜘蛛无法选择变量，因此不会生成页面并且无法编入索引。有不同的策略可供参考检查[动态网站SEO技巧](http://www.sitepoint.com/dynamic-site-seo-tips-hints/)

# google-app-engine - 针对某些请求关闭 AppEngine (Java) 会话

> ID：10089096
> 
> 赞同：3
> 
> 时间：2012-04-10T12:47:17.273
> 
> 标签：google-app-engine, session

我们在 GAE/J 应用程序中使用[会话](https://developers.google.com/appengine/docs/java/config/appconfig#Enabling_Sessions)。上周末，我们的数据存储写入出现大幅峰值，这似乎是由于创建了大量 _ah_SESSION 实体（每分钟大约 100-200 个）造成的。正如我们所知，有一个流氓任务队列创建它们，因为当我们清除队列时它们停止了。该任务是我们每小时运行的[映射器进程的一部分。](http://code.google.com/p/appengine-mapreduce/)

我们不需要该每小时映射器中的会话（或者实际上在我们的任何任务队列或 cron 作业或许多其他请求中）。有没有办法禁用为选定的 URL 创建会话？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T14:20:16.410

不幸的是，这是无法做到的。

当您有一个非浏览器客户端（通过 REST 或 mapreduce 作业的设备）时，这尤其令人讨厌，其中每个请求都会`_ah_SESSION`在数据库中生成一个新实体。

避免这种情况的唯一方法是编写自己的会话处理程序：例如，设置/检查 cookie 并将其设置为忽略某些路径的 servlet 过滤器。

编辑：

我刚刚意识到可能还有*另*一种方法：确保您的客户端（mapreduce 作业）设置一个具有正确名称的虚拟 cookie。GAE 使用`ACSID`在生产和`dev_appserver_login`开发服务器上命名的 cookie。只需始终使用相同的 cookie 值，因此所有请求都将被视为一个用户/会话。

查找/保存会话对象仍然会有开销，但至少它不会创建无数`_ah_SESSION`实体。

# apache - .htaccess 中的多个 mod_rewrite 规则

> ID：10089097
> 
> 赞同：4
> 
> 时间：2012-04-10T12:47:20.380
> 
> 标签：apache, .htaccess, mod-rewrite

我很难让几个 mod_rewrite 规则在我的 .htaccess 文件中一起工作。在整个网站中，我想删除“www”。来自所有 URL。我在文档根目录使用以下内容：

```
Options +FollowSymLinks
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301] 
```

然后，在一个文件夹“/help”中，我想做 2 次重写：

1.  将 domain.com/help/1 更改**为**domain.com/index.php?question=1
2.  将 domain.com/help/category/example 更改**为**domain.com/index.php?category=example

所以在 domain.com/help 我有以下内容：

```
Options +FollowSymLinks
RewriteRule ^([0-9]+)/?$ index.php?question=$1 [NC,L]
RewriteRule ^category/([^/\.]+)/?$ index.php?category=$1 [NC,L] 
```

以上 2 个 .htaccess 文件适用于：
www.domain.com**到**domain.com
domain.com/help/1**到**domain.com/index.php?question=1
domain.com/help/category/example**到**domain.com /index.php?category=example

但是，当我需要结合 2 次重写以删除“www”时，这不起作用。并将子文件夹重写为 url 变量。例如：
www.domain.com/help/1**到**domain.com/index.php?question=1
给出 500 错误。

我哪里做错了？而且，这最好与 2 个 .htaccess 文件一起使用，还是可以/应该将 2 个文件合并到文档根目录下的 1 个 .htaccess 文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T04:33:04.193

看起来正在发生的事情是**/help**文件夹中的 .htaccess 文件中的规则正在应用，因为您在该文件夹中请求某些内容，因此不会应用父文件夹的规则。`RewriteOptions Inherit`如果您在**/help**文件夹的 .htaccess中添加一个，则可以传递您的父规则：

```
Options +FollowSymLinks
RewriteOptions Inherit
RewriteRule ^([0-9]+)/?$ index.php?question=$1 [NC,L]
RewriteRule ^category/([^/\.]+)/?$ index.php?category=$1 [NC,L] 
```

但是，继承的规则可能不会按照您期望的顺序应用。例如，如果您请求[http://www.domain.com/help/1/](http://www.domain.com/help/1/)您最终会被重定向到[http://domain.com/index.php?question=1](http://domain.com/index.php?question=1)这可能不是您想要的如果您试图通过隐藏查询字符串来制作对 SEO 友好的 URL。

您最好的选择可能是将**/help**文件夹中的内容移动到文档根目录中的内容，以便您可以控制应用规则的顺序：

```
Options +FollowSymLinks

RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301]

RewriteRule ^help/([0-9]+)/?$ /index.php?question=$1 [NC,L]
RewriteRule ^help/category/([^/\.]+)/?$ /index.php?category=$1 [NC,L] 
```

*这样可以确保首先*重定向到非 www 域，然后应用**/help**规则。因此，当您访问[http://www.domain.com/help/1/](http://www.domain.com/help/1/)时，您首先会被重定向到[http://domain.com/help/1/](http://domain.com/help/1/)，然后会应用帮助规则并将 URI 重写为`/index.php?question=1`.

# android - 无法启动应用程序（小部件行为）

> ID：10089099
> 
> 赞同：0
> 
> 时间：2012-04-10T12:47:36.213
> 
> 标签：android, android-manifest

我用接收器制作了自己的短信应用程序。

现在模拟器在通过 eclipse 运行时不会启动应用程序。在我的手机上，安装后我无法按打开，并且 App Drawer 不显示我的应用程序。

行为就像一个小部件

我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.korn.websms"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

        <activity
            android:name=".WebSMSActivity"
            android:label="@string/app_name" >

        </activity>
        <receiver android:name=".SmsReceiver" android:exported="true" > 
      <intent-filter android:priority="999"> 
    <action android:name="android.provider.Telephony.SMS_RECEIVED" />
     </intent-filter> 
    </receiver>

    </application>
     <uses-permission android:name="android.permission.INTERNET"/>
     <uses-permission android:name="android.permission.SEND_SMS"/> 
     <uses-permission android:name="android.permission.RECEIVE_SMS"/> 
     <uses-permission android:name="android.permission.READ_SMS"/> 
     <uses-permission android:name="android.permission.READ_CONTACTS"/> 
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:00:31.007

您尚未声明将在安装应用程序时启动的 Main 和 Launcher 活动。

这应该在您的主要活动中声明

```
 <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:02:03.347

如果您希望从屏幕上的图标启动您的应用程序，您的清单中缺少几行...

```
 <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

第一个（MAIN）表示这个activity是应用程序的入口点，当你启动应用程序时，这个activity就被创建了。

第二个（LAUNCHER）意味着它应该作为顶级应用程序显示在启动器中。

# magento - Magento：以编程方式为分组产品创建关联产品

> ID：10089103
> 
> 赞同：4
> 
> 时间：2012-04-10T12:47:49.753
> 
> 标签：magento

如何以编程方式创建/链接相关产品到分组产品？

感谢帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T22:46:08.637

```
$products_links = Mage::getModel('catalog/product_link_api');
$products_links->assign ("grouped",$group_product_id,$simple_product_id); 
```

[http://docs.magentocommerce.com/Mage_Catalog/Mage_Catalog_Model_Product_Link_Api.html](http://docs.magentocommerce.com/Mage_Catalog/Mage_Catalog_Model_Product_Link_Api.html)

在 Magento 1.6.2.0 中看起来不错

# php - 如何在 Zend Framework 中添加多个模块目录？

> ID：10089106
> 
> 赞同：2
> 
> 时间：2012-04-10T12:47:58.497
> 
> 标签：php, zend-framework, zend-framework-mvc

我正在开发一个需要使其易于扩展的 Zend 项目。考虑了各种选项后，我认为如果这些扩展使用与通用 Zend 模块相同的 MVC 结构，但将它们组合在远离核心模块的单独文件夹中，则效果最好。

所以我理想的结构是这样的：

```
application
  configs
  core
    module1
    module2
  extensions
    extensionModule1
    extensionModule2 
```

然后使用这种结构，我希望 url可以`module1/controller/action`同时`extensionModule1/controller/action`工作。

那么是否可以设置多个模块目录供路由器查看？

如果这是不可能的，那么任何关于实现使用 MVC 并且与站点核心部分分开的扩展的另一种方法的建议将不胜感激。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:20:53.827

打开你的 application.ini 做

> ```
> resources.frontController.moduleDirectory[] = APPLICATION_PATH "/core"
> resources.frontController.moduleDirectory[] = APPLICATION_PATH "/extensions"
> resources.modules = true; 
> ```

ZF 将查看这两个目录并将所有子目录视为模块。

# tsql - 获取两个日期之间的 ID

> ID：10089108
> 
> 赞同：1
> 
> 时间：2012-04-10T12:47:59.077
> 
> 标签：tsql, sql-server-2008-r2

我有一张桌子

```
WEEK_ID WEEK_STARTDATE  WEEK_YEAR   WEEK_MONTH  WEEK_CREATEDTS
252 10/26/2008  2008    11  2008-10-07 15:10:00.000
253 11/02/2008  2008    11  2008-10-07 15:10:00.000
254 11/09/2008  2008    11  2008-10-07 15:10:00.000
255 11/16/2008  2008    11  2008-10-07 15:10:00.000
256 11/23/2008  2008    12  2008-10-07 15:10:00.000
257 11/30/2008  2008    12  2008-10-07 15:10:00.000
258 12/07/2008  2008    12  2008-10-07 15:10:00.000
259 12/14/2008  2008    12  2008-10-07 15:10:00.000
260 12/21/2008  2008    12  2008-10-07 15:10:00.000
266 2/1/2009    2009    2   2008-10-07 15:16:00.000
267 02/08/2009  2009    2   2008-10-07 15:16:00.000
268 02/15/2009  2009    2   2008-10-07 15:16:00.000
269 02/22/2009  2009    2   2008-10-07 15:16:00.000
270 3/1/2009    2009    3   2008-10-07 15:17:00.000
271 03/08/2009  2009    3   2008-10-07 15:17:00.000
272 03/15/2009  2009    3   2008-10-07 15:17:00.000
273 03/22/2009  2009    3   2008-10-07 15:17:00.000
274 3/29/2009   2009    4   2008-10-07 15:19:00.000
275 04/05/2009  2009    4   2008-10-07 15:19:00.000
276 04/12/2009  2009    4   2008-10-07 15:19:00.000
277 04/19/2009  2009    4   2008-10-07 15:19:00.000
278 04/26/2009  2009    4   2008-10-07 15:19:00.000
279 5/3/2009    2009    5   2008-10-07 15:20:00.000
280 05/10/2009  2009    5   2008-10-07 15:20:00.000
281 05/17/2009  2009    5   2008-10-07 15:20:00.000
282 05/24/2009  2009    5   2008-10-07 15:20:00.000
283 5/31/2009   2009    6   2008-10-07 15:34:00.000
284 06/07/2009  2009    6   2008-10-07 15:34:00.000
285 06/14/2009  2009    6   2008-10-07 15:34:00.000
286 06/21/2009  2009    6   2008-10-07 15:34:00.000
287 6/28/2009   2009    7   2008-10-07 15:36:00.000
288 07/05/2009  2009    7   2008-10-07 15:36:00.000
289 07/12/2009  2009    7   2008-10-07 15:36:00.000
290 07/19/2009  2009    7   2008-10-07 15:36:00.000
291 07/26/2009  2009    7   2008-10-07 15:36:00.000
297 12/28/2008  2009    1   2008-10-08 03:45:00.000
298 01/04/2009  2009    1   2008-10-08 03:45:00.000
299 01/11/2009  2009    1   2008-10-08 03:45:00.000
300 01/18/2009  2009    1   2008-10-08 03:45:00.000
301 01/25/2009  2009    1   2008-10-08 03:45:00.000
302 8/2/2009    2009    8   2008-10-28 12:52:00.000
303 08/09/2009  2009    8   2008-10-28 12:52:00.000
304 08/16/2009  2009    8   2008-10-28 12:52:00.000
305 08/23/2009  2009    8   2008-10-28 12:52:00.000
306 8/30/2009   2009    9   2008-10-28 12:54:00.000
307 09/06/2009  2009    9   2008-10-28 12:54:00.000
308 09/13/2009  2009    9   2008-10-28 12:54:00.000
309 09/20/2009  2009    9   2008-10-28 12:54:00.000
310 9/27/2009   2009    10  2008-10-28 12:54:00.000
311 10/04/2009  2009    10  2008-10-28 12:54:00.000
312 10/11/2009  2009    10  2008-10-28 12:54:00.000
313 10/18/2009  2009    10  2008-10-28 12:54:00.000
314 10/25/2009  2009    10  2008-10-28 12:54:00.000
315 11/1/2009   2009    11  2008-10-28 12:55:00.000
316 11/08/2009  2009    11  2008-10-28 12:55:00.000
317 11/15/2009  2009    11  2008-10-28 12:55:00.000
318 11/22/2009  2009    11  2008-10-28 12:55:00.000
319 11/29/2009  2009    12  2008-10-28 12:55:00.000
320 12/06/2009  2009    12  2008-10-28 12:55:00.000
321 12/13/2009  2009    12  2008-10-28 12:55:00.000
322 12/20/2009  2009    12  2008-10-28 12:55:00.000
323 12/28/2009  2010    1   2008-10-28 12:56:00.000
324 01/04/2010  2010    1   2008-10-28 12:56:00.000
325 01/11/2010  2010    1   2008-10-28 12:56:00.000
326 01/18/2010  2010    1   2008-10-28 12:56:00.000
327 01/25/2010  2010    1   2008-10-28 12:56:00.000
329 02/01/2010  2010    2   2010-01-18 08:10:00.000
330 02/08/2010  2010    2   2010-01-18 08:10:00.000
331 02/15/2010  2010    2   2010-01-18 08:10:00.000
332 02/22/2010  2010    2   2010-01-18 08:10:00.000
333 03/01/2010  2010    3   2010-01-18 08:11:00.000
334 03/08/2010  2010    3   2010-01-18 08:11:00.000
335 03/15/2010  2010    3   2010-01-18 08:11:00.000
336 03/22/2010  2010    3   2010-01-18 08:11:00.000
337 03/29/2010  2010    4   2010-03-17 11:00:00.000
338 04/05/2010  2010    4   2010-03-17 11:00:00.000
339 04/12/2010  2010    4   2010-03-17 11:00:00.000
340 04/19/2010  2010    4   2010-03-17 11:00:00.000
341 04/26/2010  2010    4   2010-03-17 11:00:00.000
342 05/03/2010  2010    5   2010-03-17 11:01:00.000
343 05/10/2010  2010    5   2010-03-17 11:01:00.000
344 05/17/2010  2010    5   2010-03-17 11:01:00.000
345 05/24/2010  2010    5   2010-03-17 11:01:00.000
346 05/31/2010  2010    6   2010-03-17 11:03:00.000
347 06/07/2010  2010    6   2010-03-17 11:03:00.000
348 06/14/2010  2010    6   2010-03-17 11:03:00.000
349 06/21/2010  2010    6   2010-03-17 11:03:00.000
350 06/28/2010  2010    7   2010-03-17 11:03:00.000
351 07/05/2010  2010    7   2010-03-17 11:03:00.000
352 07/12/2010  2010    7   2010-03-17 11:03:00.000
353 07/19/2010  2010    7   2010-03-17 11:03:00.000
354 07/26/2010  2010    7   2010-03-17 11:03:00.000
355 08/02/2010  2010    8   2010-03-17 11:04:00.000
356 08/09/2010  2010    8   2010-03-17 11:04:00.000
357 08/16/2010  2010    8   2010-03-17 11:04:00.000
358 08/23/2010  2010    8   2010-03-17 11:04:00.000
359 08/30/2010  2010    9   2010-03-17 11:05:00.000
360 09/06/2010  2010    9   2010-03-17 11:05:00.000
361 09/13/2010  2010    9   2010-03-17 11:05:00.000
362 09/20/2010  2010    9   2010-03-17 11:05:00.000
363 09/27/2010  2010    10  2010-03-17 11:06:00.000
364 10/04/2010  2010    10  2010-03-17 11:06:00.000
365 10/11/2010  2010    10  2010-03-17 11:06:00.000
366 10/18/2010  2010    10  2010-03-17 11:06:00.000
367 10/25/2010  2010    10  2010-03-17 11:06:00.000
368 11/01/2010  2010    11  2010-03-17 11:09:00.000
369 11/08/2010  2010    11  2010-03-17 11:09:00.000
370 11/15/2010  2010    11  2010-03-17 11:09:00.000
371 11/22/2010  2010    11  2010-03-17 11:09:00.000
372 11/29/2010  2010    12  2010-03-17 11:10:00.000
373 12/06/2010  2010    12  2010-03-17 11:10:00.000
374 12/13/2010  2010    12  2010-03-17 11:10:00.000
375 12/20/2010  2010    12  2010-03-17 11:10:00.000
376 12/27/2010  2011    1   2010-03-17 11:11:00.000
377 01/03/2011  2011    1   2010-03-17 11:11:00.000
378 01/10/2011  2011    1   2010-03-17 11:11:00.000
379 01/17/2011  2011    1   2010-03-17 11:11:00.000
380 01/24/2011  2011    1   2010-03-17 11:11:00.000
381 01/31/2011  2011    2   NULL
382 02/07/2011  2011    2   NULL
383 02/14/2011  2011    2   NULL
384 02/21/2011  2011    2   NULL
441 02/28/2011  2011    3   NULL
442 03/07/2011  2011    3   NULL
443 03/14/2011  2011    3   NULL
444 03/21/2011  2011    3   NULL
451 03/28/2011  2011    4   NULL
452 04/04/2011  2011    4   NULL
453 04/11/2011  2011    4   NULL
454 04/18/2011  2011    4   NULL
455 04/25/2011  2011    4   NULL
456 05/02/2011  2011    5   NULL
457 05/09/2011  2011    5   NULL
458 05/16/2011  2011    5   NULL
459 05/23/2011  2011    5   NULL
460 05/30/2011  2011    6   NULL
461 06/06/2011  2011    6   NULL
462 06/13/2011  2011    6   NULL
463 06/20/2011  2011    6   NULL
464 06/27/2011  2011    7   NULL
465 07/04/2011  2011    7   NULL
466 07/11/2011  2011    7   NULL
467 07/18/2011  2011    7   NULL
468 07/25/2011  2011    7   NULL
469 08/01/2011  2011    8   NULL
470 08/08/2011  2011    8   NULL
471 08/15/2011  2011    8   NULL
472 08/22/2011  2011    8   NULL
473 08/29/2011  2011    9   NULL
474 09/05/2011  2011    9   NULL
475 09/12/2011  2011    9   NULL
476 09/19/2011  2011    9   NULL
477 09/26/2011  2011    10  NULL
478 10/03/2011  2011    10  NULL
479 10/10/2011  2011    10  NULL
480 10/17/2011  2011    10  NULL
481 10/24/2011  2011    10  NULL
482 10/31/2011  2011    11  NULL
483 11/07/2011  2011    11  NULL
484 11/14/2011  2011    11  NULL
485 11/21/2011  2011    11  NULL
486 11/28/2011  2011    12  NULL
487 12/05/2011  2011    12  NULL
488 12/12/2011  2011    12  NULL
489 12/19/2011  2011    12  NULL
491 12/26/2011  2012    1   NULL
492 01/02/2012  2012    1   NULL
493 01/09/2012  2012    1   NULL
494 01/16/2012  2012    1   NULL
495 01/23/2012  2012    1   NULL
496 01/30/2012  2012    2   NULL
497 02/06/2012  2012    2   NULL
498 02/13/2012  2012    2   NULL
499 02/20/2012  2012    2   NULL
500 02/27/2012  2012    3   NULL
501 03/05/2012  2012    3   NULL
502 03/12/2012  2012    3   NULL
503 03/19/2012  2012    3   NULL
504 03/26/2012  2012    4   NULL
505 04/02/2012  2012    4   NULL
506 04/09/2012  2012    4   NULL
507 04/16/2012  2012    4   NULL
508 04/23/2012  2012    4   NULL
509 04/30/2012  2012    5   NULL
510 05/07/2012  2012    5   NULL
511 05/14/2012  2012    5   NULL
512 05/21/2012  2012    5   NULL
513 05/28/2012  2012    6   NULL
514 06/04/2012  2012    6   NULL
515 06/11/2012  2012    6   NULL
516 06/18/2012  2012    6   NULL
517 06/25/2012  2012    7   NULL
518 07/02/2012  2012    7   NULL
519 07/09/2012  2012    7   NULL
520 07/16/2012  2012    7   NULL
521 07/23/2012  2012    7   NULL
522 07/30/2012  2012    8   NULL
523 08/06/2012  2012    8   NULL
524 08/13/2012  2012    8   NULL
525 08/20/2012  2012    8   NULL
526 08/27/2012  2012    9   NULL
527 09/03/2012  2012    9   NULL
528 09/10/2012  2012    9   NULL
529 09/17/2012  2012    9   NULL
530 09/24/2012  2012    10  NULL
531 10/01/2012  2012    10  NULL
532 10/08/2012  2012    10  NULL
533 10/15/2012  2012    10  NULL
534 10/22/2012  2012    10  NULL
535 10/29/2012  2012    11  NULL
536 11/05/2012  2012    11  NULL
537 11/12/2012  2012    11  NULL
538 11/19/2012  2012    11  NULL
539 11/26/2012  2012    12  NULL
540 12/03/2012  2012    12  NULL
541 12/10/2012  2012    12  NULL
542 12/17/2012  2012    12  NULL
543 12/24/2012  2013    1   NULL
544 12/31/2012  2013    1   NULL
545 01/07/2013  2013    1   NULL
546 01/14/2013  2013    1   NULL
547 01/21/2013  2013    1   NULL
548 01/28/2012  2013    1   NULL 
```

我通过添加 7 天来创建一个查询`week_startdate`

```
select 
   week_id, week_startdate, 
   convert(varchar, dateadd(day, 7, week_startdate), 101) as week_enddate 
from dbo.TBL_S3_FISCALWEEKS_1 
```

上述查询的输出是

```
week_id week_startdate  week_enddate
252 10/26/2008  11/02/2008
253 11/02/2008  11/09/2008
254 11/09/2008  11/16/2008
255 11/16/2008  11/23/2008
256 11/23/2008  11/30/2008
257 11/30/2008  12/07/2008
258 12/07/2008  12/14/2008
259 12/14/2008  12/21/2008
260 12/21/2008  12/28/2008
266 2/1/2009    02/08/2009
267 02/08/2009  02/15/2009
268 02/15/2009  02/22/2009
269 02/22/2009  03/01/2009
270 3/1/2009    03/08/2009
271 03/08/2009  03/15/2009
272 03/15/2009  03/22/2009
273 03/22/2009  03/29/2009
274 3/29/2009   04/05/2009
275 04/05/2009  04/12/2009
276 04/12/2009  04/19/2009
277 04/19/2009  04/26/2009
278 04/26/2009  05/03/2009
279 5/3/2009    05/10/2009
280 05/10/2009  05/17/2009
281 05/17/2009  05/24/2009
282 05/24/2009  05/31/2009
283 5/31/2009   06/07/2009
284 06/07/2009  06/14/2009
285 06/14/2009  06/21/2009
286 06/21/2009  06/28/2009
287 6/28/2009   07/05/2009
288 07/05/2009  07/12/2009
289 07/12/2009  07/19/2009
290 07/19/2009  07/26/2009
291 07/26/2009  08/02/2009
297 12/28/2008  01/04/2009
298 01/04/2009  01/11/2009
299 01/11/2009  01/18/2009
300 01/18/2009  01/25/2009
301 01/25/2009  02/01/2009
302 8/2/2009    08/09/2009
303 08/09/2009  08/16/2009
304 08/16/2009  08/23/2009
305 08/23/2009  08/30/2009
306 8/30/2009   09/06/2009
307 09/06/2009  09/13/2009
308 09/13/2009  09/20/2009
309 09/20/2009  09/27/2009
310 9/27/2009   10/04/2009
311 10/04/2009  10/11/2009
312 10/11/2009  10/18/2009
313 10/18/2009  10/25/2009
314 10/25/2009  11/01/2009
315 11/1/2009   11/08/2009
316 11/08/2009  11/15/2009
317 11/15/2009  11/22/2009
318 11/22/2009  11/29/2009
319 11/29/2009  12/06/2009
320 12/06/2009  12/13/2009
321 12/13/2009  12/20/2009
322 12/20/2009  12/27/2009
323 12/28/2009  01/04/2010
324 01/04/2010  01/11/2010
325 01/11/2010  01/18/2010
326 01/18/2010  01/25/2010
327 01/25/2010  02/01/2010
329 02/01/2010  02/08/2010
330 02/08/2010  02/15/2010
331 02/15/2010  02/22/2010
332 02/22/2010  03/01/2010
333 03/01/2010  03/08/2010
334 03/08/2010  03/15/2010
335 03/15/2010  03/22/2010
336 03/22/2010  03/29/2010
337 03/29/2010  04/05/2010
338 04/05/2010  04/12/2010
339 04/12/2010  04/19/2010
340 04/19/2010  04/26/2010
341 04/26/2010  05/03/2010
342 05/03/2010  05/10/2010
343 05/10/2010  05/17/2010
344 05/17/2010  05/24/2010
345 05/24/2010  05/31/2010
346 05/31/2010  06/07/2010
347 06/07/2010  06/14/2010
348 06/14/2010  06/21/2010
349 06/21/2010  06/28/2010
350 06/28/2010  07/05/2010
351 07/05/2010  07/12/2010
352 07/12/2010  07/19/2010
353 07/19/2010  07/26/2010
354 07/26/2010  08/02/2010
355 08/02/2010  08/09/2010
356 08/09/2010  08/16/2010
357 08/16/2010  08/23/2010
358 08/23/2010  08/30/2010
359 08/30/2010  09/06/2010
360 09/06/2010  09/13/2010
361 09/13/2010  09/20/2010
362 09/20/2010  09/27/2010
363 09/27/2010  10/04/2010
364 10/04/2010  10/11/2010
365 10/11/2010  10/18/2010
366 10/18/2010  10/25/2010
367 10/25/2010  11/01/2010
368 11/01/2010  11/08/2010
369 11/08/2010  11/15/2010
370 11/15/2010  11/22/2010
371 11/22/2010  11/29/2010
372 11/29/2010  12/06/2010
373 12/06/2010  12/13/2010
374 12/13/2010  12/20/2010
375 12/20/2010  12/27/2010
376 12/27/2010  01/03/2011
377 01/03/2011  01/10/2011
378 01/10/2011  01/17/2011
379 01/17/2011  01/24/2011
380 01/24/2011  01/31/2011
381 01/31/2011  02/07/2011
382 02/07/2011  02/14/2011
383 02/14/2011  02/21/2011
384 02/21/2011  02/28/2011
441 02/28/2011  03/07/2011
442 03/07/2011  03/14/2011
443 03/14/2011  03/21/2011
444 03/21/2011  03/28/2011
451 03/28/2011  04/04/2011
452 04/04/2011  04/11/2011
453 04/11/2011  04/18/2011
454 04/18/2011  04/25/2011
455 04/25/2011  05/02/2011
456 05/02/2011  05/09/2011
457 05/09/2011  05/16/2011
458 05/16/2011  05/23/2011
459 05/23/2011  05/30/2011
460 05/30/2011  06/06/2011
461 06/06/2011  06/13/2011
462 06/13/2011  06/20/2011
463 06/20/2011  06/27/2011
464 06/27/2011  07/04/2011
465 07/04/2011  07/11/2011
466 07/11/2011  07/18/2011
467 07/18/2011  07/25/2011
468 07/25/2011  08/01/2011
469 08/01/2011  08/08/2011
470 08/08/2011  08/15/2011
471 08/15/2011  08/22/2011
472 08/22/2011  08/29/2011
473 08/29/2011  09/05/2011
474 09/05/2011  09/12/2011
475 09/12/2011  09/19/2011
476 09/19/2011  09/26/2011
477 09/26/2011  10/03/2011
478 10/03/2011  10/10/2011
479 10/10/2011  10/17/2011
480 10/17/2011  10/24/2011
481 10/24/2011  10/31/2011
482 10/31/2011  11/07/2011
483 11/07/2011  11/14/2011
484 11/14/2011  11/21/2011
485 11/21/2011  11/28/2011
486 11/28/2011  12/05/2011
487 12/05/2011  12/12/2011
488 12/12/2011  12/19/2011
489 12/19/2011  12/26/2011
491 12/26/2011  01/02/2012
492 01/02/2012  01/09/2012
493 01/09/2012  01/16/2012
494 01/16/2012  01/23/2012
495 01/23/2012  01/30/2012
496 01/30/2012  02/06/2012
497 02/06/2012  02/13/2012
498 02/13/2012  02/20/2012
499 02/20/2012  02/27/2012
500 02/27/2012  03/05/2012
501 03/05/2012  03/12/2012
502 03/12/2012  03/19/2012
503 03/19/2012  03/26/2012
504 03/26/2012  04/02/2012
505 04/02/2012  04/09/2012
506 04/09/2012  04/16/2012
507 04/16/2012  04/23/2012
508 04/23/2012  04/30/2012
509 04/30/2012  05/07/2012
510 05/07/2012  05/14/2012
511 05/14/2012  05/21/2012
512 05/21/2012  05/28/2012
513 05/28/2012  06/04/2012
514 06/04/2012  06/11/2012
515 06/11/2012  06/18/2012
516 06/18/2012  06/25/2012
517 06/25/2012  07/02/2012
518 07/02/2012  07/09/2012
519 07/09/2012  07/16/2012
520 07/16/2012  07/23/2012
521 07/23/2012  07/30/2012
522 07/30/2012  08/06/2012
523 08/06/2012  08/13/2012
524 08/13/2012  08/20/2012
525 08/20/2012  08/27/2012
526 08/27/2012  09/03/2012
527 09/03/2012  09/10/2012
528 09/10/2012  09/17/2012
529 09/17/2012  09/24/2012
530 09/24/2012  10/01/2012
531 10/01/2012  10/08/2012
532 10/08/2012  10/15/2012
533 10/15/2012  10/22/2012
534 10/22/2012  10/29/2012
535 10/29/2012  11/05/2012
536 11/05/2012  11/12/2012
537 11/12/2012  11/19/2012
538 11/19/2012  11/26/2012
539 11/26/2012  12/03/2012
540 12/03/2012  12/10/2012
541 12/10/2012  12/17/2012
542 12/17/2012  12/24/2012
543 12/24/2012  12/31/2012
544 12/31/2012  01/07/2013
545 01/07/2013  01/14/2013
546 01/14/2013  01/21/2013
547 01/21/2013  01/28/2013
548 01/28/2012  02/04/2012 
```

问题是我需要`week_ids`两天之间。我在功能或程序中需要它，请您尽快帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:10:45.677

A simple SELECT WHERE BETWEEN should do the job for you. Pass in the two dates as parameters, and

```
SELECT week_id FROM TBL_S3_FISCALWEEKS_1 
WHERE WeekStartDate BETWEEN @DateParam1 AND @DateParam2 
```

This will work even if the exact date doesn't appear in WeekStartDate

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:08:46.760

So you want a query or function that returns the week_id if you feed it a date (even if it is a date that falls between your week_startdate and week_enddate), right?

You might want to try something like the following query:

```
 SELECT week_id
 FROM weeks
 WHERE DATEDIFF(dd, week_startdate, input_date) < 7
 AND DATEDIFF(dd, week_startdate, input_date) > 0 
```

Check the MSDN [DATEDIFF](https://msdn.microsoft.com/en-us/library/ms189794(v=sql.100).aspx) reference for more information on DATEDIFF.

# java - a4j:commandButton 不起作用

> ID：10089109
> 
> 赞同：1
> 
> 时间：2012-04-10T12:48:00.233
> 
> 标签：java, ajax, jsf, richfaces

我是 JSF 和 RichFaces 的新手。我有一个按钮应该调用 bean 上的方法。当我使用

```
<h:commandButton action="#{loginBean.userLogin}" value="Login" /> 
```

它工作正常，但是当我点击

```
<a4j:commandButton action="#{loginBean.userLogin}" value="Login" /> 
```

什么都没发生。

我的豆子代码：

```
public class LoginBean {

@Size(min = 2, max = 20, message = "Must be betwen 2 and 20 chars")
private String          login;
@Size(min = 1, message = "Please Enter your password")
private String          password;

//getters and setters

public String userLogin() {
    //user login code

}
} 
```

我的 JSP 页面代码：

```
<body>
<f:view>
<div >
   <h:form id="loginForm">
       <h:panelGrid columns="3">
           <h:outputLabel for="login" value="Login:" />
           <h:inputText id="login" value="#{loginBean.login}" >

           </h:inputText>
           <rich:message for="login" />

           <h:outputLabel for="password" value="Password:" />
           <h:inputSecret id="password" value="#{loginBean.password}" />
           <rich:message for="password" />
       </h:panelGrid>

        <div>
            <h:commandButton action="#{loginBean.login}" value="Login" />
            <a4j:commandButton action="#{loginBean.login}" value="Login" />
        </div>
        <div>
            <a href="<%= request.getContextPath() %>/registration.jsf">Registration</a>
        </div>
    </h:form>
</div>
</f:view>
</body> 
```

如您所见，我什至添加了两个按钮。一个工作正常，第二个不做任何事情。

UPD：一开始我没有使用 RichFaces，我的应用程序运行良好。所以我猜导航规则等都很好。不起作用的是我刚刚添加的 a4j:commandButton。

UPD2：这是我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee" version="2.5" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<display-name>webappsaichuk</display-name>
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>

<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping>

<listener>
    <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
</listener> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:17:36.727

您的方法必须具有与您的属性不同的名称。

```
public class LoginBean {

    @Size(min = 2, max = 20, message = "Must be betwen 2 and 20 chars")
    private String login;
    @Size(min = 1, message = "Please Enter your password")
    private String password;

    //getters and setters...

    public String userLogin() {
        //user login code
    }
} 
```

```
<h:inputText id="login" value="#{loginBean.login}" styleClass="rowInput">
<h:commandButton action="#{loginBean.userLogin}" value="Login" />
<a4j:commandButton action="#{loginBean.userLogin}" value="Login" /> 
```

更新

您应该将 RichFaces 过滤器添加到 web.xml（基于[RichFaces 入门](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/GettingStarted.html)）：

```
<!-- some context params to get better performance for RichFaces -->
<context-param>
    <param-name>org.ajax4jsf.COMPRESS_SCRIPT</param-name>
    <param-value>true</param-value>
</context-param>
<context-param>
    <param-name>org.ajax4jsf.SKIN</param-name>
    <param-value>classic</param-value>
</context-param>
<context-param>
    <param-name>org.ajax4jsf.handleViewExpiredOnClient</param-name>
    <param-value>true</param-value>
</context-param>
<context-param>
    <param-name>org.richfaces.LoadScriptStrategy</param-name>
    <param-value>ALL</param-value>
</context-param>
<context-param>
    <param-name>org.richfaces.LoadStyleStrategy</param-name>
    <param-value>ALL</param-value>
</context-param>
<!-- main filter for RichFaces -->
<filter>
    <display-name>Ajax4jsf Filter</display-name>
    <filter-name>ajax4jsf</filter-name>
    <filter-class>org.ajax4jsf.Filter</filter-class>
</filter>

<filter-mapping>
    <filter-name>ajax4jsf</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>INCLUDE</dispatcher>
</filter-mapping> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-10T14:19:29.590

a4j:commandButton 是一个 ajax 提交。因此，除非您重新渲染根据操作更改的屏幕部分，否则不会发生任何事情。

# javascript - Javascript 替换与 jQuery 替换的性能

> ID：10089117
> 
> 赞同：1
> 
> 时间：2012-04-10T12:48:31.590
> 
> 标签：javascript, jquery

在另一个[问题](https://stackoverflow.com/questions/7571553/)中，我遇到了两种不同的字符串替换方法。

一种是 jQuery 方式 $ `("#element").text().replace(',', '.')`，另一种是纯 Javascript 方式，首先获取文本然后调用`.replace(/,/, '.')`.

使用 jQuery 方法是否会对性能造成很大影响，或者有任何其他不使用它的原因（假设页面上已经有 jQuery）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T12:51:54.937

这两者本质上是相同的方法。

`$('#element').text()`返回一个字符串，因此您在两个示例中都调用了 String.prototype.replace()。

我能看到的唯一区别是，在第一种方法中，您使用字符串进行替换，而在第二种方法中，您使用的是正则表达式。在您提供的示例中，字符串方法会更快：

[http://jsperf.com/string-replace-vs-regexp](http://jsperf.com/string-replace-vs-regexp)

如果您真的想获得最佳性能，我建议使用纯 JavaScript：

`document.getElementById( 'element' ).innerText.replace( ',', '.' )`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:58:37.310

你实际上在做同样的事情。但是如果要考虑速度的话。在您的 jQuery 选择器上更加精确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:51:58.707

一般来说，jQuery 几乎总是会变慢，尽管其优势通常大于性能上的损失。在这种情况下，我怀疑 jQuery 只是添加了这个方法来提供一种更方便的方法来做同样的事情。

除非您要进行大量替换电话，否则我什至不会担心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T12:50:22.800

两种替换方法完全相同，不可否认，一种是使用字符串，另一种是正则表达式，但底层的 javascript 替换方法是相同的。唯一的区别是检索要执行替换的字符串的方法。

jQuery 检索方法会*稍微*慢一些，但不会以任何明显的方式出现。

# c# - 测试某个值是否为空

> ID：10089120
> 
> 赞同：2
> 
> 时间：2012-04-10T12:48:41.303
> 
> 标签：c#

我有以下代码，但我遇到了问题。在我的 While 中，必须测试 r["Varandas"] 是否不为空。在特定的 imovel_id 中，r["Varandas"] 为空，但仍然通过我的代码，然后我收到异常错误，因为无法解析为 int r["Varandas"] 因为为空，但为什么他通过通过我的 While 循环中的第一个 IF ？

```
 string s = "SELECT * "
            + "FROM San_Imovel_Caracteristica "
            + "WHERE Imovel_Id = " + imovel_id + " ";

        SqlConnection c = new SqlConnection(conn.Con);
        SqlCommand cmd = new SqlCommand(s, c);
        c.Open();
        SqlDataReader r = cmd.ExecuteReader();

        while (r.Read())
        {
            if (r["Varandas"] != null)
            {
                if (Convert.ToInt32(r["Varandas"].ToString()) > 0)
                {
                    XmlElement itemImovel1 = doc.CreateElement("itemImovel");
                    caracteristicasImovel.AppendChild(itemImovel1);
                    itemImovel1.InnerText = "varanda";
                }
            }
         } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T12:50:25.590

*来自数据库的空*值有它自己的特殊类型：

```
if (r["Varandas"] != DBNull.Value && r["Varandas"] != null) 
```

为了使它更优雅，您可以为 DataRow 类编写一些简单的函数甚至扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:51:48.683

需要检查`DbNull.Value`

```
 if (r["Varandas"] != DBNull.Value) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T13:19:37.667

除了这些正确的精彩答案之外，我还想补充一些关于 null 和 DBNull 的内容。

*   null 是`not`任何类型的实例。DBnull 是 的实例 `System.DBnull`。

*   null 表示无效引用，其中 DbNull 表示
    DB 中不存在的值。

*   DBnull 是 db 提供程序为表中不存在的值提供的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T12:55:38.480

试试这个：

```
string s = "SELECT * "
        + "FROM San_Imovel_Caracteristica "
        + "WHERE Imovel_Id = " + imovel_id + " ";

    SqlConnection c = new SqlConnection(conn.Con);
    SqlCommand cmd = new SqlCommand(s, c);
    c.Open();
    SqlDataReader r = cmd.ExecuteReader();

    int outint;

    while (r.Read())
    {
        Object o = r["Varandas"];
        if (o != null && o != DbNull.Value)
        {
            if (int.TryParse(o.ToString(), out outint))
            {
                XmlElement itemImovel1 = doc.CreateElement("itemImovel");
                caracteristicasImovel.AppendChild(itemImovel1);
                itemImovel1.InnerText = "varanda";
            }
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T12:56:51.160

这样的事情应该可以解决问题：

```
/// <summary>
/// This function tries to cast the input object to a integer or returns the default value
/// </summary>
/// <param name="objInput">object to check</param>
/// <param name="intDefault">optional default value</param>
/// <returns>Object cast to string or default value</returns>
public static int ValueOrDefaultForInteger(object objInput, int intDefault = 0)
{ 
 if (objInput == DBNull.Value | objInput == null)
    return intDefault;
 return Convert.ToInt32(objInput);
} 
```

我已经为所有数据类型制作了这些。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T12:51:59.873

尝试这个：

```
while(r.Read())
{
  object o = r["Varandas"];
  if ((o != null) && (o != DbNull.Value))
  {
    // rest of your code
  }
} 
```

A`DbNull.Value`与 a 不同`null`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-10T12:50:32.987

它的价值可能为 `DbNull.Value`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-10T12:51:20.950

尝试将其与 DBNull.Value 进行比较

[http://msdn.microsoft.com/en-us/library/system.dbnull.value.aspx](http://msdn.microsoft.com/en-us/library/system.dbnull.value.aspx)

# iphone - iphone dev 从图像创建 .mov 或 .wmv 文件

> ID：10089123
> 
> 赞同：0
> 
> 时间：2012-04-10T12:48:55.237
> 
> 标签：iphone

我想从 iphone 应用程序的图像序列中创建物理 .mov 或 .wmv 文件，这意味着用户将为我提供一些图像，我将为用户创建一个视频，如果用户想要 .mov 或可能是 .wmv 文件，那么在这种情况下，我将为用户创建一个视频文件，并且我还想在该文件中添加声音，现在我已经为此搜索了很多但没有找到任何非常有用的东西，谁能告诉我是有任何教程或帮助完整的材料来做到这一点，或者为我提供一些关于如何去做的指导，thanx 和问候 Saad

# android - 两个玩家的游戏服务器基础设施回合制棋盘手机游戏

> ID：10089126
> 
> 赞同：2
> 
> 时间：2012-04-10T12:49:01.270
> 
> 标签：android, iphone, windows-phone-7

我试图在这个主题上做我的功课，但不幸的是没有运气，至少图片不太清楚我可以开始更深入地挖掘或注册服务等。

我正在尝试实现：简单的 2 人棋盘游戏，带有 CPU 或互联网对手。该游戏是一款适用于iPhone、Android、WP7所有3个平台的手机游戏。（请不要伤害 WP7 :-)

*   一种选择是去一些云（Azure、Amazon）并实施一些游戏服务器。听起来像是在重新发明轮子，但也许有一个开源实现。（只有 ASP.NET 因为我的技能）

*   我目前的理解是，我的另一个更可取的选择是使用诸如 Openfeint 或 ScoreLoop 之类的服务（由 RIM 购买（并吃掉？）:-()。不幸的是，除了高分列表之外，我还不清楚（在阅读了两个常见问题解答之后）并维护统计数据是否有任何游戏服务器能够在两个经过身份验证的玩家之间进行棋盘游戏？

谁能指出我从哪里开始？（或建议我使用公共游戏服务器进行两人棋盘游戏互联网游戏的 WP7 示例或市场游戏？）

谢谢回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:56:52.680

我还想开发一款多人游戏，并研究了 Openfeint、Scoreloop 和 Skiller。我最终使用[Skiller](http://www.skiller-games.com)作为我的多人游戏引擎，因为它是唯一支持多人游戏的引擎，而且效果很好。

希望我有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T23:07:07.497

除了游戏的逻辑之外，还有一些值得关注的领域。

用户身份和授权。（游戏中心）

游戏数据持久性和存储。（云数据库，如 AWS DynamoDB）

游戏比赛排队。(AWS SQS) 不要尝试对使用悲观并发的数据库进行此操作。

比赛球员的通知已准备好供睡觉的客户使用。（AWS SNS 到 APNS/Google 到 Endpoint（此移动设备））

轮询或通知下一步行动。（AWS SQS 或 SNS）我不会为此轮询数据库。

这些服务只是示例推荐。我不为亚马逊工作，他们是最容易启动和运行的最实惠的，但那里可能有更好的服务。我发现他们有同样的要求。如果我的想法是一个好的加密狗，我不想承诺 100 块外加一个月。

你可以做上面列出的所有事情，开始使用云服务每月不到 15 美元。最好的事情是，如果您的想法成功，您只需从管理门户轻按一下开关就可以提高阈值。有些会自动缩放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T19:40:06.973

查看 Azure 的社交游戏工具包[https://github.com/WindowsAzure-Toolkits/wa-toolkit-games](https://github.com/WindowsAzure-Toolkits/wa-toolkit-games)

# c# - 如何将用 C# 编写的算法集成到用 Java 编写的 android 应用程序项目中？

> ID：10089130
> 
> 赞同：-1
> 
> 时间：2012-04-10T12:49:26.613
> 
> 标签：c#, midi, steganography

我在将一些用 C# 编写的隐写算法集成到我的 android 项目中时遇到了一个大问题，有人知道怎么做吗？我的 android 项目是 MIDI 文件中的隐写术，我发现的唯一算法是用 C# 编写的。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:04:55.720

[http://jsc.sourceforge.net/](http://jsc.sourceforge.net/)。尝试这个

# javascript - 如何使用外部 jsp 文件作为覆盖

> ID：10089135
> 
> 赞同：0
> 
> 时间：2012-04-10T12:49:52.133
> 
> 标签：javascript, jquery

当我单击超链接时，我必须弹出一个外部 jsp 页面作为弹出窗口。而且我还必须在执行一些字段验证后提交此页面。使用 iframe 时是可能的。但是加载页面需要时间。例如，我有一个链接**registerNow**，单击此链接后，我必须将注册页面显示为覆盖。然后在执行一些字段验证后，我必须**提交**页面。那时应用程序的**url**不应该改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:52:08.530

使用任何模式弹出脚本。

您可以考虑其中的任何一个

**1)** jQuery UI 对话框 ( [http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/) )

**2）** jqModal（[http://dev.iceburg.net/jquery/jqModal/](http://dev.iceburg.net/jquery/jqModal/)）

**2)** Fancybox 和更多...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:47:41.057

我按照下面的链接来实现我的要求 [http://jquerytools.org/demos/overlay/external.html](http://jquerytools.org/demos/overlay/external.html)

# c++ - 定义超过 50 行的 boost msm 状态机

> ID：10089136
> 
> 赞同：2
> 
> 时间：2012-04-10T12:49:54.363
> 
> 标签：c++, boost

我有状态机，其中有大约 60 行（转换）。它不再编译，因为 MPL 类型存在一些限制。

我从 Boost MSM 文档中发现这个限制可以通过

> 目前，实现更多功能的唯一解决方案是向 MPL 添加标头（幸运的是，这并不是很复杂）。

那么如何将标头添加到 MPL 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:16:43.403

在任何`#include <mpl...>`定义之前：

```
#define BOOST_MPL_CFG_NO_PREPROCESSED_HEADERS
#define BOOST_MPL_LIMIT_VECTOR_SIZE 30 // or whatever you need               
#define BOOST_MPL_LIMIT_MAP_SIZE 30 // or whatever you need 
```

# sencha-touch - 容器不显示宽度相等的所有子面板

> ID：10089140
> 
> 赞同：0
> 
> 时间：2012-04-10T12:50:01.787
> 
> 标签：sencha-touch, panel, extjs, sencha-touch-2

我是 Sencha Touch 2 的新手。

我想创建一个基本示例，其中有一个容器，里面有 3 个面板。但似乎只有第一个面板显示，其余两个被隐藏。怎么了？这是我的代码：

```
Ext.create('Ext.Container',{
  fullscreen: true,
  layout: 'card',
  items: [
    {
      xtype: 'panel',
      html: 'first one',
    },
    {
      xtype: 'panel',
      html: 'second one',
    },
    {
      xtype: 'panel',
      html: 'third one',
    },
  ]
}); 
```

如果可以做到，我如何将它们设置为相等的宽度？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:53:34.863

这正是`card`Sencha Touch 2 中设计的布局。只有第一个子组件是可见的，而其他子组件是隐藏的。对于你的问题：

*   要显示所有面板：将`layout`配置更改为`hbox`. 这 3 个子面板将水平排列。此外，如果您希望它们垂直设置，请使用`vbox`

*   要设置它们的相对宽度，请使用`flex`config. 您应该添加`flex:1`到所有 3 个面板，它应该可以工作。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T21:23:59.783

这是一个工作示例。我想你想要 3 个垂直的盒子放在一起。如果将 vbox 更改为 hbox，则条纹将从上到下运行。我注释掉了全屏选项。我不确定什么时候需要。

应用程序.js

```
分机应用程序（{
    名称：'煎茶'，

    启动：函数（）{
        var view = Ext.create('Ext.Container', {
// 全屏：真，
            布局： {
                类型：'vbox'
            },
            项目： [
                {
                    xtype：'面板'，
                    html: '第一个',
                    风格：'背景颜色：#fff'，
                    弹性：1
                },
                {
                    xtype：'面板'，
                    html: '第二个',
                    样式：'背景颜色：#f00'，
                    弹性：1
                },
                {
                    xtype：'面板'，
                    html: '第三个',
                    样式：'背景颜色：#0ff'，

                    弹性：1
                }
            ]
        });
        Ext.Viewport.add(view);
    }
});

```

索引.html

```
<!doctype html>
<html manifest="" lang="zh-CN">
<头部>
    <meta charset="UTF-8">
    <title>煎茶</title>
    <link rel="stylesheet" href="http://extjs.cachefly.net/touch/sencha-touch-2.0.0/resources/css/sencha-touch.css" type="text/css">
   <script type="文本/javascript"
    src="http://extjs.cachefly.net/touch/sencha-touch-2.0.0/sencha-touch-all-debug.js"></script>
    <script type="text/javascript" src="app.js"></script>
</head>
<正文>
</正文>
</html>

```

# r - 将数据框中的小时、分钟列转换为时间格式

> ID：10089142
> 
> 赞同：4
> 
> 时间：2012-04-10T12:50:03.893
> 
> 标签：r, type-conversion, time-format, datetime-conversion

我有一个包含 3 列的数据框，包括分钟和小时。我想将这些列（即分钟和列）转换为时间格式。鉴于数据`drame`：

```
Score Hour Min
10    10    56
23    17    01 
```

我想得到：

```
Score Time
10    10:56:00
23    17:01:00 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T13:03:13.840

您可以使用`ISOdatetime`将`hour`and中的数字转换`min`为`POSIXct`对象。但是，POSIXct 对象仅在它还包含年、月和日时才被定义。因此，根据您的需要可以做几件事：

*   如果您需要一个在图形中正确打印并且可用于算术（加法、减法）的实时对象，则需要使用`ISOdatetime`. `ISOdatetime`返回一个所谓的`POSIXct`对象，它是一个表示时间的 R 对象。然后，您只需对、和`ISOdatetime`使用固定值。这当然仅适用于您的数据集不跨越多年的情况。`year``month``day`
*   如果您只需要一个字符列`Time`，您可以`POSIXct`使用将输出转换为字符串`strftime`。通过将`format`参数设置为`"%H:%M:00"`. 但是，在这种情况下，您也可以使用`sprintf`创建新的字符列而不转换为`POSIXct`: `sprintf("%s:%s:00", drame$Hour, drame$Min)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-16T04:57:53.527

您可以使用**paste()**函数将两列数据合并为一个字符，然后使用 strptime() 转换为时间戳

```
x<-1:6  
##1 2 3 4 5 6
y<-8:13 
## 8 9 10 11 12 13

timestamp <- paste(x,":",y,":00",sep="")
timestamp 
```

将导致

```
#1:8:00 2:9:00 3:10:00 4:11:00 5:12:00 6:13:00 
```

如果您更喜欢将此转换为时间戳对象，请尝试使用

```
strptime(mergedData,"%H:%M:%S") 
## uses current date by default 
```

如果您碰巧在另一列中有日期，请使用 paste() 制作一个字符格式的日期并在下面使用来获取日期时间

```
##strptime(mergedData,"%d/%m/%Y %H:%M:%S") 
```

# css - 让孩子填补父母，而不会变得迟钝

> ID：10089144
> 
> 赞同：0
> 
> 时间：2012-04-10T12:50:08.173
> 
> 标签：css, height, parent, parent-child

我正在尝试使我的标题框与我的图像大小相同，而不会失去弹性滑块的响应能力，有什么建议吗？

[http://jsfiddle.net/bmBnF/10/](http://jsfiddle.net/bmBnF/10/)

麦德斯 K

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:58:24.817

我通过使其成为内联块并使用绝对定位来修复它。这样一来，您就不再需要正确浮动它了。另外，我添加了边框框的东西，所以你的填充不会使框太大。`display:inline-block;`和border-box一起使响应式设计中的CSS定位更加容易。

```
 .flex-caption {position:absolute;display:inline-block;min-height:100%;width: 26%; padding: 2%; margin: 0; background: rgba(0,0,0,.3); color: #fff; text-shadow: 0 -1px 0 rgba(0,0,0,.3); font-size: 14px; line-height: 18px;-webkit-box-sizing: border-box;-moz-box-sizing: border-box;box-sizing: border-box; } 
```

这里有一个关于边界框的不错的小教程：http: [//css-tricks.com/box-sizing/](http://css-tricks.com/box-sizing/)

# android - 使用 CountDownTimer 显示敬酒，直到按下按钮

> ID：10089146
> 
> 赞同：0
> 
> 时间：2012-04-10T12:50:08.587
> 
> 标签：android, countdowntimer

我有一项活动在一定时间后开始。一旦这个活动开始，用户应该按下一个按钮来启动一个新的计时器。

但是，如果用户没有按下按钮，我希望每 5 秒显示一次 toast，直到按下按钮。

我正在尝试使用 CountDownTimer。这是我到目前为止的代码的基础知识：

我没有错误，但目前没有显示祝酒词。将 MyCount 类放在 BreakActivity 类中是否可以（如果我把它放在外面会出错）。

任何帮助进行排序将不胜感激！

```
public class BreakActivity extends Activity {

Button startBreakButton; // button to start the break timer
Boolean clicked= false;
CountDownTimer counter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.breakscreen); // sets layout to breakscreen.xml

    MyCount counter;
    counter=new MyCount(5000,1000);
    counter.start();

  startBreakButton = (Button) findViewById(R.id.startBreakButton);
    startBreakButton.setOnClickListener(mStartListener);

  View.OnClickListener mStartListener = new OnClickListener() { 

 clicked=true;
 //other listener code
 };

 public class MyCount extends CountDownTimer{
    public MyCount(long millisInFuture, long countDownInterval) {
    super(millisInFuture, countDownInterval);
    }
    @Override
    public void onFinish() {
      if(clicked=false){
        Toast.makeText(getApplicationContext(), "TAKE A BREAK", Toast.LENGTH_LONG).show();
        counter= new MyCount(5000,1000);
     counter.start();
        }

    }
    @Override
    public void onTick(long millisUntilFinished) {
        long s1 = millisUntilFinished;

    }
    }
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:54:44.603

改变 ：

```
 if(clicked=false) 
```

到

```
 if(clicked==false) 
```

# android - 使用 shell 脚本导致 APK 中的资产访问错误

> ID：10089147
> 
> 赞同：0
> 
> 时间：2012-04-10T12:50:08.757
> 
> 标签：android, build-automation, apk, assets

我编写了 shell 脚本来构建 APK 以自动化构建过程。就像下面这样。

```
 rm -rf obj
    rm -rf gen
    rm -rf bin
    rm -f build.xml
    rm -f local.properties
    rm -f proguard-project.txt

    ndk-build

    android update project --path ./ 

    ant release 

    jarsigner -verbose -keystore path/keystore -storepass password -signedjar bin/myApp-release-signed.apk bin/myApp-release-unsigned.apk alias 
```

目前，我成功获得了APK。但我发现有时应用程序在尝试访问纹理图像等特殊资产时会崩溃。LogCat 显示如下日志。

```
 04-10 12:46:25.080: E/szipinf(2255): Error reading asset data
    04-10 12:46:25.080: E/szipinf(2255): Unable to access asset data: -1 
```

Eclipse 可以很好地构建 APK。我试图找到解决 APK 问题的方法。但我找不到。

目前，我正在使用 android-12 和 ndk-r6b。我也在研究 Machintosh。有没有专门的指南来解决这个问题？

# java - viewParam 不能与 @RequestScoped bean 和 ajax 事件一起使用吗？

> ID：10089149
> 
> 赞同：2
> 
> 时间：2012-04-10T12:50:12.700
> 
> 标签：java, jsf, jsf-2, managed-bean, viewparams

在阅读了 stackoverflow 中的一些问题和答案（比如这个[ViewParam vs @ManagedProperty(value = "#{param.id}")](https://stackoverflow.com/questions/4888942/viewparam-vs-managedpropertyvalue-param-id)）后，我不确定是否可以使用`viewParam`bean`@RequestScoped`和 ajax 事件。正如您在@BalusC 的回答中看到的那样：

> 可以在 @RequestScoped bean 上使用，但如果您希望 > 视图参数在任何验证失败中幸存，它要求 bean 是 @ViewScoped。

我认为可以`f:viewParam`与`@RequestScoped`bean 一起使用，同时在验证失败后保留视图参数，我的意思是，你根本不需要`@ViewScoped`bean。

可能使用`@ViewScoped`bean 的必要性与这个规范问题有关，不是吗？ [http://java.net/jira/browse/JAVASERVERFACES-1532](http://java.net/jira/browse/JAVASERVERFACES-1532)

根据该问题，该解决方案仅适用于 JSF 2.2。

# c++ - 通用配置代码的 Cmake 和编码风格

> ID：10089154
> 
> 赞同：1
> 
> 时间：2012-04-10T12:50:22.737
> 
> 标签：c++, coding-style, cmake, configuration-files

按照我的项目结构：

```
/myproject
  CMakeLists.txt (containing "add_subdirectory" and "include_directories" ..)
  /src
    /lib1
      CMakeLists.txt (containing "add_library(lib1 .. )" )
      ..
    /lib2
      idem as lib1 ..
  /mains
    /common
      =>config.cpp<=
      =>gui.cpp<=
    /main1
      CMakeLists.txt
      main1.cpp
    /main2
      CMakeLists.txt
      main2.cpp
  /data
    /images_and_different_stuff
  /conf
    params.cfg
  /bin
     (output executables)
  /release
     (cmake build_files) 
```

我的问题是关于我放置的配置类的链接`/common`。这些类读取 CLI 或配置文件`params.cfg`并初始化 main1.cpp 和 main2.cpp 和 main3.cpp 中存在的 mains 对象......（所有 exes 的一个配置文件）现在我在我的`/main1's CMakeLists.txt`:`set(main1_source main1.cpp ../common/config.cpp ..)`中。所以通用代码是为每个exe重新编译。做这个的最好方式是什么 ？从公共文件制作一个静态库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T16:22:04.340

> 做这个的最好方式是什么 ？从公共文件制作一个静态库？

确切地。如果您想减少总安装大小，或者使用共享库。

# ruby-on-rails - update_attribute/s() 正在调用回调以保存密码

> ID：10089158
> 
> 赞同：2
> 
> 时间：2012-04-10T12:50:43.060
> 
> 标签：ruby-on-rails, update-attributes, update-attribute

我正在尝试从管理控制器（不是用户控制器）更新用户模型的单个属性。

在这样做时，我尝试`update_attribute()`了，但它也在更改用户密码。

我认为密码正在更改，因为我在用户模型上有 before_save 方法，它对密码进行哈希处理。

`update_attributes()`不起作用，因为它正在检查密码的验证，即`presence=>true`

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:41:30.037

您可以使用该`:if`选项设置验证条件。在我的代码中，它看起来像这样：

```
validates :password,
          :length => { :minimum => 8 },
          :confirmation => true,
          :presence => true,
          :if => :password_required?

def password_required?
  crypted_password.blank? || password.present?
end 
```

所以基本上，只有`crypted_password`在数据库中没有设置（意味着正在创建新记录）或`password`提供新记录时才会运行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:58:42.937

您可以像这样更新用户的单个属性

```
@user is that user whose attribute you want to update 
```

例如用户名

```
 @user.update_attributes(:user_name => "federe") 
```

试试看，它只会更新一个属性..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:00:42.353

试一试`update_column(name, value)`，可能会奏效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T13:16:43.877

ActiveRecord 有一个 'update-column' 方法可以跳过验证**和**回调：

[http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update_column](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update_column)

但是，我建议这可能很危险-您有 :before_save 过滤器是有原因的。如果您在过滤器上放置 :except 方法以在特定情况下规避，它不仅可以重用，而且可以保持行为一致，并避免将方法隐藏在绕过模型的验证/回调堆栈的控制器中。

我个人并不太热衷于在任何地方看到像 update_column 这样的方法，**除了**模型中的受保护方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T13:37:58.567

尝试 ：

要绕过回调和验证，请使用：

```
User.update_all({:field_name => value},{:id => 1}) 
```

只是想让你知道 ：

*   在 Rails 中，update_attribute 方法绕过模型验证，而 update_attributes 和 update_attributes！如果您尝试保存的记录无效，将失败（分别返回 false 或引发异常）。

*   两者之间的区别是 update_attribute 使用 save(false) ，而 update_attributes 使用 save 或者你可以说 save(true) 。

# sockets - 在 node.js 套接字关闭/结束事件上获取远程端点属性

> ID：10089159
> 
> 赞同：2
> 
> 时间：2012-04-10T12:50:44.197
> 
> 标签：sockets, node.js

我有一个 node.js 服务器，它使用关联的套接字数组跟踪连接到它的所有“客户端”，因为有时我需要向特定客户端发送一些数据。该数组中的键是由以下组成的字符串

```
socket.remoteAddress + ':' + socket.remotePort 
```

和值是传递给提供给 net.createServer(...) 的回调的套接字实例 有时客户端出于某种原因断开连接，我收到“结束”和“关闭”事件。我想从我的客户端注册表中删除断开连接的客户端，但在关闭/结束事件回调中，remoteAddress 和 remotePort 变量未定义。可以以某种方式检索它们吗？

为了显示：

```
var registry = {}
var server = net.createServer(function (socket) {
    socket.on('connect', function(){
        registry [socket.remoteAddress + ':' + socket.remotePort] = socket;
    });

    socket.on('close', function(had_error){
            // ******************************************************
            // socket.remoteAddress and remotePort are undefined here
            // ******************************************************
            var id = socket.remoteAddress + ':' + socket.remotePort;
            // *************************************************************
        if(registry.hasOwnProperty(id)
                delete socket.id;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:03:25.313

我认为您应该使用 socket.id 而不是创建自己的可能不唯一的对象属性

```
socket.on('connect', function(){
        registry [socket.id] = socket;
}); 
```

**更新**

Node 提供基本的 http API。Http 是无状态的。HTTP 会话允许将信息与单个访问者相关联，但节点没有本地会话支持。

看看[express](http://expressjs.com/)，它是一个不错的带有会话支持的 web 框架

此外，如果您需要实时发送消息，请查看[socket.io](http://socket.io/)

**更新 V2**

您可以将自己的 ID 属性添加到套接字对象：

```
function randomID(len){
  //Generate a random String
  return randID;
}
var registry = {}
var server = net.createServer(function (socket) {
    socket.on('connect', function(){
        var uid = randomID(32);
        socket.id = uid;
        registry [uid] = socket;
    });

    socket.on('close', function(had_error){
            var uid = socket.id;
            // *************************************************************
            console.log("Socket ID " + uid + " disconnected")
    });
}); 
```

# c# - 将 BIDS 中创建的 SSRS 项目添加到 MVC3 项目中

> ID：10089164
> 
> 赞同：0
> 
> 时间：2012-04-10T12:51:05.143
> 
> 标签：c#, asp.net-mvc-3, reporting-services, webforms, ssrs-2008

我在 BIDS 中创建了 SSRS 项目，我想在 MVC3 应用程序中使用这个项目中的报告。

我需要发布 SSRS 项目吗？我知道我需要在我的 MVC3 项目中添加 .aspx 文件才能使用 ReportViewer 控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:58:21.257

是的，您确实需要将您的报告发布给报告管理器。

报告发布后，您可以使用组件访问它们并将其显示在您的页面上。像这样的东西：

```
<rsweb:ReportViewer ID="ReportViewer1" runat="server" Font-Names="Verdana" Font-Size="8pt" Height="100%" InteractiveDeviceInfos="(Collection)"  ProcessingMode="Remote" WaitMessageFont-Names="Verdana" WaitMessageFont-Size="14pt" Width="100%">
    <ServerReport ReportServerUrl="http://localhost:8080/ReportServer" Timeout="-1" />
</rsweb:ReportViewer> 
```

# jquery-plugins - 使用 inlineNav 刷新网格

> ID：10089165
> 
> 赞同：1
> 
> 时间：2012-04-10T12:51:08.043
> 
> 标签：jquery-plugins, jqgrid

我正在使用 inlineNav 如下：

```
var inlineparams = { 
    addParams: {useFormatter:false},
    editParams: {extraparam: { 
                 "action": "ajaxgrid",
                 "subaction": "jqedit", 
                 "tableid": "sysbuglist",
                 "sessionid":"fd7c74d8-d3cb-102f-bd56-0015171f0bcc" 
             }},
    add:true,
    edit:true,
    save:true,
    cancel:true,
    aftersavefunc:reloadGrid};

$("#navgrid").jqGrid("inlineNav","#navgrid_bottompager", inlineparams); 
```

所以，我正在使用底部页面上的添加、编辑、保存、取消按钮。

问题：保存到服务器后如何获得控制权？保存到服务器运行良好，我只想在保存后刷新网格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:37:44.627

从[内联编辑的源代码中](https://github.com/tonytomov/jqGrid/blob/master/js/grid.inlinedit.js)，您可以看到无论是在选项中还是在保存按钮的回调中，都没有明确`aftersavefunc`的 for ：`inlineNav`

```
if(o.save) {
    $($t).jqGrid('navButtonAdd', elem,{
        ...
        onClickButton : function () {
            var sr = $t.p.savedRow[0].id;
            if(sr) {
                ...
                if( $($t).jqGrid('saveRow', sr, o.editParams) ) {
                    $($t).jqGrid('showAddEditButtons');
                }
            } 
        } 
```

`aftersavefunc`但是，您可以作为以下内容的一部分传递`editParams`：

```
var inlineparams = { 
    addParams: {useFormatter:false},
    editParams: {extraparam: { 
                     "action": "ajaxgrid",
                     "subaction": "jqedit", 
                     "tableid": "sysbuglist",
                     "sessionid":"fd7c74d8-d3cb-102f-bd56-0015171f0bcc"},
                 aftersavefunc: reloadGrid},
    ... 
```

那应该这样做。请注意，`aftersavefunc`将在`edit`和上调用`save`，因为这两个操作都支持此回调。

# c# - 合并两个列表

> ID：10089166
> 
> 赞同：-4
> 
> 时间：2012-04-10T12:51:10.777
> 
> 标签：c#, .net, list, merge, compare

我有两个测试列表，其中一些包含属性（键、值）。让我们称他们`list-A`为 & `list-B`。

我想做以下事情（`list-B`仅限于）：

1）添加`list-A`具有和`list-B`不具有（具有所有属性）的测试。

2）添加`list-A`有和`list-B`没有的属性

3）删除`list-B`有和`list-A`没有的财产

如何在 C# 中使用少于 4/5 的 for 循环来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:33:07.363

如果我了解您的问题，则只需要两个循环...但是在您的情况下，什么是属性，什么是测试？关键是测试，值是属性？

```
foreach(type key in a.keys)
{
  //a1 I think. adds a key not in b
  if(!b.ContainsKey(key))
  {
    b.Add(key, a[key]);
  }
  else
  {
    //a2 I think... I suppose that the value is a list of properties
    foreach(type prop in a[key])
    {
      if(!b[key].Contains(prop))
      {
        b[key].Add(prop);
      }
    }
  }
} 
```

# python - Python 和 SQL Server：日期时间数据问题

> ID：10089168
> 
> 赞同：3
> 
> 时间：2012-04-10T12:51:17.723
> 
> 标签：python, sql-server, datetime

我有一个包含一些`datetime`数据的 SQL Server 表。我正在使用 Python 脚本`pymssql`连接到数据库并执行查询。

我遇到的问题是，当我的查询返回日期时间数据时，日期会发生变化并且不再准确。例如，我的表中的一个数据条目是日期“2012-03-27”，但是当我检索它并将其作为`datetime`Python 中的对象存储在脚本中时，日期存储为“2012-01-03” .

有想法该怎么解决这个吗？我应该使用像这样的库`pytz`吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T14:30:00.520

我对 pymssql 1.02 版有同样的问题。虽然它不是最干净的方法，但我正在使用 OP 建议的解决方法，并使用 dateutil.parser 模块将字符串值转换为具有正确值的 python datetime 对象。这是我正在使用的代码，前提是 iso_datetime_string 包含具有 ISO 格式的日期时间的字符串，如解决方法返回的那样：

```
import dateutil.parser as ps

correct_datetime_obj = ps.parse(iso_datetime_string) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:29:57.573

我仍然不确定是什么导致了这个问题，但我找到了一个解决方案：在执行查询时将`datetime`数据转换为类型：`varchar`

```
select convert(varchar(20),event_time,120) from event_detail; 
```

以前我正在执行此查询：

```
select event_time from event_detail; 
```

`event_time`类型在哪里`datetime`

# android - 我可以使用电脑或平板电脑上的代码控制我的安卓手机吗？

> ID：10089172
> 
> 赞同：0
> 
> 时间：2012-04-10T12:51:50.703
> 
> 标签：android

我想用电脑或平板电脑的代码来控制我的安卓手机，这可能吗？

我知道黑莓开发中有EventInjector，android可以使用类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:56:05.783

是的。`adb`是用于开发和调试的命令行工具。通过 USB 或 TCP，您可以打开命令外壳、复制文件、卸载应用程序和其他类似操作。您甚至可以安装、运行和调试应用程序。

如果你只想要一个基于 TCP 的命令 shell，你也可以安装一个 SSH 服务器。

# android - 从 url 加载高清图像时强制关闭

> ID：10089178
> 
> 赞同：1
> 
> 时间：2012-04-10T12:52:07.683
> 
> 标签：android, out-of-memory

从 url 加载图像时遇到问题。图片 url 包含高清图片，它设置为**ImageView**。我得到以下错误。

```
 java.lang.OutofMemoryError: bitmap size exceeds VM budget. 
```

该应用程序有许多高清图像要显示。我还需要显示来自本地资源的高清图像。有人可以帮我解决吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:58:11.933

Android 应用程序有内存限制。尝试优化图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:57:12.180

在将其设置为图像视图之前，您必须先缩放图像。请按照以下链接避免您的错误：

[加入大图像时出现 OutOfMemory 错误](https://stackoverflow.com/questions/6213690/outofmemory-error-while-joining-large-images)

[将图像加载到 Bitmap 对象时出现奇怪的内存不足问题](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object)

[使用多个位图时出现内存不足错误](https://stackoverflow.com/questions/7928353/out-of-memory-error-while-using-many-bitmap)

# security - 保护 apache 服务器 虚拟主机

> ID：10089181
> 
> 赞同：0
> 
> 时间：2012-04-10T12:52:12.410
> 
> 标签：security, virtualhost, ubuntu-11.04

首先关闭我的设置：

安装了完整 LAMP 的 Ubuntu Server 11

我的 /etc/apache2/sites-available/default 示例

```
NamevirtualHost *

<VirtualHost *>
ServerName www.web.com
ServerAlias www.web.com
ServerAdmin me.co.uk
DocumentRoot "/var/www/web"
DirectoryIndex index.php
Alias /pdf /var/www/web/pdf/Order_pdf
Alias /glass /var/www/web/pdf/Glass_order_pdf
ErrorLog "/var/www/logs/error.log"
CustomLog "/var/www/logs/access.log" combined
CustomLog "/var/www/logs/deflate.log" deflate
</VirtualHost>
<VirtualHost *>
ServerName www.intranet.com
ServerAlias www.intranet.com
ServerAdmin me.co.uk
DocumentRoot "/var/www/intranet"
DirectoryIndex Search.php
ErrorLog "/var/www/logs/error.log"
CustomLog "/var/www/logs/access.log" combined
CustomLog "/var/www/logs/deflate.log" deflate
</VirtualHost> 
```

我的路由器将端口 80 转发到我的服务器，它正确显示 www.web.com 我想以某种方式阻止对 Intranet 站点的任何外部访问，但不完全确定如何执行此操作，希望有人能提供帮助？

这是我需要使用的东西吗？

```
<Directory "/var/www/web">
Options Indexes FollowSymLinks
Allow Override None
Order deny,alow
deny from all
allow list 192.168.1.0/24
</Directory> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:57:22.553

我确信这已经在其他地方得到了回答。无论如何，如果您想在 Intranet 上使用 IP 检查，您可以这样做。

```
<Directory /var/www/intranet/>
   Order allow,deny
   Allow from 192.168.1.0/24
</Directory> 
```

# testing - 带有机器人框架的多个远程库

> ID：10089187
> 
> 赞同：4
> 
> 时间：2012-04-10T12:52:47.543
> 
> 标签：testing, distributed, robotframework

根据“机器人框架”手册中的示例，为了从远程计算机提供关键字，必须`RobotRemoteServer`使用实现关键字的类的实例进行实例化

```
RobotRemoteServer(ExampleRemoteLibrary(), *sys.argv[1:]) 
```

如果我有多个想要远程使用的库/类怎么办？我必须为每个班级启动一个新服务器吗？

机器人框架是否适合自动化分布式测试，其中多台计算机必须同步运行才能测试特定案例？

在这里找到了相关的讨论：

[https://groups.google.com/forum/?fromgroups#!searchin/robotframework-users/remote/robotframework-users/StO7L7NbqFI/rrZa6KeAiMIJ](https://groups.google.com/forum/?fromgroups#!searchin/robotframework-users/remote/robotframework-users/StO7L7NbqFI/rrZa6KeAiMIJ)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:49:54.637

您不必被迫使用`RobotRemoteServer`，这只是为了方便而提供的一个简单示例。您可以创建一个可以使用任意数量的类的单一服务器。唯一真正的要求是您的 XMLRPC 服务器公开方法`get_keyword_names`和`run_keyword`.

这一切都记录在机器人用户指南的[远程库界面](http://robotframework.org/robotframework/latest/RobotFrameworkUserGuide.html#remote-library-interface)一节中。

至于分布式测试，可以在不同的机器上拥有多个远程服务器，所有这些都由一个机器人测试协调。我不确定这是否是你要问的。

# delphi - TMonthCalendar 和 Delphi 样式 (Delphi XE2)

> ID：10089189
> 
> 赞同：3
> 
> 时间：2012-04-10T12:52:50.030
> 
> 标签：delphi, delphi-xe2, vcl-styles

TMontCalendar 似乎是一个 Windows 包装器，因此它不会受到新的 VCL 样式的影响，你知道它的解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T15:21:25.383

这[`TMonthCalendar`](http://docwiki.embarcadero.com/Libraries/en/Vcl.ComCtrls.TMonthCalendar)是[MONTHCAL_CLASS](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775491%28v=vs.85%29.aspx)的包装器，据我所知，此控件不支持所有者绘制，但提供了[`CalColors`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.ComCtrls.TMonthCalendar.CalColors)允许您设置日历元素颜色的属性，但此属性仅在未启用主题时有效。因此，首先您必须调用[SetWindowTheme](http://msdn.microsoft.com/en-us/library/windows/desktop/bb759827%28v=vs.85%29.aspx)函数来禁用日历中的主题，然后您可以设置颜色以匹配 vcl 样式。

像这样的东西

```
uses
  Vcl.Styles,
  Vcl.Themes,
  uxTheme;

Procedure SetVclStylesColorsCalendar( MonthCalendar: TMonthCalendar);
Var
  LTextColor, LBackColor : TColor;
begin
   uxTheme.SetWindowTheme(MonthCalendar.Handle, '', '');//disable themes in the calendar
   MonthCalendar.AutoSize:=True;//remove border

   //get the vcl styles colors
   LTextColor:=StyleServices.GetSystemColor(clWindowText);
   LBackColor:=StyleServices.GetSystemColor(clWindow);

   //set the colors of the calendar
   MonthCalendar.CalColors.BackColor:=LBackColor;
   MonthCalendar.CalColors.MonthBackColor:=LBackColor;
   MonthCalendar.CalColors.TextColor:=LTextColor;
   MonthCalendar.CalColors.TitleBackColor:=LBackColor;
   MonthCalendar.CalColors.TitleTextColor:=LTextColor;
   MonthCalendar.CalColors.TrailingTextColor:=LTextColor;
end; 
```

结果将是这样

![在此处输入图像描述](../Images/3c9d6e3e6215e726379fa11c861b39e2.png) ![在此处输入图像描述](../Images/99e692dd2cde75e9b68bd76e5d77d558.png)

# zend-framework - Zend Framework 上下文加载样式表

> ID：10089190
> 
> 赞同：2
> 
> 时间：2012-04-10T12:52:54.043
> 
> 标签：zend-framework

Zend Framework 是否可以根据唯一标识符在上下文中自动加载样式表？

我想通过首先检查样式表是否存在然后加载它来根据布局和动作名称加载 css。

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:12:44.230

是的，这是可能的，而且实施起来非常简单。我刚刚开始在我正在做的一个小项目中为自己尝试这个。

[请参阅 Andy Baird 的博客](http://devzone.zend.com/1651/managing-css-and-javascript-files-within-a-zend-framework-app/)，其中还包括入门所需的代码。[他在第二篇博客](http://leakingabstraction.com/2010/02/15/part-ii-managing-css-and-javascript-files-within-a-zend-framework-app/)中继续介绍了这一概念，进一步推进了这一概念。

他对 CSS 和 javascript 文件使用了相同的技术，因此您可能也想对两者都进行尝试。

# php - 用正则表达式替换分页符标记

> ID：10089202
> 
> 赞同：0
> 
> 时间：2012-04-10T12:53:39.700
> 
> 标签：php, regex, magento, preg-replace

这就是我想要完成的。我们 Magento 网店的 CMS 编辑器有一个用于插入`<!-- pagebreak -->`标签的按钮。我想用它来创建*阅读更多*功能。我想我会搜索/替换这个标签来做到这一点。

我想在`<p>`标签内部进行搜索，并且我希望人们能够随心所欲地使用这个标签。

假设这是我的原始 HTML：

```
<p>This is my example text, but<!-- pagebreak --> this should be readable after 'click more'<!-- pagebreak --> with even more click more possible</p> 
```

我想把它转换成这样的东西。我认为第一个是最容易完成的，也许是在一个while循环中做一个preg_replace？第二个可能是更干净/更好的 html（嵌套更少）

```
<p>This is my example text, but <a href="#" onClick='#'>read more</a><div class='hiddenreadmore' id='hiddenreadmore-1'> this should be readable after 'click more'<a href="#" onClick='#'>read more</a><div class='hiddenreadmore' id='hiddenreadmore-2'> with even more click more possible</div></div></p> 
```

或者

```
<p>This is my example text, but <a href="#" onClick='#'>read more</a><div class='hiddenreadmore' id='hiddenreadmore-1'> this should be readable after 'click more'<a href="#" onClick='#'>read more</a></div><div class='hiddenreadmore' id='hiddenreadmore-2'> with even more click more possible</div></p> 
```

所以我想出了这个，但我认为应该有一种方法可以通过一次替换来做到这一点。

```
$pattern = '#\<p\>(.+?)\<\!-- pagebreak --\>(.+?)\<\/p\>#s';
$count = true;
while ($count) {
    $text = preg_replace($pattern, '<p>$1 <a href="#">read more</a><div class="hidden">$2</div></p>', $text, -1, $count);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:00:34.797

好吧，如果您不需要检查它是否在`<p>`标签中，则可以使用以下内容：

```
str_replace ( "<!-- pagebreak -->" , '<p>$1 <a href="#">read more</a><div class="hidden">$2</div></p>' , $text, $count ); 
```

这对系统来说要轻得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:05:34.000

我想这可以完成这项工作：

```
$pattern = '#\<p>(.*?)\<!-- pagebreak -->(.*?)\</p>#s';
$text = "<p>some test <!-- pagebreak --> hidden content</p> second test <p>lolo <!-- pagebreak --> more hidden content</p>";

echo preg_replace($pattern, '<p>$1 <a href="#">read more</a><div class="hidden">$2</div></p>', $text, -1, $count); 
```

# gis - 公共领域高分辨率矢量数据

> ID：10089203
> 
> 赞同：1
> 
> 时间：2012-04-10T12:53:49.080
> 
> 标签：gis, shapefile, wgs84

有人可以指出我可以在哪里获取高分辨率矢量数据吗？

最好采用 Shape 文件格式的 WGS84 矢量数据（海岸线、国界、湖泊......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:43:03.943

你已经检查[过 GADM2](http://www.gadm.org/)了吗？

# ruby - 为什么这种救援语法有效？

> ID：10089204
> 
> 赞同：5
> 
> 时间：2012-04-10T12:53:51.347
> 
> 标签：ruby, rescue

好的，所以我有我正在使用的应用程序的这种方法，它可以在生产中使用。我的问题为什么这行得通？这是新的 Ruby 语法吗？

```
def edit
  load_elements(current_user) unless current_user.role?(:admin)

  respond_to do |format|
    format.json { render :json => @user }   
    format.xml  { render :xml => @user }
    format.html
  end

rescue ActiveRecord::RecordNotFound
  respond_to_not_found(:json, :xml, :html)
end 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-10T13:06:31.290

`rescue`s 在方法中时不需要绑定到显式`begin`，这就是定义语法的方式。例如，请参阅[此处的 #19](http://www.rubyinside.com/21-ruby-tricks-902.html)和[这个 SO question](https://stackoverflow.com/questions/2524740/in-ruby-what-structures-can-a-rescue-statement-be-nested-in)以及[上面的欺骗](https://stackoverflow.com/questions/1542672/how-does-one-use-rescue-in-rails-without-the-begin-and-end-block)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T13:11:49.403

**救援**可以单独工作。不需要总是开始和结束。

当在线上的其他事情出错时，您可以使用救援单行形式返回一个值：

```
h = { :age => 10 }
h[:name].downcase                         # ERROR
h[:name].downcase rescue "No name" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:57:22.847

`rescue`词是方法定义的一部分

但在控制器中更好地挽救错误`rescue_from`

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-04-10T13:01:30.757

试试这个

```
def edit
  begin
    load_elements(current_user) unless current_user.role?(:admin)

    respond_to do |format|
      format.json { render :json => @user }   
      format.xml  { render :xml => @user }
      format.html
    end

  rescue ActiveRecord::RecordNotFound
    respond_to_not_found(:json, :xml, :html)
  end
end 
```

# iphone - UIWebView 没有调用 stringbyAppendingJavascript 函数

> ID：10089208
> 
> 赞同：0
> 
> 时间：2012-04-10T12:54:09.973
> 
> 标签：iphone, ios, xcode, xcode4, uiwebview

我有一个加载网站的 UIWebView。然后在

```
- (void)webViewDidFinishLoad:(UIWebView *)webView 
```

我尝试运行该功能

```
[webView stringByEvaluatingJavascript:@"myFunction();"]; 
```

但它不起作用它什么也不做。

我也有这个按钮，起初它什么也没做。

但是当我点击 UIWebView 并按下按钮时它工作正常。

有没有人知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:56:59.713

尝试调用`alert()`以确保问题不在您的 javascript 函数中。如果您能够看到弹出框，您就会知道问题出在您的 javascript 上，而不是`UIWebView`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:24:51.053

确保您的 HTML 页面包含具有该功能的文件，并且您的 webview 的基本 URL 设置正确。

**如果它与按钮一起使用，**编辑oops 忽略前半部分。**下半场仍然适用。**

# tfs - 是否可以在另一台机器或 VM 上安装 Team Foundation Build Services？

> ID：10089209
> 
> 赞同：3
> 
> 时间：2012-04-10T12:54:19.907
> 
> 标签：tfs, tfsbuild

我正在使用 Team Foundation Build 2010 自动化我们的构建过程。安装我们的 TFS 服务器时，无论安装它的人都没有安装构建配置服务，因此 TFS 管理控制台中缺少此节点。我很确定我知道这个问题的答案，但我想检查以防我遗漏了什么。我也在问，因为 TFS 服务器是生产服务器，我的主管不想在这台服务器上安装任何东西。构建服务是否可以安装在另一台机器或虚拟机上，并且构建配置节点仍然出现在 TFS 管理控制台中？我知道构建控制器和构建代理可以安装在另一台机器或虚拟机上。我只是想澄清一下“构建配置服务”部分。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T13:24:48.893

绝对地！这实际上是一个非常典型的场景。我通常不建议人们在任何应用层服务器上安装构建服务。当您仅安装构建功能时，TFS 管理控制台将仅显示构建功能。

通过将它安装在不同的机器上，您可以创建一个包含多个构建代理的构建控制器的构建农场。它可以很好地扩展。

在我看来，构建服务器也将被视为“生产”服务器。但是，它们没有相同的灾难恢复或监控要求。如果构建机器死了，只需映像另一台机器并将其添加到池中。这基本上就是Team Foundation Service （又名 TFS 预览版）的[弹性构建服务当前的工作方式。](http://blogs.msdn.com/b/bharry/archive/2012/03/27/announcing-a-build-service-for-team-foundation-service.aspx)每次使用后它们都会被销毁。

# ios - 使用[自我释放]，[自我保留]是一种好方法吗？

> ID：10089211
> 
> 赞同：2
> 
> 时间：2012-04-10T12:54:25.173
> 
> 标签：ios, memory-management

我创建了 DownloadAndParseBook 类。在收到任何数据或网络错误之前，它不会自动发布。

我使用了[自我释放]，[自我保留]。使用[自我释放]，[自我保留]是一种好方法吗？DownloadAndParseBook 是否包含任何潜在的错误？

```
@implementation GetBooks

-(void) books
{ 
 for(int i =0; i<10; i++)
 {
   DownloadAndParseBook *downloadAndParseBook =
        [[[DownloadAndParseBook alloc] init]autorelease];
   [downloadAndParseBook startLoadingBook];
 }
}
@end

@implementation DownloadAndParseBook

- (id)initWithAbook:(int)bookID 
{
 if(self = [super init])
 { 
    [self retain];        
 }
 return self;
}

- (void)startLoadingBook
{
 [NSURLConnection connectionWithRequest:request delegate:self];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
  [self release];    
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
 [self saveResultToDatabase];
 [self release];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:27:38.953

自我保留是非常偶尔的一种合适的模式。这种情况很少见，但有时在某些类型的多线程代码中，确保您不会在处理某些东西的过程中消失很重要。也就是说，这不是那些时代之一。我无法想象您当前的方法会有所帮助的情况。如果有人创建了您的对象然后从不调用`startLoadingBook`，那么它就会泄漏。如果有人调用`startLoadingBook`，则无论如何都会保留您的对象，因为`NSURLConnection`保留其委托直到完成。

也就是说，我相信您的大部分问题都来自您的对象模型错误这一事实。既不作为类也没有意义`GetBooks`。`DownloadAndParseBook`您可能的意思是`BookManager`（保存所有书籍的`BookDownloadController`东西）和（管理一本书的下载的东西）。`BookManager`应该跟踪所有当前（`BookDownloadControllers`在 an`NSSet`或`NSArray`ivar 中）。每个人都`BookDownloadController`应该跟踪它`NSURLConnection`（在 ivar 中）。您不应该只是创建连接并让它们“自力更生”（即自我保留）。这感觉很方便，但它使代码以后很难处理。您无法控制要建立的连接数。您无法取消连接。它很快就变得一团糟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:39:44.537

不，这不是最佳实践。保留/释放您的对象应该由您的对象的“所有者”完成。对于您的特定示例，您的 DownloadAndParseBook 对象的所有者是执行分配/初始化的对象。那应该是保留/释放您的 DownloadAndParseBook 实例的原因。这里的最佳实践是对 DownloadAndParseBook 进行分配/初始化，保留由所有者完成的所有下载/解析逻辑，然后向所有者发送回调以告知所有操作已完成（例如通过委托），此时， ow 向您的对象发送释放消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:02:03.923

问题是：为什么一个对象需要保留自己？您可能希望像单例一样实现您的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T13:53:18.197

与其他响应者不同，我会说您的模式可能有效。另请参阅[是否允许调用 [self release] 来控制对象生命周期？](https://stackoverflow.com/questions/1385433/is-calling-self-release-allowed-to-control-object-lifetime)

但是，您的代码中还有一些其他问题：

*   在`-(void) books`我猜你想发送`startLoadingBook`消息`downloadAndParseBook`而不是`self`
*   如果你创建一个`initWithAbook`方法，当你用标准方法初始化你的书时，它不会被调用`init`。在上面的当前代码`[self retain]`中永远不会被调用
*   在您上面的代码`bookID`中不会被保存
*   我不会在这里使用“init”模式，而是静态函数中的所有内容，因此调用者不会对类的所有权犯错。

代码：

```
- (id) initWithId:(int)bookId {
  self = [super init];
  if (self) {
    // save bookId here
  }
  return self;
}

+ (void) startLoadingBookWithID:(int)bookId {
  DownloadAndParseBook* book = [[DownloadAndParseBook alloc] initWithId:bookId];
  [NSURLConnection connectionWithRequest:request delegate:book];
}

// release self when it finished the operation 
// and document well that its behaviour 
```

如果你想得好，`NSURLConnection`它本身应该以完全相同的方式工作：当你`NSURLConnection`完成它的工作时你不释放一个，它自己会做。然而，`connectionWithRequest`它也不能自动释放自己，因为它必须在请求被服务之前一直处于活动状态。所以它可以工作的唯一方法是上面描述的模式

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T14:24:24.957

永远不要使用`[self release]`. 唯一可能的例外是在单例类/对象中。方法`release`并且`retain`只能由对象的所有者发送。这通常意味着，无论哪个对象创建了相关对象，也应该是释放它的对象。

# c# - 在 Rx 中存储检索 IObservable 订阅状态

> ID：10089215
> 
> 赞同：6
> 
> 时间：2012-04-10T12:54:59.720
> 
> 标签：c#, .net, serialization, persistence, system.reactive

[*这个问题属于[反应式扩展（Rx）](http://blogs.msdn.com/b/rxteam/archive/2012/03/12/reactive-extensions-v2-0-beta-available-now.aspx)*领域]

### 需要在应用程序重新启动时继续的订阅

```
int nValuesBeforeOutput = 123;

myStream.Buffer(nValuesBeforeOutput).Subscribe(
    i => Debug.WriteLine("Something Critical on Every 123rd Value")); 
```

现在我需要序列化和反序列化此订阅的状态，以便**下次启动应用程序时，缓冲区计数不会从零开始，而是从应用程序退出之前的缓冲区计数开始**。

*   在这种情况下，您如何保持 IObservable.Subscribe() 的状态并稍后加载它？
*   是否有在 Rx 中保存观察者状态的通用解决方案？

* * *

## 从答案到解决方案

基于 Paul Betts 方法，这是一个半通用化的实现，在我的初始测试中有效

### 采用

```
int nValuesBeforeOutput = 123;

var myRecordableStream = myStream.Record(serializer);
myRecordableStream.Buffer(nValuesBeforeOutput).ClearRecords(serializer).Subscribe(
    i => Debug.WriteLine("Something Critical on Every 123rd Value")); 
```

### 扩展方法

```
 private static bool _alreadyRecording;

    public static IObservable<T> Record<T>(this IObservable<T> input,
                                           IRepositor repositor) 
    {
        IObservable<T> output = input;
        List<T> records = null;
        if (repositor.Deserialize(ref records))
        {
            ISubject<T> history = new ReplaySubject<T>();
            records.ForEach(history.OnNext);
            output = input.Merge(history);
        }
        if (!_alreadyRecording)
        {
            _alreadyRecording = true;
            input.Subscribe(i => repositor.SerializeAppend(new List<T> {i}));
        }
        return output;
    }

    public static IObservable<T> ClearRecords<T>(this IObservable<T> input,
                                                 IRepositor repositor)
    {
        input.Subscribe(i => repositor.Clear());
        return input;
    } 
```

笔记

*   这不适用于存储依赖于生成的值之间的时间间隔的状态
*   您需要一个支持序列化 T 的序列化器实现
*   `_alreadyRecording``myRecordableStream`如果您多次订阅，则需要
*   `_alreadyRecording`是一个静态布尔值，非常丑陋，如果需要并行订阅，可以防止扩展方法在多个地方使用 - 需要重新实现以备将来使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:42:09.610

对此没有通用的解决方案，制作一个将是 NonTrivial™。您可以做的最接近的事情是使 myStream 成为某种重放 Observable（即，不是序列化状态，而是序列化 myStream 的状态并重做工作以使您回到原来的位置）。

# javascript - 如何清除文件输入元素

> ID：10089217
> 
> 赞同：2
> 
> 时间：2012-04-10T12:55:01.613
> 
> 标签：javascript, jquery

我[在这里](http://helios.hud.ac.uk/u0867587/Mobile_app/QandATable2.php)有一个应用程序，用户可以在其中添加一行并显示文件输入。

尝试清除文件输入时出现 2 个问题：

问题 1：如果我在应用程序中添加 2 行，如果我填写两个文件输入并单击其中一行中的“单击文件”按钮，则不是清除行内的文件，而是清除所有文件不正确的行，它应该清除我想要清除文件的行内的文件。

问题2：点击“上传”按钮上传文件后，上传成功与否后，如果我选择另一个文件，然后点击“清除文件”尝试清除，则无法清除文件。

如何解决这两个问题：

```
<script type="text/javascript">
 var sourceImageForm; 

function insertQuestion(form) {   

    var $tbody = $('#qandatbl > tbody'); 
    var $tr = $("<tr class='optionAndAnswer' align='center'></tr>");
    var $image = $("<td class='image'></td>"); 

    var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='startImageUpload(this);' class='imageuploadform' >" + 
    "<p class='imagef1_upload_process' align='center'>Loading...<br/><img src='Images/loader.gif' /><br/></p><p class='imagef1_upload_form' align='center'><br/><label>" + 
    "Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><label class='imagelbl'>" + 
    "(jpg, jpeg, pjpeg, gif, png, tif)</label><br/><br/><label>" + 
    "<input type='submit' name='submitBtn' class='sbtn' value='Upload' /></label>" + 
    "<label><input type='button' name='imageClear' class='imageClear' value='Clear File'/></label>" +
    "</p> <iframe class='upload_target' name='upload_target' src='#' style='wclassth:0;height:0;border:0px;solclass #fff;'></iframe></form>");      

    $image.append($fileImage);

    $tr.append($image);  
    $tbody.append($tr); 

      $(".imageClear").click(function(event){
  event.preventDefault();
  $(".fileImage").replaceWith("<input type='file' class='fileImage' name='fileImage' />");
});

}

function startImageUpload(imageuploadform){
  $(imageuploadform).find('.imagef1_upload_process').css('visibility','visible');
  $(imageuploadform).find('.imagef1_upload_form').css('visibility','hidden');
  sourceImageForm = imageuploadform;
      return true;
}

function stopImageUpload(success){
      var result = '';
      if (success == 1){
         result = '<span class="msg">The file was uploaded successfully!<\/span><br/><br/>';
      }
      else {
         result = '<span class="emsg">There was an error during file upload!<\/span><br/><br/>';
      }
      $(sourceImageForm).find('.imagef1_upload_process').css('visibility','hidden');
      $(sourceImageForm).find('.imagef1_upload_form').html(result + '<label>Image File: <input name="fileImage" type="file"/></label><br/><label>(jpg, jpeg, pjpeg, gif, png, tif)</label><br/><br/><label><input type="submit" name="submitBtn" class="sbtn" value="Upload" /></label><label><input type="button" name="imageClear" class="imageClear" value="Clear File"/></label>');
      $(sourceImageForm).find('.imagef1_upload_form').css('visibility','visible');     
      return true;   
}

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:10:04.457

The below code will clear all file inputs present in the page as you are pointing to the class

```
 $(".imageClear").click(function(event){
  event.preventDefault();
  $(".fileImage").replaceWith("<input type='file' class='fileImage' name='fileImage'   
      />");
  }); 
```

replace with

```
$(".imageClear").click(function(event){
  event.preventDefault();
  $(this).closest(".fileImage").replaceWith("<input type='file' class='fileImage'    
    name='fileImage'/>");
  }); 
```

I hope it will work...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:18:15.440

问题1是由这一行引起的：

```
$(".fileImage").replaceWith("<input type='file' class='fileImage' name='fileImage' />"); 
```

这意味着当您单击任何“清除文件”按钮时，所有具有“fileImage”类的元素都会被替换，而不仅仅是与按钮属于同一表单的元素。用以下内容替换它应该可以工作：

```
 $(this).parents("form:first").find(".fileImage").replaceWith("<input type='file' class='fileImage' name='fileImage' />"); 
```

由于我使用 jquery 选择器所做的是，首先选择单击的按钮所属的表单，然后在该表单内找到“fileImage”元素。

# spring - 如何在 Spring 中创建 ABSTRACT 持久层？

> ID：10089222
> 
> 赞同：1
> 
> 时间：2012-04-10T12:55:28.480
> 
> 标签：spring, jpa, architecture, persistence, abstract

我需要一些帮助来解决我在 Spring 中遇到的这个设计问题。我必须说我是 Spring 和 Hibernate、JPA 等的新手。

我们正在创建一个基于 Spring 的 Web 应用程序，它被分成不同的 Maven 模块。这些模块是（小箭头'->'表示“参考”）：

*   [1] 项目（应用程序的负责人；pom）
*   [2] 核心模型（这里有jpa注释）
*   [3]核心业务逻辑（->核心模型）
*   [4] webapp（->持久化，->核心业务逻辑）
*   [5] 持久化抽象（-> 核心模型）
*   [6]persistence impl 关系数据库（->persistence abstract）
*   [7]persistence impl xml文件(->persistence abstract)
*   [8] 持久性实现...

在 [5] 中，我们希望创建一个抽象持久层，定义一些类或抽象服务（接口？）以持久化业务对象。

在 [6] 中应该是使用 Hibernate/JPA 来持久化业务对象的实现。据我了解 Maven，可以在此处 [2] 的其他 Maven 模块中使用 JPA 注释。此外，我们希望在 [7] 中实现将业务对象持久保存到 xml 文件或其他源中，无论将来可能是什么。

您知道如何从 Web 应用程序模块中隐藏实际的持久性实现吗？我必须在 [4] 和 [5] 中指定什么才能使用这样的架构？

我们的目的是让 web 应用程序模块只知道抽象持久性模块，并在那里有一个配置文件，该文件决定要使用的实际持久性类型或存储源。

有没有办法使用 [6] 中的 Spring Data JPA 和 [7] 中的其他东西？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:29:00.297

好的，在阅读并深入了解设计模式世界之后，我决定做以下事情并分享我的经验（请参阅我的第一篇文章以解决参考问题）。

对于持久层（[5]、[6]、[7] 等），我使用了 Strategy-Pattern，但如果您想在 Google 上搜索，也可以将其[称为 DAOFactory-Pattern 。](http://java.sun.com/blueprints/corej2eepatterns/Patterns/DataAccessObject.html)与此相关，我使用了[GenericDAO-Pattern](https://community.jboss.org/wiki/GenericDataAccessObjects)，这在“Java Persistence with Hibernate”一书中得到了很好的解释。

Strategy-Pattern 基本上由一个接口组成，在我的例子中称为*PersistenceStrategy* ，抽象了实际的持久性实现。此外，我有一个服务*PersistenceService*，它包装了该持久性策略。

```
public interface PersistenceStrategy {
    public void persist(BaseEntity object);
    ...
} 
```

持久服务：

```
public class PersistenceService {

    private PersistenceStrategy persistenceStrategy;

    public void setPersistenceStrategy(PersistenceStrategy strategy) {
        this.persistenceStrategy = strategy;
    }

    public PersistenceStrategy getPersistenceStrategy() {
        return this.persistenceStrategy;
    }
} 
```

实际的持久性类 [6] 和 [7]（例如 PersistenceStrategyHibernate）等实现了这个接口，我将它们声明为 Spring bean。我还将 PersistenceService 声明为 bean。实际的 PersistenceStrategy 是将它们注入 PersistenceService。请注意，这个 bean 定义在 [5] 和 [6] 中的实际持久性实现中，而不是在 webapp 项目 [4] 中。

```
<bean id="hibernatePersistenceStrategy" class="org.myProject.persistence.relational.HibernatePersistenceStrategy" />

<!-- PersistenceService is instantiated here with the actual persistence strategy implementation -->
<bean id="persistenceService" class="org.myProject.persistence.PersistenceService">
    <property name="persistenceStrategy" ref="hibernatePersistenceStrategy"></property>
</bean> 
```

在我的 webapp maven 项目 [4] 中，我参考了实际的持久性实现，例如 [5] 或 [6]。

```
<dependency>
    <groupId>org.myProject</groupId>
    <!-- this is where the persistence module is referenced. 
        if you want to change the type of persistence you can do it here. -->
        <artifactId>persistence-relational</artifactId>
        <version>0.0.1-SNAPSHOT</version>
</dependency> 
```

然后，在我的控制器类中，我可以引用 PersistenceService 和 PersistenceStrategy。

```
@Controller
public class NewDatasetController {

    @Autowired
    PersistenceStrategy persistenceStrategy;

    @RequestMapping("/")
    public String landing() {

        ...
    }
} 
```

在我看来，这些模式非常好。如果你想在这篇文章中添加一些东西，请随意。

# sap - 如何自定义 TLN 的第一级和第二级的高度 - SAP Netweaver 7.3

> ID：10089225
> 
> 赞同：-1
> 
> 时间：2012-04-10T12:55:40.413
> 
> 标签：sap

我们从 TLN 中删除了图片，但它还是太大了。我需要知道如何改变 TLN 的高度。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:09:42.227

如果我记得 7.3 显示，溢出区域（用于从 TLN 中选择不可见选项卡的 < 和 > 按钮）占用一些垂直空间，从而限制了 TLN 的最小大小。

[这里](http://www.sdn.sap.com/irj/scn/go/portal/prtroot/docs/library/uuid/a03ead25-4288-2e10-57ae-c70b8c412629?QuickLink=index&overridelayout=true&51552492524959)有一个文档，描述了 7.3 的门户主题自定义。默认情况下，溢出区域似乎需要 63 或 42 像素（取决于有或没有图片的 TLN）

问候。

# mysql - 无法让选择查询工作

> ID：10089227
> 
> 赞同：3
> 
> 时间：2012-04-10T12:55:46.330
> 
> 标签：mysql, c, arrays, select

我想在 C 中使用来自 mysql 数据库的 Select 查询：

```
mysql_query(conn,"SELECT SI AS SUBSCRIBER_ID ,TG2 AS TAG_ID, SUM(CTR) AS NBR FROM (SELECT H.SUBSCRIBER_ID AS SI, TG.TAG_ID AS TG1,T.TAG_ID AS TG2, COUNT(TG.TAG_ID) AS COUNTER,CASE WHEN (TG.TAG_ID = T.TAG_ID) THEN COUNT(TG.TAG_ID) ELSE 0 END AS CTR from content_hits H left join  CONTENT_TAG TG ON TG.CONTENT_ID = H.CONTENT_ID LEFT JOIN TAG T ON 1= 1 GROUP BY H.SUBSCRIBER_ID, TG.TAG_ID,T.TAG_ID) AS TAB GROUP BY SI,TG2"); 
```

之后，我想使用“NBR”来填充一维数组。

我试过这个：

```
result = mysql_store_result(conn);

while ((row = mysql_fetch_row(result)))
{
  t[i]=*row['NBR'];
  printf("%d",t[i]);
} 
```

但它没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:45:06.290

您不能像您一样按名称访问行列 `t[i]=*row['NBR'];`。例如`fields = mysql_fetch_fields(result);`，用于获取列名并遍历字段数组以查找 id 'NBR' 具有的列。然后这个 id 可以用在`t[i]=row[id];`. 这一切都在 mysql 连接器文档[http://dev.mysql.com/doc/refman/5.0/en/mysql-fetch-fields.html](http://dev.mysql.com/doc/refman/5.0/en/mysql-fetch-fields.html)

# regex - 如何在 as3 中拆分消息？

> ID：10089228
> 
> 赞同：1
> 
> 时间：2012-04-10T12:55:51.307
> 
> 标签：regex, actionscript-3

嗨，我正在尝试拆分单词**rtmp://xx.yyy.in/sample/test?22082208,False#&all**这个单词。单词样本是动态添加的，我不知道计数。我想拆分**/sample/**如何做到这一点请帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:10:41.117

You want the string.split() method

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/String.html#split%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/String.html#split%28%29)

```
var array:Array = myString.split("/"); //returns an array of everything in between / 
```

In your case this will return

[0]->?rtmp:/ [1]->xx.yy.in [2]->sample [3]->test?22082208,False#&all

If you're looking for everything aside from the test?22082208,False#&all part and your URL will always be in this format you can use string.lastIndexOf()

```
 var pos:int = string.lastIndexOf("/", 0); //returns the position of the last /
 var newString:String = string.substr(0, pos); //creates a new string starting at 0 and ending at the last index of / 
```

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/String.html#substr%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/String.html#substr%28%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T13:10:50.280

您可以使用正则表达式执行此操作（以及几乎所有操作）：

```
var input:String = "rtmp://xx.yyy.in/sample/test?22082208,False#&all";
var pattern:RegExp = /^rtmp:\/\/.*\/([^\/]*)\/.*$/;
trace(input.replace(pattern, "$1")); //outputs "sample" 
```

这是详细的正则表达式：

*   `^`: 字符串的开始
*   `rtmp:\/\/`找到“rtmp://”的第一个字符串
*   `.*`任何事物
*   `\/`第一个斜线
*   `([^\/])`捕获除斜线之外的所有内容，直到...
*   `\/`...第二个斜线
*   `.*`任何事物
*   `$`结束

然后`$1`在括号之间表示捕获的组。

# .net - Log4Net：2 个库需要 2 个不同的版本

> ID：10089230
> 
> 赞同：1
> 
> 时间：2012-04-10T12:56:03.210
> 
> 标签：.net, log4net, combres

对于我的 ASP MVC 网站，我需要使用 2 个库，它们都需要不同版本的 Log4Net。

第一个是简单的 DLL，依赖于版本 1.2.10.0，另一个使用 nuget 包安装的依赖于 1.2.11.0。

没有我可以使用的兼容版本，我需要它们两个，以及另一个是combres的dll（我用来帮助压缩和缓存css和javascript）。我找不到另一个库来做与梳子一样的工作，但如果你有一个，它也可能会有所帮助。

如果你能帮助我解决这个问题，请提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:01:40.753

这些人有同样的问题，并提出了两种解决方案：

[http://www.andriybuday.com/2010/10/log4net-versions-deployment-issue.html](http://www.andriybuday.com/2010/10/log4net-versions-deployment-issue.html)

# android - 更快地拍摄 android 模拟器屏幕截图。

> ID：10089234
> 
> 赞同：0
> 
> 时间：2012-04-10T12:56:09.087
> 
> 标签：android, screenshot

我已经看到[此链接](https://stackoverflow.com/questions/2065993/how-to-take-emulator-screen-shots-using-eclipse)以找到一些解决方案，但找不到。给定的链接能够拍摄静态的屏幕截图（我的意思是屏幕可以保持更长时间的稳定）。

但我的要求是拍摄那些长时间不稳定的屏幕的屏幕截图。例如：我想拍摄屏幕截图以及屏幕上的**toast 消息**，并且我还想拍摄**相机表面视图**的屏幕截图。

有什么方法可以快速截屏，因为在单击**捕获屏幕**按钮时，**toase 消息**正在消失。

任何可观的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:13:43.193

好吧，您无法加快从 DDMS 截取屏幕截图的过程。由于我猜测，您想捕获 Toast 消息，最好的解决方案是使用以下内容为 Toast 消息设置更长的***长度***：

```
Toast.makeText(getApplicationContext(), "your message", Toast.LENGTH_LONG).show(); 
```

如果您不希望在最终版本中显示更长的 Toast 消息，您可以在完成截屏后将***长度***重新设置回。`Toast.LENGTH_SHORT`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:20:34.827

您可以尝试使用[monkeyrunner触发屏幕截图](http://developer.android.com/guide/developing/tools/monkeyrunner_concepts.html)

# asp.net-mvc-3 - Internet Explorer 7 + MVC 3 = 错误的网址？

> ID：10089240
> 
> 赞同：3
> 
> 时间：2012-04-10T12:56:35.450
> 
> 标签：asp.net-mvc-3, internet-explorer

这很奇怪。我说很奇怪，因为在 IE 8 及更高版本（以及 FF）上，我由 Html.ActionLink() 生成的 url 以正确的形式创建了一个 url -> [http://mydomain.com/myapp/mycontroller/myaction](http://mydomain.com/myapp/mycontroller/myaction) **但**在 IE 7 上和 IE8 在兼容模式下运行的 url 生成为 -> [http:///myapp/mycontroller/myaction](http:///myapp/mycontroller/myaction)。这也会影响使用 Url.Content() 的任何内容。

这是一个令人担忧的问题，因为我的用户仍然坚持使用 IE 7（我也不明白）。另外，我们的 Active Directory 策略为某些（不是全部）用户设置了一些东西，因此 IE 8 被强制进入兼容模式并且无法关闭。它还覆盖了兼容性元标记。

我应该在 MVC 中检查什么？我需要查看 web.config 设置吗？

**代码：** 操作链接：

```
@Html.ActionLink("My Text", "Action", "Controller", new { Param1 = Model.Param1 }, new { @class = "linkButton" })

Url.Content:
Url.Content("~/Content/openHS.png") 
```

**更新：** 我在 PHP 中发现了一个类似的项目来处理这个问题：[Why can't I use relative URLs with IE7?](https://stackoverflow.com/questions/2774771/why-cant-i-use-relative-urls-with-ie7)

网络上的其他几篇文章提到使用`<base>`标题标签..现在试试这个。使用搜索“相对网址”“Internet Explorer 7”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:16:08.947

这行得通。我在 WinXP 模式下测试了 IE 8 的兼容模式以及 Internet Explorer 8 IE 7 模式、IE 9、IE9 Compat、FF 11。对我现有的 JavaScript 没有任何伤害

对于剃须刀：

```
@{
     string baseHref;

     if(this.Request.Browser.Type == "IE7" && !this.Request.UserAgent.Contains("Trident/5.0"))
     {
          baseHref = this.Request.Url.Scheme + "://" + this.Request.Url.Authority + Url.Content("~");
     }
     else 
     {
          baseHref = Url.Content("~");
     }
} 
```

然后在顶部`<head>`：

```
<meta http-equiv="X-UA-Compatible" content="IE=9;IE=8;" />
<meta charset="utf-8" />
<base href="@(baseHref)"/> 
```

上面的一种解释：Trident/5.0 是 IE 9 的兼容性引擎，似乎允许 IE9 根据页面域而不是基础来解释相对链接。如果您愿意，我相信您可以删除 Razor 代码。这对我来说是一个兼容性补丁。

# java - 奇怪的 Java 线程池行为 - 除非使用 Futures，否则会丢失任务

> ID：10089245
> 
> 赞同：1
> 
> 时间：2012-04-10T12:57:14.380
> 
> 标签：java, debugging, threadpool, future, callable

我正在创建一个线程池，因为我不需要线程的任何输出，所以我没有使用 Futures&Callables。但问题是，如果我不使用 Futures，我会看到线程池正在丢失我正在提交的任务。

这是我失去任务的代码结构-

```
while(hasWorkToDo){
ThreadPoolExecutor.execute(new Worker());
System.out.println("Work submitted");
} 
```

在 Worker() 中，我在 run() 实现的第一行打印“得到工作”。

当我运行上面的代码时，“得到工作”的数量总是少于“提交的工作”。

但是，当我将代码结构更改为以下 -

```
ArrayList<Future<String>> list = new ArrayList<Future<String>>();
while(hasWorkToDo){
Future<String> submit=ThreadPoolExecutor.submit(new Worker());
list.add(submit) 
}

for (Future<String> f : list) {
f.get();
} 
```

然后我看到“得到工作”的次数等于“提交的工作”

这让我相信，除非我使用 Futures&Callables，否则线程池正在使用我正在提交的任务。

你以前见过这样的行为吗？有没有更好的方法来调试这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:01:51.193

您不需要保留 Future 任务，更少需要在关闭执行程序之前等待它们完成。我怀疑您正在某处使用 shutdownNow() 。尝试使用 shutdown() 代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:47:29.633

`ThreadPoolExecutor`如果 A 已关闭或已达到其容量，则A可能会拒绝任务。您可以[`setRejectedExectutionHandler`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html#setRejectedExecutionHandler%28java.util.concurrent.RejectedExecutionHandler%29)用来测试任务是否被拒绝。

# javascript - 画布、javascript交互？

> ID：10089246
> 
> 赞同：0
> 
> 时间：2012-04-10T12:57:19.313
> 
> 标签：javascript, html, canvas, diagram, interaction

作为学校课程的一部分，我们正在学习使用 HTML5 的 Canvas 元素，这也意味着我们正在学习如何使用 Javascript。任务是创建一些图形，并与这个图形进行某种交互。

我决定创建一些简单的图表，让用户能够输入值并查看图表的变化。

[http://people.dsv.su.se/~tojo0551/graf/lines.html](http://people.dsv.su.se/~tojo0551/graf/lines.html)包含我绘制的一些图表，现在是棘手的部分——使用 Javascript 和创建交互。这可能很容易，但我之前从未接触过除 JQuery 之外的 Javascript，因此有点不知所措。

假设我希望用户能够与底部的条形图交互并填写 1-5 之间的值并使条形相应地增长。

Canvas 代码很简单，如下所示：

```
function bars(){

var canvas = document.getElementById("bars");
if (canvas.getContext)
{   

var ctx = canvas.getContext("2d");

var bar1 = canvas.getContext("2d");
bar1.fillStyle = "rgba(0, 50, 0, .2)";
bar1.fillRect(20, 400, 30, 90);

var bar2 = canvas.getContext("2d");
bar2.fillStyle = "rgba(0, 50, 0, .4)";
bar2.fillRect(55, 360, 30, 130);

ctx.fillStyle = "rgba(0, 50, 0, .2)";
ctx.fillRect(90, 260, 30, 230);

ctx.fillStyle = "rgba(0, 50, 0, .4)";
ctx.fillRect(125, 290, 30, 200);

ctx.fillStyle = "rgba(0, 50, 0, .2)";
ctx.fillRect(160, 270, 30, 220);

ctx.fillStyle = "rgba(0, 50, 0, .4)";
ctx.fillRect(195, 250, 30, 240);

ctx.fillStyle = "rgba(0, 50, 0, .2)";
ctx.fillRect(230, 300, 30, 190);

ctx.fillStyle = "rgba(0, 50, 0, .2)";
ctx.fillRect(20, 400, 30, 90);

ctx.fillStyle = "rgba(0, 50, 0, .4)";
ctx.fillRect(55, 360, 30, 130);

ctx.fillStyle = "rgba(0, 50, 0, .2)";
ctx.fillRect(90, 260, 30, 230);

ctx.fillStyle = "rgba(0, 50, 0, .4)";
ctx.fillRect(125, 290, 30, 200);

ctx.fillStyle = "rgba(0, 50, 0, .2)";
ctx.fillRect(160, 270, 30, 220);

ctx.fillStyle = "rgba(0, 50, 0, .4)";
ctx.fillRect(195, 250, 30, 240);

ctx.fillStyle = "rgba(0, 50, 0, .2)";
ctx.fillRect(230, 300, 30, 190); 
```

但我从这里去哪里？我是编程新手，我知道如何使用选择和循环创建函数和控制流，你知道，我是一个初学者程序员。创建用户控件的自然路径是什么？在开始工作之前，我需要一些输入，这样我就不会朝错误的方向工作。任何有关于如何做的好建议或你得到的任何想法的页面都非常受欢迎。/托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:17:00.667

这很简单。如果您对 jQuery 有一定的经验，我建议您将其包含在此处，这会使事情变得更简单。

假设您确实使用 jQuery，您只需在用户更改 html 输入中的值时调用 bar() 函数。首先只需更改您的 bars() 声明，以便可以使用值调用它。像这样：

```
function bars(userVal) {
    // All your existing code ...
} 
```

然后你需要清除上次调用 bar() 时绘制的任何内容。就像是：

```
function bars(userVal) {
    var canvas = document.getElementById("bars");
    if (canvas.getContext) {
        var ctx = canvas.getContext("2d");
        // Clear the bars that were drawn last time
        ctx.clearRect(x,y,w,h);
        // The rest of your existing code ...
    }
} 
```

clearRect 采用原点位置（x 和 y）以及高度和宽度（w 和 h），并将清除该区域中的画布。所以传入绘图区域的必要限制。

接下来向您的页面添加一个文本输入，并在更改时使用 jQuery 调用 bar()

```
$(document).ready(function() {
    $("input").on("change", function() {
        var value = $(this).val();
        bars(value);
    });
}); 
```

最后，您必须决定要如何处理用户输入的值。这完全取决于你，但我想一个快速简单的测试来检查它是否有效，只是在一个绘图调用中使用一个数值。

例子：

```
// This would change the start position of a bar
ctx.fillRect(userVal, 260, 30, 230);
// This would change the width of a bar
ctx.fillRect(90, 260, userVal, 230);
// This would change the colour of a bar
ctx.fillStyle = "rgba(userVal, 50, 0, .4)"; 
```

玩得开心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:59:45.473

看看[fabricjs](http://fabricjs.com/)。使用画布做相对简单的事情开始变得非常复杂，虽然它也支持交互，但这似乎让生活更轻松。了解基本原理很重要，但不要试图在没有木工工具的情况下建造房屋。

如果你对绘图更感兴趣，你应该看看[flot](http://code.google.com/p/flot/)。

然后对于我们中间的冒险家，有[三个](http://mrdoob.github.com/three.js/)情节 3d。虽然你应该努力做到这一点。

# jquery - easyToolTip jquery 显示两个表

> ID：10089251
> 
> 赞同：1
> 
> 时间：2012-04-10T12:57:40.410
> 
> 标签：jquery, css

我有这个代码：

```
<td><table class="inner">
                        <?php 
                        foreach($inner_info as $k=>$v)
                        {
                            if($v['type']=="pardakhti"){
                                echo "<tr><td title='<table>
                                <tr>
                                <td><strong>نوع پرداخت</strong></td>
                                <td>".convert_pay_type($v['pay_type'])."</td>
                                </tr>
                                <tr><td>تاریخ</td><td>".$v['date']."</td></tr>

                                </table>'>".$v['amount']."</td></tr>";
                            }
                            else{
                                echo "<tr><td>0</td></tr>";
                            }
                        }
                        ?>
                    </table>
                </td> 
```

jquery部分是：

```
 $(document).ready(function(){  $("td").easyTooltip();
    $("td").easyTooltip({       tooltipId: "easyTooltip2",  });      }); 
```

和 CSS 是：

```
#easyTooltip2{
padding:5px 10px;
    border:1px solid #195fa4;
    background:#195fa4 url(bg.gif) repeat-x;
    color:#fff;
    }
#easyTooltip2 table{
    margin: 0px;
    font-size: 10px;
}
#easyTooltip2 td{

    font-size: 10px;
    border:none;

}
    .inner td {
    text-align: center;
    height: 10px;
    box-shadow: none;

    padding: 10px;
} 
```

但它出现错误，截图链接：![截图](../Images/c7164ba5620226f4f9a8d45d8a7eed39.png)

这里有什么问题？正如您所看到的，有一个宽度和高度错误的底衬表以及应该完全删除的填充。为什么有两张桌子？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:11:52.337

那是完全错误的。整张桌子作为属性？？

```
<td><table class="inner">
        <?php 
        foreach($inner_info as $k=>$v)
        {
            if($v['type']=="pardakhti"){
                echo "<tr><td><table>
                <tr>
                <td><strong>نوع پرداخت</strong></td>
                <td>".convert_pay_type($v['pay_type'])."</td>
                </tr>
                <tr><td>تاریخ</td><td>".$v['date']."</td></tr>

                </table>'".$v['amount']."</td></tr>";
            }
            else{
                echo "<tr><td>0</td></tr>";
            }
        }
        ?>
    </table>
</td> 
```

即使这样，也有两张桌子要上来。

我建议这个标记

```
<td>
        <?php 
        foreach($inner_info as $k=>$v)
        {
            if($v['type']=="pardakhti"){
                echo "<strong>نوع پرداخت</strong>".
                convert_pay_type($v['pay_type']).
                "<span>تاریخ</span>".
                $v['date'].
                $v['amount'];
            }
            else{
                echo "0";
            }
        }
        ?>
</td> 
```

# c# - 霜日不存在

> ID：10089256
> 
> 赞同：0
> 
> 时间：2012-04-10T12:58:10.560
> 
> 标签：c#, console-application

我想结束 100frostDays 但我想我错了。

它只是一个 for 循环 + 数组代码。

```
for (int i = 0; i < 100; i++)
{

  System.Random RandNum = new System.Random();
  int nyrHiti = RandNum.Next(-10, 50);
  Console.WriteLine(nyrHiti);
  int[] frostDays = new int[100];

}

Console.ReadLine();                    

Console.WriteLine(frostDays[0]);
Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T13:00:29.500

我不知道你在做什么，但你的代码有几个我们可以轻松修复的常见错误：

```
System.Random RandNum = new System.Random();
int[] frostDays = new int[100];
for (int i = 0; i < 100; i++) {
    int nyrHiti = RandNum.Next(-10, 50);
    Console.WriteLine(nyrHiti);
    frostDays[i] = nyrHiti;
}
Console.ReadLine();

Console.WriteLine(frostDays[0]);
Console.ReadLine(); 
```

这可能会让你接近你的意图。您需要`Random`在循环之外声明您的实例，并且`frostDays`在`for`之后需要时它仍然在范围内，并且您需要`frostDays[i]`在循环中分配，否则它只是长度为 100 的零数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T12:59:11.693

这将不起作用，因为`frostDays`您的`for-loop`. 必须在循环之外声明它才能被`Console.WriteLine(...)`. 但是，它将充满 0，所以我不确定你打算在这里做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T12:59:51.897

您的数组在循环内声明，其可见性仅限于此循环。在循环之外声明它，它将起作用。

```
int[] frostDays = new int[100];

for (int i = 0; i < 100; i++)
{    
    System.Random RandNum = new System.Random();
    int nyrHiti = RandNum.Next(-10, 50);
    Console.WriteLine(nyrHiti);
}
Console.ReadLine();

Console.WriteLine(frostDays[0]);
Console.ReadLine(); 
```

但是，由于您不对其进行任何操作，因此每次都会返回 0。也许您想要的是将`i`选项卡的第 th 值设置为您刚刚选择的随机数？在这种情况下，`frostDays[i] = nyrHiti`请在循环体的末尾使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T13:00:17.033

您必须在循环外定义frostDays。

# php - 用户注册和MVC

> ID：10089258
> 
> 赞同：0
> 
> 时间：2012-04-10T12:58:15.153
> 
> 标签：php, model-view-controller, yii

而是一个基本问题，尽管我对架构有点困惑。
我正在使用 Yii 框架编写一个网站。
有一个 SiteController 和 AdminController（不是我建造的）。
所有站点管理都在 AdminController 中，用户交互在 SiteController 中。
我知道这是不正确的，因为它不是基于模型的。

现在，我想实现用户注册。用户可以注册，管理员可以更改他的属性。
在现有控制器中构建 UserController 或管理上述所有内容更好（不破坏以前的逻辑）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T13:12:29.940

## 根据 MVC 标准，最好按功能组拆分控制器。

### 认证控制器

处理身份验证/注册/删除。为所有其他控制器首先检查的登录设置会话变量。

```
function register(){
}
function logout(){
}
function edit(){
}
function login(){
} 
```

### 管理员控制器

处理所有管理任务

### 用户控制器

处理所有用户任务。也许编辑个人资料，或发布到个人博客？

### 前控制器

处理所有面向公众的任务，显示非基于身份验证的页面等。

* * *

### 不相关，CodeIgniter 示例

我在我的 CI 项目中使用这种方法。这些信息会因 Yii 框架而异，但它可以让您了解正确的 MVC 设置。

我有核心控制器，例如：

`application/core/FRONT_Controller.php` 这个控制器扩展了 CI_Controller 并处理了我面向 pub 的页面的所有设置。我所有面向公众的控制器都扩展了 FRONT_Controller 而不是 CI_Controller。

`application/core/USER_Controller.php` 这个控制器处理我所有的用户身份验证。

`application/core/ADMIN_Controller.php` 此控制器进行初步检查，我所有基于管理员的控制器再次扩展此控制器，因此身份验证立即启动...... IE：

```
if (!$this->tank_auth->is_logged_in()){
        redirect(site_url('/user/login/'));
    }else{
        $this->data['user'] = array(
            'user_id' => $this->tank_auth->get_user_id(),
            'username' => $this->tank_auth->get_username(),
            'emailAddress' => $this->tank_auth->get_email(),
            'firstname' => $this->tank_auth->get_firstname(),
            'lastname' => $this->tank_auth->get_lastname(),
            'userlevel' => $this->tank_auth->get_userlevel(),
            'avatar' => $this->tank_auth->get_avatar(),
            'last_login' => $this->tank_auth->get_last_login()
        );
    } 
```

`application/controllers/blog.php:`

```
class Categories extends ADMIN_Controller{

function __construct(){
    parent::__construct();

} #end constructor function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:11:57.950

用户详细信息将存储在一个表中，即 tbl_users。为这些用户和相关控制器创建模型是使用 Yii 的正确方法。

您将拥有一个带有验证规则的模型**user.php**，以及指向 dbtable 的链接

您将拥有一个控制器**UserController.php**，其中包含与此模型相关的所有操作和相关访问规则。

我通常使用的是 SiteController.php 中的 actionRegister()**覆盖**UserController，您可以将其用于管理目的或根本不使用。

所以你会有类似的东西：

yousite.com?r=site/register 或 yoursite.com/register/ 如果您使用 url 重写

# css - CSS菜单悬停不起作用

> ID：10089269
> 
> 赞同：3
> 
> 时间：2012-04-10T12:58:49.417
> 
> 标签：css

我想建立一个菜单，每一个都`<li>`悬停在外面。但奇怪的是，整个菜单总是悬停在外面。这是[小提琴代码。](http://jsfiddle.net/PhilippB/X96KE/)

**我有以下CSS代码：**

```
body {
background-color: #eee;
margin: 0;
padding: 0;
overflow: hidden;
}

.tabs {
    width: 80%;
    position: fixed;
    bottom: -20px;
    left: 100px;
}
.tabs ul {
    display:block;
}
.tabs li {
    width: 60px;
    height: 80px;
    margin-bottom: -20px;
    padding: 10px;
    float: left;
    list-style: none;
    display: inline;
    background-color: #ccc;
    -moz-border-radius-topleft: 10px;
    -moz-border-radius-topright: 10px;
    -moz-border-radius-bottomright: 0px;
    -moz-border-radius-bottomleft: 0px;
    -webkit-border-radius: 10px 10px 0px 0px;
    border-radius: 10px 10px 0px 0px;
    font-family: verdana;
    text-align: center;
}
.tabs li:hover {
    margin-bottom: 20px;
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:09:44.357

原因是，当你给它留出**余量**时，它就会被 push whole `ul`。最好给`bottom`而不是`margin`。像这样写：

```
.tabs li:hover {
    bottom: 20px;
} 
```

检查这个[http://jsfiddle.net/X96KE/17/](http://jsfiddle.net/X96KE/17/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T13:22:46.613

如果您熟悉它，使用 jQuery 将解决您的问题试试这个

```
 jQuery("li").mouseover(function() {
    jQuery(this).css("margin-bottom","20px");
  }).mouseout(function(){
   jQuery(this).css("margin-bottom","0px");
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:16:47.800

这是因为您还没有指定如何处理 margin-top。这是一个更新的示例：http: [//jsfiddle.net/X96KE/18/](http://jsfiddle.net/X96KE/18/)

```
.tabs li:hover {
    margin-bottom: -40px; 
    margin-top: -40px;
} 
```

# maven - 运行Maven作业时的Jenkins多配置传递参数

> ID：10089270
> 
> 赞同：2
> 
> 时间：2012-04-10T12:58:54.860
> 
> 标签：maven, continuous-integration, jenkins

我正在尝试为针对多个浏览器运行的项目的硒测试设置 Jenkins 多配置作业。我检查了不同的选项，多配置工作似乎很合适，但我不能让 maven 正确地将参数传递给 maven。

我有一些参数需要传递给 maven，主要是 browserName 和 appDomain，还有一个 Profile 来运行测试。要配置作业，我执行以下操作：

*   定义从中签出代码的 SVN 存储库。
*   将 browserName 设置为用户定义轴，其值为 FIREFOX、CHROME、IE。
*   创建一个“调用顶级 Maven 目标”类型的构建步骤，这就是我遇到问题的地方。这部分的配置与其他工作类型不同，通常有一个名为“目标”和“选项”的字段用于放置所有内容，但在这种情况下分为不同的字段。所以我不知道属性和配置文件到底放在哪里。

    a) 合乎逻辑的事情，我将目标放在“目标”字段中，将参数和选项放在“属性”字段中，如图所示：

![第一种情况](../Images/9b2158b2f9b2b2e8ba80493383e6fa83.png)

在这种情况下，作业正常运行而不执行测试，因为配置文件没有执行。

b）如果我只将配置文件放在“目标”字段中，则日志中的 Maven 调用是：

```
/opt/apache-maven-2.2.1/bin/mvn -DbrowserName=CHROME "-D-Dappdomain=0 -Dtestenv=test  -Drc=true -DsuiteXmlFile=testOne.xml -U -Dapp.instance.key=jenkins -Denv=default" clean verify -Pwebtests 
```

例外是：

```
[INFO] [enforcer:enforce {execution: enforce-property}]
[WARNING] Rule 0: org.apache.maven.plugins.enforcer.RequireProperty failed with message:
You must pass the appdomain as parameter! Example: -Dappdomain=20
[WARNING] Rule 1: org.apache.maven.plugins.enforcer.RequireProperty failed with message:
You must pass the test environment as parameter! Example: -Dtestenv=beta 
```

所以没有得到属性

c）最后，如果我将所有内容都放在目标字段中，则会出现以下异常：

```
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] One or more required plugin parameters are invalid/missing for 'property:merge'

[0] Inside the definition for plugin 'property-maven-plugin' specify the following:

<configuration>
  ...
  <environment>VALUE</environment>
</configuration>
-OR-
on the command line, specify: '-Denv=VALUE' 
```

我尝试了一项正常且参数化的工作，并且效果很好……

Jenkins 版本是：1454，Maven 是 2.2.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:13:32.960

我发现 Jenkins 机器没有正确配置。我在另一个实例中进行了尝试，并且使用以下配置一切正常：

```
-Goals: clean verify Pwebtests
-Paramenters: (properties file format) 
appDomain=0 
testenv=test 
env=default
.... 
```

作为旁注，其他工作正在工作，因为他们正在使用 Jenkins Maven 插件，该插件似乎使用 java 来启动一个调用 Maven 的 Hudson 类，而不是直接调用 mvn 命令，这是在构建步骤时发生的情况键入“调用顶级 Maven 目标”

# html - 动态样式表语言和浏览器支持

> ID：10089272
> 
> 赞同：2
> 
> 时间：2012-04-10T12:59:00.970
> 
> 标签：html, css, stylesheet, less

我正在玩弄使用动态样式表语言向传统 CSS 添加功能的想法。这对于我正在从事的项目非常有用。到目前为止，我关注的是[LESS](http://lesscss.org)。

我想让它基于客户端，所以可能 JS 是我的选择。但是，我有一些问题希望有人能给我提示：

1.  [LESS](http://lesscss.org)声明它适用于客户端的 Chrome、Safari 和 FF。IE呢？完全不支持？那么 CSS 在 IE 中的表现如何呢？
2.  除了LESS，还有其他类似的工具吗？我研究过 SASS，但它似乎是基于 Ruby 的，我对此完全不熟悉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:55:54.050

LESS 支持 IE。我使用该功能。

# windows - 为什么这段代码能让我检测到调试器？

> ID：10089273
> 
> 赞同：16
> 
> 时间：2012-04-10T12:59:04.793
> 
> 标签：windows, debugging, assembly, x86, reverse-engineering

为什么下面的汇编代码是反调试工具？

```
l1:
call l3
l2:
;some code
l3:
mov al, 0c3h
mov edi, offset l3
or ecx, -1
rep stosb 
```

我知道[C3h](http://ref.x86asm.net/coder32.html#xC3)是`RETN`，并且我知道根据偏移量`stobs`将值写入操作码，并且由于.`al``edi``ecx``rep`

我也知道如果它们在英特尔架构上作为其原始格式预取，`stobs`并且将运行。`stosw`

如果我们以调试模式运行程序，则预取无关紧要，并且 l2 标签将运行（因为它是单步的），否则如果没有调试器，它将在 l1 和 l3 之间进行乒乓操作，对吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-10T14:50:25.440

当程序被调试（即单步）预取队列在每一步（发生中断时）被刷新。但是，当正常执行时，不会发生`rep stosb`. 即使有内存写入缓存区域，较旧的处理器也不会刷新它，以支持除`rep movs`和之外更改的自修改代码`rep stosb`。（IIRC 它最终在 i7 处理器中得到修复。）

这就是为什么如果有一个调试器（单步）代码将正确执行，何时`rep stosb`替换为`ret` `l2`将被执行。当没有调试器`rep stosb`时将继续，因为`ecx`它最终会写到它不应该写的地方，并且会发生异常。

[本文介绍了这种](http://pferrie.tripod.com/papers/unpackers.pdf)反调试技术。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T14:59:12.867

调试器在这里唯一要做的就是添加时间延迟。这可能是它如何工作的关键。英特尔（我假设是 AMD）手册明确表示，除非程序向 CPU 发出包含修改后指令的高速缓存行已更改的信号，否则不能保证自修改代码“工作”。这是为了使预取逻辑便宜；芯片设计人员不希望硬件不断测试指令高速缓存行的每个字节是否仍然有效。

所以我假设调试器发生*的*事情是 l1 调用 l3，它在 rep stosb 之后存储一个返回，并且由于调试器在单步中引起的长时间延迟，返回被执行，迫使包含 l3 的缓存行在更改后重新获取。

如果没有调试器，我会猜测 stosb 执行后的指令（未显示）。如果它是跳转到“无调试器”，那么跳转的成功将表明没有使用单步调试器。

如果我在应用程序中发现此代码，我会拒绝运行它。

# c++ - Directx11 - CreateTexture3D OUT_OF_MEMORY 错误

> ID：10089282
> 
> 赞同：1
> 
> 时间：2012-04-10T12:59:22.093
> 
> 标签：c++, directx, 3d, directx-11

我在while循环中创建一个3d纹理只是为了实验。虽然我没有忘记在最后释放它，但在300左右的一些循环后导致OUT_OF_MEMORY错误。
我的代码是：

```
int cntr = 0;
while(1)
{
    ID3D11Texture3D* pTex3D = NULL;
    D3D11_TEXTURE3D_DESC desc;
      desc.Width              = 256;
      desc.Height             = 256;
      desc.Depth              = 20;
      desc.MipLevels          = 1; 
      desc.Format             = DXGI_FORMAT_R32G32B32A32_FLOAT;
      desc.Usage              = D3D11_USAGE_DEFAULT ; 
      desc.BindFlags          = D3D11_BIND_SHADER_RESOURCE | D3D11_BIND_UNORDERED_ACCESS ;
      desc.CPUAccessFlags     = 0;  
      desc.MiscFlags          = 0;
    HRESULT hr = g_pd3dDevice->CreateTexture3D(&desc, NULL, &pTex3D);
    SAFE_RELEASE( pTex3D );

    Sleep(10);

    if( hr != S_OK )
        printf("");

    cntr++;
} 
```

请在这里帮助我。谢谢

# r - 在 for 循环中组合不同的矩阵

> ID：10089283
> 
> 赞同：2
> 
> 时间：2012-04-10T12:59:25.590
> 
> 标签：r, binding, for-loop

我想在循环中创建不同的矩阵，然后组合（cbind 或 rbind）它们。但是以下代码不起作用。为什么不？以及如何解决？

```
dependent = matrix(c(30,184,6,106), 2, 2, byrow=T)
independent = c(160,166)
expected = numeric()
{for(i in 1:length(independent))
a = dependent*independent[i]/sum(independent)
expected = cbind(expected,a)} 
```

这给出了：

```
expected
        [,1]     [,2]
[1,] 15.276074 93.69325
[2,]  3.055215 53.97546 
```

这是仅使用 for 循环的最终迭代的结果。所以结果就像只使用了 166，但没有使用 160。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:07:30.873

几点评论：

1.  您的`for`循环括号在错误的位置。你有：

    ```
    R> {for(i in 1:3) 
    +   cat(i, "\n")
    +   cat(i, "\n")
    + }
    1 
    2 
    3 
    3 
    ```

    相反，您应该拥有：

    ```
    R> for(i in 1:3) {
    +   cat(i, "\n")
    +   cat(i, "\n")
    + }
    1 
    1 
    2 
    2 
    3 
    3 
    ```

    当你构造一个`for`循环并省略括号时，只`for`使用语句后面的第一行。

2.  您可以`for`通过保存结果来提高循环效率，`sum(independent)`因为每次迭代都不会改变，即

    ```
     for(i in 1:length(independent)){
          a = dependent*independent[i]
          expected = cbind(expected,a)
       }
       expected  = expected//sum(independent) 
    ```

3.  事实上，你可以向量化整个计算

    ```
    y = sapply(independent, '*', dependent)
    matrix(y, ncol=4,nrow=2)/sum(independent) 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T13:24:30.907

您可以完全放弃 for 循环并使用：

```
X <- lapply(independent, function(x) (dependent*x)/sum(independent))
do.call("cbind", X) 
```

编辑：我编辑了我的回复，因为订单不正确。

# java - SVG建设区域几何？

> ID：10089285
> 
> 赞同：3
> 
> 时间：2012-04-10T12:59:30.003
> 
> 标签：java, svg, geometry

是否有 SVG 函数执行类似于`Area`Java 中提供的 CAG 操作（http://docs.oracle.com/javase/6/docs/api/java/awt/geom/Area.html）？

我想直接使用 SVG 库（例如 Batik）执行这些操作，而不是通过执行 SVG 导出的 Batik Graphics2D 类（因为我宁愿使用 SVG API 而不是 Java2D）。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T15:04:59.413

SVG没有内置任何功能，它只是一个图形绘制规范..（除了一些动画功能）

我会预处理您的应用程序正在使用的矢量值，然后将它们应用于 SVG 的渲染。

在不了解您的平台或您的 SVG 应用程序的情况下……很难进一步提供帮助。SVG可以用在很多地方和地方！:)

对 Java 的引用允许我假设您使用它作为您的接口引擎？但仅此而已..如果您想知道圆的面积，则必须在 DOM 树中找到圆，从节点中挤出属性，然后将它们推入标准 CAG 类中进行数学运算为你。

# sql - SQL - 2个表之间的基本查询

> ID：10089286
> 
> 赞同：1
> 
> 时间：2012-04-10T12:59:34.180
> 
> 标签：sql

我想知道MYSQL（编辑HeidiSQL）

我有 2 个表（电子邮件和垃圾邮件）2 行（ID、EMAIL）并且我想清理我的数据库：设置操作示例中使用的表

```
 EMAIL

                                  x  y
                           ------------------
                                  1  one@edu.com     
                                  2  two@edu.com     
                                  2  two@edu.com      
                                  3  three@edu.com    

                                SPAM

                                  x  z
                           ------------------
                                  1  one@edu.com      
                                  2  two@edu.com      
                                  4  four@edu.com 
```

通常我使用 EXCEPT 但它不适用于 MYSQL。

过程 sql; 标题 'EMAIL EXCEPT SPAM' select * from sql.EMAIL except select * from sql.SPAM;

生成仅在第一个查询结果中的行（除外）

```
 EMAIL EXCEPT SPAM

                                  x  y
                           ------------------
                                  3  three@edu.com 
```

我尝试使用 WHERE NOT EXISTS 但我不知道。

你能帮我查询一下吗：

从电子邮件中选择 * 在哪里 ... ????

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:02:57.267

```
SELECT * FROM EMAIL WHERE y NOT IN (SELECT z FROM SPAM) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T13:03:32.860

垃圾邮件中带有 Null 的左外连接应该可以工作。

```
SELECT E.*
FROm EMAIL E
LEFT JOIN SPAM S
  ON E.Email = S.Email
WHERE S.Id IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:45:44.320

> 通常我使用 EXCEPT 但它不适用于 MYSQL。

`EXCEPT`在 mySQL 中不支持。请注意，在没有显式`ALL | DISTINCT`关键字的情况下，`EXCEPT`默认为`EXCEPT DISTINCT`. 因此，在您的解决方法中，您应该明确使用`SELECT DISTINCT`（因为`SELECT`默认为`SELECT ALL`）。

> 我尝试使用 WHERE NOT EXISTS

```
SELECT DISTINCT y 
  FROM EMAIL 
 WHERE NOT EXISTS ( SELECT * 
                      FROM SPAM
                     WHERE y = z ); 
```

# c - 使用 sendto 时参数无效

> ID：10089288
> 
> 赞同：1
> 
> 时间：2012-04-10T12:59:46.547
> 
> 标签：c, linux, networking

我试图通过 C 中的 UDP 套接字发送缓冲区，但我总是在 sendto 中收到无效参数错误。我只是没有找到错误。任何人都可以帮助我。提前致谢。

这是我的代码：

```
/**/    void    IPCSend(char *pazClientAddress, int iClientPort, char *pazBuffer )
{
    int iSocket;
    /* */
    if ((iSocket = socket(AF_INET, SOCK_DGRAM, 0)) != -1)
    {
        int iSendToReturn;
        struct sockaddr_in sinServerAddress;
        struct hostent *pstHost;
        /* */
        pstHost = (struct hostent *)gethostbyname((char *)pazClientAddress);
        /* */
        sinServerAddress.sin_family = AF_INET;
        sinServerAddress.sin_addr = *((struct in_addr *)pstHost->h_addr);
        sinServerAddress.sin_port = iPortNumber;
        bzero(&(sinServerAddress.sin_zero),8);
        /* */
        fprintf(stdout,"sending '%s' to client '%s:%d'\n",pazBuffer,pazClientAddress,iClientPort);
        iSendToReturn = sendto(iSocket, pazBuffer, sizeof(pazBuffer), 0, (struct sockaddr *)&sinServerAddress, sizeof(sinServerAddress));
        /* */
        if(iSendToReturn != -1)
            fprintf(stdout,"%d bytes sent\n",iSendToReturn);
        else
            perror("SendTo");
        /* */
        close(iSocket);
    }
    else
        fprintf(stdout,"could not connect to server\n");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:03:06.590

首先，您犯了新手 C 程序员常犯的错误：使用`sizeof`来获取指针的大小。变量`pazBuffer`是*指针*，而不是数组，因此`sizeof`运算符不会返回数组长度，这正是您想要的。您的`IPCSend`函数需要将长度`pazBuffer`作为单独的参数：

```
void IPCSend(char *pazClientAddress, int iClientPort, char *pazBuffer, size_t len) 
```

至于你得到的错误 - 它可能与其他东西有关。`Invalid argument`意味着您传递给的参数之一在`sendto`某种程度上是无效的。由于我看到您正在正确初始化套接字描述符，因此问题可能是发送缓冲区在某种程度上无效 - 可能是空指针或错误地址。这意味着问题在您发布的代码中并不明显，并且可能在某些调用`IPCSend`.

# jquery - 试图让填充和行高在 FF 中正确显示

> ID：10089293
> 
> 赞同：0
> 
> 时间：2012-04-10T12:59:54.347
> 
> 标签：jquery, css, padding, easing

我有一个使用 jquery 切换子菜单的菜单。在 chrome、EI 和 Safari 中看起来不错。Firefox 只是没有正确呈现填充。该网站是 www.caitmizzi.com/home

我在这里有一个 jsfiddle [http://jsfiddle.net/6GwjA/](http://jsfiddle.net/6GwjA/) - 您必须选中左侧的 Query UI 1.8.16 框才能使其工作

非常感谢任何帮助

谢谢格雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:28:50.783

我不确定你为什么有以下CSS：

```
.subMenu{
    font-size: 115px;
    line-height: 20px;
    padding-top: 40px;
    padding-bottom: 40px;
} 
```

这是创建一个小的行高，缩小了元素的大小，但添加了填充，再次扩大了元素的大小。我猜不同的浏览器会以不同的方式解释这种边缘情况。

如果您删除这些属性（并让它继承与其他列表元素相同的设置），您可以覆盖内部列表的样式并获得更一致的效果。

我更新了你的 jsfiddle：http: [//jsfiddle.net/6GwjA/8/](http://jsfiddle.net/6GwjA/8/)

主要更改是 .subMenu 和 .subMenuStyle 类的添加。

```
.subMenu{
    font-family: Impact, Charcoal, sans-serif;
    list-style-type: none;
}
.subMenuStyle {
    font-size: 15px;
    line-height: 30px;
} 
```

# php - 通过构造函数或方法传递对象

> ID：10089294
> 
> 赞同：0
> 
> 时间：2012-04-10T13:00:01.973
> 
> 标签：php

所以我有一个可以保存包含一些数据的字符串的对象，我必须验证对象或字符串，但我不知道为什么我会将它传递给方法而不是构造函数，是否存在某些情况下我应该通过它构造函数而不是方法还是通过方法而不是构造函数？

这是 PHP 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:07:40.800

构造函数也是方法的区别只是在它的用法上。在创建某个类的对象时我们需要做一些事情，因此对于这些事情，我们将对象/设置参数传递给构造函数，当我们需要在该类的上下文中处理一些数据时，我们使用方法。我认为这就是你想问的“方法和构造函数的黑白使用差异”。如果您遇到一些编码问题，请告诉我场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:06:21.530

如果您需要将对象保存在对象中以供一个或多个方法使用，则将其传递给构造函数。然后，如果您将它或它的副本分配给成员变量，它就会成为对象“状态”的一部分。

如果要传递的对象是瞬态的，并且您只在方法的生命周期内需要它，那么您可以将它作为参数传递给方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T03:48:05.940

通过对象构造函数传递 arg 只有一个名义上的好处，那就是您正在删除直接调用 setter(s) 的额外步骤。

```
$foo = new Foo($dbo);

// Same thing as 
$foo = new Foo();

$foo->setDbo($dbo); 
```

就个人而言，我更喜欢显式调用 setter 而不是将它们传递给构造函数，因为我不想最终得到 15 个签名参数，而且我可以看到调用代码是如何使用对象的。

有时，我确实使用构造函数来准备相关对象，但从不用于传递参数。

# vb.net - VB Caesar Shift 中的 Mods 和 ASCII

> ID：10089295
> 
> 赞同：1
> 
> 时间：2012-04-10T13:00:13.893
> 
> 标签：vb.net, ascii, modulo

我有这个代码可以将字母表移动一定量。字母表的大小是 26。当我输入更大的尺寸时（例如 22），我会看到一些奇怪的字符。我想我需要将 ASCII 字母表修改为 26 才能使其正常工作，但我不太确定要修改哪个位。

基本上我需要环绕字母表（一旦到达 Z，它就会回到字母 A）我是否必须创建一个字典才能使 mod 工作（如 A = 0...Z = 26）或者我可以坚持使用正常的 ASCII 表？下面是代码：

```
Public Function encrypt(ByVal input As String) 'input is a variable within the funcion
    Dim n as Integer
    Dim i As Integer
    n = key.Text Mod 26 'gets what is in the text box of 'key' and sets it as n
    ' the key is a multiple of 26 so 26 will  = 0

    'need to remove white spaces
    While input.Contains(" ")           'when the input text contains a space
        input = input.Replace(" ", "")  'replaces it with no space.
    End While

    For i = 1 To Len(input)                                     'find the length of the input
        Mid(input, i, 1) = Chr(Asc(Mid(input, i, 1)) + n)       'chr returns the character associated with the specified character code
        '
    Next
    encrypt = input
End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:58:24.117

看看这段代码：

```
For i = 1 To Len(input)                                     'find the length of the input
    Mid(input, i, 1) = Chr(Asc(Mid(input, i, 1)) + n)       'chr returns the character associated with the specified character code
    '
Next 
```

字符串索引是从**0 开始的**。您的第一个索引是 0，而不是 1！此外，您正在分配函数调用的结果。您需要改为构造一个新字符串。

您没有说，但是您使用 Replace 和 Contains 方法的方式表明.Net，如果是这样，我会这样做：

```
Public Function encrypt(ByVal key As Integer, ByVal input As String) As String 'Don't forget the return type on the function
    key = key Mod 26
    Return New String(input.Replace(" ", "").ToUpper().Select(Function(c) Chr(((Asc(c) + key - Asc("A"c)) Mod 26) + Asc("A"c))).ToArray())
End Function 
```

就这样，它几乎是一条线。我现在可以通过这样调用它来看到它的工作原理：

```
Encrypt("C"c, "the quick brown fox jumps over the lazy dog")
Encrypt("D"c, "the quick brown fox jumps over the lazy dog") 
```

结果：

```
BPMYCQKSJZWEVNWFRCUXMLWDMZBPMTIHGLWOA
CQNZDRLTKAXFWOXGSDVYNMXENACQNUJIHMXPB 
```

查找为单词“lazy”映射的结果，您将看到“a”正确地换行为“z”和“y”，并且“D”键结果是“C”结果的一个字母.

# deployment - 注册表和证书的最佳部署方法

> ID：10089299
> 
> 赞同：0
> 
> 时间：2012-04-10T13:00:27.903
> 
> 标签：deployment, installation, registry, certificate

我需要在我的每台客户端计算机上的某些商店中部署一些注册表项并安装证书。

为了避免错误并使其易于使用，我想创建一个自动化流程来执行此操作，但我不知道有哪些选项。

升级 Windows 注册表并安装一些证书的可能性是什么？

*   批处理文件？
*   安装程序？
*   部署包？

最甜蜜的事情是允许我的客户通过单击按钮直接进入我的 ASP.net 页面之一来配置他们的计算机，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:38:54.710

我面临以下问题：

在 Windows XP 上，用于部署证书的名为“certutil”的实用程序不可用。要安装它，我必须在每个客户端上安装 Windows server 2003 管理工具，这很麻烦。

到目前为止，我发现的最佳解决方案是从注册表中导出我的证书，然后通过我客户的注册表安装它们！我只能共享一个大的 .REG 文件来完成所有的安装工作。

我的每个证书都必须进入以下注册表项：

[HKEY_CURRENT_USER\Software\Microsoft\SystemCertificates\Root\Certificates]

通过导出我的注册表，我可以共享导出的 .REG 文件以允许其他用户安装它们！

我可以使用那个解决方案吗？有没有更好的办法 ？

谢谢你的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T15:56:51.280

我再次查看了我正在使用的组策略首选项。我启用了一个选项“在登录用户的安全上下文中运行（用户策略选项）”，现在注册表项持续存在

# php - 未定义的索引 - 奇怪？

> ID：10089305
> 
> 赞同：0
> 
> 时间：2012-04-10T13:00:41.863
> 
> 标签：php, warnings, undefined-index

我在未定义的索引中遇到了一些奇怪的事情..

```
$vatcode = 'U25';
echo $this->vatcode_ids['U25']."\n";
echo $this->vatcode_ids[$vatcode]."\n";

foreach($this->vatcode_account_ids as $id => $vatcode){
    echo $vatcode."\n";
    echo $this->vatcode_ids[$vatcode]; // undefined index
} 
```

这返回：

```
681
681
U25  

Notice: Undefined index: U25   in /var/www/.....php on line 64 
```

我不明白？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:17:40.357

从通知按摩之前打印的空行中，我假设您的 $vatcode 变量包含一些结束的换行符。如果是这样，它与 $this->vatcode_ids 数组中的任何键都不匹配。

您应该使用 Dan Lee 在评论中建议的一些修剪功能。

# mysql - MySQL 存储过程权限

> ID：10089308
> 
> 赞同：32
> 
> 时间：2012-04-10T13:00:45.843
> 
> 标签：mysql, stored-procedures, permissions, grant

我试图授予用户在 MySQL 数据库上的存储过程级别运行存储过程的权限，而不是允许用户执行数据库中的任何存储过程。我试图执行以下代码：

```
GRANT EXECUTE ON myDB.spName TO 'TestUser'@'localhost'; 
```

但我不断收到以下错误：

`Illegal GRANT/REVOKE command, please consult the manual to see which privileges can be used.`

我尝试将其更改为以下内容：

```
GRANT EXECUTE ON PROCEDURE myDB.spName TO 'TestUser'@'localhost'; 
```

我得到一个不同的错误说明：

`Cant find any matching rows in the user table.`

我很困惑我哪里出错了？

同样在 MySQL Workbench 上，我似乎看不到任何通过 GUI 在存储过程级别授予权限的方法。这是正确的还是我错过了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-04-10T13:29:32.147

您的第二次尝试是正确的方法：

```
GRANT EXECUTE ON PROCEDURE myDB.spName TO 'TestUser'@'localhost'; 
```

但如果这不起作用，请验证...

a）您（运行所有这些命令的用户）具有授予权限[即 WITH GRANT OPTION]。如果你是 root，那么你有授权。

b）您授予执行权限的用户存在，例如

```
 select user from mysql.user where user  like  'test%'; 
```

如果没有，则创建用户，例如

```
CREATE USER 'TestUser'@'localhost' IDENTIFIED BY 'passwordxxxx';
#depending on your needs
GRANT SELECT,DELETE,UPDATE PRIVILEGES ON myDb.* TO 'TestUser'@'localhost'; 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-14T18:19:44.260

要回答有关 MySQL Workbench 的问题的另一部分，我遇到了同样的问题。但是在实验之后我发现如果你创建一个角色并打开底部的权限选项卡，你可以将例程从模型概述拖到对象框中。从那里只需单击新添加的对象并为该角色添加所需的权限。

希望有帮助:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-23T13:20:16.580

我找到了这段代码：**授予对存储过程的权限**

```
USE [Database];   

GRANT EXECUTE ON OBJECT::[dbo].[your stored procedure]
    TO databaseUser; 
```

从这个页面：[docs.microsoft.com](https://docs.microsoft.com/en-us/sql/relational-databases/stored-procedures/grant-permissions-on-a-stored-procedure?view=sql-server-ver15)

# jsf - JSF / Richfaces 应用程序的 IE8 兼容性

> ID：10089309
> 
> 赞同：1
> 
> 时间：2012-04-10T13:00:48.233
> 
> 标签：jsf, internet-explorer-8, richfaces, internet-explorer-6, compatibility

我有 JSF / Richfaces 网络应用程序。此应用程序最初是为**IE6 浏览器**设计的。现在我们也必须将它移植到**IE-8**。应用服务器是 Weblogic 10.3。我尝试了以下解决方案。

1.  添加 Header 参数的过滤器，X-UA-Compatible。
2.  JSF PhaseListener 添加标头参数，X-UA-Compatible。
3.  在页面头部的第一行添加了 Meta 标签。

以上都不起作用。此外，我无法使用任何自定义标头值。HttpRequestWrapper 也不能正常工作。

请提出解决方案。我一直希望我可以在 JSF 中使用 scriptlet 或在 JSF 中的任何地方使用逻辑标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:10:11.533

IE8 中的`X-UA-Compatible`选项只能作为 IE7 兼容性的后备选项。它没有模拟 IE6 的选项。

正因为如此，您所处的情况——拥有一个为 IE6 编写但在 IE8 中无法运行的 Intranet 应用程序——是公司长期坚持使用 IE6 的主要原因之一：这可能非常困难升级。

当然，理想的解决方案是更新站点中的代码，使其在 IE8（或者更好的是 IE9）中工作。这可能是一个漫长而昂贵的过程，但没有官方的捷径解决方案。

如果你不能更新你的网站，你将不得不坚持使用 IE6。但是有一些解决方案可能会减轻这种痛苦。

显而易见的快速修复答案是将您的主要平台升级到 IE8 或 IE9，但继续运行 IE6，保留在虚拟机中，并将其仅用于需要它的特定站点。还有IETester的超便宜选项，它是一个可以在同一台机器上运行多个版本的IE（包括IE6）的应用程序。然而，众所周知，IETester 经常崩溃，因此可能不是一个理想的解决方案。它适用于在各种 IE 版本中测试网站，但不适用于实际完成有用的工作。

这些充其量只是权宜之计，但可以让您保持运行，同时允许您升级其余的基础架构。

一个更强大的答案可能会以[Browsium](http://www.browsium.com/)的形式出现。这是由一些前微软工程师推出的产品，旨在帮助旧的 IE6 特定站点在新版本的 Explorer 中工作。[另请参阅这篇文章](http://www.theregister.co.uk/2012/04/04/browsium_mhrc/)，了解他们可以做什么的一个很好的真实示例。

从长远来看，您最终将不得不更新您的网站；IE6 不能永远持续下去，即使是像 Browsium 这样的解决方案。但是这些解决方案可以让你避免在短期内做出改变。

如果您现在进行升级，我强烈建议您跳过 IE8 并尽可能直接升级到 IE9。IE8 已经过时，并且在其支持结束时会导致与 IE6 类似的升级问题（尽管可能没有那么糟糕）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:09:19.683

对于 IE 8 9 中的 Hide CompitibilityView Button 在 Jsf 中，您只需将此代码放在 PhaseListner 实现的类中

`@Override public void beforePhase(PhaseEvent event) { response.addHeader("X-UA-Compatible", "IE=edge"); }` 只需在已实现的 PhaseListner 类中添加此行

# javascript - Chrome 扩展跨域请求

> ID：10089310
> 
> 赞同：5
> 
> 时间：2012-04-10T13:00:51.617
> 
> 标签：javascript, google-chrome-extension, cross-domain

我知道这已经在这里讨论过很多次了，我已经阅读了大部分这些线程，但我似乎无法让我的脚本正常工作。

问题是我正在尝试使用 bitly api 来缩短 google chrome 扩展中的 url。我将用户登录名和 apiKey 保存在本地存储中，在我这样做之前我会验证它们。

这样做的代码是：

```
$.ajax({
        url:"http://api.bit.ly/v3/validate",
        dataType:'jsonp',
        data:{
            login: login,
            apiKey: apiKey,
            x_login :"test",
            x_apiKey :"test"
        },
        success:function (jo, textStatus, jqXHR) {
            if (jo.status_code == 200) {
                setItem('dg_BitlyApiKey', apiKey);
                setItem('dg_BitlyLogin', login);
                alert('Saved');
            } else {
                alert('Incorrect login and/or apiKey!')
            }
        }
    }); 
```

我确实将权限设置为，`"permissions": ["tabs", "notifications", "http://*/*", "https://*/*"]`但我仍然不断收到：

```
Refused to load script from 'http://api.bit.ly/v3/validate?callback=jQuery17204477599645033479_1334062200771&login=&apiKey=&x_login=test&x_apiKey=test&_=1334062201506' because of Content-Security-Policy. 
```

脚本本身在扩展之外工作，所以我认为问题不在脚本内，而是在权限范围内。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T17:13:30.897

问题是您实际上并不是在执行 XHR 请求，而是在对不安全的 HTTP 资源执行 JSONP 请求。请参阅问题[如何在扩展弹出窗口中加载外部 JavaScript](https://stackoverflow.com/questions/8478245/how-to-load-an-external-javascript-inside-an-extension-popup)和相关的[Chromium 错误报告](https://code.google.com/p/chromium/issues/detail?id=107538)。

> 是的，我们不再允许在扩展中使用不安全的脚本。如果您通过 HTTP 加载脚本，活跃的网络攻击者可以将脚本注入您的扩展程序，这是一个安全漏洞。

JSONP 通过在页面中动态添加新的脚本标签然后执行内容来运行。在您的情况下，脚本资源是通过 HTTP（而不是 HTTPS）获取的。如果您的扩展使用第 2 版扩展清单，则其后台页面无法获取非 HTTPS 脚本。

**解决方案：**如果您通过 HTTPS 使用 Bitly API，我相信这将解决您的问题。 **将您的 Ajax 调用发送到`https://api-ssl.bitly.com/v3/validate`**（而不是您的当前值`http://api.bit.ly/v3/validate`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:04:56.867

您需要打包您的应用程序/扩展程序以使跨域请求工作。托管应用程序将无法执行跨域请求。看：

[chrome 扩展中的跨域 XMLHttpRequest](https://stackoverflow.com/questions/9421933/cross-origin-xmlhttprequest-in-chrome-extensions/9422216#9422216)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-08T06:38:40.897

要在 Chrome 扩展中进行跨域请求，您需要避免在内容脚本中进行跨域获取。

您可以在 [https://stackoverflow.com/a/56929473/3680164中找到完整答案](https://stackoverflow.com/a/56929473/3680164)

或在文档中 [https://www.chromium.org/Home/chromium-security/extension-content-script-fetches](https://www.chromium.org/Home/chromium-security/extension-content-script-fetches)

# android - 当方向改变时，以某种方式调用按钮的 onclicklistener

> ID：10089311
> 
> 赞同：0
> 
> 时间：2012-04-10T13:00:59.647
> 
> 标签：android, onclick, orientation

出现问题的视图里面有一个按钮和一个tabhost。该按钮的 onclick 侦听器会更改当前选项卡中的一些文本。问题是当我更改方向（端口到着陆或着陆到端口）时，按钮的 onclicklistener 会以某种方式被调用/浏览，并且当前选项卡中的文本会发生变化。为什么会发生这种情况，解决方案是什么？

```
myActivity extends Activity{
    onCreate(bundle){
        ..
        ..
        add(button1);
        button1.onClickListner(new OnClickListener(){
             ..
             someAlertDialog.show();             //line xxx

        });
    }

} 
```

它实际上没有显示任何警报对话框（它不应该这样做）但说错误日志中有泄漏@line xxx。整个日志即将推出。

编辑：我现在无法获取错误日志，但是方向更改后仍然发生一些奇怪的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:21:04.010

What happens by default on an orientation change is that the current activity instance is destroyed and then recreated and passed the previous instance's state. If a dialog is on screen when this happens it will leak the window that's displaying it.

Since you are not using `Activity#showDialog` which will manage dialogs when `onDestroy` is called you have to do that manually. So you'll have to override `Activity#onDestroy` and call `Dialog#dismiss` if it is showing.

# java - 使用 Tomcat 的 Eclipse 中的 HTTP 状态 404 错误

> ID：10089321
> 
> 赞同：2
> 
> 时间：2012-04-10T13:01:51.183
> 
> 标签：java, eclipse, jsp, tomcat, servlets

当我尝试在 Eclipse 中使用 Tomcat（Tomcat 7.0.27、Eclipse Europa 和 Java 1.6.0_32）创建一个小演示时，在启动页面时出现此错误：

```
HTTP Status 404 - /Demo/
type Status report
message /Demo/
description The requested resource (/Demo/) is not available.
Apache Tomcat/7.0.27 
```

我录屏了，请看这个视频（试试高清播放）：[http ://www.screenr.com/L5d8](http://www.screenr.com/L5d8)

我哪里错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T13:05:15.710

您在非公共网络区域内创建了索引页面`WEB-INF`，您的用户无法直接访问它，

拉出webcontent中的索引页（与WEB-INF平行）

# jquery - 如何为此 jquery 切换赋予自动高度（显示/隐藏）

> ID：10089322
> 
> 赞同：0
> 
> 时间：2012-04-10T13:01:51.890
> 
> 标签：jquery, html, css, jquery-plugins

请参阅此处的示例[http://jsfiddle.net/jitendravyas/P6vKf/14/](http://jsfiddle.net/jitendravyas/P6vKf/14/)

**更新了 jsfiddle 链接**

在这个例子中，我有 3 个不同的模块用于显示/隐藏，并且都有不同的高度来显示和隐藏项目。

```
$(function(){
   $(".more-destination").click(function(){
          $(this).parent().prev("ul").animate({
              height: "500px"
           }, 800, function() {});
          $(this).next(".less-destination").toggle();
          $(this).toggle();
   });

   $(".less-destination").click(function(){
         $(this).parent().prev("ul").animate({
             height: "200px"
          }, 800, function() {});
         $(this).prev(".more-destination").toggle();
         $(this).toggle();
   });
}); 
```

我想让最小高度（默认）和最大高度（打开后）的高度为**自动**，这样我就可以将 jquery 代码用于我需要这种效果的任何容器。

可能吗？

我想只在 CSS 中设置 min-height ，对于高度，它应该根据 div 中有多少项目而采用高度。

我不想在 javascript 中给出任何高度或宽度。仅在 CSS 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:18:47.130

这是可能的，只是有点骇人听闻。你可以克隆元素，检查它的高度，然后动画到那个高度。反向用于最小化元素。

```
$(".more-destination").click(function(e) {
    e.preventDefault();
    var clone = $(this).parent().prev("ul").clone().appendTo('body').height('auto');
    var height = clone.height();
    clone.remove();

    $(this).parent().prev("ul").animate({
        height: height
    }, 800, function() {});

    $(this).next(".less-destination").toggle();
    $(this).toggle();
});

$(".less-destination").click(function(e) {
    e.preventDefault();
    var clone = $(this).parent().prev("ul").clone().appendTo('body').height('');
    var height = clone.height();
    clone.remove();

    $(this).parent().prev("ul").animate({
        height: height
    }, 800, function() {});

    $(this).prev(".more-destination").toggle();
    $(this).toggle();
}); 
```

jsFiddle：http: [//jsfiddle.net/P6vKf/8/](http://jsfiddle.net/P6vKf/8/)

# c++ - 将 QWidget 嵌入 X11 窗口

> ID：10089323
> 
> 赞同：8
> 
> 时间：2012-04-10T13:01:57.433
> 
> 标签：c++, qt, x11, xlib

我想将两个 QWidget 嵌入到使用 XLib 创建的窗口中。我写了这段代码：

```
// Assume all the necessary headers included

int main(int argc, char *argv[])
{
   QApplication app(argc, argv);

   // Create widget 1
   QWidget widget1 ; 
   widget1.setGeometry(44,44,666,666);
   widget1.show();

   // Create widget 2   
   QWidget widget2 ;
   widget2.setGeometry(144,144,666,666);
   widget2.show();      

   Display *display = XOpenDisplay( 0 ); // 0 parameter for default values

   if ( display != NULL )
   {
      // Create the x11 window using XLib
      Window w = XCreateWindow(display, DefaultRootWindow(display), 
      0, 0, 1200, 1100, 0,CopyFromParent, CopyFromParent, CopyFromParent, 0, 0);

      XMapWindow(display, w);
      XFlush(display);

      XReparentWindow(display, widget1.winId(), w, 0, 0);
      XReparentWindow(display, widget2.winId(), w, 1, 10);
  }

  else
      std::cout << "Error: Opening display" << std::endl ;

      return app.exec();
} 
```

我能够成功运行这个程序，但是这些小部件没有嵌入到我创建的 X11 窗口中。这三样东西都是被创造出来的，但都是独立的。这些小部件没有嵌入到窗口中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T18:59:21.523

以下内容表明您可能需要考虑显示小部件的顺序，以便将小部件的 winId 设置为可以传递给 XReparentWindow 的东西。

[http://www.qtforum.org/article/16529/xreparent-external-x11-application.html](http://www.qtforum.org/article/16529/xreparent-external-x11-application.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T23:55:14.253

作为替代解决方案，您可以在 qt 应用程序中使用[QX11EmbedWidget](http://doc.qt.digia.com/qt/qx11embedwidget.html)代替 QWidget 并在 XLib 应用程序中使用 XEmbed 协议，例如执行此[QX11EmbedContainer](http://Hdoc.qt.digia.com/qt/qx11embedcontainer.html)。这个方案有一个优点：可以在不同的进程中实现不同的窗口。

# php - 使用 NSURLRequest 从 PHP 脚本接收数据

> ID：10089333
> 
> 赞同：0
> 
> 时间：2012-04-10T13:02:55.263
> 
> 标签：php, objective-c, web-services, nsurlconnection, nsurlrequest

我有一个使用 NSURLRequest 和 NSURLConnexion 将数据发送到 PHP 脚本的应用程序。我想要的是用 post 方法发送一个像“Hello world”这样的数据，我想在我的应用程序上显示“Hello world from myPHPScript.php！” 但我没有网络服务经验，特别是n PHP。

这是我发送请求的objective-c代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL

                                URLWithString:@"http://localhost:8888/testNSURL/index.php"]

                                cachePolicy:NSURLRequestUseProtocolCachePolicy

                                timeoutInterval:60.0];

    [request setHTTPMethod:@"POST"];
    NSString *postString = @"myVariable=Hello world !";
    [request setHTTPBody:[postString dataUsingEncoding:NSUTF8StringEncoding]];

    NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:request delegate:self];

    if (theConnection) {

        receiveData = [NSMutableData data]; 

} 
```

这是我的 PHP 代码：

```
<?php
if(isset($_REQUEST["myVariable"])) {
    echo json_encode("Hello from index.php !");
}
else    echo json_encode('Request failed');
?> 
```

我的问题是：

*   我的 PHP 代码正确吗？
*   如何`echo json_encode("Hello from index.php !");`在我的 obj-c 应用程序中捕获？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:08:05.823

I personally am using [ASIFormDataRequest](http://allseeing-i.com/ASIHTTPRequest/How-to-use) when posting things to a server. When you get info back from this method you can just do something like this to get the data/string value of all that has been echo'd on the server:

```
- (void)requestFinished:(ASIHTTPRequest *)aRequest {
    NSData *responseData = [aRequest responseData];
    NSString *responseString = [aRequest responseString];
} 
```

Getting a string from Data information is done like so:

```
[[NSString alloc] initWithData:responseData encoding:NSASCIIStringEncoding] 
```

# java - 为什么 Java Thread.sleep 或 Date.after() 在其他计算机上的功能不同？

> ID：10089339
> 
> 赞同：3
> 
> 时间：2012-04-10T13:03:07.890
> 
> 标签：java, date, sleep

我有一个单元测试来检查以确保在我的实例中创建一个对象时填充了正确的日期：

```
 Date earlier = new Date();
    Thread.sleep(10);
    instance.execute();
    assertTrue(instance.getMyObject.getCreationDate().after(earlier)); 
```

当在 Eclipse 中运行或从命令行使用 Ant 时，此测试适用于我在 Windows 7 Java 6 上。但是，我的客户说这个测试对他来说失败了（他没有指定他的环境）。这怎么可能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T13:08:59.973

在 Windows XP 上，时钟分辨率仅为 1/60 秒。这意味着您可以等待 10 毫秒，时钟时间将显示相同。我会将时间增加到 100 到 250 毫秒。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T13:11:02.837

System.currentTimeMillis 在不同平台上具有不同的“分辨率”。在 Windows 上，它可能是 15 毫秒 - 这意味着您的 10 毫秒等待可能不一定会导致“更晚”的日期。

我会增加`Thread.sleep(10)`to`Thread.sleep(100)`或更多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T13:12:28.767

正如 Peter Lawrey 所回答的，系统时钟的分辨率可能意味着它在创建“较早”日期和实例日期之间没有更新。也许将您的代码更改为以下内容：

```
assertFalse(instance.getMyObject.getCreationDate().before(earlier)); 
```

通过这种方式，您可以检查它绝对不是早于您的较早日期，并且您无需担心系统时钟是否已更新。

# blackberry - 如何启用/禁用 balckberry OS 5 中的按钮字段，或者如何在 blackberry OS 5 中的按钮字段上添加或删除控件

> ID：10089340
> 
> 赞同：1
> 
> 时间：2012-04-10T13:03:09.813
> 
> 标签：blackberry

```
public void setEditable(final boolean enabled) 
{
    if (!enabled) 
    {
        _bitmap = _disabledBitmap;
    }
    if (enabled) 
    {
        _bitmap = _noFocusBitmap;
    }
    invalidate();
    super.setEditable(enabled);
} 
```

我在 OS6 中使用该方法， `setEnabled(boolean flag)`它工作正常。但它在 OS-5 中不支持，在 Os5 中我尝试使用`setEditable(boolean flag)`但不工作。请帮忙..

非常感谢提前...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:30:37.380

I use following code to enable/disable button

```
//when you dont want control of button field use
_buttonField.setChangeListener(null); 

//when you want control of button field use
_buttonField.setChangeListener(<your change listener>);

//if you want to remove button from manager use 
manager.delete(_buttonField);

//if you want to add button to manager use 
manager.add(_buttonField); 
```

# azure - Windows Azure Solr 安装扩展

> ID：10089343
> 
> 赞同：1
> 
> 时间：2012-04-10T13:03:12.923
> 
> 标签：azure, solr

我知道可以在 Azure 中运行 Solr（Azure 中的[Solr](http://www.interoperabilitybridges.com/Azure/Getting_Started_Guide_Solr_Lucene.asp)），但是安装扩展呢？有人做到了吗？任何人都可以分享经验吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:07:17.970

有几种方法可以做到这一点。您可以使用 VM 角色并在将其上传到 Azure 之前对其进行设置，或者您可以使用门户手动部署项目并包含配置它的启动脚本。请记住，您可能需要为扩展更新一些 ini 文件。

# c - 在C中转换输入数字字符串

> ID：10089345
> 
> 赞同：0
> 
> 时间：2012-04-10T13:03:25.027
> 
> 标签：c, algorithm

问题是编写一个程序，从终端输入一个整数，然后提取并用英文显示整数的每个数字。因此，如果用户键入 932，程序应显示“九三二”。

我的算法是先反转数字，使 932 变为 239。现在我使用 mod 运算符提取最后一个数字并打印。接下来我将这个数字除以 10，然后我再次提取最后一个数字，依此类推......

有没有其他可能的算法（更短更高效）？

可以提取整数的最后一位。是否可以提取第一个数字等等？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T13:08:36.367

如果您使用`fgets`etc输入字符串，则可以跳过所有 mod 处理/反转

这些线上的东西（我没有错误检查，它只是一个伪代码）

```
char *numArray[]={"One", "Two", ....};

fgets(buffer, 80, stdin)

while ( buffer[i] )
{
    printf("%s ", numArray[buffer[i]-'0'])
    i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:45:03.417

你真的应该按照评论和 Pavan 的建议处理字符串，但是给定一个以十为底的整数，你可以`nth`通过以下方式提取数字：

```
floor( (a % (10**n)) / (10**(n-1)) ) 
```

`**`指数在哪里（`pow`在 C 中`<math.h>`）。如果您碰巧在不同的基地工作`b`，这仍然有效：

```
floor( (a % (b**n)) / (b**(n-1)) ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:41:36.630

因此，在阅读了帖子后，我会写如下：

```
#include <stdio.h>
#include <string.h>

char bar(char foo) {
    char *bar[] = {"zero", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine"};
    return foo <= '9' && foo >= '0'? printf("%s", bar[foo - '0']) : 0;
}

int main (int argc, char const *argv[]) {
    char buf[128];
    int len;

    printf("Give input: ");
    fgets(buf, 128, stdin);

    for(len = 0; buf[len]; len++) {
        if(bar(buf[len]))
            printf("\n");
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T16:00:42.537

```
#include <stdio.h>

void print(int n){
    static char *digit_name[] = {"zero","one","two","three","four","five","six","seven","eight","nine" };
    int q = n / 10;
    int r = n % 10;
    if(q != 0){
        print(q);
        putchar(' ');
    }
    printf("%s",digit_name[r]);
}

int main(void){
    print(932);
    return 0;
} 
```

# c# - Json.net 慢序列化和反序列化

> ID：10089347
> 
> 赞同：12
> 
> 时间：2012-04-10T13:03:37.677
> 
> 标签：c#, .net, windows-phone-7.1, json.net

我有一个问题 - Json.Net 序列化我的对象真的很慢。我有一些基础课：

```
public class authenticationRequest
{
    public string userid;
    public string tid;
    public string token;
    public string platform;
    public string version;
} 
```

我正在序列化它

```
string jsonDataToSend = JsonConvert.SerializeObject(dataToSend); 
```

此操作大约需要 1900 毫秒。与来自[Json.net CodePlex](http://json.codeplex.com/)页面的信息相比：

![在此处输入图像描述](../Images/a9f4b25888baba5e6d1e47e948ccace3.png)

这需要很长时间。出于测试目的，我将我的课程换成了一个简单的字符串：

```
string jsonDataToSend = JsonConvert.SerializeObject("fsdfsdfsdfs"); 
```

转换仍然需要大约 900 毫秒。是什么原因？我可以做些什么来更快地序列化这些数据？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-02-05T14:05:20.943

我正在处理的一个项目遇到了同样的问题，我按照此页面上的建议解决了这个问题：http: [//www.newtonsoft.com/json/help/html/Performance.htm](http://www.newtonsoft.com/json/help/html/Performance.htm)

具体来说，他们建议在性能至关重要时手动序列化您的对象：

```
public static string ToJson(this Person p)
{
    StringWriter sw = new StringWriter();
    JsonTextWriter writer = new JsonTextWriter(sw);

    // {
    writer.WriteStartObject();

    // "name" : "Jerry"
    writer.WritePropertyName("name");
    writer.WriteValue(p.Name);

    // "likes": ["Comedy", "Superman"]
    writer.WritePropertyName("likes");
    writer.WriteStartArray();
    foreach (string like in p.Likes)
    {
        writer.WriteValue(like);
    }
    writer.WriteEndArray();

    // }
    writer.WriteEndObject();

    return sw.ToString();
} 
```

我在 VB 中的示例如下所示：

```
 Public Function SerializeWords(ByRef oWords As List(Of Word))
        Dim sb As New StringBuilder
        Dim sw As New IO.StringWriter(sb)
        Using oWriter As Newtonsoft.Json.JsonWriter = New Newtonsoft.Json.JsonTextWriter(sw)
            With oWriter
                .WriteStartArray()
                For Each oWord As Word In oWords
                    .WriteStartObject()

                    .WritePropertyName("ID")
                    .WriteValue(oWord.ID)

                    .WritePropertyName("Phonics")
                    .WriteValue(oWord.Phonics)

                    .WritePropertyName("Word_")
                    .WriteValue(oWord.Word_)

                    .WritePropertyName("WordLength")
                    .WriteValue(oWord.WordLength)

                    .WriteEndObject()
                Next
                .WriteEndArray()

            End With
        End Using
        Return sb.ToString

    End Function 
```

注意它是如何强类型化的。我相信当你使用 `Newtonsoft.Json.JsonConvert.SerializeObject()` 它时，它会使用反射来完成工作（当你有许多具有许多属性的对象时，它真的可以加起来）。

无论如何...一旦我编写了自己的序列化程序，我使用 JsonConvert.SerializeObject() 方法对 250 个单词的列表进行序列化的时间从 28 秒变为使用我自己的函数的 31 毫秒。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T13:47:54.583

我相信这里发生的事情是，当 Json.Net 库被加载时，您会遇到延迟。您应该尝试在发布模式下编译以查看速度是否明显加快，因为这应该会阻止符号被加载（这会增加库加载时间）。

如果它仍然是一个问题，请在您的应用程序中找到一个很好的时间，您可以执行虚拟序列化（甚至可能在后台线程上）以强制加载库。不过，这有点代码味道，所以可能有更好的强制加载方法，但这是一种应该一直有效的蛮力方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-16T09:04:17.140

`dynamic`当反序列化为数据类型而不是自定义类型时，使用“Newtonsoft.Json”库的 JSON 字符串反序列化对我来说在 ARM 上工作得更快。

```
var receivedObject = JsonConvert.DeserializeObject<dynamic>(content); 
```

但这甚至更快：

```
dynamic receivedObject = JObject.Parse(content); 
```

# ios5 - 使用 push Segue 更改项目标题

> ID：10089348
> 
> 赞同：3
> 
> 时间：2012-04-10T13:03:42.597
> 
> 标签：ios5, uistoryboardsegue

我正在使用 push segue 在我的 Storyboard 中显示一个新的 ViewController。默认情况下，推送的导航控制器上的后栏项目具有“上一个”（底层）控制器的标题。

为了将后栏项目的标题更改为，例如，“Back”，我在被推送的 ViewController 中实现了以下内容：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    self.navigationItem.backBarButtonItem.title = @"Back";
} 
```

但这不会改变后栏项目的标题。我还尝试使用具有相同结果的新创建的 UIBarButtonItem：后栏项目不会改变。

另一种方法是在`prepareForSegue`执行 segue 的控制器中设置后栏项目。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
{

    if ([[segue identifier] isEqualToString:@"pushViewController"]) {
        UIViewController *viewController = [segue destinationViewController];
        viewController.navigationItem.backBarButtonItem.title = @"Back";
    }
} 
```

结果相同：后栏项目标题没有改变。那么如何轻松更改后栏项目的标题？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:31:49.153

比 Marco 的回答更具体一点，您正在寻找的是：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{        
    self.title = @"Back";
    // ...
} 
```

请注意，恕我直言，这很烦人，因为您可能最终不得不拥有一个以“self.title”为中心的整个状态机，而不是让情节提要中的每个场景都知道后退按钮应该说。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T03:40:11.380

在源视图控制器中设置 navigationItem.backBarButtonItem.title，而不是目标视图控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T12:00:31.687

将后栏项目的标题添加到“Storyboard->VC->NavigationItem”示例中作为“Back”，并在准备 segue 时设置：

```
self.navigationItem.backBarButtonItem.title = @"Need a Title :)"; 
```

# objective-c - 加载 UIWebView 会阻止滚动视图动画

> ID：10089350
> 
> 赞同：0
> 
> 时间：2012-04-10T13:03:55.757
> 
> 标签：objective-c, ios, multithreading, animation, uiwebview

我正在尝试在滚动动画发生期间加载带有数据的 Web 视图。动画调用是这样的：

```
[scrollView scrollRectToVisible:aFrame animated:YES]; 
```

问题是，如果 web 视图加载过程与滚动视图动画重叠，则动画会卡顿，不会出现流畅的动画。似乎加载过程正在阻塞主线程，因此动画无法按预期工作。

我能做些什么来解决这个问题？在一些帖子中，人们建议将 webview 作为子视图放在

```
- (void)webViewDidFinishLoad:(UIWebView *)theWebView 
```

方法。但是如果我这样做，加载的数据是不可见的。

感谢帮助。

编辑1：

@弗拉德

我猜这个解决方案不起作用。我这样调用 webview 加载：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^(void) {
    [_webView loadHTMLString:htmlString baseURL:[NSURL fileURLWithPath:path]];
}); 
```

但我看到虽然 loadHTMLString: baseURL: 方法是在非主线程中调用的，

```
- (void)webViewDidStartLoad:(UIWebView *)theWebView 
```

和

```
- (void)webViewDidStartLoad:(UIWebView *)theWebView 
```

方法在主线程中调用。所以这种方法并没有给我带来改进。

另外作为一个细节，在 webViewDidStartLoad 和 webViewDidFinishLoad 方法之间传递的时间接近 0.3 秒。

还有什么可做的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:32:34.600

尝试在单独的线程上启动加载请求。最简单的方法是使用 GCD。

如果这是您的要求：

```
NSURLRequest *request = [NSURLRequest requestWithURL:someURL]; 
```

单独的线程调用将是这样的：

```
dispatch_queue_t workerQueue = dispatch_queue_create("QueueIdentifier", NULL);
dispatch_async(workerQueue, ^ {
    [yourWebView loadRequest:request];
});
dispatchRelease(workerQueue); 
```

使用它不应再阻塞您的 UI 线程，因为所有加载都应在后台完成。

# python - 如何处理具有 2^50 个元素的 dict 变量？

> ID：10089351
> 
> 赞同：8
> 
> 时间：2012-04-10T13:03:59.833
> 
> 标签：python, dictionary, hash, ram, hash-collision

我必须找到 2^25 个随机字符串的 SHA256 哈希。然后寻找冲突（对最后一个使用生日悖论，例如，仅 50 位散列）。

我将字符串：哈希对存储在 dict 变量中。然后使用值（不是键）对变量进行排序，然后使用 O(n) 循环查找冲突。

问题是因为有 2^25 个字符串和它们的 2^25 个哈希，所以 dict 变量中有 2^50 个值。这是非常耗费资源的。那么，我该如何在有限的 RAM（比如 1GB 左右）的情况下做到这一点？

我已经尝试过：
1\. 使用 6GB 交换空间运行它。该程序运行了一夜，仍然没有完成。这基本上比 O(n_square) 搜索还要慢！哈希值是使用大约 3.2 GB 的 RAM 使用量计算的。但在那之后，当涉及到 sort 命令时，使用的 RAM 又开始猛增！我虽然 python 排序使用 In-Place-Quicksort :(
2。我只存储了哈希值并发现了一个冲突。但由于没有存储它而找不到相应的字符串。

我不应该使用数据库等。最多是一个文本文件，但这无济于事。另外，我对 Python 还是很陌生，但不要让这限制了你的答案水平。

PS：这是一个任务。一些人声称在 300MB RAM 的情况下不到一分钟就发现了冲突。不知道这是不是真的。我已经解决了这个问题，但答案是无法得到的！在工作中，所以现在无法访问代码。将很快添加。

代码：

```
from Crypto.Hash import SHA256
import os
import random
import string
from operator import itemgetter

def shaa():

    trun=[]
    clist={}
    for i in range(0,33554432):

        sha=SHA256.new(str(i)).hexdigest()
        sha=int(bin(int(sha,16))[-50:],2)
        clist[i]=sha

    print 'Hashes done.'

    clist=sorted(clist.items(), key=itemgetter(1))  
    for i in range(0,33554432):

        if(clist[i]==clist[i+1]):
            #print string[i],string[i+1]
            print clist[i]
            return 1
    return 2

result=2
while(result==2):
    result=shaa() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:15:39.640

我会去做这样的事情：

打开 16 个文件（以二进制模式打开应该没问题；如果所有字符串都具有相同的长度，这将是最简单的）。生成您的字符串和散列，并根据散列的前 4 位将它们写入文件。然后分别加载和处理每个文件。这将使内存使用量减少 16 倍。（当然，您可以使用任意数量的文件，只要您不会用完文件句柄。每次访问时必须打开和关闭每个文件会变得相当慢。）

如果生成字符串和散列相对便宜，您甚至不需要这些文件。只需执行 16 次传递，并且在每次传递中只保留与传递编号匹配的上半字节的哈希值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T13:28:08.870

`2^25` **解决这个问题的一种方法是使用一个非常长的位**域，以便每个哈希都映射到位长内存块中的某个位置。

解决此类问题的更好但非 100% 保证的方式是通过[布隆过滤器](http://en.wikipedia.org/wiki/Bloom_filter)或其他概率数据结构完成。

> 布隆过滤器是一种节省空间的概率数据结构，用于测试元素是否是集合的成员。假阳性是可能的，但假阴性是不可能的；即查询返回“在集合内（可能是错误的）”或“绝对不在集合内”。
> 
> 与其他用于表示集合的数据结构相比，布隆过滤器具有强大的空间优势，例如自平衡二叉搜索树、尝试、哈希表或条目的简单数组或链表。
> 
> 具有 1% 错误的布隆过滤器每个元素只需要大约 9.6 位 — 无论元素的大小如何。

因此，每 2^25 个元素 9.6 位，只需要 38.4 MiB 的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T19:47:14.663

我认为这里的关键见解——我承认这让我回避了一段时间，直到几个小时后我才回来——是`sha256`hash digest*是它自己的 hash*。换句话说，您不必进行任何额外的散列或集合创建。您所要做的就是创建一个自定义哈希表，使用`sha256`摘要作为哈希。为了节省空间，不要存储字符串；只需创建一个位数组（对使用创建的整数数组中的整数使用移位操作`table = numpy.zeros(table_size / bits_per_int + 1, dtype='i')`）来检测冲突，然后将冲突字符串保存在 dict 中，将哈希映射到字符串以在第二遍中查找。

`table_size`应该是一个大素数——我选择了一个比 2 ** 31 稍大的素数，它构成了一个 268MB 的表——因为这会产生很少的新冲突/误报（由哈希的模运算引入）。您可以将字符串本身保存到可以迭代的文本文件中。

因此，对于任何字符串，要设置的相应位的索引将是`index = int(hashlib.sha256('foo').hexdigest(), base=16) % table_size`. 然后计算`major_index = index / bits_in_int`and `minor_index = index % bits_in_int`，使用移位和按位运算`minor_index`来检查 int at 中的正确位并将其存储`table[major_index]`，依此类推。

现在通过字符串。每当字符串生成映射到已设置位的哈希时，将一`hash:string`对存储在字典中。或者更好的是，存储一`hash:[string_list]`对，在多次冲突的情况下将新字符串附加到列表中。现在对于任何冲突的字符串对（a，b），字典将包含 b 的哈希值和值。然后对字符串进行第二次遍历，依次对每个字符串进行散列，并检查字典中的每个散列。如果哈希在字典中，并且字符串不在相应的列表中，则将字符串添加到列表中。字典中的某些字符串不会对应真正的碰撞；对于`[string_list]`大多数这些散列将只有一项长，而那些`hash:[string_list]`对可能会被丢弃。其他的可能是由散列函数本身产生的真正冲突，而不是来自模运算。但是，在同时存在真阳性和假阳性的情况下，您可能仍有一些误报需要清除；您必须仔细检查结果列表是否有误报。

[BasicWolf](https://stackoverflow.com/a/10089737/577088)的使用布隆过滤器的建议是一个很好的建议，并且可能会导致表格更小。但这增加了很多复杂性；我没有打扰。`'0\n'`我在以换行符结尾的字符串 from to上尝试了上述方法`'33554431\n'`，发现两个具有 54 位重叠的哈希。花了 11 分钟，最大内存使用量约为 350MB（尽管这可能会减少。）我做了一些分析，发现大部分时间都花在计算位表的偏移量上。在 c 中编码可能会显着提高速度，并且预散列和存储散列以及字符串也会有所帮助。

事实上，我尝试对字符串进行预散列处理，并用基于 c 的[同名](http://pypi.python.org/pypi/bitarray)扩展模块中的a 替换了我相当`numpy`基于ad-hoc 的位数组。这将运行时间减少到 2 分钟多一点，同时将内存配置文件保持在 350MB 左右。`bitarray`

我认为足够接近政府工作。由于这是一项作业，我不会发布代码，但我很乐意提供额外的指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T13:11:36.697

为什么不使用从最后 50 位哈希到字符串的字典？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T13:12:06.253

例如，将散列拆分为 10 个字符为一组。并以这种方式嵌套值，您将进行递归搜索，但它应该更快

# string - 字符串的最大长度是多少？

> ID：10089352
> 
> 赞同：5
> 
> 时间：2012-04-10T13:04:05.573
> 
> 标签：string, wix

在我`light`的项目中，我收到以下警告：

```
C:\Users\me\wix\service.wxs(105) : warning LGHT1076 : ICE03: 
          String overflow (greater than length permitted in column); 
          Table: ServiceInstall, Column: Description, Key(s): ServiceRegister 
```

我`Description`的很长，但在我开始修剪之前，允许的最大长度是多少？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T13:50:32.630

表中的`Description`列`ServiceInstall`具有`Formatted`类型，因此从技术上讲它没有限制。你可以使用任何你想要的长度。

显示警告是因为您当前的文本超过 255 个字符（Windows 中的标准最大文本长度）。这只是一个警告，而不是错误。它不会影响您的安装。

不过，如果您想避免警告，一个解决方案是使用安装程序属性：

*   将您的描述文本拆分为多个自定义属性
*   在您的描述中使用这些属性而不是实际文本

这样长文本将在安装过程中被解析，并且它的长度不会触发任何警告。

# java - 如何不更改android中edittext的默认值

> ID：10089353
> 
> 赞同：0
> 
> 时间：2012-04-10T13:04:11.050
> 
> 标签：java, android, android-edittext

我正在使用 android 的用户名和密码构建一个简单的身份验证应用程序，所以我使用 2 个编辑文本，1 个用于用户名，另一个用于密码。默认情况下，这些 Edittexts 具有值“用户名”和“密码”。那么是否有某种方法可以使用户不从编辑文本中更改此值。另外，如果这是不可能的，你们可以建议我可以继续进行的其他一些方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:10:51.407

你可以使用`Textview`类似的背景`EditText`

```
<TextView
    android:id="@+id/username"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="username"
    android:background="@drawable/edittextBackground" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:37:54.063

在布局（xml）中试试这个：

```
android:enable="false" 
```

你可以做同样的事情，但使用代码....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:14:54.323

据我了解，您希望在编辑文本中保留默认的“用户名”和“密码”值，而用户无法编辑它们。

你可以这样做：

```
editText.setFocusable(false);
editText.setClickable(false); 
```

这基本上使 editText 不可编辑。我希望我能正确理解你的问题。不过，如果您不希望用户与您的值进行交互，我建议您使用 textView 而不是 editText。

# .htaccess - htaccess 重定向不是 100% 工作

> ID：10089361
> 
> 赞同：0
> 
> 时间：2012-04-10T13:04:41.623
> 
> 标签：.htaccess, mod-rewrite, redirect

我需要能够重定向所有页面：

`www.mywebsite.com/123/abc`（包括`www.mywebsite.com/123/abc/`）

至

```
www.mywebsite.com/abc-newpage 
```

带有可选的结束斜杠。

（123 实际上变得多余了）

我知道从技术上讲，带有右斜杠的网页与没有（在某些情况下）的网页不同。

这是我到目前为止所拥有的：

```
RewriteRule ^123/([a-zA-Z0-9]+)/?$ $1-newpage [R=301] 
```

它适用于非关闭斜杠 URL，但

```
www.mywebsite.com/123/abc/ 
```

去

```
www.mywebsite.com/abc/-newpage 
```

希望这是有道理的。

当然，将其限制为小写或大写字母或数字的语句`(([a-zA-Z0-9]+))`应该排除斜线吗？

干杯达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:02:38.827

可以在以“^”开头的方括号中排除字符。不过，您的 RewriteRule 似乎是正确的。我已将您的代码复制到我的 .htaccess (www.paywithafacebookpost.com) 中，当输入例如 www.paywithafacebookpost.com/123/abc/ 时，您会看到正确的重定向。您的 .htaccess 中有其他规则吗？

# php - PHP变量，中间加一个词

> ID：10089363
> 
> 赞同：1
> 
> 时间：2012-04-10T13:04:45.527
> 
> 标签：php, variables

我得到了这个变量

```
$test = 'Alpha, Gamma, Beta'; 
```

获得此结果的最佳做法是什么？如何在两者之间添加某个单词，例如我在下面添加**Rays**所做的。

**阿尔法射线、伽马射线、贝塔射线**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T13:08:05.550

试试这段代码

```
$test = preg_replace('/(,|$)/', ' Rays$1', $test); 
```

我不知道它是否是“最佳实践”，但它是*一种*有效且简单的做法。您可能可以制定另一种解决方案，以提供更好的性能，如果性能是问题，那可能是“最佳实践”。

但是，如果简单是一种方式，那就太好了。

**编辑：**

由于其他一些答案正在使用`str_replace`，我也可以为此提供一个可行的解决方案：

```
$test = str_replace(',',' Rays,', $test).(empty($test)?'':' Rays'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:12:22.887

您可以尝试对找到的每个逗号使用 str_replace 函数。

例子：

```
$str = str_replace("," , " Rays," , $test.' Rays'); 
```

[你可以在这里](http://php.net/manual/en/function.str-replace.php)找到更多关于它的信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:09:54.447

使用爆炸

```
$x = explode(",", $test); 
```

然后内爆

```
$x = implode(" Ray ,", $x); 
```

或 foreach 并添加一些不同的东西。 [内爆](http://php.net/manual/en/function.implode.php)-[爆炸](http://php.net/manual/en/function.explode.php)

# ios - 以我们所看到的“Safari 浏览器的历史”的方式显示目录

> ID：10089366
> 
> 赞同：-1
> 
> 时间：2012-04-10T13:04:48.000
> 
> 标签：ios

我需要以我们所看到的“Safari 浏览器的历史”的方式创建一个目录，其中可以滚动图像以提供类似垂直墙的效果。我需要我们在“历史”中看到的确切效果一个 Safari 浏览器“...

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:24:40.487

你说的是 UITableview。我数不清这个网站上有多少教程、示例和片段，以及这个问题被问了多少次。首先阅读[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html)，谷歌你的问题，如果你不成功，然后问一个问题。

编辑，只要你需要一个 Cover Flow 效果，最著名的控件就是[iCarousel](http://cocoacontrols.com/platforms/ios/controls/icarousel)。

PS，欢迎来到SO。

# visual-studio-2008 - 尝试在 Windows 中构建 node.js 时出错

> ID：10089373
> 
> 赞同：1
> 
> 时间：2012-04-10T13:05:09.457
> 
> 标签：visual-studio-2008, node.js, window

我正在尝试构建 node.js，但我有问题。
我从 git 下载了 2 个版本，从站点下载了一个
我的配置是：
Python 3.2.2 visual studio express 2008 windows xp 32bit

运行 vcbuild.bat 时的错误：
**joyent-node-v0.7.7-49-g06ada03：**

```
 File "configure", line 344
    print "creating ", filename
                    ^
SyntaxError: invalid syntax
Failed to create vc project files. 
```

**节点-v0.6.15**

```
 File "tools\gyp_node", line 20
    print 'Error running GYP'
                            ^
SyntaxError: invalid syntax
Failed to create vc project files. 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:23:30.470

我认为您必须根据wiki 中的[安装指南使用 python2.6 或 2.7。](https://github.com/joyent/node/wiki/Installation)

# c# - 从c#中的excel表中读取数据，将数据加载到一行中每一列的字符串中

> ID：10089376
> 
> 赞同：1
> 
> 时间：2012-04-10T13:05:18.680
> 
> 标签：c#, c#-4.0, datatable

我正在从 excel 表中读取数据。我的桌子看起来像这样。

```
 AAAA            bbbbb              cccc
        1                2                  3
        4                5                  6
        --------------------------------------

        --------------------------------------

       data           data                  data 
```

我想遍历每一行并将每个单元格的每个值保存在单独的字符串中。

这里按照我的表，

我要收藏，

```
 string column1= 1;
    string cloumn2=2;
    string clomnn3= 3; 
```

我想对所有行重复此操作。我的 excel 只有三列。

我试过这段代码

```
 //Reading Excel file
        string datafilename = @"D:\Book2.xls";
        string strConn = "Provider=Microsoft.ACE.OLEDB.12.0;" + "Data Source=" + datafilename + ";" + "Extended Properties=Excel 12.0;"; 
        OleDbDataAdapter myCommand = new OleDbDataAdapter("SELECT * FROM [Sheet1$]", strConn);
        //fetching excel data into DataTable 
        System.Data.DataTable _dtDataFile = new System.Data.DataTable();
        ArrayList abcd = new ArrayList();
        myCommand.Fill(_dtDataFile);

        foreach (DataRow row in _dtDataFile.Rows)
        {
            Response.Write(row[i]);

        } 
```

我得到的输出是

```
 12346............datadatadata 
```

我在一个字符串中获取所有数据，我想将数据存储在每一行的单独字符串中。

任何人都可以建议，如何做到这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:32:25.420

您将所有数据都放在一个字符串中，因为您将所有数据直接写入响应流。您需要按照 Arion 的建议添加标记，或者将这些值实际添加到某些数据结构中。另外，您是否考虑过使用[Excel 对象库](http://support.microsoft.com/kb/302084)？它可能会更干净一些，而且您可以直接迭代文件的本机结构。

# php - php数组没有项目？

> ID：10089379
> 
> 赞同：0
> 
> 时间：2012-04-10T13:05:31.470
> 
> 标签：php, arrays

我有以下代码。我正在尝试跟踪选定的项目并将它们从数组中显示出来。

```
<?php
session_start();

//temp stores the submitted value
$temp = $_POST['field'];

if (!isset($_SESSION['itemsList'])) {
    $itemsList = array();
} else {
    $itemsList = $_SESSION['itemsList'];
}

//check how many elements in array
$arraySize = count($itemsList);

//set that as i and then add after that
$emptyval = "";

if (strcmp($temp,$emptyval)!=TRUE) {
    array_splice($itemsList, $arraySize+1, 0, $temp);
    unset($temp);
    unset($_SESSION['field']);
    $_SESSION['itemList'] = $itemList;
}
?>
<html>
<head>
    <title>Test Page Khalid</title>
</head>
<body>
<form action="<?=$_SERVER['PHP_SELF'];?>" method="post">

    <table height="100%" width="100%" cellspacing="10" cellpadding="10" border="1">
        <tr>
            <td align="center"><input name="field" value="shirt" style="width:200px; height:100px;" type="submit"/></td>
            <td align="center"><input name="field" value="pants" style="width:200px; height:100px;" type="submit"/></td>
            <td align="center"><input name="field" value="socks" style="width:200px; height:100px;" type="submit"/></td>
        <tr>
        <tr>
            <td align="center"><input name="field" value="dress" style="width:200px; height:100px;" type="submit"/></td>
            <td align="center"><input name="field" value="skirt" style="width:200px; height:100px;" type="submit"/></td>
            <td align="center"><input name="field" value="topbody" style="width:200px; height:100px;" type="submit"/></td>
        <tr>
        <tr>
            <td align="center"><input name="field" value="sheets" style="width:200px; height:100px;" type="submit"/></td>
            <td align="center"><input name="field" value="pillowcover" style="width:200px; height:100px;" type="submit"/></td>
            <td align="center"><input name="field" value="blanket" style="width:200px; height:100px;" type="submit"/></td>
        <tr>        
    </table>
</form>
<br><br><br>
<?php
$itemsReturned = $_SESSION['itemList'];
echo "The items stored are: <br>";
print_r($itemsReturned);
?>

</body>
</html> 
```

知道为什么这没有显示任何内容吗？谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:20:23.493

这是您想要实现的目标：

```
<?php
session_start();
//store submitted value
$val = $_POST['field'];
//create a reference to the session
$items = (!isset($_SESSION['items']) ? array() : $_SESSION['items']);

//did the user submit a value?
if($val){
//append the value to the items array, contained within the session
    $_SESSION['items'][] = $val;
//update the reference
    $items =& $_SESSION['items'];
}

?>
<html>
<head>
    <title>Test Page Khalid</title>
</head>
<body>
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">

    <table height="100%" width="100%" cellspacing="10" cellpadding="10" border="1">
        <tr>
            <td align="center"><input name="field" value="shirt" style="width:200px; height:100px;" type="submit"/></td>
            <td align="center"><input name="field" value="pants" style="width:200px; height:100px;" type="submit"/></td>
            <td align="center"><input name="field" value="socks" style="width:200px; height:100px;" type="submit"/></td>
        <tr>
        <tr>
            <td align="center"><input name="field" value="dress" style="width:200px; height:100px;" type="submit"/></td>
            <td align="center"><input name="field" value="skirt" style="width:200px; height:100px;" type="submit"/></td>
            <td align="center"><input name="field" value="topbody" style="width:200px; height:100px;" type="submit"/></td>
        <tr>
        <tr>
            <td align="center"><input name="field" value="sheets" style="width:200px; height:100px;" type="submit"/></td>
            <td align="center"><input name="field" value="pillowcover" style="width:200px; height:100px;" type="submit"/></td>
            <td align="center"><input name="field" value="blanket" style="width:200px; height:100px;" type="submit"/></td>
        <tr>        
    </table>
</form>
<br><br><br>
<?php
echo "The items stored are: <br>";
print_r($items);
?>

</body>
</html> 
```

您能否提供有关以下目的的详细信息：

```
$emptyval = "";

if (strcmp($temp,$emptyval)!=TRUE) {
    array_splice($itemsList, $arraySize+1, 0, $temp);
    unset($temp);
    unset($_SESSION['field']);
    $_SESSION['itemList'] = $itemList;
} 
```

# sql-server - 创建触发器以在表上实现排名

> ID：10089382
> 
> 赞同：1
> 
> 时间：2012-04-10T13:05:46.130
> 
> 标签：sql-server, sql-server-2008, triggers

我从未在 SQL Server 2008 中处理过触发器。所以我不知道该怎么做。

我有一个游戏应用程序，我正在跟踪所玩问题的数量和正确回答的问题总数。我还节省了每个问题的平均时间。

现在我想根据正确答案的百分比记录排名，如果出现平局，我们将检查所用时间。我必须使用触发器来完成所有这些工作。

```
 id   | playerID | CompetitionID  | NoOfCOrrectANswers | NoOfPlayedQuestions | TimeTaken 
-----------------------------------------------------------------------------------------
  1      3             203              4                       8                  8.4
  2      56            203              9                      18                 13
  3      67            203              16                     45                 15 
```

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:54:47.123

您可能不应该走这条路，因为更新的数量会很高。您可以将[row_number()](http://msdn.microsoft.com/en-us/library/ms186734%28v=sql.100%29.aspx)或[rank()](http://msdn.microsoft.com/en-us/library/ms176102%28v=sql.100%29.aspx)函数添加到显示比赛结果的查询中。

话虽如此，如果您觉得绝对必须在表格中保留排名信息，请添加一列

```
alter table ATable add PlayerRank int 
```

并在 ATable 上创建触发器

```
create trigger RankingTrigger on ATable
after insert, update, delete
as
-- We don't want queries in a trigger to mess up with "Rows affected"
   set nocount on
-- If any of the following columns are mentioned in a query
-- Always true for insert and delete, but we will save updates
-- if we skip processing when columns participating in ranking 
-- are not changed
   If update (NoOfCOrrectANswers)
      OR update(NoOfPlayedQuestions)
      OR update(TimeTaken)
   begin
      -- CTE that returns primary key and rank by competition.
      -- I've changed your condition (percent of correct answers)
      -- As it would rank players with one correct answer over those
      -- who answered 100 questions and got only one wrong. If you
      -- want to change it, replace NoOfCOrrectANswers with 
      -- NoOfCOrrectANswers / NoOfPlayedQuestions
      ; with theRank as (
        select ID, row_number() over (partition by CompetitionID
                                      order by NoOfCOrrectANswers DESC,
                                               TimeTaken DESC) rn
          from ATable
      -- Only changed competitions
         where CompetitionID in
      -- Inserted table is available in trigger and OUTPUT clause
      -- of insert, update, delete statements.
      -- It contains newly added/changed rows
      -- We are using it here to filter only changed competitions
      -- Similary, Deleted table hold a copy of removed rows for delete 
      -- and old values for update
         (
            select CompetitionID
              from Inserted
            union
            select CompetitionID
              from Deleted
         )
      )
      update ATable
      -- Update to rank from theRank CTE
         set PlayerRank = theRank.rn
        from ATable
        -- All records participation in affected competitions
          inner join theRank
             on ATable.ID = theRank.ID
        -- Only change if really changed
        -- This part is very likely not needed. I have never tested
        -- to see if it affects performance
            and isnull(ATable.PlayerRank, 0) <> theRank.rn
   end 
```

# extjs - 在线是否有一些现有的令人印象深刻的 ExtJS 示例？

> ID：10089384
> 
> 赞同：0
> 
> 时间：2012-04-10T13:05:53.897
> 
> 标签：extjs, extjs4

我试图说服我的老板使用 EXTJS 来编写我们的客户端脚本，那里有什么令人大跌眼镜的吗？我已经找到了一些[旧的](http://www.sencha.com/learn/legacy/Manual%3aSightings)例子，但没有一个是非常令人印象深刻的。最令人印象深刻的是我发现的是[cubedrive](http://www.cubedrive.com/)。这些是我正在寻找的例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T12:26:40.170

这也是一个不错的 [SCircles](http://circles.source-lounge.de/web/SCircles/Circles/)。有关它的更多信息，[请访问 sencha 论坛](http://www.sencha.com/forum/showthread.php?152143-S-CIRCLES-Social-Network-Engine-%28Ext-JS-4-ST-1.1%29)。另外： [点击时间](http://clicktime.com/)

*编辑*

我发现了更多：

*   [CodeSmith 工具](http://www.sencha.com/blog/ext-js-spotlight-codesmith-tools)
*   [科维](http://www.sencha.com/blog/implementation-spotlight-kohive)
*   [阿滕萨](http://www.sencha.com/blog/implementation-spotlight-attensa)
*   [施乐](http://www.sencha.com/blog/implementation-spotlight-xero)
*   [拉链鞭](http://www.sencha.com/blog/implementation-spotlight-zipwhip-and-ext-js)
*   [市场](http://www.sencha.com/blog/implementation-spotlight-marketo)
*   [贾马轮廓](http://www.sencha.com/blog/implementation-spotlight-jama-contour)
*   [VersoChat](http://www.sencha.com/blog/implementation-spotlight-versochat)
*   [单跳飞跃](http://www.sencha.com/blog/implementation-spotlight-singlehop-leap)

# javascript - SignalR 将通知推送到单个经过身份验证的用户的所有浏览器实例

> ID：10089386
> 
> 赞同：8
> 
> 时间：2012-04-10T13:06:00.937
> 
> 标签：javascript, notifications, signalr

我正在开发一个需要在用户收到新通知时通知用户的应用程序。该应用程序将托管在 Azure 上，并且是 .NET MVC 3（可能不重要，但仅供参考）。我也

通知保存在 MSSQL db (2008) 中并有一个`IsRead`字段。通知由各种用户和服务器操作生成。根据用户偏好，将使用`IsRead == false`.

我有 2 种不同的场景，我觉得 SignalR 可以完美处理，我只需要一点指导：

1.  用户打开了几个窗口浏览该站点，并添加了一个新的通知行，分配给该用户，其中`IsRead == true`
    *   我希望所有特定用户的浏览器实例都调用一个特定的 js 函数来显示弹出通知
2.  用户打开了几个窗口并单击弹出的通知。
    *   我希望所有特定用户的浏览器实例都调用一个特定的 js 函数来删除弹出通知。（只有处理点击的特定浏览器实例也会执行一个js函数来显示通知详情）

# 我试过的

* * *

对于第一种情况，我认为导致通知写入数据库的相同操作将负责通知所有用户的浏览器实例。

第二种情况类似，通过单击弹出窗口，将通过 Ajax 调用服务器端点，该端点将更新数据库以将通知标记为已读，然后通知所有其他用户的浏览器实例。

如果有一种方法可以基于 ASP.NET 表单身份验证用户名跟踪 SignalR 客户端，那么我认为这将有助于解决这两种情况下的问题。

# TL;博士

* * *

我的主要问题是我不知道如何使用 SignalR 向所有特定用户的浏览器实例发出信号。我正在考虑根据 ASP.NET 表单身份验证用户名创建一个组。这行得通吗？SignalR 中是否有一种更简单的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-10T13:28:23.247

您调用以用户名作为键的组的调用很好，我认为这是最快的实现。您可以通过订阅以下内容在每次页面加载（并且*ConnectionId更改）时调用一个函数：*

```
$.connection.hub.start(function () {
    yourHub.register();
}); 
```

在后面的代码中心：

```
public void Register()
{
    AddToGroup(username);
} 
```

当您想刷新客户端的屏幕时，您可以：

```
Clients[username].refreshClientScreen(); 
```

refreshClientScreen *()*是您的 javascript 函数，它负责在浏览器中隐藏通知。

另一种方法是检查每个请求的*ConnectionId*并在服务器上注册和保留用户连接的位置。当您需要更新它们时，您可以在它们中的每一个上使用此代码：

```
Clients[ConnectionId].refreshClientScreen(); 
```

您可以在Hub的*Context对象中找到**ConnectionId 。*

 *我认为第二种方法更难实现，因为您必须管理保存*ConnectionId* -s 的位置并通过实现 IDisconnect 订阅 Disconnect 事件，这样您就可以使*ConnectionId* -s 列表保持最新，所以我会选择第一种方法 - 与团体的方法。*

# java - Android 搜索扩展 ListView

> ID：10089393
> 
> 赞同：0
> 
> 时间：2012-04-10T13:07:02.320
> 
> 标签：java, android

我正在构建我的第一个 android 应用程序，但遇到了一个问题。在应用程序中，我有一个使用 ListView 的搜索功能。在这里，用户可以搜索某个项目并查看它是否存在。这真的很好，我是根据这个教程做的：[Android ListView with Search](http://www.androidpeople.com/android-listview-searchbox-sort-items)

我的所有项目都在 array.xml 中定义的字符串数组中找到。现在，每个项目都可以是一个或多个集合的一部分。目前我在项目名称旁边显示它包含的集合，如下所示：“ **ITEM -> Collection(s)** ”。这可行，但并不是一个优雅的选择。我想做的是将项目的名称作为可扩展 ListView 中的 ITEM，并将它所属的集合作为 SUBITEM。因此，我将有 2 个字符串数组，一个用于父项，一个用于子项。

我发现的所有示例都是“手动”填充列表，我无法弄清楚如何将我的项目数组分配给 GROUP 并将我的 COLLECTIONS 数组分配给 CHILDREN。

我不知道我是否解释得足够清楚，但简而言之，它会是这样的：

ITEM_1 = 第一组名称 COLLECTIONS_1 = 第一组的孩子

[示例图像](http://i.stack.imgur.com/Q0uYs.jpg)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:05:07.267

编辑：好的，设法像我想要的那样创建可扩展视图：

```
public class Search extends ListActivity {
    private String[] l1;
    private String[] l2;
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.search);
        ArrayList<Map<String, String>> list = buildData();
        String[] from = { "name", "purpose" };
        int[] to = { android.R.id.text1, android.R.id.text2 };
        SimpleAdapter adapter = new SimpleAdapter(this, list, android.R.layout.simple_list_item_2, from, to);
        setListAdapter(adapter);
    }

    private ArrayList<Map<String, String>> buildData() {
        l1 = getResources().getStringArray(R.array.items);
        l2 = getResources().getStringArray(R.array.collections);
        Integer i;
        int to = l1.length;
        ArrayList<Map<String, String>> list = new ArrayList<Map<String, String>>();     
        for(i=0;i < to;i++){
        list.add(putData(l1[i], l2[i]));
        }
        return list;
    }

    private HashMap<String, String> putData(String name, String purpose) {
        HashMap<String, String> item = new HashMap<String, String>();
        item.put("name", name);
        item.put("purpose", purpose);
        return item;
    }
} 
```

现在的问题是，我该如何排序？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-06T10:20:20.253

您从这里下载源代码（[Expandablelistview with searchview in android](http://deepshikhapuri.blogspot.in/2018/02/expandablelistview-with-searchview-in.html)）

**MainActivity.java：**

```
public class MainActivity extends AppCompatActivity {
    ExpandableListView ev_list;
    List> lv_country = new ArrayList<>();
    CustomAdapter customAdapter;
    EditText et_search;

    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.activity_main);
        getSupportActionBar().hide();
        init();

    }

    private void init() {
        ev_list = (ExpandableListView) findViewById(R.id.ev_list);
        et_search = (EditText) findViewById(R.id.et_search);

        fn_arraylist();
        customAdapter = new CustomAdapter(lv_country, getApplicationContext());
        ev_list.setAdapter(customAdapter);

        ev_list.setOnGroupClickListener(new ExpandableListView.OnGroupClickListener() {
            @Override
            public boolean onGroupClick(ExpandableListView parent, View v, int groupPosition, long id) {
                return true; // This way the expander cannot be collapsed
            }
        });

        for (int i = 0; i < customAdapter.getGroupCount(); i++) {
            ev_list.expandGroup(i);
        }

        et_search.addTextChangedListener(new TextWatcher() {
            @Override
            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {

            }

            @Override
            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {

            }

            @Override
            public void afterTextChanged(Editable editable) {

                if (et_search.getText().toString().length() == 0) {
                    customAdapter = new CustomAdapter(lv_country, getApplicationContext());
                    ev_list.setAdapter(customAdapter);

                    for (int i = 0; i < customAdapter.getGroupCount(); i++) {
                        ev_list.expandGroup(i);
                    }
                } else {

                    List> lv_search = new ArrayList<>();

                    for (int i = 0; i < lv_country.size(); i++) {
                        List> lv_searchstate = new ArrayList<>();

                        List> lv_state = (List>) lv_country.get(i).get("State");
                        for (int j = 0; j < lv_state.size(); j++) {
                            if (lv_state.get(j).get("Name").toString().toLowerCase().contains(et_search.getText().toString())) {
                                lv_searchstate.add(lv_state.get(j));
                            }
                        }

                        if (lv_searchstate.size() != 0) {
                            HashMap hashMap_search = new HashMap<>();
                            hashMap_search.put("Name", lv_country.get(i).get("Name").toString());
                            hashMap_search.put("State", lv_searchstate);

                            lv_search.add(hashMap_search);
                        }
                    }

                    customAdapter = new CustomAdapter(lv_search, getApplicationContext());
                    ev_list.setAdapter(customAdapter);

                    for (int i = 0; i < customAdapter.getGroupCount(); i++) {
                        ev_list.expandGroup(i);
                    }

                }

            }
        });

    } 
```

谢谢！

# java - regex for string checking for not null

> ID：10089409
> 
> 赞同：-1
> 
> 时间：2012-04-10T13:08:16.697
> 
> 标签：java, regex

I need a Java regular expression, which checks that the given String is not Empty and not null . However the expression should ingnore if the user has accidentally given whitespace in the beginning of the input, but allow whitespaces later on.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T13:09:52.303

You could do it without using regex.

```
boolean check(String s) {
  return s != null && s.trim().length() > 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T13:10:30.040

You can use [Guava](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Strings.html#isNullOrEmpty%28java.lang.String%29) to check for `nullity` and emptiness:

```
Strings.isNullOrEmpty(myString); 
```

And you cannot use regular expressions on a `null` `String`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T13:10:38.927

Try this:

```
yourString != null && yourString.trim().length() > 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T13:13:55.973

您无法在 Java 中使用正则表达式检查空引用。您必须单独检查引用不为空，然后将字符串与正则表达式进行比较。

```
public static boolean isNullEmptyOrWhitespace(String s) {
  return (s==null) || s.matches("^\\s*$");
} 
```

# c# - SQL Server hits deadlock, does not choose victim

> ID：10089417
> 
> 赞同：1
> 
> 时间：2012-04-10T13:08:55.600
> 
> 标签：c#, sql-server, tsql, deadlock, blocking

I'm running into an issue in SQL Server 2005\. A stored procedure is run in a PowerBuilder application, which then calls a C# DLL library which runs a different stored procedure.

The first procedure performs some deletes on a table based on the criteria, and the second procedure uses that table as the primary data source in order to insert into a different table. The procedures make use of some of the same joined tables for selecting, but only the one table is being modified.

The problem is this setup sometimes deadlocks, but SQL Server doesn't do anything about it. There are try / catch statements in the DLL library that would log an error if the procedure it calls was killed due to a deadlock, but instead the library just sits waiting for the procedure to finish. I've let it sit for 10 minutes and it's still deadlocked.

I tried using the DEADLOCK_PRIORITY LOW statement in the second procedure, since it needs to wait for the deletes to finish before it selects. I also tried paring that select statement down to only one table just to test it, and it still hits a deadlock. I also tried using a TRY / CATCH block with a BEGIN TRANSACTION in order to catch deadlocks in both procedures, but that didn't help either.

Is there a way to force SQL Server to kill a transaction if it's being blocked? I can handle errors in the DLL, but if SQL Server doesn't return an error and just sits there, I can't do anything with it. Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T16:31:43.937

我会看看这篇文章： [http ://www.sql-server-performance.com/2006/reducing-locks/](http://www.sql-server-performance.com/2006/reducing-locks/)

它谈到了减少 SQL Server 锁，这可能是您的问题的一部分。我建议使用表格/页面上的锁定设置（PageLocks 开/关），看看这是否有助于解决这种情况。

与其尝试解决问题，不如尝试解决根本原因。

# testing - Selenium server -firefoxProfileTemplate can't work

> ID：10089422
> 
> 赞同：1
> 
> 时间：2012-04-10T13:09:03.410
> 
> 标签：testing, selenium

I want to start up Selenium server by specified firefox profile like blow command, but it didn't work well(can't open according to my specified profile), can somebody tell me if there were something wrong I used the command? Thanks!

ps: Windowns7 platform.

java -jar C:\Users\zhanjunw\Desktop\Selenium\selenium-server-standalone-2.20.0.jar -interactive -singleWindow -trustAllSSLCertificates -firefoxProfileTemplate "C:\Users\zhanjunw\AppData\Local\Mozilla\Firefox\Profiles\r91p21kg.seleniumProfile"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T15:37:38.877

选项 firefoxProfileTemplate 不再有效。请改用 webdriver.firefox.profile。你的命令应该是：

```
java -jar C:\Users\zhanjunw\Desktop\Selenium\selenium-server-standalone-2.20.0.jar -interactive -singleWindow -trustAllSSLCertificates -Dwebdriver.firefox.profile=seleniumProfile 
```

注意：选项 webdriver.firefox.profile 采用配置文件的名称，而不是其在文件系统中的位置。请参阅：[http ://code.google.com/p/selenium/wiki/FirefoxDriver](http://code.google.com/p/selenium/wiki/FirefoxDriver)

# perl - 带有超链接和嵌入图像的 perl sendmail

> ID：10089425
> 
> 赞同：0
> 
> 时间：2012-04-10T13:09:13.087
> 
> 标签：perl, email

如何使用 sendmail 在 perl 中添加图像和超链接到电子邮件？

这是我在 $message （变量）中想要的正文：

您的文件：filename.jpg
（在此处内联添加图像）

已处理，您可以在以下位置找到它：[在此处添加链接](http://foo.com) `

这是我的代码：
`sub sendEmail
{
my ($to, $from, $subject, $message) = @_;
my $sendmail = '/usr/lib/sendmail';
open(MAIL, "|$sendmail -oi -t");
print MAIL "From: $from\n";
print MAIL "To: $to\n";
print MAIL "Subject: $subject\n\n";
print MAIL "$message\n";
close(MAIL);
}`
`sendEmail($receiver, 'admin, 'your file has been Synchronized', $message);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:22:13.867

您可能需要使用允许您创建 MIME 附件的 Perl 模块。CPAN 上应该有一堆，例如 MIME::Lite。请参阅以下讨论：

[http://www.revsys.com/writings/perl/sending-email-with-perl.html](http://www.revsys.com/writings/perl/sending-email-with-perl.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T18:02:03.353

如果您只想在短信中提供一个简单的链接，您可能会认为不值得为此付出痛苦和努力。

但是，这里有一个简短的概要：

```
use MIME::Lite;
[...]

# First Create your message...
my $message = MIME::Lite->new(
    From    => $from_email,
    To      => $to_email,
    Cc      => join(", " => @cc_addresses),
    Subject => $subject,
    Type    => 'multipart/related',
);

# Now, we have to attach the message in HTML. First the HTML
my $html_message = <<"EOM";
<body>
    <p> Your File: <img src='cid:my_image.gif'/> has been processed
        and can be found <a href="$file_url">here</a>.</p>
</body>
EOM;

# Now define the attachment
$message->attach (
    Type => 'text/html',
    Data => $html_message,
);

# Let's not forget to attach the image too!
$message->attach (
    Type => 'image/gif',
    Id   => 'my_image.gif',
    Path => $file_name,
);

$message->send
    or die qq(Message wasn't sent: $!\n); 
```

看看模块中包含的[MIME Primer 。](http://p3rl.org/MIME%3a%3aLite#A-MIME-PRIMER)`MIME::Lite`如您所见，简单地添加一个电子邮件链接和一个图像需要比我们大多数人想做的更多的工作。

# objective-c - Cocoa：获取信息并播放 mp3

> ID：10089431
> 
> 赞同：1
> 
> 时间：2012-04-10T13:09:33.053
> 
> 标签：objective-c, cocoa

什么是最简单的方法：

1.  从文件系统加载 mp3
2.  获取 mp3 比特率元数据
3.  mp3 文件大小
4.  在 iTunes 上播放 mp3

可可？

我目前只有文件路径。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:32:08.900

对于元数据，您可以使用[MDItem](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/MDItemRef/Reference/reference.html)。

> MDItem 是一个符合 CF 标准的对象，它表示一个文件以及与该文件关联的元数据。

```
MDItemRef metadata = MDItemCreate(NULL, (CFStringRef)@"/Users/parag/0.mp3");
NSNumber *audioBitrate = (NSNumber *)MDItemCopyAttribute(metadata, kMDItemAudioBitRate); 
NSLog(@"audioBitrate:%i", [audioBitrate intValue]); 
```

对于文件大小

```
[[[NSFileManager defaultManager] attributesOfItemAtPath:@"/Users/parag/0.mp3" error:nil] fileSize]; 
```

在 iTunes 上播放 mp3

```
NSString *cmd = @"open -a /Applications/iTunes.app '/Users/parag/0.mp3'";
system([cmd UTF8String]); 
```

# mysql - 将数据从一个数据库迁移到另一个数据库

> ID：10089439
> 
> 赞同：1
> 
> 时间：2012-04-10T13:10:08.433
> 
> 标签：mysql, xml, wordpress

以前的开发人员建立了一个网站，其中包含数以千计的新闻和事件项目。问题是他创建了数据库来使用他自己的 CMS。我们现在正在使用 Wordpress，因此希望将这些数据迁移到 WP 数据库中。

问题是数据略有不同，需要进行一些操作才能导入。有没有人有一个简单的方法来做到这一点的建议？

**我需要原始数据库中的旧数据采用新 Wordpress 数据库的格式。请记住，实际上有数百个条目，所以这不是复制和粘贴工作！**

我已将示例导出为 XML（导出时的 CSV 到处都是）：

这构成了原始自定义 CMS 中的一个事件：

```
 <database name="medicom_medi">
    <!-- Table myevents -->
    <table name="myevents">
      <column name="id">13</column>
      <column name="title">This is the title</column>
      <column name="description">This is the content</column>
      <column name="mediwales_event">0</column>
    </table>
  </database>
  <database name="medicom_medi">
    <!-- Table myevents_dates -->
    <table name="myevents_dates">
      <column name="id">22</column>
      <column name="eventid">13</column>
      <column name="datefrom">2011-01-31 00:00:00</column>
      <column name="dateto">0000-00-00 00:00:00</column>
      <column name="venue">PA Consulting Group</column>
      <column name="address">123 Buckingham Palace Rd, London SW1W 9SR</column>
    </table>
  </database> 
```

这是我需要数据在 Wordpress 中的格式：

```
<database name="medicom_v3">
    <!-- Table wp_posts -->
    <table name="wp_posts">
        <column name="ID">3871</column>
        <column name="post_author">1</column>
        <column name="post_date">2012-04-10 10:00:34</column>
        <column name="post_date_gmt">2012-04-10 10:00:34</column>
        <column name="post_content">Testing</column>
        <column name="post_title">Test event 2</column>
        <column name="post_excerpt"></column>
        <column name="post_status">publish</column>
        <column name="comment_status">closed</column>
        <column name="ping_status">closed</column>
        <column name="post_password"></column>
        <column name="post_name">test-event-2</column>
        <column name="to_ping"></column>
        <column name="pinged"></column>
        <column name="post_modified">2012-04-10 10:00:34</column>
        <column name="post_modified_gmt">2012-04-10 10:00:34</column>
        <column name="post_content_filtered"></column>
        <column name="post_parent">0</column>
        <column name="guid">http://www.mediwales.com/v3/?post_type=tribe_events&amp;#038;p=3871</column>
        <column name="menu_order">0</column>
        <column name="post_type">tribe_events</column>
        <column name="post_mime_type"></column>
        <column name="comment_count">0</column>
    </table>
</database>
<database name="medicom_v3">
    <!-- Table wp_postmeta -->
    <table name="wp_postmeta">
        <column name="meta_id">14580</column>
        <column name="post_id">3871</column>
        <column name="meta_key">_EventShowMapLink</column>
        <column name="meta_value">false</column>
    </table>
    <table name="wp_postmeta">
        <column name="meta_id">14581</column>
        <column name="post_id">3871</column>
        <column name="meta_key">_EventShowMap</column>
        <column name="meta_value">false</column>
    </table>
    <table name="wp_postmeta">
        <column name="meta_id">14582</column>
        <column name="post_id">3871</column>
        <column name="meta_key">_EventAllDay</column>
        <column name="meta_value">yes</column>
    </table>
    <table name="wp_postmeta">
        <column name="meta_id">14583</column>
        <column name="post_id">3871</column>
        <column name="meta_key">_EventStartDate</column>
        <column name="meta_value">2012-04-17 00:00:00</column>
    </table>
    <table name="wp_postmeta">
        <column name="meta_id">14584</column>
        <column name="post_id">3871</column>
        <column name="meta_key">_EventEndDate</column>
        <column name="meta_value">2012-04-17 23:59:59</column>
    </table>
    <table name="wp_postmeta">
        <column name="meta_id">14585</column>
        <column name="post_id">3871</column>
        <column name="meta_key">_EventVenueID</column>
        <column name="meta_value">0</column>
    </table>
    <table name="wp_postmeta">
        <column name="meta_id">14586</column>
        <column name="post_id">3871</column>
        <column name="meta_key">_EventCost</column>
        <column name="meta_value"></column>
    </table>
    <table name="wp_postmeta">
        <column name="meta_id">14587</column>
        <column name="post_id">3871</column>
        <column name="meta_key">_EventOrganizerID</column>
        <column name="meta_value">0</column>
    </table>
</database> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:44:59.557

由于它是自制的 CMS，您很可能找不到任何工具将所有代码转换为 WordPress 格式。

我会为您制作一个脚本（php 或其他）来转换这个巨大的转储。我认为 WordPress（或插件）可以读取 XML，因此您只需要调整结构和键即可。

# selenium - 在 Selenium/Webdriver 中处理平台特定键的最佳方法是什么？

> ID：10089442
> 
> 赞同：6
> 
> 时间：2012-04-10T13:10:28.350
> 
> 标签：selenium, webdriver

我的问题很简单：

我想做一个“全选”。与 linux 和 windows 相比，macosx 中的做法有所不同。

> Keys.chord(Keys.COMMAND, "a")

对比

> Keys.chord(Keys.CONTROL, "a")

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T13:16:21.980

在 Java 中，我对此几乎没有解决方法：

```
String os = System.getProperty("os.name");
if (os.equals("WINDOWS")){
   Keys.chord(Keys.CONTROL, "a");
}else{
   Keys.chord(Keys.COMMAND, "a");
} 
```

基本上 - 我得到了我在哪里运行并相应地运行的操作系统

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-22T19:45:44.337

由于Linux和Windows都支持CONTROL，那么唯一的区别就是MAC（Darwin），所以我宁愿使用：

**Python：**

```
import platform

os_base = platform.system()

If os_base == 'Darwin':

    selector.send_keys(Keys.COMMAND, 'a')

else:

    selector.send_keys(Keys.CONTROL, 'a') 
```

# javascript - Javascript: Passing variable to Google Charts API

> ID：10089444
> 
> 赞同：1
> 
> 时间：2012-04-10T13:10:30.703
> 
> 标签：javascript, html, pie-chart

I am working with Google Pie Charts API in Javascript. I am using Javascript within PHP. I am passing array elements to API url. But, somehow, I am not getting the required Pie Chart. I think I am messing with the syntax of passing variables to the API url.

This is the code I am using:

```
function pie(){
?>
<SCRIPT LANGUAGE='Javascript'><!--

piechart();
function piechart() {
var chtdata = new Array(50,50,100,25);       // Array containing values to be mapped

var doc1 =  "<img src='http://chart.apis.google.com/chart?cht=p3&chs=450x200&chd=t:'+chtdata[0]+',50,100,20&chl='r'|'s'|'g'|'h'&chtt='Visitor Details'&chco=ff0000' name='piechart' />";
document.write(doc1);
document.write('Done.');

}
</SCRIPT>
<?php 
```

It would be great if you could point out my mistake. Any help will be appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:12:39.673

因为 JavaScript 字符串的外引号是双引号，所以对变量的引用实际上根本不是对变量的引用。您问题中文本的颜色编码应该清楚地表明这一点。

尝试：

```
var doc1 =  "<img src='http://chart.apis.google.com/chart?cht=p3&chs=450x200&chd=t:"+val1+",50,100,20&chl='r'|'s'|'g'|'h'&chtt='Visitor Details'&chco=ff0000' name='piechart' />"; 
```

# adsense - Google Ad doesn't display

> ID：10089446
> 
> 赞同：1
> 
> 时间：2012-04-10T13:10:36.960
> 
> 标签：adsense

At the bottom of content, I have put two rectangular boxes ad, out of which only one shows up. Is there a restriction on showing ads per page.

Following is my code with credentials removed

```
<div class="bottomAds">
            <div class="rectangle1">
                <script type="text/javascript"><!--
                    google_ad_client = "ca-pub-********";
                    /* Rectangle-1 */
                    google_ad_slot = "******";
                    google_ad_width = 336;
                    google_ad_height = 280;
                    //-->
                </script>
                <script type="text/javascript"
                    src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
                </script>
            </div>
            <div class="rectangle2">
                <script type="text/javascript"><!--
                    google_ad_client = "ca-pub-*******";
                    /* Medium-Rectangle */
                    google_ad_slot = "******";
                    google_ad_width = 300;
                    google_ad_height = 250;
                    //-->
                </script>
                <script type="text/javascript"
                    src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
                </script>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:44:04.260

是的，虽然您可以请求更多帧，但帧有一个上限，但您不能两次渲染同一个窗口。

# jquery - jQuery Ajax Request inside Ajax Request

> ID：10089447
> 
> 赞同：67
> 
> 时间：2012-04-10T13:10:38.673
> 
> 标签：jquery, ajax, google-maps, instagram

Is it possible to make an ajax request inside another ajax request? because I need some data from first ajax request to make the next ajax request.

First I'm using Google Maps API to get LAT & LNG, after that I use that LAT & LNG to request Instagram API (search based location).

Once again, is this possible, and if so how?

```
$('input#search').click(function(e) {
    e.preventDefault();
    var source = $('select[name=state] option:selected').text()+' '+$('select[name=city] option:selected').text()+' '+$('select[name=area] option:selected').text();
    var source = source.replace(/ /g, '+');
    if(working == false) {
        working = true;
        $(this).replaceWith('<span id="big_loading"></span>');
        $.ajax({
            type:'POST',
            url:'/killtime_local/ajax/location/maps.json',
            dataType:'json',
            cache: false,
            data:'via=ajax&address='+source,
            success:function(results) {
            // this is where i get the latlng
            }
        });
    } else {
        alert('please, be patient!');
    }
}); 
```

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-04-10T13:19:14.300

这是一个例子：

```
$.ajax({
    type: "post",
    url: "ajax/example.php",
    data: 'page=' + btn_page,
    success: function (data) {
        var a = data; // This line shows error.
        $.ajax({
            type: "post",
            url: "example.php",
            data: 'page=' + a,
            success: function (data) {

            }
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-07-04T04:34:47.627

从“完成”调用第二个 ajax

这是示例

```
 var dt='';
   $.ajax({
    type: "post",
    url: "ajax/example.php",
    data: 'page='+btn_page,
    success: function(data){
        dt=data;
        /*Do something*/
    },
    complete:function(){
        $.ajax({
           var a=dt; // This line shows error.
           type: "post",
           url: "example.php",
           data: 'page='+a,
           success: function(data){
              /*do some thing in second function*/
           },
       });
    }
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-10T13:24:13.497

这只是一个例子。您可能希望根据您的要求对其进行自定义。

```
 $.ajax({
      url: 'ajax/test1.html',
      success: function(data1) {
        alert('Request 1 was performed.');
        $.ajax({
            type: 'POST',
            url: url,
            data: data1, //pass data1 to second request
            success: successHandler, // handler if second request succeeds 
            dataType: dataType
        });
    }
}); 
```

有关更多详细信息：请参阅[此](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-30T02:58:47.170

```
$.ajax({
    url: "<?php echo site_url('upToWeb/ajax_edit/')?>/" + id,
    type: "GET",
    dataType: "JSON",
    success: function (data) {
        if (data.web == 0) {
            if (confirm('Data product upToWeb ?')) {
                $.ajax({
                    url: "<?php echo site_url('upToWeb/set_web/')?>/" + data.id_item,
                    type: "post",
                    dataType: "json",
                    data: {web: 1},
                    success: function (respons) {
                        location.href = location.pathname;
                    },
                    error: function (xhr, ajaxOptions, thrownError) { // Ketika terjadi error
                        alert(xhr.responseText); // munculkan alert
                    }
                });
            }
        }
        else {
            if (confirm('Data product DownFromWeb ?')) {
                $.ajax({
                    url: "<?php echo site_url('upToWeb/set_web/')?>/" + data.id_item,
                    type: "post",
                    dataType: "json",
                    data: {web: 0},
                    success: function (respons) {
                        location.href = location.pathname;
                    },
                    error: function (xhr, ajaxOptions, thrownError) { // Ketika terjadi error
                        alert(xhr.responseText); // munculkan alert
                    }
                });
            }
        }
    },

    error: function (jqXHR, textStatus, errorThrown) {
        alert('Error get data from ajax');
    }

}); 
```

# web-services - 黑莓应用程序开发 - 应用程序在 16-18 小时后停止工作

> ID：10089451
> 
> 赞同：0
> 
> 时间：2012-04-10T13:10:44.990
> 
> 标签：web-services, blackberry, timer, gps, timertask

我一开始就深表歉意，因为我知道回答这个问题就像把果冻钉在墙上一样。我会提供尽可能多的细节，但没有太多可以提供的。

我正在开发一个黑莓应用程序，它使用 GPS 每 xx 分钟获取用户的位置（可能是 15、30 或 60，具体取决于用户设置的偏好）；它将位置数据发送到 Web 服务。

它运行良好并报告用户的位置正常，但只有大约 16-18 小时，然后应用程序停止报告并且用户界面不再工作。不会抛出任何错误，它只是在重新启动应用程序之前不再响应用户选择。

令我感到奇怪的是，应用程序崩溃是相当可预测的——它永远不会在 8 小时或 10 小时后崩溃，它总是在 16-18 小时的窗口内，这表明崩溃与 GPS/WebService 有关报告。

基本上，如果我从 GPS/WebService 的角度来看，它看起来好像应用程序可以设法向 WebService 报告 36 次（每半小时，持续 18 小时），然后它就死了。

我将在这里发布一些代码，希望它能激发某人的想法。

```
private void updateGPSLocation(){
    gps_interval_timer.scheduleAtFixedRate(new TimerTask() {
       public void run() {
         try{

           getGPSLocation();
           if(longitude != 0.0 && latitude != 0.0)
           {
             updateSubscriberLocation();
           }

          }catch(Exception ex){                 
             }
      }
  }, 0, gps_interval);
} 
```

这是前面代码中引用的 getGPSLocation() 调用的代码：

```
public void getGPSLocation(){
     try{
          //GPS thread
           BlackBerryLocationProvider provider = (BlackBerryLocationProvider)LocationProvider.getInstance(new BlackBerryCriteria(GPSInfo.GPS_MODE_ASSIST));

          //geolocation thread
           BlackBerryLocationProvider provider1 = (BlackBerryLocationProvider)LocationProvider.getInstance(new BlackBerryCriteria(LocationInfo.GEOLOCATION_MODE_CELL));

        if (provider != null){
            provider.setLocationListener(new LocationListenerImpl(), _interval, 1, 1);
         }

         if(provider1 != null){
            provider1.setLocationListener(new LocationListenerImpl(), _interval, 1, 1);
         }
      }
      catch(Exception le){
       }        
} 
```

再次，我很抱歉，我知道这是一个开放式问题。Blackberry GPS 是否存在任何已知问题？因为我正在使用计时器任务来安排基于间隔的报告，所以我是否可能只是通过将计划的计时器任务放入队列中来吸收所有可用内存？我是否需要使用 cancel() 方法显式处理计时器任务？就像是：

```
gps_interval_timer.scheduleAtFixedRate(new TimerTask() {
       public void run() {
         try{

           getGPSLocation();
           if(longitude != 0.0 && latitude != 0.0)
           {
             updateSubscriberLocation();
           }

          }catch(Exception ex){                 
             }
          finally
          {
             this.cancel();
          }

      }
  }, 0, gps_interval); 
```

非常感谢任何帮助。谢谢！

**更新了 LocationListener 代码**

```
private class LocationListenerImpl implements LocationListener { 
    public void locationUpdated(LocationProvider provider, Location location) {
    if(location.isValid()) {
       longitude = location.getQualifiedCoordinates().getLongitude();
       latitude = location.getQualifiedCoordinates().getLatitude(); 
     }
   }
    public void providerStateChanged(LocationProvider provider, int newState) {

    }
} 
```

getGPSLocation() 中使用的 _interval 变量设置为 -1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:11:03.110

我认为你需要重构你的代码。您正在使用计时器以 gps_interval 指定的速率创建 BlackBerryLocationProvider，它将以 _interval 指定的速率获取位置并调用 LocationListenerImpl 的 locationUpdated() 方法（您为每个 BlackBerryLocationProvider 创建新方法。至少存在两个潜在问题这里：

1.  我怀疑 _interval 与 gps_interval 相关，在这种情况下，在 gps_interval 时间量之后，您创建一个位置提供程序，该提供程序在向侦听器提供位置之前等待 _interval 时间量。到这个时候，您的计时器可能再次过期，导致创建另一个位置提供程序......消耗了不必要的资源。
2.  您还没有向我们展示您的 LocationListener 实现。如果您不关闭 BlackBerryLocationProvider 并释放 LocationListenerImpl，那么每次计时器到期时，您将创建消耗更多资源的新对象，而不会释放旧对象。

对 setLocationListener() 的调用具有间隔参数的原因之一是支持您想要执行的操作，即）定期提供位置。使用这个工具可以让操作系统更智能地了解它如何处理 GPS，如果使用不当，这会严重消耗电池电量。

因此，当您需要位置创建提供程序时，为所需的时间间隔注册您的侦听器，然后在侦听器中处理位置。请务必在单独的线程上连接到后端 Web 服务。如果您停止等待服务器响应的事件线程，您将给系统带来更多麻烦。

编辑：

这可能是满足您需求的 getGPSLocation() 的实现。它会尝试一组标准，然后是另一组。它仍然依赖于时间间隔的计时器，但不使用位置提供程序的时间间隔/回调属性。由于它没有注册侦听器，因此一旦提供者超出范围，它将受到垃圾回收的影响。

```
public void getGPSLocation(){
   try{
      //GPS thread
      BlackBerryLocationProvider provider =
         (BlackBerryLocationProvider)LocationProvider.getInstance(
         new BlackBerryCriteria(GPSInfo.GPS_MODE_ASSIST));

       if (provider != null){
          try {
             Location location = provider.getLocation(timeout);
             // process location
             return;
          } catch (LocationException le) {
          } catch (Exception e) {
          }
       }

       provider =
          (BlackBerryLocationProvider)LocationProvider.getInstance(
          new BlackBerryCriteria(LocationInfo.GEOLOCATION_MODE_CELL));

       if (provider != null){
          try {
             Location location = provider.getLocation(timeout);
             // process location
          } catch (LocationException le) {
          } catch (Exception e) {
          }
       }
    }
    catch(Exception le){
    }        
 } 
```

话虽如此，更好的方法可能是将 updateGPSPosition 和 getGPSPositioin 替换为（来自 API 文档）：

```
public void updateGPSPosition() {
   BlackBerryCriteria bbCriteria;
   BlackBerryLocationProvider bbProvider;

   try { //setup Criteria
      bbCriteria = new BlackBerryCriteria()); // use default mode on the device
      bbCriteria.enableGeolocationWithGPS();  // retrieve geolocation fix if GPS fix unavailable
   } catch (UnsupportedOperationException uoe) {}

   try { //setup LocationProvider
      bbProvider = (BlackBerryLocationProvider)LocationProvider.getInstance(bbCriteria);
      bbprovider.setLocationListener(new LocationListenerImpl(), interval, timeout, maxage);
   } catch (LocationException le) {}

} 
```

您可能希望将 bbCriteria 和 bbProvider 保存在稍后可以获取它们以更改间隔或停止获取位置的地方。

很难找出在 providerStateChanged() 内部做什么，这是我通常使用的：

```
public void providerStateChanged(LocationProvider provider, int newState) {
    if (newState == LocationProvider.TEMPORARILY_UNAVAILABLE)
    {
        if (unavailableCount < 3) {
            System.err.println("TEMPORARILY_UNAVAILABLE Reset " + Integer.toString(unavailableCount));

            // de-register listener, reset the provider and re-register
            locationProvider.setLocationListener(null, -1, -1, -1);
            locationProvider.reset();
            locationProvider.setLocationListener(this, 1, -1, -1);
            unavailableCount++;
        } else {
            System.err.println("TEMPORARILY_UNAVAILABLE Suspend");
            locationProvider.setLocationListener(null, -1, -1, -1);
        }
    }
    else if (newState == LocationProvider.AVAILABLE)
    {
        unavailableCount = 0;
    }
    else {
        System.err.println("OUT_OF_SERVICE");
        locationProvider.setLocationListener(null, -1, -1, -1);
    }
} 
```

# javascript - 在 D3.js 中过渡旭日形

> ID：10089453
> 
> 赞同：4
> 
> 时间：2012-04-10T13:10:45.863
> 
> 标签：javascript, d3.js, transition, sunburst-diagram

我正在使用 d3 进行数据驱动的可视化。我有一个类似于旭日形的结构（但只有一层，有点像中间有一个洞的饼图）。

通过单击键盘上的箭头，可视化的数据会发生变化，因此会出现旭日形。特别是 innerRadius 会根据数据的特定属性而变化，并且会添加、删除和更新一些元素。

我无法正确地从一个朝阳过渡到另一个朝阳。除了更新现有元素之外，过渡几乎可以。

例如，假设我在以下两条数据中有共同的元素来可视化，例如

```
[{'name': 'A', 'value': 100}, {'name': 'B', 'value': 100}, {'name': 'C', 'value': 100}] 
```

和

```
[{'name': 'A', 'value': 300}, {'name': 'D', 'value': 200}]. 
```

在上面的示例中，我希望与元素 A 对应的弧线像 d3 网站上的 Sunburst 示例一样平滑更新，B 和 C 元素消失（我设法做到了）并且 D 元素平滑出现例如不断增长的弧线，或类似的东西。

我很努力，但我总是得到如下控制台日志：

```
Error: Problem parsing d="M307.2125548508473,-80.28703629255259A350,350 0 0.816469152,1 -241.27474698802394,61.83978850098657L-172.92635975175665,38.77767308406868A238.60164101523165,238.60164101523165 0 0.816469152,0 210.15560219262875,-60.13103059122014Z" 
```

我认为当数据在一个可视化和另一个可视化之间发生变化时会出现问题，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T14:34:20.017

解析错误是由 SVG 的[椭圆弧命令](http://www.w3.org/TR/SVG/paths.html#PathDataEllipticalArcCommands)**A**的简单路径插值引起的。椭圆弧的形式为“rx ry x-axis-rotation large-arc-flag sweep-flag x y”。如果您在圆弧命令上使用默认路径插值，您可能会无意中尝试插值其中一个标志，其值只能为零或一。如果您启用或禁用 innerRadius，则始终会发生此错误。

您不应该对[d3.svg.arc](https://github.com/mbostock/d3/wiki/SVG-Shapes#wiki-arc)路径数据使用[默认字符串插值器；](https://github.com/mbostock/d3/wiki/Transitions#wiki-d3_interpolateString)arcs 必须使用[自定义补间](https://github.com/mbostock/d3/wiki/Transitions#wiki-attrTween)在极坐标中插值。下面是两个简短的示例，演示如何在数据空间中插入弧：

*   [操作方法：更新饼图（第 1 部分）](http://bl.ocks.org/1346395)
*   [操作方法：更新饼图（第 2 部分）](http://bl.ocks.org/1346410)

# jsf - 以编程方式将 sortBy 属性添加到 primefaces DataTable 列

> ID：10089459
> 
> 赞同：1
> 
> 时间：2012-04-10T13:11:03.773
> 
> 标签：jsf, datatable, primefaces

我正在尝试以编程方式将该`sortBy`属性放入 primefaces 数据表中`Column`。`getColumns()`我从 DataTable 继承，并使用自定义调用创建自己的列。

不幸的是，似乎没有干净的方法将 sortBy 属性插入列，因为该方法还不知道它所在的上下文。

```
public List<Column> getColumns() {
    if (columns == null) {
        columns = new ArrayList<Column>();
        String[] columnStrings = getShowColumns().split(",");
        for (String columnString : columnStrings) {
            Column column = getColumnByType(columnString.trim());
            if (column != null) {
                //here I have to add the sortBy Expression somehow,
                //but there is no context to construct it from
                //column.setSortBy(ValueExpression)
                columns.add(column);
            }
        }
    }
    return columns;
} 
```

对我来说似乎很明显，我错过了一些东西，但我现在迷路了。`Column`似乎在其他地方充满了那个，`ValueExpression`但我找不到在哪里......

我尝试使用调试器检查所有代码，但我无法弄清楚在原始实现中何时生成 ValueExpression。任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T16:14:22.627

`ValueExpression`如果未指定列，则for`sortBy`不会存储在任何地方`sortBy`，这是您的情况。`ValueExpression`您必须为应该可排序的每一列创建自己的。

我假设你知道列类型和值，所以你可以试试这个：

```
Column column = getColumnByType(columnString.trim());
FacesContext facesContext = FacesContext.getCurrentInstance();
ELContext elContext = facesContext.getELContext();
ExpressionFactory elFactory = facesContext.getApplication().getExpressionFactory();
ValueExpression valueExpresion = elFactory.createValueExpression(elContext, column.getValue(), column.getType()); 
```

否则，如果您不知道类型和值：

```
 String valueExprs = "#{data.street}"; // for example
    ...
    Column column = getColumnByType(columnString.trim());
    ...
    FacesContext facesContext = FacesContext.getCurrentInstance();
    ELContext elContext = facesContext.getELContext();
    ExpressionFactory elFactory = facesContext.getApplication().getExpressionFactory();
    ValueExpression valueExpression = elFactory.createValueExpression( elContext, valueExprs, String.class); 
```

现在您可以设置 sortBy ：

```
column.setValueExpression("sortBy", valueExpression); 
```

注意使用`column.setValueExpression`代替`column.setSortBy`- 它会减少麻烦并且大部分时间都可以工作。

希望它有所帮助！

# c# - 使用 Google Calendar API 创建全天活动

> ID：10089460
> 
> 赞同：2
> 
> 时间：2012-04-10T13:11:03.977
> 
> 标签：c#, .net, google-calendar-api

我正在使用 C# 和 Google Calendar API 类“CalendarService”和“Event”。我想上传一个没有任何日期的事件到谷歌日历（全天）。如果我不设置 Event.End 属性，我会得到一个异常。

如何将我的活动设置为全天活动？

找了很久，没有解决方法。。。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T13:15:45.477

添加`AllDay`设置为 true 的新时间：

```
var entry = new EventEntry(title, description, "");
var time = new When();
time.StartTime = start;
time.AllDay = true;

entry.Times.Add(time); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-07T15:45:09.577

标记的答案不是Java吗？？？

他询问了c#。

```
Event newEvent = new Event()
        {

            Summary = "5ummary",
            Location = "location avenue",
            Description = "description",
            Start = new EventDateTime()
            {
                Date = "2015-08-07",

            },
            End = new EventDateTime()
            {
                Date = "2015-08-07",

            },

        }; 
```

# bash - bash 将 ip 地址传递给我脚本中的 URL

> ID：10089463
> 
> 赞同：1
> 
> 时间：2012-04-10T13:11:31.967
> 
> 标签：bash

[http://www.geoiptool.com/en/?IP=](http://www.geoiptool.com/en/?IP=)

我需要一些帮助来编写一个允许我将任何给定 IP 传递给该 URL 的 bash 脚本。上面的站点是我想调用我的脚本的 URL。有人可以让我开始吗？谢谢！

我想像这样使用我的脚本：echo IP_ADDRESS | 地理工具

当我回显一个 IP 并将其传送到我的脚本时，我在下面收到此错误。那是因为没有安装管道命令吗？

-bash-3.2$ 回声 173.192.108.135 | geo -bash：回声：写入错误：管道损坏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:23:32.093

我建议使用命令行参数而不是从标准输入读取。您可以使用 $1 来引用第一个参数，使用 $2 来引用第二个参数，等等。

```
#!/bin/bash
curl -s http://www.geoiptool.com/en/?IP=$1 
```

然后你只需通过以下方式解雇它：

```
geoiptool <IP> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:14:48.610

您可以使用该`read`命令读取`stdin`地址并将其存储在变量中。然后用于`wget`发出 HTTP 请求：

```
read ip
wget http://www.geoiptool.com/en/?IP=$ip 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T13:15:22.230

好的。

您可以使用该`read`命令从中读取一行`stdin`并将其分配给一个变量：

```
read variable
echo "You said: $variable" 
```

并且`curl`是用于与 HTTP URL 交互的常用命令行工具：

```
curl http://www.google.com/ 
```

（您也可以使用`wget`或`lynx`或其他工具，具体取决于您的要求）。

所以一个非常简单的脚本可能看起来像：

```
URL="http://www.geoiptool.com/en/?IP="
read ipaddr
curl --silent "$URL$ipaddr" 
```

# xcode - 如何配置 XCode 以创建适当的应用程序包

> ID：10089464
> 
> 赞同：2
> 
> 时间：2012-04-10T13:11:32.540
> 
> 标签：xcode, macos, bundle

我有一个在 Xcode 中创建的项目（从命令行工具模板开始），我需要创建一个标准的 .app 应用程序包，以便我可以使用它来创建带有 PackageMaker 的安装程序。

目前，“产品”下列出的唯一内容是主二进制文件，当我尝试创建存档时，我得到一个非标准目录结构 (../usr/local/bin/...) 而不是 ../Contents /苹果系统。

我还注意到在打包下“包装扩展”设置为空白而不是“.app”。

我认为我的项目未配置为创建应用程序包，但是从我在线阅读的内容来看，Xcode 应该在您使用标准模板之一时自动创建应用程序包。为了生成正确的 .app 文件，我需要更改哪些设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:03:40.533

Xcode 的命令行工具模板不会创建应用程序包。只有使用 Cocoa 和 Cocoa Touch 框架的项目模板才能创建应用程序包。您必须在项目中添加另一个目标才能创建 .app 包。我没有在 Cocoa 程序中包装命令行工具的经验，所以我无法帮助您。

# android - 自动缩放 TextView 文本以适应范围（Android 4x 的问题）

> ID：10089467
> 
> 赞同：3
> 
> 时间：2012-04-10T13:11:37.503
> 
> 标签：android, textview, autoresize

我正在测试以下代码（由 Chase 开发）链接-> [自动缩放 TextView 文本以适应边界](https://stackoverflow.com/questions/5033012/auto-scale-textview-text-to-fit-within-bounds?answertab=active#tab-top) ，该代码在 Android 2x-3x 上完美运行，但在 4x 上不起作用。由于某种原因，我不能直接在 Chase 帖子中发表评论，所以我决定打开新的流。如果有人能提出为什么代码在 Android 4x 上停止工作，那将会很有帮助？我尝试了自己，但一无所获:(。要运行代码，我使用以下布局：

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >
           <chase.test.com.AutoResizeTextView
               android:id="@+id/resizingText"
               android:textSize = "250sp"
               android:gravity = "center"
               android:text = "1 B C  abc d abcd1 abcd2 abcd3 abcd4 abcd5 abcd6 abcd7" 
               android:layout_width="fill_parent"
               android:layout_height="wrap_content"
               android:layout_weight="1"
           />
    </LinearLayout> 
```

# php - 如何重新排列数组？

> ID：10089468
> 
> 赞同：-2
> 
> 时间：2012-04-10T13:11:38.747
> 
> 标签：php, arrays

我的 PHP 函数输出分隔数组而不是编号索引数组。现在的问题是，我怎样才能使这些输出加入一个数组？如果您有任何澄清，请告诉我。

这是当前正在输出的内容。

```
 Array
(
    [id] => 2
    [name] => Jerry Maxwell
    [upline] => 1
)
Array
(
    [id] => 3
    [name] => Roseann Solano
    [upline] => 1
)
Array
(
    [id] => 4
    [name] => Joshua Doe
    [upline] => 1
)
Array
(
    [id] => 5
    [name] => Ford Maxwell
    [upline] => 1
)
Array
(
    [id] => 6
    [name] => Ryan Solano
    [upline] => 1
) 
```

对于这样的事情：

```
 Array
(
[0] =>
    [id] => 2
    [name] => Jerry Maxwell
    [upline] => 1
[1] =>
    [id] => 3
    [name] => Roseann Solano
    [upline] => 1
[2] =>
    [id] => 4
    [name] => Joshua Doe
    [upline] => 1
[3] =>
    [id] => 5
    [name] => Ford Maxwell
    [upline] => 1

[4] =>
    [id] => 6
    [name] => Ryan Solano
    [upline] => 1
) 
```

我希望通过 PHP 来解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:15:04.537

您的代码正在输出几个单独的数组。您似乎希望它们都在一个主阵列中。如果是这种情况，您可以将它们推送到主数组中，而不是将数组打印出来：

```
$collection = array( array("Foo", "Bar"), array("Fizz", "Buzz") );
$masterArray = array();

foreach ( $collection as $indArray )
  array_push( $masterArray, $indArray );

print_r( $masterArray ); 
```

这将导致以下数组

```
Array
(
  [0] => Array
    (
      [0] => Foo
      [1] => Bar
    )
  [1] => Array
    (
      [0] => Fizz
      [1] => Buzz
    )
) 
```

当然，我很好奇您从哪里开始输出数据。如果您已经在一个集合中拥有了所有数组，则可能没有必要将它们移动到一个全新的数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:17:38.743

将每个数组推入另一个数组，这样你就得到了这样的东西

```
$array[0] = array("id" =>2, "name" => "Jerry Maxwell", "upline"=>1 ); 
```

数组数组。

这是你想要的吗？

# asp.net-mvc-3 - 找不到名称空间

> ID：10089477
> 
> 赞同：0
> 
> 时间：2012-04-10T13:12:15.867
> 
> 标签：asp.net-mvc-3

我正在开发一个项目，该项目应该将 Yahoo Weather API 与 ASP.Net MVC 3 连接起来。创建变量后，它给了我一个名为“找不到类型或命名空间名称‘WeatherForecast’的错误（您是否缺少使用指令还是程序集引用？）C:\Users\kumi.SH\Documents\Learn\ASP.Net_MVC3\WeatherApp\WeatherApp\Controllers\HomeController.cs"

我的 HomeController.cs 文件中有以下代码：

```
public ActionResult GetWeather(string Id)
{
    StringBuilder sb = new StringBuilder();
    WeatherForecast wf = new WeatherForecast();
    WeatherForecasts wfs = wf.GetWeatherByPlaceName(Id);
    WeatherData[] wd = wfs.Details;
    sb.AppendFormat("<B>Weather Forecast for {0}</B><br /><br />", wfs.PlaceName);
    foreach (WeatherData d in wd)
    {

        if (!string.IsNullOrEmpty(d.WeatherImage))
        {
            sb.AppendFormat("<img src=\"{0}\" >", d.WeatherImage);
            sb.AppendFormat(" {0}", d.Day);
            sb.AppendFormat(", High {0}F", d.MaxTemperatureF);
            sb.AppendFormat(", Low {0}F<br />", d.MinTemperatureF);
        }
    }
    Response.Write(sb.ToString());
    return null;
} 
```

您能否指定需要使用的命名空间？

提前谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:19:25.360

看起来您的应用程序使用以下 Web 服务？

[http://www.webservicex.net/weatherforecast.asmx](http://www.webservicex.net/weatherforecast.asmx)

如果是这样，您将需要在您尝试使用它的同一项目中添加对此服务的服务引用。即您的示例中的代码所在的同一个项目。从您示例中的路径来看，该项目称为“WeatherApp”。

您可以通过右键单击解决方案资源管理器中的项目节点并选择“添加服务引用”来执行此操作。然后在出现的对话框中将服务 url（上图）粘贴到地址栏中并点击“Go” - 给它一个名称，然后点击“Ok”

![添加服务参考图像](../Images/5f499a68d2e26a84ffd23262c2890f0a.png)

# outlook - 使用 Applescript 设置默认 Microsoft Outlook for Mac 签名

> ID：10089478
> 
> 赞同：2
> 
> 时间：2012-04-10T13:12:15.757
> 
> 标签：outlook, applescript

我编写了一个脚本，它从 Active Directory 中获取信息并在 Microsoft Outlook for Mac 中创建一个新签名。

我使用以下代码来创建签名（我将省略其他代码，因为它并不真正相关）：

```
tell application "Microsoft Outlook"

    make new signature with properties {name:strName, content:contentHTML, plain text content:"", include in random:false}

end tell 
```

其中 strName 是我从其他地方获得的签名的名称，而 contentHTML 是我在其他地方构建的 HTML 中的实际签名。

将此签名添加到 Microsoft Outlook 工作正常，但我看不到如何将我创建的签名设置为当前帐户的默认签名。我做了很多根本没有帮助的研究，我也翻了翻字典。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T05:47:30.003

这可以通过 AppleScript 来完成。Outlook 2011 字典中没有专门执行此操作的内容，因此可以通过编写 UI 元素脚本来完成，这无疑是相当笨重的。

签名是基于每个帐户设置的，因此您需要向此脚本提供帐户名称以及要为该帐户设置的签名名称。

```
setDefaultSignature to "strName" for "Gmail"

on setDefaultSignature to mySignature for accountName
  tell application "Microsoft Outlook" to activate
  tell application "System Events"
    -- turn on UI automation - may throw a permissions dialog
    if UI elements enabled is false then set UI elements enabled to true

    click menu item "Preferences..." of menu 1 of menu bar item "Outlook" of menu bar 1 of application process "Outlook"
    click item 1 of (buttons of window "Outlook Preferences" of application process "Outlook" whose description is "Signatures")
    click button "Default Signatures..." of window "Signatures" of application process "Outlook"

    repeat with thisRow in rows of table 1 of scroll area 1 of sheet 1 of window "Signatures" of application process "Outlook"
      if value of text field of thisRow as string is accountName then
        click pop up button 1 of thisRow
        click menu item mySignature of menu 1 of pop up button 1 of thisRow
        click button "OK" of sheet 1 of window "Signatures" of application process "Outlook"
        click item 1 of (buttons of window "Signatures" of application process "Outlook" whose description is "close button")
        exit repeat
      end if
    end repeat
  end tell
end setDefaultSignature 
```

# ruby - 在 ruby 中从 STDIN 读取一行整数的有效方法是什么？

> ID：10089479
> 
> 赞同：1
> 
> 时间：2012-04-10T13:12:19.493
> 
> 标签：ruby

我努力了

```
STDIN.gets.chomp.split(" ") 
```

然后将数组中的每个元素转换为整数。

但我相信应该有更好的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T13:14:51.363

假设整数不能为负：

```
nums = gets.scan(/\d+/).map(&:to_i) 
```

或者对于任意输入：

```
nums = gets.strip.split(/\s+/).map(&:to_i) 
```

这里的关键是使用 using[`Array#map`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-map)为数组中的每个值调用一个块，为每个值创建一个新的结果数组。然后我们使用[`Symbol#to_proc`](http://www.ruby-doc.org/core-1.9.3/Symbol.html#method-i-to_proc)（由 Ruby 的 & 语法调用）简洁地调用`to_i`每个字符串的方法。

例如，`foo.map(&:to_i)`等价于`foo.map{ |o| o.to_i }`。

**编辑**：将数组映射到位会*稍微*快一些，如果您知道这是唯一的分隔符，并且只在一个空格上拆分，并且不使用 Symbol#to_proc：

```
nums = gets.chomp.split(' ').map!{ |o| o.to_i } 
```

但是，您在这里看到的只是非常微小的改进。你确定你需要这个更快吗？你的数据是什么，你的分析结果是什么表明这是你需要更快速度的关键地方？

# c# - 根据从 C# 编写的方式，两个相同的文件具有不同的文件大小

> ID：10089484
> 
> 赞同：3
> 
> 时间：2012-04-10T13:12:43.573
> 
> 标签：c#, json, serialization, file-io, encoding

我正在尝试将序列化为 JSON 格式的对象数组写入文件。我正在尝试以两种不同的方式编写它，如下所示。

```
ToSerialise[] Obj = new ToSerialise[10];
        for (int i = 0; i < 10; i++)
        {
            Obj[i] = new ToSerialise();
        }

        //First form of serialising
        UnicodeEncoding uniEncoding = new UnicodeEncoding();
        String SerialisedOutput;
        SerialisedOutput = JsonConvert.SerializeObject(Obj, Formatting.Indented);
        FileStream fs1 = new FileStream(@"C:\file1.log", FileMode.CreateNew);
        fs1.Write(uniEncoding.GetBytes(SerialisedOutput), 0, uniEncoding.GetByteCount(SerialisedOutput));
        fs1.Close();

        //Second form of serialising
        FileStream fs2 = new FileStream(@"C:\file2.log", FileMode.CreateNew);
        StreamWriter sw = new StreamWriter(fs2);
        JsonWriter jw = new JsonTextWriter(sw);
        JsonSerializer js = new JsonSerializer();
        jw.Formatting = Formatting.Indented;
        js.Serialize(jw, Obj);
        jw.Close();
        fs2.Close(); 
```

即使两个文件的内容相同，它们的文件大小也不同。实际上，第一个文件的大小正好是第二个文件的两倍。我尝试使用 textpad 比较输出，它说它们完全一样。为什么它们有不同的文件大小？

我在 Windows 7 32 位 .Net4 上运行它

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-10T13:15:13.850

> 即使两个文件的内容相同，它们的文件大小也不同。

如果它们的大小不同，那么它们*肯定*有不同的内容。一个文件（几乎）只是一个字节序列——如果两个序列有不同的长度，它们就是不同的序列。

在这种情况下，这两个文件都表示相同的*文本*，但使用不同的编码 -`file2`将使用 UTF-8，`file1`并将使用 UTF-16。

换一种方式来考虑：如果您将同一张图片保存到两个文件中，一个为 JPEG，一个为 PNG，您是否希望文件大小相同？

# objective-c - 将 mmap 数据与对象一起使用

> ID：10089486
> 
> 赞同：1
> 
> 时间：2012-04-10T13:12:52.847
> 
> 标签：objective-c, ios, mmap

如何将映射数据与对象一起使用？

例如一个 UIImage。

如果我知道偏移量和字节数，并且可以检索它，那么它如何与对象一起使用？

我对如何将数据传递给对象有点困惑，对象如何只使用确切的字节数？

我目前逐字节获取 mmapped 数据并将其写入文件，这会创建一个图像，但我不确定如何使用对象执行此操作。

显然不需要分配对象，因为数据是可用的，但是它是如何在内部传递给对象并由对象管理的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:29:41.200

实际上，分配 Cocoa 对象的唯一方法是使用`+alloc`. 我不认为您可以实际使用 mmapped 内存来持久化对象。

但是，您可以使用它来检索 UIImage 的图像数据。

```
NSData* theData = [NSData dataWithBytesNoCopy: pointerToMMappedData 
                                       length: dataLength  
                                 freeWhenDone: NO];
UIImage* anImage = [UIImage imageWithData: theData]; 
```

# c# - c# .net，加载图片

> ID：10089487
> 
> 赞同：1
> 
> 时间：2012-04-10T13:12:53.497
> 
> 标签：c#, image-processing, .net

我必须结合让我们说大约 100 个图像（png 文件）。问题不在于将它们结合起来，它运行得足够快。但从存储中加载它们最多需要 4 秒。那是太多的时间了。

所以我可以使用 TPL 或多线程，但它仍然太慢。我怎样才能加快速度？不幸的是，将所有图像保存在主存储中不是一种选择。

图像非常小：从 4KByte 到 10KByte

我正在以这种方式加载图像：

```
Image img = Image.FromFile(file); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:22:25.683

在您的情况下，创建多个线程不会提高 I/O 速度。那是关于你的硬盘的读写速度。

在 4 秒内加载 100 张高质量图像似乎很正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:47:02.480

两个想法：

*   如果大部分延迟确实来自 IO，请压缩文件。根据它们的内容，即使是简单的 ZIP 压缩也可以减小它们的大小，从而减少读取的字节数。工作将是在内存中解压缩它们。我不知道这是否适用于你的情况

*   懒加载它们。您是否需要一直加载所有 100 张图像？也许您可以先加载第一个或最重要的那些，让软件在后台完成其余图像的加载时完成其他工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:24:08.750

你如何加载你的图像文件？请分享您的一段代码。我的猜测是，您不是一次读取整个文件，而是逐字节读取直到 EOF... 优化文件加载的一种方法是将整个文件加载到预分配的内存缓冲区中。

# javascript - 使用javascript从列表中获取项目的值

> ID：10089490
> 
> 赞同：1
> 
> 时间：2012-04-10T13:13:21.700
> 
> 标签：javascript

我有这个代码：

```
<script>
  function getgroup(){

        var i=0;
        var total=document.getElementById("selectedOptions").length;

    while (i<total)
  {
    var group=document.getElementById("selectedOptions").value;
    var group2=group.substring(2);

    alert(group2);
     i++;
}
}
</Script> 
```

我想在列表中循环并获取列表中每个项目的值。通过使用此代码，我仅获得第一项的值。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:16:32.973

我认为您正在使用`getElementById()`方法，并且按照规范，元素的 id 应该是唯一的，因此长度始终为一。尝试添加一个类并使用`getElementsByClass()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:20:33.603

您正在将 select 元素的值分配给 group 变量。您需要遍历选项：

```
group = document.getElementById("selectedOptions").options[i].value; 
```

# c# - 实体框架、抽象类、通用存储库和通用管理器

> ID：10089491
> 
> 赞同：1
> 
> 时间：2012-04-10T13:13:23.897
> 
> 标签：c#, generics, entity-framework-4, abstract-class

在一个项目中，我们使用通用存储库和通用管理器，因此我们不需要在每个存储库/管理器中重写每个更新/删除等方法。

以下是它们的外观：

```
public interface IBaseRep<T> : IDisposable where T : class, PrivateObject
{
    DbSet<T> DatabaseSet { get; set; }
    DbContext Dal { get; set; }

    T Find(int? id);
    T Find(Expression<Func<T, bool>> predicate);
    ICollection<T> Select(Expression<Func<T, bool>> predicate = null,
        Expression<Func<T, string>> orderBy = null,
        string includeProperties = "");
    T Create(T obj);
    T Update(T obj);
    bool Delete(T obj);
    bool Delete(int id);
    bool Delete(Expression<Func<T, bool>> predicate);
    IQueryable<T> SelectAsQuery(
        Expression<Func<T, bool>> predicate = null, 
        Expression<Func<T, string>> orderBy = null, 
        string includeProperties = "");
}

public class BaseRep<T> : IBaseRep<T> where T : class, PrivateObject
{
    public DbSet<T> DatabaseSet { get; set; }
    public DbContext Dal { get; set; }

    public EORTCBaseRep(DbContext dal)
    {
        this.Dal = dal;
        this.DatabaseSet = Dal.Set<T>();
    }

    public virtual T Find(int? id)
    {
        return this.DatabaseSet.Find(id);
    }

    public virtual T Find(Expression<Func<T, bool>> predicate)
    {
        return Select(predicate).FirstOrDefault();
    }

    public virtual ICollection<T> Select(
        Expression<Func<T, bool>> predicate = null,
        Expression<Func<T, string>> orderBy = null,
        string includeProperties = "")
    {
        return SelectAsQuery(predicate, orderBy, includeProperties).ToList();
    }

    public virtual IQueryable<T> SelectAsQuery(
       Expression<Func<T, bool>> predicate = null,
       Expression<Func<T, string>> orderBy = null,
       string includeProperties = "")
    {
        IQueryable<T> query = this.DatabaseSet;

        if (predicate != null)
            query = query.Where(predicate);

        foreach (var includeProperty in includeProperties.Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries))
            query = query.Include(includeProperty);

        if (orderBy != null)
            query = query.OrderBy(orderBy);

        return query;
    }

    public virtual T Create(T obj)
    {
        this.Dal.Entry<T>(obj).State = EntityState.Added;
        this.Dal.SaveChanges();
        return obj;
    }

    public virtual T Update(T obj)
    {
        this.Dal.Entry<T>(obj).State = EntityState.Modified;
        this.Dal.SaveChanges();
        return obj;
    }

    public virtual bool Delete(T obj)
    {
        if (obj is ILogicallyDeletable)
        {
            this.Dal.Entry<T>(obj).State = EntityState.Modified;
            (obj as ILogicallyDeletable).IsDeleted = true;
        }
        else
        {
            this.Dal.Entry<T>(obj).State = EntityState.Deleted;
        }
        return this.Dal.SaveChanges() == 1;
    }

    public virtual bool Delete(int id)
    {
        T obj = Find(id);
        return Delete(obj);
    }

    public virtual bool Delete(Expression<Func<T, bool>> predicate)
    {
        foreach (T item in Select(predicate))
        {
            Delete(item);
        }
        return this.Dal.SaveChanges() == 1;
    }

    public virtual void Dispose()
    {
        this.Dal.Dispose();
    }
} 
```

我们的经理看起来像这样：

```
public interface IBaseManager<T> : IDisposable where T : class, PrivateObject
{
    T Find(int? id);
    T Find(Expression<Func<T, bool>> predicate);
    ICollection<T> Select(Expression<Func<T, bool>> predicate = null,
        Expression<Func<T, string>> orderBy = null,
        string includeProperties = "");
    T Create(T obj);
    T Update(T obj);
    bool Delete(T obj);
    bool Delete(int id);
    bool Delete(Expression<Func<T, bool>> predicate);
    IQueryable<T> SelectAsQuery(
        Expression<Func<T, bool>> predicate = null,
        Expression<Func<T, string>> orderBy = null,
        string includeProperties = "");
}

public class BaseManager<T> : IBaseManager<T> where T : class, PrivateObject
{
    protected IBaseRep<T> Repository;

    public virtual T Find(int? id)
    {
        return this.Repository.Find(id);
    }

    public virtual T Find(Expression<Func<T, bool>> predicate)
    {
        return this.Repository.Find(predicate);
    }

    public virtual ICollection<T> Select(
        Expression<Func<T, bool>> predicate = null,
        Expression<Func<T, string>> orderBy = null,
        string includeProperties = "")
    {
        return this.Repository.Select(predicate, orderBy, includeProperties);
    }

    public virtual IQueryable<T> SelectAsQuery(
        Expression<Func<T, bool>> predicate = null,
        Expression<Func<T, string>> orderBy = null,
        string includeProperties = "")
    {
        return this.Repository.SelectAsQuery(predicate, orderBy, includeProperties);
    }

    public virtual T Create(T obj)
    {
        return this.Repository.Create(obj);
    }

    public virtual T Update(T obj)
    {
        return this.Repository.Update(obj);
    }

    public virtual bool Delete(T obj)
    {
        return this.Repository.Delete(obj);
    }

    public virtual bool Delete(int id)
    {
        return this.Repository.Delete(id);
    }

    public virtual bool Delete(Expression<Func<T, bool>> predicate)
    {
        return this.Repository.Delete(predicate);
    }

    public virtual void Dispose()
    {
        if (this.Repository != null)
            this.Repository.Dispose();
    }
} 
```

这很好用。

但是，我们现在需要为多个实体类型使用相同的数据库表：

```
public abstract class AbstractSite : PrivateObject, IActivable, ILogicallyDeletable
{
    public int Id { get; set; }
}

public class EthicCommittee : AbstractSite
{
    public int Number { get; set; }
}

public class Site : AbstractSite
{
    public string Name { get; set; }
} 
```

这就是我们使用通用管理器的方式：

```
public class AbstractSiteManager : BaseManager<AbstractSite>
{
    public AbstractSiteManager (PrismaDAL prismaDAL = null)
    {
        this.Repository = new AbstractSiteRep(prismaDAL);
    }
} 
```

以及我们如何使用通用存储库：

```
public class AbstractSiteRep : PrismaBaseRep<AbstractSite>
{
    public AbstractSiteRep (PrismaDAL prismaDAL = null)
        : base(prismaDAL)
    {}
}

public class PrismaBaseRep<T> : BaseRep<T> where T : class, PrivateObject
{
    public PrismaBaseRep(PrismaDAL prismaDAL = null) : base((prismaDAL == null) ? new PrismaDAL() : prismaDAL)
    { }
} 
```

但是现在，我们想使用具体类型而不是抽象类型（AbstractSite = abstract；Site = 具体，RecruitingInstitution = 具体...），而不涉及通用存储库/管理器。所以我们会有 X 通用存储库（其中 X ：具体类型的数量）。它们都指向同一个数据库表。这将允许我们避免强制转换，并允许我们限制使用一个管理器/存储库可以操作的类型。

伙计们，你们知道我怎么能做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:00:09.717

**解决了** 我的错误。

正如@Mike C所说，这很好用。

我只是不知道如果我引用的是具体对象类型而不是抽象对象类型（在 TPH 中），EF 能够找到正确的表。

# css - Font-face 导入字体让特殊字符看起来很难看

> ID：10089494
> 
> 赞同：2
> 
> 时间：2012-04-10T13:13:39.267
> 
> 标签：css, special-characters, font-face

我目前正在构建一个使用自定义字体的网站。该字体不可用@google webfonts，所以我不得不下载字体并通过@fontface加载它。

我使用了我下载字体的网站的示例中的标记。链接到字体 - [http://www.fontsquirrel.com/fonts/Colaborate](http://www.fontsquirrel.com/fonts/Colaborate)

这是css标记

```
@font-face {
font-family: 'ColaborateRegular';
src: url('ColabReg-webfont.eot');
src: url('ColabReg-webfont.eot?#iefix') format('embedded-opentype'),
     url('ColabReg-webfont.woff') format('woff'),
     url('ColabReg-webfont.ttf') format('truetype'),
     url('ColabReg-webfont.svg#ColaborateRegular') format('svg');
font-weight: normal;
font-style: normal;

} 
```

该字体在网页上工作正常，但要解决问题。我需要使用瑞典语特殊字符 Å Ä Ö - 它们在网页上变得非常奇怪。

这是一张图片 [http://oi44.tinypic.com/2r4tmo0.jpg](http://oi44.tinypic.com/2r4tmo0.jpg)

可能是什么问题？在我从设计师那里收到的 Photoshop 中，它们的字体看起来都很好。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:23:43.980

特殊字符不是 Colaborate 字体的字符，它们来自我想的后备字体。

您需要确保 fontsquirrel 的包中包含这些特殊字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:22:54.213

我看到您的字体集不包含那些特殊字符，为此浏览器使用您的默认字体系列。你应该选择一个支持它们的集合。

# sql-server - microsoft sql server 2012 express edition - 并发插入限制

> ID：10089499
> 
> 赞同：3
> 
> 时间：2012-04-10T13:14:16.533
> 
> 标签：sql-server, sql-server-2012-express

使用 Microsoft Sql Server 2012 express edition 时，并发插入的数量是否有限制？我知道这是对可以使用的 cpu 数量的限制，1GB 的 Ram 限制和 10GB 的磁盘空间限制（[更多here](http://msdn.microsoft.com/en-us/library/cc645993%28v=SQL.110%29.aspx)），但我想知道并发性是否有任何限制。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T13:18:57.743

不，它归结为您可以根据其他限制/硬件从中挤出什么。没有“速率限制”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T13:37:32.423

SQL Server MSDE 中存在一些性能限制，但在 SQL Server 2005 Express 中已删除。

来自[SQL Server 2005 Express Edition 概述](http://technet.microsoft.com/en-us/library/ms345154%28v=sql.90%29.aspx)

> 没有工作负载限制，引擎的性能与其他版本一样。

我没有听说或看到它在以后的版本中再次添加。

# actionscript-3 - Vector 中的垃圾收集引用变量

> ID：10089501
> 
> 赞同：1
> 
> 时间：2012-04-10T13:14:33.830
> 
> 标签：actionscript-3, actionscript

我正在 AS3 应用程序中实现垃圾收集。一方面，在一个循环中创建了几个显示对象，如下所示：

```
for(var i:uint = 0; i <= this._exampleVector.length - 1; i++) 
{
   this._customText = new CustomTextObject(this._exampleVector[i].playlistText),  this._customTextWidth);
   this.addChild(this._customText);

  etc etc

  this._customTextVector.push(this._customText); // used for ref in garbage collection
} 
```

然后我通过循环 _customTextVector 变量来执行我的垃圾收集准备。

```
for(var i:uint = 0; i <= this._customTextVector.length - 1; i++) 
{
  this.removeChild(this._customTextVector[i]);
  this._customTextVector[i].gcAllObjects();
  **this._customTextVector[i] = null;**
} 
```

当我尝试使 _customTextVector 中的 _customText 为空时，这不起作用。它只会使 Vector 内的索引为空。关于如何执行此操作或其他方法进行垃圾收集的任何想法？

谢谢

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:29:48.807

为了使 AS3 垃圾收集器对您的对象进行 GC，您需要删除对它们的所有引用（包括事件侦听器）。在下一次 GC 传递时，对象的内存将被释放。没有办法像你想要的那样直接、立即“清空”一个对象。

如果您遇到内存问题，请查看[此帖子](http://tomgabob.blogspot.com/2009/11/as3-memory-management.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:18:49.610

循环遍历所有索引后是否可以执行以下操作

```
 _customTextVector =null; 
```

# bash - 需要在 shell 脚本循环中使用 ssh 的帮助

> ID：10089504
> 
> 赞同：0
> 
> 时间：2012-04-10T13:14:47.580
> 
> 标签：bash

我需要有关如何在 shell 脚本的 while 循环中通过 ssh 命令连接远程系统的帮助。我能够使用 shell 脚本中的 ssh 连接一个远程系统。请找到下面给出的示例代码片段......

```
ssh "root@148.147.179.100" ARG1=$rpmFileName 'bash -s' <<'ENDSSH'        
  echo ">>Checksum ..."
  md5sum /root/$ARG1
ENDSSH 
```

当尝试在循环中运行同一段代码时，出现错误“语法错误：文件意外结束”，我无法解决。

但是，当将同一段代码放在另一个脚本文件中并在另一个脚本的 while 循环中使用该文件时，它正在工作。

任何人都可以帮我解决一些问题。

* * *

请找到下面给出的完整代码...

```
#!/bin/sh
rpmFileName=""
file="serverIps.txt"
dir="/home/rtulluri/downloads/EVAT-1123/AxisTar";
numberOfIps=0
axisTarfileTarget='/var'
#This function checks whether given ip is valid  or not
#returns 0 for valid ip, 1 for invalid ip
function valid_ip()
{
    local  ip=$1
    local  stat=1
    if [[ $ip =~ ^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$ ]]
    then
        OIFS=$IFS
        IFS='.'
        ip=($ip)
        IFS=$OIFS
        [[ ${ip[0]} -le 255 && ${ip[1]} -le 255 \
            && ${ip[2]} -le 255 && ${ip[3]} -le 255 ]]
        stat=$?
    fi
    #echo "stat = $stat"
    return $stat
}
#Check whether given file exists or not
if [ -s $file ]
then
 echo "$file exists"
else
  echo "$file doesn't exist"
  echo "exiting ........"
  exit
fi
IFS=,
echo "---------------"
while read sysType serverIp uid pwd
do

  sysType="${sysType#"${sysType%%[![:space:]]*}"}"   # remove leading whitespace characters
  sysType="${sysType%"${sysType##*[![:space:]]}"}"   # remove trailing whitespace characters
  serverIp="${serverIp#"${serverIp%%[![:space:]]*}"}"   # remove leading whitespace characters
  serverIp="${serverIp%"${serverIp##*[![:space:]]}"}"   # remove trailing whitespace characters

  uid="${uid#"${uid%%[![:space:]]*}"}"   # remove leading whitespace characters
  uid="${uid%"${uid##*[![:space:]]}"}"   # remove trailing whitespace characters

  pwd="${pwd#"${pwd%%[![:space:]]*}"}"   # remove leading whitespace characters
  pwd="${pwd%"${pwd##*[![:space:]]}"}"   # remove trailing whitespace characters

  if [ -n "$serverIp" ]
  then
     valid_ip $serverIp
     #Assign the return value to a variable
     isValidIp=$?
   else
      isValidIp=1
  fi

  if [ $isValidIp -eq "0" ]
    then
       numberOfIps=$(( $numberOfIps + 1 ))
       echo "$numberOfIps) $serverIp --> is valid"     

       if [ "$sysType" = "ebox" ]
       then
               echo "$serverIp is an eBox device.."
           echo "About to pass $serverIp as argument to connct.sh"
           #./connct.sh $serverIp
           ssh "$address" ARG1=$rpmFileName 'bash -s' <<'ENDSSH'
        echo ">>Checksum ..."
           ENDSSH
        fi
    else
       echo "$serverIp --> is invalid"
    fi    
    echo ""
done < $file 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:54:00.200

您可以尝试使用 '-n' ssh 开关

例如：

```
for i in {1..7}
do
    ssh -n myhost$i mycommand
done 
```

# python - 将数据保存到文本文件中

> ID：10089508
> 
> 赞同：0
> 
> 时间：2012-04-10T13:14:58.930
> 
> 标签：python

```
def ConvertFile():
  FileNameIn = 'Hexdata.dat'
  HexFile = open(FileNameIn, 'r')
  for Line in HexFile:
    print (Line)
    print (Binary(Line))
  HexFile.close() 
```

到目前为止，我有它，当程序运行时，它将文件中的十六进制数转换为二进制数。这是在一个名为 Hexdata.dat 的文件中

然后我想做的是将二进制输出保存到一个名为 Binarydata.dat 的文件中

我将如何在代码中解决这个问题？请注意，我是 Python 新手，并没有正确介绍这一点。我尝试了不同的代码，但它们都没有成功，实际上，它们都是猜测。

我不是要您为我解决问题，而是要问我如何将程序的输出保存到新的文本文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:20:38.187

你已经走了大部分路了。您已经知道如何打开文件进行阅读：

```
HexFile = open(FileNameIn, 'r') 
```

那里的`'r'`意思是“开放阅读”。如果您查看[function的](http://docs.python.org/library/functions.html#open)[文档`open`](http://docs.python.org/library/functions.html#open)，您会看到将 a 替换为`r`a`w`将打开一个文件进行写入：

```
OutputFile = open(FileNameOut, 'w') 
```

然后你可以像这样向它发送输出：

```
print >>OutputFile, "Something to print" 
```

或者使用`write`文件对象上的方法：

```
OutputFile.write("Something to print\n") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:19:25.640

您当前正在以读取模式打开文件，因此为了写入文件，您需要以`('w')`. 引用自：[http](http://docs.python.org) ://docs.python.org 。您可以通过将您的替换`'r'`为`'w'`.

```
'w' for writing (truncating the file if it already exists 
```

如需更多参考，请参阅[`open(name[, mode[, buffering]])`](http://docs.python.org/library/functions.html#open)

```
# the file name
FileNameIn = 'Hexdata.dat'

# create a file object: open it with "write" mode
HexFile = open(FileNameIn,"w")

for line in HexFile:
    HexFile.write(Binary(line))

HexFile.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:20:34.047

您是否尝试过使用 open('Binarydata.dat', 'w') 写入文件？有很多方法可以写入文件，其中大部分可以在这里找到：http: [//docs.python.org/tutorial/inputoutput.html](http://docs.python.org/tutorial/inputoutput.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T13:21:33.373

阅读[open 函数](http://docs.python.org/library/functions.html#open)（以写入模式打开文件）和[File Objects](http://docs.python.org/library/stdtypes.html#bltin-file-objects)（将信息写入打开的文件）的文档。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T13:25:35.237

您必须在此脚本中有 2 个文件。你正在阅读的那个和你正在写的那个。[在打开](http://docs.python.org/library/functions.html#open)要写入的文件时使用选项`wb`（写入二进制文件） 。这两个链接应该可以帮助没有或没有 Python 知识的初学者完成您的练习：[文件对象简介](http://docs.python.org/release/2.5.2/lib/bltin-file-objects.html)和[文件 I/O 教程](http://www.penzilla.net/tutorials/python/fileio/)。

# html - 如何使一个 div 与其他 div 重叠？

> ID：10089514
> 
> 赞同：5
> 
> 时间：2012-04-10T13:15:30.353
> 
> 标签：html, css

搜索栏下方的内容是在用户输入一些文本后显示的。目前，风格取决于我的目标。

但是，当我显示搜索结果时，它会将容器推到搜索栏之后，如图所示：

![在此处输入图像描述](../Images/04cac9d494005d92a207eee357520b03.png)

我该怎么做才能显示搜索结果并重叠其下方的所有内容*而不*向下推动其他元素？

这是我的 HTML：

```
<div id="search-bar" class="box">
    <h1 class="horizontal-header">SEARCH THE DATABASE</h1>
    <div id="search-wrapper">
        <input name="query" id="name" class="big-search" placeholder="champion, item, spells..." />
        <div id="search-results">
            <a href="#">
                <div class="item">
                    <img src="http://images4.wikia.nocookie.net/__cb20091218194710/leagueoflegends/images/0/0f/JaxSquare.png" alt="" />
                    <div class="info">
                        <p class="name">Jax</p>
                        <p class="description">Champion</p>
                    </div>
                </div>
            </a>
            <a href="#">
                <div class="item">
                    <img src="http://images4.wikia.nocookie.net/__cb20091218194710/leagueoflegends/images/0/0f/JaxSquare.png" alt="" />
                    <div class="info">
                        <p class="name">Jax</p>
                        <p class="description">Champion</p>
                    </div>
                </div>
            </a>
            <a href="#">
                <div class="item">
                    <img src="http://images4.wikia.nocookie.net/__cb20091218194710/leagueoflegends/images/0/0f/JaxSquare.png" alt="" />
                    <div class="info">
                        <p class="name">Jax</p>
                        <p class="description">Champion</p>
                    </div>
                </div>
            </a>
        </div>
    </div>
</div> 
```

还有我的 CSS（**用 LESS 编写**）：

```
 #search-bar {
        width: 636px;
        height: 35px;

        #search-wrapper {
            float:left;
            margin-left: 13px;

            #search-results {
                z-index:999;
                position:relative;

                a {
                    display:block;

                    .item:hover {
                        background-color:#282828;
                    }

                    .item {
                        overflow: hidden;
                        background-color: #171717;
                        padding: 2px;
                        cursor:pointer;
                        margin-bottom:1px;

                        img {
                            float: left;
                            width: 35px;
                        }

                        .info {
                            float: left;
                            margin-left: 8px;

                            .name {
                                color: white;
                                margin: 0;
                            }

                            .description {
                                color: white;
                                margin: 0;
                            }
                        }
                    }
                }                   
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T13:18:16.023

使用 CSS 的[绝对定位](http://www.w3schools.com/cssref/pr_class_position.asp)。与相对定位不同，绝对定位从文档流中删除项目（即防止它向下推其他事物。）

请记住，绝对定位的东西是相对于它最近的定位父定位的 - 所以无论绝对定位的项目所在的容器（在你的情况下）都应该设置为`position:relative;`

各种定位信息： [http ://www.w3schools.com/css/css_positioning.asp](http://www.w3schools.com/css/css_positioning.asp)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-10T13:18:37.723

给`position:absolute`你的`.item`DIV。像这样写：

```
 .item {
 position:absolute;
} 
```

# sql-server-2005 - 如何使用 SSIS 和 SQL Server 2005 从 csv 文件中删除标题行

> ID：10089516
> 
> 赞同：1
> 
> 时间：2012-04-10T13:15:34.593
> 
> 标签：sql-server-2005, ssis

我有一个用 Visual Studio 2008 编写的 SSIS 包，它运行一些存储过程并将结果放在文件中。然后将这些文件发送给供应商。所有文件都是使用标题行创建的。这些文件之一不应与标题行一起发送。

我不确定如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T18:08:58.873

是的，诀窍是不要在平面文件连接管理器编辑器中检查“第一个数据行中的列名”

![在此处输入图像描述](../Images/b40c63c7943b1d780c772ba3d66e8f47.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T15:34:40.793

我在测试答案时正在写我的问题。我决定，因为我没有在 StackOverflow 上看到这个问题，所以无论如何我都会问它，然后用我发现的内容回答它。

以下是我采取的步骤：

*   我从基本文件中删除了标题行。
*   在平面文件连接编辑器中，我取消选中第一个数据行框中的列名。
*   我预览了文件，看起来不错。
*   在平面文件目标编辑器中，我重新映射了列。
*   我重新运行了包，创建的 csv 文件没有标题行。

# vb.net - 检查 URL 并踢出站点恶意请求

> ID：10089524
> 
> 赞同：0
> 
> 时间：2012-04-10T13:15:50.350
> 
> 标签：vb.net

我有一个使用 vb.net 2.0 开发的网站。它的 URL 类似于[http://dgmseoc.com](http://dgmseoc.com)。我想避免使用其他 URL 的任何恶意请求。我尝试使用下面的代码来实现，并希望在页面加载时将此类请求踢出站点。我怎样才能做到这一点？请提供任何帮助 - 在此先感谢您：

```
If (urlParams.Contains("http") And 
    Not urlParams.Contains(Request.ServerVariables("HTTP_HOST").ToString)) Then
            ‘Would like to kick out of the site here.
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:27:51.173

如果您希望您的网站仅响应使用`dgmseoc.com`主机名的请求，那么您不应该在您的应用程序中实现它。

相反，您应该在您的网络服务器中实现它。请查阅 IIS 文档以获取有关如何侦听特定主机头名称来执行此操作的详细信息，例如[IIS 5](http://support.microsoft.com/kb/308163)、[IIS 6.0](http://www.microsoft.com/technet/prodtechnol/windowsserver2003/library/iis/883a9544-3f70-4d46-a6df-bbadbd1fe7de.mspx)

# json - java.util.Date 解组表单 grails json 请求

> ID：10089526
> 
> 赞同：0
> 
> 时间：2012-04-10T13:15:59.453
> 
> 标签：json, grails, unmarshalling

我在 grails 控制器中尝试从 JSON 解组 java.util.Date 时遇到以下错误。

> org.codehaus.groovy.runtime.typehandling.GroovyCastException：无法将带有“java.lang.String”类的对象“2011-10-07 10:24:40”转换为“java.util.Date”类**

另外，我尝试了以下方法但仍然没有运气，实际上我怀疑我是否以正确的方式实现了以下，因为当我将 println 语句放入以下方法时：

```
public CustomDateBinder(List formats) 
```

控制台上没有打印任何内容。

[Grails 日期解组](https://stackoverflow.com/questions/963922/grails-date-unmarshalling)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:32:42.637

根据您尝试将字符串转换为日期的错误消息的描述，如果您想手动执行此操作，您可以在控制器中使用以下方法（自 Grails 2 起）

```
 def val = params.date('myDate', 'dd-MM-yyyy') //Obviously you need to change the format 
```

查看以下帖子了解更多信息： http: [//mrhaki.blogspot.com/2012/01/grails-goodness-date-request-parameter.html](http://mrhaki.blogspot.com/2012/01/grails-goodness-date-request-parameter.html)

# string - 将可变长度字符串连接为表格

> ID：10089527
> 
> 赞同：0
> 
> 时间：2012-04-10T13:16:02.880
> 
> 标签：string, lua, concatenation, ptokax

我从 SQL 中获取数据数组，然后将它们连接为字符串以进行显示。该函数如下所示：

```
function FetchTopStats( Conn, iLimit )
  local sToReturn = "\tS.No. \t UserName \t Score\n\t"
  SQLQuery = assert( Conn:execute( string.format( [[SELECT username, totalcount FROM chatstat ORDER BY totalcount DESC LIMIT %d]], iLimit ) ) )
  DataArray = SQLQuery:fetch ({}, "a")
  i = 1
  while DataArray do
    sToReturn = sToReturn..tostring( i ).."\t"..DataArray.username.." \t "..DataArray.totalcount.."\n\t"
    DataArray = SQLQuery:fetch ({}, "a")
    i = i + 1
  end
  return sToReturn
end 
```

这给了我这样的输出：

```
 S.No.    UserName    Score
    1   aim      6641
    2   time     5021
    3   Shepard      4977 
```

等等。我正在考虑使用一个`string.format`函数，显示如下：

```
 S.No.    UserName    Score
    1       aim          6641
    2       time         5021
    3       Shepard      4977 
```

但是，我完全不知道如何拥有这个。我想到的唯一选择是检查用户名的字符串长度，然后`\t`相应地应用。那，我想在最后使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:34:56.340

好吧，您需要找出用户名的最大长度，从而使算法通过 2 次，或者将其限制为任意（但合理）的大小并无条件地切断太长字符串的尾部。获得列宽后，您可以使用左对齐或右对齐格式字符串：

```
> print(string.format("|%-10d|%-20s|%10d|", 1, "Shepard", 9000))
|1         |Shepard             |      9000| 
```

此外，对于大型表，考虑使用`table.concat`它来构建最终输出：它比重复附加字符串要快得多（请参阅[PIL 的第 11.6 章](http://www.lua.org/pil/11.6.html)进行解释）。

# sql-server-2008 - 在并非所有列上合并复制

> ID：10089533
> 
> 赞同：1
> 
> 时间：2012-04-10T13:16:24.287
> 
> 标签：sql-server-2008, merge-replication

我想在两个具有不同值的特殊列的表之间配置合并复制。这意味着复制不应该同步特殊列。我配置了这个复制（推送模式），但是当我配置了特殊订阅时。相关表已更改并且未发布的列已从订阅者的表中删除？我的问题有什么解决方案？

# javascript - 在 jqGrid 中切换单元格只读/可编辑

> ID：10089538
> 
> 赞同：0
> 
> 时间：2012-04-10T13:16:47.593
> 
> 标签：javascript, jquery, jqgrid

我有我想根据某些条件将单元格切换为只读/可编辑的情况。它几乎可以工作，我可以将其设为只读，但不能再次编辑。

```
grid.setColProp("a", {
    editoptions: {
        value: data.opPadrag,
        dataEvents: [{
            type: 'change',
            fn: function (e) {
                var selr = grid.jqGrid('getGridParam', 'selrow');
                if (someCondition) grid.jqGrid('setCell', selr, 'c', '', 'not-editable-cell');
                else
                // Problem here - how to make it editable. I've tried a few ways, none worked
                // grid.jqGrid('setCell', selr, 'c', '', 'editable-cell');
                // grid.jqGrid('setCell', selr, 'c', '', 'editable');
                // grid.jqGrid('setCell', selr, 'c', '', '');
            }
        }]
    }
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:32:39.637

没有用于从单元格中删除类的内置函数，您可以像这样手动执行此操作：

```
grid.setColProp('a', { editoptions: { value: data.opPadrag, dataEvents: [{ type: 'change', fn: function (e) {
    var selr = grid.jqGrid('getGridParam', 'selrow');
    if (someCondition) {
        grid.jqGrid('setCell', selr, 'c', '', 'not-editable-cell');
    } else {
        var colModel = grid.jqGrid('getGridParam', 'colModel');
        for (var iCol = 0; iCol < colModel.length; iCol++) {
            if (colModel[iCol].name === 'c') {
                var row = grid[0].rows.namedItem(selr);
                var cell = row.cells[iCol];
                $(cell).removeClass('not-editable-cell');
                break;             
            }
        }
    }
} }] } }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:44:23.227

您可以更高效地执行此操作。

使用 jquery 一行代码：

```
 $("#<GridId> tr[id='<RowId>'] td[aria-describedby='<GridId>_<ColumnName>']").removeClass('not-editable-cell'); 
```

例子 ：

```
$("#maingrid tr[id='1'] td[aria-describedby='maingrid_column1']").removeClass('not-editable-cell'); 
```

谢谢，

加夫里尔

# delphi - Delphi 7：在多个显示器上居中位置

> ID：10089541
> 
> 赞同：2
> 
> 时间：2012-04-10T13:16:51.353
> 
> 标签：delphi, delphi-7

我有一个 TForm，我将“位置”设置为 poMainFormCenter。

当我打开该表单时，它会正确显示在主表单的中心。

但是，在多个屏幕（2 个监视器）上，当我将应用程序放在辅助监视器中时，该窗体不会显示在主窗体的中心。

它仍显示在主监视器中，位于屏幕边缘。

我的应用程序没有什么花哨的，我只设置了 Position 属性。

有人知道怎么修这个东西吗？

我正在使用 Delphi 7 和 Windows XP SP3。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T17:31:19.457

除了看鼠标之外，Jlouro 的想法是正确的。Screen.Monitors[] 包含每个屏幕的信息。

我有一个标准程序，它通过监视器列表并找出左上角的位置来决定将它放在哪个监视器上。虽然我的代码没有居中（我只是在确保窗口完全位于它出现的任何监视器之后），但想法保持不变。请注意，您必须考虑窗口不显示在*任何*监视器上的情况——我通过将其扔到第一个监视器来处理这种情况。（当保存的位置在一个不再存在的监视器上时，就会发生这种情况——要么被删除，要么在另一台机器上运行。）

自从我搞砸这个已经很长时间了，它并没有给我带来任何麻烦，所以我没有在比 XP/Delphi 7 更新的任何东西上测试它。

请注意，这只是为了确保表单是可见的并且完全在一台显示器上，不会尝试将其居中。

```
Function        PointInBox(x, y, x1, y1, x2, y2 : Integer) : Boolean;

Begin
    Result := (X >= X1) And (X <= X2) And (Y >= Y1) And (Y <= Y2);
End;

Function        Overlapping(x11, y11, x12, y12, x21, y21, x22, y22 : Integer) : Boolean;

Var
    tx1, ty1, tx2, ty2      : Integer;

Begin
    Tx1 := Max(x11, x21);
    Tx2 := Min(x12, x22);
    Ty1 := Max(y11, y21);
    Ty2 := Min(y12, y22);
    Result := (Tx1 < Tx2) And (Ty1 < Ty2);
End;

Function        GetWhere(Form : TForm) : Integer;

Var
    Loop        : Integer;
    Where       : Integer;

Begin
    Where           := -1;
    For Loop := 1 to Screen.MonitorCount do
        With Screen.Monitors[Loop - 1] do
            If PointInBox(Form.Left, Form.Top, Left, Top, Left + Width - 1, Top + Height - 1) then
                Where := Loop - 1;
    If Where = -1 then // Top left corner is wild, check for anything
        For Loop := 1 to Screen.MonitorCount do
            With Screen.Monitors[Loop - 1] do
                If Overlapping(Form.Left, Form.Top, Form.Left + Form.Width - 1, Form.Top + Form.Height - 1, Left, Top, Left + Width - 1, Top + Height - 1) then
                    Where := Loop - 1;
    Result := Where;
End;

Procedure   GetLimits(Where : Integer; var X, Y, WWidth, WHeight : Integer);

Var
    R               : TRect;

Begin
    If Where < 0 then
        Begin
            SystemParametersInfo(Spi_GetWorkArea, 0, @R, 0);
            X           := R.Left;
            Y           := R.Top;
            WWidth  := R.Right - R.Left + 1;
            WHeight := R.Bottom - R.Top + 1;
        End
    Else With Screen.Monitors[Where] do
        Begin
            X           := Left;
            Y           := Top;
            WWidth  := Width;
            WHeight := Height;
        End;
End;

Procedure   EnsureValidDisplay(Form : TForm);

Var
    Left            : Integer;
    Top         : Integer;
    Width           : Integer;
    Height      : Integer;
    Where           : WindowPlacement;

Begin
    GetLimits(GetWhere(Form), Left, Top, Width, Height);
    Where.Length    := SizeOf(Where);
    Where.Flags     := 0;
    GetWindowPlacement(Form.Handle, @Where);
    If Form.Left < Left then
        Where.rcNormalPosition.Left := Left
    Else If Form.Left + Form.Width > Left + Width then
        Where.rcNormalPosition.Left := Left + Width - Form.Width;
    If Form.Top < Top then
        Where.rcNormalPosition.Top      := Top
    Else If Form.Top + Form.Height > Top + Height then
        Where.rcNormalPosition.Top      := Top + Height - Form.Height;
    If Form.Width > Width then
        Where.rcNormalPosition.Right    := Where.rcNormalPosition.Left + Width
    Else
        Where.rcNormalPosition.Right    := Where.rcNormalPosition.Left + Form.Width;
    If Form.Height > Height then
        Where.rcNormalPosition.Bottom   := Where.rcNormalPosition.Top + Height
    Else
        Where.rcNormalPosition.Bottom   := Where.rcNormalPosition.Top + Form.Height;
    SetWindowPlacement(Form.Handle, @Where);
End; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-01T20:12:43.393

这里的其他答案都没有首先提到问题的原因，这是 VCL 中的一个错误。从我系统上的 forms.pas 中，为了简洁起见，做了一些删减：

```
procedure TCustomForm.CMShowingChanged(var Message: TMessage);
var
  X, Y: Integer;
  NewActiveWindow: HWnd;
  CenterForm: TCustomForm;
begin
        if (FPosition = poScreenCenter) or
           ((FPosition = poMainFormCenter) and (FormStyle = fsMDIChild)) then
        begin
          if FormStyle = fsMDIChild then
          begin
            X := (Application.MainForm.ClientWidth - Width) div 2;
            Y := (Application.MainForm.ClientHeight - Height) div 2;
          end else
          begin
            X := (Screen.Width - Width) div 2;
            Y := (Screen.Height - Height) div 2;
          end;
          if X < 0 then X := 0;
          if Y < 0 then Y := 0;
          SetBounds(X, Y, Width, Height);
          if Visible then SetWindowToMonitor;
        end
        else if FPosition in [poMainFormCenter, poOwnerFormCenter] then
        begin
          CenterForm := Application.MainForm;
          if (FPosition = poOwnerFormCenter) and (Owner is TCustomForm) then
            CenterForm := TCustomForm(Owner);
          if Assigned(CenterForm) then
          begin
            X := ((CenterForm.Width - Width) div 2) + CenterForm.Left;
            Y := ((CenterForm.Height - Height) div 2) + CenterForm.Top;
          end else
          begin
            X := (Screen.Width - Width) div 2;
            Y := (Screen.Height - Height) div 2;
          end;
          if X < 0 then X := 0;
          if Y < 0 then Y := 0;
          SetBounds(X, Y, Width, Height);
          if Visible then SetWindowToMonitor;
        end
        else if FPosition = poDesktopCenter then
        begin
          if FormStyle = fsMDIChild then
          begin
            X := (Application.MainForm.ClientWidth - Width) div 2;
            Y := (Application.MainForm.ClientHeight - Height) div 2;
          end else
          begin
            X := (Screen.DesktopWidth - Width) div 2;
            Y := (Screen.DesktopHeight - Height) div 2;
          end;
          if X < 0 then X := 0;
          if Y < 0 then Y := 0;
          SetBounds(X, Y, Width, Height);
        end; 
```

这个错误的关键似乎是以下片段，在函数中重复了几次：

```
 if X < 0 then X := 0;
      if Y < 0 then Y := 0; 
```

So, if you try to center the form on a monitor to the left or above the primary monitor (remember that origin is at upper-left corner of primary monitor), it will get snapped to the primary monitor from this check. It seems that this code wasn't updated when VCL was updated to support multiple monitors. Which is amusing, since two lines later are calls to `SetWindowToMonitor`.

The code was probably there from when only single monitors were supported in Windows 95 / Windows NT 4.0\. In a single-monitor environment, negative coordinates are always off-screen, and it makes sense to snap to onscreen coordinates, which are always positive. However, the code fails miserably in the presence of multiple monitors, which allows for negative onscreen coordinates.

Working around this bug is left as an exercise to the reader. There are a number of possible solutions.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T15:18:31.683

我在创建事件中使用它：

```
C_FollowMouse :BOOLEAN=TRUE; // Global Const - Follow mouse. Opens App in the monitor where the mouse is.
C_Monitor   :BYTE=0;    // Default Monitor

    Procedure   TfrmMain.ScreenPOS;
    Var  pt:tpoint;
        _lMonitor :BYTE;
    Begin
        if NOT Screen.MonitorCount > 1 then Begin
            Position := poScreenCenter;
            Exit;
        End;

        _lMonitor := C_Monitor;
        if C_FollowMouse then Begin
            _lMonitor := 0;
            getcursorpos(pt);
            if pt.X < 0 then
            _lMonitor := 1;
    End;
    Left:= Screen.Monitors[_lMonitor].Left + Round( (Screen.Monitors[_lMonitor].Width - Width ) / 2);
    Top:=Screen.Monitors[_lMonitor].Top + Round( (Screen.Monitors[_lMonitor].Height - Height ) / 2)
  End; 
```

刚刚用2台显示器测试过。是我的全部。如果您有更多，请发回更改。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-19T13:56:35.043

我可以通过在 OnActivate 表单上使用以下代码来解决此问题：

Self.Left := MainForm.Left + ((MainForm.Width div 2) - (Self.Width div 2)); Self.Top := MainForm.Top + ((MainForm.Height div 2) - (Self.Height div 2));

MainForm 是应用程序的“主要”形式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-04T09:58:59.737

Hey David you can use **poOwnerFormCenter** Instead of **poMainFormCenter**. It will Solve your problem. Read this [post](https://stackoverflow.com/questions/11150252/delphi-6-form-set-to-position-itself-with-podesktopcenter-ends-up-on-extended).

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-27T10:49:49.987

I know this is an old thread but I was just trying to fix this problem with regards to modal dialog forms and found the following to work (after reading the above post by James Johnson)

On OnActivate:

```
X := (Application.MainForm.ClientWidth - Width) div 2;
Y := (Application.MainForm.ClientHeight - Height) div 2;
self.SetBounds(x,y,self.width,self.height); 
```

# android - 网站必须发布安卓应用吗？

> ID：10089542
> 
> 赞同：0
> 
> 时间：2012-04-10T13:16:52.477
> 
> 标签：android

几乎所有的安卓应用程序都有指向“开发者网站”的链接。通常，网站用于分配名称空间。

如果我没有任何网站，如何分配唯一的包命名空间？或者换句话说，网站是分配命名空间的参数吗

如果是的话，你能指导我如何获得自己的网站吗？

法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:18:51.463

你根本不需要任何网站，包系统如下：如果你的包名是com.dharma.app，那么eclipse会生成一个文件夹系统，比如“src\com\dharma\app\”。因此，在 src(sources) 文件夹中，外部文件夹将是 com，1 级更深的 dharma，1 级更深的应用程序。希望你这样理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:19:20.583

命名空间就是这样，一个命名空间。无需创建或拥有自己的域。你只需要确保你的命名空间是合理的唯一的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:20:57.487

按照 java 包命名约定命名包是一个很好的做法。在这篇文章之后： http: [//docs.oracle.com/javase/tutorial/java/package/namingpkgs.html](http://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html)

这是推荐的，但不是强制性的。即，您可以只使用适当的名称空间而无需实际拥有该域。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T13:54:06.660

如果您没有要使用的 Web 域名，您可以使用其他方法来唯一标识您的应用程序。域名是推荐的方式，但例如电子邮件地址或其他包名称也可以使用，具体取决于您将应用程序区分为公司开发的应用程序的重要性。

# c# - 为同一解决方案的多个项目构建序列

> ID：10089550
> 
> 赞同：0
> 
> 时间：2012-04-10T13:17:30.547
> 
> 标签：c#, visual-studio-2010

我有一个直截了当的问题。假设我有一个 projectA，现在我必须将 projectB 添加到 projectA 的解决方案中。有没有办法先构建 ProjectA，在执行完成后我们可以构建 projectB 并执行..？考虑到这两个项目没有任何共同点。

先感谢您！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:19:57.653

右键单击`Solution`解决方案资源管理器中的节点，然后单击`Project Build Order...`.

使用`Dependencies`选项卡，您可以将其设置`ProjectA`为依赖项`ProjectB`- 这将导致`ProjectA`之前构建`ProjectB`。

# ios - 在 C 中默认初始化的原始类型是什么？

> ID：10089551
> 
> 赞同：8
> 
> 时间：2012-04-10T13:17:33.850
> 
> 标签：ios, c, llvm-3.0

我刚刚让 Apple 的 C/C++ 编译器将浮点数初始化为非零值（大约“-0.1”）。

这是一个很大的惊喜 - 只是偶尔发生（但 100% 可重复，如果您事先运行相同的函数调用/参数）。追踪（使用断言）花了很长时间。

我认为浮点数是零初始化的。谷歌搜索表明我在考虑 C++ （当然，这对这些东西更精确 - cf SO: [What is primitive types default-initialized to in C++?](https://stackoverflow.com/questions/3803153/what-are-primitive-types-default-initialized-to-in-c)）。

但也许 Apple 的借口是他们的编译器在 C 模式下运行……那么：C 呢？应该发生什么，以及（更重要的是）什么是典型的？

（当然，我应该手动初始化它——我通常会这样做——但在这种情况下我失败了。不过我没想到它会爆炸！）

（事实证明，谷歌在讨论这个问题时比没用更糟糕——他们当前的搜索拒绝在没有“C++”的情况下显示“C”。一直认为我太愚蠢了，甚至在高级模式下运行时也忽略了我的输入）

* * *

这是它发生的实际源示例。起初我认为 MAX 和 ABS 的定义可能存在问题（也许 MAX(ABS,ABS) 并不总是像你期望的那样？）......但是用断言和调试器挖掘，我最终发现它是缺失的初始化 - 浮点数偶尔会被初始化为非零值）：

```
float crossedVectorX = ... // generates a float
float crossedVectorY = ... // generates a float

float infitesimal; // no manual init
float smallPositiveFloat = 2.0 / MAX( ABS(crossedVectorX), ABS(crossedVectorY));

// NB: confirmed with debugger + assertions that smallPositiveFloat was always positive

infitesimal += smallPositiveFloat;

NSAssert( infitesimal >= 0.0, @"This is sometimes NOT TRUE" ); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-10T13:23:46.953

`0`如果没有显式初始化程序，则仅初始化具有静态存储持续时间的对象。

```
#include <stdio.h>

float f;         // initialized to 0, file scope variables have static storage
static float g;  // initialized to 0

int main(void)
{
    float h;  // not initialized to 0, automatic storage duration
    static float i;  // initialized to 0

    return 0;
} 
```

未显式初始化的具有自动存储持续时间的对象（如`h`上面的示例）具有不确定的值。读取它们的值是未定义的行为。

**编辑：**`0`为了完整起见，因为如果没有明确的初始化 程序，具有线程存储持续时间的 C11 对象也会被初始化。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-10T13:24:53.497

标准的相关部分是 §6.7.9 第 10 段：

> 如果具有自动存储持续时间的对象未显式初始化，则其值是不确定的。

如果您的变量具有线程或静态存储持续时间，则该段落的下一部分将生效：

> 如果具有静态或线程存储持续时间的对象未显式初始化，则：
> 
> -- 如果有指针类型，则初始化为空指针；
> 
> -- 如果它具有算术类型，则将其初始化为（正或无符号）零；
> 
> ...

我还要注意，您应该打开编译器的警告（特别是未初始化变量的警告），因为这应该立即为您确定问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-10T13:24:28.020

静态变量将被初始化为零，但我猜你正在谈论一个局部变量（即堆栈或自动） - 这些*不是*为你初始化的，而是获取堆栈上该内存的任何值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T13:27:24.670

我不得不拿出我的 K&R 来回答这个问题：

在没有显式初始化的情况下，保证外部变量和静态变量初始化为零；自动和寄存器变量具有未定义的（即垃圾）初始值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T13:24:10.627

我不相信 C 的任何标准通常都会定义变量的初始值。这将符合 C 的一般哲学和应用领域——为成年人编程，他们可能有理由希望他们的编译器不为他们初始化一个变量，并且他们知道这是他们的责任初始化自己的变量。

# linux - 多处理器机器中posix线程的并发性

> ID：10089552
> 
> 赞同：6
> 
> 时间：2012-04-10T13:17:34.837
> 
> 标签：linux, multithreading, linux-kernel, posix, scheduling

我对多处理器机器中 posix 线程的并发性有一些疑问。我在 SO 中发现了类似的问题，但没有找到确凿的答案。

以下是我的理解。我想知道我是否正确。

1.  Posix 线程是用户级线程，内核不知道它。

2.  内核调度程序将 Process（及其所有线程）视为一个调度实体。依次选择运行哪个线程的是线程库。它可以在可运行的线程中分割内核给定的 cpu 时间。

3.  用户线程可以在不同的 cpu 内核上运行。即让线程 T1 和 T2 由 Process(T) 创建，然后 T1 可以在 Cpu1 中运行，T2 可以在 Cpu2 中运行，但**它们不能同时运行**。

请让我知道我的理解是否正确。

谢谢...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T13:20:38.033

既然您用“Linux”标签标记了您的问题，我将根据 linux 下的标准 pthreads 实现来回答它。如果您谈论的是在虚拟机/语言级别而不是操作系统上安排的[“绿色”线程](http://en.wikipedia.org/wiki/Green_threads)，那么您的答案大多是正确的。但我下面的评论是关于 Linux pthreads 的。

> 1) Posix 线程是用户级线程，内核不知道。

不，这肯定是不正确的。Linux 内核和 pthreads 库一起工作来管理线程。内核负责上下文切换、调度、内存管理、高速缓存管理等。当然还有其他的管理在用户级别完成，但是没有内核，pthread 的大部分功能都会丢失。

> 2）内核调度器将进程（及其所有线程）视为一个调度实体。依次选择运行哪个线程的是线程库。它可以在可运行的线程中分割内核给定的 cpu 时间。

不，内核将每个进程线程视为一个实体。它有自己的时间片规则，考虑了进程（和进程优先级），但每个子进程线程都是一个可调度的实体。

> 3) 用户线程可以在不同的 cpu 内核上运行。即让线程 T1 和 T2 由 Process(T) 创建，然后 T1 可以在 Cpu1 中运行，T2 可以在 Cpu2 中运行，但它们不能同时运行。

不会。多线程程序需要并发执行。这就是为什么同步和互斥锁如此重要，以及为什么程序员要忍受多线程编程的复杂性。

* * *

向您证明这一点的一种方法是查看`ps`with`-L`选项的输出以显示关联的线程。 `ps`通常将多个线程进程包装在一行中，但`-L`您可以看到内核为每个线程都有一个单独的虚拟进程 ID：

```
ps -ef | grep 20587
foo    20587     1  1 Apr09 ?        00:16:39 java -server -Xmx1536m ... 
```

相对

```
ps -eLf | grep 20587
foo    20587     1 20587  0  641 Apr09 ?    00:00:00 java -server -Xmx1536m ...
foo    20587     1 20588  0  641 Apr09 ?    00:00:30 java -server -Xmx1536m ...
foo    20587     1 20589  0  641 Apr09 ?    00:00:03 java -server -Xmx1536m ...
... 
```

我不确定 Linux 线程是否仍然这样做，但历史上 pthreads 使用`clone(2)`系统调用来创建自身的另一个线程副本：

> 与 fork(2) 不同，这些调用允许子进程与调用进程共享其部分执行上下文，例如内存空间、文件描述符表和信号处理程序表。

`fork(2)`这与创建另一个完整进程时使用的不同。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T13:24:42.280

POSIX 没有指定如何将创建的线程`pthread_create`调度到处理器内核。这取决于实施。

但是，我希望在质量实现中具有以下内容，当前版本的 linux 就是这种情况：

*   线程是完整的内核线程，由内核调度
*   来自同一进程的线程可以在不同的处理器上同时运行

即，所有 3 条编号语句对于当前的 linux 实现都是错误的，但理论上对于也符合 POSIX 的另一个实现来说可能是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:50:20.400

大多数 POSIX 实现使用操作系统支持来提供线程功能——它们包装了管理线程所需的系统调用。因此，线程的行为重新。调度等取决于底层操作系统。

因此，在大多数现代操作系统上：

1.  具有 POSIX 线程的进程与具有多个线程的任何其他进程对内核没有什么不同。

2.  内核调度程序调度线程，而不是进程。“进程”通常被视为具有代码、内存管理、配额、审计和安全权限的高级构造，但不具有执行权限。除非线程运行其代码，否则进程无法执行任何操作，这就是为什么在创建进程时会同时创建“主线程”，否则不会运行任何东西。操作系统调度算法可以使用线程运行的进程作为参数之一来决定接下来运行哪一组就绪线程——将一个线程与来自同一进程的一个线程交换出来更便宜——但它不必这样做。

    当准备好的线程多于运行它们的内核时，将内核给定的 cpu 时间切片在可运行线程之间是 OS 计时器中断的副作用。任何经常不得不求助于（呃！-我讨厌这个词）的机器，“时间切片”应该被认为是超载的，应该有更多的 CPU 或更少的工作。理想情况下，线程应该只在由另一个线程或 IO 驱动程序发出信号时才准备就绪，而不是因为 OS 计时器中断已决定运行它来代替仍然可以做有用工作的另一个线程。

3.  他们只是可以同时运行。如果两个线程准备就绪并且有两个核心，则将线程分派到两个核心上。它们是否来自同一进程并不重要。

# scheme - 二进制加法的优雅代码？

> ID：10089557
> 
> 赞同：3
> 
> 时间：2012-04-10T13:18:08.373
> 
> 标签：scheme, racket

我刚刚编写了函数 add-registers 用于 Racket 中两个 n 位寄存器的二进制加法（使用 bit-add 函数作为助手）：

```
(define (bit-add x y c)
  (values (bitwise-xor x y c) (bitwise-ior (bitwise-and x y)
                                           (bitwise-and x c)
                                           (bitwise-and y c))))

(define (add-registers xs ys)
  (let ([carry 0])
    (values (reverse (for/list ([b1 (reverse xs)] [b2 (reverse ys)])
                       (let-values ([(nb nc) (bit-add b1 b2 carry)])
                         (set! carry nc)
                         nb)))
            carry))) 
```

但是我发现我的代码很丑。所以我想知道这是否可以写得更简洁优雅？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T14:16:15.853

`add-registers`这是一个看起来更好的新版本：

```
(define (add-registers xs ys)
  (for/fold ([carry 0] [bs empty])
     ([b1 (reverse xs)] [b2 (reverse ys)])
     (define-values (nb nc) (bit-add b1 b2 carry))
     (values nc (cons nb bs)))) 
```

# c - 算术测验在减法和除法循环中崩溃并且进程返回 -1073741819

> ID：10089558
> 
> 赞同：-2
> 
> 时间：2012-04-10T13:18:09.073
> 
> 标签：c

其他一切都很好，但尝试去减法或除法部分**（练习的一部分是不要问有否定答案的减法问题或除以 0 或答案小于 1 的除法问题）**。起初它有效，然后尝试回答另一个问题。它给出了这个未包含在我的*初始化函数*中的复杂问题所以我尝试回答它，它仍然可以检测到正确答案。然后它给出这个 32 - 9 或 32/9（无法回答除法部分，因为它需要余数并且问题太复杂）。给出正确答案后，尝试回答另一个减法/除法问题，*它会崩溃并给出此错误进程返回 -1073741819*我的代码有什么问题？也提前谢谢！ **顺便说一句，我在我的代码中应该限制除法和减法的部分添加了注释**

```
/* Arithmetic Quiz Practice Program */
#include <stdio.h>
#include <stdlib.h>
int numbers[10];
int clear(void);
int initialize(void);
int additionquiz(void);
int subtractionquiz(void);
int multiplicationquiz(void);
int divisionquiz(void);

/* Main Menu */
int main()
{
    while(1==1)
    {
        int choice;
        initialize();
        printf("Arithmetic Quiz 4/10/2012");
        printf("\n1 - Addition Quiz\n2 - Subtraction Quiz\n3 - Multiplication Quiz\n4 - Division Quiz\n5 - Exit Program\n");
        scanf("%d",&choice);
        if(choice==1)
        {
            clear();
            additionquiz();
        }
        else if(choice==2)
        {
            clear();
            subtractionquiz();
        }
        else if(choice==3)
        {
            clear();
            multiplicationquiz();
        }
        else if(choice==4)
        {
            clear();
            divisionquiz();
        }
        else if(choice==5)
        {
            exit(EXIT_SUCCESS);
        }
        else
        {
            printf("\n%cPlease input a valid option\n",7);
            main();
        }
    }
    return 0;
}
/* Function for clearing the page */
int clear()
{
    int i;
    for(i=0;i<25;i++)
    {
        printf("\n");
    }
    return 0;
}
/* Function for initializing the Array */
int initialize()
{
    numbers[0]=9;
    numbers[1]=5;
    numbers[2]=1;
    numbers[3]=4;
    numbers[4]=7;
    numbers[5]=8;
    numbers[6]=3;
    numbers[7]=6;
    numbers[8]=2;
    numbers[9]=0;
    return 0;
}

/* Function for the Addition Quiz */
int additionquiz()
{
    /* Randomizing the question in addition quiz */
    int a,b,diff,ans,again;
    a=0;
    diff=1;
    b=a+diff;
    if(a>9)
    {
        a=0;
        diff++;
    }
    if(diff>9);
    {
        diff=0;
    }

    if(b>9);
    {
        b=0;
    }

    /* Main part of the addition quiz */
    while(1==1)
    {
        printf("\n%d + %d = ",numbers[a],numbers[b]);
        scanf("%d",&ans);
        if(ans==numbers[a]+numbers[b])
        {
            printf("\nYour answer is CORRECT!!!\n");
            a++;
        }
        else
        {
            printf("\nYour answer is WRONG!!!\n");
            additionquiz();
        }   
        /* The loop for addition quiz" */
        while(1==1)
        {
            printf("\n1 - Answer another addition question\n2 - Go back to main menu\n3 - Exit program\n");
            scanf("%d",&again);
            if(again==1)
            {
                clear();
                break;
            }
            else if(again==2)
            {
                clear();
                main();
            }
            else if(again==3)
            {
                exit(EXIT_SUCCESS);
            }
            else
            {
                printf("%cPlease input a valid option.\n",7);
                continue;
            }
        }
        continue;
    }
}
/* Function for the subtraction quiz */
int subtractionquiz()
{
/* Randomizing the question in subtraction quiz */
    int a,b,diff,ans,again;
    a=0;
    diff=1;
    if(a>9)
    {
        a=0;
        diff++;
    }
    if(diff>9);
    {
        diff=0;
    }
    b=a+diff;
    if(b>9);
    {
        b=0;
    }
/* Main part of the subtraction quiz */
    while(1==1)
    {
    /* Not allowing questions with negative answer */
        while(numbers[a]<numbers[b])
            {
                a++;
            }

        printf("\n%d - %d = ",numbers[a],numbers[b]);
        scanf("%d",&ans);
        if(ans==numbers[a]-numbers[b])
        {
            printf("\nYour answer is CORRECT!!!\n");
            a++;
        }
        else
        {
            printf("\nYour answer is WRONG!!!\n");
            subtractionquiz();
        }
        /* Loop for the subtraction quiz */
        while(1==1)
        {
            printf("\n1 - Answer another subtraction question\n2 - Go back to main menu\n3 - Exit program\n");
            scanf("%d",&again);
            if(again==1)
            {
                clear();
                break;
            }
            else if(again==2)
            {
                clear();
                main();
            }
            else if(again==3)
            {
                exit(EXIT_SUCCESS);
            }
            else
            {
                printf("%cPlease input a valid option.\n",7);
                continue;
            }
        }
        continue;
    }
}
/* Function for multiplication quiz */
int multiplicationquiz()
{
    /* Randomizing the multiplication quiz */
    int a,b,diff,ans,again;
    a=0;
    diff=1;
    b=a+diff;
    if(a>9)
    {
        a=0;
        diff++;
    }
    if(diff>9);
    {
        diff=0;
    }

    if(b>9);
    {
        b=0;
    }
    /* Main part of the multiplication quiz */
    while(1==1)
    {
        printf("\n%d x %d = ",numbers[a],numbers[b]);
        scanf("%d",&ans);
        if(ans==numbers[a]*numbers[b])
        {
            printf("\nYour answer is CORRECT!!!\n");
            a++;
        }
        else
        {
            printf("\nYour answer is WRONG!!!\n");
            clear();
            multiplicationquiz();
        }
        /* Loop for multiplication quiz */
        while(1==1)
        {
            printf("\n1 - Answer another multiplication question\n2 - Go back to main menu\n3 - Exit program\n");
            scanf("%d",&again);
            if(again==1)
            {
                clear();
                break;
            }
            else if(again==2)
            {
                clear();
                main();
            }
            else if(again==3)
            {
                exit(EXIT_SUCCESS);
            }
            else
            {
                printf("%cPlease input a valid option.\n",7);
                continue;
            }
        }
        continue;
    }
}
/* Function for division quiz */
int divisionquiz()
{
    /* Randomizing the division quiz */
    int a,b,diff,ans,again,remain;
    a=0;
    diff=1;
    if(a>9)
    {
        a=0;
        diff++;
    }
    if(diff>9);
    {
        diff=0;
    }
    b=a+diff;
    if(b>9);
    {
        b=0;
    }
    /*Main part of the division quiz */
    while(1==1)
    {
        /* Not allowing division by 0 or answers less than 1 */
        if(numbers[b]==0 || (numbers[a]<numbers[b]))
        {
                a++;
                continue;
        }
        printf("%d %% %d =\n",numbers[a],numbers[b]);
        printf("What is the whole number in your answer?\n");
        scanf("%d",&ans);
        printf("\nWhat is the remainder in your answer?(0 if none)\n");
        scanf("%d",&remain);
        if((ans==numbers[a]/numbers[b])&&(remain==numbers[a]%numbers[b]))
        {
                printf("\nYour answer is CORRECT!!!\n");
                a++;
        }
        else
        {
                printf("\nYour answer is WRONG!!!\n");
                divisionquiz();
        }
        /* Loop for division quiz */        
        while(1==1)
        {
            printf("\n1 - Answer another division question\n2 - Go back to main menu\n3 - Exit program\n");
            scanf("%d",&again);
            if(again==1)
            {
                clear();
                break;
            }
            else if(again==2)
            {
                clear();
                main();
            }
            else if(again==3)
            {
                exit(EXIT_SUCCESS);
            }
            else
            {
                printf("%cPlease input a valid option.\n",7);
                continue;
            }
        }
        continue;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:26:50.733

这是个问题：

```
if(diff>9); 
```

条件后面的分号`if`：这发生在几个地方，这意味着`{}`之后的任何代码，`if`只有在条件是时才被执行`true`，将始终被执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:33:39.163

有几个问题。但是您看到奇怪数字的原因是，它`a`最终会从数组末尾递增`numbers[]`到未分配的内存中。

由于您开始学习 C，这里有一些提示。

```
initialize(); // Only need to call this once, since the array never changes.
while(1==1)  // This can be "while(1)"
{
    int choice;
    printf("Arithmetic Quiz 4/10/2012");
    // You can improve readability by splitting long literals like this.
    printf("\n1 - Addition Quiz\n2 - Subtraction Quiz\n"
      "3 - Multiplication Quiz\n4 - Division Quiz\n5 - Exit Program\n");
    scanf("%d",&choice);
    // You can simplify a list of "else if" statements with "switch",
    // and you might want to call clear() only once:
    /*
    if(choice==1)
    {
        clear();
        additionquiz();
    }
    else if(choice==2)
    . . .
    */
    clear();  // Always call this.
    switch (choice) {
    case 1:
      additionquiz();
      break;
    case 2:
      subtractionquiz();
      break;
    ...
    default:
      printf("\n%cPlease input a valid option\n",7);
      // main(); Not necessary
      break;
  } 
```

当您不关心函数的返回值时，您可以将其声明为 return `void`。显式声明无参数函数也是一个好主意：

```
/* Function for clearing the page */
//int clear()
void clear(void)  // Takes no args, returns nothing.
{ 
```

在测验的每个部分，您都需要检查循环*内*的`a`和，以确保在您重复相同的测验时它们始终有效。`b` *`while()`*

 *```
/* Randomizing the multiplication quiz */
int a,b,diff,ans,again;
a=0;
diff=1;

// vvv THIS BLOCK SHOULD BE INSIDE THE while() LOOP vvv
b=a+diff;
if(a>9)
{
    a=0;
    diff++;
}
if(diff>9);  // This semicolon causes the next line to be executed always.
{
    diff=0;
}

if(b>9);  // This semicolon causes the next line to be executed always.
{
    b=0;
}
// ^^^ THIS BLOCK SHOULD BE INSIDE THE while() LOOP ^^^

/* Main part of the multiplication quiz */
while(1==1)   // This can be "while(1)"
{ 
```

最后，由于您在每个测验中重复相同的验证检查`a`，`b`您可能希望将该代码提取到它自己的函数中。由于函数可能需要更改值，因此您需要通过地址传递它们，然后取消引用指针：

```
void validate(int *a, int *b, int *diff) {
  if (*a > 9) {  // Validate "a" first, which may alter "diff"
    *a = 0;
    ++*diff;
  }
  if (*diff > 9) {  // Validate "diff"
    *diff = 0;
  }
  *b = *a + diff;  // Calculate and validate "b"
  if (*b > 9);  {
    *b = 0;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:30:14.307

*一旦您指定“再次”，您就可以用递增的 a*来询问下一个减法/除法问题。

问题是您没有在*while 循环中验证**a*索引。*因此，在您的while 循环*中包含您的索引验证。*

# active-directory - Tridion 中的配置更改，以便与活动目录交互

> ID：10089566
> 
> 赞同：5
> 
> 时间：2012-04-10T13:18:35.523
> 
> 标签：active-directory, tridion

*   默认情况下，SDL Tridion 是否可以根据安装 Tridion 的服务器的域与活动目录通信？o 例如：我们在服务器 server1.abc.com 中安装 tridion，其中 abc.com 是我的域

*   如果默认情况下无法完成，请告诉我如何配置它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T13:58:51.643

是的，它可以做到——这是默认行为。

在“添加用户”对话框中，您应该能够键入域名，如果允许服务器（以及服务器的用户帐户，默认为 MTSUser）与该域对话，您将获得用户列表，您可以添加将它们添加到允许的 Tridion 用户列表中。

除非您想要 LDAP 集成，否则无需配置。

# ruby-on-rails - Proper syntax and use cases for MetaWhere in_all and in_any

> ID：10089589
> 
> 赞同：1
> 
> 时间：2012-04-10T13:19:39.890
> 
> 标签：ruby-on-rails, ruby, meta-where

I've been exploring the capabilities of `MetaWhere` over the last couple of days. Most of the predications are pretty straightforward, but I'm stuck on how to use `in_all` and `in_any`.

Here are some of my attempts:

```
Group.where(:id.in_any => [1,2,3])
  => SELECT `groups`.* FROM `groups` WHERE ((`groups`.`id` IN (1) OR `groups`.`id` IN (2) OR `groups`.`id` IN (3)))

Group.where(:id.in_any => [[1,2,3],[4,5,6],[7,8,9]])
  => undefined method 'visit_Fixnum' for #<MetaWhere::Visitors::Predicate:0x3740ba0>

Group.where(:id.in_any => [["1","2","3"],["4","5","6"],["7","8","9"]])
  => SELECT `groups`.* FROM `groups` WHERE (('1' AND '4' AND '7'))

Group.where(:id.in_any => ["(1,2,3)","(4,5,6)","(7,8,9)"])
  => SELECT `groups`.* FROM `groups` WHERE ((`groups`.`id` IN (0) OR `groups`.`id` IN (0) OR `groups`.`id` IN (0)))

Group.where(:id.in_any => ["1,2,3","4,5,6","7,8,9"])
  => SELECT `groups`.* FROM `groups` WHERE ((`groups`.`id` IN (1) OR `groups`.`id` IN (4) OR `groups`.`id` IN (7))) 
```

I'm assuming they're supposed to `AND` or `OR` a bunch of `IN` clauses, but I can't figure out how to set them up properly, nor have I been able to find any decent documentation. And if anyone has any examples of situations where these predications would be useful, that would be appreciated as well.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T14:51:08.057

Sometimes, it helps to go straight to the source. Looks like there's bug: [https://twitter.com/#!/erniemiller/status/191151541342830592](https://twitter.com/#!/erniemiller/status/191151541342830592)

# php - 用php列出照片

> ID：10089590
> 
> 赞同：-6
> 
> 时间：2012-04-10T13:19:40.873
> 
> 标签：php

我有问题并没有解决。

```
What i want is that listing photos side to side 
```

像那样：

![在此处输入图像描述](../Images/a79e993d44fd020b638f1ecf8f11e5c7.png)

```
The problem is that when i have 50 photos , this happens 
```

![在此处输入图像描述](../Images/50dae67f8a21bd20847295b8a3787533.png)

我想要的是每列列出十张照片。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:40:37.267

循环显示图像时，您需要每 10 张照片中断一次，如下所示：

```
$photosPerLine = 10;
for ( var $i = 0; $i < $totalNumPhotos; $i++ )
{
    drawPhoto();  // This does the actual drawing - perhaps echo a <IMG> or whatever

    // Now we check if we've reached 10 in a row, we do this by dividing the
    // photo counter by 10 and checking for a reminder, only numbers in leaps
    // of 10 will divide without a reminder.  If we don't have a reminder it means
    // we're at 10, 20, 30 ... so we break the line

    if ( ( $i + 1 ) % $photosPerLine == 0 )
    {
        echo( '<br/>' );  // Or create a new row in a table or whatever
    }
} 
```

或者只是将图像放置在具有指定宽度的容器（`<div>`例如）中以恰好容纳 10 个图像，并让浏览器换行以适应内容。

# ruby - 在保存记录之前创建关联

> ID：10089592
> 
> 赞同：11
> 
> 时间：2012-04-10T13:19:43.490
> 
> 标签：ruby, ruby-on-rails-3, activerecord

所以，我承认我是 Rails 新手，我遇到了一个相当普遍的问题，但我在这里找不到答案。

我有一个`Foo`这样的模型：

```
class Foo < ActiveRecord::Base
  has_many :bars
end 
```

Bars belongs_to Foo，所有这些都有效。现在我想同时创建一个 Foo 和构建 Bar 。像这样：

```
f = Foo.new(:baz => 'baz')
bars.each do |b|
  f.bars.build(:bizzy => b[:bizzy])
end
f.save 
```

我知道这行不通，因为父记录不存在，所以关联不存在，但必须有办法做到这一点。我通过编辑暂时解决了这个问题：

```
f = Foo.new(:baz => 'baz')
f.save
f = Foo.find(:first, :conditions => {:baz => 'baz'})
bars.each do |b|
  f.bars.create(:bizzy => b[:bizzy])
end 
```

但这并不干净，而且到处都是不愉快的。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T13:32:29.577

在第一行中，您可以只使用`create`而不是`new`. 您不需要`f.bars.create`or `f.bars.build`，因为该`bar`对象已经存在。我会这样做：

```
f = Foo.create(:baz => 'baz')

bars.each do |b|
  f.bars << b
end 
```

就个人而言，我不会遍历`bars`，而只是使用`update_all`：

```
f = Foo.create(:baz => 'baz')
bars.update_all(:foo_id => f.id) 
```

编辑：可以在不先保存记录的情况下执行此操作。这对我有用：

```
f = Foo.new(:baz => 'baz')

bars.each do |b|
  f.bars << b
end

f.save 
```

# ios - 如何为 uiscroll 视图添加页面控件？

> ID：10089593
> 
> 赞同：2
> 
> 时间：2012-04-10T13:19:50.043
> 
> 标签：ios, iphone, uiscrollview, iphone-sdk-3.0

嗨，我是 iphone 应用程序开发的新手。我想为我的 uiscroll 视图使用页面控制器。在单个视图中，我使用两个滚动视图和两个页面控件。我使用以下编码设置了 pagecontrol，但只有两个页面工作正常。但我想添加包含静态按钮的滚动视图超过两页。！[在此处输入图像描述][1]

```
//
//  newsampleViewController.m
//  newsample
//
//  Created by SmartJobDevelopers on 4/3/12.
//  Copyright 2012 __MyCompanyName__. All rights reserved.
//

#import "newsampleViewController.h"

@implementation newsampleViewController

@synthesize scr_anger;
@synthesize scr_sketch;

@synthesize pageControl;
@synthesize pageControl1;

/*
// The designated initializer. Override to perform setup that is required before the view is loaded.
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}
*/

/*
// Implement loadView to create a view hierarchy programmatically, without using a nib.
- (void)loadView {
}
*/

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad {

    [self setupPage];

    //[scr_anger setScrollEnabled:YES];
    //[scr_anger setContentSize:CGSizeMake(1290,15)];

    //[scr_sketch setScrollEnabled:YES];
    //[scr_sketch setContentSize:CGSizeMake(1310,15)];

    [super viewDidLoad];
}

-(IBAction)buttonPressed:(id)sender {
        i_curtag=(int)[sender tag];
        //NSLog(@"%d",i_curtag);
        [self fn_btnOperation];
        //[self opt:str_filename];
        //NSLog(@"str_filename:%@",str_filename);
   }

-(void)fn_btnOperation
{
    if (i_curtag==1)
    {
        //str_filename=[NSString stringWithFormat:@"%d.png",i_curtag];
        //NSLog(@"str_filename:%@",str_filename);
        str_filename=@"1.png";
       // NSLog(@"1.png");
    }
    else if(i_curtag==2)
    {
        str_filename=@"2.png";
        //NSLog(@"2.png");
    }
    else if(i_curtag==3)
    {
        str_filename=@"3.png";
        //NSLog(@"3.png");
    }
    else if(i_curtag==4)
    {
        str_filename=@"4.png";
       // NSLog(@"4.png");
    }
    else if(i_curtag==5)
    {
        str_filename=@"5.png";
        //NSLog(@"5.png");
    }
    else if(i_curtag==6)
    {
        str_filename=@"6.png";
        //NSLog(@"6.png");
    }
    else if(i_curtag==7)
    {
        str_filename=@"7.png";
       // NSLog(@"7.png");
    }
    else if(i_curtag==8)
    {
        str_filename=@"8.png";
        //NSLog(@"8.png");
    }
    else if(i_curtag==9)
    {
        str_filename=@"9.png";
       // NSLog(@"9.png");
    }
    else if(i_curtag==10)
    {
        str_filename=@"10.png";
       // NSLog(@"10.png");
    }

    [self opt:str_filename];
}

-(id)opt:(NSString*)filename
{
    //NSLog(@"filename:%@",filename);
    str_filename=filename;
    UIActionSheet *popupQuery = [[UIActionSheet alloc] initWithTitle:@""delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:@"Save Image" otherButtonTitles:@"Mail Image",nil];
    popupQuery.actionSheetStyle = UIActionSheetStyleBlackOpaque;
    [popupQuery showInView:self.view];
    [popupQuery release];   
}

-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex1
{
    if (buttonIndex1 == 0)
    {
       // NSLog(@"str_filename in actionsheet:%@",str_filename);
        [self savesingleimage];
       // NSLog(@"save");
    } 

    else if (buttonIndex1 == 1)
    {
        //NSLog(@"str_filename in else:%@",str_filename);
        [self fmail];
        //NSLog(@"mail");
    }
}

-(void)fmail
{   
    //NSLog(@"str_filename:%@",str_filename);

        NSMutableString *emailBody = [[[NSMutableString alloc] initWithString:@"<html><body><p>"] retain];

    [emailBody appendString:@"<b><u>EMOTIONAL ICONS</u></b><br><br>"];

    [emailBody appendString:@"</p></body></html>"];

        MFMailComposeViewController *emailDialog = [[MFMailComposeViewController alloc] init];

    UIImage *icon1 = [UIImage imageNamed:str_filename];
    NSData *imageData1 = UIImageJPEGRepresentation(icon1, 1);
    [emailDialog addAttachmentData:imageData1 mimeType:@"image/jpg" fileName:str_filename];
        emailDialog.mailComposeDelegate =self;
        [emailDialog setSubject:@"Emotional Icons"];
        [emailDialog setMessageBody:emailBody isHTML:YES];
        [emailDialog.navigationBar setTintColor:[UIColor blackColor]];

        [self presentModalViewController:emailDialog animated:YES];
        [emailDialog release];
        [emailBody release];
}

- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Status:" message:@"" delegate:nil cancelButtonTitle:@"ok" otherButtonTitles:nil];

    switch (result) {
        case MFMailComposeResultCancelled:
            alert.message = @"Message Canceled";
            break;
        case MFMailComposeResultSaved:
            alert.message = @"Message Saved";
            break;
        case MFMailComposeResultSent:
            alert.message = @"Message Sent";
            break;
        case MFMailComposeResultFailed:
            alert.message = @"Message Failed";
            break;
        default:
            alert.message = @"Message Not Sent";
            break;  
    }
    [self dismissModalViewControllerAnimated:YES];

    [alert show];
    [alert release];
}

-(void)savesingleimage{

   // NSLog(@"str_filename in save: %@",str_filename);
    UIImage *image1 = [UIImage imageNamed:str_filename];    
    UIImageWriteToSavedPhotosAlbum(image1, nil, nil, nil);
    UIAlertView *successAlert = [[UIAlertView alloc] initWithTitle:@"Saved" 
        message:@"Image Saved into PhotoAlbum" 
        delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(110, 170, 50, 50)];
    NSString *path = [[NSString alloc] initWithString:[[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:str_filename]];
    UIImage *bkgImg = [[UIImage alloc] initWithContentsOfFile:path];
    [imageView setImage:bkgImg];
    [bkgImg release];
    [path release];

    [successAlert addSubview:imageView];
    [imageView release];

    [successAlert show];
    [successAlert release];
}

#pragma mark -
#pragma mark The Guts
- (void)setupPage
{
    scr_anger.delegate = self;
    scr_sketch.delegate =self;

    //[self.scr_anger setBackgroundColor:[UIColor blackColor]];
    [scr_anger setCanCancelContentTouches:NO];
    [scr_sketch setCanCancelContentTouches:NO];

    scr_anger.indicatorStyle = UIScrollViewIndicatorStyleWhite;
    scr_anger.clipsToBounds = YES;
    scr_anger.scrollEnabled = YES;
    scr_anger.pagingEnabled = YES;

    scr_sketch.indicatorStyle = UIScrollViewIndicatorStyleWhite;
    scr_sketch.clipsToBounds = YES;
    scr_sketch.scrollEnabled = YES;
    scr_sketch.pagingEnabled = YES;

    self.pageControl.numberOfPages = 2;
    self.pageControl1.numberOfPages = 2;

    [scr_anger setScrollEnabled:YES];
    [scr_sketch setScrollEnabled:YES];

    [scr_anger setContentSize:CGSizeMake(1290,15)];
    [scr_sketch setContentSize:CGSizeMake(1940,15)];

}

#pragma mark -
#pragma mark UIScrollViewDelegate stuff
- (void)scrollViewDidScroll:(UIScrollView *)_scrollView
{
   // NSLog(@"scrollview val=%d",_scrollView.tag);
    i=_scrollView.tag;
   // NSLog(@"i=%d",i);
    if (_scrollView.tag==101) {

    if (pageControlIsChangingPage) {
        return;
    }

    /*
     *  We switch page at 50% across
     */

     //scr_anger.frame = CGRectMake(0, 0, 320, 0);
    CGFloat pageWidth =scr_anger.frame.size.width;
    //NSLog(@"pagewidth=%f",pageWidth);
    int page = floor((scr_anger.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
   // NSLog(@"page=%d",page);
    pageControl.currentPage = page;
        }
    else if(_scrollView.tag==102)
    {
        if (pageControlIsChangingPage) {
            return;
        }

        /*
         *  We switch page at 50% across
         */

        CGFloat pageWidth =scr_sketch.frame.size.width;

        int page = floor((scr_sketch.contentOffset.x - pageWidth / 2) / pageWidth) + 1;

        pageControl1.currentPage = page;
        NSLog(@"page=%d",page);
    }
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)_scrollView 
{
    pageControlIsChangingPage = NO;
}

#pragma mark -
#pragma mark PageControl stuff
- (IBAction)changePage:(id)sender 
{
    /*
     *  Change the scroll view
     */
    //NSLog(@"i=%d",i);
    if (i==101) {

    CGRect frame = scr_anger.frame;

    //pageControl.frame = CGRectMake(0, 390, 320, 15);
    frame.origin.x = frame.size.width * pageControl.currentPage;
      frame.origin.y = 0;

    [scr_anger scrollRectToVisible:frame animated:YES];
    /*
     *  When the animated scrolling finishings, scrollViewDidEndDecelerating will turn this off
     */
    pageControlIsChangingPage = YES;
    }

    else if(i==102)
    {
        CGRect frame1 = scr_sketch.frame;

        frame1.origin.x = frame1.size.width * pageControl1.currentPage;
        frame1.origin.y = 0;

        [scr_sketch scrollRectToVisible:frame1 animated:YES];

        pageControlIsChangingPage = YES;
    }

}

/*
// Override to allow orientations other than the default portrait orientation.
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}
*/

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    [scr_anger release];
    [scr_sketch release];

    [pageControl release];
    [pageControl1 release];
        // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)dealloc {
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:45:53.690

[这](http://www.iosdevnotes.com/2011/03/uiscrollview-paging/#comment-14154)是一个关于 UIScrollView 和 IPageControl 组合的非常好的教程。但我自己寻找更多动态设计的教程（如 ios 应用程序的主页 - 我自动递增 - 递减）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:28:56.477

这是一个信息：[http ://cocoawithlove.com/2009/01/multiple-virtual-pages-in-uiscrollview.html](http://cocoawithlove.com/2009/01/multiple-virtual-pages-in-uiscrollview.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:45:04.663

在您的`setupPage:`方法中，您有一个代码允许这样的页面数。

```
self.pageControl.numberOfPages = 2;
self.pageControl1.numberOfPages = 2; 
```

如果要增加 numberOfPages，则增加这些行中的 numberOfPages。

# php - PHP中的Mysql GROUP BY或DISTINCT查询用法

> ID：10089608
> 
> 赞同：0
> 
> 时间：2012-04-10T13:20:44.940
> 
> 标签：php, mysql, group-by, distinct

我对这些新的查询类型（DISTINCT、GROUP BY 等）有点困惑。我的数据库中有三个表。

*   品牌
*   产品
*   食谱

我想做的是列出品牌，然后寻找该品牌的产品，看看是否有这些产品的配方，然后我希望它被写出来。

我可以用基本查询来编写它；

```
$sql = "SELECT * FROM BRANDS";
    $sql2 = "SELECT * FROM PRODUCTS WHERE BRANDID = 1";
       $sql3 = "SELECT * FROM RECIPES WHERE PRODUCTID = 2"; 
```

但它重复了品牌。据我搜索，我必须在查询中使用 GROUP BY 或 DISTINCT。

我应该如何创建我的查询布局以及我应该使用哪一个？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:27:27.363

我认为你不一定需要做所有的不同和分组，除非你的数据库有重复的行。您可以在一个查询中选择所有这些，如下所示：

```
Select Brands.BrandId, Brands.BrandName, Products.ProductId, Products.ProductName, Recipes.*
From Brands
Inner Join Products On Products.BrandId = Brands.BrandId
Inner Join Recipes On Recipes.ProductId = Products.ProductId
Where
    Brands.BrandId = 1 And
    Products.ProductId = 2
Order By Brands.BrandId, Products.ProductId, Recipes.RecipeId 
```

请注意，我假设您有 Brands.BrandName 和 Products.ProductName 列。此查询将为您提供完整的记录集，根据品牌和产品进行过滤。

# jquery - 首次单击时 JQuery slideDown 不起作用

> ID：10089610
> 
> 赞同：0
> 
> 时间：2012-04-10T13:20:46.537
> 
> 标签：jquery

当我使用 slideDown 时，我的框只会出现，并且在我第一次单击链接时不会 slideDown，但是每次后续单击时，它都会按预期工作：

[http://jsfiddle.net/3Gc6Q/](http://jsfiddle.net/3Gc6Q/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:24:40.580

`box.removeClass("hide");`必须在`slideDown`完成演示之后：http: [//jsfiddle.net/3Gc6Q/9/](http://jsfiddle.net/3Gc6Q/9/)：

```
$(".link").click(function(e) {

    e.preventDefault();
    var box = $("#test");

    if (box.hasClass("hide")) {

        box.slideDown(function(){box.removeClass("hide");});
    }
    else {
        box.slideUp(function() {

            box.addClass("hide");

        });

    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:24:13.693

尝试使用`slideToggle()`

```
$(".link").click(function(e) {

    e.preventDefault();
    var box = $("#test");

    box.slideToggle('slow');
});​ 
```

这将大大简化您所拥有的内容。它还可以让你删除一些在“测试”中不必要的 CSS `div`。

这是一个工作示例：http: [//jsfiddle.net/zYAcB/1/](http://jsfiddle.net/zYAcB/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:24:22.123

只需删除

```
box.removeClass("hide"); 
```

调用`slideDown`将使 div 可见。目前，当您删除“隐藏”类时，它将显示（因为它被该类的 css 隐藏），`slideDown`然后调用什么也不做。如果您不删除该类，它将按您的意愿显示。

或者，您可以在动画完成后删除该类：

```
box.slideDown(function() {
  box.removeClass("hide");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T13:24:23.247

固定：http: [//jsfiddle.net/3Gc6Q/8/](http://jsfiddle.net/3Gc6Q/8/)

# mysql - MySQL 从多个表中删除一个变量

> ID：10089613
> 
> 赞同：0
> 
> 时间：2012-04-10T13:20:55.430
> 
> 标签：mysql

我想从三个单独的表中删除三行。这是我的查询，但它似乎不起作用。

```
CREATE PROCEDURE `DB`.`deleteArticle` (IN x INT)
BEGIN

DELETE FROM articles
where article_id=x;

DELETE FROM AUTHORS
where submission_id = select submission_id from article_files where article_id=X;

DELETE FROM article_files
where article_id=X;

END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:25:05.437

试试这个

```
CREATE PROCEDURE `DB`.`deleteArticle` (IN x INT)
BEGIN

DELETE FROM articles
WHERE article_id=x;

DELETE FROM AUTHORS
WHERE submission_id IN (SELECT submission_id FROM article_files WHERE article_id=X);

DELETE FROM article_files
WHERE article_id=X;

END 
```

# android - 在一行android上创建一个包含多个参数的列表

> ID：10089618
> 
> 赞同：2
> 
> 时间：2012-04-10T13:21:08.270
> 
> 标签：android, arraylist

我是安卓新手。我想创建一个包含 4 个参数的数组列表：姓名电话号码、呼叫类型、数据，但我不知道该怎么做。有人可以帮帮我吗？

其次我想问一下 list 和 listadapter 有什么区别？

我的意思是我需要这样的东西。我需要创建一个数组，它将在日志文件中打印第一个元素[1]...第二个，依此类推。第一个元素是一个包含 4 个参数（名称、电话、类型、数据）的数组。=> 对象数组。！

```
[1] Me 07678333.. MISSED 23.06.2011

[2] JHG 9898.. MISSED 7.04.2012
.... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T13:37:25.793

例如，您可以创建一个名为 PhoneCall 的类：

```
class PhoneCall{
     String name;
     String number;
     String type;
     String date;

     PhoneCall(String name, String number, String type, String date)
     {
         this.name = name;
         this.number = number;
         this.type = type;
         this.date = date;
     } 
    //getters and setters here
} 
```

然后制作arraylist：

```
ArrayList<PhoneCall> list = new ArrayList<PhoneCall>(); 
```

并向其中添加新项目：

```
list.add(new PhoneCall(name,number,type,date)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:33:06.373

我相信您正在寻找的东西称为自定义列表视图。它涉及使用列表适配器为您的列表视图提供自定义布局。可以使用单独的布局 xml 文件设计每个元素的布局，并将其添加到列表视图中。你可以参考[这个](http://saigeethamn.blogspot.in/2010/04/custom-listview-android-developer.html)来获得一个想法。

列表视图也是一个布局元素，用于以列表格式显示数据，而列表适配器是列表视图和列表中支持的数据之间的桥梁。我希望这能解决你的疑问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:31:36.847

你应该在这里做的是创建一个类来包装你提到的所有字段名称电话号码，呼叫类型，数据）。然后，只需创建一个 List（例如实现 ArrayList），然后添加您刚刚定义的类型的对象。简单明了，对吧？

对于您的第二个问题，我不知道您所说的列表是什么意思。您的意思是 Android 中的 ListView 或 List——一种 java 数据类型。所以在 Android 编程的上下文中，我认为这里的列表是 ListView :) ListView 是一个包含许多“项目”的视图。将数据填充到 ListView 的方式可以由 ListAdapter 决定。有关更多信息，请参阅[Android 开发者网站的 ListView 教程](http://developer.android.com/resources/tutorials/views/hello-listview.html)

# mysql - jpa原生查询，选择同一张表两次问题（hibernate实现）

> ID：10089619
> 
> 赞同：3
> 
> 时间：2012-04-10T13:21:09.500
> 
> 标签：mysql, sql, database, jpa

有一个要求，我应该使用 jpa 本机查询（因为 jpa 不支持 timestampdiff 函数）。

另外我应该选择同一个表两次，例如：我有表：个人、任务等

我使用的原生查询是：“select emp.name, tsk.name, app.name, from Individual emp, Task tsk, Individual app where ......”</ p>

我想要的预期数据是：“Tom，task1，Jack”，但是给定这个本机 sql 查询，结果数据是“Jack，task1，Jack”。这意味着 app.name 会覆盖 emp.name。

如果我想得到正确的结果，我必须使用如下查询：“select emp.name, tsk.name, (select app.name from Individual app where xx.id=xx.id), from Individual emp, Task tsk , 个人应用程序在哪里......”

本机查询代码（获取错误数据）：

```
String nativeSql = "select con.first_name, app.first_name from Individual con, Task tsk,    TimeBlock tb, Timesheet ts, Individual app where con.id=ts.owner_id and tb.timesheet_id=ts.id and tb.task_id=tsk.id and tsk.approver_id=app.id";
Query query = entityManager.createNativeQuery(nativeSql); 
```

本机查询代码（可以获得正确的数据）：

```
String nativeSql = "select con.first_name, (select app.first_name from Individual app where tsk.approver_id=app.id) from Individual con, Task tsk, TimeBlock tb, Timesheet ts, Individual app where con.id=ts.owner_id and tb.timesheet_id=ts.id and tb.task_id=tsk.id and tsk.approver_id=app.id";
Query query = entityManager.createNativeQuery(nativeSql); 
```

jpql查询代码：

```
String jpql = "select con.firstName, app.firstName from Individual con, Task tsk, TimeBlock tb, Timesheet ts, Individual app where con.id=ts.owner.id and tb.timesheet.id=ts.id and tb.task.id=tsk.id and tsk.approver.id=app.id";
Query query = entityManager.createQuery(jpql); 
```

但有趣的是：

1.  我使用这个本机 sql 查询从 mysql db 搜索（使用命令行、工作台等），结果数据是正确的“Tom，task1，Jack”

2.  如果我在没有 timestampdiff 功能的情况下使用 jpql 来满足此要求，则结果数据也是正确的。

3.  刚试了jdbc，如果我在jdbc中使用本机sql查询，我也可以得到正确的数据。

jpa似乎有些问题....

因此，任何以前遇到过此类问题并知道其本质的人。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T09:14:48.673

遇到了同样的问题，只是发现你必须给列加上别名来解决问题。

这给了我错误的结果：

```
SELECT i.number, taux5_50.vatAmount, taux19_60.vatAmount
FROM Invoice i
LEFT JOIN InvoiceVATLine taux5_50 ON taux5_50.invoice_id=i.id AND taux5_50.rate=5.50
LEFT JOIN InvoiceVATLine taux19_60 ON taux19_60.invoice_id=i.id AND taux19_60.rate=19.60
WHERE ... 
```

这给了我正确的结果：

```
SELECT i.number, taux5_50.vatAmount AS taux5_50_vatAmount, taux19_60.vatAmount AS taux19_60_vatAmount
FROM Invoice i
LEFT JOIN InvoiceVATLine taux5_50 ON taux5_50.invoice_id=i.id AND taux5_50.rate=5.50
LEFT JOIN InvoiceVATLine taux19_60 ON taux19_60.invoice_id=i.id AND taux19_60.rate=19.60
WHERE ... 
```

# mysql - mysql如何知道我搜索的数据库名称

> ID：10089621
> 
> 赞同：0
> 
> 时间：2012-04-10T13:21:27.643
> 
> 标签：mysql, database, union

我自制的 php+sql 搜索引擎有一些问题。请你告诉我，我怎么知道数据库名称，从哪个结果中找到？我有几个数据库，我正在使用 SELECT + UNION ALL + SELECT 进行搜索...所以我需要知道哪个数据库是字符串，以便在图像加载器中将其用作参数。

```
$row['file']    = str_ireplace( $row['file'], '<center><A href=openfile.php?id='.$row['id'].'&base='???' target="_blank">Файл '.$row['imgno'].'</A></center>', $row['file'] ); 
```

除了在每个数据库中添加额外的行（带有类似数据库名称的字符串）并使用 .$row['base'] 之外，是否有可能实现它。?

UPD：以及如何知道表名 id DB 有很多呢？

我希望很清楚。感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:23:51.323

我认为 DATABASE() 函数会为您执行此操作。

[http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_database](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_database)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:27:02.343

在`SELECT + UNION ALL + SELECT`你可以指定数据库名称：

像

```
select *, 'db1' as databasename from db1.table1
union all
select *, 'db2' as databasename from db2.table1 
```

# android - 手势生成器

> ID：10089626
> 
> 赞同：1
> 
> 时间：2012-04-10T13:21:44.237
> 
> 标签：android, gesture

当我尝试运行 Gestures Builder 时，出现以下错误：

**无法加载/mnt/sdcard/手势。确保您有可用的存储空间。**

*   我该如何解决这个问题？

*   当我添加一个手势时，它保存在哪里？

*   如何在同一个名称下创建多个手势？我想将几个手势映射到同一个阿拉伯字母。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-28T13:41:07.877

只需创建一个具有 SD 卡的模拟器，即可解决您的问题。见附图。![图片](../Images/27114a86f4b527479808798fdabea1be.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:30:52.327

你 dw 手势生成器吗？我认为它与模拟器一起提供.. O_o 你必须在模拟器中创建，然后你可以从代码中访问它。

[手势](http://developer.android.com/resources/articles/gestures.html)

# c# - PerformanceCounterType 平均时间

> ID：10089627
> 
> 赞同：1
> 
> 时间：2012-04-10T13:22:03.230
> 
> 标签：c#, visual-studio-2010, unit-testing, performancecounter

我[为 HTTP 服务器创建了一些负载测试，](https://stackoverflow.com/questions/8990448/vs-2010-load-tests-results-with-custom-counters)其中包含简单的`Unit Tests`. 每个单元测试都会向服务器发送一个 http 请求。现在我想保留一些关于每个负载测试运行的额外信息，所以我创建了自定义性能计数器。

例如，我有一个超时计数器。每次发生超时时，我`increment`都会使用类型为 的计数器`NumberOfItems32`，因此在负载测试结束时，我可以看到总超时数。

我的问题是我想创建一个计数器来保持对 http 调用的平均响应时间。**我应该使用哪个[PerformanceCounterType](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecountertype.aspx)以及如何使用？**

**编辑**
我认为这`AverageTimer32`将是正确的使用，但[MSDN](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecountertype.aspx)描述是：

> 此类型的计数器显示采样间隔的总经过时间与在该时间段内完成的进程或操作数的比率

我不想要这个。在每次单元测试运行时，我都会计算响应时间，所以我认为使用适当的计数器只有以下代码可以工作：

```
responseTimeCounter.IncrementBy(responseTime); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:36:58.900

去`NumberOfItems32`柜台，因为你想捕捉一个数字。

# silverlight - 创建用户后或如果创建失败，任何更多的保存尝试都会多次返回 MembershipCreteStatus

> ID：10089634
> 
> 赞同：0
> 
> 时间：2012-04-10T13:22:42.003
> 
> 标签：silverlight, membership, createuser

我有一个使用 WCF 和 Membership.CreateUser 创建新用户的 Silverlight Web 应用程序。

如果我成功创建一个用户，然后再创建另一个用户，我会收到两次“用户成功创建”状态消息。或者，如果我第一次尝试创建新用户失败，比如因为用户名已经存在，那么任何进一步的尝试都会多次返回状态消息。

我的 WCF 服务代码

```
[OperationContract]
public MembershipCreateStatus CreateNewUser(string userName, string password, string email, string securityQuestion, string securityAnswer)
{
   MembershipCreateStatus status = new MembershipCreateStatus();
   MembershipUser newUser = Membership.CreateUser(userName, password, email, securityQuestion, securityAnswer, true, out status);

   return status;
} 
```

我对方法的调用

```
tmsClient.CreateNewUserCompleted += new EventHandler<CreateNewUserCompletedEventArgs>(tmsClient_CreateNewUserCompleted);
tmsClient.CreateNewUserAsync(nu.UserName, nu.Password, nu.Email, nu.SecurityQuestion, nu.SecurityAnswer); 
```

我的活动完成

```
void tmsClient_CreateNewUserCompleted(object sender, CreateNewUserCompletedEventArgs e)
{
    MembershipCreateStatus status = e.Result;
    string result = GetErrorMessage(status);
    MessageBox.Show(result);
} 
```

最后是 GetErrorMessage 方法

```
public string GetErrorMessage(MembershipCreateStatus status)
{
    switch (status)
    {
        case MembershipCreateStatus.Success:
            return "The user was successfully created.";

        case MembershipCreateStatus.DuplicateUserName:
            return "Username already exists. Please enter a different user name.";

        case MembershipCreateStatus.DuplicateEmail:
            return "A username for that e-mail address already exists. Please enter a different e-mail address.";

        case MembershipCreateStatus.InvalidPassword:
            return "The password provided is invalid. Please enter a valid password value.";

        case MembershipCreateStatus.InvalidEmail:
            return "The e-mail address provided is invalid. Please check the value and try again.";

        case MembershipCreateStatus.InvalidAnswer:
                return "The password retrieval answer provided is invalid. Please check the value and try again.";

        case MembershipCreateStatus.InvalidQuestion:
                return "The password retrieval question provided is invalid. Please check the value and try again.";

        case MembershipCreateStatus.InvalidUserName:
                return "The user name provided is invalid. Please check the value and try again.";

        case MembershipCreateStatus.ProviderError:
            return "The authentication provider returned an error. Please verify your entry and try again. If the problem persists, please contact your system administrator.";

        case MembershipCreateStatus.UserRejected:
            return "The user creation request has been canceled. Please verify your entry and try again. If the problem persists, please contact your system administrator.";

        default:
            return "An unknown error occurred. Please verify your entry and try again. If the problem persists, please contact your system administrator.";
    }
} 
```

关于为什么会发生这种情况的任何想法？发送

尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:47:43.930

我猜你`CreateNewUserCompleted`在调用方法之前添加了处理程序`CreateNewUserAsync`，然后永远不会删除它。你的`tmsClient_CreateNewUserCompleted`方法应该看起来像这样才能让它正常工作：

```
void tmsClient_CreateNewUserCompleted(object sender, CreateNewUserCompletedEventArgs e)
{
    tmsClient.CreateNewUserCompleted -= new EventHandler<CreateNewUserCompletedEventArgs>(tmsClient_CreateNewUserCompleted);
    MembershipCreateStatus status = e.Result;
    string result = GetErrorMessage(status);
    MessageBox.Show(result);
} 
```

# emacs - 过滤不包含特定属性的标题

> ID：10089637
> 
> 赞同：3
> 
> 时间：2012-04-10T13:22:48.667
> 
> 标签：emacs, org-mode

我想使用设置自定义命令

```
org-agenda-custom-commands 
```

变量，它应该选择不包含名为“ID”的属性的标题。什么是过滤表达式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T13:46:12.677

您可以使用反向匹配来查找匹配的标题`ID`。从[手册](http://orgmode.org/manual/Matching-tags-and-properties.html#Matching-tags-and-properties)

> 搜索字符串可以使用布尔运算符“&” 对于 AND 和 '|' 或。'&' 比“|”绑定得更牢固。括号当前未实现。搜索中的每个元素要么是标签，要么是匹配标签的正则表达式，要么是带有比较运算符的 PROPERTY OPERATOR VALUE 等表达式，用于访问属性值。每个元素前面都可以有“-”，以针对它进行选择，“+”是正选择的语法糖。AND 运算符“&” 当存在“+”或“-”时是可选的。以下是一些示例，仅使用标签。

[使用与议程视图中的问题匹配属性中](https://stackoverflow.com/questions/10033797/matching-property-in-agenda-view)相同的查询，您只需否定搜索，它将提供与 ID 不匹配的所有行。

```
(setq org-agenda-custom-commands
           '(("c" "MY Agenda"
          ((tags "-ID={.+}"))))) 
```

# javascript - 重新排序每个第 n 个元素的数组

> ID：10089642
> 
> 赞同：1
> 
> 时间：2012-04-10T13:22:59.503
> 
> 标签：javascript, algorithm

我在这个问题上摸不着头脑。我正在尝试编写一个函数，该函数接受一个数组`arr`和一个整数`n`，并输出一个由原始数组的每个第 n 个元素（从索引 0 开始）组成的新数组，如果需要，在到达结尾时返回开头.

例如：

```
arr = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
n = 3
output = [0, 3, 6, 9, 1, 4, 7, 2, 5, 8] 
```

或者 ：

```
arr = [0, 1, 2, 3, 4, 5, 6]
n = 2
output = [0, 2, 4, 6, 1, 3, 5] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T13:35:32.687

这应该有效：

```
function get_n_elements(arr, n) {
    if ( n === 1 ) return arr.slice();
    var i, j,
        len = arr.length,
        ret = [];
    for ( i = 0; i < n; i++ ) {
        for ( j = i; j < len; j += n ) {
            ret.push( arr[ j ] );
        }
    }
    return ret;
} 
```

# oracle - 在 Oracle 数据库中执行选择性记录复制的最佳方法是什么

> ID：10089643
> 
> 赞同：1
> 
> 时间：2012-04-10T13:23:06.680
> 
> 标签：oracle, replication

假设以下场景：我有一个包含大量数据的主数据库，在这个数据库中我有一个关键表，我将在这个示例中调用 DataOwners，DataOwners 表有 4 条记录，每条记录彼此数据库中的表直接或间接地“属于”DataOwners 的记录，我所说的属于是用外键链接到它的。我还有其他 2 个从属数据库，它们的结构与我的主数据库完全相同，它们仅通过从我的主数据库复制来更新，但 SlaveDatabase1 应该只有来自 DataOwner 2 的记录，而 SlaveDatabase2 应该只有来自 DataOwners 1 和 3 的记录，而 MasterDatabase 有DataOwners 1、2、3 和 4 的记录。

Oracle 是否有任何工具可以让我进行这种选择性记录复制？如果没有，有什么办法可以改进我的复制方法？这是：

*   向每个表添加一个触发器，该触发器将记录更改插入一组复制表中
*   在选定的从属服务器上执行复制表的命令

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:58:18.797

最简单的选择是在各种从属数据库中定义物化视图，这些从属数据库只复制您想要的数据。因此，例如，如果`A`主数据库中有一个表，那么在从数据库 1 中，您将创建一个物化视图

```
CREATE MATERIALIZED VIEW a
  <<refresh criteria>>
AS
SELECT a.*
  FROM a@to_master a,
       dataOwners@to_master dm
 WHERE a.dataOwnerID = dm.dataOwnerID
   AND dm.some_column = <<some criteria that selects DataOwner2>> 
```

而从数据库 2 具有非常相似的物化视图

```
CREATE MATERIALIZED VIEW a
  <<refresh criteria>>
AS
SELECT a.*
  FROM a@to_master a,
       dataOwners@to_master dm
 WHERE a.dataOwnerID = dm.dataOwnerID
   AND dm.some_column = <<some criteria that selects DataOwner1 & 3>> 
```

当然，如果`dataOwnerID`可以硬编码，您可以简化事情并避免进行连接。不过，我猜想，表中有一些列`DataOwners`可以标识特定所有者应复制到哪个从属设备。

假设您只想复制增量更改，您需要在主数据库的基表上创建一些物化视图日志。您可能希望在从属数据库上配置[刷新组](http://docs.oracle.com/cd/B19306_01/server.102/b14226/repmview.htm#REPLN109)，以便所有物化视图同时刷新并且在事务上彼此一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T16:56:49.800

Oracle Golden Gate 软件可以完成所有这些任务。插入/更新/删除与主数据库的顺序相同，因此可以避免外键和其他约束问题。

MasterDatabase Extract 生成一个跟踪文件，然后将数据拆分到 DB 1、2、3 和 4。

它还可以进行多种方式的复制，即 DB 1 将数据发送回主 DB。

除了金门，触发器可能是您的另一个选择。但它需要一些编程。

# c# - 使用 C# 比较两个列表并删除缺失的数字

> ID：10089644
> 
> 赞同：2
> 
> 时间：2012-04-10T13:23:19.893
> 
> 标签：c#, list, comparison

有两个列表：

```
List<int> list2 = new List<int>(new[] { 1, 2, 3, 5, 6 }); // missing: 0 and 4
List<int> list1 = new List<int>(new[] { 0, 1, 2, 3, 4, 5, 6 }); 
```

**你如何比较两个列表，在 List1 中找到缺失的数字并从 List1 中删除这些数字？更准确地说，我需要找到一种方法来指定比较的开始和结束位置。**

我想这个过程应该和这个非常相似：

**第1步。**

```
int start_num = 3; // we know that comparisons starts at number 3
int start = list2.IndexOf(start_num); // we get index of Number (3)
int end = start + 2; // get ending position
int end_num = list2[end]; // get ending number (6) 
```

现在我们在 List2 (3,5,6) 中得到了数字（和数字本身）的位置供比较

**第 2 步。**要获取 List1 中数字的位置以进行比较 - 我们可以执行以下操作：

```
int startlist1 = list1.IndexOf(start_num); // starting position
int endlist1 = list1.IndexOf(end_num); // ending position 
```

范围如下：(3,4,5,6)

**步骤 3\. 比较。**棘手的部分从这里开始，我需要帮助

基本上现在我们需要比较 (3,5,6) 处的 list2 和 (3,4,5,6) 处的 list1。缺少的数字是“4”。

```
// I have troubles with this step but the result will be:

int remove_it = 4; // or int [] 
```

**步骤 4\. 去除奇数。**

```
int remove_it = 4;
list1 = list1.Where(a => a != remove_it).ToList(); 
```

效果很好，但是如果我们有 2 个缺失的数字会发生什么？IE

```
int remove_it = 4 // becomes int[] remove_it = {4, 0} 
```

**结果**如您所料，结果是新的 List1，其中没有数字 4。

```
richTextBox1.Text = "" + string.Join(",", list1.ToArray()); // output: 0,1,2,3,5,6

textBox1.Text = "" + start + " " + start_num; // output: 2 3
textBox3.Text = "" + end + " " + end_num; // output: 4 6

textBox2.Text = "" + startlist1; // output: 3
textBox4.Text = "" + endlist1; // output: 6 
```

**你能帮我完成第3步或指出正确的方向吗？**

另外，你能说如果起始数字（start_num）是最后一个数字会发生什么，但我需要得到接下来的两个数字？在上面的示例中，数字是**3,5,6，**但它们应该与**5,6,0**或**6,0,1**或**0,1,2**没有区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:26:35.097

只回答第一部分：

```
 var list3 = list1.Intersect(list2); 
```

这将设置`list3`为`{ 0, 1, 2, 3, 4, 5, 6 } - { 0, 4 } = { 1, 2, 3, 5, 6 }`

**以及对第 1 步**的反应 ：

> int start_num = 3; // 我们知道比较从数字 3
> 开始 int start = list2.IndexOf(start_num); // 我们得到数字 (3) 的索引
> int end = start + 2; // 获取结束位置

你从哪里得到所有这些神奇的数字 (3, + 2 ) ？

我觉得你想多了，很多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:26:34.787

```
var result = list1.Intersect(list2) 
```

`.ToList`如果您确实需要将结果作为列表，则可以在末尾添加 a 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T13:38:43.733

```
 List<int> list2 = new List<int>(new[] { 1, 2, 3, 5, 6 }); // missing: 0 and 4 
        List<int> list1 = new List<int>(new[] { 0, 1, 2, 3, 4, 5, 6 });

        // find items in list 2 notin 1
        var exceptions = list1.Except(list2);

        // or are you really wanting to do a union? (unique numbers in both arrays)
        var uniquenumberlist = list1.Union(list2);

        // or are you wanting to find common numbers in both arrays
        var commonnumberslist = list1.Intersect(list2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T13:27:11.060

也许你应该使用 OrderedList 而不是 List...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T13:29:36.300

像这样的东西：

```
list1.RemoveAll(l=> !list2.Contains(l)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T13:30:37.107

您可以`Intersect`与`Skip`and结合使用`Take`来获得与范围相结合的交集逻辑（这里我们忽略了缺少 0 的事实，因为我们跳过了它）：

```
static void Main(string[] args)
{
    var list1 = new List<int> { 1, 2, 3, 4, 5 };
    var list2 = new List<int> { 0, 1, 2, 3, 5, 6 };

    foreach (var i in list2.Skip(3).Take(3).Intersect(list1))
        Console.WriteLine(i); // Outputs 3 then 5.

    Console.Read();
} 
```

虽然如果我*真的很*诚实，我不确定要问什么 - 我唯一确定的是相交部分：

```
var list1 = new List<int> { 1, 2, 3, 4, 5 };
var list2 = new List<int> { 0, 1, 2, 3, 5, 6 };

foreach (var i in list2.Intersect(list1))
    Console.WriteLine(i); // Outputs 1, 2, 3, 5. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-10T13:31:46.403

要获取存在于`list1`但不存在于的数字`list2`，请使用`Except`扩展方法：

```
IEnumerable<int> missing = list1.Except(list2); 
```

要遍历此结果以从中删除它们`list1`，您必须意识到结果，否则它将在您更改列表时从列表中读取，并且您会得到一个异常：

```
List<int> missing = list1.Except(list2).ToList(); 
```

现在您可以删除它们：

```
foreach (int number in missing) {
  list1.Remove(number);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-10T13:32:39.053

我不确定我是否理解你的问题，我希望我给你的解决方案对你有好处。

您有 2 个列表：

List list2 = new List(new[] { 1, 2, 3, 5, 6 }); // 缺失：0 和 4 列表 list1 = new List(new[] { 0, 1, 2, 3, 4, 5, 6 });

要从 list1 中删除 list2 中所有缺失的数字，我建议使用以下解决方案：构建一个缺少数字的新列表：

列表差异 = 新列表（）；

然后将您需要删除的所有数字放入此列表中。现在删除过程应该很简单，只需将您添加到 diff 中的所有元素从 list2 中删除即可。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-10T13:37:06.667

我是否正确理解该算法是：1）在列表2中取第一个数字并在列表1中找到这样的数字，2）然后从列表1中删除所有内容，直到找到第二个数字形式列表2（5）3）重复步骤2）下一个数字在列表 2 中。？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-04-10T20:11:07.650

好的，看来我没有很好地解释这个问题，对此感到抱歉。任何有兴趣的人都可以通过查看这段代码来理解我的意思：

```
 List<int> list2 = new List<int>() { 1, 2, 3, 5, 6 }; // missing: 0 and 4
        List<int> list1 = new List<int>() { 0, 1, 2, 3, 4, 5, 6 };

        int number = 3; // starting position

        int indexer = list2.BinarySearch(number);
        if (indexer < 0)
        {
            list2.Insert(~index, number); // don't look at this part
        }

        // get indexes of "starting position"
        int index1 = list1.Select((item, i) => new { Item = item, Index = i }).First(x => x.Item == number).Index;
        int index2 = list2.Select((item, i) => new { Item = item, Index = i }).First(x => x.Item == number).Index;

        // reorder lists starting at "starting position"
        List<int> reorderedList1 = list1.Skip(index1).Concat(list1.Take(index1)).ToList(); //main big
        List<int> reorderedList2 = list2.Skip(index2).Concat(list2.Take(index2)).ToList(); // main small

        int end = 2; // get ending position: 2 numbers to the right
        int end_num = reorderedList2[end]; // get ending number

        int endlist1 = reorderedList1.IndexOf(end_num); // ending position

        //get lists for comparison
        reorderedList2 = reorderedList2.Take(end + 1).ToList();
        reorderedList1 = reorderedList1.Take(endlist1 + 1).ToList();

        //compare lists
        var list3 = reorderedList1.Except(reorderedList2).ToList();
        if (list3.Count != 0)
        {
            foreach (int item in list3)
            {
                list1 = list1.Where(x => x != item).ToList(); // remove from list
            }
        }
        // list1 is the result that I wanted to see 
```

如果有任何方法可以优化此代码，请通知我。干杯。

# android - 在 AndEngine 中限制 FPS

> ID：10089649
> 
> 赞同：0
> 
> 时间：2012-04-10T13:23:32.570
> 
> 标签：android, andengine

我可以设置最大fps吗？有没有办法限制andengine中的fps？我认为这很容易，但我找不到如何去做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T13:28:06.257

是的。

而不是`new Engine(...)`，使用`new LimitedFPSEngine(EngineOptions pEngineOptions, int pFramesPerSecond);`.

# .net - 将复杂对象作为参数传递给 JSON WCF 方法

> ID：10089650
> 
> 赞同：0
> 
> 时间：2012-04-10T13:23:42.287
> 
> 标签：.net, wcf, wcf-rest

我有以下方法，过滤器参数是键值对的二维数组。经过一番研究后，一个 Post 方法似乎更有意义，我将如何重写该方法以成为一个帖子？

```
[WebGet(UriTemplate = "/tools/data/getall?tool={tool}&filters={filters}")]
public JsonArray GetAll(string tool, string filters)
{
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:52:34.953

为了更改您的上述发布方法，它看起来如下所示：

```
[WebInvoke(UriTemplate = "/tools/data/SearchAll")]
public JsonArray SearchAll(string tool, Dictionary<int,string> filters)
{
} 
```

上述方法的 requestBody 可能如下所示（您可以使用 Fiddler 进行检查）：

```
{
"tool": "enter the value of tool parameter", 
"filters" : 
 {
  {"Key":1,"Value":"Test"},
  {"Key":2,"Value":"Test1"}
 }
} 
```

笔记：

1.  假设您的键值对是 int,string

2.  当您有 POST 方法时，不支持查询字符串。

3.  还要重命名您的方法，使其根据 REST 主体有效，其中方法名称指示服务器上执行任务的资源。具有 WebInvoke 属性的 GetAll 方法不是一个好习惯。

4.  WebInvoke 的默认方法是“POST”，因此我没有明确指定它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:42:21.020

要使其成为帖子，您需要将更改`WebGet`为`WebInvoke`。要使用 quest 的主体传递变量，您只需将 Serializable 对象添加到参数列表中。所以，如果你有一个，改变你的方法是`Method``POST``Dictionary<string,string>`

```
[WebInvoke(Method = "POST", UriTemplate = "/tools/data/getall?tool={tool}&filters={filters}")]
public JsonArray GetAll(string tool, string filters, 
                        Dictionary<string,string> whatever) 
```

# perl - Perl 会话管理

> ID：10089657
> 
> 赞同：0
> 
> 时间：2012-04-10T13:24:06.397
> 
> 标签：perl, session, cgi

我[`CGI::Session`](https://metacpan.org/module/CGI%3a%3aSession)在我的 Perl Web 应用程序中使用会话管理。我可以使用`file`会话驱动程序创建会话，但无法获取现有会话并且无法访问会话的存储参数。

我正在尝试获取现有会话，但它正在创建新会话，并且查询字符串`$CGISESSID`都相同，但`$session`在这里我得到的是不同的，它是一个全新的会话，所以我无法从会话中获取存储的参数。请帮我解决这个问题。

谢谢，克里希纳

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T05:21:17.010

正如其他人指出的那样，如果您在每个请求中都获得新会话，则您没有在 cookie 中发送会话 ID。如果您使用 CGI.pm 来处理您的 HTTP 标头，请执行以下操作：

```
print $q->header(-cookie => $session->cookie); 
```

如果您在应用程序框架中使用 CGI::Application，请在 setup() 或 cgiapp_init() 中执行此操作（如果有的话）

```
$self->header_add(-cookie => $session->cookie); 
```

或者，您可以使用 CGI::Session 自己的 header()，默认情况下使用'CGI::header 方法：

```
print $session->header() 
```

建议使用 CGI::Session 的实用程序（例如 cookie 和/或标头），因为它们尊重 cookie 的过期设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:30:10.437

您在打印 html 内容之前是否在打印 $session->header() ？

# c - C 创建有序优先队列

> ID：10089662
> 
> 赞同：4
> 
> 时间：2012-04-10T13:24:15.687
> 
> 标签：c, algorithm, data-structures, priority-queue

我正在尝试实现 dijkstra 的寻路算法，并且需要某种优先级队列来存储信息。

在过去，例如 fifo 或 filo PQ，我只使用了一个数组，然后使用了两个指向当前插入和当前“查找”位置的指针，然后是“删除”，并且项目将查找位置向上移动一次。

但是对于dijkstra，我需要一个按重量（或当前距离）排序的PQ，然后查看PQ顶部的那个，我将如何在C中实现它？

谢谢你的时间！

编辑：人们提到了二进制堆，你介意稍微提示一下如何开始吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T13:25:56.570

最简单的选择是实现基于 C 数组的[二进制堆。](https://en.wikipedia.org/wiki/Binary_heap)

# php - 来自多个数据库表的Mysql联合

> ID：10089666
> 
> 赞同：4
> 
> 时间：2012-04-10T13:24:28.463
> 
> 标签：php, mysql, union

我有一组数据库，它们有一个具有**相同架构**的表。所以，我`UNION`在这张表上做一个显示所有数据库的记录，效果很好。

但是，现在我必须检测哪一行属于哪个数据库/表，因为我需要修改那个特定的记录。我在获取 时找到了[此](https://stackoverflow.com/questions/409705/mysql-selecting-data-from-multiple-tables-all-with-same-structure-but-differen)链接`UNION`，但找不到确定行<->表关系的逻辑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T13:34:15.407

不太确定您的情况允许什么，我的建议是在其中添加一个带有数字的附加字段：

```
select field1, field2, 1 as db from db1.tb
UNION
select field1, field2, 2 as db from db2.tb1
UNION
select field1, field2, 3 as db from db1.tb4
UNION 
```

使用所述字段，您可以识别每条记录的来源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T13:27:59.083

试试这个：

```
(SELECT *, 'db1' as DB_NAME from db1..table1)
union
(SELECT *, 'db2' as DB_NAME from db2..table1)
union
(SELECT *, 'db3' as DB_NAME from db3..table1)
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T13:28:19.347

您可以在查询中添加一个带有数据库名称的列

```
(SELECT *,'db1' as db from db1..us_music where `genre` = 'punk')
UNION
(SELECT *,'db2' as db from db2..us_music where `genre` = 'punk') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-18T19:48:44.537

假设您有一个完全独立的数据库、Oracle、SQL Server 或数据驻留在无法直接 UNIONed 的单独服务器上（这发生在我们的 ( *PeopleSoft/Oracle* ) ERP 数据库和工程数据库 ( *MySQL* ) 中）测试结果）。您可以在其中一个 DB 上进行查询，将结果集保存在内存中并构造如下查询：

```
SELECT '' AS SN, 'PRD0547016' AS Prdn_ID UNION
SELECT '' AS SN, 'PRD0547435' AS Prdn_ID UNION
SELECT sn, pid AS Prdn_ID
    FROM build left join product on prod_idx=product.idx WHERE sn='23456-1' 
       AND PID not in ('dgh')
        ORDER BY Prdn_ID; 
```

在这种特殊情况下，我最终得到：

```
'23456-1', 'pid 2'
'23456-1', 'pid 3'
'', 'PRD0547016'
'', 'PRD0547435' 
```

我本来想 SELECT INTO, yada, yada ...，但是将文件从服务器传输到服务器，创建临时表等等；编程太多了，我敢打赌这也是计算速度最快的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T13:26:30.663

试试 DATABASE() 函数

[http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_database](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_database)

# php - 创建文件夹并在不存在时插入

> ID：10089668
> 
> 赞同：0
> 
> 时间：2012-04-10T13:24:36.290
> 
> 标签：php

我想知道是否有人可以帮助我。

我正在使用 Aurigma 的图像上传器软件来允许用户上传他们访问的位置的图像。信息通过如下所示的脚本保存：

```
<?php

//This variable specifies relative path to the folder, where the gallery with uploaded files is located.
//Do not forget about the slash in the end of the folder name.
$galleryPath = 'UploadedFiles/';

require_once 'Includes/gallery_helper.php';

require_once 'ImageUploaderPHP/UploadHandler.class.php';

/**
 * FileUploaded callback function
 * @param $uploadedFile UploadedFile
 */
function onFileUploaded($uploadedFile) {

  $packageFields = $uploadedFile->getPackage()->getPackageFields();
  $username=$packageFields["username"];
  $locationid=$packageFields["locationid"];

  global $galleryPath;

  $absGalleryPath = realpath($galleryPath) . DIRECTORY_SEPARATOR;
  $absThumbnailsPath = $absGalleryPath . 'Thumbnails' . DIRECTORY_SEPARATOR;

  if ($uploadedFile->getPackage()->getPackageIndex() == 0 && $uploadedFile->getIndex() == 0) {
    initGallery($absGalleryPath, $absThumbnailsPath, FALSE);
  }

  $locationfolder = $_POST['locationid'];
  $locationfolder = preg_replace('/[^a-z0-9_\-\.()\[\]{}]/i', '_', $locationfolder);
  if (!is_dir($absGalleryPath . $locationfolder)) {
    mkdir($absGalleryPath . $locationfolder, 0777);
  }

  $dirName = $_POST['folder'];
  $dirName = preg_replace('/[^a-z0-9_\-\.()\[\]{}]/i', '_', $dirName);
  if (!is_dir($absGalleryPath . $dirName)) {
    mkdir($absGalleryPath . $dirName, 0777);
  }

  $path = rtrim($dirName, '/\\') . '/';

  $originalFileName = $uploadedFile->getSourceName();

  $files = $uploadedFile->getConvertedFiles();

  // save converter 1

  $sourceFileName = getSafeFileName($absGalleryPath, $originalFileName);
  $sourceFile = $files[0];
  /* @var $sourceFile ConvertedFile */
  if ($sourceFile) {
    $sourceFile->moveTo($absGalleryPath . $sourceFileName);
  }

  // save converter 2   

  $thumbnailFileName = getSafeFileName($absThumbnailsPath, $originalFileName);
  $thumbnailFile = $files[1];
  /* @var $thumbnailFile ConvertedFile */
  if ($thumbnailFile) {
    $thumbnailFile->moveTo($absThumbnailsPath . $thumbnailFileName);
  }

  //Load XML file which will keep information about files (image dimensions, description, etc).
  //XML is used solely for brevity. In real-life application most likely you will use database instead.
  $descriptions = new DOMDocument('1.0', 'utf-8');
  $descriptions->load($absGalleryPath . 'files.xml');

  //Save file info.
  $xmlFile = $descriptions->createElement('file');
  $xmlFile->setAttribute('name', $_POST['folder'] . '/' . $originalFileName);
  $xmlFile->setAttribute('source', $sourceFileName);
  $xmlFile->setAttribute('size', $uploadedFile->getSourceSize());
  $xmlFile->setAttribute('originalname', $originalFileName);
  $xmlFile->setAttribute('thumbnail', $thumbnailFileName);
  $xmlFile->setAttribute('description', $uploadedFile->getDescription());
  //Add additional fields
  $xmlFile->setAttribute('username', $username);
  $xmlFile->setAttribute('locationid', $locationid);
  $xmlFile->setAttribute('folder', $dirName);
  $descriptions->documentElement->appendChild($xmlFile);
  $descriptions->save($absGalleryPath . 'files.xml');
}

$uh = new UploadHandler();
$uh->setFileUploadedCallback('onFileUploaded');
$uh->processRequest();
?> 
```

除了原始脚本之外，我还添加了创建文件夹的代码，其名称基于当前的“locationid”。这如下所示。

```
 $locationfolder = $_POST['locationid'];
  $locationfolder = preg_replace('/[^a-z0-9_\-\.()\[\]{}]/i', '_', $locationfolder);
  if (!is_dir($absGalleryPath . $locationfolder)) {
    mkdir($absGalleryPath . $locationfolder, 0777);
  } 
```

我喜欢合并的是一个检查，看看是否有一个文件夹已经设置了当前的'locationid'值，如果没有创建文件夹。我绝对不是PHP专家，但我知道要检查文件是否存在，`if(file exists....)`可以使用，但我只是想知道是否有人可以告诉我如何实现对文件夹名称的检查？

非常感谢

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:29:02.110

我认为[is_dir()](http://hu2.php.net/manual/en/function.is-dir.php)是您正在寻找的。

**更新：**

您拥有的代码：

```
if (!is_dir($absGalleryPath . $locationfolder)) {
   mkdir($absGalleryPath . $locationfolder, 0777);
} 
```

做你想要的。它会检查文件夹，如果不存在，则会为您创建一个（使用 CHMOD 777）。看不出你的问题是什么...

# asp.net - ASP.NET 使用 ClientSideEvents 检查用户名可用性

> ID：10089674
> 
> 赞同：1
> 
> 时间：2012-04-10T13:24:49.970
> 
> 标签：asp.net, devexpress

这是我在这个最伟大的网站上的第一篇文章。

是否有可能从 OnCheckUserName 函数更改 isValid 属性？如果可以，我该怎么做？

实际上在这个例子中有一个使用网络服务的代码块：

```
 <script type="text/javascript">
       function OnloginIDValidation(s, e) {
            if (e.value.toString().length > 0) {
                e.errorText = "UserName is not available";
                PageMethods.CheckUserName(e.value.toString(), OnCheckUserName);
            }
        }
        function OnCheckUserName(unavailable) {
            if (unavailable == true) {
                e.isValid = true;
            }
            else if (unavailable != true) {
                e.isValid = false;
            }
        }
    </script>

    <asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
     <dx:ASPxTextBox ID="txt_loginID" runat="server" AssociatedControlID="txt_loginID">
          <InvalidStyle BackColor="#FFF5F5">
               <Border BorderColor="Red" BorderStyle="Solid" BorderWidth="1px" />
          </InvalidStyle>
          <ClientSideEvents Validation="OnloginIDValidation" />
     </dx:ASPxTextBox>
    </asp:Content> 
```

```
 [WebMethod]
    public static bool CheckUserName(string userName)
    {
        if (Membership.GetUser(userName) != null)
        {
          return true;
        }
        else
        {
          return false;
        }
    }

    private void ApplyValidationSummarySettings()
    {
        vsValidationSummary1.RenderMode = (ValidationSummaryRenderMode)Enum.Parse(typeof(ValidationSummaryRenderMode), "BulletedList");
        vsValidationSummary1.ShowErrorAsLink = true;
    }

    private void ApplyEditorsSettings()
    {
        ASPxEdit[] editors = new ASPxEdit[] {txt_loginID};
        foreach (ASPxEdit editor in editors)
        {
            editor.ValidationSettings.ValidateOnLeave = true;
            editor.ValidationSettings.SetFocusOnError = true;
        }
    } 
```

它不起作用
我希望能帮助我如何解决它。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:32:22.287

使用 JQuery 和 AJAX 检查以下链接以获取用户名可用性

[http://www.aspsnippets.com/Articles/Check-UserName-Availability-in-ASP.Net-using-JQuery.aspx](http://www.aspsnippets.com/Articles/Check-UserName-Availability-in-ASP.Net-using-JQuery.aspx)

[http://www.aspsnippets.com/Articles/Check-Username-Availability-in-ASP.Net-using-AJAX-PageMethods.aspx](http://www.aspsnippets.com/Articles/Check-Username-Availability-in-ASP.Net-using-AJAX-PageMethods.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:44:10.373

将[ASPxTextBox.ClientInstanceName](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxEditorsASPxEditBase_ClientInstanceNametopic)属性设置为某个值，例如 textBox1。然后在方法中使用[ASPxClientTextBox.SetIsValid](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxEditorsScriptsASPxClientEdit_SetIsValidtopic)`OnCheckUserName`方法。像这样：

```
 function OnCheckUserName(unavailable) {
        textBox1.SetIsValid(unavailable == true);
    } 
```

# windows - winforms、web表单、windows表单的区别

> ID：10089675
> 
> 赞同：4
> 
> 时间：2012-04-10T13:24:50.977
> 
> 标签：windows, winforms, forms

现在我正在从事 c# windows 应用程序开发。但我担心的是我想知道 c# 中的 winforms 之间有什么区别。

c#中的winforms和windows窗体有什么区别？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T13:29:21.933

Winforms 和 Windows 窗体是一回事。Winforms 是 Windows 窗体的简称。

来自[维基百科](http://en.wikipedia.org/wiki/Windows_Forms)：

> Windows 窗体 (WinForms) 是作为 Microsoft .NET Framework 一部分包含的图形应用程序编程接口 (API) 的名称

[来自MSDN](http://social.msdn.microsoft.com/Forums/en-US/winformsapplications/thread/74b519f3-1173-4095-b4b7-e37dbd5b6bd3/)答案的附加信息：

> 根据我的理解，您想了解基于 Windows 的应用程序和使用 c# 进行 WinForms 应用程序开发之间的区别。基于Windows的应用程序是指在Windows操作系统下开发的应用程序，不包括在Linux和Unix等其他操作系统下开发的应用程序。
> 
> 但是，.net 中有两种基于 Windows 的应用程序，WinForm 和 Web 应用程序。您可以开发几种不同类型的基于 Windows 的应用程序。您可以创建利用 .NET Framework 强大功能的 Windows 窗体和 Windows 服务应用程序，也可以使用 Visual C++ 创建基于 Windows Win32 的应用程序
> 
> 但是，WinForm 应用程序是一种托管应用程序，在.Net 平台上开发。它是基于 Windows 的应用程序的扩展。.NET Framework 中包含的 Windows 窗体类旨在用于 GUI 开发。您可以轻松地创建命令窗口、按钮、菜单、工具栏和其他屏幕元素，并具有适应不断变化的业务需求所需的灵活性。本节中的主题提供有关如何使用 Windows 窗体提供的功能的详细信息。

# php - JSON解码后PHP访问对象属性@property

> ID：10089680
> 
> 赞同：1
> 
> 时间：2012-04-10T13:25:11.047
> 
> 标签：php, json

进行 JSON 解码后，我得到以下信息：

```
[0] => stdClass Object
        (
            [@type] => d
            [@rid] => #8:0
            [@version] => 4
            [@class] => users
            [email] => xyz@something.com
            [username] => SomeName
            [password] => password
            [out] => Array
                (
                    [0] => #7:1
                )

        )

... 
```

如何访问对象的`@rid`或`@class`属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:28:13.363

用于`$t = json_decode($var, true)`获取关联数组¹
然后您可以通过以下方式访问它`$t['@type']`

[¹ [json_decode 的第二个参数](http://php.net/json_decode#refsect1-function.json-decode-parameters)：当为 TRUE 时，返回的对象将被转换为关联数组。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T13:38:59.450

您可以使用以下方式访问这些变量：`$obj->{"@type"}`。

# c# - 如何更改 DataContractSerializer 文本编码？

> ID：10089682
> 
> 赞同：12
> 
> 时间：2012-04-10T13:25:24.323
> 
> 标签：c#, .net, wcf, serialization, character-encoding

写入流时，`DataContractSerializer`使用不同于 Unicode-16 的编码。如果我可以强制它写入/读取 Unicode-16，我可以将它存储在 SQL CE 的`binary`列中并使用`SELECT CONVERT(nchar(1000), columnName)`. 但它的方式是，我无法阅读它，除非以编程方式。

我可以更改使用的编码`System.Runtime.Serialization.DataContractSerializer`吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-10T15:37:31.197

DataContractSerializer 的`WriteObject`方法具有写入 a`Stream`或 a `XmlWriter`(and `XmlDictionaryWriter`) 的重载。重载将`Stream`默认为 UTF-8，因此您需要使用另一个。使用以 UTF-16 编写 XML 的 XML Writer 实例可以满足您的需求，因此您可以执行@Phil 建议的操作，也可以使用`XmlDictionaryWriter.CreateTextWriter`您将 an`Encoding.Unicode`作为参数传递给它的 writer 返回。

```
public class StackOverflow_10089682
{
    [DataContract(Name = "Person", Namespace = "http://my.namespace")]
    public class Person
    {
        [DataMember]
        public string Name { get; set; }
        [DataMember]
        public int Age { get; set; }
    }
    public static void Test()
    {
        MemoryStream ms = new MemoryStream();
        XmlDictionaryWriter writer = XmlDictionaryWriter.CreateTextWriter(ms, Encoding.Unicode);
        DataContractSerializer dcs = new DataContractSerializer(typeof(Person));
        Person instance = new Person { Name = "John Doe", Age = 33 };
        dcs.WriteObject(writer, instance);
        writer.Flush(); // Don't forget to Flush the writer here
        Console.WriteLine("Decoding using UTF-16: {0}", Encoding.Unicode.GetString(ms.ToArray()));
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T13:37:10.580

您是否尝试过使用 XmlWriterSettings？就像是

```
var s = new DataContractSerializer (typeof(Thing));

using(var wr = XmlTextWriter.Create(
    @"test.xml", new XmlWriterSettings{Encoding=Encoding.UTF32}))
{
    s.WriteObject(wr, new Thing{Foo="bar"});
}

public class Thing
{   
    public string Foo { get; set; }
} 
```

指定您需要的编码。

# c# - Crystal Report 2011 无故缺少数据库名称，在某些电脑上不起作用

> ID：10089684
> 
> 赞同：0
> 
> 时间：2012-04-10T13:25:34.657
> 
> 标签：c#, .net, visual-studio, crystal-reports

我使用 Crystal Report 2011 制作了一份报告，它在大多数计算机上都可以正常工作，但并非所有计算机都以这种方式丢失了数据库名称。即使我使用代码输入了名称，也使用其属性和服务器配置正确更新了它。它在大多数电脑上都可以正常工作，但很少有电脑会错过它，我重新安装了水晶报告运行时，但它没有工作。我附上错误图像。![在此处输入图像描述](../Images/197692c23a8df99db74f66eb427a3dd0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:01:07.820

加载报告后调用以下函数。

```
public void SetReportLogon(ReportDocument rptDoc)
    {
        if (rptConnection.ServerName == null || rptConnection.ServerName != DBHost)
            rptConnection.ServerName = DBHost;
        if (rptConnection.ServerName == null || rptConnection.DatabaseName != DBName)
            rptConnection.DatabaseName = DBName;

        rptConnection.UserID = DBUserID;
        rptConnection.Password = DBPassword;

        foreach (ReportDocument subRpt in rptDoc.Subreports)
        {
            foreach (Table crTable in subRpt.Database.Tables)
            {
                crTable.LogOnInfo.ConnectionInfo.AllowCustomConnection = true;
                TableLogOnInfo logInfo = crTable.LogOnInfo;                    
                logInfo.ConnectionInfo = rptConnection;
                crTable.ApplyLogOnInfo(logInfo);
            }
        }

        foreach (Table crTable in rptDoc.Database.Tables)
        {
            crTable.LogOnInfo.ConnectionInfo.AllowCustomConnection = true;
            TableLogOnInfo loi = crTable.LogOnInfo;
            loi.ConnectionInfo = rptConnection;
            crTable.ApplyLogOnInfo(loi);
        }            
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:05:35.700

您是否使用集成安全性？（该对话框同时勾选了用户/通行证和集成安全性——这相互矛盾）。

请粘贴您用于设置 TableLogonInfo 的代码

# asp.net-mvc-3 - 如何安全地锁定 ASP.NET MVC3 会话？

> ID：10089686
> 
> 赞同：1
> 
> 时间：2012-04-10T13:25:40.047
> 
> 标签：asp.net-mvc-3, session, concurrency, session-state

我想以线程安全的方式修改 ASP.NET MVC3 控制器（需要 SessionState）中的 Session 变量。我应该锁定什么对象？

# drupal - Drupal 上下文链接未显示在主页上

> ID：10089687
> 
> 赞同：0
> 
> 时间：2012-04-10T13:25:44.453
> 
> 标签：drupal, drupal-7

我有一个网站，想给用户有限的访问权限，但让他们能够编辑每个页面上的所有块，我的主导航和侧面导航只是坐在一个块中，但我不能让鳕鱼轮在那个时候出现用户悬停在上面。

在权限中，我检查了使用上下文链接，但它似乎仍然无法正常工作。

我该如何解决这个问题？我没有检查权限区域中的某个框吗？如果是这样，我应该检查哪些？

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-23T08:37:27.963

你使用主题开发模块吗？它需要开发。禁用该模块并重新加载。还尝试刷新缓存。

我意识到已经过去一年半了，但是我刚刚遇到了这个问题，并在寻找解决方案时发现了您的帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:53:12.063

确保

```
<?php if ($action_links): ?><ul class="action-links"><?php print render($action_links); ?></ul><?php endif; ?> 
```

在你的 page.tpl.php

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T07:35:38.760

尝试检查“**使用上下文链接**”权限。

只需转到**admin/people/permissions#module-contextual**。

希望这行得通……穆罕默德。

# eclipse - 如何更新 eclipse，虽然找不到一些存储库

> ID：10089694
> 
> 赞同：4
> 
> 时间：2012-04-10T13:26:15.093
> 
> 标签：eclipse, helios

一段时间以来，我想使用 eclipse 的更新功能。但是每次都找不到一些（可能是过时的）存储库。我仍然希望其他部分更新，但这个错误只会阻止一切。

我该如何解决这个问题，即修改已检查的存储库列表？代理设置绝对正确，因为“安装新软件”工作正常。

错误信息：

```
Some sites could not be found.  See the error log for more detail.
HTTP Server 'Service Unavailable': org.apache.maven/content.xml
HttpClient connection error response code 503.
No repository found at maven.apache.org.
No repository found at subclipse.tigris.org/.
No repository found at github.com/cbeust/testng-eclipse.git.
No repository found at download.eclipse.org/mat/1.0/update-site/.
No repository found at download.eclipse.org/tools/orbit/downloads/drops/R20100519200754/updateSite/.
HTTP Server 'Service Unavailable': org.apache.maven.plugins/content.xml
HttpClient connection error response code 503.
No repository found at github.com/cbeust/testng-eclipse.
No repository found at beust.com/eclipse.
Unable to read repository at dev2devclub.bea.com/updates/eclipse-3.3/wls-plugins/content.xml.
The server dev2devclub.bea.com failed to respond 
```

（http:// 和 https:// 因超链接限制而被删除）

从关于对话框：

> 版本：Helios Service Release 2 / Build id：20110301-1815

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-10T14:10:37.933

在首选项`update`中，在顶部的搜索框中键入。选择**可用更新站点**，您可以在此处取消选中或删除不再需要的站点。

# java - 收到错误说文件不会在 Java 中打开...知道为什么会这样吗？

> ID：10089705
> 
> 赞同：1
> 
> 时间：2012-04-10T13:26:37.367
> 
> 标签：java, fileinputstream

我想我真的很接近，但我无法打开一个名为 LocalNews.txt 的文件。错误说找不到指定的文件。

```
 String y = "LocalNews.txt";
FileInputStream fstream = new FileInputStream(y);
DataInputStream in = new DataInputStream(fstream);
BufferedReader br = new BufferedReader(new InputStreamReader(in)); 
```

文件名是名为 News 的库中的 LocalNews.txt ......有人知道为什么文件不会打开吗？

该文件位于我正在处理的同一个 Java 项目中。

错误：LocalNews.txt（系统找不到指定的文件）

项目名为Bst，子包newsFinder中的包为src，存放文本文件的库名为News。

发现它正在寻找

C:\EclipseIndigoWorkspace1\Bst\bin\LocalNews.txt

但我想让它看进去（我相信）

C:\EclipseIndigoWorkspace1\Bst\News\LocalNews.txt

但是，如果我将上述 url 设为字符串，则会出现错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:28:38.900

```
String y = "LocalNews.txt"; 
```

改为使用

```
String y = "path from root/LocalNews.txt"; //I mean the complete path of the file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T13:28:43.153

您的程序可能找不到该文件，因为它正在另一个文件夹中查找。

尝试使用绝对路径，例如

```
String y = "c:\\temp\\LocalNews.txt"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T13:46:48.947

通过“名为新闻的库”，我假设您的意思是像 News.jar 这样的 jar 文件，它位于类路径中并包含`LocalNews.txt`您需要的文件。如果是这种情况，那么您可以通过调用来获取它的 InputStream：

```
InputStream is = Thread.currentThread().getContextClassLoader()
    .getResourceAsStream("LocalNews.txt"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T13:46:45.420

利用

```
 System.out.println(System.getProperty("user.dir") ); 
```

找出您当前的目录是什么。然后你会确定你的文件是否在当前目录中。如果不是，那么您必须指定路径，以便它在正确的目录中查找。

另外，试试这个 -

```
 File file = new File (y);
     System.out.println(file.getCanonicalPath()); 
```

这将告诉您文件在系统上的确切路径，前提是您的文件位于当前目录中。如果没有，那么您知道您的文件不在当前目录中。

# c# - 以编程方式安装多台打印机的最有效方法

> ID：10089708
> 
> 赞同：0
> 
> 时间：2012-04-10T13:26:45.140
> 
> 标签：c#, python, com, printing, automation

所以我在工作中从事 IT 工作，我正在尝试将一些日常工作自动化。我们有大约 5 台打印机，我想编写一个脚本来安装所有这些打印机。

最好的方法是什么？什么可能是最简单的语言/库？我在 Python、PHP 和 Javascript 方面相当胜任（显然不适合这个），并且我在 C# 中工作了一点（非常少，主要是 asp.net 的东西），但我不反对选择以另一种语言启动/工作以尝试实现此功能。

据我所见，我的两个主要选择是使用 rundll printui 运行 shell 操作，或者可能使用 COM 对象（我对 COM 的了解有限）。还有其他有效的方法吗？

对不起，如果这个问题有一些主观性 - 如果有人愿意，我很乐意提供我正在尝试编写的伪代码。我也很乐意改进这个问题 - 我尽量不要过于宽泛，但即使经过一些研究，我对实施的理解仍然不完整。

编辑：注意，这主要用于 Windows Vista 和 7。我们有一两台运行 XP 的机器，但它们并不重要，如果需要，可以手动完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:13:30.413

大多数 IT 人员可能会通过 VBScript 或其他方式（以及组策略技巧）使用 PrintUI，但没有理由可以在 Python 中做同样的事情。

使用 PrintUI 进行打印管理的几个很好的资源：

[命令行打印机控制](http://www.robvanderwoude.com/2kprintcontrol.php)

[布鲁斯的打印页](http://members.shaw.ca/bsanders/FAQPrinting.htm)

在 Python 中，您只需使用`subprocess`或类似方法进行调用。

作为一个非常简单的示例，将驻留在打印服务器上的网络打印映射到某处：

```
import subprocess
subprocess.call(r'RUNDLL32 PRINTUI.DLL,PrintUIEntry /gd /c\\computername /n\\printservername\printer') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:36:34.450

在 Windows 系统上，我相信您可以只使用 Print Migrator ( [XP](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=25311)，[Vista](http://technet.microsoft.com/en-us/library/cc753109%28v=ws.10%29.aspx) )。不像编写自己的脚本那样通用，但可能要容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-13T18:18:09.643

迟到了，但也许可以帮助部分答案……如果您使用的是 .inf 文件。在这种情况下是针对本地打印机，

**>>>> 要在没有任何向导的情况下执行此操作，必须对驱动程序进行签名。**

**视窗 7**：

安装：

*   第一个命令安装：`RUNDLL32 PRINTUI.DLL,PrintUIEntry /if /b "Printer name" /f "driver.inf" /r "com1" /m "driver model name" /h "Intel"`
*   第二条命令设置默认打印机：`RUNDLL32 PRINTUI.DLL,PrintUIEntry /y /n "Printer name"`
*   对于安装，您只需要一个命令。用usb可以改“com1”，选择最常用的“usb001”。

卸载：

要卸载打印机，您需要 3 个命令并严格遵循以下顺序：

1.  首先，您需要删除您可以在“设备和打印机”中看到的所有具有该名称的打印机：`RUNDLL32 PRINTUI.DLL,PrintUIEntry /dl /n "Printer Name" /h "Intel"`
2.  第二个命令是删除打印机驱动程序：`RUNDLL32 PRINTUI.DLL,PrintUIEntry /dd /m "driver model name" /h "Intel"`. 之后你就看不到打印机和驱动了，但是如果你拔掉usb设备再插上驱动会自动安装。这是因为windows添加了驱动安装包`C:\Windows\System32\DriverStore\FileRepository`，我们需要用第三条命令卸载它。
3.  第三个命令将删除安装驱动程序时由 windows 创建的 oem*.inf。要完成此任务，您需要 2 个命令，第一个是搜索 Windows 为您创建的 oem*.inf 的名称：使用此`pnputil.exe -e`显示所有 oem*.inf 并使用手中的名称使用此`pnputil.exe -f -d oem5.inf`（更改oem5.inf 对应你的 inf 文件）

我使用 C 和 Visual C++6 以编程方式完成了这些任务 - 使用此命令，除了搜索 oem*.inf 名称，您需要在 .inf 下解析所有 .inf 文件`C:\Windows\Inf\`。另一个自动化参数是使用 /q 在不通知用户的情况下运行。

使用 cli 安装时需要小心...不要为同一台打印机执行两次安装，Windows 会创建一个随机名称，就像您安装打印机 B 一样，Windows 将重命名为打印机 B (copy_A) 或其他名称如果打印机 B 已经存在。如果您需要卸载，则需要先删除两台打印机，然后再执行第二条命令卸载驱动程序。

对于需要更改参数的远程打印机，请参阅[http://technet.microsoft.com/en-us/library/ee624057.aspx](http://technet.microsoft.com/en-us/library/ee624057.aspx)

另请参阅有关 devcon 的代码[https://code.msdn.microsoft.com/windowshardware/DevCon-Sample-4e95d71c](https://code.msdn.microsoft.com/windowshardware/DevCon-Sample-4e95d71c)

# ms-office - 在服务器上直接编辑 Microsoft Office 文件（Plone）

> ID：10089712
> 
> 赞同：1
> 
> 时间：2012-04-10T13:26:55.527
> 
> 标签：ms-office, plone, webdav

是否可能出现以下行为（使用 Linux 人员不太熟悉的 Microsoft Office 的某些功能）

*   将 Microsoft Excel（或 Plone 中的其他办公文件）上传为文件内容类型

*   节省

*   下次单击该文件时，它会直接在 Microsoft Excel 中打开

*   在 Excel 中按保存时，它会直接更新服务器上的文件，而不是本地临时副本

我认为 Microsoft Office 提供了一些 API 来做这样的事情，但我不知道它们是如何工作的。可能是一些 Webdav URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:56:01.103

启用外部编辑和使用[Zope External Editor Client](http://plone.org/products/zope-externaleditor-client) ( [PYPI](http://pypi.python.org/pypi/collective.zopeedit) ) 应该可以做到这一点（对于基于 Archetype 的内容类型），但它必须安装在所有客户端机器上，并且可能会出现问题。开发版本还应该支持基于敏捷的内容类型。

# sql-server - 如何从数据库中导出我的视图？

> ID：10089713
> 
> 赞同：1
> 
> 时间：2012-04-10T13:26:59.013
> 
> 标签：sql-server, sql-server-2008

我的 SQL Server 数据库中有许多视图。

如何将这些导出为`CREATE VIEW`脚本？

我试图右键单击数据库 - 将数据库脚本作为 - 创建到 - 新查询编辑器窗口，但它没有显示我的视图（或表）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T13:29:42.560

在 SSMS 中，如果您右键单击 DB -> 任务 -> 生成脚本... - 这将引导您完成向导。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:45:35.610

您可以运行向导并选择您的数据库，然后选择 AdaTheDev 提到的视图，或者您可以右键单击每个查询并直接生成脚本。

我更喜欢另一种方式，因为我总是编辑视图以删除“不必要的脚本生成的 SQL 语法”（取决于观点:)）。

右键单击视图，生成脚本，在新窗口中创建。请参阅下面的屏幕截图（对不起德语版本，但无论如何都应该工作）。

![1 个查询的示例导出](../Images/f4eeba2ae7ebd40a745f2e7fadf2b110.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:46:18.813

> 我试图右键单击 db - 脚本数据库作为 - 创建到 - 新查询编辑器窗口，但它没有显示我的视图（或表）。

您提到的菜单的目的只是创建空数据库，没有任何表、视图或其他任何东西。
如果要编写空数据库之外的任何内容，则必须使用[AdaTheDev 的答案](https://stackoverflow.com/a/10089775/6884)中已经提到的向导。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T23:17:45.287

也许您收到空白页面，因为 VIEW 的源已加密或删除。

在较旧的 SQL 版本中，有一个技巧 - 在创建 VIEW（SQL Server 编译它）之后，开发人员可以删除 VIEW 语句的源以保护它免受“反汇编”。在当前版本中，可以加密 VIEW 语句的来源。

# php - 使用 php 解析 XML 数据

> ID：10089719
> 
> 赞同：0
> 
> 时间：2012-04-10T13:27:21.133
> 
> 标签：php, xml, dom

这是我从外部 xml 文件 $data = file_get_contents($filename); 加载的 xml 示例 $dom->loadXML($data);

使用 php，我想通过这个 xml 来获取标题、问题和每个问题的选择。

```
<questions>
    <record topic = "classic video games">
        <title>Centipede</title> 
        <question>How many shots does it take to destroy a mushroom?</question> 
        <choices>
            <choice correct="no" votes="0">1</choice>
            <choice correct="no" votes="0">2</choice>
            <choice correct="no" votes="0">3</choice>
            <choice correct="yes" votes="0">4</choice>
        </choices>
    </record>
    <record topic = "classic video games">
        <title>Quake</title>
        <question>What is the name of the most powerful weapon in Quake?</question>
        <choices>
            <choice correct="no" votes="0">gauntlet</choice>
            <choice correct="no" votes="0">machine gun</choice>
            <choice correct="yes" votes="0">BFG2000</choice>
            <choice correct="no" votes="0">rocket launcher</choice>
            <choice correct="no" votes="0">railgun</choice>
        </choices>
    </record>
</questions> 
```

我希望我的结果是这样的：

```
Title = Centipede

Question = How many shots does it take to destroy a mushroom?

I. 1
II. 2
III. 3
IV. 4 
```

这是我的尝试：

```
$dom->loadXML($data);

    $all_records = $dom->getElementsByTagName("record");
        $all_choices = $dom->getElementsByTagName("choices"); 
        foreach($all_records as $record){
        $question = $record->getElementsByTagName("question")->item(0)->nodeValue;
        $title = $record->getElementsByTagName("title")->item(0)->nodeValue;
        echo "<h2> Title=$title</h2>";
                echo "<h5><em>Question=$question</em></h5>";
                echo "<li>". $all_choices->getElementsByTagName("choice")->nodeValue."</li>\n";

        echo "</ul>\n";
        echo "</div>\n";

    } 
```

我能得到标题和问题，但不能得到选择！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:20:53.667

在检查每条记录时，您需要`choices`使用内部循环获取集合：

```
<?php

$dom->loadXML($data);

$all_records = $dom->getElementsByTagName("record");
foreach($all_records as $record) {
    $question = $record->getElementsByTagName("question")->item(0)->nodeValue;
    $title = $record->getElementsByTagName("title")->item(0)->nodeValue;
    $choices = $record->getElementsByTagName('choice');

    echo "<h2> Title=$title</h2>";
    echo "<h5><em>Question=$question</em></h5>";

    echo '<ol class="choices">';
    foreach ( $choices as $choice ) {
        echo "<li>" . $choice->nodeValue . "</li>\n";
    }
    echo "</ol>";

    echo "</div>\n";
} 
```

# mysql - MySQL使用文本和另一个字段设置值

> ID：10089721
> 
> 赞同：0
> 
> 时间：2012-04-10T13:27:25.483
> 
> 标签：mysql, sql-update

好吧，不太清楚如何解释，但我会尽力...

我想运行一个 MySQL 查询以将名称设置为“非托管团队 [id]”我的想法最初是使用以下内容（但它没有按预期工作）。

```
mysql_query("UPDATE `table` SET `field`='Unmanaged Team'+`id`"); 
```

我已经尝试了一些变体，但我似乎不太明白，我不想一个一个地做，因为那只会使用太多的查询来处理我确信可以的事情1内完成。

非常感谢您花时间帮助我:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T13:30:31.737

您可以使用[`concat`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_concat)：

```
update `table` set `field` = concat('Unmanaged Team', id); 
```

* * *

[`concat_ws`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_concat-ws)(concat with separator) 如果您想要空格（或其他分隔符）也很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:30:21.200

采用

```
 SET field =  CONCAT('something ',somefield) 
```

# android - 在 GreenDroid 分页视图中更改默认页面

> ID：10089722
> 
> 赞同：0
> 
> 时间：2012-04-10T13:27:26.277
> 
> 标签：android, greendroid

是否可以使用 GreenDroid 分页视图从中间页面或任何用户定义的页面开始？我尝试将 setActivePage(pagedView.getCurrentPage()) 更改为 setActivePage(pageNo)。但是当我擦拭任何一种方式时，即向左或向右，它只从第一页开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T23:49:09.577

方法是在设置视图适配器后使用 scrollToPage() ，如下所示：

```
pagedView.scrollToPage(2); 
```

# c# - 来自服务器的邮件进入垃圾文件夹

> ID：10089727
> 
> 赞同：0
> 
> 时间：2012-04-10T13:27:33.583
> 
> 标签：c#, asp.net, email

我正在开发一个 ASP.NET 网站。我有一个发送邮件的页面。在这里用户添加收件人；发件人是他自己的身份证。当我在我的位置机器上运行此应用程序时，邮件正确地进入了我的收件箱，但是当我将该页面粘贴到服务器上并尝试邮寄时，邮件进入了垃圾文件夹。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:41:17.277

检查您的服务器 IP 是否已添加到 SMTP 服务器的中继列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:48:49.803

这听起来与代码无关，更多的是关于在 DNS 领域正确设置您的 SMTP 服务器和/或与您的托管服务提供商讨论它。根据您的帖子，您发送邮件的能力不是问题-更多的是接收代理如何处理您的电子邮件（根据某些规则对其进行标记等）。唯一的区别是“谁”发送电子邮件（您的本地计算机与您的服务器）。

有[Postmaster 资源 - 这是大家最喜欢的 - AOL](http://postmaster.aol.com/)，您可能会发现它很有用。如果（不幸地）列出了您的服务器 IP，您还可以查看[DNS 黑名单。](http://www.spamhaus.org/)

# php - 仅显示 mysql 中的唯一条目

> ID：10089728
> 
> 赞同：1
> 
> 时间：2012-04-10T13:27:38.977
> 
> 标签：php, mysql

我正在构建一个基于 mysql 的聊天应用程序。

我的数据库架构有以下表格，

```
 Users               Messages
   =================   =================
        id                 id
        screen_name        message
                           from
                           to
                           timestamp 
```

消息表上的 from 和 to 字段包含发送和接收每条消息的用户的 ID。

我正在尝试显示用户 ($id) 和他们的一位朋友 ($friend) 之间的所有消息。我的查询如下：

```
$query = "SELECT messages.* , users.screen_name FROM users CROSS JOIN messages ";
$query .= "ON ( messages.to = $id AND messages.from = $friend ) ";
$query .= "OR ( messages.to = $friend AND messages.from = $id )"; 
```

问题是每条消息在结果表中都有两次。

我尝试使用 DISTINCT，但在这种情况下它要么不起作用，要么我用错了。

为了让两个用户之间的每条消息只有一次，我的查询应该是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:31:52.630

这样的事情应该可以解决问题：

```
SELECT
  messages.*,
  users_from.screen_name AS from_screen_name,
  users_to.screen_name AS to_screen_name
FROM
  messages
    JOIN users AS users_from ON messages.from = users_from.id
    JOIN users AS users_to ON messages.to = users_to.id
WHERE
  (messages.to = $id AND messages.from = $friend)
  OR ( messages.to = $friend AND messages.from = $id) 
```

这样做是将“users”表连接两次，一次在“to”列上，第二次在“from”列上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:45:14.167

@Travesty3 has already suggested that the `DISTINCT` keyword will only exclude duplicate rows where *all* fields are equal to another row. Therefore, the `DISTINCT` keyword is not the way to go here.

What you can do, however, is to simply `GROUP BY messages.id` in order to get only one row per message ID (there is no guarantee, however, as to which of the two rows will be excluded).

# python - Python - 非空行后的Readline Control-D为什么不起作用？

> ID：10089730
> 
> 赞同：1
> 
> 时间：2012-04-10T13:27:43.417
> 
> 标签：python

我是 python 新手，如果我的要求看起来很奇怪，我很抱歉。我想在标准输入上循环每一行并立即将修改后的行返回到标准输出。我的代码大部分都可以工作。但是我不知道如何完全完成这项工作。

我有以下代码

```
while True:
    line = sys.stdin.readline()

    if not line:
        break

    sys.stdout.write(line) 
```

当以交互方式使用时，如果在新行上有一个 EOF，它将退出，但是如果在我输入 Control-D 之前有文本，我必须在它退出行之前给代码两次，然后在循环退出之前再给一次.

我该如何解决。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T14:49:21.490

我认为我在[这里](https://unix.stackexchange.com/questions/19094/weird-control-d-behavior/19097#19097)的回答可以立即复制：

> 它与`^D`真的有关：它只是停止当前 `read(2)`调用。
> 
> 如果程序这样做`int rdbytes = read(fd, buffer, sizeof buffer);` 并且您在两者之间按下`^D`，`read()`则返回缓冲区中当前读取的字节，并返回它们的编号。线路终止时也会发生同样的情况；最后`\n`总是交付。
> 
> 因此，只有`^D`在一行的开头或另一行之后`^D`才具有`read()`return的预期效果`0`，表示 EOF。

当然，这种行为也会影响 Python 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:33:25.610

python 文档中建议的策略是：

```
for line in sys.stdin:
    sys.stdout.write(line) 
```

请参阅[IO 教程](http://docs.python.org/tutorial/inputoutput.html)。

# c# - 最后如何使用 StreamWriter 保存文件内容

> ID：10089736
> 
> 赞同：0
> 
> 时间：2012-04-10T13:28:06.840
> 
> 标签：c#, file, c#-4.0, stream, c#-3.0

我想在最后写入 StreamWriter 流后保存文件内容。

即默认情况下，我们应该在 StreamWriter 的开头提供文件路径，但我不想这样做。

我如何在最后保存内容，即在将所有行写入流之后。

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:57:14.863

使用`MemoryStream`.

```
using (var writer = new StreamWriter(new MemoryStream()))
{
  writer.WriteLine("foo");
  writer.Flush();
  using (var file = File.Open("foo.txt"))
  {
    writer.BaseStream.Position = 0;
    writer.BaseStream.CopyTo(file);
  }
} 
```

# wix - 为什么我的 ifndef 部分不起作用？

> ID：10089739
> 
> 赞同：2
> 
> 时间：2012-04-10T13:28:14.000
> 
> 标签：wix, conditional-compilation

我的`program.wxs`文件中有以下代码段：

```
<?ifndef $(var.TwoOnly) ?>
        <Feature Id="FeatureOne" ... >
          ...
        </Feature>
<?endif ?>

<?ifndef $(var.OneOnly) ?>
        <Feature Id="FeatureTwo" ... >
          ...
        </Feature>
<?endif ?> 
```

我正在使用以下命令编译它：

```
candle -dOneOnly=1 program.wxs 
```

查看已编译的`program.wixobj`，我可以看到 Feature Two 的声明都在那里，并且在运行之后`light`，这两个功能都列出了，并且安装程序的功能与两者都没有设置`OneOnly`或`TwoOnly`没有设置完全一样。为什么我的`ifndef`块不能正常工作？

注意：我还有以下内容：

```
<?ifdef $(var.OneOnly) ?>
  <?define productName = One Only ?>
<?else?>
  <?ifdef $(var.TwoOnly) ?>
    <?define productName = Two Only ?>
  <?else?>
    <?define productName = Both ?>
  <?endif?>
<?endif?> 
```

名称，即使`OneOnly`在编译期间设置，也会显示为`Both`.

**编辑**

我已将条件的复杂性降低到[文档](http://wix.sourceforge.net/manual-wix2/preprocessor.htm)中显示的最小情况：

```
<?ifndef $(var.TwoOnly) ?>
  <?include featureOne.wxi ?>
<?endif?> 
```

这仍然不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T09:56:35.850

使用`ifdef`or`ifndef`时，必须*不使用* `$(var.)`语法声明变量。

```
<?ifndef TwoOnly ?>
  <?include featureOne.wxi ?>
<?endif?> 
```

这行得通。

# mysql - 无法启动 mySQL

> ID：10089748
> 
> 赞同：2
> 
> 时间：2012-04-10T13:28:34.183
> 
> 标签：mysql, ubuntu, login, root

即使在我使用以下命令重置 root 密码后，我也无法登录 MySQL：（列出的其他命令以提供更多信息）

```
 # sudo dpkg-reconfigure mysql-server-5.1

    # mysql -u root -p
    Enter password:
    ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)

    # telnet 127.0.0.1 3306
      Trying 127.0.0.1...
      telnet: Unable to connect to remote host: Connection refused
    # ps -Aw |grep mysql
      26522 ?        00:00:00 mysqld

    # /etc/init.d/mysql start
    Rather than invoking init scripts through /etc/init.d, use the service(8)
    utility, e.g. service mysql start

    Since the script you are attempting to invoke has been converted to an
    Upstart job, you may also use the start(8) utility, e.g. start mysql 
```

更新：

```
 # sudo mysqladmin -u root password 123
     mysqladmin: connect to server at 'localhost' failed 
```

似乎 MySQL 运行不正常

更新：我在 Ubuntu 下使用 MySQL 5.1。直到我在 my.cnf 中进行一些更改以启用远程访问之前都可以。我撤消了我的更改，但问题没有解决！（也许我忘了撤消一些事情！）

更新：

```
 # service mysql status
     mysql start/running, process 26650
     # /etc/init.d/mysql status
     Rather than invoking init scripts through /etc/init.d, use the service(8)
     utility, e.g. service mysql status

     Since the script you are attempting to invoke has been converted to an
     Upstart job, you may also use the status(8) utility, e.g. status mysql
     mysql start/running, process 26650 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:33:43.073

设置root密码：

```
 mysqladmin -u root password NEWPASSWORD 
```

要恢复它： [http ://www.cyberciti.biz/tips/recover-mysql-root-password.html](http://www.cyberciti.biz/tips/recover-mysql-root-password.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T13:34:25.433

我最好的猜测是，如果您重新配置/重新安装了 MySQL，则需要不使用密码登录，例如：

`mysql -u root`

甚至

`mysql`

* * *

编辑：要查看服务是否正在运行，您可以尝试：

`service mysqld status`

如果它没有运行，请尝试：

`service mysqld start`然后再次检查状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T04:51:57.513

作为服务启动

**sudo 服务 mysql 重启**

验证和检查服务和端口

**sudo netstat -tap | grep mysql**

![检查mysql服务运行的截图](../Images/1f0ea078e07b9292e152acb3e38d8f44.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T14:27:45.893

似乎 MySQL 肯定没有运行。`/etc/init.d/mysqld status`您可以使用or来验证这一点`service mysqld status`（不要直接链接到 service 命令）。

我的蜘蛛侠感觉告诉我您的 O/S 或 MySQL 安装执行不正确。了解更多关于您正在运行的（linux？）环境以及它是如何配置的（或谁配置它，在 PaaS 的情况下）的信息将非常有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-13T05:19:19.440

您应该更改访问权限。应该是 0644

```
sudo chmod 644  /etc/mysql/my.cnf 
```

接着

```
sudo dpkg-reconfigure mysql-server-5.5 
```

# r - 将 Matlab/R 中的模型转换为 C++/Java

> ID：10089754
> 
> 赞同：8
> 
> 时间：2012-04-10T13:28:46.010
> 
> 标签：r, matlab

我想将使用该`forecast`库在 R 中开发的 ARIMA 模型转换为 Java 代码。请注意，我只需要实现预测部分。拟合可以在 R 本身中完成。我将查看该`predict`函数并将其转换为 Java 代码。我只是想知道是否有其他人以前遇到过类似的情况并成功地使用 Java 库。

沿着类似的思路，也许这是一个没有具体答案的更笼统的问题；处理模型构建可以在 Matlab/R 中完成但预测/预测需要在 Java/C++ 中完成的情况的最佳方法是什么？我越来越多地一次又一次地遇到这样的情况。我想您必须硬着头皮自己编写代码，这通常不像自己编写拟合/估计那么难。有关该主题的任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-10T13:44:11.030

您将“R 或 Matlab”写到“C++ 或 Java”。这给出了 2 x 2 的选择，这对我的口味来说是太多的自由度。因此，请允许我专注于 C++ 作为目标。

[让我们考虑一个更简单的情况：在R](http://www.r-project.org)中进行原型设计，并在 C++ 中进行部署。如果您使用的[R](http://www.r-project.org)包实际上是用 C 或 C++ 实现的，这将变得非常容易。您“仅仅”需要将您所追求的例程与其其他依赖项（头文件、定义、数据结构......）分开，并为其提供所需的数据和参数。我过去曾为生产系统这样做过。

在这里，您谈论[预测](http://cran.r-project.org/package=forecast)包。这恰好取决于[RcppArmadillo](http://cran.r-project.org/package=RcppArmadillo)包，它本身将漂亮的[Armadillo](http://arma.sf.net) C++ 库带到[R](http://www.r-project.org)。因此，您实际上可以将其重写为一个独立的单元。

当您想将 Matlab 移植到 C++ 时，[犰狳也很有趣，因为它是为了帮助您完成该任务而编写的。](http://arma.sf.net)我已经将一些相对广泛的 Matlab 代码移植到 C++ 并获得了可观的速度提升。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:35:58.220

我不确定这在 R 中是否可行，但在 Matlab 中，您可以与 Java 中的 Matlab 代码进行交互 - 请参阅[http://www.cs.virginia.edu/~whitehouse/matlab/JavaMatlab.html](http://www.cs.virginia.edu/~whitehouse/matlab/JavaMatlab.html)。这将使您能够将所有预测代码留在 Matlab 中，并拥有例如用 Java 编写的接口。

或者，您可能希望使用 Java 编写预测代码，以便您可以生成模型，然后分发使用该模型的程序，而不依赖于 Matlab。Matlab[编译器](http://www.mathworks.co.uk/products/compiler/)可能在这里有用，但我从未使用过它。

在 Matlab 和 Java 之间进行混乱交互的最后一种简单方法是（在 linux 上）使用[伪](http://linux.die.net/man/7/pty)终端，您将有一个 pty/tty 对来连接 Java 和 Matlab。在这种情况下，您可以将数据从 Java 发送到 Matlab，并让 Matlab 返回预测结果。我希望这也适用于 R，但我不知道语法。

但总的来说，重新实现代码是一个不错的解决方案，并且可能比学习如何连接 java+matlab 或创建 Matlab 库更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T16:45:23.890

关于 Richante 给出的答案的一些进一步信息：Matlab 具有一些*非常*好的功能，可以与 C/C++、C# 和 Java 等编译语言进行互操作。在您的特定情况下，您可能会发现工具箱 Matlab Builder JA 特别相关。它允许您将 Matlab 代码直接导出到 Java，这意味着您可以直接从 Java 调用在 Matlab 中构建模型阶段构建的代码。

更多来自 Mathworks 的[信息](http://www.mathworks.co.uk/products/javabuilder/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-15T13:11:15.493

我还关心将“R 转换为 Java”，所以会谈到那部分。正如 Vincent Zooneykind 在他的评论中所说 - R 中的 PMML 库通常对模型导出有意义，但“预测”目前还不是受支持的库。

[另一种方法是使用https://www.opencpu.org/](https://www.opencpu.org/)之类的东西从您的 java 程序中调用 R。它在 http 服务器上显示 R 代码。然后可以像普通的 http 调用一样使用参数调用它，并使用 java.net.HttpUrlConnection 或 Java 中可用的 http 库的选择返回所需的内容。优点：关注点分离，无需重新编写 R 代码缺点：在您的实时流程中调用 R 服务器，因此需要确保其得到稳健处理

# model-view-controller - 语言翻译在哪里适合 MVC 模式？

> ID：10089757
> 
> 赞同：7
> 
> 时间：2012-04-10T13:28:54.893
> 
> 标签：model-view-controller, web-applications, architecture

我正在使用 MVC 模式作为起始位置构建多语言 Web 应用程序。该应用程序有许多用户将与之交互的表单，其中许多表单将具有从数据库表（例如“省”）进行查找的字段。

如果我需要在屏幕上以用户的语言显示这些列表中的选项，我可以看到几种方法来做到这一点：

1.  **在模型中。** 查询模型时，我可以提供我希望返回结果的语言。这将允许在模型数据显示不变的任何地方使用翻译。但是，这也意味着我的示例中的省模型（以及所有其他应用程序模型）现在需要知道如何进行语言翻译。
2.  **在控制器中。** 我可以像往常一样在控制器操作中查询模型，然后创建一个“翻译器”对象，我可以在完成操作之前将结果传递给该对象。这意味着每个控制器操作都可能复制相同的翻译代码，违反 DRY 原则。
3.  **在视图中。**由于应用程序的呈现通常期望存在于视图中，并且用户的语言不会影响系统的业务逻辑，因此可以提出语言翻译属于这里的论点。特别是考虑到页面还可能包含需要翻译的静态内容。这样做的缺点是它会使视图有些复杂，尤其是对于必须处理新的翻译代码的前端设计人员。

对于 Web 应用程序的 MCV 模式中文本翻译的归属，是否存在公认的最佳实践？如果我要通过 AJAX 调用而不是在页面加载时加载选择列表选项，这是否会发生变化？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T19:02:07.447

处理它的最佳位置是在视图中。您的问题仅引用数据库中的动态数据，但您还必须处理视图中的静态信息。最好在同一个地方处理这两个。MVC 中处理多种语言的常见做法是资源字符串、每种语言的单独视图或两者的组合。对于来自数据库资源字符串的信息，它会很好地工作。您将在数据库中为列表中的选项存储一个标记（该标记可以是英文翻译），并且视图将从指定国家/地区的资源中获取适当的翻译。[在这篇博文](http://afana.me/post/aspnet-mvc-internationalization.aspx)中有关于这种方法的很好的详细解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:35:33.320

如果您需要翻译部分 UI，那么我将创建一个辅助方法来读取资源文件并为该资源输出翻译后的字符串。例如

```
@Translate("NewUserHeading") 
```

所以关于 UI，在 UI 中处理这个是有意义的。

如果您要翻译的数据可能会显示在 Flash 客户端或移动应用程序中，那么它应该由服务器翻译，并且与您的 MVC 应用程序无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T15:53:42.097

老实说，与数据库的任何交互都应该在模型中处理，而这是模型中唯一处理的事情。解释/组织数据应在控制器中处理。我想需要更多信息来说明这个翻译的来源以及它是如何工作的，才能真正给出一个可靠的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T19:28:33.387

该视图将仅显示资源文件中的字符串。包括正确的语言环境资源文件应该可以做到。在 Web 应用程序中，它通常是一个单一语言的 JS 文件，用于定义每个语言环境的 UI 字符串，例如，strings.en-us.js、strings.pt-br.js 等等。

一些字符串确实来自服务器动态，控制器不需要知道它，模型应该只获取本地化的字符串并返回作为数据请求的一部分。

所以它要么在视图中（如果它是静态的），要么在模型中（如果它是动态的）。控制器应该只将数据从视图转换到模型，从模型转换到视图

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-21T13:04:15.870

另一个需要考虑的非常重要的事情是何时翻译。如果您的页面上只有 100 个翻译，则使用**每次翻译一次的**方法`@Translate("NewUserHeading")`很好，但如果您有更多翻译怎么办？

因为想一想，翻译是基于*语言选择的，而且***每页**只发生一次，甚至**每会话一次**。Kendo UI 人员在他们的演示中这样做的方式是，当用户单击一种新语言时，会加载一组新的服务器文件。这意味着有类似的东西：
/src/html/en-us//
src/js/en-us//
src/html/es//
src/js/es/
等。

[在https://demos.telerik.com/kendo-ui/grid/localization](https://demos.telerik.com/kendo-ui/grid/localization)查看

这是为了更好的性能而牺牲更多的工作。目前翻译的最终用例是[https://www.jw.org/](https://www.jw.org/)，拥有 900 多种语言！

# model-view-controller - 如何使用 Sencha Touch 2 从 jsp 页面检索数据到我的商店

> ID：10089761
> 
> 赞同：-1
> 
> 时间：2012-04-10T13:29:03.637
> 
> 标签：model-view-controller, jsp, sencha-touch

我想要一个这样的例子。请给我一个详细的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:41:27.743

如果要将结果存储在 Store 中，请首先像这样创建模型：

```
Ext.define('app.model.Example', {
        extend: 'Ext.data.Model',
        config: {
            fields: ['data'],
        }
}); 
```

接下来，创建您的商店：

```
Ext.define('app.store.Examples', {
    extend: 'Ext.data.Store',

    config: {
        model: 'app.model.Example',
        autoLoad: true,
        autoSync: true,
    },
}); 
```

在 Sencha Touch 2 Kitchensink Demo 中很容易找到 JSONP 请求的示例。在这里，我添加了一些代码以将结果添加到您的商店：

```
 Ext.data.JsonP.request({
                    url: 'http://free.worldweatheronline.com/feed/weather.ashx',
                    callbackKey: 'callback',
                    params: {
                        key: '23f6a0ab24185952101705',
                        q: '94301', // Palo Alto
                        format: 'json',
                        num_of_days: 5
                    },

                    callback: function(success, result) {
                        var store = Ext.getStore('Examples');
                        var weather = result.data.weather;

                        if (weather) {
                            store.add({data: weather});
                        }
                        else {
                            alert('There was an error retrieving the weather.');
                        }

                        panel.getParent().unmask();
                    }
                }); 
```

希望它有所帮助......让我知道是否有任何错误。

# c - 如何在C中打印毫秒？

> ID：10089762
> 
> 赞同：0
> 
> 时间：2012-04-10T13:29:13.907
> 
> 标签：c, visual-studio-2008

我想以 hh:mm:ss:ms(milliseconds) 格式打印时间。我可以以 hh:mm:ss 的形式打印。打印剩余毫秒的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:51:18.163

```
#include<sys/timeb.h>
#include<time.h>

int main(void) {
    struct timeb tp;
    ftime(&tp);
    char timeString[80];
    strftime(timeString, sizeof(timeString), "%H:%M:%S", localtime(&tp.time));
    printf("%s:%d", timeString, tp.millitm);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:33:19.323

这就是我在linux中使用的...

```
struct timeval tv;
gettimeofday(&tv,0);
time_t long_time;
struct tm *newtime;
time(&long_time);
newtime = localtime(&long_time);
char result[100] = {0};
sprintf(result, "%02d:%02d:%02d.%03ld", newtime->tm_hour,newtime->tm_min,newtime->tm_sec, (long)tv.tv_usec / 1000);
return result; 
```

我没有在 Windows 中工作的经验.. 尝试找到类似的电话..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T13:46:21.323

如果您正在使用 MSDN 库，您可以尝试

```
GetSystemTimeAsFileTime( pointerToSetToTime ); 
```

它将指针参数设置为以 100 纳秒为间隔的当前系统时间。

# android - sqlite 教程 创建和查看

> ID：10089764
> 
> 赞同：0
> 
> 时间：2012-04-10T13:29:15.750
> 
> 标签：android

我正在寻找 sqlite 的示例或教程。我需要做的是将信息从输入中放入数据库，然后在另一个屏幕上显示之前输入的内容。

我知道这是非常基本的东西，但我不知道该怎么做。（我不是要求有人为我做这件事，只是一个我可以从中学习的教程

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:35:25.560

[这](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial)可能很有用。

**编辑**

我的一个项目中的一个例子：

在我的数据收集类中：

```
private EditText titleText;
private EditText descText;

private String title;
private String desc;

titleText = (EditText) v.findViewById(R.id.title);
descText = (EditText) v.findViewById(R.id.desc);

commit.setOnClickListener(new OnClickListener() {public void onClick(View v) {
    title = titleText.getText().toString();
    desc = descText.getText().toString();
    mDbHelper.createEventType(title, desc);
} 
```

在我的 dbhelper 类中：

```
public long createEventType(String eventType, String eventTypeDesc) {
    ContentValues initialValues = new ContentValues();
    initialValues.put(EVENTTYPE_NAME, eventType);
    initialValues.put(EVENTTYPE_DESC, eventTypeDesc);
    return mDb.insertWithOnConflict(EVENTTYPE_TABLE, null, initialValues,
            SQLiteDatabase.CONFLICT_IGNORE);
} 
```

# c# - 如何在IIS7中增加水晶报表的最大处理工作量？

> ID：10089765
> 
> 赞同：1
> 
> 时间：2012-04-10T13:29:16.777
> 
> 标签：c#, asp.net, visual-studio-2010, crystal-reports

已达到系统管理员配置的最大报告处理作业限制。

我的所有代码工作正常，但一段时间后它显示超出 Crystal Report 最大处理作业限制的错误。我如何将其增加到无限或更多的处理限制？这样它就不会一次又一次地显示此错误。它在我的系统（本地）上运行良好，但是当我在服务器上部署此应用程序时，一段时间后会出现此错误。任何机构都可以帮助我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:03:57.027

你可以发布你的代码吗？

确保您正在做：

```
ReportDocument.Close();
ReportDocument.Dispose(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:55:40.357

您可以调整 HKLM\SOFTWARE\Business Objects[Version#]\Report Application Server\InProcServer\PrintJobLimit 下的注册表项。在服务器上更改它时要小心，因为这决定了可以使用的资源量。我建议检查您的代码以确保您正确处理报告对象，因为除非您有大量并发用户生成报告，否则您不需要增加限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T04:37:30.507

最好使用 try..catch..finally。它有助于处理：

```
try

    {
        //your code
    }

catch (Exception ex)

    {
        Response.Write(ex.Message);
    }

finally

    {
        ReportDocument.Close();
        ReportDocument.Dispose();
    } 
```

我希望它对你有帮助。

# html - gmail html 预览删除带有分页符属性的 css 规则

> ID：10089768
> 
> 赞同：5
> 
> 时间：2012-04-10T13:29:22.733
> 
> 标签：html, css, gmail, rules, page-break

我们将 html 页面作为附件发送给我们的用户，他们可以用来打印。当您在浏览器中使用 gmail 查看 html 页面时，它会删除任何带有 page-break-after 属性的 css 规则。

我们想强制分页打印。

解决这个问题的方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T10:54:29.003

你无能为力。正如chipcullen所解释的那样，Gmail会去除网页中的所有CSS，除了HTML标签内的CSS，即使是那些它也会做一些奇怪的事情，比如删除`page-break-after`属性。

我能想到的**唯一解决方法是****保留 html 文件或您的服务器，并简单地**在您的邮件消息中发送一个指向它的链接来代替附件。

*谷歌工程师做出的这类决定非常神秘。也许他们希望用户返回使用 Outlook。好吧，他们几乎说服了我。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:38:37.727

我不能具体说 page-break-after 属性，但我*知道*Gmail 对 HTML 电子邮件中的 CSS 做了一些奇怪的事情。例如，Gmail 将删除标签中或内联的*任何*CSS 。您必须内联应用您的规则。`<head>``<body>`

听起来，您更多地依赖浏览器来呈现附件，而用户正在从那里打印。您确定您的测试浏览器支持 page-break-after 吗？

# java - javascript 与其托管的 java 或 c++ 应用程序之间的通信

> ID：10089769
> 
> 赞同：0
> 
> 时间：2012-04-10T13:29:22.840
> 
> 标签：java, javascript, c++

我试图找出是否有标准或推荐的方式从 javascript 到嵌入浏览器小部件的应用程序进行通信，反之亦然。托管应用程序可以用 java 或 c++ 编写，并且可以在 Windows 和 Unix 平台上运行，但 javascript 将在两个客户端之间共享。

到目前为止，我已经阅读了：

*   window.external （这似乎是特定于 IE 的，所以它不适用于 Unix。）
*   LiveConnect（这似乎是特定于 java 和 mozilla 的，因此它不适用于基于 IE 或 c++ 的应用程序。）
*   SWT 的浏览器小部件具有一些这种功能，但这将是一个仅限 java 的解决方案。

还有哪些其他选择？

谢谢！希亚姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:36:50.893

JavaScript has the [XMLHttpRequest](http://en.wikipedia.org/wiki/XMLHttpRequest) API that makes it possible to send data to, and retrieve data from a server. The use of this API with messages formatted in XML or JSON is designated [AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29).

AJAX can be used to implement the example you gave, of a tree node in the HTML/javascript that retrieves the list of children from the server when it is expanded. Note that when using AJAX, the server may be written in any language (C, Java, Python, Ruby, etc).

I suggest you to read about AJAX. After you get a good understanding of AJAX you can read a little bit about [web services](http://en.wikipedia.org/wiki/Web_service). **web service** is a method of communication of 2 applications developed in arbitrary programming languages through the WEB.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:01:44.443

我们有一个承载 Microsoft 的[WebBrowser 对象](http://msdn.microsoft.com/en-us/library/aa752085%28v=vs.85%29.aspx)(IE) 的 VB6 应用程序。我们使用了一种简单的 URL 拦截机制来促进浏览器和托管应用程序之间的通信。由于浏览器控件有一个[导航前](http://msdn.microsoft.com/en-us/library/aa768326%28v=vs.85%29.aspx)界面，我们可以拉出 URL 并检查它是否有命令，然后取消导航事件（因为它是为托管应用程序准备的）或让它通过（因为它是一个普通的 URL） .

`app://commandName?arg1=val&arg2=val`我们在 Javascript 或 HTML 链接标签中使用了类似的东西。

然后在浏览器的 BeforeNavigate 事件中，我们检查 url，`app://`如果我们得到它，我们知道浏览器正在向父应用程序发送消息。

简单但有效（无论如何满足我们的需求）。

**编辑**

还应该提到，大多数嵌入式浏览器也有操作 DOM 的机制。请记住，您应该能够随意提取信息（HTML 节点）和注入信息。

# php - LAMP (PHP) 使用 MDBTools 驱动程序通过 ODBC 访问 Access 数据库

> ID：10089782
> 
> 赞同：1
> 
> 时间：2012-04-10T13:30:04.490
> 
> 标签：php, ms-access, odbc, lamp, mdbtools

谁能告诉我在带有 PHP 的 Ubuntu 上使用 unixODBC 驱动程序是否存在有限的 SQL 支持？我已经在 Ubuntu 11.10 上设置了一个基本的灯服务器，我正在尝试查询一个 Access 数据库。我已经安装了 php5-odbc 和 MDB 工具。这是一些示例代码：

```
<?php

$conn = odbc_connect('logindb','','');

if (!$conn) {
   echo "failed";
}

$sql = "SELECT * FROM class";
//$sql = "SELECT class.desc, event_classes.event_class_id FROM class inner join
//event_classes on class.class_id = event_classes.class_id";

$rs = odbc_exec($conn, $sql);

while ($d = odbc_fetch_array($rs)) {
    var_dump($d);
}

?> 
```

第一个查询，简单的选择，工作得很好。但是，当尝试执行联接（第二个注释查询）时，我收到 0 条记录。我能够在 Access 的 SQL 编辑器中成功运行 SQL，所以我知道我的 SQL 是正确的，并且连接在那里工作。有没有人有这方面的经验？我知道 Linux 不是为了与专有的 Microsoft 产品兼容，但不幸的是，我必须在 Ubuntu 上读取 Access 数据库。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T14:47:29.183

sourceforge 上的 mdbtools 自 2004 年以来一直没有更新。我看到有人把它放在 github 上，似乎做了一些小改动。它中的 SQL 支持从来没有那么好，它是只读的，我从使用 DBD::ODBC 在 Perl 下尝试它的经验中知道，很多测试都失败了。我想你会很难过。

还有其他更可靠的方法可以从 Linux 访问 MS Access 数据库，但据我所知，它们都是商业性的。要从 Linux 访问 MS Access 数据库，我知道以下内容：

Easysoft 有一个 ODBC-ODBC 桥（可用于使用 MS Access ODBC 驱动程序访问 Windows 机器上的 MS Access DB），但它需要在 Windows 机器上安装服务。Easysoft 也有一个 MS Access ODBC 驱动程序，只要它在 Linux 中可见，它就可以用于直接访问 mdb/accdb 文件。

Openlink 还提供其他商业 ODBC 桥接器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-10T16:52:48.353

如果有人碰巧正在寻找一个 hacky 解决方案，我最终使用 mdb-tools 将 access 数据库转换为 csv 文件（每个表 1 个），然后遍历 csv 执行“手动”连接。不是最好的解决方案，但它最终适用于相当小的桌子。希望能帮助到你！

# vxml - 访问表单元素填充字段？

> ID：10089783
> 
> 赞同：0
> 
> 时间：2012-04-10T13:30:07.790
> 
> 标签：vxml, voicexml

我有一个具有初始元素的表单，我正在使用置信度功能进行检查，以检查可能与用户输入匹配的其他短语。如果有，那么我将进入一个菜单，从这里我要求用户输入一个 dtmf 值来说明这些值之一是否正确。如果用户选择一个选项，我希望它使用该解释填充它检查的那个字段，或者可能转到另一个做同样事情的表单，如果我选择使用另一个表单来做，你可以访问填充的字段从另一种形式？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:35:51.783

根据[VoiceXML 规范](http://www.w3.org/TR/voicexml20/#dml5.1.2)，该类型变量的范围只能在表单中访问。但是您可以在离开具有文档范围的表单之前将值分配给另一个变量（即在 vxml 标记下方定义）。或者甚至通过在根文档中定义变量来赋予它全局范围，这样整个应用程序都可以访问它。

# c# - 将 HTML 表放入内存流

> ID：10089784
> 
> 赞同：0
> 
> 时间：2012-04-10T13:30:11.220
> 
> 标签：c#, asp.net, html

我目前正在使用 C# 处理 asp.net 页面。此页面包含一个按钮，单击后您将获得一个带有人名、手机号码和电子邮件地址的小型 HTML 表格。我想要做的是在代码后面捕获这个 HTML 表以及它在内存流或其他类型的流中的数据，以便执行一些操作。这是我的代码

```
<table id="tb" runat="server">
        <tr> 
            <td> Name </td>
            <td> <asp:Label ID="lblName" runat="server" ></asp:Label>  </td>
        </tr>
         <tr> 
            <td> Phone </td>
            <td> <asp:Label ID="lblPhone" runat="server" ></asp:Label>  </td>
        </tr>
         <tr> 
            <td> Email </td>
            <td> <asp:Label ID="lblEmail" runat="server" ></asp:Label>  </td>
        </tr>
     </table> 
```

所以请，如果有人可以帮助如何完成这个过程，我将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:52:23.550

好吧，虽然我不太明白你为什么要这样做，但你可以很简单地做到这一点，你必须把 id 和 runat server 标签放在你的桌子上，你已经有了，然后将此控件呈现为 string ：

标记：

```
<form id="form1" runat="server">
  <table id="tb" runat="server">
    <tr> 
        <td> Name </td>
        <td> <asp:Label ID="lblName" runat="server" ></asp:Label>  </td>
    </tr>
     <tr> 
        <td> Phone </td>
        <td> <asp:Label ID="lblPhone" runat="server" ></asp:Label>  </td>
    </tr>
     <tr> 
        <td> Email </td>
        <td> <asp:Label ID="lblEmail" runat="server" ></asp:Label>  </td>
    </tr>
  </table> 

  <hr />
  Rendered table :
  <hr />
  <asp:Label ID="lblRenderedTable" runat="server"></asp:Label>
  <hr />

</form> 
```

后面的代码：

```
protected void Page_Load(object sender, EventArgs e)
{

  lblName.Text = "User Name";
  lblEmail.Text = "user@domain.com";
  lblPhone.Text = "555-4214";

  StringBuilder sb = new StringBuilder();
  StringWriter tw = new StringWriter(sb);
  HtmlTextWriter hw = new HtmlTextWriter(tw);
  tb.RenderControl(hw);
  string tableContents = sb.ToString();

  lblRenderedTable.Text = tableContents;
} 
```

# php - 可以在 jQuery 生成的内容中应用 jQuery 吗？

> ID：10089786
> 
> 赞同：3
> 
> 时间：2012-04-10T13:30:14.367
> 
> 标签：php, jquery, sql, json

我不知道为什么这不起作用。

单击 li 元素时，我会调用 PHP 文件以获取一些结果并将它们打印在我的页面中。到现在为止还挺好。

```
$("li").click(function(){

            var item = $(this).html();
            $.getJSON('fSearch.php',{sTerm: item}, function(data){
                var results='';

                $.each(data, function(i, item) {
                    results += "<li id='t'>"+item.Description+"</li>";

                });
               $('#ResultsHolder').html("<ul>"+results+"</ul>");

            });

        }); 
```

我第一次单击 li 元素时一切正常，我得到了结果。现在这些结果是另一组 li 的，我希望它们的行为相同，但是当我单击生成的 li 时，函数没有执行..

为什么会这样？为什么 jQuery 不能识别动态插入的 li 元素？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T13:33:25.360

`.click()`不是实时处理程序，仅将事件绑定到执行时存在于 DOM 中的元素。如果您希望事件是实时的，您需要查看另一个处理程序，例如[.on()](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-10T13:34:56.133

当您使用事件快捷方式（例如`click`、 或`hover`）时，它仅适用于页面加载时 DOM 可用的事件。当您动态添加元素时，您需要将事件侦听器委托给页面中始终可用的元素。

在下面的示例中，我使用了`#ResultsHolder`.

```
$("#ResultsHolder").on("click", "li", function(){
    var item = $(this).html();
    $.getJSON('fSearch.php',{sTerm: item}, function(data){
        var results='';
        $.each(data, function(i, item) {
            results += "<li id='t'>"+item.Description+"</li>";
        });
        $('#ResultsHolder').html("<ul>"+results+"</ul>");
    });
}); 
```

这应该适用于 jQuery 1.7+。对于旧版本的 jQuery，使用`delegate()`...

```
$("#ResultsHolder").delegate("li", "click", function(){ ... 
```

此外，所有附加的`li`元素都有`id`'t'。这将导致无效代码，因为 id 应该是唯一的。如果您想拥有组标识符，请改用类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T13:32:44.980

当您调用 ("li").click() 时，您将事件绑定到现有的 li 元素。当您创建新的 li 元素时，您需要将它们绑定到事件以便单击工作。

所以，把你的循环改成更像这样的东西......

```
 $.each(data, function(i, item) {
    var li = $('li').text(item.Description);
    $(li).click(function(e) {  loadChildren(this); });
    $("#ResultsHolder").append(li);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T13:34:53.133

添加到页面的“li”元素没有将函数绑定到其单击事件处理程序。您需要使用 jQuery live() 函数来执行此操作。

[http://api.jquery.com/live/](http://api.jquery.com/live/)

基本上而不是 .click(function(){}) 你需要做 .live("click",function(){})

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T13:36:58.243

使用[.delegate()](http://api.jquery.com/delegate/)：`$(document).delegate("li","click",function(){...})`

或者，较新的版本，[.on()](http://api.jquery.com/on/) `$('li').on("click",function(){...})`

`document`如果您的 li 在某个固定的 div 中，您可以通过将第一个片段替换为该 div 的选择器来使其更快；做第二个`$(SELECTOR).on("click","li",function(){...})`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T13:37:55.090

因为将 .click 功能绑定到所有 li 是在创建这个新的之前发生的。JQuery 有 .on() 函数，可以解决你的问题。

```
$("li").on("click", function(event){
// do functionality
}); 
```

# c++ - eclipse中的C++代码浏览器

> ID：10089788
> 
> 赞同：11
> 
> 时间：2012-04-10T13:30:18.177
> 
> 标签：c++, eclipse, documentation, doxygen

我在 C++ 上编程时使用 Eclipse Indigo。我正在使用提供大量 doxygen 注释的代码。我希望能够在 Eclipse 中看到它们，而不必使用外部浏览器。我认为等效的 javadoc 将是`shift+F2`，但它不适用于 c++ doxygen。

换句话说，当我的鼠标悬停在类的方法上时，工具提示提供了函数的实现（在 .cpp 中找到），而不是它的声明和与之关联的注释（在 .cpp 中找到）。 H）。我想在我的工具提示中看到后者。

有针对 c++ 用户的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T14:05:02.447

不幸的是，这是**不可能的**，我怀疑将来是否有可能。要详细解释，请进一步阅读。
在 C++ 中，您可以通过 2 种方式编写函数。

1.  直接定义函数（可能是`extern`，`inline`或`static`）
2.  在头文件中声明函数，然后在实现文件中定义函数

现在 eclipse 总是选择实现，原因是**一致性**。在 C++（与 Java 不同）中，您可以在多个头文件中对函数进行许多前向声明，但定义始终为**1** (ODR)。
如果将函数置于鼠标下，那么选择哪个声明？所以最好选择一个定义。尽管在类方法的情况下可能不会出现此问题。

回到你的问题：

> 工具提示提供函数的实现，而不是它的声明和与之关联的注释

最好的方法是**在函数的实现中嵌入注释**。换句话说，从下面选择 style-2：

## 样式-1

```
class A {
 ...
public:
  /*
   * description of the function
   */
  void foo ();
};
void A::foo ()
{
...
} 
```

## 样式 2

```
class A {
 ...
public:
  void foo ();
};

/*
 * description of the function
 */
void A::foo ()
{
...
} 
```

**解决方法**：按`F3`两次键，它将引导您通过定义进行声明。

# c# - 从 XML CDATA 获取 img src

> ID：10089789
> 
> 赞同：2
> 
> 时间：2012-04-10T13:30:18.493
> 
> 标签：c#, xml, regex, windows, cdata

我是 C# 和 Windows Phone 开发的新手，所以如果我遗漏了明显的内容，请原谅我：

我想显示来自位于[http://blog.dota2.com/feed/](http://blog.dota2.com/feed/)的 RSS XML 提要的缩略图。该图像位于用 HTML 编写的 CDATA 标记内。这是 XML 代码：

```
 <content:encoded>
<![CDATA[
<p>We celebrate Happy Bear Pun Week a day earlier as Lone Druid joins Dota 2&#8242;s cast of heroes.</p> <p><a href="http://media.steampowered.com/apps/dota2/posts/LoneDruid_full.jpg "><img class="alignnone" title="The irony is that he's allergic to fur." src="http://media.steampowered.com/apps/dota2/posts/LoneDruid_small.jpg" alt="The irony is that he's allergic to fur." width="551" height="223" /></a></p> <p>Community things:</p> <ul> <li><a href="http://www.itsgosu.com/game/dota2/articles/ig-monthly-madness-invitational-finals-mar-29_407" target="_blank">It&#8217;s Gosu&#8217;s Monthly Madness</a> tournament finals are tomorrow, March 29th. You don&#8217;t want to miss this, we hear it could be more than we can bear.</li> <li>Bear witness to <a href="http://www.team-dignitas.net/articles/blogs/DotA/1092/Dota-2-Ultimate-Guide-to-Warding/" target="_blank">Team Dignitas&#8217; Ultimate Guide to Warding</a>. This should be required teaching in clawsrooms across the globe.</li> <li>Great Explorer Nullf has <a href="http://nullf.deviantart.com/#/d4ubxiu" target="_blank">compiled the eating habits</a> of the legendary Tidehunter in one handy chart. This might give you paws before deciding to head to the beach.</li> </ul> <p>Bear in mind that there will not be an update next week as we will be hibernating during that time.</p> <p>Today&#8217;s bearlog is available <a href="http://store.steampowered.com/news/7662" target="_blank">here</a>.</p> <p>&nbsp;</p> <p>Bear.</p>
]]>
</content:encoded> 
```

我只需要 `<img src="http://media.steampowered.com/apps/dota2/posts/LoneDruid_small.jpg" />` 这样我就可以使用 URL 在我的阅读器应用程序中显示图像。

我听说有人说不要使用正则表达式，因为它是解析 HTML 的坏习惯。我将其创建为概念证明，无需担心。我正在寻找获取图像的此 URL 的最快方法，然后在我的应用程序中调用它。

有人有帮助吗？在此先感谢，汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:18:05.910

当你准备好使用[HtmlAgilityPack时，你可以试试这个](http://htmlagilitypack.codeplex.com/)

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(yourstring);
var imgLinks = doc.DocumentNode
    .Descendants("img")
    .Select(n => n.Attributes["src"].Value)
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:46:23.440

假设您的 xml 看起来像这样（我确定它不是），并且这些扩展名：[http ://searisen.com/xmllib/extensions.wiki](http://searisen.com/xmllib/extensions.wiki)

```
<?xml version="1.0" encoding="utf-8"?>
<root xmlns:content='uuid:BDC6E3F0-6DA3-11d1-A2A3-00AA00C14882'>
  <content:encoded>
    <![CDATA[
<p>We celebrate ...</p> 
<p>
  <a href="http://media.steampowered.com/apps/dota2/posts/LoneDruid_full.jpg ">
    <img class="alignnone" title="The irony is that he's allergic to fur." 
        src="http://media.steampowered.com/apps/dota2/posts/LoneDruid_small.jpg" />
  </a>
</p> 
<p>the rest removed</p> 
]]>
  </content:encoded>
</root> 
```

这将从第二段中获取图像源 - 硬编码且丑陋，但这就是您所说的所有内容。您必须给出`path/to/content:encoded`它的工作路径，如果它在一个组（又名数组）中，那么它会更加复杂。从我的代码中，您可以看到如何分离出数组（参见 paras）：

```
XElement root = XElement.Load(file) // or .Parse(string)
string html = root.Get("content:encoded", string.Empty).Replace("&nbsp", " ");
XElement xdata = XElement.Parse(string.Format("<root>{0}</root>", html));
XElement[] paras = xdata.GetElements("p").ToArray();
string src = paras[1].Get("a/img/src", string.Empty); 
```

**PS**这是有效的，因为HTML格式正确，如果不是，那么您将不得不使用其他人回答的HtmlAgilityPack。您可以使用`html`从`Get("content:emcoded" ...)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:20:26.607

```
const string pattern = @"<img.+?src.*?\=.*?""(<?URL>.*?)""";
Regex regex = new Regex(pattern, RegexOptions.IgnoreCase);
var match = regex.Match(myCDataText);
var domain = match.Groups["URL"].Value; 
```

# http - GWT RequestBuilder 将客户端日期设置为 HTTP 日期 POST 标头

> ID：10089792
> 
> 赞同：1
> 
> 时间：2012-04-10T13:30:27.943
> 
> 标签：http, gwt, date, http-request

我正在使用 GWT RPC 在客户端和服务器之间进行通信。我希望能够在服务器端读取浏览器的日期，为此我使用 ServiceDefTarget 类中的 setRpcRequestBuilder 来定制我的请求，并添加我想要的标题。

在客户端我正在使用：

```
private static final RpcRequestBuilder rpcReqBuilder = new RpcRequestBuilder() {

    @Override
    protected RequestBuilder doCreate(String serviceEntryPoint) {

        RequestBuilder builder = super.doCreate(serviceEntryPoint);
        builder.setHeader("Date1", new Date().toString()); 
        return builder;

    }
};

 ......

((ServiceDefTarget) greetingService).setRpcRequestBuilder(rpcReqBuilder); 

//rpc call
greetingService.greetServer(.........) 
```

在服务器端，我这样做：

```
HttpServletRequest request = this.getThreadLocalRequest();
    Enumeration<?> enumeration = request.getHeaderNames();
    while (enumeration.hasMoreElements()) {
        String name = (String) enumeration.nextElement();
        String value = request.getHeader(name);
        System.out.println(name + ": " + value);
    } 
```

在所有默认标题中打印

```
Date1: Tue Apr 10 12:19:28 BST 2012 
```

好的，这很好，但是当我尝试设置“日期”标头时，它不会显示在服务器端。这是为什么？任何人都可以提供帮助。我会很有帮助的。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T16:14:12.453

`Date`是 HTTP 的[预定义标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.18)，根据定义，`XMLHttpRequest`（GWT 背后的东西`RequestBuilder`）[不能让您将其设置](http://www.w3.org/TR/XMLHttpRequest/#dom-xmlhttprequest-setrequestheader)为任意值。

无论如何，在制作自己的标头时，您应该添加一个前缀以避免与网络上添加标头的其他事物发生冲突，例如`MyApp-Date`或`X-MyApp-Date`（就像 GWT 在 GWT-RPC 和 RequestFactory 中所做的`X-GWT-Permutation`那样`X-GWT-Module-Base`）

# sql - 将表数据从 SQL Server 2000 复制到 SQL Server 2008

> ID：10089797
> 
> 赞同：1
> 
> 时间：2012-04-10T13:30:43.780
> 
> 标签：sql, sql-server-2008, sql-server-2000, ssms

我有一个带有 7 个表的 SQL Server 2000 数据库。我想将表数据从这个数据库复制到另一个在 SQL Server 2008 实例上运行的数据库。

这些表将完全相同，我只需将数据从一个复制到另一个。

编辑：

尝试从 SQL Server 2008 导入时出现以下错误，我什至选中了删除目标表框。：

> 验证（错误）
> 消息
> 错误 0xc0202049：数据流任务 1：插入只读列“AllowedHtmlSystemID”失败。
> （SQL Server 导入和导出向导）
> 
> 错误 0xc0202045：数据流任务 1：列元数据验证失败。
> （SQL Server 导入和导出向导）
> 
> 错误 0xc004706b：数据流任务 1：“组件“目标 1 - DnnBBAllowedHtml”(79)”验证失败并返回验证状态“VS_ISBROKEN”。
> （SQL Server 导入和导出向导）
> 
> 错误 0xc004700c：数据流任务 1：一个或多个组件验证失败。
> （SQL Server 导入和导出向导）
> 
> 错误 0xc0024107：数据流任务 1：任务验证期间出现错误。
> （SQL Server 导入和导出向导）

编辑：

![在此处输入图像描述](../Images/a10fae75f52f7442c0b07451ef46c07f.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T13:51:24.800

看起来您正试图将数据插入标识列。如果您需要原始标识值，首先确保它们当前未被使用，然后在向导中，单击编辑映射按钮并选中启用标识插入框。如果要生成新的 id，则在映射部分的目标中，将标识字段的值更改为“忽略”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T13:48:00.980

作为“导入数据...”方法的替代方法，您还可以生成一个 sql 脚本来将数据插入到另一个数据库中。
操作方法如下：
右键单击数据库并选择**Tasks->Generate scripts...**

选择您要复制的特定表（在允许您选择数据库对象的向导页面上）
当您到达询问“指定如何保​​存或发布脚本”的页面时： -
单击高级按钮
-对于**脚本的数据类型**：将“仅模式”更改为“仅**数据**”
完成单击向导以生成 .sql 文件。

然后您可以使用创建的 .sql 文件将数据插入到您的其他数据库中。 **注意：** 请务必更改**USE**语句以指定您的目标数据库。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T13:33:21.970

右键单击 SSMS 中的 sql2008 数据库，然后单击“任务”-“导入数据...”，然后按照 SSIS 向导进行操作。

# c# - 平假名到汉字转换器

> ID：10089798
> 
> 赞同：7
> 
> 时间：2012-04-10T13:30:49.113
> 
> 标签：c#, unicode, localization, ime

你知道是否有 C# 中的库或字典可以帮助我将平假名翻译成汉字吗？我知道有 Windows 的 IME，但我想为给定的平假名完全定制汉字候选列表的设计，而这个 IME 是不可能的。

例子：用户写“toru”，首先翻译成平假名：“とる” 我想有这个选择列表：

撮る 取る 盗る

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T13:52:09.080

不幸的是，我不知道 ac# 库。我发现的所有内容都涉及导入一些本机库，例如在这个操作系统线程中：[Japanese to Romaji with Kakasi](https://stackoverflow.com/questions/6442397/japanese-to-romaji-with-kakasi)

如果您愿意这样做，也许[JWPce](http://www.physics.ucla.edu/~grosenth/jwpce.html)可能会有所帮助。

尽管这是作为日语文本编辑器实现的，但它还包含一个字典功能（它实际上包含大量字符查找系统），可以执行您想要执行的操作。

可能你可以编译项目然后导入那些查找功能？JPWce 在 GPL 下获得许可，您可以直接从主页下载二进制可执行文件和源代码。

**[编辑]**

研究更多我在 Google Code 上偶然发现了[mozc ：](http://code.google.com/p/mozc/)

> Mozc 是一款日文输入法编辑器 (IME)，专为 Chromium OS、Windows、Mac 和 Linux 等多平台而设计。这个开源项目源自 Google Japanese Input。

（BSD 许可证）

*我自己还*没有研究过它，但它可能更像你正在寻找的东西，因为它没有“围绕它”的完整应用程序，而是打算用作一个库。就像你想要的那样。

他们还链接到一个简短的视频输入的样子：[http ://www.google.co.jp/ime/](http://www.google.co.jp/ime/)

不幸的是，这仍然是 C++，而不是 .NET，但它可能是一个起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T05:40:04.827

Microsoft 将此作为单独的产品发布，称为 Visual Studio International Pack

[http://visualstudiogallery.msdn.microsoft.com/74609641-70BD-4A18-8550-97441850A7A8](http://visualstudiogallery.msdn.microsoft.com/74609641-70BD-4A18-8550-97441850A7A8)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T05:12:52.557

我也不知道 C# 库。但鉴于字典可能就足够了，您可能需要考虑使用[Anthy](http://anthy.sourceforge.jp/)附带的 IME 字典。

如果您下载最新版本的[源代码](http://sourceforge.jp/projects/anthy/)`mkworddic`，您会在和`alt-cannadic`目录中找到字典源代码。查看以`.t`.

请注意，它们以 EUC-JP 编码；您可能希望将它们转换为 UTF-8。

# android - Android屏幕旋转导致异常

> ID：10089800
> 
> 赞同：0
> 
> 时间：2012-04-10T13:30:53.123
> 
> 标签：android, android-asynctask

我的活动中有很多异步任务。如果屏幕旋转发生 - 他们走了。如何防止异步任务抛出异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:35:48.773

我认为异常是由于在方向更改中重新启动活动，如果`android:configChanges="orientation|keyboardHidden"`在清单中用于您的活动，这会阻止重新启动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:37:19.897

利用

```
android:configChanges="keyboardHidden|orientation" 
```

作为您的`Activity`in`AndroidManifest.xml`文件的一个属性，以防止在屏幕旋转时重新加载 Activity 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T19:16:38.613

最合适的方法是使用片段来保留异步任务的实例，而不是旋转。

这是一个非常简单的示例的链接，可以很容易地遵循并将此技术集成到您的应用程序中。这非常有效，所有按钮和图像等都按预期重绘

[https://gist.github.com/daichan4649/2480065](https://gist.github.com/daichan4649/2480065)

# c# - 更新 FTP 服务器上的文本文件？

> ID：10089802
> 
> 赞同：1
> 
> 时间：2012-04-10T13:31:02.313
> 
> 标签：c#, ftp, ftpwebrequest

我想更新服务器上的现有文件，而不会丢失文件上已保存的数据。目前如果我尝试写一些东西。它通过删除以前的数据来覆盖文件。

我正在使用以下代码。

```
 using (StreamWriter sw = new StreamWriter(ftp.GetRequestStream(), Encoding.GetEncoding("iso-8859-1")))
        {
            var sb = new StringBuilder();

            foreach (string value in row)
            {

                if (sb.Length > 0)
                    sb.Append(",");

                sb.Append(value);
            }
            sw.WriteLine(oldRecords.ToString() + sb.ToString());
            sw.Flush();
        } 
```

如何在不丢失文件中已有数据的情况下更新文件。

谢谢，

纳维德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:41:48.190

也许你可以为你的 FTP 客户端实现这个逻辑......

1.  创建标志“更新=假”
2.  在本地下载此文件
3.  通过您的自定义逻辑更改它
4.  将此文件以其他名称上传到服务器
5.  重命名旧文件
6.  为新文件提供正确的名称
7.  删除旧文件
8.  标记“Updated=true”否则回滚服务器文件的名称

注意：您必须将所有协议保留在 FTP 客户端。

* * *

更新：

你可以尝试使用一些开源代码来开发你的FTP客户端，即[C# FTP Client Library](http://www.codeproject.com/Articles/10968/C-FTP-Client-Library)

# actionscript-3 - Flashdevelop 中的 Flex-compile 无法打开 .swc

> ID：10089804
> 
> 赞同：1
> 
> 时间：2012-04-10T13:31:18.990
> 
> 标签：actionscript-3, flashdevelop, swc

我目前正在尝试使用 Flashdevelop 使用 flex-SDK 编译 swfs。我按照 flashdevelop.com 上的教程进行[操作](http://www.flashdevelop.org/wikidocs/index.php?title=AS3%3aFlexAndFlashCS3Workflow)，预编译 assets.swc，将其添加到库中，但是当我尝试构建项目时出现此错误：

> D:-[ DISPLAY ]--[ TechTestLab ]-\Away3D\obj\assetsConfig.xml(28)：
> 错误：无法打开 'D:-[ DISPLAY]--[TechTestLab]-\Away3D\src\assets.swc '

有谁知道为什么会这样？

# arrays - as3 数组按索引删除

> ID：10089806
> 
> 赞同：10
> 
> 时间：2012-04-10T13:31:21.553
> 
> 标签：arrays, actionscript-3, indexing

我有一个数组“猫”、“狗”、“鹦鹉”

并希望按索引删除项目。

目前我有

```
function removeit(myindex) {
    animals[myindex] = animals.pop()
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-10T13:35:51.480

你想要拼接

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#splice%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#splice%28%29)

Array.splice(起点，删除计数);

```
 var newArray:Array = myArray.splice(2, 1); //this removes whatever is at index 2 and returns it in a new array. 
```

将您的功能更改为

```
function removeit(myindex) {
    animals.splice(myindex, 1);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-05T22:18:01.257

使用 Flash Player 19+ 或 AIR 19+ 时，您可以使用

```
myArray.removeAt(myIndex); // removes the element at the specified index, modifying the array without making a copy 
```

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#removeAt()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#removeAt())

# javascript - 从 cookie 读取和写入（表单）

> ID：10089807
> 
> 赞同：1
> 
> 时间：2012-04-10T13:31:23.187
> 
> 标签：javascript, cookies

我有一个表单，它应该在 cookie 中保存和加载信息：

[http://jsfiddle.net/kFVGH/](http://jsfiddle.net/kFVGH/)

这是代码，我可以理解它在 jsFiddle 中无法工作，原因有几个（也许可以，也许不能），但我根本无法让它在我的网站上工作。

我以前有一个工作，但是当我改变代码为新的表单元素让路时，它停止工作。

有任何想法吗？

# haskell - 如何正确地将 IO 添加到 attoparsec 解析器？

> ID：10089808
> 
> 赞同：3
> 
> 时间：2012-04-10T13:31:23.763
> 
> 标签：haskell, io, monads, monad-transformers, attoparsec

我想在我的 attoparsec 解析器中进行一些跟踪/调试。这是最小的 [not] 工作示例：

```
import Data.Text as T
import Data.Attoparsec.Text
import Data.Attoparsec.Combinator
import Control.Applicative ((<*), (*>))

parseSentences :: Parser [T.Text]
parseSentences = many1 $ takeWhile1 (/= '.') <* char '.' <* skipSpace

parser :: Parser [T.Text] 
parser = do
    stuff <- parseSentences
--    putStrLn $ "Got stuff: " ++ show stuff

    tail <- takeText
--    putStrLn $ "Got tail: " ++ show tail

    return $ stuff ++ [tail, T.pack "more stuff"]

main = do
    let input = T.pack "sample. example. bang"
    print $ parseOnly parser input 
```

为了在解析器中使用 IO 操作，我必须做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T14:15:04.820

如果您使用了 Parsec 库，您将有可能使用 Parsec monad 转换器在代码中混合 IO 和解析器命令。

然而，Attoparsec 是一个纯解析器，因此您必须使用该[`Debug.Trace.trace`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Debug-Trace.html#v%3atrace)函数将消息输出到终端以进行调试。

```
parser = do
  stuff <- parseSentences
  tail <- takeText
  return .
    trace ("Got stuff: " + show stuff) .
    trace ("Got tail: "  + show tail) $
    stuff ++ [tail, T.pack "more stuff"] 
```

当评估关联值（此处为表达式的结果）时，将打印消息`stuff ++ ...`。

# javascript - 删除动态选择上的子节点

> ID：10089811
> 
> 赞同：0
> 
> 时间：2012-04-10T13:31:39.547
> 
> 标签：javascript, parent-child

我正在创建一个动态选择表单。基本上，用户从选择中选择一个选项，然后根据他们选择的选项进入数据对象，然后根据他们之前的答案生成一个新选择。在他们回答了关于他们的车辆选择的 3 个问题后，它会打印出他们的车辆选择。

我遇到的问题是能够即时更改先前的选项。我希望他们能够更改以前的选择，并且会删除以后的选择

前任。用户首先选择 Car、Ford 并显示对模型的选择。如果用户返回并将 Car 更改为 Truck。我想删除福特和模型选择。这是我拥有的保存数据并动态创建新选择的代码部分

```
 var data=new Object();// create a new data object to hold info

data['init']=['Car','Truck','SUV'];

data['Car']=['Audi','Dodge','Ford','Volkswagon'];
data['Audi']=['A4','TT','R8'];
data['Dodge']=['Charger','Challenger','Stealth'];
data['Ford']=['Focus','Fusion','Mustang'];
data['Volkswagon']=['Jetta','GTI','Beetle'];

data['Truck']=['Dodge Truck','Ford Truck','Toyota Truck'];
data['Dodge Truck'] = ['Ram-1500','Ram-2500','Ram-3500'];
data['Ford Truck'] = ['F-150','F-250','Ranger'];
data['Toyota Truck'] = ['Tundra','Tacoma'];

data['SUV']=['Dodge SUV','Ford SUV','Toyota SUV'];
data['Dodge SUV'] = ['Durango','Journey','Caliber'];
data['Ford SUV'] = ['Escape','Edge','Explorer'];
data['Toyota SUV'] = ['Rav4','Highlander','4runner'];

var hold = data['init'];//Sets data to 'init' by default

    var selectedArray = [];//This array holds the selected options (to be used to display the vehicle name)

    function init(){//call first to create the first select box and populate with 'init'        

    firstSelect = document.createElement('select');
    firstSelect.setAttribute("onChange","createSelect(this.value)");
    createSelect('init');       
}

//Main create function for select boxes
function createSelect(value){

    selectHold = value;//sets selectHold to the value of the selected item (this will be used for displaying    the name in disName)

    //This just prevents it from adding "Car, Truck or SUV to the selectedArray
    if(value != 'init' && value != 'Truck' && value != 'Car'  && value != 'SUV' && value != 'Select your vehicle options'){
        selectedArray.push(selectHold);
    }

    hold=data[value];// sets this holder to the value of the selected item for the if statement

    if(hold){   //just checks to see if hold exists

        var selEle = document.createElement('select');//creates new select element

        //gives selEle onchange function
        selEle.setAttribute("onChange","createSelect(this.value)");

        //Creates the "default" option. Forcing them to pick something.
        var defaultOpt = document.createElement('option');
        var vehInfo =  document.createTextNode("Select your vehicle options");
        defaultOpt.appendChild(vehInfo);
        selEle.appendChild(defaultOpt);

        //Populates the options and adds it to the document
        for(var i = 0, l = hold.length; i < l; i++){
            var newOpt = document.createElement('option');
            newOpt.appendChild(document.createTextNode( hold[i]));
            newOpt.setAttribute('value',hold[i]);
            selEle.appendChild(newOpt);
        }

        //put select on the page
        document.getElementById('top-container').appendChild(selEle);
        }

    else{       //if not, then put out final form
        disName(selectHold,selectedArray);//call disName function an dpass it the value of selectHold   

        }

} 
```

HTML：

```
 <div id="top-container">
    <h1>Awesome<br/>
    Car<br/>
    Picker</h1>

    </div>
    <div id="middle-container">
<h2>Your vechle choice:</h2>
    </div>

    <div id="bottom-container">
    <div id="mail-form">
    <form name='mail-form'>

    <label>Name</label>
    <input name="name" autofocus>

    <label>Email</label>
    <input name="email">

    <label>Credit Card number</label>
    <input name="cc">

    <input id="submit" name="submit" value="Submit" onClick="validate()">

    </form>
    </div>

    </div>

    <body> 
```

我在想的是检查选择是否是父节点（顶部容器）的 lastChild 。如果不是，则删除该子项，直到它仅是已更改的选择以及在其之前的任何选择。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:43:13.730

在您的`createSelect`函数中，使用类似`selEle.id = 'newID';`.

在调用`createSelect`函数之前，检查新元素是否存在，如果存在，将其删除：

```
if (document.getElementById('newID'))
    document.getElementById('top-container').removeChild(document.getElementById('newID')); 
```

# symfony - 安装奏鸣曲媒体包

> ID：10089814
> 
> 赞同：2
> 
> 时间：2012-04-10T13:31:49.833
> 
> 标签：symfony, symfony-sonata

几天来，我一直在尝试让 Sonata Media Bundle 在 Symfony 中工作。我已经以不同的顺序重新安装了几次，各种各样。每次安装时都会出现以下错误：

> [RuntimeException]
> 自动加载器预期类“Sonata\MediaBundle\Document\ODM\BaseGallery”将在文件“/vagrant/app/../vendor/bundles/Sonata/MediaBundle/Document/ODM/BaseGallery.php”中定义。找到文件但类不在其中，类名或命名空间可能有错字。

我可以看到它正在尝试加载文档。我配置了一个 mongodb 数据库，但我还没有使用它，主要使用 MySQL。

我可以弄乱这些文件中的命名空间，这显然修复了这个错误，但只会导致很多不同的错误，而且我无论如何都不需要这样做。

设置：（来自文档的默认 ATM）- config.yml

```
sonata_media:
    default_context: default
    db_driver: doctrine_orm # or doctrine_mongodb
    contexts:
        default:  # the default context is mandatory
            providers:
                - sonata.media.provider.dailymotion
                - sonata.media.provider.youtube
                - sonata.media.provider.image
                - sonata.media.provider.file

            formats:
                small: { width: 100 , quality: 70}
                big:   { width: 500 , quality: 70}

    cdn:
        server:
            path: /uploads/media # http://media.sonata-project.org/

    filesystem:
        local:
            directory:  %kernel.root_dir%/../web/uploads/media
            create:     false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T10:05:20.143

认为这是一个错误 - 我刚刚提交了一个拉取请求来修复它。

[https://github.com/sonata-project/SonataMediaBundle/pull/134](https://github.com/sonata-project/SonataMediaBundle/pull/134)

# php - Symfony2：如何检查一个动作是否安全？

> ID：10089816
> 
> 赞同：8
> 
> 时间：2012-04-10T13:31:51.193
> 
> 标签：php, security, symfony

我想从控制器内部检查它是否是安全页面。这个怎么做 ？

我的用例如下：

*   用户可以注册和登录
*   如果他登录并尝试访问安全页面，他将被重定向到“测试版”页面，直到 6 月底。
*   如果他试图访问一个普通页面（不安全），他将能够访问它而无需任何重定向。

谢谢你的帮助 ！

奥雷尔

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T11:48:06.020

当 Symfony2 处理请求时，它会将 url 模式与`app/config/security.yml`. 当 url 模式与防火墙模式匹配时，Symfony2 会创建一些侦听器对象并调用`handle`这些对象的方法。如果任何监听器返回一个`Response`对象，则循环中断并且 Symfony2 输出响应。身份验证部分在身份验证侦听器中完成。它们是从匹配的防火墙中定义的配置创建的，例如`form_login`等`http_basic`。如果用户未通过身份验证，则经过身份验证的侦听器创建一个`RedirectResponse`对象以将用户重定向到登录页面。对于您的情况，您可以通过创建自定义身份验证侦听器并将其添加到安全页面防火墙中来*作弊。*示例实现如下，

创建一个`Token`类，

```
namespace Your\Namespace;

use Symfony\Component\Security\Core\Authentication\Token\AbstractToken;

class MyToken extends AbstractToken
{
    public function __construct(array $roles = array())
    {
        parent::__construct($roles);
    }

    public function getCredentials()
    {
        return '';
    }
} 
```

创建一个实现`AuthenticationProviderInterface`. 对于`form_login`侦听器，它使用给定的`UserProvider`. 在这种情况下，它什么也不做。

```
namespace Your\Namespace;

use Symfony\Component\Security\Core\Authentication\Token\TokenInterface;
use Symfony\Component\Security\Core\Authentication\Provider\AuthenticationProviderInterface;
use Acme\BaseBundle\Firewall\MyToken;

class MyAuthProvider implements AuthenticationProviderInterface
{

    public function authenticate(TokenInterface $token)
    {
        if (!$this->supports($token)) {
            return null;
        }

        throw new \Exception('you should not get here');
    }

    public function supports(TokenInterface $token)
    {
        return $token instanceof MyToken;
    } 
```

创建一个入口点类。`RedirectResponse`侦听器将从此类中创建一个。

```
namespace Your\Namespace;

use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\Security\Core\Exception\AuthenticationException;
use Symfony\Component\Security\Http\EntryPoint\AuthenticationEntryPointInterface;
use Symfony\Component\Security\Http\HttpUtils;

class MyAuthenticationEntryPoint implements AuthenticationEntryPointInterface
{
    private $httpUtils;
    private $redirectPath;

    public function __construct(HttpUtils $httpUtils, $redirectPath)
    {
        $this->httpUtils = $httpUtils;
        $this->redirectPath = $redirectPath;
    }

    /**
     * {@inheritdoc}
     */
    public function start(Request $request, AuthenticationException $authException = null)
    {
        //redirect action goes here
        return $this->httpUtils->createRedirectResponse($request, $this->redirectPath);
    } 
```

创建一个监听器类。在这里，您将实现您的重定向逻辑。

```
namespace Your\Namespace;

use Symfony\Component\Security\Http\Firewall\ListenerInterface;
use Symfony\Component\HttpKernel\Event\GetResponseEvent;
use Symfony\Component\Security\Core\SecurityContextInterface;
use Symfony\Component\Security\Http\EntryPoint\AuthenticationEntryPointInterface;

class MyAuthenticationListener implements ListenerInterface
{
    private $securityContext;
    private $authenticationEntryPoint;

    public function __construct(SecurityContextInterface $securityContext, AuthenticationEntryPointInterface $authenticationEntryPoint)
    {
        $this->securityContext = $securityContext;
        $this->authenticationEntryPoint = $authenticationEntryPoint;
    }

    public function handle(GetResponseEvent $event)
    {
        $token = $this->securityContext->getToken();
        $request = $event->getRequest();
        if($token === null){
            return;
        }

        //add your logic
        $redirect = // boolean value based on your logic

        if($token->isAuthenticated() && $redirect){

            $response = $this->authenticationEntryPoint->start($request);
            $event->setResponse($response);
            return;
        }
    }

} 
```

创建服务。

```
<?xml version="1.0" ?>
<container xmlns="http://symfony.com/schema/dic/services"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>

        <service id="my_firewall.security.authentication.listener"
                 class="Your\Namespace\MyAuthenticationListener"
                 parent="security.authentication.listener.abstract"
                 abstract="true">
            <argument type="service" id="security.context" />
            <argument /> <!-- Entry Point -->
        </service>

        <service id="my_firewall.entry_point" class="Your\Namespace\MyAuthenticationEntryPoint" public="false" ></service>

        <service id="my_firewall.auth_provider" class="Your\Namespace\MyAuthProvider" public="false"></service>
    </services>

</container> 
```

注册监听器。`Security/Factory`在您的 bundles文件夹中创建一个名为的`DependencyInjection`文件夹。然后创建工厂类。

```
namespace Your\Bundle\DependencyInjection\Security\Factory;

use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\DependencyInjection\Reference;
use Symfony\Component\DependencyInjection\DefinitionDecorator;
use Symfony\Component\DependencyInjection\Definition;
use Symfony\Bundle\SecurityBundle\DependencyInjection\Security\Factory\SecurityFactoryInterface;
use Symfony\Component\Config\Definition\Builder\NodeDefinition;

class MyFirewallFactory implements SecurityFactoryInterface
{

    public function create(ContainerBuilder $container, $id, $config, $userProvider, $defaultEntryPoint)
    {
        $provider = 'my_firewall.auth_provider.'.$id;
        $container->setDefinition($provider, new DefinitionDecorator('my_firewall.auth_provider'));

        // entry point
        $entryPointId = $this->createEntryPoint($container, $id, $config, $defaultEntryPoint);

        // listener
        $listenerId = 'my_firewall.security.authentication.listener'.$id;
        $listener = $container->setDefinition($listenerId, new DefinitionDecorator('my_firewall.security.authentication.listener'));
        $listener->replaceArgument(1, new Reference($entryPointId));
        return array($provider, $listenerId, $entryPointId);
    }

    public function getPosition()
    {
        return 'pre_auth';
    }

    public function getKey()
    {
        return 'my_firewall'; //the listener name
    }

    protected function getListenerId()
    {
        return 'my_firewall.security.authentication.listener';
    }

    public function addConfiguration(NodeDefinition $node)
    {
        $node
            ->children()
                ->scalarNode('redirect_path')->end()
            ->end()
            ;
    }

    protected function createEntryPoint($container, $id, $config, $defaultEntryPointId)
    {
        $entryPointId = 'my_firewall.entry_point'.$id;
        $container
            ->setDefinition($entryPointId, new DefinitionDecorator('my_firewall.entry_point'))
            ->addArgument(new Reference('security.http_utils'))
            ->addArgument($config['redirect_path'])
            ;
        return $entryPointId;
    }

} 
```

然后在您`NamespaceBundle.php`的捆绑文件夹中添加以下代码。

```
public function build(ContainerBuilder $builder){
    parent::build($builder);
    $extension = $builder->getExtension('security');
    $extension->addSecurityListenerFactory(new Security\Factory\MyFirewallFactory());
} 
```

创建了身份验证侦听器，唷 :)。现在在你`app/config/security.yml`做以下。

```
api_area:
  pattern: ^/secured/
  provider: fos_userbundle
  form_login:
    check_path: /login_check
    login_path: /login
    csrf_provider: form.csrf_provider
  my_firewall:
    redirect_path: /beta
  logout: true
  anonymous: true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:26:27.557

我不知道这是否是正确的方法但是您可以尝试以下方法

/vendor/symfony/src/Symfony/Component/HttpKernel/HttpKernel.php 有一个方法*handleRaw*将请求转换为响应。可以从那里访问请求对象。您可以检查客户端是否请求访问受保护的页面。如果是这样，您可以手动设置控制器，如

```
$request->attributes->set('_controller','your\Bundle\SecureBundle\Controller\SecureController::secureAction'); 
```

如果用户尝试访问安全页面并检查控制器内部的相同内容，另一种解决方案是设置会话

同样，这可能不是正确的方法，但它是一种可能的解决方法

# performance - 如果图像在另一个域上，我的网站加载速度会更快吗？

> ID：10089818
> 
> 赞同：0
> 
> 时间：2012-04-10T13:27:53.200
> 
> 标签：performance, image, browser

我想知道如果我用来在我的 wordpress 上上传它的图像`wp-content-uploads`现在将存储在我安装了图像上传服务（如 flickr 或任何用于上传服务的网站。

[因为当我在http://gtmetrix.com](http://gtmetrix.com)上执行测试时，我的页面速度为 93%，而 Yslow 仅为 72%

[http://gtmetrix.com/reports/applesiam.com/rF12jFmv](http://gtmetrix.com/reports/applesiam.com/rF12jFmv)

我真的认为我的页面加载缓慢，因为它说

```
Page load time: 14.54s
Total page size: 4.35MB
Total number of requests: 169 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:33:35.643

大概。

大多数浏览器会限制对每个域的同时请求数量，因此使用多个域可以让浏览器同时发出更多请求。这应该会导致更快的页面呈现。

但是，如果从您的域中获取图像比从原始图像中获取图像要慢得多，则更改不会提高加载速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:18:37.220

我认为将您的图像托管在另一个主机名上不会对您的网站性能产生太大影响。

该网站很慢，因为页面太大，并且有许多第三方组件 - 这个瀑布会给你一些想法 -

[http://www.webpagetest.org/result/120411_BG_b66024d1dda2429676d1e646e4b23a86/](http://www.webpagetest.org/result/120411_BG_b66024d1dda2429676d1e646e4b23a86/)

看看如何减少组件的数量。

更新：

认真看看组件的数量和它们的来源——页面上的**195**个资源中只有**31**个来自 applesiam.com

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T19:24:45.873

它会更快。但是，从浏览器到域的同时连接数通常限制为 4-6。您可以通过为您的静态内容创建一堆子域别名来规避此限制，所有这些别名都指向同一个 IP。喜欢

```
s[1-5].yourdomain.com -> same IP 
```

然后从不同的域访问您的图像，浏览器将并行加载它们。

**更新**：

更彻底地查看您的网站，您的网站的响应速度很慢。

请求`http://applesiam.com/wp-content/themes/volt/images/social_sprite_32.png`返回 HTTP 304（未修改），但这需要 824 毫秒（用 Firebug 测试）。它应该距离地球的另一端大约 100 毫秒。

我为此图像做了一些 ApacheBench 测试。

10个并发请求：

```
» ab -n 10 -c 10 http://applesiam.com/wp-content/themes/volt/images/social_sprite_32.png

Percentage of the requests served within a certain time (ms)
  50%   1683
  66%   1685
  75%   1701
  80%   1710
  90%   1710
  95%   1710
  98%   1710
  99%   1710
 100%   1710 (longest request) 
```

20个并发请求：

```
» ab -n 20 -c 20 http://applesiam.com/wp-content/themes/volt/images/social_sprite_32.png

Percentage of the requests served within a certain time (ms)
  50%   2272
  66%   2899
  75%   2910
  80%   2974
  90%   2982
  95%   2985
  98%   2985
  99%   2985
 100%   2985 (longest request) 
```

将同时请求的数量增加一倍几乎使响应时间增加了一倍，这意味着您的服务器无法处理中等数量的请求。您应该检查您的服务器是否存在瓶颈（CPU、RAM、网络、Web 服务器配置）。

# asp.net-web-api - 属性注入到 Web API 的 `System.Web.Http.Filters.ActionFilterAttribute`

> ID：10089823
> 
> 赞同：4
> 
> 时间：2012-04-10T13:32:25.757
> 
> 标签：asp.net-web-api

在 ASP.NET Web api 项目中向操作过滤器属性执行属性注入的推荐位置在哪里？在 MVC 3 领域，我们可以在从 IoC 容器解析控制器时设置自己的实现`ControllerActionInvoker`，并覆盖其`GetFilters()`方法以注入从容器解析的组件。

在 ASP.NET Web API 项目中是否有类似的地方可以执行此操作？我有一个控制器工厂，它从容器中解析控制器，`CreateController`方法如下：

```
public IHttpController CreateController(HttpControllerContext controllerContext, string controllerName)
{
    var controller = _kernel.Resolve<IHttpController>(controllerName);

    controllerContext.Controller = controller;
    controllerContext.ControllerDescriptor = new HttpControllerDescriptor(_configuration, controllerName, controller.GetType());

    return controllerContext.Controller;
} 
```

我已经看了一下`HttpControllerDescriptor`是否有地方可以注射，但我找不到合适的地方。任何指向正确方向的指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:48:50.637

~~您 需要`IHttpControllerSelector`在. `Services`_`DefaultServices``HttpConfiguration`~~

~~或者，要使用您自己的解析器/DI 框架，您需要更换解析器。有关示例， 请参见[此处。](http://weblogs.asp.net/shijuvarghese/archive/2012/04/01/dependency-injection-in-asp-net-web-api-using-autofac.aspx)~~

* * *

您需要实现自己的`IFilterProvider`. 看看源代码`ActionDescriptorFilterProvider`。这是您可以注入属性的地方。

这是`ActionDescriptorFilterProvider`实现：

```
 public IEnumerable<FilterInfo> GetFilters(HttpConfiguration configuration, HttpActionDescriptor actionDescriptor)
    {
        if (configuration == null)
        {
            throw Error.ArgumentNull("configuration");
        }

        if (actionDescriptor == null)
        {
            throw Error.ArgumentNull("actionDescriptor");
        }

        IEnumerable<FilterInfo> controllerFilters = actionDescriptor.ControllerDescriptor.GetFilters().Select(instance => new FilterInfo(instance, FilterScope.Controller));
        IEnumerable<FilterInfo> actionFilters = actionDescriptor.GetFilters().Select(instance => new FilterInfo(instance, FilterScope.Action));

        return controllerFilters.Concat(actionFilters);
    } 
```

您所要做的就是使用`instance`lambda 参数和注入属性。

**注册**如您所见，过滤器提供程序需要针对`HttpConfiguration`. 或者，要使用您自己的解析器/DI 框架，您需要更换解析器。有关示例，请参见[此处。](http://weblogs.asp.net/shijuvarghese/archive/2012/04/01/dependency-injection-in-asp-net-web-api-using-autofac.aspx)

# java - 不能从静态上下文中引用非静态方法

> ID：10089826
> 
> 赞同：1
> 
> 时间：2012-04-10T13:32:34.923
> 
> 标签：java, oop, static

下面的代码出现在我试图创建的包的主类中。它从一个名为 Journey 的帮助器类中引用对象和方法。在星号标记的行中调用`journeyCost`方法时，出现“无法从静态上下文引用非静态方法”错误。这让我感到困惑，因为我的印象是在第二行中创建的 Journey 对象“thisJourney”构成了该类的一个实例，因此意味着上下文不是静态的。在此先感谢，西尼。

```
public boolean journey(int date, int time, int busNumber, int journeyType){
        Journey thisJourney = new Journey(date, time, busNumber, journeyType);

        if (thisJourney.isInSequence(date, time) == false)
        {
            return false;            
        }
        else
        {
            Journey.updateCurrentCharges(date);

            thisJourney.costOfJourney = Journey.journeyCost(thisJourney);***** 
            Journey.dayCharge = Journey.dayCharge + thisJourney.costOfJourney;
            Journey.weekCharge = Journey.weekCharge + thisJourney.costOfJourney;
            Journey.monthCharge = Journey.monthCharge + thisJourney.costOfJourney;

            Balance = Balance - thisJourney.costOfJourney;
            jArray.add(thisJourney);
        }

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T13:34:26.883

该错误意味着您正在尝试以静态方式调用非静态方法，例如：

```
 Journey.journeyCost(thisJourney); 
```

是否`journeyCost()`声明为静态？你不是说相反`thisJourney.journeyCost()`吗？

另外，您应该使用 getter 和 setter 来修改和访问您的成员变量，而不是：

```
Journey.dayCharge = ... 
```

你应该有

```
Journey.setDayCharge(Journey.getDayCharge() + thisJourney.getCostOfJourney()); 
```

（在这种情况`setDayCharge`下`getDayCharge`需要是静态的）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T13:41:42.293

所有这些行都需要更改。除非您真的想用最后三行更改所有未来的旅程费用（假设这些是静态值）

```
thisJourney.costOfJourney = thisJourney.journeyCost();//dont know why you are passing the journey object to this method.
Journey.dayCharge = Journey.dayCharge + thisJourney.costOfJourney;
Journey.weekCharge = Journey.weekCharge + thisJourney.costOfJourney;
Journey.monthCharge = Journey.monthCharge + thisJourney.costOfJourney; 
```

最后三行仍然需要工作，我不知道您为什么要尝试修改静态变量。如果您只想设置`thisJourney`

```
thisJourney.dayCharge = Journey.dayCharge + thisJourney.costOfJourney;
thisJourney.weekCharge = Journey.weekCharge + thisJourney.costOfJourney;
thisJourney.monthCharge = Journey.monthCharge + thisJourney.costOfJourney; 
```

尽管即使如此，电荷值也应该是恒定的。您真的不应该混合使用相同类型的静态类和实例类，同时互换它们的用途。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T13:35:48.803

改变

```
Journey.journeyCost(....) 
```

至

```
thisJourny.journyCost(...........) 
```

您的**journyCost是****Journy** clss的非静态方法，因此您必须通过其对象**thisJourny调用此方法**

使用类名，您只能访问**静态成员**或调用该类的**静态方法。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T13:41:51.470

该方法`journeyCost`是非静态的；所以它是一个实例方法，它需要一个实例`Journey`来执行。该语句`Journey.journeyCost(thisJourney);`以静态方式调用方法，并且期望您的方法是类级方法（或静态）。

因此，您可以使您的`journeyCost`方法静态以使您的调用生效：

```
public static boolean journey(int date, int time, int busNumber, int journeyType) 
```

或者尝试从适当的实例调用该方法：

```
Journey aJourneyInstance = new Journey();
thisJourney.costOfJourney = aJourneyInstance.journeyCost(thisJourney); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T13:35:33.847

也许方法 JourneyCost(Journey Journey) 应该是静态的？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-10T13:35:40.363

当你使用 Journey.someMethod() 时，someMethod 是一个静态方法。“旅程”是在静态上下文中。thisJourney 是在非静态上下文中，因为它是一个实例。因此，您应该使用

```
 thisJourney.updateCurrentCharges(date); 
```

# wso2 - 超过 1500 个具有 JMS 传输、WSO2 ESB 4.0.3 和 Activemq 的代理

> ID：10089832
> 
> 赞同：0
> 
> 时间：2012-04-10T13:32:48.720
> 
> 标签：wso2, activemq, wso2esb

有没有开发者已经成功部署到 wso2 esb 1500 多个代理服务和 jms 传输没有任何问题？

标准：

*   部署过程必须非常快
*   wso2esb 使用 activemq 客户端库和 activemq brocker

有人请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:34:48.457

这应该是可能的。ESB 可以拥有的代理数量没有限制。您可以尝试使用 WSO2 ESB 的热部署功能。

您可以创建一堆代理服务并将它们放在：/repository/deployment/server/synapse-config/default/proxy-services

然后代理自动部署..

例如：

proxy_1.xml、proxy_2.xml、proxy_3.xml、...、proxy_1500.xml 等。

然而，拥有这么多的代理服务，在您的 SOA 中给出了一些反模式的迹象。请查看您的解决方案架构中是否需要这么多代理服务。

# python - 使用 paramiko 的 SSH 通信器

> ID：10089836
> 
> 赞同：1
> 
> 时间：2012-04-10T13:33:04.433
> 
> 标签：python, paramiko

我尝试在 Python 上创建一个 ssh 类。

```
ssh    = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect(host, username=username, password=password)
stdin, stdout, stderr = ssh.exec_command('ls -l')
ssh.close() 
```

此代码提供连接服务器，但是当我尝试连接另一台服务器时，出现此错误：

```
userauth is OK
transport._log() => Authentication type (publickey) not permitted.
transport._log() => Allowed methods: ['password']
transport._log() => EOF in transport thread 
```

我无法解决错误。任何想法？

# c# - Linq 使用“不存在”和“分组依据”的对象？

> ID：10089837
> 
> 赞同：2
> 
> 时间：2012-04-10T13:33:04.933
> 
> 标签：c#, linq, fluent-nhibernate

我在工作中被分配了一个使用 NHibernate 的新项目。我可以在 sql 中轻松编写的查询让我完全不知道如何在 linq 中执行此操作，这就是我被告知这样做的方式。

所以，这里是查询：

```
select  ts.BatchID, COUNT(distinct ts.UniqID) SurveyCount
from    TeleformStaging.TeleformStaging ts
where   ts.IsRescan = 0
and     not exists (select  bfr.BatchID
                    from    TeleformStaging.BatchesForRescan bfr
                    where   bfr.BatchTrack = ts.BatchID)
group by ts.BatchID
order by ts.BatchID 
```

我相信我可以获得“分组依据”部分，但不知道子查询。

感谢您的任何建议...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T13:40:22.640

也许是这样的：

```
var result= (
        from ts in db.TeleformStaging
        where ts.IsRescan == false //if is a boolean else == 0
        && 
        !(
            from bfr in db.BatchesForRescan
            select bfr.BatchTrack
        ).Contains(ts.BatchID)
        orderby ts.BatchID
        group ts by ts.BatchID into g
        select new
        {
            BatchID=g.Key,
            SurveyCount=g.Select (x =>x.UniqID).Distinct().Count()
        }
    ); 
```

其中 db 是 linq 数据上下文

**编辑**

您也可以使用`.Any()`. 像这样：

```
var result= (
        from ts in db.TeleformStaging
        where ts.IsRescan == false //if is a boolean else == 0
        && 
        !(
            from bfr in db.BatchesForRescan
            where ts.BatchID==bfr.BatchTrack
            select bfr.BatchTrack
        ).Any()
        orderby ts.BatchID
        group ts by ts.BatchID into g
        select new
        {
            BatchID=g.Key,
            SurveyCount=g.Select (x =>x.UniqID).Distinct().Count()
        }
    ); 
```

**编辑 1**

有用的链接：

*   [包含](http://msdn.microsoft.com/en-us/library/bb352880.aspx)
*   [任何](http://msdn.microsoft.com/en-us/library/bb337697.aspx)
*   [简单分组](http://blog.csainty.com/2008/01/linq-to-sql-groupby.html)
*   [基本 LINQ 查询操作 (C#)](http://msdn.microsoft.com/en-us/library/bb397927.aspx)
*   [订购方式](http://msdn.microsoft.com/en-us/library/bb534966.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:41:54.343

```
from fs in context.TeleformStaging
where !ts.IsRescan && !context.BatchesForRescan.Any(bfr=>bfr.BatchTrack == ts.BatchID)
group ts by ts.BatchID into g
    select new
    {
        BatchID=g.Key,
        SurveyCount=g.Select (x =>x.UniqID).Distinct().Count()
    } 
```

与分组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:48:32.123

LINQ 稍微颠倒过来，但确实提供了一些 lambda 表达式的复杂性；这看起来如何：

```
var result = from ts in TeleformStaging.TeleformStaging
                where !ts.IsRescan && !TeleformStaging.BatchesForRescan.Any(bfr => bfr.BatchID == ts.BatchID)
                group ts by ts.BatchID into tsGrouped
                orderby tsGrouped.Key
                select new
                {
                    BatchId = tsGrouped.Key,
                    SurveyCount = tsGrouped.Select(x => x.UniqID).Distinct().Count()
                }; 
```

# apache - Windows 服务器 2008/glassfish/postgres 代理超时 HTTP 空闲 120 秒后

> ID：10089845
> 
> 赞同：0
> 
> 时间：2012-04-10T13:33:30.893
> 
> 标签：apache, netbeans, glassfish, windows-server-2008

**环境：**

Windows 2008 服务器版

网豆 6.7.1

玻璃鱼 2.1

Apache 2.2.15 for win32

**原始问题（几乎已修复）：**

如果我等待超过 30 秒，发送数据的 HTTP/1.1 GET 方法会失败。

**我做了什么：**

我在 Apache 的 http.conf 文件中添加了以下几行：

```
#
# Timeout: The number of seconds before receives and sends time out.
#
Timeout 9000

#
# KeepAlive: Whether or not to allow persistent connections (more than
# one request per connection). Set to "Off" to deactivate.
#
KeepAlive On 
```

我去了 Glassfish 面板（*localhost:4848*）并在*Configuration > HTTP services*中输入：

超时请求：9000 秒（30 秒）

待机时间：-1（30秒）

**问题：**

我无法为 glassfish 设置大于 2 分钟的超时来发送 GET 方法。

我找到了这篇[关于 glassfish 设置](https://blogs.oracle.com/binublog/entry/glassfish_tuning_http_connection_queue)的文章，但我找不到应该把这些参数放在哪里，以及它们是否可以工作。

任何人都可以帮助尝试将此超时设置为更高的限制吗？

**新尝试的解决方案：**

我转到 glassfish 面板控件，然后转到*Configuration > Subprocesses > "Thread-pool-name"*并将空闲超时从 120 秒更改为 1200 秒。然后我重新启动了 glassfish 服务（来自管理工具和 asadmin），但它仍然等待 120 秒进入空闲状态。我什至尝试重新启动整个服务器，仍然没有结果。也许在 postgres 中有一些设置？还是通过 glassfish 将 netbeans 连接到 postgres？

**新发现：**

我一直在互联网上搜索，也许它可能是代理超时，但我现在真的不知道如何改变它：有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:16:31.847

最后是Apache文件中的`ProxyTimeout`指令。`httpd.conf`

看看[这个](http://httpd.apache.org/docs/2.0/mod/mod_proxy.html#proxytimeout)。

# c# - c#字典如何为单个键添加多个值？

> ID：10089850
> 
> 赞同：30
> 
> 时间：2012-04-10T13:33:45.337
> 
> 标签：c#, list, dictionary

我创建了字典对象

```
Dictionary<string, List<string>> dictionary =
    new Dictionary<string,List<string>>(); 
```

我想将字符串值添加到给定单个键的字符串列表中。如果密钥不存在，那么我必须添加一个新密钥。`List<string>`不是预定义的，我的意思是我没有创建任何列表对象，然后提供给`dictionary.Add("key",Listname)`. 如何在其中动态创建此列表对象`dictionary.Add("key",Listname)`，然后将字符串添加到此列表中。如果我必须添加 100 个键，那么我是否必须在执行`dictionary.Add`指令之前创建 100 个列表，并且我是否必须定义这些列表的内容？

谢谢你。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-10T13:37:11.193

**更新：**`TryGetValue`在您拥有列表的情况下，仅使用一次查找来检查是否存在：

```
List<int> list;

if (!dictionary.TryGetValue("foo", out list))
{
    list = new List<int>();
    dictionary.Add("foo", list);
}

list.Add(2); 
```

* * *

**原文：** 检查存在并添加一次，然后键入字典以获取列表并正常添加到列表中：

```
var dictionary = new Dictionary<string, List<int>>();

if (!dictionary.ContainsKey("foo"))
    dictionary.Add("foo", new List<int>());

dictionary["foo"].Add(42);
dictionary["foo"].AddRange(oneHundredInts); 
```

或者`List<string>`就像你的情况一样。

顺便说一句，如果您知道要向动态集合中添加多少项，例如`List<T>`，请支持采用初始列表容量的构造函数：`new List<int>(100);`。

*这将预先*获取满足指定容量所需的内存，而不是每次开始填满时都抓取小块。如果你知道你有 100 个键，你可以对字典做同样的事情。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-10T13:37:33.343

如果我明白你想要什么：

```
dictionary.Add("key", new List<string>()); 
```

之后...

```
dictionary["key"].Add("string to your list"); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-10T13:41:12.840

```
Dictionary<string, List<string>> dictionary = new Dictionary<string,List<string>>();

foreach(string key in keys) {
    if(!dictionary.ContainsKey(key)) {
        //add
        dictionary.Add(key, new List<string>());
    }
    dictionary[key].Add("theString");
} 
```

如果键不存在，`List`则添加一个新键（在 if 内）。否则该键存在，因此只需`List`在该键下添加一个新值。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-10T13:39:23.350

您可以使用我的 multimap 实现，它派生自`Dictionary<K, List<V>>`. 它并不完美，但它做得很好。

```
/// <summary>
/// Represents a collection of keys and values.
/// Multiple values can have the same key.
/// </summary>
/// <typeparam name="TKey">Type of the keys.</typeparam>
/// <typeparam name="TValue">Type of the values.</typeparam>
public class MultiMap<TKey, TValue> : Dictionary<TKey, List<TValue>>
{

    public MultiMap()
        : base()
    {
    }

    public MultiMap(int capacity)
        : base(capacity)
    {
    }

    /// <summary>
    /// Adds an element with the specified key and value into the MultiMap. 
    /// </summary>
    /// <param name="key">The key of the element to add.</param>
    /// <param name="value">The value of the element to add.</param>
    public void Add(TKey key, TValue value)
    {
        List<TValue> valueList;

        if (TryGetValue(key, out valueList)) {
            valueList.Add(value);
        } else {
            valueList = new List<TValue>();
            valueList.Add(value);
            Add(key, valueList);
        }
    }

    /// <summary>
    /// Removes first occurence of an element with a specified key and value.
    /// </summary>
    /// <param name="key">The key of the element to remove.</param>
    /// <param name="value">The value of the element to remove.</param>
    /// <returns>true if the an element is removed;
    /// false if the key or the value were not found.</returns>
    public bool Remove(TKey key, TValue value)
    {
        List<TValue> valueList;

        if (TryGetValue(key, out valueList)) {
            if (valueList.Remove(value)) {
                if (valueList.Count == 0) {
                    Remove(key);
                }
                return true;
            }
        }
        return false;
    }

    /// <summary>
    /// Removes all occurences of elements with a specified key and value.
    /// </summary>
    /// <param name="key">The key of the elements to remove.</param>
    /// <param name="value">The value of the elements to remove.</param>
    /// <returns>Number of elements removed.</returns>
    public int RemoveAll(TKey key, TValue value)
    {
        List<TValue> valueList;
        int n = 0;

        if (TryGetValue(key, out valueList)) {
            while (valueList.Remove(value)) {
                n++;
            }
            if (valueList.Count == 0) {
                Remove(key);
            }
        }
        return n;
    }

    /// <summary>
    /// Gets the total number of values contained in the MultiMap.
    /// </summary>
    public int CountAll
    {
        get
        {
            int n = 0;

            foreach (List<TValue> valueList in Values) {
                n += valueList.Count;
            }
            return n;
        }
    }

    /// <summary>
    /// Determines whether the MultiMap contains an element with a specific
    /// key / value pair.
    /// </summary>
    /// <param name="key">Key of the element to search for.</param>
    /// <param name="value">Value of the element to search for.</param>
    /// <returns>true if the element was found; otherwise false.</returns>
    public bool Contains(TKey key, TValue value)
    {
        List<TValue> valueList;

        if (TryGetValue(key, out valueList)) {
            return valueList.Contains(value);
        }
        return false;
    }

    /// <summary>
    /// Determines whether the MultiMap contains an element with a specific value.
    /// </summary>
    /// <param name="value">Value of the element to search for.</param>
    /// <returns>true if the element was found; otherwise false.</returns>
    public bool Contains(TValue value)
    {
        foreach (List<TValue> valueList in Values) {
            if (valueList.Contains(value)) {
                return true;
            }
        }
        return false;
    }

} 
```

请注意，该`Add`方法会查看密钥是否已存在。如果键是新的，则创建一个新列表，将值添加到列表中，并将列表添加到字典中。如果键已经存在，则将新值添加到现有列表中。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-10T14:31:39.020

使用 NameValuedCollection。

好的起点就[在这里](http://arcanecode.com/2007/06/25/collections-in-c-namevaluecollection/)。直接从链接。

```
System.Collections.Specialized.NameValueCollection myCollection
    = new System.Collections.Specialized.NameValueCollection();

  myCollection.Add(“Arcane”, “http://arcanecode.com”);
  myCollection.Add(“PWOP”, “http://dotnetrocks.com”);
  myCollection.Add(“PWOP”, “http://dnrtv.com”);
  myCollection.Add(“PWOP”, “http://www.hanselminutes.com”);
  myCollection.Add(“TWIT”, “http://www.twit.tv”);
  myCollection.Add(“TWIT”, “http://www.twit.tv/SN”); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-10T13:45:57.470

尽管与大多数其他响应几乎相同，但我认为这是实现它的最有效和最简洁的方式。正如其他一些解决方案所示，使用 TryGetValue 比使用 ContainsKey 和重新索引到字典中更快。

```
void Add(string key, string val)
{
    List<string> list;

    if (!dictionary.TryGetValue(someKey, out list))
    {
       values = new List<string>();
       dictionary.Add(key, list);
    }

    list.Add(val);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-10T13:38:33.063

添加字符串时，请根据键是否已存在而有所不同。`value`要为键添加字符串`key`：

```
List<string> list;
if (dictionary.ContainsKey(key)) {
  list = dictionary[key];
} else {
  list = new List<string>();
  dictionary.Add(ley, list);
}
list.Add(value); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-27T14:17:57.433

这是一个答案的许多变体：）我是另一个答案，它使用扩展机制作为执行的舒适方式（方便）：

```
public static void AddToList<T, U>(this IDictionary<T, List<U>> dict, T key, U elementToList)
{

    List<U> list;

    bool exists = dict.TryGetValue(key, out list);

    if (exists)
    {
        dict[key].Add(elementToList);
    }
    else
    {
        dict[key] = new List<U>();
        dict[key].Add(elementToList);
    }

} 
```

然后按如下方式使用它：

```
Dictionary<int, List<string>> dict = new Dictionary<int, List<string>>();

dict.AddToList(4, "test1");
dict.AddToList(4, "test2");
dict.AddToList(4, "test3");

dict.AddToList(5, "test4"); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-10T13:46:58.160

为什么不使用字典，而不是转换为 ILookup？

```
var myData = new[]{new {a=1,b="frog"}, new {a=1,b="cat"}, new {a=2,b="giraffe"}};
ILookup<int,string> lookup = myData.ToLookup(x => x.a, x => x.b);
IEnumerable<string> allOnes = lookup[1]; //enumerable of 2 items, frog and cat 
```

ILookup 是一个不可变的数据结构，它允许每个键有多个值。如果您需要在不同时间添加项目，可能没有多大用处，但如果您预先准备好所有数据，这绝对是要走的路。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-03-10T22:01:27.560

使用来自[ConcurrentDictionary的](https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentdictionary-2?view=net-5.0)[AddOrUpdate](https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentdictionary-2.addorupdate?view=net-5.0#System_Collections_Concurrent_ConcurrentDictionary_2_AddOrUpdate__0__1_System_Func__0__1__1__)有一种“单命令行”方式：

```
using System.Linq;
using System.Collections.Generic;
using System.Collections.Concurrent;

...

var dictionary = new ConcurrentDictionary<string, IEnumerable<string>>();
var itemToAdd = "item to add to key-list";

dictionary.AddOrUpdate("key", new[]{itemToAdd}, (key,list) => list.Append(itemToAdd));

// If "key" doesn't exist, creates it with a list containing itemToAdd as value
// If "key" exists, adds item to already existent list (third parameter) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-10-01T12:33:24.390

有一个 NuGet 包[Microsoft Experimental Collections](https://www.nuget.org/packages/Microsoft.Experimental.Collections/)，其中包含一个`MultiValueDictionary`完全符合您需要的类。

[这](http://blogs.msdn.com/b/dotnet/archive/2014/06/20/would-you-like-a-multidictionary.aspx)是软件包创建者的博客文章，进一步描述了它。

如果您感到好奇，[这里是另一篇博客文章。](http://blogs.msdn.com/b/dotnet/archive/2014/08/05/multidictionary-becomes-multivaluedictionary.aspx)

**示例用法：**

```
MultiDictionary<string, int> myDictionary = new MultiDictionary<string, int>();
myDictionary.Add("key", 1);
myDictionary.Add("key", 2);
myDictionary.Add("key", 3);
//myDictionary["key"] now contains the values 1, 2, and 3 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-12-01T11:33:38.757

我试图将 List 添加到字典中的现有键并达到以下解决方案：

```
Dictionary<string,List<string>> NewParent = new Dictionary<string,List<string>>();
child = new List<string> ();
child.Add('SomeData');
NewParent["item1"].AddRange(child); 
```

它不会显示任何异常，也不会替换以前的值。

# wso2 - 获取租户状态时出错

> ID：10089857
> 
> 赞同：1
> 
> 时间：2012-04-10T13:34:25.433
> 
> 标签：wso2, wso2stratos

我有一个正在运行的 Stratos 1.5.1 实例。在 Stratos 坐了一夜而没有与之交互后，我在登录身份服务器时收到以下消息

我在 url 调用和 user-mgt.xml 的属性标记中都将 autoReconnect 添加为 true

如果有人知道为什么自动重新连接不起作用，那就太好了。谢谢。

```
[2012-04-09 07:48:04,801] ERROR {org.wso2.carbon.user.core.tenant.TenantManager} -  Error in getting the tenant status with tenant id: 2.
[2012-04-09 07:48:04,802] ERROR {org.wso2.carbon.identity.sso.saml.processors.AuthnRequestProcessor} -  Error processing the authentication request
org.wso2.carbon.user.core.UserStoreException: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: The last packet successfully received from the server was 331,971,492 milliseconds ago.  The last packet sent successfully to the server was 331,971,492 milliseconds ago. is longer than the server configured value of 'wait_timeout'. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property 'autoReconnect=true' to avoid this problem.
at org.wso2.carbon.user.core.tenant.JDBCTenantManager.isTenantActive(JDBCTenantManager.java:444)
at org.wso2.carbon.identity.sso.saml.processors.AuthnRequestProcessor.process(AuthnRequestProcessor.java:91)
at org.wso2.carbon.identity.sso.saml.SAMLSSOService.authenticate(SAMLSSOService.java:78)
at sun.reflect.GeneratedMethodAccessor55.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.axis2.rpc.receivers.RPCUtil.invokeServiceClass(RPCUtil.java:212)
at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:117)
at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110)
at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
at org.wso2.carbon.core.transports.CarbonServlet.doPost(CarbonServlet.java:199)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.wso2.carbon.bridge.BridgeServlet.service(BridgeServlet.java:155)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:154)
at org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer.java:245)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:396)
at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:356)
at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1534)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:21:31.190

我按照指示在

[http://www.lahiru.org/2010/07/keep-live-connection-in-wso2-products.html](http://www.lahiru.org/2010/07/keep-live-connection-in-wso2-products.html)

来纠正这个问题。

这表示要做的是保持 mysql 连接可用。这需要我添加这些属性

```
wait_timeout=259200

interactive_timeout=259200 
```

和 /etc/my.conf 文件的值。我重新启动，然后等待 24 小时进行验证，然后再次尝试登录，这次成功了。

# c++ - 图像变换（强风）c/c++

> ID：10089867
> 
> 赞同：0
> 
> 时间：2012-04-10T13:35:14.357
> 
> 标签：c++, c, image, transformation, warp

我想像这样操作图像： http: [//cdn.jolie.de/bilder/frisuren-fuer-eckige-gesichter-400x500-641657.jpg](http://cdn.jolie.de/bilder/frisuren-fuer-eckige-gesichter-400x500-641657.jpg)

操作后它应该有这样的效果：http: [//old.likeyou.com/artistsbios/gfx.php ?id=9025](http://old.likeyou.com/artistsbios/gfx.php?id=9025)

就像强风吹在你的脸上。

你有什么提示/想法我能做到这一点吗？对于人脸检测，使用 OpenCV。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:40:46.150

您会想要添加一些放置在面部某些边缘上的锚点。完成后，您想将这些锚点“扭曲”到 1 个方向（不要关闭，否则会变得很奇怪），然后玩弄一些属性，直到产生您喜欢的东西。

方法二：

在脸部周围制作一个网格，您可以将更多的网格扭曲得越多，细节越多，尽管这永远不会像锚点那样精确。

# delphi - F2051 Unit JclUnitVersioning 使用不同版本的 System.Contnrs.TObjectList.Remove 编译

> ID：10089869
> 
> 赞同：1
> 
> 时间：2012-04-10T13:35:21.813
> 
> 标签：delphi, delphi-xe2, jvcl, jedi-code-library

我正在将一个 Delphi 2 项目迁移到 RAD Studio XE2。

当我尝试编译时，我得到

> [DCC 致命错误] MyUnit.pas(9): F2051 Unit JclUnitVersioning 是用不同版本的 System.Contnrs.TObjectList.Remove 编译的

在下一行：

```
unit MyUnit;

interface

uses
  Windows, Messages, SysUtils, Classes, Graphics, Controls, Forms, Dialogs,
  StdCtrls, DB, DBTables, TB97, ExtCtrls, Grids, DBGrids, Vcl.Mask, JvExMask,
  Vcl.DBLookup,
  JvToolEdit,  {<-- error here}
  TB97Ctls;

{...} 
```

我尝试卸载并重新安装 RAD Studio、JCL 和 JVCL，但没有任何变化。

**更新使用**[来自 A.Hausladen](http://andy.jgknet.de/blog/2011/11/updated-jcl-and-jvcl-binary-installers-for-xe2-2/)的二进制 Jedi安装程序（仅用于 Delphi 试用版）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:23:27.317

您要么有旧的 DCU 文件需要重建或删除，要么您的项目或库路径内容不一致。（找到`JclUnitVersioning.dcu`不在正确 JCL 库文件夹中的文件，并将其删除。正确的库文件夹命名为`jcl\lib\d7`，通过`jcl\lib\d16`，取决于您的 delphi 版本号）

这通常意味着您的项目既可以访问包含预编译 DCU 文件的库路径（或项目搜索路径）中的目录，也可以访问某些源单元（.pas 文件），并且一个或多个依赖于其他单元的单元是在与现在不同的时间编译的，具有多个版本的公共单元。我希望我能给你画一幅画。

想象一下，你有一辆车，有人升级了引擎，把它从 V6 换成了 V8。现在，以前为您的发动机维修过的人回来并试图找到 V6 排气歧管的连接位置。它已经不在了，它被移动了。由于新发动机已冻结在当前形状（留在我这里！），您的服务技术人员只是回到您（客户）并说，“对不起，我很困惑，我不能继续，我放弃”。这大致就是此错误消息的含义。

可以通过多种方式进行清理；`.pas`确保 100% 从文件编译并且根本没有包含文件的库文件夹对您来说可能是一件简单的事情`.dcu`。当然，这并不理想，是吗，因为库路径的全部目的是包含 DCU 文件的预编译“库”。

因此，我建议您进行清理（删除所有 DCU 文件）并从源代码重建所有组件包（您确实有一个批处理文件用于此目的吗？），然后查看项目的搜索路径和库路径看到它们都只包含您认为它们应该包含的文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T14:54:06.917

刚刚在 Delphi 2010 和 XE3 上遇到了同样的问题（迁移时都在同一台 PC 上）。

在重新编译我的项目和 JCL 项目（我的 PC 上的安装程序 bat 文件错误）几个小时后，发现问题是在 tools/options/Delphi Options/libraries 中声明目录的顺序。

将它们全部取出，添加特定于版本的目录（例如 lib\D14、lib\D17\Win32），然后添加所需的其他 JCL 子目录（即一次一个，直到构建使用 JCL 的项目）

# actionscript-3 - 在初始化 MovieClip 时寻找 AS3 事件，如 AS2 onclipevent(load)

> ID：10089875
> 
> 赞同：0
> 
> 时间：2012-04-10T13:35:42.047
> 
> 标签：actionscript-3, actionscript

在 AS2 中有一个事件 onclipevent(load) 在舞台上初始化影片剪辑时触发。我进行了很多搜索，但对于 AS3 中的相同功能，我能找到的唯一解决方案是为影片剪辑创建一个自定义类。就我而言，这有点矫枉过正，因为我只有一行代码要运行，并且我试图避免在我的项目中出现大量额外的 AS 文件。我应该注意，我的 MovieClip 不是动态添加的，因此 Event.ADDED_TO_STAGE 等事件将不起作用。

真的没有办法在 AS3 中做 onclipevent(load) 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:44:54.163

AS3 中没有 AS2 样式的剪辑事件。如果您想避免为您的剪辑创建自定义类，您可以将初始化代码放在一个函数中，并在创建剪辑时立即调用它，如下所示：

```
import flash.display.MovieClip;
function onClipLoad(clip : MovieClip) : void
{
    // do onLoadStuff here
    clip.x = 100;
    clip.y = 10;
}

// call onClipLoad when the clip is created, either in code or via timeline
var myClip : MovieClip = new MyClip();
onClipLoad(myClip); 
```

更好的是，您可以将此代码放在 MovieClip 时间轴的第 1 帧上，以自动初始化它的实例：

```
var initialized : Boolean;
if(!initialized) {
   initialized = true;
   // do init code here
   x = 100;
   y = 10;
} 
```

# jquery - jquery 不会在 IE 7 中预加载单选按钮

> ID：10089882
> 
> 赞同：1
> 
> 时间：2012-04-10T13:36:14.763
> 
> 标签：jquery, internet-explorer, input, radio-button

我正在尝试使用从 jquery AJAX 调用中检索到的数据预填充表单。数据正常，但在使用 IE 7 时我无法检查正确的单选按钮。

以下代码在 Firefox、Safari 和 Chrome 中运行良好

```
Lets assume data.description = 'student'

// I have tried both of these with no luck in IE 7
$("input[value='"+data.description+"']").attr('checked', true);
$("input[name='self_description']").filter("[value='"+data.description+"']").attr('checked', true);

<div><label><input type="radio" name="description" value="student">student</label></div>
<div><label><input type="radio" name="description" value="part time">part-time</label></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:38:43.827

您的过滤器表达式似乎缺少一个左方括号，应该引用文字。尝试：

```
$("input[name='self_description']").filter("[value='"+data.description+"']").attr('checked', true); 
```

编辑：

唯一想到的另一件事是在 DOM 准备好后执行它：

```
$(document).ready(function () {
    // your code here
}); 
```

# android - PhoneGap 1.5 外部网址问题

> ID：10089883
> 
> 赞同：0
> 
> 时间：2012-04-10T13:36:23.003
> 
> 标签：android, jquery-mobile, cordova

我创建了一个包含许多公司内部 jquery 移动页面的应用程序，它们都可以在 android 模拟器中完美运行。但是，我遇到了外部网址的问题。我有需要 google maps api url 的 Jquery Google maps 插件。

所以，如果我有

```
 <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
```

在我的索引页面中。然后该索引页面未加载。如果我删除该外部网址，则页面加载正常，没有谷歌地图功能。

我研究了应该在 cordova.xml 文件中添加外部 url。所以，我补充说。

```
 <access origin="http://maps.google.com*"/> 
```

但谷歌地图网址仍然导致同样的问题。我的公司也有一个出站代理，这会导致问题吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T21:04:17.840

放下星星。它之前的所有内容都是完整的原始地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:11:24.637

尝试将 * 添加到 XML 文件而不是[http://maps.google.com](http://maps.google.com) *

使用这种方法，您将能够访问您在应用中链接到的任何网站，而不仅仅是 Google。

# c - 使用 ANTLR C 目标，我如何使用操作来打印令牌？

> ID：10089884
> 
> 赞同：0
> 
> 时间：2012-04-10T13:36:25.217
> 
> 标签：c, antlr, antlr3

我是 ANTLR 的新手，在使用操作打印令牌时遇到了麻烦。我有以下语法文件：

```
grammar SimpleGrammar;

options {
language = C;
}

prog : string { printf("hello\n"); printf($string.text); };

string : LETTER+;

LETTER : ('a'..'b' | 'A'..'B')+; 
```

测试程序如下：

```
#include "SimpleGrammarLexer.h"
#include "SimpleGrammarParser.h"

int main(int argc, char * argv[]) {
    pANTLR3_INPUT_STREAM input;
    pSimpleGrammarLexer lex;
    pANTLR3_COMMON_TOKEN_STREAM tokens;
    pSimpleGrammarParser parser;

    input = antlr3FileStreamNew((pANTLR3_UINT8)argv[1], 0);
    lex = SimpleGrammarLexerNew(input);
    tokens = antlr3CommonTokenStreamSourceNew(ANTLR3_SIZE_HINT, TOKENSOURCE(lex));
    parser = SimpleGrammarParserNew(tokens);

    parser -> prog(parser);

    parser -> free(parser);
    tokens -> free(tokens);
    lex -> free(lex);
    input -> close(input);

    return 0;
} 
```

输入文件包含一个简单的字符串：“AAAA”。我希望输出是“hello”，然后是换行符上的“AAAA”，但是我只得到“hello”，后跟一个空字符串。

我做错了什么？

提前致谢。

PS我正在使用ANTLRv3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:34:57.460

试试这个：

```
prog
 : string 
   { 
     printf("hello\n"); 
     printf($string.text->chars); 
   }
 ; 
```

# css - 有理由不在 CSS 中混合单位吗？

> ID：10089887
> 
> 赞同：4
> 
> 时间：2012-04-10T13:36:42.857
> 
> 标签：css, units-of-measurement

在进行响应式设计时，我通常需要在水平方向上设置百分比边距，但在垂直方向上，我通常不想要百分比，而是固定像素。

有什么理由不应该像这样在边距和填充中混合单位：

```
margin: 10px 10%; 
```

浏览器性能？跨浏览器渲染问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T13:39:05.060

只要您保持垂直是基于像素的，水平是基于百分比的，就应该没问题。只是不要将两者混合（至少不要在一个元素中），否则你会得到全面的不良影响。

# .htaccess - 从 url (codeigniter) 中删除 index.php 时 .htaccess 防止显示文件

> ID：10089888
> 
> 赞同：0
> 
> 时间：2012-04-10T13:36:50.363
> 
> 标签：.htaccess, codeigniter

我正在使用 codeigniter，我尝试通过创建 .htaccess 文件及其内容从 url 中删除 index.php：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

这种方式适用于 xampp 服务器。但是当我上传网站时，不幸的是出现了一个问题：

**我有一个名为 files 的文件夹，它包含子文件夹：images、css、js、swf、upload。并且这些文件夹中的每个文件都无法查看，并且浏览器说那里找不到文件。**

任何帮助请。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:41:11.923

只要确保你也排除那些：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt|css|swf|upload)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T14:17:20.493

这是我的 .htaccess 文件。我的理解是，对于任何尝试访问但不存在的文件或目录，它将转发到 Codeigniter。

任何确实存在的东西都可以正常工作，并且不需要单独排除。每次添加新目录或文件夹时，这将节省时间和麻烦，因为它不需要您编辑此文件。

```
RewriteEngine on
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

对我们有用，但我的理解可能不正确。希望能帮助到你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T13:58:42.780

这是我的 .htaccess 文件 - 它应该适合你：

```
Options -Indexes
Options +FollowSymLinks

# Set the default file for indexes
DirectoryIndex index.php

<IfModule mod_rewrite.c>

    # activate URL rewriting
    RewriteEngine on

    # do not rewrite links to the documentation, assets and public files
    RewriteCond $1 !^(files|css|js|swfimages|assets|uploads|captcha)

    # do not rewrite for php files in the document root, robots.txt or the maintenance page
    RewriteCond $1 !^([^\..]+\.php|robots\.txt|crossdomain\.xml|maintenance\.html)

    # but rewrite everything else
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    ErrorDocument 404 index.php
</IfModule> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T14:25:58.857

试试这个我认为可以解决你的问题..

```
RewriteEngine on
RewriteCond $1 !^(index\.php|robots\.txt|files\/images|files\/css|files\/js|files\/swf|files\/upload)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

您必须告诉您的服务器不要将这些目录处理到 index.php 并且为此工作的行是：

```
RewriteCond $1 !^(index\.php|robots\.txt|files\/images|files\/css|files\/js|files\/swf|files\/upload) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-11T16:26:18.213

谢谢你。这很好用：

```
RewriteEngine on
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

我有另一个网站和下一个 index.php 我有一个名为 files 的文件夹，这个文件夹包含很多内容，我应该将它们的所有名称和子目录的名称都放在其中吗？

# android - 在android中获取名称含义的麻烦

> ID：10089903
> 
> 赞同：0
> 
> 时间：2012-04-10T13:37:34.827
> 
> 标签：android, jsoup

我是android开发的新手。我正在创建一个应用程序来告诉用户输入的名字的含义，为此我使用www.babynamesworld.parentsconnect.com 来获取数据并从中解析出名字的含义。这里是代码，但它似乎不起作用。

```
Button b=(Button)findViewById(R.id.button1);

        b.setOnClickListener(new Button.OnClickListener() 
        {

            TextView tv=(TextView)findViewById(R.id.textView1);

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                try {
                    EditText et=(EditText)findViewById(R.id.editText1);
                    Document document = Jsoup.connect("http://babynamesworld.parentsconnect.com/meaning_of_"+et.getText().toString()+".html").get();
                    Element firstMeta = document.select("meta").first();
                     String title = firstMeta.attr("DESCRIPTION"); 
                     tv.setText(title);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

        }});

    } 
```

一旦我单击按钮，程序就会崩溃。我也添加了互联网访问权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:54:47.390

看起来虚拟机找不到`Jsoup`类定义。您是否在项目中包含了源文件或 jar？

如果您已经添加了 jar，请尝试清理项目。

# android - Android SeekBarListener 在不同的类中

> ID：10089905
> 
> 赞同：0
> 
> 时间：2012-04-10T13:37:41.167
> 
> 标签：android, seekbar

当搜索栏发生变化时。监听器在哪里激活？

前任：

```
ClassA
{
    ClassB myClass = new ClassB(); 

}
ClassB
{
   SeekBar mySeekBar = new SeekBar;
} 
```

如果 seekBar 属于 B 类。我可以在 ClassA 中有听众吗？还是我必须将它放在 ClassB 中并将标志扔回 ClassA？

我的目标是告诉 ClassA 在 ClassB 的搜索栏上的进度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:47:07.853

听众可以在任何你想要的地方。这就是为什么你有一个*setOnSeekBarChangeListener()*来注册它的原因。该类监听应该扩展*SeekBar.OnSeekBarChangeListener*，并将其传递给给定的*SeekBar的**setOnSeekBarChangeListener()*。

# java - 检索 MMS _id [android 应用程序]

> ID：10089910
> 
> 赞同：0
> 
> 时间：2012-04-10T13:38:01.290
> 
> 标签：java, android, cursor, mms

谁能告诉我如何通过光标检索最后一个进入收件箱的 MMS 的 MMS _id ？谢谢

萨米亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:00:52.267

[参考这篇文章](https://groups.google.com/forum/?fromgroups#!topic/android-beginners/BaqXQUnsKPY)
[和这个](http://source.android.com/source/downloading.html)

# java - android - 如何安全地停止正在运行的线程

> ID：10089911
> 
> 赞同：3
> 
> 时间：2012-04-10T13:38:05.387
> 
> 标签：java, android

我的应用程序有两个活动。活动一（A1）启动线程。让我们假设这个活动（A1）进入暂停状态。我想安全地停止正在运行的线程；这个怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:19:11.873

我建议你看看[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)和[IntentService](http://developer.android.com/reference/android/app/IntentService.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:56:30.533

您可以像这样在 Threads 运行方法中使用**return语句...**

```
public void run(){

    if(isDone)
    {     
      return;
    }

} 
```

或者你可以使用这个...

```
if(thread != null)
{
    Thread t1 = thread;
    thread = null;
    t1.interrupt();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:49:00.687

//在side run方法中使用布尔标志`Thread`如下

```
boolean isActivityPaused = false;

       public void run(){

    // use isActivityPaused boolean flag here to stop your Thread

        while(!isActivityPaused){ 

        }

        } 
```

现在这是`onPause()`你的方法`Activity`

```
public void onPause(){

isActivityPaused = true; // set isActivityPaused= true to stop your `Thread`

} 
```

# android - Image Gallery 的应用程序列表中出现多个条目以处理共享/发送意图

> ID：10089916
> 
> 赞同：1
> 
> 时间：2012-04-10T13:38:33.293
> 
> 标签：android, android-intent

我的清单中有两个与不同活动相关联的意图过滤器：

1)

```
<intent-filter android:label="@string/my_label" >
    <action android:name="android.intent.action.SEND_MULTIPLE" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="image/*" /> 
```

2)

```
<intent-filter android:label="@string/my_label" >
    <action android:name="android.intent.action.SEND_MULTIPLE" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="text/plain"/> 
```

但是，当我从 ImageGallery 中选择一个相册并单击共享/发送图标时，我会在可以处理此操作的应用程序列表中看到两个条目。

如果我从第二个意图过滤器中删除 SEND_MULTIPLE，那么一切都很好。

我是否错误地指定了意图过滤器？提前致谢。彼得。

# java - JBOSS 5.1 是否在 JDK 1.4 中运行？

> ID：10089922
> 
> 赞同：0
> 
> 时间：2012-04-10T13:38:47.197
> 
> 标签：java, jboss, jboss5.x, jdk1.4

JBOSS 5.1 是否在 JDK 1.4 中运行？

我们有一个运行在 jdk 1.4 中的 websphere 服务器

我们需要访问**jboss 队列（在 jboss 5.1 中配置）**。不可避免地，我们必须使用 jboss 5.1 的客户端 jar 来访问队列

我想知道（相当担心）jboss 5.1 jar 文件是否会在我的系统中运行；因为我的系统有 JDK 1.4

请求您的意见和建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:57:33.623

根据以下网站：

[https://community.jboss.org/wiki/JBossProjectJDKVersionRequirements](https://community.jboss.org/wiki/JBossProjectJDKVersionRequirements)

您至少需要 JDK 1.5 才能运行 Jboss 5.1。

所以我认为你有以下选择：

*   由于 jdk 是向后兼容的（理论上），您可以尝试将 jdk 从 1.4 更新到 1.5（但您需要测试您的应用程序，因为某些 API 可能已被弃用或不完全兼容）

*   其他选择是您编写一个 WebService，即在您的 JBoss 前面使用 JAX-RPC 并从您的 WebSphere 应用程序中使用它

# c# - 从 XML 响应中填充 List<>

> ID：10089923
> 
> 赞同：0
> 
> 时间：2012-04-10T13:38:48.603
> 
> 标签：c#, xml, linq, windows-phone-7

我的问题是我怎样才能到达

```
<xml>
 <item>
  <eventid>1</eventid>
  <eventname>Test</eventname>
  <startdate>2012-04-30 12:00:00</startdate>
  <locationid>
    <locationid>1</locationid>
    <city>Amsterdam</city>    <-----------This field
    <venuename>Java-eiland</venuename>
  </locationid>
 </item>
</xml> 
```

填写清单时

```
eventInfo = (from item in events.Descendants("item")
                         select new Event
                         {
                             EventId = Convert.ToInt16(item.Element("eventid").Value),
                             EventName = item.Element("eventname").Value,
                             EventCity = ??????????
                         }).ToList(); 
```

我发现[Using LINQ to fill a List<object> from xml](https://stackoverflow.com/questions/7846400/using-linq-to-fill-a-listobject-from-xml) 但他们没有像我想做的那样深入挖掘 XML

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:41:09.177

```
item.Element("locationid").Element("city").Value 
```

# php - Symfony 1.4：dev.php 模式下的错误。在非 dev.php 模式下工作

> ID：10089926
> 
> 赞同：0
> 
> 时间：2012-04-10T13:39:04.250
> 
> 标签：php, symfony1, symfony-1.4

**我在Symfony 1.4**中创建了一个模块。它按预期工作。然而，当我处于**dev.php**模式时，我得到一个**语法错误**。

让我们来看看：

```
http://honeylumpi.mobi/dev.php/panelparameter  
NOTE: panelparameter is the admin-module that I created. 
```

我得到：

```
Parse error: syntax error, unexpected T_STRING in /home/lola/hl/honey-lumpi/cache/cms/dev/modules/autoPanelparameter/actions/actions.class.php on line 66 
```

现在，在我得到的 第**66行：**`actions.class.php`

```
Warning: stream_get_contents() expects parameter 1 to be resource, null given in  /home/lola/hl/honey-lumpi/lib/model/sitebuilder/PanelParameter.php on line 22 
```

在第**22**行`PanelParameter.php`：

```
/**
 * Returns the serialized value.
 *
 * @return string
 */
public function getSerializedValue ()
{
    $res = parent::getValue();
    $retval = stream_get_contents($res);   <-- This is line 22!
    rewind($res);
    return $retval;
} 
```

我添加了来回声，实际上是**null**。但我不知道为什么。我相信该代码是由**Symfony**自动生成的。我不知道如何解决这个问题。同样，该模块工作正常，但在**dev.php**中给了我这个错误。我清除了缓存等。

**编辑**：这是所有代码`/home/lola/hl/honey-lumpi/lib/model/sitebuilder/PanelParameter.php`：

```
<?php

 /**
 * Subclass for representing a row from the 'PanelParameter' table.
 *
 *
 *
 * @package lib.model
 */
 class PanelParameter extends BasePanelParameter
{
    private $condition;

/**
 * Returns the serialized value.
 *
 * @return string
 */
public function getSerializedValue ()
{
    $res = parent::getValue();
    $retval = stream_get_contents($res);
    rewind($res);
    return $retval;
}

/**
 * Sets the value already serialized.
 *
 * @param string $v
 */
public function setSerializedValue ($v)
{
    parent::setValue($v);
}

/**
 * Returns the value of the parameter.
 *
 * @return mixed
 */
public function getValue ()
{
    // get serialized value
    $v = $this->getSerializedValue();

    // unserialize
    $value = @unserialize($v);

    // check for error
    if (false === $value)
    {
        if ('b:0;' != $v)
        {
            if (PHP_VERSION_ID < 50300)
            {
                gxLog::a(__CLASS__, "cannot unserialize parameter #{$this->id} {$this->name} value:{$v}");
                $value = null;
            }
            else
            {
                // try to fix array indexes
                $cb = create_function('$m', 'return "s:".strlen($m[1]).":\"$m[1]\"";');
                $v = preg_replace_callback('/i:([0-9]{12,})/', $cb, $v);
                $value = @unserialize($v);
                if (false === $value)
                {
                    gxLog::a(__CLASS__, "cannot unserialize parameter #{$this->id} {$this->name} value:{$v}");
                    $value = null;
                }
            }
        }
    }

    // return unserialized value
    return $value;
}

/**
 * Sets the value for the parameter.
 *
 * @param mixed $v
 */
public function setValue ($v)
{
    $value = @serialize($v);
    parent::setValue($value);
}

/**
 * Returns the name of the parameter.
 *
 * @return string
 */
public function __toString ()
{
    return $this->getName();
}

/**
 * Returns the condition object.
 *
 * @return gxSiteCondition
 */
public function getCondition ()
{
    if (!isset($this->condition))
    {
        // no condition is true always
        $condition = new gxSiteCondition;

        $cond = parent::getCond();
        if (!is_null($cond))
        {
            // unserialize
            $condition = gxSiteCondition::createFromJson($cond);
        }

        // store
        $this->condition = $condition;
    }

    return $this->condition;
}

/**
 * Sets the condition.
 *
 * @param gxSiteCondition $c
 */
public function setCondition ($c)
{
    if (!($c instanceof gxSiteCondition)) throw new Exception ('parameter is not gxSiteCondition');

    // serialize
    $cond = $c->toJson();

    // store
    $this->condition = $c;

    // store condition
    parent::setCond($cond);
}

/**
 * Checks the condition in the provided context.
 *
 * @param sfContext $context
 */
public function checkCondition (sfContext $context)
{
    // get condition
    $condition = $this->getCondition();

    // evaluate condition
    return $condition ? $condition->evaluate($context) : true;
}

/**
 * Returns true if the provided condition is contained
 * in this object's condition.
 *
 * @param gxBasicCondition $c
 * @return boolean
 */
public function containsCondition (gxSiteCondition $c)
{
    // get condition
    $condition = $this->getCondition();

    // check if contained condition
    return $condition ? $condition->contains($c) : true;
}

/**
 * Set default value for condition if new and not set.
 *
 * @param PropelPDO $con
 * @return int
 */
public function save (PropelPDO $con = null)
{
    if ($this->isNew() && !$this->isColumnModified(PanelParameterPeer::COND))
    {
        $this->setCondition(new gxSiteCondition);
    }

    return parent::save($con);
}

/**
 * Sets contents of passed object to values from current object.
 *
 * If desired, this method can also make copies of all associated (fkey referrers)
 * objects.
 *
 * @param      object $copyObj An object of PanelParameter (or compatible) type.
 * @param      boolean $deepCopy Whether to also copy all rows that refer (by fkey) to the current row.
 * @throws     PropelException
 */
public function copyInto($copyObj, $deepCopy = false)
{

    $copyObj->setName($this->name);

    $copyObj->setSerializedValue($this->getSerializedValue());

    $copyObj->setCond($this->cond);

    $copyObj->setPanelId($this->panel_id);

    $copyObj->setNew(true);

    $copyObj->setId(NULL); // this is a pkey column, so set to default value

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:11:23.017

我不知道 sitebuilder 来制作 symfony 网站，我不知道这个工具会生成什么。

但是你有没有尝试重建你的模型？`./symfony propel:build --all-classes`

它是从 sitebuilder/propel 生成的类还是来自 sf1.0 导入？

# sql-server - 如何插入 SQL Server 十进制列？

> ID：10089927
> 
> 赞同：3
> 
> 时间：2012-04-10T13:39:04.437
> 
> 标签：sql-server, jdbc, bigdecimal

我正在使用 SQL Server 的 MS JDBC 驱动程序，并尝试将值插入到 decimal(18,5) 列中。文档说十进制列映射到 BigDecimal，所以我正在尝试这样做：

```
PreparedStatement ps = conn.prepareStatement("INSERT INTO [dbo].[AllTypesTable] ([decimal18_0Col]) VALUES (?)");
ps.setObject(1, new BigDecimal(3.14));
ps.execute(); 
```

在调用 execute() 时，我收到此错误：

com.microsoft.sqlserver.jdbc.SQLServerException：将数据类型 nvarchar 转换为十进制时出错。

司机似乎对双打很满意，所以我可以这样做：

```
ps.setObject(1, 3.14); 
```

如果我需要 BigDecimal 给我的额外精度，我该如何进行插入？

更新：当然，如果我要插入 3.14，我不必担心这个。如果我想插入一个实际需要小数精度的值怎么办？例如，小数点后 30 位？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T11:13:02.580

事实证明这根本不是数据库问题。从 varchar 转换的错误基本上是说该值不适合 DB 字段。它必须从命令中发送的字符串转换为十进制值。

问题实际上是 new BigDecimal(3.14) 创建了一个 BigDecimal，其值类似于 3.140000000003457234987。这是因为双精度不能精确存储 3.14。然后当这个值被发送到数据库时，它不会接受它，因为该列只有五个小数位。解决方法是使用 BigDecimal 的另一个构造函数：new BigDecimal("3.14")。这将恰好保持 3.14。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:44:06.490

只要列列的数据类型是十进制，您就不必担心在代码中对其进行转换。尝试将其转换回一个对象并以这种方式发送。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:48:21.277

从您的代码到服务器的命令以字符串形式出现。因此，当 MSSQL 解析命令文本时，它成功地将您的 3.14（来自第二个示例）转换为十进制值。可能“new BigDecimal(3.14)”被转换为字符串为“3,14”或其他一些无效值。设置值后尝试检查您的命令语句。

# hibernate - 加入 2 个以上的表时出现 Hibernate Join 问题

> ID：10089929
> 
> 赞同：0
> 
> 时间：2012-04-10T13:39:07.260
> 
> 标签：hibernate

我正在开发一个应用程序，我必须加入 3-4 个表以进行选择操作。我是**带有注释的休眠 3，**并在下面添加了我的类结构。但是我尝试在 Join fetch 策略中使用许多变体，但无法在**2 次选择**中获得结果。请通过并尝试帮助我。 **考生班**

```
@JsonAutoDetect
@Entity
@Table(name="HC_RESUME_BANK")
public class Candidates{

private int id;
private String firstName;
private String lastName;
private String email;
private String phone;
@JsonUnwrapped  
private Set<CandidateStatus> candidateStats = new HashSet<CandidateStatus>(0);

@OneToMany  //(mappedBy="candidate")
@Fetch(FetchMode.JOIN)
@JoinColumn(name="ResID",nullable=false,referencedColumnName="RID")
@JsonIgnore
public Set<CandidateStatus> getCandidateStats() {
        return candidateStats;
}
public void setCandidateStats(Set<CandidateStatus> candidateStats) {
    this.candidateStats = candidateStats;
} 
```

**候选人状态类**

```
@JsonAutoDetect
@Entity

@Table(name="HC_REQ_RESUME")

public class CandidateStatus{

private int id;
private String statusTitle;
@JsonUnwrapped
private Candidates candidate;
private int reqid;
private int resid;

@JsonUnwrapped
private Requirements requirement;

@ManyToOne
@Fetch(FetchMode.JOIN)

@JoinColumn(name="ReqID",insertable=false,updatable=false)
//@JsonIgnore
public Requirements getRequirement() {
    return requirement;
}
    @ManyToOne //(fetch =    FetchType.LAZY,cascade=CascadeType.ALL,targetEntity=Candidates.class)
@Fetch(FetchMode.JOIN)
@JoinColumn(name="ResID",insertable=false,updatable=false)
//@ForeignKey(name = "FK_ResID")

public Candidates getCandidate() {
    return candidate;
}

public void setCandidate(Candidates candidate) {
    this.candidate = candidate;
} 
```

**客户类**

```
 @JsonAutoDetect
 @Entity
 @Table(name="HC_CLIENTS")
 public class Clients{

private int id;
private String clientName;
@JsonUnwrapped
private Set<Requirements> require= new HashSet<Requirements>(0);
//private List<Requirements> require;

@OneToMany  //(fetch=FetchType.EAGER)
@Fetch(FetchMode.JOIN)
@JoinColumn(name="ClientID",referencedColumnName="RID")

@JsonIgnore
public Set<Requirements> getRequire() {
    return require;
}
public void setRequire(Set<Requirements> require) {
    this.require = require;
} 
```

最后**是需求类**

```
@JsonAutoDetect
@Entity

@Table(name="HC_REQUISITIONS")
public class Requirements{

private int id;
private int clientId;
private String reqTitle;
@JsonUnwrapped
private Clients client;

@ManyToOne
@Fetch(FetchMode.JOIN)
@JoinColumn(name="ClientID",insertable=false,updatable=false)
//@JsonIgnore
public Clients getClient() {
    return client;
}
public void setClient(Clients client) {
    this.client = client;
}
    @OneToMany
@Fetch(FetchMode.JOIN)
@JoinColumn(name="ReqID",referencedColumnName="RID")
@JsonIgnore
public Set<CandidateStatus> getCandidateStatus() {
    return candidateStatus;
}
public void setCandidateStatus(Set<CandidateStatus> candidateStatus) {
    this.candidateStatus = candidateStatus;
} 
```

我已经消除了避免不必要代码的**Getter/Setter**方法。
由于发生 N+1 的上述类关联有什么问题？ **查询是：**

```
 return hibernateTemplate.find("from Requirements as req order by req.reqTitle"); 
```

我只想获取**Requirement 类的对象**，但我得到了所有对象和 N+1 个查询结果

谢谢你的时间
萨钦

@RaulGogo：尝试了条件查询，但问题仍然存在。这些是查询的日志实例。我添加了**@BatchSize(size=100)**，它通过批量获取减少了查询的数量。任何我错过的事情注释配置？

```
 Hibernate: 
    /* criteria query */ select
    this_.RID as RID3_3_,
    this_.ClientID as ClientID3_3_,
    this_.ReqTitle as ReqTitle3_3_,
    candidates2_.ReqID as ReqID3_5_,
    candidates2_.RID as RID5_,
    candidates2_.RID as RID1_0_,
    candidates2_.ResID as ResID1_0_,
    candidates2_.reqid as reqid1_0_,
    candidates2_.ReqID as ReqID1_0_,
    candidates2_.resid as resid1_0_,
    candidates2_.StatusTitle as StatusTi4_1_0_,
    candidates3_.RID as RID0_1_,
    candidates3_.EmailID as EmailID0_1_,
    candidates3_.FirstName as FirstName0_1_,
    candidates3_.LastName as LastName0_1_,
    candidates3_.Mobile as Mobile0_1_,
    clients4_.RID as RID2_2_,
    clients4_.ClientName as ClientName2_2_ 
from
    HC_REQUISITIONS this_ 
left outer join
    HC_REQ_RESUME candidates2_ 
        on this_.RID=candidates2_.ReqID 
left outer join
    HC_RESUME_BANK candidates3_ 
        on candidates2_.ResID=candidates3_.RID 
left outer join
    HC_CLIENTS clients4_ 
        on this_.ClientID=clients4_.RID 
order by
    this_.ReqTitle asc

  Hibernate: 
  /* load one-to-many com.options.model.Candidates.candidateStats */ select
    candidates0_.ResID as ResID0_3_,
    candidates0_.RID as RID3_,
    candidates0_.RID as RID1_2_,
    candidates0_.ResID as ResID1_2_,
    candidates0_.reqid as reqid1_2_,
    candidates0_.ReqID as ReqID1_2_,
    candidates0_.resid as resid1_2_,
    candidates0_.StatusTitle as StatusTi4_1_2_,
    requiremen1_.RID as RID3_0_,
    requiremen1_.ClientID as ClientID3_0_,
    requiremen1_.ReqTitle as ReqTitle3_0_,
    clients2_.RID as RID2_1_,
    clients2_.ClientName as ClientName2_1_ 
from
    HC_REQ_RESUME candidates0_ 
left outer join
    HC_REQUISITIONS requiremen1_ 
        on candidates0_.ReqID=requiremen1_.RID 
left outer join
    HC_CLIENTS clients2_ 
        on requiremen1_.ClientID=clients2_.RID 
where
    candidates0_.ResID=? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:32:26.330

尝试使用标准。

```
return getHibernateTemplate().execute(new HibernateCallback<List<Requirement>>() {
        @Override
        public List<Requirement>doInHibernate(Session session) throws HibernateException, SQLException {
            return (List<Requirement>) session.createCriteria(Requirement.class)
                    .addOrder(Order.asc("reqTitle"))
                    .list();
        }
    }); 
```

这会**通过 reqTitle asc 从 Requirement order 中选择 *，**它将返回一个需求列表。

# php - 如何使用持久 SMTP 连接

> ID：10089932
> 
> 赞同：0
> 
> 时间：2012-04-10T13:39:38.443
> 
> 标签：php, codeigniter, smtp, persistent

我有一个 PHP 应用程序，它使用 CodeIgniter 电子邮件库类通过 SMTP 协议发送数千封电子邮件。问题是，对于发送的每封电子邮件，它都使用与 SMTP 服务器的新连接。在这种情况下如何使用持久连接？

例如，假设我发送了 1000 封电子邮件，然后我再次进行身份验证并再发送 1000 封电子邮件，依此类推。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T05:09:14.643

像这样简单：

忘记 CI 的电子邮件库，除非您耐心地更改类的核心......作为一个不错的选择，使用 PHPMailer 类，将它放在您的 CI/Application/libraries 中，然后您只需要设置属性$SMTPKeepAlive 为真，做你想做的事，然后调用 SmtpClose();

我在这里使用 CI 有一个很好的实现，我将 SMTP 服务器保存在数据库中，并且所有邮件都是由我编写的模型“ezfied”的。

Rgds

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:41:04.920

由于我没有阅读您的代码，因此我将发布他们放入文档中的代码..

**$this->email->clear()**

将所有电子邮件变量初始化为空状态。如果您在循环中运行电子邮件发送功能，则可以使用此功能，允许在循环之间重置数据。

```
foreach ($list as $name => $address)
{
    $this->email->clear();

    $this->email->to($address);
    $this->email->from('your@example.com');
    $this->email->subject('Here is your info '.$name);
    $this->email->message('Hi '.$name.' Here is the info you requested.');
    $this->email->send();
} 
```

如果这对你不起作用，我还有另一件事比内置邮件类更合适，老实说更好，尝试使用[Swift-mailler](http://s.zah.me/HusRRs)库，它可以解决你的大部分问题..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:55:23.487

尝试在您的电子邮件类中使用“bcc_batch_mode”。

有关更多信息，请参见此处：[https ://codeigniter.com/user_guide/libraries/email.html](https://codeigniter.com/user_guide/libraries/email.html)

# android - 使用来自远程服务器的数据的应用程序的本机或 Web 移动应用程序？

> ID：10089935
> 
> 赞同：0
> 
> 时间：2012-04-10T13:40:02.830
> 
> 标签：android, ios, html, web, native

我正在为两个移动平台（iOs 和 Android）创建一个应用程序，我已经到了我应该决定是使用每个平台 SDK 创建单独的应用程序还是创建一个 Web 应用程序并将其部署在两者中的地步. 我的应用程序不会使用设备中的功能......它需要连接到远程服务器并加载和发送数据{图像、文本、视频}，我需要将其以某种良好呈现的形式呈现。

所以我的问题是什么是最好的 HTML5& CSS3 ， Native OR Hybrid ？

如果是网络：那么有没有免费平台可以做到这一点？

PS：这是我第一次尝试创建移动应用程序！谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:44:58.623

你知道[phoneGap](http://phonegap.com/)吗？

这是在应用程序中托管浏览器的一种方式。我用过并且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:44:17.760

您的屏幕 UI 设计也会影响选择：例如

1.  使用 web 框架（例如 jquery Mobile），如果您有一个包含大量行的列表，您将不会获得很好的滚动性能
2.  市场上大多数移动浏览器不支持 CSS 固定定位。这意味着，在屏幕底部实现固定标签很困难。
3.  如果您在应用程序的任何部分有任何像素精确的渲染要求，那么 Web 应用程序将不是一个好的选择（可以使用元视口来实现，但实现方式因浏览器而异）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:47:29.803

我认为有很多方法可以实现这一点。您可以使用某种第三方控件来使您的应用在 Android 和 iOS 中看起来一样。或者你可以给你一些新技术（至少对我来说），比如 [PhoneGap](http://phonegap.com/)

这取决于您想为您的项目花费多少时间？您对应用程序的期望性能。

希望能帮助到你 ：）

# java - 从mac发送文件到打印机 - java

> ID：10089937
> 
> 赞同：1
> 
> 时间：2012-04-10T13:40:22.000
> 
> 标签：java, macos, file

我编写了这个小型 java 程序，将文件直接发送到打印机进行打印：

```
public static void main(String args[]) throws IOException  
{
    try{
        InputStream in= new FileInputStream(new File("C:\\example.txt"));  
        OutputStream out=new FileOutputStream(new File("\\\\path\\printer\\example.txt"));  

        // Transfer bytes from in to out  
        byte[] buf=new byte[1024];  
        int len;  
        while ((len=in.read(buf)) > 0) {  
           out.write(buf,0,len);  
        }  
        in.close();  
        out.close();  
    }
    catch(Exception ex)
    {
        ex.printStackTrace();
    }
} 
```

这在 Windows 上运行良好，但在 Mac 上不行。

知道如何在 Mac Os X 上做同样的事情吗？

请注意，我尝试将文件从一个文件夹复制到 mac 机器上的另一个本地并且可以正常工作，但当 FileOutputStream 获取远程文件夹时却没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T03:04:53.823

对于*文件共享*，您可以将这样的 UNC 路径转换为类似

```
smb://server/folder/file.txt 
```

但我不相信这对于打印机共享是可能的。我认为这涉及更多。SMB 打印机 URL 看起来像

```
smb://username.password@workgroup/computer/printer 
```

在任何情况下，`FileOutputStream`都不能写入 URL，所以没有办法让事情以这种方式工作。

Java 有一个完整的打印 API，使用起来并不难。如果你掌握了它，你可以编写一个可移植的程序，在每个平台上解决这个问题。

# gdb - 如何解释回溯地址以使用 GDB 进行调试

> ID：10089946
> 
> 赞同：7
> 
> 时间：2012-04-10T13:40:58.300
> 
> 标签：gdb, backtrace, debug-backtrace

我正在使用 backtrace() 和 backtrace_symbols() 以如下格式输出 SIGSEGV 和其他信号的回溯：

```
0: [0xb750818]
1: /opt/server/libQtScript.so.4(+0x6f42a) [0xb782c42a]
2: /opt/server/libQtScript.so.4(+0x7bffc) [0xb7838ffc]
3: /opt/server/libQtScript.so.4(+0x86946) [0xb7843946]
4: /opt/server/libQtScript.so.4(+0x7c4bc) [0xb78394bc]
5: /opt/server/libQtScript.so.4(+0x86946) [0xb7843946]
6: /opt/server/libQtScript.so.4(+0x9603e) [0xb785303e]
7: /opt/server/libQtScript.so.4(_ZN12QScriptValue4callERKS_RK5QListIS_E+0x2e7) [0xb7891647] 
```

在这种特殊情况下，第 7 帧对我来说很好，尽管第 1-6 帧给了我一些“+x”地址。

如何在反汇编中为“+0x6f42a”和 GDB 中的其他地址获取准确的行？什么框架#0，没有描述的模块，是什么意思？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T14:15:45.943

> 如何在反汇编中为“+0x6f42a”和 GDB 中的其他地址获取准确的行？

```
gdb /opt/server/libQtScript.so.4
(gdb) x/10i 0x6f42a 
```

通常你会想要在 0x6f42a*之前*执行的指令，所以你会这样做：

```
(gdb) x/20i 0x6f42a-30 
```

忽略前几条指令：您可能从一个中间开始反汇编。通常反汇编会在几条指令后重新同步，然后开始显示正确的指令流。

> 什么框架#0，没有描述的模块，是什么意思？

您的库已删除符号，因此您看到的唯一符号（例如`_ZN12QScriptValue4callERKS_RK5QListIS_E`）是外部可见（也称为导出）的符号。

> QT_SOURCE/lib 文件夹中有 libQtScript.so.4.5.2.debug 符号文件。所以也许我应该在可执行文件附近复制 .debug 文件以获取带有完整符号的回溯？

`libQtScript.so.4.5.2.debug`如果你设置`debug-file-directory`为.GDB 应该自动加载符号`$QT_SOURCE/lib`。

更新：

> 我提到在不附加 GDB 的情况下使用符号进行回溯

我不相信`backtace_symbols()`加载单独的调试信息文件有任何支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:46:24.163

如果您使用调试符号编译 libQTScript，您将获得更好的函数名称和参数值回溯。我不知道如何在没有调试符号的情况下提取相同的信息（尽管如果你有正确的映射文件或 libQTScript 的符号表文件应该是可能的）。

但简单的方法是安装带有调试符号的 libqt 并再次运行回溯。如果已安装剥离库和调试库并且 gdb 选择已剥离的库，请尝试使用 LD_LIBRARY_PATH=path/to/debug/libs 将 gdb 指向调试库。（有关设置路径的另一种方法，请参阅此答案[How do I prepend a directory the library path when loading a core file in gdb on Linux](https://stackoverflow.com/questions/84341/how-do-i-prepend-a-directory-the-library-path-when-loading-a-core-file-in-gdb-on)）

# java - 显式本地 EJB 未注入 Arquillian

> ID：10089957
> 
> 赞同：9
> 
> 时间：2012-04-10T13:41:48.773
> 
> 标签：java, testing, jakarta-ee, java-ee-6, jboss-arquillian

我使用 Arquillian 测试具有显式本地和远程接口的无状态会话 bean。但在测试中，Arquillian 不会在具有本地接口类型的字段中“注入”任何内容，但它适用于远程接口。

```
@Stateless
public class TestServiceImpl implements TestServiceLocal, TestServiceRemote {
    public String greet() {
        return "hallo";
    }
} 
```

远程接口：

```
@Remote
public interface TestServiceRemote {
    public String greet();
} 
```

语言环境界面：

```
@Local
public interface TestServiceLocal {
    public String greet();
} 
```

这是测试：

```
@RunWith(Arquillian.class)
public class GenericEntityDaoEjbIntegrationTest {

    @Deployment
    public static JavaArchive createTestArchive()
                  throws UnsupportedEncodingException {
        return ShrinkWrap.create(JavaArchive.class, "test.jar")
                .addClasses(
                        TestServiceLocal.class,
                        TestServiceRemote.class,
                        TestServiceImpl.class);
    }

    @EJB
    private TestServiceLocal testServiceLocal;

    @EJB
    private TestServiceRemote testServiceRemote;

    //Will Fail
    @Test
    public void testTestServiceLocal() {
        assertNotNull(this.testServiceLocal);
    }

    //Success    
    @Test
    public void testTestServiceRemote() {
        assertNotNull(this.testServiceRemote);
    }    
} 
```

我正在使用 arquillian-glassfish-embedded 1.0.0.CR2、glassfish-embedded-all 3.1 和 arquillian-junit-container 1.0.0.CR5 我的 pom 的相关部分是：

```
 <!-- arquillian test -->
    <dependency>
        <groupId>org.jboss.arquillian.junit</groupId>
        <artifactId>arquillian-junit-container</artifactId>
        <version>1.0.0.CR5</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.arquillian.container</groupId>
        <artifactId>arquillian-container-spi</artifactId>
        <version>1.0.0.CR5</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.arquillian.container</groupId>
        <artifactId>arquillian-glassfish-embedded-3.1</artifactId>
        <version>1.0.0.CR2</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.glassfish.extras</groupId>
        <artifactId>glassfish-embedded-all</artifactId>
        <version>3.1</version>
        <scope>test</scope>
    </dependency> 
```

这是日志文件的相关部分（它不包含任何异常）：

```
10.04.2012 15:38:16 com.sun.ejb.containers.BaseContainer initializeHome
INFO: Portable JNDI names for EJB TestServiceImpl : [java:global/test/TestServiceImpl!de.test.service.TestServiceRemote, java:global/test/TestServiceImpl!de.test.service.TestServiceLocal]
10.04.2012 15:38:16 com.sun.ejb.containers.BaseContainer initializeHome
INFO: Glassfish-specific (Non-portable) JNDI names for EJB TestServiceImpl : [de.test.service.TestServiceRemote, de.test.service.TestServiceRemote#de.test.service.TestServiceRemote]
10.04.2012 15:38:16 com.sun.enterprise.web.WebApplication start
INFO: WEB0671: Loading application [test] at [/test]
10.04.2012 15:38:16 org.glassfish.deployment.admin.DeployCommand execute
INFO: test was successfully deployed in 11.844 milliseconds. 
```

我的错误是什么？我还需要更改为语言环境接口注入的实例吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-11T11:30:34.713

您可以使用以下方法之一：

*   将`beans.xml`文件添加到部署：

    ```
    return ShrinkWrap.create(JavaArchive.class, "test.jar")
                    .addClasses(
                            TestServiceLocal.class,
                            TestServiceRemote.class,
                            TestServiceImpl.class)
                    .addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml"); 
    ```

    这启用了 Arquillian 的 CDITestEnricher，它比 EJBTestEnricher 功能强大得多。它可以处理`@Inject`注释（显然），也`@Resource`可以处理注释`@EJB`（参见 CDI 规范中的资源注入部分）。然后容器将`@EJB`测试类实例中的两个带注释的字段都视为注入点并注入依赖项。

*   为具有已部署 bean 的可移植 JNDI 名称的字段指定注释的`mappedName`属性。`@EJB`在你的情况下，它看起来像：

    ```
    @EJB(mappedName="java:global/test/TestServiceImpl!com.acme.TestServiceLocal")
    private TestServiceLocal testServiceLocal; 
    ```

    您需要确保可移植 JNDI 名称与为您的部署生成的名称相同。我只是指定了为我的“com.acme.TestServiceLocal”接口生成的那个。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-05T13:58:16.630

除了答案之外，您还必须确保使用正确的`@Deployment`设置是正确的。要在本地注入，您必须确保拥有`@Deployment(testable=true)`（请注意，这是默认设置）。

来自[Aquillian 文档](https://docs.jboss.org/author/display/ARQ/Test+run+modes)：

> **容器内模式：@Deployment(testable = true)**
> 
> 正如我们上面提到的，我们需要重新打包你的@Deployment，添加一些 Arquillian 支持类，以便在容器中运行。这使我们能够与测试进行通信、丰富测试并远程运行测试。在这种模式下，测试在远程容器中执行；Arquillian 默认使用此模式。
> 
> 当您提供 @Deployment 时，请参阅完整协议参考以了解打包过程的预期输出。
> 
> **客户端模式：@Deployment(testable = false)**
> 
> 现在这个模式是简单的部分。与重新打包和覆盖测试执行的容器内模式相反，作为客户端模式尽可能少地执行。它不会重新打包您的@Deployment，也不会将测试执行转发到远程服务器。您的测试用例按预期在您的 JVM 中运行，您可以自由地从外部测试容器，正如您的客户所看到的那样。Arquillian 唯一要做的就是控制 @Deployment 的生命周期。
> 
> 这是一个使用 as client 模式调用 Servlet 的示例。

这对 OP 没有帮助（他们有正确的设置），但我希望它能像我一样帮助那些来自谷歌的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T21:43:12.697

尝试更改 TestServiceImpl->TestServiceBean 看起来嵌入式 glassfish 对 bean 名称有特定要求

# web-services - Coldfusion Web 服务无法看到组件

> ID：10089962
> 
> 赞同：2
> 
> 时间：2012-04-10T13:42:00.310
> 
> 标签：web-services, coldfusion, wsdl, components, cfc

我有一个 CFC，我将使用 ?wsdl 作为 SOAP Web 服务来访问它。

如果我直接在浏览器中调用 CFC，我的结果会很好：

```
http://server/webservice/calc.cfc?method=doStuff&foo=bar 
```

如果我尝试将其作为 Web 服务访问：

```
ws = CreateObject("webservice", 'http://server/webservice/calc.cfc?wsdl');
result = ws.doStuff('bar'); 
```

我收到一个错误：

```
Cannot perform web service invocation doStuff.

The fault returned when invoking the web service operation is:
AxisFault
 faultCode: {http://schemas.xmlsoap.org/soap/envelope/}Server.userException
 faultSubcode: 
 faultString: coldfusion.xml.rpc.CFCInvocationException: 
[coldfusion.xml.rpc.CFCInvocationException : [java.lang.ClassNotFoundException :
 com.calculations.calc][java.lang.NullPointerException : null]]
 faultActor: 
 faultNode: 
 faultDetail: 
    {http://xml.apache.org/axis/}stackTrace:coldfusion.xml.rpc.CFCInvocationException:          [coldfusion.xml.rpc.CFCInvocationException : [java.lang.ClassNotFoundException :     
 com.calculations.calc][java.lang.NullPointerException : null]]
    at     coldfusion.xml.rpc.CFComponentSkeleton.__createCFCInvocationException(CFComponentSkeleton.java:733)
    at coldfusion.xml.rpc.CFComponentSkeleton.__convertOut(CFComponentSkeleton.java:359)
    at webservice.calc.doStuff(/var/www/vhosts/server/httpdocs/webservice/calc.cfc)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.r... '' 
```

问题是因为 doStuff 函数在其中声明了一个 CFC 的实例：

```
remote struct function doStuff(foo) {
  var objReturn = {};
    objReturn.msg = 'A message';

    // do a calculation
    var objCalc = new com.calculations.calc(foo);
    objReturn.calc = objCalc;

  return objReturn;
} 
```

因此，我用作 Web 服务的 CFC 在函数中声明了另一个 CFC。直接浏览到我的 web 服务 CFC 工作正常，但尝试使用 CreateObject/webservice 路由调用它失败，因为它无法创建**com.calculations.calc**组件的实例。

**更新：**

如果我刷新页面几次，有时错误会变为：

```
AxisFault
 faultCode: {http://schemas.xmlsoap.org/soap/envelope/}Server.userException
 faultSubcode: 
 faultString: coldfusion.xml.rpc.CFCInvocationException:
    [coldfusion.xml.rpc.CFCInvocationException : [java.lang.ClassNotFoundException :     
    com.calculations.calc][coldfusion.xml.rpc.CFCInvocationException : 
    returnType must     be defined for remote CFC functions.]]
     faultActor: 
     faultNode: 
     faultDetail: 
    {http://xml.apache.org/axis/}stackTrace:coldfusion.xml.rpc.CFCInvocationException: 
    [coldfusion.xml.rpc.CFCInvocationException : [java.lang.ClassNotFoundException : 
    com.calculations.calc][coldfusion.xml.rpc.CFCInvocationException : 
    returnType must be defined for remote CFC functions.]]
    at coldfusion.xml.rpc.CFComponentSkeleton.__createCFCInvocationException(CFComponentSkeleton.java:733)
at coldfusion.xml.rpc.CFComponentSkeleton.__convertOut(CFComponentSkeleton.java:359)
at webservices.TaxCalc.feed.getTaxCalc(/var/www/vhosts/server/httpdocs/webservice/calc.cfc)
at sun.reflect.Nat... '' 
```

这是要求返回类型，但 com.calculations.calc 的 init 函数已*返回 this；*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:12:59.513

您的函数需要声明为远程才能将其作为 Web 服务访问。该功能本身很好，这就是您可以在网络浏览器中手动将其拉出的原因。

```
remote function doStuff(foo){ } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:48:55.560

好的，这并不能真正回答为什么会抛出错误的问题，但我找到了一种解决方法。而不是使用此代码：

```
objReturn.calc = objCalc; 
```

我改用了这个：

```
objReturn.calc.arrOne = objCalc.getArrOne();
objReturn.calc.arrTwo = objCalc.getArrTwo(); 
```

它工作正常。我想这个问题与组件无法转换为 WSDL 的数据有关。我在想 CFC 是一个结构，它不是因为它附加了很多方法。

所以我不应该尝试分配 CFC，我应该使用访问器来访问 CFC 内的数据。

也在 Abobe 论坛上回答：[http ://forums.adobe.com/message/4326548](http://forums.adobe.com/message/4326548)

# java - 共享除前缀或如何使用 PlaceHistoryMapperWithFactory 的所有地方

> ID：10089964
> 
> 赞同：0
> 
> 时间：2012-04-10T13:42:18.443
> 
> 标签：java, gwt

在我的 gwt-app 中，我有一些地方共享除前缀之外的所有内容（如“editUserPlace”和“showUserPlace” - 在这种情况下，状态由 userId 确定）我目前的尝试是通过“ShowUserPlace”扩展抽象“UserPlace”和“EditUserPlace”它们仅在一行中有所不同：@Prefix("showUser")/@Prefix("editUser") - 必须复制孔标记器代码（我不能继承标记器代码但会覆盖前缀）。

在[https://groups.google.com/d/topic/google-web-toolkit/pghMLX27Y4Y/discussion](https://groups.google.com/d/topic/google-web-toolkit/pghMLX27Y4Y/discussion) thomas 建议使用“PlaceHistoryMapperWithFactory”，但我坚持使用它。

我是否必须为每个地方/标记器提供一种方法（也适用于“正常”的地方 - 提供自己的标记器）？我是否必须将我的 Abstract 和/或扩展类添加到 @WithTokenizer？我应该如何/在哪里调用 setFactory？

有人用过 PlaceHistoryMapperWithFactory 吗（可能在类似的用例中）？并给点建议？有人遇到同样的问题并以另一种方式解决了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:59:53.880

该工厂应该工作：

```
class MyFactory {
   @Prefix("showUser")
   public PlaceTokenizer<ShowUserPlace> showUserPlace() {
      return new UserPlaceTokenizer<ShowUserPlace>() {
         protected ShowUserPlace createPlace(String id) {
            return new ShowUserPlace(id);
         }
      };
   }

   @Prefix("showUser")
   public PlaceTokenizer<EditUserPlace> showUserPlace() {
      return new UserPlaceTokenizer<EditUserPlace>() {
         protected EditUserPlace createPlace(String id) {
            return new EditUserPlace(id);
         }
      };
   }
}

abstract class UserPlaceTokenizer<P extends UserPlace> implements PlaceTokenizer<P> {
   public P getPlace(String token) {
      // shared logic between both places: parses ID (or whatever) from token
      return createPlace(id);
   }
   public String getToken(P place) {
      // shared logic between both places: build token out of place
      return token;
   }
   protected abstract P createPlace(String id);
} 
```

当然，您也可以`Provider<P>`在标记器中注入某种东西，而不是对其进行子类化以覆盖其`createPlace`方法。

您可以将它与 一起使用`@WithTokenizers`，如果生成器为完全相同的位置或前缀找到两个标记器，它将阻塞。

您应该`setFactory`在您的映射器之后调用（实际上，重要的是在调用映射器或方法`GWT.create()`之前设置工厂）。`getPlace``getToken`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:58:37.243

好的，我摆弄了一个通用标记器（“UserPlaceTokenizer”）但放弃了：问题是工厂需要一个具体类的标记器，所以首先我尝试制作一个通用标记器：

```
 public static class  Tokenizer<T extends UserPlace> implements PlaceTokenizer<T> {

    @Override
    public final T getPlace(final String token) {
        return (T) new UserPlace(token); //BAD
    }

    @Override
    public final String getToken(final T place) {
        return place.getToken();
    }
} 
```

问题是将 UserPlace 转换为 (T) - 这不起作用（UserPlace 不能转换为具体的子类）。所以我需要一个“return new ShowUserPlace(...)”来获取这个实例，以满足 tokenizer 接口。长话短说：我回到了我以前的解决方案：扩展类正在复制超类的构造函数并提供单独的标记器，它们只需调用它们自己的构造函数（调用超级构造函数）：

```
public class ShowUserPlace extends UserPlace {

public ShowUserPlace(String token) {
    super(token);
}

@Prefix(value = "showUser")
public static class Tokenizer implements PlaceTokenizer<ShowUserPlace> {

    @Override
    public final ShowUserPlace getPlace(final String token) {
        return new ShowUserPlace(token);
    }

    @Override
    public final String getToken(final ShowUserPlace place) {
        return place.getToken();
    }
}
} 
```

一个临时解决方案是提供接口方法的抽象标记器。getPlace 将调用一个抽象方法（返回 T），具体实现将调用具体构造函数（也只调用超级构造函数）。最后，此解决方案将具有与上述解决方案大致相同的行数和复制代码：-|。

我对此仍然有一种不好的感觉-可能他们仍然是“..WithFactory”的解决方案，或者是面对这种用例的完全不同的方式。

# windows - 安排 Powershell 和批处理作业同步运行

> ID：10089966
> 
> 赞同：1
> 
> 时间：2012-04-10T13:42:40.140
> 
> 标签：windows, powershell, batch-file, scheduled-tasks, scheduling

我有 4 台服务器需要进行一些处理。处理分为两部分：

1.  运行批处理文件
2.  运行 powershell 脚本

我需要批处理文件在所有服务器上同时运行，最好是同时运行。我目前已经在所有服务器上设置了计划任务，因为我们使用网络时间服务，所以它们是同步的。

然后我需要一个接一个地运行 Powershell 脚本，即当 Server1 上的脚本完成时，Server2 上的脚本开始，然后当它完成时，Server3 开始，等等。这可以按照与第 1 部分相同的方式完成，即计划任务，但是这些任务需要大量不同的时间来完成。

我想避免批处理文件的计划任务选项，即使时间同步，我也希望它们都从一个地方开始。最后，我需要有关如何在不同服务器上以类似队列的方式调用 Powershell 脚本的建议。这可能吗？

**编辑 2012-04-11**

在基思希尔的回答的帮助下，我设法接近了我需要的东西。在这一点上发布我的代码对我来说是有意义的：

```
# $strServers[0] must correspond to $strFiles[0]
# $strServers[1] must correspond to $strFiles[1]
# etc.
$strServers = @(
    "di-ads-02",
    "di-ads-03", 
    "si-ads-02",
    "vm-ads-02"
);    
$strFiles = @(
    "D:\Utilities\test.ps1",
    "D:\Utilities\test.ps1", 
    "C:\Utilities\test.ps1",
    "D:\Utilities\test.ps1"
);

try 
{
    for ($i = 0; $i -lt $strFiles.Count; $i++)
    {
        $job = Invoke-Command -cn $strServers[$i] -ScriptBlock {Invoke-Expression $strFiles[$i]} -AsJob;
        # Wait for $job to finish for a maximum of 60 minutes
        Wait-Job $job -Timeout 3600;
    }
}
catch 
{
    Write-Host "ERROR : " + $_;
} 
```

我从 PowerShell 得到以下输出：

```
Id              Name            State      HasMoreData     Location             Command                  
--              ----            -----      -----------     --------             -------                  
47              Job47           Failed     False           di-ads-02            Invoke-Expression $str...
49              Job49           Failed     False           di-ads-03            Invoke-Expression $str...
51              Job51           Failed     False           si-ads-02            Invoke-Expression $str...
53              Job53           Failed     False           vm-ads-02            Invoke-Expression $str... 
```

它看起来已经完成了一半，但执行失败了。首先，我认为它可能*正在*运行，但只是没有正确报告。然后我修改了`test.ps1`脚本，使其在运行时输出两个文件（stderr 和 stdout），以便留下一些证据。当我远程到这些服务器并在本地运行脚本时，会生成这些文件，但是按照上面的脚本执行它是行不通的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:55:26.280

如果您可以在服务器上启用 PowerShell 远程处理，则可以使用来自一台机器的作业来编排 PowerShell 脚本的执行，例如：

```
$servers = 'server1','server2','server3','server4'
foreach ($server in $servers)
{
    $job = Invoke-Command -cn $server -Filepath c:\myscript.ps1 -AsJob
    Wait-Job $job -Timeout 180 # wait maximum of 3 minutes
} 
```

# search - ubuntu：查找在特定日期更改的所有文件

> ID：10089967
> 
> 赞同：1
> 
> 时间：2012-04-10T13:42:49.810
> 
> 标签：search, date, ubuntu

我想在 Ubuntu 中获取在某个日期（例如 11.1.2012）更改的所有文件的列表。

```
find -mtime 
```

几天前工作，但我想要一天的文件，并且想要比数天前更舒服。有什么办法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:59:07.923

你可以使用一个小技巧。使用*touch*命令创建两个文件，其修改日期包括您要搜索的日期。

例子：

> touch -t 201204080000 dummy1
> 
> 触摸-t 201204082359 dummy2

那么你可以使用*find*如下：

> 查找 /somedir/ ( -newer dummy1 -and !-newer dummy2 )

这应该会很好。

# sql - 当我尝试连接到 Postgresql 数据库时，Leiningen/Clojure 表现得很奇怪

> ID：10089969
> 
> 赞同：1
> 
> 时间：2012-04-10T13:43:00.173
> 
> 标签：sql, postgresql, clojure

我正在尝试按照此处的说明进行操作：[https ://devcenter.heroku.com/articles/clojure-web-application](https://devcenter.heroku.com/articles/clojure-web-application)

一切都很好，直到我输入的步骤

```
(sql/with-connection (System/getenv "DATABASE_URL")
     (sql/create-table :testing [:data :text])) 
```

进入 Leiningen 的 REPL。我收到此错误：

```
org.postgresql.util.PSQLException: Something unusual has occured to cause the driver to fail.  Please report this exception.  (NO_SOURCE_FILE:0) 
```

然后，Leiningen 甚至不会执行该`(exit)`函数。是什么赋予了？

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:03:27.957

我有同样的问题。我尝试了 Marko Topolnik 的建议，但它们对我不起作用，但这个可以：

```
export DATABASE_URL=postgresql://localhost/shouter 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:40:31.813

汉斯·恩格尔是对的。如果您连接到`localhost`，请使用以下两种 URL 形式之一：

`jdbc:postgresql:shouter`

`jdbc:postgresql://localhost/shouter`

并且一定要检查[官方文档](http://jdbc.postgresql.org/documentation/80/connect.html)

# php - IMAP、Microsoft Exchange、搜索电子邮件

> ID：10089970
> 
> 赞同：0
> 
> 时间：2012-04-10T13:43:02.017
> 
> 标签：php, email, exchange-server, imap

我目前正在开发一个网络应用程序，它本质上是一个 CRM。客户希望能够通过 CRM 完成所有日常业务任务。

他希望拥有的主要一点是能够从他的网络应用程序中发送和接收电子邮件。这可以使用 IMAP 吗？我可以得到消息线程等吗？

另一个要点是，如果他查看客户资料，他希望查看该客户的电子邮件线程。那可能吗？我可以根据收件人或发件人的电子邮件地址检索电子邮件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:33:58.153

您可以使用 IMAP 检索电子邮件，但不能使用它发送。IMAP 也确实具有处理线程的能力，并且就能够查看客户端的线程而言，我认为只要正确设置权限就可以完成。

有关更多信息，请参阅[http://php.net/manual/en/function.imap-thread.php](http://php.net/manual/en/function.imap-thread.php)和[http://www.php.net/manual/en/ref.imap.php](http://www.php.net/manual/en/ref.imap.php)。

# xml - 如何递归地“扩展”所有包含在 XML/XSD 中的内容？

> ID：10089974
> 
> 赞同：2
> 
> 时间：2012-04-10T13:43:16.337
> 
> 标签：xml, delphi, xsd, wsdl

是否有任何应用程序可以将带有一些包含的 XML 文件（实际上是 wsdl）用作输入并递归地浏览这些包含以生成最终的 XML（确实很大），并将目标包含合并到其中？

说明：BDS 2006 WSDL 导入器无法处理包含，并且导入的 xsd 中定义的某些数据类型未导入，因此出现编译错误。当我将所有引用的 XSD 文件递归地替换为一个大 XML 时，WSDL 导入器工作正常，但手动执行此替换非常困难且耗时。有一些应用程序可以为我做吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T04:51:53.407

我认为[QTAssistant](http://paschidev.com)做得更好（我在这里偏袒），至少与@Nick 在他的评论中描述的步骤相比；这里假设的一件事是只有一个 XSD；如果涉及多个命名空间，则方法是单独复制每个文件，同时确保删除 schemaLocation 属性。无论如何，似乎有很多摆弄。

在 QTAssistant 中，Tools 选项卡下有一个按钮*Internalize XSDs*；它的工作是提示您输入 WSDL 文件位置以及复制结果的文件夹。

![QTAssistant WSDL 内部化 XSD 命令](../Images/d0c36a587072817e3804e3a056497f64.png)

填写这两个字段，按**Load**，然后按**OK**。

![QTAssistant WSDL 内部化 XSD 提示](../Images/d87bed86d09a36f7646c7aca27c8a1f0.png)

然后打开重构的 WSDL 文件以供查看。

![在此处输入图像描述](../Images/02cb5fc1818fda809bc5d72cc665bde1.png)

您还可以按**Validate**按钮以通过 WS-I BP 1.1 规则以及 XSD 模式集验证来运行它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T13:49:24.363

我认为[OxygenXml](http://www.oxygenxml.com/xml_schema_editor.html#xml_schema_flatten)可以做到这一点。

我不是德尔福开发人员。我假设您正在尝试创建一个整合的具体 WSDL 以供 delphi 中的某种代理生成器使用，是吗？

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-12T17:23:50.890

我的 WSDL 有一些问题。所有答案都是很好的答案，但没有一个有效。谢谢大家的尝试

# eclipse - 类文件 javax/persistence/InheritanceType 中非本机或抽象方法中的缺失代码属性

> ID：10089975
> 
> 赞同：-1
> 
> 时间：2012-04-10T13:43:27.927
> 
> 标签：eclipse, maven-2, scope, tomcat7, m2eclipse

嗨，我尝试编写一个 pomfile，它支持在 eclipse 中运行 unittests + 在服务器上运行。但是 m2eclipse 忽略了范围并且总是将所有内容部署到服务器上。

要么我明白

```
java.lang.NoClassDefFoundError: javax/servlet/jsp/el/ELException 
```

因为我没有在代码中包含“javaee-web-api”或者我得到了

```
Caused by: java.lang.LinkageError: loader constraint violation: when resolving interface method "javax.servlet.jsp.JspApplicationContext.getExpressionFactory()Ljavax/el/ExpressionFactory;" the class loader (instance of org/apache/catalina/loader/WebappClassLoader) of the current class, com/sun/faces/config/ConfigureListener, and the class loader (instance of org/apache/catalina/loader/StandardClassLoader) for resolved class, javax/servlet/jsp/JspApplicationContext, have different Class objects for the type avax/el/ExpressionFactory; used in the signature 
```

因为我将它们包含在代码中，但 tomcat7 也包含它们，所以我尝试添加“提供”：

```
 <dependency>
        <groupId>org.jboss.spec</groupId>
        <artifactId>jboss-javaee-6.0</artifactId>
        <version>1.0.0.Final</version>
        <type>pom</type>
        <scope>provided</scope>
    </dependency> 
```

但是，当我从 eclipse 在服务器上运行它时，jar 包含在类路径中。

POM.XML

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>Lythgmbh</groupId>
<artifactId>Sociato</artifactId>
<version>0.0.1-SNAPSHOT</version>
<repositories>
    <repository>
        <id>central</id>
        <name>Maven Repository Switchboard</name>
        <url>http://repo1.maven.org/maven2</url>
        <layout>default</layout>
    </repository>
    <repository>
        <id>central2</id>
        <name>Maven Repository Switchboard2</name>
        <url>http://repo2.maven.org/maven2</url>
        <layout>default</layout>
    </repository>
    <repository>
        <id>prime-repo</id>
        <name>PrimeFaces Maven Repository</name>
        <url>http://repository.primefaces.org</url>
        <layout>default</layout>
    </repository>
    <repository>
        <id>fuse-repo</id>
        <name>Fuse open source community</name>
        <url>http://repo.fusesource.com/maven2</url>
        <layout>default</layout>
    </repository>
    <repository>
        <id>jahia.org</id>
        <name>jahia.org</name>
        <url>http://maven.jahia.org/maven2</url>
        <layout>default</layout>
    </repository>
    <repository>
        <id>asf-snapshot</id>
        <name>ASF Maven Repository</name>
        <layout>default</layout>
        <url>http://people.apache.org/maven-snapshot-repository</url>
    </repository>
    <repository>
        <id>org.springframework.security.taglibs.facelets</id>
        <url>http://spring-security-facelets-taglib.googlecode.com/svn/repo/</url>
    </repository>
    <repository>
        <id>repository.jboss.org-public</id>
        <name>JBoss repository</name>
        <url>https://repository.jboss.org/nexus/content/groups/public</url>
    </repository>
</repositories>
<dependencies>

    <!-- ADDITIONAL -->
    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-lang3</artifactId>
        <version>3.1</version>
    </dependency>
    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2.2</version>
    </dependency>
    <dependency>
        <groupId>postgresql</groupId>
        <artifactId>postgresql</artifactId>
        <version>9.1-901-1.jdbc4</version>
    </dependency>
    <dependency>
        <groupId>commons-httpclient</groupId>
        <artifactId>commons-httpclient</artifactId>
        <version>3.1</version>
    </dependency>
    <dependency>
        <groupId>jfree</groupId>
        <artifactId>jfreechart</artifactId>
        <version>1.0.13</version>
    </dependency>
    <dependency>
        <groupId>org.json</groupId>
        <artifactId>json</artifactId>
        <version>20090211</version>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
        <type>jar</type>
        <scope>compile</scope>
        <exclusions>
            <exclusion>
                <groupId>com.sun.jmx</groupId>
                <artifactId>jmxri</artifactId>
            </exclusion>
            <exclusion>
                <groupId>com.sun.jdmk</groupId>
                <artifactId>jmxtools</artifactId>
            </exclusion>
            <exclusion>
                <groupId>javax.jms</groupId>
                <artifactId>jms</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>net.htmlparser.jericho</groupId>
        <artifactId>jericho-html</artifactId>
        <version>3.2</version>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
    </dependency>
    <dependency>
        <groupId>org.supercsv</groupId>
        <artifactId>supercsv</artifactId>
        <version>1.20</version>
    </dependency>
    <dependency>
        <groupId>com.octo.captcha</groupId>
        <artifactId>jcaptcha</artifactId>
        <version>1.0</version>
    </dependency>
    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium</artifactId>
        <version>2.0rc2</version>
        <type>pom</type>
        <exclusions>
            <exclusion>
                <artifactId>httpclient</artifactId>
                <groupId>org.apache.httpcomponents</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.openid4java</groupId>
        <artifactId>openid4java-consumer</artifactId>
        <version>0.9.6</version>
        <type>pom</type>
    </dependency>
    <dependency>
        <groupId>com.lowagie</groupId>
        <artifactId>itext</artifactId>
        <version>2.1.7</version>
    </dependency>
    <dependency>
        <groupId>org.quartz-scheduler</groupId>
        <artifactId>quartz</artifactId>
        <version>1.8.6</version>
    </dependency>
    <dependency>
        <groupId>net.sf.ehcache</groupId>
        <artifactId>ehcache</artifactId>
        <version>2.5.1</version>
        <type>pom</type>
    </dependency>
    <dependency>
        <groupId>com.sun.mail</groupId>
        <artifactId>javax.mail</artifactId>
        <version>1.4.5</version>
    </dependency>
    <dependency>
        <groupId>org.apache.lucene</groupId>
        <artifactId>lucene-core</artifactId>
        <version>3.3.0</version>
    </dependency>

    <!-- JSF -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>
    <dependency>
        <groupId>com.sun.faces</groupId>
        <artifactId>jsf-impl</artifactId>
        <version>2.1.7</version>
    </dependency>
    <dependency>
        <groupId>com.sun.faces</groupId>
        <artifactId>jsf-api</artifactId>
        <version>2.1.7</version>
    </dependency>
    <dependency>
        <groupId>org.richfaces.ui</groupId>
        <artifactId>richfaces-components-api</artifactId>
        <version>4.2.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.richfaces.core</groupId>
        <artifactId>richfaces-core-api</artifactId>
        <version>4.2.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.primefaces</groupId>
        <artifactId>primefaces</artifactId>
        <version>3.2</version>
    </dependency>
    <dependency>
        <groupId>commons-el</groupId>
        <artifactId>commons-el</artifactId>
        <version>1.0</version>
    </dependency>
    <dependency>
        <groupId>org.richfaces.ui</groupId>
        <artifactId>richfaces-components-ui</artifactId>
        <version>4.2.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.richfaces.core</groupId>
        <artifactId>richfaces-core-impl</artifactId>
        <version>4.2.0.Final</version>
    </dependency>

    <!-- SPRING -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>3.1.0.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-taglibs</artifactId>
        <version>3.1.0.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>3.1.0.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-acl</artifactId>
        <version>3.1.0.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-mock</artifactId>
        <version>2.0.8</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>facelets-taglib-jsf20-spring-3</artifactId>
        <version>0.5</version>
    </dependency>

    <!-- JCR -->
    <dependency>
        <groupId>org.apache.jackrabbit</groupId>
        <artifactId>jackrabbit-core</artifactId>
        <version>2.4.1</version>
        <exclusions>
            <exclusion>
                <artifactId>lucene-core</artifactId>
                <groupId>org.apache.lucene</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>javax.jcr</groupId>
        <artifactId>jcr</artifactId>
        <version>2.0</version>
    </dependency>

    <!-- HIBERNATE -->
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>4.1.1.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.1.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-search</artifactId>
        <version>4.1.0.CR3</version>
        <exclusions>
            <exclusion>
                <artifactId>lucene-core</artifactId>
                <groupId>org.apache.lucene</groupId>
            </exclusion>
            <exclusion>
                <artifactId>commons-lang</artifactId>
                <groupId>commons-lang</groupId>
            </exclusion>
        </exclusions>
    </dependency>

    <!-- J2EE -->

    <dependency>
        <groupId>org.jboss.spec</groupId>
        <artifactId>jboss-javaee-6.0</artifactId>
        <version>1.0.0.Final</version>
        <type>pom</type>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-web-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>org.apache.myfaces.orchestra</groupId>
        <artifactId>myfaces-orchestra-core</artifactId>
        <version>1.4</version>
        <exclusions>
            <exclusion>
                <artifactId>commons-lang</artifactId>
                <groupId>commons-lang</groupId>
            </exclusion>
        </exclusions>
    </dependency>

</dependencies> 
```

.classpath

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
<classpathentry excluding="de/lyth/user/handler/ChatRoomBean.java|de/lyth/user/handler/ChatUserHandler.java" kind="src" path="src"/>
<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/J2SE-1.5"/>
<classpathentry kind="con" path="org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry>
<classpathentry kind="con" path="org.eclipse.jst.j2ee.internal.web.container"/>
<classpathentry kind="con" path="org.eclipse.jst.j2ee.internal.module.container"/>
<classpathentry kind="output" path="target/classes"/> 
```

我如何告诉 m2eclipse 当我运行测试时它应该包含“jboss-javaee-6.0”而在服务器上运行时它不应该包含

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:43:07.887

您必须安装 m2e-wtp，即 Eclipse WTP 的 Maven 集成 ( [https://github.com/sonatype/m2eclipse-wtp/wiki](https://github.com/sonatype/m2eclipse-wtp/wiki) )。

Eclipse 更新站点位于[http://download.jboss.org/jbosstools/updates/m2eclipse-wtp/](http://download.jboss.org/jbosstools/updates/m2eclipse-wtp/)

安装后，它将确保提供的和测试的依赖项未部署到您的服务器（您可以先运行“Maven > 更新项目配置”）

# ruby-on-rails - 这条线在我的 Rails 应用程序中做了什么

> ID：10089977
> 
> 赞同：0
> 
> 时间：2012-04-10T13:43:48.407
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

好的，所以我有我的 users_controller 更新操作有这个代码，这是在生产和工作中，我想知道这条线在做什么

```
@user.attributes = { 'role_ids' => [] }.merge(params[:user]) 
```

而且我不明白这是如何设置 role_ids 以及是否有更好的方法来做到这一点

@user 是用户并且 .attributes 里面没有 role_ids 所以这是如何工作的......这是我的关系

```
class Role < ActiveRecord::Base
  has_many :users, :through => :role_users
  has_many :role_users

class User < ActiveRecord::Base
  has_many :roles, :through => :role_users
  has_many :role_users

class RoleUser < ActiveRecord::Base
  belongs_to :role
  belongs_to :user
end 
```

参数是

```
Parameters: {"utf8"=>"✓", "authenticity_token"=>"GV/BbOZdKn7SkzD8zydceVdwA+fga=", "user"=>{"id"=>"629", "company_id"=>"1", "active"=>"1", "role_ids"=>["1", "3", "1"], "notification_ids"=>["1", "2", "3"]}, "company"=>"11", "id"=>"621"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:48:24.233

我假设这个用户界面是一系列复选框，名称`role_ids[]`和值是规则的 id。如果角色 2、3、4 的框被勾选，这将导致`role_ids`参数设置为`[2,3,4]`

唯一的麻烦是当你不想给某人任何角色时。如果所有复选框都未选中，则根本不`role_ids`提交任何参数。

```
@user.attributes = { 'role_ids' => [] }.merge(params[:user]) 
```

确保当没有选中任何复选框时，用户实际上已删除所有现有角色

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T13:48:59.300

有关此函数如何工作的详细信息，请参阅[Hash#merge](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-merge)。在这里，它只是确保如果`params[:user][:role_ids]`不存在，那么它将保存一个空数组。

你也可以这样做：

```
params[:user][:role_ids] ||= [] 
```

我认为它更好，更易读。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T13:51:17.997

下面的行检查 role_ids，如果 params[:user] 中的 role_ids 则取另一个取空数组：

```
@user.attributes = { 'role_ids' => [] }.merge(params[:user]) 
```

意味着合并的工作方式如下：

```
params[:user][:role_ids] = (params[:user].include? 'role_ids') ?  params[:user][:role_ids] : [] 
```

所以你得到了role_ids

```
irb(main):026:0> { 'role_ids' => [] }.merge(params[:user])
=> {"role_ids"=>["1", "3", "1"], "id"=>"629", "company_id"=>"1", "active"=>"1", "notification_ids"=>["1", "2", "3"]} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T13:53:30.667

如果散列中有重复项，则[Hash#merge](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-merge)将作为参数提供给 #merge 的散列中的条目的值返回。您的参数中有 a `"role_ids"=>["1", "3", "1"]`，因此`role_ids`将设置为该参数。

# iphone - Cocos2d 应用程序可在除 iPhone 4（任何操作系统）以外的所有设备上运行，CCBatchnode 在 addchild 后仅显示黑屏

> ID：10089978
> 
> 赞同：3
> 
> 时间：2012-04-10T13:43:49.847
> 
> 标签：iphone, cocos2d-iphone, screen

我已经为 iPhone 开发了一个名为 Linsanity Rush 的应用程序，并且我已经在 iPhone 模拟器（普​​通/视网膜）、iPad 模拟器、iPad2 iOS 5.0.1、iPhone 4S 上进行了测试，并且一切正常。但是，一些 iPhone 4 用户抱怨点击开始游戏按钮后除了静音和暂停按钮外，游戏只显示黑屏。

Xcode 版本为 4.2.1
Mac 版本 10.7.2
Cocos2d 版本 cocos2d v2.0.0-beta

我已经在 iPhone 4 上的不同操作系统上对此进行了测试，并且都遇到了同样的问题。我检查了我的代码，发现我添加的图形`CCBatchnode`只是显示黑屏。这解释了为什么用户只能看到静音和暂停按钮，因为这两个按钮不是`addChild`使用`CCBatchnode`.

关于这个问题的附加信息，我不确定是不是`CCBatchNode`有问题，因为我也在`CCBatchNode`主菜单中使用过，iPhone 4 用户能够在主菜单上看到图像，问题只有在他们进入主菜单时才会出现位于不同源文件上的游戏，我用游戏替换场景。

但是，我在网上搜索了很长时间，但找不到任何与我类似的错误，而这种错误只发生在 iPhone 4 上。我完全不知道是什么原因造成的，所以我不知道是哪一部分的源代码我应该在这里发布的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T04:07:50.550

我找到了这个问题的答案。以前我只是用 Iphone 4S 和 iPad2 进行测试。当我使用 iPhone 4 和 3GS 进行测试时，我在 XCode 中收到消息显示：

cocos2d：警告：图像 (1024 x 4096) 大于支持的 2048 x 2048。

这是因为如果我想支持 iPhone 3GS 或 iPhone 4，我使用 Zwoptex 创建的图像不能大于（2048 x 2048）（我目前使用的是 4096 x 4096）。我通过创建多个 spritesheet 并将图像分成更小的列表来解决这个问题。

希望如果有人遇到同样的问题知道如何解决这个问题。

# asp.net - ASP.NET - 控件大小在设计和运行时不同

> ID：10089980
> 
> 赞同：2
> 
> 时间：2012-04-10T13:44:04.180
> 
> 标签：asp.net, size, controls

我最近注意到，有时控件大小与设计时设置的大小不同。例如，我在表格列中放置了一个下拉列表。以下是它在设计时的样子：![设计时版本](../Images/cbc88713c10d38ad2e2c53e6149f45c9.png)

下面是它在运行时的样子：![运行时版本](../Images/69dc7dc49e99a343b15f1194e58c90ac.png)这是什么原因？

PS对不起，我不知道如何正确布局图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:49:29.823

这发生在 IE 中；在 CSS 中设置宽度时，我通常不得不对此做出妥协。根据您的情况，您可以为更现代的 IE 版本添加元标记。您还可以查看标签映射；我听说您可以通过这种方式利用更多控制权，但无法确认。

[使用标记映射修复 ASP.NET 服务器控件呈现问题](http://leedumond.com/blog/fixing-asp-net-server-control-rendering-issues-with-tag-mapping/)

此外，请确保在 CSS 中使用固定（不是 %）宽度。

# c# - 如何将每个 PDF 页面转换为单个图像 c#

> ID：10089981
> 
> 赞同：5
> 
> 时间：2012-04-10T13:44:04.140
> 
> 标签：c#

有很多免费的图书馆可以将 pdf 转换为图像。

```
 string file = "D:/test.pdf";
   string image = "D:\\test.png";

   try
   {
       GflAx.GflAxClass g = new GflAx.GflAxClass();
       g.EpsDpi = 150;
       g.Page = 1;
       g.LoadBitmap(file);
       g.SaveFormat = GflAx.AX_SaveFormats.AX_PNG;
       g.SaveBitmap(image);
       MessageBox.Show(this, "PDF to PNG conversion ended");
   }
   catch (Exception ex) {
       MessageBox.Show(this, "GflAx error: " + ex.Message);
   } 
```

另一个免费库，例如 [http://code.google.com/p/lib-pdf/](http://code.google.com/p/lib-pdf/)

[http://www.codeproject.com/Articles/32274/How-To-Convert-PDF-to-Image-Using-Ghostscript-API](http://www.codeproject.com/Articles/32274/How-To-Convert-PDF-to-Image-Using-Ghostscript-API)

[http://www.codeproject.com/Articles/57100/Simple-and-Free-PDF-to-Image-Conversion](http://www.codeproject.com/Articles/57100/Simple-and-Free-PDF-to-Image-Conversion)

[http://www.codeproject.com/Articles/42287/Convert-PDF-pages-to-image-files-using-the-Solid-F](http://www.codeproject.com/Articles/42287/Convert-PDF-pages-to-image-files-using-the-Solid-F)

我有 2 个要求，例如如果我的 pdf 文件有 20 页，那么我需要使用的库将为 20 页生成 20 张图像……意味着每次每页一张图像并将这些图像保存在文件夹中。

另一个要求是，如果我发送第 no 页，那么它将仅为该页生成图像...请指导我需要使用哪个库来满足我的要求。

谢谢

# spring - 如何重新打开现有的 SpringRoo 项目？

> ID：10089986
> 
> 赞同：0
> 
> 时间：2012-04-10T13:44:11.467
> 
> 标签：spring, console, spring-roo

也许是一个愚蠢的新手问题：如何在不删除现有数据的情况下重新打开现有的[roo](http://static.springsource.org/spring-roo/reference/html/beginning.html)项目并添加新字段或实体，例如：

```
roo.sh
  project  --topLevelPackage de.test.model
  jpa setup  --provider HIBERNATE  --database MYSQL 
  entity jpa  --class de.test.model.Person
  field string  --fieldName name
quit

roo.sh
  field string  --fieldName surname 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:29:00.317

不用担心，查看您发出的命令不会删除您现有的数据。您将需要执行该`focus`命令以确保 Roo 控制台当前专注于您正在向其中添加字段的实体。

```
roo> focus --class com.foo.Blah
~.Blah roo> 
```

[你可以在https://jira.springsource.org/browse/ROO-784](https://jira.springsource.org/browse/ROO-784)找到这个命令的历史。

干杯。

# android - Android 运行时错误“java.lang.NoClassDefFoundError: org.apache.commons.collections.CollectionUtils”

> ID：10089989
> 
> 赞同：0
> 
> 时间：2012-04-10T13:44:16.923
> 
> 标签：android

我正在尝试在 Android 中使用 org.apache.commons.collections.CollectionUtils。示例如下

```
import java.util.ArrayList;

import org.apache.commons.collections.CollectionUtils;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class CheckCommonsActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    String email1 = "xyz@gmail.com";
    String email2 = "abc@gmail.com";
    String email3 = "mnp@gmail.com";
    String email4 = null;       

    ArrayList<String> emailList1 = new ArrayList<String>();
    emailList1.add(email4);
    emailList1.add(email1);
    emailList1.add(email2);
    emailList1.add(email3);

    ArrayList<String> emailList2 = new ArrayList<String>();
    emailList2.add(email3);
    emailList2.add(email2);
    emailList2.add(email1);

    boolean isEqual = CollectionUtils.isEqualCollection(emailList1,
 emailList2);
    TextView text = (TextView) findViewById(R.id.text);
    text.setText(String.valueOf(isEqual));
   }
 } 
```

我已将 commons-collections-3.2.1.jar 导入 Android 项目的构建路径，但`java.lang.NoClassDefFoundError: org.apache.commons.collections.CollectionUtils`在运行时出现错误。

**编辑1**

![Android 项目神器](../Images/298e929a984f2dbbb454246f8107e510.png)

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T14:06:07.310

您必须将库放在您的android项目的/libs（不是/lib）文件夹中

编辑：我假设你把它放在 /lib 文件夹中，因为这是一个常见的故障。在您添加的屏幕截图中可以看到您将 lib 作为外部 jar 包含在内。无论如何..无论你把它放在 /lib 还是作为外部 jar 解决方案都是一样的：创建 /libs 文件夹并将 lib 放在那里

# log4j - Log4Net 间歇性覆盖文件而不是滚动文件

> ID：10089992
> 
> 赞同：1
> 
> 时间：2012-04-10T13:44:29.557
> 
> 标签：log4j, log4net, logging

我的 log4net 出现间歇性问题。

我正在使用具有大量日志文件流量的高性能系统。在峰值，500-600 行/秒被写入日志。

由于多个进程正在访问同一个日志文件，因此我使用了一个由普通 Windows 服务托管的 RemotingAppender。以下是我的 RemotingAppender 主机的配置：

```
<appender name="FileLogAppender" type="log4net.Appender.RollingFileAppender" >
    <file value="${REMOTELOG4NETLOGDIR}" />
    <datePattern value="yyyy-MM-dd'.log'" />
    <staticLogFileName value="false" />
    <encoding value="utf-8" />
    <appendToFile value="true" />
    <rollingStyle value="Composite" />
    <maxsizerollbackups value="200"/>
    <maximumfilesize value="3MB"/>
    <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date{HH:mm:ss}&#9;%property{source}&#9;%    property{level}&#9;%message%newline"/>
    </layout>
    <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
</appender> 
```

大多数时候一切正常。文件在日期或达到最大文件大小时滚动。但是突然之间，当它应该滚动一个文件时，它实际上会覆盖应该滚动的文件并擦除该文件中的所有现有行，从而在日志的历史记录中留下一个空白。

我很高兴所有可能的答案可能会有所帮助

# android - Android如何聚焦ActionBar searchView

> ID：10089993
> 
> 赞同：55
> 
> 时间：2012-04-10T13:44:39.703
> 
> 标签：android, android-widget

您好，我需要在 searchView 中放置一些文本并聚焦/展开 searchView 小部件。

这是我尝试过的，但它不起作用

```
@Override
public boolean onCreateOptionsMenu(final Menu menu) {
...
    SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();
    searchView.setQuery(this.filtro, false);
    searchView.setFocusable(true);
    searchView.requestFocus();
    searchView.requestFocusFromTouch(); 
```

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-04-25T14:12:58.103

尝试使用`searchView.setIconified(false)`. 这对我有用：

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ActionBar actionBar = getActionBar();
    SearchView searchView = new SearchView(this);
    actionBar.setCustomView(searchView);
    actionBar.setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM);
    searchView.setQuery("test",true);
    searchView.setFocusable(true);
    searchView.setIconified(false);
    searchView.requestFocusFromTouch();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T13:52:16.303

这是另一个解决方案。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main_menu, menu);
    MenuItem menu_search = menu.findItem(R.id.menu_search);

    menu_search.setOnActionExpandListener(new OnActionExpandListener() {
        @Override
        public boolean onMenuItemActionCollapse(MenuItem item) {
            // Do something when collapsed
            return true;  // Return true to collapse action view
        }

        @Override
        public boolean onMenuItemActionExpand(MenuItem item) {
            //get focus
            item.getActionView().requestFocus();
            //get input method
            InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.toggleSoftInput(0, InputMethodManager.HIDE_NOT_ALWAYS);
            return true;  // Return true to expand action view
        }
    });
    return true;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-22T17:50:26.877

这对我有用：

```
 @Override
        public boolean onMenuItemActionExpand(MenuItem item)
        {
            if (sm.isMenuShowing()) {
                sm.toggle();
            }
            searchView.setIconified(true);
            KeyEvent event = new KeyEvent(KeyEvent.ACTION_DOWN, 32);
            searchView.onKeyDown(32, event);
            return true;
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-28T11:08:25.437

对我来说，以下作品：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    ...
    MenuItem miSearch = menu.findItem(R.id.menu_search);
    SearchView mSearchView = (SearchView) miSearch.getActionView();

    mSearchView.setOnSearchClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            mSearchView.setFocusable(true);
            mSearchView.requestFocusFromTouch();
        }
    }); 
```

我使用 android.support.v7.widget.SearchView。当试图设置`mSearchView.setIconified(false);`它进入一个无限循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-14T08:06:28.257

```
searchView.setQuery("typeAnything",true);
searchView.setFocusable(true); 
```

会成功的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-16T02:43:39.563

```
public void setIconified(boolean iconify) {
    if (iconify) {
        onCloseClicked();
    } else {
        onSearchClicked();
    }
} 
```

这是 SearchView 中的代码

**setIconified()**对我有用

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-04T01:56:42.777

在活动 xml 中，您可以使用这一行：

```
android:iconifiedByDefault="false" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-08T18:20:01.990

如果 SearchView 是通过菜单配置制作的，我使用菜单项展开操作视图。

```
private var searchMenuItem: MenuItem? = null

// create search menu item
override fun onCreateOptionsMenu(menu: Menu?): Boolean {
    menuInflater.inflate(R.menu.search_menu, menu)
    searchMenuItem = menu?.findItem(R.id.action_search)
    val searchManager = getSystemService(Context.SEARCH_SERVICE) as SearchManager
    (searchMenuItem?.actionView as? SearchView)?.apply {
        setSearchableInfo(searchManager.getSearchableInfo(componentName))
    }
    return super.onCreateOptionsMenu(menu)
}

override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.activity_search)
    setSupportActionBar(findViewById(R.id.toolbar))
    // Execute 'expandActionView' delayed 
    // because I want to focus field only when first start.
    Handler().postDelayed({
        // show field and focus it.
        searchMenuItem?.expandActionView()
    }, 500)
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-24T02:09:53.443

我在 onCreateOptionMenu 中实现了它并且它有效。你不需要使用`setIconified(false);`

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);

        // Associate searchable configuration with the SearchView
        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        searchView = (SearchView) menu.findItem(R.id.action_search).getActionView();
        searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
        searchView.setMaxWidth(Integer.MAX_VALUE);
        searchView.setOnClickListener(view -> menu.findItem(R.id.action_sleep_timer).setVisible(false));
        searchView.setOnCloseListener(() -> {
            menu.findItem(R.id.action_sleep_timer).setVisible(true);
            return false;
        });
        searchView.setOnSearchClickListener(view -> {
            menu.findItem(R.id.action_sleep_timer).setVisible(false);
            searchView.requestFocus();
        });
return true;
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-04T10:01:08.153

使用 MenuItem 的 expandActionView()

```
override fun onCreateOptionsMenu(menu: Menu): Boolean {
        menuInflater.inflate(R.menu.menu_search, menu)
        menuItemSearch = menu.findItem(R.id.action_search)
        searchView = menuItemSearch?.actionView as SearchView
        // ...
        menuItemSearch?.expandActionView()
        return true
    } 
```

你需要添加这一行：

```
menuItemSearch?.expandActionView() 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-22T09:45:46.600

对我来说，@farmer.chs 的方法只有在我添加延迟后才有效：

```
 override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
 super.onViewCreated(view, savedInstanceState)

 activity?.let {
            searchBar?.postDelayed({
                  searchBar.isIconified = false
                  searchBar.isFocusable = true
                  searchBar.requestFocusFromTouch()
            }, 100)
        } 
```

PS这个代码在片段中被调用

# editor - 带表格的 Markdown 编辑器

> ID：10089994
> 
> 赞同：8
> 
> 时间：2012-04-10T13:44:40.997
> 
> 标签：editor, markdown, wmd-markdown

是否有任何可以与表格一起使用的客户端降价编辑器？我只需要 Stack Overflow 的编辑器或 markdownDeep 之类的东西——它们都很棒。但是这些编辑器不允许我自定义表格，就像 Dreamweaver 使用 HTML 表格那样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-07-04T09:27:38.823

Typora 是一个非常有前途的 MarkDown 编辑器：[https ://typora.io/](https://typora.io/)

表格支持非常适合创建或编辑，只要有许多其他功能。

它正在使用 GitHub Flavored Markdown ... 这很好，但目前无法生成 CommonMark。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:47:19.243

[Markdown Extra](http://michelf.com/projects/php-markdown/extra)支持[表格](http://michelf.com/projects/php-markdown/extra/#table)，但这只是 PHP。

然而，Github 上有一个基于 PHP 版本的[JavaScript Markdown Extra 库。](https://github.com/tanakahisateru/js-markdown-extra)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-06T05:29:22.130

**[Mark Text](https://github.com/marktext/marktext)**是 Mac 的 Markdown 编辑器。它是一款简洁的文本编辑器，致力于提高您的编辑效率，让您在轻松完成文档、小说和会议记录时享受乐趣。

它支持表格和其他 GFM 语法。

[这是标记文本的样子](https://i.stack.imgur.com/Abs42.jpg)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-03T21:01:34.400

[Nwotable](https://nwotable.herokuapp.com/app/)是一个用于编辑降价的渐进式 Web 应用程序（Github Flavored）。所以它支持：

*   表
*   表情符号
*   无限嵌套标签

欲了解更多信息或查看源代码 -->[此处](https://github.com/Nergel3/Nwotable)。

# php - 用于爆炸电子邮件接收器的 PHP 正则表达式

> ID：10089995
> 
> 赞同：1
> 
> 时间：2012-04-10T13:44:46.330
> 
> 标签：php, regex, explode, comma

在我的 sql 中，我有一些包含电子邮件发件人的行。这些发件人是字符串，不通过列分隔。

这是我行中的 1 个示例。

```
"Test Example" <test@example.com>, "Second Person" <sperson@example.com>, third@example.com 
```

如您所见，它的纯文本已准备好爆炸。我可以用逗号将其爆炸并将它们分开。

但是今天我意识到了这个例子：

```
"Test, Example" <test@example.com>, "Second Person" <sperson@example.com>, third@example.com 
```

如您所见，Test 的名称中有一个逗号。所以如果我爆炸它也会爆炸测试。这将导致错误。

我尝试了一些正则表达式，但没有运气。谁能建议我最好的正则表达式来爆炸它们，而不是名字。

仅供参考，名称总是在**“”**标签中。所以逗号不是。

**如果逗号**在**引号**中，我只需要传递。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:49:52.980

```
explode('>, "', $emails); 
```

然后添加爆炸的字符 - 或者，更好的是，使用[`imap_rfc822_parse_adrlist()`](http://www.php.net/manual/en/function.imap-rfc822-parse-adrlist.php).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:50:26.720

也许您应该在数据库中验证您的数据，因此某人的姓名不能包含“，”（或其他符号）。

您不希望您的用户决定您的格式显示，您应该在需要显示文本时自己格式化文本