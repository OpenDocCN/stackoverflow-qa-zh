# StackOverflow 问答 11992000-11992999

# selenium-webdriver - 如何使用 Selenium WebDriver（Selenium 2）从组合框中获取选定的值？

> ID：11992001
> 
> 赞同：10
> 
> 时间：2012-08-16T16:54:32.967
> 
> 标签：selenium-webdriver

假设我有这个 html 代码：

```
<select id="superior" size="1" name="superior">
    <option value=""></option>
    <option value="c.i.e.m.md.Division_1">DIVISION007</option>
    <option selected="selected" value="c.i.e.m.md.Division_$$_javassist_162_119">MyDivision</option>
    <option value="c.i.e.m.md.Division_121">MyDivision4</option>
    <option value="c.i.e.m.md.Division_122">MyDivision5</option>
</select> 
```

所以这是一个组合框

```
id=superior 
```

并且当前值 MyDivision 被选中。

使用 Selenium WebDriver 我试图获得选定的值，但没有成功。

我试过：

```
String option = this.ebtamTester.firefox.findElement(By.id(superiorId)).getText();
return option; 
```

但这会返回组合框中的所有值。

请帮忙？

编辑：

```
WebElement comboBox = ebtamTester.firefox.findElement(By.id("superior"));
SelectElement selectedValue = new SelectElement(comboBox);
String wantedText = selectedValue.getValue(); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-16T17:30:50.317

这是用 C# 编写的，但将其转换为您正在使用的任何其他语言应该不难：

```
IWebElement comboBox = driver.FindElement(By.Id("superior"));
SelectElement selectedValue = new SelectElement(comboBox);
string wantedText = selectedValue.SelectedOption.Text; 
```

SelectElement 要求您使用 OpenQA.Selenium.Support.UI，因此在顶部键入

```
using OpenQA.Selenium.Support.UI; 
```

* * *

编辑：

我想对你来说，你会使用而不是“驱动程序”

```
IWebElement comboBox = this.ebtamTester.firefox.FindElement(By.Id("superior")); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-16T13:20:58.480

在 Java 中，以下代码应该可以正常工作：

```
import org.openqa.selenium.support.ui.Select;
Select comboBox = new Select(driver.findElement(By.id("superior")));
String selectedComboValue = comboBox.getFirstSelectedOption().getText();
System.out.println("Selected combo value: " + selectedComboValue); 
```

由于当前选择了 MyDivision，上述代码将打印“MyDivision”

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-30T15:53:31.183

> selectedValue.SelectedOption.Text；将为您提供所选项目的文本。有谁知道如何获得选定的值。

要获得选定的值，请使用

```
selectedValue.SelectedOption.GetAttribute("value"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-17T05:40:44.697

要根据标签选择选项：

```
Select select = new Select(driver.findElement(By.xpath("//path_to_drop_down")));
select.deselectAll();
select.selectByVisibleText("Value1"); 
```

要获得第一个选定的值：

```
WebElement option = select.getFirstSelectedOption() 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-01T13:57:07.683

在 C# 中使用 XPath

```
 string selectedValue=driver.FindElement(By.Id("superior")).FindElements(By.XPath("./option[@selected]"))[0].Text; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2022-02-17T12:05:17.223

根据@Micheal 的回答，使用以下命令会更容易：

```
string  selectedValue = new SelectElement(driver.FindElement(By.Id("Year"))).SelectedOption.Text; 
```

# c# - Json.net linq to json 将 null 转换为 JObject 抛出异常

> ID：11992003
> 
> 赞同：1
> 
> 时间：2012-08-16T16:54:40.357
> 
> 标签：c#, null, json.net

例如，我写这样的代码

```
 bool hasCustomer = true;

        JObject j = JObject.FromObject(new
        {
            customer = hasCustomer? new
            {
                name = "mike",
                age = 48
            }:null
        });

        JObject c = (JObject)j["customer"];
        if (c != null)
            string name = (string) c["name"]; 
```

这工作正常。

但是如果我设置 hasCustomer = false;

```
 JObject c = (JObject)j["customer"]; 
```

将抛出 System.InValidCastException：

```
 Unable to cast object of type 'Newtonsoft.Json.Linq.JValue' to type 'Newtonsoft.Json.Linq.JObject'. 
```

我期待应该将 null 分配给 JObject c，因为 JObject 可以为空。

**那么，处理这样的事情的最佳方法是什么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T17:21:18.503

忽略 null，似乎产生了正确的行为。

```
 bool hasCustomer = false ;

    JsonSerializer s = new JsonSerializer() {
        NullValueHandling = NullValueHandling.Ignore
    };
    JObject j = JObject.FromObject( new {
        customer = hasCustomer ? new {
            name = "mike" ,
            age = 48
        } : null
    }, s );

    JObject c = (JObject)j[ "customer" ]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-16T17:12:15.483

JObject 可以为空，但这并不意味着 JObject 可以强制转换为空。你可以试试这个：

```
JObject j = JObject.FromObject(new
        {
            customer = hasCustomer? new
            {
                name = "mike",
                age = 48
            }:new Object()
        }); 
```

# linux - CURL：如何在请求之间保留 cookie？

> ID：11992004
> 
> 赞同：6
> 
> 时间：2012-08-16T16:54:40.857
> 
> 标签：linux, bash, curl

我需要登录到一个页面，然后提交一个条目。我可以使用以下代码登录

```
curl $HOST -s -L -b $COOKIE -c $COOKIE -d "login=submit&login_name=$USER&login_password=$PASS" -o $OUTPUT 
```

但是当我尝试提交条目时，我不再登录了

```
curl $HOSTADDNEWS -L -b $COOKIE -c $COOKIE -A $HEADER -d "title=$TITLE" -o $OUTPUT.add.news 
```

如何在请求之间保留 cookie？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:21:19.543

感谢丹尼尔·斯坦伯格！$COOKIE 变量中有一个“斜线”......它仍然保存到文件但无法使用它。

# objective-c - UIImageView 到 UIImage？

> ID：11992006
> 
> 赞同：-2
> 
> 时间：2012-08-16T16:54:46.520
> 
> 标签：objective-c, ios, cocoa-touch, uiimageview, uiimage

我想将图像上传到服务器。我可以做到这一点，它适用于`UIImage`. 但是，我想上传当前显示在我的应用程序中的图像，该图像位于`UIImageView`.

我怎样才能通过，或将`UIImageView`图像临时存储在一个`UIImage`？我尝试了以下方法，但它不起作用。

```
UIImage *myImage = imageView.image; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:46:01.983

我还不确定为什么直接访问图像属性对您不起作用，但是您也可以将图像视图渲染到位图上下文中，然后从上下文中创建一个新图像。代码将类似于：

```
#import <QuartzCore/QuartzCore.h>  // necessary for referencing CALayers
...
CGSize imageSize = imageView.bounds.size; 
UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0);
CGContextRef context = UIGraphicsGetCurrentContext();
[imageView.image.layer renderInContext:context];
UIImage *myImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

请参阅[技术问答 QA1703 - UIKit 应用程序中的屏幕捕获](https://developer.apple.com/library/ios/#qa/qa1703/_index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:44:23.440

你有什么应该工作，你得到什么样的错误？或者你可以试试这个......

```
UIImage *image = [[UIImage alloc] initWithData:UIImagePNGRepresentation(imageView.image)]; 
```

甚至更好...

```
UIImage *image = [UIImage imageWithData:UIImagePNGRepresentation(imageView.image)]; 
```

但是，当 UIImageView 中已经有一个 UIImage 时，为什么还要分配一个 UIImage？只需直接使用 imageView.image ...

# python - 如何使用 Sphinx 只构建一个文件

> ID：11992007
> 
> 赞同：11
> 
> 时间：2012-08-16T16:54:51.217
> 
> 标签：python, python-sphinx

为了快速预览，我只想构建一个文件而不是所有项目。狮身人面像有可能吗？

最近我做了类似的事情：

```
sphinx-build -b html documentation/ doc_html 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T19:12:13.707

Sphinx 已经通过仅为新的和更改的源文件编写输出文件来使用增量构建。但在此之前，需要完整构建，因为 Sphinx 需要知道内部链接指向的位置以及引用它们的位置。

# google-apps-script - （如何）我可以在 Google Apps 脚本中使用模块模式吗？

> ID：11992008
> 
> 赞同：3
> 
> 时间：2012-08-16T16:54:51.837
> 
> 标签：google-apps-script, google-sheets

我试图将我的菜单功能放在这样的模块中：

```
var mainmenuModule = function() {
  return {
    menuItemX: function() {...},
    menuItemY: function() {...}
  };
}(); 
```

但是当我创建一个菜单项时，找不到我的功能：

```
{ name: "X", functionName: "mainMenuModule.menuItemX"} 
```

我在电子表格容器中执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:29:47.733

您目前不能这样做，但我看到[Issue 1355](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1355)已被记录为支持[库](https://developers.google.com/apps-script/guide_libraries)的增强功能。您可以为问题“加注星标”以接收更新。

# javascript - HTML5 LocalStorage 作为缓存和单个资产请求

> ID：11992009
> 
> 赞同：3
> 
> 时间：2012-08-16T16:54:59.797
> 
> 标签：javascript, web-applications, architecture, assets

我想知道以下概念的限制和缺点：

要求：

1.  支持 LocalStorage 的浏览器。
2.  服务器端异步非阻塞 i/o 技术。

让我们想象一下以下请求流程：

1.  ***客户端 GET / 请求 -> 服务器***。我们将此阶段称为“问候”，这是一个有趣的阶段，因为客户端现在发送（当然也是通过标头）：

    *   ip
    *   浏览器
    *   浏览器版本
    *   语言
    *   字符集
2.  ***服务器 -> 客户端***（200 OK）

3.  **客户端 -> 如果 OK** -> 与服务器建立 websocket

一旦建立了 websocket，我们就进入了“资产流”阶段。

1.  ***服务器 -> 查找特定于：语言、浏览器、分辨率特定资产的匹配资产***（样式表、图像、javascript 文件、字体等）并通过 websocket 流式传输它们。

2.  ***服务器 -> 请求***（websocket，资产的异步流）

***好处 1.***没有多个请求通过线路避免 DNS 查找等。

***好处 2.***将这些资产缓存在 localStorage 中，这是下一阶段。

1.  ***请求 -> 放入 LocalStorage 缓存。***
2.  ***请求 -> 渲染网站。***

我想知道得到一些意见，什么可能是个好主意，什么可能不是等等。

我的第一个想法是：

*   此架构不支持 CDN
*   我们需要一个请求来获取 javascript / html 来启动 WebSocket 等。

我希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T06:24:13.873

有趣的方法，绝对值得思考。让我成为你的恶魔的拥护者：

> 好处 1\. 没有多个请求通过线路避免 DNS 查找等。

这是真的，尽管这只是您第一次访问页面/站点时的问题。通过现代浏览器实现的预取，它也得到了一定程度的缓解。重要的是要记住，浏览器将并行下载多个资源，这可能比批量下载整个有效负载更快，而且肯定响应更快。

使用当今的技术，就 Web 客户端而言，您已经可以使用少量资源来提供完整的页面和应用程序（所有这些都可以压缩！）：

1.  HTML
2.  合并和缩小 CSS 文件作为一种资源
3.  JS也一样
4.  图像精灵

> 好处 2\. 在 localStorage 中缓存这些资产......

浏览器**已经**缓存了这些资产！此外，还有一些经过验证的智能技术可以使这些缓存失效（这是软件开发中的第二大挑战）。

其他需要考虑的事项：

1.  不要小看CDN。在延迟方面，它们是救生员。在第一次请求期间，您的方法对延迟不友好。
2.  AJAX 和渐进增强方法可以优化 Web 应用程序体验，使其感觉就像一个桌面应用程序。
3.  您将需要重新发明或修改 FireBug 等工具，以使用包含所有资源的流。如果没有这些工具，现在无法想象 Web 开发。
4.  如果浏览器本身不支持这种方法，那么您仍然需要花费大量时间进行编程并让浏览器知道您的流包含什么以及如何处理它。当您处理流并触发所有必要的事件（以最佳顺序！）时，您可能不会获得您希望的那么多好处。

祝你好运！

# ios - iOS 报亭推送超过 3G

> ID：11992018
> 
> 赞同：0
> 
> 时间：2012-08-16T16:56:11.720
> 
> 标签：ios, newsstand-kit

报亭推送通知是否也通过 3G 发送？

或者有没有办法让用户在使用蜂窝网络时避免下载大型报亭数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:32:51.027

在报亭推送接收时，设备必须处于 WiFi 状态。后台下载不会发生在 3G 上。我不确定 iOS 是否会在稍后连接到 WiFi 时将此类通知排入队列，但很可能是应用程序对队列负责。

# ios - iOS 错误：在类别中采用协议时，“没有“id”的协议限定符是过时的”

> ID：11992020
> 
> 赞同：0
> 
> 时间：2012-08-16T16:56:27.350
> 
> 标签：ios, protocols, objective-c-category

我试图让一个类别采用一个协议，但我遇到了一个看起来很简单的问题。

接口声明为：

```
@interface UIView (UIViewCategory) <DesiredProtocol> 
```

我假设实现声明应该是相同的：

```
@implementation UIView (UIViewCategory) <DesiredProtocol> 
```

但这在 XCode 中会出现黄色警告，并显示消息：“没有 'id' 的协议限定符是过时的”。

那么声明应该是：

```
@implementation UIView (UIViewCategory) id<DesiredProtocol> 
```

??

我找不到此特定问题的参考。非常感谢所有回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:20:13.347

您不需要 @implementation 块上的协议列表，无论它是否是一个类别。

```
@implementation UIView (UIViewCategory)
...
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:02:38.880

这就是你声明协议的方式

```
@protocol ProtocolName <NSObject>

//protocol methods

@end 
```

后来是财产

```
@interface ProtocolClass: NSObject
{...}
@end 
@property (nonatomic, unsafe_unretained) id <ProtocolName> delegate;
//Synthesize it! 
```

然后你采用它

```
@interface ClassThatAdoptsProtocol: NSObject <ProtocolName>{...} 
```

# directx - 偶尔丢失绘制天空球体的多边形（在远平面）

> ID：11992021
> 
> 赞同：1
> 
> 时间：2012-08-16T16:56:30.310
> 
> 标签：directx, hlsl, visual-glitch

我正在绘制一个天空球体作为 3D 视图的背景。有时，在视图中导航时，会出现一个视觉故障：

![蓝天中间出现黑色或缺失多边形](../Images/3b36156c6775e2b98707830330ca5611.png)

*故障示例：渲染显然没有在屏幕上放置片段的黑色形状*

*   黑色是设备在每帧开始时被清除的颜色。
*   黑色区域的形状每次都不一样，有时可以看到很多多边形。它们总是以一个公共点为中心，通常靠近屏幕中心
*   在不改变导航（眼睛位置和外观）的情况下重新绘制不会使故障消失，即它似乎确实取决于特定的导航
*   导航改变的那一刻，即使是微乎其微的改变，它也会消失，天空会变得坚实。绝大多数的绘画是正确的。最终，当您四处走动时，您会发现另一个故障。
*   改变球体的半径（例如，近/远平面距离的 0.9）似乎并不能消除毛刺
*   更改 Z 缓冲区写入或效果技术中的 Z 测试没有区别
*   没有 DX 调试输出（在运行时的调试版本、最大验证和启用着色器调试的情况下运行时。）

这些故障的原因可能是什么？

我正在使用 Direct3D9（2010 年 6 月 SDK）、编译为 SM3 的着色器，并且在 Windows 7 和 XP 上的 ATI 卡和 VMWare Fusion 虚拟卡上观察到了故障。

## 示例代码

天空被绘制为球体（错误检查等删除了以下代码）：

**去创造**

```
const float fRadius = GetScene().GetFarPlane() - GetScene().GetNearPlane()*2;
D3DXCreateSphere(GetScene().GetDevicePtr(), fRadius, 64, 64, &m_poSphere, 0); 
```

更改半径似乎不会影响故障的存在。

**顶点着色器**

```
OutputVS ColorVS(float3 posL : POSITION0, float4 c : COLOR0) {
   OutputVS outVS = (OutputVS)0;
   // Center around the eye
   posL += g_vecEyePos; 
   // Transform to homogeneous clip space.
   outVS.posH = mul(float4(posL, 1.0f), g_mWorldViewProj).xyzw; // Always on the far plane 
```

**像素着色器**

没关系，即使输出纯色也会出现故障：

```
float4 ColorPS(float altitude : COLOR0) : COLOR {
   return float4(1.0, 0.0, 0.0, 1.0); 
```

![相同的图像，带有纯色像素着色器](../Images/1249722269ac28e77ecd25299d342ff8.png)

*具有纯色像素着色器的相同图像，以确保 PS 不是问题的原因*

**技术**

```
technique BackgroundTech {
    pass P0     {
        // Specify the vertex and pixel shader associated with this pass.
        vertexShader = compile vs_3_0 ColorVS();
        pixelShader  = compile ps_3_0 ColorPS();

        // sky is visible from inside - cull mode is inverted (clockwise)
        CullMode = CW;
    }
} 
```

我尝试添加影响深度的状态设置，例如`ZWriteEnabled = false`. 没有任何区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:22:40.493

这个问题肯定是由远平面剪裁引起的。如果稍微改变球体的半径没有帮助，那么球体的位置可能是错误的......

确保您正确初始化`g_vecEyePos`常量（也许您在 DirectX SetShaderConstant 函数之一中拼错了它？）。

此外，如果您在 的世界矩阵中包含了对眼睛位置的平移，则`g_mWorldViewProj`不应`posL += g_vecEyePos;`在 VS 中执行此操作，因为它会导致顶点移动眼睛位置的两倍。

换句话说，您应该选择以下选项之一：

1.  `g_mWorldViewProj = mCamView * mCamProj;`和`posL += g_vecEyePos;`

2.  `g_mWorldViewProj = MatrixTranslation(g_vecEyePos) * mCamView * mCamProj;`

# c# - C# DataGridView，来自列编辑器的自定义属性未保存

> ID：11992024
> 
> 赞同：3
> 
> 时间：2012-08-16T16:56:31.600
> 
> 标签：c#, properties, datagridview, custom-attributes

我的表单中有一个 datagridview。这个 datagridview 有一些列。有一些自定义列（我创建了自定义 datagridview 单元格）。这些自定义单元格有一些我想在设计时从 datagridview 的列编辑器中看到的属性，以便设置它们。所以在设计时，我打开 datagridview 的列编辑器，并创建自定义 datagridview 单元格的列。然后，我设置了一些自定义属性并关闭了 datagridview 的 olumns 编辑器。当我打开 datagridview 的列编辑器时，我之前为这些自定义属性设置的值不会反映，似乎一旦 datagridview 的列编辑器关闭，它们就没有保存。所以为什么？为什么不保存自定义属性的值？我究竟做错了什么？

此外，我不能将这些自定义属性留空，因为一旦加载表单就会引发异常（对象引用未设置为对象的实例）。

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T17:49:50.413

我遇到了同样的问题。搜索后，我在一个微软网站上发现了一些反馈，说我必须`iCloneable`在我的`datagridviewtextboxcolumn`派生中实现。

您可以在[此处](http://msdn.microsoft.com/en-us/library/aa730881%28v=vs.80%29.aspx)找到文章和相关部分：

> 在极少数情况下，列类型可能希望公开在单元级别没有等效属性的属性。例如 DataGridViewLinkColumn.Text 和 DataGridViewImageColumn.Image。在这些情况下，列类需要重写 Clone 方法以复制该属性。

我的专栏添加了四个额外的属性，这是我的可克隆函数：

```
 //Override this method to set the custom properties.
  public override object Clone()
  {
     var col = base.Clone() as BauerDataGridViewTextBoxColumn;
     col.ShowBorder = this.ShowBorder;
     col.BorderColor = this.BorderColor;
     col.ColumnChooserIsOptional = this.ColumnChooserIsOptional;
     col.ColumnChooserColumnLabel = this.ColumnChooserColumnLabel;
     return col;
  } 
```

# html - 将标签标签包裹在表单项周围还是在 HTML 中使用“for”属性更好？

> ID：11992026
> 
> 赞同：67
> 
> 时间：2012-08-16T16:56:42.273
> 
> 标签：html, label

我知道您可以同时使用这两种方法，但使用其中一种会更好吗？如果是这样，为什么？

**“for”属性示例：**

```
<input type="text" id="male"><label for="male">Male</label> 
```

**包装示例：**

```
<label>Age:<input type="text"></label> 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-16T17:02:03.377

从语义上讲，这两种可能性是相同的。但根据您想要的布局，这两种可能性各有利弊。例如，如果您希望标签位于完全不同的位置，则将输入放入标签中没有任何意义。但是，如果您希望能够通过 css 制作悬停效果，例如为标签和输入周围区域设置背景，最好将输入放入标签中。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-07-08T19:54:28.357

根据 [http://www.w3.org/TR/2008/WD-WCAG20-TECHS-20080430/H44.html](http://www.w3.org/TR/2008/WD-WCAG20-TECHS-20080430/H44.html)

> 一些辅助技术不能正确处理隐式标签

所以当你换行时，你可能还想为标签元素提供“for”属性。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-06-24T09:29:12.563

wrap 允许删除`for`属性，这反过来又允许省略输入元素上的 `id' 属性。非常适合需要在页面上的多个实例中使用的模板或任何表单。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T16:57:55.853

没关系。两者在定义标签和字段之间的关系方面完成了相同的事情。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-10T05:13:19.693

在标签中嵌入输入也会影响包装行为。 `<label><checkbox/>Value with spaces</label>`默认情况下将包装为一个单元。而`<checkbox id="check"/><label for="check">Value with spaces</label>`将用空格换行文本并将标签换行，但保留上面的复选框。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T17:01:49.317

如果它很重要，那么像 ASP.NET 这样的框架会将元素放在//`label`元素旁边并使用's属性。`input``select``textarea``label``for`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-01T20:22:33.560

使用语法时，这种关系会更明确地定义`for`，尽管我相信大多数浏览器对两者都实现了相同的行为。

我认为这是一个偏好问题。就我个人而言，我会使用`for`语法，因为我认为它比`input`元素成为其`label`元素的一部分更具有语义意义。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-01T20:17:03.337

'label for' 语法意味着您创建的标签旨在成为 id 为 'inp' 的输入的标签。如果您在大多数浏览器中单击此标签，则光标焦点将落在“inp”输入元素上。这是将标签与其相应的表单控件链接起来的一种很好的小方法。

我不知道兼容性问题或任何有关性能的问题。对我来说，它在语法上似乎是合理的，据我所知，CSS 规范声称两者都是有效的。

# php - 使用会话 PHP 将登录详细信息传递到另一个页面

> ID：11992027
> 
> 赞同：3
> 
> 时间：2012-08-16T16:56:58.677
> 
> 标签：php, session, login

我需要另一个页面中的登录详细信息来从数据库中检索数据。基本上，我需要显示带有登录用户详细信息的可编辑表单。我尝试`session_register()`将用户名存储在 login.php 页面中。但由于某种原因，我无法`$_SESSION[]`在我的 edit.php 页面中显示用户名。我也在函数之后这样做`session_start()`。

我是php新手，所以不知道我是否误解了会话！还是有其他方法可以传递登录详细信息？

提前致谢

我的代码：

```
**Login.php**
      <?php
       $userName = $_POST['username'];
      $password = $_POST['password'];
      //Connect to the database
      //query the database
        if($rows==1)
       {
      session_start();
       $_SESSION['user']=$userName;
     header("location:edit_user.php");
     }
      else
      {
     echo 'Data Does Not Match <br /> Re-Enter UserName and Password';
     }
     ?>

**In edit.php**
    <?php
    session_start();
    if(!isset($_SESSION['user']))
   {
    header("location:login_form.php");
   }
   else
   {
    echo $_SESSION['user'];
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T13:41:01.977

首先，确保您将`session_start()`其放在使用它的任何脚本的开头。在您调用之前，浏览器不会有任何输出，并且在开始标记`session_start()`之前包含空格或换行符。`<?php`

所以：

```
<?php
session_start();
... 
```

其次，确保在重定向后终止脚本，例如：

```
header("location:edit_user.php");
exit(); 
```

这样可以确保重定向后不会执行任何代码，因此不会取消设置会话或意外更改会话变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:00:48.113

`session_register()`是一个不推荐使用的功能。只是`$_SESSION["bar"] = "foo"`用来存放东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T17:08:38.083

供将来参考，请在提问时发布部分代码。它可以帮助每个人在更具体的情况下给你一个答案。

```
<?php
session_start();

if(!isset($_SESSION['Foo']))
{
    $_SESSION['Foo'] = "Bar";
}
?> 
```

* * *

来源： http: [//php.net/manual/en/features.sessions.php](http://php.net/manual/en/features.sessions.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T17:41:04.057

您可以像这样从数据库中检索数据

```
//start connection
$connect = mysql_connect(DB_SERVER,DB_USER,DB_PASSWORD);
if(!$connect){
    die("Database connection Error".mysql_error());
}

//select database
$db = mysql_select_db(DB_NAME);
if(!$db){
    die("Database selection Error".mysql_error());
}

//get data
$login = mysql_query("SELECT * FROM TABLENAME where user_id={$_SESSION['user_id']}");
$login_data = mysql_fetch_array($login); 
```

现在 $login_data 数组具有用户详细信息，您可以将其指向表单文本字段值..

$_session['user_id']=$login_data['user_id'] 值必须提前分配，该值在整个会话期间保留在 $_SESSION 全局变量中

# linker-errors - 尝试构建应用程序时出现许多链接错误

> ID：11992028
> 
> 赞同：0
> 
> 时间：2012-08-16T16:57:00.923
> 
> 标签：linker-errors, xcode4.4, libtool-xcode

我正在使用 Xcode 4.1 为 iOS 4.3 开发和应用程序，但我想更新我的 Xcode 版本，所以我使用 AppStore 下载，所以我可以拥有 Xcode 4.4。现在，当我构建我的应用程序时，构建失败了，并且出现了这个错误：

> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool: -dynamic 未指定，-all_load 无效 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/ bin/libtool：-dynamic 未指定以下标志无效：-ObjC /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool：无法打开文件：/Applications/Xcode。 app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/usr/lib/libz.1.2.3.dylib（没有这样的文件或目录）命令/Applications/Xcode.app/Contents/ Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool 失败，退出代码为 1 Apple Mach-O Librarian (libtool) 错误命令 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault。xctoolchain/usr/bin/libtool 失败，退出代码为 1

我不明白为什么我有这个错误，如果我的应用程序没问题，有人知道如何解决吗？提前致谢

# css - 嵌套列表的边框样式

> ID：11992029
> 
> 赞同：1
> 
> 时间：2012-08-16T16:57:09.427
> 
> 标签：css

在我的 HTML 文档中，我有一个带有样式的嵌套列表：

```
li {
    list-style-type:none;
    border:1px solid;
    margin:3px;
}

li li {
    list-style:none;

}

<ul>
  <li>something
    <ul>
      <li>hello</li>
      <li>there</li>
    </ul>
  </li>
</ul> 
```

使用我当前的 CSS 规则边框看起来像这样：

![在此处输入图像描述](../Images/cfc42ef4e5403e5b122a3d7767aeda6e.png)

我希望它们看起来像这样，但不插入`<span>`标签：

![在此处输入图像描述](../Images/ce9aaa19d130c33a7e76fceaf18529f9.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:13:25.547

也许是这样的：

```
li {
    clear: both;
    width: 200px;
    list-style-type:none;
    border:1px solid;
    margin:3px;
}
li ul{
    float: left;
}

<ul>
  <li>something
    <ul>
      <li>hello</li>
      <li>there</li>
    </ul>
  </li>
  <li>something
    <ul>
      <li>hello</li>
      <li>there</li>
    </ul>
  </li>
</ul> 
```

结果：

![在此处输入图像描述](../Images/8653073b3c3112c0a50b8f317586b3aa.png)

# git - 如何在svn中获取本地根路径？

> ID：11992034
> 
> 赞同：7
> 
> 时间：2012-08-16T16:57:30.640
> 
> 标签：git, svn, version-control, mercurial, bazaar

Mercuril、Git 和 Bazaar 有一种获取路径根的方法：

```
git rev-parse --show-toplevel
hg root 
bzr root 
```

如何在颠覆中打印本地根路径？

**更新**

例子：

```
> svn checkout https://example.com/svn/foo ~/foo --username fabiocerqueira
> cd ~/foo
> svn root (don't works)
  /home/user/project/foo/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:16:55.997

搜索了一下，一无所获……终于看到老朋友了`svn info`，看看是否适合你……

```
$ svn info | grep 'Root'
Repository Root: http://your.subversion.com/path/to/root 
```

希望这可以帮助！！！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T13:11:32.883

`Working Copy Root Path`from 命令会提供你需要的东西`svn info`吗？

```
D:> svn info
Path: .
Working Copy Root Path: D:\workdir\local-tc-common-all
URL: svn://localhost/trunk/tc-common-all/src/main/bin
Repository Root: svn://localhost
Repository UUID: 4f1d1789-e46b-c140-9c77-f79c92213374
Revision: 61
Node Kind: directory
Schedule: normal
Last Changed Author: dweintraub
Last Changed Rev: 3
Last Changed Date: 2012-07-19 12:09:24 -0400 (Thu, 19 Jul 2012) 
```

这为您提供了当前结帐的根，这似乎是您正在寻找的。您可以使用该`--xml`开关，这有时可以更轻松地以编程方式获取，因为大多数编程语言都非常擅长解析 XML。

如果您正在寻找与 URL 方案分开的存储库本身的**根**，您可以通过将*存储库根*从*URL*字段中取出来获得它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-01T07:13:04.747

我`svn info | awk -F: '/Root Path: (.*)/ { print $2 }' | xargs`通过 Cygwin 在 Linux 和 Windows 上使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T12:50:02.790

如果您安装了 SlikSvn 客户端，您可以在结帐的任何级别执行“svn info”，它将返回本地根路径。

# php - 从另一个时区获取上周日和下周日

> ID：11992035
> 
> 赞同：0
> 
> 时间：2012-08-16T16:57:31.837
> 
> 标签：php, date, timezone

我需要一个脚本，它将从 date 返回下一个星期日和上一个星期六。我知道如何从当前日期返回该值

```
$saturday = date('Y-m-d H:i:s',strtotime( "next saturday" ));

$sunday = date('Y-m-d H:i:s',strtotime("previous sunday")); 
```

但我有用户，他的时区不同，比如“欧洲/苏黎世”（将使用不同的时区）

我需要得到他上周日和下周六的日期。

我写了一个这样的脚本。但我不确定脚本的准确性，因为它是与时区相关的任务。请帮我解决这个问题。

```
 $actual_server_time = new DateTime;
   $actual_server_time->setTimeZone(new DateTimeZone('Europe/Zurich'));    
   $converted_server_date_time = $actual_server_time->format('Y-m-d H:i:s'); 
   $actual_server_time->modify('last Sunday');
   $actual_server_time->format('Y-m-d H:i:s'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:05:49.783

您可以在 strtotime 中添加时区：

```
<?php strtotime("previous sunday GMT+1"); 
```

[演示](http://sandbox.onlinephpfunctions.com/code/04abfb591061aab66815a3c76868b1ef34ef1005)

# openssl - 如何使用 OpenSSL 命令行创建 ECDSA 证书

> ID：11992036
> 
> 赞同：28
> 
> 时间：2012-08-16T16:57:42.190
> 
> 标签：openssl, certificate

我正在用 C++ 构建一个需要接受包含 ECDSA 公钥的证书的服务器应用程序。它必须验证证书，并在验证后使用证书中包含的公钥来验证与证书一起发送的消息。

我使用动态生成的 ECDSA 密钥对完成了所有这些工作 - 即我的代码运行良好 - 但现在我需要做证书。

而且我想我可以使用 OpenSSL 的命令行来创建安装在客户端上的证书（以及单独文件中的 ECDSA 私钥）。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-17T04:09:13.167

如果您尚未选择曲线，则可以使用以下命令列出它们：

```
openssl ecparam -list_curves 
```

我选择`secp256r1`了这个例子。如果您还没有 EC 私钥，请使用它来生成 EC 私钥：

```
openssl ecparam -out ec_key.pem -name secp256r1 -genkey 
```

然后生成证书。您的证书将在`cert.pem`.

```
openssl req -new -key ec_key.pem -x509 -nodes -days 365 -out cert.pem 
```

另请参阅： [req](http://www.openssl.org/docs/apps/req.html)，[ecparam](http://www.openssl.org/docs/apps/ecparam.html)

# apache-flex - TextInput 提示显示不显示正确的嵌入字体

> ID：11992039
> 
> 赞同：0
> 
> 时间：2012-08-16T16:58:03.687
> 
> 标签：apache-flex, flex4, flex-spark

我有一个使用嵌入字体的 TextInput。但是，提示没有显示正确的字体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T17:11:47.257

您必须将 fontStyle 设置为普通或斜体：

```
s|TextInput:normalWithPrompt
{
    fontStyle:normal;
} 
```

# php - 在 PHP 中执行 shell 命令而不等待结果

> ID：11992043
> 
> 赞同：4
> 
> 时间：2012-08-16T16:58:28.357
> 
> 标签：php, shell, exec

执行 shell 命令时出现问题。问题是我想运行一个命令`exec('du -sh /var/www/backups/* > backups.log')`，但我只想按“开始”并稍后阅读 backups.log。现在，当我按下按钮时，我必须等到它完成，所以页面会等到脚本完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T17:02:39.753

尝试通过添加“&”在后台启动该进程，如下所示：

```
exec('du -sh /var/www/backups/* > backups.log &'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:03:46.107

你可以使用 AJAX 来解决这个问题，不是吗？当用户单击开始时，执行您的 PHP 脚本。在此期间，您可以做其他所有事情。

# php - CakePHP 如何从另一个控制器检索数据？

> ID：11992044
> 
> 赞同：2
> 
> 时间：2012-08-16T16:58:30.083
> 
> 标签：php, cakephp

我需要在我的网站主页上显示最新的新闻标题。主页是静态的，基于 Cake 的默认 PagesController。

我有我网站的新闻部分的表格、模型、控制器和视图。

在食谱中我发现

```
Controller::requestAction 
```

方法，但它也说如果我不使用缓存，它可能会导致性能下降。

据我所知，我也可以在 AppController 本身中为我的所有（或部分）控制器创建所需的方法，但是如何将此方法与特定模型链接？

什么是实现我的目标的正确 OOP 方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:07:49.970

我不知道这是否是您的意思，但您可以通过添加访问与特定控制器无关的模型

```
public $uses = array('modelINeed'); 
```

在控制器的定义中。有关更多信息，请查看[cakePHP 中的控制器](http://book.cakephp.org/2.0/en/controllers.html)，`CTRL + F`并查找 "$uses", 。

我不建议将一个控制器加载到另一个控制器中。使用模型从数据库中检索数据！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:11:50.240

如果您需要在控制器之间共享逻辑/数据，最好的办法是使用组件。将您的逻辑放入您的组件中，然后从您的每个控制器中简单地调用组件的方法。

* * *

**编辑**

要从您的组件访问您的模型，您可以简单地将其模型传递给您的组件的方法。例子：

*零件*

```
public function fetchMyData($model) {
    return $model->find('all');
} 
```

*控制器*

```
$mydata = $this->ComponentName->fetchMyData($this->ModelName); 
```

# java - 如何让 log4j 只记录我的公司类

> ID：11992046
> 
> 赞同：2
> 
> 时间：2012-08-16T16:58:31.877
> 
> 标签：java, spring, log4j

下面是我们在我公司使用的 log4j.xml 文件的代码。我们一直在尝试将其更改为仅记录 org.xxxx 中带有 make 的类的输出。有人可以让我知道这是否可以做到以及如何做到这一点

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">
    <appender name="console" class="org.apache.log4j.ConsoleAppender">
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d [%t] %-5p %c - %m%n" />
        </layout>
    </appender>

    <appender name="logfile" class="org.apache.log4j.FileAppender">
        <param name="File" value="logs/disater_relief.log" />
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d [%t] %-5p %c - %m%n" />
        </layout>
    </appender>

    <appender name="rollinglogfile" class="org.apache.log4j.RollingFileAppender">
        <param name="file" value="logs/ennrollment.log" />
        <param name="immediateFlush" value="true" />
        <param name="append" value="true" />
        <param name="maxFileSize" value="1MB" />
        <param name="maxBackupIndex" value="3" />

        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d [%t] %-5p %c - %m%n" />
        </layout>

    </appender>

    <appender name="dailyrollinglogfile" class="org.apache.log4j.DailyRollingFileAppender">
        <param name="file" value="logs/ennrollment.log" />
        <param name="immediateFlush" value="true" />
        <param name="append" value="true" />
        <param name="datePattern" value=" '.' yyyy-MM-dd "/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d [%t] %-5p %c - %m%n" />
        </layout>

    </appender>

    <root>
        <priority value="debug" />
        <appender-ref ref="console" />
        <appender-ref ref="dailyrollinglogfile" />
    </root>

</log4j:configuration> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T17:09:37.330

您的 root logger 定义了所有组件的调试日志记录。您应该将其更改为`warn`（因此您仍然会看到警告）并为您自己的组件添加一个额外的记录器：

```
<logger name="com.xxx.mycomponent">
  <level value="trace"/>

  <!-- appenders ... -->

</logger>

<root>
    <priority value="warn" />
    <appender-ref ref="console" />
    <appender-ref ref="dailyrollinglogfile" />
</root> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:05:49.157

只需关闭您不想在日志中看到的包的日志记录...

```
<!-- Limit JBoss categories -->
<category name="org.jboss">
   <priority value="OFF"/>
</category> 
```

# azure - 挂载 Azure CloudDrive 的新快照时保留缓存

> ID：11992052
> 
> 赞同：0
> 
> 时间：2012-08-16T16:58:57.373
> 
> 标签：azure

Azure CloudDrive 的本地缓存非常适合提高性能。

我每 20 分钟重新创建一个新快照，每个快照几乎没有变化，或者根本没有变化。

要使用新快照，我所做的是：

```
cloudDrive.Unmount();
cloudDrive = storageAccount.CreateCloudDrive(newSnapshotUri);
cloudDrive.Mount(size, option); 
```

我想知道，旧缓存是否仍用于新的挂载快照？还是必须再次重建整个缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:50:25.680

这纯粹是有根据的猜测，但我假设缓存已重建。我的理由是，当您挂载新快照时，您无法知道哪些数据是相同的，哪些是不同的，因此无法弄清楚缓存中的哪些数据无效。

# excel - 查找数据透视表行字段的子集

> ID：11992058
> 
> 赞同：0
> 
> 时间：2012-08-16T16:59:57.493
> 
> 标签：excel, vba, pivot-table

我正在尝试使用 VBA 从数据透视表中提取和操作数据。我的数据透视表有三个行标签（D_Campaign、D_TL、D_Agent_Name）。

使用

```
For Each pt1 In pt.RowFields("D_Agent_Name").PivotItems
    Debug.Print pt1.Name
Next pt1 
```

我可以获得“D_Agent_Name”中所有标签的列表。但是，我想要的是“D_Agent_Name”中给定值“D_TL”的标签列表。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:52:37.577

我认为@gimp 可能是正确的，因为它更容易处理源数据，但这里有一些对我有用的东西：

```
Sub PrintTLValues(AgentName As String)
Dim pt As Excel.PivotTable
Dim rfTL As Excel.PivotField
Dim rfAN As Excel.PivotField
Dim cell As Excel.Range

Set pt = ThisWorkbook.Worksheets(1).PivotTables(1)
Set rfAN = pt.RowFields("D_Agent_Name")
Set rfTL = pt.RowFields("D_TL")
For Each cell In Intersect(pt.DataBodyRange.EntireRow, rfAN.DataRange)
    If cell.Value = AgentName Then
        Debug.Print Intersect(cell.EntireRow, rfTL.DataRange).Value
    End If
Next cell
End Sub 
```

像这样称呼它：

```
GetTLValues "Michael" 
```

我喜欢对数据透视表进行编程，我的经验是通常有不止一种方法可以给数据透视表猫换皮 :)。[可以](http://peltiertech.com/WordPress/referencing-pivot-table-ranges-in-vba/)在 Jon Peltier 的网站上找到对数据透视表范围进行编程的非常有用的参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:55:18.287

在道格指出我正确的方向后，最终到达了那里。

```
Sub ptSelect()
    ' Select intersect of pivot table and output cell values to debug window
    Dim pt As PivotTable
    Dim ptSel As Range

    Set pt = Worksheets("Pivot Table").PivotTables("PT Sales Data")
    Set ptSel = Intersect(pt.PivotFields("D_Campaign").PivotItems("Acquisition").DataRange.EntireRow, pt.PivotFields("D_TL").DataRange)

    For Each Cell In ptSel
        Debug.Print Cell.Value
    Next Cell
End Sub 
```

我注意到的一件事是，这要求数据透视表采用经典格式，它不适用于 2007 年的紧凑格式。

# facebook-graph-api - 使用应用访问令牌发布分数

> ID：11992061
> 
> 赞同：1
> 
> 时间：2012-08-16T17:00:05.840
> 
> 标签：facebook-graph-api, access-token, facebook-access-token

我正在尝试从我的服务器发布分数。

*   我将我的应用程序设置为游戏。
*   我有我的应用访问令牌。
*   我正在发布到[https://graph.facebook.com/USER_ID/scores](https://graph.facebook.com/USER_ID/scores)
*   我已授权并授予我的应用程序的 USER_ID（即我）的 publish_stream 和 publish_actions 权限。

但是，一个错误告诉我我需要一个用户访问令牌来执行该操作，正如 Facebook 在这里所说的那样：[https ://developers.facebook.com/docs/score/](https://developers.facebook.com/docs/score/)

> 为用户创建或更新分数
> 
> 只要您拥有 publish_actions 权限，您就可以使用应用程序 access_token 向 /USER_ID/scores 发出 HTTP POST 请求来发布分数或用户。

我看到了一个类似的问题，但没有得到解答：[Facebook Graph API Explorer won't POST scores](https://stackoverflow.com/questions/7536912/facebook-graph-api-explorer-wont-post-scores)（他们最终创建了一个新应用程序，这不是一个真正的解决方案）

为了验证不是我错误地使用了 API，我去了 Graph API explorer 并在那里使用相同的访问令牌进行了尝试，但运气不好：

![尝试使用 Graph API](../Images/8747efd02c33f8691ef266dd51663848.png)

有趣的是，如果我按照它所说的并尝试使用我的用户访问令牌，它会说：`This method must be called with an app access_token.`

是我遗漏了什么还是 Graph API 有错误？

谢谢，坎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:15:38.217

看起来您的一切都是正确的，但是有一个相对鲜为人知的案例会产生该错误消息。

检查高级设置中的“应用程序类型”字段： ![应用设置界面截图](../Images/5426d54e9cf89c896bcc62d4835a36b3.png)

如果在高级设置中将其设置为“Native/Desktop”而不是“Web”，则假定您的应用程序的二进制/本机分发包含应用程序机密。在此配置中，使用应用访问令牌进行的 API 调用是不受信任的，实际上该令牌被完全忽略。

将应用设置更改回“Web”，您应该能够使用[应用访问令牌发布或删除](https://developers.facebook.com/docs/authentication/applications/)[分数](https://developers.facebook.com/docs/score/)和/或 [成就](https://developers.facebook.com/docs/achievements/)

如果这是问题所在，您可以通过调用 `https://graph.facebook.com/app?fields=migrations&access_token=[APP ACCESS TOKEN HERE]`

在“Web”模式下，响应包含应用程序的迁移设置，例如：

```
{
  "migrations": {
    "secure_stream_urls": false, 
    "expiring_offline_access_tokens": false, 
    "requires_login_secret": false, 
    //etc
} 
```

在“Native/Desktop”模式下，应用访问令牌不受信任，因此您无法访问应用的私有数据，响应为：

```
{
  "error": {
    "message": "An unknown error has occurred.", 
    "type": "OAuthException", 
    "code": 1
  }
} 
```

# plugins - 更新后firebreath插件刷新

> ID：11992066
> 
> 赞同：0
> 
> 时间：2012-08-16T17:00:11.783
> 
> 标签：plugins, updates, firebreath

我想在更新后重新加载插件而不重新启动浏览器。我尝试了mac版本，它工作正常，但是，我需要更改每个版本的插件名称。

```
navigator.plugins.refresh(false); 
```

[http://www.firebreath.org/display/documentation/Deploying+and+updating+your+plugin?focusedCommentId=8585308#comment-8585308](http://www.firebreath.org/display/documentation/Deploying+and+updating+your+plugin?focusedCommentId=8585308#comment-8585308)

在 Windows 中，我尝试了这些步骤，但无法使其正常工作。有没有人有这方面的运气？有谁知道可能出了什么问题？

“在 Windows 上，您甚至需要将其安装到具有特定于版本的文件名的特定于版本的目录中。安装插件后，您可以尝试以下方法在打开的浏览器中重新加载插件

```
<script>
    var myplugin = "<object id=\"plugin\" type=\"application/x-foobar\"> </object>";
    function onload(){ // Assuming this function put your plugin on the page in the first place
        document.getElementById('pluginHere').innerHTML = myplugin;
    }
    function reload(){
        document.getElementById('pluginHere').innerHTML = "";
        document.getElementById('pluginHere').innerHTML = myplugin;
    }
</script> 
```

多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T03:27:31.713

这是一个困难的技巧，可能会以很多不同的方式出错。我很难猜出具体可能出了什么问题，特别是因为你说“在 Windows 上”，但你没有指定那是什么浏览器。所有浏览器的工作方式都以微妙的方式不同，而 IE 和其他浏览器则*完全*不同。

你可以尝试的事情：

*   使用 setTimeout 在从 DOM 中删除插件和重新添加插件之间添加一个小的延迟
*   打开 about:plugins 然后 shift-refresh 看它是否选择了新版本
*   尝试不同的浏览器，看看行为是什么
*   使用[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)监控注册表的查询并查看注册表项何时被访问；使用它来帮助计划您的策略。

无论如何，我希望其中一些有所帮助；我曾经以这种方式升级，但它太容易出错并且太容易随着新浏览器的变化而发生变化，所以这些天我只是让客户端在升级时重新启动他们的浏览器。它节省了很多麻烦和*大量*的开发时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T09:29:18.543

我使用带有 MSI 的签名 CAB 在 Internet Explorer 上加载插件。在第一次安装时，我发现可以从 Javascript 访问该插件，但事件不起作用。当我查看加载的插件时，插件没有加载。如果我刷新页面，插件就会加载。我的解决方案是从这个堆栈溢出问题中添加以下代码 [One time page refresh after first page load](https://stackoverflow.com/a/6985618/1633088) 这就像一个魅力。

# javascript - javascript 测试 .length 和 .length > 0

> ID：11992073
> 
> 赞同：5
> 
> 时间：2012-08-16T17:00:47.757
> 
> 标签：javascript

我在对象的属性中有一些文本。我正在测试对象的属性中是否有要显示的文本；如果没有，那么我会显示“-”而不是空白。似乎没有区别：

```
if (MyObject.SomeText && MyObject.SomeText.length) { ... }

if (MyObject.SomeText && MyObject.SomeText.length > 0) { ... } 
```

是否存在一种语法比另一种更可取的极端情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T17:04:52.627

他们给出相同的结果。顺便说一句，如果它的“文本”，那就`if (MyObject.SomeText)`足够了

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T17:03:40.140

> 是否存在一种语法比另一种更可取的极端情况？

只有在边缘情况下`MyObject.SomeText`或`MyObject.SomeText.length`不是你所期望的——例如：

```
MyObject = {
    SomeText = {
        length: -42
        // or length: true
    }
}; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-16T17:04:09.163

不，它们是等价的，如果长度等于 0，则其值为`false`。

（这是可能的，因为 JS 不是强类型的，在强类型语言中长度不能转换为布尔值）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T17:04:55.740

在 javascript 中，一个数字只有在为 0 时才被认为是“假的”。任何其他值都是“真”。因此，陈述`number != 0`（比较，而不是同一性）`!number`完全等价。

您的两个陈述不同的唯一方法是如果`length`不是正数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-16T17:08:43.867

一样的：

```
Boolean(MyObject.SomeText.length) 
```

*   `true`如果`MyObject.SomeText.length`!= 0则返回
*   `false`如果`MyObject.SomeText.length`== 0则返回

和

```
Boolean(MyObject.SomeText.length>0) 
```

*   `true`如果`MyObject.SomeText.length`> 0则返回
*   `false`如果`MyObject.SomeText.length`<= 0则返回

但`MyObject.SomeText.length`只能是`0`或正整数。所以

*   如果`MyObject.SomeText.length`== 0，
    *   `Boolean(MyObject.SomeText.length)`返回**`false`**因为`MyObject.SomeText.length`== 0
    *   `Boolean(MyObject.SomeText.length>0)`**`false`**因为`MyObject.SomeText.length`<=0而返回
*   如果`MyObject.SomeText.length`> 0，
    *   `Boolean(MyObject.SomeText.length)`返回**`true`**因为`MyObject.SomeText.length`!= 0
    *   `Boolean(MyObject.SomeText.length>0)`返回**`true`**因为`MyObject.SomeText.length`> 0

# php - 使用 php 通过 ajax 保存 json 数据

> ID：11992079
> 
> 赞同：0
> 
> 时间：2012-08-16T17:01:28.303
> 
> 标签：php, jquery, json

我有一个 json 文件，并将数据显示为带有输入字段的列表，所有内容都可以编辑，如果单击保存，我想用新数据覆盖 json 文件

有以下标记

```
 <ul id="sortable">
      <li>
         <input class="jahr" type="number" value="2010" placeholder="Jahr">
         <input class="titel" type="text" value="testtitel" placeholder="Titel">
         <input class="delete" type="button" value="löschen">
     </li>
      <li>
         <input class="jahr" type="number" value="2012" placeholder="Jahr">
         <input class="titel" type="text" value="testtitel2" placeholder="Titel">
         <input class="delete" type="button" value="löschen">
     </li>
   </ul> 
```

现在我想将数据保存在 json 文件中，所以我有以下 jquery 代码

```
var erfolge = [];

$('#sortable').children().each( function(){
    erfolge.push({titel : $(this).find('.titel').val(), jahr: $(this).find('.jahr').val()});                
});

$.ajax({
   type: "POST",
    url: "erfolge_speichern.php",
    dataType: 'json',
    data: { json: erfolge }
}); 
```

和 php 文件如下所示：

```
<?
$json = $_POST['json'];

$file = fopen('../json/erfolge.json','w+');
fwrite($file, json_decode($json));
fclose($file);
?> 
```

当我用萤火虫查看帖子数据时，它看起来像这样

```
json[0][jahr]   2010
json[0][titel]  testtitel
json[2][jahr]   2012
json[2][titel]  testtiel2 
```

然后json文件为空

提前致谢！

# c# - 有没有办法在 Silverlight 中编译实体框架数据注释？

> ID：11992082
> 
> 赞同：0
> 
> 时间：2012-08-16T17:01:31.373
> 
> 标签：c#, silverlight, entity-framework, entity-framework-4

我正在使用 MVC WebAPI 为 silverlight 应用程序提供动力。POCO 对象在 MVC 和 Silverlight 之间共享。所有的 POCO 都在一个 .Net 类库中，我创建了一个 Silverlight 类库，所有的 POCO 都添加为链接，以便我可以共享代码。不幸的是，这会导致数据注释出现问题，因为 Silverlight 类库无法引用 EntityFramework.dll，因此无法编译 [ForeignKey] 等属性。

我最终像这样包装了我的所有注释：

```
#if !SILVERLIGHT
        [ForeignKey("SecurityGroupID")]
#endif
        public virtual SecurityGroup SecurityGroup { get; set; } 
```

有没有人想办法不让#if !SILVERLIGHT 包装他们的所有注释？（[列]、[表]、[外键]等？）。

我考虑过的一种可能的解决方案是在子命名空间 (MyProject.FakeAttributes) 中创建具有匹配构造函数的空白属性，并在 Silverlight 版本中导入该命名空间。有没有人看到该解决方案有任何问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:06:26.553

我不得不建议不要在 Silverlight 中使用您的实体。由于对象图中的延迟加载和循环等问题，实体通常不能很好地与 WCF 配合使用。帮自己一个忙，做 dtos。

如果你不打算使用 dtos。`#ifs`在我制作假属性之前，我会选择。

# sql - 为 Access 或 SQL 中的每条记录创建一个随机的 4 位数字？

> ID：11992083
> 
> 赞同：2
> 
> 时间：2012-08-16T17:01:35.230
> 
> 标签：sql, ms-access, random

我在 Access 中工作，我需要为分成记录的用户列表创建一个随机的 4 位数字。我的查询不断为每条记录返回相同的随机数。

```
SELECT 1000 + (1999-1000)*RND() as [PassCodes], 
    stafflistEMAIL.Name, stafflistEMAIL.Description 
FROM stafflistEMAIL; 
```

我怎样才能使这项工作，我查看过的其他回答没有提供解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:29:06.077

正如一个想法，以下将给出4个随机字符：

```
Mid(CreateObject("Scripting.FileSystemObject").GetTempName,4,4) 
```

例如：

```
906F
0818
25A5
F200
918F
A166 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:03:36.913

[在 VBA 中重复随机变量](https://stackoverflow.com/q/2884972/122139)

在调用 之前`Rnd`，使用`Randomize`不带参数的语句来使用基于系统计时器的种子来初始化随机数生成器。

在很大程度上取决于您的目标，您可以做一些有趣的事情，如下所示：

```
Right(Cstr(CInt(Len(stafflistEMAIL.Name)*Len(stafflistEMAIL.Description)/1000)),4) 
```

# java - 将 Java 对象标记为最终有效的最终对象有什么好处吗？

> ID：11992086
> 
> 赞同：2
> 
> 时间：2012-08-16T17:01:40.673
> 
> 标签：java, immutability

我有一个不可变对象，它的字段或类没有标记为 final。我可以这样做，但是这样做真的有什么好处吗？我可以看到它为编译器节省了一点时间来解决问题，但我看不出它是“值得的”（除此之外，它会让未来的开发人员重新考虑对对象做一些事情以使其可变） .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:05:15.817

除了您提出的观点（未来的开发人员修改字段是非常明智的，另一个是有人可以子类化您的类并使其可变），明确地将字段标记为 final 为您提供了多线程环境中的可见性保证。

参加这个课程 - 它实际上是不可变的：

```
public class SomeClass {
    private int i;
    public SomeClass(int i) { this.i = i; }
    public int getI() { return this.i; }
} 
```

在多线程环境中，有可能一个线程 T1 创建了 a `SomeClass sc = new SomeClass(1);`，而另一个线程 T2 读取`sc.getI()`并看到了 0。

如果设置`i`为最终状态，则不会再发生这种情况（假设您在构建过程中不让`this`逃跑，如下面的引文中所述）。

参考：[JLS #17.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.5) - 强调我的

> final 字段还允许程序员在不同步的情况下实现线程安全的不可变对象。[...]
> final 字段的使用模型很简单：在对象的构造函数中设置对象的 final 字段；并且不要在对象的构造函数完成之前在另一个线程可以看到它的地方写入对正在构造的对象的引用。如果遵循这一点，那么当另一个线程看到该对象时，**该线程将始终看到该对象的最终字段的正确构造版本**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:04:27.990

它用于显示您的意图，而不是让某人错误地使其可变。
另外将方法标记为最终方法*可能会*成为内联方法，从而获得性能优势。
还将类的引用对象标记为`final`强制构造函数是原子的。最后将类标记为`final`停止继承。这是你需要的吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T17:25:04.850

制作字段`final`更多的是显示代码的*意图*。

除非您创建 getter 方法`final`，否则您的类不是不可变的。考虑：

```
public class MyClass {

   private final int num;

   public int getNum() {
       return num;
   }
}

public class MySubClass extends MyClass {
   private int num;

   public int getNum() {
       return num;
   }

   public void setNum(int i) {
       num = i;
   }
} 
```

子类完全覆盖了该字段，使其可变。您所要做的就是强制转换 to 的实例`MyClass`以`MySubClass`访问设置器。即使没有 setter，子类也可以`num`在另一个方法中更改其字段。

假设该字段是私有的，则该字段是否无关紧要`final`：您需要创建 class`final`或创建 getter `final`。

还要注意，即使有你喜欢的所有代码保护，使用反射其他类仍然可以穿透所有内容并改变你的字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T17:06:16.073

首先，`final`字段与类非常不同`final`。最终字段无法更改。类上的`final`修饰符意味着不允许其他类从该类继承，但对字段完全没有影响。

话虽如此，将字段标记为 final 确实允许编译器进行一些优化。这些影响有多大取决于很多。如果您的程序中没有性能问题，那么它可能不值得。

但是在设计方面，如果它们打算成为最终的，则将它们标记为最终是有用的，因此使用您的类的任何人都不会无意中破坏某些东西。因此，总的来说，如果您有一些设计后不想更改的内容，请将其定为最终版本。

# php - 此代码对于在 PHP 中打印数组是否正确？因为它不起作用

> ID：11992096
> 
> 赞同：0
> 
> 时间：2012-08-16T17:02:12.630
> 
> 标签：php, arrays, foreach, drupal-7

我想在 Drupal 7 中打印 $tabs 数组。所以，我尝试在我的 node.tpl.php 中添加此代码：

```
 <?php
  echo '<div class="btn-group">';
  foreach($tabs as $tab=>$link) {
    echo '<button class="btn"><a href="$link">$tab</a></button>';
  };
  echo '</div>';
  ?> 
```

但是，它没有打印任何东西......所以我确信这有点错误。也许是因为这应该在里面`page.tpl.php`？是否有我没有发现的语法问题？

谢谢你的帮助！！

罗莎蒙达

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:05:48.160

我看到的一个问题是您试图打印包含在单引号内的变量。PHP 不会在单引号内插入变量，但会在双引号内。尝试将您的回声更改为：

```
echo '<button class="btn"><a href="' . $link .'">' . 
    $tab . '</a></button>'; 
```

从手册：

> 注意：与双引号和heredoc 语法不同，特殊字符的变量和转义序列在出现在单引号字符串中时不会被扩展。

有关详细信息，请参阅[字符串的手动条目](http://php.net/manual/en/language.types.string.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:06:46.457

引用这样的变量只适用于双引号，而不是单引号，所以它必须是

```
 echo '<button class="btn"><a href="'.$link.'">'.$tab.'</a></button>'; 
```

或者

```
echo "<button class=\"btn\"><a href=\"$link\">$tab</a></button>"; 
```

不过，这可能不会修复您的代码。

# javascript - 使用 jQuery 解析 JSON 数据

> ID：11992098
> 
> 赞同：3
> 
> 时间：2012-08-16T17:02:21.047
> 
> 标签：javascript, json, jquery

我想解析一些 JSON 数据，但不确定我做错了什么。

我正在使用的代码如下：

```
$.getJSON('bd/getuserDetails',userID,function(data) {
    $.each(data.UserDTO,function(index, value){
         alert(value);
    });
}); 
```

在我的 Java 操作类中，我填充`UserDTO`了姓名、年龄等相关详细信息。

上面的代码能够解析我的对象，但我的意图是根据名称访问值，例如`alert(value.name); //user name`. 目前它正在解析和显示值，但我无法确定给定值的名称。

如何使用相应值的名称访问集合？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T17:03:52.670

```
$.getJSON('bd/getuserDetails',userID,function(data) {
    $.each(data.UserDTO,function(key, value){
         alert(key + ' : ' + value);
    });
}); 
```

假设你`data.UserDTO`是这样的：

```
data.UserDTO = {'name' : 'one', 'title' : 'Mr', ..}; 
```

然后在上面的循环中：

```
key => name, title...

value => one, Mr... 
```

### 但

如果你的

```
data.UserDTO = [ {'name' : 'one', 'title' : 'Mr', ..}, 
                 {'name' : 'two', 'title' : 'Mrs', ..} 
               ]; 
```

然后上面的循环：

```
key => 0,1... (index of each object within that array)

value => {'name' : 'one', 'title' : 'Mr', ..}, {'name' : 'two', 'title' : 'Mrs', ..} ... 
```

# c - 将字符排除在C中的整数输入之外

> ID：11992102
> 
> 赞同：0
> 
> 时间：2012-08-16T17:02:32.873
> 
> 标签：c

我有一个 C 程序，它提示输入一个 13 位整数（long long）。但是用户可能不小心输入了一些字符。如何通过忽略输入中的所有字符来避免崩溃或循环？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T17:04:35.117

1.  输入一个字符串
2.  检查字符串中的所有字符都是数字
    *   如果输入无效：抱怨并退出，或重新提示和`goto 1`，或任何对您的应用有意义的内容
3.  将您的（已验证）字符串转换为整数值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:12:25.880

在c中我会这样做：

```
#include <stdio.h>
#include <string.h>
#include <ctype.h>

int main()
{
    char str[1000];
    int i;
    int newLength = 0;
    long long l;

    scanf( "%s", str );

    for ( i = 0; str[i] != '\0'; ++i )
    {
        if ( isdigit( str[i] ) )
            str[newLength++] = str[i];
    }
    str[newLength] = '\0';
    sscanf( str, "%d", &l );

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T17:05:55.807

您可以使用[scanf](http://www.cplusplus.com/reference/clibrary/cstdio/scanf/)：

> 成功时，该函数返回成功读取的项目数。如果发生匹配失败，此计数可以匹配预期的读数数量或更少，甚至为零。

# glsl - GL_UNSIGNED_BYTE

> ID：11992107
> 
> 赞同：0
> 
> 时间：2012-08-16T17:02:41.360
> 
> 标签：glsl

我在 GL_UNSIGNED_BYTE r,g,b 中有颜色，但我想使用 alpha 通道来放置一个自定义值，该值将在像素着色器中使用，以不同地为几何图形着色。现在有两个可能的值 0 和 127 我的问题是当我在顶点着色器中执行此操作时：

[顶点]

```
varying float factor;

factor = gl_Color.w 
```

似乎该因子始终为 1.0，因为如果我这样做：

[分段]

```
varying float factor;

factor = factor;

gl_FragColor = vec4(factor, 0.0, 0.0, 1.0) 
```

输出总是红色的，为什么我会期望两种不同的颜色，一种是因子为零时，另一种是因子为 127 时。

因此，如果我分配两个值 0 和 127，我应该进入顶点着色器 0/0.5 吗？这个对吗？

[编辑] 好的，我现在看到两个不同的值，但我不知道为什么我得到它们，GPU 在 gl_Colow.w 组件中执行的任何操作我不知道？

[Edit2] 正如 Nicholas 指出的那样，我正在使用 glColorPointer(4...);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:58:31.223

由于您正在使用`gl_Color`输入，并且您引用了`GL_UNSIGNED_BYTE`，我推测您正在使用`glColorPointer`来指定这些颜色值。因此，在您的代码中，您调用的内容是：

```
glColorPointer(4, GL_UNSIGNED_BYTE, ...); 
```

（顺便说一句，将来最好是您实际提供此信息，而不是强迫我们推断它）

那么，第一个问题：您实际上是否使用`4`了颜色分量的数量？你应该是，但你不会说一种或另一种。

既然这已经得到纠正，让我们来看看真正的问题（或者至少它*是*问题的原始形式）：

```
factor = factor/127.0;(to normalize) 
```

OpenGL*已经*为您标准化了。如果将*任何*整数类型与 一起使用`glColorPointer`，则输入的值`gl_Color`将被规范化，类型为 [0, 1] `UNSIGNED`，非无符号类型为 [-1, 1]。

# android - Android：将 contentdescription 设置为什么以便回话不说什么

> ID：11992109
> 
> 赞同：0
> 
> 时间：2012-08-16T17:02:57.287
> 
> 标签：android, accessibility

我有一些视觉障碍用户根本无法使用的图像。我想在我的代码中保持一致，所以我有内容描述。是否有一个特定的字符串可以实现，所以当用户触摸图像时，T​​alkback 不会说任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:10:52.713

编辑：以前的答案是不要在 XML 中添加标签。正确答案是添加值“@null”。这可以防止说出字符串（与添加属性相同），但@null 也会防止 LINT 工具因缺少属性而对您大喊大叫。

# django - Django - AJAX-SELECT 403 禁止

> ID：11992111
> 
> 赞同：3
> 
> 时间：2012-08-16T17:03:06.373
> 
> 标签：django, lookup, django-ajax-selects

我使用 django-ajax-select 为模型区域上的字段创建了一个查找通道，以便在我的 ModelForm 上使用以在我创建或编辑 UserProfile 时选择字段。

```
class FormRegisterProfile(forms.ModelForm):

class Meta: 
    model = UserProfile
    exclude = ('user')

interests  = make_ajax_field(UserProfile,'interests','areas2',help_text=True)
expertise  = make_ajax_field(UserProfile,'expertise','areas2',help_text=True) 
```

会发生什么，当我使用没有管理员权限的用户登录时，我在服务器上得到了这条线

```
[16/Aug/2012 14:56:12] "GET /profile/ajax_lookup/areas2?term=g HTTP/1.1" 403 22 
```

我的 url.py

```
(r'^admin/lookups/', include(ajax_select_urls)),
(r'^profile/', include(ajax_select_urls)),
url(r'^profile/edit/$', 'mycu.views.EditUserProfile', {}, 'register.html'),
url(r'^admin/', include(admin.site.urls)), 
```

我的查找频道：

```
AJAX_LOOKUP_CHANNELS = {
'areas'  : {'model':'mycu.areas', 'search_field':'type'},
'areas2' : ('mycu.lookups', 'AreasLookup'), 
```

我的lookups.py

```
class AreasLookup(LookupChannel):

    model = Areas

    def get_query(self,q,request):
        return Areas.objects.filter(Q(type__icontains=q)).order_by('type')

    def get_result(self,obj):
        u""" result is the simple text that is the completion of what the person typed """
        return obj.type

    def format_match(self,obj):
        """ (HTML) formatted item for display in the dropdown """
        return self.format_item_display(obj)

    def format_item_display(self,obj):
        """ (HTML) formatted item for displaying item in the selected deck area """
        return u"%s" % (escape(obj.type)) 
```

没有 ModelForm 上的“make_ajax_fields”行，我可以轻松访问模型区域。

我不知道的是：

管理员/查找之间的关系是什么

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T17:25:51.463

django-ajax-selects 的默认权限要求用户是人员 ( `user.is_staff`) 。请参阅`LookupChannel` [https://github.com/crucialfelix/django-ajax-selects#check_authselfrequest中有关更改此默认值的 README 说明](https://github.com/crucialfelix/django-ajax-selects#check_authselfrequest)

> check_auth（自我，请求）：
> 
> 确保没有人可以通过 json 获取您的数据，只需知道 URL。默认将其限制为 request.user.is_staff 并引发 PermissionDenied 异常。默认情况下，这是 401 响应的错误，但您的中间件可能会拦截并选择执行其他操作。
> 
> 面向公众的表单应编写自定义 LookupChannel 以根据需要实施。您也可以选择返回 HttpResponseForbidden("who are you?") 而不是提高 PermissionDenied

这错误地表明它将返回 401 状态代码，而实际上 Django 会`PermissionDenied`像您所看到的那样使用 403 响应来处理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T18:21:09.623

@Mark Lavin 如何说：

只是覆盖自定义 LookupChanel 上的函数 check_auth ，如下所示：

```
class AreasLookup(LookupChannel):

    model = Areas

    def check_auth(self, request):
        if request.user.get_profile() :
            return True

    def get_query(self,q,request):
        return Areas.objects.filter(Q(type__icontains=q)).order_by('type')

    def get_result(self,obj):
        u""" result is the simple text that is the completion of what the person typed """
        return obj.type

    def format_match(self,obj):
        """ (HTML) formatted item for display in the dropdown """
        return self.format_item_display(obj)

    def format_item_display(self,obj):
        """ (HTML) formatted item for displaying item in the selected deck area """
        return u"%s" % (escape(obj.type)) 
```

# ios - 在 Grand Central 中跟踪线程的技术？

> ID：11992119
> 
> 赞同：0
> 
> 时间：2012-08-16T17:03:41.077
> 
> 标签：ios, multithreading, performance, grand-central-dispatch, nsoperationqueue

`dispatch_async()`我怀疑我的应用程序正在使用调用创建大量线程。我见过超过 50 和 80 个线程的崩溃报告。这是一个大型代码库，我没有编写，也没有完全剖析。我想做的是获取我们线程使用情况的概况；我们正在创建多少个线程，何时创建它们等。

我的目标是弄清楚我们把所有的时间都花在了交换线程上，如果使用 NSOperationQueue 会更好，所以我们有更多的控制权，而不是随便用 dispatch_async'ing 块。

欢迎任何对此进行调查的想法/技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:15:56.877

看起来你需要看看仪器。从 Apple 文档或 WWDC 会议或任何您想要的地方了解它。有很多资源

如果您需要实现一些依赖项，通常 NSOperationQueues 肯定会更好。

* * *

正如 Brad Llarson 指出的那样，有一些 WWDC 会议在许多情况下都有帮助。然而，除了优化你的调用之外，你还应该考虑让你的代码更易于阅读并且更好。我从未在 iOS 上见过包含多达 80 个队列的源代码。app的架构一定有问题。

如果我错了，请告诉我任何人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T23:28:10.903

如果您正在旋转那么多线程，那么您很可能会受到 I/O 限制。此外，Mike 的文章很棒，但它已经很老了（尽管仍然与常规队列相关）。

而不是 using `dispatch_async`，您应该使用`dispatch_io`和朋友来满足您的 I/O 要求。他们为您处理所有异步监视和回调......并且不会用无关的处理线程超出您的进程。

# java - AJAX 客户端超时即时通知

> ID：11992122
> 
> 赞同：1
> 
> 时间：2012-08-16T17:03:50.610
> 
> 标签：java, ajax, apache, jquery, timeout

我从 HTML 页面发出 AJAX 调用请求。我在 HTML 页面中设置并启动了一个计时器，以显示从服务器接收响应所需的时间。

对于一项测试，我看到如果 Apache 请求超时（因为服务器需要很长时间来响应），AJAX 调用不会终止。但是，我相信当后端脚本在 Apache 超时后尝试作为响应发布时，我的浏览器会显示 AJAX 错误。

是否有一种通用方式，一旦 Apache 超时，AJAX 调用可以立即收到此类事件的通知 - 以便它可以中止请求并在浏览器中向用户显示有意义的消息？

编辑 :: Apache KeepAlive ON 参数是什么意思？那么这是否意味着服务器和浏览器之间的连接将处于已建立模式，并且一旦 Apache 终止连接 - 浏览器就会收到通知？

编辑：

下面是我的 AJAX 调用：

```
 $.ajax({
            type: "POST",
            url:  "/cgi-bin/my.py",
            success: function(xml)
            {
                alert('Success');
            },
            error:function(xhr,err,html)
            {
                    alert("Failed\nreadyState: "+xhr.readyState+"\nstatus: "+xhr.status + "\nresponseText: "+xhr.responseText);
            }
   }); 
```

# php - 将短语与格式匹配的 HTML 搜索

> ID：11992127
> 
> 赞同：3
> 
> 时间：2012-08-16T17:04:10.097
> 
> 标签：php, replace

我需要修改 HTML 标记，以便突出显示匹配的单词或短语，但该短语可能包含标记。例如：

这个**f*或*matted**文本：

```
This <b>f<i>or</i>mat</b>ted text 
```

我希望能够找到“This formatted”并将其包装在 `<style="color:lightblue" </span>`标签中

所以上面会变成：

```
 <span  style="color:yellow">This <b>f<i>or</i>mat</b>ted</span> text 
```

我在 Linux 上使用 PHP。

谢谢

编辑：我不是要替换标签，而是要匹配其中包含标签的文本。基本上匹配一个可以用任何类型或长度的任意标签分隔的字符串。请忽略我的古老 html 标签，它们只是更容易输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:39:57.517

如果我正确理解了这个问题，您可以使用[preg_match](http://php.net/manual/en/function.preg-match.php)来查找指定的字符串，然后用您的标签包围的版本替换它。

# jquery - Twitter Bootstrap 模态问题 531

> ID：11992128
> 
> 赞同：1
> 
> 时间：2012-08-16T17:04:21.187
> 
> 标签：jquery, twitter-bootstrap, custom-data-attribute

[https://github.com/twitter/bootstrap/issues/531](https://github.com/twitter/bootstrap/issues/531)

我正在使用带有问题 531 中描述的修复程序的 Twitter Boostrap，以允许使用数据属性将数据传递给模态，这可以正常工作，但是......

```
$('#modal2').data('modal').options.user_id 
```

似乎不同于：

```
$('#modal2').data('user_id') 
```

我正在传递一个 user_id：

```
<a data-toggle="modal" data-user_id="5" href="#modal2">Edit Picture</a>

$('#modal2').on('show', function (event) {
    $('#modal2').data('user_id', $('#modal2').data('modal').options.user_id );
}); 
```

但我也试图将相同的数据属性从一种模式传递到另一种模式：

#modal1 里面：

```
$('#modal1').modal('hide');
$('#modal2').data('user_id', 6); // successfully sets the user_id to 6
$('#modal2').modal('show'); 
```

问题是当使用这种方法打开 modal2 时，它的值不正确（5 而不是 6），并且似乎忽略了 $('#modal2').data('user_id', 6); 设置的数据；

如何以编程方式设置 data('modal').options.user_id 的值，或者这是修复的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T01:02:13.777

它们不一样。Bootstrap Modals 中用于传递数据的补丁仅将数据从原始锚点传输到`Modal.options`对象。所以，

```
<a data-toggle="modal" data-user_id="5" href="#modal2">Edit Picture</a> 
```

给你：

```
$('#modal2').data('modal').options.user_id === 5 // true 
```

但这不会向模态元素添加新的数据对象。

因此，在您的情况下，尝试将值分配给单独的数据对象 ( `data('user_id')`) 不会对该`Modal.options.user_id`值产生影响。

您要么需要操作原始锚点上的数据值，要么`Modal.options.user_id`直接操作该值。

# perl - 驼鹿和扩展非驼鹿类

> ID：11992132
> 
> 赞同：3
> 
> 时间：2012-08-16T17:04:50.083
> 
> 标签：perl, inheritance, moose

我有以下类/包：

```
package Data::CrawlerThreadPool;
use Moose;
use MooseX::InsideOut;
use MooseX::NonMoose;

extends 'Thread::Pool::Simple';

around BUILDARGS => sub {
      my $orig  = shift;
      my $class = shift;
      return $class->$orig( do  => [\&_do_handle],
                            min => 5,
                            max => 10 );
};

sub _do_handle {
    $| = 1;
    print "In Do handle";
}
1; 
```

在我的主脚本中，我这样称呼它（例如..）：

```
#!/usr/bin/env perl
use strict;
use warnings;
use Data::CrawlerThreadPool;

my $tp = Data::CrawlerThreadPool->new();
my @args = qw(0 0 0 0 0 0 0 0 0);
$tp->add(@args) for (0..10);
$tp->join(); 
```

似乎调用了 BUILDARGS 方法，但该进程确实处理从未被调用过。我在这里想念什么？ [线程::池::简单](http://search.cpan.org/~jwu/Thread-Pool-Simple-0.23/Simple.pm)

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:27:21.820

`\&_do_handle`没有调用 _do_handle 子 - 它只是取消引用对子的引用。这个习语通常在 an 内部使用`eval {}`，以检查您是否真的有一个子引用（或一个具有子引用重载的对象）——我认为这不是您打算在这里做的。

如果您打算实际调用 _do_handle，则直接调用它：

```
around BUILDARGS => sub {
      my $orig  = shift;
      my $class = shift;
      return $class->$orig( do  => [ _do_handle() ],
                            min => 5,
                            max => 10 );
}; 
```

# scala - Scala - T 或 => T 类型的参数

> ID：11992134
> 
> 赞同：5
> 
> 时间：2012-08-16T17:04:52.487
> 
> 标签：scala, function-parameter

以下有什么区别吗

```
def foo(s: String) = { ... } 
```

和

```
def foo(s: => String) { ... } 
```

这两个定义都接受“sss”作为参数。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-16T17:19:25.537

实参`String`是[按值](http://en.wikipedia.org/wiki/Call_by_value#Call_by_value)参数，`=> String`是[按名称](http://en.wikipedia.org/wiki/Call_by_name#Call_by_name)参数。在第一种情况下，传入字符串，在第二种情况下，传入一个所谓的[thunk](http://en.wikipedia.org/wiki/Thunk_%28functional_programming%29)，无论何时使用它都会*计算为*a 。`String`

```
def stringGen: String = util.Random.nextInt().toString

def byValue(s: String) =
  println("We have a '" + s + "' and a '" + s + "'")

def byName(s: => String) =
  println("We have a '" + s + "' and a '" + s + "'")

byValue(stringGen)  // constant value
byName (stringGen)  // evaluated twice 
```

通常，一个别名参数不是用来多次评估它，而是*懒惰地*评估它一次。

```
def logMessage = {
  println("Calculating log message...")
  new java.util.Date().toString
}

def log(enabled: Boolean, message: => String): Unit = {
  lazy val fullMessage = "LOG: " + message
  println("Test")
  if (enabled) println(fullMessage)
}

log(false, logMessage)
log(true , logMessage) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T17:20:01.317

在许多情况下，它们是相同的，但

=> 按名称传递

第一个按值传递

# php - PHP SharePoint API 文档子目录列表

> ID：11992136
> 
> 赞同：2
> 
> 时间：2012-08-16T17:04:57.007
> 
> 标签：php, sharepoint

我刚刚实现了 PHP 的 SharePointAPI，可以在[https://github.com/thybag/PHP-SharePoint-Lists-API找到](https://github.com/thybag/PHP-SharePoint-Lists-API)

我能够从 WSDL 中检索所有 SharePoint 列表，并且能够使用 ->read($list) 函数来检索包含文档文件夹和文件的列表。

在列表中，如果该项目是一个文件，我可以下载它。但是，如果该项目是另一个文件夹（子目录），我如何访问该目录的文件夹和文件？

->read($list) 函数不起作用，我有点不知所措。有谁知道我如何读取列表项的文件夹和文件，因为它是列表？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-01T14:26:20.813

尽管我的一部分怀疑你可能是最终设法在 github 问题上回答他们自己的问题的人；我想我不妨在这里重新发布这个答案，以防其他人有同样的问题。

本质上（尽管它有点变通），您可以通过调用以下方法获取共享点列表中文件夹内容的列表：

```
$sp->read($listName,
          NULL,//$limit 
          NULL,//$query
          NULL,//$view 
          NULL,//$sort 
          "<Folder>" . $listName . "\\" . $folderName . "</Folder>"//$options 
) 
```

希望一旦设法找到一点空闲时间，我会在库中添加一个专门的方法来做这件事，只是为了让它在未来更直接一点。

# python - 抑制 rpy2 中的警告

> ID：11992138
> 
> 赞同：8
> 
> 时间：2012-08-16T17:05:03.213
> 
> 标签：python, r, warnings, rpy2

当我在 python 中导入 R 时，使用 rpy2，如何抑制警告？

看来，在 R 中，您只需执行以下操作

```
options(warn=-1) 
```

...但我不熟悉 R。我如何在 python 中做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2017-01-09T17:26:17.183

[rpy2](http://rpy2.bitbucket.org/)中的警告系统使用 Python 的[`warnings`](https://docs.python.org/3.5/library/warnings.html#module-warnings)模块。[`filterwarnings()`](https://docs.python.org/3.5/library/warnings.html#warnings.filterwarnings)因此，您可以使用该包的功能关闭警告。正如在此处对另一个答案的评论中已经指出的那样，这可能很危险，因为不仅与 R 相关的警告会受到影响。

但是，rpy2 带有自己的警告类，`RRuntimeWarning`. 因此，您只能通过以下方式关闭此类警告

```
import warnings
from rpy2.rinterface import RRuntimeWarning
warnings.filterwarnings("ignore", category=RRuntimeWarning) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-03-30T22:55:56.377

从 3.0 版本开始，rpy2 不再使用 Python[的](https://github.com/rpy2/rpy2/issues/543)`warnings`模块。它现在改为依赖。新的解决方案是：`logging`

```
from rpy2.rinterface_lib.callbacks import logger as rpy2_logger
import logging
rpy2_logger.setLevel(logging.ERROR)   # will display errors, but not warnings 
```

如果您只想过滤特定的警告，请使用：

```
rpy2_logger.addFilter(lambda record: 'notch went outside hinges' not in record.msg) 
```

有关高级过滤的可用字段，请参阅[`LogRecord`](https://docs.python.org/3/library/logging.html#logrecord-objects)类规范。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T18:23:02.267

你几乎自己给出了答案。`options(warn=-1)`您可以使用 RPy 从 Python调用该函数：

```
rpy.r['options'](warn=-1) 
```

对于 RPy2 它应该是这样的（还没有尝试过）：

```
rpy2.robjects.r['options'](warn=-1) 
```

只需将它放在 Python 脚本的开头（在模块导入之后），所有警告都应该被禁止。

# asp.net - jQuery Ajax 到 asp.net asmx web 服务抛出请求格式无效：application/json

> ID：11992139
> 
> 赞同：8
> 
> 时间：2012-08-16T17:05:03.917
> 
> 标签：asp.net, web-services, jquery

我让 jquery 调用一个带有整数的 asp.net webservice。在我们移植到 .net 4.0 的旧版应用程序上，我无法让这个调用正常工作。我可以调用一个没有参数的方法，但是向 Web 方法发送数据会返回以下错误：

```
System.InvalidOperationException: Request format is invalid: application/json; charset=UTF-8\. 
at System.Web.Services.Protocols.HttpServerProtocol.ReadParameters() 
at System.Web.Services.Protocols.WebServiceHandler.CoreProcessRequest() 
```

我在一个空白项目中创建了完全相同的代码，并且运行良好。我在 web.config 中看不到空白项目添加的任何会产生影响的内容。

jQuery代码

```
$.ajax({
    type: "POST",
    url: "/WebService1.asmx/Test",
    data: JSON.stringify({"code": 1234}),
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (msg) {
        alert(msg);
    }
}); 
```

我的网络服务代码

```
<ScriptService()> _
<WebService(Namespace:="http://tempuri.org/")> _
<WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
<ToolboxItem(False)> _
Public Class WebService1
    Inherits WebService

    <WebMethod()>
    Public Function Test(ByVal code As Integer) As String
        Return "success"
    End Function

    <WebMethod()>
    Public Function Hello() As String
        Return "hello"
    End Function    
End Class 
```

网页配置

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>  
    <appSettings>
    </appSettings>
    <connectionStrings>
    </connectionStrings>
    <system.web>
        <httpRuntime enableVersionHeader="false" />
        <httpCookies httpOnlyCookies="true" requireSSL="false" lockItem="true" />
        <trace enabled="false" pageOutput="true" requestLimit="40" localOnly="true"/>

        <httpModules>
        </httpModules>
        <compilation debug="true" strict="true" explicit="true" targetFramework="4.0">

        </compilation>
        <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID">
        </pages>

        <authentication mode="Forms">

        <httpHandlers>     
        </httpHandlers>
    </system.web>

    <system.webServer>

    <validation validateIntegratedModeConfiguration="false" />
    <modules>
    </modules>
    <handlers>
    </handlers>
    <httpErrors errorMode="Custom" > 
    </httpErrors>
    </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T09:46:36.423

DOH，我在错误的 web.config 中工作。

就像很多关于 SO 的问题一样，解决方案是添加以下内容。

```
<system.webServer>
        <handlers>
            <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
            <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        </handlers>
  </system.webServer> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-31T13:51:03.460

我遇到了同样的问题，最终运行了这个命令......

```
C:\Windows\Microsoft.NET\Framework64\v4.0.30319>aspnet_regiis.exe -i 
```

请注意，您需要在管理员模式下使用命令提示符才能使其工作。

# playframework-2.0 - 在不同的模块下创建模型

> ID：11992140
> 
> 赞同：1
> 
> 时间：2012-08-16T17:05:06.433
> 
> 标签：playframework-2.0

我想在我的游戏中有以下结构！应用程序。

应用程序 |_ 控制器 |_ 模块 |- 模块 1 |- 型号 |- 模块 2 - 型号

基本上，我想在每个模块中使用单独的模型。

然而，我所有的持久层都在这种结构中抛出错误。我试图将我的应用程序配置设置为显式访问每个模型 [而不是模型。*] 但没有运气。

一种可能的解决方法是在 module1 和 module2 中共享模型，但我想将它们保留在单独的模型中，因为它们没有共同用途。

如果你们能提供帮助，我真的很感激。

提前致谢，

PS：我正在使用最新版本的 play 2.0.2 并使用 MySQL 5.5 作为持久单元

ED

# jquery - Highcharts：多行积分

> ID：11992141
> 
> 赞同：5
> 
> 时间：2012-08-16T17:05:14.747
> 
> 标签：jquery, highcharts

我想在各种Highcharts图表的学分中显示图形数据的来源。但是，此来源的字符串有时可能会很长，并且不适合单行。我可以手动设置学分的 y 值和图表的间距底部，但是由于我有 50 多个具有不同来源/学分的图形（有些适合单行，有些不适合），有没有办法设置将自动涵盖所有可能性的默认选项？

这里有一个简单的小提琴，显示多余的文本被截断：http: [//jsfiddle.net/kFskZ/](http://jsfiddle.net/kFskZ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-19T23:04:49.047

我通过使用 credits 'position' 选项并通过放置 html break 标签来创建换行符解决了这个问题。我不得不一直弄乱位置，直到我的所有文本都按需要可见。[请参阅http://www.highcharts.com/docs/chart-design-and-style/design-and-style](http://www.highcharts.com/docs/chart-design-and-style/design-and-style)上的文档

```
credits: {
    text: 'Powered by ACIS<br/>Western Regional Climate Center',
    href: 'http://wrcc.dri.edu',
    position: {
        align: 'right',
        verticalAlign: 'bottom',
        x: -20,
        y: -20
    }
}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:15:37.983

I don't know if that's what do you want.

Use `Highcharts.setOptions`.

```
var options = {
    credits: {
        text: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam suscipit nulla a elit porta vitae condimentum eros vehicula. Nam rhoncus mattis turpis quis rhoncus. Fusce pulvinar faucibus odio, at ultricies diam dignissim et. Donec at nibh est, quis posuere purus.',
    style: {
        width: 300
    },
        position: {
            align: 'left',
            x: 10
        }
    }    
};

Highcharts.setOptions(options); 
```

[**demo**](http://jsfiddle.net/kFskZ/2/)

**Update**:
There are many possibilities.
You can change `legend` position and increase your legend `width`. [**demo**](http://jsfiddle.net/kFskZ/7/)

# vb.net - 下拉列表的默认值

> ID：11992145
> 
> 赞同：0
> 
> 时间：2012-08-16T17:05:38.517
> 
> 标签：vb.net, asp.net-mvc-3

我需要为 DropDown 列表设置一个默认值，如下所示：

```
@Html.DropDownList("BillId", "") 
```

用户不一定需要选择某些内容，但列表会引发错误

```
The ViewData item that has the key 'BillId' is of type 'System.Int32' but must be of type 'IEnumerable<SelectListItem>' 
```

如果未选择某个值并且该框处于默认空白状态。

我的控制器如下：

```
 Function Create(id As Integer) As ViewResult
        ViewBag.id = id
        Dim job As Job = New Job
        job.CustomerId = id
        job.JobAmount = 0
        job.JobDate = Date.Now()
        job.JobStatus = "Active"

        Dim BillList = New List(Of Bill)()

        Dim BillQuery = From s In db.Bills
                        Select s

        BillList.AddRange(BillQuery)

        ViewBag.BillId = New SelectList(BillList, "BillId", "BillDate")

        Return View(job)
    End Function

    '
    ' POST: /Job/Create

    <HttpPost()>
    Function Create(job As Job) As ActionResult
        If ModelState.IsValid Then
            db.Jobs.Add(job)
            db.SaveChanges()

            Dim customer As Customer = db.Customers.Find(job.CustomerId)
            Dim customerNumber As String = customer.CustCellphone.ToString()
            Dim messageSender As SendMessage = New SendMessage
            Dim smsMessage As String = "LAUNDRY: Job Number " & job.JobId & " has been booked in. You will be notified when individual services within it are ready for collection."
            messageSender.SendMessage(smsMessage, customerNumber)

            Dim url As String = "/RequestedService/AddService/" + job.JobId.ToString()
            Return Redirect(url)
        End If
        Return View(job)
    End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:15:34.547

If your model Job doesn't have the property of BillId than in the view the dropdown markup should be

```
@Html.DropDownList("Job_BillId", ViewBag.BillId) 
```

And the model Job contains the property BillId than create the ViewBag with some different name and use them accordingly in view markup for example:

Create a ViewBag with different name instead of BillId in controller

```
ViewBag.BillIdList =  New SelectList(BillList, "BillId", "BillDate") 
```

And in view use this as below

```
@Html.DropDownListFor(model => model.BillId, ViewBag.BillIdList) 
```

Hope this will help you.

# windows-embedded-compact - 为 Windows Embedded 7 Compact 开发应用程序需要什么？

> ID：11992151
> 
> 赞同：1
> 
> 时间：2012-08-16T17:05:52.763
> 
> 标签：windows-embedded-compact

问题是标题。

我已经下载了[http://www.microsoft.com/en-us/download/details.aspx?id=19004](http://www.microsoft.com/en-us/download/details.aspx?id=19004)。它目前正在安装中。它负责 IDE 部分。

还有什么我需要的吗？

其次，是否有创建项目和“Hello World！”的启动教程？应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T15:00:25.267

您可以在此处找到一些 Win CE 教程，它们是为 colibri 模块编写的，但入门教程应该可以帮助您了解大多数其他 ARM Win CE 系统。

[http://developer.toradex.com/knowledge-base/getting-started-with-colibri-modules](http://developer.toradex.com/knowledge-base/getting-started-with-colibri-modules)

# php - IIS 7.5 PHP 失败“FastCGI 进程意外退出”

> ID：11992153
> 
> 赞同：22
> 
> 时间：2012-08-16T17:06:03.420
> 
> 标签：php, cgi, iis-7.5, fastcgi

我一直在尝试让 PHP 与 IIS 7.5 一起工作，但遇到了一些障碍。每当我尝试加载页面时，都会出现以下错误：

“HTTP 错误 500.0 - 内部服务器错误 C:\Program Files\PHP\php.exe - FastCGI 进程意外退出”

模块 FastCgiModule

通知 ExecuteRequestHandler

处理程序 PHP_via_FastCGI

错误代码 0x00000000

请求的 URL *http://localhost:80/index.php

物理路径 C:\inetpub\wwwroot\index.php

登录方法匿名

登录用户匿名

失败的请求跟踪日志目录 C:\inetpub\logs\FailedReqLogFiles

我已根据 IIS 的需要修改了 PHP.ini 文件，并将其切换为详细模式。C:\inetpub\logs\FailedReqLogs 中没有任何日志字段，并且生成的其他日志文件中没有与此错误相关的任何日志。

我已经尝试了在这里和其他地方找到的其他修复程序，但到目前为止还没有成功。

在一些细节上，这些是： 重新检查 PHP.ini 设置 fastCGI 以在 IIS 中与 PHP 一起工作（将其配置为加载 php.exe） 尝试将 WinCache 作为执行方法。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-09-02T16:31:12.390

当我将 PHP 5.4.14 升级到 5.5.3（32 位）时，我遇到了这个问题。

要修复它，我必须[为 Visual Studio 2012 Update 3 安装 Visual C++ Redistributable](http://www.microsoft.com/en-us/download/confirmation.aspx?id=30679)

当我的网页在升级后不再加载时，我通过从控制台运行 php --version 发现我需要这个 DLL。然后显示我需要 MSVCR110.dll，它来自 MS 的 32 位 VS 可再发行更新。由于我在 Window Update 中关闭了可选更新，因此我没有自动获得它。

它们也有不同的风格（32 位、64 位和 ARM），32 位对我有用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-08-06T11:55:09.450

为 Visual Studio 2012 Update 4安装 32 位[Visual C++ Redistributable](http://www.microsoft.com/en-us/download/details.aspx?id=30679)

不是 64 位

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-01T05:41:54.400

似乎您的 php 中有一些 dll 扩展无法正常工作并强制关闭 CGI。尝试注释 php.ini 文件中的每个扩展名，看看错误是否存在。

**[编辑 1]**

经过一番努力，我发现 IIS 是非线程安全的 Web 服务器，并且您想在 php 中用于 IIS 的所有扩展都应该使用 nts lib 进行编译。如果扩展使用线程安全库编译并添加到 IIS，则 IIS 将无法启动。在这种情况下，您在线程安全中的扩展（我猜在 apache 中使用）并且不应该在 IIS 中添加为扩展

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-18T13:54:15.773

这个页面是你试图做的任何密集的事情吗？

我以前遇到过这个问题，并且错误消息具有误导性。

您可能想尝试增加该特定页面的内存限制。首先找出该页面的峰值内存使用量：

```
echo memory_get_peak_usage(true); 
```

然后适当地设置你的内存限制：

```
ini_set("memory_limit","1024M"); 
```

希望有帮助！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-17T15:23:28.917

我在配置时遇到了这个问题`PHP 5.4.17(32-bit)`。

要修复它，我必须安装`Visual C++ Redistributable`for`Visual Studio 2012 Update 4`并且在安装此更新后它运行良好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-08T19:44:42.717

我知道它是一个旧线程，但有人可能会节省一些头疼。

在 php.ini 中，改变

```
; Whether or not to enable the dl() function.  The dl() function does NOT work
; properly in multithreaded servers, such as IIS or Zeus, and is automatically
; disabled on them.
; http://php.net/enable-dl
enable_dl = Off 
```

至

```
; Whether or not to enable the dl() function.  The dl() function does NOT work
; properly in multithreaded servers, such as IIS or Zeus, and is automatically
; disabled on them.
; http://php.net/enable-dl
;enable_dl = Off 
```

让 enable_dl = Off 不起作用，注释掉整行。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-05-04T08:47:45.690

正如上面答案中正确提到的，它与未安装或未正确安装的“Visual C++ Redistributable”有关。

***取决于我在这个问题上的专业知识。***

1- 首先注意，每个 PHP 版本都依赖于特定的 Visual C++ Redistributable 版本（11、12、14、..）

所以首先是使用 php 站点左侧的注释检查您的 PHP 版本：
[PHP 下载页面](http://windows.php.net) 搜索“我选择哪个版本？” 然后看看你需要什么版本的 VC++。

2- 您必须同时下载 VC 32 和 64。并检查您的 PC 是否已经安装了它们（仅适用于相同版本）。然后先安装32，后安装64。（除非它要求，否则不需要任何重新启动）。

3- 完成 iis、apache 或 .... 的 php 安装其他步骤

我希望它对你有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-23T10:36:12.607

如果您有两个像（您的应用程序，phpmyadmin）这样的应用程序，只需禁用 APC 扩展希望能解决它与我一起工作的问题

如果不只是安装 Microsoft Visual C++ 86 和 64

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-01T19:49:04.987

我有同样的问题，我通过安装**32**位 Visual C++ 解决了这个问题，可再发行 Visual Studio 2012。64 位对我不起作用。

# javascript - JavaScript 全局鼠标钩子

> ID：11992160
> 
> 赞同：1
> 
> 时间：2012-08-16T17:06:39.500
> 
> 标签：javascript, jquery, css, html

你好，我有一个基于网络的幻灯片，它基本上是使用计时器调用的页面数量。

客户现在想要幻灯片中的 silverlight/flash 游戏，并且仅在触摸屏幕（触摸屏）时激活它。这意味着我需要在 javascript 中捕获任何鼠标活动，然后让我的 Javascript 调用不同的页面（包含 silverlight/flash）。我看到的问题是幻灯片可以是任何东西：图像、视频、youtube、HTML……你可以命名它……如果它可以在浏览器中运行，我需要拦截任何鼠标输入/触摸。

这甚至可能吗？

我的第一个想法是制作一个 100% 透明的 <div> 标签并将其放在所有内容之上并包含 onclick 事件....

任何帮助表示赞赏

**解决方案** 经过一番研究后，我发现它无法完成。但是 - 有一个解决方法，制作一个带有透明图像作为背景的 <div> 标签 - 让它填满整个屏幕。然后将一个点击事件附加到那个，presto - 全部完成：

```
<style>
    body, html
    {
        margin:0px;
        height:100%;
        width:100%;
    }

    a
    {
        height: 50px;
        width: 150px;
        border: 1px solid black;
        margin: 10px;
        display: block;
    }

    a:hover
    {
        height: 50px;
        width: 150px;
        border: 1px solid black;
        margin: 10px;
        display: block;
        background-color:red;
    }

    #popover
    {
        width:100%;
        height:100%;        
        background-image:url('/gfx/transparent.png');
        z-index:999;
        position:absolute;
        left:0ox;
        top:0px;
    }

</style>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $("#popover").click(function () {
            alert('Clicked the popover screen');
        });
    });
</script>
<h2>
    Index</h2>
    <input type="button" value="Display" id="showbutton" />
<div>
    <table>
        <tr>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        </tr>
         <tr>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        </tr>
         <tr>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        </tr>
         <tr>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        </tr>
         <tr>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        </tr>
         <tr>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        <td> <a href="#">Test</a></td>
        </tr>
    </table>   
</div>
<div id="popover">
</div> 
```

请注意，当您单击按钮时，链接框不会突出显示 - 您会收到单击事件。希望它有所帮助-我很难弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:14:28.640

```
$(document).bind("click", function() {
    alert("you clicked the page");
}); 
```

But you can't run Flash/Silverlight on iOS and Adobe dosn't support by Andoid anymore, don't know about Silverlight

# android - 语音合成电话，Android？

> ID：11992162
> 
> 赞同：0
> 
> 时间：2012-08-16T17:06:51.983
> 
> 标签：android, speech-synthesis

在 Android 中，我可以有一个可以拨打语音合成电话的应用程序吗？也就是说，当电话被接听时，我想要说出一串文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:08:31.437

不，不可能。您无法在电话中播放音频。

# visual-studio-2010 - 在解决方案资源管理器中右键单击添加自定义菜单（Visual Studio 2010）

> ID：11992165
> 
> 赞同：7
> 
> 时间：2012-08-16T17:07:04.227
> 
> 标签：visual-studio-2010

我一直在尝试在右键菜单中添加另一个选项（就在添加引用上方）来构建一些软件包。

我为此使用 VSPackaging (VS 2010)。问题是我无法获得正确的 Guid，通过它我可以将按钮放在正确的位置。

我尝试了以下方法：

```
<Menu guid="guidSHLMainMenu" id="IDM_VS_CTXT_ITEMNODE" priority="0x0000" type="Context"> 
```

但这只是在项目级别而不是在项目级别获得控制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-05-04T11:04:35.917

可能这是太旧的线程但是如果有人到达这里你可以找到答案

如果必须向项目级内容菜单添加新菜单项，则必须使用不同的 Id

请将 IDM_VS_CTXT_ITEMNOD 替换为**IDM_VS_CTXT_PROJNODE**

如果您不知道特定菜单的 ID，您可以采用最合适的方法。

请检查链接以查看解决方案 [VSIX：将菜单项添加到 Visual Studio 编辑器上下文菜单](https://stackoverflow.com/questions/31759396/vsix-adding-a-menu-item-to-the-visual-studio-editor-context-menu)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-15T17:22:03.960

我尝试了将优先级设置为 0x2000 的 {guidSHLMainMenu, IDG_VS_CTXT_PROJECT_ADD} 的组合并且它有效。

# c# - 如何从托管在 IIS 上的网页调用 Windows 服务

> ID：11992166
> 
> 赞同：1
> 
> 时间：2012-08-16T17:07:06.180
> 
> 标签：c#, windows, iis, windows-services, ipc

> **可能重复：**
> [如何与 Windows 服务通信？](https://stackoverflow.com/questions/4451216/how-to-communicate-with-a-windows-service)

我有一个由 IIS 托管的网页，在收到某些用户输入后从这个页面 - 我想将这些值传递给另一个 Windows 服务。有没有办法这样做？

# storyboard - 内存警告后情节提要 loadView 中的 EXC_BAD_ACCESS

> ID：11992172
> 
> 赞同：1
> 
> 时间：2012-08-16T17:07:25.493
> 
> 标签：storyboard, automatic-ref-counting, exc-bad-access, loadview

我已经创建了两个视图控制器，说`A`和`B`故事板和 ARC。VC`A`调用`B`by`performSegueWithIdentifier`并`B`返回`A`by `dismissViewControllerAnimated`。这很好用，直到我`Memory Warning`在 VC 中模拟 a `B`。如果我这样做，我的应用程序将崩溃

```
Thread 1: EXC_BAD_ACCESS (code=1, address=0x...) 
```

一旦我执行`dismissViewControllerAnimated`. 为了调试，我添加了自己`loadView`的`A`（仅使用 NSLog 和`[super loadView]`），我可以看到，它被调用并且应用程序在`[super loadView]`.

我知道，`A`由于内存警告，视图层次结构被破坏了。但据我了解文档，它应该`dismissViewControllerAnimated`在`B`. 在`loadView`我的代码不应该运行的时候，一切都将被初始化，`viewDidLoad`并且`viewWillAppear`在崩溃之前它们都不会被调用。有没有人有一些建议如何进一步调试，或者如何在坏地址变坏之前获得它的身份？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:18:13.847

逐个对象重建视图控制器后发现问题。在 A 中，我使用了一个 UIPanGestureRecognizer 和一个 UITapGestureRecognizer。在情节提要上添加这两个对象也添加了两行到 viewDidUnload 中，在卸载 A 的视图时将两个识别器设置为 nil。对于 ...GestureRecognizer 这似乎是一个错误。删除这两行解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T02:21:53.730

尝试在presentingViewController中使用strong

例如：

@property（强，非原子）CameraViewController *myCVC;

# android - Android ActionBar：第一个选项卡的左侧填充

> ID：11992173
> 
> 赞同：1
> 
> 时间：2012-08-16T17:07:26.357
> 
> 标签：android, android-actionbar, actionbarsherlock

我的 ActionBar 选项卡有问题（使用 ActionBarSherlock）。该问题仅出现在 Gingerbread 帖子上。

当标签处于堆叠模式（如2一个衬里的动作栏中）时，左侧有一个填充物，将选项卡移到右侧。它是我的分隔线宽度的一半 - 如果我改变我的分隔线宽度，宽度也会改变，如果我完全删除它，一切都会按预期工作。我已经设置`android:showDividers="middle"`了我的主题，所以这不是问题。

如果我没有 2 个选项卡和它们下方的一些按钮，这将不是问题，它们填满了一半的屏幕，所以你可以看到我的选项卡中有一个偏移量。

这是它的图片：![在此处输入图像描述](../Images/f9345afe128c68ff683cd20fee039070.png)

如您所见，左侧选项卡选择器旁边有一个小间隙，这导致选项卡更大。资产上没有任何填充，问题不会出现在右侧选项卡上。

有什么解决方法吗？

# c# - LINQ 运算符和 LINQ 关键字之间的区别

> ID：11992183
> 
> 赞同：2
> 
> 时间：2012-08-16T17:08:16.450
> 
> 标签：c#, linq

在 Calvert 和 Kulkarni 的“Essential LINQ”一书中，都使用了术语“LINQ 运算符”和“LINQ 关键字”。这两个术语有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:23:42.973

**运算符**是 IEnumerable 接口上的一组扩展方法，提供查询功能，包括：过滤、投影、聚合、排序。它们可以应用于任何枚举和集合。

**关键字**是添加到语言（语言扩展）本身（C# 或 VB）的一组关键字，用于构造[LINQ 表达式](http://msdn.microsoft.com/en-us/library/bb397676.aspx)，在引擎盖下关键字调用相应的运算符。并非所有运算符都有相应的关键字，*只有一些更常用的标准查询运算符具有专用的 C# 和 Visual Basic 语言关键字语法，可以将它们作为查询表达式的一部分进行调用*。

因此，***两者之间的区别在于它们赋予代码的不同形式（视觉冲击）***，在引擎盖下调用相同的方法（操作符扩展方法）。

来自 msdn 的示例：

```
 string sentence = "the quick brown fox jumps over the lazy dog";
       // Split the string into individual words to create a collection. 
       string[] words = sentence.Split(' ');

       // Using query expression syntax. 
       var query = from word in words
                   group word.ToUpper() by word.Length into gr
                   orderby gr.Key
                   select new { Length = gr.Key, Words = gr };

       // Using method-based query syntax. 
       var query2 = words.
           GroupBy(w => w.Length, w => w.ToUpper()).
           Select(g => new { Length = g.Key, Words = g }).
           OrderBy(o => o.Length); 
```

# java - 异常 java.lang.IllegalArgumentException：对象不是在 sun.reflect.NativeMethodAccessorImpl.invoke0 处声明类的实例

> ID：11992184
> 
> 赞同：4
> 
> 时间：2012-08-16T17:08:17.090
> 
> 标签：java, illegalargumentexception

嗨，我在运行代码时收到上述错误。我无法理解导致错误的原因。我在[类似的线程](https://stackoverflow.com/questions/7399603/what-causes-object-is-not-an-instance-of-declaring-class)上看到了解决方案，但我不确定这是否适用于我的情况。有人可以帮我理解一下吗？任何帮助是极大的赞赏。

错误

```
[org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/window].[jsp]]
Servlet.service() for servlet jsp threw exception
java.lang.IllegalArgumentException: object is not an instance of
declaring class     at
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)     at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)     at
com.container.taglib.util.MirrorMaker.invokeMethod(MirrorMaker.java:54)
    at
com.container.taglib.util.MirrorMaker.invokeMethod(MirrorMaker.java:48)
    at
com.container.taglib.list.TableSorter.invokeMethod(TableSorter.java:1092)
    at
com.container.taglib.list.TableSorter.createList(TableSorter.java:503)
    at
com.container.taglib.list.TableSorter.doAfterBody(TableSorter.java:151) 
```

代码：

```
public static Object invokeMethod(Object obj, Method method, Object[] params)throws IllegalAccessException, InvocationTargetException{
    Object ret = null;
    String str = "";
    try{
        ret = method.invoke(obj, params);
        if(ret instanceof String){
            str = (String)ret;
            //logger.info("ret str: "+str);                        
        }else if(ret instanceof Integer){
            str = ((Integer)ret).toString();
            //logger.info("ret int: "+str);
        }else if(ret instanceof java.util.Date){
            str = new SimpleDateFormat("yyyy-MM-dd").format(ret);
            logger.info("ret date: "+str);
        }else if(ret instanceof Double) {
            str = ((Double)ret).toString();
        }else if(ret instanceof ArrayList){
            return ret;
        }else{
            return ret;
        }

    }catch(IllegalAccessException ex){
        logger.info("illegal access");
        throw ex;
    }catch(InvocationTargetException ex){
        logger.error("invocation target ex");
        throw ex;
    }           
    return str;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T21:27:48.440

除了尝试使用反射 API 调用使用不是声明该方法的类的实例的对象的方法之外，没有其他原因引发此异常。

您从反射 API 返回的错误消息并不能帮助您准确找出问题所在。在您的`invokeMethod`函数中添加如下检查可以提供更多有用的信息：

```
if (!Modifier.isStatic(method.getModifiers())) {
    if (obj == null) {
        throw new NullPointerException("obj is null");
    } else if (!method.getDeclaringClass().isAssignableFrom(obj.getClass())) {
        throw new IllegalArgumentException(
            "Cannot call method '" + method + "' of class '" + method.getDeclaringClass().getName()
            + "' using object '" + obj + "' of class '" + obj.getClass().getName() + "' because"
            + " object '" + obj + "' is not an instance of '" + method.getDeclaringClass().getName() + "'");
    }
} 
```

此代码将检查一个对象是否是声明该方法的类的实例，如果不是，则抛出异常，其中包含有关该对象和该方法的声明类的更多详细信息。

您的代码似乎是 Web 应用程序的一部分。我可以推测，类`obj`和声明类`Method`可能是在两个单独的类加载器中加载的同一类的两个不同副本。（在 Tomcat 中，每个 Web 应用程序都使用自己的类加载器。）但是，如果无法查看您的代码以及您是如何运行它的，这只不过是在黑暗中的一次彻底的尝试。

# android - MapView 上的 Android 谷歌地图方向

> ID：11992187
> 
> 赞同：4
> 
> 时间：2012-08-16T17:08:29.803
> 
> 标签：android, google-maps, android-mapview, google-directions-api

我正在尝试找到一种方法来使用 Google Map Directions 来显示指向 A 点和 B 点的方向，而无需将其作为 Intent 启动，从而在 Google Navigator 或手机网络浏览器上打开地图。

有没有办法单独在 MapView 上使用 Google 路线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:34:35.277

是的，有办法。但是，请记住，如果您希望在 Map View 上显示路线，您将不得不使用画布绘制大量线条，不要忘记您仍将调用 Google Directions API 以得到一个 JSON 响应，然后您必须对其进行解码。

要解码 JSON 响应，请参阅另一个问题的出色答案： [https](https://stackoverflow.com/a/6708458/1512836) ://stackoverflow.com/a/6708458/1512836 。

# jquery - 避免在共享公共空间的元素上触发双重事件

> ID：11992190
> 
> 赞同：0
> 
> 时间：2012-08-16T17:08:35.450
> 
> 标签：jquery

我正在从 Google Reader 复制一些功能，其中生成的条目表带有星号，允许用户突出显示某些行。我还希望用户能够单击该行以展开条目。要扩展该行，我的 jquery 读取：

```
$(".action_row").click(function() {
    if( $(this).next().is(':hidden') ) {
        $(".detailed_row").hide();
        $(".selected-action").removeClass("selected-action");
        $("#current-action").removeAttr("id");
        $(this).next().toggle('fast').addClass("selected-action");
        $(this).addClass("selected-action").attr("id", "current-action");
    } else {
        $(".selected-action").removeClass("selected-action");
        $("#current-action").removeAttr("id");
        $(".detailed_row").hide();
    }
}); 
```

点击期间发生的事情并不重要，只是点击 .action-row 会触发一个事件。

但在每个动作行里面都有一颗星：

```
$(".action-star").click(function() {    

    //Toggle the star through CSS
    $(this).toggleClass("star-checked");
    if ($(this).hasClass("star-checked")) {
        $(this).html("<i class='icon-star icon-large'></i>");
    } else {
        $(this).html("<i class='icon-star-empty icon-large'></i>");
    }               
}); 
```

如果用户点击星星，我只想切换星星。然而，现在，当点击星号时，它会触发星号切换和 action_row 事件。

我应该如何更改代码，以便在单击星号时不使用 action_row 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:58:51.310

阅读[stopPropagation()](http://api.jquery.com/event.stopPropagation/)和[stopImmediatePropagation()](http://api.jquery.com/event.stopImmediatePropagation/)

似乎事件正在从明星冒泡到行动行，这会导致您产生不良影响。

[jquery：stopPropagation 与 stopImmediatePropagation](https://stackoverflow.com/q/5299740/1385672)

```
$(".action-star").click(function(e) {    
    e.stopPropagation(); // <-- top stop events from bubbling up
    //Toggle the star through CSS
    $(this).toggleClass("star-checked");
    if ($(this).hasClass("star-checked")) {
        $(this).html("<i class='icon-star icon-large'></i>");
    } else {
        $(this).html("<i class='icon-star-empty icon-large'></i>");
    }               
}); 
```

# visual-studio-2012 - Visual Studio 2012 中的自动隐藏

> ID：11992194
> 
> 赞同：2
> 
> 时间：2012-08-16T17:09:22.853
> 
> 标签：visual-studio-2012

在 Visual Studio 2012 中，*图钉*图标允许我自动隐藏停靠在中心代码选项卡左侧或右侧的选项卡。

![在此处输入图像描述](../Images/0a48929f3b719fe868e975c80324ae82.png)

效果很好。

我还有一个停靠在我的中央代码选项卡下方的选项卡。没有自动隐藏功能。有*pin*，但它们的工具提示说明*Toggle pin status*（我不清楚“状态”的作用）。

![在此处输入图像描述](../Images/cc02b3c4e8a5aba86e5a30f0febb1fd5.png)

如何在中央代码选项卡（或该选项卡中的单个窗口）下方自动隐藏我的选项卡，以便在我自动隐藏时可以像解决方案资源管理器一样快速访问选项卡/组件窗口？

或者，停靠在左/右的选项卡的行为是否与停靠在中央代码选项卡下方的选项卡根本不同？

# gwt - 下载 GWT 展示项目

> ID：11992195
> 
> 赞同：2
> 
> 时间：2012-08-16T17:09:24.100
> 
> 标签：gwt

我只是在任何地方都找不到链接（不再）。

**我在哪里可以下载[展示](http://gwt.google.com/samples/Showcase/Showcase.html)的源代码？**

我知道，您可以单击 Sourcecode 来获取应用程序的源代码，但是整个应用程序的 porject 文件都有。我问是因为我找不到[CellTree](http://gwt.google.com/samples/Showcase/Showcase.html#!CwCellTree)`ContactCell`示例的类（应该在 import com.google.gwt.sample.showcase.client.content.cell.CwCellList.ContactCell; 下）。

BR

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T20:17:11.460

您可以直接从 svn 浏览源代码：

[GWT 展示 SVN](http://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/showcase/?r=9045#showcase/src/com/google/gwt/sample/showcase/client/content/cell)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T22:21:54.147

它就在 GWT SDK 中，可从[https://developers.google.com/web-toolkit/download](https://developers.google.com/web-toolkit/download)下载或作为 Eclipse 插件下载。在最后一种情况下，SDK 完全一样，解压到 Eclipse 的`plugins`子文件夹中。

# php - PHP：使用Javascript在加载的文件中形成表格

> ID：11992196
> 
> 赞同：0
> 
> 时间：2012-08-16T17:09:29.117
> 
> 标签：php, javascript, jquery, html, post

我必须文件，在其中一个文件中，我使用 Javascript 调用另一个文件：

```
$(document).ready(function() {
  $('#dataBox').load('/example/data.php?id=' + '123');
}); 
```

然后数据很好地显示在我的 div 中，id 为“dataBox”。到目前为止，一切都很好。

不过，在我的 data.php 文件中，从数据库中查询的每个数据都有一个表单。简单的表单只是一个文本字段和一个提交按钮。此表单使用 POST 发送数据，然后第一个文件使用`$_POST`. 这不起作用，在我将获取数据的代码移动到另一个文件之前一切正常。表单操作参数设置为`$_SERVER["REQUEST_URI"]`。我可以与 Google Chrome 的开发人员一起检查东西，看到它将值发送到 data.php?id='123'，这并不奇怪。所以我想我会将所有获取 POST 值的代码移到 data.php 文件中。虽然这似乎也不起作用。当我按下提交时，页面似乎没有刷新。

编辑：

我只是注意到我写`<form ..some code .. /> instead of just <form ..some code .. >`了这使得提交按钮“工作”并发送值。虽然它把我发送到 jQuery 加载页面，因为`$_SERVER["REQUEST_URI"]`它是 action 参数。我需要这样做，以便它将我发送到加载文件的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:14:01.820

You need to reinitialize your jquery function when you load the new page. Jquery doesn't know it exists unless you reinit like so:

```
$(document).ready(function() {
  $('#dataBox').load('/example/data.php?id=' + '123', function(){
      reinit();
  });
});

function reinit() {
  $('#dataBox form').submit(function(){
    var formData = $(this).serialize();
    $.ajax({
        type: "POST",
        url: 'myProcessingPage.php',
        data: formData,
        success: function (data) {
            alert('success');
        },
        error: function (data) {
            alert('error');
        }
    });
  });
} 
```

Note: This code is just to show you how it works, not meant for production.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:00:18.510

一个 jQuery (1.7.2) 解决方案（这还不完整，您必须根据需要进行修改，我只是指出了另一种在不使用标准表单提交的情况下发布到 data.php 的替代方式）：

```
$(document).ready(function() {
  // Like you already have, load the form stuff on document ready
  $('#dataBox').load('/example/data.php?id=' + '123');
  // Now, let's hook a submit event up to your submit buttons - we'll attach it to dataBox so 
  // you wont have to bind it again:
  $("#dataBox").delegate("submit","FORM",function(e){
     // Prevent the form from submitting
     e.preventDefault();
     // Do the submission
     $.post("data.php",{id:"123"},function(result){
        // Now you can do whatever you want with result, as it
        // contains everything that data.php returned.
     });
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T18:31:44.763

啊……解决了！

只是改为`$_SERVER["REQUEST_URI"]`感谢`$_SERVER["HTTP_REFERER"]`您的所有帮助！让我了解出了什么问题，以及更多关于事情是如何运作的。:)

# java - 如何在不退出 JVM 的情况下多次运行 Java 程序？

> ID：11992198
> 
> 赞同：2
> 
> 时间：2012-08-16T17:09:43.127
> 
> 标签：java, bash, jvm, jvm-arguments

假设我有一个 Java 程序`Test.class`，如果我使用下面的脚本

```
for i in 1..10
do
    java Test
done 
```

每次`java Test`调用JVM都会退出。

我想要的是在`java Test`不退出 JVM 的情况下多次运行，以便以后运行可以使用先前运行中的优化方法，并可能进一步优化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T17:12:12.137

为什么不编写一个 Java 程序，重复调用您要运行的程序的入口点呢？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T17:21:16.733

运行一次

```
java Run 
```

主程序`Test`多次调用您的课程。

```
class Run {

    public static void main(String[] args) {
        for(int i=0; i<10; i++){
            Test.main(args);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T17:21:14.377

```
public class RunTest
 {
    public static void main(String[] args)
      {
          for(int i=1; i<=10; i++)
              Test.main(args); 
      }
 } 
```

这应该这样做。您可以使用传递给主函数的相同参数调用测试类的主函数。这是另一张海报提到的“包装”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T17:18:05.237

使用这样的代码：

```
public static void main2(String args[]){ // change main to main2
  for(int i=0;i<10;i++)main(args);
}
public static void main(String args[]){ // REAL main
   //...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T17:12:23.290

Perhas`ProcessBuilder`合适吗？例如，像

```
String[] cmd = {"path/to/java", "test"};
ProcessBuilder proc = new ProcessBuilder(cmd);
Process process = proc.start(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T17:13:08.747

您要做的是将循环放在`Test`类中，或者将您想要循环的次数作为参数传递给`main()`inside `Test`。

**笔记：**

如果您正在查看**JIT**优化，则需要 10 多次迭代才能启动。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-16T17:32:00.963

与前面的示例相同，但使用命令行参数

```
public class Test {

    public static void main(String[] args) {
        if ( args.length > 0) {
            final Integer n = Integer.valueOf(args[0]);
            System.out.println("Running test " + n);
            if ( n > 1 ) {
                main(new String[] { Integer.toString(n-1) });
            }
        }
    }
} 
```

使用 args 指示运行次数

```
$ java Test 10 
```

# javascript - 对所有浏览器的全面 CSS3 支持

> ID：11992199
> 
> 赞同：-4
> 
> 时间：2012-08-16T17:09:47.297
> 
> 标签：javascript, html, css

我知道这在某种程度上是一个很难的问题，或者至少你可能会想“他是认真的吗？”，但无论如何我都会问。

当我说所有浏览器时，我的意思是：IE6+、FF3+、Safari 5+、Chrome 13+、Opera 10+

由于 Safari、Chrome 和 Opera 是 IMO 浏览器，主要由真正关心更新的人使用，我什至接受只支持更高版本的浏览器。

我想根据 w3c 规范获取以标准化 css3 编写的 css 文件，并生成一组 css 和 js 文件（可能还有一些用于不同浏览器版本的文件），这些文件将使 css3 功能按预期工作。

那么，总的来说，您是否认为有可能做类似的事情，或者某些事情可能已经存在？

如果您有任何建议、提示或一些资源让我开始使用，我也将不胜感激。

**编辑**

由于有些人并没有真正理解我的意思并且对我的问题进行了评分，因此我应该做出一些澄清。

我在问您是否认为将任何一组标准化 css3 文件（当前版本的 w3c 规范）转换为 css、js 并使当前指定的 css3 功能按预期工作在技术上是可行的（即使有一些开销）。如果没有，或者如果您已经知道可能存在问题，那么请与我分享这些知识。

例如，通过为容器生成图像并在容器周围使用一些包装器，可以在较旧的浏览器中支持圆角功能。这比使用 javascript polyfills 更有效。

我只想听听意见和原因，为什么在某些情况下这可能很困难。也许像“我不相信功能 XY 在浏览器 AB 中工作，因为该功能根本无法用您在该浏览器中的可能性来模仿！原因是......”

那么你怎么看呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:13:02.380

[Polyfills](http://en.wikipedia.org/wiki/Polyfill)可用于填充旧浏览器中缺少的功能。

我不知道转换任意 CSS3 文件的通用/自动技术，但是您使用 HTML5/CSS3 做的许多事情也可以使用合适的 polyfill 来完成。

有关 polyfill 的良好列表，请参见

[https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)

# wpf - MVVM 单元测试 - 消息总线只工作一次

> ID：11992200
> 
> 赞同：0
> 
> 时间：2012-08-16T17:09:48.050
> 
> 标签：wpf, mvvm, moq, simple-mvvm

我正在尝试使用 SimpleMvvmToolkit 针对视图模型编写一些单元测试，其中一些测试需要将消息发送到消息总线以触发视图模型内的事件。问题是我似乎只能“使用”一次消息总线；发送消息的第一个测试通过，但发送消息的另外两个测试失败。但是如果我单独运行每个测试，所有三个都通过，如果我改变顺序，第一个测试，无论是哪一个，都会通过。

这是其中一项测试的示例。

```
[TestMethod]
public void DeleteRequest()
{
    // mock the driver transaction service

    var driverTransactionService =
         new Mock<Services.IDriverTransactionService>();

    var viewModel = new ValidationRequestViewModel(
         driverTransactionService.Object);

    driverTransactionService.Setup(dts =>
         dts.DeleteValidationRequest(It.IsAny<Action<int>>(), 
              It.IsAny<Action<Exception>>(),
              It.IsAny<int>()))
        .Callback((Action<int> action, Action<Exception> ex, int id) => 
             action.Invoke(requestId));

    // make a validation request and add to the collection

    var validationRequest = new ValidationRequest...

    var collection = viewModel.ValidationRequestView.SourceCollection as 
         ObservableCollection<ValidationRequest>;

    collection.Add(validationRequest);

    //  delete the validation request; send the confirmation message as if
    //  the user clicked yes

    viewModel.DeleteValidationRequest(validationRequest);

    MessageBus.Default.Notify(
         NotificationMessages.DeleteValidationRequestConfirmation, 
         this, new NotificationEventArgs<String>(null, null));

    // verify the service call was made

    driverTransactionService.Verify(dts => 
         dts.DeleteValidationRequest(It.IsAny<Action<int>>(), 
              It.IsAny<Action<Exception>>(), requestId));
} 
```

所以我正在创建一个服务的模拟（它是 WCF 服务的包装器）并验证服务上的 DeleteValidatonRequest 是否被调用。在这种情况下，需要消息总线，因为如果用户单击确定，通常会弹出一个确认对话框并发送 DeleteValidationRequestConfirmation 消息。

测试在最后一行（验证）失败，当我调试时，视图模型中消息的处理程序永远不会执行，因此看起来消息从未真正发送过。同样，仅当测试**不是**向总线发送消息的第一个测试时才会失败。如果它单独执行或者是第一个执行，则测试通过。

有任何想法吗？所有测试都是独立的，并且不共享测试类的任何属性或变量，所以我看不出它们如何相互踩踏。

编辑：我使用反射调用消息通常会触发的视图模型上的受保护方法；这得到了我想要的代码覆盖率，它只是没有验证视图模型是否正确响应消息。

编辑 2：废话，视图模型上的 PropertyChanged 事件也发生了同样的事情。事件处理程序仅在测试独立运行或第一个运行时触发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:16:57.910

我不熟悉 SimpleMvvmToolkit，但我熟悉消息传递的概念。

不要使用`MessageBus.Default`. 修改您的 ViewModel 以具有构造函数参数`MessageBus`，或者`IMessageBus`如果存在，构造函数参数。现在您的测试将被隔离，因此您可以一次运行它们并且它们应该通过。

此外，如果`IMessageBus`接口存在，您可以对其进行 Mock，这将使您的 ViewModel 测试变得更加容易。

# bluetooth - BlueGiga BLE 开发工具

> ID：11992201
> 
> 赞同：7
> 
> 时间：2012-08-16T17:09:50.343
> 
> 标签：bluetooth, development-environment, bluetooth-lowenergy, bluegiga

我正在考虑试用[BlueGiga BLE112 套件](https://www.bluegiga.com/en-US/products/bluetooth-4.0-modules/ble112-bluetooth--smart-module/)来为 iOS 进行一些 BLE 开发。

我正在从 TI CC2540 密钥卡套件切换，因为我的 IAR Embedded Workbench 评估许可证已过期（30 天），并且该软件的许可费用为 2500 美元以上。

我想知道为BLE112编写代码的工具是什么；该网站提到了“BG Script”和“BG Profile Toolkit”，但我找不到任何有关这些工具的环境/许可的信息。它还提到为“8051”编写 C 代码（不确定这是什么）。我需要什么环境/编译器来编写该代码？另外，许可条款是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T20:57:30.987

您应该能够[在 Bluegiga 网站的支持部分](http://techforum.bluegiga.com/support)找到更多信息。注册后，您可以访问更多文档以及 Bluegiga 提供的软件和工具。

BGScript 是一种在 BLE112 芯片（除了 BLE 无线电之外还有一些 IO 和 ADC）上执行的脚本语言。

在更复杂的情况下，BLE112 可以通过串行线连接到微控制器。串行协议是一种专有协议 (BGAPI)，它允许访问芯片的所有功能（BLE、IO、ADC...）。Bluegiga 提供了该协议的良好文档和它的 C 实现（它相当紧凑并以标准 C 实现，因此它应该在各种环境中运行）。对于我们的应用程序，我们开发了一个也可以正常工作的 JAVA 实现。

[BLE112 文档和软件](http://www.bluegiga.com/en-US/products/bluetooth-4.0-modules/ble112-bluetooth--smart-module/documentation/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T19:32:26.797

这可能有点晚了，但我注意到很多人在使用 BlueGiga 的某些 API（特别是 1.1 API 中的 UART 和 I2C 接口）时遇到问题。

我在这里写了一些文章，涵盖了使用这两个 API 的一些复杂性：http: [//sureshjoshi.com/development/ble112-how-to-use-i2c/](http://sureshjoshi.com/development/ble112-how-to-use-i2c/)和 [http://sureshjoshi.com/development/ ble112-uart-watermarks-example/](http://sureshjoshi.com/development/ble112-uart-watermarks-example/)

快乐的蓝牙！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T05:56:27.620

如果您下载我在[http://forum.mkroll.mobi/viewtopic.php?f=7&t=495](http://forum.mkroll.mobi/viewtopic.php?f=7&t=495)链接到的文件，您将看到一个调用编译器的 build.bat 文件。那应该有帮助。

# python - Python 挂在 ssh 上

> ID：11992204
> 
> 赞同：3
> 
> 时间：2012-08-16T17:10:05.803
> 
> 标签：python, linux, ssh, freeze

我正在尝试直接在 ssh 上运行 python 脚本，如下所示：

```
ssh hostname python_script 
```

不幸的是，python 启动后什么都没有发生，事实上，即使在我与 SSH 断开连接后，远程创建的 python 进程仍保持“活动”状态。如果我尝试启动 python 解释器，也会发生同样的事情，但其他命令工作正常。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T17:37:25.140

试试`ssh -t hostname python_script`。默认情况下，`ssh`在给定程序运行时不会分配要与之交互的伪 tty（尽管如果您只是这样做的话`ssh hostname`）；`-t`告诉它这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:35:21.420

ssh -t 是个好建议。

您也可以尝试在代码中添加打印语句/函数，写入 /var/tmp 或其他任何文件中的某个文件，以查看它在做什么。

另一种查看进程正在做什么的方法是使用 Linux 的 strace 之类的东西：http: [//stromberg.dnsalias.org/~strombrg/debugging-with-syscall-tracers.html](http://stromberg.dnsalias.org/~strombrg/debugging-with-syscall-tracers.html)

例如：ssh remote.host.com 'strace -f -o /var/tmp/my_script.strace my_script'。然后检查 /var/tmp/my_script.strace 看看它卡在什么上面。读取 strace 输出并不总是那么简单，但至少它很有趣。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T17:16:33.097

SSH 不会导致运行 python 脚本出现问题。一般来说，需要注意的是环境变量的变化以及对标准输入/输出的任何期望，因为这些可能会导致类似于您所描述的症状。直接运行 python 将挂起，因为如果不运行脚本，python 期望能够与 stdin/stdout 交互。

测试基本环境是否正常工作的一种简单方法是创建一个测试程序 (test.py)，其中包含：

```
print "foo" 
```

然后

```
ssh hostname python test.py 
```

你应该得到“foo”作为回应。

# r - 自由缩放，但 x/y 中的每个面板范围相同

> ID：11992206
> 
> 赞同：10
> 
> 时间：2012-08-16T17:10:08.157
> 
> 标签：r, ggplot2

我尝试使用 aspect=1 进行自由缩放，但每个面板中的 x/y 范围相同。在下面的示例中，这意味着 b 中的 x 缩放应为 (-0.04,0.04)。

编辑：添加格子版本

```
library(ggplot2)
d = data.frame(x=rnorm(100),group=c("A","B"))
d$y = d$x+rnorm(100,0,0.5)
d[d$group=="B","x"]=d[d$group=="B","x"]/100
d[d$group=="B","y"]=d[d$group=="B","y"]/60
qplot(x,y,data=d,asp=1) + facet_wrap(~group,scale="free")

require(lattice)
xyplot(y~x|group, data=d,aspect=1,scales=list(relation="free"),
   prepanel=function(x,y){
     lims = c(min(x,y), max(x,y))
     list(xlim=lims,ylim=lims)
   } ) 
```

![在每个面板中，x 和 y 范围应该相同](../Images/a1db7806ca196064285bd58e75e62f0a.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T09:27:43.507

作为内部`ggplot2`使用的最新版本`gtable`，您可以很容易地完成此类任务：

```
d = data.frame(x=rnorm(100),group=c("A","B"))
d$y = d$x+rnorm(100,0,0.5)
d[d$group=="B","x"]=d[d$group=="B","x"]/100
d[d$group=="B","y"]=d[d$group=="B","y"]/60

# create plots for each level of group
p <- lapply(levels(d$group), 
  function(i) {
    dat <- subset(d, group == i)
    lim <- range(c(dat$x, dat$y))
    ggplot_gtable(ggplot_build(qplot(x,y,data=dat,asp=1) + 
      facet_wrap(~group,scale="free") + 
      coord_equal() +
      xlim(lim) + ylim(lim)))
    })

# tweaking margins
p[[1]] <- p[[1]][, -6]
p[[2]] <- p[[2]][, -(1:2)]

# draw it
grid.newpage()
grid.draw(cbind(p[[1]], p[[2]], size = "first")) 
```

![在此处输入图像描述](../Images/1fa77c38ed209115848fa7f1e4478755.png)

# html - 不同的 QFonts 可以分配给特定的 Unicode 字符吗？

> ID：11992207
> 
> 赞同：0
> 
> 时间：2012-08-16T17:10:12.573
> 
> 标签：html, unicode, fonts, internationalization, qt4

我需要在 QLabel 中的同一字符串中显示多个国际脚本。

例如 QLabel 可以显示：

> چاچي चाची ćāćī（ćāćā 的小字，qv），sf 姑姑（=ćaćī，qv）

上述字符串包括拉丁文字、波斯-阿拉伯文字和梵文（属于印度文字家族）。

每个脚本需要不同的字体系列和大小。例如，字符串中的第一个单词是 Urdu，并且需要能够显示的字体`ے`。此外，我可能想使用某种类型的书法（乌尔都语传统上使用“Nastaleeq”脚本）。此外，书法可能需要增加字体大小才能阅读（并非所有文字都像普通话象形文字一样属于规则的方形，如果您对国际文字的多样性知之甚少，请查看[Omniglot](http://www.omniglot.com/index.htm)。）以特定字体和大小显示的脚本。

目前，我为 QLabel 提供了一个复杂的 HTML 字符串，我通过指定用于字符串特定部分的字体和大小来逐位编写该字符串。

`<font family="SomeFamilyforUrdu" size="10>اردو</font> <font family="SomeFamilyforDevanagari" size="8">हिन्दी</font> <font family="FontforLatin" size=5>English</font>`

Qt4 也提供了`QLabel.setFont(QFont)`，但到目前为止我还没有看到任何根据脚本系列指定字体系列和大小的方法。

是否可以为 QFont 设置条件，以便根据它绘制到 QLabel 中的脚本应用不同的系列和大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:51:52.103

该[`QFontDatabase.families()`](http://doc-snapshot.qt-project.org/4.8/qfontdatabase.html#families)函数返回支持特定字体的列表[`Writing System`](http://doc-snapshot.qt-project.org/4.8/qfontdatabase.html#WritingSystem-enum)。

**编辑**

从根本上说，您的问题似乎与 unicode 有关，它支持将脚本名称分配给 unicode 代码点。从理论上讲，Qt 可以使用 unicode 数据库来确定它呈现的每个文本字符的脚本，并可能使用该信息对其应用不同的格式。

但是，似乎没有任何明显的 API 对此提供支持。

例如，[QChar](http://doc-snapshot.qt-project.org/4.8/qchar.html)类可能有一个`enum`用于[unicode 脚本名称](http://www.unicode.org/reports/tr24/tr24-4.html#Values)和一个`scriptName`函数，该函数将从它返回一个特定 unicode 字符的适当值，这似乎是合理的。但是在 Qt4 或 Qt5 中都没有这样的东西。

所以我要在这里伸出我的脖子，并猜测 html/css 是在这个时间点实现你想要的唯一方法。

**更新**

似乎 python 的[unicodedata](http://docs.python.org/library/unicodedata.html#module-unicodedata)模块也不支持脚本名称。

但是，[此答案](https://stackoverflow.com/a/9871358/984421)提供了一种解决方法，可以潜在地允许开发本土解决方案。

这是一个演示脚本，它`QLabel`使用上面答案中的[unicodedata2模块为 a 自动生成 html：](https://gist.github.com/2204527)

```
# -*- coding: utf8 -*-

import unicodedata2
from itertools import groupby
from PyQt4 import QtGui, QtCore

text = (u'چاچي चाची ćāćī (dim. of ćāćā, q.v.), '
        u's.f. A paternal aunt (=ćaćī, q.v.)')

markup = [
"""
<html>
<style type="text/css">
body {font-family: Sans Serif; font-size: 8pt}
span.arabic {font-family: ClearlyU Arabic; font-size: 18pt}
span.devanagari {font-family: ClearlyU Devanagari; font-size: 12pt}
</style>
<body>
"""
]

for script, group in groupby(text, unicodedata2.script):
    script = script.lower()
    chunk = ''.join(group)
    if script == 'common' or script == 'latin':
        markup.append(chunk)
    else:
        markup.append('<span class="%s">%s</span>' % (script, chunk))

markup.append(
"""
</body>
</html>
"""
)

class Window(QtGui.QWidget):
    def __init__(self):
        QtGui.QWidget.__init__(self)
        self.label = QtGui.QLabel(self)
        layout = QtGui.QVBoxLayout(self)
        layout.addWidget(self.label)
        self.label.setText(''.join(markup))

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.show()
    sys.exit(app.exec_()) 
```

# multidimensional-array - 迭代numpy多维数组的一列？

> ID：11992208
> 
> 赞同：0
> 
> 时间：2012-08-16T17:10:18.977
> 
> 标签：multidimensional-array, numpy

我有一个 (2, 500) numpy 数组，名为`county_data`. 我想遍历第一列，检查每个值是否等于 number `someNumber`，如果是，则将其行附加到名为`temp`.

到目前为止，这是我的代码：

```
for entry in county_data:       
    if entry[0] == someNumber:  
        temp.append(entry)  
    print temp 
```

这是我得到的错误：

```
 if entry[0] == code:
ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all() 
```

我不太清楚这意味着什么，`a.any()`and`a.all()`函数似乎并没有对数组中的每一行执行我想要的操作。如何编辑我的代码以检查数组每一行中的第一个条目是否匹配`someNumber`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:14:58.423

不要那样做。相反，一次访问所有行（即，*矢量化*您的代码）：

```
temp = county_data[county_data[:, 0] == someNumber] 
```

# jquery - 将字符串与存储的变量列表匹配

> ID：11992211
> 
> 赞同：2
> 
> 时间：2012-08-16T17:10:49.890
> 
> 标签：jquery, variables, pattern-matching

使用 JS/jQuery，最好的方法是什么？

我有 5 个变量：

```
var fruit1 = "apple";
var fruit2 = "mango";
var fruit3 = "orange";
var fruit4 = "banana";
var fruit5 = "melon"; 
```

然后我有一个带有某种水果的列表元素被点击：

```
<li id="banana">Banana</li> 
```

我在脚本中得到了它的 ID：

```
$("li").on("click", function() {
    var selectedfruit = $(this).attr("id");
}); 
```

如何`selectedfruit`与变量列表匹配，以便它返回`fruit4`我可以使用的东西？

第二个问题，我应该把我的变量列表放在一个数组中吗？

非常感谢。

**编辑：我很抱歉，但我犯了一个巨大的错误**

我需要`selectedfruit`使用变量**名**而不是变量**内容**来验证。

因此，标记将是这样的：

`<li id="fruit4">Mystery fruit</li>`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T17:14:09.200

是的，这绝对是数组的工作。

```
var fruits = ["apple", "mango", "orange", "banana", "melon"]; 
```

然后在您的点击处理程序中，您可以搜索此数组并获取其索引。

```
$("li").on("click", function() {
    // Note: This will return -1, if it's not in the array
    var selectedfruit = $.inArray($(this).attr("id"), fruits); // 3 (arrays are zero-indexed)
}); 
```

**更新**根据您的更新，我会改用一个对象。

```
var fruits = {
    fruit1: "apple",
    fruit2: "mango",
    fruit3: "orange",
    fruit4: "banana",
    fruit5: "melon"
}; 
```

然后您可以使用ID来获取值并进行比较。

```
$("li").on("click", function() {
    var selectedfruit = fruits[$(this).attr("id")];  // banana
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T17:13:35.893

您可以尝试以下方法：

```
var fruits = {
  fruit1 : "apple",
  fruit2 : "mango",
  fruit3 : "orange",
  fruit4 : "banana",
  fruit5 : "melon"
};

$("li").on("click", function() {
    var selectedfruit = $(this).attr("id");
    alert( fruits[selectedfruit] );
}); 
```

### 但是用数组

```
var fruits = ["apple", "mango", "orange", "banana", "melon"],
    selectedfruit  = $(this).attr("id");

$("li").on("click", function() {
    var index = $.inArray( fruits, selectedfruit  );
    if( index >= 0 ) // checking that fruit exists in the array, if not index === -1
       var fruitIndex = 'fruit' + (index + 1);
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T17:16:19.043

您可以使用 javascript 数组而不是单个变量吗？

```
var fruits=new Array("apple","mango","orange", "banana", "melon");
$.inArray("mango", fruits) 
```

看到这个[JsFiddle](http://jsfiddle.net/5phe4/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T17:13:48.903

尝试将变量设为数组：

```
var fruits = ["apple", "mango", "orange", "banana", "melon"]; 
```

然后使用以下命令获取数组的索引`indexOf()`：

```
$("li").on("click", function() {
    var fruitIndex = fruits.indexOf($(this).attr("id"));
}); 
```

由于某些浏览器不支持`indexOf()`，您可以使用以下命令强制其支持：

```
if (!Array.prototype.indexOf) { 
    Array.prototype.indexOf = function(obj, start) {
         for (var i = (start || 0), j = this.length; i < j; i++) {
             if (this[i] === obj) { return i; }
         }
         return -1;
    }
} 
```

然后，您可以像这样与单击的水果元素进行交互：

```
alert(fruits[fruitIndex]); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-16T17:14:15.630

如果将变量存储在数组中会更好。然后您可以使用 轻松找到匹配项`jQuery.inArray`。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-16T17:17:44.753

是的，你应该把你的变量放在一个数组中。在 jquery 中编码已经有一段时间了，但我想我可以试一试：

```
 var fruits[] = new Array(your variable values)
     $(document).ready(function() {
          //click handler event and then take the value of id attribute as you mentioned
          //iterate over the loop and then store index and do something with that if you 
          //want. 
     }); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-16T17:22:45.133

我以为他需要一些语法帮助；现在更新了。更好的答案已经存在：

```
var fruits = ["apple", "mango", "orange", "banana", "melon"];
$("li").click(function() {
    var selectedfruit = $(this).attr("id");
    for (i = 0; i < fruits.length; i++) {
        if (selectedfruit == "fruit" + (i+1)) {
            alert(fruits[i] + " is pressed");
        }
        }
    });​ 
```

# floating-point - 为什么 fmod(55.8,9.3) 在 55.8/9.3 =6 时返回 9.3？

> ID：11992217
> 
> 赞同：1
> 
> 时间：2012-08-16T17:11:30.927
> 
> 标签：floating-point, number-theory

我正在尝试使用 fmod 函数，但没有得到我期望的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T17:15:18.947

由于浮点不精确，它实际上返回 9.299999999999994。55.8 或 9.3 都不能精确地表示为以 2 为底的浮点数。

这是一个非常普遍的问题。一个很好的参考是[What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T17:20:06.893

像大多数十进制分数一样，这些数字不能完全表示为二进制浮点值。假设 最常见的实现`double`，实际值大约是：

```
55.799999999999997158 
```

和：

```
9.3000000000000007105 
```

这些不完全划分，结果`fmod`大约是：

```
9.2999999999999936051 
```

`9.3`显示到小数点后四舍五入。

这些值是使用以下 C++ 程序生成的：

```
#include <iostream>
#include <iomanip>
#include <cmath>

int main()
{
    std::cout << std::setprecision(20);

    double a = 55.8;
    double b = 9.3;

    std::cout << a << std::endl;
    std::cout << b << std::endl;
    std::cout << fmod(a,b) << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T17:46:14.630

您期望它接近 6 的事实意味着您的问题不是您不了解舍入，而是您不知道`fmod`实际做了什么。

`fmod`是除法的[余数](http://en.wikipedia.org/wiki/Remainder)，而不是商。也就是说，它是减去除数的整数个副本后剩下的数量。在数学术语中，`a = q*b + r`、 其中`q = int(a/b)`和`r = fmod(a, b)`。

如果 a 和 b 正好是 55.8 和 9.3，那么 a/b 正好是 6，余数是 0。因此，您期望结果为 0 是完全合理的，并且在某些平台上，这可能是您实际得到的结果。

但是，在大多数平台上，可能最接近 55.8 和 9.3 的近似值大约是 55.799999999999997158 和 9.3000000000000007105（请参阅 Mark Ransom 的回答了解原因），这意味着商是 5.999999999999999，这意味着商的整数部分是 5，这意味着余数为 55.799999999999997158 - 9.3000000000000007105 * 5 = 9.299999999999997，显示为 9.3。

如果你仔细想想，这是有道理的。如果右余数为0，一个小的舍入误差不能使余数为1或6；实际上，所有可能的值都非常接近 0 或非常接近 9.3。（如果有帮助，请考虑模 9.3 算术，其中 0 和 9.3 是相同的数字。）

# objective-c - 如果对象相同，如何检查 NSMutableArray 中对象的索引？

> ID：11992229
> 
> 赞同：0
> 
> 时间：2012-08-16T17:12:15.300
> 
> 标签：objective-c, cocos2d-iphone, enumeration

我有一个 NSMutableArray 的 NSNumbers。我枚举了数组，对于其中的每个“1”，我需要检查它在数组中的位置并做一些事情。我就是这样做的：

```
for (NSNumber *number in fieldArray) {

    int temp = [number intValue];
    if (temp != 0)
    {
        if (temp == 1)
        {
            switch ([fieldArray indexOfObject:number]) {
                case 0:
                {
                    CCSprite *x = [CCSprite spriteWithFile:@"x.png"];
                    x.position = ccp(53,265);
                    [self addChild:x];
                }   
                    break;
                case 1:
                { 
                 //this code never gets called
                } 
```

因为我在数组的零位置有一个“1”，所以我的 switch 语句除了数字 1 永远不会去任何地方。我该如何解决这个问题？如何检查数组单元格中东西的位置？

为什么我需要这个以及为什么我这样做。我正在做一个井字游戏。我将字段存储在 NSMutableArray 中，容量为 9。因此数组中的每个数字都是游戏场上的一个单元格。如果单元格为空，则该位置的数组保持为零，如果有 x - 数组中有 1 个值，如果单元格中有 0 - 数组保持 2。当绘制时间到来时，我遍历数组并检查什么我看到的价值。如果值为零，我什么也不做，但如果是一，我在某个位置绘制。也许有更简单的方法可以做到这一点，如果没有办法解决我的问题，你可以指出我的方向。

编辑：工作解决方案是将枚举更改为通常的循环。

```
 for (int i = 0; i < 9; i++) {

        int temp = [[fieldArray objectAtIndex:i] intValue];
        if (temp == 1)
        {
            switch (i) {
                case 0:
                {
                    CCSprite *x = [CCSprite spriteWithFile:@"x.png"];
                    x.position = ccp(53, 265);
                    [self addChild:x z:1];
                    break;
                }

                case 1:
                {
                    CCSprite *x = [CCSprite spriteWithFile:@"x.png"];
                    x.position = ccp(159, 265);
                    [self addChild:x z:1];
                    break;
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:34:20.730

我想我会避免枚举这个，先查看数组位置，然后查看内容。（这没有在编译器中检查，但应该给你一个想法。我认为可以编写`positionOfSpriteForIndex:`方法来返回正确的`ccp()`值。）

```
for (int idx = 0; idx < [fieldArray count]; idx++) {
    NSNumber *number = [fieldArray objectAtIndex:idx];
    CCSprite *x = nil;
    switch ([number intValue]) {
        case 1:
            x = [CCSprite spriteWithFile:@"x.png"];
            x.position = [self positionOfSpriteForIndex:idx];
            [self addChild:x];
            break;

        case 2:
            x = [CCSprite spriteWithFile:@"o.png"];
            x.position = [self positionOfSpriteForIndex:idx];
            [self addChild:x];
            break;

        default:
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:32:14.290

看起来你需要把你`break`的括号放在里面。

```
switch ([fieldArray indexOfObject:number]) {
                case 0:
                {
                    CCSprite *x = [CCSprite spriteWithFile:@"x.png"];
                    x.position = ccp(53,265);
                    [self addChild:x];
                break;
                } 
```

# django - django formwizard django-paypal

> ID：11992234
> 
> 赞同：2
> 
> 时间：2012-08-16T17:12:29.670
> 
> 标签：django, django-paypal

我正在努力让 PayPalPaymentsForm 在 FormWizard 中呈现。

[ django 1.3，dcramer 的 django-paypal ]

前 2 个表单渲染和验证很好，但我没有技能将初始数据传递给表单并使用 form.sandbox() 渲染表单

```
# urls.py
...
(r'^signup/$', SignUpWizard([SignUpForm1, SignUpForm2, SignUpForm3])),
...

# forms.py
...
class SignUpForm3(PayPalPaymentsForm):
    pass

class SignUpWizard(FormWizard):

def done(self, request, form_list):
    return HttpResponseRedirect('/signup/success/') 
```

我已经查看了 render_template() FormWizard 方法，但我的任何努力都没有奏效。

所以，我在兜圈子没有成功。任何指针最受赞赏。

# html - 用 a 标签包围 li 标签是不好的做法吗？

> ID：11992236
> 
> 赞同：1
> 
> 时间：2012-08-16T17:12:41.700
> 
> 标签：html, css, coding-style

例如：

```
<ul>
<a href="http://google.com"><li id="someId"></li></a>
...
...
...
</ul> 
```

这是我现有的 css 样式的快速破解。我想知道是否应该重构它并将 a 标签放在里面。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T17:13:11.823

那是无效的 HTML。

不要这样做。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-16T17:19:51.680

唯一允许作为 UL 子元素的元素是 LI。您必须将锚点包裹在 LI 的内容上，而不是 LI 本身。

即使 HTML5 的新规则允许在块级元素周围使用锚点，您仍然必须将锚点放在 LI 本身中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T17:21:05.000

如果解决方法是使`<li>`元素可点击，您可以在 上设置一个点击处理程序，`<li>`并使用一些 css 样式，使其看起来可点击。如果您使用的是 jQuery 库，则可以执行以下操作以将点击处理程序关联到`<li>`元素。

```
$("#someId").click(function(e) {
    // handle the click event here
}); 
```

如果您希望所有`<li>`元素都使用它，则可以基于可以标记到所有`<li>`元素的 css 类设置选择器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T17:18:45.017

下面是 HTML 的示例：但不知道您要完成什么。

```
<UL>
      <LI><A HREF="example.com">SomeID</A></LI>
</UL> 
```

# asp.net - 如何更新扩展 Microsoft.Web.Mvc.DataAnnotations.DataAnnotationsModelBinder 的旧 MVC 应用程序？

> ID：11992238
> 
> 赞同：0
> 
> 时间：2012-08-16T17:12:49.493
> 
> 标签：asp.net, asp.net-mvc, model-binding

我正在更新旧的 ASP.NET MVC 应用程序以使用 4.0 框架，但我不确定如何处理自定义 ModelBinders。它们扩展了 Microsoft.Web.Mvc.DataAnnotations.DataAnnotationsModelBinder，在 4.0 中似乎不存在，它们在 global.asax 中注册。

实现特定绑定验证规则的最佳方式是什么？我应该继续使用自定义模型绑定器吗？如果是这样，我应该继承（或装饰）的默认活页夹是什么？或者我应该创建自定义验证属性吗？或者是其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:19:56.240

> 我应该继续使用自定义模型绑定器吗？

如果不解释您的应用程序做了什么以及为什么之前需要这个自定义模型绑定器，就不可能说出来。

> 如果是这样，我应该继承（或装饰）的默认活页夹是什么？

默认模型绑定器是：[`System.Web.Mvc.DefaultModelBinder`](http://msdn.microsoft.com/en-us/library/system.web.mvc.defaultmodelbinder.aspx)它实现了[`IModelBinder`](http://msdn.microsoft.com/en-us/library/system.web.mvc.imodelbinder.aspx)接口，但您在创建自定义模型绑定器时很少需要直接实现接口，因为默认模型绑定器已经包含很多功能。

> 或者我应该创建自定义验证属性吗？

如果您正在进行验证，您确实可以创建从[ValidationAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.validationattribute.aspx)或某些现有数据注释派生的验证属性。或者，如果您像我一样可以使用[FluentValidation.NET](http://fluentvalidation.codeplex.com/)。

所以，正如你所看到的，这一切都取决于。

# android - 如何为图库中的每个图像添加描述

> ID：11992239
> 
> 赞同：0
> 
> 时间：2012-08-16T17:12:49.653
> 
> 标签：android, android-layout, android-intent

我有一个`GalleryView`带有一些图片的，我想要一个`TextView`随图片变化的。谁能告诉如何在每张图片中添加描述。我是 android 新手。任何帮助或指导

这是我的代码：

xml:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>

<Gallery 
android:id="@+id/Gallery01" 
android:layout_width="fill_parent" 
android:layout_height="wrap_content"></Gallery>
<ImageView 
android:id="@+id/ImageView01" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content"></ImageView>

</LinearLayout> 
```

爪哇：

```
import android.app.Activity;
import android.content.Context;
import android.content.res.TypedArray;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.ImageView;
import android.widget.Toast;
import android.widget.AdapterView.OnItemClickListener;

public class GalleryView extends Activity {
Integer[] pics = {
        R.drawable.antartica1,
        R.drawable.antartica2,
        R.drawable.antartica3,
        R.drawable.antartica4,
        R.drawable.antartica5,
        R.drawable.antartica6,
        R.drawable.antartica7,
        R.drawable.antartica8,
        R.drawable.antartica9,
        R.drawable.antartica10
};
ImageView imageView;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Gallery ga = (Gallery)findViewById(R.id.Gallery01);
    ga.setAdapter(new ImageAdapter(this));

    imageView = (ImageView)findViewById(R.id.ImageView01);
    ga.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            Toast.makeText(getBaseContext(), 
                    "You have selected picture " + (arg2+1) + " of Antartica", 
                    Toast.LENGTH_SHORT).show();
            imageView.setImageResource(pics[arg2]);

        }

    });

}

public class ImageAdapter extends BaseAdapter {

    private Context ctx;
    int imageBackground;

    public ImageAdapter(Context c) {
        ctx = c;
        TypedArray ta = obtainStyledAttributes(R.styleable.Gallery1);
        imageBackground = ta.getResourceId(R.styleable.Gallery1_android_galleryItemBackground, 1);
        ta.recycle();
    }

    public int getCount() {

        return pics.length;
    }

    public Object getItem(int arg0) {

        return arg0;
    }

    public long getItemId(int arg0) {

        return arg0;
    }

    public View getView(int arg0, View arg1, ViewGroup arg2) {
        ImageView iv = new ImageView(ctx);
        iv.setImageResource(pics[arg0]);
        iv.setScaleType(ImageView.ScaleType.FIT_XY);
        iv.setLayoutParams(new Gallery.LayoutParams(150,120));
        iv.setBackgroundResource(imageBackground);
        return iv;
    }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:03:32.750

如果您想要`TextView`在 中选择图像时更改其文本`Gallery`。这`TextView`将在 之外`Galllery`，您将在选择图库项目时更改其内容。下面的代码可能会给你一个提示。

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>

<Gallery 
android:id="@+id/Gallery01" 
android:layout_width="fill_parent" 
android:layout_height="wrap_content"></Gallery>
<ImageView 
android:id="@+id/ImageView01" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content"></ImageView>

<TextView 
android:id="@+id/TextView01" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content"
android:layout_below="@+id/ImageView01"></TextView >

</LinearLayout> 
```

在您的 java 代码中，您必须设置一个`onIteSelectedListener()`将更新`TextView`：

1）初始化`TextView`：

```
 TextView textView = (TextView)findViewById(R.id.TextView01); 
```

2)设置`onitemSelectedListener()`:`Gallery`

```
 ga.setOnItemClickListener(galleryOnItemSelectedListener); 
```

3）你`OnItemSelectedListener()`会喜欢：

```
OnItemSelectedListener galleryOnItemSelectedListener = new OnItemSelectedListener() {

    @Override
    public void onItemSelected(AdapterView<?> arg0, View view, int position,
            long arg3) {
            // update the TextView here depending on the position of item selected
            // from a description array or tag value from view.
            // i.e texteView.setText(descriptions[position]);

    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }
}; 
```

# php - 多次保存 URL 中的图像

> ID：11992241
> 
> 赞同：-1
> 
> 时间：2012-08-16T17:12:56.160
> 
> 标签：php

我正在制作一个将内容（图像）放到我的网站上的爬虫，我制作了一个脚本，可以抓取并将 URL 保存到图像中，但现在我需要将图像上传到我的服务器，以便我可以在我的网站。

我见过有人说应该使用 file_put_contents 但你必须指定图像名称和 ext 但它会是动态的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:17:59.633

你可以使用[file_get_contents()](http://us.php.net/file_get_contents)和[file_put_contents()](http://us.php.net/file_put_contents)

```
$image = 'http://example.org/image.jpg';
$filename = basename($image);
$content = file_get_contents($image);
file_put_contents('/path/to/your/dir/'.$filename, $content); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:20:03.487

使用`file_get_contents`and`file_put_contents`可能是最简单的方法。

为避免冲突（同名文件），您可以将 url 设为文件名的一部分：

假设一个 URL 数组：

```
$path = '/path/to/image/folder/';
$urls = array(
    'http://www.somesite.no/some_image.jpg',
    'http://www.someothersite.no/some_other_image.jpg',
    'http://www.someothersite.no/another_image.jpg'
);
foreach ($urls as $url) {
    $file_content = file_get_contents($url);
    $filename = preg_replace("/[^a-zA-Z0-9 ]/", "", $url);
    $filename = str_replace(" ", "-", $filename);
    file_put_contents($path.$filename, $file_content);
} 
```

**文档**

*   `file_get_contents`- [http://www.php.net/manual/en/function.file-get-contents.php](http://www.php.net/manual/en/function.file-get-contents.php)
*   `file_put_contents`- [http://www.php.net/manual/en/function.file-put-contents.php](http://www.php.net/manual/en/function.file-put-contents.php)
*   `preg_replace`- [http://php.net/manual/en/function.preg-replace.php](http://php.net/manual/en/function.preg-replace.php)
*   `str_replace`- [http://php.net/manual/en/function.str-replace.php](http://php.net/manual/en/function.str-replace.php)

# javascript - JavaScript 在新选项卡或窗口中打开/显示当前页面

> ID：11992243
> 
> 赞同：2
> 
> 时间：2012-08-16T17:12:58.590
> 
> 标签：javascript, html, internet-explorer

是否可以在页面内的新窗口或选项卡中打开页面？

是的，我的意思是**当前的**HTML 页面本身。不是这样的另一个人的电话：

```
window.open('page.html','_blank'); 
```

可能是 JS 和`<body onLoad=...>`操作。

需要这个来修改相当复杂的 CGI，其中只有几个动作应该在新窗口中打开。无法修改代码，所以只需要纯 HTML+JS 解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T17:14:31.927

是的，只需将当前地址传递给 window.open()：

```
window.open(window.location.href, '_blank'); 
```

[**代码示例**](https://gist.github.com/3371881)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:23:43.487

```
if(!window.opener){
    window.open(window.location.href,'_blank'); 
} 
```

# inheritance - 将接口限制为特定类或将属性/声明限制为特定类+接口

> ID：11992244
> 
> 赞同：0
> 
> 时间：2012-08-16T17:13:01.100
> 
> 标签：inheritance, interface, strict

我有一个接口 IDataControl：

```
public interface IDataControl
{
    ...
} 
```

然后，我有一个带有 List<IDataControl> 变量的类。

```
List<IDataControl> items; 
```

问题是当我尝试将此集合的元素添加到另一个表单或另一个控件的“控件”属性中时：

```
panel.Controls.Add(items[i]); 
```

IDE 告诉我“最好的重载方法匹配......”因为“IDataControl”不是从“Control”继承的。

我理解这个错误，我知道我可以做一些铸造，比如：

```
panel.Controls.Add(   (Control)items[i]   ); 
```

但是，我想知道是否有一种“更清洁”的方式来做到这一点，不需要强制转换，也有严格的类型验证。

那么，是否可以表明“IDataControl”只能由 Control 派生对象实现？

```
public interface IDataControl where this : Control
{
    ...
} 
```

或者，是否可以声明一个类和一个接口的变量？
像这样的东西：

```
Control:IDataControl item;
List<Control:IDataControl> items; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:22:07.717

正如您已经了解的那样，System.Windows.Forms.Control 对您的界面一无所知。

* * *

```
public interface IDataControl where this : Control
{
    ...
} 
```

你不能那样做。它适用于[泛型类型约束](http://msdn.microsoft.com/en-us/library/bb384067.aspx)， 接口也不能从类继承。接口具有以下属性：

*   接口就像一个抽象基类：任何实现接口的非抽象类型都必须实现它的所有成员。

*   接口不能直接实例化。

*   接口可以包含事件、索引器、方法和属性。

*   接口不包含方法的实现。

*   类和结构可以实现多个接口。

*   一个接口本身可以从多个接口继承。

您需要的可能是下一个：当您创建控件时，从您的界面继承它们。

在此主机控件中，您需要创建一个方法

```
private void AddDataControl(IDataControl dataControl)
{
   if(IDataControl is Control){
      //your logic
   }
   else{
      throw new ArgumentException();
   }
} 
```

这只是一般的方法。取决于你的代码。

# c# - C# - 保存自定义配置

> ID：11992248
> 
> 赞同：1
> 
> 时间：2012-08-16T17:13:15.580
> 
> 标签：c#

我需要在我的 app.config 中的一个自定义配置部分中更新一个值。有没有一个很好的例子来说明如何做到这一点？

```
<mySection>
    <level1>
        <add data1="444"/>
    </level1>
</mySection> 
```

我想以编程方式将 444 更新为 555。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T17:20:16.017

假设您的配置存储在 application.exe.config 中，以下应该可以工作。

```
void ModifyLevel1Value(int newValue)
{
    Configuration exeConfiguration = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
    MySection section = (MySection)exeConfiguration.GetSection("mySection");

    // Modify value, or whatever is sensible in your program
    section.LevelsCollection["data1"] = newValue;

    exeConfiguration.Save();
} 
```

我不确定这是否适用于 web.config，因为我对 Web 应用程序及其配置几乎没有经验。

此技术将重写配置文件，但不会刷新任何内部配置文件缓存。要强制重新加载配置文件（这在您的应用程序中可能不是问题），您可以调用以下静态方法。

```
ConfigurationManager.RefreshSection(section); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:22:44.580

您可以使用[linq to xml](http://msdn.microsoft.com/en-us/library/bb387098.aspx)来查找要更改的元素，您应该获取一个[XElement](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.aspx)对象，根据需要进行更改，然后保存。

# php - 如何使用 php 运行 shell 脚本

> ID：11992250
> 
> 赞同：0
> 
> 时间：2012-08-16T17:13:25.943
> 
> 标签：php, linux, shell, background

我有一个 php 文件

```
<?php
$op=exec("/usr/bin/sh /home/muralik/www/html/testing/testin.sh >> /home/muralik/www/html/testing/abc.log 2>&1 &",$rs);
echo "OP = ".$op;
echo "<br>RS = <pre>";
print_r($rs);
echo "</pre>"
?> 
```

**testin.sh**

```
while(true)
do
echo "standard output"
echo "abc"
sleep 2
done 
```

当我在 localhost 或 Web 服务器中打开 php 文件时。shell 脚本没有运行。

我应该怎么办。提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:22:52.087

我相信你的脚本正在运行，你只是没有看到输出？

您在 exec 中运行的命令将 STDOUT 和 STDERR 都重定向到 abc.log：

```
/usr/bin/sh /home/muralik/www/html/testing/testin.sh >> /home/muralik/www/html/testing/abc.log 2>&1 
```

因为一切都被重定向了，所以 $rs 中不会有任何内容，并且 $op 将是空的，并且执行的命令中不会有最后一行。

此外，您的 shell 脚本将在无限循环中运行，这意味着它永远不会返回任何内容，这意味着 exec() 在等待执行完成时永远不会返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:25:37.757

通常（出于安全原因）从浏览器运行的脚本不会运行 shell 命令。

为了使它工作，您需要更改您的 .htaccess 文件（这将告诉您的服务器将您的脚本视为应用程序）

在 .htaccess 中添加以下行：

```
Options ExecCGI 
AddHandler cgi-script .php 
```

这将允许 CGI 文件夹中的任何 php 文件作为应用程序运行

# arrays - 将指针传递给字符串

> ID：11992255
> 
> 赞同：0
> 
> 时间：2012-08-16T17:13:44.753
> 
> 标签：arrays, pointers, printf, strtok

我有一个指针，我使用 sprintf 将它传递给一个字符串，但是当我尝试访问字符串中的元素时，我遇到了麻烦。

我想要的是如果我有一个指向字符串的指针`abcde`来创建一个新字符串

```
seg[5]="a,b,c,d,e" 
```

这样当我打电话时`seg[0]`我得到`"a".`

我在下面有一些代码

```
 char *pch5;
     char seg1[128];

     pch5=strtok(seg,",");
                                if(pch5!=NULL){
                                sprintf(seg1,"%s",pch5);
                                    printf("%s",seg1[0]);
                                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:19:47.403

您的 printf 错误，您使用的是 %s 格式，但您想要的是 %c。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:20:42.597

seg[5] 这里只保存字符串 "a,b,c"，因为 strlen("a,b,c") == 5。但是如果你想要完整的字符串使用如下：

seg[] = "a,b,c,d,e";

# android - 如何从 ListView 填充活动

> ID：11992263
> 
> 赞同：0
> 
> 时间：2012-08-16T17:14:11.353
> 
> 标签：android, android-listview

我正在开发一个应用程序，它从 MYSQL 数据库返回数据并在列表视图中显示结果。这由名称、地址和编号组成。当列表视图中的一个项目被选中时，我希望它打开另一个页面，显示您单击的项目列表的详细信息。我该怎么做呢？我知道我将不得不使用 onListItemClick 方法，但是如何创建一个页面模板，该模板将加载您单击的列表中任何项目的信息？谢谢

这是我用来连接数据库并查询它然后在列表视图中显示结果的代码：

```
public class HttpExample extends ListActivity {

TextView httpStuff;
ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    // setContentView(R.layout.httpex);
    setContentView(R.layout.listplaceholder);
    httpStuff = (TextView) findViewById(R.id.tvHttp);

    GetMethodEx test = new GetMethodEx();
    String returned;
    try {
        returned = test.getInternetData();
        httpStuff.setText(returned);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    ListAdapter adapter = new SimpleAdapter(this, mylist, R.layout.main,
            new String[] { "name", "address", "number" }, new int[] {
                    R.id.item_title, R.id.item_subtitle, R.id.item_number });

    setListAdapter(adapter);

}

public class GetMethodEx {

    public String getInternetData() throws Exception {

        BufferedReader in = null;
        String data = "";
        String returnString = "";

        // httpGet

        try {

            HttpClient client = new DefaultHttpClient();
            URI website = new URI("http://192.168.0.10/connect.php");
            HttpGet request = new HttpGet();
            request.setURI(website);
            HttpResponse response = client.execute(request);
            in = new BufferedReader(new InputStreamReader(response
                    .getEntity().getContent()));
            StringBuffer sb = new StringBuffer("");
            String l = "";
            String nl = System.getProperty("line.separator");

            while ((l = in.readLine()) != null) {
                sb.append(l + nl);
            }
            in.close();
            data = sb.toString();
            // return data;
        } catch (Exception e) {
            Log.e("log_tag", "Error converting result " + e.toString());
        }
        // parse json data
        try {
            JSONArray jArray = new JSONArray(data);
            for (int i = 0; i < jArray.length(); i++) {
                HashMap<String, String> map = new HashMap<String, String>();
                JSONObject json_data = jArray.getJSONObject(i);

                map.put("id", String.valueOf(i));
                map.put("name",
                        "ShopName:" + json_data.getString("shopname"));
                map.put("address",
                        "Address: " + json_data.getString("address"));
                map.put("number", "Number: " + json_data.getInt("number"));
                mylist.add(map);

            }
        } catch (JSONException e) {
            Log.e("log_tag", "Error parsing data " + e.toString());
        }
        return returnString;

    }

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:20:19.400

您要做的是通过 Intents 传递数据。

在 onListItemClick 方法中，有以下代码：

```
Intent intent = new Intent(getContext(), NewActivity.class);
intent.putExtra("NAME", name);
intent.putExtra("ADDRESS", address);
// etc

startActivity(intent) 
```

然后，在新 Activity 的 onCreate() 方法中，执行以下操作：

```
Intent intent = getIntent();
String name = intent.getStringExtra("NAME");
// ...etc 
```

如需更多信息，请参阅 Android 培训网站上的相关课程，名为“[开始另一个活动”](http://developer.android.com/training/basics/firstapp/starting-activity.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:23:28.043

你有一些选择。[你可以通过intent extras](http://developer.android.com/reference/android/content/Intent.html)传递你需要传递的相关数据

Activity 接收 Intent Extras 的一种常见模式是创建一个静态方法来让该 Activity 创建 Extras 包。像这样的东西：

```
public static Intent createIntent(Activty activity, String myExtra)
    {
        Intent intent = new Intent(activity, MyActivity.class);
        if(myExtra != null) intent.putExtra(MY_EXTRA, myExtra);
        return intent;
    } 
```

您可以将更复杂的对象作为附加对象通过[序列化](http://developer.android.com/reference/java/io/Serializable.html)或[打包](http://developer.android.com/reference/android/os/Parcelable.html)来传递。祝你好运！

# sql - Handling inheritance with overriding efficiently

> ID：11992267
> 
> 赞同：51
> 
> 时间：2012-08-16T17:14:28.733
> 
> 标签：sql, sql-server, sql-server-2008, tree

I have the following two data structures.

**First**, a list of properties applied to object triples:

```
Object1  Object2  Object3 Property  Value
     O1       O2       O3       P1  "abc"
     O1       O2       O3       P2  "xyz"
     O1       O3       O4       P1  "123"
     O2       O4       O5       P1  "098" 
```

**Second**, an inheritance tree:

```
O1
    O2
        O4
    O3
        O5 
```

Or viewed as a relation:

```
Object    Parent
    O2        O1
    O4        O2
    O3        O1
    O5        O3
    O1      null 
```

The semantics of this being that O2 inherits properties from O1; O4 - from O2 and O1; O3 - from O1; and O5 - from O3 and O1, in that order of precedence.
*NOTE 1*: I have an efficient way to select all children or all parents of a given object. This is currently implemented with left and right indexes, but hierarchyid could also work. This does not seem important right now.
*NOTE 2*: I have tiggers in place that make sure that the "Object" column always contains all possible objects, even when they do not really have to be there (i.e. have no parent or children defined). This makes it possible to use `inner join`s rather than severely less effiecient `outer join`s.

**The objective is**: Given a pair of (Property, Value), return all object triples that have that property with that value either defined explicitly or inherited from a parent.

*NOTE 1*: An object triple `(X,Y,Z)` is considered a "parent" of triple `(A,B,C)` when it is true that either `X = A` or `X is a parent of A`, and the same is true for `(Y,B)` and `(Z,C)`.
*NOTE 2*: A property defined on a closer parent "overrides" the same property defined on a more distant parent.
*NOTE 3*: When (A,B,C) has two parents - (X1,Y1,Z1) and (X2,Y2,Z2), then (X1,Y1,Z1) is considered a "closer" parent when:
(a) X2 is a parent of X1, or
(b) X2 = X1 and Y2 is a parent of Y1, or
(c) X2 = X1 and Y2 = Y1 and Z2 is a parent of Z1

In other words, the "closeness" in ancestry for triples is defined based on the first components of the triples first, then on the second components, then on the third components. This rule establishes an unambigous partial order for triples in terms of ancestry.

For example, given the pair of (P1, "abc"), the result set of triples will be:

```
 O1, O2, O3     -- Defined explicitly
 O1, O2, O5     -- Because O5 inherits from O3
 O1, O4, O3     -- Because O4 inherits from O2
 O1, O4, O5     -- Because O4 inherits from O2 and O5 inherits from O3
 O2, O2, O3     -- Because O2 inherits from O1
 O2, O2, O5     -- Because O2 inherits from O1 and O5 inherits from O3
 O2, O4, O3     -- Because O2 inherits from O1 and O4 inherits from O2
 O3, O2, O3     -- Because O3 inherits from O1
 O3, O2, O5     -- Because O3 inherits from O1 and O5 inherits from O3
 O3, O4, O3     -- Because O3 inherits from O1 and O4 inherits from O2
 O3, O4, O5     -- Because O3 inherits from O1 and O4 inherits from O2 and O5 inherits from O3
 O4, O2, O3     -- Because O4 inherits from O1
 O4, O2, O5     -- Because O4 inherits from O1 and O5 inherits from O3
 O4, O4, O3     -- Because O4 inherits from O1 and O4 inherits from O2
 O5, O2, O3     -- Because O5 inherits from O1
 O5, O2, O5     -- Because O5 inherits from O1 and O5 inherits from O3
 O5, O4, O3     -- Because O5 inherits from O1 and O4 inherits from O2
 O5, O4, O5     -- Because O5 inherits from O1 and O4 inherits from O2 and O5 inherits from O3 
```

Note that the triple (O2, O4, O5) is absent from this list. This is because property P1 is defined explicitly for the triple (O2, O4, O5) and this prevents that triple from inheriting that property from (O1, O2, O3). Also note that the triple (O4, O4, O5) is also absent. This is because that triple inherits its value of P1="098" from (O2, O4, O5), because it is a closer parent than (O1, O2, O3).

The straightforward way to do it is the following. First, for every triple that a property is defined on, select all possible child triples:

```
select Children1.Id as O1, Children2.Id as O2, Children3.Id as O3, tp.Property, tp.Value
from TriplesAndProperties tp

-- Select corresponding objects of the triple
inner join Objects as Objects1 on Objects1.Id = tp.O1
inner join Objects as Objects2 on Objects2.Id = tp.O2
inner join Objects as Objects3 on Objects3.Id = tp.O3

-- Then add all possible children of all those objects
inner join Objects as Children1 on Objects1.Id [isparentof] Children1.Id
inner join Objects as Children2 on Objects2.Id [isparentof] Children2.Id
inner join Objects as Children3 on Objects3.Id [isparentof] Children3.Id 
```

But this is not the whole story: if some triple inherits the same property from several parents, this query will yield conflicting results. Therefore, second step is to select just one of those conflicting results:

```
select * from
(
    select 
        Children1.Id as O1, Children2.Id as O2, Children3.Id as O3, tp.Property, tp.Value,
        row_number() over( 
            partition by Children1.Id, Children2.Id, Children3.Id, tp.Property
            order by Objects1.[depthInTheTree] descending, Objects2.[depthInTheTree] descending, Objects3.[depthInTheTree] descending
        )
        as InheritancePriority
    from
    ... (see above)
)
where InheritancePriority = 1 
```

The window function `row_number() over( ... )` does the following: for every unique combination of objects triple and property, it sorts all values by the ancestral distance from the triple to the parents that the value is inherited from, and then I only select the very first of the resulting list of values. A similar effect can be achieved with a `GROUP BY` and `ORDER BY` statements, but I just find the window function semantically cleaner (the execution plans they yield are identical). The point is, I need to select the closest of contributing ancestors, and for that I need to group and then sort within the group.

And finally, now I can simply filter the result set by Property and Value.

This scheme works. Very reliably and predictably. It has proven to be very powerful for the business task it implements.

The only trouble is, **it is awfuly slow**.
One might point out the join of seven tables might be slowing things down, but that is actually not the bottleneck.

According to the actual execution plan I'm getting from the SQL Management Studio (as well as SQL Profiler), the bottleneck is the sorting. The problem is, in order to satisfy my window function, the server has to sort by `Children1.Id, Children2.Id, Children3.Id, tp.Property, Parents1.[depthInTheTree] descending, Parents2.[depthInTheTree] descending, Parents3.[depthInTheTree] descending`, and there can be no indexes it can use, because the values come from a cross join of several tables.

**EDIT:** Per Michael Buen's suggestion (thank you, Michael), I have posted the whole puzzle to sqlfiddle [here](http://sqlfiddle.com/#!3/7c7a0/3/0). One can see in the execution plan that the Sort operation accounts for 32% of the whole query, and that is going to grow with the number of total rows, because all the other operations use indexes.

Usually in such cases I would use an indexed view, but not in this case, because indexed views cannot contain self-joins, of which there are six.

The only way that I can think of so far is to create six copies of the Objects table and then use them for the joins, thus enabling an indexed view.
Did the time come that I shall be reduced to that kind of hacks? The despair sets in.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T23:48:20.233

我有 3 个可能的答案。

您的问题的 sql 小提琴在这里：[http ://sqlfiddle.com/#!3/7c7a0/3/0](http://sqlfiddle.com/#!3/7c7a0/3/0)

我的答案的 sql 小提琴在这里：[http ://sqlfiddle.com/#!3/5d257/1](http://sqlfiddle.com/#!3/5d257/1)

警告：

1.  **查询分析器是不够的**- 我注意到许多答案被拒绝，因为他们的查询计划比原始查询更昂贵。分析仪只是指南。根据实际的数据集、硬件和用例，成本更高的查询可以比成本更低的查询更快地返回结果。您必须在您的环境中进行测试。
2.  **查询分析器是无效的**——即使您找到一种方法从查询中删除“最昂贵的步骤”，它通常对您的查询没有任何影响。
3.  **单独的查询更改很少能缓解架构/设计问题**- 一些答案被拒绝，因为它们涉及架构级别的更改，例如触发器和附加表。拒绝优化的复杂查询强烈表明问题出在底层设计或我的期望上。您可能不喜欢它，但您可能不得不接受该问题在查询级别无法解决。
4.  **索引视图不能包含 row_number()/partitition 子句**- 通过创建对象表的六个副本来解决自连接问题不足以让您创建建议的索引视图。我在[这个 sqlfiddle](http://sqlfiddle.com/#!3/44f7e)中尝试过。如果您取消注释最后一个“创建索引”语句，您将收到错误消息，因为您的视图“包含排名或聚合窗口函数”。

工作答案：

1.  **左连接而不是 row_number()** - 您可以使用使用左连接的查询来排除在树中被覆盖的结果。从这个查询中删除最后的“order by”实际上删除了一直困扰你的排序！此查询的执行计划仍然比您原来的更昂贵，但请参阅上面的免责声明 #1。
2.  **部分查询的索引视图**- 使用一些严肃的查询魔法（基于[此技术](http://jmkehayias.blogspot.com/2008/12/creating-indexed-view-with-self-join.html)），我为部分查询创建了一个索引视图。此视图可用于增强原始问题查询或答案#1。
3.  **实现为一个索引良好的表**- 其他人提出了这个答案，但他们可能没有很好地解释它。除非您的结果集非常大或您对源表进行非常频繁的更新，否则实现查询结果并使用触发器使它们保持最新是解决此类问题的完美方法。为查询创建视图后，测试此选项就很容易了。您可以重复使用答案 #2 来加快触发速度，然后随着时间的推移进一步改进它。（你说的是为你的表创建*六个*副本，先试试这个。它保证你关心的选择的性能会尽可能好。）

这是我从 sqlfiddle 得到的答案的架构部分：

```
Create Table Objects
(
    Id int not null identity primary key,
    LeftIndex int not null default 0,
    RightIndex int not null default 0
)

alter table Objects add ParentId int null references Objects

CREATE TABLE TP
(
    Object1 int not null references Objects,
    Object2 int not null references Objects,
    Object3 int not null references Objects,
    Property varchar(20) not null,
    Value varchar(50) not null
)

insert into Objects(LeftIndex, RightIndex) values(1, 10)
insert into Objects(ParentId, LeftIndex, RightIndex) values(1, 2, 5)
insert into Objects(ParentId, LeftIndex, RightIndex) values(1, 6, 9)
insert into Objects(ParentId, LeftIndex, RightIndex) values(2, 3, 4)
insert into Objects(ParentId, LeftIndex, RightIndex) values(3, 7, 8)

insert into TP(Object1, Object2, Object3, Property, Value) values(1,2,3, 'P1', 'abc')
insert into TP(Object1, Object2, Object3, Property, Value) values(1,2,3, 'P2', 'xyz')
insert into TP(Object1, Object2, Object3, Property, Value) values(1,3,4, 'P1', '123')
insert into TP(Object1, Object2, Object3, Property, Value) values(2,4,5, 'P1', '098')

create index ix_LeftIndex on Objects(LeftIndex)
create index ix_RightIndex on Objects(RightIndex)
create index ix_Objects on TP(Property, Value, Object1, Object2, Object3)
create index ix_Prop on TP(Property)
GO

---------- QUESTION ADDITIONAL SCHEMA --------
CREATE VIEW TPResultView AS
Select O1, O2, O3, Property, Value
FROM
(
    select Children1.Id as O1, Children2.Id as O2, Children3.Id as O3, tp.Property, tp.Value,

    row_number() over( 
        partition by Children1.Id, Children2.Id, Children3.Id, tp.Property
        order by Objects1.LeftIndex desc, Objects2.LeftIndex desc, Objects3.LeftIndex desc
    )
    as Idx

    from tp

    -- Select corresponding objects of the triple
    inner join Objects as Objects1 on Objects1.Id = tp.Object1
    inner join Objects as Objects2 on Objects2.Id = tp.Object2
    inner join Objects as Objects3 on Objects3.Id = tp.Object3

    -- Then add all possible children of all those objects
    inner join Objects as Children1 on Children1.LeftIndex between Objects1.LeftIndex and Objects1.RightIndex
    inner join Objects as Children2 on Children2.LeftIndex between Objects2.LeftIndex and Objects2.RightIndex
    inner join Objects as Children3 on Children3.LeftIndex between Objects3.LeftIndex and Objects3.RightIndex
) as x
WHERE idx = 1 
GO

---------- ANSWER 1 SCHEMA --------

CREATE VIEW TPIntermediate AS
select tp.Property, tp.Value 
    , Children1.Id as O1, Children2.Id as O2, Children3.Id as O3
    , Objects1.LeftIndex as PL1, Objects2.LeftIndex as PL2, Objects3.LeftIndex as PL3    
    , Children1.LeftIndex as CL1, Children2.LeftIndex as CL2, Children3.LeftIndex as CL3    
    from tp

    -- Select corresponding objects of the triple
    inner join Objects as Objects1 on Objects1.Id = tp.Object1
    inner join Objects as Objects2 on Objects2.Id = tp.Object2
    inner join Objects as Objects3 on Objects3.Id = tp.Object3

    -- Then add all possible children of all those objects
    inner join Objects as Children1 WITH (INDEX(ix_LeftIndex)) on Children1.LeftIndex between Objects1.LeftIndex and Objects1.RightIndex
    inner join Objects as Children2 WITH (INDEX(ix_LeftIndex)) on Children2.LeftIndex between Objects2.LeftIndex and Objects2.RightIndex
    inner join Objects as Children3 WITH (INDEX(ix_LeftIndex)) on Children3.LeftIndex between Objects3.LeftIndex and Objects3.RightIndex
GO

---------- ANSWER 2 SCHEMA --------

-- Partial calculation using an indexed view
-- Circumvented the self-join limitation using a black magic technique, based on 
-- http://jmkehayias.blogspot.com/2008/12/creating-indexed-view-with-self-join.html
CREATE TABLE dbo.multiplier (i INT PRIMARY KEY)

INSERT INTO dbo.multiplier VALUES (1) 
INSERT INTO dbo.multiplier VALUES (2) 
INSERT INTO dbo.multiplier VALUES (3) 
GO

CREATE VIEW TPIndexed
WITH SCHEMABINDING
AS

SELECT tp.Object1, tp.object2, tp.object3, tp.property, tp.value,
    SUM(ISNULL(CASE M.i WHEN 1 THEN Objects.LeftIndex ELSE NULL END, 0)) as PL1,
    SUM(ISNULL(CASE M.i WHEN 2 THEN Objects.LeftIndex ELSE NULL END, 0)) as PL2,
    SUM(ISNULL(CASE M.i WHEN 3 THEN Objects.LeftIndex ELSE NULL END, 0)) as PL3,
    SUM(ISNULL(CASE M.i WHEN 1 THEN Objects.RightIndex ELSE NULL END, 0)) as PR1,
    SUM(ISNULL(CASE M.i WHEN 2 THEN Objects.RightIndex ELSE NULL END, 0)) as PR2,
    SUM(ISNULL(CASE M.i WHEN 3 THEN Objects.RightIndex ELSE NULL END, 0)) as PR3,
    COUNT_BIG(*) as ID
    FROM dbo.tp
    cross join dbo.multiplier M 
    inner join dbo.Objects 
    on (M.i = 1 AND Objects.Id = tp.Object1)
    or (M.i = 2 AND Objects.Id = tp.Object2)
    or (M.i = 3 AND Objects.Id = tp.Object3)
GROUP BY tp.Object1, tp.object2, tp.object3, tp.property, tp.value
GO

-- This index is mostly useless but required
create UNIQUE CLUSTERED index pk_TPIndexed on dbo.TPIndexed(property, value, object1, object2, object3)
-- Once we have the clustered index, we can create a nonclustered that actually addresses our needs
create NONCLUSTERED index ix_TPIndexed on dbo.TPIndexed(property, value, PL1, PL2, PL3, PR1, PR2, PR3)
GO

-- NOTE: this View is not indexed, but is uses the indexed view 
CREATE VIEW TPIndexedResultView AS
Select O1, O2, O3, Property, Value
FROM
(
    select Children1.Id as O1, Children2.Id as O2, Children3.Id as O3, tp.Property, tp.Value,

    row_number() over( 
        partition by tp.Property, Children1.Id, Children2.Id, Children3.Id
        order by tp.Property, Tp.PL1 desc, Tp.PL2 desc, Tp.PL3 desc
    )
    as Idx

    from TPIndexed as TP WITH (NOEXPAND)

    -- Then add all possible children of all those objects
    inner join Objects as Children1 WITH (INDEX(ix_LeftIndex)) on Children1.LeftIndex between TP.PL1 and TP.PR1
    inner join Objects as Children2 WITH (INDEX(ix_LeftIndex)) on Children2.LeftIndex between TP.PL2 and TP.PR2
    inner join Objects as Children3 WITH (INDEX(ix_LeftIndex)) on Children3.LeftIndex between TP.PL3 and TP.PR3
) as x
WHERE idx = 1 
GO

-- NOTE: this View is not indexed, but is uses the indexed view 
CREATE VIEW TPIndexedIntermediate AS
select tp.Property, tp.Value 
    , Children1.Id as O1, Children2.Id as O2, Children3.Id as O3
    , PL1, PL2, PL3    
    , Children1.LeftIndex as CL1, Children2.LeftIndex as CL2, Children3.LeftIndex as CL3    
    from TPIndexed as TP WITH (NOEXPAND)

    -- Then add all possible children of all those objects
    inner join Objects as Children1 WITH (INDEX(ix_LeftIndex)) on Children1.LeftIndex between TP.PL1 and TP.PR1
    inner join Objects as Children2 WITH (INDEX(ix_LeftIndex)) on Children2.LeftIndex between TP.PL2 and TP.PR2
    inner join Objects as Children3 WITH (INDEX(ix_LeftIndex)) on Children3.LeftIndex between TP.PL3 and TP.PR3  
GO

---------- ANSWER 3 SCHEMA --------
-- You're talking about making six copies of the TP table
-- If you're going to go that far, you might as well, go the trigger route
-- The performance profile is much the same - slower on insert, faster on read
-- And instead of still recalculating on every read, you'll be recalculating
-- only when the data changes. 

CREATE TABLE TPResult
(
    Object1 int not null references Objects,
    Object2 int not null references Objects,
    Object3 int not null references Objects,
    Property varchar(20) not null,
    Value varchar(50) not null
)
GO

create UNIQUE index ix_Result on TPResult(Property, Value, Object1, Object2, Object3)

--You'll have to imagine this trigger, sql fiddle doesn't want to do it
--CREATE TRIGGER tr_TP
--ON TP
--  FOR INSERT, UPDATE, DELETE
--AS
--  DELETE FROM TPResult
-- -- For this example we'll just insert into the table once
INSERT INTO TPResult 
SELECT O1, O2, O3, Property, Value 
FROM TPResultView 
```

从 sqlfiddle 查询我的部分答案：

```
-------- QUESTION QUERY ----------
-- Original query, modified to use the view I added
SELECT O1, O2, O3, Property, Value 
FROM TPResultView
WHERE property = 'P1' AND value = 'abc'
-- Your assertion is that this order by is the most expensive part. 
-- Sometimes converting queries into views allows the server to
-- Optimize them better over time.
-- NOTE: removing this order by has no effect on this query.
-- ORDER BY O1, O2, O3
GO

-------- ANSWER 1  QUERY ----------
-- A different way to get the same result. 
-- Query optimizer says this is more expensive, but I've seen cases where
-- it says a query is more expensive but it returns results faster.
SELECT O1, O2, O3, Property, Value
FROM (
  SELECT A.O1, A.O2, A.O3, A.Property, A.Value
  FROM TPIntermediate A
  LEFT JOIN TPIntermediate B ON A.O1 = B.O1
    AND A.O2 = B.O2
    AND A.O3 = B.O3
    AND A.Property = B.Property
    AND 
    (
      -- Find any rows with Parent LeftIndex triplet that is greater than this one
      (A.PL1 < B.PL1
      AND A.PL2 < B.PL2
      AND A.PL3 < B.PL3) 
    OR
      -- Find any rows with LeftIndex triplet that is greater than this one
      (A.CL1 < B.CL1
      AND A.CL2 < B.CL2
      AND A.CL3 < B.CL3)
    )
  -- If this row has any rows that match the previous two cases, exclude it
  WHERE B.O1 IS NULL ) AS x
WHERE property = 'P1' AND value = 'abc'
-- NOTE: Removing this order _DOES_ reduce query cost removing the "sort" action
-- that has been the focus of your question.   
-- Howeer, it wasn't clear from your question whether this order by was required.
--ORDER BY O1, O2, O3
GO

-------- ANSWER 2  QUERIES ----------
-- Same as above but using an indexed view to partially calculate results

SELECT O1, O2, O3, Property, Value 
FROM TPIndexedResultView
WHERE property = 'P1' AND value = 'abc'
-- Your assertion is that this order by is the most expensive part. 
-- Sometimes converting queries into views allows the server to
-- Optimize them better over time.
-- NOTE: removing this order by has no effect on this query.
--ORDER BY O1, O2, O3
GO

SELECT O1, O2, O3, Property, Value
FROM (
  SELECT A.O1, A.O2, A.O3, A.Property, A.Value
  FROM TPIndexedIntermediate A
  LEFT JOIN TPIndexedIntermediate B ON A.O1 = B.O1
    AND A.O2 = B.O2
    AND A.O3 = B.O3
    AND A.Property = B.Property
    AND 
    (
      -- Find any rows with Parent LeftIndex triplet that is greater than this one
      (A.PL1 < B.PL1
      AND A.PL2 < B.PL2
      AND A.PL3 < B.PL3) 
    OR
      -- Find any rows with LeftIndex triplet that is greater than this one
      (A.CL1 < B.CL1
      AND A.CL2 < B.CL2
      AND A.CL3 < B.CL3)
    )
  -- If this row has any rows that match the previous two cases, exclude it
  WHERE B.O1 IS NULL ) AS x
WHERE property = 'P1' AND value = 'abc'
-- NOTE: Removing this order _DOES_ reduce query cost removing the "sort" action
-- that has been the focus of your question.   
-- Howeer, it wasn't clear from your question whether this order by was required.
--ORDER BY O1, O2, O3
GO

-------- ANSWER 3  QUERY ----------
-- Returning results from a pre-calculated table is fast and easy
-- Unless your are doing many more inserts than reads, or your result
-- set is very large, this is a fine way to compensate for a poor design
-- in one area of your database.
SELECT Object1 as O1, Object2 as O2, Object3 as O3, Property, Value 
FROM TPResult
WHERE property = 'P1' AND value = 'abc'
ORDER BY O1, O2, O3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:28:43.017

您是否尝试过索引（或设置 pk），首先是“Value”列，第二个是“Property”列，第三个是“Object1”列，第四个是“Object2”列，第五个是“Object3”列？我假设“价值”比“财产”更具限制性。

我还假设您将 Id 列设置为主键，并且 ParentId 和 Id 之间存在外键关系。

此查询如何执行？：

```
 with 
    -- First, get all combinations that match the property/value pair.
    validTrip as (
        select Object1, Object2, Object3
        from TriplesAndProperties 
        where value = @value
            and property = @property
    ),
    -- Recursively flatten the inheritance hierarchy of Object1, 2 and 3.
    o1 as (
        select Id, 0 as InherLevel from Objects where Id in (select Object1 from validTrip)
        union all
        select rec.Id, InherLevel + 1 from Objects rec inner join o1 base on rec.Parent = base.[Object]
    ),
    o2 as (
        select Id, 0 as InherLevel from Objects where Id in (select Object2 from validTrip)
        union all
        select rec.Id, InherLevel + 1 from Objects rec inner join o2 base on rec.Parent = base.[Object]
    ),
    o3 as (
        select Id, 0 as InherLevel from Objects where Id in (select Object3 from validTrip)
        union all
        select rec.Id, InherLevel + 1 from Objects rec inner join o3 base on rec.Parent = base.[Object]
   )
    -- select the Id triple.
    select o1.Id, o2.Id, o3.Id N
    -- match every option in o1, with every option in o2, with every option in o3.
    from o1
        cross join o2
        cross join o3
    -- order by the inheritance level.
    order by o1.InherLevel, o2.InherLevel, o3.InherLevel; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:02:55.453

您可以通过在索引表中实现连接来加快速度，比如joinedresult。这具有需要空间和保存到磁盘的缺点。但它的优点是能够对慢速部分使用索引。

```
insert into joinedresult
select Children1.Id as O1, Children2.Id as O2, Children3.Id as O3, tp.Property, tp.Value,Objects1.[depthInTheTree] as O1D,Objects2.[depthInTheTree] as O2D,Objects3\. depthInTheTree]  as O3D from  ... (see above) 
```

确保joinedresult在[O1,O2,O3,Property,O1D,O2D,O3D]上有一个索引，并在运行前清除它。然后

```
select * from
(
    select 
    Children1.Id as O1, Children2.Id as O2, Children3.Id as O3, tp.Property, tp.Value,
    row_number() over( 
        partition by Children1.Id, Children2.Id, Children3.Id, tp.Property
        order by O1D descending, O2D descending, O3D descending
    )
    as InheritancePriority
    from joinedresult
)
where InheritancePriority = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T11:36:09.720

缓存是加快查询速度的关键。它减少了您必须进行的计算。您**要**创建索引，因为您要**CACHE**并保存**WORK**。以下是执行此操作的两种可能性。

## 选项1

SQL 数据库根据您的窗口函数进行排序。你说窗口功能太慢了。

我不知道这会有多好，但它可能会奏效。

您可以尝试按单列排序 - “紧密度”，而不是按多列排序。

现在让我们将接近度定义为一些抽象整数。您可以使用以下 SQL 代替窗口函数：

```
select * from
(
    select
        Children1.Id as O1, Children2.Id as O2, Children3.Id as O3, tp.Property, tp.Value,

        row_number() over( 
            partition by Children1.Id, Children2.Id, Children3.Id, tp.Property
            order by closeness DESC
        )
        as InheritancePriority
    from
    ... (see above)
)
where InheritancePriority = 1 
```

closeness 可以是 TriplesAndProperties 表中定义的列。对于每个对象，您可以将其“接近度”定义为它与根节点 (O1) 的距离。然后我们可以定义`closeness(tuple) = closeness(Object1)*100+closeness(Object2)*10+closeness(Object3)`

这样，离根最远的元组就是你想要的。

为避免排序，您只需确保对接近度进行索引。

* * *

## 选项 2

我非常确定这会奏效。

定义您的 TriplesAndProperties 表以包含以下列：`Object1, Object2, Object3, Property, Value, Effective_Object1, Effective_Object2, Effective_Object3, Closeness`。

请注意，这里我还将紧密度定义为列。

当您将元组插入/更新到表中时，（X，Y，Z），您想要插入：

```
(X,Y,Z,Property,Value,X,Y,Z,0)
(X,Y,Z,Property,Value,X,Y,Z.child,1)
(X,Y,Z,Property,Value,X,Y,Z.grandchild,2)
(X,Y,Z,Property,Value,X,Y.child,Z,10)
(X,Y,Z,Property,Value,X,Y.child,Z.child,11)
(X,Y,Z,Property,Value,X,Y.child,Z.grandchild,12)
(X,Y,Z,Property,Value,X,Y.grandchild,Z,20)
(X,Y,Z,Property,Value,X,Y.grandchild,Z.child,21)
(X,Y,Z,Property,Value,X,Y.grandchild,Z.grandchild,22)
...
... 
```

这意味着您不是在表中插入/更新/销毁单行，而是最多插入约 20 行。这还不错。

那么您的查询非常简单。

你只是说：

```
SELECT * FROM
    (
    SELECT Effective_Object1, Effective_Object2, Effective_Object3, Property, Value,
        row_number() over( 
            partition by Effective_Object1, Effective_Object2, Effective_Object3, Property
            order by Closeness DESC
        ) AS InheritancePriority FROM TriplesAndProperties
     ) WHERE InheritancePriority = 1; 
```

在此选项中，您必须确保对紧密度进行索引，您可以仅按元组（Effective_Object1、Effective_Object2、Effective_Object3、Property、Closeness）进行索引。

* * *

在这两种情况下，您都有一定数量的**缓存**，即不添加任何额外**信息**的数据，但会缓存一定数量的**计算**或**工作**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T13:23:50.733

我猜你的桌子很大。因此缓慢。在那种情况下，我还猜测您有多个属性（2 到多个）。在这种情况下，我建议您在 CTE 中移动“where property='P1'”。这将过滤大部分数据，使您的查询速度与属性数量一样快。

类似的东西：[http ://sqlfiddle.com/#!3/7c7a0/92/0](http://sqlfiddle.com/#!3/7c7a0/92/0)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T08:24:16.377

[分层查询](http://en.wikipedia.org/wiki/Common_table_expressions)，即`WITH RECURSIVE ...`或专有等价物，例如`CONNECT BY`在这种情况下是您的朋友。

解决您的特定问题的方法是：从离开开始并上升到根，聚合并排除已经找到的任何内容。

# c++ - 如何从非指针对象创建 std::shared_ptr？

> ID：11992269
> 
> 赞同：5
> 
> 时间：2012-08-16T17:14:27.700
> 
> 标签：c++, shared-ptr

作为一个函数的输出，我得到一个类型为 的对象`Foo`。作为另一个类的参数，我需要传递一个 type 的对象`std::shared_ptr<Foo>`。如何从原始对象创建共享指针？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T17:18:02.910

这真的很简单：

```
auto val = std::make_shared<Foo>(FuncThatReturnsFoo(...)); 
```

基本上，只需堆分配一个新的`Foo`，将结果复制/移动到其中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T17:16:44.750

如果我是你，我不会那样做。主要是因为`std::shared_ptr`管理内存，而如果您将对象作为返回类型，则会自动管理内存（通常并且很可能）。

您要么必须在动态存储中创建一个新对象

```
Foo getObject();
//...
std::shared_ptr<Foo> ptr(new Foo(getObject())); //construct new object in dynamic memory
                                                //using the copy constructor 
```

或更改函数以返回指向您管理其内存的对象的指针。

```
Foo getObject(); 
//becomes
Foo* getObject();
//or, even better
std::shared_ptr<Foo> getObject(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T17:22:31.873

我怀疑您想防止堆分配，否则只需堆分配返回对象的副本并继续。

您需要防止删除器实际删除某些内容并需要堆栈来处理此问题：

```
// given the signatures
Foo f();
void other(std::shared_ptr<Foo> x);

Foo my_f = f();
std::shared_ptr<Foo> my_fptr{&my_f, [](Foo*) {}};
other(my_fptr); 
```

不过，那是一种真正的代码气味。`shared_ptr`如果不是为了延长生命周期，为什么函数会接受 a ？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T17:36:32.273

有两种方法可以做到这一点：

1.  在堆上创建一个新副本并从中创建一个 shared_ptr 。
2.  使用空删除器从中创建一个 shared_ptr 。

第一个可以通过写来完成

```
auto newPtr = std::make_shared<Foo>( foo ); 
```

如果该类`Foo`是可复制构造的，则此方法有效。第二件事可以通过

```
auto newPtr = std::shared_ptr<Foot>( &foo, [](void*){} ); 
```

在这里，您不会创建对象的新副本。但是，这只是安全的，如果您可以保证指针在`foo`超出范围后不被访问。否则，您将访问一个被破坏的对象，并且您的程序可能会做一些随机的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T17:18:22.937

你可以这样做

```
std::shared_ptr<Foo> ptr(new Foo(f()); 
```

从语义上讲，它正在制作返回值的副本，但应该省略复制构造函数。

# php - PHP validate form having different fields displayed on javascript

> ID：11992271
> 
> 赞同：0
> 
> 时间：2012-08-16T17:14:33.913
> 
> 标签：php, javascript

I have trouble validating a form that changes its fields based on javascript. The idea is that the form displays different fields added dynamically based on a radio button choice. However PHP appears to get confused based on the logic I made. Say I check for the fields that are actually set. I tried writing an if, else logic checking if $_POST variables were set with isset, but it didn't work. Now the code I have does a check for the whole form being submitted (checking the name of the submit button), and then, inside that check, I check for all the other fields, like so:

```
else if(isset($_POST['subirLic']) && isset($_POST['BusquedaTerm'])){ 
//the first variable is the name of the submit button and the second is a hidden field, then inside the block I check for the existence of the fields for example: if(isset($_POST['whatever'])) {} 
```

The problem is that I want to check that the first set of fields is submitted, and also check if the other fields (those that display based on a javascript function) are not submitted.

I tried to build a decision logic but I am all messed up, currently I do the check like I described above, then I check if the variables are set that must go into the database query, but the page behaves very oddly. For example I fill the additional fields, and then PHP tries to do a query that I built for the other set of fields.

I am trying to handle the decision based on a code like this:

```
 if(isset($EgresoLicen)&&isset($IngresoLicen)&&isset($CedLic)&&isset($FacultLic)&&isset($GenerLic)&&isset($cuentaDep)&&isset($TesisLicen)) {//here do the query to the database} 
```

and the other decision that the code should make goes like this:

```
if(isset($EgresoLicen)&&isset($ingresoLicen)&&isset($FacultLic)&&isset($GenerLic)&&isset($cuentaDep)&&isset($AsesorLic)&&isset($TitProyecto)&&isset($Modalidad)) {//same thing } 
```

But as I said, PHP gets confused apparently because the two if choices contain almost identical variables.

OK guys, I'll paste the code because I keep looking at it and can only think it is correct, although it evidently isn't. It is only part of the whole code at the page, that has about five more forms (it is an administrative panel to add info to a database). The other forms work fine, but they don't get any additional fields added, so I can simply check if all the $_POST variables in them are set, and validate each one by one, the problem with the one I mentioned is in my opinion that the $_POST variables are repeatedly checked and this gets confused the whole task, but I can't think of any other way to do it, that is why I appreciate your suggestions (at this point I don't even know if the if statements are nested correctly, I remember working overnight and doing as many changes as I could). The code that handles the form in question is:

```
else if(isset($_POST['subirLic']) && isset($_POST['BusquedaTerm'])){
// the above statement starts with an else if because it is part of a larger set of       forms being checked---------------------
require_once('libreria.php');
if(isset($_POST['titulo'])) $Titulado = $_POST['titulo'];
if (isset($_POST['EgresoLic'])) {$EgresoLicenciado = $_POST['EgresoLic'];
$EgresoLicencia = new Zend_Validate_Date;
if ($EgresoLicencia->isValid($EgresoLicenciado)) $EgresoLicen = $EgresoLicenciado; else     $errorsLic['fechaEgreso']="Escriba la fecha de egreso de licenciatura, formato AAAA-MM-DD (sólo números separados por guiones)"; }
if (isset($_POST['IngresoLic'])) {$IngresoLicenciado= $_POST['IngresoLic'];
$IngresoLicencia = new Zend_Validate_Date;
if ($IngresoLicencia->isValid($IngresoLicenciado)) $IngresoLicen = $IngresoLicenciado;     else $errorsLic['fechaIngreso']="Escriba la fecha de ingreso a licenciatura, formato AAAA-  MM-DD (sólo números separados por guiones"; } 
if (isset($_POST['titulo']))$Titulado = $_POST['titulo'];
if(isset($_POST['genLic'])) {$GenerLicenciado =$_POST['genLic'];
if($GenerLicenciado !="" && preg_match('/^\d{4}/', $GenerLicenciado)==true) $GenerLic=  $GenerLicenciado;
else  $errorsLic['generacion'] = "Escriba el año de su generación en formato AAAA"; }
$cuentaDep= $_POST['cuentaLic']; //Escribir validación de cuenta ---------------->    pendiente
if(isset($_POST['facLic'])) {$FacultadLic= $_POST['facLic']; 
if($FacultadLic !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b) {6,}/', $FacultadLic)==true && substr_count($FacultadLic, ' ')==5)) $FacultLic =  $FacultadLic; 
else if($FacultadLic !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b) {5,}/', $FacultadLic)==true && substr_count($FacultadLic, ' ')==4)) $FacultLic = $FacultadLic;
else if($FacultadLic !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){4,}/', $FacultadLic)==true && substr_count($FacultadLic, ' ')==3)) $FacultLic = $FacultadLic;
else if($FacultadLic !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){3,}/', $FacultadLic)==true && substr_count($FacultadLic, ' ')==2)) $FacultLic = $FacultadLic;
else if($FacultadLic !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){2,}/', $FacultadLic)==true && substr_count($FacultadLic, ' ')==1)) $FacultLic = $FacultadLic;
else if($FacultadLic !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){1,}/', $FacultadLic)==true && substr_count($FacultadLic, ' ')==0)) $FacultLic = $FacultadLic;
else $errorsLic['facultad']= "Escriba la facultad en que estudió la licenciatura"; }
if(isset($_POST['titulo'])) $Titulado = $_POST['titulo'];
if(isset($_POST['CedProfLic'])) {$CedulaLic = $_POST['CedProfLic']; if($CedulaLic !="" && preg_match('/\d{2,9}/', $CedulaLic)==true) $CedLic=$CedulaLic; else      $errorsLic['cedula']="Escriba el número de su cédula profesional";} 
if(isset($_POST['TesisLic'])) {$TesisLicenciado = $_POST['TesisLic']; 
if($TesisLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){11,}/', $TesisLicenciado)==true && substr_count($TesisLicenciado, ' ')==10)) $TesisLicen=$TesisLicenciado;
else if($TesisLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){10,}/', $TesisLicenciado)==true && substr_count($TesisLicenciado, ' ')==9)) $TesisLicen=$TesisLicenciado;
else if($TesisLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){9,}/', $TesisLicenciado)==true && substr_count($TesisLicenciado, ' ')==8))     $TesisLicen=$TesisLicenciado;
else if($TesisLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){8,}/', $TesisLicenciado)==true && substr_count($TesisLicenciado, ' ')==7))  $TesisLicen=$TesisLicenciado;
else if($TesisLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){7,}/', $TesisLicenciado)==true && substr_count($TesisLicenciado, ' ')==6)) $TesisLicen=$TesisLicenciado;
else if($TesisLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){6,}/', $TesisLicenciado)==true && substr_count($TesisLicenciado, ' ')==5)) $TesisLicen=$TesisLicenciado;
else if($TesisLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){5,}/', $TesisLicenciado)==true && substr_count($TesisLicenciado, ' ')==4)) $TesisLicen=$TesisLicenciado;
else if($TesisLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){4,}/', $TesisLicenciado)==true && substr_count($TesisLicenciado, ' ')==3)) $TesisLicen=$TesisLicenciado;
else if($TesisLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){3,}/', $TesisLicenciado)==true && substr_count($TesisLicenciado, ' ')==2)) $TesisLicen=$TesisLicenciado;
else if($TesisLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){2,}/', $TesisLicenciado)==true && substr_count($TesisLicenciado, ' ')==1))  $TesisLicen=$TesisLicenciado;
else $errorsLic['tesis']="Escriba el título de su tesis de licenciatura"; 
}

include_once ('conect_gral.php');//importante incluir este archivo en todas las  consultas, y sustituirlo por uno seguro con contraseña;
$registrobuscado=$_POST['BusquedaTerm'];
    if(isset($EgresoLicen)&&isset($IngresoLicen)&&isset($CedLic)&&isset($FacultLic)&&isset($GenerLic)&&isset($cuentaDep)&&isset($TesisLicen)) {
$cons4="SELECT CompletoApellidos FROM seguimientoegresados WHERE CompletoApellidos='registrobuscado'";
$regisLic = "UPDATE datos_licenciatura SET Fecha_Egreso_Lic='$EgresoLicen',   Fecha_Ingreso_Lic='$IngresoLicen', Ced_Profesional_Lic='$CedLic', Facultad_Lic='$FacultLic', Generacion_Lic='$GenerLic', Cuenta_Dependencia='$cuentaDep', Tesis_Lic='$TesisLicen' WHERE Apellido_Licen='$registrobuscado'";
$regisGrad= "UPDATE estudios_grado SET Grado='Licenciado' WHERE Apellidos_Grado='$registrobuscado'";
if($Titulado=='pasante') $regisGrad="UPDATE estudios_grado SET Grado='Pasante' WHERE Apellidos_Grado='$registrobuscado'";
$consultacuatro=mysql_query($cons4);
$registroLic = mysql_query($regisLic);
$registroGrado = mysql_query($regisGrad);
if (!$registroLic || !$registroGrado) echo "Ocurrió un error al registrar los datos en   la Base de Datos Registro Basico"; 
if (!$consultacuatro) {echo "No se ha podido localizar al usuario";}
} else echo "No se han registrado todos los datos";
//captura de datos de pasantes-->
//PRIMERA PARTE DEL FORMULARIO REVISAR
if(isset($_POST['asesor_proy'])) {$AsesorLicenciado = $_POST['asesor_proy'];
if($AsesorLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0- 9]+\D\b){5,}/', $AsesorLicenciado)==true && substr_count($AsesorLicenciado, ' ')==4))    $AsesorLic=$AsesorLicenciado;
else if($AsesorLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){4,}/', $AsesorLicenciado)==true && substr_count($AsesorLicenciado, ' ')==3)) $AsesorLic=$AsesorLicenciado;
else if($AsesorLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){3,}/', $AsesorLicenciado)==true && substr_count($AsesorLicenciado, ' ')==2)) $AsesorLic=$AsesorLicenciado;
else if($AsesorLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){2,}/', $AsesorLicenciado)==true && substr_count($AsesorLicenciado, ' ')==1)) $AsesorLic=$AsesorLicenciado;
else $errorsLic['asesor_pas']="Escriba el nombre del asesor de su proyecto de pasante";}
if(isset($_POST['modalidad'])) $Modalidad =$_POST['modalidad'];
if(isset($_POST['proyecto'])){$TituloProyecto= $_POST['proyecto']; 
if($TituloProyecto  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){10,}/', $TituloProyecto)==true && substr_count($TituloProyecto, ' ')==9)) $TitProyecto=$TituloProyecto;
else if($TituloProyecto  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){9,}/', $TituloProyecto)==true && substr_count($TituloProyecto, ' ')==8)) $TitProyecto=$TituloProyecto;
else if($TituloProyecto  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){8,}/', $TituloProyecto)==true && substr_count($TituloProyecto, ' ')==7)) $TitProyecto=$TituloProyecto;
else if($TituloProyecto  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){7,}/', $TituloProyecto)==true && substr_count($TituloProyecto, ' ')==6)) $TitProyecto=$TituloProyecto;
else if($TituloProyecto  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){6,}/', $TituloProyecto)==true && substr_count($TituloProyecto, ' ')==5)) $TitProyecto=$TituloProyecto;
else if($TituloProyecto  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){5,}/', $TituloProyecto)==true && substr_count($TituloProyecto, ' ')==4)) $TitProyecto=$TituloProyecto;
else if($TituloProyecto  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){4,}/', $TituloProyecto)==true && substr_count($TituloProyecto, ' ')==3)) $TitProyecto=$TituloProyecto;
else if($TituloProyecto  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){3,}/', $TituloProyecto)==true && substr_count($TituloProyecto, ' ')==2)) $TitProyecto=$TituloProyecto;
else if($TituloProyecto  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){2,}/', $TituloProyecto)==true && substr_count($TituloProyecto, ' ')==1)) $TitProyecto=$TituloProyecto;
else if($TituloProyecto  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){1,}/', $TituloProyecto)==true && substr_count($TituloProyecto, ' ')==0)) $TitProyecto=$TituloProyecto;
else $errorsLic['proyecto']="Escriba el título de su proyecto de pasante";
}      if(isset($EgresoLicen)&&isset($ingresoLicen)&&isset($CedLic)&&isset($FacultLic)&&isset($GenerLic)&&isset($cuentaDep)&&isset($AsesorLic)&&isset($TitProyecto)&&isset($Modalidad)) {
include_once ('conect_gral.php');//importante incluir este archivo en todas las consultas, y sustituirlo por uno seguro con contraseña;
$registrobuscado=$_POST['BusquedaTerm'];
$cons11="SELECT CompletoApellidos FROM seguimientoegresados WHERE CompletoApellidos='registrobuscado'";
$regisPas="UPDATE datos_licenciatura SET Fecha_Egreso_Lic='$EgresoLicen', Fecha_Ingreso_Lic='$IngresoLicen', Facultad_Lic='$FacultLic', Generacion_Lic='$GenerLic', Cuenta_Dependencia='$cuentaDep', Asesor_Pas='$AsesorLic', Proyecto_Pas='$TitProyecto', Modalidad_Pas='$Modalidad' WHERE Apellido_Licen='$registrobuscado'"; 
$regisGrad= "UPDATE estudios_grado SET Grado='Licenciado' WHERE Apellidos_Grado='$registrobuscado'";
if($Titulado=='pasante') $regisGrad="UPDATE estudios_grado SET Grado='Pasante' WHERE Apellidos_Grado='$registrobuscado'";
$consultaonce=mysql_query($cons11);
$registroPas = mysql_query($regisPas);
$registroGrado = mysql_query($regisGrad);
if (!$registroPas || !$registroGrado) echo "Ocurrió un error al registrar los datos en la Base de Datos";   
if (!$consultaonce) {echo "No se ha podido localizar al usuario";}
}
} 
```

I know this is very large, I could have left out the whole validation statements but maybe there's an error that I can't find, perhaps you would recommend using a Zend_Validation instead, specially because I'm not 100% percent sure those regular expressions behave correctly in any entry situation. Anyway, thanks for your patience. When I run that code using the fields added with javascript (those in the last part of the set of validations) oddly enough it produces the last echo statement in the first set, as if the variables were not set, and finally, if I run the script against the first set of fields in the form, it produces an error in the mysql query and adds nothing to the database.

OK, I posted that large code and kept working on it, I got to handle the queries to the database correctly now (something I should have done earlier if I had paid more attention). Now the only problems are: one, I keep getting an error message of two variables not set if I submit the form with the added fields (I must add that the form not only has additional fields, it also removes other fields previously displayed). But the queries are working alright. I keep thinking the problem is that I want PHP to manage the same form with different fields, do the queries at the same time (within one block of code), but still take a decision as to build the queries depending on which $_POST variables are set. Besides, now I also have the problem of the errors I put into an array not being shown, I guess I'll keep wondering why this happens when I build two queries in the same block, while on the other forms, as I mentioned, I can perfectly validate their entry and show the errors alright.

The code I have ended up with is:

```
else    if(isset($_POST['EgresoLic'])&&isset($_POST['IngresoLic'])&&isset($_POST['genLic'])&&isset($_POST['facLic'])&&isset($_POST['titulo'])&&isset($_POST['CedProfLic'])&&isset($_POST['TesisLic']) &&isset($_POST['cuentaLic'])&&isset($_POST['BusquedaTerm'])){
require_once('libreria.php');
$EgresoLicenciado = $_POST['EgresoLic'];
if(!empty($EgresoLicenciado)) {
$EgresoLicencia = new Zend_Validate_Date;
if ($EgresoLicencia->isValid($EgresoLicenciado)) $EgresoLicen = $EgresoLicenciado; else     $errorsLic['fechaEgreso']="Escriba la fecha de egreso de licenciatura, formato AAAA-MM-DD (sólo números separados por guiones)";}
$IngresoLicenciado= $_POST['IngresoLic']; 
if(!empty($IngresoLicenciado)) {
$IngresoLicencia = new Zend_Validate_Date;
if ($IngresoLicencia->isValid($IngresoLicenciado)) $IngresoLicen = $IngresoLicenciado;   else $errorsLic['fechaIngreso']="Escriba la fecha de ingreso a licenciatura, formato AAAA-MM-DD (sólo números separados por guiones";}
$GenerLicenciado =$_POST['genLic'];
if(!empty($GenerLicenciado)) {
if($GenerLicenciado !="" && preg_match('/^\d{4}/', $GenerLicenciado)==true) $GenerLic=  $GenerLicenciado;
else  $errorsLic['generacion'] = "Escriba el año de su generación en formato AAAA";}
$cuentaDep= $_POST['cuentaLic']; //Escribir validación de cuenta ---------------->  pendiente
$FacultadLic= $_POST['facLic']; if(!empty($FacultadLic)){
if($FacultadLic !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){6,}/', $FacultadLic)==true && substr_count($FacultadLic, ' ')==5)) $FacultLic =     $FacultadLic; 
else if($FacultadLic !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){5,}/', $FacultadLic)==true && substr_count($FacultadLic, ' ')==4)) $FacultLic =    $FacultadLic;
else if($FacultadLic !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){4,}/', $FacultadLic)==true && substr_count($FacultadLic, ' ')==3)) $FacultLic = $FacultadLic;
else if($FacultadLic !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){3,}/', $FacultadLic)==true && substr_count($FacultadLic, ' ')==2)) $FacultLic = $FacultadLic;
else if($FacultadLic !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){2,}/', $FacultadLic)==true && substr_count($FacultadLic, ' ')==1)) $FacultLic = $FacultadLic;
else if($FacultadLic !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){1,}/', $FacultadLic)==true && substr_count($FacultadLic, ' ')==0)) $FacultLic = $FacultadLic;
else $errorsLic['facultad']= "Escriba la facultad en que estudió la licenciatura";}
$Titulado = $_POST['titulo'];
$CedulaLic = $_POST['CedProfLic']; if(!empty($CedulaLic)) {if($CedulaLic !="" && preg_match('/\d{2,9}/', $CedulaLic)==true) $CedLic=$CedulaLic; else     $errorsLic['cedula']="Escriba el número de su cédula profesional";}
$TesisLicenciado = $_POST['TesisLic'];
if (!empty($TesisLicenciado)) { 
if($TesisLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){11,}/', $TesisLicenciado)==true && substr_count($TesisLicenciado, ' ')==10))     $TesisLicen=$TesisLicenciado;
else if($TesisLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){10,}/', $TesisLicenciado)==true && substr_count($TesisLicenciado, ' ')==9))   $TesisLicen=$TesisLicenciado;
else if($TesisLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){9,}/', $TesisLicenciado)==true && substr_count($TesisLicenciado, ' ')==8))     $TesisLicen=$TesisLicenciado;
else if($TesisLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){8,}/', $TesisLicenciado)==true && substr_count($TesisLicenciado, ' ')==7)) $TesisLicen=$TesisLicenciado;
else if($TesisLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){7,}/', $TesisLicenciado)==true && substr_count($TesisLicenciado, ' ')==6)) $TesisLicen=$TesisLicenciado;
else if($TesisLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){6,}/', $TesisLicenciado)==true && substr_count($TesisLicenciado, ' ')==5)) $TesisLicen=$TesisLicenciado;
else if($TesisLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){5,}/', $TesisLicenciado)==true && substr_count($TesisLicenciado, ' ')==4)) $TesisLicen=$TesisLicenciado;
else if($TesisLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){4,}/', $TesisLicenciado)==true && substr_count($TesisLicenciado, ' ')==3)) $TesisLicen=$TesisLicenciado;
else if($TesisLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){3,}/', $TesisLicenciado)==true && substr_count($TesisLicenciado, ' ')==2)) $TesisLicen=$TesisLicenciado;
else if($TesisLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){2,}/', $TesisLicenciado)==true && substr_count($TesisLicenciado, ' ')==1) || (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){2,}/', $TesisLicenciado)==true && substr_count($TesisLicenciado, ' ')==2)) $TesisLicen=$TesisLicenciado;
else $errorsLic['tesis']="Escriba el título de su tesis de licenciatura";}
include ('conect_gral.php');//importante incluir este archivo en todas las consultas, y sustituirlo por uno seguro con contraseña;
$registrobuscado=$_POST['BusquedaTerm'];
if (!isset($AsesorLic) || !isset($Modalidad)|| !isset($TitProyecto)) {
$cons4="SELECT CompletoApellidos FROM seguimientoegresados WHERE CompletoApellidos='registrobuscado'";
$regisLic = "UPDATE datos_licenciatura SET Fecha_Egreso_Lic='$EgresoLicen', Fecha_Ingreso_Lic='$IngresoLicen', Ced_Profesional_Lic='$CedLic', Facultad_Lic='$FacultLic', Generacion_Lic='$GenerLic', Cuenta_Dependencia='$cuentaDep', Tesis_Lic='$TesisLicen' WHERE Apellido_Licen='$registrobuscado'";
$regisGrad= "UPDATE estudios_grado SET Grado='Licenciado' WHERE  Apellidos_Grado='$registrobuscado'";
if($Titulado=='pasante') $regisGrad="UPDATE estudios_grado SET Grado='Pasante' WHERE Apellidos_Grado='$registrobuscado'";
$consultacuatro=mysql_query($cons4);
$registroLic = mysql_query($regisLic);
$registroGrado = mysql_query($regisGrad);
if (!$registroLic || !$registroGrado) echo "Ocurrió un error al registrar los datos en la Base de Datos Registro Básico";   
if (!$consultacuatro) {echo "No se ha podido localizar al usuario";}
}
//captura de datos de pasantes-->
//PRIMERA PARTE DEL FORMULARIO REVISAR
//captura de datos de pasantes-->
if(isset($_POST['asesor_proy'])) {
$AsesorLicenciado = $_POST['asesor_proy'];
if($AsesorLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){5,}/', $AsesorLicenciado)==true && substr_count($AsesorLicenciado, ' ')==4))     $AsesorLic=$AsesorLicenciado;
else if($AsesorLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){4,}/', $AsesorLicenciado)==true && substr_count($AsesorLicenciado, ' ')==3)) $AsesorLic=$AsesorLicenciado;
else if($AsesorLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){3,}/', $AsesorLicenciado)==true && substr_count($AsesorLicenciado, ' ')==2)) $AsesorLic=$AsesorLicenciado;
else if($AsesorLicenciado  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){2,}/', $AsesorLicenciado)==true && substr_count($AsesorLicenciado, ' ')==1))    $AsesorLic=$AsesorLicenciado; 
else $errorsLic['asesor_pas']="Escriba el nombre del asesor de su proyecto de pasante";    }
if(isset($_POST['modalidad']))
$Modalidad =$_POST['modalidad'];
if(isset($_POST['proyecto'])) {
$TituloProyecto= $_POST['proyecto'];
if($TituloProyecto  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){10,}/', $TituloProyecto)==true && substr_count($TituloProyecto, ' ')==9)) $TitProyecto=$TituloProyecto;
else if($TituloProyecto  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){9,}/', $TituloProyecto)==true && substr_count($TituloProyecto, ' ')==8)) $TitProyecto=$TituloProyecto;
else if($TituloProyecto  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){8,}/', $TituloProyecto)==true && substr_count($TituloProyecto, ' ')==7)) $TitProyecto=$TituloProyecto;
else if($TituloProyecto  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){7,}/', $TituloProyecto)==true && substr_count($TituloProyecto, ' ')==6)) $TitProyecto=$TituloProyecto;
else if($TituloProyecto  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){6,}/', $TituloProyecto)==true && substr_count($TituloProyecto, ' ')==5)) $TitProyecto=$TituloProyecto;
else if($TituloProyecto  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){5,}/', $TituloProyecto)==true && substr_count($TituloProyecto, ' ')==4)) $TitProyecto=$TituloProyecto;
else if($TituloProyecto  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){4,}/', $TituloProyecto)==true && substr_count($TituloProyecto, ' ')==3)) $TitProyecto=$TituloProyecto;
else if($TituloProyecto  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){3,}/', $TituloProyecto)==true && substr_count($TituloProyecto, ' ')==2)) $TitProyecto=$TituloProyecto;
else if($TituloProyecto  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){2,}/', $TituloProyecto)==true && substr_count($TituloProyecto, ' ')==1)) $TitProyecto=$TituloProyecto;
else if($TituloProyecto  !="" && (preg_match('/^\D([[:alpha:]ñÑáéíóúüÁÉÍÓÚÜ]*\B[^0-9]+\D\b){1,}/', $TituloProyecto)==true && substr_count($TituloProyecto, ' ')==0))  $TitProyecto=$TituloProyecto;
else $errorsLic['proyecto']="Escriba el título de su proyecto de pasante"; }
include ('conect_gral.php');//importante incluir este archivo en todas las consultas, y sustituirlo por uno seguro con contraseña;
$registrobuscado=$_POST['BusquedaTerm'];
if (!empty($AsesorLic) && !empty($Modalidad) && !empty($TitProyecto)){
$cons11="SELECT CompletoApellidos FROM seguimientoegresados WHERE CompletoApellidos='registrobuscado'";
$regisPas="UPDATE datos_licenciatura SET Fecha_Egreso_Lic='$EgresoLicen', Fecha_Ingreso_Lic='$IngresoLicen', Facultad_Lic='$FacultLic', Generacion_Lic='$GenerLic', Cuenta_Dependencia='$cuentaDep', Asesor_Pas='$AsesorLic', Proyecto_Pas='$TitProyecto', Modalidad_Pas='$Modalidad' WHERE Apellido_Licen='$registrobuscado'"; 
$regisGrad= "UPDATE estudios_grado SET Grado='Licenciado' WHERE Apellidos_Grado='$registrobuscado'";
if($Titulado=='pasante') $regisGrad="UPDATE estudios_grado SET Grado='Pasante' WHERE Apellidos_Grado='$registrobuscado'";
$consultaonce=mysql_query($cons11);
$registroPas = mysql_query($regisPas);
$registroGrado = mysql_query($regisGrad);
if (!$registroPas || !$registroGrado) echo "Ocurrió un error al registrar los datos en la Base de Datos Registro Pasante";  
if (!$consultaonce) {echo "No se ha podido localizar al usuario";}
}
} 
```

I must say I do exactly the same verification of the fields on the other forms, with all that messing around with regular expresssions, and on those forms I do get the errors to pass to arrays of errors, while on this form, I guess because I am doing two queries, I can't build the array. Also, I think the part on the first query where I check to see if the variables of the second (optional) fields of the forms are submitted, is overriden by the way the two queries work together, I mean when I put:

```
if (!isset($AsesorLic) || !isset($Modalidad)|| !isset($TitProyecto)) 
```

it actually checks nothing because at that point obviously those variables aren't set, but I can't figure out what to do, I must check if the variables are set if I must mention them, and if I also check if they are empty I will also get a result of true, at that point. How can I actually check if there's no input to the optional fields?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:25:09.433

在我看来，您应该使用两种不同的形式并以不同的方式命名它们。这样您就可以简单地检查提交的表单。

```
<form name="firstForm" method="post">
<!-- Input tags go here -->
<input type="submit" name="first-submit" value="First Form Submitted" />
</form>

<form name="secondForm" method="post">
<!-- Input tags go here -->
<input type="submit" name="second-submit" value="Second Form Submitted" />
</form> 
```

对于您的 HTML 示例。然后对于 PHP：

```
<?php 
if (!empty($_POST['first-submit'])) {
   //do something here;
}

if (!empty($_POST['second-submit'])) {
   //do something here;
}
?> 
```

这样你就知道他们试图提交哪组字段。然后，您可以检查它们是否为空，并确保删除任何坏字符以防止黑客入侵。或者最好做一些准备好的陈述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:20:23.517

Don't worry PHP is not getting confused if variables are names similarly :)

What's probably happening is that under certain circumstances both if statements return true causing the logic to go haywire.

Feel free to update the whole page and we'll try our best to help you.

Hope this was helpful,

Pesach

# python - 由 top 报告的 Python 线程的 ID

> ID：11992275
> 
> 赞同：15
> 
> 时间：2012-08-16T17:14:55.177
> 
> 标签：python, linux, multithreading, ctypes

我在我的 Python 脚本中启动了一堆不同的线程。我想跟踪每个线程的内存和 CPU 使用情况。我为此使用`top`和`ps -eLf`。

但事实证明，返回的标识符与其他类似程序`thread.start_new_thread()`显示的线程PID不同。`top`有没有办法从 Python 脚本中获取这个 PID？这样，我可以确定哪个 PID 属于哪个线程。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-16T18:12:27.583

感谢这篇[文章](http://python.6.n6.nabble.com/Get-thread-pid-td1536295.html "邮政")，我让 Python 线程报告了它们各自的线程 ID。首先做一个`grep -r 'SYS_gettid' /usr/include/'`. 我得到了一条线：`#define SYS_gettid __NR_gettid`在进一步 grepping 之后`grep -r '__NR_gettid' /usr/include/`，我得到了一堆匹配的线：

```
/usr/include/x86_64-linux-gnu/asm/unistd_32.h:#define __NR_gettid 224
/usr/include/x86_64-linux-gnu/asm/unistd_64.h:#define __NR_gettid 186
/usr/include/asm-generic/unistd.h:#define __NR_gettid 178 
```

现在选择与您的架构相匹配的那个。我的是 186。现在在所有 Python 线程脚本中包含此代码，以获取操作系统看到的线程 ID：

```
import ctypes
tid = ctypes.CDLL('libc.so.6').syscall(186) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-08T13:22:00.870

这是一个将 python 线程标识符替换为如下所示的`TID`补丁`htop`：

```
def patch_thread_identifier():
    """Replace python thread identifier by TID."""
    # Imports
    import threading, ctypes
    # Define get tid function
    def gettid():
        """Get TID as displayed by htop."""
        libc = 'libc.so.6'
        for cmd in (186, 224, 178):
            tid = ctypes.CDLL(libc).syscall(cmd)
            if tid != -1:
                return tid
    # Get current thread
    current = threading.current_thread()
    # Patch get_ident (or _get_ident in python 2)
    threading.get_ident = threading._get_ident = gettid
    # Update active dictionary
    threading._active[gettid()] = threading._active.pop(current.ident)
    # Set new identifier for the current thread
    current._set_ident()
    # Done
    print("threading._get_ident patched!") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T17:24:31.977

您使用什么操作系统？

除了非常旧的 Linux 版本外，每个线程都应该具有相同的 PID（进程 ID）。thread.start_new_thread() 上的标识符是 python 内部的，用于标识特定的执行线程。

有关 linux 线程的更多信息，请参阅 Linux 上的 pthreads 手册页。

# authentication - 在 VB6 程序中加入身份验证的最佳方式是什么？

> ID：11992277
> 
> 赞同：1
> 
> 时间：2012-08-16T17:14:58.780
> 
> 标签：authentication, vb6

我需要找出一种方法来验证我正在创建的 vb6 程序，最好是自动验证。我有一个使用 PHP 的 Web 服务器，其正常运行时间为 99%，而我可以在其上运行服务器端 VB6 程序的 Windows Server 的正常运行时间约为 90%。我面临的问题是，如果它是全新安装，如何让它生成正确的密钥，同时每个位置只允许一个副本。这是我的想法，我只是好奇是否有任何更简单/更智能的方法可以做到这一点。

让 VB6 程序生成一个 MD5 字符串，即客户名字 + 客户姓氏 + 公司名称 + 客户电子邮件，然后让 VB6 程序将其保存到一个密钥文件中，最后在我的服务器上点击一个 PHP 脚本（使用隐藏浏览器对象）将 MD5 字符串（或密钥）存储到文本文件中。这里的问题是我的 PHP 很弱。

我的另一个问题是如何让 vb6 程序知道同一密钥是否有多个副本，然后自行取消身份验证。

如果有人想看，我可以发布一些我已经刮过的代码。我期待听到一些回复，因为这个项目的最后期限迫在眉睫，我完全迷失了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:00:01.203

这个开源许可框架将节省一些时间：

*   [http://sourceforge.net/projects/activelock/](http://sourceforge.net/projects/activelock/)
*   [http://www.activelocksoftware.com/downloads.html](http://www.activelocksoftware.com/downloads.html)

下载部分（第二个链接）中有一些示例和教程。

希望它会帮助你。

祝您好运。

# vim - Vim 搜索和替换效率

> ID：11992279
> 
> 赞同：6
> 
> 时间：2012-08-16T17:15:17.543
> 
> 标签：vim, replace

我经常想像这样在 vim 中搜索和替换：

```
:%s/<search_pattern>/<search_pattern>_foo/g 
```

有没有办法让这种语法更有效，以便我可以`<search_pattern>`在替换值中引用？我认为这类似于按组名/编号进行反向引用，但我找不到任何关于此的文档。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-16T17:19:12.610

使用`&`字符来表示替换中的匹配模式：

```
:%s/<search_pattern>/&_foo/g 
```

或者，您可以使用`\0`，它是整个匹配模式的反向引用，因此可能更容易记住：

```
:%s/<search_pattern>/\0_foo/g 
```

看`:help sub-replace-special`

并且，感谢[@kev](https://stackoverflow.com/users/348785/kev)，您可以在搜索字符串的末尾使用`\zs`, 强制一个空模式被替换为 __foo_ ：

```
:%s/<search_pattern>\zs/_foo/g 
```

这意味着：用 __foo_ 替换搜索字符串的结尾。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T17:59:36.590

您可以使用`&`整个搜索模式，也可以使用组来匹配模式的一部分。使用`&`：

```
:%s/<search_pattern>/&_foo/g 
```

这将完成您正在寻找的东西。如果您需要一些更复杂的东西，请使用组。要创建一个组，请使用（转义）括号将搜索模式的一部分括起来。然后，您可以使用 来引用它`\n`，其中`n`是组号。一个例子会更好地解释它。

您有以下文件：

```
bread,butter,bread,bread,bread,butter,butter,etc 
```

您想将任何实例更改`bread,butter`为`bread and butter`：

```
:%s/\(bread\),\(butter\)/\1 and \2/g 
```

# java - 使用 Jackson 仅反序列化某些 JSON 标签

> ID：11992292
> 
> 赞同：6
> 
> 时间：2012-08-16T17:16:05.893
> 
> 标签：java, json, jackson, deserialization

如果我不想反序列化所有标签以便我可以使用这个构造函数，有没有一种方法我不必从 JSON 中“手动”提取我需要的标签？

```
public class Tweet {
    public String username;
    public String message;
    public String image_url;

    @JsonCreator
    public Tweet(
            @JsonProperty("from_user")          String username,
            @JsonProperty("text")               String message,
            @JsonProperty("profile_image_url")  String url) {
        this.username = username;
        this.message = message;
        this.image_url = url;
    }
} 
```

这是 JSON：

```
 {
         "created_at":"Wed, 15 Aug 2012 18:17:55 +0000",
         "from_user":"felix_panda",
         "from_user_id":132396774,
         "from_user_id_str":"132396774",
         "from_user_name":"felix suganda",
         "geo":null,
         "id":235802515571101696,
         "id_str":"235802515571101696",
         "iso_language_code":"en",
         "metadata":{
            "result_type":"recent"
         },
         "profile_image_url":"http:\/\/a0.twimg.com\/profile_images\/2393214158\/profile_normal.jpg",
         "profile_image_url_https":"https:\/\/si0.twimg.com\/profile_images\/2393214158\/profile_normal.jpg",
         "source":"&lt;a href=&quot;http:\/\/www.tweetcaster.com&quot; rel=&quot;nofollow&quot;&gt;TweetCaster for Android&lt;\/a&gt;",
         "text":"@Android how do u fix you lost your data connection because you left home network with data roaming (cont) http:\/\/t.co\/4coRjaXT",
     "to_user":"Android",
     "to_user_id":382267114,
     "to_user_id_str":"382267114",
     "to_user_name":"Android" 
```

这是我在反序列化时遇到的错误：

```
com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field "created_at" 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-16T18:03:14.223

看起来您想[禁用](http://fasterxml.github.com/jackson-databind/javadoc/2.0.2/com/fasterxml/jackson/databind/ObjectMapper.html#disable%28com.fasterxml.jackson.databind.DeserializationFeature%29) [FAIL_ON_UNKNOWN_PROPERTIES](http://fasterxml.github.com/jackson-databind/javadoc/2.0.2/com/fasterxml/jackson/databind/DeserializationFeature.html#FAIL_ON_UNKNOWN_PROPERTIES)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T23:19:44.057

我正在使用 MongoJack。这是我为解决它所做的。

```
 ObjectMapper mapper = new ObjectMapper().setVisibility(PropertyAccessor.FIELD, Visibility.ANY);
    mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);
    MongoJackModule.configure(mapper);
    JacksonDBCollection<Message, Long> coll = JacksonDBCollection.wrap(dbCollection, Message.class, Long.class, mapper); 
```

# php - PHP数组通过foreach进行验证

> ID：11992303
> 
> 赞同：0
> 
> 时间：2012-08-16T17:17:01.223
> 
> 标签：php, arrays, validation, foreach

我正在做一个关于 PHP 的教程。我在 CRUD 课程的更新部分，正在编写验证脚本。我完全遵循了代码......我认为但仍然无法正常工作。这是问题所在：当我单击提交以尝试在菜单名称字段为空的情况下测试验证时，它会毫无错误地通过...并使用空列表项更新导航？我查看了代码，一切似乎都是正确的，但我对此很陌生，所以很容易忽略问题。

这是代码：

```
if(isset($_POST['submit'])) {
    $errors = array();

    $required_fields = array('menu_name', 'position', 'visible');   
    foreach($required_fields as $fieldname) {
        if(!isset($_POST[$fieldname]) || (empty($_POST[$fieldname]) && $_POST[$fieldname] != 0) ) {
            $errors[] = $fieldname;
        }
    }

    if(empty($errors)) {
        //Perform Update
        $id = mysql_prep($_GET['subj']);
        $menu_name = mysql_prep($_POST['menu_name']);
        $position = mysql_prep($_POST['position']);
        $visible = mysql_prep($_POST['visible']);

        $query = "UPDATE subjects SET
                    menu_name = '{$menu_name}',
                    position = {$position},
                    visible = {$visible} WHERE id = {$id}";

        $result = mysql_query($query, $connection);

        if(mysql_affected_rows() == 1){
            // success
            $message = "Subject was sucessfully updated"; 
        }else{
            $message = "The subject update failed.";
            $message .= "<br />" . mysql_error();
        }
    }else{
        //error occured
        $message = "There were " . count($errors) . " errors in the form.";
    }
} // end if(isset($_POST['submit']) )
?> 
```

以及正文中的代码：

```
<h2>Edit Subject: <?php echo $sel_subject['menu_name']; ?></h2>
<?php 
    if(!empty($message)){
        echo "<p class=\"message\">" . $message . "</p>";
    }
?>
<?php
    if(!empty($errors)){
        echo "<p class=\"errors\">";
        echo "Please review the folowing fields: <br />";
        foreach($errors as $error){
            echo "-" . $error . "</p>";
        }
    }
?> 
```

现在，当我将 (empty($_POST[$fieldname]) 更改为 (empty($_POST['menu_name']) 时，它会吐出错误，但它们是针对恰好正确的位置和可见字段...？有吗？一个我看不到的角色被遗漏了。我主要是复制和粘贴来防止那些愚蠢的错误。注意：对位置和可见性的验证确实有效......我认为......因为你不能离开那些无论如何，字段都是空白的，我怎么知道...

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:52:39.113

错误就在这里：

```
$_POST[$fieldname] != 0 
```

空字符串 = 0，因为 0 为假。因此，在您的 if 语句中，您说它是否为空（它是）并且不等于 0（它确实如此）。

你能做的是

1.  完全删除 !=0 语句，因为空的语句会很好地检查它。
2.  如果您想接受“0”作为选项，请使用正确的运算符：!=="0"。

当您使用 3 等于或 !== 时，它会针对类型进行验证。0===0, 0==false, "0"==0, "0"==false, and false===false, 但是 0!==false, 0!=="0" 和 "0 “！==假。我希望这是有道理的。

**编辑**

让我们通过一系列测试将其进一步深入地下。

```
$a='';
$b="0";
if(empty($a))
    echo'$a is empty<br/>';
if(empty($b))
    echo'$b is empty<br/>';
if($a!=0)
    echo'$a does not equal 0/false<br/>';
if($b!=0)
    echo'$b does not equal 0/false<br/>';
if($a!==0)
    echo'$a does not equal integer 0<br/>';
if($b!==0)
    echo'$b does not equal integer 0<br/>';
if($a!=="0")
    echo'$a does not equal string 0<br/>';
if($b!=="0")
    echo'$b does not equal string 0<br/>'; 
```

上面的输出将是

```
$a is empty
$b is empty
$a does not equal integer 0
$b does not equal integer 0
$a does not equal string 0 
```

**结论：** `$a==$b` , `$a!==$b`. `$a`AND`$b`是`==`to`0`和`==`to `false`，它们都不是整数，都是字符串，空字符串和包含`0`字符的字符串是不一样的。

更改`$_POST[$fieldname]!=0`为`$_POST[$fieldname]!=="0"`

# facebook - 从访问令牌中获取 Facebook 用户 ID

> ID：11992304
> 
> 赞同：1
> 
> 时间：2012-08-16T17:17:05.327
> 
> 标签：facebook, facebook-graph-api

是否可以使用访问令牌获取用户 ID？

我已经看到一些答案说[https://graph.facebook.com/me?access_token=abc](https://graph.facebook.com/me?access_token=abc)但我认为这是错误的，因为它获取了当前登录用户的详细信息，而不是访问令牌中的用户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T17:20:46.640

当前登录的用户*是*访问令牌中的用户 - 如果您有用户访问令牌，则您代表该用户行事。

这两个快捷方式是`/me`和`/app`是该访问令牌的用户和该访问令牌的应用程序的快捷方式

# java - 在 java 中运行 .msi 文件

> ID：11992305
> 
> 赞同：0
> 
> 时间：2012-08-16T17:17:14.767
> 
> 标签：java, windows-installer

所以我尝试像运行 exe 文件一样运行 .msi 文件，这可能是问题所在。我收到此错误消息

> java.io.IOException：无法运行程序“\”：CreateProcess 错误=193，%1 不是有效的 Win32 应用程序

```
 try {   Runtime rf = Runtime.getRuntime(); 
                   Process pf = rf.exec("\\IE8fix.msi");    
                } catch(Exception e) {                 
                    System.out.println(e.toString());                 
                            e.printStackTrace();
                                                    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T17:21:11.473

Windows 安装程序位于 %windir%\msiexec.exe MSI 文件不是独立的。它需要像这样运行`msiexec \"file.msi\"` 所以使用：

```
try {
   Runtime rf = Runtime.getRuntime(); 
   Process pf = rf.exec("msiexec /i \"\\IE8fix.msi\"");    
} catch(Exception e) {                 
   //System.out.println(e.toString()); // not necessary       
   e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:21:56.037

.msi 文件不是像 exe 这样的独立程序，它应该像这样从 Windows 安装程序运行（我希望这是正确的）：

```
Process pf = rf.exec("msiexec \"\\IE8fix.msi\""); 
```

# c# - 从asp.net中动态创建的文本框中获取文本

> ID：11992311
> 
> 赞同：5
> 
> 时间：2012-08-16T17:18:01.523
> 
> 标签：c#, asp.net, .net, dynamic, controls

我整个早上都在努力解决这个问题，所以希望我能得到一些帮助。本质上，我在从我在 .net 4 中动态创建的一些文本框控件获取值时遇到问题。

这是应用程序的所需流程。

1）。用户从作为信件模板的下拉菜单中选择一个 html 文档。此 html 文档包含格式为 $VARIABLENAME$ 的标签，这些标签将被正确的值替换。

2）。该程序通过模板运行并提取格式为 $STRING$ 的所有字符串并将它们存储在一个列表中。

3）。对于此列表中的每个条目，程序会根据原始 $VARIABLENAME$ 字段生成一个 asp:label 和一个带有唯一 ID 的 asp:textbox。

4）。用户输入替换值，然后点击提交。

5）。程序用替换值替换所有 $STRING$ 并输出结果。

一切都很好，直到我需要从文本框中获取值。我很确定这是页面生命周期的问题，但是因为直到用户从下拉列表中选择所需的模板才生成文本框，所以我不确定如何使它们通过回发持久化，以便我可以引用它们。

我对这一切都错了吗？在 submitbutton 事件发生回发后，如何访问从下拉事件创建的文本字段？

编辑：这是最相关的代码。

```
protected void createTextBoxes(List<string> results)
    {
        if (results != null)
        {
            foreach (string result in results)
            {
                string formattedResult = result.Substring(1, result.Length - 2);
                formattedResult = formattedResult.ToLower();
                formattedResult = char.ToUpper(formattedResult[0]) + formattedResult.Substring(1);

                var label = new Label();
                label.ID = formattedResult;
                label.Text = formattedResult + ": ";
                templateFormPlaceholder.Controls.Add(label);

                var textBox = new TextBox();
                textBox.ID = result;
                templateFormPlaceholder.Controls.Add(textBox);
                templateFormPlaceholder.Controls.Add(new LiteralControl("<br />"));

                previewBtn.Visible = true;
            }
        }
    }

protected void templateDD_SelectedIndexChanged(object sender, EventArgs e)
    {
        var templatePath = "";
        if (templateDD.SelectedIndex == 0)
        {
            previewBtn.Visible = false;
        }

        if (templateDD.SelectedIndex == 1)
        {
            templatePath = employeePath;
        }
        else if (templateDD.SelectedIndex == 2)
        {
            templatePath = managerPath;
        }
        List<string> regMatches = FindMatches(templatePath);
        Session["regMatches"] = regMatches;
        createTextBoxes(regMatches);
    }

protected void Page_Init(object sender, EventArgs e)
    {
        if (Session["regMatches"] != null)
        {
            createTextBoxes((List<string>)Session["regMatches"]);
        }
    } 
```

稍后，我尝试将这些文本框中的值添加到字典中。参数是字典的名称。关键字段是 $STRING$，结果是用户在文本框中输入的内容。

```
 protected void previewBtn_Click(object sender, EventArgs e)
    {
        List<string> matchResults = (List<string>)Session["regMatches"];
        Dictionary<string, string> parameters = new Dictionary<string, string>();
        foreach (string result in matchResults)
        {
            TextBox tb = (TextBox)templateFormPlaceholder.FindControl(result);
            parameters.Add(result, tb.Text);
        }

        var template = ReplaceKeys(parameters);
        outputLBL.Text = template; 
```

这是.aspx 代码。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="offerLetter.aspx.cs"     Inherits="templateRegexTesting.offerLetter" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
<form id="form1" runat="server">
<div>
    <p>
        Which template would you like to use?
    </p>
    <asp:DropDownList ID="templateDD" runat="server" OnSelectedIndexChanged="templateDD_SelectedIndexChanged"
        AutoPostBack="true">
        <asp:ListItem></asp:ListItem>
        <asp:ListItem Value="1">Employee</asp:ListItem>
        <asp:ListItem Value="2">Manager</asp:ListItem>
    </asp:DropDownList>
    <br />
    <asp:PlaceHolder ID="templateFormPlaceholder" runat="server" />
    <div>
        <asp:Button ID="previewBtn" runat="server" Text="Preview" Visible="false" OnClick="previewBtn_Click" />
    </div>
    <div>
        <asp:Label ID="outputLBL" runat="server"></asp:Label>
    </div>
    <br />
</div>
</form>
</body>
</html> 
```

编辑：当我想出来的时候，我把它放在评论中，但我认为我应该把它移到问题中，这样它就更明显了：

以为我应该更新这个。我觉得自己像个白痴，但我确实设法让它发挥作用。基本上，我为控件分配了一个等于替换令牌的 ID（例如 ID="$FIRSTNAME$"）。我什至没有意识到 $ 会引起任何问题。当我刚刚更改为 ID="Firstname" 格式时，它可以完美运行。谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T17:22:04.447

你是对的，这都是关于**页面生命周期**的。动态创建的控件必须在该`Page_Init`阶段重新创建，以便在视图状态绑定阶段*之前存在。*这意味着必须以某种方式（使用`Session`，也许）存储`textboxes`您在先前处理中创建的数量以重新创建它们。提醒使用**相同的 ID**并将它们添加到您的控制树（中继器或您正在使用的其他东西）。

* * *

**更新**

给你一个建议： 1.声明一个类型的类属性`List<TextBox>`（姑且称之为`CreatedTextBoxes`）

1.  声明一个接收创建文本框所需的任何内容的方法。此方法不得读取超出其范围的任何内容。它只会接收一些参数，创建文本框并将它们添加到另一个控件（例如 a `Repeater`）。将创建的每个文本框添加到`CreatedTextBoxes`

2.  在下拉更改事件中，读取选项，将其保存到`Session`并调用此方法

3.  在`Page_Init`处，验证在 处的对象`Session`。如果它为 null 或为空，则不执行任何操作。如果它有一个值，调用相同的方法，传递相同的参数

4.  当您需要从动态创建的文本框中检索它时，使用`CreatedTextBoxes`而不是`FindControls()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:53:51.063

您将`TextBox`控件添加到`templateFormPlaceholder.Controls`但用于`form1.FindControl`查找它们。**仅当控件直接包含在指定容器中时，该**`FindControl`方法才会找到控件- 来自[http://msdn.microsoft.com/en-us/library/486wc64h.aspx](http://msdn.microsoft.com/en-us/library/486wc64h.aspx)。试着打电话。**`templateFormPlaceholder.FindControl`**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-17T06:09:27.323

创建动态文本框并将其添加到 asp 面板，以便您可以轻松访问它。

这是 ASP.NET 设计元素。

```
<div class="form-group">
<asp:Panel ID="panel" runat="server" CssClass="form-group">

</asp:Panel>
</div> 
```

生成动态文本框的 C# 代码

```
 protected void create_dynamic_text(object sender, EventArgs e)
{
    int num = 5; // you can give the number here
    for (int i = 0; i < num;i++ )
    {
        TextBox tb = new TextBox();
        tb.ID = "txt_box_name" + i.ToString();
        tb.CssClass = "add classes if you need";
        tb.Width = 400; //Manage width and height 
        panel.Controls.Add(tb); //panel is my ASP.Panel object. Look above for the design code of ASP panel
    }
} 
```

取值的 C# 代码

```
 protected void reade_values(object sender, EventArgs e)
{
   int num=5; // your count goes here
    TextBox tb = new TextBox();
        for (int i = 0; i < num; i++)
        {
           tb=(TextBox)panel.FindControl("txt_box_name"+i.ToString());
           string value = tb.Text; //You have the data now
        }
    }
} 
```**

# spring - 任何基于 Spring 的 Web 推送（如通知），我可以在网页中更新通知而不刷新页面？

> ID：11992323
> 
> 赞同：6
> 
> 时间：2012-08-16T17:18:37.400
> 
> 标签：spring, jquery, notifications

是否有任何基于 Spring 的框架来向网页发送通知。我看过[http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_sse](http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_sse)我也在寻找可以支持大多数浏览器的东西。Spring 中是否有任何框架或附加组件可用于服务器端代码的此功能？以及为浏览器支持此功能的任何 jquery 框架？

TIA。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T22:20:06.907

我使用了“长轮询”方法。您基本上向服务器发出 ajax 请求以获取页面加载数据。服务器在响应之前等待直到数据可用。在客户端和服务器上，您可以使请求每 30 秒左右超时一次，以避免服务器上运行的线程过多。客户端只是在超时后重新发出请求。

[这个站点](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)很好地介绍了使用 jQuery 进行长轮询。

Spring 并没有任何明确的特性来支持这一点（例如，池化轮询线程）AFAIK，但您可以查看[Spring MVC 3.2 中的新异步支持](http://blog.springsource.org/2012/05/06/spring-mvc-3-2-preview-introducing-servlet-3-async-support/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:47:36.897

您可以编写自己的 servlet，如下所示，有关详细信息，请参阅[链接](http://www.tutorialspoint.com/html5/html5_server_sent_events.htm)。由于这适用于 servlet，因此也可能适用于 spring mvc 控制器。

```
import java.io.*;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class sse extends HttpServlet
{
public void doPost(HttpServletRequest request, HttpServletResponse response)
{
    try
    {
        System.out.println("SSE Demo");
        response.setContentType("text/event-stream");

        PrintWriter pw = response.getWriter();
        int i=0;
        while(true)
        {

            i++;
            pw.write("event: server-time\n\n");  //take note of the 2 \n 's, also on the next line.
            pw.write("data: "+ i + "\n\n");
            System.out.println("Data Sent!!!"+i);
            if(i>10)
            break;
        }
        pw.close();

    }catch(Exception e){
        e.printStackTrace();
    }
}

public void doGet(HttpServletRequest request,HttpServletResponse response)  
{
    doPost(request,response);
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-21T20:10:29.743

我使用它的方式是使用 javascript 的`setInterval()`方法以及 jQuery AJAX 调用来获取通知。在文档准备好时，调用它（在 jsp 中）： `setInterval(callMe, 30000)`

在 JS 文件中：

```
function callMe(){
...

  $.ajax({
  type: "GET",
  url: "ajaxNotifications",
  success: function(count){
  alert( "You have: " + count + "notifications now" );
  //stick it to #element or DIV or .class where ever you want.
  }
  error:function(){
  ...
  }
 });
} 
```

最后在 Spring 控制器中：

```
@RequestMapping(value="/ajaxNotifications", method = RequestMetho.GET)
public @ResponseBody String getMeCount(HttpServletReuest req, HttpServletRespones resp){
//get the desired values from req
...
//fire a reuest via service layer to the database for getting notifs number
...
//Don't forget to return it as a String, be it error or count.

} 
```

我希望这能给你一些想法或帮助其他人寻找这个问题的答案。:)

# javascript - 简单的 JQuery 拖放不起作用

> ID：11992328
> 
> 赞同：0
> 
> 时间：2012-08-16T17:19:06.840
> 
> 标签：javascript, jquery, css

好的，所以我尝试制作这个 [jsFiddle](http://jsfiddle.net/davidbuzatto/s9T4b/)

但是当我去我试图做[这个](http://bouncygames.org/scripts/testing.php)的网站时，我不能拖动它。

为什么我不能拖动或关闭我制作的这个弹出窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:22:08.787

在 JSFiddle 中`1.7.2`，您在您的网站 v 上使用 jQuery v `1.3`- 这是**古老**的。只需升级到最新

要更新，请将其放入您的文件中，而不是旧参考：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
<script>
    $( "#myDialog" ).draggable({
        handle: "#title"
    });
    $( "#closeBtn" ).click(function(){
        $(this).parent().fadeOut();
    });
</script> 
```

# javascript - Javascript 密码提交 - 表单

> ID：11992332
> 
> 赞同：1
> 
> 时间：2012-08-16T17:19:17.200
> 
> 标签：javascript, html, forms, passwords

我正在尝试为表单设置密码。我基本上希望有人在密码字段中输入密码并点击提交，如果密码正确，它会将他们重定向到同一窗口中的 buybutton.php。如果密码不正确，则会弹出一个 javascript 警报，提示“密码错误”。我试图写出 Javascript，但单击按钮时没有任何操作发生。我在下面的代码中做错了什么？谢谢您的帮助！

```
<!DOCTYPE html>
<body width="950" height="300" style="background-image:url('giftcard_bg.jpg');">
<head>
<SCRIPT LANGUAGE="JavaScript">
    function goForit() {
      var passwd;
      passwd = this.document.giftForm.pass.value;
      if(passwd=="samsamsam"){
      window.open ('buybutton.php','_self',false)
      }
      else{
      alert('Password wrong');
      }
    }
</SCRIPT>
</head>

<div style="position:absolute; top:150px; left:285px; text-align:center;">
    <form id="giftForm">        
        <input type="password" id="pass" placeholder="Enter Secret Code" style="font-size:150%;"/>
        <br />
        <input type="button" onClick="goForit()" value="Submit" style="font-size:150%; margin-top:15px;" />                 
     </form>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:25:07.313

你应该使用`document.getElementById('pass').value`而不是`this.document.giftForm.pass.value`

```
function goForit() {
  var passwd;
  passwd = document.getElementById('pass').value;
  if(passwd=="samsamsam"){
  window.open ('buybutton.php','_self',false)
  }
  else{
  alert('Password wrong');
  }
} 
```

**警告语：**

但请注意！大家可以看源码找到密码！！！

取而代之的是，您应该将表单发送到服务器，并在服务器端检查它是否正确。如果正确，将用户重定向到buybutton.php，但向他发送一个cookie，授权他进入该页面。那个页面应该检查他是否有那个cookie。

但我不是专家，如果你愿意，你应该提出另一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:31:41.127

```
passwd = this.document.giftForm.pass.value; 
```

导致错误尝试

```
passwd = document.getElementById('pass').value; 
```

`;`在 window.open 之后你也错过了`('buybutton.php','_self',false)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T17:27:45.717

这应该工作

```
function goForit() {
      var passwd = document.getElementById("pass").value;
      if(passwd=="samsamsam"){
      window.open ('buybutton.php','_self',false)
      }
      else{
      alert('Password wrong');
      }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T17:30:09.037

Oriol 和 Rajeev 的回答是正确的。

或者，您可以这样做：

改变

```
passwd = this.document.giftForm.pass.value; 
```

到

```
passwd = document.forms['giftForm'].pass.value; 
```

# php - 多部分电子邮件 PHP 变量

> ID：11992338
> 
> 赞同：0
> 
> 时间：2012-08-16T17:19:31.943
> 
> 标签：php, email, html-email, multipart

我正在发送一封 PHP 多部分电子邮件，但由于某种原因，PHP 变量没有显示在传入的邮件中（我确实在漂亮的 HTML 模板中收到了）。下面是代码，我确定页面上的会话变量是可用的，因为我将它们显示在同一页面上。希望大家能帮忙！

```
$mail_ontv2 = " ".$_SESSION['emailcontact']." "; 

$_POST['onderwerp2'] = "Aanmelding";

    // set datum 
    $datum2 = date("d.m.Y H:i"); 

    //boundary
    $boundary = uniqid('np');

    $headers2 .= "MIME-Version: 1.0\r\n";
    $headers2 .= "From: *** < info@***.nl >";
    $headers2 .= "To: ".$mail_ontv2."\r\n";
    $headers2 .= "Content-Type: multipart/alternative;boundary=" . $boundary . "";

    // set ip 
    $ip2 = $_SERVER['REMOTE_ADDR']; 

    //here is the content body
    $inhoud_mail2 .= "This is a MIME encoded message.";
    $inhoud_mail2 .= "\r\n\r\n--" . $boundary . "\r\n";
    $inhoud_mail2 .= "Content-type: text/plain;charset=utf-8\r\n\r\n";

    //Plain text body
    $inhoud_mail2 .= "U heeft zich zojuist succesvol aangemeld bij ***.\n\n\n";     
    $inhoud_mail2 .= "Uw gegevens:\n\n";
    $inhoud_mail2 .= "Bedrijfsnaam: " . $_SESSION['bedrijfsnaam'] . "\n"; 
    $inhoud_mail2 .= "Adres: " . $_SESSION['straat'] . " " . $_SESSION['huisnummer'] . " \n"; 
    $inhoud_mail2 .= "Postcode: " . $_SESSION['postcode'] . "\n"; 
    $inhoud_mail2 .= "Plaats: " . $_SESSION['plaats'] . "\n\n"; 
    $inhoud_mail2 .= "Telefoonnummer: " . $_SESSION['telefoonnummer'] . "\n"; 
    $inhoud_mail2 .= "E-mail adres: " . $_SESSION['email'] . "\n"; 
    $inhoud_mail2 .= "KvK-nummer: " . $_SESSION['kvk'] . "\n"; 
    $inhoud_mail2 .= "BTW-nummer: " . $_SESSION['btw'] . "\n"; 
    $inhoud_mail2 .= "Rechtsvorm: " . $_SESSION['rechtsvorm'] . "\n\n"; 
    $inhoud_mail2 .= "Contactpersoon: " . $_SESSION['contactpersoon'] . "\n"; 
    $inhoud_mail2 .= "Geslacht: " . $_SESSION['geslachtcontactpersoon'] . "\n"; 
    $inhoud_mail2 .= "Tel. nr. contactpersoon: " . $_SESSION['telefoonnummercontact'] . "\n"; 
    $inhoud_mail2 .= "E-mail adres contactpersoon: " . $_SESSION['emailcontact'] . "\n\n"; 
    $inhoud_mail2 .= "Bent u een accounting bedrijf? " . $_SESSION['accounting'] . "\n";
    $inhoud_mail2 .= "Door u gekozen abonnement: " . $_SESSION['abonnement'] . "\n";
    $inhoud_mail2 .= "Gewenste gebruikersnaam: " . $_SESSION['gebruikersnaam'] . "\n";
    $inhoud_mail2 .= "Boekhoudprogramma: " . $_SESSION['boekhoudprogramma'] . "\n";
    $inhoud_mail2 .= "Twinfield abonnement? " . $_SESSION['twinfield'] . "\n\n";
    $inhoud_mail2 .= "Betalingsmethode: " . $_SESSION['betalingsmethode'] . "\n";
    $inhoud_mail2 .= "E-mailadres factuur: " . $_SESSION['emailfactuur'] . "\n";
    $inhoud_mail2 .= "Bank: " . $_SESSION['bank'] . "\n";
    $inhoud_mail2 .= "Tenaamstelling: " . $_SESSION['tenaamstelling'] . "\n";
    $inhoud_mail2 .= "Rekeningnummer: " . $_SESSION['rekeningnummer'] . "\n";
    $inhoud_mail2 .= "Toestemming tot afschrijving: " . $_SESSION['afschrijving'] . "\n\n";
    $inhoud_mail2 .= "Akkoord met de voorwaarden? " . $_SESSION['voorwaarden'] . "\n";
    $inhoud_mail2 .= "Bent u gemachtigd? " . $_SESSION['gemachtigd'] . "\n\n";

    $inhoud_mail2 .= "Verstuurd op " . $datum . " via het ip " . $ip . "\n\n\n"; 
    $inhoud_mail2 .= "Onze Algemene Voorwaarden: https://www.***.nl/wp-content/uploads/general/TC/***-AV-v1-1-NL.pdf \n";
    $inhoud_mail2 .= "Onze Service level agreement: https://www.***.nl/wp-content/uploads/general/TC/***-SLA-v1-2-NL.pdf \n\n";
    $inhoud_mail2 .= "Dat u deze mail ontvangt betekend dat u akkoord ging \n";
    $inhoud_mail2 .= "met het bovenstaande. Opzegging is kosteloos mogelijk binnen 30 dagen. \n\n";
    $inhoud_mail2 .= "Met vriendelijke groet, \n";
    $inhoud_mail2 .= "*** N.V. \n";
        $inhoud_mail2 .= "\r\n\r\n--" . $boundary . "\r\n";
    $inhoud_mail2 .= "Content-type: text/html;charset=utf-8\r\n\r\n";

    //Html body
    $inhoud_mail2 .= "

<html>
<body leftmargin=\"0\" marginwidth=\"0\" topmargin=\"0\" marginheight=\"0\" offset=\"0\">

<table width=\"100%\" bgcolor=\"#e7e7e7\" cellpadding=\"10\" cellspacing=\"0\" background=\"http://www.***.nl/email/bc.jpg\">
    <tr valign=\"top\" align=\"center\">
        <td>
            <table width=\"550\" cellpadding=\"0\" cellspacing=\"0\">
                <tr>
                    <td>
                        <img src=\"http://www.***.nl/email/email-header.png\" alt=\"Header **** Email\" /><br /><br />
                    </td>
                </tr>
                <tr>
                    <td style=\"margin: 25px; padding:15px\" bgcolor=\"#ffffff\">

                        <h2 style=\"color:#545454; font-weight:600; font-size: 20px; letter-spacing:-1px; font-family:Verdana, Verdana, Geneva, sans-serif;\">Aanmelding ***!</h2>
                                                <p style=\"color:#3d3d3d;font-family:Verdana, Verdana, Geneva, sans-serif; line-height: 20px; font-size: 14px;\">

U heeft zich zojuist succesvol aangemeld bij ***.<br /><br /><Br />     
<b>Uw gegevens:</b><br /><Br />
Bedrijfsnaam: <?php echo $_SESSION[bedrijfsnaam]; ?>  <Br /> 
Adres: <?php echo $_SESSION[straat]; ?>  <?php echo $_SESSION[huisnummer]; ?> <Br /> 
Postcode: <?php echo $_SESSION[postcode]; ?>  <Br />
Plaats: <?php echo $_SESSION[plaats]; ?>  <Br /> 
Telefoonnummer: <?php echo $_SESSION[telefoonnummer]; ?>  <Br />
E-mail adres: <?php echo $_SESSION[email]; ?>  <Br />
KvK-nummer: <?php echo $_SESSION[kvk]; ?>  <Br />
BTW-nummer: <?php echo $_SESSION[btw]; ?>  <Br />
Rechtsvorm: <?php echo $_SESSION[rechtsvorm]; ?>  <Br /><Br />
Contactpersoon: <?php echo $_SESSION[contactpersoon]; ?>  <Br />
Geslacht: <?php echo $_SESSION[geslachtcontactpersoon]; ?>  <Br />
Tel. nr. contactpersoon: <?php echo $_SESSION[telefoonnummercontact]; ?>  <Br />
E-mail adres contactpersoon: <?php echo $_SESSION[emailcontact]; ?>  <Br />
Bent u een accounting bedrijf? <?php echo $_SESSION[accounting]; ?>  <Br />
Door u gekozen abonnement: <?php echo $_SESSION[abonnement]; ?>  <Br />
Gewenste gebruikersnaam: <?php echo $_SESSION[gebruikersnaam]; ?>  <Br />
Boekhoudprogramma: <?php echo $_SESSION[boekhoudprogramma]; ?>  <Br />
Twinfield abonnement? <?php echo $_SESSION[twinfield]; ?>  <Br /><br />
Betalingsmethode: <?php echo $_SESSION[betalingsmethode]; ?>  <Br />
E-mailadres factuur: <?php echo $_SESSION[emailfactuur]; ?>  <Br />
Bank: <?php echo $_SESSION[bank]; ?>  <Br />
Tenaamstelling: <?php echo $_SESSION[tenaamstelling]; ?>  <Br />
Rekeningnummer: <?php echo $_SESSION[rekeningnummer]; ?>  <Br />
Toestemming tot afschrijving: <?php echo $_SESSION[afschrijving]; ?>  <Br />
Akkoord met de voorwaarden? <?php echo $_SESSION[voorwaarden]; ?>  <Br />
Bent u gemachtigd? <?php echo $_SESSION[gemachtigd]; ?>  <Br /><Br />

Verstuurd op <?php echo $datum; ?>  via het ip <?php echo $ip; ?> <Br /><Br /> 
Onze Algemene Voorwaarden: <A style=\"color:#2873ba\" href=\"https://www.***.nl/wp-content/uploads/general/TC/***-AV-v1-1-NL.pdf\">https://www.***.nl/wp-content/uploads/general/TC/***-AV-v1-1-NL.pdf</a><Br />
Onze Service level agreement: <A style=\"color:#2873ba\" href=\"https://www.***.nl/wp-content/uploads/general/TC/***-SLA-v1-2-NL.pdf\">https://www.***.nl/wp-content/uploads/general/TC/***-SLA-v1-2-NL.pdf</a><Br />
Dat u deze mail ontvangt betekend dat u akkoord ging<br />
met het bovenstaande. Opzegging is kosteloos mogelijk binnen 30 dagen.<Br /><Br />
Met vriendelijke groet,<Br />
*** N.V.<Br />
E-mail: <a href=\"mailto:info@***.nl\" style=\"color:#2873ba\"> info@***.nl</a><Br />

</p><Br /><Br />

                    </td>
                </tr>
                <tr>
                    <td style=\"background-color:#ababab;\" >
                        <img src=\"http://www.***.nl/email/pic.png\" style=\"margin-top:2px\">
                    </td>
                </tr>

                <tr>
                    <td style=\"padding: 10px; background-color:#2873ba;\" >
                        <br />
                    </td>
                </tr>

                <tr>
                    <td style=\"padding: 10px;\" >
                        <br /><Br /><Br />
                    </td>
                </tr>

            </table>
        </td>
    </tr>
</table>

</body>
</html>

";
    $inhoud_mail2 .= "\r\n\r\n--" . $boundary . "--";

    $_POST['onderwerp2'] = str_replace("\n", "", $_POST['onderwerp2']); // Verwijder \n 
    $_POST['onderwerp2'] = str_replace("\r", "", $_POST['onderwerp2']); // Verwijder \r 
    $_POST['onderwerp2'] = str_replace("\"", "\\\"", str_replace("\\", "\\\\", $_POST['onderwerp2'])); // Slashes van quotes 

    mail($mail_ontv2, $_POST['onderwerp2'], $inhoud_mail2, $headers2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:26:47.570

试试这个

```
$inhoud_mail2 .= "   
<html>
<body leftmargin=\"0\" marginwidth=\"0\" topmargin=\"0\" marginheight=\"0\" offset=\"0\">
<table width=\"100%\" bgcolor=\"#e7e7e7\" cellpadding=\"10\" cellspacing=\"0\" background=\"http://www.***.nl/email/bc.jpg\">
    <tr valign=\"top\" align=\"center\">
        <td>
            <table width=\"550\" cellpadding=\"0\" cellspacing=\"0\">
                <tr>
                    <td>
                        <img src=\"http://www.***.nl/email/email-header.png\" alt=\"Header **** Email\" /><br /><br />
                    </td>
                </tr>
                <tr>
                    <td style=\"margin: 25px; padding:15px\" bgcolor=\"#ffffff\">
                        <h2 style=\"color:#545454; font-weight:600; font-size: 20px; letter-spacing:-1px; font-family:Verdana, Verdana, Geneva, sans-serif;\">Aanmelding ***!</h2>
                        <p style=\"color:#3d3d3d;font-family:Verdana, Verdana, Geneva, sans-serif; line-height: 20px; font-size: 14px;\">
                            U heeft zich zojuist succesvol aangemeld bij ***.<br /><br /><Br />     
                            <b>Uw gegevens:</b><br /><Br />
                            Bedrijfsnaam: $_SESSION[bedrijfsnaam]  <Br /> 
                            Adres: $_SESSION[straat]  $_SESSION[huisnummer] <Br /> 
                            Postcode: $_SESSION[postcode]  <Br />
                            Plaats: $_SESSION[plaats]  <Br /> 
                            Telefoonnummer: $_SESSION[telefoonnummer]  <Br />
                            E-mail adres: $_SESSION[email]  <Br />
                            KvK-nummer: $_SESSION[kvk]  <Br />
                            BTW-nummer: $_SESSION[btw]  <Br />
                            Rechtsvorm: $_SESSION[rechtsvorm]  <Br /><Br />
                            Contactpersoon: $_SESSION[contactpersoon]  <Br />
                            Geslacht: $_SESSION[geslachtcontactpersoon]  <Br />
                            Tel. nr. contactpersoon: $_SESSION[telefoonnummercontact]  <Br />
                            E-mail adres contactpersoon: $_SESSION[emailcontact]  <Br />
                            Bent u een accounting bedrijf? $_SESSION[accounting]  <Br />
                            Door u gekozen abonnement: $_SESSION[abonnement]  <Br />
                            Gewenste gebruikersnaam: $_SESSION[gebruikersnaam]  <Br />
                            Boekhoudprogramma: $_SESSION[boekhoudprogramma]  <Br />
                            Twinfield abonnement? $_SESSION[twinfield]  <Br /><br />
                            Betalingsmethode: $_SESSION[betalingsmethode]  <Br />
                            E-mailadres factuur: $_SESSION[emailfactuur]  <Br />
                            Bank: $_SESSION[bank]  <Br />
                            Tenaamstelling: $_SESSION[tenaamstelling]  <Br />
                            Rekeningnummer: $_SESSION[rekeningnummer]  <Br />
                            Toestemming tot afschrijving: $_SESSION[afschrijving]  <Br />
                            Akkoord met de voorwaarden? $_SESSION[voorwaarden]  <Br />
                            Bent u gemachtigd? $_SESSION[gemachtigd]  <Br /><Br />
                            Verstuurd op $datum  via het ip $ip <Br /><Br /> 
                            Onze Algemene Voorwaarden: <A style=\"color:#2873ba\" href=\"https://www.***.nl/wp-content/uploads/general/TC/***-AV-v1-1-NL.pdf\">https://www.***.nl/wp-content/uploads/general/TC/***-AV-v1-1-NL.pdf</a><Br />
                            Onze Service level agreement: <A style=\"color:#2873ba\" href=\"https://www.***.nl/wp-content/uploads/general/TC/***-SLA-v1-2-NL.pdf\">https://www.***.nl/wp-content/uploads/general/TC/***-SLA-v1-2-NL.pdf</a><Br />
                            Dat u deze mail ontvangt betekend dat u akkoord ging<br />
                            met het bovenstaande. Opzegging is kosteloos mogelijk binnen 30 dagen.<Br /><Br />
                            Met vriendelijke groet,<Br />
                            *** N.V.<Br />
                            E-mail: <a href=\"mailto:info@***.nl\" style=\"color:#2873ba\"> info@***.nl</a><Br />
                        </p><Br /><Br />
                    </td>
                </tr>
                <tr>
                    <td style=\"background-color:#ababab;\" >
                        <img src=\"http://www.***.nl/email/pic.png\" style=\"margin-top:2px\">
                    </td>
                </tr>
                <tr>
                    <td style=\"padding: 10px; background-color:#2873ba;\" >
                        <br />
                    </td>
                </tr>
                <tr>
                    <td style=\"padding: 10px;\" >
                        <br /><Br /><Br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</body>
</html>"; 
```

您只需要用这个替换 $inhoud_mail2 数据。. 你的问题将得到解决。. 干杯！！

# sql-server - How to do Wordpress Authentication via SQL Server

> ID：11992355
> 
> 赞同：0
> 
> 时间：2012-08-16T17:20:19.083
> 
> 标签：sql-server, wordpress

I have a website at my work place created on ASP.NET and SQL Server. We are hoping to integrate a wordpress blog to the website. I was wondering if there is a way to install Wordpress on a LAMP environment and still do the authentication with the existing Windows SQL Server Database.

# html - IPAD 上 youtube 视频上的 DIV 不可点击

> ID：11992358
> 
> 赞同：3
> 
> 时间：2012-08-16T17:20:27.747
> 
> 标签：html, css, ipad, youtube

我正在为 iPad 开发一个网页，但我遇到了一个问题：

我正在插入一个 youtube 视频（作为 iframe）并且需要一个 div 来保持它的顶部。

我已经知道了，在 youtube 视频的 URL 上使用“?wmode=transparent”，并且也使用了 z-index。

在 PC 上它工作正常，按预期工作，我可以随时点击顶部 div。

在 Ipad 上，当视频第一次显示时，按预期工作，视觉上 div 停留在视频之上，我可以点击 div 内容。

当我单击 youtube 上的“播放”按钮时，视频已正确加载；但是当我点击 div 内容时，点击被传递给 youtube 播放器，div 不再是可点击的。

有什么建议么？

编辑： iframe 看起来像这样：

```
<iframe style="width: 100%; height: 100%" src="http://www.youtube.com/embed/JQkActP-isE?wmode=transparent" frameborder="0" allowfullscreen=""></iframe> 
```

顶部 div 如下所示：

```
<div class="topdiv" style="position: absolute; right: -410px; width: 400px; display: block; background-color: rgb(255, 255, 255); z-index: 500000; background-position: initial initial; background-repeat: initial initial; "> 
```

注意：播放视频时，Div 变得不可点击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:13:21.440

我在您的 div 中错过了**`height`**可能是问题的属性。如果没有，那么您可以尝试使用此方法而不是 iframe：

```
<object width="560" height="340" wmode="transparent">
            <param name="movie" value="http://www.youtube.com/v/rUL0M__g1k4">
            <param name="allowFullScreen" value="true">
            <param name="allowscriptaccess" value="always">
            <embed src="http://www.youtube.com/v/rUL0M__g1k4" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="560" height="340">
 </object> 
```

# cocoa - NSComboBox 绑定，因此它调用 selectItematIndex 而不仅仅是显示属性值

> ID：11992364
> 
> 赞同：1
> 
> 时间：2012-08-16T17:20:46.690
> 
> 标签：cocoa, interface-builder, restkit, cocoa-bindings, nscombobox

我有一个绑定到对象控制器的 NSCombobox。对象控制器是通过 RestKit 的对象序列化框架创建的（自定义）**员工类的实例。**NSComboBox 的 Value 绑定到一个 key path **employeeType**，这是一个存储在远程 MySql 数据库中的 int 值。int 值对应于员工类型，所以

```
0 == "Full Time" 
1 == "Part Time"
2 == "Terminated"
....
11 == "Temp Worker" 
```

目前（如预期），NSComboBox 显示 int 值。有没有办法调用 selectItemAtIndex: 在 IB 中使用该 int 值，以便它选择该索引处的项目，而不仅仅是通过绑定将 int 值放入 NSComboBox 中？

我的想法是我可以覆盖 aa 属性中的 getter，所以它看起来像：

```
if ([self employeeType] == 0) {
    [comboBox selectItemAtIndex:0];
} 
```

但我不相信这是对绑定的正确使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:34:50.840

将弹出按钮的“选定索引”绑定到您的控制器，而不是“选定值”。这是一个屏幕截图，可以让事情更清楚：

![界面生成器 - 绑定](../Images/8f7366cf569f4c7eebbd277dab7bcc8f.png)

# objective-c - 抓取一个被遮挡的窗口的屏幕截图

> ID：11992369
> 
> 赞同：3
> 
> 时间：2012-08-16T17:21:07.687
> 
> 标签：objective-c, macos, quartz-graphics

我正在使用 CGWindowListCreateImage 来获取屏幕截图。我正在尝试获取一个特定的窗口，我知道它的 windowID。这是我正在使用的代码，但它似乎总是占据整个屏幕，包括所有窗口。

```
CGImageRef windowImage = CGWindowListCreateImage(
      CGRectNull, 
      kCGWindowListOptionOnScreenOnly, 
      windowID, 
      kCGWindowImageBoundsIgnoreFraming); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T18:19:29.707

您要求它抓取整个屏幕，包括所有窗口，因此您得到的正是您所要求的。查看[文档](https://developer.apple.com/library/mac/#documentation/Carbon/reference/CGWindow_Reference/Reference/Functions.html)：

> *窗口选项*
> 
> > 描述要包含在图像中的窗口的选项。典型选项使您可以选择所有窗口或在 windowID 参数中指定的窗口上方或下方的窗口。有关详细信息，请参阅“窗口列表选项常量”。</p>

对于此值，您正在传递`kCGWindowListOptionOnScreenOnly`，这意味着：

> 列出当前在屏幕上的所有窗口。窗户按从前到后的顺序返回。使用此选项检索列表时，relativeToWindow 参数应设置为 kCGNullWindowID。

从技术上讲，用 windowID 传递这个选项甚至是不合法的，但如果你这样做了，Quartz 很好，它会忽略你的 ID。

如果您希望您的屏幕截图绑定到窗口的屏幕矩形，您需要传递它，而不是`CGRectNull`. 如果您想要隐藏的窗口而不是它前面的东西，请使用`kCGWindowListOptionOnScreenBelowWindow | kCGWindowListOptionIncludingWindow`您的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-16T14:09:28.147

我只是有同样的问题。该`kCGWindowImageBoundsIgnoreFraming`选项记录在案以允许指定`CGRectNull`：

> 当请求的捕获矩形为`CGRectNull`时，使用此选项仅捕获窗口区域，不捕获任何窗口框架效果占用的区域。

但对我来说，我不得不指定`kCGWindowListOptionIncludingWindow`为唯一的窗口选项。这与文档所说的有点矛盾：

> 您必须将此选项与`kCGWindowListOptionOnScreenAboveWindow`or`kCGWindowListOptionOnScreenBelowWindow`选项结合使用以检索有意义的结果。

但如果我听从了这个建议，屏幕截图总是整个屏幕。总而言之，以下内容按预期对我有用：

```
CGImageRef windowImage = CGWindowListCreateImage(
      CGRectNull, 
      kCGWindowListOptionIncludingWindow, 
      windowID, 
      kCGWindowImageBoundsIgnoreFraming); 
```

（或者几乎与预期的一样 - 屏幕截图仍然包含窗口的标题栏，我希望这`kCGWindowImageBoundsIgnoreFraming`意味着窗口的标题栏也被跳过）。

# firefox - 如何获取损坏的 Firefox 扩展的特定错误？

> ID：11992376
> 
> 赞同：8
> 
> 时间：2012-08-16T17:21:23.440
> 
> 标签：firefox, firefox-addon, packaging, xpi

**背景：**

我正在开发 Firefox 的扩展，显然在某处犯了错误。这是我的第一个扩展，所以如果问题最终变得简单，我不会感到惊讶。

问题是我什至无法从 Firefox 中得到一个像样的错误来解决问题。

**问题**

当我尝试通过将 XPI 文件拖到 Awesome/Location 栏中来安装我的扩展程序时，我收到一条错误消息，指出“无法安装此插件，因为它似乎已损坏。” 对于尝试开发和扩展的人来说，这不是一个非常有用的错误。

有谁知道获得更详细的错误消息的方法？谷歌搜索我自己找不到任何东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-03T08:21:17.983

Firefox 在“工具”>“Web 开发人员”>“错误控制台”下有一个错误控制台（我是 ctrl+shift+j）。

打开错误控制台，可能已经列出了很多警告。清除所有这些，然后尝试做一些事情，即安装您的扩展程序。控制台将自动更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-02T12:37:51.850

我在 Windows 10 上遇到了类似的问题。相同的扩展在 Opera/Edge/Chrome 中运行良好，没有任何错误。我尝试了在互联网上找到的不同解决方案，最后没有任何帮助，所以我只是从 Opera 下载了我自己的扩展作为 zip 文件。奇迹般有效！

转到 `https://addons.opera.com/developer/package/_your_package_here/` 单击`Versions`选项卡选择要下载的版本，然后在下面有一个下载按钮`Info` `Package`

# ruby - 如何在红宝石中使用哈希

> ID：11992387
> 
> 赞同：0
> 
> 时间：2012-08-16T17:22:10.523
> 
> 标签：ruby, hash

我正在尝试使用哈希来存储用户。我有这段代码，它正在工作，但这不是我想要的方式：

```
@user_hash = Hash.new
@user_hash = User.all(:all)

user = Hash.new
user = @user_hash.select { |item| item["user_id"] == '001' }

puts user[0].name 
```

我怎样才能使用类似`user.name`insted的东西`user[0].name`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T17:33:57.487

首先，你不需要在使用之前初始化你的哈希——这两个调用在`Hash.new`这里都是不必要的。

其次，您唯一的问题是您正在使用该`select`方法。引用[文档](http://ruby-doc.org/core-1.9.3/Hash.html#method-i-select)：

> 返回一个新的哈希，该哈希由块返回 true 的条目组成。

那不是你想要的。您想使用`detect`：传递枚举中的每个条目以阻止。返回第一个不为假的块。

`user = @user_hash.detect { |item| item["user_id"] == '001' }`应该管用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:31:06.740

要创建哈希，您应该使用以下语法：

`@user_hash = Hash[User.find(:all).collect{|u| [u.user_id, u]}]`

然后您可以执行以下操作：

`puts user["001"].name`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T17:36:05.583

`user = Hash.new`是浪费时间，因为您正在用以下结果覆盖它`select`。

并`select`返回一个通过测试的哈希数组。

您想要`.find`或其同义词`.detect`而不是`.select`.

# matlab - matlab2tikz 产生大量排版 tikz 代码

> ID：11992397
> 
> 赞同：2
> 
> 时间：2012-08-16T17:22:55.347
> 
> 标签：matlab, latex, octave

[`matlab2tikz`](http://www.mathworks.com/matlabcentral/fileexchange/22022-matlab2tikz)是将`matlab`/`octave`数字转换为 tikz 代码的绝佳软件包。

但是，如果该图包含很多点，则生成的 tikz 代码对于乳胶排版来说非常繁重。有时编译甚至会失败并显示以下消息：`TeX capacity exceeded, sorry`.

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T17:22:55.347

`matlab2tikz`在转换为 tikz-pgf 期间，有一个非常聪明的选项可以对数字进行**下采样。**它被称为`minimumPointsDistance`。在大多数情况下，这确实可以纠正这种情况。

但是，有时当实际点数下降非常低时，它会扭曲曲线的某些“僵硬”区域。如下图所示

![在此处输入图像描述](../Images/7e7d8af5f5e2b4add9a448f5bd59b825.png)

蓝色曲线（1184 点）是原始曲线，而红色曲线（117 点）是还原曲线。失真很明显。

为了解决这个问题，同时保持低点数，我编写了一个新的点减少算法，它更有效（但有时可能会更慢）。结果（红色曲线为116点）

![在此处输入图像描述](../Images/6a5cc57915b15ebb1ad8cbbac5083151.png)

很明显，失真消失了。

但是还是有

**另一个缺点**

这两种算法都存在。当一个人将一批图转换为 tikz 时，他们通常希望所有简化图的质量一致。但有时这是不可能的（至少不需要额外的努力），因为**通常`minimumPointsDistance`必须为每个图形设置不同的值，**结果实际上取决于区间 [min_y, max_y] 和 [min_x, max_x] 的大小以及图中的点数。

因此，为了克服这个问题，使`minimumPointsDistance`所有图形能够统一设置为特定值，产生统一质量的简化版本，使用标准化，现在`minimumPointsDistance`“内部”指的是打印在纸上的实际尺寸数字。

[您可以从此处](http://users.auth.gr/konstheo/matlab2tikz_modified.rar)下载修改后的 matlab2tikz.m 文件以及说明。

**请注意**，没有进行详尽的测试，所以要小心！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T18:19:55.270

（评论有点长）

您可以使用[matlabfrag](http://www.mathworks.com/matlabcentral/fileexchange/21286)，它将您的图形转换为 eps 并在编译 LaTeX 时，将字符串数据替换为乳胶字符串。这样您就不会遇到样本数量过多的问题。二次采样很糟糕（除非你当然有 100k 点），因为你想保留高分辨率矢量图。

示例：[http ://www.mediafire.com/view/?atstyyu4bj198wp](http://www.mediafire.com/view/?atstyyu4bj198wp)

# r - 我可以在代理服务器后面使用 Amazon EC2 吗？

> ID：11992399
> 
> 赞同：0
> 
> 时间：2012-08-16T17:23:01.800
> 
> 标签：r, proxy, amazon-ec2

我在`EC2`我的笔记本电脑 ( `Ubuntu 12.04`) 上使用`RStudio`，并在代理服务器后面的 Web 浏览器中运行。我假设`RStudio`正在从 Web 浏览器设置页面获取代理设置。

我想使用终端窗口在`EC2`实例上做一些其他的事情，但不知道在哪里给它提供代理设置。

它在安全组区域的某个地方吗？或者我可以在终端（`ie ssh -i myKey12345.key user@ec2-XX-XXX-XXX-XX.us-west-2.compute.amazonaws.com -user:pass:proxyIP:port`）中的连接命令中添加一些东西吗？

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:44:29.087

是的，只需按照[常见的 EC2 / Ubuntu 教程](https://help.ubuntu.com/community/EC2StartersGuide)中的步骤进行操作，最后一步通常是`ssh`在 EC2 实例上实际获取 shell 的命令。

如果并且当您的本地策略阻止上述内容到达 EC2 实例时，您需要相应地进行 ssh 设置。根据我的经验，“ssh outbound”通常是允许的。您的里程可能会有所不同，但在这种情况下，它正在成为一个 ssh 配置问题。

# c - 我想了解 C 中的 malloc() 和 realloc()

> ID：11992400
> 
> 赞同：0
> 
> 时间：2012-08-16T17:23:18.717
> 
> 标签：c, malloc, dynamic-memory-allocation

> **可能重复：**
> [在 malloc() 之后写入指针越界不会导致错误](https://stackoverflow.com/questions/4534780/writing-to-pointer-out-of-bounds-after-malloc-not-causing-error)

我正在尝试一个非常基本的程序来为只有 2 的数组分配内存`ints`。我只为 2 分配内存`ints`，即`array[0]`, 和`array[1]`: 为什么可以使用`array[2]`并且运行良好？

```
#include <stdio.h>

int main(int argc, char *argv[])
{
    int *array;
    int i;
    array = NULL;
    array = malloc(sizeof(int)*2);

    array[0] = 2;
    array[1] = 3;
    array[2] = 4;

    for( i = 0; i<3 ; i++)
    printf("%d\n", array[i]);

    return 0;
} 
```

**输出：**

```
 2
 3
 4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:33:53.757

[在此处](https://stackoverflow.com/questions/4534780/writing-to-pointer-out-of-bounds-after-malloc-not-causing-error)阅读答案以获得更好的理解

本质上是内存损坏，如此[处所述](https://stackoverflow.com/a/4534790/1013444)

尝试使用一个非常大的数字而不是 4，它会产生错误，因为当您调用 malloc() 时，一小块内存会从一个较大的页面中为您雕刻出来。所以写超出你的块的范围并不一定意味着你会崩溃。在数组 [4] 中，您不会在为该初始块分配的页面范围之外写入内容，因此您在技术上是在写入有效的映射地址。[资源](https://stackoverflow.com/a/4539567/1013444)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T17:24:48.160

这*似乎*可行，因为 C 不会阻止您访问不属于您的内存。即使它看起来可以工作，代码仍然不正确，明天可能无法工作。您通过写入/读取不属于您的内存来调用未定义的行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T17:34:43.527

pb2q 是绝对正确的。一种可能验证您正在访问未分配内存的方法是执行以下操作：

```
array = calloc(sizeof(int) * 2); 
for (i = 0; i < 3; i++)
    printf("%d\n", array[i]); 
```

您可能会收到以下输出：

```
0
0
*random value* 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T17:37:46.653

我相信它有效，因为您的实现`malloc` 在内存块之前和之后放置了一些信息，并且可能以块的形式分配（例如，将分配请求四舍五入到最接近的 64 个字节）。`malloc`ed 内存必须能够被释放，这需要一些关于其大小等的信息，这些信息放在分配的内存之前和/或之后。

如果数据是按块分配的，那么您可以达到一些限制，您可以完全填满一个“块”，并且读取`array[n]`将在“块”的末尾进行。我们可以这样测试：

```
int main() {
    int i;
    char * a;
    for (i = 1; i < 10000; i++) {
        a = malloc(i);
        a[i] = 'x';
        printf("%d %c\n", i, a[i]);
        free(a);
    }
    return 0;
} 
```

它`malloc`是越来越大的内存块，并检查越界的段错误。我得到的截断输出是：

```
1 x
[...]
58 x
59 x
60 x
61 x
62 x
*** glibc detected *** ./a.out: free(): invalid next size (normal): 0x0a041008 ***
[...] 
```

即尝试`a = malloc(63); a[63] = 'x';`失败，因为它破坏了我之前谈论的元数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T17:32:41.470

因为C不会试图握住你的手。您可以读取/写入未分配的内存，但您很可能会修改/从其他对象中提取数据，或者只是提取垃圾数据。

当你创建一个数组时，你会得到一个指向内存地址的指针，你可以随意使用它。通过分配内存，您可以防止在该内存块中创建其他对象，就像您为数组保留它一样。但是，超过该数量没有限制，您可以在任何您喜欢的地方读写。这样做的好处是你有相当大的权力，可以直接操纵地址。不利的一面是，您可以很容易地使您的程序在属于其他对象的内存位置上的操作信息崩溃。

从中得到的一点是，C 给了你很大的权力，而这种权力的使用完全取决于你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T18:15:44.960

这是提示：您必须避免在函数上使用 printf ...仅在 main() 内使用它（：

当你使用 malloc 和 realloc 时，C 将分配一个 int 大小的内存。它不会分配另一个“位置”来放置数字。唯一发生的情况是，如果您放入的数据具有与 int 相同的字节大小。这通常会发生，因为 C 不会告诉您数组大小是否已满。小心点。

# android - 基于 OpenLaszlo 的 AIR 应用程序在 Android 和 iOS 上的性能

> ID：11992401
> 
> 赞同：2
> 
> 时间：2012-08-16T17:23:22.533
> 
> 标签：android, ios, mobile, air, openlaszlo

是否有人尝试使用最新版本的 Adob​​e AIR SDK 将 OpenLaszlo 应用程序编译为适用于 Android 或 iOS 的移动应用程序？对于不需要大量计算能力的应用程序来说，性能是否足够？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:16:22.487

我使用来自 nightly builds（尚未发布）的最新 OpenLaszlo 5.0 将我的 OpenLaszlo 应用程序编译为 HTML5/DHTML。我不使用 Adob​​e Air，所以很抱歉我无法回答这个问题，但根据我的经验，性能下降与应用程序生成的 DIV 数量成正比。您需要重用您创建的视图/组件，是的，加载时间很重要，因为 OL 应用程序非常大。如果它是一个现有的应用程序，它可能值得做。但是对于一个新的应用程序，我会建议一个更成熟的框架和组件集，比如 JQuery mobile。

# java - 将 jar 库添加到 Maven 项目

> ID：11992410
> 
> 赞同：4
> 
> 时间：2012-08-16T17:23:53.180
> 
> 标签：java, maven, jar

我有一个在 Maven 中开发的项目。我想将新的 jar 文件添加到类路径。我在 pom.xml 文件中添加了新的依赖项：

> ```
> <dependency>
> <groupId>mzmatch</groupId>
> <artifactId>mzmatch</artifactId>
> <version>1.2.13</version>
> </dependency> 
> ```

所有的 jar 库都在 lib 目录中。所有库的名称都与 artifactId-version.jar 匹配，它们的位置是（在 lib 目录内）groupId/artifactId/version。所以我对我的 mzmatch-1.2.13.jar 文件做了同样的事情。

除了在 pom 文件中添加新的依赖项之外，我还将我的 jar 添加到 Manifest.MF 文件的类路径中。但是软件仍然看不到我的罐子。我还应该做什么？或者我没有正确添加我的库？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T17:29:47.830

我假设这是您开发的 jar，现在希望 Maven 将其作为依赖项。为此，您需要将其安装到本地 Maven 存储库。不是项目的 lib 目录，而是 .m2 目录（可能在 Windows 中的主目录之外）。您可能想从命令行运行它：

```
mvn install:install-file -Dfile=<path-to-file> -DgroupId=mzmatch -DartifactId=mzmatch -Dversion=1.2.13 -Dpackaging=jar 
```

在[这里](http://maven.apache.org/plugins/maven-install-plugin/examples/specific-local-repo.html)查看更多信息。

编辑 1：我假设 OP 不在一个更大的团队中工作。如果开发团队中的其他任何人都需要该依赖项，则需要将其部署到共享的内部工件存储库，例如[Nexus](http://www.sonatype.org/nexus/)或[Artifactory](http://www.jfrog.com/home/v_artifactory_opensource_overview/)。这些应用程序有一个用于上传工件的页面。

编辑 2：在 pom.xml 中添加一个库作为依赖项可确保 Maven 在编译此新项目的代码时将其放在类路径中。如果您希望它在运行时出现（例如，如果您想要一个可执行的 jar），并且您希望将它放在您的 Class-Path 条目中`MANIFEST.MF`，那么您可以让 Maven[设置它](http://maven.apache.org/shared/maven-archiver/examples/classpath.html)。那仍然没有将`mzmatch-1.2.13.jar`文件放在与新项目相同的目录中。如果您不想手动执行此操作，Maven 可以再次[为您](http://maven.apache.org/plugins/maven-dependency-plugin/examples/copying-project-dependencies.html)执行此操作。

# database-design - 使用 Grails 进行数据建模时，使用常见的一对多关联的“最佳实践”方法是什么

> ID：11992411
> 
> 赞同：0
> 
> 时间：2012-08-16T17:23:56.647
> 
> 标签：database-design, grails

举个例子：

该应用程序包含不同类型联系人的域类，例如

经理、ShopSteward、Pilot、BaseballCoach 等。

它们都是单独的类，因此在数据库中都有自己的单独表。

一个常见的要求是记录多个电子邮件地址。为了避免重复代码，我将在 src/groovy 中创建一个名为 EmailAddress 的 @Validatable 类，其中当然包含 emailAddress 以及该地址的可选标签。

现在，为了允许所有这些不同的域类记录多个电子邮件地址，最好创建新的域类来扩展 EmailAddress 并链接回关系的所有者端？

例如

```
class ManagerEmailAddress extends EmailAddress {
  static belongsTo = [Manager]
} 
```

＆ 添加

```
 hasMany = [emails:ManagerEmailAddress] 
```

到经理班？或者最好有一个包含大量鉴别器的单个 EmailAddresses 表来识别拥有实体？

提前感谢您的评论/回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T00:49:43.593

在不同的表/类上复制相同的结构很少是一个好主意（每个具体类的表会减少这里的代码重复）。与鉴别器的备用数据库关系是父表应该合并的信号。

`Person`因此，提取一个常见的超类（如or`Contact`并将 连接`Emails`到该类）可能是有意义的。

# php - 在购物车中显示 Magento 自定义选项值

> ID：11992413
> 
> 赞同：1
> 
> 时间：2012-08-16T17:24:04.487
> 
> 标签：php, magento, e-commerce

我的 Magento 网站上的一些产品具有自定义选项（不是属性）。对于一种产品，它有金色或银色可供选择，它有一个带有这两个选项的下拉菜单。如何获取用户选择显示在购物车页面上产品名称旁边的选项名称？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-24T11:10:50.217

要在“AddtoCart”时间设置的购物车页面获取产品自定义选项值，请尝试使用以下代码。

```
$cart = Mage::helper('checkout/cart')->getCart()->getQuote()->getAllItems();

/* cart item loop */
foreach($cart as $item) {

    /* This will get custom option value of cart item */
    $_customOptions = $item->getProduct()->getTypeInstance(true)->getOrderOptions($item->getProduct());

    /* Each custom option loop */
    foreach($_customOptions['options'] as $_option){
        echo $_option['label'] .'=>'. $_option['value']."<br/>";
        // Do your further logic here
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T09:52:50.970

使用以下代码，您可以获得产品自定义选项值。

```
$productOptions= $item->getProduct()->getTypeInstance(true)->getOrderOptions($item->getProduct()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-26T23:51:22.563

If you choose to go with **Mage_Catalog_Model_Product_Type_Configurable::getOrderOptions($product)** as suggested by others, make sure you don't call it on disabled products as in version CE 1.9.* (possibly in other versions, too) this leads to a nasty function call on null. Unless you haven't added a custom module that purges disabled products from carts, this can make your site crash for every customer who added a later disabled product to their cart.

Luckily, you don't need to worry about that if you're using or extending Magento's cart item renderer **Mage_Checkout_Block_Cart_Item_Renderer**. It offers method **getOptionList()** which will return an array of all selected options to you, custom options included:

```
//$this = Mage_Checkout_Block_Cart_Item_Renderer
$options = $this->getOptionList(); 
```

This method getOptionList() calls **Mage_Catalog_Helper_Product_Configuration** which will be your answer if you're not using the Magento renderers or if you want a list of *only* custom options.

Here's an example of how you can get an array of the selected custom options by calling the helper directly:

```
$_item = $this->getItem(); // item can represent a simple, configurable or grouped product
$helper = Mage::helper('catalog/product_configuration');

if($onlyCustomOptions){
    // get an array of only custom options
    $options = $helper->getCustomOptions($_item);
} else {
   // get an array of configurable & custom options
    $options = $helper->getOptions($_item);
} 
```

(Note: $options will be an empty array if the item has no options.)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T05:32:54.373

如果不显示，那么你应该试试这个。

```
$product = Mage::getModel('catalog/product')->load($product_id);
$options = $product->getProductOptions();
foreach ($options as $option){ print_r($option->getValues()); } 
```

你会发现期权价值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T17:31:32.057

使用以下代码加载产品：

```
$product = Mage::getModel('catalog/product')->load($product_id); 
```

然后通过以下方式获取自定义选项：

```
$options = $product->getProductOptions(); 
```

希望这有帮助，

逾越节

# asp.net-mvc - EditorForModel - 使用 editorfor 时标签重复

> ID：11992414
> 
> 赞同：4
> 
> 时间：2012-08-16T17:24:10.490
> 
> 标签：asp.net-mvc, mvc-editor-templates, editortemplates

我在我的 ASP.NET MVC 应用程序中为不同的数据类型（字符串、日期时间等）使用了许多编辑器模板。例如，以下是我用于字符串的内容：

```
<div class="editor-label">
     @Html.Label("")
</div>
<div class="editor-field">
    @Html.TextBox("", ViewData.TemplateInfo.FormattedModelValue, new { @class = "text", placeholder = ViewData.ModelMetadata.Watermark })
    @Html.ValidationMessage("")
</div> 
```

我想在我的视图中使用 EditorForModel，但是当我这样做时，它似乎为每个属性添加了它自己的标签，从而导致重复的标签（因为我的字符串编辑器模板中有一个标签）。除了从我的字符串编辑器模板（在本例中）中删除标签之外，还有什么方法可以告诉 editorformodel 不要插入标签？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T17:33:40.690

一种可能性是覆盖[默认的对象编辑器模板](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-3-default-templates.html/)( `~/Views/Shared/EditorTemplates/Object.cshtml`) 并删除它添加的标签：

```
@if (ViewData.TemplateInfo.TemplateDepth > 1) 
{
    @ViewData.ModelMetadata.SimpleDisplayText
}
else 
{
    foreach (var prop in ViewData.ModelMetadata.Properties.Where(pm => pm.ShowForEdit && !ViewData.TemplateInfo.Visited(pm))) 
    {
        if (prop.HideSurroundingHtml) 
        {
            @Html.Editor(prop.PropertyName)
        }
        else 
        {
            <div class="editor-field">
                @Html.Editor(prop.PropertyName)
                @Html.ValidationMessage(prop.PropertyName)
            </div>
        }
    }    
} 
```

# c# - 屏蔽文本框搜索和 sql 查询

> ID：11992418
> 
> 赞同：0
> 
> 时间：2012-08-16T17:24:31.167
> 
> 标签：c#, sql, winforms, tsql, maskedtextbox

我在 c# winform 中有一个蒙面的文本框。

掩蔽就像

```
 - (two numbers on the front and 4 number on the right after the dash).

for ex: 12-3456 
```

还有更多的排列，例如

```
 - (3 spaces on the front and 5 on the right)

for ex: 123-34567 
```

> 当用户键入 123-34567 时，select sql 查询应该只返回
> 
> 123-34567
> 
> 当用户键入 12-3456 时，select sql 查询应该只返回
> 
> 12-3456
> 
> 当用户键入 - 时，select sql 查询应该只返回
> 
> 12-3456（即输入两个空格）
> 
> 当用户键入 - 时，select sql 查询应该只返回
> 
> 123-34567（即输入三个空格）
> 
> 换句话说，用户可以在不输入任何内容的情况下进行搜索，并且只有启用掩码的文本框和搜索（空 - 空） - 只有破折号掩码，在掩码上键入数字并搜索（例如：12-）。

正在使用的查询是

```
select column1,column2 from table1 where column2 like '%__-%'; 
```

（下划线是动态计算的）我如何在任何其他最佳方法中得到这个（比如在单个查询中）？

考虑这个 table1 并在数据库中有一个列“MaskedInfo”。

```
Table1:

MaskedInfo  

1234567
12-34567
123-4567
123-45678 
```

> 用户可以键入任何内容进行搜索，例如 12-34567 或 123-4567 或只是 1234567，如果文本框为空，则将所有内容加载到结果中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:38:04.360

问题似乎是第一个 %，您正在将用户输入的空格更改为下划线，您是对的，但是第一个 % 会在下划线之前为您提供一些结果，所以

```
like '%__-%'  //(two underscores) 
```

将得到任何在 - 之前有两个或多个数字的东西，

```
like '%___-%'  //(three underscores) 
```

将得到任何在 - 之前有三个或更多数字的东西

删除第一个 % 将获得与下划线完全相同的数字的结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:10:52.897

您可以尝试使用 charindex：

WHERE (@search = '' OR charindex('-', @search) = charindex('-', column2))

# javascript - jquery fancybox2 - 如何使覆盖层上的东西不可点击

> ID：11992424
> 
> 赞同：1
> 
> 时间：2012-08-16T17:24:53.953
> 
> 标签：javascript, jquery, fancybox, fancybox-2

我想使用fancybox2 创建一个表单。当需要时，fancybox2 表单将被显示，并且只能使用右上角的 X 按钮、转义键或提交、取消按钮来关闭，我将在此内容中添加。我怎样才能做到这一点，我怎样才能使后台的所有东西都被禁用，所以没有人可以点击它？在下一个示例中，它似乎对我不起作用：

```
jQuery(document).ready(function(){
    $(".fancybox").fancybox({

        width:600,
        height: 300,
        closeBtn    : true,
        closeClick  : true,
        openEffect  : 'elastic',
        closeEffect : 'elastic',
        scrolling   : 'no',
        autoSize    : false,
        fitToView   :   true

    });
});

        <div class='fancybox' style="display: block;width:600px;height:300px;border:1px solid black;position: absolute;left:300px;top:300px;">TEST DIV</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:22:56.927

```
$(".fancybox").fancybox({
    width: 600,
    height: 300,
    closeBtn    : true,
    closeClick  : false, // prevents closing when clicking the background 
    openEffect  : 'elastic',
    closeEffect : 'elastic',
    scrolling   : 'no',
    autoSize    : false,
    fitToView   : true
}); 
```

更改`closeClick`为`false`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:35:09.460

在 facnybox 脚本代码中将 modal 选项设置为 true，即

```
$(".fancybox").fancybox({
    //existing stuff
    modal : true

}); 
```

# c# - 在 Windows Mobile 应用程序中使用引用可防止应用程序关闭进程

> ID：11992425
> 
> 赞同：1
> 
> 时间：2012-08-16T17:24:56.343
> 
> 标签：c#, windows-mobile

当我不添加任何引用时，我的应用程序将从进程列表中删除，但是当我`wmplib.dll`在项目中添加引用时，按下退出按钮不会将其从 Windows Mobile 设备上的进程列表中删除。

我在我的项目中使用了这段代码：

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd562692%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd562692%28v=vs.85%29.aspx)

```
private void Exit_Button_Click(object sender, EventArgs e)
{
    Application.Exit();
} 
```

程序.cs 文件：

```
using System;
using System.Linq;
using System.Collections.Generic;
using System.Windows.Forms;

namespace radiotest
{
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [MTAThread]
        static void Main()
        {
            Application.Run(new Form1());
        }
    }
} 
```

# r - R ggplot2：用不同的x值（geom_ribbon）填充两行之间的空间并格式化日志轴标签

> ID：11992431
> 
> 赞同：2
> 
> 时间：2012-08-16T17:25:22.813
> 
> 标签：r, ggplot2, ribbon, logarithm, axis-labels

我试图填充两条曲线之间的空间，但是 geom_ribbon 使用不同的 y 值而不是 x 值。我的 y 轴是深度，所以我真的不想交换轴。有没有办法做到这一点？这是我的数据集的示例：

```
Statsrep <- structure(list(Depth = c(34L, 74L, 114L, 164L, 204L, 264L, 304L, 344L, 384L, 424L, 
464L, 504L, 554L), Min = c(2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2), Max = c(38, 105, 86, 44, 68, 
155, 160, 68, 120, 1670, 178, 110, 84), Average = c(5.64, 12.08, 17.42, 6.5, 11.59, 11.09, 10.1, 
9.09, 8.08, 38.96, 15.94, 6.53, 13.21), Mode = c(2,2,3,2,6,2,2,2,2,2,2,2,2)), .Names = 
c("Depth", "Min", "Max", "Average", "Mode"), row.names = c(1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 
10L, 11L, 12L, 13L), class = "data.frame")
Statsrep 
```

我目前使用的代码是：

```
Statsrep <- read.csv(file="filename.csv", header=TRUE, sep=" ")
p1 <- ggplot(data = Statsrep, aes(xmin=Min, xmax=Max, y=Depth)) +
geom_ribbon(aes(fill="#CCCCCC"))
p1 <- p1 + coord_trans(x = "log10") + 
scale_x_continuous(breaks=c(1, 10, 100, 1000, 1500)) +
ylim(600,0)
p1 <- p1 + layer(geom = "path")
p1 + xlab("GRAINSIZE / mm")
p1 + ylab("DEPTH / m") 
```

另外，我想自定义我的日志 x 轴，以便显示 1、10、100、1000 个标签并且等距显示，类似于日志坐标纸。此代码仅显示 100、1000、1500，它们在轴的右侧聚集在一起。有没有办法像这样格式化轴？感谢您提前提供任何帮助。冬青

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:08:46.797

我猜她希望深度向下

```
 ggplot(data = Statsrep, aes(ymin=Min, ymax=Max, x=Depth, y = Average)) +
  geom_ribbon(alpha = 0.5) + 
  geom_line(aes(group = 1)) +
  scale_y_log10("GRAINSIZE / mm", breaks=c(1, 10, 100, 1000)) +
  scale_x_reverse("DEPTH / m", limits = c(600,0)) + 
  coord_flip() 
```

该图看起来不同，因为我在整个会话中使用自定义主题。

![在此处输入图像描述](../Images/9db5c63c18f53599d37482acb7133e1e.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T18:56:49.947

这可能会帮助您入门，尽管我仍然不完全确定您在追求什么：

```
p1 <- ggplot(data = Statsrep, aes(ymin=Min, ymax=Max, x=Depth,y = Average)) +
        geom_ribbon(alpha = 0.5) + 
        geom_line(aes(group = 1)) +
        scale_y_log10() + 
        coord_flip() 
```

![在此处输入图像描述](../Images/a523e4ce6c615d1e4681380869802d8f.png)

# java - 仅在选择项目时如何从 JList 获取项目

> ID：11992434
> 
> 赞同：0
> 
> 时间：2012-08-16T17:25:34.217
> 
> 标签：java, swing, list, selection, jlist

在我的程序 - a `JApplet`- 我有一个`JList`填充了`DefaultListModel`. 用户可以选择最多选择一定数量的项目，并通过按 a`JButton`来表示他/她已经完成了他/她的选择。`ActionPerformed`然后，我将在事件处理程序中选择的项目用于`JButton`.

这很好用，除非在`JButton`按下之前没有选择任何项目 - 如果没有选择任何内容，我的其余指令`ActionPerformed`也不会操作。我尝试`myJList.isSelectionEmpty()`过否定 if 条件，并将我得到的数组长度`myJList.getSelectedIndices()`与 0 进行了比较，但都不起作用。

但是，如果最初单击某些内容然后取消选择（我有一个明确的选择按钮），它会起作用，并且在随后的每一次通过它的程序中都会起作用，所以它似乎只是第一次需要被触发。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T23:47:10.523

如果我理解你，这可能是一种解决方案。

最初，禁用 JButton。然后，为您的 JList 提供 ListSelectionListener；在此事件处理程序中，检查是否进行了选择（至少选择了一项）。如果是 - 启用 JButton；否则禁用它。这样，如果没有选择任何项目，您将阻止执行 JButton 的 ActionEvent 处理程序，这是您想要的（我想）。假设您的 JList 是 lstChoices，而您的 JButton 是 btnSubmit。这应该做上面提到的：

```
lstChoices.addListSelectionListener(new ListSelectionListener() {
        @Override
        public void valueChanged(ListSelectionEvent e)
        {
            if(lstChoices.getSelectedValuesList().size() > 0)
            {
                btnSubmit.setEnabled(true);
            }
            else
            {
                btnSubmit.setEnabled(false);
            }
        }
    }); 
```

# nservicebus - 无法获得为 NServiceBus 3.2.7 设置部署队列的权限

> ID：11992437
> 
> 赞同：0
> 
> 时间：2012-08-16T17:25:53.240
> 
> 标签：nservicebus, nservicebus3

因此，使用 GO 管道部署项目的升级，包括最新版本的 NServiceBus（3.2.7），我似乎遇到了创建队列的某种权限问题，一旦手动创建，似乎服务仍然不会从中读取。

这是我的端点配置

```
public class EndpointConfiguration 
        : IConfigureThisEndpoint, AsA_Server
        , IWantCustomInitialization, IWantCustomLogging 
    {

        public void Init() {
            // setup Container
            var container = new WindsorContainer();
            container.Kernel.ReleasePolicy = new NoTrackingReleasePolicy();
            container.Install(new WindsorInstaller(), new DatabaseInstaller(), new WorkflowTaskingInstaller());

            SetLoggingLibrary.Log4Net(XmlConfigurator.Configure);

            Configure.With()
                .CastleWindsorBuilder(container) 
                .MsmqTransport()
                .UnicastBus()
                .RavenSubscriptionStorage()
                .MyUnitOfWork()
                .XmlSerializer();

            LogManager.GetLogger("cs.Process").Info("Starting cs.Process");
        }

    } 
```

看来我说这是服务的一些问题。我对 NServiceBus 很陌生，所以我不确定它是如何部署为服务而不是运行 host.exe 的。

此外，当我在本地运行它时，我可以指向开发环境中的队列并从中读取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:49:20.693

这些队列可能很棘手。用于创建队列的帐户似乎拥有它，并且只有该帐户最初可以授予任何其他权限。因此，请务必为此目的在某个已知帐户下运行您的服务。

如果您没有将通用主机作为服务运行，还请确保以身份运行进程的登录帐户有权访问队列。

我没有将 NServiceBus 用于 yonks，但我记得最后一次访问被拒绝异常应该说明您需要在队列中访问的各个位。

# ruby-on-rails - 应用程序启动或重新启动时如何在数据库中创建记录

> ID：11992438
> 
> 赞同：0
> 
> 时间：2012-08-16T17:26:02.170
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, boot, records

在我的应用程序中，我有一个 sing_up_page，它有一个 sing_up_form，它有一个显示角色类型的 drop_down_list。

RoleType 是我存储记录的应用程序中的类

```
insert into role_type (id,name) values (1,'user');
insert into role_type (id,name) values (1,'admin');
insert into role_type (id,name) values (1,'vender'); 
```

在启动应用程序之前手动在数据库中。在移动到 sing_up_page 我做之前

`@role_type=RoleType.all`

这样下拉菜单可以使用它来显示角色类型，但我想要如果它们是在应用程序启动时生成这些记录的过程，而无需像在 Grails 上的 Groovy 中那样在数据库中手动创建记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T04:39:06.577

如果您在 中创建`.rb`文件`app/config/initializers/`，它将在服务器加载时执行。

例子：

`app/config/initializers/seed.rb`

```
%w{user admin vendor}.each do |role|
  RoleType.create(:name => role)
end 
```

每次服务器加载时，都会创建这些记录。

**问题：**为什么这些记录没有保留在您的数据库中？是您还是其他人删除它们？

# java - 如何在 SugarCRM 帐户地址框中选择单独的行？

> ID：11992439
> 
> 赞同：0
> 
> 时间：2012-08-16T17:26:05.393
> 
> 标签：java, sugarcrm

我正在使用 Java 执行与 SugarCRM 6.5 的集成。

我正在从 SugarCRM 中提取地址字段，`Account`并尝试将其放在网站上的一个或两个文本框中。我正在检查它的长度，看看我是否需要将它拆分到我网站上的两个字段中，或者一个就足够了。我有基本的功能工作。

我的问题是我无法在其中检测到换行符（换行符？），`Account`这导致我将这些行平滑在一起，而不是说，用单个空格替换换行符。

例子：

```
4500 South 850 East
Broadway Lane SLC
UT, 84117 USA 
```

正变成：

```
4500 South 850 EastBroadway Lane
SLCUT, 84117 USA 
```

...这在专业网站上显然是不可取的。

有没有办法在 SugarCRM 6.5 中检测这些换行符？（谢谢！）

更新：根据要求，这是我的解析代码：

```
public void setStreetAddress( String sAddress ) { 
    if( sAddress == null ) { return; }

    String trimmed = sAddress.trim().replaceAll( "[\\r\\n]", " ");

    if( trimmed.length() > 60 ){
        streetAddress = sAddress.trim().substring( 0, 60 );
        streetAddress2 = sAddress.trim().substring( 60 ); // 60 till end.
    }
    else{
        streetAddress = sAddress; 
        streetAddress2 = "";
    }
} 
```

# arduino - Arduino 'Hello World' 打印不正确

> ID：11992442
> 
> 赞同：0
> 
> 时间：2012-08-16T17:26:16.647
> 
> 标签：arduino

我正在 arduino uno 上做一个示例 hello world。这是我的示例代码。

```
void setup()
{
  Serial.begin(9600);
}

void loop()
{
  Serial.println('Hello world');
} 
```

这在串行监视器上给了我奇怪的输出（使用 9600 BR）。我得到以下连续输出：

```
27748
27748
27748 
```

这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T17:35:56.843

尝试改变：`Serial.println('Hello world');`我`Serial.println("Hello world");` 已经有几个月没有玩过我的 Arduino 了，但我认为你需要双引号而不是字符串的单引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-18T10:50:56.533

我不知道在其他人中，但在 arduino uno 中，`Serial.println`不适用于字符串，您需要使用`Serial.write`

[https://www.arduino.cc/en/Serial/Write](https://www.arduino.cc/en/Serial/Write)

# ruby - 无法使用种子 localhost:27017 连接到副本集

> ID：11992444
> 
> 赞同：1
> 
> 时间：2012-08-16T17:26:27.993
> 
> 标签：ruby, mongodb, mongoid

我正在使用 mongoid 1.4.12，并且我有一个本地运行的 mongos。这个 mongos 指向一些分片模式下的副本集。

我的 mongoid.yml 看起来像这样：

```
production: &production
  database: db_name
  hosts:
    - - localhost
      - 27017
  read_secondary: true 
```

但是我收到了这个错误：

> 无法使用种子 localhost:27017 连接到副本集

为什么？那么它应该如何正确配置呢？

恐怕如果我改成

> 主机：本地主机

它不会从我的中学读取。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T17:46:52.213

首先，确保您的 mongos 在端口 27017 上运行 - 使用 mongo shell 连接到它。由于您使用的是默认端口，这就像运行`mongo`不带参数的可执行文件一样简单（默认连接到 localhost:27017）。

如果没有连接，那么 mongos 可能没有运行，这就是你的问题。如果它正在运行并且您可以连接，请在您的 yml 文件中尝试此操作：

```
hosts:
        - localhost:27017 
```

离开 read_secondary 部分以确认连接有效。然后试试这个而不是 read_secondary （见这里：[https](https://github.com/mongoid/mongoid/issues/1368) ://github.com/mongoid/mongoid/issues/1368 ）：

```
options:
    read: :secondary 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T16:17:43.593

所以我的最终配置是：

```
production: &production
  database: db_name
  host: localhost
  slave_ok: true 
```

它可以通过我的 localhost mongos 从中学阅读。

# image-processing - 解码 GIF87a 光栅数据流的数据字节

> ID：11992445
> 
> 赞同：2
> 
> 时间：2012-08-16T17:26:36.610
> 
> 标签：image-processing, decode, gif, specifications, lzw

我正在尝试从 GIF87a 光栅数据流中解码数据字节。我不确定如何读取 LZW 可变长度代码（以及 LSB...最低有效字节如何首先适合此代码）。栅格数据流开始如下（十六进制）：

```
06 6b 40 86 70 48 2c 1a 8f 44 4b 44 22 89 58 8e 10 c7 e1 80 
```

*   06 -> 代码大小为 6
*   6b -> 块字节数为 107
*   40 -> 清除代码 (2^6)，即十进制 64 或十六进制 40
*   86 -> 实际数据的开始

GIF87a 规范：[http ://www.w3.org/Graphics/GIF/spec-gif87.txt](http://www.w3.org/Graphics/GIF/spec-gif87.txt)

栅格流应该具有指向全局地图（或 LZW 树中的父级）的索引......但我不确定如何阅读它。

有人可以转换前几个字节（从 86 开始）作为示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-28T15:57:00.917

阅读这个[3MF 项目 GIF](http://www.matthewflickinger.com/lab/whatsinagif/lzw_image_data.asp)和所有小节，您需要的所有内容都包含步进示例，其余的都在规范文件中。

现在是图像数据

流数据以 1 字节块大小开始，然后进入比特流。最后是另一个块大小。当您绘制整个帧然后在最后读取的块之后设置指针时它会停止。

如果您找到块大小`0`，则表示帧数据结束。如果之后有终止符`0x3b`，则到达文件末尾。

本地颜色位告诉您在开始时流中每个代码有多少位。

我读取了实际处理的 BYTE 的 LSB，然后将其右移，然后将代码右移并将该位添加为它的 MSB。在达到所需的索引位数后，通过 LZW 解压缩并将新代码添加到字典中。

如果字典越过 2^bits 边界，则增加代码位大小并继续。不要忘记处理清除和结束特殊代码......

所以你有了：`06 6b 40 86 70 48 2c 1a`

*   `06h`是初始位大小 - 1 所以实际位大小是`7`!!!
*   `6bh`是以字节为单位的块大小
*   `40h`是清晰的代码（表示`color[]`表中有64种颜色，第一个空闲索引是66）
*   `86 70 48 2c 1a [hex]= |1 0000110|01 110000|010 01000|0010 1100|00011 010| [bin]`

所以代码是：

*   `|0000110|110000 1|01000 01|1100 010|010 0010| [bin]`
*   `|0000110|1100001 |0100001 |11000010|0100010 | [bin]`
*   `06,61,21,c2,22 [hex]`

数据中的`61h`建议错误是图像数据的真正开始（或者我在某处犯了错误）？该代码只能比字典中的最大索引大一个。除了第一个代码之外，每个代码都会增加字典，因此在处理`61h`字典时只有`42h`大小。尝试他们工作的链接页面中的示例...

# python - python中的编译指示

> ID：11992448
> 
> 赞同：67
> 
> 时间：2012-08-16T17:27:06.113
> 
> 标签：python, pragma

我正在阅读bottle.py 源代码。它是一个 Web 框架，只有 3000 多行 Python 代码。非常酷。

我发现了一些这样的代码：

```
class ServerAdapter(object):
    quiet = False
    def __init__(self, host='127.0.0.1', port=8080, **config):
        self.options = config
        self.host = host
        self.port = int(port)

    def run(self, handler): # pragma: no cover
        pass
    ... 
```

是什么`# pragma: no cover`意思？我在 python 文档中找不到任何关于`pragma`语法的介绍。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-08-16T18:04:45.750

它显然与[coverage.py](http://nedbatchelder.com/code/coverage/)相关：

> Coverage.py 是一个测量 Python 程序代码覆盖率的工具。它监视您的程序，注意代码的哪些部分已被执行，然后分析源代码以识别可能已执行但未执行的代码。

这`# pragma: no cover`正是工具应该忽略该部分代码的提示 - 请参阅[从覆盖范围中排除代码](http://nedbatchelder.com/code/coverage/excluding.html)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-16T17:30:24.823

对于 Python，它只是一个注释。它可能是针对某个外部工具的注释，它读取和分析 Python 代码，例如，类似于 doctest 的`#doctest: +ELLIPSIS`注释或 PyLint 的`# pylint: disable=W0613`样式注释。

# cloud - 建立局域云概念

> ID：11992449
> 
> 赞同：0
> 
> 时间：2012-08-16T17:27:06.513
> 
> 标签：cloud, storage, wireless

是否可以创建一个基于本地区域的云状结构，该结构可以通过无线设备（如启用了 wi-fi 的设备）访问？如果是，我应该从什么开始？

这就像我想建立一个提供存储即服务的局域网。在一些无线路由器的帮助下也是如此。它与正在进行的云功能更相似，但我希望它只是通过将其添加到“本地区域”类别而免于运营商费用。我的目的是满足大学学生的需求（具体来说），他们在不同时间在不同系统上工作，他们无法从宿舍访问大学的内部网，但后来他们需要那个从他们自己的设备上继续工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:01:48.337

是的，可以提供本地文件存储和共享。这听起来像是“文件共享”开始的......本地文件共享的解决方案。SMB 是最流行的解决方案，通常使用[Samba](http://www.samba.org/)。

您可以使用 Linux 设置 Samba 服务器，人们可以从 Linux、Mac、Windows、iOS 和 Android 访问并保存文件。您可以根据需要配置访问权限。

# asp.net - ASP.NET：使用 ImageButton 从 ListView 编辑项目

> ID：11992450
> 
> 赞同：0
> 
> 时间：2012-08-16T17:27:06.767
> 
> 标签：asp.net, vb.net, listview, imagebutton

我在使用 ASP.NET 的 ListView 控件时遇到了一些问题。我正在尝试为每个项目添加编辑选项，如果我使用带有 CommandName="Edit" 的 LinkBut​​ton，它可以工作，但是（这是问题所在）我需要使用 ImageButton 而不是 LinkBut​​ton，它不起作用，虽然我读过这不是问题（http://www.4guysfromrolla.com/articles/061009-1.aspx）。我也尝试将 ImageButton 嵌套在 LinkBut​​ton 中，但它不起作用。

这是我的 ImageButton 标记代码：

`<asp:ImageButton ID="editCircleIcon" runat="server" CommandName="Edit" ToolTip="Edit this circle" AlternateText="edit" Width="20px" ImageUrl="~/Images/Circulos/edit_circle.png" style="float:right;" />`

我还尝试在 ListView 的 ItemEditing 事件中放置一个断点，但它从未被访问过。

任何想法？

谢谢！！！

PD：这是整个 ListView：

```
<asp:ListView id="listOfCircles" runat="server" DataKeyNames="id" ItemPlaceholderID="circlePlaceHolder">
    <EmptyDataTemplate>
        <asp:label ID="noCircles" runat="server" Text="No circles defined" />
    </EmptyDataTemplate>

    <LayoutTemplate>
        <asp:Panel ID="circle" runat="server" BorderColor="Black" Width="100%">
            <asp:PlaceHolder runat="server" ID="circlePlaceHolder" />
        </asp:Panel>    
    </LayoutTemplate>

    <ItemTemplate>
        <asp:HiddenField ID="circleID" runat="server" Value='<%# Eval("id") %>' />
        <asp:Panel ID="circleHeader" runat="server" BorderWidth="2px">
            <asp:Image ID="circleIcon" runat="server" />
            <asp:Label ID="circleName" runat="server" Text='<%# Eval("nombre") %>'  />
            <asp:ImageButton ID="deleteCircleIcon" runat="server" ImageUrl="~/Images/Circulos/delete_circle.png" width="20px" style="float:right;" ToolTip="Delete this circle" CommandName="Delete" />
                <ajaxToolkit:ConfirmButtonExtender id="deleteCircleCBE" runat="server"
                                                   DisplayModalPopupID="deleteCircleMPE"
                                                   TargetControlID="deleteCircleIcon" />
                <ajaxToolkit:ModalPopupExtender ID="deleteCircleMPE" runat="server"
                                                BackgroundCssClass="modalBackground" 
                                                PopupControlID="deleteCirclePopup" TargetControlID="deleteCircleIcon"
                                                OkControlID="deleteCircleOk" CancelControlID="deleteCircleCancel"
                                                DropShadow="true" />
                <asp:Panel ID="deleteCirclePopup" runat="server" CssClass="PopUp" style="display:none">
                    <asp:ImageButton ID="deleteCircleClosePopup" runat="server" ImageUrl="~/Images/closePopupIcon.png" CssClass="closePopupImage" OnClientClick="$find('deleteCirclePopup').hide();" />
                    <br /><br /><br />
                    <asp:Label id="deleteCircleMssg" runat="server" Text="Are you sure do you want to delete this circle?" />
                    <br /><br />
                    <asp:LinkButton ID="deleteCircleOk" runat="server" Text="delete" />&nbsp;|&nbsp;
                    <asp:LinkButton ID="deleteCircleCancel" runat="server" Text="cancel" ClientIDMode="Static" />
                </asp:Panel>
                <asp:ImageButton ID="editCircleIcon" runat="server" CommandName="Edit" ToolTip="Edit this circle" AlternateText="edit" Width="20px" ImageUrl="~/Images/Circulos/edit_circle.png" style="float:right;" OnCommand="editCircleIcon_OnClick" />
                <asp:LinkButton ID="editCircleLinkButton" runat="server" CommandName="Edit" ToolTip="Edit this circle" style="float:right;" Text="Edit" />
        </asp:Panel>
        <asp:Panel ID="circleMiddle" runat="server" BorderWidth="2px">
            <asp:Panel ID="users" runat="server">
            <%--espacio para que salgan los usuarios del circulo--%>
            </asp:Panel>
        </asp:Panel>
        <asp:Panel ID="circleFooter" runat="server" BorderWidth="2px">
                <a href="#" onclick='showPopup(newUserPanelPopup, <%# Eval("id") %>)'><img src="/Images/Circulos/add_friend.png" width="20px" alt="Add user" style="margin: 0" title="Add a new user to this circle" /></a>
        </asp:Panel>
        <br /><br />
    </ItemTemplate>

    <EditItemTemplate>
        <asp:Panel ID="circleHeaderEditMode" runat="server" BorderWidth="2px" DefaultButton="editCircleOk" style="background-color:#DDD;">
            <asp:Image ID="circleIcon" runat="server" />
            <asp:TextBox ID="circleNewName" runat="server" Text='<%# Eval("nombre") %>' />
            <asp:Button ID="editCircleCancel" runat="server" Text="Cancel" style="float:right" CommandName="Cancel" />
            <asp:Button ID="editCircleOk" runat="server" Text="Update" style="float:right" CommandName="Update" />
        </asp:Panel>
        <br /><br />
    </EditItemTemplate>

</asp:ListView> 
```

现在，我有两个用于编辑选项的控件，一个不起作用的 ImageButton 和一个 LinkBut​​ton。

再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:39:57.280

好的，我已经解决了这个问题。我在每个 PostBack 上重新填充 ListView。解决方案很简单：

```
If Not Me.IsPostBack Then
        ReFillList()
    End If 
```

神秘的是，LinkBut​​ton 似乎并没有为此烦恼，并且“删除”选项始终有效……如果有人知道原因，我很想知道原因。

谢谢大家！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:38:01.330

我在我的电脑上测试了这个，我发现如果你的方法背后的代码是这样的

```
Private Sub editCircleIcon_Command(sender As Object, e As System.Web.UI.WebControls.CommandEventArgs) Handles editCircleIcon.Command
    If e.CommandName = "Edit" Then
       ... //your code
    End If
End Sub 
```

然后你使用你的 imagebutton

```
<asp:ImageButton ID="editCircleIcon" runat="server" CommandName="Edit" ToolTip="Edit this circle" AlternateText="edit" Width="20px" ImageUrl="~/Images/Circulos/edit_circle.png" style="float:right;" /> 
```

代码隐藏已执行。如果您发布后面的代码，我可能会更有帮助。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T17:54:31.187

试试这个怎么样。

```
OnCommand="ImageButton_Command" 
```

这显示了如何连接它。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.imagebutton.commandname.aspx#Y0](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.imagebutton.commandname.aspx#Y0)

# c - 使用 void 函数创建 POSIX 线程？

> ID：11992452
> 
> 赞同：1
> 
> 时间：2012-08-16T17:27:17.470
> 
> 标签：c, pthreads, posix

我尝试使用这样的 void 函数创建 POSIX 线程：

```
void thread_func(void* p_Arg)
{
    printf("Hello, World!\n");
}

int main(void)
{
    pthread_t thread;
    pthread_create(&thread, NULL, (void*)thread_func, (void*)NULL);

    return 0;
} 
```

代码工作正常！但是在这种情况下将 thread_func 转换为 void* 是否安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:31:34.310

不，您的代码[将在 IA64 上崩溃](http://blogs.msdn.com/b/oldnewthing/archive/2004/01/19/60162.aspx)。函数指针转换是[一个等待发生的错误](http://blogs.msdn.com/b/oldnewthing/archive/2011/05/06/10161590.aspx)。只需使用正确的签名并返回一个像 0 这样的虚拟值。

另请注意，将函数指针 (like `void (*)(void*)`) 转换为对象指针 (like `void*`) 也是一种潜在的不安全操作，因为 C 标准不保证对象指针和函数指针具有相同的表示形式。我不知道任何使用不同表示的即时架构，但函数指针当然有可能包含通常不存在于对象指针中的额外上下文位。

因此，除非您使用明确允许的实现，否则您永远不应该将函数指针转换为对象指针——例如，[POSIX 系统需要这样做](http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_12_03)[`dlsym(3)`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/dlsym.html)，因此可以安全地将 from的返回值从对象指针转换为函数指针.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T17:31:31.737

> 在这种情况下将 thread_func 转换为 void* 是否安全

这可能适用于许多平台，但您应该知道：

*   A`void *`只保证能够存储对象指针而不是函数指针
*   您的线程函数应该返回`void *`，并且没有完全合法的方法。例如，我想知道当您`pthread_join`使用非 NULL 结果时会发生什么

> 指向 void 的指针可以转换为指向任何对象类型的指针或从指向**任何对象类型**的指针转​​换。指向任何对象类型的指针都可以转换为指向 void 的指针并再次返回；结果应与原始指针比较。

而且当然：

> 指向一种类型的函数的指针可以转换为指向另一种类型的函数的指针，然后再返回；结果应与原始指针比较。如果转换后的指针用于调用类型与引用类型不兼容的函数，则行为未定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T17:42:32.733

虽然 C 编译器在隐式执行危险的指针转换时传统上更宽容（比 C++ 编译器），但我发现很难相信任何 C 编译器都会允许您`void *`为函数指针参数提供参数而不生成大量诊断消息。你有没有忘记包含`pthread.h`，从而迫使 C99 之前的编译器推断参数类型而不是依赖函数原型`pthread_create`？

在任何情况下，如果你真的想依赖这个 hack，至少将指针转换为正确的目标类型，即 to `void *(*)(void*)`，而不是`void *`

```
pthread_create(&thread, NULL, (void *(*)(void*)) thread_func, NULL); 
```

但是，从 C 语言的角度来看，这绝不是安全的。POSIX 可以为您提供额外的保证，使其“更安全”，但无论如何我都不会这样做。

使用返回类型正确声明您的线程函数`void *`，并摆脱这种无用的黑客攻击。

# objective-c - Restkit：-[RKObjectMappingProvider mappingForPatternMatchingString:context:] 中的断言失败

> ID：11992453
> 
> 赞同：0
> 
> 时间：2012-08-16T17:27:18.027
> 
> 标签：objective-c, restkit

在执行 PUT 请求后，我正在使用 restkit 尝试序列化对象，但出现以下错误：

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Cannot look up mapping matching nil pattern string.' 
```

我怎样才能解决这个问题？

我的序列化映射只是对象映射的逆映射，我知道对象映射工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:02:13.903

我在块中修改了加载程序的 URL，`putObject:usingBlock:`并将其替换为 NSURL，而不是像 restkit 期望的 RKURL。

它可能试图`resourcePath`根据 RKURL 具有而 NSURL 缺少的属性来分配变量。`resourcePath`然后被用作模式字符串，当然是零。

我仍然可以修改加载程序的 URL，但现在我为它分配了一个 RKURL，一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:22:36.140

我收到此错误时

```
[self.responseObjectManager loadObjectsAtResourcePath:nil usingBlock:^(RKObjectLoader * loader){}]; 
```

所以把它改成

```
[self.responseObjectManager loadObjectsAtResourcePath:@"" usingBlock:^(RKObjectLoader * loader){}]; 
```

# javascript - CFFORM 标签在横幅中添加额外的行

> ID：11992454
> 
> 赞同：1
> 
> 时间：2012-08-16T17:27:20.103
> 
> 标签：javascript, html, coldfusion, comments

当我添加此标签时，我的一个横幅中会出现额外的一行。它的宽度是页面上所有其他 3 个宽度的两倍。它大约是 2 行输出的大小。

代码：

```
<CFAJAXIMPORT tags="cfform" />
<CFFORM NAME="disclosureExportForm" /> 
```

尝试的解决方案： `<!--<CFFORM NAME="disclosureExportForm" />-->` 我尝试使用 HTML 标记注释掉该标记，因为 HTML 注释与 ColdFusion 注释不同。它修复了额外行的问题，但导致了错误`ColdFusion.Ajax.submitform: Form not found, form id: disclosureExportForm`

我正在寻找的是是否有一种方法可以包含标签而不影响页面上的任何元素。

编辑：

我也尝试只使用 FORM 标签，但没有任何区别。有什么猜测吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:42:46.817

它实际上可能是 CFAJAXIMPORT 而不是 CFFORM。尝试删除 CFAJAXIMPORT 并查看是否可以解决问题。除此之外，请尝试查看 Firebug 或 Chrome 开发人员工具中的输出，看看是否可能是 CSS 的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:30:49.717

ColdFusion 在空白管理方面存在“问题”。看看这篇文章：

[http://ray.camdenfamily.com/index.cfm/2006/7/26/ColdFusion-Whitespace-Options](http://ray.camdenfamily.com/index.cfm/2006/7/26/ColdFusion-Whitespace-Options)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T17:43:36.987

试试看

```
<cfform name="disclosureExportForm" style="margin-bottom: 0;" /> 
```

解决你的问题。

# php - Facebook $signed_request['user_id'] 不提取用户 ID

> ID：11992461
> 
> 赞同：0
> 
> 时间：2012-08-16T17:27:26.843
> 
> 标签：php, facebook

我环顾四周，所以如果这是重新发布，请按正确的方向发送给我，但是当我运行它时，我不断收到 1 个随机字符。我究竟做错了什么？我只想输出用户 ID。

```
 <?php require 'facebook.php';
  $facebook = new Facebook( array( 
   'appId'   => "XXXXXXXXXXXXXXXXXXX",
   'secret'  => "XXXXXXXXXXXXXXXXXXXXXXX",
   'cookie'  => true
 ) );

 try {
  $me = $facebook->api('/me');
 } catch ( FacebookApiException $e ) {
  error_log( $e );
  }

 $signed_request = $_REQUEST["signed_request"];
 $user_id = $signed_request['user_id'];
 echo $user_id;

 $signed_request = $facebook->getSignedRequest();
 $liked = $signed_request['page']['liked'];

 ?> 
```

$signed_request['page']['liked'] 也可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:33:01.937

那是您的代码的复制/粘贴吗？如果是这样

```
 $signed_request = $_REQUEST["signed_request"];
 $user_id = $signed_request['user_id'];
 echo $user_id; 
```

不起作用，它不是正确的signed_request，并且它不可读，因为您没有解密响应（在PHP SDK中，解密是在'getSignedRequest（）'函数中自动进行的）

您拥有的页面代码是正确的，因此要获取当前用户 ID，假设用户已接受您的应用程序的身份验证对话框，代码应为

```
 $signed_request = $facebook->getSignedRequest();
 $user_id = $signed_request['user_id'];
 echo $user_id 
```

# spring-security - Spring Security 手动重定向（通过代码，无需配置）

> ID：11992462
> 
> 赞同：0
> 
> 时间：2012-08-16T17:27:35.223
> 
> 标签：spring-security

我运行一个登录代码，如：

```
public String login(String username,String password){
    Authentication request = new UsernamePasswordAuthenticationToken(username,password);
                Authentication result = authenticationManager.authenticate(request);
                SecurityContextHolder.getContext().setAuthentication(result);
return null;
                } 
```

我不使用 jsf，也不知道如何在成功登录后将页面重定向到请求的安全页面。

我在使用它时得到了 facesContext 但现在我没有使用它。

如何通过代码重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:02:13.357

只需在检查 isAuthenticated() 后返回视图，如下所示：

```
 if (authenticationResponseToken.isAuthenticated()) {
            //lookup authentication success url, or find redirect parameter from login bean
            return "/secure/examples";
 } 
```

也可以看看：

*   [Spring 自定义 JSF 登录页面，总是“错误凭据”](https://stackoverflow.com/questions/11742283/spring-custom-jsf-login-page-always-bad-credentials/11746589#11746589)

# javascript - jquery“this”阻止访问包含对象“this”

> ID：11992464
> 
> 赞同：0
> 
> 时间：2012-08-16T17:27:41.453
> 
> 标签：javascript, jquery

我已经遇到过几次了。我试图创建最简单的代码片段来演示它。

问题是，在内部和对象方法中，如果我将匿名函数传递给 jQuery 方法（如“each”），在函数内部，我将无法访问对象的“this”。因为“this”现在与 jQuery 对象相关。

`logNameAndElementIds`问题的症结见方法中间的注释：

（我正在使用 Crockford 的对象函数来生成基于对象字面量定义的对象的对象实例。）

```
Object.create = function (o) {
    function F() {}
    F.prototype = o;
    return new F();
};

var objectLiteral = {

    setName: function(name){
        this.name = name;
    },

    logNameAndElementIds: function(){

        // works fine, 'this' refers to object instance
        console.log( this.name );

        $('.foo').each(function(){

             // we've lost "this" because it now refers to jQuery
            console.log( this.name ); 
            console.log( $(this).attr('id') );
        });
    }

};

obj1 = Object.create(objectLiteral);
obj1.setName('Mike');
obj1.logNameAndElementIds(); 
```

处理或解决这种情况的正确方法是什么？

显然我的例子很愚蠢，但这只是为了证明一个观点。更多时候我想循环一个 jQuery 匹配集，然后在每个项目上调用包含对象的方法。但我无法访问对象的方法，因为我现在有 jQuery 的“this”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:31:47.003

解决此问题的方法是将其保存`this`到可以在新范围内访问的变量中。

查看您的 logNameAndElementIds 函数：

```
logNameAndElementIds: function(){

    // works fine, 'this' refers to object instance
    console.log( this.name );
    var that = this;

    $('.foo').each(function(){

        // we've lost "this" because it now refers to jQuery
        console.log( that.name ); 
        console.log( $(this).attr('id') );
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:07:00.003

我认为有一个比我之前接受的更好的答案，那就是使用 ES5 的新[Function.prototype.bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)方法。更干净，可在所有现代浏览器中使用，并且易于为旧浏览器填充。

使用 bind() 你可以做这样的事情：

```
var myObj = {
    name: "Foo";

    iterateParagraphs: function() {
        $("p").each(function(i,p){
            $(p).addClass("bar"); // use $(p) where you use to use $(this);
            $(p).text(this.name); // this refers to myObj = Foo
        }.bind(this)); // get this (myObj) into callback
    }
}; 
```

Mozilla shim 的缩小版本（这似乎是最好的）是：

```
Function.prototype.bind||(Function.prototype.bind=function(b){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var d=Array.prototype.slice.call(arguments,1),e=this,a=function(){},c=function(){return e.apply(this instanceof a&&b?this:b,d.concat(Array.prototype.slice.call(arguments)))};a.prototype=this.prototype;c.prototype=new a;return c}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T17:31:27.850

“指针”的值`this`根据功能块的范围而变化。要从外部范围引用`this`，请保存原始对象的副本`this`（通常的约定是将其保存为`self`）：

```
var objectLiteral = {

    setName: function(name){
        this.name = name;
    },

    logNameAndElementIds: function(){

        // works fine, 'this' refers to object instance
        console.log( this.name );

        var self = this;

        $('.foo').each(function(){

            //use 'self' instead of 'this'

            console.log( self.name ); 
            console.log( $(this).attr('id') );
        });
    }

}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T17:31:29.967

这是众所周知的事情。通常我们使用原始代理`this`。

```
 var that = this;
    $('.foo').each(function(){

        console.log( that ); // original object
        console.log( this ); 

    }); 
```

# php - Apache 权限被拒绝

> ID：11992466
> 
> 赞同：16
> 
> 时间：2012-08-16T17:27:42.440
> 
> 标签：php, apache, permissions, httpd.conf

我刚刚安装了一个新的 Apache 2.4.2，在 windows 上构建了 PHP 快速 cgi。

然后我修改了 httpd.conf 添加以下内容：

```
LoadModule fcgid_module modules/mod_fcgid.so  
FcgidInitialEnv PHPRC "C:/SITE/PHP"
AddHandler fcgid-script .php
FcgidWrapper "C:/SITE/PHP/php-cgi.exe" .php

DocumentRoot "C:/SITE/localhost/www"
<Directory "C:/SITE/localhost/www">
    Order allow,deny
    Allow from all
</Directory> 
```

但是，当我尝试打开我的网站时，它会说：

`Forbidden You don't have permission to access / on this server.`

任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-16T18:23:18.763

这是正确的方法：（感谢 DaveRandom）

```
<Directory "C:/SITE/localhost/www">
    Options ExecCGI
    AllowOverride all
    Require all granted
</Directory> 
```

[Dave Random](https://stackoverflow.com/users/889949/daverandom)进一步解释：

> 在对此进行了一些实验之后，我发现了使其成为正确答案的细微差别，这是特定于 Apache 2.3+ 的。指令似乎`mod_authz_host`优先于`mod_access_compat`指令，并且在目录树中一直冒泡。这意味着如果您从 Apache 2.2 迁移到 Apache 2.4 并且`httpd.conf`逐字使用您的 2.2，它将起作用。
> 
> 但是，如果您执行 2.4 的新安装并将配置基于默认 2.4 `httpd.conf`，`Allow`则指令将不起作用，因为默认的顶级部分使用`Require all denied`指令而不是`Deny from all`，并且这优先于`Allow`树上更高的任何后续指令. 总而言之，如果您将 Order/Allow/Deny 指令迁移到其等效的 Requires 指令，那么您必须对所有指令进行尝试，否则您会发现您得到了意想不到的 403。

# objective-c - 当前视图控制器显示黑屏

> ID：11992473
> 
> 赞同：1
> 
> 时间：2012-08-16T17:29:00.543
> 
> 标签：objective-c, ios, model-view-controller

我正在尝试使用 Objective C 中的代码来呈现视图，但它所提供的只是标题栏和黑屏。这是我正在使用的代码：

```
MoreByUserViewController *morebyuser = [[MoreByUserViewController alloc] initWithOwnerId:self.ImageOwner];
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:morebyuser];
[self presentModalViewController:navController animated:YES]; 
```

我从启动视图（在此称为视图 1）中调用它，我尝试加载的视图将是视图 2。

我没有将视图 2 包含为视图 1 中的 #include 或 @class，我需要这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:52:10.000

就像 Ryan 和 Dustin 说的那样，你可能没有用那种`initWithOwnerID`方法加载笔尖。我建议先初始化视图，然后再将其设置`ownerID`为属性。

```
MoreByUserViewController *morebyuser = [[MoreByUserViewController alloc] initWithNibName:@"MoreByUserViewController" bundle:nil];
[morebyuser setOwnerID:self.ImageOwner];
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:morebyuser];
[morebyuser release];
[self presentModalViewController:navController animated:YES];
[navController release]; 
```

# jquery - jQuery隐藏在.post成功函数中不起作用

> ID：11992474
> 
> 赞同：2
> 
> 时间：2012-08-16T17:29:07.157
> 
> 标签：jquery, html, post, hide

谁能告诉我为什么我的代码：`$(this).parent().hide();`当放置在我的`.post()`喜欢之外时有效（所选的 div 被隐藏）：

```
$(document).on('submit', '.reply-message-form', function(e) {

        $(this).parent().hide();

        if($(this).children('.post-reply-message-textarea').val() == '')
            return false;

        $.post("<?php echo Yii::app()->createUrl('event/view', array('id'=>Yii::app()->controller->actionParams['id'])); ?>", 
        $(this).serialize(), function(response) {

            var responseObject = jQuery.parseJSON(response);
            // if successful.. process..
            if (responseObject.success == true) {

            } else {
                alert('failed');
            }

        });
        return false;
    }) ; 
```

但是，如果将`.hide()`其放入成功函数中*，*则`.post()`不会发生任何事情..？！里面的代码：

```
$(document).on('submit', '.reply-message-form', function(e) {

        if($(this).children('.post-reply-message-textarea').val() == '')
            return false;

        $.post("<?php echo Yii::app()->createUrl('event/view', array('id'=>Yii::app()->controller->actionParams['id'])); ?>", 
        $(this).serialize(), function(response) {

            $(this).parent().hide();
            return false;
            var responseObject = jQuery.parseJSON(response);
            // if successful.. process..
            if (responseObject.success == true) {

            } else {
                alert('failed');
            }

        });
        return false;
    }) ; 
```

只是为了清除任何疑问- responseObject.success 确实 == true （我已经通过警报等确认了这一点）。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T17:31:56.290

试试看，因为在后回调中移动时 $(this) 不一样。

```
$(document).on('submit', '.reply-message-form', function(e) {
    var elt = $(this).parent();
    if($(this).children('.post-reply-message-textarea').val() == '')
        return false;

    $.post("<?php echo Yii::app()->createUrl('event/view', array('id'=>Yii::app()->controller->actionParams['id'])); ?>", 
    $(this).serialize(), function(response) {

        $(elt).hide();
        return false;
        var responseObject = jQuery.parseJSON(response);
        // if successful.. process..
        if (responseObject.success == true) {

        } else {
            alert('failed');
        }

    });
    return false;
}) ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:33:23.903

`this`不再代表提交的表单，因为它位于 ajax 调用的回调中。在进行 ajax 调用之前，使用 this 设置一个变量。

```
var myForm = this; 
```

然后在你的成功回调中，参考`$(myForm)`

# ubuntu - 如何将 PC 连接到 ubuntu Beagle 板

> ID：11992477
> 
> 赞同：0
> 
> 时间：2012-08-16T17:29:33.227
> 
> 标签：ubuntu, linux-device-driver, beagleboard

我通过串行端口将 PC 连接到小猎犬板。Ubuntu 在 PC 和 beagle 板上运行。我在小猎犬板上安装了传感器。这些传感器数据是 PC 通过串行端口从 beagle 板获取的数据。如何使用串口将传感器数据从 beagle board（运行 Ubuntu）传输到 PC？我需要在两个操作系统之间进行通信吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:01:30.060

在比格板。
echo sensor_data > /dev/<serial_device >
例如：echo $DATA > /dev/ttyS0

在 Ubuntu 电脑中：
cat /dev/<serial_device>

# android - android webview backkey中用于重定向href链接的死循环

> ID：11992478
> 
> 赞同：10
> 
> 时间：2012-08-16T17:29:35.207
> 
> 标签：android, mobile, webview

在处理重定向链接时，我在带有 backkey 的 Android webview 应用程序中遇到了死循环。

例如，当我的 webview 启动时，它转到 link0。

在link0 中，有一个链接到link1 的href 链接。链接 1 重定向到链接 2。

所以如果我点击link1，它将转到link1，然后重定向到link2。当我单击 backkey 时，它应该返回到 link0，就我而言。但相反，它转到link1，它再次重定向回link2。所以我再也没有机会回去了。

如果它们不是重定向链接，则后键可以与其他链接一起正常工作。

我在网上搜索了帮助，但没有找到相关的问题。

顺便说一句，backkey 在 Internet 浏览器中按预期工作。但不在网络视图中。

以下是我的代码，供您尝试。正如您在代码中看到的那样，我尝试了 onBackPressed 和 onKeyDown，但两者都有效。

谢谢你的帮助。我已经为此苦苦挣扎了一段时间。

==================================================== =================================

```
public class MyActivity extends Activity 
{
    private WebView myWebView;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        myWebView = (WebView) findViewById(R.id.webview);
        myWebView.getSettings().setJavaScriptEnabled(true);
        myWebView.loadUrl("http://50.112.242.120/temp/");
        myWebView.setWebViewClient(new MyWebViewClient());
    }

    private class MyWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            myWebView.loadUrl(url);
            return true;
        }
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        // Check if the key event was the Back button and if there's history
        if ((keyCode == KeyEvent.KEYCODE_BACK) && myWebView.canGoBack()) {
            myWebView.goBack();
            return true;
        }
        // If it wasn't the Back key or there's no web page history, bubble up to the default
        // system behavior (probably exit the activity)
        return super.onKeyDown(keyCode, event);
    }
} 
```

.

```
// main.xml
<?xml version="1.0" encoding="utf-8"?>
<WebView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
/> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-10-15T12:37:44.633

```
webview.setWebViewClient(new WebViewClient(){
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            Log.i(tag, "url = " + url);
            // view.loadUrl(url);

            // return super.shouldOverrideUrlLoading(view, url);
            return false;
        }
    }); 
```

**看！！！！重要的是， shouldOverrideUrlLoading 必须返回 false**

在 shouldOverrideUrlLoading 中不能调用 view.loadUrl。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T01:15:00.573

`shouldOverrideUrlLoading()`在每个 URL 的基础上调用。因此，如果[http://site1.com/](http://site1.com/)重定向到[http://site2.com/](http://site2.com/)，然后重定向到[http://site3.com/](http://site3.com/)，您正在调用`WebView.loadUrl()`这些 URL 中的每一个。因此，每个都出现在后堆栈中。

而不是创建一个`WebViewClient`你可能想要一个`WebChromeClient`. `WebChromeClient`定义了一个方法，该方法`onCreateWindow`仅在`WebView`尝试创建新窗口时调用，而不是针对它访问的每个 URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-23T01:31:28.997

**我有同样的问题并解决了**。**这是[我的答案](https://stackoverflow.com/a/24900457/541620)。**

当我单击第一个链接（www.new.a）时，它会自动重定向其他链接（mobile.new.a）。通常链接重定向两个或三个，我的解决方案几乎适用于每个重定向链接。我希望这个答案可以帮助您解决 annyoing 重定向链接。

我终于想通了。您需要一个具有四个 API 的 WebViewClient。WebViewClient中有shouldOverrideUrlLoading()、onPageStarted()、onPageFinished()和doUpdateVisitedHistory()。您需要的所有 API 都是 API 1，所以不用担心。

**这是[我的答案](https://stackoverflow.com/a/24900457/541620)。看看那个！:)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-12T17:07:40.857

烦人的重定向进入后向历史。检测用户何时触发 url 加载，并将其添加到 backstack。

```
private List<String> previous = new ArrayList<String>();
private String mLastUrl;
webview.setWebViewClient(new WebViewClient() {
    @Override
    public void onPageFinished(WebView view, String url) {
        Log.i("DebugDebug", "OnPageFinished " + url);
        mLastUrl = url;
        super.onPageFinished(view, url);
    }
});

webview.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View view, MotionEvent motionEvent) {
        WebView.HitTestResult hr  = ((WebView)view).getHitTestResult();
        if (hr != null && mLastUrl != null) {
            if (previous.isEmpty() || !previous.get(previous.size() - 1).equals(mLastUrl)) {
                previous.add(mLastUrl);
            }
            Log.i("DebugDebug", "getExtra = " + hr.getExtra() + "\t\t Type = " + hr.getType());
        }
        return false;
    }
});

@Override
public void onBackPressed() {
    Log.i("DebugDebug", "onBackPressed");
    int size = previous.size();
    if (size > 0){
        webview.loadUrl(previous.get(size - 1));
        previous.remove(size - 1);
    } else {
        super.onBackPressed();
    }
} 
```

# android - 从消息应用程序获取当前联系人

> ID：11992479
> 
> 赞同：0
> 
> 时间：2012-08-16T17:29:35.877
> 
> 标签：android

我希望能够提取当前存储在设备上的默认短信应用程序中的具有短信 (sms) 对话的联系人的联系信息（姓名和号码）。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:40:38.767

您可能需要查询以下 uri 以获取在 sms 和 mms 中寻址的所有地址

```
content://mms-sms/conversations 
```

你需要得到`address`专栏

```
ContentResolver contentResolver = getContentResolver(); 
    final String[] projection = new String[]{"*"}; 
    Uri uri = Uri.parse("content://mms-sms/conversations/"); 
    Cursor query = contentResolver.query(uri, projection, null, null, null);
    String phone = "";
    while(query.moveToNext()){
    phone = query.getString(query.getColumnIndex("address"));
    Log.d("test",phone);
    } 
```

编辑：您可以检查从[此处](https://stackoverflow.com/q/6994107/1109425)复制的以下功能。将从上面的地址列中选择的数字传递给这个函数

```
private String getContactNameFromNumber(String number) {
    // define the columns I want the query to return
    String[] projection = new String[] {
            Contacts.Phones.DISPLAY_NAME,
            Contacts.Phones.NUMBER };

    // encode the phone number and build the filter URI
    Uri contactUri = Uri.withAppendedPath(Contacts.Phones.CONTENT_FILTER_URL, Uri.encode(number));

    // query time
    Cursor c = getContentResolver().query(contactUri, projection, null,
            null, null);

    // if the query returns 1 or more results
    // return the first result
    if (c.moveToFirst()) {
        String name = c.getString(c
                .getColumnIndex(Contacts.Phones.DISPLAY_NAME));
        c.close();
        return name;
    }
    c.close();
    // return the original number if no match was found
    return number;
} 
```

您必须编辑它以匹配您的查询，因为为每个号码调用它会很慢。

# microsoft-metro - 在 Win 8 JavaScript 应用程序中运行 QUnit-Metro，为什么“测试”未定义？

> ID：11992480
> 
> 赞同：2
> 
> 时间：2012-08-16T17:29:38.617
> 
> 标签：microsoft-metro, qunit

下面列出了我的整个默认页面。

```
 <!DOCTYPE html>
    <html>
    <head>
        <meta charset="utf-8" />
        <title>Readingz</title>

        <!-- WinJS references -->
        <link href="//Microsoft.WinJS.1.0.RC/css/ui-dark.css" rel="stylesheet" />
        <script src="//Microsoft.WinJS.1.0.RC/js/base.js"></script>
        <script src="//Microsoft.WinJS.1.0.RC/js/ui.js"></script>

        <!-- Readingz references -->
        <script src="/js/default.js"></script>
        <script src="/js/default_tests.js"></script>
        <script src="/js/qunitmetro.js"></script>

        <link href="/css/default.css" rel="stylesheet" />
        <link href="/css/qunitmetro-light.css" rel="stylesheet" />

    </head>
    <body>
        <p>Content goes here</p>

        <!-- This is for testing only. It goes away when application is ready to ship. -->
        <div id="qunit"></div>
    </body>
    </html> 
```

我不断收到测试未定义的错误。看起来我在应用程序开始的 default.html 页面中列出了它。我已经通过 Nuget 添加了 QUnit-Metro，所以我不确定此时是否需要进行其他类型的关联，甚至启用了 ReSharper/Visual Studio 的智能感知也将测试显示为有效的调用函数。

![在此处输入图像描述](../Images/9408cc9ccab97e1e2f0eb363b4636e56.png)

![在此处输入图像描述](../Images/7afb18aecc4ba86a5f2ae177209a4f31.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:36:20.400

你的 HTML 看起来很奇怪；

```
<script src="/js/default_tests.js"></script>
<script src="/js/qunitmetro.js"></script> 
```

这包括在导入具有所有定义的 qunitmetro.js*之前*要测试的脚本。尝试颠倒这两个脚本行，事情应该会更好。

# .net - 使用模式按名称查找 Windows 窗体控件

> ID：11992483
> 
> 赞同：2
> 
> 时间：2012-08-16T17:29:51.793
> 
> 标签：.net, winforms, linq

我想列出名称以“btnOverlay”开头的另一个控件中的所有控件。我不能使用`Controls.Find`，因为它需要完全匹配。我相信我可以为此使用 LINQ，但我对此不是很有经验。是否可以？我该怎么做？

我正在使用.NET 4.0。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T17:32:45.617

您可以通过以下方式使用 LINQ 搜索它们：

```
var matches = control.Controls.Cast<Control>()
                     .Where(c => c.Name.StartsWith("btnOverlay")); 
```

`Cast<T>`调用是必需的，因为没有`ControlCollection`实现`IEnumerable<T>`，只有`IEnumerable`. 此外，这不会进行递归搜索，而只会直接搜索包含的控件。如果需要递归，您可能需要将其重构为[类似于此答案的方法](https://stackoverflow.com/questions/3419159/how-to-get-all-child-controls-of-a-winform-of-a-specific-type-button-textbox/3426721#3426721)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T21:23:55.843

这是不使用 LINQ 的替代方法：

```
foreach (Control c in this.Controls)
{
    if (c.Name.StartsWith("btnOverlay"))
    {
        // Do something
    }
} 
```

随意`this.`使用您要使用的控件重命名。

# javascript - 寻找 Javascript、Php IDE

> ID：11992489
> 
> 赞同：1
> 
> 时间：2012-08-16T17:30:09.140
> 
> 标签：javascript, php, ide, open-source

我需要一个免费或开源的 IDE 来开发 javacript（openlayers、jquery、js-test-driver、jasmine）、php（Yii 框架），没有 Flash。到目前为止，我介于 Aptana 3 和 Netbeans 7 之间。MySql 是我的数据库后端。它将在 Windows 上运行。

使用标准：合理的性能、最重要的特性（自动完成、重构、测试/svn/ant 集成、突出显示错误、转到函数//方法、查找函数/方法的用法）

你能推荐任何吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:37:20.757

与 Eclipse 相比，我选择了 Netbeans 并使用了很长时间。它非常适合 Java、PHP、JavaScript。在开始编写 Python 应用程序时，我只需要迁移到 Eclipse。

他们俩可能都需要进行一些[调整](http://wiki.netbeans.org/FaqSlowNetBeans)以提高速度和性能。

**更新我的 Eclipse 体验：**

也许我在 Eclipse 中做错了什么，但似乎 Netbeans 比 Eclipse 更智能地执行 JavaScript 代码的代码完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T17:39:46.123

我肯定会推荐 NetBeans

**更新：**

..即使您提到“免费”，我也会给 IntelliJ 一个机会。您可以获得 30 天的免费时间（然后在重新启动前一次 30 分钟）。

我没有用 IntelliJ 做过任何 PHP（只有 Java 和 Groovy/Grails），但如果它对 PHP 的处理与其他语言一样精致，那么它可能是一个很好的长期选择。我仍然经常使用 NetBeans，我很高兴我在 IntelliJ 上大手大脚。

# css - 用于 SVG 图像的 CSS 精灵

> ID：11992490
> 
> 赞同：2
> 
> 时间：2012-08-16T17:30:12.830
> 
> 标签：css, svg

```
 <image x="20" y="20" width="300" height="80" xlink:href="logo.png" /> 
```

有没有办法使用像素来定位图像？喜欢 CSS 精灵？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-16T19:16:01.347

您可以使用 position:absolute 定位它

例如

```
img {
 position:absolute;
 top:20px;
 left:20px;
} 
```

它将相对于它的父容器定位，该容器具有位置：相对设置。

希望有帮助。

# jquery - 使用 Servlet 在 IE8 上下载多个文件

> ID：11992493
> 
> 赞同：3
> 
> 时间：2012-08-16T17:30:35.897
> 
> 标签：jquery, jsf, servlets, richfaces

我正在尝试构建一个可以在客户端上下载多个文件（而不是 zip 文件）的 Web 应用程序。我正在使用 jsf、jquery 和 servlet。该代码在 Mozilla 中运行良好，但在 IE8 中无法运行。

更具体地说：我希望客户端从浏览器接收 4 个不同的保存/打开提示。所以...我做了一个这样的简单示例：用户按下操作按钮>>将创建 4 个不同的 iframe，其 src 属性等于 servlet 路径>>servlet 生成带有 pdf 文件的响应>>客户端接收多个保存/打开提示

这在 Mozilla 中运行良好，但在 IE8 中，如果您按足够快的 ESC 键，您将获得 3 个保存/打开提示 :) 这还不够……我检查了是否所有 4 个请求和所有 4 个响应都已做出并且他们都在那里......我看不出提示的问题在哪里......

有什么方法可以让 jquery 等到 promt 关闭以制作下一个 iframe（请求）？我认为这即使在 IE 中也应该有效 :)

在此示例中，有 4 个使用 JasperReports 创建的 pdf。

小服务程序：

```
public class TestServlet extends HttpServlet {
private static final long   serialVersionUID    = 509291005008276860L;
private Logger logger LoggerFactory.getLogger( TestServlet.class );

@Override
protected void doGet( HttpServletRequest req, HttpServletResponse resp ) throws ServletException, IOException
{
    try {

        Map<String, Object> params = new HashMap<String, Object>();

        params.put( "JUDET", "Alba" );
        params.put( "NUME", "Caliman" );
        params.put( "PRENUME", "Victor" );
        params.put( "DATA_NASTERE", "01/03/1987" );
        params.put( "LOCALITATE", "Alba Iulia" );
        params.put( "STR", "T. Vladimirescu" );
        params.put( "NR", "11" );
        params.put( "BL", "V4" );
        params.put( "SC", "A" );
        params.put( "ET", "1" );
        params.put( "AP", "1" );
        params.put( "JUDET_DOMICILIU", "Alba" );
        params.put( "TIP_ACT", "CI" );
        params.put( "SERIA", "Ax" );
        params.put( "NR_ACT", "42910" );
        params.put( "CNP", "1870301011193" );
        params.put( "COR", "Inginer software" );
        params.put( "BENEFICIAR", 0 );
        params.put( "EVIDENTA", 0 );
        params.put( "DATA", "02/08/2012" );

        PdfData pdfData = new PdfData();
        pdfData.setExportedFileName( "cerereDosar.pdf" );
        pdfData.setTemplateName( "reports/cerereDosar.jasper" );
        pdfData.setParams( params );

        InputStream inputStream = null;

        resp.reset();
        resp.setHeader( "Content-Type", "application/octet-stream" );
        resp.setHeader( "Content-Disposition", "attachment; filename=\"" + pdfData.getExportedFileName() + "\";" );

        inputStream = new ClassPathResource( pdfData.getTemplateName() ).getInputStream();

        //          final Locale locale = FacesContext.getCurrentInstance().getApplication().getDefaultLocale();
        //          pdfData.getParams().put( JRParameter.REPORT_LOCALE, new Loca );

        JasperPrint jasperPrint = JasperFillManager.fillReport( inputStream, pdfData.getParams(),
            new JREmptyDataSource() );

        JasperExportManager.exportReportToPdfStream( jasperPrint, resp.getOutputStream() );

        inputStream.close();

        logger.info( req.getQueryString() );
    }
    catch( Exception e ) {
        e.printStackTrace();
    }
}

} 
```

和 test.xhtml：

```
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:a4j="http://richfaces.org/a4j"
xmlns:rich="http://richfaces.org/rich"
xmlns:nao="http://nao.anofm.org/jsf/composite/util"
xmlns:naocc="http://java.sun.com/jsf/composite/components">
<ui:composition template="/layout/template.xhtml">
<ui:define name="content">
    <h:form id="forma">
        <a4j:commandButton value="Action" onclick="printTest();" />
        <div style="display: none;" id="result"></div>
    </h:form>

    <script type="text/javascript">     

                function print(tipAct){
                    $('<iframe>')
                    .appendTo('#result')
                    .attr('src', 'http://localhost:8080/nao-inregistrare/TestServlet/')
                    .attr('id', tipAct);
                }

                function printTest(){
                    for(var i = 1; 5>i; i++){
                        $.when(print(i)).done();
                        }
                }

</script>
</ui:define>
</ui:composition>
</html> 
```

欢迎任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T11:11:21.930

这个周末我真的很忙，忘了发布答案。事实证明，javascript窗口对象正在失去对每个提示的关注（我知道，但似乎我变得非常懒惰:(并开始要求人们做我的工作）......所以我可以提出请求/获得焦点. 这是一个非常不专业和“第一次尝试”的例子，但它欺骗了 IE :)

```
var i = 4;

window.onfocus = function(){
if(b == true && i != 0){
print(i);
} else {
alert('i`m done');
}
}

var b;

function print(tipAct){
i--;
b = true;
$('<iframe>')
.appendTo('#result')
.attr('src', 'http://localhost:8080/nao-inregistrare/TestServlet/')
.attr('id', tipAct);
} 
```

变量 i = 4; 代表我删除的 printTest() 函数中的循环。在每次请求/获得焦点时，我都会减少 print() 函数。var b 是一个标志，表明这是第一个焦点并且操作按钮没有被按下。我还更改了按钮中的操作：

```
<a4j:commandButton value="Action" onclick="print(i);" /> 
```

但仍然存在一个问题：沃尔多在哪里？（第一个示例中的第 4 个文件）在第一个示例中，正常流程是这样的：
1）第一个文件被提示，其余文件在某处丢失
或
2）所有 4 个文件都被提示

IE 会提示随机数量的文件，而不是所有文件。我真的很困惑。当我有空闲时间时，我会在微软论坛上发布这个......也许他们对此有一个合乎逻辑的解释。我这里也放个链接给大家。:)

# fiddler - fiddler http 请求和病毒

> ID：11992494
> 
> 赞同：0
> 
> 时间：2012-08-16T17:30:49.967
> 
> 标签：fiddler, virus

我的笔记本电脑可能感染了病毒，因为 q 键有时会自动输入，但对我的点击没有响应。我想看看互联网上是否有任何可疑的事情发生，例如键盘记录器。我打开fiddler查看http请求并找到以下Host：ohkdapdekh（和一些类似的随机字符串）Url：/

还有很多Tunnel to talkx.l。谷歌网站：443

我不使用谷歌谈话......几周前只有一次

现在我想知道是否有任何方法可以跟踪发出请求的程序或服务？请帮助拯救我亲爱的电脑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:35:34.853

我建议扫描并删除病毒，而不是尝试跟踪它的 http 请求。如果您真的想知道，使用 TCPView ( [http://technet.microsoft.com/en-us/sysinternals/bb897437.aspx](http://technet.microsoft.com/en-us/sysinternals/bb897437.aspx) ) 将允许您查看发出请求的进程。

否则，我建议使用 MalwareBytes 和 ComboFix 来删除病毒。在尝试删除恶意软件之前，请务必像往常一样首先备份任何重要数据。

# php - PHP中的几乎最终方法？

> ID：11992496
> 
> 赞同：5
> 
> 时间：2012-08-16T17:30:50.357
> 
> 标签：php, inheritance, overriding, final

我在继承链中有两个抽象类，最终将成为一个通用库：

```
abstract class Foo {
    public function baz() {
        echo 'Foo::baz()';
    }

    // other methods here
}

abstract class Bar extends Foo {
    public function baz() {
        echo 'Bar::baz()';
    }
} 
```

这两个类是由开发人员扩展的，我的问题是我想使它的`baz()`方法的实现都不能被覆盖（因为它们包含严格的符合 RFC 的代码）。制作`Bar::baz()` `final`没问题；但是，如果我 make `Foo::baz()` `final`，那么`Bar`它本身显然也不能覆盖它。

PHP 5.4`trait`可能会提供一个实用的解决方案，但我不能就此放弃对 PHP < 5.4 的支持。我最后的手段是保持原样并使用文档来警告开发人员不要覆盖此方法，但如果可能的话，我想找到更具体的东西。

是否有任何其他设计可以用来强制不应该重写这两种方法，同时保持代码干燥（例如，不删除继承和复制所有代码）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T06:52:50.547

我想我有办法做到这一点。这更像是一个技巧，而不是一个真正干净的设计，但我想我明白了。

```
abstract class Foo {
private $bazBehaviour;
    public function __construct($bazBehaviour){
        $this->bazBehaviour=!empty($bazBehaviour)?$bazBehaviour:"defaultBazBehaviour";
    }
   final public function baz() {
       $this->bazBehaviour();
   }
   final protected function defaultBazBehaviour(){
        echo "Foo::Baz()";
    }
   // other methods here
}

abstract class Bar extends Foo {
    public function __construct(){
       parent::__construct("bazBehaviour");
    }
    final protected function bazBehaviour() {
        echo 'Bar::baz()';
     } 
}
class toto extends Bar{
     public function __construct(){
       parent::__construct();
    }
}
$d = new toto();
$d->baz(); 
```

使用 PHP 5.3.13 它发送： Bar::Baz()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T08:12:13.200

这似乎是“[优先组合优于继承](http://en.wikipedia.org/wiki/Composition_over_inheritance)”的想法适用的情况。它有点重复，但它不涉及重复实现并为您提供所需的功能。

```
interface Bazr {
    public function baz();

    public function myOtherMethod1();
    public function myOtherMethod2();
}

public class Foo implements Bazr {
  public final function baz() {} 
  public function myOtherMethod1() {/* default implementation of some method */}
  public function myOtherMethod2() {/* yeah */}
}

public class Bar implements Bazr {
  private parentBazr = null;
  public function __construct() {
    $this->parentBazr = new Foo();
  }

  public final function baz() {}
  public function myOtherMethod1() {
    $this->parentBazr->myOtherMethod1();
  }
  public function myOtherMethod2() {
    $this->parentBazr->myOtherMethod1();
  }
} 
```

Foo 和 Bar 都可以扩展，Bar “组合” Foo 的功能，baz 在 Foo 和 Bar 中都是 final 的。我不确定您是否喜欢包含或省略接口... PHP 没有类型变量，因此除了与两个实现类强制执行合同之外，它可能没有必要。定义接口的缺点是其他人可以实现该接口（尽管对于 trait 也是如此）。

抱歉，如果我混合了 java/php 语法，我想我遗漏了一些“$”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T18:06:30.023

很抱歉，您的要求是矛盾的：

```
my problem is that I'd like to make it so that neither implementation of 
the baz() method can be overridden 
```

但是，您在..so**中是**压倒一切的，这里的设计/要求存在一些基本问题。`Foo:baz()``Bar`

# c# - 为什么 DataContext 不随外部数据库更改而更新？

> ID：11992498
> 
> 赞同：1
> 
> 时间：2012-08-16T17:30:53.460
> 
> 标签：c#, sql-server, sql-server-2005, linq-to-sql

如果我在应用程序运行时更改 Microsoft SQL Server Management Studio 中的数据，LINQ 将不会获取新数据，即使我运行

```
myContext.Refresh(System.Data.Linq.RefreshMode.OverwriteCurrentValues) 
```

获得新更改的唯一方法（到目前为止我发现......）是重新创建数据上下文。

```
myContext.Dispose();
myContext = new MyDataContext(); 
```

我一定是盲人，这必须非常明显，但我已经浪费了足够的时间来让自己发布这个愚蠢的问题...... -_-''

谢谢！

**编辑**

当我从 SQL 加载数据时：

```
myBindingSource.DataSource = myContext.myTable.Where(o => o.id != 0).OrderBy(o => o.name); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:53:44.530

我的概念是有缺陷的，DbContext 的保存时间不应超过您需要执行的查询。也就是说，如果我想刷新我的数据，我应该只获取一个新的 DbContext 实例并重新填充我的数据源。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-03T08:46:00.063

让connectionstrin为：

```
string pp = @"Data Source=(LocalDB)\v11.0;AttachDbFilename=C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\DATA\AdventureWorks2012_Data.mdf;Integrated Security=True;Connect Timeout=30"; 
```

和更新任务如下所述：

```
 public async Task callupdate()
        {
            try
            {
                int ppp = Convert.ToInt32(textBox1ID.Text);
                DataClasses1DataContext dc = new DataClasses1DataContext(pp);

                Person person = dc.Persons.Single(c => c.BusinessEntityID == ppp);
                person.PersonType = Convert.ToString(PersonTypecomboBox1.SelectedItem);
                person.PersonType = Convert.ToString(PersonTypecomboBox1.SelectedItem);
                if (NameStylecomboBox1.SelectedText == "False")
                    person.NameStyle = false;
                else
                    person.NameStyle = true;
                person.Title = Convert.ToString(TitlecomboBox1.SelectedItem);
                person.FirstName = FirstNametextBox2.Text;
                person.MiddleName = MiddleNametextBox3.Text;
                person.LastName = LastNametextBox4.Text;
                person.Suffix = SuffixtextBox5.Text;
                person.EmailPromotion = Convert.ToInt32(EmailPromotiontextBox6.Text);
                person.ModifiedDate = DateTime.Today;
                dc.SubmitChanges();
            }
            catch(Exception exp)
                {

                }

        } 
```

代替 `DataClasses1DataContext dc = new DataClasses1DataContext();`

`DataClasses1DataContext dc = new DataClasses1DataContext(pp);`

v通过调用`SubmitChanges()`我们类的对象的更新数据实际上正在写入实际的数据库中

# php - 动态链接中无用的获取变量以改善 SEO

> ID：11992500
> 
> 赞同：3
> 
> 时间：2012-08-16T17:31:16.237
> 
> 标签：php, url, dynamic, seo

我正在构建一个网站，该网站根据我的数据库中的 id 链接到特定的房地产列表。前任：`listing.php?listing_id = 3`

添加一个不同的无用变量是否值得，例如：

```
address = 'blah_blah' or
city = 'blah' 
```

提高SEO评级。

我可以完全离开这里，我知道我可以配置 htdocs？但我现在只是在寻找快速解决方案。这会有什么不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:57:28.387

您不应该将其视为“试图”提高您的评分。最终，这种心态的伤害大于帮助。您能做的最好的事情就是提供独特的、高质量的、有用的内容。这将比试图欺骗搜索引擎更有帮助。如果在 URL 中包含相关的文本/名称会帮助您的访问者，那就去做吧。否则，老实说，它可能不值得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:44:23.307

如果您要在站点地图中提交：

```
http://www.yourdomain.com/yourpage.php?listing_id=3 
```

和

```
http://www.yourdomain.com/yourpage.php?listing_id=3&address=blah_blah 
```

作为谷歌的不同页面（通过站点地图或[谷歌网站管理员](http://www.google.com/webmasters/)） - 你只会导致你的网站损坏！谷歌会将这“两页”检测为重复内容，您的排名将会下降。谷歌不喜欢重复的内容，它喜欢独特性和质量。记住：[内容为王](http://www.readwriteweb.com/enterprise/2011/10/infographic-why-content-is-kin.php)！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T17:54:26.203

网址越用户友好，您的 SEO 评级就越高。在您的情况下，您没有用户友好的网址，而是变量驱动的网址，因此放置更多可读文本将提高您的 URL 链接的可读性，这将提高您的 SEO 评级，但请确保所有空格和特殊字符都替换为连字符“-”

# javascript - 简单的 JavaScript 函数来持续更改按钮 onclick 的状态？

> ID：11992502
> 
> 赞同：1
> 
> 时间：2012-08-16T17:31:23.693
> 
> 标签：javascript, dom-events, persistent

有没有人有任何简单的 JavaScript 函数可以持续改变按钮的状态`onclick`？如：

[按钮1] [按钮2] [按钮3]

然后，当您单击按钮 1 时，会发生以下情况：

(((button1))) [button2] [button3]

然后，如果您要单击 button2，则会发生这种情况：

[button1] (((button2))) [button3]

与按钮 1 关联的图像持续更改的位置。

我查看了这个答案[https://stackoverflow.com/a/4967732/73844](https://stackoverflow.com/a/4967732/73844)和这个答案[https://stackoverflow.com/a/7991898/738448](https://stackoverflow.com/a/7991898/738448)但我无法看到它们如何组合在一起做我想做的事情. 任何帮助，将不胜感激。

这是我尝试过的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<style type="text/css">
#prog
{
    margin: 5px 85px;
    width: 200px;
    height: 40px;
    background:url(prog_off.png) no-repeat;
    border: 0;
}
</style>
<script type="text/javascript">
function changeImage() {
    test=document.getElementById("prog");
    test.backgroundImage="url(prog_on.png)";
}
</script>
</head>
<body>
<input type="button" id="prog" onClick="changeImage()" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:59:51.220

你在寻找这样的东西吗？

[http://jqueryui.com/demos/button/radio.html](http://jqueryui.com/demos/button/radio.html)

如果是这样，使用 jQuery UI 的按钮小部件而不是重新开发会更容易（并且更好，因为它在所有浏览器等上进行了测试）。

[http://jqueryui.com/demos/button/#radio](http://jqueryui.com/demos/button/#radio)

# java - 如何保护从 OAuth 受保护资源中提取数据的 Android 应用程序

> ID：11992503
> 
> 赞同：3
> 
> 时间：2012-08-16T17:31:23.880
> 
> 标签：java, android, security, oauth, oauth-2.0

我的公司正在构建一个 RESTful API，它将返回中等敏感信息（即财务信息，但不包括帐号）。我可以控制 RESTful API 代码/服务器，并且正在构建 Android 应用程序。我已经将 API 设置为使用 OAuth 2 和授权代码授予流程（带有客户端 ID 和密码），并且我自动批准用户而无需他们批准客户端，因为我们同时拥有客户端和提供者。我们将 CAS 用于 SSO，当用户登录以检索令牌时，我将其用于授权服务器作为 OAuth 2 过程的一部分。

我正在考虑各种方法来保护 Android 应用程序上的数据。我得出的结论是，在设备上存储客户端 ID 和机密肯定不会发生，但我认为存储身份验证令牌可能会起作用，因为它只会对个人用户造成风险（而且真的只有当他们碰巧有有根电话）。

这是我想到的两个选择。它们都要求我拥有一种受 CAS 保护的代理服务器，与 API 服务器共舞，并返回身份验证令牌。这消除了在应用程序代码中存储客户端 ID 和密码的需要。

这是我想出的：

1）要求用户在每次启动应用程序时输入密码才能访问数据。这绝对是最万无一失的方法。如果这样做了，为了方便起见，我可能想保存用户 ID，但在这种情况下，不能使用 CAS 登录（因为它是基于 Web 的）。我也许可以在后端使用无头浏览器将用户登录到 CAS 并根据他们在 Android 表单中输入的内容检索令牌，但这似乎很棘手。保存用户 ID 类似于 Chase 应用程序所做的（如果您碰巧使用这个） - 它保存用户 ID，但不保存会话之间的密码。

2) 将身份验证令牌存储在 Android 设备上。这有点不安全，但几乎是万无一失的。用户首次启动应用时，打开网页到返回token的代理服务器的CAS登录（类似[https://developers.google.com/accounts/docs/MobileApps](https://developers.google.com/accounts/docs/MobileApps)）。在用户登录并将令牌返回给应用程序后，对其进行加密并将其私有存储给应用程序。此外，使用 ProGuard 混淆代码，使加密算法更难逆向工程。我也可以在令牌刷新中工作，但我认为这更像是一种错误的安全感。

3) 不要使用 CAS，而是想出另一种方法来获取服务的身份验证令牌。

关于其他人如何实现类似场景的任何建议（如果已经完成）？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T20:18:08.270

开发 OAuth 等标准的原因是，并非每个人都必须一次又一次地重新考虑相同的攻击向量。所以大多数情况下，最好的选择是坚持现有的东西，而不是自己烘焙。

无法秘密存储数据的客户端的第一个问题是用户的数据可能会被某些攻击者访问。由于在技术上无法阻止这种情况（代码混淆不会帮助您对抗专家攻击者），OAuth 2 中的*访问令牌*通常会在短时间内[过期，并且不会为攻击者提供完全访问权限（受](https://stackoverflow.com/q/7030694/1467115)*范围*限制）。当然，您不应该在此类设备上存储任何*刷新令牌。*

第二个问题是[客户模拟](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-10.2)。攻击者可以窃取您的*客户端机密*并在他自己的（可能是恶意的）应用程序中访问您的 API。用户仍然必须自己登录。那里的 OAuth 草案要求服务器尽其所能防止这种情况发生，但这真的很难。

> 授权服务器必须尽可能对客户端进行身份验证。如果授权服务器由于客户端的性质而无法对客户端进行身份验证，则授权服务器必须要求注册任何用于接收授权响应的重定向 URI，并且应该使用其他方式来保护资源所有者免受此类潜在恶意客户端的侵害。例如，授权服务器可以聘请资源所有者来帮助识别客户端及其来源。

我认为谷歌是第一个尝试通过检查应用程序签名来验证此类设备上的客户端的另一种方法，但它们还没有准备好迎接黄金时段。如果您想更深入地了解这种方法，请[在此处查看我的答案](https://stackoverflow.com/a/11513309/1467115)。

目前，您最好的选择是继续使用 OAuth 方式，即在设备上拥有*访问令牌*、*客户端 ID*和*客户端密码*（使用*授权码授予流程*时），并配置您的服务器以进行额外检查。如果你觉得混淆这些值更安全，那就去做吧，但总是认为这些值是公开的。

# java - Java 对话框

> ID：11992506
> 
> 赞同：-3
> 
> 时间：2012-08-16T17:31:31.230
> 
> 标签：java, swing, jtable, jframe, jtextarea

我将如何生成以下窗口：

[http://postimage.org/image/61aa8hrvb/](http://postimage.org/image/61aa8hrvb/)

我会用什么来格式化？类似于 BorderLayout 的东西？有没有更好的办法？

我尝试过使用 JFrame、JPanel 和 JTextArea 的组合；如下：

```
 public static void doListAllChecks() {
    int transCount = CAObject.getTransCount();

    JFrame frame = new JFrame();
    frame.setVisible(true);
    JPanel content = new JPanel();
    for (int idx = 0; idx < transCount; idx++)
    {
        Transaction tObj = CAObject.getTrans(idx);
        if (tObj != null) {
            if (tObj.getTransId() == Constants.CHECK_ID)
            {
                System.out.println("Check ID " + tObj.getTransNumber() +
                        " Check Amount " + tObj.getTransAmount());
                JTextArea textArea = new JTextArea(5,20);
                textArea.setText("Check " + tObj.getTransAmount());
                content.add(textArea, BorderLayout.EAST);
            }
        }
    }

    frame.setContentPane(content);
    frame.setTitle("Dialog Display");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    frame.pack();
} 
```

我正在寻找一种基本且非常简单的窗口样式。我有数据，但我不知道如何生成窗口。

编辑：我不是在问如何用数据填充窗口——只是如何生成窗口。似乎它只有一个固定的大小（长度和宽度）和一个边框。它似乎是一个准系统窗口。

有什么你能想到的类似于这种风格的窗户吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:02:31.990

这是一个建议（它可以在很大程度上得到改进，但至少，你会有一个起点）：

```
public static void main(String[] args) throws Exception {

    String[][] transactions = new String[][] { { "0", "Check", "50.00" }, { "1", "svc.chrg.", "0.15" } };

    JDialog f = new JDialog();
    JTable table = new JTable(transactions, new String[] { "Id", "Type", "Amount" });

    f.add(new JLabel("List all transactions:", JLabel.CENTER), BorderLayout.NORTH);
    f.add(new JScrollPane(table));
    f.setTitle("Dialog Display");

    table.setPreferredSize(new Dimension(table.getPreferredSize().width, table.getRowHeight()
            * transactions.length));

    f.pack();
    f.setSize(470, 120);
    f.setLocationRelativeTo(null); // Center on screen
    f.setVisible(true);
    f.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T02:59:06.250

> 有什么你能想到的类似于这种风格的窗户吗？

您可能会尝试`setUndecorated(true)`，看到[这里](https://stackoverflow.com/a/2166500/230513)，并可能添加一个像素的边框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T19:58:07.377

从 JDialog 开始（如您所问）

看一下[JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)来格式化内容

看看[边框布局](http://docs.oracle.com/javase/7/docs/api/java/awt/BorderLayout.html)

# git - diff.tool 值太多

> ID：11992510
> 
> 赞同：0
> 
> 时间：2012-08-16T17:31:36.550
> 
> 标签：git

![在此处输入图像描述](../Images/72b19aff63038d98713f7369c1aa3f6a.png)

我正在尝试使用 git 作为我的差异工具（可能稍后合并）。我尝试过[Tim's Blog](http://cfmumbojumbo.com/cf/index.cfm/coding/git-using-a-different-comparison-tool/)和[Beyond Compare 网站上的教程](http://cfmumbojumbo.com/cf/index.cfm/coding/git-using-a-different-comparison-tool/)

现在我有太多的`diff.tool`变量副本。我删除了配置文件中的所有内容，`C:\Program Files (x86)\Git\etc\gitconfig`以及我所在的当前 git repo。

有没有办法删除所有变量？如果是这样，我在哪里可以找到它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:36:13.553

还有全局配置

```
~/.git/config 
```

然后每个回购

```
yourrepo/.git/config 
```

您可以使用 指定哪个配置`--local`，`--global`或者`--system`何时发出 config 命令。`--local`如果您没有明确指定范围，则暗示。

# mysql - 查询以查找同一表中的差异

> ID：11992522
> 
> 赞同：1
> 
> 时间：2012-08-16T17:32:17.607
> 
> 标签：mysql

因此，我遇到了从查询中获取正确数据的问题。

我有下表（人）：

```
Name  |       xpath        |   value
Derek |  /body/torso/arm   |   left
Derek |  /body/torso/arm   |   right
Derek |  /body/torso/neck  |   Head
Ron   |  /body/torso/neck  |   Head
Ron   |  /body/torso/arm   |   left 
```

所以基本上我试图得到的查询结果是显示差异（两个人之间缺少什么）。

```
results:
Name1 |       xpath1       |   value1   | Name2  |   xpath2         |   value2
Derek |  /body/torso/arm   |   right    | Ron    |    NULL          |   NULL 
```

我什至可以将以下内容取回

```
results:
Name1 |       xpath1       |   value1   | Name2  |   xpath2         |   value2
Derek |  /body/torso/arm   |   right    | Ron    |    NULL          |   NULL
Derek |  /body/torso/arm   |   left     | Ron    | /body/torso/arm  |   left  
Derek |  /body/torso/neck  |   Head     | Ron    | /body/torso/neck |   Head 
```

我使用的查询是：

```
SELECT P.Name , P.xpath, P.value, P1.Name, P2.xpath, P3.value
FROM Person as P
LEFT OUTER JOIN
    Person as P2 ON P.xpath = P2.xpath
WHERE
         P.Name = "Derek"
    AND  P2.Name = "Ron" 
```

无论我尝试什么，我不断得到的结果基本上是重叠的数据，但从来不是我真正想要的，似乎我错过了一些简单的东西或者只是做错了。有什么建议么？最终，我将在 SPROC 中运行它，但能够处理多个名称不仅仅是 2，而且如果我有，Derek、Ron、John、Dawn 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:36:20.370

试一试：

```
SELECT    a.Name  AS Name1,
          a.xpath AS xpath1,
          a.value AS value1,
          'Ron'   AS Name2,
          b.xpath AS xpath2,
          b.value AS value2
FROM      Person a
LEFT JOIN Person b ON b.Name = 'Ron'
                  AND a.xpath = b.xpath 
                  AND a.value = b.value
WHERE     a.Name = 'Derek' AND
          b.Name IS NULL 
```

* * *

[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/2f773/8)

* * *

如果您想将 Derek 与多个名称进行比较，您可以`CROSS JOIN`对所有名称进行比较（以便名称可以出现在结果集中），以及使用,`LEFT JOIN`的同一个表，以及在 中指定的名称：`xpath``value``CROSS JOIN`

```
SELECT     a.Name  AS Name1,
           a.xpath AS xpath1,
           a.value AS value1,
           b.Name  AS Name2,
           c.xpath AS xpath2,
           c.value AS value2
FROM       Person a
CROSS JOIN (
           SELECT 'Ron' AS Name UNION ALL
           SELECT 'John'        UNION ALL
           SELECT 'Charles'     UNION ALL
           SELECT 'Aaron'
           ) b
LEFT JOIN  Person c ON b.Name  = c.Name 
                   AND a.xpath = c.xpath
                   AND a.value = c.value
WHERE      a.Name = 'Derek' AND
           c.Name IS NULL 
```

* * *

[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/b1407/2)

* * *

如果您想在比较的左侧有多个名称（不仅仅是“Derek”），只需更改

```
a.Name = 'Derek' 
```

到

```
a.Name <> b.Name 
```

在上面的查询中。

* * *

[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/b1407/3)

* * *

**编辑**：只是为了更进一步：

将所有名称与所有名称进行比较：

```
SELECT     a.Name  AS Name1,
           a.xpath AS xpath1,
           a.value AS value1,
           b.Name  AS Name2,
           c.xpath AS xpath2,
           c.value AS value2
FROM       Person a
CROSS JOIN (SELECT DISTINCT Name FROM Person) b
LEFT JOIN  Person c ON b.Name  = c.Name 
                   AND a.xpath = c.xpath
                   AND a.value = c.value
WHERE      a.Name <> b.Name AND 
           c.Name IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:15:28.267

尝试使用 EXCEPT 联合：

```
WITH tbl (name, xpath, value) as
    (values
        ('Derek','/body/torso/arm','left'),
        ('Derek','/body/torso/arm','right'),
        ('Derek','/body/torso/neck','Head'),
        ('Ron','/body/torso/neck','Head'),
        ('Ron','/body/torso/arm','left')
    )
SELECT xpath, value 
FROM tbl 
WHERE name = 'Derek'
    EXCEPT
        SELECT xpath, value 
        FROM tbl 
        WHERE name = 'Ron' 
```

# windows - WinInet vs WinHttp（服务或类似服务的进程）

> ID：11992523
> 
> 赞同：9
> 
> 时间：2012-08-16T17:32:20.217
> 
> 标签：windows, visual-c++, wininet, winhttp

我无法理解“服务或类似服务的过程”这两个概念之间的区别。

在 msdn [WinHTTP vs. WinINet](http://msdn.microsoft.com/en-us/library/windows/desktop/hh227297%28v=vs.85%29.aspx)页面上说：

> 在两者之间进行选择时，您应该使用 WinINet，除非您计划在需要模拟和会话隔离的服务或类似服务的进程中运行。

在[WinInet 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384233%28v=vs.85%29.aspx)的 msdn 注释中说：

> 注意 WinINet 不支持服务器实现。此外，不应从服务中使用它。对于服务器实现或服务，请使用 Microsoft Windows HTTP 服务 (WinHTTP)。

“需要模拟和会话隔离的服务或类似服务的过程”是什么意思？
“WinINet 不支持服务器实现”是指在 Windows Server 上运行？
如果我的应用程序使用 IIS 运行，我是否必须使用 WinHTTP 而不是 WinInet？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T04:59:04.043

WinINet 专为面向人的应用程序而设计，在某些情况下，它会在用户屏幕上显示错误消息和连接弹出窗口。如果您从服务中使用它，或者没有人可以关闭弹出窗口，它将阻止您的应用程序。这就是为什么您不应该使用 WinINet，除非您确定用户坐在计算机前并等待关闭“设置连接”对话框或错误消息。

> 如果我的应用程序使用 IIS 运行，我是否必须使用 WinHTTP 而不是 WinInet？

两者都不。IIS 有自己的[HTTP 堆栈](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364510%28v=vs.85%29.aspx)，HTTP.sys 驱动程序在内核模式下运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-23T10:50:10.763

*如果我的应用程序使用 IIS 运行，我是否必须使用 WinHTTP 而不是 WinInet？*

如果您的应用程序是 ISAPI-DLL，则 DLL 在 IIS 的服务上下文中运行。因此，您应该使用 WinHTTP。

# ios - 在 iOS 版 Air 应用中邀请 facebook 好友

> ID：11992525
> 
> 赞同：3
> 
> 时间：2012-08-16T17:32:29.483
> 
> 标签：ios, facebook, actionscript-3, air

我目前正在开发适用于 iOS 的 Air 应用程序，我很难尝试制作“邀请朋友”按钮。我正在使用 facebook-actionscript-api 1.8.1 和 air 3.3，我的代码中有这样的内容：

```
invite_button.addEventListener(MouseEvent.CLICK, facebookInvite);

private function facebookInvite(e:MouseEvent):void
{
    var dat:Object = new Object();
    dat.message = 'I invite you to this awesome app!';
    dat.title   = 'Super Extra Max Facebook App';
    dat.filters = ['app_non_users'];

    Facebook.ui('apprequest', dat);
} 
```

按钮仅在用户登录时显示。

但是当我尝试点击按钮时出现调试错误：

```
ExternalInterface not available on the device. 
```

好吧，我想这句话的意思很明显——它试图使用 JS。

如何在应用程序内显示朋友选择对话框并发送邀请？我以为我可以编写一些 StageWebView 容器并在其中显示对话框，但没有其他一些可能更简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T00:01:37.463

好的，所以我终于在不久前的问题中的 API 页面上找到了这个线程：

[http://code.google.com/p/facebook-actionscript-api/issues/detail?id=365](http://code.google.com/p/facebook-actionscript-api/issues/detail?id=365)

第 5 条评论链接到我使用的东西。看来这正是我所需要的。下次我将使用原生组件...

# jquery - Coda slider hack - 使用 jQuery 动画和位置方法的标记移动

> ID：11992527
> 
> 赞同：2
> 
> 时间：2012-08-16T17:32:33.897
> 
> 标签：jquery, css, jquery-animate, coda-slider

使用[Coda Slider](http://kevinbatdorf.github.com/codaslider/)我试图让标记（CSS 三角形）在选择新选项卡时移动。这是我的目标：[设计](http://deeplogic.info/kashflow/design.png)，这是我迄今为止的工作：[WIP](http://deeplogic.info/kashflow/)。

目前箭头绘制在左侧导航面板的底部，但我需要它在选择时移动到选项卡的 x 坐标的中间。有任何想法吗？

我可以使用以下方法移动 chrome 控制台上的箭头：

```
var position = ($(".current").position().left)-($(".arrows").position().left);
$('.arrows')
.find('.arrow')
    .animate({left: '+=500'}, 2000)
.end()
.find('.arrow-border')
    .animate({left: '+=500'}, 2000)
.end(); 
```

但是每当我尝试使用位置作为变量来翻译它时，它就会停止工作。任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T02:03:28.193

我在“coda-slider.css”和“jquery.coda-slider-3.0.min.js”中做了一些改动

您不能从“coda-slider.css”更改样式，因为 JQuery 文件“jquery.coda-slider-3.0.min.js”中有样式

您可以下载[Coin Slider的源代码](http://www.4shared.com/zip/mQ5ixbu8/Slider.html)

# wordpress - wp_get_archives() 没有翻译成法语 wpml

> ID：11992528
> 
> 赞同：0
> 
> 时间：2012-08-16T17:32:36.923
> 
> 标签：wordpress, translation

我正在使用 wpml 来翻译我正在构建的 wordpress 网站。我创建了一个自定义主题，并正在使用 wp_get_archives() 在博客部分显示档案。当我切换到网站的法语端时，日期不会被翻译。wordpress 手头不会自动拥有自己的翻译文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:57:35.867

好的，我想通了。我已将自定义主题 .mo 文件放在主题语言文件夹和 Wordpress 语言文件夹中。我需要做的就是用 Wordpress 的 fr_FR.mo 替换 /wp-content/languages 中的 .mo。所以现在两个 .mo 文件都被包含了，所有的日期都被翻译了。

# sql - 返回存储过程的 SQL 性能

> ID：11992534
> 
> 赞同：0
> 
> 时间：2012-08-16T17:32:46.617
> 
> 标签：sql, performance, stored-procedures

我被问到以下问题，当您想提高存储过程的性能时，您会考虑什么？存储过程返回一些值，其中包含三个连接。除了确保连接写得好之外，还可以做些什么来使其性能更好？这是一个普遍的问题，没有提供任何代码。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:34:47.943

检查连接中使用的表的索引。特别是，连接中使用的列是否已编入索引？

例子 -

```
SELECT     *
FROM       SomeTable a
    JOIN   SomeOtherTable b on a.ItemId = b.ItemId 
```

如果这些表很大，那么`ItemId`在这两个表中建立索引通常会对性能有很大帮助。

`WHERE`如果您的查询有一个，您应该对子句中使用的任何列执行相同的操作。

```
WHERE  a.ProductId = @SomeVariableYouPassedToTheStoredProc 
```

`ProductId`在这种情况下，索引可能会有所帮助。

查询性能是您可能陷入困境的东西，但这是一个合乎逻辑（且快速）的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:42:18.737

它是一个存储过程的事实与它几乎没有关系。优化里面的sql。

至于如何，所有常见的嫌疑人，包括那种认为你可以猜出问题所在的eejit。

将 sql 从 proc 复制到合适的工具中，在其前面加上 Explain 以查看发生了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T18:36:49.113

我想还有其他选择。例如： 1\. 这些连接中的每一个都可以使用类似于“and permited_used_name = (select user_name from user_list where )”的限制条件。该值可以在过程启动期间派生一次（我的意思是过程的第一个字符串），以免许多类似查询使数据库过载。2\. 从Oracle11 开始，您可以将函数声明为具有缓存结果的函数（即函数计算一次，每次调用时都不会重新计算）定义一组更改无效缓存的表。

无论如何，问题主要是特定于数据库的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T19:21:07.113

对 SQL 语句运行查询分析器

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T22:35:15.480

您可以做很多事情来优化过程，但听起来您的 SQL 语句非常简单。需要注意的一些事项：

*   内联函数。这些可能会导致 SQL 逐行执行评估并减慢速度
*   连接语句的数据转换。这些可以防止使用索引。
*   确保在 where 子句中连接的列被索引（对于大型数据集）

您可以查看此网站以获取更多性能提示，但我认为我涵盖了您对简单语句所需的大部分内容：

[SQL 优化学校](http://www.sqloptimizationsschool.com)

# javascript - 使用 jquery 隐藏和显示具有相同按钮的菜单

> ID：11992535
> 
> 赞同：1
> 
> 时间：2012-08-16T17:32:54.367
> 
> 标签：javascript, jquery

我在一些使用 jquery 的下拉菜单上找到了教程。它工作正常，但我想稍微调整一下。我不想使用悬停来隐藏菜单，而是希望拥有显示菜单的相同按钮，以便在再次按下它时隐藏它。所以同一个按钮必须同时隐藏和显示下拉菜单。我使用的脚本：

```
 $(document).ready(function () {

        $("ul.subnav").parent().append("<span></span>"); //Only shows drop down trigger when js is enabled - Adds empty span tag after ul.subnav

        $("ul.topnav li span").click(function () { //When trigger is clicked...

            //Following events are applied to the subnav itself (moving subnav up and down)
            $(this).parent().find("ul.subnav").slideDown('fast').show(); //Drop down the subnav on click

            $(this).parent().hover(function () {
            }, function () {
                $(this).parent().find("ul.subnav").slideUp('slow'); //When the mouse hovers out of the subnav, move it back up
            });

            //Following events are applied to the trigger (Hover events for the trigger)
        }).hover(function () {
            $(this).addClass("subhover"); //On hover over, add class "subhover"
        }, function () {    //On Hover Out
            $(this).removeClass("subhover"); //On hover out, remove class "subhover"
        });

    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T17:40:22.243

使用 jQuery 的`.toggle()` [http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

```
$("#yourbutton").click(function() {
    $("#yourmenu").toggle();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:42:21.613

[**jQuery.toggle()**](http://api.jquery.com/toggle/)函数将为您完成这项工作：

```
$("#button").on('click', function() {
    $("#menu").toggle();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T17:46:08.513

是的，可以使用 toggleClass。或者您也可以在 javascript 中定义自己的切换功能。您可以在类之间切换或执行您想要的任何其他功能。

`function tog(elemen){ if(elemen.className == "show") { hide drpdwn elemen.className="hide"; } else { make dropdwn visible elemen.className="show"; } }`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T17:40:56.643

您可以使用 jQuery 的`.toggle`方法避免添加 CSS 规则。

```
$('#yourMenu').toggle() 
```

如果它是可见的，这将隐藏它，如果它是隐藏的，则显示它。您可以添加一个数字或`'fast', 'slow'`作为参数使其具有动画效果。

# ruby - Nokogiri 文本节点内容

> ID：11992540
> 
> 赞同：9
> 
> 时间：2012-08-16T17:33:06.610
> 
> 标签：ruby, nokogiri

有没有什么干净的方法可以用 Nokogiri 获取文本节点的内容？现在我正在使用

```
some_node.at_xpath( "//whatever" ).first.content 
```

这对于获取文本来说似乎真的很冗长。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-16T20:09:57.217

你*只*想要文字吗？

```
doc.search('//text()').map(&:text) 
```

也许你不想要所有的空白和噪音。如果您只想要包含单词字符的文本节点，

```
doc.search('//text()').map(&:text).delete_if{|x| x !~ /\w/} 
```

编辑：看来您只想要单个节点的文本内容：

```
some_node.at_xpath( "//whatever" ).text 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-16T19:10:55.533

只需寻找文本节点：

```
require 'nokogiri'

doc = Nokogiri::HTML(<<EOT)
<html>
<body>
<p>This is a text node </p>
<p> This is another text node</p>
</body>
</html>
EOT

doc.search('//text()').each do |t|
  t.replace(t.content.strip)
end

puts doc.to_html 
```

哪个输出：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<p>This is a text node</p>
<p>This is another text node</p>
</body></html> 
```

顺便说一句，您的代码示例不起作用。`at_xpath( "//whatever" ).first`是多余的并且会失败。`at_xpath`只会找到第一次出现，返回一个节点。`first`在这一点上是多余的，如果它可以工作，但它不会因为 Node 没有`first`方法。

* * *

> 我有`<data><foo>bar</foo></bar>`，我如何在不做的情况下获得“栏”文本`doc.xpath_at( "//data/foo" ).children.first.content`？

假设`doc`包含解析的 DOM：

```
doc.to_xml # => "<?xml version=\"1.0\"?>\n<data>\n  <foo>bar</foo>\n</data>\n" 
```

获取第一次出现：

```
doc.at('foo').text       # => "bar"
doc.at('//foo').text     # => "bar"
doc.at('/data/foo').text # => "bar" 
```

获取所有事件并取第一个：

```
doc.search('foo').first.text      # => "bar"
doc.search('//foo').first.text    # => "bar"
doc.search('data foo').first.text # => "bar" 
```

# rally - 使用 rally-api (ruby) 如何获得投资组合项目的状态值？

> ID：11992541
> 
> 赞同：0
> 
> 时间：2012-08-16T17:33:07.083
> 
> 标签：rally

使用 rally-api 我一直在尝试访问项目的投资组合看板状态值，例如。

features.each 做 |feature| puts feature.State # 也试过 feature.State.Name ... end

但这总是返回一个空字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:30:08.877

这看起来是即将到来的后端 WSAPI 更改。PI 状态将在 1.37 中通过 wsapi 变得可读，但是当您查询 Portfolio Items 时它们当前不会返回。当 wsapi 1.37 发布时，如果您将 :version => 1.37 传递给 rally_api 的配置，那么您应该能够在 fetch 字符串中获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T00:09:25.510

使用“feature.State.Name”可以轻松访问它。但是，在 Ruby 工具包中，这些字段都是小写的，Pascal 大小写的字段名称使用下划线(_) 来表示大小写。在这种情况下应该是：

```
put feature.state.name 
```

在更复杂的情况下（PlannedRemovalDate）：

```
put feature.planned_removal_date 
```

希望这可以帮助。

# mysql - CakePHP Model X 具有类别 A 或 B，其中 A 和 B 都有链接回 Model X 的表

> ID：11992543
> 
> 赞同：0
> 
> 时间：2012-08-16T17:33:18.007
> 
> 标签：mysql, cakephp, model

另一种说法是，我想`Fruit`根据它是否属于`Category[X or Y or Z]`

我很难说出我需要做什么，因此需要问，因为我还没有完全弄清楚如何寻找答案。

无论如何，我想做的是有一个像 的模型`Fruit`，它有几个信息字段，包括`category`. 问题是我需要`fruit_category_A`有不同的字段，`fruit_category_B`并且我需要能够通过模型访问这些字段的内容`Fruit`。

我确信有几种方法可以实现这种功能，但我就是不知道该采取什么路线。我曾想过可能`Fruit`与`FruitType`哪些相关，而每个又会与哪些相关，`FruitTypeA`但我不确定如何建立关联，这种结构似乎很笨重。 `FruitTypeB``Fruit`

顺便说一句，我使用 MySQL 作为 DB 和 CakePHP 2.2.1

# regex - 使用正则表达式验证密码

> ID：11992544
> 
> 赞同：18
> 
> 时间：2012-08-16T17:33:22.070
> 
> 标签：regex, ruby-on-rails-3, validation

我正在开发一个需要根据以下标准验证密码的 Rails 3 应用程序：`must be at least 6 characters and include one number and one letter.`

这是我的正则表达式：

```
validates :password, :format => {:with => /^[([a-z]|[A-Z])0-9_-]{6,40}$/, message: "must be at least 6 characters and include one number and one letter."} 
```

现在，如果我输入密码（例如：dogfood），它将通过。但我需要它做的是通过上述标准。

我不太擅长正则表达式，因此非常感谢任何和所有帮助！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-16T17:37:57.903

使用前瞻断言：

```
/^(?=.*[a-zA-Z])(?=.*[0-9]).{6,}$/
  |             |          |
  |             |          |
  |             |          Ensure there are at least 6 characters.
  |             |
  |             Look ahead for an arbitrary string followed by a number.
  |                        
  Look ahead for an arbitrary string followed by a letter. 
```

从技术上讲，在这种情况下，您不需要锚点，但使用它们是一个好习惯。

# asp-classic - 经典 ASP VBScript 返回 PC 名称问题

> ID：11992545
> 
> 赞同：0
> 
> 时间：2012-08-16T17:33:22.507
> 
> 标签：asp-classic, vbscript

编辑 - 最好问我是否需要将 VBScript 变量 NAME 中的值获取到 ASP 表单中，除了将其打印到屏幕之外，任何引用该变量的尝试都将被忽略。

这是在内部网上，仅供内部使用，并且 IE 在最低安全设置下使用，因此 activeX 无需提示即可运行。

我有一个 vbscript，它在运行时会返回我要查找的内容 - 客户端 PC 名称

```
<script language="vbscript"> 
<!--

    Set objNetwork = CreateObject("WScript.Network") 

    NAME= objNetwork.computername

    document.write(NAME)

//--> 

</script> 
```

当我运行以下命令时，我得到了服务器名称：

```
<% 
    Set objNetwork = CreateObject("WScript.Network") 

    strNAME = objNetwork.computername

    response.write("Value of strNAME variable: " & strNAME & "<br>")
%> 
```

我需要 VBScript 返回的实际 PC 名称，并且需要将其插入到表单中。使用 ASP 我可以填写表格，但它给了我服务器名称，我需要 VBScript PC 客户端名称。我无法弄清楚如何将 VBScript 名称放入 ASP 表单中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T07:06:15.147

您需要客户端 VBScript：

```
<script language="vbscript"> 
<!--

Function SetComputerName
    Set objNetwork = CreateObject("WScript.Network") 
    NAME=objNetwork.computername
    Document.Forms("form1").Elements("computername").Value = NAME
End Function

SetComputerName()

//--> 

</script> 
```

将表单名称或 ID 替换为“form1”，输入元素名称应包含计算机名称而不是“计算机名”。

该脚本仅在放置在 HTML 标记的末尾或至少在表单 HTML 之后才有效，如果您希望将其放置在上面，请将此类内容添加到您的 body 标记中：`<body onload="SetComputerName()">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:43:47.850

在代码块之外生成 HTML，如下所示。这是正确的语法，但通常客户端名称不会通过浏览器公开，除非您使用 IE 和某种 Active-X 控件。

```
<input type="hidden" value="<%=strNAME%>" /> 
```

# java - 访问端口 445 上的远程系统文件，使用 java 给定 IP 地址

> ID：11992552
> 
> 赞同：1
> 
> 时间：2012-08-16T17:34:05.853
> 
> 标签：java, sockets, port, .net

我正在开发一个 java 应用程序，它通过局域网扫描所有系统，并给出一个共享一些文件的系统列表，从而打开端口 445。我可以检查端口 445 是否打开，但是如果我知道目标系统的 IP 地址，我如何获取目标系统共享的文件或目录的列表。在这方面的任何帮助将不胜感激。

该程序类似于另一个程序“netscan”（Windows）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:42:12.207

[jCIFS](http://jcifs.samba.org/)是一个直接从 Java 访问 SMB 共享的库。[在此处](http://blog.bensmann.com/adding-jcifs-to-javaiofile-for-easy-access-to)阅读更详细的文档

# sharepoint-2010 - 调试 K2 工作流程 - 如何查看与错误条件相关的数据？

> ID：11992557
> 
> 赞同：0
> 
> 时间：2012-08-16T17:34:39.310
> 
> 标签：sharepoint-2010, claims-based-identity, k2

我有一个 K2 Blackpearl 工作流程。在工作流中，我使用从 SharePoint 列表中提取的电子邮件地址填充流程数据字段。将文本 - 连接函数与 SP 列表的 SmartObject 的 GetList 方法一起用于值和分号作为分隔符。

理论上，这应该为电子邮件事件的“收件人”行生成一个格式良好的字符串，其中包含多个地址。但是，我不断收到“指定的字符串不是电子邮件地址所需的格式”。在工作流应该尝试发送电子邮件的地方。

我尝试直接使用字符串“john.doe@company.com;jane.dove@company.com;abc.def@company.com”，并且尝试在活动目标的分号上拆分字符串放。在第一种情况下，有一个实例试图发送电子邮件。在第二种情况下，电子邮件被解析给用户，虽然我为“收件人”行选择了“ActivityInstanceDestUserEmail”，但我仍然收到错误消息。

我们将 K2 Blackpearl 4.6 与严格配置为声明身份验证的 SharePoint 2010 场一起使用。如果使用 K2SPS 提供商解析，我希望向其发送电子邮件的用户具有有效的电子邮件地址，但是当电子邮件被解析到目标插槽时，它们会被解析到 K2 提供商的帐户中。我猜这是我发送电子邮件的第二种方法的问题。但首先，将整个字符串放在“收件人”行中应该是直接的电子邮件地址 - 不需要解析给用户。

我究竟做错了什么？还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T21:44:05.557

标记为“K2SPS”的客户安全提供商的配置更改似乎已经解决了这个问题——至少目前是这样。

# c# - c# wcf继承[DataContract]

> ID：11992558
> 
> 赞同：0
> 
> 时间：2012-08-16T17:34:42.523
> 
> 标签：c#, wcf, automatic-properties

如果我这样定义我的类型：

```
public class UniqueNamedItem
{
    int Id {public get; protected set;}
    int Name {public get; protected set;}
}

[DataContract]
public class Product : UniqueNamedItem
{
    [DataMember]
    //lots of properties and members etc
} 
```

我是否需要将 [DataContract] 和 [DataMember] 属性添加到基类中才能在通信中使用这些属性和成员？还是因为派生类型是 DataContract 而自动添加的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:39:58.470

您需要添加它。另请注意，如果要直接返回基类，则需要将 KnownTypeAttribute 添加到指向子类的基类中。

# excel-2003 - 在构建季度日历时返回修改后的以下业务日期

> ID：11992562
> 
> 赞同：0
> 
> 时间：2012-08-16T17:34:55.257
> 
> 标签：excel-2003

试图建立一个工作日的季度日历（按节假日调整）。

我正在使用 =edate (A1,4)，唯一的问题是此功能不会针对工作日进行调整。理想情况下，我会使用 =workday(edate(A1,4),0,USD_Hols) 包装公式，但似乎我不能只为公式添加“0”以返回下一个工作日。

有谁知道如何获得下一个工作日，如果下一个工作日在下个月返回最近的前一个工作日？

谢谢帕科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:37:43.903

我认为这取决于您对评论的描述。我不太确定评论中的“以前”是什么意思。下面，我假设它表示 A1，如果 A1 是工作日，或者如果 A1 不是工作日，则表示 A1 之前的工作日：

```
=IF(MONTH(WORKDAY(A1,1,USD_Hols))=MONTH(A1),WORKDAY(A1,1,USD_Hols),WORKDAY(WORKDAY(A1,1,USD_Hols),0-1,USD_Hols)) 
```

我没有太多使用工作日功能。我注意到的一件事是，天数的 0 参数似乎返回 A1 中的日期，即使它不是工作日。这就是我在主 IF 的 ValueIfFalse 部分中包含嵌套 IF 的原因。它强制它到下一个工作日，然后是前一个工作日。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T21:18:33.833

您必须将工作表函数添加到 Workday to Excel 2010

这是对的：

```
Function NextBiz(d As Range, holidays As Range) As Date
    If WorksheetFunction.Weekday(d) = 7 Or WorksheetFunction.Weekday(d) = 1 Or WorksheetFunction.CountIf(holidays, d) > 0 Then
    NextBiz = WorksheetFunction.WorkDay(d, 1, holidays)
    Else: NextBiz = d
    End If
End Function 
```

# javascript - 通过浏览器的控制台向页面添加 javascript 时，如何模拟加载时触发的事件？

> ID：11992565
> 
> 赞同：1
> 
> 时间：2012-08-16T17:35:13.063
> 
> 标签：javascript, jquery, onload

我目前正在编写要放置在第 3 方站点上的脚本...为了对其进行测试，我正在打开第 3 方站点并在浏览器的控制台 (Chrome) 中运行脚本。我需要在 window.load() 上执行一些代码，但该代码并未使用这种测试方法执行。我假设这是因为加载事件发生后绑定到窗口的代码被绑定，因此永远不会被触发。我的问题有两个部分：

1.  实际上没有触发 window.load 的原因是因为它是在触发 load 事件后添加的吗？还是这是错误的，其他地方可能存在问题？

2.  当通过这样的控制台附加javascript时，如何最好地模拟加载时触发的事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:38:05.533

`if(document.readyState === "complete"){`将检测加载是否已经完成。

如果尚未完成加载，您可以轻松使用 else 然后放入 load 事件处理程序。类似于以下内容：

```
if(document.readyState === "complete"){
  // do stuff
}else{
  // attach load handler
} 
```

我喜欢做的是定义一个`pageLoaded`类型函数，我可以在以后使用我的代码运行它，这样我可以在页面已经加载时立即调用它，或者让加载处理程序在页面加载触发时调用它。就像是：

```
var pageLoaded = function(){alert("Page is ready!");}
if(document.readyState === "complete"){
  pageLoaded()
}else{
  // attach load handler, calls pageLoaded()
} 
```

当然，由于您将问题标记为 jQuery，您总是可以将所有代码包装在 jQuery 方便的花花公子就绪函数简写中：

```
$(function(){
  // do stuff
}); 
```

这会将您的匿名函数传递给 jQuery，如果与上述 vanilla javascript 不同，它将执行非常相似的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:46:31.267

在函数中定义您的事件，然后从控制台调用该函数。

```
function do_this_on_load() { alert("Loaded!") }

$(window).load(do_this_on_load); 
```

然后你可以从控制台运行：

```
do_this_on_load(); 
```

看看它在页面上做了什么。

# c++ - 可靠的本地网络组播

> ID：11992567
> 
> 赞同：4
> 
> 时间：2012-08-16T17:35:27.737
> 
> 标签：c++, network-programming, multicast, reliable-multicast

我正在使用 C++ 和 Qt 实现一个消息传递系统。经过深思熟虑，我确定多播或多播风格的技术最能解决我的问题。但是，我了解到 UDP 的不可靠性并认为它是不可接受的。

我的要求如下：

*   消息将以二进制序列化形式发送。
*   从网络上的任何给定节点，我必须能够向其他节点发送消息。
*   消息传递*必须*有保险。

我听说过 OpenPGM 和 NORM 作为 UDP 的替代品。如果有人有这两种经验，可以分享一下吗？

我也对自己在应用层实现“可靠”多播的可能性持开放态度，但如果有一个库已经实现了这一点，我不希望这样做。

我正在使用 C++ 和 Qt，因此 .NET 或基于 Java 的解决方案是不可接受的，除非它们是开源的并且我可以将它们移植到 C++。

非常感谢你。

**编辑 20120816T1853 MDT：**另一个问题：PGM 或 NORM 是否必须在硬件/IP 级别实施？或者它们可以覆盖在现有协议之上吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T07:34:49.090

我们已经在 UDP 上实现了自己的可靠多播协议，称为[RSP](http://www.equalizergraphics.com/documents/design/multicast.html)，因为我们需要跨平台的东西，而当时在 Linux 和 Windows 之间找不到好的解决方案。Windows PGM 实现断开离开发送窗口的慢速客户端，而我们的实现类似于 TCP 限制发送方。Afaik OpenPGM 可以配置为执行相同的操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T15:34:35.143

[http://cs.itd.nrl.navy.mil/work/norm](http://cs.itd.nrl.navy.mil/work/norm)上的开源 NORM可以构建为一个库，并具有带有 Python 和 Java 语言绑定的 C++ API。如果您通过邮件列表 ping 开发人员（我），我可以帮助您开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T23:48:58.200

有一个可靠的多播协议的大型 RFC*部门*，以及许多实现。很久没看这个了，但是有TRAM，LRMP，...

# php - 简单的 mod_rewrite 问题

> ID：11992571
> 
> 赞同：2
> 
> 时间：2012-08-16T17:35:41.180
> 
> 标签：php, .htaccess, mod-rewrite

我有一个非常奇怪的问题

我正在玩弄 .htaccess 并尝试将所有请求重定向到 /test/ 文件夹的索引文件。

我的站点位于本地 htdocs 文件夹中的文件夹 /test/ 中。当前不存在其他文件。

**我的期望：** 当我访问任何 url 时，（例如`/test/category/one/`）我应该被重定向到`/test/index.php`

**会发生什么** 我得到一个`404 Not Found`

我的 .htaccess 看起来像这样：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /test/index.php?__route=$1 [L,QSA] 
```

我试过设置`RewriteBase /test/`

这很简单，为什么它不起作用？

我在另一个文件夹中有一个 Wordpress 站点，并且可以完美地使用自定义重写。

我什至将 Wordpress 的 .htaccess 内容复制到了测试站点，用 /test/ 替换了重写基础和最后一条规则。

**Wordpress 的 .htaccess ：（**可在同一服务器上单独安装 WP）

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /test/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /test/index.php [L]
</IfModule>

# END WordPress 
```

我已经为此苦苦挣扎了一段时间，并且在没有帮助的情况下阅读了很多 SO 文章。

我什至写了一个重写日志文件，现在当我浏览到测试站点时什么都没有显示，但是访问 Wordpress 站点会写很多行。

我在 Win64 机器上运行 XAMPP。

任何帮助将不胜感激！=)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T18:50:03.730

**更新**：另外，请确保您的 .htaccess 文件中的行尾设置正确。Apache 有时会因不包含换行符 (\n) 字符的任何内容而窒息。

所以在我看来，你想（在某种程度上）模仿 WordPress 正在做的事情。以下是我在开发一些做同样事情的软件时处理这种情况的方法：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /test
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [L]
RewriteRule ^.*$ /index.php [L]
</IfModule> 
```

对于存在的文件（即通过`-f`或`-d`测试通过），我们将它们原封不动地提供。否则，我们将传入的请求重定向到 index.php。请注意，`/test`路径的一部分不包含在 RewriteRule 中，因为 RewriteBase 设置在我们开始的位置。所以，在你的例子中，我认为它最终会是：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /test
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [L]
RewriteRule ^(.*)$ /index.php?__route=$1 [L,QSA]
</IfModule> 
```

FWIW，我不是 .htaccess 专家。过去我只是发现这对我有用。

此外，如果您在共享主机（如 DreamHost）上，您可能需要设置适当的规则以允许默认错误文档。一些共享的网络主机为错误情况提供一个文件（failed_auth.html 就是一个例子）。如果您没有过滤掉这种情况，您最终可能会得到 404。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T19:13:26.533

这应该可以解决问题：

```
# Activate the rewrite module.
RewriteEngine On
# Ensure the requested URL is not a file.
RewriteCond %{REQUEST_FILENAME} !-f
# Ensure the requested URL is not a directory.
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php?__route=$1 [L,QSA] 
```

# c# - 访问嵌套类

> ID：11992572
> 
> 赞同：-4
> 
> 时间：2012-08-16T17:35:44.620
> 
> 标签：c#

> **可能重复：**
> [为什么我需要使用 C# 嵌套类](https://stackoverflow.com/questions/1083032/why-would-i-ever-need-to-use-c-sharp-nested-classes)

我做的很短，我有一个看起来像这样的课程：

```
namespace Blub {
    public class ClassTest {
        public void teest() {
            return "test";
        }

        public class AnotherTest {
            public void blub() {
                return "test";
            }
        }
    }
} 
```

我可以像这样访问名为“teest”的函数，但是如何在不执行另一个“new ClassTest.AnotherTest()”的情况下访问函数“blub”？

访问功能测试：

```
Blub.ClassTest = new Blub.ClassTest();
ClassTest.teest(); //test will be returned 
```

我的尝试（以及我希望它如何访问 AnotherTest 是这样的：

```
Blub.ClassTest = new Blub.ClassTest();
ClassTest.blub(); //test will be returned 
```

哪个不起作用，我可以像这样访问另一个测试，我不想要它：

```
Blub.ClassTest2 = new Blub.ClassTest.AnotherTest();
ClassTest.blub(); //test will be returned 
```

有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:39:35.433

你在`AnotherTest` **里面** `ClassTest`声明，这就是为什么你必须使用`namespace.class.2ndClass`.

但是，我想您不太了解 OO 概念，是吗？如果你在一个类中声明了一个方法，它只能用于该类的对象*，*除非你将它声明为`static`，这意味着它将是一个**类方法**而不是一个**实例方法**。

如果您想`ClassTest`拥有 2 个方法 (`teest`和`blub`)，只需在类的主体中声明这两个方法，例如：

```
public class ClassTest
{
    public string teest()
    {
        return "test";
    }

    public string blub()
    {
        return "test";
    }
} 
```

另外，请注意，如果一个方法被声明为`void`它不会返回任何东西（事实上，我认为您的原始代码甚至根本不会编译）。

我建议您在尝试自己解决问题之前更深入地研究 OO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:41:34.647

如果您需要访问另一个类，则必须将其设置为第一类中的属性。

```
namespace Blub {
   public class AnotherTest {
        public void blub() {
            return "test";
        }
    }

  public class ClassTest {
    public AnotherTest at = new AnotherTest();
    public void teest() {
        return "test";
    }

  }
} 
```

然后像这样访问它：

```
 ClassTest x = new ClassTest();
 x.at.blub(); 
```

# django - Django中的简单反向查询

> ID：11992575
> 
> 赞同：0
> 
> 时间：2012-08-16T17:35:57.257
> 
> 标签：django, django-models, django-database

我正在尝试获取存在某些特定帖子的国家/地区，以便我只能显示这些国家/地区。这样做。我有以下代码。

楷模：

```
class Country(models.Model):
    name=models.CharField(max_length=100)
    iso_code_2=models.CharField(max_length=4)
    iso_code_3=models.CharField(max_length=4)
    def __unicode__(self):
        return self.name
    def get_countries_with_jobs(self):
        countries=self.objects.filter(id__in=Post.country)
        return countries

class Category(models.Model):
    name=models.CharField(max_length=100)
    title=models.CharField(max_length=100)
    meta_keywords=models.CharField(max_length=100)
    meta_description=models.CharField(max_length=100)
    sort_order=models.IntegerField()
    def __unicode__(self):
        return self.name

class City(models.Model):
    name=models.CharField(max_length=100)
    title=models.CharField(max_length=100)
    meta_keywords=models.CharField(max_length=100)
    meta_description=models.CharField(max_length=100)
    sort_order=models.IntegerField()
    country=models.ForeignKey(Country)
    def __unicode__(self):
        return self.title

class Post(models.Model):
    user=models.ForeignKey(User)
    title=models.CharField(max_length=100)
    publish_date=models.DateField()
    active=models.BooleanField()
    country=models.ForeignKey(Country)
    city=ChainedForeignKey(City,chained_field="country",chained_model_field="country" )
    category=models.ForeignKey(Category)
    description=models.TextField()
    added_by=models.CharField(max_length=70)
    def __unicode__(self):
        return self.title 
```

这里 get_countries_with_jobs 方法的代码试图查询和获取帖子所在的国家/地区。通常某个帖子的一个访问国家/地区，但在这种情况下，我需要获取存在帖子的国家/地区。这里调用此方法时出错，因此我尝试在视图方法中编写此代码，如下所示。

```
def list(request,template_name='list_posts.html'):
     countries=Country.objects.filter(id__in=Posts.country)
     return render_to_response(template_name,locals(),context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:52:58.440

你的问题很难理解，所以我会看几个解释：

1.  您想获取特定帖子的国家/地区：

    ```
    countries = Country.objects.filter(post=post_instance) 
    ```

2.  你想得到所有有帖子的国家：

    ```
    countries = Country.objects.filter(post__isnull=False) 
    ```

    同样，如果您想获取*没有*与之关联的帖子的国家/地区：

    ```
    countries = Country.objects.filter(post__isnull=True) 
    ```

# java - 我们需要运行多少次 Java 程序来预热 JVM？

> ID：11992580
> 
> 赞同：7
> 
> 时间：2012-08-16T17:36:18.733
> 
> 标签：java, jvm, startup, measurement, warm-up

假设我有一个 Java 程序`Test.class`。我想测量它的执行时间。我写了一个包装器来做到这一点，如下所示：

```
class RunTest {

    public static void main(String[] args) {

        long sum = 0;
        int iterations = 20;
        int warmupNum = 10;

        for(int i=0; i<iterations; i++){

            long start = System.nanoTime();
            Test.main(args);
            long end = System.nanoTime();

            if( i > warmupNum )
              sum += end - start;
        }

       System.out.println("ave: "+sum/(iterations-warmupNum));
    }
} 
```

这里怎么选`warmupNum`，越大越好？多大才够？这是衡量 Java 程序性能的“标准/通用”方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T17:41:06.800

使用[Caliper](http://code.google.com/p/caliper/)比创建自己的微基准工具要好。

[如何在 Java 中编写正确的微基准测试？](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java/4480774#4480774)

# nsstring - 返回带括号的字符串

> ID：11992583
> 
> 赞同：0
> 
> 时间：2012-08-16T17:36:23.240
> 
> 标签：nsstring

我有一个成功返回 NSString * 的方法。

我想让返回的字符串用括号括起来。

IE。目前该方法返回类似@“myString”的东西，我想要

@“（我的字符串）”。如何在开头贴一个支架，在结尾贴另一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:42:07.753

[stringWithFormat](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/clm/NSString/stringWithFormat:)应该这样做；

```
NSString* result = [NSString stringWithFormat:@"(%@)", myString]; 
```

# asp.net - 带变量的 ASP.NET 会话管理

> ID：11992586
> 
> 赞同：0
> 
> 时间：2012-08-16T17:36:40.260
> 
> 标签：asp.net

遇到了一个愚蠢的问题...

所以现在我实现 Application_Start 来加载哈希表，效果很好。接下来在 Session_Start 中，我解析用户的 cookie 以检索他的姓名，这又一次可以正常工作。当我将他的用户名存储在 Global.asax.cs 的变量中时，就会出现问题。我并没有真正意识到这是所有进程/线程之间共享的变量。所以我想我的问题是你如何一次解析用户的cookie，然后将数据保存在进程/线程的其他地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:41:12.023

您可以在会话中存储 cookie 并在以后使用它。您可以将任何对象存储在会话集合中，并在其过期之前检索它。[你可以在这里](http://msdn.microsoft.com/en-us/library/ms972429.aspx)阅读更多

分配给会话

```
Session["anyName"] = "value"; 
```

从会话对象中检索

```
string str = Session["anyName"].ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:38:36.940

这正是 ASP.NET 会话的意义所在。将这些信息存储在那里。它将仅特定于当前用户，而不是在所有用户之间共享。

顺便说一句，您可能还想检查[ASP.NET 中的表单身份验证](http://msdn.microsoft.com/en-us/library/ff647070.aspx)，只是为了确保您不会重新发明一些轮子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T17:40:10.387

你不能只使用会话吗？

```
Session["username"] = username;

var username = Session["username"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T17:41:02.063

会话绝对是我会去的方式。在 Session 中拥有大量数据可能会导致性能问题，但只为每个用户存储小字符串根本不重要。

# android - 无法实例化服务 .GCMIntentService

> ID：11992587
> 
> 赞同：0
> 
> 时间：2012-08-16T17:36:40.230
> 
> 标签：android, google-cloud-messaging

> **可能重复：**
> [Android RuntimeException：无法实例化服务](https://stackoverflow.com/questions/5027147/android-runtimeexception-unable-to-instantiate-the-service)

我正在尝试运行此 GCMIntentService 代码，但我不断收到`Unable to instantiate service`. 这是我的 GCMIntentService 代码：

```
package com.e;

import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences.Editor;
import android.util.Log;

import com.google.android.gcm.GCMBaseIntentService;

public class GCMIntentService extends GCMBaseIntentService {
  public static String TAG = "GCMIntentService";
  private static String KEY = "c2dmPref";
  private static String REGISTRATION_KEY = "registrationKey";

  public GCMIntentService(String senderId) {
    super(senderId);
    Log.d("GCMIntentService", senderId);
  }

  @Override
  public void onRegistered(Context context, String regId){
    Log.e("registration :","registration :"+regId);

    if (regId != null) {
        Log.d("c2dm", regId);
        Editor editor = context.getSharedPreferences(KEY, Context.MODE_PRIVATE).edit();
        editor.putString(REGISTRATION_KEY, regId);
        editor.commit();
    }
  }

  @Override
  public void onMessage(Context context, Intent intent){
     String message = intent.getExtras().getString("payload");
     //String key = intent.getExtras().getString("collapse_key");
     Log.e("","message : " +message);    
          Intent startActivity = new Intent(); 
            startActivity.setClass(context, NotificationService.class); 
            startActivity.setAction(NotificationService.class.getName()); 
            startActivity.setFlags( 
                    Intent.FLAG_ACTIVITY_NEW_TASK 
                    | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);      
            startActivity.putExtra("Title", "New Message");
            startActivity.putExtra("Message", message);
            context.startActivity(startActivity); 
  }

  @Override
  protected void onError(Context arg0, String arg1) {
    Log.d("onError", arg1);
  }

  @Override
  protected boolean onRecoverableError(Context context, String errorId){
    Log.d("onRecoverableError", errorId);
    return false;
  }

  @Override
  protected void onUnregistered(Context arg0, String arg1) {
    // TODO Auto-generated method stub
     Log.d("onUnregistered", arg1);
  }

} 
```

这是我的清单

```
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
 package="com.e"
 android:versionCode="1"
 android:versionName="1.0" >       

<application android:icon="@drawable/mainlogo" android:label="@string/app_name">                
    <activity android:name=".SplashScreen" android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".HomeScreen"></activity>
    <activity android:name=".TabController" android:windowSoftInputMode="adjustPan"></activity>
    <activity android:name=".Help" android:windowSoftInputMode="adjustPan"></activity>
    <activity android:name=".Services"></activity>
    <activity android:name=".About"></activity>
    <activity android:name=".Inbox"></activity>
    <activity android:name=".More"></activity>
    <activity android:name=".Disclaimer"></activity>
    <activity android:name=".Legal"></activity>
    <activity android:name=".PrivacyPolicy"></activity>
    <activity android:name=".Settings"></activity>
    <activity android:name=".TermsOfUse"></activity>
    <activity android:name=".WebPage"></activity>
    <activity android:name=".DetailView"></activity>
    <service android:name=".NotificationService"></service>
    <service android:name=".GCMIntentService"/>     

    <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="com.e" />
        </intent-filter>
    </receiver> 
</application>

<permission android:name="com.e.permission.C2D_MESSAGE" android:protectionLevel="signature" />
<uses-permission android:name="com.e.permission.C2D_MESSAGE" /> 

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.CALL_PHONE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<uses-permission android:name="android.permission.WAKE_LOCK" />

<uses-sdk android:minSdkVersion="10" />
</manifest> 
```

**日志猫**

```
 08-16 16:18:29.026: E/AndroidRuntime(651): FATAL EXCEPTION: main
 08-16 16:18:29.026: E/AndroidRuntime(651): java.lang.RuntimeException: Unable to instantiate service com.e.GCMIntentService: java.lang.InstantiationException: com.e.GCMIntentService
 08-16 16:18:29.026: E/AndroidRuntime(651):     at android.app.ActivityThread.handleCreateService(ActivityThread.java:1929)
 08-16 16:18:29.026: E/AndroidRuntime(651):     at android.app.ActivityThread.access$2500(ActivityThread.java:117)
 08-16 16:18:29.026: E/AndroidRuntime(651):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:985)
08-16 16:18:29.026: E/AndroidRuntime(651):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-16 16:18:29.026: E/AndroidRuntime(651):  at android.os.Looper.loop(Looper.java:130)
08-16 16:18:29.026: E/AndroidRuntime(651):  at android.app.ActivityThread.main(ActivityThread.java:3683)
08-16 16:18:29.026: E/AndroidRuntime(651):  at java.lang.reflect.Method.invokeNative(Native Method)
08-16 16:18:29.026: E/AndroidRuntime(651):  at java.lang.reflect.Method.invoke(Method.java:507)
08-16 16:18:29.026: E/AndroidRuntime(651):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-16 16:18:29.026: E/AndroidRuntime(651):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-16 16:18:29.026: E/AndroidRuntime(651):  at dalvik.system.NativeStart.main(Native Method)
08-16 16:18:29.026: E/AndroidRuntime(651): Caused by: java.lang.InstantiationException: com.e.GCMIntentService
08-16 16:18:29.026: E/AndroidRuntime(651):  at java.lang.Class.newInstanceImpl(Native Method)
08-16 16:18:29.026: E/AndroidRuntime(651):  at java.lang.Class.newInstance(Class.java:1409)
08-16 16:18:29.026: E/AndroidRuntime(651):  at android.app.ActivityThread.handleCreateService(ActivityThread.java:1926)
08-16 16:18:29.026: E/AndroidRuntime(651):  ... 10 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T17:43:12.087

`Unable to instantiate service``Exception`被构造函数中抛出的一些调用。通常有一个堆栈跟踪伴随这个（你应该包括在内），但你不应该使用带`String`参数的构造函数。

您必须自己定义此发件人 ID：

```
private final static String senderID = "11111111111"; // Your ID here

public GCMIntentService(){
    super(senderID);
    Logd.i(LOG_TAG, "GCM passed");
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T18:01:04.097

您的服务必须实现一个零参数的公共构造函数。我建议您根本没有构造函数——大多数服务的典型方法。例如，这里是一个`GCMIntentService`：

```
public class GCMIntentService extends GCMBaseIntentService {
  @Override
  protected void onRegistered(Context ctxt, String regId) {
    Log.d(getClass().getSimpleName(), "onRegistered: " + regId);
    Toast.makeText(this, regId, Toast.LENGTH_LONG).show();
  }

  @Override
  protected void onUnregistered(Context ctxt, String regId) {
    Log.d(getClass().getSimpleName(), "onUnregistered: " + regId);
  }

  @Override
  protected void onMessage(Context ctxt, Intent message) {
    Bundle extras=message.getExtras();

    for (String key : extras.keySet()) {
      Log.d(getClass().getSimpleName(),
            String.format("onMessage: %s=%s", key,
                          extras.getString(key)));
    }
  }

  @Override
  protected void onError(Context ctxt, String errorMsg) {
    Log.d(getClass().getSimpleName(), "onError: " + errorMsg);
  }

  @Override
  protected boolean onRecoverableError(Context ctxt, String errorMsg) {
    Log.d(getClass().getSimpleName(), "onRecoverableError: " + errorMsg);

    return(true);
  }
} 
```

（[此示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/Push/GCMClient)的源代码）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T20:01:45.137

实际上这是通过 SDK 管理器分发的 gcm.jar 文件的问题。谷歌修复了这个错误，但它尚未成为最终用户的方式。

详情在这里： http: [//gngrwzrd.com/blog/2012/10/30/Android%20GCM%20Error.html](http://gngrwzrd.com/blog/2012/10/30/Android%20GCM%20Error.html)

# r - stat_bin 恢复为默认值

> ID：11992588
> 
> 赞同：2
> 
> 时间：2012-08-16T17:36:42.147
> 
> 标签：r, ggplot2, histogram

我很难让我的直方图绘制正确数量的垃圾箱。我希望每个 bin 的值都是 1-5、5-10、10-15 等，但是当我使用 stat_bin 时，它会恢复为 range/30 默认值。

```
ggplot(tmp,aes(x = values)) + 
+     facet_wrap(~ind) +
+     geom_histogram(aes(y=..count../sum(..count..)),stat="bin")+
+     scale_x_continuous("Percent above 30x")+
+     scale_y_continuous("Fraction of panel")+
+     opts(title = yz)+
+     stat_bin(bandwidth=5.0)
stat_bin: binwidth defaulted to range/30\. Use 'binwidth = x' to adjust this. 
```

我在想这可能是我在阅读时没有完全掌握的一些愚蠢的语法。我希望有人能告诉我为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:50:06.157

OP 发布了这个解决方案：将`binwidth=5`参数添加到`geom`.

```
ggplot(tmp,aes(x = values)) +
    facet_wrap(~ind) +
    geom_histogram(aes(y=..count../sum(..count..)), binwidth=5)+
    scale_x_continuous("Percent above 30x")+
    scale_y_continuous("Fraction of panel")+
    opts(title = yz) 
```

# ruby-on-rails - 将默认角色添加到设计用户模型

> ID：11992590
> 
> 赞同：3
> 
> 时间：2012-08-16T17:37:10.690
> 
> 标签：ruby-on-rails, ruby, devise, roles, cancan

在尝试将基于角色的身份验证（使用 CanCan 和 Devise）添加到我的项目时，我发现有两种方法可以保存角色：第一种是“Has and Belongs_to”方式，第二种只是在新字段中保存角色用户表。

所以，问题是，如何以第一种方式定义默认用户角色，我应该选择哪种方式在第二种方式中定义默认角色（在迁移中设置默认角色或编辑 Devise 的用户控制器？）

另外，我应该使用这种方法还是使用 gem 更好？

PS 我已经阅读了 Tony Amoyal 的教程，但没有找到答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T02:50:28.470

如果我正确理解了这个问题，这对我有用：[Ruby on rails, cancan and default role assignment](https://stackoverflow.com/questions/6052504/ruby-on-rails-cancan-and-default-role-assignment)

只需将以下内容添加到 /models/user.rb 以在注册时分配默认角色：

```
after_create :default_role

  private
  def default_role
    self.roles << Role.where(:name => 'User').first
  end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T18:04:00.443

Rails AntiPatterns 书中描述的这种情况：[http ://railsantipatterns.com/](http://railsantipatterns.com/)

简短的回答是：使用`users`表中的字段，使用迁移设置默认角色。这种方式要简单得多。您不应该仅仅因为它可能更好地满足您未来的需求而使用复杂的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-17T01:57:47.820

您可以在 user.rb 中执行以下操作：

```
after_initialize :set_default_role

private

def set_default_role
  self.role ||= :user
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T09:29:57.617

可以使用这个 gem 实现一个非常简单的用户角色解决方案：[https ://github.com/platform45/easy_roles](https://github.com/platform45/easy_roles)

# regex - 崇高文本中的正则表达式：匹配任何字符，包括换行符？

> ID：11992596
> 
> 赞同：95
> 
> 时间：2012-08-16T17:37:28.703
> 
> 标签：regex, sublimetext2

有没有办法匹配 Sublime Text 中的任何字符，包括换行符？我看到 Sublime 使用 Boost 的语法，但是如果`.`没有设置特定的标志，该字符将不匹配换行符。

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2012-08-16T17:46:35.460

尝试添加`(?s)`内联标志开始模式的开始。这将使`.`匹配*任何*字符。

# jsf - 如何使 a4j:commandLink 执行动作并显示模态面板？

> ID：11992597
> 
> 赞同：3
> 
> 时间：2012-08-16T17:37:31.170
> 
> 标签：jsf, richfaces, jsf-1.2, jboss-4.2.x, richfaces-modal

Jsf 1.2，Richfaces 3.3.3，

我得到以下代码来显示richfaces：modalpanel：

```
<ui:repeat id="albums" var="listvalue" 
    value="#{MyBean.getImagelist()}">
    <a4j:commandLink id="link" reRender="panel">
        <h:graphicImage id="image" url="My_image.jpg"/>
        <rich:componentControl for="panel" attachTo="link" operation="show"
            event="onclick"/>
    </a4j:commandLink>
</ui:repeat> 
```

它可以工作并显示模态面板，但我无法做到的是调用 MyBean 上的方法，我该怎么做？

更新 1

我忘了提到我需要通过`<f:param>`那个动作

更新 2

根据要求，这是我拥有的确切代码：

```
<ui:repeat id="al11" var="albumslistvalue1" 
value="#{AlbumDetailBean.getAlbumImagesList()}">
  <a4j:commandLink id="link" action="#{AlbumDetailBean.mudaIdatual()}" 
    reRender="panel"
    oncomplete="javascript:Richfaces.showModalPanel('panel');" >
    <a4j:actionparam name="idfotoatual" value="#{albumslistvalue1.id}" />
    <h:graphicImage id="image" 
    url="#{albumslistvalue1.albumimagename}"/>
   </a4j:commandLink>
</ui:repeat> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:55:09.370

我想您想要称为 onclicking 链接的操作。我是这样，请尝试以下操作：

```
<a4j:commandLink id="link" action="#{myBean.myAction}" reRender="panel"
    oncomplete="Richfaces.showModalPanel('panel');">
      <a4j:actionparam assignTo="#{yourParam}" value="#{yourParamValue}"/>
    <h:graphicImage id="image" url="My_image.jpg"/>
</a4j:commandLink> 
```

更新：按要求添加参数。

# android - 如何为 Android 项目使用代码自动化？

> ID：11992610
> 
> 赞同：2
> 
> 时间：2012-08-16T17:38:15.857
> 
> 标签：android, maven, build-automation

我对构建自动化的想法非常陌生，不确定它是否对我有帮助。老实说，我不确定它的作用或它的好处。我一直在查找有关 Maven 的大量信息，但在将它们拼凑在一起时遇到了一些麻烦。

现在我开发了很多类似的 Android 应用程序。这些应用程序中的大多数都具有类似的功能基础，我将它们从一个应用程序复制到下一个应用程序。但是，当我对该“主要功能”的一部分进行更改时，我需要返回并将更改应用到其他应用程序。显然，这是非常低效的。我开始做的是将主要功能设置为一个库，然后由每个应用程序导入。到现在为止还挺好。

所以除了我正在使用的库方法之外，Maven 会有帮助吗？还有什么我还没有看到的更有帮助的东西吗？对不起，非常基本的问题，感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:53:32.663

Maven 不会帮助您生成代码，它只会帮助您自动化构建过程。

您可以在 Eclipse 中使用 Maven 插件为 android [Android SDK Full Javdocs 和 Maven 配置您的 Eclipse](https://stackoverflow.com/questions/10522707/android-sdk-full-javdocs-with-maven-in-eclipse)

到目前为止，我还没有将 Maven 用于 android 项目，因为目前我正在为此使用 Ant。您将在 android SDK 的示例中找到示例 maven 和 ant 文件

关于代码生成：

我读过[Acceleo](http://www.acceleo.org/pages/home/en)提供了对基于 android 的 UML 代码生成的支持。

# shopify - 如何编辑 Shopify 网络挂钩？

> ID：11992613
> 
> 赞同：2
> 
> 时间：2012-08-16T17:38:28.813
> 
> 标签：shopify, webhooks

我需要以我希望它自己的方式解析 Shopify Web Hook，我希望它只向 HTTP POST 发送从 Web Hook 的发送顺序中获取的几行信息。

我与需要我发送给他们的订单信息的第三方合作，这些第三方必须以一种或另一种方式适应网络挂钩，但截至目前，网络挂钩看起来相当有限。有什么方法可以通过 Shopify API 编辑网络钩子的内容？？？

我想使用 Web Hooks，但能够将它用作常规的 HTTP POST 机制，我可以在其中准确地选择我将发送到我设置的链接以将信息发送到的链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T00:53:18.860

它是这样工作的。

Shopify 通过 Webhook 向您发送订单。这不是复杂的计算。他们只是继续将完整的订单发送到您的 URL 端点，直到您返回 200 OK 状态，或者他们只是放弃了您。

现在你有了整个订单，你解析它，只取出你想要的笔记内容，现在你可以使用你的计算引擎通过 HTTP POST 将你珍贵的笔记内容发送给你最喜欢的人......无论是一些 PHP， Python、Ruby、Java 或 .Net 混合物。

Shopify ==（订单）==> 您的应用程序（您处理）===> 做您想做的事...

# url - mod_rewrite 不会更改文档中的 LESS 文件位置，但是会更改直接 URL

> ID：11992618
> 
> 赞同：2
> 
> 时间：2012-08-16T17:38:43.553
> 
> 标签：url, mod-rewrite, less

我正在尝试通过 mod_rewrite 将 LESS 文件传递​​给 PHP 编译器 - 当请求 LESS 文件时，该文件应重定向到 PHP 脚本，传递它的路径/名称，以便可以吐出 CSS 文件。

HTML：

```
<link rel="stylesheet/less" type="text/css" href="styles/main.less" />
<link rel="stylesheet" type="text/css" href="styles/main.less.css" /> 
```

.ht 访问：

```
RewriteEngine On
RewriteBase /v2/
RewriteRule ^([^.]*\.less)$ compilers/lessphp.php?file=$1 [R,L,NC] 
```

一开始，只有一个 .less 文件。

刷新 'http://mydomain.com/v2/' 将导致无样式的内容。/styles/ 中没有创建 .css 文件。

如果我去 'http://mydomain.com/v2/styles/main.less' 我将被重定向到我的 PHP 编译器 'http://mydomain.com/v2/compilers/lessphp.php?file=styles /main.less' 和 'main.less.css' 是在 /styles/ 中创建的。回到“http://mydomain.com/v2/”，我现在已经设置了样式内容。

重写只发生在浏览器的 URL 栏中，而不是站点的页面。

我究竟做错了什么？

编辑：还有更好的方法来做我想做的事情吗？

编辑2：

/v2/

--index.php

--.htaccess

--/样式/

----main.less

----main.less.css

--/编译器/

----lessphp.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:48:00.670

现在发生的情况是您的浏览器在编译完成之前请求第二个链接，并且您的 Web 服务器返回 404，因为该`*.less.css`文件尚不存在。

更好的方法是让您的 PHP 脚本输出编译结果（例如实际的 CSS）作为响应。它是否也生成`*.less.css`文件无关紧要，尽管您可能确实希望缓存 CSS 输出，因此不会在每个请求上编译 LESS。

换句话说：

*   `<link rel="stylesheet/less" type="text/css" href="styles/main.less" />`通过 mod_rewrite 重定向到`compilers/lessphp.php?file=styles/mail.less`
*   上面的脚本返回实际编译的 CSS 作为 HTTP 响应
*   第二个`<link>`根本不再需要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T23:25:23.567

好的，想通了这个问题。真的很简单。

玩弄更改扩展名之类的东西，试图弄清楚为什么图像会自由更改，但 CSS 不是，当我突然想到它可能与文件类型或其他什么无关时。这是我注意到以下内容的时候

```
<link rel="stylesheet/less" type="text/css" href="styles/main.less" /> 
```

`rel="stylesheet/less"`是这里的罪魁祸首，被 less.js 用于客户端渲染。简单地替换`rel="stylesheet"`为普通的 CSS 文档，Everything。只是。工作。

* * *

编辑：我已经写了一个运行，让 Lessphp 在[这里正常工作](https://stackoverflow.com/q/12274628/1455709)

# sql - 来自高度事务表的并发读取

> ID：11992624
> 
> 赞同：1
> 
> 时间：2012-08-16T17:39:04.197
> 
> 标签：sql, sql-server-2005, oltp

目前，我有一个高度事务性的数据库，每天大约有 100,000 次插入。如果我开始允许从我的主事务表中进行大量并发读取，我是否需要担心？我不关心并发性，更关心性能。

目前这张表有110+万笔交易，我用的是SQL 2005

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:57:05.670

2002 年，具有 2 GB RAM 和 1.3 GHz CPU 的戴尔服务器作为文件服务器、数据库服务器和[ICR](http://en.wikipedia.org/wiki/Intelligent_character_recognition "ICR")服务器（非常占用 CPU）为 25 个并发用户提供服务。用户和 ICR 服务器不断地插入、读取和更新一个包含 80+ 百万条记录的数据表，其中每个操作需要 25 到 50 条插入或更新语句。近一年来，它就像一个 24/7 的魅力。如果您使用体面的索引，并且您的选择使用这些索引，它将起作用。

正如@huadianz 建议的那样，只读副本会做得更好。

# qt - qt，在某个点绘制像素图的中心，而不是在某个点绘制像素图的左上角

> ID：11992626
> 
> 赞同：0
> 
> 时间：2012-08-16T17:39:21.807
> 
> 标签：qt, user-interface, draw, qgraphicsitem, pixmap

正如标题所说，我正在将像素图绘制到特定位置的场景上。QT 通过将像素图的左上角放置在我指定的点来绘制像素图。但是，我希望将像素图的中心放置在这一点上。（像素图是十字准线）。有谁知道如何做到这一点？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:02:58.307

将指定点平移像素图宽度的一半到左侧，将像素图高度的一半平移到顶部，然后将像素图绘制到该点。只是一些数学。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T02:04:40.977

`void QPainter::translate ( const QPointF & offset )`

通过给定的偏移量平移坐标系；即给定的偏移量被添加到点。

```
painter.translate(specific_location);
painter.drawPixmap(-pixmap.rect().center(), pixmap); 
```

# c# - 使用 Slider 值更改 Button 的内容

> ID：11992627
> 
> 赞同：0
> 
> 时间：2012-08-16T17:39:24.160
> 
> 标签：c#, wpf, button, slider

当滑块的值发生变化时，我有一系列我希望以特定顺序逐个显示的路径作为按钮的内容。滑块的值应确定显示哪个路径。

我已经在资源字典中定义了我的路径，并且按钮和滑块也都分配了样式。

我对 xml 和 WPF 比较陌生，如果这是一个愚蠢的问题，我很抱歉，但我已经搜索了一个多小时，我相信我需要某种绑定或触发器，但我找不到我想要的正在寻找。请帮忙！:)

编辑：我相信我正在寻找 DataTemplate 或 DataTrigger，但我需要一些指导来了解如何在我的情况下实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:10:02.920

像这样：

```
<Grid>
  <Grid.Resources>
    <col:ArrayList x:Key="al">
      <Path Data="M 10,100 C 10,300 300,-200 300,100" Fill="Black"/>
      <Path Data="M 0,0 L 100,300"  Fill="Black" Stroke="Black"/>
    </col:ArrayList>
  </Grid.Resources>
  <StackPanel>
    <Button Content="{Binding SelectedItem, ElementName=lb}"/>
    <ListBox Name="lb" ItemsSource="{StaticResource al}" SelectedIndex="{Binding Value, ElementName=sl}" Visibility="Collapsed">
      <ListBox.ItemTemplate>
        <DataTemplate/>
      </ListBox.ItemTemplate>
    </ListBox>
    <Slider Minimum="0" Maximum="1" Name="sl" SmallChange="1" IsSnapToTickEnabled="true" />
  </StackPanel> 
</Grid> 
```

col 命名空间为：`xmlns:col="clr-namespace:System.Collections;assembly=mscorlib"`

# c# - 使向导导航不那么线性的简单算法

> ID：11992633
> 
> 赞同：1
> 
> 时间：2012-08-16T17:39:59.350
> 
> 标签：c#, algorithm, logic

这应该是一个简单的逻辑问题，但出于某种原因，我已经为此苦苦挣扎了好几个小时，试图提出一个半干净的算法来实现它。我正在使用具有 SQL Server 背景的 MVC3，但即使您不了解 MVC，您仍然可以在算法方面帮助我。

我正在编写一个使用类似向导的界面的应用程序。目前，这些向导屏幕之间的导航是非常线性的（下一个按钮会立即进入页面，上一个按钮会立即进入之前的页面）。由于范围变化（我知道很有趣），我现在被告知要减少线性度。

对于第一次运行，用户必须按线性顺序访问所有页面，如下所示：

```
Step 1
Step 2
Step 3
    SubStep 1
        Sub-SubStep 1
        Sub-SubStep 2
    SubStep 2
        Sub-SubStep 1
        Sub-SubStep 2
    ...
    SubStep *n*
        Sub-SubStep 1
        Sub-SubStep 2
Submission 
```

其中*n*是基于在步骤 2 中输入的内容的变量。

向导提交后由管理员审核。如果他们发现信息丢失，他们可以解锁某些页面。当用户返回输入该信息时，他们应该只能查看那些特定页面。例如，导航可能是这样的：

```
Step 2
Step 3
    SubStep 1
        Sub-SubStep2
Submission 
```

我当前的实现由数据库中的一个表组成，该表跟踪未锁定的页面。单击“下一步”按钮时，它会调用一个方法来确定下一页是什么。由于第 3 步中发生的奇怪且多变的导航，这种方法是一个容易被破坏的 if-else 分支噩梦。

任何有关简化此的建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:47:58.110

如果您创建表示导航层次结构的树结构，则树的[前序遍历](http://en.wikipedia.org/wiki/Preorder_traversal)将以所需的线性顺序访问页面。你可以运行这样一个遍历，当你点击当前页面时，你可以继续遍历，直到找到一个解锁的页面，这将是想要的下一页。

伪代码：

```
class TreeNode:
    string name
    List<TreeNode> children

string findNextPage(TreeNode node, Set<string> unlockedPageNames, 
                    string currentPageName, ref bool currentPageFound):
    if currentPageFound && unlockedPageNames.Contains(node.name):
        return node.name
    if node.name == currentPageName:
        currentPageFound = true
    foreach child in children:
        result = findNextPage(child, unlockedPageNames, 
                              currentPageName, currentPageFound)
        if result != null:
            return result
    return null

string findNextPage(TreeNode node, Set<string> unlockedPageNames, 
                    string currentPageName):
    bool currentPageFound = false
    return findNextPage(node, unlockedPageNames, 
                        currentPageName, currentPageFound) 
```

请注意，您需要一个根节点，其子节点必须是步骤 1、步骤 2 和步骤 3。将此根节点传递给最后一个`findNextPage()`函数。

# xcode - XCode 找不到 AppKit

> ID：11992635
> 
> 赞同：2
> 
> 时间：2012-08-16T17:40:09.990
> 
> 标签：xcode, ipad, kobold2d

我正在学习 iPad 开发，我正在重构我的项目以使用 Kobold2d。进展顺利，但我坚持尝试使用 labelWithString:dimensions:hAlignment:vAlignment:fontName:fontSize: 初始化程序初始化 CCLabelTTF，问题在于 hAlignment 和 vAlignment 的预期值（CCTextAlignment 和 CCVerticalTextAlignment）已贬值。我读到要使用的值是 NSTextAlignment，它可以在 AppKit 框架中找到。

这就是事情变得棘手的地方；XCode 似乎拒绝承认 AppKit 框架的存在。当我转到“target->Summary->Linked Frameworks and Libraries”并尝试添加框架时，AppKit 没有显示为选项。尽管如此，我仍然可以通过在 System/Library/Frameworks 中搜索并从那里添加它来找到它并添加它。然而，即使添加了它，XCode 仍然不允许我执行“#import”。更奇怪的是，使用 AppKit 的 cocos2d 类在导入它时没有任何问题。

我完全不知道为什么我的项目似乎拒绝让我使用 AppKit 框架；是否有某种必须完成的框架搜索路径包含？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T17:41:13.500

AppKit 是一个 OS X 框架。您不能在 iOS 应用程序中使用它。而是导入 UIKit，它是 AppKit 的 iOS 版本。它也定义了 NSTextAlignment。

# mysql - 覆盖mysql表数据

> ID：11992639
> 
> 赞同：1
> 
> 时间：2012-08-16T17:40:45.130
> 
> 标签：mysql, sql, web-crawler

我有一个网络爬虫。网络爬虫从我给它的网页中收集链接，但是当它检索链接时，一些链接由于网站而重复。如果新行与旧行完全相同，MYSQL 中有没有办法覆盖数据。

说如果我有在链接字段中有[http://www.facebook.com](http://www.facebook.com)

我也设法再次拿起[http://www.facebook.com](http://www.facebook.com)，我希望后者覆盖旧行。因此我的搜索引擎上没有冲突。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:51:26.947

我假设您要更新`last_updated`日期（如果`url`已存在）。否则没有充分的理由进行更新。

```
 INSERT INTO `scrapping_table`
    (`url`)
    VALUES
    ("www.facebook.com")
    ON DUPLICATE KEY UPDATE
    `date_updated` = `datetime.now()` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:42:54.997

调查`ON DUPLICATE KEY`行动

[http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

基本上使您关注的列具有唯一键写入您的插入语句，然后添加

```
ON DUPLICATE KEY UPDATE col = overwriting value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T23:24:51.650

**谨防！！**

在操作可能会找到数百万个链接的网络爬虫时，您希望最小化查询的每个“爬网”过程触发......您是否要创建一个独特的链接表来为机器人提供信息？或者你想防止重复的搜索结果？

**独特的 url 台球桌：**

*   在抓取页面时 - 您应该将 url 保存到一个数组（或列表）并确保 (!in_array()) 它是一个唯一值数组，您会发现您抓取的每个页面都包含很多重复的链接 - 所以清理它们在使用 sql 之前。
*   将网址转换为散列（32 位 [1,0] 的“simhash”）。
*   现在打开到 db 的连接并检查是否存在，如果它确实转储了它们！不要更新（它会进行第二个过程）。您应该使用索引表上的哈希匹配链接，它会更快。

**防止重复结果搜索：**

*   如果您在上述方法中对 url 进行了索引，则不应找到重复的 url，如果有，则表示您的抓取操作存在问题。

*   即使您在另一个表中有重复的值并且您想要搜索它但不返回重复的结果，您也可以在查询中使用 DISTINCT。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T18:11:45.903

如果您的链接字段是唯一的，您可以使用

```
 INSERT INTO "mytable" (link_field, x_column, y_column) VALUES ("www.facebook.com",'something new for x','something new for y')
 ON DUPLICATE KEY UPDATE x_column='something new for x', y_column='something new for y' 
```

只要确保您的链接字段是唯一的，如果您的列中有更多唯一字段，我建议使用第二种方法，因为[他们](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)建议避免在具有多个唯一索引的表上使用 ON DUPLICATE KEY 子句。

1.  将您的链接字段设置为唯一。
2.  在插入一行之前尝试

    ```
    Select "primary_id" from mytable where link_field="www.facebook.com" 
    ```

3.  计算从此 SQL 返回的行数。

    =>如果 count>0 然后使用我们刚刚通过 SELECT SQL 抓取的“primary_id”更新行

    => 如果 count==0 ，只需插入你的行

# loops - 如何在 %%x (for) 批处理文件中执行此操作 %x:~0,1%

> ID：11992641
> 
> 赞同：0
> 
> 时间：2012-08-16T17:40:49.513
> 
> 标签：loops, for-loop, batch-file, cmd

我`%%x`是

```
a=23
b=56
c=89 
```

在一个`.txt`叫`hi.txt`

```
for %%x in (hi.txt) do (echo %%x:~0,1 %%x) 
```

但它失败了......

谢谢你

我想在每一行中回显“第一个字符”，但我不能使用 %%x:~0,1...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:10:12.617

我不确定您要做什么...我假设您要解析文件 hi.txt 并提取变量 (a,b,c) 和它们等于的数字..

```
@echo 关闭
设置本地启用扩展

for /f "tokens=1,2 delims==" %%i in (hi.txt) do (
   echo %%i 的值为 %%j
)

```

这将输出

```
a 的值为 23
 b 的值为 56
 c 的值为 89

```

如果您需要更多信息，请参阅“帮助”。

另请注意，我的示例是在 = 符号上进行解析，因此每个变量的宽度并不重要。你可以有一个像“MyText = 100”这样的行，它也可以工作。您的 ~0,1 假设每个值只有 1 个字符宽。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:46:37.810

如果您需要做的只是打印一行的第一个字符，那么下面的脚本应该可以工作。我相信您最初的问题可能与延迟变量扩展有关。有关详细信息，请参阅“帮助设置本地”和“帮助设置”。

此版本的脚本将每一行读入一个临时变量，并将第一个字符剪切到另一个名为 firstCharacter 的变量中。这 ！用于 CMD 脚本的延迟变量扩展功能。

```
    @echo 关闭
    setlocal ENABLEEXTENSIONS,ENABLEDELAYEDEXPANSION

    for /f %%i in (hi.txt) 做 (
       设置整行=%%i
       设置 firstCharacter=!wholeLine:~0,1!
       回声第一个字符是！firstCharacter！
    )

    本地端

```

输出是......

```
第一个字符是
 第一个字符是 b
 第一个字符是 c

```

我无法找到直接使用 %%i 的方法，因此临时变量 WholeLine。为了清楚起见，我添加了变量 firstCharacter，但它不需要存在才能使其工作。我本可以回应！wholeLine:~0,1！直接地。

玩得开心。

# asp.net-mvc - MVC4 是否已融入 .NET 4.5？

> ID：11992651
> 
> 赞同：21
> 
> 时间：2012-08-16T17:41:19.983
> 
> 标签：asp.net-mvc, .net-4.5, asp.net-4.5

Visual Studio 2012 的许多发行说明都在谈论 .NET 4.5 和 MVC4，但我不知道 MVC4 是否真的是 .NET 4.5 版本的一部分。有人确定吗？我希望不必在我的服务器上单独安装 MVC。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-16T18:14:01.940

不，ASP.NET MVC 4 被嵌入到 VS2012 中，与 ASP.NET MVC 3 被嵌入到 VS2010 中的方式完全相同，但不是 .NET 4.0 的一部分（您可以在服务器上安装一个单独的下载文件）。但是还有一个单独的 ASP.NET MVC 4 for VS2010 SP1 下载，您显然不能使用 .NET 4.5 的特定功能，例如`async/await`，但您仍然可以开发 ASP.NET MVC 4 应用程序和目标 .NET 4.0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-07T10:57:54.717

ASP.NET MVC 强调不与特定的 .NET 化身相关联。这样，无论您的托管服务提供商使用什么 .NET 版本，*您*都可以使用最新最好的版本。

如果提供程序支持 ASP.NET，这就是您需要知道的全部内容。

为此，ASP.NET MVC 是**bin-deployable**，这意味着您可以自己部署 MVC dll，沿着您的应用程序 - 无需托管提供商的特殊权限。

Phil Haack 有一篇很棒的文章，描述[了如何对 MVC3 进行 bin 部署](http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx)。VS 中甚至为这种情况提供了工具支持！

我假设较新的 MVC 化身的工作流程是相似的。

# sql - 为每个 Id 选择多行查询

> ID：11992661
> 
> 赞同：0
> 
> 时间：2012-08-16T17:42:24.617
> 
> 标签：sql, oracle

我有表方案作为'

```
Attribute_name attribute_value  Attr_id uniquey_keyId
  tag           A               111        1
  price         113             111        2
  product       B               111        3
  value         115             111        4 
```

当 attribute_name = tag for all where attribute_value = 115 for each Attr_id 时，我需要选择attribute_value；

输出应该是“A

在这种情况下，我们有多个相同的 id 行并分布在不同的值上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:50:27.770

这种实体属性数据模型将产生主要的性能问题。您将不得不不断编写自联接来将数据转换为您可以实际查询的内容。这会很慢，而且扩展性很差。

话虽如此

```
SELECT t.attribute_value
  FROM (SELECT attr_id, attribute_name, attribute_value
          FROM table_name
         WHERE attribute_name = 'value') v,
       (SELECT attr_id, attribute_name, attribute_value
          FROM table_name
         WHERE attribute_name = 'tag') t
 WHERE t.attr_id = v.attr_id
   AND v.attribute_value = '115'; 
```

如果您需要查看两个属性，则需要像我在这里所做的那样将表连接到自身一次。如果您需要查看三个属性，则需要两个连接。如果您需要更多属性，则需要更多连接。这不太可能有效地扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:05:11.377

我认为您可以使用 group by 和 fun having 子句来做到这一点：

```
select attr_id, max(case when Attribute_name= 'tag' then attribute_value end)
from t
group by attr_id
having sum(case when Attribute_name= 'value'  and Attibute_value = '115'
                then 1 else 0
           end) > 0 
```

这假定每个 attr_id 只有一个名为“tag”的属性。如果有更多，您需要一个稍微复杂的查询。你能假设最多有一个标签吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T18:07:16.550

这是 PIVOT 查询的典型应用

```
SELECT * from (
    SELECT Attr_id, attribute_value, Attribute_name 
    FROM schem
)
PIVOT 
(
    MAX(attribute_value)
    FOR Attribute_name IN ('tag','price','product','value')
) 
```

这会创建一个像

```
Attr_id  tag  price  product  value  
111       A    113     B       115  
112       X    90      C       50 
```

我将从这个数据透视查询创建一个视图。基于这个观点，你的问题就变得很容易了

```
SELECT tag
FROM pivot_view
WHERE value = '115' 
```

# javascript - DIV宽度调整

> ID：11992667
> 
> 赞同：0
> 
> 时间：2012-08-16T17:42:38.533
> 
> 标签：javascript, css, html

我`<div>`在页面中有两个 -s 并排排列，宽度以百分比定义，`75%`例如`25%`. 在 100% 浏览器缩放中一切都很好，但是一旦我放大一个`<div>`就会掉下来。如何防止这种情况？

如果对于所有缩放尺寸都无法阻止它，那么我可以检测到我`<div>`的跌倒并给用户一个可能缩小的警报吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:45:09.343

您可以`min-width`为您设置一个，`body`这将使页面滚动而不是调整大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:49:29.763

它应该缩放就好了。在您的 75%/左 DIV 上放置一个“float:left”，在您的 25%/right DIV 上放置一个“float:right”……反之亦然。例子：

```
<div style="width:75%; height:200px; background:#333; float:left; position:relative;"></div>
<div style="width:25%; height:200px; background: #999; position:relative; float:right;"></div> 
```

# c - Printf 原始数据到固定长度的十六进制输出

> ID：11992677
> 
> 赞同：14
> 
> 时间：2012-08-16T17:43:25.270
> 
> 标签：c, format, hex, printf

我有一个结构体，指向一个结构体的指针，我希望将前 n 个字节打印为一个长十六进制数，或一个十六进制字节字符串。

本质上，我需要与 gdb 的检查内存命令 x/nxb 等效的 printf 。

如果可能的话，我想仍然使用 printf 作为程序的记录器函数，只是它的变体。如果我可以在不循环数据的情况下这样做，那就更好了。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-16T18:35:18.390

刚刚接受了 Eric Postpischil 的建议，并编造了以下内容：

```
struct mystruc
{
  int a;
  char b;
  float c;
};

int main(int argc, char** argv)
{
  struct mystruc structVar={5,'a',3.9};
  struct mystruc* strucPtr=&structVar;
  unsigned char* charPtr=(unsigned char*)strucPtr;
  int i;
  printf("structure size : %zu bytes\n",sizeof(struct mystruc));
  for(i=0;i<sizeof(struct mystruc);i++)
      printf("%02x ",charPtr[i]);

  return 0;
} 
```

它将在结构伸展时尽可能快地打印字节。

更新：感谢 Eric 的洞察力 :) 我已经更新了代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:06:15.127

试试这个。假设您有指向 struct in 的指针`pstruct`。

```
unsigned long long *aslong = (unsigned long long *)pstruct;
printf("%08x%08x%08x%08x%08x%08x%08x%08x", 
       aslong[0],
       aslong[1],
       aslong[2],
       aslong[3],
       aslong[4],
       aslong[5],
       aslong[6],
       aslong[7],
); 
```

正如 Eric 指出的那样，这可能会乱序打印字节。所以要么是这个，要么是使用`unsigned char *`and（有`printf`64个参数或使用循环）。

# javascript - 在 html 文档中访问 html

> ID：11992684
> 
> 赞同：0
> 
> 时间：2012-08-16T17:43:56.363
> 
> 标签：javascript, html, html5-video

我正在尝试使用 JavaScript 对网页中的 html5 视频进行一些视频处理。当视频标签在同一个文档中时，这是可能的。我正在做的是查看通过第三方播放器强制 html5 视频是否可行。视频标签在那里，但它嵌套在新的 HTML 标签中。当使用`document.getElementsByTagName('video')[0];`为我得到的视频对象设置一个变量时，`undefined`这让我相信我无法以这种方式访问​​视频。我对 HTML 或尤其是 JavaScript 不是很有经验（我是一种陷入深渊的实习生）。有什么方法我需要告诉 JavaScript 专门在插入到我的基本文档中的 HTML 标记中查找视频标记？

这是我试图访问的代码......它位于我的脚本所在的 html 文档的正文中，它试图访问它......第一个对象是主文档正文元素的第一个子元素.. .我遗漏了一些不重要的风格内容，但那是我想要抓取并分配给 js 变量的视频：

```
<object id="kaltura_player" .......application type = "shockwave-flash"....unimportant style stuff>

    <html>
        <head> <title>test_inter1_xvid_2min_800.webm</title> </head>
        <body>
            <video autoplay="" controls="" style="position:absolute; top:0; left:0; width: 100%; height: 100%" tabindex="0"></video>
        <body>
    </html>
 </object> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:23:20.320

回答我自己的问题，以防任何人仍然可以从这篇文章中使用。是的，您可以从基本 html 中的脚本访问嵌入的 html。但我还没有弄清楚为什么我不能访问我的，但我想这与从不同域注入的 html 有关。我会调查一下。

# ios - 如何在情节提要上获得活动的 UIViewController？

> ID：11992685
> 
> 赞同：2
> 
> 时间：2012-08-16T17:43:56.623
> 
> 标签：ios, ipad, storyboard

有人可以告诉我如何获取它之前创建的 UIView 控制器吗？我正在使用情节提要，并且我已经阅读了有关方法 instantiateViewControllerWithIdentifier 的苹果文档：但是这个文档说每次我调用这个方法时它都会创建一个新的 ViewController 实例我想要的是使用现有的。

我在故事板上寻找 UIViewController 单例。是否可以？

提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:53:36.157

如果您只调用`instantiateViewControllerWithIdentifier:`一次，然后将结果保存为某个强属性以供重复使用，那么您将只创建一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-05T03:40:58.587

我有这样的解决方案：

1.  控制器A：

```
'    SingleController * B = [SingleController shareSingleController];
[self.navigationController pushViewController:con animated:YES];'

//push ControllerB 
```

2.  控制器B：

```
+(instancetype)shareSingleController
{
    static SingleController * single;

    static dispatch_once_t onceToken;

    dispatch_once(&onceToken, ^{    
        //a static instance from StoryBoard

        single = (SingleController *)[[UIStoryboard storyboardWithName:@"SingleController" bundle:nil]instantiateInitialViewController];
    });
    return single;'
} 
```

您可以测试，它是一个单一的实例。

# jquery - 多个 UI 对话框：禁用按钮影响其他对话框

> ID：11992686
> 
> 赞同：0
> 
> 时间：2012-08-16T17:44:02.837
> 
> 标签：jquery, jquery-ui-dialog

我的页面有多个对话框。我为它定义了单独的 div 部分。根据要求，我必须禁用对话框中的保存按钮，直到未填充所有必填字段。我能够禁用它。当我打开其他对话框时出现问题。这些对话框的保存按钮也被禁用。

我可以在我不想这样做的对话框上放置脚本以启用按钮。我有其他解决方案来解决这个问题吗？

我的页面.cshtml

```
<div id="MyDialg" title="Dialog 1">
</div>

<input id="btnMy" type="button" value="Dialog1" /> 
```

MyJs.JS

```
$('#MyDialg').dialog({
    autoOpen: false,
    width: 400,
    height: 350,
    modal: true,
    resizable: false,
    buttons: {
        "Cancel": function () { $(this).dialog("close"); },
        "Save": function () {
        }
    }
});

$("#btnMy").button().live("click", function () {
    var diag = $('#MyDialg');
    diag.load("Action/Controller", '', function () {
    });

    $(diag).dialog('open');
    return false;
}); 
```

我在加载时使用以下行来禁用对话框上的“保存”按钮：

**_MyDialog.cshtml**

```
 $(".ui-dialog-buttonpane button:contains('Save')").button("enable"); 
```

源代码（对话框 html 之一）

```
<DIV class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix" jQuery17205878367688005092="61" sizcache04606232417093721="71" sizset="0"><SPAN id=ui-dialog-title-MyDialg1 class=ui-dialog-title jQuery17205878367688005092="62">MyDialg title</SPAN><A class="ui-dialog-titlebar-close ui-corner-all" role=button href="#" jQuery17205878367688005092="60"><SPAN class="ui-icon ui-icon-closethick" jQuery17205878367688005092="63">close</SPAN></A></DIV> 
<DIV style="MIN-HEIGHT: 0px; WIDTH: auto; HEIGHT: 247px" id=MyDialg1 class="ui-dialog-content ui-widget-content" jQuery17205878367688005092="58" scrolltop="0" scrollleft="0">
<FORM id=form1 method=post action=/action1/controllername jQuery17205878367688005092="172" novalidate="novalidate" data-ajax-success="showSuccessMessage" data-ajax-method="POST" data-ajax="true" data-ajax-failure="showErrorMesage">
<BR>
<DIV class=field><LABEL for=Name>Description: </LABEL><SUP class=mandatory>*</SUP> <INPUT id=Name class="text-box single-line" type=text name=Name> <BR><SPAN class=field-validation-valid data-valmsg-replace="true" data-valmsg-for="Name"></SPAN></DIV><BR><BR>
<HR>
<BR>
</FORM><BR></DIV>
<DIV class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix" sizcache04606232417093721="71" sizset="1">
<DIV class=ui-dialog-buttonset sizcache04606232417093721="71" sizset="1"><BUTTON aria-disabled=false class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role=button type=button jQuery17205878367688005092="64"><SPAN class=ui-button-text>Cancel</SPAN></BUTTON><BUTTON aria-disabled=true class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ui-button-disabled ui-state-disabled" role=button disabled type=button jQuery17205878367688005092="65"><SPAN class=ui-button-text>Save</SPAN></BUTTON></DIV></DIV> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:03:55.640

您可以使用对话框`ID`作为起点来定位特定按钮。因为我认为您在上面的代码中拥有的内容特定于您要启用/禁用按钮的对话框。您可以使用以下代码找到不会影响其他对话框的特定“保存”按钮

```
$('#MyDialg').find('button:contains("Save")').button('disable');
$('#MyDialg').find('button:contains("Save")').button('enable'); 
```

编辑：

有两种方法可以做到这一点。您可以使用以下命令遍历当前结构以找到它

1.  从你的对话 id 开始
2.  找到主对话框
3.  查找包含保存按钮文本的 span
4.  获取按钮容器并禁用它

编码

```
$('#MyDialg').closest('div.ui-dialog').find('span.ui-button-text:contains("Save")').closest('.ui-button').button('disable'); 
```

[http://jsfiddle.net/wirey00/zDUQX/](http://jsfiddle.net/wirey00/zDUQX/)

或者你可以给你的按钮一个 id

```
buttons: {
    "Cancel": function () { $(this).dialog("close"); },
    "Save": {
        text: 'Save', // <-- text to show
        id: 'test',  // <-- this sets the id to TEST
        click: function () {
              // code here
        }
    } 
```

然后只需使用 id 禁用它

```
$('#test').button('disable'); 
```

[http://jsfiddle.net/wirey00/zf9Wp/](http://jsfiddle.net/wirey00/zf9Wp/)

# foursquare - 测试 Foursquare“应用平台”

> ID：11992687
> 
> 赞同：0
> 
> 时间：2012-08-16T17:44:06.677
> 
> 标签：foursquare

我已经在 Foursquare 注册了我的应用程序，包括注册“用户推送 API”

我已经使用他们的网站链接“发送测试推送”测试了签入推送，结果成功。

我已经完成了 Oauth 流程，并成功获得了令牌并可以使用它进行调用。

现在我想用实际的foursquare应用程序测试“用户推送API”。我的理解是，为了让我的应用程序接收推送的签到通知，我的应用程序必须与我的 Foursquare 帐户“连接”。

我该怎么做才能建立这种联系？我没有在要连接的应用程序库中看到我的应用程序。获得令牌以完成连接过程后，是否需要拨打电话？我了解到，虽然此 API 正在开发中，但我的应用程序无法出现在主库中。自从我注册为开发人员以来，我似乎应该能够将我的应用程序连接到某个地方。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:46:44.143

有关如何连接您的应用程序的更多详细信息，请参阅[https://developer.foursquare.com/overview/auth 。](https://developer.foursquare.com/overview/auth)

此外，即使您的应用程序没有出现在应用程序库中，您的应用程序详细信息的草稿版本也会显示在[https://foursquare.com/app/CLIENT_ID](https://foursquare.com/app/CLIENT_ID)上，您可以查看它，并且会自动为您生成一个连接按钮。

# android - 使用 viewpager 的最佳方法

> ID：11992691
> 
> 赞同：2
> 
> 时间：2012-08-16T17:44:39.670
> 
> 标签：android, android-viewpager

我有一个使用从教程中获得的代码的工作 viewpager 示例。本教程由显然是专家的 Lauren Darcey 和 Shane Conder 编写（我是 Android 新手）。代码粘贴在下面。当用户水平滑动时，这段代码正在做的是膨胀（向前）和破坏（向后）。只有5页。似乎将它们全部充气然后让用户在没有充气/破坏的情况下进行所有滑动会更聪明。就像它是一个很大的页面（例如 Windows Phone 7 中的 Panarama 和 Pivot 控件）。

此外，如果其中一个页面上有谷歌地图，则此代码会爆炸。它打击了第二次通货膨胀（还不知道为什么），如果它们都膨胀一次，就不会发生这种情况。

有理由必须这样做吗？有没有按照我建议的方式做的例子？谢谢，加里布莱克利

```
 private class MyPagerAdapter extends PagerAdapter {

    public int getCount() {
        return 5;
    }

    public Object instantiateItem(View collection, int position) {

        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        int resId = 0;
        switch (position) {
        case 0:
            resId = R.layout.farleft;
            break;
        case 1:
            resId = R.layout.left;
            break;
        case 2:
            resId = R.layout.middle;
            break;
        case 3:
            resId = R.layout.right;
            break;
        case 4:
            resId = R.layout.farright;
            break;
        }

        View view = inflater.inflate(resId, null);

        ((ViewPager) collection).addView(view, 0);

        return view;
    }

    @Override
    public void destroyItem(View arg0, int arg1, Object arg2) {
        ((ViewPager) arg0).removeView((View) arg2);

    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T17:59:10.783

您可以使用[`ViewPager.setOffscreenPageLimit(int)`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOffscreenPageLimit(int))加载所有屏幕外选项卡。只需通过执行或将其设置为`4`（总共 5 个，负 1 个可见）。`((ViewPager) collection).setOffscreenPageLimit(4);``((ViewPager) collection).setOffscreenPageLimit(getCount() - 1);`

请记住这对记忆的影响；如果您不小心，加载所有内容会耗尽设备的 RAM。

# jquery - 通过单击标题禁用 tablesorter 排序，但仍支持按下拉选项排序

> ID：11992693
> 
> 赞同：2
> 
> 时间：2012-08-16T17:44:57.020
> 
> 标签：jquery, jquery-ui, jquery-plugins, tablesorter

我在stackoverflow中找到了这个例子。这很有帮助。

[http://jsfiddle.net/Mottie/Yke6M/](http://jsfiddle.net/Mottie/Yke6M/)

现在它允许两种方式对表格内容进行排序：

1) 通过单击每个表格标题进行排序 2) 通过选择下拉选项对表格进行排序。

我的要求只是用下拉菜单排序。我想通过单击表头来删除排序功能。

我可以禁用点击标题吗？

我猜我可以在表格标题中添加一些 CSS，使其无法点击。但我不知道css中是否有类似的东西。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T17:49:54.267

您需要做的就是将每列的排序器设置为 false：

```
$('table').tablesorter({
    headers : {
        0 : { sorter: false },
        1 : { sorter: false },
        2 : { sorter: false },
        3 : { sorter: false }
    }
}); 
```

这会禁用手动排序，但您仍然可以触发排序，因此外部下拉菜单仍然有效（[演示](http://jsfiddle.net/Mottie/Yke6M/31/)）。

或者，如果您[在 github 上使用我的 tablesorter](http://mottie.github.com/tablesorter/docs/example-parsers-class-name.html)分支，您只需将类名添加`sorter-false`到标题（[演示](http://jsfiddle.net/Mottie/Yke6M/32/)）：

```
<th class="sorter-false">Alphabetic</th>
<th class="sorter-false">Numeric</th>
<th class="sorter-false">Animals</th>
<th class="sorter-false">Sites</th> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:44:28.927

好吧，这是一种黑客行为。我创建了必须对其进行排序的重复行。我把它们藏起来了。所以现在我在我显示的所有行上都禁用了排序。

因此，由于我具有与隐藏的重复项相同的列，因此我能够进行排序，而且没有人可以通过单击表头进行排序

# java - 如何确定字符串列表是否包含 null 或空元素

> ID：11992694
> 
> 赞同：24
> 
> 时间：2012-08-16T17:44:56.670
> 
> 标签：java, string, collections

在Java中，我有以下方法：

```
public String normalizeList(List<String> keys) {
    // ...
} 
```

我想检查一下`keys`：

*   不是`null`它自己；和
*   不为空（`size() == 0`）；和
*   没有任何`String`元素是`null`; 和
*   没有任何`String`为空的元素 ("")

这是一个实用方法，将进入“commons”风格的 JAR（类将类似于`DataUtils`）。这是我所拥有的，但我认为它不正确：

```
public String normalize(List<String> keys) {
    if(keys == null || keys.size() == 0 || keys.contains(null) || keys.contains(""))
        throw new IllegalArgumentException("Bad!");

    // Rest of method...
} 
```

我相信最后 2 次检查是不正确的，`keys.contains(null)`并且`keys.contains("")`可能会引发运行时异常。**我知道我可以遍历`if`语句中的列表，并在那里检查空值/空值，但我正在寻找一个更优雅的解决方案（如果存在）。**

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-16T17:46:57.923

```
 keys.contains(null) || keys.contains("") 
```

`true`如果您的列表包含 null（或）空字符串，则不会引发任何运行时异常和结果。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T17:48:01.587

`keys.contains(null)`这对我来说看起来很好，你会得到的唯一例外`keys.contains("")`是如果`keys`它本身是`null`.

但是，由于您首先检查它，因此您知道此时`keys`is not `null`，因此不会发生运行时异常。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-01-10T18:59:42.007

使用 java 8，您可以执行以下操作：

```
public String normalizeList(List<String> keys) {
    boolean bad = keys.stream().anyMatch(s -> (s == null || s.equals("")));
    if(bad) {
        //... do whatever you want to do
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T18:01:03.767

我不确定，但 ApacheCommon 库中没有任何帮助类可以做到这一点吗？就像你有一个字符串的 isEmpty 并且你在 ApacheCommons 库中有 isNullOrEmpty

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T18:10:26.777

一次检查清单

```
 public static boolean empty(String s) {
    if (s == null)
      return true;
    else if (s.length() == 0)
      return true;
    return false;
  }  

  public String normalize(List<String> keys) {
    if(keys == null || keys.size() == 0)
        throw new IllegalArgumentException("Bad!");
    for (String key: keys)
      if(empty(key))
         throw new IllegalArgumentException("Empty!");

    // Rest of method...
    return null;
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-28T10:09:55.130

您还可以使用 Apache StringUtils 并检查字符串是否为空白，这将检查 null、Emptystring 并且还会修剪您的值。

```
if(StringUtils.isBlank(listItemString)){...} 
```

在此处查看 StringUtils 文档：

[https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html)

# php - 数据库连接未激活

> ID：11992698
> 
> 赞同：0
> 
> 时间：2012-08-16T17:45:14.240
> 
> 标签：php, mysql, ezsql

我今天更新到最新的 PHP 和 MySQL 版本，以及 ezSQL (2.17)。

现在事情最初连接正常，但是在使用`$db->select`它时会引发此错误：

```
mySQL database connection is not active in /data/servers/shared/class.sql.php on line 120 
```

有谁知道发生了什么？

# height - uilabel 的动态大小

> ID：11992701
> 
> 赞同：0
> 
> 时间：2012-08-16T17:45:21.843
> 
> 标签：height, uilabel

我有 uilabel，这个 uilabel 应该根据文本的长度成行增长。反正我不知道该怎么做。我已经在网上搜索了不同的解决方案，但没有找到任何我想要的东西。目前我在这里这样做：

```
size_label = [[UILabel alloc] init];
size_label.frame = CGRectMake( 0, 0, 180, 10000);
size_label.font = [UIFont systemFontOfSize:15];
size_label.text = some_long_text;
size_label.numberOfLines = 10000;
[size_label sizeToFit];
NSLog(@"size_label.frame.size.height = %f", size_label.frame.size.height ); 
```

NSLog 的结果总是 19。这不是我想要的，因为文本至少需要 150 像素。

我如何获得取决于：

1.  uilabel 的宽度（宽度不得更改）
2.  文本长度和uifont

这

1.  行数
2.  uilabel 的高度

这样就可以显示所有内容并且文本正好合适。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:53:36.340

Foll 代码可能有助于自动调整标签大小

```
UILabel *size_label = [[UILabel alloc] initWithFrame:CGRectMake(0.0, 0.0, 180.0, 40.0);
size_label.font = [UIFont systemFontOfSize:15];
size_label.text = some_long_text;
size_label.numberOfLines = 0;

[size_label sizeToFit]; 
```

# c# - C#中的Json到字符串

> ID：11992703
> 
> 赞同：-1
> 
> 时间：2012-08-16T17:45:29.163
> 
> 标签：c#, json, string, data-conversion

这个 JSON 数据 [http://api.geonames.org/citiesJSON?north=44.1&south=-9.9&east=-22.4&west=55.2&lang=de&username=demo](http://api.geonames.org/citiesJSON?north=44.1&south=-9.9&east=-22.4&west=55.2&lang=de&username=demo)

我怎么能这样

```
XmlTextReader reader = new XmlTextReader("http://api.geonames.org/citiesJSON?north=44.1&south=-9.9&east=-22.4&west=55.2&lang=de&username=demo");

TextBox1.Text = reader.tostring(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:50:20.780

我对这个用于 JSON 的[C# 库感到满意。](http://james.newtonking.com/projects/json-net.aspx)

然后，您可以编写如下代码

```
using System;
using System.IO;
using System.Net;
using System.Text;
using Newtonsoft.Json;

namespace Examples.System.Net
{
    public class WebRequestGetExample
    {
        public static void Main ()
        {
            // Create a request for the URL. 
            WebRequest request = WebRequest.Create (
              "http://api.geonames.org/citiesJSON?north=44.1&south=-9.9&east=-22.4&west=55.2&lang=de&username=demo");
            // Get the response.
            WebResponse response = request.GetResponse ();
            // Get the stream containing content returned by the server.
            Stream dataStream = response.GetResponseStream ();
            // Open the stream using a StreamReader for easy access.
            StreamReader reader = new StreamReader (dataStream);
            // Read the content.
            string responseFromServer = reader.ReadToEnd ();
            // Parse JSON 
            JObject o = JObject.Parse(responseFromServer);
            JArray status= (JArray)o["status"];
            string message = (string)status["message"];
            // Clean up the streams and the response.
            reader.Close ();
            response.Close ();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T18:20:47.607

```
var json = new WebClient().DownloadString("http://api.geonames.org/citiesJSON?north=44.1&south=-9.9&east=-22.4&west=55.2&lang=de&username=demo");
TextBox1.Text = json; 
```

# javascript - 在leak-finder.js 方面需要帮助

> ID：11992705
> 
> 赞同：1
> 
> 时间：2012-08-16T17:45:40.923
> 
> 标签：javascript, google-chrome

嘿，所以我正在尝试使用leak-finder.js 库。我按照[http://code.google.com/p/leak-finder-for-javascript/](http://code.google.com/p/leak-finder-for-javascript/)的所有说明进行操作。

我尝试在 chrome 的控制台中使用以下命令

```
goog.Disposable.ENABLE_MONITORING=true 
```

但我收到以下错误

```
ReferenceError: goog is not defined 
```

所以我尝试导入 Closure 库，但似乎无法将它导入到 chrome 中，而且它似乎已被 Firefox 弃用。所以关于我应该做什么的任何建议。

# jsf-2 - 如何在 JSF 的 EL 中使用 HTML 字符实体？

> ID：11992707
> 
> 赞同：6
> 
> 时间：2012-08-16T17:45:49.200
> 
> 标签：jsf-2, facelets

我想在组件的值属性中使用[破折号](http://en.wikipedia.org/wiki/Dash)`h:link`。

这是我的尝试（目前不工作）：

```
<h:link value="#{somethingHere} &mdash; #{anotherHere}">
    <f:param name="identifier" value="#{somethingHere.identifier}" />
</h:link> 
```

这导致`FaceletsException`：

```
FaceletException: Error Parsing /index.xhtml: Error Traced[line: 13]
                The entity "mdash" was referenced, but not declared.
at com.sun.faces.facelets.compiler.SAXCompiler.doCompile(SAXCompiler.java:394)
... 
```

我知道我可以改用 HTML 锚点，但有没有办法在[表达式语言](https://en.wikipedia.org/wiki/Unified_Expression_Language#History)(EL) 表达式中做到这一点？这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-16T17:51:22.243

Facelets 是基于 XML 的，由 XML 解析器处理。这`&mdash;`是一个 HTML 实体，在 XML 中无法识别。在 XML 中只能识别[此 Wikipedia 页面](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML)中列出的五个、`&quot;`、`&amp;`、`&apos;`和。`&lt;``&gt;`

Facelets/XML 默认已经使用 UTF-8，而 HTML 实体基本上是 UTF-8 前时代的遗留物，在 UTF-8 文档中不是必需的，因此您可以将实际字符纯/未编码放在模板中（提供编辑器能够将文件保存为 UTF-8）。

换句话说，只需调整

```
<h:link value="#{somethingHere} &mdash; #{anotherHere}"> 
```

到

```
<h:link value="#{somethingHere} — #{anotherHere}"> 
```

如果由于某种原因这不是一个选项，那么您可以改用 format 中的数字字符引用`&#nnnn;`，就像在 XML`&#160;`中表示 a一样。`&nbsp;`您可以在 fileformat.info 中找到数字字符参考：[Unicode Character 'EM DASH' (U+2014)](http://www.fileformat.info/info/unicode/char/2014/index.htm)

> ### 编码
> 
> HTML 实体（十进制）`&#8212;`

所以，这应该为你做：

```
<h:link value="#{somethingHere} &#8212; #{anotherHere}"> 
```

另一种应该更满足确切错误消息的替代方法是在文档类型中自己显式声明实体引用。

```
<!DOCTYPE html [
    <!ENTITY mdash "&#8212;"> 
]> 
```

But this isn't the general recommendation/approach as you'd need to repeat this over every single XML file wherein the character is been used.

# jquery - 悬停时弹出 jcarousel

> ID：11992709
> 
> 赞同：0
> 
> 时间：2012-08-16T17:45:55.630
> 
> 标签：jquery, jcarousel

我正在尝试在 jcarousel 上的每个项目悬停时创建一个弹出窗口。

你可以在这里看到：http: [//help.infusionsoft.com/sites/all/themes/help_infusion12/templates/ce_player/jc.php](http://help.infusionsoft.com/sites/all/themes/help_infusion12/templates/ce_player/jc.php)

我创建了一个 div 并将显示：无，然后在悬停时我将删除 css 显示无。唯一的问题是弹出 div 被截断。

我试过 z-index 没有运气。我也尝试从溢出隐藏更改，但是这将显示 jcarousel 上的每个项目，这不是我想要的。

我是否以错误的方式考虑这个弹出想法并且需要做其他事情？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:58:13.050

也许您可以使用[http://fancybox.net/](http://fancybox.net/)来管理您的弹出窗口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:35:28.930

我最终重新设计了 div 并使用 css 将弹出窗口置于 jcarousel div 之上

# mysql - 在可能的范围内对 MySQL 数据库添加唯一性约束？

> ID：11992710
> 
> 赞同：2
> 
> 时间：2012-08-16T17:45:59.920
> 
> 标签：mysql, ruby-on-rails, validation, rails-migrations

我有一个使用 MySQL 的 Rails 应用程序。

我有`has_many :through`两个模型之间的关联，如下所述：

```
class Category < ActiveRecord::Base
  has_many :category_pairings
  has_many :dishes, through: :category_pairings, :inverse_of => :categories
end

class Dish < ActiveRecord::Base
  has_many :category_pairings
  has_many :categories, through: :category_pairings, :inverse_of => :dishes
end

class CategoryPairing < ActiveRecord::Base
  belongs_to :dish
  belongs_to :category
end 
```

所以在我的`category_pairings`表中，我有这样的条目：

```
+---------+-------------+
| dish_id | category_id |
+---------+-------------+
|       3 |           5 |
|       3 |           1 |
|       2 |           1 |
+---------+-------------+ 
```

我想确保您无法再进行这样的输入：

```
+---------+-------------+
| dish_id | category_id |
+---------+-------------+
|       3 |           5 |
|       3 |           1 |
|       2 |           1 |
|       2 |           1 | <-- Illegal
+---------+-------------+ 
```

我知道有一种方法可以通过 Rails 做到这一点，但是有没有办法通过 MySQL 来防止这种情况发生？

我知道在 MySQL 中使用：

```
ALTER TABLE category_pairings
ADD UNIQUE (category_id); 
```

但这将使您`category_id`在整个表格中只能拥有一个独特的。

如果只能通过 Rails 做到这一点，那么为了做到这一点，我的新迁移会是什么样子？

这是我最初的迁移创建表的样子`category_pairings`：

```
class CreateCategoryPairings < ActiveRecord::Migration
  def change
    create_table :category_pairings do |t|
      t.belongs_to :dish
      t.belongs_to :category

      t.timestamps
    end

    add_index :category_pairings, :dish_id
    add_index :category_pairings, :category_id
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:10:50.837

您需要在两个字段中添加唯一索引，如下所示：

```
ALTER TABLE category_pairings
ADD UNIQUE (dish_id, category_id); 
```

# c# - 动态加载的 DLL 中的配置

> ID：11992711
> 
> 赞同：2
> 
> 时间：2012-08-16T17:46:00.633
> 
> 标签：c#, .net, app-config, config, .net-assembly

我通过`Assembly.LoadFile`. DLL 中描述的类的对象需要在使用前进行初始配置，但我无法将`.config`文件添加到 DLL。

有没有办法用`.config`文件或其他方法加载 DLL 来设置配置？任何意见，请。

# c# - 尝试格式化字符串给定参数不是 IFormatable

> ID：11992714
> 
> 赞同：0
> 
> 时间：2012-08-16T17:46:10.750
> 
> 标签：c#, string, format

这是我的代码：

```
receipt.AmountCharged = String.Format("{0:C}", recordPaymentRequest.Payment); 
```

我在“0:C”收到一条消息：

> 指定了格式，但参数不是 IFormatable

如果我尝试`.tostring("C")l`，我会得到：

> 错误 CS1502: 'string.ToString(System.IFormatProvider)' 的最佳重载方法匹配有一些无效参数错误 CS1503: 参数 1: 无法从 'string' 转换为 'System.IFormatProvider'

如何将其转换为货币或 2 位小数？

那个 iformatprovider 是什么意思？

为了澄清：

```
[DataContract]
public class RecordPaymentRequest : TokenRequest {

    [DataMember]
    public string Payment {
        get { return payment; }
        set { payment = value; }
    } 
```

这有帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T18:00:42.753

该`Payment`属性需要是实现`IFormatable`接口的类型。在这种情况下，可能是`Decimal`因为付款似乎是一种货币价值。
如果这不可能，您需要先解析字符串值，例如：

```
receipt.AmountCharged = 
         String.Format("{0:C}", Decimal.Parse(recordPaymentRequest.Payment)); 
```

# c# - 在实体框架中创建动态 linq 排序和搜索顺序语句时

> ID：11992717
> 
> 赞同：3
> 
> 时间：2012-08-16T17:46:25.463
> 
> 标签：c#, asp.net, linq, entity-framework

我正在尝试构建一个函数来根据某些参数动态生成不同的查询。我对 LINQ 语法有点困惑，我不确定我是否做得对。

字符串类型参数集是“search”（搜索文本框值）、“searchfield”（搜索内容）、“limit_begin”、“limit_end”，表示行数和从哪里开始。“order_by”按哪个字段排序。“order_sort”用于排序的方式。

我之前在stackoverflow上发现了这个'getpropertyvalue'反射函数，我希望它可以根据我自己的解释来做我想要的。

```
 private static object GetPropertyValue(object obj, string property)
    {
        System.Reflection.PropertyInfo propertyInfo = obj.GetType().GetProperty(property);
        return propertyInfo.GetValue(obj, null);
    } 
```

* * *

```
if (order_sort == "ASC")
        {
            (from a in entities.UserTable
             where GetPropertyValue(a, searchfield).ToString().Contains(search)
             select a)
                .OrderBy("a." + order_by)
                .Skip(Convert.ToInt32(limit_begin))
                .Take(Convert.ToInt32(limit_end))
                .ToList();
        }
        else if (order_sort == "DESC")
        {
            (from a in entities.UserTable
             where GetPropertyValue(a, searchfield).ToString().Contains(search)
             select a)
                .OrderByDescending("a." + order_by)
                .Skip(Convert.ToInt32(limit_begin))
                .Take(Convert.ToInt32(limit_end))
                .ToList();
        } 
```

**我在“Orderby”行出现错误，** VS2008 用红色突出显示它，表示无法从用法中推断出参数的类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T18:03:36.430

`.OrderBy`and`.OrderByDescending`方法需要一个类型的参数，并且`Func<T, TKey>`您正在传递一个字符串。基本上，它要求您提供一个表达式，它可以用来识别您想要排序的属性。因为你必须从一个字符串开始，我最好的想法是在你的 OrderBy 中使用反射。

`.OrderBy(x => x.GetType().GetProperty(order_by).GetValue(x, null).ToString())`

如您所见，这不是很容易阅读，但应该可以解决问题。您还可以在以下位置查看 LINQ 动态查询库：[http ://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-库.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)。

希望这可以帮助！:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T18:08:20.077

这就是我过去处理这个问题的方式。注意是单列搜索和排序，听起来像你想要的。

```
var users = entities.UserTable;

// Setup the default order column.
Func<SweetEntity, string> orderFunc = u => u.Field1;

switch (searchfield)
{
    case "Field1":
        orderFunc = u => u.Field1;
        users = users.Where(u => u.Field1.Contains(search));
        break;
    case "Field2":
        orderFunc = u => u.Field2;
        users = users.Where(u => u.Field2.Contains(search));
        break;
}

// If you need to get the total count, do it here:
var totalUserCount = users.Count();

// Apply sorting:
if (order_sort == "ASC")
{
    users = users.OrderBy(orderFunc);
}
else
{
    users = users.OrderByDescending(orderFunc);
}

// Apply paging:
users = users.Skip(Convert.ToInt32(limit_begin)).Take(Convert.ToInt32(limit_end)); 
```

除了 Convert.ToInt32，我会做一些其他的事情，比如 int.TryParse，但对于这个例子我没有。

编辑1：

如果您最终想要更强大的搜索，请查看 LinqKit 中的 PredicateBuilder (http://www.albahari.com/nutshell/predicatebuilder.aspx)。

编辑2：

我的示例只是在过滤部分中包含 sting 。当然，您可以为用户请求的特定过滤器自定义所有逻辑。如果他们在一个 int 上进行过滤，您可以将过滤器字符串转换为一个 int，然后可以在 lambda 表达式中与 == 进行比较。就像是：

```
int myId;
if (int.TryParse(search, out myId))
{
    users = users.Where(u => u.SomeIntegerField == myId);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-30T13:56:18.950

原始问题的主题可以通过表达式树和反射轻松实现。

[您可以在我为我的一次演讲制作的 github 存储库中](https://github.com/IKoshelev/EFAdvancedQueryScenarios/blob/master/Services/Model/GridRequest.cs)查看将强类型 Sort \ Filter 从仅字符串列名称和值添加到 EF6 的工作示例

这是链接中类的排序功能示例

```
 public class GridRequestSort
    {
        public string PropName { get; set; }
        public bool IsDescending { get; set; }
    }

        private static IQueryable<T> WrapSort<T>(
            IQueryable<T> query,
            GridRequestSort sort,
            bool isFirst = false)
        {
            var propAccessExpr = GetPropAccesssLambdaExpr(typeof(T), sort.PropName);
            var orderMethodName = "";
            if (isFirst)
            {
                orderMethodName = sort.IsDescending ? "OrderByDescending" : "OrderBy";
            } 
            else
            {
                orderMethodName = sort.IsDescending ? "ThenByDescending" : "ThenBy";
            }

            var method = typeof(Queryable).GetMethods().FirstOrDefault(m => m.Name == orderMethodName && m.GetParameters().Length == 2);
            var genericMethod = method.MakeGenericMethod(typeof(T), propAccessExpr.ReturnType);
            var newQuery = (IQueryable<T>)genericMethod.Invoke(null, new object[] { query, propAccessExpr });
            return newQuery;
        }

        private static LambdaExpression GetPropAccesssLambdaExpr(Type type, string name)
        {
            var prop = type.GetProperty(name, BindingFlags.Public | BindingFlags.Instance | BindingFlags.IgnoreCase);
            var param = Expression.Parameter(type);
            var propAccess = Expression.Property(param, prop.Name);
            var expr = Expression.Lambda(propAccess, param);
            return expr;
        } 
```

# html - CSS虚线边框在IE8中总是显示为白色，为什么？

> ID：11992718
> 
> 赞同：0
> 
> 时间：2012-08-16T17:46:25.700
> 
> 标签：html, css, internet-explorer, border

这是交易，我有以下带有虚线边框的div：

```
.dashed-header {
    /*background-color: transparent;*/
    height: 87px;
    margin-top: 5px;
    border-top: 1px dashed #613e27;
    border-bottom: 1px dashed #613e27;
} 
```

由于某种原因，边框是白色而不是白色`#613e27`，我不知道为什么会这样？这是我的[网页您可以在](http://freshbeer.lv/final/index.html)**深棕色标题行**中看到此边框。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:37:32.247

尝试使用：

```
border-color: #613e27 !important; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T01:46:06.557

我有IE8，它工作正常，我把它放在另一个div里看看颜色是否消失，但颜色仍然存在

```
<style>
.main {
    height: 200px;
    width:200px;
    margin-top: 5px;
    border: 1px solid black;
    background-color:#A1Ae27;
    padding: 15px;
}
.dashed-header {
    /*background-color: transparent;*/
    height: 87px;
    width:100px;
    margin-top: 5px;
    border-top: 1px dashed #613e27;
    border-bottom: 1px dashed #613e27;
}
</style>
<body>

<div class="main">
    <div class="dashed-header">
    </div>
</div>
</body> 
```

尝试更改为实心边框，看看它们是否在您的 EI8 中也出现？**

# jsplumb - 如何在 jsplumb 中从源端点建立多个连接

> ID：11992720
> 
> 赞同：8
> 
> 时间：2012-08-16T17:46:26.257
> 
> 标签：jsplumb

我正在尝试使用 jsplumb 库制作流程图。我需要从一个 div 建立多个连接。Ex- Div 1 应该连接到 Div 2 和 Div 3。我希望源端点相同，即底部中心。请让我知道应该做些什么来完成这项工作谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-25T07:07:11.273

对于目标端点，将其设置为全局以进行无限连接：

```
 var targetEndpoint = {
endpoint: "Dot",
paintStyle: { fillStyle: "blue", radius: 7 },
hoverPaintStyle: endpointHoverStyle,
maxConnections: -1,
dropOptions: { hoverClass: "hover", activeClass: "active" },
isTarget: true,
overlays: [["Label", { location: [0.5, -0.5], label: "", cssClass: "endpointTargetLabel" }]]
}; 
```

对于源端点将其设置为全局以建立无限连接：

```
var sourceEndpoint = {
endpoint: "Dot",
paintStyle: {
    strokeStyle: "green", fillStyle: "green", radius: 3, lineWidth: 1
},
isSource: true,
maxConnections: -1,
connector: ["Flowchart", { stub: [40, 60], gap: 10, cornerRadius: 5, alwaysRespectStubs: true }],
connectorStyle: connectorPaintStyle, hoverPaintStyle: endpointHoverStyle, connectorHoverStyle: connectorHoverStyle,
dragOptions: {},
overlays: [["Label", { location: [0.5, 1.5], label: "", cssClass: "endpointSourceLabel", }]]
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T10:01:23.260

使用以下代码将 div1 连接到 div2 和 div3

```
<html>
 <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
 <script src="http://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
 <script src="/js/JsPlumb/jquery.jsPlumb-1.4.1-all-min.js"></script>

<script type="text/javascript">

$(document).ready(function(){

            $(".inner").draggable({

                containment : ([ ".outer" ]),

            });

        var source = $("#div1");
        var target = $("#div2");
        var target2 = $("#div3");

            jsPlumb.connect({
                source : source,
                target : target
            });
            jsPlumb.connect({
                source : source,
                target : target2
            });

        });

</script>
<style type="text/css">
#outer{

    height: 300px;
    width: 300px;
    /*background-color: red;*/

}
.inner{

    height: 30px;
    width: 30px;
    background-color: yellow;
     margin-bottom: 37px;
}
#div2{
    position: relative; left: 114px; top: -7px;
}

</style>
<body>
    <div id="outer">

        <div class="inner" id="div1">
        </div>
        <div class="inner" id="div2">
        </div>
        <div class="inner" id="div3">
        </div>

    </div>

</body>
</html> 
```

添加 jsPlumb 库

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-26T17:50:57.243

配置 jsplumb 以使用静态锚点 - [https://jsplumbtoolkit.com/community/doc/anchors.html#static](https://jsplumbtoolkit.com/community/doc/anchors.html#static)

# jakarta-ee - 如何将我的域名映射到我的系统中安装的具有静态 IP 的 TOMCAT 服务器中的应用程序？

> ID：11992726
> 
> 赞同：0
> 
> 时间：2012-08-16T17:46:38.643
> 
> 标签：jakarta-ee, tomcat7, web-hosting

我计划托管基于 JSP 的私有服务器。我有静态 IP，并且我已将域管理器帐户中的名称服务器重定向到该 IP。我想知道如何将 www.domainname.com 映射到 tomcat 服务器中的特定应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:54:55.627

您很可能想要替换 Tomcat 的根 Web 应用程序，这里有一个关于该主题的相当长的线程，[讨论](https://stackoverflow.com/questions/715506/tomcat-6-how-to-change-the-root-application)了执行此操作的不同方法，以及如何避免在此过程中丢失 Tomcat 管理器。

# c# - 尝试呈现中继器控件时出现表单标记错误

> ID：11992732
> 
> 赞同：0
> 
> 时间：2012-08-16T17:47:08.730
> 
> 标签：c#, asp.net

尝试呈现我的转发器的 html 时，我收到表单标签错误（...必须放在带有 runat=server. 在 System.Web.UI.Page.VerifyRenderingInServerForm... 的表单标签内）。

渲染调用：

```
System.Text.StringBuilder stringbuilder = new System.Text.StringBuilder();
StringWriter stringwriter = new StringWriter(stringbuilder);
HtmlTextWriter htmltextwriter = new HtmlTextWriter(stringwriter);
rptEvaluation.RenderControl(htmltextwriter);//repeater control

content += stringbuilder.ToString(); //content is a string variable. 
```

没有渲染组件，页面和背后的代码可以正常工作。

有什么想法吗？

谢谢，亚当。这是我的中继器

```
<asp:Repeater ID="rptEvaluation" runat="server" OnItemDataBound="rptEvaluation_OnItemDataBound">
<HeaderTemplate>
<table>
<tr>
<th>Category Name</th>
</tr>
</HeaderTemplate>

<AlternatingItemTemplate>
<asp:HiddenField ID="hfCatID" runat="server" Value='<%#Eval("CategoryId") %>' />
<tr style="background-color:#eee;">
<td><%# DataBinder.Eval(Container.DataItem, "Category") %></td>
</tr>
<tr>
<td>
<asp:Repeater ID="rptCategoryQuestions" runat="server">
                    <HeaderTemplate>
                        <table>
                            <tr>
                            <th>Question ID</th>
                            <th>Question</th>
                            <th>Student score</th>
                            </tr>
                    </HeaderTemplate>
                    <ItemTemplate>
                    <asp:HiddenField ID="hfQuestID" runat="server" Value='<%#Eval("QuestionID") %>' />
                            <tr>
                                <td><%# DataBinder.Eval(Container.DataItem, "QuestionID") %></td>
                                <td><%# DataBinder.Eval(Container.DataItem, "Question") %></td>
                                <td>
                                    <asp:RadioButtonList ID="rblScore" runat="server">
                                        <asp:ListItem Text="Approaching" Value="1"></asp:ListItem>    
                                        <asp:ListItem Selected="True" Text="Meets" Value="2"></asp:ListItem>    
                                        <asp:ListItem Text="Exceeds" Value="3"></asp:ListItem>    
                                    </asp:RadioButtonList>
                               </td>
                            </tr>
                        </ItemTemplate>
                    <AlternatingItemTemplate>
                    <asp:HiddenField ID="hfQuestID" runat="server" Value='<%#Eval("QuestionID") %>' />
                            <tr>
                                <td><%# DataBinder.Eval(Container.DataItem, "QuestionID") %></td>
                                <td><%# DataBinder.Eval(Container.DataItem, "Question") %></td>
                                <td>
                                    <asp:RadioButtonList ID="rblScore" runat="server">
                                        <asp:ListItem Text="Approaching" Value="1"></asp:ListItem>    
                                        <asp:ListItem Selected="True" Text="Meets" Value="2"></asp:ListItem>    
                                        <asp:ListItem Text="Exceeds" Value="3"></asp:ListItem>    
                                    </asp:RadioButtonList>
                               </td>
                            </tr>
                     </AlternatingItemTemplate>
                    <FooterTemplate>
                        </table>
                    </FooterTemplate>
                </asp:Repeater>
            </td>
        </tr>
</AlternatingItemTemplate>

<ItemTemplate>
    <asp:HiddenField ID="hfCatID" runat="server" Value='<%#Eval("CategoryId") %>' />
        <tr style="background-color:#666;">
            <td><%# DataBinder.Eval(Container.DataItem, "Category") %></td>
        </tr>
        <tr>
            <td>
                <asp:Repeater ID="rptCategoryQuestions" runat="server">
                    <HeaderTemplate>
                        <table>
                            <tr>
                            <th>Question ID</th>
                            <th>Question</th>
                            <th>Student Score</th>
                            </tr>
                    </HeaderTemplate>
                    <ItemTemplate>
                    <asp:HiddenField ID="hfQuestID" runat="server" Value='<%#Eval("QuestionID") %>' />
                            <tr>
                                <td><%# DataBinder.Eval(Container.DataItem, "QuestionID") %></td>
                                <td><%# DataBinder.Eval(Container.DataItem, "Question") %></td>
                                <td>
                                    <asp:RadioButtonList ID="rblScore" runat="server">
                                        <asp:ListItem Text="Approaching" Value="1"></asp:ListItem>    
                                        <asp:ListItem Selected="True" Text="Meets" Value="2"></asp:ListItem>    
                                        <asp:ListItem Text="Exceeds" Value="3"></asp:ListItem>    
                                    </asp:RadioButtonList>
                               </td>
                            </tr>
                        </ItemTemplate>
                    <AlternatingItemTemplate>
                    <asp:HiddenField ID="hfQuestID" runat="server" Value='<%#Eval("QuestionID") %>' />
                            <tr>
                                <td><%# DataBinder.Eval(Container.DataItem, "QuestionID") %></td>
                                <td><%# DataBinder.Eval(Container.DataItem, "Question") %></td>
                                <td>
                                    <asp:RadioButtonList ID="rblScore" runat="server">
                                        <asp:ListItem Text="Approaching" Value="1"></asp:ListItem>    
                                        <asp:ListItem Selected="True" Text="Meets" Value="2"></asp:ListItem>    
                                        <asp:ListItem Text="Exceeds" Value="3"></asp:ListItem>    
                                    </asp:RadioButtonList>
                               </td>
                            </tr>
                     </AlternatingItemTemplate>
                    <FooterTemplate>
                        </table>
                    </FooterTemplate>
                </asp:Repeater>
            </td>
        </tr>
    </ItemTemplate>
<FooterTemplate>
     </table>
</FooterTemplate> 
```

'

# c# - 在 ASP.Net 图表中为轴 y 创建自定义标签作为字符串

> ID：11992733
> 
> 赞同：3
> 
> 时间：2012-08-16T17:47:17.277
> 
> 标签：c#, asp.net

我`axisY`在 ASP.NET 的图表中有一个 3 点轴。现在它显示 1、2 和 3。我需要为这些点分配字符串值。我发现它在这里的某个地方：

```
Chart1.ChartAreas[0].AxisY.CustomLabels.Add(??????); 
```

不知道如何让它不必`double`取值并能够为该点分配一个字符串。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-16T18:29:54.127

您必须创建一个自定义标签，设置其属性，然后将其添加到轴

那这个呢？

```
 CustomLabel label = new CustomLabel();

    label.FromPosition = -1.0;
    label.ToPosition = 1.0;
    label.Text = "0";
    label.RowIndex = 0;

    Chart1.ChartAreas[0].AxisY.CustomLabels.Clear();
    Chart1.ChartAreas[0].AxisY.CustomLabels.Add(label); 
```

这将在 Y 轴与 X 轴相交处呈现 0。

# iphone - 地理标记/绘图 MapKit 核心定位

> ID：11992738
> 
> 赞同：1
> 
> 时间：2012-08-16T17:48:45.697
> 
> 标签：iphone, xcode, core-location, mapkit

我创建了一个应用程序，它使用 MapKit 在谷歌地图上简单地显示用户的当前位置。

但是，我现在想更进一步，通过允许用户自己在地图上绘制点来为应用程序添加更多功能。

我以某种方式相信使用 CoreLocation 将通过接收和保存用户在地图上选择的位置的坐标来实现这一点。

我这样说对吗？以及我将如何实现这一点的任何想法？链接或教程也会很有帮助，而且任何个人经验/想法都会很棒。

我在这个应用程序之前创建了一个实现 coreLocation 的应用程序，编译/运行完美..只是没有更新用户位置和纬度/经度。该应用程序的代码如下所示：

这仅在 AppDelegate.m 中，它基本上完成了所有工作。

```
#import "AppDelegate.h"
#import "ViewController.h"

@implementation AppDelegate

@synthesize window;
@synthesize viewController;
@synthesize locationManager;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    self.locationManager = [[CLLocationManager alloc]init];
    if ([CLLocationManager locationServicesEnabled]) {
        self.locationManager.delegate = self;
        self.locationManager.distanceFilter = 100;
        [self.locationManager startUpdatingLocation];
    }
}

- (void)applicationWillTerminate:(UIApplication *)application
{
}

#pragma mark CLLocationManagerDelegate Methods

-(void) locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation{
    MKCoordinateSpan span;
    span.latitudeDelta = 0.2;
    span.longitudeDelta = 0.2;

    MKCoordinateRegion region;
    region.span = span;
    region.center = newLocation.coordinate;

    [viewController.mapView setRegion:region animated:YES];
    viewController.mapView.showsUserLocation = YES;

    viewController.latitude.text = [NSString stringWithFormat:@"%f", newLocation.coordinate.latitude];
    viewController.latitude.text = [NSString stringWithFormat:@"%f", newLocation.coordinate.longitude];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:04:01.273

您是注册的 iOS 开发者吗？Apple 的代码示例包括一些地图应用程序，它们应该可以帮助您入门。

由于您在在线搜索教程时没有任何运气，这里有一些可能会有所帮助的术语

**MKAnnotation**：你用来在地图上标记位置的东西（一个图钉、一个标志、一些文本） **UIGestureRecognizer**：使用其中一个来找出用户何时触摸了地图，寻找触摸并按住事件是一个好兆头，他们想要标记它，因为触摸和拖动将用于在 **MKMapPoint**周围移动地图：iOS 中使用的平面地球地图上的一个地方。请记住，这些与 CLLocationCoordinate2D 的经度和纬度不同，但您可以轻松地在它们之间进行转换。

# iphone - 如何确保 iOS 设备安全

> ID：11992739
> 
> 赞同：1
> 
> 时间：2012-08-16T17:48:47.737
> 
> 标签：iphone, ios, ipad, security, uuid

应用程序有什么方法可以验证 iDevice 是否受密码保护？如果没有，有没有办法确保应用程序只能在“受保护”设备列表上安装/运行？UUID 现在已贬值，但是否存在任何替代方案？有免费的设备管理程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:39:59.597

有一种方法可以推断设置了密码：查询 UIApplication 对象上的 protecteddataAvailable 属性。

如果不使用 MDM 解决方案来管理设备和安装应用程序，我认为没有办法防止您的应用程序安装在不安全的设备上。即便如此，用户也可以手动安装。您可以在我们的应用程序中做的是在启动时测试是否有密码，如果没有则通知用户。

# objective-c - 尝试使用复制的 NSMutableString 属性会导致异常

> ID：11992742
> 
> 赞同：5
> 
> 时间：2012-08-16T17:49:05.637
> 
> 标签：objective-c, cocoa, nsmutablestring, declared-property

我开始了一个小型 Xcode 项目来调查一个`NSMutableString`属性是否应该是`copy`或`retain`. 我用属性声明了我的`copy`属性：

```
@property (nonatomic,copy) NSMutableString *stringA; 
```

然后将其初始化为`self.stringA = [NSMutableString new];`

最后尝试设置一个字符串`[stringA setString:@"A"];`。

然而，该程序给出，

> “由于未捕获的异常'NSInvalidArgumentException'而终止应用程序，原因：'尝试使用 setString 改变不可变对象：'”

是因为结果字符串是 a`NSString`吗？这是否意味着我应该`NSMutableString`使用`retain`属性和`NSString`属性声明我的属性`copy`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-16T17:55:44.317

你是对的，`copy`方法`NSMutableString`返回一个*不可变* `NSString`的。这是 Cocoa 中的约定，它也适用于`NSMutableArray`,`NSMutableDictionary`等。

因此，如果您希望您的属性保持可变，则应将其声明为`retain`. 如果您需要复制语义，但仍希望结果是可变的，则必须为属性实现自己的设置器（并用于`mutableCopy`进行复制）。

您经常看到`copy`字符串属性的原因是，通常需要保证字符串是不可变的，而不管分配给属性的字符串类型如何。否则，您最终可能会意外地在其他地方修改相同的字符串，这可能很难调试。不可变对象还具有线程安全的优点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-16T17:52:48.037

我要问的第一个问题是 stringA 是如何初始化的。如果您从普通字符串设置它，那么这可能就是您得到它的原因。复制和保留实际上执行不同，您应该知道为什么要使用其中一种。

Copy 实际上是在制作内存的副本，以便您对该属性所做的任何更改都不会影响它设置的原始内容，其中保留只会增加内存的保留计数，因此您可以确保在完成之前不会释放它引用它。

# asp.net-mvc - 从 Application_Start 获取服务器端口

> ID：11992744
> 
> 赞同：2
> 
> 时间：2012-08-16T17:49:10.050
> 
> 标签：asp.net-mvc

我需要能够在启动时获取我的 MVC 实例使用的 Web 端口，因为它可能会因站点而异。大多数关于如何获取端口的答案都涉及从请求对象中获取它，该对象在 Application_Start 中不存在。有没有其他方法可以获取？

我试图这样获取它：

```
HttpContext.Current.Request.ServerVariables["SERVER_PORT"] 
```

但这会引发异常

> “System.Web.HttpException (0x80004005)：请求在此上下文中不可用”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:59:49.320

`Application_Start`AFAIK在 IIS 7+ 中以集成管道模式托管时无法做到这一点。有一种解决方法，尽管涉及`Application_BeginRequest`仅在第一个请求上使用一次应用程序初始化。查看以下答案：[https](https://stackoverflow.com/a/4243338/29407) ://stackoverflow.com/a/4243338/29407 。此答案的灵感来自[以下博客文章](http://mvolo.com/iis7-integrated-mode-request-is-not-available-in-this-context-exception-in-applicationstart)。

另一种可能性当然是重新考虑为什么需要知道服务器端口`Application_Start`以及是否不能做其他事情。

# python - Web2py - 如何在一个视图中编辑用户个人资料和成员资格？

> ID：11992749
> 
> 赞同：1
> 
> 时间：2012-08-16T17:49:27.440
> 
> 标签：python, web2py

我有一个自定义表单来编辑（更新表单）“auth_user”对象，但我需要以相同的形式编辑他的“auth_membership”

我怎样才能做到这一点？

为了一种简单的方法，我尝试在 auth_user 表中添加对 auth_membership 表的引用，但结果是：键入“exceptions.KeyError”“auth_membership”。

有一个干净的方法来编辑这个添加的字段（角色）的用户吗？

我在 auth_group 中有组定义，在 auth_membership 中有用户组关系。

提前致谢。
基督教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T02:16:02.390

我为此找到的最简单的方法是将**SQLFORM**用于用户表单，**将 SQLFORM.grid**用于会员面板。此外，我认为有一个网格来列出用户会很有用。

所以我创建了一个解决方案，它在 ajax 面板中显示用户**表单**和**成员资格。**

看看我的编码博客：[以相同的形式管理用户和会员](http://rochacbruno.com.br/web2py-manage-users-and-membership-in-the-same-form/)

# matlab - matlab sftool和截断系数

> ID：11992752
> 
> 赞同：0
> 
> 时间：2012-08-16T17:49:33.443
> 
> 标签：matlab

我试过使用`sftool`. 并且使用多项式拟合（在 sftool 中）在曲面拟合工具窗口中获得了令人满意的拟合图。但是，当我在多项式方程中使用系数（从 sftool 获得）并尝试绘制时 - 得到了与原始曲线不同的曲面图。

我发现问题是由于[Matlab cftool 中讨论的截断系数问题产生了错误的系数](https://stackoverflow.com/questions/9756890/matlab-cftool-producing-wrong-coefficients)

但是上述链接中的解决方案是针对 2d 曲线拟合，而不是针对 3d 曲面拟合。

如何解决 3d 案例中的问题？

另外，有没有其他合适的方法来拟合我的数据（使用参数）？

我的数据是：

```
X =
   [ 1.321  1.3307 1.3404 1.3534 1.3681 1.3799 1.3898 1.3973 1.4048 1.4123 1.4202 1.4272 1.4372 1.4493 1.4619 1.4749 1.4892 1.5043 1.5165 1.53   1.5447 1.5569 1.5607 1.5653 1.5703 ;
     1.3375 1.3476 1.3602 1.3715 1.3824 1.3933 1.4041 1.4158 1.427  1.4387 1.4483 1.4563 1.465 1.4734  1.4809 1.4885 1.4968 1.504  1.5132 1.5178 1.5237 1.5283 1.5392 1.5527 1.5707 ;
     1.2998 1.3121 1.323  1.3335 1.3487 1.3639 1.3752 1.384  1.3929 1.4008 1.4084 1.4147 1.4214 1.4293 1.4397 1.4519 1.4644 1.4778 1.4882 1.4987 1.5079 1.5196 1.5305 1.5418 1.5704 ];

Y =
   [ 18.301  18.301  18.301  18.301  18.301  18.301  18.301  18.301  18.301  18.301  18.301  18.301  18.301  18.301  18.301  18.301  18.301  18.301  18.301  18.301  18.301  18.301  18.301  18.301  18.301  ;
     18.5185 18.5185 18.5185 18.5185 18.5185 18.5185 18.5185 18.5185 18.5185 18.5185 18.5185 18.5185 18.5185 18.5185 18.5185 18.5185 18.5185 18.5185 18.5185 18.5185 18.5185 18.5185 18.5185 18.5185 18.5185 ;
     18.8261 18.8261 18.8261 18.8261 18.8261 18.8261 18.8261 18.8261 18.8261 18.8261 18.8261 18.8261 18.8261 18.8261 18.8261 18.8261 18.8261 18.8261 18.8261 18.8261 18.8261 18.8261 18.8261 18.8261 18.8261 ];

Z = 
   [ 1.0515 1.0773 1.103  1.1459 1.2489 1.4034 1.6953 1.9528 2.2189 2.485  2.7425 3.0086 3.2661 3.4464 3.5923 3.7124 3.8155 3.9099 3.9871 4.0644 4.1245 4.1588 4.1674 4.1931 4.1931 ;
     1.0086 1.0343 1.103  1.1803 1.3348 1.5494 1.7983 2.0815 2.3906 2.6652 2.8712 3.0086 3.1974 3.3691 3.4464 3.5579 3.6781 3.7382 3.824  3.8927 3.9356 3.9957 4.0901 4.1416 4.2275 ;
     1.3519 1.3348 1.3777 1.3777 1.3605 1.3691 1.412  1.4635 1.5236 1.5923 1.6781 1.7811 1.8755 2.03   2.2361 2.4506 2.691  2.9227 3.0944 3.2747 3.4034 3.5579 3.6867 3.824  4.03 ]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:45:46.753

您引用的问题中 OP 的解决方案是不使用`cftool`. 相反，OP 必须使用`polyfit`. 你不能使用 polyfit 工具来解决你的 3d 问题，尽管在谷歌上快速搜索“Matlab Polyfit 3d”[这个讨论](http://www.mathworks.com/matlabcentral/newsreader/view_thread/168706)是第一次点击，它应该有你解决问题所需的一切。

# javascript - 如果正确答案，身体负荷！有任何想法吗？

> ID：11992754
> 
> 赞同：0
> 
> 时间：2012-08-16T17:49:54.210
> 
> 标签：javascript, jquery, if-statement, onload, cover

伙计们，我在我的网站上找不到这样做的方法。我需要涵盖整个网站的东西（可以是黑色背景的 div 或图像，等等），并且在正文加载之前出现问题。

该人在输入中键入答案并提交，如果答案是正确的（答案可以在 html 上可见）然后加载正文，或者覆盖页面的黑色背景的 div 消失，显示网站。

任何涵盖网站且仅在输入某个单词后才加载正文的内容。有谁能够帮我？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:52:13.333

你用 jQuery 标记了这个问题，所以我建议使用`modal=true`.

请参阅jQuery 网站上的模态表单[示例](http://jqueryui.com/demos/dialog/#modal-form)。您将从一个`$(document).ready`块中打开对话框，并且仅当用户在表单中输入正确的值时才关闭它。

请记住，知道如何使用浏览器的开发人员工具栏的用户可以绕过您提出的任何建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:55:32.137

好吧，我认为你需要使用服务器端脚本来做类似的事情......
例如使用 php、asp、python 等验证答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T18:01:37.873

用你想问的问题或任何你想要的东西制作一个 HTML 页面。

为 servlet 设置一个带有操作的提交按钮，当用户在回答您的问题后点击提交按钮时，如果答案为真，您将检查 servlet，`request.getParameter`
您将设置一个 URL 为第一个您网站的页面，
如果它是错误的，您会将 URL 设置为他所在的第一页...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T17:53:41.260

`display: none`如果答案正确，您可以使用隐藏身体的其余部分（包含在 div 中）并更改该属性。

使用模式是另一种选择，在`$(function(){})`or`document.ready`块中使用 jQueryUI。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T17:54:38.783

不要认为它阻止身体加载，然后在人们输入答案后允许它。从两个开始`<div>`，一个包含问题，一个包含正文内容。最初隐藏“正文”`div`并在用户回答问题后显示。

您的问题将在 body 标签内，因此您永远隐藏整个`body`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T21:09:50.827

见[http://jsfiddle.net/AMVA3/](http://jsfiddle.net/AMVA3/)

您可以将以下代码添加到`<head>`，因此它将在`<body>`加载之前执行：

```
var ask=prompt('Write answer here:',"answer");
if(ask!="answer"){
    //If the answer is wrong, we stop the document's loading
    if(window.stop){
        window.stop();
    }else if(document.execCommand){
        document.execCommand('Stop');
    }else{
        document.write('<!--');
    }
} 
```

因此，当您提出问题时，页面只是白色的，因为正文尚未加载。如果答案正确，则继续加载文档。如果没有，它将停止加载。

注意：我已经从[How to stop page load in html static page 中获取了停止文档加载的代码](https://stackoverflow.com/questions/8943219/how-to-stop-page-load-in-html-static-page)

**编辑：**

如果要提醒“错误答案！”，请检查是否错误后添加。

在这里看到它：http: [//jsfiddle.net/AMVA3/1/](http://jsfiddle.net/AMVA3/1/)

```
var ask=prompt('Write answer here:',"answer");
if(ask!="answer"){
    alert("Wrong answer!!");
    if(window.stop){
        window.stop();
    }else if(document.execCommand){
        document.execCommand('Stop');
    }else{
        document.write('<!--');
    }
} 
```

**编辑2：**

奇怪的是，前面的代码的警报对你不起作用。对我来说它有效。

但是如果你想避免只加载一个 div，你可以使用注释。

在这里看到它：http: [//jsfiddle.net/AMVA3/3/](http://jsfiddle.net/AMVA3/3/)

HTML：

```
<div class="a">
    You should se me
</div>
<div id="cover"></div>
<script type="text/javascript">
var wrongAnswer=prompt('Write answer here:',"answer")!="answer";
document.getElementById('cover').style.display='none';
if(wrongAnswer){
    alert("Wrong answer!!");
    document.write('<!--');
}
</script>
<div class="a hide">
    If you see me, you have written the right answer!
</div>
<script type="text/javascript">
if(!wrongAnswer){
    document.write('<!-- ');
}
</script>
-->
<div class="a">
    You should see me too
</div> 
```

CSS：

```
#cover{position:fixed;top:0;left:0;height:100%;width:100%;
    background:yellow;/* Set it to the color that you want */
} 
```

# ruby-on-rails-3 - 将生成的图像文件另存为回形针附件

> ID：11992758
> 
> 赞同：2
> 
> 时间：2012-08-16T17:50:07.253
> 
> 标签：ruby-on-rails-3, paperclip, minimagick

我有一个使用`rqrcode-rails3`gem 为某些字符串生成 QR 码的方法：

```
def generate_qrcode(string, options={})
  format = options[:format] || :png
  size   = options[:size]   || RQRCode.minimum_qr_size_from_string(string)
  level  = options[:level]  || :h

  qrcode = RQRCode::QRCode.new(string, size: size, level: level)
  svg    = RQRCode::Renderers::SVG::render(qrcode, options)

  image = MiniMagick::Image.read(svg) { |i| i.format "svg" }
  image.format "png" if format == :png
  image
end 
```

新生成的图像将附加到模型对象并使用以下方法存储在数据库中`paperclip`：

```
has_attached_file :qrcode_png
has_attached_file :qrcode_svg 
```

当我尝试附加图像时：

```
label.qrcode_png = generate_qrcode(label.id.to_s)
label.save! 
```

并得到一个异常*Paperclip::AdapterRegistry::NoHandlerError*

> 未找到 MiniMagick::Image:0x007fa629e71388 @path="/var/folders/fs/yf7s27kj27n3lmdywp4tgcm80000gn/T/mini_magick20120816-2170-1w6vbz.png", @tempfile=# 的处理程序

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:09:50.283

好，我知道了。我必须返回一个文件对象而不是`MiniMagick::Image`：

```
File.open(image.path) 
```

然后`paperclip`可以从文件系统中找到并读取文件并保存。

# asp.net-mvc - 来自 MVC 控制器的 Knockout js 外部模板

> ID：11992764
> 
> 赞同：1
> 
> 时间：2012-08-16T17:50:32.400
> 
> 标签：asp.net-mvc, knockout.js

我有一个 Knockout js viewModel 并希望使用外部模板来获取 MVC 4 razor (cshtml) 绑定页面，因此可以在服务器上创建初始页面或通过 Knockout 绑定，我将在运行时决定。我想像这样将模板的名称传递给控制器​​（/Templates/KnockoutTemplate?templateName='gauge'），其中“gauge”是视图的名称（radial.tmpl.cshtml），并让 Knockout 将其放入模板块。

我的控制器：

```
public class TemplatesController : Controller
{
     public TemplatesViewModel viewModel { get; set; }
     public TemplatesController()
     {
        this.viewModel = new TemplatesViewModel { Heading = "Radial" };
     }

    public ActionResult KnockoutTemplate(string templateName)
    {
        // is this right?
        return  PartialView(templateName, this.viewModel);
    }
} 
```

径向.cshtml

```
 @model MVC4.Models.TemplatesViewModel
    @{
        ViewBag.Title = "Radial Template";
    }
    <div id="radialDashboardWidget" class="dashboardWidget" style="width: 100%">
     <h4 class="bold">@Model.Heading </h4>
     <!-- or I can do this, I'll decide at development time  -->
     <h4 class="bold" data-bind="text:heading"></h4>
    </div> 
```

主页

```
<div id="dashboardWidgets" data-bind="foreach: Widgets" class="flexible-widget">
 <!-- ko template: {name: Properties.templateName  } -->
 <!-- /ko -->
 <div class="clear" />
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T22:11:18.150

我在这里回答了这个问题：http: [//geekswithblogs.net/Aligned/archive/2012/08/17/knockout-js-and-external-mvc-cshtml-templates.aspx](http://geekswithblogs.net/Aligned/archive/2012/08/17/knockout-js-and-external-mvc-cshtml-templates.aspx)

我的控制器：

```
public class TemplatesController : Controller
{
    public TemplatesViewModel viewModel { get; set; }

    public ActionResult KnockoutTemplate(string templateName)
    {
        return  PartialView(templateName.Replace("/", string.Empty), this.viewModel);
    }
} 
```

径向.cshtml

```
@model MVC4.Models.TemplatesViewModel
@{
    ViewBag.Title = "Radial Template";
}

<div id="radialDashboardWidget" class="dashboardWidget" style="width: 100%">
    <h4 class="bold" data-bind="text:@Model.Heading"></h4>
    <!-- add more HTML -->
</div> 
```

带有 Knockout 的仪表板页面

```
<div id="dashboardWidgets" data-bind="foreach: Widgets" class="flexible-widget">
    <!-- ko template: {name: Properties.templateName  } -->
    <!-- /ko -->
    <div class="clear" />
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:05:13.293

不确定你想达到什么目标。在您的 cshtml 中，您“绑定”了服务器端模型对象，而不是客户端 JavaScript 对象的可观察属性。你没有在那里使用 Knockout。请发布获取小部件对象的 Javascript，以便我们为您提供帮助。

# location - 如何使用foursquare API 获得给定城市中最多签到的场所？

> ID：11992768
> 
> 赞同：1
> 
> 时间：2012-08-16T17:50:46.690
> 
> 标签：location, foursquare

[搜索 API](https://developer.foursquare.com/docs/venues/search)为我提供了城市中的场所列表，但没有明显的`usersCount`或顺序`checkinsCount`。有的有十几个，有的有几千个。有没有办法让它们按这些计数中的任何一个进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:49:15.687

无法按总签到或总用户数显式搜索/排序。

最好的选择是依靠使用实时流行度的[/venues/trending或使用 intent=browse 的](https://developer.foursquare.com/docs/venues/trending)[/venues/search](https://developer.foursquare.com/docs/venues/search)来获得某个地区的“最重要”的场所。

# android - 检索 SharedPreference 中的所有值 - Monoandroid

> ID：11992772
> 
> 赞同：0
> 
> 时间：2012-08-16T17:51:20.550
> 
> 标签：android, dictionary, xamarin.android, sharedpreferences, key-value

我们如何检索 SharedPreferences - Monoandroid 中的所有值？

**上下文：** 我有一个名为“ActivatedModuleList”的 SharedPreference。ActivatedModuleList 里面的值如下

```
<?xml version='1.0' encoding='utf-8' standalone='yes' ?>
<map>
<string name="1006">Level6-PrimaryHolder Access</string>
<string name="1007">Level7-SecondaryKey Access</string>
</map> 
```

更多的键/值将被添加或可能从这个“ActivatedModuleList”中删除。在某些时候，我需要从这个 SharedPreferences 中读取所有键值对。

***问题：***

我们如何通过 Monoandroid 检索 SharedPreferences 中的所有值？

**或** 从 Net 获得这个 java 代码，什么是 Monodroid 等价物

```
Map<String, ?> prefsMap = sharedPreferences.getAll();
for (Map.Entry<String, ?> entry: prefsMap.entrySet())
{
   Log.v("SharedPreferences", entry.getKey() + ":" + entry.getValue().toString());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T08:28:53.483

有了这个，您可以遍历所有首选项：

```
ISharedPreferences prefs = PreferenceManager.GetDefaultSharedPreferences(this);

foreach (KeyValuePair<string, object> preference in prefs.All)
{
    Log.Verbose("SharedPreferences", String.Format("{0}:{1}", preference.Key, preference.Value));
} 
```

# asp.net-mvc - 仅在浏览到子域时找不到默认角色提供程序

> ID：11992775
> 
> 赞同：1
> 
> 时间：2012-08-16T17:51:32.327
> 
> 标签：asp.net-mvc, web-config, roleprovider

在 WinHost 上，我有一个工作域。今天我为其添加了一个子域，配置了 IIS 并添加了将请求重定向到 subd.domain.com/subd 的规则。域和子域都是 mvc3 应用程序都有 web.config。我的域使用 mycustomMembershipProvider 和 mycustomROleprovider。但子域使用 AspnetSqlMembershipProvider。域仍在工作，但是当我浏览到 subd.Mydomian.com 时，它会生成“找不到默认角色提供程序”。它指向域的 web.config 和 myCustomRoleProvider。谢谢你的建议。

# c - AtMega16 LED 立方体

> ID：11992781
> 
> 赞同：0
> 
> 时间：2012-08-16T17:52:03.270
> 
> 标签：c, avr, atmega16

该代码适用于 LED 立方体，我想添加新功能。当有人点击连接到 PORTB0 的按钮时，当前的灯光效果应该改变。

我尝试了一些东西，但它不起作用。

程序为ATmega16，代码用Atmer Studio 6编写

[代码](http://pastebin.com/eRWWL2U3)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:20:04.503

```
void delay_ms(uint16_t x)
{
 uint8_t y, z;
  for ( ; x ; x--){  
    for ( y = 0 ; y < 90 ; y++)
     {   
      for ( z = 0 ; z < 6 ; z++)
      {   
          if(PINB)
              {   
                  ++i%=4;                  
                  return;                 
              }    
       asm volatile ("nop");

       }              
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T03:19:17.610

连接到 B0 的电路是什么样的？

假设开关的一侧连接到 B0，另一侧连接到地面，那么您的方向和上拉值都很好，但是您的 if 语句应该在按下按钮时寻找 PINB 的位 0 从 1 变为 0。上拉打开后，未按下按钮时该位为 1，按下时为 0。

在您的代码中，您将输入视为“边缘”，但实际上它是“级别”我的意思是，从 CPU 的角度来看，按下按钮会在很长一段时间内改变输入信号。您想更改过渡效果

这里还有一个问题，就是开关去抖动。按下开关时，它不会直接从关闭变为打开。转换过程中会出现噪音，看起来就像您的代码按下了许多按钮。

去抖动可以在硬件或软件中完成。在软件中，我会在 delay_ms 的内部循环中执行以下操作：

```
static unsigned int debounce; 
static const unsigned int presscount = 500;
if ((PINB&1)==0) { // switch is pressed
    if (debounce < presscount ) {
        ++debounce;
    }
} 
else {
    if (debounce > 0) {
        --debounce;
    }
}
if (debounce == presscount ) {
    // switch has been pressed long enough 
    debounce = 0; // reset
    i = (i+1)%4;
    return;
} 
```

这将最多每 500 个循环时间增加一次效果。如果您一直按住按钮，效果将继续变化。您可能需要修改代码，使其在开关关闭一段时间后才再次增加效果，这样无论按住多长时间，每次按下都只会增加一次。对于上面的代码，您可以使用“presscount”常量来查看它的作用。

希望有帮助。

# git - 如何在未初始化的本地空存储库中撤消“git add -A”（同时将文件保留在我的计算机上）？

> ID：11992785
> 
> 赞同：1
> 
> 时间：2012-08-16T17:52:18.713
> 
> 标签：git, msysgit, git-log, git-add

我刚开始学习 Git 和 Ruby on Rails，在我的 Windows 7 机器上的 cmd 提示符下，我不小心`git add -A`在我的`C:\Users\myusername`.

我的所有文件都已添加，但在 Git 上本地未跟踪。显然，我不想删除它们——它们都是我的用户文件。但是，由于它是一个空仓库，我找不到如何取消跟踪它们并清理 git。`git status`和`git log`响应如下。

```
PS C:\Users\myusername> git status
# On branch master
#
# Initial commit
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
***All files listed***
nothing added to commit but untracked files present (use "git add" to track)

PS C:\Users\myusername> git log
fatal: bad default revision 'HEAD' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:07:35.767

您发布的输出`git status` **与您所描述的不符：**

```
# On branch master
#
# Initial commit
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
***All files listed***
nothing added to commit but untracked files present (use "git add" to track) 
```

此消息意味着：

*   是的，我们在一个 Git repo ( `On branch master`)
*   我们还没有提交任何东西 ( `Initial commit`)
*   目录中存在一堆不属于您的 Git 存储库的文件（`Untracked files`后跟`***All files listed***`）
*   并且索引是干净的 ( `nothing added to commit`)

如果确实如此，那么只需删除`.git`存在的文件夹`C:\Users\myusername`（是的，有**一个**）就可以了。

但是你写的是你做了一个`git add -A`. 在这种情况下，`***All files listed***`应该出现在 下`Changes to be committed:`。尽管如此，在这种情况下，删除您的`.git`文件夹也不会损害您的文件。它只会删除回购信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T08:09:25.023

## 没做什么

假设你想在你的主目录中有一个 git repo，你不需要做任何事情，因为：

```
C:\Users\myusername> git status
# On branch master
#
# Initial commit 
```

这表明您没有当前的 git 历史记录 - 您的 git repo 是空的

```
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
***All files listed*** 
```

这是列出存在的、尚未跟踪且未被忽略的文件 - 它列出了所有内容，因为所有内容都是未跟踪的文件。

## git添加-A

你没有（通过问题中的 git status 的输出）运行这个命令，至少没有在这个 repo 上运行。如果您确实运行此命令，则 git status 的输出将完全不同。你会看见：

```
C:\Users\myusername> git status
# On branch master
#
# Initial commit
#
# Changes to be committed:
#   (use "git rm --cached <file>..." to unstage
***All files listed*** 
```

仔细阅读最后两行注释，以及您在问题中的输出。“要提交的更改”和“未跟踪的文件”的含义非常非常不同。在问题中*没有*添加任何内容。在上面 - 一切都被分阶段提交 - 并且可以取消分阶段`git rm -r --cached .`

## 跟踪的文件

跟踪的文件是 git 正在监视更改等的文件。**联合国**跟踪的文件是其他所有文件-您在问题中所遇到的可能是一个误解。您可以使用此示例序列向自己展示这一点：

```
cd C:\Users\myusername
rmdir /S .git
git status
# error message
git init
git status
# On branch master
#
# Initial commit
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
***All files listed*** 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T17:57:31.740

只需删除 C:\Users\myusername\.git 文件夹。请注意，它可能是不可见的。

**编辑**

这可能是您需要的：

> git rm -r --cached 。

这不会修改您的文件系统。

# php - PHP：从外部脚本发送电子邮件

> ID：11992786
> 
> 赞同：0
> 
> 时间：2012-08-16T17:52:21.033
> 
> 标签：php, email

朋友们，这似乎应该很容易，但我正在画一个空白。我想通过电子邮件向人们发送链接。他们应该输入他们的电子邮件地址，点击“提交”，然后将电子邮件显示在他们的收件箱中。PHP 必须是外部文件。所以在我的页面上...

```
<form action="http://www.myotherdomain.com/email.php" method="post">Email: 
    <input type="text" name="email" />
    <input type="submit" />
</form> 
```

在我的 php 文件中，我有...

```
<?php
    $to = $_POST["email"];
    $subject = "Test mail";
    $message = "Hello! This is a simple email message.";
    $from = "address@someisp.com";
    $headers = "From:" . $from;
    mail($to,$subject,$message,$headers);
?> 
```

它工作正常并发送电子邮件，但在我点击提交按钮后它会将我带到 email.php 页面。我不想离开我所在的页面。我只想点击按钮并在不离开页面的情况下发送电子邮件。奖金将是在发送电子邮件时显示的消息。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:03:22.257

您需要使用 Jquery/Ajax 来执行此操作。这是一个简单的脚本，它应该适用于您当前调用 email.php 的页面：

```
<script src="http://code.jquery.com/jquery-1.7.min.js"></script> 
```

在身体里：

```
<script type="text/javascript" >
function process(email){
$.post("email.php",{email:email},function(result){
alert(result); 
});

};
</script>

<img src="whatever.png" onClick="process('their_email@example.com');"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:56:37.393

如果您想在不加载页面的情况下执行此操作，则需要使用 AJAX。如果您对导致页面加载的表单提交感到满意，那么您有两个选择。要么将电子邮件逻辑放入当前页面并将页面发布回自身，要么执行从 mail.php 脚本重定向回用户来自的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T18:02:12.883

你有 2 个选项要么使用 AJAX（jQuery 将是一个快速的解决方案）

```
$('form').submit(function(){
    $.ajax({
        type: 'POST',
        url: 'http://www.myotherdomain.com/email.php',
        data: $(this).serialize(),
        success: function(data) {
            alert('Message sent!');
        }
    });
    return false;
}); 
```

或在邮件完成后进行重定向：

```
header('Location: http://www.yourdomain.com');
exit; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T17:59:37.540

您可以添加目标和 iframe：

```
<form action="http://www.myotherdomain.com/email.php" target="aframe" method="post">Email: 
    <input type="text" name="email" />
    <input type="submit" />
</form>

<iframe src="about:blank" style="display:none" name="aframe" id="aframe"></iframe> 
```

不需要 ajax，这也适用于没有 javascript 的用户，但是“已发送电子邮件”的消息会有所帮助。您可以从 email.php 中回显警报：

```
echo "<script type='text/javascript'>alert(\"Email sent\");</script>"; 
```

如何做到这一点的真正简单的例子。

# rest - 在 Symfony2 上，如何在 RequestListener 中检索被调用路由的允许 HTTP 方法？

> ID：11992787
> 
> 赞同：1
> 
> 时间：2012-08-16T17:52:27.833
> 
> 标签：rest, symfony, symfony-2.1

一切尽在标题中，

我想在 RequestListener 中检索`@Method({"GET", "POST"})`当前调用的 Action 的注释中允许的 HTTP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:17:22.513

您必须在侦听器中获取`router`服务并将当前路由名称传递`$_route`给您的侦听器操作。

然后您将能够获得当前路线的要求：

```
...
yourListenerAction(..., $_route)
{
    ...

    $collection = $router->getRouteCollection();
    $route = $collection->get($_route);
    $requirements = $route->getRequirements();

    $methods = $requirements['_method']; //will return string "GET|POST"

    ... 
```

# php - Wordpress WPMU 中的外部 API 访问

> ID：11992788
> 
> 赞同：1
> 
> 时间：2012-08-16T17:52:37.060
> 
> 标签：php, api, standards, wordpress, wpmu

我有一个可通过 API 调用访问的应用服务器。我有另一个使用 WordPress 多站点安装的网站。

在 Wordpress 方面，放置 API 调用和查看逻辑的正确位置在哪里......

1.  安全性 - 无法访问代码（可能与其他 PHP 安全问题没有任何不同）
2.  更新 - 无需在 WP 版本更新后重新配置
3.  编码标准 - 放置功能和结果视图的适当位置

真的不希望任何人访问或禁用代码。它应该在 WPMU 网络中保持不变。该代码将通过表单“view”向外部 API 提交值，通过“views”显示返回的数据，并且是特定于用户/身份验证键的。

我相信选择是在插件和/或主题文件之间，但想确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:33:57.680

如果您是新手，请从您认为可以为您做的事情开始。如果你失败了，看看其他变种是否更适合你。从技术上讲，您将代码放在哪个文件中并没有太大区别，因为它可以从许多文件中加载。

# ios - iOS：潜在的数据泄露：CFDataGetBytePtr

> ID：11992791
> 
> 赞同：0
> 
> 时间：2012-08-16T17:52:40.377
> 
> 标签：ios

我从 CGImageRef 获取该数据，然后设置我创建的结构以指向该数据：

```
 CFDataRef data = CGDataProviderCopyData(CGImageGetDataProvider(imageRef));
        const UInt8 * imageData = CFDataGetBytePtr(data);
        myPix->data = (l_uint32 *) imageData; 
```

但是，当我执行产品-> 分析时，我收到了内存泄漏警告。

我认为原因是因为我不做 CFRelease(data)。但是，如果我这样做 myPix -> 数据会被修改。我怎样才能摆脱内存泄漏警告但让它正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:58:22.410

你只是在那里分配一个指针 - 丢弃 const （如果你写入它，则为未定义的行为），并处置所有者（释放分配给`data`- 当你读取或写入该内存区域时也未定义的行为）。

如果您想要该数据的可变副本，则必须创建自己的可变副本。您可以放心调用`CFRelease(data)`。

有两种直接创建可变副本的方法：

1）使用`malloc`

*   使用创建新分配`malloc`
*   然后将缓冲区复制`data`到您的缓冲区
*   然后将缓冲区分配给`myPix->data`
*   完成分配`myPix->data`参考后，请致电`free(myPix->data);`

2) 创建 CFData 的可变副本。

```
CFMutableDataRef mutableData = CFDataCreateMutableCopy(0, 0, data);
myPix->data = (l_uint32 *)CFDataGetMutableBytePtr(mutableData); 
```

完成分配`myPix->data`参考后，请致电`CFRelease(mutableData);`

# github - 如何：在 Github 中的多个用户之间共享单个存储库

> ID：11992795
> 
> 赞同：1
> 
> 时间：2012-08-16T17:52:50.947
> 
> 标签：github, github-for-windows

我正在做一个项目。在这个项目中涉及多个开发人员。我已经使用 github for windows 在 github 上创建了一个存储库并克隆了这个存储库。现在，我需要在这些特定的开发人员之间共享这个存储库。这样这些特定的开发人员就可以将任何文件更改/提交到此存储库。我该怎么做呢？

# java - 相同（？）对象的不同对象引用

> ID：11992796
> 
> 赞同：5
> 
> 时间：2012-08-16T17:52:52.100
> 
> 标签：java, model-view-controller, singleton, object-reference

我最近问过如何从另一个类中获取唯一的类实例。

（[如何从 Java 中的另一个类中获取特定的类实例？](https://stackoverflow.com/questions/11987123/how-to-get-specific-instance-of-class-from-another-class-in-java)）

所以，我试图让它工作：

我的`Application`：

```
public class Application
{

    // I will always have only one instance of Application

    private static Application _application;

    // Every instance of Application (one in my case) should have its own View

    private View view;

    // Constructor for new instance of Application

    private Application()
    {
        view = new View();
    }

    // Getter for my unique instance of Application

    public static Application getSharedApplication()
    {
        if (_application == null)
            _application = new Application();
        return _application;
    }

    // Main class

    public static void main(String[] args)
    {
        // So I'm accessing my instance of Application
        Application application1 = getSharedApplication();

        // Here is object reference
        System.out.println(application1);

        // And now I'm accessing the same instance of Application through instance of View
        Application application2 = application1.view.getApplication();

        // Here is object reference
        System.out.println(application2);
    }

} 
```

我的`View`：

```
public class View
{

    // I'm accessing my instance of Application again

    public static Application application = Application.getSharedApplication();

    // This method should return my unique instance of Application

    public Application getApplication()
    {
        return application;
    }

} 
```

问题是该`main`方法返回不同的对象引用。

```
Application@1430b5c
Application@c2a132 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T18:05:09.417

这是发生的事情：

*   程序首先调用`Application application1 = getSharedApplication();`
*   反过来调用调用的静态方法`new Application()`-该调用需要加载 View 类，该类是`Application`.
*   View 类被加载，它的静态成员被初始化并运行`getSharedApplication();`（注意在这个阶段，`_application`仍然是 null）。这也创造了`new Application()`一个

您现在有 2 个应用程序实例。

请注意，如果您添加`View v = new View();`为 main 的第一行，则只有一个 Application 实例（从 View 的静态变量中加载一次）。当你仔细考虑它但不是很直观时，这是有道理的......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T18:03:15.843

此类问题的一般答案是：使用调试器！例如，您可以在 的构造函数中设置断点`Application`，运行程序，并在构造函数第二次执行时检查堆栈。

如果你这样做，你会注意到这样的事情：

```
Application.<init>() line: 21   
Application.getSharedApplication() line: 31 
View.<clinit>() line: 59    
Application.<init>() line: 23   
Application.getSharedApplication() line: 31 
```

也就是说，视图想要在共享应用程序完全构建之前（并且在后者存储在静态字段中之前）获取共享应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T18:31:51.910

如果您更改 View 的初始化，如下所示

```
public static Application getSharedApplication() {

    if(_application == null)
    {
        _application = new Application();
        view = new View();
    } 
```

您会发现只创建了一个实例。原因是您在 Application 完全初始化之前创建 View 实例。因为第一次请求类时会加载静态变量，所以这种行为正在发生。

无论如何，我了解到永远不要这样做:)谢谢:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T18:06:16.120

getSharedApplication() 方法应该使用 synchronized 关键字。否则，两个线程可能会进入第一个 if 语句块并且都创建不同的变量。

我不确定这是否是这里发生的事情。尝试在任何地方添加调试/打印语句，这样您就可以了解实际发生的情况。

# git - git force 更新特定目录

> ID：11992797
> 
> 赞同：1
> 
> 时间：2012-08-16T17:52:56.580
> 
> 标签：git

我正在使用 git。我对特定目录中的多个代码文件进行了一些更改，但现在想要原始版本。我已经将修改后的文件复制到其他地方。我现在如何拉回原件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T18:06:17.543

```
git stash -u 
```

是撤消文件更改的安全方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:43:00.210

很多选择：

*   `git stash`会将您的工作副本重置为最新提交的版本，存储您的更改以备不时之需。你不能用这个指定一个文件夹；它适用于您的整个工作副本。
*   `git checkout .`当您执行`git status`. 如果您也想清除这些，`git reset .`请先使用。
*   `git reset --hard`将在整个存储库中将所有内容恢复为最新提交，无论它是否已被提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T20:09:04.393

这确实是分支的目的。

与其`stash`复制或复制文件，不如创建一个新分支：

```
git checkout -b name-experimental-branch 
```

并正常提交。

您的更改安全地远离其他分支，并且没有混乱！

然后，要回到原始状态，只需检查您之前所在的分支即可。大概：

```
git checkout master 
```

你又回到了原来的版本。

# sql - Rails 3 复杂的 SQL 更新替代方案

> ID：11992801
> 
> 赞同：1
> 
> 时间：2012-08-16T17:53:28.473
> 
> 标签：sql, ruby-on-rails, ruby, ruby-on-rails-3, sql-update

我有一个在 2 个表上运行的 sql：

```
affiliates_comisions.each do |aff|
  connection.update("
              UPDATE comissions AS coms,
              conversions AS conve 
              SET conve.active=0 
              WHERE coms.conversion_type_id=conve.conversion_type_id
              AND conve.user_id="+aff.id.to_s+"
              AND conve.active=1
              AND coms.method = 'one_time'")
end 
```

我的问题是，如果有的话，我怎么能以更好的方式做到这一点？我找不到更新需要另一个表中的条件为真的字段的方法...

如果您需要其他详细信息，请告诉我。

* * *

## 更新 1

该affiliates_commissions 是：

```
total_pay_sql = "(SELECT SUM(payment)
                  FROM comissions AS coms,conversions AS conve
                  WHERE coms.conversion_type_id=conve.conversion_type_id
                  AND conve.user_id=usr.id
                  AND conve.active=1)"
affiliates_comisions = self.
                        select('*,'+total_pay_sql+' AS total_pay').
                        from("users AS usr").
                        where(total_pay_sql+">=5") 
```

* * *

## 更新 2

![这是我在此查询中使用的 3 个表的图表](../Images/aebe535e647dc75adb3138353a52755c.png)

以下是模型：

```
class Comission < ActiveRecord::Base
  belongs_to :conversion_type
  attr_accessible :method, :payment

  validates_inclusion_of :method, :in => [:recurring, :one_time]
...

class Conversion < ActiveRecord::Base
  attr_accessible :conversion_type_id, :restaurant_id, :user_id, :active

  belongs_to :user
  belongs_to :restaurant
  belongs_to :conversion_type
...

class ConversionType < ActiveRecord::Base
  attr_accessible :name
  has_many :conversions
end 
```

* * *

## 更新 3

在@RGB 提出建议后，我进行了一些更改并添加了：

```
#To conversion model#
has_many :comissions, :through => :conversion_type
#To comission model#
has_many :conversions, :through => :conversion_type
#To conversion_type model#
has_many :conversions
has_many :comissions 
```

现在我设法让选择工作更艰难，这件事运行 2 个查询，我不确定这比我编写一个查询来进行更新更好，但也许你可以帮助我。所以这是我设法编写的选择以获得我需要的转换。

```
@conversions = Comission.find_by_method('one_time').conversions.find_all_by_active_and_user_id(1,affiliates_comisions.collect(&:id)) 
```

现在的问题是我无法对此运行更新，或者我如何在不运行此选择的情况下进行更新查询？...

* * *

## 回答

我终于设法让事情按我的意愿工作。这是我经过一些更改后的内容：

```
total_pay_sql = "(SELECT SUM(payment)
                  FROM comissions AS coms,conversions AS conve
                  WHERE coms.conversion_type_id=conve.conversion_type_id
                  AND conve.user_id=usr.id
                  AND conve.active=1)"
affiliates_comisions = self.
                        select('*,'+total_pay_sql+' AS total_pay').
                        from("users AS usr").
                        where(total_pay_sql+">=?",@@minimum_pay)

#we run a normal update here to set the one time conversions to active=0 so we only pay for them once
@conversions = Comission.where({:method=>'one_time'}).joins(:conversions).where("active=1 AND user_id IN(?)",affiliates_comisions.collect(&:id)).update_all(:active=>0) 
```

最后一行是我想要的答案，并结合@RGB 所说的我已经设法使它工作。这是最后一行执行的查询：

```
UPDATE `comissions` INNER JOIN `conversion_types` ON `conversion_types`.`id` = `comissions`.`conversion_type_id` INNER JOIN `conversions` ON `conversions`.`conversion_type_id` = `conversion_types`.`id` SET `active` = 0 WHERE `comissions`.`method` = 'one_time' AND (active=1 AND user_id IN(41)) 
```

完美的！！！:DI 希望它对其他人也有帮助！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:21:29.857

您通过转换类型缺少转换和佣金之间的关系

添加：

```
#add to Conversions
has_and_belongs_to_many :comissions, :through => :conversion_type

#add to Comissions
has_and_belongs_to_many :conversions, :through => :conversion_type 
```

分别上课

查看更多帮助： [has_many：通过 has_and_belongs_to_many 关联](https://stackoverflow.com/questions/2150582/has-many-through-a-has-and-belongs-to-many-association)

# php - session_id() 行为

> ID：11992802
> 
> 赞同：0
> 
> 时间：2012-08-16T17:53:30.260
> 
> 标签：php, session, sessionid

出于各种原因，我一直致力于将我的网站会话信息从平面文件转换为数据库会话，主要原因是我在管理面板和用户面板中使用相同的用户数据库。

管理面板设置在我们主域的子域上，即；

domain.com 员工.domain.com

两个域都使用完全相同的会话处理程序，但是在子域和普通域上实际创建会话时，会为同一台计算机/人创建两个不同的 session_id。

这种行为正常吗？有没有办法让我登录用户面板也允许我在不登录的情况下使用人员面板，因为会话已经创建？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:57:56.157

从您的 PHP 脚本中，您可以设置：

```
ini_set('session.cookie_domain', '.domain.tld'); 
```

为了跨子域共享会话。

您将会话存储到 DB 中的事实不应该直接与此功能有关，因为我假设您正在使用一个类来包装会话读/写功能，这要归功于[session_set_save_handler](http://php.net/manual/en/function.session-set-save-handler.php)之类的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:57:28.713

我假设您正在使用 cookie 来传输会话 ID。cookie 不会被传递到网站的其他部分，因为它位于不同的（子）域中。因此 PHP 会生成一个新的会话 ID。

但是，如果您管理这两个部分具有相同的会话名称并且您设法传递会话 ID，那么一切都应该正常工作。

例如，您可以创建一个接受会话 ID 作为参数的特殊脚本，然后接管该会话数据。

但是在这里要小心，这样就不会轻易被滥用来窃取会话。因此，可能使用适用于两个站点的 cookie 可能是一个更简单的解决方案。

*   [`session.use_only_cookies`](http://de.php.net/manual/session.configuration.php#ini.session.use-only-cookies)
*   [`session.cookie_domain`^(*文档*)](http://de.php.net/manual/session.configuration.php#ini.session.cookie-domain)
*   [`session_set_cookie_params`^(*文档*)](http://de.php.net/session_set_cookie_params)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T17:57:40.213

在每种情况下开始会话之前，您需要[`session_set_cookie_params`](http://php.net/manual/en/function.session-set-cookie-params.php)适当地调用和设置会话 cookie 的域。该文档准确地描述了需要做什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T18:00:03.273

如果您使用 cookie 存储会话 ID，那么您需要确保使用子域通配符值设置 cookie。也就是说，默认情况下，PHP 使用完整的子域和域名设置 cookie（即 cookie 域是“www.domain.com”）。如果您使用“.domain.com”域设置 cookie。'domain.com' 的所有子域都可以读取 cookie。

# memory-management - 内核变量位置

> ID：11992808
> 
> 赞同：0
> 
> 时间：2012-08-16T17:53:53.650
> 
> 标签：memory-management, cuda

我正在创建一个内核来管理位于结构和数组上的大量变量。我知道如果我使用通过`cudaMalloc`（全局内存......对吗？）分配的变量，计算将非常慢（我已经尝试过了，结果比我的算法的顺序版本慢）。

如果我将数据数组复制到内核变量上，我会提高性能吗？

内核内存（应该叫“本地内存”吧？）应该比全局内存快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:30:39.127

本地内存和全局内存一样慢。如果您的数据太大而无法存储在寄存器或共享内存中并且您不需要写操作，您可以尝试使用纹理内存或常量内存，它们被缓存因此比全局内存更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:13:51.797

我认为您对 CUDA 的工作方式有点困惑。我将尽我所能提供帮助，但我强烈建议您查看[CUDA 编程指南](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf)以及 CUDA 中包含的示例。对于您在结构上的工作，我会推荐 Black Scholes 示例。

> 我知道如果我使用通过 cudaMalloc 分配的变量（全局内存......对吗？）计算会很慢（我已经尝试过了，结果比我的算法的顺序版本慢）

是的，您确实使用 cudaMalloc 将 GPU 设备分配给全局内存，对。计算不一定很慢，但是根据您对慢的定义，将大量数据复制到设备 (GPU) 内存的过程可能会很慢。在 CUDA 中限制将内存复制到设备总是好的。

> 如果我将数据数组复制到内核变量上，我会提高性能吗？内核内存（应该叫“本地内存”吧？）应该比全局内存快？

这种说法没有意义，我认为您不了解设备内存的工作原理。

在您进一步了解之前，不要担心内存优化。特别是你应该检查**每一个 CUDA 调用是否有错误，**尤其是 CudaMalloc 和 CudaMemcpy，否则你会遇到一些严重的问题。

如果您打算真正学习 GPU 编程，我建议您阅读大量相关内容并查看示例程序。如果没有，您绝对应该检查一些现有的软件来使用 GPU，而无需成为程序员。特别是[Thrust](https://code.google.com/p/thrust/)非常适合此目的，尤其是对于 Map/Reduce 风格的任务。

# mule - Mule ESB - servlet：入站端点错误

> ID：11992811
> 
> 赞同：0
> 
> 时间：2012-08-16T17:54:00.570
> 
> 标签：mule

在我的 mule 应用程序中，我用 Servlet 入站端点替换了 HTTP 入站端点，因此我可以在 JBoss 上部署 mule 应用程序。现在，当 JBoss 启动时，我收到以下错误消息：

```
2012-08-16 12:13:00,416 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/oms]] (main)
Line 27 in XML document from request_flows.xml is invalid; 
nested exception is org.xml.sax.SAXParseException: cvc-complex-type.2.4.a: 
Invalid content was found starting with element 'servlet:inbound-endpoint'. 
One of '{"http://www.mulesoft.org/schema/mule/core":annotations, 
"http://www.mulesoft.org/schema/mule/core":description, 
"http://www.mulesoft.org/schema/mule/core":abstract-message-source, 
"http://www.mulesoft.org/schema/mule/core":abstract-inbound-endpoint, 
"http://www.mulesoft.org/schema/mule/core":abstract-message-processor, 
"http://www.mulesoft.org/schema/mule/core":abstract-outbound-endpoint, 
"http://www.mulesoft.org/schema/mule/core":response}' 
is expected. (org.mule.api.lifecycle.InitialisationException)
org.mule.api.config.ConfigurationException: Line 27 in XML document from request_flows.xml is    invalid; nested exception is org.xml.sax.SAXParseException: cvc-complex-type.2.4.a: Invalid content   was found starting with element 'servlet:inbound-endpoint'. One  of '{"http://www.mulesoft.org/schema/mule/core":annotations, "http://www.mulesoft.org/schema/mule/core":description, "http://www.mulesoft.org/schema/mule/core":abstract-message-source, "http://www.mulesoft.org/schema/mule/core":abstract-inbound-endpoint, "http://www.mulesoft.org/schema/mule/core":abstract-message-processor, "http://www.mulesoft.org/schema/mule/core":abstract-outbound-endpoint, "http://www.mulesoft.org/schema/mule/core":response}' is expected. 

    <flow name="ParcelRequestFlow" doc:name="ParcelRequestFlow">
    <servlet:inbound-endpoint path="http://localhost:80/parcel" responseTimeout="10000" doc:name="Parcel Servlet"/>
    <http:body-to-parameter-map-transformer doc:name="Body to Parameter Map"/>
    <transformer ref="RequestParametersValidator1" doc:name="Validator"/>
    <jdbc:outbound-endpoint exchange-pattern="request-response" queryKey="messageSelectCountMessageId" responseTimeout="10000" mimeType="text/plain" queryTimeout="-1" connector-ref="jdbcConnector" doc:name="Verify MessageId"/>
    <transformer ref="MessageIdValidator" doc:name="MessageId Validator"/>
    <transformer ref="parcelPayloadTransformer" doc:name="Parcel Payload Transformer"/>
    <message-properties-transformer scope="session" doc:name="Add PAYLOAD_OBJECT header">
        <add-message-property key="payload_object" value="#[payload]"/>
        <add-message-property key="payload_id" value="#[bean:parcelDetails.UPID]"/>
    </message-properties-transformer>
    <transformer ref="ParcelBeanValidator" doc:name="ParcelBeanValidator"/>
    <transformer ref="MessagePropertyTransformer" doc:name="Message Property Transformer"/>
    <jdbc:outbound-endpoint exchange-pattern="request-response" queryKey="parcelInsert" responseTimeout="10000" mimeType="text/plain" queryTimeout="-1" connector-ref="jdbcConnector" doc:name="Create DB Message Parcel"/>
    <vm:outbound-endpoint exchange-pattern="one-way" path="insurance.queue" responseTimeout="10000" connector-ref="queue.vm.connector" mimeType="text/plain" doc:name="Insurance Queue"/>
    <transformer ref="MessagePropertyTransformer" doc:name="Message Property Transformer"/>
    <vm:outbound-endpoint exchange-pattern="one-way" path="parcel.queue" responseTimeout="10000" connector-ref="queue.vm.connector" mimeType="text/plain" doc:name="Parcel Queue"/>
    <transformer ref="HttpResponseSucCessTransformer" doc:name="Return SUCCESS" />
    <custom-exception-strategy class="com.pb.oms.mule.exception.HttpRequestExceptionStrategy"></custom-exception-strategy>
</flow> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:48:49.400

请务必声明`servlet`命名空间：

```
xmlns:servlet="http://www.mulesoft.org/schema/mule/servlet"

...

http://www.mulesoft.org/schema/mule/servlet http://www.mulesoft.org/schema/mule/servlet/current/mule-servlet.xsd 
```

并让 Servlet 传输 JAR 在您的类路径中。

# javascript - 争吵异步 chrome.history 调用

> ID：11992817
> 
> 赞同：1
> 
> 时间：2012-08-16T17:54:58.713
> 
> 标签：javascript, google-chrome, google-chrome-extension

在我的 Chrome 扩展程序中，我有一组 URL，我想找到第一个未访问的 URL。因为[`chrome.history`](https://developer.chrome.com/extensions/history.html)API 是异步的，我的第一反应是做一些怪诞的递归迭代，像这样......

```
urls = [...];
function recur(idx) {
    chrome.history.getVisits(urls[idx], function(visitItems) {
        if(visitItems && visitItems.length > 0) {
            // Success!
        } else {
            recur(idx + 1);
        }
    }
}
recur(0); 
```

但是，这很糟糕（它真的很难看，它可能很慢，而且它会因为长列表而中断）。

有什么方法可以更好地处理所有这些对 chrome.history 的调用？或者，是否有完全不同的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:39:17.437

如果顺序很重要，并且您的列表很长，并且迟早找到未访问链接的可能性很高，那么最好的方法基本上就是做您正在做的事情。这是`forEachSeries`一个流行`async`库的实现。

```
async.forEachSeries = function (arr, iterator, callback) {
    callback = callback || function () {};
    if (!arr.length) {
        return callback();
    }
    var completed = 0;
    var iterate = function () {
        iterator(arr[completed], function (err) {
            if (err) {
                callback(err);
                callback = function () {};
            }
            else {
                completed += 1;
                if (completed === arr.length) {
                    callback(null);
                }
                else {
                    iterate();
                }
            }
        });
    };
    iterate();
}; 
```

您将看到您已经开始实施的相同递归模式。另一种选择是并行启动它们并在它们返回时跟踪它们。一旦列表中的第一项以未访问状态返回，您就可以退出。注意：以下代码未经测试...

```
var urls = [a,b,c,d],
    unvisitedUrls = [],
    count = urls.length,
    done = false;

var checkUrl = function(d) {
  var url = d;

  return function(visitItems) {
    if (done) return;
    count--;

    if (visitItems && visitItems.length > 0) {
        unvisitedUrls.push(url);
    }
    else {
        urls.splice(urls.indexOf(url));  // remove the visited url
    }

    if(unvisitedUrls.indexOf(urls[0]) > -1 || count === 0) {
        done = true;
        // done checking urls, urls[0] is the winner
    }

  }
}

urls.forEach(function(d) { chrome.history.getVisits(d, checkUrl(d)); }); 
```

如果您的列表有数百万个项目，那么您可以分批迭代它们，而不是一次全部迭代。这是一个使用[https://github.com/caolan/async](https://github.com/caolan/async)`async`上的库的示例。

```
var checkUrl = function(url, cb) {

  chrome.history.getVisits(url, function(itemVisits) {   

    if (done) return cb();
    count--;

    if (visitItems && visitItems.length > 0) {
        unvisitedUrls.push(url);
    }
    else {
        urls.splice(urls.indexOf(url));  // remove the visited url
    }

    if(unvisitedUrls.indexOf(urls[0]) > -1 || count === 0) {
        done = true;
        // done checking urls, urls[0] is the winner
    }

    cb();
  }
};

async.forEachLimit(urls, 50, checkUrl, function(err) { doSomethingWithWinner(); }); 
```

# actionscript-3 - AS3 - 改变 MC 相对于另一个的深度

> ID：11992820
> 
> 赞同：0
> 
> 时间：2012-08-16T17:55:22.427
> 
> 标签：actionscript-3, movieclip

我正在尝试制作这个使用略微 3D 精灵的自上而下的游戏。我希望能够让玩家走在他遇到的任何物体的前面和后面。

就像，如果他在另一个物体后面一定距离，他会在它后面移动，如果他更靠近另一个物体的前面，他会在它前面移动。

有点像那些古老的街机游戏，比如愤怒的街道。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:07:57.043

每次玩家移动时，您都需要评估每个适用项目的 y 位置，并据此对 z-order/childIndex 进行排序。

因此，如果您所有要走在前面/后面的“对象”以及您的角色都位于称为前景的父精灵中：

```
function sortZ(){
    var arrayOfStuff:Vector<DisplayObject> = new Vector<DisplayObject>();

    var i:int;
    for(i=0;i<foreground.numChildren;i++){
        arrayOfStuff.push(foreground.getChildAt(i));
    }

    arrayOfStuff.sort(sortArrayByY);

    for(i=0;i<arrayOfStuff.length;i++){
        foreground.setChildIndex(arrayOfStuff[i],i);
    }
}

function sortArrayByY(valA:DisplayObject, valB:DisplayObject):int {
    if(valA.y == valB.y) return 0;
    if(valA.y > valB.y) return 1;
    return -1;
} 
```

# ios - SQLite 3 插入。即使插入没有失败，数据库也不会改变

> ID：11992827
> 
> 赞同：0
> 
> 时间：2012-08-16T17:56:11.350
> 
> 标签：ios, sqlite

更新后，我的 sqlite 数据库没有改变。一切似乎都很好，没有错误消息，我可以打印出来

```
 int rows= sqlite3_changes(database); 
    NSLog(@"rows %d" , rows); 
```

更新的行数。不过，如果我在更新后读取表（从 sqlite 控制台指向我复制文件的库文件夹。但即使我使用新的 Objective-c 方法读取它），它就像没有运行更新一样。

这是我的完整方法。我什至尝试过 sql insert 但遇到了同样的问题。您对我可以尝试什么或有什么问题有任何想法吗？

谢谢。

```
 -(void)saveBookmark:(FfBookmark *) bookmark {

int resconn = sqlite3_open([pathDB UTF8String], &database);

if (resconn == SQLITE_OK) {

    NSString * query = @"update  bookmarks set position=?  ";
    const char * sqlStatement = [query UTF8String];

    sqlite3_stmt * compiledStatement;

    if (sqlite3_prepare_v2(database, sqlStatement, -1 , &compiledStatement,   NULL) == SQLITE_OK) {

        sqlite3_bind_int(compiledStatement, 1, bookmark.position);

    } 

    if (!sqlite3_step(compiledStatement) == SQLITE_DONE) {

        NSLog(@"Error @%" , sqlite3_errmsg(database));
    }
    int rows= sqlite3_changes(database);

    NSLog(@"rows %d" , rows);

sqlite3_finalize(compiledStatement);

}

sqlite3_close(database);

  } 
```

# alloy - 合金中“私人”关键字的含义？“枚举”声明的含义？

> ID：11992831
> 
> 赞同：5
> 
> 时间：2012-08-16T17:56:33.700
> 
> 标签：alloy

[Alloy 4 语法](http://alloy.mit.edu/alloy/documentation/alloy4-grammar.txt)允许签名声明（和其他一些东西）携带`private`关键字。它还允许允许规范包含形式的枚举声明

```
enum nephews { hughie, louis, dewey }
enum ducks { donald, daisy, scrooge, nephews } 
```

[语言参考](http://alloy.mit.edu/alloy/documentation/book-chapters/alloy-language-reference.pdf)没有（据我所知）描述`private`关键字或`enum`结构的含义。

有可用的文档吗？还是它们在语法中是为未来规范保留的结构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T18:57:11.943

这是我对这两个关键词的非官方理解。

```
enum nephews { hughie, louis, dewey } 
```

在语义上等价于

```
open util/ordering[nephews] as nephewsOrd

abstract sig nephews {}

one sig hughie extends nephews {}
one sig louis extends nephews {}
one sig dewey extends nephews {}

fact {
  nephewsOrd/first = hughie
  nephewsOrd/next = hughie -> louis + louis -> dewey
} 
```

`private`关键字意味着如果 sig 具有属性，则其`private`标签在同一模块内是私有的。这同样适用于私有字段和私有函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-06T07:54:37.233

除了先前接受的答案之外，我想添加一些有用的见解，这些见解来自对`enum`s 的 Alloy 一周体验，特别是与 standard 的主要区别`sig`。

如果你使用`abstract sig + extend`，你会想出一个模型，其中有许多集合对应于相同的概念。也许一个例子可以更好地澄清它。假设像

```
sig Car {
    dameges: set Damage
} 
```

您可以选择使用

```
abstract sig Damage {}
sig MajorDamage, MinorDamage extends Damage {} 
```

对比

```
enum Damage {
    MajorDamage, MinorDamage
} 
```

在第一种情况下，我们可以提出一个与 Cars 相关联的具有不同 MinorDamage 原子（MinorDamage0，MinorDamage1，...）的模型，而在第二种情况下，您始终只有一个 MinorDamage 可供不同的 Cars 引用。

在这种情况下，使用`abstract sig + extend`表单可能有一定意义（因为您可以决定跟踪不同的 MinorDamage 或 MajorDamage 元素）。

另一方面，如果你想要一个`currentState: set State`，最好使用一个

```
enum State {Damaged, Parked, Driven} 
```

映射概念，以便有准确的三个`State`，每个`Car`可以参考。这样，在 中`Visualizer`，您可以决定将您的模型准确地投影到其中一个状态上，它将突出显示`Car`与该状态关联的所有 s。当然，你不能用`abstract + extend`结构来做到这一点，因为投影`MajorDamage0`只会突出与它`Car`相关联的东西，`Damage`而不是其他东西。

所以，总而言之，这真的取决于你必须做什么。

另外，请记住，如果您有一个由 X 元素组成的枚举并执行

```
run some_predicate for Y 
```

其中 Y < X，Alloy 根本不产生任何实例。所以，在我们的最后一个例子中，我们不能有一个 Y < 3。

最后一点，如果您使用 Magic Layout 按钮，枚举并不总是出现在 Visualizer 中，但正如我之前所说，您可以将模型“投影”到枚举上并在枚举的不同元素之间切换。

# android - NDK 原生代码究竟在哪里执行

> ID：11992836
> 
> 赞同：7
> 
> 时间：2012-08-16T17:57:07.543
> 
> 标签：android, android-ndk

我对 Android 应用程序中本机代码的生命周期有些困惑。我看过一些参考资料说本机代码是在 Dalvik VM 内部执行的，但这是真的吗？我的印象是虚拟机只运行 Dalvik 字节码。另一方面，本机代码使用从 VM 内部的 Java 调用的 JNI。最后，使用 NativeActivity 有什么不同吗？

我以为我对 NDK 的理解相当好，直到我坐下来尝试向自己解释它。我什至不确定我是否以明智的方式提出问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T18:05:13.063

> 我看过一些参考资料说本机代码是在 Dalvik VM 内部执行的，但这是真的吗？

它在包含 Dalvik VM 的进程内执行。就个人而言，我不会将其描述为在 VM 内部执行——正如您所说，Dalvik 字节码在 VM 内部执行。“在 Dalvik VM 的控制下”会更好的措辞，恕我直言。当然，我想这归结为你对“in”的定义。

> 最后，使用 NativeActivity 有什么不同吗？

不是真的，只要[`NativeActivity`是在 Java 中实现的](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/app/NativeActivity.java)。虽然*您*可能没有任何 Java，但 Java 仍然轻微地参与了运行您的本机代码的行为。

# java - 如何在我的 mysql 中查找查询返回的结果数？

> ID：11992845
> 
> 赞同：0
> 
> 时间：2012-08-16T17:57:46.280
> 
> 标签：java, mysql, jdbc

我正在开发一个应用程序，我想知道查询提取的结果数。我现在做的方式是给出结果集并在其上执行一个循环以找到大小，但我认为这种方式不是很有效。（不幸的是 rs 没有任何 .size() 方法）有没有更好的方法我可以用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:01:35.037

一种方法是在查询中调用 SELECT COUNT：

```
SELECT COUNT(*) AS COUNT FROM MYTABLE WHERE...

int count = rs.getInt("COUNT"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:59:33.753

最有效的方法是进行`select count(*) from table`查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T18:01:09.150

ResulSet 是对内存中游标第一行的引用，每条记录都被一次提取/加载到内存中。没有办法知道一个结果集包含多少条记录，除了循环整个结果集或从数据库返回一个 SQL 计数。

# c# - SecurityException：请求“System.Net.Mail.SmtpPermission”类型的权限

> ID：11992851
> 
> 赞同：14
> 
> 时间：2012-08-16T17:58:01.380
> 
> 标签：c#, asp.net, smtp

这是那些“在本地工作，在服务器上不起作用”的帖子之一。

我有一个发送电子邮件的简单联系表。在服务器上，我得到以下异常：

```
 Security Exception
Description: The application attempted to perform an operation not allowed
by the security policy.  To grant this application the required permission
please contact your system administrator or change the application's trust
level in the configuration file.

Exception Details: System.Security.SecurityException: Request for the
permission of type 'System.Net.Mail.SmtpPermission, System, Version=4.0.0.0, 
Culture=neutral, PublicKeyToken=b77a5c561934e089' failed.

Source Error:
[No relevant source lines] 
```

主机无法给我代码或 SMTP 客户端，用于从 Web 服务器发送 SMTP 消息。所以我需要找到一种替代方式来发送它们，这将使我的 Web 服务器对严格的安全策略感到满意。

这是源代码：

```
private void SendMessage (string returnAddress, string textSubject, string messageText)
    {
        config config = new config();

        System.Net.Mail.MailMessage message = new System.Net.Mail.MailMessage();

        message.To.Add(config.toEmailAddress);
        message.Subject = "Website Contact Form Message: " + textSubject;
        message.From = new System.Net.Mail.MailAddress(returnAddress);
        message.Body = messageText;

        message.IsBodyHtml = false;

        System.Net.Mail.SmtpClient smtp = new System.Net.Mail.SmtpClient("smtp.naturalcarpetcompany.com");
        smtp.Credentials = new System.Net.NetworkCredential(config.fromEmailAddress, config.fromEmailPassword);
        smtp.Port = 587;

        try
        {
            smtp.Send(message);
        }
        catch (Exception ex)
        {
            Exception ex2 = ex;
            string errorMessage = string.Empty;
            while (ex2 != null)
            {
                errorMessage += ex2.ToString();
                ex2 = ex2.InnerException;
            }
            HttpContext.Current.Response.Write(errorMessage);
        }
    } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-16T19:27:51.640

低安全级别不允许您指定 smtp 端口。默认是端口 25。虽然我的 ISP 指定端口 587，但我可以使用端口 25，它工作正常。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-14T07:03:18.937

我有一个类似的问题，我只是在 Web.config 文件中添加了以下代码，它对我有用

```
<configuration>
  <system.web>
    .....
    <trust level="Full" originUrl=""/>
  </system.web>
</configuration> 
```

我在共享主机服务器上遇到了这个问题。尝试创建 SMTP 客户端对象然后为其分配端口号时出现错误。提高信任度对我来说效果很好。我只是详细说明了细节，以确保它也有助于其他人。非常感谢解决方案！由于我无法发表评论，因此在此感谢原作者。

# c# - 将背景设置为画布

> ID：11992853
> 
> 赞同：1
> 
> 时间：2012-08-16T17:58:10.623
> 
> 标签：c#, wpf, xaml

如何在字符串路径上设置背景？

```
canvas1.Background = "/path/"; 
```

请帮忙！！！谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T18:01:05.757

我认为您正在寻找[ImageBrush](http://msdn.microsoft.com/en-us/library/system.windows.media.imagebrush.aspx)类：

```
ImageBrush imageBrush = new ImageBrush();
imageBrush.ImageSource = new BitmapImage(new Uri(@"/path/", UriKind.Relative));
canvas1.Background = imageBrush; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:07:06.140

用这个

```
mycanvas.Background = new ImageBrush() 
          { ImageSource = new BitmapImage((new Uri(mypath, UriKind.Absolute))) }; 
```

# android - LicenseChecker checkAccess泄漏ServiceConnection

> ID：11992859
> 
> 赞同：19
> 
> 时间：2012-08-16T17:58:40.307
> 
> 标签：android, google-play, android-lvl, serviceconnection

每次按下`Back`应用程序中的按钮时，我都会在 LogCat 中收到此异常：

> Activity 泄露了原来绑定在这里的ServiceConnection com.android.vending.licensing.LicenseChecker@471cc039

负责此泄漏的代码`onCreate()`是：

```
mLicenseCheckerCallback = new MyLicenseCheckerCallback();
mChecker.checkAccess(mLicenseCheckerCallback); 
```

我该如何摆脱这种泄漏？

我尝试不将 MyLicenseCheckerCallback 分配给成员，认为当活动进行时`onPause()`，对回调的引用可能会导致泄漏：

```
mChecker.checkAccess(new MyLicenseCheckerCallback()); 
```

但这并没有消除泄漏。

**更新：**感谢@zapl 在下面的评论，我查看了 Google 的`LicenseChecker.java`：

```
/** Unbinds service if necessary and removes reference to it. */
private void cleanupService() {
    if (mService != null) {
        try {
            mContext.unbindService(this);
        } catch (IllegalArgumentException e) {
            // Somehow we've already been unbound. This is a non-fatal error.
            Log.e(TAG, "Unable to unbind from licensing service (already unbound)");
        }
        mService = null;
    }
} 
```

起初我以为我可能忽略了调用它，但我仔细检查并调用了*我*`mChecker.onDestroy();`的活动`onDestroy()`。

我也签到`onDestroy()`了`LicenseChecker.java`，它*正在*调用`unbindService`：

```
/**
 * Inform the library that the context is about to be destroyed, so that
 * any open connections can be cleaned up.
 * <p>
 * Failure to call this method can result in a crash under certain
 * circumstances, such as during screen rotation if an Activity requests
 * the license check or when the user exits the application.
 */
public synchronized void onDestroy() {
    cleanupService();
    mHandler.getLooper().quit();
} 
```

那么，到底发生了什么？

这是 LVL 中的错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-23T07:16:54.557

我刚遇到同样的问题，根据您的更新和 zapl 的评论，我发现问题出在您使用的模拟器上。

此模拟器没有 Google Play API，LVL 无法绑定到服务，使连接保持打开状态，最后 LVL 无法通过 onDestroy 调用关闭它。

只需使用 Google APIs 而不是 Android xx 创建一个新的 AVD 并在那里尝试您的代码，如果在创建新的 AVD 时在 Target 下拉菜单中没有找到 Google APIs，请使用 Android SDK Manager 下载它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T13:19:58.413

后来我也遇到了同样的问题，我知道我没有添加android权限 com.android.vending.CHECK_LICENSE 。更正此问题后，我的问题现已解决。尝试将此行添加到您的android清单

```
<uses-permission android:name="com.android.vending.CHECK_LICENSE" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T20:31:27.893

我不知道谷歌的 LicenceChecker，但你应该在退出 Activity 之前调用 StopService() 否则服务仍在运行并泄漏内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T21:35:58.710

就放

```
mChecker.onDestroy(); 
```

在您`onDestroy`声明和使用 mChecker 的活动的方法上。

虽然 Google 的代码`LicenceChecker`如下所示：

```
 public synchronized void onDestroy() {
        cleanupService();
        mHandler.getLooper().quit();
    } 
```

# c++ - 在 C/C++ 中输入整数直到换行

> ID：11992864
> 
> 赞同：-2
> 
> 时间：2012-08-16T17:59:03.440
> 
> 标签：c++, inputstream

> **可能重复：**
> [如何在 C++ 中逐行从文件中读取整数](https://stackoverflow.com/questions/2287121/how-to-read-integers-from-a-file-line-by-line-in-c)

请任何人都可以建议我如何在 C++ 中输入整数直到换行。

假设输入流是

10 10 10 10 10 10 10 10 10 10，后跟 C++ 中的换行符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T18:01:38.310

```
std::string the_string;
std::getline(the_stream, the_string);
std::istringstream iss(the_string);
for (int n; iss >> n; )
{
    // do something with n
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T18:02:54.263

可能重复：[如何在 C++ 中逐行从文件中读取整数组](https://stackoverflow.com/questions/2287121/how-to-read-integers-from-a-file-line-by-line-in-c)

> 如果您想以每行为基础进行交易：
> 
> ```
> int main()
> {
>    std::string line;
>    std::vector< std::vector<int> > all_integers;
>    while ( getline( std::cin, line ) ) {
>       std::istringstream is( line );
>       all_integers.push_back( 
>             std::vector<int>( std::istream_iterator<int>(is),
>                               std::istream_iterator<int>() ) );
>    }
> } 
> ```

# grails - 从 Grails 域到数据库的持久列顺序

> ID：11992869
> 
> 赞同：5
> 
> 时间：2012-08-16T17:59:24.663
> 
> 标签：grails, grails-orm

当 Grails 从域对象创建表时，是否可以指定列顺序？我希望它保留域中指定的列顺序。相反，它似乎主要是按字母顺序排列的。[我在文档](http://grails.org/doc/latest/guide/GORM.html)中找不到任何东西。我发现[这篇文章](https://learnedstuffs.wordpress.com/2012/02/21/ordering-list-columns-of-scaffold-page-in-grails/)详细说明了指定约束，但这似乎并没有解决数据库列的问题。

例子：

```
class Foo {
    Long id
    String zee
    Integer baz
    Integer bar
} 
```

我希望将数据库列排序为：

```
id | zee | baz | bar 
```

相反，我得到了更接近的东西：

```
id | bar | baz | zee 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:08:32.157

您始终可以在 Grails 之外创建数据库并将列按您希望的任何顺序放置，Grails 将很乐意使用您提供的模式（假设只有列顺序与默认情况下想要创建的不同）

正如@Burt 所指出的，一个更好的选择是使用[数据库迁移](http://grails.org/plugin/database-migration)插件来创建（和管理）数据库。它允许您以与数据库无关的方式对数据库进行细粒度控制，并且还具有使您的数据库模式和模式*更改与您的代码一起版本化的**巨大*优势，用于升级*和回滚*。

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-02T07:21:18.187

据我所知，这是唯一的方法。使用**静态约束**并将它们与您的订单一起编写

```
class Foo {
    Long id
    String zee
    Integer baz
    Integer bar
}

static constraints = {
    id()
    zee()
    baz()
    bar()
} 
```**

# c++ - 公共/受保护/私有继承的问题

> ID：11992870
> 
> 赞同：2
> 
> 时间：2012-08-16T17:59:30.517
> 
> 标签：c++, inheritance, protected, private-members

我正在尝试一个简单的 C++ 继承示例。但我就是拿不下来。当我尝试获取`B`从类继承的类的受保护成员时，`A`它说这`A::baz`是受保护的。

```
#include <iostream>

class A {
    public:
        int foo;
        int bar;
    protected:
        int baz;
        int buzz;
    private:
        int privfoo;
        int privbar;
};

class B : protected A {}; // protected members go to class B, right?

int main() {
    B b;

    b.baz; // here is the error [A::baz is protected]
} 
```

我似乎找不到我做错了什么。我已经尝试更改`class B : protected A`为，`: public A`但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T18:01:33.257

受保护的继承只会影响您的类的客户如何看待基类的**公共**接口。受保护的继承将基类的公共成员标记为对继承类的用户受保护。

所以`baz`在你的例子中不是公开的，它受到 B 的保护，因此编译器错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T18:01:48.573

您可以从派生类*内部*而不是外部访问`protected`成员。

 *```
class B : protected A 
{
   void foo() 
   {
       int x = foo; //ok
       x = baz;     //ok
       x = privfoo; //error
   }
}; 
```

继承类型仅限制基类访问。例如，如果您选择`protected`继承，则所有`public`方法都`A`将成为`protected`外部方法，其余方法保持不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T18:01:46.987

受保护的字段只能由声明它们的类中的方法或从声明类继承的类访问。您正在尝试从全局函数访问受保护的字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T18:01:53.270

因为`A::baz`是受保护的，`B`所以可以访问它：

```
class B : public A
{
  public:
    int some_other_method()
    {
        return baz;
    }
}; 
```

但这不会让其他代码访问它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T18:02:08.793

> protected 访问说明符类似于 private。它唯一的区别实际上发生在继承上。当一个类从另一个类继承时，派生类的成员可以访问从基类继承的受保护成员，但不能访问其私有成员。

更多信息在[这里](http://www.cplusplus.com/doc/tutorial/inheritance/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T18:02:10.710

当一个成员是`protected`时，它只能从定义它的类及其后代的方法中访问。

您要做的是`protected/private`从这些类外部的代码访问成员，这是不允许的。您只能`public`从类范围之外访问类的成员。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-16T18:02:59.463

您应该阅读 C++ 中的公有/私有继承。您想要实现的目标是通过替换

```
class B : protected A {}; 
```

经过

```
class B : public A {}; 
```

编辑：我读得太快了，没有注意到你试图`baz`从 main 访问。您只能从成员方法访问它。*

# android - 忘记安卓证书签名密码

> ID：11992880
> 
> 赞同：1
> 
> 时间：2012-08-16T17:59:59.197
> 
> 标签：android, certificate, google-play, digital-certificate

我很久以前发布了一个android应用程序。现在我想更新它，但问题是我忘记了签署应用程序所需的密码。有什么办法可以恢复密码吗？请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T18:06:39.183

不，你不能。您丢失了密码，这意味着您必须取消发布当前应用程序，更改包名称并使用不同的密钥和包发布新的应用程序。我自己也遇到了同样的问题，在联系谷歌之后，这些就是他们的指示！

他们的回复：

> 如果您丢失或更改了密钥库，则必须使用新包名称和新密钥发布应用程序。您还应该更新原始应用程序的描述并取消发布它。请注意，我们不支持删除应用程序或重复使用包名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-17T09:58:42.750

a 有 2 个密码`certificate`，第一个仅用于完整性检查且不安全，第二个已加密以确保安全。

您可以通过此工具（可能需要几天、几周甚至几个月）暴力破解第二个密码： [https ://code.google.com/p/android-keystore-password-recover/](https://code.google.com/p/android-keystore-password-recover/)

第一个密码不安全，因此您可以通过以下代码重置它： [https ://gist.github.com/zach-klippenstein/4631307](https://gist.github.com/zach-klippenstein/4631307)

快乐黑客！

# python - 语法错误可能是什么？

> ID：11992885
> 
> 赞同：-3
> 
> 时间：2012-08-16T18:00:32.227
> 
> 标签：python, syntax

我一直在尝试运行该程序一段时间，但在尝试运行它时似乎无法找出导致错误的原因。

这是我收到错误的代码行：

```
from math import *
from myro import *
init("simulator")

def rps(score):
    """ Asks the user to input a choice, and randomly assigns a choice to the computer."""
    speak("Rock, Paper, Scissors.")
    computerPick = randint(1,3)
    userPick = raw_input("Please enter (R)ock, (P)aper, or (S)cissors.")
    if userPick = R <#This line is where the error shows up at>
        print "You picked rock."
    elif userPick = P
        print "You picked paper."
    else
        print "You picked Scissors."
    score = outcome(score, userPick, computerPick)
    return score 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T18:02:08.540

您正在使用赋值运算符而不是相等。此外，您的 if 语句缺少冒号，并且没有引用您的字符串。

```
if userPick == 'R':
    ...
elif userPick == 'P':
    ...
else:
    ... 
```

我会注意到你不应该在这里使用`else`这种`'S'`情况。 `'S'`应该是另一个有效条件，否则应该是错误状态包罗万象。

另一种方法是：

```
input_output_map = {'R' : 'rock', 'P' : 'paper', 'S' : 'scissors'}
try:
    print 'You picked %s.' % input_output_map[user_pick]
except KeyError:
    print 'Invalid selection %s.' % user_pick 
```

或者：

```
valid_choices = ('rock', 'paper', 'scissors')
for choice in valid_choices:
    if user_choice.lower() in (choice, choice[0]):
        print 'You picked %s.' % choice
        break
else:
    print 'Invalid choice %s.' % user_choice 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T18:02:11.427

```
if userPick = R: 
```

应该

```
if userPick == "R": 
```

# ruby-on-rails - 在没有数据库交互的情况下加速测试

> ID：11992896
> 
> 赞同：1
> 
> 时间：2012-08-16T18:01:11.880
> 
> 标签：ruby-on-rails, rspec

我已经`:js => true`在我的项目中添加了一些测试，并且必须集成`database_cleaner`gem 才能使其工作。现在我的测试，即使是不使用数据库的测试也大大减慢了速度。有没有办法跳过模拟/非基于数据库的测试的数据库访问？

**spec_helper.rb**的相关部分

 **```
 config.before(:suite) do
      DatabaseCleaner.strategy = :truncation
    end

    config.before(:each) do
      DatabaseCleaner.start
    end

    config.after(:each) do
      DatabaseCleaner.clean
    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T20:01:51.183

只有在需要时才能使用 DatabaseCleaner

spec_helper.rb

```
config.before(:suite) do
  DatabaseCleaner.strategy = :truncation
end

config.before(:each) do
  if :without_db != example.metadata[:type]
    DatabaseCleaner.start
  end
end

config.after(:each) do
  if :without_db != example.metadata[:type]
    DatabaseCleaner.clean
  end
end 
```

user_spec.rb

```
describe User, :type => :without_db do
  it 'should be valid' do
    should be_valid
  end
end 
```**

# android - 设置 Spinner 的显示值

> ID：11992907
> 
> 赞同：0
> 
> 时间：2012-08-16T18:01:49.753
> 
> 标签：android, spinner

好的，所以我之前问过这个，但我猜不清楚。我想要一个装满字符串的微调器，并在我的代码中更改所选项目，而无需任何用户交互。

这样做的原因是我的应用程序将从另一台设备读取一些数据，然后将这些数据显示给用户。

我使用的是微调器而不是 textviews，因为用户可以选择在该微调器中选择某些内容，然后按发送，以将该信息发送回另一台设备。

所以在下面的图片中......微调器开始于`Sensitive`。我想将其更改为`Insensitive`. 但我想在我的代码中这样做，这样它最终看起来就像第三张图片。

![在此处输入图像描述](../Images/9ebef3f086f3ba47a309a28bd35448fd.png) ![在此处输入图像描述](../Images/d325102931ec2ffcf798d821598b5170.png) ![在此处输入图像描述](../Images/e1d4f901d0fa016a2f16363e377f5eec.png)

编辑

```
int pumpTimeResult = RelayAPIModel.NativeCalls.GetParmJava( RelayAPIModel.PARM_PUMPTIME );
Log.i( "Anti-Pump", "pumpTimeResult ==" + Integer.toString( pumpTimeResult ) );
Spinner pumpTimeSpinner = (Spinner) findViewById( R.id.pumpTimeSpinner );
if( pumpTimeResult != -1 ) {
    int index = pumpTime.indexOf( Integer.toString( pumpTimeResult ) );
     Log.i( "Anti-Pump", "pumpTime index == " + index );
    pumpTimeSpinner.setSelection( index + 5 );
} else {
    pumpTimeSpinner.setSelection( 0 );
}

08-16 14:24:31.151: I/Anti-Pump(3037): pumpCountResult==8
08-16 14:24:31.151: I/Anti-Pump(3037): pumpTimeResult ==34
08-16 14:24:31.151: I/Anti-Pump(3037): pumpTime index == 5
08-16 14:24:31.151: I/Anti-Pump(3037): ppumpDelayResultt==19 
```

微调器的值介于 30-300 之间，前面带有“N/A”。所以有271个条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:12:16.887

你有没有尝试过：

`yourSpinner.setSelection(2);`

在你的代码中？

# jquery - 无限循环 - 找不到 jQuery

> ID：11992910
> 
> 赞同：1
> 
> 时间：2012-08-16T18:02:07.700
> 
> 标签：jquery, jquery-ui

我有一个奇怪的问题，只是偶尔发生。在我的 js 文件中有一个实用功能部分。我最终为 jQuery 实用函数添加了一个部分（如下所示）。代码在文件中间，但不在任何闭包内。文件的 script 标签位于 jQuery 的 sript 标签之后。

有时，到目前为止，我还不知道如何重现这一点，代码将运行一个无限循环，在下面显示的代码的第 37 行给出它无法找到变量 jQuery 的错误。jQuery 绝对被定义为应用程序几乎完全是 jQuery。而且，大多数时候没有问题。

这到底是什么原因造成的？

```
 (function ($) { 
      $.fn._draggable = function (draggable) { // for when html5 draggable and jquery ui draggable are not available.  
          // if there is only one element to be made _draggable an id for that element is not required.  
          // if more than one element is to be made draggable a unique id for each element should be used to avoid event handling collissions. 
         var $elm = this; 
         var id = $elm.attr("id") ? $elm.attr("id") : "tmp"; 
         if (draggable == false) { 
              $elm.off("mousedown." + id); 
              $(document).off("mouseup._draggable." + id); 
              $(document).off("mousemove._draggable." + id); 
              return; 
         } 
         else if(draggable == true) { 
              $elm.css("position", "absolute"); 
              $elm.on("mousedown." + id, function() { 
                  var position = $elm.position(); 
                  var oL = event.pageX - position.left; 
                  var oT = event.pageY - position.top; 
                  $(document).on("mousemove._draggable." + id, function (event) { 
                      $elm.css({ 
                          top: event.pageY - oT, 
                          left: event.pageX - oL 
                      }); 
                  }); 
                  $(document).on("mouseup._draggable." + id, function() { 
                      $(document).off("mouseup._draggable." + id); 
                      $(document).off("mousemove._draggable." + id); 
                  }); 
              }); 
          } 
      }; 

      $.fn.tagName = function () { 
          return this.prop("tagName").toLowerCase(); 
      }; 
  })(jQuery); 
```

# ruby-on-rails - Rails缓存大括号块语法错误

> ID：11992913
> 
> 赞同：0
> 
> 时间：2012-08-16T18:02:08.807
> 
> 标签：ruby-on-rails, ruby-on-rails-3, memcached

任何人都知道为什么当我尝试使用花括号块语法时会出现语法错误`Rails.cache.fetch`

这会出现错误（语法错误，意外的'{'，期待keyword_end（SyntaxError））

```
Rails.cache.fetch "person/#{id}" { find(id) } 
```

以下作品：

```
Rails.cache.fetch "person/#{id}" do
  find(id)
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:04:48.760

短块需要 () 才能识别它应该看起来像这样的语法

```
Rails.cache.fetch("person/#{id}") { find(id) } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:05:03.380

这是因为 {} 的优先级与 do end 不同。在第一个表达式中，它们与表达式的“person/#{id}”部分相关联。

所以你的第一个例子类似于：

```
Rails.cache.fetch("person/#{id}" { find(id) }) 
```

而第二个是：

```
Rails.cache.fetch("person/#{id}") { find(id) } 
```

# php - 获取不同的 POST 数据并将其定向到适当的表

> ID：11992918
> 
> 赞同：0
> 
> 时间：2012-08-16T18:02:20.123
> 
> 标签：php, prepared-statement

**情景**

我有一个 iOS 应用程序，我在其中将数据发布到 Web 服务。每次，POST 数据都有不同数量的变量，并且旨在发送到数据库中的特定表，该表具有相同数量的变量。我有 37 个表，它们的大小范围为 3 到 27 列（POST 语句的大小范围为 3 到 27 个变量）。

**问题**

我打算使用准备好的语句，直到我发现你不能在准备好的语句中更改表名（或行名）。那么无论如何我可以避免使用 37 个 if/else 语句吗？或者这是否是将数据定向到适当表的唯一方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:06:09.177

通过列数来识别你的表是一个非常糟糕的主意，如果你有 2 个列数相同的表怎么办？

我的建议是在发布到您的服务器前在您的 URL 上添加一个标志：

> www.example.com/?type=settings // 用于设置表
> 
> www.example.com/?type=user // 用于用户表

等等。当然，您不会在 url 中使用确切的表名，这将构成安全漏洞。

# ajax - Magento | 在类别页面和产品视图上使用数量增量和 ajax 添加到购物车

> ID：11992921
> 
> 赞同：2
> 
> 时间：2012-08-16T18:02:49.927
> 
> 标签：ajax, magento, jquery, onclick

这是场景：

我正在使用 ajax 添加到购物车扩展来将产品添加到购物车而不刷新页面。

我已经修改了 list.phtml 文件，使其具有一些增加“+”和“-”加号和减号按钮输入的数量增量功能。（来源：http: [//jigowatt.co.uk/blog/magento-quantity-increments-jquery-edition/](http://jigowatt.co.uk/blog/magento-quantity-increments-jquery-edition/)）。

*这个问题用 2 个不同的观察结果解释：*

**1st/**如果我通过单击+按钮输入来增加数量，当我看到输入框中的值发生变化时，数量会正确变化，但是然后我单击添加到购物车按钮，并且只添加了1个产品。无论我点击+按钮多少次得到我想要的数量，添加到购物车的数量总是1。

**第二/**如果我在数量框中手动输入所需的数量，例如 5，没问题：购物车刷新了 5 件商品。

所以基本上只有当点击增量按钮 + 时，才不会添加项目数，只会添加一个。

这是添加增量功能并添加 + 和 - 按钮的代码：

```
jQuery("div.quantity").append('<input type="button" value="+" id="add1"    class="plus" />').prepend('<input type="button" value="-" id="minus1" class="minus" />');
jQuery(".plus").click(function()
{
var currentVal = parseInt(jQuery(this).prev(".qty").val());

if (!currentVal || currentVal=="" || currentVal == "NaN") currentVal = 0;

jQuery(this).prev(".qty").val(currentVal + 1);
});

jQuery(".minus").click(function()
{
var currentVal = parseInt(jQuery(this).next(".qty").val());
if (currentVal == "NaN") currentVal = 0;
if (currentVal > 0)
{
jQuery(this).next(".qty").val(currentVal - 1);
}
}); 
```

现在，要让 ajax 添加到购物车按钮与 list.phtml 上的数量输入框一起工作，必须进行一些修改（来源：http: [//forum.aheadworks.com/viewtopic.php?](http://forum.aheadworks.com/viewtopic.php?f=33&t=601) f=33&t=601 ）

必须替换的原始代码是：

```
<!-- Find this block of code: -->
<?php if($_product->isSaleable()): ?>
<button type="button" class="button" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
<?php else: ?> 
```

它必须用下面的代码替换，如上面发布的论坛链接中所述：

```
<!-- And replace it with this block of code: -->
<?php if($_product->isSaleable()): ?>
<script type="text/javascript">
function setQty(id, url) {
var qty = document.getElementById('qty_' + id).value;
document.getElementById('cart_button_' + id).innerHTML = '<button type="button" class="button" onclick="setLocation(\'' + url + 'qty/' + qty + '/\')"><span><span>Add to Cart</span></span></button>';   
}
</script>
<label for="qty"><?php echo $this->__('Qty:') ?></label>
<input type="text" name="qty_<?php echo $_product->getId(); ?>" id="qty_<?php echo $_product->getId(); ?>" maxlength="12" value="1" onkeyup="setQty(<?php echo $_product->getId(); ?>, '<?php echo $this->getAddToCartUrl($_product) ?>');" title="<?php echo $this->__('Qty') ?>" class="input-text qty" />
<span id="cart_button_<?php echo $_product->getId(); ?>"><button type="button" class="button" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button></span> 
<?php else: ?> 
```

我不知道为什么添加到购物车的数量只有在手动输入值时才正确。使用 +（加号）或 -（减号）按钮时，我也需要将正确的数量添加到购物车中。出于某种原因，输入框中的数量会发生变化，但是在单击添加到购物车后，此值不是购物车中的值（始终有 1 个产品添加到购物车）。

是什么导致了这个问题？解决这个问题的解决方案是什么？我很想理解并解决这个问题，因为我整个下午都在尝试。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T22:02:42.463

打算将其作为评论放入，但需要对其进行格式化以便于查看

我建议在谷歌浏览器中打开页面，然后使用开发者工具做几件事：

1.  [使用脚本面板](https://developers.google.com/chrome-developer-tools/docs/scripts)单步执行 jQuery 代码- 然后您可以确保代码正确设置数量。

2.  检查通过 Ajax 的请求是否正确。您可以通过查看[Network 面板](https://developers.google.com/chrome-developer-tools/docs/network)、识别 Ajax 调用并检查发送到控制器的 qty 值是否正确来执行此操作。

就个人而言，我会检查 setQty 函数是否由 +（加号）和 -（减号）按钮触发，或者至少 setQty 函数与加号和减号按钮执行相同的操作。

从您发布的代码看来，加号和减号按钮代码中可能需要 setQty 函数中的这一行

```
document.getElementById('cart_button_' + id).innerHTML = '<button type="button" class="button" onclick="setLocation(\'' + url + 'qty/' + qty + '/\')"><span><span>Add to Cart</span></span></button>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-30T07:49:03.043

1.  **从输入**标签中**删除 setQty**函数。
***   **在Add To Cart Button**标记中粘贴它而不是**setLocation**函数***   使用**onmousedown**事件**添加到购物车按钮**标签。*   在脚本中使用**onmouseup**事件代码看起来像

    ```
     <?php if($_product->isSaleable()): ?>  

      <script type="text/javascript">
         function setQty(id, url) {
         var qty = document.getElementById('qty_' + id).value;
         document.getElementById('cart_button_' + id).innerHTML = '<button type="button" class="button" onmouseup="setLocation(\'' + url + 'qty/' + qty + '/\')"><span><span>Add to Cart</span></span></button>';   
         }
      </script>   

      <label for="qty"><?php echo $this->__('Qty:') ?></label>

      <a class="decrement_qty" href="javascript:void(0)">  &nbsp - &nbsp</a>

      <input type="text" 
         name="qty_<?php echo $_product->getId(); ?>" 
         id="qty_<?php echo $_product->getId(); ?>" 
         maxlength="12" value="1" 
         title="<?php echo $this->__('Qty') ?>" class="input-text qty" />

      <a class="increment_qty" href="javascript:void(0)"> &nbsp + &nbsp</a> 

      <span id="cart_button_<?php echo $_product->getId(); ?>">
        <button type="button" 
                class="button"
                onmousedown="setQty(<?php echo $_product->getId(); ?>, '<?php echo $this->getAddToCartUrl($_product) ?>');">
        <span><span><?php echo $this->__('Add to Cart') ?></span></span>
        </button>
      </span>
     <?php else: ?>
        <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
     <?php endif; ?> 
    ```

    *   单击锚标记时，使用以下脚本增加和减少值

    ```
    <script type="text/javascript">
      jQuery(document).ready(function(){
        jQuery('.increment_qty').click(function() {
          var oldVal = jQuery(this).parent().find("input").val();
            if ( parseFloat(oldVal) >= 1 ) {
            var newVal = parseFloat(oldVal) + 1;
            jQuery(this).parent().find("input").val(newVal);
          }
        });

        jQuery('.decrement_qty').click(function() {
          var oldVal = jQuery(this).parent().find("input").val();
          if ( parseFloat(oldVal) >= 2 ) {
            var newVal = parseFloat(oldVal) - 1;
            jQuery(this).parent().find("input").val(newVal);
          }
        });
      });
    </script> 
    ```****

# android - 注册我的应用程序以显示在“使用对话框的完整操作”中

> ID：11992923
> 
> 赞同：0
> 
> 时间：2012-08-16T18:02:52.693
> 
> 标签：android

我正在尝试将我的应用程序添加到“使用对话框完成操作”对话框中。当用户单击主页按钮时会出现此对话框。

这是对话框： ![在此处输入图像描述](../Images/0dac77d5b5b7a26e550d7e334f83ce9e.png)

我们怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:07:53.297

为您的活动使用以下意图过滤器

```
<intent-filter>
      <action android:name="android.intent.action.MAIN" />
      <category android:name="android.intent.category.HOME"/>
      <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

# ruby-on-rails - 在 after_initialize 回调中 Rails 关联为零

> ID：11992928
> 
> 赞同：3
> 
> 时间：2012-08-16T18:03:08.290
> 
> 标签：ruby-on-rails, activerecord, callback

我有一个名为 Purchase 的模型，其中包含一个名为 tickets 和 amount 的字段。这个模型属于Event，它是有价格的。我想在创建新的 Purchase 后调用 update_amount 回调，但在回调方法中，关联的事件似乎不存在。

```
class Purchase < ActiveRecord::Base
  belongs_to :event
  attr_accessible :event_id, :tickets, :amount
  delegate :price, to: :event
  after_initialize :update_amount
  ...
  def update_amount
   update_attribute :amount, self.tickets * self.price
  end
end

class Event < ActiveRecord::Base
  attr_accessible :price
  ...
end 
```

但是，当我测试它时，我遇到了以下情况：

```
$ Purchase.new(tickets: 2, event_id: 1541)  
RuntimeError: Purchase#price delegated to event.price, but event is nil: <Purchase
id: nil, user_id: nil, event_id: nil, amount: nil, tickets: 1,
event_date: nil, created_at: nil, updated_at: nil, checkout_id: nil,
checkout_uri: nil, state: "incomplete"> 
```

请注意，系统中有一个 id 为 1541 的事件，但 ActiveRecord 无权访问它？我在没有委托的情况下尝试了同样的事情，使用 event.price，同样的事情发生了，即没有找到 NilClass 错误的价格。

谁能帮我理解这一点？不是在`after_initialize`区块中形成关联吗？有什么我忽略的吗？

* * *

PS：我最终在回调中添加了一个守卫，因此如果 Event 为 nil，它就不会被调用。不过，这只是一个 hack，有朝一日能彻底解决这个问题会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T13:13:35.510

[http://edgeguides.rubyonrails.org/active_record_callbacks.html#after-initialize-and-after-find](http://edgeguides.rubyonrails.org/active_record_callbacks.html#after-initialize-and-after-find)

after_initialize 就像 Ruby 对象的构造函数——在将任何数据库信息加载到该对象之前调用它。

您可能想要的是一个 :before_save 回调来根据门票和价格设置金额。本质上，“在我保存自己之前，根据我当前的门票数量和门票价格重新计算我的金额。然后，将我写入数据库。”

# java - Java 的 String.split() 删除尾随的空条目

> ID：11992932
> 
> 赞同：3
> 
> 时间：2012-08-16T18:03:19.167
> 
> 标签：java, split

我正在尝试解析一些管道分隔的记录。我有这个代码：

```
public class Test {
    public static void main(String[] args) throws Exception {
        String[] components = "EN|1056209|||KA3NDL|L|||||||||||||||||||||".split("\\|");
        System.out.println(java.util.Arrays.toString(components));
    }
} 
```

你会期望它打印出来：

```
[EN, 1056209, , , KA3NDL, L, , , , , , , , , , , , , , , , , , , , , ] 
```

但事实并非如此。它打印：

```
[EN, 1056209, , , KA3NDL, L] 
```

访问数组的`length`属性`components`表明它正在正确打印。

有人知道为什么这是/一种解决方法吗？

**编辑：**

这有效：

```
public class Test {
    public static void main(String[] args) throws Exception {
        String[] components = "EN|1056209|||KA3NDL|L|||||||||||||||||||||".split("\\|", -1);
        System.out.println(java.util.Arrays.toString(components));
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-16T18:09:56.493

[`String.split`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)`Strings`没有限制参数从结果数组中删除所有尾随空。您需要包括一个限制：

```
String str = "EN|1056209|||KA3NDL|L|||||||||||||||||||||";
String[] components = str.split("\\|", -1); 
```

来自[`String.split(String, int)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)：

> 如果 n 为非正数，则该模式将尽可能多地应用，并且数组可以具有任意长度。如果 n 为零，则该模式将被应用尽可能多的次数，数组可以有任意长度，并且尾随的空字符串将被丢弃。

调用`String.split(String)`等效于调用`split`限制为*0*的 2 参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T18:10:55.967

您可以将限制传递给[split](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)方法，以便保留尾随的空字符串：

```
"EN|1056209|||KA3NDL|L|||||||||||||||||||||".split("\\|", -1) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T18:10:13.147

改用两个参数的版本`split()`。它允许您配置是否也应返回空字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T18:12:08.363

看看优秀的 Guava 库中的[Splitter ：](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Splitter.html)

```
String input = "EN|1056209|||KA3NDL|L|||||||||||||||||||||";
Iterable<String> splitIter = Splitter.on("|").split(input);
System.out.println(splitIter); 
```

输出：

```
[EN, 1056209, , , KA3NDL, L, , , , , , , , , , , , , , , , , , , , , ] 
```

# c# - 将列表转换为 XML

> ID：11992936
> 
> 赞同：5
> 
> 时间：2012-08-16T18:03:26.760
> 
> 标签：c#, html, xml, arrays, object

对于我目前正在进行的一个项目，我得到了一个对象数组，每个对象都包含一个“内容”属性和一个“级别”属性。我需要将此列表转换为 HTML 项目符号列表。例如，如果给我以下输入（为简单起见以 JSON 显示）：

```
[ {content: "Hey", level: "1"},
  {content: "I just met you", level: "2"},
  {content: "and this is crazy", level: "2"},
  {content: "but here's my number", level: "1"},
  {content: "call me, maybe", level: "3"} ] 
```

我需要将其转换为以下 XHTML：

```
<ul>
  <li>Hey</li>
  <li>
    <ul>
      <li>I just met you</li>
      <li>and this is crazy</li>          
    </ul>
  </li>
  <li>but here's my number</li>
  <li>
    <ul>
      <li>
        <ul>
          <li>call me, maybe</li>      
        </ul>
      </li>
    </ul>
  </li>
</ul> 
```

最终产品将如下所示：

*   嘿
    *   我刚认识你
    *   这很疯狂
*   但这是我的号码
    *   打电话给我，也许（**<-更深一层**-我认为我不能这样做）

有点奇怪的谜题。关于最有效/最容易实现的算法/方法的任何建议？我在 C# 中实现了这个，但是另一种语言的示例/想法将非常受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:12:29.490

这里的想法是，只要级别大于或等于前一个，就应该嵌套，如果小于，就应该关闭。

```
public string BuildLists(List<KeyValuePair<string, int>> pairs)
{
    int CurrentLevel = 1;
    StringBuilder s = new StringBuilder();

    s.Append("<ul>");

    foreach (KeyValuePair<string, int> pair in pairs)
    {
        if(pair.Value > CurrentLevel)
        {
            //Nest more
            for(int i = 0; i < pair.Value - CurrentLevel; i++)
            {
                s.Append("<li><ul>");
            }
        }
        else if(pair.Value < CurrentLevel)
        {
            //Close Tags
            for(int i = 0; i < CurrentLevel - pair.Value; i++)
            {
                s.Append("</ul></li>");
            }
        }

        s.Append("<li>" + pair.Key + "</li>");

        CurrentLevel = pair.Value
    }

    //Close everything.
    for(int i = 0; i < CurrentLevel - 1; i++)
    {
        s.Append("</ul></li>");
    }

    s.Append("</ul>");
    return s.ToString();
} 
```

# c - 如何在 linux 用户空间应用程序中获得最精确的时钟？

> ID：11992937
> 
> 赞同：1
> 
> 时间：2012-08-16T18:03:27.170
> 
> 标签：c, linux, linux-kernel, arm, clock

我有一个嵌入式系统，我想在内核模块/驱动程序中与对时钟非常敏感的用户空间应用程序共享最准确的时钟，并且应该是最准确的。

1.  这些[功能](http://www.kernel.org/doc/man-pages/online/pages/man7/time.7.html)需要上下文切换和巨大的开销，并且自系统调用以来时钟将不准确。

2.  我想从内核模块中增加一个共享整数[，](http://en.wikipedia.org/wiki/Jiffy_%28time%29)假设用户空间应用程序可以直接访问它，问题是我不能共享一个`integer/long`不与页面大小对齐的页面，并且只为一个声明一个全新的页面`long`变量是一个巨大的开销。

我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T18:11:11.887

您想使用（单调但*不稳定*，因为它受 NTP 影响）或（单调且稳定，但 Linux 特定且需要内核 >= 2.6.28）`clock_gettime()`来获取当前时间（自启动以来）。`CLOCK_MONOTONIC`*`CLOCK_MONOTONIC_RAW`*

 *要以准确的时间间隔醒来，请使用`clock_nanosleep()`并指定`TIMER_ABSTIME`. 不幸的是，`clock_nanosleep()`只支持`CLOCK_MONOTONIC`而不支持`CLOCK_MONOTONIC_RAW`，所以你不能传递一个获得的唤醒时间，`CLOCK_MONOTONIC_RAW`因为这些时钟可能不同。不要忘记检查`EINTR`.*

# php - 使用 $_GET 链接，同时使用 isset 找不到页面

> ID：11992939
> 
> 赞同：0
> 
> 时间：2012-08-16T18:03:32.897
> 
> 标签：php, get, include

我目前正在尝试获取链接：

```
 <a href='?p=bid?Sale_ID=$Sale_ID'>BID</a> 
```

工作，但我不断收到“您请求的页面不存在”消息，如果我使用此链接，此页面有效：

```
 <a href='include/bid.php?Sale_ID=$Sale_ID'>BID</a> 
```

这让我相信我的问题在于我用来在链接上包含页面的 isset：

```
 <?php
  if (isset($_GET['p']) && $_GET['p'] != "") {
  $p = $_GET['p'];
  if (file_exists('include/'.$p.'.php')) {
  @include ('include/'.$p.'.php');
  } elseif (!file_exists('include/'.$p.'.php')) {
  echo 'Page you are requesting doesn´t exist<br><br>';
  }
  } else {
  @include ('include/login-form.php');
  }
  ?> 
```

我尝试添加另一个 isset 用 q 替换 p ，这只会让我的页面陷入混乱。

所以我的问题是，有没有办法解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T18:06:23.827

这里有两个问号：

`?p=bid?Sale_ID=$Sale_ID`

多个查询字符串参数用 & 号分隔：

`?p=bid&Sale_ID=$Sale_ID`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:07:50.163

您显示的查询字符串：`?p=bid?Sale_ID=$Sale_ID`无效。带有字符串的 URL 的结构是：

```
filename.extension?first_parameter=first_value&second_parameter=second_value 
```

所以，如果你想`p`指出哪个页面：

```
?p=bid&Sale_ID=$Sale_ID 
```

.. 使用与号 ( `&`) 分隔您的查询字符串值。

另外，请注意您用于包含文件的方法是不安全的。如果我发送这个怎么办：

```
?p=../../.htpasswd&Sale_ID=0 
```

攻击者可以使用此方法输出您不希望向公众公开的文件的内容。确保在包含文件之前更仔细地检查此变量的值。

我还想警告您不要使用错误抑制器 ( `@`)。错误是你的朋友！您想确切地知道代码中发生了什么，使用错误抑制器可以防止关键问题引起您的注意。真的——永远不要使用错误抑制器。而不是`@include`，使用`include`

我建议更像这样的东西：

```
$file_exists = false;
$page = false;
if (
    isset($_GET['p']) && 
    strlen(trim($_GET['p'])) > 0
){
    $page = preg_replace("/[^a-zA-Z0-9 ]/", "", $_GET['p']);
    $page = str_replace(" ", "-", $page);

    $file_exists = file_exists('include/'.$page.'.php');

    if ($file_exists) {
        include ('include/'.$page.'.php');
    } else {
        $page = false;
        echo 'Page you are requesting doesn´t exist<br><br>';
    }
}
if (!$file_exists ||$page === false)
    include ('include/login-form.php'); 
```

代码的第一部分确保查询字符串值存在并且有一些内容。然后它会清除所有非字母数字字符（这有助于防止利用）。然后，我们检查它是否存在，将结果存储在一个变量中，以便我们再次使用它。

如果页面存在，则包含该文件。如果没有，则输出“找不到页面”消息，并包含登录表单文件。如果查询字符串中未指定页面，则包含登录表单文件。

**文档**

*   `$_GET`- [http://php.net/manual/en/reserved.variables.get.php](http://php.net/manual/en/reserved.variables.get.php)
*   维基百科上的查询字符串 - [http://en.wikipedia.org/wiki/Query_string](http://en.wikipedia.org/wiki/Query_string)
*   *Exploiting PHP File Inclusion* - 关于使用时的安全性的文章`include`和`$_GET`- [http://websec.wordpress.com/2010/02/22/exploiting-php-file-inclusion-overview/](http://websec.wordpress.com/2010/02/22/exploiting-php-file-inclusion-overview/)
*   `preg_replace`- [http://php.net/manual/en/function.preg-replace.php](http://php.net/manual/en/function.preg-replace.php)
*   `str_replace`- [http://php.net/manual/en/function.str-replace.php](http://php.net/manual/en/function.str-replace.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T18:05:21.770

?p=bid “重定向”到您的默认文件，通常是 index.php。您希望它在bid.php 中工作。

您可以使用以下命令在 apache 中设置默认文件： `DirectoryIndex index.php bid.php`

另一个问题是你使用多个？迹象。

`?p=bid&Sale_ID=$Sale_ID`会工作得更好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T18:07:17.607

请记住，file_exists 不使用包含路径，因此您应该这样做：

```
if (file_exists( get_include_path() . 'include/'.$p.'.php')) { 
```

更多信息： [http ://ca2.php.net/manual/en/function.file-exists.php](http://ca2.php.net/manual/en/function.file-exists.php)

# php - 什么是编译指示头？缓存页面..和IE

> ID：11992946
> 
> 赞同：29
> 
> 时间：2012-08-16T18:04:30.803
> 
> 标签：php, caching, http-headers

所以我在 php 中发送一个标头来缓存我的页面（这也集成到我们的“CDN”（contendo/akamai）中）。我总是使用这个 pragma: cache header，我见过各种使用它的例子；但是，我刚刚检查了 fiddler 以测试我们开发的这个 .net 应用程序的流量，它说：

> ```
> Legacy Pragma Header is present: cache
> !! Warning IE supports only an EXACT match of "Pragma: no-cache". IE will ignore the Pragma header if any other values are present.
> ... 
> ```

我想那没关系。其余的响应似乎很好并且符合我的规格。这是我的代码：

```
function headers_for_page_cache($cache_length=600){
    $cache_expire_date = gmdate("D, d M Y H:i:s", time() + $cache_length);
    header("Expires: $cache_expire_date");
    header("Pragma: cache");
    header("Cache-Control: max-age=$cache_length");
    header("User-Cache-Control: max-age=$cache_length");
} 
```

问题是这有关系吗？编译指示标头甚至可以做什么？我需要吗？我检查了 HTTP 标头规范文档，它说它是特定于实现的，唯一强制执行的 Pragma 是“Pragma：no-cache”。

这是在特定时间内缓存标头的最佳选择吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-16T18:23:39.670

以一种非常简化的形式，`Pragma:no-cache or Pragma:cache`现在“几乎”是过时的将缓存指令传递给客户端实现的方式，特别是浏览器和代理。客户端实现响应 Pragma 标头的方式各不相同，这就是规范说它是特定于实现的原因。

更现代的方式`Cache-control`是您可以安全依赖的方式，因为几乎所有客户端实现都严格遵循它。

此外，如果您同时拥有`Cache-control`并`Pragma`设置相同的指令，例如缓存，则`Cache-control`优先。

这是一篇关于与缓存相关的所有内容的**优秀**文章，我认为它是一本非常有趣且有用的读物​​：[http ://www.mnot.net/cache_docs/](http://www.mnot.net/cache_docs/)

# javascript - 我应该将哪些数据传递给 Spotify 应用程序以使分页工作？

> ID：11992951
> 
> 赞同：1
> 
> 时间：2012-08-16T18:04:53.640
> 
> 标签：javascript, spotify

我有一个使用各种视图和模型实现的 Spotify 应用程序，但我无法让寻呼机工作。此处的示例： [如何在 spotify 应用程序 API 中创建类似“轮播”的小部件？](https://stackoverflow.com/questions/8850514/how-to-create-a-carousel-like-widget-in-spotify-apps-api) 当您尝试单击下一个按钮时引发此错误：

> 未捕获的类型错误：对象 # 没有方法“logClientEvent”

我尝试将播放列表和曲目传递给`p.Pager`，但没有任何成功。

另外，我注意到 API 文档中没有关于 Pager 的任何内容——它甚至对公众可用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:17:16.513

刚刚经历了同样的事情并将其推荐给他们的一位开发人员（@possan）。

同时，删除失败的调用：

```
sp.core.logClientEvent = sp.core.logClientEvent || function(){} 
```

# mysql - 将 Wordpress 站点移动到同一服务器上的另一个域时，某些图像不会显示

> ID：11992956
> 
> 赞同：0
> 
> 时间：2012-08-16T18:05:03.593
> 
> 标签：mysql, html, wordpress

我在我们服务器上的测试域名上开发了一个新的 wordpress 网站。我已经设置好网站准备上线......但我不得不将 wordpress 网站移动到我们也在我们的服务器上托管的另一个域名上。

所以我所做的是从测试域名复制所有根文件夹内容并将内容粘贴到新域名的根文件夹中。

然后我登录到 wordpress，更改了所有必要的设置，例如 WORDPRESS URL 和 SITE ADDRESS URL 以及每个单独页面中的图像绝对 URL，以确保我获得了所有内容的正确 URL。

当我点击媒体时，我可以像平常一样看到所有图像。

太好了...然后我去现场查看网站，发现有很多图像丢失了！它们都在媒体面板中 - 但不会出现在网站上！

然后，我仔细检查所有图像是否正确传送……它们都是正确的。

现在为什么有些图像会显示而其他图像不显示？我什至尝试添加一张新照片并使用该照片代替另一张未显示且新照片甚至未显示的照片。

我的问题出在哪里？

例如，我网站上的 1 个幻灯片没有显示图像，给我一个图像“找不到图像”错误：

```
Image not found: http://www.domain.com/wp-content/themes/natural
/lib/timthumb.php?src=http://www.domain.com/wp-content/uploads/2012/08/breakfast-gallery-011.jpg&w=610&h=0&zc=1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T11:41:45.350

问题不在于图像 URls 仅是硬编码的。URL 的最后一部分是硬编码的，但您很可能会在 URL 中嵌入“/wp-content/”，这表明图像的 URL 字符串是动态创建的。我查看了我的 wp_postmeta 表，并且有所有的部分图像 URls（像这样 - 2013/03/expanse2.jpg ）。现在这个 URL 的开头部分和域名在哪里？在我的案例中，域名是所有图片网址中实际缺少的部分。我使用 phpmyadmin 对数据库进行了更深入的研究（但如果您可以启动并运行它，我推荐使用 Webmin）。我遇到了“wp_options”表中的“home”字段。向 Google 询问 wordpress 的正确“主页 url”是什么，这将我带到了这个页面（[http://codex.wordpress.](http://codex.wordpress.org/Function_Reference/home_url)) ，并且这条线在那里（ home_url() 位于 wp-includes/link-template.php. ）。转到该文件，发现它控制了 URL 的构建方式，但没有专门控制上传的图像 URL。最后，我进入一个有图像的页面，查看高级设置，发现图像 URL 只是缺少域。我使用了精彩的搜索和替换脚本来修复它。完毕

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T01:47:34.573

好的，我将用一些建议来回答我的问题。很明显，我的一些图像是“硬编码”的，因为我找不到一些不显示的逻辑原因（即使我查看了 MySQL 中的表格数据）并且因为我不是数据库工程师/开发人员- 我没有准备好深入研究这可能会导致进一步的问题......所以我决定关闭整个 wordpress 网站，创建一个新数据库，重新安装 wordpress，然后我导入了一个导出的 xml 文件我在“迁移站点”之前创建并保存（幸运的是）。

**建议：**

**1)**无论您是否迁移 wordpress 网站，请始终通过创建 wordpress 结构的导出来定期备份您的网站。它可能会为您节省很多未来的工作。

**2)**如果您像我一样是开发和 MYSQL 的业余爱好者或初学者，我建议您在您想要的实际域名上创建您的 wordpress 站点。这将使您免于像我刚刚经历过的“迁移”头痛……以及很多时间。从我的错误中学习。虽然上面的问题可能有一个解决方案，但它超出了我的专业知识/知识，也可能超出你的范围......所以让你自己轻松:)

# charts - JavaFX 2.x：从线性切换到对数 Y 轴

> ID：11992960
> 
> 赞同：1
> 
> 时间：2012-08-16T18:05:14.530
> 
> 标签：charts, javafx-2

我有一个使用 Y 轴作为 NumberAxis 绘制为线性的 XY 图表系列。

使用 CheckBox 上的标志，我想从（仅限 Y）NumberAxis 动态切换到 LogarithmicAxis。

如何执行此操作？有没有重绘方法或类似的方法？还是我应该删除整个系列并重新绘制？

PS我不是在问如何将数据绘制为对数，这是一个已解决的问题。

# locking - 访问 2007，使用“编辑”按钮或切换锁定表单加载时的所有字段

> ID：11992962
> 
> 赞同：3
> 
> 时间：2012-08-16T18:05:40.290
> 
> 标签：locking, controls, ms-access-2007, field

我正在寻找一种方法来锁定我的表单（这样用户就不会意外修改或删除数据），使用编辑按钮或解锁所有字段的切换。

是否有允许此操作的按钮向导或类似工具，这似乎是一个常见问题。

这仍然是我在 Access 的第一周，如果这个问题有点太笨了，我深表歉意 :)

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:20:07.010

您可以设置 Allow ... 属性。

```
Me.AllowAdditions = False
Me.AllowEdits = False
Me.AllowDeletions = False 
```

# php - word 2003 xml - 用 PHP 制作 word 文件

> ID：11992963
> 
> 赞同：0
> 
> 时间：2012-08-16T18:05:44.110
> 
> 标签：php, xml, ms-word

我正在尝试使用 PHP 和 SimpleXML 创建在 office word 中可读的 xml 文件。由于缺乏描述所有“标签”和属性的良好文档或手册，这真的让我很生气。现在我遇到了这样一个问题：

我有段落，但我希望它不在页面顶部，而是在特定位置。例如：

```
 ______________
|              |
|              |
|              |
|              |
|              |
| paragraph    |
|              |
|______________| 
```

它是页面上的第一段。它的坐标是例如 300px（从顶部）和 20px（从最小）。我怎样才能做到这一点？我想我可以使用文本字段而不是普通段落或使用表格来做到这一点，但这很复杂 - 我希望得到一些属性名称，我可以在其中放置坐标并完成。那可能吗？提前致谢！

编辑：

也许不是解决问题的最佳主意，但我明白了。幸运的是，我发现 word 2003 XML 的回车标记是

`<w:cr />`

我可以很容易地用它来定位我的段落

# algorithm - 将范围分割成可以被位掩码的片段

> ID：11992968
> 
> 赞同：0
> 
> 时间：2012-08-16T18:06:11.610
> 
> 标签：algorithm

我有 2 个任意 16 位整数。举个例子：

```
start: 0010000000000000 (8192)
end:   1111111111111111 (65535) 
```

我想将范围 8192-65535 拆分为可以用位掩码表示的内容。所以在这种情况下，我希望能够识别：

```
start: 0001000000000000 (8192)
end:   0011111111111111 (16383)

start: 0100000000000000 (16384)
end:   0111111111111111 (32767)

start: 1000000000000000 (32768)
end:   1111111111111111 (65535) 
```

我该怎么做呢？不是特定于语言的，只需要一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:20:15.267

这里的想法是找到所有`2^n - 1`介于低值和高值之间的值。这是因为所有块位掩码（如您所追求的那种）都是`2^n - 1`. 这是一些python来实现这一点：

```
def split_range(low, high):
    yield low
    for mask in [(1 << k) - 1 for k in xrange(0, 16) if (1 << k) > low and (1 << k) < high]:
        yield mask
    yield high 
```

为你举例

```
In [5]: list(split_range.split_range(8192, 65535))
Out[5]: [8192, 16383, 32767, 65535] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:00:59.397

假设`num`总是至少 8192 ......

```
if num & 0xc000 == 0:
    # bitmask 0xc000 == 1100000000000000
    # first partition if the first two bits are 0
elif num & 0x8000 == 0:
    # bitmask 0x8000 == 1000000000000000
    # second partition if only the first bit is 0
else:
    # third partition 
```

# java - Selenium 2：无法为 Internet Explorer 设置代理

> ID：11992974
> 
> 赞同：1
> 
> 时间：2012-08-16T18:06:29.507
> 
> 标签：java, selenium

我想设置代理并打开 IE（版本 9，selenium 2.25），但这不适用于 IE，尽管它适用于 Firefox。

这是我的代码：

```
String PROXY  = "somehost.com" + ":" + "80";
     org.openqa.selenium.Proxy proxy = new org.openqa.selenium.Proxy();
        proxy.setHttpProxy(PROXY);
        proxy.setFtpProxy(PROXY);
        proxy.setSslProxy(PROXY);

     DesiredCapabilities ieCapabilities = DesiredCapabilities.internetExplorer(); 
     ieCapabilities.setCapability(InternetExplorerDriver.INTRODUCE_FLAKINESS_BY_IGNORING_SECURITY_DOMAINS, true);
     ieCapabilities.setCapability(CapabilityType.PROXY, proxy);
      WebDriver driver = new InternetExplorerDriver(ieCapabilities); 
      driver.get("http://www.cnn.com/"); 
```

发生以下运行时错误：

> 2012 年 8 月 16 日下午 2:00:13 org.openqa.selenium.browserlaunchers.WindowsProxyManager backupRegistrySettings
> 
> 信息：正在备份注册表设置...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T11:57:56.440

您收到的信息恰到好处 - 它也不例外（但信息性信息）。要通过 Selenium 使用 IE，将在注册表中更改一些特定设置（仅适用于 Selenium 运行，顺便说一句 - 注册表将在之后恢复）。

您是否有权更改您的注册表（检查您是否可以运行 regedit）？

# maven - 如何使用 Maven 通过我的 WAR 分发 Jetty？

> ID：11992977
> 
> 赞同：0
> 
> 时间：2012-08-16T18:06:38.573
> 
> 标签：maven, jetty

我已经成功地构建了一个 Web 应用程序，最终我的目标目录中的 war 文件可以部署在 Jetty 中。

我目前向客户提供安装指南，上面写着“下载并安装 Jetty 并将 WAR 放在正确的位置等”。但是，有些人报告了配置问题，或者只是不想下载其他软件来运行我的。

我宁愿给他们一个 zip 文件，他们可以解压缩并运行。

是否可以配置 maven 为我创建一个包含 Jetty 和我的战争文件在正确位置的 zip 分发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:30:41.343

[编辑] Codehaus 已不复存在，但 Jetty 多年前在 Eclipse 基金会找到了家。[http://www.eclipse.org/jetty](http://www.eclipse.org/jetty)

* * *

[http://central.maven.org/maven2/org/mortbay/jetty/jetty-hightide/8.1.16.v20140903/jetty-hightide-8.1.16.v20140903.pom](http://central.maven.org/maven2/org/mortbay/jetty/jetty-hightide/8.1.16.v20140903/jetty-hightide-8.1.16.v20140903.pom)

第 46 行（ish）是我们从 eclipse 中提取 jetty-distribution 并解压缩到程序集目录的地方，然后剩下的行是我们向其中添加其他内容

所以要回答你的问题，是的，你可以，这很容易，码头本身就是用码头高潮分布来做的

# c# - C#：泛型——推断泛型类型的泛型类型

> ID：11992981
> 
> 赞同：0
> 
> 时间：2012-08-16T18:06:55.080
> 
> 标签：c#, generics

我什至不知道如何问这个问题，所以我只给出代码示例。

这是域：

```
public interface ISubscriptionProvider<T>
{
    void Subscribe(Action<T> callback);
}

public class Notification {}

public class CurrentUserNotifications : ISubscriptionProvider<Notification>
{
    public void Subscribe(Action<Notification> callback) { }
} 
```

这是我想让魔法变得神奇的方法：

```
public void Subscribe<P, T>(Action<T> callback) where P : ISubscriptionProvider<T>
{
    // body left out -- code uses P
} 
```

这行得通，这就是你如何称呼它：

```
Subscribe<CurrentUserNotifications, Notification>((n) => Console.WriteLine(n)); 
```

所以问题是：**有没有办法让它像这样调用**：

```
Subscribe<CurrentUserNotifications>((n) => Console.WriteLine(n)); 
```

基本上，它是否可以推断出动作类型应该只是来自`ISubscriptionProvider<T>`.

这个订阅方法存在于一个静态类上（它是一个静态方法，我把那部分省略了）。这个想法是它将负责构建`ISubscriptionProvider<T>`并保持它为单例（可能使用结构映射）。所以在使用中：

```
Messages.Subscribe<CurrentUserNotifications>((n) => Console.WriteLine(n)); 
```

谢谢！

更新：

这有点离题，但如果有任何 scala 人读到这个......

......是更高种类的例子吗？就像是：

```
public void Subscribe<P<T>>(Action<T> callback) { } 
```

`P<_>`高种类型在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:32:57.113

为什么你不能只使用

```
public void Subscribe<T>(Action<T> callback)
{
} 
```

P 参数类型与您的方案无关，因为它从未使用过。

# php - 无法让 Google 地图显示在我的网站上。

> ID：11992984
> 
> 赞同：0
> 
> 时间：2012-08-16T18:06:56.477
> 
> 标签：php, javascript, google-maps, google-maps-api-3

我通过以下方式得到我的经纬度：

```
$geocode = file_get_contents('http://maps.google.com/maps/api/geocode/json?address=' . $g_location . '&sensor=true');
$output= json_decode($geocode);

$lat = $output->results[0]->geometry->location->lat;
$long = $output->results[0]->geometry->location->lng; 
```

我返回正确的纬度和经度。所以现在我尝试构建我的地图：

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCTQqh2ksk9ZTqSfx-_ki_lHj-q32kYIY8&sensor=false">    </script>
<script language="JavaScript">
 var map;
      function initialize() {
        var mapOptions = {
          zoom: 8,
          center: new google.maps.LatLng(<?=$lat?>, <?=$long?>),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);
      }

      google.maps.event.addDomListener(window, 'load', initialize);      
</script> 
```

HTML：

```
div id="map_canvas"></div> 
```

什么都没有出现。我错过了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:13:02.650

你的 <`div id="map_canvas">`需要一个尺寸，（宽度和高度）所以，

```
<div id="map_canvas" style="width:400px;height:300px"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:20:10.870

添加以下内容。您还需要`initialize()`在正文中的 onload 函数中使用

```
<body onload="initialize()">
    <div id="map_canvas" style="width: 500px; height: 300px"></div>
</body> 
```

请参考谷歌地图操场示例

[http://code.google.com/apis/ajax/playground/?exp=maps#map_simple](http://code.google.com/apis/ajax/playground/?exp=maps#map_simple)

# android - 如何按日期、月份、小时和分钟在 android 日程安排上发出通知？

> ID：11992986
> 
> 赞同：0
> 
> 时间：2012-08-16T18:06:56.477
> 
> 标签：android, date, notifications

我有一个带有通知的应用程序，我想每年安排一次。在我的代码下面：

```
private void checkAlarm() {
    Calendar c = Calendar.getInstance();
    int date   = c.get(Calendar.DATE);
    int month  = c.get(Calendar.MONTH);
    int year   = c.get(Calendar.YEAR);
    int hour   = c.get(Calendar.HOUR_OF_DAY);
    int minute = c.get(Calendar.MINUTE);

          if (date==17 && month==8 && hour==6 && minute==0){
              showNotification(R.drawable.sphere_notification, "hari ini 17 Agustus");
          }
}

private void showNotification(int icon, String text) {
    Notification notification = new Notification(icon, "Hari ini memperingati Hari Kemerdekaan RI", System.currentTimeMillis());
    notification.flags  = Notification.FLAG_AUTO_CANCEL;
    notification.sound  = Uri.parse("android.resource://app.vmh.main/"+R.raw.agustus); 

    PendingIntent facebook = PendingIntent.getActivity(this, 0,
            new Intent(this, ShareOnFacebook.class),0);

    PendingIntent twitter = PendingIntent.getActivity(this, 0,
            new Intent(this, ShareOnTwitter.class),0);

    Intent exit = new Intent (Intent.ACTION_MAIN);  
           exit.addCategory(Intent.CATEGORY_HOME);  

    PendingIntent mainIntent = PendingIntent.getActivity(this, 0,
            exit,0);

    if (Pengaturan.getSetFacebook(this)){
        notification.setLatestEventInfo(this, "Kemerdekaan - Remainder",
        text, facebook);

    }else if((Pengaturan.getSetFacebook(this)) && (Pengaturan.getSetTwitter(this))){
        notification.setLatestEventInfo(this, "Kemerdekaan - Remainder", 
                text, facebook);

    }else if(Pengaturan.getSetTwitter(this)){
            notification.setLatestEventInfo(this, "Kemerdekaan - Remainder", 
                    text, twitter);

    }else
        notification.setLatestEventInfo(this, "Kemerdekaan - Remainder",
                text, mainIntent);

    // Send the notification.
    mNM.notify(1, notification); 
} 
```

我在实施日期和月份时遇到问题，通知不起作用。如果我使用小时和分钟，我的应用程序正在运行。你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:15:22.740

您可以使用[AlarmManager 来安排](http://justcallmebrian.com/?p=129)您的任务。

# python - 对 .py 文件中的文本文件运行 doctest？

> ID：11992994
> 
> 赞同：1
> 
> 时间：2012-08-16T18:07:32.427
> 
> 标签：python, visual-studio

我想在 .txt 文件上运行 Python 的 doctest（即，不在 docstring 上），但我不想转到命令行。

> python -m doctest myfile.txt

我不想从命令行执行此操作的原因是我只是不想离开 Visual Studio。我想用 F5 运行它，然后在 VS 中查看我的输出。

问题：如何从 .py 文件运行 doctest，而不是从命令行运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:09:28.520

查看[doctest.testfile](http://docs.python.org/library/doctest.html#simple-usage-checking-examples-in-a-text-file)。我认为这会做你想要的......

`doctest.py`以下是示例用法的一些来源：

```
def _test():
    testfiles = [arg for arg in sys.argv[1:] if arg and arg[0] != '-']
    if not testfiles:
        name = os.path.basename(sys.argv[0])
        if '__loader__' in globals():          # python -m
            name, _ = os.path.splitext(name)
        print("usage: {0} [-v] file ...".format(name))
        return 2
    for filename in testfiles:
        if filename.endswith(".py"):
            # It is a module -- insert its dir into sys.path and try to
            # import it. If it is part of a package, that possibly
            # won't work because of package imports.
            dirname, filename = os.path.split(filename)
            sys.path.insert(0, dirname)
            m = __import__(filename[:-3])
            del sys.path[0]
            failures, _ = testmod(m)
        else:
            failures, _ = testfile(filename, module_relative=False)
        if failures:
            return 1
    return 0

if __name__ == "__main__":
    sys.exit(_test()) 
```

# ruby-on-rails-3 - 在 Rails 3.2 中实现 HTML5 服务器端事件的示例

> ID：11992995
> 
> 赞同：11
> 
> 时间：2012-08-16T18:07:35.873
> 
> 标签：ruby-on-rails-3, html

我正在尝试将 HTML5 服务器端事件引入我的 Rails 3.2 项目。我在 Google.com 上进行了一些搜索，但大多数示例都使用 php。Rails 上只有一个使用 的示例`Goliath`，我没有使用它。

我`Thin`在我的开发和部署中使用`passenger`. 我认为这对于为 SSE 进行文本流传输是有效的。Rails 3.2 上是否有任何示例可供参考？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T02:59:22.403

Rails 4.0 正在实施 SSE，升级您的 rails 并通过 rails 4.0 ActiveController::Live 实施 SSE 可能是最好的选择。

否则，您可能会遇到不稳定/性能/维护较差的选项，例如 Juggernaut 或其他框架。

来源： http:
[//ngauthier.com/2013/02/rails-4-sse-notify-listen.html](http://ngauthier.com/2013/02/rails-4-sse-notify-listen.html) [http://edgeguides.rubyonrails.org/4_0_release_notes.html#railties-notable-changes](http://edgeguides.rubyonrails.org/4_0_release_notes.html#railties-notable-changes)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T11:15:28.290

您可以查看“抽筋”宝石 - [http://cramp.in/](http://cramp.in/)

它内置了对 HTML5 技术的支持 - WebSockets 和 SSE

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T05:47:08.890

这不完全是 HTML 5 服务器端事件，但它是完成基本相同的尝试和真实的方法。为了从服务器推送到客户端，过去很多人包括我自己都使用过 Juggernaut gem（https://github.com/maccman/juggernaut - 在 node.js 之上运行）。与服务器端事件略有不同，但可能需要更多时间测试。宝石似乎仍在更新。