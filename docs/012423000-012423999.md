# StackOverflow 问答 12423000-12423999

# caching - 缓存 Symfony 自定义模型类方法

> ID：12423000
> 
> 赞同：0
> 
> 时间：2012-09-14T10:50:01.497
> 
> 标签：caching, symfony1, propel, symfony-1.2

我创建了一个接收字符串值的方法，将其与用户记录匹配并返回匹配的用户记录。

我的代码：

```
class UsersPeer extends BaseUsersPeer
{
  public static function getHashUser($hash)
  {
    $c = new Criteria();
    $c->add(UsersPeer::HASH,$hash);
    return UsersPeer::doSelectOne($c);
  }
} 
```

缓存这个函数有意义吗？

我的理解是，由于传递给函数的字符串值对于不同的用户总是不同的，所以函数每次都要执行。但是，对于先前已将字符串值传递给方法和检索记录的用户，它不应再次执行。只有在这种情况下，功能缓存才会起作用。

鉴于大约有 50K 用户，为此方法启用缓存是否有意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T12:13:45.173

这是一个非常简单的查询，即使哈希列没有被索引也应该很快（如果有的话也很快）——我认为没有理由缓存结果。

结果缓存通常用于查询复杂、包含聚合数据或子查询的情况。即使这样，您也应该先处理查询，看看是否可以优化它。

*更新*：

如果您查看[`sfCache`](http://trac.symfony-project.org/browser/branches/1.4/lib/cache/sfCache.class.php)该类（所有具体缓存实现的基础），您会发现您存储在缓存中的任何内容都有生命周期，这意味着它只能存储有限的时间。这意味着缓存的大小是有限的。

缓存是这样工作的：

*   你的函数被调用
*   您根据函数名称和参数计算缓存键
*   询问缓存是否有给定键的存储值
*   如果是，您将其取出并返回
*   你计算返回值
*   你将它存储在缓存中然后返回它

是否值得缓存函数的返回值始终取决于性能测量。它是一个长时间运行的计算密集型函数吗？是性能瓶颈吗？如果您的答案是肯定的，则可能值得启用缓存。

还要记住，每次进行函数缓存时，它都会增加您必须维护的代码量（和复杂性）。

# python - 为什么用户密码没有在 django admin 中被散列？

> ID：12423006
> 
> 赞同：8
> 
> 时间：2012-09-14T10:50:12.843
> 
> 标签：python, django, admin

我在使用`syncdb`命令时创建了一个用户，它可以完美登录。但是当我从 django admin 创建用户时，它已成功创建，但在登录时会导致错误。我收到错误：

```
Unknown password hashing algorithm 'password'. Did you specify it in the PASSWORD_HASHERS setting? 
```

有什么问题？如何解决它，以便在管理员中保存用户时自动加密密码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-04T05:55:02.910

将密码存储为文本而不是散列密码的解决方案是使用 django.contrib.auth.admin 中的 UserAdmin 而不是 ModelAdmin。

```
from django.contrib.auth.admin import UserAdmin

class EmployeeAdmin(UserAdmin):
    pass

admin.site.register(Employee, EmployeeAdmin) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T10:11:33.077

我在子类化 Django 用户的情况下遇到了同样的问题，然后为它创建了一个模型管理员并使用自动生成的 Django 管理员表单来创建一个用户。

所以我的models.py中有这样的东西

```
class Employee(User):
    job = models.CharField(max_length=100) 
```

这在我的 admin.py

```
class EmployeeAdmin(admin.ModelAdmin):
    pass
admin.site.register(Employee, EmployeeAdmin) 
```

现在 Django 会自动创建一个表单，用于在 Django admin 中添加新员工。但是当这个表单用于创建用户时，密码根本不会被散列。所以出于某种原因，当模型派生自 Django 的内置用户时，Django 会为密码创建普通的文本输入字段。不知道你有没有同样的情况。

不幸的是，我找不到一个简单的解决方案来解决这个问题。我也不知道为什么 Django 没有自动为密码创建正确的表单字段。然而，一种可能性是使用包含密码小部件的自定义表单覆盖自动表单。请参阅[https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_overrides](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_overrides)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-15T23:32:17.560

我遇到了 Rubinous 答案中显示的相同问题，也可能是您的问题。

`django.contrib.admin.ModelAdmin`从而不是继承我的用户模型时发生了问题`django.contrib.auth.admin.UserAdmin`

通过这样做，我绕过了必要的用户功能

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T03:40:56.727

Django 不将密码存储为纯文本。它首先对它们进行散列，然后它们存储散列。因此，当用户登录时，Django 将相同的哈希函数应用于用户输入，然后比较两个哈希值 - 来自用户输入和存储在数据库中的内容。

然而，为了使事情更灵活，Django 不存储密码哈希，它确实如此，但此外，它还存储生成哈希的算法。想象一下这种情况 - 您使用散列函数`X`生成密码散列，但随后您意识到该函数由于某种原因不再安全并且您切换到散列函数`Y`。然而，这是一个问题，因为此时，无论谁的密码哈希是使用 function 存储的`X`，他们都将无法再登录。这就是为什么 Django 除了存储哈希值本身之外，还存储生成 has 的方法。这是哪里`PASSWORD_HASHERS`设置进来。事实上，Django将生成哈希的方法存储在db中，当读取值时，它并没有真正告诉Django如何执行哈希函数本身。所以`PASSWORD_HASHERS`有点像散列 Python 函数（实际上是一个类，但无论如何......）和存储在 db 中的值之间的映射器。

所以回到你的问题。错误消息意味着 Django 不知道`password`用于将密码哈希存储在数据库中的哈希函数，或者至少它不在`PASSWORD_HASHERS`.

我可以想到可能发生这种情况的几个原因。

*   确保你这样做`syncdb`，它使用与`settings.py`运行服务器时相同的文件来访问管理员。可能是使用了不同的设置。

*   但是开发人员通常不会在其中进行修改`PASSWORD_HASHERS`，`settings.py`而只是使用默认值。在这种情况下，请确保在执行`syncdb`和运行服务器时使用具有相同安装版本的 Django 的相同 Python。例如，如果您`syncdb`在一个 virtualenv 中执行并在不同的 env 中运行服务器，那么 Django 版本可能会有所不同，因此它们可能具有不同的设置`PASSWORD_HASHERS`，因此您运行`syncdb`的位置可能会使用未定义的哈希函数运行服务器。

# php - 确保 API 连接是通过 https

> ID：12423008
> 
> 赞同：0
> 
> 时间：2012-09-14T10:50:17.203
> 
> 标签：php, api, ssl, https

如何确保对我们 API 的所有请求都是通过 https 进行的？我们是使用 .htaccess 文件自动重定向到 ssl，还是应该直接拒绝不通过 h​​ttps 的连接并显示错误消息？如果是第二个，那么实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:03:01.560

您应该让 API 用户的生活尽可能轻松——但对于开发人员而言，“轻松”通常意味着明确。

在这些情况下，我的强烈偏好是将其视为违反先决条件，并抛出错误。如果您的 API 是 RESTful，我更喜欢其中一个 HTTP 错误 - 例如自定义错误 503 FORBIDDEN，自定义文本说明您必须在 SSL 上连接。

错误地连接到非加密服务端点的开发人员将获得即时、清晰、可读的反馈。

我会警告不要重定向 - 这会作为副作用实现其目标，并且当开发人员使用 Web 浏览器连接时可能会很好，并且在使用他们的 Web 服务客户端时会失败（根据我的经验，并非所有这些都可以很好地使用重定向）。

我还宁愿抛出一个错误而不是简单地不打开 HTTP 端口/侦听器——连接通常需要一段时间才能超时，这会导致您的客户端开发人员认为服务器已关闭，而不是立即意识到根本原因错误。

# ios - 在 iOS 的 opengl 中撤消重做

> ID：12423015
> 
> 赞同：1
> 
> 时间：2012-09-14T10:50:38.767
> 
> 标签：ios, opengl-es

我在苹果 GLPaint 代码的 opengl 中实现撤消重做。目前我的方法是：

1.  清除所有缓冲区。
2.  重新绘制除最后一个以外的所有数据。

但这会导致性能问题。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:58:34.767

解决方案 [https://github.com/larsxschneider/Undo-in-OpenGL-ES](https://github.com/larsxschneider/Undo-in-OpenGL-ES)

讨论 [如何在 iPhone 上的 OpenGL ES 绘画应用程序中实现撤消？](https://stackoverflow.com/questions/3474252/how-would-i-implement-undo-in-an-opengl-es-painting-application-on-the-iphone)

您可以轻松添加重做。

# makefile - Makefile：需要明确环境变量和 make 变量的混合使用

> ID：12423017
> 
> 赞同：0
> 
> 时间：2012-09-14T10:50:46.240
> 
> 标签：makefile

我基本上正在研究一个有问题的 makefile，这让我对以下情况感到困惑。

```
default:
     echo "Build started with $@ at $(ENV_VAR)";\
     ENV_VAR=$(NEW_DIR); \
     cd $(ENV_VAR); \
     $(MAKE); 
```

***程序员的目标：***

基本上，程序员打算用新值（目录路径）**NEW_DIR覆盖环境变量****ENV_VAR**，然后在该目录中递归执行 make。

 *****此生成文件中的错误：***

我看到的错误是编码器使用了**"cd $(ENV_VAR)"**而不是**"c​​d $$(ENV_VAR)"**。因此，正因为如此，我们实际上并没有为“cd”命令使用覆盖的 make 变量，而是在执行 $(MAKE) 之前仍然使用环境变量的值。由于路径不存在，cd 命令也失败了。最后我们最终做了一个递归 make。

***我的问题***

正如我在上一段中提到的，我们处于递归 make 的场景中。有趣的是，我看到的是当第二次调用同一个目标时，我看到 $(ENV_VAR) 以反映 NEW_DIR 的覆盖值。这让我感到困惑。

***样本输出：***

认为：

NEW_DIR=/新目录 OLD-DIR=/旧目录

输出：

```
Build started with default at /old-dir
bin/sh /old-dir: no such file (or) directory
Build started with default at /new-dir 
```

请对此提出任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:57:39.523

你是对的那`$(ENV_VAR)`是不正确的。但`$$(ENV_VAR)`也是不正确的。

Make 扩展命令中的变量，然后将命令传递给 shell，shell 进行自己的扩展。所以

```
default:
     echo "Build started with $@ at $(ENV_VAR)";\
     ENV_VAR=$(NEW_DIR); \
     cd $(ENV_VAR); \
     $(MAKE); 
```

变成一个shell命令

```
echo "Build started with $@ at /old_dir";\
ENV_VAR=/new_dir; \
cd /old_dir; \
make 
```

该命令尚未执行；任务还没有进行，已经太迟了。

建议的解决方案也不起作用。这个：

```
default:
     echo "Build started with $@ at $(ENV_VAR)";\
     ENV_VAR=$(NEW_DIR); \
     cd $$(ENV_VAR); \
     $(MAKE); 
```

变成这样：

```
echo "Build started with $@ at /old_dir";\
ENV_VAR=/new_dir; \
cd $(ENV_VAR); \
make 
```

这看起来不错，但请注意这`cd $(ENV_VAR);`是*Make*语法，而不是 shell 语法（至少不是 bash）。正确的 shell 语法是`cd $ENV_VAR`，所以规则应该是：

```
default:
     echo "Build started with $@ at $(ENV_VAR)";\
     ENV_VAR=$(NEW_DIR); \
     cd $$ENV_VAR; \
     $(MAKE); 
```

根据[手册](http://www.gnu.org/software/make/manual/make.html#Environment)，“默认情况下，只有来自环境或命令行的变量才会传递给递归调用”（但如果您选择，您可以覆盖此行为）。由于`ENV_VAR`是一个环境变量，它会被传递给子make，如果你在命令shell中修改它，子make会收到修改后的值。

最后，我建议你这样尝试：

```
default:
    echo "Build started with $@ at $(ENV_VAR)";
    Make -C $(NEW_DIR) ENV_VAR=$(NEW_DIR); 
```**

# android - 增长视图和 MotionEvent.getX()/MotionEvent.getRawX()

> ID：12423018
> 
> 赞同：1
> 
> 时间：2012-09-14T10:50:47.650
> 
> 标签：android, math, touch, motionevent

我有以下代码可以扩展磁贴。但是，我有不止一个这些图块，我需要代码对它们中的每个人都是通用的。

启动时的用户界面：http: [//s14.postimage.org/9wn8b2my9/Screenshot_2012_09_14_12_03_14.png](http://s14.postimage.org/9wn8b2my9/Screenshot_2012_09_14_12_03_14.png)

我有两个选择：

第一个是使用原始的 X、Y 值，这意味着我的手指在屏幕上的确切位置。这样我可以很容易地计算出几个点的准确宽度、高度和距离。一个问题是该值不适用于所有图块。例如，左上角的图块不会展开，而左下角的图块将扩大到超出应有的水平。唯一真正似乎在听的瓷砖是中间的瓷砖。

```
else if(event.getAction() == MotionEvent.ACTION_MOVE) {         
        if((newPos.x > this.leftParent.getX()) && (newPos.x < this.rightParent.getX())){
            //reposition the touch indicator
            this.child.setX(newPos.x-42); //-42 because pic = 84dp
            this.child.setVisibility(VISIBLE);
        }
        if((newPos.y < this.bottomParent.getY()) && (newPos.y > this.topParent.getY())){
            this.child.setY(newPos.y-42);
            this.child.setVisibility(VISIBLE);
        }

        if((this.rightParent.getX() - newPos.x) < this.originalSize.x){
            // X too narrow
            this.leftParent.setX((float) (this.rightParent.getX()-this.originalSize.x));
            Log.e("loc", "X TOO NARROW");
        } else if((this.rightParent.getX() - newPos.x) > this.rightParent.getX()-this.originalSize.x*1.6){
            // X too wide
            Log.e("loc", "X TOO WIDE newPos: "+newPos.x+", "+newPos.y+" new width:"+(this.rightParent.getX() - newPos.x)+ " old width:"+(this.rightParent.getX()-this.originalSize.x*1.6));
        } else if(((this.rightParent.getX() - newPos.x) > this.originalSize.x) && ((this.rightParent.getX() - newPos.x) < this.rightParent.getX()-this.originalSize.x*1.6)){ 
            // X inbetween required values
            elasticPosition.x = (int) Math.pow(Math.E, -newPos.x);
            this.leftParent.setX(newPos.x);
            Log.e("loc", "X OK");
        }

        if((this.bottomParent.getY() - newPos.y) < this.originalSize.y){
            // Y too narrow
            this.topParent.setY(this.bottomParent.getY()-this.originalSize.y);
            Log.e("loc", "Y TOO NARROW");
        } else if((this.bottomParent.getY() - newPos.y) > this.bottomParent.getY()-this.originalSize.y*1.6){
            // Y too wide
            Log.e("loc", "Y TOO WIDE");
        } else if(((this.bottomParent.getY() - newPos.y) > this.originalSize.y) && ((this.bottomParent.getY() - newPos.y) < this.bottomParent.getY()-this.originalSize.y*1.6)){
            // Y inbetween required values
            //elasticPosition.y = (int) Math.pow(Math.E, -newPos.y);        //shaving this for a rainy day
            this.topParent.setY(newPos.y);

            Log.e("loc", "Y OK");
        } 
```

瓷砖拒绝拉伸：[http](http://s12.postimage.org/ltunmbt7x/Screenshot_2012_09_14_12_03_31.png) ://s12.postimage.org/ltunmbt7x/Screenshot_2012_09_14_12_03_31.png （记录瓷砖已经超出了它的最大边界）

第二个是使用 X、Y 值与父对象的位置进行比较。这个产生更简单的公式，目前持有我的偏好。但是，由于图块恰好扩展，因此值也会扩展。在图块的左上角，值是 (0,0)，如果我越过那个角，值将下降到负值。但是，如果我再次收缩瓷砖，我会突然得到一个正值，它会让一切变得摇摇欲坠、有问题、有故障等等。

```
if(event.getX() > 0 && event.getX() < this.getX() + this.getAccurateSize().x){
            //inbetween original values
            this.leftParent.setX((float) (this.rightParent.getX()-this.originalSize.x));
            Log.e("touch x", "inbetween original values");
        } else if(event.getX() < (0 - originalSize.x*0.6)){
            //too wide
            this.leftParent.setX((float) (this.rightParent.getX()-this.originalSize.x*1.6));
            Log.e("touch x", "too wide");
        } else if(event.getX() < 0 && event.getX() > (0 - originalSize.x*0.6)){
            //inbetween stretched values
            this.leftParent.setX(newPos.x);
            Log.e("touch x", "inbetween stretched values");
        }

        if(event.getY() > 0 && event.getY() < this.getY() + this.getAccurateSize().y){
            //inbetween original values
            this.topParent.setY(this.bottomParent.getY()-this.originalSize.y);
            Log.e("touch y", "inbetween original values");
        } else if(event.getY() < (0 - originalSize.y*0.6)){
            //too wide
            this.topParent.setY((float) (this.bottomParent.getY()-(this.originalSize.y*1.6)));
            Log.e("touch y", "too wide");
        } else if(event.getY() < 0 && event.getY() > (0 - originalSize.y*0.6)){
            //inbetween stretched values
            this.topParent.setY(newPos.y);
            Log.e("touch y", "inbetween stretched values");
        } 
```

如果有人能帮我修复这个烦人的错误，我会非常高兴，这样我就可以继续开发这个应用程序。提前致谢！

# api - 在 PUT API 出口 (MQ_PUT_EXIT) 中获取队列名称

> ID：12423020
> 
> 赞同：3
> 
> 时间：2012-09-14T10:50:50.847
> 
> 标签：api, exit, ibm-mq

在 Put MQ API Exit（之前或之后）中，是否有任何方法可以获取目标队列的名称（即调用“put”调用的队列）。

我尝试查询`Hobj`参数，但收到一条错误消息，提示尚未使用查询选项打开对象（这是一种有效的可能性）。

我还检查`ResolvedQName`了参数字段`pPutMsgOpts`，但那是空白的。

还有其他获取目标队列名称的方法吗？任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T02:40:29.043

在调用 PUT1 或 OPEN期间可访问的[对象描述符](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/fr13780_.htm)中返回已解析队列管理器和已解析队列的名称。[`MQXR_AFTER`](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/fg14950_.htm)

查看示例程序 `amqsaxe0.c，您将看到以下函数签名：

```
MQ_OPEN_EXIT OpenAfter;

void MQENTRY OpenAfter   ( PMQAXP    pExitParms
                         , PMQAXC    pExitContext
                         , PMQHCONN  pHconn
                         , PPMQOD    ppObjDesc
                         , PMQLONG   pOptions
                         , PPMQHOBJ  ppHobj
                         , PMQLONG   pCompCode
                         , PMQLONG   pReason
                         )

MQ_PUT1_EXIT Put1After;

void MQENTRY Put1After   ( PMQAXP    pExitParms
                         , PMQAXC    pExitContext
                         , PMQHCONN  pHconn
                         , PPMQOD    ppObjDesc
                         , PPMQMD    ppMsgDesc
                         , PPMQPMO   ppPut1MsgOpts
                         , PMQLONG   pBufferLength
                         , PPMQVOID  ppBuffer
                         , PMQLONG   pCompCode
                         , PMQLONG   pReason
                         ) 
```

before 调用中的对象描述符具有应用程序指定的对象名称。调用后的相同结构具有在调用期间解析的 QMgr 和队列的名称。由于 PUT1 在一个步骤中执行打开、放置和关闭，因此它必须解析队列名称。但是，在单独的 open、put(, put...)、close 调用的情况下，名称解析仅在 open 期间发生一次。

请参阅程序中`/var/mqm/samp`或`C:\Program Files (x86)\IBM\WebSphere MQ\tools\c\Samples`程序中的示例`amqsaxe0.c`。

# asp.net-mvc - HtmlHelpers 在 ASP.NET MVC Web 应用程序项目中的最佳位置是什么？

> ID：12423021
> 
> 赞同：0
> 
> 时间：2012-09-14T10:50:53.027
> 
> 标签：asp.net-mvc

我写了一个 HtmlHelper，我想知道我应该把它放在我的解决方案中的什么地方。

我应该将它放在共享文件夹 App_Code 还是名为“Helpers”的特定文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:33:02.117

为什么不在您的 MVC Web 应用程序中创建一个[“Helpers”文件夹？](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3formsandvalidation_topic3.aspx)

![在此处输入图像描述](../Images/cd4538e983e38601d6167522e6e9902e.png)

# c# - C# 泛型方法歧义

> ID：12423022
> 
> 赞同：0
> 
> 时间：2012-09-14T10:51:04.087
> 
> 标签：c#, interface

我需要在同一个接口中使用泛型方法和非泛型方法。

```
public interface IBRClientActions<T>
    where T : class 
{
    T add(T element);
    Hashtable add(Hashtable hashtable);

    void update(T element);
    void update(Hashtable hashtable);
} 
```

在我用许多类型的其他接口实现这个接口之后

```
public interface IBRClientActions : IBRClientActions<AdresseClient>,
                                    IBRClientActions<Role>,
                                    IBRClientActions<LienClient>
{
    ...
} 
```

在我的最后一堂课中，我需要类似的东西

```
public class FinalClass : IBRClientActions
{
    AdresseClient add(AdresseClient element) { ... }
    Hashtable add**<AdresseClient>**(Hashtable hashtable) { ... }
    ....
} 
```

但这`Hashtable add<AdresseClient>(Hashtable hashtable) { ... }` 是不可能的实际上我在使用 Hashtable 的方法中有模棱两可的参考。

如何为每种类型添加带有 Hashtable 的方法？

* * *

编辑 1

显式接口实现

是的，这是一种可能性，但有了这个解决方案，我每次都需要上课

```
Hashtable htRole = new Hashtable();
FinalClass myClass = new FinalClass();

/* not correct, ambiguity */
myClass.add(htRole);

/* correct, no ambiguity but heavy writing (sorry for my bad english) */
((IBRClientActions<Role>)myClass).add(htRole); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:52:57.037

> 我需要在同一个接口中使用泛型方法和非泛型方法。

我认为这不是问题，真的。我认为真正的问题是您在同一个类中使用不同的类型参数多次实现相同的通用接口。没有这方面，你不会有问题。

您可以使用显式接口实现：

```
Hashtable IBRClientActions<Role>.add(Hashtable hashatable)
{
    ...
} 
```

但这很快就变得丑陋了。如果可能的话，我会尽量避免这样做。尝试使用组合而不是继承。

另请注意：

*   如果是这样`System.Collections.Hashtable`，您可能应该`System.Collections.Generic.Dictionary<,>`尽可能使用
*   方法名称`add`不符合 .NET 命名约定

# cuda - .cpp 和 .cu 文件的 NVCC 行为

> ID：12423023
> 
> 赞同：2
> 
> 时间：2012-09-14T10:51:05.480
> 
> 标签：cuda

考虑两个文件：

1.  test.cpp : 包含一个未使用的函数`f1()`
2.  test.cu：包含相同的未使用函数`f1()`

这些文件使用 NVCC 编译并提供两个 exe（1.EXE、2.EXE）。请注意，一个是 .cpp，另一个是 .cu

在分析过程中，1.exe 不显示未使用的函数 f1，但在分析过程中，2.exe 显示未使用的函数 f1。

为什么？为什么 NVCC 对 .cu 和 .cpp 文件的行为不同？

**更新：**

我的困惑归结为：我可以自动内联 .cu 文件中未使用的函数，可能正在使用一些编译器选项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:51:05.080

NVCC 自己编译 .cu 文件并将 .c 和 .cpp 文件传递​​给系统的 CC 和 CXX。承认两个不同的编译器可能会生成有细微差别的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T16:46:44.053

一、函数是cuda函数还是cpp函数？您使用的是什么操作系统？

我已经尝试了几件事并找到了这个。

如果是 cpp 函数，nvcc (.cu) 和 gcc (.cpp) 都可以正常编译和运行代码。而且，如果您使用的是 Ubuntu，则表明该功能未使用。（.cu 和 .cpp）。如果您使用的是 VS10，它不会显示任何警告。

如果它是 cuda 函数，则 nvcc 可以正常工作。但是，.cpp 文件在 VS10 和 Ubuntu 中都不能编译。即使您包含库。

需要更具体的功能和操作系统。

# selenium-webdriver - 如何使用 selenium web 驱动程序和 groovy 脚本在 chrome 中运行我的测试用例？

> ID：12423024
> 
> 赞同：0
> 
> 时间：2012-09-14T10:51:07.127
> 
> 标签：selenium-webdriver

这是我的 Firefox 代码。如何为 Chrome 和 IE 定制它？

任何人都可以让我知道.. 我只使用 groovy 和 selenium web 驱动程序。由于 Soap UI 仅支持 groovy，因此我仅尝试在 Groovy 和 Web 驱动程序中执行此操作。

```
import org.openqa.selenium.By
import org.openqa.selenium.WebDriver
import org.openqa.selenium.WebElement
import org.openqa.selenium.firefox.FirefoxDriver
import org.openqa.selenium.support.ui.ExpectedCondition
import org.openqa.selenium.support.ui.WebDriverWait

         // Create a new instance of the Firefox driver
         WebDriver driver = new FirefoxDriver()

        // Extract URL for stdcheckout
       def link = context.expand( 'url' )

        // And now use this to visit stdcheckout
        driver.get(link)
        //driver.get("https://xxx-ft25.test.xxxx.eu/xxxx/login?partnerCode=xxx&paymentToken=4bbf8ee5-f102-424f-8a6f-28a8e26e0292")

        // Find the text input element by its name
        WebElement element = driver.findElement(By.name("email"))

        // Enter username
        element.sendKeys("1204@yahoo.com")

        //  Find the password element by its name
        WebElement element1 = driver.findElement(By.name("password"))

        // Enter password
        element1.sendKeys("asdfghjkl")

       // Click the Login button    
        driver.findElement(By.name("sbutton")).click();

       // Enter CVV2
       driver.findElement(By.id("cvv")).sendKeys("672");

      //WebElement element2 = driver.findElement(By.name("termsAndConditionsAccepted"))
      //element2.click();

      //click Paynow
      driver.findElement(By.cssSelector("input[type=\"button\"]")).click();

       log.info("Page title is: " + driver.getTitle())

        // Google's search is rendered dynamically with JavaScript.
        // Wait for the page to load, timeout after 10 seconds
        /*(new WebDriverWait(driver, 10)).until(new ExpectedCondition() {
            public Boolean apply(WebDriver d) {
             return d.getTitle().toLowerCase().startsWith("cheese!")
           }
        });*/

        // Should see: "cheese! - Google Search"
        //log.info("Page title is: " + driver.getTitle())

        //Close the browser
        driver.quit() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:34:09.873

下载 chrome 驱动程序并将其放在任何位置并在设置属性时给出路径....

```
package korporation.test.SampleTestGroup

import java.util.concurrent.TimeUnit

import org.openqa.selenium.By
import org.openqa.selenium.WebDriver
import org.openqa.selenium.chrome.ChromeDriver

    // set up the driver
    System.setProperty("webdriver.chrome.driver", "c:/chromedriver/chromedriver.exe")

    //Define the driver
    def WebDriver driver = new ChromeDriver()
    driver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS)

     // And now use this to visit Google
    def link = context.expand( 'url'); 

     driver.get(link)

     def username = context.expand( '${#Project#username}' )

     // Find the text input element by its name
     driver.findElement(By.name("email")).sendKeys(username)

     //  Find the password element by its name
     driver.findElement(By.name("password")).sendKeys("asdfghjkl")

     // Click the Login button  
     driver.findElement(By.name("sbutton")).click();

    // Enter CVV2
    driver.findElement(By.id("cvv")).sendKeys("672");

    driver.findElement(By.name("termsAndConditionsAccepted")).click();

    driver.findElement(By.xpath("//*[@id=\"pay-now\"]")).click();

   //log.info("Page title is: " + driver.getTitle())

   assert (driver.getTitle()=="Mobile Phones | Contract Phones | Cheap Mobile Phone Deals & SIMs")
   //Close the browser
   driver.quit() 
```

# playframework - 应用程序“无法连接到数据库”异常

> ID：12423028
> 
> 赞同：0
> 
> 时间：2012-09-14T10:51:19.887
> 
> 标签：playframework, playframework-1.x, cloudbees

当我尝试部署 Play! 框架 (v1.2.4) 应用到 cloudbees 使用 Play！框架 cloudbees 插件我得到以下异常

线程“主”play.exceptions.DatabaseException 中的异常：无法连接到数据库，用户“@”的访问被拒绝（使用密码：是）

如果我尝试使用客户端（例如 Navicat for MySQL Lite）连接到数据库，我也会收到拒绝访问错误。

直到今天，数据库的部署和连接一直运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:12:50.323

> 用户“@”的访问被拒绝

似乎表明您的连接缺少用户名设置。

# c# - 在大型应用程序中使用 MVVM - 共享视图模型、模型、状态等

> ID：12423034
> 
> 赞同：13
> 
> 时间：2012-09-14T10:51:37.970
> 
> 标签：c#, .net, mvvm

我想知道你们中是否有人知道一些解释大型应用程序的 MVVM 的好教程。我发现的每个关于 MVVM 的教程都只是基本解释（如何实现模型、视图模型和视图），但我对在应用程序页面之间传递数据、在哪里初始化视图模型、在哪里存储常见应用程序的技术和模式感到好奇数据（在多个视图模型之间共享）等。

我更喜欢没有任何 MVVM 框架（MVVMLight 等）的纯 c#/XAML 解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T11:36:38.387

> 在应用程序页面之间传递数据时的技术和模式

如果数据传递是事件驱动的（即：您想在收到服务器推送的数据时通知），请使用弱事件。Prism 的 EventAggregator 是众多实现之一。

如果数据传递是恒定的，让 DataContext 沿着 XAML 树向下流动并简单地使用绑定。
这意味着如果您有一个“主”用户控件，它使用其他更具体的用户控件，不要设置他们的 DataContext，他们将继承主人的，一切都很好。
如果要分离功能，请在主视图模型中使用组合。

> 在哪里初始化视图模型

纯粹主义者会告诉您直接在 XAML 中实例化它们。我几乎从不这样做。
首先，ViewModel 通常需要服务，它们作为构造函数参数传递，或者通过 MEF 在构造函数中注入......等等。所以你不能有一个无参数的构造函数，或者更难。

现在，我们可以做一些困难的事情，但有什么收获呢？让视图的代码隐藏检索 ViewModel 或将其注入其构造函数是非常好的。

> 在哪里存储通用应用程序数据（在多个视图模型之间共享）

如果数据是全局的：使用静态类/属性，
在 XAML 中您可以通过 访问它们`{x:Static my:StaticClass.StaticProperty}`，如果您想访问嵌套类/枚举，请使用`+`而不是`.`

如果数据只在几个 ViewModel 之间而不是全部之间共享，请在 ViewModel 上使用继承/组合以及控制器模式。

**从经验中收集的其他提示：**

*   只严格绑定你需要的东西：当你只需要一个字符串时，不要绑定到整个对象。

*   如果您一次又一次地绑定相同的东西，请不要犹豫，通过从`Binding`/继承来制作自定义标记`MultiBinding`。它是 DRY 101，但大多数人出于某种原因只是复制/粘贴绑定。

*例子：*

```
public class VisibilityBinding : MultiBinding, IMultiValueConverter
{
   public VisibilityBinding()
   {
      var isSomething = new Binding("IsSomething");
      isSomething.ElementName = myUsrCtrl;
      this.Bindings.Add(isSomething);

      //Add more bindings

      this.Converter = this;
    }

    //Implement IMultiValueConverter to compute a System.Visibility from the bound values.
} 
```

在 XAML 中：

```
 <TextBox Visibility={customMrkup:VisibilityBinding} /> 
```

*   **不惜一切代价避免**任何数据重复，一直到 DAL。同步可以通过 I(Multi)ValueConverter 推导出的字段很快就会变得复杂。
    *示例：*您有一个音频文件。它具有开始时间、结束时间和持续时间。去掉这三个属性中的任何一个，都可以推导出第三个。

如果我想到更多提示，我会回来添加它们。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T11:22:45.720

您可能想看看这本书：**Building Enterprise Applications with Windows Presentation Foundation and the Model View ViewModel Pattern**（例如在[Amazon.com](https://rads.stackoverflow.com/amzn/click/com/0735650926)）。

它在更一般的上下文中处理 MVVM，而不仅仅是 5 分钟的代码片段，甚至就如何组织业务解决方案给出了建议。

我们经常在工作中将其用作参考。就个人而言，我希望它会更深入一些细节。但是，从业务线应用程序的角度来看，MVVM 仍然是一本不错的读物。

说明文字：

> **使用 MVVM 设计模式创建丰富、灵活且可维护的业务线应用程序**
> 
> 通过将 MVVM 模式应用于 Windows Presentation Foundation (WPF) 和 Microsoft® Silverlight® 4 来简化和改进业务应用程序开发。通过本动手指南，您将使用 MVVM 与数据绑定、命令和行为来松散地创建用户界面与业务逻辑相结合。MVVM 是使用 WPF 和 Silverlight 的 .NET 开发人员的理想选择——无论您是否有构建企业应用程序的经验。
> 
> 了解如何：
> 
> *   深入了解 MVVM — 并了解它与其他 UI 设计模式的不同之处 构建一个简单的客户关系管理应用程序，您可以根据自己的项目进行调整
> *   实现 MVVM 以保持 UI 声明性语法和表示逻辑代码之间的分离
> *   创建域模型以定义应用程序的业务上下文
> *   使用 Microsoft Entity Framework 和 NHibernate 为数据访问层编写动态代码
> *   使用 Windows Workflow Foundation 4 实施复杂的数据验证方案
> *   使用 Microsoft Prism 等框架和工具包实现 MVVM

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T11:10:09.667

首先，您可以创建一个具有所有 ViewModel 共有的一些属性的 BaseViewModel。使用诸如[Castle](http://docs.castleproject.org/Default.aspx?Page=MainPage&NS=Windsor&AspxAutoDetectCookieSupport=1) / [Prism4 之](http://compositewpf.codeplex.com)类的依赖注入将数据从一个视图模型发送到我们使用[Prisms EventAggregator](http://msdn.microsoft.com/en-us/library/ff649187.aspx)的另一个视图模型我希望这对您的任务有所帮助。但就像乔恩说的，这完全取决于你喜欢使用什么。但这些都是很好的起点。

# css - 页面在具有相同浏览器（chrome）的不同机器上显示不同

> ID：12423038
> 
> 赞同：1
> 
> 时间：2012-09-14T10:51:48.973
> 
> 标签：css, wordpress, google-chrome, web, wordpress-theming

我为客户的网站购买了 Wordpress 主题（[核心）。](http://themes.themegoods.com/?theme=Core)该主题在我的机器和我可以访问的任何机器上都运行良好。这是它的外观截图：![正确一个](../Images/98d65eea5ae48a1a040373f7d3ac96e6.png)。

现在，当在客户的机器上（在另一个国家）打开相同的页面时，它会打开这样的页面：![错了一个](../Images/f7c0647c63e92e1b86ba4aee952ec0b5.png)

我曾尝试联系主题支持，但没有得到任何帮助。我也尽我所能来解决它​​；删除缓存、删除历史记录和类似的东西已经完成，但也无济于事。CSS Reset 也是主题提供的 CSS 代码的一部分。谁能告诉我这里可能出了什么问题？客户端也在尝试使用 Chrome（更新 Chrome 也无济于事）。

此外，客户报告说他朋友的机器上出现了问题。但绝对没有像这样发生在我的最后。

网址为： http: [//goldentouchproductions.com.au/](http://goldentouchproductions.com.au/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:02:58.423

我弄清楚了这个问题。基本上，用户在 Chrome 上为 uTorrent 安装了一个 Chrome 插件，它弄乱了页面上的图像。我不知道为什么，但它显然在做某事（可能是因为它显示了额外的搜索栏）。

我禁用了插件，一切看起来都很好，正如预期的那样。

# javascript - 如何显示 Redactor 富文本/html 编辑器的字符数/字数？

> ID：12423045
> 
> 赞同：3
> 
> 时间：2012-09-14T10:52:04.900
> 
> 标签：javascript, jquery, ckeditor, rich-text-editor, redactor

[我刚刚用出色的Redactor](http://imperavi.com/redactor)替换了 CKEditor（它带有大量与 AJAX 更新 DOM 相关的神秘问题）。我们之前使用 CKEditor 插件来为我们提供富文本编辑器的字符数。如何使用 Redactor 实现相同的目标？没有内置任何东西，也没有“插件”架构可供使用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T10:52:04.900

这点我有过头绪。我相信会有更好的方法来实现相同的目标，但我会发布它以防它对其他人在相同的修复中是一个好的开始。

以下代码将富文本编辑器添加到具有类“richText”的任何 textarea 字段，并且仅当在 textarea 上使用 maxlength 属性时才进一步添加字符计数，例如

```
<textarea class="richText" maxlength="100"></textarea> 
```

在这里，我在 javascript 中包含了 CSS。实际上，我会将其放入单独的 css 文件中。

```
var initRichText = function () {
    $("textarea.richText").redactor({
        buttons: ['bold', 'italic', '|', 'unorderedlist', 'orderedlist'],
        keyupCallback: function (obj, event) {
            var max = obj.$el.getEditor().next().attr("maxlength");
            if (typeof max !== "undefined") {
                var current = obj.$el.getCode().length;
                var $box = obj.$el.closest(".redactor_box");
                var $indicator = $(".indicator", $box);
                if ($indicator.size() === 0) {
                    $box.append($("<div class='indicator' style='position:absolute;z-index:30;top:7px;right:7px;'><span class='current'>" + current + "</span> of <span class='max'>" + max + "</span> characters remaining</div>"));
                } else {
                    $(".current", $indicator).text(current);
                    $(".max", $indicator).text(max);
                }
                if (current >= max) {
                    $box.css("border", "1px solid #ff0000");
                    $indicator.css("color", "#ff0000");
                } else {
                    $box.css("border", "1px solid #DDDDDD");
                    $indicator.css("color", "#000000");
                }
            }
        }
    });
};
$(function(){
    initRichText();
}); 
```

编辑：正如 MForMarlon 所说，自从我们编写这段代码以来，redactor.js 已经发生了变化。一个非常奇怪的巧合，我们今天正在研究这个，一年多没有碰它！奇怪的。无论如何，这是适用于 Redactor v9.2.5 的最新版本。请注意，我们现在使用 initCallback 在富文本编辑器首次加载时应用字符计数器，而不是在用户开始输入时。我们还使用 changeCallback 而不是 keyupCallback，因为我们添加了“粘贴为纯文本”模式（请参阅[redactor.js pastePlainText - 但需要按钮来粘贴 html](https://stackoverflow.com/q/24265321/136416)），并且我们希望对通过它粘贴的内容做出反应以及输入。

```
$(".richText").redactor({
    shortcuts: false,
    buttons: ['bold', 'italic', '|', 'unorderedlist', 'orderedlist', '|', 'html', 'pasteAsPlainText'],
    plugins: ['pasteAsPlainText'],
    initCallback: function (event) {
        var max = this.$editor.next().attr("maxlength");
        if (typeof max !== "undefined" && max > 0) {
            var html = this.get();
            var current = html.length;
            var remaining = max - current;
            this.$box.append($("<div class='indicator' style='position:absolute;z-index:30;top:7px;right:7px;'><span class='current'>" + remaining + "</span> of <span class='max'>" + max + "</span> characters remaining</div>"));
        }
    },
    changeCallback: function (event) {
        var max = this.$editor.next().attr("maxlength");
        if (typeof max !== "undefined" && max > 0) {
            var html = this.get();
            var current = html.length;
            var remaining = max - current;
            var $indicator = $(".indicator", this.$box);
            $(".current", $indicator).text(remaining);
            $(".max", $indicator).text(max);
            if (current >= max) {
                this.$box.css("border", "1px solid #ff0000");
                $indicator.css("color", "#ff0000");
            } else {
                this.$box.css("border", "1px solid #DDDDDD");
                $indicator.css("color", "#000000");
            }                
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-27T19:24:31.107

obj.$el 是原始 textarea 的 jQuery 元素。

obj.$el.getCode().length 会为您提供意想不到的结果，因为它考虑了要添加的 HTML 元素。

我认为更准确的方法是针对“.redactor_editor”来获取文本长度

新的 keupCallback 方法：

```
keyupCallback: function (obj) {
    var max = obj.$el.getEditor().next().attr("maxlength");
    if (typeof max !== "undefined") {
        var $box = obj.$el.closest(".redactor_box")
            ,current = $box.find('.redactor_editor').text().length
            ,$indicator = $(".indicator", $box);

        if ($indicator.size() === 0) {
            $box.append($("<div class='indicator' style='position:absolute;z-index:30;top:7px;right:7px;'><span class='current'>" + current + "</span> of <span class='max'>" + max + "</span></div>"));
        } else {
            $(".current", $indicator).text(current);
            $(".max", $indicator).text(max);
        }
        if (current >= max) {
            $box.css("border", "1px solid #ff0000");
            $indicator.css("color", "#ff0000");
        } else {
            $box.css("border", "1px solid #DDDDDD");
            $indicator.css("color", "#000000");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-19T06:31:54.520

好的，首先你需要确保你的编辑器文件夹中有这两个插件：

*   [限制器](https://imperavi.com/redactor/plugins/limiter/)
*   [柜台](https://imperavi.com/redactor/plugins/counter/)

您需要使用限制器来限制长度，并使用计数器来显示状态栏。示例代码将如下所示：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Redactor</title>
        <meta charset="utf-8">

        <!-- redactor css -->
        <link rel="stylesheet" href="/your-folder/redactor.css" />
    </head>
    <body>
        <!-- element -->
        <textarea id="content">...</textarea>

        <!-- redactor js -->
        <script src="/your-folder/redactor.js"></script>

        <!-- plugin js -->
        <script src="/your-folder/plugins/limiter.js"></script>
        <script src="/your-folder/plugins/counter.js"></script>

        <!-- call -->
        <script>
        $R('#content', {
            plugins: ['limiter', 'counter'],
            limiter: 100
        });
        </script>
    </body>
</html> 
```

# jquery - jquery .hover() 对不同元素的效果相同

> ID：12423047
> 
> 赞同：0
> 
> 时间：2012-09-14T10:52:13.653
> 
> 标签：jquery

我有这种情况：

html:

```
<a>text</a>
<a>text</a>
<a>text</a>
<a>text</a>

<h4>hi there</h4>
<h4>hi there</h4>
<h4>hi there</h4>
<h4>hi there</h4> 
```

javascript:

```
$("h4").hide();
$('a').hover(function () {
  $("h4").addClass('hover').fadeIn(300);
},
function () {
  $("h4").stop(0,0)
     .queue(function(){ $("h4").removeClass('hover').fadeOut(300).dequeue() });
}); 
```

​CSS：

```
.hover {
    background-color: yellow;
} 
```

这是 jsfiddle [http://jsfiddle.net/zS6ex/280/](http://jsfiddle.net/zS6ex/280/)

我希望当我将鼠标悬停在单个上时，不会显示全部

谢谢

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:00:46.270

`h4`不是 element 的子元素，并且 your和 your`a`之间没有联系。`a``h4`

试着给他们一个`ID`或一些东西来瞄准正确的东西，`h4`否则你可以做类似的事情......

```
$('a').on('click', function() {
    var i = $(this).index();
    $('h4').eq(i).addClass('hover');            
});​ 
```

这里有一个**[JsFiddle](http://jsfiddle.net/BBSmq/1/)**改进了悬停和`.toggleClass()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:54:41.973

你不应该`.fadeIn()`和`.fadeOut`。在 ViewPort 中将无法访问它。使用`opacity`和动画。

```
$("h4").css("opacity", 0);
$("h4").hover(function(){
    $(this).addClass("hover").animate({opacity: 1}, 1000);
}, function(){
    $(this).removeClass("hover").animate({opacity: 0}, 1000);
});​ 
```

### 小提琴：http: [//jsfiddle.net/zS6ex/288/](http://jsfiddle.net/zS6ex/288/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:57:50.227

您需要一些数据来找到锚链接的目标。请注意，锚链接应具有 href 属性。

```
<a href='#first'>text</a>
<a href='#second'>text</a>
<a href='#third'>text</a>
<a href='#fourth'>text</a>

<h4 id='first'>hi there</h4>
<h4 id='second'>hi there</h4>
<h4 id='third'>hi there</h4>
<h4 id='fourth'>hi there</h4> 
```

```
$('a').hover(function() {
    $(this.hash).addClass('hover').stop().fadeIn(300);
}, function() {
    $(this.hash).stop().fadeOut(300).removeClass('hover')
}); 
```

[http://jsfiddle.net/CywgQ/](http://jsfiddle.net/CywgQ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T11:45:25.417

我已经为上述查询完成了完整的垃圾箱。这是演示链接...

**演示：** [http ://codebins.com/bin/4ldqp77](http://codebins.com/bin/4ldqp77)

**HTML**

```
<div id="panel">
  <a href="javascript:void(0);">
    Link-1
  </a>
  <a href="javascript:void(0);">
    Link-2
  </a>
  <a href="javascript:void(0);">
    Link-3
  </a>
  <a href="javascript:void(0);">
    Link-4
  </a>
  <h4>
    hi there...Header 1
  </h4>
  <h4>
    hi there...Header 2
  </h4>
  <h4>
    hi there...Header 3
  </h4>
  <h4>
    hi there...Header 4
  </h4>
</div> 
```

**jQuery**

```
$(function() {
    $("h4").fadeOut();
    $('a').hover(function() {
        $("h4:eq(" + $(this).index() + ")").addClass('hover').fadeIn(300);
    }, function() {
        $("h4:eq(" + $(this).index() + ")").removeClass('hover').fadeOut(300);
    });
}); 
```

**CSS**

```
a{
  display:inline-block;
  margin:10px;
  border:1px solid #000;
  background:#3A3A3A;
  color:#fff;
  text-decoration:none;
  padding:5px;
  border-radius: 5px;
}
a:hover{
  background:#9C9C9C;
  text-decoration:underline;
  color:#262626;
}

h4{
  display:block;
  border:1px solid #4455bd;
  margin-left:10px;

  width:300px;
  padding:2px;
  background:#a3c4fd;
}
h4.hover{
  background:#ffdf88;
} 
```

**演示：** [http ://codebins.com/bin/4ldqp77](http://codebins.com/bin/4ldqp77)

如果您想在不使用fadeOut() 的情况下检查效果，请在演示链接上检查jQuery 更改，如下所示。

**演示：** [http ://codebins.com/bin/4ldqp77/2](http://codebins.com/bin/4ldqp77/2)

# block - Concrete5：添加新块类型时的问题

> ID：12423050
> 
> 赞同：0
> 
> 时间：2012-09-14T10:52:32.040
> 
> 标签：block, concrete5

我刚刚安装了新的混凝土（5.6），突然之间我的混凝土 101 失败了。

我创建了一个新的块类型，当我去安装它时，我得到了这个......

> 警告：require_once(/...[concrete root].../concrete/blocks/basic_test/controller.php) [function.require-once]：无法打开流：/...[ 中没有这样的文件或目录具体根].../concrete/core/models/block_types.php 第 824 行

我最终删除了我的块并复制了 basic_test 块（http://www.concrete5.org/documentation/developers/blocks/understanding-and-building-blocks-in-concrete5）。

令我惊讶的是，错误仍然存​​在。

我将我的块放置在我总是有具体根 /blocks 的地方，但由于某种原因它在具体根 /concrete/blocks 下寻找资源。

现在我只是对在如此简单的任务中完全失败感到困惑。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T00:42:49.077

5.6.0 中有一个与新覆盖缓存相关的错误。它已在 5.6.0.1 版本中修复，因此升级应该可以解决问题。或者，如果您不想升级，可以关闭仪表板中的覆盖缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:32:12.280

我修复此异常的步骤：

1.  关闭覆盖和基本缓存
2.  卸载“损坏”包
3.  清除缓存
4.  **从“BlockTypes”表中删除您的阻止行**非常重要
5.  重新安装包

# c# - 从 ABCpdf07 过渡到 ABCpdf8 - 不显示图像

> ID：12423051
> 
> 赞同：3
> 
> 时间：2012-09-14T10:52:32.333
> 
> 标签：c#, asp.net, image, abcpdf

我正在尝试从 ABCpdf07 过渡到 ABCpdf8。我们将其用于以 PDF 格式打印各种运输标签的方法。这通常有效，其中包含图像的文件除外。这是用于将 html 放入 Document 的代码：

```
 public void AddHtml(string html, string frame, string nextPageFrame)
    {
        if (string.IsNullOrEmpty(nextPageFrame))
            nextPageFrame = frame;
        Document.Units = UnitType.Mm;
        Document.Rect.String = frame;

        int i = Document.AddImageHtml(html);

        while (true)
        {
            if (!Document.Chainable(i))
                break;
            Document.Page = Document.AddPage();
            Document.Rect.String = nextPageFrame;
            i = Document.AddImageToChain(i);
        }

        for (int j = 1; j <= Document.PageCount; j++)
        {
            Document.PageNumber = j;
            Document.Flatten();
        }
    } 
```

frame 和 nextFrame 只是确定页面大小的值。当我在 HTML 视图中查看它时，该 html 在调试中起作用。但是在这种方法之后，当文档被保存时，图像不会显示在页面上 - 而是有损坏的图像图标。图像本地保存在项目文件夹 (c:\etc...) 中。已经三次检查链接是否正常工作。

真的无法理解为什么图像无法正确显示。有什么帮助吗？

编辑：我的 xslt 文档找到这样的图像

```
 <xsl:template match="//TheWrapper">
    ...
    <img class="someClass">
       <xsl:attribute name="src">
          <xsl:value-of select ='LogoLocation' />
       </xsl:attribute>
    </img>
    ...
    </xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:01:05.010

ABCpdf 的第 8 版似乎有另一种传递图像的方法。这是因为他们不想依赖 IE（它在处理过程中的某个时间在后台加载）。我对这里的细节不是很了解。

无论如何 - 碰巧在 Chrome 中打开徽标文件路径，它自动添加了“file:///”，所以我尝试在我的代码中这样做，它成功了！只需在徽标文件路径前加上“file:///”即可，一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:24:22.950

问题是 http 标头响应是 abcpdf 的错误格式，请为您的图像使用良好的标头 http 响应。以一个很好的例子为例，在 Firefox 调试器中查看 http 标头，并为您的图像重现此 http 标头响应。

或者，如果您通过代码服务器发送手动图像，请查看您的图像的 http 流响应的关闭方法是否良好。

# c++ - 如何在 C++ 中同时使用默认和自定义复制构造函数？

> ID：12423058
> 
> 赞同：12
> 
> 时间：2012-09-14T10:52:53.727
> 
> 标签：c++, constructor, copy-constructor, deep-copy, shallow-copy

我有一堂很长的课，里面有很多数据成员。我想为它写一个复制构造函数。但是，如果我编写自己的复制构造函数，我将无法访问默认的复制构造函数。

我只想在我自己的复制构造函数中修复一些指针。所以我想要一个对象的浅拷贝，这可以通过默认的拷贝构造函数来完成。

当我有自己的复制构造函数时，是否有可能访问默认的复制构造函数？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-14T10:57:32.287

将您不想更改的内容包装在结构中，并从中（私下）派生。在您的复制构造函数中，只需调用基类的复制构造函数。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-14T10:57:35.237

不，您不能同时拥有默认和自己的副本 c-tor。

但是这个问题有两种解决方法：

* * *

**1**将您的指针包含在具有定义的复制语义的某个类中

例子：

```
class A {
public:
private:
   int trivial1;
   int trivial2;
   ...
   SomePointer  nontrivialMember;
};

class SomePointer {
public:
  SomePointer(const SomePointer&); // here the non trivial part of A copy semantics
  int* nonTrivialMember;
}; 
```

* * *

**2**将平凡的参数包含在一些平凡的结构中

例子：

```
class A {
public:
   A(const A& o) : data(o.data) {
     // non trivial part
   }
private:
   struct Data {
     int trivial1;
     int trivial2;
     ...
   } data;
   int* nontrivialMember;
}; 
```

* * *

我总是选择第一个解决方案。

[更新]

还有第三种解决方案，与我的第二种解决方案非常相似，将您的琐碎部分包含在私有继承的基类中。我仍然更喜欢第一种解决方案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-14T10:58:58.813

最简单的方法是将指针包装到将在其复制构造函数中手动执行“*修复*”的类中，然后您可以愉快地使用默认的复制构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T10:56:01.617

不，没有办法从用户定义的复制构造函数中调用默认的复制构造函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-20T08:06:29.427

我的解决方案是一个简单的 memcpy() 而不是对隐式（编译器生成）复制构造函数的不可能调用，如下所示：

```
Class Foo
{
public:
   ...
   Foo (Foo & other) {
      // copies trivial part (and non-trivial part with possible wrong values)
      memcpy(this, &other, sizeof(Foo));

      // your non-trivial part here, overwrites the wrong values (if any) above.
   }
} 
```

然而副作用是 memcpy() 也会复制那些重要的部分，这是一种浪费。如果非平凡部分不包含太多空间，我会更喜欢我的解决方案。

例如，像下面这样的类只浪费了一个指针的 4 字节副本，假设指针的大小是 4 字节。

```
Class Bar
{
    int x, y, z;

    // memcpy() wastes these 4 bytes copy,
    // since actual copy constructor wants a new string
    string *s;  
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-14T11:00:02.410

您可以使用默认值或您自己的，不能同时使用两者。如果您想为不同的对象选择不同的功能，您应该只编写一个处理这种情况的成员函数。

```
void DeepCopy(MyClass* rhs); 
```

例如。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-14T11:09:36.063

如果您创建了自己的，则无法访问默认复制 ctor - 编译器只是不会生成它。但是有一种解决方法 - 将您的类拆分为数据结构和逻辑。

参见示例：

```
struct Data
{
  int i;
  std::string s;

  Data(): i(), s() {}
};

class Code: private Data
{
public:

  Code() {}

  Code(const Code& rhs): Data(rhs) // Call default copy ctor
  {
     i = 42; // Your copy part
     return *this;
  }

}; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-09T09:39:36.263

这对我有用......（C ++ 11，不知道它是否适用于旧标准）不知道为什么它不会进入无限循环。

```
class Foo {
public:
  Foo(const Foo &orig) {
     *this = orig;
     ... exchange pointers, do own stuff
  } 
```

# java - 使用 autowireBeanProperties(this...) 时未触发 InitializingBean 回调

> ID：12423061
> 
> 赞同：0
> 
> 时间：2012-09-14T10:52:58.567
> 
> 标签：java, spring, inversion-of-control, autowired

在我们所有的应用程序集成测试中，我们使用以下手动自动装配：

```
context = new ClassPathXmlApplicationContext(getConfigLocations());
context.getAutowireCapableBeanFactory().autowireBeanProperties(this, getAutowireMode(), true); 
```

这样，所需的 Spring bean 就会自动注入到测试类（this）中。

这很好用，但是在我的一个测试类中，我已经将我的类设置为 InitializingBean。当我在我的 bean 中以这种方式自动装配时，该`afterPropertiesSet()`方法永远不会被触发，而在调试中我看到所有属性都被正确设置。

有人可以解释我为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:06:33.213

`autowireBeanProperties()`仅自动装配属性，它不执行其他初始化步骤。

您可以使用其他方法[`AutowireCapableBeanFactory`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/config/AutowireCapableBeanFactory.html)来执行完全初始化，例如`initializeBean()`. `autowireMode`但是，在这种情况下，您似乎无法通过 。`autowireMode`所以，如果你真的需要 custom （即如果你不在`@Autowired`你的 bean 中使用），目前还不清楚如何解决这个问题。

# android - 在 ListView 中的项目“下”打开上下文菜单

> ID：12423062
> 
> 赞同：1
> 
> 时间：2012-09-14T10:53:00.157
> 
> 标签：android, android-contextmenu

我正在寻找一种`ContextMenu`在`ListView`. 这个实现的一个例子可以在“reddit is fun”安卓应用中找到。我附上了屏幕截图供您参考。

![截屏](../Images/ad776193da829300ad0b41da192f3877.png)

很长一段时间以来，我一直在努力实现这一目标，但一直没有成功。我怎样才能实现这个功能？

我认为这是显示上下文菜单的一种非常好的方式，我也想使用这种技术！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T05:28:49.303

该菜单可以直接在行布局中实现。您必须在当前布局中添加额外的菜单布局（并首先隐藏它，您可能不想在用户第一次使用 时显示它`ListView`）。您所要做的就是添加逻辑以显示/隐藏菜单，并跟踪菜单本身（在自定义适配器中）和其中的项目（就像菜单打开/关闭一样，其中项目的状态）。您可以在此处找到有关如何执行此操作的简单示例：[https](https://gist.github.com/3722950) ://gist.github.com/3722950 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:55:13.117

用于`PopupWindow`保存上下文菜单项。弹出窗口可以很容易地定位在屏幕上。更多信息`PopupWindow`可以在[这里](http://developer.android.com/reference/android/widget/PopupWindow.html)找到，或者在谷歌上找到关于该主题的教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:56:29.383

您可以将 UitabBarController 与 tabBars 一起使用作为共享，保存隐藏，评论之类的。然后在我们单击选项卡之后，将显示特定的列表视图。

# javafx - 如何在 JavaFX 中从 JFXPanel 打开模态对话框？

> ID：12423068
> 
> 赞同：2
> 
> 时间：2012-09-14T10:53:57.207
> 
> 标签：javafx, javafx-2

要显示模态对话框，应使用以下代码：

```
val dialogStage:Stage = new Stage();
dialogStage.initOwner(ownerStageWindow)
dialogStage.initModality(javafx.stage.Modality.WINDOW_MODAL);
val scene = new Scene(...)
dialogStage.setScene(scene)
dialogStage.show(); 
```

但是在哪里以及如何获得所有者阶段？
如果我使用 JFXPanel 作为根组件嵌入 JavaFX 应用程序，则没有初级阶段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-28T09:50:33.390

要获得 JFXPanel 的阶段：

```
Field f = JFXPanel.class.getDeclaredField("stage");
f.setAccessible(true);
stage = (Window)f.get(fxPanel); 
```

但重要的是要注意，您得到的不一定是 Stage 的实例。它将是 Window 的一个实例（舞台的超类）。对于 swing 应用程序，它将返回一个 EmbeddedWindow 实例（它不是 Stage）。

或者以其他方式陈述这个技术答案：如果您有一个纯 JavaFx 应用程序，您将只有一个 Stage。如果我错了，请纠正我。

因此，要显示您的模态窗口，您可以传递代码示例中所示的 Window 实例或传递一个空值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:43:45.203

将一个空值传递给 initOwner（因为您的对话框是 APPLICATION_MODAL，而不是 WINDOW_MODAL，因此它的副作用可能不会太剧烈）。

或者

为您的对话场景创建一个包含另一个 JFXPanel 的 JFrame。

# java - 如何从JAVA中的字符串中删除转义字符

> ID：12423071
> 
> 赞同：10
> 
> 时间：2012-09-14T10:54:04.020
> 
> 标签：java, regex

我有输入字符串`"\\{\\{\\{testing}}}"`，我想删除所有`"\"`. 必需的 o/p: `"{{{testing}}}"`。

我正在使用以下代码来完成此操作。

```
protected String removeEscapeChars(String regex, String remainingValue) {
    Matcher matcher = Pattern.compile(regex, Pattern.CASE_INSENSITIVE).matcher(remainingValue);
    while (matcher.find()) {
        String before = remainingValue.substring(0, matcher.start());
        String after = remainingValue.substring(matcher.start() + 1);
        remainingValue = (before + after);
    }
    return remainingValue;
} 
```

我将正则表达式传递为`"\\\\{.*?\\\\}"`.

代码仅适用于“\{”的第一次出现，但并非所有出现。查看不同输入的以下输出。

1.  i/p : `"\\{testing}"`- o/p:`"{testing}"`
2.  i/p : `"\\{\\{testing}}"`- o/p:`"{\\{testing}}"`
3.  i/p : `"\\{\\{\\{testing}}}"`- o/p:`"{\\{\\{testing}}}"`

我希望`"\"`应该从传递的 i/p 字符串中删除，并且所有`"\\{"`应该替换为`"{"`.

我觉得问题出在正则表达式值上，即`"\\\\{.*?\\\\}"`.

谁能让我知道获取所需的o / p的正则表达式值应该是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T10:59:08.533

您不简单使用的任何原因[`String#replace`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)？

```
String noSlashes = input.replace("\\", ""); 
```

或者，如果您只需要在打开花括号之前删除反斜杠：

```
String noSlashes = input.replace("\\{", "{"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T10:59:48.640

它应该像下面这样简单：

```
String result = remainingValue.replace("\\", ""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T11:24:27.123

正如之前已经回答的那样，如果您只想删除`\`之前的斜杠`{`，最好的方法就是使用

```
String noSlashes = input.replace("\\{", "{"); 
```

但是在你问的问题中，*谁能让我知道正则表达式值应该是什么*。如果您使用正则表达式是因为您不仅要删除`\`any 之前的`{`，而且只删除那些`{`稍后用 正确关闭的`}`，那么答案是：否。[你不能`{}`用正则表达式匹配嵌套。](https://stackoverflow.com/a/133684/1192381)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-01-28T14:12:37.017

更改正则表达式：`"\\&([^;]{6})"`

```
private String removeEscapeChars(String remainingValue) {
        Matcher matcher = Pattern.compile("\\&([^;]{6})", Pattern.CASE_INSENSITIVE).matcher(remainingValue);
        while (matcher.find()) {
            String before = remainingValue.substring(0, matcher.start());
            String after = remainingValue.substring(matcher.start() + 1);
            remainingValue = (before + after);
        }
        return remainingValue;
    } 
```

它应该工作..

# asp.net-mvc - 我应该在哪里存储在我的 MVC4 应用程序中保存“数据”的类？

> ID：12423074
> 
> 赞同：1
> 
> 时间：2012-09-14T10:54:11.477
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我的 MVC 应用程序中有一个名为 Storage 的项目。在其中我有以下三个文件夹：

助手模型服务

我正在考虑制作一些看起来像这样的静态类：

```
public static class TYPE
{
    public static string City = "07";
    public static string Street = "08";
} 
```

这些将提供参考查找，以避免我在代码中使用像“07”这样的字符串。

我想保持约定，所以我应该在我的 MVC 目录结构中为这些类使用什么文件夹名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:58:42.910

在文件夹之外`Controllers`，`Views`MVC 框架不需要其他文件夹结构约定才能正常工作（并且可以配置那些提到的）。`Models`甚至可以删除和重命名默认文件夹。

也就是说，以合乎逻辑的方式思考结构绝对是一个好主意。我建议使用`Constants`or`Helpers`或`Lookups`or之类的东西`Infrastructure`，具体取决于此代码可能包含的其他内容。

# iphone - 有没有办法以编程方式在 iPhone 中启用 3G 连接

> ID：12423076
> 
> 赞同：0
> 
> 时间：2012-09-14T10:54:28.270
> 
> 标签：iphone

> **可能重复：**
> [如何在 iphone 上以编程方式启动 3g 连接？](https://stackoverflow.com/questions/2217945/how-to-programatically-start-3g-connection-on-iphone)

我需要以编程方式连接到 3G 连接，如果我点击了 UIButton

那么3G连接应该每次都启用和禁用。如果可能的话，这可能吗？

请帮我。

谢谢，尼克斯

# jquery - jqueryui 将图像拖入 contentEditable div 并将其放在文本中的该位置

> ID：12423083
> 
> 赞同：0
> 
> 时间：2012-09-14T10:54:46.640
> 
> 标签：jquery, jquery-ui, drag-and-drop, contenteditable

我有一个可拖动的 jqueryui 图像和一个包含文本/html 且 contentEditable=true 的 jqueryui droppable 的 div。

我希望能够将图像拖到 contentEditable 文本上，当我放下它时，我希望能够将图像放在该文本/字符位置。

如果我单击或选择可编辑文本中的文本，然后使用选定的文本范围拖动图像，我已经找到了很多方法，但是当我只是拖动图像并将其放下时，没有选择文本。

如何在放置事件时在 contentEditable 文本中设置选定/光标位置？

有人帮忙吗？

谢谢瑞克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-31T21:55:02.277

此问题已在本网站的其他地方得到解答：[Precise Drag and Drop within a contenteditable](https://stackoverflow.com/questions/14678451/precise-drag-and-drop-within-a-contenteditable)

那里的解决方案具有特定于每个浏览器的代码（通过功能检测），目前仅适用于 Chrome 和 Firefox。对于 Chrome，需要使用鼠标坐标计算范围`document.caretRangeFromPoint`。对于 Firefox，事件对象具有`rangeParent`和`rangeOffset`属性，可用于确定插入符号的位置。

```
document.addEventListener("drop", function(e) {
    var sel = document.getSelection();
    if(document.caretRangeFromPoint) { // Chrome
        var range = document.caretRangeFromPoint(e.clientX,e.clientY);
        sel.removeAllRanges();
        sel.addRange(range);
    } else if(e.rangeParent) { // Firefox
        var range = document.createRange();
        range.setStart(e.rangeParent, e.rangeOffset);
        sel.removeAllRanges();
        sel.addRange(range);
    } else if(sel.rangeCount == 0) { // Default to at least not completely failing
        var range = document.createRange();
        sel.addRange(range);
    }

    // The selection is now in the right place - proceed with whatever the drop should do
}); 
```

此代码旨在处理可编辑的整个文档 - 对于可编辑的 div，您需要在该 div 上设置事件侦听器，并修改后备案例以确保选择在 div 内。

# windows - Windows，使用“复制”命令在不同网络机器之间复制文件

> ID：12423085
> 
> 赞同：3
> 
> 时间：2012-09-14T10:54:58.750
> 
> 标签：windows, copy

我必须从局域网上的另一台机器上复制文件。

对我来说，当两台机器都通过局域网连接时，Windows“复制”命令工作正常：

```
copy c:\Tool.exe \\10.90.206.177\c$ 
```

以上将`Tool.exe`文件复制到驱动器`10.90.206.177`中的机器。`C:`

但是现在我想将文件复制到一台机器上，该机器是不同网络的一部分。

有没有可能的方法使用 Windows`copy`来做到这一点？

# jsp - 我如何 fn:join 在 jsp 中实现 toString 的对象？

> ID：12423086
> 
> 赞同：1
> 
> 时间：2012-09-14T10:55:02.477
> 
> 标签：jsp, jstl, seam

我正在迭代表中的实体列表。该实体有一个对象列表，这些对象覆盖该`toString`方法以提供其实例的“名称”属性。我们称它们为`B`对象。

在该表中，我希望有一个列，其中通过调用其`toString`方法确定的对象的所有值`B`都用逗号连接。就像在这个片段中一样：

```
<rich:column visible="false" label="function">
  <f:facet name="header">Function</f:facet>
  <h:outputText value="#{fn:join(a.b, ', ')}" />
</rich:column> 
```

`b`类的对象列表在哪里`B`。唯一的问题是 jsp1.2 不会渲染这个：

```
javax.servlet.ServletException: Cannot convert [] of type class org.hibernate.collection.PersistentBag to class [Ljava.lang.String; 
```

所以问题是：有没有一种很好的方法来处理这个问题，而不是`<c:forEach>`在循环中输出列表值？

恐怕这是一个使用 jsp1.2 和 seam2.2 的遗留项目，我不允许升级它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T13:10:03.780

您可以创建一个返回`String`列表的吸气剂：

```
public String getMyListAsString(){
  return org.apache.commons.lang.StringUtils.join(myList, ", ");
} 
```

您可以在 EL 中使用 getter：

```
#{myBean.myListAsString} 
```

# wpf - wpf (XMAL) 中的事件条件

> ID：12423087
> 
> 赞同：0
> 
> 时间：2012-09-14T10:55:08.487
> 
> 标签：wpf, events, conditional-statements

我需要改变tabcontrol的高度。
如何在 XAML 中使用条件？
如果身高 180- 我需要将高度更改为 30
如果身高 30- 我需要将高度更改为 180

> ```
>  <EventTrigger RoutedEvent="Button.Click" SourceName="btnOpenState">
>                 <EventTrigger.Actions>
>                     <BeginStoryboard>
>                         <Storyboard>
>                             <DoubleAnimation
>                                 Storyboard.TargetName="tbViews" 
>                                 Storyboard.TargetProperty="Height"
>                                 From="30" To="181" Duration="0:0:1" 
>                                 AutoReverse="False" RepeatBehavior="1x" />
>                         </Storyboard>
>                     </BeginStoryboard> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T15:58:29.470

您可以使用 binding 和 an`IValueConverter`来执行此操作。`From`（请注意，如果目标已设置为该值，则无需在情节提要中设置。）

```
To="{Binding ElementName=tbViews,Path=Height,Converter={StaticResource HeightConverter}}" 
```

这里*HeightConverter*应该实现`IValueConverter`，返回用于转换`((double)value < 180) ? 180 : 30`。

# c# - 以编程方式清除 Silverlight 应用程序存储？

> ID：12423088
> 
> 赞同：4
> 
> 时间：2012-09-14T10:55:09.653
> 
> 标签：c#, .net, web-services, silverlight, web-applications

我为一些客户发布了 Silverlight 应用程序。我在发布更新时遇到问题。

我想当用户最初加载网页时，如果他们的应用程序存储比上次更新站点时更旧，那么就会发生[这种](http://www.softcity.com/article/internet-networking/sneaky-silverlight-and-isolated-storage-another-bad-batch-of-cookies/wN2gTMwADN)情况。这将使我的应用程序工作。

所以，两个问题：

*   如何检查用户存储的应用程序存储是否早于 Silverlight 站点的上次更新？

*   如何删除站点的应用程序存储？

我试过打电话：

```
using( var store = IsolatedStorageFile.GetUserStoreForApplication() ) {
  store.Remove();
}
using( var store = IsolatedStorageFile.GetUserStoreForSite()) {
  store.Remove();
} 
```

在`App.xaml.cs`文件中，但这些似乎对显示的页面没有影响 - 应用程序存储未完全清除。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T01:34:27.760

•如何检查用户存储的应用程序存储是否早于 Silverlight 站点的上次更新？

此代码进入应用程序以检查您的 SL 应用程序是否存在并更新我不知道它是否有帮助，但如果您只想在更新时使用该 IsolatedStorageFile 做某事，它应该是您想要的：

```
Application.Current.CheckAndDownloadUpdateAsync();
Application.Current.CheckAndDownloadUpdateCompleted += new CheckAndDownloadUpdateCompletedEventHandler(Current_CheckAndDownloadUpdateCompleted);

private void Current_CheckAndDownloadUpdateCompleted(object sender, CheckAndDownloadUpdateCompletedEventArgs e)
{   
   if (e.UpdateAvailable) 
   { 

   } 
} 
```

•如何删除站点的应用程序存储？

```
IsolatedStorageFile store  = IsolatedStorageFile.GetUserStoreForApplication();
if(store.FileExists(FileName))
{
  store.DeleteFile(FileName);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T17:38:43.880

您可以将 xap 文件的文件创建日期写入 Silverlight 对象的 initParams。

```
<object id="xaml" data="data:application/x-silverlight-2," type="application/x-silverlight-2">
   <param name="initParams" value="<%= GetInitParams() %>" /> 
```

在文件后面的代码中，您编写如下内容：

```
protected string GetInitParams()
{
    string xappath = HttpContext.Current.Server.MapPath(@"~/ClientBin/YourXapFile.xap");
    DateTime xapCreationDate = System.IO.File.GetLastWriteTime(xappath);
    return string.Format("lastUpdateDate={0:d}, xapCreationDate);
} 
```

在 Silverlight 客户端中，您可以将此日期与应用程序存储的上次更新进行比较。您可以使用对象`GetLastWriteTime()`上的方法找到上次更新的日期和时间。`IsolatedStorageFile`

然后比较这两个日期并`Deletefile`根据需要删除文件。

# c# - 在 http 请求中查找 URL 的默认页面（即 index.php/default.aspx）

> ID：12423091
> 
> 赞同：1
> 
> 时间：2012-09-14T10:55:12.663
> 
> 标签：c#, http-headers

我只是想知道是否有办法通过 http 请求或 C# 中的类似请求自动找出站点默认页面（即 index.php、default.aspx 或自定义！）。我查看了标头响应，似乎没有任何提供此信息的内容。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:11:52.660

从技术上讲，没有默认页面之类的东西。只是碰巧在根目录中的页面，或者在您请求根目录时被定向到的页面。它肯定不会出现在请求中，因为那样你就已经知道了。这就像给某人发一封信告诉他们他们住在哪条街道。当您请求网站的根目录时，服务器可能会向您发送重定向响应，如果是这样，那么您将知道它认为什么是它自己的“默认值” page'，如果没有，您将不得不假设它只是根本身。

# silverlight - 数据网格值不变

> ID：12423092
> 
> 赞同：0
> 
> 时间：2012-09-14T10:55:23.243
> 
> 标签：silverlight

我在 datagird 的 CellEditingTemplate 中有一个 TextBox。当我更改它的值但它没有反映到新值时。

```
<TextBox Text="{Binding Path=Firstname}" Grid.Column="1" Width="80"  ></TextBox> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:01:23.790

您必须使用 Mode=TwoWay 并`INotifyPropertyChanged`与 Firstname 一起使用。

```
<TextBox Text="{Binding Path=Firstname,Mode=TwoWay}" Grid.Column="1" Width="80"/> 
```

# jquery - 替换 django 呈现的模板中的文本

> ID：12423094
> 
> 赞同：1
> 
> 时间：2012-09-14T10:55:24.663
> 
> 标签：jquery

我有一个模板，它从数据库中获取值并使用模板标签显示数据。返回的值是 0 和 1，我无法真正控制它，所以我试图让一些 jquery 来更改值，所以 0 = 'no' 和 1 = 'yes'

我有这个代码在这里工作[http://jsfiddle.net/a9cvx/236/](http://jsfiddle.net/a9cvx/236/)

使用这个

```
$(document).ready(function() {
    $("body").html($("body").html().replace(/0/g,'<b>abcde-fghi</b>'));
    $("body").html($("body").html().replace(/1/g,'<b>yes</b>'));
)}; 
```

这是我的模板代码。

```
...
<tr>
   <td>Reboot VM</td>
   <td>{{ col.t_rebootvm }}</td>
   <td>waiting</td>
</tr>
.... 
```

所以 {{ col.t_rebootvm }} 来自数据库，等于 0 或 1。

加载 html 时，我可以看到我的 jquery js 文件位于页面源代码中。但是当我在我的模板中使用这个 jquery 代码时，值不会改变。这是因为正在渲染模板并且值 0 或 1 在加载时不可用？这是别的吗？

非常感谢 - 奥利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:05:30.763

替换整个 HTML 文档中的字符串不是一个好习惯。你会丢失事件并且很可能替换你不想要的东西。它也可能很慢。

您至少应该尝试在选择器中更加具体，例如：

```
$(function() {
     $('td').each(function() {
         var html = $(this).html();
         $(this).html( 
             html.replace(/0/,'<b>no</b>')
                 .replace(/1/,'<b>yes</b>')
         );
     });
}); 
```

[http://jsfiddle.net/prF9k/](http://jsfiddle.net/prF9k/)

不要忘记将 DOM 逻辑也放在 DomReady 回调中（我用过`$(function(){...`）。无论如何，您的小提琴工作的原因是因为 jsFiddle 在 HTML 下方添加了脚本，因此无需将其包装在 domReady 回调中。但是，如果您的脚本位于文档的 HEAD 中，则需要这样做。

# c++ - 重定向有回调函数吗？

> ID：12423096
> 
> 赞同：2
> 
> 时间：2012-09-14T10:55:27.877
> 
> 标签：c++, c, curl

我们需要在重定向发生时通知应用程序。当收到重定向响应时，curl 是否提供注册回调函数的选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:04:20.520

不，不是在这个时候。然而，这个问题已经被讨论过了，未来很可能会实现这样的功能。同时有[一个你可能会发现有用的 libcurl 补丁](http://curl.haxx.se/mail/lib-2012-01/0184.html)。

# c# - SHDocVw InternetExplorer 打印服务器端失败——COM 异常

> ID：12423108
> 
> 赞同：0
> 
> 时间：2012-09-14T10:56:16.983
> 
> 标签：c#, asp.net, wcf, printing, shdocvw

我试图通过部署在 IIS 机器上的 WCF 服务从服务器端打印文件。以下代码在 Win 2oo3 机器上完美运行。但是同样的代码抛出了一个 COM 异常。关于这个的任何想法。我猜它与某些权限有关。这是代码

```
public void Print(string htmlFilename, string printer, short copies)
        {
            string currDefault = string.Empty;
            try
            {
                currDefault = GetDefaultPrinter();
                myPrinters.SetDefaultPrinter(printer);
                for (int i = 0; i < copies; i++)
                {
                    documentLoaded = false;
                    documentPrinted = false;

InternetExplorer  ie = new InternetExplorer  ();
                    ie.DocumentComplete += new SHDocVw.DWebBrowserEvents2_DocumentCompleteEventHandler(ie_DocumentComplete);
                    ie.PrintTemplateTeardown += new SHDocVw.DWebBrowserEvents2_PrintTemplateTeardownEventHandler(ie_PrintTemplateTeardown);
                    object missing = Missing.Value;

                    ie.Navigate(htmlFilename, ref missing, ref missing, ref missing, ref missing);
                    while (!documentLoaded && ie.QueryStatusWB(SHDocVw.OLECMDID.OLECMDID_PRINT) != SHDocVw.OLECMDF.OLECMDF_ENABLED)
                        Thread.Sleep(100);

                    ie.ExecWB(SHDocVw.OLECMDID.OLECMDID_PRINTPREVIEW, SHDocVw.OLECMDEXECOPT.OLECMDEXECOPT_DODEFAULT, ref missing, ref missing);

                    ie.ExecWB(SHDocVw.OLECMDID.OLECMDID_PRINT, SHDocVw.OLECMDEXECOPT.OLECMDEXECOPT_DONTPROMPTUSER, ref missing, ref missing);
                    while (!documentPrinted)
                        Thread.Sleep(100);

                    ie.DocumentComplete -= ie_DocumentComplete;
                    ie.PrintTemplateTeardown -= ie_PrintTemplateTeardown;
                    ie.Quit();
                }
            }
            catch { throw; }
            finally
            {
                myPrinters.SetDefaultPrinter(currDefault);
            }
        } 
```

在为 internetexplorer 创建对象时，Com 异常如下所示。

> [ERRORLOG] 由于以下错误，检索具有 CLSID {0002DF01-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败：80080005 服务器执行失败（来自 HRESULT 的异常：0x80080005 (CO_E_SERVER_EXEC_FAILURE)）。：在 System.RuntimeTypeHandle.CreateInstance（RuntimeType 类型，Boolean publicOnly，Boolean noCheck，Boolean& canBeCached，RuntimeMethodHandleInternal& ctor，Boolean& bNeedSecurityCheck）在 System.RuntimeType.CreateInstanceSlow（Boolean publicOnly，Boolean skipCheckThis，Boolean fillCache）在 System.RuntimeType.CreateInstanceDefaultCtor（Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) at System.Activator.CreateInstance(Type type, Boolean nonPublic) at System.Activator.CreateInstance(Type type) [/ERRORLOG]

此外，如果我尝试将对象创建为 InternetExplorerMedium。然后它在 2008 年工作，但不在 Win server 2003 中工作。我非常不知道......任何有关的帮助都会有很大帮助。

问候， 帕万 N

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T03:52:17.180

检查您的 2003 服务器和 2008 服务器上安装了哪些版本的 IE。此外，由于针对不同 IE 版本的不同 IE 安装，可能需要安装其他与 IE 版本相关的 SDK 运行时等，这些运行时不在 2008 盒子上。例如，我有一个较旧的客户端应用程序，我必须在其中安装 DHTMLEdit ActiveX 工具包，这需要一个单独的步骤，并且您必须在 MSDN 上查找设置例程。还要检查 2003 和 2008 服务器之间的帐户和权限（用于运行 WCF 服务的帐户），看看有什么不同。2008 年可能加强了许多安全设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:21:19.517

最后我改变了我自己的逻辑。我观察到 IE 有很多不同之处。特别是IE9。所有的 DCOM 设置都会有所不同。所以用名字 InternetExplorer ie = new InternetExplorer(); 你不能创建任何对象。它与权限或操作系统无关。它与IE版本有关。以上代码仅适用于 IE8。

# printing - ReportViewer - 设置默认文件名

> ID：12423112
> 
> 赞同：3
> 
> 时间：2012-09-14T10:56:33.880
> 
> 标签：printing, reportviewer, xps, localreport

当我使用`ReportViewer`技术（LocalReport）从我的计算机中打印出资源时`Microsoft XPS printer`，它给了我默认的文件名： `*.xps`

我会以编程方式更改它，我该怎么做？

我改变了两个属性：

```
 _reportViewer.LocalReport.DisplayName = _printFileName;
        _reportViewer.PrinterSettings.PrintFileName = _printFileName; 
```

似乎大多数技术都能理解我想要什么。（CutePDF，其他打印机），但不是 Microsoft XPS 编写器。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:49:55.363

我相信您所缺少的只是另外一行：

```
_reportViewer.PrinterSettings.PrintToFile = true; 
```

# java - 如何在struts2 jquery中制作两个具有主细节关系的网格，具有添加、编辑和删除任何网格中的任何记录的功能？

> ID：12423115
> 
> 赞同：1
> 
> 时间：2012-09-14T10:56:51.423
> 
> 标签：java, struts2, jqgrid

我需要 2 个 jQuery 网格，它们使用 Mastr - 详细信息关系在它们内部相互关联。在两个网格中，用户都可以输入记录，并且可以在搜索记录的情况下检索数据。任何想法或示例代码。

提前致谢

# sencha-touch - Sencha Touch 2 - 在字段集组件内向右切换字段对齐

> ID：12423117
> 
> 赞同：1
> 
> 时间：2012-09-14T10:57:05.050
> 
> 标签：sencha-touch, alignment, sencha-touch-2, toggle, fieldset

有谁知道如何将`togglefield`Sencha Touch 2 中的 a 对齐到组件的右侧`fieldset`？有这个简单的例子：

```
Ext.widget("fieldset", {
    items: [
        {
            xtype: 'togglefield',
            label: 'Toggle 1',
        },
        {
            xtype: 'togglefield',
            label: 'Toggle 2'
        }
    ]
}); 
```

输出看起来不错，除了两个切换字段与标签文本旁边的左侧对齐。我想让它们与组件的右侧对齐`fieldset`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T01:19:09.750

尝试这个

```
Ext.widget("fieldset", {
    items: [
        {
            xtype: 'togglefield',
            cls:'rightAligned',
            label: 'Toggle 1',
        },
        {
            xtype: 'togglefield',
            label: 'Toggle 2'
        }
    ]
}); 
```

并添加一种风格

```
.rightAligned .x-toggle {
    float:right;
    margin-right:1em;
} 
```

# php - 如何显示平均分？

> ID：12423119
> 
> 赞同：0
> 
> 时间：2012-09-14T10:57:07.643
> 
> 标签：php, mysql

我正在使用 PHP 和 MySQL 保存游戏的分数，表格如下所示。

```
ID USERID SCORE
1  23     200
2  45     145
3  64     231 
```

ETC...

现在什么 PHP 或 MySQL 代码可以让我显示平均分数？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:59:16.473

用户的平均分？这应该这样做：

```
SELECT USERID, AVG(SCORE) AS AVERAGE_SCORE
FROM
    TABLE_NAME
GROUP BY
    USERID 
```

对于整个表：

```
SELECT AVG(SCORE) AS AVERAGE_SCORE
FROM
    TABLE_NAME 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:00:46.830

这应该有效：

```
SELECT AVG(SCORE) FROM SCORES 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:00:56.000

尝试

```
SELECT AVG(SCORE) FROM TableName 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T10:59:26.513

```
SELECT AVG(`SCORE`) as AVG_SCORE FROM `YOURTABLE` 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T10:59:56.810

对于整个表

```
SELECT AVG(score) AS average_score FROM 'table' 
```

# symfony - Sonata/DoctrineORMAdminBundle/Guesser/FilterTypeGuesser.php 中未定义的索引，同时在 SonataAdminBundle 中配置 Datagrid 过滤器

> ID：12423130
> 
> 赞同：0
> 
> 时间：2012-09-14T10:57:49.547
> 
> 标签：symfony, symfony-sonata, sonata-admin

我正在尝试将数据网格过滤器与我的简单实体一起使用：

// MyBundle/Entity/Application.php

```
/**
 *
 * @ORM\Entity
 * @ORM\Table(name="application")
 */
class Application extends BaseEntity
{
    /**
     * @var integer $_id
     *
     * @ORM\Id
     * @ORM\Column(name="id", type="integer")
     */
    protected $_id;

    /**
     * @var string $_name
     * 
     * @ORM\Column(name="name", type="string", length=1000)
     */
    protected $_name;

    public function __toString()
    {
        if ((string) $this->_id === '') {
            return "N/A";
        }
        return $this->_name;
    }

    /**
     * Set _id
     *
     * @param integer $id
     */
    public function setId($id)
    {
        $this->_id = $id;
    }

    /**
     * Get _id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->_id;
    }

    /**
     * Set _name
     *
     * @param string $name
     */
    public function setName($name)
    {
        $this->_name = $name;
    }

    /**
     * Get _name
     *
     * @return string 
     */
    public function getName()
    {
        return $this->_name;
    }
} 
```

// MyBundle/Admin/ApplicationAdmin.php

```
class ApplicationAdmin extends Admin
{
    /**
     * @param string $code
     * @param string $class
     * @param string $baseControllerName
     */
    public function __construct($code, $class, $baseControllerName)
    {
        parent::__construct($code, $class, $baseControllerName);
        $this->setMaxPerPage(25);
    }

    protected function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
            ->add('id', 'integer')
            ->add('name', 'text')
        ;
    }

    /**
     * {@inheritdoc}
     */
    protected function configureDatagridFilters(DatagridMapper $datagridMapper)
    {
        $datagridMapper
            ->add('name');
        ;
    }

    protected function configureListFields(ListMapper $listMapper)
    {
        $listMapper
            ->addIdentifier('id', null, array('label' => 'ID'))
            ->addIdentifier('name', null, array('label' => 'Name'))
        ;
    }
} 
```

但是当我试图获取应用程序列表时，我得到：

```
Notice: Undefined index: name in /path-to-symfony-project/vendor/bundles/Sonata/DoctrineORMAdminBundle/Guesser/FilterTypeGuesser.php line 65 
```

如果将**configureDatagridFilters**功能代码更改为：

```
protected function configureDatagridFilters(DatagridMapper $datagridMapper)
{
    $datagridMapper
        ->add('name', 'doctrine_orm_string');
    ;
} 
```

我成功获得了带有请求过滤器的应用程序列表，但是当我尝试使用一些数据提交过滤器表单时（即名称包含 aaa），我收到另一个错误：

```
[Semantical Error] line 0, col 87 near 'name LIKE :n': Error: Class MyBundle\Entity\Application has no field or association named name 
```

如果将**configureDatagridFilters**功能代码更改为：

```
protected function configureDatagridFilters(DatagridMapper $datagridMapper)
{
    $datagridMapper
        ->add('_name');
        //or
        //->add('_name', 'doctrine_orm_string');
    ;
} 
```

我也成功获得了带有请求过滤器的应用程序列表，但是当我尝试提交带有一些数据的过滤器表单（即名称包含 aaa）时，我收到第三个错误：

```
Invalid parameter format, : given, but :<name> or ?<num> expected.
500 Internal Server Error - QueryException 
```

我没有想法，请帮忙。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-04-13T12:00:58.453

也许是时候将旧公司的编码风格更改为[PSR-1 基本编码标准](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-1-basic-coding-standard.md)和 [PSR-2-coding-style-guide](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-2-coding-style-guide.md)用于所有 Symfony2 应用程序。

不推荐对私有/受保护属性使用 undescores，并且仅对不存在私有和受保护方法的旧 PHP4 项目有价值。 **在一个应用程序中混合不同的编码风格是不好的**。所有 Symfony 捆绑包都使用 PSR 标准和[Symfony 标准](http://symfony.com/doc/current/contributing/code/standards.html)。

# c# - 过滤掉列表视图中可见的代码片段列表

> ID：12423131
> 
> 赞同：0
> 
> 时间：2012-09-14T10:57:49.717
> 
> 标签：c#, visual-studio-2010, visual-studio-sdk

在[这个链接](http://msdn.microsoft.com/en-us/library/ff926100)之后，我有一组代码片段。

但是片段插入必须与上下文有关，即。如果我在声明类之前执行“插入片段”，则不应显示“方法声明”片段。还需要根据托管或非托管代码过滤片段。

简而言之，我正在寻找一种机制如下：

```
if <condition>
{
 modify list of snippets visible in the menu
} 
```

我们有这样的机制或类似的东西吗？欢迎提出想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T15:49:59.467

我找到了我的问题的解决方案。希望它可以帮助某人。

我按照链接上的说明进行操作： [关于代码片段](http://msdn.microsoft.com/en-us/vstudio/cc721667.aspx)和 [代码元素的视频](http://msdn.microsoft.com/en-us/library/ms171421%28v=vs.80%29.aspx)

让 snippet.xml 文件包含以下内容：

```
<Code Language="Language"
    Kind="method decl">
        Code to insert
</Code> 
```

然后调用FilterView类中的expansionProvider.DisplayExpansionBrowser（参考视频）：

```
string[] kind = new string[1];                            
kind[0] = "method decl";
return expansionProvider.DisplayExpansionBrowser(TextView, 
                                                 snippets, 
                                                 null, false, kind, false); 
```

Thus the specific snippet will appear in 'method declaration' context. Thus other snippets can be done. The xml has to hold the context information.

# nsis - NSIS IfFileExists - 不止一行

> ID：12423137
> 
> 赞同：10
> 
> 时间：2012-09-14T10:58:11.850
> 
> 标签：nsis

我正在使用 IfFileExists 函数，但我认为它只包含跳转后的第一行。我怎样才能做类似于 C 的事情，比如 {..../.../....}？！

```
IfFileExists "$PROGRAMFILES\InduSoft Web Studio v7.0\Bin\RunStartUp.exe" StartUpExists PastStartUpExists
      StartUpExists:
        StrCpy $Text "$PROGRAMFILES\InduSoft Web Studio v7.0\Bin\RunStartUp.exe"

      PastStartUpExists:
        nsDialogs::Create 1018
        Pop $Dialog

        nsDialogs::SelectFileDialog open "$PROGRAMFILES\InduSoft Web Studio v7.0\Bin\RunStartUp.exe" "*.exe"

        Pop $Text

        ${NSD_CreateText} 0 13u 100% -13u $Text
        Pop $Text

        ${NSD_CreateText} 0
        ${NSD_GetText} $Text $0

        CreateShortCut "$SMPROGRAMS\Advanlab\Website.lnk" "$INSTDIR\${PRODUCT_NAME}.url"
        CreateShortCut "$SMPROGRAMS\Advanlab\Uninstall.lnk" "$INSTDIR\uninst.exe"
        CreateShortCut "$SMPROGRAMS\Advanlab\Advanlab.lnk" "$0"
        CreateShortCut "$DESKTOP\Advanlab.lnk" "$0" 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-14T12:00:13.973

的语法`IfFileExists`是

```
IfFileExists file_to_check offset_or_label_if_exists [offset_or_label_if_not_exists] 
```

如果您打算执行一个块*或另一个块**，*请不要忘记跳过第二个块。

因此，一个简单的情况是：

```
IfFileExists "$INSTDIR\file.txt" file_found file_not_found
file_found:
StrCpy $0 "the file was found"
goto end_of_test ;<== important for not continuing on the else branch
file_not_found:
StrCpy $0 "the file was NOT found"
end_of_test: 
```

如果其中一个块紧随其后，`IfFileExists`您可以使用 0 偏移量而不是无用的标签：

```
IfFileExists "$INSTDIR\file.txt" 0 file_not_found
StrCpy $0 "the file was found"
goto end_of_test ;<== important for not continuing on the else branch
file_not_found:
StrCpy $0 "the file was NOT found"
end_of_test: 
```

# c++ - C++ 多线程

> ID：12423140
> 
> 赞同：-3
> 
> 时间：2012-09-14T10:58:30.870
> 
> 标签：c++, multithreading

我正在为使命召唤游戏编写一个 DLL，我做了很多工作，但我的问题在于下面的代码：

```
int func = 0;
-----
if (cl_ingame=1){ Sleep(35);start(); }

void start()
{
command(x,x, "c \"Press up for 11th\"");
func = 1;
Sleep(3000); 
command(x,x, "c \"Press up for Unlock all\"");
func = 2;

if (dpad = up){
if (func = 1){
do11th();
}else if (func = 2){
doUnlock();
} 
} 
```

现在困扰的不是它自己的代码，而是void“start”将成为一个循环的事实，现在我的问题是如果游戏已经忙于循环，我将无法使用任何控件或调用任何函数一个，所以我需要找出如何为 C++ 线程化

我知道谷歌是男人最好的朋友，但它并没有真正解释得非常详细，如果有人可以简单地给我一个示例线程就像这样

（线程）{函数}

如何停止线程以及如何调用/启动线程

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:08:18.967

启动一个线程非常简单：

```
#include <thread>
#include <iostream>

void thread_entry(int arg)
{
    std::cout << "Thread running: argument " << arg << std::endl;
}

int main()
{
    std::cout << "Thread starting" << std::endl;
    std::thread thread(thread_entry, 42);
    thread.join();
    std::cout << "Thread finished" << std::endl;
} 
```

在线程运行时与线程通信更复杂。不幸的是，标准 C++ 仍然相当缺乏高级并发性，所以首先使用标准库提供的原子变量、互斥体和条件变量可能是最容易的。简单地停止线程：

```
#include <thread>
#include <atomic>
#include <iostream>

void thread_entry(std::atomic<bool> & stop)
{
    while (!stop) {
        std::cout << "Thread running" << std::endl;
        sleep(1);
    }
}

int main()
{
    std::cout << "Thread starting" << std::endl;
    std::atomic<bool> stop(false);
    std::thread thread(thread_entry, std::ref(stop));
    sleep(5);
    stop = true;
    thread.join();
    std::cout << "Thread finished" << std::endl;
} 
```

一般来说，线程间的同步比较复杂，容易出错。注意尽量减少线程之间共享的数据量，并仔细考虑你对这些数据所做的一切，确保它永远不会被一个线程访问，而另一个线程可能会改变它。

如果您正在编写游戏，那么更简单的方法可能是单线程事件循环。单个主循环将轮询输入事件并通知程序的各个组件它们已经发生；他们会相应地更新他们的状态，并可能产生更多他们自己的事件。唯一的复杂性是每个事件处理程序必须快速完成其工作以避免阻塞整个程序。

# php - 过度使用条件语句？

> ID：12423142
> 
> 赞同：1
> 
> 时间：2012-09-14T10:58:36.957
> 
> 标签：php, codeigniter, conditional

我遇到了一个小问题，我只是在寻找一些关于最佳实践的建议。

我有一个从外部网页获取一些数据的脚本。有时这些数据并不完整。

例如我可能有

```
$array=array('name'=>'Bob Smith','address'=>array('0'=>'My address'),'phone'=>'000000'); 
```

然后我将这些数据设置到另一个数组中以插入到我的数据库中。例如

```
$data=array('name'=>$array['name'],'address'=>$array['address']['0'],'phone'=>$array['phone']); 
```

但是，例如，如果没有找到地址，则 $array['address']['0'] 未设置，因此使用它创建第二个数组会在 CodeIgniter 中产生错误。尽管在正常的程序编码中不会显示错误，但我认为 CI 有此错误显示为解决它是最佳实践。

所以.. 我认为解决这个问题的最好方法是使用条件并检查 $array['address']['0'] 在添加到我们的 $data 数组之前是否设置了它。那是对的吗？如果不是，则将 null 插入到数据库中。

嵌套问题是当我从数据库中获取数据以显示它时。我想分解地址的行并输出它们，但是如果没有再次设置，codeigniter 会引发错误。同样，通过条件语句很容易避免。

我的问题本质上是在数据的处理、插入和输出中，其中有许多可能会或可能不会设置的变量，我似乎需要大量的条件语句。

我想实际上这不是问题，但我希望我的代码尽可能简短。我错过了什么吗？

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T11:11:27.850

您知道所有可能返回的密钥吗？在这种情况下

```
$allowed_keys = array('name', 'address');
$new_data = array();
foreach ($allowed_keys as $key) {
    $new_data[$key] = isset($data[$key]) ? $data[$key] : null;
} 
```

您还可以为 foreach 循环中的某些键添加格式

```
if ($key == 'address') {
    $new_data[$key] = isset($data[$key]) ? implode(', ', $data[$key]) : null;
    continue;
} 
```

# python - 如何使用参数执行 python 脚本文件？

> ID：12423149
> 
> 赞同：2
> 
> 时间：2012-09-14T10:59:02.757
> 
> 标签：python

> **可能重复：**
> [Python 中的命令行参数](https://stackoverflow.com/questions/1009860/command-line-arguments-in-python)

例子：

```
itp.threads[0].memload(r"c:\FistForSOCAD_PASS.bin","0x108000P")
itp.threads[0].cv.cip = "0x108000"
itp.go()
itp.halt() 
```

我想将上面的示例作为 python 脚本，并且“FistForSOCAD_PASS.bin”可以用一个参数替换。因为它只是可变的东西。

运行脚本的示例命令如下：

`python itp.py FistForSOCAD_PASS.bin`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T11:04:17.887

有很多方法，一种是这种方法：

```
import argparse

parser = argparse.ArgumentParser(description='Process some integers.')
parser.add_argument('integers', metavar='N', type=int, nargs='+',
                   help='an integer for the accumulator')
parser.add_argument('--sum', dest='accumulate', action='store_const',
                   const=sum, default=max,
                   help='sum the integers (default: find the max)')

args = parser.parse_args()
print args.accumulate(args.integers) 
```

这使：

```
$ prog.py -h
usage: prog.py [-h] [--sum] N [N ...]

Process some integers.

positional arguments:
 N           an integer for the accumulator

optional arguments:
 -h, --help  show this help message and exit
 --sum       sum the integers (default: find the max) 
```

[在docs.python.org](http://docs.python.org/library/argparse.html#module-argparse)上阅读更多信息

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T11:02:41.813

您可以使用[sys.argv](http://docs.python.org/library/sys.html)：

> **系统.argv**
> 
> 传递给 Python 脚本的命令行参数列表。`argv[0]`是脚本名称（它是否为完整路径名取决于操作系统）。[...]

例子：

```
import sys
if len(sys.argv) > 1:
    filename = sys.argv[1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:04:48.193

您可能想查看[argparse](http://docs.python.org/library/argparse.html#module-argparse)模块。

# sql - sql 中的用户定义函数在没有“dbo”的情况下无法工作。函数名的前缀

> ID：12423151
> 
> 赞同：1
> 
> 时间：2012-09-14T10:59:11.380
> 
> 标签：sql

> **可能重复：**
> [有没有办法在 Microsoft SQL Server 查询上使用函数而不使用“dbo”。在函数之前？](https://stackoverflow.com/questions/5207036/is-there-a-way-to-use-a-function-on-a-microsoft-sql-server-query-without-using)

我在 SQL Server 中的用户定义函数有问题，当我尝试在没有 dbo 的情况下执行它时显示错误

**“GetApplicationNumber”不是可识别的内置函数名称。**

```
 SET @ApplicationNumber=dbo.GetApplicationNumber(SCOPE_IDENTITY())  --WORKING FINE

  SET @ApplicationNumber=GetApplicationNumber(SCOPE_IDENTITY()) --SHOWING ERRORS 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:02:45.910

UDF 在引用它们时总是需要模式名称，
它们使语句可读并且性能也略有提高。

# java - 试图用java中的相对url对外部url的内容收费

> ID：12423155
> 
> 赞同：0
> 
> 时间：2012-09-14T10:59:17.923
> 
> 标签：java, http, url

我需要在我的 Web 应用程序中加载外部 url 的内容。

我用 HttpsUrlConnection 和 HttpCliente 试过了，我忘记了，但是相对 URL 有问题，因为它不起作用。

如果我的 webapp 是`http://example1.com`并且我尝试对 的内容收费，例如，`http://external.com`的相对 url正在尝试解决。`http://external.com``/images/g.jpg``http://example1.com/images/g.jpg`

我很绝望，我寻找谷歌，但我什么也没找到。

我很抱歉我的英语不好。

谢谢！！！:-)

PD：有我的代码（在代码中 helios 说关于将相对 url 更改为绝对 url，但它不起作用......）

codigoHtml 具有带有相关链接的 html 代码，它不起作用！

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {      

        DefaultHttpClient httpclient = new DefaultHttpClient();

        httpclient.getParams().setParameter(ClientPNames.DEFAULT_HOST, new HttpHost("host_to_redirect"));       

        HttpPost httpPost = new HttpPost("host_to_redirect/action.do");

        httpPost.addHeader("Location", "host_to_redirect");

        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("name", "value"));
        nameValuePairs.add(new BasicNameValuePair("name", "value"));

        httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        HttpResponse httpResponse = httpclient.execute(httpPost);

        httpResponse.addHeader("Location", "host_to_redirect");

        HttpEntity entity = httpResponse.getEntity();

        System.out.println("----------------------------------------");
        System.out.println(httpResponse.getStatusLine());
        System.out.println("----------------------------------------");

        if (entity != null) {
            // System.out.println(EntityUtils.toString(entity));
            response.setHeader("Location", "https://prepliberty.tirea.es:8065/pliberty");
            response.addHeader("Location", "https://prepliberty.tirea.es:8065/pliberty");

            String codigoHtml = EntityUtils.toString(entity);

            codigoHtml = codigoHtml.replaceAll("plib_script/", "host_to_redirect/plib_script/");            
            codigoHtml = codigoHtml.replaceAll("plib_css/", "host_to_redirect/plib_css/");
            codigoHtml = codigoHtml.replaceAll("plib_images/", "host_to_redirect/plib_images/");

            response.getWriter().write(codigoHtml);
        }   

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:11:23.660

您尝试做的类似于Apache 的[mod_rewrite 模块](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)所做的。

它基本上必须重写提供的 URL。没有灵丹妙药。所以我应该建议 - 如果内容不是很复杂 - 将内容作为字符串抓取并进行替换（或多个）。

就像是：

```
String html = ...content from URL... //beware of encoding!!! a lot of programmers neglect this!
html = html.replace(OLD_PREFIX, NEW_PREFIX);
// now you can use html 
```

OLD_PREFIX 可以是`http://external.com/`，NEW_PREFIX 可以是`http://example1.com/`

您可以考虑到 URL 总是以双引号开头`"`，因此前缀可以包含开头`"`的 . 当然……可能有错位……

# java - 将 javassist 字节码操作与 maven 编译集成

> ID：12423157
> 
> 赞同：6
> 
> 时间：2012-09-14T10:59:20.930
> 
> 标签：java, maven, javassist, bytecode-manipulation, annotation-processing

我有一个使用 javac / aspectj 编译器编译的 maven 项目。
我想在编译了 javassist 程序的类上运行，该程序操纵编译的类并向它们添加东西。
我想使用“进程类”阶段来运行我的工具。
我的问题是用 javassist 对“目标/类”中创建的类文件进行迭代的最佳方法是什么，以便之后我可以加载、修复和保存。
另一个要求是也在测试类上运行该工具。
如果有一个开源项目可以做类似的事情，那么看到一个活生生的例子会很棒。
谢谢，
阿夫纳

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-29T02:58:07.460

我最近偶然发现了同样的问题，我写了一个小的 Maven 插件来在构建期间应用 Javassist 类转换。我已经在[https://github.com/drochetti/javassist-maven-plugin上分享了代码](https://github.com/drochetti/javassist-maven-plugin)

您猜对了，您应该使用**流程类**阶段，而棘手的部分是类路径设置。经过一些试验和错误后，我设法猜测了 Project、Dependencies 和 Javassist 之间的整个 ClassPath 问题（`com.github.drochetti.javassist.maven.JavassistMojo.execute()`如果您想检查解决方案，请参阅代码）。

上面的 GitHub 链接有一些指导方针，但基本上你需要：

**1 - 在你的pom.xml**上配置插件

 **```
<plugin>
    <groupId>com.github.drochetti</groupId>
    <artifactId>javassist-maven-plugin</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <configuration>
        <includeTestClasses>false</includeTestClasses>
        <transformerClasses>
            <transformerClass>com.domain.ToStringTransformer</transformerClass>
        </transformerClasses>
    </configuration>
    <executions>
        <execution>
            <phase>process-classes</phase>
            <goals>
                <goal>javassist</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

2 - 实施 a `ClassTransformer`，这是一个例子：

```
/**
 * Silly transformer, used to hack the toString method.
 */
public class ToStringTransformer extends ClassTransformer {

    /**
     * We'll only transform subtypes of MyInterface.
     */
    @Override
    protected boolean filter(CtClass candidateClass) throws Exception {
        CtClass myInterface = ClassPool.getDefault().get(MyInterface.class.getName());
        return !candidateClass.equals(myInterface) && candidateClass.subtypeOf(myInterface);
    }

    /**
     * Hack the toString() method.
     */
    @Override
    protected void applyTransformations(CtClass classToTransform) throws Exception {
        // Actually you must test if it exists, but it's just an example...
        CtMethod toStringMethod = classToTransform.getDeclaredMethod("toString");
        classToTransform.removeMethod(toStringMethod);

        CtMethod hackedToStringMethod = CtNewMethod.make(
                "public String toString() { return \"toString() hacked by Javassist\"; }",
                classToTransform);
        classToTransform.addMethod(hackedToStringMethod);
    }

} 
```

注意：要实现转换器，您需要将插件添加为项目的依赖项，但不要担心，因为它仅在构建时使用，它可以**提供**范围，这样它就不会成为您的依赖项最终构建。

我希望这会有所帮助！如果您需要进一步的帮助，请告诉我。

丹尼尔**

# java - 防止在我的应用程序中多次访问 servlet

> ID：12423158
> 
> 赞同：5
> 
> 时间：2012-09-14T10:59:24.777
> 
> 标签：java, multithreading, synchronization

下面给出的是配置为autosys作业的url。这调用下面给出的servlet。谁能建议我如何保护这个方法“psServiceWrapper.processHRFeed();” 每次连续按下此 url 时，由于不正确的数据修改而被连续调用 10 次。我希望一次只能访问一个线程。

我知道我必须使用同步方法或块..我不确定如何..因为我不熟悉线程。

```
http://mydomain:11000/dorf/HRDORFScriptServlet?script=hrFeed

public class HRDORFScriptServlet extends HttpServlet {

private static final long serialVersionUID = 1L;
private static final Logger log = Logger.getLogger(HRDORFScriptServlet.class);
private final String script = "script";

@Override
protected void doGet(HttpServletRequest arg0, HttpServletResponse arg1) throws ServletException, IOException {
    // TODO Auto-generated method stub
    performTask(arg0, arg1);
}

@Override
protected void doPost(HttpServletRequest arg0, HttpServletResponse arg1) throws ServletException, IOException {
    // TODO Auto-generated method stub
    performTask(arg0, arg1);
}

 /** Execute the servlet.
 * 
 * @param request
 * @param response
 * @throws ServletException
 * @throws IOException
 */
public void performTask(HttpServletRequest request, HttpServletResponse response) throws ServletException,IOException {

    DorfUser dorfUser = DorfSessionUtils.getDorfUser(request.getSession());
    HRDorfFeedServiceWrapper psServiceWrapper = new HRDorfFeedServiceWrapper(dorfUser);
    String reqParam = request.getParameter(script);
    if(reqParam.equals("hrFeed")){
    try{
        psServiceWrapper.processHRFeed();           
    }
    catch(ServiceException se){
        log.error("Error While calling HRFeed Service : "+se.getMessage());
    }
    catch(Exception e){
        log.error("Error While calling HRFeed Service : "+e.getMessage());
    }

    }
 } 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:30:57.327

我会将 的功能`psServiceWrapper.processHRFeed()`移到一个实现 Runnable 的简单类中。

```
public class MyTask implements Runnable
{
    public void run() 
    {
        psServiceWrapper.processHRFeed();
    }
} 
```

然后创建一个固定线程池大小为 1 的 ExecutorService。

```
ExecutorService psServiceRunner = Executors.newFixedThreadPool(1); 
```

每次调用 servlet 时，我都会将 MyTask 的一个实例发布到这个实例上。

```
psServiceRunner.execute(new MyTask()); 
```

这会

1.  不要阻止您的 servlet 调用者。
2.  确保在任何时间点只有一个 servlet 可以运行该方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T11:03:58.570

```
synchronized(this){ 
 psServiceWrapper.processHRFeed();     
} 
```

但这将导致瓶颈，因为您的 servlet 将停止响应，直到 `psServiceWrapper.processHRFeed();`被当前线程执行。

如果您使用的是 Java 5，您也可以使用[ReetrantLock](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantLock.html)

> 一种可重入互斥锁，其基本行为和语义与使用同步方法和语句访问的隐式监视器锁相同，但具有扩展功能。

```
 private final ReentrantLock lock = new ReentrantLock();//Declare it 
```

像下面这样使用它

```
 lock.lock();  // block until condition holds
 try {
   psServiceWrapper.processHRFeed();
 } finally {
   lock.unlock()
 } 
```

# entity-framework - 实体框架 - 限制孙 fk 的结果

> ID：12423162
> 
> 赞同：1
> 
> 时间：2012-09-14T10:59:29.290
> 
> 标签：entity-framework, linq-to-entities

我在我的 edmx 文件中映射了以下实体，该文件是我数据库中表的镜像：

我只对特定人的问卷感兴趣。

我如何构建一个查询，它只会为一个人带回一份问卷，以便我仍然可以自然地遍历它，如下所示：

问卷调查问卷.问卷调查部分.问卷调查字段.问卷调查数据

**问卷**
id
名称
order_position
其他属性

**问卷**
_部分 ID
名称订单_位置 其他属性 问卷
_fk

**问卷**
_字段 ID
名称
order_position
其他属性
问卷_fk
section_fk

**问卷**
_数据 id
值
其他属性
field_fk
问卷_fk
section_fk
person_pk

**个人**
ID
名称
field_fk

每个**问卷**有许多**问卷调查**
每个**问卷调查**部分有许多**问卷**
调查字段 每个**问卷调查字段在****问卷**数据实体中有许多条目，但每个人、字段、部分和问卷只有一个条目

使用我的导航属性，我可以像这样导航：问卷调查.questionnaire_section.questionnaire_field.questionnaire_data

我只对特定人的问卷感兴趣。

如何构建一个只会为一个人带回 1 个问卷的查询，以便我可以按如下方式遍历它：

```
IQueryable<questionnaire> queryResult = from q in _db.questionnaires
                                        where q.id == 1 //only intrested in 1 questionnaire
                                        select q;

foreach (questionnaire myQuestionnaire in queryResult)
{
    Console.WriteLine(myQuestionnaire.name);
    foreach (questionnaire_section mySection in myQuestionnaire.questionnaire_section)
    {
        Console.WriteLine(mySection.name);
        foreach (questionnaire_field myField in mySection.questionnaire_field)
        {
            Console.WriteLine(myField.name);
            foreach (questionnaire_data myData in myField.questionnaire_data)
            {                                    
                // here I will get the data for all people                      
                Console.WriteLine(myData.value); 

                // I am only intrested in the data for 1 person
                // so I could do this:

                if (myData.person_fk == 1) 
                // I dont want to bring all the questionnaire_data for each person back from the db.
                {
                    Console.WriteLine(myData.value);
                    // I'm only interested in the questionnaire_data for a single person
                }
             }           
         }
     }       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:51:09.317

```
namespace TestProject
{
    [TestClass]
    public class UnitTest1
    {
        [TestMethod]
        public void TestMethod1()
        {

            IQueryable<questionnaireWithFieldWithData> results = staging_dbEntities();

            foreach (var item in results)
            {
                Debug.WriteLine(item.questionnaire_section.name.Trim());                            //section name
                foreach (var sectionWithDataitem in item.questionnaire_fieldWithData)
                {
                    Debug.Write(sectionWithDataitem.questionnaire_field.fld_caption.Trim() + ": ");         //field caption

                    if (sectionWithDataitem.questionnaire_data.field_value != null)
                    {
                        Debug.WriteLine(sectionWithDataitem.questionnaire_data.field_value.Trim());         //field value
                    }
                    else
                    {
                        Debug.WriteLine("");
                    }
                }
            }

        }

        public IQueryable<questionnaireWithFieldWithData> epm_staging_dbEntities()
        {
            staging_dbEntities _db = new staging_dbEntities(); 

            var questionnaire_field1 = _db.questionnaire_field;

            var result = from s in _db.questionnaire_section
                         where s.questionnaire_fk == 1
                         select new questionnaireWithFieldWithData()
                         {
                             questionnaire_section = s,
                             questionnaire_fieldWithData = from f in _db.questionnaire_field
                                                           where f.questionnaire_fk == s.questionnaire_fk 
                                                           where f.section_fk == s.id

                                                           select new questionnaireFieldWithData()
                                                           {
                                                               questionnaire_field = f,
                                                               questionnaire_data = f.questionnaire_data.Where(d => d.person_fk == 1).FirstOrDefault()
                                                           }
                         };

            return result;
        }

        public class questionnaireFieldWithData
        {
            public questionnaire_field questionnaire_field;
            public questionnaire_data questionnaire_data;
        }

        public class questionnaireWithFieldWithData 
        { 
            public questionnaire_section questionnaire_section;
            public IQueryable<questionnaireFieldWithData> questionnaire_fieldWithData;      
        }
    }
} 
```

# jquery - JqModal在弹出窗口中淡入淡出？

> ID：12423165
> 
> 赞同：0
> 
> 时间：2012-09-14T10:59:41.667
> 
> 标签：jquery, jqmodal

我正在使用我工作得很好的插件 jqModal，但是我想让我的 jqModal 对话框/覆盖框在调用时淡入淡出。当我单击以显示它时，我发现它有点“在你的脸上”，因为它看起来很快我不想让用户失望。

无论如何我可以对我的代码应用某种淡入淡出吗？这就是我用来激活 jqModal 的方法。提前致谢！

```
$('#popup').jqm({ajax: 'news', trigger: '.trigger'}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T21:32:15.987

这有点晚了，但是...

在插件代码中搜索以下文本：

```
h.w.show(); 
```

用。。。来代替

```
h.w.fadeIn(600, function() { }); 
```

您也可以使用默认关闭功能执行相同的操作：

```
h.w.hide(); 
```

用。。。来代替

```
h.w.fadeOut(600, function () { }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:07:27.307

jqModal 好像不支持动画效果。该插件写得很松散。因此，我建议您迁移到其他插件。

作为一个建议，试试**[这个](http://www.ericmmartin.com/projects/simplemodal/)**。

*（注意：我会把它放在评论中，因为它不是真正的答案 - 但我不能。到达那里......）*

# c# - Infragistics - 设置 Excel 单元格背景色

> ID：12423170
> 
> 赞同：1
> 
> 时间：2012-09-14T10:59:57.610
> 
> 标签：c#, excel, cell, background-color, infragistics

我需要用我的 C# 应用程序为一些 Excel 单元格着色。下一个“必须”是：我必须使用基础设施参考来做到这一点。

我能够绘制一些细胞：

```
worksheet.Rows[row].Cells[col].CellFormat.FillPatternBackgroundColor = Color.DarkSeaGreen; 
```

但是有一个灰色的图案使单元格的读取变得非常困难。有什么解决方案可以消除这些灰色图案吗？除了这个 FillPatternBackgroundColor 之外，我找不到任何 backgroundcolor 属性...

格力兹阿里昂

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T12:53:54.677

假设您使用的是 12.1 之前的版本，请将填充图案设置为纯色：

```
worksheet.Rows[row].Cells[col].CellFormat.FillPattern = FillPatternStyle.Solid; 
```

如果您使用的是 12.1，则那些被标记为过时的属性有利于 Fill 属性：

```
worksheet.Rows[row].Cells[col].CellFormat.Fill = new CellFillPattern(new WorkbookColorInfo(Color.DarkSeaGreen), null, FillPatternStyle.Solid); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:30:00.313

尝试这个：

```
worksheet.Rows[row].Cells[col].interior.color = rgb(0,255,0) 
```

或这个：

```
worksheet.Rows[row].Cells[col].interior.colorindex = 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-09T16:54:45.717

我知道每个查看此问题的人都可能知道这一点，但要补充一下这个答案；如果您只有使用 Infragistics Excel 的 RGB 来设置颜色，您也可以这样做：

`worksheet.Rows[row].Cells[col].CellFormat.Fill = CellFill.CreateSolidFill(Color.FromArgb(255, 0, 255, 0))`

（阿尔法，红色，绿色，蓝色）我相信它总是被excel忽略的阿尔法（不透明度）所以不要让它让你失望。

我正在使用 2015.2。

# nsdateformatter - NSDateFormatter 显示错误的年份

> ID：12423179
> 
> 赞同：53
> 
> 时间：2012-09-14T11:00:30.217
> 
> 标签：nsdateformatter, ios6

我在 iOS 6 中使用 xcode 4.5(4G182)。NSDateFormatter 在 iOS 6 中显示错误的年份，如何解决？

```
NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
[dateFormatter setDateFormat:@"YYYY-MM-dd"];
NSString *str = [dateFormatter stringFromDate:[NSDate date]];
NSLog(@"%@ == %@",str,[[dateFormatter dateFromString:str] description]); 
```

它打印出“ **2012** -09-14 == **2011** -09-13 16:00:00 +0000”

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2012-09-14T11:07:18.630

`YYYY`不一样`yyyy`。

根据[iOS日期格式页面](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html)引用的[this page ；](https://unicode.org/reports/tr35/tr35-10.html#Date_Format_Patterns)

```
`y`: Year
`Y`: Year (in "Week of Year" based calendars). This year designation is used in 
     ISO year-week calendar as defined by ISO 8601, but can be used in 
     non-Gregorian based calendar systems where week date processing is desired. 
     May not always be the same value as calendar year. 
```

执行语句是最后一个。改为使用`yyyy`。

* * *

有关使用时年份值如何以及为何会出现偏差的更多详细信息`YYYY`：

> ISO 周编号年从第 1 周的第一天（星期一）开始，到新 ISO 年之前的星期日结束（因此没有重叠或间隙）。它由 52 或 53**个整周**组成。ISO 周编号年份编号在传统公历年开始时（位于上一个 ISO 周编号年的结束）和一个星期一、星期二和星期三，或者星期一和星期二，或者只是一个星期一，在传统的公历年（在 ISO 下一个周的第 01 周）结束时-编号年份）。对于星期四，ISO 周编号年份编号始终等于传统的公历年份编号。
> 
> 例子：
> 
> **2008 年 12月**29 日星期一写成“ **2009** -W01-1”
> 
> **2010 年**1 月3 日星期日写成“ **2009** -W53-7”

来自[https://en.wikipedia.org/wiki/ISO_8601#Week_dates](https://en.wikipedia.org/wiki/ISO_8601#Week_dates) *（添加了粗体样式）*

# javascript - 日历日期的全球化问题

> ID：12423183
> 
> 赞同：0
> 
> 时间：2012-09-14T11:00:41.473
> 
> 标签：javascript, globalization, jquery-globalization

如何处理具有不同文化的日期，即我如何使用常见的 javascript 代码来处理所有文化的日期。例如 -

```
Globalize.culture( "en" );
Globalize.parseDate( "1/2/2003" ); // Thu Jan 02 2003
Globalize.culture( "fr" );
Globalize.parseDate( "1/2/2003" ); // Sat Feb 01 2003 
```

在上面的代码中，我如何制作通用代码而不是更改不同文化的日期格式。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:49:35.237

你不能。没有所有文化都共享的日期符号。2003 年 1 月 2 日的例子特别能说明问题：你无法知道它的含义，除非你有关于制作它的人使用的文化习俗的可靠信息。事实上，您需要区分 en-US（美国英语）和 en-GB（英国英语）。

Globalize.js 库旨在处理这种变化，而不是删除它。

```
It is possible to allow different date notations e.g. as follows (code excerpt from my book [Going Global with JavaScript and Globalize.js][1]):
function read(dateInput) { 
  var languages = ['en', 'fi', 'sv', 'ru']; 
  var formats = ['d', 'D']; 
  var date; 
  for(var langNr in languages) { 
    for(var fmtNr in formats) { 
      date = Globalize.parseDate(dateInput,formats[fmtNr],languages[langNr]); 
      if(date != null) { 
        return date; 
      } 
    } 
  } 
  return null; 
} 
```

这将允许在（美国）英语、芬兰语、瑞典语和俄语中使用短日期和长日期表示法，因此它会相当自由，并且适用于期望用户使用其中一种语言的情况。

但是您添加的语言环境越多，就会出现越多的歧义。如果在不同的语言环境中允许使用像 1/2/2003 这样的符号，但其中有多种含义，那么您的循环结构将定义应用哪种含义。这反过来可能意味着输入的含义与用户的意图不同。出于这个原因，最好避免使用全数字日期表示法。需要月份名称的格式更安全。

诸如 2003-02-01 之类的格式在原则上是明确的，但只是在原则上，它们对大多数人来说看起来不自然。不过，您可以在 Globalize.js 中阅读此类格式；您只需要明确指定格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T19:14:38.703

老实说，你的问题不是很清楚。从上下文中，我推断您希望让用户以其本机格式输入日期并使用 Globalize 以某种方式自动“检测”格式将是什么并应用适当的解析方法。

如果那是你所追求的，那是做不到的。您已经了解不同国家/地区的格式差异。更糟糕的是，可能会使用长格式或短格式（不幸的是，Globalize 不支持 .Net 中通过调用 DateTime's 提供的默认格式的概念`ToString("g")`）。这意味着，您可能有诸如“2012-10-31”、“31.10.12”和“31 października 2012”之类的东西，它们都是（或多或少）有效的波兰日期格式。

我希望你现在意识到允许自由输入不是一个好主意。那么该怎么做呢？答案是使用[jQuery UI 的 Datepicker](http://jqueryui.com/datepicker/)。它可能相当容易本地化，您所要做的就是添加有效的区域脚本：

```
$( "#datepicker" ).datepicker( $.datepicker.regional[ "fr" ] ); 
```

然后，要获取 JavaScript 的 Date 对象，您可以调用 Datepicker 的`getDate()`方法：

```
var currentDate = $( ".selector" ).datepicker( "getDate" ); 
```

而已。顺便提一句。Datepicker 允许转换最终用户输入的日期（如果您将其附加到文本字段）。但当然它会是区域脚本指定的格式......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:09:13.887

你的意思是国际化。有些标准（例如 ISO8601）指定了明确的格式，例如 2012-02-01 表示 2012 年 2 月 1 日。

我不认为日期格式与“文化”有关，更多的是与国籍有关。世界上绝大多数说英语的人使用日/月/年的格式，这与他们居住的国家有关，而不是他们可能遵循或支持的任何文化。

还有其他明确的格式，例如始终使用月份名称而不是数字，例如 2012 年 2 月 1 日或 2012 年 2 月 1 日。对于公历以外的日历也是如此。

# c# - 通过 TCP 的 HTTP GET（带有 Header 'Connection: keep alive'）

> ID：12423191
> 
> 赞同：0
> 
> 时间：2012-09-14T11:01:06.917
> 
> 标签：c#, http, sockets, tcp, get

我想使用原始 C# 套接字执行以下操作。我知道通常最合适的方式是通过 HTTP 和 HTTP 客户端。浏览器知道这个连接必须以某种方式保持打开状态。

`http://server.domain.com/protocol/do_something.txt`

我正在 C# 中尝试以下操作，但没有运气。我究竟做错了什么？是否缺少标题？我应该以某种方式对发送到服务器的内容进行编码吗？对于 ReceiverSocket 客户端，我使用以下代码，但它只是一个非常标准的异步套接字客户端：[https ://stackoverflow.com/a/10390066/971580](https://stackoverflow.com/a/10390066/971580)

```
ReceiverSocket socket = new ReceiverSocket("server.domain.com", 80);
socket.Connect();
System.Threading.Thread.Sleep(1000);            
String message = "GET /protocol/do_something.txt HTTP/1.1";
message += "\r\n";
message += "\r\n";
socket.Send(message); 
```

套接字可以成功连接，但是当我向服务器发送任何内容时，我没有得到任何响应。这就是我连接、发送和接收的方式。t （道歉：我试图在片段中这样做，而不是包括所有方法，但它看起来很可怕......）

```
 public ReceiverSocket(String address, int port) : base(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp)
    {
        messageQueue = new Queue<MessageBase>();
        IPHostEntry ipHostInfo = Dns.GetHostEntry(address);
        IPAddress ipAddress = ipHostInfo.AddressList[0];
        remoteEP = new IPEndPoint(ipAddress, port);
    }

    public void Connect()
    {
        this.BeginConnect(remoteEP, ConnectCallback, this);
    }

    private void ConnectCallback(IAsyncResult ar)
    {
        try
        {
            Socket client = (Socket)ar.AsyncState;
            if (client.Connected)
            {
                client.EndConnect(ar);
                Console.WriteLine("Connect Callback - Connected");
                StateObject state = new StateObject();
                state.workSocket = client;
                state.BufferSize = 8192;
                if (SocketConnected != null)
                    SocketConnected(client);

                client.BeginReceive(state.Buffer, state.readOffset, state.BufferSize - state.readOffset, 0, ReceiveCallback, state);
            }
            else
            {
                Thread.Sleep(5000);
                Connect();
            }
        }
        catch (Exception ex)
        {
            Reconnect();
        }
    }

    private void ReceiveCallback(IAsyncResult ar)
    {
        Console.WriteLine("Never gets here. . . ");
        try
        {
            StateObject state = (StateObject)ar.AsyncState;
            Socket client = state.workSocket;
            if (client.Connected)
            {
                int bytesRead = client.EndReceive(ar);
                foreach (MessageBase msg in MessageBase.Receive(client, bytesRead, state))
                {
                    // Add objects to the message queue
                    lock (this.messageQueue)
                        this.messageQueue.Enqueue(msg);
                }

                if (DataRecieved != null)
                    DataRecieved(client, null);

                client.BeginReceive(state.Buffer, state.readOffset, state.BufferSize - state.readOffset, 0, ReceiveCallback, state);
            }
            else
            {
                Reconnect();
            }
        }
        catch (SocketException)
        {
            Reconnect();
        }
    }

    public void Send(String msg)
    {
        try
        {
            byte[] bytes = GetBytes(msg);

            if (this.Connected)
            {

                Console.WriteLine("Sending: " + msg);
                this.BeginSend(bytes, 0, bytes.Length, 0, SendCallback, this);
            }
            else
            {
                Reconnect();
            }
        }
        catch (SocketException sox)
        {
            Reconnect();
        }
        catch (Exception ex)
        {
            int i = 0;
        }
    }

    static byte[] GetBytes(string str)
    {
        byte[] bytes = new byte[str.Length * sizeof(char)];
        System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
        return bytes;
    }
    }

    public class StateObject
    {
        public Socket workSocket = null;
        public int readOffset = 0;
        public StringBuilder sb = new StringBuilder();

        private int bufferSize = 0;
        public int BufferSize
        {
            set
            {
                this.bufferSize = value;
                buffer = new byte[this.bufferSize];
            }

            get { return this.bufferSize; }
        }

        private byte[] buffer = null;
        public byte[] Buffer
        {
            get { return this.buffer; }
        }
    } 
```

我没有包含`message += "Connection: close"`标头的事实不应该意味着套接字应该开始异步发送它拥有的任何数据吗？还要注意：我可以使用 Telnet 成功连接并发送数据，只是还没有使用套接字！

任何指针都将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T16:06:22.767

不要调用`Send()`，直到`ConnectCallback()`第一次调用，否则您可能会过早发送数据。使用`Sleep()`等待连接是错误的。

在完成发送数据`BeginReceive()`之前不要打电话。`Send()`

因为您使用的是 HTTP 1.1，所以是的，**如果**您连接到 HTTP 1.1 服务器，则默认情况下连接保持活动状态。服务器的`Connection`响应标头将指示服务器是否实际上保持连接打开。

此外，正如其他人所说，HTTP 1.1 请求**必须**具有`Host`标头，否则请求格式不正确并且可能被服务器拒绝/忽略。HTTP 1.1 有一个虚拟主机在同一个 IP 上运行的概念，因此`Host`标头告诉服务器客户端要与哪个主机通信。

# sql - 如何在尝试使用 MS SQL Server 中的其他字段时根据一个字段计算表中的行数？

> ID：12423192
> 
> 赞同：1
> 
> 时间：2012-09-14T11:01:13.773
> 
> 标签：sql, sql-server, select

我有 3 个加入的表，我想编写一个查询，从这些加入的表中返回一些字段。我需要检查一个条件，那就是特定于一个用户的行数。
为了更准确和清晰，我的表格如下所示：

```
tblTest
------------------------------
TestID  | StudentID | TestType
------------------------------

tblTestType
---------------------------
TestType | TestName 
---------------------------

tblStudents
-------------------------------
StudentID | StudentName | Sex
------------------------------- 
```

我正在尝试获取第一次通过考试的学生列表（因此，'tblTest' 结果行数应该等于 1，以表明用户刚刚参加了考试并通过了考试，任何数字超过这意味着该学生已多次参加该考试），我的查询如下所示：

```
SELECT       tblStudents.StudentName, COUNT(tblTest.StudentID) AS [Number of Times Exame is Taken], tblTest.TestID
FROM            tblTest INNER JOIN
                         tblTestType ON tblTest.TestID = tblTestType.TestType INNER JOIN
                        tblStudents ON tblTest.StudentID =tblStudents.StudentID
GROUP BY tblTest.StudentID, tblTest.TestID
HAVING        (tblTest.TestID = 1) 
```

哪个失败了。有人可以告诉我这样做的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:07:03.373

```
SELECT       
tblStudents.StudentName, 
COUNT(tblTest.StudentID) AS [Number of Times Exame is Taken], 
MIN(tblTest.TestID) AS TestID
FROM            
tblTest 
INNER JOIN tblTestType ON tblTest.TestID = tblTestType.TestType 
INNER JOIN tblStudents ON tblTest.StudentID =tblStudents.StudentID
GROUP BY tblStudents.StudentName
HAVING COUNT(*) = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T11:09:18.907

试试这个：

```
select * from tblTestType T
join
    (SELECT    tblStudents.StudentID, 
               COUNT(*) AS [Number of Times Exame is Taken], 
               tblTest.TestID
    FROM      tblTest
    GROUP BY  tblTest.StudentID, tblTest.TestID
    HAVING COUNT(*)=1 )a
ON a.TestID = T.TestType
INNER JOIN tblStudents
ON a.StudentID =T.StudentID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T11:15:49.110

```
SELECT *
  FROM tblStudents
  WHERE StudentID IN (
    SELECT StudentID
      FROM tblTest
      GROUP BY StudentID, TestID
      HAVING COUNT(*) = 1
  ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T11:28:58.420

也许这就是你所追求的？

```
WITH cteTest AS (
  SELECT COUNT(TestID) TakenCount, StudentID, TestType
  FROM tblTest
  GROUP BY StudentID, TestType
)
SELECT
    s.StudentName,
    tt.TestName
  FROM cteTest t
  INNER JOIN tblTestType tt ON t.TestType = tt.TestType
  INNER JOIN tblStudents s ON t.StudentID = s.StudentID
  WHERE t.TakenCount = 1; 
```

# unicode - 我们是否需要字体才能显示 unicode 字符？

> ID：12423193
> 
> 赞同：0
> 
> 时间：2012-09-14T11:01:21.817
> 
> 标签：unicode

我使用 Netbeans IDE 编译并运行以下程序。

```
public class Unicode {
  public static void main(String[] args) {
    char a=3476;
    System.out.println(a);
  }
} 
```

但输出是一个盒子。当我在控制台上运行程序时，它打印了一个问号。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:09:31.417

您不能直接从 Java 在 Windows 控制台上显示 Unicode 字符，因为它总是使用应用程序代码页 (ANSI) 写入控制台。但是，您可以使用 JNA API 将 unicode 字符直接写入控制台。您仍然需要安装一个等宽字体，其中包含您要显示的字符的字形。

# javascript - Ember.js 和 ArrayController

> ID：12423196
> 
> 赞同：0
> 
> 时间：2012-09-14T11:01:27.230
> 
> 标签：javascript, ember.js

看着 ArrayController 我遇到了两种实现它们的方法：

1.  [http://awardwinningfjords.com/2011/12/27/emberjs-collections.html](http://awardwinningfjords.com/2011/12/27/emberjs-collections.html)
2.  [http://trek.github.com](http://trek.github.com)

从我所看到的差异主要在于

*   ArrayController.create 与 ArrayController.extend
*   在 Trek 的演示中，数据加载到模型中，而在 Twitter 示例中，数据加载到控制器中。
*   对于 Twitter 的选项，我想知道如何进行路由。

两者中的哪一个应该用作通用模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:24:20.713

Trek 的帖子反映了截至 2012 年 9 月的最新最佳实践。最好遵循 Trek 的示例，而不是有关 Twitter 的博客文章中的示例。

# python - Python Colander 库失败，出现异常'createdon': u'Invalid date' when createdon field contains the value datetime.datetime.now()

> ID：12423201
> 
> 赞同：0
> 
> 时间：2012-09-14T11:01:43.063
> 
> 标签：python, datetime, colander

我正在使用 python 的滤锅库进行验证。在我的代码中有一个 colander.DateTime() 类型的 createdon 字段。当我为其提供 datetime.datetime.now() 的值时，它失败了，但异常说 createdon 字段的日期无效。可能是什么问题？

这是python模块的代码：

```
import colander
import htmllaundry
import pymongo
import random
import datetime
import hashlib
from pymongo import Connection

# Database Connection
HOST = "localhost"
PORT = 27017
DATABASE = "testdb"
conn = Connection(HOST, PORT)
db = conn[DATABASE]

# function to generate random string
def getRandomString(wordLen):
    word = ''
    for i in range(wordLen):
        word += random.choice('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789')
    return word

# Colander classe for User object
class User(colander.MappingSchema):
    username = colander.SchemaNode(colander.String(),validator=colander.Length(3,100))
    email = colander.SchemaNode(colander.String(),validator=colander.All(colander.Email(),colander.Length(3,254)))
    password = colander.SchemaNode(colander.String(),validator=colander.Length(8,100))
    isactive = colander.SchemaNode(colander.Boolean())
    code = colander.SchemaNode(colander.String(),validator=colander.Length(64,64))
    name = colander.SchemaNode(colander.String(),validator=colander.Length(3,100)) 
    picture = colander.SchemaNode(colander.String())
    about = colander.SchemaNode(colander.String(),preparer=htmllaundry.sanitize,validator=colander.Length(0,1024))
    ipaddress = colander.SchemaNode(colander.String())
    createdon = colander.SchemaNode(colander.DateTime())
    updatedon = colander.SchemaNode(colander.DateTime())
    status = colander.SchemaNode(colander.Int(),validator=colander.Range(0,4)) #0->active, 1->Deleted, 2->Suspended, 3->Deactivated

# getUser(username)
def getUser(username):
    user = db.users.find_one({"username" : username })
    return user

# getUserByEmail(email)
def getUserByEmail(email):
    user = db.users.find_one({"email" : email })
    return user

# createUser(userdata) #accepts a dictionary argument
def createUser(userdata):
    schema = User() # generate schema object for User Validation Class
    try:
        # set current date/time in createdon/updatedon

        userdata['createdon'] = datetime.datetime.now()
        userdata['updatedon'] = userdata['createdon']

        # generate unique activation code, set isactive to False, and set status to 0
        randomCode = getRandomString(64)
        userdata['code'] = hashlib.sha256(randomCode).hexdigest()
        userdata['isactive'] = False
        userdata['status'] = 0

        # validate and deserialize userdata 
        schema.deserialize(userdata)

        # sha256 the password
        userdata['password'] = hashlib.sha256(userdata['password']).hexdigest()

        # save the userdata object in mongodb database
        result = db.users.insert(userdata)

        # return the result of database operation and final userdata object
        return result, userdata
    except colander.Invalid, e:
        errors = e.asdict()
        return errors, userdata 
```

这是我在 test.py 中使用它的方式：

```
import usermodule

UserObject = {
    'username':'anuj',
    'email': 'anuj.kumar@gmail.com',
    'password':'testpassword',
    'name':'Anuj Kumar',
    'picture':'/data/img/1.jpg',
    'about':'Hacker & Designer, New Delhi',
    'ipaddress':'127.0.0.1'
    }

result, data = usermodule.createUser(UserObject)

print result
print data 
```

我收到以下错误：

```
anuj@anuj-Vostro-1450:~/Projects/test$ python test.py
{'createdon': u'Invalid date', 'updatedon': u'Invalid date'}
{'username': 'anuj', 'picture': '/data/img/1.jpg', 'about': 'Hacker & Designer, New Delhi', 'code': 'd6450b49e760f96256886cb24c2d54e8e8033293c479ef3976e6cbeabbd9d1f1', 'name': 'Anuj Kumar', 'updatedon': datetime.datetime(2012, 9, 14, 16, 16, 32, 311705), 'createdon': datetime.datetime(2012, 9, 14, 16, 16, 32, 311705), 'status': 0, 'password': 'testpassword', 'ipaddress': '127.0.0.1', 'email': 'anuj.kumar@gmail.com', 'isactive': False} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:09:04.427

您正在*反序列*化一个 cstruct，它包含一个`datetime.datetime`实例。Colander 只需要*简单的*类型，例如`int`, `float`,`str`等。

如果您将日期时间值设为 ISO 格式的字符串，则一切正常：

```
>>> import datetime
>>> import colander
>>> colander.SchemaNode(colander.DateTime()).deserialize(datetime.datetime.now())
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/private/tmp/colander/lib/python2.7/site-packages/colander/__init__.py", line 1598, in deserialize
    appstruct = self.typ.deserialize(self, cstruct)
  File "/private/tmp/colander/lib/python2.7/site-packages/colander/__init__.py", line 1265, in deserialize
    mapping={'val':cstruct, 'err':e}))
colander.Invalid: {'': u'Invalid date'}
>>> colander.SchemaNode(colander.DateTime()).deserialize(datetime.datetime.now().isoformat())
datetime.datetime(2012, 9, 14, 13, 5, 37, 666630, tzinfo=<colander.iso8601.Utc object at 0x109732d50>) 
```

请注意，`datetime.datetime.now()`不包括时区信息，也不会`.isoformat()`保留该信息。另一方面，滤锅将 ISO 8601 字符串解析为 UTC 时区的时间戳，因此您希望使用类方法在同一时区*生成时间戳：*`datetime.datetime.utcnow()`

```
>>> colander.SchemaNode(colander.DateTime()).deserialize(datetime.datetime.utcnow().isoformat())
datetime.datetime(2012, 9, 14, 11, 23, 25, 695256, tzinfo=<colander.iso8601.Utc object at 0x1005aaf10>) 
```

所以，更换

```
 userdata['createdon'] = datetime.datetime.now() 
```

和

```
 userdata['createdon'] = datetime.datetime.utcnow().isoformat() 
```

滤锅会很乐意为您解析，使用正确的时区。

# javascript - 如何使用异步在 node.js 中运行变量系列或 javascript 函数？

> ID：12423202
> 
> 赞同：0
> 
> 时间：2012-09-14T11:01:46.933
> 
> 标签：javascript, node.js, asynchronous

我在Node.js中使用[异步。](https://github.com/caolan/async)当我有固定数量的函数要执行时，它运行良好：

```
async.series([ 
    function(cb) { ...one ... },
    function(cb) { .. two ... },
], function(err, res) {
    ...done
}); 
```

但是现在我需要执行任意数量的函数，具体取决于一个数组中的值，并且无法弄清楚如何传递数组元素：

```
var values = [1, 2, 3, ... ];
var calls = [];
for (var i = 0; i < values.length; i++) {
    calls.push(function(cb) { 

        HOW TO PASS values[i] HERE? 

    });
}
async.series(calls, function(err, res) {
    ...done
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:10:56.300

这只是常见的 async-in-a-loop 问题。您将需要 的值的闭包`i`，其中声明了推送的函数表达式。这可以使用 IEFE 作为循环体来完成，或者更容易使用[`.forEach()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)or [`.map()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)：

```
 var calls = values.map(function closure(val, i) {
     return function(cb) {
         // use val and i here, which are bound to this execution of closure
     };
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T11:10:14.457

您应该能够使用闭包：

```
var values = [1, 2, 3, ... ];
var calls = [];
for (var i = 0; i < values.length; i++) {
    calls.push((function(index) {
        return function(cb) {       
            // use values[index] here
        };
    })(i));
}
async.series(calls, function(err, res) {
    ...done
}); 
```

# mercurial - Mercurial 更新到本地修订或哈希变更集

> ID：12423204
> 
> 赞同：4
> 
> 时间：2012-09-14T11:01:54.737
> 
> 标签：mercurial, dvcs

我使用 Mercurial，但我遇到了一个奇怪的问题，我的历史非常悠久，Mercurial 的本地修订版现在有 5 个字符。在 Mercurial 中，您可以执行“hg up”，它可以在本地修订或哈希变更集之间进行选择（我不知道它用来在彼此之间进行选择的策略），在我的情况下，本地修订与 5 个第一个字符一致另一个哈希变更集。例如：

我想更新到本地版本：80145 如果我执行：

“hg 向上 80145”

Mercurial 不会更新到我想要的版本，它会更新到旧版本，因为它的哈希变更集是：

801454d1cd5e

那么，有谁知道是否有办法指定要更新到哪种类型的修订？本地修订或哈希变更集。

谢谢大家！

====

问题解决了。经过一番调查，我意识到 Mercurial 总是更新到本地版本（如果存在），否则更新到哈希变更集。在我的情况下，本地版本不存在，所以它正在更新到哈希变更集

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T02:41:26.243

Sounds like you found your own answer (and should enter it as an answer instead of a comment and then select it -- that's not just allowed but encouraged around here), but for reference here's where that information lived:

```
$ hg help revisions
Specifying Single Revisions

Mercurial supports several ways to specify individual revisions.

A plain integer is treated as a revision number. Negative integers are
treated as sequential offsets from the tip, with -1 denoting the tip, -2
denoting the revision prior to the tip, and so forth.

A 40-digit hexadecimal string is treated as a unique revision identifier.

A hexadecimal string less than 40 characters long is treated as a unique
revision identifier and is referred to as a short-form identifier. A
short-form identifier is only valid if it is the prefix of exactly one
full-length identifier.

Any other string is treated as a bookmark, tag, or branch name. A bookmark
is a movable pointer to a revision. A tag is a permanent name associated
with a revision. A branch name denotes the tipmost revision of that
branch. Bookmark, tag, and branch names must not contain the ":"
character.

The reserved name "tip" always identifies the most recent revision.

The reserved name "null" indicates the null revision. This is the revision
of an empty repository, and the parent of revision 0.

The reserved name "." indicates the working directory parent. If no
working directory is checked out, it is equivalent to null. If an
uncommitted merge is in progress, "." is the revision of the first parent. 
```

So as you found the first interpretation was as a revision number and when that didn't match anything it was tried as the prefix of a revision id. In theory this could happen with even the number `1` if your only changeset was revision `0` and its hash started with `1`.

# c# - 使用键盘快捷键最大化系统托盘中的 C# 应用程序

> ID：12423207
> 
> 赞同：3
> 
> 时间：2012-09-14T11:02:11.233
> 
> 标签：c#, winforms, maximize-window

我是否可以知道是否可以使用键盘快捷键从系统托盘最大化我的 Windows 窗体应用程序，而不是单击它？

我目前正在最小化使用这段代码

```
//Minimize to Tray with over-ride for short cut
private void MinimiseToTray(bool shortCutPressed)
{
    notifyIcon.BalloonTipTitle = "Minimize to Tray App";
    notifyIcon.BalloonTipText = "You have successfully minimized your app.";

    if (FormWindowState.Minimized == this.WindowState || shortCutPressed)
    {
        notifyIcon.Visible = true;
        notifyIcon.ShowBalloonTip(500);
        this.Hide();
    }
    else if (FormWindowState.Normal == this.WindowState)
    {
        notifyIcon.Visible = false;
    }
} 
```

因此，我需要一个可以最大化它的键盘快捷键。非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T11:09:09.543

***编辑：****如果您只是想“保留组合键”以在您的应用程序上执行某些操作，那么在我个人看来，您可以看到每个按键都转到任何其他应用程序的低级键盘钩子不仅是一种矫枉过正的做法，而且是不好的做法可能会有人认为您在进行键盘记录！坚持使用热键！*

鉴于您的图标没有键盘焦点，您需要注册一个全局键盘热键。

其他类似问题：

*   [如何注册一个全局热键来说 CTRL+SHIFT+(LETTER)](https://stackoverflow.com/questions/48935/how-can-i-register-a-global-hot-key-to-say-ctrlshiftletter-using-wpf-and-ne)
*   [在 c# 中处理全局热键的最佳方法是什么？](https://stackoverflow.com/questions/81150/best-way-to-tackle-global-hotkey-processing-in-c)

[使用 .NET 的全局热键](http://bloggablea.wordpress.com/2007/05/01/global-hotkeys-with-net/)示例：

```
Hotkey hk = new Hotkey();
hk.KeyCode = Keys.1;
hk.Windows = true;
hk.Pressed += delegate { Console.WriteLine("Windows+1 pressed!"); };

if (!hk.GetCanRegister(myForm))
{ 
    Console.WriteLine("Whoops, looks like attempts to register will fail " +
                      "or throw an exception, show error to user"); 
}
else
{ 
    hk.Register(myForm); 
}

// .. later, at some point
if (hk.Registered)
{ 
   hk.Unregister(); 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T11:07:08.937

为此，您必须使用“Low-Level Hook”。您将在本文中找到有关它的所有信息：http: [//blogs.msdn.com/b/toub/archive/2006/05/03/589423.aspx](http://blogs.msdn.com/b/toub/archive/2006/05/03/589423.aspx)

也看看这个：http: [//www.codeproject.com/Articles/6362/Global-System-Hooks-in-NET](http://www.codeproject.com/Articles/6362/Global-System-Hooks-in-NET)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T11:10:06.220

我赞同弗兰克关于全局键盘挂钩的建议。[就个人而言，我对 CodeProject 文章“在 C# 中处理全局鼠标和键盘挂钩](http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C)”有很好的体验。

正如他们在文章中所写，您可以执行以下操作：

```
private UserActivityHook _actHook;

private void MainFormLoad(object sender, System.EventArgs e)
{
    _actHook = new UserActivityHook();

    _actHook.KeyPress += new KeyPressEventHandler(MyKeyPress);
} 
```

然后，您可以在`MyKeyPress`处理程序中调用一个打开窗口的函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T11:17:46.333

如果您按照[此处](http://www.liensberger.it/web/blog/?p=207)的指南进行操作。它将向您展示如何注册全局快捷键。

```
public partial class Form1 : Form
{
    KeyboardHook hook = new KeyboardHook();

    public Form1()
    {
        InitializeComponent();

        // register the event that is fired after the key press.
        hook.KeyPressed += new EventHandler<KeyPressedEventArgs>(hook_KeyPressed);

        // register the CONTROL + ALT + F12 combination as hot key.
        // You can change this.
        hook.RegisterHotKey(ModifierKeys.Control | ModifierKeys.Alt, Keys.F12);
    }

    private void hook_KeyPressed(object sender, KeyPressedEventArgs e)
    {
        // Trigger your function
        MinimiseToTray(true);
    }

    private void MinimiseToTray(bool shortCutPressed)
    {
        // ... Your code
    }
} 
```

# xcode - 音频不再在 iPad3 上工作

> ID：12423211
> 
> 赞同：0
> 
> 时间：2012-09-14T11:02:30.287
> 
> 标签：xcode, ipad, ios5.1

我从我的应用程序的用户那里收到了两份报告，在 iPad 3 上运行 iOS 5.1.1（iPad 1 和 2 工作正常），音频不再工作。

我正在使用 AVFoundation 库中的 AVAudioPlayer。

有没有其他人遇到过类似的问题。

现在做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:27:47.847

> 还为您的 audioPlayer 提供此代码

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil]; 
```

希望它能解决你的问题。

# wpf - 如何修复由 ListBox 的 _anchorItem 字段引起的内存泄漏？

> ID：12423214
> 
> 赞同：0
> 
> 时间：2012-09-14T11:02:31.343
> 
> 标签：wpf, memory-leaks, listbox

我注意到 ListBox 在其私有 _anchorItem 字段中保留了对已删除项目的引用。

我执行的步骤如下。我创建一个带有 ListBox 的 Window，并将带有一项的 ObeservableCollection 绑定到该 ListBox 的 ItemSource 属性。然后，单击窗口中的项目后，我以编程方式清除 ObeservableCollection。

此时 ListBox 为空，但它的 _anchorItem 字段仍然具有对我单击的项目的引用。如何以编程方式删除引用？

我需要删除对该项目的引用的原因是因为它是我的应用程序中内存泄漏的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:41:05.477

我的解决方案是通过反射设置内部成员。它知道这是一个 hack，但最终内存问题更成问题。

```
 var propertyInfo = (typeof(ListBox)).GetProperty("AnchorItem", BindingFlags.Instance | BindingFlags.NonPublic);

        propertyInfo.SetValue(this, null, null); 
```

# c++ - 如何在不缩放其内容的情况下调整 opengl 视口大小

> ID：12423217
> 
> 赞同：3
> 
> 时间：2012-09-14T11:02:48.357
> 
> 标签：c++, opengl, resize, render, scale

当我的窗口调整大小时，我不希望内容缩放，而只是增加视口大小。我在stackoverflow（http://stackoverflow.com/questions/5894866/resize-viewport-crop-scene）上搜索时发现了这一点，这与我的问题几乎相同。但是我对将缩放设置到什么位置以及在哪里设置感到困惑，我用 1.0f 进行了尝试，但是什么也没显示：s

这是目前进行缩放的调整大小功能代码：

```
void GLRenderer::resize() {
    RECT rect;
    int width, height;
    GLfloat aspect;

    GetClientRect(hWnd, &rect);
    width = rect.right;
    height = rect.bottom;

    if (height == 0) {
        height = 1;
    }

    aspect = (GLfloat) width / height;

    glViewport(0, 0, width, height);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(45.0, aspect, 0.1, 100.0);
    glMatrixMode(GL_MODELVIEW);
} 
```

我的功能是渲染一个简单的三角形：

```
void GLRenderer::render() {
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glLoadIdentity();
    glTranslated(0, 0, -20);

    glBegin(GL_TRIANGLES);
        glColor3d(1, 0, 0);
        glVertex3d(0, 1, 0);
        glVertex3d(1, -1, 0);
        glVertex3d(-1, -1, 0);
    glEnd();

    SwapBuffers(hDC);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:36:19.043

您可以使用“视野”参数将 y（高度）的缩放更改为 gluPerspective。在您的代码中是 45 度的那个。由于当前始终为 45 度，因此您将始终获得相同的视角（以 y 为单位）。如何将这个值作为窗口高度的函数来改变并不明显。对于较大的值（180 度及以上），线性关系将失败。我会尝试使用 arctan(height/k)，其中“k”类似于 500。

另请注意，当您在 x 中扩展窗口时，您已经得到了您想要的（您的源代码当前的方式）。也就是说，您可以获得更广阔的视野。那是因为您将方面（第二个参数）更改为取决于 x 和 y 之间的比率的值。

高度和宽度以像素为单位，因此值为 1 不好。

请注意，您使用的是已弃用的旧版 OpenGL。有关详细信息，请参阅[旧版 OpenGL](http://www.opengl.org/wiki/Legacy_OpenGL)。

# sql - Postgresql错误的串行自动增量

> ID：12423218
> 
> 赞同：4
> 
> 时间：2012-09-14T11:02:55.030
> 
> 标签：sql, postgresql, auto-increment

我在 postgresql 上有一个问题，我认为 postgresql 中有一个错误，我错误地实现了一些东西。

有一个表，包括`colmn1(primary key)`, `colmn2(unique)`, `colmn3`, ...

插入一行后，如果我尝试使用现有`colmn2`值进行另一次插入，我会得到我预期的重复值错误。但是在这次不成功`colmn1`的尝试之后，尽管没有插入，但下一个值会增加 1，所以我得到的行具有 id 序列，例如 ,`1,2,4,6,9.(3,5,6,7,8`用于不成功的试验）。

我需要能够解释这种奇怪行为的人的帮助。

此信息可能有用：我使用“ `create unique index on tableName (lower(column1))`”查询来设置唯一约束。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T11:06:00.397

请参阅[PostgreSQL 序列常见问题解答](http://www.neilconway.org/docs/sequences/)：

> 序列旨在生成唯一标识符——不一定是严格顺序的标识符。如果两个并发的数据库客户端都试图从一个序列中获取一个值（使用 nextval()），每个客户端都会得到一个不同的序列值。如果其中一个客户端随后中止其事务，则为该客户端生成的序列值将未被使用，从而在序列中产生间隙。
> 
> 在不导致显着性能损失的情况下，这不能轻易解决。有关详细信息，请参阅 General Bits Newsletter 中的 Elein Mustein 的“[主键的无缝序列](http://www.varlena.com/GeneralBits/130.php)”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T12:44:52.990

从[手册](http://www.postgresql.org/docs/current/static/functions-sequence.html)：

> 重要提示：因为序列是非事务性的，所以如果事务回滚，setval 所做的更改不会撤消。

换句话说，有差距是正常的。如果您不想要间隙，请不要使用序列。

# msbuild - Visual Studio 2012 的完整定义列表

> ID：12423222
> 
> 赞同：2
> 
> 时间：2012-09-14T11:03:05.120
> 
> 标签：msbuild, visual-studio-2012

编译项目时是否有 Visual Studio 为您声明的所有预定义定义的列表？

显然 DEBUG 或 RELEASE 是非常明显的，但是否还有其他定义会自动声明，例如在创建控制台应用程序或窗口应用程序时，或者生成的程序集是否为 DLL 或 exe 文件。

是否有一个包含所有这些的列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:20:46.047

它只是在 .NET 框架 .target 文件中设置的一堆属性。要弄清楚你到底需要什么——你可以追踪被调用的目标链，看看究竟是什么影响了一个或另一个输出。如果你深入挖掘——你会发现有一个相当大的列表并且它也有条件——如果其他属性设置为特定值等，则定义了一些属性。你到底想用这样的列表做什么？你想要它只是为了学习还是你有具体的任务？

# c# - 将电子表格文件从文件上传控件读取到文件流中

> ID：12423223
> 
> 赞同：1
> 
> 时间：2012-09-14T11:03:18.273
> 
> 标签：c#, asp.net, file-upload, filestream

我试图找到使用文件上传控件选择excel电子表格（xls和xlsx）然后用文件流对象解析它然后填充数据集的最佳方法。

到目前为止，这是我的代码，但它的不同之处在于我将 excel 电子表格保存到我的解决方案中的文件夹中，然后使用 Microsoft ACE OLEDB 连接查询数据。

```
protected void btnUpload_Click(object sender, EventArgs e)
    {
        string connectingString = "";
        if (ctrlFileUpload.HasFile)
        {
            string fileName =
                Path.GetFileName(ctrlFileUpload.PostedFile.FileName);

            string fileExtension =
                Path.GetExtension(ctrlFileUpload.PostedFile.FileName);
                //Path.GetExtension(ctrlFileUpload.PostedFile.ContentType);

            string fileLocation =
                Server.MapPath("~/App_Data/" + fileName);
            ctrlFileUpload.SaveAs(fileLocation);

            // Check whether file extension is xls or xslx
            if (fileExtension == ".xls")
            {
                connectingString =
                    "Provider=Microsoft.ACE.OLEDB.4.0;Data Source=" +
                    fileLocation + ";Extended Properties=\"Excel 8.0;HDR=YES;IMEX=2\"";
            }

            else if (fileExtension == ".xlsx")
            {
                connectingString =
                    "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" +
                    fileLocation + ";Extended Properties=\"Excel 12.0;HDR=YES;IMEX=2\"";
            }

            // Create OleDb Connection and OleD Command
            using (OleDbConnection con = new OleDbConnection(connectingString))
            {
                try
                {
                    OleDbCommand cmd = new OleDbCommand();
                    cmd.CommandType = CommandType.Text;
                    cmd.Connection = con;
                    OleDbDataAdapter dAdapter = new OleDbDataAdapter(cmd);
                    //DataTable dtExcelRecords = new DataTable();
                    DataSet ds = new DataSet();
                    con.Open();
                    DataTable dtExcelSheetName = con.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);

                    string getExcelSheetName = dtExcelSheetName.Rows[0]["Table_Name"].ToString();
                    cmd.CommandText = "Select * FROM [" + getExcelSheetName + "]";
                    dAdapter.SelectCommand = cmd;
                    //dAdapter.Fill(dtExcelRecords);
                    dAdapter.Fill(ds);
                    //GridView1.DataSource = dtExcelRecords;
                    //GridView1.DataBind();
                }
                catch (Exception ex)
                {

                }
            }

        }
    } 
```

所以总结一下，我想读取电子表格中的数据，然后将其绑定到数据集，但不将文件保存到物理路径。

有没有一种更简洁的方式来编写我缺少的这段代码。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:10:09.807

我认为如果不将文件保存到您的服务器就无法获取数据

如果你不能保存上传的文件，你怎么能给`Data Source`你的 oleDbConnection 字符串？

如果您不想保留文件，则可以在完成此执行后删除文件。

你也可以这样参考[https://stackoverflow.com/a/12420416/284240](https://stackoverflow.com/a/12420416/284240)

# ruby - 如何将一些键合并到 *args 中，然后用这些 args 调用另一个方法？

> ID：12423224
> 
> 赞同：1
> 
> 时间：2012-09-14T11:03:18.477
> 
> 标签：ruby

我有以下方法：

```
def item(*args, &block)
  options = args.extract_options!
  options.reverse_update({
    brand: false,
    icon: false,
  })
  # Do some stuff
end 
```

而这个方法：

```
def brand(*args, &block)
  options = args.extract_options!
  options[:brand] = true

  self.item(???, &block) # How does this call have to look?
end 
```

最后第二行很有趣。我想用与调用方法`item`完全相同的参数来`brand`调用 （除了我添加了另一个参数，`brand`）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T11:15:42.370

我会写：

```
def brand(*args, &block)
  options = args.extract_options!
  options[:brand] = true

  self.item(*(args+[options]), &block)
end 
```

# database - Django：取消数据库中的更改

> ID：12423226
> 
> 赞同：0
> 
> 时间：2012-09-14T11:03:31.877
> 
> 标签：database, django

我正在寻找一种方法来取消数据库中的更改。事实上，我正在上传文件并将数据保存到数据库中。但我希望用户能够取消此上传。也就是说，检索文件和通过该文件创建的实例。

不知道能不能只删除要删除的模型，主键，id...

如果您对最好的方法有任何想法？谢谢

用户必须能够单击取消链接。此链接必须撤消他之前所做的操作：他在文件系统上上传了一个文件。由于此文件，生成了一些数据和模型。

```
class FunctionForm(forms.ModelForm):

    function_name = forms.ChoiceField(widget=RadioSelect, choices=FUNCTIONS) 

    class Meta :
        model = Function
        exclude =('session_number')

# File form : used in Creation function
class FileForm (forms.ModelForm):
    class Meta :
        model = File
        exclude = ('function','file_name','version')

class File(models.Model):

    # Attributs
    filea  = models.FileField(upload_to ='uploads/%Y/%m/%d/%H/%M/%S/')
    file_name = models.CharField("File name ", max_length=50)
    creation_date = models.DateField("Upload date ",auto_now=True)
    version = models.IntegerField("Version ")  
    function = models.ForeignKey(Function) 
    def __unicode__(self):
        return self.file_name +" "+ str(self.version) +" "+ str(self.creation_date) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:35:23.470

您可能应该创建一个引用该操作创建的所有其他模型的模型，并使用它来删除它们（以及它本身）。

# c++ - OpenCV2.4 从视频中捕获帧的可能错误

> ID：12423231
> 
> 赞同：5
> 
> 时间：2012-09-14T11:03:47.133
> 
> 标签：c++, opencv, ffmpeg

会不会是**OpenCV2.4 highgui**中存在用于从 Windows 中的视频中捕获帧的错误？

我安装了两个预编译库，我编译的库，我可以完美地编译所有东西，如果我可以运行我的程序

它们是基于图像的。问题仅适用于**视频**。OpenCV 在这个函数中总是崩溃：

```
 virtual IplImage* retrieveFrame(int)
    {
        unsigned char* data = 0;
        int step=0, width=0, height=0, cn=0;

        if(!ffmpegCapture ||
           !icvRetrieveFrame_FFMPEG_p(ffmpegCapture,&data,&step,&width,&height,&cn)) <-------CRASHES HERE
           return 0;
        cvInitImageHeader(&frame, cvSize(width, height), 8, cn);
        cvSetData(&frame, data, step);
        return &frame;
    } 
```

这是在**cap_ffmpeg.cpp**类中，由**VideoCapture**调用。

我尝试了 2.4.2 和 2.4.9 版本。我的程序正在使用 opencv2

* * *

**更多信息**

*   Windows 7的

*   使用 cmake 构建项目（很重要，因为 cmake 可能没有构建/找到正确的编解码器）

*   视觉工作室 9 2008

*   OpenCV 2.4.2

**编辑**

看起来它实际上是一个[错误](http://code.opencv.org/issues/2115)，那么，我该如何解决这个问题并更改我的代码以能够读取 avi 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T07:57:15.203

作为临时解决方案，我决定重新编码视频，以便 OpenCV 不使用 ffmpeg。我将**VirtualDub**与**microsoft video 1**压缩一起使用，它使用“msvidc32.dll”驱动程序。

它适用于我所有的视频，所以现在就足够了，因为我可以继续在 Windows 中使用 OpenCV。

![在此处输入图像描述](../Images/9affe7d866a5692335f001b2ca4a37cd.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T20:07:42.373

我有类似的问题。我下载了 VirtualDub，但由于它的 FMP4 编码，它没有打开我的一个 avi 视频。所以最后解决问题的方法是安装ffdshow，一个windows的解码器。请参阅此链接：[http ://www.movi​​ecodec.com/video-codecs/fmp4-codec-with-virtualdub-45814/](http://www.moviecodec.com/video-codecs/fmp4-codec-with-virtualdub-45814/)

然后我不再需要使用 VirtualDub 来重新编码我的视频了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-23T10:46:43.020

如果您使用 x64。请使用opencv_ffmpeg245_64.dll 这个解决可能会解决问题。或者将 opencv_ffmpeg245_64.dll 重命名为 opencv_ffmpeg245.dll 可能会解决问题。

# javascript - 如何在 Jquery 中发布后从视图返回值到控制器

> ID：12423232
> 
> 赞同：0
> 
> 时间：2012-09-14T11:03:47.487
> 
> 标签：javascript, jquery, asp.net-mvc, c#-4.0, asp.net-mvc-4

我在 Telerik Grid 工作。

我的 Grid - Onload 代码是：

```
function OnLoad(e)
{
    //$("#userSecurityGrid").data("tGrid").pageSize = 50;
    $.post("@Url.Action("SetGridPageSize", "UserSecurity")")
} 
```

我的控制器代码如下所示：

```
[GridAction]
[AcceptVerbs(HttpVerbs.Post)]
public int SetGridPageSize()
{
    // to get grid page size value from table
    // return value;
} 
```

在控制器中，我将从表中获取值，并且必须返回以设置页面大小。

我可以通过设置网格页面大小值

```
$("#userSecurityGrid").data("tGrid").pageSize 
```

但是，我的问题是如何将“SetGridPageSize”控制器中的值返回给“OnLoad”函数以分配网格页面大小值。给我一个解决方案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:11:09.543

您可以在 $.post 回调中获取返回值并设置 pageSize：

```
function OnLoad(e)
{
    $.post("@Url.Action("SetGridPageSize", "UserSecurity")", function(data) {
        $("#userSecurityGrid").data("tGrid").pageSize = data;
    });
} 
```

# android - JSON：在值中连接 2 个字符串值

> ID：12423234
> 
> 赞同：0
> 
> 时间：2012-09-14T11:03:58.163
> 
> 标签：android, python, json

嗨，我有一个 JSON，例如：

```
{
"name" : "avg",
"code" : {"value":" import android 
                    droid = android.Android() 
                    droid.makeToast('Hello, Android!')",
    "type":"PythonScript"
    } 
} 
```

但是，在值字段（Android 的 Python 脚本）中，我需要在 3 个语句之间添加一个换行符。就像是，

```
"value":"import android "  + "\n" + "droid = android.Android()" + "\n" + "droid.makeToast('Hello, Android!')" 
```

是否有可能做到这一点？提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:12:06.560

最好将您的服务器配置为向您发送**HTML 编码的**值字符串。之后，重建和显示会更容易`TextView`，例如

您预期的 Json 响应：

```
{
    "name": "avg",
    "code": {
        "value": "import android<br />droid = android.Android()<br />droid.makeToast('Hello, Android!')",
        "type": "PythonScript"
    }
} 
```

读取*值*字符串后：

```
String html_encoded_string = "import android<br />droid = android.Android()
<br />droid.makeToast('Hello, Android!')"; 
```

然后使用 html 编码更容易将其放入*TextView中：*

```
yourTextView.setText(Html.fromHtml(html_encoded_string)); 
```

# objective-c - 如何使用 Xcode 输出来确定崩溃的来源？

> ID：12423236
> 
> 赞同：3
> 
> 时间：2012-09-14T11:04:02.610
> 
> 标签：objective-c, xcode, debugging, crash-dumps

我的应用程序目前有以下输出：

```
2012-09-14 11:55:32.558 projectname[2172:707] -[__NSCFBoolean isEqualToString:]:
  unrecognized selector sent to instance 0x3ec4ba18
2012-09-14 11:55:32.570 projectname[2172:707] *** Terminating app due to uncaught 
  exception 'NSInvalidArgumentException', reason: '-[__NSCFBoolean isEqualToString:]: 
  unrecognized selector sent to instance 0x3ec4ba18'
*** First throw call stack:
(0x3263788f 0x3468d259 0x3263aa9b 0x32639915 0x32594650 0x41e47 0x417d3 0x46af7 
  0x320beefb 0x320bdfd9 0x320bd763 0x32061f15 0x325961fb 0x342faaa5 0x342fa6bd 
  0x342fe843 0x342fe57f 0x342f64b9 0x3260bb1b 0x32609d57 0x3260a0b1 0x3258d4a5 
  0x3258d36d 0x316e4439 0x3208ccd5 0x17e77 0x15ca4)
terminate called throwing an exception 
```

我可以看到问题在于我正在尝试将 a 与 a`BOOL`进行比较`NSString`，比较是针对来自 Web 服务的数据，并且在此之前一直如此`BOOL`。无论如何，这不是本案的重点。

该日志中的哪些信息实际上可以帮助我找到导致问题的代码行？我可以看到是哪些实例（例如`0x3ec4ba18`）导致它，但日志甚至没有告诉我它们是什么类型，更不用说行号了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:28:00.497

通过转到异常窗格（在左侧边栏中），单击 + 并选择“异常断点”来添加异常断点。然后，当您运行调试器时，将在实际抛出异常的地方暂停，而不是在顶层捕获（或更确切地说未捕获）异常时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:33:30.943

有很多关于这方面的教程，Raywinderlich 有一个很好的教程，用于从控制台日志中确定崩溃。在这里你可以得到它们。

[我的应用程序崩溃了，现在怎么办？- 第1部分](http://www.raywenderlich.com/10209/my-app-crashed-now-what-part-1)

[我的应用程序崩溃了，现在怎么办？- 第2部分](http://www.raywenderlich.com/10505/my-app-crashed-now-what-part-2)

看完这些，就知道具体的crash原因，然后google一下，就可以轻松解决了。

# batch-file - Windows CMD - 在 for 循环中设置不起作用

> ID：12423238
> 
> 赞同：4
> 
> 时间：2012-09-14T11:04:18.987
> 
> 标签：batch-file, cmd

我想编写批处理文件，它将遍历包含备份目录的所有目录并删除其中超过 X 天的文件。在我想运行我的脚本的计算机上没有“forfile”命令。没有 PowerShell，因此 CMD 或 VBScripts 似乎是完成此任务的唯一方法。

目前我对“set”语句有问题 - 似乎当我调用**%checkpath%**时我没有收到预期的文件夹。

```
rem we will memorize current directory
pushd %cd%
set folder="C:\Documents and Settings\myname\Desktop"
cd %folder%
rem loop only folders with five chars within their names (unfortunately on less also
for /D %%g in (?????) DO (
    set checkpath="%cd%\%%g\backup"
    if exist %checkpath% (
        for %%a in ('%%g\backup\*.*') do (
        set FileDate=%%~ta
        set FileDate=%%FileDate:~0,10%%
        rem here I want to compare file modification data with current date
        )
    )
popd
pause 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T11:17:20.480

您需要使用延迟扩展来读取您在`for`循环中设置的变量。

试试这个

```
setlocal enabledelayedexpansion
rem we will memorize current directory
pushd %cd%
set folder="C:\Documents and Settings\myname\Desktop"
cd %folder%
rem loop only folders with five chars within their names (unfortunately on less also
for /D %%g in (?????) DO (
    set checkpath="%cd%\%%g\backup"
    if exist !checkpath! (
        for %%a in ('%%g\backup\*.*') do (
        set FileDate=%%~ta
        set FileDate=!%FileDate:~0,10%!
        rem here I want to compare file modification data with current date
        )
    )
popd
pause 
```

用您创建的变量替换`%`'s`!`将指示它使用延迟扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T02:51:59.760

巴厘岛的回答有一个小错误。第二个`set filedate`不正确，否则他很好，但如果您没有启用延迟扩展，则可能无法正常工作。我修正了他的错误并向您展示了如何确保启用延迟扩展。我还做了一些其他的改变：

```
::This command will ensure that the delayed expansion, i.e. the "!"s below, 
::  will work.  Unfortunately, it also means you loose the results of any
::  "set" commands as soon as you execute the "endlocal" below.
setlocal ENABLEDELAYEDEXPANSION

::you might want
::set "folder=%USERPROFILE%\Desktop"
set "folder=C:\Documents and Settings\myname\Desktop"

rem we will memorize current directory
::If you ran this code with the current directory set to a directory on
::a drive other than C:, your previous code would not have worked to
:: change to your desired target directory.  this slight change fixes that.
pushd "%folder%"

rem loop only folders with five chars within their names - unfortunately on less also
::Use capitals for your loop variables.  The var names are case sensitive, and 
::using capitals ensures there is no confusion between the var names and ~modifiers
for /D %%G in ( ????? ) DO (
    set checkpath="%CD%\%%G\backup"
    if exist !checkpath! (
        for %%A in ('%%G\backup\*.*') do (
            set FileDate=%%~tA
            set FileDate=!FileDate:~0,10!
            rem here I want to compare file modification data with current date
        )
)
popd
endlocal
pause 
```

但是，如果您这样编写，则不需要“setlocal”或延迟扩展：

```
::you might want
::set "folder=%USERPROFILE%\Desktop"
set "folder=C:\Documents and Settings\myname\Desktop"

rem we will memorize current directory
::If you ran this code with the current directory set to a directory on
::a drive other than C:, your previous code would not have worked to
:: change to your desired target directory.  this slight change fixes that.
pushd "%folder%"

rem loop only folders with five chars within their names - unfortunately on less also
for /D %%G in ( ????? ) DO (
    if exist "%%~G\backup" (
        for %%A in ('%%~G\backup\*.*') do (
            for /F "usebackq" %%T in ( '%%~tA' ) do (
                echo File date is %%T, todays date is %DATE%
            )
        )
)
popd
pause 
```

# c++ - Mac/Windows 不同格式的 in_addr 结构（IPv4 地址）

> ID：12423244
> 
> 赞同：1
> 
> 时间：2012-09-14T11:04:58.553
> 
> 标签：c++, windows, macos, ip-address

我正在将一些 Windows 代码移植到 Mac。我遇到了一些使用该类型的代码，`in_addr`并在此处找到了 Windows 实现的文档：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms738571%28v=vs.85%29。 aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738571%28v=vs.85%29.aspx)

具体来说，我遇到的问题是代码试图访问`S_un`in_addr 的属性，编译器（CLang）抱怨该属性不存在。查看 Mac 实现的定义，我得到了这个（in `usr/include/netinet/in.h`）：

```
struct in_addr {
    in_addr_t s_addr;
}; 
```

...并`in_addr_t`定义如下（in `usr/include/sys/types.h`）：

```
typedef __uint32_t      in_addr_t; 
```

有谁知道一个很好的解决方法，或者 Mac 上是否存在与 Windows 实现更密切相关的 IPv4 地址表示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:28:40.387

看我的评论。而且...您可以在代码中实现 windows 声明（只是不要将其称为 in_addr 以避免冲突）。您可以执行以下操作：

```
 typedef struct Win_in_addr {
   union {
     struct {
       __uint8_t s_b1,s_b2,s_b3,s_b4;
     } S_un_b;
     struct {
       __uint16_t s_w1,s_w2;
     } S_un_w;
     __uint32_t S_addr;
   } S_un;
 } Win_IN_ADDR, *Win_PIN_ADDR, *Win_LPIN_ADDR; 
```

但是请注意，这不是可移植的，只能在小端 CPU 上按预期工作。

# php - 如何将一个数组的值替换为另一个数组的键？

> ID：12423249
> 
> 赞同：1
> 
> 时间：2012-09-14T11:05:18.723
> 
> 标签：php, arrays

> **可能重复：**
> [一个数组的php值到另一个数组的键](https://stackoverflow.com/questions/4680188/php-values-of-one-array-to-key-of-another-array)

我在这里给出了两个数组。

```
Array-1
        (
            [0] => 6
            [1] => 11
            [2] => 13
        )

        Array-2
        (
            [0] => 13.339066309
            [1] => 0
            [2] => 100
        ) 
```

我想将一个数组的值替换为另一个数组的键。像这样的东西：

```
Array
    (
        [6] => 13.339066309
        [11] => 0
        [13] => 100
    ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T11:07:03.567

使用`array_combine`：

```
$new_array = array_combine($array1, $array2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T11:07:40.127

看看[array_combine()](http://de2.php.net/array_combine)

$result = array_combine(array_values($firstArr), array_values($secondArr));

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:07:53.680

试试这个：

```
$result = array();

foreach ($array1 as $key => $value) {
    $result[$value] = $array2[$key];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T11:08:59.123

尝试这样的事情

```
$t = array();
$keys = array_keys($arr1);
for ($i = 0; $i < min(count($keys), count($arr2)); $i++) {
    $t[$keys[$i]] = $arr2[$i];
} 
```

# objective-c - 如何获取指定键的值数组？

> ID：12423251
> 
> 赞同：2
> 
> 时间：2012-09-14T11:05:24.383
> 
> 标签：objective-c

我正在尝试获取仅在以下数组 obj 中指定键值的数组。

```
Ex1) If specifying key "name",
    wanted result is : {"James", "Jhone", "Michael", "Donald", "Mac"}

Ex2) If specifying key "age",
    wanted result is : {25,27,35,25,26} 
```

怎么获得？

请帮助或建议。

```
NSArray *array = [[[NSArray alloc] initWithObjects:
        @{@"name" : @"James", @"age" : @25},
                @{@"name" : @"Jhone", @"age" : @27},
                @{@"name" : @"Michael", @"age" : @35},
                @{@"name" : @"Donald", @"age" : @25},
                @{@"name" : @"Mac", @"age" : @26},
                nil] autorelease];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"???  == name"];
NSArray *filtered = [array filteredArrayUsingPredicate:predicate];
NSLog(@"result : %@", filtered);

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"???  == age"];
NSArray *filtered = [array filteredArrayUsingPredicate:predicate];
NSLog(@"result : %@", filtered); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T11:11:26.617

试试这个：

```
[array valueForKey:specifyingKey] 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T11:14:41.120

只需使用 KVC。

```
[array valueForKey:@"age"] 
```

应该给你一个年龄的数组。

# iphone - iphone - UIGestureRecognizer 阻止 UITableView 在 Xcode 4.5 中滚动

> ID：12423253
> 
> 赞同：6
> 
> 时间：2012-09-14T11:05:29.457
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, uigesturerecognizer

我添加了两个滑动手势识别器（向左滑动和向右滑动）到我的`UITableView`. 之后我的表格视图停止滚动。同时`-(void)didSelectRowAtIndex`工作正常。可能是什么问题？

我所做的只是将对象库中的滑动手势识别器拖放到我的 UITableView 上。

如果我删除它们，我的表格会再次开始滚动。

**升级版：**

这发生在升级到 Xcode 4.5 之后。在旧版本的 Xcode 中没有这样的问题。为了避免这种行为 - 以`UIGestureRecognizers`编程方式添加，而不是在 IB 中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T11:24:48.810

试试下面的代码可能对你有帮助....在`viewDidLoad:`方法中编写下面的代码

```
UISwipeGestureRecognizer *swipeGestureObjectImg = [[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(yourSlideOpen_Clicked:)] autorelease];//yourSlideOpen_Clicked is method name where you doing something
swipeGestureObjectImg.numberOfTouchesRequired = 1;
swipeGestureObjectImg.direction = (UISwipeGestureRecognizerDirectionLeft);
[yourView addGestureRecognizer:swipeGestureObjectImg];

UISwipeGestureRecognizer *swipeGestureRightObjectImg = [[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(yourSlideClose_Clicked:)] autorelease];//yourSlideClose_Clicked is method name where you doing something
swipeGestureRightObjectImg.numberOfTouchesRequired = 1;
swipeGestureRightObjectImg.direction = (UISwipeGestureRecognizerDirectionRight);
[yourView addGestureRecognizer:swipeGestureRightObjectImg]; 
```

如果这里 tableview 是 UIView 类的子视图，那么使用上面的代码，否则只需尝试“yourView”的“youtTableview”

我希望这可以帮助你...

:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T11:19:24.100

设置手势识别器的属性 cancelsTouchesInView = NO

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T13:31:08.523

我遇到了同样的问题：我曾经将 TabGestureRecognizer 直接拖到情节提要上，而不是通过代码创建它们。在 iOS6 中，这似乎打破了滚动。

我更喜欢将视图、手势等直接添加到故事板上，而不是通过代码。

您仍然可以执行此操作，但需要进行两项更改：

1) 参考奥特莱斯收藏

*   右键单击场景停靠栏中您可以看到的 GestureRecognizer。
*   清除参考插座集合部分

2）通过代码将GestureRecognizer附加到相关视图

*   为您的 GestureRecognizer 创建一个出口
*   在 viewDidLoad 方法中添加以下行：

    `[self.tableView addGestureRecognizer:_tabGesture];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-18T18:28:21.680

我遇到了同样的问题，我通过将手势识别器链接到视图而不是表视图来解决它。

1.  显示故事板。
2.  显示连接检查器。
3.  显示文档大纲。
4.  在手势识别器和视图控制器下的视图节点之间的“引用插座集合”处创建新链接。

问候。佩德罗。

# c++ - 继承结构的类型转换会导致 g++ 编译错误

> ID：12423257
> 
> 赞同：1
> 
> 时间：2012-09-14T11:05:57.940
> 
> 标签：c++, structure

我有以下代码在全局函数中打印派生结构变量。但是当我尝试编译代码时，g++ 返回以下错误。是否不可能将结构类型转换为从基类通过值传递给函数的派生类？

```
In function 'void print(B)':
Line 19: error: no matching function for call to 'D1::D1(B&)' 
```

代码：

```
struct B{
    int a;
    B()
    {
        a = 0;
    }
};

struct D1:public B{
    std::string s1;
    D1()
    {
        s1.assign("test");
    }
};

void print(B ib)
{
    cout << static_cast<D1>(ib).s1<<endl;
}

int main()
{
    D1 d1;
    cout << d1.s1 <<endl;
    print(d1);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T11:11:51.043

```
void print(B ib)

D1 d1;
print(d1); 
```

`B`您的对象在`print`功能中被截断。您应该使用`reference`or`pointer`代替值。

```
cout << static_cast<D1>(ib).s1<<endl; 
```

使用`static_cast<D1&>(ib).s1`. 在这两种情况下`ib`都应该参考！

# android - 即使我的应用程序不工作，我的广播接收器也会执行

> ID：12423271
> 
> 赞同：1
> 
> 时间：2012-09-14T11:06:46.510
> 
> 标签：android, android-layout, android-intent

即使我的应用程序不工作，我的广播接收器仍在执行。

作为一个例子，我使用 android.intent.action.NEW_OUTGOING_CALL 来检查拨出电话，然后我停止音乐并推送通知..但即使我关闭我的应用程序并终止所有任务，如果我打电话之后我会收到我的应用程序的通知。 . 那么当我使用我的应用程序时，我如何管理我的广播。我已经创建了播放音乐的服务和 2 个用于传入和传出的广播接收器文件。帮助解决这个问题。

另外，如果用户按下退出按钮，我如何使用运行在后面的服务来销毁我的应用程序。**更新我对其进行了编辑，现在可以正常工作了..非常感谢大家

这是我的代码

```
<activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main"
        android:launchMode="singleTask">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
          </activity>

    <receiver android:name="OutgoingCallInterceptor">                          
        <intent-filter android:priority="1">                                  
            <action android:name="android.intent.action.NEW_OUTGOING_CALL" />  
        </intent-filter>
    </receiver>

    <receiver android:name="IncomingCallInterceptor">                          
        <intent-filter android:priority="1">                                  
            <action android:name="android.intent.action.PHONE_STATE" />  
            <action android:name="android.media.AUDIO_BECOMING_NOISY" />

        </intent-filter>
    </receiver> 
```

**更新** ，因为你们都建议我我已将接收器放入主类文件并从那里注册，但它不会工作

```
public class MainActivity extends Activity {
RemoteViews layout;
int SDK_INT;
 BroadcastReceiver br;
 @Override
    protected void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     IntentFilter filter = new IntentFilter("android.media.AUDIO_BECOMING_NOISY");
     this.registerReceiver(br, filter);
     setContentView(R.layout.activity_main);
         SDK_INT = android.os.Build.VERSION.SDK_INT;
        System.out.println(SDK_INT);
        Button start = (Button)findViewById(R.id.play);
        Button stop = (Button)findViewById(R.id.stop); 
        start.setOnClickListener(startListener);
        stop.setOnClickListener(stopListener);
        br = new BroadcastReceiver() {  
            @Override
            public void onReceive(Context context, Intent intent) {
                // TODO Auto-generated method stub
                 if (intent.getAction().equals(android.media.AudioManager.ACTION_AUDIO_BECOMING_NOISY)) {
context.stopService(new Intent(context, myPlayService.class));
                        Toast.makeText(context, "Headphones disconnected.", Toast.LENGTH_SHORT).show();
                 }
            }  }
        };

@Override   
protected void onDestroy() {
    super.onDestroy();
    unregisterReceiver(br);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:29:27.293

一个例子：如何根据您的需要注册和取消注册广播接收器“我希望代码是不言自明的”

```
 private final BroadcastReceiver xyz= new BroadcastReceiver() {
@Override
public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();
//ur reciver
 }
  protected void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);

IntentFilter filter = new IntentFilter(ACTION);//ur action
this.registerReceiver(xyz, filter);
}

@Override
protected void onDestroy(){
super.onDestroy();
unregisterReceiver(xyz);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T12:09:59.360

您需要在 onResume() 或 onpause() 方法中声明 unregisterReceiver()。这将解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:24:19.927

## 第一的：

在 onPause() 中使用`unregisterReceiver()`并在 onStart() 中重新注册。

如果您只想在应用程序启动时提供功能，最好在本地注册接收器。

## 第二：

绑定后使用服务并且在退出应用程序时不要调用`unBind`，即使您的应用程序关闭，您的服务也会保持活动状态。我猜你是在本地启动服务。通过绑定启动服务。

希望这能解决您的问题。

# ruby-on-rails - FactoryGirl 搞砸了 rake db:migrate 进程

> ID：12423273
> 
> 赞同：32
> 
> 时间：2012-09-14T11:06:55.227
> 
> 标签：ruby-on-rails, rspec, rake, bdd, factory-bot

我正在使用 Rspec (2.11.0) 和 FactoryGirl (4.0.0) 在 Ruby on Rails 3 中执行 TDD/BDD。我有一个 Category 模型的工厂：

```
FactoryGirl.define "Category" do
  factory :category do
    name "Foo"
  end
end 
```

**如果我放弃，在测试**环境中创建然后迁移数据库，我会收到此错误：

```
rake aborted!
Could not find table 'categories' 
```

出现此问题的原因是 FactoryGirl 期望这些表已经存在（出于某种奇怪的原因）。如果我从我的 rails 应用程序中删除 spec 文件夹并执行`db:migrate`，它可以工作。此外，如果我`factory-girl-rails`从我`Gemfile`的标记中标记`:require => false`它也可以工作（那么我必须评论需要才能运行 rspec）。

我在这里找到了一些关于这个问题的信息：[https ://github.com/thoughtbot/factory_girl/issues/88](https://github.com/thoughtbot/factory_girl/issues/88)

我做错了什么吗？如何在`db:migration`任务中“绕过”FactoryGirl 阶段？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-09-14T13:37:09.603

我认为你需要在 Gemfile 中有这样的工厂女孩​​定义：

```
 gem 'factory_girl_rails', :require => false 
```

然后你只需要像这样在你的 spec_helper.rb 中使用它：

```
 require 'factory_girl_rails' 
```

这就是我一直使用这个宝石的方式。除了 spec_helper.rb，您不需要在其他地方使用它。您当前所需的方法是错误的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-10T08:28:22.723

解决此问题的一个简单方法是通过将工厂中的任何模型包装在块中来延迟对它们的评估。所以，而不是这个：

```
factory :cake do
  name "Delicious Cake"
  frosting Frosting.new(:flavor => 'chocolate')
  filling Filling.new(:flavor => 'red velvet')
end 
```

这样做（注意花括号）：

```
factory :cake do
  name "Delicious Cake in a box"
  frosting { Frosting.new(:flavor => 'chocolate') }
  filling { Filling.new(:flavor => 'red velvet') }
end 
```

如果你有很多工厂，这可能不可行，但它相当简单。另请参见[此处](http://www.avenue80.com/rake-dbmigrate-and-factory-girl-weirdness/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-14T13:39:37.937

信息来自： http: [//guides.rubyonrails.org/testing.html](http://guides.rubyonrails.org/testing.html)

当您最终破坏您的测试数据库时（相信我，它会发生），您可以根据开发数据库中定义的规范从头开始重建它。你可以通过运行来做到这一点`rake db:test:prepare`。

以上`rake db:migrate`在开发环境和更新上运行任何挂起的迁移`db/schema.rb`。从`rake db:test:load`当前的`db/schema.rb`. 在随后的尝试中，最好先运行`db:test:prepare`，因为它首先检查挂起的迁移并适当地警告您。

```
rake db:test:clone            Recreate the test database from the current environment’s database schema
rake db:test:clone_structure  Recreate the test database from the development structure
rake db:test:load             Recreate the test database from the current schema.rb
rake db:test:prepare          Check for pending migrations and load the test schema
rake db:test:purge            Empty the test database. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T22:29:48.577

你不应该做任何这些..我认为问题是你对FactoryGirl.define的论点..

试试这个。

```
FactoryGirl.define do
   factory :category do
       name "Foo"
   end
end 
```

那应该可以正常工作，并且不会搞砸我的迁移或加载。今天，我必须解决一个问题，即我直接从我的工厂引用了一个模型常量，并且不得不将它放在一个块中来修复问题。

```
FactoryGirl.define do
   factory :category do
       # this causes unknown table isseus
       # state Category::Active
       # this does not.
       state { Category::Active }
   end
end 
```

# c# - 未使用 WPF 应用程序自定义 ttf 字体？

> ID：12423281
> 
> 赞同：2
> 
> 时间：2012-09-14T11:07:12.387
> 
> 标签：c#, wpf, .net-4.0

我下载了一个显示 EAN 128 条码的自定义字体。我还下载了一些源代码和示例程序，它们将字符串转换为编码字符串以与字体一起使用（包括校验和等）。

我安装了字体，打开了我的 WPF 应用程序并将文本块字体设置为这个新字体并添加了一些文本。文本出来就好像它是 Arial 或什么的。

我尝试将字体添加为资源并以这种方式引用它，但仍然不高兴。

所以我然后运行了字体附带的程序。我发现有趣的部分是，当您输入文本时，程序对其进行编码并设置标签的文本并显示条形码。但是，该应用程序允许您打印预览和打印条形码，但是当您在打印预览和打印输出中将条形码的字体更改为 Arial 或其他任何内容时，与我在我的应用程序中看到的问题相同。

这就是 xaml 目前的样子，但正如我所说，我已经尝试在表达式混合中设置字体。

#Code 128 是字体名称而不是文件名。

```
<TextBlock x:Name="tbkBarCode" FontFamily="/Fonts/#Code 128" FontSize="24" HorizontalAlignment="Center"/> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:33:10.980

尝试这个：

```
<TextBlock x:Name="tbkBarCode" FontFamily="pack://application:,,,/Fonts/#Code 128" FontSize="24" HorizontalAlignment="Center"/> 
```

**编辑：**我首先尝试了一种不同的字体，这种方式奏效了。

我下载并尝试了 Code 128 字体，但它并没有立即工作。为了让它工作，我必须将 Build Action 更改为“Content”，将 Copy to Output Directory 更改为“Copy if newer”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T12:44:53.263

这是我用来做的方法...

1.  我在我的项目中添加字体
2.  我在“资源”上设置字体的属性“构建操作”
3.  最后，我使用了这样的字体：

```
 TextBlock Grid.Column="2" HorizontalAlignment="Center" FontSize="32" VerticalAlignment="Stretch" FontFamily="./#Code 128" Grid.Row="5" Margin="1" Text="{Binding Checksum}"/ 

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T11:42:58.490

如果您创建一个测试 Windows 窗体应用程序，添加一个 TextBox 并选择“Code 128”字体作为要使用的字体，那么它会正确显示 Barcode 字体。

使用 WPF，它看起来内部处理字体的渲染系统由于某种原因不喜欢该特定字体......也许它期望文件中的某些信息不存在。

即使是“字形”也很难从该字体文件中获取任何有意义的内容：

```
<Glyphs UnicodeString="ABCD1234567890" FontUri="c:\windows\fonts\code128.ttf" Height="50" Fill="#FF000000" FontRenderingEmSize="25"/> 
```

它只是返回“块”......这意味着没有字符。

![在此处输入图像描述](../Images/d5370208c263a5dc841abf84ead0129b.png)

当您使用 TextBox/TextBlock 等时......备用字体用于显示内容（因为它无法使用 Code123 字体显示它）......这就是为什么您看到文本恢复为Arial 字体（或任何您定义的后备字体）。

* * *

你从哪里下载自定义字体和示例程序……是这个地方吗？

*   [http://www.barcoderesource.com/wpfbarcode.shtml](http://www.barcoderesource.com/wpfbarcode.shtml)

还是从这里？：

*   [http://grandzebu.net/informatique/codbar-en/code128.htm](http://grandzebu.net/informatique/codbar-en/code128.htm)

您确定字体名称是 #Code 128 吗？

如果将 .ttf 字体复制到`\Windows\Fonts`目录中，然后使用 CharacterMap，您可以看到哪些字体名称？

使用barcoderesource字体安装后，我列出了这些字体：

![在此处输入图像描述](../Images/e4db8653fc3feb5f4282ee09e87bac46.png)

这意味着使用：

```
FontFamily="CCode128_S3_Trial" 
```

参考字体如果它安装在 Windows 中

或者

```
FontFamily="/Fonts/#CCode128_S3_Trial" 
```

引用嵌入到您的应用程序中的 .ttf 字体文件。

您是否将 .TTF 字体文件添加到名为“Fonts”的文件夹中的项目中并设置 Build Type="Resource"？

*   [http://msdn.microsoft.com/en-us/library/ms753303.aspx](http://msdn.microsoft.com/en-us/library/ms753303.aspx)

# mysql - 日期字段在 sql 中未正确排序

> ID：12423287
> 
> 赞同：4
> 
> 时间：2012-09-14T11:07:36.067
> 
> 标签：mysql

这是我的搜索结果（按 Cruise_date）：

```
CRUISE_DATE     DAYS_TILL_CRUISE    NAME
10/13/2012  29  Octobertfest
10/20/2012  36  Rare Air Show,
10/20/2012  36  Bugs and Bratz
11/10/2012  57  Fall Color Super Cruise
11/10/2012  57  Club Cruise-In to Desoto State Park
9/22/2012   8   Bugs on the Bayou
9/23/2012   9   Hot Dogs and Hot Rods 
```

请注意，日期为 10 月、11 月、9 月。这是我的sql语句：

```
SELECT
         DATE_FORMAT(cruise_date, '%c/%e/%Y') AS cruise_date,
         DATEDIFF(cruise_date, CURDATE()) AS days_till_cruise,
         NAME
FROM
         `cruise`
WHERE
         `cruise_date` >= '2012-09-14'
ORDER BY

       `cruise_date` 
```

为什么我的日期不能正确排序？

[单击此处查看实际操作](http://sqlfiddle.com/#!2/baf28/5)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T11:09:30.127

它现在按 的结果而`DATE_FORMAT(cruise_date, '%c/%e/%Y')`不是字段按文本排序`cruise_date`。试试`ORDER BY cruise.cruise_date`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T11:11:33.840

这是因为您在`SELECT`子句中使用了相同的别名。您需要将别名更改为不同的名称或使用`cruise.cruise_date`in`ORDER BY`子句，否则记录将在选择的文本列上排序。试试这个：

```
SELECT
         DATE_FORMAT(cruise_date, '%c/%e/%Y') AS cruise_date_1,
         DATEDIFF(cruise_date, CURDATE()) AS days_till_cruise,
         NAME
FROM
         `cruise`
WHERE
         `cruise_date` >= '2012-09-14'
ORDER BY

       `cruise_date` 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/baf28/13)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T11:12:30.547

或者，尝试订购它`days_till_cruise`

```
ORDER BY
       `days_till_cruise` 
```

# sql-server-2012 - SQL Server 等效于 MySQL Extract(hour_second)

> ID：12423291
> 
> 赞同：0
> 
> 时间：2012-09-14T11:07:55.380
> 
> 标签：sql-server-2012

希望您能提供帮助...我正在将存储过程从 MySQL 转换为 SQL Server 2012，但遇到了一个小问题。MySQL sp 有以下代码：

`SET @hrsecA = EXTRACT(HOUR_SECOND FROM (startDate + INTERVAL startTime HOUR_SECOND));`

我试图找到与此等效的 SQL Server 是什么...我认为使用 DATEPART 将是可行的方法，但似乎在 DATEPART 中看不到让我选择 HOUR_SECOND 的选项。

希望你能帮忙。

干杯

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:44:39.047

对于年份，您可以使用 DATEPART(yyyy,OrderDate)

其次，使用

选择 NmbrSeconds= Cast(Left(Duration,Charindex('minutes',Duration)-1) As Int) * 60 + Cast(Substring(Duration,Charindex('minutes',Duration)+8,2) As Int)

# css - 无法让引导灯箱工作......！

> ID：12423295
> 
> 赞同：3
> 
> 时间：2012-09-14T11:08:24.100
> 
> 标签：css, twitter-bootstrap, lightbox

我确信我的问题有一个简单的解决方案，但对于我的生活，我无法弄清楚我做错了什么。

我正在尝试让[bootstrap-lightbox](http://jbutz.github.com/bootstrap-lightbox/)在我的网站上工作（这是一个 Django 应用程序，如果这有什么不同的话）。

我的标题中有以下内容：

```
<script type="text/javascript" src="/static/js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="/static/js/jquery-ui-1.8.16.custom.min.js"></script>
<script src="static/dash/bootstrap-lightbox.js"></script>
<script src="static/dash/excanvas.min.js"></script>
<script src="static/dash/bootstrap.min.js"></script>
<script src="static/dash/jquery.flot.min.js"></script>
<script src="static/dash/jquery.gritter.min.js"></script>
<script src="static/dash/jquery.flot.resize.min.js"></script>
<script src="static/dash/jquery.peity.min.js"></script>
<script src="static/dash/fullcalendar.min.js"></script>
<script src="static/dash/unicorn.dashboard.js"></script>
<script src="static/dash/unicorn.js"></script>
<script src="static/dash/custom.js"></script>
<link rel="stylesheet" href="static/dash/bootstrap.min.css" />
<link rel="stylesheet" href="static/dash/bootstrap-responsive.min.css" />
<link rel="stylesheet" href="static/dash/fullcalendar.css" />   
<link rel="stylesheet" href="static/dash/unicorn.main.css" />
<link rel="stylesheet" href="static/dash/jquery.gritter.css" />
<link rel="stylesheet" href="static/dash/unicorn.grey.css" class="skin-color" />
<link rel="stylesheet" href="static/dash/bootstrap-lightbox.css" /> 
```

在我的 HTML 中：

```
<a data-toggle="lightbox" href="#worldlightbox" class="thumbnail"><img src="/static/img/pics/bg/thumbs/WorldThumb.jpg" alt=""></a>

<div class="lightbox" id="worldlightbox" style="display: none;">
<div class='lightbox-content'>
    <img src="/static/img/pics/bg/World.jpg">
</div> 
```

当我单击链接图像时，什么也没有发生。控制台中没有错误，并且脚本正在正确加载.....

我很确定某处存在一些冲突，因为我尝试过的灯箱插件都没有工作。

如果有人能指出我哪里出错了，我将不胜感激！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T15:11:40.633

很抱歉，这么晚了，但我自己也遇到了问题。您的问题的简单答案是灯箱没有按应有的方式工作。而且帮助很少且不完整。我不知道开发人员是如何让他们的示例工作的。但我让我的工作，它也应该对你有用：

```
 <ul class="thumbnails" style=" position:relative; top: 110px; display:block;">
      <li class="span2">
        <a data-toggle="lightbox" href="#carouselLightBox" class="thumbnail">Open Lightbox</a>        
      </li>
    </ul>
    <div class="lightbox fade" id="carouselLightBox" style="display: none;">
        <div class='lightbox-content'>
            <img src="/content/images/mapicons/cad.png" alt="" />
        </div>
    </div> 
```

无论出于何种原因，将您的“a”标签放在带有类名缩略图的“ul”中，然后命名您的“a”标签类缩略图使其工作。希望 Django 能尽快解决这个问题……

# android - 在android中集成twitter时出错

> ID：12423298
> 
> 赞同：0
> 
> 时间：2012-09-14T11:08:29.310
> 
> 标签：android

当我运行我的应用程序时出现错误

```
09-14 16:33:52.854: W/System.err(380): 401:Authentication credentials (http://dev.twitter.com/pages/auth) were missing or incorrect. Ensure that you have set valid conumer key/secret, access token/secret, and the system clock in in sync.
09-14 16:33:52.864: W/System.err(380): error - Read-only application cannot POST 
```

我已将访问权限更改为读取、写入和直接访问，但上述错误仍然显示为只读应用程序。

我的应用程序没有显示更新是否有办法完全刷新 eclipse 或应用程序..当我运行 android 应用程序时它没有显示更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:58:05.657

> 有没有办法完全刷新日食或应用程序

要刷新项目，您可以通过 Eclipse -> Project -> Clean -> Select project from check box and radio button to "Clean projects selected below" 和 ok 按钮来清理项目。

日志显示您在请求中缺少某些内容，这非常明显。

您的错误是可以理解的，但是您是否尝试使用 WebView / 浏览器或直接（不推荐）将 Twitter 集成到应用程序中，使用任何 3rd 方库，如果是，那么您使用的是哪个库，尚不清楚。

您可以参考互联网上提供的以下教程，将 twitter 集成到您的应用程序中。

仅使用一个库 twitter4j 来处理 oAuth 并同时制作推文

1.  [http://blog.blundell-apps.com/sending-a-tweet/](http://blog.blundell-apps.com/sending-a-tweet/)
2.  [http://automateddeveloper.blogspot.in/2011/06/android-twitter-oauth-authentication.html](http://automateddeveloper.blogspot.in/2011/06/android-twitter-oauth-authentication.html)

为 oAuth 和推文任务使用两个或更多第三方库

1.  [http://blog.tarams.com/?p=212](http://blog.tarams.com/?p=212)
2.  [http://www.android10.org/index.php/articleslibraries/291-twitter-integration-in-your-android-application](http://www.android10.org/index.php/articleslibraries/291-twitter-integration-in-your-android-application)
3.  [http://blog.doityourselfandroid.com/2011/02/13/guide-to-integrating-twitter-android-application/](http://blog.doityourselfandroid.com/2011/02/13/guide-to-integrating-twitter-android-application/) ,

谢谢，

# build - 为什么 sencha 构建应用程序失败？

> ID：12423308
> 
> 赞同：1
> 
> 时间：2012-09-14T11:09:22.023
> 
> 标签：build, sencha-touch, extjs, sencha-touch-2

当我尝试使用 sencha 命令行工具构建我的应用程序时，我总是遇到这个异常。但是，其他应用程序似乎运行良好。我错过了什么？

![在此处输入图像描述](../Images/8938b9292d955843aa4ad4eee9c5104c.png)

**更新**

我发现这与我希望我的 buildPath 位于应用程序目录之外的事实有关。我在 app.json 中的部分如下所示：

```
"buildPaths": {
    "production": "../deploy/frontenddemo/production",
    "testing": "../deploy/frontenddemo/testing",
    "package": "../deploy/frontenddemo/package",
    "native": "../deploy/frontenddemo/native"
}, 
```

如果我将其更改为：

```
"buildPaths": {
    "production": "build/production",
    ...
}, 
```

一切都按预期工作。我不知道为什么。我猜应该可以在应用程序目录之外进行构建。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T07:49:13.987

好的，经过多次尝试和错误。我找到了这个问题的根本原因。

我的 app.json 看起来像这样：

```
"archivePath": "../deploy/frontenddemo/archive/",
"buildPaths": {
    "testing": "../deploy/frontenddemo/testing",
    "production": "../deploy/frontenddemo/production",
    "package": "../deploy/frontenddemo/package",
    "native": "../deploy/frontenddemo/native"
}, 
```

这种结构的问题是归档和构建都会在配置路径之外产生一个目录“sencha”。这意味着他们都创建`../deploy/frontenddemo/sencha` 了不同的内容。我想知道这是否记录在某处？

修复很容易。我只是将路径更改为：

```
"archivePath": "../deploy/frontenddemo/archive/",
"buildPaths": {
    "testing": "../deploy/frontenddemo/builds/testing",
    "production": "../deploy/frontenddemo/builds/production",
    "package": "../deploy/frontenddemo/builds/package",
    "native": "../deploy/frontenddemo/builds/native"
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:18:42.777

我以前在 ~/Sites/ 中直接部署到 Web 服务器（例如 MAMP，甚至 Mac 的默认 Web 服务器）时遇到过问题

您是否尝试过将部署目录更改为 MAMP 以外的其他目录，然后手动复制/粘贴它？

另外，您使用的是什么版本的 SDK？2.1 beta 3 不久前发布，还有一个新的 Sencha Cmd 3.0.0.122（以前称为 Sencha SDK Tools）。

论坛公告：[Sencha Touch 2.1.0 Beta 3 上线](http://www.sencha.com/forum/announcement.php?f=91&a=36 "Sencha Touch 2.1.0 Beta 3 可用")

# android - 服务/进程的内存过多

> ID：12423316
> 
> 赞同：0
> 
> 时间：2012-09-14T11:09:57.893
> 
> 标签：android, android-service

我的应用程序有一个后台服务，它会定期从网上下载信息。根据 MA​​T（内存分析器），整体内存使用量（保留）为 KB，无论如何，如果我打开 android 的任务管理器，我会看到 13-15 MB。我不知道怎么回事：主应用程序关闭，没有活动在运行，只有服务！

也许是因为在主要活动中我使用 LruCache 缓存位图？但是，理论上，退出这个活动后，应该释放内存......

编辑：这是我的 LruCache 代码，没什么大不了的，只是一个单例，以便每个活动共享缓存内容：

```
public class PortableCache {
private static final int CACHE_MB = 1;

private static LruCache<String, Bitmap> cachedBitmaps= new LruCache<String,Bitmap>(CACHE_MB*1024*1024){
    protected int sizeOf(String k,Bitmap v){
        return v.getRowBytes()*v.getHeight();
    }
};

public static LruCache<String, Bitmap> getImageCache(){
    return cachedBitmaps;
}

   } 
```

但是，缓存大小为 1MB，我不认为它是主要责任......

编辑2：奇怪的是，随着时间的推移，服务内存使用量减少了……从现在的 16MB 到 1 小时后，变成了 9MB。

# build - 如何使用 xcode < 4.5 构建具有 iOs6 功能的应用程序？

> ID：12423323
> 
> 赞同：1
> 
> 时间：2012-09-14T11:10:14.410
> 
> 标签：build, compilation, conditional-statements, ios6, uirefreshcontrol

我正在开发我的应用程序的未来版本，并希望集成一些 iOs6 新类，如 UIRefreshControl。我知道我还不能用 xcode 4.5 提交我的应用程序。所以我回到 xcode < 4.5 并构建，但我有错误，因为它不知道那个类。

如何在我的代码中添加条件以绕过构建错误并使我的代码针对 iOs < 6 和 iOs >= 6 进行良好的条件化。

我尝试了几件事，例如：

```
#if __IPHONE_OS_VERSION_MAX_ALLOWED >= __IPHONE_6_0 
```

或者

```
#ifdef _USE_OS_6_OR_LATER 
```

但他们不工作......我仍然得到错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:00:56.310

从昨天开始，您可以使用 xcode 4.5 提交。金牌大师版可以提交应用

# eclipse - 如何在 Eclipse 上访问 GWT 设计器视图

> ID：12423324
> 
> 赞同：2
> 
> 时间：2012-09-14T11:10:18.053
> 
> 标签：eclipse, gwt, eclipse-plugin

我还没有找到查看 GWT 设计器模式的方法。我在 Eclipse 4.2 上安装了 gwt sdk、gwt 设计器和窗口生成器。查看我的安装详细信息：![安装细节](../Images/3e8984979ba298b3eaff0e5479919676.png) 我可以使用窗口构建器打开一个 java 文件，但看不到底部的源代码和设计选项卡：![图 2](../Images/7a24f2f7fb0fef4980d74e8bc381020c.png) 有人帮我弄清楚如何访问设计器模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:16:34.740

右键单击文件并选择在设计器中打开

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T16:18:03.730

右键单击您的 uibinder 文件 (ui.xml)。然后选择窗口生成器。您可能需要单击“其他”，然后从列表中选择 windowbuilder。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T16:00:50.060

原来它是一个错误，我能够通过单击在 Google > Web Toolkit > Designer 首选项下切换到不同的布局来访问设计器模式

感谢提供答案的家伙:)

# ios - 用于 CAKeyFramAnimation 的 CGImageCreateWithImageInRect 的内存管理

> ID：12423330
> 
> 赞同：0
> 
> 时间：2012-09-14T11:10:44.613
> 
> 标签：ios, memory-management, memory-leaks, cakeyframeanimation, cgimageref

我正在使用 CAKeyFrameAnimation 为几个 png 图像设置动画。我通过使用从一个 png 图像中剪切它们`CGImageCreateWithImageInRect`

当我在 XCode 中运行分析函数时，它显示了潜在的内存泄漏。他们是因为`CGImageCreateWithImageInRect`. 但是当我在创建动画对象后使用 CGImageRelease 时，没有显示图像（我知道为什么，但是当我不使用 release 时，会出现泄漏）。

有人可以解释一下这个内存问题的情况吗？什么是最好的解决方案？我正在考虑为每个“剪辑”创建带有 CGImageRefs 的 UIImages。但是 CAKeyFrameAnimation 使用 CGImageRef 的字段，所以我认为没有必要创建那个 UIImages。

```
UIImage *source = [UIImage imageNamed:@"my_anim_actions.png"];

cutRect = CGRectMake(0*dimForImg.width,0*dimForImg.height,dimForImg.width,dimForImg.height);
CGImageRef image1 = CGImageCreateWithImageInRect([source CGImage], cutRect);
cutRect = CGRectMake(1*dimForImg.width,0*dimForImg.height,dimForImg.width,dimForImg.height);
CGImageRef image2 = CGImageCreateWithImageInRect([source CGImage], cutRect);

NSArray *images = [[NSArray alloc] initWithObjects:(__bridge id)image1, (__bridge id)image2, (__bridge id)image2, (__bridge id)image1, (__bridge id)image2, (__bridge id)image1, nil];

CAKeyframeAnimation *myAnimation = [CAKeyframeAnimation animationWithKeyPath: @"contents"];
myAnimation.calculationMode = kCAAnimationDiscrete;
myAnimation.duration = kMyTime;
myAnimation.values = images; // NSArray of CGImageRefs
[myAnimation setValue:@"ANIMATION_MY" forKey:@"MyAnimation"];
myAnimation.removedOnCompletion = NO;
myAnimation.fillMode = kCAFillModeForwards;

CGImageRelease(image1);CGImageRelease(image2);//YES or NO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T10:07:34.563

不确定这是否有帮助，但我遇到了类似的情况，使用`CGImageCreateWithImageInRect`拍摄图像的各个部分然后在图像视图中显示这些部分会导致大量内存使用。而且我发现可以大大提高内存使用率的一件事是将子图像编码为 PNG 数据，然后再次将其重新解码回图像。

我知道，这听起来很荒谬而且完全多余，对吧？但它帮助很大。根据文档`CGImageCreateWithImageInRect`，

> 生成的图像保留了对原始图像的引用，这意味着您可以在调用此函数后释放原始图像。

似乎在显示图像时，UI 会复制图像数据，包括复制它所引用的原始图像数据；这就是它使用这么多内存的原因。但是当您将其写入PNG并再次返回时，您会创建一个独立的图像数据，它更小并且不依赖于原始数据。这只是我的猜测。

无论如何，尝试一下，看看它是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T12:24:09.683

两种解决方案：

第一：用于`[UIImageView animationImages]`在多个图像之间制作动画。

第二：将图像存储为 Ivar 并将它们发布到`dealloc`您的班级中。

# java - 计算来自 url 的外部链接

> ID：12423334
> 
> 赞同：0
> 
> 时间：2012-09-14T11:10:59.327
> 
> 标签：java, jsp, servlets

```
public class Scanner {
    private HtmlProcessor hp;
    private String baseUrl;
    private int step = 0;

    public Scanner(String baseUrl) {
        this.hp = new HtmlProcessor();
        this.baseUrl = LinkParser.parseLink(baseUrl);
    }

    public void info(String url) throws IOException {

        String[] links =  hp.getLinksAndHrefs(url);
        System.out.println("Link : " + url + "\n"
                          +"ExtLinksCount : " + externalLinksCount(links) + "\n"
                          +"Steps to main : " + step
                          );
        String strippedLink;

        for (String link : links) {

            strippedLink = LinkParser.parseLink(link);

            if ( strippedLink.contains(this.baseUrl) && !strippedLink.equals(this.baseUrl) ) {
                ++ step; 
                info(link);
            }

            step = 0;
        }

    }

    public int externalLinksCount(String[] links) {
        int counter = 0;        

        String parsedLink;

        for (String link : links) {
             parsedLink = link;

            if ( ! ( parsedLink.contains( this.baseUrl ) ) ) {
                ++counter;
            }
        }

        return counter;

    }
} 
```

我们有一些输入链接：“http://test.com” 这个链接有链接：“http://test.com”、“http://test.com/some”、“http://google. com”和“http://test.com/some”有链接：“http://facebook.com”、“some.com”

需要的结果是：主要步骤：0 链接：“http://test.com” ExtLinksCount：1

主要步骤：1 链接：“http://test.com/some” ExtLinksCount：2

我需要计算此页面上的所有外部链接，如果此页面有内部链接，请转到内部链接并计算此页面上的所有外部链接以及返回基本页面的步骤等。我知道如何从页面获取链接，但我不知道如何正确解决这个问题。在我的变体中，我用递归解决了这个问题。但是如果站点与基本链接相同，程序就会崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:21:08.207

递归似乎是要走的路。但是在递归中，您应该始终定义退出策略，否则您将进入无限循环。

仅检查 url 是否等于 baseurl 是不够的。如果两个子页面相互链接将导致无限循环。

所以我建议保留已解析链接的列表。在 ur info() 的第一个链接，检查列表是否包含 URL，如果是，则忽略并继续，否则添加到列表并处理..

修改后的代码

```
public class Scanner {
    private HtmlProcessor hp;
    private String baseUrl;
    private int step = 0;
    private List parsedLinks;

    public Scanner(String baseUrl) {
        this.hp = new HtmlProcessor();
        this.baseUrl = LinkParser.parseLink(baseUrl);
        this.parsedLinks = new ArrayList();
    }

    public void info(String url) throws IOException {
        if (!parsedLinks.contains(url)) {

            parsedLinks.add(url);

            String[] links = hp.getLinksAndHrefs(url);
            System.out.println("Link : " + url + "\n" + "ExtLinksCount : "
                    + externalLinksCount(links) + "\n" + "Steps to main : "
                    + step);
            String strippedLink;

            for (String link : links) {

                strippedLink = LinkParser.parseLink(link);

                if (strippedLink.contains(this.baseUrl)
                        && !strippedLink.equals(this.baseUrl)) {
                    ++step;
                    info(link);
                }

                step = 0;
            }
        }

    }

    public int externalLinksCount(String[] links) {
        int counter = 0;

        String parsedLink;

        for (String link : links) {
            parsedLink = link;

            if (!(parsedLink.contains(this.baseUrl))) {
                ++counter;
            }
        }

        return counter;

    }
} 
```

# javascript - 禁用（不隐藏）浏览器滚动条

> ID：12423336
> 
> 赞同：2
> 
> 时间：2012-09-14T11:11:04.433
> 
> 标签：javascript, jquery, scrollbar

我有一个弹出式灯箱，需要使用 javascript 在页面中打开。打开弹出窗口时，我需要禁用浏览器的滚动条，但它应该是可见的。我尝试了以下代码

```
$('body').css({'position' : 'fixed' ,'overflow-y':'scroll','width':'100%'}); 
```

此代码将禁用滚动条，但它会使页面跳转到顶部，因为弹出窗口在页面的垂直中心打开，这是一个严重的 UI 问题。

还修复了在 IE6 中可能无法正常工作

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-14T11:57:00.930

您可以使用某种具有透明度的蒙版效果，这样如果弹出窗口出现，浏览器将被禁用，用户无法对其执行任何操作。

# regex - 如何将替换正则表达式作为命令行参数传递给 perl 脚本

> ID：12423337
> 
> 赞同：6
> 
> 时间：2012-09-14T11:11:04.833
> 
> 标签：regex, perl

我正在尝试编写一个简单的 perl 脚本来将给定的正则表达式应用于文件名等，并且我无法将正则表达式作为参数传递到脚本中。

我想做的是这样的：

```
> myscript 's/hi/bye/i' hi.h
bye.h
> 
```

我已经制作了这段代码

```
#!/utils/bin/perl -w
use strict;
use warnings;

my $n_args = $#ARGV + 1;
my $regex =  $ARGV[0];
for(my $i=1; $i<$n_args; $i++) {
  my $file = $ARGV[$i];

  $file =~ $regex;
  print "OUTPUT: $file\n";
} 
```

我不能使用 qr，因为它显然不能用于替换正则表达式（尽管我的来源是论坛帖子，所以我很高兴被证明是错误的）。

我宁愿避免将这两个部分作为单独的字符串传递并在 perl 脚本中手动执行正则表达式。

是否可以将正则表达式作为这样的参数传递，如果可以，最好的方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T11:31:20.920

我认为有不止一种方法可以做到这一点。

**电动汽车~~一世~~方式：**

当您基本上发送正则表达式时，可以对其进行评估以获得结果。像这样：

```
my @args = ('s/hi/bye/', 'hi.h');
my ($regex, @filenames) = @args;
for my $file (@filenames) {
  eval("\$file =~ $regex");
  print "OUTPUT: $file\n";
} 
```

当然，遵循这种方式会给你带来一些非常令人讨厌的惊喜。例如，考虑传递这组参数：

```
...
my @args = ('s/hi/bye/; print qq{MINE IS AN EVIL LAUGH!\n}', 'hi.h');
... 
```

是的，它最会嘲笑你~~一种~~意利。

**安全的方式：**

```
my ($regex_expr, @filenames) = @args;
my ($substr, $replace) = $regex_expr =~ m#^s/((?:[^/]|\\/)+)/((?:[^/]|\\/)+)/#;
for my $file (@filenames) {
  $file =~ s/$substr/$replace/;
  print "OUTPUT: $file\n";
} 
```

如您所见，我们将提供给我们的表达式解析为两部分，然后使用这些部分构建一个完整的运算符。显然，这种方法不太灵活，但当然，它更安全。

**最简单的方法：**

```
my ($search, $replace, @filenames) = @args;
for my $file (@filenames) {
  $file =~ s/$search/$replace/;
  print "OUTPUT: $file\n";
} 
```

是的，没错——根本没有正则表达式解析！这里发生的情况是我们决定采用两个参数——“搜索模式”和“替换字符串”——而不是单个参数。它会使我们的脚本不如前一个灵活吗？不，因为我们仍然或多或少地定期解析正则表达式。但是现在用户清楚地了解了赋予命令的*所有*数据，这通常是一个很大的改进。)

*两个示例中的 @args 对应于 @ARGV 数组。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T11:32:08.843

这`s/a/b/i`是一个运算符，而不仅仅是一个正则表达式，因此`eval`如果您希望正确解释它，则需要使用它。

```
#!/usr/bin/env perl

use warnings;
use strict;

my $regex = shift;
my $sub = eval "sub { \$_[0] =~ $regex; }";

foreach my $file (@ARGV) {
    &$sub($file);
    print "OUTPUT: $file\n";
} 
```

这里的诀窍是我将这个“代码位”替换为一个字符串以生成定义匿名子例程`$_[0] =~ s/a/b/i;`（或您传递的任何代码）的 Perl 代码，然后使用它`eval`来编译该代码并给我一个代码参考，我可以从循环内调用。

```
$ test.pl 's/foo/bar/' foo nicefood
OUTPUT: bar
OUTPUT: nicebard

$ test.pl 'tr/o/e/' foo nicefood
OUTPUT: fee
OUTPUT: nicefeed 
```

这比`eval "\$file =~ $regex;"`在循环中放置一个更有效，因为它会在每次迭代时被编译和评估，而不是只在前面一次。

一个警告`eval`- 正如raina77ow的回答所解释的那样，`eval`除非你100％确定你总是从可信赖的来源获得你的意见，否则你应该避免......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T11:17:06.437

`s/a/b/i`不是正则表达式。这是一个正则表达式加替换。除非您使用字符串[eval](http://p3rl.org/eval)，否则使这项工作可能非常困难（考虑`s{a}<b>e`等等）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-14T14:20:34.873

问题是当你真正需要传递的只是参数时，你试图传递一个 perl 运算符：

```
myscript hi bye hi.h 
```

在脚本中：

```
my ($find, $replace, @files) = @ARGV;
...
$file =~ s/$find/$replace/i; 
```

你的代码有点笨拙。这就是你所需要的：

```
use strict;
use warnings;

my ($find, $replace, @files) = @ARGV;
for my $file (@files) {
    $file =~ s/$find/$replace/i;
    print "$file\n";
} 
```

请注意，这种方式允许您在正则表达式中使用元字符，例如`\w{2}foo?`. 这既可以是好事，也可以是坏事。要使所有字符按字面意思解释（禁用元字符），您可以`\Q ... \E`像这样使用：

```
... s/\Q$find\E/$replace/i; 
```

# jersey - @Produces/provider 媒体类型匹配

> ID：12423340
> 
> 赞同：0
> 
> 时间：2012-09-14T11:11:16.160
> 
> 标签：jersey

我正在试验 api verioning 并且有一个非常特殊的要求来解决。我们将为此使用内容协商，即 @Produces 注释，我想要一个格式为 @Produces({"th/v1-v10+xml"}) 的自定义媒体类型，其中 v1-v10 告诉这个 api将服务任何带有“th/v1+xml”、“th/v2+xml”的Accept标头的请求，一直到“th/v10+xml”。

我知道这有点奇怪，但我们的想法是，我们在生产中所做的每个 drop 都将是客户端的新版本，但并非每个服务都会被修改。所以我想用一个范围来注释服务，这样我就不必为每一滴都复制它，即使它没有改变。

所以我想知道有什么方法可以在匹配@Path 和@Produces 注释的同时拦截Jersey 中的登录？我知道我不能使用正则表达式来匹配媒体类型。

…………

更多研究告诉我，Jersey 调用 MediaType.isCompatible(MediaType other) 方法来确定请求接受标头和服务提供者媒体类型之间的兼容性。

如果我可以创建自定义 MediaType 并覆盖 isCompatible 方法，则可以稍微利用这一点。泽西岛是否允许这样的扩展？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T00:04:13.927

您可能必须使用自定义响应映射器。

1.- 创建一个实现 MessageBodyWriter 的类，负责编写响应

```
@Provider
public class MyResponseTypeMapper 
  implements MessageBodyWriter<MyResponseObjectType> {
     @Override
     public boolean isWriteable(final Class<?> type,final Type genericType,
                final Annotation[] annotations,
                final MediaType mediaType) {
       ... use one of the arguments (either the type, an annotation or the MediaType)
           to guess if the object shoud be written with this class
     }
     @Override
     public long getSize(final MyResponseObjectType myObjectTypeInstance,
                     final Class<?> type,final Type genericType,
                         final Annotation[] annotations,
                     final MediaType mediaType) {
        // return the exact response length if you know it... -1 otherwise
        return -1;
    }
    @Override
    public void writeTo(final MyResponseObjectType myObjectTypeInstance,
                    final Class<?> type,final Type genericType,
                    final Annotation[] annotations, 
                    final MediaType mediaType,
                    final MultivaluedMap<String,Object> httpHeaders,
                    final OutputStream entityStream) throws IOException,                                                                 WebApplicationException {
        ... serialize / marshall the MyResponseObjectType instance using
            whatever you like (jaxb, etC)
        entityStream.write(serializedObj.getBytes());
    }
} 
```

2.- 在您的应用中注册映射器

```
public class MyRESTApp 
     extends Application  {
    @Override
public Set<Class<?>> getClasses() {
        Set<Class<?>> s = new HashSet<Class<?>>();
        s.add(MyResponseTypeMapper.class);
        return s;
    }
} 
```

Jersey 将扫描所有已注册的调用其 isWriteable() 方法的映射器，直到一个返回 true...如果是这样，此 MessageBodyWriter 实例将用于将内容序列化到客户端

# java - Java Web 应用程序：如何在报告中显示客户端生成的系统时间

> ID：12423341
> 
> 赞同：0
> 
> 时间：2012-09-14T11:11:15.383
> 
> 标签：java, web-applications, jasper-reports

在每一页中，我想显示打印日期。我用过`new Date()`，但它显示的是服务器的系统时间。我想显示当前系统时间（客户端）。

如何在*JR*报告中打印这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T22:16:35.173

不要使用小程序，您可以使用一点 JavaScript。

看到这个问题：[在表单输入字段中自动插入日期和时间？](https://stackoverflow.com/questions/1001937/auto-insert-date-and-time-in-form-input-field)

例如：

```
<form action="generate_report" method="post">
  <input id="report_date" name="report_date" />
</form>

<script type="text/javascript">
  document.getElementById('report_date').value = Date();
</script> 
```

将 的值传递`report_date`到报告的参数列表中。

# python - 如何在 selenium 中使用 python webdriver 从 csv 文件中调用多个数据

> ID：12423349
> 
> 赞同：1
> 
> 时间：2012-09-14T11:11:30.090
> 
> 标签：python, selenium-webdriver

我在单一登录凭据中使用代码。我需要使用 python webdriver 使用多个登录凭据。请指导我如何在下面的代码中调用 csv 文件（多个登录凭据）。

```
 from selenium import webdriver
 from selenium.webdriver.common.by import By
 from selenium.webdriver.support.ui import Select
 from selenium.common.exceptions import NoSuchElementException
 import unittest, time, re

 class Browse(unittest.TestCase):
    def setUp(self):
        self.driver = webdriver.Firefox()
        self.driver.implicitly_wait(30)
        self.base_url = "http://careergrab.ionface.com/"
        self.username=['senthil@gmail.com','senthil@gmail.com']
        self.password=['12345','12345']
        self.verificationErrors = []

    def test_browse(self):
        driver = self.driver
        driver.get(self.base_url + "/")
        driver.find_element_by_css_selector("img[alt=\"img\"]").click()
        driver.find_element_by_link_text("Career Grab").click()
        driver.find_element_by_class_name("browse").click()
        driver.find_element_by_id("id_identification").clear()
        driver.find_element_by_id("id_identification").send_keys(self.username)
        for index in range(len(self.password)):
        driver.find_element_by_id("id_password").clear()
        driver.set_page_load_timeout
        driver.find_element_by_id("id_password").send_keys(self.password)
        driver.find_element_by_css_selector("input.login-button").click()

    def is_element_present(self, how, what):
        try: self.driver.find_element(by=how, value=what)
        except NoSuchElementException, e: return False
        return True

    def tearDown(self):
        self.driver.quit()
        self.assertEqual([], self.verificationErrors) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:54:59.903

我找到了解决方案。您需要创建文件 test.csv。复制并粘贴下面的代码。它对我有用。阅读代码以更好地理解:)

```
 from selenium import webdriver
    from selenium.webdriver.common.by import By
    from selenium.webdriver.support.ui import Select
    from selenium.common.exceptions import NoSuchElementException
    import unittest, time, re

    class Browse(unittest.TestCase):
    def setUp(self):
    self.driver = webdriver.Firefox()
    self.driver.implicitly_wait(30)
    self.base_url = "http://careergrab.ionface.com/"

    filename = 'test.csv'
    line_number = 1
    with open(filename, 'rb') as f:
        mycsv = csv.reader(f)
        mycsv = list(mycsv)
        self.username=mycsv[line_number][0]
        self.password=mycsv[line_number][1]
        self.verificationErrors = []

def test_browse(self):
    driver = self.driver
    driver.get(self.base_url + "/")
    driver.find_element_by_css_selector("img[alt=\"img\"]").click()
    driver.find_element_by_link_text("Career Grab").click()
    driver.find_element_by_class_name("browse").click()
    driver.find_element_by_id("id_identification").clear()
    driver.find_element_by_id("id_identification").send_keys(self.username)
    for index in range(len(self.password)):
    driver.find_element_by_id("id_password").clear()
    driver.set_page_load_timeout
    driver.find_element_by_id("id_password").send_keys(self.password)
    driver.find_element_by_css_selector("input.login-button").click()

def is_element_present(self, how, what):
    try: self.driver.find_element(by=how, value=what)
    except NoSuchElementException, e: return False
    return True

def tearDown(self):
    self.driver.quit()
    self.assertEqual([], self.verificationErrors) 
```

# android - 如何在 android 中从 twitter 获取 Access_Token？

> ID：12423353
> 
> 赞同：0
> 
> 时间：2012-09-14T11:11:38.437
> 
> 标签：android, twitter4j

我有一些代码及其登录或注销的工作，但我想获取 access_tonken 并将其存储在数据库中。

**我的代码：**

```
private void onTwitterClick() {

    if (mTwitter.hasAccessToken()) {
        final AlertDialog.Builder builder = new AlertDialog.Builder(this);

        builder.setMessage("Delete current Twitter connection?").setCancelable(false).setPositiveButton("Yes", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                mTwitter.resetAccessToken();
                mTwitterBtn.setChecked(false);
                mTwitterBtn.setText("  Twitter (Not connected)");
                mTwitterBtn.setTextColor(Color.GRAY);
            }
        })
        .setNegativeButton("No", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                dialog.cancel();

                mTwitterBtn.setChecked(true);
            }
        });
        final AlertDialog alert = builder.create();
        alert.show();
    } else {
        mTwitterBtn.setChecked(false);
        mTwitter.authorize();   
        // mTwitter.processToken(callbackUrl);        
    }
} 
```

如何获得 access_token ？有什么解决办法？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:02:18.137

访问令牌返回到您的“callbackUrl”并存在很短的会话时间。您不能将其存储在数据库中。

# ruby-on-rails-3 - Rails Devise - 从另一个控制器更新列

> ID：12423354
> 
> 赞同：0
> 
> 时间：2012-09-14T11:11:42.180
> 
> 标签：ruby-on-rails-3, devise

Rails 3.0
遵循以下说明： [https](https://github.com/plataformatec/devise/wiki/How-To%3a-Require-admin-to-activate-account-before-sign_in) ://github.com/plataformatec/devise/wiki/How-To%3a-Require-admin-to-activate-account-before-sign_in 我已经生成了迁移：已批准（布尔值）对于我的设计 user.rb。现在我想使用来自不同控制器的复选框对其进行编辑：unapproved_users_controller.rb。
当我在编辑中加载表单时，出现此错误：未定义的方法“user_path”。

**routes.rb**，我的新控制器的资源

```
resources :unapproved_users 
```

**app/models/user.rb**，注意 :approved 是 attr_accessible。

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me, :approved

  def active_for_authentication? 
    super && approved? 
  end 

  def inactive_message 
    if !approved? 
      :not_approved 
    else 
      super # Use whatever other message 
    end 
  end

  def self.send_reset_password_instructions(attributes={})
    recoverable = find_or_initialize_with_errors(reset_password_keys, attributes, :not_found)
    if !recoverable.approved?
      recoverable.errors[:base] << I18n.t("devise.failure.not_approved")
    elsif recoverable.persisted?
      recoverable.send_reset_password_instructions
    end
    recoverable
  end
end 
```

**应用程序/控制器/unapproved_controllers.rb**

```
class UnapprovedUsersController < ApplicationController

  def index
    if params[:approved] == "false"
      @users = User.find_all_by_approved(false)
    else
      @users = User.all
    end
  end

  def edit
    @user = User.find(params[:id])
  end

  def update
    @user = User.find(params[:id])
    @user.update_attributes(params[:user])
  end  

end 
```

**app/views/unapproved_users/index.html.haml**

```
%h1 Users

= link_to "All Users", :action => "index"
|
= link_to "Users awaiting approval", :action => "index", :approved => "false"

%table
    - @users.each do |user|
        %tr
            %td= user.email
            %td= user.approved
            %td= link_to "Edit", edit_unapproved_user_path(user) 
```

**app/views/unapproved_users/edit.html.haml**

```
= render 'form' 
```

**app/views/unapproved_users/_form.html.haml**

```
= form_for (@user) do |f|

  -if @user.errors.any?
    #error_explanation
      %h2= "#{pluralize(@user.errors.count, "error")} prohibited this user from being saved:"
      %ul
        - @user.errors.full_messages.each do |msg|
          %li= msg

  .field
    = f.label :approved, 'Approved?'
    = f.check_box :approved 
  .actions
    = f.submit 'Save' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:16:53.643

您需要更改 form_for。

它应该是

```
= form_for(@user, :url => unapproved_user_path(@user)) do |f| 
```

# c# - 内联方法仍然比手动重构（合并）到相同的方法慢吗？

> ID：12423356
> 
> 赞同：1
> 
> 时间：2012-09-14T11:11:44.760
> 
> 标签：c#, inline

我曾经认为如果一个方法是内联的，那么理论上它与方法和调用方法的合并是相同的，但基准测试显示性能略有不同

例如，这需要 100 毫秒

```
 public long TestA()
    {
        long ret = 0;
        for (int n = 0; n < testSize; n++)
        {
            for (int i = 0; i < a; i++)
                for (int j = 0; j < b; j++)
                {
                    ret += myArray[i][j];
                }
        }
        return ret;
    } 
```

这需要 110 毫秒（如果我强制`MethodImplOptions.NoInlining`打开，`GetIt`那么它将是 400 毫秒，所以我假设它是自动内联的）

```
 public long TestB()
    {
        long ret = 0;
        for (int n = 0; n < testSize; n++)
        {
            for (int i = 0; i < a; i++)
                for (int j = 0; j < b; j++)
                {
                    ret += GetIt(i, j);
                }
        }
        return ret;
    }

    int GetIt(int x, int y)
    {
        return myArray[x][y];
    } 
```

好的，我附上我使用的基准函数片段

```
 public static void RunTests(Func<long> myTest)
    {
        const int numTrials = 100;
        Stopwatch sw = new Stopwatch();
        double[] sample = new double[numTrials];

        Console.WriteLine("Checksum is {0:N0}", myTest());

        sw.Start();
        myTest();
        sw.Stop();

        Console.WriteLine("Estimated time per test is {0:N0} ticks\n", sw.ElapsedTicks);
        if (sw.ElapsedTicks < 100)
        {
            Console.WriteLine("Ticks per test is less than 100 ticks. Suggest increase testSize.");
            return;
        }

        if (sw.ElapsedTicks > 10000)
        {
            Console.WriteLine("Ticks per test is more than 10,000 ticks. Suggest decrease testSize.");
            return;
        }

        for (int i = 0; i < numTrials / 3; i++)
        {
            myTest();
        }

        string testName = myTest.Method.Name;
        Console.WriteLine("----> Starting benchmark {0}\n", myTest.Method.Name);
        for (int i = 0; i < numTrials; i++)
        {
            GC.Collect();
            GC.WaitForPendingFinalizers();

            sw.Restart();
            myTest();
            sw.Stop();
            sample[i] = sw.ElapsedTicks;
        }
        double testResult = DataSetAnalysis.Report(sample);
        DataSetAnalysis.ConsistencyAnalyze(sample, 0.1);
        Console.WriteLine();

        for (int j = 0; j < numTrials; j = j + 5)
            Console.WriteLine("{0,8:N0} {1,8:N0} {2,8:N0} {3,8:N0} {4,8:N0}", sample[j], sample[j + 1], sample[j + 2], sample[j + 3], sample[j + 4]);
        Console.WriteLine("\n----> End of benchmark");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:33:10.093

生成的 IL 指令数略有不同，maxstack 显着不同：

```
TestA:
// Code size       78 (0x4e)
.maxstack  2

TestB:
// Code size       88 (0x58)
.maxstack  4

GetIt:
// Code size       7 (0x7)
.maxstack  1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T23:10:37.667

C#在**JIT处****内联**，因此无论是否内**联****IL**都不会改变。

 ******`MethodImplOptions.NoInlining`与`inline`F# 中的关键字不同******

# c# - 空白 DVD/蓝光光盘 (IMAPI) 上的可用空间

> ID：12423357
> 
> 赞同：10
> 
> 时间：2012-09-14T11:11:48.343
> 
> 标签：c#, .net, imapi

由于我最初的问题有点太模糊，让我澄清一下。

我的目标是：

1.  通过 IMAPI 选择文件系统后估计空白磁盘大小
2.  如果我刻录它，估计我的文件将在这张光盘上消耗的空间。

我想知道的：

1.  是否可以以编程方式获取所选文件系统的每个扇区的字节数
2.  如果没有，IMAPI 用于不同文件系统/媒体类型的每个扇区的字节数是否有默认值，并且是否记录在某处。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T08:12:44.643

好的，所以对我的问题的简短回答是：可以放心地假设，DVD/BD 光盘的扇区大小 = 2048 字节。

原因，为什么我在调试会话期间得到不同的大小，是因为代码中的错误，它检索到的扇区数:)

提到的代码块是从[http://www.codeproject.com/Articles/24544/Burning-and-Erasing-CD-DVD-Blu-ray-Media-with-C-an](http://www.codeproject.com/Articles/24544/Burning-and-Erasing-CD-DVD-Blu-ray-Media-with-C-an)复制粘贴的，所以以防万一我快速发布使固定。

原始代码：

```
discFormatData = new MsftDiscFormat2Data();
discFormatData.Recorder = discRecorder;
IMAPI_MEDIA_PHYSICAL_TYPE mediaType = discFormatData.CurrentPhysicalMediaType;
fileSystemImage = new MsftFileSystemImage();
fileSystemImage.ChooseImageDefaultsForMediaType(mediaType);
if (!discFormatData.MediaHeuristicallyBlank)
{
     fileSystemImage.MultisessionInterfaces = discFormatData.MultisessionInterfaces;
     fileSystemImage.ImportFileSystem();
}
Int64 freeMediaBlocks = fileSystemImage.FreeMediaBlocks; 
```

固定代码：

```
discFormatData = new MsftDiscFormat2Data { Recorder = discRecorder };
fileSystemImage = new MsftFileSystemImage();
fileSystemImage.ChooseImageDefaults(discRecorder);
if (!discFormatData.MediaHeuristicallyBlank)
{
    fileSystemImage.MultisessionInterfaces = discFormatData.MultisessionInterfaces;
    fileSystemImage.ImportFileSystem();
}
Int64 freeMediaBlocks = fileSystemImage.FreeMediaBlocks; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:03:00.360

如果您知道可用/已用块和存储卷的总大小（忽略已用/可用空间），那么您可以计算每个块的大小，然后计算其余部分。

```
block size = total size / (blocks used + blocks free)
free space = size per block * blocks free 
```

如果您发现块大小不是 1K，我会感到惊讶

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T15:49:17.413

通过 IMAPI - IWriteEngine2::get_BytesPerSector

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa832661(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa832661(v=vs.85).aspx)

该项目使用托管 IMAPI2 包装器让生活更轻松 - [http://www.codeproject.com/Articles/24544/Burning-and-Erasing-CD-DVD-Blu-ray-Media-with-C-an](http://www.codeproject.com/Articles/24544/Burning-and-Erasing-CD-DVD-Blu-ray-Media-with-C-an)

# asp.net-mvc - 如何在 mvc 的控制器中对会话变量进行单元测试

> ID：12423360
> 
> 赞同：3
> 
> 时间：2012-09-14T11:11:52.043
> 
> 标签：asp.net-mvc, unit-testing, session-variables, httpcontext

我正在对我的控制器进行单元测试。

在我的一种控制器方法中，我正在设置会话变量：

```
public void Index()
{       Session["foo"] = "bar";
        return View();
} 
```

我怎样才能对此进行单元测试？问题是测试时 Session 属性为空。无法注入，因为 Session 属性是只读的。

我不想使用任何第三方工具或模拟。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T14:16:43.907

只需不要在控制器方法中使用 Session["foo"] 之类的东西。最佳实践是让操作方法不知道任何类似上下文的全局对象。你的行动方法需要的一切都应该以论证的形式提供给她。请注意，模型绑定的内置机制的工作方式与此完全相同——您不使用 Request.Form[]，而是让“幕后的人”将其作为参数传递给您的操作。

现在对于会话，您可以执行相同的操作 - 编写非常简单的 ValueProvider，它将知道如何识别您想要从会话中填充的参数，然后您就完成了。在生产中，您的操作将与会话一起使用，在测试中，您不能简单地将任何您想要的值作为参数传递给它们。

如需灵感，请查看[http://www.prideparrot.com/blog/archive/2012/7/how_to_create_a_custom_session_value_provider](http://www.prideparrot.com/blog/archive/2012/7/how_to_create_a_custom_session_value_provider)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T11:23:36.257

> 无法注入，因为 Session 属性是只读的。

这意味着您不能使用 setter 注入，但您可以使用构造函数注入，即为您的控制器添加一个构造函数，类似于：

```
MyController(Session session)
{
    m_session = session;

    // then call your main constructor
}

Session getSession()
{
    return m_session;
} 
```

然后，您可以在测试期间使用这个单独的构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-09T09:15:03.627

我同意@rouen。不要直接使用 Session["foo"]。但我认为拥有 ValueProvider ans 可能不是一个实用的解决方案，因为我们只存储很少的变量，而这些值可能是并且很可能不是您的完整模型。所以我的方法类似于 Vic Smith 的建议，但对 IOC（和 Mock）更友好。

我会创建一个提供者（即服务）来检索会话变量

```
public class SessionVariableProvider : ISessionVariableProvider
    {
        public object GetSessionValue(string key)
        {
            if (!HttpContext.Current.Session.IsNewSession 
                    && HttpContext.Current.Session[key] != null)
                {
                    return HttpContext.Current.Session[key];
                }
                throw new ArgumentNullException(key);
        }
        public void SetSessionValue(string key, object value)
        {
            HttpContext.Current.Session[key] = value;
        }
    }
    public interface ISessionVariableProvider
    {
        object GetSessionValue(string key);
        void SetSessionValue(string key, object value);
    } 
```

修改您的控制器期望 ISessionVariableProvider 作为参数。

```
public class TestController: Controller
    {
        protected readonly ISessionVariableProvider _sessionVariableProvider;

        protected InowiaControllerBase(ISessionVariableProvider sessionVariableProvider)
        {
            Guard.ArgumentNotNull(sessionVariableProvider, "sessionVariableProvider");

            this._sessionVariableProvider = sessionVariableProvider;
        }
        public ActionResult Index()
        {       
            _sessionVariableProvider.SetSessionValue("foo", "bar");
            var foo2 = (string)_sessionVariableProvider.GetSessionValue("foo2");
            return View();
        }
    } 
```

测试时创建自己的 ISessionVariableProvider 测试实现并将其传递给控制器​​。

# java - 将 Vaadin 6.7.9 更新到 6.7.10 和 NamingEnumeration

> ID：12423362
> 
> 赞同：0
> 
> 时间：2012-09-14T11:11:56.680
> 
> 标签：java, liferay, vaadin

当我将 Vaadin 6.7.9 更新到 6.7.10 或 6.8++ 时，我遇到了一个奇怪的问题。

**错误**

```
Caused by: java.lang.NullPointerException
                at com.sun.jndi.ldap.LdapCtx.getSearchReply(Unknown Source)
                at com.sun.jndi.ldap.LdapNamingEnumeration.getNextBatch(Unknown Source)
                at com.sun.jndi.ldap.LdapNamingEnumeration.hasMoreImpl(Unknown Source)
                at com.sun.jndi.ldap.LdapNamingEnumeration.hasMore(Unknown Source)
                at com.sun.jndi.ldap.LdapNamingEnumeration.hasMoreElements(Unknown Source)
                at java.util.Collections.list(Unknown Source)
                at -----------------------------.getGroups(---.java:804) 
```

**获取组（）**

```
NamingEnumeration<SearchResult> answer = this.searchObjects(filter,
                             LDAPGroup.getObjectClasses(),
                             env.getProperty("ldap.root.group"));

getGroups(): 804 ArrayList results = Collections.list(answer); 
```

**搜索对象（...）**

```
NamingEnumeration<SearchResult> answer;
      if(filter != null){
        answer = this.getDirctx().search(searchroot, filterstring, getSearchControls(filter.getLevel()));
      }
      else{
        answer = this.getDirctx().search(searchroot, filterstring, getSearchControls(-1));
      }

return answer; 
```

**来自 javax.​naming.​directory.​DirContext.search(...) 的 Java Doc**

```
Returns:
an enumeration of SearchResult objects
Throws:
NamingException - if a naming exception is encountered 
```

答案不能为空。这是不可能的。vaadin 是否更改了 6.7.10 版本中使用或实现 NamingEnumeration 或其他可能导致此问题的任何依赖项？

环境：

*   终生 5.2.3
*   LDAP
*   Vaadin - 6.6.0 - 没有错误
*   Vaadin - 6.6.8 - 没有错误
*   Vaadin - 6.7.0 - 没有错误
*   Vaadin - 6.7.5 - 没有错误
*   Vaadin - 6.7.9 - 没有错误
*   Vaadin - 6.7.10 - 错误
*   Vaadin - 6.8.3 - 错误

# c# - 使用来自 ASP 控件的值动态构建 href

> ID：12423363
> 
> 赞同：0
> 
> 时间：2012-09-14T11:11:58.907
> 
> 标签：c#, html, webforms, href, markup

我正在尝试使用 asp 控件呈现元素的标记，同时避免使用代码隐藏。所以我想动态生成 href 属性以包含从 FieldValue 控件 (SharePointWebControls) 呈现的内容。

因此，例如，我有这个控件：

```
<SharePointWebControls:FieldValue id="PageTitle" FieldName="Title" runat="server"/> 
```

表现为：

**“测试页”**

我在同一页面上有一个链接，如下所示：

```
<a href="http://www.mysite.com/mypage.aspx?title=TestPage">CLICK HERE!</a> 
```

但在`<a>`元素上方 - 由于我的`FieldValue`控件呈现的内容，我需要 TestPage 在那里；所以我基本上需要一种将这个控件的输出“嵌入”到`<a>`元素的 href 属性中的方法。

渲染的版本没有任何杂乱的标记`FieldValue`- 它实际上只是文本 - 所以我假设这并不复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:52:50.827

不熟悉 SP 控件，但我猜当您尝试将控件嵌入到 href 中时，编译器会停在双引号上。

也许您可以尝试用这样的单引号替换 href 的双引号：

```
<a href='http://www.mysite.com/mypage.aspx?title=<SharePointWebControls:FieldValue id="PageTitle" FieldName="Title" runat="server"/>'>CLICK HERE!</a> 
```

（请注意，如果您的文本中有引号，它将失败）

我看到的另一个解决方案是使用一些 js/jquery（实际上几乎相同的解决方案）：

```
$('selectorForYourA').attr("href", 'http://www.mysite.com/mypage.aspx?title=<SharePointWebControls:FieldValue id="PageTitle" FieldName="Title" runat="server"/>'); 
```

# html - div 横向溢出，内部有其他 div

> ID：12423365
> 
> 赞同：1
> 
> 时间：2012-09-14T11:12:18.207
> 
> 标签：html, scroll, scrollbar

我有：

```
.events-cont {
    width:100%;
    height:250px;
    overflow:scroll;
    overflow-y:hidden;
    float:left;
    position:relative;
    margin-top:20px;
    display:block
}

.events {
    width:210px;
    height:250px;
    position:relative;
    float:left;
    margin:0 10px;
    padding:0;
    border-right:3px #666 solid;
} 
```

我想要一个横向滚动的manys .events div，就像链接中的img一样。 [http://i.stack.imgur.com/tEyrY.jpg](http://i.stack.imgur.com/tEyrY.jpg)：

# php - Digg 风格分页类

> ID：12423367
> 
> 赞同：0
> 
> 时间：2012-09-14T11:12:21.260
> 
> 标签：php, digg

我是 PHP 新手，最近几天一直在尝试构建我的第一个项目，它主要作为博客工作 - 只是为了让我对如何查询数据库等有所了解。

我现在希望能够在我的页面上对结果进行分页，这就是我目前所拥有的：

```
<?php
include_once 'inc/functions.inc.php';
include_once 'inc/db.inc.php';

$db = new PDO(DB_INFO, DB_USER, DB_PASS);

$id = (isset($_GET["id"])) ? (int) $_GET["id"] : NULL;

$e = retrievePosts($db, $id);

$fulldisp = array_pop($e);
?>
<div id="blogposts">
    <?php
    if ($fulldisp == 1) {
        ?>
        <span class="postdate"><?php echo $e["date"] ?></span>
        <span class="posttitle"><?php echo $e["title"] ?></span>
        <br/>
        <br/>
        <span class="postbody">
            <?php echo $e["body"] ?>
        </span>
        <?php
    }//end if
    else {
        foreach ($e as $entry) {
            ?>
            <div class="postholder">
                <span class="postdate"><?php echo $entry["date"] ?></span>
                <span class="posttitle">
                    <a href="?id=<?php echo $entry['id'] ?>"><?php echo $entry['title'] ?></a>
                </span>
                <br/>
                <br/>
                <span class="postbody">
        <?php echo $entry["resume"] ?>
                </span>
            </div>
                    <?php
                }//end foreach
            }//end 
            ?>
</div> 
```

这是我的功能：

```
<?php

function retrievePosts($db, $id = NULL) {
    if (isset($id)) { //se foi fornecido ID
        $sql = "SELECT title, body, date
            FROM blog
            WHERE id=?
            LIMIT 1";
        $stmt = $db->prepare($sql);
        $stmt->execute(array($_GET["id"]));

        $e = $stmt->fetch(); //guardar em array
        $fulldisp = 1; //uma só entrada
    } 
    else 
    {
        $sql = "SELECT id, title, resume, date
            FROM blog
            ORDER BY date DESC";   

        foreach($db->query($sql) as $row) 
        {
            $e[] = array("id" => $row["id"], "title" => $row["title"], "resume" => $row["resume"], "date" => $row["date"]);
        }
        $fulldisp = 0; //multiplas entradas
    }
    //funçoes só retornam um valor, inserimos fulldisp no fim de $e e separamos
    //os valores de novo no index.php
    array_push($e, $fulldisp);
    return $e;
}

?> 
```

它的工作方式是，页面是根据 URL 构建的：

如果那里有 id，则仅显示该 ID 的内容。

如果 URL 中没有 id，它现在会显示页面中的所有条目。

我现在希望能够对这些条目进行分页，所以在查看了 Stackoverflow 之后，似乎最流行的解决方案是使用**Digg Style Pagination Class**，记录在这里： http: [//mis-algoritmos.com/digg-style -分页类](http://mis-algoritmos.com/digg-style-pagination-class)

我已经下载了这个类，但我不知道如何让它正常工作，我对这个类没有数据库查询这一事实感到困惑（我希望它使用 LIMIT），我想知道 Stack 上的任何人是否可以帮助我在我的代码上实现这个类，或者是否有一个关于如何做到这一点的有据可查的来源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:34:39.577

```
function retrievePosts($db, $id = NULL, $page = 1, $rpp = 5) {
    if (isset($id)) { //se foi fornecido ID
        $sql = "SELECT title, body, date
            FROM blog
            WHERE id=?
            LIMIT 1";
        $stmt = $db->prepare($sql);
        $stmt->execute(array($id));

        $e = $stmt->fetch(); //guardar em array
        $fulldisp = 1; //uma só entrada
    }
    else
    {
        if(!is_numeric($page)) {
            $page = 1;
        }

        if(!is_numeric($rpp)) {
            $rpp = 5;
        }

        $sql = "SELECT id, title, resume, date
            FROM blog
            ORDER BY date DESC
            LIMIT ?
            OFFSET ?
        ";

        $stmt = $db->prepare($sql);
        $stmt->execute(array($page, $rpp * $page));

        foreach($stmt->fetch() as $row)
        {
            $e[] = array("id" => $row["id"], "title" => $row["title"], "resume" => $row["resume"], "date" => $row["date"]);
        }
        $fulldisp = 0; //multiplas entradas
    }
    //funçoes só retornam um valor, inserimos fulldisp no fim de $e e separamos
    //os valores de novo no index.php
    array_push($e, $fulldisp);
    return $e;
} 
```

$rpp - 每页记录

我也认为：

```
$stmt->execute(array($_GET["id"])); 
```

应该：

```
$stmt->execute(array($id)); 
```

# python - python多代理模拟包

> ID：12423372
> 
> 赞同：3
> 
> 时间：2012-09-14T11:12:34.283
> 
> 标签：python, agent

Python中是否有任何可用于模拟市场行为的多代理模拟包？我尝试安装 SimPy，但似乎不合适。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T04:47:36.037

[http://www.activestate.com/blog/2010/06/must-have-python-packages-finance](http://www.activestate.com/blog/2010/06/must-have-python-packages-finance)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-16T21:52:27.753

如果有人用谷歌搜索这个问题，我最近遇到了这个包：[https](https://github.com/javipalanca/spade) ://github.com/javipalanca/spade 。它有一个很好的书状教程，不仅解释了用法，而且解释了它背后的概念。

我在 Python 中看不到很多其他选项，如果有人可以展示其他选项，我将不胜感激。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-13T13:50:10.877

试试**Mesa**，一个 Python 中的多智能体模拟包：

*   [https://mesa.readthedocs.io/en/master/index.html](https://mesa.readthedocs.io/en/master/index.html)
*   [https://github.com/projectmesa/mesa](https://github.com/projectmesa/mesa)

# c# - Windows Phone 不支持此文件类型。我该怎么办？

> ID：12423373
> 
> 赞同：1
> 
> 时间：2012-09-14T11:12:35.797
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

我正在使用 C# 开发 Windows Phone 7 应用程序。应用程序必须下载 torrent 文件。所以它的扩展名为“.torrent”。但是 Windows Phone 不支持 torrent 文件。所以它说“无法下载文件。Windows Phone 不支持支持这种文件类型。” 我能做些什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:43:23.690

没有办法在 Windows Phone 7 中添加自定义扩展的处理程序。根据泄露的 SDK 的传言，这可能在 Windows Phone 8 中是可能的（但尚未正式宣布）。所以现在，你无能为力。

# vim - 如何在 Lua 代码中格式化 LuaDoc 多行注释

> ID：12423374
> 
> 赞同：3
> 
> 时间：2012-09-14T11:12:40.897
> 
> 标签：vim, lua, luadoc

我有一个很长的 Lua (LuaDoc) 注释，我想使用 VIM 命令 'qgap' 将其转换为多行注释。猜想 .vimrc 中有一些带有格式注释的解决方案，但我自己无法弄清楚。

例子：

```
--- This is a very long LuaDoc comment line which I want to break into many lines 
```

应成为：

```
--- This is a very long Lua doc  
-- comment line which I want to  
-- break into many lines 
```

# regex - Javascript RegExp 查找有条件但不显示它们

> ID：12423379
> 
> 赞同：1
> 
> 时间：2012-09-14T11:12:56.910
> 
> 标签：regex, grouping, conditional-statements

我试图找到括号之间的单词。

```
var str = "asdfasdfkjh {{word1}} asdf fff fffff {{word2}} asdfasdf";
var pattern = /{{\w*}}/g;
var str.match(pattern);  // ["{{word1}}","{{word2}}"] 
```

这结束了交易，但用括号给出了它，我不想要它们。当然，如果我在结果上使用本机替换，我可以删除它们。但我希望正则表达式做同样的事情。

我也试过： var pattern = /(?:{{)(\w*)(?:}})/g

但我找不到真正的交易。你可以帮帮我吗？

编辑：我可能需要添加一个注释，说明这些词是动态的

解决方案：

基于 Tim Piezcker awnser，我提供了这个解决方案：

```
var arr = [],      
re = /{{(\w?)}}/g,item;

while (item = re.exec(s))
arr.push(item[1]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:23:12.570

在大多数正则表达式风格中，您可以使用环视断言：

```
(?<={{)\w*(?=}}) 
```

不幸的是，JavaScript 不支持后向断言，因此您不能使用它们。

但是您建议的正则表达式可以通过访问第一个捕获组来使用：

```
var pattern = /{{(\w*)}}/g;
var match = pattern.exec(subject);
if (match != null) {
    result = match[1];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T11:21:58.287

一个快速而肮脏的解决方案是`/[^{]+(?=\}\})/`，但是如果省略前大括号会导致一些混乱，并且也会匹配`{word1}}`。如果我没记错的话，JavaScript 不支持后视，在这种情况下有点遗憾。

# jquery - jQuery 检测 .find(' ').text() 是否已定义

> ID：12423381
> 
> 赞同：4
> 
> 时间：2012-09-14T11:13:07.690
> 
> 标签：jquery, string, object, undefined, typeof

我有这样的代码

```
if ($('#bar #username').text()!=$('.widget-' + widget.id).find('.user').text())
{
//do something
} 
```

`$('.widget-' + widget.id).find('.user').text()`不幸的是，如果不存在/欠精细，它就不会通过。

如何检查它是否已定义？

我试图`if (typeof $('.widget-' + widget.id).find('.user') === "undefined")`检查它是否已定义，但它没有帮助，因为

`alert (typeof $('.widget-' + widget.id).find('.user'))`显示`Object`，

`alert (typeof $('.widget-' + widget.id).find('.user').text())`显示`String`。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-14T11:15:01.340

根据[jQuery FAQ](http://learn.jquery.com/using-jquery-core/faq/how-do-i-test-whether-an-element-exists/)，检查`length`属性：

```
if ($('.widget-' + widget.id).find('.user').length) {
    // it exists
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T11:15:10.607

如果您想查看一个 jQuery 对象是否匹配任何 DOM 元素，请使用`$("whatever").length`-- 它将是非零的。

# php - 我如何知道在 HTML 表单中选择了哪个选项？

> ID：12423389
> 
> 赞同：1
> 
> 时间：2012-09-14T11:13:55.523
> 
> 标签：php, html, forms, radio-button, multi-step

我想要一个包含 HTML 和 PHP 的多步骤表单。我的表单的第一步是一个选项，例如：

```
<input type="radio" name="service_type" value="plan1"> Plan 1<br />
<input type="radio" name="service_type" value="plan2"> Plan 2 
```

现在，我的问题是：如何知道选择了哪个选项，以便为用户安排下一步选项？

例如：如果用户选择选项 1，下一步将是：“你选择了选项 1，告诉我谁是你的爸爸”。如果用户选择选项 2，下一步会说：“欢迎使用选项 2，告诉我你喜欢什么”等。

现在，我完全是 PHP/HTML 的初学者，对 javascript 一无所知。如果您要回答这个问题，我将非常感激，但请以易于理解的方式回答。

我已经发现[这](http://www.phpriot.com/articles/multi-step-wizards)与我的案例有关，但是很难自定义，并且验证过程是 CSS3 之前的。

[编辑：]

现在我想像这样添加一个文本类型的输入：

```
<input type="text" name="fname" value="firstname"> 
```

这些人告诉我要使用`$_POST['fname']`，但对于输入文本，“值”属性将像默认标题一样显示在文本框内。我不想要这个。

现在你有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:15:36.767

在您的 PHP 代码中，使用`$_GET`（或`$_POST`或 `$_REQUEST - 获取 GET 或 POST 表单）返回值：

```
$serveiceType=$_REQUEST['service_type']; 
```

由于这是一个单选按钮，因此只能发送一个值，并且发送的值很容易访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T11:15:44.013

值来自`$_REQUEST`：

```
$step = $_REQUEST['service_type']; // plan1 or plan2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T11:17:33.403

首先，您`input`必须在`form`标签中。现在您可以使用提交按钮提交表单（输入标签，type="submit"）。在 php 中，您可以使用 $_POST 或 $_GET 获得结果。

```
<form method="POST">
    <input type="radio" name="service_type" value="plan1"> Plan 1<br />
    <input type="radio" name="service_type" value="plan2"> Plan 2
    <input type="submit" />
</form>
<?php
    $value = $_POST['service_type'];
    echo $value;
?> 
```

# c++ - 二维数组初始化

> ID：12423395
> 
> 赞同：0
> 
> 时间：2012-09-14T11:14:41.263
> 
> 标签：c++, pointers

情况1：

```
int nrows=5;
int ncols=10;
int **rowptr;
rowptr=new int*;
for(int rows=0;rows<nrows;rows++) {
  for(int cols=0;cols<ncols;cols++) {
    *rowptr=new int;
  }
} 
```

案例2：

```
int nrows=5;
int ncols=10;
int **rowptr;
for(int rows=0;rows<nrows;rows++) {
  rowptr=new int*;
  for(int cols=0;cols<ncols;cols++) {
    *rowptr=new int;
  }
} 
```

我能够使用两种方式插入和打印值。初始化有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:21:46.540

> **有什么区别？**

`#1`只是分配足够的内存来保存一个整数指针，而不是一个整数指针数组。
`#2`仅通过覆盖上一次迭代的内存分配导致内存泄漏。

> **我可以使用这两种方式插入和打印值**

内存泄漏和未定义行为可能不会在您的程序中立即产生可观察到的错误结果，但它们肯定是***[墨菲定律](http://en.wikipedia.org/wiki/Murphy%27s_law)***的好例子。

正确的方法是：

```
int nrows = 5;
int ncols = 10;

//Allocate enough memory for an array of integer pointers
int **rowptr = new int*[nrows]; 

//loop through the array and create the second dimension
for (int i = 0;i < nrows;i++)
    rowptr[i] = new int[ncols]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T11:23:17.127

在这两种情况下都有内存泄漏。

初始化这种“二维”数组的正确方法是

```
int** arr = new int*[nrows];
for (int i = 0; i < nrows; i++)
   arr[i] = new int[ncols]; 
```

但是请注意，它不是 C/C++ 定义的二维数组。它可能不会，也可能不会，在内存中是连续的。此外，访问成员的汇编代码也不同。

在您的情况下，通过索引访问相当于`*(*(arr+i)+j)`

在二维数组的情况下，它`*(arr + N_COLS*i + j)`是`N_COLS`编译时间常数。

如果你想要一个真正的二维数组，你应该这样做：

```
int (*arr)[N_COLS] = (int(*)[N_COLS])(new int[N_ROWS * N_COLS]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T12:16:29.523

你最好使用一维数组来管理二维数组

```
int **x = new int*[nrows];
x[0] = new int[nrows*ncols];
for (int i = 1; i < nrows; i++)
    x[i] = x[i-1] + ncols;

for (int i = 0; i < nrows; i++)
    for (int j = 0; j < ncols; j++)
        x[i][j] = 0;

delete [] x[0];
delete [] x; 
```

# php - php $fopen 错误

> ID：12423396
> 
> 赞同：0
> 
> 时间：2012-09-14T11:14:41.963
> 
> 标签：php, linux, fopen, die

我跑

```
lynx -dump 'http://k.tr.com/1234.php?MSISDN=************&USERNAME=****&PASSWORD=****&MESSAGE=TEST' 
```

写入文件 1234.txt；但是我收到错误无法访问在 1234.php 文件中的语句中定义为的文件

```
$fp=fopen("/var/log/logfiles/1234.txt","a") or die ("cant access file"); 
```

我该如何解决这个问题？错误？该文件的权限为 644；

我需要将主服务器中的文件副本创建到备份服务器上。所以我运行了 scp；但是当我在主服务器上检查同一文件的文件权限时，我发现它们与显示 Uid 和 Gid 的备份服务器不同；主服务器上的这些详细信息是：

访问:(0644/-rw-r--r--) Uid:(33/www-data) Gid:(0/root)

我尝试更改为 chmod 654、777 和 655，但我得到了同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:18:34.457

如果 Web 服务器以有权访问 /var/log/logfiles 的同一用户身份运行，则可以将文件权限设置为 755，否则需要 777。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:19:30.073

您正在请求写入文件的权限“a”，并且您的文件仅对所有者具有写入权限。

您是否以创建文件的用户身份运行脚本？

如果没有，请这样做。如果不能，请更改执行脚本的用户所属的其他人（最后一个八进制）或组（第二个八进制）的文件权限。

所以，尝试使用`chmod 654`or `chmod 655`on`1234.txt`

# ios - 有没有办法在支持 iPhone 5 的应用程序中简单地使用图像？

> ID：12423397
> 
> 赞同：5
> 
> 时间：2012-09-14T11:14:45.430
> 
> 标签：ios, retina-display, iphone-5

> **可能重复：**
> [iPhone 5 - 新图像必须遵循什么命名约定？](https://stackoverflow.com/questions/12431445/iphone-5-what-naming-convention-the-new-images-have-to-follow)

我刚刚下载了新的 xcode，并为新的屏幕尺寸添加了新的初始屏幕。所以现在我有 3 个文件：

Default.png, Default@2x.png, Default-568h@2x.png

到目前为止，如果我想用它制作 UIImage，我可以简单地这样做：

```
UIImage *img = [UIImage imageNamed: @"Default"]; 
```

并且 Default.png 或 Default@2x.png 会根据应用程序执行的 iphone 类型自动选择。但是现在有了新的屏幕尺寸，当然它仍然适用于普通屏幕/视网膜屏幕，但不适用于 4" 屏幕。我该如何检测应用程序何时在 iphone 5 上运行，然后使用 *-568h 图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:43:18.267

您只需要添加`Default-568h@2x.png`图片，大小为`640 x 1136 px`. 在 Xcode 4.5 中，您还可以在目标摘要中找到 4" 启动图像的新字段。

# hadoop - 在 pig 脚本中定义元组数据

> ID：12423399
> 
> 赞同：14
> 
> 时间：2012-09-14T11:14:56.480
> 
> 标签：hadoop, apache-pig

我目前正在调试一个猪脚本。我想直接在 Pig 文件中定义一个元组（而不是基本的“加载”函数）。

有没有办法做到这一点？

我正在寻找类似的东西：

```
A= ('name#bob'','age#29';'name#paul','age#12') 
```

转储将返回：

```
('bob',29)
('paul',12) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-07T21:29:10.537

事实上，按照目前的情况在猪身上做这件事是不可能的。如果您只想调试在 hadoop 中创建一个文件并加载它。将您想要的数据写入文件（如果可能的话，您将手动创建的任何内容）并上传。然后使用 pig 加载它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-19T00:03:56.217

以下（肮脏的）技巧可以完成这项工作： - 创建一个包含一个空行的文件并将其存储到您的 HDFS。- 加载它： Line = load /user/toto/onelinefile USING .. - 创建自己的数据：foreach 行生成 'bob' 作为名称，22 作为年龄；

# c# - 数字登录

> ID：12423402
> 
> 赞同：1
> 
> 时间：2012-09-14T11:15:00.650
> 
> 标签：c#

我在 VS2010 中开发了一个类库（Image Viewer）并创建了一个 setup/msi，它使用 cabarc.exe 创建了一个 .cab 文件并集成到一个网站中，并且在所有机器（包括客户端机器）上都可以正常工作。

我们从威瑞信获得了 .pfx 文件格式的新证书，并在安装程序中登录了所有文件（viewer.dll、setup.exe、Viewer.msi 和其他第三方 dll，如 abcpdf8.dll），没有任何问题/错误。并在类文件中添加了带有以下代码的证书，没有失败。

```
 **X509Certificate2Collection collection = new X509Certificate2Collection();
        collection.Import(certPath, certPass, X509KeyStorageFlags.PersistKeySet);
        foreach (X509Certificate2 cert in collection)
        {
            X509Store store = new X509Store(StoreName.TrustedPublisher/TrusetedPeople, StoreLocation.LocalMachine);
            store.Open(OpenFlags.ReadWrite);
            store.Add(cert);
            store.Close();
        }** 
```

成功验证所有 dll 和 exe/msi。

问题是：

1.  许可证包创作工具 (LPK_Tool.exe) 的“可用控件”中不提供为此控件创建 .lpk 文件。

2.  它在 Manage Add-ons (Internet Explorer) 中显示为**(Not Verified) Publisher Name**。

3.  它显示安全警告，例如“此页面上的 ActiveX 控件可能不安全，无法与页面的其他部分交互。您要允许此交互吗？”

任何帮助表示赞赏。

提前致谢。约翰

# php - 限制从数据库字段检索的字符

> ID：12423407
> 
> 赞同：5
> 
> 时间：2012-09-14T11:15:12.103
> 
> 标签：php, string, character, echo

我是 PHP 新手。

我正在使用带有 ACF（高级自定义字段）的 Wordpress，因此我从字段中获取的任何数据都使用以下代码：

```
echo $fieldname; 
```

这些字段之一是有关某事的信息，我想做的是限制检索到的字符数量，以便仅显示 150 个字符。

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:18:24.470

你可以用[substr](http://php.net/manual/en/function.substr.php)做到这一点：

```
$str = "Aliquam odio eros, consectetur eu euismod faucibus, venenatis lobortis nulla. Pellentesque libero massa, bibendum in tempus ut, pretium et ante. In bibendum volutpat porta. ";

echo substr($str, 0, 150); 
```

但是如果你有一个很长的字符串，那么你可能想在一个单词之后剪掉它。您可以为此使用以下功能（当它太长时它将切断 str 并将其`...`放在后面）：

```
function truncate_string($str, $length) {
    if (!(strlen($str) <= $length)) {
        $str = substr($str, 0, strpos($str, ' ', $length)) . '...';
    }

    return $str;
} 
```

* * *

## **客户端**

您也可以在客户端执行此操作。我不知道你想达到什么目的，但如果它是一个标题或其他东西，并且你不希望它太长并破坏你的布局，那么你可以使用 CSS3 `text-overflow`：[jsFiddle 示例](http://jsfiddle.net/V3c9V/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:22:15.020

如果您关心剪切以便不想剪切单词内的句子，则可以使用此功能：

```
function safeShrinkText($text, $length = 100, $suffix = '...')
{
    $text = strip_tags($text);
    if ($length > strlen($text)) {
        return $text;
    }

    while (!isset($text[$length]) || $text[$length] != ' ' && $length != 0) {
        $length--;
    }

    return mb_substr($text, 0, $length) . $suffix;
} 
```

这个函数不会剪切单词里面的句子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:17:14.397

您可以在 PHP中使用[substr](http://php.net/manual/en/function.substr.php)

```
$fieldname = substr($fieldname, 0, 150); 
```

要不就

```
echo substr($fieldname, 0, 150); 
```

或者，限制您的数据库查询返回的字符数，例如[MySQL](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_left)和 MS SQL 都具有`LEFT(..)`限制返回数据的功能。

IE

```
SELECT LEFT(FieldName, 150) AS FieldName FROM MyTable WHERE ... 
```

# android - 如何将视图溢出到下一行，而不是消失在未知中

> ID：12423409
> 
> 赞同：0
> 
> 时间：2012-09-14T11:15:17.247
> 
> 标签：android, layout, textview

我正在尝试将 TextViews 放入屏幕中，以便每个 textview 包含一个长句的 1 个单词。

这是一个很长的句子，长到屏幕上都放不下。

这里`fit in the screen`有 4 个文本视图，我需要移到下一行。基本上，这样我就可以获得每个单词的点击事件（因为我需要支持 Android 2.2，而 Spannable 需要 2.2 不支持的 getX 和 getY）。

布局

```
 <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_marginLeft="20dp"
            android:layout_marginRight="20dp"
            android:fitsSystemWindows="true"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/word1"
                style="@style/select_part_of_speech_word" />

            <TextView
                android:id="@+id/word2"
                style="@style/select_part_of_speech_word" />
..... more TextViews.....
            <TextView
                android:id="@+id/word15"
                style="@style/select_part_of_speech_word" />
        </LinearLayout> 
```

应用样式

```
<style name="select_part_of_speech_word" parent="@android:style/TextAppearance.Medium">
    <item name="android:layout_width">wrap_content</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_marginBottom">10dp</item>
    <item name="android:layout_marginTop">10dp</item>
    <item name="android:text">@string/randomTutorialText</item>
    <item name="android:textColor">@android:color/black</item>
    <item name="android:textSize">25sp</item>
    <item name="android:visibility">visible</item>
    <item name="android:lines">1</item>
</style> 
```

有了这个，文本视图似乎就消失了。我想如果我使用水平滚动视图，我将能够查看所有 15 个文本视图，但我需要它们溢出到下面的下一个可用空间。这可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:03:09.260

所以你想要一个相当于 FlowLayout 的东西。

你可以试试 Romain Guy 的[实现](http://code.google.com/p/devoxx-schedule/source/browse/devoxx-android-client/src/net/peterkuterna/android/apps/devoxxsched/ui/widget/FlowLayout.java?name=422c381967&r=422c38196733ba3c54eb44418160e248ee1aea86)。

# c++ - 是否可以通过 long 而不是 CORBA::Long 等？

> ID：12423422
> 
> 赞同：1
> 
> 时间：2012-09-14T11:16:30.313
> 
> 标签：c++, type-conversion, corba

我无法在任何地方找到答案。问题很简单（？）。假设我有这样的功能：

```
class Sth {

private:
   long u;
public:
   void set(long u)
   {
    this.u = u;
   }

}; 
```

我像这样运行它：

```
Sth s;
CORBA::Long val = 5;
s.set(val); 
```

我可以这样做吗？一切都会好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:52:36.600

这应该没问题。[根据 IBM 参考资料](http://www.ibm.com/developerworks/webservices/library/co-corbajct3.html#h0)，IDL long 的范围为**-2^31 到 2^31-1**，大小**至少为 32 位**。

它应该本机转换为`long`c++。该标准没有定义大小，但定义了这些值可以容纳的最小范围。这`CORBA::Long`是一个 typedef `long`，它可能会在平台之间改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T14:08:50.163

您可以使用`int_least32_t`(from `<stdint.h>`, or `<cstdint>`)，它是保证至少 32 位宽的本机类型，并且 typedef'd 为适当的编译器本机类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T06:40:23.027

这取决于您使用的 IDL 到 C++ 映射的实现。在新的 IDL 到 C++11 的映射中，IDL 中的 long 映射到 int32_t。

# c# - 如何使用 MAPI 获取 Outlook 联系人组？

> ID：12423425
> 
> 赞同：4
> 
> 时间：2012-09-14T11:16:36.153
> 
> 标签：c#, outlook, contacts, mapi

在 Outlook 2010 中，您可以创建联系人并将其添加到组中。有没有办法获得这些组的列表和其中的联系人？以下是我访问联系人的方式：

```
var outlook = new Outlook.Application().GetNamespace("MAPI");
var folder = outlook.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderContacts);
foreach (var curr in folder.Items.OfType<Outlook.ContactItem>())
{
    ...
} 
```

我**不是**指默认的联系人文件夹，例如“联系人”和“建议的联系人”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T11:42:34.393

联系人组由[DistListItem Interface](http://msdn.microsoft.com/en-us/library/bb645382)表示。`DistListItem`接口具有遍历组成员的`MemberCount`属性和方法。`GetMember()`

```
var outlook = new Application().GetNamespace("MAPI");
var folder = outlook.GetDefaultFolder(OlDefaultFolders.olFolderContacts);
foreach (var curr in folder.Items.OfType<DistListItem>())
{
    Console.WriteLine(curr.DLName);

    for (int memberIdx = 1; memberIdx <= curr.MemberCount; memberIdx++)
    {
        var member = curr.GetMember(memberIdx);
        Console.WriteLine(member.Name);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T10:22:09.450

你可以试试这个

```
 DataTable dt = new DataTable();
            dt.Columns.Add("FirstName");
            dt.Columns.Add("MiddleName");
            dt.Columns.Add("LastName");
            dt.Columns.Add("Email");

            Microsoft.Office.Interop.Outlook.Items OutlookItems;
            Microsoft.Office.Interop.Outlook.Application outlookObj = new Microsoft.Office.Interop.Outlook.Application();
            MAPIFolder Folder_Contacts = (MAPIFolder)outlookObj.Session.GetDefaultFolder(OlDefaultFolders.olFolderContacts);
            OutlookItems = Folder_Contacts.Items;

            foreach (var item in OutlookItems)
            {
                var contact = item as ContactItem;
                if (contact != null)
                {
                    DataRow dr = dt.NewRow();
                    dr["FirstName"] = contact.FirstName;
                    dr["MiddleName"] = contact.MiddleName;
                    dr["LastName"] = contact.LastName;
                    dr["Email"] = contact.Email1Address;
                    dt.Rows.Add(dr);
                }
            } 
```

# join - 如何在 FSharp 查询表达式中使用复合键子句编写连接？

> ID：12423426
> 
> 赞同：6
> 
> 时间：2012-09-14T11:16:40.860
> 
> 标签：join, f#, clause, c#-to-f#

如何在 F# 中使用复合键子句编写此 C# 连接？：

```
join k in DataContext.Catalogs on
   new { id = o.IDENT, v = o.VZ } equals
   new { id = k.IDENT, v = k.VZ } 
```

这是与此类似的问题： [在 F# 3.0 查询中对多个列进行分组](https://stackoverflow.com/questions/8650463/groupby-multiple-columns-in-a-f-3-0-query) ，但仍未得到回答。但我不敢相信用 FSharp 编写它并不容易。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T17:41:53.740

使用包含所需关键字段的元组：

```
query {
  for o in DataContext.OTable do
  join k in DataContext.Catalogs on
   ((o.IDENT, o.VZ) = (k.IDENT, k.VZ))
  select (o.IDENT, k.VZ)
} 
```

请注意，您不能像在 C# 中那样在 F# 中创建具有命名字段的匿名类型。元组可能是最接近和最惯用的翻译。[在此处](https://stackoverflow.com/a/8144299/1366219)查看托马斯的回答。

# asp.net - asp.net 4.0 应用程序中的错误 Page.GetRouteUrl()。URL路由的任何帮助

> ID：12423428
> 
> 赞同：4
> 
> 时间：2012-09-14T11:16:52.500
> 
> 标签：asp.net, .net-4.0, routes

我正在使用 Web 表单创建 asp.net Web 应用程序，我正在使用注册路由到产品友好的 URL。

以下是 Global.asax.cs 中的代码；

void Application_Start(object sender, EventArgs e) { // 在应用程序启动时运行的代码 RegisterRoutes(RouteTable.Routes); }

```
 void RegisterRoutes(RouteCollection routes)
    {
        // Register a route for Categories/All
        routes.MapPageRoute(
           "All Categories",      // Route name
           "Categories/All",      // Route URL
           "~/AllCategories.aspx" // Web page to handle route
        );

        // Route to handle Categories/{CategoryName}. 
        // The {*CategoryName} instructs the route to match all content after the first slash, which is needed b/c some category names contain a slash, as in the category "Meat/Produce"
        // See http://forums.asp.net/p/1417546/3131024.aspx for more information
        routes.MapPageRoute(
           "View Category",               // Route name
           "Categories/{*CategoryName}",  // Route URL
           "~/CategoryProducts.aspx"      // Web page to handle route
        );
        // Register a route for Products/{ProductName}
        routes.MapPageRoute(
           "View All Product",           // Route name
           "Products", // Route URL
           "~/ViewProducts.aspx"      // Web page to handle route
        );

        // Register a route for Products/{ProductName}
        routes.MapPageRoute(
           "View Product",           // Route name
           "Product/{ProductName}", // Route URL
           "~/ViewProduct.aspx"      // Web page to handle route
        );

        // Register a route for Products/{ProductName}
        routes.MapPageRoute(
           "Add Product",           // Route name
           "NewProduct", // Route URL
           "~/AddProduct.aspx"      // Web page to handle route
        );

    } 
```

现在在我放的一页中

```
 lnkNewProduct.NavigateUrl = Page.GetRouteUrl("Add Product"); 
```

当我运行项目时，它会产生错误的 href url。

谁能告诉为什么会这样？目前它显示的 URL 像 http:\localhost:5770\Categories\All?Length=11... 这很难理解。

任何提示或帮助？？？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T01:50:42.380

您需要使用正确的重载：

```
Page.GetRouteUrl("Add Products", null); 
```

此`GetRouteUrl`重载使用*RouteName*。

您还可以使用 Route Url 表达式：

[http://msdn.microsoft.com/en-us/library/system.web.compilation.routeurlexpressionbuilder.aspx](http://msdn.microsoft.com/en-us/library/system.web.compilation.routeurlexpressionbuilder.aspx)

# jquery - 选择列表不适用于特定于 IE8

> ID：12423433
> 
> 赞同：0
> 
> 时间：2012-09-14T11:17:04.930
> 
> 标签：jquery, drop-down-menu, jquery-selectors, html-select

为什么以下在 IE8 上不起作用而在所有其他浏览器上都起作用。

```
$(function () {

        //add binding to dropdowns
        $("#PersonsId").change(function () {
            $('option:selected', this).attr('selected', true).siblings().removeAttr('selected');
            //set value on hidden text field           
            if ($(this)[0].selectedIndex > 0) {                    
                $(this).parent().next().val($(this).find("option:selected").text());
            }
            else {
                $(this).parent().next().val("");
            }
        });
    }); 
```

也许这不是最好的解决方案，所以我问你如何改变这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:43:13.000

线

```
 $('option:selected', this).attr('selected', true).siblings().removeAttr('selected'); 
```

不需要，因为当您选择该选项时，默认情况下未选择其余选项。要将值设置为隐藏字段，请使用以下代码

$("输入[type='hidden']").val($(this).val());

# perl - 如何在新文件 perl 中打印输出

> ID：12423437
> 
> 赞同：-3
> 
> 时间：2012-09-14T11:17:14.400
> 
> 标签：perl

如何在目录中打印变量 $newFile 的输出？我怎样才能使用'cp'来做到这一点？修改后，我的代码如下所示：

```
#!/usr/bin/perl

use strict;
use warnings;
use Data::Dumper;
use File::Copy 'cp';

# binmode(STDOUT, ":utf8") ;
# warn Dumper \@repertoire;

my @rep= glob('/home/test/Bureau/Perl/Test/*'); # output to copy in this dir
foreach my $file (@rep)
{
    open(IN, $file) or die "Can't read file '$file' [$!]\n";
    while (<IN>)
    {
    my ($firstCol, $secondCol) = split(/","/, $_); 

    $firstCol =~ s/http:\/\//_/g;
    $secondCol =~ s/\(.+\)/ /ig;
    my $LCsecondCol = lc($secondCol);
    chomp($secondCol);
    chomp($LCsecondCol);
    my $newFile = "$firstCol:($secondCol|$LCsecondCol);";
    $newFile =~ s/=//g;
    print "$newFile\n";

    }
    close(IN);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T11:43:34.747

您的程序距离编译还有很长的路要走。这些细节你要注意

*   `use strict`就地，应该是，您必须在首次使用时声明所有变量。变量`@files`,`$file`和`$newFile`未声明，因此您的程序无法编译

*   `glob`在标量上下文中返回与模式匹配的*下一个*文件名，并且用于`while`循环。要获取与您应该分配给数组的模式匹配的所有文件，并且从注释掉的`warn`语句中看起来您的代码曾经是这种方式

*   您应该使用词法文件句柄和`open`. 检查状态并`open`放入字符串做得很好`$!``die`

*   您的`$file =~ ...`行看起来应该是替换，末尾的括号应该是分号

*   您已使用`File::Copy`但随后用于`system`复制您的文件。您应该避免在方便的地方进行炮击，并且由于`File::Copy`提供了一个`cp`功能，因此您应该使用它

更接近代码工作版本的东西看起来像这样

```
use strict;
use warnings;

use File::Copy 'cp';

while (my $fileName = glob '/home/test/Bureau/Infobox/*.csv') {

    my @files = do {
        open my $in, '<', $fileName or die "Can't read file '$fileName' [$!]\n";
        print "$fileName\n" ;
        <$in>;
    };

    foreach my $file (@files) {
        my $newFile = $file =~ s/(\x{0625}\x{0646}\b.+?)\./[[    ]]/gr;
        cp $file, $newFile;
    }
} 
```

# java - 在桌面应用程序中管理登录会话：在哪一层？

> ID：12423438
> 
> 赞同：5
> 
> 时间：2012-09-14T11:17:19.223
> 
> 标签：java, session, layer, session-timeout

我必须满足以下要求：

> [...]如果登录的用户闲置超过 30 分钟，他必须退出。

其中*空闲*表示“不按鼠标或键盘”。

现在，当我第一次阅读它时，我很确定如何实现这一点：对我来说，这听起来像是与业务逻辑有关的需求，所以我应该在业务层实现它（具有 3 层架构） .
这里有一些代码：

```
// simplified and generalized version of my login method
public boolean login(String email, String password) {
    user = dao.read(email, password); //returns either null or the user
    boolean logged = user != null;
    if (logged) {
       // initialize Session somehow, let's say for example:
        Session.start();
    }
    return logged;
}

// simplified and generalized version of my logout method
public void logout() {
    operatore = null;
    // terminate Session somehow, let's say for example:
    Session.destroy();
} 
```

这将是理想的，但有一个问题：`Session`应该知道如何检测用户不活动（然后触发`logout()`方法）......但不幸的是，这完全取决于 GUI 的制作方式！
[要明确一点：我知道我要实现这一点，但我想独立于我如何实现 UI（例如 Java Swing、命令行、基于 Web 等）来完成它]

我的意思是，业务层不能（也不应该）捕获用户事件/交互，所以我应该`Session`在 GUI 包中实现***并*** *从那里使用它*：在我的设计中，一个层应该只与其严格的下层接口交互，并且不应该知道任何更高级别（数据访问层是独立的（嗯，它依赖于数据库和其他持久性机制），业务层只依赖于数据访问层接口，表示层只依赖于业务层接口）。

问题是，我认为在表示层中实现业务逻辑需求的一部分对我来说是错误的。

顺便说一句，会话到期可能与表示逻辑有太多关系，因为必须“听”用户输入。

这让我想起了前段时间我自己回答的另一个相关问题，但为了避免任何疑问，我也会问这个问题：[link to the question](https://stackoverflow.com/questions/12423767/business-layer-and-presentation-layer-responsibilities)。

我想听听一些有价值的意见，主要集中在良好的设计实践上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:28:18.273

正如要求所说

> 如果登录的用户空闲超过 30 分钟，他必须退出。

所以这里的输入是键盘或鼠标活动。当然这属于表示层。

在 Web 应用场景中，鼠标/键盘活动 (Utility) 模块触发会话超时。

我们可以使用观察者/监听者模式。如果是java

[http://www.vogella.com/articles/DesignPatternObserver/article.html](http://www.vogella.com/articles/DesignPatternObserver/article.html)会有所帮助

使用 httpsession 监听器，我们可以将此活动传递到业务层。这意味着您可以调用业务层功能来进行清理。

在桌面场景中，我们可以使用可以使用类似模式的 Swing 应用程序。

所以重点是表示层根据实用程序类提供的输入通知其他层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-15T16:07:37.200

它甚至可以变得更令人兴奋。不同屏幕上的不同超时（可能是显示视频的屏幕，因此在视频打开时将超时放在一边）。不同用户的不同超时（对于某些用户永远不应该超时）。无需登录即可访问的屏幕，但应用程序应“超时”并返回“主”屏幕。

我最终将业务层应用程序注册到演示控件中的“活动”。不是一个美丽的网站。很高兴看到一个好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-20T22:56:54.393

两个都。

您的业​​务层只需要知道有一些用户活动——它不一定需要知道该活动是什么或该活动是如何被触发的（甚至它来自哪里）。

```
public class Session {
    ...
    public static void keepAlive() {
        // update last activity fields with new timestamp
    }
    ....
} 
```

每当您的表示层接收到某种类型的输入（鼠标移动、鼠标单击、按键等）时，就由该层中的对象通知业务层发生了某些事情。

为了使事情分开，您可能希望向 Session 对象添加一些事件。

```
public interface SessionExpiringEventHandler {
    void sessionExpiring();
}

public interface SessionExpiredEventHandler {
    void sessionExpired();
}

public class Session {
    ...
    private List<SessionExpiringEventHandler> expiringHandlers;
    private List<SessionExpiredEventHandler> expiredHandlers;
    ...
    public static void addExpiringEventHandler(SessionExpiringEventHandler h) {
        expiringHandlers.add(h);
    }
    public static void addExpiredEventHandler(SessionExpiredEventHandler h) {
        expiredHandlers.add(h);
    }
    ....
} 
```

这样，当 Session 对象过期（或即将过期）会话时，它可以循环遍历相应事件的所有事件处理程序并调用它们。这将让你保持你的层分开。

# javascript - f.call 和 f() 有什么区别

> ID：12423441
> 
> 赞同：2
> 
> 时间：2012-09-14T11:17:29.413
> 
> 标签：javascript

我曾经在js中使用匿名自执行功能：

```
((function(){
  //do something
})(); 
```

但是我在某处发现了这个：

```
((function(){
  //do something
}).call(this); 
```

有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:23:45.643

如果你通过`this`了，两种形式都是等价的。

但要查看差异，请查看下面的程序

```
var x = 5;
var o = { x: 10 };

function f()
{
    alert(this.x);
}

f();
f.call(o); 
```

> f() -> 将警告 5。
> 
> f.call(o) -> 将提醒 10。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:20:21.970

在第一个示例中，`this`它将是全局对象（`window`在浏览器领域），除非您处于 ES5 模式，否则它将是`undefined`.

在第二个示例中，`this`取决于`this`调用上下文*中的* `global`内容——（`undefined`在 ES5 中）***或***对象实例。

```
function Foo() {
    var that = this;

    (function () {
       console.log(this === window);
       console.log(this === that);
       console.log(typeof this === "undefined"); 
    }());

    (function () {
       console.log(this === window);
       console.log(this === that);
       console.log(typeof this === "undefined"); 
    }).call(this);

    (function () {
       "use strict";

       console.log(this === window);
       console.log(this === that); 
       console.log(typeof this === "undefined"); 
    }());
}

new Foo();​ 
```

[[小提琴](http://jsfiddle.net/UbsLz/1/)]

您还会发现`.call()`由于引擎必须做额外的工作来设置`this`上下文，调用在微观上会变慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:20:28.893

一个在默认对象的上下文中调用它（`window`在浏览器中），另一个在任何上下文中调用它`this`。除非您在某个其他函数或`with`块中，`this`否则将是默认对象，因此该特定示例没有区别。

上下文确定`this`函数内部分配的值。

# c - For循环中的分段错误

> ID：12423444
> 
> 赞同：1
> 
> 时间：2012-09-14T11:17:45.687
> 
> 标签：c, opencv, for-loop, segmentation-fault

我有以下代码在执行几次后继续给出分段错误。

```
//pasting second image
for(n32i=0;n32i<(SrcImageHeight2);n32i++)
{
  //printf("\n%di",i);
  for(n32j=0;n32j<(SrcImageWidth2);n32j++)
  { 
    int x=n32j;
    int y=n32i;  

    CvMat *tempMatrix1 = cvCreateMat(3,1,CV_32FC1);
    printf("\n Here ,  %d , %d , %d , %d ,%d ,%d , x = %d , y = %d" , n32k , n32j , n32i , SrcImageChannels2 , SrcImageWidth2 , SrcImageHeight2 , x, y);        
    CV_MAT_ELEM(*tempMatrix1, float,0,0) =x;
    printf("\n There ,  %d , %d , %d , %d ,%d ,%d" , n32k , n32j , n32i , SrcImageChannels2 , SrcImageWidth2 , SrcImageHeight2);        
    CV_MAT_ELEM(*tempMatrix1, float,1,0) =y;
    CV_MAT_ELEM(*tempMatrix1, float,2,0) =1;
    cvMatMul(matrixH,tempMatrix1,tempMatrix1);
    x=*((float *)CV_MAT_ELEM_PTR(*tempMatrix1,0,0))/ *((float *)CV_MAT_ELEM_PTR(*tempMatrix1,2,0));
    y=*((float *)CV_MAT_ELEM_PTR(*tempMatrix1,1,0))/ *((float *)CV_MAT_ELEM_PTR(*tempMatrix1,2,0));

    for(n32k=0;n32k<(SrcImageChannels2);n32k++)
    {   
        if(DstImageData[(y+h)*DstImageStep+(x+w)*DstImageChannels+n32k] ==0)
        {   
          DstImageData[(y+h)*DstImageStep+(x+w)*DstImageChannels+n32k]=SrcImageData2[n32i*SrcImageStep2+n32j*SrcImageChannels2+n32k];
        }
    }
  }
} 
```

错误就行了`CV_MAT_ELEM(*tempMatrix1, float,0,0) =x;`，我不明白它为什么会发生，因为它只是一个赋值，并且对于早期执行（即在错误之前执行）工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:29:25.760

听起来好像`cvCreateMat()`动态内存分配，但你没有：

1.  检查它是否成功
2.  完成后释放它。

这两者都很糟糕，它们加在一起非常糟糕。

# android - 如何在电子邮件应用程序中使用我的应用程序打开附件？（mime 类型，意图过滤器...）

> ID：12423446
> 
> 赞同：1
> 
> 时间：2012-09-14T11:17:44.973
> 
> 标签：android, mime-types, email-attachments, intentfilter

这可能看起来是重复的，但我想我已经尝试了大多数发布的解决方案，但都没有成功。

我正在编写一个应用程序，该应用程序有时会通过电子邮件发送带有自定义扩展名（.xyz）的文件

然后我需要从电子邮件应用程序打开这些文件，但我无法让它工作。

在阅读了本网站和其他网站上的大量帖子后，我想出了一个意图过滤器，它允许我从文件资源管理器（但不能从电子邮件应用程序）打开这些文件。

```
<intent-filter> 
                <action android:name="android.intent.action.VIEW" /> 
                <category android:name="android.intent.category.DEFAULT" /> 
                <category android:name="android.intent.category.BROWSABLE" /> 
                <data android:scheme="file" android:host="*" 
                    android:pathPattern=".*\\.xyz"/> 
 </intent-filter> 
```

然后我尝试**从网络浏览器**中打开电子邮件和附件，但没有成功。（文件已下载，但后来我无法打开它）。我在 LogCat 中遇到了这个错误

```
 09-14 12:30:50.516: D/DownloadManager(2341): android.content.ActivityNotFoundException:
    No Activity found to handle Intent 
{ act=android.intent.action.VIEW 
dat=file:///mnt/sdcard/download/samplefile.xyz 
typ=message/rfc822 flg=0x10000000 } 
```

虽然我觉得对文件使用 rfc822 mime 类型很奇怪，但我更改了意图过滤器并添加了

```
android:mimeType="message/rfc822" 
```

到数据部分。

然后我可以在从浏览器下载文件后打开文件，但我不能再从文件资源管理器打开文件（这有点道理）。

即使添加 android:mimeType=" */* " 也有相同的效果。（从 ASTRO 文件资源管理器中看到的文件的 mime 类型为空）。

但我真正需要的是从电子邮件应用程序中打开文件，而这些方法都没有帮助。打开电子邮件时，我什至无法单击附件。

我可能需要创建一个自定义 mime 类型，但我无法找到如何去做。

所以，问题是，我需要做什么才能用我的应用程序打开电子邮件附件（来自内置电子邮件应用程序）？

*   创建一个 MIME 类型？（如果有，怎么做？）
*   创建内容提供商？
*   两个都？（再次，如何？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:12:45.303

以防万一，有人遇到与我相同的问题，我终于能够让它工作。我遇到的问题是，在发送带有附件的电子邮件时，我使用的是 mime 类型“message/rfc822”。将其更改为“image/xyz”就可以了，当然还可以使用将 mime 类型设置为“*/*”的意图过滤器。

发送电子邮件时有一个不同的行为，您可以为每个可以发送的应用程序选择一个选择器，不仅是邮件应用程序（彩信、WhatsApp、蓝牙……），但在我的情况下它很好。

# android - 带有下一个和上一个按钮的 ViewSwitcher

> ID：12423448
> 
> 赞同：0
> 
> 时间：2012-09-14T11:17:59.157
> 
> 标签：android, android-imageview, android-view, android-image

我正在尝试`ViewSwitcher`像一个图像向导一样行事。

我的意思是会有下一个和上一个按钮来更改图像`ViewSwitcher`而不是画廊。我参考`API Demo`了 android 示例应用程序。

因为他们已经使用了`ViewSwitcher`，`Gallery`但我必须使用`Next`和`Prev`按钮。但我不知道该怎么做。

与他们使用的示例应用程序一样

```
Gallery g = (Gallery) findViewById(R.id.gallery);
g.setAdapter(new ImageAdapter(this));
g.setOnItemSelectedListener(this); 
```

在`ImageAdapter`ImageView 中不断添加新图像的位置，该图像本身位于 ViewSwitcher 中。那么我怎样才能对下一个和上一个按钮做同样的事情呢？

![示例应用程序屏幕](../Images/50030dd1a8cda4a0c462175969c01755.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:19:18.327

如果您使用 an`ImageSwitcher`这是一件非常简单的事情。你必须`Gallery`用你的两个替换`Buttons`并将它们链接到`ImageSwitcher`：

```
private int[] mImageIds= //.. the ids of the images to use
private int mCurrentPosition = 0; // an int to monitor the current image's position
private Button mPrevious, mNext; // our two buttons 
```

两者`buttons`将有两个`onClick` 回调：

```
public void goPrevious(View v) {
    mCurrentPosition -= 1;
    mViewSwitcher.setImageResource(mImageIds[mCurrentPosition]);
    // this is required to kep the Buttons in a valid state
    // so you don't pass the image array ids boundaries 
    if ((mCurrentPosition - 1) < 0) {
        mPrevious.setEnabled(false);
    }
    if (mCurrentPosition + 1 < mImageIds.length) {
        mNext.setEnabled(true);
    }
}

public void goNext(View v) {
    mCurrentPosition += 1;
    mViewSwitcher.setImageResource(mImageIds[mCurrentPosition]);
    // this is required to kep the Buttons in a valid state
    // so you don't pass the image array ids boundaries 
    if ((mCurrentPosition + 1) >= mImageIds.length) {
        mNext.setEnabled(false);
    }
    if (mCurrentPosition - 1 >= 0) {
        mPrevious.setEnabled(true);
    }
} 
```

您必须记住禁用方法`Button`中的前一个`onCreate`（因为我们从数组中的第一个图像开始）。

# android - Android 方法 TextUtils.regionMatches

> ID：12423449
> 
> 赞同：1
> 
> 时间：2012-09-14T11:18:00.387
> 
> 标签：android, charsequence, textutils

我找到了这个 android 方法 TextUtils.regionMatches

但是由于某种原因，尚不清楚该功能是如何工作的。

该函数可以在这里找到：http: [//developer.android.com/reference/android/text/TextUtils.html#regionMatches%28java.lang.CharSequence,%20int,%20java.lang.CharSequence,%20int,%20int %29](http://developer.android.com/reference/android/text/TextUtils.html#regionMatches%28java.lang.CharSequence,%20int,%20java.lang.CharSequence,%20int,%20int%29)

以及此方法的基本代码， [http://androidxref.com/4.1.1/xref/frameworks/base/core/java/android/text/TextUtils.java#220](http://androidxref.com/4.1.1/xref/frameworks/base/core/java/android/text/TextUtils.java#220)

感谢那些可能对如何调用函数有所了解的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:42:07.863

```
public static boolean regionMatches (CharSequence one,
                   int toffset, CharSequence two, int ooffset, int len) 
```

**示例代码：**

```
CharSequence one = "asdfQWERTYc1234";
CharSequence two = "ghjklzxcQWERTYg7890kl";
boolean match = TextUtils.regionMatches(one, 4, two, 8, 6); 
```

匹配是真的。

**解释：**

在字符序列一中，从`toffset`(4) 开始并获得等于`len`(6) => QWERTY的字符数

在字符序列二中，从`ooffset`(8) 开始，得到等于`len`(6) => QWERTY的字符数

两个字符序列都匹配，因此该方法返回 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-19T15:46:29.640

我写这个是为了在字符串的开头检查“http”，另一个例子总是可以帮助访问者。

```
url = "url.without/protocol.info"; // will match
// url = "http://url.with/protocol.info"; // won't match

String match = "http";
if(!url.regionMatches(true, 0, match, 0, match.length())) {
    //do something
} 
```

# jakarta-ee - JPA 继承策略已加入 - 子类中的 OneToOne 关系 - 为什么它不起作用？

> ID：12423452
> 
> 赞同：0
> 
> 时间：2012-09-14T11:18:09.893
> 
> 标签：jakarta-ee, inheritance, jpa, sap, one-to-one

我有 3 个由 JPA 模型表示的表。

第一：

```
@Entity
@Table(name = "DECISION")
@Inheritance(strategy = InheritanceType.JOINED)
public abstract class Decision {
    @Id
    private Long id;
} 
```

下一个类扩展了决策：

```
@Entity
@Table(name = "SPECIFIC_DECISION")
public class SpecificDecision extends Decision {
    @OneToOne
    @JoinColumn(name = "PERSON_ID")
    private Person person;
} 
```

最后一个是 Person，它只是一个带有人员信息的简单实体类。

现在，当我尝试从数据库中选择所有决策时，我收到一个错误信息，即持久性单元与数据库模式不一致，因为列 DECISION.PERSON_ID 不存在，而我在 SPECIFIC_DECISION 表中确实有它，这就是我映射它的方式在 JPA 模型中。

更有趣的是，如果 SpecificDecision 中没有关系，只有简单的 NUMBER 和 VARCHAR 字段，那么一切正常。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:21:30.813

看起来我的问题有解决方案。默认情况下，JPA 在基表中查找连接列。要更改此行为，需要 JoinColumn 注释中的属性“table”：

```
@Entity
@Table(name = "SPECIFIC_DECISION")
public class SpecificDecision extends Decision {
    @OneToOne
    @JoinColumn(table = "SPECIFIC_DECISION", name = "PERSON_ID")
    private Person person;
} 
```

问题解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:28:12.420

您没有定义 DiscriminatorColumn，我不确定是什么导致了您的问题，但根据 JPA 规范，即使某些提供商支持您不支持，您在使用 JOINED 策略时始终应该使用鉴别器。[链接以获取有关鉴别器的更多信息](http://en.wikibooks.org/wiki/Java_Persistence/Inheritance)

# jquery - 动画滚动效果 jQuery 插件

> ID：12423455
> 
> 赞同：0
> 
> 时间：2012-09-14T11:18:27.583
> 
> 标签：jquery, jquery-plugins

我使用了这个插件并去掉了一些不必要的代码，由于某些原因它在 FireFox 中不起作用。

原文来源：[http ://djpate.com/2011/01/01/animated-scrollto-effect-jquery-plugin/](http://djpate.com/2011/01/01/animated-scrollto-effect-jquery-plugin/)

我的代码：

```
(function (a) {
a.fn.slideto = function (b) {
    var c = {
        slide_duration: "slow",
        offset: 0
    }, b = a.extend(c, b);
    return this.each(function () {
        var c = !1;
        obj = a(this), a("body").animate({
            scrollTop: obj.offset().top + b.offset
        })
    })
}
})($); 
```

调用插件的代码：

```
$(document).ready(function(){
            $("#scroll").click(function(){
                $("#results").slideto();
            });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T16:06:00.810

问题是某些浏览器希望您滚动 html 而其他浏览器则希望您滚动正文。[如果在Quirk 的模式下](http://en.wikipedia.org/wiki/Quirks_mode)，他们甚至会改变这种期望。

您可以使用为您处理的[jquery.scrollTo](https://github.com/flesler/jquery.scrollTo)插件。

您需要包含插件，然后这样的事情会做：

```
$(document).ready(function(){
  $("#scroll").click(function() {
    $(window).scrollTo("#results", {duration:"slow", offset:0});
    return false;
  });
}); 
```

刚刚添加了您似乎感兴趣的设置，它提供了更多。

顺便说一句，您可能需要检查[jquery.localScroll](https://github.com/flesler/jquery.localScroll)它位于 scrollTo 顶部并使您的链接根据锚点自动滚动（fe <a href="#results">）

干杯

# java - Java 属性文件

> ID：12423458
> 
> 赞同：0
> 
> 时间：2012-09-14T11:18:58.597
> 
> 标签：java

我想知道，我可以在我的属性文件中对属性进行分组吗？这是我的属性文件的内容：

```
dbpassword=password
database=localhost
dbuser=mkyong 
```

我想向 dbpassword 添加超过 1 个密码。我可以做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:20:41.853

通常，您会使用某种手动“嵌套”来执行此操作：

```
foo.dbpassword=password
foo.database=localhost
foo.dbuser=mkyong

bar.dbpassword=...
... 
```

但老实说，当您有了层次结构时，您至少应该考虑使用更自然的层次结构文件格式 - XML 浮现在脑海中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T11:20:05.050

使用简单的属性文件，您必须使用

*   多个键（例如`pwd1`,`pwd2`等或`mybd1.pwd`,`mybd2.pwd`等）
*   带有分隔符和多个密码的值（例如`"mypass1 anotherpass"`）

假设您使用第二种方案，您可能会对通过[字符串拆分](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#split%28java.lang.String%29)来提取不同的密码感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:22:54.487

在属性文件中，

> dbpassword=password1,password2

在java文件中，

```
String[] dbpasswords = properties.getProperty("dbpassword").split(","); 
```

您应该[在 java.util.Properties 中的多个值中引用](https://stackoverflow.com/questions/1432481/multiple-values-in-java-util-properties)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T11:23:02.007

您可以将属性存储为 XML 文件。它会像：

```
<props>
    <database>
        <name>name1</name>
        <dbpass>pass1</dbpass>
        <dbuser>user1</dbuser>
    </database>
    <database>
        <name>name2</name>
        <dbpass>pass2</dbpass>
        <dbuser>user2</dbuser>
    </database>
</props> 
```

# c++ - 使用“无效”模板参数进行 C++ 元编程 - 是否允许？

> ID：12423460
> 
> 赞同：1
> 
> 时间：2012-09-14T11:19:10.863
> 
> 标签：c++, c++11, metaprogramming

在我使用元编程技术的一些代码中，我们使用模板化的参数，这些参数会被转发到其他地方并随后进行转换，因此我们从未真正创建其中一些类的实例。

特别是，我们使用`std::vector<T>`where T 没有要包含在向量中的语义。实际上，虽然我们创建了一个`std::vector<shared_ptr<T> >`.

代码看起来有点像这样：

```
class Bar : noncopyable
{ 
    // whatever
};

class Foo : public FooInterface
{
  public:
    explicit Foo( std::vector< shared_ptr<Bar> > );
};

typedef Builder1Param< FooInterface, Foo, std::vector<Bar> > FooBuilder; 
```

通过巧妙的元编程技术，FooBuilder 知道它将传递 a `vector<shared_ptr<Bar> >`to`Foo`而不是 a `vector<Bar>`. 问题是因为 Bar 是不可复制的，所以它是向量的无效类型。

现在代码在我使用过的任何编译器上都可以正常编译，但我想知道它是否是有效的 C++（并且将继续在 C++11 及更高版本中如此）。

我可能应该补充一点， Bar 实际上可能是抽象的（而且经常是抽象的）。目的是表明参数是这些参数的集合（在某种意义上是 Java/C# 引用的风格）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:26:31.627

只要你不实例化你在*技术上*没问题的类型，就像不完整类型一样。

然而，这是一个可怕的设计。

为了使使用更多按键来编写误导性内容而不仅仅是传递参数，所有这些扭曲成为可能。

我会重新考虑那个设计。

例如做

```
typedef Builder1Param< FooInterface, Foo, std::vector, Bar > FooBuilder; 
```

对于模板定义部分，`std::vector`这里是模板模板参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T16:00:59.883

在不符合要求`std::vector<Bar>`的程序中使用会产生未定义的行为。这是来自 C++11 标准中的 17.6.4.8 [res.on.functions]：`Bar``std::vector`

> 在某些情况下（替换函数、处理函数、用于实例化标准库模板组件的类型的操作），C++ 标准库依赖于 C++ 程序提供的组件。如果这些组件不满足其要求，则标准对实施没有要求。
> 
> 特别是，在以下情况下效果是不确定的：
> 
> ...
> 
> — 对于在实例化模板组件时用作模板参数的类型，如果对该类型的操作不实现适用的要求子条款（17.6.3.5、23.2、24.2、26.2）的语义。
> 
> ...
> 
> — 如果在实例化模板组件时将不完整类型 (3.9) 用作模板参数，除非该组件特别允许。

# java - 无法使用命令行选项 -DsocksProxyHost 运行 Java 程序

> ID：12423462
> 
> 赞同：0
> 
> 时间：2012-09-14T11:19:19.750
> 
> 标签：java, proxy

当我使用命令行选项运行 Java 程序时`-DsocksProxyHost 10.123.76.20`，出现错误：

```
java.lang.NoClassDefFoundError: 10/123/76/20
Caused by: java.lang.ClassNotFoundException: 10.123.76.20
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: 10.123.76.20\.  Program will exit.
Exception in thread "main" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:21:33.333

`-D`应按如下方式使用：

```
-DsocksProxyHost=10.123.76.20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T11:31:56.363

如果您在此处输入命令行，将会很有帮助。

要从命令行运行 Java 程序，您必须指定要调用的类。

假设您的程序位于**c:\program\my.jar**并且**com.myapp**是您要运行的类的全名，您应该这样做：

```
java -cp c:\program\my.jar com.myapp -DsocksProxyHost 10.123.76.20 
```

# css - IE7负位置问题

> ID：12423464
> 
> 赞同：0
> 
> 时间：2012-09-14T11:19:25.200
> 
> 标签：css, internet-explorer, internet-explorer-7

看看这个小提琴：http: [//jsfiddle.net/jvvmU/2/](http://jsfiddle.net/jvvmU/2/)

在 Firefox 和 IE7 中渲染它。在 Firefox 中，它工作正常，但在 IE 中，显示一个长滚动条。

如何修复这个错误？

**注意：**在横向模式下，我在基于 Android 的浏览器中也遇到了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:47:50.760

这里IE7不兼容的原因是html文档的宽度小于label元素的宽度`id="e"`。在您提供的小提琴中，视口宽度约为 660 像素，如果元素`e`为 660 像素或更小，则绿色框会像其他浏览器一样出现。

你想在这里达到什么目的？您确定 css 是实现目标的最佳方式吗？

# android - 加密邮件 - 没有为 S/MIME 配置提供程序

> ID：12423467
> 
> 赞同：1
> 
> 时间：2012-09-14T11:19:33.413
> 
> 标签：android, encryption, jakarta-mail, smime

从此代码段：

```
try {
    EncryptionUtils smimeUtils = EncryptionManager.getEncryptionUtils(EncryptionManager.SMIME);
    char[] smimePw = new String("hello world").toCharArray();
    EncryptionKeyManager smimeKeyMgr = smimeUtils.createKeyManager();
    smimeKeyMgr.loadPrivateKeystore(privateKeyStore, smimePw);

   } catch (NoSuchProviderException e) {
            Log.e("NoSuchProvider: ", e.getMessage());
   } catch (CertificateException e) {
            Log.e("Certificate: ", e.getMessage());
   } catch (KeyStoreException e) {
            Log.e("KeyStore: ", e.getMessage()); 
   } catch (NoSuchAlgorithmException e) {
            Log.e("No Such Algorithm: ", e.getMessage()); 
   } catch (IOException e) {
            Log.e("IO: ", e.getMessage());
   } 
```

我尝试加载`S/MIME`加密管理器，但这段代码会`NoSuchProviderException`告诉我：

```
No provider configured for S/MIME 
```

我正在关注[本](http://javamail-crypto.sourceforge.net/)指南，它告诉我添加以下内容`.jar-files`：

1.  javamail-crypto.jar
2.  bcprov-jdk14-122.jar
3.  bcmail-jdk14-122.jar

我找不到带有结尾的确切版本，但我在构建路径中`-122`包含了以下内容：`jar-files`

1.  bcprov-jdk14-147
2.  bcmail-jdk14-147
3.  javamail-crypto
4.  javamail-crypto-bouncycastle-smime

但它仍然抛出`exception`，任何人都可以给我一个关于如何解决这个问题的提示吗？

# asp.net - 用asp.net获取硬盘序列号？

> ID：12423468
> 
> 赞同：2
> 
> 时间：2012-09-14T11:19:35.300
> 
> 标签：asp.net

是否可以使用 ASP.NET 获取客户端硬盘序列号的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:46:51.163

不
，我希望他们永远不会实现这一点。想象一下访问如此低级别信息的安全问题。
也许可以使用 ActiveX 控件或其他一些全推力客户端插件，但不能使用 asp.net 本身...

# oracle - PHP CLI 模式和 Oracle 字符集？

> ID：12423471
> 
> 赞同：0
> 
> 时间：2012-09-14T11:20:12.680
> 
> 标签：oracle, oracle10g, oracle11g, php

我通过带有 CL8MSWIN1251 字符集的 PDO_OCI 将 PHP 与 Oracle db 一起使用。当 apache 请求 php 时，一切正常。但是，当我尝试从命令行使用 php 脚本时 - 我得到了错误字符集中的数据。而不是文字我得到了很多*？*符号。在两种模式（CLI/Apache）中，php 使用相同的 php.ini（/etc/php.ini）。

任何建议如何解决？

**更新** 脚本的输出不会打印在控制台上。它写入文件或通过电子邮件发布，因此命令行字符集无关紧要。此外，环境变量 NLS_LANG 设置正确。

# vba - 如何复制空白单元格之前的值

> ID：12423476
> 
> 赞同：0
> 
> 时间：2012-09-14T11:20:25.283
> 
> 标签：vba, excel

我已经编写了获取空白单元格信息的代码，但问题是我想复制空白调用之前的数据。在空白单元格之后可能有一个值。这是我的代码：

```
Set rng = Range("6:6").Find(What:=horiz, LookIn:=xlValues, LookAt:=xlWhole)    
If rng Is Nothing Then
    MsgBox "Value not found in row 1", vbExclamation
Else
    rng.EntireColumn.Copy
    Range("p1").Select
    ActiveSheet.Paste
    Application.CutCopyMode = False
    MsgBox Range("C1").End(xlDown)(2, 1).Value 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T13:28:28.497

我真的看不到你的数据集，所以很难说这是防弹的，但从你的帖子所说的，这可能是你需要的。

改变

`rng.EntireColumn.Copy`（复制整个列）

到

`Range(rng, rng.end(xlDown)).Copy`它将范围从找到的范围复制到空白之前的最后一个单元格。

如果要复制找到范围上方的所有单元格，直到找到上方的空白以及下方的所有单元格，请写下：

`Range(rng.End(xlUp), rng.End(xlDown)).Copy`

# android - 在android中通过推送通知发送音频文件

> ID：12423479
> 
> 赞同：2
> 
> 时间：2012-09-14T11:20:31.117
> 
> 标签：android, push-notification

是否可以在 android 中将音频文件作为推送通知发送？我想要做的是用户可以将他的声音录制为一条消息，然后将该消息作为推送通知传递给该应用程序的所有用户。是否可以 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T11:23:55.237

根据以下文件，CGM / C2DM / Push Notification 只能发送 4KB 数据，因此，您不能通过推送通知发送音频文件，

[http://developer.android.com/guide/google/gcm/c2dm.html](http://developer.android.com/guide/google/gcm/c2dm.html) “应用程序可以使用“带有有效负载的消息”来传递最大 4 Kb 的消息”

但是您可以发送任何音频文件的 http url，在移动应用程序中将通过 cgm 消息接收音频文件链接并使用 http 连接下载音频文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T03:47:42.310

另一种方法是使用已经为您实现此功能的模块。从技术上讲，您执行的操作与此处描述的完全相同，但是通过对 mBlox (http://developer.mblox.com) 等提供商的单个 API 调用，您将能够发布您的内容和您想要定位的设备，内容的托管，以及到 URL 的翻译正在为您完成，以及发送实际的推送通知。

同样，从技术上讲，它与以前的答案相同，但是，对于您的个人集成，它可能是进入市场的更快方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-15T12:52:10.013

有一种方法，我们可以在 FCM 的数据中发送音频 url。之后我们可以解析并发送到另一个活动。

在 FIREBASE 服务中

```
JSONObject object = null;
            try {
                String data = remoteMessage.getData().toString();
                Map<String, String> params = remoteMessage.getData();
                object = new JSONObject(params);

            } catch (Exception e) {
                Log.e("FCM err 1", e.getMessage());
            }

sendNotification(this, remoteMessage.getNotification().getBody(), remoteMessage.getNotification().getTitle(), remoteMessage.getNotification().getClickAction(), object); 
```

推送通知功能

```
public static void sendNotification(Context context, String Message, String Title, String ClickAction, JSONObject object) {

    NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);

    final String CHANNEL_ID = "KRB";
    if (Build.VERSION.SDK_INT >= 26) {  // Build.VERSION_CODES.O
        NotificationChannel mChannel = new NotificationChannel(CHANNEL_ID, "KRB_channel", NotificationManager.IMPORTANCE_HIGH);
        notificationManager.createNotificationChannel(mChannel);
    }

    // intent = Home
    Intent intent = new Intent(ClickAction);
    try {
        Log.e("FCMurl", object.getString("url"));
        Log.e("FCMtype", object.getString("type"));
        intent.putExtra("url", object.getString("url"));
        intent.putExtra("type", object.getString("type"));

        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

    } catch (Exception e) {
        //   Toast.makeText(context,  e.getMessage(), Toast.LENGTH_SHORT).show();
        Log.e("FCM err", e.getMessage());
    }

    PendingIntent pendingIntent = PendingIntent.getActivity(context, 0 /* Request code */, intent, PendingIntent.FLAG_UPDATE_CURRENT);

    Uri defaultSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
    NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(context, CHANNEL_ID)
            .setSmallIcon(R.drawable.icon_logo)
            .setColor(Color.parseColor("#531E6C"))  // small icon background color
            .setLargeIcon(BitmapFactory.decodeResource(context.getResources(), R.drawable.icon_sfach))
            .setContentTitle(Title)
            .setContentText(Message)
            .setAutoCancel(true)
            .setSound(defaultSoundUri)
            .setPriority(Notification.PRIORITY_MAX)
            .setDefaults(Notification.DEFAULT_ALL)
            .setContentIntent(pendingIntent);

    notificationManager.notify(0 /* ID of notification */, notificationBuilder.build());

} 
```

活动中

```
 Intent intent = getIntent();
    Bundle bundle = intent.getExtras();
    String url;
    if(bundle != null){

        url = bundle.getString("url");
        MediaPlayer mediaplayer = new MediaPlayer();
        try {
            mediaplayer.setDataSource(url);
            mediaplayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
            mediaplayer.prepareAsync();
            mediaplayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
                @Override
                public void onPrepared(MediaPlayer mp) {
                    mediaplayer.start();
                }
            });
        } catch (IOException e) {
            e.printStackTrace();
        }

    } 
```

# c# - 为什么 RadListBox 在数据过滤期间什么都不显示？

> ID：12423481
> 
> 赞同：0
> 
> 时间：2012-09-14T11:20:36.257
> 
> 标签：c#, .net, wpf, telerik, radlistbox

我正在使用 ICollectionView 过滤我的数据列表。但是当我尝试过滤数据时，RadListBox 什么也没有显示。这是我为此尝试的代码。

XAML：

```
<Window.Resources>
    <local:MyList x:Key="MyData"/>
    <CollectionViewSource x:Key="MyCollection" Source="{Binding ClassTwos, Source={StaticResource MyData}}"/>
</Window.Resources>

<telerik:RadListBox x:Name="ListTwo" ItemsSource="{Binding Source={StaticResource MyCollection}}" Margin="184,78,0,0"  Width="94" Height="175" DisplayMemberPath="Name"/> 
```

C＃ ：

```
public class MyList
{
    public ObservableCollection<TestClassTwo> ClassTwos { get; set; }
    public MyList()
    {
        ClassTwos = new ObservableCollection<TestClassTwo>
                                           {
                                               new TestClassTwo{Name = "Sound"},
                                               new TestClassTwo{Name = "Samsung"},
                                               new TestClassTwo{Name = "yahoo"}
                                           };

    }
}

public MainWindow()
    {
        InitializeComponent();

        var collectionView = (this.ListTwo.ItemsSource as ICollectionView);
        if (collectionView != null)
        {
            collectionView.Filter = p => ((TestClassTwo)p).Name == "s";
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:12:38.463

因为您没有与您的过滤器匹配的项目（没有被命名的`s`）。我假设您打算使用`StartsWith`or`Contains`而不是`==`.

# javascript - jPlayer - 声音结束后的确认框

> ID：12423495
> 
> 赞同：1
> 
> 时间：2012-09-14T11:21:35.893
> 
> 标签：javascript, jquery, html, jquery-plugins, jplayer

声音结束后如何显示确认框？我使用 jPlayer HTML5 音频播放器来播放声音。我有类似的东西：

```
$(document).ready(function() {
                $("#jquery_jplayer_1").jPlayer({
                    ready: function(event) {
                        $(this).jPlayer("setMedia", {
                            mp3: "http://mysite.com/sound.mp3"
                        });
                    },
                    swfPath: "http://www.jplayer.org/2.1.0/js",
                    supplied: "mp3"
                });             
            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:24:33.377

使用[`ended`事件](http://www.jplayer.org/latest/developer-guide/#jPlayer-play)：

```
$(document).ready(function() {
    $("#jquery_jplayer_1").jPlayer({
        ready: function(event) {
            $(this).jPlayer("setMedia", {
                mp3: "http://mysite.com/sound.mp3"
            });
        },
        swfPath: "http://www.jplayer.org/2.1.0/js",
        supplied: "mp3",
        ended: function() {
            confirm('The sound ended?');
        }
    });             
}); 
```

# android - AsyncTask 类中的错误无法发送数据

> ID：12423497
> 
> 赞同：1
> 
> 时间：2012-09-14T11:21:37.973
> 
> 标签：android, android-asynctask

我在 android 平台上工作，想将一些注册详细信息发送到一个 php 页面，因为我创建了一个名为“ContinueRegister”的活动，它包含一个 AsyncTask 类。在运行我的项目时，不幸的是它显示已停止，并且 logcat 中存在一些错误，例如

```
 Activity com.opz.ContinueRegister has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41269db8     
        error opening trace file: No such file or directory
        at android.os.Looper.loop(Looper.java:137)
        at android.os.Handler.handleCallback(Handler.java:615)
        atcom.opz.ContinueRegister$CreateNewUser.onPreExecute(ContinueRegister.java:76)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
        at dalvik.system.NativeStart.main(Native Method)
        at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:586)
        at java.lang.reflect.Method.invokeNative(Native Method) 
```

这是我的类文件

```
public class ContinueRegister extends Activity {

    // Progress Dialog
        private ProgressDialog pDialog;

        JSONParser jsonParser = new JSONParser();

    EditText firstname;
    EditText lastname;
    EditText dob;
    EditText gender;

    RegisterActivity ra= new RegisterActivity();

// url to create new product
    private static String url_create_product = "http://localhost/login_api/create_account.php/";

    // JSON Node names
    private static final String TAG_SUCCESS = "success";

   @Override    
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
        // Set View to register.xml
       setContentView(R.layout.registerfinsh);

             Button bt=(Button)findViewById(R.id.btnRegister);

       // Listening to Login Screen link
       bt.setOnClickListener(new View.OnClickListener(){

            public void onClick(View arg0) {

                    new CreateNewUser().execute();
                    }
            });

            }

            /**
     * Background Async Task to Create new product
     * */

class CreateNewUser extends AsyncTask<String, String, String> {
/**
 * Before starting background thread Show Progress Dialog
 * */
@Override
protected void onPreExecute() {
super.onPreExecute();
pDialog = new ProgressDialog(ContinueRegister.this);
pDialog.setMessage("Creating New User..");
pDialog.setIndeterminate(false);
pDialog.setCancelable(true);
pDialog.show();
}

/**
 * Creating User
 * */
protected String doInBackground(String... args) {

     String Username = ra.username.getText().toString();
     String Email = ra.email.getText().toString();
     String Password =ra.password.getText().toString();
     firstname = (EditText)findViewById(R.id.first_name);
     lastname =(EditText)findViewById(R.id.last_name);
     dob =(EditText)findViewById(R.id.date_of_birth);
     gender = (EditText)findViewById(R.id.gender);
     String Firstname = firstname.getText().toString();
     String Lastname = lastname.getText().toString();
     String Dob =dob.getText().toString();
     String Gender =gender.getText().toString();

            // Building Parameters

            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("Username", Username));
            params.add(new BasicNameValuePair("Email", Email));
            params.add(new BasicNameValuePair("Password", Password));
            params.add(new BasicNameValuePair("Firstname", Firstname));
            params.add(new BasicNameValuePair("Lastname", Lastname));
            params.add(new BasicNameValuePair("Dob", Dob));
            params.add(new BasicNameValuePair("Gender", Gender));

            // getting JSON Object
            // Note that create user url accepts POST method
            JSONObject json = jsonParser.makeHttpRequest(url_create_product,
                    "POST", params);

            // check log cat for response
            Log.d("Create Response", json.toString());

            // check for success tag
            try {
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // successfully created user
                    Intent i = new Intent(getApplicationContext(), FinishSignupActivity.class);
                    startActivity(i);

                    // closing this screen
                    finish();
                } else {
                    // failed to create user
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once done
            pDialog.dismiss();

       TextView loginScreen = (TextView) findViewById(R.id.link_to_login2);

       loginScreen.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent m = new Intent(getApplicationContext(),LoginActivity.class);
            startActivity(m);

        }
    });
   }
 }
} 
```

请帮我解决这个错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:23:45.997

```
String url_create_product = "http://10.0.2.2/login_api/create_account.php/"; 
```

**或者**

**使用您的本地 IP`192.168.0.1`**

```
String url_create_product = "http://192.168.0.1/login_api/create_account.php/"; 
```

还要检查您的`login_api`文件夹是否有名称为的文件`create_account.php`

还有一件事是`Never Access Any view inside doinBackGround(...)`

因为`doinBackGround method is non-UI thread.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:27:55.433

我们必须提供完整的 url，如`192.10.1.000`.

您可以使用 localhost 签入 windows。但您必须在上面的行中提供完整的 url。

要知道你的 ipaddress 打开 cmd 提示符。和类型`ipconfig`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:49:47.117

将调用意图的代码放在Postexecute

去另一个活动从来都不是后台任务

# c++ - VC++ 2010 MySQL 一些错误

> ID：12423498
> 
> 赞同：-3
> 
> 时间：2012-09-14T11:21:40.580
> 
> 标签：c++, mysql

我有 Visual Studio 10 c++、MySQL 连接器和服务器。

我的代码是：

```
 #include "mysql_connection.h"
 #include "mysql_driver.h"
 #include <cppconn/driver.h>
 #include <cppconn/exception.h>
 #include <cppconn/resultset.h>
 #include <cppconn/statement.h>
 #include <cppconn/prepared_statement.h>
 void main()
    {
      sql::Driver *driver;
      sql::Connection *con;
      sql::Statement *stmt;
      sql::ResultSet *res;
      sql::PreparedStatement *pstmt;
      con = driver->connect("localhost","root","admin12");
    } 
```

如果我用调试编译给我那个错误：

> 运行时检查失败 #3 - 变量“驱动程序”在未初始化的情况下被使用。

* * *

如果我用 release 编译给我：

> Excepción no controlada en 0x003610db en MySQL.exe: 0xC0000005: Infraacción de acceso al leer la ubicación 0x0fc08561。

* * *

给我一行错误

```
con = driver->connect("localhost","root","admin12"); 
```

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:54:44.053

其他使用 MySQL 连接器的人似乎在编写这样的代码

```
sql::Driver *driver; 
driver = get_driver_instance(); 
```

然后`driver`变量不再未初始化。

# java - 使用 Jersey 获取 json 数组时出现 UnmarshalException

> ID：12423500
> 
> 赞同：1
> 
> 时间：2012-09-14T11:21:45.870
> 
> 标签：java, json, jersey

我们的应用程序有一个包装 Jersey REST 功能的类。一种方法是`public <T extends Storable> List<T> retrieve(Class<T[]> pCls) throws StorageException`，被称为`retrieve(Item[].class)`从资源中获取整个项目列表`/items`（见下文）。

来自服务器的答案是`[{"price":1.0,"specialPrice":0.0,"name":"Beverage","special":false,"category":"BEVERAGE","cost":0.0,"available":false,"id":0},{"price":2.0,"specialPrice":0.0,"name":"Meal","special":false,"category":"DISH","cost":0.0,"available":false,"id":0}]`，这是我所期望的。

但应用程序以`Exception in thread "main" javax.ws.rs.WebApplicationException: javax.xml.bind.UnmarshalException`, 并带有链接异常退出`[com.sun.istack.internal.SAXParseException2; lineNumber: 1; columnNumber: 14; unexpected element (uri:"", local:"price"). Expected elements are <{}article>,<{}item>]`。

## 检索代码（客户端）：

```
ClientResponse cr = this.resource.path(resourcePath)
                .accept(MediaType.APPLICATION_JSON_TYPE)
                .get(ClientResponse.class);

        T[] a = cr.getEntity(pCls); 
```

## 资源代码（在服务器上）：

```
@Path("/items")
public class ItemListResource {
    @GET
    @Produces(MediaType.APPLICATION_JSON)
    @Consumes(MediaType.APPLICATION_JSON)
    public Response getItemList() {
        LinkedList<Item> l = new LinkedList<Item>();
        l.add(new Item(1.0, "Beverage", Category.BEVERAGE));
        l.add(new Item(2.0, "Meal", Category.DISH));
        return Response.ok(l).build();
    }
} 
```

## 项目代码：

```
@XmlRootElement
public class Item extends Article {
    private Category category;
    private double cost;
    private boolean available;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:55:58.330

我在这个答案中使用杰克逊解决了这个问题：[https ://stackoverflow.com/a/9725228/1116842](https://stackoverflow.com/a/9725228/1116842)

```
ClientConfig cfg = new DefaultClientConfig();
cfg.getClasses().add(JacksonJsonProvider.class);
Client client = Client.create(cfg); 
```

马特球 说：

> Jackson 的 MessageBodyReader 实现似乎比 Jersey JSON 实现得更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:52:04.390

我不太确定，但看起来您期待的是一个 JASON 对象，但得到的是一个 XML 对象。刚刚在 Stackoverflow 上找到了这个，也许它适用于你的问题？

[从restful java客户端获取JSON](https://stackoverflow.com/questions/11380421/getting-json-out-put-from-restful-java-client)

# python - ftplib 文件选择

> ID：12423501
> 
> 赞同：2
> 
> 时间：2012-09-14T11:21:51.523
> 
> 标签：python, ftp, ftplib

手册说

> 要下载文件，请使用 ftp.retrlines('RETR' + filename)

这是我所做的：

```
ftp.retrbinary('RETR media/backups/andrey.txt', open("file_to_get.txt", 'a+').write) 
```

请有人建议如何在“RETR”命令之后放置先前通过 raw_input 添加的文件名变量？使用 %s 但这不起作用，它像文件名的一部分一样被处理。

```
ftp.retrbinary('RETR %s', open("file_to_get.txt", 'a+').write) %raw_input("print file name") 
```

产生这个：

```
c:\>python ftp_client.py
Enter host95.31.8.52
drwxrwxrwx   61 99         102             32768 Sep 14 01:39 backpl
drwxrwxrwx   19 99         102              4096 Sep  7 13:47 media
drwxrwxrwx    2 99         102              4096 Jul  2 11:15 naswebsite
Traceback (most recent call last):
  File "ftp_client.py", line 12, in <module>
    ftp.retrbinary('RETR %s', open("file_to_get.txt", 'a+').write) %raw_input("p
rint file name")
  File "C:\Python27\lib\ftplib.py", line 399, in retrbinary
    conn = self.transfercmd(cmd, rest)
  File "C:\Python27\lib\ftplib.py", line 361, in transfercmd
    return self.ntransfercmd(cmd, rest)[0]
  File "C:\Python27\lib\ftplib.py", line 330, in ntransfercmd
    resp = self.sendcmd(cmd)
  File "C:\Python27\lib\ftplib.py", line 244, in sendcmd
    return self.getresp()
  File "C:\Python27\lib\ftplib.py", line 219, in getresp
    raise error_perm, resp
ftplib.error_perm: 550 Can't open %s: No such file or directory

c:\> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:39:12.803

这可能有效

```
filename = 'andrey.txt'
path = "media/backups/"
ftp.cwd(path)
ftp.retrbinary("RETR " + filename ,open(filename, 'a+').write) 
```

# java - java缓存超时

> ID：12423502
> 
> 赞同：3
> 
> 时间：2012-09-14T11:21:53.083
> 
> 标签：java, caching, nonblocking

我们有一个简单但非常常用的缓存，由 ConcurrentHashMap 实现。现在我们要定期刷新所有值（例如，每 15 分钟）。

我想要这样的代码：

```
 private void regularCacheCleanup() {
        final long now = System.currentTimeMillis();
        final long delta = now - cacheCleanupLastTime;
        if (delta < 0 || delta > 15 * 60 * 1000) {
            cacheCleanupLastTime = now;
            clearCache();
        }
  } 
```

除了应该是：

*   线程安全
*   如果不清除缓存，则非阻塞且性能极好
*   除了 java.* 类之外没有依赖项（所以没有 Google CacheBuilder）
*   坚如磐石;-)
*   无法启动新线程

现在我想在 ThreadLocal 中实现一个短计时器。当此到期时，将以同步方式检查真实计时器。然而，这是一个非常多的代码，所以一个更简单的想法会很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T12:10:38.843

解决此问题的主流方法是使用一些计时器线程以指定的时间间隔刷新缓存。但是，由于您不需要创建新线程，我能想到的一种可能的实现是伪定时缓存刷新。基本上，我会在缓存访问器（put 和 get 方法）中插入检查，每次客户端使用此方法时，我都会在执行 put 或 get 操作之前检查缓存是否需要刷新。这是粗略的想法：

```
class YourCache {

  // holds the last time the cache has been refreshed in millis
  private volatile long lastRefreshDate;

  // indicates that cache is currently refreshing entries
  private volatile boolean cacheCurrentlyRefreshing;

  private Map cache = // Your concurrent map cache...

  public void put(Object key, Object element) {
    if (cacheNeedsRefresh()) {
      refresh();
    }
    map.put(key, element);
  }

  public Object get(Object key) {
    if (cacheNeedsRefresh()) {
      refresh();
    }
    return map.get(key);
  }

  private boolean cacheNeedsRefresh() {
    // make sure that cache is not currently being refreshed by some
    // other thread.
    if (cacheCurrentlyRefreshing) {
      return false;
    }
    return (now - lastRefreshDate) >= REFRESH_INTERVAL;
  } 

  private void refresh() {
    // make sure the cache did not start refreshing between cacheNeedsRefresh()
    // and refresh() by some other thread.
    if (cacheCurrentlyRefreshing) {
      return;
    }

    // signal to other threads that cache is currently being refreshed.
    cacheCurrentlyRefreshing = true;

    try {
      // refresh your cache contents here
    } finally {
       // set the lastRefreshDate and signal that cache has finished
       // refreshing to other threads.
       lastRefreshDate = System.currentTimeMillis();
       cahceCurrentlyRefreshing = false;
    }
  }
} 
```

我个人不会考虑这样做，但如果你不想或不能创建计时器线程，那么这可能是你的一个选择。

Note that although this implementation avoids locks, it is still prone to duplicate refreshes due to race events. If this is ok for your requirements then it should be no problem. If however you have stricter requirements then you need to put locking in order to properly synchronise the threads and avoid race events.

# java - 从服务器播放和寻找 mp3 文件

> ID：12423503
> 
> 赞同：0
> 
> 时间：2012-09-14T11:21:52.813
> 
> 标签：java, audio, stream, seek

我如何从某个位置开始或跳转到某个位置（字节或秒）并且不要忘记我正在从服务器流式传输 mp3 文件？

```
 static private void rawplay(AudioFormat targetFormat, AudioInputStream din)
        throws Exception {
    byte[] data = new byte[4096];
    SourceDataLine line = getLine(targetFormat);

    if (line != null) {
        // Start
        line.start();
        int nBytesRead = 0, nBytesWritten = 0;

    while (nBytesRead != -1) {
            nBytesRead = din.read(data, 0, data.length);
            if (nBytesRead != -1){
                if(someFloat==-3)nBytesWritten = line.write(data, 10, nBytesRead);
                else nBytesWritten = line.write(data, 0, nBytesRead);
            }

        }
        // Stop
        line.drain();
        line.stop();
        line.close();
        din.close();
    }
} 
```

服务器实现：

```
 out = new DataOutputStream(sock.getOutputStream());
     File file = new File("src/f.mp3"); 
     DataInputStream inFile = new DataInputStream(new FileInputStream(file));
     long length=0;
     byte[] buffer = new byte[1024];
     while((length=inFile.read(buffer,0,1024))>0){
         out.write(buffer,0,(int)length);

     } 
```

# javascript - jQuery 来电显示以奇怪的方式工作

> ID：12423509
> 
> 赞同：0
> 
> 时间：2012-09-14T11:22:05.470
> 
> 标签：javascript, jquery

嗨，JS 和 jQuery 的超级大师们！我对“点击”功能的诡计有些困惑，并认为问题的解释在于 jQuery 和 JS 的复杂性。

我有一个标准绑定到点击事件

```
$('.add-button').click( function(event) {
  $.ajax({
    url: 'superentities/new',
    headers: {
      'X-Transaction': 'GET new superentities',
      'X-CSRF-Token': '<%= form_authenticity_token.to_s %>'
    },
    data: {
      entity: event.target.id
    }
  });
}); 
```

我将呼叫者的 ID 发送到控制器。但在此之前，我`$(this).id`在数据哈希中调用了`event.target.id`. `$(this).id`总是未定义，尽管 Firebug 的观察者就像`this->id == some_unundefined_value`.

那么有没有人可以为我揭开这个谜团呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:24:59.413

`.id`是本机 JavaScript 方法（或通过纯 JavaScript 访问`id`属性的方法），并且适用于节点，例如`this`，而`$(this)`jQuery 对象是“由”本机`this`对象/节点制成的。因此，要检索`id`使用 jQuery：

```
$(this).attr('id'); 
```

在原生 JavaScript 中：

```
this.id; 
```

两者不能互换使用（jQuery 对象在仍然是 jQuery 对象时不能与本机 DOM 一起使用，并且本机 DOM 节点/对象不能与 jQuery 方法一起使用）。

从 jQuery 对象中检索 DOM 节点并检索`id`：

```
$(this)[0].id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:30:30.447

这个怎么样？我认为你有一个范围界定问题。$(this) 在您的示例中不是指 $('.add-button') 而是指 $.ajax。

```
$('.add-button').click( function(event) {
    var id = $(this).attr('id');
    $.ajax({
        data: {
            entity: id
        }
    });
}); 
```

或者你可以这样做：

```
$('.add-button').click( function(event) {
    var self = this; 
    $.ajax({
        data: {
            entity: self.attr('id');
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:31:50.670

你试过这个

```
$(this).attr("id"); 
```

# sitecore - 如何以编程方式为 SiteCore 中的 GeneralField 添加值

> ID：12423510
> 
> 赞同：2
> 
> 时间：2012-09-14T11:22:11.583
> 
> 标签：sitecore

我们正在尝试以编程方式向 SiteCore 添加值。其中一个字段是 GeneralLink。我们已经上传了一个可执行文件并试图将该文件链接到这个 GeneralLink 字段。但它不起作用。通过 SiteCore 编辑器，如果我们选择“插入链接”并选择可执行文件（在媒体库中），它就可以工作了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T05:10:09.610

找到了上述问题的答案。下面是代码片段。

```
// Create the media item 

MediaItem mediaItem = mediaCreator.CreateFromFile(fileName, mediaCrtrOptions);

// Create the internal link

Sitecore.Data.Fields.LinkField link = newItem.Fields[fieldName];

// this should be your complete media library path

link.Url = mediaItem.MediaPath;

link.LinkType = "internal";

link.Target = "";

link.TargetID = mediaItem.ID; 
```

这对我们有用。希望它能帮助更多有需要的人。

# java - 在java中做一些'lambda演算'的库

> ID：12423514
> 
> 赞同：1
> 
> 时间：2012-09-14T11:22:17.127
> 
> 标签：java, lambda-calculus

我打算在 Java 中做一些基本的 lambda 表达式操作（最好使用类型化的 lambda）。

是否有我使用的库（稳定或其他）？

更新：更明确地说，我想操作 lambda 表达式，例如在一个文件中我解析一些 lambda 表达式并将其中一些组合成一个新的。基本上，它更多的是解析而不是函数式编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:24:21.283

是的，[这里](http://code.google.com/p/lambdaj/)有。或者您可以等待 Java 8、9、10（最终会完成）？！？！？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:37:40.230

查看 JVM 上的函数式语言。这个解决方案比 libs 更强大，并且在未来的前景中更有用。为此，我更喜欢[Clojure](http://clojure.org/)。

# php - Jenkins 中的 PHPMD 设置

> ID：12423515
> 
> 赞同：0
> 
> 时间：2012-09-14T11:22:22.320
> 
> 标签：php, cakephp, jenkins, phpmd

我在 Jenkins 中设置 Mess Detector 时遇到问题。我想在终端运行的代码是：

```
phpmd /var/www/sitename/site/src/private/app xml codesize,unusedcode,naming,design 
--reportfile /var/www/sitename/messdetector.xml 
--exclude Vendor,Config,Console,uploads,tmp,Test 
```

在我的构建 xml 中，我有以下内容：

```
<target name="phpmd" description="Generate pmd.xml using PHPMD">
    <exec executable="phpmd">
       <arg value="src/private/app/" />
       <arg value="xml" />
       <arg value="codesize,unusedcode,naming,design" />
       <arg value="--reportfile" />
       <arg value="${basedir}/build/logs/pmd.xml" />
       <arg value="--exclude" />
       <arg value="Vendor,Config,Console,uploads,tmp,Test" />
   </exec>
</target> 
```

在我得到的输出数据中：

```
phpmd:
 [exec] No entry for terminal type "unknown";
 [exec] using dumb terminal settings.
 [exec] Result: 2 
```

我不确定为什么它不能正常工作，任何关于在 Web 构建中使用它的最佳方式的建议都将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:51:03.170

转到“管理 Jenkins”，然后转到“系统信息”。在“环境变量”部分，您将找到“TERM”环境变量的值。在您的情况下，它设置为“未知”，但应该类似于“xterm-color”或只是“xterm”。

当您启动 Jenkins 时，请确保将此环境变量设置为正确的值。

# iphone - UIScrollView 中的 UITextView 中的键盘方向

> ID：12423516
> 
> 赞同：0
> 
> 时间：2012-09-14T11:22:25.113
> 
> 标签：iphone, ios, uiscrollview, uitextfield, uitextview

在我的应用程序中，我使用了`UIScrollView`和`UITextField`，`UITextView`我在 UITextField 中对键盘方向进行了编码。它工作正常，但不适用于`UITextView`. 在编辑时`UITextView`，键盘完全隐藏了`UITextView`. 这是我的代码

```
- (void)textFieldDidBeginEditing:(UITextField *)textField {
  [textField setClearButtonMode:UITextFieldViewModeWhileEditing];
  CGRect textFieldRect = [self.view.window convertRect:textField.bounds fromView:textField];
  CGRect viewRect = [self.view.window convertRect:self.view.bounds fromView:self.view];
  CGFloat midline = textFieldRect.origin.y + 0.5 * textFieldRect.size.height;
  CGFloat numerator = midline - viewRect.origin.y - MINIMUM_SCROLL_FRACTION * viewRect.size.height;
  CGFloat denominator = (MAXIMUM_SCROLL_FRACTION - MINIMUM_SCROLL_FRACTION) * viewRect.size.height;
  CGFloat heightFraction = numerator / denominator;
  if (heightFraction < 0.0) {
    heightFraction = 0.0;
  } else if (heightFraction > 1.0) {
    heightFraction = 1.0;
  }
  UIInterfaceOrientation orientation =
    [[UIApplication sharedApplication] statusBarOrientation];
  if (orientation == UIInterfaceOrientationPortrait ||
    orientation == UIInterfaceOrientationPortraitUpsideDown) {
    animatedDistance = floor(PORTRAIT_KEYBOARD_HEIGHT * heightFraction);
  } else {
    animatedDistance = floor(LANDSCAPE_KEYBOARD_HEIGHT * heightFraction);
  }
  CGRect viewFrame = self.view.frame;
  viewFrame.origin.y -= animatedDistance;
  [UIView beginAnimations:nil context:NULL];
  [UIView setAnimationBeginsFromCurrentState:YES];
  [UIView setAnimationDuration:KEYBOARD_ANIMATION_DURATION];
  [self.view setFrame:viewFrame];
  [UIView commitAnimations];
}
- (void)textFieldDidEndEditing:(UITextField *)textField {
  CGRect viewFrame = self.view.frame;
  viewFrame.origin.y += animatedDistance;
  [UIView beginAnimations:nil context:NULL];
  [UIView setAnimationBeginsFromCurrentState:YES];
  [UIView setAnimationDuration:KEYBOARD_ANIMATION_DURATION];
  [self.view setFrame:viewFrame];
  [UIView commitAnimations];    
} 
```

任何人都可以帮我清除这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:32:11.753

对 UITextview 使用 textview 的委托方法，如下所示

```
-(void)textViewDidBeginEditing:(UITextView *)textView; 
```

并且

```
-(void)textViewDidEndEditing:(UITextView *)textView; 
```

与 textField 委托方法相同

例如 ...

```
-(void)textViewDidBeginEditing:(UITextView *)textView{

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];
    self.view.frame=CGRectMake(0, -100, 320, 460);//just for an example
    [UIView commitAnimations];

}

-(void)textViewDidEndEditing:(UITextView *)textView{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];
    self.view.frame=CGRectMake(0,0, 320, 460);
    [UIView commitAnimations];
} 
```

希望这对你有帮助..

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:30:50.663

您可以尝试强烈推荐的“TPKeyboardAvoidingScrollView”，可从：[TPKeyboardAvoiding](https://github.com/michaeltyson/TPKeyboardAvoiding)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T12:00:36.980

首先添加你的'.h'文件

在没有加载

```
textView.delegate=self; 
```

然后给出 textView 的代码

```
textView.userinteractionEnabled=YES; 
```

# ios - ios应用程序中缺少facebook sdk框架

> ID：12423524
> 
> 赞同：-1
> 
> 时间：2012-09-14T11:22:57.850
> 
> 标签：ios, facebook, api

**我使用xcode 4.1**制作 iphone 应用程序，并且我正在使用 Facebook SDK 进行 Facebook 集成。但是当我尝试在**xcode 4.3.3**中打开该项目时，它给了我那个错误的脸书。在您的应用程序中找不到 SDK 框架。

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:42:06.873

将框架添加到您的项目中（将其从查找器拖到 Xcode 的左侧栏，如果需要，选择复制），然后转到您的项目设置 > 构建阶段 > 将二进制文件与库链接，单击“+”按钮，搜索你的框架并添加它。然后它应该包含在您的应用程序中。

# linux - linux查找文件并复制到目录

> ID：12423529
> 
> 赞同：0
> 
> 时间：2012-09-14T11:23:11.697
> 
> 标签：linux, bash

我尝试在目录中查找文件并将它们复制到其他地方，这是我的脚本：

```
#!/bin/bash
# fileSearch

array=(a b c d)

for var in array
do
        find ~/ -name $var* -exec cp {} ./test/ \;
done 
```

我究竟做错了什么？他不会找到任何文件......我认为它可能会带有引号。

谁能帮我？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:35:35.783

试试这个：

```
#!/bin/bash
# fileSearch

array=(a b c d)

for var in array
do
    echo $var
done 
```

输出：

```
array 
```

换句话说，您只是在循环一个包含单个单词“数组”的单词列表。正确的版本应该扩展数组，并添加一个`$`-symbol （意思是引用变量）：

```
#!/bin/bash
# fileSearch

array=(a b c d)

for var in ${array[@]}
do
    find ~/ -name "$var*" -exec cp {} ./test/ \;
done 
```

引用变量也是一个好习惯，即，每当您使用变量时`$var`，请`"$var"`改用。当您的变量包含应被视为单个字符串的带有空格（或其他“奇怪”符号）的字符串时，这可以防止许多问题。

# c++ - 来自抽象类未定义引用的生成器错误对`vtable for

> ID：12423536
> 
> 赞同：6
> 
> 时间：2012-09-14T11:23:41.007
> 
> 标签：c++, virtual-functions

> **可能重复：**
> [未定义的符号“vtable for ...”和“typeinfo for ...”？](https://stackoverflow.com/questions/1693634/undefined-symbols-vtable-for-and-typeinfo-for)
> [C++ 未定义对 vtable 和继承的引用](https://stackoverflow.com/questions/9406580/c-undefined-reference-to-vtable-and-inheritance)

我对大学要求的一个小项目有疑问。这是一个国际象棋游戏的简单项目。

当我从抽象类定义继承类时，我有一个模糊的错误 undefined reference to `vtable for XXX... 这是代码

**碎片.h**

```
class Pieces {
public:
   Pieces(char color) : pieceColor(color) {}
   virtual ~Pieces() {}
   virtual char getPieceType() = 0;
   char getColor() {
     return pieceColor;
   }

   virtual bool isLegalMove(int srcRow, int srcCol, int destRow, int destCol, Pieces* board[8][8]) = 0;

private:
   virtual bool areSquaresLegal(int srcRow, int srcCol, int destRow, int destCol, Pieces* board[8][8]) = 0;
   char pieceColor;
}; 
```

这是一个示例继承类，即典当类

**典当**

```
#include "Pieces.h"

class Pawn: public Pieces {
public:
    Pawn(char color) : Pieces(color) {}
    ~Pawn();
private:
    virtual char getPieceType() {
        return 'P';
    }
    bool areSquaresLegal(int srcRow, int srcCol, int destRow, int destCol, Pieces* board[8][8]);
    bool isLegalMove(int srcRow, int srcCol, int destRow, int destCol, Pieces* board[8][8]);
}; 
```

最后两种方法在 .cpp 文件中实现。显然，其他所有类都与典当类相似。

当我尝试编译时，构建器给了我：`undefined reference to`vtable for Pawn'` 参考构造函数所在的行：

```
Pawn(char color) : Pieces(color) {} 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T11:29:22.203

你说你已经实现了最后两个成员函数。我的猜测是你还没有实现你声明的析构函数，但没有在类中定义。

如果您需要该类的重要析构函数，请确保实现它。如果不是，则删除其声明。

一般来说，这个错误意味着你声明了一个非纯虚函数而忘记实现它；一些流行的编译器将类的多态元数据与第一个非纯非内联成员函数（在本例中为析构函数）放在同一个翻译单元中。如果你看到一个应该是抽象的类的错误，那么这通常意味着你忘记声明它的一些虚函数是纯的。

# php - PHP OOP 设计结构

> ID：12423544
> 
> 赞同：5
> 
> 时间：2012-09-14T11:24:04.987
> 
> 标签：php, oop

我的问题适用于我为更好地理解如何使用 OOP 而编写的这三个示例类。

```
class Book {
    //not using getters/setters to save some space
    public $name;
    public $numreads;
}

class BookFactory {
    private $db;
    public function __construct(Database $db) {
        $this->db = $db;
    }
    public function getBook($id) {
        $book = new Book();

        $book->name = $db->query("SELECT name FROM books...");

        $booknumreads = new BookNumRead($this->db, $book);
        $book->numreads = $booknumreads->getFromLocal() + $booknumreads->getFromAnotherSource();

        return $book;
    }
}

class BookNumRead {
    private $db;
    private $book;
    public function __construct(Database $db, Book $book) {
        $this->db = $db;
        $this->book = $book;
    }

    public function getFromLocal()
    {
        return $this->db->query("SELECT COUNT ... WHERE name = $book->name");
    }

    public function getFromAnotherSource()
    {
        return API::getNumReadsOfABook($book->name);
    }

    //or just stick with this method in this class
    public function getNumReadsOfBook($name)
    {
        return (
                $this->db->query("SELECT COUNT ... WHERE name = $name")
                +
                API::getNumReadsOfABook($name)
        );
    }
}

//get number of reads of a book
$db = new Database();
$bookfactory = new BookFactory($db);
$book = $bookfactory->getBook(123);
echo $book->getNumReads(); 
```

1.  首先，这是一个好的 OOP 方法吗？

2.  这些类是完全不同的。域与值对象？例如，我的应用程序中可以有我需要的尽可能多的 Book 对象。然而，BookFactory 就像我的应用程序中的一项服务，我的应用程序中只需要一个服务，但我可能需要我的应用程序中许多其他地方的这个类，我应该把它作为一个对象放在 ServiceLocator/ServiceContainer 中吗？

3.  BookNumRead 类也可以放在 ServiceLocator/ServiceContainer 中，并由 getNumReadsOfBook() 方法使用，而无需注入 Book 对象，但这感觉像是过程编程？或者，就像上面的例子一样，由 BookFactory::getBook() 启动，但是我需要同时传递一个数据库（一个 BookFactory 被注入）和一个 Book 给它，这感觉有点混乱，因为它可能需要其他“服务”类，例如记录器。这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:35:49.447

我认为您应该将数据库内容更多地与模型/服务分开。对数据库内容使用适配器模式，并在单独的类中处理所有 SQL。您可以使适配器实现 PDO、MySQLi 等。

在更高、更实用的模型和服务层次上思考，并将实现细节隐藏在底层的通用类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:38:15.580

我会考虑让 BookNumRead 成为 Book 的属性。

此外，在`__construct()`Book 的功能中，您可以考虑运行查询以获取所有书籍详细信息。

如果你改变：

```
class Book {
    //not using getters/setters to save some space
    public $name;
    public $numreads;
} 
```

至：

```
class Book {
    //not using getters/setters to save some space
    public $name;
    public $numreads;

    public function __construct($id)
    {
        $this->db->query("SELECT COUNT ... WHERE name = $book->name");
        // Use return value to get number of times book is read...
        $this->numreads=$countFromDatabase;
    }
} 
```

然后你可以创建一个`= new Book($id);`，你会自动得到它被读取的次数。

基于此，您还可以根据 ID 自动从数据库中获取名称（以及任何其他重要详细信息）

# javascript - 如何在不同的javascript模块中共享变量

> ID：12423545
> 
> 赞同：0
> 
> 时间：2012-09-14T11:24:06.460
> 
> 标签：javascript, scope

我想知道是否可以在不同的模块中共享变量。

例如，在我的`common`模块中，我定义了一些全局变量和 util 方法

```
(function(){
  var name="";
})(); 
```

在另一个模块中，我想访问`name`变量，例如，在`app`模块中：

```
var kk=name; // access the name
//other thing 
```

但是我不想将其导出`name`到全局上下文。

是否可以？

## 更新

* * *

为什么我问这个问题是我发现谷歌这样做：

在谷歌地图[示例页面](https://google-developers.appspot.com/maps/documentation/javascript/examples/map-simple)中：

它加载以下js： [main.js](https://maps.gstatic.com/intl/en_us/mapfiles/api-3/9/14/main.js)

谁的内容是：

> ((function(){ //xxxxxx }).call(this);

然后它像这样加载[地图组合：](https://maps.gstatic.com/intl/en_us/mapfiles/api-3/9/14/map.js)

> 谷歌地图。**_ *gjsload* _** ('map', '\'use strict\';function Ut(){}function Vt(a,b,c).......');

而`map`模块可以使用模块中的变量`main`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:38:52.673

**编辑：**

非常简单：如果您在示例页面上打开控制台，并查看 main.js 的源代码（单击左下角类似 的按钮`[{}]`），您会注意到整个脚本是一个大函数，即被称为使用`.call(this)`。后者是必要的，因为严格模式（它屏蔽了全局对象，除非它被显式设置为调用者上下文）。
这个函数声明了这个函数范围内的所有函数、对象和方法，形成一个闭包。因此，在这个范围内声明的所有函数也可以访问所有变量。最后，该`google`属性被分配为全局对象的属性，从而暴露了闭包。

```
(function()
{
    'use strict';
    console.log(this);//would be undefined
}).call(this);//but the global object is explicitly set as context, so this === window

(function()
{
    'use strict';
    var closureScope = 'Global object can\'t see me';
    var google = {visible:'Yes, I was assigned as a property to the global object'};
    google.closureScope = closureScope;//expose initial value of closureScopeVariable
    google.showBenefits = function()
    {//context here is google object, this points to google
        this.closureScope = 'I looked like the closure variable';//reassign
        console.log(this.closureScope === closureScope);//logs false
    };
    google.restoreOriginal = function()
    {
        this.closureScope = closureScope;//reassign closureScope's original value
    };
    //expose:
    this.google = google;
}).call(this);
//global object:
google.closureScope = 'Foobar';
google.restoreOriginal();
console.log(google.closureScope);//Global object can't see me 
```

据我所知，这可能看起来并不那么清楚，但从本质上讲，发生了什么：每个函数都有自己的范围。当该函数返回时，在该范围内声明的所有变量都会被垃圾收集（GC'ed），*除非*有一个对象引用它们。
在这种情况下，google 是一个对象，在匿名函数的范围内声明。然后将此 google 对象的**引用**分配给全局对象，它恰好与对象变量具有相同的名称，但它也可以像这样公开：

```
window.foobar = google;
window.foobar.closureScope;//works
window.google;//undefined 
```

Google 是全局对象的一个​​属性，它*引用*在函数范围内创建的对象。它引用的对象使函数的作用域（以及在该作用域中声明的所有变量）保持活动状态。这就是为什么看起来您几乎可以直接访问闭包变量的原因，但同样，它是一个*REFERENCE*。如果您熟悉 C(++) 编程，以下是伪代码中发生的情况：

```
GoogleObj google = new Google();
GoogleObj &window.google = google;
//or in pseudo-C:
GoogleObj *google;
GoogleObj **window.google = &google;//pointer to pointer ~= reference 
```

基本上，全局`google`只包含实际 google 对象的内存地址，它指向它，它引用它，它只是告诉 JS 在哪里查找内存中的值，......
实际对象不能直接访问，它与所有与它一起声明的局部变量一起位于内存中的某个位置，它们也都有地址，但全局对象不知道这些。它只是去它知道的一个地址，询问它需要的任何东西，并且*原始*的google 对象符合。

我很难以连贯、全面的方式解释所有这些，但[也许这篇文章](http://lostechies.com/derekgreer/2012/02/17/javascript-closures-explained/)可能会对这个问题有所了解。当我开始研究闭包时，我发现这些图表很有帮助。

* * *

你不能，不是这样。闭包的全部意义在于您可以设置只能在该特定范围内引用的变量。但是，您*可以*做的是使用*特权方法*，或者（不是很好的做法，但可能）完全将变量分配给全局对象。

```
(function()
{
    var name = 'foo';
    //do stuff
    window.name = name;//expose to global object
})();//THIS IS BLUNT AND DANGEROUS

var safer = (function()
{
    var name = 'foo';
    return {name:name};
});
console.log(safer.name);//logs foo 
```

如果你真的，真的需要全局变量：

```
var safer = (function()
{
    var closureVars = {name:'foo'};
    var name = 'foo';
    return function(privateName,globalName)
    {
        globalName = globalName || privateName;
        window[globalName] = closureVars[privateName];
    };
});
safer('name');//sets window.name to 'foo' 
```

但最重要的是，特别是在您的情况下（访问某些*“私有”*变量），特权 getter 似乎是最好的方法：

```
var module = (function()
{
    var closureVars = {name:'foo';}
    return {get:function(name)
        {
            return closureVars[name];
        },
        set:function(name,val)
        {
            closureVars[name] = val;
        }
    };
};
var name = module.get('name');//sets a global name variable to 'foo'
module.set('name2',module.get('name'));//and so on 
```

应该这样做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:30:09.463

**在正确批评昆汀和埃利亚斯后更新**

你可以像这样定义你的模块：

```
var module = (function(){
    // your module definition
    var module = {};

    // set name as a property of the module
    module.name="";

    // return the module object
    return module;
})(); 
```

现在使用在模块外部访问名称

```
var kk = module.name; 
```

# c# - 改进本工作单元类的方法，涉及开/关原理和依赖注入/控制反转

> ID：12423546
> 
> 赞同：2
> 
> 时间：2012-09-14T11:24:10.630
> 
> 标签：c#, dependency-injection, repository-pattern, unit-of-work, open-closed-principle

我很感兴趣寻找可以改进以下 UnitOfWork 类的使用的方法。如您所见，它当前没有 UnitOfWork 接口，因此当我在 MVC 控制器中使用它时，我必须创建一个新对象，使我的控制器依赖于此类。

我希望能够使用 Ninject 通过将接口传递给我的控制器的构造函数来注入这种依赖关系，我的问题是这个类目前不符合打开/关闭原则，我对任何人关于如何改进的建议感兴趣那。我想我还需要某种方式将存储库传递到这个工作单元中，但我不完全确定如何去做。

任何帮助将不胜感激，谢谢。

```
/// <summary>
/// The unit of work maintains the list of repositories and coordinates changes using the EF CodeFirst data context.
/// This will remove concurrency issues with multiple repositories initialising new contexts within the same HTTP request scope.
/// Instead all transactions are done through the unit of work and that is used to call SaveChanges on the DbContext.
/// </summary>
public class ERSUnitOfWork : IDisposable
{
    private ERSDbContext context = new ERSDbContext();
    private GenericRepository<Recipe> recipeRepository;
    private GenericRepository<Member> memberRepository;
    private GenericRepository<Course> courseRepository;
    private GenericRepository<Cuisine> cuisineRepository;
    private GenericRepository<Review> reviewRepository;

    public GenericRepository<Recipe> RecipeRepository
    {
        get
        {
            if (this.recipeRepository == null)
            {
                this.recipeRepository = new GenericRepository<Recipe>(context);
            }
            return recipeRepository;
        }
    }

    public GenericRepository<Member> MemberRepository
    {
        get
        {
            if (this.memberRepository == null)
            {
                this.memberRepository = new GenericRepository<Member>(context);
            }
            return memberRepository;
        }
    }

    public GenericRepository<Course> CourseRepository
    {
        get
        {
            if (this.courseRepository == null)
            {
                this.courseRepository = new GenericRepository<Course>(context);
            }
            return courseRepository;
        }
    }

    public GenericRepository<Cuisine> CuisineRepository
    {
        get
        {

            if (this.cuisineRepository == null)
            {
                this.cuisineRepository = new GenericRepository<Cuisine>(context);
            }
            return cuisineRepository;
        }
    }

    public GenericRepository<Review> ReviewRepository
    {
        get
        {
            if (this.reviewRepository == null)
            {
                this.reviewRepository = new GenericRepository<Review>(context);
            }
            return reviewRepository;
        }
    }

    public void Save()
    {
        context.SaveChanges();
    }

    private bool disposed = false;

    /// <summary>
    /// Calls dispose on the DbContext, giving a disposing argument
    /// to distinguish from the public Dispose method that is required for the IDisposable interface
    /// </summary>
    protected virtual void Dispose(bool disposing)
    {
        if (!this.disposed)
        {
            if (disposing)
            {
                context.Dispose();
            }
        }
        this.disposed = true;
    }

    /// <summary>
    /// Calls the custom UnitOfWork Dispose() function instead and tells the garbage collector
    /// to suppress finalisation of the object, i.e. freeing up its resources
    /// </summary>
    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:15:02.433

看起来您不希望 UOW 类中的存储库实例。我认为这篇文章解决了您的问题：[unitofwork 中的多个通用存储库？](https://stackoverflow.com/questions/9808577/multiple-generic-repositories-in-unitofwork)

# javascript-events - 从 div 中排除 onclick() 事件

> ID：12423553
> 
> 赞同：1
> 
> 时间：2012-09-14T11:24:22.813
> 
> 标签：javascript-events, onclick

我有这个代码：

```
<body onclick="myFunction();">
<head>
<!-- some javascript here -->
<body>
<div id="element1">
   <div id="element2">
      <div id="element3">
      </div>
   </div>
</div>
</body> 
```

现在我想防止用户在该区域内点击`onClick`时`<body>`触发`<div id="element3">`。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:30:58.793

您可以通过劫持点击处理程序并调用`event.stopPropogation();`（`window.event.cancelBubble = true;`在旧版本的 ie 中）来排除该区域

```
<div id="element1" onclick="event.stopPropagation(); window.event.cancelBubble = true;">sadsadsadsad
       <div id="element2">                
         <div id="element3"> 
             </div>        
         </div>     
     </div>  
 </body> 
```

# c# - 通过 JSON 和 ashx 从 DB 中检索二进制图像，然后转换为 html 中的图像？

> ID：12423556
> 
> 赞同：0
> 
> 时间：2012-09-14T11:24:31.820
> 
> 标签：c#, javascript, json

我的任务是使用这种方法，坦率地说，id 可以在 2 秒内完成这个服务器端，但需要全部在 javascript 中完成。

所以在这里，我需要从名为 S_TeamMember 的对象中返回的数据库中检索二进制图像。属性之一是 MainImg byte[]

我使用 JSON 调用 ashx 处理程序来调用数据库并检索数据。

```
 $(function () {
    var queryparam = getUrlVars()["CatLink"];

    $.ajax({
        url: "TeamGroups.ashx",
        data: { CatLink:  queryparam },
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: OnTeamGroupsCompleted,
        error: OnPageFailM
    });
}); 
```

上面的 JSON 调用

```
 function OnTeamGroupsCompleted(result) {
    for (var i = 0; i < result.length; i++) {

        var name = result[i].Name;
        var recno = result[i].Recno;
        var mainimg = result[1].MainImg;
        var memholder = "<div class='PersonImageHolder'>" +
            "<div class='PersonImage'>" +
                "<img src='"+ mainimg +"'/>" + <------ PROBLEM IS HERE
            "</div>" +
            "<div class='PersonNameHolder inline-block'>" +
        "<div class='ImgHolderL inline-block'>" +
            "<img src='images/web/WhiteRibbonL.png' />" +
            "</div>" +
            "<div class='NameHolder inline-block'>" +
            "<p><a href='MemberDetail.aspx?TeammMemberLink="+ recno +"'>"+ name +"</a></p>" +
            "</div>" +
            "<div class='ImgHolderR inline-block'>" +
            "<img src='images/web/WhiteRibbonR.png' />" +
            "</div>" +
            "</div>" +
            "</div>";

        $('.Content').append(memholder);

    }
} 
```

然后在上面如何迭代 JSON 结果以在带有图像的页面上绘制一个 div。我遇到的麻烦是将“MainImg”二进制数据解析为html图像标签。

有什么想法我该怎么做吗？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:19:14.327

OnTeamGroupsCompleted 中 result[i].MainImg 的值是多少？JSON 格式本身不支持二进制数据。你可以：

1.  写一个新的ashx
2.  在 url 中传递名称或 id
3.  将 ashx 设置为 img src
4.  在 ashx 输出图像二进制数据

在 JavaScript 中：

```
"<img src='image.ashx?name"+ result[i].Name +"'/>" + <------ PROBLEM IS HERE 
```

在 image.ashx 中：

```
public void ProcessRequest(HttpContext context)
{
    string name = context.Request.QueryString["name"];
    //query database by name to get image binary data
    Byte[] bytes = ...;
    context.Response.ContentType = "image/png";
    context.Response.BinaryWrite(bytes);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:46:28.553

我认为使用 javascript 是不可行的！但是您可以将图像的 url 存储在 DB 中并将其返回给浏览器。

# ruby-on-rails - 安装 capybara-webkit (0.12.1) 时无法构建 gem 原生扩展

> ID：12423562
> 
> 赞同：1
> 
> 时间：2012-09-14T11:24:45.387
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, capybara, capybara-webkit

当我收到此错误时，我无法安装[Capybara Webkit 驱动程序：](https://github.com/thoughtbot/capybara-webkit)

```
Installing capybara-webkit (0.12.1) with native extensions
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        c:/RailsInstaller/Ruby1.9.3/bin/ruby.exe extconf.rb 
```

我在 Windows 7 x64 上运行，如您所见，使用 RailsInstaller for Windows 安装。我试过`gem install capybara-webkit`了，现在我的 gem 文件中有它，但都返回相同的错误。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T13:22:59.663

> 您还需要安装 QT 4.7.x OpenSource 版本（支持 mingw32）并将 Qt 的 bin 目录添加到路径中。

这是来自windows 部分的[官方 wiki](https://github.com/thoughtbot/capybara-webkit/wiki/Installing-Qt-and-compiling-capybara-webkit)。所以你可能需要安装该死的东西。无法提供更详细的信息，因为我没有将 Windows 用于 RoR（并建议您使用相同的方法）。

# codeigniter - CodeIgniter 简单编辑类别页面

> ID：12423563
> 
> 赞同：-1
> 
> 时间：2012-09-14T11:24:46.637
> 
> 标签：codeigniter, categories

我有一个类别列表，旁边有编辑和删除按钮，当我单击编辑按钮时，我被重定向到编辑类别页面，但现在我只想获取类别名称并将其回显在字段中，以便用户可以编辑它。它是如此简单，但我对代码点火器很陌生。我想我知道如何得到它，它只是返回它并在视图中呼应它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:51:34.647

您可以像这样获取值并设置值

```
<input type="text" name="category" value="<?php echo set_value('category', $category_name); ?>" size="50" /> 
```

# .htaccess - 将网站的 url 重写为

> ID：12423564
> 
> 赞同：0
> 
> 时间：2012-09-14T11:24:46.657
> 
> 标签：.htaccess, url, redirect

我想问你必须在 .htaccess 中编写什么命令才能使我的域看起来像这个网站

它的文件存储在 [http://imgah.com/](http://imgah.com/)但它显示[http://imgah.com/_](http://imgah.com/_)作为 url。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:31:43.963

假设自从您谈论 URL 重写以来，您的服务器安装了 Apaches mod_rewrite 模块，您可以将此重写规则放在 .htaccess 中：

```
RewriteRule ^_(.*)$ /$1 [QSA,L] 
```

这意味着，`/_`将重写为`/`，`/_index.html`将重写为`/index.html`等等。

这里有一个专门用于 Mod Rewrite 的网站：[http ://www.modrewrite.com/](http://www.modrewrite.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:28:39.927

您也可以使用 mod_alias 来做同样的事情：

```
RedirectMatch 301 ^/_(.*)$ /$1 
```

这将更改浏览器的 URL 地址栏，以便删除下划线。

# c# - 将 Program 的实例放在 Main 方法中

> ID：12423567
> 
> 赞同：0
> 
> 时间：2012-09-14T11:25:04.347
> 
> 标签：c#

我在控制台应用程序中有以下内容：

```
class Program {

    static void Main(string[] args) {

        Program myProgram = new Program();

        if (myProgram.foo() == true) {
            myProgram.bar();
        }
     }

     public bool foo() {
     //check some stuff 
     }

     public void bar() {
     //do some stuff 
     }

} 
```

在 Program 的 Main 方法中创建 Program 的实例是不好的做法并且容易出现问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T11:26:53.177

简短的回答：是的。只需创建两个方法`static`，然后您就不需要创建实例。

```
 static void Main(string[] args) {
        if (Program.foo() == true) {
            Program.bar();
        }
     }

    public static bool foo() {
     //check some stuff 
    }

    public static void bar() {
     //do some stuff 
    } 
```

# sql-server-2008 - 将 sum 语句组合到一个表中

> ID：12423568
> 
> 赞同：2
> 
> 时间：2012-09-14T11:25:05.517
> 
> 标签：sql-server-2008

代码的第一部分基于 SUM 语句创建一个表：

```
SELECT varday, COUNT(*) AS Vol,
SUM(FOPS_REHAB) AS FOPS_REHAB,
SUM(FOPS_RECOVERY) AS FOPS_RECOVERY
  FROM table
  WHERE PROCESSING_DATE > '31/aug/2012' and rownumber =1 
GROUP BY varday
ORDER BY varday 
```

但是，我还有两个其他代码部分要合并到上面的代码中，但它们有一个额外的“位置”标准。

所以这些是我想结合到上表中的两个 sum 语句；

```
select SUM(Current_Balance_Amount)as rec_bal, varday
 into #temp
  from table
   where fops_recovery = 1 and  PROCESSING_DATE > '31/aug/2012' and rownumber =1 
group by varday
ORDER BY varday

select SUM(Current_Balance_Amount)as reh_bal, varday
 into #temp
  from table
   where fops_rehab = 1 and  PROCESSING_DATE > '31/aug/2012' and rownumber =1 
group by varday
ORDER BY varday 
```

所以`reh_bal`和`rec_bal`在一个表中，第一个表包含`FOPS_REHAB`和`FOPS_RECOVERY`。我遇到了问题，因为他们有一个额外的子句（`where fops recovery = 1 or fops rehab = 1`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:38:02.957

我相信所有 3 个查询都可以合并为一个，试试这个：

```
select  varday, 
        COUNT(*) AS Vol,
        SUM(FOPS_REHAB) AS FOPS_REHAB,
        SUM(FOPS_RECOVERY) AS FOPS_RECOVERY,
        SUM(CASE WHEN fops_recovery = 1 THEN Current_Balance_Amount ELSE 0 END) rec_bal,
        SUM(CASE WHEN fops_rehab = 0 THEN Current_Balance_Amount ELSE 0 END) reh_bal
where   PROCESSING_DATE > '31/aug/2012' and rownumber =1 
group   by varday
ORDER   BY varday 
```

# udp - 另一个进程窃取了我的 UDP 数据包

> ID：12423575
> 
> 赞同：-1
> 
> 时间：2012-09-14T11:25:32.273
> 
> 标签：udp

不久前我遇到了这个问题，最近的一个讨论提醒我，我不知道如何解决它......
假设你有一个服务器和客户端通过 UDP 通信。
您的客户端侦听 UDP 端口 X 并接收服务器数据包。
然后启动第 3 方进程，它也在侦听 UDP 端口 X。
现在它可能会读取我的客户端要接收的数据包并将它们从队列中删除，而我的客户端根本不会收到它们。

或者更糟糕的是，如果客户端向服务器发送 UDP 消息，那么它会为它们分配 TCP 端口以进行连接。服务器仍然必须连接到客户端知道的恒定 UDP 端口 X，即使它正在使用中，否则没有人能够连接到它。

我该如何预防？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T13:58:36.640

所有想要共享端口的进程都必须设置 SO_REUSEADDR。如果他们不这样做，第一个绑定到端口的人会得到它，而其他人则失败。所以，(a) 不要设置 SO_REUSEADDR，并且 (b) 是第一个绑定到端口的。如果你不是第一个，你会得到一个绑定错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T15:00:43.500

只有单播 UDP 数据包可以被“窃取”，实际发生的是 IP 堆栈只会传递给第一个绑定的应用程序。

解决方案是管理性的：成为第一个执行绑定到所需端口的应用程序。

# git - 使用 EGIT 切换到分支机构工作

> ID：12423577
> 
> 赞同：0
> 
> 时间：2012-09-14T11:25:37.220
> 
> 标签：git, github, egit

我对 Git 很陌生。我目前正在使用 EGIT。我已经使用 git repo 位置进行了检查，我发现 master 有很多分支。使用 EGIT 我得到了主人的退房。现在，如果我要在分支上工作，比如 branchX，我该如何在 EGIT 中做到这一点。

感谢您在这方面的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:34:51.897

直接来自 Lars Vogel 的非常有用的[EGit 教程](http://www.vogella.com/articles/EGit/article.html)：

> 右键单击您的项目并选择团队 → 分支以创建新分支或在现有分支之间切换。

# android - 如何使用安卓应用搜索在线数据库

> ID：12423580
> 
> 赞同：0
> 
> 时间：2012-09-14T11:25:44.337
> 
> 标签：android

我正在编写一个 android 应用程序只是为了搜索我的网站并仅返回结果，我一直在到处看到 API，我应该使用哪种 API 以及如何去做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:01:22.850

我建议制作一个[RESTful Web 服务](http://en.wikipedia.org/wiki/Representational_state_transfer#RESTful_web_services)，通过在 AsyncTask 中执行 HTTPGet 请求在您的应用程序中调用它，然后处理返回的 JSON 对象。

1.  应用程序调用 Web 服务
2.  Web 服务通过查询其数据库来处理请求
3.  服务返回结果（最好是 JSON）
4.  应用程序处理结果

# python - 渲染抛出错误 AttributeError META -（异常位置：urllib2 中的 __getattr__）

> ID：12423581
> 
> 赞同：5
> 
> 时间：2012-09-14T11:25:50.490
> 
> 标签：python, django, urllib2, attributeerror

我按照[这篇](http://www.chicagodjango.com/blog/magic-links/)文章尝试从外部网站加载图像。我正在尝试从外部链接中提取所有图像。我使用 BeautifulSoup 来解析链接并获取所有必需的链接。

在视图调用代码末尾的 render() 函数之前，image_list 和 return_dict 具有所需的值。但是，渲染函数似乎正在生成 AttributeError 异常。请协助。

我收到以下错误：

```
 AttributeError at /post/add_new/
    META
    Request Method: POST
    Request URL:    http://localhost:8000/post/add_new/
    Django Version: 1.4.1
    Exception Type: AttributeError
    Exception Value:    
    META
    Exception Location: C:\Python27\lib\urllib2.py in __getattr__, line 225
    Python Executable:  C:\Python27\python.exe
    Python Version: 2.7.3
    Python Path:    
    ['C:\\Users\\Talal\\Python Workspace\\talal_ynd',
     'C:\\Python27\\lib\\site-packages\\ipython-0.13-py2.7.egg',
     'C:\\Python27\\lib\\site-packages\\pyreadline-2.0_dev1-py2.7-win32.egg',
     'C:\\Python27\\lib\\site-packages\\pil-1.1.7-py2.7-win32.egg',
     'C:\\Python27\\lib\\site-packages\\setuptools-0.6c11-py2.7.egg',
     'C:\\windows\\system32\\python27.zip',
     'C:\\Python27\\DLLs',
     'C:\\Python27\\lib',
     'C:\\Python27\\lib\\plat-win',
     'C:\\Python27\\lib\\lib-tk',
     'C:\\Python27',
     'C:\\Python27\\lib\\site-packages']
    Server time:    Thu, 13 Sep 2012 17:30:45 +0500 
```

这是我的视图文件：

```
# Create your views here.
from django.shortcuts import render
from django.http import HttpResponseRedirect
from posts.models import Post, PostForm
from django.template.loader import get_template
from talal_ynd.settings import TEMPLATE_DIRS

def post_view(request):
    if request.method == 'POST':
        post_form = PostForm(request.POST)
        if post_form.is_valid():
            success_message = 'Thank you.'

            link = post_form.cleaned_data['link']
            if 'get_link' in request.POST:
                import urllib2
                request = urllib2.Request(link)
                response = urllib2.urlopen(request)
                html=response.read()
                from BeautifulSoup import BeautifulSoup
                soup=BeautifulSoup(html)
                import re
                title=''; description=''
                description=soup.findAll('meta',
                    attrs={'name':re.compile("description$",
                        re.I)})[0].get('content')
                try: 
                    title=soup.findAll('meta',
                        attrs={'name':re.compile("^title$",re.I)})[0].get('content')
                except:
                    pass
                if not title:
                    title=soup.title.string
                max_images=10
                image_tags=soup.findAll('img',limit=max_images)
                image_urls_list=[]
                image_urls_list2=[]
                from urlparse import urljoin
                for image_tag in image_tags:
                    url=image_tag.get('src')
                    #image_urls_list.append(request.build_absolute_uri(url))#urljoin(link,url))#HttpRequest.build_absolute_uri(url))
                    #image_urls_list.append(request.urljoin(link,url))
                    image_urls_list.append(url)
                image_list=[]
                for url in image_urls_list:
                    image_list.append({'url':url})
                return_dict={'title':title, 'description':description}
                return_dict.update({'images':image_list})

            else:
                post_form = PostForm()
    else:

        post_form = PostForm()

    return render(request, 'posts/post_form.html', locals()) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T11:50:22.003

您已经覆盖了`request`函数内部的变量，因为您将它重用于调用`urllib2.Request`. 在那里使用不同的变量名称。

# javascript - 将圆柱体转换为弯管

> ID：12423582
> 
> 赞同：0
> 
> 时间：2012-09-14T11:25:51.643
> 
> 标签：javascript, html5-canvas, three.js

我创建了一个带有纹理和网格圆柱体的场景以及一个带有三个.js 的线和顶点的网格。通过向左或向右拖动鼠标，圆柱体具有旋转效果。

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>3d Model using HTML5 and three.js</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <style>
            body {
                font-family: Monospace;
                background-color: #f0f0f0;
                margin: 0px;
                overflow: hidden;
            }
        </style>
    </head>
    <body>

        <script src="three.min.js" type="text/javascript"></script>
        <script src="Stats.js" type="text/javascript"></script>
        <script src="Detector.js" type="text/javascript"></script>

        <script>
            if ( ! Detector.webgl ) Detector.addGetWebGLMessage();

            var container, stats;

            var camera, scene, renderer, light, projector;
            var particleMaterial;
            var cylinder, line, geometry, geometry1;

            var targetRotation = 0;
            var targetRotationOnMouseDown = 0;

            var mouseX = 0;
            var mouseXOnMouseDown = 0;

            var windowHalfX = window.innerWidth / 2;
            var windowHalfY = window.innerHeight / 2;

            var objects = [];

            var radious = 1600, theta = 45, onMouseDownTheta = 45, phi = 60, onMouseDownPhi = 60, isShiftDown = false;
            init();                     
            animate();

            function init() {

                container = document.createElement( 'div' );
                document.body.appendChild( container );

                var info = document.createElement( 'div' );
                info.style.position = 'absolute';
                info.style.top = '10px';
                info.style.width = '100%';
                info.style.textAlign = 'center';
                info.innerHTML = 'Drag to spin the cylinder<br/>Objective: By spining left, cylinder should go into the surface and by spining right it should come out.';
                container.appendChild( info );

                // camera

                camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 10000 );
                camera.position.y = 200;                
                camera.position.z = 800;

                // scene

                scene = new THREE.Scene();

                // light

                scene.add( new THREE.AmbientLight( 0x404040 ) );
                light = new THREE.DirectionalLight( 0xffffff );
                light.position.set( 0, 1, 0 );
                scene.add( light );

                // texture              

                var materials = [];

                for ( var i = 0; i < 6; i ++ ) {

                    materials.push( new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff } ) );

                }//alert(materials.length);

                // Grid

                geometry = new THREE.Geometry();
                geometry.vertices.push( new THREE.Vector3( - 500, 0, 0 ) );
                geometry.vertices.push( new THREE.Vector3( 500, 0, 0 ) );

                for ( var i = 0; i <= 20; i ++ ) {

                    line = new THREE.Line( geometry, new THREE.LineBasicMaterial( { color: 0x000000, opacity: 0.2 } ) );
                    line.position.z = ( i * 50 ) - 500;
                    scene.add( line );

                    line = new THREE.Line( geometry, new THREE.LineBasicMaterial( { color: 0x000000, opacity: 0.2 } ) );
                    line.position.x = ( i * 50 ) - 500;
                    line.rotation.y = 90 * Math.PI / 180;
                    scene.add( line );
                }

                // cylinder                                         
                geometry1 = new THREE.CylinderGeometry(100, 100, 300, 16, 4, false);

                cylinder = new THREE.Mesh(geometry1 ,new THREE.MeshLambertMaterial( { color: 0x2D303D, wireframe: true, shading: THREE.FlatShading } ));
                //cylinder.position.x = 100;
                cylinder.position.y = -50;
                //cylinder.overdraw = true;
                scene.add(cylinder);
                alert(geometry1.faces.length);
                objects.push(cylinder);

                // projector
                projector = new THREE.Projector();

                // renderer

                renderer = new THREE.CanvasRenderer();
                renderer.setSize( window.innerWidth, window.innerHeight );
                container.appendChild( renderer.domElement );               

                // stats

                stats = new Stats();
                stats.domElement.style.position = 'absolute';
                stats.domElement.style.top = '0px';
                container.appendChild( stats.domElement );

                document.addEventListener( 'mousedown', onDocumentMouseDown, false );
                document.addEventListener( 'touchstart', onDocumentTouchStart, false );
                document.addEventListener( 'touchmove', onDocumentTouchMove, false );               

                window.addEventListener( 'resize', onWindowResize, false );

            }

            function onWindowResize() {

                camera.left = window.innerWidth / - 2;
                camera.right = window.innerWidth / 2;
                camera.top = window.innerHeight / 2;
                camera.bottom = window.innerHeight / - 2;
                camera.aspect = window.innerWidth / window.innerHeight;
                //camera.updateProjectionMatrix();

                renderer.setSize( window.innerWidth, window.innerHeight );

            }

            function onDocumentMouseDown( event ) {         

                event.preventDefault();

                document.addEventListener( 'mousemove', onDocumentMouseMove, false );
                document.addEventListener( 'mouseup', onDocumentMouseUp, false );
                document.addEventListener( 'mouseout', onDocumentMouseOut, false );

                mouseXOnMouseDown = event.clientX - windowHalfX;
                targetRotationOnMouseDown = targetRotation;

            }

            function onDocumentMouseMove( event ) {

                mouseX = event.clientX - windowHalfX;

                targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.02;

            }

            function onDocumentMouseUp( event ) {

                document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
                document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
                document.removeEventListener( 'mouseout', onDocumentMouseOut, false );

            }

            function onDocumentMouseOut( event ) {

                document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
                document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
                document.removeEventListener( 'mouseout', onDocumentMouseOut, false );

            }

            function onDocumentTouchStart( event ) {

                if ( event.touches.length === 1 ) {

                    event.preventDefault();

                    mouseXOnMouseDown = event.touches[ 0 ].pageX - windowHalfX;
                    targetRotationOnMouseDown = targetRotation;

                }

            }

            function onDocumentTouchMove( event ) {
                if ( event.touches.length === 1 ) {
                    event.preventDefault();
                    mouseX = event.touches[ 0 ].pageX - windowHalfX;
                    targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.05;
                }
            }

            function animate() {
                requestAnimationFrame( animate );
                render();
                stats.update();

            }

            function render() {             
                cylinder.rotation.y += ( targetRotation - cylinder.rotation.y ) * 0.05;
                renderer.render( scene, camera );               
            }           

        </script>

    </body>
</html> 
```

我正在引用这个[线程](https://github.com/mrdoob/three.js/issues/905) 如何将此圆柱体转换为 3d 弯曲开口端管？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T00:23:15.643

也许尝试看看这个小提琴[http://jsfiddle.net/NCWYy/](http://jsfiddle.net/NCWYy/)

# windows - 如何为重叠窗口设置确切的客户端大小？（温纳皮）

> ID：12423584
> 
> 赞同：3
> 
> 时间：2012-09-14T11:26:07.243
> 
> 标签：windows, winapi, user-interface

当我创建一个正常的“重叠”窗口时，我想设置一个精确的客户端大小（比如 300 x 300）。

有一个`AdjustWindowRectEx()`功能，我可以传递所需的客户区并获取可以传递给 CreateWindowEx 的大小，但它在文档中说我不应该将它用于重叠的窗口，我不明白为什么。

当我通过 300 x 300 时，我从中得到 306 x 326，当我收到时 `WM_SIZE`，客户端尺寸为 298 x 298，所以它太小了 2 个像素。

如何创建具有精确给定客户端大小的重叠窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:39:49.103

我不知道为什么 AdjustWindowRect 不起作用（除非您的客户区包含一个带有一个像素边框的子窗口）。

请注意，您可以将此功能用于重叠窗口。文档说您不能使用 WS_OVERLAPPED 样式（我猜是因为它的值为零），但您可以使用 WS_OVERLAPPEDWINDOW。

作为替代方案，您可以调用 GetWindowRect 和 GetClientRect，计算边框的宽度/高度（两个矩形的宽度/高度之差），将它们添加到所需的客户端大小并设置窗口大小。我相信您可以在显示窗口之前执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T15:13:37.170

我的错误如下：

```
AdjustWindowRectEx(&rect, WS_OVERLAPPEDWINDOW, WS_CLIPSIBLINGS, FALSE, WS_OVERLAPPEDWINDOW); 
```

更改为此修复它：

```
AdjustWindowRectEx(&rect, WS_OVERLAPPEDWINDOW, WS_CLIPSIBLINGS, FALSE, 0); 
```

# java - WebSphere Application Server 中的会话共享

> ID：12423586
> 
> 赞同：1
> 
> 时间：2012-09-14T11:26:17.743
> 
> 标签：java, jakarta-ee, websphere, rational-rsa

我有 WAS（Websphere Application Server）6.1 和 RSA（Rational Software Architect）7.0 我想在同一服务器和同一 EAR 下的两个不同应用程序之间共享会话。

我试过这个

[http://pic.dhe.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=/com.ibm.websphere.base.doc/info/aes/ae/tprs_sharing_data.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=/com.ibm.websphere.base.doc/info/aes/ae/tprs_sharing_data.html)

但是在 RSA 中，当我右键单击我的 EAR 时，不会显示“部署描述符编辑器”选项。

不知何故，我相信它在“ibm-application-ext.xmi”中添加了“共享会话上下文”扩展。我试图添加

```
<shared-session-context value="true"/> 
```

在这个文件中，但服务器抛出

```
Feature 'shared-session-context' not found. (file:///D:/Appl/IBM/SDP70/runtimes/base_v61/profiles/AppSrv01/META-INF/ibm-application-ext.xmi, 4, 27) 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:22:53.310

在 RAD/RSA 中，您可以通过扩展 EAR 项目并打开 application.xml 文件来访问部署描述符编辑器。我使用的是较新版本的 RAD（和 WebSphere），但我希望这将是同一个位置。

在编辑器的第一个选项卡，概述选项卡上，选中“共享会话上下文”框。当您保存时，这将创建或修改您的 ibm-application-ext.xmi 文件。

此外，当您查看其来源时，您会发现它的实际编写方式（在本例中也是我的 WebSphere 6.1）是作为`<applicationext:ApplicationExtension>`元素中的一个属性，并且名称与您使用的名称略有不同：

```
<applicationext:ApplicationExtension ... sharedSessionContext="true"> 
```

# c# - 想要在远程机器上运行应用程序，它是不同网络的一部分

> ID：12423589
> 
> 赞同：0
> 
> 时间：2012-09-14T11:26:37.610
> 
> 标签：c#

在我的应用程序中，我必须在
使用 PeExec 工具执行任务的远程机器上启动工作。它工作正常，能够远程启动工作。

关于 PsExec Tool 参考：http://ss64.com/nt/psexec.html

这里两台机器都是通过网络连接的。

命令 ：`PsExec.exe \\MachineIP -u qa -p qa -h -i "c:\AutomationTool.exe"`

但现在我想在机器上开始工作，这不是网络的一部分。
我使用了相同的 PsExec 但它抛出错误

> PsExec v1.98 - 远程执行进程\r\n版权所有 (C) 2001-2010 Mark Russinovich\r\nSysinternals - www.sysinternals.com\r\n\r\n句柄无效。\r\n正在连接到 10.90.206.177 ...\r\r\r无法访问 10.90.206.177：\r\n正在连接到 10.90.206.177..

请帮助我了解 PsExec Tool 是否支持在不同网络中执行作业，
如果支持，请告诉我配置设置以建立网络连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:43:01.823

我认为您想要实现的目标是不可能的，因为 PSEXEC 是一种网络工具，允许您通过网络访问远程机器。

您可以执行以下任何操作吗：-

> 1.) 您是否有权连接 IP 地址？
> 
> 2.) 如果你在 windows 中开始\运行，并输入这个地址，它是否允许你浏览 c: 驱动器？
> 
> 3.) 如果您 p​​ing 该地址，您是否收到任何数据包？

我非常怀疑您能否实现上述任何步骤。

您可能需要完全看一种不同的方法。

希望这可以帮助。

# python - 通过 Python 启动 VLC

> ID：12423592
> 
> 赞同：5
> 
> 时间：2012-09-14T11:26:51.627
> 
> 标签：python, vlc

要使用 python 启动 vlc，我已经这样做了：

```
import subprocess

p = subprocess.Popen(["C:\Program Files(x86)\VideoLAN\VLC\vlc.exe","C:\Users\Kamilos\Desktop\TBT\Tbt_S01E17.avi"]) 
```

但它不起作用，为什么？:p

（在 python 2.7.3 和 3 中测试）

编辑已解决：就像德雷克所说，只需用 blash 替换反斜杠

```
subprocess.Popen(["C:/Program Files(x86)/VideoLAN/VLC/vlc.exe","C:/Users/Kamilos/Desktop/TBT/Tbt_S01E17.avi"])‌​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T16:37:09.417

您在路径分隔符之后有效地转义了每个字符。同样，这`"\n"`意味着一个新行，`"\P"`,`"\V"`也意味着不仅仅是一个 2 字符的字符串。

您可以只使用`"\\"`（或者`"/"`，不记得 Windows 使用哪个）作为路径分隔符，但正确的方法是让 Python 为您使用[`os.path.join`](http://docs.python.org/library/os.path.html#os.path.join).

尝试：

```
import subprocess
import os

p = subprocess.Popen([os.path.join("C:/", "Program Files(x86)", "VideoLAN", "VLC", "vlc.exe"),os.path.join("C:/", "Users", "Kamilos", "Desktop", "TBT", "Tbt_S01E17.avi")]) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-14T12:32:32.723

验证路径是否存在：

```
import os
print os.path.exists("C:\Users\Kamilos\Desktop\TBT\Tbt_S01E17.avi") 
```

# c# - 如何点击 HttpWebResponse(Stream) 中的链接并再次获得点击响应？

> ID：12423598
> 
> 赞同：0
> 
> 时间：2012-09-14T11:27:27.533
> 
> 标签：c#, .net-4.0, hyperlink, httpwebresponse, windows-applications

请看下面的代码：

```
 string getData = "";

    HttpWebRequest req = (HttpWebRequest)WebRequest.Create("A Web Site");
    req.Method = "GET";
    req.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
    req.UserAgent = "Mozilla/5.0 (Windows NT 6.1; rv:15.0) Gecko/20100101 Firefox/15.0";
    req.ContentType = "text/html; charset=utf-8";
    req.Referer = "That Web Site Referer";
    req.KeepAlive = true;

    req.CookieContainer = cookieJar;

    HttpWebResponse res = (HttpWebResponse)req.GetResponse();

    Stream Stream = res.GetResponseStream();
    StreamReader reader = new StreamReader(Stream);
    string reader_str = reader.ReadToEnd(); 
```

运行这些代码后，我们在 reader_str 中有一个源网页字符串。
我如何单击 reader_str 中的链接（具有特定 ID）并再次像上面的代码一样获得单击响应？
我应该使用 webBrowser 还是 HtmlAgilityPack？
你能告诉我最快的方法吗！

**编辑：**
该链接无法访问。有一个带有 javascript 函数的图像（该图像的 onclick）。单击该图像后，js fn 创建一个 url 并进行回发。我应该点击那个图片...

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:41:51.090

可能您可以构建一个正则表达式来提取具有特定 id 的锚的 href，然后再次启动 HttpWebRequest 以获取提取的 href。

# python - 给定 3d 点绘制 3d 表面的最简单方法

> ID：12423601
> 
> 赞同：19
> 
> 时间：2012-09-14T11:27:37.243
> 
> 标签：python, python-2.7, plot, geometry-surface

我有很多（289）个带有 xyz 坐标的 3d 点，如下所示：

![3D 点](../Images/ddf7db636ee1b8dc97873d34cd06d96d.png)

用点简单地绘制 3d 空间是可以的，但我在表面上有问题有一些点：

```
for i in range(30):
        output.write(str(X[i])+' '+str(Y[i])+' '+str(Z[i])+'\n')

-0.807237702464 0.904373229492 111.428744443
-0.802470821517 0.832159465335 98.572957317
-0.801052795982 0.744231916692 86.485869328
-0.802505546206 0.642324228721 75.279804677
-0.804158144115 0.52882485495 65.112895758
-0.806418040943 0.405733109371 56.1627277595
-0.808515314192 0.275100227689 48.508994388
-0.809879521648 0.139140394575 42.1027499025
-0.810645106092 -7.48279012695e-06 36.8668106345
-0.810676720161 -0.139773175337 32.714580273
-0.811308686707 -0.277276065449 29.5977405865
-0.812331692291 -0.40975978382 27.6210856615
-0.816075037319 -0.535615685086 27.2420699235
-0.823691366944 -0.654350489595 29.1823292975
-0.836688691603 -0.765630198427 34.2275056775
-0.854984518665 -0.86845932028 43.029581434
-0.879261949054 -0.961799684483 55.9594146815
-0.740499820944 0.901631050387 97.0261463995
-0.735011699497 0.82881933383 84.971061395
-0.733021568161 0.740454485354 73.733621269
-0.732821755233 0.638770044767 63.3815970475
-0.733876941678 0.525818698874 54.0655910105
-0.735055978521 0.403303715698 45.90859502
-0.736448900325 0.273425879041 38.935709456
-0.737556181137 0.13826504904 33.096106049
-0.738278724065 -9.73058423274e-06 28.359664343
-0.738507612286 -0.138781586244 24.627237837
-0.738539663773 -0.275090412979 21.857410904
-0.739099040189 -0.406068448513 20.1110519655
-0.741152200369 -0.529726022182 19.7019157715 
```

没有相等的 X 和 Y 值。X 为 -0.8 至 0.8，Y 为 -0.9 至 0.9，z 为 0 至 111。

如果可能，如何使用这些点制作 3d 曲面图？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-08-30T21:23:13.057

matplotlib 的解决方案：

```
#!/usr/bin/python3

import sys

import matplotlib
import matplotlib.pyplot as plt
from matplotlib.ticker import MaxNLocator
from matplotlib import cm
from mpl_toolkits.mplot3d import Axes3D

import numpy
from numpy.random import randn
from scipy import array, newaxis

# ======
## data:

DATA = array([
    [-0.807237702464, 0.904373229492, 111.428744443],
    [-0.802470821517, 0.832159465335, 98.572957317],
    [-0.801052795982, 0.744231916692, 86.485869328],
    [-0.802505546206, 0.642324228721, 75.279804677],
    [-0.804158144115, 0.52882485495, 65.112895758],
    [-0.806418040943, 0.405733109371, 56.1627277595],
    [-0.808515314192, 0.275100227689, 48.508994388],
    [-0.809879521648, 0.139140394575, 42.1027499025],
    [-0.810645106092, -7.48279012695e-06, 36.8668106345],
    [-0.810676720161, -0.139773175337, 32.714580273],
    [-0.811308686707, -0.277276065449, 29.5977405865],
    [-0.812331692291, -0.40975978382, 27.6210856615],
    [-0.816075037319, -0.535615685086, 27.2420699235],
    [-0.823691366944, -0.654350489595, 29.1823292975],
    [-0.836688691603, -0.765630198427, 34.2275056775],
    [-0.854984518665, -0.86845932028, 43.029581434],
    [-0.879261949054, -0.961799684483, 55.9594146815],
    [-0.740499820944, 0.901631050387, 97.0261463995],
    [-0.735011699497, 0.82881933383, 84.971061395],
    [-0.733021568161, 0.740454485354, 73.733621269],
    [-0.732821755233, 0.638770044767, 63.3815970475],
    [-0.733876941678, 0.525818698874, 54.0655910105],
    [-0.735055978521, 0.403303715698, 45.90859502],
    [-0.736448900325, 0.273425879041, 38.935709456],
    [-0.737556181137, 0.13826504904, 33.096106049],
    [-0.738278724065, -9.73058423274e-06, 28.359664343],
    [-0.738507612286, -0.138781586244, 24.627237837],
    [-0.738539663773, -0.275090412979, 21.857410904],
    [-0.739099040189, -0.406068448513, 20.1110519655],
    [-0.741152200369, -0.529726022182, 19.7019157715],
])

Xs = DATA[:,0]
Ys = DATA[:,1]
Zs = DATA[:,2]

# ======
## plot:

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

surf = ax.plot_trisurf(Xs, Ys, Zs, cmap=cm.jet, linewidth=0)
fig.colorbar(surf)

ax.xaxis.set_major_locator(MaxNLocator(5))
ax.yaxis.set_major_locator(MaxNLocator(6))
ax.zaxis.set_major_locator(MaxNLocator(5))

fig.tight_layout()

plt.show() # or:
# fig.savefig('3D.png') 
```

结果：

![在此处输入图像描述](../Images/c6e30bd506a6fb002bcd5a3db91a9318.png)

可能不是很漂亮。但是，如果您提供更多积分，它将是。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-14T12:08:59.087

请查看[Axes3D.plot_surface](http://matplotlib.org/mpl_toolkits/mplot3d/tutorial.html#surface-plots)或其他`Axes3D`方法。[您可以在此处](https://stackoverflow.com/questions/9170838/surface-plots-in-matplotlib)、[此处](https://stackoverflow.com/questions/4363857/matplotlib-color-in-3d-plotting-from-an-x-y-z-data-set-without-using-contour)或[此处](http://www.astrobetter.com/3d-plotting-in-python-with-matplotlib-mplot3d/)找到示例和灵感。

编辑：

不在常规 XY 网格（一维中网格点之间的距离相等）上的 Z 数据对于绘制为三角曲面并非易事。对于给定的一组不规则 (X, Y) 坐标，存在多个可能的三角剖分。可以通过“最近邻”Delaunay 算法计算一个三角测量。这可以在 matplotlib 中完成。但是，它仍然有点乏味：

[http://matplotlib.1069221.n5.nabble.com/Plotting-3D-Irregularly-Triangulated-Surfaces-An-Example-td9652.html](http://matplotlib.1069221.n5.nabble.com/Plotting-3D-Irregularly-Triangulated-Surfaces-An-Example-td9652.html)

看起来支持将得到改善：

[http://matplotlib.org/examples/pylab_examples/tripcolor_demo.html](http://matplotlib.org/examples/pylab_examples/tripcolor_demo.html) [http://matplotlib.1069221.n5.nabble.com/Custom-plot-trisurf-triangulations-tt39003.html](http://matplotlib.1069221.n5.nabble.com/Custom-plot-trisurf-triangulations-tt39003.html)

[在http://docs.enthought.com/mayavi/mayavi/auto/example_surface_from_irregular_data.html](http://docs.enthought.com/mayavi/mayavi/auto/example_surface_from_irregular_data.html)的帮助下，我能够提出一个基于 mayavi 的非常简单的解决方案：

```
import numpy as np
from mayavi import mlab

X = np.array([0, 1, 0, 1, 0.75])
Y = np.array([0, 0, 1, 1, 0.75])
Z = np.array([1, 1, 1, 1, 2])

# Define the points in 3D space
# including color code based on Z coordinate.
pts = mlab.points3d(X, Y, Z, Z)

# Triangulate based on X, Y with Delaunay 2D algorithm.
# Save resulting triangulation.
mesh = mlab.pipeline.delaunay2d(pts)

# Remove the point representation from the plot
pts.remove()

# Draw a surface based on the triangulation
surf = mlab.pipeline.surface(mesh)

# Simple plot.
mlab.xlabel("x")
mlab.ylabel("y")
mlab.zlabel("z")
mlab.show() 
```

这是一个基于 5 点的非常简单的示例。其中 4 个位于 z 级别 1：

```
(0, 0) (0, 1) (1, 0) (1, 1) 
```

其中之一在 z-level 2 上：

```
(0.75, 0.75) 
```

Delaunay 算法获得正确的三角剖分，并按预期绘制曲面：

![上面代码的结果](../Images/39b1d12b4807a51b3d7d0e1ec70825c7.png)

使用命令安装[Python(x,y)](http://code.google.com/p/pythonxy/)后，我在 Windows 上运行了上述代码

```
ipython -wthread script.py 
```

# javascript - Node.js 更改应用程序以使用集群模块

> ID：12423602
> 
> 赞同：2
> 
> 时间：2012-09-14T11:27:38.627
> 
> 标签：javascript, node.js, socket.io, cluster-computing

我将更改我的应用程序以使用集群模块，并想知道它将如何改变我的生活。应用程序是一个聊天。它是关于从客户端到服务器应用程序以及从服务器应用程序到客户端发送和接收消息。还有一些其他的东西，比如每 X 秒将用户数组中的用户（单个）组合成对。

而且我想知道是否有些用户将登录一个工作人员，而其他一些用户将登录另一个工作人员，当我从 socket.io 库中的套接字数组中获取它们时，应用程序可以将它们组合成对吗？

我是 Node.js 集群的新手，并尝试制作它的图像。

编辑：

我找到了：[https ://github.com/fent/socket.io-clusterhub](https://github.com/fent/socket.io-clusterhub)

这是用于轻松使用带有 socket.io 的集群的库。现在我想知道它是否运作良好。因为这似乎太容易了，我不信任。我可以测试它，但不能与很多用户一起测试。我不知道那时会发生什么。所以我想问一下是否有人知道这个图书馆clusterhub（上面的链接）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:13:55.060

您可以正常使用 socket.io，但在后台使用 redis 存储。它还将支持 socket.io 上的多个实例，而无需任何外部库。它甚至支持多个实例的房间。奇迹般有效！

链接到如何使用 redis 设置 [socket.io：https://github.com/LearnBoost/socket.io/wiki/Configuring-Socket.IO](https://github.com/LearnBoost/socket.io/wiki/Configuring-Socket.IO)

# php - PHP preg_match 检查字符串与特定单词

> ID：12423604
> 
> 赞同：0
> 
> 时间：2012-09-14T11:27:40.167
> 
> 标签：php, match

我想检查字符串只包含几个特定的​​单词。

4bored4,4blur4,4blingeye4,4bathing4,4congratz4,4crisp4,4curse4，空白和圆点。

这是我的代码

```
$s = '...... 4crisp4 4crisp4 4crisp4';

preg_match('/^[4bored4|4blur4|4blingeye4|4bathing4|4congratz4|4crisp4|4curse4| |\.]+$/',$s,$m); 
```

但失败了 $s = 'hahahha 4crisp4 4crisp4 4crisp4'; 为什么这个带有 haha​​hha 单词的字符串可以使用这种模式？

如果此字符串上没有特定单词、点、空格，我希望返回失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:31:48.330

使用时`^`意味着您只在字符串的开头查找它。并且`$`意味着您只在字符串的末尾寻找它。

这将起作用：

```
$s = '4crisp4 4crisp4 4crisp4';
preg_match('/^[4bored4|4blur4|4blingeye4|4bathing4|4congratz4|4crisp4|4curse4| |\.]+$/',$s,$m); 
```

这不起作用：

```
$s = 'asdf 4crisp4 4crisp4 4crisp4';
preg_match('/^[4bored4|4blur4|4blingeye4|4bathing4|4congratz4|4crisp4|4curse4| |\.]+$/',$s,$m); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:32:31.977

像这样试试

```
preg_match('/[4bored4|4blur4|4blingeye4|4bathing4|4congratz4|4crisp4|4curse4| |\.]+$/',$s,$m); 
```

你需要删除“^”它会给你以开头的匹配

# java - 如何使用 JExcel 写入现有的 excel 文件

> ID：12423605
> 
> 赞同：0
> 
> 时间：2012-09-14T11:27:42.167
> 
> 标签：java, excel, api

嗨，我是这个 JExcel API 的新手，我想写入现有的 Excel 工作表并希望将更改保存在该文件中。我不知道如何在 JExcel 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:31:33.043

你可以参考

1.  [http://www.teamdev.com/downloads/jexcel/docs/JExcel-PGuide.html](http://www.teamdev.com/downloads/jexcel/docs/JExcel-PGuide.html)
2.  [http://www.andykhan.com/jexcelapi/tutorial.html](http://www.andykhan.com/jexcelapi/tutorial.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:33:16.340

您是否尝试过阅读文档？

我使用过 JExcel，它是一个简单的框架。

试试这个[http://www.andykhan.com/jexcelapi/tutorial.html](http://www.andykhan.com/jexcelapi/tutorial.html)

让你开始改变这个你的 excel 文件，之后你只需要用 JExcel 浏览文件就很容易了。

```
Workbook workbook = Workbook.getWorkbook(new File("myfile.xls")); 
```

# java - 在模型类中使用 java.awt.Point - 编码风格不好？

> ID：12423606
> 
> 赞同：4
> 
> 时间：2012-09-14T11:27:44.940
> 
> 标签：java, coding-style

我有一个对象在坐标系上移动的场景。我想在我的模型类中使用 java.awt.Point，因为它提供了我需要的所有功能（位置表示、翻译、距离计算）。

但是在我的模型中使用 java.awt 类感觉有点不对劲。但是重写相同的功能也不是答案。

所以我的问题是：在模型类中使用此类与图形相关的类是否可以，还是这种风格不好？如果风格不好，什么是好的替代方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T11:31:54.010

如果您计划有一天在 Android 等其他平台上重用该模型，那么这确实不是一个好主意。

一般来说，我同意 java.awt 类不应该是应用程序模型的一部分。我想我会创建自己的 Point 类并在其中定义我需要的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T11:31:31.053

我不会使用它们，因为在非 GUI 环境（控制台）中运行它们时，将 GUI 类添加到我们的程序会导致问题，因为它们无法初始化（我不记得是 AWT 还是 Swing）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T14:54:32.440

我会滚动我自己的副本，不是因为 Point 类是 GUI 的一部分，而是因为我更喜欢我的模型类只包含*不可变*的值。

# git - PUSH后如何修改或删除GIT中的提交日志？

> ID：12423612
> 
> 赞同：0
> 
> 时间：2012-09-14T11:28:05.587
> 
> 标签：git

我使用了一个非常糟糕的日志模板，并为该提交发出了 git push 。如何修改或删除此日志条目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:47:49.010

答案取决于其他人是否撤回了您的提交。如果他们有，那么您就会被错误的模板所困扰（或者至少纠正提交的每个本地拉取可能不值得您花时间）。如果其他人没有拉它...

如果它是最近的提交，您可以使用`git commit --amend`.

如果它是过去某个数量的提交（称为 commit `abcd1234`），那么您可以使用`git rebase`：

```
git rebase -i abcd1234~1 
```

在交互式屏幕中，更改`pick`为该`reword`提交，其余部分保持不变。变基将继续到该提交，然后暂停，允许您改写提交消息。

无论哪种情况，您都需要“强制推送”重新建立的分支：

```
git push --force origin <branch> ;# using the `--force` flag
git push origin +:<branch> ;# same as above, just different syntax 
```

# python - 嵌套函数中的局部变量

> ID：12423614
> 
> 赞同：110
> 
> 时间：2012-09-14T11:28:10.800
> 
> 标签：python, scope, closures, nested-function

好的，请耐心等待，我知道这看起来会非常复杂，但请帮助我了解发生了什么。

```
from functools import partial

class Cage(object):
    def __init__(self, animal):
        self.animal = animal

def gotimes(do_the_petting):
    do_the_petting()

def get_petters():
    for animal in ['cow', 'dog', 'cat']:
        cage = Cage(animal)

        def pet_function():
            print "Mary pets the " + cage.animal + "."

        yield (animal, partial(gotimes, pet_function))

funs = list(get_petters())

for name, f in funs:
    print name + ":", 
    f() 
```

给出：

```
cow: Mary pets the cat.
dog: Mary pets the cat.
cat: Mary pets the cat. 
```

所以基本上，为什么我没有得到三种不同的动物？不是`cage`'打包'到嵌套函数的本地范围吗？如果不是，如何调用嵌套函数查找局部变量？

我知道遇到这类问题通常意味着一个人“做错了”，但我想了解会发生什么。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-09-14T11:37:39.570

嵌套函数在执行时而不是在定义时从父范围查找变量。

编译函数体，验证“自由”变量（未在函数本身中通过赋值定义），然后将其作为闭包单元绑定到函数，代码使用索引来引用每个单元。`pet_function`因此有*一个*自由`cage`变量`cage`（`get_petters`

当您实际调用该函数时，该闭包将用于查看*您调用该函数时*`cage`周围范围内的值。问题就在这里。当你调用你的函数时，函数已经完成了计算它的结果。在执行期间的某个时间点，局部变量被分配了 、 和 字符串中的每一个，但在函数的末尾，包含最后一个值。因此，当您调用每个动态返回的函数时，您会得到打印的值。*`get_petters``cage``'cow'``'dog'``'cat'``cage``'cat'``'cat'`*

 *解决方法是不依赖闭包。您可以改用*偏函数*，创建*新的函数作用域*，或将变量绑定*为关键字参数的默认值*。

*   部分函数示例，使用[`functools.partial()`](http://docs.python.org/library/functools.html#functools.partial)：

    ```
    from functools import partial

    def pet_function(cage=None):
        print "Mary pets the " + cage.animal + "."

    yield (animal, partial(gotimes, partial(pet_function, cage=cage))) 
    ```

*   创建一个新的范围示例：

    ```
    def scoped_cage(cage=None):
        def pet_function():
            print "Mary pets the " + cage.animal + "."
        return pet_function

    yield (animal, partial(gotimes, scoped_cage(cage))) 
    ```

*   将变量绑定为关键字参数的默认值：

    ```
    def pet_function(cage=cage):
        print "Mary pets the " + cage.animal + "."

    yield (animal, partial(gotimes, pet_function)) 
    ```

不需要`scoped_cage`在循环中定义函数，编译只发生一次，而不是在循环的每次迭代中。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-14T11:39:16.727

我的理解是，当实际调用产生的 pet_function 时，而不是之前，在父函数命名空间中查找笼子。

所以当你这样做时

```
funs = list(get_petters()) 
```

您生成 3 个函数，它们将找到最后创建的笼子。

如果您将最后一个循环替换为：

```
for name, f in get_petters():
    print name + ":", 
    f() 
```

你实际上会得到：

```
cow: Mary pets the cow.
dog: Mary pets the dog.
cat: Mary pets the cat. 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-14T11:38:19.917

这源于以下

```
for i in range(2): 
    pass

print(i)  # prints 1 
```

迭代后的值`i`被懒惰地存储为其最终值。

作为生成器，该函数可以工作（即依次打印每个值），但是**当转换为列表时，它会在生成器上运行**`cage`，因此所有对( ) 的调用都会`cage.animal`返回猫。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-20T16:02:51.193

让我们简化问题。定义：

```
def get_petters():
    for animal in ['cow', 'dog', 'cat']:
        def pet_function():
            return "Mary pets the " + animal + "."

        yield (animal, pet_function) 
```

然后，就像在问题中一样，我们得到：

```
>>> for name, f in list(get_petters()):
...     print(name + ":", f())

cow: Mary pets the cat.
dog: Mary pets the cat.
cat: Mary pets the cat. 
```

但是，如果我们避免创建`list()`第一个：

```
>>> for name, f in get_petters():
...     print(name + ":", f())

cow: Mary pets the cow.
dog: Mary pets the dog.
cat: Mary pets the cat. 
```

这是怎么回事？为什么这种细微的差异会完全改变我们的结果？

* * *

如果我们看一下`list(get_petters())`，从不断变化的内存地址中可以清楚地看出，我们确实产生了三个不同的函数：

```
>>> list(get_petters())

[('cow', <function get_petters.<locals>.pet_function at 0x7ff2b988d790>),
 ('dog', <function get_petters.<locals>.pet_function at 0x7ff2c18f51f0>),
 ('cat', <function get_petters.<locals>.pet_function at 0x7ff2c14a9f70>)] 
```

但是，看看`cell`这些函数绑定到的 s：

```
>>> for _, f in list(get_petters()):
...     print(f(), f.__closure__)

Mary pets the cat. (<cell at 0x7ff2c112a9d0: str object at 0x7ff2c3f437f0>,)
Mary pets the cat. (<cell at 0x7ff2c112a9d0: str object at 0x7ff2c3f437f0>,)
Mary pets the cat. (<cell at 0x7ff2c112a9d0: str object at 0x7ff2c3f437f0>,)

>>> for _, f in get_petters():
...     print(f(), f.__closure__)

Mary pets the cow. (<cell at 0x7ff2b86b5d00: str object at 0x7ff2c1a95670>,)
Mary pets the dog. (<cell at 0x7ff2b86b5d00: str object at 0x7ff2c1a952f0>,)
Mary pets the cat. (<cell at 0x7ff2b86b5d00: str object at 0x7ff2c3f437f0>,) 
```

对于这两个循环，[`cell`](https://stackoverflow.com/a/23830790/365102)对象在整个迭代过程中保持不变。但是，正如预期的那样，`str`它引用的具体内容在第二个循环中有所不同。`cell`对象引用，在被调用`animal`时创建。`get_petters()`但是，*在生成器函数运行*`animal`时会更改`str`它引用的对象。

 *在第一个循环中，在每次迭代中，我们创建了所有的`f`s，但我们只有在生成器`get_petters()`完全耗尽并且`list`已经创建了一个函数之后才调用它们。

在第二个循环中，在每次迭代期间，我们暂停`get_petters()`生成器并在每次暂停后调用`f`。因此，我们最终检索到`animal`生成器函数暂停的那一刻的值。

正如@Claudiu 对[类似问题](https://stackoverflow.com/a/233835/365102)的回答：

> 创建了三个单独的函数，但它们每个都有定义它们的环境的闭包 - 在这种情况下，全局环境（如果循环放置在另一个函数中，则为外部函数的环境）。然而，这正是问题所在——在这种环境中，`animal`是变异的，并且闭包都引用了相同的`animal`.
> 
> [编者注：`i`已更改为`animal`。]**

# objective-c - Objective C 在栈上分配对象

> ID：12423627
> 
> 赞同：4
> 
> 时间：2012-09-14T11:29:09.560
> 
> 标签：objective-c, object, stack

我是 Objective C 的新手，并且对对象进行了一些练习。虽然类似的东西可以`Fraction* f = [[Fraction alloc] init ];`工作，但每当我尝试这样做时，`Fraction c;`我会得到`Interface type cannot be statically allocated`是否有在堆栈上分配对象（如在 c++ 中）？还是我在尝试错误的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T11:35:52.723

您不能在 Objective C 中静态分配对象。这有很多原因。包括应该初始化对象但允许初始化方法更改对象地址的事实。

在 C++ 中，构造函数必须初始化它所调用的对象，并且不能以任何方式更改对象地址。这在 Objective C 中是不正确的。构造函数的等价物（alloc+init* 序列或类级别的方法）被允许决定它们将要更改它们被调用的对象的地址（它们将处理当然，释放原始对象）。

当然，他们无法释放静态分配的内存，也无法更改堆栈的地址。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T08:18:33.267

从技术上讲，你可以（见下面的代码），但你不应该。此外，无论是在堆栈中还是在堆中，您只有一个指向对象的指针，而不是对象本身。也就是说，你应该写`Fraction *c`，而不是`Fraction c`。

```
// Allocate an Objective-C object on the stack.
// Original code By Graham Lee: 
// https://gist.github.com/iamleeg/5290797     

#import <Foundation/Foundation.h>
#include <stdlib.h>
#include <objc/runtime.h>

@interface A : NSObject
@property (assign) int meaning;
@end

@implementation A

- (id)init {
    if ([super init]) {
        _meaning = 42;
    }
    return self;
}

@end

int main(int argc, char *argv[]) {
    @autoreleasepool {

        // allocate and zero stack memory
        size_t size = class_getInstanceSize([A class]);
        id obj = (__bridge_transfer id) alloca(size);
        memset((__bridge void*)obj, 0, size);

        // set class and initialize the object
        object_setClass(obj, [A class]);
        obj = [obj init];

        NSLog(@"meaning: %d", [obj meaning]);

        // transfer ownership from ARC to CF so ARC doesn't 
        // try to improperly free the stack allocated memory
        CFTypeRef ref = (__bridge_retained CFTypeRef) obj;
    }
} 
```

`alloca()`是非标准的，不安全的，不可移植的，并且容易发生堆栈溢出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T11:35:32.970

不，所有对象都分配在 Obj-C 的堆上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T11:36:06.900

不，您不能将堆栈用于 Objective-C 对象的内存，它必须是堆（通过`alloc`和`init`）。

虽然正如@wattson12 所指出的，您显然可以将对象引用（指针）存储在堆栈上，但这仍然不会将堆栈用于对象的内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T11:33:26.230

您收到的错误是由于语法错误，您需要这样做：

```
Fraction *c; 
```

请注意缺少的 * 表示这是一个指向对象的指针（您没有将此对象存储在堆栈中，您只是在创建对（潜在）对象的引用）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-15T06:22:42.197

除块对象外，所有objective-c 对象都分配在**堆中。**造成这种情况的主要原因是：

1.  在 Objective-C 中不跟踪指向对象的指针（相反，Objective-C 使用引用计数系统进行内存管理）；如果您移动对象，它们将无法更新。
2.  **当创建它们的函数返回时，**堆栈对象将被销毁。****

 **Mike Ash的[帖子](https://www.mikeash.com/pyblog/friday-qa-2010-01-15-stack-and-heap-objects-in-objective-c.html)有助于理解这一点。**

# c++ - 这个简单但有用的模式是否太简单而不能成为真正的模式？

> ID：12423628
> 
> 赞同：0
> 
> 时间：2012-09-14T11:29:10.660
> 
> 标签：c++, design-patterns

覆盖派生函数的行为，同时仍调用其父函数的相同函数，例如参见 C::foo()。它仍然具有 A::foo 的行为，但对其进行了扩展。成为模式太简单了吗？

```
class A
{
public:
    virtual ~A() {}
    virtual void foo(){ MSG("A::foo");}
};

class B : public A
{
public:
    virtual void foo(){ MSG("B::foo");}
};

class C : public B
{
public:
    virtual void foo(){ 
        A::foo(); //here still have the behaviour of A::foo but extended it
        MSG("C::foo");
    }
};

void callFoo(A* p)
{
    p->foo();
}

int main()
{
    boost::scoped_ptr<A> myPtr(new A());
    callFoo(myPtr.get());

    myPtr.reset(new B());
    callFoo(myPtr.get());

    myPtr.reset(new C());
    callFoo(myPtr.get());

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:32:59.620

“简单但有用的模式”是指“语言特征”。您不能只使用一次语言功能并称其为模式。这不是一种模式。只是您使用了语言功能。我的意思是，恭喜，我也认为使用语言特性是用一种语言构建程序的重要方法，但是，它与任何模式都相去甚远。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T12:09:33.323

不需要将设计元素复杂到称为“模式”。

但是，要求它是有用的；更容易产生正确、连贯、高效和灵活的设计。在基类中实现有用的功能，然后给派生类增加负担以记住手动调用它，并不能真正满足该要求，因此我很想将其标记为“反模式”。添加一个中间基类，并期望派生类实现者找出他们真正想要的覆盖，更像是“令人困惑的混乱”。

如果您想要一个真正的模式（在著名书籍中使用大写字母描述），那么模板方法可能是合适的 - 基类包含一个执行一些常见功能的*非虚拟*函数，将部分工作委托给可以被覆盖的*私有的纯虚函数。*就个人而言，我会更进一步，委托给一个单独的类，因为我喜欢给每个类一个单一的责任，并避免从抽象接口以外的任何东西继承，给出一些类似的东西：

```
class FooInterface {
public:
    virtual ~FooInterface() {}
    virtual void foo() = 0;
};

class A {
public:
    void foo(FooInterface & impl) {
        MSG("A::foo"); // Happens whatever the implementation does
        impl.foo();
    }
};

class C : public FooInterface {
    virtual void foo() {
        // We don't have to worry about A at all
        MSG("C::foo");
    }
}; 
```

# java - K，V 的通用性如何？

> ID：12423629
> 
> 赞同：1
> 
> 时间：2012-09-14T11:29:20.440
> 
> 标签：java, generics

如果我定义了`Map<K,V> map = new HashMap<K, V>()`为什么我不能这样做：

`map.put(new MyKey<CustomObject>(), new SomeOtherObject<CustomObject>());`

但是，如果我通过另一种方法来做到这一点，它会起作用，即：

```
add(new MyKey<CustomObject>(), new SomeOtherObject<CustomObject>());  

public <K, V> void add(K k, V v){  
        Map<K, V> threadLocalMap = new HashMap<K, V>();  
        threadLocalMap.put(k, v);  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:31:12.953

您需要显式声明地图中使用的类型：

```
Map<MyKey,SomeOtherObject> map = new HashMap<MyKey, SomeOtherObject>();
map.put(new MyKey<CustomObject>(), new SomeOtherObject<CustomObject>()); 
```

在您的第二个示例中，该`add`方法是通用的，因此当您调用它时，K 和 V 将替换为调用代码中使用的实际类型。

**编辑**

您似乎误解了 的含义`Map<K, V>`。K 和 V 没有任何具体含义，它们只是表明您可以“参数化”映射以仅接受某种类型的键和某种类型的值。但定义这些类型是您的责任。

在您的第一个示例中，您希望将`MyKey`其用作键 (the `K`) 和`SomeOtherObject`值 (the `V`) 的类型。所以你需要为这些类型创建一个特定的地图：`Map<MyKey,SomeOtherObject> map = new HashMap<MyKey, SomeOtherObject>();`.

你不能简单地写`Map<K, V>`，因为 K 和 V 对编译器没有任何意义（除非你创建了一个名为 K 的类和一个名为 V 的类，但我假设你没有）。

在你的第二个例子中，你使用了一个泛型方法，它接受两个类型为 K 和 V 的参数。当调用该方法时，K 和 V 被接收到的实际类型替换，所以你的例子中的代码被转换为非常类似于我答案顶部的代码。

我希望这可以澄清事情。我建议您花时间阅读有关泛型的教程并查看具体示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T11:30:10.573

这不是它的工作方式：类是通用的，但实例必须是特定的。

您指定您的地图在实例化时可用的类：

```
Map<SomeClass, SomeOtherClass> myMap = new HashMap<SomeClass, SomeOtherClass>(); 
```

如果你想要一个完全通用的实例，你会使用这个：

```
Map myMap = new HashMap(); 
```

那是......没有“泛型”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:34:57.437

正如其他答案中提到的那样，实例必须具体说明 K 和 V 是什么（这是泛型的重点 - 如果您希望能够添加任何您想要的内容，您只需使用`Map`不带泛型的 a，或`Map<Object, Object>`）。但是，要能够添加多个自定义类，您可以做的是让它们都扩展一个基类并将 Map 设置为`Map<MyKeyBaseClass, MyValueBaseClass>`. 如果键或值可以是任何东西，请`Object`改用。如果您认为泛型的目的实际上是缩小您接受的对象的范围，而不是扩大范围，您可能会发现它更容易。

编辑：您似乎对泛型的基本原则有一些困难，我建议您阅读[Java 泛型教程](http://docs.oracle.com/javase/tutorial/java/generics/)。

# android - 如何在android中将数据从一个片段传递到另一个片段？

> ID：12423635
> 
> 赞同：3
> 
> 时间：2012-09-14T11:29:26.877
> 
> 标签：android

我创建了两个片段名称是 Frag_A 和 Frag_B。在 Frag_A 中，我在列表视图中显示所有数据。并且还有更新按钮。在具有编辑文本和保存按钮的 Frag_B 中。首先，当用户从列表视图中选择一项，然后单击更新。当单击更新 Frag_A 被 Frag_B 替换并在编辑文本中显示选定列表视图中的选定项目时，用户进行更改并保存。如何实现此演示？提前致谢。

我的 DatabaseAdapter 文件是 DBAdapter.java 文件

```
package com.dlcpl.insert_view;

import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBAdapter {

    public static final String KEY_TEXT="text";
    public static final String TAG="DBAdapter";

    public static final String DATABASE_NAME="taskmanager.db";
    public static final String DATABAS_TABLE="text_table";
    public static final int DATABASE_VERSION=1;

    public static final String DATABASE_CREATE="create table "+DATABAS_TABLE+"("+KEY_TEXT+" varchar(500) not null);";
    public final Context context;
    public DatabaseHelper DBHelper;
    public SQLiteDatabase db;

    public DBAdapter(Context ctx)
    {
        this.context=ctx;
        DBHelper=new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper
    {
        public DatabaseHelper(Context context)
        {
            super(context,DATABASE_NAME,null,DATABASE_VERSION );
        }

        @Override
        public void onCreate(SQLiteDatabase db)
        {
            try
            {
                db.execSQL(DATABASE_CREATE);
            }
            catch(SQLException e)
            {
                e.printStackTrace();
            }
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
        {
            Log.w(TAG,"Upgrading database from version"+oldVersion+"to"+newVersion+",which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS text_table");
            onCreate(db);
        }
    }

    //---opens the database---
    public DBAdapter open() throws SQLException
    {
        db=DBHelper.getWritableDatabase();
        return this;
    }

    //---close the database---
    public void close()
    {
        DBHelper.close();
    }

    //---insert a text into the database---
    public long insertText(String text)
    {
        ContentValues initialValues=new ContentValues();
        initialValues.put(KEY_TEXT, text);
        return db.insert(DATABAS_TABLE, null, initialValues);
    }

    //---delete a particular contact---
    public boolean deleteContact(String text)
    {
        return db.delete(DATABAS_TABLE, KEY_TEXT + "=" + text, null) > 0;
    }

    //---retrieves all the text
    /*public Cursor getAlltext()
    {
        return db.query(DATABAS_TABLE, new String[] {KEY_TEXT}, null, null, null, null, null);
    }*/

    public List<String[]> getAlltext()
    {

        List<String[]> list = new ArrayList<String[]>();
        Cursor cursor = db.query(DATABAS_TABLE, new String[] {KEY_TEXT}, null, null, null, null, null); 

        int x=0;
        if (cursor.moveToFirst()) {
            do {
                String[] b1=new String[]{cursor.getString(0)};

                list.add(b1);

                x=x+1;
            } while (cursor.moveToNext());
        }
        if (cursor != null && !cursor.isClosed()) {
            cursor.close();
        } 
        cursor.close();

        return list;
    }

    //---retrieves a particular contact---
    public Cursor gettext(String string) throws SQLException
    {
        Cursor mCursor= db.query(true, DATABAS_TABLE, new String[] {KEY_TEXT}, KEY_TEXT + "=" + string, null, null, null, null, null);      

        if(mCursor !=null)
        {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    //---updates a text_table---
    public boolean updateContact(String text)
    {
        ContentValues args=new ContentValues();
        args.put(KEY_TEXT, text);
        return db.update(DATABAS_TABLE, args, KEY_TEXT + "=" + text, null) > 0;
    }

} 
```

* * *

我的 Frag_A 文件是 View_Data.java

```
package com.dlcpl.insert_view;

import java.util.ArrayList;
import java.util.List;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.TextView;
//import android.widget.Toast;
import android.app.ListFragment;
import android.graphics.Color;
public class View_Data extends ListFragment
{
     public static final String ROW_ID = "row_id";
     ListView listView;
    TextView selection;
    TextView label1;
    public int idToModify; 
    List<String[]> list = new ArrayList<String[]>();
    List<String[]> names2 =null ;
    String[] stg1;  
    EditText A_input;
    @Override
    public View onCreateView(LayoutInflater inflater,
    ViewGroup container, Bundle savedInstanceState) {

         return inflater.inflate(R.layout.view_data, container, false);
    }   

    @Override
    public void onStart()
    {
        super.onStart();
    DBAdapter dbAdapter =new DBAdapter(getActivity());
        dbAdapter.open();       
         names2 = dbAdapter.getAlltext();
         stg1=new String[names2.size()];
         int x=0;
            String stg;

            for (String[] name : names2) {
                stg = name[0];

                stg1[x]=stg;
                x++;
            }
         setListAdapter(new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, stg1));

         Button btnLoad = (Button) getActivity().findViewById(R.id.updata);

            btnLoad.setOnClickListener( new View.OnClickListener() {             
                 public void onClick(View v) {  

                     android.app.FragmentManager fragmentManager = getFragmentManager();                
                     android.app.FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();                
                     Update_data updatedata = new Update_data(); 
                      fragmentTransaction.replace(R.id.fragment,updatedata);                         

                      fragmentTransaction.commit();           
                     }        
                 }); 

        dbAdapter.close();

    }
     public void onListItemClick(ListView parent, View v, int position, long id) 
        {       

            for(int a = 0; a < parent.getChildCount(); a++) 
            { 
                parent.getChildAt(a).setBackgroundColor(Color.WHITE);

            } 
            TextView label1=(TextView)getActivity().findViewById(R.id.textdisplay);
           v.setBackgroundColor(Color.LTGRAY);   
           label1.setText(stg1[position]);
        }   
} 
```

Frag_B 文件是 Update_data.java

```
package com.dlcpl.insert_view;

import android.app.Fragment;
import android.database.Cursor;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.EditText;
//import android.widget.ListView;
import android.widget.TextView;
//import android.support.v4.app.Fragment;
import android.widget.Toast;

public class Update_data  extends Fragment
{
    //String Text;
    EditText A_input;
     TextView label1;

    @Override
    public View onCreateView(LayoutInflater inflater,
    ViewGroup container, Bundle savedInstanceState) 
    {       
         return inflater.inflate(R.layout.update, container, false);        
    }   

    @Override
    public void onStart()
    {
        super.onStart();
        Button btnLoad = (Button) getActivity().findViewById(R.id.save_btn);
         A_input = (EditText)getActivity().findViewById(R.id.udate_text);

            btnLoad.setOnClickListener( new View.OnClickListener() {             
                DBAdapter Adapter =new DBAdapter(getActivity());

                public void onClick(View v) {                                

                    Adapter.open(); 
                     Cursor c = Adapter.gettext("text");
                        if (c.moveToFirst())
                        {
                        DisplayContact(c);
                        }
                        else
                        {
                        Toast.makeText(getActivity(), "No contact found", Toast.LENGTH_LONG).show();

                        }
                        Adapter.close();

                     }        
                 });  

    }
    public void DisplayContact(Cursor c)
    {  
        A_input.setText(c.getString(0));

    }

} 
```

我的主要活动文件是 Home.java

```
package com.dlcpl.insert_view;

import android.app.Activity;
import android.os.Bundle;
//import android.support.v4.app.FragmentActivity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

public class Home extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_home);        

   Button insertData = (Button) findViewById(R.id.button1);
        insertData.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Insert_Data insertdata = new Insert_Data();               
                 android.app.FragmentManager fragmentManager = getFragmentManager();                
                 android.app.FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();                
                 fragmentTransaction.replace(R.id.fragment,insertdata);                
                 fragmentTransaction.commit();              
            }

        });

      Button viewData = (Button) findViewById(R.id.button2);
        viewData.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                View_Data viewdata = new View_Data();               
                 android.app.FragmentManager fragmentManager = getFragmentManager();                
                 android.app.FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();                
                 fragmentTransaction.replace(R.id.fragment,viewdata);                
                 fragmentTransaction.commit();              
            }

        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_home, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T11:48:21.150

尝试捆绑，

我现在不记得代码了，但是当我的一个朋友使用fragment时，他使用了Bundle，我认为他在某些调用方法中使用了像最后一个参数一样。

更新：

发送：

```
 Fragment fragment = new Fragment();
 Bundle bundle = new Bundle();
 bundle.putInt(key, value);
 fragment.setArguments(bundle); 
```

取回：

```
 Bundle bundle = this.getArguments();
 int myInt = bundle.getInt(key, defaultValue); 
```

我在这个链接中找到了上面的代码：[如何将一些数据传输到另一个片段？](https://stackoverflow.com/questions/7149802/how-to-transfer-some-data-to-another-fragment)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T11:47:30.783

由于您的两个片段共享相同的活动“主页”，您可以使用它在两个片段之间共享信息。View_Data 可以调用：

```
((Home) getActivity()).shareData("example string"); 
```

这可能对应于 Home 中的 shareData() 方法：

```
public void shareData(String string){
    android.app.FragmentManager fragmentManager = getFragmentManager();                
    Update_data fragment = (Update_data) fragmentManager.findFragmentByTag( "your_tag" );
    fragment.update(string);
} 
```

您将需要设置第二个片段的 ID，以便片段管理器能够找到该片段并在您的第二个片段中创建公共方法“更新”。

编辑：要设置片段的标签，请更改片段添加代码以包含标签“your_tag”。

```
View_Data viewdata = new View_Data();               
android.app.FragmentManager fragmentManager = getFragmentManager();                
android.app.FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();                
fragmentTransaction.replace(R.id.fragment,viewdata,"your_tag");                
fragmentTransaction.commit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:42:28.940

您可以使用 setArgument 和 getArgument 方法来传递数据

```
ft.replace(R.id.menuContent, Fragment.instantiate(getApplicationContext(), name, bundle)); 
```

您可以通过 getArguments() 方法在 FragmentB 类中获取此捆绑包，其中 name 是类的名称，例如`fragmentB.class.getName()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T11:37:01.163

*   选项 1：使用 Intent，您可以将`setIntent()`所有`getIntet()`您希望的数据放在您的 Intent 上，
*   选项 2：您的两个片段都留在同一个活动中。您可以通过调用（）获取活动参考`getActivity()`

在这两种情况下，您的数据都将存储在活动级别中，这很好，因为您的片段位于同一个活动中，因此这两个选项都可以很好地完成工作。

# module - 模块外的 Fortran 模块过程

> ID：12423637
> 
> 赞同：0
> 
> 时间：2012-09-14T11:29:50.433
> 
> 标签：module, fortran

我在谷歌上一无所获，所以...

我尝试使用 Fortran 90 的所有面向对象的特性，并为一些特定的工作（如 C++ 中的类）创建模块。我写了这样的东西：

```
module test

integer, PRIVATE :: dummy
PUBLIC :: sub

contains 

subroutine sub()
dummy = 1
end subroutine sub

end module test 
```

但是，我有大约 10 个这样的子例程，将它们全部放在一个文件中是非常糟糕的主意。是否可以告诉编译器，即`sub`模块子例程，但将其放在另一个文件中？因为，看起来只有当我在`sub`那里定义 body 时才会编译这段代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:41:48.333

有可能的。我不知道这是否好，但这是可能的。你可以使用`include "filename"`或者如果你也使用前驱`#include "filename"`。

这样，您可以将任何其他文件中的文本包含在`include`语句的位置。但这是有争议的，如果这是一件积极的事情，因为一个文件中的 10 个程序通常不会太多，如果它们不是非常长（那么你应该改变它们）。

（我必须小心，上次我提到 include 是可能的，我被不喜欢它的人强烈过度投票。）

另请注意，Fortran 2003 带来了更多面向对象，包括类型绑定过程，如果您需要更多对象实例，则可能值得考虑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T11:53:35.463

作为对您的问题的直接回答 - 是的 - 您可以使用`INCLUDE`一行来引用一个文件，该文件包含`sub`来自包含模块其余部分定义的文件中的定义（包含子例程代码的文件的包含行将在模块中的`CONTAINS`语句之后。

```
MODULE test
  INTEGER, PRIVATE :: dummy
  PUBLIC :: sub
CONTAINS
  INCLUDE 'sub.f90'
END MODULE test

! sub.f90
SUBROUTINE sub
  dummy = 1
END SUBROUTINE sub 
```

然而，这是一种非典型的安排。此外，如果“将它们全部放在一个文件中”是一个“非常糟糕的主意”，那么从一个模块中获得可能不同的子例程是一个好主意（或必要）吗？

更传统的 F90 解决方案是将共享数据（虚拟）作为公共实体放置在一个“低级”模块中，将子程序定义放置到一系列“中间级”模块中，这些模块根据需要使用低级模块，然后是最终的“高级”模块，该模块使用中间模块并提供对客户端代码的集体导出。然后使用源代码约定而不是语言规则来避免客户端代码直接使用中级和低级模块。

```
MODULE low_level_shared
  IMPLICIT NONE
  INTEGER, PUBLIC :: dummy
END MODULE low_level_shared

MODULE intermediate_sub1
  IMPLICIT NONE
CONTAINS
   SUBROUTINE sub1
     USE low_level_shared
     dummy = 1
   END SUBROUTINE sub1
END MODULE intermediate_sub1

MODULE intermediate_sub2
  IMPLICIT NONE
CONTAINS
   SUBROUTINE sub2
     USE low_level_shared
     ...
   END SUBROUTINE sub2
END MODULE intermediate_sub2

MODULE high_level
  USE intermediate_sub1
  USE intermediate_sub2
  PRIVATE
  PUBLIC :: sub1, sub2
END MODULE high_level

PROGRAM client_code
  USE high_level
  ...
  CALL sub1
END PROGRAM client_code 
```

Fortran 2008 允许通过子模块功能进行额外的结构和控制，其中模块过程接口可以在模块过程实现的单独程序单元中定义。

# android - 在android中添加联系人照片

> ID：12423642
> 
> 赞同：2
> 
> 时间：2012-09-14T11:30:02.777
> 
> 标签：android, contacts, photo

我想在 android 联系人列表中添加一个联系人。我能够成功传递联系人号码、姓名和其他详细信息。我面临个人资料图片的问题。如何传递联系人的个人资料图片？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T12:17:10.090

您必须在传统插入中使用[ContactsContract.CommonDataKinds.Photo或使用](http://developer.android.com/reference/android/provider/ContactsContract.CommonDataKinds.Photo.html)[ContentProviderOperation](http://developer.android.com/reference/android/content/ContentProviderOperation.html)并提供照片（例如作为字节数组）。只是参考[官方文档](http://developer.android.com/reference/android/provider/ContactsContract.Data.html)的一些例子。

基本上，使用 ContentValues 的代码将类似于：

```
ContentValues values = new ContentValues();
values.put(ContactsContract.Data.RAW_CONTACT_ID, contactId);
values.put(ContactsContract.Data.IS_SUPER_PRIMARY, 1);
values.put(ContactsContract.CommonDataKinds.Photo.PHOTO, photoByteArray);
values.put(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE ); 
```

使用 ContentProviderOperation，代码将类似于：

```
ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
 ops.add(ContentProviderOperation
.newInsert(ContactsContract.Data.CONTENT_URI)
  .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
  .withValue(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE)
  .withValue(ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE,photoByteArray).build(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-05T07:45:04.347

试试这个添加带有照片和 ListContact 的联系人..

增加联系人..

```
 public class AddContact extends ActionBarActivity {

        ImageView img;
        Bitmap contact_bitmap;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);

            setContentView(R.layout.activity_add);

            img = (ImageView) findViewById(R.id.imageView1);
            img.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View arg0) {
                    // TODO Auto-generated method stub
                    selectImage();
                }
            });

            Button addconatct = (Button) findViewById(R.id.btn_addcontact);
            addconatct.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    EditText e1 = (EditText) findViewById(R.id.editText1);

                    EditText e2 = (EditText) findViewById(R.id.editText2);

                    ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();

                    int rawContactID = ops.size();

                    // Adding insert operation to operations list
                    // to insert a new raw contact in the table
                    // ContactsContract.RawContacts
                    ops.add(ContentProviderOperation
                            .newInsert(ContactsContract.RawContacts.CONTENT_URI)
                            .withValue(ContactsContract.RawContacts.ACCOUNT_TYPE,
                                    null).withValue(RawContacts.ACCOUNT_NAME, null)
                            .build());

                    // Adding insert operation to operations list
                    // to insert display name in the table ContactsContract.Data
                    ops.add(ContentProviderOperation
                            .newInsert(ContactsContract.Data.CONTENT_URI)
                            .withValueBackReference(
                                    ContactsContract.Data.RAW_CONTACT_ID,
                                    rawContactID)
                            .withValue(ContactsContract.Data.MIMETYPE,
                                    StructuredName.CONTENT_ITEM_TYPE)
                            .withValue(StructuredName.DISPLAY_NAME,
                                    e1.getText().toString()).build());

                    // Adding insert operation to operations list
                    // to insert Mobile Number in the table ContactsContract.Data
                    ops.add(ContentProviderOperation
                            .newInsert(ContactsContract.Data.CONTENT_URI)
                            .withValueBackReference(
                                    ContactsContract.Data.RAW_CONTACT_ID,
                                    rawContactID)
                            .withValue(ContactsContract.Data.MIMETYPE,
                                    Phone.CONTENT_ITEM_TYPE)
                            .withValue(Phone.NUMBER, e2.getText().toString())
                            .withValue(Phone.TYPE,
                                    CommonDataKinds.Phone.TYPE_MOBILE).build());

                    ByteArrayOutputStream stream = new ByteArrayOutputStream();
                    if (contact_bitmap != null) { // If an image is selected
                                                    // successfully
                        contact_bitmap.compress(Bitmap.CompressFormat.PNG, 75,
                                stream);

                        // Adding insert operation to operations list
                        // to insert Photo in the table ContactsContract.Data
                        ops.add(ContentProviderOperation
                                .newInsert(ContactsContract.Data.CONTENT_URI)
                                .withValueBackReference(
                                        ContactsContract.Data.RAW_CONTACT_ID,
                                        rawContactID)
                                .withValue(ContactsContract.Data.IS_SUPER_PRIMARY,
                                        1)
                                .withValue(ContactsContract.Data.MIMETYPE,
                                        Photo.CONTENT_ITEM_TYPE)
                                .withValue(
                                        ContactsContract.CommonDataKinds.Photo.PHOTO,
                                        stream.toByteArray()).build());

                        try {
                            stream.flush();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }
                    }
                    try {
                        // Executing all the insert operations as a single database
                        // transaction
                        getContentResolver().applyBatch(ContactsContract.AUTHORITY,
                                ops);
                        Toast.makeText(getBaseContext(),
                                "Contact is successfully added", Toast.LENGTH_SHORT)
                                .show();
                    } catch (RemoteException e) {
                        e.printStackTrace();
                    } catch (OperationApplicationException e) {
                        e.printStackTrace();
                    }

                }
            });

        }

        private void selectImage() {

            final CharSequence[] options = { "Take Photo", "Choose from Gallery",
                    "Cancel" };

            AlertDialog.Builder builder = new AlertDialog.Builder(AddContact.this);
            builder.setTitle("Add Photo!");
            builder.setItems(options, new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int item) {
                    if (options[item].equals("Take Photo")) {
                        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                        File f = new File(android.os.Environment
                                .getExternalStorageDirectory(), "temp.jpg");
                        intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(f));
                        startActivityForResult(intent, 1);
                    } else if (options[item].equals("Choose from Gallery")) {
                        Intent intent = new Intent(
                                Intent.ACTION_PICK,
                                android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                        startActivityForResult(intent, 2);

                    } else if (options[item].equals("Cancel")) {
                        dialog.dismiss();
                    }
                }
            });
            builder.show();
        }

        @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            // TODO Auto-generated method stub
            if (resultCode == RESULT_OK) {
                if (requestCode == 1) {
                    File f = new File(Environment.getExternalStorageDirectory()
                            .toString());
                    for (File temp : f.listFiles()) {
                        if (temp.getName().equals("temp.jpg")) {
                            f = temp;
                            break;
                        }
                    }
                    try {
                        Bitmap bitmap;
                        BitmapFactory.Options bitmapOptions = new BitmapFactory.Options();

                        bitmap = BitmapFactory.decodeFile(f.getAbsolutePath(),
                                bitmapOptions);

                        contact_bitmap = bitmap;

                        img.setImageBitmap(bitmap);

                        String path = android.os.Environment
                                .getExternalStorageDirectory()
                                + File.separator
                                + "Phoenix" + File.separator + "default";
                        f.delete();
                        OutputStream outFile = null;
                        File file = new File(path, String.valueOf(System
                                .currentTimeMillis()) + ".jpg");
                        try {
                            outFile = new FileOutputStream(file);
                            bitmap.compress(Bitmap.CompressFormat.JPEG, 85, outFile);
                            outFile.flush();
                            outFile.close();
                        } catch (FileNotFoundException e) {
                            e.printStackTrace();
                        } catch (IOException e) {
                            e.printStackTrace();
                        } catch (Exception e) {
                            e.printStackTrace();
                        }
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                } else if (requestCode == 2) {

                    Uri selectedImage = data.getData();
                    String[] filePath = { MediaStore.Images.Media.DATA };
                    Cursor c = getContentResolver().query(selectedImage, filePath,
                            null, null, null);
                    c.moveToFirst();
                    int columnIndex = c.getColumnIndex(filePath[0]);
                    String picturePath = c.getString(columnIndex);
                    c.close();
                    Bitmap thumbnail = (BitmapFactory.decodeFile(picturePath));
                    Log.w("path of image from gallery......******************.........",
                            picturePath + "");
                    contact_bitmap = thumbnail;
                    img.setImageBitmap(thumbnail);
                }
            }
        }

    } 
```

ListContact 与图像..

```
 public class ListContact extends ActionBarActivity {

        ListView list;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_list);

            list = (ListView) findViewById(R.id.listView1);

            list.setAdapter(new ContactListAdapter(ListContact.this));

        }

        public class ContactListAdapter extends BaseAdapter {

            Activity acvtivity_ab;

            String phoneNumber = null;
            String email = null;

            Uri CONTENT_URI = ContactsContract.Contacts.CONTENT_URI;
            String _ID = ContactsContract.Contacts._ID;
            String DISPLAY_NAME = ContactsContract.Contacts.DISPLAY_NAME;
            String HAS_PHONE_NUMBER = ContactsContract.Contacts.HAS_PHONE_NUMBER;

            String PHOTO_URL = ContactsContract.Contacts.PHOTO_THUMBNAIL_URI;

            ContentResolver contentResolver = getContentResolver();

            Cursor cursor = contentResolver.query(CONTENT_URI, null, null, null,
                    null);

            public ContactListAdapter(ListContact listContact) {
                // TODO Auto-generated constructor stub
                acvtivity_ab = listContact;
            }

            @Override
            public int getCount() {
                // TODO Auto-generated method stub
                return cursor.getCount();
            }

            @Override
            public Object getItem(int position) {
                // TODO Auto-generated method stub
                return null;
            }

            @Override
            public long getItemId(int position) {
                // TODO Auto-generated method stub
                return 0;
            }

            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                // TODO Auto-generated method stub

                View v;
                LayoutInflater inflater = (LayoutInflater) acvtivity_ab
                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

                v = inflater.inflate(R.layout.list_row, null);

                if (cursor != null && cursor.getCount() > 0
                        && position < cursor.getCount()
                        && position != cursor.getCount()) {
                    cursor.moveToPosition(position);
                    String contact_id = cursor
                            .getString(cursor.getColumnIndex(_ID));
                    long contactId = Long.parseLong(contact_id);
                    String name = cursor.getString(cursor
                            .getColumnIndex(DISPLAY_NAME));
                    String photo = cursor.getString(cursor
                            .getColumnIndex(PHOTO_URL));
                    TextView t_name = (TextView) v.findViewById(R.id.textView1);

                    t_name.setText(name);

                    Uri my_contact_Uri = Uri.withAppendedPath(
                            ContactsContract.Contacts.CONTENT_URI,
                            String.valueOf(contact_id));

                    InputStream inputStream = ContactsContract.Contacts
                            .openContactPhotoInputStream(getContentResolver(),
                                    my_contact_Uri);
                    BufferedInputStream buf = new BufferedInputStream(inputStream);
                    Bitmap my_btmp = BitmapFactory.decodeStream(buf);

                    if (my_btmp != null) {

                        Log.i("test", name + ":::" + photo + "::??" + "Posi"
                                + position);
                        ImageView img_thumb = (ImageView) v
                                .findViewById(R.id.image_list);
                        img_thumb.setImageBitmap(loadContactPhoto(contentResolver,
                                contactId));

                    }

                } else {
                    Log.i("test", "else call");
                }

                return v;
            }

        }

        public static Bitmap loadContactPhoto(ContentResolver cr, long id) {
            Uri uri = ContentUris.withAppendedId(
                    ContactsContract.Contacts.CONTENT_URI, id);
            InputStream input = ContactsContract.Contacts
                    .openContactPhotoInputStream(cr, uri);
            if (input == null) {
                return null;
            }
            return BitmapFactory.decodeStream(input);
        }

    } 
```

# java - org.hibernate.LazyInitializationException: 无法初始化代理 - 没有 Session ，说没有 getter，但我的 getter /setters 存在

> ID：12423645
> 
> 赞同：4
> 
> 时间：2012-09-14T11:30:10.257
> 
> 标签：java, spring, hibernate, spring-mvc

我不知道这是否与我的休眠层有关。你能帮忙吗。我用谷歌搜索但无法弄清楚

联系类别：

```
@Entity
@Table(name="CONTACTS")
public class Contact {

@Id
@Column(name="ID")
@GeneratedValue
private Integer id;

@Column(name="FIRSTNAME")
private String firstname;

@Column(name="LASTNAME")
private String lastname;

@Column(name="EMAIL")
private String email;

@Column(name="TELEPHONE")
private String telephone;

public String getEmail() {
    return email;
}
public String getTelephone() {
    return telephone;
}
public void setEmail(String email) {
    this.email = email;
}
public void setTelephone(String telephone) {
    this.telephone = telephone;
}
public String getFirstname() {
    return firstname;
}
public String getLastname() {
    return lastname;
}
public void setFirstname(String firstname) {
    this.firstname = firstname;
}
public void setLastname(String lastname) {
    this.lastname = lastname;
}
public Integer getId() {
    return id;
}
public void setId(Integer id) {
    this.id = id;
}

} 
```

控制器：

```
 @RequestMapping(value = "/edit/{contactId}", method = RequestMethod.GET)
public ModelAndView edit(@PathVariable("contactId") Integer contactId,
        HttpServletRequest request) {
    System.out.println("I was here");
    Contact contact = contactService.getContact(contactId);

    Map<String, Object> model = new HashedMap();
    model.put("contact", contact);

    return new ModelAndView("contact_edit", model);
} 
```

jsp：

```
<form:form method="post" action="add.html" commandName="contact">

    <table>

        <tr>
            <td><form:label path="firstname">
                    <spring:message code="label.firstname" />
                </form:label></td>
            <td><form:input path="firstname" /></td>
        </tr>
        <tr>
            <td><form:label path="lastname">
                    <spring:message code="label.lastname" />
                </form:label></td>
            <td><form:input path="lastname" /></td>
        </tr>
        <tr>
            <td><form:label path="email">
                    <spring:message code="label.email" />
                </form:label></td>
            <td><form:input path="email" /></td>
        </tr>
        <tr>
            <td><form:label path="telephone">
                    <spring:message code="label.telephone" />
                </form:label></td>
            <td><form:input path="telephone" /></td>
        </tr>
        <tr>
            <td colspan="2"><input type="submit"
                value="<spring:message code="label.addcontact"/>" /></td>
        </tr>
    </table>
</form:form> 
```

堆栈跟踪：

```
SEVERE: Invalid property 'firstname' of bean class [net.viralpatel.contact.form.Contact_$$_javassist_0]: Getter for property 'firstname' threw exception; nested exception is java.lang.reflect.InvocationTargetException
org.springframework.beans.InvalidPropertyException: Invalid property 'firstname' of bean class [net.viralpatel.contact.form.Contact_$$_javassist_0]: Getter for property 'firstname' threw exception; nested exception is java.lang.reflect.InvocationTargetException
    at org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:845)
    at org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:721)
    at org.springframework.validation.AbstractPropertyBindingResult.getActualFieldValue(AbstractPropertyBindingResult.java:99)
    at org.springframework.validation.AbstractBindingResult.getFieldValue(AbstractBindingResult.java:219)
    at org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:120)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:178)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:198)
    at org.springframework.web.servlet.tags.form.LabelTag.autogenerateFor(LabelTag.java:129)
    at org.springframework.web.servlet.tags.form.LabelTag.resolveFor(LabelTag.java:119)
    at org.springframework.web.servlet.tags.form.LabelTag.writeTagContent(LabelTag.java:89)
    at org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102)
    at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)
    at org.apache.jsp.WEB_002dINF.jsp.contact_005fedit_jsp._jspx_meth_form_005flabel_005f0(contact_005fedit_jsp.java:255)
    at org.apache.jsp.WEB_002dINF.jsp.contact_005fedit_jsp._jspx_meth_form_005fform_005f0(contact_005fedit_jsp.java:177)
    at org.apache.jsp.WEB_002dINF.jsp.contact_005fedit_jsp._jspService(contact_005fedit_jsp.java:126)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1180)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:761)
    ... 51 more
Caused by: org.hibernate.LazyInitializationException: could not initialize proxy - no Session
    at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:167)
    at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:215)
    at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:190)
    at net.viralpatel.contact.form.Contact_$$_javassist_0.getFirstname(Contact_$$_javassist_0.java)
    ... 56 more
Sep 14, 2012 4:41:17 PM org.apache.catalina.core.ApplicationDispatcher invoke
SEVERE: Servlet.service() for servlet jsp threw exception
org.hibernate.LazyInitializationException: could not initialize proxy - no Session
    at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:167)
    at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:215)
    at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:190)
    at net.viralpatel.contact.form.Contact_$$_javassist_0.getFirstname(Contact_$$_javassist_0.java)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:761)
    at org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:721)
    at org.springframework.validation.AbstractPropertyBindingResult.getActualFieldValue(AbstractPropertyBindingResult.java:99)
    at org.springframework.validation.AbstractBindingResult.getFieldValue(AbstractBindingResult.java:219)
    at org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:120)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:178)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:198)
    at org.springframework.web.servlet.tags.form.LabelTag.autogenerateFor(LabelTag.java:129)
    at org.springframework.web.servlet.tags.form.LabelTag.resolveFor(LabelTag.java:119)
    at org.springframework.web.servlet.tags.form.LabelTag.writeTagContent(LabelTag.java:89)
    at org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102)
    at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)
    at org.apache.jsp.WEB_002dINF.jsp.contact_005fedit_jsp._jspx_meth_form_005flabel_005f0(contact_005fedit_jsp.java:255)
    at org.apache.jsp.WEB_002dINF.jsp.contact_005fedit_jsp._jspx_meth_form_005fform_005f0(contact_005fedit_jsp.java:177)
    at org.apache.jsp.WEB_002dINF.jsp.contact_005fedit_jsp._jspService(contact_005fedit_jsp.java:126)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1180)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Sep 14, 2012 4:41:17 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [spring] in context with path [/Spring3HibernateMaven] threw exception [An exception occurred processing JSP page /WEB-INF/jsp/contact_edit.jsp at line 50

47:         <table>
48:         
49:             <tr>
50:                 <td><form:label path="firstname">
51:                         <spring:message code="label.firstname" />
52:                     </form:label></td>
53:                 <td><form:input path="firstname" /></td>

Stacktrace:] with root cause
org.hibernate.LazyInitializationException: could not initialize proxy - no Session
    at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:167)
    at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:215)
    at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:190)
    at net.viralpatel.contact.form.Contact_$$_javassist_0.getFirstname(Contact_$$_javassist_0.java)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:761)
    at org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:721)
    at org.springframework.validation.AbstractPropertyBindingResult.getActualFieldValue(AbstractPropertyBindingResult.java:99)
    at org.springframework.validation.AbstractBindingResult.getFieldValue(AbstractBindingResult.java:219)
    at org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:120)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:178)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:198)
    at org.springframework.web.servlet.tags.form.LabelTag.autogenerateFor(LabelTag.java:129)
    at org.springframework.web.servlet.tags.form.LabelTag.resolveFor(LabelTag.java:119)
    at org.springframework.web.servlet.tags.form.LabelTag.writeTagContent(LabelTag.java:89)
    at org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102)
    at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)
    at org.apache.jsp.WEB_002dINF.jsp.contact_005fedit_jsp._jspx_meth_form_005flabel_005f0(contact_005fedit_jsp.java:255)
    at org.apache.jsp.WEB_002dINF.jsp.contact_005fedit_jsp._jspx_meth_form_005fform_005f0(contact_005fedit_jsp.java:177)
    at org.apache.jsp.WEB_002dINF.jsp.contact_005fedit_jsp._jspService(contact_005fedit_jsp.java:126)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1180)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

---------------- edit1 --------- 这里提到的是我的web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
id="WebApp_ID" version="2.5">
<display-name>Spring3-Hibernate</display-name>
<welcome-file-list>
    <welcome-file>list.html</welcome-file>
</welcome-file-list>
<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.css</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.js</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.gif</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.jpg</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.png</url-pattern>
</servlet-mapping>
<filter>
    <filter-name>hibernateFilter</filter-name>
    <filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>
    <init-param>
        <param-name>sessionFactoryBeanName</param-name>
        <param-value>sessionFactory</param-value>
    </init-param>
</filter>
<listener>
    <listener-class>
                org.springframework.web.context.ContextLoaderListener
            </listener-class>
</listener>
<filter-mapping>
    <filter-name>hibernateFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

我对版本信息的 pom.xml 依赖项：

```
 <dependencies>

    <!-- Junit library -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
    </dependency>

    <!--Spring framework -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-expression</artifactId>
        <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-dao</artifactId>
        <version>2.0.8</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>3.1.2.RELEASE</version>
    </dependency>

    <!-- Hibernate -->
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>3.6.10.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>3.6.10.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-ehcache</artifactId>
        <version>3.6.10.Final</version>
    </dependency>

    <!-- mysql-connector-java -->
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.21</version>
    </dependency>
    <dependency>
        <groupId>jstl</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
    </dependency>

    <!-- taglibs -->
    <dependency>
        <groupId>taglibs</groupId>
        <artifactId>standard</artifactId>
        <version>1.1.2</version>
    </dependency>

    <!-- pooling -->
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>20030825.184428</version>
    </dependency>
    <dependency>
        <groupId>commons-pool</groupId>
        <artifactId>commons-pool</artifactId>
        <version>20030825.183949</version>
    </dependency>
    <!-- JSON jackson dependency to return JSON from controllers -->
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.9.9</version>
    </dependency>
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>1.7.0</version>
    </dependency>

</dependencies> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-14T11:38:42.210

问题与您的 getter 无关，而是当您渲染结果时，Hibernate 会话已关闭（这就是`org.hibernate.LazyInitializationException: could not initialize proxy - no Session`暗示的含义。

为避免这种情况，您可以

*   为您的实体切换延迟加载（即当您在控制器中加载它时，当会话处于活动状态时，Hibernate 将填充整个实体）
*   或者使用[OpenSessionInView](https://community.jboss.org/wiki/OpenSessionInView)模式，这将保持 Hibernate 会话打开，直到 JSP 的呈现完成。

编辑：

[Spring 通过OpenSessionInViewFilter](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/orm/hibernate4/support/OpenSessionInViewFilter.html)提供对 OpenSessionInView 模式的支持。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-30T14:15:05.853

还要检查相应的表是否有数据。当表没有数据时，它会抛出“org.hibernate.LazyInitializationException：无法初始化代理 - 无会话”。

# django - 在 django-rest-framework 中，我怎样才能拥有只能由创建它的用户编辑的资源？

> ID：12423648
> 
> 赞同：1
> 
> 时间：2012-09-14T11:30:28.427
> 
> 标签：django, permissions, django-rest-framework

如果我有这个：

```
class Image(models.Model):
    user = models.ForeignKey(User) 
```

我如何编写一个允许从任何人获取 GET 的资源，但仅在与 GET`request.user`相同时才 PUT `image.user`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-31T07:33:04.197

创建您的模型视图集使用的权限

```
class CreatorPermissions(BasePermission):
    def has_permission(self, request, view):
        return request.method in permissions.SAFE_METHOD

    def has_object_permission(self, request, view, obj):
        return request.user.id == obj.user.id

class ImageViewSet(viewsets.ModelViewSet):
    model = Image
    serializer_class = ImageSerializer # you have to create this
    permission_classes = (CreatorPermissions,)
    queryset = Image.objects.all() 
```

# cocoa - Cocoa 中不支持的配置错误 (Xcode)

> ID：12423654
> 
> 赞同：5
> 
> 时间：2012-09-14T11:30:53.957
> 
> 标签：cocoa, window, warnings, fullscreen, nsview

我需要一个全屏窗口，里面有很多东西，由 Cocoa Xcode 4 制作。但是有一个持续的警告：每当我尝试调整主窗口的大小时，我都会收到这个警告（代码编译得很好，但我确信小屏幕用户会出现问题）这是警告：

> **“不支持的配置内容矩形不完全显示在带有菜单栏的屏幕上（可能无法完全看到所有屏幕分辨率和配置）”**

我有两个问题：

1-消除此警告的最佳方法是什么（使用较小的窗口除外，因为警告从大约 560 x 560 窗口大小开始。我不能用这么小的屏幕来显示这些东西）

2-如何告诉程序一开始就全屏打开？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T12:28:35.923

1.  您只需要在 IB 的尺寸检查器中移动窗口。

2.  这个[SO question](https://stackoverflow.com/questions/8338314/creating-nswindow-in-fullscreen-mode)应该回答这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T13:52:01.590

这是我可以在此链接下使用的代码，谢天谢地“特洛伊木马”让我知道

[在全屏模式下创建 NSWindow](https://stackoverflow.com/questions/8338314/creating-nswindow-in-fullscreen-mode)

这是简化的代码：

> 请记住，Cocoa 不会在 AppDelegate.m 中为默认窗口创建 @synthesize。您需要添加@synthesize 窗口；手动

1-首先我们用屏幕尺寸填充screenRect 2-尺寸检查器将窗口位置设置为“从左侧固定”并进行所需的任何偏移量，您必须稍后在代码中支付该偏移量（这里我使用了10像素的偏移量和40像素的回报. 这导致窗口大小与 Xcode 完全相同！ ![在此处输入图像描述](../Images/572aaf7c708f2e3ddfae74ff5a8916a0.png)

3-添加此代码：

> *   (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
>     
>     
>     
>     // 设置为全屏打开：
>     
>     
>     
>     NSRect 屏幕矩形；
>     
>     
>     
>     NSSize 屏幕尺寸；
>     
>     
>     
>     NSArray *screenArray = [NSScreen 屏幕];
>     
>     
>     
>     NSUInteger screenCount = [screenArray 计数];
>     
>     
>     
>     for (NSUInteger index=0; index < screenCount; index++)
>     
>     
>     
>     {
>     
>     
>     
>     ```
>     NSScreen *screen = [screenArray objectAtIndex: index];
>     
>     screenRect = [screen visibleFrame]; 
>     ```
>     
>     
>     
>     }
>     
>     
>     
>     // 现在 screenRect 包含屏幕大小
>     
>     
>     
>     screenSize.height=screenRect.size.height; screenSize.width= screenRect.size.width;
>     
>     
>     
>     [窗口设置内容大小：屏幕大小]；}

![在此处输入图像描述](../Images/0f7e3c71b1cd39504febb2be115786ec.png)

# c# - 通过反射/类型名实例化一个泛型类

> ID：12423655
> 
> 赞同：0
> 
> 时间：2012-09-14T11:30:55.010
> 
> 标签：c#, generics, reflection

例如，我有一个类，看起来像：

```
public class Repository<T>
{
    public IEnumerable<T> FindAll()
    {
        //
    }
} 
```

我想做的是通过反射创建一个存储库的实例。

例如：

```
var typeName = "Customer"
var type = Assembly.GetCallingAssembly().GetType(typeName);

//obviously, this isn't valid...
var repository = new Repoistory<type>(); 
```

沿着这些路线有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:36:14.363

```
var repository  = Activator.CreateInstance(typeof(Repository<>).MakeGenericType(type)); 
```

# ruby-on-rails - 如何在 Jekyll 中链接 if 语句？

> ID：12423658
> 
> 赞同：76
> 
> 时间：2012-09-14T11:31:04.707
> 
> 标签：ruby-on-rails, ruby, jekyll

我在 Jekyll 中使用逻辑运算符，但它不起作用。

第一页、第二页和第三页都使用相同的布局（多语言解决方案的一部分，效果很好，但需要逻辑循环来进行某些布局控制以保持内容干燥。）

这是代码：

```
{% if page.type == "post" %}
{% include post.html %}
{% elseif page.class == "contact" %}
{% include contact.html %}
{% else %}
{{ content }}
{% endif %} 
```

如果我将它分解为一个`else`和一个`if else`设置，使用任何两个树，一切正常。但是，一旦我使用第三种条件，它就会中断。Jekyll 是否仅限于两个条件句？我可能会进行重组以使`case`运算符适用，但我更愿意了解这里的基本问题。谢谢大家。

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-09-14T11:47:40.883

在 Jekyll/Liquid 中 else-if is spelled `elsif`，即：

```
{% if page.type == "post" %}
{% include post.html %}
{% elsif page.class == "contact" %}
{% include contact.html %}
{% else %}
{{ content }}
{% endif %} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2021-05-29T07:50:18.440

您可以使用`else if`或`elsif`。 `elseif`是错误的，会抛出错误。

# jquery - jquery is() 匹配所有元素，而不是任何

> ID：12423659
> 
> 赞同：1
> 
> 时间：2012-09-14T11:31:10.540
> 
> 标签：jquery

如果我有这个 HTML：

```
<input type="button" />
<input type="button" />
<input class="btn" type="button" />
<div class="btn"></div>
<div class="btn"></div> 
```

我在一个 jQuery 对象中有 3 个按钮.. 说`var buttons = $(':button');`。

然后我有另一个对象，它具有不同的 3 组元素，其中一个是相同的：`var nextButtons = $('.btn');`

是否有一种 jQuery 方法来检查**所有**元素是否相同？**如果任何**元素匹配，`is()`似乎返回 true 。

 ****编辑：**

我的意思是以完全相同的方式进行比较`is()`。我猜，这个函数会调用`is()`第一组中的每个元素，第二组中的每个元素。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T11:35:53.703

没有内置任何东西，但它真的很容易做到：

```
$.fn.all = function(selector) {
    return this.filter(selector).length == this.length;
} 
```

**[看到它在行动](http://jsfiddle.net/CuDDZ/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:37:54.237

你可以试试`.filter()`

```
var buttons= $(".btn").filter(function(i){
                   return $(this).is("input[type='button']");
              }); 
```

[小提琴](http://jsfiddle.net/amantur/qHqAH/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:38:07.577

```
if (buttons.length === nextButtons.length && buttons.filter(nextButtons).length) {
     console.log("Same");
} 
```**

# c - C - 在文件处理中未找到记录

> ID：12423662
> 
> 赞同：0
> 
> 时间：2012-09-14T11:31:23.337
> 
> 标签：c

我有这个 C 代码，我遇到的问题是我找不到我想要的记录，使用文件处理它总是说找不到结果。使我的系统清晰运行并显示记录的正确方法是什么？

```
 #include <stdio.h>
    #include <conio.h>
    #include <string.h>
    #include <stdbool.h>
    #include <stdlib.h>
    #include <windows.h>

    void loadMenu();
    void addEmployee();
    void searchEmployee();
    bool found = false;
    int choice;

    FILE*myrec;

    char Name[20],Age[20],IDnum[20],search[20];

    void loadMenu(){
    printf("[1]Add Employee\t[2]Search Employee\t[3]Exit\nChoice:");
    scanf("%d", &choice);
    }

    void addEmployee (){
    char ans;
    do{
    printf("Enter IDnumber:");
    fflush(stdin);
    gets(IDnum);
    printf("Enter Name:");
    fflush(stdin);
    gets(Name);
    printf("Enter Age:");
    fflush(stdin);
    gets(Age);

    myrec = fopen ("record.txt","a+");
    fprintf(myrec,"%s \t %s \t %s \n ",Name,Age,IDnum);
    printf("Record Saved !");
    printf("Do you want to add another record ? Y/N");
    scanf("%s",&ans);
    fclose(myrec);
    }
    while (ans=='Y'||ans=='y');
    }

    void searchEmployee(){

    myrec = fopen("record.txt","a+");
    printf("Enter Employee IDnumber:");
    scanf("%s",&search);
    while(!feof(myrec)){
    fscanf(myrec,"%s %s %s",IDnum,Name,Age);
    if (strcmp(search,IDnum)==0){
    printf("IDnum: %s\n", IDnum);
    printf("Name: %s\n",Name);
    printf("Age :%s\n",Age);
    found = true;
    break;

    }

    }
    if(!found) printf("No results.");
    fclose (myrec);
    }

    int main(){
    bool repeat = false;
    do{
    loadMenu();
    switch(choice){

    case 1:
    addEmployee();
    break;

    case 2:
    searchEmployee();
    break;

    case 3:
    repeat = true;
    break;
    }
    }while(!repeat);

    getch();
    } 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:49:10.260

我看到几个错误：

1.  缓冲区溢出

    字符答案；

    scanf("%s",&ans); // 如果输入 'Y' 则至少写入 2 个字符，'Y' 和 '\0'

使用更大的 ans 缓冲区：char ans[10];

然后 scanf("%s", ans);

1.  指向指针的指针

    字符搜索[20]；// search 是一个指向缓冲区的指针

    scanf("%s",&search); // 你应该使用 scanf("%s", search);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:32:57.540

有很多错误。

几个快速的：

1.  `feof()` *在尝试阅读之前*不要检查，那是无效的。事实上，永远不要使用`feof()`，除非您已经完成了失败的读取。
2.  `"a+"`如果您只想从文件中*读取*，请不要以附加 ( ) 模式打开。这种模式支持阅读，但还是很奇怪。
3.  也许您应该尝试重新打开文件，而不是让它一直处于打开状态。
4.  始终检查 I/O 函数的返回值，例如`fscan()`. 他们可能会失败。

# maven - 是否有 Maven 标志指示构建是否为 SNAPSHOT？

> ID：12423667
> 
> 赞同：2
> 
> 时间：2012-09-14T11:31:42.543
> 
> 标签：maven

是否有特定的 Maven 属性指示当前`project.version`是否为 SNAPSHOT？

显然，这可以通过解析 project.version 字符串来完成，但我对特定属性感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T15:32:59.927

`${project.version.snapshot}`当前不是 Maven 3 支持的属性。

请参阅[Maven 属性指南](http://docs.codehaus.org/display/MAVENUSER/MavenPropertiesGuide)

目前，有一个开放的功能请求为配置文件激活添加正则表达式匹配。您可能想发表评论并支持该问题：http: [//jira.codehaus.org/browse/MNG-3826](http://jira.codehaus.org/browse/MNG-3826)

用例正是您所提到的：

> 当 project.version 不是 SNAPSHOT 时激活配置文件
> 
> 是否可以？

# java - 如何使周期性事件在 AsyncTask 的 doInBackground 中的每个周期性间隔运行

> ID：12423672
> 
> 赞同：1
> 
> 时间：2012-09-14T11:31:50.857
> 
> 标签：java, android, android-asynctask

我想让周期性事件从 AsyncTask 的 doInBackground 中的每个周期性间隔运行。

像这样：

```
protected Object doInBackground(Object... arg0) {
    while (true) {
            someThingToDo();
            // wait for 1000;
        }
} 
```

怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:55:49.633

您可以使用定时器或闹钟服务。最好使用闹钟服务，因为它可以在设备处于睡眠模式时触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T12:55:45.910

您需要创建一个单独的类，它是 Service 类的子类。

[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

您的主应用程序应该可以调用 startService 和 stopService 来启动后台进程。上下文类中还有一些其他有用的调用来管理服务：

上下文文档 [http://developer.android.com/reference/android/content/Context.html#startService%28android.content.Intent%29](http://developer.android.com/reference/android/content/Context.html#startService%28android.content.Intent%29)

否则你可以使用 TimerTask()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:51:07.657

试试这个::

```
class Getphonenumber extends AsyncTask<String, Void, Void> {
     public Void doInBackground(String... p) {
      while (true) {

          someThingToDo();

       try {

        Thread.sleep(2000);

       } catch (Exception ie) {
           Log.e("Sleep", "Error: " + ie.toString());
        }
      }
    }
 }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T11:54:11.320

我认为可能需要在 AsyncTask 中使用类 Timer。

# scala - 如何访问姐妹特征中的受保护变量

> ID：12423677
> 
> 赞同：1
> 
> 时间：2012-09-14T11:32:06.577
> 
> 标签：scala

我在我的应用程序中使用了 Logging 特征，我很好奇是否可以从 Logging 特征访问受保护的变量。

这就是我所拥有的：

```
class MyClass extends ExternalTrait with Logging

trait ExternalTrait {
  protected val protectedVar = "secret?"
}

trait Logging {
  if(this.isInstanceOf[OtherTrait]) 
    this.asInstanceOf[OtherTrait].protectedVar
} 
```

但是以这种方式访问​​时，对受保护变量的访问受到限制。还有其他方法可以从 Logging 特征访问 protectedVar 吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:45:13.690

如果你确定知道`Logging`后来混入了`ExternalTrait`你可以放置一个自我参考：

```
trait Logging { this: ExternalTrait =>
  val value = protectedVar
} 
```

当然，如果存在不扩展/混合其他特征的日志特征，则自引用是不合适的。在这种情况下，我将子类`Logging`化以处理不同的行为。

```
trait Logging
trait StandAloneLogging extends Logging
trait BasedOnLogging extends Logging { this: ExternalTrait =>
  val value = protectedVar
} 
```

# javascript - 在到达终点之前使文本输入滚动

> ID：12423682
> 
> 赞同：0
> 
> 时间：2012-09-14T11:32:23.960
> 
> 标签：javascript, jquery, html, textinput

所以这就是我已经拥有的：当用户开始在文本字段中输入内容时，会在文本字段的右侧出现一个“清除”按钮，用于重置搜索。但是，由于图像出现在文本字段中，如果您键入的内容足够多，您的文本将开始被图像遮挡。

这提出了两个问题：

1.  有没有办法让文本字段在文本达到一定数量的像素或一定数量的字符后开始滚动（大概在到达清除按钮之前开始滚动）？
2.  我会以错误的方式解决这个问题吗？有没有更好的方法来达到预期的效果？我的意思是我可以让文本保持原样，只是期望没有人真正需要输入那么多字符，但我不能真正做出这样的假设，我不想强​​迫它们进入文本限制（因为可搜索的字段可能非常大），而且我非常注重细节，所以这个小东西真的让我很恼火。

我有以下 HTML：

```
<div id="container">
    <img class="clear-button" title="Clear search" src="/img/clear-button.png"
        onclick="clearSearch();">
    <label for="search-filter">Find Foo: </label>
    <input type="text" id="search-filter" />
    <input type="submit" id="search-filter-button" value="Search" />
</div> 
```

以及以下 JavaScript (jQuery)：

```
$('#search-filter').on('keypress', function(e) {
    if (e.which == 13) {
        $('#search-filter-button').click();
    }

    if ($(this).val().length != 0) {
        $('.search-clear-button').fadeIn(200);
    }
}); 
```

为了完整起见，文本字段如下所示：

![具有重叠文本的文本字段](../Images/533009d10984a0bdc1f5ebc67718c4a0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:36:43.390

尝试在输入框的右侧添加填充并相应地调整宽度。

# sql-server-2008 - SSRS MDX - 显示会计年度的最新测量，显示会计年度的所有子项

> ID：12423687
> 
> 赞同：0
> 
> 时间：2012-09-14T11:32:51.590
> 
> 标签：sql-server-2008, date, reporting-services, mdx

使用这个脚本

```
SELECT  [Date].[Fiscal Year-Month].[Fiscal Year].&[2012/13].Children ON ROWS
        , [Measures].[Capacity] ON COLUMNS

FROM    [CubeName] 
```

我得到以下结果：

```
 Capacity
Apr-12  81.07%
May-12  81.99%
Jun-12  82.29%
Jul-12  82.13%
Aug-12  82.47%
Sep-12  79.10%
Oct-12  (null)
Nov-12  (null)
Dec-12  (null)
Jan-13  (null)
Feb-13  (null)
Mar-13  (null) 
```

我要做的是为截至 7 月底的职位生成一份月度报告，显示每个月的值，因此我希望从度量​​中排除 8 月和 9 月，但我想保留日期维度中的月份报告布局。最终结果应该是：

```
 Capacity
Apr-12  81.07%
May-12  81.99%
Jun-12  82.29%
Jul-12  82.13%
Aug-12  (null)
Sep-12  (null)
Oct-12  (null)
Nov-12  (null)
Dec-12  (null)
Jan-13  (null)
Feb-13  (null)
Mar-13  (null) 
```

如何使用 MDX 实现这一目标？然后，这将在 SSRS 2008 中的矩阵中使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T12:47:40.403

使用这样的查询：

```
WITH MEMBER [Measures].[Capacity2] AS IIf('[Date].[Fiscal Year-Month].CurrentMember is August or September', Null, [Measures].[Capacity])
SELECT  [Date].[Fiscal Year-Month].[Fiscal Year].&[2012/13].Children ON ROWS,
[Measures].[Capacity2] ON COLUMNS
FROM [CubeName] 
```

您只需在 IIf 中写入正确的条件。

# python - 使用win32com将图片插入ms-word后无法从文件夹中删除图片

> ID：12423689
> 
> 赞同：2
> 
> 时间：2012-09-14T11:32:57.760
> 
> 标签：python, ms-word, win32com

我需要将图像插入到 Word 文档中，然后将其从硬盘驱动器中删除。

```
from win32com import client
import os
client.pythoncom.CoInitialize()
word = client.Dispatch("Word.Application")
doc = word.Documents.Open("C:\R1234.docx")
newShape = doc.Bookmarks("layout1").Range.InlineShapes.AddPicture("C:\picture.png", False, True)
doc.Close()
word.Quit()
os.remove("C:\picture.png") 
```

看起来很简单，但尝试删除图片时返回错误：

> WindowsError：[错误 32] 进程无法访问该文件，因为它正被另一个进程使用：'C:\picture.png'

# silverlight - silverlight web 应用程序阻止通过 url 从 web 服务器访问文件

> ID：12423692
> 
> 赞同：0
> 
> 时间：2012-09-14T11:33:06.750
> 
> 标签：silverlight

嗨团队，我有一个silverlight WebApplication，它在网络服务器上有一个文件夹，用于下载文档并存储供客户查看。我面临的问题是，即使启用了 Windows 身份验证并且禁用了目录浏览。我可以使用 url 访问和查看图像，即 (http:\loclahost\webapp\dir\image1.tif) 形成不同的域。我可以在 Web 服务器 (IIS 8) 上进行一些配置还是需要在我的代码中采用一些加密逻辑。

对此的任何建议或帮助都会对 gr8 有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:40:30.470

如果这是我的想法，您必须将权限设置为 IISUSRS（为 ISS 创建的系统用户）才能写入和读取您的文件夹。

# php - flex 4.6 datagrid 列从另一个插入数据

> ID：12423697
> 
> 赞同：0
> 
> 时间：2012-09-14T11:33:16.083
> 
> 标签：php, apache-flex

起初，我很高兴忽略了我的语言技能。我正在使用 sdk 4.6.0 (flex+php) 在 flex 中创建一个在线应用程序

我正在尝试做的是从另一个更改 1 个数据网格列数据（或者如果它更简单，则相同）。

我的数据网格如下所示：

```
id | name | type | type1 | type2 | type3 | ... | type52 
```

此网格中的数据提供者是一个 db 表，而不是结果作为新的 arrayCollection。我想在类型列中使用所需的 typeX 列数据创建这个新的 arrayCollection。每种类型都有相同数量的行。typeX 的选择是通过按下不在数据网格中的按钮来进行的。列可见功能不是解决方案，因为在我正在使用的应用程序的其他部分`dataFiled="type" as text{function}`等。

让我知道是否需要一些额外的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T19:26:02.373

您可以使用 ObjectProxy 类。例如：

```
package {

import flash.utils.flash_proxy;

import mx.utils.ObjectProxy;

public class Wrapper extends ObjectProxy {

    public function Wrapper(item:Object = null) {
        super(item);
    }

    override flash_proxy function getProperty(name:*):* {
        if (name == "type1")
            return "someValue";

        if (name == "type2")
            return "otherValue";

        return super.flash_proxy::getProperty(name);
    }
}
} 
```

当您创建 ArrayCollection 时，请使用此功能：

```
public function wrapCollection(arrayCollection:IList):IList {
    var list:Array = [];
    for each (var item:Object in arrayCollection) {
        list.push(new Wrapper(item));
    }
    return new ArrayCollection(list);
} 
```

现在您可以使用 dataFields`type1`和`type2`

# css - 浮动框对齐问题

> ID：12423700
> 
> 赞同：1
> 
> 时间：2012-09-14T11:33:38.857
> 
> 标签：css

我正在构建一个响应式布局，该布局在特定屏幕尺寸的网格中有框。

这是它的样子：

![在此处输入图像描述](../Images/34d5f2901e6c50dd9614af6680e2a64c.png)

我要做的是在框 3 中添加一些上边距以将其向下推以产生所需的效果：

![在此处输入图像描述](../Images/7633d917dd0d0a31c2837d1812511b9c.png)

*   我不想将课程应用于方框 3
*   我无法增加标题的宽度，因为它位于框 4 容器中
*   我希望我可以用 CSS 定位“之前的元素”，但这[似乎不可能](https://stackoverflow.com/questions/10225364/select-specific-element-before-other-element)
*   `inline-block`这些盒子目前是浮动的，由于响应间距问题，我无法使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:26:51.997

这不能使用纯 CSS 和您的限制来完成。但是，您可以使用 jQuery 来实现：

演示：http: [//jsfiddle.net/SO_AMK/DKkLh/](http://jsfiddle.net/SO_AMK/DKkLh/)

jQuery：

```
$("section").each(function() {
    if ($(this).children("h1").length > 0) {
        $(this).prev().css("margin-top", ($(this).children("h1").height() + 5));
        // +5 for the margin on sections
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:45:00.320

将标题和 div no4 放在同一个 div/section 中，您将获得所需的效果。这是[jfiddle](http://jsfiddle.net/Yx6mg/)。那是你想要达到的吗？

# xslt - 如何使用 xslt 合并这两个 xml 文件

> ID：12423701
> 
> 赞同：1
> 
> 时间：2012-09-14T11:33:50.070
> 
> 标签：xslt, xslt-1.0

请我想知道如何使用 xslt 将两个 xml 文件合并为一个 xml 文件。我有这两个 xml 文件，我想合并到一个 xml 文件中，如预期的输出所示。我想将第二个文件中的每个节点**Hn**包含到文件 1 中具有相同编号的相应块中。

文件1：

```
<Test>
  <R1>
    <Th1>
        here are some instruction.
    </Th1>
  </R1>

  <R2>
    <Th2>
        here are some instruction.
    </Th2>
  </R2>

  <R3>
    <Th3>
        here are some instruction.
    </Th3>
  </R3>
</Test> 
```

文件 2：

```
<test1>
  <H1>
    here are some instruction.
  </H1>

  <H2>
    here are some instruction.
  </H2>

  <H3>
    here are some instruction.
  </H3>
</test1> 
```

这是预期的输出：

```
<test2>
  <R1>
    <H1>
        here are some instruction.
    </H1>
    <Th1>
        here are some instruction.
    </Th1>
  </R1>

  <R2>
    <H2>
        here are some instruction.
    </H2>
    <Th2>
        here are some instruction.
    </Th2>
  </R2>

  <R3>
    <H3>
        here are some instruction.
    </H3>
    <Th3>
        here are some instruction.
    </Th3>
  </R3>

</test2> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T12:13:16.990

**I. 这个 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes"/>

 <xsl:variable name="vDigits" select="'0123456789'"/>
 <xsl:variable name="vDoc2" select="document('file:///c:/temp/delete/file2.xml')"/> 

 <xsl:template match="/*">
     <test2><xsl:apply-templates/></test2>
 </xsl:template>

 <xsl:template match="/*/*">
  <xsl:copy>
   <xsl:text>&#xA;</xsl:text>
   <xsl:copy-of select=
    "$vDoc2/*/*
      [translate(name(),translate(name(),$vDigits,''),'')
      =
       translate(name(current()),translate(name(current()),$vDigits,''),'')
      ]"/>
    <xsl:copy-of select="node()"/>
   </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于第一个 XML 文档**(file1.xml) 时：

```
<Test>
  <R1>
    <Th1>
        here are some instruction.
    </Th1>
  </R1>

  <R2>
    <Th2>
        here are some instruction.
    </Th2>
  </R2>

  <R3>
    <Th3>
        here are some instruction.
    </Th3>
  </R3>
</Test> 
```

**并让第二个 XML 文档位于`c:\temp\delete\file2.xml`：**

```
<test1>
  <H1>
    here are some instruction.
  </H1>

  <H2>
    here are some instruction.
  </H2>

  <H3>
    here are some instruction.
  </H3>
</test1> 
```

**产生想要的正确结果：**

```
<test2>
  <R1>
<H1>
    here are some instruction.
  </H1>
    <Th1>
        here are some instruction.
    </Th1>
  </R1>

  <R2>
<H2>
    here are some instruction.
  </H2>
    <Th2>
        here are some instruction.
    </Th2>
  </R2>

  <R3>
<H3>
    here are some instruction.
  </H3>
    <Th3>
        here are some instruction.
    </Th3>
  </R3>
</test2> 
```

**说明**：

正确使用Michael Kay 首次演示的“*双重翻译”方法。*

* * *

**二、XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes"/>

 <xsl:variable name="vDigits" select="'0123456789'"/>
 <xsl:variable name="vDoc2" select="document('file:///c:/temp/delete/file2.xml')"/> 

 <xsl:template match="/*">
     <test2><xsl:apply-templates/></test2>
 </xsl:template>

 <xsl:template match="/*/*">
  <xsl:if test="not(matches(name(), '^.+\d+$'))">
    <xsl:message terminate="yes">
     Element Name doesn't end with number: <xsl:sequence select="name()"/>
    </xsl:message>
  </xsl:if>
  <xsl:copy>
   <xsl:text>&#xA;</xsl:text>
   <xsl:copy-of select=
    "$vDoc2/*/*
      [replace(name(),'^.+(\d+)$', '$1')
      =
       replace(name(current()),'^.+(\d+)$', '$1')
      ]"/>
    <xsl:copy-of select="node()"/>
   </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**说明**：

正确使用标准 XPath 2.0 函数**[`matches()`](http://www.w3.org/TR/xpath-functions/#func-matches)**和**[`replace()`](http://www.w3.org/TR/xpath-functions/#func-replace)**

# ios - 使用 setHTTPBodyStream 从相机（资产库）上传文件：

> ID：12423703
> 
> 赞同：0
> 
> 时间：2012-09-14T11:33:59.917
> 
> 标签：ios, cocoa-touch

如何对`UIImagePickerController`使用`setHTTPBodyStream:`of挑选的图像/视频进行 HTTP POST `NSMutableURLRequest`？我的意思是从文件系统（驱动器）以完整质量从资产库上传文件的最佳方法是什么？我希望`setHTTPBodyStream:`使用 URL from创建 inputStream，`UIImagePickerControllerReferenceURL`但它不起作用，系统无法为这个 URL 创建 inputStream ...

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSURL *URL = [info objectForKey:UIImagePickerControllerReferenceURL];
    NSInputStream *inputStream = [NSInputStream inputStreamWithURL:URL]; // here I get just nil...

    ...
    [URLRequest setHTTPBodyStream:inputStream];
    ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:12:11.133

使用 UIImagePickerController，您不会获得图像的 URL/路径（您会获得视频的 URL/路径）。你只会得到 UIImage。但是，如果您想要原始图像，它仍然可以在使用此方法发送的字典中找到。

在此处查看有关如何上传图像的[答案。](https://stackoverflow.com/questions/9559227/upload-picture-selected-using-uiimagepickercontroller)

# intellij-idea - Intellij IDEA 编译所有模块，即使我只要求 1

> ID：12423706
> 
> 赞同：6
> 
> 时间：2012-09-14T11:34:40.363
> 
> 标签：intellij-idea

我在项目中有几个具有复杂依赖结构的模块。当我想为 1 个模块编译和运行单元测试时，我希望 IDEA 忽略不相关模块中的任何编译错误。我怎样才能做到这一点？目前，即使我说“编译模块 1”，IDEA 也会编译所有内容。

我不想为此设置几个不同的项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T12:57:37.050

在测试运行配置中指定相应的模块。IntelliJ IDEA 将只编译这个模块和所需的依赖项，如果这个测试模块不依赖它们，它不会尝试编译其他模块。

如果由于某种原因它不能按预期工作，请尝试分享一个小样本来说明问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-27T15:55:02.117

尝试检查您的依赖项。我遇到了同样的问题，因为 Ivy 插件添加了它认为需要的库，其中包含一个由于缺少依赖项而无法编译的类。一旦我删除它，构建运行良好。

# android - 如何在android中收听和接受BluetoothSocket？

> ID：12423707
> 
> 赞同：0
> 
> 时间：2012-09-14T11:34:42.697
> 
> 标签：android, bluetooth, spp

我正在三星 GT-P7500 android Pad 中开发蓝牙 SPP 程序。我想从对等 BT 设备接收 SPP 连接。我尝试了 API 方法：

```
public BluetoothServerSocket listenUsingRfcommWithServiceRecord(String name, UUID uuid);
public BluetoothServerSocket listenUsingInsecureRfcommWithServiceRecord(String name, UUID uuid); 
```

我也尝试`listenUsingRfcommOn(int)`了反射方法。以上都没有成功。我在其他安卓设备上试过我的程序，索尼爱立信 X10i，Galaxy 9100，在这些设备上都可以。有人有安卓蓝牙开发经验和GT-P7500经验吗？坦克的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:19:29.720

您可以查看示例“BluetoothChat”代码，它非常有用。这里是链接： http: [//jayxie.com/mirrors/android-sdk/resources/samples/BluetoothChat/index.html](http://jayxie.com/mirrors/android-sdk/resources/samples/BluetoothChat/index.html)，你可以从SVN服务器下载源代码，也可以在网上搜索源代码。

# iphone - Iphone 在第一个选项卡上隐藏 uitabbar

> ID：12423713
> 
> 赞同：3
> 
> 时间：2012-09-14T11:35:11.660
> 
> 标签：iphone, uitabbarcontroller, uitabbar

我的应用程序中有 5 个选项卡，第一个选项卡是欢迎选项卡，当用户单击第一个选项卡时，它会显示欢迎屏幕，但仅在第一个选项卡上我想隐藏选项卡我想隐藏第一个选项卡上的选项卡，因为它一个受欢迎的观点。我进行了搜索但无法隐藏它，我在我的欢迎控制器视图中执行了此操作。

```
 [self.tabBarController.tabBar setHidden:YES]; 
```

它隐藏起来，但空间是空的。

使用 xcode 4.3.2、storyboard、ios 5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:37:44.563

如果您隐藏标签栏，那么您如何导航到标签 2 和 3。我建议添加welcomeView 并在welcomeView 之后添加tabBar。

或者您可以使用此代码

```
[self hideTabBar:self.tabBarController];

- (void) hideTabBar:(UITabBarController *) tabbarcontroller {

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.5];
    for(UIView *view in tabbarcontroller.view.subviews)
    {
        if([view isKindOfClass:[UITabBar class]])
        {
            [view setFrame:CGRectMake(view.frame.origin.x, 480, view.frame.size.width, view.frame.size.height)];
        } 
        else 
        {
            [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 480)];
        }

    }
    [UIView commitAnimations];    
}

[self  showTabBar:self.tabBarController];  

- (void) showTabBar:(UITabBarController *) tabbarcontroller {

        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.5];
        for(UIView *view in tabbarcontroller.view.subviews)
        {
            NSLog(@"%@", view);

            if([view isKindOfClass:[UITabBar class]])
            {
                [view setFrame:CGRectMake(view.frame.origin.x, 431, view.frame.size.width, view.frame.size.height)];

            } 
            else 
            {
                [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 431)];
            }

        }

        [UIView commitAnimations]; 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-26T17:17:29.117

在 ios 7 / 8 (xcode 6) 上，要从一个视图而不是其他视图隐藏标签栏，您只需在受影响的视图（全部）上添加以下“用户定义的运行时属性”：

关键路径 = tabBarController.tabBar.hidden

类型 = 布尔值

值 = true / false（取决于复选框）

如果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:56:10.820

> 什么是栏按钮名称。

像这样给，

```
barbtnName.hidden=YES; 
```

它会工作。

# css - 主流浏览器的亚像素精度现状如何？

> ID：12423716
> 
> 赞同：38
> 
> 时间：2012-09-14T11:35:19.043
> 
> 标签：css, flash, browser, pixel

我正在开发一个需要高精度的绘图应用程序，我想知道哪个主要浏览器平台（包括 HTML Canvas 元素和 Flash）提供了最佳的子像素布局精度，无论是对于绘制的元素（ Canvas 或 Flash 中的矩形，浏览器中绝对定位的 DIV）和文本。

在这个网站和其他网站上都有很多与此相关的帖子（见底部列表），但很多都是相当古老的，没有一个能总结当前的情况。

我的理解是，Flash原生支持亚像素定位，使用twips将对象定位到二十分之一像素，而当使用TextLayoutFramework时，这种精度也延伸到了文字上。但是，至少有一份报告表明这在 Chrome 中无法正常工作。谁能证实这一点？

我对浏览器情况的理解是，Firefox 14+ 在页面布局和画布中都支持文本和绘制元素的亚像素定位，但我无法确定这有多准确。

我了解 Chrome（从 v21 开始）根本不支持亚像素定位。

我知道 IE9 不支持亚像素定位，但从下面链接的 MS 博客文章中可以看出 IE10 会。

我不知道这是否有任何 Mac/PC 差异，我也不知道 Flash 的准确性是否因平台和/或浏览器而异。

我理解这样一个总结性的问题可能会引起一些争论，但我相信这是足够具体的，可以让人们提供有用的答案，并希望这个线程可以作为定位精度到现在的状态的参考。

一些参考资料：

[http://blogs.msdn.com/b/ie/archive/2012/02/17/sub-pixel-rendering-and-the-css-object-model.aspx](http://blogs.msdn.com/b/ie/archive/2012/02/17/sub-pixel-rendering-and-the-css-object-model.aspx)

[Chrome Canvas 中的亚像素渲染](https://stackoverflow.com/questions/6720977/sub-pixel-rendering-in-chrome-canvas)

[http://johnblackburne.blogspot.co.uk/2011/11/twips.html](http://johnblackburne.blogspot.co.uk/2011/11/twips.html)

[http://ejohn.org/blog/sub-pixel-problems-in-css/](http://ejohn.org/blog/sub-pixel-problems-in-css/)

[子像素 CSS 定位](https://stackoverflow.com/questions/3103252/sub-pixel-css-positioning)

[https://productforums.google.com/forum/?fromgroups=#!topic/chrome/pRt3tiVIkSI](https://productforums.google.com/forum/?fromgroups=#!topic/chrome/pRt3tiVIkSI)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T19:59:05.360

目前，您可以期待最好的舍入和亚像素支持来自 Mozilla，而 IE 则获得亚军。IE 最终可能会得到更好的调整，但它们的发布周期如此之长，以至于 Mozilla 可能会领先于它们。

就做亚像素布局而言，你可能会追逐一缕，因为亚像素优势改善了抗锯齿问题，而不是屏幕定位精度。无论亚像素支持如何，您的图像都不会比真实位置更精确 1 个像素。

一些浏览器不能正确缩放的原因与子像素支持无关，这是因为它们没有记住确切的位置和正确的舍入。换句话说，它们过早地舍入了位置，导致图像未对齐。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T07:02:37.567

**简短的回答：**
不。这是不可能的/记录在案的。
即使通过实验确定，也不能保证将来保持不变。

**长答案：**
在亚像素精度下，浏览器/操作系统/硬件之间在如何捕获/渲染输入方面存在很大差异。在大多数现代浏览器上启用硬件加速后，在不同操作系统上运行不同浏览器的不同 PC 之间的渲染存在大量差异。如此之多，甚至可以通过[**普通样本的渲染输出中的**](http://cseweb.ucsd.edu/~hovav/dist/canvas.pdf)细微差异来识别每个唯一用户。

与其担心底层框架的差异，不如将绘图应用程序的 UI 设计为独立于这些问题。我现在能想到的几种方法是：

1.  允许以缩放/放大级别编辑图像。

2.  为元素设计一种对齐网格的方法。

**更新：**
“缩放”操作将是您的自定义实现，而不是底层框架的功能。因此，如果您需要 1/10 像素的亚像素精度，则需要将 10x_zoom() 实现为 Web 应用程序的一部分，该应用程序将从

第一个像素 --> 10x10pixels at (0,0),
第二个像素 --> 10x10pixels 从 (11,11) 开始。

这样一来，人们就会对数据有一个非常放大的视图，但是框架很高兴地没有意识到这一切，并且可以精确地渲染到屏幕像素（在我们的例子中，它现在是图像像素的 1/10）。

还需要注意的重要一点是，如果一次对整个图像执行此操作会消耗大量内存。因此，仅对“缩放窗口”中图像的可见部分执行此操作会更快且内存占用更少。

一旦在您的绘图网络应用程序中实现，框架中的亚像素不准确性可能不会成为用户的问题，因为他总是可以切换到这些模式并提供准确的输入。

# c# - 结合两个 WinForms 项目

> ID：12423718
> 
> 赞同：0
> 
> 时间：2012-09-14T11:35:21.837
> 
> 标签：c#, winforms, reference, resources

我必须在我的解决方案中进行项目：`StoreHelper`和`DefaultsSwitcher`. 他们都必须创建一个 Windows 可执行文件（他们的输出是应用程序）。

现在我们位于`StoreHelper`. 这是我的代码：

在文件的顶部：

```
using DefaultsSwitcher; 
```

在文件中：

```
private void defaultsSwitcherToolStripMenuItem_Click( object sender, EventArgs e ) {
    var defaultsSwitcher = new DefaultsSwitcher.dialog();
    defaultsSwitcher.ShowDialog();
} 
```

代码编辑器不会通过下划线显示任何错误，但是当我尝试构建时，编译器会显示以下错误：

```
Error   1   The type or namespace name 'dialog' does not exist in the namespace 'DefaultsSwitcher' (are you missing an assembly reference?) E:\Apps\StoreHelper\StoreHelper\mainWindow.cs   84  25  StoreHelper 
```

哪个是问题？PS我希望这两个项目`.exe`在构建后成为pe文件。

DefaultsSwitcher 中的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.IO;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using StoreHelperLib.Options;

namespace DefaultsSwitcher {
    public class dialog : Form {
        public dialog() {
            var options = new iniHelper();
            if (!File.Exists( "settings.ini" )) {
                StreamWriter settings = new StreamWriter( "settings.ini" );
                settings.Close();
            }

            options.Load( "settings.ini" );
            options.AddSection( "Application" );
            options.SetKeyValue( "Application", "firstRun", "true" );
            options.SetKeyValue( "Application", "startGuide", "false" );

            options.Save( "settings.ini" );
            InitializeComponent();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:57:59.143

我认为您错过了将子项目包含在他的父母中。为此：在 StoreHelper 项目中的 Reference 文件夹上单击鼠标右键，然后单击 Add Reference。最后选择 DefaultsSwitcher 项目。

现在必须可以从 StoreHelper 项目访问 DefaultsSwitcher 命名空间

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T11:54:12.913

应用程序之间是否有任何通信，或者您只是想从另一个应用程序启动一个应用程序？如果是后者，请使用 System.Diagnostics.Process 并让 Windows 单独运行其他 EXE 文件。

[http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)

这也意味着您可以让两个应用程序能够启动另一个应用程序，因为不会存在循环依赖关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T17:28:29.070

我为我的问题找到了一个解决方案，可以将两个项目都输出到 EXE。我只需要使用：

```
public partial class dialog 
```

# configuration - weblogic 10.3.2 重启后丢失配置

> ID：12423720
> 
> 赞同：0
> 
> 时间：2012-09-14T11:35:30.053
> 
> 标签：configuration, console, weblogic

我正在尝试在 weblogic 控制台中创建一个新的邮件会话。我正在获取锁并激活更改以使其在会话中可见。我也可以在当前会话中使用它。但问题是当我重新启动服务器时邮件会话更改丢失。我必须重新配置邮件会话才能再次使用它。weblogic 服务器正在生产模式下运行。请帮忙。

谢谢和问候， Sujeet

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T14:20:04.653

这是因为自定义脚本在重新启动时覆盖了对 config.xml 的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T17:15:36.773

> 为了通过 WLS 控制台进行配置更改，请获取域中所有服务器的可编辑配置 MBean 集合的锁定。通过单击“**锁定和编辑”**按钮获得锁定。
> 
> 执行配置更改后，单击“**保存**”或“**完成**”按钮。但是，更改不会立即生效。您必须单击更改中心中的**激活更改**按钮，以便将配置更改分发到域中的每个服务器。某些更改需要重新启动服务器才能生效。

配置更改保存在**config.xml**文件中，该文件位于以下路径：your_domain_name\config。

您应该在 config.xml 中看到一个 mail-session 元素：

```
<mail-session>
    <name>MailSession-0</name>
</mail-session> 
```

![在此处输入图像描述](../Images/7a4888d15b1fe6e9bdd1320ab9d0fcb5.png)

# ssl - 将 SSL 连接到子域

> ID：12423726
> 
> 赞同：24
> 
> 时间：2012-09-14T11:35:47.353
> 
> 标签：ssl, subdomain

我有一个 SSL 分配给我的主域，我想知道我是否可以将 SSL 用于我的子域！我坦率地试过了，但它显示警告页面说这个页面不安全等等。有没有解决方案，所以我可以在我的子域上使用 SSL 让客户端通过安全连接发送他们的信息。

错误信息`" This webpage is not available"`

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-14T12:03:25.780

X.509 证书（通常称为“SSL 证书”）通常只绑定到单个域，通常是“mydomain.com”、“www.mydomain.com”或“secure.mydomain.com”。它们不能用于任何其他域名，即使它是子域（因此“mydomain.com”的证书不能用于“www.mydomain.com”，反之亦然）。

目前存在 2 种其他类型的证书，可用于同时保护多个域名：

*   一种相对较新的证书类型，称为“SAN 证书”（“主题备用名称”的缩写），有时也称为“统一通信证书”，这是在 Microsoft Exchange Server 中需要此证书类型的功能之后。这些证书声明了可以使用它们的主机名的有限列表。

*   然后是通配符证书。从历史上看，这些都是非常昂贵的，但最近我们看到价格大幅下降。使用这些证书之一，您可以保护“anysubdomain.mydomain.com”，包括顶级“mydomain.com”。

如果没有这些 SSL 证书中的任何一个，您将需要为要保护的每个域名获取 SSL 证书。

请注意，为每个主机名/域名设置不同的证书可能会导致问题，因为 TLS 系统会在发送HTTP标头*之前*`Host:`为通道建立安全性- 这意味着每个受保护的网站都需要自己的 IP 地址或端口号。

...除非您使用 SNI（服务器名称标识）证书。好消息是所有现代浏览器和服务器都支持 SNI，因此多个安全网站可以使用自己的证书共享 IP 地址和端口绑定（因此不需要列出所有域的单个 SAN 证书）。

坏消息是，Windows XP 上的 Internet Explorer 无法连接到 SNI 网站（但 Chrome 和 Firefox 都可以），而在服务器端，您至少需要 Windows Server 2012 或更高版本。因此，根据 IE+XP 使用的流行程度采用 SNI。

# c# - C# - 确定 GUI 和逻辑类之间的责任

> ID：12423731
> 
> 赞同：1
> 
> 时间：2012-09-14T11:36:02.897
> 
> 标签：c#, design-patterns, user-interface

我有一个表格和一个逻辑类。基于用户操作，该类生成操作列表。然后这些操作需要在表单上显示为按钮，以便用户可以从中进行选择。我最初的解决方案是这样的：

```
public class Logic {
    public List<string> GetActions() {
        List<string> result = new List<string>();
        // ...prepare list
        return result;
    }
}

public class FrmGUI : Form {
    Logic logic = new Logic();
    private void PopulateButtons() {
        foreach(string action in logic.GetActions(){
            //...create button
        }
    }
} 
```

GUI 从 Logic 类中检索字符串列表，然后使用它来填充带有按钮的面板。现在据说这是不好的 OO 实践，因为我正在公开有关 Logic 类的行为方式的一些内容。这里假设 GetActions 方法将始终存在并且 Logic 类将始终能够返回此字符串列表。

另一个解决方案是：

```
public class Logic {
    public void PopulateButtons(Panel panel, Action<object, EventArgs> eventHandler) {
        // ...prepare list
        // ...populate buttons
    }
}

public class FrmGUI : Form {
    Logic logic = new Logic();
    private void PopulateButtons() {
        logic.PopulateButtons(this.panel1, actionButtonClickHandler);
    }
} 
```

现在，GUI 类对逻辑类一无所知，只希望填充按钮。另一方面，逻辑类现在涉及到 GUI 的东西。

处理此类情况的正确方法是什么。或者是否有第三个更好的实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:42:45.360

我会使用前一种模式：逻辑层创建信息，而 UI 层使用该信息来创建 UI。

这样，如果您决定重新设计 UI 以使用下拉列表项，您只需更改 UI 层，而不是逻辑。

这意味着 UI 层对逻辑层提供的类型/数据的依赖最小（只要它不知道逻辑是如何实现的就可以了），但逻辑层对此一无所知关于 UI 实现是什么——这就是你想要的（系统中的低级组件不应该对高级设计一无所知，而高级组件必须对它们使用的低级组件有基本的了解）。

最好是应用程序（或其他一些外部实体）创建逻辑和 UI 并将它们链接在一起，而不是 UI 本身创建逻辑 - 这将有助于 UI 和逻辑更加松散耦合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T11:41:55.393

这`Logic`可以报告它支持的操作（第一种模式）对我来说看起来不错（但返回类型`GetActions`真的应该是`IEnumerable<string>`而不是列表）。

不好的是，在您的示例中，表单`Logic`直接实例化了该类。`Logic`通常，您会为您可能拥有的不同类型的类创建一个接口或抽象基类，并让具体的实现填充功能。然后表单将通过一些[控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)机制获得要使用的逻辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T11:57:15.703

正确的？？？？？多年来，很多人投入了大量时间来尝试标准化这种方法，恐怕答案可以从那里的 ui 设计模式的数量中推断出来！

您可能想查看 MVC、MVP、MVVM 模式，所有这些模式目前都很流行。

一般来说：

尝试将逻辑与演示分开是个好主意，这样你就走对了。但是请记住，这种拆分的后果之一是，您的“逻辑”最好不要对演示文稿一无所知（因为您已经有一个负责该问题的类）。

因此，您可能想考虑“按钮”的概念，并考虑（从您的逻辑角度来看）“我真的不是指命令吗？”。当您在屏幕的上下文中考虑它们时，它们才真正成为按钮。但是，比如说，在特定银行账户上加载交易的命令......你不需要一个屏幕来概念化它是如何工作的。

我发现的一件好事是想象你要开发这个应用程序，它既有表单前端，也有做同样事情的网络前端。显然，这两个应用程序将具有完全不同的表示层，因为所涉及的技术根本不同。

但是因为您不想编写两次代码，所以您也将拥有一个“逻辑”层，在那里您将尽可能多地填充通用代码。例如，决定一个银行账户是否透支——不管你是网络还是赢，透支仍然是透支。相反，您最终在 web 和 win 之间编写不同代码的任何地方都属于您的“表示”层。例如，以红色显示透支余额。

深思熟虑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T17:58:51.057

我建议在你的`Logic`和你的`FrmGUI`.

对于一个简单的示例，假设您在应用程序中有一个登录名。**为您的逻辑**屏幕定义一个界面。请注意，这里没有提及使用了哪些控件。逻辑类永远不知道使用的 UI 类/表单。

```
interface ILoginScreen : IScreen
{
   event EventHandler LoginInvoked;
   event EventHandler CancelInvoked;

   string User { get; set; }
   string Password { get; set; }   
} 
```

在您的 LoginLogic 类中，您有如下代码：

```
void Start() // initial LoginLogic method
{

   ILoginScreen loginScreen = uiFactory.CreateLoginScreen();

   loginScreen.User = string.empty;
   loginScreen.Password = string.empty;

   loginScreen.LoginInvoked += new EventHandler(LoginScreen_LoginInvoked);
   loginScreen.CancelInvoked += new EventHandler(LoginScreen_CancelInvoked);

   loginScreen.Show();

}

void LoginScreen_LoginInvoked(s, e)
{
   if (ValidateCredentials(loginScreen.User, loginScreen.Password))
   {
      // goto the next screen logic controller
   }
} 
```

在您的表单中，您实现 ILoginScreen 并使用来自 USer 和 Password 属性的数据刷新 UI 字段。此外，您会根据用户反馈（按钮单击、Escape 击键等）引发所需的 Login 和 Cancel 事件。

虽然这是一个简单的示例，但我做了很多 Windows Mobile 和 Windows CE 应用程序，在这些应用程序中，希望在外形尺寸迥异的操作系统变体上运行相同的应用程序是很常见的，这种方法让您可以真正掌握新的 GUI 形式-因素。该用法的核心是动态加载的 UIFactory 以提供适当的 UI 实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T11:44:50.747

第一个更好，因为您在 GUI 和逻辑之间的接口只是一个字符串列表。之后，这一切都取决于您从按钮调用逻辑类操作的方式。如果您有一个采用操作字符串的通用方法，那很好。如果您需要根据操作字符串在逻辑类上调用不同的方法，则需要在 GUI 类中进行映射以映射操作字符串和方法调用。您还可以从您的逻辑类中导入此“操作字符串 - 映射方法”以保持分离。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-14T12:05:17.617

我的观点是，这取决于创建逻辑层和 GUI 层之类的东西的原因。我认为最常见的原因是重用逻辑，例如将其用于 WPF 和 Web GUI，或者必须在将数据发送到 GUI 之前对其进行处理。您的第一个示例符合上述模式。在您的第二个示例中，逻辑似乎不可重用，因为它是特定于 gui 的。然而，在现实世界中存在正确或错误的答案。该架构应该满足您的需求并使您的项目可维护（例如通过减少冗余代码）。就您而言，问题是：您多久需要一次这些功能以及何时/何地需要它们？

# java - 为什么 GEF 编辑器部分不显示？

> ID：12423741
> 
> 赞同：0
> 
> 时间：2012-09-14T11:36:38.743
> 
> 标签：java, eclipse-rcp, eclipse-plugin, eclipse-gef

我遵循[本教程](http://www.inf.ed.ac.uk/teaching/courses/ip/resources/GEF/GEF_Tutorial_2up.pdf)的每一步，直到我必须第一次运行该应用程序，但图形编辑器部分没有出现。本教程和我的项目之间的唯一区别是，在 plugins.xml 文件的 Extensions 选项卡上，`org.eclipse.ui.editor`扩展不包含名为 child 的“MyGraphicalEditor (editor)”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:47:33.490

这些教程会给你更多的练习和更好的理解：

[http://www.vogella.de/articles/EclipseRCP/article.html](http://www.vogella.de/articles/EclipseRCP/article.html)

[http://www.vogella.de/articles/EclipsePlugIn/article.html](http://www.vogella.de/articles/EclipsePlugIn/article.html)

[http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/SWTDraw2DExample.htm](http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/SWTDraw2DExample.htm)

[http://nyssen.blogspot.com/2010/12/draw2d-examples-hidden-treasure.html](http://nyssen.blogspot.com/2010/12/draw2d-examples-hidden-treasure.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T05:31:49.060

这就是原因。每个编辑器都应该添加到 org.eclipse.ui.editor 扩展点。

# sharepoint - 我如何判断（在 VBA 中）是否从 SharePoint 打开了文档？

> ID：12423746
> 
> 赞同：1
> 
> 时间：2012-09-14T11:37:03.393
> 
> 标签：sharepoint, vba, ms-office

有没有办法确定当前文档（无论是 Word 文档、Excel 工作簿还是 PowerPoint 演示文稿）是否是从 SharePoint 服务器打开的？

这是您认为在 ActiveDocument / ActiveWorkbook / ActivePresentation 上有属性的东西，但如果有这样的属性，我找不到它。

我可以查看 FullName 属性，看看它是否以 http:// 开头，我想这将是一种合理的启发式方法，但我确信必须有一种更清洁的方式。

如果它有所作为，让我们假设 Office 2007 或更高版本（以及 SharePoint 2007 或更高版本）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:52:28.277

前段时间我遇到了同样的问题，但还没有找到明确的方法来确定这一点。我使用的肮脏方式是分析文档的原始路径并根据它确定来源。它仍然有一两个陷阱，但应该处理非恶意的情况/用户。

```
Private Sub Document_Open()
'if default drafts location is not set in registry then exit
If IsNull(GetDefaultDrafts()) Then Exit Sub

'if document path includes 'http://' then it comes from SharePoint
If InStr(ActiveDocument.Path, "http://") = 1 Then
    'MsgBox ("Opened From SP")
    Exit Sub
    Else
    'if it does not
        If IsNull(GetCustomDrafts()) Then
            'if there is no custom location for drafts in registry
            'check if file path contains default location for drafts
            'if it does then it most likely comes from SharePoint
            If InStr(ActiveDocument.Path, GetDefaultDrafts()) = 1 Then
                'MsgBox ("Opened From SP")
                Exit Sub
            Else
                MsgBox WarningMessage(), vbCritical
                Exit Sub
            End If
        Else
            'there is custom location for drafts
            If InStr(ActiveDocument.Path, GetCustomDrafts()) = 1 Then
                'MsgBox ("Opened From SP")
                Exit Sub
            Else
                MsgBox WarningMessage(), vbCritical
                Exit Sub
            End If
        End If
End If
End Sub 
```

* * *

```
Function GetDefaultDrafts()
Const HKEY_LOCAL_MACHINE = &H80000001

strComputer = "."
Set objRegistry = GetObject("winmgmts:\\" & _
    strComputer & "\root\default:StdRegProv")

strKeyPath = "Software\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders"
strValueName = "Personal"
objRegistry.GetStringValue HKEY_LOCAL_MACHINE, strKeyPath, strValueName, strValue
If IsNull(strValue) Then
    GetDefaultDrafts = Null
Else
    GetDefaultDrafts = strValue + "\SharePoint Drafts"
End If

End Function 
```

* * *

```
Function GetCustomDrafts()
Const HKEY_LOCAL_MACHINE = &H80000001

strComputer = "."
Set objRegistry = GetObject("winmgmts:\\" & _
    strComputer & "\root\default:StdRegProv")

strKeyPath = "Software\Microsoft\Office\Common\Offline\Options"
strValueName = "Location"
objRegistry.GetStringValue HKEY_LOCAL_MACHINE, strKeyPath, strValueName, strValue
If IsNull(strValue) Then
    GetCustomDrafts = Null
Else
    GetCustomDrafts = strValue
End If

End Function 
```

* * *

```
Function WarningMessage()
WarningMessage = "It seems that this document has not been opened from SharePoint library but from local copy instead. Local copies must not be used to preserve system functionality."
End Function 
```

# android - 在 Activity 中设置 CheckBoxPreference 的值

> ID：12423748
> 
> 赞同：6
> 
> 时间：2012-09-14T11:37:32.797
> 
> 标签：android, preferenceactivity, checkboxpreference

您好，我需要知道如何以编程方式设置值。

我正在使用该代码

```
 SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
                            .
                            .
                            .

SharedPreferences.Editor geted = prefs.edit();
geted.putBoolean("checkBox_Schedule", false);
geted.commit(); 
```

但我没有看到任何变化

我的 checkboxPreference 的 xml 代码是

```
 <CheckBoxPreference

 android:defaultValue="false"
 android:dependency="checkBox"
 android:key="checkBox_Schedule"
 android:summary="On/Off"
 android:title="Schedule" /> 
```

一种解决方案是

```
 startActivity(new Intent(SetPreference.this, SetPreference.class)); 
```

但这不是我想做的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-14T13:07:38.497

```
CheckBoxPreference showContact = (CheckBoxPreference)findPreference("myPreference");
showContact.setChecked(false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-12T09:36:45.153

您可以在您的偏好活动中调用它

```
 CheckBoxPreference pref = (CheckBoxPreference)findPreference("example_pref_key");
    pref.setChecked(false); 
```

# javascript - 如何使用 JavaScript 删除小数点后的数字？

> ID：12423755
> 
> 赞同：5
> 
> 时间：2012-09-14T11:37:46.090
> 
> 标签：javascript

我在 HTML 网页中使用数字。问题是我想要没有小数的数字。

```
function copyText() {
  var mynumber = document.getElementById("field1").value;
  alert(mynumber);
  var mytest = parseInt(mynumber);
}
```

```
Field1: <input type="number" id="field1" value="123.124" /><br /><br />
<button onclick="copyText()">Check Number</button>

<p>A function is triggered when the button is clicked. The function copies the text in Field1 to Field2.</p>
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-14T11:40:47.303

假设您只想截断小数部分（不四舍五入），这里有一个更短（且更便宜）的替代方案`parseInt()`or `Math.floor()`：

```
var number = 1.23;
var nodecimals = number | 0; // => 1 
```

* * *

和输入`bitwise OR 0`行为的`int`更多示例：`float``string`

```
10     | 0 // => 10
10.001 | 0 // => 10
10.991 | 0 // => 10
"10"   | 0 // => 10
"10.1" | 0 // => 10
"10.9" | 0 // => 10 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-14T11:39:15.233

你应该使用 JavaScript 的[`parseInt()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-07-29T12:30:05.690

在 ES6 中，您可以使用`trunc`Math Object 的内置方法

```
 Math.trunc(345.99933) 
```

[![在此处输入图像描述](../Images/f42062ef4feb792fa16b45d496704acd.png)](https://i.stack.imgur.com/jTQIr.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-11-24T11:48:16.157

```
var num = 233.256;
console.log(num.toFixed(0));

//output 233 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-14T11:38:52.020

返回字符串：

```
(.17*parseInt(prescription.values)*parseInt(cost.value)).toFixed(0); 
```

返回整数：

```
Math.round(.17*parseInt(prescription.values)*parseInt(cost.value)); 
```

解析整数时记得使用基数：

```
parseInt(cost.value, 10) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-14T11:40:40.003

从数学上讲，使用`floor`函数是最有意义的。这给你一个实数到最大的前一个整数。

```
ans7 = Math.floor(.17*parseInt(prescription.values)*parseInt(cost.value)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-14T11:40:35.517

您是否尝试使用`parseInt`

尝试 ：

```
console.log(parseInt(ans7)); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-27T06:49:43.777

`~~`运算符是`Math.floor()`.

```
function copyText() {
  var mynumber = document.getElementById("field1").value;
  alert(~~mynumber);
}
```

```
<fieldset>
  <legend>Field1</legend>
  <input type="number" id="field1" value="123.124" />
  <button onclick="copyText()">Check Number</button>
</fieldset>
```

# mercurial - IIS6 + Mercurial，浏览存储库时为 404

> ID：12423760
> 
> 赞同：1
> 
> 时间：2012-09-14T11:38:06.587
> 
> 标签：mercurial, iis-6, windows-server-2003, isapi

很抱歉交叉发布，但我在 serverfault 上没有收到任何答复。

我已经使用 hgwebdir_wsgi 在带有 IIS6 的 Win2k3 机器上设置了 Mercurial 服务器，它似乎确实可以工作，直到我可以在浏览器中看到我的存储库的漂亮列表，但是如果我尝试浏览其中任何一个（即我点击repo的名称），然后我得到一个404错误。

关于我可能做错了什么的任何想法？我应该检查哪些日志文件或任何内容（我对 IIS 有点陌生）？谢谢。

--

一些更新：

IIS 日志中的实际错误代码是 404.0.2。win32 错误代码 2 仅表示“找不到文件”。

事件查看器充满了 ISAPI 错误，如下所示：

```
The description for Event ID ( 4097 ) in Source ( ISAPI Filter or Extension ) cannot be found. The local computer may not have the necessary registry information or message DLL files to display messages from a remote computer. You may be able to use the /AUXSOURCE= flag to retrieve this description; see Help and Support for details. The following information is part of the event: Factory function '__FilterFactory__' failed, n/a.

Could not load all ISAPI filters for site/service.  Therefore startup aborted.    
For more information, see Help and Support Center at http://go.microsoft.com/fwlink/events.asp.

The description for Event ID ( 4096 ) in Source ( ISAPI Filter or Extension ) cannot be found. The local computer may not have the necessary registry information or message DLL files to display messages from a remote computer. You may be able to use the /AUXSOURCE= flag to retrieve this description; see Help and Support for details. The following information is part of the event: Filter version function failed!, n/a. 
```

# html - 制作网站，移动文本并调整标题大小

> ID：12423762
> 
> 赞同：1
> 
> 时间：2012-09-14T11:38:07.157
> 
> 标签：html, css, firefox, google-chrome, opera

图片 -![在此处输入图像描述](../Images/1faec6a036064ab0883634a0832008a8.png)

代码 -

```
<html>
<header>
<style>
body {
margin: 0px 0px 0px 0px;
    font-family: Arial, Helvetica, sans-serif;
background-image:url('http://www.wallpaperpimper.com/wallpaper/Landscape/Plants/Leaf-In-Front-Of-Blur-1-1600x1200.jpg');
background-attachment: fixed;
background-size:cover;
}
p {
color:#fff;
}
#navi {
position: fixed;
    top: 0;
    left: 0;
    z-index: 99;
    height: 25px;
    font-size: 15px;
    width: 100%;
    z-index: 1000;
    background-color:#505050;
    padding-top:3px;
    padding-left:2px;

}
#wrapper {

width:100%;
height:100%;

}
#header {
Width:76%;
height:20%;
background-color:   #303030 ;
margin-top:3%;
margin-left:12%;
background-image:url('http://www.browsewallpapers.com/files/winter-landscape-landscape-7452.jpg');
background-size:cover;
text-align: right;
}
#content {
Width:50.5%;
Height:100%;
background-color:   #303030 ;
margin-left:12%;
margin-top:0.5%;
float:left;
opacity:0.8;

}
#sidecontent {
float:right;
background-color:   #303030 ;
width:25%;
height:40%;
margin-right:12%;
margin-top:0.5%;
opacity:0.8;
}
</style>
</header>
<body>

        <div id="navi">
            <p> HELLO </p>
        </div>

        <div id="wrapper">
            <div id="header">
                <p>Daily call</p>
            </div>
            <div id="content">
                <p> THIS IS DOG</p>
            </div>
            <div id="sidecontent">
                <p>no this is This is patrick</P>
            </div>
        </div>

</body>
</html> 
```

在 Opera、chrome 和 firefox 中一切正常，将文本向下推，即调整标题的大小。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:52:29.740

呵呵，你需要重写你所有的代码:)

如果您想将内容块居中，只需设置宽度和边距自动。例子：

```
.wrapper { width: 900px; margin: 0 auto;} 
```

比放入包装标题 div 中，而不是将标题宽度设置为 100%。

# git - emacs 中基于 git 的文件的 vc-diff 显示文件的两个版本，而不仅仅是差异

> ID：12423766
> 
> 赞同：0
> 
> 时间：2012-09-14T11:38:20.147
> 
> 标签：git, emacs

如果我`vc-diff`在 git repro 的编辑文件中运行，我会创建一个新缓冲区，它显示的内容比我预期的要多。它将文件的 HEAD 版本的每一行标记为已删除，并将文件工作副本的每一行标记为已添加，所以基本上我看到了该文件的两个完整版本。

这不是很有用！

如果我`git diff path\to\edited\file`在 dos 或 git bash 中运行，我会得到我期望 vc-diff 给我的东西：一个只有实际添加和删除的行的简短差异。

我安装了 magit，当我查看差异时，我遇到了同样的问题。

这是在运行 emacs 24.1.1 的官方 windows 二进制文件的 windows 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:52:40.197

我敢打赌，您在编辑器中意外更改了行尾，或者有一个`core.autocrlf`设置为您更改了它们。换句话说，它显示了差异，因为在一个版本中，行以 CRLF 结尾；另一方面，它们仅以 LF 结尾。

我会戳你的编辑器设置，看看会`git config --global core.autocrlf`返回什么。

# ios - 在注册时在 iTunes Connect 中设置“艺术家”名称？

> ID：12423771
> 
> 赞同：-1
> 
> 时间：2012-09-14T11:38:34.000
> 
> 标签：ios, app-store-connect, iphone-developer-program

这个问题并不是一个真正的编程问题，所以它不完全属于 Stack Overflow，所以我提前为此道歉，但这里似乎有很多类似这一轮的问题，因为这里有很多 iPhone 开发人员。 ..

* * *

是否有人最近（例如在过去 3 个月内）注册了***个人***Apple 开发者帐户？当您第一次登录 iTunes Connect 时，它是否为您提供了机会来设置出现在商店中您的应用程序上方（搜索结果等）的艺术家或“公司”名称，这不是您的法定名称？

* * *

## 编辑

以前使用个人帐户时，您的法定名称显示为卖方，但是，您可以设置任何您希望显示为公司名称的名称，但之后无法更改。但是，正如**corban**下面所说，现在显然不可能为个人帐户设置公司名称，因此如果您想要公司名称，则必须注册公司帐户（并做所有相关的法律废话）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:05:22.127

是的，即使使用个人帐户，您也可以在 itunesconnect 中创建第一个应用程序时设置公司/艺术家名称。这可能与您的法定姓名不同。

法定名称（您注册为开发者时使用的名称）作为应用程序的“卖家”出现（在应用程序图标下方，小字体，在 iTunes 中），而艺术家/开发者名称是您在 iTunesconnect 中输入的名称，以及显示在 iTunes 的顶部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:31:47.263

Apple 已取消为个人帐户添加公司/艺术家姓名的可能性。苹果论坛上有一些关于这个的讨论。我希望有可能增加一个。

# ajax - 将 JQuery 1.3.2 升级到 1.8.1

> ID：12423772
> 
> 赞同：0
> 
> 时间：2012-09-14T11:38:39.007
> 
> 标签：ajax, jquery

我被分配了将 JQuery 1.3.2 升级到最新版本（当前为 1.8.1）的任务，除了 $.ajax 函数之外，升级后似乎一切正常，以下代码调用服务器然后执行回调`doFurtherStuff`执行附加工作的功能：

```
function ChangeContent(url, somepageobject) {
   var xhrobj = $.ajax({
       url: url,
       context: somepageobject,
       callback: doFurtherStuff,
       success: function(data) {
                somepageobject.html($(data));
                this.callback.call(this.context[0], data); // >> Code breaks here
           }
  });
  return xhrobj;
 } 
```

运行此代码块时，服务器数据恢复正常，但随后出现以下错误：

IE10 和 IE9：

> JavaScript 运行时错误：无法获取未定义或空引用的属性“调用”

谷歌浏览器：

> 未捕获的类型错误：无法调用未定义的方法“调用”

对象“回调”在 1.8.1 中未定义，但在 1.3.2 中一切正常，如果有必要我很乐意更改代码我只是想不出办法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T07:48:47.070

我必须回答我自己的问题，因为所有其他解决方案（虽然正确）在不改变客户端（被调用者）通信和向方法发送参数的方式的情况下都不能解决我的问题，我无法做到这一点，因为我无法控制他们（外部客户）。

我所需要的只是将上面示例中的“context”更改为“thecontext”以在 JQuery 1.8.1 上工作，这是工作代码：

```
function ChangeContent(url, somepageobject) {
   var xhrobj = $.ajax({
       url: url,
       thecontext: somepageobject,
       callback: doFurtherStuff,
       success: function(data) {
                somepageobject.html($(data));
                this.callback.call(this.thecontext[0], data); // >> Code breaks here
           }
  });
  return xhrobj; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:42:47.350

尝试使用 jQuery then()：[http ://api.jquery.com/deferred.then/](http://api.jquery.com/deferred.then/)

ajax() 返回一个 Deferred 对象，以便您可以让它在完成后执行操作。

# uitextfield - 在 xcode 中为文本添加下划线

> ID：12423776
> 
> 赞同：2
> 
> 时间：2012-09-14T11:38:49.043
> 
> 标签：uitextfield, underline

嘿，我正在制作一个需要在文本视图的文本的某个部分加下划线的应用程序。有没有一种简单的方法可以让它变成粗体和斜体，或者我必须制作和导入自定义字体？我在这里先向您的帮助表示感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-28T07:42:12.173

这就是我所做的。它像黄油一样起作用。

1）添加`CoreText.framework`到您的框架。

2）在需要下划线标签的类中导入`<CoreText/CoreText.h>`。

3) 编写以下代码。

```
NSMutableAttributedString *attString = [[NSMutableAttributedString alloc] initWithString:@"My Messages"];
[attString addAttribute:(NSString*)kCTUnderlineStyleAttributeName
                  value:[NSNumber numberWithInt:kCTUnderlineStyleSingle]
                  range:(NSRange){0,[attString length]}];
self.myMsgLBL.attributedText = attString;
self.myMsgLBL.textColor = [UIColor whiteColor]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-22T06:57:21.643

```
#import <UIKit/UIKit.h>

@interface TextFieldWithUnderLine : UITextField

@end

#import "TextFieldWithUnderLine.h"

@implementation TextFieldWithUnderLine

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)drawRect:(CGRect)rect {

    //Get the current drawing context
    CGContextRef context = UIGraphicsGetCurrentContext();
    //Set the line color and width
    CGContextSetStrokeColorWithColor(context, [UIColor blackColor].CGColor);
    CGContextSetLineWidth(context, 0.5f);
    //Start a new Path
    CGContextBeginPath(context);

    // offset lines up - we are adding offset to font.leading so that line is drawn right below the characters and still characters are visible.
    CGContextMoveToPoint(context, self.bounds.origin.x, self.font.leading + 4.0f);
    CGContextAddLineToPoint(context, self.bounds.size.width, self.font.leading + 4.0f);

    //Close our Path and Stroke (draw) it
    CGContextClosePath(context);
    CGContextStrokePath(context);
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:42:16.787

自 iOS 6.0 起，[`UILabel`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UILabel_Class/Reference/UILabel.html)支持使用属性文本属性显示[属性字符串](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSAttributedString_Class/Reference/Reference.html)。[`UITextField`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITextField_Class/Reference/UITextField.html)[`UITextView`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITextView_Class/Reference/UITextView.html)

**用法：**

```
NSMutableAttributedString *aStr = [[NSMutableAttributedString alloc] initWithString:@"text"];
[aStr addAttribute:NSUnderlineStyleAttributeName value:NSUnderlineStyleSingle range:NSMakeRange(0,2)];
label.attributedText = aStr; 
```

# c# - ASP.NET MVC 3 自定义 RouteBase 和 OutputCache

> ID：12423784
> 
> 赞同：10
> 
> 时间：2012-09-14T11:39:21.583
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing, outputcache

我的自定义`RouteBase`实现和`[OutputCache]`. 我们有一个 CMS，其中 url 映射到某些内容页面。每种类型的内容页面由不同的控制器（和不同的视图）处理。url 是完全免费的，我们需要不同的控制器，所以“catchall”路由不可用。因此，我们构建了一个自定义 RouteBase 实现，它调用数据库来查找所有 url。数据库知道要使用哪个控制器和操作（基于内容页面类型）。

这很好用。

但是，将此与 [OutputCache] 属性结合使用，输出缓存不起作用（页面仍然有效）。我们确保 [OutputCache] 在我们的“正常”路线上工作。

调试输出缓存非常困难，属性就在那里，它不起作用......如何解决这个问题的想法非常受欢迎，正确的答案也是如此！

控制器如下所示：

```
public class TextPageController : BaseController
{
  private readonly ITextPageController textPageController;

  public TextPageController(ITextPageController textPageController)
  {
    this.textPageController = textPageController;
  }

  [OutputCache(Duration = 300)]
  public ActionResult TextPage(string pageid)
  {
    var model = textPageController.GetPage(pageid);
    return View(model);
  }
} 
```

自定义路由如下所示：

```
public class CmsPageRoute : RouteBase
{
  private IRouteService _routeService;
  private Dictionary<string, RouteData> _urlsToRouteData;

  public CmsPageRoute(IRouteService routeService)
  {
    this._routeService = routeService;
    this.SetCmsRoutes();
  }

  public void SetCmsRoutes()
  {
    var urlsToRouteData = new Dictionary<string, RouteData>();
    foreach (var route in this._routeService.GetRoutes()) // gets RouteData for CMS pages from database
    {
      urlsToRouteData.Add(route.Url, PrepareRouteData(route));
    }
    Interlocked.Exchange(ref _urlsToRouteData, urlsToRouteData);
  }

  public override RouteData GetRouteData(System.Web.HttpContextBase httpContext)
  {
    RouteData routeData;
    if (_urlsToRouteData.TryGetValue(httpContext.Request.Path, out routeData))
      return routeData;
    else
      return null;
  }

  public override VirtualPathData GetVirtualPath(RequestContext requestContext, RouteValueDictionary values)
  {
    return null;
  }

  private RouteData PrepareRouteData(ContentRouteData contentRoute)
  {
    var routeData = new RouteData(this, new MvcRouteHandler());

    routeData.Values.Add("controller", contentRoute.Controller);
    routeData.Values.Add("action", contentRoute.Action);
    routeData.Values.Add("area", contentRoute.Area);
    routeData.Values.Add("pageid", contentRoute.Constraints["pageid"]); // variable for identifying page id in controller method

    routeData.DataTokens.Add("Namespaces", new[] { contentRoute.Namespace });
    routeData.DataTokens.Add("area", contentRoute.Area);

    return routeData;
  }

  // routes get periodically updated
  public void UpdateRoutes()
  {
    SetCmsRoutes();
  }
} 
```

感谢您阅读到最后！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:39:41.497

最后，我们将其追踪到调用

```
 ... data-role="@this.FirstVisit" ... 
```

在我们的`_Layout.cshtml`

这在我们的自定义视图页面上调用了一个属性，该属性又调用了一个总是设置 cookie 的服务。（**哎呀在服务中设置 cookie！，**我们​​知道！）

如果不是星期五，在 sprint 结束时，我们可能已经注意到缓存破坏 `Cache-Control: no-cache="Set-Cookie":`Http Header。

我仍然不明白为什么这只会破坏我们自定义`RouteBase`实现的缓存，而不是所有页面。所有页面使用相同的`_Layout.cshtml`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:39:36.333

如果有帮助，您可以尝试以下代码

```
[OutputCache(Duration = 300, VaryByParam="*")] 
public ActionResult TextPage(string pageid) 
{ 
  var model = textPageController.GetPage(pageid); 
  return View(model);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T14:07:31.597

您可能会在这里查看自定义缓存：

*   [使用 Outputcache 忽略 url 值](https://stackoverflow.com/questions/5660319/ignore-url-values-with-outputcache)
*   [ViewEngine 上的输出缓存问题，它为 1 个控制器使用 2 个单独的视图](https://stackoverflow.com/questions/2209526/output-cache-problem-on-viewengine-that-use-2-separate-view-for-1-controller)

另外，检查缓存位置。

# clojure - 为什么在 LazySeq 上应用 seq 会返回 ChunkedCons？

> ID：12423786
> 
> 赞同：5
> 
> 时间：2012-09-14T11:39:38.350
> 
> 标签：clojure

```
(class (range 10))
;=> clojure.lang.LazySeq

(class (seq (range 10))
;=> clojure.lang.ChunkedCons 
```

据我了解，LazySeq 已经是一个序列，因为：

```
(seq? (range 10))
;=> true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T16:48:54.813

我想我有一个答案。

这是因为 using`seq`会强制评估`LazySeq`. 因为当集合和序列为空时`seq`返回`nil`，它必须评估元素来决定。

`rest`这就是为什么is 比 更懒惰的确切原因`next`，因为`(next s)`is just `(seq (rest s))`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T16:58:00.260

要扩展您的答案（并且因为评论不支持新行）：

```
user=> (def r (range 10))
#'user/r
user=> (realized? r)
false
user=> (class r)
clojure.lang.LazySeq
user=> (def r2 (rest r))
#'user/r2
user=> (realized? r2)
ClassCastException clojure.lang.ChunkedCons cannot be cast to clojure.lang.IPending  clojure.core/realized? (core.clj:6607)
user=> (class r2)
clojure.lang.ChunkedCons
user=> (realized? r)
true 
```

# perl - 哈希哈希的智能匹配运算符

> ID：12423791
> 
> 赞同：2
> 
> 时间：2012-09-14T11:40:11.910
> 
> 标签：perl, hash, match

我想将哈希哈希的键**与**regexp 匹配。

```
$line=" Cluster(A,B):A(T) M(S)";
$reg="Cluster";
my ( $cluster, $characters ) = split (/:/,$line);
$HoH{$cluster}={split /[( )]+/,$characters } ;
foreach $value(keys %HoH){
    foreach $characters (keys %{$HoH{$cluster}}){
        print "$value:$characters\n" if    /$reg/ ~~ %HoH;
    }
} 
```

现在输出是：

集群（A，B）：A

集群（A，B）：M

此代码适用于此示例数据，但不适用于真实数据！我的数据更复杂但结构相同我想知道是否还有其他方法可以做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:25:36.353

这是记录不足的，我不知道到底是什么问题，但是智能匹配运算符在引用数组和散列时效果更好。所以你可能会有更好的运气

```
/$reg/ ~~ \%Hoh 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T14:51:36.787

SmartMatch 目前复杂、笨拙且令人惊讶。不要使用它，至少现在不要。perl 的主要开发人员正在讨论要么大大简化它，要么完全删除它。无论哪种方式，它都不会做你要求它在未来做的事情，所以不要指望它现在这样做。

无论如何，更明确地说明你想要什么会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T12:03:25.730

也许你只想

```
print "something\n" if exists $HoH{regexp} 
```

或者可能

```
print "something\n" if grep /regexp/, keys %HoH 
```

但如果这些都不正确，那么你需要更好地解释你需要什么，并举一些例子

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T03:53:53.440

很可能，您的错误在这里：

```
foreach $characters (keys %{$HoH{$cluster}}) { 
```

应该读

```
foreach $characters (keys %{$HoH{$value}}) { 
```

. 大概。

# css - CSS下拉解释

> ID：12423793
> 
> 赞同：3
> 
> 时间：2012-09-14T11:40:20.707
> 
> 标签：css, drop-down-menu

有人可以解释一下 CSS 下拉菜单是如何工作的吗？

我见过很多，其中大多数都有 > 选择器，

我的问题是：

如何使用 > 选择器制作 CSS 下拉菜单？

我查看了很多教程，但从未理解 > 的作用以及它如何与 HTML 类\Ids 连接。

有人可以部分解释我吗？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T11:46:51.470

它用于选择直接子代。

考虑跟随标记

```
<div id="container">  
   <ul>  
      <li> List Item  
        <ul>  
           <li> Child </li>  
        </ul>  
      </li>  
      <li> List Item </li>  
      <li> List Item </li>  
      <li> List Item </li>  
   </ul>  
</div> 
```

的选择器`#container > ul`只会针对id 为 的`uls`直接子代。`div``container`

例如，它不会针对`ul`作为 first 的子级的`li`。

出于这个原因，使用子组合器有性能优势。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T12:04:07.417

HTML：

```
<ul class="menu">
    <li>        
        <span>menu 1</span>
        <ul>
            <li><a href="#" >Sub 1-1</a></li>
            <li><a href="#" >Sub 1-2</a></li>
            <li><a href="#" >Sub 1-3</a></li>
        </ul>
    </li>
    <li>        
        <span>menu 2</span>
        <ul>
            <li><a href="#" >Sub 2-1</a></li>
            <li><a href="#" >Sub 2-2</a></li>
            <li><a href="#" >Sub 2-3</a></li>
        </ul>
    </li>
</ul> 
```

CSS：

```
ul.menu>li{ /*Only direct children*/
    float:left;
    width: 60px;
}
ul.menu li ul{
    display:none; /*not visible*/
}

ul.menu li:hover ul{
    display:block; /* visible when hovering the parent li */
} 
```

解释在css中。

演示：http:
[//jsfiddle.net/FH7Z3/](http://jsfiddle.net/FH7Z3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:46:58.550

CSS 中的 > 运算符意味着后面的表达式必须是直接子表达式。

例如，`div span`匹配作为 DIV 元素后代的 SPAN 元素，但`div > span`仅匹配作为 DIV 的直接子元素的 SPAN 元素。

[http://www.w3schools.com/cssref/sel_element_gt.asp](http://www.w3schools.com/cssref/sel_element_gt.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T11:59:41.163

看到[这](http://www.w3.org/TR/CSS2/selector.html#child-selectors)是`>`一个子选择器。我们不想引用所有后代，而是只处理直接后代。将其视为只想选择孩子而不是孙子女或任何其他人。

# asp.net - 如何知道asp.net中处理的上一个事件

> ID：12423794
> 
> 赞同：-2
> 
> 时间：2012-09-14T11:40:23.147
> 
> 标签：asp.net

在页面加载时，我已将数据库中的数据显示到 gridview 上（带有编辑和删除选项）。我在页面上也有一个搜索按钮。当我单击搜索时，搜索到的数据应该在 gridview 中可见，这工作正常。但是，当我在搜索后单击删除链接时，它不会占用搜索到的行。点击删除后的页面回发。我需要检查在 gridview 上执行的事件之前执行的事件。怎么做？？我希望这个问题很清楚..任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:40:18.687

Page_Load 发生在 RowCommand 之前，您是否仅绑定网格 if(!IsPostBack) ？

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack)
    {
        BindGrid();
    }
}

protected void SearchButton_Click(object sender, EventArgs e)
{
    BindGrid(searchText.Text);
}

protected void GridView_RowCommand(object sender, GridViewRowEventArgs e)
{
    switch(e.CommandName)
    {
        case "Delete":
            DeleteRow(e.Row.CommandArgument);
            break;
    }
}

private void BindGrid()
{
    //GridView binding business logic.
}

private void BindGrid(String searchTerm)
{
    //GridView binding logic with searchTerm.
}

private void DeleteRow(String commandArg)
{
    //Convert command arg to ID or whatever and delete data.
} 
```

# python - 为什么 django 不保存加密密码？

> ID：12423796
> 
> 赞同：2
> 
> 时间：2012-09-14T11:40:28.443
> 
> 标签：python, django

我用的是 django 1.4。创建新用户时，它会保存纯密码。是否有设置，所以在保存用户时，密码是加密保存的？

**编辑**

我只是使用内置的管理功能来添加用户。没什么特别的 - 只是内置的身份验证模块和在管理员中自动创建的用户表单。

* * *

**更多编辑**

我需要一些自定义字段，所以我使用了自定义类：

```
class UserForm(forms.ModelForm):
    class Meta:
        model = User
    ...
    ... 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-14T11:45:27.373

[`create_user`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.UserManager.create_user)创建用户时应该使用manager 方法。

[`UserCreationForm`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.forms.UserCreationForm)如果您正在创建自定义表单，请将或的子类之一 [`UserChangeForm`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.forms.UserChangeForm)。如果您要创建自定义`ModelAdmin`，则创建子类`UserAdmin`。否则，您将不得不自己重新实现密码散列功能。

请注意，密码将被散列，而不是加密（即您无法解密）。

# c# - 带有网格线的 Winrt cusstrom 网格控件

> ID：12423798
> 
> 赞同：1
> 
> 时间：2012-09-14T11:40:30.070
> 
> 标签：c#, xaml, grid, microsoft-metro, winrt-xaml

我想做一个自定义网格控件，因为默认不支持显示网格线。我为此找到了一个 wpf 解决方案，但是 winrt 缺少 wpf 支持的一些功能。wpf 解决方案中的代码是这样的：

```
 protected override void OnRender(DrawingContext dc)
    {
        if (ShowCustomGridLines)
        {
            foreach (var rowDefinition in RowDefinitions)
            {
                dc.DrawLine(new Pen(GridLineBrush, GridLineThickness), new Point(0, rowDefinition.Offset), new Point(ActualWidth, rowDefinition.Offset));
            }

            foreach (var columnDefinition in ColumnDefinitions)
            {
                dc.DrawLine(new Pen(GridLineBrush, GridLineThickness), new Point(columnDefinition.Offset, 0), new Point(columnDefinition.Offset, ActualHeight));
            }
            dc.DrawRectangle(Brushes.Transparent, new Pen(GridLineBrush, GridLineThickness), new Rect(0, 0, ActualWidth, ActualHeight));
        }
        base.OnRender(dc);
    } 
```

但是我不能覆盖 onrender 方法，并且 winrt 中没有绘图上下文。那么我怎样才能在我的网格上绘制网格线呢？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T12:21:46.883

来自[微软文档](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.showgridlines.aspx)：

> 启用网格线会在网格内的所有元素周围创建虚线。只有虚线可用，因为此属性旨在用作调试布局问题的设计工具，而不是用于生产质量代码。如果您想要网格内的线条，请将网格内的元素设置为具有边框。

出于这个原因，metro 不支持网格线（仅限设计工具），因此根据 Microsoft 文档，我假设您必须在子元素上设置边框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T14:55:22.320

如果您不想在每个元素周围放置边框，那么我所做的基本上就是您所做的，但在 xaml 中基本上只是将它们绘制成类似的样子；

```
<Border BorderBrush="Black" BorderThickness="1" HorizontalAlignment="Left">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="20"/>    
            <RowDefinition Height="20"/>
            <RowDefinition Height="20"/>
            <RowDefinition Height="20"/>
            <RowDefinition Height="20"/>        
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="20"/>
            <ColumnDefinition Width="20"/>
            <ColumnDefinition Width="20"/>
            <ColumnDefinition Width="20"/>
            <ColumnDefinition Width="20"/>
        </Grid.ColumnDefinitions>
        <!-- Horizontal Lines -->
        <Rectangle Grid.ColumnSpan="5" Height="1" VerticalAlignment="Bottom" Fill="Black"/>
        <Rectangle Grid.Row="1" Grid.ColumnSpan="5" Height="1" VerticalAlignment="Bottom" Fill="Black"/>
        <Rectangle Grid.Row="2" Grid.ColumnSpan="5" Height="1" VerticalAlignment="Bottom" Fill="Black"/>
        <Rectangle Grid.Row="3" Grid.ColumnSpan="5" Height="1" VerticalAlignment="Bottom" Fill="Black"/>
        <Rectangle Grid.Row="4" Grid.ColumnSpan="5" Height="1" VerticalAlignment="Bottom" Fill="Black"/>
        <!-- Vertical Lines -->
        <Rectangle Grid.RowSpan="5" Width="1" HorizontalAlignment="Right" Fill="Black"/>
        <Rectangle Grid.Column="1" Grid.RowSpan="5" Width="1" HorizontalAlignment="Right" Fill="Black"/>
        <Rectangle Grid.Column="2" Grid.RowSpan="5" Width="1" HorizontalAlignment="Right" Fill="Black"/>
        <Rectangle Grid.Column="3" Grid.RowSpan="5" Width="1" HorizontalAlignment="Right" Fill="Black"/>
    </Grid>
</Border> 
```

通过这种方式，您可以随意排列单元格，并且可以减少将所有内容嵌套在边框中的情况。希望能帮助到你。干杯!

# android - LibGDX android通过手指拖动身体，没有鼠标关节

> ID：12423802
> 
> 赞同：2
> 
> 时间：2012-09-14T11:40:34.783
> 
> 标签：android, box2d, libgdx

我正在尝试做一个非常简单的游戏，曲棍球。由于我对任何游戏引擎都不是很熟悉，并且暂时不想使用任何 c++，所以我使用的是 LibGDX，随后是 Box2d。[我在这里](http://code.google.com/p/libgdx-backend-android-livewallpaper/source/browse/gdx-backend-android-livewallpaper-example/src/com/badlogic/gdx/tests/box2d/Box2DTest.java?r=ba02aaf34a8ca07daa0c30493bab993067c652f9)
找到了 MouseJoint 示例，但这完全不是我需要的。 我也尝试在身体上使用 setTransform，但它们通常会停止碰撞。

我需要的和这个游戏非常相似：[Cardboard Football Club](https://play.google.com/store/apps/details?id=com.casualgamestore.cardboardfootballclub3dhd)，但只是简单的 2d。我只需要用手指拖动我的球棒，让它与冰球和墙壁碰撞。毕竟动态物体有可能吗？

# c# - 如何减少通过构造函数传递的 IUnityContainer 对象的数量？

> ID：12423804
> 
> 赞同：1
> 
> 时间：2012-09-14T11:40:34.800
> 
> 标签：c#, .net, dependency-injection, inversion-of-control, unity-container

我有一个很大的阶级层次。当我的应用程序启动时，我初始化 UnityContainer 对象并对其进行配置。之后，我总是通过构造函数将它传递给层次结构中的另一个类。像这样的东西：

Unity 容器将这些类作为注册：IClassA、IClassB、IClassC、IClassD

接口的所有具体实现都有带有 IUnityContainer 参数的构造函数。例如，

```
 public class ClassA : IClassA
    {

        public ClassA(IUnityContainer unityContainer)
        {
        }
    } 
```

因此，每次创建某个类的新实例时，我都必须传递一个 IUnityContainer 对象。

我可以减少传递 IUnityContainer 对象作为构造函数参数的数量吗？也许通过使用依赖属性？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T11:42:51.030

是的，你应该减少它。

你应该把它减少到0。

像这样使用 DI 容器是一种不好的做法。不要把 DI 容器当成一个神奇的超级工厂。

**您应该只使用容器来更轻松地在组合根**中组合应用程序：[阅读此内容](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)

您的代码不应该知道它是由 DI 容器组成的，容器*只是一种技术*，而 DI 是一种技术。您也应该能够在没有容器的情况下编写应用程序。

那么，怎样才能减少呢？像这样：

```
public class ClassA : IClassA
{
    public ClassA()
    {
    }
} 
```

然后，如果您`ClassA`需要某些东西（依赖项、接口），那么您应该通过构造函数注入它。

```
public class ClassA : IClassA
{
    private readonly IComponent _component;        

    public ClassA(IComponent component)
    {
        _component = component;
    }
} 
```

您也可以使用其他注入模式：属性注入、方法注入、环境上下文。

如果您使用问题中的容器，那么您将隐藏实际类的所有依赖项。您无法弄清楚该实际类需要做什么，因为它将使用容器来临时解决某些问题。它完全反对依赖注入，因为您不注入依赖项，您只需注入一个通用工厂（您可以要求任何东西），这非常危险并且毫无意义地增加了复杂性。

我强烈推荐这本书：[.NET 中的依赖注入 - Mark Seemann](http://www.manning.com/seemann/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T11:54:29.423

您正在做的是滥用容器作为 ServiceLocator。这被认为是[现代应用程序架构中的反模式](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)。

请改用适当的依赖注入。Martin Fowler[对该模式进行了很好的介绍](http://martinfowler.com/articles/injection.html)。

Mark Seemann 写了一本非常好的书，名为[.NET 中的依赖注入](https://rads.stackoverflow.com/amzn/click/com/1935182501)。

正如@PeterPorfy 已经指出的那样，Composition Roots 的概念很重要。您在此处使用您的容器注册所有依赖项，然后通过在那里解析您的应用程序或服务的根对象来启动。

您永远不会将容器交给该组合根之外的类！

# math - SLR - 简单线性回归（在 R 中，但关于背后的数学，而不是编程）

> ID：12423811
> 
> 赞同：2
> 
> 时间：2012-09-14T11:41:19.307
> 
> 标签：math, linear-regression

所以我在理解简单的线性回归时遇到了一些问题。我确实读了很多书，所以我心中有基本的想法，但是当我们做一个时我不能完全理解。所以我有这个等式：

```
yi = a + bxi + ei 
```

好的，所以我确实意识到这是一条直线的方程式，尽管我确实对“ei”感到好奇，因为我在互联网上找不到它，但我的教授一直在使用它。

所以我想找到 a 和 b，这样我就可以找到一条直线，希望它不会离我的数据太远（对吗？）。我知道我可以计算出来，但这不是我的问题。

我希望如果我在这里添加我的例子没问题，所以我可以解释我在做什么：数据集

```
x        y
8        6.4
8        6.8
3        1.7
2        2.3
2        3.8
1        2.3
1        5.0
1        4.0
1        3.4
0        2.3 
```

计算所需的一切，我得到： b = 0.4599 a = 2.55827

（并且`lm`用 R 做这表明我是对的）。现在，如果我画这条直线`abline(2.55827,0.4599)`（首先进入截距？？），它表明这不是一条好线，看着表格我完全同意。但是我理解对了吗？如果 x|y 点通过给定值排列（意味着没有特定模式），则找不到好的线，所以我只能找到一个相当好的线。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T15:08:59.087

> 好的，所以我确实意识到这是一条直线的方程式，尽管我确实对“ei”感到好奇，因为我在互联网上找不到它，但我的教授一直在使用它。

这不是一条线的方程式。*y [i] = a + bx [i]*是直线的方程。e [i]是 a 和 b 给出的这条直线与您的测量值之间的误差。换句话说，*e [i] = y [i] - (a + bx [i] )*。

线性回归所做的是找到使这些误差项的平方和最小化的*a*和*b的值。*这种合身不一定是好的；这只是最好的（在最小二乘意义上）。残差的大小可以让您了解拟合的好坏。

为了能够理解拟合的好坏，您不仅需要知道残差，还需要知道各个测量中的误差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T12:17:41.763

Gil Strang 是伟大的应用数学家之一。他可以像其他人一样解释线性代数和最小二乘：

[http://videolectures.net/mit18085f07_strang_lec04/](http://videolectures.net/mit18085f07_strang_lec04/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-05T15:59:42.110

这似乎是一个老问题，但是有一篇很好的文章解释了线性回归背后的数学以及 R 语言中数学的逐步编码：http: [//www.codophile.com/programming-linear-regression-在-r/](http://www.codophile.com/programming-linear-regression-in-r/)

我希望这将有所帮助。

# php - 我应该使用哪种方法，为什么？

> ID：12423812
> 
> 赞同：3
> 
> 时间：2012-09-14T11:41:19.520
> 
> 标签：php, mysql

我正在使用该函数在 php 中建立数据库连接

`$DBConn = mysql_connect ("localhost" , "testuser" , "test123")`

在释放我正在使用的连接时

```
if( is_resource($DBConn) ) 
```

检查当前是否设置了连接。我想知道这样做是否有效，或者我应该像这样检查连接

```
if( $DBConn ) 
```

我想知道同时使用这两种说法的利弊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T05:39:10.873

首先，你不应该再使用`mysql_xxx`函数；有很多文章讨论了使用 PDO / mysqli 准备好的语句等的好处。

通过查看手册，它声明它返回链接标识符或`false`失败。你不应该假设这个标识符到底是什么，它通常是一个资源，但它也可能是一个对象或整数。我会简单地否定更简单的条件：

```
if (false !== $DBConn) {
    // do something with the database
} 
```

或者，或者：

```
if (false === $DBConn) {
    throw new Exception("Could not connect to database");
}
// do something with the database 
```

**编辑**

使用`if ($DBConn) { ... }`也可以，因为它基本上与 0、false、null、"" 和空数组相反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:46:17.973

成功连接或查询后返回资源标识符。因此，该函数`is_resource`会将变量标识为资源或错误。

如果`If`表达式计算结果为`TRUE`，PHP 将执行语句，如果计算结果为`FALSE`，则不会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:51:36.533

它们本质上是相同的，尽管有人可能会争辩说，调用`is_resource`方法具有调用函数的开销，但`if`也必须确定这一点，并且它们之间几乎没有区别。我猜这都是关于你的编码风格和可读性

# algorithm - Haskell：蛮力和最大子数组问题

> ID：12423819
> 
> 赞同：2
> 
> 时间：2012-09-14T11:42:01.737
> 
> 标签：algorithm, haskell

我正在尝试用蛮力方法解决[最大子数组问题，即生成所有可能的子数组组合。](https://en.wikipedia.org/wiki/Kadane%27s_Algorithm)我得到了一些有用的东西，但它根本不令人满意，因为它产生了太多重复的子数组。

有谁知道用最少数量的重复元素生成所有子数组（以 [[]] 形式）的聪明方法？

顺便说一句，我是 Haskell 的新手。这是我目前的解决方案：

```
import qualified Data.List as L

maximumSubList::[Integer]->[Integer]
maximumSubList x = head $ L.sortBy (\a b -> compare (sum b) (sum a)) $ L.nub $ slice x
     where 
        -- slice will return all the "sub lists"
        slice [] = []
        slice x = (slice $ tail x) ++ (sliceLeft x) ++ (sliceRight x)

        -- Create sub lists by removing "left" part
        -- ex [1,2,3] -> [[1,2,3],[2,3],[3]]
        sliceRight [] = []
        sliceRight x = x : (sliceRight $ tail x)

        -- Create sub lists by removing "right" part
        -- ex [1,2,3] -> [[1,2,3],[1,2],[1]]
        sliceLeft [] = []
        sliceLeft x = x : (sliceLeft $ init x) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T12:16:21.610

[标准Data.List](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html)模块中有许多有用的函数可用于对列表进行操作。

```
import Data.List

slice :: [a] -> [[a]]
slice = filter (not . null) . concatMap tails . inits 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T13:01:53.973

[dave4420 的答案](https://stackoverflow.com/a/12424383/47984)是如何使用智能、简洁的 Haskell 来做你想做的事情。我不是 Haskell 专家，但我偶尔会玩弄它，发现解决这样的问题是一种有趣的分心，并且喜欢弄清楚它为什么有效。希望下面的解释会有所帮助:)

dave4420 的答案（您的答案没有）的关键属性是该对`(startPos, endPos)`对于它生成的每个子数组都是唯一的。现在，观察两个子数组如果它们的or不同*，*则它们是不同的。应用于原始数组会返回一个子数组列表，每个子数组都有唯一的，并且相同（等于数组中的元素数）。依次应用于这些子数组中的每一个会产生另一个子数组列表——每个输入子数组输出一个子数组列表。请注意，*这不会干扰输入子数组之间的区别，*因为通过调用单个输入子数组输出的子数组都保持相同`startPos``endPos``inits``startPos``endPos``tails``tails` *`tails``startPos`：也就是说，如果您有两个具有不同`startPos`es 的子数组，并将它们都放入`tails`，则从第一个输入子数组生成的每个子数组都将不同于从第二个输入子数组生成的每个子数组。*

 *`tails`此外，在单个子数组上调用 产生的每个子数组都是不同的，因为尽管它们都共享相同的`startPos`，但它们都有不同的`endPos`es。因此，由 产生的所有子阵列`(concatMap tails) . inits`都是不同的。只需要注意没有遗漏任何子数组：对于从 position 开始并在 position`i`结束的任何子数组`j`，该子数组必须显示为`j-i+1`通过应用于`tails`生成的`i+1`第 th 列表而生成的第 th 列表`inits`。所以总而言之，每个可能的子数组只出现一次！*

# vb6 - 如何在VB中获取当前可执行文件的完整路径？

> ID：12423824
> 
> 赞同：15
> 
> 时间：2012-09-14T11:42:08.383
> 
> 标签：vb6, path, executable-path

我已经使用 VB 创建了一个 Windows 应用程序。每当我执行时`exe`，我想以`exe`编程方式获取文件的当前目录。

例如，

现在，我正在`exe`执行`d:\myApp\test.exe`. 每当我双击`exe`文件时，我都想获取`exe`文件的路径，例如`d:\myApp\test.exe`.

另外，假设我`exe`在 CD 或任何记忆棒中，它也会获得 exe 文件的路径吗？

我不知道这是否可能？

有什么建议吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-14T11:44:09.237

试试[`App.Path`](http://msdn.microsoft.com/en-us/library/aa268072%28v=vs.60%29.aspx)。它会给你当前的`exe`路径。要获取`exe`名称，您可以使用[`App.EXEName`](http://msdn.microsoft.com/en-us/library/aa267360%28v=vs.60%29.aspx). 请注意，在驱动器的根目录`App.Path`中将包含尾随，因此需要有条件地添加任何额外内容。`\``\`

因此，要获得带有名称的完整路径，请`exe`尝试以下操作：

```
App.Path & IIf(Right$(App.Path, 1) <> "\", "\", "") & App.EXEName & ".exe" 
```

此外，它还会为您提供 CD 或任何记忆棒的路径。

# linq - LINQ to Entities ToString() 中的错误

> ID：12423827
> 
> 赞同：0
> 
> 时间：2012-09-14T11:42:20.797
> 
> 标签：linq, linq-to-entities

我在 LINQ to Entities 中收到此错误：LINQ to Entities 无法识别方法“System.String ToString()”方法。
我应该如何解决这个常见问题？

请注意，FleetViewModel.DWTStart 是一个字符串，而fleet.DWTStart 是一个可为空的小数。

```
 var qry = from fleet in _entitiesContext.Fleets
                  select new FleetViewModel
                  {
                      FleetID = fleet.FleetID,
                      FleetName = fleet.FleetName,
                      DWTStart = fleet.DWTStart.HasValue?fleet.DWTStart.Value.ToString():"",
                      DWTEnd = fleet.DWTEnd.HasValue ? fleet.DWTEnd.Value.ToString() : ""
                  }; 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:55:20.173

基本上你需要在进程中完成最后一部分，你可以强制使用`AsEnumerable`：

```
var qry = _entitiesContext.Fleets
    .Select(fleet => new { fleet.FleetID,
                           fleet.FleetName,
                           fleet.DWTStart,
                           fleet.DWTEnd })
    .AsEnumerable() // Do the rest in-process
    .Select(fleet => new FleetViewModel {
        FleetID = fleet.FleetID,
        FleetName = fleet.FleetName,
        DWTStart = fleet.DWTStart.HasValue?fleet.DWTStart.Value.ToString():"",
        DWTEnd = fleet.DWTEnd.HasValue ? fleet.DWTEnd.Value.ToString() : ""
     }); 
```

如果实体中除了这四个属性之外没有其他内容，您可以跳过匿名类型开始 - 它实际上只是为了避免获取您不需要的数据：

```
var qry = _entitiesContext.Fleets
    .AsEnumerable() // Do the rest in-process
    .Select(fleet => new FleetViewModel {
        FleetID = fleet.FleetID,
        FleetName = fleet.FleetName,
        DWTStart = fleet.DWTStart.HasValue?fleet.DWTStart.Value.ToString():"",
        DWTEnd = fleet.DWTEnd.HasValue ? fleet.DWTEnd.Value.ToString() : ""
     }); 
```

# blackberry - 如何在黑莓中使用数据报套接字类

> ID：12423828
> 
> 赞同：0
> 
> 时间：2012-09-14T11:42:20.377
> 
> 标签：blackberry

我想知道如何使用黑莓中 java.net 包提供的数据报套接字类。我尝试使用它，但编译器无法找到 java.net 包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:10:40.290

您将 Java-SE 与 Java-ME 混淆了。BlackBerry 设备不运行完整的桌面 Java。该语言接近于 2000 年左右发布的 Java 1.3。为了节省设备存储空间，有意减少了可用的 API。具体来说，您似乎想使用[java.net.DatagramSocket](http://docs.oracle.com/javase/6/docs/api/java/net/DatagramSocket.html)，但正如您所注意到的，它不适用于 Java-ME BlackBerry 设备。相反，您应该使用[Connector](http://www.blackberry.com/developers/docs/7.1.0api/javax/microedition/io/Connector.html)类来创建[DatagramConnection](http://www.blackberry.com/developers/docs/7.1.0api/javax/microedition/io/DatagramConnection.html)

# iphone - 如何以编程方式检测 iPhone 中的传入邮件？

> ID：12423838
> 
> 赞同：-1
> 
> 时间：2012-09-14T11:42:45.650
> 
> 标签：iphone, ios

> **可能重复：**
> [挂接来电？](https://stackoverflow.com/questions/5417658/hook-into-incoming-call)
> [邮件到达时收到通知？](https://stackoverflow.com/questions/9000823/being-notified-when-mail-arrives)

我们应该使用什么框架或代码来检测 ios 设备中的传入电子邮件。我想检测收到的电子邮件并将通知消息发送到蓝牙 LE 设备以通知用户

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:47:00.170

你不能。Apple 不提供任何 API 来阅读电子邮件或在邮件到达时接收通知。

# excel - 在 Excel 中创建自定义键盘映射

> ID：12423847
> 
> 赞同：0
> 
> 时间：2012-09-14T11:43:26.687
> 
> 标签：excel, vba

如何在 Excel 中创建 VBA 键盘快捷键？我不想使用 GUI。我想以编程方式进行。那可能吗？

OnKey 函数是否意味着它正在访问的 Sub 的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:48:45.987

您应该单独编写一个`Sub`来设置您需要使用的密钥

```
Application.OnKey(Key, ProcedureName) 
```

然后可以以多种方式运行此子程序，例如从`Alt-F8`菜单运行、从 VBA IDE 运行、分配给命令栏按钮、从`Workbook_Open`事件运行

# android - 如果没有可用的网络，如何停止爆破申请？

> ID：12423851
> 
> 赞同：-1
> 
> 时间：2012-09-14T11:43:53.733
> 
> 标签：android

我有一个不扩展活动的类，如果没有可用的 Internet 连接，则会显示错误

如果 Internet 可用，它工作正常，但当 Internet 不可用或服务器繁忙时，应用程序强制关闭。我该如何防止这种情况？如何在主要活动类中打印捕获块消息？

如果没有可用的网络，如何阻止应用程序崩溃？

```
 public class AgAppHelperMethods   {

  private static final String LOG_TAG = null;
  public static   String[][] AgAppXMLParser( String parUrl) {

    String _node,_element;
    String[][] xmlRespone = null;
    try {

            String url = "www.xxxx.com";
            URL finalUrl = new URL(url);    

            DocumentBuilderFactory dbf =   
       DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            Document doc = db.parse(new  
        InputSource(finalUrl.openStream()));
            doc.getDocumentElement().normalize();

            NodeList list=doc.getElementsByTagName("*");
            _node=new String();
            _element = new String();
            xmlRespone = new String[list.getLength()][2];

            for (int i=0;i<list.getLength();i++)
                {
                    Node value=list.item(i).      getChildNodes().item(0);
                    _node=list.item(i).getNodeName();
                    _element=value.getNodeValue();
                    xmlRespone[i][0] = _node;
                    xmlRespone[i][1] = _element;

                }//end for

        }//end try

 catch (Exception e)
 {
     Log.e(LOG_TAG, "Connection Error NET NOT WORKING", e);
     }

    return xmlRespone;         

}

        public class LoginScreen extends Activity implements Serializable {

public void onCreate(Bundle icicle) {
    super.onCreate(icicle);

    setContentView(R.layout.agapplogin);
          btnLogin = (Button) findViewById(R.id.btnLogin);

            btnLogin.setOnClickListener(new OnClickListener() {

                            public  void  
          onClick(View     view) {
            postLoginData();

             public void postLoginData()

{
             xmlRespone = AgAppHelperMethods.AgAppXMLParser( "www.xxx.com);

        Intent i = new Intent(this.getApplicationContext(),   
      Activity2.class);
        Bundle bundle = new Bundle();
        bundle.putSerializable("xmlResponee", xmlRespone.toString());
        i.putExtras(bundle);
        //i.putExtra("OBJECT", xmlRespone) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:49:05.860

您可以使用此代码段检查互联网是否可用，

```
ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo activeNetworkInfo = connectivityManager
                .getActiveNetworkInfo();

        if (activeNetworkInfo == null) {

            Toast.makeText(Photos_Activity.this,
                    "Network Not Connected...Please Try Again",
                    Toast.LENGTH_LONG).show();

        } else {
            if (activeNetworkInfo.isConnected()) {

                //Here you can perform your task when internet is connected 

            } else if (activeNetworkInfo.isConnectedOrConnecting()) {

                Toast.makeText(Photos_Activity.this,
                        "Network is connecting Now please patient",
                        Toast.LENGTH_LONG).show();
            }

        } 
```

不要忘记在清单中添加此权限

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:50:56.427

您必须先检查网络可用性，然后再进行进一步处理

此功能可能会帮助您完成并添加所需的权限

```
public static boolean isNetworkAvailable(Context context) {
        boolean outcome = false;

        if (context != null) {
            ConnectivityManager cm = (ConnectivityManager) context
                    .getSystemService(Context.CONNECTIVITY_SERVICE);

            NetworkInfo[] networkInfos = cm.getAllNetworkInfo();
            for (NetworkInfo tempNetworkInfo : networkInfos) {

                if (tempNetworkInfo.isConnected()) {
                    outcome = true;
                    break;
                }
            }
        }

        return outcome;
    } 
```

# java - 注入@Resource 如何在容器外工作？

> ID：12423856
> 
> 赞同：2
> 
> 时间：2012-09-14T11:44:17.627
> 
> 标签：java, web-services, dependency-injection, code-injection

我正在 Java SE 中测试 web 服务，我看到 @Resource 确实有效，这难道不是只在 Container 中吗？或与 CDI ？为什么它也可以在 SE 中使用！？

```
@WebService
public class Teams {

    @Resource
    private WebServiceContext context;
} 
```

我正在使用发布`Endpoint.publish("http://localhost:9876/teams", new Teams());`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:46:25.267

不对。容器将在任何 EJB 组件上注入资源实例。

[http://docs.oracle.com/javaee/5/api/javax/annotation/Resource.html](http://docs.oracle.com/javaee/5/api/javax/annotation/Resource.html)

# java - 将 Java SE 端点与嵌入式 Tomcat 结合使用

> ID：12423862
> 
> 赞同：2
> 
> 时间：2012-09-14T11:44:58.450
> 
> 标签：java, tomcat, jax-ws

我有一个通过简单端点接口公开的 JAX-WS Web 服务（[示例](http://java.dzone.com/articles/jax-ws-hello-world)）

如果我正确理解 API，作为直接调用 Endpoint.publish（使用 Sun 的 HTTP 服务器）的替代方法，我们可以：

1.  创建端点 -->`Endpoint e = Endpoint.create(impl);`
2.  发布端点--->`e.publish(context);`

我可以使用此`e.publish(..)`API 发布到嵌入式 tomcat 服务器吗？（[示例](http://java.dzone.com/articles/embedded-tomcat-minimal)）

[Publish 方法](http://docs.oracle.com/javaee/5/api/javax/xml/ws/Endpoint.html#publish%28java.lang.Object%29)的javadoc让我很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T12:52:23.683

尽管它已有两年多的历史，[但](https://stackoverflow.com/a/2083707/1127892)对相关问题的回答仍然适用。如果要部署到tomcat，不管是嵌入式运行还是正常运行，都需要打包一个`war`，放在webapps目录下。

为了以您的问题中描述的方式使用该`publish()`方法，tomcat 必须提供一个[Sun HTTP Server Service Provider Implementation](http://docs.oracle.com/javase/7/docs/jre/api/net/httpserver/spec/index.html)，但它没有。Sun 的 HTTP 服务器的替代方案是[Jetty](http://jetty.codehaus.org/jetty/)。

# javascript - 如何找出我正在使用的 jQuery 版本？

> ID：12423864
> 
> 赞同：19
> 
> 时间：2012-09-14T11:45:04.557
> 
> 标签：javascript, jquery

我的页面加载 jQuery。有什么方法可以找出 jQuery 的哪个版本？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-14T11:46:51.180

您可以使用`$().jquery;`或`$.fn.jquery`

这将返回一个包含版本号的字符串，例如 1.6.2。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-14T11:51:41.277

只需打开 Chrome 控制台或 Firebug 并在页面中输入

```
$().jquery; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T11:48:10.373

你可以做：

```
alert($().jquery); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T11:50:35.070

您可以通过以下方式了解版本：

```
jQuery.fn.jquery 
```

# postgresql - 使用多个 URL 在 Heroku 应用程序之间复制数据库

> ID：12423865
> 
> 赞同：0
> 
> 时间：2012-09-14T11:45:06.463
> 
> 标签：postgresql, heroku, copy, database-backups, database-restore

我们在 Heroku 上的数据库已经增长到需要三个 pgbackups URL 来下载。我知道如何将此数据库备份下载到本地计算机，将各个部分合并在一起并进行恢复，但是如果我想将数据库从一个 Heroku 应用程序复制到另一个应用程序该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T23:22:37.513

如果您想从一个应用程序复制另一个应用程序，您应该能够跨应用程序分叉您的数据库。你可以这样做：

```
heroku addons:add heroku-postgresql:crane --fork HEROKU_POSTGRESQL_SOURCE_OF_OLD_DB_AS_URL --app newapphere 
```

# sql - SharePoint 2010 中的大数据

> ID：12423867
> 
> 赞同：1
> 
> 时间：2012-09-14T11:45:13.900
> 
> 标签：sql, list, sharepoint-2010, bigdata, splist

我有大量 CSV 格式的数据（7 Mio. 行），我必须每月自动导入一次 SharePoint 项目。数据总量并不大（100 kB）。该数据中的查询通常只检索一或几行）

因为 SharePoint 并不真正“喜欢”大列表（阈值等），所以我想知道哪种方法是解决该瓶颈的最佳方法。

1.  只需将数据放入列表中（不喜欢这个，因为即使在导入之前删除也肯定需要几个小时）

2.  将数据保存到 sql-Database 并编写“包装器”以直接连接到 SQL

这些是我对解决这个问题的可能性的第一个想法。还有其他（更好的）方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T02:55:03.387

我会使用 SSIS 来做到这一点。

下载 SSIS 的 SharePoint 列表适配器（只需在 Google 上搜索这些适配器）。

使用平面文件连接从您的 csv 文件中获取数据，您可以将共享点列表中已有的数据与 csv 文件中的数据进行比较，并仅添加新行 - 我认为您使用合并/连接来执行此操作.

我以前做过，如果您需要更多详细信息，请告诉我，这只是我的想法。

# iphone - 如何在 iPhone 中将 HTTP Post 实现为 android HTTPPost？

> ID：12423868
> 
> 赞同：0
> 
> 时间：2012-09-14T11:45:13.960
> 
> 标签：iphone, objective-c, http-post, nsurlconnection, nsurlrequest

我有使用 POST 方法在 HTTP RESTful Web 服务上将密钥对值作为数组列表发送的示例代码，如下所示。

```
public void postData() {
    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://www.yoursite.com/script.php");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("id", "12345"));
        nameValuePairs.add(new BasicNameValuePair("stringdata", "Hi"));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }
} 
```

如何在 iPhone Objective-C 中实现相同的功能。任何想法表示赞赏...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:54:53.413

在您的项目中包含 JSON 库，您需要将键值对分解为 JSOn 片段，然后通过 POST 发送。

```
 NSMutableDictionary *dictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                                               @"12345",@"id",
                                               @"Hi",@"stringData",
                                                 ,nil]; 

            //Pass it twice to escape quotes
            NSString *jsonString = [NSString stringWithFormat:@"%@", [dictionary JSONFragment], nil];
            NSString *requestString = [NSString stringWithFormat:@"%@",jsonString,nil];
            NSData *requestData = [NSData dataWithBytes: [requestString UTF8String] length: [requestString length]];
            NSString *urlstr=[NSString stringWithFormat:@"your URL"];

            str = [str stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
            NSURL *url=[NSURL URLWithString:str];

            NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
            NSURLResponse *response = nil;
            NSError *error = nil;

            NSString *postLength = [NSString stringWithFormat:@"%d", [requestData length]];
            [request setHTTPMethod: @"POST"];
            [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
            [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
            [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
            [request setHTTPBody: requestData];

            NSData *returnData = [NSURLConnection sendSynchronousRequest: request returningResponse: &response error: &error ];
            NSString *returnString = [[NSString alloc] initWithData:returnData encoding: NSUTF8StringEncoding];

    NSLog(@"your response %@",returnString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T12:02:40.990

我写了一个不错的网络客户端，欢迎大家使用。它使用 AFNetworking 进行处理，效果很好。看看[这里](https://stackoverflow.com/questions/10618056/how-to-post-more-parameters-with-image-upload-code-in-ios)。

# android - Phonegap 一直显示确认对话框

> ID：12423874
> 
> 赞同：0
> 
> 时间：2012-09-14T11:45:26.283
> 
> 标签：android, cordova, webview, dialog, confirm

我使用Phonegap 2.0。在我的 Android 应用程序中是我的主要活动，它从 DroidGap 扩展

我有一个包含 phonegap2.0.0.js 的资产 html 文件，使用时没问题

```
appView.loadUrl("file:///android_asset/www/index.html"); 
```

但是当我将该文件读入字符串时，然后使用

```
appView.loadDataWithBaseURL("http://foo", html, "text/html", "utf8", ""); 
```

Phonegap 显示许多对话框（getPort、getToken、...）然后继续显示确认对话框

如何解决这个问题呢 ？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:42:06.767

CordovaWebView 当前不支持 loadDataWithBaseURL。这是使用未初始化的 WebView 将所有内容发送到 JS 提示代码。我建议[在这里添加一张 Cordova 跟踪器的票](https://issues.apache.org/jira/browse/CB)

# php - 弹出 Onclick 表单

> ID：12423876
> 
> 赞同：0
> 
> 时间：2012-09-14T11:45:28.500
> 
> 标签：php, javascript

嗨有一点问题我想做的是，一旦用户点击了一个**按钮** ，该**按钮**应该显示一个**表单**的弹出窗口，这样他们就可以输入一个**日期**值，这样它就可以用于将来的用途和弹出窗口有一个提交按钮，因此使用以下代码处理操作：

```
 if (isset($_POST['unenroll'])){
        $sql1="Update tbl_enroll SET status='unEnrolled' , counter='0' 
              period='$pweek";
                    $pow = mysql_query($sql1) or die (mysql_error());
                    } 
```

到目前为止，我对如何创建弹出窗口有疑问：

```
 onclick="window.open‘unenroll.php’,‘Unenroll’,
   ‘menubar=no,width=200,height=100,toolbar=no’)" 
```

到目前为止，它只是没有创建弹出表单。将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:48:03.957

您使用了错误的引号，并且还缺少一个括号。在这里试试这个：

```
onclick="window.open('unenroll.php', 'Unenroll', 'menubar=no,width=200,height=100,toolbar=no')" 
```

请注意，这必须在一行中，并且还关心 php 变量`$pweek`如果来自客户端，则打开一个盲目的 sql 注入孔。

在您的 SQL 语句中还缺少引号和逗号：

```
$sql1="Update tbl_enroll SET status='unEnrolled', counter='0', period='$pweek'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T12:00:10.863

弹出窗口不会是一个更好的选择，因为它要么被浏览器或用户阻止，所以我认为更好的方法是制作一个 div 并在点击时显示 div

html

```
<div id="demo"></div> 
```

jQuery

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
 <script type="text/javascript">
   $(document).ready(function(){
     $("#demo").hide();
     $(document).live("click",function(){
          $("#demo").show();

      }) 
  })
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T12:14:36.907

你的点击应该是这样的

```
onclick="window.open('unenroll.php', 'Unenroll', 'menubar=no,resizable=no,width=200,height=100,toolbar=no,left='+((screen.width/2)-50)+',top='+((screen.height/2)-50))" 
```

resizable=no 将禁用最大化按钮。

```
left = (screen.width/2)-50;
top = (screen.height/2)-50; 
```

应该在您的情况下将弹出窗口居中...

# c# - 使用 IoC 将参数从 ViewModel 传递到另一个

> ID：12423880
> 
> 赞同：1
> 
> 时间：2012-09-14T11:45:46.790
> 
> 标签：c#, .net, mvvm, inversion-of-control, ioc-container

我正在尝试从 MainViewModel 实例化 SecondViewModel 注入第二个参数，这些参数是在 IoCContainer 中注册的服务和来自 MainVM 的对象。

代码是这样的：

```
class MainViewModel
{
    public MainViewModel()
    {
    }

    private string message = "the message";
    public string Message { get; set; }
}

class SecondViewModel
{
    public SecondViewModel(IService service, string message)
    {
    }
} 
```

现在，我知道我可以让 IoC Container 将 SecondViewModelFactory（承载服务实例）注入 MainViewModel，因此它可以通过它创建 SVM，但是如果 IService 的实现非常繁重，我不想实例化它，但当我真的需要它时。

如果我必须以类似的方式实例化其他 ViewModel 怎么办？我是否必须创建大量 VMFactories 和构造函数的参数？

如果我使用通用 ViewModelFactory，则需要实例化它，传递我拥有的每个 ViewModel 所需的所有服务，无论它们是否会被创建。

你知道我的案子有什么更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:04:44.690

一般来说，服务的创建不应该很重。他们的构造函数应该只存储传入的依赖项。如果它在后台使用了一些繁重的资源，则不应通过构造函数访问它们。这使构造函数保持简单（避免您必须对其进行测试）并允许非常快速地组合对象图。

如果真的没有办法解决这个问题，基本上有两种模式可以应用：

**1\. 工厂**

您可以注入工厂来延迟类型的创建。当创建应该明确控制的对象（例如，应该尽快释放的实例）时，工厂也很有用。有几种创建工厂的方法。有些人喜欢在他们的服务中注入`Func<T>`或`Lazy<T>`依赖，但我觉得这太含蓄了。我宁愿注入一个`ISomeServiceFactory`，因为我发现这更具可读性。缺点是您需要为此定义一个新接口。但是，如果您发现自己有许多工厂接口，那么您的设计可能无论如何都存在[问题。](https://www.cuttingedge.it/blogs/steven/pivot/entry.php?id=100)

**2\. 代理**

您可以将服务隐藏在代理后面，而不是创建工厂。该代理可以实现与服务相同的接口，并将为您执行延迟。这可以防止您让应用程序依赖于不同的接口（一个`IServiceFactory`或`Lazy<T>`例如）。尤其是`Lazy<T>`将有关创建的详细信息泄露给此类依赖项的使用者。如果方便的话，您仍然可以将 a`Lazy<T>`注入此代理。这不是问题。该代理通常是您的[组合根](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)的一部分，您的应用程序的其余部分仍将取决于您的`IService`而不是您的`Lazy<IService>`.

Please be aware that the use of factories, proxies and lazy initiation does complicate the wiring of the container. So don't use if unless you measured that you really need it. They complicate things, because of the indirection, which makes it harder to follow interlectually. And they make it harder to verify your configuration using automated tests. For more information about verifying your container, take a look [here](https://stackoverflow.com/questions/12371027/which-is-a-good-approach-to-test-ninject-bindings/12376609#12376609) and [here](https://simpleinjector.readthedocs.io/en/latest/howto.html#verify-configuration).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:26:05.097

大多数`IoC Containers`支持延迟依赖，`Lazy<>`以避免立即创建昂贵的类。

因此，在您的代码中，您可以为昂贵的 IService 做一些懒惰：

```
class SecondViewModel
{
    public SecondViewModel(Lazy<IService> service, string message)
    {
    }
} 
```

您可以使用一些流行的 IoC 容器并查看它们如何支持延迟加载：[Autofac](https://stackoverflow.com/questions/3075260/what-happened-to-lazyt-support-in-autofac)或[NInject](https://stackoverflow.com/questions/2538132/lazy-loading-with-ninject)

# java - Jsp servlet 异常

> ID：12423883
> 
> 赞同：5
> 
> 时间：2012-09-14T11:46:05.340
> 
> 标签：java, jsp, maven, servlets, hadoop

我可能已经看到了这个问题的一些类似答案，但我觉得我的情况有所不同。到目前为止，我正在开发一个运行良好的 Spring MVC 应用程序，也就是说，我在我的项目中包含了 hadoop api，当我包含 hadoop 时，当我尝试打开之前工作的初始仪表板页面时，这个异常开始发生：

```
java.lang.AbstractMethodError: javax.servlet.jsp.JspFactory.getJspApplicationContext(Ljavax/servlet/ 
ServletContext;)Ljavax/servlet/jsp/JspApplicationContext;
 org.apache.jsp.ServerInfo_jsp._jspInit(ServerInfo_jsp.java:63)
 org.apache.jasper.runtime.HttpJspBase.init(HttpJspBase.java:52)
 org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:158)
 org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:328)
 org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:336)
 org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265)
 javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
 org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:9 
```

这是我的 hadoop 依赖项的样子：

```
<dependency>
            <groupId>org.apache.hadoop</groupId>
            <artifactId>hadoop-client</artifactId>
            <version>0.23.1-mr1-cdh4.0.0b2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.hadoop</groupId>
            <artifactId>hadoop-core</artifactId>
            <version>0.23.1-mr1-cdh4.0.0b2</version>
            <exclusions>
                <exclusion>
                    <groupId>org.mortbay.jetty</groupId>
                    <artifactId>jetty</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>javax.servlet</groupId>
                    <artifactId>servlet-api</artifactId>
                </exclusion>
            </exclusions>
        </dependency> 
```

一旦我将它添加到我的应用程序中，它就不再可用，并且自然而然地没有这些依赖关系，事情就会运行得非常顺利。我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T13:42:56.263

我认为您的问题是 hadoop 包含一个版本的 servlet API，该版本在类路径中的“正确”servlet API 之前出现。Hadoop 依赖于 Jetty，而 Jetty 会反过来尝试包含一个 servlet API。

我有一个设置非常相似的项目，Spring MVC 和 Hadoop。对于 hadoop 依赖项，我有以下排除项。请注意，这可能会根据您的 hadoop 发行版而略有不同，我使用的是 cloudera 的。由于您使用的 servlet 容器通常会附带其自己的 javax.servlet 依赖项，因此您的排除需要捕获这种情况。我只用 Jetty 测试了以下配置：

```
 <dependency>     
              <groupId>org.apache.hadoop</groupId>
              <artifactId>hadoop-core</artifactId>
              <version>${hadoop.version}</version>
           <exclusions>

          <exclusion>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>jetty</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>jetty-util</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>jsp-2.1</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>jsp-api-2.1</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>servlet-api-2.1</artifactId>
            </exclusion>
            <exclusion>
                <groupId>javax.servlet</groupId>
                <artifactId>servlet-api</artifactId>
            </exclusion>
            <exclusion>
                <groupId>javax.servlet.jsp</groupId>
                <artifactId>jsp-api</artifactId>
            </exclusion>
            <exclusion>
                <groupId>tomcat</groupId>
                <artifactId>jasper-compiler</artifactId>
            </exclusion>
            <exclusion>
                <groupId>tomcat</groupId>
                <artifactId>jasper-runtime</artifactId>
            </exclusion>
            <!-- other exclusions snipped for brevity --> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T16:01:36.407

我最近在我的 Web 应用程序中对 hadoop-core 1.2.1 有过类似的体验。除了 Paul Sanwald 指出的依赖关系之外，我还排除了一些 org.eclipse.jetty 依赖关系：

```
 <exclusion>
                <groupId>org.eclipse.jetty</groupId>
                <artifactId>jetty-server</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.eclipse.jetty</groupId>
                <artifactId>jetty-servlet</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.eclipse.jetty</groupId>
                <artifactId>jetty-client</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.eclipse.jetty</groupId>
                <artifactId>jetty-plus</artifactId>
            </exclusion> 
```

It's not completely clear to me whether every one of these *had* to be excluded, but I wanted to be sure no unneeded dependencies were getting in - I'm using Tomcat, which provides JSP and servlet libraries. **jetty-servlet definitely had to go.**

# c++ - 使用 OpenMP 在四核系统上加速 4 线程问题

> ID：12423885
> 
> 赞同：2
> 
> 时间：2012-09-14T11:46:14.117
> 
> 标签：c++, multithreading, openmp

我在使用 OpenMP 的四核系统上使用 4 个线程时遇到了加速问题。使用 2 个线程，效率接近 1，但使用 4 个线程，效率降低到一半，即运行时间与使用 2 个线程运行代码时大致相同。我在 OpenMP 论坛上搜索过，之前发现类似的问题是因为 Inter turbo boost 技术。请参考这篇文章[http://openmp.org/forum/viewtopic.php?f=3&t=1289&start=0&hilit=intel+turbo+boost](http://openmp.org/forum/viewtopic.php?f=3&t=1289&start=0&hilit=intel+turbo+boost)

所以我试图在我机器的所有 4 个处理器上禁用涡轮增压，但无法摆脱这个问题。

我只从上面的链接中获取了基准代码。

我有一台戴尔笔记本电脑，我的硬件/操作系统信息摘要如下：

```
OS : Linux3.0.0.12-generic , Ubuntu
KDE SC Version : 4.7.1

Processor: Intel(R) Core(TM) i7-2620M CPU @ 2.70GHz 
```

请让我知道还有哪些其他可能的问题不允许我使用 4 个线程/内核加速。作为附加信息。我检查了所有 4 个线程都在不同的内核上运行。

期待您的回答。

代码：

```
#include <stdio.h>
#include <omp.h>
#include <math.h>

double estimate_pi(double radius, int nsteps){

   int i;
   double h=2*radius/nsteps;
   double sum=0;
   for (i=1;i<nsteps;i++){
      sum+=sqrt(pow(radius,2)-pow(-radius+i*h,2));
      //sum+=.5*sum;
   }
   sum*=h;
   sum=2*sum/(radius*radius);
   //printf("radius:%f --> %f\n",radius,sum);
   return sum;

}

int main(int argc, char* argv[]){

   double ser_est,par_est;
   long int radii_range;
   if (argc>1) radii_range=atoi(argv[1]);
   else radii_range=500;   

   int nthreads;
   if (argc>2) nthreads=atoi(argv[2]);
   else nthreads=omp_get_num_procs();

   printf("Estimating Pi by averaging %ld estimates.\n",radii_range);
   printf("OpenMP says there are %d processors available.\n",omp_get_num_procs());

   int r;
   double start, stop, serial_time, par_time;

   par_est=0;
   double tmp=0;
   ser_est=0;
   start=omp_get_wtime();
   for (r=1;r<=radii_range;r++){
      tmp=estimate_pi(r,1e6);
      ser_est+=tmp;
   }
   stop=omp_get_wtime();
   serial_time=stop-start;
   ser_est=ser_est/radii_range;

   omp_set_num_threads(nthreads);
   start=omp_get_wtime();
   #pragma omp parallel for private(r,tmp) reduction(+:par_est)
   for (r=1;r<=radii_range;r++){
      tmp=estimate_pi(r,1e6);
      par_est+=tmp;
   }
   stop=omp_get_wtime();
   par_time=stop-start;
   par_est=par_est/radii_range;

   printf("Serial Estimate: %f\nParallel Estimate:%f\n\n",ser_est,par_est);
   printf("Serial Time: %f\nParallel Time:%f\nNumber of Threads: %d\nSpeedup: %f\nEfficiency: %f\n",serial_time,par_time,nthreads,serial_time/par_time, serial_time/par_time/nthreads);

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T11:48:39.230

[Core i7-2620M](http://ark.intel.com/products/52231/Intel-Core-i7-2620M-Processor-%284M-Cache-up-to-3_40-GHz%29)是具有 HT的双核（因此有 4 个逻辑核）。HT 并不总能提高程序性能，而且改进很大程度上取决于程序本身（对于一些内存密集型应用程序，它甚至可能会降级）。您绝对不应该期望 4 倍的加速，因为它没有 4 个物理内核。

如果您有时间，值得从这里阅读一下：http: [//software.intel.com/en-us/articles/performance-insights-to-intel-hyper-threading-technology/](http://software.intel.com/en-us/articles/performance-insights-to-intel-hyper-threading-technology/)

# java - 具有内部列表条件的休眠 NamedQuery

> ID：12423893
> 
> 赞同：0
> 
> 时间：2012-09-14T11:46:32.770
> 
> 标签：java, sql, hibernate, named-query

```
 class A{
// one to many mapping
    List<B> listOfB;
    //getter and setter;
    class B {
    String s;
    //getter and setter
    } 
```

现在，当我得到类 A 时，它将返回 listOfB 中所有关联的类 B。但我需要确定 B 中的哪一个应该做出回应。就像 Get A 这样 listOfB 包含所有这样的 B s = 'something'。

编辑：目前这不起作用：

```
select a from A a where a.listOfB IN (select b from a.listOfB b where b.s='something'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:02:21.740

1）我假设您映射了从 A 到 B 的一对多关系，例如 A.listOfB = Bb

我认为您的查询可以简化为：

```
select a 
from A a, B b
where a.listOfB = b.b
and where b.s='something' 
```

等效的 Hibernate Criteria 查询将是：

```
List results =  sess.createCriteria(A.class)  
    .createCriteria("listOfB")
    .add(Restrictions.eq("s", "something"))
    .list(); 
```

2) 如果这些实体之间没有映射关系，您可以在字段 a.listOfB 上使用 SQLRestriction

```
List results = sess.createCriteria(A.class)
.add( Restrictions.sqlRestriction("{alias}.listOfB in (selec b from B where b.s = ?)), "something", Hibernate.STRING) )
   .list(); 
```

更多例子[在这里](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html#querycriteria-associations)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T12:02:53.783

你可以用 Hibernate 做到这一点，尽管 JPA 规范说它应该被禁止。事实上，当你得到一个 时`A`，它的 B 列表应该始终是一个 B 的完整列表。不是已被某些查询过滤的列表。我会避免这样做，因为它很危险。相反，我会使用如下查询：

```
select a, b from A a inner join a.listOfB b where b.s = 'something' 
```

现在您拥有所有您感兴趣的 As 和所有您感兴趣的 B：

```
A1, B1
A1, B2
A2, B7
A2, B8 
```

如果您真的想获得带有部分 B 列表的 As，请使用以下查询。但是你已经被警告了：它不是便携式的，而且很危险：

```
select a from A a inner join fetch a.listOfB b where b.s = 'something' 
```

# vb.net - 在 VB.net 中的表单之间交换

> ID：12423895
> 
> 赞同：0
> 
> 时间：2012-09-14T11:46:35.890
> 
> 标签：vb.net, forms, oop, swap, methodology

所以我正在尝试使用 VB.net 自学面向对象编程，虽然我有一些基本的经验，但我觉得我做的事情非常错误。

我的应用程序有两个可见屏幕（表单），一个“选择您的难度”屏幕，我将其称为 screen1，一个“游戏”屏幕，我将其称为 screen2。

1.  我创建了一个在应用程序加载时运行的 Main() 类

2.  从 Main() 我生成 screen1 和 screen2 （两种形式）。

3.  Screen1 有两个按钮。单击时，他们将隐藏当前屏幕，显示屏幕 2，并根据选择的按钮以设定的难度开始游戏。

进入 Form 类后，我无法再引用 Main()，我可以在其中轻松关闭一个表单并打开另一个表单。

所以问题是这样的。关于正确的面向对象设计。更改屏幕和开始运行游戏的最广泛接受的方式是什么？

我不需要代码片段或任何东西，我只需要一个关于应该如何完成的基本解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:55:55.530

当您从`Main`入口点方法中显示表单时，您必须调用`Application.Run`. `Main`当您这样做时，在关闭表单之前，执行不会继续到方法中的下一行。例如，您可以在第一个表单关闭后立即显示第二个表单，如下所示：

```
Sub Main()
    Application.Run(New Screen1())
    Application.Run(New Screen2())
End Sub 
```

然而，这通常不是这样的事情。通常，您只会`Application.Run`在第一个上调用一次，然后该表单会显示第二个。但是，如果您这样做，您必须确保第一个表单在您希望程序结束之前不会关闭。因此，与其关闭 screen1，不如将其隐藏起来。例如：

```
Class Screen1
    Private Sub ShowScreen2()
        Dim screen2 As New Screen2()
        Me.Hide()
        screen2.Show()
    End Sub
End Class 
```

然后，`Screen1`可以有一个事件处理程序来观察何时`Screen2`关闭并重新显示自身或在该点关闭自身。或者，如果合适，您可以显示`Screen2`为一个对话框窗口，这意味着在第二个屏幕关闭之前，该方法不会继续执行，例如：

```
Class Screen1
    Private Sub ShowScreen2()
        Dim screen2 As New Screen2()
        Me.Hide()
        screen2.ShowDialog()
        Me.Show()
    End Sub
End Class 
```

# php - 如何用 preg_replace 替换括号内的逗号

> ID：12423896
> 
> 赞同：1
> 
> 时间：2012-09-14T11:46:44.283
> 
> 标签：php, preg-replace, brackets

我需要将“，”替换为“enoComma”，但仅限于括号<...>内的那个。
我正在尝试这样做，但它只替换括号内的第一个逗号

```
$text = 'asd, asd <asd, asd, adasd> ... ';
preg_replace_callback("/(<.*?),(.*?>)/",
    create_function('$m', 'return $m[1].\'enoComma\'.$m[2];'),
    $text
);
echo $text; // asd, asd <asdenoComma asd, adasd> ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:52:31.790

我认为应该这样做：

```
$text = 'asd, asd <asd, asd, adasd> ... <a,b,c>';

function replace_function($s) {
  return str_replace(",", "enoComma", $s[0]);
}

$text = preg_replace_callback("|<(.*)>|", "replace_function", $text);

echo "$text\n"; 
```

输出：

```
asd, asd <asdenoComma asdenoComma adasd> ... <aenoCommabenoCommac> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T11:53:32.800

由于您已经在使用[preg_replace_callback](http://docs.php.net/preg_replace_callback)我会让它获取括号之间的所有内容，然后让回调用 enoComma 替换每个逗号。

```
<?php
$text = 'asd, asd <asd, asd, adasd> asd, asd asd, asd <x, y, z> asd';
$text = preg_replace_callback('/(?<=<)[^<>]+(?=>)/', function($e) {
    return str_replace(',', 'enoComma', $e[0]);
}, $text);
echo $text; 
```

印刷

```
asd, asd <asdenoComma asdenoComma adasd> asd, asd asd, asd <xenoComma yenoComma z> asd 
```

但请记住，这不适用于嵌套括号`a,b<c,d<e,f>>`
，例如示例使用[lambda 函数](http://docs.php.net/manual/en/functions.anonymous)而不是[create_function](http://docs.php.net/create_function)。

# grep - 如何让 Sublime Text 2 使用 Cygwin 而不是 cmd？

> ID：12423903
> 
> 赞同：2
> 
> 时间：2012-09-14T11:47:14.050
> 
> 标签：grep, cygwin, cmd, sublimetext2

例如，我想使用[这个插件](https://github.com/technocoreai/SublimeExternalCommand)来`grep`选择文本，所以我需要 Sublime 来使用 Cygwin 而不是`cmd`那样。

有什么方法可以通过 Sublime Text 2 设置做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:31:03.687

一种选择可能是将 cmd 提示指向 cygwin 可以访问的所有二进制文件。通过编辑我的 PATH 以包含 cygwin 包含的二进制文件，我使用 cmd 提示符作为我的“终端”。

如果您使用的是 Windows 7，您可以： 1) 右键单击​​计算机，选择属性 2) 单击左侧窗格中的“高级系统设置” 3) 单击右下角的“环境变量” 4) 取决于如果您希望它是系统范围的或仅适用于您的用户，请编辑变量“路径”以获取 cygwin 二进制文件的路径。这看起来类似于将以下文本添加到路径变量的末尾：“;c:\cygwin\bin”

现在您可以使用 cmd 提示符执行 cygwin 允许您执行的大部分操作，例如使用 ls、mkdir、grep 等。

# android - 当我连接 Android 设备或启动 Android Emulator 时 Eclipse 挂起

> ID：12423904
> 
> 赞同：2
> 
> 时间：2012-09-14T11:47:16.393
> 
> 标签：android, eclipse, adb, android-4.2-jelly-bean, nexus-s

我正在使用最新更新的 Ubuntu 12.04、Eclipse 3.7.2 和 Android SDK。我开发 Android 应用程序，当我想在手机上使用 adb 或使用 Android 模拟器启动应用程序时，Eclipse 冻结，我无法用 eclipse 做任何事情。我希望你能帮助我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:53:27.950

尝试重新启动 adb 服务器

使用 kill-server 和 start-server 命令。

# asp.net - 具有来自数据库 asp.net C# 的值的数据绑定 DayPilot 日历

> ID：12423906
> 
> 赞同：0
> 
> 时间：2012-09-14T11:47:18.463
> 
> 标签：asp.net, visual-studio-2010, data-binding, calendar, daypilot

我从以下位置使用 DayPilot Lite 3.1：

[http://www.daypilot.org](http://www.daypilot.org)

现在我喜欢用我的 sql 数据库中的值填充日历，但我不知道怎么做？

你能帮我吗，我需要在受保护的 DataTable getData() 中写什么？

这是后面的代码：

```
namespace Rezervacii{

public partial class Events : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            DayPilotCalendar1.StartDate = firstDayOfWeek(DateTime.Now, DayOfWeek.Sunday);
            DayPilotCalendar1.DataSource = getData();
            DataBind();
        }

    }
    protected DataTable getData()
    {

        SqlConnection con = new SqlConnection();
        con.ConnectionString = @"Data Source=.\SQLEXPRESS;Initial Catalog=Korisnik;Integrated Security=True";
        SqlDataAdapter da = new SqlDataAdapter("SELECT [id], [name], [startevent], [endevent] FROM [Event] WHERE id=@id , name=@name, startevent=@startevent, endevent=@endevent", con);

        DataTable dt;
        dt = new DataTable();
        da.Fill(dt);

       return dt;

    }

    private static DateTime firstDayOfWeek(DateTime day, DayOfWeek weekStarts)
    {
        DateTime d = day;
        while (d.DayOfWeek != weekStarts)
        {
            d = d.AddDays(-1);
        }

        return d;
    }
    protected void DayPilotCalendar1_BeforeEventRender(object sender, DayPilot.Web.Ui.Events.Calendar.BeforeEventRenderEventArgs e)
    {
        string color = e.DataItem["color"] as string;
        if (!String.IsNullOrEmpty(color))
        {
            e.DurationBarColor = color;
        }
    }

} 
```

这是我编辑之前的代码：

```
protected DataTable getData()
{
    DataTable dt;
    dt = new DataTable();
    dt.Columns.Add("start", typeof(DateTime));
    dt.Columns.Add("end", typeof(DateTime));
    dt.Columns.Add("name", typeof(string));
    dt.Columns.Add("id", typeof(string));
    dt.Columns.Add("color", typeof (string));

    DataRow dr;

    dr = dt.NewRow();
    dr["id"] = 0;
    dr["start"] = Convert.ToDateTime("15:50");
    dr["end"] = Convert.ToDateTime("15:55");
    dr["name"] = "Event 1";
    dt.Rows.Add(dr);
    return dt; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:42:12.423

你可以使用这样的东西：

```
protected DataTable getData()
{

    SqlConnection con = new SqlConnection();
    con.ConnectionString = @"Data Source=.\SQLEXPRESS;Initial Catalog=Korisnik;Integrated Security=True";
    SqlDataAdapter da = new SqlDataAdapter("SELECT [id], [name], [startevent], [endevent] FROM [Event] WHERE NOT (([endevent] <= @start) OR ([startevent] >= @end))", con);
    da.SelectCommand.Parameters.AddWithValue("start", DayPilotCalendar1.StartDate);
    da.SelectCommand.Parameters.AddWithValue("end", DayPilotCalendar1.EndDate.AddDays(1));

    DataTable dt;
    dt = new DataTable();
    da.Fill(dt);

   return dt;

} 
```

# c - 将错误代码映射到错误描述

> ID：12423907
> 
> 赞同：2
> 
> 时间：2012-09-14T11:47:20.593
> 
> 标签：c, error-handling, enums

我更愿意在[这个问题的答案中](https://stackoverflow.com/questions/6286874/c-naming-suggestion-for-error-code-enums) 添加评论，但没有足够的分数。考虑以下代码：

```
enum _config_error
{
    E_SUCCESS = 0,
    E_INVALID_INPUT = -1,
    E_FILE_NOT_FOUND = -2, /* consider some way of returning the OS error too */
    ...
};

/* type to provide in your API */
typedef _config_error error_t;

/* use this to provide a perror style method to help consumers out */
struct _errordesc {
    int  code;
    char *message;
} errordesc[] = {
    { E_SUCCESS, "No error" },
    { E_INVALID_INPUT, "Invalid input" },
    { E_FILE_NOT_FOUND, "File not found" },
    ...
}; 
```

如何从中查找错误描述`errordesc`？我可以看到我提出的版本有两个问题：

```
/* add E_COUNT = 3 to enum _config_error */
const char *errorstring(error_t errnum)
{
    unsigned int i;

    for (i = 0; i < E_COUNT; ++i) {
        if (errordesc[i].code == errnum) {
            return errordesc[i].message;
        }

    }

    return "Can't reach this point";
} 
```

1.  确实知道枚举大小并且必须手动设置`E_COUNT`为 3。
2.  在 for 循环之后无法返回，该怎么办？
3.  有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:56:34.770

1.  您可以`E_COUNT`从计算`sizeof(errordesc) / sizeof(struct _errordesc)`。
2.  如果您到达循环的末尾，只需返回`"Unknown error"`或类似的东西。
3.  由于您的错误代码似乎是连续的（但为负），您可以使用`-errnum`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:56:47.450

更好的选择是确保所有错误代码都具有从 0 向上（或向下）的连续值。然后，您可以将它们用作`errordesc[]`. 当然，如果它们是负数，你会做类似的事情`errordesc[-errnum]`。

至于 中的条目数`errordesc[]`，是`sizeof(errordesc)/sizeof(errordesc[0])`。您可以将其存储在全局变量中。

还有`bsearch()`在C...

# google-cloud-messaging - GCM dot 适用于 GPRS，但适用于 WIFI？

> ID：12423911
> 
> 赞同：1
> 
> 时间：2012-09-14T11:47:36.563
> 
> 标签：google-cloud-messaging

我已经搜索了解决方案，但我没有得到任何解决上述问题的方法。如果有人知道为什么 gcm 会发生这种情况，请告诉我。我已经按照google doc实现了gcm，当我使用wifi运行时它工作正常，但是当我尝试使用gprs运行时它失败（设备不会在服务器上注册并且在应用程序端发生强制关闭错误）。

请帮忙。我被这个困住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:23:00.210

请参阅链接[http://www.youtube.com/watch?v=YoaP6hcDctM](http://www.youtube.com/watch?v=YoaP6hcDctM) 那里回答了它仅适用于 wifi 的问题之一

# delphi - 有没有一种简单的方法来检测 *any*（和所有）用户活动？

> ID：12423914
> 
> 赞同：3
> 
> 时间：2012-09-14T11:47:41.430
> 
> 标签：delphi

如果用户以任何方式与我的应用程序交互，我想重新启动强制注销计时器。

任何菜单项，单击的任何按钮（不确定是否仅单击表单）。

有没有一种简单的方法可以检测到用户仍然“活跃”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:17:53.017

该组件正是您正在寻找的。它被称为 ETimer，可以在[这里找到](http://www.delphigroups.info/2/80/471635.html)

基本上只需将计时器放在表单上并将其间隔设置为 1000 毫秒，然后在计时器事件中检查计时器的贪睡属性，如果贪睡属性大于 60000（1 分钟），那么您知道应用程序已经1 分钟内没有用户交互。

它很容易使用，但如果你遇到困难请告诉我。

# c# - 将水平线和垂直线分组到表格中（C#）

> ID：12423915
> 
> 赞同：1
> 
> 时间：2012-09-14T11:47:41.777
> 
> 标签：c#, algorithm

一个简单的线类被定义为两个包含开始和结束坐标的 PointF 成员：

```
public class Line    {
    PointF s, e;
} 
```

我有两个列表，其中包含出现在绘图画布上并形成一个或多个表格的所有水平和垂直线。

```
List<Line> AllHorizontalLines;
List<Line> AllVerticalLines; 
```

我需要对这些行进行分组，以便将属于一个表的行捕获在一个组中，因此分组函数将具有如下签名：

```
List<List<Line>> GroupLines(List<Line> hor, List<Line> ver)
{ 

} 
```

为简单起见，我们假设页面上只有“简单”表，即没有嵌套表。但是可以合并单元格，因此我们必须忽略小于父表全高的小的水平和垂直线。为进一步简单起见，假设两个输入列表都已排序（Y 轴上的水平线和 X 轴上的垂直线）。

有没有已知的算法来解决这个问题？或者谁能​​帮我设计一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:31:39.433

以下似乎有效：

*   设置一个字典，将边界矩形映射到每个矩形中的线列表。
*   对于两个输入列表中的每一行（我们不关心方向）
    *   在线外创建一个边界矩形
    *   检查线是否穿过任何现有的边界矩形。
        *   如果是这样，合并这些矩形中的线，添加当前线，删除触摸的矩形，计算一个新的边界矩形，然后再次检查。
        *   否则，将此新矩形添加到字典中并删除旧矩形。
*   返回每个矩形的线列表。

这是我得到的代码：

```
public static IEnumerable<IEnumerable<Line>> GroupLines(IEnumerable<Line> lines)
{
    var grouped = new Dictionary<Rectangle, IEnumerable<Line>>();

    foreach (var line in lines)
    {
        var boundedLines = new List<Line>(new[] { line });
        IEnumerable<Rectangle> crossedRectangles;
        var boundingRectangle = CalculateRectangle(boundedLines);
        while (
            (crossedRectangles = grouped.Keys
                .Where(r => Crosses(boundingRectangle, r))
                .ToList()
            ).Any())
        {
            foreach (var crossedRectangle in crossedRectangles)
            {
                boundedLines.AddRange(grouped[crossedRectangle]);
                grouped.Remove(crossedRectangle);
            }
            boundingRectangle = CalculateRectangle(boundedLines);
        }
        grouped.Add(boundingRectangle, boundedLines);
    }
    return grouped.Values;
}

public static bool Crosses(Rectangle r1, Rectangle r2)
{
    return !(r2.Left > r1.Right ||
        r2.Right < r1.Left ||
        r2.Top > r1.Bottom ||
        r2.Bottom < r1.Top);
}

public static Rectangle CalculateRectangle(IEnumerable<Line> lines)
{
    Rectangle rtn = new Rectangle
    {
        Left = int.MaxValue,
        Right = int.MinValue,
        Top = int.MaxValue,
        Bottom = int.MinValue
    };

    foreach (var line in lines)
    {
        if (line.P1.X < rtn.Left) rtn.Left = line.P1.X;
        if (line.P2.X < rtn.Left) rtn.Left = line.P2.X;
        if (line.P1.X > rtn.Right) rtn.Right = line.P1.X;
        if (line.P2.X > rtn.Right) rtn.Right = line.P2.X;
        if (line.P1.Y < rtn.Top) rtn.Top = line.P1.Y;
        if (line.P2.Y < rtn.Top) rtn.Top = line.P2.Y;
        if (line.P1.Y > rtn.Bottom) rtn.Bottom = line.P1.Y;
        if (line.P2.Y > rtn.Bottom) rtn.Bottom = line.P2.Y;
    }

    return rtn;
} 
```

![我拼凑的 WinForms 应用程序](../Images/b51026b2e1507c914bf50e04e7acbfce.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T12:51:12.373

**这是我建议的方法：**

*   清理这两个列表，这样就没有任何完全包含的“小”行。
*   选择任何一条线。
*   取所有接触（相交）这条线的线。
*   对于这些线中的每一条，取所有接触它们的线。
*   继续，直到你找不到更多的接触线。
*   你现在有一个组。
*   从剩下的行中选择一条并重复，直到没有更多的行。

**代码：**

```
public static IEnumerable<IEnumerable<Line>> Group(IEnumerable<Line> horizontalLines, IEnumerable<Line> verticalLines)
{
  // Clean the input lists here. I'll leave the implementation up to you.

  var ungroupedLines = new HashSet<Line>(horizontalLines.Concat(verticalLines));
  var groupedLines = new List<List<Line>>();

  while (ungroupedLines.Count > 0)
  {
    var group = new List<Line>();
    var unprocessedLines = new HashSet<Line>();
    unprocessedLines.Add(ungroupedLines.TakeFirst());

    while (unprocessedLines.Count > 0)
    {
      var line = unprocessedLines.TakeFirst();
      group.Add(line);
      unprocessedLines.AddRange(ungroupedLines.TakeIntersectingLines(line));
    }

    groupedLines.Add(group);
  }

  return groupedLines;
}

public static class GroupingExtensions
{
  public static T TakeFirst<T>(this HashSet<T> set)
  {
    var item = set.First();
    set.Remove(item);
    return item;
  }

  public static IEnumerable<Line> TakeIntersectingLines(this HashSet<Line> lines, Line line)
  {
    var intersectedLines = lines.Where(l => l.Intersects(line)).ToList();
    lines.RemoveRange(intersectedLines);
    return intersectedLines;
  }

  public static void RemoveRange<T>(this HashSet<T> set, IEnumerable<T> itemsToRemove)
  {
    foreach(var item in itemsToRemove)
    {
      set.Remove(item);
    }
  }

  public static void AddRange<T>(this HashSet<T> set, IEnumerable<T> itemsToAdd)
  {
    foreach(var item in itemsToAdd)
    {
      set.Add(item);
    }
  }
} 
```

将此方法添加到 Line

```
public bool Intersects(Line other)
{
  // Whether this line intersects the other line or not.
  // I'll leave the implementation up to you.
} 
```

**笔记：**

如果此代码运行速度太慢，您可能需要水平扫描，边走边拾取连接线。[可能也](http://en.wikipedia.org/wiki/Bentley%E2%80%93Ottmann_algorithm)值得一看。

**专门：**

```
public static IEnumerable<IEnumerable<Line>> Group(IEnumerable<Line> horizontalLines, IEnumerable<Line> verticalLines)
{
  // Clean the input lists here. I'll leave the implementation up to you.

  var ungroupedHorizontalLines = new HashSet<Line>(horizontalLines);
  var ungroupedVerticalLines = new HashSet<Line>(verticalLines);
  var groupedLines = new List<List<Line>>();

  while (ungroupedHorizontalLines.Count + ungroupedVerticalLines.Count > 0)
  {
    var group = new List<Line>();
    var unprocessedHorizontalLines = new HashSet<Line>();
    var unprocessedVerticalLines = new HashSet<Line>();

    if (ungroupedHorizontalLines.Count > 0)
    {
      unprocessedHorizontalLines.Add(ungroupedHorizontalLines.TakeFirst());
    }
    else
    {
      unprocessedVerticalLines.Add(ungroupedVerticalLines.TakeFirst());
    }

    while (unprocessedHorizontalLines.Count + unprocessedVerticalLines.Count > 0)
    {
      while (unprocessedHorizontalLines.Count > 0)
      {
        var line = unprocessedHorizontalLines.TakeFirst();
        group.Add(line);
                unprocessedVerticalLines.AddRange(ungroupedVerticalLines.TakeIntersectingLines(line));
      }
      while (unprocessedVerticalLines.Count > 0)
      {
        var line = unprocessedVerticalLines.TakeFirst();
        group.Add(line);
        unprocessedHorizontalLines.AddRange(ungroupedHorizontalLines.TakeIntersectingLines(line));
      }
    }
    groupedLines.Add(group);
  }

  return groupedLines;
} 
```

这假设没有线重叠，因为它不检查水平线是否接触其他水平线（垂直相同）。

您可能可以删除 if-else。如果有垂直线未连接到水平线，那只是在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T08:09:51.080

好的。我终于自己设计了一个有效的算法。以下是任何未来读者的步骤。

1.  定义一个大集合`Tuple<List<Line>, List<Line>>`。此集合中的每个元组将代表一个表（该表的所有水平和垂直线）。

2.  查找所有垂直线在一端与水平线的起点相接触，而在另一端与另一水平线的起点相接触。这些将是每个表的最左边的行。

3.  现在对于每个左行（称为 LV）：找到所有与 LV 具有相同起始和结束 Y 并因此属于同一个表的垂直线。将这些“姐妹”行添加到名为 MyVSisters 的列表中。

    湾。找到最右边的垂直姊妹线的 X 坐标（称为 RVX）。

    C。现在找到从 LV 的 X 延伸到 RVX 的所有水平线，并且它们的 Y 位于 LV 的 Y1 和 Y2 之间。将这些行添加到名为 MyHSisters 的集合中。

    d。将元组 MyHSisters 和 MyVSisters 添加到大集合中。

4.  回归盛大收藏。

我还没有将其标记为答案。在决定哪一个是最佳答案之前，我将等待这两个家伙的响应并比较所有 3 个的性能和准确性。

# python - pyparsing OneOrMore 嵌入到其他 OneOrMore 中

> ID：12423923
> 
> 赞同：4
> 
> 时间：2012-09-14T11:48:07.190
> 
> 标签：python, parsing, python-2.7, pyparsing

我第一次尝试使用**pyparsing**。我的解析器没有做我希望它做的事情，有人可以检查一下，看看有什么问题。**我正在尝试将 OneOrMore 嵌入 OneOrMore 中，我认为它应该可以正常工作，但事实并非如此。**

下面是整个代码：

```
import pyparsing

status = """
    sale number       : 11/7 
    NAME               ID    PAWN    PRICE    TIME         %C     STATE     START/STOP
    cross-cu-1       1055       1    106284K  07:49:36.19  25.05%   run          1d01h
    cross-cu-2        918       1    104708K  07:38:19.08  24.02%   run          1d01h
    sale number       : 11/8 
    NAME               ID    PAWN    PRICE    TIME         %C     STATE     START/STOP
    cross-cu-3       1055       1    106284K  07:49:36.19  25.05%   run          1d01h
    cross-cu-4        918       1    104708K  07:38:19.08  24.02%   run          1d01h
    """

integer = pyparsing.Word(pyparsing.nums).setParseAction(lambda toks: int(toks[0]))
decimal = pyparsing.Word(pyparsing.nums + ".").setParseAction(lambda toks: float(toks[0]))
wordSuppress = pyparsing.Suppress(pyparsing.Word(pyparsing.alphas))
endOfLine = pyparsing.LineEnd().suppress()
colon = pyparsing.Suppress(":")

saleNumber = pyparsing.Regex("\d{2}\/\d{1}").setResultsName("saleNumber")
lineSuppress = pyparsing.Regex("NAME.*STOP") + endOfLine
saleRow = wordSuppress + wordSuppress + colon + saleNumber + endOfLine

name = pyparsing.Regex("cross-cu-\d").setResultsName("name")
id = integer.setResultsName("id")
pawn = integer.setResultsName("pawn")
price = integer.setResultsName("price") + "K"
time = pyparsing.Regex("\d{2}:\d{2}:\d{2}.\d{2}").setResultsName("time")
c = decimal.setResultsName("c") + "%"
state = pyparsing.Word(pyparsing.alphas).setResultsName("state")
startStop = pyparsing.Word(pyparsing.alphanums).setResultsName("startStop")
row = name + id + pawn + price + time + c + state + startStop + endOfLine

table = pyparsing.OneOrMore(pyparsing.Group(saleRow + lineSuppress.suppress() + (pyparsing.OneOrMore(pyparsing.Group(row) | pyparsing.SkipTo(row).suppress())) ) | pyparsing.SkipTo(saleRow).suppress())

resultDic = [x.asDict() for x in table.parseString(status)]
print resultDic 
```

**它只返回** `[{'saleNumber': '11/7'}]` **我希望得到这样的 dic 列表：**

```
[{ {'saleNumber': '11/7'},{ elements in cross-cu-1 line, elements in cross-cu-2 line } },
 { {'saleNumber': '11/8'},{ elements in cross-cu-3 line, elements in cross-cu-4 line } }] 
```

任何帮助表示赞赏！ ***请不要建议其他实现此输出的方法！我也在努力学习 pyparsing！***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:56:30.353

在这种情况下，pyparsing 可能是矫枉过正。为什么不简单地逐行读取文件然后解析结果呢？

代码如下所示：

编辑：我已经更新了代码以更紧密地遵循您的示例。

从集合导入 defaultdict

```
status = """
sale number       : 11/7
NAME               ID    PAWN    PRICE    TIME         %C     STATE     START/STOP
cross-cu-1       1055       1    106284K  07:49:36.19  25.05%   run          1d01h
cross-cu-2        918       1    104708K  07:38:19.08  24.02%   run          1d01h
sale number       : 11/8
NAME               ID    PAWN    PRICE    TIME         %C     STATE     START/STOP
cross-cu-3       1055       1    106284K  07:49:36.19  25.05%   run          1d01h
cross-cu-4        918       1    104708K  07:38:19.08  24.02%   run          1d01h
"""

sale_number = ''

sales = defaultdict(list)

for line in status.split('\n'):
    line = line.strip()
    if line.startswith("NAME"):
         continue
    elif line.startswith("sale number"):
         sale_number = line.split(':')[1].strip()
    elif not line or line.isspace() :
         continue
    else:
         # you can also use a regular expression here
         sales[sale_number].append(line.split())

for sale in sales:
    print sale, sales[sale] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T12:26:18.207

这行得通吗？

```
import pyparsing

status = """
sale number       : 11/7
NAME               ID    PAWN    PRICE    TIME         %C     STATE     START/STOP
cross-cu-1       1055       1    106284K  07:49:36.19  25.05%   run          1d01h
cross-cu-2        918       1    104708K  07:38:19.08  24.02%   run          1d01h
sale number       : 11/8
NAME               ID    PAWN    PRICE    TIME         %C     STATE     START/STOP
cross-cu-3       1055       1    106284K  07:49:36.19  25.05%   run          1d01h
cross-cu-4        918       1    104708K  07:38:19.08  24.02%   run          1d01h
"""

integer = pyparsing.Word(pyparsing.nums).setParseAction(lambda toks: int(toks[0]))
decimal = pyparsing.Word(pyparsing.nums + ".").setParseAction(lambda toks:     float(toks[0]))
wordSuppress = pyparsing.Suppress(pyparsing.Word(pyparsing.alphas))
endOfLine = pyparsing.LineEnd().suppress()
colon = pyparsing.Suppress(":")

saleNumber = pyparsing.Regex("\d{2}\/\d{1}").setResultsName("saleNumber")
lineSuppress = pyparsing.Regex("NAME.*STOP") + endOfLine
saleRow = wordSuppress + wordSuppress + colon + saleNumber + endOfLine

name = pyparsing.Regex("cross-cu-\d").setResultsName("name")
id = integer.setResultsName("id")
pawn = integer.setResultsName("pawn")
price = integer.setResultsName("price") + "K"
time = pyparsing.Regex("\d{2}:\d{2}:\d{2}.\d{2}").setResultsName("time")
c = decimal.setResultsName("c") + "%"
state = pyparsing.Word(pyparsing.alphas).setResultsName("state")
startStop = pyparsing.Word(pyparsing.alphanums).setResultsName("startStop")
row = pyparsing.Group(name + id + pawn + price + time + c + state + startStop +    endOfLine)
row.setResultsName("row")
rows = pyparsing.OneOrMore(row).setResultsName("rows")

table = pyparsing.OneOrMore(pyparsing.Group(saleRow + lineSuppress + rows))

resultDic = [x.asDict() for x in table.parseString(status)]
print resultDic 
```

# ios - UITableViewCell 子类不允许我设置标签文本

> ID：12423924
> 
> 赞同：3
> 
> 时间：2012-09-14T11:48:08.200
> 
> 标签：ios, uitableview, uilabel, subclass

我创建了一个子类`UITableViewCell`来获得更大的 TableViewCell 并提供更多选项。

但我的问题是我无法设置标签的文本：

```
BlogItem *bi = [[channel items] objectAtIndex:[indexPath row]];

NSLog(@"%@", [bi title]);
[[cell mainLabel] setText:[bi title]];
NSLog(@"%@", [[cell mainLabel] text]); 
```

第一条日志消息返回我期望的文本，但第二条总是记录（空）。

我真的不知道应该有什么问题。我像往常一样创建了标签：

```
@property (weak, nonatomic) IBOutlet UILabel *mainLabel; 
```

当然，我连接了标签并合成了它们（检查了两次）。我也实现了这个方法

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

为每个单元格获取适当的高度（效果很好）。

顺便说一句，复选标记按预期显示。这只是关于标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:21:25.710

确保您在方法中实例化您的自定义`UITableViewCell`子类`cellForRowAtIndexPath`。还要确保这些`IBOutlets`是在您的`UITableView`子类中声明的，而不是在包含`TableView`. 还要确保界面生成器中单元格的父类设置为相同的子类。

像这样的东西（自定义`UITableViewCell`子类接口文件）：

```
#import <UIKit/UIKit.h>

@interface MyCustomCell : UITableViewCell
    @property (nonatomic, weak) IBOutlet UILabel *mainLabel;
@end 
```

然后`@synthesize`在实现文件中：

```
@synthesize mainLabel; 
```

然后在 中`cellForRowAtIndexPath`，类似：

```
static NSString *CellIdentifier = @"MyCellIdentifier";
MyCustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

BlogItem *bi = [[channel items] objectAtIndex:[indexPath row]];

// Configure the cell...
cell.mainLabel.text = [bi title];
// ... Other stuff
return cell; 
```

# java - 使用 PreparedStatement 在 Java INSERT INTO 命令中保留列名变量？

> ID：12423928
> 
> 赞同：0
> 
> 时间：2012-09-14T11:48:19.887
> 
> 标签：java, mysql, insert, prepared-statement

我有以下问题：我在一个数据库中有两个表，除了最后一列的名称之外，它们还包含相同的列。我想使用 Java 将数据写入它们。我想对两个表使用相同的preparedStatement，在其中我使用if 命令检查它是`table`1 还是2。2`table`作为最后一列的名称，1作为它的名称。这存储在我的代码中的一个变量中。`table``amount10``table``amount20``number`

下面您可以看到一个（简化的）示例以及我如何尝试让列名变量但它不起作用。有没有办法在不复制整个语句并手动更改`number`变量的情况下解决这个问题？

```
String insertData = "INSERT INTO `database`.`"+table+"`
(`person_id`,`Date`,`amount`+"number") VALUES "+
"(?,?,?) ON DUPLICATE KEY UPDATE " +
"`person_id` = ? , " +
"`Date` = ? , " +
"`amount`+"number" = ? ; ";
PreparedStatement insertDataStmt; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:54:14.497

这将不起作用，因为变量 number 和 table 在您更改它们时不会神奇地注入到您的 insertData 字符串中。我想要一个方法 prepareInsertstatement(String table, String number) 来返回正确的 PreparedStatement：

```
public void prepareInsertStatement(Connection conn, Strint table, String number) {
    String insertData = "INSERT INTO `database`.`"+table+"`
    (`person_id`,`Date`,`amount+"number"') VALUES "+
    "(?,?,?) ON DUPLICATE KEY UPDATE " +
    "`person_id` = ? , " +
    "`Date` = ? , " +
    "`amount+"number"' = ? ; ";
    PreparedStatement insertDataStmt = conn.prepareStatement(insertData);

    return insertDataStmt;
} 
```

只要记住在不再需要时关闭 PreparesStatement。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:55:24.813

我想那是无效的语法。当您连接最后一列名称的字符串时，您使用 code `'amount' + number`。如果您的数字值为 20，则 concat 结果将 `'amount'20`导致无效语法异常。只需`'`在数字后移动一位。

`"'amount" + number + "'"`

注意：在此语句执行期间出现的日志或仅出现错误对于为您的问题找到正确答案非常有用。

# hibernate - 如何以编程方式检索持久性单元使用的数据源

> ID：12423930
> 
> 赞同：24
> 
> 时间：2012-09-14T11:48:26.250
> 
> 标签：hibernate, jakarta-ee, jpa, jpa-2.0, jboss7.x

...没有实际阅读和解析`persistence.xml`

`EntityManager`我可以使用[它的工厂的属性](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManagerFactory.html#getProperties%28%29)来检索持久性单元的名称。[我可以使用jboss-as-controller-client](http://www.paykin.info/java/add-datasource-programaticaly-cli-jboss-7/)检索可用的数据源。但是我发现没有任何 API 可以为我提供特定的数据源`EntityManager`。

一个`String`有名字的就足够了。

谢谢

我正在 JBoss 7.1.1.Final 上通过 JPA 2 使用 Hibernate 4.0.1.Final。

编辑：如果可能的话，我想避免从 JPA 转向 Hibernate API。

编辑：奥古斯托的解决方案有效，我有一些关于细节的注释： EM 的铸造没有工作，因为`ClassCastException`:( `org.jboss.as.jpa.container.TransactionScopedEntityManager cannot be cast to org.hibernate.ejb.EntityManagerImpl`)，但它适用于检索的工厂。所以我省略了第 1 步。

我也找不到从实例中检索数据源名称的方法。所以我不得不满足于目录名称：`connectionProvider.getConnection().getCatalog();`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-14T12:05:02.520

你需要：

1.  转换`EntityManager`为`EntityManagerImpl`（Hibernate 实现）
2.  称呼`getFactory()`
3.  投到`EntityManagerFactory`_`HibernateEntityManagerFactory`
4.  调用`getSessionFactory()`并将其转换为`SessionFactoryImpl`
5.  调用`getConnectionProvider()`并将其转换为正确的实现。您可以在[此处](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/connection/ConnectionProvider.html)查看实现。我会假设这是一个`DatasourceConnectionProvider`
6.  打电话`getDataSource()`，你就完成了。

不幸的是，您必须使用 Hibernate API，因为无法使用 JPA API 检索 DataSource。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-11-04T22:51:10.017

在 Spring 环境中，您可以使用它：

```
import org.springframework.orm.jpa.EntityManagerFactoryInfo;
...

@PersistenceContext
EntityManager entityManager;

public DataSource getDataSourceFromHibernateEntityManager() {
   EntityManagerFactoryInfo info = (EntityManagerFactoryInfo) entityManager.getEntityManagerFactory();
   return info.getDataSource();
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-28T13:41:18.183

如果您只想要数据源的名称并且该数据源名称是根据 JPA 提供的，您应该能够通过以下方式获取该信息：

```
entityManager.getEntityManagerFactory().getProperties().get( "javax.persistence.jtaDataSource" ); 
```

或者

```
entityManager.getEntityManagerFactory().getProperties().get( "javax.persistence.nonJtaDataSource" ); 
```

取决于您如何定义数据源。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-11-14T18:14:56.520

我正在使用hibernate 5.2.10.Final，以下对我有用：

```
 import org.hibernate.SessionFactory;
    import org.hibernate.engine.jdbc.connections.spi.ConnectionProvider;
    import javax.persistence.EntityManagerFactory;
    import javax.sql.DataSource;
    //...
    public static DataSource getDataSource(EntityManagerFactory entityManagerFactory) {
    ConnectionProvider cp = ((SessionFactory) entityManagerFactory).getSessionFactoryOptions()
            .getServiceRegistry()
            .getService(ConnectionProvider.class);
    return cp.unwrap(DataSource.class);
    } 
```

您需要的只是将 entityManager.getEntityManagerFactory() 传递给此方法（就我而言，我有多个工厂。然后我可以在需要时使用此方法获取其中任何一个的数据源）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-10-17T16:30:58.383

我需要这样做才能运行 Flyway 迁移。我无法使用 Augusto 的方法检索 DataSource，但我能够通过从 SessionFactory 属性中检索 url、用户名和密码来重新创建数据源：

```
SessionFactory sessionFactory = ((HibernateEntityManagerFactory) entityManagerFactory).getSessionFactory();
Properties properties = ((SessionFactoryImpl) sessionFactory).getProperties();
String url = (String) properties.get("hibernate.connection.url");
String username = (String) properties.get("hibernate.connection.username");
String password = (String) properties.get("hibernate.connection.password"); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-08-26T07:04:02.890

尝试这个 ：

```
Session s = (Session) getEntityManager().getDelegate();
org.hibernate.SessionFactory sessionFactory=s.getSessionFactory();
ConnectionProvider cp=((SessionFactoryImpl)sessionFactory).getConnectionProvider();Connection connection=cp.getConnection();
DatabaseMetaData dbmetadata= connection.getMetaData();
String dtsource=dbmetadata.getUserName(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-01-07T09:10:24.947

我正在使用休眠 5.0.x

这就是我从持久性池中获得连接的方式：

```
import org.hibernate.engine.jdbc.connections.spi.ConnectionProvider;
import org.hibernate.jpa.internal.EntityManagerFactoryImpl;

public Connection getConnection(EntityManagerFactory emf) throws SQLException
{
    final EntityManagerFactoryImpl hibernateEmf = (EntityManagerFactoryImpl) emf;
    return hibernateEmf.getSessionFactory().getServiceRegistry().getService(ConnectionProvider.class).getConnection();
} 
```

该`emf`参数是 JPA 的标准`javax.persistence.EntityManagerFactory`，通常使用以下方式全局获取：

```
emf = Persistence.createEntityManagerFactory("persistence-unit-name"); 
```

或通过注射：

```
@PersistenceUnit(unitName="persistence-unit-name")
EntityManagerFactory emf; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-01-14T22:09:09.800

```
DataSource dataSource = (DataSource) 
em.getEntityManagerFactory().getProperties()
            .get(org.hibernate.cfg.AvailableSettings.JPA_JTA_DATASOURCE); 
```

您可以使用休眠检索数据源。使用休眠 5.3 测试

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-09-28T12:02:44.133

在 SpringBoot 环境中，您可以使用以下内容：

```
@PersistenceContext
EntityManager entityManager;

private HikariDataSource getDataSourceFromHibernateEntityManager() {
    EntityManagerFactoryInfo info = (EntityManagerFactoryInfo) entityManager.getEntityManagerFactory();
    return (HikariDataSource) info.getDataSource();
}

public String getDataSourceProperties() {
    HikariDataSource dataSource = getDataSourceFromHibernateEntityManager();
    return "DataSource properties:" +
            "URL: " + dataSource.getJdbcUrl() + "\n" +
            "Default Schema: " + dataSource.getPoolName() + "\n" +
            "Driver Class Name: " + dataSource.getDriverClassName() + "\n" +
            "Username: " + dataSource.getUsername() + "\n";
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-11-21T19:33:26.850

这对我有帮助。我使用 HikariCP，但我认为这并不重要。

基本上需要做的是

1.  查找服务注册表
2.  `org.hibernate.engine.jdbc.connections.spi.ConnectionProvider`按类获得服务
3.  将其解包到`javax.sql.DataSource`.

可以从 EntityManager 检索服务注册表

```
((SessionImpl) em).getFactory().getServiceRegistry() 
```

或直接从 EntityManagerFactory

```
((SessionFactoryImpl) entityManagerFactory).getServiceRegistry() 
```

# asp.net - ASP.NET RAZOR 无法捕获事件

> ID：12423932
> 
> 赞同：0
> 
> 时间：2012-09-14T11:48:41.997
> 
> 标签：asp.net, razor

我想在用户单击其中一个单选按钮后从选定的单选按钮中获取值并将其显示在底部，但它不起作用。

我不想使用**JAVASCRIPT**和**MVC**。

请帮忙~~~

```
@{
    Layout = "~/_SiteLayout.cshtml";
    Page.Title = "Contact";
    var selectedValue = "Male selected";
}

@{
    if (IsPost)
    {
        selectedValue = Request["Gender"].ToString();
    }   
 }
<div>

    <table>
        <tr>
            <td>
                @Html.RadioButton("Gender", "Male", true) Male
            </td>

            <td>
                @Html.RadioButton("Gender", "Female", false) Female
            </td>
        </tr>
    </table>
    <b>@selectedValue</b>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:38:42.367

如果您不想使用 JavaScript，则需要往返服务器。Razor 不在客户端上执行。事实上，客户甚至从来没有看到剃须刀代码。

# database - Grails 数据库表版本控制

> ID：12423935
> 
> 赞同：0
> 
> 时间：2012-09-14T11:48:59.247
> 
> 标签：database, grails, version-control

我刚刚开始了一个新的数据库项目来为客户投标报价定价：

数据库中的一些表将包含定期更新的信息，例如定价表。

现在新的投标应始终使用数据库中的最新信息，但现有投标应继续使用开始时使用的数据，除非投标作者另有决定。

事情在某种程度上被简化了，因为投标在任何情况下都不会使用跨版本的价格，因此即使产品被搁置并且在旧版本的定价表中可用，它也不会用于新项目。

为了实现这一点，我计划包括一个版本列，也许还有一个链接的版本控制表。我认为这就足够了。

但是我觉得这必须是一个常见的数据库设计要求，因此必须有现有的“最佳实践”和技术来实现这一点，所以我宁愿建立在现有经验的基础上，也不愿重新发明轮子。

有关如何解决此问题的任何建议？此外，我正在使用 Grails 平台，因此非常感谢任何 Grails 特定信息。

我不确定我是否正确解释了我的问题，所以这里有一个例子：

```
class Bid { // Each new customer bid is stored in this table
    String bidName
    static hasMany = [ item: ItemList ]
    static belongsTo = [ versionNumber: VersionControl]
}

class ItemList { // Products/Services are associated with a bid via this table

    String description
    static belongsTo = [ bid: Bid, item: Price ]
}

class Price { // The price of individual products and services the company offers
    String description
    Long value

    static belongsTo = [ versionNumber: VersionControl]
}

class VersionControl { 
/** So that when filling in the ItemList form for a bid, I can query for only 
*   prices with the correct version number 
*/

    String user
    Long versionNumber
    Date timestamp

    static hasMany = [ bid: Bid, productOrService: Price ]
} 
```

这个例子工作得很好，并说明了我想要做什么。我只是不知道这是否是解决问题的最佳方法以及它的扩展性如何——我有大约 20 个包含不同参数的表，我需要跟踪哪些版本的版本。

将始终为投标分配最新版本的定价列表，但用户必须能够选择不同的版本。

我可能应该提到，价格将使用会计部门提供的 csv 文件批量更新，而不是单独更新。每个 csv 代表一个新的谨慎价目表版本，不仅就数据库而言，而且从内部管理的角度来看。

类似的理念将影响数据库中的其他表，例如使用的汇率或公司运营的地理区域。

新版本发布的规律性也很难预测，这可能会使确定 endDate 成为一个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T12:03:01.077

这个目标没有特殊的 Grails 支持，这只是[第 4 范式](http://en.wikipedia.org/wiki/Fourth_normal_form)。在您的情况下，它将是价格实体的标题表和具有限制的时间价值子表：

```
class Price {

    static hasMany = [ values: PriceValue ]

}

class PriceValue {

    Number amount
    Date validFrom
    Date validTo

    static belongsTo = [ price: Price ]

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:55:47.167

我相信你不应该提取`Version`到一个单独的实体中，而你`Price`显然是一个具有严格给定时间间隔的[有效性（我假设）。](http://martinfowler.com/eaaDev/Effectivity.html)

所以我提出以下设计：

```
class Product {
  // whatever
}

class ProductPrice {
  String description
  BigDecimal value
  DateTime startDate // or use JodaTime Interval
  DateTime endDate

  static belongsTo = Product
}

class Bid { // Each new customer bid is stored in this table
  String bidName
  DateTime bidDate // or use createdDate

  static hasMany = [products: Product]
  static belongsTo = [ Customer ]

  BigDecimal getProductPrice(Product p) {
    ProductPrice.where{ 
      product = p && startDate >= bidDate && endDate < bidDate 
    }.find()
  }

  // or even

  static transients = [ 'prices' ]

  List<ProductPrice> getPrices() {
    products.colect{ getProductPrice(it) }
    // or even...
    ProductPrice.where{ 
      product = p && 
        startDate >= bidDate && 
        endDate < bidDate 
    }.list()
  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T14:14:08.430

我建议使用 oracle 数据库及其“工作区管理器”功能（我将它与 grails 一起使用，效果很好）[http://www.oracle.com/technetwork/database/enterprise-edition/index-087067.html](http://www.oracle.com/technetwork/database/enterprise-edition/index-087067.html)

这将解决您列出的所有要求：如果您“版本启用”一个表，该表使您能够从您正在分支的父级创建当前数据快照的工作区。所有这些工作空间都可以相互独立地进行更改，并在它们准备好时合并回主工作空间（并且 oracle 简化了它们之间的冲突解决）。但是，并非所有表都必须进行版本控制，例如您的定价表，以便定期管理它们。

还有很多其他有用的功能，但听起来它的基本功能很适合你。您唯一需要做的就是跟踪工作区及其状态，因为应用程序用户在您的 UI 上签出、合并和解决冲突。

# javascript - 使用jsp从服务器检索图像名称和路径

> ID：12423937
> 
> 赞同：0
> 
> 时间：2012-09-14T11:49:01.570
> 
> 标签：javascript, html, jsp

> **可能重复：**
> [使用 JSP 从服务器检索和显示图像](https://stackoverflow.com/questions/12419596/retrieving-and-displaying-image-from-server-using-jsp)

我有一段代码可以帮助我将图像保存在服务器上。

**JSP代码：**

```
<%String saveFile="";
String contentType = request.getContentType();
if ((contentType != null) && (contentType.indexOf("multipart/form-data") >= 0)) {
DataInputStream in = new DataInputStream(request.getInputStream());
int formDataLength = request.getContentLength();
byte dataBytes[] = new byte[formDataLength];
int byteRead = 0;
int totalBytesRead = 0;
while (totalBytesRead < formDataLength) {
byteRead = in.read(dataBytes, totalBytesRead,formDataLength);
totalBytesRead += byteRead;
}
String file = new String(dataBytes);
saveFile = file.substring(file.indexOf("filename=\"") + 10);
saveFile = saveFile.substring(0, saveFile.indexOf("\n"));
saveFile = saveFile.substring(saveFile.lastIndexOf("\\") + 1,saveFile.indexOf("\""));
int lastIndex = contentType.lastIndexOf("=");
String boundary = contentType.substring(lastIndex + 1,contentType.length());
int pos;
pos = file.indexOf("filename=\"");
pos = file.indexOf("\n", pos) + 1;
pos = file.indexOf("\n", pos) + 1;
pos = file.indexOf("\n", pos) + 1;
int boundaryLocation = file.indexOf(boundary, pos) - 4;
int startPos = ((file.substring(0, pos)).getBytes()).length;
int endPos = ((file.substring(0, boundaryLocation)).getBytes()).length;
saveFile="D:/../images/"+saveFile;
File f = new File(saveFile);
FileOutputStream fileOut = new FileOutputStream(f);
fileOut.write(dataBytes, startPos, (endPos - startPos));
fileOut.flush();
fileOut.close();
}%> 
```

**为了检索相同的内容，我有** **JSP 代码：**

```
<%
String name = "";
String path="";
File f = new File("D:/Java/Shabbir/ESignature Work/WebContent");
File[] files = f.listFiles();
for(int i=0;i<files.length;i++){
name=files[i].getName();
path=files[i].getPath();

}
%> 
```

代码的问题就是这样。我正在获取文件夹中的文件列表，我只想要我选择的文件的名称和路径。帮助真的很感激。

# php - 对整个 symfony2 应用程序全局可见的自定义结构

> ID：12423938
> 
> 赞同：0
> 
> 时间：2012-09-14T11:49:03.270
> 
> 标签：php, symfony

我需要创建自定义数组并使其全局可见，以便控制器以后可以使用它。我阅读了有关服务的信息，但是只为存储数组而制作特殊课程对我来说听起来有点夸张。有没有其他方法可以做到这一点？

数组是不可变的，二维的，比如：

```
$races = array(
'human' => array(
  1 => 'tribe1',
  2 => 'tribe2'
),
'dwarf' => array(
  1 => 'drarftribe1'
)
); 
```

所以它的结构非常简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:10:40.543

```
class GlobalArray {
    static public $data = array();
} 
```

使用权：

```
$var = GlobalArray::$data[index]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T12:27:45.077

然后只需创建一个`Races`类，并在任何你想要的地方命名它：

**/src/Acme/YourBundle/Races.php**

```
<?php

namespace Acme\YourBundle;

class Races
{

    static $yourData;

} 
```

需要时，请参阅`Acme\YourBundle\Races::$yourData`。

# c - ifconfig 和 socket inet_ntop 的不同 IP 结果

> ID：12423952
> 
> 赞同：0
> 
> 时间：2012-09-14T11:50:32.600
> 
> 标签：c, linux, bash, sockets, tcp

我正在 Linux 上开发一个应用程序。Linux 执行命令：

```
ifconfig eth0 192.168.10.15 netmask 255.255.255.0 
```

在使用 systemd 的引导过程中。

当我尝试在结果下方使用 ifconfig 了解我的 IP 地址时：

```
eth0      Link encap:Ethernet  HWaddr 00:18:31:E0:44:C6  
          inet addr:192.168.10.15  Bcast:192.168.10.255  Mask:255.255.255.0
          inet6 addr: fe80::218:31ff:fee0:44c6/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:24799 errors:0 dropped:1 overruns:0 frame:0
          TX packets:13753 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:5475289 (5.2 MiB)  TX bytes:1403459 (1.3 MiB) 
```

另一方面，当我尝试通过下面的程序了解我的 IP 地址时，我得到 192.168.10.42。

```
void GetMyIp(char caIP[INET_ADDRSTRLEN])
{
  int s;
  struct ifconf ifconf;
  struct ifreq ifr[50];
  int ifs;
  int i;    

  s = socket(AF_INET, SOCK_STREAM, 0);
  if (s < 0) 
  {
      #ifdef _DEBUG_PROCESS
        if(EDebugProcess<GetDebugLevelOfPMC())
        {
        PrintToLogFile("Socket error\n");
        }
      #endif
  }

  ifconf.ifc_buf = (char *) ifr;
  ifconf.ifc_len = sizeof ifr;

  if (ioctl(s, SIOCGIFCONF, &ifconf) == -1) 
  {
    #ifdef _DEBUG_PROCESS
        if(EDebugProcess<GetDebugLevelOfPMC())
        {
        PrintToLogFile("ioctl error\n");
        }
      #endif
  }

  ifs = ifconf.ifc_len / sizeof(ifr[0]);
    struct sockaddr_in *s_in = (struct sockaddr_in *) &ifr[ifs-1].ifr_addr;
    if (!inet_ntop(AF_INET, &s_in->sin_addr, gcaMyIP, sizeof(gcaMyIP))) 
    {
    #ifdef _DEBUG_PROCESS
        if(EDebugProcess<GetDebugLevelOfPMC())
        {
        PrintToLogFile("inet_ntop error\n");
        }
    #endif
    }

    close(s);
    memcpy(caIP,gcaMyIP,INET_ADDRSTRLEN);
} 
```

差异的根源是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T19:51:54.147

如果你愿意，你可以试试：

[http://www.binarytides.com/get-local-ip-in-c-on-linux/](http://www.binarytides.com/get-local-ip-in-c-on-linux/)

# fancybox - Fancybox inline 没有滚动条并且是 100% 和“固定”的

> ID：12423954
> 
> 赞同：0
> 
> 时间：2012-09-14T11:50:37.013
> 
> 标签：fancybox, fancybox-2

不知道如何解释这一点，但这里有：

我希望内容位于当前/父内容之上，而不是 Fancybox 在页面上打开一个可以在其中包含滚动条以查看溢出内容的“框”。

因此，目前，如果浏览器内部宽度为 800px，而您正在打开需要 1200px 高度的内容，则 Fancybox 'box' 高度可以设置为 800px 并使用滚动条来滚动新 'box' 的内容（因为内容是1200px）。我想这样做，所以没有新的滚动条，但新内容是完整的 1200 像素，它将主/父页面向下推（如果不存在，则在父页面上强制滚动条）。

单击关闭按钮仍将关闭它。

这可能吗？我说得有道理吗？

这适用于 FancyBox 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T07:35:43.190

所以对于这个html

```
<a class="fancybox" href="{target content}">open content at 1200px height</a> 
```

使用这个脚本

```
$(".fancybox").fancybox({
 type: "html", // set type of content -Supported types are 'image', 'inline', 'ajax', 'iframe', 'swf' and 'html'
 width: 800, // or whatever
 height: 1200,
 autoSize : false, // so the size will be 800x1200
 autoCenter: false, // so fancybox will scroll down if needed
 fitToView : false, // so fancybox won't try to scale the content to the size of the browser window
 scrolling : "no" // so no scroll bars inside fancybox
}); 
```

**注意**：您不能为图像设置特定尺寸，它们将是全尺寸（当`fitToView`设置为时`false`）或缩放到视口（当`fitToView`设置为时`true`）；其他类型的内容可以根据上面代码的大小进行`width`调整`height`。

**提示**：您可以打开具有不同高度的不同类型的内容（或定位不同的内容），并`height`使用 HTML5`data-*`属性动态更改 fancybox .... 所以对于这个 html：

```
<a class="fancybox" href="{target content 01}" data-height="1200">open content 01 at 1200px height</a>
<a class="fancybox" href="{target content 02}" data-height="1000">open content 02 at 1000px height</a>
<a class="fancybox" href="{target content 03}" data-height="1450">open content 03 at 1450px height</a> 
```

然后将回调添加`beforeShow`到您的脚本以获得这样的`data-height`值

```
$(".fancybox").fancybox({
 type: "html", // set type of content -Supported types are 'image', 'inline', 'ajax', 'iframe', 'swf' and 'html'
 width: 800, // or whatever
 // height: 1200, // no fixed height but obtained dynamically
 autoSize : false, // so the size will be 800x1200
 autoCenter: false, // so fancybox will scroll down if needed
 fitToView : false, // so fancybox won't try to scale the content to the size of the browser window
 scrolling : "no", // so no scroll bars inside fancybox
 beforeShow : function(){
  this.height = $(this.element).data("height");
 }
}); 
```

# ios - 在 UIMapview 中使用 lat/long 计算面积

> ID：12423960
> 
> 赞同：1
> 
> 时间：2012-09-14T11:51:05.833
> 
> 标签：ios, mkmapview, area

我正在尝试查找添加到 MapView 的 MKPolygonView 对象区域。Apple 文档有方法 distanceFromLocation: 来查找 MKPolygonView 对象边缘之间的距离。但我找不到任何东西来计算覆盖面积。

Apple 是否有任何记录在案的方法来查找区域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:10:27.493

Concerning the comments on the question post, the Earth is not a perfect sphere either. In fact, it's not a perfect anything, so "correct" answers aren't possible. What matters is how accurate of an approximation you need. Also, are you interested in a mean sea level type measurement, or do you want the actual contours of the ground (for example if your polygon is put over a mountain, then the same exact size polygon is put over some plains, should the result you calculate be the same or different)?

Depending on how big your polygon is, and which measurement you're looking for, a 2D approximation can be pretty accurate (the smaller the polygon, the closer you'll get). Something to keep in mind, if you want your area in something like square feet, the distance between two longitudinal lines is not constant (63 deg west and 62 deg west are closer (in feet) somewhere in Alaska than they are at the equator). You might have to do a unit conversion to handle this depending on how big your polygon is (or if your polygon could be placed anywhere). If you can't do the 2D approximation, I'm not even sure how you'd do that.

When I did this, I did the 2D approx, and I had to do the unit conversion. If that's the way you go, I can try to dig up some of my old notes and the links I used to get you started.

# java - Maven + AspectJ - 配置它的所有步骤

> ID：12423965
> 
> 赞同：38
> 
> 时间：2012-09-14T11:51:22.630
> 
> 标签：java, maven, aspectj

我在将方面应用于我的 Maven 项目时遇到问题。可能我错过了一些东西，所以我列出了步骤。你能检查一下它是否正确吗？

假设 in`projectA`是一个方面类和`projectB`类，应该由方面来改变。

*   `ProjectA`使用`AspectJ`类创建 Maven 项目
*   添加`Aspectj`插件和依赖
*   添加`ProjectA`为依赖项`projectB` `pom.xml`
*   添加到`projectB` `pom.xml`插件

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>aspectj-maven-plugin</artifactId>
    <version>1.4</version>
    <executions>
        <execution>
            <goals>
                <goal>compile</goal>
                <goal>test-compile</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <source>${maven.compiler.source}</source>
        <target>${maven.compiler.target}</target>
        <aspectLibraries>
            <aspectLibrary>
                <groupId>ProjectA</groupId>
                <artifactId>ProjectA</artifactId>
            </aspectLibrary>
        </aspectLibraries>
    </configuration>
</plugin> 
```

*   添加aspectj依赖

在所有这些步骤之后，我的问题是，在编译过程中我得到：

```
[WARNING] advice defined in AspectE has not been applied [Xlint:adviceDidNotMatch] 
```

然后当我运行我的程序时：

```
Exception in thread "FeatureExcutionThread" java.lang.NoClassDefFoundError: AspectE 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-18T07:02:16.763

我追踪了你的一些较早的问题，试图找出你真正想要做的事情。我想出了以下结构和代码，对我来说效果很好。

```
$树。
.
├── pom.xml
├── 项目A
| ├── pom.xml
| └── 源
| └── 主要
| └── 方面
| └── com
| └── 堆栈溢出
| └── 方面
| ├── AspectL.java
| └── Trace.aj
└── 项目B
    ├── pom.xml
    └── 源
        └── 主要
            └── java
                └── com
                    └── 堆栈溢出
                        └── App.java

```

`pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>org.stackoverflow</groupId>
    <artifactId>Q12423965</artifactId>
    <packaging>pom</packaging>
    <version>1.0-SNAPSHOT</version>

    <name>${project.artifactId}-${project.version}</name>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <maven.compiler.source>1.6</maven.compiler.source>
        <maven.compiler.target>1.6</maven.compiler.target>
    </properties>

    <modules>
        <module>ProjectA</module>
        <module>ProjectB</module>
    </modules>

    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>org.stackoverflow</groupId>
                <artifactId>Q12423965-ProjectA</artifactId>
                <version>${project.version}</version>
            </dependency>
        </dependencies>
    </dependencyManagement>

    <build>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>aspectj-maven-plugin</artifactId>
                    <version>1.4</version>
                    <executions>
                        <execution>
                            <goals>
                                <goal>compile</goal>
                                <goal>test-compile</goal>
                            </goals>
                        </execution>
                    </executions>
                    <configuration>
                        <source>${maven.compiler.source}</source>
                        <target>${maven.compiler.target}</target>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>2.5.1</version>
                    <configuration>
                        <source>${maven.compiler.source}</source>
                        <target>${maven.compiler.target}</target>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
    </build>
</project> 
```

`ProjectA/pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>org.stackoverflow</groupId>
        <artifactId>Q12423965</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>

    <artifactId>Q12423965-ProjectA</artifactId>

    <name>${project.artifactId}-${project.version}</name>

    <dependencies>
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>1.6.11</version>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>aspectj-maven-plugin</artifactId>
            </plugin>
        </plugins>
    </build>
</project> 
```

我创造了两个不同的方面。一个使用@AspectJ 注释，另一个被定义为经典的AspectJ 方面。

`AspectL.java`

```
package com.stackoverflow.aspects;

import org.aspectj.lang.JoinPoint;
import org.aspectj.lang.annotation.After;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;
import org.aspectj.lang.annotation.Pointcut;

/**
 * @author maba, 2012-09-18
 */
@Aspect
public class AspectL {

    @Pointcut("execution(* main(..))")
    public void defineEntryPoint() {
    }

    @Before("defineEntryPoint()")
    public void aaa(JoinPoint joinPoint) {
        System.out.println("aspect before");
    }

    @After("defineEntryPoint()")
    public void bbb(JoinPoint joinPoint) {
        System.out.println("aspect after");
    }
} 
```

`Trace.aj`

```
package com.stackoverflow.aspects;

public aspect Trace {
    pointcut publicMethodExecuted(): execution(public !static * *(..));

    after(): publicMethodExecuted() {
        System.out.printf("Enters on method: %s. \n", thisJoinPoint.getSignature());

        Object[] arguments = thisJoinPoint.getArgs();
        for (int i =0; i < arguments.length; i++){
            Object argument = arguments[i];
            if (argument != null){
                System.out.printf("With argument of type %s and value %s. \n", argument.getClass().toString(), argument);
            }
        }
        System.out.printf("Exits method: %s. \n", thisJoinPoint.getSignature());
    }
} 
```

这两个文件是 ProjectA 模块的一部分，并且是 jar 的一部分。

现在我们要使用这些方面并将它们编织到 ProjectB 的代码中。

`ProjectB/pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>org.stackoverflow</groupId>
        <artifactId>Q12423965</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>

    <artifactId>Q12423965-ProjectB</artifactId>

    <name>${project.artifactId}-${project.version}</name>

    <dependencies>
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>1.6.11</version>
        </dependency>
        <dependency>
            <groupId>org.stackoverflow</groupId>
            <artifactId>Q12423965-ProjectA</artifactId>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>aspectj-maven-plugin</artifactId>
                <configuration>
                    <aspectLibraries>
                        <aspectLibrary>
                            <groupId>org.stackoverflow</groupId>
                            <artifactId>Q12423965-ProjectA</artifactId>
                        </aspectLibrary>
                    </aspectLibraries>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.2.1</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>java</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <mainClass>com.stackoverflow.App</mainClass>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

`App.java`

```
package com.stackoverflow;

/**
 * @author maba, 2012-09-17
 */
public class App {

    public void hello(String name) {
    }

    public static void main(String[] args) {
        App app = new App();
        app.hello("world");
    }
} 
```

我从顶级 pom 构建一切：

```
mvn clean install 
```

然后进入 ProjectB 目录并运行应用程序：

```
mvn exec:java 
```

结果是：

```
aspect before
Enters on method: void com.stackoverflow.App.hello(String). 
With argument of type class java.lang.String and value world. 
Exits method: void com.stackoverflow.App.hello(String). 
aspect after 
```

因此得出结论，这两个方面都有效，并且 Maven 设置也有效。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-21T20:21:24.840

这对我有用，必须添加对外部依赖项的查找（请参阅 weaveDependencies）才能对它们执行编织，您应该将其包含在 ProjectA pom 文件中：

```
<dependencies>
  <dependency>
    <groupId>com.ProjectB</groupId>
    <artifactId>ProjectB</artifactId>
  </dependency>
  <dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjrt</artifactId>
    <version>1.6.5</version>
  </dependency>
</dependencies>

<build>
  <plugins>
    <plugin>
      <groupId>org.codehaus.mojo</groupId>
      <artifactId>aspectj-maven-plugin</artifactId>
      <version>1.2</version>
      <executions>
        <execution>
          <goals>
            <goal>compile</goal><!-- to weave all your main classes -->
            <goal>test-compile</goal><!-- to weave all your test classes -->
          </goals>
        </execution>
      </executions>
      <configuration>
        <weaveDependencies>

          <weaveDependency>
            <groupId>com.ProjectB</groupId>
            <artifactId>ProjectB</artifactId>
          </weaveDependency>
        </weaveDependencies>
        <showWeaveInfo>true</showWeaveInfo>

        <source>${maven.compiler.source}</source>
        <target>${maven.compiler.target}</target>
      </configuration>
    </plugin>
  </plugins>
</build> 
```

希望能帮助到你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T12:11:19.633

我和你有同样的问题。我发现的唯一解决方案是为 aspectJ 项目中的每个方面类创建一个包装器，以让外部项目可以访问它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T12:24:07.657

我记得也遇到过这个问题，但是通过切换到基于 Java 注释的方面来解决它。你可以试试看。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-16T18:32:10.023

看一个现实生活中的例子：

*   这是我们定义方面并编译它们的模块：[pom.xml](https://github.com/jcabi/jcabi-aspects/blob/master/pom.xml)。
*   这就是我们在另一个项目中使用它们的方式：[pom.xml](https://github.com/yegor256/takes/blob/master/pom.xml)（注意突出显示的行）。

您的问题是您没有`ProjectA`将`ProjectB`.

# asp.net - 在 asp.net 中缓存 sql server 数据，直到行被修改

> ID：12423970
> 
> 赞同：5
> 
> 时间：2012-09-14T11:51:38.360
> 
> 标签：asp.net, sql-server-2008

我经常以以下形式运行查询：

```
select * from SomeTable where id=12345 
```

一页又一页我可能正在运行相同的查询，因为用户需要该行的值。通常我会获取一次并缓存它，但是用户可以随时更改行，其他用户也在同时在 SomeTable 中进行更改，因此我无法缓存整个表。我还有一个问题，我们有一个网络服务器集群，所以当缓存失效时，我无法在网络服务器上进行内部跟踪。

有没有办法检测到这一行发生了变化？SqlDependecyCache 类可以在这里为多个 Web 服务器的单个行提供帮助吗？是否有一些触发器或其他范例可以通知我的 Web 应用程序？

我想要两全其美 - 网络服务器上的实时缓存更新，但我不想运行任何查询来查看该行是否已更改，因为我可以轻松地再次获取该行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T12:14:32.197

您需要的是启用 SqlCacheDependency 正如@RenusRusanu 提到的那样。

[我的 Github 网站上](https://github.com/jupaol/LearningProjects/tree/master/VS%202012/src/WebForms/MSTS%2070-515/Msts/Topics/Chapter02/Lesson03)有几个工作示例，请随意浏览 *[我的 LearningProjects 下的代码](https://github.com/jupaol/LearningProjects)*（*第 3 方编辑*）

*   [缓存 SQL 查询](https://github.com/jupaol/LearningProjects/blob/master/VS%202012/src/WebForms/MSTS%2070-515/Msts/Topics/Chapter02/Lesson03/CachingSqlQueries.aspx.cs)

*   [Page OutputCache 声明式](https://github.com/jupaol/LearningProjects/blob/master/VS%202012/src/WebForms/MSTS%2070-515/Msts/Topics/Chapter02/Lesson03/OutputCacheWithSqlPollingDeclaratively.aspx)

*   [代码中的页面输出缓存](https://github.com/jupaol/LearningProjects/blob/master/VS%202012/src/WebForms/MSTS%2070-515/Msts/Topics/Chapter02/Lesson03/OutputCacheWithSqlPollingDependency.aspx.cs)

您需要先配置数据库才能使用 SqlCacheDependency：

为了使用 SQL Dependency，我们需要在数据库中基本配置两件事：

1.  创建包含在表上的数据库基础结构并存储过程，要对其进行配置，我们使用`aspnet_regsql.exe`如下：

    ```
    /* For SQL Server authentication... */
    aspnet_regsql.exe -S server -U user -P password -d database -ed
    /* For Windows Authentication... */
    aspnet_regsql.exe -S server -E -d database -ed 
    ```

2.  创建轮询信息，其中包括指定要监视的表和对该表的触发器以填充所需的基础结构表

    ```
     /* For SQL Server authentication... */
            aspnet_regsql.exe -S server
           -U user -P password -d database -t tableName -et
            /* For Windows Authentication... */
           aspnet_regsql.exe -S server
           -E -d database -t tableName -et 
    ```

代码配置

```
 var s = new SqlCacheDependency("AdventureWorks", "Product");

        HttpContext.Current.Cache.Insert(
            "products", 
            h, 
            s, 
            Cache.NoAbsoluteExpiration, 
            Cache.NoSlidingExpiration); 
```

`AdventureWorks`名称为web.config文件中配置的sql依赖的名称

```
<caching>
  <sqlCacheDependency enabled="true" pollTime="30000" >
    <databases>
      <add 
           name="AdventureWorks"
           connectionStringName="AdventureWorksPolling" />
    </databases>
  </sqlCacheDependency>
</caching> 
```

`pollTime`可以在元素中配置，并将`<add ...`覆盖全局`polltime`

## 或者，您可以依赖 SqlDataSource 控件

为了在使用此控件时启用缓存，您需要将`DataSourceMode`属性设置为`DataSet`. 在这种情况下，您不需要像前面解释的那样配置数据库

[我刚刚上传了这个例子（完整的工作例子）](https://github.com/jupaol/SO-Answers/blob/master/Visual%20Studio%202012/src/SO/WebForms/WebForms_1/Topics/Caching/CachingUsingTheSqlDataSource.aspx)

### ASPX

```
 <asp:SqlDataSource runat="server" ID="sds"
        ConnectionString="<%$ConnectionStrings:pubsConnectionString %>"
        CacheDuration="30"
        EnableCaching="true"
        SelectCommand="select * from jobs"
        DataSourceMode="DataSet"
        OnSelecting="sds_Selecting">

    </asp:SqlDataSource>
    <div>
        <asp:Literal runat="server" ID="msg" Mode="Encode"></asp:Literal>
    </div>
    <asp:GridView runat="server" DataSourceID="sds"></asp:GridView> 
```

## 编辑 1

为了在使用 SqlCacheDependency 时有选择地触发触发器，您需要更新手动生成的触发器。

使用该`aspnet_regsql -t -et...`命令配置表时，会在指定表中添加触发器。此触发器负责填充`AspNet_SqlCacheTablesForChangeNotification`SqlCacheDependency 对象使用的表，以轮询数据库中的数据。

触发器看起来像：

```
ALTER TRIGGER [dbo].[jobs_AspNet_SqlCacheNotification_Trigger] ON [dbo].[jobs]
                   FOR INSERT, UPDATE, DELETE AS BEGIN
                   SET NOCOUNT ON
                   EXEC dbo.AspNet_SqlCacheUpdateChangeIdStoredProcedure N'jobs'
                   END 
```

`dbo.AspNet_SqlCacheUpdateChangeIdStoredProcedureN'jobs'`当您感兴趣的行更新时，您可以更新触发器以仅调用存储过程

我不是 SQL 专家，但我认为很容易找到一种干净的方法来检测已更改的行，例如，谷歌搜索我刚刚找到了这个链接

[在 MS SQL Server 中检测列更改的最有效方法](https://stackoverflow.com/questions/651524/most-efficient-method-to-detect-column-change-in-ms-sql-server)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T11:57:12.483

[`SqlCacheDependency`](http://msdn.microsoft.com/en-us/library/system.web.caching.sqlcachedependency.aspx), 以及[`SqlDependency`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx), 可以完全按照您的描述进行。两者都基于[Query Notifications](http://rusanu.com/2006/06/17/the-mysterious-notification/)，一种允许您的应用程序在更新行时从服务器接收通知的技术。您甚至可以从[LINQ](http://code.google.com/p/linqtocache/)中利用它。

但是您需要小心，缓存频繁更改的值可能弊大于利。您应该只对相当稳定的值执行此操作。

# ruby-on-rails - 在开发过程中具有omniauth的多个用户

> ID：12423972
> 
> 赞同：0
> 
> 时间：2012-09-14T11:51:41.333
> 
> 标签：ruby-on-rails, ruby, omniauth, linkedin

我正在使用 Omniauth 做我的 firat Rails 应用程序，并且想知道解决以下问题的最佳方法是什么。

该应用程序只允许用户使用他们的 LinkedIn 帐户注册/登录 - 我不想管理用户数据库并且所有用户都有一个 LinkedIn 帐户。

该应用程序允许用户相互交互，但由于该应用程序只接受LinkedIn用户登录，我如何在开发过程中测试该应用程序的功能。

我只能使用一个用户（我自己的 LinkedIn 帐户）登录，而且我至少需要一个用户才能查看一切是否正常。

我应该创建一些虚假的 LinkedIn 帐户并使用它们来测试应用程序吗？或者在没有很多 LikedIn 帐户的情况下向应用添加更多用户的最佳方式是什么？

肯尼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:37:04.627

如果你有一个用户模型（我希望你有它），你可以在 rails 控制台中创建任何用户：

```
> User.create! :name => "someuser", :email => "someuser@example.com", :password => "somepassword" 
```

确保添加所有必填字段。

# c# - 如何将基类孩子存储在字典中？

> ID：12423973
> 
> 赞同：0
> 
> 时间：2012-09-14T11:51:41.800
> 
> 标签：c#, inheritance

我有一个叫做实体的基类。然后我有两个子类标签和继承自实体的属性。现在我想要一个存储实体列表的字典。但我无法让它工作。是否错误地进行了继承？

```
Dictionary<string, List<Entity>> baseDict = new Dictionary<string, List<Entity>>();

List<Tag> tags = new List<Tag>();
tags.Add(new Tag("2012"));
tags.Add(new Tag("hello"));
tags.Add(new Tag("lego"));
List<Properties> properties = new List<Properties>();
properties.Add(new Properties("Year"));
properties.Add(new Properties("Phrase"));
properties.Add(new Properties("Type"));

baseDict.Add("Tags", tags);
baseDict.Add("Properties", properties); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T11:57:57.810

这是一个常见的错误。

A`List<Derived>`不会自动从 a 继承`List<Base>`，并且它们不能互换使用。这样做的原因是列表是一个可变结构，即可以添加、删除和修改元素。
例如，如果我有 a`List<Dog>`和 a`List<Cat>`列表，并且我能够将它们视为 a `List<Mammal>`，那么以下代码将是可能的：

```
List<Dog> dogs = new List<Dog>();  //create a list of dogs
List<Mammal> mammals = dogs;   //reference it as a list of mammals
List<Cats> cats = mammals;  // reference the mammals as a list of cats (!!?!)
Cat tabby = new Cat();
mammals.Add(tabby)   // adds a cat to a list of dogs (!!?!) 
```

但是，如果您不需要列表，只需要集合（并且您使用 C# 4 或更高版本），则可以将字典定义为`Dictionary<string, IEnumerable<Entity>>`. 由于`IEnumerable`无法添加或修改集合，只需枚举它，因此任何有趣的业务都被定义为不受欢迎。这称为[Generic Type Covariance](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)，如果您想了解更多关于该主题的信息，可以查看[Eric Lippert 的几个很棒的博客。](http://blogs.msdn.com/b/ericlippert/archive/tags/covariance+and+contravariance/default.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T11:55:21.353

您有一个字典，其中包含一个`List<Entity>`键 ( `string`)。您需要将其存储`List<Tag/Properties>`为`Entities`本身。

```
Dictionary<string, List<Entity>> baseDict = new Dictionary<string, List<Entity>>();

List<Entity> tags = new List<Entity>();
tags.Add(new Tag("2012"));
tags.Add(new Tag("hello"));
tags.Add(new Tag("lego"));

List<Entity> properties = new List<Entity>();
properties.Add(new Properties("Year"));
properties.Add(new Properties("Phrase"));
properties.Add(new Properties("Type"));

baseDict.Add("Tags", tags);
baseDict.Add("Properties", properties); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T11:56:19.450

如果您改用它，它将起作用`Dictionary<string, IEnumerable<Entity>>`。

您不能在预期a 的`List<Tag>`地方使用 a 的原因是，拥有*看起来*像 a 的东西（意味着您可以向其中添加对象）但实际上是 a （它只能处理对象，不能处理其他对象的实例）会很危险自身的子类或实例）。但是，只允许您检查集合的内容，而不是添加到集合中，并且可以肯定地说 a 中的所有内容都是.`List<Entity>`*`List<Entity>``Entity``List<Tag>``Tag``Entity``Entity``IEnumerable<Entity>``List<Tag>``Entity`*

# jquery - Jquery keyup/blur 日期和天数计算

> ID：12423974
> 
> 赞同：0
> 
> 时间：2012-09-14T11:51:43.540
> 
> 标签：jquery, forms, datepicker

我有一个表格，我想根据开始日期和选择的天数计算结束日期。

所以过程......选择天选择开始日期自动填充结束日期=开始天数+天数

我已经完成了以下工作，但有人知道如何填充计算，因此在计算发生之前输入了天数和开始日期。

```
var $title3 = $("#enddate");
$("#startdate").keyup(function () {
    $title3.val(this.value);
});
$("#startdate").blur(function () {
    $title3.val(this.value);
});​
$("#days").keyup(function () {
    $title3.val(this.value);
});
$("#days").blur(function () {
    $title3.val(this.value);
});​

              echo'<table width="100%"><tr>
                <td class="label"><label for="days">Days:</label></td>
                <td class="field">
                <select id="days" name="days">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                </select>
                </td>
                <td class="status"></td>
              </tr>
                <tr>
                  <td class="label"><label for="startdate">Start Date:</label></td>
                  <td class="field"><input type="text" name="startdate" id="startdate" class="required" readonly="readonly"/></td>
                  <td class="status"></td>
                </tr>
                <tr>
                  <td class="label"><label for="enddate2">End Date:</label></td>
                  <td class="field"><input type="text" name="enddate2" id="enddate2" class="required" readonly="readonly"/></td>
                  <td class="status"></td>
                </tr></table>'; 
```

**模组**

这是我提出的一个解决方案，但需要选择结束日期的 maxDate 日期 + 5 天，不包括周末。我怎么写这个？

另外，我如何计算出 enddate 和 startdate 的 2 个结果的天数差异，但不包括周末？

```
var $ac_start_date = '<?php echo $ac_end_date ?>',
    $ac_start_date_flip = '<?php echo $ac_end_date_flip ?>',
    $ac_start_parsed = Date.parse($ac_start_date),
    _today = new Date().getTime();

// For Opera and older winXP IE n such
if (isNaN($ac_start_parsed)) { 
    $ac_start_parsed  = Date.parse($ac_start_date_flip);
}

var _aDayinMS = 1000 * 60 * 60 * 24; 

// Calculate the difference in milliseconds
var difference_ms = Math.abs($ac_start_parsed - _today);

// Convert back to days and return
var DAY_DIFFERENCE = Math.round(difference_ms/_aDayinMS);   

// do initialization here
$("#startdate").datepicker({
            dateFormat: 'dd-mm-yy',
            changeMonth: true,
            changeYear: true,
            yearRange: '0:+100',
            onSelect: function( selectedDate ) {
                $( "#enddate" ).datepicker( "option", "minDate", selectedDate );
                $( "#enddate" ).datepicker( "option", "maxDate", selectedDate + 5days excluding weekends);
            },              
            minDate: '+1d',         
            maxDate: '+' + (DAY_DIFFERENCE + 1) + 'd'
});

// do initialization here
$("#enddate").datepicker({
            dateFormat: 'dd-mm-yy',
            changeMonth: true,
            changeYear: true,
            yearRange: '0:+100'
}); 
```

啊哈...

```
$(".selector").datepicker({ beforeShowDay: $.datepicker.noWeekends }) 
```

# kineticjs - 无法从保存的 KineticJS 画布状态中检索图像属性

> ID：12423976
> 
> 赞同：2
> 
> 时间：2012-09-14T11:51:49.367
> 
> 标签：kineticjs

我正在尝试在服务器上保存涉及图像的画布状态，然后在稍后阶段检索状态。我正在使用 KineticJS 库。我通过使用 stage.toJSON() 保存状态，然后使用 stage2.load() 重新创建它，但是从 stage.toJSON 创建的结果 JSON 不包含与图像相关的任何数据，随后 stage2 具有除图像之外的所有形状不明确的。

应该做些什么来使 json 包含图像数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:54:48.353

toJSON() 生成的 JSON 具有图像对象的占位符。图像本身不是该 json 字符串的一部分。据我了解，您需要分别管理图像的保存和恢复。看这个例子

[http://www.html5canvastutorials.com/kineticjs/html5-canvas-load-complex-stage-with-kineticjs/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-load-complex-stage-with-kineticjs/)

本质上，加载所有内容，从渲染数据中获取图像的占位符并设置图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:54:51.757

我有一个类似的问题..

JSON 不加载图像，您将不得不再次调用它们..由于安全问题和所有..

但是您可以在图像加载器函数中添加一个 src 属性...

并使用 stage.load(json) 重新加载舞台

试试这个 js fiddle .. 这肯定会有所帮助：http: [//jsfiddle.net/sKymY/](http://jsfiddle.net/sKymY/)

问候

# arm - 在 WindowsCE 中使用自定义 DataAbortHandler

> ID：12423977
> 
> 赞同：1
> 
> 时间：2012-09-14T11:51:52.430
> 
> 标签：arm, windows-ce

我们正在开发基于 Windows CE 的应用程序。目前，我们正在与许多仅在发布版本中发生的数据中止异常作斗争。我们只有有限数量的开发设备，它们实际上将它们的调试流输出到串行端口上。现在我们想知道是否可以使用 OemDataAbortHandler 来访问异常的内容（即写入调试流的所有内容），以便为诊断目的收集数据。理想情况下，我们可以创建一个包含如下数据的文本文件：

```
 Exception 'Data Abort' (4): Thread-Id=05a70002(pth=8252169c),
 Proc-Id=03cf000e(pprc=824f3d70) 'XXXX.exe', VM-active=03cf000e(pprc=824f3d70) 'XXXX.exe'
    PC=400323cc(coredll.dll+0x000223cc) RA=4003361c(coredll.dll+0x0002361c) SP=0102f27c, 
BVA=6464646c 
```

现在，OemDataAbortHandler 的签名是：

```
void OEMDataAbortHandler(void); 
```

有什么方法可以访问写入调试流的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T00:02:51.203

您应该能够使用结构化异常处理 ( `__try`/ `__except`) 来过滤数据中止异常。异常时的处理器状态在内部函数的`CONTEXT`参数中返回。`GetExceptionInformation`请参阅[try/except 的文档](http://msdn.microsoft.com/en-us/library/s58ftw19%28v=VS.80%29.aspx)。

# responsive-design - 响应式视频播放器

> ID：12423981
> 
> 赞同：7
> 
> 时间：2012-09-14T11:52:10.833
> 
> 标签：responsive-design, jwplayer, flowplayer

我需要一个使用引导程序开发的响应式布局网站的视频播放器。这意味着当我重新调整屏幕大小或以不同大小的屏幕查看页面时，播放器应该自动适应屏幕。

我曾尝试使用 jwplayer 和 flowplayer，但没有成功。

[http://www.longtailvideo.com/support/forums/jw-player/setup-issues-and-embedding/24635/responsive-video-internet-explorer-100-widthheight](http://www.longtailvideo.com/support/forums/jw-player/setup-issues-and-embedding/24635/responsive-video-internet-explorer-100-widthheight)

注意：播放器应该能够播放 youtube 视频....

无论如何让 jwplayer/flowplayer 响应？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-26T11:31:59.467

**卢卡答案的更好版本**：

```
$(window).resize(function() {
    var $width = $("#holder").width();
    var $height = $width/1.5;
    jwplayer().resize($width,$height);
}); 
```

使用 JW Player API 中的**resize**函数：

[http://www.longtailvideo.com/support/jw-player/29411/resizing-the-player](http://www.longtailvideo.com/support/jw-player/29411/resizing-the-player)

**另一个解决方案**：

查看他们的响应式设计支持文档：[http ://www.longtailvideo.com/support/jw-player/32427/responsive-design-support](http://www.longtailvideo.com/support/jw-player/32427/responsive-design-support)

```
<div id="myElement"></div>
<script>
    jwplayer("myElement").setup({
        file: "/uploads/myVideo.mp4",
        image: "/uploads/myPoster.jpg",
        width: "100%",
        aspectratio: "12:5" // Set your image ratio here
    });
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T05:21:39.063

您可以通过简单的 CSS 样式进行更改

```
/* Video small screen */
.video {
position: relative;
padding-bottom: 56.25%;
height: 0;
overflow: hidden;
}

.video iframe,  
.video object,  
.video embed {
 position: absolute;
 top: 0;
 left: 0;
 width: 100%;
 height: 100%;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T22:40:42.067

我正在使用 jQuery 来调整大小。`#holder`是电影所在的 div ( `#videocontainer`)。
结构：

```
<div id="holder">
    <div id="videocontainer"></div>
</div> 
```

它需要`#holder`大小并给它`#videocontainer`。它适用于ie9，ie8，...

```
$(window).resize(function() {
    var $width = $("#holder").width();
    var $height = $width/1.5;
    jwplayer("videocontainer").setup({  
    flashplayer: "jwplayer/player.swf",
    file: "###.mp4",                            
    width: $width,
    height: $height,
    image: "###.jpg"
    });
}); 
```

希望能帮助到你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T16:47:19.777

试试 FitVids：[http ://fitvidsjs.com/](http://fitvidsjs.com/)

如果您想让 jwPlayer 响应，请尝试将其添加到您的 CSS 文件中：

```
#video-jwplayer_wrapper {
    position: relative;
    padding-bottom: 56.25%; /* 16:9 format */
    padding-top: 30px;
    height: 0;
    overflow: hidden;
}
#video-jwplayer_wrapper iframe, #video-jwplayer_wrapper object, #video-jwplayer_wrapper embed {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
} 
```

来源：[http ://webdesignerwall.com/tutorials/css-elastic-videos](http://webdesignerwall.com/tutorials/css-elastic-videos)

调用 jwplayer 时，您可能还需要将宽度设置为 100%：

```
jwplayer("myElement").setup({
    width: 100%
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-29T12:57:43.600

最简单的方法是使用 javascript

```
 function sizing() {
        $('#player').css('width', $('#container').outerWidth());
        $('#player').css('height',$('#player').outerWidth() / 1.33);
    }

    $(document).ready(sizing);
    $(window).resize(sizing); 
```

不要忘记包含 jquery 库并更改纵横比（1.33 代表 4:3，1,77 代表 16:9）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-19T11:06:48.070

这对我来说很好用 JW Player 去这里

```
<script type="text/javascript">

                            if($( window ).width() <= 400){
                                 pl_width = 300;
                                 pl_heith = 150;
                            }else if($( window ).width() <= 600){
                                 pl_width = 500;
                                 pl_heith = 250;
                            }else{
                                pl_width = 700;
                                pl_heith = 350;
                            }
                            //alert(pl_width);
                            jwplayer("video_top").setup({

                                flashplayer: "<?php echo $player_path; ?>",

                                file: "<?php echo $your_file; ?>",
                                controlbar: "bottom",

                                height:pl_heith,

                                width:pl_width

                            }); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-17T14:17:13.750

您可以在您的网站中使用 YouTube 视频，并使用[FitVid.Js](http://fitvidsjs.com/)插件使其具有响应性。

# php - Symfony2：如何在子目录中部署（Apache）

> ID：12423983
> 
> 赞同：3
> 
> 时间：2012-09-14T11:52:13.723
> 
> 标签：php, symfony, symfony-2.1, symfony-2.0

在子目录或别名中部署 symfony2 应用程序的最佳方法是什么？

假设我的应用程序将在以下条件下运行：`http://domain/symfonytest`

symfonytest 是我文件系统中某个目录的别名。

是否有一些我可以使用的 CLI 操作？

当我尝试手动配置它时，我发现路由有问题。

请求`http://domain/symfonytest/demo`被路由器视为`/symfonytest/demo`

有没有办法告诉路由器忽略`/symfonytest`整个应用程序的前缀？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T13:04:32.037

如果您使用的是 Symfony < 2.3，您可以遵循以下方法：

只需添加[`RewriteBase`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritebase)您的 .htaccess：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /symfonytest
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ app.php [QSA,L]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-14T14:04:46.673

如果您的项目位于不同的目录中，我将通过重写规则将所有流量设置为进入一个文件：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ app.php [QSA,L] 
```

然后我会通过注释为我的控制器设置路由前缀：

```
# Index (main page)
_nameRouteIndex:
    resource:  "@MyBundle/Controller/IndexController.php"
    type: annotation
    prefix: /symfonytest 
```

之后你在你的控制器中放入类似这样的东西（路径是域/symfonytest）：

```
/**
 * Home page
 *
 * @return Response
 *
 * @Route("/", name="_index")
 */
 public function indexAction()
 {
 } 
```

路径：域/symfonytest/demo

```
/**
 * Demo page
 *
 * @return Response
 *
 * @Route("/demo", name="_demo")
 */
 public function demoAction()
 {
 } 
```

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-20T17:18:48.247

对于 symfony3，它使用 apache 配置中的别名：

```
Alias /myapp /home/httpd/myapp/web 
```

# jquery - 单击提交时，JSON 对象应出现在 div 中

> ID：12423989
> 
> 赞同：0
> 
> 时间：2012-09-14T11:52:44.333
> 
> 标签：jquery, html, json, jquery-ui

我正在研究 wijmo (wijgrid)....我想显示我的 JSON 对象在提交时会进入 div ....

我已经尝试过这段代码，但它只适用于单个输入，但我希望表单的每个输入值都应该出现在 div 中。

这是我的代码：

```
$(function() {
    $("#addable").submit(function() {
        if(!$("#addable").validate().form()){ 
            e.preventDefault(); 
        } else{
            $.ajax({
                type : "POST",
                url : "addUser",
                data : JSON.stringify($('#addable').serializeObject()),
                dataType : "json",
                contentType : "application/json",
            });
        }

        $('#myoutput').append('<div>Number of elements :'+$("#addable").val()+'</div>');
        return false;
    });
}); 
```

HTML：

```
<div id="myoutput"></div> 
```

请帮忙！！谢谢蒂娜！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:54:33.503

1.  你有一个同步问题：当你执行追加时，你还没有 ajax 查询的结果。您必须定义一个`success`回调以在 ajax 调用成功时执行它。

2.  您并没有尝试使用调用的结果：您只是添加了一个 div，其中的元素数量与`$("#addable").val()`. 目前尚不清楚您想要实现什么。

# model-view-controller - 无法将数据添加到数据库

> ID：12423990
> 
> 赞同：0
> 
> 时间：2012-09-14T11:52:46.840
> 
> 标签：model-view-controller, jsp, jakarta-ee

我正在使用 mvc 1 开发一个简单的 Java Web 应用程序。该应用程序添加插入到表格中的数据。我们有 1.Bean 2.Operator 这是一个将数据从 jsp 插入数据库的类 3.servlet 4.jsp

这是豆

```
package pk1;

import java.util.*;

public class MissionForm {

    String objet, dateDepart,dateRetour;
    long matricule, numVehicule,numMission ;
    public MissionForm(String objet, String dateDepart, String dateRetour,
            int matricule, int numVehicule,int numMission) {
        super();
        this.objet = objet;
        this.dateDepart = dateDepart;
        this.dateRetour = dateRetour;
        this.matricule = matricule;
        this.numVehicule = numVehicule;
        this.numMission=numMission;
    }
    public String getObjet() {
        return objet;
    }
    public void setObjet(String objet) {
        this.objet = objet;
    }
    public String getDateDepart() {
        return dateDepart;
    }
    public void setDateDepart(String dateDepart) {
        this.dateDepart = dateDepart;
    }
    public String getDateRetour() {
        return dateRetour;
    }
    public void setDateRetour(String dateRetour) {
        this.dateRetour = dateRetour;
    }
    public long getMatricule() {
        return matricule;
    }
    public void setMatricule(long matricule) {
        this.matricule = matricule;
    }
    public long getNumVehicule() {
        return numVehicule;
    }
    public void setNumVehicule(long numVehicule) {
        this.numVehicule = numVehicule;
    }
    public long getNumMission() {
        return numMission;
    }
    public void setNumMission(long numMission) {
        this.numMission = numMission;
    }

} 
```

将类型数据从 jsp 添加到数据库的运算符

```
package pk1;

import java.sql.*;
import java.util.Iterator;
import java.util.Vector;

public class Operateur {

    public Operateur(){}

    //------------------ajouter les Missions------------------------

    public void addMission(String objet,String dateDepart,String dateRetour,long matricule,long numVehicule){
        Connection conn=Utilitaire.getConnection();
        String req="insert into mission (Objet,DateDepart,DateRetour,Matricule,NumVehicule) values(?,?,?,?,?)";
        try {
            PreparedStatement ps=conn.prepareStatement(req); // prepare une instruction ki é parametré ces parametres st representé par les ?
            ps.setString(1,objet);
            ps.setString(2,dateDepart);
            ps.setString(3,dateRetour);
            ps.setLong(4,matricule);
            ps.setLong(5,numVehicule);

            ps.executeUpdate();
        } catch (SQLException e) {
            e.printStackTrace();
        }   
    }

} 
```

OperatorServlet.java

```
import pk1.*;

import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import javax.servlet.http.*;
import javax.servlet.*;

import java.io.*;

public class OperateurServlet extends HttpServlet {

        public void doPost(HttpServletRequest request,
                HttpServletResponse response)throws ServletException,IOException{
    //Créer le bean qui va stocker les données de la requête
            MissionForm mf=new MissionForm(null, null, null, 0, 0, 0);

            //Faire appel au modèle pour ajouter une nouvelle mission
            Operateur op=new Operateur();
            if(request.getParameter("addMiss")!=null){
    // Socker les données de la requête dans le bean créé
                mf.setObjet(request.getParameter("objet"));
                mf.setDateDepart(request.getParameter("dateDepart"));
                mf.setDateRetour(request.getParameter("dateRetour"));
                mf.setMatricule(Long.parseLong(request.getParameter("matricule")));
                mf.setNumVehicule(Long.parseLong(request.getParameter("numVehicule")));
                //Sauvegarder l'objet dans la base de données
                op.addMission(mf.getObjet(),mf.getDateDepart(),mf.getDateRetour(),mf.getMatricule(),mf.getNumVehicule());

}

        /* avant de donner la main la page JSP pour afficher
         * enregitrer le bean dans la requête ou la session courante
         */
                    HttpSession session=request.getSession();
                    session.setAttribute("missForm",mf);
        //Faire une redirection vers la vue JSP pour afficher.
                    response.sendRedirect("interface.jsp");     
                }
            public void doGet(HttpServletRequest request,
                    HttpServletResponse response)throws ServletException,IOException{
                    doPost(request,response);
            }
        } 
```

jspvue

```
<%@ page language="java" %>
<%@ page import="java.util.*" %>
<%@ page import="pk1.*" %>

<html>
<head>
<title>Ordres de missions</title>
</head>
<body bgcolor="#FFFFFF">

<form method='post' action='operateurservlet'>
 <table border='1' align='center'>
   <tr>
    <td>Année:<input type='text' name='motCle' value=''></td>
    <td><input type='submit' name='chercheCat' value='Chercher'></td>
   </tr>
 </table>
</form>
<form method='get' action='operateurServlet/operateur'>
  <table border='1' align='center'>
    <tr>
      <td>Numero de mission<td>Objet</td><td>Date de depart</td><td>Date de retour</td><td>Agent</td>

    </tr>
    <tr>
    <td></td>
     <td>   <input type='text' name='objet' size='40'></td> 
     <td><input type='text' name='dateDepart'></td>     
     <td><input type='text' name='dateRetour'></td>
     <td><FORM>
                                                                    <SELECT name="nom" size="1">
                                                                                <OPTION>1
                                                                                <OPTION>2
                                                                                <OPTION>3
                                                                                <OPTION>4
                                                                                 <OPTION>5
                                                                    </SELECT>
                                                               </FORM></td>

     <td><input type='submit' value='Ajouter'></td> 

    </tr>

  </table>
</form>

</body>
</html> 
```

当我单击添加按钮时，没有任何反应。我知道在 jsp 中有些东西不起作用，我不知道它是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:54:38.100

分析你的代码我注意到一些不清楚的地方（至少对我来说）

1.  你为什么用嵌套的FORM？

2.  您检查一个名为 addMiss 的请求变量的值，但您没有像 input type="hidden" name="addMiss" 等在 html 中传递它。所以变量总是为空

希望这对你有帮助

# sqlite - 将固定宽度的文本文件导入 sqlite

> ID：12423991
> 
> 赞同：3
> 
> 时间：2012-09-14T11:52:47.487
> 
> 标签：sqlite, text, fixed-width

将固定宽度的文本文件导入sqlite表的好方法是什么，最好不使用外围软件？

例如指定每个字段的宽度

```
Field 1: 10 characters starting with the second character
Field 2: 5  characters starting with the twelfth character
Field 3: 7  characters starting with the eighteenth character 
```

线

```
AABCDEFGHIJABCDEAABCDEFGA 
```

将被导入为：

```
Field 1     Field 2  Field 3
ABCDEFGHIJ  ABCDE    ABCDEFG 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-27T19:45:08.327

上面答案中的链接适用于通用 SQL。这是在 SQLite 中执行此操作的一种方法：

```
CREATE TABLE fixed_width_table (full_string CHAR);
.import fixed_width_file.txt fixed_width_table

CREATE TABLE tmp AS
Select
    SUBSTR(full_string,1,11) AS field1
    ,SUBSTR(full_string,2,5) AS field2
    ,SUBSTR(full_string,2,7) AS field3
FROM fixed_width_table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T12:34:04.657

这些`sqlite3`工具仅导入 CSV 文件。

有可以导入固定宽度文件的第三方工具，但[这个答案](https://stackoverflow.com/questions/9608838/import-fixed-width-text-to-sql#9609763)显示了如何在 SQLite 中使用字符串函数执行此操作。

# cocoa - 不知道如何使用 NSTableView

> ID：12423992
> 
> 赞同：0
> 
> 时间：2012-09-14T11:52:58.147
> 
> 标签：cocoa, nstableview

我是可可的新手。我真的不明白如何使用 NSTableView。搜索了一个很好的例子，但找不到。谁能帮我？

谷歌搜索产生了一些巨大的编码。但我认为在 Cocoa 中必须有一些更简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:57:46.597

“巨大的编码”是相对的。您将无法仅使用几行代码来实现表格。实现表格视图的数据源和委托方法至少需要 100 行，如果不是更多的话。请参阅[以编程方式填充基于视图的表视图](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/TableView/PopulatingView-TablesProgrammatically/PopulatingView-TablesProgrammatically.html#//apple_ref/doc/uid/10000026i-CH14-SW1)。

另一种方法可能是使用[Cocoa Bindings](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/cocoabindings/cocoabindings.html)将表视图的内容绑定到[`NSArrayController`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSArrayController_Class/Reference/Reference.html).

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-14T11:59:04.647

查看这个简短但有用的视频：

[http://www.youtube.com/watch?v=0dO02yQUH80](http://www.youtube.com/watch?v=0dO02yQUH80)

# entity-framework - 我可以在实体框架中使用自定义 lambda 方法吗？

> ID：12423995
> 
> 赞同：0
> 
> 时间：2012-09-14T11:53:05.933
> 
> 标签：entity-framework, c#-4.0, lambda

我有一些方法，例如：

```
public static string ToOtherFormat (this string inp)
{
  // some code to change inp
  return inp;
} 
```

在我的选择中，我想要这样的代码：

```
var DetailMembers = db.TB_Members
                      .Where(x=> x.FName == obj.ToOtherFormat())
                      .Select( x=> new { name = (x.FName.ToOtherFormat() + " " + x.LName) , x.ActCode }); 
```

我试着只是有错误。可能吗？
谢谢！
我在简单转换为整数时收到此错误

> LINQ to Entities 无法识别方法“Int32 ToInt32(System.String)”方法，并且该方法无法转换为存储表达式。

使用此代码

```
 .Where(x => x.MemberID == Convert.ToInt32(Hmemid.Hash_two_Decrypt()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:55:13.787

看起来您正在查询数据库。您当前的查询将被转换为 SQL 查询，并且由于 SQL 无法识别您的函数，这就是您出错的原因。

您可以使用没有该功能的查询从表中获取数据，然后稍后对结果集进行格式化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T19:03:06.513

我在使用`.AsEnumerable()`方法上找到了它，例如：

```
var DetailMembers = db.TB_Members.AsEnumerable()
                      .Where(x=> x.FName == obj.ToOtherFormat())
                      .Select( x=> new { name = (x.FName.ToOtherFormat() + " " + x.LName) , x.ActCode }); 
```

# java - aChartEngine 中的日期图表

> ID：12423996
> 
> 赞同：1
> 
> 时间：2012-09-14T11:53:08.227
> 
> 标签：java, android, eclipse, achartengine

我已经编辑了我的问题...

这是我正在使用的代码，我正在随着时间增加动物的重量。

```
 else if (str.equals("Weight"))
    {
        mDbHelper.open();
        wtArray = mDbHelper.getWeight();
        mDbHelper.close();

       TimeSeries diaSeries = new TimeSeries("Weight");

        for ( int i =0; i <wtArray.size(); i++)
        {
           Weight wt = wtArray.get(i);
           diaSeries.add(wt.date, wt.weight);
        }

        XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
        dataset.addSeries(diaSeries);

        XYMultipleSeriesRenderer mrenderer = new XYMultipleSeriesRenderer();

        XYSeriesRenderer renderer = new XYSeriesRenderer();
        renderer.setColor(Color.RED);
        renderer.setPointStyle(PointStyle.DIAMOND);
        renderer.setFillPoints(true);
        mrenderer.addSeriesRenderer(renderer);

        graphLayout.addView(ChartFactory.getTimeChartView(this, dataset, mrenderer, "MM/dd/yyyy"));
    } 
```

它从不在 x 轴上显示任何值，即时间。我正在使用线性布局。请告诉我有什么问题。也没有显示图表线。

其次，如果我想显示从特定日期到另一个日期的数据怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T11:57:45.470

您在这里有两个选择：

*   `LineChart`您在禁用常规标签的同时继续使用并添加自定义标签：

    渲染器.setXLabels(0); renderer.addXTextLabel(date.getTime(), "标签");

*   您使用 a`TimeChart`这是`LineChart`使用您提供的格式显示时间值的，而不是`LineChart`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T12:19:20.413

奥马尔。检查我的以下代码。我在`TimeChart`这里使用a。

```
 XYMultipleSeriesRenderer renderer = buildRenderer(colors, styles);
    // mDateFrom and mDateTo are Date Objects
        // Set the date span here
    setChartSettings(renderer, "title", "x_tiele", "y_title", 
            mDateFrom.getTime(),
            mDateTo.getTime(), 0, 1, Color.GRAY, Color.LTGRAY);

    XYMultipleSeriesDataset dataset = buildDateDataset(titles, mHashMapGroupedEntites);

    return ChartFactory.getTimeChartView(context, dataset,
                renderer, "yyyy/MM/dd HH"+":00:00"); 
```

试试这个。

```
 XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    dataset.addSeries(diaSeries);

    XYMultipleSeriesRenderer mrenderer = new XYMultipleSeriesRenderer();

    mrenderer.setXAxisMin(YOUR_DATE_MIN);
    mrenderer.setXAxisMax(YOUR_DATE_MAX);

    // XYSeriesRenderer renderer = new XYSeriesRenderer();
    mrenderer.setColor(Color.RED);
    mrenderer.setPointStyle(PointStyle.DIAMOND);
    mrenderer.setFillPoints(true);
    // mrenderer.addSeriesRenderer(renderer);

    graphLayout.addView(ChartFactory.getTimeChartView(this, dataset, mrenderer, "MM/dd/yyyy")); 
```