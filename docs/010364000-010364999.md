# StackOverflow 问答 10364000-10364999

# c# - 在C#中使用反射在循环中修改字段，扩展方法

> ID：10364008
> 
> 赞同：2
> 
> 时间：2012-04-28T13:37:20.740
> 
> 标签：c#, reflection, types, extension-methods, field

从数据库中检索数据后，我发现自己这样做是为了从 a `DataRow`（在本例中为 DVD）中的数据创建域对象：

```
DataRow drDvd = myDataTable.Rows[0];
Dvd myDvd = new Dvd();
myDvd.id = drDvd.Field<long>("id");
myDvd.title = drDvd.Field<string>("title");
myDvd.description = drDvd.Field<string>("description");
myDvd.releaseDate = drDvd.Field<DateTime>("releaseDate"); 
```

当然，我很快就感觉到，我在伪代码中一遍又一遍地这样做：

```
myDvd.field = drDvd.Field<field.type>(field.name); 
```

而且我想知道是否可以将其放入循环中，但是我以前从未使用过反射。我试过的代码是这样的：

```
Dvd aDvd = new Dvd();
Type t = aDvd.GetType();
FieldInfo[] fields = t.GetFields();
foreach (FieldInfo fi in fields)
{
    fi.SetValue(aDvd, drDvd.Field<fi.FieldType>(fi.Name));
} 
```

如您所知，问题是`Field`类方法的扩展`DataRow`不接受变量，需要显式填写。

我对 C# 没有那么丰富的经验，所以我想提出以下两个问题：

1.  **这是我想要做的好习惯吗？**
2.  **如何填写正确的扩展**名`Field<extension>(name)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:42:42.190

您需要获取泛型方法的方法信息，然后调用它。通过这种方式，您可以以编程方式将泛型类型传递给它。我在我的手机上，但它应该看起来像这样：

```
MethodInfo mField = typeof(Dvd).GetMethod("Field");
MethodInfo genericMethod = mField.MakeGenericMethod(new Type[] { fi.FieldType });

GenericMethod.Invoke(aDvd,new Object[]{fi.Name}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T13:59:06.783

在没有必要时使用反射通常是一种不好的做法。因为反射方法是在运行时而不是编译时检查的，所以错误的代码更难跟踪，因为编译器无法检查错误。

如果我是您，请查看实体框架，因为您基本上是将数据库数据映射到域对象。[http://msdn.microsoft.com/en-us/library/aa697427%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa697427%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T14:00:15.530

这是构建和填充域对象的一种方式

```
 DataRow drDvd = new DataRow();
    Dvd aDvd = new Dvd();
    Type type = typeof(Dvd);
    foreach (FieldInfo fi in type.GetFields())
    {
        fi.SetValue(aDvd, drDvd[fi.Name]);
    } 
```

您使用 DataRow.Field 的方法可能是四舍五入。在您的情况下，它不适用。

或者，您可以考虑在您的应用程序中使用其中一种实体框架（NHibernate、Microsoft EF 等）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T14:09:01.783

我会做一个自定义属性。在执行属性时，您会遇到与数据库相同的字段名称。我目前在我当前的应用程序中使用它并且效果很好。它与 Entity SQL 非常相似。

```
public class SqlMetaAttribute : Attribute
{
    public string ColumnName { get; set; }
} 
```

然后你有你的课是这样的

```
public class Person
{
    [SqlMeta(ColumnName = "First_Name")]
    publice string FirstName { get; set; }

    [SqlMeta(ColumnName = "Last_Name")]
    publice string LastName { get; set; }
} 
```

然后，您将拥有一个具有相同功能的辅助类。在这种情况下，我假设外部调用者正在遍历数据表。使用模板 T 使其具有通用性使其真正可重用。而不是仅仅拥有一个“DVD”类型的实现并为另一个进行应对和粘贴。

```
public static T CreateObjectFromRow<T>(DataRow row)
{
    var newObject = new T();

    if (row != null) SetAllProperties(row, newObject);

    return newObject;
}

public static void SetAllProperties<T>(DataRow row, T newObject)
{
    var properties = typeof(T).GetProperties();

    foreach(var propertyInfo in properties)
    {
        SetPropertyValue(row, newObject, propertyInfo);
    }
}
public static void SetPropertyValue(DataRow row, T newObject, PropertyInfo propertyInfo)
{
    var columnAttribute = propertyInfo.FindAttribute<SqlMetaAttribute>();

    if (columnAttribute == null) return;

    // If the row type is different than the object type and exception will be thrown, but that is
    // okay because if that happens you have to fix your object you are using, or might need some
    // more custom code to help you with that.
    propertyInfo.SetValue(newObject, row.GetValue<object>(columnAttribute.ColumnName), null);
}

// Extension method for row.GetValue<object> used above
public static T GetValue<T>(this DataRow row, string columnName)
{
    if (row.ColumnNameNotFound(columnName) || row.Table.Columns[columnName] == null || row[columnName] is DBNull)
    {
        return default(T);
    }

    return (T)row[columnName];
} 
```

# c# - 为什么 IQueryable 在 Where 子句中执行？

> ID：10364011
> 
> 赞同：0
> 
> 时间：2012-04-28T13:37:35.650
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我有

```
public IQueryable<Guid> AccessibleCities
{
    get
    {
        return CityRepository
            .FindAll(a => <CONDITIONS>);
    }
} 
```

`CityRepository.FindAll`实现为：

```
public virtual IQueryable<TLookup> FindAll(Expression<Func<TLookup, bool>> predicate)
{
  return DataContext.GetSet<TLookup>().Where(predicate);
} 
```

我称之为

```
anotherRepository
    .FindAll(a => AccessibleCities.Any(b => ANOTHER CONDITION)); 
```

当我调用最后一个时，它会生成两个查询，而不是添加 AccessibleCities 作为查询。

请帮我 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:35:03.690

您的最终查询无法那样工作；默认情况下它不会连接。

试试[PredicateBuilder](http://www.albahari.com/nutshell/predicatebuilder.aspx)类。看起来它应该适用于您想要实现的目标。

# c++ - C++同时读取和写入2个文本文件

> ID：10364016
> 
> 赞同：0
> 
> 时间：2012-04-28T13:38:37.147
> 
> 标签：c++, text

我可以写入文本文件并从文本文件中读取，但是如果我读取另一个文件，我将无法保存已读取的内容并处理它！

```
ifstream in;
ofstream out;

in.open("text.in", fstream::in);
if (!in.is_open()) return -1;

out.open("text.out", fstream::out);
if (!out.is_open()) return -1;
string line;

getline(in, line);

cout << line << endl;

in.close();
out.close();

return 0; 
```

通常上面打印出“text.in”文件的第一行，但如果我打开“text.out”文件它就不起作用！

如何同时打开两个文本文件？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T14:00:05.140

那是因为您打印到的`cout`不是`out`文件。

```
cout << line << endl;

// Add (or replace) the above line

out << line << endl; 
```

# gnome-terminal - 如何更改 gnome-terminal 的背景颜色？

> ID：10364017
> 
> 赞同：15
> 
> 时间：2012-04-28T13:38:45.510
> 
> 标签：gnome-terminal

如何更改背景颜色？我选择`Profile > Background > solid color`了，但我在哪里可以选择颜色？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-09T22:44:34.713

有两种得到很好支持的方法可以更改 xterm 的背景颜色（记住 xterm != Terminal）。

A. 在创建 xterm 时设置颜色：例如，

```
% xterm -bg yellow & 
```

或者

B. 编辑 .Xdefaults 以包含颜色规范，例如：XTerm*background:yellow

```
% vi ~/.Xdefaults  (pick your favorite editor) 
```

这也可以通过在 xterm 中键入以下内容来完成：

```
% cat >> ~/.Xdefaults  <RETURN>
XTerm*background:yellow<RETURN>
<CTRL-D> 
```

无论您以何种方式更改 .Xdefaults，更改都不会生效，直到：

*   `xrdb ~/.Xdefaults`
*   您的 X 服务器已重新启动，可能最简单的方法是重新启动您的计算机，或注销。

然后它将一劳永逸地设置。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-05-25T16:24:15.790

我建议使用反转默认的前景色和背景色

```
xterm -rv 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-06-08T13:20:13.793

我为 xterm 使用以下颜色和字体设置。将以下内容添加到主目录中的“.Xresources”文件中。

```
XTerm*faceName: Bitstream Vera Serif Mono
xterm*faceSize: 11
xterm*vt100*geometry: 80x60
xterm*saveLines: 16384
xterm*loginShell: true
xterm*charClass: 33:48,35:48,37:48,43:48,45-47:48,64:48,95:48,126:48
xterm*termName: xterm-color
xterm*eightBitInput: false

!BLK Cursor
#define _color0        #000d18
#define _color8        #000d18
!RED Tag
#define _color1        #e89393
#define _color9        #e89393
!GRN SpecialKey
#define _color2        #9ece13
#define _color10       #9ece13
!YEL Keyword
#define _color3        #f0dfaf
#define _color11       #f0dfaf
!BLU Number
#define _color4        #8cd0d3
#define _color12       #8cd0d3
!MAG Precondit
#define _color5        #c0bed1
#define _color13       #c0bed1
!CYN Float
#define _color6        #dfaf8f
#define _color14       #dfaf8f
!WHT Search
#define _color7        #efefef
#define _color15       #efefef
!FMT Include, StatusLine, ErrorMsg
#define _colorBD       #ffcfaf
#define _colorUL       #ccdc90
#define _colorIT       #80d4aa
!TXT Normal, Normal, Cursor
#define _foreground    #dcdccc
#define _background    #1f1f1f
#define _cursorColor   #8faf9f
URxvt*color0         : _color0
URxvt*color1         : _color1
URxvt*color2         : _color2
URxvt*color3         : _color3
URxvt*color4         : _color4
URxvt*color5         : _color5
URxvt*color6         : _color6
URxvt*color7         : _color7
URxvt*color8         : _color8
URxvt*color9         : _color9
URxvt*color10        : _color10
URxvt*color11        : _color11
URxvt*color12        : _color12
URxvt*color13        : _color13
URxvt*color14        : _color14
URxvt*color15        : _color15
URxvt*colorBD        : _colorBD
URxvt*colorIT        : _colorIT
URxvt*colorUL        : _colorUL
URxvt*foreground     : _foreground
URxvt*background     : _background
URxvt*cursorColor    : _cursorColor
XTerm*color0         : _color0
XTerm*color1         : _color1
XTerm*color2         : _color2
XTerm*color3         : _color3
XTerm*color4         : _color4
XTerm*color5         : _color5
XTerm*color6         : _color6
XTerm*color7         : _color7
XTerm*color8         : _color8
XTerm*color9         : _color9
XTerm*color10        : _color10
XTerm*color11        : _color11
XTerm*color12        : _color12
XTerm*color13        : _color13
XTerm*color14        : _color14
XTerm*color15        : _color15
XTerm*colorBD        : _colorBD
XTerm*colorIT        : _colorIT
XTerm*colorUL        : _colorUL
XTerm*foreground     : _foreground
XTerm*background     : _background
XTerm*cursorColor    : _cursorColor 
```

保存文件后，运行以下命令以保存更改：

```
xrdb -merge ~/.Xresources 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T00:03:36.523

由于您所说的似乎是终端，您是否禁用了颜色下的“使用系统主题中的颜色”？完成此操作后，您可以选择背景颜色，仍在“颜色”选项卡下。背景选项卡看起来只允许选择图像（或透明度），这也让我感到困惑。

# google-chrome-extension - 一次发送一个 Chrome 扩展程序桌面通知

> ID：10364025
> 
> 赞同：0
> 
> 时间：2012-04-28T13:40:12.853
> 
> 标签：google-chrome-extension

我仍在学习如何创建 Chrome 扩展，但我的问题在于桌面通知。我能够触发通知，但是当这种情况发生时，例如，我会触发内容脚本 1 的桌面通知。桌面通知也会触发内容脚本 2。我如何使其不会同时触发，以及只有当他们被调用？

**背景页面**

```
chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
    // Create a simple text notification
    var notifyWinner = webkitNotifications.createNotification('48.png', 'Notification', request.winnerMessage);
    notifyWinner.show();
    setTimeout(function(){ notifyWinner.cancel(); },10000);
});

chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
    // Create a simple text notification
    var notifyVideo = webkitNotifications.createNotification('48.png', 'Notification', request.videoMessage);
    notifyVideo.show();
    setTimeout(function(){ notifyVideo.cancel(); },10000);
}); 
```

**内容脚本 1**

```
chrome.extension.sendRequest({winnerMessage: "You won!!!"}, function(response) {
                return response;
            }); 
```

**内容脚本 2**

```
chrome.extension.sendRequest({videoMessage: "There is a video" + videoURL}, function(response) {
                      return response;
                  }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T14:45:11.923

您可以将代码简化为仅使用一个 onRequest 侦听器，然后它将停止显示重复通知。

背景页面

```
chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
    // Create a simple text notification
    var notify = webkitNotifications.createNotification('48.png', 'Notification', request.message);
    notify.show();
    setTimeout(function(){ notify.cancel(); },10000);
}); 
```

内容脚本

```
chrome.extension.sendRequest({
  message: "There is a video" + videoURL},  // Change the message here as needed.
  function(response) {
  return response;
}); 
```

# plone - 如何从 Plone 站点清除未使用的附加组件？

> ID：10364026
> 
> 赞同：5
> 
> 时间：2012-04-28T13:40:14.260
> 
> 标签：plone

这是一个普遍的问题，但受到一个例子的启发。一般的问题是：如何从未使用的附加组件中清除 Plone 站点？您可以通过多种方式生成未使用的附加组件，例如，如果您将一个附加组件用于一件事，然后您更喜欢另一个。

我开始学习 Plone，也许我犯了一些错误。但我认为某些附加组件可能会产生问题，因为它们留下了一些不会自动卸载的东西。然后我的问题也是关于如何将数据与可能的附加组件足迹隔离开来。

所以，这是一个例子：

当我开始使用 Plone 时，我安装了一个名为 zettwerk.ui 的插件。但后来我卸载了它。我使用 Plone Web 界面和构建配置删除了附加组件。然后我遇到了问题：每次我尝试安装另一个附加组件时都会出现错误消息：

```
2012-04-28 00:21:54 INFO GenericSetup.rolemap Role / permission map imported.
2012-04-28 00:21:54 INFO GenericSetup.archetypetool Archetype tool imported.
2012-04-28 00:21:54 INFO GenericSetup.browserlayer Browser layers imported
2012-04-28 00:21:54 INFO GenericSetup.resourceregistry KSS registry imported.
2012-04-28 00:21:54 ERROR GenericSetup Step zettwerk.ui.disable_sunburst_patch has an invalid import handler
2012-04-28 00:21:54 INFO GenericSetup.rolemap Role / permission map imported.
2012-04-28 00:21:54 INFO GenericSetup.toolset Class zettwerk.ui.tool.tool.UITool not found for tool portal_ui_tool
2012-04-28 00:21:54 ERROR Zope.SiteErrorLog 1335586914.990.0334188015457 http://localhost:8080/Plone/portal_quickinstaller/installProducts
Traceback (innermost last):
  Module ZPublisher.Publish, line 126, in publish
  Module ZPublisher.mapply, line 77, in mapply
  Module Products.PDBDebugMode.runcall, line 70, in pdb_runcall
  Module ZPublisher.Publish, line 46, in call_object
  Module Products.CMFQuickInstallerTool.QuickInstallerTool, line 575, in installProducts
  Module Products.CMFQuickInstallerTool.QuickInstallerTool, line 512, in installProduct
   - __traceback_info__: ('plone.app.theming',)
  Module Products.GenericSetup.tool, line 323, in runAllImportStepsFromProfile
   - __traceback_info__: profile-plone.app.theming:default
  Module Products.GenericSetup.tool, line 1080, in _runImportStepsFromContext
  Module Products.GenericSetup.tool, line 994, in _doRunImportStep
   - __traceback_info__: toolset
  Module Products.GenericSetup.tool, line 123, in importToolset
TypeError: 'NoneType' object is not callable
> /home/daniel/.buildout/eggs/Products.GenericSetup-1.6.3-py2.6.egg/Products/GenericSetup/tool.py(123)importToolset()
-> new_tool = tool_class(tool_id) 
```

我将 zettwerk.ui 放回 buildout.conf 中，然后错误消失了。但我认为解决方案并不干净。那么，我怎样才能从 buildout 中删除 zettwerk.ui 而不会出现问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T19:15:53.023

这已在 GenericSetup 1.6.5 中修复：http: [//pypi.python.org/pypi/Products.GenericSetup/1.6.5](http://pypi.python.org/pypi/Products.GenericSetup/1.6.5) 更新到该版本（包含在 Plone 4.1.4 中）应该可以解决问题。（目前最新的稳定版本是带有 GenericSetup 1.6.6 的 Plone 4.1.5，所以我会说去那个。）

说明：在安装过程中，zettwerk.ui 告诉 GenericSetup 它需要一个工具。然后创建此工具。在卸载过程中，该工具被删除，但它仍在所需工具列表中。如果 zettwerk.ui 已卸载但软件包仍在您的构建中并且您安装了另一个附加组件，则 GenericSetup 会查看所需工具的列表并再次创建此工具。当 zettwerk.ui 不可用时，这将失败并出现上述错误。在这种情况下，GenericSetup 1.6.5 只是打印一个警告并愉快地继续。

我认为 wildcard.fixpersistentutilities 在这种情况下不起作用，但我可能弄错了。出于某种原因，到目前为止我已经设法避免需要那个包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T18:43:46.563

有两种可能性。

首先，做一个备份:-)

最简单的，如果您重新安装的 zettwerk.ui 产品与您最初添加的版本不同，请尝试重新安装它。多年来，产品移除已经有了很大改进，现在很少有产品表现出这种行为。

如果您仍然有问题，请将产品添加`wildcard.fixpersistentutilities`到您的构建中，重新运行构建，然后导航到`/@@fix-persistent-utilities`您的站点，在该页面上查找引用的任何内容`zettwerk.ui`。去掉它。一旦那里没有更多引用，请删除 zettwerk.ui 产品。

实际上，还有第三种可能：为 zettwerk.ui 添加补丁以修复其卸载问题！

# php - 删除图像图标对齐

> ID：10364029
> 
> 赞同：1
> 
> 时间：2012-04-28T13:40:43.027
> 
> 标签：php, jquery, css, icons, fancybox

我想知道是否有人可以帮助我。

使用下面的脚本，我正在使用 fancyBox 创建一个图像库。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<html xmlns="http://www.w3.org/1999/xhtml">  
<head>  
  <title>Gallery</title>  
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />  
    <script type="text/javascript" src="fancybox/lib/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="fancybox/source/jquery.fancybox.js?v=2.0.6"></script>
    <script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-buttons.js?v=1.0.2"></script>
    <script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-thumbs.js?v=1.0.2"></script>
    <script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-media.js?v=1.0.0"></script>
    <link rel="stylesheet" type="text/css" href="fancybox/source/helpers/jquery.fancybox-thumbs.css?v=1.0.2" />
    <link rel="stylesheet" type="text/css" href="fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.2" />
    <link rel="stylesheet" type="text/css" href="fancybox/source/jquery.fancybox.css?v=2.0.6" media="screen" />

  <script type="text/javascript">  

            $('.fancybox').fancybox({
                openEffect  :   'elastic',
                closeEffect :   'elastic',

                padding :   20,
                fitToView   :   true,

                prevEffect :    'none',
                nextEffect :    'none',

                closeBtn  : false,
                arrows : false,

                helpers : {
                    title : {
                        type : 'inside'
                    },
                    buttons : {}
                },

                afterLoad : function() {
                    this.title = 'Image ' + (this.index + 1) + ' of ' + this.group.length + (this.title ? ' - ' + this.title : '');
                }
            });

</script> 

  <style type="text/css">
<!--
.style1 {
    font-size: 14px;
    margin-top: 5px;
    margin-right: 110px;
}
-->
  </style>  
</head>
<body style="font-family: Calibri; color:  #505050; margin-left: 240px; float:left;"/>
<div align="right" class="style1"> <a href = "javascript:document.gallery.submit()"/> Add Images <a/> &larr; View Uploaded Images </div> 
  <form id="gallery" name="gallery" class="page" action="index.php" method="post" style="margin-left: -120px; margin-right: 50px; border-left: 100;"> 

    <p>
      <?php for ($i = 0; $i < $descriptions->documentElement->childNodes->length; $i++) :  
                          $xmlFile = $descriptions->documentElement->childNodes->item($i);  
                          $name = htmlentities($xmlFile->getAttribute('originalname'), ENT_COMPAT, 'UTF-8');  
                          $description = htmlentities($xmlFile->getAttribute('description'), ENT_COMPAT, 'UTF-8');  
                          $source = $galleryPath . rawurlencode($xmlFile->getAttribute('source'));  
                          $thumbnail = $thumbnailsPath . rawurlencode($xmlFile->getAttribute('thumbnail'));  
                  ?>
                  <img src="cross.png" class="removeImage" alt="Remove this image" align="top"/> 
        <a class="fancybox" rel="allimages" title="<?php echo $name; ?>" href="<?php echo $source; ?>"><img src="<?php echo $thumbnail; ?>"alt="<?php echo $description; ?>" /></a>
      <?php endfor; ?>  
    </p>
</form>  
</body>
</html> 
```

通过本网站上的一些建议，我为每个图像添加了一个“十字”图标，最终将用于删除图像。

我对 jQuery 和样式表等非常陌生，但我想做的是将十字放在实际图像的左上角，而不是像当前显示在顶部的那样分区。我在此处包含了指向相关页面的 [链接](http://www.mapmyfinds.co.uk/development/testgallery.php)。

我很欣赏对于经验更丰富的开发人员来说，这可能是一件非常简单的事情，但正如我所说，我在上周才真正开始使用 jQuery 和 CSS 文件。

我只是想知道是否有人可以提供一些关于如何去做的指导。

非常感谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:14:36.227

## **演示** [http://jsfiddle.net/8B6Zy/](http://jsfiddle.net/8B6Zy/)

试试这个，非常干净和简单，使用 jQuery 和 CSS：

```
<html>
<head>
<title></title>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<style>
#del_icon {
    position:absolute;
    top:0;
    left:0;
    width:15px;
    height:15px;
    background:url('http://www.mapmyfinds.co.uk/development/cross.png');
    background-repeat : no-repeat;
    display:block;
    z-index:2;
    cursor:pointer;
    display:none;
}

.image {
    float:left;
    position:relative;
}

.image a {
    float:left;
    display:inline;
    position:relative;
    z-index:1;
}
</style>

<script>
$(document).ready(function(){

    $(".image").hover(function(){
        $(this).find("#del_icon").show();
    },
    function()
    {
        $(this).find("#del_icon").hide();
    });

});
</script>

</head>

<body>

<div class="image">
  <a href="del.php?id=1" id="del_icon"><span></span></a>
  <a href="http://www.mapmyfinds.co.uk/development/UploadedFiles/IRHM73/1/A-deer-in-Knole-Park-Seve-005.jpg"><img src="http://www.mapmyfinds.co.uk/development/UploadedFiles/IRHM73/1/A-deer-in-Knole-Park-Seve-005.jpg" alt="" width="150"/></a>
</div>

<div class="image">
  <a href="del.php?id=2" id="del_icon"><span></span></a>
  <a href="http://www.mapmyfinds.co.uk/development/UploadedFiles/IRHM73/1/Thumbnails/_47061196_greatbritainjpg.jpg"><img src="http://www.mapmyfinds.co.uk/development/UploadedFiles/IRHM73/1/Thumbnails/_47061196_greatbritainjpg.jpg" alt="" width="150"/></a>
</div>

<div class="image">
  <a href="del.php?id=3" id="del_icon"><span></span></a>
  <a href="http://www.mapmyfinds.co.uk/development/UploadedFiles/IRHM73/1/Thumbnails/Test_Pic_2.jpg"><img src="http://www.mapmyfinds.co.uk/development/UploadedFiles/IRHM73/1/Thumbnails/Test_Pic_2.jpg" alt="" width="150"/></a>
</div>

</body>

</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T14:00:41.800

您必须重新格式化您的 HTML 输出并添加额外的样式才能做到这一点。因此，对于`for`循环中的每个图像，请使用以下代码：

```
<div style="display: inline-block; position: relative;">
    <a class="fancybox" rel="allimages" title="<?php echo $name; ?>" href="<?php echo $source; ?>">
        <img src="<?php echo $thumbnail; ?>" alt="<?php echo $description; ?>">
    </a>
    <a href="#delete" style="position: absolute; left: 0; top: 0;">
        <img src="cross.png" class="removeImage" alt="Remove this image" align="top"> 
    </a>
</div> 
```

否则，您可以通过应用 CSS 类来做到这一点：

```
.myimage {
    display: inline-block;
    position: relative;
}

.cross {
    position: absolute;
    left: 0;
    top: 0;
} 
```

并将这些类添加到您的 HTML 标记中：

```
<div class="myimage">
    <a class="fancybox" rel="allimages" title="<?php echo $name; ?>" href="<?php echo $source; ?>">
        <img src="<?php echo $thumbnail; ?>" alt="<?php echo $description; ?>">
    </a>
    <a href="#delete" class="cross">
        <img src="cross.png" class="removeImage" alt="Remove this image" align="top"> 
    </a>
</div> 
```

# python - 如何更改存储在内存地址中的值？

> ID：10364032
> 
> 赞同：8
> 
> 时间：2012-04-28T13:41:29.670
> 
> 标签：python, memory

假设内存地址`0A7F03E4`存储一个值`124`。如何将其更改为`300`使用python？是否为此类任务提供了模块？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-28T13:56:31.820

```
>>> import ctypes
>>> memfield = (ctypes.c_char).from_address(0x0A7F03E4) 
```

现在你可以读取 memfield，分配给它，做任何你想做的事。当然，只要您可以访问该内存位置。

你也可以得到一个内存阵列

```
>>> memarray = (ctypes.c_char*memoryfieldlen).from_address(0x0A7F03E4) 
```

它为您提供了一个 memfields 列表。

更新：我刚刚读到你想检索一个整数。在这种情况下，当然使用 ctypes.c_int。一般来说：使用适当的 ctype ;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T13:53:12.443

您是否尝试过内置的 ctypes 模块？它提供了一个 memset 功能，应该可以满足您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T13:56:46.727

在 UNIX 上，您可以尝试对`open()`设备`/dev/mem`的物理内存进行访问，然后使用对象的`seek()`方法`file`将文件指针设置到正确的位置。然后使用该`write()`方法更改值。不要忘记将数字编码为原始字符串！

但是，通常只有`root`用户才能访问此设备。

# eclipse - 在 Eclipse 中从 Subversive 中注销用户

> ID：10364033
> 
> 赞同：2
> 
> 时间：2012-04-28T13:41:33.420
> 
> 标签：eclipse, subversive

在提交到存储库期间登录时，我愚蠢地检查了“记住设置”。我正在为 Eclipse 使用 Subversive 插件。我在我哥哥的电脑上工作，他也在做我的项目。我想知道他是否有机会登录，这样他就可以以自己的身份提交更改，而不是像我一样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T13:47:57.173

在定义存储库时，Subclipse 不会收集或存储用户名和密码凭据。这是因为 JavaHL 和 SVNKit 客户端适配器足够智能，可以在需要时提示您输入此信息——包括更改密码时。

您还可以允许适配器缓存此信息，一个常见的问题是如何删除此缓存信息以便再次提示您？我们有一个开放的请求，希望将一个 API 添加到 JavaHL，以便我们可以提供一个 UI 来执行此操作。目前，您必须手动删除缓存。缓存的位置因使用的客户端适配器而异。

JavaHL 将信息缓存在与命令行客户端相同的位置——在 Subversion 运行时配置区域中。在 Windows 上，它位于 %APPDATA%\Subversion\auth。在 Linux 和 OSX 上，它位于 ~/.subversion/auth。只需找到并删除包含缓存信息的文件即可。

SVNKit 在 Eclipse 密钥环中缓存信息。默认情况下，这是一个名为 .keyring 的文件，存储在 Eclipse 配置文件夹的根目录中。这两个值都可以用命令行选项覆盖。要清除缓存，您必须删除该文件。Eclipse 将在您重新启动时创建一个新的空密钥环。

此文本如果从[此处复制](http://subclipse.tigris.org/wiki/PluginFAQ#head-d507c29676491f4419997a76735feb6ef0aa8cf8)

您可以更喜欢从那里阅读它本身。

# c# - 如何计算 IEnumerable 的等级 并将其存储在类型 T

> ID：10364035
> 
> 赞同：0
> 
> 时间：2012-04-28T13:41:45.457
> 
> 标签：c#, closures, captured-variable

我想计算 IEnumerable 列表中元素的等级并将其分配给成员。但下面的代码仅在第一次调用时才有效。第二次调用从最后一个排名值开始。所以我得到的是 012 和 345 而不是输出 012 和 012

```
 class MyClass
    {
        public string Name { get; set; }
        public int Rank { get; set; }
    }

    public void SecondTimeRankEvaluvate()
    {
        MyClass[] myArray = new MyClass[] 
        {
            new MyClass() { Name = "Foo" },
            new MyClass() { Name = "Bar" },
            new MyClass() { Name = "Baz" }
        };

        int r = 0;
        var first = myArray.Select(s => { s.Rank = r++; return s; });

        foreach (var item in first)
        {
            Console.Write(item.Rank);
        }
        // Prints 012
        Console.WriteLine("");
        foreach (var item in first)
        {
            Console.Write(item.Rank);
        }
        // Prints 345
    } 
```

我知道该变量`r`在第二次调用时被捕获（关闭）并重用。我不想要那种行为。有什么干净的方法来计算排名并分配它吗？变量（在`r`实际代码中）也不在`foreach`存在循环的同一范围内。它在一个返回的函数中`var first`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T13:50:51.170

```
var first = myArray.Select((s, i) => { s.Rank = i; return s; }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T13:46:12.830

LINQ 使用惰性求值并在`Select`您每次使用`myArray`.

您可以通过将结果存储在`List`.

改变

```
var first = myArray.Select(s => { s.Rank = r++; return s; }); 
```

至

```
var first = myArray.Select(s => { s.Rank = r++; return s; }).ToList(); 
```

`myArray`另一种方法是使用`Zip`每次加入一个新序列，像这样

```
var first = myArray.Zip(Enumerable.Range(0, int.MaxValue), (s, r) =>
{
    s.Rank = r;
    return s;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T13:47:38.670

如果您不查询集合，则不应使用 LINQ。

要更新数组中的每个项目，请使用`for`循环：

```
for (int i = 0; i < myArray.Length; i++)
{
    myArray[i].Rank = i;
} 
```

要更新可枚举中的每个项目，请使用`foreach`循环：

```
int r = 0;
foreach (var item in myArray)
{
    item.Rank = r++;
} 
```

# ios - IOS 4.3.2 MapKit 注释

> ID：10364041
> 
> 赞同：0
> 
> 时间：2012-04-28T13:42:34.793
> 
> 标签：ios, mapkit

您好，我们正在开发一个应用程序，该应用程序在让注释正常运行时遇到了一些问题。该应用程序可以正常构建和安装...从 ipad 上的数据库中加载了大约 50k 个引脚...

问题是每个引脚在按下时都会显示相同的注释信息......无法弄清楚当按下引脚时如何让它引用正确的数据库字段（引脚都显示在正确的位置，所以我们知道它正在引用数据库）

我想这是这里的东西？

```
- (void) loadThePushPinInMap  {
NSString * filename= [[NSBundle mainBundle] pathForResource:@"geocoded" ofType:@"csv"];
NSString *data = [NSString stringWithContentsOfFile:filename];
NSString *strippedPartOne = [data stringByReplacingOccurrencesOfString:@"\"" withString:@""];
NSArray *rows = [strippedPartOne componentsSeparatedByString:@"\r"];
int size = [rows count];
for (int i =0; i < size; i++) {
    if(i==0)
        continue;
    // This is now the data being parse
    NSArray * line = [[rows objectAtIndex:i] componentsSeparatedByString:@","];

    double lat =[[[line objectAtIndex:5] stringByTrimmingCharactersInSet:[NSCharacterSet   whitespaceCharacterSet]] doubleValue];
    double lon =[[[line objectAtIndex:6] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]] doubleValue];

    //MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } }; 
    //region.center.latitude = lat ;
    //region.center.longitude = lon;
    //region.span.longitudeDelta = 0.01f;
    //region.span.latitudeDelta = 0.01f;

    CLLocationCoordinate2D coordinate;
    coordinate.latitude = lat;
    coordinate.longitude = lon;          

    MKPointAnnotation *annotation = [[MKPointAnnotation alloc] init];
    annotation.coordinate = coordinate;
    annotation.title = [rows objectAtIndex:0];
    annotation.subtitle = [rows objectAtIndex:4];

     //[_mapView addAnnotation:annotation]; 
    [self.mapView addAnnotation:annotation];

} 
```

}

这是 MKAnnotationsview 代码

```
#import <UIKit/UIKit.h>
#import <MapKit/MKFoundation.h>

// Post this notification to re-query callout information.
MK_EXTERN NSString * const MKAnnotationCalloutInfoDidChangeNotification;

#if (__IPHONE_4_0 <= __IPHONE_OS_VERSION_MAX_ALLOWED)

enum {
MKAnnotationViewDragStateNone = 0,      // View is at rest, sitting on the map.
MKAnnotationViewDragStateStarting,      // View is beginning to drag (e.g. pin lift)
MKAnnotationViewDragStateDragging,      // View is dragging ("lift" animations are complete)
MKAnnotationViewDragStateCanceling,     // View was not dragged and should return to it's    starting position (e.g. pin drop)
MKAnnotationViewDragStateEnding         // View was dragged, new coordinate is set and view   should return to resting position (e.g. pin drop)
};

typedef NSUInteger MKAnnotationViewDragState;

#endif // #if (__IPHONE_4_0 <= __IPHONE_OS_VERSION_MAX_ALLOWED)

@class MKAnnotationViewInternal;
@protocol MKAnnotation;

MK_CLASS_AVAILABLE(NA, 3_0)
@interface MKAnnotationView : UIView
{
@private
MKAnnotationViewInternal *_internal;
}

- (id)initWithAnnotation:(id <MKAnnotation>)annotation reuseIdentifier:(NSString     *)reuseIdentifier;

@property (nonatomic, readonly) NSString *reuseIdentifier;

// Classes that override must call super.
- (void)prepareForReuse;

@property (nonatomic, retain) id <MKAnnotation> annotation;

@property (nonatomic, retain) UIImage *image;

// By default, the center of annotation view is placed over the coordinate of the annotation.
// centerOffset is the offset in screen points from the center of the annotion view.
@property (nonatomic) CGPoint centerOffset;

// calloutOffset is the offset in screen points from the top-middle of the annotation view,    where the anchor of the callout should be shown.
@property (nonatomic) CGPoint calloutOffset;

// Defaults to YES. If NO, ignores touch events and subclasses may draw differently.
@property (nonatomic, getter=isEnabled) BOOL enabled;

// Defaults to NO. This gets set/cleared automatically when touch enters/exits during tracking  and cleared on up.
@property (nonatomic, getter=isHighlighted) BOOL highlighted;

// Defaults to NO. Becomes YES when tapped on in the map view.
@property (nonatomic, getter=isSelected) BOOL selected;
- (void)setSelected:(BOOL)selected animated:(BOOL)animated;

// If YES, a standard callout bubble will be shown when the annotation is selected.
// The annotation must have a title for the callout to be shown.
@property (nonatomic) BOOL canShowCallout;

// The left accessory view to be used in the standard callout.
@property (retain, nonatomic) UIView *leftCalloutAccessoryView;

// The right accessory view to be used in the standard callout.
@property (retain, nonatomic) UIView *rightCalloutAccessoryView;

// If YES and the underlying id<MKAnnotation> responds to setCoordinate:, 
// the user will be able to drag this annotation view around the map.
@property (nonatomic, getter=isDraggable) BOOL draggable NS_AVAILABLE(NA, 4_0);

// Automatically set to MKAnnotationViewDragStateStarting, Canceling, and Ending when necessary.
// Implementer is responsible for transitioning to Dragging and None states as appropriate.
@property (nonatomic) MKAnnotationViewDragState dragState NS_AVAILABLE(NA, 4_0);

// Developers targeting iOS 4.2 and after must use setDragState:animated: instead of   setDragState:.
- (void)setDragState:(MKAnnotationViewDragState)newDragState animated:(BOOL)animated    NS_AVAILABLE(NA, 4_2);

@end 
```

这是 Delegate.h 代码.....

```
#import "MapinAppDelegate.h"

@implementation MapinAppDelegate

@synthesize window = _window;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary    *)launchOptions
{
// Override point for customization after application launch.
return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
/*
 Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
 Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
 */
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
/*
 Use this method to release shared resources, save user data, invalidate timers, and store  enough application state information to restore your application to its current state in case it is terminated later. 
 If your application supports background execution, this method is called instead of  applicationWillTerminate: when the user quits.
 */
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
/*
 Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
 */
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
/*
 Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
 */
}

- (void)applicationWillTerminate:(UIApplication *)application
{
/*
 Called when the application is about to terminate.
 Save data if appropriate.
 See also applicationDidEnterBackground:.
 */ 
```

}

@结尾

这是 Delegate.m 代码....

```
#import <UIKit/UIKit.h>

@interface MapinAppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T13:53:52.027

使用仅由 MKAnnotation 继承的 CustomAnotaion，在该类中分配您自己的属性，如 locationDetails、locationImage 等。

要添加此信息，请通过实现此委托来更新您的 MKAnnotationView - (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id )annotation

示例：http: [//developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/LocationAwarenessPG/AnnotatingMaps/AnnotatingMaps.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/LocationAwarenessPG/AnnotatingMaps/AnnotatingMaps.html)

[http://www.highoncoding.com/Articles/805_Consuming_XML_Feed_and_Displaying_Public_Information_on_the_MapView_Control.aspx](http://www.highoncoding.com/Articles/805_Consuming_XML_Feed_and_Displaying_Public_Information_on_the_MapView_Control.aspx)

# android - ActionBarSherlock - 带有分隔线的操作栏自定义背景

> ID：10364045
> 
> 赞同：31
> 
> 时间：2012-04-28T13:42:43.780
> 
> 标签：android, actionbarsherlock

我正在实施[ActionBarsherlock](http://actionbarsherlock.com/)，我想更改操作栏背景。

我覆盖了属性，但蓝色分隔线消失了。如何使用带有蓝色分隔线的自定义背景？

```
<style name="Theme.MyTheme" parent="Theme.Sherlock.ForceOverflow">
    <item name="actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
</style>

<style name="Widget.MyTheme.ActionBar" parent="Widget.Sherlock.ActionBar">
    <item name="android:background">#ff3e3f3d</item>
    <item name="background">#ff3e3f3d</item>
</style> 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-06-13T01:04:03.630

对于（像我一样）不喜欢玩 9-patch 图像的任何人，您可以使用 xml drawable 在操作栏底部获取分隔线：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- Bottom Line -->
    <item>
        <shape android:shape="rectangle">
            <solid android:color="@color/action_bar_line_color" />
        </shape>
    </item>

    <!-- Color of your action bar -->
    <item android:bottom="2dip">
        <shape android:shape="rectangle">
            <solid android:color="@color/action_bar_color" />
        </shape>
    </item>
</layer-list> 
```

将此保存为 drawable/action_bar_background.xml，然后将其应用到您的主题中：

```
<style name="Widget.MyTheme.ActionBar" parent="Widget.Sherlock.ActionBar">
    <item name="android:background">@drawable/action_bar_background</item>
    <item name="background">@drawable/action_bar_background</item>
</style> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-20T12:43:24.237

[http://jgilfelt.github.io/android-actionbarstylegenerator/](http://jgilfelt.github.io/android-actionbarstylegenerator/)

该项目可用于生成您需要的 ActionBar 样式。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-28T17:31:41.357

默认情况下，蓝色分隔线是背景。这是一个 9-patch 可绘制对象，可确保线条始终出现在操作栏的底部，无论其高度如何。

对于您的情况，我会`.png`从 Android 复制默认背景，然后对其进行修改，以便 9-patch 的可扩展部分成为您的目标背景颜色。这将用您想要的颜色填充操作栏，同时保持底部的蓝色边框。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-29T13:47:07.243

只是 DanielGrech 提供的答案的更新。也可以在操作栏底部使用您自己的自定义图形。像这样：

```
 <?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- Bottom Line with custom graphic instead of a solid color-->
    <item android:drawable="@drawable/bar">
          <shape android:shape="rectangle"/>
    </item>

    <!-- Color of your action bar -->
    <item android:bottom="2dip">
        <shape android:shape="rectangle">
            <solid android:color="@color/action_bar_color" />
        </shape>
    </item>
</layer-list> 
```

# c++ - 这是 C++ 中有效的二维数组定义吗？

> ID：10364048
> 
> 赞同：5
> 
> 时间：2012-04-28T13:42:55.133
> 
> 标签：c++, pointers, multidimensional-array

我刚刚在 C++ 代码中看到了类似的东西（可以编译并且可能在 VS2010 中工作）：

```
int *p = new int[8, 6];
p[2, 3] = 5; 
```

这是在 C++ 中创建多维数组的新符号吗？还是我错过了什么？据我记得，在 C++ 中，数组是以 [a][b] 而不是 [a, b] 的方式声明的。如果您能解释此代码，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T13:44:46.660

这是有效的语法，但它没有指定二维数组。它使用[逗号操作符](http://en.wikipedia.org/wiki/Comma_operator)，所以它相当于：

```
int *p = new int[6];
p[3] = 5; 
```

# c++ - STL中迭代器的类型是什么？

> ID：10364050
> 
> 赞同：2
> 
> 时间：2012-04-28T13:43:05.633
> 
> 标签：c++, stl

c++ 中的每个变量都有一些类型，比如 in `int i`，`i`都有一个 type `int`。同样，我们在 STL 中有迭代器，我们声明它是这样的

```
 map<string,int>::iterator it . 
```

这里的类型是什么`it`？它是指针类型还是指针类型，因为我们通常尊重迭代器来获取与这些迭代器关联或指向的值，以防存储 int 或其他类型的向量。或者`*`STL 中的迭代器重载了运算符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T13:45:09.997

> 的类型是`it`什么？

`it`is的类型`map<string,int>::iterator`，它是一个重载了一堆运算符的类。

对于某些容器类型，`Container::iterator` *可能*是原始指针类型。因为`map`，它必须是一个类。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-28T13:51:52.583

24.2.1/1 [iterator.requirements.general] 总结得很好：

> 迭代器是指针的泛化，它允许 C++ 程序以统一的方式处理不同的数据结构（容器）。为了能够构建在不同类型的数据结构上正确有效地工作的模板算法，该库不仅形式化了接口，而且形式化了迭代器的语义和复杂性假设。

短语“指针的泛化”意味着指针*是*迭代器。`std::vector<T>::iterator`允许为 typedef `T *`。然而，大多数迭代器通过运算符重载来实现接口。（请注意，迭代器也不需要属于容器。）

这种语言是非常典型的 C++ 标准的编写方式。它描述了事物的行为方式，但避免根据基类定义接口。有多种迭代器：输入、输出、转发、双向和随机访问。每个都有不同的规范，虽然随机访问是双向接口的严格超集，但它们在 C++ 类型系统中完全不相关。

迭代器可以是任何具有`++`和`*`重载的类，以及`std::iterator_traits`. 有*一个*基类`std::iterator`可以`std::iterator_traits`用来定义必要的接口。这是 C++ 泛型编程和特征类的一个很好的案例研究。

# vim - 在 Vim 中按 Esc 后如何保留缩进

> ID：10364067
> 
> 赞同：18
> 
> 时间：2012-04-28T13:46:06.883
> 
> 标签：vim

我有`set autoindent`
我去一行，按 A 并`<CR>`让我到下一行并插入一个缩进。但是，如果我按 Esc，光标会跳到行首，并且缩进消失了。
我必须四处走动并按标签才能再次到达正确的位置。

我知道帮助说：

```
If you do not type anything on the new line except <BS> or CTRL-D and then type
<Esc>, CTRL-O or <CR>, the indent is deleted again. 
```

有没有办法禁用它，或者至少有一种解决方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-28T19:44:09.270

直到两天前我才遇到这个确切的问题。

没有办法禁用它，但幸运的是，您不需要这样做，因为相反**：**

**`S`使用或进入插入模式`cc`**。再次`S`进入插入模式 将进入具有适当缩进级别的插入模式，使得 Vim 删除缩进的事实变得不重要。

**注意：**我发现这个技巧在大多数地方都对我有用。但由于某种原因，它*不适*用于 Python 文件。我猜这与 Python 文件类型与它自己的缩进函数或类似的东西有关。

编辑：

另一个技巧，您可以定义 cpoptions ，如果您在带有缩进的行上并*移动 cursor*，它将保留缩进。这*不会*立即解决您的击球问题`Esc`，但它是一个可能也困扰您的相关问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-28T14:08:55.747

一个简单的方法是按'。（或任何字符），转义，然后按 x 删除字符。缩进应该保留。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-30T08:45:45.887

好吧，我想通了。

根据 Edan Maor 的回答，`S`或者`cc`应该以适当的缩进级别进入插入模式。
...除非它没有:)

这在两种情况下有效。

*   设置时`cindent`，它将根据 C 格式规则插入缩进
    这在编辑非 C 类文件时可能会很烦人。
*   什么时候`indentexpr`设置。

我发现最好的解决方案是让这是我的`.vimrc`

```
set autoindent
set indentexpr=GetIndent()

function GetIndent()
   let lnum = prevnonblank(v:lnum - 1)
   let ind = indent(lnum)
   return ind
endfunction 
```

现在，当我按`S`or时`cc`，它将插入与前一个非空行相同的缩进。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-10T07:21:17.053

考虑我使用 'o' 开始换行。我在 _vimrc 中添加以下配置（注意我有 ':set autoindent'）

```
" ugly hack to start newline and keep indent
nnoremap o ox<BS>
nnoremap O Ox<BS> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-28T18:37:52.057

键入您的文本，然后`==`在该行中按正常模式

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-06T23:50:19.117

值得注意的是，使用适当的插件`S`并且`cc`似乎再次正常工作。很可能是 python-mode 正在解决这个问题。

[https://github.com/klen/python-mode](https://github.com/klen/python-mode)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-21T02:49:02.327

我本来想达到同样的效果，但是因为我希望[显示缩进的插件](https://github.com/Yggdroot/indentLine)能够正常工作。这是我的解决方法：我发现`<enter>`在正常模式下几乎没用。它只会将光标向下移动一行，这可以通过`j`.

所以我在我的`.vimrc`：

```
nmap <cr> o.<c-h><esc> 
```

每当我需要一个空行来缩进时，我都会使用它`<enter>`。

# javascript - 如何使用 PHP 将 utf-8 编码的 json 保存到 .txt 文件中

> ID：10364072
> 
> 赞同：2
> 
> 时间：2012-04-28T13:46:22.337
> 
> 标签：javascript, php, jquery, json, encoding

我试图在服务器上保存一些数据，但发现一些编码问题。

这就是我将对象发送到 PHP 的方式（效果很好，但我认为 contentType 实际上并没有做任何事情）：

```
$.post(
  'myfile.php',
   {
       contentType: "application/x-www-form-urlencoded;charset=utf-8",
       data : myData
   },
   function (data, textStatus, jqXHR){
      //some code here
   }
); 
```

然后在 PHP (myfile.php) 中：

```
<?php
   header('Content-Type: text/html; charset=utf-8');

   $file = 'data/theData.txt'; //the file to edit
   $current = file_get_contents($file); // Open the file to get existing content
   $a2 = json_decode( $current, true );

   $data = $_POST['data']; //the data from the webpage

   $res = array_merge_recursive( $data, $a2 );

   $resJson = json_encode( $res );

   // Write the contents back to the file
   file_put_contents($file, $resJson);
?> 
```

如您所见，我正在获取文件的原始内容并解码 json。然后我将结果与从网页发送的数据合并，然后在 json 中重新编码并将内容放回原处。

这一切都按预期工作。然而，在我的 Jquery 中的某一时刻，发送的数据包含各种各样的符号，例如“/ö é ł Ż ę”

保存文件时，每个“/”前面都有一个转义字符“\”，同样，“é”例如是“\u00e9”

我该如何覆盖这个？我应该尝试在 PHP 中正确转换它，还是在我有 $.get('data/theData.txt' 之后在 JQuery 中转换回正确格式？

非常感谢您对这个问题的任何了解！请原谅可怜的变量名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T23:13:29.033

@chalet16 提供的链接有所帮助，但如果 JSON_UNESCAPED_UNICODE 对您不起作用，那么它就可以了！

```
$myString = $json_encode($myObject); 
//After initially encoding to json there are escapes on all '/' and characters like ö é ł Ż ę

//First unescape slashes:
$myString = str_replace("\/","/",$myString);

//Then escape double quotes
$myString = str_replace('"','\\"',$myString);

//And Finally:
$myNewString = json_decode('"'.$myString.'"'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T17:48:24.953

如果你使用 PHP >=5.4.0，你可以在 json_encode 函数中使用 JSON_UNESCAPED_UNICODE 选项。请查看[php.net: json_encode](http://php.net/manual/en/function.json-encode.php)了解更多详情。

对于 PHP < 5.4.0，在同一页面上的用户贡献注释中有一些关于如何执行此操作的注释，但不确定它是否可以正常工作。

# client - 通知客户端浏览器有关服务器上的更改

> ID：10364075
> 
> 赞同：0
> 
> 时间：2012-04-28T13:46:47.427
> 
> 标签：client, webserver, real-time, notify

我正在尝试制作一个简单的类似聊天的应用程序，每个用户都可以在其中共享数据。当其中一个正在发送内容时，我需要以某种方式使用新数据实时更新所有客户端。有没有办法做到这一点，也许是网络服务器或 smt ？适用于apache的东西？对于客户端页面，我使用 ajax 将数据发送到服务器和 PostgreSQL 数据库来存储数据，但是我知道如何“告诉”客户端他们需要“刷新”客户端浏览器，因为 1 个客户端向服务器发送了新数据。

提前谢谢你，丹尼尔！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T13:49:09.267

我不知道您使用的是什么技术，所以我建议您看看这项服务[http://pusher.com/](http://pusher.com/)。它们是一项付费服务​​，可为您提供所需的功能。如果您提供有关您的技术的更多信息，我们可以提供更好的帮助。

# java - print 的执行顺序

> ID：10364079
> 
> 赞同：8
> 
> 时间：2012-04-28T13:47:04.850
> 
> 标签：java, string, printing

该程序给出输出 -

```
A 1 2 
```

它不应该给出输出吗？

```
1 A 2 
```

因为首先 ai 应该打印 1 然后 a.getI() 执行并且应该打印 A 2

```
public class A1{

     int i=1;

     public int getI(){
          System.out.print("A ");
          return i+1;
     }

     public static void main(String args[]){
          A1 a=new A1();
          System.out.print(a.i+" "+a.getI());
     }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-28T13:50:07.380

在这个表达式中：

```
a.i+" "+a.getI() 
```

首先评估对的调用`a.getI()`，然后通过连接`a.i`加号形成字符串`a.getI()`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-28T13:55:28.167

JVM 做的第一件事就是构造字符串。所以从这里开始：

```
a.i + " " 
```

这是首先完成的。现在，我们有`"1 "`. 接下来它处理这个：

```
"1 " + a.getI() 
```

为了缝合这两个部分，将执行该方法以知道将什么缝合在一起。所以，现在输入方法：

```
System.out.print("A ");
return i+1; 
```

执行第一个打印语句。`"A "`打印到控制台（**1**）。现在该方法返回`i + 1`，即`2`。这意味着我们有这个：

```
"1 " + "2" 
```

这是`"1 2"`。此时字符串构建完成，因此将其传递给`println()`. 现在`"1 2"`打印到控制台。（**2**）

如您所见，首先是 ( **1** ) 执行，然后是 ( **2** )。因此，在控制台中，这会导致：

```
A 1 2 
```

# date - Now() - 仅显示月份和日期 - Microsoft Access

> ID：10364088
> 
> 赞同：2
> 
> 时间：2012-04-28T13:48:02.477
> 
> 标签：date, ms-access

当我在 Access: Now() 中使用此函数时，它返回：27-04-2012 10:03:09

我怎样才能制作一个只显示月份和日期的函数：27-04

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T14:13:48.453

示例：表中的字段是 DOB，然后您需要它仅输出日和月。所以你需要选择数据类型日期/时间，然后你应该格式是字段属性和一般选项卡，然后像这样输入：dd-mmmm

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T15:29:31.683

如果您正在寻找一个以日-月格式返回日期的函数，那么您可以执行以下操作：

```
Public Function test()
    Dim testdate As String
    test = Format(Day(Now()), "00") & "-" & Format(Month(Now()), "00")
End Function

Result:
29-04 
```

如果你想在查询中使用日期格式，你可以这样做：

```
select (Format(Day(Now()), "00") & "-" & Format(Month(Now()), "00")) as DayMonth
From yourtable 
```

或者

```
select (Format(Now(), "dd-mm")) as DayMonth
From yourtable 
```

# php - 需要将照片上传添加到我现有的 mySQL 脚本

> ID：10364089
> 
> 赞同：0
> 
> 时间：2012-04-28T13:48:10.950
> 
> 标签：php, mysql, image, upload, blob

我需要为插入到 mySQL 的每条记录上传一张照片。我已经制作了一个基本的插入脚本。我将如何修改我现有的脚本，以便我可以在每个记录插入中包含一个图像。图像可以是任何形状或大小。很简单。我为照片简化了表格。任何帮助，将不胜感激。

我在根目录中为照片创建了一个文件夹，名为：“照片”。

```
<?
$order = "INSERT INTO reg_add (connect_date, 
   reg, 
   first_name, 
   last_name)

VALUES

('$_POST[connect_date]', 
     '{$_POST[reg]}nv', 
     '$_POST[first_name]', 
     '$_POST[last_name]')";

$new_image = 'photos/'.basename( $_FILES['image']['name']);
    if(move_uploaded_file($_FILES['image']['tmp_name'], $new_image)) {
        // The images was uploaded
  } else{
header("location: reg_add_fail_IMAGE.php"); 
}

$result = mysql_query($order);
?> 
```

形式：

```
<form id="form_register" method="POST" action="reg_add.php">

   <input class="req-string bx short" type="text" name="connect_date" id="connect_date">
   <input type="hidden" name="MAX_FILE_SIZE" value="100000">
   <input class="req-string bx long caps" type="text" name="reg" id="reg">
   <input class="req-string bx long" type="text" name="first_name">
   <input class="bx long" type="text" name="last_name">

   Choose a image to upload: <input name="image" type="file">
   <input id="rbSubmit" class="rb2 rbSubmit" type="submit" value="submit">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T14:18:18.703

首先，您不能使用上传图片`<textarea>`

**HTML**

```
<form action="savedata.php" method="POST" enctype="multipart/form-data">
    <input type="hidden" name="MAX_FILE_SIZE" value="100000" />
    Choose a image to upload: <input name="image" type="file" /><br />
    <input type="submit" value="Submit" />
</form> 
```

请注意，重要的是您包含`enctype="multipart/form-data`，以便图像与表单一起发送。

**PHP** 当带有 FILE 的表单被发送到 PHP 脚本时，该文件存储在服务器上的一个临时位置，并且该变量`$_FILE`可用。这个变量保存了关于这个文件的信息，临时名称和真实名称，大小等。

您需要做的是将上传的图像移动到您希望放置的目录：

```
// This will be the location for the image
$new_image = 'photos/'.basename( $_FILES['image']['name']);

if(move_uploaded_file($_FILES['image']['tmp_name'], $new_image)) {
   // The images was uploaded
} else{
    // The image failed to upload
} 
```

现在您可以保存`$new_image`到数据库以供参考图像位置。

**您应该考虑的几件事**

*   检查是否存在文件名已存在的文件
*   如果每个数据库行最多有 1 个图像，您可以使用数据库中的 id 命名图像`INSERT`为此，您需要先插入数据，然后`$id = mysql_insert_id();`在 INSERT 查询之后立即使用最后一个插入 id。然后将其合并到变量“$new_image”中

# buildr - buildr 生成文件夹结构

> ID：10364092
> 
> 赞同：0
> 
> 时间：2012-04-28T13:48:34.027
> 
> 标签：buildr

我开始使用 Apache buildr。据我了解，我总是必须自己创建默认文件夹结构（src/main/java 等）？有没有办法让建造者替我做这份工作？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T05:47:50.923

*   使用 Maven 2 原型生成
*   从项目目录运行 Buildr。它看到 pom.xml 并询问您是否要从中创建基本的 Buildr 脚本。
*   运行“buildr eclipse”生成 .classpath 和 .project
*   在 Eclipse 中，从文件系统中的现有项目导入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T17:10:09.260

buildr 只是一个构建工具，它并不意味着生成原型或构建网站。

但你是对的，有时你需要生成一个新项目，所以我写了一个小 shell 脚本（[你可以在这里找到要点](https://gist.github.com/jpcaruana/774597)）。

下面是它的工作原理 ：

```
$ ./createBuildrProject.sh jptest
Please answer '1' to the next question
To use Buildr you need a buildfile. Do you want me to create one?:
1\. From directory structure
2\. Cancel
?  1
Created /home/jp/src/perso/774597/jptest/buildfile
(in /home/jp/src/perso/774597/jptest, development)
Building jptest
Compiling jptest into /home/jp/src/perso/774597/jptest/target/classes
Compiling jptest:test into /home/jp/src/perso/774597/jptest/target/test/classes
Completed in 2.130s
./createBuildrProject.sh: ligne 17 : cd: jptest: Aucun fichier ou dossier de ce type
(in /home/jp/src/perso/774597/jptest, development)
Generating Eclipse project for jptest
Writing /home/jp/src/perso/774597/jptest/.classpath
Writing /home/jp/src/perso/774597/jptest/.project
Completed in 0.025s 
```

输出目录是这样的：

```
$ tree jptest/
jptest/
├── buildfile
├── reports
│   └── junit
│       └── last_successful_run
├── src
│   ├── main
│   │   └── java
│   │       └── Empty.java
│   └── test
│       └── java
│           └── EmptyTest.java
└── target
    ├── classes
    │   └── Empty.class
    ├── jptest-1.0.0.pom
    └── test
        └── classes
            └── EmptyTest.class

11 directories, 7 files 
```

希望这可以帮助。

# c - GDB 中的数组错误（用 C 编写）

> ID：10364093
> 
> 赞同：1
> 
> 时间：2012-04-28T13:48:38.050
> 
> 标签：c, arrays, debugging

我正在尝试查找数组元素的内存位置。该功能基本上是这样的（在C中）：

```
int function(struct MyStruct *s)
{
    char myArray[16];

    printf("\n");
    printf("\n");
    gets(myArray);
    return strcasecmp(s->a,guess);
} 
```

根据在线 GDB 指南，我应该能够执行“x myArray”或“x myArray[0]”或“p myArray”或“p myArray[0]”来查看元素或内存位置。我在函数和获取处设置断点（并一直持续到获取断点），但是当我尝试 GDB 命令时，我得到“没有这样的文件”。我还尝试使用“b 15”在数组和“b 16”处设置断点。但我仍然遇到同样的错误。为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T17:44:12.947

> "break main, break function, break gets, break 15 (这没用), break 16 (没用), run, s (直到我到达gets断点), x myArray, x myArray[0] , p myArray, p myArray[0]"

你*做错了*。

当你到达`gets`断点时，你会在*里面* `gets`停下来。

在那里，`myArray`变量是不可见的——它在 inside `function`，而不是 inside `gets`。

你也不能`break 15`在里面`gets`，因为你没有调试信息`libc`（这是`gets`实现的地方）。

你想要做的是`finish`从断点开始`gets`（这会让你回到`function`）。*现在*您应该可以查看`myArray`, 或`break 15`等。

# r - R ts( ) 函数指定在一天内收集了超过 10 分钟间隔的数据

> ID：10364099
> 
> 赞同：1
> 
> 时间：2012-04-28T13:48:45.617
> 
> 标签：r, time-series, stat

我在 10 分钟的时间间隔内在一天内的数据语料库中观察到词频。数据看起来像这样：

```
word 00:00:00 00:11:00 00:22:00 00:33:00 . . . .  23:17:00 23:28:00 23:39:00
Robert  10       20        22       32   . . . .   10        11        10
Harvey  12       35        12       12   . . . .   15        26        9 
```

我想使用 R 为这些数据生成一个时间序列对象。我知道 ts() 函数可用于生成时间序列对象，我可以在其中指定开始年份和时间间隔为月或季度。例子：

```
ts(data, frequency=12, start=c(1946,1)) 
```

但是，我不知道如何使用 ts() 来指定在一天内以 10 分钟的时间间隔收集数据。有什么线索吗？

此外，如您所见，我的数据在标题中有时间信息。可以用来在 R 中生成时间序列对象吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T13:56:28.747

简而言之，您的主要选择是

1.  使用`ts()`，但请阅读帮助页面并确定您可以使用`frequency=` *或* `deltat=`。由于您的数据频率实际上是有规律的，您可以尝试类似`deltat=24*60/11`. [查看您的数据，这似乎是 11 分钟，而不是您的问题标题所暗示的 10 分钟。] `ts()`如果您想拟合 ARIMA 类模型，这很有用。

2.  使用[zoo](http://cran.r-project.org/package=zoo)包及其`zooreg`类，并查看包 vignettes 中的文档。我发现[动物园](http://cran.r-project.org/package=zoo)更容易使用。

# javascript - 小 jQuery 脚本在 IE8 中不起作用

> ID：10364100
> 
> 赞同：2
> 
> 时间：2012-04-28T13:48:50.900
> 
> 标签：javascript, jquery, internet-explorer

我为电子商务网站编写了一个小脚本，如果不满足某些条件，该脚本会出错。现在我正在尝试编写一些东西，以便继续按钮将用户返回到他们的购物车。我无法更改按钮以添加课程。

问题是这个脚本在 IE 中不起作用。我不太熟悉浏览器处理 JavaScript 的差异。有没有人有任何想法？

```
 <script type="text/javascript">
            jQuery("#shipping-method-buttons-container .button").wrap(function() {
               var link = jQuery('<a/>');
                link.attr('href', 'http://mywebsite.com/checkout/cart/');
               return link;
            });
        </script> 
```

更新：我已经在 IE9 和 IE10 中对此进行了测试。我在所有 IE 浏览器中都遇到了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:57:42.103

你可以试试这个：

```
 $("#shipping-method-buttons-container .button").click(function(){
     window.location = "http://mywebsite.com/checkout/cart/"
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T14:03:09.307

This is working in IE and others

```
jQuery(function(){
    jQuery("#shipping-method-buttons-container .button").wrap(function() {
        var link = jQuery('<a></a>').attr('href', 'http://mywebsite.com/checkout/cart/');
        return link;
    });
}); 
```

[**Example.**](http://jsfiddle.net/heera/S2YJX/3/)

# entity-framework - 无法将类型“int”隐式转换为类别

> ID：10364105
> 
> 赞同：1
> 
> 时间：2012-04-28T13:48:57.380
> 
> 标签：entity-framework, ef-code-first

这是我的模型

```
public class Category
{
  public int CategoryId { get; set; }
  public string Description { get; set; }
  public Category Parent { get; set; }
  public ICollection<Category> Children { get; set; }
} 
```

映射：

```
modelBuilder.Entity<Category>()
        .HasMany(x => x.Children)
        .WithOptional(y => y.Parent)
        .Map(m => m.MapKey("ParentId")); 
```

这是我向其中添加数据的方法：

```
 var a = new List<Category>
 {
   new Category { Description = "Animals" }
   new Category { Description = "Dog", Parent = 1 } <<<-ERROR
 }
 a.ForEach(s => context.Categories.Add(s));
 context.SaveChanges(); 
```

如何将第一行的 CategoryId 添加到第二行？？？

抱歉，我认为这是一个非常基本的问题，但我不知道该怎么做

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:53:33.243

您不能使用 1，因为 1 是整数，而不是 Category 类型。您需要在列表声明之外声明类别并稍后将其添加到列表中：

```
List<Category> list = new List<Category>();
Category a = new Category();
Category b = new Category(){ Parent = a};

list.Add(a);
list.Add(b); 
```

请注意，这只是我编写的一些代码，我没有测试它，但你明白了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T15:35:28.377

另一种方式：

```
Category a = new Category();
Category b = new Category();

a.Children.Add(b);

context.Categories.Add(a);
context.SaveChanges(); 
```

它为您完成 ID 的连接。（这也是未经测试的。）

# php - symfony2 中 curl 的命名空间

> ID：10364112
> 
> 赞同：2
> 
> 时间：2012-04-28T13:49:47.753
> 
> 标签：php, symfony

symfony2 中 curl 的命名空间是什么？它给出了致命错误：调用未定义的函数 curl_init()

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T13:52:31.320

似乎没有启用 curl 支持 - 检查您的 php.ini

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T17:53:24.910

PHP 用简单的函数调用 CURL。如果您在 php.ini 中启用了 'php_curl' 扩展，则正常调用 curl 应该没有问题。但是对于 PHP 的某些配置（我不记得是什么），我被建议在 [like \curl_init();] 之前使用反斜杠

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-10T18:43:20.167

bowser 和控制台有两个 php.ini 文件。确保在两者中都启用了 php_curl。这发生在我开发控制台脚本时。这必须肯定有效。

# javascript - javascript中如何区分全局拖动和局部拖动？

> ID：10364118
> 
> 赞同：0
> 
> 时间：2012-04-28T13:50:38.720
> 
> 标签：javascript, jquery, javascript-events

我有一个无序列表，我希望它可以作为一个整体上下拖动（**全局拖动**）。对于这个列表中的每个项目，我希望它可以单独左右拖动（**本地拖动**）。但似乎这两种拖动有时会相互干扰。

为了避免这种情况，我使用了一个变量来指示它是否是全局拖动。当 mousemove 事件被触发时，如果它上下移动是全局拖动，我会设置这个变量`true`。并且会`false`在 mouseup 事件触发时设置。对于本地拖动，每次检测到mousemove事件时，都会先检查这个变量是否存在`true`，只有当这个变量为'false'时才会起作用。

但似乎我的方法没有按预期工作。我发现每次触发 mousemove 事件，都会立即被全局拖动和局部拖动回调函数捕获。所以在这种情况下，在我在全局拖动回调函数中设置这个变量之前，本地拖动回调函数就已经启动了。它没有以这种方式工作。

所以我想知道是否有人可以为我提供更可靠和合理的方法来解决这个问题？提前非常感谢。

# javascript - 在游戏加载时显示广告

> ID：10364122
> 
> 赞同：14
> 
> 时间：2012-04-28T13:51:01.077
> 
> 标签：javascript, jquery, css

我环顾互联网，一直在寻找一个可以在显示实际加载屏幕的同时加载 Flash 内容/游戏的脚本，但我总是收到一些答案：

1.  无法使用 Javascript 显示实际加载。
2.  您只能通过将动作脚本添加到 Flash 文件来做到这一点，也许他们正在谈论 FLA
3.  你为什么不显示一个假的加载屏幕，它出现并显示几秒钟然后消失（这种屏幕最烦人的是他们首先让用户加载 15 秒然后闪光灯开始加载，如果它仍然开始加载那 15 秒这是值得的，这很好但让他们等待双倍真的很糟糕）

但最后我找到了我一直在寻找的东西。一个基于 Jquery 的脚本，显示实际加载（也显示广告）并使用 swf 对象与 Flash 内容对话。它真的很棒，因为它不需要您对 FLA 进行更改，它只是纯粹的外部环境处理。所以现在问题出现了，那么问题是什么。那么问题是这个脚本是为像素制作的，如果你使用宽度和高度来表示以像素为单位的闪存，它可以工作，而我不能使用像素，因为我正在使用 %ages （这样用户可以选择全屏显示按 f11)。

如您所见，我希望该脚本与 %ages 一起工作，这是我的问题，但正如我之前提到的，我没有立即来到这里，我在过去几个月的 14 个论坛中一直在寻求帮助（实际上是在乞求）当然有些好人仍然存在有些人帮助我达到了某个点（但它没有解决问题）所以现在我将提供一些标记：

这是我正在谈论的脚本的链接[http://www.balloontowerdefense.net/jquery-preloader/jquery-preloader.html](http://www.balloontowerdefense.net/jquery-preloader/jquery-preloader.html)（这是该脚本创建者的链接）

这是工作示例的链接（基于像素的闪存） [http://www.balloontowerdefense.net/jquery-preloader/example.html](http://www.balloontowerdefense.net/jquery-preloader/example.html)

有人在这里帮助了我，但它在 1 个月前没有用。该人告诉我，我应该更改名为 Preroll 的插件，首选的更改是这些

修改插件以使用用户提供的单位而不是像素。为此，您需要修改插件中的两个函数，applygameiframe 和 showgame。

```
applygameiframe should be changed to:

var applygameiframe = function() {
  var gc = '#'+settings.gameframe;
  var iframe = $('<iframe />').attr({
    "id": settings.gameid,
    "src": settings.swf,
    "frameborder": 0,
    "scrolling": "no",
    "marginwidth": 0,
    "marginheight": 0
  }).css({
    "height":'settings.height
    "width": settings.width
  });
  $(gc).append(iframe);
  return true;
};

showgame should be changed to:

var showgame = function() {
    var ac   = '#' + settings.adframe;
    var game = '#' + settings.gameframe;
    $(ac).hide();
    $(game).css({
    "width": settings.width,
    "height": settings.height
    });
}; 
```

一旦进行了这些更改，内联 CSS 应该设置为您提供的任何参数（即 100%、50em 等）。

我对 Preroll 插件进行了如上所述的更改，之后这就是我得到的[http://files.cryoffalcon.com/MyFootPrint/fullscreen.html](http://files.cryoffalcon.com/MyFootPrint/fullscreen.html)

现在，如果您让游戏加载（当加载屏幕出现时）一切都做得很好，除了最后，游戏没有出现，它加载但是当它应该跳过并使游戏出现时出现问题。（作为参考，您可以在这里看到这个链接[http://www.balloontowerdefense.net/jquery-preloader/example.html](http://www.balloontowerdefense.net/jquery-preloader/example.html)加载完成然后游戏出现）

有人可以解决这个问题吗？

注意：很抱歉没有提供 JsFiddle，但由于我以 5KBps 的速度住在阿富汗，所以这对我来说是不可能的。

我没有提供构成整个演示页面的 HTML、CSS 和 JS，因为我认为这会使问题变得很长，但如果您认为我应该提供，请在评论中告诉我。

我尽力使问题与相关标记更相关，但如果我遗漏了什么，我会尽力编辑并再次提供给您。

*作为一名会计师，我尽力使用程序员的术语，编码是我的激情，但我仍处于学习 JS 阶段*

更新：在这里解决问题后，您现在可以看到一切都很好。[http://files.cryoffalcon.com/MyFootPrint/newfullscreen.html](http://files.cryoffalcon.com/MyFootPrint/newfullscreen.html)
信用：去找回答这个问题的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:07:20.777

这似乎只是一个纯粹的 css 问题。您正在尝试将宽度设置为 100%，而其父级`div.gamewrapper`没有宽度或高度。这就是为什么大小为 0 并且不会显示的原因。

您需要应用的技巧是将以下内容添加到您的样式中：

```
html, body, .gamecontent {
    height: 100%;
    width: 100%;
} 
```

**更新：** 另外，从 中删除`float: left;`，`.gamecontent .game`并添加 1px 的宽度和高度，使其变为：

```
.gamecontent .game {
    margin:0px auto 0px auto;
    padding:0px;
    overflow:hidden;
    width : 1px;
    height : 1px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:33:36.563

好吧，在您的链接上玩了一个半小时的[Bloons](http://files.cryoffalcon.com/MyFootPrint/fullscreen.html)之后（我的未受影响的工作量可以验证这一点），我觉得可以肯定地说全屏功能完全按照我的预期工作。我正在使用 Chrome 18.0.x。

我的经验是：点击链接，游戏加载。加载程序需要大约 2 秒的时间才能完成，然后才出现“单击此处显示游戏”按钮。之后，一个广告出现了 10 秒，然后我点击“播放”，它直接进入了游戏。据我所知，全屏工作正常，但当我离开全屏时，游戏并没有重新调整大小——底部被切断了。

我知道这不能回答您的问题，但也许问题仅存在于某些浏览器中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T16:02:10.980

我发现在 FF 中问题似乎是 100% 的高度和宽度。我将脚本稍微更改为：

```
$(game).css({
"width": window.innerWidth,
"height": window.innerHeight
}); 
```

现在游戏在FF中正确显示。

# android - 在接听前断开呼叫时关闭活动（未接来电）

> ID：10364129
> 
> 赞同：1
> 
> 时间：2012-04-28T13:51:50.513
> 
> 标签：android, broadcastreceiver

我设计了一个应用程序来拦截来电，然后在加载默认来电屏幕后，我会加载屏幕的活动以在默认活动的滑块（覆盖半透明背景）上显示接听/拒绝按钮。从功能的角度来看，一切正常，但是当我无法接听电话并且基本上有未接来电时，默认屏幕会关闭，但我的覆盖按钮（我的活动）保持打开状态，我必须按回 /主页按钮摆脱那些。

有什么方法可以在我的活动打开时检查呼叫是否已断开，然后再接听然后自行关闭，以便用户返回到他上次使用的屏幕（或主屏幕）？

请建议。感谢 Omkar Ghaisas

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:27:12.053

我通过在我的活动中注册一个接收器，然后根据呼叫 dicsonnect 广播，我在我的活动上调用完成（）来退出它，如果呼叫已经被呼叫方断开，我可以接受/ 拒绝它。

# android - android：如何从gps获取位置？

> ID：10364132
> 
> 赞同：0
> 
> 时间：2012-04-28T13:52:40.623
> 
> 标签：android, locationmanager

我有一个按钮，单击它需要从 gps 获取用户当前位置。

我可以在没有 LocationListener 的情况下做到吗？因为我只需要在点击操作后才能获得位置，而且我不需要一直通过 onLocationChanged 吃电池。可能吗？

我试过了，但有错误

```
public void goToHomePoint(View v){
    LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);  
    Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
    Toast.makeText(getApplicationContext(), String.valueOf(location.getLatitude()) + " " + String.valueOf(location.getLongitude()), Toast.LENGTH_SHORT).show();
} 
```

在清单中

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

错误

```
04-29 12:01:39.696: E/AndroidRuntime(252): Uncaught handler: thread main exiting due to uncaught exception
04-29 12:01:39.716: E/AndroidRuntime(252): java.lang.IllegalStateException: Could not execute method of the activity
04-29 12:01:39.716: E/AndroidRuntime(252):  at android.view.View$1.onClick(View.java:2031)
04-29 12:01:39.716: E/AndroidRuntime(252):  at android.view.View.performClick(View.java:2364)
04-29 12:01:39.716: E/AndroidRuntime(252):  at android.view.View.onTouchEvent(View.java:4179)
04-29 12:01:39.716: E/AndroidRuntime(252):  at android.view.View.dispatchTouchEvent(View.java:3709)
04-29 12:01:39.716: E/AndroidRuntime(252):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
04-29 12:01:39.716: E/AndroidRuntime(252):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
04-29 12:01:39.716: E/AndroidRuntime(252):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
04-29 12:01:39.716: E/AndroidRuntime(252):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
04-29 12:01:39.716: E/AndroidRuntime(252):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
04-29 12:01:39.716: E/AndroidRuntime(252):  at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
04-29 12:01:39.716: E/AndroidRuntime(252):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
04-29 12:01:39.716: E/AndroidRuntime(252):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
04-29 12:01:39.716: E/AndroidRuntime(252):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-29 12:01:39.716: E/AndroidRuntime(252):  at android.os.Looper.loop(Looper.java:123)
04-29 12:01:39.716: E/AndroidRuntime(252):  at android.app.ActivityThread.main(ActivityThread.java:4363)
04-29 12:01:39.716: E/AndroidRuntime(252):  at java.lang.reflect.Method.invokeNative(Native Method)
04-29 12:01:39.716: E/AndroidRuntime(252):  at java.lang.reflect.Method.invoke(Method.java:521)
04-29 12:01:39.716: E/AndroidRuntime(252):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-29 12:01:39.716: E/AndroidRuntime(252):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-29 12:01:39.716: E/AndroidRuntime(252):  at dalvik.system.NativeStart.main(Native Method)
04-29 12:01:39.716: E/AndroidRuntime(252): Caused by: java.lang.reflect.InvocationTargetException
04-29 12:01:39.716: E/AndroidRuntime(252):  at com.artox.relax.inf.MapViewActivity.goToHomePoint(MapViewActivity.java:141)
04-29 12:01:39.716: E/AndroidRuntime(252):  at java.lang.reflect.Method.invokeNative(Native Method)
04-29 12:01:39.716: E/AndroidRuntime(252):  at java.lang.reflect.Method.invoke(Method.java:521)
04-29 12:01:39.716: E/AndroidRuntime(252):  at android.view.View$1.onClick(View.java:2026)
04-29 12:01:39.716: E/AndroidRuntime(252):  ... 19 more
04-29 12:01:39.716: E/AndroidRuntime(252): Caused by: java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T01:26:08.167

我正在尝试的这段代码似乎对我有用，它与您的代码相同，但 getSystemService 的参数是`Context.LOCATION_SERVICE`

```
LocationManager manager = (LocationManager) getSystemService(Context.LOCATION_SERVICE );

Location location = manager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

double lat = location.getLatitude();

double lon = location.getLongitude(); 
```

也就是说，它似乎获得了一个一次性的位置，尽管该位置可能是旧的/过时的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T14:40:12.267

您可以编写一个 LocationListener，但是当您第一次收到一个位置时，如果准确度是您想要的和东西，那么您可以从 LocationManager 中删除相同的侦听器`removeUpdates`。您甚至可以在等待位置时使用进度对话框，并在您有足够好的位置以删除位置侦听器时将其关闭。

# linux - 阻止 Perl 的 `tie` 在我的串行接口上 重置我的 Arduino/脉冲 DTR

> ID：10364136
> 
> 赞同：2
> 
> 时间：2012-04-28T13:52:59.263
> 
> 标签：linux, perl, serial-port, device, arduino

在 Perl 下，在 Linux 上打开 Serial::Device 作为文件会重置我的 Arduino，但我不希望它被重置。Arduino可以通过脉冲DTR复位，因此打开串口设备必须默认脉冲DTR。

我的问题是：如何防止我的 Arduino 被重置（DTR 被脉冲）？

这个最小的代码重置了我的 Arduino：

```
use Device::SerialPort;
use Symbol qw( gensym );
my $handle = gensym();
my $PortName = '/dev/ttyUSB1';
my $PortObj = tie( *$handle , "Device::SerialPort" , $PortName ) or die "Cannot open serial port: $!\n";
# At this point the Arduino is being reset. 
```

我知道这只是通过使用`PortObj = new Device::SerialPort ($PortName, $quiet, $lockfile);`方法打开设备来完成，但我不能使用该方法，因为我无法检查串行缓冲区中是否有数据等待。在我的程序中，测试数据等待是一项硬性要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T15:56:32.857

您需要更改端口的 termios 设置中的 HUPCL 位。这将一直持续到其他东西改变它（我已经看到同一个发行版的不同版本默认它不同）

参见 man termios 和 man stty

以下 shell 命令*可能*有效 - 未经测试：

```
stty -F /dev/ttyUSB1 -hupcl 
```

# c# - wpf 中的 System.Drawing 替代方案？

> ID：10364139
> 
> 赞同：0
> 
> 时间：2012-04-28T13:53:12.793
> 
> 标签：c#, wpf, image, xaml, stream

嗨，我在从 wcf 休息服务加载位图图像时遇到了一个小问题：

```
 public Image GetImage(int width, int height)
    {
        string uri = string.Format("http://localhost:8000/Service/picture/{0}/{1}", width, height);
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);

        using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
        {
            using (Stream stream = response.GetResponseStream())
            {
                return new Bitmap(stream); //no System.Drawing.Bitmap class in wpf?
            }
        }
    } 
```

似乎没有用于 wpf 的 System.Drawing 类，那么我该如何解决这个问题？与此相关的另一个问题是如何设置源：

```
image1.Source = GetImage(image1.Height, image1.Width); //best overload for this line
// also not sure if source would be correct? 
```

在 Windows 窗体中，您可以这样做：

```
pictureBox1.Image = GetImage(pictureBox1.Height, pictureBox1.Width); 
```

哪个工作正常，但 wpf 显然必须让我无休止！

我真的希望在这里可以做一些简单的事情？

```
 <GroupBox Height="141" HorizontalAlignment="Left" Name="groupBox1" VerticalAlignment="Top" Width="141" BorderBrush="#FFA3A3A3" Background="#37000000" Margin="1,21,0,0">
            <Image Name="image1" Stretch="Fill"/>
        </GroupBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:11:17.993

WPF 不应该惹恼你。它甚至更容易。

```
 <GroupBox Height={Binding Height}" Width="{Binding Width"}>
        <Image Source="{Binding MyImageUrl}" />
    </GroupBox> 
```

您的视图模型可能类似于

```
public class ImageViewModel : INotifyPropertyChanged 
{
    public string ImageUrl
    {
        get
        {
            return "your url here";
        }
    }

    public double Width
    {
        get { return "required width"; }
    }

    public double Height
    {
        get { return "required height"; }
    }
} 
```

当然你需要实现 INotifyPropertyChanged。

# c - code::blocks 可以调试代码但不能运行它

> ID：10364141
> 
> 赞同：0
> 
> 时间：2012-04-28T13:53:23.607
> 
> 标签：c, debugging, codeblocks

我有使用 Allegro 5 库的 C99 项目。当我调试没有断点的代码时，它会成功运行，但是当我简单地运行它时，它会崩溃。

我预计代码中有一些内存泄漏（我知道 valgrind。）但是为什么我的程序的行为如此不同？

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:57:47.007

您使用的是哪个操作系统？以及您发现什么类型的崩溃。有时崩溃是由于内部函数而不是 code::blocks 本身的问题。此外，在 Code::Blocks 中使用 (Extra Warning) 进行编译`-Wextra`以查看所有警告

# xcode - XCode 4.3 剪贴板中的文本自动在 TextView 中输入

> ID：10364142
> 
> 赞同：2
> 
> 时间：2012-04-28T13:53:27.833
> 
> 标签：xcode, text, view, clipboard, simulator

我在 iPhone 模拟器和 iPhone 设备上找不到有关剪贴板的一些信息……我有一个 textView，当我输入 textView 时，我想查看剪贴板中的文本。我希望有人能帮助我。

最好的问候约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T13:56:26.420

也许看看[UIPasteboard 类参考](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIPasteboard_Class/Reference.html)

# java - 在 Java 中，不可序列化的套接字是否必须阻止使用客户端-服务器观察者模式？

> ID：10364150
> 
> 赞同：2
> 
> 时间：2012-04-28T13:54:09.297
> 
> 标签：java, sockets, serialization, client-server

在我的 Java Sockets 程序中，我实现了客户端-服务器观察者模式。也就是说，服务器主体将其服务器事件发布给已订阅服务器的客户端观察者。这就是理论。

实际上，我无法通过套接字发送客户端观察者来订阅服务器。出现的错误是：“java.io.NotSerializableException：java.net.Socket。” 我认为这意味着 Java 抱怨客户端观察者包含一个 Socket，众所周知，它不是可序列化的。

但是，Socket 是客户端和服务器之间的通信手段！

当客户端似乎包含不可序列化的路障时，如何实现客户端-服务器观察者模式？

这是一个代码概述，可让您了解正在发生的事情：

服务器

```
public class Server implements ServerSocketPublisher {

    // traditional Observer publisher methods implemented here, such as register, 
    // deregister, notifySubscribers

    // ServerSocket implemented here. Waiting on accept()

} 
```

客户

```
public class Client implements ClientSocketSubscriber, Serializable {

    // traditional Observer subscriber methods implemented here, i.e. updateClient

    Socket connectingSocket = null; //I SUSPECT THIS VARIABLE IS THE PROBLEM

    try {
         connectingSocket = new Socket();
         // set SocketAddress and timeout
         connectingSocket.connect(sockAddr, timeout)
         if (connectingSocket.isConnected()) {
             ObjectOutputStream oos = new ObjectOutputStream     
                  (connectingSocket.getOutputStream());
             oos.writeObject(this); // THIS LINE THROWS THE ERROR in STACKTRACES
             oos.flush();
             oos.close();
         }
    } catch (/*various exceptions*/) {
    }
    // close connectingSocket
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T14:02:45.873

您有几种方法可以解决此问题：

1.  将您的套接字标记为瞬态

    瞬态套接字连接Socket = null;

2.  而不是实现[Serializable](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)实现[Externalizable](http://docs.oracle.com/javase/6/docs/api/java/io/Externalizable.html)然后在您的读写对象实现中忽略 Socket。

除此之外，您还应该阅读

关于瞬态：

1.  [发布在 SO](https://stackoverflow.com/questions/910374/why-does-java-have-transient-variables)

关于外部化：

1.  [Javabeat](http://www.javabeat.net/examples/2007/08/21/using-the-externalizable-interface/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T14:07:13.220

您不能将客户端写入输出流套接字，因为它包含一个套接字。如果你序列化客户端，你会序列化其中的所有非瞬态变量，这就是你得到异常的时候。

但是，服务器端已经有套接字，因此您不需要发送它和客户端。如果一旦连接发生，所有客户端都是观察者，那么您几乎可以在此时开始等待来自客户端套接字的数据。服务器将需要保留一个准备广播的套接字列表，当它收到要发送的事件时，循环遍历所有套接字并发送注册、注销、通知订阅者消息

或者，如果您希望将客户端视为服务器端的对象并在其上调用方法（看起来您可能正在尝试这样做），也许您需要查看 RMI - 服务器保存客户端的存根和调用存根向客户端发送消息。

# javascript - 防止操作画布时无响应

> ID：10364151
> 
> 赞同：0
> 
> 时间：2012-04-28T13:54:33.023
> 
> 标签：javascript, canvas

我想将一个大图像拆分为多个较小的图像，然后对这些较小的图像执行一些数据操作。第二部分很好，因为我可以将数据传递给网络工作者，但是图像的分割使用画布（所以没有网络工作者），并且在运行时使页面的其余部分无响应。

这实际上不是问题，除非加载动画暂停，使其毫无意义。

在不冻结 GUI 的情况下执行图像分割画布操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T02:20:15.073

一次简单地使用`getImageData`较小的矩形，你会变得更好。

确定合适的尺寸需要一些时间，但首先尝试 200x200 和 400x400。

您甚至可以在处理完图像的每 5/10/15/20% 后更新加载动画。

# c - 用于 qsort 的指针转换

> ID：10364153
> 
> 赞同：5
> 
> 时间：2012-04-28T13:55:20.407
> 
> 标签：c, pointers, casting

这个代码片段是从我正在阅读的一本书中手工复制的：

```
/* scmp: string compare of *p1 and *p2 */
int scmp(const void *p1, const void *p2)
{
        char *v1, *v2;
        v1 = *(char **) p1; 
        v2 = *(char **) p2; 

        return strcmp(v1, v2);
} 
```

此函数与 qsort 一起用于对字符串数组进行排序。我不明白的一点是，为什么`v1 = *(char **) p1;`不只是`v1 = (char *) p1;`或什至不会这样做；`v1 = p1;`? 我猜编译器应该自动对该分配进行类型转换。甚至，考虑一下：

```
/* scmp: string compare of *p1 and *p2 */
int scmp(const void *p1, const void *p2)
{
        return strcmp(p1, p2);
} 
```

我认为（我可能大错特错）编译器应该进行类型转换，`p1`因为它是预期的。`p2``char *``strcmp(char *, char *)`

总而言之，问题是为什么`v1 = *(char **) p1`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T13:59:39.097

`qsort`向比较函数传递一个指向它必须比较的元素的指针；因为在 C 中没有模板，所以这个指针只是被粗暴地转换为 a `const void *`（`void *`在 C 中只是意味着“这是某种指针”，并且要在它上面做一些事情，你必须将它转换回它的实际类型）。

现在，如果要对字符串数组进行排序，则必须比较的每个元素都是`char *`; 但是将指向每个元素的*指针*`qsort`传递给比较函数，因此您收到的实际上是 a （指向字符串第一个字符的指针的指针），因为比较函数的签名如此说明，所以转换为 a 。*`scmp``char **``const void *`*

 *因此，要获取您的`char *`，您必须首先将参数转换为其实际类型（`char **`），然后取消引用此指针以获取`char *`您要比较的实际值。

（尽管从 const 正确性的角度来看，转换为 会更正确`const char **`）*

# android - 在升级时创建表

> ID：10364154
> 
> 赞同：2
> 
> 时间：2012-04-28T13:55:21.687
> 
> 标签：android, sqlite

我一直在努力做到这一点，但我不知道我错过了什么。我有一个 android 应用程序，我希望再添加 1 个表。但是我做不到，我也没有例外（不喜欢这些沉默的杀手！！）。

下面是我的代码我的 SQLiteHelper 类

```
public class DbCreator extends SQLiteOpenHelper {

public DbCreator(Context context) {

    super(context, Constants.DB_NAME, null, Constants.NEW_VERSION);//NEW_VERSION=2

    this.myContext = context;
}

//Rest of code

//Checks if DB is present and create if reqd.
public void createDataBase() throws IOException {

    boolean dbExist = checkDataBase();
    if (dbExist) {
        // do nothing - database already exist
    } else {

        // By calling this method and empty database will be created into
        // the default system path
        // of your application so we are gonna be able to overwrite that
        // database with our database.
        this.getReadableDatabase();

        try {

            copyDataBase();

        } catch (IOException e) {

            throw new Error("Error copying database : " + e);

        }
    }

}

    //Check DB is present
    private boolean checkDataBase() {

    SQLiteDatabase checkDB = null;

    try {
        String myPath = Constants.DB_PATH + Constants.DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY);

    } catch (SQLiteException e) {
        Log.v("DB", "No DB");
        // database does't exist yet.

    }

    if (checkDB != null) {

        checkDB.close();

    }

    return checkDB != null ? true : false;
}

/**
 * Copies your database from local assets-folder to the just created
 * empty database in the system folder, from where it can be accessed and
 * handled. This is done by transfering bytestream.
 * */
private void copyDataBase() throws IOException {

    // Open your local db as the input stream
    InputStream myInput = myContext.getResources().openRawResource(
            R.raw.diary_database);

    // Path to the just created empty db
    String outFileName = Constants.DB_PATH + Constants.DB_NAME;

    // Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    // transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }

    // Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();

}

    //**This is the problem area
    @Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Constants.log(TAG, "Upgrading started..."+db.getVersion() );
    if (db.getVersion() == Constants.OLD_VERSION) {
            db.beginTransaction();
        Constants.log(TAG, "Upgrading started...transaction");
        db.execSQL("create TABLE Thought(  StartDate DATETIME, Content TEXT, EndDate DATETIME, Title TEXT )");
        db.setVersion(Constants.NEW_VERSION);//NEW_VERSION=2
            db.endTransaction();
        Constants.log(TAG, "Upgrading started...transaction finished");

    }

} 
```

最糟糕的是，当我在控制台上执行此操作时，我看到所有日志都在发生，甚至查询也成功运行。

* * *

编辑

我的数据库没有更新：-

我已经从模拟器中提取了我的数据库，甚至看到了版本号中的日志。没有改变。我在我的活动中使用下面的行来查看数据库版本。

```
DbCreator dbCr = new DbCreator(this);
SQLiteDatabase myDataBase = dbCr.getMyDatabase();
Constants.log(TAG, "Db Version : "+myDataBase.getVersion()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T15:19:57.593

我强烈建议您切换到[`SQLiteAssetHelper`](https://github.com/jgilfelt/android-sqlite-asset-helper)，它已经制定了整个应用程序包中的数据库模式。

从战术上讲，您没有提交交易。多语句交易的正确配方是：

```
try {
  db.beginTransaction();

  // do SQL here

  db.setTransactionSuccessful();
}
finally {
  db.endTransaction();
} 
```

没有`setTransactionSuccessful()`调用，`endTransaction()`会做一个`ROLLBACK`.

# html - 使用 CSS 定位弹出框

> ID：10364155
> 
> 赞同：0
> 
> 时间：2012-04-28T13:55:22.733
> 
> 标签：html, css, twitter-bootstrap, popover

我有一个这样的弹出窗口；当用户将鼠标悬停在第一张图片上时，他会在弹出框上看到第二张图片。

`<img src="myimage.jpg" rel="mypop" data-content="&lt;img src=&quot; otherimage.jpg &quot;&gt;">`

我在脚本标签中使用它

`$("[rel=mypop]").popover({ placement:'right', html : true });`

一切正常图片在页面中间。但是如果用户将鼠标悬停在**页面上方或下方**的图像上，他就看不到正确的图像。

为了解决这个问题，我想我必须使用 CSS。

```
<style type="text/css">
    img[rel="mypop"] {
    }
</style> 
```

但我找不到要写入 CSS 样式的内容以在适当的位置显示用户弹出框。

我希望用户在不与页面的任何部分发生冲突的情况下看到弹出框。

[![](../Images/a5710849133e77f3eb7bcf482c780137.png)](https://i.stack.imgur.com/bfe16.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:00:55.657

我为此使用了[Twitter Bootstrap 弹出框。](http://twitter.github.com/bootstrap/javascript.html#popovers)但我发现，使用 popover（用于显示图像）是不合适的。所以现在我使用 Colorbox 来显示这种数据。

# eclipse - 如何使用 Aptana 插件在 Eclipse 中调用 python 代码片段？

> ID：10364159
> 
> 赞同：0
> 
> 时间：2012-04-28T13:55:38.717
> 
> 标签：eclipse, keyboard-shortcuts, aptana, code-snippets

我了解，Eclipses Aptana 插件带有一些预定义的模板，例如

```
def ${method}(${param}):${cursor} 
```

我如何调用它们？常规的`CTRL+SPACE`似乎不起作用。

**编辑**：我发现，例如打字`def`和打`CTRL+SPACE`后记是行不通的。但是`CTRL+SPACE`先点击会显示一个下拉菜单，我可以`def`通过滚动从中选择。此外，可以在下拉菜单中开始输入以“导航”到`def`. 这是它的本意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:23:29.330

例如，如果您想为函数的定义调用“自动完成”并且您键入了`def` `CTRL+SPACE`什么也不做。

但是，如果您点击`CTRL+SPACE`然后键入`def`，您可以通过点击回车来选择片段！

显然适用于每个（python/aptana）片段。

# javascript - javascript 对象文字 - 对象创建

> ID：10364161
> 
> 赞同：1
> 
> 时间：2012-04-28T13:55:53.413
> 
> 标签：javascript, object, literals

我正在尝试创建一个对象，其中某些属性依赖于其他先前定义的属性，同时尝试依赖对象文字。否则，我正在尝试完成以下代码（这是不正确的）：

```
var mesh = {
            offset   : $('#mesh').offset(),
            position : $('#mesh').position(),
            height   : win.height - this.offset.top - 12,   
            width    : win.width - this.offset.left - 12,   
            limits   : {}
        } 
```

与此类（有效）相反：

```
var mesh = {};
        mesh.offset   = $('#mesh').offset();
        mesh.position = $('#mesh').position();
        mesh.height   = win.height - mesh.offset.top - 12;  
        mesh.width    = win.width - mesh.offset.left - 12;
        mesh.limits = {}; 
```

所以我的问题很简单：第一个代码块实际上有什么问题，我该如何纠正它以便根据先前定义的属性创建这些新属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T13:57:59.057

没有引用当前构建的对象字面量的名称。您需要使用第二种形式，或者在可以引用的变量中包含值：

```
var offset = $('#mesh').offset();
var mesh = {
    offset   : offset,
    position : $('#mesh').position(),
    height   : win.height - offset.top - 12,   
    width    : win.width - offset.left - 12,   
    limits   : {}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T14:04:26.827

你可以创建一个构造函数

```
var Mesh = function(mesh_id){
    var mesh = $(mesh_id);
    this.offset = mesh.offset();
    this.position = mesh.position();
    this.height = win.height - this.offset.top - 12;
    this.width = win.width - offset.left - 12
    this.limits = {}

}; 
```

然后像这样使用它

```
var myMesh = new Mesh('#mesh') 
```

*请注意，此代码假设定义了一些变量 win。您可能已将其定义为`var win = $(window)`

# java - 一个基于 Apache Lucene 的 DAO？

> ID：10364162
> 
> 赞同：1
> 
> 时间：2012-04-28T13:55:59.763
> 
> 标签：java, architecture, lucene, hibernate-search, compass-lucene

我正在构建一个带有后端 RESTful Web 服务的 Web 应用程序。

我的一个表几乎是独立的，即仅从另一个表引用的行以一种我可以在没有连接的情况下愉快地生活并且只在需要时通过主键获取的方式引用。然而，这个表包含很多行，并且针对它执行的搜索都尖叫“Lucene”。MySQL 无法以合理的响应时间处理这些查询。

所以我想使用 Lucene 来搜索这个表。过去我广泛使用 Solr，因此我熟悉概念和术语。我在想，鉴于上述情况，而不是 SQL 到 Lucene 索引同步，我看不出为什么我不应该简单地使用 Lucene 作为这个特定实体的规范存储。基本上我想要一个“Lucene DAO”实现来替换这个特定表的当前 Hibernate DAO 实现。

所以我的问题是：

1.  有什么理由我应该避免这种情况并坚持 SQL-to-index 同步？
2.  如果“Lucene DAO”是一种可行的方法，那么是否有任何库可以为类似的东西提供基础？我试图搜索但找不到任何东西。
3.  我遇到过[Hibernate Search](http://www.hibernate.org/subprojects/search.html)它只完成了我正在寻找的一半，但我可以尝试将其仅用于搜索。有没有人有使用 Hibernate Search 的经验？

* * *

**编辑**：我现在遇到了[Compass](http://www.compass-project.org/docs/2.2.0/reference/html/introduction.html)，一眼看去似乎就是我要找的东西。有没有人有这方面的经验？

* * *

**编辑#2**：Compass 已经停产并被 ElasticSearch 取代，这并不完全相同（服务而不是组件）。Hibernate Search 也不是我想要的。底线是这是一种有效的方法，但目前必须自己实现这样的 DAO。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T13:59:56.720

我会为这个用例放弃 SQL 并直接使用 Lucene，没有追逐者。

您使用 Lucene 的查询将更加丰富：n-grams 而不是 LIKE。

# php - 如何记录特定查询？

> ID：10364166
> 
> 赞同：1
> 
> 时间：2012-04-28T13:56:26.437
> 
> 标签：php, mysql

是否可以记录特定查询？

我在一场比赛中遇到了一些意外退出的比赛。匹配可以退出的唯一方法是，如果 UPDATE 查询将“matchStatus”的值连续设置为 2。是否可以记录所有执行此操作的查询？在这种情况下，你是怎么做的？

例如

```
$query = "UPDATE active_matches SET matchStatus = '2' WHERE match_id='$match_id'"; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T14:00:58.227

在您的`my.conf`文件中添加该行

`log = /var/log/mysql/someLog.log`

重新启动 mysqld，您将在此处放置这些查询的日志。

稍后您可以根据需要从日志文件中简单地 grep 值：

`grep 'UPDATE active_matches' someLog.log`使用 *UPDATE active_matches* 匹配所有行并输出，显然，如果您想检查其他任何内容，您可以更改模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T14:18:52.293

另一种解决方案，实现起来稍微复杂一些，但可能更适合您的需求，也可能不适合您的需求，它是创建一个日志表，触发器在执行此类更新查询时将条目插入其中：

```
CREATE TABLE AugitLog (
  `Timestamp`  TIMESTAMP,
  `User`       VARCHAR(16),
  `Host`       VARCHAR(255),
  `MatchID`    INT
);

DELIMITER ;;

CREATE TRIGGER audit_match_termination AFTER UPDATE ON active_matches FOR EACH ROW
IF OLD.matchStatus <> 2 AND NEW.matchStatus = 2 THEN
  INSERT INTO AuditLog VALUES (
    NOW(),                          -- timestamp
    SUBSTRING_INDEX(USER(),'@', 1), -- username
    SUBSTRING_INDEX(USER(),'@',-1), -- hostname
    NEW.match_id                    -- the match that was terminated
  );
END IF;;

DELIMITER ; 
```

# javascript - 在电子邮件验证中使用 jQuery 更改框颜色？

> ID：10364172
> 
> 赞同：1
> 
> 时间：2012-04-28T13:56:48.593
> 
> 标签：javascript, jquery, html, jquery-validate

我有一个输入框，用于测试框中的电子邮件是否有效。这是脚本：

```
$("#myform").validate({
  rules: {
    field: {
      required: true,
      email: true
    }
  }
}); 
```

这会测试电子邮件。我也有这个脚本，它可以通过向表单添加另一个类来改变颜色。

`$("#myform").toggleClass("othercolor");`

我只是不确定将这段代码放在哪里。很抱歉刚刚对 jQuery 提出新问题。谢谢=D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:01:42.193

[**这是一个演示......（更新）**](http://jsfiddle.net/sajaraki/UANdt/)

看起来您可能正在使用[jQuery 验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)。假设您是，您只需要通过`$("#myform").validate()`在页面加载时执行来初始化表单验证（例如，通过从 调用它`$(document).ready()`）。

```
$(document).ready(function(){
  $("#myform").validate();
}); 
```

​ 如果您想在焦点离开电子邮件字段时应用 CSS 类，您可以执行以下操作：

```
var validator = null;
$(document).ready(function(){
    validator = $("#myform").validate({
      rules: {
        cemail: {
          required: true,
          email: true
        }
      }
    });

    $("#cemail").blur(function() {
        if (validator.form()) {
            $("#myform").addClass("othercolor");
        }
        else {
            $("#myform").removeClass("othercolor");
        }
     });
});​ 
```

`validator.form()`如果表单有效，则返回 请注意， .toggleclass() 不会在这里做你想做的事；您需要根据`validator.form()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T14:34:23.163

为什么不将它添加到 jQuery 中的成功回调中：

```
$("#myform").validate({
rules: {
field: {
  required: true,
  email: true
}
},

success: function(){
$(this).toggleClass('red');    
}

}); 
```

# python - 无法在python中创建线程

> ID：10364173
> 
> 赞同：1
> 
> 时间：2012-04-28T13:56:57.990
> 
> 标签：python, multithreading, sockets, client

我有以下代码比较用户输入

```
import thread,sys
if(username.get_text() == 'xyz' and password.get_text()== '123' ):
   thread.start_new_thread(run,()) 

def run():
  print "running client"
  start = datetime.now().second
  while True:
    try:
        host ='localhost'
        port = 5010
        time = abs(datetime.now().second-start)
        time = str(time)
        print time
        client = socket.socket()
        client.connect((host,port))
        client.send(time)
    except socket.error:
        pass 
```

如果我只是调用函数 run() 它可以工作，但是当我尝试创建一个线程来运行这个函数时，由于某种原因线程没有被创建并且 run() 函数没有被执行我找不到任何错误..

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T15:23:25.527

你真的应该使用`threading`模块而不是`thread`.

你还在做什么？如果你像这样创建一个线程，那么无论线程是否仍在运行，解释器都会退出

例如：

```
import thread
import time

def run():
    time.sleep(2)
    print('ok')

thread.start_new_thread(run, ()) 
```

--> 这会产生：

```
Unhandled exception in thread started by 
sys.excepthook is missing
lost sys.stderr 
```

然而：

```
import threading
import time

def run():
    time.sleep(2)
    print('ok')

t=threading.Thread(target=run)
t.daemon = True  # set thread to daemon ('ok' won't be printed in this case)
t.start() 
```

按预期工作。如果您不想让解释器等待线程，只需在生成的线程上设置 daemon=True*。

*编辑：在示例中添加

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T15:20:57.210

`thread`是一个低级库，你应该使用[threading](http://docs.python.org/library/threading.html)。

```
from threading import Thread
t = Thread(target=run, args=())
t.start() 
```

# gradle - 构建 Roofline Tool 时出现 IOException。为什么？

> ID：10364174
> 
> 赞同：1
> 
> 时间：2012-04-28T13:56:58.043
> 
> 标签：gradle

我目前在尝试运行屋顶线时遇到以下错误。如果你们中的任何人都可以帮助我在我的新环境中启动并运行它会很好吗？

bravegag@bravegag-MacBookPro:/opt/roofline/tool$ ./gradlew

FAILURE：构建失败并出现异常。

*   出了什么问题：无法打开任务工件状态缓存（/opt/roofline/tool/.gradle/1.0-milestone-8/taskArtifacts）。

    > java.io.IOException：没有这样的文件或目录

构建失败

==> 您必须对您尝试构建的目录具有写入权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T18:26:37.543

您必须对尝试构建的目录具有写入权限

# silverlight - SilverLight：如何在堆栈面板中心和右侧对齐按钮

> ID：10364178
> 
> 赞同：0
> 
> 时间：2012-04-28T13:57:32.570
> 
> 标签：silverlight, silverlight-4.0

在我的 SilverLight 控件的底部“行”（在 StackPanel 内部，水平方向？）我想显示两件事：

1.  “保存”按钮 - 居中对齐
2.  带有小文本（版本类型）的文本字段 - 向右对齐

怎么做？如果我将两者都放在 stackpanel 内，它们的对齐方式将是相同的......包装面板只需将它们绑在一起......

请指教。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T14:19:30.793

在您的堆栈面板中创建一个包含 2 列的网格，然后独立对齐每列。

```
<StackPanel x:Name="Layout" Background="Black">
    <Grid>
       <Grid.ColumnDefinitions>
           <ColumnDefinition Width="2*"></ColumnDefinition>
           <ColumnDefinition Width="2*"></ColumnDefinition>
       </Grid.ColumnDefinitions>
        <Label Name="Left" HorizontalAlignment="Left" grid.column=1/>
        <Button x:Name="Button2" Content="And me!" HorizontalAlignment="Center" ></Button>
    </Grid>
</StackPanel> 
```

没有完美的语法，但它只是为了展示这个想法。

希望这可以帮助！

# python - Python：解析命令行

> ID：10364180
> 
> 赞同：1
> 
> 时间：2012-04-28T13:57:54.257
> 
> 标签：python, parsing

我正在用 python 编写一个 CLI 应用程序，它是通过一种相当复杂的命令行语言来使用的。这个想法与可以说具有相同属性的 find(1) 非常相似。

目前，解析器完全是使用手工制作的 EBNF 描述语言手写的。问题是这种语言使用起来非常尴尬，因为我必须将所有东西都写成 python 结构。我也觉得我的程序由于解析的原因仍然过于臃肿。

是否有任何具有易用性和用于命令行解析的真实描述语言（输入为字符串/文档）的库？从语法树中，我想直接将每个项目映射到一个类实例。自然，我不想要标记器，或者至少标记器必须直接从命令行参数映射到标记。

感谢所有建议！

*更新*：我的程序的重点是生成对象并将它们通过任意数量的过滤器（可能是不纯/有效的操作），这些过滤器可能会或可能不会再次输出对象，甚至可能输出另一种类型的对象。总体思路显然是从 find(1) 中收集到的。一个示例命令行是：

```
~/picdb.py -sqlselect 'select * from pics where dirname like "testdir%"' -tagged JoSo  -updateFromFile [ -resx +300 -or -resX +200 -resY +500 ] -printfXml '<jpegfile><src>%fp</src><DateTimeOriginal>%ed</DateTimeOriginal><Manufacturer>%eM</Manufacturer><Model>%em</Model></jpegfile>%NL' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T17:37:13.950

这是一个非常棘手的问题...您可以很容易地使用 argparse 将操作“绑定”到命令行参数（例如，创建一个类，对先前创建的类进行操作...）。这是一个愚蠢的例子......（参数--foo创建一个对象，参数--bar修改由--foo创建的对象）。

```
from argparse import ArgumentParser,Action

class Foo(object):
    def __init__(self,*args):
        self.args=args
    def __str__(self):
        return str(self.args)

class FooAction(Action):
    def __call__(self,parser,namespace,values,option_string=None):
        setattr(namespace,self.dest,Foo(*values))  #Add Foo to the options...
class BarAction(Action):
    def __call__(self,parser,namespace,values,option_string=None):
        FooObj=getattr(namespace,'foo')  #raises an error if foo isn't in namespace...
                                         #In this way, BarAction is like a filter on the
                                         #object created by foo.
        FooObj.args=tuple(list(FooObj.args)+list(values)) #append to the list of args.

parser=ArgumentParser()
parser.add_argument('--foo',nargs='*',action=FooAction,help="Foo!")
parser.add_argument('--bar',nargs='*',action=BarAction,help="Bar! : Must be used after --foo")

namespace=parser.parse_args("--foo Hello World --bar Nice Day".split())
print (namespace)
print (namespace.foo) 
```

但是，这与您的略有不同，因为`-argument`使用 argparse 是不可能的，只有`-a`or `--argument`。这对你来说可能已经是一个交易破坏者了，我不确定......

下一个困难是处理括号......`[`和`]`。如果您可以将它们视为不同命令行选项的参数，则可能没问题...您可能可以设置第二个解析器来解析内部部分-但我以前从未尝试过类似的东西.. .（如果其他人对如何处理括号有任何想法，我很想听听他们的意见）。

就`optparse`和`getopt`而言，我很确定你可以用它们做的任何事情，你都可以用 argparse 做，这就是为什么我把它们排除在讨论之外的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T14:30:56.330

您至少可以尝试三个模块；`argparse`, `optparse`（在 2.7 中已弃用）和`getopt`. 请参阅 Python 标准库手册的第 15 章。

# html - HTML，CSS - 调整窗口大小时的空白

> ID：10364189
> 
> 赞同：0
> 
> 时间：2012-04-28T13:59:42.113
> 
> 标签：html, css

请参考我的网站：[http ://www.vault-x.com](http://www.vault-x.com)

随着窗口最大化，网站看起来很正常。

当窗口宽度减小时，您可以向左/向右滚动，网站右侧会出现一个空白区域，我不知道为什么？

有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T14:43:40.473

设置**最小宽度**它会工作正常

示例 CSS

```
 header {
    height: 303px;
    min-width:950px;
    background: url('images/head_bg.jpg') center no-repeat,
                url('images/head_liq_bg.jpg') left top repeat;
                text-align: center;

    } 
```

# php - 使用 UPDATE mysql 和 php 语法更新 sql 表

> ID：10364192
> 
> 赞同：0
> 
> 时间：2012-04-28T14:00:06.773
> 
> 标签：php, mysql, html

我正在尝试使用`UPDATE`php 和 mysql 更新我的记录，查询工作但数据库上根本没有更新，我有很多门票记录，当用户购买它们时我需要更新那里的状态，比如说用户预订`10`票我使用了这种语法

```
 for ($counter = 1; $counter <= $tickets; $counter++) {
                echo $eventId;
                echo $chooseClass;
                echo $chooseUser;
                $bookTicket = mysql_query("UPDATE units 
SET ticketSold = 'Yes', 
userIdFK = '$chooseUser' 
WHERE BusinessreservationIdFk = '$eventId' 
AND classIDfk ='$choosedClass'"
) or die(mysql_error());

                if ($bookTicket) 
                {
                    echo "<br/>ticket " . $counter . "  done !";
                } 
                else
                { 
```

我尝试了`echo`这里的所有变量，`for loop`以确保这`for`得到所有变量值，这是有效的，我有 1000 张票已经存储在 mysql 表上`units`，我需要将它们的状态从已售 = 更新`No`为`Yes`。问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T14:04:27.340

尝试单独构建查询（例如`$sql = 'UPDATE ...'`，这样您就可以执行`echo $sql`并复制/粘贴查询并手动运行它。您的代码中没有任何内容看起来有问题，因此您传递的值一定不正确或`WHERE ...`逻辑不正确. 所以手动运行一个示例查询，然后看看是否有任何事情发生。

但是，请注意，您是在`for()`循环中执行此操作，但没有在任何地方使用该 $counter 值。实际上，您只是一遍又一遍地运行 SAME 查询。设置`ticketSold`为`Yes`$counter times 不会`Yes`比只进行一次更新更“多”。

# c++ - 获取包含 windows 系统目录的驱动器号

> ID：10364196
> 
> 赞同：1
> 
> 时间：2012-04-28T14:00:55.097
> 
> 标签：c++, windows, winapi

```
#ifndef UNICODE
#define UNICODE
#endif

#include <Windows.h>
#include <cstdio>

TCHAR* getSystemVolumine()
{
    TCHAR volumine[2];
    TCHAR buffer[30];

    GetSystemWindowsDirectory(buffer,30);

    for(int i=0 ; i < 2 ; i++)
        volumine[i]=buffer[i];

    return volumine;
}

int main()
{
    wprintf(L"Your system volumine letter%s\n",getSystemVolumine());
    system("pause");
} 
```

我不知道这段代码有什么问题。调试既未显示错误也未显示警告，但输出为：

```
Your system volumine letter
Press any key to continue... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T14:08:26.137

您正在返回一个指向局部变量的指针，当函数返回时，该变量不再存在 wprintf 的字符串必须以 '\0' 结尾。

```
#include <Windows.h>
#include <cstdio>

void getSystemVolumine(TCHAR *vol)
{
    TCHAR buffer[30];

    GetSystemWindowsDirectory(buffer,30);

    for(int i=0 ; i < 2 ; i++)
        vol[i]=buffer[i];

    vol[2] = 0;
}

int main()
{
    TCHAR vol[3];

    getSystemVolumine(vol);

    wprintf(L"Your system volumine letter %S\n",vol);
    system("pause");
} 
```

# silverlight - 如何在堆栈面板内的控件之间设置边距而不重复？

> ID：10364197
> 
> 赞同：-1
> 
> 时间：2012-04-28T14:00:56.563
> 
> 标签：silverlight, silverlight-4.0

我可以为每个堆栈面板元素指定边距，但这将是重复的...如果发生更改，我将需要更新所有控件...

有没有办法为堆栈面板定义一次？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T19:31:53.530

（对不起，我的英语不好）

Xin 的答案非常适合您的要求，但是如果您想为所有 stackPanel 设置更多属性，我建议您创建一个样式：

```
 <Style TargetType="StackPanel" x:Key="CustomStackPanel">
     <Setter Property="Margin" Value="10,12,15,20"/>
     <Setter Property="Height" Value="50"/>                
 </Style> 
```

并像这样使用它：

```
<StackPanel>
    <StackPanel Background="Red" Style="{StaticResource CustomStackPanel}"/>
    <StackPanel Background="Green" Style="{StaticResource CustomStackPanel}"/>
    <StackPanel Background="Blue" Style="{StaticResource CustomStackPanel}"/>
</StackPanel> 
```

如果`x:Key`从样式中删除 ，则*包含该样式的元素内的***所有**StackPanel都将使用该样式。如果您在 上声明该样式，则应用程序上的所有 stackPanel 都将使用它。*`app.xaml`*

# mysql - 设置表中所有记录的一列的值

> ID：10364200
> 
> 赞同：56
> 
> 时间：2012-04-28T14:01:16.530
> 
> 标签：mysql, sql

我正在尝试清除表中所有记录的一列。例如，如果我的表有三列：`id`、`comment`和`likes`- 我希望能够清除该`likes`列。

```
+---+-------+-----+
|id |comment|likes|
+-----------------+
|1  |hi     |3    |
|2  |hello  |12   |
|3  |hey    |1    |
+---+-------+-----+ 
```

所以之后它看起来像这样：

```
+---+-------+-----+
|id |comment|likes|
+-----------------+
|1  |hi     |     |
|2  |hello  |     |
|3  |hey    |     |
+---+-------+-----+ 
```

我猜我必须使用 MySQL`UPDATE`来清除`likes`值，但是我如何遍历所有记录并保持`id`和`comment`字段相同？

我不想手动更改每条记录。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-04-28T14:03:05.637

```
UPDATE your_table SET likes = NULL 
```

或者如果您的`likes`专栏不允许`NULL`：

```
UPDATE your_table SET likes = '' 
```

默认情况下，一些用于执行 DB 查询的 SQL 工具会阻止更新所有记录（不带`where`子句的查询）。您可以配置它并删除该 savety 设置，或者您可以添加一个适用于所有记录的`where`子句并更新所有内容，如下所示：`true`

```
UPDATE your_table 
SET likes = NULL
WHERE 1 = 1 
```

如果与then**进行比较**`NULL`，则还需要`IS`运算符。例子：

```
UPDATE your_table 
SET likes = NULL
WHERE likes IS NOT NULL 
```

因为**与** `NULL`等号运算符 ( `=`) 比较会返回*UNKNOWN*。但`IS`运营商可以处理`NULL`。

# python - OpenCV 中的图像转换

> ID：10364201
> 
> 赞同：22
> 
> 时间：2012-04-28T14:01:24.830
> 
> 标签：python, opencv, wolfram-mathematica, computer-vision

这个问题与这个问题有关：[`How to remove convexity defects in sudoku square`](https://stackoverflow.com/questions/10196198/how-to-remove-convexity-defects-in-sudoku-square)

我试图[`nikie's answer`](https://stackoverflow.com/a/10226971/1134940)在`Mathematica to OpenCV-Python`. 但我被困在程序的最后一步。

即我得到了正方形的所有交点，如下所示：

![在此处输入图像描述](../Images/9ed5579960640236e6c1cf2a5b476b5a.png)

现在，我想将其转换为一个完美的正方形（450,450），如下所示：

![在此处输入图像描述](../Images/e90f37ac284a4e427fc6d175e1a38dab.png)

（不要介意两个图像的亮度差异）。

**问题：** 我如何在 OpenCV-Python 中做到这一点？我正在使用`cv2`版本。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-29T18:34:39.350

除了 etarion 的建议，您还可以使用[remap](http://opencv.itseez.com/modules/imgproc/doc/geometric_transformations.html?highlight=cv2.remap#cv2.remap)功能。我写了一个快速脚本来展示如何做到这一点。如您所见，这在 Python 中非常简单。这是测试图像：

![扭曲的图像](../Images/34ee93bb1c8ad29bc09602a52a10a63f.png)

这是翘曲后的结果：

![扭曲的图像](../Images/2317173fedbf9a9c644096cb52581f27.png)

这是代码：

```
import cv2
from scipy.interpolate import griddata
import numpy as np

grid_x, grid_y = np.mgrid[0:149:150j, 0:149:150j]
destination = np.array([[0,0], [0,49], [0,99], [0,149],
                  [49,0],[49,49],[49,99],[49,149],
                  [99,0],[99,49],[99,99],[99,149],
                  [149,0],[149,49],[149,99],[149,149]])
source = np.array([[22,22], [24,68], [26,116], [25,162],
                  [64,19],[65,64],[65,114],[64,159],
                  [107,16],[108,62],[108,111],[107,157],
                  [151,11],[151,58],[151,107],[151,156]])
grid_z = griddata(destination, source, (grid_x, grid_y), method='cubic')
map_x = np.append([], [ar[:,1] for ar in grid_z]).reshape(150,150)
map_y = np.append([], [ar[:,0] for ar in grid_z]).reshape(150,150)
map_x_32 = map_x.astype('float32')
map_y_32 = map_y.astype('float32')

orig = cv2.imread("tmp.png")
warped = cv2.remap(orig, map_x_32, map_y_32, cv2.INTER_CUBIC)
cv2.imwrite("warped.png", warped) 
```

我想你可以谷歌并找到 griddata 的作用。简而言之，它进行插值，在这里我们使用它来将稀疏映射转换为密集映射，因为 cv2.remap 需要密集映射。我们只需要将值转换为 float32，因为 OpenCV 抱怨 float64 类型。请让我知道情况如何。

**更新**：如果您不想依赖 Scipy，一种方法是在代码中实现 2d 插值功能，例如，请参阅 Scipy 中 griddata 的源代码或更简单的类似[http://inasafe.readthedocs .org/en/latest/_modules/engine/interpolation2d.html](http://inasafe.readthedocs.org/en/latest/_modules/engine/interpolation2d.html)仅依赖于 numpy。不过，我建议为此使用 Scipy 或其他库，尽管我明白为什么只需要 CV2 和 numpy 对于这样的情况可能会更好。我想听听您的最终代码如何解决数独问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-02T03:36:54.720

如果你有源点和端点（你只需要 4 个），你可以将它们插入 cv2.getPerspectiveTransform，并在 cv2.warpPerspective 中使用该结果。给你一个很好的平坦结果。

# prolog - Prolog - 返回整个子句

> ID：10364202
> 
> 赞同：0
> 
> 时间：2012-04-28T14:01:31.893
> 
> 标签：prolog, clause

我有一些基本的公式，比如

```
female(camilla).
female(diana).
...
parent(person, child).
... 
```

和谓词`language/2`指定我将使用哪些谓词：

```
langugage(female, 1).
language(parent, 2). 
```

我要做的是创建谓词`body_lit/1`，它返回用这样的语言指定的整个子句：

```
?- body_lit(X).
X = parent(charles, harry) ;
X = parent(diana, harry) ;
...
X = female(camilla) ;
X = female(diana) ;
... 
```

我知道我需要使用`call/n`函数和`functor/3`. 我知道如何`functor/3`工作，但我似乎无法弄清楚如何返回整个子句而不仅仅是谓词的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T19:06:26.460

我认为 body_lit 应该返回所有以语言给出的谓词及其参数的答案。

```
body_lit(X) :- language(N,A), functor(F,N,A), call(F), X=F. 
```

`language/2`选择一个谓词，`functor/3`根据谓词名称及其参数构造一个实际调用，`call/1`执行调用，最后`X=F`将调用记录为输出参数。最后的统一可能已被删除：

```
body_lit(X) :- language(N,A), functor(X,N,A), call(X). 
```

# regex - 如何在 vim 中搜索所有 CJK 字符？

> ID：10364203
> 
> 赞同：8
> 
> 时间：2012-04-28T14:01:34.173
> 
> 标签：regex, vim, unicode, cjk

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T14:30:00.090

似乎 Vim 范围以某种方式限制在相同的高字节，因为`/[\u4E00-\u4eFF]`工作正常。如果您不介意混乱，请尝试：

```
/[\u4e00-\u4eff\u4f00-\u4fff\u5000-\u50ff\u5100-\u51ff\u5200-\u52ff\u5300-\u53ff\u5400-\u54ff\u5500-\u55ff\u5600-\u56ff\u5700-\u57ff\u5800-\u58ff\u5900-\u59ff\u5a00-\u5aff\u5b00-\u5bff\u5c00-\u5cff\u5d00-\u5dff\u5e00-\u5eff\u5f00-\u5fff\u6000-\u60ff\u6100-\u61ff\u6200-\u62ff\u6300-\u63ff\u6400-\u64ff\u6500-\u65ff\u6600-\u66ff\u6700-\u67ff\u6800-\u68ff\u6900-\u69ff\u6a00-\u6aff\u6b00-\u6bff\u6c00-\u6cff\u6d00-\u6dff\u6e00-\u6eff\u6f00-\u6fff\u7000-\u70ff\u7100-\u71ff\u7200-\u72ff\u7300-\u73ff\u7400-\u74ff\u7500-\u75ff\u7600-\u76ff\u7700-\u77ff\u7800-\u78ff\u7900-\u79ff\u7a00-\u7aff\u7b00-\u7bff\u7c00-\u7cff\u7d00-\u7dff\u7e00-\u7eff\u7f00-\u7fff\u8000-\u80ff\u8100-\u81ff\u8200-\u82ff\u8300-\u83ff\u8400-\u84ff\u8500-\u85ff\u8600-\u86ff\u8700-\u87ff\u8800-\u88ff\u8900-\u89ff\u8a00-\u8aff\u8b00-\u8bff\u8c00-\u8cff\u8d00-\u8dff\u8e00-\u8eff\u8f00-\u8fff\u9000-\u90ff\u9100-\u91ff\u9200-\u92ff\u9300-\u93ff\u9400-\u94ff\u9500-\u95ff\u9600-\u96ff\u9700-\u97ff\u9800-\u98ff\u9900-\u99ff\u9a00-\u9aff\u9b00-\u9bff\u9c00-\u9cff\u9d00-\u9dff\u9e00-\u9eff\u9f00-\u9fff] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-06T20:29:26.397

我玩了很多次，在 vim 中，以下似乎在我的汉字/拼音/英文文本中找到了所有汉字字符：

```
[^!-~0-9 aāáǎăàeēéěèiīíǐĭìoōóǒŏòuūúǔùǖǘǚǜ] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T14:36:18.013

Vim 本身实际上无法做到这一点，因为您无法访问 Unicode 属性，例如`\p{Han}`.

从 Unicode v6.0 开始，汉字字符的码点范围为：

```
2E80-2E99 2E9B-2EF3 2F00-2FD5 3005-3005 3007-3007 3021-3029 3038-303B 3400-4DB5 4E00-9FCB F900-FA2D FA30-FA6D FA70-FAD9 20000-2A6D6 2A700-2B734 2B740-2B81D 2F800-2FA1D 
```

而在 Unicode v6.1 中，汉码点的范围已更改为：

```
2E80-2E99 2E9B-2EF3 2F00-2FD5 3005-3005 3007-3007 3021-3029 3038-303B 3400-4DB5 4E00-9FCC F900-FA6D FA70-FAD9 20000-2A6D6 2A700-2B734 2B740-2B81D 2F800-2FA1D 
```

我似乎还记得 Vim 难以表达星体代码点，这是正常工作所必需的。例如，使用`\x{HHHHHH}`Java 7 或 Perl 中的灵活表示法，您将拥有：

```
[\x{2E80}-\x{2E99}\x{2E9B}-\x{2EF3}\x{2F00}-\x{2FD5}\x{3005}-\x{3005}\x{3007}-\x{3007}\x{3021}-\x{3029}\x{3038}-\x{303B}\x{3400}-\x{4DB5}\x{4E00}-\x{9FCC}\x{F900}-\x{FA6D}\x{FA70}-\x{FAD9}\x{20000}-\x{2A6D6}\x{2A700}-\x{2B734}\x{2B740}-\x{2B81D}\x{2F800}-\x{2FA1D}] 
```

请注意，范围的最后一部分是`\x{2F800}-\x{2FA1D}`，它超出了 BMP。但你真正需要的是`\p{Han}`（意思是，`\p{Script=Han}`）。这再次表明，至少不支持[UTS#18 的 1 级的正则表达式方言：基本 Unicode 支持](http://unicode.org/reports/tr18/#Basic_Unicode_Support)不足以使用 Unicode。Vim 的正则表达式不足以完成基本的 Unicode 工作。

* * *

# 编辑添加

这是转储适用于任何给定 Unicode 脚本的代码点范围的程序。

```
#!/usr/bin/env perl
#
# uniscrange - given a Unicode script name, print out the ranges of code 
#              points that apply.
# Tom Christiansen <tchrist@perl.com>

use strict;
use warnings;

use Unicode::UCD qw(charscript);

for my $arg (@ARGV) {
    print "$arg: " if @ARGV > 1;
    dump_range($arg);
}

sub dump_range {
    my($scriptname) = @_;

    my $alist = charscript($scriptname);
    unless ($alist) {
        warn "Unknown script '$scriptname'\n";
        return;
    }

    for my $aref (@$alist) {
        my($start, $stop, $name) = @$aref;
        die "got $name, not $scriptname\n" unless $name eq $scriptname;
        printf "%04X-%04X ", $start, $stop;
    }
    print "\n";

} 
```

它的答案取决于您运行它的 Perl 版本，因此也取决于 Unicode 的版本。

```
$ perl5.8.8 ~/uniscrange Latin Greek
Latin: 0041-005A 0061-007A 00AA-00AA 00BA-00BA 00C0-00D6 00D8-00F6 00F8-01BA 01BB-01BB 01BC-01BF 01C0-01C3 01C4-0241 0250-02AF 02B0-02B8 02E0-02E4 1D00-1D25 1D2C-1D5C 1D62-1D65 1D6B-1D77 1D79-1D9A 1D9B-1DBF 1E00-1E9B 1EA0-1EF9 2071-2071 207F-207F 2090-2094 212A-212B FB00-FB06 FF21-FF3A FF41-FF5A 
Greek: 0374-0375 037A-037A 0384-0385 0386-0386 0388-038A 038C-038C 038E-03A1 03A3-03CE 03D0-03E1 03F0-03F5 03F6-03F6 03F7-03FF 1D26-1D2A 1D5D-1D61 1D66-1D6A 1F00-1F15 1F18-1F1D 1F20-1F45 1F48-1F4D 1F50-1F57 1F59-1F59 1F5B-1F5B 1F5D-1F5D 1F5F-1F7D 1F80-1FB4 1FB6-1FBC 1FBD-1FBD 1FBE-1FBE 1FBF-1FC1 1FC2-1FC4 1FC6-1FCC 1FCD-1FCF 1FD0-1FD3 1FD6-1FDB 1FDD-1FDF 1FE0-1FEC 1FED-1FEF 1FF2-1FF4 1FF6-1FFC 1FFD-1FFE 2126-2126 10140-10174 10175-10178 10179-10189 1018A-1018A 1D200-1D241 1D242-1D244 1D245-1D245

$ perl5.10.0 ~/uniscrange Latin Greek
Latin: 0041-005A 0061-007A 00AA-00AA 00BA-00BA 00C0-00D6 00D8-00F6 00F8-01BA 01BB-01BB 01BC-01BF 01C0-01C3 01C4-0293 0294-0294 0295-02AF 02B0-02B8 02E0-02E4 1D00-1D25 1D2C-1D5C 1D62-1D65 1D6B-1D77 1D79-1D9A 1D9B-1DBE 1E00-1E9B 1EA0-1EF9 2071-2071 207F-207F 2090-2094 212A-212B 2132-2132 214E-214E 2184-2184 2C60-2C6C 2C74-2C77 FB00-FB06 FF21-FF3A FF41-FF5A 
Greek: 0374-0375 037A-037A 037B-037D 0384-0385 0386-0386 0388-038A 038C-038C 038E-03A1 03A3-03CE 03D0-03E1 03F0-03F5 03F6-03F6 03F7-03FF 1D26-1D2A 1D5D-1D61 1D66-1D6A 1DBF-1DBF 1F00-1F15 1F18-1F1D 1F20-1F45 1F48-1F4D 1F50-1F57 1F59-1F59 1F5B-1F5B 1F5D-1F5D 1F5F-1F7D 1F80-1FB4 1FB6-1FBC 1FBD-1FBD 1FBE-1FBE 1FBF-1FC1 1FC2-1FC4 1FC6-1FCC 1FCD-1FCF 1FD0-1FD3 1FD6-1FDB 1FDD-1FDF 1FE0-1FEC 1FED-1FEF 1FF2-1FF4 1FF6-1FFC 1FFD-1FFE 2126-2126 10140-10174 10175-10178 10179-10189 1018A-1018A 1D200-1D241 1D242-1D244 1D245-1D245 
```

您可以使用该`corelist -a Unicode`命令查看哪个版本的 Unicode 与哪个版本的 Perl。这是选定的输出：

```
$ corelist -a Unicode
  v5.8.8     4.1.0     
  v5.10.0    5.0.0     
  v5.12.2    5.2.0     
  v5.14.0    6.0.0     
  v5.16.0    6.1.0 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-19T19:56:03.207

我不理解“相同的高字节问题”，但当您实际输入字符以建立范围时，它似乎不适用（至少对我而言，VIM 7.4）。

我通常从 U+3400(㐀) 到 U+9FCC(鿌) 搜索以捕获日文文本中的汉字。

*   U+3400(㐀) 是“中日韩统一表意文字扩展 A”的开头
*   U+4DC0 - U+4DFF《易经卦记》介于两者之间，但为简单起见不排除。
*   U+9FCC(鿌)是“中日韩统一表意文字”的结尾

请注意，日本文字使用“々”作为汉字重复符号，它不属于该块的一部分。您可以在“日语符号和标点符号”块中找到它。

```
/[㐀-鿌] 
```

一个（几乎？）完整的带有扩展名的汉字集

```
/[㐀-鿌豈-龎-] 
```

该范围包括：

*   中日韩统一表意文字扩展 A
*   易经卦象（不应该是其中的一部分）
*   中日韩统一表意文字（主要部分）
*   CJK 兼容性表意文字
*   中日韩统一表意文字扩展 B，
*   中日韩统一表意文字扩展 C，
*   中日韩统一表意文字扩展 D，
*   CJK 兼容性表意文字补充

**从事日语内容工作的人的奖励：**

平假名从 U+3041 变为 U+3096

```
/[ぁ-ゟ] 
```

片假名

```
/[゠-ヿ] 
```

汉字部首

```
/[⺀-⿕] 
```

日语符号和标点符号。

请注意，这个范围还包括々（最后一个汉字的重复）和〆（shime的缩写「しめ」）。您可能希望将它们添加到您的范围以查找单词。

```
[　-〿] 
```

其他日本符号和字符

```
/[ㇰ-ㇿ㈠-㉃㊀-㍿] 
```

字母数字和标点符号（全角）

```
[！-～] 
```

来源：

[http://www.fileformat.info/info/unicode/char/9fcc/index.htm](http://www.fileformat.info/info/unicode/char/9fcc/index.htm) [http://www.localizingjapan.com/blog/2012/01/20/regular-expressions-for-japanese-text/comment -page-1/#comment-46891](http://www.localizingjapan.com/blog/2012/01/20/regular-expressions-for-japanese-text/comment-page-1/#comment-46891)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-07T04:34:57.413

在一些简单的情况下，我用它来搜索汉字。它还匹配日文、俄文字符等。

```
[^\x00-\xff] 
```

# php - monitor php script executions

> ID：10364205
> 
> 赞同：1
> 
> 时间：2012-04-28T14:01:47.497
> 
> 标签：php

I recently started with php and I have a script that works with a database. This script is triggered from an iOS app.

I can monitor the iOS apps behavior, but I am not sure how to monitor execution of the php script. Is there some test environment I could setup or another tool that is used for this?

I want to set breakpoints in the php script so I can see how it reacts to the requests from the iOS application.

EDIT: How are people testing php otherwise? Does the script get refactored after testing to allow actual usage on a server? I guess I am after some kind of tool that attaches to a script that is live on a server.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T14:11:15.663

我使用 NuSphere 的 phpEd，但您必须从编辑器/调试器执行脚本。如果您想要对脚本发出的所有请求，则需要在脚本的各个点添加代码以写入日志文件。（如果有人听说过除此之外的东西，我很想知道！）

# c# - 检查何时调用 List.Add 方法

> ID：10364218
> 
> 赞同：0
> 
> 时间：2012-04-28T14:03:17.183
> 
> 标签：c#, list, overriding

我有一个名为 List 类型的 Items 的复合属性到一个订单类。在 GUI 上，用户填写一些字段，如名称、描述、价格、数量等......然后单击添加项目按钮，这当然会将项目添加到订单的项目列表中。我想做的是创建一个方法来检查项目的 IsComplete 属性，该属性会检查以确保设置了所需的属性，这样如果不是，某人就不能只调用 order.Items.Add(item)完全的。如果不是，我希望在项目的 IsComplete 属性返回 false 时引发异常......有什么简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:07:11.563

这可以通过子`List<T>`类化为派生类，然后覆盖该`Add`方法来实现，就像这样。

```
public class MyItemCollection : List<MyItem>
{
    public override void Add(MyItem item)
    {
        if (item.IsComplete)
        {
            base.Add(item);
        }
        else
        {
            throw new InvalidOperationException("Unable to add an incomplete item");
        }
    }
} 
```

然后，您的订单类将具有属性`MyItemCollection`而不是`List<T>`，如下所示：

```
public class Order
{
    public MyItemCollection Items { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T14:07:53.907

您还可以使用`ObservableCollection<T>`： http: [//msdn.microsoft.com/en-us/library/ms668604.aspx](http://msdn.microsoft.com/en-us/library/ms668604.aspx)
它实现了：http `INotifyCollectionChanged`: [//msdn.microsoft.com/en-us/library/System.Collections.Specialized.INotifyCollectionChanged .aspx](http://msdn.microsoft.com/en-us/library/System.Collections.Specialized.INotifyCollectionChanged.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T09:20:08.177

由于该方法`Add(T)`不是虚拟的，因此您无法覆盖它。

ObservableCollection 允许在添加元素时引发事件，但不能撤消此添加。

您可以`IList<T>`使用存储的`List<T>`内部实现接口，并在方法中添加所需的验证，`Add(T item)`然后在下面的示例中调用`_list.Add(item)`类似：

```
public class MyItemCollection : IList<MyItem>
{
    private List<MyItem> _list;

    public MyItemCollection()
    {
        _list = new List<MyItem>();
    }

    public void Add(MyItem item)
    {
        if (item.IsComplete)
        {
            _list.Add(item);
        }
        else
        {
            throw new InvalidOperationException("Unable to add an incomplete item");
        }
    }

    //Then you have to implement all the IList interface members...

} 
```

此解决方案的唯一问题是它需要编写大量样板代码。

If only one class is responsible of the manipulation of your `List`, you can also decide to implement a method `AddToMyItemCollection(MyItem item)` in the responsible class. It is even a good practive as it's respect the GRASP pattern [protected variation](http://en.wikipedia.org/wiki/GRASP_%28object-oriented_design%29#Protected_Variations) (Instance.getC() is preferable to Instance.getA().getB().getC())

# c++ - 一维数组中的多个索引

> ID：10364221
> 
> 赞同：0
> 
> 时间：2012-04-28T14:03:37.400
> 
> 标签：c++, arrays

我试图实现来自不同来源的强连接算法。我在[http://www.oneous.com/Tutorial-Content.php?id=18找到了一个让我感到困惑的](http://www.oneous.com/Tutorial-Content.php?id=18)

我感到困惑的原因是这一行：

```
if (used[v[s][i]] == 0)
  DFS(v[s][i]); 
```

我们已经声明`v`为一维向量，但在这里它被用作二维向量。我认为这是一个错误，但无法弄清楚如何解决它。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T14:06:10.860

`v`声明为：

```
vector<int> v[1005]; 
```

即向量数组。所以第一个索引访问数组，第二个访问向量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T14:07:22.080

`v`是一个向量数组。所以`v[1]`是`vector<int>`位置 1 的 a，并且`v[1][2]`是`vector<int>`位置 2 的整数。

Vector 类允许这样做，因为它覆盖了`[]`运算符

# c# - Monodroid : how can I fill a ListView with data from a DataTable I bring from SQL?

> ID：10364225
> 
> 赞同：-1
> 
> 时间：2012-04-28T14:04:22.563
> 
> 标签：c#, android, visual-studio-2010, xamarin.android

I have a DataTable with names queried from SQL Server. I want to use those names to populate a ListView created in the .axml file. What would be the best way to handle this? This is what I have so far:

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using Android.App;
using Android.Content;
using Android.OS;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using System.Data;

namespace MonoAndroidApplication3
{
    [Activity(Label = "care sheet list test")]
    public class caresheetlist : ListActivity
    {
        protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);

            DAL d = new DAL("Data Source=.;Initial Catalog=reptitips;Integrated Security=True");
            DataTable tbl = d.FillAndReturn("select ReptileCommonName from reptiles order by ReptileCommonName", null, null, null);

            string[] reptileNames = new string[tbl.Rows.Count];

            for (int i = 0; i < reptileNames.Length; i++)
            {
                reptileNames[i] = tbl.Rows[i]["ReptileCommonName"].ToString();
            }

            ListAdapter = new ArrayAdapter<string>(this, Resource.Layout.listitem, reptileNames);

            ListView.TextFilterEnabled = true;

            ListView.ItemClick += delegate(object sender, ItemEventArgs args)
            {
                // When clicked, show a toast with the TextView text
                Toast.MakeText(Application, ((TextView)args.View).Text, ToastLength.Short).Show();
            };

            //AutoCompleteTextView textView1 = (AutoCompleteTextView)FindViewById(autoComplete1);
            //ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, Resource.Layout.listitem, reptileNames);
        }
    }
} 
```

and the .axml:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/bg"
    android:orientation="vertical" >

  <LinearLayout
      android:id="@+id/linearLayout2"
      android:layout_width="match_parent"
      android:layout_height="44dp"
      android:orientation="vertical" >

    <AutoCompleteTextView
        android:id="@+id/autoComplete1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="AutoCompleteTextView" >
    </AutoCompleteTextView>
  </LinearLayout>

  <LinearLayout
      android:id="@+id/linearLayout1"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:layout_weight="1" >

    <LinearLayout
        android:id="@+id/linearLayout3"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

      <ListView
          android:id="@+id/listView1"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:layout_weight="1" >
      </ListView>

    </LinearLayout>

  </LinearLayout>

</LinearLayout> 
```

However, the result of the above code is that it returns me to the first page of the application, and then the emulator shuts down.

[The android device logging show those errors](http://imageshack.us/photo/my-images/406/21869758.png/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T15:18:00.567

我现在确定如何在 c# 上实现这一点，但使用 java 我会：

```
listView.setOnItemClickListener(this); 
```

让活动类实现侦听器，然后您需要添加方法

```
public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
    Log.d(TAG, "onListItemClick: " + position);

    // you coce here
} 
```

希望这可以帮助

# .net - Make DataGridView SingleVertical CellBorderStyle extend all the way down?

> ID：10364226
> 
> 赞同：0
> 
> 时间：2012-04-28T14:04:25.793
> 
> 标签：.net, winforms, datagridview, datagridviewcellstyle

Note before I begin.. this is what the customer wants it to look like, so if anyone has any "that's terrible UI/Style/looks/etc", I may or may not agree, but this is what they want. Opinions appreciated, but this is their request. :)

I've got a DataGridView that I've applied the SingleVertical CellBorderStyle to. I'm trying to get the vertical column separator lines to go all the way down to the end of the control, instead of ending at the last cell. Is there a way to do this without having to override OnPaint or something similar?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T00:35:24.667

由于您已经有了 SingleVertical CellBorderStyle，您可以用一个大的空白最后一行填充剩余空间：

```
//calculate the space already filled by column headers and rows
int currentContentHeight = Grid.ColumnHeadersHeight;
for (int i = 0; i < Grid.Rows.Count; i++)
{
    currentContentHeight += Grid.Rows[i].Height;
}
//then calculate the space remaining
int remainingHeightToEndOfControl = Grid.Height - currentContentHeight;
//then fill it with one big blank final row:
if (remainingHeightToEndOfControl > 0)
{
    Grid.Rows.Add();
    Grid.Rows[Grid.Rows.Count - 1].Height = remainingHeightToEndOfControl;
} 
```

您可能必须从剩余高度中减去 2 点左右才能考虑控制边界。

# ruby - 宝石安装导轨不起作用

> ID：10364232
> 
> 赞同：3
> 
> 时间：2012-04-28T14:04:56.390
> 
> 标签：ruby, ubuntu, gem

我正在开发 ubuntu 和 rvm。无论如何，我尝试使用 sudo gem （任何命令）它都不会将 gem 识别为命令。此外，如果我将 gem 单独用作：

```
gem install rails
ERROR:  Could not find a valid gem 'rails' (>= 0) in any repository
ERROR:  Possible alternatives: rails 
```

我得到了那个错误。我看不出原因。

rvm 版本 1.10.3 ruby​​ 版本 1.8.7 gem 版本 1.6.7

这背后的可能原因是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-14T22:27:32.773

重新安装所有 rvm 和 ruby​​ 以及 gem，解决了我的问题。

# c# - 从 rss feed linq, xml 获取缩略图

> ID：10364233
> 
> 赞同：1
> 
> 时间：2012-04-28T14:05:12.110
> 
> 标签：c#, xml, linq

我怎样才能得到缩略图

如果您在此处查看源提要：

[http://feeds.bbci.co.uk/news/world/middle_east/rss.xml](http://feeds.bbci.co.uk/news/world/middle_east/rss.xml)

我尝试了以下方法，但最后一部分不适用于媒体：thumbnail

```
 XDocument feedXML = XDocument.Load("http://feeds.bbci.co.uk/news/world/middle_east/rss.xml");
            var feeds = from feed in feedXML.Descendants("item")
                        select new
                        {
                            Title = feed.Element("title").Value,
                            Link = feed.Element("link").Value,
                            Description = feed.Element("description").Value,
                            pubDate = feed.Element("pubDate").Value,
                            guid = feed.Element("guid").Value,
                            thumbnail = feed.Element("media:thumbnail").Attribute("url").Value
                        }; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-28T14:27:58.293

你错过的是 XNamespace + 一个空检查

```
XDocument feedXML = XDocument.Load("http://feeds.bbci.co.uk/news/world/middle_east/rss.xml");
XNamespace media = XNamespace.Get("http://search.yahoo.com/mrss/");
var feeds = from feed in feedXML.Descendants("item")
                select new
                {
                    Title = feed.Element("title").Value,
                    Link = feed.Element("link").Value,
                    Description = feed.Element("description").Value,
                    pubDate = feed.Element("pubDate").Value,
                    guid = feed.Element("guid").Value,
                    thumbnail = feed.Element(media+"thumbnail")!=null ? feed.Element(media+"thumbnail").Attribute("url").Value : ""
                }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T18:39:46.197

这是正确的：

```
XNamespace media = "http://search.yahoo.com/mrss/";
Title = feed.Element("title").Value;
Description = feed.Element("description").Value;
ThumbnailUrl = feed.Element(media + "thumbnail").Attribute("url").Value; 
```

# javascript - setInterval("/*some code*/", time) and setInterval(function() { /*some code*/ }, time)

> ID：10364235
> 
> 赞同：0
> 
> 时间：2012-04-28T14:05:17.140
> 
> 标签：javascript, html

我的印象是

```
setInterval("/*some code*/", time) 
```

相当于

```
setInterval(function() {
   /*some code*/
}, time) 
```

显然不是！请比较以下（完整的 HTML）：

```
<pre id=p><script>n=setInterval("for(n+=7,i=k,P='p.\\n';i-=1/k;P+=P[i%2?(i%2*j-j+n/k^j)&1:2])j=k/i;p.innerHTML=P",k=64)</script> 
```

和

```
<pre id=p><script>n=setInterval(function() { for(n+=7,i=k,P='p.\\n';i-=1/k;P+=P[i%2?(i%2*j-j+n/k^j)&1:2])j=k/i;p.innerHTML=P },k=64)</script> 
```

这两个动画（第一个取自[这里](http://www.p01.org/releases/128b_raytraced_checkboard/128b.htm?utm_source=javascriptweekly&utm_medium=email)）是不同的。

为什么这两个构造不等价？

**答**：至少有三个不同

1.  变量范围
2.  表现
3.  字符串字符转义

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T14:10:47.180

我没有研究过混淆代码，但是使用字符串和带有`setTimeout`or的函数之间的区别在于`setInterval`代码运行的范围。此外，当您使用字符串时，某些引擎可能也无法优化。

*   当您传入一个字符串时，它会在全局范围内运行。

*   当您传入一个函数时，它会在定义它的范围内运行。

这会影响代码范围内的哪些变量，这会影响代码的作用。

这是一个未混淆的示例：[Live copy](http://jsbin.com/odiyid) | [来源](http://jsbin.com/odiyid/edit)

```
(function() {
  var foo = 42;

  // This will say "undefined", because there is no global `foo`
  setTimeout("display(typeof foo);", 0);

  // This will say "number", because the function is closure over
  // the current scope, whcih *does* have `foo`
  setTimeout(function() {
    display(typeof foo);
  }, 0);

})();

function display(msg) {
  var p = document.createElement('p');
  p.innerHTML = String(msg);
  document.body.appendChild(p);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T14:13:15.727

这两种形式的 setInterval 本质上是等价的——但你的代码不是。在第二个示例中，您将换行符双重转义为`\\n`，而不仅仅是`\n`. 试试这个：

```
<pre id=p><script>n=setInterval(function() { for(n+=7,i=k,P='p.\n';i-=1/k;P+=P[i%2?(i%2*j-j+n/k^j)&1:2])j=k/i;p.innerHTML=P },k=64)</script> 
```

这应该就像你想要的那样。

setInterval的`function()`形式在很多方面都更好——它更具可读性，而且当你遇到这里时，你不必处理试图在字符串中转义字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T14:17:57.350

我不确定我是否理解您的示例，但据我所知，两者之间的主要区别之一是 setInterval(string, time) 的性能将低于 setInterval(function, time) 因为它需要解释动态代码，与 eval() 相同。除此之外，您的代码每次都会操作 Dom，这会影响性能。

由于 javascript 是单线程的，因此 setInterval 中的间隔时间并不准确。请参阅 John Resig 的帖子：[http ://ejohn.org/blog/how-javascript-timers-work/](http://ejohn.org/blog/how-javascript-timers-work/)

我希望结果会根据 setInterval(string, time) 的性能消耗和非常小的间隔而有所不同。

# pyqt4 - PyQt QTreeWidget - 从标题中“点击”信号

> ID：10364241
> 
> 赞同：0
> 
> 时间：2012-04-28T14:06:04.403
> 
> 标签：pyqt4, qtreewidget

是否可以使 QTreeWidget 的标题项可点击？（如果是的话，语法是什么？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T14:24:12.947

是的。[`setClickable`](http://qt-project.org/doc/qt-4.8/qheaderview.html#setClickable)方法就是`QHeaderView`方法。您可以`QHeaderView`通过调用[`header()`](http://qt-project.org/doc/qt-4.8/qtreeview.html#header)方法获取`QTreeWidget`.

# jdedwards - JDEdwards EnterpriseOne 8.12 Standalone Demo 的下载位置

> ID：10364246
> 
> 赞同：-1
> 
> 时间：2012-04-28T14:06:32.703
> 
> 标签：jdedwards

我可以从哪里下载 JDEdwards EnterpriseOne 8.12 Standalone Demo。请不要只说 edelivery.oracle.com。我在 edelivery.oracle.com 中搜索了很多，但找不到**8.12**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T02:40:25.133

从这里开始：edelivery.oracle.com

搜索：产品包：JD Edwards EnterpriseOne 平台：Microsoft Windows 32 位（即使是 64 位！）

查找带有描述的项目：JD Edwards EnterpriseOne 9.0 应用程序更新 2 媒体包

点击它，看到有4个文件要下载。它们总共大约 5 GB，标题为：JD Edwards EnterpriseOne 9.0 Update 2 和 8.98.4 Standalone with English and Language Translation (1/4) ... 依此类推直到 (4/4)

这篇文章将引导您完成所有这些： http: [//www.deepeshmd.com/enterpriseone/jd-edwards-enterpriseone-9-0-2-standalone-installation/](http://www.deepeshmd.com/enterpriseone/jd-edwards-enterpriseone-9-0-2-standalone-installation/)

# c# - 如何从数据库中填充组合框项目而不是到处复制相同的代码（如何更改我的代码以使用 OOP）？

> ID：10364247
> 
> 赞同：3
> 
> 时间：2012-04-28T14:06:50.677
> 
> 标签：c#, sql, oop, design-patterns, architecture

```
SqlDataReader myreader = null;
    SqlConnection sqlConn = null;

     cmbCat.Items.Clear();
    sqlConn = new SqlConnection("Data Source=tin;Initial Catalog=sample;Trusted_Connection=yes;");
    sqlConn.Open();
    SqlCommand sqlComm = new SqlCommand("SELECT members FROM  dbo.tbl_Category", sqlConn);

    myreader = sqlComm.ExecuteReader();
    if (myreader != null)
    {
        while (myreader.Read())
        {

            cmbCat.Items.Add(myreader["members"]);

        }
    }

    {
        if (myreader != null)
            myreader.Close();
        if (sqlConn != null)
        {
            if (sqlConn.State == ConnectionState.Open)
                sqlConn.Close();
        }
    } 
```

我在将数据从数据库中检索到组合框中时使用了以下代码。每次我需要将数据从数据库填充到组合框中时，我总是放置此代码。我想要做的是重建这段代码并将它放在一个类中，我要做的就是调用负责将数据填充到组合框中的函数。但我对如何做到这一点感到困惑。请帮我。提前谢谢你。祝你有美好的一天..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T14:38:02.590

您发布的代码中有几个问题。我将尝试提供一组简化的代码，但是如果您将这部分代码的各种需求（关注点）分开，您会发现许多不同的类，但我离题了。

首先，您**不**希望使用 COPY-PASTE 在应用程序中到处传播连接字符串。您应该创建一个专门的类来处理这个问题。

```
public class DatabaseGateway
{
  public IList<T> RetrieveSqlAs<T>(string queryString, ITransformer<SqlDataReader, T> rowTransformer)
  {
    var result = new List<T>();
    using (var sqlConn = new SqlConnection(connectionString))  // you can use a CONSTANT, or call to a .config file here
    using (var sqlCommand = new SqlCommand(queryString, sqlConn))
    {
      var myreader = sqlComm.ExecuteReader();
      while (myreader.Read())
      {
         result.Add(rowTransformer.Transform(myreader));
      }
    }
    return result;
  }
}

public class MemberRowTransformer : ITransformer<SqlDataReader, string>
{
  public string Transform(SqlDataReader from)
  {
    from["members"];  // handle null and anything else here
  }
}

public interface ITransformer<TFrom, TTo>
{
  TTo Transform(TFrom)
} 
```

然后你像这样使用它：

```
var gateway = new DatabaseGateway();
var transformer = new MemberRowTransformer();

cmb.Items.Clear();
foreach (string i in gateway.RetrieveSqlAs("SELECT members FROM  dbo.tbl_Category", transformer))
{
  cmb.Items.Add(i);
} 
```

如果到目前为止你和我在一起，请朝着`Repository Pattern`. 添加这个类：

```
public class MembershipRepository
{
   public List<string> GetMembers()
   {
     var gateway = new DatabaseGateway();
     var transformer = new MemberRowTransformer();
     var result = new List<string>();

     foreach (string i in gateway.RetrieveSqlAs("SELECT members FROM  dbo.tbl_Category", transformer))
     {
       result.Add(i);
     }

     return result;
   }
} 
```

然后您的调用代码变为：

```
var repository = new MembershipRepository();
cmb.Items.Clear();
foreach(string i in repository.GetMembers())
{
   cmb.Items.Add(i);
} 
```

如果您研究以下主题：泛型、存储库模式和数据传输对象 (DTO)，您会发现许多关于如何创建可以重用而不是复制代码的类的好主意。

**注意：**我还没有完成将事物拆分为接口的整个练习，以便您可以轻松进行单元测试和依赖注入，这是一个更大的主题，但也是一件好事！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T14:16:10.540

通常，您希望将表示逻辑与业务/数据访问逻辑分开。因此，您的数据访问代码应该以通用形式返回数据，例如某个`DataTable`或某种自定义集合。然后您在表单上的调用代码将负责将其填充到组合框中：

```
public List<string> GetCategories()
{
    List<string> cats = new List<string>();
    SqlDataReader myreader = null;
    ...
    while (myreader.Read())
        cats.Add((string)myreader["members"]);
    ...
    return cats;
} 
```

然后在你的表单中，你会做这样的事情：

```
protected void DoDataBinding()
{
    MyDataAccessClass dataAccess = new MyDataAccessClass();
    List<string> cats = dataAccess.GetCategories();
    cmb.Items.Clear();
    foreach (string cat in cats)
        cmb.Items.Add(cat);
} 
```

# algorithm - 编程难题：如何画板？

> ID：10364248
> 
> 赞同：5
> 
> 时间：2012-04-28T14:06:57.713
> 
> 标签：algorithm, language-agnostic, puzzle

`N x M`我们应该画一块板子。我们可以一次绘制整行或整列。给定`N x M`所有板单元的颜色矩阵，找到绘制板的最少绘画操作数。

例如：我们应该画一个 3 x 3 板如下（R - 红色，B - 蓝色，G - 绿色）：

B, B, B
B, R, R
B, G, G

绘制操作的最小数量为 4：

*   用蓝色绘制第 0 行
*   用红色绘制第 1 行
*   用绿色绘制第 2 行
*   用蓝色绘制第 0 列

你会怎么解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T14:32:02.037

这看起来是一个有趣的问题。让我用一些伪代码来试一试。

```
Function MinPaints(Matrix) Returns Integer
    If the matrix is empty return 0
    Find all rows and columns which have a single color
    If there are none, return infinity, since there is no solution
    Set the current minimum to infinity
    For each row or column with single color:
        Remove the row/column from the matrix
        Call MinPaints with the new matrix
        If the result is less than the current minimum, set the current minimum to the result
    End loop
    Return the current minimum + 1
End Function 
```

我认为这将解决您的问题，但我没有尝试任何优化或任何东西。不过，这可能还不够快，我不知道。我怀疑这个问题是否可以在次指数时间内解决。

下面是这个算法如何解决这个例子：

```
BBB
BRR
BGG
|
+---BRR
|   BGG
|   |
|   +---RR
|   |   GG
|   |   |
|   |   +---GG
|   |   |   |
|   |   |   +---[]
|   |   |   |   |
|   |   |   |   Solvable in 0
|   |   |   |
|   |   |   Solvable in 1
|   |   |
|   |   +---RR
|   |   |   |
|   |   |   +---[]
|   |   |   |   |
|   |   |   |   Solvable in 0
|   |   |   |
|   |   |   Solvable in 1
|   |   |
|   |   Solvable in 2
|   |
|   Solvable in 3
|                       BB
+---Another branch with RR ...
|                       GG
Solvable in 4 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T14:25:57.640

对于初学者，您可以尝试进行**知情的详尽搜索**。

让您的状态图为：`G=(V,E)`where`V = {all possible boards}`和`E = {(u,v) | you can move from board u to v within a single operation}`。

*   请注意，您不需要提前生成图表 - 您可以使用`successors(board)`函数即时生成它，该函数返回给定板的所有后继者。

您还需要`h:V->R`- 一个评估板^(1的)[可接受启发式函数](http://en.wikipedia.org/wiki/Admissible_heuristic)。

现在，您可以运行[A*](http://en.wikipedia.org/wiki/A%2a_search_algorithm)或[双向](http://en.wikipedia.org/wiki/Bidirectional_search)BFS 搜索 [或两者的组合]，您的源将是一个白板，您的目标是请求的板。因为我们使用了可接受的启发式函数 - A* 既是[完整](http://en.wikipedia.org/wiki/A%2a_search_algorithm#Admissibility_and_optimality)的（如果存在，则总是找到解决方案）和[最优](http://en.wikipedia.org/wiki/A%2a_search_algorithm#Admissibility_and_optimality)的（找到最短的解决方案），它会找到最佳解决方案。[同样适用于双向 BFS]。

**缺点：**

*   尽管该算法被告知，但它将具有指数行为。但如果是面试问题，我相信没有效率的解决方案总比没有解决方案好。
*   尽管是完整且最优的——如果没有解决方案——算法可能会陷入无限循环，或者至少是一个很长的循环，直到它意识到它已经排除了所有的可能性。

(1) 可接受启发式的例子是`h(board) = #(miscolored_squares)/max{m,n}`

# php - 没有 curl_multi_select() 的 PHP curl_multi_exec() 示例？

> ID：10364258
> 
> 赞同：1
> 
> 时间：2012-04-28T14:07:59.317
> 
> 标签：php, curl-multi

有没有人有使用[curl_multi_exec](http://www.php.net/curl_multi_exec) () 没有[curl_multi_select](http://www.php.net/curl_multi_select) () 的例子？我们的一台服务器仍然使用 Centos5 和 PHP5.1.x。

此外，该示例应允许在每个人完成之前处理句柄。

我的实现在没有 Content-Length 参数和请求正文超过缓冲区大小 (16k) 的站点上存在问题。如果没有来自服务器的 Content-Length，则[curl_getinfo](http://www.php.net/curl_getinfo) ()['download_content_length'] 始终为 -1。

# sql-server - SQL Server 没有为每个连接的网络服务器授予相等数量的连接？

> ID：10364261
> 
> 赞同：0
> 
> 时间：2012-04-28T14:08:48.303
> 
> 标签：sql-server, performance, connection-pooling

我负责将现有的软件应用程序迁移到我们的应用程序。这是需要在 24 小时内完成的事情，但我面临一些问题。我试图找出为什么有些事情很慢。

我的设置；SQL Server 2008 R2 和 7 个相同的 VM。每个 VM 有大约 7 个 WCF 服务（普通 WCF，但也有 Worfklow 服务）在运行。

当我的迁移运行时，我可以在 SQL Server 中看到 1 个特定 VM 与 SQL Server 有更多连接。我为此使用以下查询：

```
SELECT des.program_name,des.login_name,des.host_name,
--der.database_id,
COUNT(des.session_id) [Connections]
FROM sys.dm_exec_sessions des
INNER JOIN sys.dm_exec_connections DEC
ON des.session_id = DEC.session_id
WHERE des.is_user_process = 1
--AND des.status != ’running’
GROUP BY des.program_name,des.login_name,des.host_name
--,der.database_id
HAVING COUNT(des.session_id) > 2
ORDER BY COUNT(des.session_id) DESC 
```

我的输出如下：

```
program_name    login_name  host_name   Connections
.Net SqlClient Data Provider    CONSQL3\Administrator   VM1 120
.Net SqlClient Data Provider    CONSQL3\Administrator   VM5 43
.Net SqlClient Data Provider    CONSQL3\Administrator   VM2 41
.Net SqlClient Data Provider    CONSQL3\Administrator   VM7     39
.Net SqlClient Data Provider    CONSQL3\Administrator   VM4     39
.Net SqlClient Data Provider    CONSQL3\Administrator   VM6 39
.Net SqlClient Data Provider    CONSQL3\Administrator   VM3 38
Microsoft SQL Server Management Studio - Query  CONSQL3\bent    CONSQL3 23
Microsoft SQL Server Management Studio  CONSQL3\bent    CONSQL3 5 
```

我必须能够监控每个 VM 的处理过程，并且我可以看到 VM1 实际上的处理速度要快得多。VM1 也是迁移中第一个启动并开始使用数据库的 VM。说其他 VM 运行速度较慢是因为它们没有尽可能优化地使用连接池，这是否正确？VM1 对连接是否过于贪婪？

每个 VM 在连接字符串中都有相同的 Min Pool Size 和 Max Pool Size 设置...

SQL 在提供连接方面是否有某种限制？我需要调整一些设置吗？是否有我应该查看的特定性能计数器以找出导致此问题的原因？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T18:45:34.937

SQL Server 不限制连接数量。因此，没有“授予”。每个人都可以来开一个。你只有一个特别贪婪的网络服务器。

分析服务器以查看为什么打开了这么多连接。是否有许多请求同时运行？连接是否在使用后未关闭或处置？

# sql - Oracle Triggers Update 基于 orderlines 完成如何避免突变错误

> ID：10364264
> 
> 赞同：1
> 
> 时间：2012-04-28T14:09:00.393
> 
> 标签：sql, oracle, triggers, event-triggers

对于典型的产品和运输数据库，我正在探索运行触发器的最佳方法：

1.  当订单行设置为“完成”时，将运行触发器：
2.  查找该订单的任何其他订单行。
3.  如果该订单的所有其他订单行也是“完成”
4.  更新订单**标题**表以完成。

对于 clatiry：订单标题表将存储整个订单总额，而 orderLines 表存储订单的每个产品。

到目前为止，触发器是这样编写的：

```
CREATE OR REPLACE TRIGGER orderComplete
after update ON orderline
for each row
WHEN (new.orderline_fulfilled = 'Y')
DECLARE count NUMBER := 5;
ordersNotDone NUMBER;
BEGIN

SELECT COUNT(Orderline_fulfilled) INTO ordersNotDone
FROM orderHeader
JOIN orderline ON
orderHeader.Order_id = orderLine.Orderline_order
WHERE Order_id = :old.orderline_order
AND orderline_fulfilled = 'Y';

IF ordersNotDone = 0
THEN
UPDATE orderHeader
SET completed = SYSDATE
    WHERE orderId = :old.orderline_order;
ENDIF;

END; 
```

在更新订单行时，上述情况会导致突变错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T21:51:13.140

使用触发器强制执行完整性本质上是有问题的，因为 RDBMS 读取一致性模式允许同时进行多个更改，而这些更改无法看到彼此的结果。

更好的解决方案可能是避免对数据进行非规范化，并依靠检测不完整订单行的存在来识别不完整订单。由于这将是少数情况，因此可以使用基于函数的索引进行优化，如下所示：

```
create index my_index on orderline(case orderline_complete when 'NO' then orderid else null end) 
```

这将仅索引 orderline_complete 为“NO”的 orderline 的值，因此如果表中只有 100 个这样的行，则索引将仅包含 100 个条目。

识别不完整的订单只需使用查询对非常紧凑的索引进行完整或快速完整索引扫描：

```
select distinct
  case orderline_complete when 'NO' then orderid else null end orderid
from
  orderline
where
  case orderline_complete when 'NO' then orderid else null end is not null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T22:10:35.353

最简单的答案是使用稍微不同类型的触发器，它不是在更新行之后而是在更新表之后触发。这不会受到这个问题的影响。

所以做类似的事情：

```
CREATE or REPLACE TRIGGER trigger_name
AFTER INSERT ON orderline --note no for each row
BEGIN

  --loop over all orders which contain no unfulfilled orders
  FOR lrec IN (SELECT order_id FROM orderline group by order_id where not exists (select 1 from orderline where orderline_fulfilled = 'Y'))
  LOOP
    -- do stuff to order id because this are complete
  END LOOP;
END; 
```

所以在这里我们可能已经在插入上完成了多个订单，所以触发器需要处理这个问题。抱歉，我没有可以在家玩的 oracle 实例。希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T06:53:52.273

如果您使用的是 11g，请检查复合触发器，例如：[http ://www.toadworld.com/KNOWLEDGE/KnowledgeXpertforOracle/tabid/648/TopicID/TRGC1/Default.aspx](http://www.toadworld.com/KNOWLEDGE/KnowledgeXpertforOracle/tabid/648/TopicID/TRGC1/Default.aspx)

# javascript - 使用元素标记中指定的源 URL 实现 jQuery Autocomplete 插件

> ID：10364269
> 
> 赞同：1
> 
> 时间：2012-04-28T14:09:45.063
> 
> 标签：javascript, jquery, html, autocomplete

我正在实现这样的[jQuery AutoComplete 插件](http://jqueryui.com/demos/autocomplete/)：

HTML：

```
<input type='text' class='AutoComplete' url='/source/data'> 
```

jQuery：

```
$( ".AutoComplete" ).autocomplete({
    source: "/source/data"
}); 
```

上面的代码正在工作。现在我希望`source`自动完成选项的那部分应该从输入的`url`属性（`url='/source/data'`）中获取。

这怎么可能 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T15:47:13.693

您需要分别为每个文本框调用 autocomplete() 函数（设置源）。

```
function init(){
    $( ".autocomplete" ).each(function(ix,item){
       var $item = $(item),
           url = $item.attr('data-ac-url');
       $item.autocomplete({ source: url});
    });
}

$(document).ready(init); 
```

这适用于这个 HTML：

```
<input id='box1'
       class='autocomplete'
       value='' type='text'
       data-ac-url='/asp/autocomplete-src1.aspx' />
<input id='box2'
       class='autocomplete'
       value='' type='text'
       data-ac-url='/asp/ac-src2.php'/> 
```

要在元素标记中指定 URL，我建议使用[符合 HTML5 标准](http://ejohn.org/blog/html-5-data-attributes/)`data-???`的属性，如。

# c - 在 linux 2.6.39.4 内核中测试系统调用

> ID：10364270
> 
> 赞同：2
> 
> 时间：2012-04-28T14:09:48.410
> 
> 标签：c, linux-kernel, system-calls

我正在进行一个新的系统调用来获取 FCFS 调度的平均等待时间。我将系统调用名称命名为“add2”。现在成功编译内核后，我在测试系统调用时遇到了问题。

通过一些研究，我想出了这两个程序来测试我的系统调用。但是这些仍然存在一些问题。我认为问题在于传递论点。请帮忙。

这是 addnewsystemcall.h

```
#include<linux/unistd.h>
#define __NR_add2 307

long add2(int at[], int bt[], int n)
{
    return syscall(__NR_atvfcfs,i);
} 
```

这是 addnewsystemcall.c

```
#include<string.h>
#include <stdio.h>
#include "add2.h"

int main()
{
    int avgwt;

    int n,i,at[50],bt[50];

    printf("\n\nEnter the number of processes:");
    scanf("%d",&n);
    printf("\n\n BURST TIME and ARRIVAL TIME of thr process");

    for(i=0;i<n;i++)
    {
        printf("\n ARRIVAL TIME :");
        scanf("%d",&at[i]);
        printf(" BURST TIME : ");
        scanf("%d",&bt[i]);
    }

    printf("\n\nAverage waiting time = ");
    printf("%d\n", add2(int at[], int bt[], int n)); 
    return 0; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T06:44:22.943

添加系统调用是从内核获取信息的最难方法。不要这样做，除非你真的需要。

还有很多更好的方法，比如： 1\. 在or
下添加一个虚拟文件。这为您提供了一个非常易于使用的文本界面。 2\. 添加设备驱动，创建文件，使用功能。这更难使用，但可能更适合传递二进制结构。`/proc``/sys`
`/dev``ioctl`

# iphone - 在 xCode 中读取“CSV”文件

> ID：10364271
> 
> 赞同：2
> 
> 时间：2012-04-28T14:09:51.893
> 
> 标签：iphone, objective-c, ios, xcode, csv

你能帮我阅读这个 csv 文件吗？

## CSV 输出

"^GSPC",1403.36,"4/27/2012","4:32pm",+3.38,1400.19,1406.64,1397.31,574422720 "^IXIC",3069.20,"4/27/2012","5:30pm ",+18.59,3060.34,3076.44,3043.30,0

## 视图控制器.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *absoluteURL = @"http://myserver/data.csv";
    NSURL *url = [NSURL URLWithString:absoluteURL];
    NSString *fileString = [[NSString alloc] initWithContentsOfURL:url];
    NSScanner *scanner = [NSScanner scannerWithString:fileString];
    [scanner setCharactersToBeSkipped:
    [NSCharacterSet characterSetWithCharactersInString:@"\n, "]];
    NSMutableArray *newPoints = [NSMutableArray array];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T14:21:25.877

处理 CSV 解析比您的初始代码所暗示的要复杂得多，因为需要忽略带引号的分隔符。例如，

```
1,"Hello, world!",2 
```

有三列，但`NSScanner`会找到四个标记（`1`、`"Hello`、“世界！”和`2`）。

为了构建功能齐全的 CSV 解析器，需要处理许多特殊情况，因此使其工作的最快方法是使用预构建的解析器。例如，您可以使用[Stack Overflow 上此答案中](https://stackoverflow.com/a/3380724/335858)描述的解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-14T11:05:36.283

我可能来不及回答这个问题，但可能这个答案可以帮助某人轻松阅读 CSV 文件。这就是我没有阅读 CSV 文件的内容

```
 - (void)viewDidLoad {
    [super viewDidLoad];
   //  printing the file path

      NSMutableArray *colA = [NSMutableArray array];
      NSMutableArray *colB = [NSMutableArray array];
   NSMutableArray *colC = [NSMutableArray array];
   NSMutableArray *colD = [NSMutableArray array];
  //  NSString* fileContents = [NSTemporaryDirectory() 
stringByAppendingPathComponent:@"yourfile.csv"];
NSString *fileContents = [[NSBundle mainBundle] 
 pathForResource:@"yourfile" ofType:@"csv"];

  NSURL*URl = [NSURL fileURLWithPath:fileContents];

  //        NSString* fileContents = [NSString 
stringWithContentsOfURL:@"YourFile.csv"];
   NSError *error;
  NSString* fileContentss = (NSString *)[NSString 
 stringWithContentsOfURL:URl encoding:NSASCIIStringEncoding 
error:&error];

   NSMutableArray *newArra = [[NSMutableArray alloc] init];
   [fileContentss stringByReplacingOccurrencesOfString:@"\"" 
  withString:@""];
      NSArray* rows = [fileContentss 
   componentsSeparatedByString:@"\n"];

   NSMutableArray *roearr = [[NSMutableArray alloc] init];
   roearr = [rows mutableCopy];

    [roearr removeObjectAtIndex:[rows count] - 1];
      for (NSString *row in roearr){

          NSArray* columns = [row componentsSeparatedByString:@","];

          newArra = [columns mutableCopy];

         [newArra removeObjectAtIndex:[newArra count] - 1];
            [colA addObject:newArra[0]];
            [colB addObject:newArra[1]];
            [colC addObject:newArra[2]];
            [colD addObject:columns[3]];
       }

     NSLog(@"columns[0] %@",colA);
    NSLog(@"columns[0] %@",colB);
    NSLog(@"columns[0] %@",colC);
    NSLog(@"columns[0] %@",colD);

   // Do any additional setup after loading the view, typically from 
  a nib.
  } 
```

# linux - Debian Linux 脚本文件和数据文件位置

> ID：10364276
> 
> 赞同：0
> 
> 时间：2012-04-28T14:11:05.717
> 
> 标签：linux, debian

我有一个 Debian Linux 系统设置。我编写了各种 shell 脚本文件来执行各种任务，一些 python 脚本。这些脚本输出数据文件进行存储，其他脚本作用于数据文件以生成更多数据文件。

目前，所有这些文件都保存在根主目录下的一个文件夹中。

问题是，他们真的应该去哪里？

脚本文件是否应该进入 /usr/bin ？？？

数据文件在哪里，主目录？？？

一般规则是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:16:49.063

[http://tldp.org/HOWTO/HighQuality-Apps-HOWTO/fhs.html](http://tldp.org/HOWTO/HighQuality-Apps-HOWTO/fhs.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T14:20:04.663

我希望能够给出一个有用的答案，但我只能说“可能不是”和“这取决于”。

Debian 上的“/usr/bin”通常应该是软件包系统的域。不要用手把东西放在那里，除非你真的必须这样做。

你的东西可能不应该存在于“/root”中（我认为这就是“根主目录”的意思），而不是其他用户帐户的主目录。也许 /home/admin，假设您的用户帐户名为 admin。但是很有男子气概，因为您不应该以 root 身份登录，除了系统恢复。

你需要更具体地说明你在做什么以及为什么。如果您只是在沙盒系统中乱搞来学习 unix 脚本，那么答案可能是“没关系”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T14:24:42.600

@askovpen 很接近，但 Debian 有自己的[Filesystem Hierarchy Standard](http://www.debian.org/doc/packaging-manuals/fhs/fhs-2.3.html#USRLOCALLOCALHIERARCHY)。在 Debian 上，本地软件包位于`/usr/local`路径中已经存在的子目录中。该文档包含有关各种数据文件所在位置的信息。

# php - 不断更新数字

> ID：10364279
> 
> 赞同：0
> 
> 时间：2012-04-28T14:11:20.827
> 
> 标签：php, javascript, jquery, mysql, codeigniter

我想在页面上创建一个类似`1,299,282 images viewed`. 该数字`1,299,282`将从数据库表中作为自动递增列中的最大数字`id`使用`select max(id) from listings`

这个数字不需要在不重新加载页面的情况下更新 AJAX 样式，但如果最大值`id`确实变大了，理想情况下会在页面重新加载时改变。

有没有办法缓存这个，因为这个数字每 10 分钟才会改变一次。或者缓存这个工作量太大？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T14:53:34.337

你为什么要为此使用循环。只需简单地使用它。

```
$sql = "SELECT MAX(`ID`) FROM `LISTINGS`";
$result = mysql_query($sql);
$row = mysql_fetch_assoc($result);
$mynumber = $row['ID'];

echo $mynumber; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T14:17:30.830

如果您只在页面重新加载时这样做，请执行以下操作：

```
$sql = "SELECT * FROM `LISTINGS` ORDER BY `ID` Desc Limit 1;";
$result = mysql_query($sql);
while($row = mysql_fetch_assoc($result)) {
   $mynumber = $row['ID'];
}

echo $mynumber; 
```

这将为您提供数据库中最大的 ID 号。如果它上升，它将在重新加载页面并再次运行脚本时显示它。

编辑：真的不需要缓存，因为这是一个非常轻量级的脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:32:41.073

About the cache part, see [that answer](https://stackoverflow.com/a/10397975/922143) to the [Meta Cache or CodeIgniter Cache](https://stackoverflow.com/questions/10395235/meta-cache-or-codeigniter-cache/10397975) question.

# windows - windows 注册表配置文件文档

> ID：10364281
> 
> 赞同：2
> 
> 时间：2012-04-28T14:11:40.097
> 
> 标签：windows, registry, format, hive

我需要一个描述 microsoft windows 注册表配置单元文件格式格式的文档。我唯一能找到的是这个

[http://www.sentinelchicken.com/data/TheWindowsNTRegistryFileFormat.pdf](http://www.sentinelchicken.com/data/TheWindowsNTRegistryFileFormat.pdf)

但它与真正的注册表文件格式没有任何共同之处。这里描述的大多数事情根本不起作用。例如，在我的大多数本地文件中，“下一个蜂巢箱的相对偏移量”为 0。指向文件中最后一个 hbin 开始的指针指向 hbin 的中间。我知道微软没有记录这一点，但是我知道人们正在为注册表文件编写解析器，所以我认为应该有一个？有人知道更好的文件吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-15T12:54:02.040

我建议你只下载[hivex](http://libguestfs.org/download/hivex/)。它被广泛使用并针对真正的 Windows 配置单元进行了实战测试。

但是，您可以查看[lib/tools](https://github.com/libguestfs/hivex/tree/master/lib/tools) hivex 子目录，其中包含我为最初对格式进行逆向工程而编写的一些脚本，以及对我使用的文档的引用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T21:26:08.367

我正在寻找类似的东西。这是我到目前为止发现的（除了你提到的文章）：
[Manipulate Registry Hive files from C#](https://stackoverflow.com/questions/5780704/manipulate-registry-hive-files-from-c-sharp)
[hivex - Windows Registry "hive" extract library](https://libguestfs.org/hivex.3.html)

**编辑**
[http://files.volatileminds.net/winreg.txt](https://web.archive.org/web/20110107144933fw_/http://files.volatileminds.net/winreg.txt)这个链接不太精确，但对我来说比你的文档更容易理解

**编辑 2**
描述各种注册表解析程序[libhivex 的文章：Windows Registry hive extractor library](https://rwmj.wordpress.com/2009/10/28/libhivex-windows-registry-hive-extractor-library/)

# android - Android上的远程akka演员？

> ID：10364282
> 
> 赞同：5
> 
> 时间：2012-04-28T14:11:42.487
> 
> 标签：android, scala, sbt-android-plugin

我试图像往常一样使用akka与演员建立简单的远程连接，但我确定在使用来自android的akka​​时我还需要做其他事情有人可以帮忙吗？

```
import akka.actor.Actor.remote

// Establish Connection to Remote Actor                
val server = remote.actorFor(remoteActorID, rIP, rPort) 
```

我得到以下堆栈跟踪：

```
04-28 09:57:13.114: ERROR/AndroidRuntime(18536): FATAL EXCEPTION: Thread-741
        java.lang.ExceptionInInitializerError
        at akka.actor.Actor$.remote(Actor.scala:115)
        at edu.spsu.rgoodwin.networking.api.RemoteConnection.<init>(RemoteConnection.scala:18)
        at edu.spsu.rgoodwin.csrAndroidApp.ClientConfigActivity.routerRegistration(ClientConfigActivity.scala:234)
        at edu.spsu.rgoodwin.csrAndroidApp.ClientConfigActivity$$anon$1.run(ClientConfigActivity.scala:71)
        at java.lang.Thread.run(Thread.java:856)
        Caused by: java.lang.ExceptionInInitializerError
        at akka.util.ReflectiveAccess$Remote$.<init>(ReflectiveAccess.scala:52)
        at akka.util.ReflectiveAccess$Remote$.<clinit>(ReflectiveAccess.scala)
        ... 5 more
        Caused by: akka.config.ConfigurationException: Event Handler specified in config can't be loaded [akka.event.EventHandler$DefaultListener] due to [java.lang.ClassNotFoundException: akka.event.EventHandler$DefaultListener]
        [localhost_0e3e4c40-913a-11e1-b984-660379e93466]
        at akka.event.EventHandler$$anonfun$1.apply(EventHandler.scala:231)
        at akka.event.EventHandler$$anonfun$1.apply(EventHandler.scala:223)
        at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
        at scala.collection.immutable.List.foreach(List.scala:45)
        at akka.event.EventHandler$.<init>(EventHandler.scala:223)
        at akka.event.EventHandler$.<clinit>(EventHandler.scala)
        ... 7 more
        Caused by: java.lang.ClassNotFoundException: akka.event.EventHandler$DefaultListener
        at java.lang.Class.classForName(Native Method)
        at java.lang.Class.forName(Class.java:217)
        at java.lang.Class.forName(Class.java:172)
        at akka.util.ReflectiveAccess$.getClassFor(ReflectiveAccess.scala:222)
        at akka.event.EventHandler$$anonfun$1.apply(EventHandler.scala:225)
        ... 12 more
        Caused by: java.lang.NoClassDefFoundError: akka/event/EventHandler$DefaultListener
        ... 17 more
        Caused by: java.lang.ClassNotFoundException: akka.event.EventHandler$DefaultListener
        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:461) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T21:05:07.127

我让它与 Akka 2.0.2 和 Android 2.3.3 一起工作。你需要做的是：

1.  Akka jars 在同一路径中包含多个 reference.conf 的解决方法，这是 proguard 不喜欢的。通过从 jar 中删除 reference.conf 来执行此操作，而是包含一个自定义 reference.conf，其中包含jar 中*两个*文件的配置。

2.  将 Proguard 配置为包含由反射引用的来自 akka 的类，并忽略有关 sun.misc.Unsafe 的警告。我的配置：[https ://gist.github.com/3307987](https://gist.github.com/3307987)

3.  将 Netty 升级到 3.3.1（修复了使用 sun.misc.Unsafe 的问题）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T19:57:04.290

一切都需要部署在一个 jar 中。请参阅[在 Android 上使用 Scala 值得吗？有很多开销吗？问题？](https://stackoverflow.com/questions/3906532/is-using-scala-on-android-worth-it-is-there-a-lot-of-overhead-problems)有关将 Scala 部署到 android 的更多详细信息。

# c# - 使用后面的代码将数据绑定到 ComboBox

> ID：10364287
> 
> 赞同：1
> 
> 时间：2012-04-28T14:12:20.597
> 
> 标签：c#, wpf, xaml, data-binding, wpf-controls

我需要帮助，我只是想将一个简单的组合框绑定到包含此数据的 sql 数据库中的表：

```
EmployeesTbl:
-------------
EmpID    EmpName   JobID   HireDate     Deleted 
1        Tom       1       12/4/2005    false
2        steve     1       5/5/2005     false
3        Maria     2       2/8/2010     false 
```

```
<Window x:Class="TestGlassButton.Window4"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Window4" Height="300" Width="300">
       <Grid>
        <ComboBox Height="23" HorizontalAlignment="Left" Margin="54,213,0,0" 
                  Name="cmbCapsNme" VerticalAlignment="Top" Width="132" 
                  ItemsSource="{Binding}"
                  DisplayMemberPath="EmpArbName"
                  SelectedValuePath="EmpID"/>
       </Grid>
 </Window> 
```

```
namespace TestGlassButton
{

public partial class Window4 : Window
{
    public DataSet SelAllCaps()
    {
        SqlConnection SqlCon = new SqlConnection("Data Source=.;Initial Catalog=Rest;User ID=m*201m;Password=12345");
        // captains names & ID   
        SqlCommand SqlCmdAllCaps = new SqlCommand();
        SqlCmdAllCaps.Connection = SqlCon;
        SqlCmdAllCaps.CommandType = CommandType.Text;
        SqlCmdAllCaps.CommandText = "select EmpID ,EmpArbName from dbo.EmployeesTbl where JobID = 3 order by EmpArbName";
        SqlCon.Open();
        SqlDataAdapter dapAllCaps = new SqlDataAdapter();
        dapAllCaps.SelectCommand = SqlCmdAllCaps;
        DataSet dsAllEmpsInfo = new DataSet();
        dapAllCaps.Fill(dsAllEmpsInfo, "EmployeesTbl");
        SqlCon.Close();
        return dsAllEmpsInfo;
    }

    private void BindCaps()
    {

        DataSet ds = SelAllCaps();
        List<CapsClass> capList = new List<CapsClass>();
        for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
        {
            capList.Add(new CapsClass(Convert.ToInt32(ds.Tables[0].Rows[i]["EmpID"]),
                ds.Tables[0].Rows[i]["EmpArbName"].ToString()));
        }
        ds = null;
        cmbCapsNme.ItemsSource = capList;
        cmbCapsNme.DisplayMemberPath = "EmpArbName";
        cmbCapsNme.SelectedValuePath = "EmpID";
        cmbCapsNme.SelectedIndex = -1;
    }

    public Window4()
    {
        InitializeComponent();
        BindCaps();
     }
}
class CapsClass
{
    Int32 _capID=-1;
    string _capNme;

    public CapsClass(Int32 CapID, String CapNme)
    {
        this._capID = CapID;
        this._capNme = CapNme;
    }

    public Int32 CapID
    {
        get { return _capID; }
        set { _capID = value; }
    }

    public string CapNme
    {
        get { return _capNme; }
        set { _capNme = value; }
    }
}
} 
```

但是当我执行我的项目时，我的组合框中没有出现数据，它只显示没有。的行。有什么错误和我的代码，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T14:23:25.990

您的组合框具有 DisplayMemberPath="EmpArbName" 和 SelectedValuePath="EmpID" 但您的 CapClass 没有具有此名称的属性。

我将尝试将该属性更改为 CapID 和 CapNme，或直接绑定到数据表。

```
cmbCapsNme.ItemsSource = ds.Tables[0]; 
```

# javascript - Javascript 日历重定向

> ID：10364292
> 
> 赞同：0
> 
> 时间：2012-04-28T14:13:26.363
> 
> 标签：javascript, calendar

我在我的网站上实现了这个日历： [http ://www.dynarch.com/projects/calendar/doc/](http://www.dynarch.com/projects/calendar/doc/)

如果他们点击一天，我想将用户发送到一个链接。链接需要包含日期：

```
<div class="DynarchCalendar-day DynarchCalendar-day-selected" dyc-date="20120420" unselectable="on" dyc-type="date">20</div> 
```

如果用户点击一天，我知道如何切换事件：

```
var LEFT_CAL = Calendar.setup({
        cont     : "cont",
        fdow     : 1,
        dateInfo : getDateInfo,
        onSelect : function() {
            <!--Here-->
        }       
}) 
```

如果他们点击它，我可以将用户重定向到另一个网页：

```
window.location = "http://www.google.com/" 
```

唯一不起作用的是我需要在域名后添加日期。例如：

```
window.location = "http://www.webpage.com?ShowDate=20120428" 
```

有人可以告诉我如何做到这一点吗？问题是我无法获取所选日期的日历（Class DynarchCalendar-day-selected）；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:05:43.330

```
 var LEFT_CAL = Calendar.setup({
                cont: "cont",
                weekNumbers: true,
                selectionType: Calendar.SEL_MULTIPLE,
                showTime: false,
                onSelect : function() {
                var selectedDate = $('td.DynarchCalendar-td-selected div').attr("dyc-date");
                window.location = "http://www.webpage.com?ShowDate="+selectedDate;
                }   

        }) 
```

# python - 在图中回溯

> ID：10364297
> 
> 赞同：2
> 
> 时间：2012-04-28T14:14:37.523
> 
> 标签：python, recursion, graph

在 python 中，我有一个图形作为邻接列表表示。以及从特定点到图中所有其他元素的距离。

```
graph = {
    1 :[2, 7],
    2 :[1, 3],
    3 :[2, 4, 8],
    4 :[3, 5, 9],
    5 :[4, 6, 9],
    6 :[5, 8, 10],
    7 :[1, 8,10],
    8 :[3, 6, 7, 9],
    9 :[4, 5, 8],
    10:[7, 6]
    }

distance = {1: 1, 2: 0, 3: 0, 4: 1, 5: 2, 6: 2, 7: 2, 8: 1, 9: 2, 10: 3} 
```

如何从元素回溯路径：例如，如果我尝试从 10 回溯，它应该返回：

```
[10, 7, 1, 2]
[10, 7, 8, 3]
[10, 6, 8, 3] 
```

我试图递归地做到这一点

```
def findprev(graph, distance, el, path = []):
    value = distance[el]
    if value == 0:
        print path
        path = []

    for i in graph[el]:
        if value - 1 == distance[i]:
            path.append(i)
            path = findprev(graph, distance, i, path)
    return path 
```

但显然我失去了一些重要的东西，因为结果是：

```
[7, 1, 2]
[8, 3]
[6, 8, 3] 
```

任何人都可以帮助找到一个错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:11:04.483

```
def findprev(graph, distance, el, path=None):
    if path is None:
        path = [el]
    else:
        path.append(el)
    value = distance[el]
    if value == 0:
        print(path)

    for i in graph[el]:
        if value - 1 == distance[i]:
            findprev(graph, distance, i, path[:])

findprev(graph, distance, 10) 
```

输出：

```
[10, 7, 1, 2]
[10, 7, 8, 3]
[10, 6, 8, 3] 
```

或者，如果您想返回结果路径：

```
def findprev(graph, distance, el, path=None):
    if path is None:
        path = [el]
    else:
        path.append(el)
    value = distance[el]
    if value == 0:
        return [path]

    result = []
    for i in graph[el]:
        if value - 1 == distance[i]:
            paths = findprev(graph, distance, i, path[:])
            for p in paths:
                result.append(p)
    return result 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T16:20:11.577

这是您问题的另一种解决方案。我重命名为`distance`，`distances`因为它对我来说似乎是一个更好的名称，并且我将名称`distance`用于每个点的距离。

```
>>> def find_paths(point,path=[]):
        distance = distances[point]
        elements = graph[point]
        if distance == 0:
            yield path + [point]
        else:
            for element in elements:
                if distances[element] == distance - 1:
                    for item in find_paths(element,path+[point]):
                        yield item

>>> for path in find_paths(10):
        print path

[10, 7, 1, 2]
[10, 7, 8, 3]
[10, 6, 8, 3] 
```

# javascript - 相同的 addEventListener 会起作用吗？

> ID：10364298
> 
> 赞同：38
> 
> 时间：2012-04-28T14:14:45.100
> 
> 标签：javascript, addeventlistener

```
elemen.addEventListener('click',func,false);
elemen.addEventListener('click',func,false); 
```

请问`func`点击后是否会被调用两次`elemen`？

如果是...是否有解决方案来检查是否存在相同的事件侦听器`elemen`？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-04-28T14:17:27.597

`func`不会在点击时被调用两次，不**；**但请继续阅读以了解详细信息和“陷阱”。

从[`addEventListener`](https://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-EventTarget-addEventListener)规范中：

> 如果使用相同的参数在`EventListeners`同一设备上注册了多个相同`EventTarget`的实例，则会丢弃重复的实例。它们**不会**导致`EventListener`被调用两次，并且由于它们被丢弃，因此不需要使用该`removeEventListener`方法将其删除。

*（我的重点）*

这是一个例子：

```
var target = document.getElementById("target");

target.addEventListener("click", foo, false);
target.addEventListener("click", foo, false);

function foo() {
  var p = document.createElement("p");
  p.innerHTML = "This only appears once per click, but we registered the handler twice.";
  document.body.appendChild(p);
}
```

```
<input type="button" id="target" value="Click Me">
```

不过，重要的是要注意，它必须是**同一个函数**，而不仅仅是一个做同样事情的函数。例如，在这里我将四个单独的函数连接到元素，所有这些函数都将被调用：

```
var target = document.getElementById("target");

var count;
for (count = 0; count < 4; ++count) {
  target.addEventListener("click", function() {
    var p = document.createElement("p");
    p.innerHTML = "This gets repeated.";
    document.body.appendChild(p);
  }, false);
}
```

```
<input type="button" id="target" value="Click Me">
```

这是因为在每次循环迭代中，都会创建一个*不同*的函数（即使代码相同）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-02-05T22:36:31.597

我只想补充@TJ Crowler 提供的出色答案。

我有一个特定的任务，要求我为同一个事件向 HTML 元素添加两次相同的回调。确实，第二个丢弃了第一个，但是：

> 如果多个相同的 EventListener 在同一个 EventTarget 上注册了相同的参数，则重复的实例将被丢弃。它们不会导致 EventListener 被调用两次，也不需要使用 removeEventListener() 方法手动删除。
> 
> 但是请注意，当使用匿名函数作为处理程序时，此类侦听器将不相同，因为即使使用相同不变的源代码定义，匿名函数也不相同，只是重复调用，即使在循环中也是如此。

来源：[https](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Multiple_identical_event_listeners) ://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Multiple_identical_event_listeners （截至 2020 年 2 月 5 日。）

因此，如果第二个 EventListener 将其处理程序作为匿名函数，它不会丢弃第一个。所以它只会被调用两次。

循环解决方案的替代方案。

# c++ - 在 C++ 中执行线程的奇怪顺序

> ID：10364299
> 
> 赞同：1
> 
> 时间：2012-04-28T14:14:49.413
> 
> 标签：c++, c, multithreading, pthreads

我尝试执行[Linux Tutorial Posix Threads](http://www.yolinux.com/TUTORIALS/LinuxTutorialPosixThreads.html)中的第一个示例。这就是我所拥有的：

```
[alex@Allok c_c++]$ g++ -lpthread from.cpp
from.cpp: In function ‘int main()’:
from.cpp:10:22: warning: deprecated conversion from string constant to ‘char*’ [-Wwrite-strings]
from.cpp:11:22: warning: deprecated conversion from string constant to ‘char*’ [-Wwrite-strings]
[alex@Allok c_c++]$ ./a.out 
Thread 2 
Thread 1 
Thread 1 returns: 0
Thread 2 returns: 0 
```

问题是我希望得到像消息来源所说的输出：

```
Thread 1
Thread 2
Thread 1 returns: 0
Thread 2 returns: 0 
```

我不明白为什么会这样。谁能帮我？

```
[alex@Allok c_c++]$ uname -a
Linux Allok 3.3.2-1-ARCH #1 SMP PREEMPT Sat Apr 14 10:08:43 UTC 2012 i686 AMD Athlon(tm) II Neo K125 Processor AuthenticAMD GNU/Linux 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-28T14:18:50.043

根据定义，线程是异步执行的（这完全是操作系统调度程序的突发奇想）。除非您明确使用同步机制，否则您不能假设它们是如何相互执行的。

# configuration - Glassfish 动态应用程序重新加载不起作用

> ID：10364301
> 
> 赞同：2
> 
> 时间：2012-04-28T14:14:57.307
> 
> 标签：configuration, glassfish-3

我正在运行 Glassgfish 3.1.2，我希望它在我运行构建并将新类文件复制到应用程序（在 domain1/applications/ 中）时自动重新加载应用程序。

在 Glassfish 管理员中，我转到域 -> 应用程序配置，并选中“重新加载”。“重新加载轮询间隔”设置为 2 秒。

这是否意味着如果我复制新的类文件，然后在 2 秒内，Glassfish 将重新加载应用程序？好像没注意 我在日志中看不到任何显示应用程序已重新加载的内容，并且我的新类文件没有被拾取。我已经确认他们正在正确复制。

我错过了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:58:08.020

您似乎在 Glassfish 的配置中做对了。

您可能希望通过自己更新应用程序目录中的文件来手动触发重新加载，这样您就会知道是自动重新加载损坏了，还是重建时复制 .class 文件的过程。

有关动态重新加载的更多信息，请参阅 Oracle 的文档，该页面底部有一个关于手动更新应用程序目录的部分。

[http://docs.oracle.com/cd/E19879-01/820-4337/beadz/index.html](http://docs.oracle.com/cd/E19879-01/820-4337/beadz/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-16T15:34:53.410

`web.xml`在您的文件中检查此配置：

`<context-param> <param-name>javax.faces.PROJECT_STAGE</param-name> <param-value>Development</param-value> </context-param>`

如果`<param-value>`设置为`Production`您的应用程序在您再次部署之前不会刷新。

# datetime - 给定一个整数数组 {1..n} 和一个日期，我如何根据日期随机选择一个唯一元素？

> ID：10364303
> 
> 赞同：0
> 
> 时间：2012-04-28T14:15:50.497
> 
> 标签：datetime, random, generator, choice

我只是概括了标题中的问题。

我正在解决的实际问题是这个。我正在制作一个网站，我需要填写网站的“随机文章”部分。这篇随机文章必须显示一整天。因此，我试图提出一种算法，该算法将根据今天的日期从数据库中选择 1 个元素。

我有一个包含大约 100,000 篇文章的数据库。

假设今天的日期是`2012-04-28`。我也许可以总结数字来选择文章的 ID。在这种情况下，2012+4+28 = 2044。但这是一个问题，`2012-04-28`并且`2013-04-27`会显示同一篇文章。

我也不希望算法在附近的两天内两次选择同一篇文章。我希望选择是独一无二的。（理想情况下，我希望它是一个生成函数，涵盖连续 100,000 天的全部 100,000 篇文章。）

我想不出根据日期选择文章的不同方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T14:25:26.783

您可以将日期制作`2012-04-28`成为`20120428`。

我知道这个数字大于您数据库中的文章数量，但是您可以减去开始显示这些文章的日期，然后显示`20120428-20120428=0`今天的文章和`20120429-20120428=1`明天的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T22:26:45.790

我会以不同的方式处理这个问题。我会为每篇文章分配一个唯一编号，并从 [1..number of article] 范围内选择一个随机数。这使您克服了生成有效随机日期的困难。

分配编号的一种方法是按发布日期对文章进行排序，然后将最旧的文章分配为 1，依此类推。如果这些文章存储在数据库中，那么数据库的主键很可能适合您的需要。

顺便说一句，文章分配编号的方式并不重要。甚至不需要对文章集进行排序即可使该想法起作用（例如，如果它们存储在无序哈希表中）。

在极少数情况下，您可能需要多次调用生成器函数，它会为不再可用的文章返回一个数字（可能是隐藏或删除）。但是，假设不可用文章的数量很少，这种情况不会经常发生，也不会成为性能问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T14:41:35.647

如果您只是计算您的网站上线后的天数，那么您的问题归结为将序列 1、2、3……映射*`n`*到一个随机序列。

一个简单的方法是创建一个数组，其中包含从 1 到**随机顺序**的数字。然后，对于每一天，您都可以使用该元素。*`n`* ***`i`**`i^(th)`***

 **例如，假设*`n`*= 4 并且您已经像这样随机填充数组：

```
a[0] = 3
a[1] = 1
a[2] = 4
a[3] = 2 
```

该数组具有随机序列 3、1、4、2，因此随着时间的推移，您将选择文章 3，然后是文章 1，然后是文章 4，最后是文章 2。**

# android - 如何制作一个始终运行的应用程序，例如“高级任务清理器”？

> ID：10364305
> 
> 赞同：0
> 
> 时间：2012-04-28T14:15:54.653
> 
> 标签：android, android-intent, android-widget

作为标题，我怎样才能制作一个可以在后台持续运行的android应用程序？我在安卓市场找到了一个类似的应用程序，那就是“高级任务清洁器专业版”。它总是在运行。如果我强行阻止它，它就会被杀死。但几秒钟后，我看到它再次运行。

对我有什么解决办法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:36:59.557

您可以使用 AlarmManager 定期唤醒您的应用。

# android - java.crypto mac/linux JVM & Android 2.2 到 Android 2.3 上的不同输出

> ID：10364308
> 
> 赞同：1
> 
> 时间：2012-04-28T14:16:16.617
> 
> 标签：android, encryption

以下代码在我的笔记本电脑、服务器和 Android v2.2 上的 JVM 上按预期解密字符串。但是，如果我在 Android 2.3 上使用完全相同的代码，则会得到不正确的输出。我认为这可能是由于其中一个函数的默认值不同，但我很确定我没有使用任何默认值......

```
 private void test() {

        try {
            String stringMessage="GEQRpAPA577ks/QveudNkk7H9DjItKGLDYW6xhH1YJGabCVzrkejkBh6S+APwEXxB84UV/q0sO5rqkgXWONJQ8CoMTfqXtUkAAwkYHSc86eGewkM8WpctA0AyNVFonOxDCXm84Uq8JRMzqskSH5VXHmMxvHIvpFgdhmt9Ir0cKWzoLsuvgfY9hfypfEyBXGZcoptQeKhsZxRGIlxbXhrFl/LqhC+F6vYtZ/j5pv2LUP38wh2rTCKnAQ+xvC+7wn5SVzt/Wbr/q7GjCoJuU9uFHQSS49KQDt+BzJL2XNwAMmdbC+XHYkEBBWxVSS+0hdSQxoaKVZZJk4hTnHwQlBAkw==";
            //Convert String back to Byte[] and decrpt
            byte[] byteMessage = Base64.decodeBase64(stringMessage.getBytes("UTF-8"));
            System.out.println("ENCRYPTED MESSAGE byte Length: "+byteMessage.length);

            String decryptedMsg = decryptString(byteMessage, loadCASPrivateKey());
            System.out.println(decryptedMsg);
        } catch (Exception e) {
            e.printStackTrace();
            return;
        }
    }

    private static String decryptString(byte[] message, Key privateKey) throws InvalidKeyException, NoSuchAlgorithmException, NoSuchPaddingException, IllegalBlockSizeException, BadPaddingException, UnsupportedEncodingException, NoSuchProviderException {
        Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());

        Cipher cipher = Cipher.getInstance("RSA/None/NoPadding","BC");
        cipher.init(Cipher.DECRYPT_MODE, privateKey);

        byte[] cipherData = cipher.doFinal(message);
        return new String(cipherData, "UTF-8");
    }

    private PrivateKey loadCASPrivateKey() throws IOException, NoSuchAlgorithmException, InvalidKeySpecException {
        InputStream is = getClass().getResourceAsStream( "/keys/app-private.key" );
        if (is == null) {
            System.out.println("NULL");
        }
        byte[] encodedPrivateKey = new byte[(int) 1216];
        is.read(encodedPrivateKey);
        is.close();

        // Generate KeyPair.
        KeyFactory keyFactory = KeyFactory.getInstance("RSA");

        PKCS8EncodedKeySpec privateKeySpec = new PKCS8EncodedKeySpec(encodedPrivateKey);
        PrivateKey privateKey = keyFactory.generatePrivate(privateKeySpec);

        return privateKey;

    } 
```

输出：

> 04-28 15:00:05.969: I/System.out(677): ���;��bW�Q<�tz.�c4Ă핆�Q�"��6����"bW �k!� </p>

# php - SWF 文件可以在一段时间内存储完整的数据，javascript 和 HTML5 的力量也可以做到吗？

> ID：10364310
> 
> 赞同：0
> 
> 时间：2012-04-28T14:16:28.247
> 
> 标签：php, javascript, html

我的问题很简单。在 adobe flash files(swf) 中，您实际上可以捕获完整的信息并将其存储，然后通过运行 ht swf 文件来访问它。

现在 HTML5 被认为是 html 页面中 flash 的替代品。那么使用 HTML5 和 javascript 我们真的可以以某种方式存储相同的数据，然后再访问它吗？

例如，假设我想捕获用户在网页上移动光标的所有信息。我可以使用 swf 文件（从 php 生成）来做到这一点。因此，稍后如果该网页的所有者想要查看特定用户如何在页面上移动光标，他就可以看到该 Flash 视频。

但是我怎么能用 HTML5 和 javascript 做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:35:38.013

这真的取决于你想做什么。在您的示例中，您可以使用 JavaScript 在指定的时间间隔或用户移动鼠标时查找鼠标的坐标。然后，您可以使用 AJAX 调用将该数据发布到 PHP 脚本以将其持久化。然后，“回放”将只是检索数据并在浏览器上显示动画的情况。显然，这根本不依赖于 HTML5。

快速了解如何使用 jQuery 工作：

```
var mouseCoordinates = [];
$(window).unload(function() {
    $.ajax({
        type: 'POST',
        url: 'yourScript.php',
        data: { movements: mouseCoordinates },
        async: false
    });
}

$(".container").mousemove(function(e) {
    mouseCoordinates.push({x: e.pageX, y: e.pageY});
}); 
```

显然这不是一个完整的解决方案。

# ruby-on-rails - 如何在生产中访问 Spree 的管理部分？

> ID：10364312
> 
> 赞同：8
> 
> 时间：2012-04-28T14:16:44.743
> 
> 标签：ruby-on-rails, admin, spree

我已按照 Spree 说明进行设置，并使其在开发模式下工作。我使用 Capistrano 将机架空间部署到生产服务器，但是相同的默认登录名（“spree@example.com”/“spree123”）不起作用。我在 Web 界面中创建了一个用户，但它当然没有管理员权限。

指南中没有任何内容考虑到这一点 - 当最初根本没有用户时，如何在生产中创建管理员用户？也许我部署不正确？我正在使用一个非常标准的 deploy.rb，必须有一些特定于狂欢的代码来设置它吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-02T00:38:35.987

`rake spree_auth:admin:create`如果您使用 spree_auth_devise，您可以运行

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-07T21:36:22.270

您可以从控制台将任何用户添加到 Spree 管理员角色`rails c`，执行以下操作：

```
user = user.find({your id})
user.spree_roles << Spree::Role.find_by_name(:admin) 
```

在生产中，您可以这样运行控制台：

```
RAILS_ENV=production rails c 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-10T11:24:37.060

如果您使用 heroku 进行部署，请确保执行以下操作：

```
heroku run rake db:migrate
heroku run rake db:seed 
```

种子将要求您为您的管理员帐户创建用户名和密码。

希望这有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T21:05:10.130

如果您创建的用户是第一个用户，它实际上将具有管理员权限。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T14:26:47.343

出色地，

我建议您从控制台手动创建用户，SSH 到服务器，导出 RAILS_ENV=production，rails c，然后找到您想要的用户（如果存在），然后手动更新密码，或者简单地创建新用户。您想要的，并且根据您的 Spree 版本，您只需手动将一条记录插入到其中 role_id 为 1 且 user_id 是您刚刚创建的用户的 id 的角色用户中。

这可能取决于您使用的版本。但我只是从控制台做，在我看来这更容易。

您也可以在自己的站点上注册一个帐户，然后转到控制台，找到该用户并添加角色。真的有一百万零一种方法可以做到这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-14T02:21:39.660

您可以使用以下命令

```
rails spree_auth:admin:create RAILS_ENV=production 
```

# asp.net - 如何在asp中提交表单并获取其值

> ID：10364315
> 
> 赞同：2
> 
> 时间：2012-04-28T14:17:13.587
> 
> 标签：asp.net, html

我有一个带有单选按钮的表单和一个仅重新加载页面而不提交表单数据的提交按钮......我应该在表单操作或方法中做什么，以便我可以获得这些单选按钮值

```
<form id="form2" name="form2" method="post" action="" runat="server">

    <br />

    <asp:Button ID="Button1" runat="server" Text="Button" />
</form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T17:35:23.977

您的代码似乎没有任何单选按钮控件...

显示不同选项的示例：

HTML

```
<form id="form1" runat="server">
 <div>
    <p>
        Name:
        <asp:TextBox ID="textbox1" runat="server" />
        <br />
        Coffee preference:
        <asp:RadioButtonList ID="CoffeeSelections" runat="server" RepeatLayout="Flow" RepeatDirection="Horizontal">
            <asp:ListItem>Latte</asp:ListItem>
            <asp:ListItem>Americano</asp:ListItem>
            <asp:ListItem>Capuccino</asp:ListItem>
            <asp:ListItem>Espresso</asp:ListItem>
        </asp:RadioButtonList>
        <br />
    </p>
    <asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" />
</div>
<div>
    <h1>
        Results</h1>
    <p>
        <asp:Label runat="server" ID="labelResults"></asp:Label></p>
</div>
</form> 
```

代码：

```
//You can inspect on Page_Load
protected void Page_Load(object sender, EventArgs e)
{
    //Only inspect on submission
    if (Page.IsPostBack)
    {
        if (!string.IsNullOrEmpty(CoffeeSelections.SelectedValue))
        {
            labelResults.Text = CoffeeSelections.SelectedValue + "<br />";
        }

        //you can also inspect request.form colletion
        foreach (string item in Request.Form)
        {
            labelResults.Text += "<b>KEY</b> : " + item + " <b>VALUE</b> = " + Request.Form[item] + "<br />";
        }
    }
}

//You can also inspect on raised control events (e.g. button)
protected void Button1_Click(object sender, EventArgs e)
{
    string _foo = CoffeeSelections.SelectedValue;
    labelResults.Text += _foo;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T14:54:45.413

ASP.NET Web 窗体试图给您一种假象，即您正在使用类似于 Windows 窗体应用程序的东西。如果您来自 Html 背景，则需要一些水土不服。

尽管 ASP.NET “FORM” 拼写相同的四个字母，但它与标准的 Html <FORM> 不同。默认情况下，Button1*不是*标准 Html <FORM> 中的提交按钮。一个 ASP.NET FORM 中可以有多个 Button 控件。每个 Button 控件都必须绑定到一个 onClick 事件处理程序，*即一个*Windows 窗体，并且您将代码放在此事件处理程序中。

双击 ASPX 设计选项卡中的 Button1，将在代码隐藏页面中为您生成一个 Button1_Click 事件。将您的代码放入此事件处理程序中。

然后，ASP.NET 生成一些 Html 输出，以使您的 Button1 成为带有 onClick 脚本（不要与 Button1_Click 事件处理程序混淆）的 <INPUT TYPE='SUBMIT'> Html 控件，以使用包含的表单参数回发到服务器一个巨大的，叫做 __VIEWSTATE。然后，服务器使用 __VIEWSTATE 确定您在 Button1_Click 事件处理程序中并继续在那里执行代码。

单选按钮也是如此。ASP.NET 将从您的单选按钮生成 <INPUT TYPE='RADIO'>，但您不必（或不应该）关注这一点。在 Button1_Click 事件处理程序中，您可以读取 ASP.NET 单选按钮控件的属性。

使用 ASP.NET，基本上您应该不知道并放弃对生成的 Html 输出的控制。您应该只使用在服务器上可见的对象（代码隐藏）。<asp:Button ID='Button1' runat='server'> 甚至不会生成到 <input type='submit' name='Button1' id='Button1'> 除了最简单的 ASP.NET 页面。

# sharepoint - SharePoint 2010 - 在没有密码的声明 Web 应用程序上单点登录，如 SetAuthCookie()

> ID：10364320
> 
> 赞同：0
> 
> 时间：2012-04-28T14:17:35.120
> 
> 标签：sharepoint, sharepoint-2010, forms-authentication, claims-based-identity

我正在处理这样一个场景：用户单击 SAP 站点中的链接，将他/她带到 SharePoint 站点。为了完成单点登录，http 模块需要一个 SAP cookie，获取用户名并将用户登录到 SharePoint。

当在 SP 2007 上实施时，它曾经可以工作：只需调用 SetAuthCookie(username) 即可完成工作，用户访问 SharePoint 2007 站点，一切都按预期工作。

在 SharePoint 2010 声明 Web 应用程序上时，它停止工作。[根据 Steve Peschka 的这篇精彩文章](http://blogs.technet.com/b/speschka/archive/2010/07/21/writing-a-custom-forms-login-page-for-sharepoint-2010-part-1.aspx)，这几乎是意料之中的。所以我继续并开始替换 SetAuthCookie() 代码，但我面临两个问题

这是我的自定义登录代码。有没有不需要密码的 SetAuthCookie() 等价物？（不要介意硬编码的网址和密码......只是一个原型）

```
private SPIisSettings IisSettings
{
    get
    {
        SPWebApplication webApp = SPWebApplication.Lookup(new Uri("http://virtualcasa1/sites/blank2"));//XXX
        SPIisSettings settings = webApp.IisSettings[SPUrlZone.Default];
        return settings;
    }
}

private SecurityToken GetSecurityToken()
{
    SecurityToken token = null;
    SPIisSettings iisSettings = IisSettings;
    Uri appliesTo = new Uri("http://virtualcasa1");//XXX

    SPFormsAuthenticationProvider authProvider = iisSettings.FormsClaimsAuthenticationProvider;
    token = SPSecurityContext.SecurityTokenForFormsAuthentication(appliesTo, authProvider.MembershipProvider, authProvider.RoleProvider, "userfba", "pa55word");//XXX
    return token;
}

private void SignIn()
{
    SecurityToken token = null;

    if ((token = GetSecurityToken()) != null)
    {
        SPFederationAuthenticationModule fam = SPFederationAuthenticationModule.Current;
        HttpContext c = HttpContext.Current;
        fam.SetPrincipalAndWriteSessionToken(token);
        c.Response.Redirect("/sites/blank2");//XXX
    }
}

void OnAuthenticateRequest(object sender, EventArgs e)
{
    HttpContext c = HttpContext.Current;
    if (c.Request.Url.ToString().ToLowerInvariant().Contains("/authenticate.aspx"))
    {
        SignIn();
    } 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:04:45.003

终于能够回答我自己的问题（讨厌回答自己，但有时它就是这样工作的......），[这里](http://blogs.msdn.com/b/akirsman/archive/2012/05/09/custom-single-sign-on-scenario-in-sharepoint-2010.aspx)是细节。希望它可以帮助某人，某处。

# java - Int 从公共到静态

> ID：10364323
> 
> 赞同：-2
> 
> 时间：2012-04-28T14:18:00.127
> 
> 标签：java, static, public

**在您阅读我的问题之前，请知道我的英语不好**

```
public Name()
{
   ID = 1;
   loadOptions();
}

private void loadOptions
{
   // code
   if (as[0].equals("ID"))
   {
      ID = Integer.parseInt(as[1]);
   }
   // more code
}

static
{
   ID1 = ID;
} 
```

ID1 是 0，但我希望它是`Integer.parseInt(as[1]);`……请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T14:31:39.667

有两种方法可以实现这一点：

1.  解析为 [1] 后，将结果也分配给 ID1
2.  将 as 数组设为静态，并在初始化 ID1 之前加载它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T14:32:37.847

我认为您可能缺乏该语言的一些基础知识。

静态初始化块仅在第一次引用该类时运行。

每次实例化一个类的实例时都会运行一个构造函数。

我假设 ID1 是一个静态变量，并且您试图在构造函数有机会执行之前运行的静态区域中对其进行初始化。

仅仅因为代码是按特定顺序编写的，并不意味着它按该顺序运行。

假设你真的想将 ID1 设置为任何 ID，你必须这样做

```
public Name()
{
   ID = 1;
   loadOptions();
   ID1 = ID;
} 
```

当然，如果您不构造 Name 的实例，ID1 将保持为 0，直到创建实例

# iphone - NSMutableURLRequest HTTP 状态 600

> ID：10364326
> 
> 赞同：0
> 
> 时间：2012-04-28T14:18:34.333
> 
> 标签：iphone, http, upload, multipartform-data, nsmutableurlrequest

使用 iPhone 应用程序拍摄照片，然后将其上传到服务器。服务器处于工作状态，通过从 android 应用上传图像进行了测试。

下面是代码片段

```
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",   FORM_BOUNDARY];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];
[request setHTTPShouldHandleCookies:NO];

[request setHTTPMethod:@"POST"];

[request setValue:contentType forHTTPHeaderField:@"Content-Type"];

[request setValue:[NSString stringWithFormat:@"%d", [data length]] forHTTPHeaderField:@"Content-Length"]

[request setHTTPBody:data];` 
//// 
```

但是我得到了服务器的以下响应

```
HTTP Status 600 - java.lang.NullPointerException 
```

类型状态报告

```
message java.lang.NullPointerException

description Cannot find message associated with key http.600

Apache Tomcat/6.0.18
//// 
```

我想错误 600 可能是用户定义的。有没有遗漏的标签？请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:22:55.720

正如您所写，这是服务器错误：`HTTP Status 600 - java.lang.NullPointerException`.

此外，http status code >= 400 表示您的请求现在存在问题，但服务器端存在问题。

如果您是服务器管理员 - 尝试调试服务器，例如，打印帖子参数。

我在发布的 obj-C 代码中没有看到问题。

PS我只能建议你使用高度填充的`ASIHttpRequest`框架。它可以自己处理文件上传。使用它非常简单和安全。

# python - 如何腌制从dict派生的python对象

> ID：10364332
> 
> 赞同：2
> 
> 时间：2012-04-28T14:19:09.030
> 
> 标签：python, pickle

这是我需要腌制的课程：

```
class sdict(dict):
    def __getattr__(self, attr):
        return self.get(attr, None)
    __setattr__= dict.__setitem__
    __delattr__= dict.__delitem__
    __reduce__ = dict.__reduce__ 
```

在我看来，`__reduce__`应该注意酸洗，而是：

```
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
/home/daniyar/work/Apr24/<ipython-input-28-1cc94b920737> in <module>()
----> 1 pickle.dumps(sdict(a=1))

/usr/lib/python2.6/pickle.pyc in dumps(obj, protocol)
   1364 def dumps(obj, protocol=None):
   1365     file = StringIO()
-> 1366     Pickler(file, protocol).dump(obj)
   1367     return file.getvalue()
   1368 

/usr/lib/python2.6/pickle.pyc in dump(self, obj)
    222         if self.proto >= 2:
    223             self.write(PROTO + chr(self.proto))
--> 224         self.save(obj)
    225         self.write(STOP)
    226 

/usr/lib/python2.6/pickle.pyc in save(self, obj)
    304             reduce = getattr(obj, "__reduce_ex__", None)
    305             if reduce:
--> 306                 rv = reduce(self.proto)
    307             else:
    308                 reduce = getattr(obj, "__reduce__", None)

/usr/lib/python2.6/copy_reg.pyc in _reduce_ex(self, proto)
     82             dict = None
     83     else:
---> 84         dict = getstate()
     85     if dict:
     86         return _reconstructor, args, dict

TypeError: 'NoneType' object is not callable

ERROR: An unexpected error occurred while tokenizing input
The following traceback may be corrupted or invalid
The error message is: ('EOF in multi-line statement', (171, 0)) 
```

我也应该定义`__getstate__`吗？我完全迷失了所有这些可用于自定义酸洗的多种方法： `__getinitargs__`、、、`__getstate__`等等`__reduce__`……

谷歌只向我推荐我发现非常不清楚的官方泡菜文档。有人可以为我澄清一下或指出一个好的泡菜教程吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T15:04:11.443

我怀疑你是否走上了一条好的道路。

但是，要解决泡菜问题：

```
class sdict(dict):
    def __getattr__(self, attr):
        if attr.startswith('__'):
            raise AttributeError
        return self.get(attr, None)
    __setattr__= dict.__setitem__
    __delattr__= dict.__delitem__ 
```

Pickle 试图从你的对象中获取状态，而 dict 没有实现它。`__getattr__`正在调用您`"__getstate__"`以找到该魔术方法，并返回 None 而不是`AttributeError`应有的提升。如果你修复你的`__getattr__`，pickle 可以正常工作。

事实上，你为什么要为缺少的属性返回 None 呢？这真的是你想要你的对象做的吗？

这是您尝试伪造内置函数的困难的一个示例。幕后发生了一些微妙的事情，你将不得不参与其中。

PS：一个[相同的问题](https://stackoverflow.com/questions/6415951/python-pickle-crash-when-trying-to-return-default-value-in-getattr)。

# c# - 无法将类型 system.drawing.image 隐式转换为 system.windows.controls.image

> ID：10364335
> 
> 赞同：1
> 
> 时间：2012-04-28T14:19:20.970
> 
> 标签：c#, .net, wpf, barcode

我正在创建一个 WPF 应用程序。我使用条形码库生成每个员工 ID 的条形码。但是当我尝试将条形码图像分配给图像控件时，它会显示以下错误：
**无法将类型 system.drawing.image 隐式转换为 system.windows.controls.image**
这是我的代码：

```
public partial class Card : Window
{
    private PrintDialog dialog;
    Image myimg;

    public Card(String a, String b, String c, String d, String e, String f, String g, String h, String i)
    {
        InitializeComponent();
        myimg = Code128Rendering.MakeBarcodeImage(h, 2, true);
        image2 = myimg;
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        dialog = new PrintDialog();
        dialog.PrintVisual(canvas1, "Employee Card");
    }
} 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:27:51.027

错误应该很明显，字段`myImg`或`image2`类型为[`system.windows.controls.image`](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.aspx)，而该方法创建一个[`system.drawing.image`](http://msdn.microsoft.com/en-us/library/system.drawing.image.aspx).

在不知道该字段的用途的情况下，很难说出您应该做什么，但如果您只是想要一个引用，您需要限定类型或更改您的 using 语句以不包含控件命名空间。

例如合格的参考：

```
System.Drawing.Image myImg; 
```

如果`image2`导致错误，您可能希望将其转换`drawing.image`为[`ImageSource`](http://msdn.microsoft.com/en-us/library/system.windows.media.imagesource.aspx)某种类型的（它是基本 WPF 图像类型）并将其分配给`image2.`[`Source`](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.source.aspx)。如果您不知道如何执行此操作，我确信在某处存在关于 SO 转换的问题。

# postgresql - 如何在 pgAdmin v1.14.2 查询工具中将查询输出作为文本获取？

> ID：10364336
> 
> 赞同：3
> 
> 时间：2012-04-28T14:19:26.127
> 
> 标签：postgresql, pgadmin

我似乎记得以前版本的 pgAdmin 中的一个选项，在该选项中，我可以将查询结果作为文本（就像使用 PSQL 控制台获得的结果一样）而不是图形“表格”视图。我现在找不到办法做到这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:29:43.367

像往常一样对待“数据输出”选项卡上的数据网格 - 选择您需要的内容，然后复制/粘贴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T15:47:00.780

在过去的大约 7 年里，pgAdmin 中没有这样的选项。免责声明：我是（现在活动很少）开发团队的成员。

显示行的文本表示的快速技巧：

```
SELECT t::text FROM tbl t; 
```

# javascript - 使用 javascript 访问 CSS 类

> ID：10364339
> 
> 赞同：3
> 
> 时间：2012-04-28T14:19:36.567
> 
> 标签：javascript, css, styles, stylesheet

如何访问使用外部或嵌入式样式表指定的元素的样式声明。例如：如何使用 id 选择器访问在嵌入式样式表中定义的元素的宽度属性。我知道 CSSRules 对象可以做到这一点。 ..但它依赖于浏览器。例如：在 chrome 中，对象为 null ......那么独立于浏览器的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T14:26:44.413

这是 IE9 之前的 IE 和所有其他浏览器的做法不同的情况。要获取对象的当前样式，包括从样式表应用于对象的任何内容，您可以使用如下内容：

```
function getStyle(el, cssprop) {
    if (document.defaultView && document.defaultView.getComputedStyle)
        return document.defaultView.getComputedStyle(el, null)[cssprop];
    else //IE
        return el.currentStyle[cssprop];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T14:28:34.330

这真的取决于浏览器......我有一些代码用于制作自动扩展文本区域，改编自[那里](https://web.archive.org/web/20131003073445/http://webdesign.torn.be/tutorials/javascript/prototype/auto-expand-contract-textarea/)找到的代码。

注意，`$`这里的函数来自[Prototype](http://prototypejs.org/)。

```
function getStyleFromCss(el, style) {
    /* Hack required by IE */
    var value = $(el).getStyle(style);
    if (!value) {
        /* For other browsers. Actually this equals 'window'. Use that
         *  if Opera fails on you. */
        if(document.defaultView) {
            value = document.defaultView.getComputedStyle(el, null).
                getPropertyValue(style);
            // for IE
        } else if(el.currentStyle) {
            value = el.currentStyle[style];
        }
    }
    if(value.length > 0){
        /* if the value returned has the word px in it, we check for
         *  the letter x */
        if (value.charAt(value.length-1) == "x") {
            value = parseInt(value.substring(0, value.length-2));
        }
    }
    return value;
} 
```

Prototype 中的`getStyle()`函数是这样定义的，您应该能够轻松地使其适应您的需求。

```
getStyle: function(element, style) {
  element = $(element);
  style = style == 'float' ? 'cssFloat' : style.camelize();
  var value = element.style[style];
  if (!value || value == 'auto') {
    var css = document.defaultView.getComputedStyle(element, null);
    value = css ? css[style] : null;
  }
  if (style == 'opacity') return value ? parseFloat(value) : 1.0;
  return value == 'auto' ? null : value;
}, 
```

# actionscript-3 - 如何在 AS3 中输出字符串

> ID：10364343
> 
> 赞同：0
> 
> 时间：2012-04-28T14:20:19.777
> 
> 标签：actionscript-3

我是AS3的新人，我想输出一个字符串来查看它的值，就像C的printf或者C++的cout一样。下面是代码。我想查看压缩字符串“abcdefghijklmnopqrstuvwxyz”的结果，我尝试了trace()，但是当我运行它时，我的浏览器上什么也没有出现。请帮帮我，谢谢！！！

```
public class StringCompress extends Sprite
{
    public function StringCompress()
    {
        var beforeCompressStr:String ="abcdefghijklmnopqrstuvwxyz";
        var afterCompressStr:String = Compress(beforeCompressStr);
        trace(afterCompressStr);
    }
            ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T14:52:18.363

如果没有 3rd 方插件的帮助，您将无法在浏览器上获得跟踪输出。

您可以安装 flashbug ：

[http://blog.coursevector.com/flashbug](http://blog.coursevector.com/flashbug)

以便在那里获得跟踪输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T21:26:49.433

您应该继续使用 trace()，但请确保调试而不是只运行您的程序，以便跟踪语句可以显示在 Flash Builder 中。

# php - WordPress 选项页面复选框 - 如何翻译为条件评论？

> ID：10364344
> 
> 赞同：0
> 
> 时间：2012-04-28T14:20:20.050
> 
> 标签：php, wordpress, comments, conditional

我正在开发一个 WordPress 主题，并且我创建了一个选项页面，该页面已经为输入和文本区域设置和运行。可以通过以下方式轻松将其带到模板页面：

```
<?php $options = get_option('kittytheme_options'); echo $options['kittens']; ?> 
```

现在，如何将其修改为有条件的复选框？以下内容在很多方面可能是错误的，但应该说明我正在尝试的内容：

```
<?php $options = get_option('kittytheme_options'); if ( $options['kittycheckbox'] == '0' ) : ?>Theme By: <a href="http://someurl.com/">Company Name</a><?php endif; ?> 
```

所以基本上这个想法是链接应该默认显示为 0 或什么都没有。但是，当在选项中选中隐藏此区域的复选框时，它将等于 1，因此将其隐藏。

从选项页面/表单这里是复选框：

```
<input id="kittytheme_options[kittycheckbox]" name="kittytheme_options[kittycheckbox]" type="checkbox" value="1" <?php checked( '1', $options['kittycheckbox'] ); ?> />
<label class="description" for="kittytheme_options[kittycheckbox]"><?php _e( 'Hide Kitty Credit', 'kittytheme' ); ?></label> 
```

最终的验证函数是：

```
function theme_options_validate( $input ) {
global $select_options;
if ( ! isset( $input['kittycheckbox'] ) )
$input['kittycheckbox'] = null;
$input['kittycheckbox'] = ( $input['kittycheckbox'] == 1 ? 1 : 0 );
return $input;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T10:05:13.293

**更新：**

`theme_options_validate`您的代码除了仍然可以工作但以错误方式编码的功能外几乎是不错的；下面应该是：

```
function theme_options_validate( $input ) {
   $input['hidecred'] = isset($input['hidecred']) ? 1: 0;
   return $input;
} 
```

所以我想真正的问题是您没有在所有所需的 WP 页面中包含条件语句。很可能你只将它包含在`page.php`而不是包含在`page-blog.php`等等......

```
$options = get_option('startuppro_options');
if ( $options['hidecred'] ){
  // do something here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T22:11:26.450

您要首先检查在处理复选框时是否设置了该选项。使用[isset](http://php.net/manual/en/function.isset.php)来检查这一点。

```
if(isset($options['kittycheckbox'])){
    echo 'Theme By: <a href="http://someurl.com/">Company Name</a>';
} 
```

# java - 是否可以在 Spring 中为注入的方法创建 junit 测试？

> ID：10364349
> 
> 赞同：1
> 
> 时间：2012-04-28T14:21:41.290
> 
> 标签：java, spring, junit, load, javabeans

我有抽象类：

```
public abstract ClassA {

 protected abstract void method1 {...} 
```

另一个实现method1的类ClassB。

XML:

```
bean id="BaseBean" class="ClassB"

bean id="WorkBean" class="ClassA"
lookup-method="method1" bean="BaseBean" 
```

在测试中：

```
$RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:test.xml"
public class Test ....

@Autowired
private IClass classA; 
```

当我尝试运行此测试时，我收到错误：

```
java.lang.IllegalStateException: Failed to load ApplicationContext
....
Caused by: org.springframework.beans.factory.BeanCreationException: Error 
 creating   bean with name 'WorkBean' 
defined in class path resource [test.xml]: 
Instantiation of bean failed; nested exception is 
java.lang.NoClassDefFoundError: net/sf/cglib/proxy/CallbackFilter
....
Caused by: java.lang.ClassNotFoundException: net.sf.cglib.proxy.CallbackFilter
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190) 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T14:28:25.020

这是由于缺少依赖库 - cglib 造成的。

[sourceforge 上的 cglib](http://cglib.sourceforge.net/)

# javascript - 打开另一个子菜单 关闭子菜单

> ID：10364351
> 
> 赞同：0
> 
> 时间：2012-04-28T14:21:51.120
> 
> 标签：javascript, jquery, menu, navigation, nav

我在导航中为我的子菜单制作了一个脚本。当我打开子菜单时。子菜单显示，当我鼠标悬停时。子菜单关闭宽度延迟 300。

但是我的脚本有问题。导航有 8 个子菜单。当我将鼠标悬停在第一个子菜单上时。此子菜单已打开。当我将鼠标悬停在第二个子菜单上时。比我有两个子菜单打开。

当我打开一个新的子菜单时。并且打开了另一个子菜单。另一个子应立即关闭。我该怎么做？

非常感谢！

这是我的脚本：

```
 $('.nav-main .container li').hover(function() {
    if ($(this).find('.submenu').length > 0) {
        $(this).addClass("hover");
        $(this).find('.submenu').show();
    }
}, function() {
    var object = $(this);
    setTimeout(function()
    {
        $(object).find('.submenu').hide();
        $(object).removeClass("hover");
    }, 300);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T14:26:05.963

在显示子菜单之前，您可以先隐藏所有子菜单；

```
if ($(this).find('.submenu').length > 0) {
        $(this).addClass("hover");
        $('.submenu').hide();//Here
        $(this).find('.submenu').show();
    } 
```

# iphone - Apple App ID：移交 App ID

> ID：10364352
> 
> 赞同：0
> 
> 时间：2012-04-28T14:21:52.503
> 
> 标签：iphone, ios, xcode

我不小心为我的私人帐户创建了一个应用程序 ID，例如 com.example.companyname。不幸的是，该公司想使用这个应用程序 ID。我确实知道您不能更改应用程序 ID。因此我想知道是否可以将此应用程序 ID 转移到他们的帐户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:25:03.063

这些应用程序 ID 将始终与创建它们的帐户相关联。

将应用程序从一个帐户“转移”到另一个帐户的最佳方法是保留相同的应用程序名称（用户在其 iPhone 应用程序中看到的名称），但从您的私人（或个人）帐户中删除该应用程序，然后将该应用程序上传到*具有不同应用程序（或捆绑）ID*的新帐户。

哪怕只是人物的细微变化，提交应该是没问题的（只要拉取你私人账号上的原版app）。

# objective-c - iOS 5.x - 检测用户何时点击搜索文本字段

> ID：10364358
> 
> 赞同：0
> 
> 时间：2012-04-28T14:23:14.827
> 
> 标签：objective-c, xcode, ios5, searchbar

如何检测用户何时按下通用搜索栏中的空文本字段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T14:25:40.213

1）您应该设置文本字段（`UITextField`或`UISearchBar`）的委托属性。

2）您应该在委托以下方法中实现：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField 
```

或者

```
- (BOOL)searchBarShouldBeginEditing:(UISearchBar *)searchBar 
```

每当用户想要输入文本时都会调用它。

# android - SurfaceView 线程中的 null 画布，尽管在 surfaceDestroyed() 中停止了线程 - 仅在 Android 4 / ICS 上

> ID：10364360
> 
> 赞同：9
> 
> 时间：2012-04-28T14:23:28.930
> 
> 标签：android, surfaceview

我有一个 SurfaceView 扩展，它的基本原理是在[Lunar Lander](http://developer.android.com/resources/samples/LunarLander/index.html)示例中实现的。也就是`run()`画图的方法`Thread`本质上是：

```
public void run() {
    while (mRun) {
        Canvas c;
            try {
                c = mSurfaceHolder.lockCanvas();
                synchronized (mSurfaceHolder) {
                    doDraw(c); // Main drawing method - not included in this code snippet
                }                                   
            } 

            finally {
                // do this in a finally so that if an exception is thrown
                // during the above, we don't leave the Surface in an
                // inconsistent state
                if (c != null) {
                    mSurfaceHolder.unlockCanvasAndPost(c);
                }
            }
        }
    }
} 
```

并且`Thread`当表面被破坏时正确停止：

```
public void surfaceDestroyed(SurfaceHolder holder) {
    // we have to tell thread to shut down & wait for it to finish, or else
    // it might touch the Surface after we return and explode
    boolean retry = true;
    thread.setRunning(false);
    while (retry) {
        try {
            thread.join();
            retry = false;
        } 
        catch (InterruptedException e) {
        }
    }
} 
```

在迄今为止我通常测试过的设备上（HTC Desire、Desire HD 和 Archos 101，如果我没记错的话，它们之间有 OS 2.2 和 2.3.3）上面从来没有出现过问题。也就是说，当由于用户退出而破坏了表面时，`Activity`或者`Activity`在顶部调用了另一个，其中的代码`surfaceDestroyed()`始终确保`mSurfaceHolder.lockCanvas()`永远不会调用它来返回`null`。

然而，我在运行 Android 4 / ICS 的新 HTC One X 上发现的不同之处在于，在调用方法期间`surfaceDestroyed()`（即该方法中的代码仍在执行），我的绘图`Thread`将获得一个`null`来自`mSurfaceHolder.lockCanvas()`. 这当然会导致应用程序崩溃。*在我的 One X 上，每次*表面被破坏时都会发生这种情况——无论是由于旋转手机、退出手机`Activity`等等。

我对此感到困惑，因为我的印象是`mSurfaceHolder.lockCanvas()`应该返回一个非`null` `Canvas`直到`surfaceDestroyed()`实际*退出*。确实，这就是 Javadoc 所说的：

`This is called immediately before a surface is being destroyed. After returning from this call, you should no longer try to access this surface. If you have a rendering thread that directly accesses the surface, you must ensure that thread is no longer touching the Surface before returning from this function.`

我现在的解决方案是只检查`null`. 这工作正常：

```
if(c != null){
    doDraw(c); // Main drawing method - not included in this code snippet
} 
```

但是，任何想法为什么我突然不得不为 Android 4 / ICS 这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T09:57:39.157

只是为了详细说明我的评论，似乎有一张针对这种行为变化的错误票，您可以在此处找到：[http](http://code.google.com/p/android/issues/detail?id=38658) ://code.google.com/p/android/issues/detail?id=38658 。如果它影响了你，它可能值得盯着它，只是这样它会提高它的重要性！

就个人而言，我自己也看到了这一点，只是使用了最新的 android SDK 附带的月球着陆器示例。我把它放在我的 HTC Sensation XE (4.0.3) 上，在改变方向时，在表面被破坏之前，我得到了一些空画布被返回。

所以我使用的解决方法只是在将画布传递给我的更新和渲染方法之前仔细检查画布是否不为空。

安迪

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:44:39.520

我做了一个小实验。我在这样的方法中放置了一些通知标志`surfaceDestroyed()`：

```
public void surfaceDestroyed(SurfaceHolder holder) {
Log.i("i","i have started");
...[the code]...
Log.i("i","i have finished");
} 
```

我发现的是，`nullPionterExceptionOccurs`发生在第一个标志之后，但在第二个标志之前。对于您的问题，最可能的答案是您在可以访问旧视图时锁定画布，您在其上进行绘制，但与此同时屏幕会发生变化。因此，当解锁画布时，没有地方显示结果 - 导致错误。

PS 从示例 android 代码中玩一下 Lunar Lander，并在游戏运行时尝试旋转屏幕。当错误发生时，只需看看背景位图是如何绘制的。您会发现，屏幕方向发生了变化，但程序试图绘制位图，就好像什么都没发生一样。

# html - 垂直对齐内联 ul 导航栏旁边的图像

> ID：10364361
> 
> 赞同：0
> 
> 时间：2012-04-28T14:23:34.797
> 
> 标签：html, css, vertical-alignment

一定有人已经这样做了，但我没有尝试过，包括背景图片甚至表格。

我有一个 960 像素宽的包装器，目前我的代码在与 ul 导航栏相同的行上显示标题：

```
____________________________________________________________
!         h2 text          !  menu1   !  menu 2  !  menu3  ! 
____________________________________________________________ 
```

我想用比当前文本行高的徽标替换 h2 文本，并将所有内容排在底部，如下所示：

```
___________________________
!                          !     
!        LOGO.jpg          !
!                          !________________________________ 
!                          !  menu1   !  menu 2  !  menu3  ! 
____________________________________________________________ 
```

在尝试了背景图片、表格和我能想到的所有其他东西之后，我能做的最好的事情就是将徽标的顶部与菜单栏的顶部对齐，就像这样。

```
____________________________________________________________
!                          !  menu1   !  menu 2  !  menu3  !   
!        LOGO.jpg          !_______________________________! 
!                          !
!                          !   
___________________________! 
```

目前我有这个代码：

```
#header {
position: relative;
display: block;
background-color: #003366; 
}

#header ul {
position: absolute;
right: 0px;
top: 2px;
}

#header ul li {
list-style: none;
display: inline;
}

img.bottom 
  {
vertical-align:text-bottom;
  } 
```

和

```
 <div id="header"> 
<img src="src/logo.jpg" width="414" height="140" class="bottom" />
  <div id="navbar"> 
             <ul>             
 <li><a href="menu1.htm"><span>Home</span></a></li>
 <li><a href="menu2.htm"><span>About</span></a></li>
 <li><a href="menu3.htm"><span>Contact</span></a></li>
        </ul>
 </div> 
    </div> 
```

有没有一种简单的方法可以将该菜单向下移动以使其与 jpg 的底部对齐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:22:08.520

您可以将标题的高度设置为自动并将 ul 定位到底部。这是一个 jsfiddle：http: [//jsfiddle.net/YBrkB/](http://jsfiddle.net/YBrkB/)

# python - 使用 Tk 或 Wx 在 Python 中获取像素属性？

> ID：10364364
> 
> 赞同：1
> 
> 时间：2012-04-28T14:23:43.323
> 
> 标签：python, wxpython, pixel, tk

我在 Windows 7 上使用 Python3。我想获取所有属性，如颜色强度、颜色等。在我用鼠标选择的屏幕区域的所有像素中。选择可以是任何形状，但现在矩形和正方形都可以。我想在屏幕的任何区域执行此操作。

你们能指导我如何使用 Tk 或 Wx 在 Python 中做到这一点（如果我必须使用一些 GUI 工具包）。?

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T11:46:48.290

我从未使用过 Wx 或 Tk，所以我不知道如何使用 Wx 或 Tk 来做到这一点。我建议您使用一些图像处理库。您可以为此使用**[OpenCV](http://opencv.willowgarage.com/)**或**[SimpleCV](http://simplecv.org/)**。如果您使用 OpenCV 或 SimpleCV，这将非常容易。SimpleCV 基于 OpenCV，但它更加用户友好且易于使用。

这是一个 SimpleCV 示例，用于获取单击点的 RGB 值

```
from SimpleCV import *

def imagetest():
    i = Image("lenna")
    disp = Display()
    i.show()

    while disp.isnotDone():
        if disp.mouseLeft:  # mouse left click
            print i.getPixel(disp.mouseX, disp.mouseY) 
```

同样，您可以获取绑定在矩形中的所有像素的值，以鼠标单击为起点，并为矩形的高度和宽度提供预定义的值。

这是一个代码，当您单击两个点时，我可以在图像上画一条线。[https://github.com/jayrambhia/SimpleCVexamples/blob/master/drawlines.py](https://github.com/jayrambhia/SimpleCVexamples/blob/master/drawlines.py)

您可以在此处找到更多 SimpleCV 示例。[https://github.com/ingenuitas/SimpleCV/tree/master/SimpleCV/examples](https://github.com/ingenuitas/SimpleCV/tree/master/SimpleCV/examples)

由于 SimpleCV 是计算机视觉的库，您可能不会发现所有示例都真正有用，但您可以尝试查看一些

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:53:27.973

首先，Python 3 目前还不支持 wxPython。希望它会在今年晚些时候。同时，您可能必须将您的选择blit 到 wx.Image 或 wx.MemoryDC 并使用本页中提到的方法：[http ://wxpython-users.1045709.n5.nabble.com/wxPoint-和-位图像素颜色值-td2294179.html](http://wxpython-users.1045709.n5.nabble.com/wxPoint-and-Bitmap-pixel-color-value-td2294179.html)

基本上，您调用 dc.GetPixel 或 image.GetRed、image.GetGreen、image、GetBlue。

# jquery - zend 表单和 zend x 对话框

> ID：10364365
> 
> 赞同：1
> 
> 时间：2012-04-28T14:24:11.863
> 
> 标签：jquery, zend-form, zendx

我是 zend 的新手，我试图在对话框 jquery 中创建一个登录表单，但我没有运气。我已经设置了zendX，请有人帮助我，因为我正在用这个拔头发。

我到处都看过，但我无处可去。

# php - move_uploaded_file() 脚本未完成

> ID：10364367
> 
> 赞同：0
> 
> 时间：2012-04-28T14:24:20.183
> 
> 标签：php

我的 PHP 脚本如下：

```
<?php

require_once('connectvars.php');

$file = $_FILES['image']['name'];
$target = GW_UPLOADPATH . $file;

if (move_uploaded_file($_FILES['image']['tmp_name'], $target)) {
    $dbc = mysqli_connect(DB_HOST, DB_UN, DB_PW, DB_NAME) or die('Error connecting to the MySQL server');

    $title = mysqli_real_escape_string($dbc, trim($_POST['title']));
    $description = mysqli_real_escape_string($dbc, trim($_POST['content']));
    $host = mysqli_real_escape_string($dbc, trim($_POST['host']));
    $duration = mysqli_real_escape_string($dbc, trim($_POST['duration']));
    $sn1 = mysqli_real_escape_string($dbc, trim($_POST['link1']));
    $sn2 = mysqli_real_escape_string($dbc, trim($_POST['link2']));
    $sn3 = mysqli_real_escape_string($dbc, trim($_POST['link3']));
    $sn4 = mysqli_real_escape_string($dbc, trim($_POST['link4']));
    $sn5 = mysqli_real_escape_string($dbc, trim($_POST['link5']));

    $query = "INSERT INTO dyhamb (title, description, host, duration, file, sn1, sn2, sn3, sn4, sn5 ) VALUES ('$title', '$description', '$host', '$duration', '$file', '$sn1', '$sn2', '$sn3', '$sn4', '$sn5')";
    $result = mysqli_query($dbc, $query);

    if (!$result) {
        echo 'failed';
    } else {
        echo 'success';
    }

    mysqli_close($dbc);
}
?> 
```

当我运行脚本时，我得到“失败”返回，我无法弄清楚原因。两者`$dbc`和`$query`似乎都很好，因此不确定为什么`$result`没有定义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T14:38:42.330

```
if ($result === FALSE) {
    echo mysqli_error($dbc);
} else {
    echo mysqli_affected_rows($dbc);
} 
```

还

> $ mysql -u root -pmyPassWord DB_NAME
> 
> > 从动态中选择标题；

验证某些东西实际上正在进入数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T14:34:50.867

尝试`or die(mysqli_error());`在查询后添加：

```
$result = mysqli_query($dbc, $query) or die(mysqli_error()); 
```

这可能会给你一个线索，查询有什么问题。

# css - CSS3 :not() 选择器

> ID：10364368
> 
> 赞同：1
> 
> 时间：2012-04-28T14:24:27.390
> 
> 标签：css, css-selectors

在以下情况下，如何使用`:not()`排除`div.note em` 粗体？

```
div#content em {
    font-weight: bold;
}

/* I want to remove the following 
   in favor of the :not selector being applied to the above */
div#content div.note em {
    font-weight: normal;
} 
```

PS：这是一个精简的示例，我实际上有许多样式`div#content em`，我想将其应用于除`div.note em`. 这就是为什么我不想稍后手动覆盖它们......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T15:34:00.087

如果您知道`#content`和之间的确切层次结构`.note`，则可以使用子选择器使否定足够具体以起作用。如果`.note`是 的孩子`#content`，则使用：

```
#content > :not(.note) em, #content > em {} 
```

如果and之间有两个`<div>`s ，请执行以下操作：`#content``.note`

```
#content > div > div > :not(.note) em, #content > em {} 
```

不过，您可能最好使用您拥有的东西，并且只是覆盖 .note 后代的 em 元素。

# java - Java-从文件中提取动态子字符串-快速方法

> ID：10364370
> 
> 赞同：3
> 
> 时间：2012-04-28T14:24:35.683
> 
> 标签：java, guava

我有一个大文件，其中包含诸如“ABCDEabcde .....XYZxyz”之类的字符序列。现在，我想从中提取一些子序列字符串。例如，从第 10 个字符到第 50 个字符串，从第 15 个字符到第 55 个字符串（所有子序列字符串具有相同的长度，即 40 个字符并且起始位置（例如 10,15）总是增加）。子序列位置在一次运行中从第 10 到第 50 个字符、从第 15 到 55 个字符、在另一运行中从第 2 到第 42 个字符和从第 100 到第 140 个字符是动态的。现在，我必须提取数百万个这样的动态子字符串。我已经尝试了一些[在这里](https://stackoverflow.com/questions/10355898/extracting-sub-sequence-from-a-file-java-fast-way)向我建议的方法。但是，它们对我来说很慢。

我努力了：

1）使用BufferedReader进行简单的缓冲读取，等待需要的位置块。

2）使用随机访问文件和搜索方法来做到这一点。

由于我的文件大约 700 mb（近 2 亿个字符）并且我必须提取数百万个这样的动态子字符串，因此它们对我来说需要将近一分钟（第一个需要更多时间）。任何人都可以通过提供任何其他可能比它更快的想法来帮助我吗？我也可以使用任何 Java 库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T14:29:52.747

您可以做的最有效的事情可能是将整个文件映射到内存中。基本上：

```
FileChannel channel = new RandomAccessFile(file, "r").getChannel();
ByteBuffer buffer = channel.map(FileChannel.MapMode.READ_ONLY, 0, channel.size()); 
```

我认为没有什么比你可以尝试的更有效的方法了——现代操作系统很好地优化了内存映射文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T14:32:24.593

我认为最快的方法是将整个文件加载到内存中并从那里提取所需的子字符串。它会消耗大量内存，但速度会快得多（这是您的目标）。

# migration - PowerBuilder 迁移

> ID：10364372
> 
> 赞同：1
> 
> 时间：2012-04-28T14:24:42.087
> 
> 标签：migration, powerbuilder

在迁移一个 .PBT 时，它并没有完全迁移，也没有生成 PBD。取而代之的是，它不断地一次又一次地要求迁移。我想知道为什么在加载目标文件时它要求迁移。在什么情况下PBT的迁移会不断要求迁移

# javascript - JavaScript，没有引用的对象实例

> ID：10364377
> 
> 赞同：0
> 
> 时间：2012-04-28T14:25:10.347
> 
> 标签：javascript, object, memory-management, reference, instance

我曾经使用`new`关键字创建我的 JavaScript“类”的实例并调用构造函数，例如：`new myStuff.DoSomething();`以获取它的实例。有时在需要时，我会给实例一个参考，例如：`var myObj = new myStuff.DoSomething();`

我开始考虑内存管理：当不再使用时，JS 是否会清理没有引用的对象？- 它会以同样的方式清理那些有引用的人。那么被杀死对象中的所有事件处理程序呢，它们还存在吗？

示例：例如，如果我使用`new`关键字创建一个可拖动的窗口并且不引用该对象，然后附加事件处理程序等等。然后我决定从 DOM 中删除窗口。如何确保实际对象也被删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T14:28:28.340

> 当不再使用时，JS 是否会清理没有引用的对象？

是的。JavaScript 是一种[垃圾收集](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)语言。

> 那么被杀死对象中的所有事件处理程序呢，它们还存在吗？

这取决于，因为我们现在谈论的是 DOM，而不仅仅是 JS 作为一种语言。某些 DOM 实现（例如在旧版本的 IE 中）[以这种方式泄漏内存而臭名昭著](http://javascript.crockford.com/memory/leak.html)。其他浏览器/DOM 实现可能没有此类错误。

# php - php 在一个查询中打印两个表的结果

> ID：10364378
> 
> 赞同：0
> 
> 时间：2012-04-28T14:25:16.810
> 
> 标签：php, mysql

我在一个查询中获取两个表结果。现在我在每个表中都有一行`name = userid`。当我打印表一的 id 时，这不起作用并打印了表二的 id。在即我从产品中选择`*`，然后`voteid,userid`形成 voteproduct where userid = $userid ; 现在我需要从产品表中打印用户 ID，但我的结果是从 voteproduct 中打印用户 ID。如何解决这个问题？谢谢

我的代码：

```
$sql = 'SELECT * FROM ' . PREFIX  . '_product,' . PREFIX  . '_voteproduct WHERE ' . PREFIX  . '_voteproduct.voteid = ' . PREFIX  . '_product.id AND ' . PREFIX  . '_voteproduct.userid =  "' . $userid . '" ORDER BY name ' . $pages->limit .' ';

    $db->query($sql) or error ('ERROR', mysql_error ());
          $result = $db->query ( $sql ); 
          if($db->numrows($result)>0){ 
          while ($row = $db->fetcharray($result))
       {

    echo $row['userid']; // PROBELM THIS PRINTED USERID FROM VOTEPRODUCT I NEED PRINT USER ID FROM PRODUCT
       } 
```

**编辑**：如果我`*`从我的产品表中选择，我真的需要全部。（名称、价格、日期、类别……）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T14:29:16.973

`select *`是一种懒惰的做事方式，尤其是当您看起来只要求一个字段时。你不会跑到商店，拿走整个商店的货架库存，把它带回家，然后扔掉除了你想要的一根糖果之外的所有东西。

怎么样

```
SELECT product.userid
FROM ...
WHERE ... 
```

所以你只得到你需要的确切的单个字段？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T14:31:27.067

您可以选择每个用户 ID，`AS` 以便单独使用它们，如下所示

```
$sql = 'SELECT p.userid as pid, vp.userid as vpid, ... FROM ' . PREFIX  . '_product AS p,' . PREFIX  . '_voteproduct AS vp WHERE vp.voteid = p.id AND vp.userid =  "' . $userid . '" ORDER BY name ' . $pages->limit .' '; 
```

并使用；

```
echo $row['pid']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T14:33:25.467

```
select p.userid as puserid, v.userid as vuserid ... FROM ' . PREFIX  . '_product p,' . PREFIX  . '_voteproduct v where ...

echo $row['puserid']; 
```

# java - 如何将 currentTimeMillis 转换为可读的日期格式？

> ID：10364383
> 
> 赞同：74
> 
> 时间：2012-04-28T14:26:23.357
> 
> 标签：java, android, date, datetime, time

我想使用`currentTimeMillis`两次，这样我就可以计算持续时间，但我也想以用户可读的格式显示时间和日期。我在`currentTimeMillis`计算时遇到了麻烦，但我看不到内置函数可以转换为合适的时间或时间/日期。

我用

```
android.text.format.DateFormat df = new android.text.format.DateFormat();
df.format("yyyy-MM-dd kk:mm:ss", new java.util.Date()); 
```

为了产生美好的时间和日期，我最终想做的是将我的结果`currentTimeMillis`值显示到 `android.text.format.DateFormat df = new android.text.format.DateFormat();`

例如

```
android.text.format.DateFormat df = currentTimeMillis(); 
```

当我尝试我得到

> 类型不匹配：无法从 long 转换为 DateFormat

我试图使用一些铸造，但看不到如何做到这一点。

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2012-04-28T14:32:17.467

它会起作用的。

```
long yourmilliseconds = System.currentTimeMillis();
SimpleDateFormat sdf = new SimpleDateFormat("MMM dd,yyyy HH:mm");    
Date resultdate = new Date(yourmilliseconds);
System.out.println(sdf.format(resultdate)); 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-11-18T09:19:01.117

**Android中有一种更简单的方法**

```
 DateFormat.getInstance().format(currentTimeMillis); 
```

此外，不推荐使用 Date，因此请使用[DateFormat](http://developer.android.com/reference/java/text/DateFormat.html)类。

```
 DateFormat.getDateInstance().format(new Date(0));  
   DateFormat.getDateTimeInstance().format(new Date(0));  
   DateFormat.getTimeInstance().format(new Date(0)); 
```

以上三行将给出：

```
Dec 31, 1969  
Dec 31, 1969 4:00:00 PM  
4:00:00 PM  12:00:00 AM 
```

# sql - 如何对时差超过一个小时的记录进行分组？

> ID：10364384
> 
> 赞同：10
> 
> 时间：2012-04-28T14:26:43.493
> 
> 标签：sql, sql-server, group-by

我是这个网站的新手，但请耐心等待。

我正在尝试`GROUP BY`使用 SQL Server 处理一些数据。

这是数据：

```
Computer    VisitDate
ComputerA   2012-04-28 09:00:00
ComputerA   2012-04-28 09:05:00
ComputerA   2012-04-28 09:10:00
ComputerB   2012-04-28 09:30:00
ComputerB   2012-04-28 09:32:00
ComputerB   2012-04-28 09:44:00
ComputerB   2012-04-28 09:56:00
ComputerB   2012-04-28 10:25:00
ComputerA   2012-04-28 12:25:00
ComputerC   2012-04-28 12:30:00
ComputerC   2012-04-28 12:35:00
ComputerC   2012-04-28 12:45:00
ComputerC   2012-04-28 12:55:00 
```

我想要实现的是按计算机对数据进行分组，但如果计算机的访问时间超过 1 小时，也可以进行分组。这是我正在尝试做的结果：

```
Computer     VisitDate
ComputerA    2012-04-28 09:00:00
ComputerB    2012-04-28 09:30:00
ComputerA    2012-04-28 12:25:00
ComputerC    2012-04-28 12:30:00 
```

所以`Computer A`显示了两次，因为它在 09:10:00 访问，然后在 12:25:00 再次访问，这意味着相差超过 1 小时。

“按计算机分组”很容易，但另一方面，我不知道从哪里开始。对此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T14:46:18.100

你不能用简单的`GROUP BY`. 此运算符仅适用于单个列 - 例如，您可以按计算机名称或其他内容进行分组，但您不能添加其他逻辑*，例如时间差必须大于一小时*或类似的任何内容到分组中。

您可以做的 - 如果您使用的是 SQL Server **2005**或更高版本（您没有在问题中提及该版本），则可以使用 CTE（通用表表达式）。这些提供了一种对数据进行切片的方法。

在这里，我正在做几件事——首先，我将数据“分区”`ComputerName`并排序，`VisitDate`并使用`ROW_NUMBER()`来获取每个分区的序列号。然后第二个 CTE 确定每台计算机的“第一个”条目 - 行号 = 1 的那个 - 第三个最终确定`VisitDate`每个条目与行号 = 1 的条目相比的差异。从第三个 CTE，我最终选择那些行号 = 1 的条目（每个“分区”的第一个），或者任何在 60 分钟或更多分钟内有差异的条目。

这是代码：

```
;WITH Computers AS
(
    SELECT
        ComputerName, VisitDate,
        RN = ROW_NUMBER() OVER(PARTITION BY ComputerName ORDER BY VisitDate)
    FROM    
        dbo.YourComputerTable
),
FirstComputers AS
(
    SELECT ComputerName, VisitDate
    FROM Computers
    WHERE RN = 1
),
SelectedComputers AS
(
    SELECT 
        c.ComputerName, c.VisitDate, c.RN,
        DiffToFirst = ABS(DATEDIFF(MINUTE, c.VisitDate, fc.VisitDate))
    FROM Computers c
    INNER JOIN FirstComputers fc ON c.ComputerName = fc.ComputerName
)
SELECT * 
FROM SelectedComputers
WHERE RN = 1 OR DiffToFirst >= 60 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T00:24:32.237

如果您已升级到 SQL Server 2012，则可以为此使用 LAG。

```
with Lagged as (
  select
    Computer,
    VisitDate,
    LAG(VisitDate,1) over (
      partition by Computer
      order by VisitDate
    ) as LastVisit
  from @Visit
)
  select
    Computer,
    VisitDate
  from Lagged
  where LastVisit is null
  or VisitDate > dateadd(hour,1,LastVisit); 
```

SQL Fiddle[在这里](http://sqlfiddle.com/#!6/fe9e0/2)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T15:28:48.250

CTE 显示至少有一次访问的所有计算机，或在间隔 > 60 分钟之前和之后的访问。

```
create table compVisits (Computer varchar(20), VisitDate datetime)
go
insert into compVisits values
('ComputerA', '2012-04-28 09:00:00')
, ('ComputerA', '2012-04-28 09:05:00')
, ('ComputerA', '2012-04-28 09:10:00')
, ('ComputerB', '2012-04-28 09:30:00')
, ('ComputerB', '2012-04-28 09:32:00')
, ('ComputerB', '2012-04-28 09:44:00')
, ('ComputerB', '2012-04-28 09:56:00')
, ('ComputerB', '2012-04-28 10:25:00')
, ('ComputerA', '2012-04-28 12:25:00')
, ('ComputerC', '2012-04-28 12:30:00')
, ('ComputerC', '2012-04-28 12:35:00')
, ('ComputerC', '2012-04-28 12:45:00')
, ('ComputerC', '2012-04-28 12:55:00')

; WITH a as ( --Initial row count
    select *, r=ROW_NUMBER()OVER(PARTITION BY Computer ORDER BY VisitDate)
    FROM compVisits
)
, b as ( -- gaps >60 minutes
    SELECT a1.Computer, a1.VisitDate
    FROM a a1
    INNER JOIN a a2 ON a1.Computer=a2.Computer AND (a1.r+1)=a2.r
    AND DATEDIFF(MINUTE,a1.VisitDate,a2.VisitDate)>60
    UNION
    SELECT a2.Computer, a2.VisitDate
    FROM a a1
    INNER JOIN a a2 ON a1.Computer=a2.Computer AND (a1.r+1)=a2.r
    AND DATEDIFF(MINUTE,a1.VisitDate,a2.VisitDate)>60
)
-- at least one visit
SELECT a1.Computer, a1.VisitDate
FROM a a1
WHERE r=1
AND NOT EXISTS(SELECT 1 FROM b WHERE Computer=a1.Computer)

UNION

-- gaps >60 minutes
SELECT * FROM b
ORDER BY VisitDate 
```

结果：

![在此处输入图像描述](../Images/ca79a672bb808da0db71378375ffef6e.png)

# javascript - 属性和事件

> ID：10364389
> 
> 赞同：0
> 
> 时间：2012-04-28T14:27:20.560
> 
> 标签：javascript, html, fbml

如何获得包含 fb:login-button 的所有属性和事件的完整列表？有许多属性（例如：“perms”）或事件（例如：“onlogin”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T17:36:05.707

好吧，这有一个问题：Facebook JS 替换为有效的 HTML。所以一旦页面加载完成，元素就消失了，取而代之的是一堆`<div>`s 和`<span>`s 和`<a>`s。没有适合你的属性。

但是，您也许可以对生成的 HTML 做一些事情。这是一个示例：

```
<div class="connect_widget">
    <a class="fb_button fb_button_small" onclick="ConnectLogin.login(null, &quot;&quot;); return false;" href="#">
        <span class="fb_button_text">Log In</span>
    </a>
    <div class="clearfix profile_images_without_margin">
        <div class="uiFacepile uiFacepileMedium">
            <ul class="uiList uiListHorizontal clearfix">
            </ul>
        </div>
    </div>
</div> 
```

我会尝试不同的属性`<fb:login-button>`，看看它是如何改变 HTML 的。

# c - 二进制数表示

> ID：10364390
> 
> 赞同：7
> 
> 时间：2012-04-28T14:27:40.800
> 
> 标签：c, binary, floating-point, computer-architecture

首先，这不是关于精度或类似问题的问题。

我的问题是，编译器如何决定如何表示一个数字？

我们以 C 为例。我写

```
double d = 4.5632; 
```

它如何选择它的二进制表示？我知道它没有精确表示，那么它如何选择最接近的可表示数字？它是在编译时完成的吗？它是由CPU还是操作系统完成的？

**请**仅在您知道这是如何发生的情况下回答，诸如“不要担心”之类的回答没有帮助。此外，“它取决于平台”也没有帮助，您可以选择一个平台并为此进行解释。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T14:30:10.350

编译器不决定（通常）。CPU（通常）有一个浮点单元，它需要浮点值以特定格式表示（通常是[IEEE-754](http://en.wikipedia.org/wiki/IEEE_754)）。当然，可以模拟完全不同的架构，在这种情况下，编译器/模拟器作者可以自由选择完全不同的表示。但这不是典型的。

至于如何将特定的词法表示`4.5632`转换为底层表示，这是由 C 标准指定的。所以从 C99 标准的第 6.4.4.2 节开始（我已经强调了最相关的部分）：

> 有效数字部分被解释为（十进制或十六进制）有理数；指数部分的数字序列被解释为十进制整数。对于十进制浮点常量，指数表示 10 的幂，有效数部分将按其缩放。对于十六进制浮点常量，指数表示 2 的幂，有效数部分将按其缩放。对于十进制浮点常量，以及当 FLT_RADIX 不是 2 的幂时的十六进制浮点常量，**结果要么是最接近的可表示值，要么是紧邻最接近的可表示值的较大或较小的可表示值，在实现定义中选择方式**. 对于 FLT_RADIX 是 2 的幂时的十六进制浮点常量，结果被正确舍入。

这将在编译时完成（尽管标准没有强制要求）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T14:35:10.300

是的，特定的转换是在编译时完成的，因为`double d = 4.5632;`它是一个编译时常量。编译到您的代码中的是该值以目标体系结构使用的浮点格式表示。在 32 位 IEEE-754 表示的情况下，这是`0x409205BC`. CPU 如何“知道”这是一个有点接近 4.5632 的值取决于浮点标准本身。同样，在 32 位 IEEE-754 的情况下，我们有 1 位用于符号，8 位用于指数，23 位用于尾数。

当涉及到舍入时，有几种方法可以应用。IEEE-754 规范提到了四种方法：四舍五入到最近，四舍五入到零，四舍五入到负无穷大，四舍五入到正无穷大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T14:35:41.877

编译器生成在平台上运行的程序。该平台可能在编译器之前就已经存在，反之亦然。所有事物的二进制表示构成 ABI，它本质上是编译器输出的规范。最后，无论出于何种原因，事情都完成了，但希望有一个 ABI 可以准确地说明发生了什么。

在实践中，几乎所有平台都根据 IEEE 754（又名 IEC 559）实现浮点运算。这个相当古老的国际标准定义了浮点数的位的含义，以及程序十进制表示应如何四舍五入为浮点数。点值。

没有 FPU 的平台通常仍会在软件中从 IEEE 754 数字中打包和解包位域，因为它们很可能以二进制形式出现在文件中。

对互操作性和数值精度要求有限的平台（例如 GPU）可能会放宽 IEEE 754 要求的精度标准，但它定义的数值范围最适合各种应用。

当然，如果你想要最终的便携性，你不能依赖任何东西。但可以肯定的是，从十进制到二进制 FP（假设 FPU 本身不是十进制）的转换是在编译时执行的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T14:44:34.903

对于您的具体示例，是的，二进制表示是在编译时编码的。它可能会调用一个 C 库（atod、sscanf 等），并且该库对截断或舍入所做的任何事情都会发生。并且编译器的“功能”或“规则”不一定与您执行相同操作时发生的运行时规则相同。无论如何，您都不应该检查与浮点的等价性，但是如果您要获取编译时值，然后为程序提供一个字符串并转换该运行时（假设您在命令行上传递值 4.5632 并使用其中一个库调用）你不一定会得到相同的浮点值。我已经看到编译器（gcc 等）在编译时常量方面做得非常糟糕，因此通常，

```
double d; int a;
a 45632;
d = a;
d/=10000; 
```

即使它进行了优化，它也往往会得到更好、更准确的答案。

您确实在 int 到 double 转换中冒着硬件 + OS 错误的风险，Hauser 对 FPU 错误发表了一些评论，这些错误往往出现在 int to float 和 float to int 操作中。即使在编译时我会假设编译器实际上会对浮点数做两个 int 然后除法，而不是像你的代码那样直接做一个字符串浮点数。

自从我展示所有这些以来已经有几年了，也许编译器已经变得更好（怀疑）。希望硬件变得更好（很可能过去很难找到没有容易发现错误的 fpu）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T17:50:08.107

您的特定示例由编译器转换，因为它是十进制文字。你想要细节，所以让我们选择 gcc。它在[real.c](http://opensource.apple.com/source/gcc/gcc-1765/gcc/real.c)中进行转换（我不知道这是否是当前版本，但那是我通过 Google 找到的第一个副本），在一个名为 real_from_string() 的函数中。它本质上是用长除法进行转换：在你的情况下，45632/10000。

（十进制到浮点的转换非常复杂；如果您想了解更多信息，请查看[我的博客。）](http://www.exploringbinary.com/topics/#correctly-rounded-decimal-to-floating-point)

# python - 如何将python列表分成大小相等的块？

> ID：10364391
> 
> 赞同：25
> 
> 时间：2012-04-28T14:27:47.737
> 
> 标签：python, list

> **可能重复：**
> [如何在 Python 中将列表拆分为大小均匀的块？](https://stackoverflow.com/questions/312443/how-do-you-split-a-list-into-evenly-sized-chunks-in-python)
> [python：将“5,4,2,4,1,0”转换为[[5, 4], [2, 4], [1, 0]]](https://stackoverflow.com/questions/5083194/python-convert-5-4-2-4-1-0-into-5-4-2-4-1-0)

```
[1,2,3,4,5,6,7,8,9] 
```

->

```
[[1,2,3],[4,5,6],[7,8,9]] 
```

有没有简单的方法来做到这一点，没有明确的'for'？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-04-28T14:28:52.050

```
>>> x = [1,2,3,4,5,6,7,8,9]
>>> zip(*[iter(x)]*3)
[(1, 2, 3), (4, 5, 6), (7, 8, 9)] 
```

[`zip(*[iter(s)]*n)`在 Python 中如何工作？](https://stackoverflow.com/questions/2233204/how-does-zipitersn-work-in-python)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-28T17:09:23.837

如果您真的希望子元素是列表与元组：

```
In [9]: [list(t) for t in zip(*[iter(range(1,10))]*3)]
Out[9]: [[1, 2, 3], [4, 5, 6], [7, 8, 9]] 
```

或者，如果您想包含将被 截断的剩余元素`zip`，请使用切片语法：

```
In [16]: l=range(14)

In [17]: [l[i:i+3] for i in range(0,len(l),3)]
Out[17]: [[0, 1, 2], [3, 4, 5], [6, 7, 8], [9, 10, 11], [12, 13]] 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-28T15:05:53.330

您也可以`numpy.reshape`在这里使用：

```
import numpy as np

x = np.array([1,2,3,4,5,6,7,8,9])

new_x = np.reshape(x, (3,3)) 
```

结果：

```
>>> new_x
array([[1, 2, 3],
       [4, 5, 6],
       [7, 8, 9]]) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-04-28T15:15:51.077

```
>>> map(None,*[iter(s)]*3)
[(1, 2, 3), (4, 5, 6), (7, 8, 9)] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T15:08:06.283

这是一种不那么“聪明”的递归方式：

```
from itertools import chain

def groupsof(n, xs):
    if len(xs) < n:
        return [xs]
    else:
        return chain([xs[0:n]], groupsof(n, xs[n:]))

print list(groupsof(3, [1,2,3,4,5,6,7,8,9,10,11,12,13])) 
```

# html - $.Ajax 在 windows8 Metro 应用程序中不起作用

> ID：10364400
> 
> 赞同：2
> 
> 时间：2012-04-28T14:29:02.177
> 
> 标签：html, windows-8, windows-runtime

我正在尝试将现有的 html5 应用程序迁移到 Metro 应用程序中，并发现两个主要障碍：

1.  由于安全原因，不支持 .innerHtml
2.  $.Ajax 不起作用（我正在使用 jsonp 从服务器交换数据）

问题：

1.  如何绕过 .innerHtml 的安全问题？
2.  我还有什么其他选择可以使 $.Ajax 工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T19:12:34.887

Q2：我遇到了类似的问题，我将 $.get 更改为：

```
function getJSON(url, data, callback, errorCb) {
if (data != null)
{
    var params = [];
    for (var key in data) {
        params.push(key + "=" + encodeURI(data[key]));
    }
    url += "?" + params.join("&");
}

WinJS.xhr({ url: url }).then(
    function (result) {
        if (callback != null)
            callback(result.response, result.status);
    },
    function (result) {
        if (errorCb)
            errorCb(result.status);
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T06:37:55.533

`.innerHtml`Q1：当您用于动态内容时，WinRT 块会引发异常或警告。但它们不会一直阻止您使用`.innerHTML`。您是否尝试过`toStaticHTML`如下方法：

```
element.querySelector("#myId").innerHTML = "some string" + toStaticHTML(yourHTMLContent); 
```

Q2：常规的 javascript`xhr`调用对我有用。其实我相信我以前曾经`.ajax`发送过一些简单的`GET`或`POST`请求，但最终`xhr`因为一些其他原因而使用

希望这可以帮助。

# c# - HttpPost 控制器中的重定向不起作用

> ID：10364409
> 
> 赞同：1
> 
> 时间：2012-04-28T14:30:10.617
> 
> 标签：c#, asp.net, asp.net-mvc-3

我有这个控制器

```
[HttpPost]
public ActionResult Compose(ComposeMessage composeMessage)
{
    var message = "";
    dynamic fbPost = new ExpandoObject();
    fbPost.message = composeMessage.Message;
    dynamic result = FBHelper.PostInFacebook(fbPost, associatedAccount.ProviderAccessToken);
    if (((IDictionary<String, object>)result).ContainsKey("error"))
    {
        Session["PostMessage"] = fbPost;
        var redirectUrl = FBHelper.GetLoginUrl("email,read_stream,publish_stream");
        //HttpContext.ClearError();
        //the below redirect does not work
        Redirect(redirectUrl);
        //message = "Posting to Facebook failed. \n";
    }
    else
    {
        message = "Posting to Facebook successful. \n";
    }
    return Json(new { success = message });
} 
```

如果我的访问令牌过期，我在这里要做的基本上是重定向到 Facebook OAuth。
但是代码`Redirect(redirectUrl);`根本不会触发。我的问题是

1.  代码有什么问题？
2.  为什么重定向不触发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:38:14.753

我认为它是因为 [HttpPost] 属性。您可以将您的 url 传递给客户端并调用 navigate() 或 window.location = myurl。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T14:47:07.100

您需要返回重定向`ActionResult`：

```
return Redirect(redirectUrl); 
```

# c# - 在 ASP.NET 中显示运行时错误

> ID：10364410
> 
> 赞同：0
> 
> 时间：2012-04-28T14:30:26.987
> 
> 标签：c#, asp.net, runtime-error

由于不推荐使用 JavaScript 警报，并且我不希望使用模式框。如何显示在浏览器后面的代码中发生的运行时错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T14:38:01.330

把它放在`web.config`：

```
<?xml version="1.0"?>
<configuration>
    <system.web>
        <customErrors mode="Off"/>
    </system.web>
</configuration> 
```

**编辑**

如果您想查看不是配置错误但它们是应用程序逻辑错误的错误，那么您应该保留日志。

# css - 在Firefox中隔离特定页面元素的css

> ID：10364414
> 
> 赞同：0
> 
> 时间：2012-04-28T14:30:56.090
> 
> 标签：css, firefox-addon

是否有一种 Firefox 扩展或技术可以隔离特定元素的所有 css。我找到了一个[http://code.google.com/p/firefoxcssstealer/](http://code.google.com/p/firefoxcssstealer/)但它与最新版本的 Firefox 不兼容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T14:31:45.360

我很惊讶你不知道[Firebug](http://getfirebug.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T19:51:58.233

您不需要附加组件 - 这是一个内置功能（我认为是 Firefox 10 起）。单击 Firefox 按钮，选择 Web Developer 和 Inspect。选择一个元素，然后单击样式按钮。它将显示该元素的所有样式。

# sencha-touch - SearchList 不适用于我的项目

> ID：10364418
> 
> 赞同：0
> 
> 时间：2012-04-28T14:31:23.833
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我正在尝试在我的列表中进行搜索，我在 docs.sencha.com 中使用了搜索列表示例，但搜索功能不搜索。

定义搜索字段后，我在视图中编写代码。

```
 xtype: 'textfield',
       docked: 'top',
       placeHolder: 'Arama...',
       //autoCapitalize: true,
       //  label: 'Anahtar Kelime',
       labelWidth: '`',
       listeners : {
              scope.this,
              keyup : function(field) {         
                      var value = field.getValue();
                      if (!value) {
                           Menius.filterBy(function()  {
                                 return true;
                           };
                      } ;                                            
                      else {
                           var searches = value.split(' '),
                           regexps = [],
                           i;
                           for(i=0; i< searches.lenght; i++) {
                                  if(!searches[i])
                                        return;
                                  regexps.push(new RegExp(searches[i], 'i'));
                           };
                          Menius.filterBy(function(record){
                          var matched = [];
                          for(i=0; i<regexps.lenght; i++) {
                              var search = regexps[i];
                              if (record.get('label').match(search))  
                                    matched.push(true);
                              else matched.push(false);
                          };

                         if (regexps.length > 1 && matched.indexOf(false) != -1)  {
                                return false;
                         } else {
                                return matched[0];
                         }
                   });
                 }
        } 
```

我想要做的是当我在搜索字段中输入内容时，必须根据该词过滤列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T17:26:51.913

因为拼写错误，

从改变

```
lenght -> length 
```

在两个 for 循环中。

![在此处输入图像描述](../Images/49838521f4ce5d2474d41676c5015c65.png)

# windows - 使用 virtualbox 在实际的 USB 驱动器上安装 Windows？

> ID：10364420
> 
> 赞同：0
> 
> 时间：2012-04-28T14:31:39.027
> 
> 标签：windows, virtualbox

我刚刚下载了virtualbox，我真正想要的是在virtualbox中运行windows98的可启动安装-cd ISO来运行安装程序并将windows98安装在**ACTUAL** USB驱动器上（USB驱动器必须映射为主硬盘驱动器-hd0 -)。

**我的问题是：**这甚至可能吗？如果是，那怎么办？或者是否可以使用其他实用程序？如果 Windows 98*可以*从 USB 驱动器启动？

任何想法/解释都非常感谢，如果您不明白任何内容，请告诉我，以便我澄清，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T22:24:29.220

你可以做的是：

*   将 VMDK-Wrapper 用于“真实”硬盘（例如 /dev/sdb）

    > VBoxManage 内部命令 createrawvmdk -filename usb.vmdk -rawdisk /dev/sdb

*   您可以在 VirtualBox 中启动并安装此设备，但仅限于那里。Windows 98（如 2000、XP、...）一般不能从 USB 启动，因此这不适用于“真正的”硬件。

为什么不只在 Virtualbox 中运行 Windows 98（也许 virtualbox 可以从 USB 移植，并将 .vdi 文件存储在 USB 上）？

# xml - 在 Coldfusion 中使用 XMLFormat() 和输入字段的正确语法是什么？

> ID：10364422
> 
> 赞同：0
> 
> 时间：2012-04-28T14:31:42.460
> 
> 标签：xml, coldfusion, input, coldfusion-8

我正在尝试使用 Coldfuion XMLFormat() 函数。

但是，如果我这样做：

```
<form name="sample" action="#cgi.script_name#" method="post">
    <input name="test" value="#XMLFormat( form.test )#" type="text" tabindex="1" />
</form> 
```

我刚刚收到 CF 错误，该元素*测试*未定义。我究竟做错了什么？

感谢您的输入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:35:36.707

您需要检查是否`form.test`存在：

```
<form name="sample" action="#cgi.script_name#" method="post">
  <input name="test" value="<CFIF structkeyexists(form,"test")>#XMLFormat( form.test )#</CFIF>" type="text" tabindex="1" />
</form> 
```

# git - 如何提交到远程 git 存储库

> ID：10364429
> 
> 赞同：43
> 
> 时间：2012-04-28T14:32:13.147
> 
> 标签：git, git-push

我是 git 新手。
我已经完成了远程仓库的克隆，如下所示

```
git clone https://myusername@something.com/repo.git 
```

然后我做了

```
git checkout master 
```

进行了一些更改并将这些更改提交到我的本地存储库，如下所示..

```
git add .

git commit -m "my changes" 
```

现在我必须将这些更改推送到远程存储库。
我不知道该怎么办。

我会将我的回购合并到远程吗？
我需要采取哪些步骤？

我有 git bash 和 git gui

请指教，
谢谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-28T14:39:34.263

您所要做的就是`git push origin master`，`origin`您的远程存储库的默认名称（别名）在哪里，并且`master`是您要将更改推送到的远程分支。

您可能还想查看这些：

1.  [http://gitimmersion.com/](http://gitimmersion.com/)
2.  [http://progit.org/book/](http://progit.org/book/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-28T14:54:57.937

您只需要确保您有权推送到远程存储库并执行

```
git push origin master 
```

或者干脆

```
git push 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-28T21:30:08.423

`git push`

或者

`git push server_name master`

在您提交到本地存储库之后，应该可以解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T14:34:20.820

你试过[git push](http://gitref.org/remotes/#push)吗？[gitref.org](http://gitref.org/)有一个很好的部分处理[远程存储库](http://gitref.org/remotes/)。

`--help`您还可以使用该选项从命令行获取帮助。例如：

```
% git push --help
GIT-PUSH(1)                             Git Manual                             GIT-PUSH(1)

NAME
       git-push - Update remote refs along with associated objects

SYNOPSIS
       git push [--all | --mirror | --tags] [-n | --dry-run] [--receive-pack=<git-receive-pack>]
                  [--repo=<repository>] [-f | --force] [-v | --verbose] [-u | --set-upstream]
                  [<repository> [<refspec>...]]
... 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-08-03T09:31:13.603

如果这没有给你一个积极的回放，只需输入“git push”，然后检查你是否正确连接到你的存储库。

# vim - 有没有办法在正常模式下插入空格？

> ID：10364432
> 
> 赞同：35
> 
> 时间：2012-04-28T14:32:32.737
> 
> 标签：vim

我刚开始使用vim。

我想知道是否有一个简单的默认键绑定可以让我在正常模式下添加空格。

如果不是，下一个最佳选择是什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-28T20:26:44.570

```
:nnoremap space i<space><esc> 
```

然后，每当您`s``p``a``c``e`在正常模式下键入时，它都会在光标处插入一个空格。

或者你可以打`i``Space``Esc`。

好的好的。如果你真的想正常使用空格键，添加`<>`到上面。

```
:nnoremap <space> i<space><esc> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-28T16:02:55.797

在光标后插入一个空格：

```
a<space><esc> 
```

前：

```
i<space><Esc> 
```

用空格替换光标下的字符：

```
r<space> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-28T14:38:49.697

如果您在正常模式下拉出一个空格然后按 p （放置），我想这会起作用。或者如果你在插入模式下写一个空格，然后点击 . 在正常模式下（重复动作）

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-05-12T08:19:03.607

我用来`ss`在正常模式下插入空格

并将以下句子添加到 .vimrc

```
nnoremap ss i<space><esc> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-01-10T09:47:54.717

你总是可以`yank`在文档中的某个地方留一个空格，然后`paste`它......

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-04-30T11:03:20.817

您可以创建一个宏。在正常模式下创建一个`q`后跟任何字母的宏类型。`x`因此，要使用您键入的名称创建宏`qx`。然后你只需要进入插入模式类型空间并逃回正常模式。完成后键入`q`以保存宏。从这里每次你想在普通模式类型中插入一个空格`@x`。

击键：`qxi <Esc>q`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-05-10T06:15:28.430

由于`:nnoremap <space> i<space><Esc>`将在光标右侧添加一个新空间，您可以尝试`:nnoremap <space> i<space><Esc>l`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-22T00:05:38.160

在正常模式下按`o`然后`esc`重复:)

# regex - 无法匹配，正则表达式

> ID：10364435
> 
> 赞同：0
> 
> 时间：2012-04-28T14:33:16.707
> 
> 标签：regex

我有文字：（PRD：TLK-XX1388​​32）

但是我似乎找不到匹配项，并且括号引起了问题。我是正则表达式的新手，并且多次尝试以失败告终。

我认为这会起作用，但没有：`\(PRD:[.]\)`

难道我的理解`.`不正确？

我也尝试过`[a-zA-Z0-9\-]`，但这也不起作用，还有其他一些组合？

（TLK-XX1388​​32 可以是任何东西，只要它有 PRD: 和括号。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T14:36:32.877

是的，您的理解`.`似乎不正确。它是一个特殊字符，被解释为“任何字符”。除了在字符类中（在方括号中），它的意思是“只是`.`字符”。

您想要的正确正则表达式可能是：

```
\(PRD:[^)]*\) 
```

这里，`[^)]`是一个字符类，意思是“除`)`”之外的任何字符。

您尝试做的是：

```
\(PRD:.*\) 
```

但它可以匹配太多，例如，可以匹配：

```
(PRD:FOO) (PRD:BAR) 
```

因为`*`是贪婪的（它试图尽可能多地匹配）。

如果您的正则表达式引擎支持它，您可以尝试（更易读的）非贪婪变体：

```
\(PRD:.*?\) 
```

这在功能上等同于第一个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T14:36:23.430

您需要在匹配后追加`*`以指定匹配多个匹配项。

采用：

```
\(PRD:[A-Z0-9-]*\) 
```

# sql-server - 内连接错误

> ID：10364436
> 
> 赞同：0
> 
> 时间：2012-04-28T14:33:17.187
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

![在此处输入图像描述](../Images/4548407d32e172f04dbafe23b72be38f.png)

如何加入这 2 个表？常见的列是`ref#no`。

但我得到一个错误

> 列“Ink Delivery.DELDATE”在选择列表中无效，因为它既不包含在聚合函数中，也不包含在 GROUP BY 子句中

```
SELECT 
    a.REF#NO, a.DELDATE, a.REQUST_By, a.PROJ_CODE, 
    b.PR_CODE, b.INK_CODE, b.QTY, b.PRICE 
from [Ink Delivery detals] b
inner join [Ink Delivery] a ON a.REF#NO = b.REF#NO
GROUP by a.REF#NO 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T14:35:42.197

这不是内部连接问题。看看你得到的错误。您正在尝试执行 Group By，但您的 Select 语句中有未包含在 Group By 子句中的列。在执行 Group By 时，您的 Select 语句只能包含 Group By 子句中引用的列或聚合列（例如 Sum、Average）。

您可能想了解如何在 SQL Server中使用[Group By 。](http://www.sqlteam.com/article/how-to-use-group-by-in-sql-server)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T15:00:27.527

```
SELECT 
    a.REF#NO, a.DELDATE, a.REQUST_By, a.PROJ_CODE, 
    b.PR_CODE, b.INK_CODE, b.QTY, b.PRICE 
from [Ink Delivery detals] b
inner join [Ink Delivery] a ON a.REF#NO = b.REF#NO
ORDER BY a.REF#NO 
```

是正确的方法。

# linux - 如何在 linux 的 cryptoAPI 中添加更多算法

> ID：10364442
> 
> 赞同：3
> 
> 时间：2012-04-28T14:34:13.657
> 
> 标签：linux, cryptography, kernel, aes

当我检查 /proc/crypto 它显示我：

```
abhi@ubuntu:/proc$ cat crypto 
name         : stdrng
driver       : krng
module       : kernel
priority     : 200
refcnt       : 1
selftest     : passed
type         : rng
seedsize     : 0

name         : md5
driver       : md5-generic
module       : kernel
priority     : 0
refcnt       : 1
selftest     : passed
type         : shash
blocksize    : 64
digestsize   : 16 
```

我的一个项目需要使用 aes256。

有人可以指出我如何将这个算法添加到加密 api，或者我可以在（ubuntu 10.4、2.6.32-35）中实现这一点。

是否有支持的（默认情况下）算法列表，这些算法是使用内核 2.6 的 cryptoapi 实现的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T13:51:52.730

Abhi，内核加密 API[是](http://www.linuxjournal.com/article/6451)在 2002 年为协议创建的，它需要内核内部的加密（在内核模式下，当你没有使用用户空间加密的可靠方法时）：

> 尽管最初旨在支持 IPSec，但 API 已被设计为通用工具，潜在应用包括加密文件、加密文件系统、强文件系统完整性、随机字符设备 (/dev/random)、网络文件系统安全（例如, CIFS) 和其他需要加密的内核网络服务。

因此，如果您在用户空间工作并且没有计划将内核作为新的 FS 或网络堆栈的新部分移动，那么使用用户空间库进行加密会更容易且更便携。对于某些密码，用户空间库可能使用或不使用内核 API，但它可能会使用用户空间实现。有很多这样的库，例如 openssl、[Libgcrypt](http://directory.fsf.org/wiki/Libgcrypt)等。一些大型框架，如 Qt 也可能包含一些流行的加密。

要使用新算法在内核中扩展 cryptoapi，您应该为您的内核实现和编译此算法（作为模块或作为内核二进制文件的一部分）。要查找为您的内核编译的模块的名称，请尝试`ls /lib/modules/*/*/arch/*/crypto/ /lib/modules/*/*/crypto/`；然后您可以调用例如`modprobe aes_generic`或`modprobe aes-x86_64`在 API 中加载其他加密模块。

在`modprobe aes-x86_64`我有之后：

```
# cat /proc/crypto |grep aes
name         : aes
driver       : aes-asm
module       : aes_x86_64
name         : aes
driver       : aes-generic
module       : aes_generic 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T08:25:23.847

您可以以 aes-generic.c 为例

# ruby-on-rails - Rails：为我的 postgresql 数据库创建复合键

> ID：10364443
> 
> 赞同：0
> 
> 时间：2012-04-28T14:34:14.210
> 
> 标签：ruby-on-rails, postgresql, composite-key

我添加了一个迁移，以根据以下命令将现有数据库的主键从自动生成的系统主键更改为复合键：

```
add_index :listings, [:telephone, :name, :latitude, :longitude] , :unique=>true 
```

我的问题是：

1.  该命令生成的索引将是一个整数？由于所有参数字段都是字符串。

2.  如果我在创建数据库后运行此命令，它会重新生成所有行的键还是我必须为此运行单独的命令？

3.  运行此命令时会有所不同吗？如果在运行时表中没有行，而不是在表有行之后运行？

谢谢

阅读下面的帖子后编辑：============================================ =========

这是我的模型：

```
# Table name: listings
#
#  id                :integer         not null, primary key
#  name              :string(50)      default("ERROR:Not Available"), not null
#  telephone         :string(15)      default("ERROR:Not Available"), not null
#  latitude          :string(15)      default("ERROR:Not Available"), not null
#  longitude         :string(15)      default("ERROR:Not Available"), not null
#  avatar           :string(30)      default("Not Available") 
```

所以你可以看到主键是系统自动生成的 id 当我添加上面的命令时，那到底是做什么的呢？我认为它更改了 id 字段，使其成为基于 4 列值生成的整数。

您可以猜到，可能有超过 2 个同名的人。所以在这里保证唯一性的唯一真正方法是基于 4 列创建某种索引。

通过使用上面的命令，我做对了吗？这会加快查询速度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T16:30:13.923

1.  这不会改变你的主键。仅创建和索引，用于提高查询性能（如果使用正确）
2.  索引没有类型，它就像一个地图，而不是一个列。
3.  似乎 Rails 不支持复合键。

也许你的解决方案： [http ://compositekeys.rubyforge.org/](http://compositekeys.rubyforge.org/)

* * *

**编辑：** 如果您唯一关心的是唯一性，您应该知道 Active Record（Rails 中的模型）带有验证功能。因此，您不需要为该建议创建索引，也不需要创建 compose id。

+info => [http://guides.rubyonrails.org/active_record_validations_callbacks.html#uniqueness](http://guides.rubyonrails.org/active_record_validations_callbacks.html#uniqueness)

您可能还想看看什么是数据库索引： [http ://en.wikipedia.org/wiki/Database_index](http://en.wikipedia.org/wiki/Database_index)

读完之后，您应该明白，如果您需要加快查询速度，创建该索引的唯一原因是：

```
SELECT * FROM listings WHERE telephone=123123 AND name="John" AND latitude=123 AND longitude=323 
```

而且我很确定您不需要在您已经知道所有这些值的情况下进行此类查询。

# jquery - 使用具有相同句柄值且无重叠的 jQuery ui 范围滑块

> ID：10364444
> 
> 赞同：4
> 
> 时间：2012-04-28T14:34:14.890
> 
> 标签：jquery, jquery-ui, jquery-ui-slider

我正在使用 jQuery ui-slider。在范围滑块中，如果我使用两个手柄选择相同的范围，则一个手柄隐藏在另一个手柄后面。如果选择了相同的范围，我只想满足两个手柄。请帮助我。

```
$("#dvSliderRange2").slider({
    range: true,
    min: 0,
    max: 100,
    values: [20, 40],
    step: 10,
    slide: function(event, ui) {
        if (ui.values[0] == ui.values[1]) {
            return false;
        }
        $("#lblRange2").text(ui.values[0] + " - " + ui.values[1]);
    }
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:25:47.077

我有一个使用下面一些 css 的解决方案。当它们相等时，这会向元素添加一个类。Css 然后定位这些句柄，使它们都可见。

[http://jsfiddle.net/dhQk/jTx89/](http://jsfiddle.net/dhQk/jTx89/)

但是，在交互性的情况下。如果不对滑块代码进行一些修改，这是不可能的。我已经包含了来自 jquery 滑块 1.10.2 的 src。从 src 的第 176 行开始。

```
this.handles.each(function( i ) {
    var thisDistance = Math.abs( normValue - that.values(i) );
    if (( distance > thisDistance ) ||
        ( distance === thisDistance &&
            (i === that._lastChangedValue || that.values(i) === o.min ))) {
        distance = thisDistance;
        closestHandle = $( this );
        index = i;
    }
}); 
```

正如您从中可以看到的，它实际上不是由您选择的手柄选择的，而是通过您单击的距离以编程方式选择的。不知道为什么决定他们会这样做，但是一旦它们具有相同的值，它就不允许您单独与它们交互；

# javascript - 尝试在 Chrome 中使用 jQuery 同步 AJAX + .ready() 时出现不可预测的行为

> ID：10364447
> 
> 赞同：1
> 
> 时间：2012-04-28T14:34:29.180
> 
> 标签：javascript, jquery, ajax

我正在开发一个使用 jQuery 的 web 应用程序，并且在测试它时我得到的东西看起来可能是一种竞争条件。尽管我尽了最大的努力，但我不确定如何进行。

代码在[GitHub 上](https://github.com/agent86ix/stackapps/blob/gh-pages/js/api.js)，但我将在这里总结奇怪的行为。

**早期的 AJAX 请求**

我有一些代码需要 AJAX 调用和准备好 DOM。为了加快速度，我在 $(document).ready() 事件触发之前进行了 AJAX 调用。在链接的 JS 文件中，这是“init”函数。此函数调用 _build_site_select，它设置 AJAX 请求。完成后，调用 _on_site_list_success。

**在 $(document).ready()**

当我到达 ready() 时，我会进行需要触发 AJAX 和 ready() 事件的调用。在链接的代码中，这是 populate_site_select 调用。由于调用 ready() 时 AJAX 可能未完成，因此我检查了在 AJAX 操作完成后设置的变量，如果还为时过早无法完成，则使用 setTimeout 延迟对 populate_site_select 的调用。变量 site_list_ready 在 AJAX 调用完成时设置，并在需要站点列表在执行之前完全完成的函数中进行检查。

**预期和观察到的行为**

我希望看到的行为是 populate_site_select 只有在 _on_site_list_select 中的对象/关联数组完全填充后才会被调用。然而，这并非总是如此。有时，当我到达 populate_site_select 时，该数组只是部分填充 - 它似乎与失败的方式一致（它始终是数组中的同一个条目，而不是我期望的 ~30 左右）。

**我试过的**

我还尝试将 setTimeout 调用添加到 _on_site_list_success 调用，这进一步将数组的填充与 site_list_ready 变量的设置分开。但是，这并不能避免问题。

我知道从 AJAX 调用返回的 JSON 数据是正确的（我可以在 chrome 调试器中查看它），如果我稍后检查站点列表变量的值，（在页面完成加载后）它会正确填充。

这似乎不是什么不寻常的场景，我很难相信这个错误是在 Chrome 中（尽管我没有用其他浏览器测试过这个）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T14:53:38.483

我没有尝试下面的代码，但是 jQuery 的`Deferred`对象可以帮助你。

```
var domReady, ajax;
domReady = jQuery.Deferred();

jQuery(function () {
    // on DOM ready
    domReady.resolve();
});

ajax = jQuery.ajax({
  url: '/path/to/file',
  type: 'GET',
  dataType: 'xml/html/script/json/jsonp'
});

jQuery.when(domready, ajax).then(doneCallbacks, failCallbacks); 
```

基本上，您有两个延迟对象，一个处理 DOM 就绪状态，另一个处理 AJAX 调用；我们手动管理第一个对象，在 DOM 准备好时解析它；第二个由 jQuery 本身自动管理（`$.ajax`对象是`Deferred`对象，并且在 AJAX 调用成功时被解析）。

最后，`jQuery.when()`我们观察延迟对象的状态，当它们都**被**解决时，`doneCallback`触发；如果两个对象之一被拒绝，`failCallback`则被解雇。

所以，`doneCallbacks`是两个 Deferred 对象解析后将调用的函数，这样 DOM 就准备好了，并且 AJAX 调用已经完成并成功。

[请参阅对象](http://api.jquery.com/category/deferred-object/)的文档[`jQuery.when()`](http://api.jquery.com/jQuery.when/)和[`Deferred`](http://api.jquery.com/category/deferred-object/)

# jquery - 如何在列表中获取选定的选项？

> ID：10364448
> 
> 赞同：1
> 
> 时间：2012-04-28T14:34:36.323
> 
> 标签：jquery, html, html-lists

假设我有以下下拉列表。

```
<select id="products">
    <option value="test1">Test1</option>
    <option value="test2">Test2</option>
</select> 
```

我只想在`div`选择特定选项时显示 specific 。我知道如何显示和隐藏它们，但我不知道如何检测。

1.  加载页面时选择的选项，以及
2.  用户选择其他内容时的选定选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T14:50:25.520

1.  在准备好文档时，您只需执行 $("#list option:selected").text(); 或 .val(); 取决于你需要什么。

    ```
     $(document).ready(function() {   alert($("#products
      option:selected").text()); }); 
    ```

2.  您可以将 .change 函数绑定到列表，也可以在 html 中内联 onchange 函数。

    ```
    $("#products").change(function() {
    alert($("#products
     option:selected").text()); 
    }); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T14:36:48.713

这将获取选定的值并将它们存储在一个数组中，数组的最后一个索引是最新的值，之前的值是在之前选择的：

```
var valArr = [];
$("#products").change(function(){
    valArr.push($(this).val());
})

alert(valArr); 
```

# html - .class vs #id：有什么区别/何时使用？

> ID：10364449
> 
> 赞同：1
> 
> 时间：2012-04-28T14:34:41.330
> 
> 标签：html, css

' **#** ' 是 ID 选择器，是 CSS 语言的基本组成部分。它匹配具有给定 id 的 HTML 元素。`.classname {...}`我知道，但使用 .css 文件或`#idselector`在 .css 文件中的主要区别是什么。

```
.hello { color:000000;} 
```

或者

```
#hello { color:000000;} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T14:36:31.087

第一个匹配任何具有 CSS 类 hello 的元素，第二个匹配任何 id 值为 hello 的元素。例如：

```
<div class="hello"></div>

<div id="hello"></div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T14:38:13.767

优先权。ID 的优先级高于类选择器。如果您有以下 CSS：

```
.hello { color:#000000;}
#hello { color:#ff0000;} 
```

假设同一元素的 ID 为“hello”，类为“hello”，则该元素的字体颜色将为红色，因为 ID 的优先级高于类选择器。

此外，页面上只能有一个 ID 为“hello”的元素。但是你可以拥有无​​限数量的“hello”类元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T14:38:24.160

ID ( `#hello`) 应仅用于唯一的单个元素（例如：登录按钮）。

类 ( `.hello`) 应该用于可以重复的元素（例如：导航菜单按钮）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-28T14:45:40.457

ID 是唯一的，即某个元素可能只有一个 ID，而同一 ID 中可能只有一个存在于页面上。所以以下是无效的：

```
<div id="first_id second_id"></div>
<div id="third_id"></div>
<div id="third_id"></div> 
```

然而，类名恰恰相反。一个元素可能有多个类名，同一个类名可以在一个文档中出现多次。

* * *

ID 的目的是表示网页的独特部分（即页眉、主要内容 div、页脚）或内容的独特部分（message-number-149632）。

类名的目的是描述多个相同含义的对象。（即对话框、帖子、菜单项）。

* * *

在 CSS 中，an`#id`具有更高的**特异性值**，这意味着：

```
<div id="id" class="class">Test</div>

#id { background: red; }
.class { background: green; } 
```

将使 div **red**，因为 ID 比 class 更具体。

# php - 如何使用 php 强制下载文件？

> ID：10364451
> 
> 赞同：5
> 
> 时间：2012-04-28T14:34:55.653
> 
> 标签：php, download, readfile

我是编程新手，刚在学校学习，但我希望我的用户从我的主页下载一些 excel 文件。以下代码不起作用，它仅在浏览器中显示，而不强制进行下载对话。

我怎么解决这个问题？

链接应该是：[http](http://myurl.com/download.php?fileid=1) ://myurl.com/download.php?fileid=1或[http://myurl.com/download.php?fileid=2](http://myurl.com/download.php?fileid=2)等等。

```
<?php
switch ($_GET["fileid"]) {
    case 0:
        $file = "files/mon.xls";
        break;
    case 1:
        $file = "files/uru2.xls";
        break;
    case 2:
        $file = "files/oppo23.xls";
        break;
}
readfile($file); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-28T14:37:19.893

你必须使用标题。就像您可以阅读[php 手册](http://php.net/manual/en/function.header.php)一样，它适用于您的文件：

```
<?php
header('Content-type: application/xls');
header('Content-Disposition: attachment; filename="downloaded.xls"');
readfile($file); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-28T14:37:47.243

有几种方法可以做到这一点，但我发现最简单的方法就是使用标题。你可以做这样的事情。

```
 header('Location: files/oppo23.xls'); 
```

# html - phonegap Html 5 应用程序 - android javascript 库仅在第一个 index.html 页面中加载

> ID：10364453
> 
> 赞同：0
> 
> 时间：2012-04-28T14:35:04.560
> 
> 标签：html, cordova

我正在尝试创建一个 phonegap HTML5、jQuery 移动应用程序。在第一个 index.html 页面中一切正常。 当用户单击内部链接 ex test.html 时，除非我在第一个 index.html 页面中**内联**添加它们的代码和声明，否则不会加载库（即我无法运行它们的函数） ！

我真的很堆栈，它没有任何意义！Ondeviceready 函数根本不会触发。

如果我从电脑的谷歌浏览器运行页面，js代码运行正常！

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:45:49.450

我错了。

我没有意识到 phonegap 使用 ajax 来加载不同的页面。除初始页面 (index.html) 之外的页面中的所有 javascript 都被剥离。基本上，您在 index.html 中加载所有 js 代码（在包含的 js 库中）。

如果有人犯了和我一样的错误。这就是答案。

# file - 如果存在于第一个文件/bash 脚本中，则按键合并两个文件

> ID：10364455
> 
> 赞同：4
> 
> 时间：2012-04-28T14:35:19.633
> 
> 标签：file, bash, unix, join, merge

我有两个文件，其列按第一列的值排序，只有当第二个值存在于第一个值时，我才想合并它们。

第一个文件是这样的

```
man01 xxx yyy zzz
man02 xxx yyy zzz
man03 xxx yyy zzz
man04 xxx yyy zzz 
```

第二个文件

```
man01 sss
man08 sss 
```

所需的输出是

```
man01 xxx yyy zzz sss
man02 xxx yyy zzz
man03 xxx yyy zzz
man04 xxx yyy zzz 
```

我尝试加入，但要求第一个文件中存在第二个文件的值：/

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-28T14:43:58.690

加入可以做到这一点，你考虑过这个`-a`选项吗？它将为 a.txt 和 b.txt 中每个不可配对的文件行生成一行。

```
join -a1 a.txt b.txt

man01 xxx yyy zzz sss
man02 xxx yyy zzz
man03 xxx yyy zzz
man04 xxx yyy zzz 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T14:53:41.010

好吧，这不是优雅的命令行使用的美妙之处，但是这又如何呢？

```
perl -we 'open F1, "<file1.txt"; open F2, "<file2.txt"; my %f2 = map {/(\S+)/ ? ($1=>$_) : ()} <F2>; while (<F1>) { chomp; print; if (/(\S+)/ && exists $f2{$1}) { $f2{$1} =~ /\S+\s+(.*)/ and print " $1"; } print "\n"; }' 
```

*更新：* 当我在做上述工作时，似乎@bunting 和@c00kiemon5ter 想出了一个更优雅的答案。优秀的！

# css - 在@font-face CSS 规则中正确定义字体系列

> ID：10364458
> 
> 赞同：4
> 
> 时间：2012-04-28T14:35:32.667
> 
> 标签：css, font-face, webfonts, font-family, google-webfonts

我最近遇到了`@font-family`CSS 规则，因为我想在我的网站上使用网络字体。

说到重点，我在@font-family CSS 代码中看到了两个变体，您可以在下面看到：

```
@font-face {
  font-family: 'Droid Serif'; /* NOTE THIS LINE */
  font-weight: normal; /* NOTE THIS LINE */
  font-style: normal; /* NOTE THIS LINE */
  src: url('DroidSerif-Regular-webfont.eot');
  src: url('DroidSerif-Regular-webfont.eot?#iefix') format('embedded-opentype'),
   local('Droid Serif'), local('DroidSerifRegular'),
   url('DroidSerif-Regular-webfont.woff') format('woff'),
   url('DroidSerif-Regular-webfont.ttf') format('truetype'),
   url('DroidSerif-Regular-webfont.svg#DroidSerifRegular') format('svg');
}

@font-face {
  font-family: 'Droid Serif'; /* NOTE THIS LINE */
  font-weight: normal; /* NOTE THIS LINE */
  font-style: italic; /* NOTE THIS LINE */
  src: url('DroidSerif-Italic-webfont.eot');
  src: url('DroidSerif-Italic-webfont.eot?#iefix') format('embedded-opentype'),
   local('Droid Serif'), local('DroidSerifItalic'),
   url('DroidSerif-Italic-webfont.woff') format('woff'),
   url('DroidSerif-Italic-webfont.ttf') format('truetype'),
   url('DroidSerif-Italic-webfont.svg#DroidSerifItalic') format('svg');
} 
```

这是另一个：

```
@font-face {
  font-family: 'DroidSerifRegular'; /* NOTE THIS LINE */
  font-weight: normal; /* NOTE THIS LINE */
  font-style: normal; /* NOTE THIS LINE */
  src: url('DroidSerif-Italic-webfont.eot');
  src: url('DroidSerif-Italic-webfont.eot?#iefix') format('embedded-opentype'),
   local('Droid Serif'), local('DroidSerifItalic'),
   url('DroidSerif-Italic-webfont.woff') format('woff'),
   url('DroidSerif-Italic-webfont.ttf') format('truetype'),
   url('DroidSerif-Italic-webfont.svg#DroidSerifItalic') format('svg');
}

@font-face {
  font-family: 'DroidSerifItalic'; /* NOTE THIS LINE */
  font-weight: normal; /* NOTE THIS LINE */
  font-style: normal; /* NOTE THIS LINE */
  src: url('DroidSerif-Italic-webfont.eot');
  src: url('DroidSerif-Italic-webfont.eot?#iefix') format('embedded-opentype'),
   local('Droid Serif'), local('DroidSerifItalic'),
   url('DroidSerif-Italic-webfont.woff') format('woff'),
   url('DroidSerif-Italic-webfont.ttf') format('truetype'),
   url('DroidSerif-Italic-webfont.svg#DroidSerifItalic') format('svg');
} 
```

比较我评论过的行`/* NOTE THIS LINE */`

第一个变体来自[Google Web Fonts](http://www.google.com/webfonts)，而第二个变体来自[Font Squirrel](http://www.fontsquirrel.com/)。那么，这两个错误之一是错误的吗？（只是想确认一下，尽管两者都是非常可靠的来源。）

如果可以接受，我会选择两者中的哪一个更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T15:45:58.850

第一个例子虽然令人难以置信，但却是正确的；请注意 Droid Serif Regular 是如何被声明为正常字体粗细和正常字体样式的……您希望如何显示常规字体。第二个声明，它调用 Droid Serif Italic，并将其设置为 font-style:italic；这允许您在一个系列中使用多种字体。如果您想添加粗体字体，您将应用相同的@font-face 规则，但您将更改 font-weight:bold，同时保留 font-style:normal 并声明相同的字体系列。

fontsquirrel 在渲染@font-face 规则方面确实做得很好，实际上我在那里读到过这种技术。很惊讶它没有被实施。您可以在此处阅读有关此内容的更多信息：[http ://www.456bereastreet.com/archive/201012/font-face_tip_define_font-weight_and_font-style_to_keep_your_css_simple/](http://www.456bereastreet.com/archive/201012/font-face_tip_define_font-weight_and_font-style_to_keep_your_css_simple/)

# algorithm - 顺时针旋转线

> ID：10364466
> 
> 赞同：1
> 
> 时间：2012-04-28T14:36:13.580
> 
> 标签：algorithm, geometry

我得到一个枢轴点（通过整数坐标）和一条穿过该点并与水平线成 x 度的线。该线绕枢轴点顺时针旋转 360 度，速度 s= 0.001 度/秒。我现在有 N 个点（带有整数坐标），我必须按照线与这些点接触的顺序对这些点进行排序。我该如何计算这个？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T14:39:14.463

您需要执行与以下等效的操作：

1.  [平移](http://en.wikipedia.org/wiki/Translation_%28geometry%29)所有内容，使枢轴点位于原点
2.  将每个点转换为[极坐标](http://en.wikipedia.org/wiki/Polar_coordinates)。
3.  `x`从每个点的角度分量中减去，模 360 度（2pi 弧度）。
4.  按升序对角度分量进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T14:40:14.600

编写取两个点的比较函数，并将它们与水平线形成的角度进行比较。

# iphone - 将 pfx 文件导入 iOS 应用程序

> ID：10364470
> 
> 赞同：6
> 
> 时间：2012-04-28T14:36:37.280
> 
> 标签：iphone, ios, ipad, pfx, uti

我正在开发一个执行 Web 服务调用的 iOS (iPhone/iPad) 应用程序，其中一个参数是 .pfx 文件。

我希望用户能够通过在电子邮件中选择其附件将他自己的 .pfx 文件导入应用程序（应用程序已经为自定义文件类型执行此操作，其条目未在下面显示，但非常相似） .

在应用程序的 Info.plist 文件中，我在 CFBundleDocumentTypes 标记中添加了一个条目，在 UTExportedTypeDeclarations 标记中添加了一个条目，如下所示。在 UTExportedTypeDeclarations 中，我使用了标识符“com.rsa.pkcs-12”，这是用于 pfx 文件的 UTI 之一。我查找并输入了 pfx 文件的标准 MIME 类型 (application/x-pkcs12)。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
...
<key>CFBundleDocumentTypes</key>
<array>
            ...
    <dict>
        <key>CFBundleTypeName</key>
        <string>Personal Information Exchange</string>
        <key>LSHandlerRank</key>
        <string>Owner</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>com.rsa.pkcs-12</string>
        </array>
    </dict>
</array>
...
    <key>UTExportedTypeDeclarations</key>
<array>
            ...
    <dict>
        <key>UTTypeConformsTo</key>
        <array/>
        <key>UTTypeDescription</key>
        <string>Personal Information Exchange</string>
        <key>UTTypeIdentifier</key>
        <string>com.rsa.pkcs-12</string>
        <key>UTTypeTagSpecification</key>
        <dict>
            <key>public.filename-extension</key>
            <string>pfx</string>
            <key>public.mime-type</key>
            <string>application/x-pkcs12</string>
        </dict>
    </dict>
</array>
</dict>
</plist> 
```

这行不通。当我在 Mail 中打开 pfx 文件附件时，它会在“设置”中打开（它希望将文件安装为配置文件）。当然，pfx 文件类型已经存在于 iOS 中，因此实际上不需要在 UTExportedTypeDeclarations 中输入；但是，删除此条目没有任何区别。当我在两个条目中使用自定义标识符（而不是“com.rsa.pkcs-12”）时，会发生相同的行为。

我不想强迫用户更改附件文件的扩展名。有没有办法告诉 iOS 询问用户是使用设置还是我的应用程序打开文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:08:47.417

对于 .pfx 等特殊文件，这似乎是不可能的。

我已经更改了我的应用程序，以便它接受具有特殊扩展名的文件。该应用程序指示用户将 .pfx 文件的扩展名更改为特殊扩展名，然后通过电子邮件将其发送给他/她自己以将其导入应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-17T02:29:29.647

您可以使用**共享扩展**而不重命名文件扩展名

# c++ - 何时调用 QApplication 析构函数

> ID：10364471
> 
> 赞同：2
> 
> 时间：2012-04-28T14:36:39.820
> 
> 标签：c++, qt, valgrind

所以我*意识到*事实上我真的不需要做我将要解释的事情，但我非常挑剔确保我的程序在退出之前清理所有内容，所以我仍然想这样做......

我有一个 QApplication，我将一个单次计时器连接到退出插槽。（将来想象这个退出真的会在用户点击时从 UI 生成，所以这只是为了调试）我注意到起初我只是在堆栈的主函数中分配 qApp。问题是在做一些研究时，似乎 exec 函数不必返回。这意味着主函数堆栈不会被清理。（或者至少在程序退出并且系统回收该内存之前不会......）所以在 valgrind 我有一些 QCoreApplication::init() 内存“问题”。再一次只是我挑剔然后真正影响事情......

无论如何，所以我决定 malloc QApplication 然后尝试在程序关闭之前释放它。我可以对信号执行此操作，但退出信号如何？我与 aboutToQuit 信号有关，但我觉得这不是吹走 qApp 的正确阶段。所以我的问题是，是否有删除 qApp 的正确位置，如果是，在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-06-15T16:54:52.123

> 问题是在做一些研究时，似乎 exec 函数不必返回。

好吧，是的，如果你的进程无论如何都崩溃和烧毁，它没有“必须”返回，即如果你已经调用 - 直接或间接 - `std::terminate()`, `::abort()`,`::exit()`等。这些库函数用于快速终止进程和你的问题不仅限于`QApplication`实例。调用堆栈上的**每个对象、****每个线程**中的每个对象都将被泄露，其中一些您既无法访问也无法控制的对象（运行时和库创建它们）而您对此无能为力。**不返回的情况`exec()`是一个例外，而不是您的程序应该结束的正常方式。**就“`exec()`没有返回时该怎么办：什么都没有。到那时为时已晚。

因此 - 不要抛出未捕获的异常，不要`::exit()`也不要`::abort()`，不要担心。在每个表现良好的 Qt 程序中，`QCoreApplication::exec()`都会返回。

# weka - 如何在 Libsvm+Weka 中查找/检测网格搜索的最佳参数？

> ID：10364472
> 
> 赞同：4
> 
> 时间：2012-04-28T14:36:42.860
> 
> 标签：weka, svm, libsvm, optional-parameters

我正在尝试将 SVM 与 Weka 框架一起使用。所以我正在使用 Libsvm。我是 SVM 的新手，正在阅读我阅读的 Libsvm 网站上的指南，该指南可以使用 GridSearch 发现 SVM 的最佳参数（成本和伽玛）。所以我在 Weka 上选择了 Grid Search，我得到了一个不好的分类结果（TN 率在 1% 左右）。那么我该如何解释这些结果呢？如果使用最佳参数我得到了不好的结果，我就没有机会获得更好的分类吗？我的意思是：网格搜索给了我使用 SVM 可以获得的最佳结果？

我的数据集由 1124 个实例（89% 负类，11% 正类）组成，有 31 个属性（其中 2 个是名义上的，其他是数字的）。我在整个数据集上使用交叉验证（10 倍）来测试模型。我尝试使用 GridSearch（我将每个属性值规范化在 0 和 1 之间，没有选择特征，但我根据 SVM 理论将类值从 0 和 1 更改为 1 和 -1，但 T 不知道它是否有用）与这些参数：成本从 1 到 18，步长为 1.0，伽马从 -5 到 10，步长为 1.0。结果是灵敏度 93.6% 和特异性 64.8%，但这些需要大约 1 小时才能完成计算！！

与决策树相比，我想获得更好的结果。使用特征选择（信息增益排名）+ SMOTE 过采样 + 成本敏感学习，我获得了 91% 的敏感性和 80% 的特异性。有没有办法在不尝试成本和伽玛值的所有可能范围的情况下调整 SVM？

# android - 出现异常：片段已激活

> ID：10364478
> 
> 赞同：58
> 
> 时间：2012-04-28T14:37:21.877
> 
> 标签：android, android-layout, android-intent, android-emulator, android-fragments

我有一个**片段**；

```
MyFragment myFrag = new MyFragment(); 
```

我将**捆绑数据**放入此片段：

```
Bundle bundle = new Bundle(); 
bundle.putString("TEST", "test");
myFrag.setArguments(bundle); 
```

然后，我用这个**替换**旧片段并**放入 backstack**：

```
//replace old fragment
fragmentTransaction.replace(R.id.fragment_placeholder, myFrag, "MyTag");
//put on backstack
fragmentTransaction.addToBackStack(null);
//commit & get transaction ID
int transId = fragmentTransaction.commit(); 
```

稍后，我使用上面的事务 ID( )**弹出回栈**`transId`：

```
//pop the transaction from backstack
fragmentManager.popBackStack(transId,FragmentManager.POP_BACK_STACK_INCLUSIVE); 
```

后来，我再次将**捆绑数据**设置为我的片段（`myFrag`）的参数：

```
//Got Java.lang.IllegalStateException: fragment already active
myFrag.setArguments(bundle); 
```

如您所见，我上面的代码出现异常`Java.lang.IllegalStateException: fragment already active`。**我不明白为什么** `myFrag` **尽管我已经从后台弹出了它的事务，但它仍然处于活动状态。**，无论如何，自从我遇到异常以来，我认为我别无选择，只能停用片段，所以，我做了：

```
Fragment activeFragment = fragMgr.findFragmentByTag("MyTag");
fragmentTransaction.remove(activeFragment); 
```

我不确定我上面的代码是否真的可以**停用**片段，因为我没有找到如何停用片段。:(

之后，当我再次尝试将捆绑数据设置到我的片段`myFrag`时，我仍然遇到同样的错误：

```
Java.lang.IllegalStateException: fragment already active 
```

似乎即使我删除了片段，它仍然处于活动状态......**为什么？如何停用片段？**

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2013-02-26T08:41:42.263

阅读[setArguments(Bundle args)](http://developer.android.com/reference/android/app/Fragment.html#setArguments%28android.os.Bundle%29)源代码将帮助您理解：

```
/**
* Supply the construction arguments for this fragment.  This can only
* be called before the fragment has been attached to its activity; that
* is, you should call it immediately after constructing the fragment.  The
* arguments supplied here will be retained across fragment destroy and
* creation.
*/
public void setArguments(Bundle args) {

    if (mIndex >= 0) {
        throw new IllegalStateException("Fragment already active");
    }
    mArguments = args;
} 
```

您不能在同一[Fragment的代码中再次使用](http://developer.android.com/reference/android/app/Fragment.html)[setArguments(Bundle args)](http://developer.android.com/reference/android/app/Fragment.html#setArguments%28android.os.Bundle%29)。我猜你想要做的是创建一个**新的**[Fragment](http://developer.android.com/reference/android/app/Fragment.html)并再次设置参数。或者你可以使用[getArguments()](http://developer.android.com/reference/android/app/Fragment.html#getArguments%28%29)然后使用bundle 的方法来改变它的值。 **`put`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T15:05:36.607

在添加新片段之前尝试删除之前的片段：[https ://stackoverflow.com/a/6266144/969325](https://stackoverflow.com/a/6266144/969325)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-20T11:08:24.313

remove() 将片段状态更改为停用。在您的情况下，您只是在 remove(..) 之后没有调用 commit()。

```
fragmentTransaction.remove(activeFragment); 
```

你也可以在 remove() 之后执行 commit()。

```
fragmentTransaction.remove(activeFragment).commit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-22T11:25:12.940

只需从片段中调用公共方法

```
if(userFragment==null){
                    userFragment = new UserFragment();
                    Bundle bundle = new Bundle();
                    bundle.putString(Constants.EXTRA_CUSTOMER, result);
                    userFragment.setArguments(bundle);
                }else{
                    try {
                        Customer customer = new Customer();
                        customer.parseCustomer(new JSONObject(result));
                        userFragment.updateVeiw(customer);
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-29T16:48:36.727

我在 Xamarin.android 上遇到了同样的问题。这是[文档](https://developer.android.com/reference/android/app/Fragment.html#setArguments%28android.os.Bundle%29)所说的。

> 这只能在片段附加到其活动之前调用

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-30T00:40:27.140

首先，我首先描述为什么会发生这种情况，然后我会提出我发现有效的解决方案......

当 Android 从堆栈中*删除*片段但**尚未**完成删除时，会发生此问题。为了检查这一点，您可以使用`isRemoving()`片段的方法。如果`false`，即片段未激活，您可以继续使用 设置参数`setArguments(bundle)`。否则，您无法将参数设置为已经处于活动状态的片段，并且只能通过使用`getArguments().putAll(bundle)`.

总结一下，

```
 if (myFrag.isRemoving()) {
        myFrag.getArguments().putAll(bundle);
    } else {
        myFrag.setArguments(bundle);
    } 
```

如果您想避免这种情况，即立即删除片段以便没有活动片段，您可能希望使用`onBackPressed()`in `onBackStackChangedListener()`，它将设置`isRemoving()`为`false`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-25T08:31:31.180

有同样的问题。我正在将片段添加到后台堆栈。错误是因为我没有调用 popbackstack()。使用 popbackstack 帮助了我

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-08-24T05:07:50.527

1.  例如，检查您的布局是当前布局还是旧布局

    ```
    setContentView(R.layout.activity_main); 
    ```

2.  删除项目文件中的旧 .gradle 文件并为项目重建 gradle 文件。**

# c++ - 何时自动释放内存？

> ID：10364479
> 
> 赞同：0
> 
> 时间：2012-04-28T14:37:30.840
> 
> 标签：c++

> **可能重复：**
> [可以在其范围之外访问局部变量的内存吗？](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)

何时自动释放内存？

```
void fun3(int a){
    a = 5;
} 
```

函数结束时“a”是否被释放？

是的 ！

那么这个输出的原因是什么？ [http://ideone.com/2ZJ57](http://ideone.com/2ZJ57)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T14:39:23.423

从技术上讲，存储的内存在`a`其他情况下可供我们使用，所以回答你的问题，是的。

不过，这取决于一些因素。甚至*可能*没有记忆可言。在您的特定示例中，优化器可能会删除所有内容。即使您执行类似的操作`cout << a`， a`5`也可能是内联的，它不驻留在内存中。

请注意，如果您通过引用传递，则生命周期是原始变量的生命周期。

此外，仅仅因为它被释放并不意味着之后会自动清理内存。在重用该内存之前，该值可能仍驻留在那里。

**您的示例**表现出未定义的行为：

```
void fun3(int *&p, int a){
        p = &a;
} 
```

`a`是一个局部变量，您获取它的地址并将其分配给`p`，然后您可以在函数外部使用它。任何事情都有可能发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T14:38:06.073

`a`当函数范围结束时，Yes被释放。

**那么这个输出的原因是什么？**
根据标准，通过指向超出变量存在范围的内存位置的指针访问自动变量的内容是未定义的行为。

您的程序正是这样做的，因此它具有**Undefined Behavior(UB)**。使用 UB，您的程序可以显示任何有效或无效的行为^(Ref 1)。

^(参考 1) **C++03 第 1.3.24 节：**

> 允许的未定义行为范围从**完全忽略具有不可预测结果的情况**，到在翻译或程序执行期间以环境特征的记录方式表现（有或没有发出诊断消息），到终止翻译或执行（发出的诊断消息）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T14:39:12.950

`a`是的，当函数退出时，分配的存储空间会被释放。

# ruby-on-rails - 非常简单的 ruby 组合框 - 文本解析问题

> ID：10364484
> 
> 赞同：0
> 
> 时间：2012-04-28T14:37:56.983
> 
> 标签：ruby-on-rails, ruby

试图在 ruby​​ 中创建简单的下拉列表 - 就像这样：

```
<%= select_tag(:origin_id, '<option value="1">Lisbon</option>') %> 
```

我收到了一个空的。
这是生成的html

```
 <select id="origin_id" name="origin_id">&lt;option alue=&quot;1&quot;&gt;Lisbon&lt;/option&gt;/select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:39:07.933

将您的 HTML 标记为安全的，以避免 Rails 对其进行转义。

```
<%= select_tag(:origin_id, '<option value="1">Lisbon</option>'.html_safe) %> 
```

# c# - 如何用 C# 设置文件描述？

> ID：10364494
> 
> 赞同：0
> 
> 时间：2012-04-28T14:38:33.933
> 
> 标签：c#, windows, .net-4.0

我如何访问文件的`Comments`和/或`Description`字段（doc、xls、pdf、ppt、txt、html 等）？

我需要这样做，以便我可以为文件存储一个唯一 ID，以防它被重命名，并且服务器上可能有 2 个同名文件，但在桌面上我不能有两个同名文件，所以我必须检查/设置这个唯一 ID。

我坚持的另一种方法是将 sqlce/sqlite db 存储在文件夹中并将其用作文件引用，但是如果我的文件监视器没有运行，并且用户重命名文件，它会变得非常混乱。

欢迎任何想法/代码示例。

# sqlite - sqlite 使用来自其他表的选择和匹配进行更改

> ID：10364502
> 
> 赞同：0
> 
> 时间：2012-04-28T14:39:13.970
> 
> 标签：sqlite

我知道如何使用 perl、python 甚至 MySQL 来做这些事情，但我似乎无法弄清楚如何使用 sqlite 来做这些事情。希望这里有人可以提供帮助。

更新说明：我仅限于 sqlite 版本 2.8.17

我有：

```
create table Ta (
    a1 INTEGER PRIMARY KEY,
    a2 VARCHAR(12) );

create table Tb (
    b1 VARCHAR(12) PRIMARY KEY, 
    b2 INTEGER, 
    b3 VARCHAR(8), 
    b4 VARCHAR(8) ); 
```

我想通过命令行和基本 sql 脚本做的是：遍历 Tb 中的所有行，其中 b2 == a1，我想用 a2 中的对应值替换 b1 中存储的值.

简化为： b1 = select a2 from Ta where a1 = b2

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:24:04.417

这个怎么样？

```
UPDATE Tb
    SET
        b1 = (SELECT a2 
              FROM Ta
              WHERE Tb.b2 = Ta.a1 )
    WHERE
        EXISTS (
            SELECT *
            FROM Ta
            WHERE Tb.b2 = Ta.a1 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T16:55:41.033

除非我错过了您的问题中的某些内容，否则您只需更新：

```
update tb set b1 = (select a2 from Ta where a1 = b2); 
```

**更新 1**

OP 提到她/他正在使用 sqlite 2.8.17，因此不支持“跨表”更新。

我发现这个[链接](http://www.sqlite.org/cvstrac/wiki?p=UnsupportedSqlUpdateWithFrom)提供了一种解决方法。它要求加入的字段是主键，这个问题就是这种情况。

这是声明：

```
insert or replace into tb (b2, b1) 
select ta.a1, ta.a2 
from ta, tb 
where ta.a1=tb.b2; 
```

我还没有测试过它，然后验证它执行时没有错误。据我所知，它应该与我在此更新之前发布的更新语句相同。

**更新 2**

正如OP指出的那样，上述内容存在问题。它将插入新记录而不是更新 Tb 中的现有记录。我现在确实看到了 OP 试图做的事情的矛盾：

假设使用 sqlite 3.xy。一个简单的`update`语句就可以完成工作。问题是，只要 中的多个记录具有与 中存在`Tb`的相同`b2`值，它就会失败`Ta.a1`：

```
sqlite> create table ta (
   ...>     a_key INTEGER PRIMARY KEY,
   ...>     a_val TEXT);
sqlite> create table tb (
   ...>     b_key TEXT PRIMARY KEY,
   ...>     b_val INTEGER);
sqlite> insert into ta values (1, 'a');
sqlite> insert into tb values ('z', 1);
sqlite> insert into tb values ('y', 1);
sqlite> update tb set b_key=(select a_val from ta where a_key=b_val); 
Error: column b_key is not unique 
```

所以这里的解决方案是做`Tb1.b2`唯一的：

```
create table Tb (
    b1 VARCHAR(12) PRIMARY KEY, 
    b2 INTEGER UNIQUE, 
    b3 VARCHAR(8), 
    b4 VARCHAR(8)); 
```

使`Tb.b2`唯一性使我的第一次更新中的解决方案正常工作，并*防止*上面暴露的唯一性违规。

# css - 防止在父 Div 上触发 Div 的悬停事件？

> ID：10364511
> 
> 赞同：8
> 
> 时间：2012-04-28T14:40:07.870
> 
> 标签：css, html, hover

当我将鼠标悬停在 DIV 上时，`.mensal`它会触发鼠标悬停在父`.opera`DIV 上，这对我来说似乎是错误的。我只希望“突出显示”效果对子`.opera`DIV 起作用。

```
#operaContent {
  padding: 0 50px 0 50px;
  position: relative;
  overflow: visible;
}
#operaContent .opera {
  display: block;
  border: 1px solid #FFFFFF;
  border-bottom: 1px solid #DDDDDD;
  padding: 5px;
  margin-bottom: 10px;
  height: 120px;
  background-color: #0A8ECC;
}
#operaContent .opera:hover {
  border: 1px solid #AAAAAA;
  background-color: #DDDDDD;
  cursor: pointer;
}
.mensal {
  position: absolute;
  top: 1px;
  left: 8px;
  z-index: 3;
  display: block;
}
```

```
<div id="operaContent">
  <div class="opera">
    <div class="mensal">
      DIV
    </div>
  </div>
</div>
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-28T14:48:46.540

根据定义，鼠标悬停在子节点上时，也会悬停在父节点上。html 事件中没有“阻塞”。

有两个方法链，气泡和捕获。

> 在 W3C 事件模型中发生的任何事件都会首先被捕获，直到它到达目标元素，然后再次冒泡。

[http://www.quirksmode.org/js/events_order.html](http://www.quirksmode.org/js/events_order.html)

您要阻止这种情况的唯一方法是通过向您的页面添加 javascript 以防止链来防止冒泡。这在 jQuery 中很简单

```
$('.mensal').hover(function(e){
    e.stopPropagation();

}); 
```

在我看来，这个答案在处理 CSS 时完全没有帮助。Javascript 事件不处理 CSS 选择器或阻止它们。

不幸的是，仅使用 CSS，我不知道如何实现这一点（即使在 javascript 中也可能会变得棘手）。CSS 4 选择器将允许您指定选择器的主题[http://dev.w3.org/csswg/selectors4/#subject](http://dev.w3.org/csswg/selectors4/#subject)以便您可以执行类似的操作

```
 #operaContent .opera:hover! .mensal:not(:hover) { /*your css*/ } 
```

但这尚未实施，草案仍在制定中。

编辑：这是一个应该适合你的 javascript (jQuery) 实现

​</p>

```
$(function(){
    $('.opera').hover(function() {$(this).addClass('hoverIntent')}, 
                      function(){ $(this).removeClass('hoverIntent'); }
                     );

    $('.opera .mensal').hover(function() {
        $(this).parent('.opera').removeClass('hoverIntent');
    });

})​ 
```

和修改后的 CSS

```
#operaContent {
    padding: 0 50px 0 50px;
    position: relative;
    overflow: visible;
}

#operaContent .opera {
    display: block;
    border: 1px solid #FFFFFF;
    border-bottom: 1px solid #DDDDDD;
    padding: 5px;
    margin-bottom: 10px;
    height: 120px;
    background-color: #0A8ECC;
}

#operaContent .opera.hoverIntent {
    border: 1px solid #AAAAAA;
    background-color: #DDDDDD;
    cursor: pointer;
}

.mensal {
    position: absolute;
    top: 1px;
    left: 8px;
    z-index: 3;
    display: block;
}​ 
```

和强制性工作演示：http: [//jsfiddle.net/WB6Ty/](http://jsfiddle.net/WB6Ty/)

# objective-c - 从资源文件 IOS 写入和读取对象

> ID：10364514
> 
> 赞同：0
> 
> 时间：2012-04-28T14:40:17.477
> 
> 标签：objective-c, serialization, file-io, cocos2d-iphone

我正在为我的游戏制作关卡编辑器。我使用cocos2d制作游戏。我有一个关卡节点，它是 CCNode 的子类，包含游戏中的所有关卡对象。然后该级别被添加到 CCLayer。我想将关卡的所有子级（一个 NSMutableArray）保存到资源文件夹中的一个文件中。我想加载这个 NSMutableArray，循环遍历它，并将所有保存的关卡对象添加到关卡。我无法将这些关卡对象保存在本地设备上，因为最终游戏中的关卡将基于此文件，并且其他设备需要将其与所有其他游戏资源一起准备好。有什么方法可以做到这一点，还是我只需要保存包含关卡对象所有属性的字符串并在这些字符串中搜索加载关卡所需的信息？如果是这样的话，有没有一种方法可以结合 NSString 将 ac 结构读写到文件中？这是我到目前为止所拥有的：

```
 NSString * filePath = @"LevelSaves.txt";
        NSString * fileRoot = [[NSBundle mainBundle]pathForResource:filePath      ofType:@"txt"];
        NSString * fileContents = [NSString stringWithContentsOfFile:fileRoot encoding:NSUTF8StringEncoding error:nil];
        NSArray * allLinedStrings = [fileContents componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]];
        ObjectFactory * objFactory = ObjectFactory::sharedObjectFactory();
        for (NSString * curString in allLinedStrings) {
            NSArray * seperatedString = [curString componentsSeparatedByCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@";"]];
            NSString * objectID = (NSString*)[seperatedString objectAtIndex:0];
            NSArray * properties = (NSArray*)[seperatedString objectAtIndex:1]; //not really sure about this part. Haven't tried saving anything there yet.
            objFactory->createObject(objectID,properties); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T02:12:52.017

您不能将数据保存在应用程序包中（我相信这就是您所说的“资源”文件夹）。您可以将它们保存在应用程序的`NSDocumentDirectory`中，如果您的对象符合`NSCoding`，您可以使用 序列化它们`NSKeyedArchiver`。

执行上述调试，当你完成编辑关卡后，将其捆绑发布并用于`NSKeyedUnarchiver`反序列化。

# php - PHP mime 类型不适用于 MP3

> ID：10364515
> 
> 赞同：3
> 
> 时间：2012-04-28T14:40:24.047
> 
> 标签：php, header, mime-types, content-type, readfile

在 PHP 中使用 mime 类型时遇到问题。

作为一项安全功能，我将用户上传到我的服务器的任何内容放在 public_html 之外的目录中。当用户想要在浏览器中访问他们上传的文件时，我使用 php 脚本使用 readfile 和 header('content-type') 从安全文件夹中提取文件，到目前为止我遇到的问题仅与 mp3 相关。

当我尝试将其用于 mp3 文件时，该文件实际上并没有在浏览器中播放，但 M4As 工作正常。而且它也不是每个 mp3 文件，似乎当我得到一些 mp3 文件的 mime 类型时，php 无法判断它们是 mp3。如果我下载它们，mp3 也可以正常播放，因此文件不是问题（除非文件以某种方式具有错误的 mime 类型）。

我怎么知道它们是 mp3？

我的 getFile 代码在这里：[codepad.org](http://codepad.org/Yvs8TXqg)

任何帮助将不胜感激，我什至会给你一些我的跟踪 cookie！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T07:24:48.553

对于 mp3，您是否尝试过：

```
header("Content-Type: audio/mpeg"); 
```

# javascript - 在jquery中匹配精确的搜索字符串

> ID：10364518
> 
> 赞同：0
> 
> 时间：2012-04-28T14:40:30.023
> 
> 标签：javascript, jquery, search, filter, each

我正在使用 jQuery 解析各种 XML 文件，并实现了一个搜索功能，可以在当前选择的文件中找到某个单词或短语，但是下面的行有一个小问题：

```
$("LINE:contains(" + query + ")",currentContext).each(function(){ 
```

搜索本身工作得很好，但是，这一行正在检索包含查询的所有单词。例如，如果我想找到“儿子”这个词，它正在检索“季节”。

我知道这取决于寻找任何包含“儿子”的字符串。从我环顾四周的情况来看，这`.filter()`可能会解决我的问题，但我不确定如何将它实现到我的代码中，我尝试了类似`$("LINE").filter(query,currentContext).each(function()`但无济于事的方法，所以任何帮助将不胜感激。

可以在此处查看 XML 文件之一的简短示例：http: [//pastebin.com/1tqhpH4W](http://pastebin.com/1tqhpH4W)

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:54:57.203

这样的事情怎么样？

```
var word = "son";
$("LINE", currentContext).filter(function() {
    return new RegExp("\\b" + word + "\\b").test($(this).text());
}).each(function() { ... }); 
```

# jquery - Jquery移动样式问题

> ID：10364521
> 
> 赞同：0
> 
> 时间：2012-04-28T14:40:45.413
> 
> 标签：jquery, css, mobile, styling

我使用 jQuery mobile 制作网站，但由于某种原因，它不允许我将文本框和按钮放在同一行。

```
<div data-role="footer" data-position="fixed">
            <input type="text" placeholder="Your Message" id="usermsg" /><input type="button" value="Send!" id="submitmsg" />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-27T10:05:34.180

使用**网格**是执行此操作的正确方法。

```
 <label for="points">Textbox and a Button on the same line.</label>
  <div data-role="footer" data-position="fixed">
    <div class="ui-grid-a">
      <div class="ui-block-a">
            <input type="text" data-inline="true" placeholder="Your Message" id="usermsg" />
      </div> 
     <div class="ui-block-b">
            <input type="button" value="Send!" id="submitmsg" data-inline="true"/>
     </div>
   </div> 
```

如果你想改变网格大小，你可以简单地添加一些 CSS 到它。例如。`class="ui-block-a myField"` 同样作为一个快速建议，由于 AJAX 导航，我建议不要在 JQuery Mobile 中使用 ID。建议改用类。

# lotus-notes - FTSearch involving date fields is confusing me

> ID：10364526
> 
> 赞同：3
> 
> 时间：2012-04-28T14:41:52.217
> 
> 标签：lotus-notes, xpages, xpages-ssjs

I have Custom Control with a search screen that lets the users select any of up to six different fields to search on. I had no trouble getting all the other fields working with the exception of the two date fields. They can fill in both begin and end dates or just one or the other. Pretty standard stuff but I cannot figure out how to write the code to make the query work and have it do the search when it involves dates.

```
var tmpArray = new Array("");
var cTerms = 0;
if(requestScope.cmbSendTo != null & requestScope.cmbSendTo != "") {
    a = @Right(requestScope.cmbSendTo, "(");
    b = @Left(a,3);
tmpArray[cTerms++] = "(FIELD Mnemonic = \"" + b + "\")";
}
if(requestScope.edtFrom != & requestScope.edtFrom != "") {
tmpArray[cTerms++] = "(FIELD From = \"" + requestScope.edtFrom + "\")";
}
//**************************************************************************
if(requestScope.edtDateRangeFrom != null & requestScope.edtDateRangeFrom != "") {
tmpArray[cTerms++] = "(FIELD DeliveredDate >= \"" + requestScope.edtDateRangeFrom + "\")";
}
if(requestScope.edtDateRangeTo != null & requestScope.edtDateRangeTo != "") {
tmpArray[cTerms++] = "(FIELD DeliveredDate <= \"" + requestScope.edtDateRangeTo + "\")";
}
//**************************************************************************
if(requestScope.edtOriginal != null & requestScope.edtOriginal != "") {
tmpArray[cTerms++] = "(FIELD SourceFilename = \"" + requestScope.edtOriginal + "\")";
}
if(requestScope.edtCaptiva != null & requestScope.edtCaptiva != "") {
tmpArray[cTerms++] = "(FIELD Filename = \"" + requestScope.edtCaptiva + "\")";
}
qstring = tmpArray.join(" AND ").trim();
requestScope.queryString = qstring;
return qstring 
```

Any assistance would be appreciated

The idea behind this screen was taken from this video: XPages View Control - Add Full Text Search - [http://www-10.lotus.com/ldd/ddwiki.nsf/dx/XPagesViewControlAddFullTextSearch.htm](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/XPagesViewControlAddFullTextSearch.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T17:56:01.067

If I'm reading it right, your query is resolving to

```
FIELD DeliveredDate >= "xx/yy/zz" 
```

My first instinct was that you needed this instead:

```
FIELD DeliveredDate >= [xx/yy/zz] 
```

But documentation indicates that you don't need brackets or quotes, so this:

```
FIELD DeliveredDate >= xx/yy/zz 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T19:26:31.543

The line `if(requestScope.edtFrom != & requestScope.edtFrom != "") {` is not complete. You miss the part to test for. I assume it lacks the null check and therefore should be:

```
if(requestScope.edtFrom != null & requestScope.edtFrom != "") { 
```

Furthermore, you need to format the date to return what you expect for the query (e.g. MM/dd/yyyy). The formatting in the inputText control only applies to the visual formatting and not the format of the actual content.

Finally, you need to remove the quotes around the date.

The following code example based on your code will return the date without formatting and then return the date with the correct formatting:

```
<xp:button value="Label" id="button1">
    <xp:eventHandler event="onclick" submit="true" refreshMode="partial" refreshId="computedField1"></xp:eventHandler>
</xp:button>

<xp:inputText id="edtDateRangeFrom" value="#{requestScope.edtDateRangeFrom}">
    <xp:this.converter>
        <xp:convertDateTime type="date"></xp:convertDateTime>
    </xp:this.converter>
    <xp:dateTimeHelper></xp:dateTimeHelper>
</xp:inputText>

<xp:text escape="true" id="computedField1">
    <xp:this.value><![CDATA[#{javascript:var tmpArray = new Array("");
    var cTerms = 0;
    if(requestScope.edtDateRangeFrom != null & requestScope.edtDateRangeFrom != "") {
        tmpArray[cTerms++] = "(FIELD DeliveredDate >= \"" + requestScope.edtDateRangeFrom + "\")";
        var dateFormatter = new java.text.SimpleDateFormat( "MM/dd/yyyy" );
        var formattedDate = dateFormatter.format( requestScope.edtDateRangeFrom );
        tmpArray[cTerms++] = "(FIELD DeliveredDate >= " + formattedDate + ")";
    }

    qstring = tmpArray.join(" AND ").trim();
    requestScope.queryString = qstring;

    return qstring}]]>
    </xp:this.value>
</xp:text> 
```

It will return the following where the 2nd part is the format you are looking for:

```
(FIELD DeliveredDate >= "Fri Apr 27 12:00:00 CEST 2012")
AND (FIELD DeliveredDate >= 04/27/2012) 
```

Here is your code with all these updates:

```
var tmpArray = new Array("");
var cTerms = 0;
var dateFormatter = new java.text.SimpleDateFormat( "MM/dd/yyyy" );
var formattedDate = "";
if(requestScope.cmbSendTo != null & requestScope.cmbSendTo != "") {
    a = @Right(requestScope.cmbSendTo, "(");
    b = @Left(a,3);
tmpArray[cTerms++] = "(FIELD Mnemonic = \"" + b + "\")";
}
if(requestScope.edtFrom != null & requestScope.edtFrom != "") {
tmpArray[cTerms++] = "(FIELD From = \"" + requestScope.edtFrom + "\")";
}

if(requestScope.edtDateRangeFrom != null & requestScope.edtDateRangeFrom != "") {
    formattedDate = dateFormatter.format( requestScope.edtDateRangeFrom );
    tmpArray[cTerms++] = "(FIELD DeliveredDate >= " + formattedDate + ")";
} 
if(requestScope.edtDateRangeTo != null & requestScope.edtDateRangeTo != "") {
    formattedDate = dateFormatter.format( requestScope.edtDateRangeTo );
    tmpArray[cTerms++] = "(FIELD DeliveredDate <= " + formattedDate + ")";
}

if(requestScope.edtOriginal != null & requestScope.edtOriginal != "") {
tmpArray[cTerms++] = "(FIELD SourceFilename = \"" + requestScope.edtOriginal + "\")";
}
if(requestScope.edtCaptiva != null & requestScope.edtCaptiva != "") {
tmpArray[cTerms++] = "(FIELD Filename = \"" + requestScope.edtCaptiva + "\")";
}
qstring = tmpArray.join(" AND ").trim();
requestScope.queryString = qstring; // this just displays the query
return qstring // this is what sets the search property 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T15:54:16.350

Double check the query being created here. Perhaps print it to the screen or grab it from the debugger. You may see a problem there within the query and I believe you should be able to take that exact query and paste it in the search window of the database that has been full text indexed.

Also, have a look at this doc which covers notes query syntax, it may help you troubleshoot. I didn't see anything wrong in your code though.

[http://www.loganmachinists.com/help/help8_client.nsf/f4b82fbb75e942a6852566ac0037f284/0e044d2c0639c979852572fe00687f29?OpenDocument](http://www.loganmachinists.com/help/help8_client.nsf/f4b82fbb75e942a6852566ac0037f284/0e044d2c0639c979852572fe00687f29?OpenDocument)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T17:52:42.027

dates should always ( in my experience ) be written in the format mm/dd/yyyy so for instance

[deliverdatemin] >= 1/1/2012 and [deliverdatemax] <= 1/30/2012

An easy way to find out which query you are generating is to use the following piece of code to throw an error with the query generated

```
//youre own code  
throw new java.lang.exception(queryvariable); 
```

Or you could simply do a print() to display the query on the serverconsole

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T08:14:58.957

```
As of my concern The best way to handle the date field is that converting our date value for one specific format using NotesDateTime., Because this is the best date conversion for xpage. 
```

Dim dateTime As New NotesDateTime( "date String" )

or

Dim dateTime As New NotesDateTime( NotedateTime.getDtaeOnly() )

# php - Yii 中的页面重定向问题

> ID：10364527
> 
> 赞同：0
> 
> 时间：2012-04-28T14:42:00.470
> 
> 标签：php, yii

我在 Yii 中构建的应用程序中有问题...

> 页面未正确重定向
> 
> Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。

在 chrome 中它说...

> 此网页有重定向循环

还有一件事，它在本地机器上运行良好；没有问题，但上述错误在实时服务器上......

现在这里的主要问题是什么..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T14:14:32.367

> 似乎任何用户都不允许查看“登录”操作。当用户尝试访问仅限会员的页面时，Yii 的默认行为是将其重定向到登录页面，并且由于您的登录操作不允许访客用户使用，Yii 会再次重定向到登录页面，从而导致无限循环和太多重定向错误
> 
> 检查控制器类上的 accessRules() 函数，在您的情况下为“UserController.php”。您需要让“Guest”用户或任何用户执行操作，在这种情况下为“actionLogin()”。
> 
> 只需将“登录”添加到“操作数组”并检查“用户数组”的值为“*”

```
// FILE = WebRoot/protected/controllers/UserController.php

//...
public function accessRules()
        {
                return array(
                        array('allow',  // allow all users to perform 'index' and 'view' actions
                                'actions'=>array('index','view','login'),
                                'users'=>array('*'),
        //...
        }
//... 
```

> 当您删除默认登录然后尝试创建自己的登录时，您可能会遇到此问题，这可能会解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T14:25:52.270

经过几天与循环重定向的斗争，它以非性感的方式解决了，但它有效

```
if (stristr($_SERVER['HTTP_USER_AGENT'], 'Firefox') ) echo '<meta http-equiv="refresh" content="0; url='.Yii::app()->createUrl('url/goes/there').'">' ; 
else $this->redirect(Yii::app()->createUrl('url/goes/there')); 
```

# css - 将一个 div 放在另一个 div 的底部

> ID：10364528
> 
> 赞同：0
> 
> 时间：2012-04-28T14:42:27.460
> 
> 标签：css

我正在尝试进行 jquery 分页，但是我在将导航器保持在底部时遇到问题，即使使用`clear: both`.

![在此处输入图像描述](../Images/0af4b62fd13ee4408b2c052d94997fe1.png)

问题是导航 div`<div class="alt_page_navigation"></div>`必须在`</ul>`结束的地方并且不能在另一个 div 中，否则分页会被破坏。

另一个问题是因为页面是动态的，所以我不知道`alt_page_navigation`事先的宽度。

[这是一个实时页面示例](http://nightlifebratislava.com/demos/littlething/)，我已经尝试了谷歌吐出的所有内容，但无济于事。如果有人知道一个简单的解决方案，请告诉我:)

谢谢 ：））

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T14:50:46.690

Clear 不适用于您的内联块显示，但您需要它来居中。

试试[这个解决方案](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best)来创建一个清除 div，然后把

```
<div class="clearfix"></div> 
```

在您的产品和寻呼机之间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T15:03:26.090

将填充放在等于导航高度的底部，并像这样定位：

```
.wrapper { position:relative; padding-bottom:1.5em }
.nav     { height:1.5em; position:absolute; bottom:0 } 
```

例如：http: [//jsfiddle.net/CwrMq/](http://jsfiddle.net/CwrMq/)

* * *

但是也没有理由使用绝对定位；让它成为一个合适的`display:block`项目。例如：http: [//jsfiddle.net/CwrMq/1/](http://jsfiddle.net/CwrMq/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T15:12:25.747

你的`.alt_page_navigation`div 已经`display: inline-block`设置好了。如果您在 css 中删除此行 - 您的 div 将清除浮动。如果您希望它的内容位于页面的中心，只需添加`text-align: center`它并确保其内容是`inline-block`（现在您`a`是块级的）。您可以在此处查看工作示例：http: [//jsfiddle.net/6FNH6/](http://jsfiddle.net/6FNH6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T15:14:43.593

这是我倾向于在这种情况下使用的解决方案。

您的分页器需要进入水平放置的容器内

看到这个小提琴 - [http://jsfiddle.net/94MwF/1/](http://jsfiddle.net/94MwF/1/)

基本上，您使用 text-align 将其水平居中，并将 absolute 放置在底部。

# ruby-on-rails - Rails：当我们使用 attr_accessible 时如何更新迁移中的数据？

> ID：10364529
> 
> 赞同：1
> 
> 时间：2012-04-28T14:42:39.767
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, attr-accessible

当我们尝试更新表中包含的某些数据时，我们遇到了迁移问题。

我们的基本模型如下所示：

用户

*   用户名
*   密码
*   …</li>

我们创建了第一个迁移以在模型中添加一列，然后更新现有行：

```
add_column :users, :deleted, :boolean

User.all.each do |user|
  user.deleted = false
  user.save
end 
```

第二次迁移应该创建一个 last_name 列并将 username 列重命名为 first_name：

```
rename_column :users, :username, :first_name
add_column :users, :last_name, :string 
```

它在开发中没有任何问题，因为第二次迁移是在第一次迁移几天后创建的（所以每个人都有足够的时间在第二次迁移之前应用第一次）。

我们遇到的问题是，当我们尝试在暂存/生产中将这些迁移部署到以下模型时：

```
class User < ActiveRecord::Base

  attr_accessible :first_name,
                  :last_name,
                  :password,
                  :password_confirmation,
                  ...

  ...

end 
```

第一次迁移在保存时失败，因为 first_name 和 last_name 尚不存在，尽管它们存在于 attr_accessible 中。

即使我们尝试绕过验证，问题仍然存在。

你有没有遇到过这种问题，你能帮我们绕过它吗，因为我们想坚持完整的 ruby​​ 代码而不编写任何 SQL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T14:48:48.253

使用`add_column :users, :deleted, :boolean, :default => false`. 这应该用方法替换您的片段`save`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T14:50:19.580

您可以在需要时强制 ActiveRecord 从迁移中的数据库重新加载模型信息：

```
User.reset_column_information 
```

当您的模型与以前的数据库状态不够一致时，您还可以切换到原始 SQL 以使用以下`execute`方法执行更新：

```
execute 'UPDATE users SET deleted=0' 
```

# c# - 在预期脚本之前执行图像下载

> ID：10364530
> 
> 赞同：0
> 
> 时间：2012-04-28T14:42:53.153
> 
> 标签：c#, wpf, drawing, execution, shapes

我今天遇到了这个“有趣”的问题。我在 wpf 窗口上有一个按钮，当我按下它时，我希望一个矩形变得可见并扩展到我的主窗口的大小。然后将文本保持在矩形内以在其中心对齐。发生这种情况后，我希望脚本从 Web 下载图像以开始执行。但是......当我按下按钮时，我的矩形不可见，而是exe开始下载图像......我认为代码应该按顺序执行......

```
On button_1 press(blah blah){

expander1.IsExpanded = false; //just an expander i use to hide a few elements

            pleasewait.Visibility = Visibility.Visible; //pleasewait - rectangle
            plswait_label.Visibility = Visibility.Visible; // plswait_lable - label
            pleasewait.Height = window_main.Height;
            pleasewait.Width = window_main.Width;
            plswait_label.HorizontalAlignment = HorizontalAlignment.Center;
            plswait_label.VerticalAlignment = VerticalAlignment.Center;

            image1.Source = null; // dumping previous image before downloading a new one

//This is the script to download the image and do some other stuff..
    string path = System.IO.Path.GetDirectoryName(System.Diagnostics.Process.GetCurrentProcess().MainModule.FileName);

    Uri urlUri = new Uri(address.Text);
    var request = WebRequest.CreateDefault(urlUri);

    byte[] buffer = new byte[4096];

    using (var target = new FileStream(path + @"\Temp\br_temp.png", FileMode.Create, FileAccess.Write))
    {
        using (var response = request.GetResponse())
        {
            using (var stream = response.GetResponseStream())
            {
                int read;

                while ((read = stream.Read(buffer, 0, buffer.Length)) > 0)
                {
                    target.Write(buffer, 0, read);
                }
            }
        }
    }

    Bitmap resizedImage;
    System.Drawing.Size newSize = new System.Drawing.Size(266, 150);

    using (System.Drawing.Image originalImage = System.Drawing.Image.FromFile(path + @"\Temp\br_temp.png"))
        resizedImage = new System.Drawing.Bitmap(originalImage, newSize);
    resizedImage.Save(path + @"\Temp\temp.png", System.Drawing.Imaging.ImageFormat.Jpeg);
    resizedImage.Dispose();

    BitmapImage MainImage = new BitmapImage();
    MainImage.BeginInit();
    MainImage.UriSource = new Uri(path + @"\Temp\temp.png");
    MainImage.DecodePixelWidth = 266;
    MainImage.DecodePixelHeight = 150;
    MainImage.EndInit();
    image1.Source = MainImage;
} 
```

有趣的是，如果我删除下载代码，矩形实际上会做我想要的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:53:08.827

下载阻塞了 UI 线程。在下载完成之前，UI 上的任何内容都不会起作用。

您需要将下载代码移出 UI 线程。

一个简单的方法是使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

一如既往，我推荐阅读[Joe Albahari 的电子书](http://www.albahari.com/threading/)

# php - 使用 facebook api 登录

> ID：10364532
> 
> 赞同：1
> 
> 时间：2012-04-28T14:43:01.827
> 
> 标签：php, javascript, facebook

我有如下代码。为什么`$userId`总是`0`？当我单击登录按钮时，我得到`B.login() called when user is already connected.`. 当我在 fb 检查允许的应用程序时，会添加此应用程序。看起来我已连接，所以它应该是 my`id`而不是`0`.

```
<pre>
define('YOUR_APP_ID', ###);

require 'facebook.php';

$facebook = new Facebook(array(
  'appId'  => ###,
  'secret' => '###',
));

$userId = $facebook->getUser();
echo $userId;
?>

<html>
  <body>
    <?php if ($userId) { 
      $userInfo = $facebook->api('/' + $userId); ?>
      Welcome <?= $userInfo['name'] ?>
    <?php } else { ?>
    <div id="fb-root"></div>
    <fb:login-button></fb:login-button>
    <?php } ?>
    <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '<? echo('####'); ?>',
          status     : true, 
          cookie     : true,
          xfbml      : true,
          oauth      : true,
        });

        FB.Event.subscribe('auth.login', function(response) {
          window.location.reload();
        });
      };

      (function(d){
         var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all.js";
         d.getElementsByTagName('head')[0].appendChild(js);
       }(document));
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T20:48:38.587

当我使用**FBJS SDK**进行连接时，我遇到了同样的问题，我也担心这个功能是如何运行的，以及这个问题是如何解决的，但严重的是没有成功......

我把这个链接推荐给你 [https://github.com/facebook/php-sdk](https://github.com/facebook/php-sdk)因为它很容易用于 facebook 连接......

我也不想在这里复制我的代码，因为它太长并且属于 codeigniter

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T02:55:50.710

你在IE工作吗？如果是这样，您需要获取所有页面的 P3P 标头。

```
header('P3P:CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"'); 
```

如果没有，请在登录应用程序时授予用户良好的权限。

# c# - 构造一个整数数组来实现特定的序列

> ID：10364534
> 
> 赞同：2
> 
> 时间：2012-04-28T14:43:33.840
> 
> 标签：c#

> 使用以下规则构造以 A 结尾的最短可能整数序列：
> 
> 序列的第一个元素是 1，每个后续元素都是前面任意两个元素的和（也允许向自身添加单个元素），每个元素都大于前面的所有元素；也就是说，序列是递增的。
> 
> 例如，对于 A = 42，可能的解决方案是 [1, 2, 3, 6, 12, 24, 30, 42]。另一种可能的解决方案是 [1, 2, 4, 5, 8, 16, 21, 42]。

我写了以下内容，但在输入 456 时失败，通过返回 [1,2,4,8,16,32,64,128,200,256,456] ，序列中没有数字可以加在一起得到 200。

如何修复以下代码？我究竟做错了什么？

```
 public static int[] hit(int n)
    {
        List<int> nums = new List<int>();

        int x = 1;

        while (x < n)
        {
            nums.Add(x);
            x = x * 2;

            if (x > n)
            {

                    nums.Add(n - (x / 2));

                nums.Add(n);
            }
        }

        nums.Sort();
        int[] arr =  nums.ToArray();
        return arr;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T01:03:26.227

我想我明白了：

```
public Set<Integer> shortList(int n){
    Set<Integer> result = new HashSet<Integer>();
    Stack<Integer> stack = new Stack<Integer>();
    result.add(n);
    int num=n, den=0;
    while(num>1){
        while(num > den){
            num--; den++;
            if(num%den==0)
                stack.push(num);
        }//num>den
        if(!stack.isEmpty()){
            num = stack.pop();
            result.add(num);
            stack.clear();
        }else{
            result.add(num);
            result.add(den);
        }
        den=0;
    }
    return result;
}// 
```

结果（未排序）

```
for 42: [1, 2, 3, 21, 6, 7, 42, 14]
for 15: [1, 2, 4, 5, 10, 15]
for 310: [1, 2, 155, 4, 5, 310, 10, 124, 62, 31, 15, 30] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T02:11:35.860

这是我在 C++ 中的解决方案（可以简单地更改为 C#）：

```
void printSequenceTo(unsigned n)
{
    if (n == 1) { printf("1"); return; }
    if (n & 1) {
        int factor = 3;
        do {
            if (n % factor == 0) {
                printSequenceTo(n / factor * (factor-1));
                factor = 0;
                break;
            }
            factor += 2;
        } while (factor * factor <= n);
        if (factor) printSequenceTo(n-1);
    }
    else
        printSequenceTo(n/2);
    printf(",%u", n);
} 
```

演示：http: [//ideone.com/8lXxc](http://ideone.com/8lXxc)

自然地，它可以使用筛子来加速分解。

* * *

请注意，这是对公认答案的重大改进，但仍然不是最佳的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T15:48:14.947

我知道这背后会有一个数学证明，但我的猜测是将数字除以 2，如果除以 2，则重复该过程。如果有余数，则为 1。因此，您将得到整数商和商加一。由于保证有一个在集合中，因此已经处理了 2 个数字中较大的一个。所以只需对较小的重复该过程。这个问题当然意味着一个递归解决方案，它应该是相对微不足道的，所以我将把它留给发帖人来实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T17:25:05.293

```
public static int[] hit(int n)
    {
        List<int> nums = new List<int>();

        nums.Add(n);

        int x = 0;
        int Right = 0;
        int Left = 0;

        do
        {
            //even num
            if (n % 2 == 0)
            {
                x = n / 2;

                //result of division is also even 20/2 = 10 
                if (x % 2 == 0 || n>10 )
                {

                    nums.Add(x);

                    n = x;

                }
                else
                {
                    nums.Add(x + 1);
                    nums.Add(x - 1);

                    n = x - 1;
                }

            }
                //numbers that can only be divided by 3
            else if (n % 3 == 0)
            {
                x = n / 3;//46/3 =155

                 Right = x * 2;//155*2 = 310
                 Left = x;//155

                nums.Add(Right);
                nums.Add(Left);

                n = x;

            }
                //numbers that can only be divided by 5
            else
            {
                x = n / 2;
                Right = x + 1;
                Left = x;

                nums.Add(Right);
                nums.Add(Left);

                n = Left;
            }
        } while (n > 2);

        nums.Add(1);

        nums.Reverse();

        int[] arr = nums.ToArray();

        return arr;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T15:35:24.390

这是我的尝试。它可能会被优化，但它显示了我的想法：

```
private static IEnumerable<int> OptimalSequence(int lastElement)
{
    var result = new List<int>();
    int currentElement = 1;
    do
    {
        result.Add(currentElement);
        currentElement = currentElement * 2;
    } while (currentElement <= lastElement);
    var realLastElement = result.Last();
    if (lastElement != realLastElement)
    {
        result.Add(lastElement);                
        FixCollection(result, lastElement - realLastElement);
    }
    return result;
}

private static void FixCollection(List<int> result, int difference)
{
    for (int i = 0; i < result.Count; i++)
    {
        if (result[i] == difference) break;
        if (result[i] > difference)
        {
            result.Insert(i, difference);
            FixCollection(result, difference - result[i-1]);
            break;
        }
    }
} 
```

**编辑** 我无法正式证明它，但我的答案和 Chris Gessler 的答案给出了相同大小的序列（至少我检查了 1 到 10000 之间的数字），因为这两种算法都会补偿奇数。一些例子：

```
Number 1535
1,2,3,4,7,8,15,16,31,32,63,64,127,128,255,256,511,512,1024,1535
Number 2047
1,2,3,4,7,8,15,16,31,32,63,64,127,128,255,256,511,512,1023,1024,2047
Number 3071
1,2,3,4,7,8,15,16,31,32,63,64,127,128,255,256,511,512,1023,1024,2048,3071
Number 4095
1,2,3,4,7,8,15,16,31,32,63,64,127,128,255,256,511,512,1023,1024,2047,2048,4095
Number 6143
1,2,3,4,7,8,15,16,31,32,63,64,127,128,255,256,511,512,1023,1024,2047,2048,4096,6143
Number 8191
1,2,3,4,7,8,15,16,31,32,63,64,127,128,255,256,511,512,1023,1024,2047,2048,4095,4096,8191

==============

Number 1535
1,2,4,5,10,11,22,23,46,47,94,95,190,191,382,383,766,767,1534,1535
Number 2047
1,2,3,6,7,14,15,30,31,62,63,126,127,254,255,510,511,1022,1023,2046,2047
Number 3071
1,2,4,5,10,11,22,23,46,47,94,95,190,191,382,383,766,767,1534,1535,3070,3071
Number 4095
1,2,3,6,7,14,15,30,31,62,63,126,127,254,255,510,511,1022,1023,2046,2047,4094,4095
Number 6143
1,2,4,5,10,11,22,23,46,47,94,95,190,191,382,383,766,767,1534,1535,3070,3071,6142,6143
Number 8191
1,2,3,6,7,14,15,30,31,62,63,126,127,254,255,510,511,1022,1023,2046,2047,4094,4095,8190,8191 
```

# java - 使用 JPA 实现机票和航班关系

> ID：10364537
> 
> 赞同：0
> 
> 时间：2012-04-28T14:43:51.080
> 
> 标签：java, hibernate, jpa

我想实现两个实体之间的 Ticket 和 Flight 关系。

一个航班有很多票，这很好，可以通过

`Settickets = 新的 HashSet(0);

```
@OneToMany
public Set<Ticket> getTickets() {
    return tickets;
}

public void setTickets(Set<Ticket> tickets) {
    this.tickets = tickets;
}` 
```

但是我应该如何实现 Ticket 只有一个与之关联的航班？
我不确定像下面这样的实施是否可以解决问题。内票，java

`Flight flight;
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name="ticket_id")
public Flight getFlight() { return flight; }`

```
public void setFlight(Flight flight) {
    this.flight = flight;
} 
```

`

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T14:50:42.407

你应该这样：

在`Flight`：

```
@OneToMany(mappedBy = "flight")
Set<Ticket> tickets; 
```

而在`Ticket`

```
@ManyToOne
@JoinColumn(name = "FLIGHT_ID")
Flight flight; 
```

# ruby-on-rails - 为现有 API 编写仅 ROR API 包装器

> ID：10364544
> 
> 赞同：0
> 
> 时间：2012-04-28T14:44:33.510
> 
> 标签：ruby-on-rails, api

我有一个正在运行的 Java 应用程序，它有一些 API，但没有一个遵循 REST 标准。您需要使用单独的 API（一些基于 XML/JSON，而另一些基于 SMTP）来实现 CRUS 操作。

我真的很喜欢 MVC 架构和 ROR 的严格**REST**完整性，所以我正在考虑使用[rails-api](https://github.com/spastorino/rails-api) gem 编写一个仅 API 的 ROR 服务。是否建议在现有 API 上编写这样的包装器以提供更好的 REST API？

注意：现有的 API 已经很老了，我不想从头开始重写它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:52:49.503

是否“推荐”取决于您的需求、时间范围、投资回报率等。在现有 API 上编写 RESTful 层没有任何*问题*，如果这就是您真正要问的。

我更喜欢“常规” API，而不是具有多种访问方法、不规则访问模式等的 API。如果我有时间和资源，在复杂性之上放置一层抽象几乎总是有价值的。

# mysql - 过程中的 MySQL PREPARE 和 EXECUTE 语句

> ID：10364548
> 
> 赞同：0
> 
> 时间：2012-04-28T14:44:59.960
> 
> 标签：mysql

我在 mysql 中有一个程序，我希望它每隔一段时间被调用一次，以便每天每小时为许多设备工作的插槽填充一个表。表格格式是这样的

```
CREATE TABLE IF NOT EXISTS set1_dev_slot
(
id                 MEDIUMINT UNSIGNED                      NOT NULL AUTO_INCREMENT,
device             TINYINT UNSIGNED                        NOT NULL,
dev_date           DATE                                    NOT NULL,
dev_time           TIME                                    NOT NULL,
status             ENUM('FREE','PENDING','RESERVED')       NOT NULL DEFAULT 'FREE',
dev_type           ENUM('FIN','CHAL','NONE')               NOT NULL DEFAULT 'NONE',

PRIMARY KEY (id),
UNIQUE (device,dev_date,dev_time),

CONSTRAINT fk_device FOREIGN KEY (device) REFERENCES device (id)
); 
```

所以我有一个用于一组设备的表并命名它`set1_dev_slot`。通常，tabes 具有以下名称格式：`setX_devices`等`setX_dev_slot`该过程必须每天从 1600 到 0100 每小时添加记录，我只是用一些参数调用它来添加我想要的数量。目前的程序如下

```
delimiter //
CREATE PROCEDURE populateSlots (IN currentDateTime DATETIME, IN periodInDays INT)
BEGIN
    DECLARE iterDateTime DATETIME DEFAULT currentDateTime;
    DECLARE numDevices INT;
    SELECT COUNT(*) INTO numDevices FROM set1_devices;

    WHILE DATEDIFF(iterDateTime, currentDateTime) < periodInDays DO
    BEGIN
        DECLARE device_iter INT DEFAULT 1;

        WHILE device_iter < numDevices + 1 DO
            INSERT INTO set1_dev_slot (device,dev_date,dev_time) VALUES (device_iter, DATE(iterDateTime), TIME(iterDateTime));
            SET device_iter = device_iter + 1;
        END WHILE;

        SET iterDateTime = DATE_ADD(iterDateTime, INTERVAL 1 HOUR);
        IF TIME(iterDateTime) = "02:00:00" THEN
            SET iterDateTime = DATE_ADD(iterDateTime, INTERVAL 14 HOUR);
        END IF;
    END;
    END WHILE;

    BEGIN
        DECLARE device_iter INT DEFAULT 1;

        WHILE device_iter < numDevices + 1 DO
            INSERT INTO set1_dev_slot (device,dev_date,dev_time) VALUES (device_iter, DATE(iterDateTime), TIME(iterDateTime));
            SET device_iter = device_iter + 1;
        END WHILE;

        SET iterDateTime = DATE_ADD(iterDateTime, INTERVAL 1 HOUR);
        SET device_iter = 1;

        WHILE device_iter < numDevices + 1 DO
            INSERT INTO set1_dev_slot (device,dev_date,dev_time) VALUES (device_iter, DATE(iterDateTime), TIME(iterDateTime));
            SET device_iter = device_iter + 1;
        END WHILE;
    END;

END;//
delimiter ; 
```

所以我的问题是我希望将其更改为添加到我想要和/或稍后添加的表（集）。所以我尝试了这个，但它提出了一个问题，mysql在那里没有太大帮助。

```
delimiter //
CREATE PROCEDURE populateSlots (IN currentDateTime DATETIME, IN periodInDays INT, IN arena VARCHAR(32))
BEGIN
DECLARE iterDateTime DATETIME DEFAULT currentDateTime;
DECLARE numDevices INT DEFAULT 5;

WHILE DATEDIFF(iterDateTime, currentDateTime) < periodInDays DO
BEGIN
    DECLARE device_iter INT DEFAULT 1;

    WHILE device_iter < numDevices + 1 DO
        SET @sql_text = concat('INSERT INTO ', arena, ' (device,dev_date,dev_time) VALUES (',device_iter,', DATE("',iterDateTime,'"), TIME("',iterDateTime,'");');
        PREPARE stmt FROM @sql_text;
        EXECUTE stmt;
        DEALLOCATE PREPARE stmt;
        SET device_iter = device_iter + 1;
    END WHILE;

    SET iterDateTime = DATE_ADD(iterDateTime, INTERVAL 1 HOUR);
    IF TIME(iterDateTime) = "02:00:00" THEN
        SET iterDateTime = DATE_ADD(iterDateTime, INTERVAL 14 HOUR);
    END IF;
END;
END WHILE;

BEGIN
    DECLARE device_iter INT DEFAULT 1;

    WHILE device_iter < numDevices + 1 DO
        SET @sql_text = concat('INSERT INTO ', arena, ' (device,dev_date,dev_time) VALUES (',device_iter,', DATE("',iterDateTime,'"), TIME("',iterDateTime,'");');
        PREPARE stmt FROM @sql_text;
        EXECUTE stmt;
        DEALLOCATE PREPARE stmt;
        SET device_iter = device_iter + 1;
    END WHILE;

    SET iterDateTime = DATE_ADD(iterDateTime, INTERVAL 1 HOUR);
    SET field_iter = 1;

    WHILE device_iter < numDevices + 1 DO
        SET @sql_text = concat('INSERT INTO ', arena, ' (device,dev_date,dev_time) VALUES (',device_iter,', DATE("',iterDateTime,'"), TIME("',iterDateTime,'");');
        PREPARE stmt FROM @sql_text;
        EXECUTE stmt;
        DEALLOCATE PREPARE stmt;
        SET device_iter = device_iter + 1;
    END WHILE;
END;

END;//
delimiter ; 
```

`arena`是我作为参数（即等）传递的表的名称`set1_dev_slot`，`set2_dev_slot`我`"`在`@sql_text`. 在小时部分附近出现一个错误，并且在没有任何地方`date()`的情况下表示附近的错误`''``''`

顺便说一句，我会很感激任何评论，因为这是我第一次在 mysql 中做更多的事情，而不仅仅是创建表和检索行，我将第一个承认我受到更传统的编程思维（C C++ 等）的极大影响

# sockets - “Monad-friendly”基于事件的 IO

> ID：10364549
> 
> 赞同：12
> 
> 时间：2012-04-28T14:45:00.440
> 
> 标签：sockets, events, haskell, concurrency

`epoll`我想使用“ ”风格的事件管理来实现高效的单线程套接字通信。

如果我要“从头开始”编写一个非常命令式的程序，我基本上会这样做（只是我刚刚输入的一些伪代码 - 可能无法编译）：

```
import Control.Concurrent

import Data.ByteString (ByteString)
import qualified Data.ByteString as ByteString

import qualified GHC.Event as Event

import Network
import Network.Socket
import Network.Socket.ByteString

main = withSocketFromSomewhere $ \ socket -> do
  let fd = fromIntegral . fdSocket $ socket

  -- Some app logic
  state <- newMVar "Bla"

  -- Event manager
  manager <- Event.new

  -- Do an initial write
  initialWrite socket state manager

  -- Manager does its thing
  Event.loop manager

write manager socket bs =
  -- Should be pretty straight-forward
  Event.registerFd manager theWrite fd Event.evtWrite
  where
    fd = fromIntegral . fdSocket $ socket
    theWrite key _ = do
      Event.unregisterFd manager key
      sendAll socket bs

read manager socket cont =
  -- Ditto
  Event.registerFd manager theRead fd Event.evtRead
  where
    fd = fromIntegral . fdSocket $ socket
    theRead key _ = do
      Event.unregisterFd manager key
      bs <- recv socket 4096
      cont bs

initialWrite socket state manager = do
  msg <- readMVar state
  write manager socket msg
  read manager socket $ \ bs -> do
    ByteString.putStrLn bs
    putMVar state msg 
```

想象一下，还有一些函数可以向管理器添加超时事件，等等。

但是，这段代码并不是特别好，原因如下：

1.  我手动携带事件管理器。
2.  我必须`MVar`为我的应用程序逻辑使用一个，因为我不能告诉不透明的事件管理器它应该为我传递一些状态，即使我知道它只使用一个线程，因此可能被用作基础一个单子变压器堆栈。
3.  我必须为读取创建明确的分隔延续（我什至可能必须为写入执行此操作；我不知道在这种情况下什么会更明智）。

现在，这只是为使用过多的单子变压器等而尖叫。我希望能够做到这一点：

```
main =
  withSocketFromSomewhere $ \ socket ->
  runEvents . flip runStateT "Bla" $ initialWrite socket

initialWrite socket = do
  msg <- lift get
  write socket msg
  resp <- read socket
  liftIO $ ByteString.putStrLn resp
  lift $ put msg 
```

此代码应具有与上述代码相同的行为；例如，通过暂停计算直到`resp <- read socket`在线接收到读取，并让我在同一个线程/管理器上管理多个套接字。

问题：

1.  GHC 事件 API/libevent/equivalent 是否有更高级的接口，可以为用户提供更多功能？考虑最近 GHC 中发生的同步 IO 调度更改是否值得（我在 7.4.1 上）？
2.  如果我想实现协作并发，例如拥有一个始终处理来自套接字的读取的函数，但让该函数与写入“线程”共享相同的状态单子，该怎么办？这可以用（1）中的任何解决方案来完成吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-28T17:07:00.077

我强烈建议您阅读[基于语言的统一事件和线程的方法](http://www.cis.upenn.edu/~stevez/papers/LZ06b.pdf)。它讨论了如何在您选择的 IO 子系统之上构建您想要的任何并发系统，并且在他们的论文中，他们实际上在`epoll`.

不幸的是，论文中的数据类型和代码示例非常糟糕，并且花了一些时间（至少对我来说）对他们的代码进行逆向工程，他们的论文中甚至存在一些错误。然而，他们的方法实际上是一种非常强大且通用的方法的子集，称为“自由单子”。

例如，它们的`Trace`数据类型只是变相的自由单子。要了解原因，让我们参考一下 Free monad 的 Haskell 定义：

```
data Free f r = Pure r | Free (f (Free f r)) 
```

一个自由的 monad 就像一个“函子列表”，`Pure`它类似于一个列表的`Nil`构造函数，`Free`也类似于一个列表的 `Cons`构造函数，因为它在“列表”上添加了一个额外的函子。从技术上讲，如果我是迂腐的，没有什么说必须将自由 monad 实现为上述类似列表的数据类型，但无论您实现什么都必须与上述数据类型同构。

免费 monad 的好处在于，给定一个 functor `f`，`Free f`它自动成为一个 monad：

```
instance (Functor f) => Monad (Free f) where
    return = Pure
    Pure r >>= f = f r
    Free x >>= f = Free (fmap (>>= f) x) 
```

这意味着我们可以将它们的`Trace`数据类型分解为两部分，基本函子`f`，然后是由 生成的自由 monad `f`：

```
-- The base functor
data TraceF x =
    SYS_NBIO (IO x)
  | SYS_FORK x x
  | SYS_YIELD x
  | SYS_RET
  | SYS_EPOLL_WAIT FD EPOLL_EVENT x

-- You can even skip this definition if you use the GHC
-- "DerivingFunctor" extension
instance Functor TraceF where
    fmap f (SYS_NBIO x) = SYS_NBIO (liftM f x)
    fmap f (SYS_FORK x) = SYS_FORK (f x) (f x)
    fmap f (SYS_YIELD x) = SYS_YIELD (f x)
    fmap f SYS_RET = SYS_RET
    fmap f (SYS_EPOLL_WAIT FD EPOLL_EVENT x) = SYS_EPOLL_WAIT FD EPOLL_EVEN (f x) 
```

鉴于该函子，您可以`Trace`“免费”获得 monad：

```
type Trace a = Free TraceF a
-- or: type Trace = Free TraceF 
```

...虽然这不是它被称为“免费”单子的原因。

然后更容易定义它们的所有功能：

```
liftF = Free . fmap Pure
-- if "Free f" is like a list of "f", then
-- this is sort of like: "liftF x = [x]"
-- it's just a convenience function

-- their definitions are written in continuation-passing style,
-- presumably for efficiency, but they are equivalent to these
sys_nbio io = liftF (SYS_NBIO io)
sys_fork t = SYS_FORK t (return ()) -- intentionally didn't use liftF
sys_yield = liftF (SYS_YIELD ())
sys_ret = liftF SYS_RET
sys_epoll_wait fd event = liftF (SYS_EPOLL_WAIT fd event ()) 
```

因此，您可以像使用 monad 一样使用这些命令：

```
myTrace fd event = do
    sys_nbio (putStrLn "Hello, world")
    fork $ do
        sys_nbio (putStrLn "Hey")
    sys_expoll_wait fd event 
```

现在，这是关键概念。我刚刚写的那个 monad 只创建了一个数据类型。而已。它根本不解释它。这就像为表达式编写抽象语法树一样。如何评估它完全取决于您。在论文中，他们给出了表达式解释器的具体示例，但编写自己的解释器很简单。

重要的概念是这个解释器可以在你想要的任何 monad 中运行。因此，如果您想通过并发处理某些状态，您可以这样做。例如，这是一个玩具解释器，它使用 StateT IO monad 来跟踪调用 IO 操作的次数：

```
interpret t = case t of
    SYS_NBIO io -> do
        modify (+1)
        t' <- lift io
        interpret t'
    ... 
```

你甚至可以在 forkIO 的动作中线程化 monad！这是我的一些非常古老的代码，它是错误的和蹩脚的，因为它是在我没有经验并且不知道什么是自由单子的时候写回来的，但它证明了这一点：

```
module Thread (Thread(..), done, lift, branch, fork, run) where

import Control.Concurrent
import Control.Concurrent.STM
import Control.Monad.Cont
import Data.Sequence
import qualified Data.Foldable as F

data Thread f m =
    Done
  | Lift (m (Thread f m))
  | LiftIO (IO (Thread f m))
  | Branch (f (Thread f m))
  | Exit

done = cont $ \c -> Done
lift' x = cont $ \c -> Lift $ liftM c x
liftIO' x = cont $ \c -> LiftIO $ liftM c x
branch x = cont $ \c -> Branch $ fmap c x
exit = cont $ \c -> Exit

fork x = join $ branch [return (), x >> done]

run x = do
    q <- liftIO $ newTChanIO
    enqueue q $ runCont x $ \_ -> Done
    loop q
  where
    loop q = do
        t <- liftIO $ atomically $ readTChan q
        case t of
            Exit -> return ()
            Done -> loop q
            Branch ft -> mapM_ (enqueue q) ft >> loop q
            Lift mt -> (mt >>= enqueue q) >> loop q
            LiftIO it -> (liftIO $ forkIO $ it >>= enqueue q) >> loop q
    enqueue q = liftIO . atomically . writeTChan q 
```

自由单子背后的要点是它们提供单子实例而不是其他任何东西。换句话说，它们退后一步，让你完全自由地解释它们，这就是它们如此有用的原因。

# scala - 有没有办法在 Scala 中的子类初始化之后调用一些代码？

> ID：10364550
> 
> 赞同：1
> 
> 时间：2012-04-28T14:45:07.790
> 
> 标签：scala

在子类已经完成所有初始化之后，我需要执行一些代码，例如：

```
abstract class A(a:String) {
  var sum = 0
  def add(n:Int) = { sum += n; sum }
  def verify = if (sum > 10) () else throw new Exception
  ... initialize subclass ...
  verify
}
class B extends A("In A") { 
  val smth = add(50)
  // I want to avoid calling `verify` here
}
val b = new B
println(b.smth) // 50 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T16:27:17.877

您需要在 B 中使用惰性 val，或使用“早期初始化程序”，以便 B 中的 val 在 A 中的 val 之前初始化。以下是对这两个选项如何工作的精彩描述：[https://github。 com/paulp/scala-faq/wiki/Initialization-Order](https://github.com/paulp/scala-faq/wiki/Initialization-Order)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T06:32:29.857

所以我似乎找到了答案。我决定采用 DelayedInit trait 方法——我只是执行延迟代码（并计算它被执行的次数），然后当我认为我已经看到足够的初始化时执行所需的代码（扩展中的每个类一个等级制度）。我把它包装成一个特征：

```
trait AfterInit extends DelayedInit {
  def afterInit
  private var initCount = 0
  private def getInitNumber(clazz: Class[_]):Int =
    if (clazz.getSuperclass == classOf[java.lang.Object]) 0 else getInitNumber(clazz.getSuperclass) + 1
  final def delayedInit(x: => Unit) {
    x
    initCount += 1
    if (getInitNumber(this.getClass) + 1 == initCount) afterInit
  }
} 
```

用法：

```
abstract class A(id:String) extends AfterInit {
  var sum = 0
  def add(n:Int) = { sum += n; sum }
  def afterInit = if (sum > 10) () else throw new Exception
}

class B extends A("B") {
  val add1 = add(50)
}
new B // no exception

class C extends A("C") {
  val add2 = add(5)
}
new C // exception is thrown, since the `sum` was too small 
```

# jsf - JSF从另一个页面导出excel数据

> ID：10364552
> 
> 赞同：1
> 
> 时间：2012-04-28T14:45:19.020
> 
> 标签：jsf, jsf-2, primefaces

我是 jsf 的新手，我正在设置一个基本的报告工具（sql 查询），它在主页中显示报告列表。我想在主页中放置一个 excel 导出命令按钮并导出用户选择的报告或将用户驱动到不同的执行页面以在所选报告的数据表中显示结果。我怎样才能做到这一点？当然，带有查询结果的数据表仅在执行页面中可见，并且是在查询执行期间动态创建的（这部分工作正常）。我会无缘无故发疯吗？提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T10:43:51.627

如果要将数据导出到 Excel，则需要使用第三方库。有[JExcelApi](http://jexcelapi.sourceforge.net/)和[Apache POI](http://poi.apache.org/)等免费的。此外，还有像[Aspose](http://www.aspose.com/java/total-component.aspx)这样的商业库。如果您要选择开源库，请检查以下问题：[选择 excel java api](https://stackoverflow.com/q/1128318/1065197)。

将数据导出到 Excel 时，您必须创建 Excel 文件并为客户端下载内容。您可以通过@BalusC（JSF 专家）检查如何[使用 JSF 下载文件。](https://stackoverflow.com/q/3428039/1065197)

还有一个建议，当您下载文件时，不要将 ajax 功能添加到命令链接/按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-05T11:51:01.740

您可以在代码下使用此代码块以一般方式提供 excel 导出。您可以发送任何列表并发送任何文件名

公共类 ExcelUtils {

```
public static <T> void writeToExcel(String fileName, List<T> data) {

    FacesContext context = FacesContext.getCurrentInstance();

    HttpServletResponse response = (HttpServletResponse) context.getExternalContext().getResponse();

    response.setContentType("application/vnd.ms-excel");
    response.setHeader("Content-Disposition", "attachment;filename=" + fileName + ".xls");
    response.setHeader("Pragma", "no-cache");

    OutputStream fos = null;
    try {
        fos = response.getOutputStream();
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    XSSFWorkbook workbook = null;
    try {
        // File file = new File(fileName);
        workbook = new XSSFWorkbook();
        Sheet sheet = workbook.createSheet();
        List<String> fieldNames = getFieldNamesForClass(data.get(0).getClass());
        int rowCount = 0;
        int columnCount = 0;
        Row row = sheet.createRow(rowCount++);
        for (String fieldName : fieldNames) {
            if (!fieldName.equals("serialVersionUID")) {
                Cell cell = row.createCell(columnCount++);
                cell.setCellValue(fieldName);
            }
        }
        Class<? extends Object> classz = data.get(0).getClass();
        for (T t : data) {
            row = sheet.createRow(rowCount++);
            columnCount = 0;
            for (String fieldName : fieldNames) {
                if (!fieldName.equals("serialVersionUID")) {
                    Cell cell = row.createCell(columnCount);
                    Method method = null;
                    try {
                        method = classz.getMethod("get" + capitalize(fieldName));
                    } catch (NoSuchMethodException nme) {
                        method = classz.getMethod("get" + fieldName);
                    }

                    Object value = method.invoke(t, (Object[]) null);
                    if (value != null) {
                        if (value instanceof String) {
                            cell.setCellValue((String) value);
                        } else if (value instanceof Long) {
                            cell.setCellValue((Long) value);
                        } else if (value instanceof Integer) {
                            cell.setCellValue((Integer) value);
                        } else if (value instanceof Double) {
                            cell.setCellValue((Double) value);
                        }
                    }
                    columnCount++;
                }
            }
        }
        workbook.write(fos);
        fos.flush();
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        try {
            if (fos != null) {
                fos.close();
                context.responseComplete();
                context.renderResponse();
            }
        } catch (IOException e) {
        }
        try {
            if (workbook != null) {
                workbook.close();
            }
        } catch (IOException e) {
        }
    }
}

// retrieve field names from a POJO class
private static List<String> getFieldNamesForClass(Class<?> clazz) throws Exception {
    List<String> fieldNames = new ArrayList<String>();
    Field[] fields = clazz.getDeclaredFields();
    for (int i = 0; i < fields.length; i++) {
        fieldNames.add(fields[i].getName());
    }
    return fieldNames;
}

// capitalize the first letter of the field name for retriving value of the
// field later
private static String capitalize(String s) {
    if (s.length() == 0)
        return s;
    return s.substring(0, 1).toUpperCase() + s.substring(1);
} 
```

}

# git - Git：处理合并冲突的策略？

> ID：10364554
> 
> 赞同：0
> 
> 时间：2012-04-28T14:45:38.253
> 
> 标签：git, version-control, merge, git-merge, git-pull

我使用 Bitbucket 上的私有存储库作为在我工作的几台机器上同步项目（C 源代码）的便捷方式；我是唯一从事该项目的开发人员。

在远程机器上工作（我 ssh 到它）并尝试`git pull`我收到以下错误消息：

“你正处于冲突合并的中间。”

它退出而不进行快进合并。

我该如何解决这个问题？如何在这台机器上强制合并？

我不反对尝试重置到较早的状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T16:00:24.323

显然，您正处于先前的合并尝试中，该尝试存在一些冲突。你的第一步是了解发生了什么以及你在哪里。做

```
git status 
```

这将向您显示哪些文件存在冲突。一旦您了解发生了什么，您就可以决定解决冲突（请参阅@rcdmk 提供的链接）。相反，如果您决定只想放弃先前的合并，那么您可以这样做：

```
git merge --abort 
```

但是你要非常小心，因为东西会消失。如果遥控器有你想要的一切，你会没事的；所以跟进：

```
git pull 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T15:09:58.617

当您遇到合并冲突时，有很多选择可以遵循，但您可以查阅有关此主题的 Git 手册寻求帮助。此外，这里还提出了一个类似的问题： [如何解决 Git 中的合并冲突？](https://stackoverflow.com/questions/161813/how-do-i-fix-merge-conflicts-in-git)

# java - 找不到由 maven nar 插件创建的依赖项

> ID：10364556
> 
> 赞同：0
> 
> 时间：2012-04-28T14:45:45.743
> 
> 标签：java, maven, maven-nar-plugin

我用 java 代码（本机方法）和 C 代码创建了一个 jni 项目。

maven nar 插件会生成一个仅包含 java 代码的 jar 文件和一个包含正确本机代码的 nar 文件。

但是，当我想从另一个项目中引用这个项目/模块时，我收到一个错误，即找不到依赖项。在检查我的本地存储库后，我注意到我只有 java 代码和本机代码的 nar 文件。如何引用此依赖项，它会自动包含本机代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:07:33.220

您应该[使用](http://duns.github.com/maven-nar-plugin/narDependencies.html).`<type>nar</type>`

# c# - 使用 c# 与 javascript 对话，反之亦然

> ID：10364559
> 
> 赞同：0
> 
> 时间：2012-04-28T14:46:59.830
> 
> 标签：c#, javascript, tcp, websocket

我正在创建一个需要访问客户端文件的网站。我知道客户必须接受一些警告信息并运行我的程序。

我已经在互联网上进行了研究，我知道我可以使用 Web Sockets 来完成这个。我已经能够从 c# 和 google chrom html 5 websocket 建立本地 tcp 连接。websockets 的问题在于它不适用于其他浏览器。

我正在考虑的另一个解决方案是使用 cookie 来交换消息。我没有尝试过，我认为这不会有效。

一些网站在授予他们特权时能够使用 java。我不知道他们如何交换消息，但也许有类似的方法可以用 c#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T16:02:19.640

看看 SignalR—— [https://github.com/SignalR/SignalR](https://github.com/SignalR/SignalR)。不过要小心，Web 套接字（以及任何其他“每个用户”类型的连接都会影响服务器资源——请参阅[http://robrich.org/archive/2012/04/05/The-real-time-web-in-ASP -NET-MVC.aspx](http://robrich.org/archive/2012/04/05/The-real-time-web-in-ASP-NET-MVC.aspx)

# r - 将多个参数传递给 R 中的匿名函数

> ID：10364560
> 
> 赞同：1
> 
> 时间：2012-04-28T14:47:00.037
> 
> 标签：r, function, anonymous

为什么这不起作用？还是只是 R 的工作方式？

谢谢JJ

```
 a <- c(1,2,3)
    b <- 5
    lapply(a, function(x) print(x))  # works

    lapply(a, function(x,b) print(b)) # doesn't work.

    I get --
     Error in FUN(c(1, 2, 3)[[1L]], ...) : 
       argument "b" is missing, with no default 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T15:04:33.850

`lapply`只传递一个参数，因为它的设计目的是让一个参数变化。如果您只想传递额外的参数，请将它们作为附加选项`lapply`：

```
lapply(a, function(x,y) print(y), y=b)
[1] 5
[1] 5
[1] 5
[[1]]
[1] 5

[[2]]
[1] 5

[[3]]
[1] 5 
```

从`lapply`帮助文件：

> ... FUN 的可选参数。

如果您希望将多个不同的参数传递给您的函数，请查看`mapply`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T14:52:39.293

您可以尝试将 a 和 b 放在一个列表中，如下所示：

```
lapply(list(a, b), function(x) print(b)) 
```

或指定一个参数以将 b 传递给，如下所示：

```
lapply(a, function(x, y=b) print(y)) 
```

但我不确定你在追求什么。

# c# - 如何在我的代码中修复这个“桨跳”故障？

> ID：10364565
> 
> 赞同：0
> 
> 时间：2012-04-28T14:47:38.877
> 
> 标签：c#, xna-4.0

[http://pastebin.com/YTiNw7rX](http://pastebin.com/YTiNw7rX)

如果您测试代码，将桨一直推到屏幕顶部，然后放开，桨会向下跳几个像素。而且我似乎无法弄清楚如何解决这个问题。我想它与纹理有关。

编辑：谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:52:37.193

这就是发生的事情：

1.  你拿着钥匙。

2.  这些功能检查和/或调整电流`Y`。

3.  `Y`该功能根据您的按键更新电流。

4.  电流`Y`显示在屏幕上。

5.  你放开钥匙。

6.  这些功能检查和/或调整电流`Y`。

7.  更正`Y`后显示在屏幕上，导致从上一个跳转`Y`。

因此，您需要在检查`Y` **之前**而不是之后更新您的电流。

```
protected override void Update(GameTime gameTime)
{
    // Allow the game to exit.
    if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
        this.Exit();

    // Update the paddles according to the keyboard.
    if (Keyboard.GetState().IsKeyDown(Keys.Up))
        PongPaddle1.Y -= paddleSpeed;

    if (Keyboard.GetState().IsKeyDown(Keys.Down))
        PongPaddle1.Y += paddleSpeed;

    // Update the paddles according to the safe bounds.
    var safeTop = safeBounds.Top - 30;
    var safeBottom = safeBounds.Bottom - 70;

    PongPaddle1.Y = MathHelper.Clamp(PongPaddle1.Y, safeTop, safeBottom);
    PongPaddle2.Y = MathHelper.Clamp(PongPaddle2.Y, safeTop, safeBottom);

    // Allow the base to update.
    base.Update(gameTime);
} 
```

# facebook - Facebook 应用程序和 heruku 云

> ID：10364566
> 
> 赞同：0
> 
> 时间：2012-04-28T14:47:47.460
> 
> 标签：facebook, heroku, cloud, vps

为 facebook 应用程序使用免费云 - heroku（5mb 限制）或使用自己的 VPS 是否明智？

我打算建立一个 FB 应用程序并尝试选择托管？

你有什么建议？

Heroku 云平台对于开发来说是否复杂？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T05:56:55.047

我不批评 Heroku 云或任何其他免费服务，但我坚信只使用付费服务。免费服务从来都不是免费的，总有一个附加条件...

我建议您使用付费 VPS 或云解决方案。

# c# - 上传批量图片时出现连接超时错误

> ID：10364568
> 
> 赞同：0
> 
> 时间：2012-04-28T14:48:03.543
> 
> 标签：c#, asp.net

我必须在服务器上一次上传 1000 到 1500 张图片。代码如下。

```
public void add_data()
{
 DataSet ds = new DataSet();
                ds = get_Data();
                int p = 0;
                if (ds.Tables.Count > 0)
                {
                    if (ds.Tables[0].Rows.Count > 0)
                    {
                        int cnt = ds.Tables[0].Rows.Count;
                        while (cnt > 0)
                        {

                            string url = Convert.ToString(ds.Tables[0].Rows[p]["image_name"]);
                            string imagename = url.Substring(url.LastIndexOf('/') + 1);
                            string file_name = imagename;

                            save_file_from_url(file_name, url);
                            p++;
                            cnt = cnt - 1;
                        }
                    }
                }
}

public void save_file_from_url(string file_name, string url)
    {
        if (!File.Exists(file_name))
        {

            try
            {
                byte[] imgcontent;
                //Convert live images into byte array to pass it for ftp server
                HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
                WebResponse response = request.GetResponse();

                Stream stream = response.GetResponseStream();

                using (BinaryReader br = new BinaryReader(stream))
                {
                    imgcontent = br.ReadBytes(500000);
                    br.Close();
                }
                response.Close();

                string CompleteDPath = "www.xyz.com";
                string UName = "abc";
                string PWD = "pwd";
                WebRequest reqObj = WebRequest.Create(CompleteDPath + file_name);
                reqObj.Method = WebRequestMethods.Ftp.UploadFile;
                reqObj.Credentials = new NetworkCredential(UName, PWD);
                reqObj.GetRequestStream().Write(imgcontent, 0, imgcontent.Length);
                reqObj = null;

            }
            catch (Exception ex)
            {
                lblmessage.ForeColor = System.Drawing.Color.Red;
                lblmessage.Text = ex.Message;
            }
        }
    } 
```

但它给出了以下错误

遇到以下错误：

```
Read Timeout 
```

系统返回：

```
[No Error] 
```

等待从网络读取数据时发生超时。网络或服务器可能已关闭或拥塞。请重试您的请求。

您的缓存管理员是网站管理员。

我应该用什么？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T23:26:00.893

上传一张图片后请关闭网络/数据库连接。读取超时是因为连接打开的时间过长并且超时。

或者您可以使用逗号进行查询，例如 [使用一条语句插入多行](http://social.msdn.microsoft.com/Forums/sqlserver/en-US/4d151375-8377-4ac9-8568-cb255f21fd93/insert-multiple-rows-with-a-single-insert-statement)

# bash - bash 'while read line' 效率与大文件

> ID：10364570
> 
> 赞同：5
> 
> 时间：2012-04-28T14:48:20.140
> 
> 标签：bash, performance

我正在使用while循环来处理任务，

它从一个大约 1000 万行的大文件中读取记录。

我发现随着时间的推移处理变得越来越慢。

我制作了一个 100 万行的模拟脚本作为打击，这揭示了问题。

但我仍然不知道为什么，该`read`命令是如何工作的？

```
seq 1000000 > seq.dat
while read s;
do
    if [ `expr $s % 50000` -eq 0 ];then
        echo -n $( expr `date +%s` - $A) ' ';
        A=`date +%s`;
    fi
done < seq.dat 
```

终端输出时间间隔：

98 98 98 98 98 97 98 97 98 101 106 112 121 121 127 132 135 134

在大约 50,000 行时，处理速度明显变慢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T16:08:03.207

使用您的代码，我看到了相同的时间增加模式（从一开始！）。如果您想要更快的处理，您应该使用 shell 内部功能重写。这是我的 bash 版本：

```
tabChar="   "  # put a real tab char here, of course
seq 1000000 > seq.dat
while read s;
do
    if (( ! ( s % 50000 ) )) ;then
        echo $s "${tabChar}" $( expr `date +%s` - $A) 
        A=$(date +%s);
    fi
done < seq.dat 
```

**编辑** 修复错误，输出指示正在处理每一行，现在只有每 50000 行得到定时处理。哇！

曾是

```
 if ((  s % 50000 )) ;then 
```

固定在

```
 if (( ! ( s % 50000 ) )) ;then 
```

**现在输出`echo ${.sh.version} =`版本 JM 93t+ 2010-05-24**

```
50000
100000   1
150000   0
200000   1
250000   0
300000   1
350000   0
400000   1
450000   0
500000   1
550000   0
600000   1
650000   0
700000   1
750000   0 
```

**输出 bash**

```
50000    480
100000   3
150000   2
200000   3
250000   3
300000   2
350000   3
400000   3
450000   2
500000   2
550000   3
600000   2
650000   2
700000   3
750000   3
800000   2
850000   2
900000   3
950000   2
800000   1
850000   0
900000   1
950000   0
1e+06    1 
```

至于为什么您的原始测试用例需要这么长时间......不确定。我很惊讶地看到每个测试周期的时间和时间的增加。如果您真的需要了解这一点，您可能需要花时间检测更多的测试内容。也许您会看到正在运行的东西`truss`或`strace`（取决于您的基本操作系统）。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-28T15:40:33.017

[正如“Learning the Korn Shell”的作者所指出](http://docstore.mik.ua/orelly/unix/ksh/ch07_02.htm#KSH-CH-7-SECT-2.2)的，阅读是一个相对缓慢的过程。（就在第 7.2.2.1 节之上。）还有其他程序，例如`awk`或`sed`已经高度优化以执行基本相同的操作：一次从文件中读取一行并使用该输入执行一些操作。

更不用说，每次进行减法或取模时都会调用外部进程，这可能会变得很昂贵。 `awk`内置了这两个功能。

正如以下测试指出的那样，`awk`速度要快得多：

```
#!/usr/bin/env bash

seq 1000000 | 
awk '
  BEGIN {
    command = "date +%s"
    prevTime = 0
  }
  $1 % 50000 == 0 {
    command | getline currentTime
    close(command)

    print currentTime - prevTime
    prevTime = currentTime
  }
' 
```

输出：

```
1335629268
0   
0   
0   
0   
0   
0   
0   
0   
0   
0   
0   
0   
0   
0   
1   
0   
0   
0   
0 
```

请注意，第一个数字等价于`date +%s`。就像在您的测试用例中一样，我让第一个匹配项成为。

***笔记***

*是的，作者谈论的是 Korn Shell，而不是 OP 标记的 bash，但是 bash 和 ksh 在很多方面都非常相似。ksh 实际上是 bash 的超集。所以我会假设读取命令在一个 shell 和另一个 shell 之间没有太大的不同。

# ios - 使用 Facebook 中的照片签到

> ID：10364574
> 
> 赞同：0
> 
> 时间：2012-04-28T14:48:36.617
> 
> 标签：ios, facebook, facebook-graph-api

我想知道是否有任何方法可以在 Facebook 中使用照片签到。从文档中，facebook 只提供参数的坐标、地点、消息和标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T00:59:38.227

发布到 USER_ID/checkins 时添加“图片”参数。“图片”参数保存图片的 URL，例如“http://www.mywebsite.com/mypic.jpg”。它仅适用于网址。

# matlab - Matlab中可变范围[x，y]的归一化

> ID：10364575
> 
> 赞同：21
> 
> 时间：2012-04-28T14:48:38.960
> 
> 标签：matlab, normalization

我想创建基本的 matlab 程序，在给定范围内规范化给定的整数数组。

*   输入是一个数组 [ a1 , a2 , a3 , a4 , a5 , a6 , a7...] 和范围 [ x , y ]
*   输出是标准化数组。

但在任何地方，我都看到 [0,1] 或 [-1,1] 范围内的标准化。找不到变量范围标准化。如果您编写 matlab 代码或变量范围公式，我将不胜感激。

谢谢你的想法。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-04-28T14:53:02.047

如果你想规范化到`[x, y]`，首先规范化到`[0, 1]`通过：

```
 range = max(a) - min(a);
 a = (a - min(a)) / range; 
```

然后通过以下方式缩放`[x,y]`：

```
 range2 = y - x;
 a = (a * range2) + x; 
```

把它们放在一起：

```
 function normalized = normalize_var(array, x, y)

     % Normalize to [0, 1]:
     m = min(array);
     range = max(array) - m;
     array = (array - m) / range;

     % Then scale to [x,y]:
     range2 = y - x;
     normalized = (array*range2) + x; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-16T18:57:09.237

从 R2017b 开始，MATLAB 有这个命名[`rescale`](https://www.mathworks.com/help/matlab/ref/rescale.html)的函数正是这样做的。
即，如果你想重新调整`array`到间隔，`[x, y]`那么：

```
normalized_array = rescale(array, x, y); 
```

如果`x`和`y`未指定，则`array`归一化为区间`[0,1]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-28T12:49:55.290

MATLAB 具有特殊的归一化功能，包括在人工神经网络工具箱中，用于对输入值进行归一化。

**地图最小最大**

mapminmax 通过将每行的最小值和最大值标准化为 [YMIN, YMAX] 来处理矩阵。

**地图标准**

mapstd 通过将每行的均值和标准差转换为 ymean 和 ystd 来处理矩阵。

[更多信息](https://www.mathworks.com/help/nnet/ref/mapminmax.html)

# c# - 重构只有一个函数调用不同的代码块

> ID：10364576
> 
> 赞同：2
> 
> 时间：2012-04-28T14:48:45.200
> 
> 标签：c#, code-reuse

我有类似的公式来计算哈特利变换。唯一的区别是以下代码行中的输入函数 - sin、cos、exp：

```
Math.Exp((double)tau)
Math.Sin((double)tau)
Math.Cos((double)tau) 
```

如何转义几乎相同的代码片段并缩短后续片段中的代码？

```
 private void CountHartley(ref double [] arr, string function)
        {
            int N = arr.Length;
            if (function == "exp")
            {
                for (int nu = 0, tau = 0; ((nu < N) && (tau < N)); nu++, tau++)
                {
                    arr[nu] = 1 / (double)N *
                                 Math.Exp((double)tau) *
                                 (Math.Sin(2 * Math.PI * nu * tau / (double) N) +
                                 Math.Cos(2 * Math.PI * nu * tau / (double) N));
                }
            }
            else if (function == "sin")
            {
                for (int nu = 0, tau = 0; ((nu < N) && (tau < N)); nu++, tau++)
                {
                    arr[nu] = 1 / (double)N *
                                 Math.Sin((double)tau) *
                                 (Math.Sin(2 * Math.PI * nu * tau / (double)N) +
                                 Math.Cos(2 * Math.PI * nu * tau / (double)N));
                }
            }
            else
            {
                for (int nu = 0, tau = 0; ((nu < N) && (tau < N)); nu++, tau++)
                {
                    arr[nu] = 1 / (double)N *
                                 Math.Cos((double)tau) *
                                 (Math.Sin(2 * Math.PI * nu * tau / (double)N) +
                                 Math.Cos(2 * Math.PI * nu * tau / (double)N));
                }
            }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T14:52:40.887

您可以直接传入函数，而不是传入`string`要使用的函数。

您可以为此使用[Func<T, TResult> 委托](http://msdn.microsoft.com/en-us/library/bb549151.aspx)，如下所示：

```
private void CountHartley(ref double [] arr, Func<double, double> function)
{
    int N = arr.Length;
    for (int nu = 0, tau = 0; ((nu < N) && (tau < N)); nu++, tau++)
    {
        arr[nu] = 1 / (double)N *
                     function((double)tau) *
                     (Math.Sin(2 * Math.PI * nu * tau / (double) N) +
                     Math.Cos(2 * Math.PI * nu * tau / (double) N));
    }
} 
```

*用法：*

```
var result = CountHartley(arr, Math.Cos); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T14:54:17.407

将 Math.* 作为参数传递给`Func<double, double> function`参数怎么样？

# facebook - 每个 Facebook 应用程序限制为 500 个测试用户 - 我应该存根 Facebook API 以自动负载测试我的应用程序吗？

> ID：10364579
> 
> 赞同：1
> 
> 时间：2012-04-28T14:48:48.970
> 
> 标签：facebook, facebook-graph-api, automated-tests

我正在编写一个自动化测试脚本来创建测试用户并将他们作为朋友相互连接以加载我的应用程序的测试和配置文件部分。

测试用户文档规定每个应用程序最多 500 个测试用户。 [https://developers.facebook.com/docs/test_users/](https://developers.facebook.com/docs/test_users/)

> 一个应用最多可以创建 500 个测试用户来开始测试一个应用。如果您超过可以为应用创建的测试用户的限制，您将收到错误消息。

其他任何人都需要突破这个限制，您是如何在超过 500 人的用户社区中实现测试的？我想对拥有 2000 到 3000 个 Facebook 好友的用户进行测试。是的，这样的角色在现实世界中是存在的 :) 注意：根据下面的评论，找到拥有如此多朋友联系的用户是非常不寻常的。请参阅评论以获取统计信息的链接。

我正在尝试的一种选择是创建多个应用程序并在应用程序之间“加好友”测试用户，这似乎是可能的。不过，这似乎是不必要的工作。

我也在考虑用我自己的本地服务器存根 Facebook API，但这也感觉不对。可能有图书馆可以轻松做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T10:23:37.960

由于很长一段时间没有人回答这个问题，我想我只是发布我现在解决这个问题的方法，以防其他人有一天需要它。

Facebook 允许您在您是管理员的多个应用程序之间添加和“共享”测试用户。

因此，除了我已经在测试的那个之外，我还为自己创建了几个额外的测试 Facebook 应用。

然后我为每个用户添加了近 500 个测试用户（使用创建测试用户 API 调用）。

然后，我在原始测试应用程序的所有应用程序中关联了一些现有的“核心”测试用户（有关如何执行此操作的文档，请参见下文），使其他应用程序达到 500 个限制。

一旦在所有测试应用程序中添加了“核心”用户，我就让“核心”用户与每个测试应用程序中的所有其他用户成为朋友（这需要在每个测试应用程序中完成 - 即使用附加测试应用程序，而不是原始应用程序）。

最终结果是原始应用的“核心”组是与原始应用外部用户的朋友，允许他们的朋友列表增长超过人工测试用户限制 500。所以从原始应用我现在有一个集合可以拥有尽可能多的朋友的核心用户，我准备去麻烦创建，批量不到 500 个。

可能有更简单的方法，但现在就是这样。

我没有探索对 Facebook API 进行存根的想法——仍然是一个有趣的想法！

从文档中：

> **将现有测试用户添加到其他应用程序**
> 
> 您可以将 Graph API 与您要添加用户的应用访问令牌一起使用，将现有测试用户添加到其他应用。
> 
> [https://graph.facebook.com/APP_ID/accounts/test-users](https://graph.facebook.com/APP_ID/accounts/test-users)？installed=true &permissions=read_stream &uid=TEST_USER_ID &owner_access_token=APP_ACCESS_TOKEN_OWNER &access_token=APP_ACCESS_TOKEN &method=post 参数：
> 
> uid : 现有测试用户的用户 ID
> 
> owner_access_token ：用于创建测试用户的应用的应用访问令牌

[Facebook 测试用户文档：http:](http://developers.facebook.com/docs/test_users/) [//developers.facebook.com/docs/test_users/](http://developers.facebook.com/docs/test_users/)

# c# - 编辑后获取树节点文本

> ID：10364580
> 
> 赞同：5
> 
> 时间：2012-04-28T14:49:01.187
> 
> 标签：c#, winforms, treeview

我有一个树视图，允许用户在其中创建新的树节点。当他们创建树节点时，我会自动进入编辑模式。我要做的是在“AfterLabelEdit”中编辑完成后保存给树节点的名称。

我发现检查此方法中的标签会返回原始标签，因为在方法完成之前它似乎没有提交到树中。

编辑完成后如何获得新标签？有没有办法强制更改以这种方法提交？

希望这是有道理的！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-28T15:51:25.183

在 AfterLabelEvent 事件完成之前，实际的节点文本不会更改。该事件在 e.Label 属性中传递新的标签文本。那就是你想要的那个。

处理 balky TreeView 事件的标准技巧是延迟操作，直到事件完成。使用 Control.BeginInvoke() 方法优雅地完成：

```
 private void treeView1_AfterLabelEdit(object sender, NodeLabelEditEventArgs e) {
        this.BeginInvoke(new Action(() => afterAfterEdit(e.Node)));
    }
    private void afterAfterEdit(TreeNode node) {
        string txt = node.Text;   // Now it is updated
        // etc..
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T22:02:25.633

使用 System.Windows.Forms.NodeLabelEditEventArgs e 中的 e.Label

```
private void treeView1_AfterLabelEdit(object sender, System.Windows.Forms.NodeLabelEditEventArgs e)
{
    if (e.Label != null)
    {
     ........
    }
} 
```

[http://msdn.microsoft.com/en-us/library/system.windows.forms.nodelabelediteventargs.label.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.nodelabelediteventargs.label.aspx)

# web-services - 关于网络服务

> ID：10364581
> 
> 赞同：0
> 
> 时间：2012-04-28T14:49:06.540
> 
> 标签：web-services

我最近开始学习网络服务。对此几乎没有疑问：

1.  对于 web 服务，源是否总是需要提供 wsdl 或任何其他可能的方式来使用它而不需要 wsdl？

2.  直到前一段时间，我还在经典 ASP 中做服务器端 XMLhttp 帖子，以在外部应用程序中进行修改并从外部应用程序推送我的应用程序中的数据。我很困惑 - 这与 web 服务有很大不同还是可以称为一种 web 服务（当然不基于 SOAP）。有什么重大区别，还是只是 bw webservice 和服务器端 XMLhttp 帖子的协议差异？

3.  可以使 Web 服务异步吗？（通过 javascript 调用 AJAX 之类的）

4.  是否有任何不同类型的网络服务？（例如是否有区别 bw，提供股票报价的网络服务和谷歌提供的网络服务）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T17:48:30.173

我将在这里尝试非常简单：

> W3C 将“Web 服务”定义为“旨在支持网络上可互操作的机器对机器交互的软件系统”。

这意味着任何软件成为 web 服务的首要条件是它不应该依赖于平台或软件，即在 java 堆栈上制作的 web 服务可以由 windows 上的 .net 堆栈或 android 上的 java 堆栈中的客户端使用。

*   如果您的服务器端实现 XMLhttp post 就足够了，那么它就是一个 Web 服务。

> Web 服务的类型

实际上，对于 Web 服务的类型，并没有一个全面而清晰的分类。但最受欢迎的两个是：

1.  **基于 SOAP 的 Web 服务**。：它使用遵循简单对象访问协议 (SOAP) 标准的 XML 消息，这是一种定义消息架构和消息格式 (WSDL) 的 XML 语言。

2.  **基于 REST 的 Web 服务**。随着 WEB 2.0 的发展，重点已经从基于 SOAP 的服务转向基于表示状态传输 (REST) 的通信。 [3] REST 服务不需要 XML、SOAP 或 WSDL 服务-API 定义。[阅读此处以获得对 REST 的简单解释](http://tomayko.com/writings/rest-to-my-wife)

> 需要 WSDL 来使用 SOAP Web 服务？

要使用 SOAP 服务，我们只需要 SOAP 端点和 XML 消息格式。WSDL 是通过 Java 和 .NET SOAP 框架自动生成客户端代码的先决条件。

> 异步网络服务

使 web 服务异步是可能的。但是复杂性取决于使用的框架，例如 JAVA 中的 AXIS2 很容易实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T15:03:32.097

> 1.对于webservice，源是否总是需要提供wsdl或任何其他可能的方式来使用它而不需要wsdl？

`WSDL`是发布接口的文档。只要客户端遵守接口，就可以保证能够与 Web 服务“对话”。话虽如此，`WSDL`当有许多利益相关者时，这是规范的正式方式。只要您以某种方式知道 Web 服务期望什么，您就可以在没有它的情况下继续进行。只需将应用程序数据包装在一个`SOAP`信封中并将其发送到 Web 服务。只要您发送 Web 服务所期望的内容（在`SOAP`信封或应用程序数据中）以及它们所期望的方式（例如传输等），无论您是否使用了 a 都`HTTP`无关紧要。 `WS``WSDL`

> 2\. 前一段时间，我在经典 ASP 中做服务器端 XMLhttp 发布，以在外部应用程序中进行修改并从外部应用程序推送我的应用程序中的数据。我很困惑 - 这与 web 服务有很大不同还是可以称为一种 web 服务（当然不基于 SOAP）。有什么重大区别，还是只是 bw webservice 和服务器端 XMLhttp 帖子的协议差异？

用非常简单的术语来说，Web 服务是`XML`通过一些应用程序协议（通常是`HTTP`）。可能是`SOAP`基于或`REST`。要了解更多信息，您应该阅读`Service Oriented Applications`

> 3.Web服务可以异步吗？（比如通过javascript调用AJAX）

他们*可以*，但比这更复杂。

> 4.有不同类型的网络服务吗？（例如是否存在差异 bw、提供股票报价的网络服务和谷歌提供的网络服务）

不知道你在这里问什么。每个网络服务都提供了一些东西。

# c++ - 我可以使用 C++ 中的指针分配特定的内存地址吗？

> ID：10364582
> 
> 赞同：12
> 
> 时间：2012-04-28T14:49:14.743
> 
> 标签：c++, memory, pointers

我可以使用 c++ 中的指针分配特定的内存地址吗？

例如： 分配这个内存地址 25D4C3FA 并放入 4。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-28T14:50:48.173

*在进程的地址空间中分配*特定地址有点棘手且特定于平台。在 Unix 系统上，[`mmap()`](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)可能是最接近的。Windows 等效项是[`VirtualAlloc()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366887%28v=vs.85%29.aspx). 当然，没有任何保证，因为地址可能已经在使用中。

*写入*特定地址很简单：

```
char *p = (char*)0x25D4C3FA;
*p = 4; 
```

我认为你有充分的理由想要这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-30T20:28:16.050

在 Windows 中，是的。

伪代码：

```
Pointer desiredAddress = 0xD0000000;

//allocate 1 KB at our desired address
Pointer p = VirtualAlloc(desiredAddress, 1024, 
      MEM_COMMIT | MEM_RESERVE,  
      PAGE_READWRITE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T14:52:26.317

假设通过*allocate*你实际上是指*access*，

您可以，但如果地址无效或不可访问，则推迟该地址将导致未定义行为。
因此，这样做不是一个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T15:07:52.863

您可以在 Windows 上通过 VirtualAlloc 请求特定地址，我希望其他操作系统也这样做，但没有保证，也没有平台无关的方法。

# php - 使用 php 和 phpMyAdmin 将文件上传到服务器

> ID：10364586
> 
> 赞同：-2
> 
> 时间：2012-04-28T14:49:28.707
> 
> 标签：php, upload

我正在建立一个网站，我想允许注册用户将文件上传到我的服务器（最大大小：500Ko），但我不知道该怎么做。另一件事是这些文件必须上传到用户的目录中，并且，如果用户注册，则必须自动创建目录....我在这里真的需要帮助！

只是让你知道，我这样做不是为了好玩：这是我的“家庭”工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:59:24.537

要创建目录，您可以使用函数`mkdir`use [phpdoc for mkdir](http://php.net/mkdir)来了解它是如何工作的，或者使用 Google 来查找教程。

对于上传部分，我发现了一个可能有用的[教程。](http://www.tizag.com/phpT/fileupload.php)

剩下的唯一事情就是弄清楚如何将文件上传到用户目录。如果您使用我链接到的上传教程，`$target_path`您必须指向您在用户注册帐户时创建的文件夹。

# git - 如何在powershell中使用stdin来使用git commit-tree？

> ID：10364588
> 
> 赞同：2
> 
> 时间：2012-04-28T14:49:46.990
> 
> 标签：git, powershell

我正在尝试编写一个使用 git commit-tree 命令的 powershell 脚本，但它的文档说（[http://schacon.github.com/git/git-commit-tree.html](http://schacon.github.com/git/git-commit-tree.html)）：

> 从标准输入读取提交注释。如果没有通过“<”重定向提供更改日志条目，git commit-tree 将等待输入并以 ^D 终止。

以某种方式在powershell中可以像这样写入stdin吗？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T15:10:17.297

PowerShell 不支持标准输入重定向（使用`<`）。它确实支持标准输入管道，例如：

```
Get-Date | exe_that_takes_stdin.exe 
```

如果您的 git 命令不能以这种方式工作（可能使用普通标准输入来处理其他内容），请查看此[博客文章](http://www.orcsweb.com/blog/james/fun-with-powershell-plink-cisco-ios-and-powershell/)。看起来他们正在向 cmd.exe 提供标准输入重定向支持。

# pyqt4 - 相当于 pyqt4 中 gtk 的扩展器

> ID：10364589
> 
> 赞同：2
> 
> 时间：2012-04-28T14:50:01.713
> 
> 标签：pyqt4

qt4中是否有一个容器可以exapdn或折叠并隐藏它的孩子，比如GtkExpander？

![文档中的 gtk 扩展器](../Images/e39d0535c4e93b58c6f540598622168b.png)

qt4 设计器正是这样，但它似乎是一个自定义小部件：

![qt4设计师](../Images/0e8c7f73b0ceff5c877fd7130f8a089e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T16:22:33.403

不，但它很容易实现。这是一个非常基本的例子。您可以使用更多功能对其进行扩展：

![在此处输入图像描述](../Images/ec18c3fb7a46c0c99dc5c9725101b5d6.png)

```
from PyQt4 import QtGui
import sys

class ExpanderWidget(QtGui.QWidget):
    def __init__(self, text, widget, parent=None):
        super(ExpanderWidget, self).__init__(parent)

        self.layout = QtGui.QVBoxLayout()

        # better use your own icons
        # these are kind of ugly :)
        style = QtGui.QCommonStyle()
        self.rightArrow = style.standardIcon(QtGui.QStyle.SP_ArrowRight)
        self.downArrow = style.standardIcon(QtGui.QStyle.SP_ArrowDown)

        self.toggle = QtGui.QPushButton(self.downArrow, text)
        self.toggle.clicked.connect(self.toggleWidget)

        self.widget = widget

        self.layout.addWidget(self.toggle)
        self.layout.addWidget(self.widget)
        self.setLayout(self.layout)

    def toggleWidget(self):
        if self.widget.isVisible():
            self.toggle.setIcon(self.rightArrow)
            self.widget.setVisible(False)
        else:
            self.toggle.setIcon(self.downArrow)
            self.widget.setVisible(True)

app = QtGui.QApplication(sys.argv)

secretWidget = QtGui.QLabel('I am a secret widget. I can be hidden!')

expander = ExpanderWidget('I hide a widget', secretWidget)
expander.show()

sys.exit(app.exec_()) 
```

# c# - 通过将计算结果缓存到字符串变量进行优化

> ID：10364593
> 
> 赞同：0
> 
> 时间：2012-04-28T14:50:28.923
> 
> 标签：c#, optimization

我有几个类将计算成员暴露给 UI。我正在尝试优化，以便读数仅在需要时获得新值。

例如，我有一个可以容纳物品的容器。项目有 UnitMass、UnitSize、UnitCount 等。项目还计算它们的 TotalMass (UnitMass x UnitCount)、TotalSize 等。容器通过对其内容的各个成员求和来计算它们的 TotalContentMass、TotalContentSize 等。

容器所有者可能随时都可以看到一百个容器的 TotalContentMass 等读数。任何容器读取的任何数字都可能每秒变化 30 倍，或者可能连续数小时保持不变。

```
[容器 1] TotalContentMass：218 | 可用质量：1991
     [项目 1] 单位：5 | 总质量：50
     [项目 2] 单位：3 | 总质量：96
     ...
[容器 2] TotalContentMass：944 | 可用质量：53
     [项目 1] 单位：12 | 总质量：16
     [项目2] 单位：21 | 总质量：488
     ...
...

```

所以对于这些类型的“TotalX”成员，我想我应该有一个字段来存储计算的 ToString 结果，并将该字符串用于大多数 UI 目的。我会依靠事件处理来保持字符串更新。

```
class Item
{
    int _unitCount;
    int _unitMass;
    string _totalMassText;
    int _unitSize;
    string _totalSizeText;

    ...

    public TotalMass { get { return _unitMass * _unitCount; } }
    public TotalMassText { get { return _totalMassText; } }

    public TotalSize { get { return _unitSize * _unitCount; } }
    public TotalSizeText { get { return _totalSizeText; } }

    public UnitCount 
    { 
        get { return _unitCount; } 
        set { 
                _unitCount = value; 
                OnUnitCountChanged();
            } 
    }

    ...

    UpdateTotals()
    {
        _totalMassText = TotalMass.ToString();
        _totalSizeText = TotalSize.ToString();
        ...
    }
} 
```

Container 也是如此，以此类推。

这是过早的优化还是微优化？编译器首先会处理这种事情吗？如果不是，这是一种相当标准的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:10:50.823

不，编译器不会在此处自动缓存任何内容。是的，如果计算结果的成本很高，这是缓存结果的标准方法。但是创建字符串并不是很昂贵，所以我会说这是一个微优化，直到分析器另有说明。仅在需要时而不是在值更改时立即创建字符串甚至可能是有益的。

# matlab - MATLAB 特殊字符/运算符

> ID：10364594
> 
> 赞同：-1
> 
> 时间：2012-04-28T14:50:30.903
> 
> 标签：matlab

我是 MATLAB 新手，难以理解以下代码行：

```
ef   = sum(X.*(A*X), 1)'; 
```

`.`乘法运算符前面的点 ( ) 和`'`右括号后面的撇号 ( )的语义是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T16:20:55.520

转置的`'`方法：`A'`与`transpose(A)`

并且`.*`是逐元素乘法。（`*`是矩阵乘法）

# vhdl - VHDL - 如何检测 std_logic_vector 的变化？

> ID：10364596
> 
> 赞同：2
> 
> 时间：2012-04-28T14:50:41.077
> 
> 标签：vhdl

我有一个 std_logic_vector，我需要知道它什么时候会发生一些变化。到目前为止，我写了这个：

```
process (cp, l1)
begin
    if rising_edge(cp) then
        rL1 <= l1;
    end if;
end process;
tickL1 <= rL1 xor l1; 
```

rL1 是 l1 的延迟版本，而 l1 是我正在检查更改的 std_logic_vector。问题是 xor 返回 std_logic_vector，但我只需要 0 或 1。我怎样才能得到它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-28T18:00:07.513

为什么每个人都痴迷于异或？

```
changed <= '0' when rL1 = l1 else '1'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T15:06:33.427

您可以使用

```
change <= or_reduce(tickL1) 
```

或者

```
change <= or_reduce(rL1 xor l1); 
```

哪个或结果的所有信号一起，所以如果其中任何一个是`1`信号`change`也将是`1`。

**编辑：**所有这些reduce函数都在`ieee.std_logic_misc.all`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T15:04:41.503

你可以试试：

```
process (cp, l1)
begin
    if rising_edge(cp) then
        rL1 <= l1;
    end if;
end process;
changed <= '0' when (rL1 xor l1) = (others => '0') else '1'; 
```

在这种情况下`changed`是一个位。

我真的不记得你是否可以`others`在条件中使用运算符......这就是我说“你可以尝试”的原因......所以，让我知道它是否适合你......

# c# - 如何创建谷歌联系人？

> ID：10364606
> 
> 赞同：6
> 
> 时间：2012-04-28T14:51:38.407
> 
> 标签：c#

我正在尝试与 google gmail 联系人集成我按照此示例[Google Contacts API 版本 3.0](https://developers.google.com/google-apps/contacts/v3/)我收到此错误请求执行失败：[https ://www.google.com/m8/feeds/contacts/default/full](https://www.google.com/m8/feeds/contacts/default/full)

```
Google.Contacts.Contact createdEntry = cr.Insert(feedUri, newEntry); 
```

内心期待：

> {“远程服务器返回错误：(400) 错误请求。”}
> 
> [第 12 行，第 127 列，元素 gd:im] 缺少属性：“地址”

完整代码

```
using Google.Contacts;
using Google.GData.Contacts;
using Google.GData.Client;
using Google.GData.Extensions;

            RequestSettings settings = new RequestSettings("OVI2GoogleContacts", "my email", "pass");
        ContactsRequest cr = new ContactsRequest(settings);

        Google.Contacts.Contact newEntry = new Google.Contacts.Contact();

        // Set the contact's name.
        newEntry.Name = new Name()
            {
                FullName = "Elizabeth Bennet",
                GivenName = "Elizabeth",
                FamilyName = "Bennet",
            };
        newEntry.Content = "Notes";
         //Set the contact's e-mail addresses.
        newEntry.Emails.Add(new EMail()
            {
                Primary = true,
                Rel = ContactsRelationships.IsHome,
                Address = "liz<at>gmail.com"
            });
        newEntry.Emails.Add(new EMail()
            {
                Rel = ContactsRelationships.IsWork,
                Address = "liz<at>example.com"
            });
         //Set the contact's phone numbers.
        newEntry.Phonenumbers.Add(new PhoneNumber()
            {
                Primary = true,
                Rel = ContactsRelationships.IsWork,
                Value = "(206)555-1212",
            });
        newEntry.Phonenumbers.Add(new PhoneNumber()
            {
                Rel = ContactsRelationships.IsHome,
                Value = "(206)555-1213",
            });
        // Set the contact's IM information.
        newEntry.IMs.Add(new IMAddress()
            {
                Primary = true,
                Rel = ContactsRelationships.IsHome,
                Protocol = ContactsProtocols.IsGoogleTalk,
            });
        // Set the contact's postal address.
        newEntry.PostalAddresses.Add(new StructuredPostalAddress()
            {
                Rel = ContactsRelationships.IsWork,
                Primary = true,
                Street = "1600 Amphitheatre Pkwy",
                City = "Mountain View",
                Region = "CA",
                Postcode = "94043",
                Country = "United States",
                FormattedAddress = "1600 Amphitheatre Pkwy Mountain View",
            });
        // Insert the contact.
        Uri feedUri = new Uri(ContactsQuery.CreateContactsUri("default"));
        Google.Contacts.Contact createdEntry = cr.Insert(feedUri, newEntry); // here the error 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T16:00:00.730

Google 自己的示例代码似乎无效。根据文档[Google Data type/kind gd:im 需要填充属性地址](https://developers.google.com/gdata/docs/2.0/elements#gdIm)。

> @地址
> 
> @标签？
> 
> @rel？
> 
> @协议？
> 
> @基本的？

约定：

> elementName 必需元素
> 
> 元素名称**？** 可选元素
> 
> elementName ***** 可选元素，允许多个实例

您需要更新部分代码，例如：

```
newEntry.IMs.Add(new IMAddress()
{
  Address = "email@dot.com",  // untested
  Primary = true,
  Rel = ContactsRelationships.IsHome,
  Protocol = ContactsProtocols.IsGoogleTalk,
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T09:59:08.127

问题是在按照上面 Erik 的建议将 IM 添加到联系人条目时...在 google api 示例中，他们错过了提及 IM 地址

只需添加***地址 =“liz@gmail.com”，***以下

```
 // Set the contact's IM information.
    newEntry.IMs.Add(new IMAddress()
        {
            Primary = true,
            Rel = ContactsRelationships.IsHome,
            Protocol = ContactsProtocols.IsGoogleTalk,
            **Address = "liz@gmail.com",**
        }); 
```

# jquery - jQuery 连续淡入淡出循环

> ID：10364609
> 
> 赞同：1
> 
> 时间：2012-04-28T14:52:02.217
> 
> 标签：jquery

我有这段代码，现在它只运行一次。一旦为用户加载了dom，我需要它继续运行。不知道该怎么做...谢谢。

```
$('.first').delay(8000).fadeOut('slow', function() {
                $('.second').fadeIn();
            }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T14:54:26.563

您可以使用 JavaScript`setInterval`函数并执行以下操作：

```
setInterval(delayFunction, 8000);

function delayFunction() {
   $('.first').fadeOut('slow', function() {
       $('.second').fadeIn();
   })
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T14:57:50.163

我假设您也希望元素淡出。如果 dnot 则只深入一层，然后再次调用该函数。

```
$(document).ready(fadeIn);

function fadeRepeat()
{
    $('.first').delay(8000).fadeOut('slow', function() {
          $('.second').fadeIn(function() {
                $('.first').fadeIn('slow', function() {
                     $('.second').fadeOut(fadeRepeat());
                }
          });
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T14:58:24.930

尝试这个：

```
window.setInterval(function(){
     $('.first').fadeOut('slow', function() {
     $('.second').fadeIn()
 });
}, 8000); 
```

# java - 为什么junit不运行注入方法？

> ID：10364614
> 
> 赞同：1
> 
> 时间：2012-04-28T14:52:31.687
> 
> 标签：java, spring, junit, javabeans, abstract

我有一个抽象类：

```
public abstract ClassA {

 protected abstract void method1 {...} 
```

另一个实现method1的类ClassB。

XML:

```
bean id="BaseBean" class="ClassB"

bean id="WorkBean" class="ClassA"
lookup-method="method1" bean="BaseBean" 
```

在测试中：

```
$RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:test.xml"
public class Test ....

@Autowired
private ClassA classA; 
```

当我运行测试时，我收到错误：

```
java.lang.AbstractMethodError .... 
```

为什么？似乎应该从 BaseBean 调用方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:06:09.207

我不是 100% 确定这是否是您的问题，但 BaseBean 上应该有 singleton="false"

# php - 使用 php 将静态 1 公里网格添加到谷歌地图

> ID：10364624
> 
> 赞同：16
> 
> 时间：2012-04-28T14:53:16.260
> 
> 标签：php, javascript, api, google-maps

我想创建一个网格，我将覆盖谷歌地图。网格必须是静态的，这意味着 1km² 的网格必须完全位于同一位置，并且必须使用唯一的 ID 进行识别。如何在谷歌地图和 php 中实现这一点？

最好的，redshark1802

编辑：忘了提到我必须直接与这些网格进行交互，这意味着更改每个字段的颜色/样式。我找到了一些已经这样做的网站[https://ownthisworld.com/](https://ownthisworld.com/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-01T15:16:28.290

您的问题的答案可以在[Google Maps API (v3)](https://developers.google.com/maps/documentation/javascript/reference)中找到。

这里的基本方法是：

1.  [使用Map 对象](https://developers.google.com/maps/documentation/javascript/reference#Map)的 getBounds() 方法查找地图的边界。结果是一个[LatLngBounds 对象](https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds)，您可以从中提取地图角落的纬度和经度坐标。
2.  [计算](https://stackoverflow.com/questions/27928/how-do-i-calculate-distance-between-two-latitude-longitude-points)地图的南北、西和东之间的距离（公里）米。使用此距离来确定您应该绘制多少条线（距离为 1 公里）。
3.  [以PolyLines](https://developers.google.com/maps/documentation/javascript/reference#Polyline)的形状绘制网格，允许设置一些[选项](https://developers.google.com/maps/documentation/javascript/reference#PolylineOptions)，例如颜色和宽度。
4.  如果您还想绘制绑定了事件的矩形（如您的示例中所示），您可以使用带有某些[选项的](https://developers.google.com/maps/documentation/javascript/reference#RectangleOptions)[Rectangle](https://developers.google.com/maps/documentation/javascript/reference#Rectangle)。您可以将“单击”事件绑定到这些矩形，以便与它们进行交互。或者，您可以使用鼠标在地图上单击的坐标来识别单击了哪个方格。

**扩展信息：** 如果您知道在哪里绘制网格，您也知道在哪里绘制矩形，因为矩形的边缘基本上是网格线的线段。那么你怎么知道在哪里画网格线呢？如果您决定一个标准零点（例如赤道和本初子午线的交汇点），并且基本上从那里开始绘制网格线，那么您将始终将网格线（以及矩形）定位在同一位置。请注意，您只绘制地图边界视图内的那些网格线。这样，通过例如左上角来识别矩形也相当容易……它将始终位于同一位置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-06T13:07:07.363

也许这些例子会有所帮助： [这](http://xelawho.com/map/rectangles2.html)是一个固定大小的网格 - 使用 NW latlng 定位它并使用高度和宽度变量对其进行调整

[这](http://xelawho.com/map/rectangles.htm)是一个网格，可以调整大小并移动以覆盖地图区域（或多或少）

它们都将矩形存储在 rectArr 数组中，因此您可以通过访问它们来操作它们的选项等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T15:00:39.140

你想要一个四键。Geohash 使用类似的系统。您可以寻找一个 L 系统来编写 az 曲线，或者您可以在 phpclasses.org（希尔伯特曲线）上获取我的代码。这是关于它如何工作的很好的教程：http: [//blog.notdot.net/2009/11/Damn-Cool-Algorithms-Spatial-indexing-with-Quadtrees-and-Hilbert-Curves](http://blog.notdot.net/2009/11/Damn-Cool-Algorithms-Spatial-indexing-with-Quadtrees-and-Hilbert-Curves)。

# algorithm - 如何快速找到可以形成正斜率直线的点对数？

> ID：10364630
> 
> 赞同：1
> 
> 时间：2012-04-28T14:53:44.167
> 
> 标签：algorithm

给定 n 对点，我们怎样才能得到能够快速形成正斜率直线的点对数？

然后有 n 行，其中第 i 行包含两个整数 xi 和 yi，指定第 i 个点的 x 和 y 坐标。没有两个点具有相同的 x 坐标，也没有两个点具有相同的 y 坐标。

我的想法是先对 x 进行排序，然后将每个点与它下面的另一个点进行比较。但它仍然是 O(n^2)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T15:16:21.647

选择一个点（随机是最简单的并且具有良好的预期运行时间，尽管您可以在线性时间内确定性地找到一个中点），将轴分成四个象限：

```
 x        |
           |   x   x
     x     |  x
-----------x-----------
  x        |
   x       |      x
           | x 
```

`I`用, `II`, `III`,表示从左上角逆时针方向的象限`IV`：

```
II  | I
----|----
III | IV 
```

我们将忽略位于轴上的点（理论概率为 0 的边缘情况，并且在实践中很容易处理）。

请注意，象限中的所有点`III`与所有点形成一条正斜线`I`，类似地，没有任何点将`II`与点形成 ps 线`IV`，因此我们递归调用：

```
NumPSLines(G) = |I|*|III| +
                NumPSLines(I U II) +
                NumPSLines(II U III) +
                NumPSLines(III U IV) 
```

where`U`表示联合。

假设（留给读者的证明）*预期*值`E(|I|) = ... E(|IV|) = |G|/4 = n/4` 和象限的划分是线性的，那么我们得到预期的运行时间：

```
T(n) = O(n) + 3T(n/2)
     = O(n) + ... + 3^k * t(n/2^k) // where k = log2(n)
     = O( log2(n) * 3^log2(n) )
     = O(n^(log2(3)) * logn)
     ~ O(n^1.6 * logn) 
```

不确定这个界限是否紧密；没有考虑太多。

这个解决方案可以进行超级优化，尽管它只是一个开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T15:29:32.447

按 x 降序排序，然后计算 y 中的反转次数。这两个步骤都是 O(n log n)。

解释：斜率为正的（无序）对的数量是对的数量{(xi, yi), (xj, yj)}，使得 xi > xj 和 yi > yj。当我们按 x 降序排序时，我们使得 xi > xj 当且仅当 i < j 时。ys 中反转的定义是一对 i < j 使得 yi > yj。

[快速计算反转次数。](https://stackoverflow.com/questions/337664/counting-inversions-in-an-array)

# java - 空jface窗口上的奇怪分隔符

> ID：10364631
> 
> 赞同：1
> 
> 时间：2012-04-28T14:53:44.787
> 
> 标签：java, swt, jface

我刚刚创建了一个空的 jface 窗口。但由于某种原因，窗口顶部有分隔符：

![在此处输入图像描述](../Images/5dffed34d5ade777d75244721bfd7d83.png)

使用菜单栏看起来还不错。但是如果没有显示分隔符的菜单栏！

![在此处输入图像描述](../Images/5a1e98e11458a10a057f98cf01340e46.png)

怎样才能消除？

**UPD**

```
class Application extends ApplicationWindow {
    /**
     * @param parentShell
     */
    public Application() {
        super(null);
    }

    @Override
    protected Control createContents(final Composite parent) {
        prepareShell(getShell());
        return parent;
    }

    protected void prepareShell(final Shell shell) {
        shell.setSize(450, 300);
    }
} 
```

和主班

```
public class Main {

    /**
     * @param args
     */
    public static void main(String[] args) {
        Application app = new Application();
        app.setBlockOnOpen(true);
        app.open();

        Display.getCurrent().dispose();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:52:38.353

您可以扩展窗口，而不是应用程序窗口。Window 类没有菜单和状态。此外，您不会在屏幕顶部有分隔符。

解决问题的另一种方法是从 ApplicationWindow 覆盖 showTopSeperator()

```
protected boolean showTopSeperator() {
    return false;
} 
```

# data-mining - 如何在 Apriori 算法中找到最小支持

> ID：10364632
> 
> 赞同：12
> 
> 时间：2012-04-28T14:53:50.827
> 
> 标签：data-mining, apriori

当给出支持度和置信度的百分比值时，如何在 Apriori 算法中找到最小支持度。例如，当支持度和置信度分别为 60% 和 60% 时，最小支持度是多少？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T19:49:47.983

支持度和置信度是衡量规则有趣程度的指标。

最小支持度和最小置信度由用户设置，是关联规则生成的 Apriori 算法的参数。这些参数用于排除结果中支持度或置信度分别低于最小支持度和最小置信度的规则。

所以回答你的问题，当你说：“例如，当支持和信心分别为 60% 和 60% 时，最小支持是多少？” 您可能的意思是您已将最低支持和置信度设置为 60 %。

我认为您只是对这些条款感到困惑。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-10T04:40:58.493

我的回答来得太晚了，但我猜 Chanikag 的问题是 - “当支持阈值为 60% 时，如何最小化支持计数”。最小支持计数将是事务计数，因此它将是事务总数的 60%。如果事务数为 5，则您的最小支持计数为 5*60/100 = 3。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-18T17:12:24.770

在此处查看带有实时可用示例的 Apriori 算法的完整说明：

[http://www.coded.com/articles/apriori-algorithm](http://www.codeding.com/articles/apriori-algorithm)

您可以添加新项目并输入最小支持阈值和最小置信度阈值，然后在演示 Silverlight 小部件中立即查看生成的大型项目集。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-03-29T14:45:21.810

最小支持计数是所有交易的百分比。假设您有 60% 的支持计数，5 是总交易，那么 min_support 的数量将是 5*60/100=3。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-30T04:41:07.220

我不确定你的问题是否有意义。从您的示例中，如果您返回了至少一条支持和置信度为 60% 的规则，您可以确定最低支持度至少为 60%，但可能更多。

Minimum-Support 是提供给 Apriori 算法的参数，以便通过指定生成的关联规则的 Support 度量的最小下限来修剪候选规则。还有一个相应的最小置信度修剪参数。

算法产生的每条规则都有自己的支持度和置信度度量。粗略地说，支持率是所有实例中规则为真的实例的比率。置信度是规则为真的实例与前件（蕴涵的 LHS）为真的实例数量的比率。

查看[维基百科](http://en.wikipedia.org/wiki/Association_rule_learning)以获得更严格的定义。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-14T07:31:19.420

您必须使用最小支持计数来比较候选人的支持计数。如果您将最小支持计数指定为“%”值，则必须首先找到事务数并执行以下操作。

例如，您的数据库中有 10 个事务。

minimum support count is 70%. Now, to get the number as Min. Sup.count = number of transactions * (minimum support count% / 100)

So, min.sup.count= 10 * 70/100

Answer is 7.

This is how you have to calculate min.sup.count

# jquery - CSS / JQuery 边框

> ID：10364636
> 
> 赞同：6
> 
> 时间：2012-04-28T14:54:28.967
> 
> 标签：jquery, css

下面的 jquery 代码正是我希望它在悬停时做的事情。但是，我需要它以下列方式工作：

如果用户将鼠标悬停在#altimgX（例如）上，则会出现黑色边框。我希望这个边界一直保持到“#altimgY”悬停；那时，我想从#altimgX 中删除边框。

我尝试使用'mouseleave'，但这并不能解决我的问题，因为我希望当前的#altimg 边框保持不变，直到另一个#altimg 元素悬停。

```
$("#altimg0, #altimg1, #altimg2, #altimg3, #altimg4, #altimg5").hover(function(){
        $(this).css('border', '3px solid black');
}); 
```

HTML 代码片段

```
<div id="altimg0" style="height:70px; width:70px;"> SOME IMAGE </div>
<div id="altimg1" style="height:70px; width:70px;"> SOME IMAGE </div>
<div id="altimg2" style="height:70px; width:70px;"> SOME IMAGE </div>
<div id="altimg3" style="height:70px; width:70px;"> SOME IMAGE </div>
<div id="altimg4" style="height:70px; width:70px;"> SOME IMAGE </div>
<div id="altimg5" style="height:70px; width:70px;"> SOME IMAGE </div> 
```

我感谢任何帮助在这方面的任何帮助。

谢谢你

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-28T15:00:10.167

```
var altimgs = $("#altimg0, #altimg1, #altimg2, #altimg3, #altimg4, #altimg5");

altimgs.hover(function() {
    altimgs.css('border-width', '0');
    $(this).css('border', '3px solid black'); 
}); 
```

在每个元素的悬停功能中，您只需先删除边框，然后只为您想要的那个设置它。

另外，一个小提琴：http: [//jsfiddle.net/EYgpj/](http://jsfiddle.net/EYgpj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T15:42:54.373

在 CSS 中创建一个类

```
over { border:3px solid #000 } 
```

然后给所有图像一个类名`hoverimage`，例如

然后将此 jQuery 添加到您的代码中

```
$(document).ready(function(){

    $("hoverimage").hover(function() {

        // Remove border for all images
        $("over").removeClass("over");

        // Add border to this image
        $(this).addClass("over");
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T15:00:53.657

首先，您可能应该根据类而不是 ID 来选择元素：

```
$(".altimg").hover(function() {
    //Remove border from all altimg classes
    $(".altimg").css('border','0px');
    //Set the border for this element.
    $(this).css('border','3px solid black');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T15:01:15.780

创建一个变量来存储当前悬停的元素。不过，您可能应该使用类引用来访问这些值。例如 $(".altImg")。

```
var currentHover = '';
$("#altimg0, #altimg1, #altimg2, #altimg3, #altimg4, #altimg5").hover(function(){

    $(this).css('border', '3px solid black');

    if (currentHover != '')
    {
       $("#" + currentHover).css('border', '0px');
    }

    currentHover = $(this).attr('id');

}); 
```

# php - 可疑 IP（64.19.142.11、64.19.142.13 显然来自 Verizon）添加到 CSS 中的所有图像 URL

> ID：10364638
> 
> 赞同：2
> 
> 时间：2012-04-28T14:54:41.313
> 
> 标签：php, css

我注意到，当我通过浏览器打开 CSS 时，我看到我所有的图像都有一些 IP 前缀。它看起来像这样：

> 网址（http://64.19.142.11/www.mydomain.com/i/pgBg.png）

实际上，我的 CSS 使用的是相对路径：

> 网址（/i/pgBg.png）

发生什么事？这是什么原因造成的？我的网站是否被黑客入侵并添加了一些服务器覆盖规则？它似乎只影响 CSS，因为页面中的图像很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T15:09:58.827

这两个 IP 地址已注册到[Flash Networks](http://www.flashnetworks.com/)（请参阅[此处](http://whatismyipaddress.com/ip/64.19.142.11)和[此处](http://whatismyipaddress.com/ip/64.19.142.13)）。

您的 CSS 可能正在被他们的[Web 加速服务](http://www.flashnetworks.com/Content.aspx?Page=web_optimization)修改，以指向他们服务器上图像的缓存副本。

如果您没有自行设置，则需要咨询您的服务器管理员或托管公司以获取更多信息。

**编辑：** [显然](http://www.linuxquestions.org/questions/linux-networking-3/verizon-broadband-security-threat-or-just-abuse-690596/)Verizon 正在/正在使用该网络加速服务做某事。[**这**](http://www.verizonbusiness.com/Medium/products/itinfrastructure/acceleration/options.xml)也可能是相关的。

# android - Android光标索引越界异常

> ID：10364642
> 
> 赞同：0
> 
> 时间：2012-04-28T14:54:59.107
> 
> 标签：android, gridview, indexing, cursor, bind

我需要在 Android 中使用 simplecursor 适配器绑定 gridview，这是我的代码：

```
 public class AndroidSqliteActivity extends Activity {
private Veritabani ogrenciler; 
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);      
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
    setContentView(R.layout.main);
    ogrenciler = new Veritabani(this);       
    final EditText adi=(EditText) findViewById(R.id.editText1); 
    final EditText soyadi=(EditText) findViewById(R.id.editText2);    
    Button verigonder=(Button) findViewById(R.id.verigonder);  
    Button button1 =(Button) findViewById(R.id.button1); 
    button1.setOnClickListener(new View.OnClickListener() {        
        public void onClick(View v) { 
            try{

            Intent i = new Intent(AndroidSqliteActivity.this, AndroidVeriActivity.class);
            startActivity(i);
            }
            catch(RuntimeException e)
            {
                Log.e("ERROR", "ERROR IN CODE: " + e.toString());

            }

        }
        });
    verigonder.setOnClickListener(new View.OnClickListener() {        
        public void onClick(View v) { 
            try{                 
                KayitEkle(adi.getText().toString(),soyadi.getText().toString()); 
                Cursor cursor = KayitGetir();  
                KayitGoster(cursor);        
                }
            catch (SQLiteException e) {  

                             Log.d("eHata", e.getLocalizedMessage());  
                         }  
            finally{            
                ogrenciler.close();    
                }             
            }        
        });    
    } 
private void KayitEkle(String isim, String soyad){     
    SQLiteDatabase db = ogrenciler.getWritableDatabase(); 
    ContentValues veriler = new ContentValues();    
    veriler.put("isim", isim);     
    veriler.put("soyad",soyad); 
    db.insertOrThrow("ogrenciisim", null, veriler);    
    } 

private Cursor KayitGetir(){  
    SQLiteDatabase db = ogrenciler.getReadableDatabase();  
    Cursor cursor = db.query("ogrenciisim", new String[] {"id", "isim", "soyad"}, null, null, null, null, null);  
    startManagingCursor(cursor);      
    return cursor;    
    } 
private void KayitGoster(Cursor cursor){ 

    try{
    final GridView grid=(GridView) findViewById(R.id.gridView1); 

    String[] columns = new String[] { "id", "isim", "soyad" };
    int[] to = new int[] { R.id.textView122, R.id.textView222, R.id.textView322 }; 
    SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this, R.layout.gridview, cursor, columns, to);  
    grid.setAdapter(mAdapter);
    }
    catch(Exception e)
    {
        Log.d("eHata", e.getLocalizedMessage());  
    }
    } 
```

}

这是我的数据库类：

```
public class Veritabani extends SQLiteOpenHelper {
private static final String VERITABANI = "Ogrenciler";
private static final int SURUM = 1;

public Veritabani(Context con)
{
super (con,VERITABANI,null,SURUM);
}

@Override
public void onCreate(SQLiteDatabase db) {
// TODO Auto-generated method stub
db.execSQL("create table ogrenciisim(id integer primary key, isim text, soyad text);");
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
db.execSQL("drop table if exist ogrenciisim");
onCreate(db);

}
} 
```

但它给出了一个错误“索引 -1 请求大小为 18（16-20）”我做错了什么？

PS：我按照巴拉克的说法更改了它，但现在它给出了错误：“列 id 不存在”确实谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T16:31:56.750

您没有正确设置。

这个：

```
String[] columns = new String[] {
        cursor.getString((cursor.getColumnIndex("id"))), 
        cursor.getString((cursor.getColumnIndex("isim"))), 
        cursor.getString((cursor.getColumnIndex("soyad"))) }; 
```

应该是这样的：

```
String[] columns = new String[] { "id", "isim", "soyad" }; 
```

您的实现试图从游标中读取值。适配器将读取光标，您只需要告诉它哪些列放入哪些资源。

**编辑**

好的，这是一个猜测，但看看你的代码，我认为这是一个可靠的代码。

您根据我的建议更改了数据库结构（修复了空间问题），但实际上并没有传递到数据库本身，因为您没有更改数据库版本，所以 onUpgrade 方法没有触发并重新创建分贝。

改变这个：

```
private static final int SURUM = 1; 
```

对此：

```
private static final int SURUM = 2; 
```

运行应用程序，您的数据库将使用新的（正确的）结构重新创建。那应该解决它无法找到该列的问题。

您提到的另一个错误“但它给出了一个请求大小为 18(16-20) 的错误索引 -1”通常意味着您尝试访问游标而不先执行`cursor.moveToFirst`...但我没有从代码中看到您发布了可能发生这种情况的地方。您可以尝试将其作为 gridview 的 try 语句中的第一件事（甚至在使用后执行它，`startManagingCursor`然后在创建时返回它）

# css - CSS 使用精灵的两个背景图像

> ID：10364643
> 
> 赞同：1
> 
> 时间：2012-04-28T14:55:04.527
> 
> 标签：css, background-image, css-sprites

我是精灵的新手，这个特殊的任务让我难以置信——请帮助别人。

我目前使用两个背景图像，如下所示：

```
body {
background-attachment: fixed;
background-image: url("images/bktopright.png"), url("images/bkbottomleft.png");
background-position: right top, left bottom;
background-repeat: no-repeat;
line-height: 1;
min-width: 1150px;
} 
```

为了改善页面加载时间，我现在想使用一个图像，一个精灵。我认为这是独一无二的，因为我想在背景上使用相同的图像两次，其中我在浏览器窗口的右上角显示图像的一部分，在浏览器窗口的左下角显示图像的一部分。我想展示的图像的两个部分都是 600px 宽 x 400px 高。

如果新图像是 1720px 宽 x 1100px 高并且称为“background.jpg”，我将如何调整代码来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T22:26:44.060

相反，您可以`divs`在: 中创建两个`body`:
不像 CSS 那样简单，但它允许您使用您的精灵。

**的HTML**：

```
<body>
  <div id="bgOne"></div>
  <div id="bgTwo"></div>
</body> 
```

**的CSS**：

```
body {
  min-width: 1150px;
}

#bgOne, #bgTwo {
  position: fixed;
  height: 400px;
  width: 600px;
}

#bgOne {
  background: url('images/bktopright.png') no-repeat right top;
  right: 0;
  top: 0;
}

#bgTwo {
  background: url('images/bkbottomleft.png') no-repeat left bottom;
  left: 0;
  bottom: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:24:14.353

这是一个工作示例为您提供的答案。

[http://jsfiddle.net/ctLZY/](http://jsfiddle.net/ctLZY/)

```
 <div class="bg" id="bg1"></div>
 <div class="bg" id="bg2"></div>​ 
```

CSS

```
.bg{
    background-image: url("someimage.png");
    background-repeat: no-repeat;
    position:fixed;
    width:100px;
    height:100px;
}
#bg1{
    background-position: -50px 0px;
    right:0px; top:0px;
}
#bg2{
    background-position: 50px 0px;
    left:0px; bottom:0px;
}​ 
```

您可以参考以下链接了解更多信息。
[Css3.info](http://www.css3.info/preview/multiple-backgrounds)
[Css-Tricks](http://css-tricks.com/css-sprites/)
这是我遇到的方法。可能有更好的方法来处理这个问题。

# actionscript-3 - 动态创建影片剪辑并将其添加到舞台

> ID：10364644
> 
> 赞同：1
> 
> 时间：2012-04-28T14:55:28.593
> 
> 标签：actionscript-3, dynamic, movieclip

为什么这行不通？！

```
stop();
var board:MovieClip = new MovieClip();
board.width = 60 * 5;
board.height = 60 * 5;
board.graphics.clear();
board.graphics.beginFill(0xFF0000);
board.graphics.lineStyle(1, 0x000000);
board.graphics.drawRect(0, 0, board.width, board.height);
board.graphics.endFill();
this.addChild(board);
board.x = 40;
board.y = 40; 
```

这很简单，之前已经做过无数次了，但它对我不起作用！！！我已将其粘贴到动作框架和文档脚本中，但都不起作用！这让我很沮丧，因为我知道这是对的！！！我正在使用 Flash CS5.5！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:43:47.480

更改此行：

```
board.graphics.drawRect(0, 0, board.width, board.height); 
```

到：

```
board.graphics.drawRect(0, 0, 60 * 5, 60 * 5); 
```

为什么：

我可能是错的，我没有测试过，但`board.width`可能`board.height`返回 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T15:51:49.157

如果我没记错的话——已经有一段时间了——没有`width`或`height`直到`MovieClip`. 即使您手动设置尺寸，也没有任何尺寸可以调整，因此它们最终保持为 0。您必须先添加一个对象或绘制一些东西`graphics`，然后您才能调整它的大小。

# powershell - PowerShell 中类似 4NT 的函数

> ID：10364645
> 
> 赞同：0
> 
> 时间：2012-04-28T14:55:32.670
> 
> 标签：powershell

我是 PowerShell 的新手，正在尝试从 4NT 切换。我已经阅读了许多人做同样事情的意见并且似乎很高兴，但我想问一下是否有人遇到过任何类似于这些 4NT 功能的 PowerShell 开发功能：

列表

选择

查找

我会最想念 SELECT 和 FFIND。

SELECT 可以与别名一起使用，使用空格键轻松选择多个不同类型的文件，然后非常快速地自动删除/复制/等它们，而无需过度键入或加载 GUI 应用程序。

```
ex. Typing my alias "SD" this window would appear and I could easily tick several files and hit enter to automatically delete them. Very handy when you need to delete many files among a larger set of files you do not want to delete. 
```

见图片： [http ://social.technet.microsoft.com/Forums/en-US/winserverpowershell/thread/c7837d04-70f1-4f25-8f85-e773bdcb35da](http://social.technet.microsoft.com/Forums/en-US/winserverpowershell/thread/c7837d04-70f1-4f25-8f85-e773bdcb35da)

FFIND 是一个非常漂亮且快速的文件中文本搜索实用程序，无论是 C# 代码、WEB 代码、txt 文件、SQL 代码还是文档中的某些单词或短语，它都能非常快速地查找任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:00:35.870

我认为这种特殊方式仅在 V3 中受支持，但是......在 PowerShell V3 中，您可以轻松地做到这一点：

```
Get-ChildItem c:\temp | Out-GridView -PassThru | Remove-Item -WhatIf 
```

或者如果你想变得精辟（并且只列出文件 - 而不是目录 - 也是 V3 功能）

```
ls c:\temp -af | ogv -passthru | ri -wh 
```

# xcode - 如何在模拟器中启动 iOS 应用程序而不用 XCode 重建应用程序

> ID：10364647
> 
> 赞同：1
> 
> 时间：2012-04-28T14:55:36.410
> 
> 标签：xcode, ios-simulator

如果我使用 Xcode 为模拟器构建了 iOS 应用程序，有没有办法可以在模拟器中手动启动它和/或将它从 build-dir 复制到模拟器上？原因是如果我更改我的任何代码，我不希望 XCode 决定当我在模拟器中运行时它会重建所有内容，因为这需要几分钟。

我看到模拟器目录是使用某种 GUID 命名的，并且有一些额外的子目录。这有什么魔力，或者我可以创建一个新目录并将我的应用程序转储到其中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T19:26:35.603

首先，确定构建目录的位置。这通常位于项目目录的根目录中，如下所示：

```
${PROJECT}/build 
```

然后找到您构建的构建目标，它将是 Debug 或 Release，它应该用于 iPhone 模拟器。这通常在构建目录中作为以下之一找到：

```
${PROJECT}/build/Debug-iphonesimulator 
```

或者

```
${PROJECT}/build/Release-iphonesimulator 
```

现在找到您的应用程序包，其中将包含可以加载到 iOS 模拟器中的实际应用程序。这将位于上述目录之一的下方，如下所示：

```
${PROJECT}/build/Debug-iphonesimulator/<yourapp>.app 
```

正如我所说，这是一个应用程序包，所以它实际上是一个目录，在这个目录中你会找到你的应用程序的可执行文件：

```
${PROJECT}/build/Debug-iphonesimulator/<yourapp>.app/<yourapp> 
```

您现在可以在 iOS 模拟器中启动您的应用程序：

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone\ Simulator.app/Contents/MacOS/iPhone\ Simulator -SimulateApplication ${PROJECT}/build/Debug-iphonesimulator/<yourapp>.app/<yourapp> 
```

# javascript - 从表单中获取值并在 JavaScript 函数中使用它

> ID：10364648
> 
> 赞同：0
> 
> 时间：2012-04-28T14:55:37.393
> 
> 标签：javascript, html, forms

我在简单的程序中遇到困难......

我有一个简单的 html 表单，从中我得到 3 个整数值，然后使用这一行将它们提交给 JavaScript 函数 这是我正在使用的函数

```
<script language="javascript">
function Secured_Rescaled_Marks(form)
{
    var address = form.total_marks.value;
    window.alert(address);  
    //var secured = (rescale_marks/total_marks)*secured_marks;
    //alert('secured');
}
</script> 
```

这是表格

```
<form>
<table cellpadding="3">
<tbody>
<tr>
<td bgcolor="#6699CC">
<b>Total Marks:</b>
<input name="text" name="total_marks" />
</td>
</tr>
</tbody>
</table>
</br>
<table cellpadding="3">
<tbody>
<tr>
<td bgcolor="#6699CC">
<b>Secured Marks:</b>
<input name="text" name="secured_marks">
</td>
</tr>
</tbody>
</table>
</br>
<table cellpadding="3">
<tbody>
<tr>
<td bgcolor="#6699CC">
<b> Rescale Marks:</b>
<input name="textarea" name="rescale_marks">
</td>
</tr>
</tbody>
</table>
</br>
    <input type="button" onsubmit="return Secured_Rescaled_Marks(this);" name="order" value="Secured_Rescaled_Marks??"/>

<input type="reset" value="Reset">
</form> 
```

我需要在表单提交时计算这样的公式并提醒结果....

```
var secured = (rescale_marks/total_marks)*secured_marks; 
```

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:18:17.957

首先，您应该给您的表单 a `name`，然后您可以使用以下常用方法之一：

```
document.FormName.elements["element_name"].value;//select by name
//or
document.FormName.elements[index].value;//select by index position 
```

**注意：** `FormName`是示例中的表单名称

[源码](http://www.javascript-coder.com/javascript-form/javascript-get-form.phtml)和[演示](http://jsfiddle.net/Q3uLt/1/)

然后要在你的函数中使用这个值，你需要将它从字符串转换为数字，如下所示：

```
var val = document.FormName.elements["element_name"].value;
val = parseFloat(val); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T15:24:25.337

您的`input`标签有两个名称，即：

```
<input name="text" name="total_marks" /> 
```

应该：

```
<input type="text" name="total_marks" id="total_marks"/> 
```

我为您添加了一个 ID，因为有了一个 ID，您可以使用`document.getElementById('total_marks');`

当您在检索值后进行数学运算时，您应该确保它们是数字（在您的情况下为整数），即：

```
var tmarks = parseInt(document.getElementById('total_marks')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T15:25:22.950

您的表单上有一些错误（已修复）

```
<form name="myform" onsubmit="return Secured_Rescaled_Marks(this);">
<table cellpadding="3">
   <tbody>
    <tr>
     <td bgcolor="#6699CC">
       <b>Total Marks:</b>
       <input type="text" name="total_marks" />
     </td>
    </tr>
   </tbody>
</table>
</br>
<table cellpadding="3">
    <tbody>
     <tr>
      <td bgcolor="#6699CC">
       <b>Secured Marks:</b>
       <input type="text" name="secured_marks">
      </td>
     </tr>
    </tbody>
 </table>
 </br>
 <table cellpadding="3">
  <tbody>
   <tr> 
    <td bgcolor="#6699CC">
     <b> Rescale Marks:</b>
      <input type="text" name="rescale_marks">
    </td>
   </tr>
  </tbody>
 </table>
 </br>
 <input type="submit" name="order" value="Secured_Rescaled_Marks??"/>
 <input type="reset" value="Reset">
</form>​ 
```

**JS** `<script language="javascript">`应该是`<script type="text/javascript">`

```
function Secured_Rescaled_Marks(frm)
{
    var rescale_marks=parseFloat(frm.rescale_marks.value);
    var total_marks=parseFloat(frm.total_marks.value);
    var secured_marks=parseFloat(frm.secured_marks.value);
    var secured = (rescale_marks/total_marks)*secured_marks;
    if(isNaN(secured)) return false;
    if(confirm(secured)) 
    {
        this.submit();
        return true;
    }
    return false; 
}​ 
```

[**演示。**](http://jsfiddle.net/heera/6beaM/5/)

# c# - ASP.NET 中的 ActiveX 控件

> ID：10364651
> 
> 赞同：2
> 
> 时间：2012-04-28T14:55:54.803
> 
> 标签：c#, asp.net, activex, ocx

我在 Windows 项目中有一个 ActiveX 控件。我想将它用于我的 Web 项目。我读了一些关于对象、类 id、代码库的东西，但它不起作用。请帮帮我

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>WebForm1</title>
</head>
<body>
    <form id="Form2" runat="server">
    <object id="DKroki" height="310" width="300" classid="bin/Interop.KrokiPrj.dll" viewastext>
    </object>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T15:23:22.587

ActiveX 的东西只适用于 IE。

激活 ActiveX 控件：http: [//msdn.microsoft.com/en-us/library/ms537508%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms537508%28v=vs.85%29.aspx)

**更新：** 您可以从[VisualJS](http://visualjs.net) .NET 中受益，以便为浏览器开发类似桌面的应用程序（与触摸兼容）

# java - Akka：如何安排延迟间隔增加的失败重试？

> ID：10364654
> 
> 赞同：10
> 
> 时间：2012-04-28T14:56:21.920
> 
> 标签：java, error-handling, akka, akka-supervision

让演员在失败时再次尝试某些事情的好方法是什么，但重试之间的时间间隔越来越长？假设我希望演员在 15 秒后重试，然后是 30 秒，然后每分钟重试几次。

这是我想出的：

*   执行实际工作的actor的方法有一个可选 `RetryInfo`参数，如果存在，它包含我们当前的重试次数
*   失败时，actor 将向自己发送一个新`ScheduleRetryMessage`的 with `retryCount + 1`，然后抛出一个 RuntimeException
*   另一个演员监督工人演员，使用`new OneForOneStrategy(-1, Duration.Inf()`返回`Resume`作为其指令。演员没有状态，所以`Resume`应该没问题
*   收到后`ScheduleRetryMessage`，演员将
    *   if `retryCount < MAX_RETRIES`：使用 Akka 的调度程序来安排`RetryMessage`在所需延迟后发送
    *   else: 最终放弃，发送消息给另一个actor进行错误报告

这是一个好的解决方案还是有更好的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T09:52:49.397

在这种情况下，我使用标准监督。父/监督参与者定义时间窗口内的重试。重试工作子进程只是重新调度导致失败的消息，并在 preRestart() 中延迟。

如果重试的孩子相当复杂，您可以考虑互连一个中间参与者。那个演员只是升级监督。在 preRestart 中，中间参与者会安排一个（延迟的）重启消息。由于中间actor保留了它的状态，它可以简单地重启workeractor（有延迟）。

正如您所看到的，延迟部分可能在 preRestart 或 worker 启动时。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-30T05:36:49.883

你可以有一个主管来启动工人演员。文档中的提示是为工作人员声明一个大小为 1 的路由器。主管将跟踪重试次数，然后根据需要安排消息发送给工作人员。

即使您将创建另一层演员，这对我来说似乎更干净，因为您会将监督功能排除在工作人员之外。理想情况下，您可以将这 1 个主管设置为 n 个工人，但我认为您必须使用生命周期监控来从子角色那里获得失败。在这种情况下，您可以只保留 [ActorRef, Int] 的地图来跟踪所有受监督工作人员的重试次数。监督策略会 Resume，但如果您达到最大重试次数，您可以向违规的 ActorRef 发送 PoisonPill。

# git - 如何仅同步项目的一部分？

> ID：10364656
> 
> 赞同：0
> 
> 时间：2012-04-28T14:56:43.040
> 
> 标签：git, deployment, aptana3

我在 Aptana Studio 3 中有一个带有 git 存储库的 Web 项目。不幸的是，当它被创建时，它带来了所有的文件夹，比如邮件等，tmp。仅将我的 public_html 文件夹仅部署到网络的最佳方法是什么？它应该是我的 git 存储库和 Aptana 项目中的唯一文件夹，还是有办法隐藏整个文件夹以便我可以将 public_html 部署到网络？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:52:40.003

GIT 存储库用于存放应受源代码控制的内容。由于邮件等，tmp 不应该在源代码控制下，解决您的问题的方法是将它们从存储库中取出。您的 GIT 存储库似乎处于错误的级别。所以你有两个选择：

1）放弃现有的git仓库，在public_html中新建一个

```
$ cd /path/to/public_html
$ git init; git add -A; git commit 'Initial publc_html'
$ rm -rf ../.git 
```

2）保留现有的GIT存储库，但删除邮件等，tmp。

```
 $ cd /path/to/public_html/..
 $ tar cf keepers.tar mail, etc, tmp  <others>
 $ echo "mail/\netc/\ntmp/\n" >> .gitignore
 $ git rm -r mail etc tmp     # <= careful
 $ tar xf keepers.tar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T17:23:38.470

使用[git-subtree](https://github.com/apenwarr/git-subtree)提取存储库的相关部分（带有历史记录）以生成另一个存储库，然后推送它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T15:00:47.330

你应该使用`.gitignore`文件。只需在那里添加不必要的部署文件和文件夹。在 git 下存储密码、密钥和环境设置（如本地数据库设置等）也不是一个好习惯。

[在此处](https://github.com/github/gitignore)查看适合您项目的优秀示例。

# javascript - 使用 jQuery/JavaScript 从 SOAP 响应中解析 XML

> ID：10364657
> 
> 赞同：4
> 
> 时间：2012-04-28T14:56:47.850
> 
> 标签：javascript, jquery, parsing, soap

我在使用 jQuery 解析来自 SOAP 服务器的响应时遇到问题。我想将 XML 响应转换为数组，因为您可以在下面看到多行数据。

这是请求：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetWorkPos xmlns="http://localhost/apps">
      <id>int</id>
    </GetWorkPos>
  </soap:Body>
</soap:Envelope> 
```

这是回应：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetWorkPosResponse xmlns="http://localhost.com/apps">
      <GetWorkPosResult>
        <GetWorkPos>
          <ProductId>string</ProductId>
          <Product>string</Product>
          <quantity>decimal</quantity>
          <Em>string</Em>
          <type>string</type>
        </GetWorkPos>
        <GetWorkPos>
          <ProductId>string</ProductId>
          <Product>string</Product>
          <Quantity>decimal</Quantity>
          <Em>string</Em>
          <Type>string</Type>
        </GetWorkPos>
      </GetWorkPosResult>
    </GetWorkPosResponse>
  </soap:Body>
</soap:Envelope> 
```

这是我的代码：

```
 $(document).ready(function () {
   $("#send").click(function (event) {
            var wsUrl = "http://localhost/Service.asmx";

            var soapRequest =
            '<?xml version="1.0" encoding="utf-8"?> \
            <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" \
                xmlns:xsd="http://www.w3.org/2001/XMLSchema" \
                xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"> \
              <soap:Body> \
                <GetWorkPos xmlns="http://localhost.com/apps"> \
                  <id>' + $("#id").val() + '</id> \
                </GetWorkPos> \
              </soap:Body> \
            </soap:Envelope>';

            console.log(soapRequest);

            $.ajax({
                type: "post",
                url: wsUrl,
                contentType: "text/xml",
                dataType: "xml",
                data: soapRequest,
                success: processSuccess,
                error: processError
            });

        });
    });

    function processSuccess(data, status, req, xml, xmlHttpRequest, responseXML) {
        $(req.responseXML)
        .find('GetWorkPosResult')
        .each(function(){
            var id = $(this).find('ProductId').text();
            console.log(id);
        });
    }

    function processError(data, status, req) {
        alert(req.responseText + " " + status);
        console.log(data);
        console.log(status);
        console.log(req);
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-28T15:17:43.377

[http://jsbin.com/uwirux/edit#javascript,html](http://jsbin.com/uwirux/edit#javascript,html)

```
var myObj = new Array();

$(req.responseXML)
 .find('GetWorkPosResult').find('GetWorkPos')
        .each(function(){
          myObj.push($(this)); // Should't use .text() because you'll lose the ability to use .find('tagName') 
        });

for(var i = 0; i<myObj.length;i++){
     var x = myObj[i].find('ProductId').text();
     var y = myObj[i]find('Product').text();
} 
```

或者

```
$(myObj).each(function(){
var x = $(this).find('ProductId').text();
var y = $(this).find('Product').text();
}); 
```

# ruby-on-rails - 使用 Rspec 和 FactoryGirl 一劳永逸地测试嵌套资源 CRUD

> ID：10364658
> 
> 赞同：1
> 
> 时间：2012-04-28T14:56:48.577
> 
> 标签：ruby-on-rails, testing

我是测试新手，知道有类似的问题，但我在任何地方都找不到好的答案，所以我想我一劳永逸地解决这个问题。

我有项目资源，其中有很多任务。我**希望使用 Factory Girl 正确测试 tasks_controller_spec.rb 中的任务 CRUD 操作。怎么做？**

这是我到目前为止的代码，让你开始......

**路线.rb**

```
 5   resources :projects do   
  6     resources :tasks       
  7   end 
```

**工厂.rb**

```
 1 FactoryGirl.define do
  2                            
  3   factory :valid_project, :class => Project do
  4 
  5     sequence(:name) do |n| 
  6       "FactoryProject - #{n}" 
  7     end                    
  8     sequence(:description) do |n|   
  9       "Description for the FactoryProject - #{n}"
 10     end                    
 11 
 12   end
 13 
 14   factory :valid_task, :class => Task do
 15     
 16     sequence(:name) do |n| 
 17       "FactoryTask - #{n}" 
 18     end
 19     sequence(:description) do |n|   
 20       "Description for the FactoryTask - #{n}"
 21     end                    
 22     valid_project
 23     
 24   end
 25   
 26 end 
```

**tasks_controller_spec.rb**

```
 1 require 'spec_helper'      
  2                            
  3 describe TasksController do
  4 
  5   before :each do          
  6     @valid_project = FactoryGirl.create :valid_project
  7   end
  8   
  9   describe 'Success' do    
 10 
 11     before :each do
 12       @valid_attr = FactoryGirl.attributes_for :valid_task
 13     end
 14 
 15     it 'Should create new task' do  
 16       lambda do            
 17         post :create, :project_id => @valid_project, :task => @valid_attr
 18       end.should change(Task, :count).by(1)
 19     end                    
 20 
 21     #it 'Should update the task' do 
 22     #end
 23 
 24   end
 25 
 26   describe 'Failure' do    
 27 
 28     before :each do        
 29       @invalid_attr = { :name => '', :description => '' }
 30     end                    
 31 
 32     it 'Should not create new task' do 
 33       lambda do            
 34         post :create, :project_id => @valid_project, :task => @invalid_attr
 35       end.should_not change(Task, :count)
 36     end                    
 37 
 38   end
 39 
 40 end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:44:40.770

```
FactoryGirl.define do
  factory :project do
    sequence(:name) { |n| "FactoryProject - #{n}" }
    sequence(:description) { |n| "Description for the FactoryProject - #{n}" }
  end
  factory :invalid_project, :parent => :project do
    name nil
    description nil
  end

  factory :task do
    sequence(:name) { |n| "FactoryTask - #{n}" }
    sequence(:description) { |n| "Description for the FactoryTask - #{n}" }
  end                    
  factory :invalid_task, :parent => :task do
    name nil
    description nil
  end
end 
```

至于将任务链接到项目中，我没有太多使用 attributes_，所以我通常会进行构建或创建并传递关联的值。

```
@task = FactoryGirl.build(:task, :project => @project) 
```

# android - 从 avd 管理器运行 Android 虚拟机的问题

> ID：10364660
> 
> 赞同：0
> 
> 时间：2012-04-28T14:57:01.307
> 
> 标签：android, eclipse, android-emulator

我已经安装并设置了 Eclipse 和插件 ADT，以便使用 Android SDK。到目前为止，一切都很好。

但是，当我尝试为我选择的任何 Android 平台（例如 Android 3.2）启动 VM 时，我只是将皮肤与键盘控制台和电话按钮一起启动；它似乎启动到一个状态，然后什么都不做，只是在主 VM 屏幕上显示 android 徽标，这就是它所做的一切 - 没有别的，没有 VM 功能！

这是怎么回事？我错过了一些步骤吗？

我正在使用带有 Intel 双核 1.5 GHz CPU 和 1 GB RAM 的 Windows 32 位机器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T15:02:31.567

您的计算机不足以支持 AVD。那是我之前的问题。RAM 和 CPU 对于 Android 开发人员来说非常重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T19:36:31.813

你要等多久？有时需要几分钟。

# opencv - Detect rect of white objects on a black background using opencv

> ID：10364664
> 
> 赞同：0
> 
> 时间：2012-04-28T14:57:52.433
> 
> 标签：opencv, background-subtraction

I'm using frame differencing and opencv to detect movement between frames (absdiff, threshold, erode, etc).

How can I get the coordinates of the individual locations of the movements (the rect: x, y, width, height), basically of the white blobs?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T09:50:11.283

I'm doing the same thing. Here's the code I have (some things handled in different classes, I just put it all together here). The first part is what you already have, skip down to the contours part.

```
/* This is the background subtraction you already have */
Mat tmp1;
GaussianBlur( frame, tmp1, Size(5,5),0,0); //Blurring one image is sufficient to eliminate noise
absdiff(tmp1, frameLast, tmp1);
cvtColor(tmp1,tmp1,CV_RGB2GRAY);
threshold( tmp1, tmp1, CV_THRESH_OTSU, 100, CV_THRESH_BINARY);
/*cleaning up */
int erosion_type = MORPH_RECT; // MORPH_RECT, MORPH_CROSS, MORPH_ELLIPSE
int erosion_size = 3;
Mat erosion_element = getStructuringElement( erosion_type, Size( 2*erosion_size + 1, 2*erosion_size+1), Point( erosion_size, erosion_size));

int dilation_type = MORPH_RECT;
int dilation_size = 5;
Mat dilation_element = getStructuringElement( dilation_type, Size( 2*dilation_size + 1, 2*dilation_size+1), Point( dilation_size, dilation_size));

erode(tmp1,tmp1,erosion_element);
dilate(tmp1,tmp1,dilation_element);

/* Here I am getting the contours */
vector<vector<Point> > contours;
findContours( tmp1, contours, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE );
int minArea = 100, maxArea = 1000; //keep only contours of a certain size
for (vector<vector<Point> >::iterator it=contours.end(); it!=contours.begin(); it--) {
    if ((*it).size()<minArea || (*it).size()>maxArea) {
        contours.erase(it);
    }
}

drawContours(displayer, contours, a, Scalar(122,200,222),2); 
```

See [here](http://opencv.itseez.com/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#void%20findContours%28InputOutputArray%20image,%20OutputArrayOfArrays%20contours,%20int%20mode,%20int%20method,%20Point%20offset%29) for more details (especially the options on which contours to find, can help you narrow down what you find. I just used CV_RETR_EXTERNAL).

Note that I made (before) a Mat displayer, which is a deep-copy of frame (copied with frame.copyTo(displayer). This is because if you draw stuff directly on frame, it'll be transferred to "frameLast" and pop up with the next absDiff. Of course you could avoid this extra image by cleanly copying frame to frameLast before drawing (so drawing everything at the end), I do this so I can easily draw from anywhere in the code, makes it easier for now since I'm trying a lot of things and want to be able to see intermediate steps at times.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:43:58.337

Basically, you may want to try cvBlobsLib. Currently using it. Of course at first it is very hard to deal with it. Later on when you get use to it, it is pretty simple to use. It find the white blobs in the image, vice versa. then you can use bounding box. from there you can get the point location.

# vb.net - 如何从 DataGrid 中的单元格中获取数据

> ID：10364667
> 
> 赞同：1
> 
> 时间：2012-04-28T14:58:15.190
> 
> 标签：vb.net, datagrid

您好，我有一个数据网格，其中包含带有复选框的列。我想在特定条件下禁用该复选框。我有一个 SQL DB，我从中得到一个 DataSet，然后我在 Data Grid 中填充数据集。这是我的一些代码

```
 Dim loopRow As Integer = ds.Tables(0).Rows.Count - 1
        Dim ColDS As New DataColumn("Status")
        ds.Tables(0).Columns.Add(ColDS)
        For loopval As Integer = 0 To loopRow
            If ds.Tables(0).Rows(loopval)(8).ToString = "True" Then
                ds.Tables(0).Rows(loopval)(11) = "Confirmed"
            Else
                ds.Tables(0).Rows(loopval)(11) = "Pending"
            End If
        Next
        For loopDate As Integer = 0 To ds.Tables(0).Rows.Count - 1
            If ds.Tables(0).Rows(loopDate)("ProgramTours_FromDate") <= Now.Date Then

            End If
        Next
        GrdAgentBL.DataSource = ds
        GrdAgentBL.DataBind() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T18:38:06.880

我认为这是您查询的解决方案。

```
//I am setting dataTable using this function  
Private Sub setDataTable()
        Dim dt As DataTable
        dt = New DataTable()
        dt.Columns.Add("Name")
        dt.Columns.Add("Val")
        Dim dr As DataRow = dt.NewRow()
        dr("Name") = "Abcd"
        dr("Val") = 1
        dt.Rows.Add(dr)
        dr = dt.NewRow()
        dr("Name") = "xyz"
        dr("Val") = 2
        dt.Rows.Add(dr)
        grdView.AutoGenerateColumns = False
        grdView.DataSource = dt
        grdView.DataBind()

    End Sub

// This code will do enabling or disabling the checkbox.
if (e.Row.RowType == DataControlRowType.DataRow)
        {
            DataRowView grdRow = (DataRowView)e.Row.DataItem;
            if (grdRow.Row.ItemArray[1].ToString() == "1")
            {
                e.Row.Enabled = false;
            }

        } 
```

***最佳实践***：请从 SQL 形成您的数据表。使用一个简单的案例并在您的代码中排除此循环。因此，如果可能有 1000 行，则需要迭代 1000 行。

```
select val1,val2,(case when val1=0 then 1 else 0 end) as val3 from tbl. 
```

所以这可能比任何迭代都快

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:00:00.523

这是代码

```
 For Each Item As DataGridItem In GrdAgentBL.Items 'load the items first
                Dim lblTemp As New Label 'My Data is stored in a label
                lblTemp = Item.Cells(2).Controls(1) 'So I take it inside that new label
                Dim tx As String = lblTemp.Text 'Then I load it on the Tx var
                If tx <= Now.Date Then 'if it's meet the condition we will disable the column
                    Item.Cells(11).Enabled = False
                End If
 Next 
```

# java - 无法在 NetBeans 中创建 Java Web 项目

> ID：10364669
> 
> 赞同：3
> 
> 时间：2012-04-28T14:58:45.780
> 
> 标签：java, jakarta-ee, netbeans

我无法在 NetBeans 中创建 Java Web 项目。当向导要求我在“服务器和设置”页面上选择“Java EE 版本”时，没有选择 Java 版本的选项。我是否必须以某种方式单独安装 Java EE？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T15:03:08.570

这取决于您下载的捆绑包（请参阅[可用捆绑包](http://netbeans.org/downloads/)）。也许您需要单独下载 Java EE SDK（[下载页面](http://www.oracle.com/technetwork/java/javaee/downloads/index.html)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T15:40:15.950

您需要一个 servlet 容器来测试您的应用程序，并且您需要一些来自 Java EE 的库来编译您的应用程序。

您可以直接从 netbeans 下载 Oracle 的参考 EE 实现 glassfish，它会为您将其集成到您的 IDE 中。

打开服务面板（如果它不可见，请在窗口菜单下选择它），右键单击服务器并选择添加服务器。选择 Glassfish 3，您可以下载它。如果您已经下载了另一个 Sevlet 容器，您也可以在此处使用此对话框将其集成到 IDE 中。

如果需要，可以使用服务选项卡重新启动容器（glassfish 或 Tomcat）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-28T15:03:22.847

可以单独安装 Java EE，并配置 Netbeans 以使用它。

默认情况下，IDE 制造商通常不包含 Java EE，因为它是一个巨大的额外下载。不过，查看[Netbeans 下载](http://netbeans.org/downloads/index.html)页面，我看到列出了“Java EE”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-28T21:31:19.687

有几种方法可以结束这种状态，最简单的方法是执行以下操作：

按出现在标有“服务器”的组合框右侧的添加...按钮。它在下图中用红色 1 标记。

这将打开向导以在 IDE 中注册服务器。

在向导的第一页选择“GlassFish Server 3+”，然后按下一步按钮。

在向导的第二页（如下图所示），您可以输入将保存已安装位的目录的名称。单击标有“我已阅读并接受许可”的复选框（标有红色 2）。这将启用立即下载...按钮。这将打开一个对话框，让您决定要安装的 GlassFish 版本。

![在此处输入图像描述](../Images/0fcfaa64a96b9665965addd5cd257e87.png)

注册服务器后，您将能够选择要用于 Java Web App 项目的 Java EE 版本。

# php - 使用ajax发送和返回数据

> ID：10364675
> 
> 赞同：0
> 
> 时间：2012-04-28T14:59:50.650
> 
> 标签：php, jquery, ajax

我想我做错了我想要用 PHP 返回的东西。我要做的是检查用户名是否通过ajax付费。

PHP，如果我这样做，它会自行工作：

```
$username = $_POST['username']; 

     function checkPlayer($player) {
        $mcURL = 'http://www.minecraft.net/haspaid.jsp?user=';
        $auth = file_get_contents($mcURL . $player);

        if (trim($auth) == "true") {
          echo $player. ' is ';
        } else {
          echo $player. ' is ';
        }

        return $auth;
      }

      echo checkPlayer($username); 
```

如果我将`$username`值更改为静态的东西，比如`$username = "Notch";`. 但如果我使用`$_POST['username']`, 并使用以下 JS，则不会：

```
$(document).on('keyup', 'input', function(){

        var inputVal = $('input').val();
        $.post('auth.php', inputVal, function(data){
          console.log(input.Val + ' is ' data);
        });
      }); 
```

如果我输入 'Notch', 应该在控制台中打印出来`true`，如果像 'fslfjslkfjls' 之类的其他东西应该是`false`. HTML：

```
<form>
    <input type="text" name="username" value="" class="authcheck">
  </form> 
```

我有什么问题？

**更新：**在 galchen 的回答之后，它（有点）现在可以工作（不给出错误）

```
var inputVal = $('input').val();
        $.post('auth.php', { 'username' : inputVal }, function(data){
            console.log(inputVal + ' is ' + data);
        }); 
```

但是现在输入的所有内容都返回 true，即使它不是 true。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T15:03:10.617

尝试：

```
$.post('auth.php', { 'username' : inputVal }, function(data){
    console.log(input.Val + ' is ' data);
}); 
```

您需要在 ajax 中发送对象 - 它是请求变量的字典

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T15:20:28.220

你也可以使用：**.serialize()**

```
$.post('auth.php', { $("form").serialize() }, function(data){
console.log(input.Val + ' is ' data); 
```

});

[将一组表单元素编码为字符串以进行提交](http://api.jquery.com/serialize/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T19:12:19.237

您可以按照您的预期使用与 ajax 调用一起正常工作的代码。

auth.php：

```
 $username = $_POST['username']; 
  function checkPlayer($player) {
    $mcURL = 'http://www.minecraft.net/haspaid.jsp?user=';
    $auth = file_get_contents($mcURL . $player);

    return $auth;
  }

  echo checkPlayer($username); 
```

将此作为 ajax 响应的 html：

```
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    </head>
    <body>
    <form>
    <input type="text" name="username" value="" class="authcheck">
  </form>
<script type="text/javascript">
    $(document).on('keyup', 'input', function(){
        var inputVal = $('input').val();
        $.post('auth.php', { 'username' : inputVal }, function(data){
            console.log(inputVal +' is '+ data);
        });
      });
    </script>
    </body>
</html> 
```

刚刚修改了 php 部分以排除不必要的代码，您现在可以使用上面的 html 文件检查您的控制台，或者您可以在您的代码中使用它。

希望您可以使用上面的代码进行检查。

# jquery - 动态创建表 td 时未采用其 css

> ID：10364678
> 
> 赞同：0
> 
> 时间：2012-04-28T15:00:34.023
> 
> 标签：jquery, css

```
var $imageicon = $('<image/>');
 $imageicon.attr('src', '../../Content/images/ReplyIcon.png');
 $imageicon.addClass('replyIcon');
 var $table = $('<table/>').addClass('replyContent');
 $table.attr('id', 'replyArea');

 $table.append(
                         $('<tr>').append($('<td>').append($imageicon).addClass('replyIcontd'), $('<td>').text('hii'))
      );
 $("#container").append(
               $('<div/>')
                  .attr('id', 'replytopost')
                  .append($table)
            ); 
```

css

```
.replyIcontd
{
   width:5%;

} 
```

表格出现了，但我想减少 hii 和图像之间的空间我试图将宽度减小到 5%，但我无法做到，我的图像 hii 是一个 td，ok 是一个 td。我希望他们两个都并肩而来

![在此处输入图像描述](../Images/a1511159134690c1017c3ff42efb8afe.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T15:22:39.707

我可能认为你的问题是你使用百分比而不是固定宽度。我在自己的电脑上试了一下，这个样式被应用到了表格数据上。

你可以尝试扩展你的CSS：

```
.replyIcontd
{
   width: 200px;
   background: red;
} 
```

这也可能对您有用，然后您只需要使用更合适的值 then `200px`。需要注意的是，5% 的宽度是相对于表格的宽度而言的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T15:26:39.877

您忘记关闭`/`动态创建的元素。

```
 $('<tr />').append($('<td />').append($imageicon).addClass('replyIcontd'), $('<td />').text('hii')); 
```

* * *

**更新** 我对您的脚本进行了一些相当大的更改，并采用了正确的方法。

```
 var $imageicon = $('<img />', {
     'src' : '../../Content/images/ReplyIcon.png',
     'class' : 'replyIcon'
 });

 var $table = $('<table/>', {
     "class" : "replyContent",
     "id" : "replayArea",
     'html' : $('<tr />', {
                 'html' :  $('<td />', {
                     'class': 'replyIcontd',
                     'html' : $imageicon
                 }).html()+$("<td />", {
                     'text' : 'hii'
                 }).html()                     
              })

 }); 
```

[演示](http://jsfiddle.net/g75Y4/2/)

# java - Java中的全局热键

> ID：10364683
> 
> 赞同：8
> 
> 时间：2012-04-28T15:00:58.453
> 
> 标签：java, native, jna, hotkeys

我正在尝试制作一个使用全局热键的应用程序，在决定使用 jintellitype api 之前，我已经被困在其中大约 2 天试图弄清楚。当我运行[Jintellitype 网站](http://melloware.com/products/jintellitype/index.html)上提供的示例时，我总是遇到问题：Can't load IA 32-bit .dll on a AMD 64-bit platform, I use a 64-bit JRE, 64 bit windows, and 找不到解决方案：既不在网站/论坛上，也不使用谷歌。

我不熟悉处理 .dll 文件和 JNI/JNA，但我认为要让事情正常工作，我应该生成一个 .dll 文件并将其添加到系统文件夹，或者只是获取一个预制的 .dll 文件，如Jintellitype 提供的一个（如果我错了，请纠正我）。

那么，使用 JIntellitype 背后的主要思想是什么？我该如何解决我面临的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:03:56.210

我不确定你的问题是什么，并让你研究了 jintellitype，但你检查过这篇文章：[有没有办法在没有 JFrame 的情况下获取键盘事件？](https://stackoverflow.com/questions/4609068/is-there-a-way-to-get-keyboard-events-without-jframe)

# python - 我什么时候使用 Google 的 MapReduce

> ID：10364690
> 
> 赞同：4
> 
> 时间：2012-04-28T15:02:24.943
> 
> 标签：python, google-app-engine, mapreduce

我最近偶然发现了 Google 的[MapReduce](https://developers.google.com/appengine/docs/python/dataprocessing/overview)。

我已经阅读了两次描述/文档，但我仍然无法理解它到底是什么，或者何时使用它。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T15:59:48.033

## 简短的回答：

当您希望具有数据并行性时。

## 解释：

当您有一些需要多个 CPU 的繁重计算时，应该使用 Map reduce 框架。在 map reduce 中，首先将任务分成独立的块。然后分别计算这些块。一旦所有的块都被计算出来，结果就会结合起来给出最终的输出。一个常见的例子是机器学习。许多用于计算系数向量的计算可以单独执行，然后可以将结果合并在一起。简而言之，如果您有多个 CPU，则只考虑使用 map reduce，否则没有意义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-28T15:15:58.103

这是对 map reduce 的一个很好的解释：

[http://www.joelonsoftware.com/items/2006/08/01.html](http://www.joelonsoftware.com/items/2006/08/01.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-28T15:17:34.543

Google App Engine 为您提供了一个 API（java 和 python），用于在其 App Engine 上运行 MapReduce 作业。虽然您无法查看所有源代码（调度程序、作业跟踪器、任务跟踪器等模块），但您可以查看 API 的源代码（包括映射器、减速器、分区器等）。GAE 还为您提供了一个软件开发工具包 (SDK)，您可以在该工具包上测试您的应用程序。在您对应用程序的性能感到满意后，您可以将其上传到 GAE，任何人都可以访问它。

我制作了一个这样的应用程序，它可以在[shaileshmapreduce.appspot.com](http://shaileshmapreduce.appspot.com/)找到。它不会让您运行 MapReduce 作业，因为我必须将您的 gmail id 添加到用户列表中，但您可以查看界面和所有内容。

您还可以尝试他们的 MapReduce 演示[https://developers.google.com/appengine/docs/python/dataprocessing/helloworld](https://developers.google.com/appengine/docs/python/dataprocessing/helloworld)

当然，您需要确保在您的机器上安装了 SDK 和所需的 MapReduce 库。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-28T15:12:16.603

请允许我引用[维基百科](http://en.wikipedia.org/wiki/MapReduce)：

> MapReduce 是一个框架，用于使用大量计算机（节点）在巨大的数据集中处理高度可分布的问题，统称为集群或网格。计算处理可以对存储在文件系统（非结构化）或数据库（结构化）中的数据进行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-11T05:58:06.250

这个问题已经得到了很好的回答，但我想我会添加一些东西。在我看来，问题的关键在于 map-reduce 本身不被理解。Google map-reduce 只是一种实现。还有 Hadoop 和各种各样的东西。下面是 map-reduce 的 helloworld 的简述：

假设您有一本书，并且您想计算每个单词的字数。这是一种方法：

```
word_dict = {}
for line in book_file_handler:
     for word in line.split():
         word_dict[word] = word_dict.get(word,0)+1 
```

这有点过于简单化了，因为标点符号什么的。

所以这段代码有效。如果你想通过使用闪亮的集群让它运行得非常快怎么办？最好将书中的一部分发送到参与计算的每台计算机，让每台计算机计算一些单词，然后组合结果。这是可能的，因为书中的每一行都独立于其他每一行。这就是 map-reduce 的用途：

如果您有一个算法需要对许多独立对象执行相同的操作，这样操作的结果不依赖于任何其他对象的结果，那么 map-reduce 是合适的。

# php - 为什么 case 表达式不适用于 PHP 中使用的 SQL 查询连接？

> ID：10364694
> 
> 赞同：0
> 
> 时间：2012-04-28T15:02:47.103
> 
> 标签：php, mysql, sql, phpmyadmin

我有两个版本的准备好的查询，第一个有效，但第二个使用 CASE WHEN 无效：

```
 SELECT  mFrom.user_name AS sender_name, mp.message AS message
 FROM msg_pv mp
 INNER JOIN membresmvc AS mFrom 
    ON mp.id_from = mFrom.id
 WHERE mp.id_to = :id_member 
```

案例版本：

```
 SELECT  mFrom.user_name AS sender_name, mp.message AS message
 FROM msg_pv mp
 INNER JOIN 
    CASE mp.from_type
        WHEN "mb" THEN membresmvc AS mFrom ON mFrom.id = mp.id_from 
    END -- also tried "END CASE"    
 WHERE mp.id_to = :id_member 
```

msg_pv 表中 mp.from_type 的值始终为“mb”。我完全使用[MySQL 参考手册中推荐的结构](http://dev.mysql.com/doc/refman/5.0/fr/case-statement.html)。我不明白为什么第二个查询不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T15:20:27.503

如果您的*CASE* espression 值始终评估为 true，则无需使用该语句。

但是，我认为*CASE*在您的查询中的使用是错误的。它应该如下所示。您可以在 ON*条件下使用**CASE* ，但不能在*JOIN*本身上使用 CASE。这样，您可以根据条件加入不同的列。

 **这在语法上是正确的，但不确定输出是什么。

您可以使用此链接验证此语句：[**Instant SQL Formatter**](http://www.dpriver.com/pp/sqlformat.htm?ref=g_wangz)

*查询*：

```
SELECT      mFrom.user_name AS sender_name, 
            mp.message      AS message 
FROM        msg_pv mp 
INNER JOIN  membresmvc 
ON          ( 
                CASE mp.from_type 
                    WHEN "mb" THEN mFrom.id = mp.id_from 
                    ELSE NULL 
                END 
            ) 
WHERE  mp.id_to = :id_member; 
```

# 更新

如果您需要根据条件连接到多个表，那么您需要使用`LEFT OUTER JOIN`. *假设您的第二个表是 *second_table* 并且另一个值是“另一个值”*，您的查询可能看起来像这样

 *```
SELECT          COALESCE(mFrom.user_name, second_table.some_col) AS sender_name, 
                mp.message      AS message 
FROM            msg_pv mp 
LEFT OUTER JOIN membresmvc 
ON              mFrom.id        = mp.id_from 
AND             mp.from_type    = "mb"
LEFT OUTER JOIN second_table 
ON              second_table.id = mp.id_from 
AND             mp.from_type    = "another value"
WHERE           mp.id_to = :id_member; 
```

# 例子

这是一个说明它的例子。此脚本在 SQL Server 2012 数据库中进行了测试。在 MySQL 中可能会有所不同。但是，这里使用的 LEFT OUTER JOIN 的概念即使在 MySQL 中也是相同的。

*   有三个表，`table1`即`table2``table3`
*   在这里，我们必须根据以下条件将 table1 与 table2 和 table3 连接起来。
*   如果*table1*中的colrefid具有值***t2*** *，则将table1中的****colrefid***与*table2*中的*col2*连接起来。***`constant`***
****   如果*table1*中的值为***t3****，则将**table1*中的colrefid与***table3***中的*col3*连接起来。***`constant`*******   你可以看到最后的输出******

 ***希望这能给您一个想法，根据您的要求加入表格。

*脚本*：

```
CREATE TABLE dbo.Table1
(
        col1        INT         NOT NULL
    ,   colrefid    INT         NOT NULL
    ,   constant    VARCHAR(10) NOT NULL
);

CREATE TABLE dbo.Table2
(
        col2    INT         NOT NULL
    ,   name    VARCHAR(10) NOT NULL
);

CREATE TABLE dbo.Table3
(
        col3    INT         NOT NULL
    ,   name    VARCHAR(10) NOT NULL
);

INSERT INTO dbo.Table1 (col1, colrefid, constant) VALUES
    (123, 2, 't2'),
    (784, 3, 't3'),
    (498, 2, 't2');

INSERT INTO dbo.Table2 (col2, name) VALUES
    (2, 'table 2');

INSERT INTO dbo.Table3 (col3, name) VALUES
    (3, 'table 3');

SELECT          t1.col1
            ,   t1.colrefid
            ,   t1.constant
            ,   COALESCE(t2.col2, t3.col3) colvalue
            ,   COALESCE(t2.name, t3.name) colname
FROM            dbo.Table1  t1
LEFT OUTER JOIN dbo.Table2  t2
ON              t2.col2     = t1.colrefid
AND             t1.constant = 't2'
LEFT OUTER JOIN dbo.Table3  t3
ON              t3.col3     = t1.colrefid
AND             t1.constant = 't3'; 
```

*输出*：

```
col1 colrefid constant colvalue colname
---- -------- -------- -------- -------
123      2       t2        2    table 2
784      3       t3        3    table 3
498      2       t2        2    table 2 
```******

# php - 使用 PHP 仅解析 RSS 提要中的一项

> ID：10364695
> 
> 赞同：0
> 
> 时间：2012-04-28T15:02:58.200
> 
> 标签：php, xml, rss

我试图从一个 rss 提要中解析一个项目。基本上，我试图从 rss 提要中获取最新/最后一项，而不是解析整个提要。现在我有这个代码：

```
$x=$xmlDoc->getElementsByTagName('item');
for ($i=0; $i<=2; $i++)
{
$item_title=$x->item($i)->getElementsByTagName('title')
->item(0)->childNodes->item(0)->nodeValue;
$item_link=$x->item($i)->getElementsByTagName('link')
->item(0)->childNodes->item(0)->nodeValue;
$item_desc=$x->item($i)->getElementsByTagName('description')
->item(0)->childNodes->item(0)->nodeValue;
} 
```

但是，这会遍历所有项目。我不需要所有元素/项目。我只需要提要上的最新/最后一项。我怎样才能做到这一点？下面的代码会起作用吗？

```
$x=$xmlDoc->getElementsByTagName('item');
$item_title=$x->item->getElementsByTagName('title')
->item(0)->childNodes->item(0)->nodeValue;
$item_link=$x->item->getElementsByTagName('link')
->item(0)->childNodes->item(0)->nodeValue;
$item_desc=$x->item->getElementsByTagName('description')
->item(0)->childNodes->item(0)->nodeValue; 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T15:46:20.970

我想通了：

```
$x=$xmlDoc->getElementsByTagName('item');
$item_title=$x->item(0)->getElementsByTagName('title')
->item(0)->childNodes->item(0)->nodeValue;
$item_link=$x->item(0)->getElementsByTagName('link')
->item(0)->childNodes->item(0)->nodeValue;
$item_desc=$x->item(0)->getElementsByTagName('description')
->item(0)->childNodes->item(0)->nodeValue; 
```

# asp.net-mvc - 通过 Google 打开 auth 2.0 身份验证后重定向 url 无效

> ID：10364701
> 
> 赞同：3
> 
> 时间：2012-04-28T15:03:22.270
> 
> 标签：asp.net-mvc, asp.net-mvc-3, oauth-2.0

我正在尝试通过 Google Open Auth 2.0 在我的 MVC 3 Web 应用程序中实现身份验证。我已经成功地形成了 URL 请求 URL，它看起来像这样：

[https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/userinfo.email+https://www.googleapis.com/auth/userinfo.profile&redirect_uri= http://localhost:1291/Account/Google/&response_type=token&client_id=MY_APP_ID.apps.googleusercontent.com](https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/userinfo.email+https://www.googleapis.com/auth/userinfo.profile&redirect_uri=http://localhost:1291/Account/Google/&response_type=token&client_id=MY_APP_ID.apps.googleusercontent.com)

我的期望是被重定向到以下 URL：

[http://localhost:1291/Account/Google?access_token=VALUE&token_type=VALUE&expires_in=VALUE](http://localhost:1291/Account/Google?access_token=VALUE&token_type=VALUE&expires_in=VALUE)

但实际上我被重定向到这里：

[http://localhost:1291/Account/Google#access_token=VALUE&token_type=VALUE&expires_in=VALUE](http://localhost:1291/Account/Google#access_token=VALUE&token_type=VALUE&expires_in=VALUE)

唯一的区别在于“#”和“?” 并且没有问号，我看不到查询字符串参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T07:59:12.587

我尝试将“response_type”从“token”更改为“code”，“#”符号成功替换为“？” 现在我可以从查询字符串中提取“代码”。所以，这是我的错。建议将“response_type=token”与客户端 js 一起使用。更多细节在这里：

[https://developers.google.com/accounts/docs/OAuth2Login（Javascript](https://developers.google.com/accounts/docs/OAuth2Login) 响应部分）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T15:49:36.320

我的应用程序中有一个类似的功能。我能看到的唯一区别是`/`你的尾随`redirect_uri`？尝试：

> redirect_uri=http://localhost:1291/Account/Google

# java - Java ME 帮助显示诺基亚教程中的日历画布

> ID：10364705
> 
> 赞同：-2
> 
> 时间：2012-04-28T15:03:28.490
> 
> 标签：java, java-me, calendar, midp, lcdui

我一直在关注以下关于如何在 Java ME 中创建日历小部件的教程。我似乎无法让它工作。

当我运行应用程序时，它只是说它正在后台运行。我想我没有正确初始化它。将位于页面底部的代码放置在哪里以使其显示到java手机屏幕？

教程的链接在这里，除了一些小的变量名称差异之外，代码是相同的。

[http://www.developer.nokia.com/Community/Wiki/Building_a_Java_ME_Canvas_based_calendar/date_picker](http://www.developer.nokia.com/Community/Wiki/Building_a_Java_ME_Canvas_based_calendar/date_picker)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T15:39:08.290

> ...它只是说它在后台运行。我想我没有正确初始化它。

在没有看到您的代码的情况下很难确定，但假设您没有在复制教程代码时引入错误，那么您描述的行为最可能的原因是您没有调用[Display.setCurrent](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Display.html#setCurrent%28javax.microedition.lcdui.Displayable%29 "API 文档")。这确实有资格作为*未正确初始化它*。

在扩展 MIDlet 的类中，确保`startApp`调用`setCurrent`，如下所示：

```
public void startApp() {
    Display.getDisplay(this).setCurrent(
            new CalendarCanvas(this));
} 
```

上面的代码片段中的注释，`CalendarCanvas`假定与您参考的教程相同：

> - [CalendarCanvas.java](http://www.jappit.com/uploads/src/CalendarCanvas.java)：在 Canvas 中使用 CalendarWidget 的示例...

# linux - 分叉和共享页面

> ID：10364707
> 
> 赞同：0
> 
> 时间：2012-04-28T15:03:35.597
> 
> 标签：linux, unix, fork

我在使用 fork 及其在写入系统上的副本时遇到了一些问题。我将创建 params.writersCount 进程，并且在每个进程中我都需要获取其内部 id（从 1 到 params.writersCount）。所以在孩子中，我正在等待父进程，它初始化孩子的内部 id (writers[i] = processId)。然后我可以调用 writerSimulation 并像参数一样传递上下文地址，因为 context.id 现在是该孩子的正确内部 id，因为在写入系统时复制（context.id = j+1 将强制 unix 复制页面，所以每个孩子然后有自己的上下文副本及其内部 id)。但是如果我尝试在 writerSimulation 函数中使用 context.id，我得到 0。我做错了什么？

```
for(int i = 0; i < params.writersCount; i++)
{
    pid_t processId = fork();

    if(!processId)
    {   
        srand((unsigned int)(seconds+getpid()));
        while(!context.id)
        {
            for(int j = 0; j < params.writersCount; j++)
            {   
                if(writers[j] == getpid())
                {   
                    context.id = j+1;
                }
            }
            struct timespec wait = {.tv_sec = 0, .tv_nsec = 500000};
            nanosleep(&wait, NULL);
        }
        int simError = writerSimulation(&context);
        return simError;
    }

    writers[i] = processId;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T16:12:58.780

我并不完全清楚，但看起来你正试图让父母修改孩子中的 writers 数组。那不管用。在分叉之后，父级所做的任何写入都不会在子级中看到，因为写入时复制适用于子级和父级。此外，使用 nanosleep 等待甚至都不可靠。与孩子交流的一种简单方法是在分叉之前打开一个管道，并将其用于同步和传递数据。只需让父级将数据写入管道。孩子在读取时阻塞而不是纳米睡眠，因此同步由读取提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T16:17:21.053

您不能在子级中访问由父级在分叉后分配的值。有几种选择：

*   改变你的整体方法，这样就不需要了 - 依赖于分叉之前可用的信息，或者在它之后的父母和孩子中独立派生的信息。

*   使用一种进程间通信方式——套接字、管道、共享内存等

# surf - 最小化 SURF 提取的交叉点的数量

> ID：10364708
> 
> 赞同：1
> 
> 时间：2012-04-28T15:03:35.997
> 
> 标签：surf, object-detection

我有一个关于 surf 提取的恐惧的问题，我想将它用于对象检测目的我为每个不同的图像获得了大量的交点，我希望将特定数量的特征传递给机器学习。我怎样才能最小化这个交叉点的数量？

谢谢 ...... ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:38:59.430

您是否尝试增加 minHessian 阈值？

# javascript - html 下拉列表将我带到错误的 url

> ID：10364709
> 
> 赞同：0
> 
> 时间：2012-04-28T15:03:51.240
> 
> 标签：javascript, html, asp.net-mvc-3, drop-down-menu

我正在尝试创建一个下拉列表，该列表会将我带到同一页面，但具有最后选择的选项的值。第一次选择项目时，我的代码就可以工作。选择另一个项目后，代码会将我定向到 url/foourl/value 而不是 foourl/value。有任何解决这个问题的方法吗？

```
<select name="DocSelect" onchange="window.location=value" >
@foreach (var x in Model.ListOfDocs)
{
   <option value= "../loandoc/@x.DocumentSetId">@x.DocumentSetName</option>
}
</select> 
```

有任何解决这个问题的方法吗？我尝试了很多方法来解决这个问题，但没有成功。

顺便说一句，foreach 循环返回像这样的选择值

```
<option value= "../loandoc/108">example1</option>
<option value= "../loandoc/123">example2</option> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T15:05:27.073

如果您需要使用另一个值（在斜线之后？）访问相同的*loandoc*页面，也许您可​​以试试这个：

```
<select name="DocSelect" onchange="window.location=this.value">
@foreach (var x in Model.ListOfDocs)
{
   <option value="@x.DocumentSetId">@x.DocumentSetName</option>
}
</select> 
```

# python - 难以理解 python 类中的控制流（在谷歌应用引擎中）

> ID：10364715
> 
> 赞同：5
> 
> 时间：2012-04-28T15:04:22.287
> 
> 标签：python, class, control-flow

伙计们，我在理解 python 类中的控制流方面遇到了一些麻烦，即一步一步地处理代码。鉴于下面的简短代码，我想知道：当调用 MainPage 类时，它只执行该类中的所有内容？以线性顺序？（第一行，第二行之后等）

![在此处输入图像描述](../Images/58840f5554b20847195e7e0451c2da11.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T15:24:24.273

当一个 Python 文件被执行时，文件中的每一条语句都是从上到下执行的。在您的情况下，有六个陈述：

```
from ..
from ..
class MainPage ..
application = ..
def main() ..
if __name__ .. 
```

前两个找到其他 Python 模块，并执行它们的所有语句，这可能只是定义了一堆类，然后使用来自其他模块的值在您的模块中定义一些名称。所以在前两个语句之后，我们已经`webapp`定义`run_wsgi_app`了。

第三条语句定义了类`MainPage`。它通过执行类体内的语句来做到这一点，在这种情况下只有一个： a `def`。请注意，执行`def`语句不会执行函数体中的语句，它只是将这些语句收集到一个命名函数中。当类体结束时，所有定义的名称都成为类的属性。

第四个语句调用`webapp.WSGIApplication`，并将结果分配给`application`。

第五个语句定义了一个名为 的函数`main`。

第六个陈述着眼于名称`__name__`。每次执行 Python 文件时，都会给它一个`__name__`变量。如果文件是正在运行的主要文件，即 Python 开始时使用的文件，则`__name__`值为`"__main__"`. 这个 if 语句是一个习惯用法，意思是“我是主程序吗？” 在这种情况下，它是，所以 if 语句的主体也被执行。

if 的主体只是调用该`main()`函数，该函数本身调用该`run_wsgi_app`函数，将您已经构建的`application`值传递给它。

运行一个 WSGI 应用程序是涉及到的，但基本上相当于，“等到有人访问一个 URL，然后将 URL 映射到一些代码，然后执行代码。” 在您的情况下，您提供了一个将“/”与`MainPage`. 一旦有人访问 / URL，`MainPage`就会创建一个对象，并调用其上的方法。

特别是，因为用于访问 / 的 HTTP 方法是 GET，WSGI 应用程序运行程序调用对象`.get()`上的方法`MainPage`。方法中的语句按`get`顺序执行，将一些数据写入响应。当函数体中没有更多语句时，它会返回。WSGI 应用程序容器将该响应发送回 Web 浏览器！

这个程序永远不会结束，因为 WSGI 应用程序运行器永远循环等待下一次 URL 访问。但如果没有，一旦主文件中的最后一条语句完成，Python 程序就会完成，并且该过程将结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T15:25:54.087

代码不会线性执行。

首先，您定义一个类，该类将在调用某个方法 ( `get`) 时为页面准备数据。这是 的类定义`MainPage`。

然后，你向系统注册这个类，同时告诉它什么时候使用这个类。您可以在以`application = ...`. 那里的代码告诉 webapp 框架`MainPage`在 URL 路径为`/`. 可以想象，您可以在这里为不同的路线注册多个类。请注意，这段代码在`main`调用之前执行了一次。

然后，您定义程序入口点：`main()`. 这是一个简单的：你告诉框架开始运行`application`你构建的。下面的代码`run_wsgi_app`等待请求，在收到请求时检查注册类的 URL 路径，通过调用其`get()`方法从注册类获取响应，并发送响应。当然，这是对那里实际发生的事情的严重过度简化。

最后，在最后一个代码块中调用 main。

总结一下：我们首先调用`main`，调用`run_wsgi_app`，实例化 a`MainPage`并使用结构调用它的`get()`方法`application`。

# php - 文本输出中的斜线

> ID：10364716
> 
> 赞同：1
> 
> 时间：2012-04-28T15:04:26.063
> 
> 标签：php, mysql, mysql-real-escape-string, html-entities

从表单中，我要求用户输入一些文本。我将使用 检索此文本`$_POST['text']`。

用户输入字符串“这是我的文本！”

```
$newText = mysql_real_escape_string($_POST['text']); 
```

现在，在我插入`$newText`数据库后的同一页面上，我想向用户显示文本，并将其用作使用 PHP 的输入文本框的值。

```
// I want to make sure the user hasn't added any unsafe html in their string
$newText = htmlentities($newText);
echo "You've entered: " . $newText . "<br />";
echo "<form action=someaction.php method=post>";
echo "<input type=text value=\"" . $newText . "\">";
echo "</form>"; 
```

输出是：

```
You've entered: It\'s my text!
[It\'s my text!] 
```

如何避免这些斜线，我应该对我的数据做其他事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T15:08:52.253

`mysql_real_escape_string()`顾名思义，您正在传递文本，通过该文本转义字符串，包括撇号。*仅*`mysql_real_escape_string()`用于准备数据以保存到数据库。向用户显示数据时不应使用它。

 *因此，解决方案很简单：删除线并`htmlentities()`仅使用。`mysql_real_escape_string()`当您将字符串保存到数据库时使用（并且仅在那时）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-28T15:12:27.603

仅`mysql_real_escape_string()`在要在查询中使用的变量上使用，因为它会添加斜杠以转义字符串中的某些字符。这对 mysql 很有效，但是当想在页面上使用它时，它看起来会很奇怪。

您可以创建 2 个变量，1 个用于 MySQL，1 个用于显示原始文本。

```
$text = $_POST['text'];
$db_text = mysql_real_escape($text); 
```

另请注意，您应该`strip_slashes()`稍后使用从数据库中获取的数据来删除斜杠。

希望这能澄清一点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-29T06:08:49.753

> 现在在我将 $newText 插入数据库后的同一页面上，我想向用户显示文本

**那就是你做错了。**
HTTP 标准要求在每次成功的 POST 请求后**重定向一个 GET 方法。**
因此，您必须在同一页面上重定向用户，在那里您可以从数据库中读取插入的数据并将其显示给用户。

至于您犯的错误-只需将转义移到更靠近数据库操作的地方，以确保仅将其用于目的（然而，它是强制性的，没有忘记它的风险！）。
理想情况下，您必须使用一些变量来表示查询中的数据，并使用一些处理程序来处理它们。
所以，查询调用可能看起来像

```
DB::run("UPDATE table SET text=s:text",$_POST['text']); 
```

这样一个变量（称为占位符）在哪里`s:text`，它将被替换为`$_POST['text']`值，根据占位符名称中设置的类型正确准备（`s`意思是“字符串”，告诉你的函数转义并引用数据）
所以，所有必要的准备工作将在内部完成，不会破坏源变量。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-28T15:07:45.780

使用 mysql_real_escape_string() 正常保存

当您想以表格形式显示它时：

```
htmlspecialchars(stripslashes($row['text_data'])) 
```

它会成功的。*

# mongodb - 查询 MongoDb 的 key=null 或 exists=false 是否更有效？

> ID：10364719
> 
> 赞同：1
> 
> 时间：2012-04-28T15:04:52.680
> 
> 标签：mongodb

我有一个 MongoDb 集合，其中一些键可能未填充与集合中的所有对象相关。我将要进行查询以查找未填充这些键的所有对象。

会不会更好

*   总是在对象中包含键并用 null 填充它？ `{'x' : 'banana', 'y' : null}`或者
*   不要包含不相关的密钥`{'x' : 'banana'}`

我知道我可以用任何一种方式查询我想要的结果（见[这里](http://www.mongodb.org/display/DOCS/Querying+and+nulls)），我只是想知道哪个被认为是“最佳实践”以及为什么。

请注意（如果相关）该集合有大约 10 个“必需”字段和 3 个这些“可选”字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T19:42:41.893

我会说这取决于您的应用程序对该集合中的文档所做的语义。通过不存储`y: null`. 如果你确实存储了，`y: null`你必须记住技术上存在，因此你应该以某种方式`y`查询s。`null`如果 Mongo 上面的层不在乎，那么我会选择不存储空字段，就像@Derick 推荐的那样。但是，如果它确实关心，并且您发现使用`null`s 中的`y`s 更容易，那么就去做吧。

**更新**您关于有效性的问题。如果你做的一切都是正确的，那么你正在工作的数据集适合 RAM。话虽如此，除非您按`y`. 在这种情况下，行为可能会有所不同，但找出答案的最佳方法是运行一些测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T19:36:38.227

我会去不存储空字段。但是，这在一定程度上取决于您将在此集合上运行哪种查询。如果你能详细说明，我会更新答案。

# php - 无限循环创建 90,000 个随机文件..但它只创建 10 个？

> ID：10364722
> 
> 赞同：0
> 
> 时间：2012-04-28T15:05:17.567
> 
> 标签：php, file, loops, infinite

当没有想法时，你应该转向stackoverflow。所以这就是我正在做的:) 我需要用 90,000 个随机文件（不需要内容）填充一个目录，但由于某种原因，我的无限循环脚本只创建了大约 10 个文件（从 1 到 10 个），仅此而已。我究竟做错了什么？

```
 <?
 $counter = 1;
 while ($counter < 90000) {
 $rand = rand(1, 9999999999999999999999);
 print (" counter = " . $counter . "<BR>");
 $ourFileName = "$rand";
 $ourFileHandle = fopen($ourFileName, 'w') or die("can't open file");
 fclose($ourFileHandle);
 $counter++;
 }
 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T15:10:50.713

原因如下：

```
php > $x = 9999999999999999999999;
php > echo $x;
1.0E+22
php > echo rand(1, 9999999999999999999999);
1
php > echo rand(1, 9999999999999999999999);
1
php > echo rand(1, 9999999999999999999999);
1
php > echo rand(1, $x);
1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T17:01:25.170

```
$NoOfFiles = 10;

for($i = 0; $i < $NoOfFiles; $i++){
    $FileHandler = fopen($i.".txt", 'w') or die("can't open file");
    fclose($FileHandler);
    echo "File '". $i.".txt' has been created<br/>";
} 
```

只需将 $NoOfFiles 变量更改为您要创建的文件数量...

# c# - 如何结合 IF 和 For/Foreach 来检查多个项目？

> ID：10364726
> 
> 赞同：0
> 
> 时间：2012-04-28T15:05:39.777
> 
> 标签：c#, if-statement, for-loop, foreach

我正在尝试使用 If 语句编写一个函数，该语句检查 Defenition 数组中的一个单词，如果其中一个是正确的，它运行一个“成功”无效，否则它“失败”。问题是，如何正确组合 If 和 For 语句？（它还需要检查它的属性是否为 Null...）

这一切都适用于愚蠢的“线性”编码：

```
private void Check()
{
    if ((textBox2.Text == Heb[Line].Def[0] || textBox2.Text == Heb[Line].Def[1] || textBox2.Text == Heb[Line].Def[2] || textBox2.Text == Heb[Line].Def[3] || textBox2.Text == Heb[Line].Def[4])&& textBox2.Text != "")
    {
        Success();
    }
    else
    {
        Fail();
    }
} 
```

但我相信有更好、更好的表达方式。

我想使用“foreach”方法来检查 def[]。

我想它应该看起来像：

```
if (foreach(int i in Heb[line].Def{(if Heb[Line].Def[i]==textBox2.Text})) something something... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T15:10:59.100

```
if(!string.IsNullOrEmpty(textBox2.Text) && Heb[Line].Def.Contains(textBox2.Text))
{ 
    Success(); 
}
else
{
    Fail();
} 
```

# jquery - 带有 ul/li 的 jQuery 动画搜索框

> ID：10364729
> 
> 赞同：1
> 
> 时间：2012-04-28T15:05:56.610
> 
> 标签：jquery, css

你能教我如何模仿[http://societeperrier.com/](http://societeperrier.com/)这样的导航栏吗？我尝试了很多方法，但都是徒劳的。我使用 [http://thefinishedbox.com/freebies/scripts/jquery-animated-search/](http://thefinishedbox.com/freebies/scripts/jquery-animated-search/)作为我的搜索框。当我把它和我的 ul/li 导航栏放在一起时。它为后滑动效果预先留下空白。正如你在法国巴黎银行看到的那样。单击搜索框后，li 项目将自动重新排列。

对不起，我的英语很差，感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T15:46:59.783

这是我的做法，这里是[jsfiddle](http://jsfiddle.net/GsGHs/)。

```
$("#search").focus(function(){

    // animate right 100px, you can change the values after
    $(this).animate({'width' : "200px" }, 200);

});

$("#search").blur(function(){

   // change back after blur is fired
   $(this).animate({'width' : "100px" }, 200);

}); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T06:09:00.140

我使用了相同的 jQuery 插件并遇到了类似的问题。为了解决这个问题，我从 css 中删除了字段集的宽度，并在 js 文件中的“焦点”事件上应用了宽度。添加的代码如下：

```
$('#searchForm fieldset').animate({width: '240px'}, 300); 
```

在“模糊”事件中，我们还需要重新调整父元素的大小。所以我在模糊事件中添加了以下行：

```
$('#searchForm fieldset').animate({width: '152px'}, 300); 
```

您可以设置您选择的宽度。我不确定它是否完美，但它对我有用。

# c - 试图在c中将结构的一部分从tcp服务器发送到客户端

> ID：10364732
> 
> 赞同：0
> 
> 时间：2012-04-28T15:06:05.623
> 
> 标签：c, sockets, network-programming

我正在尝试将结构的一部分传递给客户端并且很难使用它。我使用以下打印语句测试了我的案例 1 条件：

```
printf("%d %s", data[i].course, data[i].Dept); 
```

这没有问题。现在我想做的是通过套接字发送它。我的发送声明是：

```
send(connected, send_data, strlen(send_data), 0); 
```

现在我尝试了以下陈述：

```
send_data = data[i].couurse;
strcpy(send_data, data[i].course);
send_data = atoi(data[i].course); 
```

并且要知道是否有效，都没有奏效。我知道必须有一种方法，并希望有人能告诉我如何。我已经包含了代码的相关部分：

```
int switchInput;
int i = 0;
int connected;
int sock;
int bytes_received;
int sin_size;
int true = 1;
int tempCourse = 0;
char send_data[BUF];
char recv_data[BUF];
char tempDept[5];
char tempDay[1];
char tempTime[1];
FILE *filePointer;
sched_record data[MAX_RECORD];
filePointer = fopen (BINFILE, "rb"); 
```

和：

```
 while(1) {

        bytes_received = recv(connected, recv_data, BUF, 0);
        recv_data[bytes_received] = '\0';
        switchInput = atoi(recv_data);

        switch(switchInput) {

        case 1:

            fread(data, sizeof(sched_record), MAX_RECORD, filePointer);
            fclose(filePointer);
            char send_data[] = "Enter Department Name";
            send(connected, send_data, strlen(send_data), 0);
            bytes_received = recv(connected, recv_data, BUF, 0);
            recv_data[bytes_received] = '\0';
            strcpy(tempDept, recv_data);
               for (i=0; i<MAX_RECORD; i++){
                if ((strcmp(tempDept, data[i].Dept)==0) && tempCourse != data[i].course){
                        send(connected, &data[i].Dept, sizeof(data[i].Dept), 0);
                        tempCourse = data[i].course;
                        send(connected, &tempCourse, sizeof(tempCourse), 0);
                }
            }

        break; 
```

在这种特殊情况下，我需要发送课程和部门。还有更好的方法吗？这似乎有点乱。如果是这样，你能告诉我一个更简化的版本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T16:02:09.523

~~您一定到处都有编译错误。~~

你不想`atoi`。你想要~~[itoa](http://www.cplusplus.com/reference/clibrary/cstdlib/itoa/)~~或[sprintf](http://ideone.com/Mgd9y)

但这可能是您真正想要的：

```
tempCourse = data[i].course;
send(connected, &tempCourse, sizeof(tempCourse), 0); 
```

（您提供的地址`tempCourse`变量的地址及其在内存中的字节大小。请参阅[发送](http://linux.die.net/man/2/send)）

（虽然你可能需要担心[网络字节顺序](http://www.gnu.org/software/libc/manual/html_node/Byte-Order.html)）

或者，如果您希望将`.course`struct 成员转换为字符串，请尝试以下操作：

```
sprintf(send_data, "%d", data[i].course);
send(connected, send_data, strlen(send_data), 0); 
```

# javascript - 验证阿拉伯字符

> ID：10364737
> 
> 赞同：0
> 
> 时间：2012-04-28T15:06:37.313
> 
> 标签：javascript, html, arabic

我想验证文本 html 以使其仅接受阿拉伯字符。如何使用 java 脚本进行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:17:02.483

尝试这样的事情：

```
function arabicOnly(e){
  var unicode=e.charCode? e.charCode : e.keyCode
  if (unicode!=8){ //if the key isn't the backspace key (which we should allow)
      if (( unicode<48 || unicode>57) && (unicode < 0x0600 || unicode > 0x06FF)) //if not a number or arabic
        return false //disable key press
  }
} 
```

取自[此处并根据](http://www.javascriptkit.com/javatutors/javascriptkey3.shtml)[此处](http://en.wikipedia.org/wiki/Arabic_characters_in_Unicode)的信息进行了改编

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T15:23:20.573

1.  由于 JavaScript 缺少与某些脚本匹配的内置类，因此您需要查阅[Unicode 代码图表](http://www.unicode.org/charts/)并选择所需的范围。我在阿拉伯语方面不是那么专业，所以我猜你至少需要阿拉伯语 (600-6ff)、阿拉伯语补充 (750-77f) 和阿拉伯语扩展 A (8a0-8ff)。
2.  构造一个匹配仅由这些字符组成的字符串的正则[表达式：](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)`/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF]$/`
3.  如果您有一个或使用许多 JavaScript 表单验证库中的任何一个（只需在任何引擎中搜索这些词以快速找到一个），请在您自己的验证函数中使用它。

此外，如果您使用的库允许否定检查，您可以反转范围以避免扫描整个字符串并在第一个错误字符上保释：`/[^\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF]/`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T15:14:49.470

您需要使用正则表达式。
阅读：
[http ://www.javascriptkit.com/javatutors/redev3.shtml](http://www.javascriptkit.com/javatutors/redev3.shtml)

# .htaccess - 如何使用 htaccess 修改子域目录

> ID：10364738
> 
> 赞同：0
> 
> 时间：2012-04-28T15:06:37.510
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我有这样的东西。

[http://www.mydomain.com/page.php?s=database&name=page](http://www.mydomain.com/page.php?s=database&name=page)

我如何修改它以使其成为。

**http://www.database.mydomain.com/page/**

我使用 (database.mydomain.com) 成功地将其映射为如下子域格式

```
RewriteCond %{HTTP_HOST} ([^.]+)\.localhost
RewriteRule ^(.*)$ s/index.php?s=%1 
```

不知道如何进一步进行。这就是我所拥有的：

```
RewriteCond %{HTTP_HOST} ([^.]+)\.localhost\([^.]+)\
RewriteRule ^(.*)$ s/page.php?name=%1&s=%2 
```

感谢任何专家的帮助。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T09:36:01.293

你不需要重写子域
只重写请求uri就可以了。

# cakephp - CakePHP 2.1 创建选择框

> ID：10364746
> 
> 赞同：0
> 
> 时间：2012-04-28T15:07:44.493
> 
> 标签：cakephp, drop-down-menu, cakephp-2.1

我正在尝试添加以下样式..

```
<div class="rowElem noborder">
        <label>Language:</label>
        <div class="formRight noSearch">
          <select name="select2" class="chzn-select">
            <option value="opt1">Choose the Language</option>
            <option value="opt2" selected="selected">Kannada</option>
            <option value="opt3">Telugu</option>
            <option value="opt4">Tamil</option>
          </select>
        </div>
        <div class="fix"></div>
</div> 
```

但是在 cakephp 中，我有这段代码

```
<?php echo $this->Form->input('language_id', array('class' => 'chzn-select' )); ?> 
```

请给我解决方案..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T20:26:27.300

如果我明白你在问什么，这就是你需要做的。

在您的控制器中，您将为选择框创建选项数组：

```
$this->set('languageOptions', array('opt1' => 'Choose Language', 'opt2' => 'Kannada', 'opt3' => 'Telugu', 'opt4' => 'Tamil')); 
```

然后在视图中创建表单：

```
<div class="rowElem noborder">
    <label for="language_id">Language:</label>
    <?php echo $this->Form->input('language_id', array('class' => 'chzn-select', 'options' => $languageOptions, 'label' => false, 'div' => array('class' => 'formRight noSearch'))); ?>
    <div class="fix"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T08:30:24.323

```
$langs = array('opt1' => 'Choose Language', 'opt2' => 'Kannada', 'opt3' => 'Telugu', 'opt4' => 'Tamil');

$this->set(compact('langs')); // if you set options from controller 
```

然后在视图中试试这个：

```
$this->Form->input('language_id', array(
                                      'type' => 'select',
                                      'options' => $langs,
                                      'selected' => 2 // suppose default select Kannada
                                  )
                  ); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-10-03T09:09:36.747

Cake Php 选择选项代码

语言：Form->input('language_id', array('class' => 'chzn-select', 'options' => $languageOptions, 'label' => false, 'div' => array('class' = > 'formRight noSearch'))); ?>

# javascript - HTML 按钮 onload 提交

> ID：10364749
> 
> 赞同：2
> 
> 时间：2012-04-28T15:08:03.477
> 
> 标签：javascript, button

我在下面有一个按钮示例

```
<button id="startrunning">go</button> 
```

我没有在同一页面上使用任何表单或任何东西来检测它的点击。当我点击它时，它会像我想要的那样工作。我想看看页面加载时它会自动提交它自己有没有办法？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T15:13:57.460

jsFiddle：http: [//jsfiddle.net/QEu84/10/](http://jsfiddle.net/QEu84/10/)

```
<script type="text/javascript">
    function submit()
    {
        document.getElementById("startrunning").click(); // Simulates button click
        document.submitForm.submit(); // Submits the form without the button
    }
</script>

<body onload="submit()">
    <form id="submitForm">
        <button id="startrunning">go</button>
    </form>
</body> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T15:13:42.710

您可以在页面加载时自动单击它，使用下面的代码，但是您需要一个表单来提交一些东西（您提交一个表单，而不是一个按钮）

```
<body onLoad="document.getElementById('startrunning').click();"> 
```

# android - android-support-v4 jar 是否会与编译时引用的 android 应用程序捆绑在一起？

> ID：10364751
> 
> 赞同：1
> 
> 时间：2012-04-28T15:08:18.013
> 
> 标签：android

我在android上创建了一个应用程序，在编译我的应用程序时引用了“android-support-v4.jar”，所以我想知道生成的apk是否会与“android-support-v4.jar”捆绑在一起？ , 如果它与 jar 文件捆绑在一起，那么我如何确定它是否被捆绑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T15:13:06.500

是的，它将被捆绑。

您使用的课​​程`android-support-v4.jar`最终必须成为您`.apk`的一部分。如果它们不是您的应用程序将崩溃，因为它引用了不存在的代码。如果该应用程序有效，则您已成功包含它。

编辑：apk 中没有 .jar。支持类直接与您的类一起嵌入到`classes.dex`.

# django - Celery 和 Selenium 的 Django 测试运行程序

> ID：10364760
> 
> 赞同：0
> 
> 时间：2012-04-28T15:08:54.670
> 
> 标签：django, selenium, celery, django-celery

[Django-celery](http://ask.github.com/django-celery/)希望我设置

```
TEST_RUNNER = 'djcelery.contrib.test_runner.CeleryTestSuiteRunner' 
```

django [-selenium](https://github.com/dragoon/django-selenium)希望我设置

```
TEST_RUNNER = 'django_selenium.selenium_runner.SeleniumTestRunner'. 
```

我怎样才能同时拥有两者，即在本地运行 celery 任务的测试和使用 selenium 控制浏览器的测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T15:15:32.067

您可能可以定义自己的测试运行器，从它们继承

（看两者的出处，celery 的其实只是设置了一些设置）

所以制作一些文件`myapp.test_runner`，例如

```
from djcelery.contrib.test_runner import CeleryTestSuiteRunner
django_selenium.selenium_runner import SeleniumTestRunner

class MyRunner(CeleryTestSuiteRunner, SeleniumTestRunner):
    pass 
```

然后设置

```
TEST_RUNNER = 'myproject.myapp.test_runner.MyRunner' 
```

# php - 我的网站无法在 IE 中打开

> ID：10364763
> 
> 赞同：0
> 
> 时间：2012-04-28T15:09:18.463
> 
> 标签：php, css, internet-explorer

我的网站没有在 IE 中打开。我知道 CSS 不兼容，这就是为什么如果 UserAgent 属于 Internet Explorer，我添加以下代码以重定向到静态页面。检测 IE 和重定向的代码如下：

网站链接是：

[http://adnansiddiqi.com/main.html](http://adnansiddiqi.com/main.html)

[http://pastebin.com/MCRbsrmi](http://pastebin.com/MCRbsrmi)

头文件包含在 main.php 之上

请指导！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T15:28:16.227

现在您已经让网站正常运行，我们终于收到了一条错误消息：

> 警告：无法修改标头信息 - 标头已由第 15 行 /home/adnansid/public_html/header.php 中的（输出开始于 /home/adnansid/public_html/main.php:10）发送

请参阅下面列表中的第 6 项。`header()`在您已经发送输出后不要调用。您必须在任何和所有输出之前调用它。

* * *

以下是您需要修复/解决/尝试的一系列问题：

1.  两个未定义的变量`isMobileSafari`， 和`isOldMobileSafari`。
2.  你`<title>`需要在你的`<head>`.
3.  没有提供文档类型。
4.  您在开始`<body>`标签之后没有输出任何内容。
5.  检查以确保您启用了短标签（尝试使用长格式`<?php ... ?>`）
6.  **`header()`已经输出内容后不要调用。**
7.  检查您的日志文件是否有任何明显的消息。

我尝试在 Chrome 中访问同一页面，以为您可能破坏了用户代理嗅探代码，但我发现在 Chrome 中，在开始`<body>`标记之后也没有输出任何内容。

我会尝试诊断你的身体没有被输出的原因，但你没有提供足够的代码让我们这样做。请为我们提供更多信息以进一步帮助您。

快速的解决方案是避免用户代理嗅探代码，而是[检测特征](https://stackoverflow.com/questions/10354577/detect-browsers-older-than-two-years/10354618#10354618)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T15:20:13.343

我认为`JavaScript`抛出了一个错误

```
da1a2063-40eb-4efd-ae4b-c50a8eea8067.js, line 7 character 117 
```

可能是这个脚本不支持IE，你用过什么**API**吗？.. 可能是一种解决方法或有可用的修复程序

# android - 在android应用中动态选择一个视图

> ID：10364765
> 
> 赞同：0
> 
> 时间：2012-04-28T15:09:26.120
> 
> 标签：android, android-layout, view

我有一个 android 应用程序，我希望它有两个彼此相似的视图。例如 ：

```
 <Button
    android:id="@+id/ok"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:text="OK" /> 
```

和

```
 <Button
    android:id="@+id/ok"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="OK" /> 
```

请注意，唯一的变化是我删除了 centerHorizo​​ntal 线。但这是一个简化的例子。

现在，我想创建一个应用程序，有时（例如使用随机函数）使用视图 A，有时使用视图 B。

是否可以在运行时执行此“视图切换”？是否可以使用两个视图构建这个应用程序（注意按钮应该有相同的 ID，我不想实现两次逻辑）？

多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T15:59:05.363

我想这样做的唯一方法是：

*   将每个按钮放在自己的布局文件中。
*   根据您的函数结果膨胀相应的值。
*   将其附加到视图。

示例代码：

**button_a.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<Button xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ok"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:text="OK" /> 
```

**button_b.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<Button xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ok"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="OK_2" /> 
```

**您的活动：**

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    LayoutInflater inflater = LayoutInflater.from(this);

    Button button;

    if (Math.random() > 0.5) {
        button = (Button) inflater.inflate(R.layout.button_a, null);
    } else {
        button = (Button) inflater.inflate(R.layout.button_b, null);
    }

    /* ...
       Set listeners to the button and other stuff 
       ...
    */

    //find the view to wich you want to append the button
    LinearLayout view = (LinearLayout) this.findViewById(R.id.linearLayout1);

    //append the button
    view.addView(button);
} 
```

如果您希望这种情况动态发生（即不是在 中`onCreate`，而是在一些用户输入之后），您总是可以从布局中删除按钮，并为一个新的随机选择的按钮充气。

希望这可以帮助！

# android - 使用 android avd 管理器启动虚拟机时出现问题

> ID：10364767
> 
> 赞同：0
> 
> 时间：2012-04-28T15:09:29.903
> 
> 标签：android, eclipse, virtual-machine, avd

> **可能重复：**
> [使用 Eclipse 在 Android 虚拟机中启动 Android java 项目时出现问题](https://stackoverflow.com/questions/10387793/problems-launching-android-java-project-in-a-android-virtual-machine-using-eclip)

我已经安装并设置了 Eclipse 和插件 ADT，以便使用 Android SDK。到目前为止，一切都很好。但是，当我尝试为我选择的任何 android 平台（例如：android 3.2）启动 VM（虚拟机）时，我只是将皮肤与键盘控制台和电话按钮一起启动，它似乎启动到一个状态并且然后什么都不做，只是在 vm 主屏幕上显示 android 徽标，仅此而已 - 没有更多！，没有 VM 功能！，这是怎么回事？我错过了一些步骤吗？请帮忙...

在每种情况下，有时要等待超过 10 分钟才能启动模拟器。

我启动/运行了一个 Android 项目测试样本；安装适用于 Android 的 ADT 插件后，来自 Eclipse 环境的“hello world”这些是我在控制台 ddms 中显示的错误消息：

> [2012-04-30 14:31:20 - HelloAndroid] ------------------------------ [2012-04-30 14:31:20 - HelloAndroid] Android 发布！[2012-04-30 14:31:20 - HelloAndroid] adb 运行正常。[2012-04-30 14:31:20 - HelloAndroid] 执行 com.example.helloandroid.HelloAndroidActivity 活动启动 [2012-04-30 14:31:20 - HelloAndroid] 自动目标模式：启动具有兼容 AVD 'leighs_basic_hardware_secound_virtual_device 的新模拟器' [2012-04-30 14:31:20 - HelloAndroid] 使用虚拟设备“leighs_basic_hardware_secound_virtual_device”启动新模拟器 [2012-04-30 14:31:40 - 模拟器] 警告：未找到 DNS 服务器 [2012-04- 30 14:31:52 - 仿真器] 仿真器：仿真器窗口不在视野范围内并重新定位 [2012-04-30 14:31:52 - 仿真器] [2012-04-30 14:31:53 - HelloAndroid] 新仿真器成立：emulator-5554 [2012-04-30 14:31:53 - HelloAndroid] 等待 HOME ('android.process.acore') 启动... [2012-04-30 14:49:03 - HelloAndroid] HOME在设备“emulator-5554”上启动 [2012-04-30 14:49:03 - HelloAndroid] 将 HelloAndroid.apk 上传到设备“emulator-5554”[2012-04-30 14:49:03 - HelloAndroid] 安装 HelloAndroid .apk ... [2012-04-30 14:51:38 - HelloAndroid] 无法在设备 'emulator-5554 上安装 HelloAndroid.apk！[2012-04-30 14:51:38 - HelloAndroid] (null) [2012-04-30 14:51:39 - HelloAndroid] 发布已取消！apk 到设备 'emulator-5554' [2012-04-30 14:49:03 - HelloAndroid] 正在安装 HelloAndroid.apk... [2012-04-30 14:51:38 - HelloAndroid] 无法安装 HelloAndroid.apk设备 'emulator-5554! [2012-04-30 14:51:38 - HelloAndroid] (null) [2012-04-30 14:51:39 - HelloAndroid] 发布已取消！apk 到设备 'emulator-5554' [2012-04-30 14:49:03 - HelloAndroid] 正在安装 HelloAndroid.apk... [2012-04-30 14:51:38 - HelloAndroid] 无法安装 HelloAndroid.apk设备 'emulator-5554! [2012-04-30 14:51:38 - HelloAndroid] (null) [2012-04-30 14:51:39 - HelloAndroid] 发布已取消！

除了我的模拟器上显示的 Android 徽标外，我什么都没有。我尝试了各种平台模拟器 - 它们都没有执行！

在检查运行配置菜单中擦除的用户数据后，我在测试运行中收到的第二批错误是：结果

> ：[2012-04-30 17:20:27 - Emulator] 分配内存失败：1455 [2012-04-30 17:20:27 - Emulator] [2012-04-30 17:20:27 - Emulator] 这个应用程序已请求运行时以不寻常的方式终止它。[2012-04-30 17:20:27 - Emulator] 请联系应用程序的支持团队以获取更多信息。

如果有人想检查，我的计算机使用 Novabench 的基准测试结果是：

> 30/04/2012 17:45:59 Microsoft Windows 7 Starter Intel Atom N550 1.50GHz @ 1500 MHz 显卡：Intel(R) Graphics Media Accelerator 3150
> 
> 1014 MB 系统 RAM（分数：78）- RAM 速度：1610 MB/s
> 
> CPU 测试（分数：70） - 浮点运算/秒：24110532 - 整数运算/秒：43813828 - MD5 哈希生成/秒：159380
> 
> 图形测试（分数：1） - 每秒 3D 帧数：3
> 
> 硬件测试（得分：6） - 主分区容量：87 GB - 驱动器写入速度：14 MB/s

# c# - 使用 RandomNumberGenerator 类和 base 64 编码的组合来生成密码有什么缺点吗？

> ID：10364772
> 
> 赞同：0
> 
> 时间：2012-04-28T15:10:32.493
> 
> 标签：c#, .net, random

在我的网络服务中，我需要生成强密码并且可以表示为字符串。目前我使用[`System.Security.Cryptography.RandomNumberGenerator`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.randomnumbergenerator.aspx)并生成一个足够大（假设它真的足够大）的随机字节数组，然后使用 base 64 对其进行编码并将其返回给用户。

这样我就有了一个随机密码，它是使用适合加密的 PRNG 生成的（不是 class `Random`，请参阅[这个问题](https://stackoverflow.com/q/3307275/57428)以了解为什么 class`Random`在这里不可以的详细信息）并且可以表示为字符串并在电子邮件中发送，如图所示在界面中或由用户键入或复制粘贴。

从安全的角度来看，这个方案有什么本质上的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T15:16:25.433

从安全的角度来看，这个方案是否存在固有的错误，我认为通过电子邮件发送密码本身就是一种安全风险。即使电子邮件在传输过程中被加密，它仍然会存储在您无法控制的介质上。

此外，您生成的密码类型不会被用户记住，这使得它们更有可能被写在便利贴或类似的东西上，供所有人查看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T17:24:21.863

*Random*和RandomNumberGenerator类基本上都是*伪随机数生成器*，并且由于它们基于算法，​​因此它们的输出的随机性是有限制的 *。*

 *但是与*Random*相比，*RandomNumberGenerator*类被认为是*加密安全的伪随机数生成器*，因为它使用了许多其他环境参数（http://en.wikipedia.org/wiki/CryptGenRandom）来确保随机性。一些参数是：

*   当前进程ID
*   当前线程ID
*   自引导时间以来的滴答计数
*   当前时间
*   各种高精度性能计数器
*   用户环境块的 MD4 哈希
*   高精度内部 CPU 计数器

请浏览以下关于随机性的有趣阅读链接：http: [//www.codinghorror.com/blog/2006/11/computers-are-lousy-random-number-generators.html](http://www.codinghorror.com/blog/2006/11/computers-are-lousy-random-number-generators.html)

* * *

对于正常使用场景，例如在您的情况下生成密码，使用*RandomNumberGenerator*类就足够了（http://msdn.microsoft.com/en-us/library/system.random.aspx）：

*“例如，要生成适合创建随机密码的加密安全随机数，请使用派生自 System.Security.Cryptography.RandomNumberGenerator 的类，例如 System.Security.Cryptography.RNGCryptoServiceProvider。”**

# ios - MonoTouch 中的简单融合图不起作用

> ID：10364773
> 
> 赞同：1
> 
> 时间：2012-04-28T15:10:35.543
> 
> 标签：ios, uiwebview, mono, xamarin.ios, fusioncharts

我正在尝试在我的 MonoTouch 项目中使用`UIWebView`. 我添加了必要的插座并通过使用 loadrequest 加载 url 并`loadHtmlString`格式化简单的文本行进行了测试。这工作正常。我什至使用下面的代码测试了 fusionchart 在我的浏览器上是否正常工作，并且确实如此。

我的 MonoTouch 项目中有一个名为“charts”的文件夹，其中包含 Column3d.swf、jquery.min.js、FusionCharts.js、FusionCharts.HC.js 和 FusionCharts.HC.Charts.js。

在我的

*   ViewDidLoad

    ```
    string htmlString = "<html>
                         <head>
                         <script type=\"text/javascript\"src=\"Charts/jquery.min.js\">
                         </script>
                         <script type=\"text/javascript\" src=\"Charts/FusionCharts.js\">
                         </script>
                         <script type=\"text/javascript\" src=\"Charts/FusionCharts.HC.js\">
                         </script>
                         <script type=\"text/javascript\" src=\"Charts/FusionCharts.HC.Charts.js\">
                         </script>
                         </head>
                         <body>
                         <div id=\"chartContainer\">FusionCharts will load here!
                         </div>
                         <script type=\"text/javascript\"> var myChart = new FusionCharts( \"Charts/Column3D.swf\", \"myChartId\", \"400\", \"300\", \"0\", \"1\" );myChart.setXMLUrl(\"Charts/Data.xml\");
                        myChart.render(\"chartContainer\");
                         </script>
                         </body>
                         </html>";

    this.webView.LoadHtmlString (htmlString, new NSUrl ("./Charts", true));

        /*string htmlString = "<html><head></head><body><span style=\"font-weight: bold;\">This</span> " +
     "<span style=\"text-decoration: underline;\">is</span> <span style=\"font-style: italic;\">some formatted</span> " +"<span style=\"font-weight: bold;text-decoration: underline;\">text!</span><br></body></html>";*/  //works

        //this.webView.LoadHtmlString (htmlString, null);  //works 
    ```

*   数据.xml

    ```
    <chart caption='Weekly Sales Summary'
    xAxisName='Week' yAxisName='Amount' numberPrefix='$'> 
    <set label='Week 1' value='14400' /> 
    <set label='Week 2' value='19600' /> 
    <set label='Week 3' value='24000' /> 
    <set label='Week 4' value='15700' /> 
    </chart> 
    ```

有人可以解释我怎样才能让它工作吗？提前致谢。

编辑：我也试过

```
 string htmlString = "<html><head> <title>Creating Pure JavaScript chart</title><script type=\"text/javascript\" src=\"charts/FusionCharts.js\"></script></head> <body><div id=\"chartContainer\">FusionCharts will load here!</div> <script type=\"text/javascript\">FusionCharts.setCurrentRenderer('javascript');var myChart = new FusionCharts( \"charts/Column3D.swf\", \"myChartId\", \"400\", \"300\", \"0\", \"1\" );myChart.setXMLData(\"<chart><set label='Data1' value='1' /></chart>\"); myChart.render(\"chartContainer\"); </script></body> </html>"; 
```

我强制渲染器使用 javascript 并在字符串中设置图表参数无济于事。任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:51:37.467

我解决了我的问题，并认为如果有人遇到类似问题，我会发布它。

我做的第一件事是右键单击我的每个 javscript 文件，即 FusionCharts.js、FusionCharts.HC.js 和 FusionCharts.HC.Charts.js，并将它们的构建类型设置为内容。

然后我告诉 Monotouch，图表的构建路径将包含在图表文件夹中，方法是声明

```
string path = NSBundle.MainBundle.BundlePath + "/Charts/"; 
```

由于我声明我将在 Charts 文件夹中查找相关文件，因此我必须通过从所有**“src”**中删除“charts”关键字引用来修改我的 htmlString，如下所示（因为我们已经在 lo.

```
string htmlString = "<html>
                 <head>
                 <script type=\"text/javascript\" src=\"jquery.min.js\">
                 </script>
                 <script type=\"text/javascript\" src=\"/FusionCharts.js\">
                 </script>
                 <script type=\"text/javascript\" src=\"/FusionCharts.HC.js\">
                 </script>
                 <script type=\"text/javascript\" src=\"FusionCharts.HC.Charts.js\">
                 </script>
                 </head>
                 <body>
                 <div id=\"chartContainer\">FusionCharts will load here!
                 </div>
                 <script type=\"text/javascript\"> var myChart = new FusionCharts(\"Column3D.swf\", \"myChartId\", \"400\", \"300\", \"0\", \"1\"          );myChart.setXMLUrl(\"Charts/Data.xml\");
                myChart.render(\"chartContainer\");
                 </script>
                 </body>
                 </html>"; 
```

然后我调用 loadHtml 字符串方法，如下所示，第二个参数指向包含 javascript 文件的路径。

```
this.webView.LoadHtmlString(htmlString, new NSUrl(path, true)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T16:01:02.637

> 我什至使用下面的代码测试了 fusionchart 在我的浏览器上是否正常工作，并且确实如此。

您是否使用运行 Safari 的 iOS 设备对此进行了测试？

> 包含 Column3d.swf 的项目，

这看起来像一个**Flash**文件，而 iOS（和 WebKit）不**支持**Flash。

该[网站](http://www.fusioncharts.com/products/suite/)暗示了 HTML5 版本 - 因此，如果它们支持无闪存浏览器，那么您应该能够使用 MonoTouch（或 iOS 中的任何东西）使用 FusionChart 做您想做的事情。否则，您可能需要查看其他图表产品（或服务器端解决方案）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T06:23:32.160

FusionCharts 发布了一篇博文，展示了如何在 iOS 设备中获取 HTML5 图表。

在这里看看 - [http://blog.fusioncharts.com/2012/02/create-charts-for-iphone-and-ipad-apps-using-fusioncharts-xt/](http://blog.fusioncharts.com/2012/02/create-charts-for-iphone-and-ipad-apps-using-fusioncharts-xt/)

# javascript - 来自数据库数组的简单 Javascript 幻灯片

> ID：10364777
> 
> 赞同：0
> 
> 时间：2012-04-28T15:11:24.033
> 
> 标签：javascript, jquery, ajax

我必须使用存储在数据库中的图像路径创建幻灯片，并使用 PHP 创建数组，并使用 JQuery ajax 函数调用它。我可以成功调用数组，但是无法让 Javascript 幻灯片正常工作。这是我的脚本：

```
window.onload = slideshow(0);

var i;

function slideshow(dir) {

var d = dir;
i =+ d;

$.ajax({
    url: "comiccheck.php",
    datatype: "json",
    success: function(data, textStatus, xhr) {
        data = JSON.parse(xhr.responseText);
        if(i < 0) {
            i = data.length - 1;
        }
        var comic = data[i];
        $('#comic').replaceWith("<img id='comic' src='" + comic + "' alt='comic' />");  
    }
});
} 
```

当用户单击箭头按钮时，函数 slideshow(dir) 在 HTML 中被调用，返回 1 或 -1，具体取决于方向。现在按钮只会在每个方向上推进图像一次，但不会进一步。如果您对这个问题有任何问题或意见，请告诉我，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T15:27:04.823

是`i =+ d`有意的吗？不应该`i += d`吗？

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-28T15:19:50.470

尝试`window.onload = slideshow(0);`在函数声明之后放置，您不能在声明之前调用函数。

# ruby-on-rails - 在 ruby 中创建一个简单的 html 页面

> ID：10364778
> 
> 赞同：0
> 
> 时间：2012-04-28T15:11:56.267
> 
> 标签：ruby-on-rails, ruby

按照 ruby​​ 教程，我正在尝试创建一个简单的 html 页面。
我需要一个控制器，我认为用于一些演示操作而不是 DB。
我以为我会创建一个模型、控制器和视图，但后来我看到了

```
rails generate model mainMenu freeData1:string freeData2:string 
```

创建数据库脚本。
为了实现一个不需要 db 的简单托管 html 页面，我应该创建什么？
只有控制器？最佳做法是什么？

我应该在其中添加哪些方法才能显示？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T15:20:46.383

是的，您只需要一个页面控制器，该控制器还将为您的新控制器创建一个视图文件夹，您可以将 HTML/ERB/任何文件放入其中。

由于您没有使用数据库，您可能可以跳过模型的需要。

# html - 为什么 margin:0 auto 不对齐到中心

> ID：10364781
> 
> 赞同：2
> 
> 时间：2012-04-28T15:12:19.643
> 
> 标签：html, css

有几次我遇到了这个问题。每当我尝试使用 margin:0 auto 将某些东西居中时。有时我成功，有时没有。所以我的问题是。

1.  为什么下面示例中的#PostWrapper 没有在 innerWrapper 中居中。
2.  margin:0 auto 什么时候起作用，什么时候不起作用。原因是什么。

CSS：

```
#container #Post{

    background:#FFFFFF;
    border-radius:10px;
    margin-top:20px;
    overflow:auto;
}

#container #Post #InnerWrapper{
        margin:10px;
}

#container #Post #InnerWrapper #SubjectWrapper{
    overflow:auto;
}

#container #Post #InnerWrapper #SubjectWrapper #SubjectText{
    font:30px "Palatino Linotype", "Book Antiqua", Palatino, serif;
    font-style:italic;
    font-weight:bold;
    float:left;
}

#container #Post #InnerWrapper #SubjectWrapper #SubjectBox{
        float:left;
        margin-left:2px;
}

#container #Post #InnerWrapper #PostWrapper{
     margin:0 auto;
     border:3px solid #000;
     display:inline-block;
}

#container #Post #InnerWrapper #PostWrapper #PostText{
     font:30px "Palatino Linotype", "Book Antiqua", Palatino, serif;
     font-style:italic;
     font-weight:bold;
}

#container #Post #InnerWrapper #PostWrapper #PostBox{
} 
```

HTML：

```
 <div id="Post">
     <div id="InnerWrapper">
    <div id="SubjectWrapper">
           <div id="SubjectText">Subject:</div>
               <div id="SubjectBox"><input type="text" class="text_box" /></div>
           </div>

        <div id="PostWrapper">
           <div id="PostText"><?php if($PageType=='and'){ echo 'Add new Deal:';}else{ echo 'Edit Company History:';}?></div>

           <div id="PostBox"><textarea rows="20" cols="103" id="PostEditor" /></div>
       </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:52:47.643

根据我收集的信息，您可能希望在父容器 div 上设置宽度，因为如果没有设置宽度，则 div 的默认值为 100%。显然，您不能“居中”占据 100% 屏幕的 div，因此您应该尝试这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T15:16:44.593

简而言之：它取决于元素的`position`,`width`和`display`属性。尝试放置`position: relative;`它们并设置它们的宽度。

子 div 总是有 100% 的宽度，这使得居中毫无用处，因此定义宽度和位置可以利用它。此外，您不能使用`display: inline-block`, 但是`display: block`.

编辑

这是您使用的 div 的代码示例：http `margin: auto`: [//jsfiddle.net/vnAvk/](http://jsfiddle.net/vnAvk/)

这里是内部元素也是居中的（我认为这就是你所追求的）：http: [//jsfiddle.net/vnAvk/1/](http://jsfiddle.net/vnAvk/1/)

这里是整个事情的中心：http: [//jsfiddle.net/vnAvk/2/](http://jsfiddle.net/vnAvk/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T15:38:22.677

有两个原因：您需要清除其上方的浮动元素，并将其设置为 display:inline-block; 如果您清除浮动并删除内联块，它会在中心对齐。你可以在这里查看：http: [//jsfiddle.net/jalbertbowdenii/pQhjJ/1/](http://jsfiddle.net/jalbertbowdenii/pQhjJ/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-28T15:44:32.257

问题是选择器不明确，您提供的选择器链***无效***。只需使用

```
#PostWrapper{
     margin:0 auto;
     border:3px solid #000;
     display:inline-block;
} 
```

### [演示](http://jsfiddle.net/nbj2X/)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-28T15:14:39.863

用这个：

```
margin-left:auto;
margin-right:auto; 
```

如果它仍然有效，则添加以下内容：

```
text-align:center; 
```

更新 1：好吧，在 chrome 开发人员工具上检查您的样式时，我看到浏览器无法识别您的样式引用，所以问题可能出在您的项目选择上

更新 2：试试这个 -

```
 #container, #Post{

    background:#FFFFFF;
    border-radius:10px;
    margin-top:20px;
    overflow:auto;
}

#container, #Post, #InnerWrapper{
        margin:10px;
}

#container, #Post, #InnerWrapper, #SubjectWrapper{
    overflow:auto;
}

#container, #Post, #InnerWrapper, #SubjectWrapper, #SubjectText{
    font:30px "Palatino Linotype", "Book Antiqua", Palatino, serif;
    font-style:italic;
    font-weight:bold;
    float:left;
}

#container, #Post, #InnerWrapper, #SubjectWrapper, #SubjectBox{
        float:left;
        margin-left:2px;
}

#container, #Post, #InnerWrapper, #PostWrapper{
     margin-left:auto;
     margin-right:auto;
     border:3px solid #000;
     display:inline-block;
}

#container, #Post, #InnerWrapper, #PostWrapper, #PostText{
     font:30px "Palatino Linotype", "Book Antiqua", Palatino, serif;
     font-style:italic;
     font-weight:bold;
} 
```

# c - C - 将 base64 方法添加到我的文件中

> ID：10364787
> 
> 赞同：0
> 
> 时间：2012-04-28T15:13:01.460
> 
> 标签：c, makefile, base64

我找到了这些库：[http](http://svn.opendnssec.org/trunk/OpenDNSSEC/common/) ://svn.opendnssec.org/trunk/OpenDNSSEC/common/用于在 c 中进行编码。我想使用它们，但我不确定如何添加它们。

如果我添加我在 b64_ntop.c 中`#include "b64_ntop.c"`有问题（没有这样的文件或目录）。`#include <config.h>`如何添加这些模块？

```
My makefile:
CC=gcc
CFLAGS=-std=gnu99 -Wall -pedantic

all: rdtclient

rdtclient: b64_ntop.o rdtclient.o 
    $(CC) $(CFLAGS) b64_ntop.o rdtclient.o -o rdtclient 
```

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T15:26:40.340

你不应该`#include`是 C 文件。取而代之的是 compat.h 并在using选项`#include`中指定头文件的路径：`CFLAGS``-I`

```
CFLAGS=-std=gnu99 -Wall -pedantic -Ipath/to/header 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T17:21:42.567

对于该特定文件，您可以删除除`<stdlib.h>`（需要`abort()`）之外的每个标题，但您将添加`<stdint.h>`到 get `uint8_t`。

```
#include <config.h>      // Remove

#include <sys/types.h>   // Remove
#include <sys/param.h>   // Remove
#include <sys/socket.h>  // Remove

#include <netinet/in.h>  // Remove
#include <arpa/inet.h>   // Remove

#include <ctype.h>       // Remove
#include <stdio.h>       // Remove
#include <stdlib.h>      // Keep
#include <string.h>      // Remove
#include <stdint.h>      // Add 
```

不需要我能看到的其他人，当我测试它时，GCC 同意我的看法。

我不确定引入了哪个标题`uint8_t`；最有可能的是`<sys/types.h>`，但 C 标准说`<stdint.h>`这样做（或`<inttypes.h>`这样做）。

您还应该有一个声明函数的头文件，并且该头文件应包含在此文件中以确保函数声明和定义一致，并且该头文件应包含在使用该函数的每个源文件中。显然，这是`#include`源文件中的另一行。

* * *

一般来说，如果一个文件使用`<config.h>`（或者，更常见的是，`"config.h"`），那么您需要使用配置工具（通常是`autoconf`或`automake`）或`configure`工具生成的脚本来创建`config.h`头文件。在这个文件中，没有受配置头影响的条件代码，因此可以将其删除。

* * *

清理标题列表后，您可以像对待项目中的任何其他源文件一样对待该文件。最好将其编译为添加到构建中的单独目标文件（不需要特殊选项）。这就是你`makefile`似乎做得很好的事情。有时，在另一个源文件中包含一个源文件（而不是头文件）是明智的或必要的。但是，合理的次数受到严格限制。

# c# - WCF/REST 日志记录

> ID：10364789
> 
> 赞同：3
> 
> 时间：2012-04-28T15:13:07.497
> 
> 标签：c#, linq, web-services, rest, logging

我想知道是否有人可以告诉我如何从我的 wcf 休息服务记录一个简单的请求/响应。

我在本地机器上使用控制台应用程序进行自我托管：

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
            ServiceHost host = new ServiceHost(typeof(RawDataService), new Uri(baseAddress));
            WebHttpBinding binding = new WebHttpBinding();
            //binding.Security.Mode = WebHttpSecurityMode.Transport;
            host.AddServiceEndpoint(typeof(IReceiveData), new WebHttpBinding(), "").Behaviors.Add(new WebHttpBehavior());
            host.Open();
            Console.WriteLine("Host opened");
            Console.ReadLine();
        }
    }
} 
```

我真的希望所需要的只是添加到托管控制台应用程序中。我尝试遵循这个，但它有点令人困惑[http://blogs.msdn.com/b/carlosfigueira/archive/2011/04/19/wcf-extensibility-message-inspectors.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/04/19/wcf-extensibility-message-inspectors.aspx)

请注意，我没有使用任何 app.config 或 web.config 文件。

编辑：

我也不能为此使用任何第三方产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T15:51:46.370

处理此问题的常用方法是使用 Castle Dynamic Proxy 库的面向方面编程 (AOP)。这个想法是，您可以使用一个动态类来装饰/代理您的服务实现，该类拦截在您的服务上调用的每个方法。无论在您的服务上调用什么方法，它们都会被您的代理“拦截”并发送到一个方法，您可以在其中记录您想要的内容，然后您可以完成原始调用。这是一个简单的示例：

```
public class LoggingInterceptor : IInterceptor
{
    // No matter what service method is called, it's funneled through here.
    public void Intercept(IInvocation call)
    {
        MyLogger.Info("Starting call: " + call.Method.Name);

        // Actually invoke whatever method was originally called 
        call.Proceed();

        MyLogger.Info("Finished call: " + call.Method.Name);
    }
} 
```

现在您需要为您的服务类创建一个代理，该代理使用此拦截器进行所有方法调用。您可以根据需要进行漂亮和抽象，但这是基本要点：

```
using Castle.DynamicProxy;
...

// Create your service object and then create a dynamic proxy of the object
// that will inject your logging interceptor logic.
ProxyGenerator generator = new ProxyGenerator();
RawDataService service = new RawDataService();
RawDataService proxy = generator.CreateClassProxyWithTarget<RawDataService>(
    service,
    new LoggingInterceptor());

// Register your proxy object, not the raw service w/ WCF
WebServiceHost host = new WebServiceHost(proxy, new Uri(baseAddress));
... rest of your code as it was ... 
```

现在，对 RawDataService 的任何调用都将首先通过 Intercept() 方法，当它调用 Proceed() 时，您实际实现的服务逻辑就会发生。您可以根据需要更新拦截器以处理异常，包括 StopWatch 和日志参数，但这是基本思想。

我的示例向您展示了设置它的蛮力方式。“更清洁”的解决方案是使用 IoC 创建您的服务实例/代理，但这应该让您的代码立即执行您想要的操作。为了进一步阅读，这里是Castle 项目关于使用其 AOP 钩子[的教程的链接：](http://stw.castleproject.org/%28X%281%29S%28351doi55hgkxcq55umr3ce45%29%29/Windsor.Introduction-to-AOP-With-Castle.ashx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T19:01:22.630

您是在谈论用于调试目的的日志记录还是在实时服务中进行监控？

If you are debugging you can just switch on WCF tracing. It will produce a very comprehensive log and there is a good free tool for viewing the log that comes as part of the Windows SDK - I presume when you say you can't use third party product it doesn't include built-in .Net and Windows SDK features...

[http://msdn.microsoft.com/en-us/library/ms733025.aspx](http://msdn.microsoft.com/en-us/library/ms733025.aspx)

# c++ - 如何找到mac地址？

> ID：10364791
> 
> 赞同：4
> 
> 时间：2012-04-28T15:13:15.657
> 
> 标签：c++, visual-c++

我如何在 C++ 中找到当前正在运行应用程序的计算机的 mac 地址，然后将该 mac 地址与某个 mac 地址进行比较？

所以假设我们要比较的某个mac地址是`AB-12-CD-34-EF-56`，如何找到运行应用程序的mac地址，然后将该mac地址与`AB-12-CD-34-EF-56`mac地址进行比较？做这样的事情最好和最简单的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-08T15:01:50.137

在 Windows 上，您可以使用该函数[`GetAdaptersAddresses()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365915%28v=vs.85%29.aspx)来获取[`IP_ADAPTER_ADDRESSES`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366058%28v=vs.85%29.aspx)包含`PhysicalAddress[MAX_ADAPTER_ADDRESS_LENGTH];`（即 mac 地址）的结构。

该函数将引入库`Iphlpapi.lib`和头文件`<iphlpapi.h>`作为依赖项。一个简单的例子，它将打印来自可用适配器的所有 mac 地址：

```
#include <Winsock2.h>
#include <iphlpapi.h>
#include <cstdint>
#include <cstdio>
#include <cstdlib>
#include <vector>
#pragma comment(lib, "IPHLPAPI.lib")

int main(int argc, char* argv[]){
  ULONG outBufLen = sizeof(IP_ADAPTER_ADDRESSES);
  GetAdaptersAddresses(0, 0, NULL, NULL, &outBufLen);
  std::vector<uint8_t> bytes(outBufLen, 0);
  PIP_ADAPTER_ADDRESSES pCurrAddresses = (IP_ADAPTER_ADDRESSES *)bytes.data();
  DWORD dwRetVal = GetAdaptersAddresses(0, 0, NULL, pCurrAddresses, &outBufLen);
  if (dwRetVal == NO_ERROR) {
    while (pCurrAddresses != NULL){ 
      for (size_t i = 0; i < (int) pCurrAddresses->PhysicalAddressLength; i++) {
        if (i == (pCurrAddresses->PhysicalAddressLength - 1))
          std::printf("%.2X\n", (int) pCurrAddresses->PhysicalAddress[i]);
        else
          std::printf("%.2X-",(int) pCurrAddresses->PhysicalAddress[i]);
      }
      pCurrAddresses = pCurrAddresses->Next;
    }
  }
  std::system("pause");
  return 0;
} 
```

# java - Java地图内容比较

> ID：10364795
> 
> 赞同：1
> 
> 时间：2012-04-28T15:14:02.413
> 
> 标签：java, map, hashmap, comparator, treemap

这是一个棘手的数据结构和数据组织案例。

我有一个应用程序，它从大文件中读取数据并生成各种类型的对象（例如 、`Boolean`、 ） `Integer`，这些对象`String`被分类为几个（不到十几个）组，然后存储在数据库中。

每个对象当前都存储在单个`HashMap<String, Object>`数据结构中。每个这样`HashMap`的对应一个单一的类别（组）。每个数据库记录都是根据所有类别中包含的所有对象中的信息（HashMap 数据结构）构建的。

出现了检查后续记录在列的数量和类型上是否“等效”的要求，其中必须通过比较`HashMap`每个存储对象的名称（键）和类型（实际类）来在所有映射中验证等效性。

我正在寻找一种实现此功能的有效方法，同时保持原始对象分类，因为以尽可能快的方式按类别列出对象也是一项要求。

一个想法是对键进行排序（例如，通过将每个键替换`HashMap`为 a `TreeMap`），然后遍历所有映射。另一种方法是仅复制 a 中的所有内容以`TreeMap`进行比较。

实现此功能的最有效方法是什么？

此外，如果您将如何寻找连续记录之间的差异（即添加的字段和删除的字段）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T15:26:51.960

一种解决方案是同时保持基于类别`HashMap`和组合`TreeMap`。这将有更多的内存需求，虽然不多，因为您只需在它们中保留相同的引用。

因此，每当您添加/删除时，`HashMap`您也将执行相同的操作`TreeMap`。这样，两者将始终保持同步。

然后，您可以使用 TreeMap 进行比较，无论您是要比较对象类型还是实际内容比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T15:30:59.200

创建一个元 SortedSet，在其中存储所有创建的地图。

意味着`SortedSet<Map<String,Object>>`例如`TreeSet`作为自定义的`Comparator<Map<String,Object>>`，它确实检查您对相同数量和名称的键以及每个值的相同对象类型的要求。

然后，您可以使用此元集结构的 contains() 方法来确定是否已经存在类似的记录。

==== 编辑 ====

因为我首先误解了数据库记录和地图之间的关系，所以我现在当然要改变一些语义我的答案。

我仍然会使用提到`SortedSet<Map<String,Object>>`的，但当然`Map<String,Object>`现在会指向你和 hasxy 建议的地图。

另一方面，使用 a `Set<Set<KeyAndType>>`or可能是向前迈出的一步`SortedSet<Set<KeyAndType>>`，您的 KeyAndType 将仅包含键和具有适当`Comparable`实现的类型 or `equals with hashcode`。

为什么？您问如何找到两条记录之间的差异？如果每条记录都与其中一个相关，`Set<KeyAndType>`您可以轻松地使用`retainAll()`它们来形成两个连续集合的交集。

如果您将此与 a 的想法进行比较`SortedSet<Map<String,Object>>`，那么在这两种方式中，您将拥有区分比较器内的字段的逻辑，一次比较内部集，一次比较内部映射。而且由于这些信息在构建周围集合时会丢失，如果您没有另一个易于使用的简化结构来查找此类差异，那么以后将很难获得两条记录之间的差异。并且由于这样的 a`Set<KeyAndType>`可以作为两个记录之间比较的关键和简单的基础，因此它可能是用于这两个目的的一个很好的候选者。

`Set<KeyAndType>`此外，如果您想保持此类与您的记录或元结构组之间的关系，`Map<String,Object>`可能类似于： `Map<Set<KeyAndType>,DatabaseRecord>`或`Map<Set<KeyAndType>,GroupOfMaps>`由一个简单的实现，`LinkedHashMap`它允许按原始顺序进行简单的迭代。

# c++ - 使用 std::erase 和 std::remove 从向量中删除元素不适用于自定义结构作为值

> ID：10364797
> 
> 赞同：0
> 
> 时间：2012-04-28T15:14:18.803
> 
> 标签：c++, struct, operator-keyword, stdvector

我正在尝试使用 std::remove 和 std::erase 从向量中删除一个元素。我不知道索引，只知道值。但是，它不起作用，它可能与我的自定义结构的运算符有关，但我不知道如何修复它。

问题是这行代码：

```
stillAvailable.erase(remove(stillAvailable.begin(), stillAvailable.end(), previousRound[j]), stillAvailable.end()); 
```

其中 stillAvailable 是 std::vector 类型，previousRound[j] 是 Team 类型。Team 是一个看起来像这样的结构：

```
struct Team
{
  int country;
  std::string name;
  int positionGP;
  int groupID;
}; 
```

我收到以下错误代码：

```
League.cc: In member function `bool League::generateSchema(int, std::vector<Team, std::allocator<Team> >)':
League.cc:131: error: no match for 'operator*' in '*temp'

C:/Dev-Cpp/include/c++/3.4.2/bits/stl_algo.h: In function `_OutputIterator std::remove_copy(_InputIterator, _InputIterator, _OutputIterator, const _Tp&) [with _InputIterator = __gnu_cxx::__normal_iterator<Team*, std::vector<Team, std::allocator<Team> > >, _OutputIterator = __gnu_cxx::__normal_iterator<Team*, std::vector<Team, std::allocator<Team> > >, _Tp = Team]':
C:/Dev-Cpp/include/c++/3.4.2/bits/stl_algo.h:1114:   instantiated from `_ForwardIterator std::remove(_ForwardIterator, _ForwardIterator, const _Tp&) [with _ForwardIterator = __gnu_cxx::__normal_iterator<Team*, std::vector<Team, std::allocator<Team> > >, _Tp = Team]'
League.cc:145:   instantiated from here
C:/Dev-Cpp/include/c++/3.4.2/bits/stl_algo.h:1037: error: no match for 'operator==' in '(&__first)->__gnu_cxx::__normal_iterator<_Iterator, _Container>::operator* [with _Iterator = Team*, _Container = std::vector<Team, std::allocator<Team> >]() == __value'

C:/Dev-Cpp/include/c++/3.4.2/bits/stl_algo.h: In function `_RandomAccessIterator std::find(_RandomAccessIterator, _RandomAccessIterator, const _Tp&, std::random_access_iterator_tag) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<Team*, std::vector<Team, std::allocator<Team> > >, _Tp = Team]':
C:/Dev-Cpp/include/c++/3.4.2/bits/stl_algo.h:314:   instantiated from `_InputIterator std::find(_InputIterator, _InputIterator, const _Tp&) [with _InputIterator = __gnu_cxx::__normal_iterator<Team*, std::vector<Team, std::allocator<Team> > >, _Tp = Team]'
C:/Dev-Cpp/include/c++/3.4.2/bits/stl_algo.h:1112:   instantiated from `_ForwardIterator std::remove(_ForwardIterator, _ForwardIterator, const _Tp&) [with _ForwardIterator = __gnu_cxx::__normal_iterator<Team*, std::vector<Team, std::allocator<Team> > >, _Tp = Team]'

League.cc:145:   instantiated from here
C:/Dev-Cpp/include/c++/3.4.2/bits/stl_algo.h:207: error: no match for 'operator==' in '(&__first)->__gnu_cxx::__normal_iterator<_Iterator, _Container>::operator* [with _Iterator = Team*, _Container = std::vector<Team, std::allocator<Team> >]() == __val'

C:/Dev-Cpp/include/c++/3.4.2/bits/stl_algo.h:211: error: no match for 'operator==' in '(&__first)->__gnu_cxx::__normal_iterator<_Iterator, _Container>::operator* [with _Iterator = Team*, _Container = std::vector<Team, std::allocator<Team> >]() == __val'

C:/Dev-Cpp/include/c++/3.4.2/bits/stl_algo.h:215: error: no match for 'operator==' in '(&__first)->__gnu_cxx::__normal_iterator<_Iterator, _Container>::operator* [with _Iterator = Team*, _Container = std::vector<Team, std::allocator<Team> >]() == __val'

C:/Dev-Cpp/include/c++/3.4.2/bits/stl_algo.h:219: error: no match for 'operator==' in '(&__first)->__gnu_cxx::__normal_iterator<_Iterator, _Container>::operator* [with _Iterator = Team*, _Container = std::vector<Team, std::allocator<Team> >]() == __val'

C:/Dev-Cpp/include/c++/3.4.2/bits/stl_algo.h:227: error: no match for 'operator==' in '(&__first)->__gnu_cxx::__normal_iterator<_Iterator, _Container>::operator* [with _Iterator = Team*, _Container = std::vector<Team, std::allocator<Team> >]() == __val'

C:/Dev-Cpp/include/c++/3.4.2/bits/stl_algo.h:231: error: no match for 'operator==' in '(&__first)->__gnu_cxx::__normal_iterator<_Iterator, _Container>::operator* [with _Iterator = Team*, _Container = std::vector<Team, std::allocator<Team> >]() == __val'

C:/Dev-Cpp/include/c++/3.4.2/bits/stl_algo.h:235: error: no match for 'operator==' in '(&__first)->__gnu_cxx::__normal_iterator<_Iterator, _Container>::operator* [with _Iterator = Team*, _Container = std::vector<Team, std::allocator<Team> >]() == __val' 
```

任何帮助将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T15:23:08.017

`std::remove`uses `operator==`，它不会为您的类和结构自动重载。你必须自己写：

```
bool operator==(const Team & lhs, const Team & rhs)
{
    // compare lhs and rhs in such a way that you return true if they
    // are equal, and false if they are not equal.  You can define
    // equal to mean whatever you want here.
} 
```

# ruby - 红宝石'脚本= $ 0'

> ID：10364802
> 
> 赞同：6
> 
> 时间：2012-04-28T15:15:30.047
> 
> 标签：ruby

我正在查看一个 Ruby 脚本，我遇到了`script = $0`. 我做了一些谷歌搜索，但我还没有找到一个明确的答案。我相信它可以保护您免于读取大于内存的文件，对吗？

谢谢，我有下面的完整脚本，所以你可以在上下文中看到它：

```
# Takes the name of a file as an argument and assigns to filename 
filename = ARGV.first 
script = $0

puts "We're going to erase #{filename}."
puts "If you don't want that, hit CTRL-C (^C)."
puts "If you do want that, hit RETURN."

print "? "
STDIN.gets

puts "Opening the file..."
target = File.open(filename, 'w')

puts "Truncating the file. Goodbye!"
target.truncate(target.size)

puts "Now I'm going to ask you for three lines."

print "line 1: "; line1 = STDIN.gets.chomp()
print "line 2: "; line2 = STDIN.gets.chomp()
print "line 3: "; line3 = STDIN.gets.chomp()

puts "I'm going to write these to the file."

target.write(line1)
target.write("\n")
target.write(line2)
target.write("\n")
target.write(line3)
target.write("\n")

puts "And finally, we close it."
target.close() 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-28T15:19:27.430

`$0`是 Ruby 的全局变量之一。从[这里](http://ruby-doc.org/core-2.3.1/doc/globals_rdoc.html)：

> $0 -- 包含正在执行的脚本的名称。可能是可分配的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-25T22:31:59.763

哦，经典的 Zed Shaw 书籍！大声笑 $0 在第一个参数之前获取命令行上的输入。因此，假设您要使用 ruby​​ 解释器通过命令行运行它，您可以输入“ruby (fileName) test.txt”，$0 将获取文件名并将其保存到变量“脚本”中。我不太确定你为什么在这里这样做，因为你稍后会在程序中使用它，但就是这样。您可以对此进行测试的方法是使用 puts 将其打印在屏幕上，或者添加这段代码以便您自己在代码中的某处查看它：

```
puts "The $0 has saved #{script} to it, I wonder where it got that." 
```

并看到它会命名你的文件。

# python - 如何从 cfg 文件中检索键值对

> ID：10364804
> 
> 赞同：1
> 
> 时间：2012-04-28T15:15:35.407
> 
> 标签：python, key-value

**我是 python 新手。**

我有一个配置文件，如下所示，顺序相同。我需要从配置文件中检索键值对，并将在我的脚本中使用这些值

```
# Name and details 
( 
 { group => 'abc',
   host => 'pqr.com',
   user => 'anonymous',
   src => '/var/tmp',
   dest => '/tmp',
}, 
{ group => 'abc',
  host =>'pqr.com',
  user => 'anonymous',
  src => '/tmp'
  dest => '/var/tmp'
}, 
{ group => 'pqr',
  host =>'abc.com',
  user => 'xyz',
  src => '/home/pp',
  dest => '/var/tmp',
}, 
{ group => 'xyz',
  host =>'p.com',
  user => 'x',
  src => '/home/',
  dest => '/tmp',
} 
```

)

每个

```
{

} 
```

被认为是一个块.. `Group`, `user`,`host`是唯一的并且是重复的。我必须阅读和解析配置文件并显示键值对。请帮助。

```
Key : group,Value : 'abc'(say)
key : host ,Value :'pqr.com'
Key : user, Value :'anonymous'
Key : src,Value :'/var/tmp',
key : dest,Value : '/tmp' 
```

谢谢，

* * *

我已经编写了代码，它以 cfg 文件（如上所示）作为输入来显示键和值。

```
idx = 0
dictList = []
while True:
try:
start = config.index("{", idx)
end = config.index("}", start+1)
slice = config[start+1:end-1]
sliceList = [s.strip() for s in slice.split(",") if s.strip()]
dd = {}
for item in sliceList:
key, value = [s.strip() for s in item.split("=>")]
print key, value 
```

显示键、值时输出

```
key 'value'
group 'abc'
host 'pqr.com'
user 'ananymous'
src '/use/tmp 
```

现在的问题是，如何显示一个键对应的值。例如：打印组- 应该显示 abc 打印主机应该显示 pqr.com，等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T15:34:13.973

您可能需要解析它，这里有一个关于如何执行此操作的小示例。

```
import re
def parse(data):
    '''Parse data block, return itertator on objects inside'''
    for block in re.finditer('{[^}]*}', data, re.M):  # Split to objects
        obj = {}
        for match in re.finditer("([a-z]+) => '([^']*)'", block.group()):
            obj[match.group(1)] = match.group(2)
        yield obj 
```

现在你有两个问题:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T00:01:41.730

[http://docs.python.org/library/configparser.html](http://docs.python.org/library/configparser.html)

你想为此尝试一下。

但是您的配置文件格式需要更改为更多的 ini 格式

```
[section]
key = value 
```

[http://deron.meranda.us/python/demjson/](http://deron.meranda.us/python/demjson/)

demjson 也适用于 python 对象 -> 字符串和返回。

在这种情况下，我倾向于使用这些。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-28T15:39:28.630

您的数据格式不正确，无法由 Python 直接解释。因此，您必须在解释数据之前对其进行处理

1.  将所有 Occurrence 更改`=>`为`:`：`data.replace("=>",":")`
2.  引用所有键：`re.sub(" (\w+) ",r"'\1'",data.replace("=>",":"))`

然后你可以把它喂给`ast.literal_eval`

```
import re,ast
ast.literal_eval(re.sub(" (\w+) ",r"'\1'",data.replace("=>",":"))) 
```

# asp.net - 禁用asp.net按钮的服务器端

> ID：10364806
> 
> 赞同：0
> 
> 时间：2012-04-28T15:15:51.803
> 
> 标签：asp.net, devexpress

如何禁用按钮回调，我只想在客户端使用这个按钮？

```
<dx:ASPxButton ID="btn_clear" runat="server" 
    Text="Clear" Width="90px" OnClick="btn_clear_Click">
    <ClientSideEvents Click = "OnClick" />
</dx:ASPxButton> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T15:34:39.733

`onClientClick=return false`将阻止处理正常的回发。如果你想在客户端做一些自定义 javascript，你可以在这之后调用 return false

```
<asp:Button id="btn1" runat="server" onClientClick="return MyFunction" /> 
```

在 javascript 中

```
function MyFunction()
{
  //Do your custom code

 return false;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T12:22:23.473

从您的按钮标签前缀来看，您似乎使用的是 Devexpress 组件而不是普通的 asp.net 按钮。Devexpress 的`ASPxButton`控制客户端点击事件有一个`processOnServer`属性，您可以将其设置为 false 以防止回发：

```
<dx:ASPxButton ID="btn_clear" runat="server" 
    Text="Clear" Width="90px" OnClick="btn_clear_Click">
    <ClientSideEvents Click = "OnClick" />
</dx:ASPxButton> 
```

和你的`OnClick()`javascript函数：

```
function OnClick(s, e)
{
        e.processOnServer = false;
} 
```

在不使用第三方组件的情况下，如果您希望按钮仅在客户端执行某些操作，则只需使用 HTML 输入按钮，但如果您希望使用 asp.net 按钮的客户端功能（例如导致验证）那么[Shyju的答案](https://stackoverflow.com/a/10364978/189756)就是要走的路。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T15:30:23.790

如何简单地删除 OnClick 处理程序？

```
<dx:ASPxButton ID="btn_clear" runat="server" 
    Text="Clear" Width="90px">
    <ClientSideEvents Click = "OnClick" />
</dx:ASPxButton> 
```

或者更好的是，首先使用一个 HTML 按钮 ( `<input type="button" />`)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-18T07:04:34.477

只需添加一个属性 AutoPostBack="false"，这将停止回发，仍然需要使用客户端脚本调用服务器端函数，您可以使用回调面板

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T15:17:19.367

你不能。

服务器端控件**必须**在服务器端运行。

如果省略该属性，标记将**完全**像这样`runat="server"`呈现：

 **```
<dx:ASPxButton ID="btn_clear" 
    Text="Clear" Width="90px" OnClick="btn_clear_Click">
    <ClientSideEvents Click = "OnClick" />
</dx:ASPxButton> 
```

这将被浏览器完全忽略，因为元素`dx:ASPxButton`不是有效的 HTML 元素。**

# spring-mvc - 如何在@RequestMapping 中使用“/”正斜杠？

> ID：10364813
> 
> 赞同：0
> 
> 时间：2012-04-28T15:16:58.900
> 
> 标签：spring-mvc, url-mapping

我有一个要求，其中我使用的 id`@RequestMapping`接受格式的值`1234567812345678`和`abcxyz/abcxy+z$`（基本上是一个自动生成的字符串，其中包含`/`正斜杠）。

我尝试了以下所有 3 种格式的映射，但没有任何效果：

`@RequestMapping(value="abc/action/{id: .+[//]*.*}.{format}", method=RequestMethod.PUT)` ——什么都不接受。

`@RequestMapping(value=" abc/action/{id:.+}.{format}", method=RequestMethod.PUT)` -- 接受除了 `/`

`@RequestMapping(value=" abc/action/{id:.*}.{format}", method=RequestMethod.PUT)` -- 接受除了 `/`

但是，当我在普通的 java 程序中尝试相同的正则表达式时，它就像一个魅力：

```
package miscellenousTest;
public class RegExTest {
    public static void main(String[] args) {
        String s1 ="9876543298765432";
        String s2 =" abcxyz/abcxy+z$";
        System.out.println(s1.matches(".+[//]*.*"));
        System.out.println(s2.matches(".+[//]*.*"));
    }
} 
```

我已经浏览了以前的一些帖子，但没有任何东西能提供我正在寻找的确切解决方案。

如果有人可以在这个问题上提出一些指示/解决方案，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:24:20.967

在 url 中发送数据时不应使用斜杠。在发送之前，您需要对其进行 urlencode。然后它会在返回给您之前被解码。

有时，当我遇到这个问题时，我会使用网络安全名称。因此，例如，我有时需要发送诸如“12345/01”之类的 ID。当我通过网络以 url 发送它们时，我会说“12345_01”，我们将其称为网络安全 ID。然后，当我们需要真实 id 时，我们通过将 _ 替换为 / 来转换它。

# android - “旋转储物柜”如何工作？

> ID：10364815
> 
> 赞同：1
> 
> 时间：2012-04-28T15:17:10.163
> 
> 标签：android, android-layout, android-intent, android-widget

我刚刚安装了应用程序 Rotation Locker。这是一个简单的应用程序，但它工作得很好。它可以强制所有其他应用程序以横向或纵向模式运行。我正在努力弄清楚它是如何做到这一点的。请问有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:46:16.567

Piecing together data from other posts I was able how to work this out for an app I was writing that needs to do exactly this. ([Force Dock Rotation](https://play.google.com/store/apps/details?id=uk.co.chrispaton.forcedockrotation) if you're interested).

My solution involves creating a window and inserting it at the top of the view hierarchy so that you can get first shout of the orientation before another app tries to set it...

```
orientationChanger = new LinearLayout(this);
// Using TYPE_SYSTEM_OVERLAY is crucial to make your window appear on top
// You'll need the permission android.permission.SYSTEM_ALERT_WINDOW
WindowManager.LayoutParams orientationLayout = new WindowManager.LayoutParams(WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY, 0, PixelFormat.RGBA_8888);
// Use whatever constant you need for your desired rotation
orientationLayout.screenOrientation = ActivityInfo.SCREEN_ORIENTATION_SENSOR;

WindowManager wm = (WindowManager) this.getSystemService(Service.WINDOW_SERVICE);
wm.addView(orientationChanger, orientationLayout);
orientationChanger.setVisibility(View.VISIBLE); 
```

Credit to this answer for the inspiration: [How can I globally force screen orientation in Android?](https://stackoverflow.com/questions/14587085/how-can-i-globally-force-screen-orientation-in-android/14654302#14654302)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T16:36:42.787

可能您可以按住“搜索”按钮或其他按钮。

这就是它在 HTC Desire 上的工作方式

# c# - C# 和浮点数的恶作剧

> ID：10364817
> 
> 赞同：1
> 
> 时间：2012-04-28T15:17:20.983
> 
> 标签：c#, floating-point, rounding

在测试我的程序为什么没有按预期工作时，我尝试在即时窗口中输入似乎失败的计算。

```
Math.Floor(1.0f)
1.0 - correct 
```

然而：

```
200f * 0.005f
1.0

Math.Floor(200f * 0.005f)
0.0 - incorrect 
```

此外：

```
(float)(200f * 0.005f)
1.0

Math.Floor((float)(200f * 0.005f))
0.0 - incorrect 
```

可能会发生一些浮动损失，例如 0.99963 ≠ 1.00127。

我不介意存储价格较低的值，但是以无损的方式存储，例如，如果有一种数字类型将值存储为整数，但如果可以提高性能，则只能存储三位小数。

我认为对于此类错误，可能有更好的方法来计算 (n * 0.005f)。

编辑：

TY，一个解决方案：

```
Math.Floor(200m * 0.005m) 
```

另外，据我了解，如果我不介意将 1/200 更改为 1/256，这将起作用：

```
Math.Floor(200f * 0.00390625f) 
```

我正在使用的解决方案。这是我可以在我的程序中得到的最接近的并且似乎工作正常：

```
float x = ...;
UInt16 n = 200;
decimal d = 1m / n;
... = Math.Floor((decimal)x * d) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-28T15:29:56.563

浮点数将数字表示为*分母为 2*次方的分数。也就是说，您可以精确地表示 1/2、3/4 或 19/256。由于 .005 是 1/200，并且 200 不是 2 的幂，因此您得到的`0.005f`是底部具有 2 幂的最接近的分数，可以放入 32 位浮点数。

小数将数字表示为分母为十次方的分数。与浮点数一样，当您尝试表示不符合该模式的数字时，它们会引入错误。`1m/333m`例如，将为您提供与 1/333 最接近的数字，其分母为 10 次方，有效数字为 29 或更少。由于 0.005 是 5/1000，即 10 的幂，`0.005m`将为您提供准确的表示。您付出的代价是小数比浮点数大得多且慢得多。

您应该始终始终使用小数进行财务计算，切勿浮动。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-28T15:31:12.480

问题是 0.005f*实际上是*0.004999999888241291046142578125... 所以小于 0.005。这是最接近`float`0.005 的值。当你将它乘以 200 时，你会得到小于 1 的结果。

如果您`decimal`改为使用 - 一直使用，而*不是*从 - 转换-*在这种特定情况下*`float`应该没问题。所以：

 *```
decimal x = 0.005m;
decimal y = 200m;
decimal z = x * y;
Console.WriteLine(z == 1m); // True 
```

但是，不要假设这意味着`decimal`具有“无限精度”。它仍然是一个精度有限的浮点类型——它只是一个浮点*小数点*类型，所以 0.005 是完全可以表示的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-28T15:19:36.007

如果您不能容忍任何浮点精度问题，请使用`decimal`.

[http://msdn.microsoft.com/en-us/library/364x0z75.aspx](http://msdn.microsoft.com/en-us/library/364x0z75.aspx)

最终甚至`decimal`还有精度问题（它允许 28-29 位有效数字）。如果您在其支持的范围内工作（（-7.9 x 10^28 到 7.9 x 10^28）/（100^28）），您不太可能受到它们的影响。*

# python - dict 对象是如何被腌制的？

> ID：10364818
> 
> 赞同：6
> 
> 时间：2012-04-28T15:17:33.057
> 
> 标签：python, pickle

阅读 pickle 文档后，我的印象是一个类需要实现`__reduce__`或`__getstate__`正确腌制。但是字典的酸洗是如何工作的呢？他们没有任何这些属性：

```
> dict(a=1).__reduce__()

---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
/home/daniyar/work/Apr24/<ipython-input-30-bc1cbd43305b> in <module>()
----> 1 dict(a=1).__reduce__()

/usr/lib/python2.6/copy_reg.pyc in _reduce_ex(self, proto)
     68     else:
     69         if base is self.__class__:
---> 70             raise TypeError, "can't pickle %s objects" % base.__name__
     71         state = base(self)
     72     args = (self.__class__, base, state)

TypeError: can't pickle dict objects

> dict(a=1).__getstate__()

---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
/home/daniyar/work/Apr24/<ipython-input-31-00932fb40067> in <module>()
----> 1 dict(a=1).__getstate__()

AttributeError: 'dict' object has no attribute '__getstate__' 
```

另外，从 dict 派生的类是如何腌制的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-28T15:30:26.943

[pickle 模块“本机”处理许多类型](http://docs.python.org/library/pickle.html#what-can-be-pickled-and-unpickled)。*它不能*原生处理的类型需要实现[“pickle 协议”](http://docs.python.org/library/pickle.html#the-pickle-protocol)。字典和简单的子类是本地处理的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-28T15:29:59.840

和方法旨在成为酸洗方法的下限，以便您在需要解释器进行一些特殊处理时在自定义类上实现`__reduce__`。`__getstate__`

例如，如果一个扩展类的实例在你试图腌制的字典中，如果你的类没有实现那些说明如何腌制它的方法，这会使整个字典变得不可挑选。

解释器知道如何腌制内置函数，以及腌制你应该使用`pickle.dump`or`pickle.dumps`方法的字典，而不是通过调用`__reduce__`or `__getstate__`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-28T15:30:13.460

酸洗不需要`__reduce__`或`__getstate__`。这些是您可以用来控制酸洗的方法，但是如果没有它们，pickle 将适用于内置类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-12T13:52:42.483

我从[这里得到的有用答案](http://western-skies.blogspot.com/2008/02/simple-complete-example-of-python.html)

这是应该在里面的东西`__getstate__`和`__setstate__`。即使不知何故你不能像它应该的那样立即使用它，但你可以从头开始，像这样：

```
def __getstate__(self):
    result = self.__dict__.copy()
    return result

def __setstate__(self, dict):
    self.__dict__ = dict 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-13T14:18:46.867

所有好的答案，但他们忽略了这个问题：

> 另外，从 dict 派生的类是如何腌制的？

像任何其他类一样，它们是通过引用腌制的。如果你看看泡菜，你可以看到 python 在做什么。

```
>>> class MyDict(dict):
...   def __repr__(self):
...     return "MyDict({})".format(dict(i for i in self.items()))
... 
>>> m = MyDict(a=1,b=2)
>>> m
MyDict({'a': 1, 'b': 2})
>>> import pickle
>>> # reconstructor called on class MyDict that lives in __main__
>>> # and contains a __builtin__ dict with contents ('a' and 'b')
>>> pickle.dumps(m)
"ccopy_reg\n_reconstructor\np0\n(c__main__\nMyDict\np1\nc__builtin__\ndict\np2\n(dp3\nS'a'\np4\nI1\nsS'b'\np5\nI2\nstp6\nRp7\n."
>>> m.clear()
>>> # removing the contents, to show how that affects the pickle
>>> pickle.dumps(m)
'ccopy_reg\n_reconstructor\np0\n(c__main__\nMyDict\np1\nc__builtin__\ndict\np2\n(dp3\ntp4\nRp5\n.'
>>> # now, just looking at the class itself, you can see it's by reference
>>> pickle.dumps(MyDict)
'c__main__\nMyDict\np0\n.' 
```

或者，我们也可以这样做，但检查拆开的泡菜。您可以确切地看到存储了哪些指令。

```
>>> pickletools.dis(pickle.dumps(m))
    0: c    GLOBAL     'copy_reg _reconstructor'
   25: p    PUT        0
   28: (    MARK
   29: c        GLOBAL     '__main__ MyDict'
   46: p        PUT        1
   49: c        GLOBAL     '__builtin__ dict'
   67: p        PUT        2
   70: (        MARK
   71: d            DICT       (MARK at 70)
   72: p        PUT        3
   75: t        TUPLE      (MARK at 28)
   76: p    PUT        4
   79: R    REDUCE
   80: p    PUT        5
   83: .    STOP
highest protocol among opcodes = 0
>>> pickletools.dis(pickle.dumps(MyDict))
    0: c    GLOBAL     '__main__ MyDict'
   17: p    PUT        0
   20: .    STOP
highest protocol among opcodes = 0 
```

该类肯定是通过引用存储的，即使它派生自 a`dict`而不是`object`。该引用是对名称的引用，这意味着一旦`__main__`会话关闭，类定义就会丢失，并且依赖的泡菜`MyClass`不会加载。

现在，让我们看看`dict`. 首先`dict`依靠python知道如何序列化基本对象`dict`（如其他答案中提到的），然后开始序列化内容。你可以看到它里面有两个`strings`，python 也天生知道如何序列化。

这意味着如果您在 dict 中有不可序列化的对象，它将失败。

```
>>> d['c'] = MyDict.__repr__
>>> d
{'a': 1, 'c': <unbound method MyDict.__repr__>, 'b': 2}
>>> pickle.dumps(d)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/pickle.py", line 1374, in dumps
    Pickler(file, protocol).dump(obj)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/pickle.py", line 224, in dump
    self.save(obj)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/pickle.py", line 649, in save_dict
    self._batch_setitems(obj.iteritems())
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/pickle.py", line 663, in _batch_setitems
    save(v)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/pickle.py", line 306, in save
    rv = reduce(self.proto)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/copy_reg.py", line 70, in _reduce_ex
    raise TypeError, "can't pickle %s objects" % base.__name__
TypeError: can't pickle instance method objects 
```

顺便说一句，如果您使用更好的序列化程序，我们*可以*做得更好。使用`dill`而不是`pickle`可以序列化大多数对象。dict 的pickle 要复杂得多，如下所示。

```
>>> import dill
>>> dill.dumps(d)
'\x80\x02}q\x00(U\x01aq\x01K\x01U\x01cq\x02cdill.dill\n_load_type\nq\x03U\nMethodTypeq\x04\x85q\x05Rq\x06cdill.dill\n_create_function\nq\x07(cdill.dill\n_unmarshal\nq\x08T$\x01\x00\x00c\x01\x00\x00\x00\x01\x00\x00\x00\x04\x00\x00\x00C\x00\x00\x00s#\x00\x00\x00d\x01\x00j\x00\x00t\x01\x00d\x02\x00\x84\x00\x00|\x00\x00j\x02\x00\x83\x00\x00D\x83\x01\x00\x83\x01\x00\x83\x01\x00S(\x03\x00\x00\x00Ns\n\x00\x00\x00MyDict({})c\x01\x00\x00\x00\x02\x00\x00\x00\x02\x00\x00\x00s\x00\x00\x00s\x15\x00\x00\x00|\x00\x00]\x0b\x00}\x01\x00|\x01\x00V\x01q\x03\x00d\x00\x00S(\x01\x00\x00\x00N(\x00\x00\x00\x00(\x02\x00\x00\x00t\x02\x00\x00\x00.0t\x01\x00\x00\x00i(\x00\x00\x00\x00(\x00\x00\x00\x00s\x07\x00\x00\x00<stdin>s\t\x00\x00\x00<genexpr>\x03\x00\x00\x00s\x02\x00\x00\x00\x06\x00(\x03\x00\x00\x00t\x06\x00\x00\x00formatt\x04\x00\x00\x00dictt\x05\x00\x00\x00items(\x01\x00\x00\x00t\x04\x00\x00\x00self(\x00\x00\x00\x00(\x00\x00\x00\x00s\x07\x00\x00\x00<stdin>t\x08\x00\x00\x00__repr__\x02\x00\x00\x00s\x02\x00\x00\x00\x00\x01q\t\x85q\nRq\x0bc__builtin__\n__main__\nU\x08__repr__q\x0cNN}q\rtq\x0eRq\x0fNcdill.dill\n_create_type\nq\x10(h\x03U\x08TypeTypeq\x11\x85q\x12Rq\x13U\x06MyDictq\x14h\x03U\x08DictTypeq\x15\x85q\x16Rq\x17\x85q\x18}q\x19(U\n__module__q\x1aU\x08__main__q\x1bh\x0ch\x0fU\x07__doc__q\x1cNutq\x1dRq\x1e\x87q\x1fRq U\x01bq!K\x02u.'
>>> pickletools.dis(dill.dumps(d))
    0: \x80 PROTO      2
    2: }    EMPTY_DICT
    3: q    BINPUT     0
    5: (    MARK
    6: U        SHORT_BINSTRING 'a'
    9: q        BINPUT     1
   11: K        BININT1    1
   13: U        SHORT_BINSTRING 'c'
   16: q        BINPUT     2
   18: c        GLOBAL     'dill.dill _load_type'
   40: q        BINPUT     3
   42: U        SHORT_BINSTRING 'MethodType'
   54: q        BINPUT     4
   56: \x85     TUPLE1
   57: q        BINPUT     5
   59: R        REDUCE
   60: q        BINPUT     6
   62: c        GLOBAL     'dill.dill _create_function'
   90: q        BINPUT     7
   92: (        MARK
   93: c            GLOBAL     'dill.dill _unmarshal'
  115: q            BINPUT     8
  117: T            BINSTRING  'c\x01\x00\x00\x00\x01\x00\x00\x00\x04\x00\x00\x00C\x00\x00\x00s#\x00\x00\x00d\x01\x00j\x00\x00t\x01\x00d\x02\x00\x84\x00\x00|\x00\x00j\x02\x00\x83\x00\x00D\x83\x01\x00\x83\x01\x00\x83\x01\x00S(\x03\x00\x00\x00Ns\n\x00\x00\x00MyDict({})c\x01\x00\x00\x00\x02\x00\x00\x00\x02\x00\x00\x00s\x00\x00\x00s\x15\x00\x00\x00|\x00\x00]\x0b\x00}\x01\x00|\x01\x00V\x01q\x03\x00d\x00\x00S(\x01\x00\x00\x00N(\x00\x00\x00\x00(\x02\x00\x00\x00t\x02\x00\x00\x00.0t\x01\x00\x00\x00i(\x00\x00\x00\x00(\x00\x00\x00\x00s\x07\x00\x00\x00<stdin>s\t\x00\x00\x00<genexpr>\x03\x00\x00\x00s\x02\x00\x00\x00\x06\x00(\x03\x00\x00\x00t\x06\x00\x00\x00formatt\x04\x00\x00\x00dictt\x05\x00\x00\x00items(\x01\x00\x00\x00t\x04\x00\x00\x00self(\x00\x00\x00\x00(\x00\x00\x00\x00s\x07\x00\x00\x00<stdin>t\x08\x00\x00\x00__repr__\x02\x00\x00\x00s\x02\x00\x00\x00\x00\x01'
  414: q            BINPUT     9
  416: \x85         TUPLE1
  417: q            BINPUT     10
  419: R            REDUCE
  420: q            BINPUT     11
  422: c            GLOBAL     '__builtin__ __main__'
  444: U            SHORT_BINSTRING '__repr__'
  454: q            BINPUT     12
  456: N            NONE
  457: N            NONE
  458: }            EMPTY_DICT
  459: q            BINPUT     13
  461: t            TUPLE      (MARK at 92)
  462: q        BINPUT     14
  464: R        REDUCE
  465: q        BINPUT     15
  467: N        NONE
  468: c        GLOBAL     'dill.dill _create_type'
  492: q        BINPUT     16
  494: (        MARK
  495: h            BINGET     3
  497: U            SHORT_BINSTRING 'TypeType'
  507: q            BINPUT     17
  509: \x85         TUPLE1
  510: q            BINPUT     18
  512: R            REDUCE
  513: q            BINPUT     19
  515: U            SHORT_BINSTRING 'MyDict'
  523: q            BINPUT     20
  525: h            BINGET     3
  527: U            SHORT_BINSTRING 'DictType'
  537: q            BINPUT     21
  539: \x85         TUPLE1
  540: q            BINPUT     22
  542: R            REDUCE
  543: q            BINPUT     23
  545: \x85         TUPLE1
  546: q            BINPUT     24
  548: }            EMPTY_DICT
  549: q            BINPUT     25
  551: (            MARK
  552: U                SHORT_BINSTRING '__module__'
  564: q                BINPUT     26
  566: U                SHORT_BINSTRING '__main__'
  576: q                BINPUT     27
  578: h                BINGET     12
  580: h                BINGET     15
  582: U                SHORT_BINSTRING '__doc__'
  591: q                BINPUT     28
  593: N                NONE
  594: u                SETITEMS   (MARK at 551)
  595: t            TUPLE      (MARK at 494)
  596: q        BINPUT     29
  598: R        REDUCE
  599: q        BINPUT     30
  601: \x87     TUPLE3
  602: q        BINPUT     31
  604: R        REDUCE
  605: q        BINPUT     32
  607: U        SHORT_BINSTRING 'b'
  610: q        BINPUT     33
  612: K        BININT1    2
  614: u        SETITEMS   (MARK at 5)
  615: .    STOP
highest protocol among opcodes = 2 
```

`Dill`序列化类方法，因为已注册的其他函数`dill`知道如何腌制和取消腌制更多种类的对象——您可以在反汇编代码中看到它们（它们以 开头`dill.dill`）。这是一个更大的泡菜，但它通常适用于你塞进`dict`.

```
>>> from numpy import *
>>> everything = dill.dumps(globals()) 
```

对于派生自 的类`dict`，您不必担心在类方法中包含不可提取的对象——但是，自定义的*内容*`dict`仍然使用类实例进行序列化，因此您必须担心其中包含不可序列化的对象你的班。

```
Python 2.7.9 (default, Dec 11 2014, 01:21:43) 
[GCC 4.2.1 Compatible Apple Clang 4.1 ((tags/Apple/clang-421.11.66))] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> 
>>> import pickle
>>> class MyDict(dict):
...   def __repr__(self):
...     return "MyDict({})".format(dict(i for i in self.items()))
... 
>>> m = MyDict(a = lambda x:x)
>>> m
MyDict({'a': <function <lambda> at 0x10892b230>})
>>> pickle.dumps(a)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'a' is not defined
>>> pickle.dumps(m)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/pickle.py", line 1374, in dumps
    Pickler(file, protocol).dump(obj)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/pickle.py", line 224, in dump
    self.save(obj)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/pickle.py", line 331, in save
    self.save_reduce(obj=obj, *rv)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/pickle.py", line 401, in save_reduce
    save(args)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/pickle.py", line 562, in save_tuple
    save(element)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/pickle.py", line 649, in save_dict
    self._batch_setitems(obj.iteritems())
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/pickle.py", line 663, in _batch_setitems
    save(v)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/pickle.py", line 748, in save_global
    (obj, module, name))
pickle.PicklingError: Can't pickle <function <lambda> at 0x10892b230>: it's not found as __main__.<lambda> 
```

A`lambda`无法序列化，因为它没有`pickle`可以引用的名称。回到`dill`，我们看到这是可行的。

```
>>> import dill
>>> dill.dumps(m)
'\x80\x02cdill.dill\n_create_type\nq\x00(cdill.dill\n_load_type\nq\x01U\x08TypeTypeq\x02\x85q\x03Rq\x04U\x06MyDictq\x05h\x01U\x08DictTypeq\x06\x85q\x07Rq\x08\x85q\t}q\n(U\r__slotnames__q\x0b]q\x0cU\n__module__q\rU\x08__main__q\x0eU\x08__repr__q\x0fcdill.dill\n_create_function\nq\x10(cdill.dill\n_unmarshal\nq\x11T$\x01\x00\x00c\x01\x00\x00\x00\x01\x00\x00\x00\x04\x00\x00\x00C\x00\x00\x00s#\x00\x00\x00d\x01\x00j\x00\x00t\x01\x00d\x02\x00\x84\x00\x00|\x00\x00j\x02\x00\x83\x00\x00D\x83\x01\x00\x83\x01\x00\x83\x01\x00S(\x03\x00\x00\x00Ns\n\x00\x00\x00MyDict({})c\x01\x00\x00\x00\x02\x00\x00\x00\x02\x00\x00\x00s\x00\x00\x00s\x15\x00\x00\x00|\x00\x00]\x0b\x00}\x01\x00|\x01\x00V\x01q\x03\x00d\x00\x00S(\x01\x00\x00\x00N(\x00\x00\x00\x00(\x02\x00\x00\x00t\x02\x00\x00\x00.0t\x01\x00\x00\x00i(\x00\x00\x00\x00(\x00\x00\x00\x00s\x07\x00\x00\x00<stdin>s\t\x00\x00\x00<genexpr>\x03\x00\x00\x00s\x02\x00\x00\x00\x06\x00(\x03\x00\x00\x00t\x06\x00\x00\x00formatt\x04\x00\x00\x00dictt\x05\x00\x00\x00items(\x01\x00\x00\x00t\x04\x00\x00\x00self(\x00\x00\x00\x00(\x00\x00\x00\x00s\x07\x00\x00\x00<stdin>t\x08\x00\x00\x00__repr__\x02\x00\x00\x00s\x02\x00\x00\x00\x00\x01q\x12\x85q\x13Rq\x14c__builtin__\n__main__\nh\x0fNN}q\x15tq\x16Rq\x17U\x07__doc__q\x18Nutq\x19Rq\x1a)\x81q\x1bU\x01aq\x1ch\x10(h\x11U\\c\x01\x00\x00\x00\x01\x00\x00\x00\x01\x00\x00\x00C\x00\x00\x00s\x04\x00\x00\x00|\x00\x00S(\x01\x00\x00\x00N(\x00\x00\x00\x00(\x01\x00\x00\x00t\x01\x00\x00\x00x(\x00\x00\x00\x00(\x00\x00\x00\x00s\x07\x00\x00\x00<stdin>t\x08\x00\x00\x00<lambda>\x01\x00\x00\x00s\x00\x00\x00\x00q\x1d\x85q\x1eRq\x1fc__builtin__\n__main__\nU\x08<lambda>q NN}q!tq"Rq#s}q$b.' 
```

# arrays - 查找数组中的共同元素

> ID：10364821
> 
> 赞同：0
> 
> 时间：2012-04-28T15:17:44.447
> 
> 标签：arrays, perl

我有一个哈希值是数组。我需要找到这些数组的共同元素，即。存在于所有数组中的元素。所以我将散列的值提取到一个多维数组中，其每一行对应于散列中的一个数组。然后我将该矩阵的第一行放入另一个数组 (@arr1) 并遍历它以查找 arr1 中是否有任何元素也在矩阵的其余行中。如果找到这样的元素，则将其推送到包含所有元素的最终列表的另一个数组中。代码如下（希望够清楚）：

```
sub construct_arr(my %records) {
    my $len = keys %records;
    my @matrix;
    my $i = 0;

    # Extract the values of the hash into a matrix
    foreach my $key (keys %records) {
        $matrix[$i] = $records{$key};
        $i++;   
    }

    my @arr1 = $matrix[0];
    my @final;

    # Iterate through each element of arr1
    for my $j (0..$#{$arr1[0]}) {
        my $count = 1;

        # Iterate through each row of the matrix, starting from the second
        for ( my $i = 1; $i < $len ; $i++ ) {
            my $flag = 0;

            # Iterate through each element of the row
            for my $k (0..$#{$matrix[$i]}) {
                if ($arr1[0][$j] eq $matrix[$i][$k]) {
                    $flag = 1;
                    $count++;
                }
            }

            # On finding the first instance of the element in a row, go to the next row
            if (!$flag == 1) {
                last;
            }       
        }

        # If element is in all the rows, push it on to the final array
        if ($count == $len) {
            push(@final, $arr1[0][$j]);
        }
    }
    return @final;
} 
```

我知道上述方法有效，但我想知道是否有任何其他（perlish）方法可以做到这一点。我开始学习 perl，我很想知道与其他语言相比，可以让我在 perl 中的工作更轻松的事情。如果我的代码是可以做到的最好的，也请告诉我。任何指导将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T17:51:53.120

查看[*Chris Charley 的*](https://stackoverflow.com/a/10364891/622310)计算数组交集的[链接。](https://stackoverflow.com/a/10364891/622310)

哈希是解决此类问题的明确方法。`map`和一个解决方案一起`grep`可以减少到几行。

该程序使用[*sundar 的*](https://stackoverflow.com/users/8127/sundar)数据来解决任何更好的问题，并且似乎可以满足您的需要。

```
use strict;
use warnings;

my %records = (
  a => [ qw/ A B C / ],
  b => [ qw/ C D E A / ],
  c => [ qw/ A C E / ],
);

print "$_\n" for construct_arr(\%records);

sub construct_arr {
  my $records = shift;
  my %seen;
  $seen{$_}++ for map @$_, values %$records;
  grep $seen{$_} == keys %$records, keys %seen;
} 
```

**输出**

```
A
C 
```

* * *

**编辑**

我认为查看您自己的解决方案的更 Perlish、整洁的版本可能会有所帮助。

```
use strict;
use warnings;

my %records = (
  a => [ qw/ A B C / ],
  b => [ qw/ C D E A / ],
  c => [ qw/ A C E / ],
);

print "$_\n" for construct_arr(\%records);

sub construct_arr {

  my $records = shift;
  my @matrix = values %$records;
  my @final;

  # iterate through each element the first row
  for my $i ( 0 .. $#{$matrix[0]} ) {

    my $count = 1;

    # look for this value in all the rest of the rows, dropping
    # out to the next row as soon as a match is found
    ROW:
    for my $j ( 1 .. $#matrix ) {
      for my $k (0 .. $#{$matrix[$j]}) {
        next unless $matrix[0][$i] eq $matrix[$j][$k];
        $count++;
        next ROW;
      }
    }

    # If element is in all the rows, push it on to the final array
    push @final, $matrix[0][$i] if $count == @matrix;
  }

  return @final;
} 
```

输出与我自己的程序相同，但功能略有不同，因为我假设每行中的值都是唯一的。如果 sama 值多次出现，我的解决方案将中断（这同样适用于*sundar's*）。请让我知道这是否可以接受。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T01:17:32.557

尽管张贴者解释说单个数组中没有重复项，但我的尝试也处理了这种情况（请注意稍作修改的测试数据 - 不应打印“5”）：

```
#!/usr/bin/env perl
use warnings;
use strict;

my %records = (
    a => [1, 2, 3],
    b => [3, 4, 5, 1],
    c => [1, 3, 5, 5]
);

my %seen;
while (my ($key, $vals) = each %records) {
    $seen{$_}{$key} = 1 for @$vals;
}

print "$_\n" for grep { keys %{$seen{$_}} == keys %records } keys %seen; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T16:42:56.407

您可以使用轻松找到散列的大小`scalar(keys %hash);`

这是一个示例代码，可以满足您的需要：

```
#!/usr/bin/perl

use strict;
use warnings;

my %records = ( a => [1, 2, 3],
                b => [3, 4, 5, 1],
                c => [1, 3, 5]
              );

my %count;
foreach my $arr_ref (values %records) {
    foreach my $elem (@$arr_ref) {
        $count{$elem}++;
    }
}

my @intersection;
my $num_arrays = scalar(keys %records);
foreach my $elem (keys %count) {
    #If all the arrays contained this element, 
    #allowing for multiple entries per array
    if ($count{$elem} >= $num_arrays) {
        push @intersection, $elem;
    }
} 
```

如果您需要对此代码进行任何说明，请随时发表评论。构造 @intersection 数组的第二个 foreach 只是为了清楚起见才以这种方式编写 - 如果您正在学习 Perl，我建议您使用该`map`构造来学习和重写它，因为这可以说是更惯用的 Perl。

# java - JSF + SpringSecurity url 未被拦截

> ID：10364825
> 
> 赞同：0
> 
> 时间：2012-04-28T15:17:54.437
> 
> 标签：java, jsf, spring-security

我在运行 JSF 和 Spring Security 时遇到问题。

WEB.xml：

```
 <!-- spring and jsf configuration files mapping -->
    ...

    <!-- JSF mapping -->
    ...

    <!-- Spring Security -->
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>
            org.springframework.web.filter.DelegatingFilterProxy
        </filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

</web-app> 
```

安全上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/security
    http://www.springframework.org/schema/security/spring-security-3.0.3.xsd">

    <http auto-config="true">
        <intercept-url pattern="/pages**" access="ROLE_USER" />
    </http>

    <authentication-manager>
        <authentication-provider>
            <user-service>
                <user name="evgeny" password="123" authorities="ROLE_USER" />
            </user-service>
        </authentication-provider>
    </authentication-manager>

</beans:beans> 
```

并且[http://localhost:8081/spring/pages/userInfo.jsf](http://localhost:8081/spring/pages/userInfo.jsf)访问没有问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T07:29:36.997

根据您提供的示例 URL ( [http://localhost:8081/spring/pages/userInfo.jsf](http://localhost:8081/spring/pages/userInfo.jsf) )

```
<intercept-url pattern="/pages**" access="ROLE_USER" /> 
```

应更改为以下以匹配它

```
<intercept-url pattern="/spring/pages**" access="ROLE_USER" /> 
```

# d - 为什么我必须投这个？

> ID：10364837
> 
> 赞同：4
> 
> 时间：2012-04-28T15:19:04.253
> 
> 标签：d

我将这个问题浓缩为一个小的代表性样本：

```
import std.stdio;

class Foo
{
    private int f;
}

class State
{
    private Foo foo;
    const Foo getFoo()
    {
        return foo; // This line here.
    }
}

void main()
{
    auto s = new State;
    writeln(s.getFoo());
} 
```

我把那个代码放在`test.d`.

```
$ gdmd test.d
test.d:13: Error: cannot implicitly convert expression (this.foo) of type const(Foo) to test.Foo 
```

我知道它告诉我用 转换返回值`cast(test.Foo)foo`，但是为什么呢？为什么它将成员解释为类型`const(Foo)`，为什么需要我抛弃它`const`？我觉得我在这里做错了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T01:24:23.183

```
const Foo getFoo() 
```

是相同的

```
Foo getFoo() const 
```

它使不可见的`this`参数`const`。因为`const`在 D 中是可传递的，这意味着当您尝试从 中返回一个成员变量时`this`，它`const`也会如此。如果`foo`是一个值类型，那么它只会复制它，然后返回一个可变的`Foo`不会有问题，因为它不会影响原来的。But`Foo`是一个类，因此是一个引用类型。因此，返回是返回对所持有的`foo`完全相同的对象的引用。`State`没有复制。所以它*必须*是`const`- 否则你会违反`this`参数的常量。

*不*，抛弃`const`不是一个好的解决方案。正如在[这个问题](https://stackoverflow.com/questions/4219600/logical-const-in-d)中所讨论的，丢弃然后改变值在 D 中实际上是非法的。当你这样做时，你违反了类型系统。编译器会让你这样做，但如果你在这样做时将自己的生命掌握在自己手中。如果底层对象实际上是 ，则尤其糟糕，因为在这种情况下您可能会遇到段错误。只有在万不得已的情况下，你才会抛弃它，除非你*真的*知道自己在做什么，否则你*永远不会改变它。**`const``immutable``const`*

 ***不，正确的解决方案是使返回类型`const`：

```
const(Foo) getFoo() const 
```

现在，您可以返回`foo`并使用它。如果你想要一个可变的`Foo`，那么你要么没有，要么你必须`getFoo`返回一个. 例如`const``getFoo``foo`

```
Foo getFoo() const
{
    //This would be cleaner if you provided a clone/dup function
    //of some kind on Foo.
    auto retval = new Foo;
    retval.f = foo.f;

    return retval;
} 
```

你要从这里带走的重要一点是`const`in D 是*传递*的。正如沃尔特·布莱特（Walter Bright）所说，“从头到尾都是乌龟。” 一旦某件事是`const`，它的*所有*部分都是`const`，除非你*真的*知道你在做什么，否则*不要*抛弃`const`它来绕过它。因此，如果要返回引用函数的成员变量的引用类型，则需要创建返回类型或创建它的副本并将其返回。*`const``const`*

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T02:10:55.010

我怀疑你真正想要的是：

```
class State
{
    private Foo foo;

    // When `this` is const, return const(Foo).
    // When `this` is immutable, return immutable(Foo).
    // When `this` is mutable, return Foo.
    inout(Foo) getFoo() inout
    {
        return foo;
    }
} 
```

这相当于：

```
class State
{
    private Foo foo;

    Foo getFoo()
    {
        return foo;
    }

    const(Foo) getFoo() const
    {
        // `this.foo` is of type const(Foo), as const is transitive.
        return foo;
    }

    immutable(Foo) getFoo() immutable
    {
        // `this.foo` is of type immutable(Foo), as immutable is transitive.
        return foo;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-28T15:22:35.007

它将成员解释为`const(Foo)`因为您的方法签名是`const Foo getFoo()`，这意味着`foo`不会是可变的。

删除`const`它应该没问题。****

# android - 显示应用小部件选择列表

> ID：10364838
> 
> 赞同：0
> 
> 时间：2012-04-28T15:19:14.987
> 
> 标签：android

如何打开通常由用户打开的应用小部件安装列表？

长按主屏幕并打开 wdget，我要显示此列表。

我知道当我用户打开小部件选择时会运行此代码：

```
Starting activity: Intent { act=android.appwidget.action.APPWIDGET_PICK cmp=com.android.settings/.AppWidgetPickActivity (has extras) }

Displayed activity com.android.settings/.AppWidgetPickActivity: 470 ms (total 470 ms) 
```

我假设哪些附加功能用于 list ？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:47:57.233

看看 Commonsware 对这个问题的回答：[Add widget to homescreen from Android application](https://stackoverflow.com/questions/10449884/add-widget-to-homescreen-from-application-android)

您可以打开列表，但您将无法使用选择，即安装 appwidget。为此，您的应用程序必须有一个 AppWidgetHost 工作（主屏幕应用程序属于此类）

# c# - 在 C# 中使用字典的正确方法是什么？

> ID：10364844
> 
> 赞同：1
> 
> 时间：2012-04-28T15:20:05.463
> 
> 标签：c#, performance, object, coding-style, dictionary

我有（很多）`Foo`具有唯一性的对象，`ID`并希望将它们存储在`Dictionary`. C# 中的字典键可以是任何基本类型或对象。我可以使用整数`foo1.ID`作为键，也可以使用对象`foo1`。

哪种是实现它的正确方法，使用`ID`（整数）或对象作为键在性能上是否存在差异？

注意。字典中的值是对象的其他（类型）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T15:22:36.737

这取决于您的用例。假设您想查找*给定键值*的对象，您当然希望 id 成为键。你问这个问题让我想也许你根本不需要字典 - 如果你只需要保留一组项目，请使用 a`List<T>`代替 - 字典用于将键（例如 id）映射到值（例如自定义对象）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T15:24:05.163

你打算如何*搜索*字典？如果您打算完全基于 搜索字典中的项目`ID`，则使用它作为键。OTOH，如果您要拥有 a 的实例`Foo`，则将其设为关键。

* * *

回复：您的编辑 - 现在我们知道这`Foo`是“键”或“通过访问属性提供键值的对象”，那么说起来似乎很简单，使用`Dictionary<Foo,OtherClass>`- 假设您已经设置了相等比较`Foo`适当的对象 - 为什么要强制每个查找实例知道从对象中提取特定属性`Foo`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T15:27:15.550

无论您使用什么作为密钥，都必须能够进行比较。对于原始类型，相等性通常按照您的预期定义。对于对象，您将测试引用相等性，除非您定义了另一种比较对象的方法，您可以通过`IComparer`在`Dictionary`构造函数中传递适当的类型来做到这一点。

但是，在您的情况下，键入`int`可能是最简单的。将对象用作自己的密钥并没有真正的好处。您可以简单地通过获取`Foo`对象集合并执行以下操作来创建字典：

```
IDictionary<int, Foo> fooDictionary = fooCollection.ToDictionary(f => f.ID); 
```

在大多数情况下，搜索字典比每次都简单地搜索给定 ID 的集合更有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-28T15:30:11.900

字典是`Key Value Pairs`. 每个键都应该是唯一的。编译器必须确保密钥是唯一的。通过将密钥作为对象而不是整数提供，您可能会做的太过分了。编译器通过比较来检查 Key 中的整个对象，以确保它是唯一的。因此，如果可以帮助您唯一地识别您的记录，我会选择 Integer Key。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T15:23:11.797

使用 ID - 如果您已经拥有该对象，那么查找它也没有任何意义。

# c# - 来自 Linq 的 ObservableCollection

> ID：10364847
> 
> 赞同：1
> 
> 时间：2012-04-28T15:20:22.797
> 
> 标签：c#, linq, xaml, binding, observablecollection

有人可以在这里看到我需要更改的内容吗？我正在显示 AddressTypeClass 项目的 observablecollection。对象项而不是数据显示在列表框中。我可以在调试模式下查看对象中的数据。

XAML.CS 文件：

```
DataContext MyTableDataContext = new MyTableDataContext();
ObservableCollection<AddressTypeClass> theOC = new ObservableCollection<AddressTypeClass>(new MyTableDataContext().AddressTypes.AsEnumerable()
        .Select(lt => new AddressTypeClass
        {
          AddressTypeID = lt.AddressTypeID,
          AddressType = lt.AddressType,
        })
          .ToList());
this.listBox1.ItemsSource = theOC; 
```

XAML 文件：

```
<ListBox Name="listBox1" Margin="8" Height ="200" Width ="150" FontSize="12" Foreground="#FF2F3806"  ItemsSource="{Binding AddressType}" IsSynchronizedWithCurrentItem="True" >
    </ListBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T15:35:20.293

您需要将 ItemTemplate 添加到您的 ListBox，例如

```
<ListBox Name="listBox1" Margin="8" Height ="200" Width ="150" FontSize="12" Foreground="#FF2F3806"  ItemsSource="{Binding AddressType}" IsSynchronizedWithCurrentItem="True" >
   <ListBox.ItemTemplate>
    <DataTemplate>
      <StackPanel>
        <TextBlock Text="{Binding Path=AddressType}" />
      </StackPanel>
    </DataTemplate>
  </ListBox.ItemTemplate>
</ListBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-19T12:26:01.300

您可以使用我的[ObservableComputations](https://github.com/IgorBuchelnikov/ObservableComputations)库来改进您的代码。在您的代码中，每次 MyTableDataContext.AddressTypes [dbSet](https://docs.microsoft.com/en-us/dotnet/api/system.data.entity.dbset?view=entity-framework-6.2.0)（我假设您正在使用 EntityFramework）更改（新项目或删除）或属性（AddressType.AddressTypeID，AddressType.AddressType）更改时，您都会手动更新 OC。使用 AddressType 您可以自动化该过程：

```
DataContext MyTableDataContext = new MyTableDataContext();
ObservableCollection<AddressTypeClass> theOC = MyTableDataContext.AddressTypes.Local
        .Selecting(lt => new AddressTypeClass
        {
          AddressTypeID = lt.AddressTypeID,
          AddressType = lt.AddressType,
        });
this.listBox1.ItemsSource = theOC; 
```

theOC 是[ObservableCollection](https://docs.microsoft.com/en-us/dotnet/api/system.collections.objectmodel.observablecollection-1?view=netframework-4.8)，反映了上面代码中提到的 MyTableDataContext.AddressTypes.Local 集合和属性的所有变化。确保上面代码中提到的所有属性都通过[INotifyProperytChanged](https://docs.microsoft.com/en-us/dotnet/api/system.componentmodel.inotifypropertychanged?view=netframework-4.8)接口通知更改。

# objective-c - 添加滚动视图并使其缩放

> ID：10364850
> 
> 赞同：0
> 
> 时间：2012-04-28T15:20:37.313
> 
> 标签：objective-c, uiview, scroll, zooming, scrollview

在我的 iphone 应用程序中，您会得到一个带有背景图像和“开始按钮”的 UIView。当您点击开始按钮时，开始按钮将被隐藏，您的背景也会被隐藏。您将看到另一个图像。您还将获得一个“后退按钮”。您应该能够缩放图像并滚动。我希望所有东西都在同一个 UIView 上。

当您点击后退按钮时，一切都应该回到第一个背景图像和开始按钮，并且您应该无法缩放或滚动。

我怎样才能做到这一点？是否有可能隐藏滚动视图以便在同一视图中仅显示常规屏幕？

提前致谢！

编辑：好的，我现在知道如何隐藏滚动视图，但是当显示滚动视图时，您无法滚动！我使滚动视图比屏幕大，并在“原始屏幕”下方放置了一个标签。如何让它滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T03:32:59.823

将 a 添加`UIScrollView`到您拥有缩放/可滚动图像的主视图中。只需按下后退按钮即可将其移除。

# python - 通过 uWSGI 时 Flask debug=True 不起作用

> ID：10364854
> 
> 赞同：39
> 
> 时间：2012-04-28T15:21:09.893
> 
> 标签：python, wsgi, flask

我调用`app.run(debug=True)`了我的烧瓶文件。

我已经用 uWSGI 和 nginx 部署了它（我按照[这些说明](http://readncode.com/blog/Deploying-Flask-with-nginx-uWSGI-and-Supervisor/)进行操作）

```
uwsgi -s /tmp/uwsgi.sock -w flask_file_name:app -H /path/to/virtual/env --chmod-socket 666 
```

但是当我收到错误时，我在浏览器或 uWSGI 日志中没有得到任何调试信息。

有任何想法吗？

烧瓶文件名.py：

```
from flask import Flask, make_response, Response, jsonify
import json

app = Flask(__name__)
app.debug = True

@app.route("/")
def hello():
    return "Hello World!"

if __name__ == '__main__':
    app.run() 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-07-24T16:29:01.233

这个问题很老，但我会发布这个以供将来参考......

如果您想让 werkzeug 错误页面与 uwsgi 一起使用，请尝试使用 werkzeug 的`DebuggedApplication`中间件：

```
from werkzeug.debug import DebuggedApplication
app.wsgi_app = DebuggedApplication(app.wsgi_app, True) 
```

这应该可以解决问题，但不要忘记仅在开发环境中这样做。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-05-05T09:12:09.017

根据[Flask 邮件列表](http://flask.pocoo.org/mailinglist/archive/2011/10/19/debug-when-deploy-in-uwsgi/#7be089baf631971dfb73a5a7b79e2248)，您不能将 Flask 的调试选项与 一起使用`uWSGI`，因为它不能在分叉环境中使用。

> 你看到 502 是因为 flask/werkzeug 没有向网络服务器发送任何数据，所以 nginx 会返回一个 502。
> 
> 您可以在 uWSGI 中使用 --catch-exceptions 选项模拟调试器（但请不要在生产环境中这样做）

所以，你看到 502 的原因就是这个。解决方法是在执行时`--catch-exceptions`添加`uWSGI`。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-04-28T15:33:30.430

问题是`uwsgi`不调用`app.run()`。它调用`app()`. 因此，您可以这样做：

```
from flask import Flask
app = Flask(__name__)
app.debug = True 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-06-19T20:44:32.040

对我来说，它只有在我像这样结合上面的两个答案后才起作用：

```
from flask import Flask
app = Flask(__name__)

from werkzeug.debug import DebuggedApplication
app.wsgi_app = DebuggedApplication(app.wsgi_app, True)

app.debug = True 
```

# couchdb - CouchDB 授权逻辑？

> ID：10364864
> 
> 赞同：5
> 
> 时间：2012-04-28T15:22:26.133
> 
> 标签：couchdb, couchdb-futon

我确实阅读了[http://guide.couchdb.org/draft/security.html](http://guide.couchdb.org/draft/security.html)和

和上一个问题 [CouchDB Authorization on a Per-Database Basis](https://stackoverflow.com/questions/4055450/couchdb-authorization-on-a-per-database-basis) 和 [http://wiki.apache.org/couchdb/Security_Features_Overview](http://wiki.apache.org/couchdb/Security_Features_Overview)

我目前正在使用 Apache CouchDB 1.2.0 并通过 futon 添加管理员导致在 _users 添加用户

```
_id
org.couchdb.user:stackoverflow
 _rev 
1-b9f223532b662d4ac52d14082d81e6a5

name
stackoverflow

password
null

roles
[ ]

type
user 
```

所以第一个问题是为什么将管理员添加为用户类型而不是管理员是令人费解的。该用户是管理员，因为他们可以在任何数据库中执行任何操作，并且角色为空，但我确实保护了 _users 文档

```
["admin"] 
```

作为唯一成员和管理员的角色可以访问它（即使他们在 _users 文档中的角色为空）。

此保护不允许创建新的“普通”用户，因此蒲团“注册”命令将返回注册错误：您无权访问此数据库。

我认为这种设置是唯一合乎逻辑的设置。为什么您希望任何人都能够在您的数据库上创建用户？

即使您将数据库中的读取权限指定为仅适用于一个管理员，每个管理员都可以访问它

```
(

 " admins" : {
   "names" : ["guru"],
   "roles" : ["boss"]
  },
  "readers" : {
    "names" : ["guru"],
   "roles" : ["boss"]
  }
} 
```

根据上面的示例，上述情况对新创建的 stackoverflow 管理员没有影响。

所以我的假设是，通过蒲团创建的管理员可以做任何事情。唯一令人困惑的逻辑部分是 _users 文档，它们没有特殊类型（他们是用户）也没有特殊角色。

回到具体问题： - 当通过蒲团添加管理员时，为什么它没有在 _users 文档中标记为管理员，以及该文档中的 CouchDB 如何确定它是一个广泛的系统管理员？- 如果您想创建一个普通用户而不允许他们注册（通过被褥或直接 HTTP 请求），您必须保护 _users 文档。但是，您将如何创建自己的用户以在自己的数据库上读/写？- 由于用户（根据 CouchDB Docs）将拥有数据库的读/写权限，但没有创建设计文档的可能性，他如何才能真正有效地使用它，因为任何使用数据库开发的人都需要视图？

应该可以在不危及安全性的情况下进行正常的、简单的多主机托管，因为在[http://www.iriscouch.com/](http://www.iriscouch.com/)上有一个共享的 CouchDB 产品，所以我只是不明白您将如何合理地构建一个简单的服务，其中用户有他自己的数据库，可以做*任何事情*，但只能在这个数据库上。由于管理员角色无论如何都是“用户”，您如何将它们与 _users 表中的非管理员区分开来？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-29T00:36:21.380

## 为什么将管理员添加为普通用户而不是管理员？

CouchDB 类似于 Windows 的 Active Directory 或 Unix NIS 和 LDAP：大多数用户都有“普通”帐户，但是*管理员帐户*（例如 Windows“管理员”或 Unix“root”）不*使用*普通的记帐系统，而是更简单的系统（`local.ini`配置文件）。

如果帐户和身份验证系统出现问题，您仍然可以以管理员身份登录并修复它。

## 我需要为用户添加“_admin”角色吗？

不，管理员角色（角色`"_admin"`）不是来自用户的文档，而只是来自“管理员”部分的配置。

## 为什么所有管理员都可以读取数据库？

通过在全局配置中创建管理员（编辑`local.ini`文件，或使用 Futon 的“配置”选项卡，或单击管理员组中的“修复此”链接），您创建了一个**系统**管理员。系统管理员始终可以访问所有数据（类似于 Windows 管理员和 Unix root）。

CouchDB 支持普通用户的**数据库管理员。**这些用户仅具有对数据库的管理员访问权限，而不是对其他任何内容（例如其他数据库或服务器配置）的管理员访问权限。通过将用户名或角色添加到“管理员”列表中，可以在“安全”部分设置数据库管理员。

## 具体问题： - 通过蒲团添加管理员时，为什么它没有在 _users 文档中标记为管理员，以及该文档中的 CouchDB 如何确定它是一个广泛的系统管理员？

通过 Futon 添加管理员时，会发生两件事

1.  创建了一个**普通**用户（实际上没有有效密码）
2.  *相同*的用户名被添加到系统配置“管理员”部分。得到`/_config/admins/the_username`看到它。（这就是 Futon 的配置选项卡所做的。）

换句话说，CouchDB 不知道它是来自*文档*的广泛系统管理员，而是来自配置。如果您删除该配置条目，则用户将“降级”回普通用户。

## 关于 Iris Couch 的旁注

一开始可能会有点困惑，但是一旦你学会了 CouchDB 用户和安全系统，它就非常简单且强大。但是每个 Iris Couch*用户*都有完整的 CouchDB*服务器*。如果您注册，您在 Iris Couch 上有一个帐户，但您有一个完整的 CouchDB 服务器可供使用。*在该服务器*中，您可以为自己的应用程序创建多个用户。

# android - PhoneGap - 与 Android 上的浏览 器相比性能较差

> ID：10364868
> 
> 赞同：9
> 
> 时间：2012-04-28T15:22:44.177
> 
> 标签：android, jquery-mobile, cordova

我使用 jquery mobile 和 phonegap 为 android 开发了一个应用程序。我通过 USB 将应用程序部署到我的设备上。该应用程序的性能非常糟糕，尤其是在滚动更长的列表时。

奇怪的是：如果我打开手机浏览器直接访问 index.html，整个应用程序运行流畅。同样的技术，同样的内容。我不使用 phonegap native api 或任何类似的东西。

在 android 4.0.2 上使用 phonegap 1.5.0 和 1.7.0rc1、jquery mobile 1.1.0 进行了测试。

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-10T09:26:21.133

在蜂窝 (3.0)、冰淇淋 (4.0) 和后置设备上，您可以通过在 <Application ... > 标签中添加以下内容来提高性能：

```
android:hardwareAccelerated="true" 
```

您可以将 minSdk 设置为 8 (Android 2.2) 以实现兼容性，将 targetSdk 设置为 15 (Android 4.0)，这将使硬件加速仅在设备上可用时工作。

我相信有了这个标志，我的应用程序的性能就等于在浏览器中运行它们，所以我猜是因为浏览器是用硬件加速编码的:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-28T14:42:51.983

我有一个类似的问题：一个页面包含更长的“中等复杂”主题 div 列表。HTC手机的浏览器显示没有问题。但在 phonegap 应用程序内渲染完全失败。我看到了一种WSOD，只有在触摸显示屏后才消失。触摸后，页面显示正确。

当我将 div 列表缩短为一两个 div 元素时，或者当我减少 div 中的子元素并减少由 css 复杂性引起的渲染工作时，问题就没有出现。

如果整个身体不可见，则白色屏幕看起来像，因为仅显示文档背景色（为此我添加了浅粉色）。[所以我想，在阅读了这个帖子](https://stackoverflow.com/questions/17962378/white-page-when-loading-while-using-jquery-mobile)之后，渲染是问题所在

我尝试了[在此线程](https://stackoverflow.com/questions/7422427/android-webview-slow)中找到的各种建议，以使应用程序在没有“WSOD”的情况下运行。但没有任何效果。其中一些使应用程序的显示效果变得更糟。

终于，经过一整天的搜索，我成功了。我在我的 AndroidManifest 的标签（不是标签）中设置

```
<application android:hardwareAccelerated="false" ... 
```

现在，该应用程序的运行方式与我的网络浏览器相同。似乎，如果硬件加速并不总是最好的功能......

我的版本：phonegap 3.5.0、Android 4.0.3、jQuery v2.1.0、HTC Sense 3.6

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T17:08:57.960

在这里找到了答案：[http ://groups.google.com/group/phonegap/browse_thread/thread/94da1cf881abe995/6d4f7aea7aeba523?lnk=gst&q=performance](http://groups.google.com/group/phonegap/browse_thread/thread/94da1cf881abe995/6d4f7aea7aeba523?lnk=gst&q=performance)

在 javascript 性能方面，本机浏览器和 webview 之间可能存在差异。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T17:16:51.403

如果您可以确认浏览器的性能更好（在您的代码中不是次优的东西令人沮丧，但不是另一种），您可以考虑部署为 html5 离线应用程序，以便您可以在浏览器中实际运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T20:01:09.483

我们在使用 jquery mobile 滚动相同数量的列表项时遇到了性能问题。性能太差了（我们甚至没有在 PhoneGap 环境中尝试过），我们使用 iScroll 库重写了应用程序......现在应用程序滚动非常流畅。

如果您处于开发初期，您可以尝试更改 UI 库。

在这种情况下，我们经常部署我们的应用程序来测试设备以及时管理性能问题......这成为了一项“政策”:)

# c++ - 是否可以使用 32 位操作系统创建 64 位程序

> ID：10364873
> 
> 赞同：2
> 
> 时间：2012-04-28T15:22:53.380
> 
> 标签：c++, visual-studio-2010, 32bit-64bit

我有 32 位 Windows 7，我正在使用 Visual Studio 2010 Express。

是否可以为 64 位平台创建解决方案？

如果可能，它是如何完成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T15:32:08.293

如果您编写托管代码并以 AnyCPU 为目标，则代码将被跳转到适合其执行平台的程序集

[http://www.hanselman.com/blog/BackToBasics32bitAnd64bitConfusionAroundX86AndX64AndTheNETFrameworkAndCLR.aspx](http://www.hanselman.com/blog/BackToBasics32bitAnd64bitConfusionAroundX86AndX64AndTheNETFrameworkAndCLR.aspx)

要直接针对 Visual Studio *Express*中的 64 位应用程序，除了 Visual C++ Express 之外，还需要安装 Windows 软件开发工具包 (SDK)。

[http://msdn.microsoft.com/en-us/library/9yb4317s.aspx](http://msdn.microsoft.com/en-us/library/9yb4317s.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T15:30:27.643

也许MSDN[上的“如何：在命令行中启用 64 位 Visual C++ 工具集”会有所](http://msdn.microsoft.com/de-de/library/x4d2c09s%28v=vs.100%29.aspx)帮助，但它是针对 VS2010*而不是*express。基本上这都是关于拥有一个交叉编译器的。

**编辑：**除此之外，还有[How to: Configure Visual C++ Projects to Target 64-Bit Platforms](http://msdn.microsoft.com/de-de/library/9yb4317s.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T15:30:54.070

cl64.exe 本身是一个 32 位程序。它只产生 64 位代码。在 Visual Studio 中创建一个 Win32 项目，并在配置管理器中创建一个新的目标平台。

# c++ - 从可变参数模板创建 std::array

> ID：10364874
> 
> 赞同：2
> 
> 时间：2012-04-28T15:22:56.550
> 
> 标签：c++, templates, c++11, variadic-templates

我想实现这样的目标：

```
#include <string>
#include <array>

enum class MyEnum{
  A,
  B,
  C
};

template<MyEnum... Args>   
class MyClass{
  public:
    MyClass()
    {
    }
  private:
    std::array<MyEnum, sizeof...(Args)> array;   
}; 
```

现在我有一个数组，它可以保存所有传递给模板的值。但是我怎样才能用模板参数填充这个数组呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T16:12:23.817

如果您想要将所有`MyEnum`值放入`array`，那么您可以~~将它们解压缩到初始化列表中并`array`使用它~~ **进行初始化，并使用直接初始化对其进行初始化**：

```
MyClass() : array {{ Args... }} { } 
```

但是，您需要一个相当新的编译器才能使用这种语法。

感谢 Xeo 纠正我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T16:42:25.357

```
MyClass()
{
    std::initializer_list<MyEnum> il( {Args...} );
    std::copy (il.begin(), il.end(), array.begin());
} 
```

# c++ - c ++如何从路径字符串中删除文件名

> ID：10364877
> 
> 赞同：29
> 
> 时间：2012-04-28T15:23:17.693
> 
> 标签：c++, string, filesystems

我有

```
const char *pathname = "..\somepath\somemorepath\somefile.ext"; 
```

如何将其转换为

```
"..\somepath\somemorepath" 
```

?

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-04-28T15:29:28.080

最简单的方法是使用[`find_last_of`](http://en.cppreference.com/w/cpp/string/basic_string/find_last_of)成员函数`std::string`

```
string s1("../somepath/somemorepath/somefile.ext");
string s2("..\\somepath\\somemorepath\\somefile.ext");
cout << s1.substr(0, s1.find_last_of("\\/")) << endl;
cout << s2.substr(0, s2.find_last_of("\\/")) << endl; 
```

此解决方案适用于正斜杠和反斜杠。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-28T15:26:44.447

在 Windows 上使用[`_splitpath()`](https://msdn.microsoft.com/en-us/library/e737s6tf.aspx)和在 Linux 上使用[`dirname()`](http://linux.die.net/man/3/dirname)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-11T00:34:12.757

On Windows 8, use [`PathCchRemoveFileSpec`](http://msdn.microsoft.com/en-us/library/windows/desktop/hh707092(v=vs.85).aspx) which can be found in `Pathcch.h`

[`PathCchRemoveFileSpec`](http://msdn.microsoft.com/en-us/library/windows/desktop/hh707092(v=vs.85).aspx) will remove the last element in a path, so if you pass it a directory path, the last folder will be stripped.
If you would like to avoid this, and you are unsure if a file path is a directory, use [`PathIsDirectory`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773621(v=vs.85).aspx)

[`PathCchRemoveFileSpec`](http://msdn.microsoft.com/en-us/library/windows/desktop/hh707092(v=vs.85).aspx) does not behave as expected on paths containing forwards slashes.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-28T15:26:34.133

用于`strrchr()`查找最后一个反斜杠并剥离字符串。

```
char *pos = strrchr(pathname, '\\');
if (pos != NULL) {
   *pos = '\0'; //this will put the null terminator here. you can also copy to another string if you want
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-10T22:43:11.480

PathRemoveFileSpec(...) 你不需要 Windows 8。你需要包括 Shlwapi.h 和 Shlwapi.lib 但它们是 winapi 所以你不需要任何特殊的 SDK

# c# - 如何在 C# 中使用 ZedGraph 库绘制表示离散图的垂直线？

> ID：10364881
> 
> 赞同：2
> 
> 时间：2012-04-28T15:23:40.487
> 
> 标签：c#, zedgraph

这是我用来绘制离散图的代码：

```
private void DrawHartleyGraph(double [] values, ZedGraphControl zed)
        {
            GraphPane pane = zed.GraphPane;
            pane.CurveList.Clear();
            pane.XAxis.Title.Text = "ν";
            pane.YAxis.Title.Text = "H(ν)";
            pane.Title.Text = "ДПХ";
            PointPairList list = new PointPairList();
            for (int i = 0; i < values.Length ; i++)
            {
                list.Add((double)i, values[i]);
            }
            LineItem myCurve = pane.AddCurve("H(ν) - ДПХ", list, Color.Blue, SymbolType.Circle);
            myCurve.Line.IsVisible = false;
            myCurve.Symbol.Fill.Color = Color.Blue;
            myCurve.Symbol.Fill.Type = FillType.Solid;
            myCurve.Symbol.Size = 4;
            pane.XAxis.Scale.Min = 0;
            pane.XAxis.Scale.Max = numOfCountsN;
            pane.YAxis.Scale.Min = values.Min();
            pane.YAxis.Scale.Max = values.Max();
            pane.IsBoundedRanges = true;
            zed.AxisChange();
            zed.Invalidate();
        } 
```

我有这样的图片： ![离散图](../Images/2c89fedf4a18e8658575b2e27106f522.png)

如何绘制从 X 轴开始到点结束的垂直线，表示函数的值？

* * *

### 解决了

这是找到的决定。您需要以这种方式修改for循环：

```
for (int i = 0; i < values.Length ; i++)
{
    list.Add((double)i, values[i]);
    LineObj vertLine = new LineObj(Color.Red, i, 0,
          i, values[i]);
    pane.GraphObjList.Add(vertLine);
} 
```

# node.js - 如何删除旧版本的 node/npm？

> ID：10364884
> 
> 赞同：11
> 
> 时间：2012-04-28T15:24:15.260
> 
> 标签：node.js, npm

几个月前我一直在玩 node，因为它是一个快速发展的项目，我想我最近拿起它时需要更新它，不知道如何阅读[n](https://github.com/visionmedia/n)，我安装了它，安装了最新版本。

在我尝试使用之前一切都很好`npm`，这不起作用，请参阅[此问题](https://github.com/visionmedia/n/issues/63)。

所以我需要删除 n，我不知道如何删除我`n - {version}`为每个版本安装的所有节点版本。

然后我直接从 node.js 网站上运行安装程序，希望它能解决我遇到的所有问题。

Node 现在可以按预期工作，但*仍然*`npm`无法正常工作。

 *`npm-debug.log`尝试时显示的错误`npm install {package}`是：

```
ERR! Error: EISDIR, mkdir '/'
ERR! You may report this log at:
ERR!     <http://github.com/isaacs/npm/issues>
ERR! or email it to:
ERR!     <npm-@googlegroups.com>
ERR!
ERR! System Darwin 11.3.0
ERR! command "node" "/usr/local/bin/npm"
ERR! cwd /
ERR! node -v v0.6.15
ERR! npm -v 1.1.16
ERR! path /
ERR! code EISDIR
ERR! message EISDIR, mkdir '/'
ERR! errno {} 
```

我想要做的是重新安装 node + npm 并重新开始。

我正在使用Mac，并且对OS X的命令行+文件系统几乎没有经验，仍在尝试从Windows方式进行调整..（控制面板->卸载-> ....）。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T08:32:41.867

你能用[npm 网站](http://npmjs.org/)上的[这个脚本](http://npmjs.org/install.sh)试一试吗？

它应该清理您拥有的所有旧安装并安装最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-29T18:44:18.557

删除[除当前版本之外的所有缓存版本](https://www.npmjs.com/package/n#removing-versions)

```
sudo n prune 
```

检查所有这些版本的使用量`du -sh /usr/local/n/versions`。

还，

> 删除已安装的节点和 npm（不影响缓存版本）。这对于恢复到 node 的系统版本（如果在不同的位置），或者如果您不再希望使用 node 和 npm，或者正在切换到不同的管理方式很有用。

```
sudo n uninstall 
```*

# javascript - $.on() 在 stopPropagation() 之后冒泡；

> ID：10364887
> 
> 赞同：2
> 
> 时间：2012-04-28T15:24:22.123
> 
> 标签：javascript, jquery, html

我试图用来`.on()`告诉我我在一个区域内点击了什么。为了捕捉我点击的确切元素，我打电话`event.stopPropagation()`以防止它冒泡，但我的输出始终是`#containerDiv`它的内容。

我怎样才能确切地看到里面点击了什么`#containerDiv`？代码片段如下：

```
$("#containerDiv").on("click",function(event){
    event.stopPropagation();
    console.log($(this));
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T15:26:45.087

使用`event.target`，而不是`$(this)`；后者将始终是处理程序被分配到的元素。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-28T15:27:32.443

当您在容器上捕获事件时，该事件*已经冒泡了。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-28T15:31:17.580

尝试给`on()`方法 a `selector`：

```
$("#containerDiv").on("click", "*", function(event){
    event.stopPropagation();
    console.log($(this));
}); 
```

演示：http: [//jsfiddle.net/SnPjS/2/](http://jsfiddle.net/SnPjS/2/)

# ios - 在 Xcode 中创建 Sencha Touch、Phone Gap 项目

> ID：10364890
> 
> 赞同：0
> 
> 时间：2012-04-28T15:24:44.277
> 
> 标签：ios, xcode, cordova, sencha-touch, sencha-touch-2

创建煎茶项目时遇到问题，电话有差距。我的开发机器是Mac。

这些是我采取的步骤。

*   [从链接](http://phonegap.com/download-thankyou)下载的电话间隙。

*   使用在 xCode 中创建了一个项目`Cordova-based-application`

*   在 xCode 中运行应用程序。

*   `R-click`在项目和添加的`www`文件夹中出现 index.html 文件丢失的错误。我取消选中`copy items to destination folder`并“选中为任何添加的文件夹创建文件夹引用”

*   添加`www`文件夹后，我无法 R-Click 并在其中添加任何文件或创建文件夹。这是屏幕截图；

![在此处输入图像描述](../Images/3d9074e186f391892c38656e995afd72.png)

*   现在，当我运行应用程序时，它会显示`Cordova is working`. 我无法 R-Click 并在文件`www`夹中添加文件。

为什么会这样，我该如何解决？

*   我想下一步我应该将 Sencha Touch 2 文件添加到这个项目中。我不确定我应该采取的步骤。所以有人可以给我步骤或一个好的链接（它提供了一步一步的指导来完成这项工作）。

如果我错过了任何步骤，我到现在为止是否正确，请纠正我。我已经尝试完成这项工作超过 3 天了。

笔记：

1.  我的最终目标是在 iPhone 和 Android 设备上运行应用程序（Hello world 代码）。所以请帮助我。
2.  我已经完成了这个[教程](http://www.sencha.com/learn/a-sencha-touch-mvc-application-with-phonegap)

**更新 - 将 Senchatouch 项目添加到我的应用程序后**

![在此处输入图像描述](../Images/3c87c46df01c4210064acfe1ccf397a4.png)

当我扩展 SenchaTouch 项目时

![在此处输入图像描述](../Images/a6eac9e1eed3b4be53e1e1480b61aebb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T23:43:07.657

您将需要使用 Finder 来管理文件。用两根手指点击根项目并选择“在 Finder 中显示”。打开该目录后，使用 Finder 将 Sencha Touch 项目复制到该目录。您可以在 XCode 中编辑这些文件，但不能在 XCode 中执行大多数正常文件功能，因为 WWW 目录是引用目录。

# php - Memcache 不设置键

> ID：10364892
> 
> 赞同：0
> 
> 时间：2012-04-28T15:25:02.120
> 
> 标签：php, memcached, set

我遇到了 Memcache 无法设置密钥的问题。基本上我有我的测试页面：

```
$db=new db;
$my_test_cache=$db->query("SELECT `txt` FROM `lang` WHERE `pg`='front' LIMIT 2", 10); 
```

还有一个用于缓存的 db 类：

```
class db {
        public function query($query, $ttl=30, $cache=true, $compr=false) {
            global $memcache;
            if ($cache==true) {
                $res=$memcache->get(hash('md4', $query));
                if ($res!=false) {
                    echo 'this is cached';
                    return $res;
                }
                else {
                    $res=mysql_query($query);
                    $memcache->set(hash('md4', $query), $res, $compr, $ttl);
                    echo 'this is not cached<hr>
                    Query: ',$query,'<br/>
                    Md4: ',hash('md4',$query),'<br/>';
                    var_dump($res);
                    return $res;
                }
            }
            else return mysql_query($query);
            unset($res, $query);
        }
    } 
```

可悲的是，即使所有资源似乎都正常工作，这也不会设置任何要缓存的数据。又名我的页面输出：

*   这不是缓存查询：SELECT * FROM `lang`WHERE `pg`='front' LIMIT 2
*   Md4: 34aa4e46a15413f5091dac79c9e86306
*   类型的资源（7）（mysql结果）

有人会这么好心地告诉我在这里做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:32:38.230

错字：

```
 if ($cache=true) {
                  ^--- should be == 
```

同样，除非 memcache 比我想象的要聪明得多，否则您只是在缓存查询结果句柄，而不是实际的查询结果：

```
 $memcache->set(hash('md4', $query), $res, $compr, $ttl);
                                           ^^^^ 
```

那时， $res 只是一个随机数，而不是`txt`您请求的字段。您必须首先从该结果中提取一行才能检索数据：

```
 $result = mysql_query(...) or die(mysql_error());
       $row = mysql_fetch_assoc($result);
       $txt = $row['txt']; 
```

# java - struts 2 - 将参数从一页传递到另一页

> ID：10364894
> 
> 赞同：1
> 
> 时间：2012-04-28T15:25:18.957
> 
> 标签：java, struts2

帮助需要使用 Struts 2 传递参数。

```
<action name="Hfddisp1" class="model.HfddispAction" method="fetch_addesc">
   <result  >model.HfddispAction?ad_ref_no=${ad_ref_no}</result> 
</action> 
```

我的jsp是

```
<%@ taglib prefix="s" uri="/struts-tags" %>
<html>
   <head>
   </head>
<body>
   <h1> Iterator tag example 12</h1>
   <h3>Iterator with IteratorStatus 12</h3>
   <table>
      <tr class="even"> 
         <td><b>Ad_ref_no</b></td> 
         <td><b>Ad_title</b></td> 
      </tr> 
      <s:iterator value="hftbList" status="hftbListStatus">
      <tr>
  <s:if test="#hftbListStatus.even == true">
         <td style="background: #CCCCCC"><s:property value="ad_ref_no"  /> </td>
         <td style="background: #CCCCCC"><s:property value="ad_title" />  </td>
         <td  style="background: #CCCCCC">     
            <a href="<s:url action="Hfddisp1"/>">click here-1 </a>   
         </td>  
      </s:if>       
      <s:else>
         <td>
            <s:property value="ad_ref_no" />
         </td>
         <td>
            <s:property value="ad_title" />
         </td>
         <td >
            <a href="<s:url  action="Hfddisp2"/>
               <s:param name="ad_ref_no" value="%    {ad_ref_no}" />  ">
               click       here2
            </a>   
         </td>
      </s:else>
   </tr>
   </s:iterator>
   </table> 
```

我得到的错误是：

消息：没有为动作模型定义结果。HfddispAction 和结果大量测试在这里我可以说它是什么

文件：file:/E:/Web_workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/Gshax/WEB-INF/classes/struts.xml

我在迭代器中获取数据，但无法在另一个页面中显示它。

```
<--------qry is executed2hftb_add_master[ad_ref_no=huge volume of test goes here i can say what is it,email_address=null]
<--------qry is executed2huge volume of test goes here i can say what is it 
description successfully queried:1 huge volume of test goes here i can say what is it
Apr 26, 2012 12:07:04 PM org.apache.struts2.dispatcher.Dispatcher serviceAction
SEVERE: Could not find action or result 
```

从第一页我得到的输出是

```
Ad_ref_no Ad_title 

12123120  i am the king but not sing  click here-1  
213421123  new test1  click here-2  
4150  Ad_title ........11:32:08  click here-1  
4152  Ad_title ........11:32:09  click here-2  
4153  Ad_title ........11:32:10  click here-1 
```

当我单击单击此处-1时，我收到上述错误我正在尝试的只是将 AD REF NO 4150 传递给操作并在另一页中显示描述

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:17:54.123

使用 Struts2 url 和 param 标签...

目前你有这个：`<s:url action="Hfddisp2"/><s:param name="ad_ref_no" value="% {ad_ref_no}" />`注意 param 标签没有嵌套在 url 标签内。

你可以这样写：`<s:url action="Hfddisp2"><s:param name="ad_ref_no"/></s:url>`

请注意，上面的 param tags value 属性被省略，因为它默认解析提供的名称。

使用变量的几个属性可以使事情更清楚：

```
<s:url var="myurl" action="Hfddisp2">
   <s:param name="ad_ref_no"/>
</s:url> 
```

然后在你需要它的地方：

```
<s:property value="#myurl"/> 
```

此外，您应该能够通过以下方式将当前 url 中的所有参数包含到新 url 中：

```
<s:url action="Hfddisp2" includeParams="get"/> 
```

有关更多信息，请始终查阅标签参考[http://struts.apache.org/2.3.1.2/docs/tag-reference.html](http://struts.apache.org/2.3.1.2/docs/tag-reference.html)

# php - 解析 PHP 多维数组

> ID：10364896
> 
> 赞同：3
> 
> 时间：2012-04-28T15:25:24.993
> 
> 标签：php

这里（如下所示）是我正在做的一些非常简单的 php 解析多维数组的东西。我只是在搜索“突出显示”键，然后将一些键值对存储在另一个数组中。有没有更好的方法来实现这一点（我的意思是关于性能），而不是有 n 个 foreach 循环来达到你想要的。

```
$json_O=json_decode(file_get_contents($url),true);
     foreach($json_O as $section1=>$items1){
        if($section1==highlighting){
            foreach($items1 as $section2=>$items2){
                    $key=$section2;
                    foreach($items2 as $section3=>$items3){
                        foreach ($items3 as $section4=>$items4){
                            $value=$items4;
                            $found[]=array('Key' => $key, 'Value' => $value); 
```

这是我要解析的示例 php 对象：

```
Array
(
    [responseHeader] => Array
        (
            [status] => 0
            [QTime] => 3
            [params] => Array
                (
                    [indent] => on
                    [start] => 0
                    [q] => russian
                    [fragsize] => 40
                    [hl.fl] => Data
                    [wt] => json
                    [hl] => on
                    [rows] => 8
                )

        )

    [response] => Array
        (
            [numFound] => 71199
            [start] => 0
            [docs] => Array
......
......
    [highlighting] => Array
        (
            [114360] => Array
                (
                    [Data] => Array
                        (
                            [0] => AMEki has done it better <em>russian</em>...

....
.... 
```

现在有两件事：1）我可以做得更快吗？2）我可以设计得更好吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T15:40:37.670

这似乎是不必要的

```
 foreach($json_O as $section1=>$items1){
    if($section1==highlighting){
        foreach($items1 as $section2=>$items2){ 
```

你可以简单地做

```
 foreach($json_O['highlighting'] as $section2=>$items2){ 
```

简化其余部分也是可能的，尽管这是未经测试的

```
$riter = new RecursiveArrayIterator($json_O['highlighting']);
$riteriter = new RecursiveIteratorIterator($riter, RecursiveIteratorIterator::LEAVES_ONLY);
$found = array();
foreach ($riteriter as $key => $value) {
    $key = $riteriter->getSubIterator($riteriter->getDepth() - 2)->key();
    $found[] = compact('key', 'value');
} 
```

就个人而言，我只会使用嵌套的 foreach 循环。这很容易理解，而我创造性地使用递归迭代器则不然。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T15:27:56.317

```
foreach($json_O['highlighting'] as ... ) {
   ...
} 
```

仅仅因为它来自 json 并不意味着你不能将它作为一个普通的 PHP 数组来访问，因为它现在**是**一个普通的 php 数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T15:34:44.757

*当您*需要访问*每个*项目时，请使用 foreach 。如果你只想要，那么直接访问它。*`highlighting`*

 *```
$higlighting = $json_0['highlighting'];
foreach($highlightis as $Key => $value) {
 //....
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T15:29:45.330

一些基准测试显示了更好的`for(;;)`循环性能而不是`foreach()`. 当然直接访问数组元素要快得多*

# .htaccess - 为什么这个 htaccess 代码不能正常工作？

> ID：10364897
> 
> 赞同：0
> 
> 时间：2012-04-28T15:25:30.437
> 
> 标签：.htaccess

我的 htaccess 代码有问题。

当我尝试加载 example.com/user/register/ 时，读取的页面是 profile.php

当我访问 example.com/user/register 时，它工作正常，它读取 register.php

如何编辑此 htaccess 代码以使用 example.com/user/register/？

```
RewriteRule ^user/register?$ register.php [L]
RewriteRule ^user/register?$ /user/register/ [R=301,L]

RewriteRule ^user/?$ user.php [L]
RewriteRule ^user?$ /user/ [R=301,L]

RewriteRule ^user/(\d+)/$ profile.php?id=$1 [L]
RewriteRule ^user/(\d+)?$ /user/$1/ [R=301,L]

RewriteRule ^user/([^/]+)/$ profile.php?username=$1 [L]
RewriteRule ^user/([^/]+)?$ /user/$1/ [R=301,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:57:27.410

你是在使用 /user/register/ 还是 /user/register 之后？

从您当前重写的外观来看，您正在重写 /user/register 以指向 /register.php，然后将其重定向到 /user/register/ 尽管由于`[L]`前面的规则，该重定向永远不会发生。

如果您想使用 /user/register/ 我建议尝试：

```
RewriteRule ^user/register/$    /register.php [L]
RewriteRule ^user/register$     /user/register/ [R=301,L] 
```

如果你想要 /user/register 你应该需要：

```
RewriteRule ^user/register$     /register.php [L]
RewriteRule ^user/register/$    /user/register [R=301,L] 
```

或者，如果您不关心 URL 是否有斜杠，可以这样做：

```
RewriteRule ^user/register/?&   /register.php [L] 
```

要考虑的另一点是，如果您不希望所有 URL 都带有斜杠，则可以在 .htaccess 顶部使用通用重定向，而不是每个页面的重定向：

```
RewriteRule ^(.*)/$    /$1 [R=301,L] 
```

# python - wxPython 插入符号移动事件

> ID：10364900
> 
> 赞同：1
> 
> 时间：2012-04-28T15:25:56.487
> 
> 标签：python, events, wxpython, wxwidgets

当 TextCtrl / Styled TextCtrl 中的插入符号的位置发生变化时，会调用什么事件？我需要绑定事件以在状态栏中显示插入符号的当前位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:29:19.170

`wx.EVT_KEY_UP`尝试将事件与对象绑定，`wx.TextCtrl`如下所示：

```
import wx

class MyForm(wx.Frame):

    def __init__(self):
        wx.Frame.__init__(self, None, wx.ID_ANY, "Show Caret Position", size=(400, 140))
        panel = wx.Panel(self, wx.ID_ANY)
        sizer = wx.BoxSizer(wx.VERTICAL)
        text = wx.StaticText(panel, -1, "Text:", (10, 22))
        self.textCtrl = wx.TextCtrl(
                panel,
                -1, "",
                (50,5),
                size=(250, 50),
                style=wx.TE_MULTILINE
            )
        self.textCtrl.SetInsertionPoint(0)
        self.textCtrl.Bind(wx.EVT_KEY_UP,self.onTextKeyEvent)
        self.textCtrl.Bind(wx.EVT_LEFT_UP,self.onTextKeyEvent)
        self.statusbar = self.CreateStatusBar(1)
        panel.SetSizerAndFit(sizer, wx.VERTICAL)

    def onTextKeyEvent(self, event):
        statusText = "Caret Position: "+str(self.textCtrl.GetInsertionPoint())
        self.SetStatusText(statusText,0)
        event.Skip()

#Run application
if __name__ == "__main__":
    app = wx.PySimpleApp()
    frame = MyForm()
    frame.Show()
    app.MainLoop() 
```

我已经用+对`Windows 7`环境进行了测试。`Python 2.7``wxPython 2.8`

![这是它的样子](../Images/fec526e4d4e76b2196a45c82c93922cc.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-30T12:18:36.043

@Tariq M Nasim 代码的问题在于它实际上为您提供了最后一个位置而不是当前插入符号位置。我发现最简单的方法是在事件链已经存在时发布新事件，以便将新事件作为队列中的最后一个处理：

```
# create event class as global
import wx.lib.newevent
SomeNewEvent, EVT_SOME_NEW_EVENT = wx.lib.newevent.NewEvent()

# then bind the events in the constructor or somewhere
self.text_ctrl.Bind(wx.EVT_CHAR, self.onKeyDownHandler)
self.text_ctrl.Bind(wx.EVT_LEFT_DOWN, self.onKeyDownHandler)
self.text_ctrl.Bind(wx.EVT_RIGHT_UP, self.onKeyDownHandler)
# bind also new event handler but 
self.text_ctrl.Bind(EVT_SOME_NEW_EVENT , self.onKeyDownAction)

# then define the handlers
def onKeyDownAction(self, evt):
    print("Insertion point {}".format(self.text_ctrl.GetInsertionPoint()))
    evt.Skip()

def onKeyDownHandler(self, evt):
    evt.Skip()
    # post the new event so it will be handled later
    wx.PostEvent(self.text_ctrl, SomeNewEvent()) 
```

这样，您在 onKeyDownAction 中获得的插入点是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:50:04.853

我不认为有这样的事件，但你可以试试 wx.EVT_SET_CURSOR。或者，您可以捕获 wx.EVT_CHAR 或 EVT_KEY_* 事件之一，并使用 TextCtrl 的 GetInsertionPoint() 方法来了解光标的位置。当您使用鼠标事件在文本控件中单击时，您可能需要调用该方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-29T11:36:01.267

为了知道鼠标何时放置在任何窗口内，您可以绑定 wx.EVT_ENTER_WINDOW（请参见[此处](https://wxpython.org/docs/api/wx.MouseEvent-class.html)）

# c# - A* 算法缺少计算

> ID：10364911
> 
> 赞同：3
> 
> 时间：2012-04-28T15:27:06.737
> 
> 标签：c#, graph-algorithm, a-star

我正在尝试使用 A* 算法使敌人节点跟随 C# 中的玩家节点。我已阅读教程并下载了一些 C# 示例。我的 A* 算法现在已经工作到一定程度了。它会在空旷的空间中跟随玩家，但在尝试追踪物体时会遇到障碍。

因此，当我的算法检查并朝 F 值最低的方向移动时，它可能会遇到死胡同，此时它需要向后追溯其步骤，但它不能因为我的代码告诉它先前检查过节点已关闭，无法移动，因此卡住了。

我如何重新计算一个封闭的节点来告诉我的算法可以以这种方式返回。

此外，如果我确实告诉我的算法返回到它自己，那么是什么阻止它再次返回到它刚刚来自的更好的节点？有效地反复在两个节点之间返回。

我看到它应该能够检查封闭列表中的一个节点并确定它在这个特定路径上是否更好，但我不确定它是如何完成的。

我正在使用的启发式方法。

```
G = Math.Abs(StartNodeX - TargetNodeX) + Math.Abs(StartNodeY - TargetNodeY)

H = Math.Abs(CurrentNodeX - TargetNodeX) + Math.Abs(CurrentNodeY - CurrentNodeY)

F = G + H 
```

伪代码。

1.  将所有相邻节点添加到打开列表
2.  检查所有这些节点的最低 F 分数并将该节点添加到最佳路径列表
3.  将所有选中的节点添加到封闭列表（它们都已被选中，不想再次检查它们）
4.  重复直到达到目标
5.  向最佳路径方向移动敌人 1 个节点
6.  再重复一遍

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T15:46:13.390

> 我如何重新计算一个封闭的节点来告诉我的算法可以这样返回？

**你不这样做**是因为**它不好**。最佳路径永远不会包括走进死胡同，然后又走回来！根据定义，这是次优路径。A* 算法找到最优路径。

> 如果我确实告诉我的算法返回到它自己，是什么阻止它再次返回到它刚刚来自的更好的节点；有效地反复在两个节点之间返回。

没有什么能阻止它。这就是为什么做你所描述的事情是一个坏主意。如果你这样做的时候很痛，那就*不要这样做*。

> 我正在使用的启发式方法......

看起来很乱。

G 是从起点到目标的曼哈顿距离，H 是从当前点到目标的曼哈顿距离，F 是它们的总和。

首先，如果启发式是针对不允许对角线移动的方形网格，曼哈顿距离只是一个有效的度量。你允许对角线移动吗？如果你这样做了，那么这个启发式是错误的。请记住，启发式方法需要*低估*成本。如果你可以在任何地方沿对角线移动，那么曼哈顿距离就*高估*了成本。考虑改为使用欧几里得度量。

其次，从起点到目标的距离是一个常数，那么它是如何*相关*的，你为什么要把它*加到*任何东西上呢？看起来你说的是每条路径的成本都会增加从起点到目标的距离，这没有任何意义。

根据您的问题，我认为您*不了解*该算法及其工作原理。我的建议是在尝试实现它*之前*了解该算法的工作原理。这是英文的算法：

```
The closed set is an empty set of points.
The queue is an empty queue of paths, ordered by path cost.
Enqueue a path from the start to the start with zero cost.
START: 
If the queue is empty, then there is no solution.
The current path is the cheapest path in the queue.
Remove that path from the queue.
If the last step on the current path is closed then 
    the current path is necessarily bad. (Do you see why?)
    Discard it and go back to the START of the loop.
Otherwise, if the last step on the current path is the destination then
    the current path is the optimal path to the destination, so we're done.
Otherwise, we have the cheapest path *to the last 
    point in that path*. (Do you see why?) 
Therefore, every other path that could possibly go through that point is worse.
Therefore, close off that point. Add it to the closed set so that we can 
    automatically discard any future path that goes through that point.
For each possible direction from the last point of the current path,
    make a new path that extends the current path in that direction.
    The estimated cost of that new path is the known cost to get 
    to its end from the start, plus the estimated cost to get from
    its end to the destination.
    Enqueue the new path with that cost.
Go back to the START of the loop. 
```

那有意义吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T15:34:46.047

因此，如果我正确理解您的问题，这是基本 A* 算法不适合的情况。A* 告诉你，给定这个世界给我从 A 到 B 的最短路径。我假设这个世界正在发生变化。A* 不处理动态世界，因此如果您想使用 A*，唯一的解决方案是每次从头开始重新运行 A*。重置您的队列等。

现在有一些更好的解决方案，我将让您进一步探索。我已经链接了一篇论文和一些幻灯片，这些幻灯片向您展示了我为这些案例制定的一个解决方案。您还将在本文中找到对许多其他算法的参考。

[http://www.cs.unh.edu/~ruml/papers/rtds-socs10.pdf](http://www.cs.unh.edu/~ruml/papers/rtds-socs10.pdf)

[http://www.cs.unh.edu/~ruml/papers/rtds-socs10-talk.pdf](http://www.cs.unh.edu/~ruml/papers/rtds-socs10-talk.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-01T03:04:17.030

我到处跑，试图解决这里的旧问题。我希望这么晚了它仍然有帮助。

几个月前，我在 matlab 中解决了一个类似的问题。

G是你的问题。G 告诉您从起始位置沿路径移动的难度是什么，它不是启发式方法。它是可知的，你不需要估计它。

在您仅向 4 个方向之一移动的情况下，并且假设向左、向右、向上或向下移动同样容易，即您没有像“沼泽”这样更难移动的区域其他区域，你只需要计算你从哪里来的路径上的方块数量。

你的 G 在开阔地工作，因为曼哈顿距离（你的 G 度量）是畅通无阻的追逐中的最短路径，你只能在 4 个基本方向上移动。

考虑以下示例，您尝试从 A 到 B。根据您的等式，位置 T 将是 G = 4、H = 2 和 F = 4+2 = 6。

```
00000
00X00
00X00
00XT0
A0X0B 
```

真正的 A* 路径将由 + 表示，其中 G=10、H=2 和 F=12。

```
0+++0
0+X+0
0+X+0
0+XT0
A+X0B 
```

以这种方式计算 G 应该可以解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T15:41:31.030

从维基百科你可以看到你的启发式函数需要被接受。可接受的启发式算法绝不能给出比真实距离更高的估计值。否则 A* 搜索将不起作用。

你的启发式是不可接受的。您应该找到不同的启发式方法。

# node.js - 查询Nodejs的事件循环

> ID：10364915
> 
> 赞同：5
> 
> 时间：2012-04-28T15:27:31.653
> 
> 标签：node.js, event-loop

众所周知，Nodejs 在后台循环中处理所有事件。但是如何监控所有活动事件，是否存在内存不足或死锁的潜在风险？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:30:03.613

*   监控事件：

您可以为每个事件编写日志。如果您需要更多，请将它们存储到数据库中。

*   内存不足的潜在风险：

在进行测试时监控节点进程的内存使用情况。使用 ApacheBench（或 Node！）进行压力/负载测试。深入：[调试 node.js 内存泄漏](http://dtrace.org/blogs/bmc/2012/05/05/debugging-node-js-memory-leaks/)

*   死锁：

我想你是靠你自己的。

# sql - 集合的sql代码

> ID：10364921
> 
> 赞同：0
> 
> 时间：2012-04-28T15:28:32.217
> 
> 标签：sql, sql-server

如何使用`f(x,y)`sql 中的函数来计算这个系列：

```
f(x,y)=x-y^3/3!+x^5/5!-y^7/7!+.... 
```

我写了阶乘函数并使用了while循环和计数直到参数<=32和`convert(varchar(50),@answer)`

它可以在没有stackoverflow错误的情况下计算，但是我如何在这个集合中使用这个函数（或proc）？

我们如何在不使用阶乘函数的情况下模拟这个集合？

例如

```
x^5/5! 
```

是模拟

```
x^3/3!*x^2/5*4   ..... 
```

谢谢你帮助我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T17:40:27.467

如果您只需要这个特定的无限级数，它会收敛到所有 x 的 sin() 和 sinh() 值的组合。（检查我的数学以确定，使用泰勒级数来表示 sin 和 sinh。）

```
f(x,y) = (sin(x)-sinh(-x))/2 + (sin(y)+sinh(-y))/2 
```

这表达了你想要的没有循环的结果，但不幸的是，双曲正弦函数 sinh() 在 T-SQL 中不可用。您可以通过为其创建 CLR 用户定义函数来使 .NET math.sinh 函数对 SQL Server 可用。（您也可以将整个函数 f(x,y) 设为 CLR 函数。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T17:05:37.677

我假设一系列因素（显示为 3、5、7）随着奇数集的增加而增加。在此解决方案中，我使用的是公用表表达式，这意味着您必须使用 SQL Server 2005 或更高版本。

```
Declare @x float;
Declare @y float;

-- this is the first factor evaluated
-- e.g., in the example, 3 is the first factor
-- values less that one effectively set the min
-- to one.
Declare @FactorMin int;

-- this is the maximum number of iterations
-- i.e., 3, 5, 7, 
Declare @FactorMax int

Set @x = 20;
Set @y = 20;
Set @FactorMin = 3;
Set @FactorMax = 15;

With Numbers As
    (
    Select 1 As Value
    Union All
    Select Value + 1
    From Numbers
    Where Value < @FactorMax
    )
    , OddNumbers As
    (
    Select Value
        , Row_Number() Over( Order By Value ) As Position
    From Numbers
    Where Value % 2 = 1
        And Value Between @FactorMin And @FactorMax
    )
    , Factorials As
    (
    Select O.Value, O.Position
        , Exp(Sum(Log(N1.Value))) As Factorial
        , Case When O.Position % 2 = 1 Then -1 * @y Else @x End As XOrY
    From OddNumbers As O
        Cross Join Numbers As N1
    Where N1.Value <= O.Value
    Group By O.Value, O.Position
    )
Select Sum( Z.Value )
From    (
        Select @x As Value
        Union All   
        Select Power(XOrY, Value) / Factorial
        From Factorials 
        ) As Z  
Option (MaxRecursion 0); 
```

# iphone - 调整 UIView 大小不起作用

> ID：10364924
> 
> 赞同：0
> 
> 时间：2012-04-28T15:29:12.073
> 
> 标签：iphone, uiview, uiviewcontroller

我有一个从视图控制器调用的 uiview 子类。它显示了一切，但我无法调整它的大小。当我在视图的 initwithframe 方法上放置断点时，它显示不变，但视图控制器肯定会改变它......

这是我的视图控制器代码：

```
- (void)resizeWithTag:(int)tag wasTouched:(BOOL)touched

    {
        GameBox *tbox = (GameBox *)[self.view viewWithTag:tag];
        CGRect frame = tbox.frame;
        frame = CGRectMake(0, 0, 300, 300);
        tbox.frame = frame;
        [tbox setNeedsDisplay];
        NSLog(@"%f", tbox.frame.size.width);
    } 
```

这里是uiview子类的init方法和draw方法

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        [self setBackgroundColor:[UIColor colorWithRed:0 green:0 blue:0 alpha:1]];
        name = [[UILabel alloc] init];
        self.autoresizesSubviews = YES;
    }
    return self;
}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
    int border = 3;
    UIImage *image = [UIImage imageNamed:@"Sunflower.jpeg"];

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetRGBStrokeColor(context, 0.0, 0.0, 0.0, 1);
    CGContextStrokeRectWithWidth(context, CGRectMake(0, 0, rect.size.width, rect.size.height), border);
    [self attachImage:image inRect:rect inBorder:border];
    [name setFrame:CGRectMake(0 + border/2, rect.size.height-10-border/2, rect.size.width-(border), 10)];
    [name setFont:[UIFont fontWithName:@"Helvetica" size:9.0]];
    [name setBackgroundColor:[UIColor colorWithRed:1.0 green:0.0 blue:0.0 alpha:0.0]];

    name.textAlignment = UITextAlignmentCenter;
    [self addSubview:name];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:54:30.810

放置断点`initWithFrame:`不是寻找的正确位置。创建视图时只会调用一次。

稍后，您将通过调用来获取视图并更改其 frame 属性，`tbox.frame = someFrame`这等效于调用`setFrame:`。

这条线

```
NSLog(@"%f", tbox.frame.size.width); 
```

应该表明你确实改变了宽度。

# ios - 在视图中重叠 UIControls

> ID：10364925
> 
> 赞同：0
> 
> 时间：2012-04-28T15:29:13.947
> 
> 标签：ios, uiview, uiviewcontroller, uicontrol

我正在创建一个自定义控件，该控件由两层组成的甜甜圈形状。中间是一个按钮，而甜甜圈部分是一个旋转轮。

我已经将这两个部分创建为两个单独的 UIControls，它们有自己的单独图像。

我现在的问题`Second Control`是`First Control`.

是否有以编程方式重叠位置的方法？

故事板截图：

![在此处输入图像描述](../Images/48f932b5862bd21f1978afdebad66776.png)

请关注名为`buttonView`. `Rotary knob`是甜甜圈，`Button`是中间按钮。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:34:35.813

我假设你的甜甜圈部分比你的中间部分大，对吧？如果是这样，我认为您应该能够使用[hitTest:WithEvent:](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instm/UIView/hitTest%3awithEvent%3a)函数来区分两者。不过，您的中间部分需要低于层次结构中的外部部分。hitTest 将返回被触摸的层次结构中最深的视图。

**编辑**根据扩展评论，问题在于它们在 XIB 中被颠倒了。切换它们，您的中间部分将出现在顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T16:01:11.997

在包含它们的视图中，只需调用`[self bringSubviewToFront:firstLayer]`.

# java - 如何从 POST 请求中检索 cookie？

> ID：10364938
> 
> 赞同：5
> 
> 时间：2012-04-28T15:30:23.387
> 
> 标签：java, cookies, httpclient, http-post

我可以使用发送 POST 请求`org.apache.http.clien.HttpClient`并获取 HTTP 响应。但是登录时我没有得到 HTML 内容，因为我的 PHP 脚本需要一个 cookie。那么，如何读取 POST 请求响应的 cookie 并在 POST 请求之后使用 GET 请求将其发回？

```
 HttpClient httpClient = new DefaultHttpClient();

    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(); 
    nameValuePairs.add(new BasicNameValuePair("username", "user"));  
    nameValuePairs.add(new BasicNameValuePair("password", "passwd"));  

    HttpPost httpPost = new HttpPost("http://localhost/index.php");
    httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    HttpResponse httpResponse = httpClient.execute(httpPost);

    BufferedInputStream bis = new BufferedInputStream(httpResponse.getEntity().getContent()); // Just gets the HTML content, not the cookies 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-28T15:42:05.010

cookie 是标准标头，因此您可以从

```
 httpResponse.getHeader("Cookie") 
```

如果您从同一个应用程序调用服务器，则可以让 httpclient 保持 cookie 状态。不要每次都创建一个新实例，它应该可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T15:36:54.857

如果您使用相同的 HTTPClient 实例并且您的服务器正在发送正确的标头，则应该自动处理它。

见[http://hc.apache.org/httpclient-3.x/cookies.html](http://hc.apache.org/httpclient-3.x/cookies.html)

# php - 通过 Ajax 以变量名作为参数获取 PHP 变量值

> ID：10364940
> 
> 赞同：1
> 
> 时间：2012-04-28T15:30:23.723
> 
> 标签：php, javascript, jquery, ajax

我意识到类似的问题已经出现过几次，但我似乎无法找到一个对我正在尝试做的事情有所帮助的问题。

我们有一个 config.php 文件，它基本上是用户设置的变量列表及其值，例如：

```
$OUR_EMAIL_ADDRESS = 'test@test.com';
$OUR_WEBSITE       = 'www.test.com'; 
```

就像所有其他用户一样，我们希望通过 Javascript 传输 PHP 值。

我们已经有办法通过 ajax 做到这一点——但它不像我们希望的那样灵活，因为每个变量都需要一个自定义脚本/php 页面：

**第 1 部分 - javascript (jquery)**

```
$.get("/getConfig_email.php", function(email){
    alert(email);
}); 
```

**第 2 部分：getConfig_email.php**

```
<?php
echo $OUR_EMAIL_ADDRESS_VALUE;
?> 
```

**问题：**

有没有办法让 PHP 使用字符串作为变量名？IE。我想做的是：

**第 1 部分 - javascript (jquery)**

```
$.get("/getConfig.php?name=OUR_EMAIL_ADDRESS_VALUE", function(email){
    alert(email);
}); 
```

**第 2 部分：getConfig.php**

```
<?php
$var_name = $_GET['name'];

//some magic here to turn the name of the variable 
//in to the actual variable - a bit like a reverse extract

echo $var_name.value;
?> 
```

你怎么看？这是否可能 - 我希望只有一个 php 命令可以为我做到这一点！

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:34:18.480

也许更好的选择是在数组中设置配置变量：

```
$CFG = array(
    'OUR_EMAIL_ADDRESS' => 'test@test.com',
    'OUR_WEBSITE' => 'www.test.com'
); 
```

并通过以下方式获取它们：

```
$var_name = $_GET['name'];
echo isset($CFG[$var_name]) ? $CFG[$var_name] : ""; 
```

否则，它可能是脚本的真正安全问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T15:34:55.780

是的，可以通过[**`variable variables`**](http://php.net/manual/en/language.variables.variable.php)：

```
echo $$var_name; 
```

但是，这是不明智的，因为您正在接受用户输入，并且可能用户可以获得应该隐藏的内部变量的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T15:35:22.533

创建一个包含所有配置变量的字典，并使用它按名称查找变量

# javascript - 尝试使用 jquery ajax 但无法解析 JSON？

> ID：10364944
> 
> 赞同：3
> 
> 时间：2012-04-28T15:30:41.883
> 
> 标签：javascript, jquery, ajax, json

我正在尝试通过 jQuery.getJSON() 加载一些数据，但它不起作用：

这是我的 JSON：

```
{didwork=true,userid=123} 
```

或者是

```
{didwork=false,userid=0} 
```

这是我的 Javascript：

```
$.ajax({
  data["username"] = "u"
  data["password"] = "p";
  url: https://www.myurl.com/json.php,
  dataType: 'json',
  data: data,
  success: function(json){
    //fill it into div
  }
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T15:31:58.620

你的 json 字符串是错误的。它一定要是

```
{"didwork":true,"userid":123} 
```

或者

```
{"didwork":false,"userid":0} 
```

从不使用`=`并且总是使用`"`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-28T15:34:57.090

你的javascript错了..

您需要将`data`初始化移到ajax调用之外..
加上需要引用的url..（*之间`'`*）

```
var data = {};
data["username"] = "u";
data["password"] = "p"; 
```

这也可以用

```
var data = {'username': 'u', 'password': 'p'}; 
```

和电话

```
$.ajax({
  url: 'https://www.myurl.com/json.php',
  dataType: 'json',
  data: data,
  success: function(json){
    //fill it into div
  }
}); 
```

* * *

你的json错了

应该`{"didwork":true,"userid":123}`

* * *

如果 url 指向不同的站点，那么调用它的站点将由于[相同的来源策略而失败](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCwQFjAA&url=http://en.wikipedia.org/wiki/Same_origin_policy&ei=jg6cT7bvDsHd8AOmnMmWDw&usg=AFQjCNHVFZYpkC1JSDNgda021fYJ8pRuDQ&sig2=tpbe3OlY8X6LEX26s64IkQ)

# macos - 在 Amazon EC2 上上传文件

> ID：10364950
> 
> 赞同：35
> 
> 时间：2012-04-28T15:31:30.093
> 
> 标签：macos, amazon-ec2, terminal

我有一个正在运行的 Amazon EC2 实例。当我访问 url 时，我得到了 Apache 测试页面，它说我必须将我的文件上传到`/var/html/`

我的问题是，我该怎么做？我使用 Mac OS X 的终端来访问实例。

FTP似乎不起作用。还有其他方法吗？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-11-06T21:51:18.257

如果您使用的是 Mac（或其他 *nix 系统），只需将其复制粘贴到终端即可通过 SSH 上传文件

```
scp -i MyKeyFile.pem FileToUpload.pdf ubuntu@ec2-123-123-123-123.compute-1.amazonaws.com:FileToUpload.pdf 
```

将“ec2-123-123-123-123.compute-1.amazonaws.com”替换为您实例的公有 DNS 名称

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-28T17:27:56.943

实际上，您根本不应该使用 FTP 来访问[Amazon EC2](http://aws.amazon.com/ec2/)实例（或任何其他服务器，但这是一个不同的问题，请参阅稍微夸张但仍然合适的咆哮[FTP Must Die](http://mywiki.wooledge.org/FtpMustDie)）。

相反，您应该使用[SSH 文件传输协议 (SFTP)](http://en.wikipedia.org/wiki/SSH_File_Transfer_Protocol)，它通常在开箱即用的 EC2 实例上运行良好，而无需在 SSH 访问之外进行额外的安全设置，即因为您已经可以通过您的 SSH 密钥访问也可以将这些用于您最喜欢的 (S)FTP 客户端的 SFTP。

### (S)FTP安全

比没有额外安全/防火墙设置的开箱即用支持更重要的是 SFTP 是**安全**的，而 FTP 正好相反，请参阅例如[What's Your Password？xyzzy？伟大的！](http://mywiki.wooledge.org/FtpMustDie#What.27s_Your_Password.3F__xyzzy.3F__Great.21)：

> 如前所述，FTP 早于 Internet 活动被认为是恶意的时代。因此，**它没有针对密码嗅探、中间人攻击等的安全措施**。
> 
> **您的用户名和密码从 FTP 客户端以*明文*形式传输到 FTP 服务器。**任何可以控制从客户端到服务器的路径上的任何路由器的人都可以读取整个会话，包括您的密码。*[强调我的]*

请注意，这可以通过使用[FTP over SSL](http://en.wikipedia.org/wiki/FTPS)或[FTP over SSH](http://en.wikipedia.org/wiki/FTP_over_SSH#FTP_over_SSH_.28not_SFTP.29)在一定程度上得到补救，但两者都需要额外的工作，并且对于像您这样的常规用例而言，与 SFTP 相比没有任何好处。

### (S)FTP 客户端

现在大多数 FTP 客户端都应该以一种或另一种方式支持 SFTP，理想情况下促进*SSH 身份验证代理*，如[ssh-agent](http://en.wikipedia.org/wiki/Ssh-agent) (Unix/Linux/Mac OS X) 或[Pageant (Putty)](http://en.wikipedia.org/wiki/PuTTY#Applications) (Windows)，以避免需要显式指定 SSH使用的关键（当然这也是可能的）。

Mac OS X 可能有很多 SFTP 客户端，免费的一个是[Cyber​​duck](http://cyberduck.ch/)，它是适用于 Mac 和 Windows 的*[Libre](http://www.gnu.org/philosophy/free-sw.html) FTP、SFTP、WebDAV 和云存储浏览器*（请参阅他们的[SFTP Howto](http://trac.cyberduck.ch/wiki/help/en/howto/sftp)）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-04-12T11:34:49.807

您可以尝试[kitten](https://github.com/hoffa/kitten)实用程序，它是 boto3 的包装器。您可以轻松地上传/下载文件并在 EC2 服务器上或同时在多个服务器上运行命令。

```
kitten put -i ~/.ssh/key.pem cat.jpg /tmp [SERVER NAME][SERVER IP] 
```

服务器名称是例如`ubuntu`或`ec2-user`等。

这会将`cat.jpg`文件上传到`/tmp`服务器目录

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-17T20:15:33.600

对不起。没有一个答案对我有帮助..但我从答案中学到了。帮助我的是我使用了错误的安全密钥名。

有用的提示：

*   1）如果您有多个安全密钥（.pem 文件），请使用密钥对名称检查您的 AWS 账户
*   2）检查你的SCP命令参数的顺序。
*   3) 检查“ubuntu”是否有写入目标目录的权限。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-21T21:47:19.880

这可能有点晚了，但我建议使用 Filezilla 程序。它具有非常用户友好的界面，可让您将文件和文件夹从一台服务器移动到另一台服务器，或者通过拖放操作您的本地计算机。当然它没有使用终端那么快，但它是新手必备工具。此外，它是免费的，但如果您真的喜欢它，请支付 10 美元并支持您的免费软件开发人员。我为 Mac 做了它，可以在应用商店中找到。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-11-15T16:16:47.910

最简单的方法是从浏览器安装 webmin 并使用文件管理器（java 插件）。

//进入主文件夹

```
cd ~ 
```

//下载最新版本

```
wget http://prdownloads.sourceforge.net/webadmin/webmin-1.660-1.noarch.rpm 
```

//安装

```
sudo rpm -U webmin-1.660-1.noarch.rpm 
```

//修改root用户的默认密码

```
passwd 
```

最后，在安全组中打开 10000 端口

然后，登录

```
https://server_name:10000 
```

使用用户：root 密码：what_you_set_before

# .htaccess - 使用 .htaccess 将 Web 根文件夹设为子文件夹？

> ID：10364951
> 
> 赞同：13
> 
> 时间：2012-04-28T15:31:44.850
> 
> 标签：.htaccess, mod-rewrite, directory

我正在做一个非常复杂的项目，所以我想使用一个有意义的文件/文件夹结构。

**我想要的文件夹/文件结构是：**

```
.htaccess
/php/
/assets/ 
```

**我想要人们可以访问的网页：**

```
/php/views/pages/ 
```

我想知道是否可以仅使用`.htaccess`设置`/php/views/pages`为“可查看的根”，例如，当人们访问时，`http://mydomain.com/`他们将正在查看`http://mydomain.com/php/views/pages/index.php`，如果是这样，我将如何去做？

此外，是否可以规范化所有对`/php/views/pages`using`.htaccess`和 301 重定向的访问以阻止多个链接在搜索引擎中被索引？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-03T08:10:23.043

# 如果您无权访问您的主机配置

[`DocumentRoot`](http://httpd.apache.org/docs/2.0/mod/core.html#documentroot)只能在服务器和虚拟主机配置中使用，.htaccess 必须是。

1.  让我们在 .htaccess 中添加指令

    ```
    RewriteEngine on 
    ```

2.  我假设您想让对 /assets 的请求通过

    ```
    #if a match for asset is found, do nothing
    RewriteRule ^assets/ - [L] 
    ```

3.  如果请求尝试`/php/views/pages/`直接访问，请将其重定向到其规范版本

    ```
    RewriteCond %{THE_REQUEST} php/views/pages/
    RewriteRule ^php/views/pages/(.*) http://mydomain.com/$1 [R=301,L] 
    ```

4.  并添加一条规则以将其他所有内容映射到`/php/views/pages/`

    ```
    RewriteCond %{REQUEST_URI} !php/views/pages/
    RewriteRule ^(.*)$ /php/views/pages/$1 [L] 
    ```

# 如果您有权访问您的主机配置

忘记 .htaccess 文件并使用它。示例配置可能看起来像

```
# ~base stands for your original DocumentRoot
<VirtualHost *:80>
    DocumentRoot ~base/php/views/pages
    Alias /assets ~base/assets

    # other configuration parameters
</VirtualHost> 
```

# php - PHP preg_split() 模式，用于按句点拆分，但在浮动/价格中按句点拆分除外

> ID：10364957
> 
> 赞同：1
> 
> 时间：2012-04-28T15:32:26.020
> 
> 标签：php, regex, preg-split

我希望能够在句子后按句点 preg_split 内容，即

**Lorem ipsum dolor 坐 3.14 amet，精英。Vivamus sed 精英欧盟。Morbi pulvinar dignissim。**

应该输出（不应该拆分浮点中的点）：

```
array(
  'Lorem ipsum dolor sit 3.14 amet, elit',
  'Vivamus sed elit eu',
  'Morbi pulvinar dignissim'
) 
```

不是

```
array(
  'Lorem ipsum dolor sit 3',
  '14 amet, elit',
  'Vivamus sed elit eu',
  'Morbi pulvinar dignissim'
) 
```

任何想法 preg_split 模式应该是什么样子？干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T15:41:53.627

这个可能有效

```
$res = preg_split('/\.[^\d]/', $str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T15:41:38.900

以下适用于您的示例，但我不确定它是否总是能完成这项工作，但希望您可以使用它：`"/\.[^$|\d]/"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T16:53:34.537

如果您只想在点后有空格或字符串结尾的情况下进行拆分：

```
$res = preg_split('~\.( |$)~', $str); 
```

这会给你空的结果，你可以通过设置`PREG_SPLIT_NO_EMPTY`标志来放弃。

```
$res = preg_split('~\.( |$)~', $str, 0, PREG_SPLIT_NO_EMPTY); 
```

也见[`preg_split`](http://php.net/preg_split)。

# java - 如何连接表格并拥有每个表格的所有属性？

> ID：10364961
> 
> 赞同：3
> 
> 时间：2012-04-28T15:32:45.427
> 
> 标签：java, hibernate, jpa

假设您有两个实体，一个`Article`是 ，另一个是`Fruits`。现在实体的所有属性都被实体`Article`继承了`Fruits`。

所以，假设我有带有列的文章表：

```
ART_ID
ART_NAME
ART_COST 
```

和带有列的水果表：

```
FRU_ID
FRU_FROZEN 
```

现在我想在我的 JPA 代码中实现，当检索`Fruit`对象时，我检索应该是它们的所有数据，这些数据包含来自我`Article`和`Fruit`表的信息 - `ART_ID`, `ART_NAME`, `ART_COST`, `FRU_ID`, `FRU_FROZEN`。

这在 JPA 中可能吗？我应该使用`@Inheritance`，`@JoinColumn`还是什么？如果需要，可以提供代码。

* * *

*** 编辑 ***

我得出的结论是，下面的代码将适合我的需要：

```
@Entity
@Table(name = "Article")
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public class Article {
    @Id @GeneratedValue(strategy=GenerationType.AUTO)
    @Basic(optional = false)
    @Column(name = "ART_ID")
    private Long id;

    @Basic(optional = false)
    @Column(name = "ART_NAME")
    private String name;

    @Basic(optional = true)
    @Column(name = "ART_COST")
    private String cost;  

    // ...
}

@Entity
@Table(name="Fruits")
@AttributeOverrides({
@AttributeOverride(name="name", column=@Column(name="ART_NAME")),
@AttributeOverride(name="cost", column=@Column(name="ART_COST")),
})
public class Fruits extends Article {

    @Id @GeneratedValue(strategy=GenerationType.AUTO)
    @Basic(optional = false)
    @Column(name = "FRU_ID")
    private Long fruitID;

    @Column(name="FRU_FROZEN")
    private String fruFrozen;

    //...
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:43:23.080

都是你`Fruits`的`Article`吗？如果类之间存在真正的泛化（继承）关系，请使用 @Inheritance with join table 策略。

你可以只查询`Fruits`，Hibernate 会做所有的事情。

顺便说一句，如果你想在`Article`s 表中有一个鉴别器列（连接策略与鉴别器的组合）。用单表策略映射它，并在你的子类中定义一个@SecondaryTable，这就是 Hibernate 支持它的方式。

# jwplayer - jwplayer 没有加载 flash.swf

> ID：10364967
> 
> 赞同：0
> 
> 时间：2012-04-28T15:33:55.053
> 
> 标签：jwplayer

我一直在尝试将 jwplayer 添加到我的网站以进行直播，但它没有加载 flash.swf 文件。这是我的配置。

```
<script type="text/javascript">
  var flashvars = {
    file:'filename',

    streamer:'rtmp://example/example/_definst_/username=example/password=example/'
  };

  swfobject.embedSWF('assets/flash/jwplayer/player.swf','container','480','270','9.0.115','false', flashvars,

   {allowfullscreen:'true',allowscriptaccess:'always'},
   {id:'jwplayer',name:'jwplayer'}

  );
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:35:26.077

尝试放置`player.swf`在您的应用程序根目录中，并尝试将应用程序中的`.flv or .mp4`文件直接作为文件而不是流加载。如果可行，那么您的配置是正确的。然后去Stream。

有关更多配置相关信息，请遵循Longtailvideo 的 [官方指南](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/15995/jw-embedder-reference-guide)[http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/15995/jw-embedder-reference-guide](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/15995/jw-embedder-reference-guide)

我想先在评论中输入这个，它很长，所以输入为答案

# c++ - 如何判断 C++ 符号是否在 Xcode 中#defined

> ID：10364971
> 
> 赞同：3
> 
> 时间：2012-04-28T15:34:06.377
> 
> 标签：c++, xcode, c-preprocessor

我习惯了 Visual C++，它在一个块中非常清楚该`#ifdef`块是否要被编译。

Xcode（3）是否也这样做，我看不出怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T15:47:42.360

看看下面的截图。

![在此处输入图像描述](../Images/7b4c7a18d065f4a236188d3cce67688b.png)

如您所见，Xcode 4 不会在不会编译的部分应用语法着色。

# perl - 在 Perl 5.14 或更高版本中是否仍建议将 Try::Tiny 用于异常处理？

> ID：10364975
> 
> 赞同：76
> 
> 时间：2012-04-28T15:34:26.140
> 
> 标签：perl, exception-handling

Perl 社区的共识似乎是这[`Try::Tiny`](http://search.cpan.org/perldoc?Try::Tiny)是处理异常的首选方式。

Perl 5.14（这是我使用的版本）[似乎解决](http://perldoc.perl.org/perl5140delta.html#Exception-Handling)了该地址的[问题](https://metacpan.org/pod/Try::Tiny#BACKGROUND)。还会为我提供任何好处吗？`eval``Try::Tiny``Try::Tiny`

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-29T17:28:46.543

我的回答不受欢迎，但我认为 Perl 程序员不应该尝试使用我们在 Perl 中称为“异常”的东西的极其糟糕的概念。这些本质上是一个侧通道返回值。然而，仍然迷恋异常的想法，即使使用全局变量来传递状态的所有复杂性，人们仍然试图让它工作。

然而，实际上，人们习惯于`die`发出失败的信号。有人会说您可以`die`使用引用并传回错误对象，但您不需要这样做`die`。我们有对象，所以我们应该使用对象的所有力量：

```
 sub some_sub {
    ...
    return Result->new( error => 1, description => ... ) if $something_went_wrong;
    return Result->new( error => 0, ... );
    }

 my $result = some_sub( ... );
 if( $result->is_error ) { ... }; 
```

这不涉及全局变量、远距离操作、范围界定问题或需要特殊的特殊功能。你创建一个小类`Result`，或者任何你想调用它的东西，来包装你的返回值，这样你就有了结构化的数据，而不是没有身份的单个值。无需再好奇返回值的含义。这是`undef`真正的价值还是失败的迹象？如果它被定义或者它是真的返回值是好的？你的对象可以告诉你这些事情。而且，您可以将相同的对象与`die`. 如果您已经在使用该对象`die`并将其用作返回值，那么几乎没有什么可以推荐您必须做的所有额外的事情来容忍`$@`。

[我在“返回错误对象而不是抛出异常”中](http://www.effectiveperlprogramming.com/2011/10/return-error-objects-instead-of-throwing-exceptions/)对此进行了更多讨论

但是，我知道你不能帮助别人做什么，所以你还是要假装 Perl 有例外。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-04-28T18:09:15.790

这始终是个人喜好的情况。你比较喜欢哪个

```
my $rv;
if (!eval { $rv = f(); 1 } ) {
   ...
} 
```

或者

```
my $rv = try {
   f();
} catch {
   ...
}; 
```

但请记住，后者使用 anon subs，所以它与`return`, 以及诸如此类`next`的东西混淆了。Try::Tiny 的 try-catch 很可能最终会变得更加复杂，因为您在 catch 块和它之外添加了通信通道。

返回异常的最佳情况（最简单）方案是`$rv`当没有异常时 if 始终为真。它如下所示：

```
my $rv;
if ($rv = eval { f() }) {
   ...
   return;
} 
```

对比

```
my $rv = try {
   f();
} catch {
   ...
};

if (!$rv) {
   return;
} 
```

这就是为什么我会使用[TryCatch](http://search.cpan.org/perldoc?TryCatch)而不是[Try::Tiny](http://search.cpan.org/perldoc?Try%3a%3aTiny)如果我使用这样的模块。

对 Perl 的改变仅仅意味着你可以再做`if ($@)`一次。换句话说，

```
my $rv;
if (!eval { $rv = f(); 1 } ) {
   ...
} 
```

可以写

```
my $rv = eval { f() };
if ($@) {
   ...
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-04-28T18:15:46.113

如果不出意外，`Try::Tiny`仍然是不错的语法糖。如果你想要一些更重量级的东西，还有[`TryCatch`](http://search.cpan.org/~ash/TryCatch/)，它解决了一些与子例程中的子句相关的问题`Try::Tiny`（例如，它`return`不离开封闭函数）。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-04-28T19:03:37.567

`Try::Tiny`简单轻便。太容易了。我们遇到了两个问题：

*   **匿名**`return`潜艇 - 里面的“ ”声明总是有问题
*   总是抓住一切

所以我对 进行了一些更改`Try::Tiny`，这对我们有帮助。现在我们有：

```
try sub {},
catch 'SomeException' => sub {},
catch [qw/Exception1 Exception2/] => sub {},
catch_all sub {}; 
```

我知道 - 这种语法有点奇怪，但是由于明显的 ' `sub`'，我们的程序员现在知道 ' `return`' 语句仅从异常处理程序中退出，并且我们总是只捕获我们想要捕获的异常 :)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-02T05:04:29.457

Try::Tiny 很好，但在最后一个大括号上需要分号，并且不允许使用异常变量赋值，更不用说捕获异常类了。[TryCatch](https://metacpan.org/pod/TryCatch)过去做得很好，但[已被新版本 0.006020](https://rt.cpan.org/Ticket/Display.html?id=97089)的[Devel::Declare](https://metacpan.org/pod/Devel::Declare)打破。另一个很棒的实现是[Syntax::Keyword::Try](https://metacpan.org/pod/Syntax::Keyword::Try)，但它没有实现异常变量分配或捕获异常类。

有一个新模块[Nice::Try](https://metacpan.org/pod/Nice::Try)，这是一个完美的替代品。

最后一个大括号不需要像 Try::Tiny 这样的分号。

您还可以进行异常变量赋值，例如

```
 try
  {
    # something
  }
  catch( $e )
  {
    # catch this in $e
  } 
```

它也可以使用类异常，例如

```
 try
  {
    # something
  }
  catch( Exception $e )
  {
    # catch this in $e
  } 
```

它还支持`finally`. 它的功能集使其非常独特。

完全披露：当 TryCatch 被破坏时，我开发了这个模块。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-22T15:37:53.627

要么做：

```
local $@;
eval { … } 
```

... 防止对 $@ 的更改影响全局范围，或使用 Try::Tiny。

从语法上讲，在某些情况下我更喜欢其中一种。

# php - 托管服务器上的 PHP Http 请求和 Pecl/Pear

> ID：10364983
> 
> 赞同：0
> 
> 时间：2012-04-28T15:34:56.777
> 
> 标签：php, pear, pecl, http-request

我是 PHP 和 Web 开发的新手。我正在尝试构建一个基本的 Facebook 应用程序。因此，有必要使用 Http Requests 从 Facebook 内的 Graph API 获取用户数据。我检查了如何使用 PHP 发出请求，但我发现 Http 请求方法不是内置的。我知道我需要安装适当的库来使用它们，一切都很好，直到我知道几乎不可能将 Pecl 或 Pear 安装到托管服务（我正在使用 Godaddy）。

我查看了很多网站，包括 Stackoverflow，但没有答案。许多网站解释了如何将软件包安装到本地服务器。

我只能尝试[梨 | go-pear.phar](http://pear.php.net/go-pear.phar)网络安装但它没有工作。即使我检查了文档（[Pear Installation Doc](http://pear.php.net/manual/en/installation.shared.php)），我也不知道如何执行 .phar 文件。这个链接，[Installing Pear on Godaddy Hosting](http://abbyandwin.net/blog/2008/06/16/installing-pear-on-godaddy-shared-accounts/)，解释了我试图做的事情。

还有一个问题，如果无法安装这些软件包中的任何一个，那么如何使用 PHP 发出 HTTP 请求？还有其他方法吗？

感谢您的任何回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:39:03.903

如果启用了allow_url_fopen，php 可以进行http 请求。并且总是有 CURL 库（如果启用）。您可以使用以下简单的方法测试两者：

```
$c = curl_init();
$txt = file_get_contents('http://google.com'); 
```

如果 curl 没有安装，第一行会失败。如果 url 操作被禁用，那么第二行将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T21:05:59.713

假设您与 Go Daddy 一起使用的主机是 Linux 4GH 主机，PEAR 和 Pecl 应该已经安装并且可以使用。

# javascript - Jquery 插件 Levitip 的自定义源处理程序

> ID：10364991
> 
> 赞同：1
> 
> 时间：2012-04-28T15:36:18.993
> 
> 标签：javascript, jquery

我正在使用 Jquery 和 levitip 插件开发应用程序。我需要在 jquery.levitip.js 中编写一个新的源处理程序，这种对 levitip 的调用是可能的：

```
$("Tag").leviTip({sourceType: 'pertsonalizatua', source: '#Mached_Tag_atribute' , addClass: ''}); 
```

我希望 levitip 显示具有相同 id 的元素`$(this).attr(Mached_Tag_atribute)`

我不知道处理程序会是什么样子。我是 jquery 的新手。谢谢你。

到目前为止我写的处理程序是这样的：

```
$.LeviTip.addSourceHandler({
        type: 'pertsonalizatua',
        prepare: function(levitip)
        {
            if ( levitip.settings.hideSourceElement )
            {
                $(levitip.settings.source).hide();
            }
        },
        get: function(levitip)
        {
            var $e = [];
            if ( levitip.settings.source )
            {
                $e = $(levitip.target).attr(levitip.settings.source);
                if ( $e.length )
                    $e = $e.clone(true).show();
            }
            return $e;
        }
    }); 
```

# php - 使用 PHP GD 库从 BMP 获取像素的调色板

> ID：10364994
> 
> 赞同：0
> 
> 时间：2012-04-28T15:36:34.170
> 
> 标签：php, gd, bmp

我正在尝试从 BMP 文件中获取信息，更准确地说，我想获取每个像素的 RGB 调色板值并输出它们，例如 r->100 g->48 b->75 ... 据我了解 PHP GD 没有像 imagecreatefromjpeg() 这样的 BMP 格式的功能，因此我从互联网上找到了一些与 BMP 相同的脚本......如果是 jpeg，我可以这样做

```
 $rgb = imagecolorat($im, $x, $y);
  $r = ($rgb >> 16) & 0xFF;
  $g = ($rgb >> 8) & 0xFF;
  $b = $rgb & 0xFF; 
```

但是要获得 $r 值，我应该为 BMP 写什么而不是 ($rgb >> 16) & 0xFF;

* * *

这是那个功能

```
function imageCreateFromBMP($filename)
{
    //Ouverture du fichier en mode binaire
    if (! $f1 = fopen($filename,"rb")) return FALSE;

    //1 : Chargement des ent?tes FICHIER
    $FILE = unpack("vfile_type/Vfile_size/Vreserved/Vbitmap_offset", fread($f1,14));
    if ($FILE['file_type'] != 19778) return FALSE;

    //2 : Chargement des ent?tes BMP
    $BMP = unpack('Vheader_size/Vwidth/Vheight/vplanes/vbits_per_pixel'.
                 '/Vcompression/Vsize_bitmap/Vhoriz_resolution'.
                 '/Vvert_resolution/Vcolors_used/Vcolors_important', fread($f1,40));
    $BMP['colors'] = pow(2,$BMP['bits_per_pixel']);
    if ($BMP['size_bitmap'] == 0) $BMP['size_bitmap'] = $FILE['file_size'] - $FILE['bitmap_offset'];
    $BMP['bytes_per_pixel'] = $BMP['bits_per_pixel']/8;
    $BMP['bytes_per_pixel2'] = ceil($BMP['bytes_per_pixel']);
    $BMP['decal'] = ($BMP['width']*$BMP['bytes_per_pixel']/4);
    $BMP['decal'] -= floor($BMP['width']*$BMP['bytes_per_pixel']/4);
    $BMP['decal'] = 4-(4*$BMP['decal']);
    if ($BMP['decal'] == 4) $BMP['decal'] = 0;

    //3 : Chargement des couleurs de la palette
    $PALETTE = array();
    if ($BMP['colors'] < 16777216)
    {
        $PALETTE = unpack('V'.$BMP['colors'], fread($f1,$BMP['colors']*4));
    }

    //4 : Cr?ation de l'image
    $IMG = fread($f1,$BMP['size_bitmap']);
    $VIDE = chr(0);

    $res = imagecreatetruecolor($BMP['width'],$BMP['height']);
    $P = 0;
    $Y = $BMP['height']-1;
    while ($Y >= 0)
    {
    $X=0;
    while ($X < $BMP['width'])
    {
    if ($BMP['bits_per_pixel'] == 24)
        $COLOR = unpack("V",substr($IMG,$P,3).$VIDE);
    elseif ($BMP['bits_per_pixel'] == 16)
    {  
        $COLOR = unpack("n",substr($IMG,$P,2));
        $COLOR[1] = $PALETTE[$COLOR[1]+1];
    }
    elseif ($BMP['bits_per_pixel'] == 8)
    {  
        $COLOR = unpack("n",$VIDE.substr($IMG,$P,1));
        $COLOR[1] = $PALETTE[$COLOR[1]+1];
    }
    elseif ($BMP['bits_per_pixel'] == 4)
    {
        $COLOR = unpack("n",$VIDE.substr($IMG,floor($P),1));
        if (($P*2)%2 == 0) $COLOR[1] = ($COLOR[1] >> 4) ; else $COLOR[1] = ($COLOR[1] & 0x0F);
        $COLOR[1] = $PALETTE[$COLOR[1]+1];
    }
    elseif ($BMP['bits_per_pixel'] == 1)
    {
        $COLOR = unpack("n",$VIDE.substr($IMG,floor($P),1));
        if     (($P*8)%8 == 0) $COLOR[1] =  $COLOR[1]        >>7;
        elseif (($P*8)%8 == 1) $COLOR[1] = ($COLOR[1] & 0x40)>>6;
        elseif (($P*8)%8 == 2) $COLOR[1] = ($COLOR[1] & 0x20)>>5;
        elseif (($P*8)%8 == 3) $COLOR[1] = ($COLOR[1] & 0x10)>>4;
        elseif (($P*8)%8 == 4) $COLOR[1] = ($COLOR[1] & 0x8)>>3;
        elseif (($P*8)%8 == 5) $COLOR[1] = ($COLOR[1] & 0x4)>>2;
        elseif (($P*8)%8 == 6) $COLOR[1] = ($COLOR[1] & 0x2)>>1;
        elseif (($P*8)%8 == 7) $COLOR[1] = ($COLOR[1] & 0x1);
        $COLOR[1] = $PALETTE[$COLOR[1]+1];
    }
    else
        return FALSE;
        imagesetpixel($res,$X,$Y,$COLOR[1]);
        $X++;
        $P += $BMP['bytes_per_pixel'];
    }
    $Y--;
    $P+=$BMP['decal'];
    }

    //Fermeture du fichier
    fclose($f1);

    return $res;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T15:59:41.967

这是用户在[php.net](http://php.net/manual/en/function.imagecreate.php)网站上提供的 imagecreatefrombmp 函数的注释和代码片段，我认为这对您很有用。

```
<?php
/*********************************************/
/* Fonction: ImageCreateFromBMP              */
/* Author:   DHKold                          */
/* Contact:  admin@dhkold.com                */
/* Date:     The 15th of June 2005           */
/* Version:  2.0B                            */
/*********************************************/

function ImageCreateFromBMP($filename)
{
 //Ouverture du fichier en mode binaire
   if (! $f1 = fopen($filename,"rb")) return FALSE;

 //1 : Chargement des ent�tes FICHIER
   $FILE = unpack("vfile_type/Vfile_size/Vreserved/Vbitmap_offset", fread($f1,14));
   if ($FILE['file_type'] != 19778) return FALSE;

 //2 : Chargement des ent�tes BMP
   $BMP = unpack('Vheader_size/Vwidth/Vheight/vplanes/vbits_per_pixel'.
                 '/Vcompression/Vsize_bitmap/Vhoriz_resolution'.
                 '/Vvert_resolution/Vcolors_used/Vcolors_important', fread($f1,40));
   $BMP['colors'] = pow(2,$BMP['bits_per_pixel']);
   if ($BMP['size_bitmap'] == 0) $BMP['size_bitmap'] = $FILE['file_size'] - $FILE['bitmap_offset'];
   $BMP['bytes_per_pixel'] = $BMP['bits_per_pixel']/8;
   $BMP['bytes_per_pixel2'] = ceil($BMP['bytes_per_pixel']);
   $BMP['decal'] = ($BMP['width']*$BMP['bytes_per_pixel']/4);
   $BMP['decal'] -= floor($BMP['width']*$BMP['bytes_per_pixel']/4);
   $BMP['decal'] = 4-(4*$BMP['decal']);
   if ($BMP['decal'] == 4) $BMP['decal'] = 0;

 //3 : Chargement des couleurs de la palette
   $PALETTE = array();
   if ($BMP['colors'] < 16777216)
   {
    $PALETTE = unpack('V'.$BMP['colors'], fread($f1,$BMP['colors']*4));
   }

 //4 : Cr�ation de l'image
   $IMG = fread($f1,$BMP['size_bitmap']);
   $VIDE = chr(0);

   $res = imagecreatetruecolor($BMP['width'],$BMP['height']);
   $P = 0;
   $Y = $BMP['height']-1;
   while ($Y >= 0)
   {
    $X=0;
    while ($X < $BMP['width'])
    {
     if ($BMP['bits_per_pixel'] == 24)
        $COLOR = unpack("V",substr($IMG,$P,3).$VIDE);
     elseif ($BMP['bits_per_pixel'] == 16)
     { 
        $COLOR = unpack("n",substr($IMG,$P,2));
        $COLOR[1] = $PALETTE[$COLOR[1]+1];
     }
     elseif ($BMP['bits_per_pixel'] == 8)
     { 
        $COLOR = unpack("n",$VIDE.substr($IMG,$P,1));
        $COLOR[1] = $PALETTE[$COLOR[1]+1];
     }
     elseif ($BMP['bits_per_pixel'] == 4)
     {
        $COLOR = unpack("n",$VIDE.substr($IMG,floor($P),1));
        if (($P*2)%2 == 0) $COLOR[1] = ($COLOR[1] >> 4) ; else $COLOR[1] = ($COLOR[1] & 0x0F);
        $COLOR[1] = $PALETTE[$COLOR[1]+1];
     }
     elseif ($BMP['bits_per_pixel'] == 1)
     {
        $COLOR = unpack("n",$VIDE.substr($IMG,floor($P),1));
        if     (($P*8)%8 == 0) $COLOR[1] =  $COLOR[1]        >>7;
        elseif (($P*8)%8 == 1) $COLOR[1] = ($COLOR[1] & 0x40)>>6;
        elseif (($P*8)%8 == 2) $COLOR[1] = ($COLOR[1] & 0x20)>>5;
        elseif (($P*8)%8 == 3) $COLOR[1] = ($COLOR[1] & 0x10)>>4;
        elseif (($P*8)%8 == 4) $COLOR[1] = ($COLOR[1] & 0x8)>>3;
        elseif (($P*8)%8 == 5) $COLOR[1] = ($COLOR[1] & 0x4)>>2;
        elseif (($P*8)%8 == 6) $COLOR[1] = ($COLOR[1] & 0x2)>>1;
        elseif (($P*8)%8 == 7) $COLOR[1] = ($COLOR[1] & 0x1);
        $COLOR[1] = $PALETTE[$COLOR[1]+1];
     }
     else
        return FALSE;
     imagesetpixel($res,$X,$Y,$COLOR[1]);
     $X++;
     $P += $BMP['bytes_per_pixel'];
    }
    $Y--;
    $P+=$BMP['decal'];
   }

 //Fermeture du fichier
   fclose($f1);

 return $res;
}
?> 
```

# linux - file size changes when using cp

> ID：10364999
> 
> 赞同：2
> 
> 时间：2012-04-28T15:37:44.027
> 
> 标签：linux, copy, filesize, cp

I came to the following problem. When I use cp command in Linux to copy file A to file B the sizes of these files are different, e.g. A is 6.4M, while B is 7.0M. It happens even if I do this in the same directory (to avoid different block sizes on different drives).

What is this about? How to avoid? Does it change file?

In addition there is some other strange behavior. If I cope file A to file B and try to check the size of B immediately it gives 0 or e.g 6.2M, after a while the size of B is 7.0M and constant. Is it possible that I capture some intermediate results of copying? Why is that so slow then?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T16:02:33.807

Assuming `coreutils` `du` and `cp`.

When `cp` copies a file, it *tries* to preserve its "sparseness" using heuristics.

> By default, sparse SOURCE files are detected by a crude heuristic and the corresponding DEST file is made sparse as well.

So if the heuristic fails, `cp` will create a plain file, without holes. In that case, the disk usage for the copy will be larger than the disk usage for the source – but the apparent file size should be identical, and the contents should be identical (try `cmp`).

Use `stat` to see both the apparent size and the disk usage for files (plus lots more info).

```
$ dd if=/dev/zero of=./sparse bs=1 count=1 seek=10240000
1+0 records in
1+0 records out
1 byte (1 B) copied, 1.4101e-05 s, 70.9 kB/s
$ cp sparse copy1
$ cp --sparse=never sparse copy2
$ ll
-rw-r--r-- 1 me users 10240001 Apr 28 17:59 copy1
-rw-r--r-- 1 me users 10240001 Apr 28 18:00 copy2
-rw-r--r-- 1 me users 10240001 Apr 28 17:59 sparse
$ du sparse copy*
4   sparse
4   copy1
10004   copy2
$ stat sparse copy*
  File: `sparse'
  Size: 10240001    Blocks: 8          IO Block: 4096   regular file
...
  File: `copy1'
  Size: 10240001    Blocks: 8          IO Block: 4096   regular file
...
  File: `copy2'
  Size: 10240001    Blocks: 20008      IO Block: 4096   regular file
$ cmp sparse copy1 && echo identical
identical
$ cmp sparse copy2 && echo identical
identical 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T16:14:38.227

There were a number of bugs with FIEMAP:

[http://lwn.net/Articles/429349/](http://lwn.net/Articles/429349/)

[http://lkml.indiana.edu/hypermail/linux/kernel/0906.1/00436.html](http://lkml.indiana.edu/hypermail/linux/kernel/0906.1/00436.html)

[http://www.spinics.net/lists/linux-ext4/msg24337.html](http://www.spinics.net/lists/linux-ext4/msg24337.html)

So I suspect a buggy cp from coreutils that tries to use FIEMAP and a buggy filesystem in the kernel that doesn't handle FIEMAP correctly. Upgrade your kernel and coreutils package.