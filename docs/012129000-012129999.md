# StackOverflow 问答 12129000-12129999

# email - Drupal 通知

> ID：12129001
> 
> 赞同：0
> 
> 时间：2012-08-26T09:27:23.460
> 
> 标签：email, drupal, notifications

我正在努力在我的仪表板上显示通知。这是我的场景：

1.  我需要在用户仪表板中显示新注册的用户
2.  我创建了一个仅供会员使用的内容类型。节点的作者需要在她/他的仪表板中获取有关已创建节点中留下的评论的通知。

不应通过电子邮件发送通知。
我正在使用 Drupal 6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T03:24:03.003

尝试使用心跳模块：[http ://drupal.org/project/heartbeat](http://drupal.org/project/heartbeat)

它旨在做一个 facebook 墙类型的事情。但是，如果您正确设置了权限和规则，则可以将其用于您的用例。

只需设置一个规则，在用户创建时发布到管理员心跳，并在节点评论提交时添加到节点所有者的心跳。

# wordpress - Wordpress register_post_type 参数

> ID：12129003
> 
> 赞同：0
> 
> 时间：2012-08-26T09:27:45.387
> 
> 标签：wordpress

我正在查看用于注册自定义帖子类型的 codex，但我不太明白这个参数的作用

```
function codex_custom_init() {
$labels = array(
'name' => _x('Books', 'post type general name'), 
```

第二个参数究竟是做什么的？我在谷歌搜索的任何地方都找不到它。

'name' => _x('Books', **'post type general name'** )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T11:54:44.340

那是一个描述。“书籍”的描述是“帖子类型通用名称”。

# twitter - 应该存储 Twitter 访问令牌吗？

> ID：12129010
> 
> 赞同：0
> 
> 时间：2012-08-26T09:28:41.277
> 
> 标签：twitter

似乎在用户连接到我的 twitter 应用程序后，为了获取他的任何信息或执行任何操作，他必须被重定向到 twitter，然后被重定向回来以获取新的 oauth_verifier，然后才能使用他的信息在任何事情上。

因此，当它返回时存储他的访问令牌有什么用？

# jquery - Jquery Post - Itunes API 返回 200 和错误

> ID：12129013
> 
> 赞同：1
> 
> 时间：2012-08-26T09:29:21.717
> 
> 标签：jquery, json, api, post, itunes

json 响应有效
[http://itunes.apple.com/search?term=jack+johnson](http://itunes.apple.com/search?term=jack+johnson)

但我得到一个错误......为什么？

**示例：http:** [//jsfiddle.net/36Vxs/](http://jsfiddle.net/36Vxs/)

**js**

```
$(document).ready(function() {
var jqxhr = $.ajax( "http://itunes.apple.com/search?term=jack+johnson" )
    .done(function(data) { console.log(data); })
    .fail(function(data) { console.log(data); })
 }); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T09:55:34.407

您无法从其他域获取 JSON。您需要获取 JSONP。以下作品：

```
$(document).ready(function() {
    $.ajax({
        url: "http://itunes.apple.com/search?term=jack+johnson",
        dataType: 'JSONP'
    })
    .done(function(data) { console.log(data); })
    .fail(function(data) { console.log(data); })
 }); 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T10:07:42.263

感谢您发布文档链接，它告诉您使用 JSONP - 请参阅此处[http://jsfiddle.net/joevallender/rMKZw/2/](http://jsfiddle.net/joevallender/rMKZw/2/)

```
$(document).ready(function() {
  $.getJSON(
      'http://itunes.apple.com/search?term=jack+johnson&callback=?', 
      function ( data ) {
         console.log(data)

     });
 }); 
```

它不会从你身上跳出来

`Note: When creating search fields and scripts for your website, you should use dynamic script tags for your xmlhttp script call requests. For example:`

`<script src="http://.../search?parameterkeyvalue&callback="{name of JavaScript function in webpage}"/>`

如果您看到类似的内容，您需要同时使用 $.getJSON 并添加 callback=? 到您在 jQuery 中调用 JSONP 的请求

# magento - Magento：在产品详细信息页面上添加 textboxx 以自定义尺寸

> ID：12129017
> 
> 赞同：0
> 
> 时间：2012-08-26T09:30:31.810
> 
> 标签：magento, magento-1.7

我正在一个珠宝网站上工作（在 magento 1.7 中开发），其中我有一个戒指产品。在戒指产品的详细信息页面上，我的客户想要显示一个文本框，用户将在其中输入尺寸相关的详细信息。

产品价格不会因输入的尺寸而异，此尺寸字段仅供客户参考，以便他们可以根据用户的需要制作合适尺寸的戒指。

我已经检查过，但 magento 不允许在可配置产品上使用文本框。

有谁知道任何扩展（免费或付费）或任何可以帮助我在 magento 中实现此功能的代码。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T09:37:26.200

在您的主题中，对于文件：template/checkout/cart.phtml 添加新标题以及购物车项目的其他标题。

```
1
<th><?php echo $this->__('Comments') ?></th>
In the file: template/checkout/cart/item/default.phtml 
```

添加新列

```
1
<td class="a-center">
2
<textarea name="cart[<?php echo $_item->getId() ?>][comments]" rows="3" cols="20"><?php echo $_item->getItemcomment() ?></textarea>
3
</td> 
```

对于旧版本的 Magento，它将是：

```
1
<td class="a-center">
2
<textarea name="cart[<?php echo $_item->getId() ?>][comments]" rows="3" cols="20"><?php echo $this->getItemItemcomment($_item) ?></textarea>
3
</td> 
```

下一步是在客户更新购物车时将评论保存在数据库中。

因此，在表格“sales_flat_quote_item”中添加一个新字段“itemcomment”。（对于旧版本的 Magento，该表将是“sales_quote_item”）

现在我们将添加执行数据库操作的代码。为此，我们需要修改文件：app/code/core/Mage/Checkout/Model/Cart.php（注意：如果您打算升级 Magento 设置，请将此文件复制到本地并修改。）

这里我们需要向函数 updateItems() 添加一些代码，这样函数现在应该如下所示：

```
01
public function updateItems($data)
02
{
03
    Mage::dispatchEvent('checkout_cart_update_items_before', array('cart'=>$this, 'info'=>$data));
04

05
    foreach ($data as $itemId => $itemInfo) {
06

07
        $item = $this->getQuote()->getItemById($itemId);
08
        if (!$item) {
09
            continue;
10
        }
11

12
        if (!empty($itemInfo['remove']) || (isset($itemInfo['qty']) && $itemInfo['qty']=='0')) {
13
            $this->removeItem($itemId);
14
            continue;
15
        }
16

17
        $qty = isset($itemInfo['qty']) ? (float) $itemInfo['qty'] : false;
18
        if ($qty > 0) {
19
            $item->setQty($qty);
20
        }
21

22
    /* Start: Custom code added for comments */
23
    if(!empty($itemInfo['comments'])) {
24

25
        $write = Mage::getSingleton('core/resource')->getConnection('core_write');
26

27
        # make the frame_queue active
28
        $query = "UPDATE `sales_flat_quote_item` SET itemcomment = '".$itemInfo['comments']."' where item_id = $itemId";
29
        $write->query($query);
30

31
        $item->setItemcomment($itemInfo['comments']);
32
    }
33
    /* End: Custom code added for comments */
34

35
    }
36

37
    Mage::dispatchEvent('checkout_cart_update_items_after', array('cart'=>$this, 'info'=>$data));
38
    return $this;
39
} 
```

在 Admin -> View Order 中显示评论

在下面的文件中添加一个新函数 getItemcomment()：app/code/core/Mage/Adminhtml/Block/Sales/Order/View/Items.php

如果您使用的是 1.5 或更高版本.. 将其添加到下面的文件中。app/code/core/Mage/Adminhtml/Block/Sales/Order/View/Items.php

```
01
    public function getItemcomment($item) {
02
        $itemId = $item->getId();
03

04
        $write = Mage::getSingleton('core/resource')->getConnection('core_write');
05

06
        $query = "SELECT q.* FROM `sales_flat_order_item` o
07
        LEFT JOIN `sales_flat_quote_item` q on o.quote_item_id = q.item_id
08
        WHERE o.item_id = $itemId";
09

10
        # For older versions of Magento
11
/*      $query = "SELECT q.* FROM `sales_order_entity_int` o
12
        LEFT JOIN `sales_flat_quote_item` q on o.value = q.entity_id
13
        WHERE o.entity_id = $itemId AND o.attribute_id = 343";       */    
14

15
        $res = $write->query($query);
16

17
        while ($row = $res->fetch() ) {
18
            if(key_exists('itemcomment',$row)) {
19
                echo nl2br($row['itemcomment']);
20
            }
21
        }
22
    }   
To add the comments column to the items edit the .phtml file below:
app/design/adminhtml/default/default/template/sales/order/view/items.phtml

Adding header for items to make it look like below:

1
.
2
.
3
<tr class="headings">
4
    <th><?php echo $this->helper('sales')->__('Product') ?></th>
5
    <th><?php echo $this->helper('sales')->__('Comments') ?></th>
6
    <th><?php echo $this->helper('sales')->__('Item Status') ?></th>
7
.
8
.
9
.
Adding Column with comments. app/design/adminhtml/default/default/template/sales/order/view/items/renderer/default.phtml
Add a column for item comments juts before status columns to make it look a like below.

view sourceprint?
1
.
2
.
3
<td><?php echo $this->getItemcomment($_item) ?></td> <!-- New column added for item comments -->
4
<td class="a-center"><?php echo $_item->getStatus() ?></td>
5
.
6
. 
```

执行此操作将在项目表中显示评论列。这将添加一个名称为注释的文本框（尽快更改名称）。希望这会有所帮助。注意：只有将商品添加到购物车并且正如您所说的价格没有变化，这才会添加一个盒子，我认为这会更合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-23T00:12:36.760

我已按照您的说明在我的单页结帐上添加了评论框，但是当我检查它时，它没有在数据库表中添加评论。如果我做错了什么，你能告诉我吗？

以下是您说要更新的 Cart.php 文件中的函数：

public function updateItems($data) { Mage::dispatchEvent('checkout_cart_update_items_before', array('cart'=>$this, 'info'=>$data));

```
 /* @var $messageFactory Mage_Core_Model_Message */
    $messageFactory = Mage::getSingleton('core/message');
    $session = $this->getCheckoutSession();
    $qtyRecalculatedFlag = false;
    foreach ($data as $itemId => $itemInfo) {
        $item = $this->getQuote()->getItemById($itemId);
        if (!$item) {
            continue;
        }

        if (!empty($itemInfo['remove']) || (isset($itemInfo['qty']) && $itemInfo['qty']=='0')) {
            $this->removeItem($itemId);
            continue;
        }

        $qty = isset($itemInfo['qty']) ? (float) $itemInfo['qty'] : false;
        if ($qty > 0) {
            $item->setQty($qty);

            $itemInQuote = $this->getQuote()->getItemById($item->getId());

            if (!$itemInQuote && $item->getHasError()) {
                Mage::throwException($item->getMessage());
            }

            if (isset($itemInfo['before_suggest_qty']) && ($itemInfo['before_suggest_qty'] != $qty)) {
                $qtyRecalculatedFlag = true;
                $message = $messageFactory->notice(Mage::helper('checkout')->__('Quantity was recalculated from %d to %d', $itemInfo['before_suggest_qty'], $qty));
                $session->addQuoteItemMessage($item->getId(), $message);
            }
        }

        /* Start: Custom code added for comments */
        if(!empty($itemInfo['comments'])) {

            $write = Mage::getSingleton('core/resource')->getConnection('core_write');

            # make the frame_queue active
            $query = "UPDATE `mgn_sales_flat_quote_item` SET itemcomment = '".$itemInfo['comments']."' where item_id = " . $itemId . "";
            $write->query($query);
            $item->setItemcomment($itemInfo['comments']);

        }
        /* End: Custom code added for comments */

    }

    if ($qtyRecalculatedFlag) {
        $session->addNotice(
            Mage::helper('checkout')->__('Some products quantities were recalculated because of quantity increment mismatch')
        );
    }

    Mage::dispatchEvent('checkout_cart_update_items_after', array('cart'=>$this, 'info'=>$data));
    return $this;
} 
```

# c# - Css 文件图像未显示

> ID：12129021
> 
> 赞同：0
> 
> 时间：2012-08-26T09:32:02.310
> 
> 标签：c#, azure, azure-blob-storage

我在 blob 存储中上传了 css 文件。现在我正在尝试直接在浏览器中访问该文件

通过 blob URI。但我的问题是css文件中引用的图像。这些图像

由相对地址引用。我的 css 文件中有很多图像。所以这就是为什么

任何替代方案，以便无需在 blob 中上传这些图像，我们就可以在浏览器中显示它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:38:38.677

当您在 CSS 中插入相对路径时，相对路径将使用 CSS 的位置作为它的根，然后创建路径。在您的情况下，因为您的 CSS 位于 Azure Blob 存储中，所以您的 CSS 中的相对路径都将以 root 身份查找您的 Azure Blob 存储。您遇到了问题，因为您的图像位于 Azure VM，而您的 CSS 位于 Azure Blob 存储。这是 CSS 的设计行为，如多处所述，即： [CSS 文件中的相对路径是否相对于 CSS 文件？](https://stackoverflow.com/questions/2718532/is-a-relative-path-in-a-css-file-relative-to-the-css-file)

最重要的是，如果您使用 CSS 并引用它的任何内容，它应该引用相同的 Web 服务器。文件夹/容器可以更改，然后您可以在相对路径中正确引用它们。

要解决此问题，您需要将所有图像复制到 Windows Azure Blob 存储中的同一容器中，然后您可以在 CSS 中的任何位置使用“imagename.imageextension”。

# java - 错误：- java 运行时环境 JRE 或 java 开发工具包必须可用才能运行 eclipse

> ID：12129024
> 
> 赞同：33
> 
> 时间：2012-08-26T09:32:33.040
> 
> 标签：java, eclipse

我试图运行`"eclipse-jee-juno-win32-x86_64"`，但它引发了以下错误*“java运行时环境JRE或java开发工具包必须可用才能运行eclipse。在以下位置搜索后没有找到java虚拟机............”* .

请记住，我同时安装了 java jre7 和 Java jdk1.7.0_06`C:\Program Files\Java.`

另一个奇怪的事情是 Eclipse 昨天运行时没有任何问题，但今天我下载了 JDK 1.7.0_06，我将 JAVA_HOME 设置为“C:\Program Files\Java\jdk1.7.0_06”所以我没有不知道问题是不是和这个有关？？？。

那么运行 Eclipse 可能会出现什么问题呢？BR

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-08-26T09:37:42.220

检查`eclipse.ini`文件并确保现在没有`-vm`指向不存在的 java 安装的选项。您可以删除该选项以让 Eclipse 确定要使用的 java 安装或更改它以使其指向新安装。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-05-15T19:06:29.970

这对我有用： [Eclipse will not open due to environment variables](https://stackoverflow.com/questions/2162121/eclipse-will-not-open-due-to-environment-variables)

* * *

让eclipse直接使用你的java vm！

将这些行放在 eclipse.ini 的末尾（位于 eclipse.exe 所在的目录中）：

```
-vm
<your path to jdk|jre>/bin/javaw.exe 
```

注意有两条线。还要确保 -vm 选项在 -vmargs 选项之前（当然在“openFile”之后）。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-03-20T17:47:57.007

我之前遇到过这个问题，我通过以下方式解决了：

右击我的电脑 -> 属性 -> 高级系统设置。

在这两个部分：

*   “YourUser”的用户变量 &
*   系统变量

通过在其末尾添加“;”来更新 PATH 和你的 java bin 文件夹位置，我的是“C:\Program Files\Java\jdk1.7.0_51\bin”

如果没有路径，则使用 NEW 按钮创建它，将“Variable Name”设置为 PATH，将“Value”设置为您的 java bin 位置。

如果不需要，您可以替换 PATH

注意：文件夹应该包含 javaw.exe

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-05-21T05:15:01.090

**第1步**

`My computer > properties > Advance system settings`

**第2步**

`environment variables > click New button under user variables > Enter variable name as 'PATH'`

复制 java bin 的位置`(e.g:C:\Program Files\Java\jdk1.8.0_121\bin)` 并将其粘贴到 Variable value 中，然后单击**OK**现在打开 eclipse。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-12-05T05:53:54.900

我遇到了这个问题，并通过以下步骤解决。

1.  在记事本中打开 Eclipse.ini 文件
2.  搜索虚拟机
3.  从此文件中删除不存在的 JRE 路径，如下所述

    -vm C:/程序文件/Java/jre1.8.0_181/bin

4.  保存此文件并再次运行 eclipse。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-05T13:26:54.963

这个问题是因为eclipse无法找到Java，

检查java目录 cd /Library/Java/JavaVirtualMachines///Contents/Home/jre/bin

[如果从http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)下来 JDK 不存在

安装 JDK 后，更改 eclipse.ini 文件

在 Mac 上：右键单击 Eclipse 图标并单击“显示包内容”

导航到 eclipse>Contents>Eclipse>eclipse.ini

打开文件并用这个替换“-vm”之后的java路径

/Library/Java/JavaVirtualMachines/jdk1.8.0_131.jdk/Contents/Home/jre/bin

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-16T15:41:43.510

我将JDK安装目录中的JRE文件夹放到Eclipse安装目录（包含eclipse.exe文件的文件夹）。它对我有用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-07-26T07:11:55.517

打开`/Users/you/eclipse/java-oxygen` eclipse右键，点击`show package content`

然后转到`Contents/Eclipse`并选择文件 eclipse.ini，在文本文件或任何编辑器中打开。

搜索已删除的 java 路径并添加更新的 java 路径，直到 bin /Library/Java/JavaVirtualMachines/jdk1.8.0_144.jdk/Contents/Home/bin

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-08-26T15:50:16.117

在这种情况下，这似乎无关紧要，但如果其他人遇到这个问题 --- 确保如果您安装了 32 位版本的 Eclipse，那么您还安装了 32 位版本的 JRE。同样，如果您安装了 64 位版本的 Eclipse，则您的 Windows 中需要 64 位版本的 JRE。否则，您也会看到上述错误消息。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-12-04T11:38:58.750

如果您使用的是 32 位 Eclipse IDE，那么您可能需要安装“jdk-7u45-windows-i586”版本。

我曾尝试使用 64 位版本的 JDK，但没有运气！

谢谢，

普内思

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-06-28T08:07:51.570

我已经尝试了一切，最后删除了`-vm`对我有用的选项。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-08-07T16:27:08.100

**MAC 上的 ECLIPSE 光子**

1.  获取您当前的 JAVA_HOME 路径 **/Library/Java/JavaVirtualMachines/jdk1.8.0_181.jdk/Contents/Home**

2.  打开 /Users/you/eclipse/jee-photon/Eclipse.app/Contents/Eclipse/ 并单击包内容。然后使用任何文本文件编辑器打开**eclipse.ini文件。**

3.  如下编辑您的 -VM 参数（确保 Java 路径与 $JAVA_HOME 相同）

-vm

/Library/Java/JavaVirtualMachines/jdk1.8.0_181.jdk/Contents/Home/jre/bin

4.  保存并开始你的日食。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-07-04T10:08:17.580

对于 mac：

我在下面添加了两个命令，它工作正常！

```
-vm
/usr/bin
/usr/libexec/java_home --verbose 
```

[例子](http://wiki.eclipse.org/Eclipse.ini#-vm_value:_Windows_Example)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-04-15T08:13:11.780

Java 版本更新后我得到了同样的错误。我刚刚在 eclipse.ini 文件中编辑了“-vm”之后的行，它指向旧的且不再存在的 jre 路径，一切正常。

# android - 难以在 facebook 上发布视频

> ID：12129025
> 
> 赞同：0
> 
> 时间：2012-08-26T09:32:33.977
> 
> 标签：android, facebook

我正在制作一个应用程序，我想在 facebook 上粘贴视频。但每当我尝试时，我得到的是例外：

```
08-26 14:56:41.311: D/Facebook-Example(520): Response: {"error":{"message":"(#351) Video file was corrupt or invalid","type":"OAuthException","code":351}}
08-26 14:56:41.366: W/Facebook-Example(520): Facebook Error: (#351) Video file was corrupt or invalid 
```

这是代码：

```
 mUploadButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                byte[] data = null;
                AssetFileDescriptor fileDesc = getResources().openRawResourceFd(
                R.raw.baba);
                String dataPath =  fileDesc.toString();//"android.resource://com.facebook.android/raw/movie";
                String dataMsg = "Your video description here.";
                String dataName = "baba.wav";

                Bundle param;
                AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(mFacebook);
                InputStream is ;
                try 
                {
                        is = fileDesc.createInputStream();
                    if(is != null)
                    data = readBytes(is);
                    param = new Bundle();
                    param.putString("message", dataMsg);
                    param.putString("filename", dataName);
                    param.putByteArray("video", data);
                    mAsyncRunner.request("me/videos", param, "POST", new SampleRequestListener(), null);
                }
                catch (FileNotFoundException e) {
                   e.printStackTrace();
                }
                catch (IOException e) {
                   e.printStackTrace();
                }       
            }
        });
        mUploadButton.setVisibility(mFacebook.isSessionValid() ?
                View.VISIBLE :
                View.INVISIBLE); 
```

请告诉我如何解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T09:42:08.403

您是否在您的应用程序中进行了身份验证？如果不是 facebook 会抛出一个错误。您需要一个身份验证 ID 才能在 Facebook 上发帖。

# android - 使用 SimpleCursorTreeAdapter 的自定义可扩展列表视图

> ID：12129027
> 
> 赞同：3
> 
> 时间：2012-08-26T09:33:01.567
> 
> 标签：android, binding, expandablelistview, simplecursoradapter

我有一个`ExpandableListView`with `SimpleCursorTreeAdapter`。在孩子们中，如果我没有数据，我需要显示一个 loading`Spinner`和一个`TextField`. 但是，当我有数据时，必须相应地显示数据。我尝试了几件事：-

1.  我创建了一个新表，第一行有一个 textfield ，我必须在空数据的情况下显示它。（这也给了我`Cursor`）。

2.  我已经覆盖了`getChildView()`,`bindChildView()`函数。

覆盖该`getChildView()`函数并`View`在其中为特定`Cursor`值创建一个，效果很好。但是，在我返回新创建的视图后，总是绑定新视图，旧视图丢失。请告诉我如何解决这个问题。

# haskell - 如何更改参数的顺序？

> ID：12129029
> 
> 赞同：22
> 
> 时间：2012-08-26T09:33:33.307
> 
> 标签：haskell

如果我想更改函数中参数的顺序怎么办？

有`flip`：

```
flip :: (a -> b -> c) -> b -> a -> c 
```

但我不知道如何使它适用于更多的参数。有没有一种通用的方法来置换论点？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-26T16:39:34.160

如果您想在编写函数后对其进行编辑，那么您真的应该阅读 Conal Elliott 的优秀博客文章*语义编辑器组合器*

[http://conal.net/blog/posts/semantic-editor-combinators](http://conal.net/blog/posts/semantic-editor-combinators)

事实上，无论如何，每个人都应该阅读它。这是一个真正有用的方法（我在这里滥用）。Conal 不仅使用了更多的构造，`result`而且`flip`效果非常灵活。

```
result :: (b -> b') -> ((a -> b) -> (a -> b'))
result =  (.) 
```

假设我有一个使用 3 个参数的函数

```
use3 :: Char -> Double -> Int -> String
use3 c d i = c: show (d^i) 
```

我想交换前两个，我只是`flip use3`按照你说的那样使用，但是如果我想交换第二个和第三个，我想要的是应用于`flip` 应用`use3`到它的第一个参数的结果。

```
use3' :: Char -> Int -> Double -> String
use3' = (result) flip use3 
```

让我们继续并交换`use5`使用 5 的函数的第四个和第五个参数。

```
use5  :: Char -> Double -> Int -> (Int,Char) -> String     -> String
use5' :: Char -> Double -> Int -> String     -> (Int,Char) -> String

use5 c d i (n,c') s = c : show (d ^ i) ++ replicate n c' ++ s 
```

我们需要应用`flip`应用`use5`到它的前三个参数的结果，所以这就是结果的结果：

```
use5' = (result.result.result) flip use5 
```

为什么不稍后再考虑并定义

```
swap_1_2 :: (a1 -> a2 -> other) -> (a2 -> a1 -> other)
swap_2_3 :: (a1 -> a2 -> a3 -> other) -> (a1 -> a3 -> a2 -> other)
--skip a few type signatures and daydream about scrap-your-boilerplate and Template Haskell    

swap_1_2 = flip    
swap_2_3 = result flip
swap_3_4 = (result.result) flip
swap_4_5 = (result.result.result) flip
swap_5_6 = (result.result.result.result) flip 
```

...如果您喜欢简约和优雅，那就应该停下来。请注意，由于出色的 Curry 和 的右关联性，该类型`other`可能如此，swap_2_3 适用于接受任意数量以上两个参数的函数。对于更复杂的事情，你真的应该手动编写一个置换函数。以下内容只是为了求知欲。`b -> c -> d``->`

现在，交换第二个和第四个参数怎么样？[旁白：我记得在我的代数课上有个定理，任何排列都可以作为交换相邻项目的组合。]

我们可以这样做：第 1 步：将 2 移到 4 旁边 ( `swap_2_3`)

```
a1 -> a2 -> a3 -> a4 -> otherstuff
a1 -> a3 -> a2 -> a4 -> otherstuff 
```

在那里交换它们`swap_3_4`

```
a1 -> a3 -> a2 -> a4 -> otherstuff
a1 -> a3 -> a4 -> a2 -> otherstuff 
```

然后再次使用以下命令将 4 交换回位置 2 `swap_2_3`：

```
a1 -> a3 -> a4 -> a2 -> otherstuff
a1 -> a4 -> a3 -> a2 -> otherstuff 
```

所以

```
swap_2_4 = swap_2_3.swap_3_4.swap_2_3 
```

也许有一种更简洁的方式可以直接到达那里，有很多结果和翻转，但随机混乱并没有为我找到它！

同样，为了交换 1 和 5，我们可以将 1 移到 4，与 5 交换，将 5 从 4 移回 1。

```
swap_1_5 = swap_1_2.swap_2_3.swap_3_4 . swap_4_5 . swap_3_4.swap_2_3.swap_1_2 
```

或者，如果您愿意，可以`swap_2_4`通过在末端翻转来重复使用（将 1 与 2 交换，将 5 与 4 交换），swap_2_4 然后再次翻转末端。

```
swap_1_5' = swap_1_2.swap_4_5\. swap_2_4 .swap_4_5.swap_1_2 
```

当然更容易定义

```
swap_1_5'' f  a b c d e = f  e b c d a 
```

它的好处是清晰、简洁、高效，并且在 ghci 中具有有用的类型签名，而无需显式注释。

然而，这是一个非常有趣的问题，谢谢。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-26T10:38:21.213

一般来说，最好的方法是手动完成。假设你有一个函数

```
f :: Arg1 -> Arg2 -> Arg3 -> Arg4 -> Res 
```

你想

```
g :: Arg4 -> Arg1 -> Arg3 -> Arg2 -> Res 
```

然后你写

```
g x4 x1 x3 x2 = f x1 x2 x3 x4 
```

如果您多次需要特定的排列，那么您当然可以从中抽象出来，就像`flip`两个参数的情况一样：

```
myflip :: (a4 -> a1 -> a3 -> a2 -> r) -> a1 -> a2 -> a3 -> a4 -> r
myflip f x4 x1 x3 x2 = f x1 x2 x3 x4 
```

# java - 在 JTextPane 中为 Java 关键字着色

> ID：12129034
> 
> 赞同：1
> 
> 时间：2012-08-26T09:34:27.977
> 
> 标签：java, swing, code-formatting, jtextpane, styledtext

我正在尝试使用`JTextPane`.

为此，我首先搜索关键字的索引，然后对其进行操作。我的代码在这里（我使用 NetBeans 制作 GUI，所以我删除了该代码）

主要代码在`replace (jTextPane)`方法中。

```
package gad.dag;

import java.awt.Color;
import java.awt.Font;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.text.*;

public class Editor extends javax.swing.JFrame {

javax.swing.JTextPane jEditorPane1 = new javax.swing.JTextPane();    

int fromIndex = 0;
String[] keywords = {"import ","class ","int ","while","if","for","void","boolean","abstract"
,"byte ","static ","break","char ","try","catch","case","const","continue","default","new ","double "
,"else","enum ","extends ","finally","float ","final ","goto ","implements "
,"instanceof","interface ","long ","native","package ","private "
,"public ","protected ","return","short ","super","strictfp","switch",
"synchronized","this","throw","throws","transient","volatile","assert"};

public Editor() {
    //initComponents();
    setSize(700,600);
    setTitle("Java Editor");     
    jEditorPane1.addKeyListener(new KeyListener(){
      public void keyTyped(KeyEvent e) {

      }           

        @Override
        public void keyPressed(KeyEvent e) {

        }

        @Override
        public void keyReleased(KeyEvent e) {
            jEditorPane1ActionPerformed(e);
        }

    });
    Font font = new Font("Lucida Console",Font.PLAIN,14);
    jEditorPane1.setFont(font);        
    this.add(new javax.swing.JScrollPane(jEditorPane1));          
}

public int countLine(String str) {
    int n= 0 ;
    //char c = '\n';
    for(int i=0;i<str.length();i++)
        if(str.charAt(i)=='\n') n++;
    return n;
}

public void replace(javax.swing.JTextPane jp) {   
 int cur = jp.getCaretPosition();
 StyleContext sc = StyleContext.getDefaultStyleContext();
 AttributeSet aset = sc.addAttribute(SimpleAttributeSet.EMPTY, StyleConstants.Foreground, Color.BLUE);
 for(int i=0;i<keywords.length;i++) {
 int fromIndex = 0;    
 String msg = keywords[i];         
 int nol = 0;     //number of lines upto keyword
 int len=1;     
 while(len!=-1) {
 len = jp.getText().indexOf(msg, fromIndex);             
 jp.setSelectedTextColor(Color.RED);
 if(len!=-1) {
 try {
        nol = countLine(jp.getText(0, len+1));
    } catch (BadLocationException ex) {
        break;
    }                    
 fromIndex = len+msg.length();
 System.out.println("len = "+len+" nol="+nol);                         
 len-=nol;      
 jp.select(len, len+msg.length());          
 System.out.println("Selected Text = "+jp.getSelectedText());
 jp.replaceSelection("");
 jp.setCaretPosition(len);
 jp.setCharacterAttributes(aset, false);
 jp.replaceSelection(msg);     
 }          
 }
 }
 aset = sc.addAttribute(SimpleAttributeSet.EMPTY, StyleConstants.Foreground, Color.BLACK);
 jp.setCharacterAttributes(aset, false);
 jp.setCaretPosition(cur);
}

private void jEditorPane1ActionPerformed(KeyEvent evt) {
    replace(jEditorPane1);
}

public static void main(String args[]) {

    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            new Editor().setVisible(true);
        }
    });
}
// Variables declaration - do not modify//GEN-BEGIN:variables
private javax.swing.JMenu jMenu1;
private javax.swing.JMenu jMenu2;
private javax.swing.JMenuBar jMenuBar1;
private javax.swing.JMenuItem jMenuItem1;
private javax.swing.JMenuItem jMenuItem10;
private javax.swing.JMenuItem jMenuItem2;
private javax.swing.JMenuItem jMenuItem3;
private javax.swing.JMenuItem jMenuItem4;
private javax.swing.JMenuItem jMenuItem5;
private javax.swing.JMenuItem jMenuItem6;
private javax.swing.JMenuItem jMenuItem7;
private javax.swing.JMenuItem jMenuItem8;
private javax.swing.JMenuItem jMenuItem9;
private javax.swing.JTabbedPane jTabbedPane2;
// End of variables declaration//GEN-END:variables
} 
```

该代码工作了一段时间，但没有。行增加的事情出错了。

# html - ul 中 ul 的正确语义

> ID：12129037
> 
> 赞同：47
> 
> 时间：2012-08-26T09:35:12.087
> 
> 标签：html

我在`ul`里面写`ul`手风琴式的菜单。但是当我在 html 验证器中检查下面的代码时，它给了我这些错误

```
Element ul not allowed as child of element ul in this context. (Suppressing further errors from this subtree.) 
```

在这种情况下，如何为 ul 编写语义正确的 html？

这是我的html

```
<nav class="row">
            <ul class="menu">
                <li>
                    <a href="">Uutiset</a>
                </li>
                <ul class="inside">
                    <li><a href="">Fringilla Condimentum</a></li>
                    <li><a href="">Lorem</a></li>
                    <li><a href="">Fringillau</a></li>
                    <li><a href="">Curabitur</a></li>
                    <li><a href="">Mollis</a></li>
                    <li><a href="">Ipsum</a></li>
                    <li><a href="">Lorem</a></li>
                    <li><a href="">Fringillau</a></li>
                    <li><a href="">Curabitur</a></li>
                    <li><a href="">Mollis</a></li>
                    <li><a href="">Ipsum</a></li>
                </ul>
                <li><a href="">Foorumi</a></li>
                <li><a href="">Kauppa</a></li>
                <li><a href="">Messut</a></li>
                <li>
                    <a href="">Asiakaspalvelu</a>
                </li>
                <ul class="inside">
                    <li><a href="">Tilaa lehti</a></li>
                    <li><a href="">Muutos tilaukseen</a></li>
                    <li><a href="">Lähetä uutisvinkki</a></li>
                    <li><a href="">Anna palautetta</a></li>
                </ul>
                <li><a href="">Nakoislehti</a></li>
                <li><a href="">Nae meidat</a></li>
            </ul>
        </nav> 
```

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-08-26T09:39:08.627

你必须用一个包裹每个内部`UL`s `LI`，即

```
<ul class="menu">
    <li>
        <a href="">Uutiset</a>
    </li>
    <li> <----
        <ul class="inside">
            <li><a href="">Fringilla Condimentum</a></li>
            <li><a href="">Lorem</a></li>
        </ul>
    </li> <----
 </ul> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-26T10:16:23.867

元素的子元素（直接后代）`ul`必须都是`li`元素。这是一个纯粹的语法要求。

然而，修复错误的方法取决于语义。如果内部列表对应于前面主题的子主题`li`，那么您应该将内部列表包装在其中`li`，例如

```
 <li>
                <a href="">Asiakaspalvelu</a>
                <ul class="inside">
                    <li><a href="">Tilaa lehti</a></li>
                    <li><a href="">Muutos tilaukseen</a></li>
                    <li><a href="">Lähetä uutisvinkki</a></li>
                    <li><a href="">Anna palautetta</a></li>
                </ul>
            </li> 
```

从技术上讲，这意味着只需向前移动一个`</li>`标签。不过，您可能希望更改嵌套以反映结构，但这只是为了 HTML 源代码的可读性。

另一方面，如果内部列表在某种意义上只是较低级别的项目，而不是从属于较高级别的项目，则可以将它们包装在`<li>`不包含更多内容的 a 中，例如

```
 <ul class="menu">
            <li>
                <a href="">Uutiset</a>
            </li>
            <li>
                <ul class="inside">
                    <li><a href="">Fringilla Condimentum</a></li>
                    <li><a href="">Lorem</a></li>
                    ...
                </ul>
            </li>
        ... 
```

从技术上讲，这意味着只是包裹`<li>`和`</li>`围绕`<ul>`元素。

然而，这通常表明存在设计缺陷。如果你只是想让一些项目更加嵌套，你应该使用样式而不是标记来做到这一点。包含与外部列表项目无关的内部列表的列表相当混乱。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-02-21T19:50:28.853

这花了我一点时间来理解，因为我将我的内部 ul 包裹在它自己的 li 标签中，而不是我的内部 ul 附加到的 li 标签中。如果你将你的内部 ul 包裹在它自己的 li 标签中，你会得到一个额外的不需要的子弹。

```
<ul>
 <li>Item 1</li>
 <li>Item 2</li>
 <li>item 3</li>
 <li>Item 4</li>
 <li>Item 5 has sub items:
      <ul>
          <li>Sub Item 1</li>
          <li>Sub Item 2</li>
      </ul>
 </li>
 <li>Item 6</li>
 <li>Item 7</li>
</ul> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-26T09:38:05.753

您需要将内部`ul`放在`li`元素内。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-25T09:03:36.753

IN li 可以容纳 ul。Nexted li 和 uls 是可能的

```
<ul class="classname">
    <li>
        <a href="">TEST</a>
    </li>
    <li> 
        <ul class="classname">
            <li><a href="">1.1</a></li>
            <li><a href="">1.2</a></li>
        </ul>
    </li> 
 </ul> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-06-21T19:15:39.477

```
<ul style="list-style-type:circle">
    <li>Cucumber Test Scripts (GroupId: Info.cukes) 
    </li>
    <ul style="list-style-type:square">
        <li>cucumber-junit</li>
        <li>cucumber-java</li>
        <ul style="list-style-type:disc">
            <li>Supports use of Annotations for cucumber step definitions.
            </li>
        </ul>
        <li>cucumber-java8</li>
        <ul style="list-style-type:disc">
            <li>Supports use of Lambda Expressions for cucumber step definitions.
            </li>
        </ul>
        <li>cucumber-picocotainer</li>
    </ul>
</ul> 
```

这是在列表中嵌套列表的想法。快乐编码:)

# org-mode - 如何将输入作为标准输入传送到 src_block ？

> ID：12129038
> 
> 赞同：5
> 
> 时间：2012-08-26T09:35:18.567
> 
> 标签：org-mode, literate-programming, org-babel

考虑 org-babel 中的以下 perl 片段，它使用`<STDIN>`.

```
** Ans 2
   #+begin_src perl :results output
     use Math::Trig;
     $rad = <STDIN>;
     $circumference = 2*pi*$rad;
     print "Circumference of circle is $circumference";
   #+end_src 
```

是否可以将输入从另一个块通过管道传输到该块？

说 ：

```
#+begin_src text :name test-input
  12.5
#+end_src 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T08:14:16.537

您可以`$rad`从块直接传递给 perl 脚本`#+results`：请参阅手册中的[将参数传递给代码块](http://orgmode.org/org.html#var)。

那会给

```
#+begin_src perl :results output :var rad=test-input 
```

用作输入

```
#+results: test-input
:  12.5 
```

# javascript - 如何在 html/javaScript/Jquery 中“浏览文件夹”

> ID：12129039
> 
> 赞同：4
> 
> 时间：2012-08-26T09:35:24.627
> 
> 标签：javascript, html, jquery, jquery-plugins

```
<input type="file"> only allows the user to browse for files. 
```

“浏览文件夹”对话框怎么样？html / javascript可以做到吗？我找不到任何语法。如果没有，请告知其他方法是什么。

请指教。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-24T13:52:11.727

您可以使用 Flash 执行多个文件选择对话框，但对于客户端计算机上的文件夹，至少需要使用 Java 小程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T09:48:24.697

只要您正在建立一个网站，就没有其他选项可以将文件保存在客户端计算机上然后让他/她下载它，这将（如我的评论中所述）转到他的下载文件夹，或向他展示**一个对话框让他选择一个*目录***。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-25T17:12:38.213

尝试这个，

`<input type="file" webkitdirectory multiple/>`

注意：“webkitdirectory”在 IE 上不起作用，它将作为“浏览文件”对话框”。

# c++ - 什么是 string::find(char c) 应该在 C++ 中返回

> ID：12129041
> 
> 赞同：1
> 
> 时间：2012-08-26T09:35:42.063
> 
> 标签：c++, find

`s.find(c)`如果 char c 不在字符串中，应该返回什么。我的意思是它在任何地方都有描述，因为 c++ 文档通常不会说最重要的事情。

编辑：更清楚： find 返回我们正在寻找的字符的索引，如果它（字符）不存在怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-26T09:37:08.097

`std::string::npos`. 但通常使用更好`std::find`，因为返回`s.end()`和迭代器优于索引。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-26T09:40:02.657

当字符不在字符串中时，`std::string::npos`返回一个特殊的索引值。

```
size_t index = s.find(c);
if (index == string::npos)
   cout << "not found" << endl;
else
   cout << "found at " << index << endl; 
```

可以在此处找到更多详细信息和示例：

*   [http://en.cppreference.com/w/cpp/string/basic_string/find](http://en.cppreference.com/w/cpp/string/basic_string/find)
*   [http://en.cppreference.com/w/cpp/string/basic_string/npos](http://en.cppreference.com/w/cpp/string/basic_string/npos)

# ruby-on-rails - twitter-bootstrap-rails gem 如何使导航栏不可折叠？

> ID：12129043
> 
> 赞同：0
> 
> 时间：2012-08-26T09:35:50.533
> 
> 标签：ruby-on-rails, twitter-bootstrap

我正在使用 twitter-bootstrap-rails gem，默认情况下导航栏是可折叠的，这真的很烦人。那么，如何完全删除此功能？

我必须在 bootstrap_and_override.css.less 中添加什么才能使其不可折叠？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:30:55.573

只需使用任何工具即检查页面。Firebug 并记下由 bootstrap 生成的类、id。最后将它们放入您的样式表并根据需要进行调整，您的引导程序已更改。

# ios - 如何将 iPhone 应用程序移植到 iPad

> ID：12129047
> 
> 赞同：0
> 
> 时间：2012-08-26T09:36:27.040
> 
> 标签：ios, ipad

我有一个 iphone 应用程序，我想把它变成 ipad 应用程序。我创建了 xib_ipad，我使用了 UISwitchView，左边是我的根类，在右边我创建了一个选择选项的类，SelectView。我按照指南[http://www.raywenderlich.com/1111/how-to-port-an-iphone-application-to-the-ipad](http://www.raywenderlich.com/1111/how-to-port-an-iphone-application-to-the-ipad)。但是随着我的更改，由于类 SelectView（右）不起作用，我创建了一个对象：

```
Select1 *one = [[Select1 alloc] initWithNibName:@"Select1" bundle:[NSBundle mainBundle]];
[self.navigationController pushViewController:one animated:YES]; 
```

但是如果我再次选择它，视图就会重叠。怎么能解决？或者如何在右侧选择和加载具有不同xib的不同类？我不使用故事板。谢谢！

# objective-c - 从 JSON 文件 iPhone 读取对象

> ID：12129049
> 
> 赞同：0
> 
> 时间：2012-08-26T09:36:39.167
> 
> 标签：objective-c, ios, cocoa-touch

我以这种方式读取了一个 JSON 文件：

```
NSString *fileContentHomework = [[NSString alloc] initWithContentsOfFile:homeworkPath];

SBJsonParser *parserHomework = [[SBJsonParser alloc] init];

NSDictionary *dataHomework = (NSDictionary *) [parserHomework objectWithString:fileContentHomework error:nil];

NSArray *nameofHomework = [dataHomework objectForKey:@"nameH"];
NSArray *homeworkDifficulty = [dataHomework objectForKey:@"difficultyH"];

CHOrderedDictionary* DictionaryHomework = [CHOrderedDictionary dictionaryWithObjects:homeworkDifficulty forKeys:nameofHomework]; 
```

...然后...

```
NSArray *allKeys2 = [DictionaryHomework allKeys];

        for (int i = 0; i < [allKeys count]; i++) { 
```

……

```
NSString *key2 = [allKeys2 objectAtIndex:i];

            NSObject *obj2 = [DictionaryHomework objectForKey:key2];

            int val;
            val = [key2 intValue]; 
```

……

JSON 文件如下所示：

```
{"difficultyH":["name", "name"],"nameH":["2", "2"]} 
```

我注意到，如果文件中的数据相同，如上所示，应用程序会给我一个 objectAtIndex 错误，而如果数据不同，如以下情况，应用程序工作正常：

```
{"difficultyH":["name", "name2"],"nameH":["2", "3"]} 
```

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T14:18:25.333

它与 JSON 无关。在第一种情况下，您尝试使用重复键构建 NSDictionary。那是行不通的。

# c# - 带有 SMO 的脚本表，用于故障排除性能的问题

> ID：12129050
> 
> 赞同：0
> 
> 时间：2012-08-26T09:36:41.860
> 
> 标签：c#, sql-server, sql-server-2008, smo

使用 SMO，我遇到了一个很大的性能问题：我编写了所有数据库对象（函数、用户、角色、表......），当我编写除表之外的所有数据库对象时，只需要不到 2 分钟，但是当我启用表脚本时需要2个小时？因此，我使用以下方法加载所有表属性：

```
 serverSQL.SetDefaultInitFields(typeof(SMO.Table), true); 
```

使 SMO 性能更高，但似乎没有效果。这是我的代码：

```
public static string dumpTables(SMO.TableCollection tables)
        {
            int cpt = 0;
            SMO.ScriptingOptions scriptingOptions = new SMO.ScriptingOptions();
            StringBuilder sb = new StringBuilder();
            scriptingOptions.IncludeIfNotExists = true;
            scriptingOptions.DriAll = true;
            scriptingOptions.ExtendedProperties = true;  

            foreach (SMO.Table table in tables)
            {
                sb.Append("-- Table " + table.Name + "\n");

                foreach (string scriptline in table.Script(scriptingOptions)) //Script call take a long time
                {
                    sb.Append(scriptline + Environment.NewLine );
                }
                sb.Append("GO" + Environment.NewLine);
                cpt++;
                Console.WriteLine(string.Format("Table {0} : {1}", cpt.ToString(), table.ToString()));
            }
            return sb.ToString();
        } 
```

最后一个问题，对我来说是使用sql脚本直接创建表脚本但是使用SSMS，我可以在几分钟内制作表脚本。（SSMS脚本向导使用SMO还是sql脚本？）谢谢给我一个修复它的问题.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:08:50.993

我找到了很多解决方法：在为每个 SMO.Table 一个一个地记录所有脚本后，我发现一些脚本花费的时间不到 1 秒，而另一些则需要大约 50 秒！

1.  因此，第一个解决方法是使用多线程。这样做，让我需要 2 小时才能完成的脚本只需要 20 分钟，速度提高 600%。我尝试使用基本的 ThreadPool，而不是在测试有多少线程允许最佳性能时对其进行优化。以后我会告诉你的。（我将使用不同数量的线程进行测试并记录下来，以查看我的计算机中提高最佳性能的线程数）

2.  另一种解决方法是在 codeplex 中使用 DBDiff，该源代码允许您在没有 SMO 的情况下更快地编写脚本，但对于那些想要更少代码的人来说没有用（手动编写脚本；-）。您必须使用类来创建sql脚本。但是该工具非常适合同步数据库；-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T21:45:22.893

摆脱上面格特·阿诺德的评论，这应该为你做：

```
public static string dumpTables(SMO.TableCollection tables)
        {
            SMO.ScriptingOptions scriptingOptions = new SMO.ScriptingOptions();
            scriptingOptions.IncludeIfNotExists = true;
            scriptingOptions.DriAll = true;
            scriptingOptions.ExtendedProperties = true;

            SMO.Scripter scripter = new SMO.Scripter();
            scripter.Options = scriptingOptions;

            return scripter.Script(tables);
        } 
```

警告：我不是 C# 程序员（只是 DBA），但 Scripter.Script() 方法可以采用 SqlSmoObject[]，这实际上是上面评论中的链接用于提高性能的方法。

# sql - 使用默认 SYSDATE 将列更改为 DATE 的 SQL 语句 (Oracle) 是什么？

> ID：12129051
> 
> 赞同：3
> 
> 时间：2012-08-26T09:36:51.673
> 
> 标签：sql, oracle

我有一个表名：`kundorder`

和一个列名：`datum`. 我想将数据类型更改为 (DATE, SYSDATE)，但我无法让它工作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-26T12:44:41.683

我认为它应该看起来像这样

```
ALTER TABLE kundorder MODIFY datum DATE DEFAULT SYSDATE 
```

那样你说那`datum`必须是类型`date`，但如果这当然是这种情况

```
ALTER TABLE kundorder MODIFY datum DEFAULT SYSDATE 
```

也可以，让字段`datum`的类型相同，只需确保默认为 SYSDATE。

# mysql - 从objective-c连接到MySQL/Oracle db，无需额外层

> ID：12129055
> 
> 赞同：0
> 
> 时间：2012-08-26T09:37:24.887
> 
> 标签：mysql, objective-c, ios, database, oracle

我想从一个 Objective-C iOS 应用程序连接到一个 MySQL 或 Oracle 数据库（这两个选项都是可能的）。

为了简单起见，我想**避免在服务器端添加任何附加层**（如 PHP/ruby/python...），而是直接从我的应用程序中查询数据库。

它们是我应该知道的任何框架或教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:15:59.543

该站点可能对您有用：

[http://www.karlkraft.com/index.php/2010/09/17/mysql-for-iphone-and-osx/](http://www.karlkraft.com/index.php/2010/09/17/mysql-for-iphone-and-osx/)

尽管这似乎是可能的，但我建议您考虑其他方式，因为正如网站所说，不能保证苹果会接受您的应用程序。

希望我帮助了你

# sql-server - 从存储过程中的视图中选择时不能使用 ORDER BY

> ID：12129057
> 
> 赞同：0
> 
> 时间：2012-08-26T09:37:31.260
> 
> 标签：sql-server, sql-server-2005, stored-procedures, view

我有一个观点，虽然我可以执行此语句而不会出现任何错误：

```
SELECT * from vwShippingNoticeBase
order by InvoiceNum 
```

当我尝试用这个完全相同的语句创建一个存储过程时，我得到一个错误：

```
create PROCEDURE [dbo].[upSELECT_shippingNoticeOrderByInvoiceNum]
AS
BEGIN
SET NOCOUNT ON;
SELECT * FROM vwShippingNoticeBase
order by invoiceNum 
```

错误：

> 消息 102，级别 15，状态 1，过程 upSELECT_shippingNoticeByDateRange，第 7 行
> “invoiceNum”附近的语法不正确。

很奇怪！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T09:39:28.637

如何将一个添加`END`到您的存储过程......

```
CREAT PROCEDURE [dbo].[upSELECT_shippingNoticeOrderByInvoiceNum]
AS
BEGIN
   SET NOCOUNT ON;

   SELECT * FROM vwShippingNoticeBase
   ORDER BY invoiceNum
END   -- <<<==== you're missing the END for the BEGIN you have! 
```

# vim - VIM垂直调整到特定方向

> ID：12129059
> 
> 赞同：4
> 
> 时间：2012-08-26T09:37:43.153
> 
> 标签：vim

我正在尝试重新映射常规 vim 快捷键 Ctrl-W+< 和 Ctrl-W+> 以将当前活动窗格的大小调整为指定方向（'<' 表示左侧，'>' 表示右侧）但不幸的是我找不到执行此操作的命令，只有一个将窗格大小增加/减少指定数量的命令，这不是我需要的。

这是我目前拥有的：

```
nnoremap <C-w>> :vertical res +5<CR>
nnoremap <C-w>< :vertical res -5<CR> 
```

但是无论我是在右窗格还是左窗格，这都会将当前窗口大小增加 5 列，这不是很直观。

是否有一个命令可以将当前窗口的大小调整为向左或向右（类似于 Tmux 做这些事情的方式）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:12:51.517

您可以根据窗口编号进行设置：

```
au! WinEnter * call SetWinAdjust()

fun! SetWinAdjust()
   if winnr() > 1
      nnoremap <C-w>> <C-w><
      nnoremap <C-w>< <C-w>>
   else
      nnoremap <C-w>> <C-w>>
      nnoremap <C-w>< <C-w><
   endif
endfun 
```

# php - 如何在 php 中为 preg_match_all 编写模式

> ID：12129060
> 
> 赞同：0
> 
> 时间：2012-08-26T09:37:42.227
> 
> 标签：php, preg-match-all

我有以下 html 代码，我想在 textarea 中提取名称和文本。我该怎么做？

```
Dear You've just received.<br><br><b> Name<br><br>Added:</b> 2012-07-14<br><br>Rating - 46%, Yes - 14, No - 16<br><br><TEXTAREA rows=5 cols=60 wrap>Text in textarea</textarea> 
```

请告诉我如何做以及如何为 preg_match 编写模式，这样我就不需要再问这样的问题了..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:05:58.897

得到模式-

```
/<br><br><b>(.*?)<br>(.*?)<TEXTAREA(.*?)>(.*?)<\/textarea>/i 
```

感谢[Truth4oll](https://stackoverflow.com/users/600086/truth4oll)和[Rubular](http://rubular.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T09:45:20.963

您可以使用[simpleHtmlDom](http://simplehtmldom.sourceforge.net/manual.htm)处理 html：

```
include('simple_html_dom.php');
$html = str_get_html("Dear You've just received.<br><br><b> Name<br><br>Added:</b> 2012-07-14<br><br>Rating - 46%, Yes - 14, No - 16<br><br><TEXTAREA rows=5 cols=60 wrap>Text in textarea</textarea>");
echo $textarea = $html->find("textarea", 0)->innertext; //text of textarea
$name= $html->find("b",0)->innertext; //consist: 'Name<br><br>Added:'
preg_match ('/(\w+)/i',$name,$matche); 
echo $name = $matche[0]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T11:05:10.147

查看一些正则表达式模拟器，例如[http://www.lumadis.be/regex/test_regex.php](http://www.lumadis.be/regex/test_regex.php)并构建您的模式，花一些时间学习圣经[http://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html) .

# php - php 常量数组

> ID：12129066
> 
> 赞同：65
> 
> 时间：2012-08-26T09:38:09.040
> 
> 标签：php

这是在 php 中将数组作为常量的唯一方法还是这个糟糕的代码：

```
class MyClass
{
    private static $myArray = array('test1','test2','test3');

    public static function getMyArray()
    {
       return self::$myArray;
    } 
} 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-08-26T10:08:33.763

您的代码很好 - 在 5.6 版之前的 PHP 中不能将数组声明为常量，因此静态方法可能是最好的方法。您应该考虑通过注释将此变量标记为常量：

```
/** @const */
private static $myArray = array(...); 
```

使用 PHP 5.6.0 或更高版本，您可以声明数组常量：

```
const myArray = array(...); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-05-04T13:53:25.213

从 PHP 5.6.0（2014 年 8 月 28 日）开始，可以定义一个数组常量（参见[PHP 5.6.0 新特性](http://php.net/migration56.new-features)）。

```
class MyClass
{
    const MYARRAY = array('test1','test2','test3');

    public static function getMyArray()
    {
        /* use `self` to access class constants from inside the class definition. */
        return self::MYARRAY;
    } 
}

/* use the class name to access class constants from outside the class definition. */
echo MyClass::MYARRAY[0]; // echo 'test1'
echo MyClass::getMyArray()[1]; // echo 'test2'

$my = new MyClass();
echo $my->getMyArray()[2]; // echo 'test3' 
```

在 PHP 7.0.0（2015 年 12 月 3 日）中，可以使用 define() 定义数组常量。在 PHP 5.6 中，它们只能用 const 定义。（见[PHP 7.0.0 新特性](http://php.net/manual/en/migration70.new-features.php)）

```
define('MYARRAY', array('test1','test2','test3')); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-10-24T07:38:24.353

我遇到了这个线程来寻找自己的答案。在认为我必须将我的数组传递给它需要的每个函数之后。我对数组和 mysql 的经验让我想知道序列化是否可以工作。当然可以。

```
define("MYARRAY",     serialize($myarray));

function something() {
    $myarray= unserialize(MYARRAY);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-15T19:15:17.240

我建议使用以下内容：

```
class MyClass
{
    public static function getMyArray()
    {
       return array('test1','test2','test3');
    } 
} 
```

这样你就有了一个 const 数组，并且保证没有人可以更改它，甚至不能更改 Class 本身的方法。

可能的微优化（不确定现在 PHP 编译器优化了多少）：

```
class MyClass
{
    public static function getMyArray()
    {
       static $myArray = array('test1','test2','test3');
       return $myArray;
    } 
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-10T20:00:37.107

将其标记为静态是一个不错的选择。这是一个封装静态数组以获得某种**恒定**行为的示例。

```
class ArrayConstantExample {

    private static $consts = array(
        'CONST_MY_ARRAY' => array(
            1,2,3,4
        )
    );

    public static function constant($name) {
        return self::$consts[$name];
    }

}

var_dump( ArrayConstantExample::constant('CONST_MY_ARRAY') ); 
```

**印刷：**

```
array(4) { [0]=> int(1) [1]=> int(2) [2]=> int(3) [3]=> int(4) } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-07T22:56:33.690

您创建了一个静态数组，**而不是**一个常量数组。静态变量是可变的；常量是不可变的。您的代码还不错，但它并没有按照您的意愿去做。

在 PHP 5.6 中，您可以声明`const`数组。请看[我之前的解释](https://stackoverflow.com/a/30112785/754842)。

也许你想要这样的东西：

```
class MyClass
{
    const MY_ARRAY = array('test1','test2','test3');

    public function getMyArray()
    {
       return MY_ARRAY;
    } 
} 
```

请注意，常量没有`$`前缀，这表明它们的不变性。`$foo`是一个变量；`FOO`不是。此外，常量名称总是大写的，至少在我接触过的编程语言中是这样。这不是由编译器强制执行的；它只是一个（几乎？）通用编码风格约定。可见性关键字`public`、`protected`和`private`不适用于常量。最后，`static`根据您是否希望该功能为`static`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-06T11:01:12.800

从 PHP 5.6 起，可以将常量定义为标量表达式，也可以定义数组常量。

```
class foo {
   const KEYS = [1, 3, 6, 7];
}
//
echo foo::KEYS[0]; // 1 
```

# php - 将csv转换为字符串的最佳方法是什么？

> ID：12129067
> 
> 赞同：0
> 
> 时间：2012-08-26T09:38:35.877
> 
> 标签：php, string, csv

将 csv 转换为字符串的最佳方法是什么？

有 csv file.txt 用 file_get_contents() 读入变量，如 1,2,3,4,5 并且必须变成 12345。我可以将它分解成数组然后组合它，但也许有更有效的方法来做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T09:41:15.017

如果您只需要 1,2,3,4,5 中的 12345，请执行以下操作：

```
$string = str_replace(",","", file_get_contents("file.txt")); 
```

# batch-file - 如何批量搜索子目录

> ID：12129068
> 
> 赞同：-1
> 
> 时间：2012-08-26T09:38:45.623
> 
> 标签：batch-file

我该如何修改它以使其能够搜索子目录？我尝试了一些不同的东西，但我似乎无法破解它？

```
set /p "folder=Folders Name that the photo's are in: "

setlocal
if "%folder%" == "" call :autodetect1
cls
for %%d in (c d e f g h i j k l m n o p q r s t u v w x y z) do (
      if exist "%%d:\%folder%\" ( 
          echo Device was found on %%d: && set folderfound=%%d:\%folder%\
          ) else (
          echo Device was not found on %%d:
      )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T10:57:48.147

您需要使用[`for /r`](http://ss64.com/nt/for_r.html)循环递归地迭代目录：

```
for %%d in (c d e f g h i j k l m n o p q r s t u v w x y z) do (
    pushd %%d:\
    for /r \ %%p in (.) do (
        if exist "%%~p\%folder%\" ( 
            echo Device was found on %%d: && set "folderfound=%%~p\%folder%\"
        ) else (
            echo Device was not found on %%d:
        )
    )
    popd
) 
```

**简短说明：**
该`pushd`命令切换到存储在 . 中的字母的驱动器`%%d`。循环从（当前选择驱动器
的根目录）开始，并迭代运行所有子目录。返回之前被调用的目录。`for /r``\`
`popd``pushd`

这只是您的循环现在应该是什么样子的一个示例。其他一切都保持不变。

顺便说一句，你`:autodetect1`在你的脚本中使用，但它没有在任何地方定义......

# java - java utf-8 文件读取

> ID：12129073
> 
> 赞同：1
> 
> 时间：2012-08-26T09:39:58.113
> 
> 标签：java

我正在尝试按如下方式读取 UTF-8 编码文件-

```
import java.io.*;

class main {
    public static void main(String[] args) throws java.lang.Exception {
        BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream("temp.txt"), "UTF-8"));
        String line;
        line = br.readLine();
        line = line.trim();
        boolean val1 = line.length() != 0;
        boolean val2 = !line.startsWith("//");
        System.out.println(val1 + " " + val2);
        br.close();
    }
} 
```

文件 temp.txt 包含第一行 -

```
//,<verb>,<verb> 
```

所以，输出应该是

```
true false 
```

但我得到的输出为

```
true true 
```

有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T10:03:05.043

您可能在文件的开头有一个[BOM（字节顺序标记） 。](http://en.wikipedia.org/wiki/Byte_order_mark)

UTF-8 的这些 BOM 字节是：0xEF 0xBB 0xBF。它们只是文本编辑器在保存为 UTF-8 时添加的文件中的前 3 个字节。可能您的文本编辑器应该可以选择在没有 BOM 的情况下保存 UTF-8 文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T09:58:10.777

在文本编辑器中打开 temp.txt 并确保 .txt 前面没有任何字符`//`。

# javascript - 内容安全策略：无法在 Chrome 扩展程序中加载 Google API

> ID：12129077
> 
> 赞同：30
> 
> 时间：2012-08-26T09:40:23.300
> 
> 标签：javascript, google-chrome-extension, google-api, content-security-policy

这是相对的 Chrome 扩展。我正在尝试一个简单的使用 Google Chart API

我在我的 html 文档“popup.html”中有此代码，该代码在单击图标时加载。

```
<!doctype html>
<html>
<head>
  <script type="text/javascript" src="js/libs/jquery-1.8.0.min.js"></script>
  <script type="text/javascript" src="js/popup.js"></script>
  <script type="text/javascript" src="http://www.google.com/jsapi?key=xxxxxxxxxxx"></script>

  [...]
</body>
</html> 
```

我收到以下消息：

> 拒绝加载脚本“http://www.google.com/jsapi?key=xxxxxxxxxxx”，因为它违反了以下内容安全策略指令：“script-src 'self' chrome-extension-resource:”。

我知道这是与权限相关的事情，我试图修改我的 Manifest 文件但没有成功：

```
{
  [...]
  "manifest_version": 2,
  "permissions": ["http://*.google.com/"],
  "content_security_policy": "script-src 'self' http://www.google.com; object-src 'self'",
} 
```

任何的想法？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-27T15:14:30.990

在过去的 12 个小时里，我一直在努力解决这个问题，最终让它发挥作用。为什么花了这么长时间？因为我多次被甩出赛道。一、假线索：

1.  “使它成为 HTTPS”——没关系。我的 Chrome 扩展程序现在对不同的域进行常规 HTTP 调用并且工作正常。（更新：再澄清一点。“使其成为 https”的神话植根于人们在脚本加载时往往遇到的类似问题。如果您需要引入外部 .js 文件，那么是的，您需要修改您的 content_security_policy 并包含正确的主机名，它似乎只接受 https。请记住，这与为 REST 服务之类的东西打外部主机名不同。正如我之前所说，这不需要修改 content_security_policy，也不需要修改 https。 )

2.  “在你的 JQuery AJAX 调用中使用 JSONP”——这可能是在普通网页中解决跨域 AJAX 的一种方法，但由于内置的​​内容安全策略，这在 chrome 扩展中不是必需的。此外，实现 JSONP 听起来像 PITA，因为它需要服务器端更改来处理回调参数（或其他东西，我仍然不确定）。无论如何，没有必要。

3.  “与扩展程序中的内容安全策略 (CSP) 字符串混淆” - 在清单版本 2 下，默认字符串可以正常工作：“script-src 'self'; object-src 'self'”。您甚至不必明确指定它。您需要的是包含您尝试从扩展中访问的域作为“权限”值。

解决方案：

从您的扩展程序中删除所有内联 javascript。将其放入单独的 .js 文件中。我怀疑对于大多数带有大量 javascript 的 html 文件来说，这个过程会很糟糕。对我来说幸运的是，我所拥有的只是一个主体 onload，我可以将它作为 window.addlistener onload 事件移动到一个单独的 js 文件中。

您真正需要阅读以解决此问题的页面在这里：[https ://developer.chrome.com/apps/contentSecurityPolicy](https://developer.chrome.com/apps/contentSecurityPolicy)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-26T10:00:34.550

只需让它使用`https`协议即可。您得到的错误是关于[Content Security Policy](https://developer.chrome.com/extensions/contentSecurityPolicy)。

请参阅`Relaxing the default policy`页面的部分。它提到您只能将`HTTPS`、`chrome-extension`和列入白名单`chrome-extension-resource`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-12T05:10:22.377

当我运行 Augury chrome 扩展来调试 Angular 应用程序时，我收到此错误 [报告]。禁用扩展程序，错误就会消失。这不会帮助那些正在编写扩展的人，但它可能会帮助那些不是。

```
[Report Only] Refused to load the script 'https://apis.google.com/js/googleapis.proxy.js?onload=startup' because it violates the following Content Security Policy directive: "script-src 'report-sample' 'nonce-EagvF0PX1Z3gVL2Dka1hbA' 'unsafe-inline' 'strict-dynamic' https: http:". 'strict-dynamic' is present, so host-based whitelisting is disabled. Note that 'script-src-elem' was not explicitly set, so 'script-src' is used as a fallback. 
```

# .net - Sencha touch 2 无法从 .net 服务器读取 json

> ID：12129079
> 
> 赞同：0
> 
> 时间：2012-08-26T09:40:24.857
> 
> 标签：.net, json, sencha-touch-2

我有一个从 .Net 服务器读取 json 字符串的商店。问题是 sencha 应用程序认为它们没有结果（“emptyText”）。这家商店在处理虚拟数据（数据：[]）时效果很好，但是当我尝试读取代理时，我遇到了问题

店铺代码：

```
Ext.define('myApp.store.myStore', {
    extend: 'Ext.data.Store',
    alias: 'widget.myStore',
    autoLoad: true,  
    config: {
        model: 'myApp.model.myModel',
        proxy: {
            type: 'scripttag', //Also tried ajax and jsonp
            url: 'http://localhost:XXXX/ServerResponse/ReponseT.aspx?CityID=1',
            reader: {
                type: 'json'
            }
        }
    } 
```

服务器代码（C#）：

```
 List<result> Li = new List<result>();
                    result LR = new result()
                    {
                        id = 1,
                        Title = "Heu There"                                                     
                    };
                    Li.Add(LR);
 string ans = JsonConvert.SerializeObject(Li, Formatting.Indented);    
 Response.Write(ans); 
```

我有一个警告：

> 资源解释为脚本，但使用 MIME 类型 text/html 传输：“URL”

就是这样......我希望有人能够说我做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:05:53.333

您需要指定标题类型。下面的代码适用于我从 .Net 服务器获取 JSON 数据。

```
 Ext.Ajax.request({
            url: reqUrl,
            defaultHeaders : 'application/json',
            headers: {
               "Accept": "application/json"
            },
            useDefaultXhrHeader: false,

            success : function(response, opt) {
                benefitsRespObj = Ext.decode(response.responseText);
                // your code goes here
            }
 }); 
```

# javascript - 用javascript修剪多余的空间

> ID：12129080
> 
> 赞同：0
> 
> 时间：2012-08-26T09:40:29.010
> 
> 标签：javascript, jquery, jquery-ui, combobox, jquery-ui-autocomplete

我正在使用 PHP tidy，它会自动缩进标记，添加制表符和空格。请看看这个。

[http://jsfiddle.net/njh85/](http://jsfiddle.net/njh85/)

我有两个问题：

*   如何从选定的选项中删除这些额外的空格（原因是 PHP 整洁库：为缩进标记添加额外的空间。但我无法将其关闭，所以我正在搜索一些 JS 解决方案来修剪文本）

![在此处输入图像描述](../Images/1920126828fb3149eaf678b37e3b5090.png)

*   如何使“选择一个”充当 HTML5 占位符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T09:45:01.397

如何使用[$.trim](http://api.jquery.com/jQuery.trim/)：

[小提琴](http://jsfiddle.net/njh85/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T10:17:42.597

您收到空格是因为您的选项文本在 HTML 中的单独一行上，带有缩进。您可以先删除它们：

```
$("#users option").text(function(i, text) {
    return $.trim(text);
}); 
```

至于占位符，请使用`.attr("placeholder", ...)`代替`.val(...)`：

```
input = $( "<input>" )
    .appendTo( wrapper )
    .attr( "placeholder", value ) 
```

[http://jsfiddle.net/njh85/6/](http://jsfiddle.net/njh85/6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T06:06:02.760

从 JavaScript 1.8.1 (ES5) 开始，您可以使用普通[的 string.trim()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim)

```
var orig = "   foo  ";
alert( orig.trim() );

// "foo" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T09:44:48.480

看看@http [://api.jquery.com/jQuery.trim/](http://api.jquery.com/jQuery.trim/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-26T09:53:36.330

修剪字符串的左右空格

```
string.replace(/^\s\s*/, '').replace(/\s\s*$/, ''); 
```

关于占位符，你可以试试[jQuery-Placeholder](https://github.com/danielstocks/jQuery-Placeholder)

# java - 检测到碰撞，但有错误 - 可以进入并且不受影响的平台移动

> ID：12129083
> 
> 赞同：0
> 
> 时间：2012-08-26T09:40:51.837
> 
> 标签：java, collision-detection

请看这个GIF：![在此处输入图像描述](../Images/3789b0fb8116bb39f1b1a82280e5f6f4.png)

正确检测到碰撞，但这些故障让我很恼火......矩形能够进入另一个矩形。当矩形在 x 轴上碰撞时（并且左右箭头仍然被按下），一个不受影响的人正在移动。有什么想法可以摆脱它们吗？keyPressed、keyReleased、move() 和 checkCollision() 方法：

```
@Override
        public void keyPressed(KeyEvent k) {
                int key = k.getKeyCode();
                switch (key) {
                case KeyEvent.VK_LEFT:
                        left = true;
                        game.physic.xVel = 2;
                        break;
                case KeyEvent.VK_RIGHT:
                        right = true;
                        game.physic.xVel = 2;
                        break;
                case KeyEvent.VK_SPACE:
//jump
                        break;

                default:
                        break;
                }

        }
        /*
         * game.lvl1.getX()[i] to ablica z współrzędnymi platform
         */
        public void move() {
                if (left) {
                        switch (game.currentLevel()) {
                        case 1:
                                for (int i = 0; i < game.lvl1.getX().length; i++)
                                        game.lvl1.getX()[i] += game.physic.xVel;
                                break;

                        }
                } else if (right) {
                        switch (game.currentLevel()) {
                        case 1:
                                for (int i = 0; i < game.lvl1.getX().length; i++)
                                        game.lvl1.getX()[i] -= game.physic.xVel;
                                break;
                        }
                }
        }

        public void checkCollision() {
                switch (game.currentLevel()) {
                case 1:
                        for (int i = 0; i < game.lvl1.getX().length; i++) {
                                if (game.man.getBounds().intersects(game.lvl1.getBounds(i))) {
                                        if (game.man.getBounds().getY() < game.lvl1.getBounds(i)
                                                        .getY() && !game.man.isOnGround) {
                                                /*
                                                 * collision above platform
                                                 */
                                                game.man.setyPos(-2);
                                                game.man.isOnGround = true;
                                                break;
                                        } else if (game.man.getBounds().getY() > game.lvl1
                                                        .getBounds(i).getY() && isJumping) {
                                                /*
                                                 * collision below 
                                                 */
                                                game.man.setyPos(2);
                                                game.man.isOnGround = false;
                                                break;
                                        } else if (game.man.getBounds().getX() < game.lvl1
                                                        .getBounds(i).getX() && right) {
                                                /*
                                                 * collision from left
                                                 */
                                                game.lvl1.getX()[i] += 2;
                                                right = false;
                                                break;
                                        } else if (game.man.getBounds().getX() > game.lvl1
                                                        .getBounds(i).getX() && left) {
                                                /*
                                                 * collision from right
                                                 */
                                                game.lvl1.getX()[i] -= 2;
                                                left = false;
                                                break;
                                        }

                                } else {
                                        game.physic.xVel = 2;
                                        game.man.isOnGround = false;
                                }
                        }
                }
        }

        @Override
        public void keyReleased(KeyEvent k) {
                int key = k.getKeyCode();
                switch (key) {
                case KeyEvent.VK_LEFT:
                        left = false;
                        game.physic.xVel = 0;
                        break;
                case KeyEvent.VK_RIGHT:
                        right = false;
                        game.physic.xVel = 0;
                        break;
                case KeyEvent.VK_SPACE:
                        break;
                default:
                        break;
                }
        } 
```

从paintComponent 调用paintLevel()。并且paintComponent 是从gameloop 调用的。

```
private void paintLevel(Graphics2D g2d) {
    switch (currentLevel()) {
    case 1:
        for (int i = 0; i < lvl1.getX().length; i++) {
            g2d.draw(lvl1.getBounds(i));
        }
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T10:28:24.230

我要说这是一个非常糟糕的方法。每个级别都应该有一个形状列表，每当你的人移动时，你应该检查碰撞。发生碰撞时不要移动，否则进行位置调整。

这是您当前代码的基本编辑，可能会使调试更容易： http: [//pastebin.com/Sz8gv863](http://pastebin.com/Sz8gv863)

如果你愿意，我可以编写我之前的意思，但你应该可以自己做。考虑一下当你有 10 个级别时你的代码会发生什么。

# html - 如何在目标 div 中打开链接

> ID：12129086
> 
> 赞同：3
> 
> 时间：2012-08-26T09:41:13.220
> 
> 标签：html

我想在页面的“right_side” div 中显示 home.html 页面的内容。我怎样才能做到这一点？

链接.html-----------

```
<html>
<head>
<title>Link Example</title>
</head>
<body>
<div id="left_side">
<a href="home.html" >Home</a>
<a href="products.html" >Home</a>
</div>
<div id="right_side">
</div>                                    
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T09:51:40.357

你可以简单地使用 iframe 而不是 div。就放

```
<iframe name="right_side" src="" width="100%"  
        height="100%" frameBorder="0"></iframe> 
```

代替您的右侧 div。

并替换`<a href="somelink">`为`<a href="somelink" target="right_side">`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T09:46:10.257

假设您想要一个动态解决方案：您可以使用 jQuery 之类的东西来检索 home.html 文件的 HTML/DOM，然后将 home.html 中的相关 DOM 子树插入 #right_side div。

否则（非动态）：只需复制并粘贴内容。但这太微不足道了，我想。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T09:57:26.700

改用 Ajax。写这样的东西

```
 <a href="javascript: loadXMLDoc();" >Home</a 
```

并在您的`head`实施中。我添加了一个 javascript google jquery 位置。你的css中必须有那个“right_side”div。文件的位置`home.html`必须准确。检查它是否有效。

### 加载XMLDoc()

```
<html>
<head><script type="text/javascript" src="[http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js]"></script>
<title>Link Example</title>
<script type="text/javascript">
    function loadXMLDoc() {
        var xmlhttp;
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange=function() {
            if (xmlhttp.readyState==4 && xmlhttp.status==200) {
                document.getElementById("right_side").innerHTML=xmlhttp.responseText;
        }
    }
    xmlhttp.open("POST","home.html",true);
    xmlhttp.send();
}
</script></head>
<body>
    <div id="left_side">
        <a href="javascript:loadXMLDoc()" >Home</a>
        <a href="products.html" >Home</a>
    </div>
    <div id="right_side">
    </div>                                    
</body>
</html> 
```

# java - CXF和授权

> ID：12129093
> 
> 赞同：1
> 
> 时间：2012-08-26T09:42:40.530
> 
> 标签：java, authorization, cxf, ws-security

我正在使用 Apache CXF，并且正在寻找有关如何实现 Web 服务授权的资源。我找到了如何实现身份验证（使用 WSS4J），以便我可以使用 X.509 证书进行双重身份验证。

我想介绍一种角色机制，以便我可以为每个客户端指定与其关联的角色，以及为每个角色指定允许调用哪些 Web 方法。

CXF可以吗？我在网上查看过，但我找不到关于这个主题的任何材料。

谢谢

# sqlite - 在 sqlite 中使用 where

> ID：12129100
> 
> 赞同：0
> 
> 时间：2012-08-26T09:43:37.447
> 
> 标签：sqlite, lua, coronasdk

我需要知道为什么当我使用该语句时：

```
local forRaws = "SELECT * FROM "..tokenTable[3].."WHERE subcategory = " .. "'" .. tokenTable[4] .. "'" 
```

tokeTable[3] 和 tokenTable[4] 有 2 个不同的字符串非 nil 值。我在 = 附近收到一个语法错误

我究竟做错了什么？

比你花时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T09:46:57.523

之前不应该有空格`WHERE`：

```
"SELECT * FROM "..tokenTable[3].." WHERE subcategory = '" .. tokenTable[4] .. "'" 
```

?

# javascript - Javascript：使用动态 id 获取文本框值

> ID：12129101
> 
> 赞同：1
> 
> 时间：2012-08-26T09:43:52.703
> 
> 标签：javascript

我在这里阅读了大部分问题，但我找不到这个问题的答案，所以我会试一试！

What I'm trying to accomplsih is that when a certain radio is choosen, I want to fetch a certain textbox value. 这就是为什么我需要动态 ID 来知道我想从哪个文本框中选择值。

正如您在下面看到的，我将我的单选按钮分组为三个一组。

**问题是我似乎无法从文本框中获取值......！无论我尝试什么，它总是返回 0（零）**

这是我的html！

```
 <asp:RadioButton id="RadioButton1" name="directory" GroupName="sverigemot" value="50" runat="server" Text="Fri tillgång" onclick="calculatePrice()"  />
    <asp:RadioButton id="RadioButton2" name="directory" GroupName="sverigemot" runat="server" 
        Text="En artikel om dagen(30/mån)" value="25" onclick="calculatePrice()" />
    <asp:RadioButton id="sverigemot1" name="choice" GroupName="sverigemot" runat="server" value="0"
        Text="Skriv antalet artiklar" onclick="calculatePrice()" />
    <asp:TextBox ID="textbox1" name="sverigemot1" runat="server" Width="106px"></asp:TextBox>
        <br />
        <asp:RadioButton id="RadioButton4" name="directory" GroupName="handlaihop" value="50" runat="server" Text="Fri tillgång" onclick="calculatePrice()"  />
    <asp:RadioButton id="RadioButton5" name="directory" GroupName="handlaihop" runat="server" 
        Text="En artikel om dagen(30/mån)" value="25" onclick="calculatePrice()" />
    <asp:RadioButton id="handlaihop2" name="choice" GroupName="handlaihop" runat="server" value="0"
        Text="Skriv antalet artiklar" onclick="calculatePrice()" />
    <asp:TextBox ID="textbox2" name="handlaihop1" runat="server" Width="106px"></asp:TextBox> 
```

这是我的javascript！

```
var selectedDirectory = document.getElementsByTagName('input');
var valueOfRadio = 0;
var y = 0;

for (var i = 0; i < selectedDirectory.length; i++) 
{
    //if the radio button is checked
    if (selectedDirectory[i].checked && selectedDirectory[i].type == 'radio')
    {

        if (selectedDirectory[i].value == '0') {
            //Puts together the dynamic name
            var dynamictbname = selectedDirectory[i].name + "1";
            //Checks the name 
            alert(dynamictbname);
            //Stores the actual textbox
            var dynamictb = document.getElementById(dynamictbname);
            alert('Value in textbox is: ' + parseInt(dynamictb.value));

            if (parseInt(dynamictb.value) == null) {
                alert('Textboxen är null');
            }
            else {
                var tbvalue = parseInt(dynamictb.value);
                valueOfRadio += parseInt(document.getElementsByName(dynamictbname));
                alert('Name and Value in textbox is: ' + dynamictbname + ' = ' + tbvalue);
                valueOfRadio += parseInt(selectedDirectory[i].value);
                y++;
            }
        }
        else {

            valueOfRadio += parseInt(selectedDirectory[i].value);
             alert(valueOfRadio);

        }

    }
} 

var divobj = document.getElementById('thePrice');
divobj.innerHTML = "value" + valueOfRadio; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T09:47:52.837

```
onchange="setValue(this);"

function setValue(node){
    var txtBoxValue = document.getElementById(node.value).value;
    alert(txtBoxValue );
}​ 
```

* * *

```
$('input[name="directory"]').change(function(){
 var selector = '#' + $(this).val();
 var txtBoxValue = $(selector).val();
}) 
```

[jQuery 演示](http://jsfiddle.net/mrobin/NQmPb/)

[JavaScript 演示](http://jsfiddle.net/mrobin/NQmPb/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T10:10:21.480

伙计们我搞砸了对不起！

我忘了更改我的 html 中的 ID。

'我正在使用 getElementsByID，并且我正在搜索 groupname + 1 作为 ID。身份证是

textbox1, textbox2 .... textbox99... 难怪找不到...

我把名字和身份证混淆了……我知道愚蠢！

我摆脱了他们的名字的texboxes，而是使用ID来代替......这是正确的html。

```
<asp:RadioButton id="RadioButton1" name="directory" GroupName="sverigemot" value="50" runat="server" Text="Fri tillgång" onclick="calculatePrice()"  />
    <asp:RadioButton id="RadioButton2" name="directory" GroupName="sverigemot" runat="server" 
        Text="En artikel om dagen(30/mån)" value="25" onclick="calculatePrice()" />
    <asp:RadioButton id="RadioButton3" name="choice" GroupName="sverigemot" runat="server" value="0"
        Text="Skriv antalet artiklar" onclick="calculatePrice()" />
    <asp:TextBox ID="sverigemot1" runat="server" Width="106px"></asp:TextBox>
        <br />
        <asp:RadioButton id="RadioButton4" name="directory" GroupName="handlaihop" value="50" runat="server" Text="Fri tillgång" onclick="calculatePrice()"  />
    <asp:RadioButton id="RadioButton5" name="directory" GroupName="handlaihop" runat="server" 
        Text="En artikel om dagen(30/mån)" value="25" onclick="calculatePrice()" />
    <asp:RadioButton id="RadioButton6" name="choice" GroupName="handlaihop" runat="server" value="0"
        Text="Skriv antalet artiklar" onclick="calculatePrice()" />
    <asp:TextBox ID="handlaihop1" runat="server" Width="106px"></asp:TextBox> 
```

# cakephp - 复选框上的 CakePHP 自定义表单验证

> ID：12129103
> 
> 赞同：0
> 
> 时间：2012-08-26T09:44:54.067
> 
> 标签：cakephp, cakephp-2.0

我在 CakePHP 中的表单有一个奇怪的问题。我有一系列以复选框开头的问题。如果选中该复选框，我希望另外两个输入字段是必需的。否则，如果未选中，它们是可选的。我编写了一个自定义函数来验证输入字段。这是其中之一：

```
public function rn_number () {
 if ($this->data['Education']['rn_box'] == 1) {
    if($this->data['Education']['rn_number'] == '')
        return false
}

return true;
}

public $validate = array(
     'rn_number' => array(
            'rn_number'=>array(
                'rule' => 'rn_number'
                ),
            ),
); 
```

验证工作正常。对于上述规则，它检查 id 为 'cna_box' 的复选框的值是否为 1，或者被选中，然后检查 id 为 'cna_number' 的输入是否为空。如果是，则返回 false。如果选中该复选框，则始终要求提交数据。我的问题是，当“cna_number”等必需的输入字段为空白时，它有时才表明存在错误。在第一次提交时，它将始终指示这些字段是必需的。但是，如果您再次提交表单，它不会表明这些字段是必填的，也不会显示错误消息——这会让用户感到困惑。

我注意到复选框有一个隐藏的输入。提交复选框并返回有错误的页面后，隐藏输入的值为 0，复选框的值为 1。您认为这与问题有关吗？

更新：

这是我认为生成相关表单字段的代码：

```
echo $this->Form->inputs(array(
    'legend'=>'Certifications',
    'rn_box'=>array(
        'type'=>'checkbox',
        'label'=>'RN',
        ),
    'rn_number'=>array(
        'label'=>'RN Number:',
        'value' => $results['Education']['rn_number']
        ),
    'rn_exp_date' => array(
        'label' => 'Expiration Date:',
        'dateFormat' => 'MDY',
        'monthNames' => FALSE,
        'minYear' => date('Y'),
        'maxYear' => date('Y') + 20,
        'empty' => TRUE,
        'after' => '<span class="small">(MM/DD/YYYY)</span>',
        'class' => 'input-mini',
        'selected'=>strtotime($results['Education']['rn_exp_date'])
        ),
)); 
```

和控制器代码：

```
public function pagethree() { 

        /** 
         ** If user has completed this form, 
         ** grab data for editing 
         **/
        $this->set('results', $this->Education->find('first', array( 
            'conditions' => array('Education.user_id' => $this->Auth->user('id')) 
        ))); 

        if ($this->request->is('post')){   
            $this->request->data['User']['id'] = $this->Auth->user('id'); 

            /** 
             ** Find if there is any data 
             ** in this user in the Basics 
             ** table. 
             **/
            $existingRecordId = $this->Education->find('first', array( 
                'conditions' => array('Education.user_id' => $this->Auth->user('id')), 
                'fields' => array('Education.id') 
            )); 

            /** 
             ** If data exists, return row 
             ** id (PK). Set this value to 
             ** id key, so saveAll() updates 
             ** existing row. 
             **/

            if(sizeof($existingRecordId)>0) 
                $this->request->data['Education']['id'] = $existingRecordId['Education']['id']; 

            if ($this->User->saveAll($this->request->data)) { 
                $this->redirect(array('action'=>'pagefour')); 
            } else { 
                $this->Session->setFlash('Your data have not been saved'); 
            } 
        } 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T10:41:31.843

好吧，你有它。使用`value`and`selected`从来都不是一个好主意。特别是如果您想在提交后保留表单并且它无效。

您应该使用`default`或从控制器执行：http: [//www.dereuromark.de/2010/06/23/working-with-forms/](http://www.dereuromark.de/2010/06/23/working-with-forms/) 章节“默认值”

# android - 为 URI 结果激活 MyFiles 应用程序

> ID：12129109
> 
> 赞同：0
> 
> 时间：2012-08-26T09:45:30.217
> 
> 标签：android

必须有一种方法可以做到这一点，例如在android中内置的时钟闹钟应用程序中，当您按下更改警报按钮时，它会打开2种可能性，一种使用RingtoneManager，另一种您可以选择查找铃声使用我的文件来获取警报铃声，我想在我的应用程序中做同样的事情......它是如何完成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T10:05:19.350

把它放在你的清单中。

```
<intent-filter>
            <action android:name="android.intent.action.RINGTONE_PICKER" />
        </intent-filter> 
```

这是未经测试的，但我相信它应该工作。你只需要告诉你的应用去监听那个动作。

[http://developer.android.com/reference/android/media/RingtoneManager.html#ACTION_RINGTONE_PICKER](http://developer.android.com/reference/android/media/RingtoneManager.html#ACTION_RINGTONE_PICKER)

# emacs - Emacs Gnus 并排开两组

> ID：12129115
> 
> 赞同：0
> 
> 时间：2012-08-26T09:46:41.777
> 
> 标签：emacs, gnus

我正在尝试执行以下操作。假设我的邮箱有这些组：“收件箱”和“已发送邮件”。我想在 Gnus 中打开两个缓冲区，其中包含第一组和第二组的内容。

打开第一个组，然后创建一个单独的缓冲区（`C-x 3`例如通过），返回组列表，选择另一个组并在新缓冲区中重复打开过程的直观方法不起作用。相反，它会删除所有其他缓冲区（包括具有先前打开的组的缓冲区），从而占据整个窗口并显示最近打开的组的内容。当我切换到先前打开的组的洞穴缓冲区时，它似乎是空的：/

这不仅不舒服，而且**非常**不舒服，因为大多数消息都是以发送和响应的形式出现的。不能像这样阅读它们真的很糟糕......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-27T14:07:15.810

如果您的 init 文件加载速度不是太慢，那么打开另一个 Emacs 进行单独的 Gnus 浏览是合理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T11:16:35.273

这也让我很恼火，通常是当我想在回复另一封邮件时找到一封电子邮件来参考。

我的解决方案是制作两个框架（`M-x new-frame`）。转到`*Group*`两者中的缓冲区，然后当您四处走动时，您的窗口配置就不会被弄乱。

由于您提到您在另一个问题中使用 Gmail，因此在线程中阅读邮件的另一种解决方案是在“所有邮件”组中找到该线程的一条消息。然后使用“A T”来获取该线程中的所有消息，并且您可以阅读类似于 GMail 的“对话模式”（或他们所说的任何内容）的内容。然后“/ T”限制了线程，但我从来没有最终使用它。

# java - 接口中的泛型？

> ID：12129119
> 
> 赞同：1
> 
> 时间：2012-08-26T09:47:03.570
> 
> 标签：java, generics, interface

我正在尝试使用泛型实现堆栈。

这是我拥有的组件，

1）接口：

```
public interface stackInterface<T>{...} 
```

2）实施：

```
public class Stack<T> implements stackInterface<T>{...} 
```

3）客户：

```
stackInterface<Integer> s=new Stack<Integer>(); 
```

我只想知道我在做什么是正确的方法还是我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T09:48:49.897

它看起来不错。当然，除了完全错误的命名约定。

Java 中的类型名称使用 CamelCase。与类相比，接口也没有特别命名。Java 中的常用方法是命名接口`Stack<T>`和类`ImplementationDetailStack<T>`，参见。`List<T>`和`ArrayList<T>`或`LinkedList<T>`。

（我个人更喜欢 .NET 约定以 开头的接口名称`I`，例如`IStack`，对于接口和`Stack`默认实现。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T09:50:25.683

到目前为止，一切都很好，除了用 CamelCase 命名所有类型并且不要在接口中使用“接口”这个词。应该调用接口`Stack`和描述基本实现原理的实现，`...Stack`如.`...``ArrayList`

通常我们倾向于为接口保留最好和最短的名称，因为它们出现在方法签名和变量类型中的任何地方，而具体的实现类型只出现在实例化表达式中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T09:50:16.350

stackInterface有命名java转换的问题。它应该是 StackInterface 。

[Java 命名转换](http://en.wikipedia.org/wiki/Naming_convention_%28programming%29#Java) 是一种很好的编码习惯。

接口：名称应采用 CamelCase。

参考：http://java.about.com/od/javasyntax/a/nameconventions.htm [http://www.javapractices.com/topic/TopicAction.do?Id=58](http://www.javapractices.com/topic/TopicAction.do?Id=58)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-26T09:51:41.373

一个好主意可能是查看`java.util.List`接口的源代码及其实现类，例如`java.util.ArrayList`使用泛型。您可以从那里学习并应用于您的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-26T10:07:41.450

一切都很好，除了命名约定。正如 Dan 所建议的那样，采取 List 和 ArrayList。最好在接口中仅使用接口名称，并将接口名称附加到默认实现的 Impl 中。

```
public interface Stack <T> {

}

public class StackImpl<T> implements Stack {

}

Stack<String> defaultStack=new StackImpl<String>(); 
```

对于其他实现，最好使用 List-ArrayList 样式约定。

# regex - SCSS/ERB URL 的 Sublime Text 2 正则表达式

> ID：12129120
> 
> 赞同：0
> 
> 时间：2012-08-26T09:47:04.583
> 
> 标签：regex, erb, sass, sublimetext2

整个晚上，我一直在尝试围绕 Sublime Text 正则表达式进行思考，但一无所获。使用示例字符串：

```
url(/assets/content.png); 
```

我怎样才能更换末端来生产这个？

```
url('<%= asset_path('content.png') %>'); 
```

虽然我能够构造与此模式匹配的表达式，即

```
\/assets\/\w*.\w{3}\); 
```

我不知道如何更换合适的零件。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T13:18:53.980

事实证明，我需要改变我的想法。与其保留内容和更改标签，我不得不获取整个找到的字符串，抓取包含内容的捕获组，然后替换整行。这非常适合将我的 .scss 文件转换为 .scss.erb 文件。

对于其他有同样问题的人：

![SCSS --> Sublime Text 2 的 SCSS/ERB 正则表达式](../Images/d4c038f755ae6bab5975a8e4fc9ca609.png)

# javascript - 如何将数据从弹出窗口传递到父窗口？

> ID：12129121
> 
> 赞同：21
> 
> 时间：2012-08-26T09:47:06.220
> 
> 标签：javascript, jquery, popup

如何从弹出窗口传递一些数据或调用父窗口上的函数？

用户将单击一个链接，该链接将在同一网站上打开一个弹出窗口，一旦他完成弹出窗口，我希望它将新数据发送回父窗口，或调用父窗口上的函数。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-26T09:52:17.763

[window.opener](http://www.w3schools.com/jsref/prop_win_opener.asp)对象就是您要查找的对象，可以在弹出窗口中使用它来调用父窗口的函数：

```
window.opener.yourFunc() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-18T07:10:18.393

**这是一个有趣且简单的演示**，它深受[这个对类似问题的回答的](https://stackoverflow.com/a/32617334/470749)启发（但出于我自己的目的进行了修改，以帮助调查[我职业生涯中最困难的错误](https://stackoverflow.com/questions/38979848/stripe-checkout-on-wordpress-works-on-desktop-browsers-but-on-mobile-browsers-fa)）。

创建2个文件（在同一目录中）如下：

**父.html**

```
<button type="button" onclick="popup('popup.html', '', 800, 200);">Add My Card</button>
=&gt;
<span id="retrievedData">No data yet.</span>    
<script>
    function popup(url, title, width, height) {
        var left = (screen.width / 2) - (width / 2);
        var top = (screen.height / 2) - (height / 2);
        var options = '';    
        options += ',width=' + width;
        options += ',height=' + height;
        options += ',top=' + top;
        options += ',left=' + left;    
        return window.open(url, title, options);
    }

    function setData(data) {
        console.log(data);
        var strData = JSON.stringify(data);
        document.getElementById('retrievedData').innerHTML = strData;
        var requestBinUrl = 'http://requestb.in/18u87g81';
        window.location.href = requestBinUrl + '?data=' + strData;
    }
</script> 
```

**popup.html**

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<form id="popupForm" name="f">    
    <select id="urlField" name="url">
        <option>
            http://date.jsontest.com/
        </option>
        <option>
            http://time.jsontest.com/
        </option>
        <option>
            http://md5.jsontest.com/?text=HereIsSomeStuff
        </option>    
    </select>
    <div><input type="submit" /></div>    
</form>
<script>
    $('#popupForm').submit(function(e) {
        e.preventDefault();
        var url = $('#urlField').val();
        console.log(url);
        $.ajax({
            url: url
        }).then(function(data) {
            console.log(JSON.stringify(data));
            window.opener.setData(data);
            window.close();
        });
    });    
</script> 
```

# forms - Symfony2 从不同的 field_row 获取树枝模板中的实体 ID

> ID：12129122
> 
> 赞同：1
> 
> 时间：2012-08-26T09:47:09.493
> 
> 标签：forms, templates, variables, symfony, twig

以下是用于创建表单的代码：

```
$form = $this->createFormBuilder($city)
            ->add('name', 'text')
            ->add('images', 'collection', array('type' => new ImageType())
            ->getForm(); 
```

城市`images`财产，是`Image`实体的集合。

这里的定义`ImageType`

```
class ImageType extends AbstractType {
    public function buildForm(FormBuilderInterface $builder, array $options) {
        $builder->add('path', new ImageFieldType());
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver) {
        $resolver->setDefaults(array('data_class' => 'My\Bundle\Entity\Image',));
    }

   public function getName() {
        return 'image';
    }
} 
```

这是我的自定义字段类型的代码`ImageFieldType`：

```
class ImageFieldType extends AbstractType {
    public function getDefaultOptions(array $options) {
        return array('path' => null);
    }

    public function getParent() {
        return 'field';
    }

    public function getName() {
        return 'imageField';
    }
} 
```

为了呈现`ImageFieldType`我使用以下块：

```
{% block imageField_widget %}
    {% if form.vars.value is not null %}
        <a href="{{ path('_cityManage') }}/CityID/ImageID">
        <img class="image_type" src="{{ asset('uploads/documents/' ~ form.vars.value) }}" />
        </a>
    {% endif %}
{% endblock %} 
```

我怎样才能得到这个树枝块中的`city.id`和电流？`image.id`我试过了`{{ id }}`，但这个打印类似于`form_image_0_path`.

我的目标是链接到页面`path('_cityManage')/city.id/image.id`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:23:15.953

在这种情况下我会做什么（我不确定这是否是最好的方法，但它有效）：

在您的情况下，在控制器中，我将在调用渲染函数时传递您需要的变量：

```
return $this->render('view', array(
    'form' => $form->createView(),
    'city' => $currentCity,
    'image' => $currentImage
); 
```

您现在可以在模板中使用这些变量：

```
{{ city.id }}
{{ image.id }} 
```

同样，我不确定这是否真的是最好的方法，但它目前对我有用，我不知道有任何其他方法......

# c++ - C++11 lambda 捕获列表 [=] 使用引用

> ID：12129123
> 
> 赞同：5
> 
> 时间：2012-08-26T09:47:13.570
> 
> 标签：c++, lambda, c++11, capture

当我捕获一个值但值类型是模板函数中的引用时

```
template<class T>
void test(T&&i)
{
    ++i;
    std::cout << i << std::endl;
}

template<class T>
void typetest(T&& t)
{
    ++t;
    T t1(t);
    [=]() mutable { std::cout << t1 << std::endl; return test(t1); }();
    std::cout << t << std::endl;
}

int main()
{
    int i=1;
    typetest(i);
} 
```

它打印

```
2
3
2 
```

但是在lambda 调用时应该`T t1(t);` `T`是`int&`这样。为什么没有输出`t1``int&``test(t1)`

```
2
3
3 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T10:05:06.853

> T 是 int& 所以 t1 应该是 int&

引用不是指针。`T`可以推导出为`int&`，因此`t1`是一个参考。`t1`但是您要求 lambda按*值*捕获。这意味着*复制*.`t1`

如果`t1`是指针，您将按值获取指针。但是您无法“按价值”获得参考；你只能得到被引用的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T10:00:18.310

通过按值捕获，`[=]`您的 lambda 获得了`t1`它传递给的本地副本`test()`，因此 lambda 中发生的任何事情`t1`都不会影响原始`t`对象。

# php - 对每个数组元素执行计算

> ID：12129128
> 
> 赞同：0
> 
> 时间：2012-08-26T09:48:05.883
> 
> 标签：php

我有这个数组被称为`$addon_array`，当我使用 var_dump 时会像这样显示

```
array(10) { 
    ["ext_token"]=> string(5) "floor"  
    ["ext_token_child"]=> string(6) "carpet"  
    ["concrete"]=> string(1) "4"  
    ["cement"]=> string(1) "3"  
    ["sand"]=> string(1) "2"  
    ["wood_4_2"]=> string(1) "4"  
    ["wood_8_2"]=> string(1) "2"  
    [0]=> string(0) ""  
    ["brick"]=> string(3) "100"  
    ["carpet"]=> string(1) "3"
} 
```

我大部分时间都在尝试做的是尝试找出一种方法来循环遍历数组的所有不同元素（除了`ext_token`and `ext_token_child`）并通过另一个名为的变量将每个数字相乘`$qty`（可以是任何东西，没关系）。

`columnNames`然后我希望它们与它们相应的（`cement`或等...）一起再次放入一个新数组中，`sand`我认为这只是在每个元素上执行 foreach 循环的简单情况，但我似乎无法放入他们回到一个新的阵列。

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T09:52:24.300

这应该工作（使用[`array_walk`](http://php.net/array_walk)）：

```
$new_array = array_walk($addon_array, function($v, $k) use ($qty) {
  if(in_array($k, array('ext_token', 'ext_token_child'))) return $v;
  return $v*$qty;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T09:52:32.347

```
$new_array = array();
foreach($addon_array as $key => $col) {
  if($key == 'ext_token' || $key == 'ext_token_child') {
    $new_array[$key] = $col;
  } else {
    $new_array[$key] = $col * $qty;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T09:55:45.850

```
$qty = 10;
$newArray = array();
foreach($addon_array as $key => $val){
    if($key != 'ext_token' && $key != 'ext_token_child'){
        $newArray[$key]    = $qty*(int)$val;
    }
}

$newArray['ext_token'] = $addon_array['ext_token'];
$newArray['ext_token_child'] = $addon_array['ext_token_child'];

var_dump($newArray); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T09:56:15.330

在 PHP 中循环遍历数组非常简单，使用 foreach。

```
$new = array();
foreach($addon_array as $key=>$value){

     if($key != "ext_token" OR $key != "ext_token_child"){
          $value = $value*$qty;
     }
     $new[$key] = $value;
} 
```

# javascript - 使用 jquery 获取当前月份和日期

> ID：12129130
> 
> 赞同：13
> 
> 时间：2012-08-26T09:48:25.720
> 
> 标签：javascript, jquery, razor

我有两个包含几个月和几年的下拉列表......

```
$(document).ready(function () {               
     $('#Months option:eq(' + (new Date).getMonth() + ')').prop('selected', true);
      alert((new Date).getMonth());        
     $('#Years option:eq(' + (new Date).getFullYear() + ')').prop('selected', true);
      alert((new Date).getFullYear());
}); 
```

我如上所述编写了 JQuery 脚本，这样当我的程序运行下拉列表时，选择的值必须是当前月份和年份。

但是当我执行程序时..警报给出了 7 和 2012.. 但在我看来当前月份被选中但当前年份不是为什么？以及如何使我的下拉列表选择当前年份？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-26T09:59:17.877

**jQuery**

```
var d = new Date(),

    n = d.getMonth(),

    y = d.getFullYear();

$('#months option:eq('+n+')').prop('selected', true);

$('#years option[value="'+y+'"]').prop('selected', true); 
```

**HTML**

```
​&lt;select id="months">
    <option value="1">January</option>
    <option value="2">February</option>
    <option value="3">March</option>
    <option value="4">April</option>
    <option value="5">May</option>
    <option value="6">June</option>
    <option value="7">July</option>
    <option value="8">August</option>
    <option value="9">September</option>
    <option value="10">October</option>
    <option value="11">November</option>
    <option value="12">December</option>
</select>
<select id="years">
    <option value="2011">2011</option>
    <option value="2012">2012</option>
    <option value="2013">2013</option>
</select> 
```

**[演示](http://jsfiddle.net/z9RZp/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T09:57:55.373

~~月份以整数形式返回，从 0（一月）到 11（十二月）：参见[http://www.java2s.com/Tutorial/JavaScript/0240__Date/DategetMonth.htm](http://www.java2s.com/Tutorial/JavaScript/0240__Date/DategetMonth.htm)~~

~~因此，当前月份（八月）将返回 7。为了能够与通常的月份索引（即 1 到 12）匹配，请使用`((new Date()).getMonth() + 1)`.~~

正如评论中指出的那样，我误解了这个问题。月份是正确的，因为月份的数组从零开始，并且 jquery 选择器`:eq()`也是从零开始的。

`:eq()`但是，正如其他答案中所指出的，返回的年份与 jquery 选择器中的第 n 个元素不匹配。按照建议使用`option[value=' + (new Date).getFullYear() + ')'`会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T09:59:31.290

jQuery 中的`:eq(N)`选择器部分选择匹配集合中的第 N 个元素（包括第 0 个）（此时为`#Years option`）。因此，除非您在下拉列表中有超过 2012 年的选项，否则`Years`这是行不通的。

最好根据其价值选择选项：`option[value=2012]`或

**[只需使用`$("#Years").val(2012)`](http://jsfiddle.net/9VEFt/2/)**，它的可读性更高，代码更少。

# javascript - 在非 SPA（单页应用程序）中使用 Require.js 和 Backbone

> ID：12129133
> 
> 赞同：2
> 
> 时间：2012-08-26T09:48:56.673
> 
> 标签：javascript, spring-mvc, backbone.js, requirejs, single-page-application

我目前正在开发一个新的 Java 项目，该项目依赖于 Spring MVC 架构（经典的前端控制器-> 调度程序-> 模型和 jsp 视图）。但是，由于我们的大多数视图都需要 Ajax 动态性（jQuery），我愿意主要使用 Require.js 和 Backbone.js 框架来构建 JavaScript 代码。

问题是，由于我的应用程序不是 SPA，我将不得不为每个页面请求加载 js 资源，因此在 JavaScript 中会丢失状态。这意味着我将不得不以某种方式不得不更不用说 Backbone 的路由器和模型功能，这对这种效果毫无意义。

那么在这种情况下，是否还有必要使用 Backbone 呢？在这样的架构中是否建议使用 Require.js？或者我最好放弃这两种主要适合SPA的技术。有没有人有过它的经验（非SPA）？

非常感谢，吉米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T00:12:01.363

我一直在使用 Backbone 并要求 Spring MVC 应用程序有一段时间了。当 Spring 控制器返回视图时，主干路由器负责启动正确的主干视图，在其中我处理大量 JavaScript 代码，如验证、弹出保存和获取数据等。虽然这种架构是混合动力，我认为值得付出努力。在您的 htmls 的标题中插入对 require 主文件的相同调用，因此您的 HTML 文件中只有一个 js 行。然后在 main 内部启动您的骨干路由器，您可能需要在您的 url 中添加 #+something 以使骨干路由器工作。

# c - 如果存在所需的输入，C 仅从标准输入读取

> ID：12129134
> 
> 赞同：0
> 
> 时间：2012-08-26T09:48:57.170
> 
> 标签：c, stdin, scanf, getline

我正在开发一个 C 程序，我希望用户在标准输入中输入以下格式：

```
<integer1> <string> <optional-integer2> 
```

当 integer2 始终存在时，我的程序正在运行。例如“3 只鸟 2”将运行良好。但是我尝试过的每一种方法都只会导致编程挂起，如果它接收到没有可选部分的输入，比如“5只猫”。如何让程序检查可选整数是否存在，如果不存在则跳过阅读它？

这是我正在使用的内容：

```
int main(){
    //help();
    size_t size = 20;
    ssize_t len;
    long num1 = 1111;
    long num2 = 2222;
    char *word;
    char chunks[3][20];
    printf("(enter command): ");
    char delimeter;
    char *cp;
    int i;
    while(1){
        cp = chunks[0];
        delimeter = ' ';
        for(i = 0; i < 3; i++){
            if(i == 2)
                delimeter = '\n';
            cp = chunks[i];
            len = getdelim(&cp, &size, delimeter, stdin);
            *(cp+(len - 1)) = '\0';
            printf("cp: '%s'\n", cp);
        }
        for (i = 0; i < 3; i++){
            printf("chunks[%d]: '%s'\n", i, chunks[i]);
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T10:05:17.703

与其尝试从标准输入读取 3 次，不如读取整行输入一次，然后检查您拥有的字符串是否包含 2 个或 3 个有效字段。这样，如果输入只有 2 个部分，您的读取功能就不会阻塞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T12:41:57.160

```
#include <stdio.h>
#include <ctype.h>

int mygetdelim(void* buff, size_t len, size_t size, FILE* fp){
    //char buff[size][len]
    //delimiter:' ', '\t', '\n'
    char (*buf)[len] = buff;
    int i=0, count=0, ch;

    while(EOF!=(ch=fgetc(fp))){
        if(isspace(ch)){
            if(i==0)continue;//skip space chars
            buf[count++][i]='\0';
            if(count==size || '\n' == ch)break;
            i=0;
        } else {
            buf[count][i++] = ch;
            if(i == len - 1){
                buf[count++][i]='\0';
                if(count==size)break;
                i=0;
                while(EOF!=(ch=fgetc(fp)) && !isspace(ch));//drop over field character
            }
        }
    }
    while('\n'!= ch && EOF!=ch)ch=fgetc(fp);//drop to newline
    return count;
}

int main(){
    size_t size = 20;
    size_t len;
    char chunks[3][20];
    printf("(enter command): ");
    int i;
    len = mygetdelim(chunks, 20, 3, stdin);//len is count of data
    for (i = 0; i < len; ++i){
        printf("chunks[%d]: '%s'\n", i, chunks[i]);
    }

    return 0;
}
#if 0
(enter command): 3 bird 2
chunks[0]: '3'
chunks[1]: 'bird'
chunks[2]: '2'

(enter command): 5 cats
chunks[0]: '5'
chunks[1]: 'cats'
#endif 
```

# c# - 线程化简单计算

> ID：12129136
> 
> 赞同：2
> 
> 时间：2012-08-26T09:49:02.980
> 
> 标签：c#, .net, multithreading, parallel-processing

我一直在尝试并行化以下函数，但不知道如何去做。

```
public static Cell GetClosestCell (Cell cell)
{
    // The four calls below should be run in parallel.
    Cell temp1 = new FindNorth(cell);
    Cell temp2 = new FindSouth(cell);
    Cell temp3 = new FindWest(cell);
    Cell temp4 = new FindEast(cell);

    // Return smallest cell based on [X].
    if ((temp1.X < temp2.X) && (temp1.X < temp3.X) && (temp1.X < temp4.X))
    {
        return (temp1);
    }
    else if ((temp2.X < temp3.X) && (temp2.X < temp4.X))
    {
        return (temp2);
    }
    else if (temp3.X < temp4.X)
    {
        return (temp3);
    }
    else
    {
        return (temp4);
    }
} 
```

四个函数调用中的每一个都应该并行运行，但不必启动线程。换句话说，应该有 4 个线程已经在运行等待输入，我可以向其分派每个调用。

我习惯了并行循环的正常范式，不知道如何处理这个（至少不是以干净的方式）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T10:04:15.343

```
using System;
using System.Threading.Tasks;

public class Program {
    public static void Main() {

        Task<Cell> task1 = new Task<Cell>(n => FindNorth((Cell)n), cell);

        Task<Cell> task2 = new Task<Cell>(n => FindSouth((Cell)n), cell);
        Task<Cell> task3 = new Task<Cell>(n => FindSouth((Cell)n), cell);
        Task<Cell> task4 = new Task<Cell>(n => FindEast((Cell)n), cell);

        task1.Start();
        task2.Start();
        task3.Start();
        task4.Start();
        Console.WriteLine("Main method complete. Press <enter> to finish.");
        Console.ReadLine();
    }

} 
```

# forms - 使用 jQuery Mobile 的 Ajax 请求，无需页面刷新

> ID：12129137
> 
> 赞同：1
> 
> 时间：2012-08-26T09:49:04.010
> 
> 标签：forms, jquery, jquery-mobile, post

我正在通过 Ajax POST 提交一个简单的表单并返回一个 JSON 响应，并使用该响应将数据填充到带有滑块的定制音频播放器中。

音频播放器滑块功能在 Ajax POST 之前工作。但是，在我提交表单后，jQuery Mobile 似乎正在刷新页面，并且在刷新之后，滑块坏了。

我收到的错误消息是：“错误：在初始化之前无法调用滑块上的方法；试图调用方法‘刷新’”

我的表单代码如下所示：

```
<form name="test" method="post">
    <input type="hidden" name="action" value="test.php">
    <input type="number" name="id" />
    <button data-icon="star" onclick="onFormSumbit();">Submit</button>
</form> 
```

我的提交功能看起来像：

```
function onFormSumbit() {
    $.ajax({
        type: $('form').attr('method'),
        url: $('form input[name=action]').attr('value'),
        data: $('form').serialize(),
        dataType: 'json',
        success: function(response, textStatus, XMLHttpRequest) {
            if (response.error) {
                console.log('ERROR: ' + response.error);                
            } else {
                mediaSource = response.url;                 
                console.log('URL: ' + response.url);
                console.log('ARTIST: ' + response.artist);
                console.log('TITLE: ' + response.title);
            }
        }
    });
} 
```

我的滑块编码如下所示：

```
<input type="range" id="slider" value="0" min="0" max="100" step="0.01" data-highlight="true" /> 
```

我的滑块功能如下所示：

```
playSlider.on('slidestop', function(event,ui) {
    mediaObject.seekTo((playSlider.val() / 100) * mediaDuration * 1000);
    console.log(playSlider.val());
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T11:07:24.303

我修改了您的代码如下，页面没有刷新：

```
$(document).on('submit', '#myForm', function(e) {
    e.preventDefault();
    postForm();
});

function postForm()
{
    $.ajax({
        type: $('form').attr('method'),
        url: $('form input[name=action]').attr('value'),
        data: $('form').serialize(),
        dataType: 'json',
        async: true,
        success: function(data) {
            mediaSource = response.url;                
        },
        error: function (xhr, ajaxOptions, thrownError) {
            alert("Error: " + xhr.status + "\n" +
                   "Message: " + xhr.statusText + "\n" +
                   "Response: " + xhr.responseText + "\n" + thrownError);
        }
    });
}

<form name="test" id="myForm" method="post">
   <input type="hidden" name="action" value="test.php">
   <input type="number" name="id"/>
   <input type="submit" data-icon="star" value="Submit">
</form> 
```

# qt - Qt 使用 boost 线程更新 GUI

> ID：12129147
> 
> 赞同：3
> 
> 时间：2012-08-26T09:50:45.113
> 
> 标签：qt, boost-thread

我正在使用 boost 线程从相机收集图像，每当新图像到达时我都会调用 Qt 信号。现在，当发出此信号时，连接的插槽运行，我在其中更新小部件，控件进入我的插槽，但它在控制台上打印以进行调试时不会更新小部件。我的问题是这个插槽是在主线程中运行还是在发出信号的线程中运行，以及如何实现所需的更新？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:55:43.780

该插槽将在创建 Qt 小部件的任何线程中运行。Qt 将在跨线程信号和槽上使用 QueuedConnection。

编辑：这可能是 [来自非 qt 线程 QueuedConnection 的有用信号 qt](https://stackoverflow.com/questions/2689450/signal-qt-from-a-non-qt-thread-queuedconnection)

你阻塞了主线程吗？

# git - 使用 git bundle 进行增量备份，适用于所有分支

> ID：12129148
> 
> 赞同：24
> 
> 时间：2012-08-26T09:50:58.480
> 
> 标签：git, backup

使用 git 存储库进行增量备份的最简单方法是什么`git bundle`？

如果我只想备份一个分支，我可以按照以下方式做一些事情：

```
git bundle create foo last-backup..master
git tag -f last-backup master 
```

但是，如果我想备份所有内容（包括所有分支）怎么办？

* * *

要回答评论中的问题：

严格来说，我不需要使用通常的 Git 捆绑包，只要解决方案满足以下属性即可：

*   每个增量备份都是一个文件。我可以将它存储在某个地方，后续增量备份不需要修改此文件。

*   该文件的大小大约等于自上次备份以来 Git 提交的总大小。二进制文件中的更改也可以有效地存储。

*   从那时起，完整备份 + 所有增量备份包含我需要自动重建存储库的所有内容，包括所有分支。

（举个简单的例子，在 git 存储库中简单地用最近更改的文件构建一个 tar 存档无法满足第二个要求，例如，如果发生了自动垃圾收集。）

理想情况下，我还希望有一个防白痴的系统：

*   我几乎可以对我的 Git 存储库进行任何完整备份，以及所有最近的增量备份，并且我可以简单地从备份中“提取”所有内容，并且存储库将是最新的。特别是，完全备份和增量备份之间是否存在部分重叠并不重要。

如果我只需要处理一个分支，Git 包就可以很好地满足这一切。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-31T13:58:33.967

（我们和Jukka讨论过这个问题，这就是结果。）

预赛：

1.  将最后一个备份作为`backup.bundle`
2.  有一个遥控器`backup`指向`backup.bundle`

进行备份：

1.  `git fetch backup`– 只是为了确保我们是最新的
2.  `git bundle create newbackup.bundle ^backup/A ^backup/B A B C`
    *   这意味着我们创建了一个捆绑包，它排除了捆绑包中已经存在的所有内容
    *   很容易`^backup/A`从`refs/remotes/backup/`
    *   同样，`A`-style 参数来自`refs/heads`
3.  复制`newbackup.bundle`到您保存备份的任何位置
4.  替换`backup.bundle`为，`newbackup.bundle`以便您知道从哪里开始下一次增量备份

恢复：

1.  拥有一个空的或代表旧版本的存储库的存储库
2.  对于每个备份文件，按顺序：
    1.  `git remote rm recovery`
    2.  `git remote add recovery <name-of-bundle>`
    3.  `git fetch recovery`– 您需要为遥控器命名才能使用
3.  现在你应该有每个可用的分支`refs/remotes/backup`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T09:50:51.220

尝试将 --since 与 --all 一起使用。

创建第一个备份：

```
git bundle create mybundle-all --all 
```

做增量备份：

```
git bundle create mybundle-inc --since=10.days --all 
```

增量应包含过去 10 天内发生的所有分支上的所有提交。确保 --since 参数可以追溯到足够远的地方，否则您可能会错过提交。如果在该时间范围内没有发生任何提交，Git 也会拒绝创建包，因此请做好计划。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T20:45:00.773

你可以做

```
git clone --mirror <your_repo> my-backup.git 
```

它将创建一个包含所有引用的裸仓库。

然后你可以定期做`git push --mirror <my-backup>`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-01T20:40:17.950

似乎**opqdonut**解决方案不起作用，因为 ^backup/A ^backup/B 仅指向上次增量备份。并且实际上需要从所有以前的增量备份中排除 refs。

需要为以前的每个捆绑包创建遥控器。

UPD：不，它应该可以工作，请参阅下面的 Jukka 评论。

# ios - NSMutable 字符串问题

> ID：12129149
> 
> 赞同：0
> 
> 时间：2012-08-26T09:50:59.447
> 
> 标签：ios, objective-c, iphone

我正在实现一个简单的计算器。

每次用户单击数字按钮时，sender.tag 都会附加到一个名为 displayString 的 nsmutable 字符串，然后会显示在屏幕上。

可变字符串以大小 40 开始。

奇怪的是，例如`1111111111`，在输入 10 位数字后，字符串的行为错误。

如果你继续点击数字按钮“1”，字符串不再附加“1”，而是另一个值，比如，2或6……突然`25469632154`出现一个数字！

使用调试器检查 - 问题不是来自显示，而是来自未正确附加的字符串本身。

可能`sender.tag`是没有正确通过吗？

这里有什么问题？

```
[displayString appendString: [NSString stringWithFormat: @"%i", [sender tag]]];  
self.lblDisplay.text = displayString; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T22:36:51.007

你为什么用`NSMutableString`？为什么不这样做：

`self.lblDisplay.text = [self.lblDisplay.text stringByAppendingFormat:@"%d", [sender tag]];`

无论如何，你是如何设置标签的？请发布该代码。我的猜测是那里出了问题，而不是传递标签或附加值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T10:03:07.247

欢迎来到 SO！您可以尝试记录所有标签以确定问题所在。

```
NSLog(@"%d", [sender tag]) 
```

`Tag`property 是 NSInteger 类型，所以你可以使用`%d`修饰符代替`%i`. 您也可以使用`appendFormat`方法：

```
[displayString appendFormat:@"%d",[sender tag]];
self.lblDisplay.text = displayString; 
```

# java - 获取所有复合子键

> ID：12129153
> 
> 赞同：1
> 
> 时间：2012-08-26T09:51:36.363
> 
> 标签：java, database, cassandra, hector

因此，假设我在 cassandra 中有以下结构：

```
<L1> (key:L2, value:value0);
<L1:0> (key:L3, value:value0);
<L1:0> (key:L3, value:value0);
<L1:0> (key:L3, value:value0); 
```

现在我想得到“L1”的所有孩子。所以预期的结果应该是（L2 和 0），但我目前得到的结果是（L2, 0, 0, 0）。如何从查询中删除这些多个 0。

在赫克托我进行以下查询：

```
composite start, end;
start.addComponent(0, "L1", EQUAL);
end.addComponent(0, "L1", GREATER_THAN_EQUAL); 
```

# cakephp-2.0 - 向页面传递参数

> ID：12129154
> 
> 赞同：0
> 
> 时间：2012-08-26T09:51:38.823
> 
> 标签：cakephp-2.0

我有一个名为`dettaglio_regione.ctp`. 我想设置 URL 之类`http://.../clienti/[[regione]]`的，所以一个工作 URL 应该是`http://.../clienti/Campania`或之类的东西`http://.../clienti/Sicilia`。我需要获取`[[regione]]`. 我如何设置路线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:10:05.850

```
Router::connect('/clienti/*', array('controller' => 'pages', 'action' => 'display')); 
```

然后使您的操作具有以下签名

```
// In your PagesController.php
function display($regione){
    ...//What ever you want to do
} 
```

编辑：更改 yourActionName 以显示以更好地适应 OP 情况

# php - PHP数组分页

> ID：12129162
> 
> 赞同：1
> 
> 时间：2012-08-26T09:52:54.557
> 
> 标签：php, mysql, pagination

我正在尝试对由 MySQL 结果组成的数组进行分页。

```
if (!$db_server) die("Unable to connect to MySQL: " . mysql_error());

mysql_select_db($db_database, $db_server)
    or die("Unable to select database: " . mysql_error());

if (isset($_GET['page']))
{
    $page = $_GET['page'];
}
else
{
    $page = 1;
}

$query = "SELECT * FROM blog";
$result = mysql_query($query);
$totalrows = mysql_num_rows($result);
$rowsperpage = 4;
$pages = ceil($totalrows / $rowsperpage);

$limit = 'LIMIT ' . ($page - 1) * $rowsperpage . ',' . $rowsperpage;
$query = "SELECT * FROM blog";
$result = mysql_query($query);

for ($j=0; $j < $totalrows; ++$j)
{
    $results[] = mysql_fetch_array($result);
}

foreach($results as $id)
    $sortAux[] = $id['id'];

array_multisort($sortAux, SORT_DESC, $results);

for ($j=0; $j < $rowsperpage; ++$j)
{
    echo "<h1>" . $results[$j][0] . "</h1>";
    echo "<hr />";
    echo "<p>" . stripslashes(emoticons($results[$j][2])) . "</p>";
    echo "<p style=\"font-size:12px;color:red;\">Posted at " . $results[$j][3] . " by " . $results[$j][1] . "</p>";
}

if ($page != $pages)
{
    $nextpage = $page+1;
    echo " <a href='{$_SERVER['PHP_SELF']}?page=$nextpage'>Older</a> ";
}
if ($page != 1)
{
    $prevpage = $page-1;
    echo " <a href='{$_SERVER['PHP_SELF']}?page=$prevpage'>Newer</a> ";
}

function emoticons ($text)  
{ 
   $emoticons = array(  
    ":)" => "<img src='emoticons/12.png'>",
    ":(" => "<img src='emoticons/13.png'>",
    ";)" => "<img src='emoticons/4.png'>",
    ":D" => "<img src='emoticons/7.png'>",
    ":P" => "<img src='emoticons/10.png'>",
    "<3" => "<img src='emoticons/3.png'>",
); 
    return str_replace(  
    array_keys($emoticons),  
    $emoticons,  
    $text);  
}
?> 
```

问题是for循环。我不知道如何从每个页面获得 4 个不同的结果。顺便说一下，它需要从最新到最旧进行排序。这就是我使用array_multisort 的原因。谢谢。

注意：我知道我需要升级到 mysqli，但现在我使用的是旧的 mysql_*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T10:01:07.093

来吧！你已经有正确的 SQL 代码片段了......

您首先将第一个查询更改为“SELECT COUNT(*) FROM blog”并结合`$x = mysql_fetch_array($result); $totalrows = $x[0];`

然后启动分页 SQL 查询：

```
$limit = 'LIMIT ' . ($page - 1) * $rowsperpage . ',' . $rowsperpage;
$query = "SELECT * FROM blog ORDER BY id DESC {$limit}"; 
```

删除 multisort-thingy 等。

# javascript - LABjs 错误：脚本总是执行它们使用 .script() 加载的序列

> ID：12129163
> 
> 赞同：0
> 
> 时间：2012-08-26T09:53:12.880
> 
> 标签：javascript, google-chrome, labjs

当我用 LABjs 做一些测试用例时，我遇到了一些问题，代码如下：

```
$LAB.script('http://code.jquery.com/jquery-1.8.0.min.js')
    .script('http://id.qq.com/js/10001/simple.js'); 
```

根据API描述，jquery-1.8.0.min.js和simple.js的执行顺序不保证。我用提琴手阻止了 jquery-1.8.0.min.js，我的 boserverd 是：

1.  在 IE8 下运行正常，simple.js 下载完成后立即执行。
2.  在 chrome 20 中，直到 jquery-1.8.0.min.js 完成下载并执行，simple.js 才执行。

这是一个错误吗？

然后我在 chrome 20 中做了另一个测试，代码如下：

```
var script = document.createElement('script');
script.type = 'text/cache';
script.src = 'http://code.jquery.com/jquery-1.8.0.min.js';
document.head.appendChild(script); 
```

运行此代码时 jquery-1.8.0.min.js 没有开始下载，是问题吗？

这是api描述： http: [//labjs.com/documentation.php#script](http://labjs.com/documentation.php#script)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T17:52:46.720

你有两个问题，所以让我分开来回答：

1.  如果“jquery.js”在 Chrome 20 中被阻止，为什么“simple.js”不运行，但在 IE8 中按预期工作？

    嗯，我不完全知道为什么会这样。这可能不是 LABjs 中的错误，但可能是 Chrome 的一个怪癖。根据规范，它*应该*以 ASAP 顺序运行，这意味着“simple.js”不应该等待“jquery.js”。除了浏览器有一个怪癖/错误之外，唯一的其他解释是如果您在代码中的某个地方设置了 set `$LAB.setGlobalDefaults({AlwaysPreserveOrder:true})`，因为这将导致阻塞行为，就像`wait()`两者之间存在 a 一样。

    只是为了排除这种情况，您是否可以将代码段更改`$LAB.setOptions({AlwaysPreserveOrder:false}).script(...)...`为明确禁用该自动`wait()`行为，以防万一？

2.  `type`如果脚本元素的属性不是可识别的有效类型，Webkit（大约是 Chrome 11'ish）会停止获取脚本元素。因此，“文本/缓存”**应该**被忽略并且无法在 Chrome 20（以及所有其他浏览器，除 IE <= 9 之外的所有其他浏览器）中开始下载，因为这是规范所说的。您在 LABjs 的源代码中看到该技术的地方，它实际上被用作最后一种情况的回退，它仅适用于那些真正旧/旧的 webkit 浏览器，因为它在当时确实有效。

# jquery - 从 iframe 读取表单数据

> ID：12129164
> 
> 赞同：0
> 
> 时间：2012-08-26T09:53:16.243
> 
> 标签：jquery, html, forms, iframe

如何读取用户从 iframe 输入的表单数据？

没有 iframe，我会做这样的事情：

jQuery：

```
function getRowData(id, parent){
    var data = [];
    $(parent+' table tr').each(function(){
        var row = {};
        $(this).find('select, input, textarea').each(function(){
            if(($(this).attr('id') == id) && (typeof $(this).attr('name') !== 'undefined' && $(this).attr('name') !== false)){
                row['id'] = id;
                row[$(this).attr('name')] = $(this).val();

            }
        });
        data.push(row);
    });
    return data;
} 
```

和 HTML：

```
<table id="form-table">
<td><input type="checkbox" name="n_available" checked="checked"></td>
<td><input type="checkbox" name="n_oem" checked="checked"></td>
</table> 
```

并调用 jQuery ：

```
$('.get-data').live('click', function () {
    postData = $(this).attr("id");

    getRowData("form-table", $(this).attr("id");//here i have my form in an array...

}); 
```

现在，如果 html 在 iframe 中，我如何获取数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T10:15:27.343

您可以`iframe`使用以下语法访问 的内部文档和元素：

```
$("#your_iframe_id").contents().find("body"); //this returns the body of the iframe
$("#your_iframe_id").contents().find("#form-table"); //this returns the table form-container inside the iframe 
```

我希望这有帮助！

# html - 如何通过将字符串从 servlet 传递给它来设置 HTML 中 textarea 的内容

> ID：12129167
> 
> 赞同：2
> 
> 时间：2012-08-26T09:53:24.087
> 
> 标签：html, forms, servlets, textarea

我正在尝试将字符串的值传递给 textarea，以便它在 textarea 中可见。看起来textarea中没有像'value'这样的属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T09:59:20.460

“textarea”标签确实具有“value”属性，请参阅：[http ://www.w3schools.com/jsref/dom_obj_textarea.asp](http://www.w3schools.com/jsref/dom_obj_textarea.asp)

如果您想将 textarea 中的内容作为从服务器获取的字符串，则必须调用服务器以通过 AJAX 从 JavaScript 代码中获取值。一个小指南：[http ://www.w3schools.com/ajax/ajax_xmlhttprequest_create.asp](http://www.w3schools.com/ajax/ajax_xmlhttprequest_create.asp)

Java Applet、ActiveX 等还有其他高级方法可以做到这一点……但这仅用于高级目的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T09:59:27.750

用于设置内容的文本区域的属性`textarea.innerText`适用于 IE 和`textarea.textContent`firefox。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T10:02:17.770

我尝试了以下代码并且它有效。我刚刚在 textarea 标签中输入了字符串，如下所示： 字符串值

```
<% String textAreaValue = session.getAttribute("textArea"); %>

<textarea rows = "4" cols = "20" name = "area" id = "area"><% if(condition) { %>
<%=textAreaValue %><%}%> </textarea> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T06:58:35.717

您还可以通过以下方式使用 JQuery 设置其内容：

```
$("#id_of_textarea").val("here is your message"); 
```

或通过以下方式使用 javascript：

```
document.getElementById("id_of_textarea").value = "here is your message"; 
```

# git - Git：所有文件都在一个子目录中，但它们应该是顶级的

> ID：12129169
> 
> 赞同：0
> 
> 时间：2012-08-26T09:53:36.097
> 
> 标签：git

这是一个 wordpress 插件的剖析：

```
.twitter-plugin
|-images/
|-index.php
+-README 
```

该目录`twitter-plugin`必须放在一个众所周知的位置 ( `wp-content/plugins`) 以便 Wordpress 可以扫描它，如果它找到一个`README`，那么它是一个有效的插件。不幸的是，当我`cd`从`plugins`Gitorious 目录和克隆存储库时，我得到：

```
.twitter-plugin
+-twitter-plugin
 |-images/
 |-index.php
 +-README 
```

插件开发人员没有将文件直接放在顶级目录中，而是将它们保存在以项目命名的子目录中。这样 Wordpress 就找不到插件（它寻找`twitter/README`，而不是`twitter/twitter/README`）。我可以通过克隆上面的一个目录（而`wp-content`不是临时移动东西以使其工作）。`wp-content/plugins``plugins/`

有没有办法恢复这种情况？我错过了一些关于 git的**基本知识吗？**

目前我认为我能做的就是初始化一个新的存储库，将文件放入，然后尝试以某种方式导入历史记录。但是这样我将无法推送到原始存储库 - 对吧？- 因为所有文件路径都会不同

我的目标是**开发**插件，而不仅仅是使用它。当然，要开发插件，它必须被*一些*Wordpress安装使用，所以它必须在众所周知的目录下，否则我的开发Wordpress安装找不到它，我将无法测试我的更改

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T10:12:11.760

克隆到您的 wordpress 项目之外的位置，然后符号链接或复制它所属的正确目录，例如：

```
$ git checkout git@wherever.org:twitter-plugin
$ cd my-wordpress-site
$ ln -s ../twitter-plugin/twitter-plugin ./twitter-plugin 
```

符号链接可能有效，也可能无效，因为并非所有 PHP 函数都遵循它们；如果没有，请尝试复制。但是，这确实意味着您必须在更新 git 存储库时再次复制；您可能希望在部署脚本中包含此过程。

# scala - 使用 Scala 2.10 反射如何列出枚举的值？

> ID：12129172
> 
> 赞同：8
> 
> 时间：2012-08-26T09:54:48.240
> 
> 标签：scala, reflection, enumeration, scala-2.10

有以下枚举

```
object ResponseType extends Enumeration {
  val Listing, Album = Value
} 
```

如何获取其 val 列表？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-26T20:58:51.967

如果您想彻底了解这一点，您需要检查您的符号是否`Value`具有超类型：

```
def valueSymbols[E <: Enumeration: TypeTag] = {
  val valueType = typeOf[E#Value]
  typeOf[E].members.filter(sym => !sym.isMethod &&
    sym.typeSignature.baseType(valueType.typeSymbol) =:= valueType
  )
} 
```

现在，即使您有以下内容（这是完全合法的）：

```
object ResponseType extends Enumeration {
  val Listing, Album = Value
  val someNonValueThing = "You don't want this in your list of value symbols!"
} 
```

你仍然得到正确的答案：

```
scala> valueSymbols[ResponseType.type] foreach println
value Album
value Listing 
```

您当前的方法将包括`value someNonValueThing`此处。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-26T09:54:48.240

以下代码获取`Symbol`表示“vals”的对象列表：

```
import reflect.runtime.universe._ // Access the reflection api

typeOf[ResponseType.Value]  //  - A `Type`, the basic unit of reflection api
  .asInstanceOf[TypeRef]    //  - A specific kind of Type with knowledge of
                            //    the place it's being referred from
  .pre                      //  - AFAIK the referring Type
  .members                  //  - A list of `Symbol` objects representing
                            //    all members of this type, including 
                            //    private and inherited ones, classes and 
                            //    objects - everything.
                            //    `Symbol`s are the second basic unit of 
                            //    reflection api.
  .view                     //  - For lazy filtering
  .filter(_.isTerm)         //  - Leave only the symbols which extend the  
                            //    `TermSymbol` type. This is a very broad 
                            //    category of symbols, which besides values
                            //    includes methods, classes and even 
                            //    packages.
  .filterNot(_.isMethod)    //  - filter out the rest
  .filterNot(_.isModule)
  .filterNot(_.isClass)
  .toList                   //  - force the view into a final List 
```

应该注意的是，它可以通过`.collect`对特定类型的测试来实现，而不是过滤 is 子句，如下所示：

```
.collect{ case symbol : MethodSymbol => symbol } 
```

反射 api 中的其他任务可能需要这种方法。

还应该注意的是，使用 a`.view`根本不是强制性的，它只是`filter`通过`map`仅`flatMap`遍历输入集合一次且在它实际上被强制进入一些具体集合的点（`.toList`在我们的例子中）。

## 更新

正如 Travis Brown 所建议的，也可以`ResponseType`直接引用该对象。所以该`typeOf[ResponseType.Value].asInstanceOf[TypeRef].pre`部分可以替换为 `typeOf[ResponseType.type]`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-26T10:12:06.037

您可以通过枚举的 values 方法返回的集合迭代枚举的值：

```
scala> for (e <- ResponseType.values) println(e)
Listing
Album 
```

# google-app-engine - 如何将谷歌云存储 ACL 设置为仅向 GAE 应用程序授予读取权限？

> ID：12129174
> 
> 赞同：1
> 
> 时间：2012-08-26T09:54:57.017
> 
> 标签：google-app-engine, google-cloud-storage

存储桶是项目私有的。到目前为止，我设法通过 gsutil CLI 更新了存储桶的 ACL。问题是只有所有者（写入/上传文件的应用程序）有权访问。当我尝试读取或列出存储桶内容时，存储桶 ACL 中指定的其他应用程序出现权限错误。我错过了什么吗？

```
 <Entry>
        <Scope type="UserByEmail">
            <EmailAddress>
                application-id@appspot.gserviceaccount.com
            </EmailAddress>
        </Scope>
        <Permission>
            READ
        </Permission>
    </Entry>
 <Entry>
        <Scope type="UserByEmail">
            <EmailAddress>
                anotherapp-id@appspot.gserviceaccount.com
            </EmailAddress>
        </Scope>
        <Permission>
            READ
        </Permission>
    </Entry> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T20:35:52.903

尝试将您应用的服务帐户添加到您的项目团队，如本教程所示：[https](https://developers.google.com/appengine/articles/prediction_service_accounts) ://developers.google.com/appengine/articles/prediction_service_accounts 。该教程侧重于将应用程序引擎与 Google Prediction API 结合使用，但是，在向 App Engine 应用程序提供对 Google Cloud Storage 资源的访问权时，启用对应用程序服务帐户的访问权的概念同样适用。

# iphone - 如何记住 UIWebView 的滚动位置

> ID：12129181
> 
> 赞同：2
> 
> 时间：2012-08-26T09:55:37.780
> 
> 标签：iphone, objective-c, ios, xcode, uiwebview

在 Safari 中，当您

1.  访问一个很长的页面，例如 w3c.org，向下滚动到页面中的某个位置
2.  杀死野生动物园
3.  再次打开 Safari，它会自动记住您在页面中的最后位置

如何做到这一点`UIWebView`？或者有可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-26T10:03:22.743

我能想到的最简单的方法是保存 Web 视图`contentOffset.y`，然后在下次加载时将其设置回您保存的内容。

`NSUserDefaults`即使应用程序被终止，或者即使安装了更新，将其保存到也将允许恢复该值。

```
[[NSUserDefaults standardUserDefaults] setFloat:myWebView.scrollView.contentOffset.y forKey:@"offsetKey"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

然后恢复：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    [myWebView.scrollView setContentOffset:CGPointMake(0, [[NSUserDefaults standardUserDefaults] floatForKey:@"offsetKey"]) animated:YES];
} 
```

^^未经测试，让我知道它如何为你工作。

# php - 我需要一个依赖注入容器吗

> ID：12129183
> 
> 赞同：4
> 
> 时间：2012-08-26T09:55:47.967
> 
> 标签：php, oop, design-patterns, dependency-injection, inversion-of-control

我有以下需要在我的程序开始时设置的依赖项：

```
//Set up dependencies
$fileSettings  = array(12, 'extra_lines', 'close_on_save');
$exporter      = new Exporter('exporterpath/filename.txt', $fileSettings);
$outputStream  = new OutputStream();
$businessModel = new BusinessModel('param1', 'param2');

//Run application
$application   = new Application($exporter, $outputStream, $businessModel);
$application->start(); 
```

所以在这里你可以看到我的主应用程序有一些依赖项，这是引导程序所需的代码，以便注入所需的一切。

这是否保证依赖注入容器？

如果不是，工厂方法会更合适吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T14:39:02.327

这是一篇很好的依赖注入文章（甚至是 PHP！）。

[http://fabien.potencier.org/article/12/do-you-need-a-dependency-injection-container](http://fabien.potencier.org/article/12/do-you-need-a-dependency-injection-container)

来自文章：

> 大多数时候，您不需要依赖注入容器即可从依赖注入中受益。
> 
> 但是，当您需要管理具有大量依赖项的大量不同对象时，依赖注入容器会非常有用（例如考虑一个框架）。

我相信正确的答案与你的场景有多复杂有关。在某些时候，某处某处必须知道如何将所有这些放在一起。如果它变得乏味和丑陋，那么可能是时候使用容器了。

实际上，您实际上**不必**有一个容器。这通常是一个好主意，因为它提供了灵活性。

# ruby-on-rails - 在 Backbone.js 中组织嵌套模板

> ID：12129187
> 
> 赞同：0
> 
> 时间：2012-08-26T09:56:27.573
> 
> 标签：ruby-on-rails, templates, backbone.js

目前正在将 Rails 3.2+ 应用程序转换为使用 Backbone.js 来管理其前端。过渡前，应用程序在 application.html.erb 中呈现了几个布局部分。为了形象化，想想[grooveshark——](http://grooveshark.com/)它的左栏和页脚，所有的导航都发生在一个中心内容区域。重点是，左/右列、页脚和页眉中的内容不是静态的。

这就是我认为 application.jst.eco 的样子。每个注释行都是可以呈现另一个模板的地方。

```
<!-- layouts/header -->

<div class="row-fluid">
  <div id="left-column" class="span3">
    <!-- layouts/left_column -->
  </div>

  <div class="span6">
    <section id="content">
      <header>
        <!-- notices -->
      </header>
      <!-- main content -->
    </section>
  </div>

  <div id="right-column"class="span3">
    <!-- layouts/right_column -->
  </div>
</div>

<!-- layouts/footer --> 
```

我应该如何在 Backbone 中组织模板以复制我的 application.html.erb 结构？我什至在想这个正确的方向吗？

此外，我对 Backbone 应用程序的入口点感到困惑。由于我仍将`<%= yield %>`在 application.html.erb 中进行调用，并通过 erb 视图预加载主页数据，如果在 Backbone 模板中定义了更大的布局，这一切将如何结合在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T10:20:30.297

有多种方法可以做到这一点，但作为一个例子，这就是我的做法。

首先，您实际上根本不必使用您的 rails 部分，除非支持不支持 javascript 的浏览器是一个问题。一个主干.js 应用程序的典型流程是：

1.  服务器呈现基本布局，包括等`<head>`，`<body>`但带有实际内容的占位符。例如，在我的应用程序中，我有导航栏的占位符和主要内容的占位符。
2.  您的主干应用程序中的主应用程序类（通常`App`）创建一个路由器，并且从路由器的`initialize`方法或从您所在页面的路由处理程序，您可以创建视图并将视图呈现到页面上的占位符中。在我的情况下，由于导航栏永远不会被换出，我在路由器的`initialize`方法中渲染它，然后在路由处理程序中渲染实际页面。（阅读[这篇文章](http://ianstormtaylor.com/rendering-views-in-backbonejs-isnt-always-simple/)，了解有关如何在页面上实际呈现视图的一些重要提示。）
3.  如果您想拥有复合视图（例如项目列表，其中每个项目都有自己的视图），那么您将在父级中呈现这些视图并将它们附加*到父级的元素*（而不是直接到文档） . 这使您的页面元素保持独立，这很重要。
4.  骨干网启动（通过`Backbone.history.start`），从那里开始，骨干网接管。

在您的情况下，您可能希望为每个左/右列以及主要内容和标题（通知）创建视图，在后两者（标题和主要内容）的情况下，可能作为复合视图。

希望有帮助，可以提供更多细节，只是问具体问题。ps 我使用[主干支持](https://github.com/thoughtbot/backbone-support)来渲染复合视图，以确保它们在交换时被正确地从 DOM 中删除和解除绑定，以避免内存泄漏等。

# c# - 如何给出任何播放器的播放歌曲路径？

> ID：12129194
> 
> 赞同：0
> 
> 时间：2012-08-26T09:57:23.523
> 
> 标签：c#, wmplib

如何给出任何播放器的播放歌曲路径？

```
using System;
using System.Windows.Forms;
using WMPLib;

namespace EliteMusic
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            WindowsMediaPlayerClass player=new WindowsMediaPlayerClass();
            MessageBox.Show(player.currentMedia.name);

        }
    }
} 
```

我收到此错误：

> 你调用的对象是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T09:59:02.907

这是因为 currentMedia 未设置（空）。您必须先指定路径才能使用 WindowsMediaPlayerClass 进行播放。

# php - 较大的文件未使用 uploadify 上传和反映

> ID：12129201
> 
> 赞同：1
> 
> 时间：2012-08-26T09:58:47.620
> 
> 标签：php, javascript, jquery, mysql, uploadify

我正在使用uploadify插件上传文件并在mysql数据库中更新它们。

较小的文件很容易上传，即在数据库中上传和更新的文件少于 1 mb。但是超过 4 mb 左右的较大文件不会被上传。

这是我的代码：`

```
$j('#file_upload').uploadify({
        auto : false,
        'swf'      : 'uploadify/uploadify.swf',
        'uploader' : 'newuploadify.php',
        // Put your options here
        'queueSizeLimit' : 1,

        'multi'    : false,
        'buttonText' : 'Add Photo',
        'fileTypeDesc' : 'Image Files',
        'fileTypeExts' : '*.gif; *.jpg; *.png; *.JPG',
        'fileSizeLimit' : '10MB',
        'onClearQueue' : function(queueItemCount) {
               $j("#photocancelbtn").hide();
               $j("#photouploadstartbtn").hide();
        },
        'onSelect' : function(file) {
              $j("#photocancelbtn").show();
              $j("#photouploadstartbtn").show();
        },

        'onUploadSuccess' : function(file, data, response) {
                $j("#photocancelbtn").hide();
               $j("#photouploadstartbtn").hide();

               changeBtnText();
    }

    }); /* closing uploadify line*/

}); /* closing funciton line*/
}); 
```

`

上传脚本：

`

```
<?php
/*
Uploadify
Copyright (c) 2012 Reactive Apps, Ronnie Garcia
Released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
// Define a destination
require('newconnect.php');
$targetFolder = '/Mysite/uploadify/'; // Relative to the root

if (!empty($_FILES)) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
    $targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];

    // Validate the file type
    $fileTypes = array('jpg','jpeg','gif','png'); // File extensions
    $fileParts = pathinfo($_FILES['Filedata']['name']);

    if (in_array($fileParts['extension'],$fileTypes)) {
    $fp     = fopen($tempFile, 'r');
    $data = fread($fp, filesize($tempFile));
    fclose($fp);
    $query = $mysqli->prepare("Update help.posts set Photo=? where Pid=?");
           $query->bind_param("si", $data,$pid);
           $pid=3;
           $query->execute();

    } else {
        echo 'Invalid file type.';
    }
}
?> 
```

`

请让我知道错误是什么。我可以上传较小的文件但不能上传较大的文件，尽管我设置的上传限制是 10 mb 并且还将 php.ini max-file-size 更新为 10mb

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T10:05:46.527

好的，解决了！问题出在文件格式上。脚本没有采用 .JPG（大写），而是采用 .jpg

# iphone - 在 Restkit (iPhone) 中使用 Json 响应

> ID：12129203
> 
> 赞同：2
> 
> 时间：2012-08-26T09:59:14.443
> 
> 标签：iphone, objective-c, core-data, restkit

我有这样的 Json 响应。

```
{
    "ss": 1,
    "tc": 75,
    "pn": "1",
    "users": [
        {
            "id": "123456",
            "ne": "John Smith",
            "el": "example@example.com"
        },
       {
            "id": "3213243",
            "ne": "iPhone Guy",
            "el": "sdads@dsss.com"
        }
]
} 
```

代码：

```
[manager loadObjectsAtResourcePath:@"path/to/resources" usingBlock:^(RKObjectLoader* loader) {

        loader.method = RKRequestMethodPOST;
        loader.params = inputDict;

        loader.onDidLoadResponse  = ^(RKResponse *response)
        {

            NSLog(@"Response is %@",response);// here it contains ss value

        };
        loader.onDidLoadObjectsDictionary = ^(NSDictionary *dictionary)
        {
           // NSLog(@"Dictionary is %@",dictionary);

        };
        loader.onDidFailWithError = ^(NSError *error)
        {
            NSLog(@"Restkit Error is %@",error);  
        };
        loader.onDidLoadObjects = ^(NSArray * objects)
        {
           NSLog(@"Object Count is %d",[objects count]);

        };
    }]; 
```

从上面的响应中，我想检查成功（ss）是 0 还是 1。如果是 0，我不需要映射用户，否则我想映射用户。我怎样才能做到这一点。我是否需要映射 ss、tc 和 pn 或者是否可以检查 ss 值而无需映射。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T10:22:00.550

我找到了解决方案

```
#import <RestKit/RKJSONParserJSONKit.h>

RKJSONParserJSONKit *parser = [RKJSONParserJSONKit new];
NSDictionary *ditVal = [parser objectFromString:[response bodyAsString] error:nil]; 
```

字典值包含值和键。从中我可以得到 ss 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T10:09:18.003

我不知道我是否又错了。看看这个是否有帮助：[来自 iphone/ipad 的 json webservice](https://stackoverflow.com/questions/4202038/json-webservice-from-iphone-ipad)

# .net - 如何从 CWnd* 获取 PtrInt ？

> ID：12129213
> 
> 赞同：0
> 
> 时间：2012-08-26T10:00:31.800
> 
> 标签：.net, c++-cli

我需要从我在 C++/CLI 代码中获得的参数中获取 PtrInt

输入是 CWnd*，我需要返回 PtrInt 作为输出。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T10:10:55.817

你是说 IntPtr 吗？您可以使用 IntPtr(void*) 构造函数从本机指针创建 if：

```
IntPtr ptr((void*)pWnd); 
```

# google-chrome - Chrome 扩展程序因“错误的扩展程序消息 webRequestInternal.eventHandled”而崩溃

> ID：12129217
> 
> 赞同：2
> 
> 时间：2012-08-26T10:01:33.203
> 
> 标签：google-chrome, google-chrome-extension

我有一个 chrome 扩展程序突然崩溃了，所以我看到你可以通过激活日志来调试你的 chrome，所以我就是这样做的，我注意到在崩溃发生之前，它抛出了一个错误：“错误的扩展消息webRequestInternal.eventHandled : terminating renderer."，所以这个错误可能发生在 webRequests 侦听器之一中。但我不知道该怎么做才能使它正确。

这是函数关闭之前发生的日志错误：

```
[1888:3844:17965500:ERROR:extension_function.cc(143)] bad extension message webRequestInternal.eventHandled : terminating renderer.
[1888:3844:17965625:VERBOSE1:web_request_time_tracker.cc(181)] WR percent 2643: http://mypage.com/test: = 0.985185
[1888:3844:17965625:VERBOSE1:web_request_time_tracker.cc(181)] WR percent 2644: http://mypage.com/test: 123/123 = 1
[1888:3464:17965734:VERBOSE1:speech_input_extension_manager.cc(228)] Extension unloaded. Requesting to enforce stop... 
```

我有 2 个 webRequest 侦听器：

OnBeforeRequest 页面阻塞：

```
chrome.webRequest.onBeforeRequest.addListener(blockURLs,
    {urls: ["http://*\/*", "https://*\/*"]}, //I have to use all because I use specific page filters
    ["blocking"]
);

function blockURLs(details){    

    var url = details.url.split('/');
    if(STRING_OF_SERVERS.indexOf(url[2]) < 0 || details.url.indexOf('.css') > -1 )
    return {cancel: true}; 
} 
```

还有 onBeforeSendHeaders （这可能是一个错误）：

```
 chrome.webRequest.onBeforeSendHeaders.addListener(
      function(details) {
                    var cookie_found = false;
                    for (var i = 0; i < details.requestHeaders.length; ++i) {

                      if (details.requestHeaders[i].name === 'Cookie') {

                            //details.requestHeaders.splice(i,1); //,localStorage['COOKIES']
                            //alert("ADDED: " + localStorage['COOKIES']);

                            if(window['SERVIDOR_TEMP_DATA_' + SERVER_INDEX]['COOKIES'] != ''){
                                details.requestHeaders[i] = new Object();
                                details.requestHeaders[i].name = 'Cookie';
                                details.requestHeaders[i].value = window['SERVIDOR_TEMP_DATA_' + SERVER_INDEX]['COOKIES'];
                            }else{
                                window['SERVIDOR_TEMP_DATA_' + SERVER_INDEX]['COOKIES'] = details.requestHeaders[i].value;

                        cookie_found = true;
                        break;
                      }
                    }

                    if(cookie_found == false && window['SERVIDOR_TEMP_DATA_' + SERVER_INDEX]['COOKIES'] != ''){
                            var i = details.requestHeaders.length;
                            details.requestHeaders[i] = new Object();
                            details.requestHeaders[i].name = 'Cookie';
                            details.requestHeaders[i].value = window['SERVIDOR_TEMP_DATA_' + SERVER_INDEX]['COOKIES'];
                    }

    //console.log(details.url);
    //console.log(details.requestHeaders);

    return {requestHeaders: details.requestHeaders};
  },

  {urls: URLS_TYPE, types : ["main_frame", "sub_frame", "xmlhttprequest", "object",  "stylesheet", "script", "image",  "other"]},
  ["blocking", "requestHeaders"]);

  //StartClicking();
}); 
```

未指定的变量：

```
*var URLS_TYPE is an array of Sites allowed
*var STRING_OF_SERVERS is a String containing all the possible combination of sites that are allowed 
```

在我的应用程序中，我提出了很多 Web 请求，但我不知道该怎么办了：/ 什么可能导致这个崩溃？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T01:29:35.393

我能够找到答案。问题是，如果请求标头缺少任何所需的信息，它只会崩溃而不是报告错误。

我的 details.requestHeader 正在返回一个只有 name 而没有 value 属性的 cookie，所以如果我添加了 value 属性，崩溃就会消失。

Cookie 对象应该是这样的：

```
{ name: "key", value: "val"} 
```

`{name: "key"}`我只是在添加一个未定义的值后才生成，使用后`JSON.Stringify(details.requestHeaders)`我可以看到它丢失了，现在问题解决了。

我只需要确保 cookie 值不是未定义的，如果它只是添加一个空字符串或任何你想要的。

# scala - 如何安装 Scala 编译器插件以便它自动与 Ant 一起工作？

> ID：12129218
> 
> 赞同：1
> 
> 时间：2012-08-26T10:01:36.043
> 
> 标签：scala, plugins, ant, compiler-construction, scalac

我正在编写一个Scala编译器插件，我想在调用时使用它，所以我`scalac`把它放在 Scala 发行版的插件目录（使用带有嵌入式任务的 Ant 脚本，例如：`misc/scala-devel/plugins``scalac HelloWorld.scala``scalac`

```
<scalac srcdir="${src}" destdir="${bin}" classpathref="build.classpath" deprecation="on">
  <include name="**/*.scala"/>
</scalac> 
```

我可以通过*更改*构建脚本以指定插件目录来使其工作，例如：

```
<scalac srcdir="${src}" destdir="${bin}" classpathref="build.classpath" deprecation="on"
  addparams="-Xpluginsdir /Users/stuart/Downloads/scala-2.9.2/misc/scala-devel/plugins">
  <include name="**/*.scala"/>
</scalac> 
```

但是，我需要它来处理我无法手动更改的第三方构建脚本，所以我的简单修复并没有解决它 - 请有任何想法吗？

* * *

更新：

经过一番挖掘，我发现您可以使用覆盖任务定义`presetdef`，例如：

```
<presetdef name="scalac">
  <scalac addparams="-Xpluginsdir /Users/stuart/Downloads/scala-2.9.2/misc/scala-devel/plugins"/>
</presetdef> 
```

这并不能直接解决问题，但它可能很有趣 - 我目前的调查是是否可以将它（或类似的东西）放在导入原始脚本的包装 Ant 脚本中（不知道这是否可行，我不太使用 Ant）。

# asp.net - 在 SQL Server 中仅获取浮点数的小数部分

> ID：12129227
> 
> 赞同：6
> 
> 时间：2012-08-26T10:03:29.930
> 
> 标签：asp.net, sql-server, sql-server-2008

我在 SQL Server 2008 中有以下数字：5.4564556
我只想从 5.4564556 中得到 4564556，
如果我只能得到 4564556 中的 4 个，这是小数部分的第一个数字，那会更好。

我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-26T10:05:37.773

你可以这样尝试：

```
SELECT (5.4564556 % 1) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-26T10:07:40.220

您还可以使用[FLOOR()](http://msdn.microsoft.com/en-us/library/ms178531.aspx)：

```
SELECT Value - FLOOR(Value) 
```

在你的情况下：

> 5.4564556 - 5 = 0.4564556

如果是负值，您可以使用[ABS](http://msdn.microsoft.com/en-us/library/ms189800.aspx)

```
SELECT ABS(Value) - ABS(FLOOR(Value)) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-26T10:10:31.973

要获取“。”后面的所有数字，您可以（ab）使用[PARSENAME](http://msdn.microsoft.com/en-us/library/ms188006.aspx)

```
select PARSENAME(5.4564556,1) 
```

返回 4564556

另请参阅[SQL - 如何仅获取小数点后的数字？](https://stackoverflow.com/questions/3418606/sql-how-do-i-get-only-the-numbers-after-the-decimal)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-26T10:08:31.910

试试这个

```
 select cast(5.4564556 % 1 * 10 as int) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-27T00:38:48.507

您可以通过以下方式获得前四个小数部分：

```
select SUBSTRING (PARSENAME(5.4564556,1), 1, 4) 
```

# jquery - jquery选择器之间的区别

> ID：12129228
> 
> 赞同：0
> 
> 时间：2012-08-26T10:03:35.467
> 
> 标签：jquery, jquery-selectors, twitter-bootstrap

在为站点设置 ajaxnavigation 时，我遇到了 jQuery 选择器的问题。该站点基于 twitter 引导程序，并使用框架提供的导航栏和下拉菜单。

`section#main`单击链接时，我使用 hashchange 事件将新内容加载到其中`class="ajaLink"`。

我被卡住了，因为该事件似乎不会绑定到 twitter 引导下拉菜单中的链接。我调查了下拉列表的 JS，但我看不到任何会阻止事件被绑定和触发的东西。

沮丧地我改变了选择器

```
$(document).on('click', '.ajaxLink', function (e) {
    ...
} 
```

到

```
$('.ajaxLink').on('click', function (e) {
    ...
} 
```

这使得事件绑定到导航栏和下拉列表中的所有链接，但会将链接保留在动态加载的内容中。

我无法弄清楚这两个选择器之间的区别以及为什么会出现这种行为。到目前为止，我的解决方案是同时使用这两个选择器，但只要我不能确定事件不会两次绑定到同一个元素，这感觉不是一种解决方案。

那么问题是使用的两个选择器之间有什么区别？我将如何重写选择器以确保我`.ajaLink`只绑定每个元素一次？

的HTML...

```
<!DOCTYPE html>
<html>
<head>

</head>
<body>
    <div class="container">
        <header>
            <div class="navbar navbar-inverse">
                <div class="navbar-inner">
                    <div class="container">
                        <!-- Minimizing the menu under a button when screen gets too small. -->
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            ...

                        </a>

                    <div class="nav-collapse">
                    <ul class="nav">
                        <!-- Choose application. -->
                        <li class="dropdown">
                            <a class="dropdown-toggle" href="#" data-toggle="dropdown"> Menu 1 <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li class=""><a class="ajaxLink" href="/Blabla">Blabla</a></li>
                                <li class=""><a class="ajaxLink" href="/Yadayada">Yadayada</a></li>
                                ...
                            </ul>
                        </li>
                        <!-- Choose application. -->
                        <li class="dropdown">
                            <a class="dropdown-toggle" href="#" data-toggle="dropdown"> Menu 2 <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li class=""><a class="ajaxLink" href="/Blabla2">Blabla 2</a></li>
                                <li class=""><a class="ajaxLink" href="/Yadayada2">Yadayada 2</a></li>
                                ...
                            </ul>
                        </li>
                    </ul>
                    <form class="navbar-search pull-right" action="/Home/Search" method="post" >
                        <input type="search" class="search-query" placeholder="Sök" />
                        <button type="submit" class="btn btn-inverse" id="search-button ">Search</button>
                    </form>

                  </div><!--/.nav-collapse -->
                </div>
              </div>
            </div>
        </header>
        <div class="log label label-important" style="display:none;" ></div>
    <section id="main" style="opacity: 1; ">

    <div class="row-fluid">   
    <div class="span2">

    </div> 
    <div class="span10">
        <span class="gradientlabel"><a href="#">Artiklar</a></span> 

        <table class="table table-striped table-bordered table-condensed overview-table">
            <tbody><tr>
                <th>
                    Art No.
                </th>
                <th>
                    Description
                </th>
                <th>
                    Price
                </th>
                <th></th>
            </tr>

            <tr>
                <td>
                    16791
                </td>
                <td style="overflow:hidden;white-space: nowrap;">
                    175/70-13 82Q Semperit Ice Grip 2 Dubbat
                </td>
                <td>
                    300
                </td>
                <td>
                    <a class="ajaxLink" href="/Artiklar/Edit/16791">Edit</a> 
                </td>
            </tr>
            <tr>
                <td>
                    16792
                </td>
                <td style="overflow:hidden;white-space: nowrap;">
                    195/55-15 85Q Uniroyal Nordic Dubbat
                </td>
                <td>
                    550
                </td>
                <td>
                    <a class="ajaxLink" href="/Artiklar/Edit/16792">Edit</a> 
                </td>
            </tr>
            ...
        </tbody></table>
    </div>
    </div>
    </section>
        <footer>
        </footer>
    </div>

</body>
</html> 
```

Javascript

```
//Add event for all ajaxLink (except for the ones in the bootstrap dropdown)
$(document).on('click', '.ajaxLink', function (e) {
    var self = $(this);
    if (self.attr('href').length > 2) {
        window.location.hash = "!" + self.attr('href');
    }
    return false;
});

//I dont really know yet, but this is the only way to attach the event to bootstraps dropdown, and also have to close the dropdown programmatically.
$('.ajaxLink').on('click', function (e) {
    var self = $(this);
    //if (self.prop('tagName') != 'A') { alert('not a link'); self = self.find('a:first'); }
    if (self.attr('href').length > 2) {
        window.location.hash = "!" + self.attr('href');
    }
    self.closest('.dropdown').removeClass('open');

    return false;
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T10:08:16.137

不同之处在于`$('.ajaxLink').on('click', function (e) { ... }` **只**绑定已经存在的元素。

`$(document).on('click', '.ajaxLink', function (e) { ... }`有一个委托，还绑定`.ajaxLink`了将来动态创建的元素。

如果你想要一个委托，你真的应该使用一个**比**`document`. 原因是在 DOM 树中节省了不必要的搜索，从而提供了更好的性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T10:22:49.333

从我从[JQuery docs](http://api.jquery.com/on/)中读到的内容来看，它似乎`$('.ajaxLink')`返回了一个包含所有当前匹配的 DOM 元素的数组，`on('click')`然后被绑定到该数组中的每个项目一次，而`$(document).on(’click')`在单击文档的任何后代时都会被调用， then 仅在它与方法中传递的 filert 匹配时才被执行`.on()`。

考虑到这一点，您还可以尝试以下方法：

```
$(".dropdown-menu").on("click", ".ajaxLink", function(e) { ... }); 
```

# iphone - 从 NSMutableArray 制作 NSArray

> ID：12129236
> 
> 赞同：-4
> 
> 时间：2012-08-26T10:04:30.800
> 
> 标签：iphone, ios

我有一个`NSMutableArray`. 我想用我试过的 for 循环来做一个`NSArray`， 但我不能这样做。`NSMutableArray``NSMutableArray`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T10:12:08.627

`copy`您可以使用以下方法将可变数组转换为不可变数组，而不是遍历数组项

```
NSArray *newArray = [myMutableArray copy]; 
```

`copy`是一种方便的方法。如果将它发送给可变/不可变类集群的可变成员，它会返回一个不可变副本。但是如果你把它发送给一个不可变的成员，它只会返回同一个对象和另一个保留。

还有`mutableCopy`一个将返回它发送到的任何内容的可变版本。

返回拥有（保留）对象的行为是内存管理指南建议释放使用`new` `alloc` `retain`or **`copy`**（当然是在非 ARC 环境中）创建的对象的原因

如果您尝试使用循环是有原因的，因为您想在创建新数组之前更改数组的值，那么有几种方法可以做到这一点（循环、枚举等），但我们会在我们为您提供建议之前，需要了解更多详细信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-26T10:07:47.943

无需循环。您可以像这样从可变数组创建一个不可变数组

```
NSArray *myUnMutableArray = [[NSArray alloc] initWithArray:myMutableArray]; 
```

# file - 如何复制我的 Magento 文件

> ID：12129239
> 
> 赞同：0
> 
> 时间：2012-08-26T10:04:51.533
> 
> 标签：file, magento, copy

我有一个magento任务。我在没有样本数据的情况下安装了 magento。我在默认的 magento 设置中完成了分配测试。现在我想将此解决方案发送给我的老师。我应该复制哪些文件并发送给他，这样它才能正常工作。

请帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T10:18:07.790

将创建或编辑的任何文件发送给他，保持文件夹结构与 Magento 安装文件夹中的相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T15:33:38.850

最好的选择是归档整个 Magento 文件夹并转储数据库。将这两个文件放在一起并将它们上传到诸如 mediafire 之类的网络锁。如果您添加了属性，则需要随数据库一起提供（除非您编写了一个带有自动进行更改的安装脚本的模块。）

把那个链接给你的老师；）

PS：您可以随时联系您的老师并询问他如何解决您的问题。

# .htaccess - 友好的 URL 和 301 重定向

> ID：12129250
> 
> 赞同：0
> 
> 时间：2012-08-26T10:06:25.827
> 
> 标签：.htaccess, mod-rewrite, redirect, http-status-code-301, friendly-url

我正在尝试重写一个 URL，使其对用户/搜索引擎友好，然后 301 将原始 URL 重定向到新 URL。

目前帖子生成如下：example.com/blog/post.php?s=nice-post

但我希望它们看起来像这样：example.com/blog/nice-post

这是我到目前为止所得到的：

```
RewriteEngine On

RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^ - [L]

RewriteCond %{QUERY_STRING} ^s=(.+)$
RewriteRule post.php /%1? [R=301,L]

RewriteCond %{REQUEST_URI} !post.php
RewriteRule ^([a-zA-Z0-9_-]+)$ post.php?s=$1 
```

不幸的是，这与 404 重定向冲突，将所有未找到的页面发送到空白 post.php 文件，我不知道为什么。有没有更好的方法来处理 URL 重写/重定向？

谢谢你看:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:26:33.427

详细说明 tdammers 关于 header() 的建议

在您的 post.php 中，在输出任何内容之前，确定它是否是有效的帖子（例如通过在数据库中查找其 id）。

```
if( !$valid ) {
    header( 'HTTP/1.0 404 Not Found' );
    echo "404";
    exit;
} 
```

即，如果发现页面无效，PHP 会向浏览器发送一个 404 标头，通知它这是一个丢失的页面。不幸的是，没有直接的方法可以重定向到 Apache 的默认 404 页面，所以你必须自己输出一些东西——但由于你已经有一个自定义的 404 页面，你可能只需要 include() 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:41:23.293

Going to assume you've got these rules in an htaccess file in your `/blog/` directory. Try adding a `RewriteBase` and removing the leading slash from your query string backreference:

```
RewriteEngine On

RewriteBase /blog/

RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^ - [L]

RewriteCond %{QUERY_STRING} ^s=(.+)$
RewriteRule post.php %1? [R=301,L]

RewriteCond %{REQUEST_URI} !post.php
RewriteRule ^([a-zA-Z0-9_-]+)$ post.php?s=$1 
```

# c# - Html敏捷无法得到结果

> ID：12129251
> 
> 赞同：3
> 
> 时间：2012-08-26T10:06:26.087
> 
> 标签：c#, .net, web-scraping, html-agility-pack

我在以下网页上有这个 URL 列表，我想知道如何获取这些 URL 并将它们添加到 ArrayList？

[http://www.manta.com/mb?search=US+Cellular&refine_company_loctype=B](http://www.manta.com/mb?search=U.S.+Cellular&refine_company_loctype=B)

我自己尝试过，无论出于何种原因，我在这里没有得到任何结果是代码

```
using (var wc = new WebClient())
{
    HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();

    doc.LoadHtml(wc.DownloadString("http://www.manta.com/mb?search=U.S.+Cellular&refine_company_loctype=B"));

    var links = doc.DocumentNode.SelectSingleNode("//div[@class='clear']")
        .Descendants("a")
        .Select(x => x.Attributes["href"].Value)
        .ToArray();

    foreach(var item in links)
    {
        Response.Write(item.ToString()+"---new line---<br/>");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T12:27:38.750

首先，您尝试抓取的网站具有验证码和/或超时保护，可防止对网站的许多请求。

所以你应该考虑到这一点。在这种情况下，您将成为没有 div 的不同网页。

其次，您通过 SelectSingleNode 从文档中仅选择一个节点，因此它仅返回一个节点。

所以试试下面的代码：

```
using (var wc = new WebClient())
{
    HtmlDocument doc = new HtmlDocument();

    doc.LoadHtml(wc.DownloadString("http://www.manta.com/mb?search=U.S.+Cellular&refine_company_loctype=B"));                

    var divs = doc.DocumentNode.SelectNodes("//div[@class='clear']");

    if (!divs.Any())
        Response.Write("Not found or timeout protection mechanism");

    foreach (var item in divs)
    {
        HtmlNode link = item.Descendants("a").FirstOrDefault();
        Response.Write(link.GetAttributeValue("href", string.Empty));
    }
} 
```

# cocoa - cocoa：设计持久缓存的最佳方式是什么？

> ID：12129252
> 
> 赞同：1
> 
> 时间：2012-08-26T10:07:26.180
> 
> 标签：cocoa

我必须从互联网上下载一些信息，比如某人的电话号码是多少。我想将信息保存在磁盘中，以便在我的应用程序启动时加载它。所以我想知道Core data是否是最好的选择？我的意思是它足够快吗？我想将信息加载到 NSCache 对象中，它是我可以使用的好类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T10:16:53.060

它是一个 Plist 类型的缓存；键-> 值，只有字符串。轻松编码。对于一些数据，我会推荐这个。[这里描述](https://stackoverflow.com/questions/905542/how-to-write-data-in-plist)

另一个用NSArchiver->NSData：二进制存储，任何类型的数据，但是你要反序列化和反序列化。更多的编码，没有限制（好吧，你正在做转换）。我确实提供了这个，因为在开发过程中，也许我以后需要一些其他数据而不是文本。通常需要缓存图片。[实际上，这里提出](https://stackoverflow.com/questions/9289672/how-to-store-images-in-cache)的好的答案是反对票！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T10:29:00.427

如果您要存储将在应用程序启动之间使用的任何内容，那么除非您有非常非常基本的要求，否则使用 Core Data 是可行的方法。NSCache 更适合作为应用程序运行时使用的临时缓存，以及如果数据不存在可以重新计算的数据。

# php - 简单的错误检查 if 语句

> ID：12129261
> 
> 赞同：0
> 
> 时间：2012-08-26T10:08:02.123
> 
> 标签：php, exception-handling, try-catch, custom-errors

我想用一个简单的错误横幅替换`warning`s 和s 的列表。`error`我正在尝试检查此代码是否产生错误，如果是，则输出自定义错误

```
$sxml = simplexml_load_file($yurl) 
```

我玩过这个`try` `catch`街区，但我似乎无法做到正确，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T10:14:48.623

采用[`libxml_use_internal_errors()`](http://www.php.net/manual/en/function.libxml-use-internal-errors.php)

```
<?php

    libxml_use_internal_errors(true);

    $sxml = simplexml_load_file($yurl);

    if (!$sxml) {
        foreach (libxml_get_errors() as $error) {
            // Custom error banner here
                switch ($error->level) {
                    case LIBXML_ERR_WARNING:
                        $return .= "Warning $error->code: ";
                        break;
                    case LIBXML_ERR_ERROR:
                        $return .= "Error $error->code: ";
                        break;
                    case LIBXML_ERR_FATAL:
                        $return .= "Fatal Error $error->code: ";
                        break;
                    }    
        }
            //clears libxml error buffer
        libxml_clear_errors();
    }

?> 
```

[`libxml_get_errors()`](http://www.php.net/manual/en/function.libxml-get-errors.php)返回一个对象数组[`libXMLError`](http://php.net/manual/en/class.libxmlerror.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T10:12:00.533

你只能`catch`例外，不能错误。

用于[`set_error_handler()`](http://www.php.net/manual/en/function.set-error-handler.php)将 PHP 的默认错误处理程序替换为您自己的函数。

# qt - 如果使用 CMAKE 作为构建系统，如何为 mingw 定义 UNICODE

> ID：12129266
> 
> 赞同：6
> 
> 时间：2012-08-26T10:09:31.327
> 
> 标签：qt, macros, cmake, mingw

美好的一天，我在 Windows 平台上使用 Cmake 构建系统构建了我的 Qt 项目，但是如果我在 cmake 文件中添加行：

```
add_definitions("-DUNICODE -D_UNICODE")
```

UNICODE 的定义不起作用（MINGW），只有当我使用 MSVC 编译器构建我的项目时才能正常工作。一段时间后，我找到了解决方法[如何在调用 CMake 时定义变量，以便 qtcreator 知道它已定义？](https://stackoverflow.com/questions/7408262/how-do-i-define-a-variable-when-i-call-cmake-so-that-qtcreator-knows-it-is-defi)，此解决方案有效，但如果我使用本机 WINAPI 函数（如 CreateFile），则会出现编译错误，因为编译器选择了 CreateFileA 但我使用 w_char 并且我想使用 CreateFileW，这是因为宏 UNICODE 的定义出现在我之前配置文件。如何在 cmakefile 中定义 UNICODE 宏？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-26T22:07:17.910

您是否尝试过（注意缺少引号）：

```
add_definitions(-DUNICODE -D_UNICODE) 
```

# mysql - 错误代码：2013：在查询期间丢失与 Mysql 服务器的连接.. 如何改进此查询

> ID：12129269
> 
> 赞同：0
> 
> 时间：2012-08-26T10:10:01.403
> 
> 标签：mysql

我收到帖子标题中所述的错误。我有两张桌子。第一个，大的超过 4000,000 条记录，第二个，小的大约 7000 条记录。我想在 samll 表中搜索值，如果找到，我想从大表中提取整条记录。该命令从未执行过，并且总是失去与数据库的连接。我试图将输出限制为 50 条记录，同样的事情发生了。请帮我。如果我需要诸如索引之类的东西（我读到这可能会解决此类性能问题，请向我说明如何。我不是 DBA）。

```
select * from db.large, db.small 
where large.value=small.value; 
```

**编辑：**我使用 MySQL 工作台 5.2.41 CE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T13:57:19.723

At one point on a previous project, I could actually crash the MySQL server reproducibly with a pretty simple query. In the code that called the database, I saw the same error message. Can you verify that the MySQL server's process ID is the same before and after the query? Chances are that your OS restarts the MySQL server immediately after the crash, and the MySQL command line client automatically reconnects (though it emits a notice when it does).

# sql - 从一个选择子句而不是两个中获取参数

> ID：12129273
> 
> 赞同：0
> 
> 时间：2012-08-26T10:10:57.490
> 
> 标签：sql, select

我想一次从一个选择子句中获取一个参数，而不是两次选择。

目前，我正在这样做：

```
SELECT 
    Idx_Pro, 
    Name, 
    Mail,
    IsValidateUser
FROM 
    MyTable 
WHERE 
    [Mail]  = @Mail 
AND 
    [Password] = @password  

If (@@ROWCOUNT > 0)
SET  @Id_output = (SELECT Id_User 
           FROM     MyTable 
               WHERE  [Mail]    = @Mail 
           AND  [Password]  = @password                         
               ) 
```

我试过这个：

```
 DECLARE @Id_output int

SELECT 
    [@Id_output] = Idx_Pro, 
            ...
    FROM  MyTable 
    ... 
```

但我无法得到它...

是否甚至可以在变量中仅获取一列？（我的选择只返回一行）

谢谢，托尼流

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T11:12:41.440

您是否希望在一次操作中同时返回 4 列结果并分配给变量？如果是这样，那是不可能的。您可以将所有列值分配给变量或参数，然后选择它们以返回结果集。

```
DECLARE @Idx_Pro        INT,
        @Name           VARCHAR(50),
        @IsValidateUser BIT

SELECT @Idx_Pro = Idx_Pro,
       @Name = Name,
       @IsValidateUser = IsValidateUser
FROM   MyTable
WHERE  [Mail] = @Mail
       AND [Password] = @password

/*No intermediate statement can be placed here as it will reset @@ROWCOUNT*/    

SELECT @Idx_Pro        AS Idx_Pro,
       @Name           AS Name,
       @Mail           AS Mail,
       @IsValidateUser AS IsValidateUser
WHERE  @@ROWCOUNT > 0 
```

# python - 如何使用 Python 代码创建和删除数据库？

> ID：12129275
> 
> 赞同：0
> 
> 时间：2012-08-26T10:11:32.373
> 
> 标签：python, mysql, python-3.x, python-2.7, mysql-python

我对 Python 很陌生。我们如何在 Python 中删除和创建数据库？

我正在使用 MySql 和 Windows server 2003。

注意：我有所有的查询、删除、创建和插入记录的所有内容`input.sql`

所以我想导入input.sql。

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T10:19:29.810

如果您可以访问`mysql`客户端，那么这很简单：

```
mysql -u username -p database < input.sql 
```

这将提示您输入密码；如果您想内联提供密码：

```
mysql -u username -ppassword database < input.sql 
```

[`subprocess`](http://docs.python.org/library/subprocess.html)使用该模块从 Python 运行上述任何操作。

不太简单的方法是读取文件的每一行 - 执行一些逻辑来获取整个 SQL 语句 - 然后“手动”对数据库执行它，但这只会复制`mysql`命令正在执行的操作：

```
import MySQLdb
db = MySQLdb.connect(username="foo",passwd="secret",db="mydb")
c = db.cursor()

with open('input.sql') as f:
   for line in f:
      proper_sql = some_magic_function(line)
      c.execute(proper_sql)
      db.commit() 
```

# f# - 需要帮助了解 F# 类语法

> ID：12129278
> 
> 赞同：2
> 
> 时间：2012-08-26T10:11:48.500
> 
> 标签：f#

这是关于 F# 类语法的一个非常基本的问题。这是一个小代码来说明我的问题。

```
type AClass() as self =
    member this.Something = printfn "Hello" 
```

基本上从我所读到的“as self”将为当前实例创建一个名称，该名称可以在整个类中使用（如 C# 或 Java 中的“this”）。但是“member this.Something”会做同样的事情，只是范围仅限于方法体。我想我可以看到你什么时候会使用哪种语法。如果您在构造函数或其他东西中需要它，可以使用“as self”，如果您在构造函数中不需要它，则可以使用另一个。

但是，即使我使用了“as self”，为什么还要使用“member this.Something”语法呢？如果我只写“member Something”，为什么它会给我一个错误？我错过了什么？

保重，克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T10:43:22.993

范围`as self`是整个类，而范围`this.Something`只是一个单独的方法。您通常不需要`as self`，因为使用`this.Something`就足够了。

关于为什么需要`this.`在成员声明中，我认为这是一个自然的选择，因为在 F# 类中，您通常也有 let 边界和静态方法。默认`self`设置会导致混淆和误用。

这是一个`as self`在[MSDN](http://msdn.microsoft.com/en-us/library/dd233205.aspx)中使用的示例，这在 IMO 中并不常见：

```
type MyClass2(dataIn) as self =
   let data = dataIn
   do
       self.PrintMessage()
   member this.PrintMessage() =
       printf "Creating MyClass2 with Data %d" data 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T13:29:42.437

听起来您已经掌握了全局“as xxx”和成员“yyy”之间的所有区别。实例绑定整理。所以我想你的答案必须是“设计”。

人们会争辩说，这种“按设计”的选择背后有一种深思熟虑的理性，但经过 4 年的 F# 编程，我迄今为止最喜欢的语言，我个人认为它在任何方面都没有多大帮助。

我怀疑该语言需要显式实例绑定到变量的真正原因是因为它更接近地反映了底层的 .NET CIL 实现。也就是说，像 C# 这样的语言将“this”作为一个特性绑定到类定义的实例。在底层，类的静态方法和实例方法都使用 Call 和 CallVirt 操作码以相同的方式调用，在实例方法的情况下，“this”的地址作为调用的第一个参数加载。

但我们当然已经冒险进入了品味和意见的领域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T22:00:52.797

我认为这根本不是重复。`self`对整个类的可见性是 F# 对主构造函数的“智能”编译的副产品。构造函数的参数/绑定可以隐式编译为本地和成员（类级别）字段。该`as identifier`语法仅有助于`this`在该突变上下文中进行引用。我冒昧地猜测，如果未使用，它会被编译掉。否则，您所做的只是将一个额外的引用存储`this`为成员字段（这在另一种语言中看起来很奇怪，例如 C#）。

# c# - c#面板图像只更新一半时间

> ID：12129284
> 
> 赞同：0
> 
> 时间：2012-08-26T10:12:13.053
> 
> 标签：c#, winforms

对于我的编程课，我们需要制作一个记忆匹配游戏。当玩家点击面板时，会显示一个图像。玩家点击两个面板，如果图像匹配，则将其删除，如果它们不同，则将其正面朝下。

我遇到的问题是只有第一个面板中的图像被显示，即使我使用同一行代码来显示两个面板中的图像，并使用 Thread.Sleep 在第二个图块之后暂停程序已被选中。我不明白为什么会这样，任何帮助将不胜感激。

```
 private void tile_Click(object sender, EventArgs e)
    {
        string tileName = (sender as Panel).Name;
        tileNum = Convert.ToInt16(tileName.Substring(5)) - 1;
        //figure out if tile is locked
        if (panelArray[tileNum].isLocked == false)
        {                 
            pickNum++;
            //although the following line of code is used to display the picture that is stored in the tile array
            //what is happening is that it will only display the picture of the first tile that has been picked.  
            //when a second tile is picked my program seems to ignore this line completely, any ideas?
             panelArray[tileNum].thisPanel.BackgroundImage = tiles[tileNum].tileImage;

            if (pickNum == 1)
            {                    
                pick1 = tileNum;                    
                panelArray[tileNum].isLocked = true;    
            }

            else
            {                    
                pick2 = tileNum;                  
                UpdateGameState();                   
            }
        }
    }

    private void UpdateGameState()
    {       
        Thread.Sleep(1500); 

        if (tiles[pick1].tag == tiles[pick2].tag)//compares tags to see if they match.
        {
            RemoveTiles();
        }
        else
        {
            ResetTiles();
        }

        pickNum = 0;
        guess += 1;
        guessDisplay.Text = Convert.ToString(guess);

        if (correct == 8)
        {
            CalculateScore();
        }            
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T11:24:00.410

尝试这个：

```
(sender as Panel).BackgroundImage = tiles[tileNum].tileImage; 
```

您必须确保您的 tile_Click 方法与两个面板相关联...

# c# - 从本地网络连接到数据库

> ID：12129285
> 
> 赞同：0
> 
> 时间：2012-08-26T10:12:22.183
> 
> 标签：c#, sql-server-2005

我与本地网络共享两台计算机

*   计算机1：Windows XP，ip = 192.168.0.1
*   计算机2：Windows 7，ip = 192.168.0.2

现在我想通过一个 win 应用程序连接到一个 SQL Server `computer1`2005`copmuter 2` 数据库

我使用下面的连接字符串并检查`Surface Area Configuration for Services and Connections`但我得到一个错误：

> *建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。找不到服务器或无法访问服务器。请验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。SQL 网络接口，错误：26 - 定位服务器/指定实例时出错*

连接字符串：

```
Data Source=192.168.0.1;Initial Catalog=DBName;Integrated Security=True 
```

和

```
Data Source=192.168.0.1;Initial Catalog=DBName;Integrated Security=false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T10:25:15.883

正如您的错误消息所述，它可能是与网络相关的错误。你的服务器真的有 IP 192.168.0.1 吗？它是否接受传入连接？您是否运行防火墙（例如阻止传入连接的 Windows 防火墙）？

也可能是您没有将 sql server 配置为接受远程连接，而只接受来自 localhost 的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T10:38:10.487

```
Data Source=192.168.0.1;Initial Catalog=DBName;Integrated Security=false 
```

在这里，您必须指定**Uid= 您的用户名**e 和 **Password=password**。因为您正在使集成安全=假

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T10:58:16.213

正如 dontomaso 指出的那样，检查服务器上是否启用了“允许远程连接”选项。如果我记得，它默认禁用。

（不能直接发图片，这里是链接）

[允许远程连接选项屏幕截图](http://i.stack.imgur.com/KKBRS.png)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-09-18T13:18:41.667

如果您从另一台机器连接，请检查配置：

*   SQL 服务帐号：NetworkService
*   确保 SQL server 运行 SQL Browser 服务
*   在协议中：

    *   命名管道：设置Enableb（连接电脑安装SQL用户名）
    *   TCP/IP：Enableb 设置（使用IP_dia 局域网的机器IP 地址连接）-> 2 这部分Enableb 全部，自己想用的方式也行。
    *   Shared Momory: **DISABLED**选择，如果这部分是 ENABLEB 则不能通过 LAN 或 Internet 连接。

        ```
        (string strCon = "Data Source=192.168.0.1,1433;Initial Catalog=DatabaseName;User ID=sa;Password=sa";) 
        ```

要通过 Internet 连接，请在此处获取 Internet 上的网络 IP 地址。

# mysql - 存储过程而不是 SELECT / INSERT / UPDATE？

> ID：12129287
> 
> 赞同：0
> 
> 时间：2012-08-26T10:12:51.633
> 
> 标签：mysql, performance, stored-procedures

我已经大量使用触发器来避免不必要的 PHP 代码，但实际上还没有使用很多存储过程。

我在问自己，将所有 SELECT / INSERT / UPDATE 移动到存储过程中是否真的有意义，并且没有实际的 SQL（除了事务和此类东西），而只有过程。

这真的有意义吗？我会面临什么缺点？

通过阅读 MySQL Doc，我发现了这一点：

> “存储的例程可以提供更好的性能，因为需要在服务器和客户端之间发送的信息更少。**权衡是这确实增加了数据库服务器的负载，因为更多的工作是在服务器端完成的，而在服务器端完成的工作更少**“ **_**

好吧，如果我将存储过程主要用作我无论如何都会执行的 SQL 代码的包装器，那真的会对数据库服务器产生很大的影响吗？

主要是，我想知道这是否真的是一个好主意，以及这样做我可能面临哪些缺点。

谢谢您的帮助

# mysql - SQL 优化以获得随机行

> ID：12129291
> 
> 赞同：2
> 
> 时间：2012-08-26T10:13:33.287
> 
> 标签：mysql

我在用

```
SELECT * 
  FROM picture 
 INNER JOIN user ON picture.fbid = user.fbid 
 WHERE hide = 0 
   AND userhide = 0 
 ORDER BY gender, RAND( ) LIMIT 0 , 1 
```

这会执行并为我提供性别为女性的随机行图片的链接。执行大约需要 15 秒。

如何更改 SQL 以便快速计算？我应该在图片表中添加一个性别列，这样它就不会合并两个表然后得到一个随机行，还是有其他方法来优化 SQL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T10:35:53.850

**[编辑]**你可以对 MySQL 存储过程做同样的事情，我只是在这里编码：[http ://sqlfiddle.com/#!2/d0e6a/2](http://sqlfiddle.com/#!2/d0e6a/2)

（注意：没有在每个查询中完成计数会减轻负载，否则在这种特殊情况下它可能会更慢，我建议保留您的查询，但要进行索引优化。或者检查一下：[Is cross-table indexing可能吗？](https://stackoverflow.com/questions/8509026/is-cross-table-indexing-possible)）

**[编辑 2]**这是另一个使用每个表中平均 50000 个随机条目进行索引优化的示例：[http](http://sqlfiddle.com/#!2/bfbe1/1) ://sqlfiddle.com/#!2/ bfbe1/1 查询时间不到 100 毫秒（没有索引我让它运行几分钟，仍然没有结果！）。[您可以使用CREATE INDEX](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)在现有表上创建索引

这是我使用来自 PHP 脚本的 2 个查询的解决方案：

```
$sql="SELECT COUNT(*) 
  FROM picture 
 INNER JOIN user ON picture.fbid = user.fbid 
 WHERE hide = 0 
   AND userhide = 0
   AND gender = 'female' 
   GROUP BY gender";

$result=mysql_query($sql);
$row=mysql_fetch_array($result);

$sql="SELECT * 
      FROM picture 
      INNER JOIN user ON picture.fbid = user.fbid 
      WHERE hide = 0 
      AND userhide = 0
      AND gender = 'female' 
      LIMIT FLOOR(RAND()*$row['COUNT(*)']),1";

$result=mysql_query($sql);
$picture=mysql_fetch_array($result); 
```

这应该使您的查询速度更快。

此外，如果您的表很大（我猜是这种情况，因为查询需要 15 秒），如果条件/连接字段被索引会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T14:56:37.440

我建议在`picture.fbid = user.fbid`此创建一个 INDEX 将有助于加快`JOIN`桌面速度。

更多Mysql特定信息在这里：[http ://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)

# c# - Binding-Source CancelEdit() 不适用于实体框架中保存的对象

> ID：12129293
> 
> 赞同：0
> 
> 时间：2012-08-26T10:14:38.003
> 
> 标签：c#, entity-framework, bindingsource

我的应用程序是 C# winform。

我使用实体框架将数据保存在 sql 数据库中，但是当我想在用户更改数据但不想更新当前对象时编辑它们时绑定源`CancelEdit()`不起作用。

我的绑定源数据源是一个实体框架表。

表单加载时我的代码：

```
myEntity contex = new myEntity();
myBindingSource.DataSource = contex.myTable; 
```

取消按钮的代码：

```
myBindingSource.CancelEdit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:44:31.307

尝试这个：

将每个绑定的 DataSourceUpdateMode 设置为 OnValidation，然后将包含表单的 AutoValidate 属性设置为 Disable。当您在窗体上的控件之间更改焦点时，这可以防止绑定。然后在“取消”或“保存”按钮的 Click 事件中验证表单的输入

阅读更多： [使用 WriteValue 进行手动数据绑定](https://stackoverflow.com/questions/1638501/manual-data-binding-using-writevalue)

# c++ - C++ 11 std::chrono::duration 示例

> ID：12129296
> 
> 赞同：3
> 
> 时间：2012-08-26T10:15:11.113
> 
> 标签：c++, c++11, duration

我编写了一个示例函数来了解`std::chrono::duration`最近作为 C++11 标准的一部分引入的行为。

```
void exampleForDuration()
{
    seconds Sec(minutes(1));

    cout<<"1 second is "<<duration_cast<nanoseconds>(seconds(1)).count()<<" nanoseconds"<<endl;
    cout<<"1 minute is "<<Sec.count()<<" seconds"<<endl;
    cout<<"1 second is "<<duration_cast<duration<int,centi>>(seconds(1)).count()<<" centiseconds"<<endl;
    cout<<"100 second is "<<duration_cast<minutes>(seconds(100)).count()<<" minute."<<endl;
    cout<<"Waiting for 10 seconds...";
    auto start=system_clock::now();
    this_thread::sleep_for(seconds(10));
    cout<<"Done."<<endl;
    auto end=system_clock::now();
    auto waitedFor=end-start;
    cout<<"Waited for "<<duration_cast<seconds>(waitedFor).count()<<" seconds"<<endl;
    printCurrentDateTime();
} 
```

输出：

> ```
> 1 second is 1000000000 nanoseconds
> 1 minute is 60 seconds
> 1 second is 100 centiseconds
> 100 second is 1 minute.                -------> 1)
> Waiting for 10 seconds...Done.         -------> 2)
> Waited for 10 seconds 
> ```

当我运行上述函数时，程序在打印 1) 之后等待了 10 秒，而不是在打印 2) 之后等待了 10 秒。我希望程序在打印“Waiting for 10 seconds...”后等待，然后等待，然后打印“Done”。但它打印“100 秒是 1 分钟”。然后等待 10 秒，然后是其余的输出。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-26T10:31:18.347

如果您更改它是否可以正常工作

```
cout<<"Waiting for 10 seconds..."; 
```

至

```
cout<<"Waiting for 10 seconds..." << endl; 
```

可能是它没有冲洗，所以它还没有打印那行。

# android - 片段中的 ViewPager 不起作用

> ID：12129299
> 
> 赞同：2
> 
> 时间：2012-08-26T10:15:50.153
> 
> 标签：android, android-fragments, android-viewpager, actionbarsherlock, viewpagerindicator

所以我有一个带有 3 个 actionbar.Tabs 的应用程序，可以在 3 个片段之间切换。在其中两个片段中，我需要一个在大约 6 个 ListView 之间切换的 ViewPager。问题是我试图让它工作的片段显示页面只显示黑色......总是......我已经确认我可以显示其他东西（我试着让我的 SherlockFragment 成为 SherlockListFragment 我可以显示数据）。所以问题仅限于我的适配器和我的 ViewPager，以及将它们放置到位的代码。哦，我还应该提到我正在使用 ActionBarSherlock 和（试图）ViewPagerIndicator。我已经正确导入（最后）。

所以这是我的片段的代码：

```
import vt.finder.schedule.Schedule;
import android.os.Bundle;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.LinearLayout;
import com.actionbarsherlock.app.SherlockFragment;
import com.viewpagerindicator.TitlePageIndicator;

public class FreeTimeFragment extends SherlockFragment {

//~Data Fields--------------------------------------------
/**
 * Adapter used for swiping between days.
 */
private ViewPager dayPage;
/**
 * The DayAdapter that is used to switch between course Lists for each day for the listView.
 */
private DayAdapter dayAdapt;

//~Constructors--------------------------------------------
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    View view = onCreateView(getLayoutInflater(savedInstanceState), null, savedInstanceState);

    LinearLayout layout = (LinearLayout) view.findViewById(R.id.linear_layout);
    dayPage = (ViewPager) layout.findViewById(R.id.free_time_day_pager);

    Schedule freeTime = getArguments().getParcelable("freeTime");

    dayAdapt = new DayAdapter(freeTime);
    //Bind the title indicator to the adapter
    TitlePageIndicator titleIndicator = (TitlePageIndicator) layout.findViewById(R.id.titles);
    dayPage.setAdapter(dayAdapt);
    titleIndicator.setViewPager(dayPage);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)     {

    View view = inflater.inflate(R.layout.free_time_fragment_layout, container, false);
    return view;
}
} 
```

这是我的适配器的代码：

```
import vt.finder.schedule.Course;
import vt.finder.schedule.Schedule;
import android.content.Context;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;

/**
 * PageAdapter class, provides functionality for switching between days of
 * the week.
 * 
 *
 */
public final class DayAdapter extends PagerAdapter {

    //~Data Fields----------------------------------------//
    /**
     * The list adapter that the current list is being handed to.
     */
    private Schedule schedule;

    //~Constructors---------------------------------------//
    public DayAdapter(Schedule theSchedule) {

        schedule = theSchedule;
    }

    //~Methods--------------------------------------------//
    @Override
    public Object instantiateItem(ViewGroup container, int index) {

        ListView view = new ListView(container.getContext());

        view.setAdapter(new ArrayAdapter<Course>(container.getContext(), 
                        R.layout.list_view_child, schedule.getDay(curIndex).getList()));

        ((ViewPager) container).addView(view, 0);

        return container;
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {

        ViewPager pager = (ViewPager) container;
        View view = (View) object;
        pager.removeView(view);
    }

    /**
     * Gets the pageTitle, which is the name of the day that is at position.
     * 
     * @param position the index of the day selected.
     * @return the name of the day the index refers to.
     */
    @Override
    public CharSequence getPageTitle(int position) {

        return schedule.getDay(position).getThisDay();
    }

    @Override
    public int getCount() {

        return 6;
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {

        return view == (View) object;
    }
} 
```

这是我的片段布局的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:weightSum="1"
    android:id="@+id/linear_layout">

    <com.viewpagerindicator.TitlePageIndicator
        android:id="@+id/titles"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1.09" />

    <android.support.v4.view.ViewPager
        android:id="@+id/free_time_day_pager"
        android:layout_width="fill_parent"
        android:layout_height="284dp" />

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="match_parent"
        android:layout_height="52dp"
        android:layout_weight="0.07" >

        <Button
            android:id="@+id/getScheduleButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:onClick="getScheduleClicked"
            android:text="@string/get_schedule" />

        <Button
            android:id="@+id/compareWithFriends"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/getScheduleButton"
            android:layout_alignParentRight="true"
            android:layout_toRightOf="@+id/getScheduleButton"
            android:onClick="compareWithFriendsClicked"
            android:text="@string/compare_with_a_friend" />

    </RelativeLayout>

</LinearLayout> 
```

而且我想我应该简单地提一下，Schedule 包含 Day 对象，其中包含要显示的课程列表。所有这些代码都绝对有效，我已经使用了几个月。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T12:11:58.690

嘿，我自己想通了，我正在使用 ViewPager 和 FragmentPagerAdapter 制作图库..！

我加了

```
@Override
        public void destroyItem(ViewGroup container, int position, Object object) {
            // TODO Auto-generated method stub

                FragmentManager manager = ((Fragment) object).getFragmentManager();
                FragmentTransaction trans = manager.beginTransaction();
                trans.remove((Fragment) object);
                trans.commit();

            super.destroyItem(container, position, object);
        } 
```

到我的 FragmentPagerAdapter 删除视图以避免开销。！:-)

# scala - 如何在 HUET 拉链内向上导航

> ID：12129300
> 
> 赞同：9
> 
> 时间：2012-08-26T10:15:50.140
> 
> 标签：scala, haskell, functional-programming, ocaml, zipper

我正在阅读[Huet Zipper](http://www.st.cs.uni-saarland.de/edu/seminare/2005/advanced-fp/docs/huet-zipper.pdf)，我无法理解 go_up 方法：

```
let go_up (Loc(t,p)) = match p with
Top -> failwith "up of top"
| Node(left,up,right) -> Loc(Section((rev left) @ (t::right)),up);; 
```

其他类型定义的完整来源可以在链接的论文中找到，如果您了解 Zipper，我认为回答我的问题并不重要。

根据我对 Zipper 的了解，a`Location`包含当前节点及其`Path`或所谓的 `Context`. 拥有除了当前节点及其子节点之外的`Path`所有内容，或者有些人称之为`a one-hole-context`。

好吧，将焦点上移，意味着当前节点的父节点将成为新的当前节点。但在这里，作者连接了当前节点及其兄弟节点。但这不是父节点，只是父节点的子节点。在 Scala 中实现我自己的 moveUp 方法时，我被困在这里，并且无法正确表示当前节点的父节点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T10:45:54.443

这里的拉链适用于以下树数据类型：

```
type tree =
   Item of item
 | Section of tree list;; 
```

论文中的路径数据类型是这样的：

```
type path =
   Top
 | Node of tree list * path * tree list;; 
```

`Node`包含三个组件。位于孔左侧的父节点的子节点 ( `left`)、进一步向上的路径 ( `up`) 以及位于孔右侧的父节点的子节点 ( `right`)。

向上移动时，为了产生实际的父节点，我们必须在和`t`之间的正确位置插入旧树。由于左边的孩子是以相反的顺序存储的，我们必须先将它们反转。`left``right`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T16:36:02.950

> 作者连接当前节点及其兄弟节点。但这不是父节点，只是父节点的子节点

根据 kosmikus 引用的论文定义，非叶节点`Section`仅由其子节点定义。如果您添加了附加信息，则必须将其添加到拉链的定义中。

# javascript - Jeditable - 抑制元素内部的点击

> ID：12129302
> 
> 赞同：0
> 
> 时间：2012-08-26T10:16:00.320
> 
> 标签：javascript, jquery, jeditable

我的页面中有一个可使用 jEditable 编辑的元素。

我正在寻找但找不到实现方法的行为是我希望该字段在单击事件上变得可编辑，并且我希望它**仅**在模糊事件上提交。

原因是我希望用户能够进行鼠标操作，例如双击以选择全部和部分选择。目前这是不可能的，因为在 jedtiable 创建的表单中的每次点击都会提交它。

这是我称之为 jeditable 的代码：

```
$('#element').editable(function(value, settings){
    return(value);
  },{
    onblur: 'submit',
    cssclass: 'editing',
    event: 'startedit'
  }
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:05:32.153

这可能是您正在寻找的[http://jsfiddle.net/PB9kx/1/](http://jsfiddle.net/PB9kx/1/)吗？

1.  进入时不提交
2.  提交模糊

# java - Web服务肥皂请求的默认超时？

> ID：12129308
> 
> 赞同：3
> 
> 时间：2012-08-26T10:17:01.913
> 
> 标签：java, web-services, jakarta-ee

有人能告诉我soap webservice调用的默认超时时间是多少吗？

```
 ((BindingProvider) Port).getRequestContext().put(
            BindingProviderProperties.CONNECT_TIMEOUT,
            30);
    ((BindingProvider) Port).getRequestContext().put(
            BindingProviderProperties.REQUEST_TIMEOUT,
            30); 
```

我当然可以手动设置它，但是如果我省略它，默认值是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T14:48:44.703

为什么不使用 CONNECT_TIMEOUT 属性打印出 this 的值呢？

> System.getProperty(BindingProviderProperties.CONNECT_TIMEOUT)

# matlab - 无法在 MATLAB 中的箱线图上绘制一条线

> ID：12129309
> 
> 赞同：2
> 
> 时间：2012-08-26T10:17:37.407
> 
> 标签：matlab, statistics, plot, boxplot

我正在绘制一个箱线图，所以我在 MATLAB 中使用以下代码。我对matlab很陌生。

```
for k=1:N    % running through k categories in the plot 
  patch(...);   % The box 

  % now drawing the whiskers and percentiles 
  line(...); % the median
  line(..); % the 25th percentile 
  line(..); % the 75th percentile
  line(...); % the max
  line(..); % the min 
end

% THIS LINE ONLY IS DISPLAYED NOT THE BOX-PLOT, WHY?? 
% A poly-line passing median of each box 
plot([1:N]-0.5, Ys, '-Xr', 'LineWidth', 4, 'MarkerSize', 12); 
```

仅显示最终语句中绘制的线，而不显示箱线图当我注释掉该`plot`语句时，将显示箱线图。

但是，我怎样才能让它们在另一个之上显示呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T10:26:57.187

我不是 100% 确定这是否会起作用，因为我从未使用过箱形图，但为了防止在您通常使用`hold on`命令的图形上覆盖多个图。尝试`hold on`在您的最终情节陈述之前添加该行

# php - 仅当 2 列（持续时间和分数）不同时，如何在 mysql 中增加排名？

> ID：12129310
> 
> 赞同：2
> 
> 时间：2012-08-26T10:17:37.117
> 
> 标签：php, mysql, sql, ranking

**细节**

我结合了以下表格

测试结果

```
--------------------------------------------------------------------
| index | uid|         start         |          stop        | score| 
--------------------------------------------------------------------
|   1   | 23 |   2012-06-06 07:30:20 | 2012-06-06 07:30:34  | 100  |
--------------------------------------------------------------------
|   2   | 34 |   2012-06-06 07:30:21 | 2012-06-06 07:30:40  | 100  |
-------------------------------------------------------------------- 
```

用户表

```
------------------------------
| id  |       username       |  
------------------------------
| 23  |    MacGyver’s mum    | 
------------------------------
| 34  |       Gribblet       | 
------------------------------ 
```

使用这个 sql

```
SELECT a.username, b.duration, b.score
FROM usertable AS a
JOIN    (SELECT `uid`, `score`,
TIMESTAMPDIFF( SECOND, start, stop ) AS `duration`
FROM `testresults`
WHERE `start` >= DATE(NOW())
ORDER BY `score` DESC, `duration` ASC
LIMIT 100) AS b
ON a.id = b.uid 
```

问题是`I want to rank the results`。我认为在 sql 中执行此操作可能比在 php 中更容易/更快，因此基于[http://code.openark.org/blog/mysql/sql-ranking-without-self-join](http://code.openark.org/blog/mysql/sql-ranking-without-self-join)这就是我尝试过的

```
SELECT a.username, b.duration, b.score, COUNT(DISTINCT b.duration, b.score) AS rank
FROM usertable AS a
JOIN    (SELECT `uid`, `score`,
TIMESTAMPDIFF( SECOND, start, stop ) AS `duration`
FROM `testresults`
WHERE `start` >= DATE(NOW())
ORDER BY `score` DESC, `duration` ASC
LIMIT 100) AS b
ON a.id = b.uid 
```

但我没有回到预期的排名。它只返回一行。

**问题**

我究竟做错了什么？只有在持续时间和分数唯一的情况下，如何才能提高排名？

**更新1**

使用 bdenham 的“慢速方法”对我有用，但第二种方法没有。我真的不明白“快速方法”中发生了什么。我已经发布了我正在使用的数据和结果表。你会看到排名被搞砸了。

```
 -------------------------------------------------------------------
| index | uid|         start         |          stop        | score| 
--------------------------------------------------------------------
|   1   | 32 |  2012-08-27 05:47:18  |  2012-08-27 05:47:36 |  100 | 18s
|   2   | 32 |  2012-08-27 05:50:36  |  2012-08-27 05:50:42 |   0  |  6s
|   3   | 32 |  2012-08-27 05:51:18  |  2012-08-27 05:51:25 |  100 |  7s
|   4   | 32 |  2012-08-27 05:51:30  |  2012-08-27 05:51:35 |   0  |  5s
|   5   | 32 |  2012-08-27 05:51:39  |  2012-08-27 05:51:44 |   50 |  5s
--------------------------------------------------------------------

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
| username | score | duration | @prevScore:=@currScore | @prevDuration:=@currDuration | @currScore:=r.score | @currDuration:=timestampdiff(second,r.start,r.stop) |rank |
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|   bob    |  100  |    7     |     [BLOB - 1B]        |         [BLOB - 1B]          |     100             |                                7                    |  3  |
|   bob    |  100  |    18    |     [BLOB - 0B]        |         [BLOB - 0B]          |     100             |                               18                    |  1  |
|   bob    |   50  |    5     |     [BLOB - 1B]        |         [BLOB - 1B]          |      50             |                                5                    |  5  |
|   bob    |   0   |    5     |     [BLOB - 3B]        |         [BLOB - 1B]          |       0             |                                5                    |  4  |
|   bob    |   0   |    6     |     [BLOB - 3B]        |         [BLOB - 2B]          |       0             |                                6                    |  2  |
------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T15:29:27.230

您问题中链接中的两种方法都适用于 MySQL 5.5.25。这是[SQL 小提琴](http://www.sqlfiddle.com/#!2/d630e/1)。但是我无法使这些方法适应您稍微复杂的模型。您有一个额外的连接，而且您的排名基于两列而不是一列。

您的尝试不遵循任何一种方法，但我怀疑您正在尝试遵循缓慢的“传统”解决方案。正如其他人指出的那样，该解决方案需要您完全缺乏的自我加入和分组。

这是我尝试使慢速方法适应您的模型的失败尝试。问题是 MySQL 只保留为给定等级找到的最后一行的用户名。从结果中丢弃具有相同等级的较早行。该查询不会在大多数数据库上运行，因为 GROUP BY 不包括用户名。MySQL 对 GROUP BY 有非标准规则。我不明白为什么您的中等复杂模型不起作用，但简单的链接模型确实起作用。我认为无论如何缺少 GROUP BY 条款是一个坏主意。

```
select u.username,
       r1.score,
       timestampdiff(second,r1.start,r1.stop) duration,
       count( distinct concat(r2.score,',',timestampdiff(second,r2.start,r2.stop)) ) rank
  from testresults r1
  join testresults r2
    on r2.score>r1.score
     or( r2.score=r1.score
         and
         timestampdiff(second,r2.start,r2.stop)<=timestampdiff(second,r1.start,r1.stop)
       )
  join usertable u
    on u.id=r1.uid
 where r1.start>=date(now())
   and r2.start>=date(now())
 group by r1.score, duration
 order by score desc, duration asc limit 100 
```

这是对慢速方法的修复。它首先计算每个唯一分数/持续时间对的排名，然后将该结果与每个测试结果连接起来。这行得通，但它甚至比原来的破坏方法还要慢。

```
select username,
       r.score,
       r.duration,
       r.rank
  from testresults tr
  join usertable u
    on u.id=tr.uid
  join (
          select r1.score,
                 timestampdiff(second,r1.start,r1.stop) duration,
                 count( distinct concat(r2.score,',',timestampdiff(second,r2.start,r2.stop)) ) rank
            from testresults r1
            join testresults r2
              on r2.score>r1.score
               or( r2.score=r1.score
                   and
                   timestampdiff(second,r2.start,r2.stop)<=timestampdiff(second,r1.start,r1.stop)
                 )
           where r1.start>=date(now())
             and r2.start>=date(now())
           group by r1.score, duration
       ) r
    on r.score=tr.score
   and r.duration=timestampdiff(second,tr.start,tr.stop)
 where tr.start>=date(now())
 order by rank limit 100 
```

这是我将快速方法应用于您的模型的失败尝试。该方法不起作用，因为所选变量是在排序操作之前计算的。同样，我不明白为什么链接中的简单模型有效，但您的模型无效。

```
select u.username,
       r.score,
       timestampdiff(second,r.start,r.stop) duration,
       @prevScore:=@currScore,
       @prevDuration:=@currDuration,
       @currScore:=r.score,
       @currDuration:=timestampdiff(second,r.start,r.stop),
       @rank:=if(@prevScore=@currScore and @prevDuration=@currDuration, @rank, @rank+1) rank
  from testresults r
  join usertable u
    on u.id=r.uid
  cross join (select @currScore:=null, @currDuration:=null, @prevScore:=null, @prevDuration:=null, @rank:=0) init
 where r.start>=date(now())
 order by score desc, duration asc limit 100 
```

这是快速方法的“固定”版本。但它依赖于子查询中排序行的顺序。一般来说，查询不应该依赖于行的顺序，除非有明确的 SORT 操作。外部查询未排序，即使是，我也不知道变量是在外部排序之前还是之后计算的。

```
select username,
       score,
       duration,
       @prevScore:=@currScore,
       @prevDuration:=@currDuration,
       @currScoure:=score,
       @currDuration:=duration,
       @rank:=if(@prevScore=score and @prevDuration=duration, @rank, @rank+1) rank
  from (
          select u.username,
                 r.score,
                 timestampdiff(second,r.start,r.stop) duration
            from testresults r
            join usertable u
              on u.id=r.uid
           where r.start>=date(now())
           order by score desc, duration asc limit 100
       ) scores,
       (
          select @currScore:=null, 
                 @currDuration:=null, 
                 @rank:=0
       ) init 
```

我认为如果您只选择没有排名的结果，按分数和持续时间排序，您将获得同样好的表现。由于结果已经排序，您的 PHP 可以有效地计算排名。您的 PHP 可以将 rank 初始化为 0，并将 prev score 和 duration 初始化为 null。然后将每一行与之前的值进行比较，如果有差异则增加排名。让 PHP 对排序结果进行排名的最大优势是它应该始终有效，无论数据库引擎的品牌或版本如何。它仍然应该很快。

这是显示所有 4 个查询的[SQL Fiddle 。](http://www.sqlfiddle.com/#!2/7431b/17)我修改了 WHERE 子句，以便查询在任何日期都可以继续工作。

# php - 从百分比编码 URL 参数获取正确的 UTF-8 字符

> ID：12129314
> 
> 赞同：0
> 
> 时间：2012-08-26T10:18:24.983
> 
> 标签：php, utf-8, character-encoding

我在使用可怕的 UTF-8 字符编码时遇到了一些麻烦！这让我发疯，无论我采用哪种方式或遵循多少在线指南，我都无法让它返回所需的结果。这是发生了什么：

*   我的整个网站使用一个简单的 UTF-8 编码的文本文件数据库，它正确地显示了各种特殊字符，拉丁文、阿拉伯文、日文，只要你说出它的名字，它们都可以正确显示，但有一个例外：

*   当用户使用我网站上的“搜索”输入框时，我使用 $search = $_REQUEST['search']; 在结果页面上获取输入数据并相应地显示结果。当用户在搜索框中插入特殊字符时，他们会在 URL 中获得“百分比编码”（例如，“ï”变成“%E3%AF”）。在实际网站中显示 $string 时，任何特殊字符都会显示为 �（带问号的黑色菱形）。

*   我已经尝试了这里所说的一切[http://malevolent.com/weblog/archive/2007/03/12/unicode-utf8-php-mysql/](http://malevolent.com/weblog/archive/2007/03/12/unicode-utf8-php-mysql/)除了 header()。我已经在我的 head 部分使用 http-equiv 元将字符集设置为 UTF-8，但是由于某种原因，每当我将其设置为 header() 时，我的 PHP 样式表就会停止工作（并且字符问题仍然存在）。也许这是一个线索？

*   我也尝试过 urldecode 和 rawurldecode ，但它们并没有改变任何东西。

*   请记住，特殊字符在站点的其他地方正确显示，只有 $search 字符串出现此问题。作为旁注，即使字符没有正确显示，我的搜索引擎在过滤结果时确实正确解释了特殊字符。这让我明白特殊字符实际上存在并且正确编码，但这只是使用正确的字符集使其正确可视化的问题。然而......一切似乎都是UTF-8。

老实说，我对此感到非常困惑，以至于这个问题似乎也令人困惑，而且我提供给您的信息也可能结构不完善，因此我深表歉意，并会尝试为任何问题提供更详细的信息。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T11:44:51.747

确保没有任何功能会改变您的`$_REQUEST`. 有些函数不知道特殊编码。

最好的调查方法是检查变量更改前后的状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T11:58:10.590

关于 utf-8 字符串操作，我想再补充一点。

处理 utf-8 字符串时，始终使用多字节字符串函数。

使用 `mb_strtolower`代替`strtolower()`

[http://php.net/manual/en/ref.mbstring.php](http://php.net/manual/en/ref.mbstring.php)。

# php - 将问号（？）插入数据库

> ID：12129315
> 
> 赞同：-1
> 
> 时间：2012-08-26T10:18:44.827
> 
> 标签：php, mysql, database, unicode, insert

> **可能重复：**
> [iPhone 表情符号插入 MySQL 但变为空白值](https://stackoverflow.com/questions/9509668/iphone-emoticons-insert-into-mysql-but-become-blank-value)
> [在数据库中插入 Unicode 字符](https://stackoverflow.com/questions/12123895/insert-an-unicode-character-in-databsae)

我正在尝试在数据库中插入一个 Unicode 字符，例如：（），但是当我在 textarea 中插入那个（）时，它会在数据库中添加一个问号（？）？

**数据库**：_

```
CREATE TABLE `t1` (
  `id` int(4) NOT NULL auto_increment,
  `msg` varchar(500) NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8_mb4 AUTO_INCREMENT=7 ; 
```

`insert.php`添加数据：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>my page</title>
    </head>

    <body>
    <form id="form1" name="form1" method="post" action="insert-ok.php">
      <p>
        <label for="textarea"></label>
        <textarea name="textarea" id="textarea" cols="45" rows="5"></textarea>
      </p>
      <p>
        <input type="submit" name="button" id="button" value="Submit" />
      </p>
    </form>
    </body> 
```

`insert-ok.php`插入和查看数据：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>my data</title>
</head>

<body>
<?php 
$con = mysql_connect("localhost","root","4530");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
  mysql_query("set names 'utf8'"); 
mysql_select_db("test", $con); 
$post= $_POST['textarea'];
$sql = "insert into t1 values('$id','$post')";
mysql_query($sql,$con);

$result=mysql_query("select * from t1 ");

while($row = mysql_fetch_array($result))
{

    echo $row['msg'].'<br>';
}
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T10:28:47.577

`SET NAMES utf8mb4 COLLATE utf8mb4_unicode_ci`

*   资料来源： http: [//mathiasbynens.be/notes/mysql-utf8mb4](http://mathiasbynens.be/notes/mysql-utf8mb4)

另一件事是（如[文档所述](http://www.php.net/manual/en/mysqli.overview.php)）已弃用`mysql_`不支持字符集。

# c - 使用 C 编写带有套接字的负载均衡器

> ID：12129320
> 
> 赞同：0
> 
> 时间：2012-08-26T10:20:00.097
> 
> 标签：c, http, sockets, web

我正在尝试为 3 个 HTTP 服务器{hosts="web1", "web2", "web3"}{load balancer ports="8081","8082","8083"} 创建一个负载平衡器。

此负载均衡器将 HTTP 请求随机传输到其中一台服务器，然后将请求结果返回给发送者。

我从套接字开始，所以如果有人能告诉我这个程序会是什么样子？

如果不清楚，我准备提供更多细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T10:43:00.473

您需要确定请求是否是有状态的，这意味着 - 请求属于有效会话，然后此类请求应始终路由到同一服务器以避免失败和不一致。可以根据负载平衡算法将新请求路由到任何服务器，例如。循环或负载最少的服务器等。

# r - 在 igraph 中执行聚类算法时修复多个节点坐标

> ID：12129321
> 
> 赞同：3
> 
> 时间：2012-08-26T10:20:06.477
> 
> 标签：r, igraph

想知道以下是否可能：

目前，我在图中有一个节点子集（图 A），它属于另一个单独且更大的图（图 B）。

在图 A 上运行布局生成算法时，我想保留与该节点子集有关的图 B 中的布局。可以是任何布局算法。

```
 layout.circle(graph, params)
 layout.sphere(graph, params)
 layout.fruchterman.reingold(graph, ..., dim=2, params)
 layout.kamada.kawai(graph, ..., dim=2, params)
 layout.spring(graph, ..., params)
 layout.reingold.tilford(graph, ..., params)
 layout.fruchterman.reingold.grid(graph, ..., params)
 layout.lgl(graph, ..., params)
 layout.graphopt(graph, ..., params=list())
 layout.mds(graph, dist=NULL, dim=2, options=igraph.arpack.default)
 layout.svd(graph, d=shortest.paths(graph), ...) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:58:01.097

您可以使用`minx`、`maxx`和`miny`或的`maxy`参数`layout.fruchterman.reingold()`来`layout.kamada.kawai()`完全修复某些顶点。这些参数指定坐标的特定于顶点的下限和/或上限。

对于要修复的顶点，将它们精确设置为要修复的值，并将其他顶点设置`minx`为一些小的负值（`-Inf`可能也可以），并设置`maxx`为一些大的值，（再次，也许`Inf`也可以） .

您可能需要使用`rescale=FALSE`参数 in`plot.igraph()`来避免重新调整第一个和第二个图形的完整布局。

### 编辑：

从手册：

> ' `minx`' 如果不是 ' `NULL`'，那么它必须是一个数值向量，它为`x`顶点的 ' ' 坐标提供下边界。向量的长度必须与图中的顶点数匹配。
> 
> ' `maxx`' 类似于 ' `minx`'，但给出了上限。

例如：

```
g <- graph.star(10, center=1)

minx <- rep(-Inf, vcount(g))
maxx <- rep( Inf, vcount(g))
minx[1] <- 0
maxx[1] <- 0
lay <- layout.fruchterman.reingold(g, minx=minx, maxx=maxx, miny=minx, maxy=maxx)

plot(g, layout=lay) 
```

将第一个顶点固定为 (0,0) （可以通过重新缩放来修改，以避免重新缩放，使用`rescale=FALSE`并`plot()`设置绘图限制）。

![在此处输入图像描述](../Images/1b0e2d28ba1e75de850821d90647c514.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T10:30:18.380

igraph 中的布局定义为（节点数）乘以 2 的矩阵，其中第一列表示 x 坐标（任意比例），第二列表示 y 坐标。您可以存储任何这些函数的结果以获取此矩阵，然后`layout`在绘制另一个图形时将其传递给参数。

```
library("igraph")

# A 3-node network:
g <- graph.adjacency(matrix(1,3,3))

# Obtain a layout:
l <- layout.circle(g)

# A different 3-node network:
g2 <- graph.adjacency(matrix(0,3,3))

# Plot second network with layout based on first network:
plot(g2,layout=l) 
```

# 编辑

如果你有一个图的子集，你可以简单地索引这个矩阵。例如：

```
# A 3-node network:
g <- graph.adjacency(matrix(1,3,3))

# Obtain a layout:
l <- layout.circle(g)

# A 2-node subset:
g2 <- graph.adjacency(matrix(1,2,2))

# Plot second network with layout based on first network:
plot(g2,layout=l[1:2,]) 
```

# positioning - css以位置居中

> ID：12129322
> 
> 赞同：0
> 
> 时间：2012-08-26T10:20:17.857
> 
> 标签：positioning, center, css

我有一个以页面为中心的绝对定位 div 示例：

**HTML**

```
<div id="test1"><img src="http://www.interactivepixel.net/images/i01.jpg" width="500" height="333"/></div> 
```

**CSS**

```
#test1{
   position:absolute;
   top:50%;    
   left:50%;
   width:500px;
   height:333px;
   margin-top:-166px;
   margin-left:-250px;
} 
```

[http://jsfiddle.net/ktFuN/](http://jsfiddle.net/ktFuN/)

这工作得很好，直到我缩小浏览器窗口以至于我得到滚动条，然后即使使用滚动条我失去了图像的左侧和顶部，我不能一直滚动到图像的左侧和顶部，就像居中一样不再工作了。

这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T11:01:23.020

当您减小窗口大小时，只有 body 大小会减小，而不是图像或显式大小的`div#test1`. 假设`body`大小变为`450x300 (width x height)`，即小于 div 大小`500 x 333`。

将 CSS 顶部和左侧规则应用于 div

你的 div 的左边计算到你的 div 的`(50% of 450) = 225` 顶部计算到`(50% of 300) = 150`

所以你的 div 现在从点开始`(225, 150) ie (left, top)`

现在将 CSS 负边距应用到您的 div，即左侧 -250 和顶部 -166

即你 div 的位置现在变为`(225-250, 150-166) ie (-25, -16) absolute position`.

这意味着每当您将窗口大小减小到小于绝对定位的 div 大小时，div 的某些部分将不可见，因为`body`从 (0, 0) 开始

并且由于您已经为顶部和左侧提供了 div 负边距，请阅读此内容以了解 div 是如何消失的： http: [//coding.smashingmagazine.com/2009/07/27/the-definitive-guide-to -使用负边距/](http://coding.smashingmagazine.com/2009/07/27/the-definitive-guide-to-using-negative-margins/)

您可以查看[此](https://stackoverflow.com/questions/953918/how-to-align-a-div-to-the-middle-of-the-page)线程以获取一些基于 css 的通用解决方案以使元素居中。

# php - 显示为文本输出的代码

> ID：12129327
> 
> 赞同：2
> 
> 时间：2012-08-26T10:21:28.847
> 
> 标签：php, facebook-php-sdk

我是 Facebook 应用程序开发的新手。它几乎在页面`liked.php`显示时工作（当用户喜欢该站点时显示），PHP 代码显示为文本输出。

我的`liked.php`代码：出于隐私原因删除？>

这是输出（显示为空白文本）：

我根本不知道为什么。甚至`error_reporting(E_ALL)`; 不显示任何东西。简单的空白文本输出。我使用最新的 facebook php sdk。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T10:37:23.820

我想问题不在于代码，而在于您的服务器配置。您需要告诉服务器执行 php 代码而不是显示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T10:39:35.660

听起来您要么没有安装 PHP，要么没有使用调用 PHP 引擎的文件扩展名 - 您的文件是否被调用`[Blah].php`？

需要检查的一些事项：

*   您正在从 Web 服务器（不是本地）提供文件
*   服务器已安装 PHP
*   您的网络服务器配置为使用 PHP 引擎来处理您正在使用的文件类型（通常为 .php 或 .php4 或类似文件）
*   创建一个新文件`<?php phpinfo(); ?>` 并提供它应该会给你很多关于你的 PHP 安装的信息。
*   如果您有权访问服务器，您应该能够从命令行/shell 运行 PHP

# c# - Kinect for Windows 输入流

> ID：12129328
> 
> 赞同：3
> 
> 时间：2012-08-26T10:21:30.360
> 
> 标签：c#, wpf, kinect

我基本上是在尝试使用与 SDK（ColorBasics 示例）中给出的相同代码将输入作为来自 Kinect for Windows 的 RGB 流。

SDK中的示例代码如下

```
public partial class  MainWindow : Window
{
    /// <summary>
    /// Active Kinect sensor
    /// </summary>
    private KinectSensor sensor;

    /// <summary>
    /// Bitmap that will hold color information
    /// </summary>
    private WriteableBitmap colorBitmap;

    /// <summary>
    /// Intermediate storage for the color data received from the camera
    /// </summary>
    private byte[] colorPixels;

    /// <summary>
    /// Initializes a new instance of the MainWindow class.
    /// </summary>
    public MainWindow()
    {
       //InitializeComponent();
    }

    /// <summary>
    /// Execute startup tasks
    /// </summary>
    /// <param name="sender">object sending the event</param>
    /// <param name="e">event arguments</param>
    private void WindowLoaded(object sender, RoutedEventArgs e)
    {
        // Look through all sensors and start the first connected one.
        // This requires that a Kinect is connected at the time of app startup.
        // To make your app robust against plug/unplug, 
        // it is recommended to use KinectSensorChooser provided in Microsoft.Kinect.Toolkit
        foreach (var potentialSensor in KinectSensor.KinectSensors)
        {
            if (potentialSensor.Status == KinectStatus.Connected)
            {
                this.sensor = potentialSensor;
                break;
            }
        }

        if (null != this.sensor)
        {
            // Turn on the color stream to receive color frames
            this.sensor.ColorStream.Enable(ColorImageFormat.RgbResolution640x480Fps30);

            // Allocate space to put the pixels we'll receive
            this.colorPixels = new byte[this.sensor.ColorStream.FramePixelDataLength];

            // This is the bitmap we'll display on-screen
            this.colorBitmap = new WriteableBitmap(this.sensor.ColorStream.FrameWidth, this.sensor.ColorStream.FrameHeight, 96.0, 96.0, PixelFormats.Bgr32, null);

            // Set the image we display to point to the bitmap where we'll put the image data
            this.Image.Source = this.colorBitmap;

            // Add an event handler to be called whenever there is new color frame data
            this.sensor.ColorFrameReady += this.SensorColorFrameReady;

            // Start the sensor!
            try
            {
                this.sensor.Start();
            }
            catch (IOException)
            {
                this.sensor = null;
            }
        }

        if (null == this.sensor)
        {
            this.statusBarText.Text = Properties.Resources.NoKinectReady;
        }
    }

    /// <summary>
    /// Execute shutdown tasks
    /// </summary>
    /// <param name="sender">object sending the event</param>
    /// <param name="e">event arguments</param>
    private void WindowClosing(object sender, System.ComponentModel.CancelEventArgs e)
    {
        if (null != this.sensor)
        {
            this.sensor.Stop();
        }
    }

    /// <summary>
    /// Event handler for Kinect sensor's ColorFrameReady event
    /// </summary>
    /// <param name="sender">object sending the event</param>
    /// <param name="e">event arguments</param>
    private void SensorColorFrameReady(object sender, ColorImageFrameReadyEventArgs e)
    {
        using (ColorImageFrame colorFrame = e.OpenColorImageFrame())
        {
            if (colorFrame != null)
            {
                // Copy the pixel data from the image to a temporary array
                colorFrame.CopyPixelDataTo(this.colorPixels);

                // Write the pixel data into our bitmap
                this.colorBitmap.WritePixels(
                    new Int32Rect(0, 0, this.colorBitmap.PixelWidth, this.colorBitmap.PixelHeight),
                    this.colorPixels,
                    this.colorBitmap.PixelWidth * sizeof(int),
                    0);
            }
        }
    }

    /// <summary>
    /// Handles the user clicking on the screenshot button
    /// </summary>
    /// <param name="sender">object sending the event</param>
    /// <param name="e">event arguments</param>
    private void ButtonScreenshotClick(object sender, RoutedEventArgs e)
    {
        if (null == this.sensor)
        {
            this.statusBarText.Text = Properties.Resources.ConnectDeviceFirst;
            return;
        }

        // create a png bitmap encoder which knows how to save a .png file
        BitmapEncoder encoder = new PngBitmapEncoder();

        // create frame from the writable bitmap and add to encoder
        encoder.Frames.Add(BitmapFrame.Create(this.colorBitmap));

        string time = System.DateTime.Now.ToString("hh'-'mm'-'ss", CultureInfo.CurrentUICulture.DateTimeFormat);

        string myPhotos = Environment.GetFolderPath(Environment.SpecialFolder.MyPictures);

        string path = Path.Combine(myPhotos, "KinectSnapshot-" + time + ".png");

        // write the new file to disk
        try
        {
            using (FileStream fs = new FileStream(path, FileMode.Create))
            {
                encoder.Save(fs);
            }

            this.statusBarText.Text = string.Format("{0} {1}", Properties.Resources.ScreenshotWriteSuccess, path);
        }
        catch (IOException)
        {
            this.statusBarText.Text = string.Format("{0} {1}", Properties.Resources.ScreenshotWriteFailed, path);
        }
    }
}
} 
```

我的应用程序中的代码如下

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using Microsoft.Kinect;

 namespace VideoKinect
 {
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    private KinectSensor sensor;

    private WriteableBitmap colorBitmap;

    private byte[] colorPixels;

    public MainWindow()
    {
        //InitializeComponent();
    }

    private void WindowLoaded(object sender, RoutedEventArgs e)
    {
        foreach (var potentialSensor in KinectSensor.KinectSensors)
        {
            if (potentialSensor.Status == KinectStatus.Connected)
            {
                this.sensor = potentialSensor;
                break;
            }
        }

        if (null != this.sensor)
        {
            // Turn on the color stream to receive color frames
            this.sensor.ColorStream.Enable(ColorImageFormat.RgbResolution640x480Fps30);

            // Allocate space to put the pixels we'll receive
            this.colorPixels = new byte[this.sensor.ColorStream.FramePixelDataLength];

            // This is the bitmap we'll display on-screen
            this.colorBitmap = new WriteableBitmap(this.sensor.ColorStream.FrameWidth, this.sensor.ColorStream.FrameHeight, 96.0, 96.0, PixelFormats.Bgr32, null);

            // Set the image we display to point to the bitmap where we'll put the image data
            this.ColorImage.Source = this.colorBitmap;

            // Add an event handler to be called whenever there is new color frame data
            this.sensor.ColorFrameReady += this.SensorColorFrameReady;

            // Start the sensor!
            //try
            //{
                this.sensor.Start();
           // }
           // catch (IOException)
            //{
                this.sensor = null;
           // }
        }

        if (null == this.sensor)
        {
            MessageBox.Show("No Kinect Available");
        }

    }

    private void SensorColorFrameReady(object sender, ColorImageFrameReadyEventArgs e)
    {
        using (ColorImageFrame colorFrame = e.OpenColorImageFrame())
        {
            if (colorFrame != null)
            {
                // Copy the pixel data from the image to a temporary array
                colorFrame.CopyPixelDataTo(this.colorPixels);

                // Write the pixel data into our bitmap
                this.colorBitmap.WritePixels(
                    new Int32Rect(0, 0, this.colorBitmap.PixelWidth, this.colorBitmap.PixelHeight),
                    this.colorPixels,
                    this.colorBitmap.PixelWidth * sizeof(int),
                    0);
            }
        }
    }
}
} 
```

但是我的代码中出现“IOException”错误，并且即使我在 xaml 文件中将图像命名为相同，也没有检测到图像“ColorImage”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T12:46:46.860

我能够以预期的行为编译和执行上面的代码 - 唯一的变化是取消注释`InitializeComponent();`并添加`<Image x:Name="ColorImage"/>`到 MainWindow.xaml。

究竟是怎么`IOException`说的？您能否再次检查 Kinect 传感器是否通过至少一条[USB 2.0 总线正确连接 - 1.1 带宽不足](http://msdn.microsoft.com/en-us/library/hh855359)？您是否还确定传感器有足够的电源，因为您需要[kinect 电源线](http://www.microsoftstore.com/store/msstore/en_US/pd/Kinect-Sensor-Power-Supply/productID.221244000)。您可以随时检查 SDK 是否安装正确，看看这篇[文章](https://stackoverflow.com/questions/11572107/kinect-for-xbox-360-and-kinect-sdk-1-5/11585419#11585419)。

关于它没有找到您的重建解决方案应该可以解决问题，假设XAML 中的图像`ColorImage`没有拼写错误。`x:Name`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T13:53:38.700

当您注释掉该`try ... catch`声明时您搞砸了，您`sensor = null;`在启动它之后留在了那里，这意味着您没有传感器。你应该把它注释掉。

```
 // What it should be:
       // try
       // {
            this.sensor.Start();
       // }
       // catch (IOException)
       // {
       //   this.sensor = null; <- What it should be
       // }

       // What it is:
       // try
       // {
            this.sensor.Start();
       // }
       // catch (IOException)
       // {
            this.sensor = null; //turns sensor null, then SensorColorFrame
                                // never gets called, etc.
       // } 
```

这条线最终会破坏你曾经编写的任何 Kinect 程序。希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-17T19:30:30.817

你遗漏了一个参考。你需要包括：

`using System.IO;`

在最顶端。希望这可以帮助！

# python - 代码设计：条件嵌套很深的实例方法，放在同一个类的另一个实例方法中还是放在函数中？

> ID：12129329
> 
> 赞同：0
> 
> 时间：2012-08-26T10:21:35.943
> 
> 标签：python, design-patterns, encapsulation

假设我有一个包含大量嵌套条件的实例方法。封装该代码的好方法是什么？放入同一个类或函数的另一个实例方法？您能说一下为什么首选某种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T10:34:06.837

这里有两个不同的问题。第一个是如何处理多个嵌套条件。没有唯一的正确答案：这取决于您的编码风格、条件如何交互、程序的体系结构等等。看看[这个 Programmers.SE](https://softwareengineering.stackexchange.com/questions/47789/how-would-you-refactor-nested-if-statements)问题和[Jeff Atwood 的博客文章](http://www.codinghorror.com/blog/2006/01/flattening-arrow-code.html)以获得一些想法；就个人而言，我喜欢

```
if not check1: return
code1

if not check2: return
code 2

... 
```

尽管有些人反对多个出口点。

* * *

第二个问题是如果您正在编写面向对象的 Python，如何处理各个函数。通常的答案是将它们作为函数放入包含该类的模块中，因为不需要将函数附加到特定类。但是，如果您愿意，可以将它们作为静态方法包含在类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T13:16:51.583

如果该函数仅由一个类使用，特别是如果该模块具有更多具有潜在更多实用程序功能的类（仅由一个类使用），如果您将函数保留为静态方法而不是使其明显，它可能会澄清一些事情他们属于哪个阶级。此外，自动重构（使用例如rope 库，或PyCharm 或PyDev 等）然后自动将静态方法与类一起移动到类被移动的任何位置。

**PS** `@staticmethod`与模块级函数不同，它可以在子类中被覆盖，例如，在不依赖于对象但依赖于对象类型的数学公式的情况下。

# cloud - 如何在云提供商上部署和运行需要频繁更新的 php 应用程序

> ID：12129331
> 
> 赞同：1
> 
> 时间：2012-08-26T10:22:06.400
> 
> 标签：cloud, cloud-hosting, amazon-elastic-beanstalk, openshift, phpfog

我正在创建一个 php 应用程序-该应用程序将有 2 种类型的更新-

(a) 应用程序本身需要定期更新——管理应用程序的用户将收到更新通知，他可以初始化更新。

(b) 最终用户可以上传他自己的文件（如主题的自定义 css/js 文件），以便使用他的自定义设计来呈现 php 应用程序。用户还可以将自己的文本内容添加到应用程序中

现在，我想将此应用程序部署到云提供商——最好使用像 Amazon Elastic beanstalk、PHP Fog 或 Red Hat Open Shift 这样的 PaaS——我感到困惑的是以下几点——

（1）据我了解，要部署php app的初始版本，我首先要创建app的本地安装，正确配置，然后把这个配置好的版本部署到云提供商。但是参考上面的第 1 点，我是否必须在本地安装上初始化每个更新，然后将新版本上传到 PaaS 平台？

(2) 现在，参考用户对已经在云上运行的应用程序版本所做的更改，我如何确保他对应用程序所做的更改（无论他所做的任何更改是否存储在数据库或他上传的那些文件）是否完好无损？如果我只是上传我在本地拥有的版本（我通过定期更新进行了升级）——那么我会丢失工作人员在以前版本的云版本上所做的文件/数据库更改吗？如何保持这些文件+数据库更改完好无损？

我能想到的一件事是使用我想用于云版本的数据库，甚至用于应用程序的本地版本——这样即使用户进行了更改（我指的是对数据库）——那么即使我将新版本上传到云端——对数据库所做的更改仍然完好无损……现在我只需要考虑用户上传的文件——即使我在这方面是正确的，如何保存这些文件？如果我不正确，如何保留最终用户在数据库和文件中所做的更改？如何执行此操作并升级我的 php 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-12T13:26:55.847

我知道这是一个老问题，但我会提出一些建议：

1.) 是的，您很可能需要使用 git 从本地工作站启动所有更新，具体取决于您选择的 PaaS。

2.) 如果您有用户对应用程序（代码）进行更改，那么您需要授予他们使用 git 或您正在使用的任何 vcs 的访问权限。或者，您只需要使用 SFTP 或 SCP 来上传文件，每个人都基于这个概念工作。

提供有关您正在谈论的确切应用程序类型的更具体信息可能会有所帮助。我不确定您是在谈论让您的用户更改运行应用程序的代码，还是让他们更新内容，例如使用 drupal/wordpress。

# android - Android AlertDialog 问题

> ID：12129332
> 
> 赞同：1
> 
> 时间：2012-08-26T10:22:16.603
> 
> 标签：android, xml-parsing, android-alertdialog, httpresponse

我想让我的应用程序在 Http Response 等于 NULL 时显示一个对话框。但找不到办法做到这一点。我已经在我的代码中标记了它。谁能告诉我它是怎么做的？以下是我的代码和我的尝试。

```
public class XMLParser {
    private Activity activity = null;
    // constructor
    public XMLParser(Activity act) {
        activity = act;
    }

    /**
     * Getting XML from URL making HTTP request
     * @param url string
     * */
    public String getXmlFromUrl(String url) {
        String xml = null;

        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            HttpResponse httpResponse = httpClient.execute(httpPost);

            if (httpResponse == null) {

                AlertDialog.Builder builder = new AlertDialog.Builder(activity);
                 builder.setMessage("No Response from Server ")
                        .setCancelable(false)
                        .setPositiveButton("Exit", new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int id) {
                                System.exit(0);
                            }

                           });
                AlertDialog alert = builder.create();
                 alert.show(); 

            }
            HttpEntity httpEntity = httpResponse.getEntity();
            xml = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;
        }

        /**
         * Getting XML DOM element
         * @param XML string
         * */
        public Document getDomElement(String xml){
            Document doc = null;
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            try {

                DocumentBuilder db = dbf.newDocumentBuilder();

                InputSource is = new InputSource();
                    is.setCharacterStream(new StringReader(xml));
                    doc = db.parse(is); 

                } catch (ParserConfigurationException e) {
                    Log.e("Error: ", e.getMessage());
                    return null;
                } catch (SAXException e) {
                    Log.e("Error: ", e.getMessage());
                    return null;
                } catch (IOException e) {
                    Log.e("Error: ", e.getMessage());
                    return null;
                }

                return doc;
        }

        /** Getting node value
          * @param elem element
          */
         public final String getElementValue( Node elem ) {
             Node child;
             if( elem != null){
                 if (elem.hasChildNodes()){
                     for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                         if( child.getNodeType() == Node.TEXT_NODE  ){
                             return child.getNodeValue();
                         }
                     }
                 }
             }
             return "";
         }

         /**
          * Getting node value
          * @param Element node
          * @param key string
          * */
         public String getValue(Element item, String str) {     
                NodeList n = item.getElementsByTagName(str);        
                return this.getElementValue(n.item(0));
            }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T10:34:30.347

`Activity`初始化`AlertDialog`对象时需要上下文。所以改变你的类文件如下：

```
private Activity activity = null;

public XMLParser(Activity act) {
   activity = act;
} 
```

稍后在使用**AlertDialog**时，将其初始化如下：

```
AlertDialog.Builder builder = new AlertDialog.Builder(activity); 
```

# mysql - MySQL 默认 max_connections

> ID：12129339
> 
> 赞同：0
> 
> 时间：2012-08-26T10:24:15.667
> 
> 标签：mysql, max, connection

MySQL 默认 max_connections = 151。对于每个应用程序的 1000 个用户，我应该使用多少个连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T10:53:15.723

我认为，如果有的话，你可能应该减少这个数字。您是否认为 15% 的用户同时登录并且都使用数据库？这似乎是一个很高的假设。如果您的应用程序保持数据库连接的时间不超过所需时间，那么您可能需要的可用连接数远少于 150 个。一旦数据库通信完成，您的应用程序应该释放连接。如果您使用的是连接池，那么打开和关闭连接的速度非常快。使用这种方法，您可以让两个用户同时登录，并且他们之间可能不需要多个连接，因为他们很少同时执行一些数据库操作。

# jquery - jQuery：当 div 在大尺寸屏幕上动画时，box-shadow 闪烁

> ID：12129341
> 
> 赞同：0
> 
> 时间：2012-08-26T10:24:33.217
> 
> 标签：jquery, jquery-animate, screen-resolution, css

我正在尝试制作动画`div`

```
background: #fff;
-webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.5); 
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);

$("#foo").animate({"top":"0px"},{duration:800}); 
```

随着 div 的动画，它`box-shadow`开始闪烁 - [http://jsfiddle.net/TvKqx/](http://jsfiddle.net/TvKqx/)

有什么办法可以让动画更流畅吗？

**更新：** 我的屏幕分辨率为 1440 X 900，我认为这就是问题所在。将屏幕分辨率切换到 1024 X 768 后，闪烁消失了，动画效果很好。那么如何在大屏幕上增强 jQuery 动画呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:45:45.797

您可以将 CSS3`transition`用于更大的屏幕 - [**DEMO**](http://jsfiddle.net/TvKqx/9/embedded/result/)

```
#foo {
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
    position: relative;
    top: 0;

    -webkit-transition: top .8s linear;
       -moz-transition: top .8s linear;
            transition: top .8s linear;
} 
```

# android - 如何在 Android 中检测到我正在呼叫的号码（来自代码）正忙

> ID：12129344
> 
> 赞同：6
> 
> 时间：2012-08-26T10:25:39.413
> 
> 标签：android, telephony

如何从我的 Android 类中检测到，我从代码中拨打的那个号码正忙并且呼叫被拒绝？我尝试使用 PhoneStateListener，但没有像“忙碌”这样的状态。任何帮助将不胜感激。

# jquery - 包含特定值的 jQuery 过滤器类

> ID：12129345
> 
> 赞同：2
> 
> 时间：2012-08-26T10:26:20.650
> 
> 标签：jquery

在 jQuery 中，如何过滤所有包含特定类的内容？

HTML：

```
<div class='item 10'>10</div>
<div class='item 20'>20</div>
<div class='item 30'>30</div>
<div class='item 40'>40</div>
<div class='not-an-item 50'>50</div> 
```

我试过的：

```
var classList = $(".item").attr('class').split(/\s+/);
if(classList[1] == '10' || lassList[1] == '30'){
    $(".item").hide();

} 
```

正确的输出：

```
<div class='item 20'>20</div>
<div class='item 40'>40</div>
<div class='not-an-item 50'>50</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T10:28:06.577

您可以使用[`.has()`](http://api.jquery.com/has/)方法或[`.not()`](http://api.jquery.com/not/)方法来减少元素集。保留与`.has()`某个选择器匹配的`.not()`所有元素，同时保留与选择器不匹配的所有元素。

对于更高级的过滤，您可以使用该[`.filter()`](http://api.jquery.com/filter/)方法。

如果我正确理解您的问题，您可以使用`.filter()`过滤功能。像这样的东西：

```
$(".item").filter(function() {
   return !($(this).hasClass("10") || $(this).hasClass("30"));
}).hide(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T10:59:06.810

```
function hideItem(target) {
    $('div.item').filter(function() {
        var num = parseInt( this.className.split(/\s/)[1], 10 );
        if(target instanceof Array) {
          return $.inArray(num, target) >= 0; 
        } else return num > target;  
    }).hide();
}
hideItem([10,30]); // will hide item with class 10 and 30 
                   // and you can give any number of class 
```

但是，如果您想隐藏`item`类`> 20`（假设），那么就这样称呼它；

```
hideItem(20); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T10:29:11.270

你可以这样试试。。

```
$("div.item").hide();
$("div.item").not('div.10, div.30').show(); 
```

**[小提琴演示](http://jsfiddle.net/ZaNSJ/1)**

# mysql - mysql错误，存储过程创建

> ID：12129349
> 
> 赞同：0
> 
> 时间：2012-08-26T10:27:06.997
> 
> 标签：mysql

我是 mysql 新手，我不明白为什么在创建存储过程时会出错。

```
 DELIMITER |
CREATE PROCEDURE lastscan(IN task_id_var INT)
BEGIN
 SELECT COUNT(*) FROM debugger WHERE task_id=task_id_var INTO @total|
  SET @total=@total+1|
  INSERT INTO debugger SET scan_num=@total, task_id=task_id_var|
END|
DELIMITER; 
```

我得到：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 3 
```

我也不明白，为什么我需要使用那个分隔符语法..？分隔符 | 然后再次DELIMITER;...它的功能是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T12:43:46.747

```
 DELIMITER |
CREATE PROCEDURE lastscan(IN task_id_var INT, IN file_name_var VARCHAR(110))
BEGIN
 SELECT COUNT(*) FROM debugger WHERE task_id=task_id_var INTO @total;
  SET @total=@total+1;
  INSERT INTO debugger SET scan_num=@total, task_id=task_id_var, file_name=file_name_var;
END|
DELIMITER; 
```

这对我有用。没必要放 | 排序过程中的分隔符。我认为它是针对存储过程的，而不是针对身体内部的

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-26T10:32:21.583

您不能简单地分配这样的变量，您`SET`首先需要关键字。

[http://dev.mysql.com/doc/refman/5.1/en/set-statement.html](http://dev.mysql.com/doc/refman/5.1/en/set-statement.html)

所以你的代码应该是这样的（用phpMyAdmin测试）：

```
DELIMITER //
CREATE PROCEDURE lastscan(IN task_id_var INT)
BEGIN
 SELECT COUNT(*) FROM debugger WHERE task_id=task_id_var INTO @total;
  SET @total=@total+1;
  INSERT INTO debugger SET scan_num=@total, task_id=task_id_var;
END;//
DELIMITER ; 
```

DELIMITER 关键字用于停止过程中的其他分号作为当前语句的结尾，因此通过将分隔符重新定义为 // MySql 会将整个 CREATE PROCEDURE 块作为单个语句处理，而不是在第一个分号处停止，而是而是等待第一次出现 //。

[http://dev.mysql.com/doc/refman/5.1/en/stored-programs-defining.html](http://dev.mysql.com/doc/refman/5.1/en/stored-programs-defining.html)

# javascript - javascript中的随机参数

> ID：12129351
> 
> 赞同：2
> 
> 时间：2012-08-26T10:27:54.357
> 
> 标签：javascript, jquery

我知道这可能是一个非常基本的问题，很抱歉，但是在 javascript/jquery 中，我有时会接触到一个具有随机参数的函数，该函数似乎没有明显的用途，例如下面使用的这个jquery 网站。

```
 $("div").mousemove(function(e){  
      var pageCoords = "( " + e.pageX + ", " + e.pageY + " )";  
      var clientCoords = "( " + e.clientX + ", " + e.clientY + " )";  
      $("span:first").text("( e.pageX, e.pageY ) : " + pageCoords);  
      $("span:last").text("( e.clientX, e.clientY ) : " + clientCoords);  
    }); 
```

这里函数的参数为​​ e，我不明白为什么，虽然我知道它是否没有 e，但它也可以工作，因为这就是我倾向于使用 javascript 的方式。程序员为什么要这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T10:30:05.467

表示事件`e`对象。在给出的示例中，用户需要事件对象，以便在触发 mousemove 事件时，他/她可以使用事件 (e) 对象的`pageX`和属性访问屏幕上光标的位置。`pageY`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T10:33:13.577

它不是随机的，它总是存在的。但如果你不想使用它，你可以把它放在一边。该参数（在本例中为 e）就是事件。他们使用它来获取鼠标移动的坐标，这些坐标存储在事件对象中并传递给函数。事件不是传递给此函数的唯一参数，正如您[在此处](http://api.jquery.com/mousemove/)看到的那样，尽管其他参数非常少见。

# css - Google Webfont 与本地字体冲突

> ID：12129355
> 
> 赞同：10
> 
> 时间：2012-08-26T10:28:11.877
> 
> 标签：css, fonts, font-face, webfonts, google-webfonts

我与使用 google-webfonts 发生了非常严重的冲突。好的，这里是代码：

这是在头脑中：

```
<link href='http://fonts.googleapis.com/css?family=Oswald:700' rel='stylesheet' type='text/css'> 
```

这是在css文件中：

```
body {
font-family: 'Oswald', sans-serif;
font-weight: 700; } 
```

“ **Oswald** ”是一个包含 3 种字体的字体系列：

*   书 (300)
*   正常 (400)
*   粗体 (700)

正如你所看到的......我只加载了粗体（700）。（你可以在查询中看到它）它一直工作到这里但是......</p>

问题是：

我的电脑上安装了 3 种字体 (300,400,700) 的桌面版本，只要这些字体被激活……浏览器就会在我的 html 文档中显示错误的字体粗细 (400)。

好的。问题是在我的 css 'Oswald' 中使用的是 localfont 而不是 webfont。但是本地字体“Oswald”是“Oswald normal”。我不知道为什么谷歌称它为“Oswald”而不是“Oswald Bold”。所以我不知道如何解决这个问题。

我不希望 css 指向本地字体 .. 我希望它始终显示 webfont ......因为正确的字体重量！

你有什么想法？请？

可以重命名 webfont-call 吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-26T10:42:32.900

您可以编辑 CSS`@font-face`规则以满足您的需要，而不是仅仅从 Google 加载自动生成的规则。基本上问题是他们的规则更喜欢本地版本（`src: local('Oswald Bold'), local('Oswald-Bold'), ...`）。更正后的版本如下所示：

```
@font-face {
  font-family: 'WebOswald';
  font-style: normal;
  font-weight: 700;
  src: url(https://themes.googleusercontent.com/static/fonts/oswald/v5/bH7276GfdCjMjApa_dkG6T8E0i7KZn-EPnyo3HZu7kw.woff) format('woff');
} 
```

只需手动将其添加到您的 CSS 中，并`font-family: 'WebOswald';`在您想使用 Google 的 Web 版本字体时使用。

我希望这有帮助！

# android - 强制应用停止后无法使用原始密钥数据访问数据库

> ID：12129356
> 
> 赞同：0
> 
> 时间：2012-08-26T10:28:23.110
> 
> 标签：android, sqlite, sqlcipher

我正在尝试使用行键数据以避免密钥派生（根据[SQLCipher 文档](http://sqlcipher.net/sqlcipher-api/#key)）：

```
this.myDb = SQLiteDatabase.openOrCreateDatabase(databaseFile, "", null);
this.myDb.rawExecSQL("PRAGMA key = \"x'2DD29CA851E7B56E4697B0E1F08507293D761A05CE4D1B628663F411A8086D99'\"");
Cursor myCursor = this.myDb.rawQuery(query, params); 
```

当我强制应用程序停止时，访问数据变得不可能。

如果不使用 SQLCipher，则不会发生此行为。即使在强制应用程序停止之后，数据库也是可读的。

我做错了什么？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T17:25:22.937

对于那些面临同样问题的人，这里给出了一个解决方案：

[https://github.com/sqlcipher/android-database-sqlcipher/issues/62#issuecomment-8090646](https://github.com/sqlcipher/android-database-sqlcipher/issues/62#issuecomment-8090646)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T10:32:53.093

我的理解是，除了应用程序之外，数据库无法访问 - 这是为了防止其他应用程序访问他们不应该访问的数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T11:07:17.337

您需要向我们展示更多代码，以便我们能够为您提供正确的答案。

你的电话等于

> SQLiteDatabase.openDataBase(databaseFile.getPath(),"", CREATE_IF_NECESSARY, null);

当您强制关闭您的应用程序时，一切都会恢复，包括所有静态参数。因此，之前运行的应用程序唯一能影响的是您保存在数据库中的数据。所以试着看那个方向。

# php - MySQL 从 select 更新并进一步选择和更新

> ID：12129363
> 
> 赞同：1
> 
> 时间：2012-08-26T10:29:11.660
> 
> 标签：php, mysql, stored-procedures, event-triggers

目前试图找到一种在某种形式的循环中执行以下操作的方法（最好不会对数据库的性能造成影响）。

我有 3 张桌子`user_hours`和. 我需要先做：`user_calendar``hours_statistics`

```
SELECT user_calendar.date_start,
       user_calendar.opportunity_id,
       user_hours.user_id,
       user_hours.agreed_hours,
       user_hours.completed_hours,
       user_hours.hours_committed
FROM   user_calendar
       JOIN user_hours
         ON user_calendar.user_calendar_id = user_hours.user_calendar_id
WHERE  user_calendar.date_start = CURRENT_DATE()
       AND user_hours.completed_hours IS NULL
       AND user_hours.hours_committed = 'accepted' 
```

此查询可能返回如下：

[http://i.imgur.com/5cJ5v.png](http://i.imgur.com/5cJ5v.png)

因此，对于返回的每个机会 ID 和用户 ID，我想这样做：

```
UPDATE user_hours
SET    completed_hours = agreed_hours,
       hours_committed = 'completed'
WHERE  opportunity_id = {opportunity_id}
       AND user_id = {user_id}
       AND hours_committed = 'accepted'
       AND completed_hours IS NULL 
```

请注意，此时需要循环 {opportunity_id} 和 {user_id}（请参见屏幕截图），因为我们需要在每个机会上遍历每个用户。

然后对于每个更新的记录，我需要获得总小时数，例如：

```
// Get hours they have done to send to statistics data table
SELECT sum(completed_hours) FROM user_hours WHERE user_id = {user_id} AND opportunity_id = {opportunity_id} 

// Get the completed hours total somehow as a variable
$completed_hours = (from result above)

// Commit stats
UPDATE hours_statistics SET completed_hours = (completed_hours+$completed_hours)
WHERE user_id = {user_id} AND opportunity_id =  {opportunity_id} 
```

任何人都可以帮助将其编写为某种程序或触发器，或者帮助我朝着正确的方向获得循环这些东西的起点吗？手动查询工作，只需要循环/自动运行统计更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T11:01:30.150

您可以创建一个触发器以在更新`hours_statistics`时`user_hours`进行更新（您可能还希望为`INSERT`和`DELETE`操作添加类似的触发器，具体取决于您的应用程序逻辑）。

假设`UNIQUE`已经在触发器中定义了`hours_statistics.(user_id, opportunity_id)`一个键：[`INSERT ... ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/en/insert-on-duplicate.html)

```
CREATE TRIGGER foo AFTER UPDATE ON user_hours FOR EACH ROW
  INSERT INTO hours_statistics (user_id, opportunity_id, completed_hours) VALUES
    (OLD.user_id, OLD.opportunity_id, -OLD.completed_hours),
    (NEW.user_id, NEW.opportunity_id, +NEW.completed_hours)
  ON DUPLICATE KEY UPDATE
    completed_hours = completed_hours + VALUES(completed_hours); 
```

然后，您可以使用单个`UPDATE`语句（使用多表语法加入`user_hours`with `user_calendar`）一次性执行所有更新`user_hours`，这将导致上述触发器`hours_statistics`根据需要进行更新：

```
UPDATE user_hours JOIN user_calendar USING (user_calendar_id, opportunity_id)
SET    user_hours.completed_hours = agreed_hours,
       user_hours.hours_committed = 'completed'
WHERE  user_hours.hours_committed = 'accepted' 
   AND user_hours.completed_hours IS NULL
   AND user_calendar.date_start = CURRENT_DATE(); 
```

# android - 在android中使用HttpsUrlConnection发送json对象

> ID：12129371
> 
> 赞同：0
> 
> 时间：2012-08-26T10:31:05.750
> 
> 标签：android, json, httpsurlconnection

我正在使用`HttpsUrlConnection`以下方式向服务器发送一个 json 对象

```
try{ 
    JSONObject jobj=new JSONObject();

    jobj.put("UserName","demo1");
    jobj.put("Password","demo1");
    Log.e("json string :",jobj.toString());

    byte[] postData = jobj.toString().getBytes();

    URL url = new URL("https://services.myovs.com/TokenService/Token");

    SSLContext sc = SSLContext.getInstance("SSL");
    sc.init(null, trustAllCerts, new java.security.SecureRandom());
    HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());

    HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();

    conn.setDoOutput(true);
    conn.setDoInput(true);
    conn.setUseCaches(false);

    conn.setRequestMethod("POST");
    conn.setRequestProperty("Content-Type", "application/json");

    OutputStream out = conn.getOutputStream();

    out.write(postData);
    out.close();

    String temp = ((HttpsURLConnection)conn).getResponseMessage();
    Log.e("response  :",temp);
} catch(Exception ex) {
    ex.printStackTrace();   
} 
```

和

```
TrustManager[] trustAllCerts = new TrustManager[] {
    new X509TrustManager() {
        public java.security.cert.X509Certificate[] getAcceptedIssuers() {
            return null;
        }
        public void checkClientTrusted(
                java.security.cert.X509Certificate[] certs,
                String authType) {}
        public void checkServerTrusted(
                java.security.cert.X509Certificate[] certs,
                String authType) {}
    }
}; 
```

但它得到了一个例外

> 08-26 20:12:30.179: WARN/System.err(12477): java.io.IOException: Hostname 'services.myovs.com' 未验证
> 08-26 20:12:30.187: WARN/System.err( 12477): 在 org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.verifySecureSocketHostname(HttpConnection.java:199)
> 08-26 20:12:30.187: WARN/System.err(12477):在 org.apache.harmony.luni.internal.net.www.protocol.https.HttpsURLConnectionImpl$HttpsEngine.makeConnection(HttpsURLConnectionImpl.java:391)
> 08-26 20:12:30.187: WARN/System.err(12477): 在org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:205)
> 08-26 20:12:30.187: WARN/System.err(12477): 在 org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:614)
> 08-26 20:12:30.187: WARN/System.err(12477): 在 org.apache.harmony.luni.internal.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:268)
> 08-26 20:12 :30.187: WARN/System.err(12477): at com.example.httpconnection.Main.httpMethode(Main.java:69)
> 08-26 20:12:30.187: WARN/System.err(12477): at com. example.httpconnection.Main.onCreate(Main.java:27)
> 08-26 20:12:30.187: WARN/System.err(12477): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
> 08-26 20:12:30.187: WARN/System.err(12477): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
> 08-26 20:12:30.187: WARN/System.err(12477) : 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
> 08-26 20:12:30.187: WARN/System.err(12477): 在 android.app.ActivityThread.access$1500(ActivityThread.java:117)
> 08-26 20:12:30.187: WARN/System.err(12477): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
> 08-26 20:12:30.195: WARN/System.err( 12477): 在 android.os.Handler.dispatchMessage(Handler.java:99)
> 08-26 20:12:30.195: WARN/System.err(12477): 在 android.os.Looper.loop(Looper.java:130) > 08-26 20:12:30.195: WARN/System.err(12477 ): 在 android.app.ActivityThread.main(ActivityThread.java:3687)
> 08-26 20:12:30.195: WARN/System.err(12477): 在 java.lang.reflect.Method.invokeNative(Native Method)
> 08 -26 20:12:30.195: WARN/System.err(12477): 在 java.lang.reflect.Method.invoke(Method.java:507)
> 08-26 20:12:30.195: WARN/System.err(12477) ): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
> 08-26 20:12:30.195: WARN/System.err(12477): 在 com.android.internal.os。 ZygoteInit.main(ZygoteInit.java:625)
> 08-26 20:12:30.195: WARN/System.err(12477): at dalvik.system.NativeStart.main(Native Method)

谁能帮我 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T15:49:25.987

据我所知，这不是个例。相反，它是写入日志的警告，包括堆栈跟踪。

该警告表明连接不安全，因为无法验证主机名。它与您正在使用的 HTTPS（而不是 HTTP）连接有关。服务器可能没有公开的证书颁发机构颁发的证书。

# android - 将 gdata 提要转换为 xml - Youtube 播放列表到 Android 列表视图

> ID：12129372
> 
> 赞同：1
> 
> 时间：2012-08-26T10:31:13.593
> 
> 标签：android, youtube

我正在按照[此代码](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)创建自定义列表视图。

它使用[XML 文件](http://api.androidhive.info/music/music.xml)来解析对象并将它们显示在`Listview`

我想知道我可以使用相同的示例来显示 Youtube 播放列表的视频标题和持续时间。

我已经浏览了 Youtube API 和 GDATA，但我不知道如何获取可以与上述示例代码一起使用的原始 xml 链接

有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T10:43:19.393

这是我在以前的一个项目中使用过的一个类。这会将第一个视频作为“主要”视频，显示时间和标题，然后将所有其余视频添加到布局中。

```
public class Videos extends Activity {
    ImageView mainThumb;
    TextView mainTitle;
    TextView mainTime;
    LinearLayout videos;
    ArrayList<String> links;

    /** Called when the activity is first created. */
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.videos);

        new ParseVideoDataTask().execute();
        mainThumb = (ImageView) findViewById(R.id.mainThumb);
        mainTitle = (TextView) findViewById(R.id.mainTitle);
        mainTime = (TextView) findViewById(R.id.mainTime);
        videos = (LinearLayout) findViewById(R.id.videos);

    }

    private class ParseVideoDataTask extends AsyncTask<String, String, String> {
        int count = 0;

        @Override
        protected String doInBackground(String... params) {
            URL jsonURL;
            URLConnection jc;
            links = new ArrayList<String>();
            try {
                jsonURL = new URL("http://gdata.youtube.com/feeds/api/playlists/" +
                    YOUR PLAYLIST ID +  
                    "?v=2&alt=jsonc");
                 jc = jsonURL.openConnection(); 
                 InputStream is = jc.getInputStream(); 
                 String jsonTxt = IOUtils.toString(is); 
                 JSONObject jj = new JSONObject(jsonTxt); 
                 JSONObject jdata = jj.getJSONObject("data"); 
                 JSONArray aitems = jdata.getJSONArray("items"); 
                 for (int i=0;i<aitems.length();i++) {
                     JSONObject item = aitems.getJSONObject(i); 
                     JSONObject video = item.getJSONObject("video"); 
                     String title = video.getString("title");
                     JSONObject player = video.getJSONObject("player");
                     String link = player.getString("default");
                     String length = video.getString("duration");
                     JSONObject thumbnail = video.getJSONObject("thumbnail"); 
                     String thumbnailUrl = thumbnail.getString("hqDefault")
                     String[] deets = new String[4];
                     deets[0] = title;
                     deets[1] = thumbnailUrl;
                     deets[2] = length;
                     links.add(link);
                     publishProgress(deets);
                 }
            } catch (MalformedURLException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } catch (JSONException e) {
                e.printStackTrace();
            }       
            return null;
        }       

        @Override
        protected void onProgressUpdate(final String... deets) {
            count++;
            if (count == 1) {
                MainActivity.setImageFromUrl(deets[1], mainThumb, Videos.this);
                mainTitle.setText(deets[0]);
                mainTime.setText(formatLength(deets[2]));
                mainThumb.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(links.get(1)));
                        startActivity(i);
                    }
                });
            } else {
                LayoutInflater layoutInflater = (LayoutInflater)Videos.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                View video = layoutInflater.inflate(R.layout.video, null);
                ImageView thumb = (ImageView) video.findViewById(R.id.thumb);
                TextView title = (TextView) video.findViewById(R.id.title);
                TextView time = (TextView) video.findViewById(R.id.time);
                MainActivity.setImageFromUrl(deets[1], thumb, Videos.this);
                title.setText(deets[0]);
                time.setText(formatLength(deets[2]));
                video.setPadding(20, 20, 20, 20);
                videos.addView(video);
                video.setId(count-1);
                video.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(links.get(v.getId())));
                        startActivity(i);
                    }
                });
            }
        }
    }

    private CharSequence formatLength(String secs) {
        int secsIn = Integer.parseInt(secs);
        int hours = secsIn / 3600,
                remainder = secsIn % 3600,
                minutes = remainder / 60,
                seconds = remainder % 60;

                return ((minutes < 10 ? "0" : "") + minutes
                + ":" + (seconds< 10 ? "0" : "") + seconds );
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        for (int i=0;i<videos.getChildCount();i++) {
            View v = videos.getChildAt(i);
            if (v instanceof ImageView) {
                ImageView iv = (ImageView) v;           
                ((BitmapDrawable)iv.getDrawable()).getBitmap().recycle();   
            }
        }
    }
} 
```

视频.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

        <ImageView
            android:id="@+id/thumb"
            android:layout_width="240dp"
            android:layout_height="180dp"
            android:layout_centerHorizontal="true"
            android:scaleType="fitStart" />

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/thumb"
            android:layout_below="@+id/thumb"
            android:layout_toLeftOf="@+id/time"
            android:maxLines="1"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="@android:color/black" />

        <TextView
            android:id="@+id/time"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignRight="@+id/thumb"
            android:layout_below="@+id/thumb"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="@android:color/black" />              

</RelativeLayout> 
```

视频.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/white"
    android:orientation="vertical" >
    <RelativeLayout
        android:id="@+id/main"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >    

        <ImageView
            android:id="@+id/mainThumb"
            android:layout_width="240dp"
            android:layout_height="180dp"
            android:layout_centerHorizontal="true"
            android:scaleType="fitXY"/>

        <TextView
            android:id="@+id/mainTitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/mainThumb"
            android:layout_below="@+id/mainThumb"
            android:layout_toLeftOf="@+id/mainTime"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="@android:color/black" />

        <TextView
            android:id="@+id/mainTime"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignRight="@+id/mainThumb"
            android:layout_below="@+id/mainThumb"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="@android:color/black" />              
    </RelativeLayout>

    <HorizontalScrollView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:scrollbars="none"
        android:layout_alignParentBottom="true" >

        <LinearLayout
            android:id="@+id/videos"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom"
            android:gravity="center"
            android:orientation="horizontal" />

    </HorizontalScrollView>
</RelativeLayout> 
```

# sed - 在 sed 替换中添加前导 0

> ID：12129382
> 
> 赞同：5
> 
> 时间：2012-08-26T10:33:37.540
> 
> 标签：sed

我有输入数据：

```
foo 24
foobar 5 bar
bar foo 125 
```

我想要输出：

```
foo 024
foobar 005 bar
bar foo 125 
```

所以我可以使用这个 sed 替换：

```
s,\([a-z ]\+\)\([0-9]\)\([a-z ]*\),\100\2\3,
s,\([a-z ]\+\)\([0-9][0-9]\)\([a-z ]*\),\10\2\3, 
```

但是，我可以做一个替换，那会做同样的事情吗？就像是：

```
if (one digit) then two leading 0
elif (two digits) then one leading 0 
```

问候。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T10:56:39.270

我怀疑“if - else”逻辑是否可以合并到*一个*替换命令中而不保存中间数据（例如匹配的长度）。但这并不意味着你不能轻易做到这一点。例如：

```
$ N=5
$ sed -r ":r;s/\b[0-9]{1,$(($N-1))}\b/0&/g;tr" infile
foo 00024
foobar 00005 bar
bar foo 00125 
```

它使用递归，将一个零添加到比循环中的数字短的所有数字上`$N`，该循环在无法进行更多替换时结束。`r`标签基本上说：尝试做替代，然后`goto r`如果找到可以替代的东西。`sed` [在此处](http://www.grymoire.com/Unix/Sed.html#uh-58)查看有关流量控制的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-20T16:59:01.117

首先添加前导零的最大数量，然后从末尾获取此字符数：

```
echo 55 | sed -e 's:^:0000000:' -e 's:0\+\(.\{8\}\)$:\1:'

00000055 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T10:45:21.377

使用两个替换命令：第一个将搜索一个数字并在前面插入两个零，第二个将搜索一个两位数并在前面插入一个零。`GNU sed`需要，因为我使用单词边界命令来搜索数字 ( `\b`)。

```
sed -e 's/\b[0-9]\b/00&/g; s/\b[0-9]\{2\}\b/0&/g' infile 
```

* * *

**编辑**以添加测试：

内容`infile`：

```
foo 24 9
foo 645 bar 5 bar
bar foo 125 
```

使用以下输出运行上一个命令：

```
foo 024 009
foo 645 bar 005 bar
bar foo 125 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-26T12:25:56.690

您似乎已经`sed`涵盖了这些选项，这是一种方法`awk`：

```
BEGIN      { RS="[ \n]"; ORS=OFS=""   }
/^[0-9]+$/ { $0 = sprintf("%03d", $0) } 
           { print $0, RT             } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-26T13:36:32.880

这可能对您有用（GNU sed）：

```
echo '1.23 12,345 1 12 123 1234 1' | 
sed 's/\(^\|\s\)\([0-9]\(\s\|$\)\)/\100\2/g;s/\(^\|\s\)\([0-9][0-9]\(\s\|$\)\)/\10\2/g' 
1.23 12,345 001 012 123 1234 001 
```

或者在眼睛上更容易一点：

```
sed -r 's/(^|\s)([0-9](\s|$))/\100\2/g;s/(^|\s)([0-9][0-9](\s|$))/\10\2/g' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-04T10:29:55.273

我发现以下**sed**方法可以非常简单地用零填充整数到 5 (n) 位数字：

```
sed -e "s/\<\([0-9]\{1,4\}\)\>/0000\1/; s/\<0*\([0-9]\{5\}\)\>/\1/" 
```

1.  如果至少有一个，最多 4 (n-1) 个数字，则在前面添加 4 (n-1) 个零
2.  如果在第一次转换后有任意数量的零后跟 5 (n) 位数字，则只保留最后 5 (n) 位数字

当碰巧有超过 5 (n) 个数字时，这种方法的行为通常是 - 没有填充或修剪。

输入：

```
0
1
12
123
1234
12345
123456
1234567 
```

输出：

```
00000
00001
00012
00123
01234
12345
123456
1234567 
```

# c# - 使用 LINQ 改进 foreach

> ID：12129389
> 
> 赞同：0
> 
> 时间：2012-08-26T10:34:33.607
> 
> 标签：c#, asp.net, linq, entity-framework

> **可能重复：**
> [删除实体框架中的对象及其所有子对象？](https://stackoverflow.com/questions/5084582/delete-object-and-all-its-child-objects-in-entity-framework)

这段代码：

```
 int WebsiteID = int.Parse(Request.QueryString["id"]);
        Website websiteObj = db.Websites
            .SingleOrDefault(x => x.website_id == WebsiteID);

        foreach (BusinessObjects.Page pageObj in websiteObj.Pages)
        {
            foreach (SubPage subpageObj in pageObj.SubPages)
            {
                pageObj.SubPages.Remove(subpageObj);
            }
            websiteObj.Pages.Remove(pageObj);
        }

        foreach (Sector sectorObj in websiteObj.Sectors)
        {
            foreach (Product productObj in sectorObj.Products)
            {
                sectorObj.Products.Remove(productObj);
            }
            websiteObj.Sectors.Remove(sectorObj);
        }
        db.Websites.DeleteObject(websiteObj); 
```

一个网站有多个页面，一个页面有多个子页面。一个网站也有多个部门，每个部门都有多个产品。

我想删除该网站并清除与之相关的所有关系+实体。我确信有更好的方法来编写上述内容。

有没有办法改进逻辑？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T10:46:13.877

最简单的方法是将数据库中的关系设置为`ON DELETE CASCADE`

然后Linq变成：

```
var sites = db.Websites;
var site_id = int.Parse(Request.QueryString["id"]);
var site = sites.FirstOrDefault(x => x.website_id == site_id);
sites.DeleteObject(site); 
```

除了删除删除级联时不再需要的内容之外，我对您的 linq 所做的唯一真正更改是：

用于轻微`FirstOrDefault`的性能提升。这对数据库来说没什么大不了的，因为它只是`TOP 2`为了实现。`Single`工作时不这样做是值得的`First`，因为在其他情况下，这可能意味着必须检查每个对象（唯一的方法是`Single` 针对 a `List<T>`）*。当然，如果有可能存在两个具有相同 id 的站点，那么我刚刚引入了一个错误，但真正的错误在于没有将 id 作为主键以确保永远不会发生这种情况。

取出`Obj`对象的名称。这似乎是“对象”的缩写，因此是重言式 - 曾经编写的每段 .NET 代码中的所有其他变量都是针对对象的，因此指出这一点没有意义。

*更多一点，因为我不想鼓励坏习惯。当只能有一个匹配的对象时，`First`在获取该对象的同时`Single`获取该对象*，并*确保它是唯一的（这同样适用于`OrDefault`变体，除了在根本没有找到对象时它们不同）。

知道只有一个匹配对象的唯一方法是尝试至少找到其中两个，然后检查你只有一个。如果数据库表在与您的搜索相关的列上建立索引（它执行 a`TOP 2`而不是 a `TOP 1`），这对数据库表的影响很小，但否则可能会很严重。

问题是这对于进行检查有多重要。有时你不在乎；使用`First`. 有时你应该对只有一个这样的对象有很强的信心；使用`First`但请检查该信心的原因以确保您没有错误（在这种情况下，请检查索引列上是否有主键或唯一键）。如果您真的需要检查，那么请务必使用`Single`，因为`First`在这种情况下使用是糟糕优化的缩影——更快但错误绝不是目标。

# python - Python 表达式求值器和解释器模式

> ID：12129390
> 
> 赞同：-3
> 
> 时间：2012-08-26T10:34:36.670
> 
> 标签：python

我正在尝试在 python 中实现一个简单的表达式评估器，但我被困在解析器方法中。下面是我的代码片段。

```
 class Number:
    def __init__(self,value):
        self.value=value
    def execute(self):
        return self.value

class Plus:
    def __init__(self,left,right):
        self.left=left
        self.right=right
    def execute(self):
        return self.left+self.right

class Minus:
    def __init__(self,left,right):
        self.left=left
        self.right=right
    def execute(self):
        return self.left-self.right

class Multiply:
    def __init__(self,left,right):
        self.left=left
        self.right=right
    def execute(self):
        return self.left*self.right
import re
def parser(input):
    stack=[]
    token_pat = re.compile("\s*(?:(\d+)|(.))")
    for number, operator in token_pat.findall(input):

        if number:
            stack.append(Number(int(number)))

        else:
            first,second=stack.pop(),stack.pop()

            if operator=="+":
                stack.append(Plus(first,second))
            elif operator=="-":
                stack.append(Minus(first,second))
            elif operator=="*":
                stack.append(Multiply(first,second))
            else:
                raise SyntaxError("unknown operator")
    print stack[0].execute()

if __name__=="__main__":
    parser('1 2 +') 
```

当我运行上述代码时，出现以下错误。任何人都可以查看我的代码。

```
Traceback (most recent call last):
  File "Interpreter.py", line 52, in <module>
    parser('1 2 +')
  File "Interpreter.py", line 48, in parser
    print stack[0].execute()
  File "Interpreter.py", line 12, in execute
    return self.left+self.right
TypeError: unsupported operand type(s) for +: 'instance' and 'in 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T10:37:51.510

错误消息令人困惑，因为您使用的是[经典类](http://docs.python.org/reference/datamodel.html#new-style-and-classic-classes)。使用新式类（即继承自`object`），您会得到更合理的结果：

```
TypeError: unsupported operand type(s) for +: 'Number' and 'Number' 
```

要么使用`int`s 代替 Number 对象，要么通过实现[`__add__`and friends](http://docs.python.org/reference/datamodel.html#object.__add__)来实现添加逻辑，或者在`Plus.execute`.

另请注意，您正在重新实现 Python 的内置函数。此外，拥有一种`execute`方法几乎是一种反模式。一个更短的实现将是

```
import functools,operator,re

def parser(inp):
    stack=[]
    token_pat = re.compile("\s*(?:(\d+)|(.))")
    for number, op in token_pat.findall(inp):
        if number:
            stack.append(functools.partial(lambda i:i, int(number)))
        else:
            first,second=stack.pop(),stack.pop()
            try:
                op = {
                    '+': operator.add,
                    '-': operator.sub,
                    '*': operator.mul
                }[op]
            except KeyError:
                raise SyntaxError("unknown operator")

            stack.append(functools.partial(lambda op,first,second:
                        op(first(), second()), op, first, second))
    print(stack[0]())

if __name__=="__main__":
    parser('1 2 + 3 *') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T10:38:27.567

由于您对自己进行基本调试不感兴趣：

```
sucmac: $ python out.py 
> /Users/xxxx/out.py(13)execute()
-> return self.left+self.right
(Pdb) self.left
<__main__.Number instance at 0x10043f3f8>
(Pdb) self.right
<__main__.Number instance at 0x10042f248>
(Pdb) right
*** NameError: name 'right' is not defined
(Pdb) self.right.__dict__
{'value': 1} 
```

你显然想要

```
return self.right.value + self.left.value 
```

# javascript - 如何将此脚本绑定到锚点的单击事件？

> ID：12129391
> 
> 赞同：1
> 
> 时间：2012-08-26T10:34:41.403
> 
> 标签：javascript, javascript-events

我在实现跟踪像素脚本时遇到问题，特别是将脚本绑定到点击事件。

这是我从像素跟踪服务提供商那里得到的 javascript：

```
<script type="text/javascript" language="javascript">

            var __autoFirePixels = true;

            (function() {

                    var script = document.createElement('script');

                    script.type = 'text/javascript';

                    script.setAttribute('async', 'true');

                    script.src = document.location.protocol+

                                '//pixel.traffiliate.com/pixel/pixels.js.php'+

                                'allsortsofapiinformation';

                    document.documentElement.firstChild.appendChild(script);

        })(); 
```

我需要在单击点击通话按钮时触发此代码 - 登录页面中有 2 个这样的按钮。

我觉得解决方案指日可待，我将不胜感激找到解决方案的任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T10:36:57.530

```
<a href="#" id="click-to-call">Click to call</a>
<script type="text/javascript">
var trackPixel = function() {
  var __autoFirePixels = true;
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.setAttribute('async', 'true');
  script.src = document.location.protocol+
  '//pixel.traffiliate.com/pixel/pixels.js.php'+
  'allsortsofapiinformation';
  document.documentElement.firstChild.appendChild(script);
}
document.getElementById('click-to-call').onclick = trackPixel;
document.getElementById('click-to-call2').onclick = trackPixel;
document.getElementById('click-to-call3').onclick = trackPixel;
</script> 
```

# svn - 除了SVN，还有哪些版本控制系统使用mime-type？

> ID：12129397
> 
> 赞同：0
> 
> 时间：2012-08-26T10:35:34.240
> 
> 标签：svn, version-control

除了SVN，还有哪些版本控制系统使用mime-type？在版本控制系统中指定 mime-type 的目的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T10:40:33.357

mime 类型的目的是让您可以以不同的方式处理不同的类型。例如，您可能希望禁用二进制文件的基于文本的差异实用程序，或者您可能希望在 Web 视图中显示基于文本的源代码。它是可能对各种不同工具有用的元数据。对于不从文件名推断文件类型的操作系统，它也可能很有用。

# iphone - 如何从 NSMutableArray 中删除对象？

> ID：12129400
> 
> 赞同：0
> 
> 时间：2012-08-26T10:36:20.493
> 
> 标签：iphone, uitableview, nsmutablearray

出于某种原因，我的代码拒绝工作。我在方法中收到 sigbart 错误
`- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath`，我尝试从 tableView 和我的书签数组中删除对象？（您可以在我的代码底部的 pragma 标记下找到该方法 - 表视图数据源）。

我是 Objective-C 和 iPhone 开发的新手，所以如果你知道什么可能导致这个错误，请尝试用我没有经验的假设来解释它。谢谢！

书签.h

```
#import <UIKit/UIKit.h>

#import "ShowTaskViewController.h"

#import "Bookmark.h"

@interface BookmarksViewController : UITableViewController  <UITableViewDelegate,UITableViewDataSource>
{
NSMutableArray *bookmarks;

}

@property (nonatomic, retain) NSMutableArray *bookmarks;
@end 
```

书签.m

```
#import "BookmarksViewController.h"

@interface BookmarksViewController ()

@end

@implementation BookmarksViewController

@synthesize bookmarks;

- (id)initWithStyle:(UITableViewStyle)style
{
self = [super initWithStyle:style];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Uncomment the following line to preserve selection between presentations.
// self.clearsSelectionOnViewWillAppear = NO;

// Uncomment the following line to display an Edit button in the navigation bar for this view controller.
// self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)viewWillAppear:(BOOL)animated
{
NSUserDefaults *storage = [NSUserDefaults standardUserDefaults];
NSDictionary *storedBookmarks = [NSKeyedUnarchiver unarchiveObjectWithData:[storage objectForKey:@"bookmarks"]];

if (storedBookmarks == nil)
{
    storedBookmarks = [[NSDictionary alloc] init];
}

self.bookmarks = [storedBookmarks allValues];

[self.tableView reloadData];    
[super viewWillAppear:animated];
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [self.bookmarks count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"BookmarkCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}
Bookmark *item = [self.bookmarks objectAtIndex:indexPath.row];

NSArray *chunks = [item.name componentsSeparatedByString: @","];

NSString *name;
NSString *book;
NSString *chapter;

if ([chunks count] > 0)
{
    name = [chunks objectAtIndex:0];
    if ([chunks count] > 1)
    {
        book = [chunks objectAtIndex:1];
        if ([chunks count] > 2)
        {
            chapter = [chunks objectAtIndex:2];
        }
    }
}

cell.textLabel.text = name;
cell.detailTextLabel.text = book;

return cell;
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([[segue identifier] isEqualToString:@"FromBookmarksToShowTaskSegue"])
{
    ShowTaskViewController *vc = [segue destinationViewController];

    Bookmark *item = [self.bookmarks objectAtIndex:[self.tableView indexPathForSelectedRow].row];

    vc.taskId =  item.id;
}
}

/*
// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
// Return NO if you do not want the specified item to be editable.
return YES;
}
*/

// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
if (editingStyle == UITableViewCellEditingStyleDelete) {
    // Delete the row from the data source
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

    [bookmarks removeObjectAtIndex:indexPath.row];

}   
else if (editingStyle == UITableViewCellEditingStyleInsert) {
    // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
}   
} 
```

******* *编辑：在我改变位置之后**

 **[tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade]; [书签 removeObjectAtIndex:indexPath.row];

**到**

```
[bookmarks removeObjectAtIndex:indexPath.row];
[tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade]; 
```

我在另一个文件中收到一个新的 SIGBART 错误，代码如下：

```
#import <UIKit/UIKit.h>
#import "AppDelegate.h"

int main(int argc, char *argv[])
{
@autoreleasepool {
    return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
}
} 
```

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T10:58:21.540

放线

```
[bookmarks removeObjectAtIndex:indexPath.row]; 
```

**前**

```
[tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade]; 
```

**编辑**

我发现这条线的另一个问题：

```
self.bookmarks = [storedBookmarks allValues]; 
```

这不会保留数组的可变性。请更改它，以便您可以添加/删除书签对象：

```
self.bookmarks = [[storedBookmarks allValues] mutableCopy]; 
```**

# c# - c#中的新进程tcp转储

> ID：12129405
> 
> 赞同：1
> 
> 时间：2012-08-26T10:37:19.030
> 
> 标签：c#, process, createprocess, tcpdump

我正在尝试创建一个进程来在我的程序中运行 tcpdump ..

这是代码

```
 Process tcpdump = new Process();
            tcpdump.StartInfo.FileName= @"/usr/local/bin/tcpdump";
            tcpdump.StartInfo.CreateNoWindow = true;
            tcpdump.StartInfo.Arguments = " -i en1 -c 10 -nn tcp and src host " + ip + " and port " + ports[i];
            tcpdump.Start();
            tcpdump.WaitForExit(); 
```

但是我得到了错误并且该过程没有正确启动，这是我得到的错误消息

```
open: invalid option -- i
Usage: open [-e] [-t] [-f] [-W] [-R] [-n] [-g] [-h] [-b <bundle identifier>] [-a <application>] [filenames] [--args arguments]
Help: Open opens files from a shell.
      By default, opens each file using the default application for that file.  
      If the file is in the form of a URL, the file will be opened as a URL.
Options: 
      -a                Opens with the specified application.
      -b                Opens with the specified application bundle identifier.
      -e                Opens with TextEdit.
      -t                Opens with default text editor.
      -f                Reads input from standard input and opens with TextEdit.
      -F  --fresh       Launches the app fresh, that is, without restoring windows. Saved persistent state is lost, excluding Untitled documents.
      -R, --reveal      Selects in the Finder instead of opening.
      -W, --wait-apps   Blocks until the used applications are closed (even if they were already running).
          --args        All remaining arguments are passed in argv to the application's main() function instead of opened.
      -n, --new         Open a new instance of the application even if one is already running.
      -j, --hide        Launches the app hidden.
      -g, --background  Does not bring the application to the foreground.
      -h, --header      Searches header file locations for headers matching the given filenames, and opens them. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T11:13:02.737

问题在于参数传递给 open 命令的方式。

请参阅SO 中[类似问题](https://stackoverflow.com/questions/2255624/how-to-use-process-start-or-equivalent-with-mono-on-a-mac-and-pass-in-argument)的解决方案。

# ios - IOS - 从 UIBeizerPath 获取二进制掩码（位掩码）

> ID：12129407
> 
> 赞同：0
> 
> 时间：2012-08-26T10:37:29.000
> 
> 标签：ios, mask, uibezierpath

我正在构建一个 IOS 应用程序。在我的应用程序中，我有一个用户可以手动裁剪的图像。用户裁剪图像后，我希望以二进制形式保存掩码信息。

我需要它是二进制图像，而不仅仅是作为 NSCoding 形式，因为我需要在其他平台（不仅仅是 IOS）上使用掩码信息。

如何将 UIBezierPath 转换为二进制掩码数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T12:15:47.393

首先，您必须将您的 UIBeizerPath 栅格化（描边/填充）到您的图像上下文，然后您可以使用其栅格数据进行操作。这是一个如何栅格化 UILabel 的示例：

```
UILabel* label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, siz.w, siz.h)];
label.text = [[NSString alloc] ... ];
label.font = [UIFont boldSystemFontOfSize: ... ];

UIGraphicsBeginImageContext(label.frame.size);
[label.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage* layerImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

// Get Image size
GLuint width = CGImageGetWidth(layerImage.CGImage);
GLuint height = CGImageGetHeight(layerImage.CGImage);
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

// Allocate memory for image
void *imageData = malloc( height * width * 4 );
CGContextRef imgcontext = CGBitmapContextCreate(
                                                imageData, width, height, 8, 4 * width, colorSpace,
                                                kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Little );
CGColorSpaceRelease( colorSpace );
CGContextClearRect( imgcontext,
                   CGRectMake( 0, 0, width, height ) );
CGContextTranslateCTM( imgcontext, 0, height - height );
CGContextDrawImage( imgcontext,
                   CGRectMake( 0, 0, width, height ), layerImage.CGImage );

// Create image

[.. here you can do with imageData whatever you want ..]

image.InitImage(imageData, width * height * 4, width, height, iResource_Image::ImgFormat_RGBA32);

// Release context
CGContextRelease(imgcontext);
free(imageData);
[label release]; 
```

# php - PHP mysql 最大表字段

> ID：12129408
> 
> 赞同：0
> 
> 时间：2012-08-26T10:37:46.510
> 
> 标签：php, mysql, database-design

如果我的数据库表中有超过 20 个字段的表，可以吗？

```
ID | NAME | 1 | 2 | 3 | ..... 
```

像“2”这样的每个字段都只包含 Y 或 N。或者在一张表中有这样的字段是个坏主意？这会降低我的服务器性能吗？

并且表中可能有大约 20 个或更多的 Id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T10:40:20.157

我不知道它是否会减慢数据库的速度，但它不是一个很好的数据库设计，不。您可以采取以下措施来优化设计：

制作一个表：`ID | NAME`和另一个表：`ID | NUMBER | BOOLEAN`并将两个 ID 链接在一起。

您可能会以这种方式编写更多 PHP 代码，但它会使数据库更易于管理和更整洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T10:45:34.880

如果你做额外的桌子会更好

表`names`：

```
name_ID |   name
  1        george
  2        jenny 
```

表`acl`：

```
acl_ID |   name_ID  |  page_ID | acccess
   1          1          1          Y
   2          1          2          N 
```

表`pages`：

```
 page_ID | page_name
    1        Page1
    2        Page2 
```

获得结果非常容易

```
SELECT
  names.name,
  pages.page_name,
  acl.access
FROM names
LEFT JOIN acl ON acl.name_ID = names.name_ID
LEFT JOIN pages ON pages.page_ID = acl.page_ID
WHERE
   acl.page_ID=1 AND    # or.. pages.page_name='Page1'
   names.name = 'george' 
```

会给你..

```
 name  | page_name | acccess
george     Page1        Y 
```

*   每页一行
*   每个一行`name`（无论是什么）
*   每个设置一行。（访问是/否）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T17:20:28.580

在这种情况下，我会做一个包含列、ID、名称、页面的表，并存储用户可以在“页面”字段中打开的页面的序列化数组。在 PHP 中，约翰可以打开的页面就像

```
$pagesj = array(2,4,6,7,9) 
```

;

要将它们存储在数据库中，您可以：

```
$dbpages = serialize($pagesj);
//insert $dbpages string into db for user John 
```

然后检查 John 是否可以打开给定页面，您只需执行以下操作：

```
$conn = new PDO("mysql:host=localhost;dbname=mydb","user","pass");
$q = "SELECT Pages from mytable WHERE User = $user";
$pages = $conn->query($q)->fetch(PDO::FETCH_COLUMN);
$allowed_pages = unserialize($pages);
if (in_array($currentpage,$allowed_pages))
{
//user can view page
}
else {
//can't
} 
```

重要的一点是 unserialize 和 in_array，您可以使用自己的方式运行查询，因为我以前从未使用过 PDO::FETCH_COLUMN，我不确定上述是否按预期工作，但想法是尽快序列化页面数据，反序列化它，然后检查页面是否在那里。

这就是我个人的做法，尽管老实说我看不到我以这种方式做你正在做的事情（允许某些用户查看某些页面），我可能会有用户组，或访问区域或一些这样的。

# javascript - 使用无序列表扩展 DIV

> ID：12129410
> 
> 赞同：3
> 
> 时间：2012-08-26T10:38:04.890
> 
> 标签：javascript, html, css

我正在寻找一个无序列表来过滤我的一些工作。我的过滤器工作得非常好（在这个例子中没有），我现在正处于难以对其进行造型的阶段。我尝试设置 div 的宽度并进行一些在线研究，但没有成功。

它目前看起来像这样：http: [//jsfiddle.net/XcVHU/](http://jsfiddle.net/XcVHU/)

我希望最初只显示两个词（过滤器和全部），当用户将鼠标悬停在或单击“过滤器”一词时，列表会扩展为 CSS 宽度转换以显示其他类别（Web、仍然，运动和游戏）。所以，从这里：

***过滤器 | 全部***

对此：

***过滤器 | 网站 | 仍然 | 运动 | 游戏***

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T11:06:38.957

如果你嵌套你`ul`的，例如......

```
<div id="portfolionav">
    <ul class="filter">
        <li>Filter</li>
        <ul class="subfilters">
           <li class="web"><a href="#">Web</a></li>
           <li class="still"><a href="#">Still</a></li>
           <li class="motion"><a href="#">Motion</a></li>
           <li class="games"><a href="#">Games</a></li>
        </ul>
        <li class="current all"><a href="#">All</a></li>
    </ul>    
</div>​ 
```

过渡的 CSS 更改非常简单：

```
#portfolionav ul {
    display: inline-block;
    white-space: nowrap;
   -webkit-transition: all 1s ease;
    -moz-transition: all 1s ease;
    -o-transition: all 1s ease;
    -ms-transition: all 1s ease;
    transition: all 1s ease;

}
#portfolionav ul ul {width: 0; opacity: 0;}

#portfolionav ul:hover > ul {width: 370px; opacity: 1;} 
```

[http://jsfiddle.net/jukUm/](http://jsfiddle.net/jukUm/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T11:55:31.960

更新：

## 这是带有动画和固定行高错误的最终版本：http: [//jsfiddle.net/XcVHU/9/](http://jsfiddle.net/XcVHU/9/)

另一种解决方案，没有动画：

[http://jsfiddle.net/XcVHU/4/](http://jsfiddle.net/XcVHU/4/)

该怎么办：

1.  将过滤器放在单独的嵌套 UL 中
2.  将其显示设置为内联。
3.  在准备好文档时隐藏过滤器
4.  单击时切换显示属性。

该解决方案不像@PeterSzymkowski 提供的那样有问题，并且看起来比@Duopixel 的解决方案更好（无论如何，如果您更喜欢那种动画，当项目出现在页面右侧并运行时，它可能仍然适合您进入位置）。

更新：

这是动画版本，做了一些改动，请查看：

[http://jsfiddle.net/XcVHU/7/](http://jsfiddle.net/XcVHU/7/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T11:03:44.333

分成`ul.filter`两个`ul`并使用一些代码：

```
$('#expand').click(function(e){
    e.preventDefault();
    $('.filter.hidden').show();
    var tw = $('.filter.hidden').width();
    $('.filter.hidden').css('width', '0px');
    $('.filter.hidden').animate({width: tw+'px'});

}); 
```

*   示例： http: [//jsfiddle.net/XcVHU/3/](http://jsfiddle.net/XcVHU/3/)（点击过滤器）

# java - javax.mail.search 获取最新消息的替代方法

> ID：12129415
> 
> 赞同：1
> 
> 时间：2012-08-26T10:39:27.333
> 
> 标签：java, email, jakarta-mail, postfix-mta, dovecot

除了[javax.mail.search.SentDateTerm](http://docs.oracle.com/javaee/1.3/api/javax/mail/search/SentDateTerm.html)之外，在特定的[Movemail](http://en.wikipedia.org/wiki/Movemail)文件夹中获取最新消息的好方法是什么？

看起来 doveadm 是[要走的路](https://stackoverflow.com/a/5302192/262852)，虽然我找不到 Java 驱动程序。然而，我宁愿留在 postfix 中，也不太热衷于使用 POP3（或 IMAP），尽管[集成的 Ubuntu 堆栈](http://packages.ubuntu.com/precise/dovecot-postfix)减轻了配置麻烦。javax.mail.search 的任何替代品？

我在 javax.mail.search.SentDateTerm 中看到的问题是它需要迭代文件夹，对于大文件夹来说，这可能是有问题的。在这种情况下，我只想要按发送日期的“最新”消息。

我正在使用 Thunderbird 来阅读 POP3，但是使用的是[mailutils](http://en.wikipedia.org/wiki/Mail_%28Unix%29)类型的文件夹，并且想要弹出顶部的消息，就像是一个[stack](http://en.wikipedia.org/wiki/Stack_%28abstract_data_type%29)一样。真的，就像你在 Thunderbird 看到的一样，最新消息位于顶部。

我认为使用文件系统对邮件进行排序可能是可行的：

```
root@dur:~# 
root@dur:~# head /var/mail/root 
From root@dur.bounceme.net  Sun Aug 26 00:41:11 2012
Return-Path: <root@dur.bounceme.net>
X-Original-To: root@dur
Delivered-To: root@dur
Received: by dur.bounceme.net (Postfix, from userid 0)
    id AB90A1827DF; Sun, 26 Aug 2012 00:41:11 -0700 (PDT)
To: <thufir@dur>
Cc: <root@dur>
Subject: ping 12:40
X-Mailer: mail (GNU Mailutils 2.2)
root@dur:~# 
```

Java 中的一些东西可以抓住最重要的信息吗？然而，当有更好的选择时直接使用文件系统，**这似乎很脆弱，而且通常只是一个坏主意。**也许有一些 Java 可以利用的 mailutils 或 postfix 钩子？现有的 API？

**示例命令的一个问题`head /var/mail/root`是它抓取了顶部消息，而我在特定文件夹中的顶部消息之后。**

我已经为 POP3 切换到 dovecot，但我正在寻找一种与已弹出消息进行交互的好方法。这[可能是最好的方法](https://stackoverflow.com/a/3127081/262852)，但是如何在**不**迭代整个文件夹的情况下获得最顶部或最新的消息？

另请参阅： [https ://stackoverflow.com/questions/12129820/dovecot-doveadm-java-api](https://stackoverflow.com/questions/12129820/dovecot-doveadm-java-api)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:01:16.567

如果您真的想要按**发送**日期的最新消息，则必须查看所有消息。如果您想要按**收到**日期的最新消息，这更容易 - 这是收件箱中的最后一条消息。

# eclipse - 导入 javax.transaction.UserTransaction 失败

> ID：12129427
> 
> 赞同：2
> 
> 时间：2012-08-26T10:40:28.100
> 
> 标签：eclipse, transactions, import, jta

我创建了一个新的 JPA 项目，我需要在其中使用`javax.transaction.UserTransaction`. 虽然我可以导入`javax.naming.*`，`javax.persistence.*`但我不能导入`javax.transaction.UserTransaction`：收到的消息是经典的`"The import javax.transaction.UserTransaction cannot be resolved"`。我使用 jdk.1.7.0_03 并且来自 Eclipse Indigo。

我哪里错了？谢谢，安德里亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:23:38.090

导入`javax.transaction.UserTransaction`失败，因为您的项目中没有包含它的库。您需要 JTA API/实现。通常使用与目标应用程序服务器相同的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:47:09.407

我解决了我的问题，只需在构建路径中使用 javax.transaction.jar 为 ProjectA 创建一个 Java 项目。

# android - iPhone vs Android 网站大小

> ID：12129429
> 
> 赞同：1
> 
> 时间：2012-08-26T10:40:45.343
> 
> 标签：android, iphone, css, web

我正在尝试调整[我的网站](http://olalindberg.com/)以适用于 android 和 iphone。我已经设置了几乎所有东西来缩小宽度。

当我通过调整我自己的网络浏览器窗口的大小来测试它时，它按预期工作。当我在我的 iphone 上查看它时，它工作正常。但是当我在 android（或 android 模拟器）上查看它时，它看起来与其他的不同。我附上两个屏幕截图。

我不知道从哪里开始......在此先感谢。

![安卓模拟器](../Images/ef9781ce04b51635e8fe2141631ce6f5.png)

![苹果手机](../Images/b13d8011bbe1c8bda71fb6f97b63ad86.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:04:07.073

Android 模拟器看起来不同的原因很简单：这是因为您将模拟器的屏幕设置为多宽。在您的 CSS 文件中，您已将页面设置`min-width`为 600 像素，这大于 Android 模拟器的宽度。这会导致标题被截断。

我不是网页设计师，所以你如何选择处理这么小的宽度的设计取决于你。但是，您可以在 CSS 中使用以下内容来定位此类边缘情况：

```
@media all and (max-width: 600px) {
    // Some CSS code
} 
```

或者，使用单独的样式表：

```
<link rel="stylesheet" media="all and (max-width: 600px)" href="android-stylesheet.css" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T13:03:10.337

尝试在正文中重置字体。正文 { 字体大小：100%; 另外，尝试使用视口见[http://developer.android.com/guide/webapps/targeting.html](http://developer.android.com/guide/webapps/targeting.html)

# c# - 如何从字典创建gridview

> ID：12129430
> 
> 赞同：1
> 
> 时间：2012-08-26T10:40:53.240
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我有一个字典，其中键是字符串，元素是列表

我想从元素中的每个键创建一个组。但我不知道怎么做

```
<Page.Resources>
    <!--
        Collection of grouped items displayed by this page, bound to a subset
        of the complete item list because items in groups cannot be virtualized
    -->
    <CollectionViewSource
        x:Name="groupedItemsViewSource"
        IsSourceGrouped="true"
        />

</Page.Resources>

<GridView ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}"
      IsSwipeEnabled="True">
            <GridView.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding name}"
           Foreground="White" />
                </DataTemplate>
            </GridView.ItemTemplate>
            <GridView.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" />
                </ItemsPanelTemplate>
            </GridView.ItemsPanel>
            <GridView.GroupStyle>
                <GroupStyle>
                    <GroupStyle.HeaderTemplate>
                        <DataTemplate>
<TextBlock Text="Test 123" Foreground="Gold" />
                        </DataTemplate>
                    </GroupStyle.HeaderTemplate>
                    <GroupStyle.Panel>
                        <ItemsPanelTemplate>
                            <VariableSizedWrapGrid Orientation="Vertical" />
                        </ItemsPanelTemplate>
                    </GroupStyle.Panel>
                </GroupStyle>
            </GridView.GroupStyle>
        </GridView> 
```

在循环中我创建字典

```
groups.Add(this.letters[i], items); 
```

之后我有

```
groupedItemsViewSource.Source = groups; 
```

但我什么也得不到。我应该如何更正此问题以将键作为组标题，并将每个列表作为此网格中的元素列表？

// 编辑

好的，我发现制作 List> 而不是 Dictionary 更好。我现在得到 3 个组标题（因为我的列表中有 3 个列表）但没有项目。IMO这是比第一个更好的方法

// 编辑 2 我没有看到项目导致背景和前景是白色的。愚蠢的我:) 但现在我有最后一个问题要解决。如何动态设置组标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:19:48.913

您实际上不必创建自定义类来启用分组。事实上，你可以使用 LINQ 来为你做这件事：

> var result = from act in Activities group act by act.Project into grp orderby grp.Key select grp;
> 
> cvsActivities.Source = 结果；

为了在 GridView 中显示分组项目，您必须使用 CollectionViewSource。仅将组设置为 GridView.ItemsSource 是行不通的。您必须设置 GridView.ItemsSource = a CollectionViewSource 并且 CollectionViewSource 必须指向组。您可能还必须设置 CollectionViewSource.IsSourceGrouped = true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T11:42:06.497

字典没有实现 INotifyPropertyChanged 或 INotifyCollectionChanged 如果您想要绑定工作，这是必需的

```
public class yourclass
{
    public string Key { get; set; }
    public int Value { get; set; }
}

ObservableCollection<yourclass> dict = new ObservableCollection<MyCustomClass>();
dict.Add(new yourclass{Key = "yourkey", Value = whatyouwant});
dict.Add(new yourclass{ Key = "yourkey2", Value = whatyouwant }); 
```

# jquery - jQuery：如何突出显示输入框中的文本？

> ID：12129431
> 
> 赞同：5
> 
> 时间：2012-08-26T10:41:22.967
> 
> 标签：jquery, regex, highlight

我想知道如何**在输入框中**突出显示一些文本；简单的例子，假设我想在输入时突出显示以“@”开头的所有术语。

所有条款都从远程自动完成建议列表中检索。

我面临的问题是这个输入框，因为我无法在文本周围添加 html 标签，因此无法根据这些特定术语制作 css ...

谢谢你的帮助 ！

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T11:27:35.260

*我希望*这就是你所追求的。

首先看一下[highlightTextarea](http://www.strangeplanet.fr/work/jquery-highlighttextarea/)。[朱利安 L](https://stackoverflow.com/questions/142527/highlight-text-inside-of-a-textarea/7599199#7599199)制作

有了这个，您可以执行以下操作：

```
$("textarea").highlightTextarea({
    words: ["\\B@\\w+"],
    color: "lightblue",
    id: "mark"
}); 
```

正则表达式`\\B@\\w+`在非单词边界 ( `\B`) 处断言位置，后跟 a`@`并匹配属于 . 的所有内容`\w`。

### [演示](http://jsfiddle.net/sQVe/uhHnN/3/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T10:53:00.633

您可以`.select`在 jQuery 中使用方法...这是一个简单的示例。

```
$(input).focus(function() { 
  this.select(); 
}); 
```

或者

```
$('input').click(function() {
 // the select() function on the DOM element will do what you want
 this.select();
}); 
```

**[小提琴演示](http://jsfiddle.net/HmQxZ)**

# php - _SERVER["CONTEXT_PREFIX"] 是什么

> ID：12129433
> 
> 赞同：8
> 
> 时间：2012-08-26T10:41:43.150
> 
> 标签：php

`phpinfo()`显示一个名为 的变量`_SERVER["CONTEXT_PREFIX"]`。它没有记录在[http://www.php.net/manual/en/reserved.variables.server.php](http://www.php.net/manual/en/reserved.variables.server.php)。
它到底是什么？我在哪里可以找到所有`$_SERVER[*]`变量的文档？该列表中还有一些不在 php.net 网页上的内容。

**编辑**
我从评论中看到这可能取决于服务器。我在 Windows 上使用 UniServer 堆栈，但由于这不可靠，我不会依赖此密钥是否存在。

是否存在 99% 的时间（即在所有可能的设置中）存在哪些键的列表？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-26T11:15:15.940

根据 6 月 28 日的源代码控制，它看起来像是 Apache 2.3.13 中的新功能。还有 CONTEXT_DOCUMENT_ROOT 看起来更容易理解。

“引入新的 context_document_root 和 context_prefix，它们提供有关非全局 URI 到目录映射（例如从 mod_userdir 或 mod_alias）到脚本的信息。” 资料来源： http://marc.info/?l=apache-cvs&m= [130928191414740](http://marc.info/?l=apache-cvs&m=130928191414740)

它来自 Apache，并且与您何时可以在请求 URI 和不同目​​录之间进行不同的映射有关，例如当您使用[http://example.com/~username](http://example.com/~username)访问“用户名”的 web 空间下的网站时，因此实际的文档根目录会有所不同。

我认为如果您为一个 URI 指定多个目录源，它会派上用场，例如：

```
Userdir public_html /usr/web 
```

那么您永远不确定文件是在“public_html”还是“/usr/web”（因为它先尝试一个，然后再尝试另一个），因此 CONTEXT_DOCUMENT_ROOT 和 CONTEXT_PREFIX 可以帮助您找到它。

还看不到任何正式文档，因为 2.3 似乎已在文档中被跳过（[http://httpd.apache.org/docs/](http://httpd.apache.org/docs/)）

* * *

编辑：评论已经回答了您可以依赖哪些服务器变量的另一部分（不可能说）。如果您发现“CONTEXT”变量满足您的需求，那么您可能需要编写一个函数，说明“如果它们存在，请使用它们，但如果不存在，请使用另一个”。

一个常见的例子是当您尝试（不可靠，我知道）获取源协议时。在搜索 HTTPS = 'on' 之前，您将首先检查代理添加的标头 (X_FORWARDED_PROTO)。如果环境变量恰好在您的服务器上，您可能需要执行类似操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T10:55:57.250

这不是 $_SERVER 全局的默认 PHP 键。

您可以查看`$_SERVER`全局变量的 PHP 手册：

[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

编辑：（注意加粗的句子）

> $_SERVER 是一个包含标题、路径和脚本位置等信息的数组。此数组中的条目由 Web 服务器创建。**无法保证每个 Web 服务器都会提供其中任何一个**；**服务器可能会省略一些，或提供此处未列出的其他内容。** 也就是说，在 » CGI/1.1 规范中说明了大量这些变量，因此您应该能够预料到这些变量。

# ruby-on-rails - 在 ruby on rails 中实现标准标题导航

> ID：12129437
> 
> 赞同：1
> 
> 时间：2012-08-26T10:42:44.563
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这更像是一个“如何处理它”的风格问题。但是，如果我在 ROR 中编写需要数据库查询的标题和导航，但在每个页面上都是相同的。我应该如何设置变量？

到目前为止，我一直在每个控制器中重复请求，我看到一篇提到过滤器的帖子。但这是解决这个问题的最佳方法吗？

基本上我要做的是执行此代码以生成标题导航的类别：

```
 @top_categories = Category.roots 
```

然后在视图中有一个名为 _header 的部分读取类别，这包含在默认布局中。

我希望所有页面都可以使用该变量，因为所有页面上的标题都是相同的，但是对于 Ruby，我不知道该怎么做。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T10:52:32.760

你可以在你的 applicaion_controller.rb 或 application_helper.rb 中创建一个辅助方法。您可以从任何地方访问 application_controller 中的方法（我认为 ;) ）。

如果你有像数组这样的静态内容，你可以将它存储在 application.rb 中，或者将它放在 config/initializers 文件夹中的一个额外的 rb 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T10:49:57.717

我认为在这种情况下使用`before_filte`in`ApplicationController`是最好的方法。`DRY`

这样，在向任何控制器发出任何请求之前，将触发此方法，您将在其中加载您编写的类别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T10:50:31.757

如果我理解您的问题，您的类别并没有太大变化。您可以将所有类别加载到全局哈希中并在应用程序中使用它。

将这样的代码放入 ApplicationController

```
 before_filter :fill_categories

  def fill_categories
    if $CATEGORIES.blank?
      for category in Category.roots
        $CATEGORIES[category.category_id] = category
      end
    end
  end 
```

因此，您的应用程序将有可用的 $CATEGORIES 列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T14:28:51.607

我建议使用助手（在 中`application_helper.rb`）。您可以只调用`Category.roots`辅助方法，而无需使用回调使控制器混乱。

一个例子..

```
class ApplicationHelper
  def nav_header
    Category.roots.map |category|
      content_tag( :div, category.name, :class => 'category_link' )
    end.join
  end
end 
```

当然，虽然在这种情况下您不希望视图中有复杂的逻辑，但查询很简单，您可以将其包含在部分中，您不必**预**加载所有内容：

```
<% Category.roots.each |category| -%>
  <%= link_to category.name, category %>
<% end -%> 
```

当然使用前置过滤器也很好。这两种解决方案本质上都不是“更好”，但我更喜欢让我的控制器尽可能干净。

# javascript - 将javascript与nodejs合并

> ID：12129438
> 
> 赞同：2
> 
> 时间：2012-08-26T10:42:54.537
> 
> 标签：javascript, node.js, coffeescript

我对所有节点恶作剧都是全新的，并且不太了解我遇到的问题的最佳解决方案，也许有人可以指出我的最佳解决方案。

我有一个框架 Buddy 将咖啡脚本编译成 JS 的设置[，](http://coffeescript.org/)一切运行顺利。我现在需要的是一些工具来将脚本合并并最好将它们丑化和破坏到一个脚本中。

Buddy 有一个很好的设置，它会在保存时自动编译脚本，是否有这样的工具在 Buddy 完成操作后也可以监视和执行所述操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T20:27:02.497

节点 js 有一个名为[uglify-js](https://github.com/mishoo/UglifyJS)的模块，用于处理缩小

要安装它，请运行：

```
npm install -g uglifyjs 
```

它将安装一个命令行实用程序，该实用程序接受来自标准输入的文件并将缩小的结果输出到标准输出。

要连接，您可以简单地使用`cat`命令行实用程序。

您可以在最小化之前或之后连接所有 CoffeeScript 文件。

两者都有权衡。

通过之前的连接，您将避免重复使用 coffeescript 生成的一些支持代码，但会放松对`(function(){ /* your generated code here*/ })()`CoffeeScript 生成的包装以避免污染全局范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T01:05:03.980

见[早午餐](http://brunch.io)。它包括 builder、linter、concatenator、minifier、source watcher 和其他有用的工具。

# ms-access - Access 2007 字段分配停止工作

> ID：12129441
> 
> 赞同：0
> 
> 时间：2012-08-26T10:43:07.663
> 
> 标签：ms-access, vba, ms-access-2007

一位同事对 Access 2007 中的值分配有一个小问题。问题是它在没有明显原因的情况下一夜之间停止工作。当我的同事向我发送数据库时，它似乎适用于 Access 2010。

```
Private Sub BestätigenMieter_Click()
Dim db As Database, AuswahlNr As Integer, datensatz As Recordset

Set db = CurrentDb
Set datensatz = db.OpenRecordset("KostenaufteilungWohnung", DB_OPEN_TABLE)
AuswahlNr = [AuswahlMieter]

'This Line does not work in Access 2007
Forms!MieterProObjekt!UFMieterObjekt.Form![MieterNr] = AuswahlNr

DoCmd.close acForm, "ZuteilungMieter"
DoCmd.GoToControl "LFD"
End Sub 
```

有谁知道为什么这不起作用。Access 在 2007 年甚至不执行此代码，只有当您删除该行时，它才会执行此功能。

因此，任何暗示为什么这不起作用都会受到重视。

谢谢林

- -更新 - -

感谢大家的投入。:) 我们找不到问题，尽管似乎数据库中的某些代码由于未知原因丢失了……这至少解释了为什么它不起作用。我们要求备份版本（这就是我应该首先想到的 :)）。如果问题解决了，我会更新或关闭 :)

--更新--问题已解决，备份数据库按预期工作，没有人知道为什么 :) 感谢您的输入和帮助 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:03:11.430

备份数据库解决的问题

# objective-c - 在 NSFetchedResultsController 中每 3 行分割一次

> ID：12129445
> 
> 赞同：1
> 
> 时间：2012-08-26T10:43:44.560
> 
> 标签：objective-c, ios, cocoa-touch, core-data

我想要做的是每 x 行创建 NSFetchedResultsController 部分。

我尝试制作一个瞬态属性，它将根据其索引给出其部分，如下所示：

```
- (NSNumber*)section
{
    [self willAccessValueForKey:@"section"];
    NSManagedObjectContext* context = [(AppDelegate*)[[UIApplication sharedApplication] delegate] managedObjectContext];
    NSFetchRequest* fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Animal"];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"title" ascending:YES]]];
    NSArray* array = [context executeFetchRequest:fetchRequest error:NULL];
    int order = [array indexOfObject:self];
    NSNumber *tmpValue = [NSNumber numberWithInt:order / 3];
    [self didAccessValueForKey:@"section"];
    return tmpValue;
} 
```

并通过在每个对象上触发此功能使视图控制器刷新该部分：

```
-(void)refreshSection
{
    NSManagedObjectContext* context = [(AppDelegate*)[[UIApplication sharedApplication] delegate] managedObjectContext];
    NSFetchRequest* fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Animal"];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"title" ascending:YES]]];
    NSArray* array = [context executeFetchRequest:fetchRequest error:NULL];
    int order = [array indexOfObject:self];
   [self setSection:[NSNumber numberWithInt:order / 3]];
} 
```

此解决方案有效，但对大量对象无效。

基本上，我想要实现的是：

第 0 节：
a
b
d
第 1 节：
e

如果我添加 c ：

第 0 节：
a
b
c
第 1 节：
d
e

有没有其他更优雅的方式来做到这一点？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T11:41:48.397

显然，如果您在瞬态属性中进行提取，性能将会受到负面影响。

不要担心这个瞬态属性。相反，在方法 numberOfSection 中，只返回对象的数量除以 3 并向上取整。

对于部分中的行数，只需返回 3，但请记住，最后一部分将是对象数除以 3 的余数。

添加对象时，请记住更新表，这些方法将再次被调用。

# git - 从 GitHub 存储库获取标签

> ID：12129447
> 
> 赞同：1
> 
> 时间：2012-08-26T10:44:41.083
> 
> 标签：git, github, git-tag

在我的 GitHub 存储库中的一个项目中，我一直在标记项目并推送标签：

```
git push --tags 
```

标签在 GitHub 存储库中正确显示，但是我在不同的机器上使用这个项目，在某些机器上我缺少一些标签。

但是如果我做一个 git pull：

```
git pull origin master 
```

代码已更新，但标签未更新，这意味着我只有在那台机器上创建的标签，而我没有从 GitHub 获得其余部分。

如何从 GitHub 获取所有标签到我的本地存储库中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:14:33.317

当您从远程获取时，它应该带有标签。但前提是它们[指向从分支头跟踪的对象](http://gitref.org/branching/#tag "如何故意把他们全部拉下来")。

要显式抓取所有标签，无论它们是否无法从分支头访问，您都需要使用该`--tags`标志。

```
git fetch origin --tags 
```

以上将拉下原始仓库中的所有标签。

# javascript - 遇到 CSS 问题：无法在选择框右侧放置文本

> ID：12129448
> 
> 赞同：2
> 
> 时间：2012-08-26T10:44:54.537
> 
> 标签：javascript, html, css, jquery-ui-autocomplete

为什么选择框下方会出现“用户”一词？我希望它位于选择框的右侧。我错过了什么？

> [http://jsfiddle.net/njh85/6/](http://jsfiddle.net/njh85/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T10:50:42.067

在您的选择框之后将其移动到 div 中，并为您的`.ui-combobox`

[http://jsfiddle.net/njh85/9/](http://jsfiddle.net/njh85/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T10:56:15.963

你可以这样做：

**HTML：**

```
<div class="ui-widget">
          <select id="users" name="userName">
            <option value="#">
              Select one...
            </option>
            <option value='1'>
              User1
            </option>
            <option value='2'>
              User2
            </option>
            <option value='3'>
              User3
            </option>
            <option value='4'>
              Demo
            </option>
          </select>
</div>
<div id="user">Here is a sample sentence :)</div> 
```

​CSS **：**

```
/*Users Combobox*/
.ui-combobox {
    position: relative;
    display: inline-block;
    margin-right: 36px;
}
.ui-combobox-toggle {
    position: absolute;
    top: 0;
    bottom: 0;
    margin-left: -1px;
    padding: 0;
    /* adjust styles for IE 6/7 */
    *height: 1.7em;
    *top: 0.1em;
}
.ui-combobox-input {
    margin: 0;
    padding: 0.3em;
}
#user {
 position: relative;
 top: -27px;
 left: 270px;   
} 
```

小提琴 **：**

> [http://jsfiddle.net/FlameTrap/njh85/10/](http://jsfiddle.net/FlameTrap/njh85/10/)

您所要做的就是将文本从通常的位置向左和向上移动，这可以通过使用：`position: relative`. 文本也在`<div>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T10:49:14.933

```
<div class="ui-widget">
          <select id="users" name="userName">
            <option value="#">
              Select one...
            </option>
            <option value='1'>
              User1
            </option>
            <option value='2'>
              User2
            </option>
            <option value='3'>
              User3
            </option>
            <option value='4'>
              Demo
            </option>
          </select>
       <div class="words"> user</div></div> 
```

在 div 标签中使用“用户”一词

```
 .words{
    float:right;
    color:#808080;
    font-family:Sans,ubuntu;
    font-size:18px;
    margin-right:100px;

} 
```

# logging - 服务器日志数据的机器学习

> ID：12129449
> 
> 赞同：16
> 
> 时间：2012-08-26T10:44:56.523
> 
> 标签：logging, machine-learning

我最近可以访问大量服务器日志数据（在新工作中）。我在大学时有一些机器学习的经验。日志数据包括服务器日志、数据库访问日志等。我想知道可以从这样的数据中进行什么样的学习。

我尝试的一件小事是根据过去一周的数据预测一天中某个小时的请求数量，这看起来不错，但这有点微不足道。所以，

*   从这些数据中可以进行什么样的学习？
    *   可能是根据以前垃圾邮件发送者的某些使用模式来预测 IP 对广告进行垃圾邮件点击的概率（是的，该公司对此很感兴趣）？
    *   可能正在预测什么时候流量会猛增。
*   是否有任何现有的工具/项目专门利用？
*   有什么有趣的资源/论文谈论类似的事情吗？
*   此外，服务器上特定时间与数据相关的进程活动。这对学习有用吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-22T13:41:49.717

看看 [Wei Xu](http://iiis.tsinghua.edu.cn/%7Eweixu/) et al (2010) [Experience on Mining Google's Production Console Logs](https://dl.acm.org/doi/10.5555/1928991.1928999) 和他们引用的工作。简而言之，他们：

1.  从源代码中提取日志模板（例如“Writing to file %s”）以从日志中提取标识符（日志中与 %s 对应的东西是标识符）。他们使用某些启发式方法来区分标识符和非标识符（例如时间）。
2.  使用值之间的比率而不是原始数字（例如，失败和所有提交的比率）
3.  使用主成分分析来发现此类特征向量中的异常。

您可能无法做到 1。但也许您可以提取编写自己的“解析器”的变量。

[DARPA](https://www.ll.mit.edu/r-d/datasets/1999-darpa-intrusion-detection-evaluation-dataset)也面临着在此类数据中发现攻击的挑战，但那是近 15 年前的事了。

有一些像[splunk](http://www.splunk.com)这样的工具，但除了一个漂亮的界面之外，除了简单的搜索和过滤之外，它们并没有提供太多功能。更新：[prelert](https://randymukti.wordpress.com/2014/11/23/splunk-prelert-automated-anomaly-detection-analytics/)有一个异常检测插件。

我不知道更多。如果您发现其他任何东西，请告诉我。

所以我会做什么：

1.  从日志中提取特征/变量

您可能无法像 Xu 那样访问生成消息的源代码，但我假设大部分日志可以被少数模式覆盖（例如，所有防火墙日志都将具有相同的模式）。您可以编写一个正则表达式解析器，从这些日志中提取特征（例如，在某个时间连接被拒绝）。

2.  尝试异常检测（PCA，或者只是单独偏离平均值）并对其进行预测。

# oop - 在哪里提供验证的逻辑规则

> ID：12129452
> 
> 赞同：0
> 
> 时间：2012-08-26T10:45:28.883
> 
> 标签：oop, design-patterns

我有一个文件导出器，并将字段类型验证为字符串、日期等 + 每行的字段计数。

现在，将这种逻辑的规则保留在哪里，以便负责创建 csv 的类是通用的并且与任何业务逻辑解耦，并且如果业务需求发生变化，那么导出的类永远不需要修改。

我曾考虑创建用于业务逻辑的第二个类，但这需要以下内容 - 我认为两者同样糟糕：

*   类内的硬编码规则
*   传递给构造函数的规则

似乎没有一个很好的解决方案，但这一定是一个普遍的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T12:11:39.730

像往常一样，这取决于..

数据的责任在于提供者。如上所述的“fileExporter”将导出文件，如果数据提供者被密封，那么显然您将创建一个验证器来断言数据，随后断言的数据将被传递给文件导出器。

如果它没有密封，您可以将依赖项注入其中。

IE

```
class DataProvider(IDataValidator dataValidator, IFileFormat fileFormat){...}
interface IFileFormat { void Export();}
interface IDataValidator { void AsserData(); }
class CSVDataValidator : IDataValidator{...}
class CSVFileExporter : IFileExporter {..}

var dataValidator = new CSVDataValidator();
var iFileFormat = new CSVFileFormat();
var dataProvider = new DataProvider(dataValidator, fileFormat);
var data = dataProvider.Data;
var csvFileExporter = new CSVFileExporter(data)
csvFileExporter.Export(); 
```

基本上可能性是无穷无尽的，**这取决于你想关闭什么以及你希望在未来扩展什么**

我会阅读策略/依赖注入/打开关闭原则

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T12:51:07.483

在我看来，您应该尝试使用责任链模式。如果作为参数传递的内容为“有效”，则您的客户端拥有一个验证器对象列表，每个验证器对象实现一个带有方法（即验证）的验证器接口，该方法返回真。每个组件都有自己的验证标准，但是对于通过其通用接口使用它的客户端来说，它是黑盒的。因此，当您构建系统时，您会实例化您的客户端并注入您需要的验证器。

# vb6 - https url中的查询字符串是否加密

> ID：12129453
> 
> 赞同：0
> 
> 时间：2012-08-26T10:45:29.740
> 
> 标签：vb6, https, query-string

我想使用短信网关公司的 https api。

这涉及在 url 的查询字符串部分发送机密信息。

我正在使用 ms 互联网传输控件的执行方法。

这个控件会在发送之前加密查询字符串吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T12:25:02.367

是的，这一切都是加密发送的。不过，我可能会避免使用旧控件，因为我们今天还有其他更灵活的选择。

# jquery - jQuery移动本地存储和PHP

> ID：12129458
> 
> 赞同：1
> 
> 时间：2012-08-26T10:45:46.167
> 
> 标签：jquery, mobile, storage, local

我正在尝试使用本地存储来允许我的 JQM Web 应用程序的用户控制主题。我不知道如何将本地存储数据返回给 php，以便它可以生成正确的主题。

目前，我有一个表单，允许用户选择他们想要的颜色。提交表单后，我将选定的值存储在我在 PHP 代码中用于生成页面的会话变量中。我还将值存储在用户浏览器的本地存储中。

当用户关闭浏览器并重新访问该站点时，问题就出现了。我需要从本地存储中读取首选项，我可以使用 JavaScript 来完成。然后我需要将这些值存储在我的会话变量中，以便我的 php 代码可以读取它。我尝试了以下方法，它向我显示了一个带有“成功”的警告框，但似乎实际上并没有调用 PHP 代码：

```
var themeDefault = (window.localStorage && window.localStorage.getItem('theme') != "" && window.localStorage.getItem('theme') != null) ? window.localStorage.getItem('theme') : "a";

$(document).live('pageinit', function () {
  $.ajax({
    url: "theme.php",
    cache: false,
    type: "POST",
    data: {"theme=" + themeDefault},
          success: function(){
                alert('success');
          }
  });
}); 
```

上面的代码有什么问题吗？为什么即使我收到“成功”消息它也不会调用 theme.php？

另一个问题是，我只想在登陆页面一次执行此代码。我怎样才能让它做到这一点？目前，它在每个页面上执行一次。

我的另一个选择是使用 cookie。你认为这会是一个更好的计划吗？

# javascript - JavaScript 运行时错误：完成此操作所需的数据尚不可用

> ID：12129460
> 
> 赞同：-1
> 
> 时间：2012-08-26T10:46:00.777
> 
> 标签：javascript, jquery, ajax

我在我的网站上使用了一些 jQuery 的东西，它引用了 Google API 库，尽管引用的文件似乎有很多问题。这个文件有更稳定的版本吗？或者，我们是否在法律上允许下载这个特定的文件，并对其进行修改以使其不再搞砸？

如您所见，Visual Studio 向控制台输出了数万亿行：

> 0x8000000a - JavaScript 运行时错误：完成此操作所需的数据尚不可用。在 [https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js](https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js) 0x800a139e 中的第 16 行第 49860 列引发了异常 - JavaScript 运行时错误：在第 16 行第 16 列引发了 SyntaxError 异常50063

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T10:52:19.007

IANAL 但您可以从 jquery 站点下载 jquery 代码。我认为这不会解决您的真正问题，因为我怀疑它在您的代码中。

# jquery - JQuery Mobile 内容正在合并而不是更新

> ID：12129465
> 
> 赞同：0
> 
> 时间：2012-08-26T10:47:05.707
> 
> 标签：jquery, jquery-mobile

我在用：

```
$('#mypage').live("pageinit", function(){ 

$('#mypage').bind('pageshow', function() {

//json gets data here

}...etc 
```

我的问题是代码没有得到一个新的页面，只是每次我进入页面时都添加相同的内容。

所以：

页面加载......我去#mypage，我得到：

例如：

A. 这里的一些内容

然后如果我再次加载页面，我会得到 2 个相同的实例：

A. 这里有一些内容 A. 这里有一些内容

等等。

我需要每次更新但不合并数据。

更新：

页面显示代码在这里：

```
 $('#mypage').bind('pageshow', function() {

    $.getJSON("http://mysite/api/get_data", function(data){
    var output = '';

    $.each(data.mydata, function(index, value){

    output += '<li><a href="#"><img src="'+value.thumbnail_url+'" /><h3>'+value.title+'</h3>'+value.body+'</a></li>';

    });
    $('#my_listview').append(output).listview('refresh');
    }).error(function(args) {
console.log(args);

});

});//end of pageshow 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:38:36.887

问题是您总是将数据附加到 my_listview 元素。

替换为`$('#my_listview').append(output)`，`$('#my_listview').html(output)`问题将得到解决。

# .net - TextBox 显示变量类型 - 不是内容

> ID：12129466
> 
> 赞同：1
> 
> 时间：2012-08-26T10:47:06.843
> 
> 标签：.net, string, c++-cli

我尝试将文件夹名称放在文本框中，所以我使用了以下代码：

```
private: System::Void textBox1_DragEnter(System::Object^  sender, System::Windows::Forms::DragEventArgs^  e) {
             if (e->Data->GetDataPresent(DataFormats::FileDrop))
             {
                 e->Effect = DragDropEffects::Copy;
             }
         }
private: System::Void textBox1_DragDrop(System::Object^  sender, System::Windows::Forms::DragEventArgs^  e) {
             if (e->Data->GetDataPresent(DataFormats::FileDrop))
             {
                 textBox1->Text = Convert::ToString(e->Data->GetData(DataFormats::FileDrop));
             }
         } 
```

它正在工作（0个错误）但是当我将文件夹放入文本框时，文本框显示的不是路径，而是：`System.String[]`

我正在使用：C++、.NET、Visual Studio 2010

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T10:50:57.980

```
e->Data->GetData(DataFormats::FileDrop) 
```

正在返回一个`string[]`（字符串数组），而不是单个`string`. 当您尝试使用 将其转换为字符串`Convert::ToString`时，它仅使用显示类型名称的默认`Object.ToString()`行为。你还期望它做什么？没有将字符串数组聚合为单个字符串的默认概念。

您应该使用返回的对象`GetData()`，并自己将其转换为字符串。如果您期望一个项目，请对其进行测试，抓住第一个项目，然后您就有了字符串。

如果你想支持很多项目，你可以使用`string.Join()`example 并指定一个分隔符。

您应该使用它来访问已删除的文件数据：

```
array<System::String^>^ items = (array<System::String^>^)e->Data->GetData(DataFormats::FileDrop); 
```

从那里您可以决定如何转换`items`为字符串。

# xcode - 命令行新手并尝试构建脚本-此错误是什么意思？

> ID：12129468
> 
> 赞同：4
> 
> 时间：2012-08-26T10:47:25.063
> 
> 标签：xcode, ios5

我对构建脚本完全陌生，所以如果答案很明显，请原谅我。这是我在终端上的输入：

```
Joels-MacBook-Air:~ joel$ /Users/joel/Desktop/NameOfApp/build_facebook_ios_sdk_static_lib.sh 
```

这是我得到的输出：

```
Project Home: /Users/joel/Desktop
Start Universal facebook-ios-sdk SDK Generation
Step 1 : facebook-ios-sdk SDK Build Library for simulator and device architecture
/Users/joel/Desktop/NameOfApp/build_facebook_ios_sdk_static_lib.sh: line 56: cd: /Users/joel/Desktop/src: No such file or directory
Build settings from command line:
SDKROOT = iphonesimulator5.1
SYMROOT = /Users/joel/Desktop/build

xcodebuild: error: The directory /Users/joel/Desktop does not contain an Xcode project. 
```

我认为问题从上面很清楚，但以防万一这里是脚本的代码——如果它不相关，请忽略它：

```
!/bin/sh
/*
Copyright 2004-present Facebook. All Rights Reserved.

This script will build a static library version of the Facebook iOS SDK.
You may want to use this script if you have a project that has the 
Automatic Reference Counting feature turned on. Once you run this script
you will get a directory under the iOS SDK project home path:
 lib/facebook-ios-sdk
You can drag the facebook-ios-sdk directory into your Xcode project and
copy the contents over or include it as a reference.*/

//Function for handling errors
die() {
echo ""
echo "$*" >&2
exit 1
}

//The Xcode bin path
if [ -d "/Developer/usr/bin" ]; then
//< XCode 4.3.1
XCODEBUILD_PATH=/Developer/usr/bin
else
// >= XCode 4.3.1, or from App store
XCODEBUILD_PATH=/Applications/XCode.app/Contents/Developer/usr/bin
fi
XCODEBUILD=$XCODEBUILD_PATH/xcodebuild
test -x "$XCODEBUILD" || die "Could not find xcodebuild in $XCODEBUILD_PATH"

// Get the script path and set the relative directories used for compilation
cd $(dirname $0)
SCRIPTPATH=`pwd`
cd $SCRIPTPATH/../

//The home directory where the SDK is installed
PROJECT_HOME=`pwd`

echo "Project Home: $PROJECT_HOME"

//The facebook-ios-sdk src directory path
SRCPATH=$PROJECT_HOME/src

//The directory where the target is built
BUILDDIR=$PROJECT_HOME/build

//The directory where the library output will be placed
LIBOUTPUTDIR=$PROJECT_HOME/lib/facebook-ios-sdk

echo "Start Universal facebook-ios-sdk SDK Generation"

echo "Step 1 : facebook-ios-sdk SDK Build Library for simulator and device architecture"

cd $SRCPATH

$XCODEBUILD -target "facebook-ios-sdk" -sdk "iphonesimulator" -configuration "Release" SYMROOT=$BUILDDIR clean build || die "iOS Simulator build failed"
$XCODEBUILD -target "facebook-ios-sdk" -sdk "iphoneos" -configuration "Release" SYMROOT=$BUILDDIR clean build || die "iOS Device build failed"

echo "Step 2 : Remove older SDK Directory"

\rm -rf $LIBOUTPUTDIR

echo "Step 3 : Create new SDK Directory Version"

mkdir -p $LIBOUTPUTDIR

echo "Step 4 : Create combine lib files for various platforms into one"

//combine lib files for various platforms into one
lipo -create $BUILDDIR/Release-iphonesimulator/libfacebook_ios_sdk.a $BUILDDIR/Release-iphoneos/libfacebook_ios_sdk.a -output $LIBOUTPUTDIR/libfacebook_ios_sdk.a || die "Could not create static output library"

echo "Step 5 : Copy headers Needed"
\cp $SRCPATH/*.h $LIBOUTPUTDIR/
\cp $SRCPATH/JSON/*.h $LIBOUTPUTDIR/

echo "Step 6 : Copy other file needed like bundle"
\cp -r $SRCPATH/*.bundle $LIBOUTPUTDIR

echo "Finished Universal facebook-ios-sdk SDK Generation"
echo ""
echo "You can now use the static library that can be found at:"
echo ""
echo $LIBOUTPUTDIR
echo ""
echo "Just drag the facebook-ios-sdk directory into your project to include the Facebook iOS SDK static library"
echo ""
echo ""

exit 0 
```

我的下一步是什么？

感谢您的帮助，伙计们和女孩们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T10:58:01.030

您需要使*当前目录*成为包含`.xcodeproj`（特殊）文件夹的目录：

```
(cd $PROJECT_HOME; xcodebuild -target ...) 
```

也`xcodebuild`应该已经在您的文件中`$PATH`，因此您可以转储所有设置的东西`$XCODEBUILD`。`xcode-select`然后，您可以使用( [manpage](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/xcode-select.1.html) )在 Xcode 安装之间进行选择。

# javascript - 移动浏览器 - 如何删除拖动到水平滚动

> ID：12129470
> 
> 赞同：2
> 
> 时间：2012-08-26T10:47:42.703
> 
> 标签：javascript, mobile, browser, touch

在宽度大于移动视口宽度的页面中。我可以向左或向右滑动以水平滚动。如何删除它？因为我会手动使用 javascript 进行水平滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:08:26.830

您可以使用 CSS[溢出-x](https://developer.mozilla.org/en-US/docs/CSS/overflow-x)属性：

```
html, body {
    overflow-x: hidden;
} 
```

# sql - 在 Linq to SQL 中的多个表上使用聚合

> ID：12129474
> 
> 赞同：2
> 
> 时间：2012-08-26T10:49:03.677
> 
> 标签：sql, linq, join, aggregate

几天来我一直在寻找答案，每次我认为我已经接近时，我都会遇到一些障碍。

我有两张表，一张带有`players`（playerID，Name），一张带有`activities`（actionID，playerID，Quarter，Score）。我想对`join`这些表格进行汇总，计算每个球员在每个季度的得分。在输出中，我想查看播放器表（名称）以及活动表（季度）的内容，当然还有总和（分数）。

在 SQL 中，它会是这样的：

```
SELECT p.Name, a.Quarter, 'TotalScore' = sum(a.Score) 
FROM players p
JOIN activities a on p.playerID = a.playerID
GROUP BY p.Name, a.Quarter 
```

我找到了几个示例，使用 Join 或 Group Join，但我似乎无法从子表中获取数据，除了聚合。

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T11:06:33.543

您不需要使用`Join`（请参阅[Why use LINQ Join on a simple one-many relationship？](https://stackoverflow.com/questions/7229569/why-use-linq-join-on-a-simple-one-many-relationship)），但您需要使用`GroupBy`.

```
var players = context.Players;
var activities = players.SelectMany(p => p.Activities);
var groups = activities.GroupBy(a => new 
{
    Name = a.Player.Name,
    Quarter = a.Quarter
});

var result = groups.Select(g => new 
{
    Name = g.Key.Name,
    Quarter = g.key.Quarter,
    Score = g.Sum(a => a.Score)
}; 
```

# asp.net-mvc-3 - 在实体框架中如何从多对多关联中进行选择？

> ID：12129477
> 
> 赞同：1
> 
> 时间：2012-08-26T10:49:27.963
> 
> 标签：asp.net-mvc-3, entity-framework, select, many-to-many

我的实体框架模型中的“类别”和“产品”实体之间存在多对多关联。看一看：

![多对多](../Images/c2fb7e7e5be454ae2509f7410609c910.png)

**问题：**我不知道如何选择那些“与给定**类别***相关联的***产品**” 。

 ***在这里，我有我想要的伪代码：

```
var query = from PRD in MyEFModel.Product
            where PRD.Category.ID == GivenCategoryID
            select PRD; 
```

希望你意识到我需要什么。使用 LINQ 还是 Lambda 并不重要。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T20:18:04.243

我的问题的答案在[这里](http://tinyurl.com/9j4tgcg;)得到了彻底的描述。

无论如何，我将包含拯救我的代码：

```
var prod = EFModel.Products.Where(x => x.Categories.Any(c => c.ID == id)); 
```

甚至这应该工作：

```
from s in dc.Products
from c in s.Categories
where c.ID == id
select s; 
```

希望这可以解决其他人的问题:)***

# ubuntu - 用 1.50 替换默认的旧 boost 1.46

> ID：12129478
> 
> 赞同：3
> 
> 时间：2012-08-26T10:49:38.990
> 
> 标签：ubuntu, boost, installation, ubuntu-11.10

我安装了 Ubuntu 11.10 和内核版本 3.0.0-23-generic 和 +/- 默认情况下，我得到以下 Boost 版本 1.46.1，它安装在`/usr/include/boost`and下`/usr/lib`：

```
bravegag@Zeus:~/code/roofline/tool$ dpkg --get-selections | grep boost
libboost-date-time1.46.1        install
libboost-dev                    install
libboost-iostreams1.46.1        install
libboost-program-options1.46.1  install
libboost-serialization1.46.1    install
libboost-thread1.46.1           install
libboost1.46-dev                install 
```

我可以尝试通过标准的 Ubuntu 方式更新它，但这很可能意味着我需要获得一些第三方 ppa 并作为副作用拉出很多废话，这会使我的系统不稳定，我不希望那样。所以我从源代码安装了 Boost 1.50，它安装在`/usr/local/include/boost`和`/usr/local/lib`.

一个 CMake 项目我选择了 1.50 版本没有问题。但是，我使用的一个使用“默认”系统设置编译和链接的工具最终选择了 1.46.1 版本并导致错误消息`src/utils.h:17:25: error: ‘boost::BOOST_FOREACH’ has not been declared`，因此显然没有选择 1.50 版本。

我尝试像这样覆盖默认的 g++/gcc Boost 版本：

```
export CPLUS_INCLUDE_PATH=/usr/local/include/boost/:$CPLUS_INCLUDE_PATH   
export LIBRARY_PATH=/usr/local/lib/:$LIBRARY_PATH 
```

但这也不能解决问题……我的问题是我能不能简单地清除所有旧的 Boost 1.46 安装并转移到默认安装`/usr/include`和`/usr/lib`1.50 安装？这样做会导致我的系统崩溃吗？我不想冒另一个重新安装狂潮的风险。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T13:59:57.933

> I could try updating it by the standard Ubuntu means but this will most likely imply I need to get some third party ppa and pull as side effect lot of crap that will make my system unstable

You can add a PPA, install only the packages you want and (if the PPA contains more than just the Boost libraries) remove it, so that no other package will get auto-updated. I think that's the easiest way to go.

> However, a tool I am using that compiles and links using the "default" system settings ends up picking the 1.46.1

What kind of tool is it? Maybe you can configure it to use Boost from a custom location? If it's gcc-based, making it pass -I and -L flags to the compiler and linker might help.

> can I not simply sweep out all those old Boost 1.46 installations and move over to the default /usr/include and /usr/lib the 1.50 installation? would doing this cause my system to break?

In most GNU/Linux distributions (with Ubuntu among them) the `/usr` prefix is reserved for software managed with the distribution's package manager. Installing a non-packaged software there will work at first, but you may have some trouble (e.g. package manager complaints) when some package will actually contain the same files. That's why for manually compiled, non-packaged software it's a common practice to use other prefixes like `/usr/local` or `/opt/something`.

Most shared libraries are versioned, so it is safe to have multiple versions of them installed on the same system at the same time. Particularly, you can have multiple versions of Boost runtime packages in Ubuntu. If you still want to make a manual install of Boost to `/usr`, you don't have to remove the old Boost runtime version, which is good if you found out that some important software packages depend on them.

However, before installing your newly compiled Boost to `/usr`, firstly remove from your system all *boost*dev packages (and all other *dev packages that depend on them), because they contain the header files (many Boost components are header-only), static libraries and symbolic links to particular runtime libraries version.

To confirm that it works, I just compiled and installed Boost 1.51 to `/usr` on my Ubuntu 11.04 using this method and nothing broke. Aptitude still uses Boost 1.42:

```
$ ldd /usr/bin/aptitude | grep boost
libboost_iostreams.so.1.42.0 => /usr/lib/libboost_iostreams.so.1.42.0 (0x00007f536ee77000) 
```

And newly compiled programs use the new version:

```
$ g++ my-boost-test.c -lboost_thread -o my-boost-test
$ ldd my-boost-test | grep boost
libboost_thread.so.1.51.0 => /usr/lib/libboost_thread.so.1.51.0 (0x00007f543d1df000)
libboost_chrono.so.1.51.0 => /usr/lib/libboost_chrono.so.1.51.0 (0x00007f543c49e000)
libboost_system.so.1.51.0 => /usr/lib/libboost_system.so.1.51.0 (0x00007f543c29a000) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T14:05:04.320

你的问题

> 我的问题是我能不能简单地清除所有旧的 Boost 1.46 安装并转移到默认的 /usr/include 和 /usr/lib 1.50 安装？这样做会导致我的系统崩溃吗？我不想冒另一个重新安装狂潮的风险。

得到一个明确的**是的，它可以**，因为包之间有很多反向依赖关系，因此依赖于特定版本。例如在我的 Ubuntu 系统上（升级了好几次）

```
edd@max:~$ dpkg -l | grep libboost-date-time | cut -c-72
ii  libboost-date-time-dev                        1.48.0.2              
rc  libboost-date-time1.38.0                      1.38.0-6ubuntu6       
ii  libboost-date-time1.40.0                      1.40.0-6ubuntu1       
rc  libboost-date-time1.42.0                      1.42.0-4ubuntu2       
ii  libboost-date-time1.46-dev                    1.46.1-7ubuntu3       
ii  libboost-date-time1.46.1                      1.46.1-7ubuntu3       
edd@max:~$ 
```

我们看到 1.38 和 1.42 已被完全替换，但仍有其他软件包依赖于 1.40 和 1.46，即使我的开发版本现在是 1.48。

所以你最好的办法是......如果存在这样的版本，从 PPA 获得 1.50 甚至 1.51，或者安装到`/usr/local`并相应地调整你的 makefile / configure / cmake / ... 设置。

# facebook - Facebook like 插件，名称中带有点

> ID：12129480
> 
> 赞同：0
> 
> 时间：2012-08-26T10:49:48.167
> 
> 标签：facebook, social

我正在尝试从[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)获取类似 facebook 的插件。在“喜欢的网址”部分，当我添加 www.facebook.com/riyasat.ali.16 时，它只是不起作用或显示喜欢按钮。但是当我输入 www.facebook.com/newyork 时它工作正常。

现在，如果我输入任何名称中带有点 (.) 的名称，则即使在开发人员页面上也不会显示任何类似的按钮。请帮助我如何解决它。

注意：我正在做的所有工作都在 Facebook 开发者页面上。

谢谢。瑞伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:40:20.297

您从根本上误解了 Like Button 插件是什么以及它是如何工作的。

您正试图将“赞”按钮指向个人 Facebook 个人资料。这行不通。点赞按钮用于点赞外部 URL 和 Facebook 页面，而不是个人资料。

# javascript - 我怎么知道用户什么时候点击了 Facebook 的赞按钮？

> ID：12129484
> 
> 赞同：3
> 
> 时间：2012-08-26T10:50:19.727
> 
> 标签：javascript, facebook

我试图实现 Like 按钮以及一些在喜欢页面时触发的代码，但我无法让它工作。

当我喜欢页面时 FIrebug 显示此错误：

```
Event.__inlineSubmit is not a function 
```

除了我喜欢的页面之外，什么也没有发生（即没有警报/重定向/其他）。到目前为止的代码：

```
<div id="fb-root"></div>

<script type="text/javascript">
<!--
    window.fbAsyncInit = function () {
        FB.init({ appId: '---MYAPPID---', status: true, cookie: true, xfbml: true });
        FB.Event.subscribe('edge.create', function (href, widget) {
            // track the click on the "Like" button here
            alert(href);
        });
    };
    (function () {
        var e = document.createElement('script');
        e.type = 'text/javascript';
        e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
        e.async = true;
        document.getElementById('fb-root').appendChild(e);
    } ());
//-->
</script>

<div class="fb-like" data-send="false" data-layout="box_count" data-width="60" data-show-faces="false"></div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T10:53:17.263

[http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

```
FB.Event.subscribe('edge.create',
function(response) {
    alert('You liked the URL: ' + response);
}
); 
```

# php - 使用 PHP SDK 获取 Facebook Wall Post

> ID：12129487
> 
> 赞同：0
> 
> 时间：2012-08-26T10:50:47.973
> 
> 标签：php, facebook

嗨，任何人都可以帮助我获取 Facebook 页面的帖子并将其显示在我的网页中

这是网址。 [https://www.facebook.com/yakimonos](https://www.facebook.com/yakimonos)

我曾使用 facebook 登录并向朋友发送邀请。所以我有一些使用 facebook sdk 的基本知识。

但我不知道如何继续这项任务。

所以请帮助我。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T11:45:11.847

您可以使用 FQL 来获取页面的帖子。您将需要`read_stream`许可。

```
SELECT message FROM stream WHERE  source_id = 'page_id' and actor_id = 'page_id' 
```

对于您的页面-

```
$fql = "SELECT message FROM stream WHERE  source_id = '183144838398839' and actor_id = '183144838398839'";
$posts = $facebook->api(array(
    'method' => 'fql.query',
    'query' => $fql,
));

print_r($posts ); 
```

# regex - 正则表达式的值生成器

> ID：12129489
> 
> 赞同：1
> 
> 时间：2012-08-26T10:51:30.747
> 
> 标签：regex

我有一些正则表达式，例如：“/[0-9]{3}/”
我需要这个正则表达式的值生成器。

```
regexp = "/[0-9]{3}/"
value_generator(regexp, 5) # 5 is count of values. 
```

我想输出
324
533
654
444
546 的列表

有可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T10:55:18.180

只是与正则表达式匹配的随机数据？

只需生成无限数量的随机字符串，选择那些碰巧与您的正则表达式匹配的字符串并输出这些匹配项。

# ruby - 如何将哈希项映射到方法参数？

> ID：12129496
> 
> 赞同：5
> 
> 时间：2012-08-26T10:52:53.223
> 
> 标签：ruby, method-invocation

我有一个方法，其中包含很长的可选参数列表，例如：

```
def foo(foo = nil, bar = nil, baz = nil, qux = nil)
    # no-op
end 
```

我认为调用该方法并将拆分哈希作为参数传递将通过将键与方法参数匹配来将哈希项映射到参数：

```
params = { bar: 'bar', foo: 'foo' }
foo(*params) 
```

不幸的是，当我在使用拆分哈希调用方法后检查局部变量时，如果传入拆分数组，我得到的正是我所期望的，但这不是我所希望的：

```
foo == [:bar, 'bar'] # hoped: foo == 'foo'
bar == [:foo, 'foo'] # hoped: bar == 'bar' 
```

我在这里缺少什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-26T10:58:07.607

（这个答案是指提出问题时当前的 Ruby 版本。请参阅编辑以了解今天的情况。）

**Ruby 不支持按名称传递参数。**[splat 运算符](https://github.com/rubyspec/rubyspec/blob/master/language/splat_spec.rb)( )通过`*`调用任意可枚举对象来扩展`to_ary`它，并将结果拼接到参数列表中。在您的情况下，您传入的可枚举是一个哈希，它被转换为一个键值对数组：

```
[2] pry(main)> params.to_a
=> [[:bar, "bar"], [:foo, "foo"]] 
```

所以函数的前两个参数将是值`[:bar, "bar"]`和`[:foo, "foo"]`（不管它们的参数名称！）。

如果你想在 Ruby 中使用类似于关键字参数的东西，你可以利用在将哈希作为最后一个参数传递给函数时不需要大括号的事实：

```
def foo(opts = {})
    bar = opts[:bar] || <default>
    foo = opts[:foo] || <default>
    # or with a lot of parameters:
    opts = { :bar => <default>, :foo => <default>, ... }.merge(opts)
end

foo(foo: 3)  # equivalent to foo({ foo: 3 }) 
```

**编辑**：

从 2.0 版开始，Ruby 现在支持具有专用语法的[命名参数。](http://robots.thoughtbot.com/ruby-2-keyword-arguments)感谢用户[jgoyon](https://stackoverflow.com/users/740485/jgoyon)指出这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T11:15:10.267

这个问题被称为命名参数。因为 Ruby 没有命名参数，所以这是处理它的经典方法：

```
def foo(options = {})
  options = {:foo => nil, :bar => nil, :baz => nil, qux => nil}.merge(options)
  ..
end 
```

或使用`ActiveSupport::CoreExtensions::Hash::ReverseMerge`from`Rails`

```
def foo(options = {})
  options.reverse_merge!{:foo => nil, :bar => nil, :baz => nil, qux => nil}
  ..
end 
```

在未来的 Ruby 2.0 版本中，可以使用命名参数

```
def foo(foo: nil, bar: nil, baz: nil, qux: nil)
  puts "foo is #{foo}, bar is #{bar}, baz is #{baz}, ..."
  ..
end 
```

# android - 当我点击“保存”按钮时，该条目不会被添加到 sqlite 数据库中

> ID：12129503
> 
> 赞同：0
> 
> 时间：2012-08-26T10:54:36.973
> 
> 标签：android, sqlite

我有一个文本备忘录 Android 应用程序，它接收文本并将其添加到数据库中。我之前在数据库中添加了一些东西，当我打开备忘录活动时，这些先前输入的数据的列表显示在行中。但是当我创建一个新的备忘录并点击`save`时，什么也没有发生。它既不显示错误也不显示“强制关闭”对话。

这是我的 MemoActivity.java：

```
public class MemoActivity extends ListActivity {
private Button newMemoButton;
Typeface kannadaFont;
private MemoDbAdapter memoDbAdapter;
private Cursor cursor;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.memo);
    kannadaFont = Typeface.createFromAsset(getAssets(), "fonts/Lohit-Kannada.ttf");

    memoDbAdapter = new MemoDbAdapter(this);
    memoDbAdapter.open();
    fillData();

    // Use our own list adapter
    setListAdapter(new MemoListAdapter(this));

    newMemoButton = (Button) findViewById(R.id.buttonNewMemo);
    newMemoButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View arg0) {
            Intent intent = new Intent(getBaseContext(), TextEditorActivity.class);
            // Intent intent = new Intent(MemoActivity.this, TextEditorActivity.class);
            startActivity(intent);
        }
    });
}

@Override
protected void onDestroy() {
    super.onDestroy();
    if (memoDbAdapter != null) {
        memoDbAdapter.close();
    }
}

private void fillData() {
    cursor = memoDbAdapter.fetchAllMemos();
    startManagingCursor(cursor);
    String[] from = new String[] { MemoDbAdapter.KEY_CREATED_DATE, MemoDbAdapter.KEY_CREATED_TIME,
            MemoDbAdapter.KEY_NOTE };
    int[] to = new int[] { R.id.createdDate, R.id.createdTime, R.id.content };
    // Now create an array adapter and set it to display using our row
    SimpleCursorAdapter notes = new MemoListAdapter2(this, R.layout.memo_entry, cursor, from, to);
    setListAdapter(notes);
}

private class MemoListAdapter2 extends SimpleCursorAdapter {
    public MemoListAdapter2(Context context, int layout, Cursor c, String[] from, int[] to) {
        super(context, layout, c, from, to);
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        String createdDate = cursor.getString(cursor.getColumnIndex(MemoDbAdapter.KEY_CREATED_DATE));
        String createdTime = cursor.getString(cursor.getColumnIndex(MemoDbAdapter.KEY_CREATED_TIME));
        String memoNote = cursor.getString(cursor.getColumnIndex(MemoDbAdapter.KEY_NOTE));
        String memoId = cursor.getString(cursor.getColumnIndex(MemoDbAdapter.KEY_ROWID));
        int position = new Integer(memoId);

        MemoView mv = new MemoView(context, LayoutInflater.from(context), createdDate, createdTime,
                memoNote, false);
        mv.setOnClickListener(new OnItemClickListener(position));
        mv.editButton.setOnClickListener(new OnEditMemoClickListener(position));
        mv.deleteButton.setOnClickListener(new OnDeleteMemoClickListener(position));
        return mv;
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        String createdDate = cursor.getString(cursor.getColumnIndex(MemoDbAdapter.KEY_CREATED_DATE));
        String createdTime = cursor.getString(cursor.getColumnIndex(MemoDbAdapter.KEY_CREATED_TIME));
        String memoNote = cursor.getString(cursor.getColumnIndex(MemoDbAdapter.KEY_NOTE));
        String memoId = cursor.getString(cursor.getColumnIndex(MemoDbAdapter.KEY_ROWID));
        int position = new Integer(memoId);

        MemoView mv = (MemoView) view;
        mv.setCreatedDate(createdDate);
        mv.setCreatedTime(createdTime);
        mv.setContent(memoNote);
        mv.setExpanded(false);
        mv.setOnClickListener(new OnItemClickListener(position));
        mv.editButton.setOnClickListener(new OnEditMemoClickListener(position));
        mv.deleteButton.setOnClickListener(new OnDeleteMemoClickListener(position));
    }

    public void toggle(int position) {
        // mExpanded[position] = !mExpanded[position];
        notifyDataSetChanged();
    }
}

private class MemoListAdapter extends BaseAdapter {
    private Context mContext;
    private LayoutInflater mInflater;

    public MemoListAdapter(Context context) {
        mContext = context;
        mInflater = LayoutInflater.from(context);
    }

    public int getCount() {
        return mContents.length;
    }

    /**
     * Since the data comes from an array, just returning the index is sufficient to get at the data. If
     * we were using a more complex data structure, we would return whatever object represents one row in
     * the list.
     * 
     * @see android.widget.ListAdapter#getItem(int)
     */
    public Object getItem(int position) {
        return position;
    }

    /**
     * Use the array index as a unique id.
     * 
     * @see android.widget.ListAdapter#getItemId(int)
     */
    public long getItemId(int position) {
        return position;
    }

    /**
     * Make a MemoView to hold each row.
     * 
     * @see android.widget.ListAdapter#getView(int, android.view.View, android.view.ViewGroup)
     */
    public View getView(int position, View convertView, ViewGroup parent) {
        MemoView mv;
        if (convertView == null) {
            mv = new MemoView(mContext, mInflater, mDates[position], mTimes[position],
                    mContents[position], mExpanded[position]);
        } else {
            mv = (MemoView) convertView;
            mv.setCreatedDate(mDates[position]);
            mv.setCreatedTime(mTimes[position]);
            mv.setContent(mContents[position]);
            mv.setExpanded(mExpanded[position]);
        }
        mv.setOnClickListener(new OnItemClickListener(position));
        mv.editButton.setOnClickListener(new OnEditMemoClickListener(position));
        mv.deleteButton.setOnClickListener(new OnDeleteMemoClickListener(position));
        return mv;
    }

    public void toggle(int position) {
        mExpanded[position] = !mExpanded[position];
        notifyDataSetChanged();
    }

    /**
     * Our data, part 1.
     */
    private String[] mDates = { "22/05/1961", "22/05/1967", "22/05/1973", "22/05/1977", "22/05/1983",
            "22/05/1990", "22/05/1994", "22/05/1998", "22/05/2010" };

    /**
     * Our data, part 2.
     */
    private String[] mTimes = { "1:31 PM", "9:53 AM", "11:02 AM", "10:20PM", "2:46 PM", "10:34 PM",
            "10:26 AM", "2:31 PM", "8:51 PM" };

    /**
     * Our data, part 3.
     */
    private String[] mContents = {
            "ಜ್ಞಾನಪೀಠ ಪ್ರಶಸ್ತಿ ಭಾರತದ ಸಾಹಿತಿಗಳಿಗೆ ಸಲ್ಲುವ ಅತ್ಯಂತ ಪ್ರತಿಷ್ಟಿತ ಪ್ರಶಸ್ತಿ. "
                    + "ಈ ಪ್ರಶಸ್ತಿಯು ಭಾರತದ ಸಂವಿಧಾನದ ಎಂಟನೆ ಅನುಛ್ಛೇದದಲ್ಲಿ ಉಲ್ಲೇಖವಾಗಿರುವ "
                    + "ಭಾಷೆಗಳಲ್ಲಿ ಅತ್ಯುತ್ತಮ ಸಾಹಿತ್ಯ ಕೃತಿಯನ್ನು ರಚಿಸಿದ ಭಾರತೀಯ ನಾಗರಿಕನಿಗೆ ಲಭಿಸುವುದು. "
                    + "ಈ ಪ್ರಶಸ್ತಿಯನ್ನು ಮೇ ೨೨ ೧೯೬೧ ರಲ್ಲಿ ಸ್ಥಾಪಿಸಲಾಯಿತು. ಈ ಪ್ರಶಸ್ತಿಯನ್ನು ಪ್ರಪ್ರಥಮವಾಗಿ "
                    + "೧೯೬೫ ರಲ್ಲಿ ಮಲೆಯಾಳಂ ಲೇಖಕ ಜಿ. ಶಂಕರ ಕುರುಪರಿಗೆ ಪ್ರದಾನ ಮಾಡಲಾಯಿತು. "
                    + "ವಿಜೇತರಿಗೆ ಪ್ರಶಸ್ತಿ ಫಲಕ, ಐದು ಲಕ್ಷ ರುಪಾಯಿ ನಗದು ಹಾಗು ವಾಗ್ದೇವಿಯ ಕಂಚಿನ "
                    + "ವಿಗ್ರಹವನ್ನು ನೀಡಿ ಗೌರವಿಸಲಾಗುವುದು.",

            "ಕುವೆಂಪು - ಕುಪ್ಪಳ್ಳಿ ವೆಂಕಟಪ್ಪ ಪುಟ್ಟಪ್ಪ (೧೯೦೪ - ೧೯೯೪) - "
                    + "ಕನ್ನಡವು ಪಡೆದ ಅತ್ಯುತ್ತಮ ಕವಿ, 'ರಾಷ್ಟ್ರಕವಿ'. "
                    + "ಜ್ಞಾನಪೀಠ ಪ್ರಶಸ್ತಿಯನ್ನು ಪಡೆದ ಕನ್ನಡದ ಪ್ರಥಮ ವ್ಯಕ್ತಿ. "
                    + "'ವಿಶ್ವ ಮಾನವ'. ಕನ್ನಡ ಸಾಹಿತ್ಯಕ್ಕೆ ಇವರ ಕಾಣಿಕೆ ಅಪಾರ.",

            "'ದ.ರಾ.ಬೇಂದ್ರೆ - ಕುಣಿಯೋಣು ಬಾರಾ ಕುಣಿಯೋಣು ಬಾ', " + "'ಇಳಿದು ಬಾ ತಾಯಿ ಇಳಿದು ಬಾ', "
                    + "'ನಾನು ಬಡವಿ ಆತ ಬಡವ ಒಲವೆ ನಮ್ಮ ಬದುಕು', "
                    + "ಎಂದು ಆರಂಭವಾಗುವ ಕವಿತೆಗಳನ್ನು ಕೇಳದ ಕನ್ನಡಿಗನಿಲ್ಲ. " + "ಉತ್ಸಾಹದ ಚಿಲುಮೆಯನ್ನುಕ್ಕಿಸಬಲ್ಲ, "
                    + "ನೊಂದ ಜೀವಕ್ಕೆ ಸಾಂತ್ವನ ನೀಡಬಲ್ಲ, "
                    + "ಪ್ರೀತಿ ಪ್ರೇಮಗಳನ್ನು ಮೂಡಿಸಬಲ್ಲ ಕವಿತೆಗಳನ್ನು ರಚಿಸಿಕೊಟ್ಟ ವರಕವಿ ಬೇಂದ್ರೆ. "
                    + "ರಸವೆ ಜನನ, ವಿರಸವೆ ಮರಣ, ಸಮರಸವೆ ಜೀವನ ಎಂದು ಜೀವನವನ್ನು "
                    + "ಕುರಿತು ಪರಿಣಾಮಕಾರಿಯಾಗಿ ಹೇಳಿದ ಧೀಮಂತ ಕವಿ.",

            "ಶಿವರಾಮ ಕಾರಂತ - ಜ್ಞಾನಪೀಠ ಪುರಸ್ಕೃತ ಡಾ. ಶಿವರಾಮ ಕಾರಂತರು ಹುಟ್ಟಿದ್ದು "
                    + "ಉಡುಪಿ ಜಿಲ್ಲೆಯ ಕೋಟದಲ್ಲಿ ೧೯೦೨, ಅಕ್ಟೋಬರ್ ೧೦ರಂದು. "
                    + "ಒಂದು ಶತಮಾನಕ್ಕೆ ನಾಲ್ಕು ವರ್ಷಗಳಷ್ಟೇ ಕಮ್ಮಿ ಬಾಳಿ, "
                    + "ಅರ್ಥಪೂರ್ಣ ಬದುಕು ಕಳೆದ ಸಾಹಿತ್ಯ ದಿಗ್ಗಜ ಡಾ. "
                    + "ಶಿವರಾಮ ಕಾರಂತರು ೧೯೯೭, ಡಿಸೆಂಬರ್ ೦೯ ರಂದು ನಿಧನ ಹೊಂದಿದರು. "
                    + "ತಮ್ಮ ಜೀವಿತಾವಧಿಯಲ್ಲಿ ಸುಮಾರು ೪೨೭ ಪುಸ್ತಕಗಳನ್ನು ರಚಿಸಿದರು. "
                    + "ಅವುಗಳಲ್ಲಿ ಕಾದಂಬರಿಗಳು ೪೭. ತಮ್ಮ ೯೬ನೆಯ ವಯಸ್ಸಿನಲ್ಲೂ ಹಕ್ಕಿಗಳ "
                    + "ಕುರಿತು ಒಂದು ಪುಸ್ತಕವನ್ನು ಬರೆದಿದ್ದು, ಇದು ವಿಶ್ವ ದಾಖಲೆಗೆ "
                    + "ಅರ್ಹವಾಗಿರುವ ಒಂದು ಸಾಧನೆ ಎನ್ನಬಹುದು.",

            "ಮಾಸ್ತಿ ವೆಂಕಟೇಶ ಅಯ್ಯಂಗಾರರು (ಜೂನ್ ೬ ೧೮೯೧ - ಜೂನ್ ೬ ೧೯೮೬) "
                    + "- ಕನ್ನಡದ ಒಬ್ಬ ಅಪ್ರತಿಮ ಲೇಖಕರು. ಕನ್ನಡ ಸಾಹಿತ್ಯ ಲೋಕದಲ್ಲಿ ಮಾಸ್ತಿ "
                    + "ಎಂದೇ ಖ್ಯಾತರಾಗಿರುವ ಈ ಸಾಹಿತಿ ಶ್ರೀನಿವಾಸ ಎಂಬ ಕಾವ್ಯನಾಮದಡಿಯಲ್ಲಿ ಬರೆಯುತ್ತಿದರು. "
                    + "೧೯೮೩ ರಲ್ಲಿ ಚಿಕವೀರ ರಾಜೇಂದ್ರ ಕಾದಂಬರಿಗಾಗಿ ಜ್ಞಾನಪೀಠ ಪ್ರಶಸ್ತಿಯಿಂದ "
                    + "ಪುರಸ್ಕೃತಗೊಂಡ ಮಾಸ್ತಿಯವರು ಕನ್ನಡಕ್ಕೆ ನಾಲ್ಕನೆ ಜ್ಞಾನಪೀಠ ಪ್ರಶಸ್ತಿಯನ್ನು ತಂದು ಕೊಟ್ಟರು. "
                    + "ಜೀವನ ಪರ್ಯಂತ ಕನ್ನಡ ಸೇವೆಯನ್ನು ಮಾಡಿದ ಮಾಸ್ತಿಯವರು ಜೂನ್ ೬ ೧೯೮೬ ರಂದು ನಿಧನ ಹೊಂದಿದರು.",

            "ವಿನಾಯಕ ಕೃಷ್ಣ ಗೋಕಾಕ - ಕನ್ನಡಕ್ಕೆ ಐದನೆಯ ಜ್ಞಾನಪೀಠ ಪ್ರಶಸ್ತಿಯನ್ನು ೧೯೯೧ರಲ್ಲಿ ತಂದುಕೊಟ್ಟ "
                    + "ವಿನಾಯಕ ಕೃಷ್ಣ ಗೋಕಾಕರು ಹಲವು ರೀತಿಯಲ್ಲಿ ಅದೃಷ್ಠವಂತರು. "
                    + "ಅವರು ಕನ್ನಡದ ಪ್ರತಿಭಾವಂತ ಕವಿ, ಪಂಡಿತರಾಗಿದ್ದರು. "
                    + "ಕನ್ನಡ-ಇಂಗ್ಲೀಷ್ ಭಾಷೆಗಳಲ್ಲಿ ಸಮಾನ ಪ್ರಭುತ್ವ ಪಡೆದಿದ್ದ ಅವರು "
                    + "ತಮ್ಮ ಜೀವಿತ ಕಾಲದಲ್ಲೇ ಒಬ್ಬ ಪ್ರತಿಭಾವಂತ ಸಾಹಿತಿಗೆ ದೊರಕಬೇಕಾದ "
                    + "ಎಲ್ಲ ಸಿದ್ಧಿ, ಪ್ರಸಿದ್ಧಿಗಳನ್ನು ಪಡೆದರು. "
                    + "ಗೋಕಾಕರು ಇದಕ್ಕೂ ಮೊದಲು ಭಾರತೀಯ ಜ್ಞಾನಪೀಠ ಪ್ರಶಸ್ತಿ ಆಯ್ಕೆ ಸಮಿತಿಯ ಅಧ್ಯಕ್ಷರಾಗಿದ್ದರು.",

            "ಯು.ಆರ್.ಅನಂತಮೂರ್ತಿ - ಕನ್ನಡಕ್ಕೆ ಆರನೆಯ ಜ್ಞಾನಪೀಠ ಪ್ರಶಸ್ತಿ ೧೯೯೪ರಲ್ಲಿ ಬಂದಾಗ ಕನ್ನಡ ಸಾಹಿತ್ಯ "
                    + "ಲೋಕ ಮತ್ತೊಮ್ಮೆ ಇಡೀ ದೇಶದ ಗಮನ ಸೆಳೆಯಿತು. "
                    + "ಈ ಗೌರವ ಪಡೆದವರು ಡಾ| ಉಡುಪಿ ರಾಜಗೋಪಾಲಾಚಾರ್ಯ ಅನಂತಮೂರ್ತಿ. "
                    + "ತಮ್ಮ ಬಹುಚರ್ಚಿತ ಸಂಸ್ಕಾರ ಕಾದಂಬರಿಯಿಂದ ಭಾರತೀಯ ಸಾಹಿತ್ಯ "
                    + "ಮತ್ತು ಚಲನಚಿತ್ರ ರಂಗಗಳಲ್ಲಿ ಒಂದು ದೊಡ್ಡ ವಿವಾದವನ್ನೇ ಮಾಡಿದ ಅನಂತಮೂರ್ತಿ "
                    + "ಅವರು ಹುಟ್ಟಿದ್ದು ಶಿವಮೊಗ್ಗ ಜಿಲ್ಲೆಯ ತೀರ್ಥಹಳ್ಳಿ ತಾಲ್ಲೂಕಿನ ಮೇಳಿಗೆ ಹಳ್ಳಿಯಲ್ಲಿ. "
                    + "ಇಬ್ಬರು ಜ್ಞಾನಪೀಠ ಪ್ರಶಸ್ತಿ ವಿಜೇತ (ಕುವೆಂಪು ಮತ್ತು ಅನಂತಮೂರ್ತಿ) ರನ್ನು "
                    + "ನೀಡಿದ ಹೆಗ್ಗಳಿಕೆ ತೀರ್ಥಹಳ್ಳಿ ತಾಲ್ಲೂಕಿನದು. "
                    + "ಇವರು ಹುಟ್ಟಿದ್ದು ೧೯೩೨ರ ಡಿಸೆಂಬರ್ ೨೧ರಂದು. "
                    + "ತಂದೆ ಉಡುಪಿ ರಾಜಗೋಪಾಲಾಚಾರ್ಯ. ತಾಯಿ ಸತ್ಯಮ್ಮ (ಸತ್ಯಭಾಮ).",

            "ಗಿರೀಶ್ ರಘುನಾಥ್ ಕಾರ್ನಾಡ್ (ಹುಟ್ಟು - ಮೇ ೧೯, ೧೯೩೮) "
                    + "ಕನ್ನಡಕ್ಕೆ ಏಳನೇ ಜ್ಞಾನಪೀಠ ಪ್ರಶಸ್ತಿ ತಂದುಕೊಟ್ಟ ಕನ್ನಡ "
                    + "ಸಾಹಿತ್ಯದ ನಾಟಕ ಕ್ಷೇತ್ರಕ್ಕೆ ಸಾಹಿತಿ. "
                    + "ಭಾರತದಲ್ಲೇ ನಾಟಕ ಸಾಹಿತ್ಯ ರಚನೆಗೆ ಜ್ಞಾನಪೀಠ ಪ್ರಶಸ್ತಿ "
                    + "ಪಡೆದವರಲ್ಲಿ ಕಾರ್ನಾಡ್ ಮೊದಲಿಗರು. " + "ಮತ್ತು ಇಬ್ಬರು ಜ್ಞಾನಪೀಠ ಪ್ರಶಸ್ತಿ ಪುರಸ್ಕೃತರ "
                    + "ಕಾದಂಬರಿಗಳನ್ನು ಸಿನಿಮಾ ಮಾಡಿದ ಏಕೈಕ ಜ್ಞಾನಪೀಠ ಪ್ರಶಸ್ತಿ "
                    + "ಪುರಸ್ಕೃತರೆಂಬ ಗೌರವಕ್ಕೆ ಕಾರ್ನಾಡ್ ಪಾತ್ರರಾಗಿದ್ದಾರೆ.",

            "ಡಾ. ಚಂದ್ರಶೇಖರ ಕಂಬಾರ (ಜನನ- ೨ ಜನವರಿ ೧೯೩೭)ರಂದು "
                    + "ಬೆಳಗಾವಿ ಜಿಲ್ಲೆ ಘೋಡಿಗೇರಿ ಗ್ರಾಮದ ಬಸವಣ್ಣೆಪ್ಪ ಕಂಬಾರ ಹಾಗೂ ಚೆನ್ನಮ್ಮ ದಂಪತಿಯ "
                    + "ಪುತ್ರನಾಗಿ ಜನಿಸಿದರು,ಬೆಳಗಾವಿ ಲಿಂಗರಾಜ ಕಾಲೇಜಿನಲ್ಲಿ ಬಿಎ, "
                    + "೧೯೬೨ರಲ್ಲಿ ಕರ್ನಾಟಕ ವಿವಿಯಿಂದ ಎಂ.ಎ ಪದವಿ,ಪಿ.ಎಚ್.ಡಿ.ಪದವಿ ಪಡೆದಿರುವ ಅವರು, "
                    + "ಬೆಂಗಳೂರು ವಿವಿ ಅಧ್ಯಪಕರು, ಕರ್ನಾಟಕ ಜಾನಪದ ಅಕಾಡೆಮಿಯ ಅಧ್ಯಕ್ಷ, "
                    + "ನವದೆಹಲಿಯ ರಾಷ್ಟ್ರೀಯ ನಾಟಕ ಶಾಲೆಯ ನಿರ್ದೇಶಕ,ಹಂಪಿ ಕನ್ನಡ ವಿವಿಯ "
                    + "ಮೊದಲ ಕುಲಪತಿಯಾಗಿ ಡಾ. ಚಂದ್ರಶೇಖರ ಕಂಬಾರ ಕಾರ್ಯನಿರ್ವಹಿಸಿದ್ದಾರೆ." };

    /**
     * Our data, part 4.
     */
    private boolean[] mExpanded = { false, false, false, false, false, false, false, false, false };
}

private class OnItemClickListener implements OnClickListener {
    private int mPosition;

    OnItemClickListener(int position) {
        mPosition = position;
    }

    public void onClick(View arg0) {
        ((MemoListAdapter2) getListAdapter()).toggle(mPosition);
    }
}

private class OnEditMemoClickListener implements OnClickListener {
    private int mPosition;

    OnEditMemoClickListener(int position) {
        mPosition = position;
    }

    public void onClick(View arg0) {
        Toast.makeText(getBaseContext(), "Edit item " + (mPosition + 1), Toast.LENGTH_SHORT).show();

        Cursor cursor = memoDbAdapter.fetchAllMemos();
        cursor.moveToPosition(mPosition + 1);
        String message = cursor.getString(1);
        String date = cursor.getString(2);
        String time = cursor.getString(3);
        cursor.close();

        Intent intent = new Intent(MemoActivity.this, TextEditorActivity.class);
        Bundle bundle = new Bundle();
        bundle.putString("message", message);
        bundle.putString("date", date);
        bundle.putString("time", time);
        intent.putExtras(bundle);
        startActivityForResult(intent, 110);
    }
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    //MemoListAdapter = new ListAdapter<String>(this, android.R.layout.simple_list_item_1, fillData());
    getListView(); 

}

@Override
protected void onStart() {
    // TODO Auto-generated method stub
    super.onStart();
}

private class OnDeleteMemoClickListener implements OnClickListener {
    private int mPosition;

    OnDeleteMemoClickListener(int position) {
        mPosition = position;
    }

    public void onClick(View arg0) {
        Toast.makeText(getBaseContext(), "Delete item " + (mPosition + 1), Toast.LENGTH_SHORT).show();
        // mContext.getContentResolver().delete( DATABASE_TABLE, KEY_ROWID + "=" + rowId, null);
        memoDbAdapter.deleteMemo(mPosition + 1);
        Intent intent = new Intent(MemoActivity.this, MemoActivity.class);
        startActivity(intent);
    }
}

private class MemoView extends LinearLayout {
    ImageButton editButton;
    ImageButton deleteButton;
    private TextView createdDate;
    private TextView createdTime;
    private TextView content;

    public MemoView(Context context, LayoutInflater inflater, String _createdDate, String _createdTime,
            String _content, boolean expanded) {
        super(context);
        View inflatedView = inflater.inflate(R.layout.memo_entry, null);

        editButton = (ImageButton) inflatedView.findViewById(R.id.editIcon);
        deleteButton = (ImageButton) inflatedView.findViewById(R.id.deleteIcon);

        createdDate = (TextView) inflatedView.findViewById(R.id.createdDate);
        createdDate.setText(_createdDate);

        createdTime = (TextView) inflatedView.findViewById(R.id.createdTime);
        createdTime.setText(_createdTime);

        content = (TextView) inflatedView.findViewById(R.id.content);
        content.setTypeface(kannadaFont);
        content.setText(_content);
        content.setSingleLine(expanded ? false : true);

        addView(inflatedView, new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.FILL_PARENT));
    }

    public void setCreatedDate(String _createdDate) {
        createdDate.setText(_createdDate);
    }

    public void setCreatedTime(String _createdTime) {
        createdTime.setText(_createdTime);
    }

    public void setContent(String _content) {
        content.setText(_content);
    }

    public void setExpanded(boolean expanded) {
        content.setSingleLine(expanded ? false : true);
    }
}
} 
```

这是我的 TextEditorActivity.java：

```
 public class TextEditorActivity extends Activity implements OnClickListener{

private EditText indicTextEditor;
private Button buttonSave;
private Button buttonCancel;
Typeface kannadaFont;

private static final String EDITOR_CONTENT = "Current contents of text editor";
//private ArrayList<String> arrayList;
MemoDbAdapter memoAdapter=null;
String date;
String time;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.text_editor);

     indicTextEditor = (EditText) findViewById(R.id.textEditor);
    // arrayList=new ArrayList<String>();

    if (savedInstanceState != null) {
        String previousEditorContent = savedInstanceState.getString(EDITOR_CONTENT);
        if (previousEditorContent != null) {
            indicTextEditor.setText(previousEditorContent);
        }
    } else {
        Bundle bundle = getIntent().getExtras();
        if (bundle != null) {
            String msg = bundle.getString("message");
            String date = bundle.getString("date");
            String time = bundle.getString("time");
            if (msg != null) {

                indicTextEditor.setText(msg);
                kannadaFont = Typeface.createFromAsset(getAssets(), "fonts/Lohit-Kannada.ttf");
            }
        }
    }

    buttonSave = (Button) findViewById(R.id.buttonSave);

    buttonSave.setOnClickListener(this);
    buttonSave.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

        }
    });

    buttonCancel = (Button) findViewById(R.id.buttonCancel);
    buttonCancel.setOnClickListener(this);

}

@Override
protected void onSaveInstanceState(Bundle outState) {
    // Save the editor text, so we still have it if the activity needs to be killed while paused.
    outState.putString(EDITOR_CONTENT, indicTextEditor.getText().toString());
    super.onSaveInstanceState(outState);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    MenuItem mnu1 = menu.add(0, 0, 0, "Color");
    MenuItem mnu2 = menu.add(0, 0, 0, "Delete");
    mnu1.setIcon(R.drawable.fonts);
    mnu2.setIcon(R.drawable.delete);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    Toast.makeText(getBaseContext(), item.getTitle() + " menu selected", Toast.LENGTH_SHORT).show();

    return true;
}

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    default:
        return null;
    }
}

public void onClick(View v) {
    // TODO Auto-generated method stub
    if(v.getId()==R.id.buttonSave){
        String enteredText=null;
        enteredText=indicTextEditor.getText().toString();
        date=DateFormat.getDateFormatOrder(getBaseContext()).toString();
        time=DateFormat.getTimeFormat(getBaseContext()).toString();

        memoAdapter.open();
        long id=memoAdapter.createMemo(enteredText, date, time);
        memoAdapter.updateMemo(id, enteredText, date, time);
        memoAdapter.close();
        finish();
    }
    else if(v.getId()==R.id.buttonCancel){
        finish();
    }

}

} 
```

这是我的 MemoDbAdapter.java：

```
public class MemoDbAdapter {

    private static final String TAG = "MemoDataHandler";

    private static final String DATABASE_NAME = "indicAppMemo.db";
    private static final int DATABASE_VERSION = 1;
    private static final String DATABASE_TABLE = "memo";

    public static final String KEY_ROWID = "_id";
    public static final String KEY_NOTE = "note";
    public static final String KEY_CREATED_DATE = "created_date";
    public static final String KEY_CREATED_TIME = "created_time";

    /**
     * This class helps open, create, and upgrade the database file.
     */
    private static class DatabaseHelper extends SQLiteOpenHelper {

        DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + KEY_ROWID + " INTEGER PRIMARY KEY,"
                    + KEY_NOTE + " TEXT," + KEY_CREATED_DATE + " TEXT," + KEY_CREATED_TIME + " TEXT"
                    + ");");
            for (int i = 0; i < mDates.length; i++) {
                ContentValues initialValues = createContentValues(mContents[i], mDates[i], mTimes[i]);
                db.insert(DATABASE_TABLE, null, initialValues);
            }
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            Log.w(TAG, "Upgrading database from version " + oldVersion + " to " + newVersion
                    + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS" + DATABASE_TABLE);
            onCreate(db);
        }

        /**
         * Our data, part 1.
         */
        private String[] mDates = { "22/05/1961", "22/05/1967", "22/05/1973", "22/05/1977", "22/05/1983",
                "22/05/1990", "22/05/1994", "22/05/1998", "22/05/2010" };

        /**
         * Our data, part 2.
         */
        private String[] mTimes = { "1:31 PM", "9:53 AM", "11:02 AM", "10:20PM", "2:46 PM", "10:34 PM",
                "10:26 AM", "2:31 PM", "8:51 PM" };

        /**
         * Our data, part 3.
         */
        private String[] mContents = {
                "ಜ್ಞಾನಪೀಠ ಪ್ರಶಸ್ತಿ ಭಾರತದ ಸಾಹಿತಿಗಳಿಗೆ ಸಲ್ಲುವ ಅತ್ಯಂತ ಪ್ರತಿಷ್ಟಿತ ಪ್ರಶಸ್ತಿ. "
                        + "ಈ ಪ್ರಶಸ್ತಿಯು ಭಾರತದ ಸಂವಿಧಾನದ ಎಂಟನೆ ಅನುಛ್ಛೇದದಲ್ಲಿ ಉಲ್ಲೇಖವಾಗಿರುವ "
                        + "ಭಾಷೆಗಳಲ್ಲಿ ಅತ್ಯುತ್ತಮ ಸಾಹಿತ್ಯ ಕೃತಿಯನ್ನು ರಚಿಸಿದ ಭಾರತೀಯ ನಾಗರಿಕನಿಗೆ ಲಭಿಸುವುದು. "
                        + "ಈ ಪ್ರಶಸ್ತಿಯನ್ನು ಮೇ ೨೨ ೧೯೬೧ ರಲ್ಲಿ ಸ್ಥಾಪಿಸಲಾಯಿತು. ಈ ಪ್ರಶಸ್ತಿಯನ್ನು ಪ್ರಪ್ರಥಮವಾಗಿ "
                        + "೧೯೬೫ ರಲ್ಲಿ ಮಲೆಯಾಳಂ ಲೇಖಕ ಜಿ. ಶಂಕರ ಕುರುಪರಿಗೆ ಪ್ರದಾನ ಮಾಡಲಾಯಿತು. "
                        + "ವಿಜೇತರಿಗೆ ಪ್ರಶಸ್ತಿ ಫಲಕ, ಐದು ಲಕ್ಷ ರುಪಾಯಿ ನಗದು ಹಾಗು ವಾಗ್ದೇವಿಯ ಕಂಚಿನ "
                        + "ವಿಗ್ರಹವನ್ನು ನೀಡಿ ಗೌರವಿಸಲಾಗುವುದು.",

                "ಕುವೆಂಪು - ಕುಪ್ಪಳ್ಳಿ ವೆಂಕಟಪ್ಪ ಪುಟ್ಟಪ್ಪ (೧೯೦೪ - ೧೯೯೪) - "
                        + "ಕನ್ನಡವು ಪಡೆದ ಅತ್ಯುತ್ತಮ ಕವಿ, 'ರಾಷ್ಟ್ರಕವಿ'. "
                        + "ಜ್ಞಾನಪೀಠ ಪ್ರಶಸ್ತಿಯನ್ನು ಪಡೆದ ಕನ್ನಡದ ಪ್ರಥಮ ವ್ಯಕ್ತಿ. "
                        + "'ವಿಶ್ವ ಮಾನವ'. ಕನ್ನಡ ಸಾಹಿತ್ಯಕ್ಕೆ ಇವರ ಕಾಣಿಕೆ ಅಪಾರ.",

                "'ದ.ರಾ.ಬೇಂದ್ರೆ - ಕುಣಿಯೋಣು ಬಾರಾ ಕುಣಿಯೋಣು ಬಾ', " + "'ಇಳಿದು ಬಾ ತಾಯಿ ಇಳಿದು ಬಾ', "
                        + "'ನಾನು ಬಡವಿ ಆತ ಬಡವ ಒಲವೆ ನಮ್ಮ ಬದುಕು', "
                        + "ಎಂದು ಆರಂಭವಾಗುವ ಕವಿತೆಗಳನ್ನು ಕೇಳದ ಕನ್ನಡಿಗನಿಲ್ಲ. " + "ಉತ್ಸಾಹದ ಚಿಲುಮೆಯನ್ನುಕ್ಕಿಸಬಲ್ಲ, "
                        + "ನೊಂದ ಜೀವಕ್ಕೆ ಸಾಂತ್ವನ ನೀಡಬಲ್ಲ, "
                        + "ಪ್ರೀತಿ ಪ್ರೇಮಗಳನ್ನು ಮೂಡಿಸಬಲ್ಲ ಕವಿತೆಗಳನ್ನು ರಚಿಸಿಕೊಟ್ಟ ವರಕವಿ ಬೇಂದ್ರೆ. "
                        + "ರಸವೆ ಜನನ, ವಿರಸವೆ ಮರಣ, ಸಮರಸವೆ ಜೀವನ ಎಂದು ಜೀವನವನ್ನು "
                        + "ಕುರಿತು ಪರಿಣಾಮಕಾರಿಯಾಗಿ ಹೇಳಿದ ಧೀಮಂತ ಕವಿ.",

                "ಶಿವರಾಮ ಕಾರಂತ - ಜ್ಞಾನಪೀಠ ಪುರಸ್ಕೃತ ಡಾ. ಶಿವರಾಮ ಕಾರಂತರು ಹುಟ್ಟಿದ್ದು "
                        + "ಉಡುಪಿ ಜಿಲ್ಲೆಯ ಕೋಟದಲ್ಲಿ ೧೯೦೨, ಅಕ್ಟೋಬರ್ ೧೦ರಂದು. "
                        + "ಒಂದು ಶತಮಾನಕ್ಕೆ ನಾಲ್ಕು ವರ್ಷಗಳಷ್ಟೇ ಕಮ್ಮಿ ಬಾಳಿ, "
                        + "ಅರ್ಥಪೂರ್ಣ ಬದುಕು ಕಳೆದ ಸಾಹಿತ್ಯ ದಿಗ್ಗಜ ಡಾ. "
                        + "ಶಿವರಾಮ ಕಾರಂತರು ೧೯೯೭, ಡಿಸೆಂಬರ್ ೦೯ ರಂದು ನಿಧನ ಹೊಂದಿದರು. "
                        + "ತಮ್ಮ ಜೀವಿತಾವಧಿಯಲ್ಲಿ ಸುಮಾರು ೪೨೭ ಪುಸ್ತಕಗಳನ್ನು ರಚಿಸಿದರು. "
                        + "ಅವುಗಳಲ್ಲಿ ಕಾದಂಬರಿಗಳು ೪೭. ತಮ್ಮ ೯೬ನೆಯ ವಯಸ್ಸಿನಲ್ಲೂ ಹಕ್ಕಿಗಳ "
                        + "ಕುರಿತು ಒಂದು ಪುಸ್ತಕವನ್ನು ಬರೆದಿದ್ದು, ಇದು ವಿಶ್ವ ದಾಖಲೆಗೆ "
                        + "ಅರ್ಹವಾಗಿರುವ ಒಂದು ಸಾಧನೆ ಎನ್ನಬಹುದು.",

                "ಮಾಸ್ತಿ ವೆಂಕಟೇಶ ಅಯ್ಯಂಗಾರರು (ಜೂನ್ ೬ ೧೮೯೧ - ಜೂನ್ ೬ ೧೯೮೬) "
                        + "- ಕನ್ನಡದ ಒಬ್ಬ ಅಪ್ರತಿಮ ಲೇಖಕರು. ಕನ್ನಡ ಸಾಹಿತ್ಯ ಲೋಕದಲ್ಲಿ ಮಾಸ್ತಿ "
                        + "ಎಂದೇ ಖ್ಯಾತರಾಗಿರುವ ಈ ಸಾಹಿತಿ ಶ್ರೀನಿವಾಸ ಎಂಬ ಕಾವ್ಯನಾಮದಡಿಯಲ್ಲಿ ಬರೆಯುತ್ತಿದರು. "
                        + "೧೯೮೩ ರಲ್ಲಿ ಚಿಕವೀರ ರಾಜೇಂದ್ರ ಕಾದಂಬರಿಗಾಗಿ ಜ್ಞಾನಪೀಠ ಪ್ರಶಸ್ತಿಯಿಂದ "
                        + "ಪುರಸ್ಕೃತಗೊಂಡ ಮಾಸ್ತಿಯವರು ಕನ್ನಡಕ್ಕೆ ನಾಲ್ಕನೆ ಜ್ಞಾನಪೀಠ ಪ್ರಶಸ್ತಿಯನ್ನು ತಂದು ಕೊಟ್ಟರು. "
                        + "ಜೀವನ ಪರ್ಯಂತ ಕನ್ನಡ ಸೇವೆಯನ್ನು ಮಾಡಿದ ಮಾಸ್ತಿಯವರು ಜೂನ್ ೬ ೧೯೮೬ ರಂದು ನಿಧನ ಹೊಂದಿದರು.",

                "ವಿನಾಯಕ ಕೃಷ್ಣ ಗೋಕಾಕ - ಕನ್ನಡಕ್ಕೆ ಐದನೆಯ ಜ್ಞಾನಪೀಠ ಪ್ರಶಸ್ತಿಯನ್ನು ೧೯೯೧ರಲ್ಲಿ ತಂದುಕೊಟ್ಟ "
                        + "ವಿನಾಯಕ ಕೃಷ್ಣ ಗೋಕಾಕರು ಹಲವು ರೀತಿಯಲ್ಲಿ ಅದೃಷ್ಠವಂತರು. "
                        + "ಅವರು ಕನ್ನಡದ ಪ್ರತಿಭಾವಂತ ಕವಿ, ಪಂಡಿತರಾಗಿದ್ದರು. "
                        + "ಕನ್ನಡ-ಇಂಗ್ಲೀಷ್ ಭಾಷೆಗಳಲ್ಲಿ ಸಮಾನ ಪ್ರಭುತ್ವ ಪಡೆದಿದ್ದ ಅವರು "
                        + "ತಮ್ಮ ಜೀವಿತ ಕಾಲದಲ್ಲೇ ಒಬ್ಬ ಪ್ರತಿಭಾವಂತ ಸಾಹಿತಿಗೆ ದೊರಕಬೇಕಾದ "
                        + "ಎಲ್ಲ ಸಿದ್ಧಿ, ಪ್ರಸಿದ್ಧಿಗಳನ್ನು ಪಡೆದರು. "
                        + "ಗೋಕಾಕರು ಇದಕ್ಕೂ ಮೊದಲು ಭಾರತೀಯ ಜ್ಞಾನಪೀಠ ಪ್ರಶಸ್ತಿ ಆಯ್ಕೆ ಸಮಿತಿಯ ಅಧ್ಯಕ್ಷರಾಗಿದ್ದರು.",

                "ಯು.ಆರ್.ಅನಂತಮೂರ್ತಿ - ಕನ್ನಡಕ್ಕೆ ಆರನೆಯ ಜ್ಞಾನಪೀಠ ಪ್ರಶಸ್ತಿ ೧೯೯೪ರಲ್ಲಿ ಬಂದಾಗ ಕನ್ನಡ ಸಾಹಿತ್ಯ "
                        + "ಲೋಕ ಮತ್ತೊಮ್ಮೆ ಇಡೀ ದೇಶದ ಗಮನ ಸೆಳೆಯಿತು. "
                        + "ಈ ಗೌರವ ಪಡೆದವರು ಡಾ| ಉಡುಪಿ ರಾಜಗೋಪಾಲಾಚಾರ್ಯ ಅನಂತಮೂರ್ತಿ. "
                        + "ತಮ್ಮ ಬಹುಚರ್ಚಿತ ಸಂಸ್ಕಾರ ಕಾದಂಬರಿಯಿಂದ ಭಾರತೀಯ ಸಾಹಿತ್ಯ "
                        + "ಮತ್ತು ಚಲನಚಿತ್ರ ರಂಗಗಳಲ್ಲಿ ಒಂದು ದೊಡ್ಡ ವಿವಾದವನ್ನೇ ಮಾಡಿದ ಅನಂತಮೂರ್ತಿ "
                        + "ಅವರು ಹುಟ್ಟಿದ್ದು ಶಿವಮೊಗ್ಗ ಜಿಲ್ಲೆಯ ತೀರ್ಥಹಳ್ಳಿ ತಾಲ್ಲೂಕಿನ ಮೇಳಿಗೆ ಹಳ್ಳಿಯಲ್ಲಿ. "
                        + "ಇಬ್ಬರು ಜ್ಞಾನಪೀಠ ಪ್ರಶಸ್ತಿ ವಿಜೇತ (ಕುವೆಂಪು ಮತ್ತು ಅನಂತಮೂರ್ತಿ) ರನ್ನು "
                        + "ನೀಡಿದ ಹೆಗ್ಗಳಿಕೆ ತೀರ್ಥಹಳ್ಳಿ ತಾಲ್ಲೂಕಿನದು. " + "ಇವರು ಹುಟ್ಟಿದ್ದು ೧೯೩೨ರ ಡಿಸೆಂಬರ್ ೨೧ರಂದು. "
                        + "ತಂದೆ ಉಡುಪಿ ರಾಜಗೋಪಾಲಾಚಾರ್ಯ. ತಾಯಿ ಸತ್ಯಮ್ಮ (ಸತ್ಯಭಾಮ).",

                "ಗಿರೀಶ್ ರಘುನಾಥ್ ಕಾರ್ನಾಡ್ (ಹುಟ್ಟು - ಮೇ ೧೯, ೧೯೩೮) "
                        + "ಕನ್ನಡಕ್ಕೆ ಏಳನೇ ಜ್ಞಾನಪೀಠ ಪ್ರಶಸ್ತಿ ತಂದುಕೊಟ್ಟ ಕನ್ನಡ "
                        + "ಸಾಹಿತ್ಯದ ನಾಟಕ ಕ್ಷೇತ್ರಕ್ಕೆ ಸಾಹಿತಿ. "
                        + "ಭಾರತದಲ್ಲೇ ನಾಟಕ ಸಾಹಿತ್ಯ ರಚನೆಗೆ ಜ್ಞಾನಪೀಠ ಪ್ರಶಸ್ತಿ " + "ಪಡೆದವರಲ್ಲಿ ಕಾರ್ನಾಡ್ ಮೊದಲಿಗರು. "
                        + "ಮತ್ತು ಇಬ್ಬರು ಜ್ಞಾನಪೀಠ ಪ್ರಶಸ್ತಿ ಪುರಸ್ಕೃತರ "
                        + "ಕಾದಂಬರಿಗಳನ್ನು ಸಿನಿಮಾ ಮಾಡಿದ ಏಕೈಕ ಜ್ಞಾನಪೀಠ ಪ್ರಶಸ್ತಿ "
                        + "ಪುರಸ್ಕೃತರೆಂಬ ಗೌರವಕ್ಕೆ ಕಾರ್ನಾಡ್ ಪಾತ್ರರಾಗಿದ್ದಾರೆ.",

                "ಡಾ. ಚಂದ್ರಶೇಖರ ಕಂಬಾರ (ಜನನ- ೨ ಜನವರಿ ೧೯೩೭)ರಂದು "
                        + "ಬೆಳಗಾವಿ ಜಿಲ್ಲೆ ಘೋಡಿಗೇರಿ ಗ್ರಾಮದ ಬಸವಣ್ಣೆಪ್ಪ ಕಂಬಾರ ಹಾಗೂ ಚೆನ್ನಮ್ಮ ದಂಪತಿಯ "
                        + "ಪುತ್ರನಾಗಿ ಜನಿಸಿದರು,ಬೆಳಗಾವಿ ಲಿಂಗರಾಜ ಕಾಲೇಜಿನಲ್ಲಿ ಬಿಎ, "
                        + "೧೯೬೨ರಲ್ಲಿ ಕರ್ನಾಟಕ ವಿವಿಯಿಂದ ಎಂ.ಎ ಪದವಿ,ಪಿ.ಎಚ್.ಡಿ.ಪದವಿ ಪಡೆದಿರುವ ಅವರು, "
                        + "ಬೆಂಗಳೂರು ವಿವಿ ಅಧ್ಯಪಕರು, ಕರ್ನಾಟಕ ಜಾನಪದ ಅಕಾಡೆಮಿಯ ಅಧ್ಯಕ್ಷ, "
                        + "ನವದೆಹಲಿಯ ರಾಷ್ಟ್ರೀಯ ನಾಟಕ ಶಾಲೆಯ ನಿರ್ದೇಶಕ,ಹಂಪಿ ಕನ್ನಡ ವಿವಿಯ "
                        + "ಮೊದಲ ಕುಲಪತಿಯಾಗಿ ಡಾ. ಚಂದ್ರಶೇಖರ ಕಂಬಾರ ಕಾರ್ಯನಿರ್ವಹಿಸಿದ್ದಾರೆ." };

        /**
         * Our data, part 4.
         */
        private boolean[] mExpanded = { false, false, false, false, false, false, false, false, false };
    }

    private Context context;
    private SQLiteDatabase database;
    private DatabaseHelper dbHelper;

    public MemoDbAdapter(Context context) {
        this.context = context;
    }

    public MemoDbAdapter open() throws SQLException {
        dbHelper = new DatabaseHelper(context);
        database = dbHelper.getWritableDatabase();
        return this;
    }

    public void close() {
        dbHelper.close();
    }

    /**
     * Create a new Memo. If the Memo is successfully created then return the new rowId for that note,
     * otherwise return a -1 to indicate failure.
     */
    public long createMemo(String note, String createdDate, String createdTime) {
        open();
        ContentValues initialValues = createContentValues(note, createdDate, createdTime);

        return database.insert(DATABASE_TABLE, null, initialValues);
    }

    public boolean updateMemo(long rowId, String note, String createdDate, String createdTime) {
        ContentValues updateValues = createContentValues(note, createdDate, createdTime);

        return database.update(DATABASE_TABLE, updateValues, KEY_ROWID + "=" + rowId, null) > 0;
    }

    public boolean deleteMemo(long rowId) {
        return database.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
    }

    /**
     * Return a Cursor over the list of all Memo in the database.
     * 
     * @return Cursor over all notes
     */
    public Cursor fetchAllMemos() {
        return database.query(DATABASE_TABLE, new String[] { KEY_ROWID, KEY_NOTE, KEY_CREATED_DATE,
                KEY_CREATED_TIME }, null, null, null, null, null);
    }

    /** * Return a Cursor positioned at the defined Memo */
    public Cursor fetchMemo(long rowId) throws SQLException {
        Cursor mCursor = database.query(true, DATABASE_TABLE, new String[] { KEY_ROWID, KEY_NOTE,
                KEY_CREATED_DATE, KEY_CREATED_TIME }, KEY_ROWID + "=" + rowId, null, null, null, null, null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    static ContentValues createContentValues(String note, String createdDate, String createdTime) {
        ContentValues values = new ContentValues();
        values.put(KEY_NOTE, note);
        values.put(KEY_CREATED_DATE, createdDate);
        values.put(KEY_CREATED_TIME, createdTime);
        return values;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:18:30.607

首先，你有什么理由首先创建你的备忘录然后用相同的值更新它？总体而言，代码看起来不错，我会查看您的注释值是 != null 在“createMemo”中。最终，我建议在您的“updateMemo”方法中更适当地使用。SQLiteDatabase.update 具有以下结构

```
update(String table, ContentValues values, String whereClause, String[] whereArgs) 
```

建议在 whereArgs 中传递参数如下

```
return database.update(DATABASE_TABLE, updateValues, KEY_ROWID + "=?", new String[]{Long.toString(rowId)}) > 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T11:16:57.190

你永远不会在你的 TextEditorActivity 中实例化你的 memoAdapter ......

你有：

```
MemoDbAdapter memoAdapter=null; 
```

进而：

```
memoAdapter.open(); 
```

您在 TextEditorActivity 的某个地方需要这个（在您尝试使用类中的任何方法之前）：

```
memoDbAdapter = new MemoDbAdapter(this); 
```

# java - 在java中不使用相机的二维码解码

> ID：12129504
> 
> 赞同：0
> 
> 时间：2012-08-26T10:54:57.903
> 
> 标签：java, qr-code, zxing

** **我正在开发一个 Java 应用程序来读取（解码）二维码，而无需在笔记本电脑中使用摄像头。我正在使用 ZXING JAR 生成二维码。****

我正在对该二维码进行一些操作。现在，我想在不使用相机的情况下检查二维码是否正常。

有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T11:24:37.827

ZXing 有一个[JavaSE 模块](http://code.google.com/p/zxing/source/browse/trunk#trunk/javase)，它提供了[`BufferedImageLuminanceSource`](http://zxing.org/w/docs/javadoc/com/google/zxing/client/j2se/BufferedImageLuminanceSource.html)解码常规 Java的关键`BufferedImage`。

最低限度，从 ZXing 的 JavaSE [DecodeThread](http://code.google.com/p/zxing/source/browse/trunk/javase/src/com/google/zxing/client/j2se/DecodeThread.java#149)中提取：

```
BufferedImage image = ...
LuminanceSource source = new BufferedImageLuminanceSource(image);
BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));
Result result = new MultiFormatReader().decode(bitmap); 
```

如果`decode()`不抛出异常，则ZXing能够解码条码（您可以查看条码的[内容](http://zxing.org/w/docs/javadoc/com/google/zxing/Result.html)）。

[http://zxing.org/w/docs/javadoc/com/google/zxing/Reader.html#decode(com.google.zxing.BinaryBitmap](http://zxing.org/w/docs/javadoc/com/google/zxing/Reader.html#decode(com.google.zxing.BinaryBitmap) , java.util.Map)

您可以配置`MultiFormatReader`，例如只解析二维码，通过使用[`decode(BinaryBitmap, Map<DecodeHintType,?> hints)`](http://zxing.org/w/docs/javadoc/com/google/zxing/Reader.html#decode%28com.google.zxing.BinaryBitmap,%20java.util.Map%29)重载，允许您指定任意数量的[解码提示](http://zxing.org/w/docs/javadoc/com/google/zxing/DecodeHintType.html)。或者，如果您真的只想要 QR 码，请使用 a[`QRCodeReader`](http://zxing.org/w/docs/javadoc/com/google/zxing/qrcode/QRCodeReader.html)而不是`MultiFormatReader`.

# java - java和javaw的区别

> ID：12129505
> 
> 赞同：7
> 
> 时间：2012-08-26T10:55:09.060
> 
> 标签：java, jvm

`java.exe`我搜索以了解和之间的区别`javaw.exe`。我通读 [了 Java.exe 和 Javaw.exe 之间的区别](https://stackoverflow.com/questions/1997718/difference-between-java-exe-and-javaw-exe)。

那里说这`java.exe`是用于控制台并且`javaw.exe`用于窗口应用程序。在其他一些帖子中提到控制台在`javaw`.

但我想知道当我运行 Tomcat 服务器并在我看到的进程资源管理器中看到它的进程时，`javaw.exe`即使 tomcat 是一个控制台应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T11:12:57.847

[java 和 javaw 命令](http://publib.boulder.ibm.com/infocenter/javasdk/v6r0/index.jsp?topic=/com.ibm.java.doc.user.aix32.60/user/java.html)状态

> java 和 javaw 工具通过启动 JRE 并加载指定的类来启动 Java 应用程序。
> 
> 该`javaw`命令与[java](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html)相同，只是`javaw`没有关联的控制台窗口。`javaw`当您不想显示命令提示符窗口时使用。

**如果`javaw`启动失败，启动器会显示一个带有错误信息的窗口。** 在 Tomcat 的情况下，您不会看到 Win32 控制台应用程序正在运行，类似于启动 Eclipse，使用 javaw.exe。

示例：编写以下代码：

```
import javax.swing.*;
public class JavavsJavaw {
    private static void renderGUI() {
        JFrame jFrame = new JFrame("HelloWorld Swing");
        jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JLabel helloLabel = new JLabel("Hello World!");
        jFrame.getContentPane().add(helloLabel);
        jFrame.pack();
        jFrame.setVisible(true);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                renderGUI();
            }
        });
    }
} 
```

第 1 步：（`C:\>java JavavsJavaw` 命令行等待应用程序响应，直到它关闭） 第 2 步：（`C:\>javaw JavavsJavaw` 应用程序启动，命令行立即退出并准备
下一个命令）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T10:57:19.043

**1.** `java.exe`是等待应用程序完成的命令，直到它接受下一个命令，`javaw.exe`是不会等待应用程序完成的命令。您可以继续执行其他命令。

**2.** `java.exe`是控制台应用程序，`javaw.exe`而是windows应用程序（console-less），`javaw.exe`命令与 相同`java.exe`，只是`javaw.exe`没有**关联的控制台窗口**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T11:32:43.947

It depends on how the Tomcat server is run. However, the way of configuring and starting Tomcat is out of the question. I could say that there's different options of doing that. If you starting Tomcat with `java` it runs like command line application which directs IO to the console. If you run it with `javaw` then it doesn't directs IO to the console. Many applications and servers has logging capabilities that could direct the output to the console. For this purposed better to use a command line instance of `java` instead of windows app. There's a reason to run `javaw` vs `java` is no logging, debugging messages, no error, stacktraces, exceptions, everything that `System.out` and `System.err` produce is visible while you running the application.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T10:57:46.673

java.exe 和 javaw.exe 命令之间的区别在于，在 Windows 上运行 java 程序时，您可能已经注意到它们会以 java.exe 或 javaw.exe 的形式出现在任务管理器中，在 JAVA_HOME/bin 中我们也会看到这两个 java 命令 java .exe和javaw.exe，你知道java.exe和javaw.exe的区别吗

java.exe 和 javaw.exe 都可以执行包括 jar 文件的 java 程序，唯一的区别是使用 java.exe 你有一个控制台执行，你需要等到你的 java 程序完成才能运行任何其他命令，以防万一javaw.exe 没有控制台或窗口与执行相关联。

您可以使用 java.exe 或 javaw.exe 运行您的 java 程序。当您不需要出现命令行窗口时，建议使用 javaw.exe。如果执行失败，javaw 启动器将在对话框中显示错误。

总之，java 和 javaw 命令之间的主要区别在于，使用 java.exe 您将获得一个命令提示符窗口，但使用 javaw.exe 没有关联的命令提示符窗口。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-26T10:58:55.290

java.exe 弹出一个控制台窗口。javaw.exe 没有。

java.exe 和 javaw.exe 都可以执行包括 jar 文件的 java 程序，唯一的区别是使用 java.exe 你有一个控制台执行，你需要等到你的 java 程序完成才能运行任何其他命令，以防万一javaw.exe 没有控制台或窗口与执行相关联。

java 和 javaw 命令之间的主要区别在于，使用 java.exe 您将获得一个命令提示符窗口，但使用 javaw.exe 没有关联的命令提示符窗口。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-04-05T12:33:57.740

除了上述几点之外，还可以注意到，**多线程程序可以用 java 运行，**但**javaw 只能运行单线程**程序！

# php - UTF8 与 PHP 和 MySQL 错误

> ID：12129508
> 
> 赞同：0
> 
> 时间：2012-08-26T10:55:45.637
> 
> 标签：php, mysql

我有一个允许用户提交数据的表单。我将数据库中整个表的排序规则设置为`utf8mb4_unicode_ci`.

但是，当我尝试输入非英文字符时，我在该字段中得到的是`&auml;&frac12;&nbsp;&ccedil;‡!!&aring;&curren`......当我后来用 php 回显数据时，出现了类似的难以辨认的字符。

是我提交表单的问题吗？还是 PHP 能够从 mysql 中的字符串中输出正确的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T11:02:47.050

看起来您正在将 html 编码的字符串插入到您的 sql 服务器中。您缺少 html_entity_decode() 的地方

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T11:09:39.383

对于数据库（在 php 文件中），如果您从查询中提取数据

```
$db->set_charset('utf8');  or mysql_set_charset('utf8',$db); 
```

另外我建议对所有语言使用 utf8 general-ci。

# javascript - 从 javascript 调用 flash click 事件

> ID：12129510
> 
> 赞同：0
> 
> 时间：2012-08-26T10:55:59.103
> 
> 标签：javascript, flash

我的 html 文件中有一个 flash 对象

```
<embed id="ZeroClipboardMovie_1" src="/assets/811871e8/ZeroClipboard.swf" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="100" height="38" name="ZeroClipboardMovie_1" align="middle" allowscriptaccess="always" allowfullscreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="id=1&amp;width=100&amp;height=38" wmode="transparent"> 
```

例如，当单击 html 时，如何在此对象上进行单击事件`button`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T02:34:35.910

您可以通过使用 ExternalInterface 类并添加回调来从 javascript 公开（调用）您的 flash 函数。

AS3（闪存）代码：

```
ExternalInterface.addCallback('nameForJStoCall',flashFunctionName); 
```

JS代码：

```
document.getElementById('ZeroClipboardMovie_1').nameForJStoCall(yourParametersIfNeeded); 
```

有关更详细的示例： [http ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)

## 但是你不能

告诉 flash 在外部发送真正的点击事件（出于安全原因）。除非在 Flash 中实际单击元素，否则调用全屏模式或 FileReference 框之类的操作将不起作用。

# c# - AES 加密“值不能为空”

> ID：12129511
> 
> 赞同：0
> 
> 时间：2012-08-26T10:56:09.697
> 
> 标签：c#, aes, memorystream, cryptostream

我最近一直在尝试“CryptoStream”，并遇到了通过加密和解密文本的想法。Aes 类。'命名空间：System.Security.Cryptography'

在使用两个输入参数创建成功加密文本的函数后：文本、密码

```
static byte[] Salt = { 18,39,27,48,82,32,12,92 };
        public static string EncryptAES(string txt, string Password) {
            Rfc2898DeriveBytes rfc = new Rfc2898DeriveBytes(Password, Salt);
            RijndaelManaged RJM = new RijndaelManaged();
            RJM.Key = rfc.GetBytes(RJM.KeySize / 8);
            ICryptoTransform ICT = Aes.Create().CreateEncryptor(RJM.Key, RJM.IV);

            using (MemoryStream MS = new MemoryStream()) {
                using (CryptoStream CS = new CryptoStream(MS, ICT, CryptoStreamMode.Write)) {
                    using (StreamWriter SW = new StreamWriter(CS)) {
                        SW.Write(txt);
                    }
                }

                return Convert.ToBase64String(MS.ToArray());
            }
        } 
```

解密文本的问题发生了。

我解密文本的尝试如下：

```
public static string DecryptAES(string EncryptedTxt, string Password) {
            Rfc2898DeriveBytes rfc = new Rfc2898DeriveBytes(EncryptedTxt, Salt);
            RijndaelManaged RJM = new RijndaelManaged();
            RJM.Key = rfc.GetBytes(RJM.KeySize / 8);
            ICryptoTransform ICT = Aes.Create().CreateDecryptor(RJM.Key, RJM.IV);
            using (MemoryStream MS = new MemoryStream(Convert.FromBase64String(EncryptedTxt))) {
                using (CryptoStream CS = new CryptoStream(MS, ICT, CryptoStreamMode.Read)) {
                    using (StreamReader SR = new StreamReader(CS)) {
                        return SR.ReadToEnd();
                    }
                }
            } 
```

然而; 看来我将内存流转换为字符串然后返回的方式无效，因为我收到以下错误：**错误：值不能为空\n参数名称：inputBuffer**

错误发生在**使用 (MemoryStream MS = new MemoryStream(Convert.FromBase64String(EncryptedTxt)))**

**如何将 MemoryStream 转换为字符串并返回？**

提前致谢 ：-）

# c++ - 多线程编程

> ID：12129515
> 
> 赞同：0
> 
> 时间：2012-08-26T10:56:42.103
> 
> 标签：c++, multithreading, pthreads

我写了以下代码：

```
 #include<iostream>
 #include<pthread.h>
 using namespace std;

 void* func(void *i)
 {
  cout<<"in func "<<endl;
 }

 int main()
 {
  pthread_t threads[5];

  for(int i=0;i<5;i++)
  {
  pthread_create(&threads[i], NULL, func, (void*)i);
  cout<<"next for loop"<<endl;
  }

  pthread_exit(NULL);
  return 0;
  } 
```

输出是： ![在此处输入图像描述](../Images/7aae4357852879084a2c64564ae40833.png) 从输出看来，第一次显示'next for loop'后的endl换行属性被延迟，'next for loop'和'in func'的endl一个接一个地执行。每次我运行程序时都会发生这种情况。你能告诉我这个延迟的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T13:09:32.760

我觉得

```
cout <<"next for loop" << endl; 
```

是一种紧凑的写作方式

```
cout << "next for loop"; 
cout << endl; 
```

由于您在多线程环境中工作，因此执行顺序是不可预测的。这就是在您的特定情况下发生的情况：

```
cout << "next for loop";
cout << "in func ";
cout << endl;
cout << endl;
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T13:11:21.483

流具有保护它们的锁，因此它们是单线程的。您将需要某种自己的缓冲区来在运行线程时收集结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T13:13:43.320

关于多线程代码的行为没有太多可说的，其中没有使用`locks`和对执行流程进行显式控制`semaphores`。

例如，在您发布的代码中，可能会发生以下情况：

1.  就在`pthread_create()`句子`next for loop`被打印之后
2.  新创建的线程开始并完全打印它的句子（`in func`和`endl`）
3.  主线程再次运行并打印剩余的`endl`

也可能发生这两个`endl`以不同的方式重叠（首先是主线程的一个，然后是新创建的线程的一个）。

注意：使用`std::endl`and `\n`or`\r\n`不是一回事。

`std::endl`还包括一个输出缓冲区刷新操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T11:06:15.327

正如上面的一些答案所指出的那样 cout << something << endl 是两条独立的指令，在多线程环境中 cout << endl 可以很好地在另一个线程完成 cout << something . 试试这个 C 风格的换行符（转义序列）：

```
#include<iostream>
#include<pthread.h>
 using namespace std;

 void* func(void *i)
 {
  cout<<"in func \n";
  //cout << "\n";
  //cout<<endl;
 }

 int main()
 {
  pthread_t threads[5];

  for(int i=0;i<5;i++)
  {
  pthread_create(&threads[i], NULL, func, (void*)i);
  cout<<"next for loop\n";
  //cout << "\n";
  //cout<<endl;
  }

  pthread_exit(NULL);
  return 0;
  } 
```

# c - 从文件中读取数字（整数）并将其存储为二维数组

> ID：12129516
> 
> 赞同：1
> 
> 时间：2012-08-26T10:56:51.090
> 
> 标签：c, matlab, file-io, multidimensional-array

我有一个文件（.dat 和 .txt 格式），其中包含行和列形式的数字（整数）。我需要从此文件中读取数字（整数）。该数据将存储在二维数组中。这个数组是在我的 C 程序中定义的。我曾尝试使用 C 中的文件处理来完成此操作，但它并没有读取整个文件。程序在文件中的某些数据处突然停止并退出程序。以下是我用于此的 C 代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <assert.h>
#define EOL '\n'

int main(){

int i = 0,j = 0,array[][];          //i is row and j is column variable, array is the     target 2d matrix 
FILE *homer;
int v;
homer = fopen("homer_matrix.dat","w");   //opening a file named "homer_matrix.dat"
for(i=0;;i++)
  {
   for(j=0;;j++)
    {
            while (fscanf(homer, "%d", &v) == 1)           //scanning for a readable  value in the file
            {
                if(v==EOL)                                      //if End of line occurs , increment the row variable
                   break;
                array[i][j] = v;                                 //saving the integer value in the 2d array defined
            }
        if(v==EOF)
           break;                                                //if end of file occurs , end the reading operation.
    }

  }
fclose(homer);                                                        //close the opened file

for(i=0;i<=1000;i++)
  {
     for(j=0;j<=1200;j++)
        printf(" %d",array[i][j]);                          //printing the values read in the matrix.

   printf("\n");
   }

 } 
```

谢谢大家的回复，但问题是别的......使用以下代码为二维数组分配内存：

```
#define ROW 512

#define CLMN 512

for(i = 0; i <  ROW; i++)

  {

    for(j = 0;  j < CLMN; j++)

        {

array[i][j] = 0;

        }

  } 
```

我还在以下代码中将权限修改为“r”。

```
homer = fopen(" homer_matrix.txt" , "r"); 
```

但是，我仍然无法将二维条目放入我的变量“数组”中。

ps “homer_matrix.txt”是使用matlab通过以下命令生成的：

代码：

```
A=imread('homer.jpg');

I=rgb2gray(A);

dlmwrite('homer_matrix.txt',I); 
```

此代码将生成文件“homer_matrix.txt”，其中包含 768 X 1024 条目形式的图像灰度值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T10:59:30.177

```
int i = 0,j = 0,array[][]; 
```

这里的`array`声明无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T11:04:07.680

```
homer = fopen("homer_matrix.dat","w"); 
```

使用标志“w”打开文本文件进行阅读不是一个好主意。尝试改用“rt”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T16:34:47.443

以下代码将为您工作。它将准确计算您在文本文件中有多少行和列。

```
do {  //calculating the no. of rows and columns in the text file
    c = getc (fp);

    if((temp != 2) && (c == ' ' || c == '\n'))
    {
        n++;
    }
    if(c == '\n')
    {
        temp =2;
        m++;
    }
} while (c != EOF);
fclose(fp); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T11:02:04.283

您忘记为数组分配内存

```
int i = 0,j = 0,array[][]; 
```

这应该是这样的

```
#define MAXCOLS 1000
#define MAXROWS 1000
int i = 0,j = 0,array[MAXROWS][MAXCOLS]; 
```

# sql - 如何为 CSV 的每个值运行 SQL Server 存储过程查询

> ID：12129520
> 
> 赞同：0
> 
> 时间：2012-08-26T10:57:22.530
> 
> 标签：sql, sql-server, database, tsql

我的 SQL Server 2008 R2 数据库中有以下存储过程

```
ALTER PROCEDURE [dbo].[usp_send_email] 
    @pStatus Int Out,
    @pEMailId Int Out,
    @pSenderUserName varchar(MAX),  
    @pReceivers VarChar(50),         **-- this column can have csv values**
    @pSub NVarChar(100),
    @pCon NVarchar(MAX),
    @pHasAttachments Bit
AS
BEGIN
   --SET NOCOUNT ON;

   Insert Into MessagingMessage
      (
       CreatedBy,
       [Subject],
       Body,
       HasAttachments
      )
     Values
     (    
      @pSenderUserName,
      @pSub,
      @pCon,
      @pHasAttachments
      )
    SET @pEMailId = SCOPE_IDENTITY()  

     Insert Into MessagingMessageReceipient
      (
       MessageId,
       ReceipientId,
       ReceipientType
      )
     Values
     (    
      @pEMailId,
      @pReceivers,
      1
      )
     SET @pStatus  = SCOPE_IDENTITY() 

END 
```

在上面的代码中，我只想运行第一个语句一次，但第二个插入语句循环中每个逗号分隔的 username.CSV 值作为参数已经通过 C# 代码验证，因此无需验证它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:22:53.550

使用此链接：[如何在单个语句中将 CSV 数据拆分并插入到新表中？](https://stackoverflow.com/questions/3265316/how-to-split-and-insert-csv-data-into-a-new-table-in-single-statement)，有一个函数可以用来将 csv 解析为表格，我在下面的代码中使用了它。尝试以下

```
Insert Into MessagingMessageReceipient
  (
   MessageId,
   ReceipientId,
   ReceipientType
  )
  SELECT
   @pEMailId,
   csv.Part,   -- each @pReceiver
   1
  FROM 
     dbo.inline_split_me(',',@pReceivers) csv 
```

并且函数复制如下

```
CREATE FUNCTION inline_split_me (@SplitOn char(1),@String varchar(7998))
RETURNS TABLE AS
RETURN (WITH SplitSting AS
           (SELECT
                LEFT(@String,CHARINDEX(@SplitOn,@String)-1) AS Part
                    ,RIGHT(@String,LEN(@String)-CHARINDEX(@SplitOn,@String)) AS Remainder
                WHERE @String IS NOT NULL AND CHARINDEX(@SplitOn,@String)>0
            UNION ALL
            SELECT
                LEFT(Remainder,CHARINDEX(@SplitOn,Remainder)-1)
                    ,RIGHT(Remainder,LEN(Remainder)-CHARINDEX(@SplitOn,Remainder))
                FROM SplitSting
                WHERE Remainder IS NOT NULL AND CHARINDEX(@SplitOn,Remainder)>0
            UNION ALL
            SELECT
                Remainder,null
                FROM SplitSting
                WHERE Remainder IS NOT NULL AND CHARINDEX(@SplitOn,Remainder)=0
           )
           SELECT Part FROM SplitSting
       ) 
```

# android - 如何通过所有活动传递参数？

> ID：12129522
> 
> 赞同：0
> 
> 时间：2012-08-26T10:57:44.857
> 
> 标签：android, android-intent, android-activity, android-context

我正在开发一个移动应用程序，我需要在所有活动中都可以使用用户对象，并且我不想使用 Intent 从每个活动发送它到另一个活动。

谁能帮帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T11:10:11.123

如果您可以将其存储在：

*   [SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)或
*   [SQLite](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)

我认为 SharedPreferences 实现起来会简单得多。这是一个示例，您可以如何创建一个静态函数，您可以从所有活动中访问它：

```
public class UserCreator
{
    public static User getUser(Context context)
    {
        SharedPreferences prefs = context.getSharedPreferences("Name", Context.MODE_PRIVATE);

        //Check if the user is already stored, if is, then simply get the data from
        //your SharedPreference object.

        boolean isValid = prefs.getBoolean("valid", false);

        if(isValid)
        {
            String userName = prefs.getString("username", "");
            String passWord = prefs.getString("password", "");
            ...
            return new User(userName, passWord,...); 
        }
        //If not, then store data
        else
        {
            //for example show a dialog here, where the user can log in.
            //when you have the data, then:

            if(...login successful...)
            {
                SharedPreferences.Editor editor = prefs.edit();
                editor.putString("username", "someusername");
                editor.putString("password", "somepassword");
                editor.putBoolean("valid", true);
                ...
                editor.commit();
            }
            // Now, if the login was successful, then you can recall this function,
            // and it will return a valid user object.
            // if it was not, then it will show the login-dialog again.
            return getUser(context);
        }
    }
} 
```

然后从您的所有活动中：

```
User user = UserCreator.getUser(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:37:20.517

只需将该对象设为“**公共静态**”即可。然后在其他活动中访问它，例如：

```
PreviousActivity.userobj 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T11:02:15.777

编写一个扩展类的`Application`类。并将全局参数放在那里。这些参数将在应用程序上下文中有效。

# c++ - 从某个但很大的虚拟地址空间（例如 20GB 以上）分配内存

> ID：12129535
> 
> 赞同：-1
> 
> 时间：2012-08-26T10:58:41.150
> 
> 标签：c++, c, memory-management

我会搞乱内存共享，而神蛋糕要我做标题所说的，因为在 20GB 以上，我将分配 256MB 块（永远没有其他大小）给某些用户并与其他进程映射（共享）它们. 64 位虚拟地址空间是巨大的（16EB）。只是我需要将用户管理器的代码和数据与用户的记忆分开。

完美将是这样的一些功能：

```
void *malloc(size_t n, void *from, void *to); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:35:18.197

Supposing you are on a system with POSIX support, you want to create or locate a shared memory segment with `shmget`, attach to it with `shmat`. When done, you detach with `shmdt` and remove the shared memory segment with `shmctl`. I leave it to you to read the documentation for these routines.

While `shmat` allows you to request a specific address at which to map the shared memory, there is generally no need to do so. You can pass zero for the address parameter, and `shmat` will pick an address. Setting a high address does nothing to separate the shared memory from other memory, except possibly to reduce or alter the errors that could be caused by buffer overruns writing to unintended places in memory.

# image - CLI : 是否有使用曲线倾斜图像的脚本

> ID：12129536
> 
> 赞同：1
> 
> 时间：2012-08-26T10:58:50.563
> 
> 标签：image, skew

寻找一个可以通过命令行为我倾斜图像的脚本。

偏斜需要是一条曲线；[代替imagemagick](http://www.fmwconcepts.com/imagemagick/skew/index.php)或 lunapic提供的角度倾斜。

我希望它看起来像是放置在天球中。基本上能装进[这些箱子](http://www.dreamstime.com/royalty-fr...-image11717706)里面。

另外，CSS可以做到吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T02:01:18.217

使用一个名为 POVRay 的程序和一些脚本黑客来获得它......如果有兴趣，请在 linuxquestions.org 上查看完整说明：[http ://www.linuxquestions.org/questions/showthread.php?p=4764944](http://www.linuxquestions.org/questions/showthread.php?p=4764944)

# javascript - JavaScript - 使用 B.prototype=new A() 继承数组

> ID：12129540
> 
> 赞同：5
> 
> 时间：2012-08-26T10:59:17.680
> 
> 标签：javascript, oop, inheritance, prototypal-inheritance

（我是 JavaScript 新手）。以下代码：

```
function A() {
    console.log('Constructing A');
    this.a = new Array();
}
function B(x) {
    console.log('Constructing B');
    this.a.push(x);
    this.b = x;
}
B.prototype = new A();
b1 = new B(10);
b2 = new B(11);
console.log('b1', b1);
console.log('b2', b2);​ 
```

结果 b1 和 b2 共享*单个* `this`.a 数组（但*不同* `this.b`）。这就像一个浅拷贝。

我不太明白创建*单独* `this.a`数组的正确方法是什么。我希望它们继承，因为这是代码的逻辑，此外我不想在每个子对象中创建它们（在我的情况下有很多子对象）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T12:35:01.673

I am very interested in the explanation of this problem. I've read @Niko`s duplicate question but it seems this is what makes the difference:

```
 function A() {
        console.log('Constructing A');
        this.a=new Array();
    }

    function B(x) {
        console.log('Constructing B');
        A.call(this); //--> calling the super() constructor creates a new array
        this.a.push(x);
    }

    B.prototype = new A();

    b1 = new B(11);
    b2 = new B(12);
    console.log(b1.a);
    console.log(b2.a); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T13:21:10.100

在您的代码中：

```
> function A() {
>     console.log('Constructing A');
>     this.a = new Array();
> }
>
> function B(x) {
>     console.log('Constructing B');
>     this.a.push(x);
>     this.b = x;
> }
>
> B.prototype = new A(); 
```

这将 B 的原型设置为 A 的实例。因此 B 的所有实例都将在其`[[Prototype]]`链上具有该 A 的实例。

在 B 构造函数中，`this`引用了一个继承自 B.prototype 的新对象，因此`this.a`将引用 .prototype 的`a`属性`B.prototype`。

```
> b1 = new B(10); 
```

所以现在`B.prototype.a`是`[10]`。

```
> b2 = new B(11); 
```

现在`B.prototype.a`是`[10, 11]`。

# linux-kernel - 如何使 VirtualBox 或 VMware（或任何其他虚拟化软件）使用本机访客网络驱动程序？

> ID：12129544
> 
> 赞同：3
> 
> 时间：2012-08-26T10:59:58.790
> 
> 标签：linux-kernel, vmware, virtualization, virtualbox, wireless

我不知道我想要实现的目标是否真的可行。我有一个 RTL8192CE 无线网络[Mini PCI](http://en.wikipedia.org/wiki/Mini_PCI#Mini_PCI)卡，它在 Linux 上肯定不能正常工作（运行 Ubuntu 12.04 64 位（Precise Pangolin））。我已经尝试了所有我能想到的东西：我从[Realtek](http://en.wikipedia.org/wiki/Realtek)主页下载了最新的驱动程序，尝试将[NDISwrapper](http://en.wikipedia.org/wiki/NDISwrapper)与几组不同的 Windows 驱动程序一起使用，还尝试使用通用无线反向端口等。这些都没有解决我的问题。

另一方面，它确实可以在 Windows 上完美运行……我双启动 Windows 7 和 Ubuntu 12.04，都是 64 位的。显然，[Ubuntu 中存在](https://bugs.launchpad.net/ubuntu/+source/linux/+bug/902557)与此卡相关的错误。

我想知道是否有办法在我的 Ubuntu 12.04 64 位下使用本机 Windows 驱动程序（因为网卡在 Windows 中完美运行）下使用虚拟化 Windows 安装（ [Windows XP](http://en.wikipedia.org/wiki/Windows_XP)或[Windows 7](http://en.wikipedia.org/wiki/Windows_7)，最好不是[Windows Vista](http://en.wikipedia.org/wiki/Windows_Vista) ） . 虚拟化软件可以是[VirtualBox](http://en.wikipedia.org/wiki/VirtualBox)（首选）、[VMware](http://en.wikipedia.org/wiki/VMware)或任何其他软件。如果我必须通过 shell 脚本或类似的东西手动配置它，没有任何问题。

所以，为了更清楚，我在我的 Ubuntu 12.04（我的主机）中安装了一个 VirtualBox，我用它来运行 Windows 7（我的客人）。我想知道这个虚拟化（来宾）Windows 7 是否可以“直接”访问我的无线接口——例如我安装的双启动 Windows 7，而无需通过 Ubuntu 驱动程序。

显然[我无法](http://www.virtualbox.org/manual/ch04.html)通过使用 VirtualBox 的来宾添加来实现这一点，可以吗？

PS：我相信 VirtualBox 的网络模式（[NAT](http://en.wikipedia.org/wiki/Network_address_translation)、桥接网络、内部网络和仅主机网络）都不允许我这样做，对吗？我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T02:57:43.550

您所要求的在 VirtualBox 中被称为 PCI Passthrough - 它应该被认为是一个非常高级的主题。我之前在 VirtualBox 和 VMWare ESXi 中尝试过这个功能（制作那个 vSphere ...），它可能非常脆弱。

我建议您花一些时间阅读 VirtualBox 手册部分（[第 9 章：高级主题](https://www.virtualbox.org/manual/ch09.html#pcipassthrough)），您需要了解一些限制，并且要知道这是一个非常年轻的虚拟化领域，并且不成熟。在你开始之前，这里有一些相当严格的要求：

*   您的硬件必须有 IOMMU（英特尔称其为 VT-d、AMD -> AMD-Vi）
*   您的来宾必须配置为启用硬件辅助（VT-x 或 AMD-V）
*   必须构建您的主机 Linux 内核以利用 IOMMU 硬件

如果您的硬件/软件符合这些相当严格的准则，请试一试。将会发生的情况是，您的客人将被有效地直接访问您的无线 PCI 卡，并且它将直接作为 PCI 设备显示给您的客人。如果 Windows 是您的主机操作系统而不是您的来宾，您将安装和使用驱动程序。

参考 - 第 9 章：高级主题 - PCI Passthrough [https://www.virtualbox.org/manual/ch09.html#pcipassthrough](https://www.virtualbox.org/manual/ch09.html#pcipassthrough)

# javascript - Javascript值检查

> ID：12129545
> 
> 赞同：2
> 
> 时间：2012-08-26T11:00:32.690
> 
> 标签：javascript, jquery, html, document.write

我正在编写一个解析 XML 文件并将其显示为 html 的脚本。这里是：

```
<script>
$.get("api.xml", function (xml) {
    $(xml).find("row").each(function () {

       var date = $(this).attr('date');
       var amount = $(this).attr('amount');
       var balance = $(this).attr('balance');

document.write("A: " + date + "<br />B: " + amount + " ISK<br />C: " + balance + " ISK<br /><br /><br /><br />");
    });
});
</script> 
```

我想修改“document.write”的输出，如果“amount”值为正，则输入“green”一词，否则，如果值为“red”，则输入“red”。我试着写如下：

```
<script>
$.get("api.xml", function (xml) {
    $(xml).find("row").each(function () {

       var date = $(this).attr('date');
       var amount = $(this).attr('amount');
       var balance = $(this).attr('balance');

document.write("<script> if (amount >= 0) { document.write("green"); } else{ document.write("red"); } </scri" + "pt>");
    });
});
</script> 
```

但在那篇文章中，我在“document.write”中遇到语法错误。我写错了什么，如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T11:05:56.783

我认为您可以在使用 document.write 写入输出之前计算颜色。像这样的东西应该工作：

```
<script>
$.get("api.xml", function (xml) {
  $(xml).find("row").each(function () {
    var date = $(this).attr('date');
    var amount = $(this).attr('amount');
    var balance = $(this).attr('balance');

    var color = "green";
    if (amount < 0) {
     color = "red";
    }

    document.write("A: " + date + "<br />B: <span style='color:" + color + "'>" + amount + " ISK</span><br />C: " + balance + " ISK<br /><br /><br /><br />");
 });
});
</script> 
```

（未检查语法）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T11:07:01.423

要得到答案，只需看看这段代码是如何突出显示的。“绿色”和“红色”这两个词在引号之外。您应该使用单引号（或转义双引号）。

另一个问题是你为什么要使用元编程来完成这样一个简单的任务。只需用两个不同的`document.write`语句编写一个条件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T11:05:46.730

```
<script>
$.get("api.xml", function (xml) {
    $(xml).find("row").each(function () {

       var date = $(this).attr('date');
       var amount = $(this).attr('amount');
       var balance = $(this).attr('balance');
       document.write(amount >= 0 ? "green" : "red");
    });
});
</script> 
```

# ruby-on-rails - Ruby on rails gem 向用户显示一次性消息。

> ID：12129547
> 
> 赞同：1
> 
> 时间：2012-08-26T11:00:52.027
> 
> 标签：ruby-on-rails

是否有任何 gem 或库可用于向用户显示一次消息？我特别在寻找可以让我：

*   用户首次登录时显示“欢迎登机”完整覆盖。（而且只在第一次）
*   一个较小的下拉覆盖，通知用户在接下来的 24 小时内可能会有维护，或者他们需要做一些事情（填写他们的个人资料等）。这将显示直到被解雇。

我对此有点坚持，因为我不知道这些消息通常被称为什么。这些一次性消息有名字吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T11:33:08.083

there are many ways to implement such a notification system, your requirements are pretty basic so I'll stick with a basic approach using `flash`

**Show Message on the first login:**

You should keep track of ther user's last login and maybe count the logins, so what you could do:

*   Add a field "last_login_at" to your User Model which gets updated every time the user logs in, set it to NULL after registration. When the user logs in you check if the `last_login_at` is NULL if yes you set a message to the flash like `flash[:first_login] = true` then you can render a special welcome message in your template if this flag is set.

*   A better approach is to add a field like `login_counter` which gets incremented every time the user logs in, so if it is zero the user is logging in for the first time. A login counter can also help you to identify "active" users who log in often etc.

There is a popular authentication system called devise which has these (and many more!) features built in: [https://github.com/plataformatec/devise](https://github.com/plataformatec/devise)

**Show maintenance warnings etc.**

I'd create a new model called `SystemMessage` which has fields like:

`id | message_type | title | body | valid_from | valid_until`

The `message_type` attribute describes what kind of message it is like "maintenace notice", "new features" etc. dependent on the type of the message you could render different templates and adjust the look of the message.

The `valid_from` and `valid_until` attributes lets you control in which time frame the message should appear.

On every request you fetch these messages and show them to the user, you can also cache the messages on a regular basis to reduce the amount of queries. Have a look at the rails guide about caching: [http://guides.rubyonrails.org/caching_with_rails.html](http://guides.rubyonrails.org/caching_with_rails.html)

To inform users that are idle on a page you can implement an AJAX request which fires every five minutes or so and fetches the messages and checks if there are any messages newer than the ones already displayed.

If you need to show user-specific messages (like you got 5 new mails, someone commented on your post etc.) in real-time you could use a pub-sub messaging system like 'Faye' (tutorial: [http://railscasts.com/episodes/260-messaging-with-faye](http://railscasts.com/episodes/260-messaging-with-faye) or just google for "rails 3 faye")

I hope this is a starting point for you :)

# mercurial - 没有写访问权限的子存储库上的 Mq

> ID：12129548
> 
> 赞同：0
> 
> 时间：2012-08-26T11:01:02.243
> 
> 标签：mercurial, bitbucket, mercurial-subrepos, mercurial-queue

我在我的项目中有一个依赖作为子存储库（没有写访问权限）。我想向该子存储库添加一些个人定制 - 可能使用 mq.

我也希望能够克隆主仓库来构建它。目前我必须：

1.  克隆 repo - 子存储库被自动克隆
2.  手动克隆子存储库的所有补丁队列

如何摆脱第 2 步？没有外部脚本甚至可能吗？（如果有任何区别，我正在使用 bitbucket）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T01:02:46.353

一个想法是使子存储库不是您没有写入权限的存储库，而是基于它们的存储库的您自己的克隆。

cd myclones hg clone [http://notmydomain.com/their-repo](http://notmydomain.com/their-repo) my-clone-of-their-repo

在您的项目中，`.hg/hgrc`您使用一个`[subpaths]`部分将他们的 URL 映射到您的本地克隆：

```
[subpaths]
http://notmydomain.com/their-repo = ../my-clone-of-their-repo 
```

然后，您最终使用您的仓库的本地（读写）克隆来获得您的仓库，否则您将拥有只读访问权限。这有几个好处：

*   更快——您只检查本地存储库的所有操作
*   可写——您可以编辑目录`myproject/their-repo`并提交和推送（到您的本地克隆）

当您想要合并他们的上游更改时，您只需进入 ../my-clone-of-their-repo 并将`hg pull`其`hg merge`更新到您的自定义项中。

# php - 如何使用 Windows 7 操作系统在 wamp 上安装 wkhtmltopdf

> ID：12129549
> 
> 赞同：0
> 
> 时间：2012-08-26T11:01:08.430
> 
> 标签：php, pdf, wkhtmltopdf

我正在使用文本框处理此发票页面，用户在其中输入数字以获取订单。现在我在 Windows 7 操作系统上使用 wamp，我试图在用户输入他们的数字后将页面转换为 pdf 并将其保存在一个文件夹中，然后将其输出到另一个窗口中以供查看。

到目前为止，我还没有做太多事情，在过去的两周里，这让我发疯了。拜托，我需要建议，非常感谢。

这是我想要和需要做的：

1.  将页面保存为 html 格式，包括文本框中的值。
2.  将保存的页面转换为 pdf 并存储在目录中。
3.  通过电子邮件将 pdf 发送给用户。

到目前为止的代码

1.  保存页面html

    ```
    function printPDF() {
              var h = '<style></style>'+$('#article').html();
          var html = '<html><body><scr'+'ipt>';
          html += 'var form = document.createElement("form");';
          html += 'form.setAttribute("method","post");';
          html += 'form.setAttribute("action","/ajax/pdf/");';
          html += 'var h = document.createElement("input");';
          html += 'h.setAttribute("type","hidden");';
          html += 'h.setAttribute("name","html");';
          html += 'h.setAttribute("value","'+escape(h)+'");';
          html += 'form.appendChild(h);';
          html += 'document.body.appendChild(form);';
          html += 'form.submit();';
          html += '</sc'+'ript></body></html>';
          var w = window.open('','');
          w.document.write(html);
          w.document.close();
        } 
    ```

但问题是它每次都必须打开一个新窗口，我不希望它通过 ajax/jquery 在后台提交，其次创建的 html 文档没有文本框中的值，它们都被清除了。

1.  将页面转换为pdf并存储在目录中

    ```
    $filepath = '/www/html/';
          $pdfpath = '/www/pdf/';
    $filename = date('YmdHisu');

     $html = urldecode($_POST['html']);

     file_put_contents($filepath.$filename.'.html',$html);

     $pdfcmd = 'wkhtmltopdf.sh '.$filepath.$filename.'.html '.$pdfpath.$filename.'.pdf 
    --disable-javascript';

         exec($pdfcmd);

        if ($fd = fopen($pdfpath.$filename.'.pdf','r')) {

         $fsize = filesize($pdfpath.$filename.'.pdf');

         header('Content-type: application/pdf');

        header('Content-length: '.$fsize);

         header('Cache-control: private');

         while(!feof($fd)) {

          $buffer = fread($fd, 2048);

         echo $buffer;

      }

          fclose($fd);

        }

       unlink($filepath.$filename.'.html'); 
    ```

还使用了我为 wkhtmltopdf 获得的包装器，但似乎没有一个工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:22:39.250

至于问题的标题：Download the latest windows installer from [The wkhtmltopdf download site](http://code.google.com/p/wkhtmltopdf/downloads/list)。

请提出更具体的问题。对我来说，这看起来像是您正在寻找一个现成的解决方案来使用，而不是一个特定问题的答案。试着一步一步解决你面临的问题，每次遇到问题时，问一个具体的问题。

从以下内容开始：您可以安装 wkhtmltopdf 吗？你可以从命令行调用它吗？您可以使用静态 HTML 文件从 PHP 调用它吗？等等等等

# c - 在 char 数组和掩码中使用 int 而不是 char

> ID：12129554
> 
> 赞同：4
> 
> 时间：2012-08-26T11:01:47.497
> 
> 标签：c, bit-manipulation

[在此处](http://rclermont.blogspot.tw/2010/02/convert-long-into-byte-array-in-cc.html)显示的位移示例中 ：

```
 unsigned long int longInt = 1234567890;
 unsigned char byteArray[4];

 // convert from an unsigned long int to a 4-byte array
 byteArray[0] = (int)((longInt >> 24) & 0xFF) ;
 byteArray[1] = (int)((longInt >> 16) & 0xFF) ;
 byteArray[2] = (int)((longInt >> 8) & 0XFF);
 byteArray[3] = (int)((longInt & 0XFF)); 
```

三个问题：

1.  为什么是 (int) 而不是 (unsigned char)？我用 unsigned char 试过了，它似乎编译得很好。
2.  0XFF 是必要的吗？新的位移位不是 0，因为 Wikipedia 说 C 使用逻辑位移和逻辑位移位移 0？（编辑：至少在具有 >> 24 的情况下似乎没有必要？）
3.  我不能只做一个 memcpy() 将 longInt 复制到 unsigned char 缓冲区吗？不是因为字节序的问题吗？还有其他原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T11:06:14.603

**1.**

`((longInt >> 24) & 0xFF)`表达式是类型`unsigned long int`。使用强制`int`转换，表达式首先转换为`int`then to `unsigned char`。如果不强制`int`转换为表达式，则不会先转换为`int`. 这两种情况没有区别，演员阵容是多余的。

**2.**

`0xff`没有必要。转换为`unsigned char`实际执行相同的操作。

**3.**

您可以使用`memcpy`，但它不可移植，因为它取决于系统的字节序。如果系统是大端或小端，它将给出不同的结果，而按位移位解决方案将给出相同的结果。

# android - 错误：不允许使用字符串类型（在“screenOrientation”处，值为“sensorPortait”）

> ID：12129558
> 
> 赞同：9
> 
> 时间：2012-08-26T11:02:19.110
> 
> 标签：android

我导入了 android 项目，但出现 3 个错误

```
error: Error: String types not allowed (at 'screenOrientation' with value 'sensorPortait'). AndroidManifest.xml /com.cartmillimaging.fishingmate.MapViewActivity    line 16 Android AAPT Problem 
```

在不同的行上出现相同的错误。

```
<activity android:name=".MapViewActivity" android:screenOrientation="sensorPortait"> 
```

对于项目构建目标，我选择了 Google API 2.3.3。10\. 我还启用了 Java 编译器项目特定设置，并将编译器合规性错误设置为 1.6。

我是android开发的新手，你能帮我吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-04T03:44:23.780

检查您的 API 级别。以下属性：

`android:screenOrientation="sensorPortrait"`只能在 API 级别 16+ 上工作

`android:screenOrientation="sensorPortait"`可以在15级以下工作

我认为这是一个固定的错误

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T11:06:27.960

值中存在拼写错误。正确的名称是“sensorPortrait”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T14:06:54.070

当您加载项目时，我收到此错误（我使用 api 级别 10）。我找到了解决方案。您将 screenOrientation 更改为其他内容，保存它，然后返回到 sensorPortait，现在一切正常。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-10T11:19:17.780

证实了羊绒所说的。

我改变了一切

```
android:screenOrientation="sensorPortrait" 
```

到

```
android:screenOrientation="sensorLandscape" 
```

构建了项目，然后针对清单中的所有活动再次将其更改回来，并且一切正常：)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-26T20:19:45.780

有这个错误，不能踢它。我的构建设置如何选择 API 13... 选择 API 21 并且不再有问题！

# postgresql - 尝试为 Clojure / Korma / PostgreSQL 站点创建用户登录

> ID：12129559
> 
> 赞同：6
> 
> 时间：2012-08-26T11:02:35.473
> 
> 标签：postgresql, clojure, noir, korma

我完全不知道从哪里开始获取我正在构建的 Clojure 站点的登录区域（为了好玩）。

我查看了几个资源，我将在下面发布，无情地复制/粘贴代码，我能得到的最接近的是以下两种情况之一：

登录页面进行登录，但说登录失败，但据我所知，登录匹配。

或者我收到此错误：**多方法'-> sql'中没有用于调度值的方法：null**

我不确定如何解释上述错误：这是指定我需要一个多方法还是指定我需要检查 null？null 要求根本没有意义。我不是真的在问，但如果有人想给出解释，那就太好了。

我通过比较来自原始非散列数据的结果到选择查询来测试输出，我经历了这个主题的 5 个变体，使用从页面到页面调用到创建新的 defpartials、多方法、defn 的所有内容， ETC。

我使用的来源（不幸的是，我不能将所有这些都列为首次发布者）：

这个使用 Clojure -> Korma -> PostgreSQL，但代码似乎不适用于多个用户？
[http://www.vijaykiran.com/2012/01/17/web-application-development-with-clojure-part-2/](http://www.vijaykiran.com/2012/01/17/web-application-development-with-clojure-part-2/)

这个展示了如何使用 Noir 和 PostgreSQL（是的，我正在使用 Noir）： [https ://yogthos.net:11794/blog/23-Noir+tutorial+-+part+2](https://yogthos.net:11794/blog/23-Noir+tutorial+-+part+2)

4Clojure 站点，但该站点使用的是 CongoMongo：

Heroku Twitter 克隆，但没有提及如何为一个人创建登录名，更不用说为几个人创建登录名了。

我还从 O'Reilly Press 购买了 Programming Clojure，但再一次，没有关于如何创建登录区域的内容。

**第一次编辑：**我被要求创建一个独立站点的 github 存储库。这包括在welcome.clj 文件中找到的工作“帐户创建”区域和login.clj 中仅一种形式的登录区域。

我试图让一些与昨晚一样的错误正常工作，并在上传文件之前尝试让这个工作正常。我还没有任何合理的起点，因此目前还没有开始实施。我对我提出的解决方案感到非常尴尬，因此我不想发布它们。我从概念上得到了我应该做的事情，但由于某种原因，我似乎无法翻译这个。这是我的第一个github账号：我的背景是Python，Scheme a'la SICP，还有我自己搭建的一些Python+PostgreSQL营销程序。

**第二次编辑：**确认！我似乎根本无法让它工作......是的，我在这个上花了超过 20 分钟（小时），所以我不得不承认我还没有必要的知识来完成这个，无论我查看多少来源。我提交了更新的文件和我尝试过的所有奇怪的事情，包括登录框的所有变体以运行原始 SQL。我能得到的最接近的方法是得到它，这样我就不会收到任何错误，但根本没有证据表明有人已登录。非常感谢您的帮助和建议。我肯定会稍后再谈。

[https://github.com/dt1/noirKormaLogin](https://github.com/dt1/noirKormaLogin)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T21:18:22.720

我看到了几个问题。首先，在 中`datapass.clj`，您正在创建一个没有内容的实体。我不确定 Korma 是如何处理的。它试图将结果作为输入到其他函数，所以我可以看到`nil`那里是如何引入的。

其次，您需要一些东西来处理登录帖子。 `(defpage ...)`默认只处理 GET 请求。你需要一个单独`defpage`的来处理帖子。这些方面的东西：

```
(defpage [:post "/login"] {:keys [user-name pwd]}
  (if-let [user (db/find-user user)]
    (if (noir.util.crypt/compare pwd (:password user))
       (do
         (noir.session/put! :some-key some-value)
         (noir.response/redirect "/success"))
       noir.response/redirect "/failed-to-login"))
  (noir.response/redirect "/failed-to-login")) 
```

`session/put!`是您如何将数据放入会话中。默认是使用内存存储。您需要添加 Ring 中间件以使用[持久会话](https://github.com/ring-clojure/ring/wiki/Sessions)（查看 Session Stores）。

此外，幸运的是，有人刚刚为 Noir 发布了一个身份验证应用程序......您可能想看看：[https ://github.com/xavi/noir-auth-app](https://github.com/xavi/noir-auth-app)

# java - 使用 AspectJ 实现虫洞模式

> ID：12129562
> 
> 赞同：5
> 
> 时间：2012-08-26T11:03:29.413
> 
> 标签：java, aop, guice, aspectj

我正在寻找一个使用 AspectJ 实现虫洞模式的示例（如果 Guice AOP 有能力实现这个，我会感兴趣）。

虫洞本质上允许您在调用流中传递其他参数，例如：

```
// say we have
class foo {
   public int m0 int a, int b) {
     return m1(a,b);
   }

   public int m1 int a, int b) {
     return m2(a,b);
   }

   public int m2 int a, int b) {
     return a+b;
   }
}
// and I wanted in a non-invasive manner to pass a third parameter of type
class context {
  String userName;
  long timeCalled;
  String path;
}
// I could use an advise to say print the context information
// to trace what was going on without mucking up my method signatures 
```

我相信这个 Ramnivas Laddad 在他的《AspectJ in Action》一书中就有这样的例子。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T12:36:07.950

确实在[AspectJ in Action](http://www.manning.com/laddad2/)中有一个例子。如果您查看[目录，](http://www.manning.com/laddad2/excerpt_contents.html)您会发现第 12.2 章就是您要查找的内容。买这本书是个好主意。我可以热情地推荐它。因为我不确定是否可以仅复制和粘贴本书的部分内容，所以我将在这里引用模板：

```
public aspect WormholeAspect {
    pointcut callerSpace(<caller context>) :
        <caller pointcut>;

    pointcut calleeSpace(<callee context>) :
        <callee pointcut>;

    pointcut wormhole(<caller context>, <callee context>) :
        cflow(callerSpace(<caller context>)) && 
        calleeSpace(<callee context>);

    // advice to wormhole
    before(<caller context>, <callee context>) :
        wormhole(<caller context>, <callee context>)
    {
            ... advice body
    }
} 
```

[Laddad](http://www.theserverside.com/news/1365184/Part-2-The-Techniques-of-the-Trade)在 TheServerSide.com 上有一篇旧文章，其中有一个更具体的示例。和书上的不一样，但很相似。

如您所见，在 AspectJ 中很容易做到，因为那里有`cflow()`切入点。我从未使用过 Guice，但它的[AOP 介绍](http://code.google.com/p/google-guice/wiki/AOP)页面提到它们的实现是[AOP 联盟](http://aopalliance.sourceforge.net/)规范的一部分。查看[AOP 联盟 API](http://aopalliance.sourceforge.net/doc/index.html)，没有什么看起来像一个`cflow()`切入点，它围绕着构造函数和方法调用以及字段访问。

那么如果你想避免通过所有层传递参数，你可以在 Spring（没有 AspectJ）或 Guice 中做什么？显而易见的解决方案是`ThreadLocal`由调用者声明和管理（即分配但也清除）并由被调用者访问的变量。这不好，只是一种解决方法，以免使 API 膨胀。但这需要调用者和被调用者对他们想要共享的内容以及如何共享有一个共同的理解。在某种程度上，这种实现更像是一种反模式而不是一种模式。如果可以，请使用 AspectJ 以一种干净和模块化的方式解决这个问题，将要解决的问题封装在一个模块（方面）中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-29T17:48:39.400

一个简单的例子。想象一下，您有提供功能的*上下文*和*目标对象*，这在某种程度上取决于上下文的状态：

```
class T {   
    public void foo() {
        System.out.println("T.foo()");
    }
}

class Context {
    public boolean isValid = true;
    public void doStuff() {
        T t = new T();
        t.foo();
    }
}

public class Main { 
    public static void main(String[] args) {
        Context c = new Context();
        c.doStuff();
    }
} 
```

只有当成员设置为时，才能确保实例的实例可以在实例上`Context`调用的方面可能如下所示：`foo()``T``isValid``true`

```
public aspect ContextStateValidation {

    pointcut MyContext(Context c) :
        execution(* Context.*()) && this(c);

    pointcut FooCalls(T t) :
        call(* T.foo()) && target(t);

    pointcut FooCallsInMyContext(Context c, T t) :
        cflow(MyContext(c)) && FooCalls(t);

    void around(Context c, T t) : FooCallsInMyContext(c, t) {
        if (c.isValid)
            proceed(c, t);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T19:26:43.070

不要使用虫洞模式……事实上，只有在你确定需要它时才使用 AOP，否则就不要使用它。

虫洞模式的缺点是你跳过了很多层……那是你真正想要的吗？:)

格茨，

克里斯托夫

# javascript - 谷歌地图没有显示任何标记

> ID：12129563
> 
> 赞同：2
> 
> 时间：2012-08-26T11:03:39.730
> 
> 标签：javascript, jquery, google-maps

我正在使用代码进行测试：

```
<script type="text/javascript">
// When map page opens get location and display map
$('#map').live("pageinit", function() {

$('#map_canvas').gmap().bind('init', function(evt, map) {
$.getJSON( 'http://jquery-ui-map.googlecode.com/svn/trunk/demos/json/demo.json', 'category=activity', function(data) {

$.each( data.markers, function(i, m) {
$('#map_canvas').gmap('addMarker',
{ 'position': new google.maps.LatLng(m.lat, m.lng), 'bounds':true } );
});
});
});
$('#map_canvas').gmap('refresh');

});
</script> 
```

出于某种原因，它不显示任何标记，有时地图也是空白的。

任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T11:20:33.570

[http://jquery-ui-map.googlecode.com/svn/trunk/demos/json/demo.json](http://jquery-ui-map.googlecode.com/svn/trunk/demos/json/demo.json)不返回 jsonp，因此由于相同的来源策略，除非您的文档，否则您将无法获得响应放在[http://jquery-ui-map.googlecode.com](http://jquery-ui-map.googlecode.com)

# php - Word anagrammer 与 sql 的 %

> ID：12129567
> 
> 赞同：2
> 
> 时间：2012-08-26T11:04:26.283
> 
> 标签：php, mysql

我需要创建一个脚本来搜索带有“空格”的单词，这些单词在 sql 中基本上是 %。

`$numberofblanks = 1; //max 13`
`$searchedword = "WORD";`
`$searchedwordsorted = "DORW";`

给出的结果应该是：
WORDY WORLD CROWD SWORD WORDS DOWRY ROWED DROWN DOWER ROWDY

%word, w%ord, wo%rd, wor%d, word% 可以，但是如果更复杂的查询有 2 个或更多空格呢？
还想知道 $searchedwordsorted 是否有帮助或者它并不重要，这只是浪费我的桌子上的空间。

谢谢你们的帮助。
。麦克风

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T11:07:57.430

首先，我想纠正您问题中的一个错误。在您的查询中，您的意思`_`不是 `%`。`%`表示任意数量的字符（零个或多个）。用来`_`表示一个字符。

现在开始解决方案......您实际上并不需要存储在数据库中的排序单词。你可以这样做：

```
SELECT word
FROM dictionary
WHERE CHAR_LENGTH(word) = 6
AND word LIKE '%W%'
AND word LIKE '%O%'
AND word LIKE '%R%'
AND word LIKE '%D%' 
```

如果您的输入中有重复的字母，需要正确处理以确保所有结果都包含所有重复的字母。例如，如果输入是`FOO__`您需要检查每个单词是否都匹配`%F%`和`%O%O%`。

```
SELECT word
FROM dictionary
WHERE CHAR_LENGTH(word) = 5
AND word LIKE '%F%'
AND word LIKE '%O%O%' 
```

请注意，这种方法需要对表进行全面扫描，因此效率不会特别高。您可以通过将每个单词的长度存储在单独的列中并索引该列来稍微改进一下。

* * *

如果你有，`sortedword`那么你可以通过省略`%`重复字母之间来提高性能，因为你知道它们将连续出现在`sortedword`. 这可以提高性能，因为它减少了失败匹配所需的回溯量。

```
SELECT word
FROM dictionary
WHERE CHAR_LENGTH(word) = 5
AND sortedword LIKE '%F%'
AND sortedword LIKE '%OO%' 
```

* * *

需要存在的另一种方法`sortedword`如下：

```
SELECT word
FROM dictionary
WHERE CHAR_LENGTH(word) = 5
AND sortedword LIKE '%D%O%R%W%' 
```

同样，这需要对表进行全面扫描。同样，如果您有重复的字母，则不需要`%`它们之间的字母。

```
SELECT word
FROM dictionary
WHERE CHAR_LENGTH(word) = 5
AND sortedword LIKE '%F%OO%' 
```

# doctrine-orm - Doctrine2 区分大小写的查询

> ID：12129571
> 
> 赞同：5
> 
> 时间：2012-08-26T11:05:09.803
> 
> 标签：doctrine-orm, case-sensitive

出于某种原因，我需要在 MySql + 学说 2 中查询“区分大小写”。这可能吗？

两者都不

```
$em->find('UserEn', 'Bob') 
```

也不

```
$q = $this->em->createQuery('select u from UserEn u where u.name = :name');
$q->setParameter('name', 'Bob');
$result = $q->getResult(); 
```

正在工作中。任何想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-26T13:06:50.177

也许您正在使用以“_ci”结尾的 MySQL 排序规则，例如“utf8_general_ci”。“ci”代表“不区分大小写”。如果是这种情况，则不是 Doctrine 问题，而是 MySQL 问题。

请参阅[http://dev.mysql.com/doc/refman/5.0/en/case-sensitive.html](http://dev.mysql.com/doc/refman/5.0/en/case-sensitivity.html)

“默认字符集和排序规则是 latin1 和 latin1_swedish_ci，因此默认情况下非二进制字符串比较不区分大小写。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-11T16:59:33.280

对于那些无法更改其数据库排序规则的人，您可以使用`BINARY`运算符来强制条件区分大小写。

> BINARY 运算符将其后面的字符串转换为二进制字符串。这是一种强制比较逐字节而不是逐字符进行比较的简单方法。BINARY 还会导致尾随空格很重要。

有关更多详细信息，请参阅[MySQL BINARY 运算符](http://dev.mysql.com/doc/refman/5.7/en/charset-binary-op.html)。

要`BINARY`在 Doctrine DQLs 中启用操作符，您可以安装[Doctrine Extensions 库](https://github.com/Atlantic18/DoctrineExtensions)。或者像这样创建自己的二进制字符串函数。

```
use Doctrine\ORM\Query\AST\Functions\FunctionNode,
    Doctrine\ORM\Query\Lexer;

class Binary extends FunctionNode
{
    private $stringPrimary;

    public function parse(\Doctrine\ORM\Query\Parser $parser)
    {
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);

        $this->stringPrimary = $parser->StringPrimary();

        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }

    public function getSql(\Doctrine\ORM\Query\SqlWalker $sqlWalker)
    {
        return 'BINARY('.$sqlWalker->walkSimpleArithmeticExpression($this->stringPrimary).')';
    }
} 
```

接下来，您需要`binary`使用您的学说配置注册字符串函数。您可以在配置设置中执行此操作，也可以根据需要添加它。

```
$em->getConfiguration()->addCustomStringFunction('binary', 'DoctrineExtensions\\Query\\Mysql\\Binary'); 
```

然后您将能够`binary(...)`像这样在您的 DQL 中使用该函数。

```
$q = $em->createQuery('select u from UserEn u where binary(u.name) = :name');
echo $q->getSQL();
/* SELECT ... FROM ... WHERE BINARY(u0_.name) = ? */ 
```

要`binary`使用 Symfony 框架添加字符串函数，请在`config.yml`文件中更改`doctrine.orm.entity_managers.%entity_manager%.dql`设置，如下所示。

```
doctrine:
    orm:
      #...
      entity_managers:
          #...
          default:
              #...
              dql:
                  #...
                  string_functions:
                      #...
                      binary: 'DoctrineExtensions\Query\Mysql\Binary' 
```

有关详细信息，请参阅[Symfony Doctrine 配置文档](http://symfony.com/doc/current/reference/configuration/doctrine.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T06:29:23.963

这不是教义问题，您必须将表排序规则更改为二进制，然后区分大小写即可。
更改表并将此
**CHARSET=utf8 COLLATE=utf8_general_ci**
更改为此
**CHARSET=utf8 COLLATE=utf8_bin**

# java - Java 1.6 在 1.7 正常时读取文件时出现运行时错误

> ID：12129574
> 
> 赞同：0
> 
> 时间：2012-08-26T11:05:51.157
> 
> 标签：java, java-6

我一直在使用 JDK v1.7 在我自己的 PC 上进行作业，我必须在我的 uni 的 Unix 计算机上使用 java 1.6 版提交我的作业。

我的所有代码在我的机器上都可以正常执行，当我通过 SSH 连接到我的 uni 计算机并传输我的代码时，它也可以正常编译。但是，当我去运行它时，我收到一个

```
NoSuchElementException: No line found 
```

我需要读取的 .xml 文件中包含大约 1000-1200 个字符（该文件比这长得多）。

冒犯的方法是

```
private CDAlbum CDread(Scanner inLine) {
    String tempTitle = "Unknown CD";
    String tempGenre = "Unknown Genre";
    String tempArtist = "Unknown Artist";
    ArrayList<String> tempTracks = new ArrayList<String>();

    do {
        lineBuffer = inLine.nextLine();
        if (lineBuffer.equals("<Title>")) {
            tempTitle = inLine.nextLine();
            System.out.println("reading in a CD, just read title: " + tempTitle);
        } else if (lineBuffer.equals("<Genre>")) {
            tempGenre = inLine.nextLine();
        } else if (lineBuffer.equals("<Artist>")) {
            tempArtist = inLine.nextLine();
            //System.out.println("Which has artist: " + tempArtist);
        } else if (lineBuffer.equals("<Tracks>")) {
            //populate tracks array
            lineBuffer = inLine.nextLine();
            while (!(lineBuffer.equals("</Tracks>"))) {
                tempTracks.add(lineBuffer);
                //System.out.println("Read track: " + lineBuffer);
                lineBuffer = inLine.nextLine();
            }
        }
    } while (!(lineBuffer.equals("</CD>")));
    System.out.println(tempTracks);
    CDAlbum tempdisc = new CDAlbum(tempTitle, tempGenre, tempArtist, tempTracks);
    return tempdisc;
} 
```

错误发生在

```
lineBuffer = inLine.nextLine(); 
```

我在这里有点超出我的调试深度，欢迎任何关于可能导致这种情况的建议。

控制台输出截图：http: [//puu.sh/YXKN](http://puu.sh/YXKN)

整个源代码（以防万一，因为它很容易使用 dropbox）：[https ://www.dropbox.com/sh/zz8vdzqgw296s3d/v_cfW5svHG](https://www.dropbox.com/sh/zz8vdzqgw296s3d/v_cfW5svHG)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T12:14:40.740

不再需要答案 - 原来我错了，并且作业正在运行 java 1.7 的 Windows 7 机器上标记。

# algorithm - 网络摄像头图像实时处理

> ID：12129578
> 
> 赞同：0
> 
> 时间：2012-08-26T11:06:01.403
> 
> 标签：algorithm, webcam

需要对网络摄像头图像进行处理 - 应实时捕获、处理和显示图像。你能推荐编程语言吗？已经使用 Delphi tsCap32 和 java，但它运行缓慢。有其他语言的解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:08:05.280

尝试使用 C/C++ 和[OpenCV](http://opencv.willowgarage.com/wiki/)。它速度很快，并且拥有庞大的社区。一个好的起点是阅读这本书：[“Learning OpenCV”](http://shop.oreilly.com/product/0636920022497.do)

# php - 如何在 Opencart 中添加本地化菜单

> ID：12129579
> 
> 赞同：0
> 
> 时间：2012-08-26T11:06:12.980
> 
> 标签：php, opencart

我使用的是 1.5.3.1 版本的 Opencart。我在为商店编辑 GeoZone 时遇到问题。在管理面板中没有本地化菜单。结果，我无法自定义 GeoZone。

如何在菜单栏上添加本地化菜单，以便我可以配置我的 GeoZone？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T12:35:07.727

我不确定，但它对您阅读它很有帮助。

**本地化 OpenCart 的语言、货币**

看到这个网址： -

[http://ecommercedeveloper.com/articles/3107-localizing-opencart-for-language-currency/](http://ecommercedeveloper.com/articles/3107-localizing-opencart-for-language-currency/)

OpenCart 1.5 具有支持多种语言、货币和其他本地化功能的能力。但是，标准安装只包括一种语言：英语。此外，OpenCart 的开发者 Daniel Kerr 的英国血统贯穿始终。例如，后端的一个菜单被标记为“本地化”，而不是美国化的“本地化”拼写。在线查询使用“查询”一词。默认情况下，日期以日/月/年格式显示，而美国人更习惯于月/日/年格式。

**或者**

**打开购物车。如何添加新语言**

见下面的网址： -

[http://www.templatemonster.com/help/opencart-how-to-add-a-new-language.html](http://www.templatemonster.com/help/opencart-how-to-add-a-new-language.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:50:12.323

如果您成功安装了 opencart，您可能会看到 System 下的 Localization 菜单。我使用的是最新版本 1.5.4.1。也许您可以尝试新版本或尝试卸载您的版本，然后重新安装。

# scheme - 如何在 MIT Scheme 中获取我的函数定义？

> ID：12129581
> 
> 赞同：6
> 
> 时间：2012-08-26T11:06:13.963
> 
> 标签：scheme, mit-scheme

在 JavaScript 中，我可以检索函数的“源代码”定义，例如：

```
​function alert_Hi() {
    alert("Hi");
}

alert(alert_Hi); 
```

将完全返回我输入的内容。[http://jsfiddle.net/DuCqJ/](http://jsfiddle.net/DuCqJ/)

我怎样才能在 MIT 计划中做到这一点？

我记得看到一些返回`#compound-procedure`的东西，但我真正想要的是“源代码”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T17:26:06.827

你可以试试pp

```
(define (display-hi) (display "Hi"))
(pp display-hi) =>
(named-lambda (display-hi)
  (display "Hi")) 
```

[MIT-Scheme 调试辅助工具](https://www.gnu.org/software/mit-scheme/documentation/mit-scheme-user/Debugging-Aids.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T15:18:57.443

JavaScript 是完全解释的，所以即使在你定义了它们之后，它也有完整的函数定义。Scheme实际上并没有被完全解释；它将函数（以及我认为的其他一些结构）编译为不可读的表示形式并丢弃初始代码。

您可能会使用一些宏技巧在运行时存储函数的初始文本表示，但我倾向于相信这会比它的价值更麻烦。

如果您不介意我问，为什么在运行时需要定义函数的文本表示？

# mongodb - 在 MongoDb 中使用副本集的三个节点和 2 个已关闭

> ID：12129583
> 
> 赞同：6
> 
> 时间：2012-08-26T11:06:28.170
> 
> 标签：mongodb, replication

在一个 3 节点副本集中，为什么当 2 关闭时，第三个变成 SECONDARY 而不是 PRIMARY？

我想在数据中心内有 2 个 mongod，在外部有一个，所以如果数据中心出现故障，我希望第三个外部 mongod 成为主节点。

没有和仲裁者是可能的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-26T11:11:50.787

好的，找到回复：

[http://tebros.com/2010/11/mongodb-arbiters-with-only-two-replicas/](http://tebros.com/2010/11/mongodb-arbiters-with-only-two-replicas/)

> 发生了什么事？！事实证明，当一个 mongod 实例被隔离时，它不能投票给自己作为主实例。当你考虑它时，这是有道理的。如果网络链接断开并将您的两个副本分开，您不希望它们都将自己选为主要副本。所以在我的例子中，当 rep1-1 注意到它与副本集的其余部分隔离时，它使自己成为辅助并停止接受写入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T19:01:22.127

总是以 (cluster_participants/2) + 1 个节点关闭（假设您有奇数个参与者），集群进入只读模式。候选节点需要所有节点中的大多数被选为主节点。

例如，如果您有 5 个节点集群和 3 个节点被吹走，其他节点将保持为次要，因为它们都无法获得 3 票。

更多信息：[http ://docs.mongodb.org/manual/core/replication-internals/#replica-set-election-internals](http://docs.mongodb.org/manual/core/replication-internals/#replica-set-election-internals)

# mysql - 加入多行

> ID：12129589
> 
> 赞同：0
> 
> 时间：2012-08-26T11:07:13.477
> 
> 标签：mysql, sql, join

我正在尝试根据它们在另一个表中是否有多行来从帖子表中加载行。采用下表结构：

**帖子**

```
post_id  post_title
-------------------
1        My Post
2        Another Post 
```

**post_tags**

```
post_tag_id  post_tag_name
--------------------------
1            My Tag
2            Another Tag 
```

**postTags**

```
postTag_id  postTag_tag_id  postTag_post_id
------------------------------------------
1           1               1
2           2               1 
```

不出所料， post 和 post_tags 存储了帖子和标签，而 postTags 则加入了哪些帖子有哪些标签。

我通常会做的加入表格是这样的：

```
SELECT * FROM (`posts`)
JOIN `postTags` ON (`postTag_post_id` = `post_id`)
JOIN `post_tags` ON (`post_tag_id` = `postTag_tag_id`) 
```

然后我会有关于标签的信息，并且可以在查询的后面有额外的东西来搜索搜索词等的标签名称，然后在我有与搜索词匹配的帖子后进行 GROUP。

我想要做的只是从帖子中选择标签 1 和标签 2 的帖子，我无法为它计算出 SQL。我认为它需要在实际的 JOIN 中完成，而不是有一个 WHERE 子句，因为当我运行上面的连接时，我显然会得到两行，所以我不能有类似的东西

```
WHERE post_tag_id = 1 AND post_tag_id = 2 
```

因为每一行只有一个 post_tag_id，我无法检查一行中同一列的不同值。

我试图做的是这样的：

```
SELECT * FROM (`posts`)
JOIN `postTags` ON (postTag_tag_id = 1 AND postTag_tag_id = 2)
JOIN `post_tags` ON (`post_tag_id` = `postTag_tag_id`) 
```

但是当我运行它时返回 0 个结果；我之前在 JOINS 中为类似的事情设置了这样的条件，我确信它已经接近了，但如果这不起作用，我就无法确定该怎么做。

我至少在正确的轨道上吗？希望我没有遗漏一些明显的东西。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T11:22:14.280

您正试图要求 postTags 行同时是一件事和另一件事。

您要么需要对 post_tags 和 postTags 进行两次连接，以便同时获得两者。或者您可以说帖子可以有这两者之间的任何标签，并且标签的总数必须等于两个（假设帖子不能多次与同一个标签相关）。

第一种方法：

```
SELECT *
FROM `posts` as p
WHERE p.`post_id` IN (SELECT pt.`postTag_post_id`
                      FROM `postTags` as pt
                      WHERE pt.`postTag_tag_id` = 1)
AND p.`post_id` IN (SELECT pt.`postTag_post_id`
                    FROM `postTags` as pt
                    WHERE pt.`postTag_tag_id` = 2); 
```

第二种方法：

```
SELECT *
FROM posts as p
WHERE p.post_id IN (SELECT pt.postTag_post_id
                    FROM (SELECT count(0) as c, pt.postTag_post_id
                          FROM postTags as pt
                          WHERE pt.postTag_tag_id IN (1, 2)
                          GROUP BY pt.postTag_post_id
                          HAVING c = 2) as pt); 
```

我还想补充一点，如果您在第一种方法中使用 IN 或 EXISTS，那么您将不会因为您有多个标签而在同一个帖子行中有多行。这样，您稍后会保存一个 DISTINCT，这会使您的查询变慢。我在第二种方法中使用了 IN，就像我使用的经验法则一样：如果您不需要显示数据，则不需要在 FROM 部分中执行 JOIN。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T11:14:41.543

```
SELECT p.*, t1.*, t2.* FROM posts p
INNER JOIN postTags pt1 ON pt1.postTag_post_id = p.id AND pt1.postTag_tag_id = 1
INNER JOIN postTags pt2 ON pt2.postTag_post_id = p.id AND pt2.postTag_tag_id = 2
INNER JOIN post_tags t1 ON t1.post_tag_id = pt1.postTag_tag_id
INNER JOIN post_tags t2 ON t2.post_tag_id = pt2.postTag_tag_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T12:15:46.807

假设您已经知道标签 ID (`1`和`2`)，您可以执行以下操作：

```
SELECT post_id, post_title
FROM posts JOIN postTags ON (postTag_post_id = post_id)
WHERE postTag_tag_id IN (1, 2)
GROUP BY post_id, post_title
HAVING COUNT(DISTINCT postTag_tag_id) = 2 
```

*注意：如果有备用键，则不需要 DISTINCT `postTags {postTag_tag_id, postTag_post_id}`，因为它应该是。*

*注意：如果您没有标签 ID（只有标签名称），则需要另一个 JOIN（朝向`post_tags`表格）。*

* * *

顺便说一句，您应该认真考虑放弃连接表 ( ) 中的代理 PK`postTags.postTag_id`并只使用自然 PK `{postTag_tag_id, postTag_post_id}`。[InnoDB 表是聚集](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)的，聚集表中的二级索引比基于堆的表更胖更慢。此外，某些查询可以受益于将由相同标签标记的帖子物理上靠得很近（或将同一帖子的标签靠得很近，如果您反转 PK）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T11:27:02.907

如果没有实际构建与您相同的数据库，这很难验证，但它*应该可以*工作。

首先让我说，这种类型的查询在支持分析查询的数据库（Oracle、MS SQL Server）中更容易且性能更高。因此，在 MySQL 中，您必须采用旧的、糟糕的、聚合的方式。

我还想说，拥有一个将标签名称存储在 post_tags 中的表，然后将 post 标签映射到 postTags 中的帖子是令人困惑的。如果是我，我会把映射表的名字改成 post_tags_map 或者 post_tags_to_post_map。因此，您将拥有带有 post_id 的帖子、带有 post_tags_id 的 post_tags 和带有 post_tags_map_id 的 post_tags_map。并且这些 id 列将在每个表中命名相同。在其他表中具有不同名称的相同列也令人困惑。

无论如何，让我们解决您的问题。首先，您需要一个结果集，每行 1 个帖子 ID，并且只有具有标签 1 和 2 的帖子。

```
select postTag_post_id, count(1) cnt from (
  select postTag_post_id from postTags where postTag_tag_id in (1, 2)
) group by postTag_post_id;` 
```

这应该会给你这样的数据：

```
postTag_post_id | cnt
              1 |   2 
```

然后，您可以将该结果集加入您的帖子表。

```
select * from posts p,
(
  select postTag_post_id, count(1) cnt from (
    select postTag_post_id from postTags where postTag_tag_id in (1, 2)
  ) group by postTag_post_id;
) t
where p.post_id = t.postTag_post_id
and t.cnt >= 2; 
```

如果您需要对 post_tags 表进行另一次联接以从 post_tag_name 获取 postTag_tag_id，那么您最内部的查询将如下更改：

```
select postTag_post_id
from postTags a,
post_tags b
where a.postTag_tag_id = b.post_tag_id
and b.post_tag_name in ('tag 1', 'tag 2'); 
```

这应该够了吧。

# c# - 使用 UIAutomation 获取 Datagrid 的全部内容

> ID：12129592
> 
> 赞同：3
> 
> 时间：2012-08-26T11:07:34.157
> 
> 标签：c#, .net, ui-automation

我需要使用 UIAutomation 从外部应用程序检索 Datagrid 中的所有项目。目前，我只能检索（并在 UISpy 中查看）可见项目。有没有办法缓存 Datagrid 中的所有项目然后拉取它们？这是代码：

```
static public ObservableCollection<Login> GetLogins()
    {

        ObservableCollection<Login> returnLogins = new ObservableCollection<Login>();

        var id = System.Diagnostics.Process.GetProcessesByName("<Name here>")[0].Id;
        var desktop = AutomationElement.RootElement;

        var bw = AutomationElement.RootElement.FindFirst(TreeScope.Children, new PropertyCondition(AutomationElement.ProcessIdProperty, id));

        var datagrid = bw.FindFirst(TreeScope.Children, new PropertyCondition(AutomationElement.AutomationIdProperty, "lv"));

        var loginLines = datagrid.FindAll(TreeScope.Children, new PropertyCondition(AutomationElement.ControlTypeProperty, ControlType.DataItem));

        foreach (AutomationElement loginLine in loginLines)
        {
            var loginInstance = new Login { IP = new IP() };

            var loginLinesDetails = loginLine.FindAll(TreeScope.Children, new PropertyCondition(AutomationElement.ControlTypeProperty, ControlType.Custom));

            for (var i = 0; i < loginLinesDetails.Count; i++)
            {
                var cacheRequest = new CacheRequest 
                { 
                    AutomationElementMode = AutomationElementMode.None,
                    TreeFilter = Automation.RawViewCondition
                };

                cacheRequest.Add(AutomationElement.NameProperty);
                cacheRequest.Add(AutomationElement.AutomationIdProperty);

                cacheRequest.Push();

                var targetText = loginLinesDetails[i].FindFirst(TreeScope.Children, new PropertyCondition(AutomationElement.ClassNameProperty, "TextBlock"));

                cacheRequest.Pop();

                var myString = targetText.Cached.Name;

                #region Determine data and write to return object
                //Removed private information
                #endregion
                }

            }

            returnLogins.Add(loginInstance);
        }

        return returnLogins;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T23:58:04.643

您只能检索可见单元格，因为您启用了表虚拟化。

尝试禁用虚拟化（并非总是在所有应用程序中都可以，但也许您想将其移入配置并在测试之前对其进行更改）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:40:08.047

我 99% 确定这是不可能的。UI 自动化不知道由网格的当前可见部分表示的数据结构。它只看到可见的东西。我认为您将不得不翻阅网格以获取所有数据（这就是我所做的）。

# java - Java Permutation程序说明

> ID：12129599
> 
> 赞同：0
> 
> 时间：2012-08-26T11:08:07.147
> 
> 标签：java, permutation

这个问题对某些人来说可能看起来很基本，但我一直在分析和剖析这段代码，但没有成功，因为 Robert Sedgewick 的这个[排列](http://introcs.cs.princeton.edu/java/23recursion/Permutations.java.html)程序如何在 perm1 和 perm2 方法中不使用 system.out.print 打印单词或字符的组合。非常感谢对假人的任何帮助或解释。先感谢您。

这是链接下的代码：

```
public class Permutations {
  // print N! permutation of the characters of the string s (in order)
  public  static void perm1(String s) { perm1("", s); }
  private static void perm1(String prefix, String s) {
      int N = s.length();
      if (N == 0) System.out.println(prefix);
      else {
          for (int i = 0; i < N; i++)
             perm1(prefix + s.charAt(i), s.substring(0, i) + s.substring(i+1, N));
      }
  }
  // print N! permutation of the elements of array a (not in order)
  public static void perm2(String s) {
     int N = s.length();
     char[] a = new char[N];
     for (int i = 0; i < N; i++)
         a[i] = s.charAt(i);
     perm2(a, N);
  }

  private static void perm2(char[] a, int n) {
      if (n == 1) {
          System.out.println(a);
          return;
      }
      for (int i = 0; i < n; i++) {
          swap(a, i, n-1);
          perm2(a, n-1);
          swap(a, i, n-1);
      }
  }  

  // swap the characters at indices i and j
  private static void swap(char[] a, int i, int j) {
      char c;
      c = a[i]; a[i] = a[j]; a[j] = c;
  }

  public static void main(String[] args) {
     int N = Integer.parseInt(args[0]);
     String alphabet = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
     String elements = alphabet.substring(0, N);
     perm1(elements);
     System.out.println();
     perm2(elements);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T11:11:10.193

它就在那里：

```
if (N == 0) System.out.println(prefix); 
```

`System.out.print`并且`System.out.println`基本相同，除了后者在文本后打印一个换行符。

# wpf - UserControl 内控件的 ValidationRules

> ID：12129600
> 
> 赞同：3
> 
> 时间：2012-08-26T11:08:30.080
> 
> 标签：wpf, user-controls, validationrules

编辑：在这里找到适合我的解决方案：http: [//social.msdn.microsoft.com/Forums/en/wpf/thread/c1fd21b2-424b-4536-be8c-335cee94596a](http://social.msdn.microsoft.com/Forums/en/wpf/thread/c1fd21b2-424b-4536-be8c-335cee94596a)

如下：

```
 private void TextBoxLoaded(object sender, RoutedEventArgs e)
    {
        Binding bd = new Binding(TextBoxText.ToString());
        bd.ValidationRules.Add(new DataErrorValidationRule());
        bd.UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged;
        TextBox tb = sender as TextBox;
        tb.SetBinding(TextBox.TextProperty, bd);
    } 
```

和

```
<UserControl x:Class="WpfApplication1.UserControl1"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:wa="clr-namespace:WpfApplication1"
         mc:Ignorable="d">
<DockPanel
    VerticalAlignment="Center">
    <Label
        VerticalAlignment="Center"
        Content="{Binding RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type wa:UserControl1}},Path=LabelContent}"/>
    <TextBox
        VerticalAlignment="Center"
        MinWidth="96"
        Loaded="TextBoxLoaded">
    </TextBox>
</DockPanel> 
```

和

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:wa="clr-namespace:WpfApplication1"
    Title="MainWindow">
<Window.Resources>
    <DataTemplate x:Key="personDisplay">
        <DockPanel>
            <wa:UserControl1 LabelContent="First name:" TextBoxText="fname"/>
            <wa:UserControl1 LabelContent="Last name:" TextBoxText="lname"/>
            <wa:UserControl1 LabelContent="Age:" TextBoxText="age"/>
        </DockPanel>
    </DataTemplate>
</Window.Resources>
<ContentControl
    VerticalAlignment="Center"
    Name="personCcl"
    ContentTemplate="{StaticResource personDisplay}"/> 
```

结尾

我有一个需要包含标签和文本框的用户控件，并且文本框上的条目需要有一个验证规则来检查输入的值是否有效。我有一个数据模板，它使用用户控件显示一个具有多个字段的类。该类实现 IDataErrorInfo。但是，我遇到的问题是文本框没有访问 IDataErrorInfo 类，此外，围绕无效控件的红色轮廓围绕整个用户控件，而不仅仅是用户控件内的文本框。

我在下面创建了一个更简单的示例来说明我正在尝试做的事情。

这是课程

```
public class Person : IDataErrorInfo
{
    public string fname { get; set; }
    public string lname { get; set; }
    public int age { get; set; }

    public Person(string f, string l, int a)
    {
        fname = f;
        lname = l;
        age = a;
    }
    public string Error
    {
        get
        {
            if (age < 18) return "Too young";
            else if (fname == null || fname.Length == 0) return "Needs first name";
            else if (lname == null || lname.Length == 0) return "Needs last name";
            return null;
        }
    }
    public string this[string name]
    {
        get
        {
            if (name == "age") { return age < 18 ? "Too young" : null; }
            else if (name == "fname") { return fname == null || fname.Length == 0 ? "Needs first name" : null ; }
            else if (name == "lname") { return lname == null || lname.Length == 0 ? "Needs last name" : null; }
            return null;
        }
    }
} 
```

这是用户控件：

```
public partial class UserControl1 : UserControl
{
    public UserControl1()
    {
        InitializeComponent();
    }
    static readonly public DependencyProperty LabelContentProperty = DependencyProperty.Register(
        "LabelContent",
        typeof(string),
        typeof(UserControl1),
        new FrameworkPropertyMetadata("")
    );
    public string LabelContent
    {
        get { return GetValue(LabelContentProperty) as string; }
        set { SetValue(LabelContentProperty, value); }
    }
    static readonly public DependencyProperty TextBoxTextProperty = DependencyProperty.Register(
        "TextBoxText",
        typeof(object),
        typeof(UserControl1),
        new FrameworkPropertyMetadata(null, new PropertyChangedCallback(OnTextBoxTextChanged), new CoerceValueCallback(CoerceTextBoxText))
    );
    public object TextBoxText
    {
        get { return GetValue(TextBoxTextProperty); }
        set { SetValue(TextBoxTextProperty, value); }
    }
    static private void OnTextBoxTextChanged(DependencyObject dob, DependencyPropertyChangedEventArgs ea)
    {
        var uc = dob as UserControl1;
        uc.OnTextBoxTextChanged(new RoutedPropertyChangedEventArgs<object>(ea.OldValue, ea.NewValue, TextBoxTextChangedEvent));
    }
    static private object CoerceTextBoxText(DependencyObject dob, object o)
    {
        return o;
    }
    static readonly public RoutedEvent TextBoxTextChangedEvent = EventManager.RegisterRoutedEvent(
        "TextBoxTextChanged",
        RoutingStrategy.Bubble,
        typeof(RoutedPropertyChangedEventArgs<object>),
        typeof(UserControl1));
    public event RoutedPropertyChangedEventHandler<object> TextBoxTextChanged
    {
        add { AddHandler(TextBoxTextChangedEvent, value); }
        remove { RemoveHandler(TextBoxTextChangedEvent, value); }
    }
    protected virtual void OnTextBoxTextChanged(RoutedPropertyChangedEventArgs<object> ea) { RaiseEvent(ea); }
} 
```

这是用户控件 xaml：

```
<UserControl x:Class="WpfApplication1.UserControl1"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:wa="clr-namespace:WpfApplication1"
         mc:Ignorable="d">
<DockPanel>
    <Label
        VerticalAlignment="Center"
        Content="{Binding RelativeSource={RelativeSource FindAncestor,
            AncestorType={x:Type wa:UserControl1}},
        Path=LabelContent}"/>
    <TextBox
        VerticalAlignment="Center"
        MinWidth="96">
        <TextBox.Text>
            <Binding 
                    RelativeSource="{RelativeSource FindAncestor,
                        AncestorType={x:Type wa:UserControl1}}"
                    Path="TextBoxText"
                    Mode="TwoWay"
                    UpdateSourceTrigger="PropertyChanged">
                <Binding.ValidationRules>
                    <DataErrorValidationRule ValidatesOnTargetUpdated="True"/>
                </Binding.ValidationRules>
            </Binding>
        </TextBox.Text>
    </TextBox>
</DockPanel> 
```

这是窗口 xaml（更新）：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:wa="clr-namespace:WpfApplication1"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <DataTemplate x:Key="personDisplay">
        <DockPanel>
            <wa:UserControl1 LabelContent="First name:" TextBoxText="{Binding fname,Mode=TwoWay}"/>
            <wa:UserControl1 LabelContent="Last name:" TextBoxText="{Binding lname,Mode=TwoWay}"/>
            <wa:UserControl1 LabelContent="Age:" TextBoxText="{Binding age,Mode=TwoWay}"/>
        </DockPanel>
    </DataTemplate>
</Window.Resources>
<ContentControl
    VerticalAlignment="Center"
    Name="personCcl"
    ContentTemplate="{StaticResource personDisplay}"/>
</Window> 
```

这是窗口构造函数

```
 public MainWindow()
{
  InitializeComponent();
  personCcl.Content = new Person("John", "Smith", 33);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T23:35:28.790

那是错误的。不要让 personCc1.Content = new Person。使其成为 personCc1.DataContext = new Person。内容希望您只显示该类的值，并且主要用于 UI。

# java - Java实现Iterable，对于每个和方法

> ID：12129603
> 
> 赞同：2
> 
> 时间：2012-08-26T11:08:53.357
> 
> 标签：java, collections, foreach, iterator, iterable

我有这个练习和一个算法来实现。我有这个主要的：

```
 public static void main(String[] args) {
        Person a = new Person("Tony");
        Person c = new Person("Luke");
        Person o = new Person("Ann");

        a.addFriends(c);
        a.addFriends(o);

        for(Person p: a.contacts())
            System.out.println(p);
} 
```

如果我将“a.contacts()”替换为“a”并使用此类，则代码有效！但是如何使用“a.contacts()”实现 for-each 循环？谢谢

```
class Person implements Iterable<Person> {

    private Set<Person> friends = new HashSet<Person>();   
    private String name;

    public Person(String name){
        this.name = name;
    }

    public void addFriends(Person o){                
        friends.add(o);
   }

    public String toString(){
        return this.name;
    }

    @Override
    public Iterator<Person> iterator() {
        Iterator<Person> i = friends.iterator();
        return i;
    }

    //Here the contacts method to implement!!

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:13:53.017

让你的`contacts()`方法有一个返回类型`Set of Person`....

```
public Set<Person> contacts() {
    return friends;
} 
```

所以现在下面的工作......

```
for (Person p : a.contacts()) {
    System.out.println(p);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T11:29:10.657

由于您要运行循环，`Person`因此旁边的位置`:`应该是 type 的集合`Person`。

```
 for(Person p: a.contacts())
        System.out.println(p); 
```

您可以选择 a`List`或`Set`为此并从`contacts()`class 的方法返回集合`Person`。

在这种情况下，因为你有`Set`所以返回它。

```
public Set<Person> contacts() {
    return friends;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T11:30:25.837

使用 Collection<T> 执行此操作与使用 Iterable<T> 不同。Iterable<T> 的实现允许延迟加载，而基于 Collection<T> 的实现要求您在返回之前填充整个集合。处理您的要求的正确方法是在“Person”类中实现以下方法：

```
public Iterable<Person> contacts() {
  return new Iterable<Person>() {
    public Iterator<Person> iterator() {
      return friends.iterator();
    }
  };
} 
```

# php - PHP上传到特定文件夹

> ID：12129604
> 
> 赞同：0
> 
> 时间：2012-08-26T11:09:11.977
> 
> 标签：php, file-upload

我正在尝试进行 php 上传，该上传将上传到特定文件夹。可以在作为文件夹列表的下拉框旁边选择他们希望上传的文件。这是因为它组织文件。

```
<?php 
session_start();
if(!isset($_SESSION["USER"]["Admin"])){
    header("Location: index.html?unath");
}

$folder = mysql_real_escape_string($_POST['loc']);

$target_path = "../../shared/docs/$folder";

$upload2 = $target_path  .  basename( $_FILES['uploadedfile']['name']); 

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $upload2)) {
    echo "The file ".  basename( $_FILES['uploadedfile']['name']). 
    " has been uploaded";
} else{
    echo "There was an error uploading the file, please try again!";
}

?> 
```

目前，代码将文件上传到“docs”文件夹而不是 docs/文件夹。相反，它将文件夹名称放在文件前面。例如 - 如果文件夹名为“abc”而我的文件名为 robs.docx，它将上传到主 Docs 文件夹并命名为 abcrobs.docx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T11:12:46.833

你有一个缺少的斜线

替换这一行：

```
$upload2 = $target_path  .  basename( $_FILES['uploadedfile']['name']); 
```

和：

```
$upload2 = $target_path  ."/".  basename( $_FILES['uploadedfile']['name']); 
```

或者：

替换这一行：

```
$target_path = "../../shared/docs/$folder"; 
```

和：

```
$target_path = "../../shared/docs/".$folder."/"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T11:14:33.937

1.  您不需要`mysql_real_escape_string`，因为这里不涉及 SQL。
2.  如果没有建立数据库连接，则`mysql_real_escape_string`返回`null`。因此，您可能正在丢弃`$_POST['loc']`价值。
3.  你永远不应该使用用户提供的值来操作文件系统上的任何内容，而无需*真正*彻底地检查你将要操作的内容。请参阅[上传的安全威胁](https://stackoverflow.com/questions/11061355/security-threats-with-uploads/11061577#11061577)。
4.  随意使用`var_dump`以查看您的值在各个阶段的样子并进行一些调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T11:15:53.383

你*应该*正确地转义你的变量：

```
$target_path = "../../shared/docs/". $folder ."/"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T11:12:59.113

您在 $target_path 之后缺少一个斜杠

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-26T11:13:34.887

`/`在你的末尾添加一个`$target_path`：

```
$target_path = "../../shared/docs/$folder/"; 
```

# c# - 无法隐式转换 MyType 到我的类型

> ID：12129606
> 
> 赞同：6
> 
> 时间：2012-08-26T11:09:24.573
> 
> 标签：c#, covariance, implicit-conversion, contravariance

我不确定这是否是协方差和逆变问题，但我无法使其正常工作。这是代码：

```
public interface IDto { }

public class PaginatedDto<TDto> where TDto : IDto {

    public int PageIndex { get; set; }
    public int PageSize { get; set; }
    public int TotalCount { get; set; }
    public int TotalPageCount { get; set; }

    public bool HasNextPage { get; set; }
    public bool HasPreviousPage { get; set; }

    public IEnumerable<TDto> Dtos { get; set; }
}

public class PersonDto : IDto {

    public int Id { get; set; }
    public string Name { get; set; }
    public string Surname { get; set; }
    public int Age { get; set; }
}

class Program {

    static void Main(string[] args) {

        var people = new List<PersonDto> { 
            new PersonDto { },
            new PersonDto { },
            new PersonDto { },
        };

        var paginatedPersonDto = new PaginatedDto<PersonDto>() { 
            Dtos = people
        };

        //ProcessDto doesn't accept this
        ProcessDto(paginatedPersonDto);
    }

    private static void ProcessDto(PaginatedDto<IDto> paginatedDto) { 

        //Do work...
    }
} 
```

由于某种原因，我无法通过`PaginatedDto<PersonDto>`方法。知道如何解决这个问题吗？`PaginatedDto<IDto>``ProcessDto`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T11:16:17.490

是的，这是一个差异问题。您需要创建一个接口（只有接口和委托可以是协/逆变的）`IPaginatedDto<out TDto>`，其中`Dtos`不能有一个设置器（否则您不能使用`out`）：

```
public interface IPaginatedDto<out TDto> where TDto : IDto
{
    int PageIndex { get; set; }
    int PageSize { get; set; }
    int TotalCount { get; set; }
    int TotalPageCount { get; set; }
    bool HasNextPage { get; set; }
    bool HasPreviousPage { get; set; }
    IEnumerable<TDto> Dtos { get; }
} 
```

你`PaginatedDto<TDto>`将实现这个接口：

```
public class PaginatedDto<TDto> : IPaginatedDto<TDto> where TDto : IDto
{

    public int PageIndex { get; set; }
    public int PageSize { get; set; }
    public int TotalCount { get; set; }
    public int TotalPageCount { get; set; }

    public bool HasNextPage { get; set; }
    public bool HasPreviousPage { get; set; }

    public IEnumerable<TDto> Dtos { get; set; }
} 
```

并在您的方法中使用接口：

```
private static void ProcessDto(IPaginatedDto<IDto> paginatedDto)
{

    //Do work...
} 
```

# php - jQuery、JSON 和 PHP

> ID：12129607
> 
> 赞同：2
> 
> 时间：2012-08-26T11:09:28.150
> 
> 标签：php, jquery, json

我得到了一个带有多个回显函数的 php 文件。在客户端，`$.getJSON`如果只允许 echo 并且其他两个被注释掉，则处理 JSON 对象没有问题。但是，如果其他人没有注释而不是 JSON 中断，我仍然会在响应中回显所有对象。要处理 JSON，是否每个 php 函数都需要位于单独的文件中？或者 JSON 可以将不同的数组与一个响应字符串分开解析吗？IE

```
 $.getJSON(samefilename,function(array 1) {
        --- process here
   }
   $.getJSON(samefilename,function(array 2) {

   } 
```

对不起，如果这是一个完整的新手问题。我对解析响应字符串的过程有点困惑。我会认为它会被`$_get['array1']`php`$_get['array2']`回显 - 但是如果我在 php 文件中有多个回显，我的 jquery 会中断并在 html 中显示空白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T11:27:53.890

代替：

```
<?php
echo $var1;
echo $var2; 
```

这样做：

```
<?php
echo json_encode(Array(
  'var1' => $var1,
  'var2' => $var2
)); 
```

在 jQuery 中：

```
$.getJSON('file.php',function(response) {
   alert(response.var1);        
   alert(response.var2);
} 
```

# sql - 不存在行数据时返回零值

> ID：12129611
> 
> 赞同：1
> 
> 时间：2012-08-26T11:10:02.813
> 
> 标签：sql, oracle11g, toad

我的问题之前已得到解决，但我似乎无法对我的查询应用任何解决方案以使其正常工作。非常感谢一些指导。

我下面的当前查询返回这个数据集：

> ```
>  |  Age      |   Count   |
>      0-1 day      300
>      2-3 days     6000
>      3-4 days     100 
> ```

```
SELECT(CASE WHEN time_dtm > SYSDATE -1 THEN '0-1 day'
        WHEN time_dtm > SYSDATE -2 AND time_dtm < SYSDATE -1 THEN '1-2 days'
        WHEN time_dtm > SYSDATE -3 AND time_dtm < SYSDATE -2 THEN '2-3 days'
        WHEN time_dtm > SYSDATE -4 AND time_dtm < SYSDATE -3 THEN '3-4 days'
        WHEN time_dtm > SYSDATE -5 AND time_dtm < SYSDATE -4 THEN 'Closed'
        END) AS Age, 
    COUNT( * ) AS "Count" 
FROM table_1 
WHERE id IN (1,2,3)
GROUP BY (CASE WHEN time_dtm > SYSDATE -1 THEN '0-1 day'
        WHEN time_dtm > SYSDATE -2 AND time_dtm < SYSDATE -1 THEN '1-2 days'
        WHEN time_dtm > SYSDATE -3 AND time_dtm < SYSDATE -2 THEN '2-3 days'
        WHEN time_dtm > SYSDATE -4 AND time_dtm < SYSDATE -3 THEN '3-4 days'
        WHEN time_dtm > SYSDATE -5 AND time_dtm < SYSDATE -4 THEN 'Closed'
        END)
ORDER BY (CASE WHEN time_dtm > SYSDATE -1 THEN '0-1 day'
        WHEN time_dtm > SYSDATE -2 AND time_dtm < SYSDATE -1 THEN '1-2 days'
        WHEN time_dtm > SYSDATE -3 AND time_dtm < SYSDATE -2 THEN '2-3 days'
        WHEN time_dtm > SYSDATE -4 AND time_dtm < SYSDATE -3 THEN '3-4 days'
        WHEN time_dtm > SYSDATE -5 AND time_dtm < SYSDATE -4 THEN 'Closed'
        END) 
```

但是，我希望它将零/空行显示为零，如下所示：

> ```
>  |  Age      |   Count   |
>      0-1 day      300
>      1-2 days     0
>      2-3 days     6000
>      3-4 days     100
>      Closed       0 
> ```

我已经阅读了过去几天的各种回复：NVL、COALESCE、FULL/LEFT/RIGHT OUTER JOIN、LEFT/RIGHT JOINS、UNION ALL 等，其中没有一个有 CASE 语句并试图自己解决它但是！你必须知道什么时候停下来问路。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T11:17:55.803

首先，重新编写您的查询。`SELECT`使用视图或公用表表达式来避免您的, `GROUP BY`,`ORDER BY`子句重复三次。您的查询变为：

```
WITH data AS (
    SELECT(CASE WHEN time_dtm > SYSDATE -1 THEN '0-1 day'
                WHEN time_dtm > SYSDATE -2 AND 
                     time_dtm < SYSDATE -1 THEN '1-2 days'
                WHEN time_dtm > SYSDATE -3 AND 
                     time_dtm < SYSDATE -2 THEN '2-3 days'
                WHEN time_dtm > SYSDATE -4 AND 
                     time_dtm < SYSDATE -3 THEN '3-4 days'
                WHEN time_dtm > SYSDATE -5 AND 
                     time_dtm < SYSDATE -4 THEN 'Closed'
           END) AS Age 
    FROM table_1 
    WHERE id IN (1,2,3)
)
SELECT Age, COUNT(*)
FROM data
GROUP BY Age
ORDER BY Age 
```

然后，为了确保您想要的任何组都可以在结果中使用，您有很多选择。

### 你可以使用`UNION ALL`：

```
WITH data AS (
    SELECT(CASE WHEN time_dtm > SYSDATE -1 THEN '0-1 day'
                WHEN time_dtm > SYSDATE -2 AND 
                     time_dtm < SYSDATE -1 THEN '1-2 days'
                WHEN time_dtm > SYSDATE -3 AND 
                     time_dtm < SYSDATE -2 THEN '2-3 days'
                WHEN time_dtm > SYSDATE -4 AND 
                     time_dtm < SYSDATE -3 THEN '3-4 days'
                WHEN time_dtm > SYSDATE -5 AND 
                     time_dtm < SYSDATE -4 THEN 'Closed'
           END) AS Age 
    FROM table_1 
    WHERE id IN (1,2,3)

    -- The below will add one record for every desired Age group
    UNION ALL
    SELECT '0-1 day'  FROM DUAL UNION ALL
    SELECT '1-2 days' FROM DUAL UNION ALL
    SELECT '2-3 days' FROM DUAL UNION ALL
    SELECT '3-4 days' FROM DUAL UNION ALL
    SELECT 'Closed'   FROM DUAL
)
SELECT Age, COUNT(*) - 1 -- Subtract the extra record again
FROM data
GROUP BY Age
ORDER BY Age 
```

### 一个完全不同的解决方案将涉及`LEFT OUTER JOINs`：

```
-- Groups is a dynamic table that contains the date ranges and their "Age" label
WITH groups AS (
    SELECT SYSDATE -1 lower, SYSDATE upper, '0-1 day'  Age FROM DUAL UNION ALL
    SELECT SYSDATE -2      , SYSDATE -1   , '1-2 days'     FROM DUAL UNION ALL
    SELECT SYSDATE -3      , SYSDATE -2   , '2-3 days'     FROM DUAL UNION ALL
    SELECT SYSDATE -4      , SYSDATE -3   , '3-4 days'     FROM DUAL UNION ALL
    SELECT SYSDATE -5      , SYSDATE -4   , 'Closed'       FROM DUAL
)
SELECT g.Age, NVL(SUM(t.counter), 0)
FROM groups g

-- LEFT OUTER JOINing "table_1" to "groups" will ensure that every group
-- appears at least once in the result
LEFT OUTER JOIN (
  SELECT 1 counter, t.* FROM table_1 t WHERE t.id IN (1,2,3)
) t
ON  t.time_dtm >= g.lower
AND t.time_dtm <  g.upper
GROUP BY g.Age
ORDER BY g.Age 
```

在第二个示例中，您也可以不使用 CTE 并为`groups`表使用嵌套的 SELECT。如果您的需求发生变化，很容易看出第二个示例在未来如何更简单地发展。

# vim - vim 中的屏幕滚动

> ID：12129612
> 
> 赞同：9
> 
> 时间：2012-08-26T11:10:06.030
> 
> 标签：vim

是否可以通过屏幕行而不是文件行使 vim 滚动？

更准确地说：我编辑带有大段落的文本，并且我只在段落的末尾输入。因此，对于 vim，我的每一段都是单行，而且这些行很长。当 vim 移动很长的距离时，我会迷路。Vim 似乎只适合编辑程序？

我知道将 j 映射到 gj 等等（我已经完成了）。然而，仅仅映射这些是不够的，我还希望针对屏幕线更正滚动。

我已经进行了一些搜索，但是对于是否可以滚动屏幕行，我找不到明确的答案。

如果不可能，有人会知道一个可能是丑陋的黑客吗？在当前的设置中，vim 无法使用，这很可悲，因为我更喜欢它的其他功能，而不是周围的其他编辑器。（我不喜欢必须学习emacs的想法......）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T13:36:38.080

对不起，答案是：没有。

浏览这个 [有点] 最近的 nabble 线程，Bram Moolenaar 本人在其中描述了为什么尚未实施。（基本上，它有太多引入错误的可能性）

[http://vim.1045645.n5.nabble.com/Scrolling-screen-lines-I-knew-it-s-impossible-td3358342.html](http://vim.1045645.n5.nabble.com/Scrolling-screen-lines-I-knew-it-s-impossible-td3358342.html)

# javascript - 带有 JQuery 的 KineticJS 动画

> ID：12129614
> 
> 赞同：5
> 
> 时间：2012-08-26T11:10:36.683
> 
> 标签：javascript, jquery, jquery-animate, html5-canvas, kineticjs

我是 KineticJS 的新手，而且我很累。我想使用一个不透明的简单动画，但我发现并没有看起来那么“简单”。我阅读了有关[KineticJS 动画](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-animate-position-tutorial/)的文档（您不会对本教程说简单）。我想知道的是有没有一种简单的方法可以用 KineticJS 像 JQuery 或 JCanvaScript 那样制作动画？例如

```
this.animate({
   opacity:0,
   x: 50
}, 500); 
```

像这样的东西？

如果没有，我们可以使用带有 JQuery 的 KineticJS 来简化动画吗？我发现[这个](http://jsfiddle.net/T9RfA/2/) 项目有一段非常有趣的代码：

```
$(logo.getCanvas()).animate({
            opacity: 1,
            top: "+=50px"
        }, 1000); 
```

所以你们怎么看？使用这种方法有问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T13:03:47.480

如果您只需要制作不透明动画：您应该坚持使用 JQuery，它将隐藏为动画完成的计算（并且您所指的是一个很好的解决方案）。

如果您想对动画进行更多控制：使用 KineticJS。

通过，我认为尝试同时使用 JQuery 动画和 KineticJS 层而不是仅使用 KineticJS 会遇到更多问题（一旦您了解了如何使用 Kinetic.Animation 就非常简单）

编辑：动画快速操作方法：

因此，您可能已经看到，在 Kinetic 中，您不会像在 JQuery 中那样给出最终位置：您可以访问在动画的每一帧调用的函数，并且所有逻辑都必须放在其中：

```
<script>
// you should have an object yourShape containing your KineticJS object.

var duration = 1000 ; // we set it to last 1s 
var anim = new Kinetic.Animation({
    func: function(frame) {
        if (frame.time >= duration) {
            anim.stop() ;
        } else {
            yourShape.setOpacity(frame.time / duration) ;
        }
    },
    node: layer
});

anim.start();
</script> 
```

# c# - 如何在自定义控件中启用操作事件？

> ID：12129616
> 
> 赞同：1
> 
> 时间：2012-08-26T11:10:41.700
> 
> 标签：c#, windows-phone-7

我正在创建一个 Windows Phone 7.5 Silverlight 应用程序。我正在创建一个新的自定义控件：

```
public class ChartCanvas : Canvas 
```

当我在另一个页面上使用它时，它不会触发任何事件。这是我的 XAML：

```
<Controls:ChartCanvas x:Name="chartControl" 
                      Margin="8"
                      DoubleTap="chartControl_DoubleTap" 
                      ManipulationStarted="chartControl_ManipulationStarted" /> 
```

如何`DoubleTap`为此控件启用事件和操作事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T15:31:38.420

您可能希望将事件绑定到数据上下文的 ViewModel，因为这将具有一个通用控件，可以具有不同的事件处理实现。

除非您在代码后面的 ChartCanvas 中明确编码 DoubleTap/ManipulationStarted 的逻辑并且不希望它是通用的，例如用于处理数据/东西，那么这应该没问题

# recess - Recess 框架阻止我编辑任何文件

> ID：12129618
> 
> 赞同：1
> 
> 时间：2012-08-26T11:10:50.233
> 
> 标签：recess

我已经安装了[Recess](http://www.recessframework.org/page/installation)并创建了一个应用程序。但是我不能对应用程序创建的文件做任何事情，我不能编辑、删除、移动文件。当我尝试删除时，我得到一个 550 的 FTP 错误。服务器上的任何其他文件我可以以任何我喜欢的方式修改。

我发现用户已设置为`apache`我可以手动更改此设置，但为什么将其设置为所有者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:43:32.700

似乎您正在使用该用户运行 Apache，因此，当 www 应用程序创建某些内容时，它将使用“apache”用户创建它。发送更多详细信息。

# treeview - Treeview HierarchicalDataTemplate Howto - WCF Ria Services LoadOperation

> ID：12129624
> 
> 赞同：0
> 
> 时间：2012-08-26T11:12:39.117
> 
> 标签：treeview, silverlight-5.0, hierarchicaldatatemplate

Db 类属性

```
[Serializable]
[EnableClientAccess()]
public class DbPersonelJobDetail
{

    public DbPersonelJobDetail()
    {

    }
    [Key]
    public Guid PersonelID { get; set; }
    public Guid JobID { get; set; }
    public string JobName { get; set; }
    public string Adi { get; set; }
} 
```

域服务 Linq 查询

```
 public IQueryable<DTO.DbPersonelJobDetail> GetPersonelJobTreeList()
    {
        IQueryable<DTO.DbPersonelJobDetail> result = from p in ObjectContext.SPA_PersonelJobDetail
                                                     join c in ObjectContext.SPA_PersonelJob on p.PersonelJobID equals c.ID
                                                     select new DTO.DbPersonelJobDetail()
                                                     {
                                                         JobID=p.PersonelJobID,
                                                         JobName = c.JobName,
                                                         PersonelID=p.ID,
                                                         Adi=p.Adi
                                                     };
        return result.AsQueryable();
    } 
```

绑定树列表方法

```
 public void BindTreeList()
    {
        loadOP = context.Load(context.GetPersonelJobTreeListQuery(), false);
        loadOP.Completed += loadOP_Completed;
    }

    void loadOP_Completed(object sender, EventArgs e)
    {
        treeListPersonel.ItemsSource = loadOP.Entities;
    } 
```

我是绑定 BindTreeList() 方法的 Treeview。

下面，如图所示。HierarchicalDataTemplate Itemsource 绑定如何？

你能举个例子吗？

我不能 ：（

等待你的想法...

[绘图](http://img855.imageshack.us/img855/8888/ekranalntsxb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:54:50.533

加载第一个 lavel 节点。在 HierarchicalDataTemplate 中将 ItemsSource 绑定到 LoadChildsConverter

```
<riaControls:DomainDataSource x:Name="MyData" QueryName="GetFirstLavel" 
                                  AutoLoad="True" LoadSize="50">
            <riaControls:DomainDataSource.DomainContext>
                <web:AdvDomainContext />
            </riaControls:DomainDataSource.DomainContext>
        </riaControls:DomainDataSource>

<sdk:TreeView ItemsSource="{Binding}" DataContext="{Binding ElementName=MyData, Path=Data}">
    <sdk:TreeView.ItemTemplate>
        <sdk:HierarchicalDataTemplate 
        ItemsSource="{Binding Converter={StaticResource TreeViewCollectionConverter}}">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding CODE}" />
                <TextBlock Text="{Binding DESC}" />
            </StackPanel>
        </sdk:HierarchicalDataTemplate>
    </sdk:TreeView.ItemTemplate>
</sdk:TreeView> 
```

TreeViewCollectionConverter.cs

```
public class TreeViewR5OBJECTCollectionConverter : IValueConverter
{
   public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        ObservableCollection<Node> nodeList = new ObservableCollection<Node>();
        if (value != null)
        {
            AdvDomainContext ctx = new AdvDomainContext();
            Node parentNode = (Node)value;
            ctx.Load(ctx.GetChildsQuery(parentNode), iop =>
                            {
                                foreach (var o in iop.Entities)
                                    nodeList.Add(o);
                            }, null);
        }
        return nodeList;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return null;
    }
} 
```

在 AdvDomainService.cs 中必须有

```
public IQueryable<Node> GetFirstLavel() 
```

返回第一级节点和

```
 public IQueryable<Node> GetChilds(Node ParentNode) 
```

返回 ParentNode 的子节点

# android - 带有导航控制器应用程序的 Android 选项卡栏

> ID：12129626
> 
> 赞同：2
> 
> 时间：2012-08-26T11:12:42.480
> 
> 标签：android, mobile

我是`iOS`开发人员，当我想用​​ Navigator 应用程序制作标签栏时，`iOS`我可以使用。现在我要迁移到 Android，你能告诉我怎么做吗，我在哪里可以找到带有源代码的教程？谢谢你。`UITabbarcontroller``UINavigatorcontroller`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T00:38:48.480

我遇到了同样的问题，但是使用本教程它使一切变得更容易。这是用于屏幕底部的自定义标签栏控制器。由于 Android SDK 在顶部有，您可以使用此链接在底部创建自定义。

[http://kpbird.blogspot.com/2011/05/androidbottom-tabbar-control.html](http://kpbird.blogspot.com/2011/05/androidbottom-tabbar-control.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T05:55:30.737

[尝试使用 Fragments 为 Android 中的每个选项卡单独返回堆栈](https://stackoverflow.com/questions/6987334/separate-back-stack-for-each-tab-in-android-using-fragments/12928498#12928498)这个问题的答案

这是来自线程[https://github.com/iamjayanth/FragmentTabStudy的 github 链接](https://github.com/iamjayanth/FragmentTabStudy)

# django - 哪个库用于在 django 中实现 Oauth？

> ID：12129627
> 
> 赞同：2
> 
> 时间：2012-08-26T11:12:43.577
> 
> 标签：django

我正在使用 django-tasty-pie 开发 API，并且想知道要实现哪个库以使 OAuth 用于基于用户名/密码的工作。我想使用这个 API 从一个 Android 应用程序和一个可以进行用户注册的 chrome 应用程序进行调用。我知道 django-social-auth。但我在这里并不完全处理社交身份验证。只需基本的 OAuth 即可。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T11:19:52.953

要了解风景，请阅读此博客文章： http: [//pydanny.com/the-sorry-state-of-python-oauth-providers.html](http://pydanny.com/the-sorry-state-of-python-oauth-providers.html)（它还列出了所有替代方案）。

我看起来 Idan 的库是最新的：[https ://github.com/idan/oauthlib](https://github.com/idan/oauthlib)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-26T11:45:27.973

已接受答案中的帖子在文章的附录中说明了以下内容：

> 07/07/2013 - 请考虑将 [https://github.com/evonove/django-oauth-toolkit](https://github.com/evonove/django-oauth-toolkit)用作 Django 驱动的 OAuth 提供程序。它背后的团队做得对！

# java - 如何在java中的图像上呈现包装文本

> ID：12129633
> 
> 赞同：9
> 
> 时间：2012-08-26T11:13:25.303
> 
> 标签：java, text, graphics, rendering, awt

使用 Java，是否有任何内置方式来呈现文本，使其仅限于`graphics2D`对象上的矩形？

我知道我可以使用`Graphics2D.drawString`，但它只绘制一行文本。

我也知道我可以使用

```
FontMetrics fm= graphics.getFontMetrics(font);
Rectangle2D rect=fm.getStringBounds("Some Text",graphics); 
```

`Font font`当在某个`Graphics2D graphics`对象上使用 some 渲染时，获取有关字符串边界的信息。

所以我可以开始循环，打破我的字符串等等，以迫使它适合某个矩形。

但我宁愿不必写那些......

是否有任何现成的功能可以为我做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T06:10:58.240

我写了一个可以提供帮助的小函数。447 是可用的宽度，您可以从所需的宽度中获得用于呈现文本的宽度。

```
private void drawTextUgly(String text, FontMetrics textMetrics, Graphics2D g2)
{
    // Ugly code to wrap text
    int lineHeight = textMetrics.getHeight();
    String textToDraw = text;
    String[] arr = textToDraw.split(" ");
    int nIndex = 0;
    int startX = 319;
    int startY = 113;
    while ( nIndex < arr.length )
    {
        String line = arr[nIndex++];
        while ( ( nIndex < arr.length ) && (textMetrics.stringWidth(line + " " + arr[nIndex]) < 447) )
        {
            line = line + " " + arr[nIndex];
            nIndex++;
        }
        GraphicsUtility.drawString(g2, line, startX, startY);
        startY = startY + lineHeight;
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-26T11:28:38.493

这可能是您正在寻找的内容：

**StringUtils.java：**

```
import java.awt.FontMetrics;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Iterator;
import java.util.List;

/**
 * Globally available utility classes, mostly for string manipulation.
 * 
 * @author Jim Menard, <a href="mailto:jimm@io.com">jimm@io.com</a>
 */
public class StringUtils {
  /**
   * Returns an array of strings, one for each line in the string after it has
   * been wrapped to fit lines of <var>maxWidth</var>. Lines end with any of
   * cr, lf, or cr lf. A line ending at the end of the string will not output a
   * further, empty string.
   * <p>
   * This code assumes <var>str</var> is not <code>null</code>.
   * 
   * @param str
   *          the string to split
   * @param fm
   *          needed for string width calculations
   * @param maxWidth
   *          the max line width, in points
   * @return a non-empty list of strings
   */
  public static List wrap(String str, FontMetrics fm, int maxWidth) {
    List lines = splitIntoLines(str);
    if (lines.size() == 0)
      return lines;

    ArrayList strings = new ArrayList();
    for (Iterator iter = lines.iterator(); iter.hasNext();)
      wrapLineInto((String) iter.next(), strings, fm, maxWidth);
    return strings;
  }

  /**
   * Given a line of text and font metrics information, wrap the line and add
   * the new line(s) to <var>list</var>.
   * 
   * @param line
   *          a line of text
   * @param list
   *          an output list of strings
   * @param fm
   *          font metrics
   * @param maxWidth
   *          maximum width of the line(s)
   */
  public static void wrapLineInto(String line, List list, FontMetrics fm, int maxWidth) {
    int len = line.length();
    int width;
    while (len > 0 && (width = fm.stringWidth(line)) > maxWidth) {
      // Guess where to split the line. Look for the next space before
      // or after the guess.
      int guess = len * maxWidth / width;
      String before = line.substring(0, guess).trim();

      width = fm.stringWidth(before);
      int pos;
      if (width > maxWidth) // Too long
        pos = findBreakBefore(line, guess);
      else { // Too short or possibly just right
        pos = findBreakAfter(line, guess);
        if (pos != -1) { // Make sure this doesn't make us too long
          before = line.substring(0, pos).trim();
          if (fm.stringWidth(before) > maxWidth)
            pos = findBreakBefore(line, guess);
        }
      }
      if (pos == -1)
        pos = guess; // Split in the middle of the word

      list.add(line.substring(0, pos).trim());
      line = line.substring(pos).trim();
      len = line.length();
    }
    if (len > 0)
      list.add(line);
  }

  /**
   * Returns the index of the first whitespace character or '-' in <var>line</var>
   * that is at or before <var>start</var>. Returns -1 if no such character is
   * found.
   * 
   * @param line
   *          a string
   * @param start
   *          where to star looking
   */
  public static int findBreakBefore(String line, int start) {
    for (int i = start; i >= 0; --i) {
      char c = line.charAt(i);
      if (Character.isWhitespace(c) || c == '-')
        return i;
    }
    return -1;
  }

  /**
   * Returns the index of the first whitespace character or '-' in <var>line</var>
   * that is at or after <var>start</var>. Returns -1 if no such character is
   * found.
   * 
   * @param line
   *          a string
   * @param start
   *          where to star looking
   */
  public static int findBreakAfter(String line, int start) {
    int len = line.length();
    for (int i = start; i < len; ++i) {
      char c = line.charAt(i);
      if (Character.isWhitespace(c) || c == '-')
        return i;
    }
    return -1;
  }
  /**
   * Returns an array of strings, one for each line in the string. Lines end
   * with any of cr, lf, or cr lf. A line ending at the end of the string will
   * not output a further, empty string.
   * <p>
   * This code assumes <var>str</var> is not <code>null</code>.
   * 
   * @param str
   *          the string to split
   * @return a non-empty list of strings
   */
  public static List splitIntoLines(String str) {
    ArrayList strings = new ArrayList();

    int len = str.length();
    if (len == 0) {
      strings.add("");
      return strings;
    }

    int lineStart = 0;

    for (int i = 0; i < len; ++i) {
      char c = str.charAt(i);
      if (c == '\r') {
        int newlineLength = 1;
        if ((i + 1) < len && str.charAt(i + 1) == '\n')
          newlineLength = 2;
        strings.add(str.substring(lineStart, i));
        lineStart = i + newlineLength;
        if (newlineLength == 2) // skip \n next time through loop
          ++i;
      } else if (c == '\n') {
        strings.add(str.substring(lineStart, i));
        lineStart = i + 1;
      }
    }
    if (lineStart < len)
      strings.add(str.substring(lineStart));

    return strings;
  }

} 
```

你可以把它放在它自己的类中，然后简单地使用你所拥有的：

```
FontMetrics fm= graphics.getFontMetrics(font);
Rectangle2D rect=fm.getStringBounds("Some Text",graphics); 
```

调用 `wrap(String str, FontMetrics fm, int maxWidth)`将返回已根据您的相应包装`List`的s ，这将是文本的宽度将被放入：`String``maxWidth``Rectangle2D`

```
String text="Some Text";
FontMetrics fm= graphics.getFontMetrics(font);
Rectangle2D rect=fm.getStringBounds(text,graphics);
List<String> textList=StringUtils.wrap(text, fm, int maxWidth); 
```

**参考：**

*   [http://www.java2s.com/Code/Java/2D-Graphics-GUI/WrapstringaccordingtoFontMetrics.htm](http://www.java2s.com/Code/Java/2D-Graphics-GUI/WrapstringaccordingtoFontMetrics.htm)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-26T11:32:39.273

See the `LabelRenderTest` source in [this answer](https://stackoverflow.com/a/5853992/418556). It uses HTML/CSS, with the body width set using CSS, and thereby makes line wrap automatic.

![](../Images/b7c0f850e0b42d0b8cc83f84d5598571.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-02-04T07:31:52.193

使用临时 JTextArea 用大约 10 行代码进行完美的换行：

```
static void drawWrappedText(Graphics g, String text, int x, int y, int w, int h) {
    JTextArea ta = new JTextArea(text);
    ta.setLineWrap(true);
    ta.setWrapStyleWord(true);
    ta.setBounds(0, 0, w, h);
    ta.setForeground(g.getColor());
    ta.setFont(g.getFont());
    Graphics g2 = g.create(x, y, w, h); // Use new graphics to leave original graphics state unchanged
    ta.paint(g2);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-22T23:36:27.777

```
 private List<String> wrap(String txt, FontMetrics fm, int maxWidth){
    StringTokenizer st =  new  StringTokenizer(txt)  ;

    List<String> list = new ArrayList<String>();
    String line = "";
    String lineBeforeAppend = "";
    while (st.hasMoreTokens()){
       String seg = st.nextToken();
       lineBeforeAppend = line;
       line += seg + " ";
       int width = fm.stringWidth(line);
       if(width  < maxWidth){
           continue;
       }else { //new Line.
           list.add(lineBeforeAppend);
           line = seg + " ";
       }
    }
    //the remaining part.
    if(line.length() > 0){
        list.add(line);
    }
    return list;
} 
```

# c - C 头文件

> ID：12129634
> 
> 赞同：-1
> 
> 时间：2012-08-26T11:13:31.220
> 
> 标签：c, header-files, stdio

我试图编译一个 3 文件 C 程序，其中 1 个文件包含 tha main() ，一个包含与我创建的结构类型相关的标头，第三个包含与结构相关的函数。我在返回温度上遇到错误；在第三个文件中的一个函数上，我终于意识到我应该删除该文件中的标题以使函数正常工作，但我不知道为什么会这样！

有人可以解释一下为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T11:15:39.967

查看：

1.  您在头文件中放置了标头保护
2.  您的标头中没有函数或对象定义，而只有声明。

# c - 在 C 中优化“排序代码”

> ID：12129640
> 
> 赞同：0
> 
> 时间：2012-08-26T11:14:15.537
> 
> 标签：c, sorting

我正在编写要优化的代码。该代码全部是关于按 second 的升序对双精度数组进行排序。第一个输入是一个整数 N，第二个是一个大小为 N*2 的二维数组（称为 c），然后我们按 的升序对数组进行排序`c[.][1]`，当元素相等时，比如说 if `c[i][1]==c[j][1]`，对于两个整数`i`和`j`，我们通过对第一列的元素进行升序对这些元素进行排序，因此`c[i][1]`在`c[j][1]`if之下`c[i][1]<c[j][1]`。让我们举个例子：

```
input 
3
2 3
1 3
4 2

output 
4 2
1 3
2 3 
```

事实是代码需要在不到 0.5 秒的时间内运行，而我的确实太慢了。这里是

```
#include <stdio.h>
#include <stdlib.h>

//determining the index of the max elments in an array
int max(int i, int N, int **c)
{
    int j=0;
    int M=0;

    for(j=0;j<i;j++)
    {if(c[j][1]>c[M][1]){M=j;}else{}}
    return M;
}

int main ()
{
    //integers used for the loops
    int i;
    int j;

    //the size of the 2D array is N*2
    int N;
    scanf("%d",&N);
    int **c;
    int mx;
    int maxi;

    //this array is the output, thath is the 2D array sorted
    int e[N][2];

    //2D array we want to sort
    c = malloc(N*sizeof(int*));

    for (i=0;i<N;i++)
    {
        c[i] = malloc(2*sizeof(int));
        for (j=0;j<2;j++)
        {
            scanf("%d",&c[i][j]);
        }
    }

    //at the first step, we have initialized the value of the max
    maxi=max(N,N,c);

    for(i=0;i<N;i++)
    {
        //we sort the c[.][1], and we take the max (called 'mx') of the array. At each step of the loop, we throw away the max from the array c[.][1] (we mean the max found at the precedent step of the loop)

        mx=max(N-i,N,c);

        //Here, we look at the multiple occurence of the max, if there are, we sort the c[.][0] for which c[.][1]=c[mx][1] by ascending order
        if(maxi==mx){int k;
            for(k=0;k <N;k++){if(c[k][1]==c[mx][1]){if(c[k][0]>c[mx][0]){mx=k;}}else{}}
        }else{}

        //we keep the value of the max in order to verify that the same value of the max has another occurence in following steps
        maxi=mx;

        //e is the double array for the output
        e[i][0]=c[mx][0];
        e[i][1]=c[mx][1];
        int j;

        //here we throw away the max from the array
        for(j=mx;j< N-i-1;j++){c[j][1]=c[j+1][1];c[j][0]=c[j+1][0];}
    }

    for(i=0;i<N;i++)
    {printf("%d %d",e[N-1-i][0],e[N-1-i][1]);
        printf("\n");}

} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T11:31:25.353

您的代码的计算复杂度太高。此外，`int e[N][2]`仅适用于 GCC 扩展，因为`N`它是在运行时而不是编译时确定的变量。
一种简单的（就编码而言）改进它的方法是`qsort()`在 C 标准库中使用。

```
struct IntPair
{
    int n[2];
};

int compareIntPair(const void* lhs, const void* rhs)
{
    const struct IntPair *l = (const struct IntPair*)lhs;
    const struct IntPair *r = (const struct IntPair*)rhs;

    if(l->n[1] < r->n[1])
        return -1;
    if(l->n[1] > r->n[1])
        return 1;
    if(l->n[0] < r->n[0])
        return -1;
    if(l->n[0] > r->n[0])
        return 1;
    return 0;
}

int main(void)
{
    //integers used for the loops
    int i;
    //the size of the 2D array is N*2
    int N;
    struct IntPair* c;
    scanf("%d",&N);
    c = (struct IntPair*)calloc(N, sizeof(struct IntPair));

    for(i = 0; i < N; ++i)
    {
        scanf("%d%d", &c[i].n[0], &c[i].n[1]);
    }

    qsort(c, N, sizeof(struct IntPair), compareIntPair);

    for(i = 0; i < N; ++i)
        printf("%d %d\n", c[i].n[0], c[i].n[1]);

    free(c);
    return 0;
} 
```

**编辑**：回答评论中的问题“N-动态分配的每个元素是否可以指向大小为 2 的一维数组？”

```
int compareElem(const void* lhs, const void* rhs)
{
    const int *l = *(const int**)lhs;
    const int *r = *(const int**)rhs;

    if(l[1] < r[1])
        return -1;
    if(l[1] > r[1])
        return 1;
    if(l[0] < r[0])
        return -1;
    if(l[0] > r[0])
        return 1;
    return 0;
}

int main(void)
{
    //integers used for the loops
    int i;
    //the size of the 2D array is N*2
    int N;
    int ** c;
    scanf("%d",&N);
    c = (int**)calloc(N, sizeof(int*));

    for(i = 0; i < N; ++i)
    {
        c[i] = (int*)calloc(2, sizeof(int));
        scanf("%d%d", &c[i][0], &c[i][1]);
    }

    qsort(c, N, sizeof(int*), compareElem);

    for(i = 0; i < N; ++i)
    {
        printf("%d %d\n", c[i][0], c[i][1]);
        free(c[i]);
    }

    free(c);
    return 0;
} 
```

# android - 如何将桌面屏幕发送到 Android

> ID：12129641
> 
> 赞同：-1
> 
> 时间：2012-08-26T11:14:31.937
> 
> 标签：android

我正在尝试开发一个客户端是 Android 平板电脑的远程桌面应用程序。服务器是用 Java 编写的。我可以通过 Wi-Fi 使用鼠标和键盘，但现在尝试在平板电脑上查看我的桌面时遇到问题。这是我的服务器捕获的代码：

```
public void screenCap() {
    Rectangle captureSize = new Rectangle(lastXpos, lastYpos, 500, 500);
    img = robot.createScreenCapture(captureSize);
}

public BufferedImage getScreenCap() {
    return img;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:16:33.600

**Android VNC Viewer**是一个开源项目，您可以在[此处](http://code.google.com/p/android-vnc-viewer/source/browse/#svn/tags/v0_5_0/androidVNC/src/android/androidVNC)查看所有代码。

此外，请随意尝试那里列出的不同版本的项目。

# php - PHP mysql选择带有rand（）行

> ID：12129643
> 
> 赞同：0
> 
> 时间：2012-08-26T11:14:33.827
> 
> 标签：php, mysql, while-loop

我有这个小逻辑，我不知道如何解决它。

我的数据库中有这个，命名为`email_list`5 条记录

然后我有这`trackCode`15 条记录。

我的问题是我在做一些事情，比如当我点击它时，`email all`它会收到`email_list`有 5 条记录的电子邮件，然后 trackCode 会将它发送到这些电子邮件。

我有这个代码

```
$sql = mysql_query( "SELECT * FROM code WHERE track = '$_POST['track']' " ) or die ( mysql_error() );
$row = mysql_fetch_array( $sql );
$subject = 'You have received your code';
$message = '
Your code is '.$row['trackCode'].'

Please click here to activate your code - click here -

management
';

$header = "From: noreply@fastindexer.com \r\n";
$header .= 'Content-type: text/html' . "\r\n";

$sqlemail = mysql_query( "SELECT * FROM email_list ORDER BY rand() LIMIT 15" ) or die ( mysql_error() );
while ( $rowemail = mysql_fetch_array( $sqlemail ) ) {
  $to = $rowemail['emails'];
}
$send_contact = mail($to,$subject,$message,$header); 
```

你能告诉我我的代码有什么问题是我的while语句吗？

我试图解决的是，当它发送电子邮件时，它会发送到这 5 封不同的电子邮件`trackCodes`

我想我迷失了我的流程和逻辑。

多谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T11:20:18.963

尝试将其更改为：

```
$sqlemail = mysql_query("SELECT * FROM email_list ORDER BY rand() LIMIT 15") or die ( mysql_error());

while($rowemail = mysql_fetch_assoc($sqlemail))
{
    mail($rowemail['emails'], $subject, $message, $header);
} 
```

和这个：

```
$sql = mysql_query("SELECT * FROM code WHERE track = '$_POST['track']'") or die (mysql_error()); 
```

应该：

```
$sql = mysql_query("SELECT * FROM code WHERE track = '".mysql_real_escape_string($_POST['track'])."'") or die (mysql_error()); 
```

## 重要的：

> 但是，重要的是要指出不鼓励使用 [mysql](http://www.php.net/manual/en/intro.mysql.php)扩展。相反，应该使用[MySQLi](http://www.php.net/manual/en/book.mysqli.php)或 [PDO_MySQL扩展。](http://www.php.net/manual/en/ref.pdo-mysql.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T11:44:26.280

看起来您`$to`在每次迭代中都将变量设置为电子邮件 ID，但从不使用它，直到在 while 循环之后。这意味着仅邮寄结果中的最后一个电子邮件 ID。尝试将邮件移动到 while 循环中。

```
while ( $rowemail = mysql_fetch_array( $sqlemail ) ) {
    $to = $rowemail['emails'];
    $send_contact = mail($to,$subject,$message,$header);
} 
```

PS：使用更好的[mysql 扩展](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)（[PDO](http://www.php.net/manual/en/ref.pdo-mysql.php)或[Mysqli](http://www.php.net/manual/en/book.mysqli.php)），使用更好的转义，或准备好的语句进行数据插入。看起来您的代码仅用于学习目的，在这种情况下，请始终学习更好的东西。如果它用于生产，**它非常脆弱！**

# generics - 树结构中的 F# 泛型

> ID：12129646
> 
> 赞同：0
> 
> 时间：2012-08-26T11:14:58.617
> 
> 标签：generics, f#, tree

我有一个像这样的简单类型：

```
/// <summary>
/// An attribute consists of a key and all possible values.
/// </summary>
type IAttribute<'a when 'a: comparison> =
    abstract Key: string
    abstract Values: seq<'a> 
```

根据这个定义，我创建了这样的实现：

```
let numericAttribute values =
    { new IAttribute<float> with
        member this.Key = "Numeric"
        member this.Values = values }

let enumerationAttribute values =
    { new IAttribute<string> with
        member this.Key = "Enumeration"
        member this.Values = values } 
```

例子：

```
let numAttr = numericAttribute [| 1.0; 4.0; 6.0; 20.0; 70.0 |]
let enAttr = enumerationAttribute [| "val1"; "val2"; "val3" |] 
```

现在我可以创建实例：

```
let num1 = new AttributeInstance<float>(numAttr, 4.0)
let num2 = new AttributeInstance<float>(numAttr, 6.0)
let en1 = new AttributeInstance<string>(enAttr, "val1") 
```

AttributeInstance 是一种类型，它只是特定属性类型的元组和与该属性类型兼容的值。

我想要一个简单的树：

```
type Tree<'a when 'a: comparison> =
| Leaf of 'a
| SubTree of AttributeInstance<'a> * seq<Tree<'a>> 
```

我的问题是，在树的不同级别，我希望能够拥有不同的类型。在一个级别上，我希望拥有一个属性为 en1 的子树，而在下一个级别上，我希望能够拥有 num1（或 num2）。

有人可以帮我概括或重新考虑这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T11:27:17.587

问题是如果你尝试写类似的东西

```
|Subtree of 'a * seq<Tree<'b>> 
```

`'b`最终成为一种新类型，它可以创建类似编译器不支持的无限类型链。

做到这一点的一种方法是将可能的类型包装在一个 Union 中 - 类似于

```
type Element = 
    |.... 
```

然后你的树变成

```
type Tree =
| Leaf of Element
| SubTree of AttributeInstance<element> * seq<Tree> 
```

或者，你可以有一个多通用树 - 比如

```
type Tree<'a,'b,'c,'d> =
| Leaf1 of 'a
| Leaf2 of 'b
...
| SubTree of AttributeInstance<'a> * seq<Tree<'a,'b,'c,'d>> 
```

# mongodb - MongoDb仲裁器可以与多个replicaSets一起使用吗？

> ID：12129651
> 
> 赞同：10
> 
> 时间：2012-08-26T11:15:28.800
> 
> 标签：mongodb, replication, database-replication

如果我有针对不同国家/地区的不同网页，并且每个网页都有 2-3 个节点的 mongodb 副本集，我可以使用具有多个副本集的仲裁器，以便它全部投票吗？

或者我需要为每个副本集启动一个仲裁器？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-26T23:52:50.403

您可以在单个服务器（不同端口）上运行多个仲裁进程。他们在资源方面非常轻量级，因为他们所做的只是投票。您应该考虑使用以下参数启动仲裁程序，以使它们尽可能轻量级（来自[命令行参数页面](http://www.mongodb.org/display/DOCS/Command+Line+Parameters)）：

*   --smallfiles - 使用较小的初始文件大小 (16MB) 和最大大小 (512MB)
*   --nojournal - 禁用日志。在 v2.0+ 中，日志功能默认为 64 位

如果您不使用这些选项运行，那么仲裁器仍然可以工作，但会在它知道它是仲裁器之前预先分配数据文件。

**更新（2018 年 1 月）：**由于编写了此答案，因此官方指南已添加到仲裁器启动选项的文档中，包括新配置格式的选项。可以在[这里](https://docs.mongodb.com/manual/tutorial/add-replica-set-arbiter/#start-up-configuration)找到。

# c# - 第三方应用程序无法读取新创建的 .text 文件中的数据

> ID：12129653
> 
> 赞同：1
> 
> 时间：2012-08-26T11:15:30.063
> 
> 标签：c#, windows, c#-4.0

我开发了一个 Windows 应用程序，它将从 .jrn 文件（在 ATM 机中）读取更新的数据，并将文本复制到临时文本文件“tempfile.txt”。

还有另一个名为“POS Text Sender”的第三方应用程序，它读取“tempfile.txt”并将其内容显示在闭路电视摄像机中。

问题是，如果我直接在 tempfile 中键入内容，POS 应用程序会读取它，但如果我的应用程序将文本写入“tempfile”，我可以在 tempfile 中看到与 .jrn 文件中相同的内容，但事实并非如此当数据从新生成的文件复制到临时文件时反映在 POS 应用程序中。如果在从新生成的文件复制到临时文件的第一个数据后重新启动 POS 文本发送器，POS 文本发送器将显示内容直到新创建的文件中的内容被写入到临时文件

我的应用程序代码正在使用 StreamReader 读取 .jrn 文件并将其分配给字符串变量，然后使用 StreamWriter 将其写入临时文件。在文件上手动键入文本和 .NET StreamWriter 将文本写入文件有什么区别？

代码：

```
 DateTime LastChecked = DateTime.Now;
 try
 {
     string[] files = System.IO.Directory.GetFiles(@"C:\Test", "*.jrn", System.IO.SearchOption.AllDirectories);

     foreach (string file in files)
     {
         if (!fileList.Contains(file))
         {
             currentfilename = file;
             fileList.Add(file);
             copywarehouse(file);
             //do_some_processing();
             try
             {
                 // Create an instance of StreamReader to read from a file.
                 // The using statement also closes the StreamReader.
                 using (StreamReader sr = new StreamReader(file))
                 {
                     currentcontent=sr.ReadToEnd();
                     // Read and display lines from the file until the end of
                     //// the file is reached.
                     //while ((currentcontent = sr.ReadLine()) != null)
                     //{

                     //}
                     sr.Close();
                     //sr.Dispose();
                 }
             }
             catch (Exception)
             {
                 // Let the user know what went wrong.

             }
         }
     }

     //checking
     try
     {
         using (StreamReader sr = new StreamReader(currentfilename))
         {
             string currentfilecontent = sr.ReadToEnd();
             sr.Close();
             //sr.Dispose();
             if (currentfilecontent!=currentcontent)
             {
                 if (currentfilecontent.Contains(currentcontent))
                 {
                     string originalcontent = currentfilecontent.Substring(currentcontent.Length);
                     System.IO.StreamWriter filenew = new System.IO.StreamWriter(@"C:\Test\tempfile.txt");

                     filenew.WriteLine(originalcontent);
                     filenew.Close();
                     currentcontent = currentfilecontent;
                 }
             }
         }
     }
     catch (Exception)
     {
         // Let the user know what went wrong.
     } 
```

`copywarehouse`方法：

```
 private void copywarehouse(string filename)
 {
    string sourcePath = @"C:\Test";
    string targetPath = @"C:\Test";
    try
    {
       string sourceFile = System.IO.Path.Combine(sourcePath, filename);
       string destFile = System.IO.Path.Combine(targetPath, "tempfile.txt");
       System.IO.File.Copy(sourceFile, destFile, true);
    }
    catch (Exception)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T11:21:41.723

您可以检查以下内容：

1.  生成的文件编码是否与手动创建的文件相同？（即 UTF-8/ANSI）。
2.  您是否在不断刷新 streamWriter 的缓冲区？或者将 StreamWriter 的 AutoFlush 属性设置为 true。
3.  StreamWriter 是否使用 WriteLock 打开且不允许读取？在这种情况下，其他应用程序可能无法打开您的临时文件进行读取访问。

**编辑：**

此外，在您发布的代码中，您将 tempFile 数据与当前数据进行比较，如果 tempFile 数据比当前数据新，则您正在附加临时文件，我认为**反之亦然。**

**主要变化：**

```
using (StreamWriter filenew = new StreamWriter(fileDetail.TempFileName, true, Encoding.ASCII))
                                {
                                    filenew.WriteLine(newContent);
                                } 
```

要知道正确的编码，只需创建一个新的 tempFile，在编辑器中写一些东西并保存它。在记事本中打开文件并执行“另存为”。这将在底部显示当前编码。在 .NET 代码中设置该编码。

**如果这不起作用尝试（由 shr 推荐）：**

```
using (StreamWriter filenew = new StreamWriter(fileDetail.TempFileName, true, Encoding.ASCII))
                                {
                                    filenew.Write(newContent + "\r\n");
                                } 
```

**长版：（**可能与您的代码有点不同）：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            DateTime LastChecked = DateTime.Now;

            IDictionary<string, FileDetails> fileDetails = new Dictionary<string, FileDetails>(StringComparer.OrdinalIgnoreCase);
            IList<string> tempFileList = new List<string>();

            try
            {
                string[] files = System.IO.Directory.GetFiles(@"C:\Test", "*.jrn", System.IO.SearchOption.AllDirectories);

                foreach (string file in files)
                {
                    string currentfilename = file;
                    string currentcontent = string.Empty;

                    if (!fileDetails.Keys.Contains(file))
                    {
                        fileDetails[file] = new FileDetails(copywarehouse(file));
                        //do_some_processing();
                    }

                    try
                    {
                        using (StreamReader sr = new StreamReader(file))
                        {
                            currentcontent = sr.ReadToEnd();
                        }
                    }
                    catch (Exception)
                    {
                        // Let the user know what went wrong.
                    }

                    fileDetails[file].AddContent(currentcontent);
                }

                //TODO: Check using the file modified time. Avoids unnecessary reading of file.
                foreach (var fileDetail in fileDetails.Values)
                {
                    //checking
                    try
                    {
                        string tempFileContent = string.Empty;
                        string currentcontent = fileDetail.GetContent();

                        using (StreamReader sr = new StreamReader(fileDetail.TempFileName))
                        {
                            tempFileContent = sr.ReadToEnd();
                            sr.Close();
                        }

                        if (!(0 == string.Compare(tempFileContent, currentcontent)))
                        {
                            if (currentcontent.Contains(tempFileContent))
                            {
                                string newContent = tempFileContent.Substring(currentcontent.Length);

                                using (StreamWriter filenew = new StreamWriter(fileDetail.TempFileName, true, Encoding.ASCII))
                                {
                                    filenew.WriteLine(newContent);
                                }
                            }
                        }
                    }
                    catch (Exception)
                    {
                        // Let the user know what went wrong.
                    }

                }
            }
            catch (Exception)
            {
            }
        }

        private static string copywarehouse(string filename)
        {
            string sourcePath = @"C:\Test";
            string targetPath = @"C:\Test";

            string sourceFile = System.IO.Path.Combine(sourcePath, filename);
            string destFile = System.IO.Path.Combine(targetPath, filename+ "tempfile.txt");

            try
            {
                System.IO.File.Copy(sourceFile, destFile, true);
            }
            catch (Exception)
            {
            }

            return destFile;
        }

        internal class FileDetails
        {
            public string TempFileName { get; private set; }
            private StringBuilder _content;

            public FileDetails(string tempFileName)
            {
                TempFileName = tempFileName;
                _content = new StringBuilder();
            }

            public void AddContent(string content)
            {
                _content.Append(content);
            }

            public string GetContent()
            {
                return _content.ToString();
            }
        }
    }
} 
```

**编辑 2：** 您可以将 copywarehouse 更改为此并查看问题仍然存在：

```
 private void copywarehouse(string filename)
        {
            const string sourcePath = @"C:\Test";
            const string targetPath = @"C:\Test";
            try
            {
                string sourceFile = Path.Combine(sourcePath, filename);
                string destFile = Path.Combine(targetPath, "tempfile.txt");

                string currentcontent;
                using (var sr = new StreamReader(sourceFile))
                {
                    currentcontent = sr.ReadToEnd();
                }

                using (var wr = new StreamWriter(destFile, false, Encoding.ASCII))
                {
                    wr.WriteLine(currentcontent);
                }
            }
            catch (Exception)
            {

            }
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T12:19:19.173

这很可能是 CR+LF 问题。POS 期望文件的行结尾为 CR+LF（回车 (0x0D) + 新行 (0x0A)）组合。

`filenew.WriteLine(originalcontent)`仅附加换行符。我认为，当您键入时，您的编辑器必须为所有行尾创建 CR+LF 组合。

我建议你试试`filenew.Write( originalcontent + "\r\n");`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T11:36:36.027

一个区别是您的应用程序不会直接写入 tempfile.txt，而是写入另一个文件，然后将该文件复制到 tempfile.txt。

# asp.net-mvc - 学习 Asp.net MVC

> ID：12129659
> 
> 赞同：-1
> 
> 时间：2012-08-26T11:16:30.073
> 
> 标签：asp.net-mvc

自 2010 年 8 月以来，我一直担任 WinForm (C#) 开发人员。现在，我计划迁移到 Asp.net MVC (C#)。在过去的 10 天里，我一直在使用[http://www.asp.net/mvc学习 MVC。](http://www.asp.net/mvc)但我发现它只强调剃须刀技术而不是 ASPX。我只是想澄清你是否在你的 MVC 项目中使用 Razor 技术而不是 ASPX。还请提及我应该学习（或从哪里）成为 Asp.net MVC 开发人员（良好和受雇）的其他东西。

谢谢你，阿曼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:26:05.167

欢迎来到 StackOverflow (SO)

Razor 只是一个模板引擎，这意味着您编写一个字符串并将占位符放入其中以填充一些数据。Razor 真的很容易使用，因此：

```
hello @name 
```

在 Razor 中将是：

```
hello <%= name %> 
```

在 ASP 默认内联语句中。因此，是的，许多开发人员最近更喜欢 Razor。

如果您想成为一名优秀的 ASP.NET MVC 开发人员，我建议您以以下主题为起点：

1.  过滤器
2.  HTML 助手
3.  剃刀语法
4.  ViewBag、ViewData 和 TempData
5.  路线

当然，这些建议需要您了解 ASP.NET 和 MVC 以及更多的东西作为先决条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:02:43.623

我已经阅读了 3 本书关于 ASP.NET MVC 和 2 本书关于实体框架。自 MVC 3 发布以来，我一直在使用它进行开发。我找到的绝对最好的资源是 Scott Allen 在[http://pluralsight.com/training/Courses/TableOfContents/aspdotnet-mvc3-intro](http://pluralsight.com/training/Courses/TableOfContents/aspdotnet-mvc3-intro)上的 ASP.NET MVC 3 培训课程 Scott 真的很了解他的东西。

这不仅仅是由配音演员从脚本中读取的典型的罐装开发人员培训。Scott 非常了解 Web 开发，他分享了一些关于 MVC 3 编程的内部技巧。他在[http://pluralsight.com/training/Courses/TableOfContents/csharp-fundamentals](http://pluralsight.com/training/Courses/TableOfContents/csharp-fundamentals)上的 C# 内容也非常好。不，我不为复数视力工作，我只是一个快乐的复数视力.com 订户。

您必须了解 HTML、CSS、jQuery 和 JavaScript，才能成为高效且高效的 MVC 3 开发人员。访问[http://www.w3schools.com/](http://www.w3schools.com/)并完成有关这些主题的所有教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T11:38:23.357

Using Razor is indeed a more effective approach then to use ASPX-page markup.

Razor is simpler and cleaner. With "cleanness" comes a better code-walk capabilities. In aspx we had a lot of syntactical junk on the way, and a developer's intention to alter or get to know the code were "wearing off" more quicky.

With Razor, you see a much broader picture of a page's view at a glance.

Razor is not the core of being a good ASP.NET developer though.

The following may be a **subjective optinon**, but as soon as you realize how web server (ports, urls, routing), Controllers, Views and JSON data fromat tick together, as soon as you are able to quickly parse server-generated JSON model on the client with KnockoutJS or other MVVM framework, making your pages go "alive", you are becoming a developer who can create a web site on his own. You should specialize in something, no doubt, but to be a good developer, you need fully understand how Microsoft Stack of web technologies ticks.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T14:30:14.427

Aman 至于 Razor over ASPX 的问题，我说是的 Razor 在工业中被广泛使用，因为你是 ASP.NET MVC 的初学者，我建议学习 MVC 4。你可以从[http://www获得有关 MVC 4 的更多信息.asp.net/mvc/mvc4](http://www.asp.net/mvc/mvc4)，这里是涵盖 MVC 4 新功能的文章系列[http://www.dotnetexpertguide.com/2011/09/aspnet-mvc-4-article-series.html](http://www.dotnetexpertguide.com/2011/09/aspnet-mvc-4-article-series.html)

# amazon-ec2 - Linux 中的文件权限，允许用户在 Amazon ec2 中上传

> ID：12129661
> 
> 赞同：0
> 
> 时间：2012-08-26T11:16:43.137
> 
> 标签：amazon-ec2

我正在制作一个托管在亚马逊 ec2 上的网络应用程序。其中一个页面允许用户将照片上传到网站。我的脚本适用于普通站点，但不适用于 ec2，所以我怀疑问题出在连接或授权上。

也许普通的网络用户没有权限上传到 var/www/html/ 目录？但是如何启用它们呢？

（特别是我认为以下行不起作用move_uploaded_file）

我正在使用亚马逊 ec2 微实例 Linux AMI 服务器。我正在通过 php 文件中的表单上传。

# css - 如何对不同的媒体查询条件使用相同的 css

> ID：12129662
> 
> 赞同：0
> 
> 时间：2012-08-26T11:16:47.037
> 
> 标签：css, responsive-design, media-queries

对于某个 CSS 规则，我有 2 个条件：

```
@media all and (min-width:481px) and (max-width:1024px) 
```

和

```
@media all and (max-height:900px) 
```

因为我猜我不能将条件与`or`有没有办法不为这两个条件复制 CSS 规则？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T11:19:51.247

您可以使用逗号来做到这一点：

```
@media all and (min-width:481px) and (max-width:1024px), 
       all and (max-height:900px) 
```

# python - Python：csv - 在列中查找值

> ID：12129666
> 
> 赞同：0
> 
> 时间：2012-08-26T11:17:19.013
> 
> 标签：python, csv

假设我有一个 csv 文件，如下所示：

```
(a,3,,,,)
(b,,,,,)
(c,2,,,,)
(d,,,,,)
(e,,,,,)
(f,1,,,,)
(g,,,,,) 
```

我正在尝试找出哪个字母表（即 a、b、c、d、e、f、g）在列中具有值（假设此处为第 1 列）。
我写的代码在这里：

```
set3 = set([n[column] for n in new_marks])

if set3 != '':

      print
      print '{0} is not empty'.format(list(set3)) 
```

此代码仅在第 1 列中打印值而不是字母...

谁能帮我解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T13:22:11.573

我会做类似的事情：

```
import csv

def strip_bits(obj):
    for el in obj:
        yield el[1:-2]

with open('/home/jon/testfile.csv') as fin:
    tempin = strip_bits(fin)
    csvin = csv.reader(tempin)
    for row in csvin:
        if any(row[1:]):
            print row[0] # or do whatever 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T11:31:40.233

without `csv` solution:

```
with open('data.txt') as f:
    for x in f:
        x=x.strip().strip('()')
        spl=x.split(',')
        if spl[0] in ('a','b','c','d','e','f','g') and spl[1]!='':  #replace spl[1] with
                          # any other column if you want to find value in some other column
            print ("{0} is not empty".format(spl[0])) 
```

**output:**

```
a is not empty
c is not empty
f is not empty 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T11:32:51.440

this code does pretty much what i understand from your question.

i am not sure what you define as a "value" so here it is simply any row that has more than 1 column. but this code can be easily modified.

```
#holds the rows from the file
rows = []
#opens and reads each row of the file (CSVFILE = full file location)
with open(CSVFILE, "r") as CSV_read:
    next(CSV_read) # removes headers/colum names (if you dont have any - remove this line)
    for line in CSV_read:
        #cleans and splits the line into colums
        vals = line.strip("\r\n").strip("\n").split(",")
        #adds the line to the list of rows
        rows.append(vals)

#holds the alphabet (first colum value) of each row that has more values/cells
have_value = []
#goes over each row in the rows
for row in rows:
    #if there are any values after the initial 'alphabet'
    if len(row) > 1:
        # add to the list of things with values.
        have_value.append(row[0]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T11:33:19.960

How about this?

```
s = """a,3,,,,
b,,,,,
c,2,,,,
d,,,,,
e,,,,,
f,1,,,,
g,,,,,"""
buf = StringIO(s)
d = {}
for row in csv.reader(buf,delimiter=','):
  d[row[0]] = row[1:]

looking_for = 2

for alpha,items in d.iteritems():
   try:
       if items[looking_for-1] == '1':
           print 'Letter %s has value in column %s' % (alpha,looking_for)
   except IndexError:
       print "List doesn't contain %s columns!" % looking_for 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-26T11:27:37.633

```
d = dict((n[0], n[column]) for n in new_marks)
if d:
    print
    print '{0} is not empty'.format(d.keys()) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-26T11:28:27.383

修改第一行：

```
set3 = set([n[0] for n in new_marks if n[column] is not None]) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-26T13:46:42.873

CSV 只不过是一个纯逗号分隔的文本文件，不是吗？

```
with open("/path/to/myfile.csv") as f:
    for line in f:
        line_chars = line.strip()[1:-1].split(",")
        k, v= line_chars[0], "".join(line_chars[1:])
        if v: print k, v 
```

# android - 无法开始新活动

> ID：12129671
> 
> 赞同：1
> 
> 时间：2012-08-26T11:18:18.733
> 
> 标签：android

我有两节课。主类是BundleActivity，还有一个子类。我正在尝试从 BundleActivity 启动子活动，但它不起作用并且应用程序正在强制关闭。

这是我在 BundleAcitvity 类中的 onClick 方法：

```
public void onClick(View v) {
        // TODO Auto-generated method stub

            Intent i=new Intent(this,sub.class);
            this.startActivity(i);
                            } 
```

我的清单文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.bundle"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
          <activity
            android:name=".BundleActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".sub"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.bundle.sub" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

有人帮我解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T11:24:25.440

您是否为您的子活动创建了一个类？据我所知，您所有的课程都必须以大写字母“Sub”开头。对我来说，感觉就像您不需要放入子活动中的意图过滤器一样。

您没有收到任何预编译错误吗？运行时的错误跟踪是什么？

# asp.net - asp.net页面gui和myscript如何并行工作

> ID：12129676
> 
> 赞同：0
> 
> 时间：2012-08-26T11:19:11.370
> 
> 标签：asp.net, ajax, asynchronous

我阅读了很多关于该问题和教程的问题，但只有一个执行了，并且没有正常工作。我有一个功能可以从其他站点抓取信息，这是一项繁重的任务，所以当我将其放置到 Page_load 时，页面在 scrobble 脚本完成之前不会显示。我想用 ajax 或异步任务动态加载乱码信息。我发现并执行的唯一一件事是

```
 protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        PhoneBaseC pbc = new PhoneBaseC(text);

        PageAsyncTask asyncTask1 = new PageAsyncTask(pbc.OnBegin, pbc.OnEnd, pbc.OnTimeout, "Async1", true);
        Page.RegisterAsyncTask(asyncTask1);
        Page.ExecuteRegisteredAsyncTasks();

        text.InnerHtml = pbc.GetAsyncTaskProgress() + "<br />";
    } 
```

但是当我按下按钮时，所有页面都被冻结，当任务完全完成时，我们会一起显示“开始”、“完成”等进度消息。

我需要并行工作 gui 和我的任务，也许是进程完成的进度条。很久以前我在 php 中使用 ajax，但我对 asp.net 很陌生。

PS对我来说很奇怪。如果我评论“Page.ExecuteRegisteredAsyncTasks();” 线任务仍在执行。

抱歉，如果已经回答了相同的问题，我没有找到简单的示例，并且由于很多我不明白的原因，我发现的那些没有编译给我。抱歉英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:26:18.577

您可以将工作卸载到 Signal R 集线器上，并在任务完成后更新客户端，请在此处查看 Nuget 中的 Signal R [http://nuget.org/packages/SignalR](http://nuget.org/packages/SignalR)。网上有很多关于如何实现长时间运行的任务和客户端更新的教程，只需在谷歌中输入信号器教程。

# python - 图像字段模型形式的 Django 自定义验证（最大文件大小等）

> ID：12129677
> 
> 赞同：3
> 
> 时间：2012-08-26T11:19:38.623
> 
> 标签：python, django, validation, modelform, imagefield

我有一个模型表单，它有一个名为“横幅”的图像字段，我正在尝试验证文件大小和尺寸，并在图像太大时提供错误。

这是models.py：

```
class Server(models.Model):
    id = models.AutoField("ID", primary_key=True, editable=False)
    servername = models.CharField("Server Name", max_length=20)
    ip = models.CharField("IP Address", max_length=50)
    port = models.CharField("Port", max_length=5, default='25565')
    banner = models.ImageField("Banner", upload_to='banners', max_length=100)
    description = models.TextField("Description", blank=True, max_length=3000)
    rank = models.IntegerField(default=0)
    votes = models.IntegerField(default=0)
    website = models.URLField("Website URL", max_length=200, blank=True)
    user = models.ForeignKey(User)
    motd = models.CharField("MOTD", max_length=150, default='n/a')
    playersonline = models.CharField("Online Players", max_length=7, default='n/a')
    online = models.BooleanField("Online", default=False)
    sponsored = models.BooleanField("Sponsored", default=False)
    lastquery = models.DateTimeField('Last Queried', auto_now=True)
    slugurl = models.SlugField("SlugURL", max_length=50)
    def __unicode__(self):
        return "%s (%s:%s)" % (self.servername, self.ip, self.port) 
```

这是带有自定义验证的 forms.py：

```
class AddServer(ModelForm):
    class Meta:
        model = Server
        fields = ('servername', 'ip', 'port', 'website', 'description', 'banner')

     # Add some custom validation to our image field
    def clean_image(self):
        image = self.cleaned_data.get('banner', False)
        if image:
            if image._size > 1*1024*1024:
                raise ValidationError("Image file too large ( maximum 1mb )")
            if image._height > 60 or image._width > 468:
                raise ValidationError("Image dimensions too large ( maximum 468x60 pixels )")
            return image
        else:
            raise ValidationError("Couldn't read uploaded image") 
```

从我读过的内容来看，这应该可以，但是无论大小如何，图像都会上传。

我做错了什么还是有更好的方法来做这件事？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-31T22:18:28.287

`clean_<field name>`在这种情况下，方法的名称应该是`clean_banner`.

为了将来参考，我将放置我在最近的一个项目中使用的代码片段（名称必须适合与 OP 代码一起使用）：

```
from PIL import Image
from django.utils.translation import ugettext as _

def clean_photo(self):
    image = self.cleaned_data.get('photo', False)

    if image:
        img = Image.open(image)
        w, h = img.size

        #validate dimensions
        max_width = max_height = 500
        if w > max_width or h > max_height:
            raise forms.ValidationError(
                _('Please use an image that is smaller or equal to '
                  '%s x %s pixels.' % (max_width, max_height)))

        #validate content type
        main, sub = image.content_type.split('/')
        if not (main == 'image' and sub.lower() in ['jpeg', 'pjpeg', 'png', 'jpg']):
            raise forms.ValidationError(_('Please use a JPEG or PNG image.'))

        #validate file size
        if len(image) > (1 * 1024 * 1024):
            raise forms.ValidationError(_('Image file too large ( maximum 1mb )'))
    else:
        raise forms.ValidationError(_("Couldn't read uploaded image"))
    return image 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T14:09:29.193

只是在这里回答记录：

发帖人没有检查`form.cleaned_data()`，这意味着`clean_xxx`验证没有运行。

# mysql - Mysql 语法错误 - MySQL Workbench

> ID：12129679
> 
> 赞同：0
> 
> 时间：2012-08-26T11:19:49.883
> 
> 标签：mysql, sql

语法对我来说看起来不错 - 但 MySQL 工作台抱怨最后一行：

```
Field20 VARCHAR(120); 
```

正在执行的代码如下：

```
CREATE TABLE Documents(
DocumentID INT NOT NULL AUTO_INCREMENT,
PRIMARY KEY(DocumentID),
Field1 VARCHAR(120),
Field2 VARCHAR(120),
Field3 VARCHAR(120),
Field4 VARCHAR(120),
Field5 VARCHAR(120),
Field6 VARCHAR(120),
Field7 VARCHAR(120),
Field8 VARCHAR(120),
Field9 VARCHAR(120),
Field10 VARCHAR(120),
Field11 VARCHAR(120),
Field12 VARCHAR(120),
Field13 VARCHAR(120),
Field14 VARCHAR(120),
Field15 VARCHAR(120),
Field16 VARCHAR(120),
Field17 VARCHAR(120),
Field18 VARCHAR(120),
Field19 VARCHAR(120),
Field20 VARCHAR(120); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T11:20:54.043

您在语句末尾的最后一个字段之后缺少右括号：

```
...
Field18 VARCHAR(120),
Field19 VARCHAR(120),
Field20 VARCHAR(120)
); --- HERE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T11:21:22.710

你忘了最后一个括号：

```
CREATE TABLE Documents(
DocumentID INT NOT NULL AUTO_INCREMENT,
PRIMARY KEY(DocumentID),
Field1 VARCHAR(120),
Field2 VARCHAR(120),
Field3 VARCHAR(120),
Field4 VARCHAR(120),
Field5 VARCHAR(120),
Field6 VARCHAR(120),
Field7 VARCHAR(120),
Field8 VARCHAR(120),
Field9 VARCHAR(120),
Field10 VARCHAR(120),
Field11 VARCHAR(120),
Field12 VARCHAR(120),
Field13 VARCHAR(120),
Field14 VARCHAR(120),
Field15 VARCHAR(120),
Field16 VARCHAR(120),
Field17 VARCHAR(120),
Field18 VARCHAR(120),
Field19 VARCHAR(120),
Field20 VARCHAR(120)); 
```

# javascript - 带背景淡入的引导模式

> ID：12129682
> 
> 赞同：3
> 
> 时间：2012-08-26T11:20:05.367
> 
> 标签：javascript, css, twitter-bootstrap

我正在使用引导程序 1.4.0 和 jquery 1.7.2。我正在尝试创建一个带有渐变背景的模态窗口。模态窗口应使用 javascript 函数加载。

这是我的代码：

```
<!-- Modal -->
<div id="error-dialog" class="modal hide fade">
  <div class="modal-body">
    <h1 class="exp-heading">Error</h1>
    <p class="exp-para pad-btm"> {$meta.message}</p>
    <!-- apps go here -->
    <div class="clear"></div>
    <!-- apps end here --> 
  </div>
  <div class="modal-footer"  align="center"><a href="#" data-controls-modal-close="error-dialog" ><img src="images/cancel_btn.png" alt="" border="0" align="middle" /></a> </div>
</div>

<script language="Javascript">  
$('#error-dialog').modal('show');                                                                   
</script> 
```

模式正在显示，但背景没有淡入。CSS 文件是默认的 1.4.0/bootstrap.css

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T20:40:01.193

我不确定，但如果你想淡入图像，你需要使用

```
.fadeIn() 
```

方法

# sql - 在 ADO.NET 中使用或避免使用 CommandBuilder

> ID：12129684
> 
> 赞同：0
> 
> 时间：2012-08-26T11:20:27.550
> 
> 标签：sql, ado.net, sqlcommandbuilder

建议使用 CommandBuilder 还是应该为 SqlDataAdapter 手动创建 InsertCommand、DeleteCommand 和 UpdateCommand？

使用 CommandBuilder 的明显优势是更少的开发时间，缺点是更多的运行时间。除了这些因素之外，在使用/避免使用 CommandBuilder 时，还有什么需要注意的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T11:45:14.450

使用原始 ADO.NET`SqlCommandBuilder`等`SqlDataAdapter`通常涉及大量可以避免的样板代码。

如今，大多数现代业务应用程序都使用某种形式的 ORM（对象关系映射器），它提供了一组很好的包装器，这些包装器在幕后使用了使用原始 ADO.NET 的最佳实践。

一些比较流行的 ORM 是：-

*   休眠
*   实体框架
*   Linq2Sql
*   [小巧玲珑](http://code.google.com/p/dapper-dot-net/)
*   [PetaPoco](http://www.toptensoftware.com/petapoco/)

使用 ORM 提供了许多有用的功能，例如简单性、灵活性、延迟加载、注入安全查询、POCO 支持等。

如果您仍然强烈希望在 ORM 上使用 ADO.NET，我建议您获取[Dapper](http://code.google.com/p/dapper-dot-net/)或[PetaPoco](http://www.toptensoftware.com/petapoco/)的代码，并从您可能找到的一些最好的代码中模仿。

# android - 如何在 Android 的 QuickAction 对话框中添加 Listview

> ID：12129689
> 
> 赞同：2
> 
> 时间：2012-08-26T11:21:32.603
> 
> 标签：android

在这里找到很好的教程[QuickAction Dialog](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)。
我需要在 QuickAction 对话框中添加简单的 Listview。请建议我做什么。

我创建了一些东西，但列表视图没有显示到完整的对话框：![在此处输入图像描述](../Images/6af7f3efc512afc54b2a0b39c4d1d071.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T11:25:29.707

我不确定它是否可能，因为*QuickAction*最好用于提供最少的操作集。

但是，作为替代方案，我建议您利用[`PopupWindow`](http://developer.android.com/reference/android/widget/PopupWindow.html)并整合您的`ListView`内部。

# google-drive-api - 组织文件存储库

> ID：12129696
> 
> 赞同：0
> 
> 时间：2012-08-26T11:22:59.943
> 
> 标签：google-drive-api

我们正在尝试将 Google Drive 建立为文件共享。它是工人使用的参考资料的只读存储库。任何人都可以阅读这些文件，甚至不在这里工作的外人也可以阅读这些文件。

我们使用 Google Drive API 为文件设置链接，以显示在我们的网站上。我们遇到的问题是用户在打开此页面时需要先通过 Google 进行身份验证。API 会在允许获取文件列表之前查找使用 Google 签名的用户。除其他问题外，这是不切实际的，因为有些人不喜欢使用他们的个人 Google 登录来访问工作材料。

无论如何，这些文件将被公开共享。如果文件是公开的，OAuth 2.0 会只读授权而不进行身份验证吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:17:44.257

发出 API 请求总是需要授权、配额等。

但是，您可以轻松下载文件并提供它，或者您可以使用`webContentLink`资源的 允许用户在浏览器中打开它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T23:16:16.710

Ali 的意思是，您可以成为具有 Google 驱动器访问权限的管理员，并在您的驱动器中创建一个文件，并且您从 Google 返回的部分元数据是 webContentLink，任何人都可以访问它，即使是那些没有 Google 凭据的人。

# c# - 从数据库中获取数据并在 DataGridView 中显示

> ID：12129697
> 
> 赞同：2
> 
> 时间：2012-08-26T11:23:12.593
> 
> 标签：c#, sql-server, datagridview

我正在使用此查询从 SQL Server 2008 中获取数据：

```
select 
    g.godown_name, s.supplier_name, t.type_name,
    r.bags_instock, b.lb_per_bag, t.rate
from 
    tbl_godown g, tbl_yarn_supplier s, tbl_yarn_type t,
    tbl_yarn_receive r, tbl_godown_transaction gt, tbl_yarn_book b
where 
    r.book_id = b.book_id and
    s.supplier_id = b.supplier_id and
    t.type_id = b.type_id and
    gt.godown_id = g.godown_id and
    gt.receive_id = r.receive_id 
```

结果是：

![在此处输入图像描述](../Images/bec9ca280bcbb87b9c07933ec5cbbb52.png)

这里有些交易有相同`Godown`的 , `Suppliar`, `Tpe`&`lbs_per_bag`

```
1\. 1 & 7
2\. 2,3,4,5
3\. 8,9,10,11
4\. 12
5\. 6 
```

如果任何行相同`Godown, Suppliar, Tpe & lbs_per_bag`，则不应重复

结果应该是这样的。

谢谢

**等待答复**

![在此处输入图像描述](../Images/74efd2d72fb3bdda9b77644aa8ffbdc4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T15:28:05.427

我会这样做：

```
SELECT 
    g.godown_name, 
    s.supplier_name, 
    t.type_name,
    b.lb_per_bag, 
    SUM(r.bags_instock) As total_bags_instock, 
    SUM(t.rate * r.bags_instock) 
        /SUM(r.bags_instock) As average_rate

FROM tbl_godown_transaction  As gt
JOIN tbl_godown          As g  ON gt.godown_id   = g.godown_id 
JOIN tbl_yarn_receive    As r  ON gt.receive_id  = r.receive_id
JOIN tbl_yarn_book       As b  ON r.book_id      = b.book_id 
JOIN tbl_yarn_supplier   As s  ON s.supplier_id  = b.supplier_id 
JOIN tbl_yarn_type       As t  ON t.type_id      = b.type_id

GROUP BY
    g.godown_name, 
    s.supplier_name, 
    t.type_name,
    r.lb_per_bag 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T14:54:26.230

更喜欢使用内连接

```
 select 
        g.godown_name, s.supplier_name, t.type_name,
        r.bags_instock, b.lb_per_bag, t.rate
    from 
        tbl_godown g
        inner join tbl_godown_transaction gt
           on gt. gt.godown_id = g.godown_id 
        inner join  tbl_yarn_receive r
           on gt.receive_id = r.receive_id
        inner join tbl_yarn_book b
           on r.book_id = b.book_id
        inner join tbl_yarn_supplier s
           on  s.supplier_id = b.supplier_id
        inner join tbl_yarn_type t
           on t.type_id = b.type_id       
    group by    g.godown_name, s.supplier_name, t.type_name,
        r.bags_instock, b.lb_per_bag, t.rate 
```

# perl - 在 Perl 中使用信号量

> ID：12129701
> 
> 赞同：0
> 
> 时间：2012-08-26T11:23:48.683
> 
> 标签：perl, fork, semaphore

这是我的代码的一部分，它并行编译了一些项目：

```
#main:#
our $sem = Thread::Semaphore->new();

for ($i = 0; $i < $cores_num-1; $i++)
{
    # Generating process
    local $curr_pid = fork ();
    # Child
    if ($curr_pid == 0)
    { 
        compiling_process($i,*REPORT);
        exit(0);
    }
    # Parent
    elsif (abs($curr_pid) > 10)
    {
        sleep (1);
        $running_processes++;   
    }
    # Error
    else
    {
        print "Error while forking!! \n";
        exit (0);
    }
}

# parent process:
compiling_process($i,*REPORT);
# Wait:
while ($running_processes > 0)
{
    $kid = 0;
    $kid = waitpid(-1,WNOHANG);
    if (abs($kid) > 10)
    {
        $running_processes--;
    }
    sleep (1);
}

sub compiling_process{
local $id = $_[0];
*REPORT = $_[1];
# Run until all targets are built:

while (1)   
{
$sem->down();   
##critical section
$sem->up();
} 
```

}

此代码用于并行编译。在运行此代码时 - 有时我会同时在关键部分内看到 2 个内核！（代码运行良好，所有项目都在构建中，但我必须解决这个问题..它会浪费时间 + 打印错误）我有点绝望，因为我不知道我做错了什么。在函数中使用信号量是错误的吗？（“子编译过程”）

任何帮助，将不胜感激！非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:31:50.130

信号量似乎不起作用的原因是因为子进程`$sem`一旦被`fork`-ed 就会维护它们自己的副本。

`our`关键字给出包`$sem`范围；这并不意味着变量是跨进程共享的。

可能最简单的解决方法是使用线程而不是显式分叉来运行子进程：

```
use threads;
use Thread::Semaphore;

my $sem = Thread::Semaphore->new;

my @threads;

for my $i ( 0 .. $num_cores-1 ) {

    my $thr = threads->new( \&compiling_process, $i, *REPORT ); # Launch
    push @threads, $thr;
}

$_->join for @threads;                                          # Wait 
```

有关[`perldoc perlthrtut`](http://perldoc.perl.org/perlthrtut.html)更多详细信息和示例，请参阅。

# iphone - 调用 UIAlertView 后停止代码执行

> ID：12129703
> 
> 赞同：2
> 
> 时间：2012-08-26T11:23:53.983
> 
> 标签：iphone

如何在显示 UIAlertView 后停止代码执行，直到用户按下 OK 按钮？如果这是一个问题，有什么解决方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T13:22:31.423

最终使用了这个：

...

```
[alert show];

while ((!alert.hidden) && (alert.superview != nil))
    {
        [[NSRunLoop currentRunLoop] limitDateForMode:NSDefaultRunLoopMode];

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T15:12:58.260

您似乎不想执行在 [alertview show] 方法之后编写的代码。要实现这一点，请将这些代码行添加到方法中，并在 UIAlertView 的以下委托中调用该方法。

```
 - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
    {
        if(buttonIndex == OKButtonIndex)
       {
         // Issue a call to a method you have created that encapsulates the 
         // code you want to execute upon a successful tap.
         // [self thingsToDoUponAlertConfirmation];
       }

    } 
```

现在，如果您要在您的类中拥有多个 UIAlertView，您需要确保可以轻松处理每个 UIAlertView。您可以使用 NSEnum 和 UIAlertView 上的标记设置来执行此操作。

如果您有三个警报，请在类的顶部在 @interface 之前声明一个 NSEnum，如下所示：

```
 // alert codes for alertViewDelegate // AZ 09222014
 typedef NS_ENUM(NSInteger, AlertTypes)
{
    UserConfirmationAlert = 1, // these are all the names of each alert
    BadURLAlert,
    InvalidChoiceAlert
}; 
```

然后，在您的 [alert show] 之前，将要显示的警报标签设置为。

```
myAlert.tag = UserConfirmationAlert; 
```

然后在您的 UIAlertDelegate 中，您可以在 switch/case 中执行所需的方法，如下所示：

```
// Alert handling code
#pragma mark - UIAlertViewDelegate - What to do when a dialog is dismissed.
// We are only handling one button alerts here.  Add a check for the buttonIndex == 1
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    switch (alertView.tag) {
        case UserConfirmationAlert:
            [self UserConfirmationAlertSuccessPart2];
            alertView.tag = 0;
            break;

        case BadURLAlert:
            [self BadURLAlertAlertSuccessPart2];
            alertView.tag = 0;
            break;

        case InvalidChoiceAlert:
            [self InvalidChoiceAlertAlertSuccessPart2];
            alertView.tag = 0;
            break;

        default:
            NSLog(@"No tag identifier set for the alert which was trapped.");
            break;
    }
} 
```

# android - Android HttpResponse

> ID：12129706
> 
> 赞同：2
> 
> 时间：2012-08-26T11:24:04.247
> 
> 标签：android, httpresponse

我的`if (httpResponse == null)`块无法运行。以前如何实施`HttpResponse httpResponse = httpClient.execute(httpPost);`

请告诉我如何做到这一点。

```
 public class XMLParser {
    private Activity activity = null;
    // constructor
    public XMLParser(Activity act) {
        activity = act;
    }

    /**
     * Getting XML from URL making HTTP request
     * @param url string
     * */
    public String getXmlFromUrl(String url) {
        String xml = null;

        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            xml = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;
    }

    /**
     * Getting XML DOM element
     * @param XML string
     * */
    public Document getDomElement(String xml){
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
                is.setCharacterStream(new StringReader(xml));
                doc = db.parse(is); 

            } catch (ParserConfigurationException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (SAXException e) {
                AlertDialog.Builder builder = new AlertDialog.Builder( activity ); //<<-- This part throws an exception " ThreadPoolExecutor "
                builder.setMessage( "Host not found" )
                        .setCancelable(false)
                        .setPositiveButton("Exit",
                                new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog,
                                            int id) {
                                        System.exit(0);
                                    }

                                });
                AlertDialog alert = builder.create();
                alert.show();
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (IOException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            }

            return doc;
    }

    /** Getting node value
      * @param elem element
      */
     public final String getElementValue( Node elem ) {
         Node child;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                     if( child.getNodeType() == Node.TEXT_NODE  ){
                         return child.getNodeValue();
                     }
                 }
             }
         }
         return "";
     }

     /**
      * Getting node value
      * @param Element node
      * @param key string
      * */
     public String getValue(Element item, String str) {     
            NodeList n = item.getElementsByTagName(str);        
            return this.getElementValue(n.item(0));
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T12:24:52.603

当出现问题时，`execute`不会返回 null 而是抛出异常。例如，当找不到主机时，它会抛出一个`UnknownHostException`. 此异常是 IOException 的子类。

您的代码旨在 'catch' `IOException`。但是当这种情况发生时，你只打印一个堆栈跟踪（这可以在你的 LogCat 中以橙色看到）并且什么都不做。所以接下来，'return xml' 语句被执行并且你的方法结束。

因此，如果您想“捕捉”主机不存在的情况，您可以像下面这样重写它。要捕获更多错误，您可能应该计算出`IOException`catch 块。请确保您了解发生的情况以及异常处理的工作原理。

```
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        HttpResponse httpResponse = httpClient.execute(httpPost);

        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnknownHostException e) {
        AlertDialog.Builder builder = new AlertDialog.Builder( activity );
        builder.setMessage( "Host not found" )
                .setCancelable(false)
                .setPositiveButton("Exit",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                System.exit(0);
                            }

                        });
        AlertDialog alert = builder.create();
        alert.show();
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    // return XML
    return xml;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-26T11:26:47.247

我不认为来自服务器的无响应会产生空响应。你能调试一下在运行时探索 httpResponse 的价值吗？

# c# - 如何在 Eclipse 中导入 .net 库？

> ID：12129709
> 
> 赞同：1
> 
> 时间：2012-08-26T11:24:34.207
> 
> 标签：c#, java, android, eclipse

有什么方法可以在 Eclipse 中导入 .net 外部库。它是自行创建的库，我想将其导入 Eclipse。是否可以 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:30:25.793

是的，您可以使用[Java Native Interface来做到这一点](http://en.wikipedia.org/wiki/Java_Native_Interface)

[基本教程 在 Java 代码中调用 C# 方法](http://www.codeproject.com/Articles/13093/C-method-calls-within-a-Java-program)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T11:32:16.837

不可以。.Net 库被编译成中间语言 (IL) 以在 Microsoft .Net 平台上特定使用，这意味着只有具有 .Net 框架的计算机才能使用它们。

Java 使用了类似的想法，但目的完全不同。Java 代码编译成设计为在 Java 平台上运行的库，这些库需要安装在要运行二进制文件的计算机上。然而，Java 的目标是您可以为各种操作系统编写一次代码。.Net 的目标是使多种语言能够编译成同一种语言 (IL)。

您将不得不考虑将 .Net 库中的代码移植到更常见的运行时，例如 Mono (http://www.mono-project.com/Java)。

但是，.Net dll 不可能在 Java 环境中为您带来任何好处。即使您设法获得所有挂钩，.Net dll 也需要 .Net 框架，这意味着 Windows，这违反了 Java 方法。

# c# - 我将“Int.TryParse”更改为 while，现在我的代码无法正常工作

> ID：12129714
> 
> 赞同：-10
> 
> 时间：2012-08-26T11:25:12.147
> 
> 标签：c#, console, while-loop

```
//the code  
parseAttempt = while (KeyBoardInput, out Response); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T11:28:45.823

您不能用 while 循环*替换* `int.TryParse`，但可以将其*与*while 循环一起使用，如下所示：

```
string keyboardInput = Console.ReadLine();

int response;
while (!int.TryParse(keyboardInput, out response)) {
    Console.WriteLine("Invalid input, try again.");
    keyboardInput = Console.ReadLine();
} 
```

另一种方法是将代码重构为单独的方法：

```
int readIntFromConsole()
{
    while (true)
    {
        string keyboardInput = Console.ReadLine();

        int result;
        if (int.TryParse(keyboardInput, out result))
        {
            return result;
        }
        else
        {
            Console.WriteLine("Invalid input, try again.");
        }
    }
} 
```

# ruby-on-rails - 在 Rails 应用程序布局中设计登录表单

> ID：12129715
> 
> 赞同：2
> 
> 时间：2012-08-26T11:25:21.070
> 
> 标签：ruby-on-rails, devise

典型的表单结构（在用户视图中）如下：

```
<%= simple_form_for(resource, :as => resource_name, :url => session_path(resource_name)) do |f| %> 
```

我想在我的应用程序布局中实现登录表单，并且上面的代码不起作用，因为主页级别的资源不足（我假设这就是原因）。

以下代码有效，但它正确吗？

```
 <%= form_for User.new, :url => session_path(User.new), :html => { :class => 'navbar-form pull-right', :style => 'margin-right:15px' } do |f| %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T12:41:40.777

设计 wiki 中有一个示例：

[https://github.com/plataformatec/devise/wiki/How-To:-Display-a-custom-sign_in-form-anywhere-in-your-app](https://github.com/plataformatec/devise/wiki/How-To:-Display-a-custom-sign_in-form-anywhere-in-your-app)

# oracle - Oracle 存储过程中的错误

> ID：12129717
> 
> 赞同：-1
> 
> 时间：2012-08-26T11:25:28.070
> 
> 标签：oracle, stored-procedures

尝试创建此存储过程时，出现错误：

> *PLS-00428：此 SELECT 语句中应有一个 INTO 子句*

代码：

```
CREATE OR REPLACE PROCEDURE FindDb(
       P_BookId IN BOOKMASTER.BookId%TYPE,
       p_PublisherCode OUT BOOKMASTER.PUBLISHERCODE%TYPE,
       p_ISBNCode OUT BOOKMASTER.ISBNCODE%TYPE,
       p_BookName OUT BOOKMASTER.BOOKNAME%TYPE,
    p_BookType OUT BOOKMASTER.BOOKTYPE%TYPE,
    p_BookLevel OUT BOOKMASTER.BOOKLEVEL%TYPE,
    p_BookCategory OUT BOOKMASTER.BOOKCATEGORY%TYPE,
    p_AuthorNames OUT BOOKMASTER.AUTHORNAMES%TYPE,
    p_PublishedYear OUT BOOKMASTER.PUBLISHEDYEAR%TYPE,
    p_CostPrice OUT BOOKMASTER.COSTPRICE%TYPE,
    p_MRP OUT BOOKMASTER.MRP%TYPE,
    p_BookImage OUT BOOKMASTER.BOOKIMAGE%TYPE)
 AS
BEGIN

  SELECT  PUBLISHERCODE, ISBNCODE, BOOKNAME,BOOKTYPE,BOOKLEVEL,BOOKCATEGORY
 ,AUTHORNAMES,PUBLISHEDYEAR,COSTPRICE,MRP,BOOKIMAGE
  FROM  BOOKMASTER WHERE BOOKID = p_BookId;

END FindDb;
/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T11:47:40.533

在 Oracle 存储过程中，我们必须将值选择到变量或输出参数中。请[阅读文档](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/selectinto_statement.htm#LNPLS01345)。

尝试以下列方式创建您的存储过程。

```
CREATE OR REPLACE PROCEDURE finddb (
    p_bookid            IN   bookmaster.bookid%TYPE,
    p_publishercode     OUT bookmaster.publishercode%TYPE,
    p_isbncode              OUT bookmaster.isbncode%TYPE,
    p_bookname              OUT bookmaster.bookname%TYPE,
    p_booktype              OUT bookmaster.booktype%TYPE,
    p_booklevel             OUT bookmaster.booklevel%TYPE,
    p_bookcategory      OUT bookmaster.bookcategory%TYPE,
    p_authornames           OUT bookmaster.authornames%TYPE,
    p_publishedyear     OUT bookmaster.publishedyear%TYPE,
    p_costprice             OUT bookmaster.costprice%TYPE,
    p_mrp                   OUT bookmaster.mrp%TYPE,
    p_bookimage             OUT bookmaster.bookimage%TYPE
)
AS
BEGIN
    SELECT  publishercode,
                isbncode,
                bookname,
                booktype,
                booklevel,
                bookcategory,
                authornames,
                publishedyear,
                costprice,
                mrp,
                bookimage
      INTO  p_publishercode,
                p_isbncode,
                p_bookname,
                p_booktype,
                p_booklevel,
                p_bookcategory,
                p_authornames,
                p_publishedyear,
                p_costprice,
                p_mrp,
                p_bookimage
      FROM  bookmaster
     WHERE  bookid = p_bookid;
END finddb;
/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T11:31:11.953

It looks like you're expecting an Oracle stored procedure to work the same way as a SQL Server SP - they are different - in Oracle you need to select INTO variables or a cursor then do something with the values. If you're just trying to select the values as in SQL server, it doesn't work like that.

# iphone - 使用 Storyboard 在视图控制器之间传递对象 (XCode 4 /iOS 5)

> ID：12129719
> 
> 赞同：1
> 
> 时间：2012-08-26T11:26:03.747
> 
> 标签：iphone, ios, xcode, viewcontroller

我正在尝试在 Objective-C iPhone 应用程序的 Storyboard 中的两个 ViewController 之间传递一个对象。(iOS 5/ XCode 4)

第一个 ViewController 是一个带有注解的地图（每个注解对象称为 MyLocation，它由包含 MyLocationView 的地图显示）。用户单击注释，出现标注，然后用户单击右箭头加载注释详细视图（新的 ViewController），该视图显示有关所选注释的更多详细信息。

我已经定义了一个 segue 'SegueAnnotationDetail'，它在主视图控制器和注释细节视图控制器之间移动。

我在主视图控制器中定义了一个实例变量来保存用户单击的注释，然后我将把它传递给注释详细信息视图（ViewController.h）：

```
@interface ViewController : UIViewController <MKMapViewDelegate> {
    MKAnnotationView *selectedAnnotation;
} 
```

所以在主视图控制器（ViewController.m）中我有以下内容：

```
-(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view
calloutAccessoryControlTapped:(UIControl *)control
{
    selectedAnnotation = view;

    [self performSegueWithIdentifier:@"SegueAnnotationDetail" sender:self];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"SegueAnnotationDetail"])
    {
        LocationDetailViewController *vc = [segue destinationViewController];

        [vc setLocation:selectedAnnotation];
    }
} 
```

然后在 LocationDetailViewController （这是显示每个注释的详细信息的第二个视图控制器），我有

```
@interface LocationDetailViewController : UIViewController

@property MKAnnotationView* location;

@end 
```

每个注解都是一个 MKPinAnnotationView 并且创建如下，在 viewForAnnotation 方法中，也在 ViewController.m 中

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {

    static NSString *identifier = @"MyLocation";

    MKPinAnnotationView *annotationView = (MKPinAnnotationView *) [_mapView dequeueReusableAnnotationViewWithIdentifier:identifier];

    // removed some code related to animation view queue here for simplicity

    annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];

    annotationView.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

    return annotationView;

} 
```

问题是，当它运行时，应用程序会在以下行崩溃：

```
[vc setLocation:selectedAnnotation]; 
```

**更新**

控制台中的错误消息是：

```
2012-08-26 18:33:10.615 ArrestsPlotter[79918:c07] -[UIViewController setLocation:]: unrecognized selector sent to instance 0x6ea0b60
2012-08-26 18:33:10.615 ArrestsPlotter[79918:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIViewController setLocation:]: unrecognized selector sent to instance 0x6ea0b60'
*** First throw call stack:
(0x165e022 0x12cecd6 0x165fcbd 0x15c4ed0 0x15c4cb2 0x3977 0x85c4be 0x4f95ab 0x385b 0x361f8c 0x36d8ba 0x165fe99 0x43414e 0x4340e6 0x4daade 0x4dafa7 0x4da266 0x4593c0 0x4595e6 0x43fdc4 0x433634 0x1da5ef5 0x1632195 0x1596ff2 0x15958da 0x1594d84 0x1594c9b 0x1da47d8 0x1da488a 0x431626 0x231d 0x2285) 
```

终止称为抛出异常（lldb）

当我注释掉有问题的行时，该应用程序运行正常，尽管没有在详细信息页面上显示正确的信息。

WTF我做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T18:14:01.523

好的，我自己回答了。我会在这里发布答案，因为它在互联网上并不那么清楚。

要将视图控制器文件与情节提要中的指定场景关联，请单击场景，然后使用属性检查器，选择自定义类并选择要使用的类。

这就是将视图控制器与场景链接的方式。这就是导致问题的原因（请参阅对第一个答案的评论）

# objective-c - 属性未找到类型的对象

> ID：12129729
> 
> 赞同：0
> 
> 时间：2012-08-26T11:27:41.953
> 
> 标签：objective-c, ios

这是我尝试在 IOS 中构建的第一个应用程序，但我遇到了一些问题。虽然我在这里阅读了类似的主题，但我无法找到答案。

好吧，这是我的课程：

Homeview.h

```
@interface HomeView : UIViewController{

    NSString *parsed_date;
}

@property (nonatomic,retain) NSString *parsed_date;

@end 
```

Homeview.m

```
@synthesize parsed_date;
parsed_date=[res objectForKey:@"date"]; 
```

我希望在我的主页视图中正常打印的日期在其他视图中传递。

这是我的另一堂课：

其他类.h

```
#import <UIKit/UIKit.h>

@interface OtherView : UIViewController{
    NSString* tracks_date;
}
@property (nonatomic,retain) NSString* tracks_date;
@end 
```

其他类.m

```
#import "OtherView.h"
#import "HomeView.h"

@interface OtherView ()

@end

@implementation OtherView
@synthesize tracks_date;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    //preview value of other class
    NSLog(@"Dated previed in OtherView: %@", HomeView.parsed_date); //HERE IS THE ERROR
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

这是我的错误：

```
property parsed_date not found on object of type "HomeView" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T11:36:13.800

问题是您没有使用 HomeView 的实例。您需要实例化 HomeView，然后您可以通过新实例访问该属性。

它应该看起来像这样：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Do any additional setup after loading the view.
    HomeView *homeView = [[HomeView alloc] init];
    homeView.parsed_date = ...assign a value to the property

    //preview value of other class
    NSLog(@"Dated previed in OtherView: %@", homeView.parsed_date); //read the value
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-27T05:41:06.353

如果您真的确定，您已经正确声明了所有内容，但是您不断收到“找不到属性”，那么：

**确保所有文件都在同一个文件夹中。**

因为这就是发生在我身上的事。我有两个项目文件夹，其中一个用于测试。我不小心将一些文件从测试文件夹拖到我的主要 xcode 项目中。仅使用旧属性时编译正常，但总是出现“找不到属性”错误，因为测试文件夹中的文件看不到我添加到主项目中的新属性。

希望这对将来的某人有所帮助。

# plone - Plone 4：在第一次登录时使用个人信息创建一个文件夹

> ID：12129732
> 
> 赞同：1
> 
> 时间：2012-08-26T11:28:04.933
> 
> 标签：plone

我们知道，第一次登录 Plone 可以为每个用户创建一个文件夹。如果用户名是“用户”，则文件夹的名称将是“用户”。文件夹名是可以编辑的，但是对于很多用户来说这个操作实在是太疯狂了。我已经自定义了注册表单并添加了新字段。我可以使用此字段之一为该文件夹命名吗？例如，在注册表中有一个名为“公司名称”的字段和用户类型“超级公司”。目标是在第一次登录时，Plone 必须创建名为“supercompany”的文件夹。PLone 4可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T21:33:17.777

总有一种方法，因为 Plone 是 100% 开源软件，并且没有您无法更改的部分。

成员文件夹创建的相关代码在这里：

[https://github.com/plone/Products.PlonePAS/blob/master/Products/PlonePAS/tools/membership.py#L271](https://github.com/plone/Products.PlonePAS/blob/master/Products/PlonePAS/tools/membership.py#L271)

在您的情况下，我建议一个带有猴子补丁的简单自定义插件应该为您完成。

[http://collective-docs.readthedocs.org/en/latest/misc/monkeypatch.html](http://collective-docs.readthedocs.org/en/latest/misc/monkeypatch.html)

# wicket - 实施自定义授权操作检票口

> ID：12129740
> 
> 赞同：0
> 
> 时间：2012-08-26T11:29:17.200
> 
> 标签：wicket

当页面上发生某些操作时，我想在我的网络应用程序中进行身份验证。例如，用户单击“添加到购物车”按钮，如果他尚未通过身份验证，则会显示登录页面。登录后返回到上一页。我可以在检票口中使用什么来实现这一点？

PS 在产品页面上，我还链接了“立即购买”，它导航到带有 @AuthorizeInstantiation("USER") 注释的购买页面。这个链接工作得很好。

我认为 MetaDataRoleAuthorizationStrategy 可以用来在“添加到购物车”上做同样的事情。但可用的操作只有 ENABLE 和 RENDER。我可以将自己的 Action 添加到组件中，但是如何将 Action 与组件的 onClick() 方法相关联？

---已编辑---

不知道在哪里写，所以我编辑了帖子。我尝试了 Christoph Leiter 的解决方案：

```
add(link = new AjaxFallbackLink("add2cart") {
 @Override
  public void onClick(AjaxRequestTarget target) {
   if (!CynephoneSession.get().isSignedIn()) {
    throw new RestartResponseAtInterceptPageException(SignIn.class);
   }
   user.addItem(item.copy());
   target.add(cartPanel);
  }
}); 
```

但是在我以某种方式单击此链接后，我在 Firefox 中看到了带有更新的 cartPanel 的 ajax 响应。我的意思是它向我显示带有源代码的页面：

```
<?xml version="1.0" encoding="UTF-8"?><ajax-response><component id="cart2" ><![CDATA[<div class="cart" wicket:id="cart" id="cart2">
<span wicket:id="total">11 800</span> <img src="./resource/top.Top/img/rouble-ver-1346040298957.gif"/><br/>
<img src="./resource/top.Top/img/good-ver-1346040298926.gif"/>х<span wicket:id="quantity">2</span>
</div>]]></component></ajax-response> 
```

不明白它是如何通过异常...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T15:03:07.037

我不是 authroles 模块的专家，所以我不确定是否可以添加另一个动作来完成你想要的。我会使用类似的东西：

```
new AjaxLink<Product>("addToCart", product) {
    @Override
    public void onClick(AjaxRequestTarget target) {
        if (!AbstractAuthenticatedWebSession.get().isSignedIn()) {
            // code to remember product to add to cart in session
            throw new RestartResponseAtInterceptPageException(LoginPage.class);
        }
        // continue normally
    }
}; 
```

在您的`LoginPage`/`Session`中，您应该检查会话中是否有产品在用户成功通过身份验证时应该添加到购物车中。然后调用`continueToOriginalDestination`以便 Wicket 显示上一页（或`setResponsePage(CartPage.class)`）。

可能有比“手动”执行此操作更好的方法，但这应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T17:57:58.523

您还应该看一下 SimplePageAuthorizationStrategy 类。此类已经检查了用户在请求特定页面类时是否已签名，如果他未登录，它会自动将他重定向到登录页面。
我还将使用 PageParameters 将我们必须添加到的产品的 ID 传递给 CartPage大车。通过这种方式，您可以避免将所选产品存储到会话中并在用户成功登录后检索它。

# sql - 如何使用单个插入语句添加多行。使用描述中的方式

> ID：12129741
> 
> 赞同：0
> 
> 时间：2012-08-26T11:29:23.593
> 
> 标签：sql, oracle10g

```
SQL> insert into patient
2  values('&pno','&pname','&title',&dob,&children,'&gp');
Enter value for pno: p3
Enter value for pname: mansell
Enter value for title: mr
Enter value for dob: 23-may-61
Enter value for children: 2
Enter value for gp: Dr.Williams
old   2: values('&pno','&pname','&title',&dob,&children,'&gp')
new   2: values('p3','mansell','mr',23-may-61,2,'Dr.Williams')
values('p3','mansell','mr',23-may-61,2,'Dr.Williams')

ERROR at line 2:
ORA-00984: column not allowed here 
```

这曾经工作。我真的不明白如何使它工作..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T13:00:15.400

这个错误几乎肯定是由列引起的`dob`。您不是在插入日期或日期文字，而是在插入一个随机字符串，该字符串被解释为列名。

作为一般规则，*始终明确地将日期转换为日期*。

您在 SQL*Plus 中有[2 个选项](http://www.sqlfiddle.com/#!4/e1ac7/1)，您可以插入[ANSI 日期文字](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements003.htm#SQLRF51062)

```
insert into patient (dob)
values ( date '&dob') 
```

`&dob`形式在哪里`YYYY-MM-DD`。

您还可以使用该函数将列显式转换为日期[`to_date`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions203.htm#SQLRF06132)。

```
insert into patient (dob)
values ( to_date('&dob','yyyy-mm-dd')) 
```

`&dob`的形式在哪里`yyyy-mm-dd`。这被称为日期时间格式模型，您可以使用其中[一长串。](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements004.htm#i34924)

所有这些都假设该列`dob`是一个*date*。如果不是，请将其更改为一个。将日期存储为字符串是不值得的。我强烈建议始终明确存储世纪。Oracle 如何知道您是在谈论 2067 年还是 1967 年？

Guffa 的回答会处理您问题的多行元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T11:46:33.943

***ORA-00984 错误***

**当您尝试**在INSERT 语句的**VALUES**子句中包含列名时，最常发生此错误。

然后

您可以检查您插入的值和表的列名，并确保它们不一样。

参考

[http://www.techonthenet.com/oracle/errors/ora00984.php](http://www.techonthenet.com/oracle/errors/ora00984.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T11:54:30.790

您以分号结束查询，之后您将无法继续添加到查询中。

您不能`value`在 之后添加更多语句`insert`，但可以使用`insert all`：

```
insert all
into patient values('&pno','&pname','&title',&dob,&children,'&gp')
into patient values('&pno','&pname','&title',&dob,&children,'&gp')
into patient values('&pno','&pname','&title',&dob,&children,'&gp')
select * from dual; 
```

（可能每行需要不同的参数名称。）

您还可以从 a 插入`select`：

```
insert into patient
select '&pno','&pname','&title',&dob,&children,'&gp' from dual
union all
select '&pno','&pname','&title',&dob,&children,'&gp' from dual
union all
select '&pno','&pname','&title',&dob,&children,'&gp' from dual; 
```

参考：[http ://docs.oracle.com/cd/B13789_01/server.101/b10759/statements_9014.htm#SQLRF01604](http://docs.oracle.com/cd/B13789_01/server.101/b10759/statements_9014.htm#SQLRF01604)

# c# - TabControl 在每个选项卡上具有相同的控件

> ID：12129744
> 
> 赞同：0
> 
> 时间：2012-08-26T11:30:26.913
> 
> 标签：c#, winforms, .net-3.5, tabcontrol

我想在所有页面上都有相同的控件`TabControl`。

我的表格中`tabControl`没有任何东西。`tabPages`在同一个表单中，我有一些我想自动添加到每个`tabPage`. 并与他们合作。我怎样才能做到这一点？

我想要这样的东西：

```
 public chatForm(string chatID, object conversation)
    {
        InitializeComponent();

        createNewTab(chatID, conversation);
    }

    internal void createNewTab(string chatID, object conversation)
    {
        ISIMtabPage newTab = new ISIMtabPage();
        newTab.Text = Converter.getContactName(conversation);
        newTab.Name = chatID;

        newTab.conversation = conversation;

        newTab.avatarBox.Image = new Bitmap("graphics\\anonymousAvatar.png");// how can I work with this control in the selected tab? 
```

我怎样才能做到所有控件都将自动出现在每个控件中，我该`tabPage`如何使用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:22:18.290

> 我有自己的类扩展 TabPage 组件。我只是添加我的属性。但我希望在所有页面上都有相同的组件。如果我调用 addMessage 方法，它只是将文本添加到 tabPage[id].conversationTextBox.Append(message); [...] 如果我单击另一个选项卡，它将显示其他当前对话。我不明白，也不知道该怎么做。– 斯兹达沃斯

这是因为原始类型将通过值传递，通过引用复杂！我找到了这个关于引用和值类型的例子，希望你能从中学习[1]。读完之后试试这个：

> @sczdavos 通常您创建一个包含您喜欢使用的所有属性的类，并在您的视图中共享该实例。[...]

[1] [http://www.codeproject.com/Articles/32029/Reference-and-Value-Types-in-C](http://www.codeproject.com/Articles/32029/Reference-and-Value-Types-in-C)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T12:21:09.067

我会这样做（代码用于 WPF 解决方案，忽略了 WinForm-Tag。但应该类似。）：

MyTabItem.xaml.cs

```
public partial class MyTabItem : TabItem, INotifyPropertyChanged
{
    #region PropertyChanged

    public event PropertyChangedEventHandler PropertyChanged;

    void OnPropertyChanged(string propName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propName));
    }

    #endregion

    #region Properties

    private string myTitle;
    public string MyTitle
    {
        get { return myTitle; } 
        set 
        {
            myTitle = value;
            OnPropertyChanged("MyTitle");
        }
    }

    private string myContent;
    public string MyContent { 
        get { return myContent; } 
        set 
        { 
            myContent = value;
            OnPropertyChanged("MyContent");
        } 
    }

    #endregion

    public MyTabItem()
    {
        InitializeComponent();
    }
} 
```

MyTabItem.xaml

```
<TabItem x:Class="WpfApplication1.MyTabItem"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            DataContext="{Binding RelativeSource={RelativeSource self}}">

    <TabItem.Header>
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding MyTitle}"/>
        </StackPanel>
    </TabItem.Header>

    <TabItem.Content>
        <Grid>
            <TextBlock Text="{Binding MyContent}" Background="Azure"/>
        </Grid>
    </TabItem.Content>
</TabItem> 
```

主窗口.xaml.cs

```
public MainWindow()
{
    InitializeComponent();

    var tab = new MyTabItem {MyContent = "Content", MyTitle = "Title"};

    MyTabControl.Items.Add(tab);
} 
```

主窗口.xaml

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid>
        <TabControl x:Name="MyTabControl"/>
    </Grid>
</Window> 
```

# android - SlqiliteDatabase.Insert() 上的错误代码 19；

> ID：12129746
> 
> 赞同：0
> 
> 时间：2012-08-26T11:30:44.123
> 
> 标签：android, sqlite

我很难在这里找到错误，我必须寻求帮助。

我正在创建 ContentValues 并使用这个简单的方法插入它们：

```
public long insertValues(String tableName, ContentValues values) {      
    return SQLDb.insert(tableName, null, values);   
} 
```

方法确实有效，我多次使用它向其他表插入值，只有一个表存在问题，其结构如下图所示：

![数据库结构图片](../Images/3acf05001257dcc4c4780a8a8b01528c.png)

方法失败，因为它返回 id -1。我之前做过 contentValues.toString() 并得到了这个：

```
repeatability=monthly value=1800.0 category_id=17 _id=1 kind=inc name=ECCO 
```

重要笔记：

*   插入时表为空

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T12:14:25.210

问题可能出在表中具有`NOT NULL`约束的某些字段中。

# javascript - 使用javascript将不透明度设置为父div

> ID：12129747
> 
> 赞同：1
> 
> 时间：2012-08-26T11:30:51.717
> 
> 标签：javascript

我已经使用 javascript 开发了 android phonegap 应用程序。我有一个父 div 和一个子 div javascript或css。

HTML 代码：

```
<div id="parent">
 <input type="button" value="open"/>
 <div id="child">
 </div>
  </div> 
```

请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:31:47.897

我向你推荐这个：

CSS：

```
#parent.faded {
  opacity: 0.5;
  // more css
} 
```

javascript:

```
obj.onclick = function() {
  document.getElementById('parent').className = 'faded';
} 
```

# iphone - 访问 iPhone 日历事件

> ID：12129748
> 
> 赞同：1
> 
> 时间：2012-08-26T11:30:58.100
> 
> 标签：iphone, ios, ios5, calendar

在我的 Iphone 应用程序中，我想检查内置的日历应用程序以了解即将发生的事件。

例如，当用户应该在开会时，目的是使应用程序静音。

不过，我在这件事上找不到任何东西，因为搜索结果只提供了一种实现您自己的日历的方法

那么是否有可能获得此访问权限（并且可能有一个我找不到的简短示例或链接）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T11:44:31.887

不，你不能让 iPhone 静音

由于物理硬件开关可用，因此没有软件方法可以使整个设备静音。

在他/她想将其静音之前，您无需与框架抗争。

如果要查看即将发生的事件，则需要通过[Event store](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKEventStoreClassRef/Reference/Reference.html)和[EKCalendar](http://developer.apple.com/library/ios/#documentation/DataManagement/Reference/EKCalendarClassRef/Reference/Reference.html)。

我猜你不能在没有他的许可的情况下访问你的应用程序中的用户事件，因为[这个](https://stackoverflow.com/a/6417759/1278036)答案说

并且有一个来自苹果的[Simple EK Demo](http://developer.apple.com/library/ios/#samplecode/SimpleEKDemo/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010160)，它可以帮助你..

干杯...

# c# - Cancellation with WaitHandle

> ID：12129749
> 
> 赞同：16
> 
> 时间：2012-08-26T11:30:58.710
> 
> 标签：c#, task-parallel-library

I am reading a lot on TPL and found out the ways in which we can use the cancellation mechanism. But i got stuck with WaitHandle.

If i want to cancel the task, i can define the CancellationTokenSource and pass it along with the Task and i can use ThrowIfCancellationRequested method to cancel the task.

My question is when i need to use WaitHandle for cancellation purpose, and why simple cancellation can't work in that situation?

**EDIT** MSDN link : [http://msdn.microsoft.com/en-us/library/dd997364](http://msdn.microsoft.com/en-us/library/dd997364) .. see listening by using WaitHandle..

Just learning TPL..

Please help..

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-26T12:02:04.763

假设您有一个[ManualResetEventSlim](http://msdn.microsoft.com/en-us/library/system.threading.manualreseteventslim)类型的信号，并且想要等待信号被设置、操作被取消或操作超时。然后你可以使用[Wait方法](http://msdn.microsoft.com/en-us/library/dd384811)如下：

```
if (signal.Wait(TimeSpan.FromSeconds(10), cancellationToken))
{
    // signal set
}
else
{
    // cancelled or timeout
} 
```

但是如果你有一个[ManualResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent)类型的信号，就没有这样的 Wait 方法。在这种情况下，您可以使用[CancellationToken](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtoken.aspx)的 [WaitHandle](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtoken.waithandle.aspx)和[WaitHandle.WaitAny 方法](http://msdn.microsoft.com/en-us/library/cc190233.aspx)来达到相同的效果：

```
if (WaitHandle.WaitAny(new WaitHandle[] { signal, cancellationToken.WaitHandle },
                       TimeSpan.FromSeconds(10)) == 0)
{
    // signal set
}
else
{
    // cancelled or timeout
} 
```

# mysql - SQL Query - Get Name from another table

> ID：12129757
> 
> 赞同：4
> 
> 时间：2012-08-26T11:31:49.383
> 
> 标签：mysql

Basically I have 2 tables: `uclk_user` and `uclk_task`

`uclk_user` table has `user_id`, `name`, `postcode`

`uclk_task` table has `user_id`, `job_id`, `description`, `fully_completed`, `date_due`

I want to include the user name from the `uclk_user` in my task query below... Obviously user_id is the key.

```
select job_id, user_id, fully_completed, description, date_due
from uclk_task
WHERE date_due <= NOW() AND fully_completed = 0
ORDER BY date_due ASC 
```

How this should be done?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T11:34:45.670

Use `JOIN` to select from multiple tables on a common criteria

```
SELECT t.job_id, t.user_id, t.fully_completed, t.description, t.date_due, u.name
FROM uclk_task t
INNER JOIN uckl_user u
ON t.user_id = u.user_id
WHERE t.date_due <= NOW() AND t.fully_completed = 0
ORDER BY t.date_due ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T11:39:33.887

try this

```
 select job_id, user_id, fully_completed, description, date_due
    from uclk_task
    Left join
    on date_due <= NOW() AND fully_completed = 0
    ORDER BY date_due ASC 
```

# json - Drupal 将 JSON 解析为 iPhone

> ID：12129758
> 
> 赞同：1
> 
> 时间：2012-08-26T11:31:55.793
> 
> 标签：json, drupal, drupal-7, drupal-modules

Bellow 是将 json 解析为 ios 设备的自定义模块的代码。事情在我的drupal页面上，我使用“nodehierarcy”模块创建了一个节点层次结构。我有两种类型的自定义内容——电话和事件。对于每部电话，我都有一个要解析的事件列表。下面代码的问题在于它解析了所有作业，而不是按设备对它们进行分类。json 输出 url 为：“xyz.com/job/json”。但我想要类似的东西`xyz.com/?q=node/4/json`，节点 4 代表电话。有任何想法吗？

```
function job_menu() {
    $items =array();

    $items['job/json'] = array(
        'title' => 'Json callback',
        'page callback' => 'message_json_page',
        'access arguments' => array('access content'),
        'type' => MENU_CALLBACK,
    );
    return $items;   
}

function message_json_page(){
    $sql = "SELECT n.nid , n.title as name FROM {node} n 
            WHERE n.status = 1 and n.type = :type";
    $result = db_query($sql, array(':type'=>'job'))->fetchAll();
    $json_value = json_encode($result);
    print $json_value;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T13:45:25.620

Drupal 中的路径有两种方式之一……如果您启用了干净的 URL，那么您将访问类似`mysite.com/node/4/json`. 如果您没有干净的 URL，您将访问同一页面`mysite.com?q=node/4/json`（这正是您所追求的）。

请记住，您将为 设置一个菜单项`node/*/json`，并使用一些节点层次结构内部函数来获取页面回调中子节点的列表：

```
function job_menu() {
  $items['node/%node/json'] = array(
    'title' => 'Json callback',
    'page callback' => 'message_json_page',
    'page arguments' => array(1),
    'access arguments' => array('access content'),
    'type' => MENU_CALLBACK,
  );
  return $items;
}

function message_json_page($node) {
  $children_links = _nodehierarchy_get_children_menu_links($node->nid, FALSE);

  $nids = array();
  foreach ($children_links as $child_link) {
    list(, $nid) = explode('/', $child_link['link_path']);
    $nids[] = $nid;
  }

  $sql = "SELECT n.nid , n.title as name FROM {node} n WHERE n.nid in (:nids) AND n.status = 1 and n.type = :type";
  $result = db_query($sql, array('nids' => $nids, ':type'=>'job'))->fetchAll();

  $json_value = json_encode($result);
  print $json_value;
} 
```

# file - 直接 vs 顺序 vs 索引顺序 vs 分区文件访问

> ID：12129759
> 
> 赞同：-2
> 
> 时间：2012-08-26T11:32:00.613
> 
> 标签：file, filesystems

有人可以告诉我之间的区别：

*   直接文件访问（又名随机文件访问）
*   顺序文件访问
*   索引顺序文件访问
*   分区文件访问

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T11:58:05.473

*“随机访问*”的一个更好的术语是“*直接访问*”，因为硬件允许您在磁盘上的任何位置检索数据。它真的很有用！至于“*顺序访问*”，硬件只能从头到尾遍历每条数据，虽然顺序检索接近该序列开头的数据可能会更快，但如果如果您想在该序列结束时检索一条数据，因为该过程必须遍历每条信息。

这真的很有意义吗..？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T12:30:02.957

“随机”意味着您可以按任何顺序获取文件的任何部分。因此，例如，您可以在开始之前阅读中间部分。

“顺序”意味着您必须首先阅读文件的第一部分，然后再阅读第二部分，然后是第三部分，等等......

从操作系统的角度来看，所有文件都是“随机的”。¹这是您从应用程序访问文件的方式，使其“随机”或“顺序”。文件的格式可以针对一种或另一种访问进行优化，例如文本通常是“顺序的”，而数据库文件往往是高度“随机的”。

* * *

*¹至少在硬盘上。存储在磁带上的文件实际上是物理顺序的，但磁带通常仅用于归档，无论如何您不太可能直接处理它们。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-26T13:30:11.730

这取决于您的抽象级别，以及在您的抽象中构成“文件”的基本元素是什么。（将“文件”视为“ `File<T>`”，其中 T 最常见的是字符）

一般而言，“文件”是“元素序列”。“随机”意味着您可以以任何顺序访问任何位置的任何元素（本质上，您可以跳转到序列中）。“顺序”意味着要访问给定位置，您必须首先扫描前面的任何内容。

这是否来自物理限制，或软件限制或“数据结构约束”，取决于文件抽象建模的内容以及物理“元素序列”和您之间堆叠的抽象层。

磁带上的文件按顺序存储和读取。磁盘上的文件被原子顺序读取，但“原子”（磁盘簇）可以单独查找，因此允许更高级别的随机访问抽象。匹配基于时间的事件序列（如通信套接字）的文件通常是顺序的（时间不能倒带），但双向通信可用于实现允许随机访问的协议（想想 NFS）。内存存储的序列具有本地随机访问，但如果元素具有可变长度，或者以不受地址原始算法确定的方式链接，则只能进行顺序访问。

这个问题看起来微不足道，但如果我们不将我们的域仅限于磁盘存储的文件……就会出现大量案例。

# c++ - 将 emplace 与 std::fill 等算法一起使用

> ID：12129760
> 
> 赞同：15
> 
> 时间：2012-08-26T11:32:01.870
> 
> 标签：c++, stl, c++11, stl-algorithm

我使用`vector::emplace_back`它是为了避免在填充向量时构造时间对象。这里有一个简化版本：

```
class Foo {
public:
    Foo(int i, double d) : i_(i), d_(d) {}
    /* ... */
};

std::vector<Foo> v;
v.reserve(10);
for (int i = 0; i < 10; i++)
    v.emplace_back(1, 1.0); 
```

但我想`std::fill_n`改用：

```
v.reserve(10);
std::fill_n(std::back_inserter(v), 10, Foo(1, 1.0)); 
```

但是，通过这种方式，将创建临时副本。我不知道如何`emplace`在这种情况下使用。我想我需要类似的东西`std::back_emplacer`，但我找不到这样的东西。那是 C++11 的一部分，但还没有在 GCC 中实现吗？如果它不是 C++11 的一部分，还有其他方法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-26T16:14:52.740

通常使用元组来简化传递可变数量的项目（在本例中是要转发到的参数`emplace_back`），并[使用一些技巧](https://stackoverflow.com/questions/7858817/unpacking-a-tuple-to-call-a-matching-function-pointer/7858971#7858971)将元组解包回来。因此，可以通过要求用户在有意义的地方`back_emplacer`使用元组工厂函数（其中一个`std::make_tuple`, `std::tie`, ）来编写实用程序：`std::forward_as_tuple`

```
#include <type_traits>
#include <tuple>

// Reusable utilites

template<typename T>
using RemoveReference = typename std::remove_reference<T>::type;
template<typename T>
using Bare = typename std::remove_cv<RemoveReference<T>>::type;

template<typename Out, typename In>
using WithValueCategoryOf = typename std::conditional<
    std::is_lvalue_reference<In>::value
    ,  typename std::add_lvalue_reference<Out>::type
    , typename std::conditional<
        std::is_rvalue_reference<Out>::value
        , typename std::add_rvalue_reference<Out>::type
        , Out
    >::type
>::type;

template<int N, typename Tuple>
using TupleElement = WithValueCategoryOf<
    typename std::tuple_element<N, RemoveReference<Tuple>>::type
    , Tuple
>;  

// Utilities to unpack a tuple
template<int... N>
struct indices {
    using next = indices<N..., sizeof...(N)>;
};

template<int N>
struct build_indices {
    using type = typename build_indices<N - 1>::type::next;
};
template<>
struct build_indices<0> {
    using type = indices<>;
};

template<typename Tuple>
constexpr
typename build_indices<std::tuple_size<Bare<Tuple>>::value>::type
make_indices() { return {}; }

template<typename Container>
class back_emplace_iterator {
public:
    explicit back_emplace_iterator(Container& container)
        : container(&container)
    {}  

    template<
        typename Tuple
        // It's important that a member like operator= be constrained
        // in this case the constraint is delegated to emplace,
        // where it can more easily be expressed (by expanding the tuple)   
        , typename = decltype( emplace(std::declval<Tuple>(), make_indices<Tuple>()) )
    >
    back_emplace_iterator& operator=(Tuple&& tuple)
    {
        emplace(*container, std::forward<Tuple>(tuple), make_indices<Tuple>());

        return *this;
    }

    template<
        typename Tuple
        , int... Indices  
        , typename std::enable_if<
            std::is_constructible<
                typename Container::value_type
                , TupleElement<Indices, Tuple>...
            >::value
            , int
        >::type...
    >
    void emplace(Tuple&& tuple, indices<Indices...>)
    {
        using std::get;
        container->emplace_back(get<Indices>(std::forward<Tuple>(tuple))...);
    }

    // Mimic interface of std::back_insert_iterator
    back_emplace_iterator& operator*() { return *this; }
    back_emplace_iterator& operator++() { return *this; }
    back_emplace_iterator operator++(int) { return *this; }

private:
    Container* container;  
};

template<typename Container>
back_emplace_iterator<Container> back_emplacer(Container& c)
{ return back_emplace_iterator<Container> { c }; } 
```

提供了代码[演示](http://liveworkspace.org/code/627275471ee9471989dcfaceafe81af2)。在您的情况下，您想致电`std::fill_n(back_emplacer(v), 10, std::forward_as_tuple(1, 1.0));`(`std::make_tuple`也是可以接受的)。您还希望使用通常的迭代器来完成该功能——我为此推荐 Boost.Iterators。

然而，我必须真正强调的是，这样的实用程序在与`std::fill_n`. 在您的情况下，它将保存临时的构造`Foo`，有利于引用元组（如果您要使用值的元组`std::make_tuple`）。我把它留给读者去寻找其他`back_emplacer`有用的算法。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-26T11:42:40.223

你是对`back_emplacer`的，标准中没有。你可以自己完美地写一个，但是为什么？

当您调用 时`emplace_back`，您必须为构造函数（任何构造函数）提供参数：`vec.emplace_back(1, 2)`例如。但是，您不能在 C++ 中任意传递参数元组，因此`back_emplacer`仅限于一元构造函数。

在 的情况下`fill_n`，您提供一个将被*复制*的参数，然后两者`back_inserter`和`back_emplacer`将使用相同的参数调用相同的复制构造函数。

请注意，有`generate`和`generate_n`算法来构建新元素。但同样，任何临时副本都可能会被忽略。

因此我认为对 a 的需求`back_emplacer`相当轻，主要是因为语言不支持多个返回值。

**编辑**

如果您查看下面的评论，您会意识到使用组合可以编写一种`std::forward_as_tuple`机制。感谢 Luc Danton 的突破。`std::is_constructible``back_emplacer`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-11-03T18:42:05.097

```
class Foo {
public:
  Foo(int i, double d) : i_(i), d_(d) {}
};

std::vector<Foo> v;
v.reserve(10);
std::generate_n(std::back_inserter(v), 10, [&]()->Foo{ return {1, 1.0}; }); 
```

RVO 允许将函数的返回值直接省略到将要存储的位置。

虽然在逻辑上创建了一个临时文件，但实际上没有创建临时文件。如果需要，您可以访问周围范围内的所有变量来决定如何创建元素，而不仅仅是常量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-26T11:37:50.490

不会制作任何“临时副本”。会有一个临时的，你传递给的那个`fill_n`。它将被复制到每个值中。

即使有一个`back_emplacer`，你会用什么来称呼它？`emplace`函数家族采用构造函数参数；`fill_n`将*对象*复制到迭代器中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-10T17:16:02.063

我最近向`emplace_iterator`folly 库提交了一个类和相关的实用函数。我相信它解决了原始问题并支持自动解压缩`std::tuple`传递给`operator=`.

编辑：更新链接：[https ://github.com/facebook/folly/blob/master/folly/container/Iterator.h](https://github.com/facebook/folly/blob/master/folly/container/Iterator.h)

```
class Widget { Widget(int, int); };

std::vector<Widget> makeWidgets(const std::vector<int>& in) {
  std::vector<Widget> out;
  std::transform(
      in.begin(),
      in.end(),
      folly::back_emplacer(out),
      [](int i) { return folly::make_emplace_args(i, i); });
  return out;
} 
```

`folly::make_emplace_args`类似于`std::make_tuple`但会导致将其参数完美地转发给`Widget`构造函数。（`std::make_tuple`类似的可能会导致额外的副本，并且不保留左值与右值的类型。）在这个特定的例子中，`std::make_tuple`虽然使用会产生相同的效果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-08T13:44:17.597

我在上面看到了@LucDanton 的答案（[https://stackoverflow.com/a/12131700/1032917](https://stackoverflow.com/a/12131700/1032917)），但我仍然看不出让代码过于复杂的意义（除了它是在 2012 年写的，但即使鉴于...）。无论如何，我发现以下代码与 Luc 的代码一样有效：

```
template <typename Container>
class back_emplace_iterator
{
public:
    explicit back_emplace_iterator(Container & container)
        : container(std::addressof(container))
    {}

    template <typename... Args>
    back_emplace_iterator & operator=(Args &&... args)
    {
        static_assert(std::is_constructible_v<typename Container::value_type, Args...>, "should be constructible");

        assert(container);
        container->emplace_back(std::forward<Args>(args)...);

        return *this;
    }

    // Mimic interface of std::back_insert_iterator
    back_emplace_iterator & operator*()
    {
        return *this;
    }
    back_emplace_iterator & operator++()
    {
        return *this;
    }
    back_emplace_iterator operator++(int)
    {
        return *this;
    }

private:
    Container * container;
};

template <typename Container>
back_emplace_iterator<Container> back_emplacer(Container & c)
{
    return back_emplace_iterator<Container>{c};
} 
```

使用 C++17 中的 CTAD，您甚至可以在不显式提供模板参数的情况下摆脱`back_emplacer`和编写。`back_emplace_iterator(my_container)`

# c# - 在 asp.net 中插入日期时出错

> ID：12129763
> 
> 赞同：1
> 
> 时间：2012-08-26T11:32:20.377
> 
> 标签：c#, asp.net, sql-server-2008, ado.net

通过 asp.net 将日期插入 SQL Server 2008 时发生错误。

插入语句

```
Insert into comment(CommentFrom, CommentTo, Comment, Cmntonscrap, Cmnttime) 
Values('" + Session["UserName"] + "','" + email.Text.ToString() + "','"  + 
       txt.Text.ToString().Trim() + "','" + cscrap.Text.ToString().Trim()  + 
       "','" + DateTime.Now.ToString().Trim() + "')"; 
```

错误：

> *字符串或二进制数据将被截断，语句正在终止*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T11:34:42.657

你的问题不在于日期。
它的字符串数据对于您试图将数据插入的列（可能是 varchar）来说太大了。

我会检查你的长度，`Comment`看看`txt.Text`是否可以插入数据。

为`datetime`您的`DateTime`. 在文本列中存储日期会[带来很多麻烦](http://msmvps.com/blogs/jon_skeet/archive/2009/11/02/omg-ponies-aka-humanity-epic-fail.aspx)。

*   它需要更多的存储空间。
*   搜索这些数据将非常困难。
*   您将永远无法更改时区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T11:35:25.357

这意味着您为数据库表中的日期列或任何其他列（假设 varchar()）提供的字段的数据类型小于您尝试插入的大小。增加您指定的尺寸

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T11:46:49.997

连接 sql 语句是一个坏方法**（安全问题）**，您的数据库将成为**Sql 注入**的简单目标。

我建议您使用存储过程来添加或修改您想要的数据，并使用 SqlParameters 从用户界面发送输入。

可能有所帮助：[如何创建存储过程](http://www.mssqltips.com/sqlservertutorial/162/how-to-create-a-sql-server-stored-procedure-with-parameters/)

这是一个代码示例，向您展示如何使用 C# 调用带参数的存储过程

```
//The method that call the stored procedure
public void AddComment()
{
    using(var connection = new SqlConnection("ConnectionString"))
    {
        connection.Open();
        using(var cmd = new SqlCommand("storedProcedure_Name", connection) { CommandType = CommandType.StoredProcedure })
        {
            cmd.Parameters.AddWithValue("@CommentFrom", commandFrom);
            cmd.Parameters.AddWithValue("@CommentTo", commentTo);
            //...And  so on

            cmd.ExecuteNonQuery();
        }
    }
} 
```

关于如何创建存储过程的示例

```
CREATE PROCEDURE storedProcedure_Name
    -- Add the parameters for the stored procedure here
    @CommentFrom nvarchar(255) = NULL,
    @CommentTo nvarchar(255) = NULL
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here
    INSERT INTO Comments (CommentFrom, CommentTo) VALUES(@CommentFrom, @CommentTo)
END
GO 
```

# clearcase-ucm - UCM Clearcase中的“交付到替代目标”和“合并”有什么区别

> ID：12129765
> 
> 赞同：1
> 
> 时间：2012-08-26T11:32:41.543
> 
> 标签：clearcase-ucm

在我的项目中，我们会从一些主流分支分支到重要的里程碑，例如 Beta 版和候选发布版。

一旦我们将构建交付给客户，我们就会将代码合并回主流。这是一个没有变基的简单交付操作。

现在，还有一些场景需要我们将一些非常旧的流（几乎已经过时）合并到主流中。我发现了两个可用的选项：

1）交付到替代目标

2)合并经理

我们的项目中不允许使用选项 1)。

我的问题是：

两者之间有什么区别，为什么要优先于另一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T11:48:45.557

简单的：

*   `deliver to alternate target`（或`deliver to default`就此而言）是一个 UCM 合并，它必须遵循 UCM 规则，特别是关于活动依赖关系，但也关于 Stream（你不应该`deliver`从父 Stream 到子 Stream，应该是 a `rebase`）

*   `Merge Manager`是一个简单的 ClearCase 合并，在两个分支（而不是 Streams）之间，它可以将任何文件子集从一个分支`A`传递到另一个分支`B`，而无需遵循任何[合并工作流](https://stackoverflow.com/questions/216212/how-do-you-maintain-development-code-and-production-code#216228)。

我通常会看到为 UCM 由于神秘的“活动依赖”原因而阻止交付的情况选择了“合并管理器”，即使在没有的情况下也是如此。有关这种情况的示例，
请参阅“ [Clearcase UCM - 交叉交付与向上交付？ ”。](https://stackoverflow.com/questions/1643968/clearcase-ucm-cross-delivering-vs-delivering-upwards)

说“ `deliver to alternate target`”是不允许的，意味着只有`deliver to default`是，这意味着您必须遵循 Streams 层次结构建立的合并工作流程。[**UCM 合并为基线**](https://stackoverflow.com/questions/9696598/what-is-the-difference-between-full-baseline-and-incremental-baseline-in-clearca/9696988#9696988)
之间的合并带来了更好的可视化，这意味着您知道给定组件的*所有*文件都已合并。[](https://stackoverflow.com/questions/9696598/what-is-the-difference-between-full-baseline-and-incremental-baseline-in-clearca/9696988#9696988)

 ***但是，合并管理器是一个普通的合并，它可以涉及任何两个分支和任何两个（或更多）文件。该合并没有更高的可见性：它是逐个文件的操作（而不是一个组件 - 或一组连贯的文件 - 一个）。***

# mysql - MySQL 使用 if 语句按 2 列排序

> ID：12129768
> 
> 赞同：0
> 
> 时间：2012-08-26T11:32:53.517
> 
> 标签：mysql, if-statement

我在按 2 列排序搜索结果时遇到问题。

我有以下格式的表格

```
id  pos date
------------------
65  0   2012-08-10
66  0   2012-08-09
70  0   2012-08-08
73  0   2012-08-07
74  0   2012-08-06
75  0   2012-08-05
76  1   2012-08-04
77  2   2012-08-03
78  0   2012-08-02
79  0   2012-08-01 
```

我的问题是，系统 (cms) 为*NULL*生成 (int)0 。所以我没有得到结果，我需要。

我想按 pos（如果不是 (int)0 而不是日期）排序，因此 pos 仅在**>=1** 我的问题时强制该位置。有没有办法在 ORDER 子句中使用 IF 语句？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T11:41:52.887

根据`pos`当且仅当它被设置时排序，并将所有零保留为最后一次按日期排序；**4E9**只是一个足够高的数字，足以大于 中的所有值`pos`。

```
SELECT * FROM MyTable 
ORDER BY CASE pos WHEN 0 THEN 4E9 ELSE pos END, `date`; 
```

[SQLfiddle 上的](http://sqlfiddle.com/#!2/7bc73/3)演示。

另一个更简单的 mysql 特定版本摆脱了“魔术常数”是这样的；

```
SELECT * FROM MyTable 
ORDER BY pos=0, pos, `date`; 
```

另一个[SQLfiddle](http://sqlfiddle.com/#!2/7bc73/5)。

# python - Python Facebook graph api - 上传照片到粉丝页面

> ID：12129772
> 
> 赞同：0
> 
> 时间：2012-08-26T11:33:41.970
> 
> 标签：python, facebook, facebook-graph-api

我正在使用这个[http://blog.carduner.net/2011/09/06/easy-facebook-scripting-in-python/](http://blog.carduner.net/2011/09/06/easy-facebook-scripting-in-python/)通过 python 与 facebook 的图形 api 交互。

我的问题是我似乎无法将照片上传到粉丝页面。相反，它会上传到我的墙上。但是，我可以在粉丝页面上发表评论。

```
from urllib import urlretrieve
import imp
urlretrieve('https://raw.github.com/gist/1194123/fbconsole.py', '.fbconsole.py')
fb = imp.load_source('fb', '.fbconsole.py')
fb.AUTH_SCOPE = ['publish_stream', 'manage_pages']
fb.authenticate()

fb.graph_post("/<fan page id>/photos", {"message":"My photo", "source":open("photo.jpeg")}) 
```

其他人在将照片上传到粉丝页面时遇到问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:44:53.390

如果帖子出现在您的个人用户的墙上而不是页面的墙上，则您使用了错误的访问令牌。您需要使用页面访问令牌。

[您可以在Facebook 文档](https://developers.facebook.com/docs/authentication/pages/)上阅读更多信息

基本上，为了获得该访问令牌，您需要为您的应用程序提供`manage_pages`权限。之后，您可以调用`/me/accounts`并获取用户管理的所有页面的列表。在该列表中应该有每个页面的访问令牌。

我不是 100% 确定您将如何使用您正在使用的库设置访问令牌，但基本上您需要做的就是将令牌附加到带有`access_token`参数的请求中。

```
https://graph.facebook.com/WHATEVER_YOU_ARE_DOING?access_token=XXX 
```

# c# - Serialize custom properties on a class that implements IEnumerable

> ID：12129774
> 
> 赞同：7
> 
> 时间：2012-08-26T11:34:14.507
> 
> 标签：c#, json.net

Currently, JSON.NET ignores all other properties on classes implementing IEnumerable and serializes the array.

How can I tell JSON.NET to serialize the custom properties? I'm trying to serialize the `PagedList<T>` implementation below:

```
public interface IPagedList : IEnumerable
{
    int PageIndex { get; }
    int PageSize { get; }
    int TotalCount { get; }
    int TotalPages { get; }
    bool HasPreviousPage { get; }
    bool HasNextPage { get; }
}

public interface IPagedList<T> : IPagedList, IList<T>
{
}

/// <summary>
/// A tried and tested PagedList implementation
/// </summary>
public class PagedList<T> : List<T>, IPagedList<T>
{
    public PagedList(IEnumerable<T> source, int pageIndex, int pageSize) :
        this(source.GetPage(pageIndex, pageSize), pageIndex, pageSize, source.Count()) { }

    public PagedList(IEnumerable<T> source, int pageIndex, int pageSize, int totalCount)
    {
        Ensure.Argument.NotNull(source, "source");

        this.TotalCount = totalCount;
        this.TotalPages = totalCount / pageSize;

        if (totalCount % pageSize > 0)
            TotalPages++;

        this.PageSize = pageSize;
        this.PageIndex = pageIndex;

        this.AddRange(source.ToList());
    }

    public int PageIndex { get; private set; }
    public int PageSize { get; private set; }
    public int TotalCount { get; private set; }
    public int TotalPages { get; private set; }

    public bool HasPreviousPage { get { return (PageIndex > 0); } }
    public bool HasNextPage { get { return (PageIndex + 1 < TotalPages); } }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:58:20.863

我遇到了同样的问题，最终不得不使用自定义转换器来做到这一点。我的转换器采用类型名称列表进行操作，而不是全局工作。我参加了您的课程并编写了一个小型控制台应用程序，该应用程序将通过转换器运行您的课程。神奇之处在于设置 JsonSerializerSettings 以使用 EnumerableConverter 类。设置完成后，您必须在 SerializeObject 调用中使用设置对象。

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using Newtonsoft.Json;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            var pagedList = new PagedList<MyObject>(
                                new MyObject[] { 
                                    new MyObject { Foo = "Bar" }, 
                                    new MyObject { Foo = "Baz" } 
                                }, 0, 2, 2);
            Debug.WriteLine(JsonConvert.SerializeObject(pagedList));
            // Outputs: [{"Foo":"Bar"},{"Foo":"Baz"}]

            var settings = new JsonSerializerSettings
            {
                Converters = new List<JsonConverter>(
                                new[]{
                                    new EnumerableConverter(
                                       new []{"ConsoleApplication2.PagedList"}, 
                                              false)
                                })
            };
            Debug.WriteLine(JsonConvert.SerializeObject(pagedList, settings));
            // Outputs: 
            //{
            //   "PageIndex":0,
            //   "PageSize":2,
            //   "TotalCount":2,
            //   "TotalPages":1,
            //   "HasPreviousPage":false,
            //   "HasNextPage":false,
            //   "Capacity":4,
            //   "Count":2,
            //   "Items":[
            //      {
            //         "Foo":"Bar"
            //      },
            //      {
            //         "Foo":"Baz"
            //      }
            //   ]
            //}      
        }
    }

    public class MyObject
    {
        public string Foo { get; set; }
    }

    public interface IPagedList : IEnumerable
    {
        int PageIndex { get; }
        int PageSize { get; }
        int TotalCount { get; }
        int TotalPages { get; }
        bool HasPreviousPage { get; }
        bool HasNextPage { get; }
    }

    public interface IPagedList<T> : IPagedList, IList<T>
    {
    }

    /// <summary>
    /// A tried and tested PagedList implementation
    /// </summary>
    public class PagedList<T> : List<T>, IPagedList<T>
    {
        //public PagedList(IEnumerable<T> source, int pageIndex, int pageSize) :
        //    this(source.GetPage(pageIndex, pageSize), pageIndex, pageSize, source.Count()) { }

        public PagedList(IEnumerable<T> source, int pageIndex, int pageSize, int totalCount)
        {
            //Ensure.Argument.NotNull(source, "source");

            this.TotalCount = totalCount;
            this.TotalPages = totalCount / pageSize;

            if (totalCount % pageSize > 0)
                TotalPages++;

            this.PageSize = pageSize;
            this.PageIndex = pageIndex;

            this.AddRange(source.ToList());
        }

        public int PageIndex { get; private set; }
        public int PageSize { get; private set; }
        public int TotalCount { get; private set; }
        public int TotalPages { get; private set; }

        public bool HasPreviousPage { get { return (PageIndex > 0); } }
        public bool HasNextPage { get { return (PageIndex + 1 < TotalPages); } }
    }

    public class EnumerableConverter : Newtonsoft.Json.JsonConverter
    {
        private IEnumerable<string> Types { get; set; }
        private bool IsCamelCase { get; set; }

        public EnumerableConverter(IEnumerable<string> types)
            : this(types, true)
        {
        }

        public EnumerableConverter(IEnumerable<string> types, bool isCamelCase)
        {
            if (types == null) throw new ArgumentNullException("types");
            Types = types;
            IsCamelCase = isCamelCase;
        }

        public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
        {
            writer.WriteStartObject();
            var foundInnerEnumerable = false;
            foreach (var property in value.GetType().GetProperties()) {
                try {
                    var propVal = property.GetValue(value, null);
                    foundInnerEnumerable |= propVal is IEnumerable;
                    writer.WritePropertyName(NameFor(property.Name));
                    serializer.Serialize(writer, propVal);
                }
                catch (System.Reflection.TargetParameterCountException) { 
                    // Ignore properties such as Item on List<T>
                }
            }
            if (!foundInnerEnumerable) {
                writer.WritePropertyName(NameFor("Items"));
                writer.WriteStartArray();
                foreach (var item in (IEnumerable)value) {
                    serializer.Serialize(writer, item);
                }
                writer.WriteEndArray();
            }
            writer.WriteEndObject();
        }

        private string NameFor(string value)
        {
            if (!IsCamelCase) return value;
            return value[0].ToString().ToLowerInvariant() + value.Substring(1);
        }

        public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
        {
            throw new NotImplementedException();
        }

        public override bool CanConvert(Type objectType)
        {
            return Types.Any(t => objectType.FullName.StartsWith(t));
        }
    }

} 
```

# mod-rewrite - How to redirect invalid urls using mod_rewrite?

> ID：12129778
> 
> 赞同：0
> 
> 时间：2012-08-26T11:34:55.777
> 
> 标签：mod-rewrite

I am new in mod_rewrite regular expressions. I have the following lines in my .htaccess file:

```
RewriteRule ^gallery/([0-9]+)/ gallery.php?id=$1 [L]
RewriteRule ^gallery/ gallery.php [L] 
```

When I open `http://127.0.0.1/gallery/` everything is OK, but when I open `http://127.0.0.1/gallery/some_string` it opens the same page. How can I force such invalid URL-s to go to my 404 page. I need the second line to be strict - with no extra characters after the last slash and the first rule must continue to work with integer values.

Any ideas how to achieve this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:39:26.747

```
RewriteRule ^gallery/ gallery.php [L] 
```

在此规则中，模式`^gallery/`匹配所有以“gallery/”开头的字符串，包括“gallery/some_string”。为了使其严格，以确保它只匹配“gallery/”而不匹配其他内容，请使用 $ 元字符，它表示字符串的结尾：

```
RewriteRule ^gallery/$ gallery.php [L] 
```

（您可能希望通过使用 ? 运算符 ( `RewriteRule ^gallery/?$ gallery.php [L]`) 使最后一个斜杠成为可选，以确保[http://example.com/gallery](http://example.com/gallery)也可以工作——用户期望这种行为，即使它很草率。）

# exception - OpenCV：矩阵错误消息“函数cvarrToMat中的未知数组类型”而不使用矩阵

> ID：12129782
> 
> 赞同：1
> 
> 时间：2012-08-26T11:35:17.070
> 
> 标签：exception, opencv, image-scaling

尽管我不使用矩阵，但在捕获和缩放图像数据时，我从 OpenCV 收到与矩阵相关的错误消息/异常。这是我目前的代码：

```
if (data->capture->grab()) // capture something from already opened device
{
    if (data->capture->retrieve(grabFrame,0)) // get the frame
    {
        CvSize size;

        size.width=data->config.width;
        size.height=data->config.height;
        nextFrame=cvCreateImage(size,32,0);
        resFrame=cvCreateImage(size,32,0); // predefined default sizes to scale the image to...
        if ((nextFrame) && (resFrame))
        {
            cvResize(&grabFrame,nextFrame,cv::INTER_AREA); // scale the image to the predefined size

--> here the Exception is thrown!

            cvCvtColor(nextFrame,resFrame,CV_BGR2RGB);
            ...
        }
        if (nextFrame) cvReleaseImage(&nextFrame);
    }
} 
```

OpenCV 的确切输出是这样的：

> OpenCV 错误：cvarrToMat 中的错误参数（未知数组类型），文件 /builddir/build/BUILD/> OpenCV-2.3.1/modules/core/src/matrix.cpp，第 646 行终止在抛出 'cv: 实例后调用:Exception' what(): /builddir/build/BUILD/OpenCV-2.3.1/modules/core/src/matrix.cpp:646: error: (-5) 函数 cvarrToMat 中的未知数组类型
> 
> 中止

那么我在愚蠢而简单的缩放操作中做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T13:03:51.100

已解决：我需要使用 cvQueryFrame() 来获取正确格式的帧。

# php - PHP fatal error Can't use method return value in write context

> ID：12129786
> 
> 赞同：1
> 
> 时间：2012-08-26T11:35:38.700
> 
> 标签：php

I have seen this question being asked many times, but I am yet confused and came across something similar condition. I am not sure if [this](https://stackoverflow.com/questions/1075534/cant-use-method-return-value-in-write-context) and my context are same or not, as long as I am convinced this is a different scenario or else I might have misunderstood the explanation. O.k. here is my scenario:

```
$amount = isset($cost->getCostAmount()) ? $cost->getCostAmount() : 0; 
```

Function costAmount() is dynamically added during run-time and it may or may not exist. So I need to first check if my function exists or not and rest is pretty clear. But now in this case I get a fatal error:

> Fatal error: Can't use method return value in write context in ..../file.php

Now if I do something like this:

```
$amount = $cost->getCostAmount() ? $cost->getCostAmount() : 0; 
```

Obviously I would get an error:

> Call to undefined method: getCostAmount

if the function doesn't exist. What could be a possible solution for this? Explanation will be considered helpful.

> Request: Please add an adequate comment to why the question has been downvoted so that I would be able to improve my questions, in the future.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-26T11:42:41.627

改变这个：

```
$amount = isset($cost->getCostAmount()) ? $cost->getCostAmount() : 0; 
```

至..

```
$amount = method_exists($cost, 'getCostAmount') ? $cost->getCostAmount() : 0; 
```

因为这段代码`isset($cost->getCostAmount())`正在执行方法`getCostAmount`，即使它不存在

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T11:47:55.367

`isset`要求您将变量传递给它而不是函数。它无法检查*是否设置了返回值*。

你应该这样使用它，

```
$cost_amount = $cost->getCostAmount();
$amount = isset($cost_amount) ? $cost_amount : 0; 
```

即使这段代码也没有意义。因为这里 $cost_amount 将始终设置。如果`getCostAmount`返回`null`或`empty`字符串，您应该以这种方式检查它。

```
$cost_amount = $cost->getCostAmount();
$amount = !is_null($cost_amount) ? $cost_amount : 0; 
```

您的代码也找不到`getCostAmount`功能。如果您知道这是在某处声明的，请包含它。如果此方法是动态生成的，您可以使用`method_exists`.

```
 $amount = method_exists($cost, 'getCostAmount')? $cost->getCostAmount(): 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T11:38:12.763

Try changing isset() to function_exists()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T11:44:47.990

您可以通过以下方式 使用`method_exists`：（[http://www.php.net/manual/en/function.method-exists.php ）：](http://www.php.net/manual/en/function.method-exists.php)

```
var_dump(method_exists($cost,'getCostAmount')); 
```

# objective-c - 向 NSMutable 数组添加数据时的 EXC_BAD_ACCESS

> ID：12129791
> 
> 赞同：0
> 
> 时间：2012-08-26T11:37:08.947
> 
> 标签：objective-c, ios, nsmutablearray

好吧，我正在解析来自 json 的数据，并将它们动态添加到数组中。如果我添加其中的 12 个数据，就可以了。但是当我要添加第 13 个时，我得到了这个错误（不管第 13 个是什么）：

```
EXC_BAD_ACCESS 
```

这是我的代码：

```
HomeView.h

#import <UIKit/UIKit.h>

@interface HomeView : UIViewController{  
    NSMutableData *responseData;
}

@property (nonatomic, strong) NSMutableData *responseData;

@end 
```

和我的实现文件：

```
@implementation HomeView
@synthesize responseData;

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
NSLog(@"connectionDidFinishLoading");
NSLog(@"Succeeded! Received %d bytes of data",[self.responseData length]);

// convert to JSON
NSError *myError = nil;
NSDictionary *res = [NSJSONSerialization JSONObjectWithData:self.responseData options:NSJSONReadingMutableLeaves error:&myError];
    NSString *parsed_track=[res objectForKey:@"data1"];
    [tracks_condition addObject:parsed_track];
    parsed_track=[res objectForKey:@"data2"];
    [tracks_condition addObject:parsed_track];
    parsed_track=[res objectForKey:@"data3"];
    [tracks_condition addObject:parsed_track];
    parsed_track=[res objectForKey:@"data4"];
    [tracks_condition addObject:parsed_track];
    parsed_track=[res objectForKey:@"data5"];
    [tracks_condition addObject:parsed_track];
    parsed_track=[res objectForKey:@"data6"];
    [tracks_condition addObject:parsed_track];

   parsed_track=[res objectForKey:@"data7"];
    [tracks_condition addObject:parsed_track];
    parsed_track=[res objectForKey:@"data8"];
    [tracks_condition addObject:parsed_track];
    parsed_track=[res objectForKey:@"data9"];
    [tracks_condition addObject:parsed_track];
    parsed_track=[res objectForKey:@"data10"];
    [tracks_condition addObject:parsed_track];
    parsed_track=[res objectForKey:@"data11"];
    [tracks_condition addObject:parsed_track];
    parsed_track=[res objectForKey:@"data12"];
    [tracks_condition addObject:parsed_track];

  // parsed_track=[res objectForKey:@"data13"]; //HERE COMES THE ERROR
   // [tracks_condition addObject:parsed_track]; 
```

}

我想这是内存管理的问题，但我不知道是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T11:41:02.580

你确定有一个对象 key`@"data13"`可能这个 key 不存在并返回`nil`。在这种情况下，您需要检查`nil`并决定是否要添加它。如果要添加它，只需添加它，`[NSNull null]`因为您必须使用继承的对象`NSObject`。

编辑：请尝试在 for 循环中进行，并使用构造字符串`[NSString stringWithFormat.....]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T12:17:17.757

EXC_BAD_ACCESS 是因为您正在向`nil`数组中添加一个对象，或者在您将其添加到数组时该对象已经被释放。

另一方面，您可以使用 for 循环将对象添加到数组中，而不是使用多行代码：

```
for (NSUInteger idx = 1; idx <= [[res allKeys] count]; idx++) {

    if ([[[res allKeys] objectAtIndex:idx] rangeOfString:@"data"].location != NSNotFound)
        [tracks_condition addObject:[res objectForKey:[NSString stringWithFormat:@"data%d", idx]]];

} 
```

甚至更好：

```
[self.questionInfo enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) {

        if ([key rangeOfString:@"data"].location != NSNotFound && obj != nil) {

            [tracks_condition addObject:obj];

        }

        else {

            if ([tracks_condition count] >= 18) {
                *stop = YES;

            }                   
        }

}]; 
```

# objective-c - UIImageView doesn't show UIImage gotten from notification

> ID：12129792
> 
> 赞同：3
> 
> 时间：2012-08-26T11:37:31.657
> 
> 标签：objective-c, uiimageview, uiimage, nsnotificationcenter

I'm developing a page view controller for showing PDF files and I want to start rendering a UIImage from a PDF page in a different thread and pass the rendered image to the main thread through notifications.

I started by creating a different method that renders my page in a UIImage and post a notification when the image is ready but at least for now I'm still doing it on the main thread.

```
- (void)generatePage:(int)pageNumber withSize:(CGSize)size {
    UIImage *resultingImage;

    CGFloat sizeRatio = size.width/size.height;

    CGPDFDocumentRef pdfRef = [self PDFDocumentRef];
    CGPDFPageRef myPageRef = CGPDFDocumentGetPage(pdfRef, pageNumber);

    CGRect pageRect = CGPDFPageGetBoxRect(myPageRef, kCGPDFMediaBox);
    CGFloat pdfHWRatio = pageRect.size.width/pageRect.size.height;

    CGFloat pdfScale;

    if (sizeRatio < pdfHWRatio) {
        pdfScale = size.width/pageRect.size.width;
    }
    else {
        pdfScale = size.height/pageRect.size.height;
    }
    pageRect.size = CGSizeMake(pageRect.size.width*pdfScale, pageRect.size.height*pdfScale);
    pageRect.origin = CGPointZero;

    UIGraphicsBeginImageContext(pageRect.size);

    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextSetRGBFillColor(context, 1.0,1.0,1.0,1.0);
    CGContextFillRect(context,pageRect);

    CGContextSaveGState(context);

    CGContextTranslateCTM(context, 0.0, pageRect.size.height);
    CGContextScaleCTM(context, pdfScale, -pdfScale);

    CGContextDrawPDFPage(context, myPageRef);
    CGContextRestoreGState(context);

    resultingImage = UIGraphicsGetImageFromCurrentImageContext();

    if (resultingImage) {
        [pagesCache setObject:resultingImage
                   forKey:[self generateCacheNameWithSize:size
                                            andPageNumber:pageNumber]];
        NSDictionary *userInfo = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:
                                                                  resultingImage,
                                                                  [NSNumber numberWithInt:pageNumber],
                                                                  nil]
                                                         forKeys:[NSArray arrayWithObjects:
                                                                  CatalogRenderedPageImageKey,
                                                                  CatalogRenderedPageNumberKey,
                                                                  nil]];

        NSNotification *note = [NSNotification notificationWithName:CatalogRenderPageNotification
                                                         object:self
                                                       userInfo:userInfo];
        [[NSNotificationCenter defaultCenter] postNotification:note];
    }

    UIGraphicsEndImageContext();

    CGPDFDocumentRelease(pdfRef);
} 
```

I'm successfully getting the notification and the UIImage is correctly acquired (same object id) but the UIImageView is empty.

```
- (void) imageLoaded:(NSNotification *)note {
    NSDictionary *userInfo = note.userInfo;
    NSNumber *pageNumber = [userInfo objectForKey:CatalogRenderedPageNumberKey];

    if ([self.pageNumber isEqualToNumber:pageNumber]) {
        UIImage *image = [userInfo objectForKey:CatalogRenderedPageImageKey];
        self.image = image;
        self.imageView.image = _image;
        [[NSNotificationCenter defaultCenter] removeObserver:self name:CatalogRenderPageNotification object:self.catalog];
    }
} 
```

What am I missing? I've checked the storage property in the UIImageView and it's being filled with the UIImage.

You may have noticed that I'm saving my rendered images in a cache and truth is that when I get the images from that cache I'm able to see them in the UIImageView so I dismiss the chance that the UIImage is being generated badly.

* * *

UPDATE: I started calling the generatePage in a different thread:

```
dispatch_async(dispatch_queue_create("renderingQueue", DISPATCH_QUEUE_CONCURRENT), ^{
            [self generatePage:pageNumber withSize:size];
        }); 
```

And posting the notification in the main thread as @phyx23 suggested. It now works but I still don't understand why it didn't work before.

I'm leaving it open so that anyone can leave their thoughts on why this would happen.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:49:39.670

我的猜测是，问题的原因是当您将创建的图像分配给图像视图时，您仍然处于图像上下文中。您应该先结束图像上下文，`UIGraphicsEndImageContext`然后发布通知。此外，当您开始在后台执行它时，请确保您在主线程上发布通知。

```
resultingImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
CGPDFDocumentRelease(pdfRef);

if (resultingImage) {
  dispatch_async(dispatch_get_main_queue(), ^{
    [pagesCache setObject:resultingImage
               forKey:[self generateCacheNameWithSize:size
                                        andPageNumber:pageNumber]];
    NSDictionary *userInfo = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:
                                                              resultingImage,
                                                              [NSNumber numberWithInt:pageNumber],
                                                              nil]
                                                     forKeys:[NSArray arrayWithObjects:
                                                              CatalogRenderedPageImageKey,
                                                              CatalogRenderedPageNumberKey,
                                                              nil]];

    NSNotification *note = [NSNotification notificationWithName:CatalogRenderPageNotification
                                                     object:self
                                                   userInfo:userInfo];
    [[NSNotificationCenter defaultCenter] postNotification:note];
  });
} 
```

# networking - 当前 Internet 中使用的 IPV4 地址是无类地址还是全类地址？

> ID：12129810
> 
> 赞同：-1
> 
> 时间：2012-08-26T11:41:22.670
> 
> 标签：networking, ip, ipv6, ipv4

好吧，当我在某处读到它时，我有一个疑问

IPV4 A、B、C 类地址用于 IP 网络（公共 IP 网络）

那么他们就是一个无类寻址的概念

那么我们今天在 Internet 上使用的是有类寻址还是无类寻址

如果我们使用无类寻址，那么 E 类地址也应该可供我们使用。请帮忙 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:11:22.727

无类别寻址已经存在了 20 年。你的来源有点过时了。但你的问题实际上没有意义。每个 IP 地址范围都有自己的网络掩码：整个 Internet 不只有一个。

# android - Android - 执行 Runtime.getRuntime().exec() 期间出错 - 环境 Null -ffmpeg

> ID：12129814
> 
> 赞同：2
> 
> 时间：2012-08-26T11:42:04.947
> 
> 标签：android, eclipse, ffmpeg, runtime.exec, ubuntu-11.10

我在 ubuntu 11.10 上编译了 ffmpeg 库，并在 android 上移植了编译文件。
编译后我得到了**libffmpeg.so**成功。它成功加载到android上。

我在 ubuntu 11.10 eclipse android 模拟器上做。

我创建了一个小型测试应用程序，它充当命令提示符，它接受来自用户的命令并显示结果。（测试 ffmpeg 命令）

当我运行像“ls”、“ls -l”这样的简单命令时，它可以完美运行。但是当我简单地键入“ **cd mnt** ”或“ **ffmpeg** ”作为命令并尝试运行它时。我**在 Logcat 中收到警告**说

```
08-26 16:44:52.553: W/System.err(5961): java.io.IOException: Error running exec(). Command: [ffmpeg] Working Directory: null Environment: null
08-26 16:44:52.573: W/System.err(5961):     at java.lang.ProcessManager.exec(ProcessManager.java:211)
08-26 16:44:52.573: W/System.err(5961):     at java.lang.Runtime.exec(Runtime.java:168)
08-26 16:44:52.573: W/System.err(5961):     at java.lang.Runtime.exec(Runtime.java:241)
08-26 16:44:52.583: W/System.err(5961):     at java.lang.Runtime.exec(Runtime.java:184)
08-26 16:44:52.593: W/System.err(5961):     at ch.ffmpeg.reversit.MainActivity.Execute(MainActivity.java:61)
08-26 16:44:52.593: W/System.err(5961):     at ch.ffmpeg.reversit.MainActivity$1.onClick(MainActivity.java:46)
08-26 16:44:52.593: W/System.err(5961):     at android.view.View.performClick(View.java:3480)
08-26 16:44:52.593: W/System.err(5961):     at android.view.View$PerformClick.run(View.java:13983)
08-26 16:44:52.603: W/System.err(5961):     at android.os.Handler.handleCallback(Handler.java:605)
08-26 16:44:52.603: W/System.err(5961):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-26 16:44:52.603: W/System.err(5961):     at android.os.Looper.loop(Looper.java:137)
08-26 16:44:52.614: W/System.err(5961):     at android.app.ActivityThread.main(ActivityThread.java:4340)
08-26 16:44:52.624: W/System.err(5961):     at java.lang.reflect.Method.invokeNative(Native Method)
08-26 16:44:52.624: W/System.err(5961):     at java.lang.reflect.Method.invoke(Method.java:511)
08-26 16:44:52.634: W/System.err(5961):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-26 16:44:52.634: W/System.err(5961):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-26 16:44:52.644: W/System.err(5961):     at dalvik.system.NativeStart.main(Native Method)
08-26 16:44:52.644: W/System.err(5961): Caused by: java.io.IOException: Permission denied
08-26 16:44:52.674: W/System.err(5961):     at java.lang.ProcessManager.exec(Native Method)
08-26 16:44:52.674: W/System.err(5961):     at java.lang.ProcessManager.exec(ProcessManager.java:209)
08-26 16:44:52.684: W/System.err(5961):     ... 16 more 
```

这是我的代码：

```
imports;
public class MainActivity extends Activity {
    String com;
    Process process;
    EditText command;
    Button run;
    RelativeLayout main_layout;

    static {
     System.loadLibrary("ffmpeg");
    }

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

       //find view 
       command=(EditText)findViewById(R.id.command);
       run=(Button)findViewById(R.id.run);

        run.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                com=command.getText().toString();
                try {
                    Execute();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        }); 

    }

    public void Execute() throws IOException, InterruptedException{
        process=Runtime.getRuntime().exec(com);
        // process = pb.command(com).redirectErrorStream(true).start();

        if(process!=null)
        ShowOutput();
        else
        Toast.makeText(getBaseContext(),"Null Process",Toast.LENGTH_LONG).show();
    }

    public void ShowOutput() throws IOException, InterruptedException{
        String s,text="",errors="";
        BufferedReader stdInput = new BufferedReader(new 
                InputStreamReader(process.getInputStream()));

           BufferedReader stdError = new BufferedReader(new 
                InputStreamReader(process.getErrorStream()));

           TextView output=(TextView)findViewById(R.id.output);
           TextView error=(TextView)findViewById(R.id.error);

            while ((s = stdInput.readLine()) != null) {
                   text+=s.toString()+"\n";
                   System.out.println("Error: "+s);
               }

         output.setText(text);
         text="";
           // read any errors from the attempted command
           System.out.println("Here is the standard error of the command (if any):\n");
           while ((s = stdError.readLine()) != null) {
               text+=s.toString()+"\n";
               System.out.println("Error: "+s);
           }

           error.setText(text);

           error.setMovementMethod(new ScrollingMovementMethod());
           output.setMovementMethod(new ScrollingMovementMethod());

           stdInput.close();
           stdError.close();

           process.waitFor();
           process.getOutputStream().close();
           process.getInputStream().close();
           process.getErrorStream().close(); 
           process.destroy();

    }

} 
```

我什至尝试`process = pb.command(com).redirectErrorStream(true).start();`执行。它给了我同样的错误，但这次环境是 [ANDROID_SOCKET_Zygot] bla bla bla ..

**编辑 1：** 我在 ubuntu 上使用 Openjdk

帮帮我 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T16:48:45.223

有大量 [android] [ffmpeg] 讨论以及如何...

在非 root 设备（即普通用户的应用程序）上调用 ffmpeg 的常规方法是使用 NDK 和 C-lang 集成，在 Java 中，您可以进行常规方法调用，该方法调用包装 CLI 内容和参数集合JNI 层将传递到 ffmpeg 可执行文件的接口。

android 调用 step1.android 的示例是......

```
 new FFMpegTask().execute(invoke_lib_path,"ffmpeg", "-y", 
                    "-i", Picture.getPath(), "-i", recordFilePath,
                    "-vcodec", "mpeg4", "-s", siz,
                    "-r", "15", "-b:v", "200k",
                    "-acodec", "copy", "-f", "3gp"
                    ,pathOut); 
```

步骤2.c

> JNIEXPORT void JNICALL Java_com_..._naRun(JNIEnv *env, jobject obj, jobjectArray args) { int i = 0; 整数 argc = 0; 字符 **argv = NULL;
> 
> if (args != NULL) { argc = ( *env)->GetArrayLength(env, args); argv = (char ** ) malloc(sizeof(char *) * argc);
> 
> ```
>  for(i=0;i<argc;i++)         {           jstring str = 
> ```
> 
> (jstring)(*env)->GetObjectArrayElement(env, args, i); argv[i] = (char *)(*env)->GetStringUTFChars(env, str, NULL); } } int j = 0; j = main(argc, argv); }

尝试使用 java runtime.exec() 类型的 CLI 调用是我所说的 hack，这将浪费您的时间。

通过在 .apk 中使用 NDK 和正常打包，您可以确保部署设备上的处理器架构和构建 ffmpeg 的处理器等事物之间更高程度的可靠性和集成。

尝试阅读roman10的[介绍](http://www.roman10.net/how-to-build-android-applications-based-on-ffmpeg-by-an-example/)

然后，您可以尝试依赖许多为 android 构建 ffmpeg 的人提供的面包屑 .. 即 google “android-ffmpeg”

如果你是 root 并且你已经编译了一个可执行文件，那么你可以通过获取一个 shell 并使用 adb CLI 来调用它。请注意，这不像使用 java 作为 runtime.exec 调用的包装器。

> adb push ffmpeg /data/local/ffmpeg/ffmpeg
> 
> ./ffmpeg -编解码器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T12:32:20.873

AFAIK You cannot use cd command. It is a bash directive, there is no executable cd. I guess ffmpeg is not working because of permissions. On adb shell do chmod 777 ffmpeg and try again

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-18T04:41:30.770

我可能有点晚了

```
java.io.IOException: Error running exec(). Command: [ffmpeg] Working Directory: null Environment: null 
```

明确提到找不到ffmpeg文件。在执行任何命令之前，首先检查文件是否存在于上述位置。

```
boolean ifFileExists = new File(*path_of_ffmpeg_file*).exists();

       if(ifFileExists==false){
// code to write file in phone
    }
method(commandToExecute); 
```

# c# - 如何关闭容器 从内页？

> ID：12129819
> 
> 赞同：1
> 
> 时间：2012-08-26T11:42:56.120
> 
> 标签：c#, asp.net, ajax, html, iframe

我有以下结构：

我的页面在这样的框架中打开：

```
<div id="ajaxbox" class="dhtmlwindow" style="z-index: 101; width: 73%; visibility: visible; display: block;">
<div class="drag-handle" style="opacity: 1;">
Title
<div class="drag-controls">
</div>
<div class="drag-contentarea" style="height: 715px; overflow: hidden; display: block;">
<iframe name="_iframe-ajaxbox" style="margin:0; padding:0; width:100%; height: 100%" src="">
//My Page opened here
</iframe>
.... 
```

* * *

现在我想从`linkbutton`我的页面中关闭容器（`div id="ajaxbox"`）

这个怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:58:20.977

编写一个 javascript 函数来关闭父页面中的 div。

jQuery 示例：

```
function CloseDiv()
{
    $("#ajaxbox").hide();
} 
```

在您的链接按钮上调用客户端脚本：

```
<asp:linkbutton id="LinkButton1"
       text="Close Me"
       onclientclick="parent.CloseDiv()"
       runat="Server" /> 
```

# windows-8 - 魅力栏旁边显示的带有时间和电池的黑匣子的名称是什么？

> ID：12129821
> 
> 赞同：1
> 
> 时间：2012-08-26T11:43:03.823
> 
> 标签：windows-8, desktop, charms-bar

在 Windows 8 中，当我点击`Win`+时`C`，右侧会显示一个“魅力菜单”。但同时，左下角会出现一个黑色方块，显示当前时间、WiFi信号强度、电池图标等。

这个界面项目是否有一个单独的名称，可以用谷歌搜索可用的选项？是否可以像魅力栏一样通过 API 访问它？是否可以在其中添加我自己的图标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T16:44:27.473

除了将其称为 Charms 时钟之外，它似乎没有一个容易找到的正式名称。

不，没有发布的 API 可以对其进行修改或添加您自己的图标。

在 Modern UI Windows 8 应用程序（又名 Metro）中，Microsoft 建议您切换到[动态磁贴](http://blogs.msdn.com/b/b8/archive/2011/11/02/updating-live-tiles-without-draining-your-battery.aspx)和通知。

[这](http://msdn.microsoft.com/en-us/library/windows/apps/hh868262.aspx)是将另一个照片应用从 iOS 转换为 Metro 的非常有趣的案例研究。

# android - 动画 Android ListView 像通知列表一样上下滑动

> ID：12129822
> 
> 赞同：2
> 
> 时间：2012-08-26T11:43:12.207
> 
> 标签：android, listview, animation

我想在我的 Android (2.2) 应用程序中包含一个 ListView，类似于来自顶部的通知列表。在这里，我想要它从底部。列表应始终显示顶部，向上滑动时会放大到屏幕的 80%。向下滑动时，它应该恢复到原来的大小。

我尝试了几种无效的替代方案：

*   Tweed 动画总是放大可见的部分，而不是真实的内容
*   使用 onAnimationRepeat 在动画循环中手动向上滑动，因为每次调整大小后都必须计算完整布局，每一步都很慢，因此移动非常糟糕
*   布局动画似乎不是一个解决方案，因为视图始终可见，因此在显示过程中无法进行动画处理。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T11:48:41.803

看看[Android 滑动抽屉](http://developer.android.com/reference/android/widget/SlidingDrawer.html)：

它将从底部滑动，您可以在其中放置一个 ListView。

它应该看起来像这样：

![在此处输入图像描述](../Images/d37cfbfaa6248629efe8696a6cb32e6e.png)

[这](http://w2davids.wordpress.com/android-damn-that-sliding-drawer/)是一个教程：

# c# - 使用 errorprovider 验证多个文本框

> ID：12129824
> 
> 赞同：8
> 
> 时间：2012-08-26T11:43:45.600
> 
> 标签：c#, winforms

我有 10 个文本框，现在我想检查单击按钮时它们是否为空。我的代码是：

```
 if (TextBox1.Text == "")
 {
    errorProvider1.SetError(TextBox1, "Please fill the required field");
 } 
```

有什么方法可以一次检查所有的文本框，而不是为每个人写？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-26T12:48:36.470

就在这里。

首先，您需要以序列的形式获取所有文本框，例如：

```
var boxes = Controls.OfType<TextBox>(); 
```

然后，您可以遍历它们，并相应地设置错误：

```
foreach (var box in boxes)
{
    if (string.IsNullOrWhiteSpace(box.Text))
    {
        errorProvider1.SetError(box, "Please fill the required field");
    }
} 
```

我建议使用`string.IsNullOrWhiteSpace`而不是`x == ""`或 +`string.IsNullOrEmpty`将填充有空格、制表符等的文本框标记为错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T11:49:25.123

可能不是最佳解决方案，但这也应该有效

```
 public Form1()
    {
       InitializeComponent();
       textBox1.Validated += new EventHandler(textBox_Validated);
       textBox2.Validated += new EventHandler(textBox_Validated);
       textBox3.Validated += new EventHandler(textBox_Validated);
       ...
       textBox10.Validated += new EventHandler(textBox_Validated);
    }

    private void button1_Click(object sender, EventArgs e)
    {
        this.ValidateChildren();
    }

    public void textBox_Validated(object sender, EventArgs e)
    { 
        var tb = (TextBox)sender;
        if(string.IsNullOrEmpty(tb.Text))
        {
            errorProvider1.SetError(tb, "error");
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T11:49:44.533

编辑：

```
var controls = new [] { tx1, tx2\. ...., txt10 };
foreach(var control in controls.Where(e => String.IsNullOrEmpty(e.Text))
{
    errorProvider1.SetError(control, "Please fill the required field");
} 
```

# jquery - gif在悬停时开始播放并在鼠标悬停时停止？

> ID：12129833
> 
> 赞同：4
> 
> 时间：2012-08-26T11:44:51.387
> 
> 标签：jquery, css, animated-gif, onhover

我想制作下面的 gif，它最初停止但在悬停时开始播放，当鼠标悬停时它会停止......有人可以帮我吗？

[![在此处输入图像描述](../Images/802ba9532607f6ed4206e165275ab840.png)](https://i.stack.imgur.com/vEUS5.gif)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T11:48:33.483

在您的情况下，因为动画并不复杂，我的想法是在页面上放置两个图像（动画而不是动画）。并在鼠标悬停/移出时显示/隐藏它们。

```
<div id="img_wrap" class="static">
    <img id="animated" src="animated.gif" alt="">
    <img id="static" src="static.jpg" alt="">
</div> 
```

脚本：

```
$(function(){
    $('#img_wrap').on( 'mouseenter', function() {
         $(this).toggleClass('animated', 'static');
    })
}) 
```

CSS：

```
.animated #static, .static #animated {
    display: none;
}
.animated #animated, .static #static {
    display: inline;
} 
```

或者，如果您不需要对 IE6 的支持，您甚至可以使用纯 CSS 来执行此操作，除了以下`hover`内容之外不会触发任何事件`<a>`：

CSS：

```
#img_wrap #static, #img_wrap:hover #animated {
    display: inline;
}
#img_wrap #animated, #img_wrap:hover #static {
    display: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T11:50:20.017

你需要在这里使用jquery吗？

gif 没有加载，但是 .div { background: url('.png'); } .div:hover { 背景: url('.gif'); }

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T12:40:42.633

如果您只想在没有动画时显示固定的静态图像，那么它就像在悬停时更改图像一样简单（使用 CSS 或 JS）。

但是，如果您想在鼠标移出时实际冻结当前帧上的动画，那么唯一的方法是手动为图像设置动画，例如使用 JS：

```
(function(){
  var imgDownload = $('#BtnDownload'), interval = 250;

  function startAnimation(img, interval, frameCount) {
    var src, prefix, ext, toId;
    if (frameCount) img.data('frames', frameCount);
    interval = interval || img.data('interval');
    src = img.attr('src').split('.');
    ext = src.pop();
    prefix = src.join('.');
    img.data('ext') || img.data('ext', ext);
    img.data('prefix') || img.data('prefix', prefix);
    restartAnimation(img, interval);
    img.hover(function() {
      restartAnimation(img, interval);
    });
    img.mouseout(function() {
      clearTimeout($(this).data('timeout-id'));
    });
  }
  function restartAnimation(img, interval) {
    todId = setTimeout(animate, interval, img);
    img.data('timeout-id', toId);
  }
  function animate(img) {
    var currentFrame, nextFrame, frameCount, prefix, ext;
    currentFrame = img.data('current-frame');
    frameCount = img.data('frames');
    prefix = img.data('prefix');
    ext = img.data('ext');

    nextFrame = currentFrame + 1;
    if (nextFrame >= frameCount) nextFrame = 0;
    img.data('current-frame', nextFrame);
    img.attr('src', prefix + (nextFrame? nextFrame : '') + '.' + ext);
  }

  startAnimation(imgDownload, interval);
)()); 
```

和以下 HTML：

```
<img src="/img/btn_download.png" alt="Download" data-frames="6"> 
```

和这些图像：

```
/img/btn_download.png
/img/btn_download1.png
/img/btn_download2.png
/img/btn_download3.png
/img/btn_download4.png
/img/btn_download5.png 
```

**注意：** 这是一个幼稚的实现。对于生产代码，您需要预加载图像或简单地使用 spritemap。但基本概念是相同的——手动为图像/按钮设置动画，这样当您冻结动画时，它会冻结在当前帧上。另一种方法是使用类似[jsgif](http://slbkbs.org/jsgif/)的东西，它使用 XHR 下载 GIF 文件，解析二进制数据以提取单个帧，然后使用 HTML5 Canvas 呈现它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-21T06:21:40.963

不，您无法控制图像的动画。

您将需要每个 iamge 的两个版本，一个是动画的，一个不是。悬停时，您可以轻松地从一张图像更改为另一张图像。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-22T12:34:53.100

获取两张图片，一张 png 和一张 gif ：

```
<div>
    <img class="static" src="https://webpage.com/image1.png">
    <img class="active" src="https://webpage.com/image2.gif">
</div> 
```

使用以下 css，悬停时 png 将是不透明的，而 gif 是可见的。

```
.static {
  position:absolute;
  background: white;
}

.static:hover {
  opacity:0;
} 
```

# database - 在 django 中为开发生成数据

> ID：12129837
> 
> 赞同：2
> 
> 时间：2012-08-26T11:44:59.110
> 
> 标签：database, django, initialization, django-south

为了能够查看我的 django 应用程序的外观并处理大量数据，我想以编程方式在数据库中生成数据。在 django 文档中，他们建议使用fixtures oder SQL statements，但我宁愿使用简单的python循环通过使用django模型类生成数千个随机条目。

我怎样才能执行这样的脚本？我正在使用 south 进行数据库迁移，但即使在那里，似乎也不支持这样的数据生成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T11:56:09.553

您可以使用[django-whatever](https://github.com/coagulant/django-whatever)（增强的 django-any）——它可以轻松创建虚拟数据。

这是我的示例（在 *app_name*/management/commands/dummyitems.py 中）：

```
class Command(BaseCommand):
    args = '[count]'

    def handle(self, count=20, *args, **options):

        try:
            i = int(count)
        except ValueError:
            print u'n is to be a number!'
            sys.exit(1)

        for _ in xrange(i):
            # you can pass params explicitly
            m = any_model(MY_MODEL_CLASS, image=None)
            m.save() 
```

因此，如果我需要 100 个虚拟项目，我会运行：

```
$ python manage.py dummyitems 100 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T11:49:00.557

直接回答您的问题 - 此类脚本作为[自定义管理命令](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)运行，但使用像 Northwind 这样的预填充数据库会更简单。请参阅[this answer](https://stackoverflow.com/questions/8552256/how-to-implement-northwind-in-django)了解如何为 django 实现它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-17T07:10:37.423

首先安装这个包[https://pypi.org/project/model-mommy/](https://pypi.org/project/model-mommy/)然后在 django shell 上运行这个代码。它为项目中的所有模型生成假数据。

```
from django.apps import apps
from django.conf import settings
from model_mommy import mommy

for app in settings.INSTALLED_APPS:
    try:
        app_models = apps.get_app_config(app).get_models()
    except:
        continue
    for model in app_models:
        try:
            mommy.make(model, _quantity=100)
        except:
            print('error') 
```

# php - 在 URL 上使用 htmlspecialchars

> ID：12129838
> 
> 赞同：1
> 
> 时间：2012-08-26T11:45:08.177
> 
> 标签：php, url, encoding, html-entities, htmlspecialchars

我有这种格式的网址：

> http://site.com/index.php?title=[SOME_UNICODE_TITLE]&id=[ID]&type=[TYPE]

当我尝试`htmlspecialchars`在此 URL 上使用对 unicode 标题进行编码时，该函数`&`也会进行编码；所以它会将`&amp`变量名`id`转换为`ampid`！所以我无法从代码中读取它。

如何`htmlspecialchars`在不转换 URL 特定字符（例如`&`，、`=`...）的情况下在 URL 上使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T11:54:44.237

恕我直言，您应该只`urlencode()`用于 URL，因为这就是它的用途。如果你不能/不想使用它，你总是会得到一个完整的 URI。您可以在编码之前解析 if ：

```
$uriParts = parse_url($fullUri);
$queryParts = array();
parse_str($uriParts['query'], $queryParts);

foreach($queryParts as $name => $value) {
    $queryParts[$name] = htmlspecialchars($value);

    // don't know whether you want to encode the key too
} 
```

[http://php.net/manual/en/function.parse-str.php](http://php.net/manual/en/function.parse-str.php)
[http://www.php.net/manual/en/function.parse-url.php](http://www.php.net/manual/en/function.parse-url.php)

示例：[http ://codepad.viper-7.com/lIFiHB](http://codepad.viper-7.com/lIFiHB)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T11:48:08.573

如果您只是对数据进行编码，而不是将 htmlspecialchars 应用于整个 url，则建议仅将其仅应用于内容。这样，您将使用数据中的特殊字符保存 url

# android - 在android的webview中渲染PDF

> ID：12129842
> 
> 赞同：0
> 
> 时间：2012-08-26T11:45:34.267
> 
> 标签：android

> **可能重复：**
> [android webview pdf](https://stackoverflow.com/questions/2655972/android-webview-pdf)

我正在尝试在我自己的包含大图像的活动中打开 PDF。使用 MuPDF 和其他库会降低我的应用程序性能，所以我不想使用它。

是否可以使用android中SD卡文件中的webview在自己的活动中打开PDF？

任何帮助将不胜感激......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T12:26:00.163

You may find [Android PDF problem](https://stackoverflow.com/a/4278587/432903) same as yours (of date Nov 2010), suggesting you to open stored pdf with Intent Call.

```
 File file = new File("/sdcard/your_file.pdf");
   Uri path = Uri.fromFile(file);
   Intent intent = new Intent(Intent.ACTION_VIEW);
   intent.setDataAndType(path, "application/pdf");
   intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
   startActivity(intent); 
```

Also check [How do I determine if Android can handle PDF](https://stackoverflow.com/a/2790374/432903)

# java - Play 的 Java 反射的性能和替代方案！框架类路由功能

> ID：12129846
> 
> 赞同：1
> 
> 时间：2012-08-26T11:46:01.657
> 
> 标签：java, reflection, playframework, routes

我正在创建一个小型 Java Web 应用程序，我在其中定义了一个路由文件，该文件为每个操作指定应执行的控制器方法。

为了做到这一点，我解析了这个路由文件，并在我的主 Servlet 中，根据收到的调用，我使用反射来调用所需的方法。

但是，Java 反射会导致性能开销（基于 JVM 等）。

因此，我想问一下，这是否是正确的程序，或者是否有另一种选择来执行此类任务。

提前非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T20:55:34.493

在这种情况下，通过反射调用方法的性能开销可以忽略不计：我估计反射方法调用将花费大约 0.1 微秒，而客户端和服务器之间的网络延迟很容易达到 10 毫秒。也就是说，不到 0.001% 的响应时间是由于反射开销造成的。

带回家的信息：当被告知某事“慢”时，请始终询问“与什么相比”，并在优化性能之前尝试评估它是否可能产生可衡量的性能影响。（如果你有一个实际的性能问题要解决，测量你的程序的哪些部分是慢的，优化那些 - 然后再次测量）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T20:15:13.277

反射似乎是动态路由的一种方法，并且向开发人员提供良好的反馈，所有这些都在快速的开发/测试周期中。

作为消除开销的替代方法，可以想象有一个“编译”步骤，该步骤将从路由文件中生成 Java 代码。但我个人不建议这样做。

在任何情况下，如果没有进行衡量，就规定性能是一个问题似乎还为时过早。

# codeigniter - 完全不同的Codeigniter安装上的多站点管理员..重复的内容？

> ID：12129849
> 
> 赞同：0
> 
> 时间：2012-08-26T11:46:19.200
> 
> 标签：codeigniter, admin, code-duplication

我正在为我的三个网站使用 codeigniter。我为每个人使用单独的安装，因为我相信随着他们的成长，他们每个人都需要自己的服务器，而且这种设置似乎更容易。

我正在为这三个站点开发广告后端，并决定最好的方法是在完全不同的服务器/域上安装第四次 CI，以确保安全。

这样每天早上我都可以登录，查看我所有站点所需的所有统计信息和管理任务，并且我可以从一个地方执行它们。

这样做的问题是需要重复代码。我每个站点的模型中的代码都需要在管理站点中部分重复。

不太理想，但这真的重要吗？有没有更好的方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T11:54:47.417

好吧..据我了解，如果您要在 3 个不同的服务器上访问 3 个不同的网站，那么无论如何都要让您在 3 个不同的服务器上管理重复的代码（如果需要）。但是，如果所有这些都将在同一台服务器上，那么您可以创建像 spark 这样的 HMVC 架构，您可以在其中集中所有重复的代码，然后在需要的地方使用它。这样您就可以避免重复编码。

其他方式是一个粗略且未经测试的解决方案，您说它只是第 4 个应用程序，您需要从所有其他 3 个应用程序中获取代码，然后您可以创建代码的软链接并尝试。也许这可以帮助你解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T11:57:24.877

CodeIgniter 2.* 允许第三方包，可以在服务器上的任何地方。如果您将所有站点都放在不同的服务器上，这可能会出现问题，但如果您将它们放在一个服务器上，则可以使用共享代码。第三方包类似于模块，但没有任何路由。

有关详细信息，请参阅Phil Sturgeon的[此主题和](http://philsturgeon.co.uk/blog/2010/04/codeigniter-packages-modules)[CodeIgniter 用户指南](http://codeigniter.com/user_guide/libraries/loader.html)

# ruby-on-rails - RoR 提交对象以供批准，仅在批准后处理付款

> ID：12129854
> 
> 赞同：1
> 
> 时间：2012-08-26T11:47:12.700
> 
> 标签：ruby-on-rails, paypal, ruby-on-rails-3.2, payment-gateway

我有一个相当笼统的问题，我希望得到一些建议。

我正在创建一个基本的 Ruby on Rails 工作应用程序，用户可以在其中提交工作并申请其他职位。

我想要发生的是，当用户提交作业时，它会进入一个等待池（比如一个 awaiting_approval 表），然后等待管理员批准。

在管理员批准后，我希望这份工作离开“持有池”并推入我的主要工作表。同时，我还希望从用户那里获得付款。

我很想自己不处理付款细节，所以很想知道是否有人曾经设法通过 Paypal 或其他支付提供商实施类似的事情？

任何有关如何实现此设置的建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T13:27:05.050

Ryan Bates 做[了一大堆](http://railscasts.com/?tag_id=23)关于在 Rails 中集成各种支付服务的截屏视频。他包括 PayPal、ActiveMerchant、Stripe 和 Spree。值得给他们一个关注，因为即使像 ActiveMerchant 这样的库也有很多小细节需要注意。

考虑到它的简单性和成本，我个人的选择是[Stripe 。](https://stripe.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T12:28:59.497

Your instincts are correct about not processing your own payments. Rolling your own PCI-compliant payment system is not trivial. Read up on security standards here: [https://www.pcisecuritystandards.org/merchants/](https://www.pcisecuritystandards.org/merchants/)

I haven't had a chance to use it myself but the ActiveMerchant gem is the most popular way to communicate with payment gateways. It's supports PayPal as well as a bunch of other gateways: [https://github.com/Shopify/active_merchant](https://github.com/Shopify/active_merchant)

# dom - Rangy - 在 insertElement 之前关闭父元素

> ID：12129868
> 
> 赞同：0
> 
> 时间：2012-08-26T11:49:02.587
> 
> 标签：dom, rangy

我有一个像

```
<AnyTag>here is a sample test text and more text</AnyTag>. 
```

现在我正在选择“测试”并单击页面中的斜体按钮，它会创建一个新元素`<span class="ItalicClass">`和它`surroundContents()`。这炒得很好。

现在我有文字

```
<AnyTag>here is a <i>sample test text</i> and more text</AnyTag>. 
```

现在，如果我选择“测试”，它会做同样的事情，但我想先关闭父元素，然后插入新元素。我知道因此我可以在元素`parentNode`中插入一个新类。`span`同样，我需要在新元素结束后打开同一个父级。最后一行应该是

```
<AnyTag>here is a <i>sample </i><span class="ClassB">test</span><i> text</i> and more text</AnyTag> 
```

如果我选择“更多”这个词，那么

```
<AnyTag>here is a <i>sample test text</i> and <span class="ClassA">more</span> text</AnyTag>. 
```

感谢这方面的任何指示。

问候多米尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:59:28.087

首先，您需要在两个索引处拆分包含“示例测试文本”的文本节点，以便拥有三个并排的文本节点：“示例”、“测试”和“文本”。（注意示例和文本中的空格）。

其次，创建一个包含父节点开始到“示例”文本节点结束的范围。提取内容。

```
var range, frag;
range = rangy.createRange();
range.setStartBefore(parent); //your 'i' tag
range.setEndBefore(textNode); //your text node 'sample '
frag = range.extractContents(); //extract a document fragment - removes items from dom
parent.parentNode.insertBefore(frag, parent); //place the fragment before the parent node 
```

重复这些相同的步骤，这次创建一个从文本节点“文本”开始到父节点结束的范围。

```
var range, frag;
range = rangy.createRange();
range.setStartAfter(textNode); //your text node ' text'
range.setEndAfter(parent); //your 'i' tag
frag = range.extractContents(); //extract a document fragment - removes items from dom
parent.parentNode.insertBefore(frag, parent.nextSibling); //place the fragment after the parent node 
```

最后，解开原始父节点“i”的内容并用新标签重新包装它。

如果有任何不清楚，请告诉我。我一直在构建一个所见即所得的编辑器，并彻底测试了这个想法。

# email - 通过 SMTP 发送电子邮件时出错

> ID：12129869
> 
> 赞同：2
> 
> 时间：2012-08-26T11:49:05.067
> 
> 标签：email, message, asp.net-4.0, smtpclient

通过 SMTP 服务发送电子邮件时收到以下错误消息：

![在此处输入图像描述](../Images/491c2764621d0dab57eab6a72cc3ae34.png)

我的系统上有以下 SMTP 设置：

![在此处输入图像描述](../Images/be85fc7581ee2bf2aad25e0a5aff2351.png)

操作系统：Windows 7 家庭高级版

IIS：IIS 7

我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:02:43.513

根据内部异常和您的代码，您正尝试通过 127.0.0.1 发送邮件。

删除代码中将 smtp 主机设置为 127.0.0.1 的行应该会导致站点使用 IIS 中定义的 SMTP 设置。

由于 SMTP 设置通常在服务器设置、实时/测试环境之间有所不同，因此通常最好不要在代码中硬编码 SMTP 设置（例如 Host），而是通过 IIS 设置设置（实际上取自 web.config 的部分system.net/mailSettings）。

**编辑：**

由于您的 web.config 没有 mailSettings 部分，我假设您在服务器视图中从 IIS7 中的 SMTP 电子邮件中截取屏幕截图。网站视图中有一个类似的部分。

您可以手动将 mailSettings 添加到 web.config：我通常这样做。

对于您的设置（即，将电子邮件作为文件存储在目录中），需要以下内容：

```
 <system.net>
    <mailSettings>
      <smtp deliveryMethod="specifiedPickupDirectory">
        <specifiedPickupDirectory pickupDirectoryLocation="c:\inetpub" />
      </smtp>
    </mailSettings>
  </system.net> 
```

请注意，这不会*发送*电子邮件，而只是将它们存储在文件夹中，以便 SMTP 服务器接收它们。要发送它们，您需要设置 SMTP 服务器或连接到第三方服务器，例如[http://sendgrid.com](http://sendgrid.com)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T11:51:48.870

我建议您查看异常详细信息，包括任何内部异常。冒昧地猜测一下，也许您没有写入 C:\Inetpub 的权限。

# sed - 如何在使用 sed 的模式之前删除换行符/换行符

> ID：12129870
> 
> 赞同：7
> 
> 时间：2012-08-26T11:49:12.390
> 
> 标签：sed, awk

标题已经说明了：

我想使用一些 linux one liner（例如 sed）

改造

```
Anytext
{ 
```

进入

```
Anytext{ 
```

这可以使用 sed 完成，或者如果不使用 sed 则使用 awk one liner 来完成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T11:53:45.360

当然，

```
sed 'N;s/\n{/{/' 
```

或者更彻底的版本：

```
sed ':r;$!{N;br};s/\n{/{/g' 
```

在这里，`:r`设置一个标签，我们可以参考它来创建一个循环；

`$!{...}`对除最后一行之外的每一行执行给定的命令集；

`N;br`是在循环中执行的两个命令：`N`将新行附加到模式空间，然后`br`分支回到 label `r`，完成循环。

然后，当您运行最终命令时，您的所有文件都在模式空间中：

```
s/\n{/{/g 
```

如果您尝试使用类似的方法，您可以看到这两种方法之间的区别

```
Anytext
{
{
{ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T12:02:13.417

一种使用方式`sed`：

```
sed -ne '$! N; /^.*\n{/ { s/\n//; p; b }; $ { p; q }; P; D' infile 
```

一个测试。假设`infile`内容：

```
one
Anytext
{
two
three
{
four
five
{ 
```

输出将是：

```
one
Anytext{
two
three{
four
five{ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T12:07:59.077

如果打算从`\n{`序列中删除换行符`bbe`似乎是最简单的工具：

```
bbe -e 's/\n{/{/' infile 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-26T12:32:34.110

这可能对您有用（GNU sed）：

```
sed ':a;$!{N;/.*\n{/ba};s/\n{/{/g;P;D' file 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-04T08:14:20.433

使用`awk`

```
cat file
one
Anytext
{
two
three
{
four
five
{ 
```

```
awk '{printf (!/^{/&&NR>1?RS:x)"%s",$0} END {print ""}' file
one
Anytext{
two
three{
four
five{ 
```

# java - 错误：- 'java' 未被识别为内部或外部命令

> ID：12129872
> 
> 赞同：2
> 
> 时间：2012-08-26T11:49:32.003
> 
> 标签：java, ant, h2

我尝试在 ANT 下运行 Activiti BPM 工具，但出现以下错误：- **错误：- 'java' 未被识别为内部或外部命令**；当我尝试在 Windows 7 下使用 CMD 命令行启动演示应用程序时，出现以下错误：-

```
C:\activiti-5.10\activiti-5.10\setup>ant demo.start
    Buildfile: C:\activiti-5.10\activiti-5.10\setup\build.xml

    demo.install:

    internal.cfg.create:
     [copy] Copying 1 file to C:\activiti-5.10\activiti-5.10\setup\build\activit
i-cfg
      [zip] Building zip: C:\activiti-5.10\activiti-5.10\setup\build\activiti-cf
g.jar
     [echo] copying configuration to ../workspace/activiti-engine-examples/src/m
ain/config
    [unzip] Expanding: C:\activiti-5.10\activiti-5.10\setup\build\activiti-cfg.j
ar into C:\activiti-5.10\activiti-5.10\workspace\activiti-engine-examples\src\ma
in\config

internal.classpath.libs:

internal.taskdef.launch:

h2.start:
     [echo] starting H2 database...
   [launch] launching cmd 'C:\activiti-5.10\activiti-5.10\apps\h2\h2.start.bat '
 in dir 'C:\activiti-5.10\activiti-5.10\apps\h2'
   [launch] waiting for launch completion msg 'TCP server running'...
   [launch]   'java' is not recognized as an internal or external command,
   [launch]   operable program or batch file.
   [launch] launched process completed
     [echo] H2 database started

tomcat.start:
   [launch] launching cmd 'C:\activiti-5.10\activiti-5.10\apps\apache-tomcat-6.0
.32\bin\startup.bat ' in dir 'C:\activiti-5.10\activiti-5.10\apps\apache-tomcat-
6.0.32\bin'
   [launch] waiting for launch completion msg 'Using CLASSPATH:'...
   [launch]   Using CATALINA_BASE:   "C:\activiti-5.10\activiti-5.10\apps\apache
-tomcat-6.0.32"
   [launch]   Using CATALINA_HOME:   "C:\activiti-5.10\activiti-5.10\apps\apache
-tomcat-6.0.32"
   [launch]   Using CATALINA_TMPDIR: "C:\activiti-5.10\activiti-5.10\apps\apache
-tomcat-6.0.32\temp"
   [launch]   Using JRE_HOME:        "C:\Program Files\Java\jdk1.7.0_06"
   [launch]   Using CLASSPATH:       "C:\activiti-5.10\activiti-5.10\apps\apache
-tomcat-6.0.32\bin\bootstrap.jar"

explorer.browser.open:

demo.start:

BUILD SUCCESSFUL
Total time: 5 seconds 
```

有谁知道出了什么问题？BR

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T12:01:48.053

> 错误：- 'java' 未被识别为内部或外部命令；

这意味着它`java.exe`不是您的`PATH`.
添加`%JAVA_HOME%\bin`到您的`PATH`哪里`JAVA_HOME`是您的 java 安装目录

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T12:09:27.900

只需添加`C:\Program Files\Java\jdk1.7.0_06\bin`到您的 PATH。

原因是批处理文件`C:\activiti-5.10\activiti-5.10\apps\h2\h2.start.bat`有一个`java`依赖于`java.exe`PATH 的原始命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-23T08:52:03.347

我有一个类似的问题。出于某种原因，Java JDK 已正确安装在 C:\Program Files (x86)\Java**但**路径中设置为 C:\Program Files\Java ... 一旦我更正了路径变量，它就解决了这个问题。

此外，请注意您是否让 Jenkins 和 Java 使用相同的端口号，这可能会导致看起来一切正常，您需要让它们使用单​​独的端口号。要检查此停止 Jenkins 是否作为服务运行，然后重新启动 Tomcat

# web-applications - 如何将 SmartGWT 应用程序集成到网站中？

> ID：12129873
> 
> 赞同：0
> 
> 时间：2012-08-26T11:49:36.283
> 
> 标签：web-applications, web, integration, smartgwt

我制作了一个简单的应用程序，现在我需要将它集成到现有网站中，但我似乎找不到任何关于我应该如何做的材料。我确实发现与皮肤/主题有关，虽然我在某些时候需要这个，但目前这不是我想要的。

编辑：这是我想要将 Web 应用程序集成到的页面：[http](http://skrobot.gandzo.com/#!/vjezbenici/) ://skrobot.gandzo.com/#!/vjezbenici/ 这里的内容 div (id="main_content") 是空的，它将包含的内容是登录表单 - 用户名和密码字段。用户登录后，将加载应用程序（它是一个单页应用程序）。

这里的问题是我刚刚制作了一个原型，它由几个垂直/水平布局项目组成，这些布局项目分布在加载页面的整个宽度上。我必须承认，我没有尝试从您的引导页面插入 HTML，因为我不知道这将如何工作，因为我希望应用程序仅在特定的 div 中加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:37:51.913

要将现有的 Web 应用程序合并到您的 SmartGWT 应用程序中，请使用 HTMLPane。它将在内部创建一个 iframe 元素。

# joomla - joomla 升级 2.5.3 到 2.5.6 后出错

> ID：12129876
> 
> 赞同：2
> 
> 时间：2012-08-26T11:49:56.600
> 
> 标签：joomla, upgrade, fatal-error

将 joomla 从 2.5.3 升级到 2.5.6 后，我遇到了一个致命错误，并且在所有论坛上都找不到任何解决方案。在通过管理后端升级 joomla 失败后，我使用安装扩展面板下载并安装了 joomla 升级 2.5.6。它说安装成功。

登录管理面板后，一切都是空的，只有右上角的“查看站点”和“注销”按钮可见。

在前端显示以下错误。

警告：在第 90 行的 /homepages/44/d33570217/htdocs/joomla/libraries/joomla/application/menu.php 中为 foreach() 提供的参数无效

警告：在第 449 行的 /homepages/44/d33570217/htdocs/joomla/includes/application.php 中为 foreach() 提供的参数无效

警告：从第 471 行 /homepages/44/d33570217/htdocs/joomla/includes/application.php 中的空值创建默认对象

致命错误：在第 10 行的 /homepages/44/d33570217/htdocs/joomla/templates/beez_20/error.php 中的非对象上调用成员函数 get()

升级必须覆盖了一些文件，我无法本地化问题。不是模板问题，我试过在数据库中切换。Configuration.php 也可以，所有值都和升级前一样。

有人可以帮我找出问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:50:19.090

有时会因为会话问题而发生这种情况。尝试使用按钮注销以终止旧会话。此外，一旦进入数据库选项卡并检查更新。

# c++ - 实现重载运算符'<<'时出错 - C++

> ID：12129882
> 
> 赞同：0
> 
> 时间：2012-08-26T11:51:04.603
> 
> 标签：c++, overloading, operator-keyword

我目前正在尝试重载 '<<' 运算符，但一直收到此错误消息：

> 在函数 'std::ostream& operator<<(std::ostream&, const :Linkedlist&)': Linkedlist.cpp:148:34: error: no match for 'operator<<' in 'std::operator<< [with _CharT = char, _Traits = std::char_traits, _Alloc = std::allocator](((std::basic_ostream&)((std::ostream*)outs)), ((const std::basic_string&)((const std ::basic_string*)(& Node::node::fetchData()())))) << " "' Linkedlist.cpp:142:15: 注意：候选是：std::ostream& operator<<(std: :ostream&, const 链表&)

重载的运算符函数在 Linkedlist 实现文件中被声明为友元成员函数，因为它将访问私有成员变量（head_ptr）：

```
std::ostream& operator <<(std::ostream& outs, const Linkedlist& source)
{
    node* cursor;
    for(cursor = source.get_head(); cursor != NULL; cursor = cursor->fetchLink())
    {
        outs << cursor->fetchData() << " ";
    }

    return(outs);
} 
```

这是 Linkedlist 头文件中的函数原型：

```
friend std::ostream& operator <<(std::ostream& outs, const Linkedlist& source); 
```

我已经爬网了，到目前为止还没有找到解决方案。任何建议都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T11:55:12.833

你的 cursor->fetchData() 返回一个 std::string 吗？如果是这样，您必须`#include <string>`. 或者，尝试

```
outs << cursor->fetchData().c_str() << " "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-17T05:22:28.583

对您可能发布的未来帖子的建议：如果您在问题中发布部分代码，请发布所有相关位。目前，尚不清楚`fetchData()`返回的是什么。

从外观上看，似乎`fetchData()`返回的东西没有`std::ostream::<<`.

当您输出到一个`std::ostream`实例时，所有组件都必须具有定义的行为。例如，在下面的示例中，`<<`要使用 的实例`A`，运算符必须`x`直接使用或`B`需要定义一些行为，其中它推送标准`ostream`运算符已知的一些值。否则，您必须为链中的所有内容提供重载。

```
class B
{
friend std::ostream& operator<<(std::ostream& stream, const B& b);
int x = 10;

};

class A
{
private:
B b;
friend std::ostream& operator<<(std::ostream& stream, const A& a);
};

std::ostream& operator<<(std::ostream& stream, const B& b)
{
   stream << b.x;
   return stream;
}
std::ostream& operator<<(std::ostream& stream, const A& a)
{
   stream << a.b;
   return stream;
}
int main()
{
  A a;
  std::cout << a << "\n";
  return 0;
} 
```

我的怀疑是`fetchData()`返回一个没有`<<`运算符重载的类型。这就是你看到失败的原因。

你只能做两件事

1.  确保返回的类型`fetchData()`具有 的重载`<<`。C++ 本机和字符串类型 (in `<string>`) 已经具有此功能。如果它是自定义类型，那么您必须为该类型编写重载。
2.  从 中返回一个字符串`fetchData`。这样你就可以利用in的`std::string`重载。`<<``<string>`

正如我之前所说，在不知道`fetchData()`返回什么的情况下，很难说这里出了什么问题。

# c++ - 在C中运行没有系统调用的sed

> ID：12129883
> 
> 赞同：0
> 
> 时间：2012-08-26T11:51:20.097
> 
> 标签：c++, c, bash

我正在编写 C/C++ 代码，它所做的一件事就是替换包含句子的行`UNIX_CODE_TOKEN=`。我以为我会`system()`为了运行而使用`sed -i ...`. 不过，我注意到这`system()`不是很有效。因此，我来​​向您寻求好的建议。

是否有一个 C/C++ 内置函数可以不`sed -i`使用`system()`? 请不要告诉我`fstream`在 C++ 或`FILE *`C 中使用（fseek 和 lseek 也无济于事，因为我想替换一行中的特定单词），我决定不编写一个进行替换的函数。

感谢您的任何帮助/建议/回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T12:04:58.433

system() 通常通过 fork() 来拆分进程， exec() 在子进程中启动 /bin/sh （或其他），并在父进程中执行 waitpid() 以阻塞直到子shell完成。在您的情况下，您可能需要自己实现此功能，但直接执行 exec() /bin/sed 而不是 /bin/sh。

然而，正确地实现这一点是一项合理的工作。您是否真的对程序进行了基准测试和分析以确定 system() 是否甚至是性能问题？sed 很可能很慢 - 毕竟它必须访问一个慢速磁盘 - 而且您的调查不正确地指法 system()。您可能会发现最快的方法确实是直接在您的程序位中处理文件，这实际上并不会使其总体上更快。

你试图解决的更高层次的问题是什么？很有可能完全不需要编辑文件。

# c++ - 有效地将数组的 (n-1) 个元素相乘

> ID：12129885
> 
> 赞同：10
> 
> 时间：2012-08-26T11:52:00.457
> 
> 标签：c++, c, performance

> **可能重复：**
> [面试问：给定一个数字数组，返回所有其他数字的乘积数组（无除法）](https://stackoverflow.com/questions/2680548/interview-q-given-an-array-of-numbers-return-array-of-products-of-all-other-nu)

我有两个数组`inputArray`，每个数组`resultArray`都有`n`元素。
任务是 in 的第 n 个元素`resultArray`应该是`inputArray`除`inputArray`( `n-1`elements in all) 的第 n 个元素之外的所有元素的乘法。
例如。`inputArray={1,2,3,4}`
那么`resultArray={24,12,8,6}`
这很容易......

```
for(i = 0; i < n; i++)
  for(j = 0; j < n; j++)
    if(i != j) resultArray[i] *= inputArray[j]; 
```

但问题是复杂度不应该超过***O(n)***
而且我们不允许使用除法。
我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T12:03:55.287

在不破坏太多的情况下，您应该尝试使用两个变量来存储乘法的结果：第 i 个元素左侧和第 i 个元素右侧的乘法的累积结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T12:08:17.640

您可以使用 DP 方法，如下所示：

```
vector<int> products(const vector<int>& input) {
    int N = input.size();
    vector<int> partial(N+1); // partial[i] = input[0]...input[i-1]. partial[0] = 1
    partial[0] = 1;
    for (int i = 0; i < N; ++i) partial[i+1] = input[i]*partial[i];
    vector<int> ans(N);
    int current = 1;
    for (int i = N-1; i >= 0; --i) {
        // current is equal to input[i+1]...input[N-1]
        ans[i] = partial[i]*current;
        current *= input[i];
    }
    return ans;
} 
```

这种方法的一种可能用法是当您处理无法除以的事物时（例如，考虑与矩阵相同的问题）。

我使用 STL 向量完成了这个解决方案，但当然可以轻松地“翻译”代码以使用 C 数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T13:10:06.750

```
main()
{

      int i,l,r,x[5]={1,2,3,4,5},y[5]; // x is the initial array, y is the final array

      int n = 5; // n be the size of the array, here already defined as 5

      l = 1; // l is the product of the values of the left side of an index in x
      r = 1; // r is the product of the values of the right side of an index in x

      for (i=0 ; i<5 ; i++) y[i]=1; // initialising all y values to 1

      for (i=0 ; i<5 ; i++)
      {
          y[i] = y[i]*l ;
          y[n-i-1] = y[n-i-1]*r;

          l = l*x[i];
          r = r*x[n-i-1];

      }

      for (i=0; i<5; i++) printf("%d\n",y[i]);

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-26T12:01:09.203

你知道乘以奇数是可逆的——只用乘法吗？请参阅 Hacker's Delight，称为“精确除法”。正如那里解释的那样，这个技巧也可以扩展到偶数。所以你可以用几个乘法“除”第n个数字——因为这是家庭作业，我会留给你来看看如何。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-26T12:26:44.770

Seeing Daniel Fleischman's answer, I decided I had to give my own implementation, since his has so many lines of code!

```
int i, buffer=1, result[n];
for(result[0]=1,i=1;i<n;i++) result[i] = result[i-1]*inputArray[i-1];
for(i=n-1,buffer=1;i>=0;buffer*=inputArray[i],i--) result[i]*=buffer; 
```

Three lines of code (with all the fat cut out).

[http://ideone.com/EaQiu](http://ideone.com/EaQiu)

# facebook - FQL：如何在评论社交插件中检索使用其他提供商登录的评论用户的用户名/名称？

> ID：12129886
> 
> 赞同：0
> 
> 时间：2012-08-26T11:52:07.123
> 
> 标签：facebook, facebook-fql, facebook-comments

我刚刚设置了一个很好的方法来获取通过 FB 的评论社交插件在我的网站上发表的评论，使用 PHP 和 OpenGraph/FQL 请求（我没有使用 Facebook SDK）。

我需要它在相关的 iOS 应用程序中显示评论。实际上，此方法检索所有评论，如果存在相关答案，以及有关发表评论的用户的用户名/图片。

问题来自与另一个提供商签署的用户发表的评论。FQL 结果为：

```
 "fromid": XXXXXXXXXXXXXXX,          //first ID, usually is uid in "user" table
  "text": "comment text", 
  "time": 1345979042, 
  "comments": {
    "data": [
      {
        "id": "YYYYYYYYYYYYYYYYYY",   //not relevant, URL id
        "from": {
          "name": "externaluser", 
          "id": ZZZZZZZZZZZZZZZ      //another ID, usually uid too, different from XXXXX 
        }, 
        "message": "test reply", 
        "created_time": 1345979528
      }
    ], 
    "count": 1
  } 
```

此结果正确地给出了注释文本，但 ID 不存在于用户表中。“回复”正确返回名称“externaluser”，但我无法在任何查询 FQL 表的地方找到它。

我确信这个外部用户存储在 Facebook 数据库中的某个地方！有人可以指出我检索用户数据的正确关系吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:53:19.503

We ran into the same issue and finally found a FQL query that gives us the names of the people making comments. When pulling data from the stream, there were actually two sets of names that we needed, the names of the people posting to the stream and the names of the commenters. A triple query was needed to get the data. Its a rather large query, so I've cut it down to only the relevant fields.

```
{"q1":"SELECT source_id, likes, comments, actor_id,  post_id FROM stream WHERE filter_key IN ( SELECT filter_key FROM stream_filter WHERE uid = me())",
 "q2":"SELECT id, username, name FROM profile WHERE id IN (SELECT actor_id FROM #q1)",
 "q3":"SELECT id,name,username FROM profile WHERE id IN (SELECT fromid FROM comment WHERE post_id IN (SELECT post_id FROM #q1))"} 
```

Query 1 gives you the items from the stream. Query 2 gives you the information for the people that posted to the stream. You'll need to do a cross reference from actor_id in q1 to id in q1. Query 3 gives you the information for the people that commented on anything returned in q1\. You'll need to do a cross reference from formid in q1.comments.comment_list to id in q1.

Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T13:23:22.330

你可以试试这个 FQL：

```
SELECT id, name, username FROM user WHERE third_party_id = ZZZZZZZZZZZZZZZ 
```

如果这不能让您接触到用户，那么我认为您将无法从 FB 服务器获取该详细信息。

# wordpress - Wordpress.com 托管

> ID：12129887
> 
> 赞同：0
> 
> 时间：2012-08-26T11:52:16.423
> 
> 标签：wordpress, shared-hosting, self-hosting, wordpress.com

我在 hostmonster.com 上注册了一个域，而我的博客现在在 wordpress.com 上，我如何将我的域转移到 Wordpress（我认为这是不可能的）或将我的域 URL 映射到我的 Wordpress 博客。

注意：我不需要自托管我想使用 wordpress.com 托管。

知道我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T12:07:13.710

实际上，您可以在 Wordpress.com 上托管您的 DNS。如果那是你想要的，那么你这样做 -

1.  通过您的注册商，将您的域指向 Wordpress.com DNS 服务器
    1.  主 DNS 服务器：NS1.WORDPRESS.COM
    2.  辅助 DNS 服务器：NS2.WORDPRESS.COM
2.  转到您在 wordpress.com 上注册的博客并登录仪表板。
3.  点击商店
4.  购买“添加域”
5.  单击设置，然后单击域
6.  在“添加域”字段中输入您购买的域名，然后单击“将域添加到博客”
7.  添加域后，单击“编辑 DNS”
    1.  您需要的大部分设置将默认设置。
    2.  如果您有 Google Apps 帐户，则可以使用此编辑界面添加他们为您提供的验证码，以确认该域是您的。

# java - XPath 查询的循环结果运行两次？

> ID：12129888
> 
> 赞同：0
> 
> 时间：2012-08-26T11:52:38.200
> 
> 标签：java, xml, loops, xpath, repeat

我想打印出将查询与 | 组合在一起的 XPath 表达式的组结果。操作员。（可以，但是有问题）

我的 XPath 表达式是：

```
//y-axis-title/text() | /bar-chart/bars/bar[@number='4']/value/text() |//bar[@number='5']/value/text() 
```

我的代码：

```
public void loadData() {
            dl.loadDocuments("input\\bars.xml");
            try {
                XPath yAxisTitle = XPath.newInstance("//y-axis-title/text() | /bar-chart/bars/bar[@number='4']/value/text() | //bar[@number='5']/value/text()");
                List<Text> elements = (List<Text>)yAxisTitle.selectNodes(dl.getInputDocument());
                for(int i=0; i<elements.size(); i++){
                    System.out.println(elements.get(i).getText());
                }
            } catch (JDOMException jde){
                System.out.println("JDOMException at Exercise1.loadData(): "+ jde.getMessage());
            }
        } 
```

问题是它打印出这个：

```
长度
140
120
长度
140
120

```

虽然它只应该打印出来（我的预期结果）：

```
长度
140
120

```

某处必须执行我的循环两次。我不知道那是什么。这对我来说没有意义，因为该分组表达式中有 3 个结果集，因此计数器为 3。我在调试时检查了这个。这个'2'（即运行两次）来自哪里？

我该如何解决这个问题才能得到预期的结果？

谢谢。

编辑：示例**bars.xml**

```
<?xml version="1.0"?> 
<bar-chart> 
  <title>Bar Chart: Lengths</title> 
  <x-axis-title>Items</x-axis-title> 
  <y-axis-title>Length</y-axis-title> 
  <value>25</value> 
  <bars>
    <bar number="1">
      <value>90</value>
    </bar> 
  </bars> 
</bar-chart> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T12:49:36.200

谢谢 OR Mapper，解决了我的问题。

**修复**：从 Exercise1 类的*构造函数*
中 删除**loadData()**（与 loadData() 的内容相同的类，如我的问题所示）。

 *问题是 loadData() 已经在其他地方被调用：
在我的**Controller**类的*构造函数中：*

 **```
public SimpleXPathController(ISimpleXPath doc){
    model = doc;
    model.loadData();
} 
```

以及在Exercise1 类的*构造函数中：*

```
public Exercise1(){
    dl = new DocumentLoader();
    loadData();
} 
```

最后，在我的 UI 类中，我接到了这个电话：

```
SimpleXPathController simpleXPathController = new SimpleXPathController(new Exercise1()); 
```

导致：
1) 控制器调用*loadData()*
2) 练习 1 实例调用*loadData()*

我通过输入来解决它：

System.out.println("testing1"); 在 try{} 块的开头
和
System.out.println("testing2") 在 try{} 块的末尾。

问题解决了。***

# php - 我怎样才能使这个 AJAX 工作？

> ID：12129890
> 
> 赞同：2
> 
> 时间：2012-08-26T11:52:51.600
> 
> 标签：php, ajax, laravel

我正在尝试制作一小块 AJAX 来工作。它提醒我正确的网址，但我无法加载页面。这是 ajax.js ：

```
$(document).ready(function() {  
    $('#sidebar-content ul li a').click(function(){ 
     var toLoad = $(this).attr('href');  
    $('#content').load(toLoad);
    return false;
});
}); 
```

我在这里使用 Laravel 是我的 default.template.php ：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN""http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>{{$title}}</title>
    <meta name="description" content="Empire - XHTML Template" />
    {{ HTML::style('css/style.css') }}
    {{ HTML::script('js/jquery.min.js') }}
    {{ HTML::script('js/ajax.js') }}

    <!-- PAGE OPENING ANIMATION -->
    <script type="text/javascript">
        jQuery(document).ready(function()
        {jQuery('#page').css({'display':'inline','width':'300px','overflow':'hidden','margin-right':'340px'});
        jQuery('#sidebar').css({'margin-left':'326px'});});
        jQuery(window).load(function() {jQuery('#hp_preloader').delay(800).animate({'opacity':'0'},1400,function()
        {jQuery('#slider-nivo').nivoSlider(
        {controlNav:true,controlNavThumbs:false,keyboardNav:false,pauseOnHover:false,prevText:'',nextText:'',effect:'fade',animSpeed:300,pauseTime:4000});
        jQuery(this).remove();jQuery('#sidebar').delay(800).animate({'margin-left':'0px'},2100);jQuery('#page').delay(800).animate({'margin-right':'0px','width':'666px'},
        2100);});});
    </script> 
    <meta charset="UTF-8">
</head>
    <body>

<!-- SITE WRAPPER -->
<div id="wrapper">
<div id="page">
<div id="content">
{{ $content }}
<!-- SIMPLE HORIZONTAL LINE -->
<div class="hr2"></div>
</div>
<!-- #content ends -->
</div>
    <!-- #page ends -->
<!-- SIDEBAR -->
<div id="sidebar">
        <div id="sidebar-content">

    <!-- MENU -->
   <ul id="menu">
   <li class="current"><a href="<?php echo URL::to_route('articles'); ?>">ANASAYFA</a></li>

   <li><a href="<?php echo URL::to_route('abouts'); ?>">HAKKIMIZDA</a></li>
   <li>HİZMETLERİMİZ
    <ul>
    <li><a href="./blog3.html">Eğitim Hizmetlerimiz</a></li>
    <li><a href="./portfolio-3c.html">Neurofeedback</a></li>
<li><a href="./portfolio-2c.html">Biofeedback</a></li>
    </ul>   
</li>       
</div>
    <!-- #sidebar ends -->
    </div>
    <!-- #wrapper ends -->
</body>
</html> 
```

进入页面有动画。当我点击链接时，如果我点击警告地址显示正确但没有内容打开并且java控制台显示所有脚本文件再次加载。你能检查一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:57:56.440

看起来您忘记阻止`A`-tags 默认行为，即重定向。像这样修改你的点击事件：

```
$('#sidebar-content ul li a').click(function (e) {
    e.preventDefault(); // Prevents link's default behavior.
    var toLoad = $(this).attr('href');
    $('#content').load(toLoad);
    return false;
}); 
```

如果它仍然不起作用，`console.log()`请用于调试，如下所示：

```
$('#sidebar-content ul li a').click(function (e) {
    e.preventDefault(); // Prevents link's default behavior.
    var toLoad = $(this).attr('href');
    console.log(toLoad); // whats in toLoad?
    console.log($("#content")); // maybe content isnt there?
    $('#content').load(toLoad);
    return false;
}); 
```

# python - python os.listdir() 显示受保护的文件

> ID：12129892
> 
> 赞同：4
> 
> 时间：2012-08-26T11:53:05.237
> 
> 标签：python, windows, python-2.7

所以，我试图让自己成为一个 Python 脚本，它通过选定的音乐文件夹并告诉用户特定专辑是否没有专辑封面。它基本上遍历所有文件并检查`if file[-4:] in (".jpg",".bmp",".png")`，如果为真，它找到了一个图片文件。为了清楚起见，我的文件夹结构是：

*   音乐文件夹
    *   北极猴子
        *   骗子 (2009)
        *   吸一口，看看（2011）
    *   吗啡
        *   治愈疼痛 (1993)

.. 等等。我正在测试脚本以查找我的北极猴子目录中是否缺少封面，并且我的脚本通过“Humbug (2009)”文件夹并找到[不在命令提示符中显示的](https://dl.dropbox.com/u/34696560/python/ss.jpg)AlbumArtSmall.jpg所以我尝试了“显示隐藏的文件/文件夹”仍然没有。但是，[一旦我取消选中“隐藏受保护的操作系统文件”，文件就会显示出来](https://dl.dropbox.com/u/34696560/python/hidden.jpg)，所以这有点奇怪。

我的问题是 -**我如何告诉 Python 跳过搜索隐藏/受保护的文件？** 我查看了[如何使用 os.listdir() 忽略隐藏文件？](https://stackoverflow.com/questions/7099290/how-to-ignore-hidden-files-using-os-listdir-python)但我在那里找到的解决方案仅适用于以“。”开头的文件，这不是我需要的。

干杯!

* * *

编辑 - 这是代码：

```
import os

def findCover(path, band, album):
    print os.path.join(path, band, album)
    coverFound = False

    for mFile in os.listdir(os.path.join(path, band, album)):
        if mFile[-4:] in (".jpg",".bmp",".png"):
            print "Cover file found - %s." % mFile
            coverFound = True
            return coverFound

musicFolder = "E:\Music"   #for example
noCovers = []

for band in os.listdir(musicFolder):    #iterate over bands inside the music folder
    if band[0:] == "Arctic Monkeys":    #only Arctic Monkeys
        print band
        bandFolder = os.path.join(musicFolder, band)
        for album in os.listdir(bandFolder):
            if os.path.isdir(os.path.join(bandFolder,album)):
                if findCover(musicFolder, band, album): #if cover found
                    pass                                #do nothing
                else:
                    print "Cover not found"
                    noCovers.append(band+" - "+album)   #append to list
            else:                       #if bandFolder is not actually a folder
                pass
        print "" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:00:26.657

您可以与[`pywin32`模块](http://sourceforge.net/projects/pywin32/files/pywin32/)一起使用，并手动测试`FILE_ATTRIBUTE_HIDDEN`任何数量的属性

```
FILE_ATTRIBUTE_ARCHIVE              = 32
FILE_ATTRIBUTE_ATOMIC_WRITE         = 512
FILE_ATTRIBUTE_COMPRESSED           = 2048
FILE_ATTRIBUTE_DEVICE               = 64
FILE_ATTRIBUTE_DIRECTORY            = 16
FILE_ATTRIBUTE_ENCRYPTED            = 16384
FILE_ATTRIBUTE_HIDDEN               = 2
FILE_ATTRIBUTE_NORMAL               = 128
FILE_ATTRIBUTE_NOT_CONTENT_INDEXED  = 8192
FILE_ATTRIBUTE_OFFLINE              = 4096
FILE_ATTRIBUTE_READONLY             = 1
FILE_ATTRIBUTE_REPARSE_POINT        = 1024
FILE_ATTRIBUTE_SPARSE_FILE          = 512
FILE_ATTRIBUTE_SYSTEM               = 4
FILE_ATTRIBUTE_TEMPORARY            = 256
FILE_ATTRIBUTE_VIRTUAL              = 65536
FILE_ATTRIBUTE_XACTION_WRITE        = 1024 
```

像这样：

```
import win32api, win32con

#test for a certain type of attribute
attribute = win32api.GetFileAttributes(filepath)
#The file attributes are bitflags, so you want to see if a given flag is 1.
# (AKA if it can fit inside the binary number or not) 
# 38 in binary is  100110 which means that 2, 4 and 32 are 'enabled', so we're checking for that
## Thanks to Nneoneo
if attribute & (win32con.FILE_ATTRIBUTE_HIDDEN | win32con.FILE_ATTRIBUTE_SYSTEM):
  raise Exception("hidden file") #or whatever

#or alter them
win32api.SetFileAttributes(filepath, win32con.FILE_ATTRIBUTE_NORMAL) #or FILE_ATTRIBUTE_HIDDEN 
```

更改文件后，查看文件夹，它将不再隐藏。

[在此处](http://code.activestate.com/recipes/303343-changing-file-attributes-on-windows/)和此处找到此信息： [Checking file attributes in python](https://stackoverflow.com/questions/659847/checking-file-attributes-in-python)

* * *

或者，您可以尝试使用该`os.stat`功能，其文档[在此处](http://docs.python.org/library/os.html#os.stat)，然后使用该[`stat`模块](http://docs.python.org/library/stat.html)进一步了解您正在查看的内容。

找到了这些相关的问题。[(python) st_mode 的含义](https://stackoverflow.com/questions/4087427/python-meaning-of-st-mode)以及[如何获取文件的权限掩码？](https://stackoverflow.com/questions/5337070/how-can-i-get-a-files-permission-)

# java - 为什么 Calendar 类的这种奇怪行为

> ID：12129893
> 
> 赞同：3
> 
> 时间：2012-08-26T11:53:13.613
> 
> 标签：java, calendar

```
Calendar c = Calendar.getInstance();
c.set(2019, 12, 29); 
```

当我这样做时，`c.getTime()`我得到以下输出......

输出：

`Wed Jan 29 17:15:27 IST 2020` // 应该是 2019

/////------------------------------------------ ----------------//////

```
Calendar c = Calendar.getInstance();
c.set(2019, 11, 29); 
```

当我这样做时，`c.getTime()`我得到以下输出......

输出：

`Sun Dec 29 17:18:23 IST 2019`

现在我不知道为什么**将月份从 12 日更改为 11 日给了我正确的日期和时间**，如果有人能简单地解释这一点，如果可能的话，我会非常感激地用一个简单的小例子来解释这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T11:56:44.600

a 中的月份`Calendar`是从零开始的

> 公历和儒略历中的第一个月是 JANUARY，即 0

假设公历`11`是 12 月，并且`12`是明年的 1 月，这正是您的程序显示它的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T11:56:42.347

月份从 0 开始，你用 12 引用的实际上是 UNDECIMBER。因此，对于 Jan - Dec，您使用 0 - 11，12 是一个单独的月份，因此它将日历滚动到明年的 1 月。

请参阅： [http ://docs.oracle.com/javase/1.5.0/docs/api/constant-values.html#java.util.Calendar.UNDECIMBER](http://docs.oracle.com/javase/1.5.0/docs/api/constant-values.html#java.util.Calendar.UNDECIMBER)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T11:56:15.983

```
public final void set(int year,
                      int month,
                      int date)
Sets the values for the calendar fields YEAR, MONTH, and DAY_OF_MONTH. Previous values of other calendar fields are retained. If this is not desired, call clear() first.
Parameters:
year - the value used to set the YEAR calendar field.
month - the value used to set the MONTH calendar field. Month value is 0-based. e.g., 0 for January.
date - the value used to set the DAY_OF_MONTH calendar field. 
```

所以月份范围 0-11 。当您使用 12 时，它将转到明年。

参考：http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#set(int, int, int)

# jquery - 在 ios 上粘贴 div 的响应式导航

> ID：12129895
> 
> 赞同：0
> 
> 时间：2012-08-26T11:53:45.063
> 
> 标签：jquery, html, css, ios

我一直在追求特定的导航模式。首先，我将解释我希望它如何表现：

如果您想象一个带有大标题或导航栏的网页。当页面向下滚动时，页面下方的所有内容都会向上滚动，而标题在下方保持静止。

一个非常接近的例子在这里：http: [//inspectelement.com/demos/responsive/mobilenav/](http://inspectelement.com/demos/responsive/mobilenav/)

事实上，我尝试联系作者无济于事。

如果你想象那个例子，但是当向上滚动灰色条然后固定到屏幕顶部向上滚动灰色条需要再次分离并开始滚动。

我在很多地方都看到过这项工作，我什至建立了自己的。最大的问题是我看到的所有示例都不会立即在 iOS 上更新。上面的例子确实，我认为使用 jquery animate，但我有分离灰色条的问题，没有它在 ios 中跳跃。

如果有人可以提供帮助，我将不胜感激。

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T12:06:37.267

`position: fixed`我认为 css 属性完全符合您的要求。

编辑：这个线程的副本呢？[CSS“位置：固定；” 在 iPad/iPhone 上？](https://stackoverflow.com/questions/4889601/css-position-fixed-into-ipad-iphone)

# windows-phone-7 - 如何为应用发送 Marketplace URL？

> ID：12129899
> 
> 赞同：-1
> 
> 时间：2012-08-26T11:54:15.347
> 
> 标签：windows-phone-7, marketplace

如何在应用程序内发送 URL 以下载此应用程序？例子：

> “你好。我喜欢这个应用程序，你可以*在市场的 URL 上*安装它。”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T18:34:19.847

我知道这个问题很老，但对于通过搜索找到这个问题的人来说，这是应用程序 URL 的格式：

[http://windowsphone.com/s?appId=yourappid](http://windowsphone.com/s?appId=yourappid)

如果从计算机单击此链接将在 WP 网站上打开您的应用程序，如果从 WP 设备单击此链接，则会在商店应用程序中显示您的应用程序。

您的应用 ID 格式为 xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx，可在开发中心详细信息页面或 Windows Phone 网站上应用页面 URL 的末尾找到。

然后使用`SMSComposeTask`or`EmailComposeTask`类发送链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T21:01:22.177

您可以[在此处](http://code.msdn.microsoft.com/Generating-a-Windows-Phone-9d19f939/)查看如何从您的应用程序中创建安装链接。

获得链接后，只需使用其中一个[任务](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks%28v=vs.92%29.aspx)类发送邮件或短信或您需要的任何其他内容！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T19:11:38.253

您可以使用 MarketplaceDetailTask​​，您需要向其提供应用程序 ID，它将使用该应用程序在市场中显示该应用程序的应用程序页面。您可以在此处了解它以及与市场相关的其他任务：http: [//www.windowsphonegeek.com/articles/6-how-to-use-marketplace-tasks-in-a-wp7-app](http://www.windowsphonegeek.com/articles/6-how-to-use-marketplace-tasks-in-a-wp7-app)。希望能帮助到你。

# c# - 如何找到我刚刚用 protobuf-net 反序列化的消息？

> ID：12129905
> 
> 赞同：3
> 
> 时间：2012-08-26T11:54:53.627
> 
> 标签：c#, protobuf-net

一段时间以来，我一直在我的一些 C++ 应用程序之间愉快地使用 protobuf+ZeroMQ。我需要编写一个 C# 应用程序。我已经让 Protobuf-NET 工作了，我相信我终于弄清楚了如何从 ZeroMQ 消息中反序列化，但是我一辈子都无法弄清楚如何查看反序列化数据中的消息。在我的 C++ 应用程序中，我将反序列化为一个类，并且我能够简单地执行以下操作：

```
if(msg.has_msgTypeX())
    blah 
```

我不知道如何在 Protobuf-NET 中做到这一点。

示例 .proto 文件：

```
package Messaging;

message Message {
    optional string uuid                = 1;

    optional Map map                = 2;
    optional Block block                = 3;
    optional Tile tile              = 4;
}

message Map {
    repeated Block block        = 1;
}

message Block {
    repeated Tile   tile            = 1;
    required int32 zCoord           = 2;
    required int32 version          = 3;
}

message Tile {
    required int32 xGCoord          = 1;
    required int32 yGCoord          = 2;
    required int32 zGCoord          = 3;
} 
```

使用它来反序列化：

```
Messaging.Message msg = ProtoBuf.Serializer.Deserialize<Messaging.Message>(new MemoryStream(zmqMsg.Body)); 
```

从这里到哪里？如何确定消息是否包含平铺、块或地图消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T15:57:49.960

怎么样：

```
if(msg.map != null) {
    // ...
}

if(msg.block != null) {
    // ...
}

if(msg.tile != null) {
    // ...
} 
```

? Actually, if these options are mutually exclusive, this scenario could also be modelled in protobuf-net via inheritance (for the same layout) - however, since .proto has no syntax for that you would have to handle that manually.

# django - 将附加数据传递给 Django 中的模板

> ID：12129906
> 
> 赞同：0
> 
> 时间：2012-08-26T11:54:54.863
> 
> 标签：django, django-models, django-templates

每次使用 Django 编写代码时，我都会遇到同样的问题（我认为这是由于我缺乏使用此框架的经验）：

我知道如何将我从查询集获得的参数传递给模板以及如何显示它，但我不知道如何添加在视图中计算的参数并在模板中使用它们。

**简单视图（我掌握）：** *示例：检索比萨饼列表并在模板中显示它们*

**视图.py**

```
Pizzas = Pizza.objects.all()
return render_to_response( "pizza.html" , {'pizzas':Pizzas} ) 
```

**比萨饼.html**

```
{% for pizza in pizzas %}
    <li>pizza.name</li>
{% endfor %} 
```

但是，假设我想添加一些链接到查询集的参数，但它们不像我在视图中计算的那样在数据库中，我不知道如何将此参数传递给模板以及如何使用它->**编辑：我想按模板中的总卡路里来订购我所有的披萨。**

*示例：对于每个比萨饼，我计算了卡路里数*

**视图.py**

```
Pizzas = Pizza.objects.all()
tab = []
for pizza in Pizzas:
    # Compute some data and return the total number of calories for one pizza
    total_number_calories = XXX
    tab.append({'p':pizza,'calories':total_number_calories'})        
return render_to_response( "pizza.html" , {'pizzas_calories':tab} ) 
```

**比萨饼.html**

```
? 
```

我什至不确定将这些附加数据传递给模板的方法是否良好（创建一个表并将其作为参数传递给模板。

如果您有任何想法或最佳实践可以在 Django 中做到这一点，我会接受（很多使用 Django 的人也会这样做！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T12:30:20.007

You should always try and do as much as possible in the view. With the code you've shown, ordering by total calories is just one extra line after the for loop:

```
tab.sort(key=lambda t: t['calories']) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T12:02:46.873

从您的视图到模板是一条单行道；这意味着如果不向您的视图发出请求，就无法“发回数据”。

但是，当您在模板中时，您可以轻松地操作对象；这是使用[自定义模板标签和过滤器完成的](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)

您的模板可以将它从视图中获取的任何对象传递给您自己的过滤器，过滤器的结果将显示在模板中。

在您的情况下，您可以编写一个名为 的过滤器`caloriecount`，其逻辑与您在视图中使用的逻辑相同：

```
@register.filter
def caloriecount(obj): # Only one argument.
    # compute calorie for pizza object
    # total_calories = 
    return total_calories 
```

然后在您的模板中：

```
{% for pizza in pizzas %} 
   {{ pizza|caloriecount }}
{% endfor %} 
```

# java - 如何返回字符串形式的actionPerformed？

> ID：12129909
> 
> 赞同：4
> 
> 时间：2012-08-26T11:55:34.750
> 
> 标签：java, eclipse

我正在尝试使用按钮来控制在窗口上执行的操作。为此，我试图返回字符串以在整个程序中发出命令。到目前为止，我设法让这段代码工作：

```
@Override
public void actionPerformed(ActionEvent e) {
    setCommand(e.getActionCommand());
}

public void setCommand(String g){
    command = g;
    getCommand();
}

public String getCommand() {
    return command;
} 
```

但是，当我在不同的班级这样做时，什么也没有发生：

```
System.out.print(button.getCommand()); 
```

我做错了什么还是我只是使用了错误的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T11:57:05.050

如您所见，`actionPerformed()`它具有`void`返回类型...以及您从接口**覆盖的方法...因此您** **无法从中返回字符串**。`ActionListener`

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T12:02:56.803

您不能从该`actionPerfomed()`方法返回某些内容，但您可以调用其他方法，当按下该按钮时，这些方法将执行您需要它们执行的任何操作。

如果您想通知其他业务逻辑某个按钮被按下，那么我建议您使用观察者模式。**

# javascript - 用于验证开头没有 http 的 url 的 javascript 正则表达式

> ID：12129914
> 
> 赞同：1
> 
> 时间：2012-08-26T11:56:13.690
> 
> 标签：javascript

我想使用正则表达式为 URL 验证 javascript 字符串。

我不想在一开始就强制 http:// 。

什么是正确的正则表达式，因为我有下一个包含 http：

```
var pattern = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T12:02:32.307

如果你想使用你已经拥有的正则表达式，但是让 ftp、http 和 https 成为可选的。请参阅以下内容：

```
var pattern = /((ftp|http|https):\/\/)?(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/; 
```

# c# - 什么处理对 asp.net 页面中的 WebMethod 的请求

> ID：12129917
> 
> 赞同：3
> 
> 时间：2012-08-26T11:56:39.140
> 
> 标签：c#, asp.net, web-applications, exception-handling, webmethod

我正在尝试实现通用错误处理。

```
public partial class SomePage : System.Web.UI.Page
{
//...
    [WebMethod()]
    public static int SomeMethod()
    {
        //... some code
        //... exception
    }
//...
} 
```

可以使用 global.asax 处理常规请求，但静态 WebMethods 不会通过 Application_BeginRequest 或 Application_Error。我尝试编写一个属性，从 ExceptionFilterAttribute 派生并使用 OnException 覆盖，但它也不起作用。

那么谁来处理这些请求呢？

客户端调用是通过下面的 jQuery ajax 请求进行的：

```
$.ajax({
    type: "POST",
    url: "SomePage.aspx/SomeMethod",
    dataType: "json",
    contentType: "application/json; charset=utf-8",
    success: function (response) {
        someVar = response.d;
    },
    error: function (a, b, c) {
        console.log(a); 
        // handle 
    } 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:00:58.837

从文档看来，您需要构建一个 SOAP 扩展来全局处理错误 - 有用的片段和下面的链接：

> 一个 Web 应用程序可以由多个 Web 服务组成。但是，Global.asax 语法文件中的 Application_Error 事件不能用于全局异常处理。Web 服务的 HttpHandler 使用在 Web 服务执行时发生的任何异常，并在调用 Application_Error 事件之前将其转换为 SOAP 错误。构建 SOAP 扩展以在全局异常处理程序中处理 Web 服务异常。SOAP 扩展可以检查 ProcessMessage 方法中是否存在异常。在 ProcessMessage 方法中，检查当 Stage 属性设置为 AfterSerialize 时传递的 SoapMessage 的 Exception 属性。有关 SOAP 扩展的详细信息，请参阅使用 SOAP 扩展的 SOAP 消息修改。

摘自[XML Web Services 中的处理和抛出异常](http://msdn.microsoft.com/en-us/library/ds492xtk.aspx)（我相信在此过程中也有一些示例可以帮助您）

此外，Rick Strahl (MVP) 不久前就该主题写了这篇文章，它就地解决了问题，但没有解决您在全球范围内管理问题的需要[http://www.west-wind.com/weblog/posts/2005/ Jan/29/NET-Web-Services-and-unhandled-Exceptions](http://www.west-wind.com/weblog/posts/2005/Jan/29/NET-Web-Services-and-unhandled-Exceptions)

这篇文章应该指导您根据您的要求为全局错误处理构建一个肥皂扩展[http://geekswithblogs.net/pavelka/archive/2005/09/05/HowToCreateAGlobalExceptionHandlerForAWebService.aspx](http://geekswithblogs.net/pavelka/archive/2005/09/05/HowToCreateAGlobalExceptionHandlerForAWebService.aspx)

# c++ - 加入编码的视频帧

> ID：12129921
> 
> 赞同：0
> 
> 时间：2012-08-26T11:57:01.787
> 
> 标签：c++, video-streaming, sdi

我正在尝试使用 C++ 中的 DNxHD 编解码器转换视频流（SDI 卡）。双方都可以使用 SDK。所以我实际上剩下的任务是从流中获取帧并使用 DNxHD sdk 将它们一一转换。但是我们如何加入获得的框架并围绕它创建一个包装器。请让我知道我应该如何处理这种情况。？任何相关信息都会对我有很大帮助，因为我是视频处理和 C++ 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:50:07.407

DNxHD 编解码器帧不需要任何额外的处理即可加入 AFAIK。您应该能够简单地将一帧连接到另一帧以获得 vlid 文件。

# php - 简单的 HTML Dom - 具有多个单词和空格的类属性

> ID：12129923
> 
> 赞同：4
> 
> 时间：2012-08-26T11:57:19.230
> 
> 标签：php, html, dom, domparser

我试图找到：

```
<a class="one two three four five">LINK</a> 
```

我该怎么做才能找到包含在“四”类中的锚？

我以这种方式尝试：

```
$dom->find("a[class*=four]"); 
```

但它不起作用。我正在使用 html_simple_dom 库。

# c++ - 使用面向对象的方法加载着色器

> ID：12129926
> 
> 赞同：0
> 
> 时间：2012-08-26T11:57:41.510
> 
> 标签：c++, string, opengl

我的应用程序将成为一个使用`OpenGL 4.2`和`GLFW`的OpenGL 游戏`GLEW`。问题是关于从文件加载 GLSL 着色器。我使用一个`ShadersObject`为所有着色器相关任务命名的类。

```
class ShadersObject
{
public:
    // ...
private:
    // ...
    void LoadFile(string Name, string Path);
    string FolderPath;
    Shaders ShaderList;
}; 
```

该类使用`ShaderObject`s 的映射来存储着色器。

```
enum ShaderType{ Vertex = GL_VERTEX_SHADER,
                 Geometry = GL_GEOMETRY_SHADER,
                 Fragment = GL_FRAGMENT_SHADER };

struct ShaderObject
{
    const GLchar* File;
    ShaderType Type;
    GLuint Shader;
    // ...
};

typedef map<string, ShaderObject> Shaders; 
```

以下方法我应该将 GLSL 着色器的源代码从文件加载`ShaderObject`到`ShaderList`. 因此，它使用`Path`文件和着色器的 ，作为映射中`Name`的字符串键被命名。`ShaderList`

```
void ShadersObject::LoadFile(string Name, string Path)
{
    string FilePath = FolderPath + Path;
    ifstream Stream(FilePath);

    if(Stream.is_open())
    {
        cout << "Loading Shader from " << FilePath << endl;

        string Output;
        Stream.seekg(0, ios::end);   
        Output.reserve(Stream.tellg());
        Stream.seekg(0, ios::beg);
        Output.assign((istreambuf_iterator<char>(Stream)),istreambuf_iterator<char>());

        // this line doesn't compile
        strcpy(ShaderList[Name].File, Output.c_str());
    }
    else cout << "Can not load Shader from " << FilePath << endl;
} 
```

我想使用另一种方法来使用 from`ShaderList[Name].File`加载和编译着色器`glShaderSource`and `glCompileShader`。where`glShaderSource`需要一个指向`const GLchar*`持有源代码的指针。就我而言，这将是`&ShaderList[Name].File`.

前段时间我使用`ShaderList[Name].File = Output.c_str();`了而不是现在无法编译的行。结果是只保存了指针，`ShaderList`方法退出后源代码消失了。这就是我尝试使用`strcpy`但此函数不接受`const GLchar*`作为参数类型的原因。

**如何将读取的文件保存到我的班级成员中？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T12:03:43.687

这不是一个复杂的问题：*存储字符串*。存储`Output`在您的`ShadersObject`班级中。当您需要调用`glShaderSource`时，将其转换为`const GLchar*`with `string::c_str`。

或者更好；不要存储它们中的任何一个；OpenGL 将在着色器对象中保留着色器字符串。您可以通过 API 从 OpenGL 查询着色器字符串。所以你的着色器对象存储OpenGL已经存储的内容真的没有意义。

# c# - jquery c# webmethod

> ID：12129932
> 
> 赞同：0
> 
> 时间：2012-08-26T11:58:17.797
> 
> 标签：c#, jquery, webmethod

我有一个应用程序，我正在从 Js 调用 webmethod。

```
 $.ajax({
    type: "POST",
    url: "mypage.aspx/MyWebMethod",
    ....
    ....
    }); 
```

在我的 C# webmethod 中，我设置了

```
[WebMethod(EnableSession = true)] 
```

这个问题很奇怪，我什至不知道是 Jquery 还是 C# 还是服务器设置问题。

问题：当我运行网页并开始使用应用程序时，一切正常。但是，如果我只是保持网页打开（大约 5 分钟）并且不对其进行任何操作......然后尝试使用该应用程序，则 ajax 调用将失败。

有人可以让我知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:01:07.010

我**强烈**建议你改变这个：

```
[WebMethod(EnableSession = true)] 
```

对此：

```
HttpContext.Current.Session 
```

这样你就不需要使用`(EnableSession = true)` 我自己测试了，没有问题

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T12:22:03.920

很可能 ASP 会话即将到期，而您收到的是 HTTP 401 或类似问题。

您可以在您的 ajax`error{}`回调中处理，或者考虑使用[各种](https://stackoverflow.com/questions/1431733/keeping-asp-net-session-open-alive) [解决方法](http://www.codeproject.com/Articles/13945/Make-session-last-forever)在后台保持会话处于活动状态。

# php - 父类对所有子类的变量

> ID：12129935
> 
> 赞同：1
> 
> 时间：2012-08-26T11:58:28.890
> 
> 标签：php, oop

我有一个这样的类结构：

```
class general {

    private $var;

    function set_val( $val ) {
        $this->var = $val;
    }

    function get_val() {
        return $this->var;
    }

}

class A extends general {

    function __construct( $val ) {
        parent::set_val( $val );

    }

    ....

}

class B extends general {

    ....

} 
```

对应的主脚本是这样的：

```
<?php
$a = new A( "Apple" );
$b = new B();

echo "A: " . $a->get_val();
echo "B: " . $b->get_val(); 
```

输出：

```
A: Apple
B: 
```

现在的问题是 A 和 B 的所有实例都访问它们自己的父类 general 的变量 $var ，因此所有 $var 都是相互独立的。

有没有一种方法可以在父类 general 中设置变量 $var**一次**，然后它可以自动提供给**所有**作为其子类/扩展 general 的类？（因此 $b->get_val() 也输出“Apple”？！）

背景：我想在通用类中加载具有语言相关值的变量。然后这些变量应该可用于所有子类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:59:40.173

数据不会在不同对象之间自动共享。您可以使用`static`静态访问的类属性，它本质上是一个全局变量。但这通常是个坏主意，因为对象提供的封装通常被认为是一件好事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T12:22:43.383

理想情况下，如果在您的代码中您希望对象共享公共数据，最好将它们分离到另一个对象中并在代码中使用该对象。

示例：独立于语言的数据可以进入一个单独的类，以迎合语言独立的功能。但是，如果由于某些限制您只需要使用一个类，那么唯一的选择是将它们作为该类的静态成员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T12:24:36.003

将 $var 声明为受保护而不是私有。私有变量只对声明它们的类可用，对子类不可用。受保护的变量可用于定义类和扩展父类的所有类。

# c# - 取消时的任务状态

> ID：12129936
> 
> 赞同：3
> 
> 时间：2012-08-26T11:58:36.713
> 
> 标签：c#, task-parallel-library

我写了以下代码：

```
CancellationTokenSource tokenSource = new CancellationTokenSource();
CancellationToken token = tokenSource.Token;

int i = 0;
Console.WriteLine("Calling from Main Thread {0}", System.Threading.Thread.CurrentThread.ManagedThreadId);

Task t1 = new Task(() =>
{
    while (true)
    {
        try
        {
            token.ThrowIfCancellationRequested();
        }

        catch (OperationCanceledException)
        {
            Console.WriteLine("Task1 cancel detected");
            break;
        }

        Console.WriteLine("Task1: Printing: {1}", System.Threading.Thread.CurrentThread.ManagedThreadId, i++);
    }
}, token);

Task t2 = new Task(() =>
{
    while (true)
    {
        try
        {
            token.ThrowIfCancellationRequested();
        }

        catch (OperationCanceledException)
        {
            Console.WriteLine("Task2 cancel detected");
            break;
        }

        Console.WriteLine("Task2: Printing: {1}", System.Threading.Thread.CurrentThread.ManagedThreadId, i++);
    }
});

t1.Start();
t2.Start();
Thread.Sleep(100);
tokenSource.Cancel();

t1.Wait();//wait for thread to completes its execution
t2.Wait();//wait for thread to completes its execution
Console.WriteLine("Task1 Status:{0}", t1.Status);
Console.WriteLine("Task2 Status:{0}", t1.Status); 
```

在这里我取消任务然后状态也显示 RanToCompletion 但如果我删除两个任务的等待，那么它显示我取消状态...

当我取消任务时，无论如何我都希望取消状态......

**编辑**：来自 MSDN 通过抛出 OperationCanceledException 并将请求取消的令牌传递给它。执行此操作的首选方法是使用 ThrowIfCancellationRequested 方法。以这种方式取消的任务将转换到 Canceled 状态，调用代码可以使用该状态来验证任务是否响应了它的取消请求。

如果您不使用 Wait 或 WaitAll 方法来等待任务，则任务只是将其状态设置为 Canceled。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T12:03:25.383

当您捕获 OperationCanceledException 并跳出 while 循环时，任务将正常结束，任务状态将为 RanToCompletion。

为了获得 Canceled 状态，您需要重新抛出 OperationCanceledException 或根本不捕获它。

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskstatus.aspx)，任务状态将在以下情况下被取消：

> 当令牌处于信号状态时，任务通过抛出带有自己的 CancellationToken 的 OperationCanceledException 来确认取消，或者在任务开始执行之前任务的 CancellationToken 已经发出信号。有关详细信息，请参阅[任务取消](http://msdn.microsoft.com/en-us/library/dd997396.aspx)。

由于您已经在源代码中吞下了异常，因此任务状态将是 RanToCompletion。

要回答您关于为什么删除等待时状态为取消的问题，可能是因为尚未捕获异常并且已在较早的时间检查了取消状态。**这种行为不应被认为是可靠和可重现的。**

# c++ - 可以推荐哪个免费的IDE for C++ with easy GUI Development Environment (Windows)

> ID：12129937
> 
> 赞同：-2
> 
> 时间：2012-08-26T11:58:42.213
> 
> 标签：c++, windows, user-interface, ide, rad

我想在不使用 .NET 的情况下在 Windows 上使用 C++ 开发 GUI Windows 应用程序（不是控制台，而是窗体和按钮）。目前我正在使用“Microsoft Visual Studio 2008 C++ Express”，如您所知，它不包含用于表单和按钮的“表单编辑器”或 RAD 工具。我会使用什么免费工具，有这样的选项？假设我没有钱购买 Borland 或 Books 并且我的知识不是很大（刚刚开始），我可以在哪里找到免费信息和免费工具来编写 Windows GUI 应用程序？

我找到了 Code::Blocks，但对于新手来说，这是一个非常复杂的免费 IDE，可能有一些错误，它包含一个编译器，如果没有事先正确配置，它甚至无法启动一个两行示例控制台应用程序，所以我给了上它（据说它可以很容易地构建一个 GUI）。我找到了 wxWidgets，安装了它，甚至使用 Windows Installer WxPack 也安装了它，但无法使其正常工作，并且没有找到使其工作的示例代码或说明。

我不明白为什么 wxWidgets 需要任何“Sizers”来设计一个简单的表单，我下载了 wxFormDesigner，但它无论如何都不会编译。

我不需要“wxWidgets”的跨平台功能，因为我打算只为 Windows 编写代码。wxWidgets 对于初学者来说设置起来似乎很复杂，甚至设计也很不清楚，我不知道这个 wxWidgets 总是在哀悼什么“sizers”。

所以我想知道是否有人知道更好的东西，可以与 C++ 一起使用的东西 - SETUP and GO！任何具有集成 RAD 编辑器和事件处理的 IDE（类似 C#，但不是 .NET）。

我现在自己回答（因为这个话题已经结束了）：最好的商业 C++ RAD 工具与非错误的 Windows 编译器是：Embarcadero C++ RAD Builder。最好的免费软件 C++ RAD 工具与非错误 Windows 编译器是：Ultimate++。它在 C++ 可执行文件中编译框架（不需要外部 DLL 和设置），synthax 是不言自明的，没有错误，速度快，可执行文件大小小，并且还存在 RAD 编辑器。Ultimate++ 也使用 QT，但它在内部编译它。

至于 QT 本身：是的，还有一个非常好的 Windows 隐藏安装程序，但它有依赖关系，对于初学者来说并不容易使用。对于一个尚未准备好使用的具有依赖项的全新框架 QT 来说是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T12:09:07.077

[Qt](http://qt.nokia.com/ "Qt")可能是您的选择。

# php - 更新 mysql db 密码字段安全性

> ID：12129943
> 
> 赞同：2
> 
> 时间：2012-08-26T12:00:25.713
> 
> 标签：php, mysql

我有一个带有 sha256 散列密码字段的用户数据库。现在我想用[phpass](http://www.openwall.com/phpass/)更新它以添加盐的味道。

我将如何以正确的方式做到这一点？我相信当用户下次登录时我必须更新该字段，对吗？我将如何检查是否已经为特定用户完成了此操作？

现在我检查该字段是否包含'$P$'，但它看起来不适合我。

提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T12:04:29.797

好吧，可以有很多方法，我会做的是，创建另一列来存储新密码。登录用户时，检查新密码是否为空，如果是，则根据旧密码列和旧逻辑登录，然后从用户收到的原始密码更新新密码。这样，您最终可以将几乎所有用户移植到新密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T12:06:20.477

我会采用类似的方法，但会有所不同。创建一列 (TINYINT) 默认为 0。当用户更新密码时，将其设置为 1。

数据库中的额外数据少于另一列。

# row - scipy.sparse ：将行设置为零

> ID：12129948
> 
> 赞同：12
> 
> 时间：2012-08-26T12:01:38.720
> 
> 标签：row, scipy, sparse-matrix

假设我有一个 CSR 格式的矩阵，将一行（或多行）设置为零的最有效方法是什么？

以下代码运行非常缓慢：

```
A = A.tolil()
A[indices, :] = 0
A = A.tocsr() 
```

我不得不转换为，`scipy.sparse.lil_matrix`因为 CSR 格式似乎既不支持花哨的索引也不支持为切片设置值。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-26T12:54:45.113

我猜 scipy 只是没有实现它，但 CSR 格式会很好地支持这一点，请阅读关于“稀疏矩阵”的维基百科文章，了解什么`indptr`等是：

```
# A.indptr is an array, one for each row (+1 for the nnz):

def csr_row_set_nz_to_val(csr, row, value=0):
    """Set all nonzero elements (elements currently in the sparsity pattern)
    to the given value. Useful to set to 0 mostly.
    """
    if not isinstance(csr, scipy.sparse.csr_matrix):
        raise ValueError('Matrix given must be of CSR format.')
    csr.data[csr.indptr[row]:csr.indptr[row+1]] = value

# Now you can just do:
for row in indices:
    csr_row_set_nz_to_val(A, row, 0)

# And to remove zeros from the sparsity pattern:
A.eliminate_zeros() 
```

当然，这会`eliminate_zeros`从稀疏模式中删除从另一个地方设置的 0。如果你想这样做（此时）取决于你真正在做什么，即。延迟消除可能是有意义的，直到所有其他可能添加新零的计算也完成，或者在某些情况下，您可能有 0 个值，您想稍后再次更改，因此消除它们会非常糟糕！

原则上你当然可以短路`eliminate_zeros`and `prune`，但这应该很麻烦，而且可能更慢（因为你不会在 C 中这样做）。

* * *

**有关 eliminiate_zeros （和修剪）的详细信息**

稀疏矩阵通常不保存零元素，而只是存储非零元素所在的位置（大致并使用各种方法）。`eliminate_zeros`从稀疏模式中删除矩阵中的所有零（即，没有为该位置存储任何值，而之前*存储*了一个值，但它是 0）。如果您想稍后将 0 更改为不同的值，则消除是不好的，否则会节省空间。

Prune 只会在存储的数据数组超过必要时收缩它们。请注意，虽然我第一次`A.prune()`在那里，`A.eliminiate_zeros()`已经包括修剪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-30T09:59:57.070

您可以使用矩阵点积来实现归零。由于我们将使用的矩阵非常稀疏（我们要清零的行/列的对角线为零），乘法应该是有效的。

您将需要以下功能之一：

```
import scipy.sparse

def zero_rows(M, rows):
    diag = scipy.sparse.eye(M.shape[0]).tolil()
    for r in rows:
        diag[r, r] = 0
    return diag.dot(M)

def zero_columns(M, columns):
    diag = scipy.sparse.eye(M.shape[1]).tolil()
    for c in columns:
        diag[c, c] = 0
    return M.dot(diag) 
```

使用示例：

```
>>> A = scipy.sparse.csr_matrix([[1,0,3,4], [5,6,0,8], [9,10,11,0]])
>>> A
<3x4 sparse matrix of type '<class 'numpy.int64'>'
        with 9 stored elements in Compressed Sparse Row format>
>>> A.toarray()
array([[ 1,  0,  3,  4],
       [ 5,  6,  0,  8],
       [ 9, 10, 11,  0]], dtype=int64)

>>> B = zero_rows(A, [1])
>>> B
<3x4 sparse matrix of type '<class 'numpy.float64'>'
        with 6 stored elements in Compressed Sparse Row format>
>>> B.toarray()
array([[  1.,   0.,   3.,   4.],
       [  0.,   0.,   0.,   0.],
       [  9.,  10.,  11.,   0.]])

>>> C = zero_columns(A, [1, 3])
>>> C
<3x4 sparse matrix of type '<class 'numpy.float64'>'
        with 5 stored elements in Compressed Sparse Row format>
>>> C.toarray()
array([[  1.,   0.,   3.,   0.],
       [  5.,   0.,   0.,   0.],
       [  9.,   0.,  11.,   0.]]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-18T17:46:00.233

更新到最新版本的 scipy。它支持精美的索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-18T15:48:13.757

我想完成[@seberg 给出的答案](https://stackoverflow.com/a/12130287/9978618)。如果要将 nnz 值设置为零，则应修改 CSR 矩阵的结构，而不仅仅是修改`.data`属性。

此代码的当前行为是，

```
>>> import scipy.sparse
>>> import numpy as np
>>> A = scipy.sparse.csr_matrix([[0,1,0], [2,0,3], [0,0,0], [4,0,0]])
>>> A.toarray()
array([[0, 1, 0],
       [2, 0, 3],
       [0, 0, 0],
       [4, 0, 0]], dtype=int64)
>>> csr_row_set_nz_to_val(A, 1)
>>> A.toarray()
array([[0, 1, 0],
       [0, 0, 0],
       [0, 0, 0],
       [4, 0, 0]], dtype=int64)
>>> A.data
array([1, 0, 0, 4], dtype=int64)
>>> A.indices
array([1, 0, 2, 0], dtype=int32)
>>> A.indptr
array([0, 1, 3, 3, 4], dtype=int32) 
```

**因为我们正在处理稀疏矩阵，所以我们不希望`A.data`数组**中出现零。我认为应该修改`csr_row_set_nz_to_val`如下

```
def csr_row_set_nz_to_val(csr, row, value=0):
    """Set all nonzero elements of a CSR matrix M (elements currently in the sparsity pattern)
    to the given value. Useful to set to 0 mostly.
    """
    if not isinstance(csr, scipy.sparse.csr_matrix):
        raise ValueError("Matrix given must be of CSR format.")
    if value == 0:
        csr.data = np.delete(csr.data, range(csr.indptr[row], csr.indptr[row+1])) # drop nnz values
        csr.indices = np.delete(csr.indices, range(csr.indptr[row], csr.indptr[row+1])) # drop nnz column indices
        csr.indptr[(row+1):] = csr.indptr[(row+1):] - (csr.indptr[row+1] - csr.indptr[row])
    else:
        csr.data[csr.indptr[row]:csr.indptr[row+1]] = value # replace nnz values by another nnz value 
```

最后，我们会得到

```
>>> A = scipy.sparse.csr_matrix([[0,1,0], [2,0,3], [0,0,0], [4,0,0]])
>>> csr_row_set_nz_to_val(A, 1)
>>> A.toarray()
array([[0, 1, 0],
       [0, 0, 0],
       [0, 0, 0],
       [4, 0, 0]], dtype=int64)
>>> A.data
array([1, 4], dtype=int64)
>>> A.indices
array([1, 0], dtype=int32)
>>> A.indptr
array([0, 1, 1, 1, 2], dtype=int32) 
```

# asp.net - 在 asp.net 中不使用网格控件插入、删除、更新表

> ID：12129955
> 
> 赞同：0
> 
> 时间：2012-08-26T12:02:41.613
> 
> 标签：asp.net, sql-server-2005

如何在不使用 asp.net 中的数据网格服务器控件的情况下插入、删除、更新等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T12:19:53.663

通过使用其他数据控件或使用访问数据库的自定义代码（例如在代码隐藏中）。

这个非常不具体的问题真的不能说更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T12:21:26.913

如果是`GridView`您不喜欢的，请使用[其他一些数据控件](http://msdn.microsoft.com/en-us/library/cc295567.aspx)

*   [DataList 控件](http://msdn.microsoft.com/en-us/library/cc295015.aspx) DataList 控件可用于以任何重复结构（例如表格）显示数据。DataList 控件可以以不同的布局显示行，例如按列或行对它们进行排序。有关对 DataList 控件进行编程的信息，请参阅 MSDN 库中的 DataList 类。

*   [DetailsView 控件](http://msdn.microsoft.com/en-us/library/cc295027.aspx) DetailsView 控件使您能够从其关联的数据源中一次显示、编辑、插入或删除一条记录。DetailsView 控件一次仅显示一条数据记录，即使其数据源公开了多条记录。有关对 DetailsView 控件进行编程的信息，请参阅 MSDN 库中的 DetailsView 类。

*   [FormView 控件](http://msdn.microsoft.com/en-us/library/cc295401.aspx) FormView 控件使您能够处理来自数据源的单个记录，类似于 DetailsView 控件。FormView 和 DetailsView 控件之间的区别在于，DetailsView 控件使用表格布局，其中记录的每个字段都显示为自己的一行。相比之下，FormView 控件没有指定用于显示记录的预定义布局。相反，您创建一个包含控件的模板，以显示记录中的各个字段。有关对 FormView 控件进行编程的信息，请参阅 MSDN 库中的 FormView 类。

*   [Repeater 控件](http://msdn.microsoft.com/en-us/library/cc295084.aspx) Repeater 控件是一个数据绑定容器控件，它生成单个项目的列表。您可以使用模板定义网页上各个项目的布局。当页面运行时，控件会重复数据源中每个项目的布局。有关对中继器控件进行编程的信息，请参阅 MSDN 库中的中继器类。

您也可以自己创建简单的 crud 表单并用于`SqlCommand`触发数据库查询。

# iphone - 将字符串 MM/DD/YYYY 转换为 NSDate

> ID：12129958
> 
> 赞同：9
> 
> 时间：2012-08-26T12:02:55.563
> 
> 标签：iphone, objective-c, ios, nsdate

在我的应用程序中，我使用 Facebook Graph API，当我获取用户详细信息时，我将用户的生日作为格式为 MM/DD/YYYY 的字符串获取。

我的问题是，如何将字符串“MM/DD/YYYY”转换为`NSDate`？

我试着做

```
 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
 [dateFormatter setDateFormat:@"MM/DD/YYYY"];
 NSDate *date = [dateFormatter dateFromString:@"08/08/2012"];
 [dateFormatter release]; 
```

但是我弄错了日期

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-26T12:17:04.543

使用[NSDateFormatter](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)您可以直接从 a 转换`NSString`为`NSDate`. 这是一个例子：

```
NSDateFormatter* myFormatter = [[NSDateFormatter alloc] init];
[myFormatter setDateFormat:@"MM/dd/yyyy"];
NSDate* myDate = [myFormatter dateFromString:@"8/26/2012"];
NSLog(@"%@", myDate); 
```

有关日期格式模式的详细信息，请参阅[Unicode.org](http://unicode.org/reports/tr35/#Date_Format_Patterns)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-26T12:48:50.137

添加`[dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]]`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-26T12:35:35.323

你做的一切都很好。您的问题只是格式字符串。

*   资本`M`是月。
*   小`d`就是天。
*   小`y`是年。

只需始终如一地使用这些符号，就可以了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-26T12:12:37.620

`NSDateFormatter` [正是因为存在](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)这样的情况。

# doctrine-orm - 按字符串长度排序

> ID：12129960
> 
> 赞同：2
> 
> 时间：2012-08-26T12:03:02.073
> 
> 标签：doctrine-orm

有没有办法通过字段中包含的字符串的长度来排序这个查询**`Title`**？

```
 $query = $this->getEntityManager()
        ->createQuery('
    SELECT b FROM AcmeTestBundle:Blog b
    WHERE b.Title LIKE :title'
    )->setParameter('title','%'.$title.'%'); 
```

`ORDER BY b.Title.length()`似乎不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T12:46:31.900

是的，只需尝试：

```
$query = $this->getEntityManager()->createQuery('SELECT LENGTH(b.Title) l, b FROM AcmeTestBundle:Blog b WHERE b.Title LIKE :title ORDER BY l')->setParameter('title','%'.$title.'%'); 
```

# c++ - 谁能告诉我有关 IPropertyBag::Read 的信息？

> ID：12129961
> 
> 赞同：2
> 
> 时间：2012-08-26T12:03:07.490
> 
> 标签：c++, directshow

在 directShow 中，除了“FriendlyName”，我还能从 IPropertyBag::Read 中获得哪些其他属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T12:11:02.023

“CLSID”、“FriendlyName”，有时是“DevicePath”。也可能存在特定于过滤器的属性。没有别的东西了。

# ios - MonoTouch：按钮不可见

> ID：12129962
> 
> 赞同：1
> 
> 时间：2012-08-26T12:03:16.090
> 
> 标签：ios, xamarin.ios, uibutton, invisible

所以我最近决定加入 iOS 开发，主要是因为我喜欢跨多个平台扩展我的知识，而且我已经了解 java 并编写了一个 android 应用程序，iOS 是下一步。

所以我的问题是：在一个表中，我使用自定义表源来响应单击一行并加载新视图。现在在该视图中，我想添加一个后退按钮以返回上一个视图。

```
 PointF locationOne = new PointF (5, 5);
    PointF locationTwo = new PointF (5, 100);
    SizeF size = new SizeF (120, 40);

    RectangleF tView = new RectangleF (locationOne, size);
    RectangleF tView2 = new RectangleF (locationTwo, size);
        UILabel l1 = new UILabel(){Text = "LOOL",Frame=tView};

        UIButton backbutton = new UIButton(){
            Frame=tView2
        };
        backbutton.Frame = tView2;
        backbutton.TitleLabel.Text = "Zurueck";
        backbutton.Hidden = false;

        UIView previousview = viewController.View;
        backbutton.TouchDown += (sender, e) => { 
            viewController.View = previousview;
        };

        UIView v = new UIView();
        v.AddSubview(l1);
        v.AddSubview (backbutton);

        viewController.View = v; 
```

这将是我现在的代码。标签正在显示，按钮没有。有什么我想念的吗？

已经谢谢了:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T12:13:40.490

`UIView` `v`没有框架。您需要将其设置为父控制器的框架（也许`v.Frame = viewController.View.Frame;`）。然后，换出 的视图`viewcontroller`。

编辑：

UIButton 的初始化不对。以下是创建常规按钮的方法：

```
PointF locationOne = new PointF (5, 5);
PointF locationTwo = new PointF (5, 100);
SizeF size = new SizeF (120, 40);

RectangleF tView = new RectangleF (locationOne, size);
RectangleF tView2 = new RectangleF (locationTwo, size);
UILabel l1 = new UILabel (){Text = "LOOL",Frame=tView};

UIButton backbutton = UIButton.FromType(UIButtonType.RoundedRect);
backbutton.Frame = tView2;
backbutton.SetTitle("Zurueck", UIControlState.Normal);

UIView previousview = viewController.View;
backbutton.TouchUpInside += (sender, e) => { 
    viewController.View = previousview;
};

UIView v = new UIView ();
v.BackgroundColor = UIColor.White;
v.AddSubview (l1);
v.AddSubview (backbutton);
viewController.View = v; 
```

# jquery - jQueryUI 可排序更改位置？

> ID：12129969
> 
> 赞同：1
> 
> 时间：2012-08-26T12:05:01.673
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我正在使用 jQueryUI Sortable做类似[http://jqueryui.com/demos/sortable/#display-grid的事情。](http://jqueryui.com/demos/sortable/#display-grid)但是，我想知道是否有一种方法可以**更改**拖动项目的位置和放置位置，而不是对它们进行排序。

例如，在
1 2 3
4 5 6
7 8 9 以下的 3x3 网格中

如果我将网格 1 拖到网格 4，默认情况下 jQuery 可排序，新位置将为
**4 1 2**
**3** 5 6
7 8 9

但是，我希望它是
**4 2 3**
**1** 5 6
7 8 9

有没有办法通过挂钩一些事件或通过一些黑客来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:31:30.593

也许你应该看看[jQuery swapable plugin](http://vadimkir.blogspot.de/2010/08/swappable-jquery-plugin.html)。我自己没有使用过它，但它似乎可以做任何想做的事。看看[网格演示](http://www.eslinstructor.net/demo/swappable/swappable_grid.html)。

# r - R：来自矩阵的多个晶格水平图

> ID：12129970
> 
> 赞同：5
> 
> 时间：2012-08-26T12:05:02.857
> 
> 标签：r, matrix, lattice, levelplot

我的目标是构建一个水平图（来自 lattice 包），其中 4 个或更多单独的图共享相同的颜色键。虽然这似乎使用函数相对简单，但我无法找到使用数据矩阵的解决方案。只有一个矩阵的工作级别图示例：

```
d <- replicate(10,rnorm(10))
levelplot(d) 
```

我找到了使用 print 和 split 在同一屏幕上显示所有 4 个级别图的部分解决方案，但这需要我关闭颜色键，或者在每个图上显示它。这两种解决方案都不完全令人满意。

如果我在 levelplot 中使用 layout-option，如下所示：

```
levelplot(d, layout=c(2,2)) 
```

，我得到了想要的布局，有一个大的颜色键，主要和 xlab/ylab，但只有一个 levelplot 打印。

我一直在尝试构建一个能产生预期结果的公式，但恐怕我对数据框、数组和矩阵的理解还不够深入。如果有人知道可行的解决方案，我将不胜感激。我想象的是（不工作的代码）：

```
d1 <- replicate(10,rnorm(10))
d2 <- replicate(10,rnorm(10))
d3 <- replicate(10,rnorm(10))
d4 <- replicate(10,rnorm(10))

d <- list(d1,d2,d3,d4)
di <- c(1,2,3,4)

levelplot(x ~ y | di, data = d, layout=c(2,2)) 
```

注意！避免使用矩阵不是一种选择。其中一些是从原始文本文件中获得的。

先感谢您，

-J.P

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T14:42:00.763

使用`ggplot`并`reshape`与您的列表一起使用`d`：

```
require(reshape)
require(ggplot2)

ggplot(melt(d), aes(x=X1, y=X2)) +
  facet_wrap(~ L1, ncol=2) +
  geom_tile(aes(fill=value)) +
  coord_equal() 
```

这使：

![在此处输入图像描述](../Images/f7320a0eede1bb367eacbfec2957742b.png)

# node.js - Nodejs express session memorystore 找不到具有给定 ID 的会话

> ID：12129971
> 
> 赞同：3
> 
> 时间：2012-08-26T12:05:23.177
> 
> 标签：node.js, express, session-cookies

我遵循了有关如何使用 cookie 解析和 MemoryStore 作为会话存储创建节点快速应用程序的教程。但是在安装了某些模块的最新版本后，我的应用程序不再工作了。昨天我安装了最新版本的“express”、“connect”和“cookie”，现在我无法再将会话从 MemoryStore 中取出。

下面是我为重现问题而设置的简单应用程序：

server.js -----------

```
var express = require('express');
var MemoryStore = express.session.MemoryStore;
var sessionStore = new MemoryStore();
var connect = require('connect');
var Session = connect.middleware.session.Session;
var cookie = require('cookie');

module.exports.startServer = function() {

var app = express();

// Configuration
app.configure(function() {
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(express.cookieParser());
    app.use(express.session({
        store : sessionStore,
        secret : 'secret',
        key : 'express.sid'
    }));
    app.use(express.static(__dirname + '/public'));
    app.use(app.router);
});

app.configure('development', function() {
    app.use(express.errorHandler({
        dumpExceptions : true,
        showStack : true
    }));
});

app.configure('production', function() {
    app.use(express.errorHandler());
});

// Init routes
app.post('/login', function(req, res){
    var credentials = req.body;

    if (!(credentials.username && credentials.password)){
        res.redirect('/login.html');
        return;
    } 

    if (credentials.username === 'user1' && credentials.password === 'pass1'){
        req.session.user = credentials.username;
        req.session.clientId = credentials.clientId;
        res.redirect('/post-message.html');
    }else{
        req.session.destroy();
        res.redirect('/login.html');
    }
});

app.post('/postMsg', authenticate, function(req, res){
    res.send('posted');
});

app.listen(4000);

function authenticate(req, res, next) {
    // check if there's a cookie header
    if (req.headers.cookie) {
        // if there is, parse the cookie
        req.cookie = cookie.parse(req.headers.cookie);

        req.sessionID= req.cookie['express.sid'];
        // note that you will need to use the same key to grad the
        // session id, as you specified in the Express setup.

        sessionStore.get(req.sessionID, function(err, session) {

            if (session && session.user) {
                // save the session data and accept the connection
                req.session = new Session(req, session);
                next();
            }
            else {
                //Turn down the connection
                res.redirect('/login.html');
            }
        });
    } else {
        // if there isn't, turn down the connection with a message
        // and leave the function.
        res.redirect('/login.html');
    }
}
}; 
```

我可以在调试器中看到一切似乎都工作正常，直到我尝试通过调用“/postMsg”路由来发布消息。然后它进入“authenticate”函数并尝试从 sessionStore 中获取带有“req.sessionID”的会话。这不再成功，并且 sessionStore.get 为会话返回 undefined 。但是，如果我使用调试器查看 sessionStore，我可以看到存储中有一个会话，并且它似乎也与 sessionID 匹配。

有谁知道我的脚本有什么问题？

感谢帮助！

# php - 基本遗传算法的 PHP 或 JavaScript 开源代码

> ID：12129972
> 
> 赞同：2
> 
> 时间：2012-08-26T12:06:00.470
> 
> 标签：php, javascript, generics

我正在搜索基本遗传算法（或任何其他进化算法）的 PHP 或 JavaScript 开源代码。Google 提供了 C++ 和 Java 库。但我确信由于这种算法的高度流行，PHP 和 JavaScript 类似物也应该存在。所以，我感谢任何有用的网络链接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T12:22:22.010

我不确定，但我找到了一些很好的例子试试。

**示例 1：-**

**一个“你好世界！” PHP中的遗传算法示例**

这是一个用 php 编写的 hello world 示例遗传算法示例。您可以使用相同的算法来构建有用的应用程序。

见以下网址：-

[http://www.bekirdag.com/tr/php_mysql/a_hello_world_genetic_algorithm_example_in_php.html](http://www.bekirdag.com/tr/php_mysql/a_hello_world_genetic_algorithm_example_in_php.html)

**示例 2：-**

**遗传算法旅行推销员 PHP**

见以下网址：-

[http://thomashunter.name/blog/genetic-algorithm-traveling-salesperson-php/](http://thomashunter.name/blog/genetic-algorithm-traveling-salesperson-php/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T12:23:28.773

我已经在一个旧项目中成功使用了这个类（ [http://www.phpclasses.org/package/2567-PHP-Generic-genetic-algorithms-base-implementation.html ）。](http://www.phpclasses.org/package/2567-PHP-Generic-genetic-algorithms-base-implementation.html)稍加调整，您就可以轻松实现许多遗传算法操作。

**注意：**您需要注册才能下载文件。

# regex - 我应该如何缩短简单的替换子程序？

> ID：12129974
> 
> 赞同：1
> 
> 时间：2012-08-26T12:06:35.500
> 
> 标签：regex, substitution, perl

```
sub my_sub {
    my $str = shift;
    $str =~ s/some/regex/;
    return $str;
} 
```

对于这样一个简单的子程序，五行似乎太长了。是否可以简化，例如不使用中间变量？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-26T12:14:15.520

没有中间变量和缩短一行：

```
sub my_sub {
    $_[0] =~ s/some/regex/;
    return $_[0];
} 
```

**编辑：**正如@pavel 所指出的，这将修改原始变量。

从[Perl 5.13.2 开始](http://search.cpan.org/~flora/perl-5.14.2/pod/perl5132delta.pod#Non-destructive_substitution)，有一个非破坏性修饰符`/r`（供参考，请参阅[perlop](http://perldoc.perl.org/perlop.html#Binding-Operators)），它不会修改正则表达式操作的变量 - 这也允许放弃另一行：

```
sub my_sub {
    return $_[0] =~ s/some/regex/r;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T13:28:03.257

```
sub my_sub {
    (my $str = shift) =~ s/some/regex/;
    $str;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T11:58:06.883

这对于简单的替换来说并不长。它还创建数据的副本，替换该副本，并返回修改后的副本，同时保留原始副本。所以，你会像这样使用它：

```
 my $modified = my_sub( $original ); 
```

一些答案适用`$_[0]`于`@_`. 这是原始数据的别名。这样，Perl 不必复制数据，直到它知道您确实需要一个单独的副本。当您对别名进行替换时，您修改了原始名称。这样做更像是更改原始文件并重新分配给它：

```
 $original = my_sub( $original ); 
```

但是，您提出的问题是使其更短。这通常不是做任何事情的充分理由。这是一个子程序，所以只要它满足您的要求，就让它随心所欲。在设计此类代码之前，请弄清楚您的需求是什么。

# php - PHP 从 MySql 转换为 Excel 电子表格自动调整列大小

> ID：12129976
> 
> 赞同：0
> 
> 时间：2012-08-26T12:06:52.060
> 
> 标签：php, mysql, excel, phone-number, autosize

我目前正在使用下面的代码将**租户**数据从 MySql 数据库导出到**Excel电子表格中。**

```
<?php
    require_once('../../../includes/config.inc.php'); 

    require_once(MYSQL);

    $query = "SELECT * FROM tenant";        //Define the SQL query

    if ($result = $dbc->query($query))
    {
        $file_type = "vnd.ms-excel";
        $file_ending = "xls";

        header("Content-Type: application/$file_type");
        header("Content-Disposition: attachment; filename=tenant_data.$file_ending");
        header("Pragma: no-cache");
        header("Expires: 0");

        $seperator = "\t";  //define separator (defines columns in excel)

        $field_count = $result->field_count;

        for ($for_count = 1; $for_count < $field_count; $for_count++)   //start of printing column names as names of MySQL fields
        {
            $result->field_seek($for_count);

            $field_info = $result->fetch_field();

            $field_name = $field_info->name;

            $field_name_title = str_replace("_", " ", "$field_name");

            $field_array[] = $field_name;

            echo $field_name_title . $seperator; 
        }

        $result->field_seek(0);

        print("\n");        //end of printing column names

        while($row = $result->fetch_assoc())    //start while loop to get data
        {
            $schema_insert = "";

            for ($col_count = 0; $col_count < $field_count - 1; $col_count++)
            {
                $current_field = $field_array[$col_count];

                if ($row[$current_field] != "")
                {
                    $schema_insert .= "$row[$current_field]" . $seperator;
                }
                else
                {
                    $schema_insert .= "" . $seperator;
                } 
            }

            $schema_insert = str_replace($seperator . "$", "", $schema_insert);

            $schema_insert = preg_replace("/\r\n|\n\r|\n|\r/", " ", $schema_insert);            //Replaces \n or \r with a space

            $schema_insert .= "\t";

            print(trim($schema_insert));

            print "\n";
        }
    }
?> 
```

该代码当前有效，但是我有两个问题：

1) 我希望电子表格中的列在创建时自动调整为内容的大小。

2）在数据中，有一个Phone字段，其中数字往往以0开头。因此，数据库中的0往往会丢失，我认为该列需要指定为String。

有谁知道如何做这些事情？我不想使用 PHPExcel，因为这似乎是我想做的所有事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:04:57.063

在没有任何答案的情况下，我最终决定只使用**PHPExcel**类。

# iphone - 如何在 UIImageView 中的图像之间随机播放

> ID：12129977
> 
> 赞同：0
> 
> 时间：2012-08-26T12:06:58.827
> 
> 标签：iphone

我正在制作一个玩家扔立方体的游戏。我有 6 个图像对应于每个立方体，我想要有随机播放效果，就像它在 1-6 之间随机选择一样。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T12:09:12.303

看看这篇文章：[是否可以为 UIImage 设置动画？](https://stackoverflow.com/questions/8545154/is-it-possible-to-animate-an-uiimage)

您需要做的就是在选择随机图像时停止动画。

正如@kernix 在评论中所说，要在动画一次后停止动画，您需要做的就是将重复计数设置为 1。

```
imageView.animationRepeatCount = 1 
```

为了在动画之后调用回调方法，请看下面的帖子：[UIImageView 动画完成后的访问方法](https://stackoverflow.com/questions/9283270/access-method-after-uiimageview-animation-finish)

# c# - C# Thread.Join 对其他线程的影响

> ID：12129978
> 
> 赞同：0
> 
> 时间：2012-08-26T12:07:04.273
> 
> 标签：c#, .net, multithreading

这是这种情况。我有一个创建 2 个子线程的应用程序。当我为 ChildThread1 调用 Join 方法时，MainThread 正在等待这个连接操作。天气很冷。但这不是重点。这是预期的。关键是 ChildThread2 在此操作中的影响。它是等待这个操作还是正常运行？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T12:33:44.403

ChildThread2 不受影响。

现在，**如果**它是一个后台线程，并且如果它`Join`是退出之前做的最后一件事`Main`，那么它将杀死`ChildThread2`，但这与它本身无关`Join` ，但事实上，一旦所有非后台线程都完成了，应用程序关闭，杀死所有后台线程。

如果它不是后台线程，那么这不适用 - 要么主线程退出（`ChildThread1`因为`Join`它等待它的手段之后），然后第二个产生的线程完成，或者第二个线程产生的线程已经完成，当他们都完成后，应用程序结束。

请注意，如果您尝试`Join`使用已完成的线程，则调用会`Join` 立即返回。因此，如果您希望一个线程等待两个或多个线程，并且无法预测它们的顺序，那么等待一个然后另一个是完全可以的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T12:15:36.870

`ChildThread2`将继续执行，直到它完成或中止。

# jquery - Jquery Datepicker没有使用动态django fromset选择正确的元素

> ID：12129986
> 
> 赞同：1
> 
> 时间：2012-08-26T12:08:18.800
> 
> 标签：jquery, python, django, jquery-ui, django-forms

我的问题与这里提到的类似， [Duplicate jquery ui problem](https://stackoverflow.com/questions/4141731/duplicate-jquery-ui-problem)。但在我的问题中，我没有使用动态表单集脚本。

如何在默认表单集和动态生成的表单集中使用引导 jquery datepicker 插件？

这是我正在做的生成表最后一行的克隆（因为我不熟悉 jquery）

```
$("p").live("click", function() {
    //clone last row to variable
     var row = $('#savings_table tbody>tr:last').clone(true);

     //clear text boxes
     $("td input:text", row).val("");

      //clear selection boxes
      $("select option:selected", row).attr("selected", false);
      //add row
  row.insertAfter('#savings_table tbody>tr:last');
  count = parseInt($("#id_form-TOTAL_FORMS").val(), 10)

  var count = count + 1;
  $("#id_form-TOTAL_FORMS").val(count);

  $(row).each(function() {
      $(this).find('td').each(function(){

        var input_name = $(this).find("input").attr('name')
        var input_id = $(this).find("input").attr('id')
        var input_class = $(this).find("input").attr('class')

        if($(this).find("input").attr('name') !== undefined)
        {
            new_input_name = set_attr(input_name);
            new_input_id = set_attr(input_id);
            $(this).find("input").attr('name',new_input_name)
            $(this).find("input").attr('id',new_input_id)

        }

         if($(this).find("select").attr('name') !== undefined)
         {
            var select_name = $(this).find("select").attr('name')
            var select_id = $(this).find("select").attr('id')

            new_select_name = set_attr(select_name);
            new_select_id = set_attr(select_id);

            $(this).find("select").attr('name',new_select_name)
            $(this).find("select").attr('id',new_select_id)
        }
         });
       });
  //$( ".start_datepicker" ).datepicker();

      return false;
    });

  function set_attr(prop)
  {
  var result_name = prop.split('-');
  var inc_value = parseInt(result_name[1], 10) + 1;
  var new_name = result_name[0]+'-'+inc_value+'-'+result_name[2];
  return new_name
   } 
```

我尝试通过为日期字段分配相同的类名并使用称为 jquery datepicker 插件的相同类名，并且工作正常。但是如果动态添加表单集，那么总是会选择最后一个日期字段。

```
$(function() {
    $( ".start_datepicker" ).datepicker();
 }); 
```

我在这里做错了什么？

# php - 注释 id 在插入数据库之前发生变化

> ID：12129987
> 
> 赞同：1
> 
> 时间：2012-08-26T12:08:23.597
> 
> 标签：php, html

我有一个用户用来评论帖子的表单。现在这个表单的隐藏输入是正确的，它得到了正确的“streamidcontent”但是当我通过 ajax 发送它并进入数据库时​​，它总是更改为最后创建的状态 id '4076'并将它添加到最顶部的那个帖子的饲料。所以我想知道，我做错了什么。

流数据评论

1 comment_id int(11) 无 无 AUTO_INCREMENT
2 comment_poster int(11) 无 无
3 comment_streamitem int(11) 无 无
4 comment_datetime datetime 无 无

形式

```
<form id="mycommentform" method="POST"  class="form_statusinput">
<input type="hidden"  name="streamidcontent" id="streamidcontent" value="'.$streamitem_data['streamitem_id'].'">
<input type="input" name"content" id="content" placeholder="Say something" autocomplete="off">
<input type="submit" id="button" value="Feed">
</form> 
```

COMMENT_ADD.PHP

```
<?php
session_start();
require"include/load.php";
error_reporting(E_ERROR | E_WARNING | E_PARSE | E_NOTICE);

if(isset($_POST['streamidcontent'])&isset($_POST['content'])){

        $content =  htmlspecialchars($_POST['content']);
        $streamid = htmlspecialchars($_POST['streamidcontent']);
            $content = preg_replace('/(?<!S)((http(s?):\/\/)|(www.))+([\w.1-9\&=#?\-~%;\/]+)/','<a href="http$3://$4$5">http$3://$4$5</a>', $content);

            $insert = "INSERT INTO streamdata_comments(comment_poster, comment_streamitem, comment_datetime, comment_content) VALUES (".$_SESSION['id'].",'$streamid',UTC_TIMESTAMP(),'$content')";

            $add_post = mysqli_query($mysqli,$insert) or die(mysqli_error($mysqli));
            } 
```

AJAX

```
<script>
$(document).ready(function(){
$("form#mycommentform").submit(function(event) {
event.preventDefault();
var streamidcontent = $("#streamidcontent").val();
var content = $(this).children('#content').val();

$.ajax({
type: "POST",
url: "comment_add.php",
cache: false,
dataType: "json",
data: { streamidcontent: streamidcontent, content: content}, 
success: function(html){  
$("#containerid").html("<div class='stream_comment_holder' id='comment_holder_"+html['comment_streamitem']+"'><div id='comment_list_"+html['comment_streamitem']+"'><div class='stream_comment' id='comment_"+html['comment_id']+"'>div class='stream_comment_holder' id= style='display:;'><div class='stream_comment'><table width='100%'><tbody><tr><td valign='top' width='30px'><img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped"+html['id']+".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></td><td valign='top' align='left'><a href='profile.php?username="+html['username']+"'>"+html['first']+" </a>"+html['comment_content']+"</td></tr></tbody></table></div></div></div></div>");
}
});
return false
});
});
</script> 
```

和我的旧 AJAX 插入罚款。但我需要为此添加我的喜欢、不喜欢和删除按钮。所以改成上面那个不能正常工作的AJAX。

```
function addcomment(streamid,content,containerid,posterid,postername,postid){
var obj = document.getElementById(containerid);
$.post("../comment_add.php", { streamid: streamid,content:content} );
obj.innerHTML = obj.innerHTML + "<div class='stream_comment'><table width='100%'><tbody><tr><td valign='top' width='30px'><img style='border:none;padding:0px;height:30px;width:30px;border-radius:0px;' src='imgs/cropped"+posterid+".jpg' onerror='this.src=&quot;img/no_profile_img.jpeg&quot;;'></td><td valign='top' align='left'><a href='profile.php?username="+posterid+"'>"+postername+" </a>"+content+"</td></tr></tbody></table></div>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T12:15:41.457

您的代码中发生了一些奇怪的事情：

```
$content =  $_POST['content'];
$content =  strip_tags($_POST['content']); 
```

您`$content`使用不同的值填充变量两次。id也是一样的：

```
$streamid = $_POST['streamidcontent'];
$streamid = strip_tags($_POST['streamidcontent']); 
```

我严重怀疑您是否应该`strip_tags`在将其插入数据库之前使用它。只需[`htmlspecialchars()`](http://php.net/manual/en/function.htmlspecialchars.php)在显示时使用。或者在显示时使用[htmlpurifier](http://htmlpurifier.org/)。此外，您的应用程序中存在[SQL 注入漏洞](http://en.wikipedia.org/wiki/SQL_injection)。在此处阅读有关防止此问题的更多信息：[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php).

使用您共享的代码，将为新记录分配一个新 ID。您如何检查每次都获得相同的ID？

最后，您可以通过执行以下操作在 mysqli 中获取最后插入的 id：

```
echo $mysqli->insert_id; 
```

之后`query()`。

您是否还检查了呈现的 HTML 以首先查看 id 是什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T12:24:49.000

你有没有想过错误可能实际上是你的提要，而不是实际的插入？或者它可能是AJAX？

要验证插入是否正常工作，请尝试：

```
echo $streamid;  // Shows you're getting the right value from AJAX.

$add_post = mysqli_query($mysqli,$insert) or die(mysqli_error($mysqli));
if($add_post) {
    $NewID = mysqli_insert_id(mysqli);
    $query = 'SELECT * FROM streamdata_comments WHERE comment_id=' . $NewID;  
    if ($result = mysqli_query($mysqli, $query)) {
        while ($row = $result->fetch_object()){
            var_dump($row);   // Check the actual input is as you expected.
        }
        mysqli_free_result($result);
    }
} 
```

如果使用 AJAX，您需要通过其中一种网络工具来监控结果（在 Chrome、NET 面板中按 F12；或使用[Fiddler](http://www.fiddler2.com/fiddler2/) for Win 或[Charles](http://www.charlesproxy.com/) for Mac）

# windows - 右键单击 Outlook 中的一封电子邮件并将特定数据导出到模板

> ID：12129988
> 
> 赞同：1
> 
> 时间：2012-08-26T12:08:32.727
> 
> 标签：windows, email, outlook, crm

因此，我在这里浏览了多封垃圾邮件，直到找到一封我必须记下才能处理的电子邮件，并认为如果我可以右键单击 Outlook 2010 电子邮件并将数据导出到文件中会不会很好即在CRM 系统中创建工作。在 Google 中进行过搜索，但对我的结果没有印象，想知道是否有人有任何想法或想法？我假设这样的程序还不存在，所以任何编程想法都可以很好地完成？

现在我不是在寻找从一个文件夹中处理多封电子邮件的程序，而是我选择的一封电子邮件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:32:53.883

此程序不存在 - 您需要[使用 VSTO 创建 Outlook 加载项](http://msdn.microsoft.com/en-us/office/hh133430.aspx)才能执行此任务。

实现起来很简单——只需锁定[`ThisAddin.Application.ActiveExplorer.Selection`](http://msdn.microsoft.com/en-us/library/office/ff861267.aspx)并将选择转换为[`MailItem`](http://msdn.microsoft.com/en-us/library/office/ff861332.aspx). 从那里，您可以访问所有邮件属性（*主题、收件人、正文等*）。

# applescript - 在AppleScript中获取Finder的当前目录存储为应用程序

> ID：12129989
> 
> 赞同：9
> 
> 时间：2012-08-26T12:08:46.940
> 
> 标签：applescript, finder

我试图制作一个应该从 Finder 读取当前目录并在其上运行 shell 命令的 AppleScript。如果我在 Finder 中导航到所需的文件夹并从 AppleScript Editor 运行脚本，它可以工作，但是当我保存脚本并将其拖到 Finder 工具栏时，currentDir 被设置为脚本文件的文件夹（我的用户目录）。这是我的脚本：

```
tell application "Finder"
    set currentDir to POSIX path of ((container of (path to me)) as text)
end tell
tell application "Terminal"
    do script "cd " & currentDir
    do script "<operation goes here>"
end tell 
```

使用工具栏快捷方式时如何激活目录？其次，有没有办法在后台运行 shell 命令，而不打开（显示）终端窗口？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-26T13:28:53.887

这里有两个解决方案：

1-如果当前文件夹是前 Finder 窗口的目标：

```
tell application "Finder" to set currentDir to (target of front Finder window) as text
do shell script "cd " & (quoted form of POSIX path of currentDir) & "; <operation goes here>" 
```

--

**2 - 如果当前文件夹是选择的文件夹，它在（列表视图**或**封面流**）相对于窗口的目标会有所不同，因为您可以在窗口中选择一个子文件夹（窗口的目标不会改变） ：

```
tell application "Finder"
    set sel to item 1 of (get selection)
    if class of sel is folder then
        set currentDir to sel as text
    else
        set currentDir to (container of sel) as text
    end if
end tell
do shell script "cd " & (quoted form of POSIX path of currentDir) & "; <operation goes here>" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-26T19:00:08.730

这`insertion location`是显示在最前面的 Finder 窗口或桌面的标题栏上的文件夹。

```
tell application "Finder" to POSIX path of (insertion location as alias) 
```

Windows 具有`folder`标题栏上显示的文件夹的属性：

```
tell application "Finder" to POSIX path of ((folder of window 1) as alias) 
```

在 10.7 和 10.8 中有[一个开放的错误](http://www.openradar.me/9406282)，它们（和`selection`属性）偶尔会引用它们的旧值。

这将使当前文件夹取决于列表视图中的选择：

```
tell application "Finder"
    if current view of window 1 is in {list view, flow view} and selection is not {} then
        set i to item 1 of (get selection)
        if class of i is folder then
            set p to i
        else
            set p to container of i
        end if
    else
        set p to folder of window 1
    end if
    POSIX path of (p as alias)
end tell 
```

# c++ - Memory leak or not?

> ID：12129992
> 
> 赞同：3
> 
> 时间：2012-08-26T12:09:07.687
> 
> 标签：c++, arrays, pointers, memory-leaks

I have this small piece of code in the middle of a larger code:

```
int *p = new int[100];
p += 50;
delete []p; 
```

Will the compiler delete only the memory from the 51^(st) location? I think it does. However, in the case of array pointers, the compiler holds an additional item which tells the number of objects allocated. So, in that case, shouldn't it go ahead and delete memory beyond the allocated size? Or does it delete the 51^(st)–100^(th) elements and keep the 1^(st)–50^(th) in the memory, in which case a memory leak can happen.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T12:10:06.937

It's actually undefined behavior. You can only `delete` / `delete[]` what you got from `new` / `new[]`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-26T12:14:39.867

It's undefined behavior. [The C++ standard says](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf):

> **3.7.4.2 Deallocation functions**
> 
> 3 ... Otherwise, the behavior is undeﬁned if the value supplied to **`operator delete(void*)`** in the standard library is not one of the values returned by a previous invocation of either **`operator new(std::size_t)`** or **`operator new(std::size_t, const std::nothrow_t&)`** in the standard library, and the behavior is undeﬁned if the value supplied to **`operator delete[](void*)`** in the standard library is not one of the values returned by a previous invocation of either **`operator new[](std::size_t)`** or **`operator new[](std::size_t, const std::nothrow_t&)`** in the standard library.
> 
> 4 ... The eﬀect of using an invalid pointer value (including passing it to a deallocation function) is undeﬁned. (On some implementations, it causes a system-generated runtime fault.)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T12:12:01.100

The compiler does not allocate or delete memory, it is OS-dependent what happens if you call free on a pointer value that you did not get from new. The only thing that is guaranteed is that it is wrong.

# php - 哈希盐腌

> ID：12129995
> 
> 赞同：0
> 
> 时间：2012-08-26T12:09:23.270
> 
> 标签：php, security, encryption, hash, sha

您好，抱歉，如果这可能是一个愚蠢的问题，我将为我的网站尝试 sha+salt。想知道如何随机化我的盐。注册后，它们都将被散列到数据库中。我还需要对 sha 和 salt 进行解密以进行用户验证。如果有人指出我正确的检测或一篇好文章会很好。谢谢 另外，我对网站上的安全性内容不熟悉，我仍在研究我将为我的网站使用哪些安全性实现，目前这些是我将要做的。

1.  密码散列
2.  反 SQL 注入
3.  在 URL 中隐藏值

想知道更多我应该为我的安全添加什么。我正在将学校管理系统作为一个项目。

到目前为止，我正在调查。Anti-bruteforce 和我的教授给了我关于 HTTPS 的提示。

另外，如果密码是 sha+salt 加密的，我将如何验证登录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T12:35:13.827

由于这是一个相当大的问题，我可能更容易将您引导到一些有用的资源，而不是尝试自己解释它。

对于网络密码学的介绍，A List Apart[写了一篇不错的文章](http://www.alistapart.com/articles/web-cryptography-salted-hash-and-other-tasty-dishes/)。它没有太多讨论实现，但提供了一个很好的概述。

有关安全漏洞的列表以及如何对抗它们，请参阅[OWASP 十大项目](https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project)。

这是一个非常全面的[PHP 安全](http://phpsec.org/projects/guide/)指南。

最后，有关创建登录系统的更多信息，请参阅[此问题。](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)

我建议您搜索 Stack Overflow，因为您可能遇到的问题可能有一些很好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T12:41:37.073

作为盐只是一个随机字符串添加到您要编码的字符串的哈希值，有足够的方法来生成它[例如[this on SO](https://stackoverflow.com/questions/2235434/how-to-generate-a-random-long-salt-for-use-in-hashing) ]。

您不需要也无法解密任何 sha 结果，因为 sha [like md5] 是一种**散列**算法，而不是**crypt**函数，即它并不意味着隐藏任何内容以供以后检索：这很重要，因为我不想要我注册的网站的管理员可以从数据库中读取我的密码。

散列是将一个数据集中的元素映射到另一个数据集中的较短元素，以一种 [几乎完全] 单[射的方式](http://en.wikipedia.org/wiki/Injective_function)- 您将任意长字符串映射到固定长度的键：这使您可以在散列域中进行比较，而无需实际知道原值。

```
hash( value1 ) = hash ( value2 ) => value1 = value2 
```

我说*几乎*是因为散列算法有一些冲突[例如，先前声明的例外，例如`hash(value1) = hash(value2)`并不意味着 2 个值相同] - 盐在这方面也有帮助。

这就是说，这是您将密码保存到 db 的方式：

*   生成盐；
*   **将**盐添加到实际密码中：将其放在密码*之前*以防止[字典攻击](http://en.wikipedia.org/wiki/Dictionary_attack)很重要；
*   用适当的算法对连接的字符串进行[哈希](http://www.php.net/manual/en/function.hash.php)`sha1`处理[我只是为了举例而选择的]；
*   将字符串和盐都保存到数据库中。

在代码中：

```
$user -> salt = your_salt_generator();
$user -> hashedPwd = hash('sha1', $salt . $userChosenPwd); 
```

Pwd 检查`$username`/`$password`只是：

*   `$username`从数据库中获取用户；
*   如果存在，请使用上面保存的盐和给定密码的过程，并检查它是否等于存储的哈希。

在代码中：

```
hash('sha1', $user -> salt . $sentPassword) == $user -> hashedPwd; 
```

* * *

关于在 URL 中隐藏值，它更像是一个 SEO / 可读性主题而不是安全主题：应该在路由时创建 URL [例如`http://somesite.com/products/:id`访问第 id 产品]，并且您的服务器逻辑不应该容易受到放入请求中的内容的影响制作到您的网站[不管我现在无法提供的完全废话]。

* * *

关于 MySQL 注入，我们摆脱了它们，因为PDO[扩展的](http://www.php.net/manual/en/book.pdo.php)[预处理语句](http://php.net/manual/en/pdo.prepare.php)。

SO周围有数百万个关于这个的答案，看看周围。

跟上您的工作！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T12:42:47.397

不是真正直接回答您的问题，而是查看 phpass [http://www.openwall.com/phpass/](http://www.openwall.com/phpass/)

它将为您处理加盐，并且已经被许多安全专家审查并被认为是非常好的密码哈希工具

# django - 这是否需要动态形式？

> ID：12129996
> 
> 赞同：0
> 
> 时间：2012-08-26T12:09:23.303
> 
> 标签：django

这是我的 forms.py 代码

```
 class register(forms.Form):
        list = services.objects.all()
        for item in list:
            item.name = forms.BooleanField() 
```

模型服务是

```
 class services(models.Model):
        name = models.CharField(max_length=100) 
```

这就是我在我看来使用上述表格的方式

```
 form = register()
    return render_to_response("main.html",{'html_form': form},context_instance=RequestContext(request)) 
```

但我得到一个空白的html（没有复选框！）。我需要动态表格吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T12:14:43.700

你需要[`ModelChoiceField`](https://docs.djangoproject.com/en/dev/ref/forms/fields/)

```
class Register(forms.form):

    item = forms.ModelChoiceField(queryset=services.objects.all(),
                                  default=None,
                                  widget=forms.CheckboxSelectMultiple()) 
```