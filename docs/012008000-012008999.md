# StackOverflow 问答 12008000-12008999

# php - 如何将变量从视图传递到另一个视图

> ID：12008001
> 
> 赞同：-5
> 
> 时间：2012-08-17T14:47:08.253
> 
> 标签：php, codeigniter

> **可能重复：**
> [codeigniter：将数据传递给视图中包含的视图](https://stackoverflow.com/questions/4325633/codeigniter-pass-data-to-a-view-included-in-a-view)

如何将变量从视图传递到其中的另一个视图？（codeigniter）

感谢：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:49:46.763

如果您的意思是，您在一个视图中设置了一个变量，那么您在该视图中调用另一个视图，并且您想在那里使用它，这是最简单的方法，在调用视图的控制器中设置它。

```
$data['var'] = 'value';
$this->load->view('view file',$data); 
```

然后你可以在每个子视图中达到它。

# css - css 水平调整 2 张图像大小

> ID：12008003
> 
> 赞同：1
> 
> 时间：2012-08-17T14:47:16.087
> 
> 标签：css, image, html

我被困在一段非常基本的代码上，我想我一定不知道正确的语法。

我想并排显示 2 张图像（水平为 X | X），并且它会根据屏幕的宽度自动调整大小......

我的问题是，当屏幕宽度减小时，第二张图像低于第一张。我试图修复我的 DIV Contener 的高度，但第二张图片出现了……请问您知道如何解决这个问题吗？附上我当前的一段代码。

```
<div style="width:100%;max-height:150px;border:1px solid black;" >
<img src="http://chezsilvia.c.h.pic.centerblog.net/o/3963dc3b.jpg" style="max-width:100%;"/>
<img src="http://chezsilvia.c.h.pic.centerblog.net/o/3963dc3b.jpg" style="max-width:100%;"/>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:51:54.290

需求`width: 50%;`和`float:left;`左图

这是一个 jsFiddle：http: [//jsfiddle.net/vwMWn/18/](http://jsfiddle.net/vwMWn/18/)

您的代码：

```
<div style="width:100%;max-height:150px;border:1px solid black;" >
     <img src="http://chezsilvia.c.h.pic.centerblog.net/o/3963dc3b.jpg" style="max-width:50%; float:left"/>
     <img src="http://chezsilvia.c.h.pic.centerblog.net/o/3963dc3b.jpg" style="max-width:50%;"/>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:50:53.500

`position: relative;`在您的包装和`width: 50%; float: left;`图像上使用

```
<div style="position: relative; float: left; width: 100%; border: solid 1px #000">
    <img src="yourPath.jpg" style="float: left; width:50%;">
    <img src="yourPath.jpg" style="float: left; width:50%;">
</div> 
```

# javascript - 如何将对象保存到 google Ui 实例中。

> ID：12008005
> 
> 赞同：0
> 
> 时间：2012-08-17T14:47:17.100
> 
> 标签：javascript, google-apps-script

我想要做的是在 UI 实例中保存一个数据表和一个数组，以便处理程序可以调用它们来完成它应该做的事情。我对编程还很陌生，所以如果你把它当作一个愚蠢的问题来看待，不要感到难过，但仍然请回答它。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T16:28:22.463

最简单的方法之一是使用隐藏的小部件将数据存储为字符串，如下例所示：

```
function doGet() {
    var app = UiApp.createApplication();
    var hidden = app.createHidden('hidden').setId('hidden');// widget's name = hidden
//...
  var array = ['item1','item2'] ;

  hidden.setValue(array.toString()); //assign a value as a string
//...
return app
}

function handlerfunction(e){
var array = e.parameter.hidden.split(','); // get the widget's value by its name parameter and reconvert it back to an array
//...
return app
} 
```

# rest - RESTful 客户端多久拉一次服务器数据

> ID：12008008
> 
> 赞同：0
> 
> 时间：2012-08-17T14:47:27.840
> 
> 标签：rest, pull

我有一个使用 Netbeans IDE 开发的 RESTful Web 服务应用程序。该应用程序使用 MySQL 服务器作为其后端服务器。我现在想知道的是使用我的 RESTful 应用程序的客户端应用程序多久刷新一次以反映服务器中的数据更改。

客户端从 RESTful 应用程序中是否有任何默认的拉取间隔？框架（JAX-RS）是否对它做些什么或者是我的业务要照顾。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:54:25.463

@亚伯拉罕

没有这样的规则。唯一可以用来正确实现这一点的是 HTTP 的缓存功能。服务必须包含控制信息，特定资源的表示可以被缓存多长时间，重新验证，从不缓存等......

在客户端应用程序方面，每个客户端都可以决定它自己的路径，它将如何使自己与服务保持同步。它可以通过在本地存储数据并从本地缓存等为最终用户提供服务来完成......服务不能（也不应该知道）客户端是如何实现的，唯一服务可以做的就是在响应消息中包含缓存信息，因为我已经上文提到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:33:42.473

您有责任安排服务一次又一次地执行。我们可以设置超时间隔，但没有拉动间隔。

# css - 如何强制 yui 菜单出现在光滑的网格上方

> ID：12008012
> 
> 赞同：1
> 
> 时间：2012-08-17T14:47:52.827
> 
> 标签：css, jquery-ui, yui, slickgrid

我正在使用带有 JQuery Slickgrid 和 JQuery 皮肤的 YUI 菜单！（是的，我知道）

我遇到以下问题

![在此处输入图像描述](../Images/c11759ce7320d401c3853d6542ca2d31.png)

菜单正在融入网格。我应该改变什么CSS来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:52:31.397

使用 z-index 将您的 div 保持在另一个之上。

```
z-index: 5; 
```

# php - jQuery中的类和substr？

> ID：12008016
> 
> 赞同：0
> 
> 时间：2012-08-17T14:48:04.377
> 
> 标签：php, javascript, jquery, html

```
<div class="test-test-one">one</div>
<input type="checkbox" class="now" name="here_one"> <br />

<div class="test-test-two">two</div>
<input type="checkbox" class="now" name="here_two"> <br />

<div class="test-test-three">three</div>
<input type="checkbox" class="now" name="here_three"> <br />

<div class="test-test-four">four</div>
<input type="checkbox" class="now" name="here_four"> <br /> 
```

​ 小提琴：http : [//jsfiddle.net/3eUEp/](http://jsfiddle.net/3eUEp/)

我想做：

如果我单击带有名称 = **here_one**的复选框，那么这应该将类**.red**添加到带有类**test-test-one** 的 div 中，如果我单击带有类**test-test-one 的**div 那么也应该选中带有名称 = **here_one**的复选框。

我怎样才能用 jQuery 做到这一点？我不想使用 prev 和 next。我想使用选择器，但是如何使用 PHP 中的 substr 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:55:08.743

```
$('.now').click(function(){
    var elem = $(this);  //the checkbox
    var numStr = elem.prop("name").split("_")[1];  //split the name into pieces
    $(".test-test-" + numStr).toggleClass("red", elem.is(":checked")); //get the element, toggle the class
}); 
```

[Edited jsfiddle](http://jsfiddle.net/3eUEp/3/)

Now you shoudl not be using divs, you should be using labels. Clicking on a label will do what you want. There is no JavaScript needed.

```
<label class="test-test-one" for="foo1">one</div>
<input type="checkbox" class="now" name="here_one" id="foo1"> <br /> 
```

And when you use a label, you are doing people a service that are using screen readers.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:55:53.617

这是 javascript 文档：[http ://www.w3schools.com/jsref/](http://www.w3schools.com/jsref/)

和 jQuery：[http ://docs.jquery.com/Main_Page](http://docs.jquery.com/Main_Page)

```
$('.now').click(function(){
    var v = $(this).attr('name').replace('here_', '');
if($(this).is(':checked'))  
{
        $('.test-test-'+v).addClass('red');
    }
    else
    {
        $('.test-test-'+v).removeClass('red');
    }
});

$("div[class^='test-test']").click(function(){
    if($(this).hasClass('red'))
    {
        $(this).next('.now').attr('checked', false);
        $(this).removeClass('red');
    }
    else
    {
        $(this).next('.now').attr('checked', true);
        $(this).addClass('red');
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:57:02.977

```
$("div[class^=test-test-]").click(
    function ()
    {
        var sub = ($(this).attr("class")).substring(10);
        $(".now[name=here_"+sub+"]").attr("checked",true);
    }
    );

$(".now").click(
     function ()
    {
        var sub = ($(this).attr("name")).substring(5);
        alert(sub);
        $(".test-test-"+sub).addClass("red");
    }
    );
​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T15:00:28.783

```
$('.now').click(function(){
  var name_part = $(this).prop('name').split('_')[1];

  if($(this).is(':checked')){

    $('div[class$='+name_part+']').css('color', '#F00');

  }else{

    $('div[class$='+name_part+']').css('color', '#000');  

  }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T14:56:22.070

你不需要任何 PHP，JS 本身有一个[`substr`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substr)。

```
$(function() {
    $("input.now").change(function(e) {
        var div = $("div.test-test-"+this.name.substr(5));
        if (this.checked)
           div.addClass("red");
        else
           div.removeClass("red");
    });
}); 
```

（[在 jsfiddle.net 上的演示](http://jsfiddle.net/kTASS/)）

# c# - 在 using 块调用 Dispose() 内调用 Response.Redirect() 吗？

> ID：12008018
> 
> 赞同：3
> 
> 时间：2012-08-17T14:48:04.623
> 
> 标签：c#

> **可能重复：**
> [Response.Redirect(“”) 在“using{}”中](https://stackoverflow.com/questions/187189/response-redirect-inside-using)

差不多就是这样。例如，如果我在 using 语句中有与数据库的连接，并且在我重定向到另一个页面的 using 语句中的某个位置，它会处理我的连接还是必须先手动调用它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T14:50:49.430

是的，它绝对会调用`Dispose`. `using`语句的重点是`Dispose`在块中调用`finally`，因此无论块正常完成还是异常完成，资源都会被释放。

在那个 IIRC 中这里有一个*轻微*`Response.Redirect`的皱纹，抛出一个`ThreadAbortException`如果它被抓住会自动重新抛出，但这不应该影响一个`finally`块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T14:52:39.717

它将正确处理连接。`using`只是 . 的语法糖`try/finally`。如果要确认行为，请替换 using for `try/finally`。它将跳转到`finally`重定向之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:50:29.540

它将为您处理您的连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T15:44:46.683

有几种情况`Dispose()`不会被调用：

应用程序进入一个永远不会返回的无限循环。应用程序异常关闭。位于`using`迭代器中，尚未实际输入 using。

你知道你没有前两个，因为你的进程既没有挂起也没有崩溃。你知道你有第三个，因为重定向在里面，`using`所以不可能是这样。

# python - 挂在连接上以显示

> ID：12008021
> 
> 赞同：0
> 
> 时间：2012-08-17T14:48:33.613
> 
> 标签：python

考虑以下代码：

```
#!/usr/bin/env python 

from Xlib.display import Display
import os

def main():
        disp = Display() # connect to display
        while True:
                print("1")
                event = disp.next_event()
                print("2")
                if event.type == Xlib.protocol.event.KeyPress:
                        print("keypress!")

if __name__ == '__main__':
        main() 
```

此代码输出`1`但不输出`2`。它似乎挂在显示连接上。为什么会这样？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T16:07:39.447

next_event() 方法是一种阻塞方法，请参阅[文档](http://python-xlib.sourceforge.net/doc/html/python-xlib_11.html)：

> 返回事件队列中的下一个事件。如果事件队列为空，则阻塞直到从网络读取事件，然后返回该事件。

如果它被阻止，那是因为还没有事件到达。

# c - 字符数组到整数数组

> ID：12008024
> 
> 赞同：1
> 
> 时间：2012-08-17T14:48:45.577
> 
> 标签：c

我得到了一组字符作为输入`scanf`，实际上是这样的`"1854?156X"`。

（使用`scanf("%c",&input[i])`, 输入是一个 10 个字符的数组）；

在进一步处理代码时，我想乘以`(first digit *10)`&`(second digit *9)`等等。

因此，在相乘时，它的 ASCII 值`1`实际上是`(49 *10)`，而不是`(1*10)`。

```
input[i]*counter; 
```

`counter`在哪里

```
int counter=10; 
```

如何将 char 数组转换为整数数组，其中应该乘以确切的数字而不是该字符的 ascii 值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T14:51:15.297

如果您提前知道您的价值是 ascii，那么只需从中减去“0”的值。例如`'9' - '0' = 9'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T17:05:42.797

绝对使用 atoi()。它为您节省了大量的手动字符检查。

```
int input_val = atoi(input);
int temp = input_val;

while(temp)
{
  int digit = temp % 10;
  temp /= 10;
} 
```

这为您提供了“数字”中从右到左的每个数字。您可以使用加法和乘以 10 的幂来构造您的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T18:13:45.727

用于`strtol`将这些字符串转换为整数类型。

它优于，`atoi`因为故障模式不是模棱两可的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T14:59:11.760

取 ascii 值并减去 48。

那是`input[i] - '0'`

...或者更确切地说使用[atoi()](http://www.cplusplus.com/reference/clibrary/cstdlib/atoi/)。如果转换失败，它会返回零，因此您无需担心“？” 以及遍历数组时的此类字符。

# javascript - Mongo --quiet 不抑制 --eval 输出

> ID：12008029
> 
> 赞同：7
> 
> 时间：2012-08-17T14:49:06.777
> 
> 标签：javascript, mongodb

我正在编写这个脚本，它接受 t 并在 test.js 中使用它。我将把输出通过电子邮件发送给我和我的同事。

```
% mongo my_db --eval 't=9999;' --quiet test.js
9999
------------------------------------------------
Info about stuff going back 9999 days to 2012-08-17.
------------------------------------------------
Stuff x: 433321 (12.43%)
Stuff y: 2723426 (81.57%)
Total: 4524524524 
```

有没有办法不让我传递给 --eval 的内容输出到控制台，这样我的结果顶部就没有那个悬空的“9999”？

**编辑：这可能是 --quiet 选项的错误**

请参阅： [https ://jira.mongodb.org/browse/SERVER-4391](https://jira.mongodb.org/browse/SERVER-4391)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:28:00.743

有点hack，但是在修复该错误之前，您可以`tail +2`先通过管道传输，这将排除您不想要的输出，例如：

```
% mongo my_db --eval 't=9999;' --quiet test.js | tail +2 
```

这在快速测试中对我有用，以省略 9999 行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-05T05:49:53.717

以防万一有人偶然发现这个问题。我遇到了同样的问题并得到了答案，无需使用 shell 魔法即可解决问题：

[在 shell 脚本中使用 mongodb 的结果](https://stackoverflow.com/questions/21553535/use-result-from-mongodb-in-shell-script)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-03-30T20:22:40.963

我意识到已经有一段时间了。发布解决方案，希望它可以帮助遇到此问题的人。

使用 void 前缀命令通常会使输出静音。

例如，尝试：

```
$ mongo <server>/db script.js --eval 'void (yyyymm="2011-11")' 
```

（注意：括号很重要）

# llvm - 如何使用 clang 为 C 代码生成报告

> ID：12008032
> 
> 赞同：6
> 
> 时间：2012-08-17T14:49:09.110
> 
> 标签：llvm, clang, static-analysis

按照主要clang静态分析器网页（[http://clang-analyzer.llvm.org/scan-build.html](http://clang-analyzer.llvm.org/scan-build.html)）的指示...

我有一个小 C 文件，它充满了令人发指的错误 ( `badcode.c`)：

```
int main(int argc, char ** argv)
{
    int j;
    int a[4];
    puts(a[j]);
    return 'a';
} 
```

为了基本了解 clang 静态分析器（scan-build）如何使用，我运行：

`scan-build -v clang badcode.c`

它输出：

```
scan-build: Emitting reports for this run to '/tmp/scan-build-2012-08-17-1'.
scan-build: 'clang' executable not found in '/usr/share/clang/scan-build/bin'.
scan-build: Using 'clang' from path: /usr/bin/clang
badcode.c:7:2: warning: implicit declaration of function 'puts' is invalid in C99 [-Wimplicit-function-declaration]
        puts(a[j]);
        ^
1 warning generated.
scan-build: Removing directory '/tmp/scan-build-2012-08-17-1' because it contains no reports. 
```

好的，太好了，clang 给出了一点警告，但仍然产生了 a.out。为什么它不生成报告？`j`对于任何静态分析器来说，未初始化的变量都应该是一个非常明显的危险信号——为什么不报告它？

我只是使用了错误的命令行参数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:05:33.983

尝试这个：

scan-build -k -V -o scan-reports xcodebuild clean build -configuration Debug -sdk [sdk-version] -xcconfig=[xconfig-certificate-file]

**例如：** scan-build -k -V -o scan-reports xcodebuild clean build -configuration Debug -sdk iphoneos5.0 -xcconfig="/Users/username/config.xcconfig"

这应该创建一个 html 输出。

# linux - 尝试为 Arm 配置 Qt 时未设置 PKG_CONFIG_PATH

> ID：12008034
> 
> 赞同：3
> 
> 时间：2012-08-17T14:49:19.750
> 
> 标签：linux, cross-compiling

我正在使用它来设置`PKG_CONFIG_PATH`

```
export PKG_CONFIG_PATH=/usr/local/dbus/lib/pkgconfig 
```

在此之后，我尝试使用以下命令运行 qt 的配置

```
./configure -prefix /home/navani/Qt-4.6.3/qt-everywhere-opensource-src-4.6.3 \
-opensource -embedded arm -platform qws/linux-x86-g++ -confirm-license -release \
-no-rpath -no-fast -no-accessibility -no-sql-ibase -no-sql-mysql -no-sql-odbc \
-no-sql-psql -no-sql-sqlite2 -no-qt3support -no-mmx -no-3dnow -no-sse -no-sse2 \
-no-neon -no-optimized-qmake -no-nis -no-cups -pch -reduce-relocations \
-force-pkg-config -prefix /usr -no-armfpa -make libs -nomake docs -iconv \
-largefile -embedded arm -qt-decoration-styled -depths all \
-xplatform qws/linux-mx35pdk-g++ -make examples -make demos \
-examplesdir /usr/bin/qt4-examples -qt-gfx-directfb -qt-gfx-linuxfb \
-qt-gfx-transformed -no-gfx-qvfb -qt-gfx-vnc -qt-gfx-multiscreen -qt-kbd-tty \
-qt-kbd-linuxinput -no-kbd-qvfb -qt-mouse-pc -qt-mouse-linuxinput \
-no-mouse-linuxtp -no-mouse-qvfb -qt-libpng -no-libmng -no-libtiff -no-gif \
-no-libjpeg -qt-zlib -qt-freetype -little-endian -stl -no-glib -no-openssl \ 
-no-dbus -no-opengl -shared -xmlpatterns -exceptions -no-multimedia \
-no-audio-backend -no-phonon -no-phonon-backend -no-webkit -no-scripttools \
-no-sql-sqlite -nomake tools -svg -script 
```

但我收到一个错误消息

> PKG_CONFIG_PATH 尚未设置。这可能意味着将使用主机编译器的 .pc 文件。这可能不是你想要的。

难道我做错了什么？？我应该怎么办？

# c# - WP7 WebClient 找不到特定的服务器

> ID：12008036
> 
> 赞同：1
> 
> 时间：2012-08-17T14:49:26.713
> 
> 标签：c#, windows-phone-7, webclient

好吧，也许这是有史以来最愚蠢的问题，但我真的不明白发生了什么：D

我有这个简单的代码：

```
private void button1_Click(object sender, RoutedEventArgs e)
    {
        Uri url = new Uri("http://www.something.com/");
        WebClient wc = new WebClient();  
        wc.DownloadStringAsync(url);
        wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);
    }

    void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        string result = e.Result;
    } 
```

当服务器的地址是“ts4.travian.it”时，它运行良好，除了一种情况（显然是我需要的情况）。在这种情况下，我收到此错误：“远程服务器返回错误：未找到。” 奇怪的是，如果我用基本相同的代码编写一个小型控制台应用程序，它就可以工作……知道吗？

编辑：更具体地说，服务器返回错误 403 - 禁止，但如果我在控制台应用程序中尝试相同的代码，它会完美运行......不知道该怎么想......我正在调试应用程序诺基亚 Lumia 800

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T16:38:21.347

我终于找到了问题。Silverlight框架自动设置了HttpWebRequest的Referer头，服务器“ts4.travian.it”拒绝了，因为不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:43:53.100

您是否忘记提供该案例的输出？

**编辑**：

状态码“ **403** ”表示服务器不喜欢您的应用程序中的某些内容。谁知道它可能会检查您的 UA 字符串并看到您使用的是 IE Mobile 我猜。比他不想让你看到的内容。嗯？

# sql - 生成唯一的外键元组

> ID：12008045
> 
> 赞同：1
> 
> 时间：2012-08-17T14:49:51.113
> 
> 标签：sql, tsql, sql-server-2008-r2

我有一张这样的桌子：

```
CREATE Table tblClassProperty (
    ClassPropertyID integer IDENTITY(1,1) PRIMARY KEY,
    Active bit DEFAULT 0 NOT NULL,
    DEL bit DEFAULT 0 NOT NULL,
    FINAL bit DEFAULT 0 NOT NULL,
    Locked bit DEFAULT 0 NOT NULL,
    _Project integer FOREIGN KEY REFERENCES tblProject(ProjectID),
    _Property integer FOREIGN KEY REFERENCES tblProperty(PropertyID),
    _Class integer FOREIGN KEY REFERENCES tblClass(ClassID)
    CONSTRAINT CClassProperty UNIQUE(_Project,_Property,_Class)) 
```

我正在将旧表（在另一个数据库中）中的数据迁移到这个表中。对于大多数列，我只是从另一个表中复制数据。旧数据库中不存在外键列，它们只是与新数据库中相应表链接的随机值。对于您的解决方案，请理所当然地认为 _Project、_Property 和 _Class 列的值需要按照现在的方式生成（使用`SELECT TOP 1 ...`）

```
INSERT INTO ClassDB..tblClassProperty (Active, DEL, FINAL, Locked, 
    _Project, _Property, _Class)
SELECT Active, DEL, FINAL, Locked, 
    (SELECT TOP 1 ProjectID FROM ClassDB..tblProject ORDER BY NEWID()),
    (SELECT TOP 1 PropertyID FROM ClassDB..tblProperty ORDER BY NEWID()),
    (SELECT TOP 1 ClassID FROM ClassDB..tblClass ORDER BY NEWID()),
FROM ClassDB_Access..tblClassProperty 
```

现在，`INSERT INTO`由于唯一约束，脚本不会运行，并且约束必须保持原样。

我的问题：我需要一个复制现有列的脚本，如上所述生成外键，但元组 ( `_Project, _Property, _Class`) 的生成值将根据约束是唯一的。

该脚本必须在 SQL Server 2008 R2 中运行，将来也可以在 Oracle 中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:05:20.043

您可以交叉连接所有三列，为它们分配随机行号并将它们连接回由 row_number 增加的 tblClassproperty：

```
; with randomized as (
   select a.ProjectID,
          b.PropertyID,
          c.ClassID,
          row_number() over(order by newid()) rn
     from ClassDB..tblProject a
    cross join ClassDB..tblProperty b
    cross join ClassDB..tblClass c
),
ordered as (
   select Active, DEL, FINAL, Locked,
          row_number() over (order by newid()) rn
     from ClassDB_Access..tblClassProperty
)
INSERT INTO ClassDB..tblClassProperty (Active, DEL, FINAL, Locked, 
    _Project, _Property, _Class)
select ordered.Active, ordered.DEL, ordered.FINAL, ordered.Locked, 
       randomized.projectID, randomized.PropertyID, randomized.ClassID
  from ordered
 inner join randomized
    on ordered.rn = randomized.rn 
```

如果不重新洗牌 cte 部分，这将在 Oracle 中不起作用 - 或者您可以使用派生表重写它以实现即时兼容性。

**免责声明：**除语法检查外，未经测试。性能可能很糟糕。

**编辑：**忘了提一下，如果`ID`s 中有重复值，您可能希望在交叉连接之前做不同的操作。

# eclipse - 分享一个项目到svn

> ID：12008048
> 
> 赞同：3
> 
> 时间：2012-08-17T14:49:55.063
> 
> 标签：eclipse, svn, subclipse

我不确定如何在 Apache Subversion (SVN) 中共享项目。我创建了一个名为`testsvn`Ubuntu linux 的 SVN 存储库。

我在另一个安装了 Subclipse 的 Windows 系统上运行 Eclipse IDE，我想与 Subversion 共享 Eclipse 项目。

例如**团队 | 分享项目 | SVN | 创建一个新的存储库**

然后我给网址，`http://192.168.10.1/testsvn`但我得到一个错误

```
svn: E175002: connection refused by the server
svn: E175002: OPTIONS request failed on '/testsvn' 
```

谁能帮我解决这个问题..

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-01T14:48:23.363

在运行 ANT 脚本执行自动结帐时，我们的 SVN 服务器遇到了同样的错误。我最初的想法是不允许匿名读取，但考虑到我们的配置，这没有意义。这是我们的控制台输出：

```
 [svn] svn: E175002: connection refused by the server
  [svn] svn: E175002: OPTIONS request failed on '/svn/branch_201212131157_3.1.6'
  [svn] Connection refused: connect
  [svn] <Checkout> failed. 
```

事实证明，当我们不在 SVN 服务器上提供 SSL 时，我们的 ANT 客户端尝试连接的主机 URL 是 https://。这是一个内部服务器，但提供主机的完整域名也被添加到 URL。虽然，仅相对主机名（机器名称）就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:59:03.017

**您应该在New** > **SVN Repository**中添加您的 svn 存储库 URL， 但不要在**Team** > **Share Project**中创建新的（显然，您无法远程创建它）。[请参阅此处](http://agile.csc.ncsu.edu/SEMaterials/tutorials/subclipse/)的分步说明。

# c++ - find_if 和 std::pair，但只有一个元素

> ID：12008059
> 
> 赞同：6
> 
> 时间：2012-08-17T14:50:26.073
> 
> 标签：c++, vector, lambda, iterator, std-pair

假设我有以下代码：

```
std::vector< std::pair <int, char> > myVec; 
or 
std::list< std::pair <int, char> > myList; 
/* then ***************/
std::list< std::pair <int, char> >::iterator listIt; 
or 
std::vector< std::pair <int, char> >::iterator vectorIt;

/* No difference between vector and list */ 
```

现在我只需要在其中搜索一个`int`元素，所以：

```
vectorIt = std::find_if(myVec.begin(),myVect.end(),make_pair(.....));
                                                   ^^^^^^^^^^^^^^^^^ 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-17T14:54:22.150

编写一个接受 , 的一元谓词，如果元素等于给定值`std::pair`，则返回 true 。`first`

例如：

```
struct CompareFirst
{
  CompareFirst(int val) : val_(val) {}
  bool operator()(const std::pair<int,char>& elem) const {
    return val_ == elem.first;
  }
  private:
    int val_;
}; 
```

然后

```
// find first element with first == 42
vectorIt = std::find_if(myVec.begin(),myVect.end(), CompareFirst(42)); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-17T14:54:41.777

这使用 C++11 lambda 表达式，并给定`value`您想要查找的 a：

```
std::find_if(container.begin(), container.end(), 
    [&value](std::pair<int, char> const& elem) {
    return elem.first == value;
}); 
```

`container`要么`myVec`要么`myList`。_

lambda 表达式`[&value](...){...}`是临时表达式的功能等价物（就像您可以将“3 + 2”作为参数传递给`int` 参数一样。编译器会将其转换为函数对象（很像 juanchopanza 的答案中的那个）。它使您免于打字并保持您的代码本地化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T15:47:24.057

```
template <class T,class S> struct pair_equal_to : binary_function <T,pair<T,S>,bool> {
  bool operator() (const T& y, const pair<T,S>& x) const
    {
        return x.first==y;
  }
}; 
```

为了找到所需的 int 值，您应该使用以下内容：

```
int find_me = 1;//chenge the value as you want
vector< pair <int, char> >::iterator it = 
        find_if(myVec.begin(),myVec.end(),bind1st(pair_equal_to<int,char>(),find_me)); 
```

例如 ：

```
int main() {
    vector< pair <int, char> > myVec;
    pair<int,char> p1 = make_pair(1,'a');
    pair<int,char> p2 = make_pair(2,'b');
    pair<int,char> p3 = make_pair(1,'c');
    myVec.push_back(p1);
    myVec.push_back(p2);
    myVec.push_back(p3);
    vector< pair <int, char> >::iterator it = find_if(myVec.begin(),myVec.end(),bind1st(pair_equal_to<int,char>(),1));
    if (it == myVec.end()) {
        cout << "not found\n";
    }
    else {
        cout<< "found - first instance is < " << it->first <<"," << it->second << " >";
    }
        return 0;
    } 
```

# php - PHP - 超链接标签未显示变量的完整值

> ID：12008060
> 
> 赞同：0
> 
> 时间：2012-08-17T14:50:26.983
> 
> 标签：php

我正在尝试以下代码，以便在锚点和标题中获取标记值。但是代码可以使用锚文本，但标题中只显示单个字符..

```
 $tag=$info['name']." from ".$info['city'];

  echo'  <td class="title1" bgcolor="#F7F7F7"> <a title='.$tag;  echo' href=details/';
  echo $info['friendly_url'];
  echo' >';
  echo $tag;
  echo'</a></td>'; 
```

请注意，标签值类似于“来自 NW 的大卫”；

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T14:52:03.310

您需要在值周围加上引号`title`，否则空格后面的部分将被解释为（格式错误的）HTML 属性。

```
echo '<td class="title1" bgcolor="#F7F7F7">';
echo '<a title="'.$tag.'" href="details/' . $info['friendly_url'] . '">';
echo $tag; 
echo'</a></td>'; 
```

使用引号将 HTML 属性括起来是一种很好的做法，以避免出现这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:22:44.230

那是丑陋的代码。重复的回声不可能在短时间内维持。您可以使用[HEREDOC](http://php.net/heredoc)并同时使其漂​​亮/易读：

```
echo <<<EOL
<td class="title1" bgcolor="#F7F7F7">
    <a title="$tag" href="details/{$info['friendly_url']}">$tag</a>
 </td>
EOL; 
```

任何支持 PHP 的现代 IDE 都会正确地为变量着色。并注意如何在 heredoc 中使用引号和变量，而无需进行任何讨厌的字符串连接。

# android - Android 整体应用状态管理

> ID：12008063
> 
> 赞同：1
> 
> 时间：2012-08-17T14:50:28.773
> 
> 标签：android, design-patterns

我正在为大多数主要移动操作系统（如 iOS、Windows Phone 和 Android）开发应用程序。我有一个来自我的客户的请求，可以在 iOS 和 WP 中实现，但在 Android 中听起来非常棘手。

在 iOS 和 WP 中，应用程序的生命周期是通过对象喜欢`UIApplication`和`Application`接收的事件来控制的。

在 iOS 中，例如 ,`applicationDidEnterBackground:`等，明确定义了`applicationWillEnterForeground:`Inactive **、** Active**和**Background**等**应用程序状态，并使应用程序状态管理逻辑真正简单明了。`applicationWillTerminate:`

 ******在 WP 中，`Application`接收很好理解的事件，例如**Launching**、**Deactivated**、**Activated**和**Closing**，这使得逻辑上决定在每个应用程序状态下应该做什么以保存为恢复应用程序范围的对象模型变得非常简单。

但在 Android 中，应用程序状态管理听起来非常困难，因为活动的状态变化，例如`onCreate`，`onRestart`…`onDestroy`方法覆盖。我的问题出现在我想在用户会话过期时控制整个应用程序状态并且我想将用户重定向到登录活动并关闭其他打开的活动。

`finish()`关于调用活动的`onCreate()`, `onRestart()`or`onResume()`被Android忽略的事实（根据文档）。

即使我覆盖`android.app.Application`并将逻辑放在那里，听起来控制开放活动也是不可能的。

我几乎尝试了所有可能的活动启动模式组合（例如`SingleTask`和`SingleInstance`），尽管我无法产生像 iOS 和 WP 中存在的行为。

还有另一个与这个问题相关的[帖子](https://stackoverflow.com/questions/10862052/android-single-activity-multiple-views)可能会更多地澄清我的问题。

确切的问题是，“是否有可能在 Android 中产生 iOS 或 WP 应用程序行为？”</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:56:54.513

所以本质上，一旦“会话”到期，无论用户尝试做什么，您都希望他们被重定向到登录活动，是吗？

假设您有一个可以调用的方法来告诉您会话是否已过期，为什么不简单地在 onResume() 等中检查该方法，如果会话已过期，请将用户重定向到登录活动？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:15:21.450

这里有一个关于您可能感兴趣的应用程序状态的答案：

[检查Android应用程序是否在后台运行](https://stackoverflow.com/questions/3667022/android-is-application-running-in-background)

使用 Application，您可以获得 onCreate，您可以在此处放置一些逻辑。所以，是的，它不像 iOS 那样直接，但它是可行的。

如果它只是一个会话状态，请创建一个基础活动来检查会话状态并从中继承所有活动。

您可以在进入登录页面之前使用 Android SDK 关闭所有活动，或者...锁定后退按钮。******

# extjs - extjs 4 从树形面板中删除节点在自定义拖放中给出错误

> ID：12008067
> 
> 赞同：1
> 
> 时间：2012-08-17T14:50:32.230
> 
> 标签：extjs, drag-and-drop, treeview, extjs4, treepanel

我正在使用树面板设置自定义拖放实现，我希望所有节点都附加到我在根目录下创建的节点。我试图以某种方式将一个节点从一个树面板拖到另一个节点。我可以将物品移过来，但是从另一侧取出时遇到了麻烦。

这是我的代码，这是在我的树形面板中：

```
viewConfig:{
 plugins:{
  ptype:'treeviewdragdrop',
  DDgroup:'treeDD'
 },

 listeners:{
    beforedrop: function(node, data, dropRec, dropPosition){
      if(dropRec.parentNode.data.text == "Root"){
        console.log('dropping on top level');
        this.up('panel').getStore().getRootNode().getChildAt(0).insertChild(0, data.records[0].data);
        //the below line seems to be causing the error, how should I be removing?
        choicesTree.getRootNode().getChildAt(0).removeChild(data.records[0]);
        //choicesTree is previously defined
        return false;
      }
} 
```

这设法从第一个树形面板中删除了该项目，但立即给出了以下错误：

```
item is null
fly(item.firstChild).highlight(me.repairHighlightColor, { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:53:21.063

return false 导致代码中的问题。return 0 也不能像文档描述的那样工作。由于 extjs 4.07 版中的错误，该代码无法正常工作 该代码在 4.1 版中按预期工作

从文档中：将此事件返回 false 表示放置手势无效，并且拖动代理是否将动画返回到拖动开始的点。向此事件返回 0 表示不应进行数据传输操作，但手势是有效的，并且不应进行修复操作。任何其他返回值都会继续进行数据传输操作。

文档中的上述行为与发生的情况不同

# ios4 - 如何从字符串中仅获取日期？

> ID：12008072
> 
> 赞同：0
> 
> 时间：2012-08-17T14:50:53.027
> 
> 标签：ios4

如何从日期时间日期值中仅获取日期我的代码是：

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"yyyy-MM-dd"];   
[dateFormat setDateStyle:NSDateFormatterShortStyle];

lblDateAvailable.text = [dateFormat stringFromDate:[datepick date]];
NSDate *date=[dateFormat dateFromString:lblDateAvailable.text];
NSLog(@"%@",date);

result=2012-08-17 18:30:00 +0000 
```

我只想从字符串中获取日期。所以请建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:15:09.600

将日期转换为字符串并使用此方法分隔组件并在标签中传递分隔值。

```
NSArray* components = [yourdatestring componentsSeparatedByString:@" "]; 
```

# c# - 在 wpf 中的用户控件内分配 DataGrid 的 itemsSource

> ID：12008074
> 
> 赞同：3
> 
> 时间：2012-08-17T14:50:59.380
> 
> 标签：c#, wpf, c#-4.0, wpfdatagrid

我对 wpf 很陌生，所以也许我在这里遗漏了一些明显的东西。我在 stackoverflow 中发现了一个类似的问题，并尝试了解决方案（在下面给出的代码中实现）但无法让它工作。链接在[这里](https://stackoverflow.com/questions/3904510/how-to-access-itemssource-property-of-a-datagrid-defined-in-usercontrol-from-mai)。让我解释一下这个问题。我正在使用框架 2010。

我有一个包含 1 个数据网格和 3 个按钮的用户控件。相同的xaml如下。

```
<UserControl x:Class="RadarControls.RadarDataGrid"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:diagnostics="clr-namespace:System.Diagnostics;assembly=WindowsBase"
         xmlns:local="clr-namespace:RadarControls"
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition Height="25" />
    </Grid.RowDefinitions>

    <DataGrid Name="myGrid" Grid.ColumnSpan="3" ItemsSource="{Binding}" AutoGenerateColumns="True"></DataGrid>

    <Button Content="Add" Grid.Row="1" Height="23" Margin="0,2,2,0" HorizontalAlignment="Left" Name="btnAdd" Width="100" />
    <Button Content="Delete" Grid.Column="1" Grid.Row="1" Margin="0,2,2,0" Height="23" HorizontalAlignment="Left" Name="btnDelete" Width="100" />
    <Button Content="Save" Grid.Column="2" Grid.Row="1" Height="23" Margin="0,2,0,0" HorizontalAlignment="Left" Name="btnSave" Width="100" />
</Grid>
</UserControl> 
```

我正在使用此用户控件的窗口的 xaml 如下

```
<Window x:Class="RadarStudio.Users"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ctrls="clr-namespace:RadarControls;assembly=RadarControls"
    xmlns:vm='clr-namespace:RadarViewModel.Users;assembly=RadarViewModel'
    Title="Users" Height="300" Width="300">
<Grid >
    <ctrls:RadarDataGrid Name="grid1" DataContext="{Binding str}"></ctrls:RadarDataGrid>
</Grid> 
```

我后面的窗口代码如下

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;
using System.Collections.ObjectModel;

namespace RadarStudio
{
    /// <summary>
    /// Interaction logic for Users.xaml
    /// </summary>
    public partial class Users : Window
    {
        public Users()
        {
            InitializeComponent();
            //this.DataContext = this;

            str.Add("dhaval");
            str.Add("ravinder");
        }

        public ObservableCollection<string> str = new ObservableCollection<string>();
    }
} 
```

我尝试了很多东西，但我无法在我的网格上找到字符串。

请帮忙！提前致谢！

问候，

萨马尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:04:24.007

您只能绑定到公共属性！`str`作为财产。

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms743643.aspx)：`The properties you use as binding source properties for a binding must be public properties of your class. Explicitly defined interface properties cannot be accessed for binding purposes, nor can protected, private, internal, or virtual properties that have no base implementation.`

`You cannot bind to public fields.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:55:59.563

正如 Zabavsky 提到的，WPF 绑定适用于对象的属性，但不适用于字段。

尝试将 str 更改为属性：

```
public partial class Users : Window
{
    public Users()
    {
        InitializeComponent();
        this.DataContext = this;

        str = = new ObservableCollection<string>();
        str.Add("dhaval");
        str.Add("ravinder");
    }

    public ObservableCollection<string> str { get; set; }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T06:58:14.560

试试这个.....

我刚刚检查了您的示例数据**，它运行良好，**我没有进一步测试。

**仔细检查......**

我刚刚修改了您的代码，并在下面发布。

```
<UserControl x:Class="RadarControls.RadarDataGrid"
     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
     xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
     xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
     xmlns:diagnostics="clr-namespace:System.Diagnostics;assembly=WindowsBase"
     mc:Ignorable="d" 
     d:DesignHeight="300" d:DesignWidth="300"  >
     <!--xmlns:local="clr-namespace:RadarControls"-->
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition Height="25" />
        </Grid.RowDefinitions>

        <DataGrid Name="myGrid" Grid.ColumnSpan="3"  AutoGenerateColumns="True"></DataGrid> //Data Grid Is Modified

        <Button Content="Add" Grid.Row="1" Height="23" Margin="0,2,2,0" HorizontalAlignment="Left" Name="btnAdd" Width="100" />
        <Button Content="Delete" Grid.Column="1" Grid.Row="1" Margin="0,2,2,0" Height="23" HorizontalAlignment="Left" Name="btnDelete" Width="100" />
        <Button Content="Save" Grid.Column="2" Grid.Row="1" Height="23" Margin="0,2,0,0" HorizontalAlignment="Left" Name="btnSave" Width="100" />
    </Grid>
</UserControl> 
```

您应该在其中使用此用户控件的窗口的 xaml

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace RadarControls
{
    /// <summary>
    /// Interaction logic for RadarDataGrid.xaml
    /// </summary>
    public partial class RadarDataGrid : UserControl
    {
        public RadarDataGrid()
        {
            InitializeComponent();
        }

        public DataGrid RadarGrid//New Public Class is added
        {
            get { return myGrid; }
        }
    }
} 
```

您应该使用此用户控件的窗口的 xaml

```
<Window x:Class="RadarStudio.Users"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Users" Height="300" Width="300">
    <Grid >
        <!--xmlns:ctrls="clr-namespace:RadarControls;assembly=RadarControls"
        xmlns:vm='clr-namespace:RadarViewModel.Users;assembly=RadarViewModel'-->
        <Grid Name="Dggrid"> </Grid>//New Grid is added as a place holder
    </Grid>
</Window> 
```

后面的窗口代码如下

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;
using System.Collections.ObjectModel;
using RadarControls;

namespace RadarStudio
{
    /// <summary>
    /// Interaction logic for Users.xaml
    /// </summary>
    public partial class Users : Window
    {
        RadarDataGrid rg = new RadarDataGrid();//Object of user control
        List<UserList> List = new List<UserList>();// It will be your item source
        UserList ListItem;
        public Users()
        {
            InitializeComponent();
            //this.DataContext = this;
            ListItem = new UserList();
            ListItem.UserName = "dhaval";//Adding First Item
            List.Add(ListItem);
            ListItem = new UserList();
            ListItem.UserName = "ravinder";//Adding Second
            List.Add(ListItem);
            rg.RadarGrid.ItemsSource = List;//Assigned Itemsource

            Dggrid.Children.Add(rg);
        }
    }

/*This Class is need to store user information, you can include users additional details 
(if needed) by creating corresponding Properties*/
    public class UserList
    {
        string userName;

        public string UserName
        {
            get { return userName; }
            set { userName = value; }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T09:33:10.560

窗口没有Datacontext，当你绑定str时找不到。修改 xaml ：

```
<Window x:Class="RadarStudio.Users"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:ctrls="clr-namespace:RadarControls;assembly=RadarControls"
xmlns:vm='clr-namespace:RadarViewModel.Users;assembly=RadarViewModel'
Title="Users" Height="300" Width="300"
Name="root">

<Grid >
    <ctrls:RadarDataGrid Name="grid1" DataContext="{Binding Path=str, ElementName=root}"/>
</Grid> </Window> 
```

并将 str 设置为属性

```
public partial class Users : Window
{
    public Users()
    {
        str = new ObservableCollection<string>();
        InitializeComponent();
        //this.DataContext = this;

        str.Add("dhaval");
        str.Add("ravinder");
    }

    public ObservableCollection<string> str { get; set; }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-21T07:51:32.673

这似乎是一个愚蠢的错误，但是当我在 InitializeComponent 调用之前初始化可观察集合时，它开始显示数据。

# javascript - Raphael JS: 把设置放在前面

> ID：12008075
> 
> 赞同：2
> 
> 时间：2012-08-17T14:51:03.093
> 
> 标签：javascript, html, css, indexing, raphael

我希望有人能告诉我如何在 Raphael JS 中将一整套元素带到 Front。

我正在使用一些动态生成的 raphael 元素集，每个元素都存储在一个数组中，从而更容易与单个集合进行交互和定位。当用户与各种集合交互时，我希望能够将完整集合带到应用程序的前面。

我曾尝试使用此处概述的 .toFront()：[http ://raphaeljs.com/reference.html#Element.toFront](http://raphaeljs.com/reference.html#Element.toFront)

然而，这并没有正常工作。每个集合包含一个圆圈或一个圆圈扇区、一个文本元素和一个附加圆圈或附加扇区。

有任何想法吗？在任何时候，用户可能拥有多达 40/50 的这些集合，因此无论如何将集合放在前面将是必要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T00:18:59.867

我对 toFront() 函数也有类似的问题......好吧，我想说有两种方法可以做到......第一个（不太推荐）对集合的所有元素应用循环以带来它们排在前面，但仍然会根据集合中的顺序对其进行排序 .... 不好的方法 ... set.forEach(el){ e.toFront();}

第二个真的很性感 :) 我的最爱 :) phrogz 先生[在这里完美地解释了](https://stackoverflow.com/questions/6566406/svg-re-ordering-z-index-raphael-optional)

我推荐使用'g'标签...简单的javascript。让你所有的集合都包含在 ag 标签中

```
var mySet = document.createElementNS("http://www.w3.org/2000/svg", "g");
mySet.setAttribute('id','myset');
//should look something like this
//use jQuery append or javaScript appendChild to add your set elements to this group
<g id = 'myset'>
      <rect>
      <circle>
      //etc etc
    </g> 
```

现在

```
 mySet.parentNode.appendChild(mySet); //the key line 
```

这只会将它带到 svg 容器的底部，因此最后绘制并根据链接中的 phrogz 先生也提到的画家模型显示在顶部....您可以使用 javascript 来操作自己的 z-index如果需要...

# jquery - JQuery函数的错误在哪里

> ID：12008079
> 
> 赞同：-1
> 
> 时间：2012-08-17T14:51:16.857
> 
> 标签：jquery, function

请告诉我我做错了什么：

我正在尝试为`id`特定元素中的每个孩子创建。以下代码不起作用：

```
$.get("/subject/list/", function(data){
    $("#subject-description-main-menu-list").children().each(function() {
        var pk;
        var subject;
        for (var i=0; i<data.length; i++) {
            pk = data[i]['fields']['pk'];
            subject = data[i]['fields']['name'];
        };  
        $(this).attr("id","subject_"+subject+pk);
    }); 
```

其余代码工作正常！并且 Google chrome 控制台没有给我任何错误，但元素的 id 没有改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:08:47.757

你是通过孩子来创建一个id的吗？

在 for 循环中，您运行数据对象并设置 pk 和主题。pk 和 subject 始终使用数据对象的最后一个元素设置，因为您遍历整个数据对象并覆盖 pk 和 subject。

因此 pk 和 subject 始终是相同的值。如果您将为每个孩子设置不同的 ID，则您不会覆盖 pk 和主题。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:55:18.127

我猜你得到的数据有`length == 0`。尝试记录数据并查看它包含的内容以及它是否有长度。

# wordpress - adsense 在错误的 iframe 中加载

> ID：12008086
> 
> 赞同：2
> 
> 时间：2012-08-17T14:51:40.337
> 
> 标签：wordpress, iframe, widget, adsense

我对 Adsense 有很大的问题，无论我做什么，adsense 结果 iframe 都会加载到其他 iframe 中。我正在使用 WordPress + Bootstrap 框架。

这个特定的网站有两个不同的广告，首先使用一个广告服务器服务，它给了我他自己的脚本，这个脚本放在 header.php 里面的 a`<div id="top-space">`和带有脚本的 adserver 句柄显示一个`<iframe>`和里面那个 iframe 的objet flash横幅。

adsense 代码在侧边栏中，我使用文本小工具来放置它，将代码放在那里就可以了。在 60% 的情况下，网站将每个横幅加载到正确的位置，adserver 横幅位于顶部，而 adsense 广告位于侧边栏中。

但！adsense iframe 随机加载到 adserver iframe 内。我尝试使用[此解决方案](https://stackoverflow.com/questions/1142861/jquery-append-google-adsense-to-div)，但根本不起作用。

我很绝望，因为我的客户正在赔钱，该网站没有显示正确的广告，有时 adsense iframe 推送广告服务器广告，因此该网站看起来很糟糕。

即使我尝试使用 adrotate wordpress 插件来帮助我避免这个错误，但没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-21T12:46:21.353

这听起来可能是一个缓存问题。我过去注意到，iframe 通常不会刷新，除非您专门右键单击并刷新每个单独的框架。如果您正在运行任何 WordPress 缓存，请将其清除，然后您的浏览器缓存，或尝试使用隐身窗口。

# sql - SQL查询找出票的数量

> ID：12008087
> 
> 赞同：1
> 
> 时间：2012-08-17T14:51:43.017
> 
> 标签：sql, ms-access

我在 MS Access 中有两个表。

表 1：用户

```
ID (auto int)
Name 
```

表2：门票

```
ID (auto int)
userName (int) (refers to ID in users table) 
```

如何列出用户名和提交的工单数量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T14:55:07.470

这应该会给你你想要的结果。您将需要使用聚合函数`COUNT()`和`GROUP BY`

```
SELECT u.name, count(t.username) TicketsSubmitted
FROM Users u
INNER JOIN tickets t
    ON u.id = t.username
GROUP BY u.name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T14:55:10.943

在子查询中计算每个用户的票，然后列出每个用户的所有信息。

```
SELECT u.Name AS UserName, t.ticketCount AS TicketsSubmitted
FROM users AS u 
INNER JOIN ( SELECT COUNT(ID), userName AS ticketCount FROM tickets GROUP BY userName ) AS t
ON u.ID = t.userName 
```

应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:58:03.177

生成表查询应该允许您查询这两个表并使用您想要的数据创建第三个表。

Microsoft Office 网站上的以下链接应为您提供所需的信息。

[http://office.microsoft.com/en-us/access-help/create-a-make-table-query-HA010108505.aspx](http://office.microsoft.com/en-us/access-help/create-a-make-table-query-HA010108505.aspx)

上面的两个答案为查询提供了可靠的建议，以获取您想要的数据。

# ruby-on-rails - Rails 3 - rmagick 在服务器上工作？

> ID：12008088
> 
> 赞同：1
> 
> 时间：2012-08-17T14:51:45.183
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我需要使用这个安装 ImageMagick 来使用它。服务器来在生产中实现这一点？

菜鸟问题，但我想知道它是如何实现的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:37:57.660

我最近在开发环境中推出了 rmagick/ImageMagick，生产环境的命令是相同的。希望这可以帮助。

首先，您需要安装 ImageMagick 以及它的开发包：（
我使用 Ubuntu 作为我的开发环境，不同环境的命令可能会有所不同）

```
sudo apt-get install imagemagick libmagickcore-dev libmagickwand-dev 
```

然后安装gem：

```
gem install rmagick 
```

或者，在 Gemfile

```
gem 'rmagick' 
```

就实际使用它而言，安装它就我所知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:11:07.777

如果这就是您的意思，您还需要在服务器上安装 ImageMagick。具体如何操作取决于服务器。

# android - 没有动画的 ListActivity

> ID：12008097
> 
> 赞同：0
> 
> 时间：2012-08-17T14:52:20.690
> 
> 标签：android, listactivity, baseadapter

我的列表活动中的布局有些问题。我的列表包含分隔符和文本行

SetupActivity 扩展 ListActivity

```
private MyCustomAdapter mAdapter;
TextView selection;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);

    mAdapter = new MyCustomAdapter();

    mAdapter.addItem("Help/FAQ");
    mAdapter.addSeparatorItem("Connection to Server");
    // mAdapter.addItem("Connection");
    // mAdapter.addItem("Network");
    // mAdapter.addItem("config");
    // mAdapter.addItem("User");
    // mAdapter.addItem("pass");
    // mAdapter.addItem("Email");
    // mAdapter.addItem("PlatForm");
    mAdapter.addSeparatorItem("Consumption");
    // mAdapter.addItem("100%");
    mAdapter.addSeparatorItem("Map");
    // mAdapter.addItem("Map rotation");
    // mAdapter.addItem("auto Zoom");
    // mAdapter.addItem("Measure Units");
    // mAdapter.addItem("Show Heading");
    // mAdapter.addItem("Compass North");*/
    mAdapter.addFooterItem(getString(R.string.setup_note_map));
    mAdapter.addSeparatorItem("Support");
    mAdapter.addItem("About");
    /*
     * mAdapter.addItem("Contact Us"); mAdapter.addItem("Tutorial");
     * mAdapter.addItem("Setup Wizard");
     */
    mAdapter.addSeparatorItem("Blogs");
    mAdapter.addFooterItem(getString(R.string.setup_note_blogs));

    setListAdapter(mAdapter);

    // selection = (TextView) findViewById(R.id.text);
}

public void onListItemClick(ListView parent, View view, int position,
        long id) {
    parent.getChildAt(position).setBackgroundColor(position);
    if (position == 0) {
        Intent myIntent = new Intent(SetupActivity.this,
                WebviewHandlerActivity.class);
        myIntent.putExtra("ressource", "help");
        SetupActivity.this.startActivity(myIntent);
    } else if (position == 6) {
        Intent myIntent = new Intent(SetupActivity.this,
                AboutActivity.class);
        SetupActivity.this.startActivity(myIntent);
    }

}

// Adapter Class
private class MyCustomAdapter extends BaseAdapter {

    private static final int TYPE_ITEM = 2;
    private static final int TYPE_SEPARATOR = 0;
    private static final int TYPE_FOOTER = 1;
    private static final int TYPE_MAX_COUNT = TYPE_ITEM + 1;

    private ArrayList<String> mData = new ArrayList<String>();
    private LayoutInflater mInflater;

    private TreeSet<Integer> mSeparatorsSet = new TreeSet<Integer>();

    private TreeSet<Integer> mFooterSet = new TreeSet<Integer>();

    public MyCustomAdapter() {
        getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
        mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    public void addItem(final String item) {
        mData.add(item);
        notifyDataSetChanged();
    }

    public void addSeparatorItem(final String item) {
        mData.add(item);
        // save separator position
        mSeparatorsSet.add(mData.size() - 1);
        notifyDataSetChanged();
    }

    public void addFooterItem(final String item) {
        mData.add(item);
        // save separator position
        mFooterSet.add(mData.size() - 1);
        notifyDataSetChanged();
    }

    @Override
    public int getItemViewType(int position) {
        if (mSeparatorsSet.contains(position))
            return TYPE_SEPARATOR;
        else if (mFooterSet.contains(position))
            return TYPE_FOOTER;
        return TYPE_ITEM;
    }

    @Override
    public int getViewTypeCount() {
        return TYPE_MAX_COUNT;
    }

    public int getCount() {
        return mData.size();
    }

    public String getItem(int position) {
        return mData.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder = null;
        int type = getItemViewType(position);
        if (convertView == null) {
            holder = new ViewHolder();
            switch (type) {
            case TYPE_ITEM:
                convertView = mInflater.inflate(R.layout.item1, null);
                holder.textView = (TextView) convertView
                        .findViewById(R.id.text);
                break;
            case TYPE_SEPARATOR:
                convertView = mInflater.inflate(R.layout.item2, null);
                holder.textView = (TextView) convertView
                        .findViewById(R.id.textSeparator);
                break;
            case TYPE_FOOTER:
                convertView = mInflater.inflate(R.layout.footer, null);
                holder.textView = (TextView) convertView
                        .findViewById(R.id.note);
                break;
            }
            convertView.setTag(holder);

        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.textView.setText(mData.get(position));
        return convertView;
    }

}

public static class ViewHolder {
    public TextView textView;
} 
```

我的 xml`item1 & item2`包含一个`LinearLayout`内部`TextView`和我`footer.xml`唯一的一个`textView`

我的问题是，当我点击一行时，它不会变成橙色来表示我点击了它，除了我的页脚......（我不想要的那个）

所以我发现这是因为它不在 a`LinearLayout`所以我试图推迟`LinearLayout`of`item1.xml`但我不能再编译了。

有人可以向我解释如何通过单击动画而不是在我的页脚上来获取我的行吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:54:16.940

您没有获得点击颜色，因为您设置了背景颜色`

> 设置背景颜色

您需要将[statelistDrawable](http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html)设置为背景

编辑：你需要设置一个像这样的drwable

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/pressed_img" android:state_pressed="true"/>
    <item android:drawable="@drawable/default_img"/>   
</selector> 
```

# java - j对话框中的格式化文本

> ID：12008100
> 
> 赞同：2
> 
> 时间：2012-08-17T14:52:30.427
> 
> 标签：java, fonts, colors, awt

我有一个 JOptionPane：

```
JOptionPane.showMessageDialog(null, text); 
```

文本是一个刺痛：

```
String text = "Hello world." 
```

我想要做的是改变文本的颜色，特别是一个单词，让我们说“你好”。所以我试过的是：

```
String t1 = "Hello";
String t2 = "world."
Font serifFont = new Font("Serif", Font.BOLD, 12);
AttributedString as = new AttributedString(t1);
as.addAttribute(TextAttribute.FONT, serifFont); 
as.addAttribute(TextAttribute.FOREGROUND, Color.red);

JOptionPane.showMessageDialog(null, as+t2); 
```

我不熟悉属性文本（），这不起作用。它这样做：

“java.text.AttributedString@479c479cworld”

有没有我错过的步骤？这不是正确的方法吗？有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T15:00:15.607

应该可以使用html来解决这个问题，即

```
String t = "<html><font color=#ffffdd>Hello</font> world!"; 
```

有关详细信息，请参阅[http://docs.oracle.com/javase/tutorial/uiswing/components/html.html](http://docs.oracle.com/javase/tutorial/uiswing/components/html.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-17T15:21:49.390

您可以`Component`在消息参数中将 a 传递给 JOptionPane，并将使用它来显示您的消息。

类似 a`JLabel`或 a 的东西`JPanel`，上面有标签。

**更新**

JLabel、JPanel 和 HTML 文本示例

```
public class TestOptionPane {

    public static void main(String[] args) {

        JLabel label = new JLabel("Hello");
        label.setForeground(Color.RED);

        JOptionPane.showMessageDialog(null, label);

        JPanel pnl = new JPanel(new GridBagLayout());
        pnl.add(createLabel("The quick"));
        pnl.add(createLabel(" brown ", Color.ORANGE));
        pnl.add(createLabel(" fox "));

        JOptionPane.showMessageDialog(null, pnl);

        String text = "<html>The Quick <span style='color:green'>brown</span> fox</html>";
        JOptionPane.showMessageDialog(null, text);

    }

    public static JLabel createLabel(String text) {

        return createLabel(text, UIManager.getColor("Label.foreground"));

    }

    public static JLabel createLabel(String text, Color color) {

        JLabel label = new JLabel(text);
        label.setForeground(color);

        return label;

    }

} 
```

在 Mac 上——

![Mac 上的 JOptionPane 示例](../Images/b50885001317b44161fb19d60cc383c8.png)

在 Windows 上 -

![Windows 上的 JOptionPane 示例](../Images/be89800ce41e88cb366f25063379283b.png)

# android - 有没有支持麦克风输入的安卓模拟器？

> ID：12008104
> 
> 赞同：26
> 
> 时间：2012-08-17T14:52:38.890
> 
> 标签：android, android-emulator, microphone

到目前为止，我还没有找到任何可以让我通过android 模拟器上的**麦克风测试语音输入的解决方案。**

通过将测试限制在廉价的 Android 手机上，我能够在开发过程中摆脱困境（抱歉，我没有多少钱），但现在一些用户抱怨我的应用无法在 Android 3 和 4 上运行。

所以，我正在拼命寻找一个 Android 模拟器（可以在 Windows 7 上运行）来帮助我在各种 Android 版本上测试我的基于麦克风的应用程序（我说的是[碎片化](http://mashable.com/2012/05/16/android-fragmentation-graphic/)吗？）

有***没有***支持[麦克风输入](https://stackoverflow.com/q/5924190/679180)的安卓模拟器？

其他可以使用标准 Android“模拟器”的建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T16:16:02.453

正如您所指出的，[live-android](http://code.google.com/p/live-android/)（带有此[HowTo](http://geeknizer.com/how-to-run-google-android-in-virtualbox-vmware-on-netbooks/)）已过时，据我所知，您只有一个（免费）选项可以[升级到 Android 4](http://www.makeuseof.com/tag/install-android-netbook/)： USB 拇指驱动器上的[Android x-86](http://www.android-x86.org/download/)插入您拥有的另一台上网本或笔记本电脑。

我看到的唯一问题是用于连接调试器的标准 Android USB 电缆将不起作用，因为上网本或笔记本电脑没有像真正的 Android 设备那样的微型 USB 连接器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-15T20:12:59.953

这是一个老问题，所以这里的答案需要更新。

AVD 管理器 (Eclipse/Android Studio) 中包含的所有模拟器现在都支持麦克风输入，尽管 ARM 版本并没有真正匹配现实的采样率。麦克风输入基于 x86 的模拟器工作得非常好，但只有 8kHz。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-19T16:09:06.267

块上有一个新的孩子，叫做[Buildroid for VirtualBox](http://www.buildroid.org/blog/?page_id=121)（以前[的 VirtualBox-AOSP](http://www.buildroid.org/blog/?page_id=38)）。这可能是您正在寻找的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-22T19:53:09.277

感谢 Babu 提供的[解决](https://stackoverflow.com/a/65900033/2828651)方案。模拟器可以像笔记本电脑一样支持虚拟输入和录制声音

# perl - 在 Perl 中一步声明并填充哈希表

> ID：12008107
> 
> 赞同：5
> 
> 时间：2012-08-17T14:52:44.830
> 
> 标签：perl, hash, initialization, lookup-tables, hashref

目前，当我想建立一个查找表时，我使用：

```
my $has_field = {};
map { $has_field->{$_} = 1 } @fields; 
```

有没有一种方法可以一步完成内联初始化？（即在我声明它的同时填充它？）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-17T14:55:29.413

只需使用您的地图创建一个列表，然后放入一个哈希引用，如：

```
my $has_field = { map { $_ => 1 } @fields }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T15:02:37.330

更新：抱歉，这并不能完全满足您的要求，因为您仍然必须先声明 $has_field 。

您可以使用哈希切片：

```
@{$has_field}{@fields} = (1)x@fields; 
```

右侧是使用`x`运算符通过@fields 的标量值（即数组中的元素数）重复一个。同样的另一种选择：

```
@{$has_field}{@fields} = map {1} @fields; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T15:40:23.087

在我测试过的地方，[智能匹配](http://perldoc.perl.org/perlop.html#Smartmatch-Operator)可以比创建查找哈希和测试*一次*值快 2 到 5 倍。因此，除非您要多次重复使用哈希，否则最好进行智能匹配：

```
if ( $cand_field ~~ \@fields ) { 
   do_with_field( $cand_field );
} 
```

*记住，从 5.10 开始，Perl 现在有一种原生*方式来询问“这个未经测试的值是否是这些已知值中的任何一个”，这是一件好事，这是*智能匹配*。

# jekyll - 在 Jekyll-Bootstrap 中使用类别过滤帖子

> ID：12008108
> 
> 赞同：9
> 
> 时间：2012-08-17T14:52:46.607
> 
> 标签：jekyll, liquid

我是使用 Jekyll 和 Jekyll-Bootstrap 的新手。

我发现这是按类别过滤的：

```
<ul class="posts">
{% for post in site.posts %}
    {% if post.categories contains 'demography' %}
        <li><span>{{ post.date | date_to_string }}</span> &raquo; <a href="{{ BASE_PATH }}{{ post.url }}">{{ post.title }}</a></li>
    {% endif %}
{% endfor %}
</ul> 
```

当我尝试组合标签和类别时，它不起作用：

```
<ul class="posts">
{% for post in site.posts %}
    {% if post.categories contains 'demography' and post.tags contains 'R' %} %}
        <li><span>{{ post.date | date_to_string }}</span> &raquo; <a href="{{ BASE_PATH }}{{ post.url }}">{{ post.title }}</a></li>
    {% endif %}
{% endfor %}
</ul> 
```

任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T20:35:21.373

您`%}`在第 3 行中的内容太多了。

除此之外，它应该可以正常工作。

# ruby-on-rails - 将哈希与列进行比较 - Rails

> ID：12008110
> 
> 赞同：0
> 
> 时间：2012-08-17T14:52:57.627
> 
> 标签：ruby-on-rails, database, activerecord, hash

我从返回值如下的 API 调用中获取哈希：

```
[{"name"=>"Abby Allen", "id"=>"123"}, {"name"=>"Barry Burner", "id"=>"234"}, {"name"=>"Cat Catrelli", "id"=>"345"}, {"name"=>"Darrell Dogooder", "id"=>"456"}, {"name"=>"Eva Ewing", "id"=>"567"}] 
```

我想将此哈希中的 id 与我当前在我的数据库（用户模型）中拥有的“apiid”列进行比较，并返回哈希和“apiid”列共有的所有 ID。

即我的用户模型中的 apiid 列看起来像这样

```
apiid
001
123
125
333
345 
```

我正在尝试这种方式，但任何建议都无法使其发挥作用。最终，apiid 列会很长，所以我也在寻找最有效的方法。

```
User.find_each(:select => "apiid") do |user|
  @friendscommon = @friends.select{|key, hash| hash["id"] == user }
end 
```

其中@friends 是上面的哈希值。

任何建议，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:00:14.253

您想提取哈希数组中所有 id 的数组：

```
apiids = hash.map { |user| user["id"] } 
```

这将导致 apiids 成为 id 的数组，即：

```
apiids = ["123","234","345","456","567"] 
```

并将其传递给查询：

```
User.select(:apiid).where(:apiid => apiids) 
```

在这里，where 子句有效地看到：

```
where(:apiid => ["123","234","345","456","567"]) 
```

翻译为：

```
SELECT apiid FROM users WHERE (users.apiid IN ("123","234","345","456","567")) 
```

# c# - 如何使行每3秒闪烁一次

> ID：12008115
> 
> 赞同：1
> 
> 时间：2012-08-17T14:53:32.093
> 
> 标签：c#, winforms

我不知道我是否正确执行此操作，但我有一个网格，我遍历网格以查看项目是否匹配。如果他们这样做，我想让该行每 3 秒闪烁一次。现在，我在代码中的内容几乎突出显示了该行，但没有闪烁。谁能帮忙看看？

```
public static void CheckRow(int item, DataGridViewRow row)
{
    List<int> col = new List<int>();
    //call to db and add to col

    foreach (var item in col)
    {
        if (item == col.Item)
        {
            currentRow = row;
            Timer t = new Timer();
            t.Interval = 3000;
            t.Tick += new System.EventHandler(Highlight);
            t.Start();
        }
    }
}

private static void Highlight(object sender, EventArgs e)
{
    currentRow.DefaultCellStyle.BackColor = Color.Brown;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:57:12.393

难道你不需要再次改变颜色（到原来的）来产生闪烁的效果吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-27T18:12:45.583

你应该使用线程。看代码:)

```
bool go = false; //for changing cell color
    int count = 10; //to stop timer (blinking)
    public blinkForm()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        timer1.Start();
        Thread a = new Thread(blink);
        a.Start();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        dataGridView1.AutoGenerateColumns = false;
        if (dataGridView1.Columns.Count == 0)
        {
            //generate new columns for DataGridView
            dataGridView1.Columns.Add("user", "User");
            dataGridView1.Columns.Add("pcStatus", "PC Status");
            dataGridView1.Columns.Add("service", "Servis");

            //generate new rows for DataGridView
            dataGridView1.Rows.Add("Ali", "PC007", "chrome.exe");
            dataGridView1.Rows.Add("Vusal", "PC010", "photoshop.exe");
            dataGridView1.Rows.Add("Rahim", "PC015", "chrome.exe");
        }

    }

    private void blink(object o)
    {
        while (count > 0)
        {
            while (!go)
            {
                //change color for binking
                dataGridView1.Rows[0].Cells["service"].Style.BackColor = Color.Tomato;
                go = true;
                //stop for 0.5 second
                Thread.Sleep(500);
            }

            while (go)
            {
                //change color for binking
                dataGridView1.Rows[0].Cells["service"].Style.BackColor = Color.LimeGreen;
                go = false;
                //stop for 0.5 second
                Thread.Sleep(500);
            }
        }
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        count--;
        if (count == 0)
        {
            //stop blinking after 10 second
            timer1.Stop();
        }
    } 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-17T15:00:28.947

也许这个，不是吗？

```
private static void Highlight(object sender, EventArgs e)
{
    currentRow.DefaultCellStyle.BackColor = Color.Brown;
    System.Threading.Thread.Sleep(2000);
    currentRow.DefaultCellStyle.BackColor = Color.White;
} 
```

# javascript - Chrome 中的 console.log 时间戳？

> ID：12008120
> 
> 赞同：320
> 
> 时间：2012-08-17T14:54:07.917
> 
> 标签：javascript, google-chrome

有什么快速的方法可以让 Chrome 在`console.log`写入中输出时间戳（就像 Firefox 一样）。还是预先`new Date().getTime()`设置唯一的选择？

* * *

## 回答 #1

> 赞同：533
> 
> 时间：2014-06-17T09:34:07.680

在 Chrome 中，控制台设置中有一个名为“显示时间戳”的选项（按 F1 或选择开发人员工具 -> 控制台 -> 设置 [右上角]），这正是我所需要的。

我刚刚找到它。不需要其他肮脏的黑客来破坏占位符并擦除记录消息的代码中的位置。

### Chrome 68+ 更新

“显示时间戳”设置已移至 DevTools 抽屉右上角的“DevTools 设置”的“首选项”窗格：

[![显示时间戳操作图片](../Images/c40fdfa0fa3ad889801a57ef0a6fb53b.png)](https://i.stack.imgur.com/to9n2.png)

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2012-11-07T21:13:05.343

尝试这个：

```
console.logCopy = console.log.bind(console);

console.log = function(data)
{
    var currentDate = '[' + new Date().toUTCString() + '] ';
    this.logCopy(currentDate, data);
}; 
```

或者这个，如果你想要一个时间戳：

```
console.logCopy = console.log.bind(console);

console.log = function(data)
{
    var timestamp = '[' + Date.now() + '] ';
    this.logCopy(timestamp, data);
}; 
```

以一种很好的方式记录不止一件事（如对象树*表示* ）**：**

 *```
console.logCopy = console.log.bind(console);

console.log = function()
{
    if (arguments.length)
    {
        var timestamp = '[' + Date.now() + '] ';
        this.logCopy(timestamp, arguments);
    }
}; 
```

**使用格式字符串**( [JSFiddle](http://jsfiddle.net/yTfSy/) )

```
console.logCopy = console.log.bind(console);

console.log = function()
{
    // Timestamp to prepend
    var timestamp = new Date().toJSON();

    if (arguments.length)
    {
        // True array copy so we can call .splice()
        var args = Array.prototype.slice.call(arguments, 0);

        // If there is a format string then... it must
        // be a string
        if (typeof arguments[0] === "string")
        {
            // Prepend timestamp to the (possibly format) string
            args[0] = "%o: " + arguments[0];

            // Insert the timestamp where it has to be
            args.splice(1, 0, timestamp);

            // Log the whole array
            this.logCopy.apply(this, args);
        }
        else
        { 
            // "Normal" log
            this.logCopy(timestamp, args);
        }
    }
}; 
```

输出：

![样本输出](../Images/6cc67cea9b6ad718d5db820d7b445b9d.png)

PS：仅在 Chrome 中测试。

PPS：`Array.prototype.slice`在这里并不完美，因为它会被记录为对象数组而不是一系列对象。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2019-03-12T15:07:09.980

我最初将此作为评论添加，但我想添加一个屏幕截图，因为至少有一个人找不到该选项（或者可能由于某种原因在他们的特定版本中不可用）。

在 Chrome 68.0.3440.106 上（现在签入 72.0.3626.121）我不得不

*   打开开发工具 (F12)
*   点击右上角的三点菜单
*   点击设置
*   在左侧菜单中选择首选项
*   检查设置屏幕的控制台部分中的显示时间戳

[![设置 > 首选项 > 控制台 > 显示时间戳](../Images/0f7cd333557874f758196be60ea756c0.png)](https://i.stack.imgur.com/g955L.png)

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2015-11-30T17:54:29.047

您可以使用开发工具分析器。

```
console.time('Timer name');
//do critical time stuff
console.timeEnd('Timer name'); 
```

“定时器名称”必须相同。您可以使用具有不同名称的多个计时器实例。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-08-17T18:13:56.710

我使用转换`arguments`为*数组*[`Array.prototype.slice`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice)，以便可以`concat`使用另一个要添加的数组，然后将其传递*给*`console.log.apply(console, /*here*/)`;

```
var log = function () {
    return console.log.apply(
        console,
        ['['+new Date().toISOString().slice(11,-5)+']'].concat(
            Array.prototype.slice.call(arguments)
        )
    );
};
log(['foo']); // [18:13:17] ["foo"] 
```

似乎`arguments`也可以[`Array.prototype.unshift`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/unshift)编辑，但我不知道像这样修改它是否是个好主意/会不会有其他副作用

```
var log = function () {
    Array.prototype.unshift.call(
        arguments,
        '['+new Date().toISOString().slice(11,-5)+']'
    );
    return console.log.apply(console, arguments);
};
log(['foo']); // [18:13:39] ["foo"] 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-08-17T15:17:32.590

`+new Date`并且`Date.now()`是获取时间戳的替代方法

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-08-06T01:56:15.760

如果您使用的是 Google Chrome 浏览器，则可以使用 chrome 控制台 api：

*   console.time：在代码中要启动计时器的位置调用它
*   console.timeEnd：调用它来停止计时器

这两个调用之间的经过时间显示在控制台中。

有关详细信息，请参阅文档链接：[https ://developers.google.com/chrome-developer-tools/docs/console](https://developers.google.com/chrome-developer-tools/docs/console)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-04-07T11:29:14.090

ES6 解决方案：

```
const timestamp = () => `[${new Date().toUTCString()}]`
const log = (...args) => console.log(timestamp(), ...args) 
```

where`timestamp()`返回实际格式化的时间戳并`log`添加时间戳并将所有自己的参数传播到`console.log`

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2018-08-18T11:14:14.303

Chrome 98 的更新：

> 设置 -> 首选项 -> 控制台 -> 显示时间戳

[![在此处输入图像描述](../Images/9ff7eb7a4c4014e09bda3948339e3f74.png)](https://i.stack.imgur.com/iyZqt.png)

从 Chrome 68 开始：

“显示时间戳”移至设置

之前在控制台设置控制台设置中的显示时间戳复选框已移至[设置](https://developers.google.com/web/tools/chrome-devtools/ui#settings)。

[![在此处输入图像描述](../Images/327dfb82b27448480333c2e6024dabeb.png)](https://i.stack.imgur.com/xIWuy.png)

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2013-09-19T07:08:38.663

也试试这个：

```
this.log = console.log.bind( console, '[' + new Date().toUTCString() + ']' ); 
```

此函数将时间戳、文件名和行号与内置 `console.log`.

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2014-10-27T22:43:40.160

如果要保留行号信息（每条消息都指向其 .log() 调用，而不是全部指向我们的包装器），则必须使用`.bind()`. 您可以通过预先添加一个额外的时间戳参数，`console.log.bind(console, <timestamp>)`但问题是您每次都需要重新运行它以获得与新时间戳绑定的函数。一个尴尬的方法是返回一个绑定函数的函数：

```
function logf() {
  // console.log is native function, has no .bind in some browsers.
  // TODO: fallback to wrapping if .bind doesn't exist...
  return Function.prototype.bind.call(console.log, console, yourTimeFormat());
} 
```

然后必须与双重调用一起使用：

```
logf()(object, "message...") 
```

但是我们可以通过安装一个带有 getter 函数的[属性来隐式调用第一个调用：](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty)

```
var origLog = console.log;
// TODO: fallbacks if no `defineProperty`...
Object.defineProperty(console, "log", {
  get: function () { 
    return Function.prototype.bind.call(origLog, console, yourTimeFormat()); 
  }
}); 
```

现在您只需调用`console.log(...)`并自动添加时间戳！

```
> console.log(12)
71.919s 12 VM232:2
undefined
> console.log(12)
72.866s 12 VM233:2
undefined 
```

你甚至可以通过简单`log()`的而不是`console.log()`通过做来实现这种神奇的行为`Object.defineProperty(window, "log", ...)`。

* * *

请参阅[https://github.com/pimterry/loglevel](https://github.com/pimterry/loglevel)了解使用 的安全控制台包装器`.bind()`，并具有兼容性回退。

请参阅[https://github.com/eligrey/Xccessors](https://github.com/eligrey/Xccessors)`defineProperty()`了解从旧版`__defineGetter__`API的兼容性回退。如果两个属性 API 都不起作用，您应该回退到每次都获取新时间戳的包装函数。（在这种情况下，您会丢失行号信息，但仍会显示时间戳。）

* * *

样板：时间格式化我喜欢的方式：

```
var timestampMs = ((window.performance && window.performance.now) ?
                 function() { return window.performance.now(); } :
                 function() { return new Date().getTime(); });
function formatDuration(ms) { return (ms / 1000).toFixed(3) + "s"; }
var t0 = timestampMs();
function yourTimeFormat() { return formatDuration(timestampMs() - t0); } 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-06-13T09:21:24.593

[从 JSmyth](https://stackoverflow.com/a/13278323/1915920)扩展了非常好的[解决方案*“带格式字符串”*](https://stackoverflow.com/a/13278323/1915920)以也**支持**

*   所有其他**`console.log`变体 ( `log`, `debug`, `info`, `warn`, `error`)**
*   包括**时间戳字符串灵活性参数**（例如`09:05:11.518`vs. `2018-06-13T09:05:11.518Z`）
*   包括**回退以防万一`console`或其功能**在浏览器中不存在

.

```
var Utl = {

consoleFallback : function() {

    if (console == undefined) {
        console = {
            log : function() {},
            debug : function() {},
            info : function() {},
            warn : function() {},
            error : function() {}
        };
    }
    if (console.debug == undefined) { // IE workaround
        console.debug = function() {
            console.info( 'DEBUG: ', arguments );
        }
    }
},

/** based on timestamp logging: from: https://stackoverflow.com/a/13278323/1915920 */
consoleWithTimestamps : function( getDateFunc = function(){ return new Date().toJSON() } ) {

    console.logCopy = console.log.bind(console)
    console.log = function() {
        var timestamp = getDateFunc()
        if (arguments.length) {
            var args = Array.prototype.slice.call(arguments, 0)
            if (typeof arguments[0] === "string") {
                args[0] = "%o: " + arguments[0]
                args.splice(1, 0, timestamp)
                this.logCopy.apply(this, args)
            } else this.logCopy(timestamp, args)
        }
    }
    console.debugCopy = console.debug.bind(console)
    console.debug = function() {
        var timestamp = getDateFunc()
        if (arguments.length) {
            var args = Array.prototype.slice.call(arguments, 0)
            if (typeof arguments[0] === "string") {
                args[0] = "%o: " + arguments[0]
                args.splice(1, 0, timestamp)
                this.debugCopy.apply(this, args)
            } else this.debugCopy(timestamp, args)
        }
    }
    console.infoCopy = console.info.bind(console)
    console.info = function() {
        var timestamp = getDateFunc()
        if (arguments.length) {
            var args = Array.prototype.slice.call(arguments, 0)
            if (typeof arguments[0] === "string") {
                args[0] = "%o: " + arguments[0]
                args.splice(1, 0, timestamp)
                this.infoCopy.apply(this, args)
            } else this.infoCopy(timestamp, args)
        }
    }
    console.warnCopy = console.warn.bind(console)
    console.warn = function() {
        var timestamp = getDateFunc()
        if (arguments.length) {
            var args = Array.prototype.slice.call(arguments, 0)
            if (typeof arguments[0] === "string") {
                args[0] = "%o: " + arguments[0]
                args.splice(1, 0, timestamp)
                this.warnCopy.apply(this, args)
            } else this.warnCopy(timestamp, args)
        }
    }
    console.errorCopy = console.error.bind(console)
    console.error = function() {
        var timestamp = getDateFunc()
        if (arguments.length) {
            var args = Array.prototype.slice.call(arguments, 0)
            if (typeof arguments[0] === "string") {
                args[0] = "%o: " + arguments[0]
                args.splice(1, 0, timestamp)
                this.errorCopy.apply(this, args)
            } else this.errorCopy(timestamp, args)
        }
    }
}
}  // Utl

Utl.consoleFallback()
//Utl.consoleWithTimestamps()  // defaults to e.g. '2018-06-13T09:05:11.518Z'
Utl.consoleWithTimestamps( function(){ return new Date().toJSON().replace( /^.+T(.+)Z.*$/, '$1' ) } )  // e.g. '09:05:11.518' 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-02-14T19:23:56.640

我在大多数 Node.JS 应用程序中都有这个。它也适用于浏览器。

```
function log() {
  const now = new Date();
  const currentDate = `[${now.toISOString()}]: `;
  const args = Array.from(arguments);
  args.unshift(currentDate);
  console.log.apply(console, args);
} 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2021-03-19T08:48:43.220

Chrome 版本 89.0.4389.90 (19.03.2021)

1.  按 F12。
2.  找到并按下齿轮图标。
    ![1](../Images/19ac751fe32c51fc9b6a95c235b8e44c.png)
3.  检查`Show timestamps`。
    ![2](../Images/ce065944652ef60cd23847f64badb8c6.png)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-03-11T16:45:29.223

`this`这将使用尽可能多的参数向本地范围（使用）添加一个“日志”函数：

```
this.log = function() {
    var args = [];
    args.push('[' + new Date().toUTCString() + '] ');
    //now add all the other arguments that were passed in:
    for (var _i = 0, _len = arguments.length; _i < _len; _i++) {
      arg = arguments[_i];
      args.push(arg);
    }

    //pass it all into the "real" log function
    window.console.log.apply(window.console, args); 
} 
```

所以你可以使用它：

```
this.log({test: 'log'}, 'monkey', 42); 
```

输出如下内容：

> [格林威治标准时间 2013 年 3 月 11 日星期一 16:47:49] 对象 {test: "log"} 猴子 42

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-02-15T17:58:45.503

JSmyth 对答案的改进：

```
console.logCopy = console.log.bind(console);

console.log = function()
{
    if (arguments.length)
    {
        var timestamp = new Date().toJSON(); // The easiest way I found to get milliseconds in the timestamp
        var args = arguments;
        args[0] = timestamp + ' > ' + arguments[0];
        this.logCopy.apply(this, args);
    }
}; 
```

这个：

*   以毫秒显示时间戳
*   假定格式字符串作为第一个参数`.log`*

# php - Impossible MySQL return value

> ID：12008128
> 
> 赞同：0
> 
> 时间：2012-08-17T14:54:25.437
> 
> 标签：php, mysql

This question is similar to this one: [Why does mysql_query() return TRUE with a SELECT statement?](https://stackoverflow.com/questions/6208156/why-does-mysql-query-return-true-with-a-select-statement). I execute a SELECT mysql query in php, but it returns true. I've been starting at it for half an hour now and I'm completely positive it is a select query and it returns true. The obvious fix for the similar question was to check if the connection was still alive. The difference for me is, the mysql_error is empty. Here are the parts of my code that cause the error:

```
public function query($query, $params = array())
{
    $params['prefix'] = 'unpirate_';

    foreach($params as $key => $param)
    {
        $query = str_replace('{' . $key . '}',
            mysql_real_escape_string($param), $query);
    }

    echo($query);
    return mysql_query($query, $this->conn) or $this->error($query);
}

public function fetch_all($query, $params = array())
{
    $result = $this->query($query, $params);

    if($result === true)
        die('"' . mysql_error() . '"');
    (...)
} 
```

The query that is echo'd is a valid query (SELECT * FROM [table] WHERE event_id = "54") and the only other thing that is echo'd is "", thus the result is true and the mysql_error is empty. Do you guys have any idea what is going on? Please correct me if my conclusion is not right.

PHP version: PHP 5.3.10-1ubuntu3.2 with Suhosin-Patch (cli) (built: Jun 13 2012 17:19:58)

MySQL version: mysql Ver 14.14 Distrib 5.5.24, for debian-linux-gnu (x86_64) using readline 6.2

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T14:56:42.260

```
return mysql_query($query, $this->conn) or $this->error($query); 
```

您的返回值是 OR 语句。

发生的事情是 PHP 正在评估 OR 并返回它的值，而不是代码本身；因为第一部分有数据，所以它评估为真，并返回一个布尔值真。

尝试：

```
$retVal = mysql_query($query, $this->conn);
if (false === $retVal) {
    return $this->error($query);
}
return $retVal; 
```

# c# - Error validation with IDataErrorInfo and IValueConverter

> ID：12008133
> 
> 赞同：0
> 
> 时间：2012-08-17T14:54:30.863
> 
> 标签：c#, silverlight, validation, silverlight-5.0, idataerrorinfo

I have a class with a `List<string> Tags` that I want to display in a TextBox. For this I use a IValueConverter.

ListToStringConverter:

```
public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
{
    var list = value as List<string>;
    var returnvalue = string.Empty;

    if(list != null)
        list.ForEach(item => returnvalue += item + ", ");
    return returnvalue;
}

public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
{
    var strValue = value as string;

    if(strValue != null)
        return strValue.Split(new char[] { ',' });

    return null;
} 
```

Class Test:

```
public class Test : IDataErrorInfo
{
    public Test()
    {
        Tags = new List<string>();
    }

    public List<string> Tags { get; set; }

    string errors;
    const string errorsText = "Error in Test class.";
    public string Error
    {
        get { return errors; }
    }

    public string this[string propertyName]
    {
        get 
        {
            errors = null;
            switch (propertyName)
            {
                case "Tags":
                    if (Tags.Count <= 1)
                    {
                        errors = errorsText;
                        return "...more tags plz..";
                    }
                    break;
            }
            return null;
        }
    }
} 
```

Now I want to Validate the Tags:

```
<TextBox Text="{Binding Test.Tags, Converter={StaticResource ListToStringConverter}, Mode=TwoWay, ValidatesOnDataErrors=True}" /> 
```

But there is no error displayed. Maybe because of the conversion but how can i still accomplish a validation?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:27:13.150

我不明白为什么它不应该工作。如果您将在第一次运行 - SL 将突出显示带有红色边框的 TextBox。但是，如果您尝试更改标签列表 - 您将什么也看不到，因为您在转换器中有一个错误 ConvertBack 您返回字符串类型数组 (string[])，但属性需要 List 类型的对象，所以您只需要将 ConvertBack 方法更新为：

```
public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
{
    var strValue = value as string;

    if (strValue != null)
        return strValue.Split(new char[] { ',' }).ToList();

    return null;
} 
```

关于 Convert 方法的另一个注意事项，您可以使用 Join 方法：

```
public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
{
    var list = value as List<string>;
    if (list != null)
        return String.Join(", ", list);
    return null;
} 
```

还有一件事是关于组合字符串。不要使用运算符 +，因为您可能会遇到性能问题，请改用 StringBuilder。

# java - AbstractMethodError On a Dynamic Loaded Jar

> ID：12008138
> 
> 赞同：0
> 
> 时间：2012-08-17T14:55:03.210
> 
> 标签：java, plugins, dynamic

> I am loading a plug-in dynamically. Both the plug-in and the software have been created by us.
> 
> I have an Interface lets call it Foo. There is also FooImpl that just implements that method But FooImpl is in the jar loaded dynamically `public interface Foo { void write(..someArgument..) throws Exception; }`
> 
> I have also a PluginLoader class here is the method
> 
> ```
>  public
> Object loadPlugin(final String jarPath, final Class
> pluginInterface) {
>     try
>     {
>         final URI uri = new File(jarPath).toURI();
>         final URL url = uri.toURL();
> 
>     final URLClassLoader ucl = new URLClassLoader(new URL[] { url });
>     try
>     {
>          final Class<?> pluginClass = Class.forName("FooImpl", true, ucl);
> 
>          // Verify if plugin implements plugin interface.
>          if (pluginClass.getInterfaces()[0].getName().equals(pluginInterface.getName()))
>          {
>           // Instantiate plugin.
>           return pluginClass.newInstance();
> 
>          } }//[...] </code></pre> 
> ```
> 
> This part is actually working well i think so because after doing some sysout on the pluginClass i notice:
> the .getMethods() =
> [public void FooImpl.write(..someArgumentType..) throws Exception, public abstract void some.package.Foo.write(..someArgumentType..) throws Exception]
> 
> the .getGenericInterfaces() = [interface some.package.Foo]
> 
> But when i try to call the method write here is what i get
> java.lang.AbstractMethodError: FooImpl.write(..SomeArgumentType..;)V
> I dont know why there is a ";" and a "V"
> 
> So basically i think that it try to call the interface method instead of the implemented one. So i'm wondering What is going on!
> 
> As usual, Thank you for your time and help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:31:56.610

AbstractMethodError 表明您的代码在运行时尝试使用与最初构建的类不同版本的类。您需要确保在您的执行环境中，类路径上没有您的接口实现的恶意版本。

# c# - 使用 op_Addition 创建自定义类

> ID：12008144
> 
> 赞同：1
> 
> 时间：2012-08-17T14:55:17.667
> 
> 标签：c#, class, powershell-2.0

我正在阅读一本关于 WMI 和 Powershell 的书，它解释了如何在 Powershell 中创建自定义类。它涉及编写一些 C# 代码和`add-type`命令。当我尝试使用`+=`命令在对象中创建多个条目时，出现以下错误：

```
Method invocation failed because [pawobject] doesn't contain a method named 'op_Addition'.
At line:23 char:14
+ $MyObjects += <<<<  $MyObject
    + CategoryInfo          : InvalidOperation: (op_Addition:String) [], RuntimeException
    + FullyQualifiedErrorId : MethodNotFound 
```

我用来创建类的代码是这样的：

```
$source = @"
public class pawobject
{
    public string Description { get; set; }
    public string Name { get; set; }
    public int Number { get; set;}
}
"@ 
```

并将其添加到 PowerShell 我使用以下内容：

```
Add-Type $source -Language CSharpVersion3 
```

创建值的代码是这样的：

```
$MyObject = New-Object -TypeName pawobject -Property @{
    Name = "MyObject5";
    Number = 200;
    Description = "Take3"
} 
```

这将创建一个`$MyObject`. 我的问题就是从这里来的。我尝试使用多个条目创建对象，如下所示：

```
$MyObjects += $MyObject 
```

但我收到上述错误。我试过了

```
$MyObjects = $MyObjects + $MyObject 
```

我在网上环顾四周，并尝试将以下代码添加到`public class`：

```
public static string Add(string a, string b) {
    return (a + b);
} 
```

但这似乎只适用于数字。我对 C# 一点也不熟悉，所以我什至不确定从哪里开始寻找修复这个错误。我可以看到这非常有用，因为我总是在我的环境中创建新对象。能够定义我们自己的类型将是一个巨大的优势，尤其是能够控制可以将哪些类型的数据放入每个属性中。提前感谢您，祝您有美好的一天！

编辑：让我解释一下我想要结果做什么。

我希望能够这样声明：

```
$MyObject = New-Object -TypeName pawobject -Property @{
    Name = "MyObject";
    Number = 100;
    Description = "Take1"
    } 
```

当我得到输出时，`$MyObject`我得到了这个：

```
Description   Name         Number
-----------   ----         ------
Take1         MyObject     100 
```

然后我希望能够声明这一点：

```
$MyObjects += $MyObjects 
```

最后`$MyObjects`得到这个：

```
Description   Name         Number
-----------   ----         ------
Take1         MyObject     100
Take2         MyObject5    200 
```

基本上添加（不确定添加两组对象的技术术语）`$MyObject`到`$MyObjects`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:18:42.667

它将它解释为将两个对象添加在一起我认为在 c# 中您需要像这样实现操作：

```
 public static pawobject operator +(pawobject A, pawobject B)
    {

        //I have no idea how you would add two of these together
    } 
```

我不确定这实际上是你想要做的。似乎您想创建一个对象数组。

我已经对此进行了测试，它确实创建了一个对象数组。

```
PS C:\Users\James> $source = @"
>> public class pawobject3
>> {
>>     public string Description { get; set; }
>>     public string Name { get; set; }
>>     public int Number { get; set;}
>>     public static pawobject3[] operator +(pawobject3 A, pawobject3 B)
>>     {
>>         pawobject3[] Result = new pawobject3[2];
>>         Result[0] = A;
>>         Result[1] = B;
>>         return Result;
>>     }
>>     public static pawobject3[] operator +(pawobject3[] A, pawobject3 B)
>>     {
>>         pawobject3[] Result = new pawobject3[A.Length + 1];
>>         for(int i = 0; i < A.Length; i++)
>>             Result[i] = A[i];
>>         Result[A.Length] = B;
>>         return Result;
>>     }
>> }
>> "@
>>
PS C:\Users\James> Add-Type $source -Language CSharpVersion3
PS C:\Users\James> $MyPaw1
PS C:\Users\James> $MyPaw1 = New-Object -TypeName pawobject3 -Property @{
>> Name = "Test1";
>> Number = 1;
>> Description = "D1";
>> }
>>
PS C:\Users\James> $MyPaw2 = New-Object -TypeName pawobject3 -Property @{
>> Name = "Test2";
>> Number = 2;
>> Description = "D2";
>> }
>>
PS C:\Users\James> $MyPaw3 = New-Object -TypeName pawobject3 -Property @{
>> Name = "Test3";
>> Number = 3;
>> Description = "D3";
>> }
>>
PS C:\Users\James> $MyPaws = $MyPaw1 + $MyPaw2
PS C:\Users\James> $MyPaws += $MyPaw3
PS C:\Users\James> $MyPaws

Description                             Name                                                                     Number
-----------                             ----                                                                     ------
D1                                      Test1                                                                         1
D2                                      Test2                                                                         2
D3                                      Test3                                                                         3 
```

您需要确保操作员知道它加在一起的内容。没有变量类型的声明，所以要创建数组，我使用将 2 加在一起的返回类型。

希望这可以帮助

# php - plupload 在 PHP 中上传后获取文件名

> ID：12008147
> 
> 赞同：3
> 
> 时间：2012-08-17T14:55:23.303
> 
> 标签：php, jquery, plupload

我已将 pluploader 添加到我的 PHP 页面并成功上传。在同一页面上，我有一个表单，在人们上传了一些文件后，我在页面上提交了该表单。我希望上传者在表单末尾添加一个隐藏字段，其中包含上传的每个文件的文件名。我已经设法在页面上的脚本中使用这个

```
 uploader.bind('FileUploaded', function(up, file, info) {
            var obj = JSON.parse(info.response);
            $('form#quoteRequest').append('<input type="hidden" name="file_name" value="' + obj.cleanFileName + '" />');
        }); 
```

它似乎将隐藏字段添加到表单的末尾，但没有文件名。也许有人知道这里发生了什么。我一直在砍和改变东西，但似乎没有得到上传的文件名。我真的不知道我在做什么，在学习 PHP 的早期阶段，这有点超出我的想象，但我迫切需要一个好的跨平台上传器，这似乎就是一个。

非常感谢你的协助。

关于plupload的信息：[http ://www.plupload.com/](http://www.plupload.com/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T15:01:47.027

在upload.php中最后一行需要如下

die('{"jsonrpc" : "2.0", "result" : {"cleanFileName": "'.$fileName.'"}, "id" : "id"}');

完成后，Plupload 不会自动将文件名传回。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T13:26:53.057

上面绑定文件名的函数比对我有用的是

```
uploader.bind('FileUploaded', function(up, file, info) {
  var obj = JSON.parse(info.response);
    $('form#quoteRequest').append('<input type="hidden" name="file_name" value="' + obj.result.cleanFileName + '" />');
    //note obj.result.cleanFileName instead obj.cleanFileName
 }); 
```

# ruby-on-rails - f.check_box checked => true for ruby on rails

> ID：12008148
> 
> 赞同：2
> 
> 时间：2012-08-17T14:55:24.317
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

Hi I have the following code on my view:

```
//I write a loop here to display some workflows saying wkf.each do |i|
<% if (i write my condition here) %>
  <td style="text-align:left;">
  <%= f.check_box :i, {:checked=>true}%> 
  <%= f.label(i, i)%>
  </td></tr>
<% else %>
  <td style="text-align:left;">
  <%= f.check_box(i)%> 
  <%= f.label(i, i)%>
  </td></tr>
<%end%> 
```

Suppose that there are three workflows 'A', 'B' and 'C' and 'C' meets the if condition, then the parameters being sent are 'A'=>0, 'B'=>0 and 'i'=>'1'. I want it to be sent as 'C'=>'1' in the same way as 'A'=>0.

I know that '`i' =>'1'` is sent because i wrote `f.check_box :i, {:checked=>true}`% instead of `<%= f.check_box(i)%>`.

Please let me know how to change this so that, the check box is checked by default when the if condition is met and the `#{i}` would be sent instead of `:i`

Thanks

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T15:00:50.770

the`f.check_box :i`不等于`f.check_box(i)`，区别在于`i`是变量，while`:i`是符号，和字符串差不多。`:`在第一种情况下删除。

```
<%= f.check_box i, {:checked=>true} %> 
```

# angularjs - can i inherit a parent controller's variables?

> ID：12008150
> 
> 赞同：33
> 
> 时间：2012-08-17T14:55:30.367
> 
> 标签：angularjs

Here is my code:

```
function ParentCtrl($scope) {
$scope.people = ["Tom", "Dick", "Harry"];
$scope.count = $scope.people.length;
}

function ChildCtrl($scope) {
$scope.parentpeople = ParentCtrl.people //this is what I would like to do ideally
} 
```

I am nesting one angular `controller` inside of another one. I would like to pass variables of the first `controller` to the second one. Does anyone know how to do this?

**NOTE**

I cannot do something like

```
ChildCtrl.prototype = new ParentCtrl(); 
```

because I will overwrite the `people` property of the `ChildCtrl`.

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-18T14:56:27.290

默认情况下，子范围原型继承自父范围（请参阅[Scope](http://docs.angularjs.org/guide/scope)），因此您已经可以访问子控制器中父控制器的 $scope 属性。为了证明它：

```
function ChildCtrl($scope) {
    alert($scope.people)
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-04T14:33:55.450

你搞错了。您将控制器继承与范围继承混合在一起，它们在 AngularJS 中是不同的且松散耦合的。

你真正想要的是：

```
function ParentCtrl($scope) {
    $scope.people = ["Tom", "Dick", "Harry"];
    $scope.count = $scope.people.length;
}

function ChildCtrl($scope) {
    $scope.parentpeople = $scope.$parent.people;
} 
```

它适用于这种情况：

```
<div ng-controller="ParentCtrl">
    <div ng-controller="ChildCtrl">
    </div>
</div> 
```

但正如 Mark 和 ganaraj 上面注意到的那样，这没有任何意义，因为您可以从 ParentCtrl 和 ChildCtrl 访问 $scope.people 的属性。

如果要相互继承控制器，则需要使用控制器函数本身的原型继承。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-17T15:24:02.933

$scope 继承基于您使用 ng-controller 引用控制器的位置。

如果你有类似的东西

```
<div ng-controller="ParentController">
    <div ng-controller="ChildController">
    </div>
</div> 
```

那么是的，子控制器将继承父控制器的属性。

**注意：**子控制器不需要在 html 中的直接子级上定义。它可以是里面的任何孩子。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-12T19:44:32.360

您还可以通过 DOM 获取任何控制器的范围：

```
$needleScope = angular.element(aDomElement).scope() 
```

使用 jQuery：

```
$needleScope = $('#aDomElementId').scope() 
```

或者获取文档中的所有Scope：

```
$allScopes = $('.ng-scope').scope() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-21T06:03:35.203

可能对你有帮助！！！

Scope 是一个特殊的 JavaScript 对象，用于连接控制器和视图。范围包含模型数据。在控制器中，模型数据通过 $scope 对象访问。

```
<script>
      var mainApp = angular.module("mainApp", []);

      mainApp.controller("shapeController", function($scope) {
         $scope.message = "In shape controller";
         $scope.type = "Shape";
      });
</script> 
```

范围继承范围是特定于控制器的。如果我们定义嵌套控制器，那么子控制器继承其父控制器的作用域。

```
<script>
      var mainApp = angular.module("mainApp", []);

      mainApp.controller("shapeController", function($scope) {
         $scope.message = "In shape controller";
         $scope.type = "Shape";
      });

      mainApp.controller("circleController", function($scope) {
         $scope.message = "In circle controller";   
      });
</script> 
```

现场示例如下。

```
<html>
    <head>
       <title>Angular JS Forms</title>
    </head>
    <body>
       <h2>AngularJS Sample Application</h2>
       <div ng-app="mainApp" ng-controller="shapeController">
          <p>{{message}} <br/> {{type}} </p>
          <div ng-controller="circleController">
             <p>{{message}} <br/> {{type}} </p>
          </div>
          <div ng-controller="squareController">
             <p>{{message}} <br/> {{type}} </p>
          </div>
       </div>
       <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.15/angular.min.js"></script>
       <script>
          var mainApp = angular.module("mainApp", []);

          mainApp.controller("shapeController", function($scope) {
             $scope.message = "In shape controller";
             $scope.type = "Shape";
          });

          mainApp.controller("circleController", function($scope) {
             $scope.message = "In circle controller";   
          });

          mainApp.controller("squareController", function($scope) {
             $scope.message = "In square controller";
             $scope.type = "Square";
          });

       </script>
    </body>
    </html> 
```

# java - How do I allow vars to be accessed by any class/method?

> ID：12008151
> 
> 赞同：0
> 
> 时间：2012-08-17T14:55:31.497
> 
> 标签：java

```
import javax.swing.*;

class Person {
     public String name;

     public static void main(String[] args) {
         new Person().enter();
     }
     void enter(){
        Person a = new Person();
        String first = JOptionPane.showInputDialog(null,"Enter your first name");
        a.name = first;
        new la().a();
     }
}
class la{
     void a(){
        Person a = new Person();
        System.out.println(a.name);
    }
} 
```

As you can see what I'm trying to do here is to set global var 'name' from the `JOption` input and to then be able to access 'name' with the new inputted var, from other classes later on. Since the workings of the classes later on depend on that var 'name'. Now I know I can simply pass these on through constructors to the relevant classes and avert this problem, but I want to know if *this* way is possible at all ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:01:25.720

现在，通过不指定您的类是公共的，您将其设置为默认值。默认为包私有，因此其他包中的类将无法访问此类的公共变量。

将类声明为 Public 并将任何全局变量设置为 Public，它们将是可访问的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:04:57.223

你的榜样不会达到你想要达到的目标。

您在 中创建一个新实例`Person`，`Main`为其分配一个新实例，然后创建一个 的新实例`la`，这将创建它自己的实例`Person`

这些不同的实例之间没有联盟。

```
public static void main(String args[]) {
    String first = JOptionPane.showInputDialog(null,"Enter your first name");
    // You should be checking the return result, but any way...
    Person person = new Person();
    person.name = first;

    La la = new La(person);

}

public class La {
    public La(Person person) {
        System.out.println(person.name);
    }
} 
```

# c++ - Circular Dependency testing

> ID：12008153
> 
> 赞同：1
> 
> 时间：2012-08-17T14:55:33.407
> 
> 标签：c++, circular-dependency

I have to find and solve a problem containing a circular dependency where I either store opaque pointers between the objects involved or use a separate class on a higher level to realize the relationship between the objects.

So I figured a simple problem where I have two classes, bank and account should do. The bank contains a list with accounts and the account contains a pointer to its bank. Circular dependency achieved.

But there is another condition which I have to satisfy which is that I have to make sure that the classes and the relationship between them can be tested independent of eachother.

The Bank class uses functions which do stuff on accounts, for example transfer funds between them, withdraw or add funds. And the account contains similar functions which edits its variables.

Testing the account class is easy as instantiating the class and test the functions but how can I test a class which depends on another class independent from the dependency? And how do you test a relationship between two classes?

I'm having trouble finding information on circular dependencies other than that you should avoid them but in larger projects they can be hard to avoid.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:09:00.370

重要的问题是为什么账户需要知道哪个银行拥有它？很难想象在需要该信息的帐户上的操作作为涉及银行的操作不会更好地完成。例如，将资金从一个账户转移到另一个账户通常需要银行 A 从账户 AA 中取出资金，然后将其交给银行 B，然后银行 B 再将其添加到账户 BB。

也许您需要删除依赖关系，然后找出没有它什么是“不可能的”，并重新考虑您要做什么，并可能根据银行对帐户做某事而不是帐户对银行做某事来重新考虑它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:13:22.480

考虑编写精简版帐户

例如

```
class Account
{
   public:
      bool failDebit;
      bool Debit(unsigned int quid) { return failDebit;}
} 
```

然后，您可以通过为这两种情况`Bank`设置`failDebit`first 来测试您的课程。`Bank`然后，如果您有一个更复杂的函数，它使用多个 函数并使用类似的方法`Account`测试该类的所有可能性，那么您可以使其更复杂。`Bank`该类`Account`可以非常简单，只是模仿返回值。

*注意*这有点简单，因为可能需要考虑各种函数调用之间的依赖关系（不是双关语）。

# java - 动画导致垃圾收集器创建日志条目

> ID：12008157
> 
> 赞同：0
> 
> 时间：2012-08-17T14:55:46.067
> 
> 标签：java, android, animation, garbage-collection, android-animation

我正在使用`TabActivity`其中每个选项卡都是一个视图。我想在更改标签时创建滑动动画。每次动画开始时，logcat 都会给出一个`GC`条目：

```
08-17 16:37:00.840: D/dalvikvm(2767): GC_CONCURRENT freed 1920K, 43% free 6852K/11975K, paused 12ms+14ms, total 72ms
08-17 16:37:01.235: D/dalvikvm(2767): GC_CONCURRENT freed 1480K, 40% free 7215K/11975K, paused 2ms+3ms, total 46ms
08-17 16:37:01.235: D/dalvikvm(2767): WAIT_FOR_CONCURRENT_GC blocked 18ms
08-17 16:37:05.715: D/dalvikvm(2767): GC_CONCURRENT freed 2092K, 43% free 6882K/11975K, paused 12ms+28ms, total 104ms
08-17 16:37:06.370: D/dalvikvm(2767): GC_CONCURRENT freed 779K, 34% free 7912K/11975K, paused 14ms+6ms, total 65ms
08-17 16:37:09.825: D/dalvikvm(2767): GC_FOR_ALLOC freed 1464K, 47% free 6455K/11975K, paused 19ms, total 19ms
08-17 16:37:09.865: D/dalvikvm(2767): GC_FOR_ALLOC freed 1K, 34% free 7988K/11975K, paused 19ms, total 19ms
08-17 16:37:09.865: I/dalvikvm-heap(2767): Grow heap (frag case) to 16.811MB for 944656-byte allocation
08-17 16:37:10.370: D/dalvikvm(2767): GC_CONCURRENT freed 1427K, 38% free 8706K/13959K, paused 2ms+5ms, total 41ms 
```

每次单击选项卡时，都会出现两种动画：一种用于当前选项卡滑出，另一种用于新选项卡滑入。

这些是`Animation`定义：

```
public Animation inFromRightAnimation() {
    Animation inFromRight = new TranslateAnimation(
            Animation.RELATIVE_TO_PARENT, +1.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f);
    inFromRight.setDuration(500);
    return inFromRight;
}

public Animation outToLeftAnimation() {
    Animation outtoLeft = new TranslateAnimation(
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, -1.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f);
    outtoLeft.setDuration(500);
    return outtoLeft;
} 
```

编辑：这是选项卡更改的代码：（ currentTab 是私有 int 类成员）

```
public void onTabChanged(String tabId) {
    if (!initializatorFinished) {
        getTabHost().setCurrentTab(currentTab);
        return;
    }
    tab1 = (LinearLayout) findViewById(R.id.tabHome);
    tab2 = (LinearLayout) findViewById(R.id.tabChanges);
    tab3 = (LinearLayout) findViewById(R.id.tabTests);
    tab4 = (ScrollView) findViewById(R.id.tabSettings);
    tab5 = (LinearLayout) findViewById(R.id.tabInfo);
    int currentTab = GetCurrentTab();
    int newTab = Integer.parseInt(tabId);
        if (currentTab == 1 || currentTab == 0) {
            if (newTab == 2) {
                tab1.setAnimation(outToLeftAnimation());
                tab2.setAnimation(inFromRightAnimation());
            }
            else if (newTab == 4) {
                tab1.setAnimation(outToLeftAnimation());
                tab4.setAnimation(inFromRightAnimation());
            }
            else if (newTab == 5) {
                tab1.setAnimation(outToLeftAnimation());
                tab5.setAnimation(inFromRightAnimation());
            }
        }
        else if (currentTab == 2) {
            if (newTab == 1) {
                tab2.setAnimation(outToLeftAnimation());
                tab1.setAnimation(inFromRightAnimation());
            }
            else if (newTab == 4) {
                tab2.setAnimation(outToLeftAnimation());
                tab4.setAnimation(inFromRightAnimation());
            }
            else if (newTab == 5) {
                tab2.setAnimation(outToLeftAnimation());
                tab5.setAnimation(inFromRightAnimation());
            }
        }
        else if (currentTab == 4) {
            if (newTab == 1) {
                tab4.setAnimation(outToLeftAnimation());
                tab1.setAnimation(inFromRightAnimation());
            }
            else if (newTab == 2) {
                tab4.setAnimation(outToLeftAnimation());
                tab2.setAnimation(inFromRightAnimation());
            }
            else if (newTab == 5) {
                tab4.setAnimation(outToLeftAnimation());
                tab5.setAnimation(inFromRightAnimation());
            }
        }
        else if (currentTab == 5) {
            if (newTab == 1) {
                tab5.setAnimation(outToLeftAnimation());
                tab1.setAnimation(inFromRightAnimation());
            }
            else if (newTab == 2) {
                tab5.setAnimation(outToLeftAnimation());
                tab2.setAnimation(inFromRightAnimation());
            }
            else if (newTab == 4) {
                tab5.setAnimation(outToLeftAnimation());
                tab4.setAnimation(inFromRightAnimation());
            }
        }
        else if (currentTab == 3) {
            if (newTab == 1) {
                tab3.setAnimation(outToLeftAnimation());
                tab1.setAnimation(inFromRightAnimation());
            }
            else if (newTab == 2) {
                tab3.setAnimation(outToLeftAnimation());
                tab2.setAnimation(inFromRightAnimation());
            }
            else if (newTab == 4) {
                tab3.setAnimation(outToLeftAnimation());
                tab4.setAnimation(inFromRightAnimation());
            }
            else if (newTab == 5) {
                tab3.setAnimation(outToLeftAnimation());
                tab5.setAnimation(inFromRightAnimation());
            }
        }         
      SetCurrentTab(Integer.parseInt(tabId));
    }
private void SetCurrentTab(int tab) {
    this.currentTab = tab;
}

private int GetCurrentTab() {
    return this.currentTab;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:00:50.120

如果您试图避免过多的分配，您可以在 onCreate 中创建一次这些动画，然后稍后简单地引用它们，而不是每次都创建一个新动画。

像这样的东西：

```
private Animation mInFromRight;
private Animation mInFromLeft;

public Animation inFromRightAnimation() {
    return mInFromRight;
}

public Animation outToLeftAnimation() {
    return mInFromLeft;
}

@Override
protected void onCreate ( Bundle savedInstanceState ){
    super.onCreate(savedInstanceState);
    mInFromRight = new TranslateAnimation(
        Animation.RELATIVE_TO_PARENT, +1.0f,
        Animation.RELATIVE_TO_PARENT, 0.0f,
        Animation.RELATIVE_TO_PARENT, 0.0f,
        Animation.RELATIVE_TO_PARENT, 0.0f);
    mInFromRight.setDuration(500);

    mInFromLeft = new TranslateAnimation(
        Animation.RELATIVE_TO_PARENT, 0.0f,
        Animation.RELATIVE_TO_PARENT, -1.0f,
        Animation.RELATIVE_TO_PARENT, 0.0f,
        Animation.RELATIVE_TO_PARENT, 0.0f);
    mInFromLeft.setDuration(500);

    //...other oncreate code
} 
```

除此之外，如果您在调用动画时仍然得到 GC，那将超出您的控制范围。android 框架在某处分配在动画过程中被销毁的对象。

GC 是正常的、必要的并且是预期会发生的，但是你密切关注事情是件好事。大多数情况下，过多的 GC 是由于框架外发生了一些愚蠢的事情，比如不必要地在循环中分配新对象。但是框架也需要 GC，在这种情况下，这似乎就是正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:59:50.410

您在 logcat 中看到的条目表明 JVM 执行了 GC。如果启用了 GC 详细，这将被打印出来。这些是详细消息，在 Java 中，您可以通过删除详细信息（不确定 android）来禁用它们。

原因可能是您的动画占用了更多内存，这迫使 dalvik 执行 GC。

# java - 如何在Java中正确实现equals

> ID：12008164
> 
> 赞同：0
> 
> 时间：2012-08-17T14:56:13.257
> 
> 标签：java, equals, hashcode

我需要在某个 A 类中实现 equals 方法。A 类有一个 Enum 类型的排序器集合，我想要实现的行为是，对于集合中具有完全相同 Enum 值的 A 类的两个实例，equals 返回 true （在集合的完全相同的位置）。

由于我是 java 新手，我遇到了问题，而且我不知道如何正确实现 equals 或 hashcode 方法，所以任何帮助都会很好:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:03:50.303

如果您使用的是 eclipse（netbeans 具有类似的功能，大多数 java IDE 也是如此），您可以简单地进入“Source”菜单，然后选择“Generate hashcode() and equals()”。然后选择要考虑的字段（在您的情况下是枚举值列表。

话虽如此，假设您已经拥有枚举，这是 eclipse 为我生成的代码。并不是说哈希码通常涉及素数以及乘法和加法。这往往会给你一些不错的价值分布。

```
public class Foo {
   private List<FooEnum> enumValues;

   @Override
   public int hashCode() {
       final int prime = 31;
       int result = 1;
       result = prime * result
               + ((enumValues == null) ? 0 : enumValues.hashCode());
       return result;
   }

   @Override
   public boolean equals(Object obj) {
       if (this == obj)
           return true;
       if (obj == null)
           return false;
       if (getClass() != obj.getClass())
           return false;
       Foo other = (Foo) obj;
       if (enumValues == null) {
           if (other.enumValues != null)
               return false;
       }
       else if (!enumValues.equals(other.enumValues))
           return false;
       return true;
   }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:03:34.100

被覆盖的 equals 方法看起来像这样

```
public boolean equals(Object o) {
    if ((o instanceof yourtype) && 
        (((yourtype)o).getPropertyToTest() == this.propertyToTest)) {
        return true;
    }
    else {
        return false;
    }
} 
```

被覆盖的 hashCode 方法看起来像这样

```
public int hashCode() { return anIntRepresentingTheHashCode} 
```

从[javadocs](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)中提取，您的 equals 方法必须满足以下条件：

> **自反**- x.equals(x) 为真
> 
> **对称**- 如果 x.equals(y) 则 y.equals(x)
> 
> **传递**- 如果 x.equals(y) 和 y.equals(z) 则 x.equals(z)
> 
> **一致**- 如果 x.equals(y) 为真，则它始终为真，除非对象被修改
> 
> **null** - x.equals(null) 为假

此外，如果两个对象基于 equals 方法相等，则它们必须具有相同的哈希码。

反过来是不正确的。如果两个对象不相等，它们可能有也可能没有相同的哈希码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T15:29:27.073

使用[`EnumSet`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/EnumSet.html)它也根据 java 文档保留自然顺序，并且仅针对 Enums 进行了优化。

> iteratormethod 返回的迭代器以元素的自然顺序（声明枚举常量的顺序）遍历元素。返回的迭代器是弱一致的：它永远不会抛出 ConcurrentModificationException 并且它可能会或可能不会显示迭代正在进行时对集合进行的任何修改的影响。

您可以使用`EnumSet`如下

```
import java.util.EnumSet;

public enum Direction {
LEFT,
RIGHT,
ABOVE,
BELOW;

private static EnumSet<Direction> someDirection = EnumSet.of(Direction.LEFT,Direction.RIGHT) ;
} 
```

现在因为您使用的是`EnumSet`equals 并且 Hashcode 方法将被提供默认来自`AbstractSet`哪个是父类`EnumSet` 所以您不必关心它们。

# regex - 逗号分隔的 id 和范围的正则表达式

> ID：12008170
> 
> 赞同：0
> 
> 时间：2012-08-17T14:56:28.717
> 
> 标签：regex

我有一个过滤器，它有一个字段，可让您输入以逗号分隔的 id 列表或 id 范围。例如，“1,2,3”和“4-9”是有效的 ID。我为此编写了以下正则表达式：

```
/(^\d+(?:[,]\d+)*$)|(^\d+-\d+$)/.test(str) 
```

其中 str 是我正在评估的字符串。这可以正常工作并为所有场景返回正确的布尔值，除非在一个范围内，第一个 id 大于第二个。例如，12-10 是一个无效的范围，但上面的正则表达式不会返回 false。

有没有办法验证使用正则表达式？我显然可以在'-'上拆分字符串并比较这两个部分，但会失去正则表达式提供的简洁性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T14:59:33.880

“正则表达式提供的简洁性”可能不值得它引入的复杂性。这似乎是一个定义明确的问题，对每个元素先拆分`,`再拆分`-`似乎是一种非常简单有效的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T14:58:54.317

解决这个问题不是正则表达式的工作。

使用正则表达式提取范围，然后进行验证。

# php - 如何正确地从 mysql_ 迁移到 PDO

> ID：12008171
> 
> 赞同：-2
> 
> 时间：2012-08-17T14:56:30.570
> 
> 标签：php, mysql, pdo

更新：这个问题已经得到回答我有一个简单的表格，用户可以在其中更新他们的 mysql 数据库。我曾经`mysql_`用来连接到数据库，但了解到 pdo 是一种更好的方法，因为`mysql_`它已被折旧。

下面包括完整形式的旧方式，然后是完整形式的新方式。新方法产生错误

旧方式：

```
<?php

$host = 'ip_address';
$user = 'user_name';
$password = 'password';

$link = mysql_connect($host, $user, $password);

$selected = mysql_select_db('db_name', $link);

if(!isset($_POST['text-input']))

?>

<form method="post">
    %slice%
    <input type="submit" value="Submit" />
</form>
%[if !edit]%

<?php
%[repeat items]%
$form_input%id=repeatIndex% =  $_POST['element-%id=repeatIndex%'] ;
%[endrepeat]%

$query = 'INSERT INTO `table_name` (%[repeat items]%%[endif]%%html="Edit Me"%%[if !edit]%,%[endrepeat]%) VALUES (%[repeat items]%"' . $form_input%id=repeatIndex% . '",%[endrepeat]%);';
$query = preg_replace('/,\);/',');',$query);
$query = preg_replace('/,\) /',')',$query);
mysql_query($query);

?>
%[endif]% 
```

新方式：

```
<?php
db = new PDO('mysql:host=ip_address;dbname=db_name;', 'user_name', 'password');
?> 
    <form method="post">
        %slice%
        <input type="submit" value="Submit" />
    </form>
    %[if !edit]%

<?php
%[repeat items]%
$form_input%id=repeatIndex% =  $_POST['element-%id=repeatIndex%'] ;

%[endrepeat]%

$query = 'INSERT INTO `table_name` (%[repeat items]%%[endif]%%html="Edit Me"%%[if !edit]%,%[endrepeat]%) VALUES (%[repeat items]%"' . $form_input%id=repeatIndex% . '",%[endrepeat]%);';
$query = preg_replace('/,\);/',');',$query);
$query = preg_replace('/,\) /',')',$query);
mysql_query($query);

?>
%[endif]% 
```

抛出的错误是这样的：

```
Warning: mysql_query() [function.mysql-query]: Access denied for user
'kuler'@'localhost' (using password: NO) in
/home/path_to/index.php on line 125

Warning: mysql_query() [function.mysql-query]: A link to the server could not be
established in /home/path_to/index.php on line 125 
```

我希望我已经提供了足够的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:44:09.093

解决方法如下：

```
<?php

//Connection vars
$host = '%id=server%';
$user = '%id=username%';
$password = '%id=password%';
$databasename = '%id=database%';

//This block establishes the connection
try{
    //
    $connectiondetails = "mysql:host={$host};dbname={$databasename}";
    $db = new PDO($connectiondetails , $user , $password);
    $db->setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_WARNING);
}
catch (PDOException $e) {
    print "Error!: " . $e->getMessage() . "<br/>";
    die();
}

//Check if all the input fields of the form have been submitted
if(
    %[repeat items]%
    isset($_POST['element-%id=repeatIndex%'])&&
    %[endrepeat]%
    (true===true)
){

    //The variables to read the output
    %[repeat items]%
    $form_input%id=repeatIndex% = $_POST["element-%id=repeatIndex%"] ;
    %[endrepeat]%

    //DB
    global $db;     //must set this, otherwise can't access the db  
    $query =  'INSERT INTO `%id=table%` (%[endif]%%[repeat items]%%html="Edit Me"%%[if !edit]%,%[endif]%%[endrepeat]%%[if !edit]%)%[endif]% %[if !edit]%VALUES (%[repeat items]%"' . $form_input%id=repeatIndex% . '",%[endrepeat]%);';
    $query = preg_replace('/,\);/',');',$query);
    $query = preg_replace('/,\) /',')',$query);
    $db->query($query);
    //[DB]
}

?> 
```

# javascript-events - 从 html 调用 JavaScript 代码有多少种方法？

> ID：12008172
> 
> 赞同：1
> 
> 时间：2012-08-17T14:56:33.877
> 
> 标签：javascript-events, javascript, html

调用javascript代码有多少种方法？首先是典型的`<script>`标签，然后是一些标签的属性，`onload=""`对于`body`标签，`href="JavaScript:"`标签`a`，`onSubmit="JavaScript:"`标签`form`，`onclick=`属性。

除此之外，我知道代码也可以在加载后从 javascript 加载：[在 chrome 控制台中包含 javascript 文件](https://stackoverflow.com/questions/5282228/include-javascript-file-in-chrome-console)。

但我对从 html 文档运行代码的方式更感兴趣，是否有详尽的列表：事件、属性、...？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T14:59:52.877

这是一个很好的 JavaScript 事件列表：http: [//help.dottoro.com/larrqqck.php](http://help.dottoro.com/larrqqck.php)

至于如何触发这些事件，你已经涵盖了我所知道的所有基础。有一种不同的方式来使用`onload`（和类似的事件），如下所示：

**纯 JavaScript：**

```
window.onload = function() {
  //Do Stuff
} 
```

**jQuery：**

```
$(window).bind('onload', function() {
  //Do stuff
}); 
```

**旁注：**我不鼓励在属性中使用嵌入 JavaScript`href="javascript:"`或`onsubmit="javascript:"`. 像这样在 HTML 中嵌入 JavaScript 被认为是不好的做法，因为它会降低代码的可读性，并且可能更难以维护。

如果您需要侦听类似的事件`onsubmit`，我建议您在 JavaScript/jQuery 中侦听这些事件，或者通过调用 JavaScript 函数，例如：`onsubmit="javascript:myFunction(parameter)"`，而不是编写所有与 HTML 内联的 JavaScript。那是我的两分钱。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T15:03:02.580

我建议你看看[这篇文章](https://stackoverflow.com/questions/2222355/how-to-hide-javascript-code)。基本上，有一些提到服务器端调用这些函数来向普通用户隐藏你的 javascript。

# visual-studio-2012 - MVC 中的 VS 2012 Page Inspector 控制台不工作

> ID：12008176
> 
> 赞同：1
> 
> 时间：2012-08-17T14:56:45.987
> 
> 标签：visual-studio-2012

我在 Web 表单开发中尝试过页面检查器，它工作正常，但是在 MVC 中它打开并在控制台区域中显示“必须在 Internet Explorer 中启用 Javascript”现在我检查了所有内容并启用了 javascript，重新启动，重新安装，没有什么可以帮助解决这个问题...

使用页面检查器应该是一件令人耳目一新的事情，因为 MVC 没有设计器视图，有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:09:02.637

我遇到了同样的问题，并按照以下步骤解决了它：

1.  如消息所述，在资源管理器中启用 JS 调试，然后是此链接：http: [//support.microsoft.com/gp/howtoscript](http://support.microsoft.com/gp/howtoscript)

2.  将此设置添加到该 `<appSetting>`部分的 web.config

    ```
    <add key='PageInspector:ServerCodeMappingSupport' value='Enabled'/> 
    ```

    从这个链接拿起它：http: [//msdn.microsoft.com/en-us/library/jj204395.aspx](http://msdn.microsoft.com/en-us/library/jj204395.aspx)

3.  关闭视觉工作室和开发服务器

# excel - Excel列差异

> ID：12008185
> 
> 赞同：0
> 
> 时间：2012-08-17T14:57:04.843
> 
> 标签：excel

表 1 包含一些信息以及每个产品的序列号。此项工作于 2012 年 6 月完成。

表 2 已对信息进行了修改，随着新产品的推出，这已从 2012 年 6 月更新到现在。

我想找出已添加的新项目而无需手动操作，我知道我需要使用序列号进行操作，但是如何操作？

谢谢。

Ps 如果这有帮助，我有 Office 2003。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:07:03.563

您可以使用条件格式来突出显示不是新的单元格，然后您可以对该列进行排序。因此，您将使用序列号在工作表 1 中指定列，然后在工作表 2 中指定同一列并检查重复项。

本教程应该会有所帮助： [Excel 2003 条件格式](http://office.microsoft.com/en-us/excel-help/locate-duplicates-by-using-conditional-formatting-HA001136616.aspx)

希望这可以帮助。

# c# - 错误请求 - 带有 jQ uery Post 的 WCF

> ID：12008193
> 
> 赞同：0
> 
> 时间：2012-08-17T14:57:39.513
> 
> 标签：c#, jquery, json, wcf

当我尝试从 WCF 服务加载统计信息时收到错误请求错误 400。我的电话看起来像这样。我拉出了日期参数，看看这是否是原因，但没有运气仍然得到同样的错误。

```
function WCFJSON() {
//var now = new Date();
//var getFromDate = dateToWcf(new Date(now - (60000 * 1440)));

var dt = new Date(now);
var dt1 = new Date(Date.UTC(dt.getFullYear(), dt.getMonth(), dt.getDate(), dt.getHours(), dt.getMinutes(), dt.getSeconds(), dt.getMilliseconds()));
var getFromDate = dt1.toMSJSON();

var userid = "1";
m_Type = "POST";
m_Url = "https://dev-04.boldgroup.int/ManitouDashboard/DashboardProxyService.svc/GetStats"
m_Data = JSON.stringify({getFromDate: "'" + getFromDate + "'",getValueList: [1,2,3]});
m_DataType = "json";
m_ProcessData = true;             
CallService();
}

Date.prototype.toMSJSON = function () {
var date = '//Date(' + this.getTime() + ')//'; //CHANGED LINE
return date;
}; 

function CallService() {
$.ajax({
    type: m_Type,           //GET or POST or PUT or DELETE verb                  
    url: m_Url,                 //Location of the service   
    data: m_Data,
    dataType: m_DataType,   //Expected data format fserver                  
    processdata: m_ProcessData, //True or False
    crossdomain: true,    
    contentType: "application/json; charset=utf-8",             
    success: function (msg) {   //On Successfull service call                      
        ServiceSucceeded(msg);
    },
    error: function (jqXHR, textStatus, errorThrown) {
        ServiceFailed("jqXHT: " + jqXHR.result + "Text Status: " + textStatus + " Error Thrown: " + errorThrown );
    } // When Service call fails              
});
} 
```

IdashboardWCFService 接口如下所示：

```
[ServiceContract]
public interface IDashboardWCFService
{
    [OperationContract]
    [WebInvoke(UriTemplate = "GetStats", ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped)]
    Dictionary<int,List<StatValue>> GetStats(DateTime getFromDate, List<int> getValueList);

    [OperationContract]
    [WebGet(UriTemplate = "GetStatTypes", ResponseFormat = WebMessageFormat.Json)]
    List<StatType> GetStatTypes();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:45:35.027

似乎您正在尝试通过 $ajax 方法执行跨域 Web 服务调用。在这种情况下，您的 m_dataType 值应该是`"jsonp"`而不是`"json"`.

类似的问题[在这里](https://stackoverflow.com/questions/11821863/use-javascript-to-connect-to-wcf-web-service/11831942#11831942)。

# import - 批量加载：不要导入重复值

> ID：12008201
> 
> 赞同：0
> 
> 时间：2012-08-17T14:57:59.163
> 
> 标签：import, hbase, bulk-load

我需要每天导入一个包含昨天数据库快照的文件。要导入，我在 shell 中使用以下命令：

```
./bin/hbase org.apache.hadoop.hbase.mapreduce.ImportTsv \
    '-Dimporttsv.separator=|' \
    -Dimporttsv.columns=HBASE_ROW_KEY,info:date,info:author,info:text \
    tableName \
    inputFile.tsv 
```

问题是每一行都包含所有值，而不仅仅是更新的值，导致每列有多个版本但具有相同的值。

还有其他方法可以导入此每日快照而忽略重复值吗？或者有什么建议可以解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:45:19.370

我想如果你真的想忽略现有的值，你需要编写自己的 map/reduce 而不是使用导入程序。

但是，多个版本有什么问题？首先，您可以设置 hbase 保留的版本数（当您定义列族时），其次，当您阅读时，您可以只阅读最新版本，最后，如果您担心存储，您可以设置 hbase 以使用压缩

# c# - 具有值“变量”的字典

> ID：12008203
> 
> 赞同：0
> 
> 时间：2012-08-17T14:58:03.427
> 
> 标签：c#, variables, dictionary

我希望创建一个这样的字典：

```
Dictionary<string, Variable> dict = new Dictionary<string, Variable> 
```

在这个线程[中，如何在 C# 中动态命名变量？](https://stackoverflow.com/questions/5033675/how-do-i-name-variables-dynamically-in-c)以下代码示例被投票赞成并被接受为问题的答案：

```
var vartable = new Dictionary<string, Variable>();
vartable[strLine] = new Variable(input); 
```

但是，当我尝试做同样的事情时，我收到此错误消息：

```
The type or namespace name 'Variable' could not be found (are you missing a using directive or an assembly reference?) 
```

我一直无法找到解决此问题的命名空间。任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:00:35.873

`Variable`是你自己的类，所以你必须先定义它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T15:00:48.263

没有类型叫做`Variable`. 这只是一个示例类型名称。

# c# - 将 WPF Canvas 数据转换为视频流

> ID：12008210
> 
> 赞同：0
> 
> 时间：2012-08-17T14:58:52.960
> 
> 标签：c#, .net, wpf, video-streaming

我只是想知道是否有可能以某种方式将 WPF Canvas 数据转换为视频流......

我们可以使用哪些方法？

我正在考虑生成屏幕截图并使用它来构建视频帧。正确吗？

有什么线索吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T16:38:45.200

如果您要截取屏幕截图并将其合并到视频中，[这](https://stackoverflow.com/questions/10527914/generating-video-from-a-sequence-of-images-in-c-sharp)将对您有所帮助

# ruby-on-rails-3 - 在具有不同型号名称的设计中检索 current_user 时出现问题

> ID：12008214
> 
> 赞同：0
> 
> 时间：2012-08-17T14:58:54.967
> 
> 标签：ruby-on-rails-3, devise

我在我的 Rails 应用程序中使用名为 auth_user 而不是 user 的模型进行了 Devise 设置。我已经尝试访问当前登录用户的电子邮件地址（一个称为电子邮件的字段），以便我在对 Employee 模型的查询中使用，如下所示

```
@employee = Employee.find_by_Email(current_auth_user.email) 
```

但得到错误：

```
undefined method `email' for nil:NilClass 
```

关于如何解决这个问题的任何想法？

谢谢

保罗

********编辑***** *****

 **按照@theButler 在评论中的建议进行修复。解决方案是添加

```
before_filter :authenticate_auth_user! 
```

到班级的顶峰。**

# javascript - 在 HTML 文本框中输入时禁止使用撇号

> ID：12008215
> 
> 赞同：4
> 
> 时间：2012-08-17T14:58:55.877
> 
> 标签：javascript, html

我正在寻找一个简单的也许 JS 来禁止撇号 onKeyUp 或 OnKeyPress 之类的东西。例如，每次用户按下一个键时，如果它是撇号（Jame's Pizza），则用空格替换它。我不想在 PHP 中处理它
我找到了一个代码，但它将 JS 绑定到我不想要的文本字段名称。我需要一些全球性的东西，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T15:08:29.203

防止击键总是比追溯删除它更好。为此，您需要拦截`keypress`事件（`keyup`为时已晚）：

```
document.getElementById('yourTextBoxID').onkeypress = function () {
    if (event.keyCode === 39) { // apostrophe
        // prevent the keypress
        return false;
    }
};​ 
```

[http://jsfiddle.net/TSB9r/](http://jsfiddle.net/TSB9r/)

如果您只想阻止`'`出现在框中，但希望 keypress 事件传播到父元素，请将 替换`return false;`为`event.preventDefault();`。（由 Eivind Eidheim Elseth 在评论中建议）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:12:33.103

请找到以下功能。它抓取页面上的所有元素，并为每个`input`元素分配事件处理程序。如果他们检测到撇号，它将调用该方法..`keydown``keyup``preventDefault()`

```
function listen(event, elem, func) {
  if (elem.addEventListener) return elem.addEventListener(event, func, false);
  else elem.attachEvent('on' + event, func);
}

listen('load', window, function() {
  var inputs = document.getElementsByTagName('input');
  for (var i = 0; i < inputs.length; i += 1) {
    keyHandler(i);
  }
  function keyHandler(i) {
    listen('keydown', inputs[i], function(e) {
      if (e.keyCode === 222) { // 222 is the keyCode for apostrophe
        e.preventDefault();
      }
    });
    listen('keyup', inputs[i], function(e) {
      if (e.keyCode === 222) { // 222 is the keyCode for apostrophe
        e.preventDefault();
      }
    });
  }
}); 
```

# visual-studio-2010 - 在visual studio中发布之前可以确认吗？

> ID：12008218
> 
> 赞同：0
> 
> 时间：2012-08-17T14:59:08.810
> 
> 标签：visual-studio-2010, plugins, dialog, publish, confirmation

在 Visual Studio 中，我们正在使用点击发布的东西......是否可以编写插件或在单击发布时以某种方式给出确认对话框以确保这是您想要做的？不希望人们意外覆盖生产

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:59:34.320

我不知道默认情况下是否可以打开它，但如果没有 - 首先你需要了解 VS 是如何做到这一点的。可能这是一些 msbuild 目标文件（msbuild 任务），其中有一些设置，如“Publish = True/False”。因此，您可以做的是创建一个新的 msbuild 任务，您将在 Publish 任务之前调用该任务（您可以尝试将此任务添加到您的项目文件中）。在您的任务中，您将检查是否“发布 = True” - 您将显示消息框“您要发布吗？” 如果有人会单击否，您只需将 msbuild 中的“发布”值覆盖为 False。我认为这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:30:29.280

我不知道有什么插件可以做到这一点。

降低风险的一种方法是创建多个配置并结合多个发布配置文件：

例如

*   配置：Debug_Development、Release_Development、Release_Production 其中，使用[web.config 转换](http://msdn.microsoft.com/en-us/library/dd465326.aspx)，为连接字符串、应用程序设置等设置不同的设置（对 web.config 转换的很好的介绍，不仅可以在 [这里](http://weblogs.asp.net/jgalloway/archive/2012/01/17/10-things-asp-net-developers-should-know-about-web-config-inheritance-and-overrides.aspx)找到）
*   发布配置文件：debug_development、release_development 和 release_production，它们每个都有不同的 ftp 设置（如果您通过 ftp 部署）并且每个都连接到相应的配置

# android - NotificationCompat2 错误：java.lang.IllegalArgumentException

> ID：12008226
> 
> 赞同：2
> 
> 时间：2012-08-17T14:59:23.100
> 
> 标签：android, android-notifications

我正在尝试使用[JakeWharton 的 NotificationCompat2](https://github.com/JakeWharton/NotificationCompat2)。NotificationCompat2 的文档说

> 只需将您的导入从 android.support.v4.app.NotificationCompat 更改为 com.jakewharton.notificationcompat2.NotificationCompat2 并使用 NotificatonCompat2.Builder 类。

我已将导入更改为`com.jakewharton.notificationcompat2.NotificationCompat2`并使用以下代码

```
Notification notification = new NotificationCompat2.Builder(
        MainActivity.this).setContentTitle("Basic Notification")
        .setContentText("Basic Notification, used earlier")
        .setSmallIcon(R.drawable.lock).build();
notification.flags |= Notification.FLAG_AUTO_CANCEL;
NotificationManager notificationManager = (NotificationManager)
        getSystemService(NOTIFICATION_SERVICE);
notificationManager.notify(0, notification); 
```

并且应用程序因以下错误而崩溃

```
08-17 20:14:32.400: E/AndroidRuntime(289): FATAL EXCEPTION: main
08-17 20:14:32.400: E/AndroidRuntime(289): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.xyz.notificationchk/com.xyz.notificationchk.MainActivity}: java.lang.IllegalArgumentException: contentIntent required: pkg=com.wissenways.notificationchk id=0 notification=Notification(vibrate=null,sound=null,defaults=0x0) 
```

**我的问题**

我遗漏了什么或编码错误导致应用程序崩溃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:47:27.503

我不知道错误是什么，但这段代码有效

```
private static final int UPDATE_PROGRESS = 123654789;
private NotificationManager notifManager;
private Context mContext;
private NotificationCompat2.Builder mNotification;
private String content = "";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mContext = MainActivity.this;
    notifManager = (NotificationManager)
                    mContext.getSystemService(mContext.NOTIFICATION_SERVICE);
    mNotification = new NotificationCompat2.Builder(mContext)
            .setSmallIcon(android.R.drawable.sym_def_app_icon)
            .setTicker("Launch download")
            .setContentTitle("Downloader")
            .setContentText(content)
            .setContentIntent(getPendingIntent());
    notifManager.notify(UPDATE_PROGRESS, mNotification.build() );
}

private PendingIntent getPendingIntent() {
    Intent i = new Intent(mContext, MainActivity.class);
    i.setFlags(FLAG_ACTIVITY_CLEAR_TOP);
    return PendingIntent.getActivity(mContext, 0, i, 0);
} 
```

# php - 如何在 wordpress 中创建包含父母、孩子和兄弟姐妹的页面列表，但仅在某些情况下？

> ID：12008230
> 
> 赞同：1
> 
> 时间：2012-08-17T14:59:33.567
> 
> 标签：php, wordpress

我正在尝试创建一个侧边栏导航菜单，该菜单会根据站点中的当前位置进行更改。

这是导航的整体外观：

*   家
*   关于我们
    *   1a级
    *   1b级
    *   1c级
*   程式
    *   1d 级
        *   2a 级
        *   2b级
    *   1e级
        *   2c级
        *   2d 级
    *   1f级
*   联系我们

目前我正在使用自定义导航菜单为主页创建菜单，以便他们可以通过管理面板中的菜单链接编辑自定义菜单。他们不希望在联系页面上有侧边栏导航菜单。

在关于我们的页面上，他们希望侧边栏导航看起来像这样：

*   1a级
*   1b级
*   1c级

在“程序”页面上，他们希望它看起来像这样：

*   1d 级
*   1e级
*   1f级

在 Level 1d 页面上时，他们希望它看起来像这样：

*   **1d 级**
    *   2a 级
    *   2b级
*   1e级
*   1f级

确保子页面仅显示当前父页面。

在 2a 级页面上时，他们希望它看起来与在 1d 级页面上一样：

*   1d 级
    *   **2a 级**
    *   2b级
*   1e级
*   1f级

另外需要注意的是，我需要能够以不同于其他项目的方式设置当前页面列表项的样式，因此需要将某种当前页面项类添加到每个列表项中时间。

到目前为止，我无法在 Level 1d 上仅打印当前父级的子级。wp_list_pages 允许您设置深度，但不限于仅当前父级。它也打印所有兄弟姐妹的孩子（即，如果在第 1d 级上，它会打印他们各自父母下的所有第 2 级孩子，而不是仅在当前活动的父母下的第 2 级孩子）。

我该怎么做？

```
 <?php $current_section = "";
        if(is_front_page()):
             $current_section = "home";
             $nav_args = array(
                 'theme_location' => $current_section,
                  'container' => 'nav',
                  'container_class' => 'side-nav'
             );
             wp_nav_menu( $nav_args );
        else:

        endif;?> 
```

这就是我目前所拥有的。我已经删除了 else 块中的所有代码，因为它无论如何都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:59:27.223

尝试以下代码仅显示当前父级及其子菜单

```
<?php
  if($post->post_parent) {
  $children = wp_list_pages("title_li=&child_of=".$post->post_parent."&echo=0");
  $titlenamer = get_the_title($post->post_parent);
  }

  else {
  $children = wp_list_pages("title_li=&child_of=".$post->ID."&echo=0");
  $titlenamer = get_the_title($post->ID);
  }
  if ($children) { ?>

  <h2> <?php echo $titlenamer; ?> </h2>
  <ul>
  <?php echo $children; ?>
  </ul>

<?php } ?> 
```

[法典的这一部分解释了这一点](http://codex.wordpress.org/Function_Reference/wp_list_pages#List_Sub-Pages)

> 另外需要注意的是，我需要能够以不同于其他项目的方式设置当前页面列表项的样式，因此需要将某种当前页面项类添加到每个列表项中时间。

不需要每次都写一个特殊的类。WordPress 会自动添加一个类`.current-menu-item`。您只需要从 CSS 自定义该类。

希望这能解决你的一些问题.. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:27:40.127

这是我想出的代码：

```
 <?php
            $children = wp_list_pages('depth=1&title_li=&child_of='.$post->ID.'&echo=0');
            $current_page = wp_list_pages('title_li=&include='.$post->ID.'&echo=0');
            $grandparent=0;
            if($post->post_parent):
                $parent = wp_list_pages('title_li=&include='.$post->post_parent.'&echo=0');
                $siblings = wp_list_pages('depth=1&title_li=&child_of='.$post->post_parent.'&exclude='.$post->ID.'&echo=0');
                $parent_children = wp_list_pages('depth=1&title_li=&child_of='.$post->post_parent.'&echo=0');
                $parent_post = get_post($post->post_parent);
                $grandparent = $parent_post->post_parent;
                $parent_siblings = wp_list_pages('depth=1&title_li=&child_of='.$grandparent.'&echo=0&exclude='.$post->post_parent);
            endif;
            if(!$post->post_parent && $children):?>
                <ul class="menu">
                    <?php echo $children;?>
                </ul>
            <?php elseif($post->post_parent && $children):?>
                <ul class="menu">
                    <?php echo $current_page;?>
                    <ul class="menu">
                        <?php echo $children;?>
                    </ul>
                    <?php echo $siblings;?>
                </ul>
            <?php elseif($grandparent && $post->post_parent && !$children):?>
                <ul class="menu">
                    <?php echo $parent;?>
                    <ul class="menu">
                    <?php echo $parent_children;?>
                    </ul>
                    <?php echo $parent_siblings;?>
                </ul>
            <?php elseif(!$grandparent && $post->post_parent && !$children):?>
                <ul class="menu">
                    <?php echo $parent_children;?>
                </ul>
            <?php endif;?> 
```

这不是有史以来最优雅的解决方案，但至少它符合我的要求。唯一可以改进其实际功能的是保持菜单项的顺序，同时仍然允许子菜单。此代码删除带有子菜单的菜单项并将其移动到顶部。我想不出任何其他方法来做到这一点。

# javascript - 在 Javascript 上设置 regionName

> ID：12008231
> 
> 赞同：0
> 
> 时间：2012-08-17T14:59:42.257
> 
> 标签：javascript, dom-events, javascript-framework, region

我正在尝试将事件添加到 Javascript 中的按钮。我正在使用属于我正在工作的公司的框架，单击按钮后，我需要将区域名称设置为区域。问题是我第一次单击按钮区域名称时未设置。当我第二次尝试时，它被设置并且它向后退了一步..

基本上它看起来：

```
region.setRegionName(regionName); 
```

当我调试这个区域名称不是空字符串。但是几行之后，当我想显示区域名称时

```
region.getRegionName() 
```

响应为空。（约空白）。但是对于第二次尝试，它有效。但可以肯定的是，它正在从后面一步。我的意思是，首先我选择在第一次尝试时设置区域名称“x”，它的响应为空。在我选择“y”作为区域名称后，在设置区域名称后，当我调用`getRegionName`它时返回“x”。

当我设置调试这些东西时，参数是正确的。那么可能是什么问题？

# javascript - 用jquery设置输入html字符串的值

> ID：12008234
> 
> 赞同：7
> 
> 时间：2012-08-17T14:59:51.180
> 
> 标签：javascript, jquery

我在这样的字符串中有一段 HTML：

```
var htmlString = '<input type="text" id="someID" name="someID">'; 
```

我如何使用 jQuery 设置它的值，以便 HTML 像这样结束：

```
'<input type="text" id="someID" name="someID" value="newValue">'; 
```

谢谢，斯科特

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T15:03:12.777

```
$(htmlString).attr("value", "newValue"); 
```

但这将返回 jQuery 对象，而不是字符串。您可以将其添加到 DOM。

```
$(htmlString).attr("value", "newValue").appendTo("body"); // you can give any element instead of body 
```

编辑 ：

您可以使用@idor_brad 的方法。这是最好的方法或

```
var htmlString = '<input type="text" id="someID" name="someID">';

var $htmlString = $(htmlString);
$htmlString.attr("value1", "newValue1");
$htmlString.attr("value2", "newValue2");
$htmlString.attr("value3", "newValue3");

console.log($htmlString.get(0).outerHTML); 
```

或者

```
var htmlString = '<input type="text" id="someID" name="someID">';

var $htmlString = $(htmlString);
$htmlString.attr("value1", "newValue1");
$htmlString.attr("value2", "newValue2");
$htmlString.attr("value3", "newValue3");

console.log($("<div>").append($htmlString).html()); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-17T15:02:48.680

您首先需要将您的元素添加到 DOM（即添加到您的网页）。例如：

```
$(".container").append(htmlString); 
```

然后您可以将您的`input`作为 jquery 对象访问并添加 value 属性，如下所示：

```
$("#someID").val("newValue"); 
```

[**-- 看演示 --**](http://jsfiddle.net/HSKAT/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-17T15:05:55.407

你只是想操纵字符串，对吧？有很多方法可以给这只猫剥皮，但是

```
var newString = htmlString.replace('>', ' value="newValue">'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T15:03:50.377

dom 准备好后，将输入附加到 body，然后使用 id = "someID" 获取输入并将其值设置为 newValue

```
 $(document).ready(function(){
       $("body").append(htmlString);
       $("#someID").val("newValue");
    }); 
```

# java - 从java中的Pointer获取子节点

> ID：12008237
> 
> 赞同：-1
> 
> 时间：2012-08-17T14:59:55.923
> 
> 标签：java, xml, pointers, xpath, xmlnode

我们需要在 xml 中获取我们拥有指针的节点的子节点。任何人都可以帮助如何获取指针指向的节点的节点对象吗？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:04:09.777

指针是对 apache 公共库中 JXPathContext 类提供的 xpath 的引用。

JXPathContext jxpCtxt = JXPathContext.newContext(object);
迭代器指针 = jxpCtxt.iteratePointers( xPath );

指针表示对象在 Java 对象图中的位置及其属性。JXPathContext 有方法，给定一个 XPath，为描述路径的对象或属性生成指针。例如，
ctx.getPointer("foo/bar")
将生成一个指针，该指针可以获取和设置对象的属性“bar”，该属性是根对象的属性“foo”的值。

[http://commons.apache.org/jxpath/apidocs/org/apache/commons/jxpath/class-use/Pointer.html](http://commons.apache.org/jxpath/apidocs/org/apache/commons/jxpath/class-use/Pointer.html)

# random - 如果有人看到随机数生成器，怎么知道？

> ID：12008240
> 
> 赞同：0
> 
> 时间：2012-08-17T15:00:12.000
> 
> 标签：random, proof, perception

我一直在阅读有关随机数及其生成器的各种文章。我通常会从中得出 3 个重要的结论：

*   随机数并不是真正随机的
*   很多时候他们有偏差（模偏差）
*   当人类试图“随机行动”时，他们无法成为随机数生成器

因此，考虑到这些观察结果中的后者，我们将如何能够

1.  判断我们看到的一系列数字是否真的是随机的，更重要的是
2.  有什么方法可以证明所说的序列真的是随机的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:05:34.973

非常简单的测试：

如果您真的想测试随机数，您可以模拟一个输出 1-100 100 次随机数的程序作为示例。然后看看这些数字，看看是否有任何模式。然后通过多次重新启动程序并重复该过程来执行该测试。检查所有数据以确定随机数是否总是随机的、只是在个别测试期间随机，或者从不随机。:P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:06:33.207

测试随机数生成器可能主要取决于您要查找的内容。即使是纯粹的不可重复性也不能保证随机性。

有一些公司会出于认证的目的测试随机数生成器（例如在线赌场）。我很快发现一个叫做 iTech Labs，尽管[他们的测试方法页面](http://www.itechlabs.com.au/pages/rngtesting.html)在技术细节方面还有很多不足之处。

其他测试人员和认证机构[发布认证所需的数据](http://www.gaminglabs.com/default.asp?contentID=141)；这里有更具体的细节，但没有你想要的那么多。

您可能会进行统计分析，并将随机数生成器的结果与“真实”随机源进行比较，但无论如何都可能会因为试图将真实随机源转换为您的可能性空间而产生偏差。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T15:17:03.150

随机性测试验证序列的数学特性。例如进入频率（所有符号都应具有相同的频率）、局部方差、序列分析（符号的概率不得依赖于先前的概率）。不存在明确的证明，但有一个品质因素——序列真正随机的概率。另一个标准可以基于可压缩性：真正的随机性具有最大熵，因此不能被压缩。当然，这个测试对于随机性是不可靠的，但是允许使用 zlib 等现成的工具进行快速而肮脏的测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T15:22:04.477

我很想说，只要您生成足够大的样本集 1,000,000+，您应该或多或少地看到（伪）随机数的均匀分散。但是，我敢肯定，一些数学天才有办法抹黑这一点，因为根据概率法则，你肯定可以像任何其他序列一样得到一个数字的运行。

根据我的阅读，如果您真的需要随机数，最好尝试重用加密库使用的内容。密码学领域显然很复杂，并且依赖于随机数来生成密钥。从[OWASP 指南中标题为“可逆身份验证令牌”](https://www.owasp.org/index.php/Guide_to_Cryptography)的部分中，它说...

> 生成安全身份验证令牌的唯一方法是确保无法预测它们的顺序。换句话说：真正的随机数。
> 
> 可以说计算机无法生成真正的随机数，但使用读取鼠标移动和击键等新技术来提高熵显着增加了随机数生成器的随机性。不要试图自己实现这一点，这一点至关重要；使用现有的、经过验证的实现是非常可取的。
> 
> 大多数操作系统都包含生成随机数的函数，这些随机数几乎可以从任何编程语言中调用。

我的看法是，除非您自己编写加密库，否则请信任那些（例如使用 Java 加密扩展），这样您就不必自己证明它。

# c - 如何获得临时文件名？

> ID：12008243
> 
> 赞同：17
> 
> 时间：2012-08-17T15:00:13.600
> 
> 标签：c, unix, temporary-files, temporary-directory

我看过一些与我的问题有关的帖子，但没有一个可以完全解决这个问题。我需要在标准临时目录中创建一个文件，并在完成写入后将其移动到其他位置。这个想法是，文件在下载时被认为是临时的，在下载完成后被认为是永久的。

我正在尝试通过调用[mkstemp](http://www.linuxmanpages.com/man3/mkstemp.3.php)或[tmpfile](http://www.linuxmanpages.com/man3/tmpfile.3.php)来尝试此操作，然后在完成写入后[重命名。](http://www.linuxmanpages.com/man2/rename.2.php)但是，我需要文件的完整路径来调用重命名，显然从文件描述符（由 mkstemp 返回）或 FILE *（由 tmpfile 返回）获取文件名并非易事。可以做到，但并不优雅。

是否有系统调用会创建一个临时文件并为我提供名称？我知道[mktemp](http://www.linuxmanpages.com/man3/mktemp.3.php)和相关调用，但它们要么不能保证是唯一的，要么已被弃用。或者也许有更好的方法来完成创建、写入和移动临时文件。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-17T15:07:13.613

看起来[`mkstemp`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/mkstemp.html)实际上是要走的路。

```
int fd;
char name[] = "/tmp/fileXXXXXX";
fd = mkstemp(name);
/* Check fd. */ 
```

在此调用之后，您有一个有效的描述符 in`fd`和相关文件的名称`name`。

# javascript - 使用 Phonegap 在 webview 中加载 css 和 javascript 库

> ID：12008248
> 
> 赞同：0
> 
> 时间：2012-08-17T15:00:23.197
> 
> 标签：javascript, jquery, xcode, mobile, cordova

我正在使用 Phonegap 开发一个移动应用程序，它主要使用 webView 获取内容。webView 中的一个页面使用 SwipeJS，但是当我加载所有相关文件（css 和 js）时，图像不显示。在过去的几个小时里，我一直在解决这个问题，我认为最好的解决方案是将所有资产加载到 webview 而不是应用程序中。

问题是当我将所有资产添加到页面 web 视图然后通过应用程序加载页面时，没有任何样式或脚本加载。如果我在 Web 浏览器中转到我在 webView 中加载的页面，则资产都在那里并且 SwipeJS 库可以正常工作。所以我有点困惑，为什么 webview 不使用工作库渲染页面？

这是标题来源：

```
<!DOCTYPE html> 
<html> 
<head>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <title>Title</title>

    <link rel="stylesheet" href="css/min.css" />

    <script src="js/jquery-1.6.4.min.js"></script>
    <script src="js/jquery.dotdotdot-1.3.0.js"></script>
    <script src="cordova-2.0.0.js"></script>
    <script src="js/jquery.mobile-1.0.min.js"></script>
    <script src="js/min.js"></script>
    <script src="js/swipe.js"></script>
    <script type="text/javascript">
           $(document).bind("mobileinit", function(){
               $.mobile.ajaxEnabled = false;
               $.mobile.ajaxLinksEnabled = false;
               $.mobile.pushStateEnabled = false;
               $.mobile.hashListeningEnabled = false;
           });

           $(document).ready(function(){

               // for select dropdown nav
               $("#main-nav").change(function(){
                   if ($(this).val()!='') {
                       var mobPage ="http://m.example.com/"+$(this).val()+"?mode=Native";
                       $('#content').load(mobPage);
                   }
               });

               $('a').live("click", function(){
                   event.preventDefault();
                   var artPage = $(this).attr('href');
                   var mobPage = artPage+"?mode=Native";
                   $("#content").load(mobPage);
               });

               $('.ui-navbar a').live("click", function(){
                   event.preventDefault();
                   var artPage = $(this).attr('href');
                   var mobPage = "http://m.example.com/"+artPage+"?mode=Native";
                   $("#content").load(mobPage);
               });

               var mobPage = "http://m.example.com/?mode=Native";

               $('#content').load(mobPage, function() {
                   $('#content').fadeIn(500);
               });
         });

                        </script>

        </head> 
```

# python - 用 cython 包装现有 C 库时定义 numpy 数组的数据类型

> ID：12008249
> 
> 赞同：1
> 
> 时间：2012-08-17T15:00:25.450
> 
> 标签：python, numpy, cython

我是 cython 的新手，当我需要在包装现有 C 库（foolib）时为我的 numpy 数组定义一个类型时，我有点迷茫。该库使用定义的类型作为 int 大小，具体取决于平台以及它是用 32 位还是 64 位构建的。

以下是其中一段摘录`foolib.h`：

```
#include "footypes.h"
...
int foo_zone_read(int fn, int B, int Z, char *zonename, foosize_t *size); 
```

以下是在 中找到的内容`footypes.h`：

```
# if FOO_BUILD_64BIT
# define FOO_SIZEOF_SIZE    64
   typedef long foosize_t;
# else
#  define FOO_SIZEOF_SIZE    32
   typedef int foosize_t;
# endif 
```

我也有 cython 包装器。这是 cython 标头`foolib.pxd`：

```
cdef extern from "foolib.h":
    ctypedef int foosize_t
    ...
    int foo_zone_read(int fn, int B, int Z, char *zonename, foosize_t *size) 
```

而实际的 cython 包装器`bar.pyx`：

```
import numpy
cimport numpy
cimport foolib
...
cdef class pyFOO(object):

   def __init__(self, filename)
        pass

    cpdef zone_read(self, int B, int Z):
        cdef char zonename[MAXNAMELENGTH]
        cdef int *zsize
        cdef int ztype_read
        cdef numpy.ndarray[cgsize_t, ndim=1] azsize 
```

在最后一行我尝试编译时出现 cython 错误：

```
cdef numpy.ndarray[cgsize_t, ndim=1] azsize
                          ^    
------------------------------------------------------------

bar.pyx:285:31: Invalid type. 
```

我试图阅读 C-API numpy 参考，但我有点迷茫。我只想输入`asize`正确的类型。我知道在 linux 上它会`dtype=int32`或`dtype=int64`取决于傻瓜的编译。如果我会像这样创建数组：`asize=numpy.ones(2, dtype=numpy.int64)`它会工作，但现在类型是硬编码的，我不希望那样。

所以我的问题是如何通过在 footypes.h 和 numpy 数组之间传递信息来获得正确的类型。我的第二个问题是如何指定我的 numpy 数组的大小（如果我用 python 语法来做这很容易，但是使用 numpy C-API 我不清楚）。我知道它可以是形状 (2) 或 (6) 的数组，具体取决于运行时条件。

提前致谢。

# deployment - 在 Windows 8 Pro 上侧载应用程序

> ID：12008252
> 
> 赞同：14
> 
> 时间：2012-08-17T15:00:30.740
> 
> 标签：deployment, windows-8, sideloading

我目前正在公司环境中使用 Windows 8 应用程序的旁加载。我们的客户很可能会在基于 x86 的平板电脑上运行 Windows 8 Pro。**只要**在目标设备上注册了开发人员帐户，使用 PowerShell 部署应用程序（相当）就可以很好地工作。如果不是，则应用启动时会出现以下错误：

> 此应用无法打开
> 
> ~AppName~ 有问题。有关修复或重新安装它的信息，请联系您的系统管理员。

我们的 CA 的根证书已安装在设备上，并且**允许所有受信任的应用程序安装**组策略设置已正确设置。该设备位于（实验）域中。在 Windows 8 Enterprise 上，它实际上就像一个魅力。

关于[TechNet 上的这篇文章](http://technet.microsoft.com/en-us/library/hh852635.aspx)，要在企业版以外的任何其他 Windows 版本上进行旁加载，需要“旁加载产品激活密钥”。我搜索了有关此类密钥的更多信息，但没有找到任何信息。

所以我的问题是：什么是“侧面加载产品激活密钥”，谁生成它以及如何激活/输入它？或者这句话是否意味着我们需要选择 Windows 8 Enterprise？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T22:49:18.810

[http://blogs.msdn.com/b/windowsstore/archive/2012/04/25/deploying-metro-style-apps-to-businesses.aspx](http://blogs.msdn.com/b/windowsstore/archive/2012/04/25/deploying-metro-style-apps-to-businesses.aspx) says « [you need to] activate a special product key on the target machine to enable sideloading. We'll go into more detail about how [to] acquire the product keys in an upcoming blog post. The product key only needs to be installed and activated once on the PC».

The latest I found (August 28th): [http://social.technet.microsoft.com/Forums/en-US/w8itproinstall/thread/3092a681-b9cc-473b-83aa-b492ea7f3946](http://social.technet.microsoft.com/Forums/en-US/w8itproinstall/thread/3092a681-b9cc-473b-83aa-b492ea7f3946) ... says «An Enterprise SKU is not required (for sideloading on Windows RT or Windows 8). You can side-load on Windows RT or Windows 8 Pro if you've activated a Sideloading Product Key. **Details on how to get such a key are not yet available**».

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T16:36:08.857

According to [this article on ZDNet](http://www.zdnet.com/the-enterprise-sideloading-story-on-windows-8-its-complicated-7000006742/), you need to buy the keys required to enable sideloading on Windows 8 Pro (as long as you don't want to stick with a developer license). If you search for the given SKU (`J7S-00005`), you'll find [some shops](http://google.com/search?q=J7S-00005) selling bundles with 100 keys for 30€ each.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-17T15:05:36.230

共享应用程序的官方文档在[此处](http://msdn.microsoft.com/en-us/library/windows/apps/hh975356%28v=vs.110%29.aspx)。答案分为两部分：

> 该脚本执行以下步骤。
> 
> ...
> 
> 第 2 步：验证您是否拥有开发人员许可证。如果脚本没有找到一个或您当前的许可证已过期，系统会提示您获取一个。要获得开发人员许可证，您必须拥有 Microsoft 帐户。有关详细信息，请参阅获取开发人员许可证（Metro 风格的应用程序）。
> 
> 在商店接受您的 Metro 风格应用程序之前，您必须对其进行打包并根据某些规则对其进行认证。如果 Windows 应用商店未认证 Metro 风格的应用程序，则该应用程序无法在 Windows 上运行，除非您在本地计算机上安装了开发人员许可证，或者该应用程序是由您的企业旁加载到计算机上的。（此限制不适用于桌面应用程序。）旁加载是安装未通过 Windows 应用商店分发的应用程序的过程，通常用于在应用程序准备销售之前对其进行测试。有关侧载的更多信息，请参阅什么是侧载？Windows 应用商店允许吗？

[链接](http://msdn.microsoft.com/en-us/library/windows/apps/hh974578.aspx)以在没有 Visual Studio 的情况下获取开发人员许可。

> **在命令提示符处获取开发人员许可证**
> 
> If you aren’t using Visual Studio 2012, you can get and manage developer licenses at a command prompt by running these commands in Windows PowerShell:
> 
> Show-WindowsDeveloperLicenseRegistration. This command opens a dialog box from which you can get a developer license and install it on the local machine. To run this command, you must have a valid Microsoft account. You also must run this command in a command prompt with elevated permissions.
> 
> Get-WindowsDeveloperLicense. This command returns an object that has two properties: ExpirationTime and IsValid. ExpirationTime is a System.DateTime structure that contains the date and time when the license expires. IsValid is a System.Boolean that indicates whether the license is valid. You can run this command from either a non-elevated command prompt or a command prompt with elevated permissions.
> 
> Unregister-WindowsDeveloperLicense. This command warns you that some Metro style apps will stop working if you remove the developer license from the local machine. If you choose "Yes" (the default) to confirm that you want to remove the license, the license is removed from the local machine. You must run this command in a command prompt with elevated permissions. The examples show the basic PowerShell syntax:

```
C:\PS> Show-WindowsDeveloperLicenseRegistration
C:\PS> Get-WindowsDeveloperLicense
C:\PS> Unregister-WindowsDeveloperLicense 
```

Alternately, as you mentioned, you can side-load your application. Documentation for that is found [here](http://technet.microsoft.com/en-us/library/hh852635.aspx). Further information linking to the msdn on side-loading [here](https://stackoverflow.com/questions/10264451/will-metro-style-apps-be-able-to-be-installed-outside-the-market-frame).

The main point on the required key is:

> Currently, the Consumer Preview and Windows Server 8 Beta are classified as “enterprise sideloading enabled.” This means that when a PC is domain joined, it can be configured to accept non-Windows Store apps from their IT admin. Moving forward, this functionality to install non-Windows Store Metro style apps will be available for Windows 8 Enterprise Edition and Windows 8 Server editions.

# php - 如何获取给定纬度和经度点的基本方向

> ID：12008256
> 
> 赞同：1
> 
> 时间：2012-08-17T15:00:39.820
> 
> 标签：php, web-services, google-maps

嗨，我有一个表格中的纬度和经度值列表。

我正在通过以下方式查询

```
if($direction=='NE')
    {
    //direction is NORTH EAST
    $query="SELECT * FROM tbl_business where Latitude > '$lat' and Longitude > '$long"; 
        }
    else if($direction=='SE')
    {
    //SOUTH EAST
        $query="SELECT * FROM tbl_business where Latitude >'$lat' and Longitude < '$long'";
    }
    else if($direction=='SW')
    {
    //SOUTH WEST

    $query="SELECT * FROM tbl_business where Latitude < '$lat' and Longitude < '$long'";
    }
    else if($direction=='NW')
    {
    //NORTH WEST
    $query="SELECT * FROM tbl_business where Latitude < '$lat' and Longitude > '$long'";
    } 
```

**$direction**将具有（**SE,NE,SW,NW**）（iphone）电话**传感器**将发送方向。如果只检查一次，我就会得到这些值。当设备向其他方向移动时，显示的值是出站的。我如何解决这个问题以至少获得近似值。

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T15:25:31.527

大致方向：

```
$x = ($lon2-$lon1) * cos(($lat1+$lat2)/2);
$y = ($lat2-$lat1);

$angle=atan2($y/$x); 
```

然后你需要使用 315 到 360，0 到 45 是北，45 到 135 是东等等。

或者再次缩小 NW、SE、NNW、SSE 等。

# objective-c - 将 Dropbox 文件添加到 UITableView

> ID：12008257
> 
> 赞同：2
> 
> 时间：2012-08-17T15:00:42.000
> 
> 标签：objective-c, uitableview, cocoa-touch, dropbox

我正在尝试将我的 Dropbox 文件加载到 UITableView 中，但它们没有显示出来。从在 dropbox.com 上注册我的应用程序到在我的应用程序中实现会话委托，我完成了每一步。这是我的代码，任何人都可以告诉我它有什么问题。我很确定我正确地声明了一切，但我似乎找不到问题。我也知道这不是连接问题，因为我添加了一个 NSLog 并记录了文件。

```
#import <UIKit/UIKit.h>
#import <DropboxSDK/DropboxSDK.h>

@interface testViewController : UITableViewController <DBRestClientDelegate>
{
    DBRestClient *restClient;
    NSMutableArray *dropboxURLs;
}
@end

#import "testViewController.h"

@interface testViewController ()

@end

@implementation testViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (DBRestClient *)restClient {
    if (!restClient) {
        restClient =
        [[DBRestClient alloc] initWithSession:[DBSession sharedSession]];
        restClient.delegate = self;
    }
    return restClient;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    dropboxURLs = [[NSMutableArray alloc] init];
    [[self restClient] loadMetadata:@"/"];
}

- (void)restClient:(DBRestClient *)client loadedMetadata:(DBMetadata *)metadata {
    if (metadata.isDirectory) {
        for (DBMetadata *file in metadata.contents) {
            if (!file.isDirectory)
            {
                NSLog(@"%@", file.filename);
                [dropboxURLs addObject:file.filename];
            }
        }
    }
}

- (void)restClient:(DBRestClient *)client
loadMetadataFailedWithError:(NSError *)error {

    NSLog(@"Error loading metadata: %@", error);
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return dropboxURLs.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"FileCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [dropboxURLs objectAtIndex:indexPath.row];

    return cell;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:37:14.517

将内容添加到 dropboxURLs 数组后重新加载表格视图。

```
[self.tableView reloadData]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:14:15.800

```
 -(void)restClient:(DBRestClient *)client loadedMetadata:(DBMetadata *)metadata {
    if (metadata.isDirectory) {
        for (DBMetadata *file in metadata.contents) {
            if (!file.isDirectory)
            {
                NSLog(@"%@", file.filename);
                [dropboxURLs addObject:file.filename];
            }
        }
    }
    [self. tableView reloadData];
   } 
```

不要忘记将 UITableView 的委托和数据源设置为 self。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-28T13:03:54.700

*   我们必须从 DropBoxRoot 加载数据
*   加载 MetaData 后，重新加载 tableview

> *   (void)viewDidLoad{
>     [超级 viewDidLoad];
>     dropboxURLs = [[NSMutableArray alloc] init];
>     [自加载数据];
>     }

```
-(void) loadData{
if ([DBSession sharedSession].root == kDBRootDropbox) {
    photosRoot = @"/";//can specify any folder like /Photos,/Public etc
}
[self.restClient loadMetadata:photosRoot withHash:photosHash];
}

- (void)restClient:(DBRestClient*)client loadedMetadata:(DBMetadata*)metadata {

photosHash = metadata.hash;

NSArray* validExtensions = [NSArray arrayWithObjects:@"jpg", @"jpeg",@"png",@"txt",@"pdf",@"doc",@"mp3",@"mp4", nil];
for (DBMetadata* child in metadata.contents) {

    NSString* extension = [[child.path pathExtension] lowercaseString];

    if (!child.isDirectory && [validExtensions indexOfObject:extension] != NSNotFound) {
        [directory addObject:child.filename];
    }else{
        [allFileAndDirectory addObject:child.filename];
    }
    [myTableView reloadData];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T15:50:00.893

在您调用 addObject 后立即尝试这样的操作：

```
[self.tableView reloadSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationFade]; 
```

# c# - C#中不正确的编码和解码

> ID：12008260
> 
> 赞同：0
> 
> 时间：2012-08-17T15:00:46.953
> 
> 标签：c#, encoding, decoding

我正在尝试从我的手机应用程序（用 C# 编写）上传一个 base64 编码的字符串。该字符串表示需要上传到我的服务器的图像，该图像也是用C#编写的。我的客户端代码如下所示：

```
Client Side Code
----------------
Dictionary<string, string> parameters = new Dictionary<string, string>();
parameters.Add("username", GetUserName());
parameters.Add("imageBytes", Convert.ToBase64String(this.ImageBytes));

string data = string.Empty;
foreach (string key in parameters.Keys)
{
  data += key;
  data += "=";
  data += parameters[key];
  data += "&";
}
data = data.Substring(0, data.Length - 1);

uploadWebRequest = (HttpWebRequest)(ar.AsyncState);
using (Stream postStream = uploadWebRequest.EndGetRequestStream(ar))
{
  byte[] byteArray = Encoding.UTF8.GetBytes(data);  // I believe this has something to do with it. But I believe this is correct. So I think something needs to be done on the server
  postStream.Write(byteArray, 0, byteArray.Length);
  postStream.Flush();
  postStream.Close();
}
uploadWebRequest.BeginGetResponse(new AsyncCallback(Upload_Completed), uploadWebRequest); 
```

当我在 Watch Window 中打印出来时`Convert.ToBase64String(this.ImageBytes)`，我收到以下信息：

```
Encoded Client String
---------------------
/9j/4AAQSkZJRgABAQEAYABgAAD/4QC4RXhpZgAATU0AKgAAAAgABAESAAMAAAABAAYAAAExAAIAAAAVAAAAPgE7AAIAAAATAAAAVIdpAAQAAAABAAAAaAAAAABXaW5kb3dzIHBob25lIE9TIDcuMAAASGVsbG8gZnJvbSBTZWF0dGxlAAAAApADAAIAAAAUAAAAhpAEAAIAAAAUAAAAmgAAAAAyMDEwOjAxOjAxIDAwOjAwOjAwADIwMTA6MDE6MDEgMDA6MDA6MDAAAAD/4QsnaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49J++7vycgaWQ9J1c1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCc/Pg0KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iSW1hZ2U6OkV4aWZUb29sIDguMDMiPg0KCTxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+DQoJCTxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIj4NCgkJCTxleGlmOkRhdGVUaW1lRGlnaXRpemVkPjIwMTAtMDEtMDFUMDA6MDA6MDA8L2V4aWY6RGF0ZVRpbWVEaWdpdGl6ZWQ+DQoJCTwvcmRmOkRlc2NyaXB0aW9uPg0KCTwvcmRmOlJERj4NCjwveDp4bXBtZXRhPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3hwYWNrZXQgZW5kPSd3Jz8+/9sAQwACAQECAQECAgICAgICAgMFAwMDAwMGBAQDBQcGBwcHBgcHCAkLCQgICggHBwoNCgoLDAwMDAcJDg8NDA4LDAwM/9sAQwECAgIDAwMGAwMGDAgHCAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwM/8AAEQgJkAzAAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigA 
```

在我的服务器端，我有以下内容：

```
Server Side Code
----------------
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult AddPicture(string username, string imageBytes)
{
  WriteToTempFileForDebugging(imageBytes);
  byte[] tempBytes = Convert.FromBase64String(imageBytes);
  using (MemoryStream memoryStream = new MemoryStream(tempBytes))
  {
    memoryStream.Position = 0;
    System.Drawing.Image image = System.Drawing.Image.FromStream(memoryStream);
    image.Save("C:\\inetpub\\wwwroot\\MySite\\Pictures\\myImage.png");
  }
} 
```

当此代码执行时，Image.FromStream(...) 行会引发异常。错误说： System.ArgumentException 参数无效。因此，我将“imageBytes”字符串打印到临时文件中。该临时文件的内容看起来与上面的编码字符串完全相同，但有一个例外。编码字符串中的所有空格 (" ") 都已替换为加号 ("+")。我猜这是一些编码问题。但是，我不确定如何解决它。我不想进行查找和替换。

我该如何以正确的方式解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T15:04:18.460

您需要`Uri.EscapeDataString`在将每个参数附加到 POST 字符串之前调用。

# c# - protobuf 日期时间偏移量

> ID：12008264
> 
> 赞同：1
> 
> 时间：2012-08-17T15:00:50.650
> 
> 标签：c#, protobuf-net, datetimeoffset

只是想分享一个关于 protobuf-net 的 R561 版本的观察。使用时`DateTimeOffSet`，异常

> InvalidOperationException（没有为类型定义序列化程序：System.DateTimeOffset）

出现：

我添加了一个带有 a`getProto()`和 a的方法`StreamWriter`来编写一个 proto 文件，现在它可以工作了！（而且 proto 文件也完全可用）。但是如果我评论这个方法，就会发生同样的异常。我真的不明白。

希望这个观察可能有用。

* * *

我会尽量清楚。我有一个 C# 客户端，其中包含一些使用 DateTimeOffset 参数的对象。我用 protobuf-net (r561) 对它们进行了序列化，并添加了一个 writeProtoFile() 方法来使用 getProto() 方法编写一个 proto 文件。序列化似乎工作得很好，原始文件也可以。所以因为我现在有我的 proto 文件，我可以评论或禁止 writeProtoFile() 方法：我不需要其他 proto 文件。所以这是我的第一个问题：

-> 为什么当这个方法（只是写一个调用 getProto() 方法的原型文件）被注释或抑制时，序列化不再起作用？这是我得到的例外：

没有为类型定义序列化程序：System.DateTimeOffset。

当我取消注释 writeProtoFile() 注释时，它就起作用了。这是方法：

```
public static void writeProtoFile(String proto)
{
    StreamWriter file = new StreamWriter("c:\\MyprotoFiles\\MyProtoFile.proto");
    file.Write(proto);
    file.Close();

} 
```

我需要这个对象被 java 客户端使用。使用 proto 编译器生成的 java 类似乎没问题，但是当我反序列化它时，出现异常：

com.google.protobuf.InvalidProtocolBufferException：解析协议消息时，输入意外在字段中间结束。这可能意味着输入被截断或者嵌入的消息误报了它自己的长度。

我认为，原因是生成的 DateTimeOffset 类（在原型中，dateTimeOffset 什么都不包含）

```
message DateTimeOffset {
} 
```

Java 中存在 DateTimeOffset 类型，所以这是我的第二个问题：-> 有什么方法可以序列化 C# 中的 dateTimeOffset 参数，然后在反序列化后成为 java 中的 dateTimeOffset 参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:26:22.540

> 有什么方法可以序列化 C# 中的 dateTimeOffset 参数，然后在反序列化后成为 java 中的 dateTimeOffset 参数？

*任何语言*都没有定义基于 .proto 的处理`DateTime`或`DateTimeOffset`值，因此不存在通过 protobuf（或任何特定实现，例如 protobuf-net）在平台之间传输此类数据的甚至远程保证的方式。此外，虽然有一种*类型*在 2 个不同的平台上调用，但仅靠其本身不足以保证它们具有相似的语义/范围/等。**`DateTimeOffset`**

 **对于任何跨平台场景，我建议只使用非常基本的数据，甚至可能只是像整数（64 位）这样的东西来将偏移量（以毫秒为单位）存储到 1970 纪元。或类似的东西。

> 为什么当这个方法（只是写一个调用 getProto() 方法的原型文件）被注释或抑制时，序列化不再起作用？

protobuf-net 零使用任何`getProto`方法或`writeProtoFile`方法。我会非常谨慎地怀疑评论/取消评论这会改变一些内部行为，并且需要具体的重现来调查。老实说，这听起来极不可能。警告：有一种`Serializer.GetProto<T>`方法，但它做了一些非常不同的事情（并且`GetSchema(Type)`在 v2 API 中被取代）。

然而，它的说法是完全正确的：

> 没有为类型定义序列化程序：System.DateTimeOffset。

原因很简单，我没有为这种类型定义标准序列化程序。如果您**可以为此定义**一些标准处理，则可以使用`SetSurrogate`将其连接到您选择的任何电线表示。

回覆：

> 解析协议消息时，输入意外在字段中间结束

这不应该以任何方式发生。这听起来像是一个不相关的问题，很可能是传输数据时数据损坏（例如，数据编码不正确），或者覆盖预先存在的文件而不截断它（最后留下垃圾）。如果您可以**准确**说明如何在平台之间传输二进制文件，我可能会提供更多建议，但首先要调查的是：您发送的二进制数据是否与您收到的二进制数据相同（与 protobuf 无关- 很简单：您是否正确传输了我的 BLOB？长度相同吗？每个字节都相同吗？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-29T08:50:36.487

我遇到了同样的问题，并为原型序列化编写了一个包装器对象（请参阅代码答案的结尾）。它有单独的 Ticks 和 Offset 字段。为了使助手的工作更容易，我添加了一些运算符。

您可以将`DateTimeOffset`对象直接分配给助手类：

```
[ProtoContract]
public class ExampleContract {
    [ProtoMember(1)]
    public ProtoDateTimeOffset LastLoginTime { get; set; }
}

var contract = new ExampleContract
{
    LastLoginTime = DateTimeOffset.Now
}; 
```

反序列化时，您可以直接使用 ProtoDateTimeOffset 实例，也可以在 DTO 中创建重载：

```
public DateTimeOffset LastLogin { get; set; }

[ProtoMember(4)]
public ProtoDateTimeOffset? ProtoLastLogin
{
    get => LastLogin;
    set => LastLogin = value;
} 
```

这是一个特定于 C# 的实现，我不知道您可以使用哪些语言来处理刻度和偏移量，但在这些语言中的转换应该是微不足道的。

* * *

辅助类的实际代码：

```
/// <summary>
/// Proto contract that represents a <see cref="DateTimeOffset"/>
/// </summary>
[ProtoContract]
public class ProtoDateTimeOffset
{
    /// <summary>
    /// Utc ticks
    /// </summary>
    [ProtoMember(1)]
    public long Ticks { get; set; }

    /// <summary>
    /// The UTC offset in minutes
    /// </summary>
    [ProtoMember(2)]
    public double OffsetMinutes { get; set; }

    /// <summary>
    /// Operator to cast <see cref="ProtoDateTimeOffset"/> to <see cref="DateTimeOffset"/>
    /// </summary>
    /// <param name="other"></param>
    /// <returns></returns>
    public static implicit operator DateTimeOffset?(ProtoDateTimeOffset? other)
    {
        if (other == null)
            return null;
        return new DateTimeOffset(other.Ticks, TimeSpan.FromMinutes(other.OffsetMinutes));
    }

    /// <summary>
    /// Operator to cast <see cref="ProtoDateTimeOffset"/> to <see cref="DateTimeOffset"/> or default
    /// </summary>
    /// <param name="other"></param>
    /// <returns></returns>
    public static implicit operator DateTimeOffset(ProtoDateTimeOffset? other)
    {
        if (other == null)
            return default;
        return new DateTimeOffset(other.Ticks, TimeSpan.FromMinutes(other.OffsetMinutes));
    }

    /// <summary>
    /// Operator to cast <see cref="DateTimeOffset"/> to <see cref="ProtoDateTimeOffset"/>
    /// </summary>
    /// <param name="other"></param>
    /// <returns></returns>
    public static implicit operator ProtoDateTimeOffset? (DateTimeOffset? other)
    {
        if (other == null)
            return null;
        return new ProtoDateTimeOffset
        {
            OffsetMinutes = other.Value.Offset.TotalMinutes,
            Ticks = other.Value.Ticks
        };
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:22:31.503

我使用这种方法在 C# 中进行序列化：

```
MemoryStream ms = new MemoryStream();
Serializer.Serialize<MyObjectType>(ms, myObject);
byte[] array = ms.ToArray();
ms.Close(); 
```

然后我将它发送到 ActiveMQ 主题（pub-sub 模型）Java 以异步方式接收它，并使用以前的方法（在我的第一个答案中）反序列化它。我读了数组，它似乎没有损坏，但一个已签名，另一个未签名。在 C# 中，我有 10 个大于 126 的值。这些相同的值在 Java 中变为负数：

```
byte #58 =  144 in C# , -112 in Java
byte #67 =  160 in C# , -96 in Java 
```

经过多次测试，当我不序列化 dataTimeOffset 参数时，这些值似乎消失了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-20T09:49:06.417

这是java的反序列化方法：

```
public MyObjectProto.MyObject deserialize(byte[] array) {
    try {
        CodedInputStream stream = CodedInputStream.newInstance(array);
        return MyObjectProto.MyObject.parseFrom(stream);
    } catch (IOException ex) {
        displayLogs("Error while deserializing the content of message : " + ex);
        return null;
    }
} 
```

这种反序列化方法会损坏它吗？**

# ios - 单元格更新后更新 TableView SectionHeader

> ID：12008265
> 
> 赞同：1
> 
> 时间：2012-08-17T15:00:52.647
> 
> 标签：ios, uitableview, sectionheader

嗨希望有人可以提供帮助。

我目前有一个包含一组部分的表格视图，在我的 titleForHeaderInSection 中，我返回一个字符串，其中包含部分单元格中包含的值的总和，以显示在部分标题中。这很好，但是当我更新单元格值时，我希望 titleForHeaderInSection 更新和刷新我的值总和。目前，用户需要将标题滚动到视线之外，然后再返回以使其刷新。我一直在谷歌搜索，看看是否能找到解决方案，看到一些示例建议在标题视图中包含标签，但我需要这些部分是动态的，因此无法为每个部分创建标签，我也尝试使用 reloadsection 但是这也不能正常工作，并且每次在 tableview 单元格中更改值时，tableview reloaddata 都会对性能造成很大影响。

我的 titlerForHeaderInSection 当前代码是

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:section];

int averageScoreTotal, _total;
averageScoreTotal = 0;
_total = 0;

for (BlkCon_BlockToConstructionType *sPC in sectionInfo.objects)
{
    _total = [sPC.compositionPc integerValue];

    averageScoreTotal += _total;
}   

return [NSString stringWithFormat: @"(Total Composition for Group %d)", averageScoreTotal]; 
```

}

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T16:23:38.517

您可以将 UITableView 的`-reloadSections:...`方法与正确的部分一起使用。这也将重新加载节标题。

如果您不想使用该方法，因为您的表格视图停止滚动片刻，或者表格视图单元格之一是第一响应者，您必须为包含标签的部分使用自定义标题视图。

1) 实施`-tableView:heightForHeaderInSection:`和`-tableView:viewForHeaderInSection:`

```
- (CGFloat) tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
    return tableView.sectionHeaderHeight;
}

- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    CGFloat height = [self tableView:tableView heightForHeaderInSection:section];
    NSString *title = [self tableView:tableView titleForHeaderInSection:section];

    UIView *containerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, height)];
    containerView.backgroundColor = tableView.backgroundColor;

    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(19, 7, containerView.bounds.size.width - 38, 21)];
    label.backgroundColor = [UIColor clearColor];

    label.font = [UIFont boldSystemFontOfSize:17];
    label.shadowOffset = CGSizeMake(0, 1);
    label.shadowColor = [UIColor whiteColor];

    label.text = title;
    label.textColor = [UIColor colorWithRed:0.265 green:0.294 blue:0.367 alpha:1];

    [containerView addSubview:label];

    return containerView;
} 
```

2）通过更改其`text`属性直接更新标签。您必须`iVar`为标签创建一个或更好地使用数组来存储它们，以便在您想要更新节标题的文本时访问它们。

3) 如果要使标题高度灵活，请将`numberOfLines`标签的属性设置为 0，使其具有不定行并确保`-tableView:heightForHeaderInSection:`返回正确的高度。

为了更新节标题的高度使用

```
[self.tableView beginUpdates];
[self.tableView endUpdates]; 
```

祝你好运，
法比安

*编辑：*
上面的代码假设您使用的是 ARC。

# jquery - jquery - 选择类元素并添加到数组

> ID：12008267
> 
> 赞同：0
> 
> 时间：2012-08-17T15:01:02.397
> 
> 标签：jquery, class, select

我想选择“play”类的所有元素并将它们添加到数组“esArreglo”中。

.html 文件：

```
<td id="b1" class></td>
<td id="b2" class></td>
<td id="b3" class="play"></td>
<td id="b4" class="play"></td> 
```

代码：

```
$('td.play').each(function() {
    notas.push(this.id)};

var esArreglo = notas.join(','); 
```

我怎样才能解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:03:30.837

你可以使用[jQuery.map](http://api.jquery.com/map/)

```
var esArreglo = $('td.play').map(function() {
  return this.id;
}).get().join(','); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:03:13.367

可能因为你错过`);`了`.each`

```
$('td.play').each(function() {
    notas.push(this.id)
});

var esArreglo = notas.join(','); 
```

# html - 更容易访问的是 text-indent: -9999px 还是仅使用带有 alt 标签的 img？

> ID：12008272
> 
> 赞同：3
> 
> 时间：2012-08-17T15:01:22.330
> 
> 标签：html, css, seo

我注意到最近出现了很多关于可访问性和 SEO 最佳实践的文章，质疑旧 CSS`text-indent: -9999px`技巧的使用，我很好奇这里的最佳实践是什么。

谷歌的一位员工说[这不是很好](http://maileohye.com/html-text-indent-not-messing-up-your-rankings/)，`alt`图像上的标签对于屏幕阅读器来说应该很好。这背后有什么真实的事实吗？我是否应该改变我在网站上处理某些图像的方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T15:10:34.470

带有 alt 属性的图像。

文本缩进技巧对于屏幕阅读器用户来说非常好，但对于刚刚关闭图像的人（或由于网络错误而无法加载图像时（尝试在移动的火车上使用 3G 非常*有趣*） ）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T15:15:38.377

我会说该`alt`属性更易于访问，除非其文本缩进的元素是带有徽标作为背景的标题元素（H1、H2 等）。

在这种情况下，我认为文档结构是最重要的，使用正确的标题文本很重要。这样，即使在查看带有镶嵌 1.0 的页面时，文档结构也会保持不变 :-)

# ruby-on-rails - 时区偏移错误 – Rails

> ID：12008275
> 
> 赞同：0
> 
> 时间：2012-08-17T15:01:32.533
> 
> 标签：ruby-on-rails, timezone, timezone-offset

```
ActiveSupport::TimeZone.new(-4).parse("2012-08-20T14:00:00-0400") 
```

返回

> 2012 年 8 月 20 日星期一 15:00:00 ADT -03:00

我希望 parse() 返回一个带有 -04:00 的时间，例如 Mon, 20 Aug 2012 14:00:00 EDT -04:00

你会怎么处理这个？我认为夏令时在这里搞砸了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:25:07.613

我已经使用 DateTime 中的 new_offset 处理了这个问题。

> 时间 = “2012-08-20T14:00:00-0400”
> 
> DateTime.parse(time).new_offset("+2")

返回 2012 年 8 月 20 日星期一 20:00:00 +0200

# objective-c - 应用程序：openURL 未触发

> ID：12008281
> 
> 赞同：1
> 
> 时间：2012-08-17T15:01:40.117
> 
> 标签：objective-c, ios, uiapplicationdelegate, openurl

我在实现 - (BOOL)application:openURL 并使用 UIDocumentInteractionController 将 PDF 文件从应用程序导出到另一个应用程序时遇到问题。

(1) 目标应用程序只显示导入的 PDF 文件的 URL（在标签中）。

这是 AppDelegate.m 中的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions: (NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.viewController = [[ViewController alloc] initWithText:@"No file is imported."];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    return YES;
}

- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:   (NSString *)sourceApplication annotation:(id)annotation
{
    if (url != nil)
    {
        [self.viewController handleOpenURL:url];
        return YES;
    }
    else
    {
        [self.viewController handleOpenURL:[NSURL fileURLWithPath:@"AppDelegate.h"]];
        return NO;
    }
} 
```

方法“handleOpenURL”只需获取 url 并在视图控制器中放入标签并显示警报：

```
- (void)handleOpenURL:(NSURL *)fileURL
{
    _text = [fileURL absoluteString];
    self.lblText.text = _text;

    UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Alert" message:_text delegate:self cancelButtonTitle:nil otherButtonTitles:nil, nil];
    [alert show];
} 
```

(2) 在源应用程序中，我简单地使用 UIDocumentInteractionController 列出“打开方式”选项（我的目标应用程序在列表中显示得很好）

这是代码：

```
_docInteractionController = [UIDocumentInteractionController interactionControllerWithURL:[NSURL fileURLWithPath:attachmentFile]];
_docInteractionController.delegate = self;
_docInteractionController.UTI = [_extensionUTIs objectForKey:[[attachmentFile pathExtension] lowercaseString]];
BOOL opened = [_docInteractionController presentOpenInMenuFromRect:CGRectZero inView:self.view animated:NO]; 
```

(3) 问题： - 当我选择目标应用程序（从“打开方式”列表中）时，模拟器从源应用程序切换到目标应用程序正常，但看起来 application:openURL 方法没有被调用，因为标签保持初始状态（没有文件已导入。）并且不显示警报视图。

请告诉我这里有什么问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:08:49.977

我使用这两种方法进行 facebook 集成来处理 openURL ......它工作正常。

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    return [ [[HIFacebookConnect sharedGameObject] facebook] handleOpenURL:url];
}

- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    return [[[HIFacebookConnect sharedGameObject] facebook] handleOpenURL:url];
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-21T08:44:47.923

只想将我的问题标记为已回答，因为我已经发现了故障。

**更新**：在启动 UIDocumentInteractionController 对象时不包括完整文件路径是我的错。

# ruby-on-rails-3 - 如何在使用 wicked_pdf 生成 pdf 期间显示图像

> ID：12008286
> 
> 赞同：2
> 
> 时间：2012-08-17T15:01:57.873
> 
> 标签：ruby-on-rails-3, paperclip, wicked-pdf

我正在使用 wicked_pdf 并生成用户记录的 pdf。生成 pdf 时图像标签不起作用。所以我使用这个技巧并在应用程序帮助程序中编写此代码。

```
 def pdf_image_tag(image, options = {})
       options[:src] = File.expand_path(Rails.root) + '/public' + image
       tag(:img, options)
     end 
```

在我看来，我这样称呼

```
 <%= pdf_image_tag(@image.snap.url(:thumb)) unless @image.blank? %> 
```

这适用于 chrome 并完美显示图像，但不适用于其他浏览器。

谁能给个更好的建议。

谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:54:41.387

使用内置助手`wicked_pdf_image_tag`

```
<%= wicked_pdf_image_tag(@image.snap.url(:thumb)) unless @image.blank? %> 
```

# php - RSS 源 - 添加服务器端 (PHP) 或客户端 (JavaScript/jQuery)

> ID：12008288
> 
> 赞同：0
> 
> 时间：2012-08-17T15:02:04.917
> 
> 标签：php, javascript, rss

在 Google 上快速搜索“jquery rss parser”会返回许多很酷的插件。

话虽如此，使用服务器端与客户端技术向我的网站添加 RSS 内容的优缺点是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:51:50.203

我正在寻找如下列表：

将客户端技术用于 RSS 提要的好处：

1.  无需重新加载页面即可更新内容
2.  无需重新加载页面即可对内容进行排序/操作

RSS 提要的服务器端技术的好处：

1.  改进 SSO
2.  不需要客户端启用 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:13:37.973

这里有几个优点和缺点：

**专业人士**

*   内容动态更新
*   可以灵活地将最相关的内容推送给访问者
*   允许您对数据进行样式设置和操作，以使网站看起来一致

**缺点**

*   客户端需要在浏览器/设备上启用 javascript。
*   服务器端虽然更通用，但可能需要在服务器上额外安装模块才能正常工作
*   服务器端不会在没有页面重新加载的情况下自动更新
*   RSS 提要结构可能会改变，需要重写您的代码。
*   RSS Feed 无法正确输出导致您的网站无法显示正确的信息（标签使用不当或未转义的字符）
*   可能不会立即更新，我知道一些每周更新的提要

如果您正在寻找一种将内容添加到您的网站的方法。研究创建或使用内容管理系统。有可用的插件可以做到这一点，并允许您对数据的显示或解释方式进行一些控制，更不用说还可以缓存较旧的提要。可以在此处找到最常见的内容管理系统列表：[http ://en.wikipedia.org/wiki/List_of_content_management_systems](http://en.wikipedia.org/wiki/List_of_content_management_systems)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T15:24:02.240

在客户端实现它可能很酷，因为这样你就可以构建非常酷的用户界面，每隔几秒/分钟就会获取新的 RSS 项目（考虑 Masonry 插件）。客户端将允许您加载 RSS 提要并在从源加载内容后立即显示它们，而不是等到所有提要都加载完毕。

服务器端 - 您将不得不考虑某种缓存，因为解析提要可能非常耗时，而且没有人喜欢等待......

# sql-server - 获取范围的最小值和最大值

> ID：12008290
> 
> 赞同：0
> 
> 时间：2012-08-17T15:02:17.370
> 
> 标签：sql-server, tsql

以下查询将为我提供运行此命令后立即执行更新所需的 ID 列表：

```
SELECT TOP 5 WorkflowEventProcessingID
FROM Master.WorkflowEventProcessing
WHERE ProcessingToken IS NULL
ORDER BY WorkflowEventProcessingId 
```

![在此处输入图像描述](../Images/77a38c2c562c7281a58b82897ac28142.png)

有没有办法在一个选择语句中获取此范围的最小（55034）和最大（55038）ID，所以我可以这样做：

```
UPDATE WorkflowEventProcessing
SET ProcessingToken = <guid here>
WHERE WorkflowEventProcessingId >= @minId
  AND  WorkflowEventProcessingId <= @maxId 
```

我尝试过这样的事情，但我已经走了：

```
DECLARE @minId INT
DECLARE @maxId INT

SELECT TOP 5 @minId = min(WorkflowEventProcessingID), @maxId = MAX(WorkflowEventProcessingID)
FROM Master.WorkflowEventProcessing
WHERE ProcessingToken IS NULL
ORDER BY WorkflowEventProcessingId 
```

**编辑**

我不想使用子 SELECT 进行更新，因为我遇到了死锁。所以我被告知将 SELECT 和 UPDATE 分开，以便让单独的 DELETE 进程有机会在 UPDATE 和 SELECT 之间运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:04:01.743

考虑使用子查询而不是范围：

```
UPDATE  WorkflowEventProcessing
SET     ProcessingToken = <guid here>
WHERE   WorkflowEventProcessingId in
        (
        SELECT  TOP 5 WorkflowEventProcessingID
        FROM    Master.WorkflowEventProcessing with (updlock, holdlock)
        WHERE   ProcessingToken IS NULL
        ORDER BY 
                WorkflowEventProcessingId
        ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T15:04:25.660

尝试

```
DECLARE @min INT
DECLARE @max INT

select @min = min(WorkflowEventProcessingID), 
       @max = max(WorkflowEventProcessingID)
from (
        SELECT TOP 5 WorkflowEventProcessingID
        FROM Master.WorkflowEventProcessing
        WHERE ProcessingToken IS NULL
        ORDER BY WorkflowEventProcessingId
     ) x 
```

进而

```
UPDATE WorkflowEventProcessing
SET ProcessingToken = <guid here>
WHERE WorkflowEventProcessingId between @min and @max 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T15:05:38.787

这样做不是更容易吗？：

```
UPDATE WorkflowEventProcessing
SET ProcessingToken = <guid here>
WHERE WorkflowEventProcessingId IN (SELECT TOP 5 WorkflowEventProcessingID
FROM Master.WorkflowEventProcessing
WHERE ProcessingToken IS NULL
ORDER BY WorkflowEventProcessingId) 
```

好的，看到您不能使用 a 的评论`SELECT`（`UPDATE`尽管我真的不明白为什么不能使用），并假设 SQL Server 2005+，您可以尝试以下操作：

```
;WITH CTE AS
(
    SELECT TOP 5 WorkflowEventProcessingID
    FROM Master.WorkflowEventProcessing
    WHERE ProcessingToken IS NULL
    ORDER BY WorkflowEventProcessingId
)
UPDATE CTE 
SET ProcessingToken = <guid here> 
```

# ruby - 为什么 ruby 让我使用 #$$ 在字符串中打印 PID？

> ID：12008291
> 
> 赞同：7
> 
> 时间：2012-08-17T15:02:17.867
> 
> 标签：ruby, pid

我正在查看一些代码示例，我遇到了这一行：

```
puts "child #$$ accepting..." 
```

哪个输出

```
>> child 7231 accepting... 
```

看起来 $$ 是 PID，它利用一些简写来表示普通的`#{$$}`字符串插值语法。不过，我找不到这方面的文档。我很好奇还有什么其他的速记技巧（或者会让我感到困惑）。

文档在哪里？为什么这很特别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T15:06:35.860

Ruby 允许您在进行字符串插值时省略全局 ( `$var`)、实例 ( `@var`) 和类 ( ) 变量的大括号。`@@var`

# ios - 在 iPad 上存储图像（blob）的地方？

> ID：12008294
> 
> 赞同：0
> 
> 时间：2012-08-17T15:02:35.123
> 
> 标签：ios, uiimage, nsuserdefaults

我考虑过使用`NSUserDefaults`来存储单个图像，但我知道这是不鼓励的。

现在，我尝试使用新的资产库机制，但未能使其正常工作。我尝试了这个，因为我最初存储/检索图像 URL（本地磁盘上的路径）的想法不受支持（Apple 出于某种原因取消了这个）。

所以现在我在这里询问关于在哪里/如何存储信息的想法，以便我可以加载预先选择的图像。请注意，我已经在使用 Core Data（单一实体类型）来填充表格视图。我想我可以为此创建第二个实体类型。这是建议，还是还有更简单或更聪明的方法？

例如：用户“收藏”特定图像。下次加载应用程序时，我想显示该图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:22:30.783

您可以使用应用程序的文档目录：

```
+ (NSString *) applicationDocumentsDirectory 
{    
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
    return basePath;
} 
```

请注意，当用户删除应用程序时，此目录将被删除。

# android - jQuery点击事件不会在Android上触发？

> ID：12008296
> 
> 赞同：0
> 
> 时间：2012-08-17T15:02:39.280
> 
> 标签：android, jquery, mobile, google-analytics

我在移动网站上有一个图标，我想在有人触摸它时附加一个事件。该图标的链接有一个带`tel`前缀的href，因此当您触摸它时，它会在您的手机上弹出拨号器应用程序。在此之前，我想将触摸注册为 Google Analytics 的事件。这是我嵌入页面的代码：

```
$("a[href^='tel']").bind('click touchstart', (function(event){
    pageTracker._trackEvent("Mobile", "Click", "Telephone", 75, true);
})); 
```

触摸在 iOS 设备上正确注册，但在 Android、Windows Phone 或运行 Firefox 的台式计算机上没有正确注册。有没有适用于所有移动设备的方法？

# java - 在java应用程序中搜索特定网站

> ID：12008305
> 
> 赞同：0
> 
> 时间：2012-08-17T15:03:25.213
> 
> 标签：java, search

我是 Java 初学者，目前我正在开发一个 SWING JAVA 应用程序。

这个应用程序是做什么的。做。

如果用户提示一些数字（比如说）[输入]，那么应用程序。连接到特定网站并在那里搜索（网址：[http](http://www.example.com/search?text=[user) ://www.example.com/search?text=[user 's input]）。输出（我想要）将是是否可以找到用户的输入（借助布尔真/假和 url 连接）。只是这个。

我已经阅读[了在某个网站中搜索的 Java 程序](https://stackoverflow.com/questions/6826858/a-java-program-to-search-in-a-certain-website)，但我不想使用爬虫。对我来说似乎很难。另外，我认为，我不需要解析网站，***因为如果用户的输入存在，它将返回用户正在寻找的内容***。所以不需要像 jsoup 这样的程序。

**我的问题是：我应该用什么肉。如何解决这个问题呢？基本上，如何将用户的输入放入网站 URL，然后单击摆动按钮在该网站上进行搜索**

**编辑：** 所以几点。

1.  用户输入应返回肯定结果，例如“example.com/descriptionOfProduct.k973311”，其中 97311 是该产品的特定 ID。它总是有 6 个数字。还有字母“k”。是不是也一直在。
2.  如果用户输入不存在则 404。如果存在则见上文。而且 descriptionOfProduct 总是完全不同的。这绝对是随机的。

我使用httpclient apache。

关于那个特定的网站：没有用于搜索的 api，它是电子商务（eshop）。

这是我的代码，由于这个搜索功能，它没有完成。

```
import java.io.IOException;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URI;
import java.net.URISyntaxException;
import java.net.URL;
import java.util.Scanner;

import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.utils.URIBuilder;

public class Connection {

    /**
     * @param args
     * @throws URISyntaxException 
     */
    @SuppressWarnings({ "resource", "unused" })
    public static void main(String[] args) throws URISyntaxException {

        HttpURLConnection connection = null;
        try {
            URL url = new URL("http://www.example.cz");
            connection = (HttpURLConnection) url.openConnection();
            connection.connect();
            connection.getInputStream();                
            System.out.println("Connected to website");   

           // do something with the input stream here
           // InputStream error = ((HttpURLConnection) connection).getErrorStream();

           // # means special ID to understand where & what is wrong
            } catch (MalformedURLException e1) {
                e1.printStackTrace();
                System.err.println("Something's wrong #1");
            } catch (IOException e1) {
                e1.printStackTrace();
                System.err.println("Something's wrong #2");
            } finally {
                if(null != connection) { connection.disconnect(); }
            }                                   

           URIBuilder builder = new URIBuilder();
              builder.setScheme("http").setHost("www.example.com").setPath("/search")
                   .setParameter("text", "");
        URI uri = builder.build();
        HttpGet httpget = new HttpGet(uri); 
```

这是摇摆应用程序

```
import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JTextField;
import java.awt.BorderLayout;
import javax.swing.JButton;

/**
 * @author  John Malc
 * @version 
 *
 */
public class app {

    private JFrame frame;
    private JTextField textField;
    private JButton btnSearch;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    app window = new app();
                    window.frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the application.
     */
    public app() {
        initialize();
    }

    /**
     * Initialize the contents of the frame.
     */
    private void initialize() {
        frame = new JFrame();
        frame.setBounds(100, 100, 450, 300);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().add(getTextField(), BorderLayout.NORTH);
        frame.getContentPane().add(getBtnSearch(), BorderLayout.SOUTH);
    }

    private JTextField getTextField() {
        if (textField == null) {
            textField = new JTextField();
            textField.setColumns(10);
        }
        return textField;
    }
    private JButton getBtnSearch() {
        if (btnSearch == null) {
            btnSearch = new JButton("search");
        }
        return btnSearch;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:08:10.380

一旦你有了远程文件，你总是可以做这样的事情[Java Grep Library](https://stackoverflow.com/questions/6222659/java-grep-library)

基本上，您需要获取远程文件并在文件中搜索与您的用户输入匹配的字符串。

# c++ - wxPropertyGrid 自定义滑块属性问题

> ID：12008306
> 
> 赞同：2
> 
> 时间：2012-08-17T15:03:26.423
> 
> 标签：c++, user-interface, wxwidgets

我在应用程序中使用**wxWidgets 2.8 和[wxPropertyGrid 1.4 。](http://wxpropgrid.sourceforge.net/docs/pg14/annotated.htm)**对于浮点值，我想使用滑块来编辑它们。但是，默认情况下不提供滑块编辑器，因此我采用了自己的编辑器，遵循文档中提到的指南。

然而，使用这个新的编辑器，即使我将它设置为我的浮动属性的编辑器，它实际上并没有出现，直到属性网格单元以任何方式交互（例如单击）。在那之前，经典的基于文本框的控制器仍然可见。

显然，滑块编辑器的实际 CreateControl 方法在生成 propgrid 时不会被调用 - 它仅在单元格本身以某种方式交互时被调用。

这是我的自定义属性编辑器：

## wxpgslider.h

```
类 WXDLLIMPEXP_PG wxPGSliderEditor : 公共 wxPGEditor
{
#ifndef 痛饮
  WX_PG_DECLARE_EDITOR_CLASS(wxPGSliderEditor)
＃万一

上市：
  wxPGSliderEditor (int p = 10000)
    : 精度(p)
  {
  }

  ~wxPGSliderEditor ()
  {}

  // CreateControls 方法存根的宏
  wxPG_DECLARE_CREATECONTROLS

  void UpdateControl ( wxPGProperty* 属性, wxWindow* wnd) const;
  bool OnEvent ( wxPropertyGrid* propgrid, wxPGProperty* property, wxWindow* wnd, wxEvent& event) const;
  bool GetValueFromControl ( wxVariant& 变体, wxPGProperty* 属性, wxWindow* wnd) const;
  void SetValueToUnspecified ( wxPGProperty* 属性, wxWindow* wnd) const;
  //void DrawValue ( wxDC& dc, const wxRect& rect, wxPGProperty* property, const wxString& text) const;

私人的：
  整数精度；
};

```

## wxpgslider.cpp

```
#include "cseditor/wxpgslider.h"

//----------------- wxPGSliderEditor ---------

WX_PG_IMPLEMENT_EDITOR_CLASS(SliderEditor, wxPGSliderEditor, wxPGEditor)

wxPGWindowList wxPGSliderEditor::CreateControls( wxPropertyGrid* propgrid,
                                                 wxPGProperty* 属性，
                                                 const wxPoint& pos,
                                                 常量 wxSize& 大小) 常量
{
  double v_d = property->GetValue().GetDouble();
  如果 ( v_d 1 )
    v_d = 1;

  wxSlider *ctrl = new wxSlider();

#ifdef __WXMSW__
  ctrl->隐藏（）；
＃万一

  ctrl->创建 (propgrid->GetPanel(),
                 wxPG_SUBID2,
                 (int)(v_d * 精度),
                 0,
                 精确，
                 位置，
                 尺寸，
                 wxSL_HORIZONTAL );

  返回 wxPGWindowList(ctrl);
}

void wxPGSliderEditor::UpdateControl ( wxPGProperty* 属性, wxWindow* wnd ) const
{
  wxSlider* ctrl = wxDynamicCast (wnd, wxSlider);
  如果 ( ctrl )
  {
    双倍价值；
    if (wxPGVariantToDouble (property->DoGetValue(), &val))
    {
      如果 ( 值 1 )
        值 = 1;
      ctrl->SetValue ( (int)(val * precision) );

      //static_cast(属性)->GetLabel()
      // ->SetValue( wxString::Format(wxT("%ld"), val * precision) );
    }
  }
}

bool wxPGSliderEditor::OnEvent ( wxPropertyGrid* propgrid,
                                 wxPGProperty* 属性，
                                 wxWindow* wnd,
                                 wxEvent& 事件 ) 常量
{
  if(event.GetEventType() == wxEVT_SCROLL_CHANGED)
  {
    // 更新值    
    事件.Skip();
    propgrid->EditorsValueWasModified();

    返回真；
  }

  返回假；
}

bool wxPGSliderEditor::GetValueFromControl ( wxVariant& 变体，
                                             wxPGProperty* 属性，
                                             wxWindow* wnd ) 常量
{
  wxSlider* ctrl = wxDynamicCast (wnd, wxSlider);
  如果 ( ctrl )
  {
    变体 = wxVariant ( (double)(ctrl->GetValue())/(double)(precision) );
    属性->SetValue（变体）；
  }

  返回真；
}

void wxPGSliderEditor::SetValueToUnspecified ( wxPGProperty* 属性, wxWindow* wnd) const
{
  wxSlider* ctrl = wxDynamicCast (wnd, wxSlider);
  如果 ( ctrl )
  {
    ctrl->设置值（0）；
  }
}

```

这是我用来在 Populate 函数中**生成滑块的代码：**

```
双值 = 变体->GetFloat();

// 生成一个自制的滑块
wxFloatProperty* fp = new wxFloatProperty(translatedName, originalName, value);
wxPGEditor* rHandle = wxPropertyGrid::RegisterEditorClass(new wxPGSliderEditor(), wxT("SliderEditor"));
fp->SetEditor(rHandle);
page->AppendIn(categoryID, fp);

```

我注册了这个类，以防它之前没有注册过，然后设置属性的编辑器。然后我将属性添加到网格中。为什么在与单元格交互之前滑块不显示？

调用`pgMan->GetGrid()->SelectProperty(fp, false);`是使它被绘制的唯一方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T02:41:10.320

您正在使用

```
#ifdef __WXMSW__
  ctrl->Hide();
#endif 
```

是怎么回事

```
#ifdef __WXMSW__
    ctrl->Show();
#endif 
```

样本：

```
....
  wxSlider* ctrl = new wxSlider();
#ifdef __WXMSW__
    ctrl->Hide();
#endif
....
ctrl->Create ( propgrid->GetPanel(),
             wxPG_SUBID2,
             (int)(v_d * precision),
             0,
             precision,
             pos,
             size,
             wxSL_HORIZONTAL );

#ifdef __WXMSW__
    ctrl->Show();
#endif

return wxPGWindowList(ctrl);
} 
```

**编辑**

我在您的代码中看不到 OnCustomEditorEvent。

使用 wxEVT_SCROLL_THUMBTRACK 或 wxEVT_SCROLL_CHANGED。

```
....

propgrid->Connect( wxPG_SUBID2, wxEVT_SCROLL_CHANGED,
                       (wxObjectEventFunction) (wxEventFunction) (wxCommandEventFunction)
                       &wxPropertyGrid::OnCustomEditorEvent, NULL, propgrid );

#ifdef __WXMSW__
  ctrl->Show();
#endif

return wxPGWindowList(ctrl);
} 
```

# php - yii 中的模块 - 解释

> ID：12008314
> 
> 赞同：-2
> 
> 时间：2012-08-17T15:03:40.240
> 
> 标签：php, module, yii

我很难理解 Yii 中的模块。有人可以向我解释他们的目的是什么以及要添加什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T15:07:21.837

从文档：

> 模块是一个独立的软件单元，由模型、视图、控制器和其他支持组件组成。在许多方面，模块类似于应用程序。主要区别在于模块不能单独部署，它必须驻留在应用程序内部。用户可以像访问普通应用程序控制器一样访问模块中的控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T15:40:32.177

要从理论上理解**什么是 Yii 模块**，您必须阅读官方指南：[http](http://www.yiiframework.com/doc/guide/1.1/en/basics.module) ://www.yiiframework.com/doc/guide/1.1/en/basics.module ，但是没有比阅读更好的方法来实际理解编码好代码。检查[yii-user](http://www.yiiframework.com/extension/yii-user/)，它是用于注册和管理用户帐户的 yii 扩展。

该扩展基本上是一个 yii 模块，它有很好的文档记录，因此您可以了解**模块****在**现实生活中的作用和方式。

# c# - makeValid() 错误 sql 地理空间

> ID：12008321
> 
> 赞同：-1
> 
> 时间：2012-08-17T15:04:05.570
> 
> 标签：c#, sql-server, ado.net, geospatial

我正在用 C# 编写一个项目，我使用 ADO.NET 连接到我的 SQL Server 2012 数据库。我的数据库（除其他外）有两列。第一列代表一个点的纬度，第二列代表经度。我使用一个程序来检查地图上的两个矩形是否相互截取。列回复返回 1 个值，即 0 或 1。 编辑：在此示例中，我仅使用数字运行它，我计划稍后添加变量，如果我在 SQL 查询上运行它，我的过程可以正常工作。但是如果我使用 ADO.net 运行会出现错误

因为 SQL 查询过程是：

```
DECLARE @g geography;
DECLARE @h geography;
DECLARE @s geography;

SET @g = geography::STGeomFromText('POLYGON((39.692 23.483, 23.483 39.671, 24.095 39.493, 23.466 39.800,39.692 23.483))', 4326);

SET @h = geography::STGeomFromText('POLYGON((39.800096 23.296509, 39.628961 23.128967,39.43195 23.510742 ,39.7093 23.859558,39.800096 23.296509))', 4326);
SET @h =@h.MakeValid();
SET @g = @g.MakeValid();
SELECT @g.STIntersects(@h) as reply 
```

/*================================================= ==================================================== =============

//------------------------ AS ADO.NET 程序是 : ----- --------------

```
SqlDataReader rdr = null;
SqlConnection conn = new SqlConnection("Data Source=AGIS-PC;Initial Catalog=ship_maps;Integrated Security=True");// create a connection object

String commandString = @"DECLARE @g geography;
DECLARE @h geography;
DECLARE @s geography;
SET @h =@h.MakeValid();
SET @g = @g.MakeValid();
SET @g = geography::STGeomFromText('POLYGON((39.692 23.483, 23.483 39.671, 24.095 39.493, 23.466 39.800,39.692 23.483))', 4326);
SET @h = geography::STGeomFromText('POLYGON((39.800096 23.296509, 39.628961 23.128967,39.43195 23.510742 ,39.7093 23.859558,39.800096 23.296509))', 4326);
SET @h =@h.MakeValid();
SET @g = @g.MakeValid();
SELECT @g.STIntersects(@h) as reply";
SqlCommand cmd = new SqlCommand(commandString, conn);

try
{
// open the connection
conn.Open();
// 1\. get an instance of the SqlDataReader
rdr = cmd.ExecuteReader();

while (rdr.Read())
{
// get the results of each column
string vessel_name = (string)rdr["reply"];
TextBox1.Text += " " + vessel_name;

// .....
}//while
}
finally
{
//...........
} 
```

//================================================= ========= 我猜他的错误是 makevalid() 。我在 sql 的初始查询中遇到了类似的错误，然后我插入 makevalid() 并且它起作用了。编辑：它发生在 rdr = cmd.ExecuteReader();

```
Stack Trace:

[SqlException (0x80131904): A .NET Framework error occurred during execution of user-defined routine or aggregate "geography":
System.ArgumentException: 24200: The specified input does not represent a valid geography instance. Use MakeValid to convert the instance to a valid instance. Note that MakeValid may cause the points of a spatial instance to shift slightly.
System.ArgumentException:
at Microsoft.SqlServer.Types.SqlGeography..ctor(GeoData g, Int32 srid)
at Microsoft.SqlServer.Types.SqlGeography.GeographyFromText(OpenGisType type, SqlChars taggedText, Int32 srid)
.
A .NET Framework error occurred during execution of user-defined routine or aggregate "geography":
Microsoft.SqlServer.Types.GLArgumentException: 24205: The specified input does not represent a valid geography instance because it exceeds a single hemisphere. Each geography instance must fit inside a single hemisphere. A common reason for this error is that a polygon has the wrong ring orientation. To create a larger than hemisphere geography instance, upgrade the version of SQL Server and change the database compatibility level to at least 110.
Microsoft.SqlServer.Types.GLArgumentException:
at Microsoft.SqlServer.Types.GLNativeMethods.GeodeticIsValid(GeoData& g, Double eccentricity, Boolean forceKatmai)
at Microsoft.SqlServer.Types.SqlGeography.IsValidExpensive(Boolean forceKatmai)
at Microsoft.SqlServer.Types.SqlGeography..ctor(GeoData g, Int32 srid)
at Microsoft.SqlServer.Types.SqlGeography.GeographyFromText(OpenGisType type, SqlChars taggedText, Int32 srid)
.]
System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) +2084358
System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +5096328
System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +234
System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +2294
System.Data.SqlClient.SqlDataReader.ConsumeMetaData() +33
System.Data.SqlClient.SqlDataReader.get_MetaData() +86
System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) +311
System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async) +987
System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result) +162
System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method) +32
System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method) +141
System.Data.SqlClient.SqlCommand.ExecuteReader() +89
gmaps.Button11_Click(Object sender, EventArgs e) +185
System.Web.UI.WebControls.Button.OnClick(EventArgs e) +118
System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +112
System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +5563 
```

请告知，或者如果这是另一个主题，请告诉我。我是 SQL 初学者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:30:00.380

你的代码有很多问题......

1.) 当它们是未初始化的变量时，您在 @g 和 @h 上调用 MakeValid() ：

```
DECLARE @g geography;
DECLARE @h geography;

SET @h = @h.MakeValid();
SET @g = @g.MakeValid(); 
```

2.) @s 是干什么用的？从来没用过...

3.) @g 是一个无效的自相交多边形。表示此点集的适当有效实例是 MULTIPOLYGON (((23.483 39.671, 39.692 23.483, 23.721 39.602, 23.483 39.671)), ((23.466 39.8, 23.721 39.602, 24.095 39.49.8) 23.466

4.) @h 的环方向不正确（也就是说，假设您没有尝试创建一个覆盖地球表面 99% 的多边形）。它应该是 POLYGON((39.43195 23.510742, 39.628961 23.128967, 39.800096 23.296509, 39.7093 23.859558, 39.43195 23.510742))

因此，您的 SQL 查询应该是：

```
DECLARE @g geography;
DECLARE @h geography;
SET @g = geography::STGeomFromText('MULTIPOLYGON (((23.483 39.671, 39.692 23.483, 23.721 39.602, 23.483 39.671)), ((23.466 39.8, 23.721 39.602, 24.095 39.493, 23.466 39.8)))', 4326);
SET @h = geography::STGeomFromText('POLYGON((39.43195 23.510742, 39.628961 23.128967, 39.800096 23.296509, 39.7093 23.859558, 39.43195 23.510742))', 4326);
SELECT @g.STIntersects(@h) as reply; 
```

这给出了结果“1”，如下所示的 SQL Server 空间结果选项卡所示：

![在此处输入图像描述](../Images/87a7437f7336251fce3a127fe7662b29.png)

[专业空间与 SQL Server 2012](https://rads.stackoverflow.com/amzn/click/com/1430234911)

# silverstripe - 已经在 getCMSField_forpopup 记录中保存 has_many 关系，在 SilverStripe 中的每个新记录中再次出现

> ID：12008329
> 
> 赞同：0
> 
> 时间：2012-08-17T15:04:45.090
> 
> 标签：silverstripe

我有一个事件的 getCMSField_forpopup 表单。我在其中制作了另一个弹出窗口，为该事件提供多个日期（使用 has_many 关系）。当我为事件“A”提供日期 2 个不同的日期/时间，然后在保存事件“A”后，我打开主 getCMSField_forpopup 以输入另一个事件“B”的详细信息，然后我看到实际上已经存在的日期/时间（complextablefield）意味着出现在事件 A 的详细信息中，而不是出现在事件“B”中。我想看到那些只有 A 的人，而不是每个新事件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:56:53.970

您的问题是您输入了 1 个事件的日期，但是您可以在每个事件上看到这个日期？

对我来说，这听起来像是您的事件此时没有 ID，因此对日期“WHERE EventID = x”的查询不起作用，或者您的日期在没有事件 ID 的情况下被保存

如果您的日期具有事件集的 ID，您可以简单地检查您的数据库。

1.  如果事件的 ID 为 0，那么问题是您没有保存事件 ID，这或者意味着：

    *   您在保存事件之前创建了日期，在这种情况下，解决方案只是在添加日期之前保存事件，您还可以在未保存日期字段时隐藏它，请参见下面的 $this->isNew() 内容
    *   或 silverstripe 无法保存 EventID，在这种情况下，您可以通过将隐藏字段添加到日期的 getCMSFields_forPopup 并将事件 ID 保存在那里来修复它，但是将此 ID 放入弹出窗口会有点棘手
2.  如果这不是问题，那么问题是当您创建一个新事件时它没有 ID，因此无法按 ID 过滤，您可以在事件的 getCMSFields_forPopup 中简单地执行此操作：

    ```
    if (!$this->isNew()) {
       // add your ComplexTableField for Dates here so it only 
       // gets added if this record has already been saved
    } 
    ```

**但实际上我建议使用嵌套的 DataObjectManager（DataObjectManager 中的 DataObjectManager）（请参阅 youtube 上的教程：http: [//youtu.be/eeXOTlXFmQQ](http://youtu.be/eeXOTlXFmQQ)），DataObjectManager 为您完成所有工作，因此不应出现此问题。
如果您已经保存了一次事件，它只会显示日期的 DataObjectManager，否则它会告诉用户他需要先保存它。它还为您设置日期上的事件 ID**

或者，更好的是，您可以升级到 SilverStripe 3，您可以在其中使用 GridField。GridField 的工作方式比 DataObjectManager 好得多，而且看起来好多了。

# c# - 从注册表中检索文件安装路径

> ID：12008331
> 
> 赞同：5
> 
> 时间：2012-08-17T15:05:02.920
> 
> 标签：c#, wpf, registry

我正在创建一个 WPF 实用程序，它需要访问本地机器的注册表，然后找出程序的安装路径。

我已经通过 Regedit 导航到密钥，它给出了名称、类型和数据，在数据中它显示了安装路径，我想提取安装路径。

我知道我需要导航到注册表中的这个键：

HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\

然后我需要使用有关安装路径的信息访问此密钥中的文件夹。

-

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T16:00:20.340

我解决了我的问题，如果您在此之后仍然卡住，请给我未来想要解决方案的任何人，请给我发消息，我发现很难找到资源。

```
RegistryKey key = Registry.LocalMachine.OpenSubKey(@"Software\Microsoft\Windows\CurrentVersion\App Paths\myexe.exe");
string regFilePath = null;

object objRegisteredValue = key.GetValue("");

registeredFilePath = value.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:50:32.217

要读取注册表项，您应该使用[Microsot.Windows.RegistryKey 类](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.aspx)，[Registry](http://msdn.microsoft.com/en-us/library/microsoft.win32.registry.aspx)类可以为您打开 RegistryKey。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-07T12:33:31.407

这个问题对我很有帮助。我想出了一个助手类，想玩新的元组。

**示例用法：**

```
public string SkypeExePath => InstalledApplicationPaths.GetInstalledApplicationPath( "lync.exe" ); 
```

**班上：**

```
public static class InstalledApplicationPaths
{

   public static string GetInstalledApplicationPath( string shortName )
   {
      var path = GetInstalledApplicationPaths().SingleOrDefault( x => x?.ExectuableName.ToLower() == shortName.ToLower() )?.Path;
      return path;
   }

   public static IEnumerable<(string ExectuableName, string Path)?> GetInstalledApplicationPaths()
   {
      using ( RegistryKey key = Registry.LocalMachine.OpenSubKey( @"Software\Microsoft\Windows\CurrentVersion\App Paths" ) )
      {
         foreach ( var subkeyName in key.GetSubKeyNames() )
         {
            using ( RegistryKey subkey = key.OpenSubKey( subkeyName ) )
            {
               yield return (subkeyName, subkey.GetValue( "" )?.ToString());
            }
         }
      }
   }

} 
```

# ruby-on-rails - Rails3 + activeadmin：使用转换后的 unix 时间戳进行过滤

> ID：12008332
> 
> 赞同：0
> 
> 时间：2012-08-17T15:05:08.697
> 
> 标签：ruby-on-rails, filter, activeadmin

我需要在我的 ActiveAdmin 资源中添加一个过滤器，我可以在其中选择一个时间范围。问题是时间作为 Unix 时间戳存储在数据库中。我已经设法对其进行了转换，以便它在索引表中正确显示。

```
Time.at(1345094274).to_time.strftime("%H:%M %Z") 
```

但是如何添加过滤器以便您可以选择特定的时间范围？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:00:09.643

过滤器使用 meta_search，因此您必须创建自定义搜索，因为您的过滤器不使用活动记录列。

也许可以帮助您[解决 activeadmin 问题](https://github.com/gregbell/active_admin/issues/45#issuecomment-1203792)

# .net - 没有显式列的 NHibernate Futures 查询不返回任何数据

> ID：12008333
> 
> 赞同：1
> 
> 时间：2012-08-17T15:05:11.733
> 
> 标签：.net, nhibernate, sphinx

我在没有显式列的查询上使用 Futures 查询时遇到问题。有问题的查询如下：“SHOW META;” （请参阅[http://sphinxsearch.com/docs/1.10/sphinxql-show-meta.html](http://sphinxsearch.com/docs/1.10/sphinxql-show-meta.html)）此查询返回一个始终具有两列和多行的表。现在，当我按如下方式执行查询时，一切正常：

`var query = session.CreateSQLQuery("SHOW META");
var metaData = query.List(); // metadata is a list of object[] instances of length two`

变量“元数据”现在将包含一个长度为 2 的 object[] 实例列表，其中列表中的每个 object[] 项包含第一列的值 (Variable_name) 和第二列的值 (Variable)。

但是，当我尝试将此查询转换为 Futures 查询时，我得到一个长度为 0 的 object[] 实例列表：

`var query = session.CreateSQLQuery("SHOW META");
var futureQuery = query.Future();
var metaData = futureQuery.ToList(); // metadata is a list of object[] instances of length zero`

换句话说，我确实为结果中的每一行得到了一个 object[]，但没有添加任何数据。我究竟做错了什么？或者这是 NHibernate 的限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:10:58.033

如果我理解正确，Future 查询只是一种批处理查询的方法，而不是跟踪会话中的对象关系。

因此，如果这是正确的，那么它将您的未来查询和正常查询视为单独的一个，并且您不会获得对象列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T07:19:21.173

问题出在 NHibernate 版本 3.3.1 中，future 有时无法按预期工作。此错误已在 NHibernate 的 3.3.3 版本中修复。

# c - [ANSI-C]像类一样使用结构

> ID：12008336
> 
> 赞同：2
> 
> 时间：2012-08-17T15:05:23.877
> 
> 标签：c, oop, struct

我正在为嵌入式设备开发“第一个”C 软件。

我想以oo风格编写代码，所以我开始使用结构。

```
typedef struct sDrawable {
    Dimension size;
    Point location;
    struct sDrawable* parent;
    bool repaint;
    bool focused;
    paintFunc paint;
} Drawable;

typedef struct sPanel {
    Drawable drw;
    struct sDrawable* child;
    uint16_t bgColor;
} Panel; 
```

我不能也不想使用 malloc，所以我寻找更好的方法来实例化我的结构。这可以接受吗？

```
Panel aPanel={0};

void Gui_newPanel(Panel* obj, uint16_t x, uint16_t y, uint16_t w, uint16_t h, uint16_t bgColor) {
    // Drw is a macro to cast to (Drawable*)
    Drw(obj)->repaint = true;
    Drw(obj)->parent= NULL;
    Drw(obj)->paint = (paintFunc) &paintPanel;
    Drw(obj)->location=(Point){x, y};
    Drw(obj)->size=(Dimensione){w, h};
    obj->child = NULL;
    obj->bgColor = bgColor;
}

void Gui_init(){
    Gui_newPanel(&aPanel, 0, 0, 100, 100, RED);
} 
```

**更新**

在第一个中，我必须像`Panel aPanel={0};`将其指针传递给 Gui_newPanel 函数一样初始化结构，或者我只能写`Panel aPanel;`？我已经测试过并且两者都有效，但也许我只是不走运......

或者这是一个更好的方法？

```
Panel aPanel;

Panel Gui_newPanel(uint16_t x, uint16_t y, uint16_t w, uint16_t h, uint16_t bgColor) {
    // Drw is a macro to cast to (Drawable*)
    Panel obj;
    Drw(&obj)->repaint = true;
    Drw(&obj)->parent= NULL;
    Drw(&obj)->paint = (paintFunc) &paintPanel;
    Drw(&obj)->location = (Point){x, y};
    Drw(&obj)->size = (Dimension){w, h};
    obj.child = NULL;
    obj.bgColor = bgColor;
    return obj;
}

void Gui_init(){
    aPanel=Gui_newPanel(0, 0, 100, 100, RED);
} 
```

这些方法中哪一种更可取？

我对性能和内存使用特别感兴趣。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T15:15:56.957

按值返回`struct`s 可能会产生复制结构成员的开销，尽管编译器通常足够聪明以优化这一点。如果您担心开销，您应该分析两种方法的相对性能。

此外，检查设备的目标编译器是否真的能够支持返回结构 - 一些非常旧的编译器不支持返回或分配结构。

如果你有一个相当现代的编译器，你可以`struct`直接返回一个文字，这将是有效的：

```
return (Panel) {
    .drw = {
        .size = {w, h},
        .location = {x, y},
        // ...
    },
    .child = NULL,
    .bgColor = bgColor
}; 
```

# sql - SQL Server Management Studio 命令行？

> ID：12008337
> 
> 赞同：7
> 
> 时间：2012-08-17T15:05:24.310
> 
> 标签：sql, sql-server-2008, tsql

是否有一个命令行界面，我可以在其中运行一个脚本，例如：连接到服务器 a 运行查询 1 连接到服务器 b 运行查询 2 运行查询 3

我尝试在线搜索，但找不到 SQL Server Management Studio 内置的任何内容。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T15:07:06.463

sqlcmd**实用程序**

[http://msdn.microsoft.com/en-us/library/ms162773.aspx](http://msdn.microsoft.com/en-us/library/ms162773.aspx)

它通常随 SQL Server 安装程序一起提供，默认位于以下目录中：

```
C:\Program Files\Microsoft SQL Server\100\Tools\Binn\SQLCMD.EXE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T15:07:51.223

如果您想导出/导出，有一个名为 BCP 的命令行实用程序可以让您执行这些类型的进程。

[bcp 实用程序](http://msdn.microsoft.com/en-us/library/ms162802.aspx)

> bcp 实用程序在 Microsoft SQL Server 实例和用户指定格式的数据文件之间批量复制数据。bcp 实用程序可用于将大量新行导入 SQL Server 表或将数据从表中导出到数据文件中。除非与 queryout 选项一起使用，否则该实用程序不需要 Transact-SQL 知识。要将数据导入表中，您必须使用为该表创建的格式文件或了解表的结构以及对其列有效的数据类型。

# wpf - 标签前台资源

> ID：12008338
> 
> 赞同：0
> 
> 时间：2012-08-17T15:05:24.490
> 
> 标签：wpf, binding, resources, label, foreground

我在这里遇到了一个我无法弄清楚的小 WPF 问题。

我正在尝试设置一个`ResourceDictionary`包含许多颜色、画笔和`ControlTemplate`条目的内容。

我的问题是我正在尝试将 a 的前景画笔设置为`Label`同一文件中的资源，并且该位不起作用并且没有关于它的跟踪消息。

```
<Color x:Shared="false" x:Key="DefaultForegroundColor" A="255" R="0" G="0" B="0" />
<!--<Color x:Shared="false" x:Key="DefaultForegroundColor" A="255" R="255" G="0" B="0" />-->
<SolidColorBrush x:Shared="false" x:Key="DefaultForegroundBrush" Color="{DynamicResource DefaultForegroundColor}"/>

<Color x:Shared="false" x:Key="HeadingColor" A="255" R="17" G="158" B="218" />
<SolidColorBrush x:Shared="false" x:Key="HeadingBrush" Color="{DynamicResource HeadingColor}"/>

<Style TargetType="{x:Type Label}" x:Key="SectionHeadingStyle">
   <Setter Property="FontSize" Value="18"/>
   <Setter Property="Foreground" Value="{DynamicResource HeadingBrush}"/>
   <Setter Property="Template">
      <Setter.Value>
         <ControlTemplate TargetType="Label">
            <Border BorderThickness="0,0,0,2" BorderBrush="{DynamicResource DefaultForegroundBrush}" HorizontalAlignment="Left">
               <ContentPresenter Margin="5"/>
            </Border>
         </ControlTemplate>
      </Setter.Value>
   </Setter>
</Style> 
```

边框颜色可以正常工作（即使它不是黑色），但标签的前景仍然是黑色而不是浅蓝色。任何想法我做错了什么？

谢谢。

**更新** 忘了提到它在设计器中也很好看。

**更新 2** 在窥探可视化树时，`Foreground`颜色似乎在模板中占据了大部分位置，直到`ContentPresenter`使用 a`TextBlock`来显示标题文本。保持黑色，而上面的`TextBlock`ContentPresenter 将漂亮的蓝色阴影设置为`TextElement.Foreground`. 我可以在模板中做些什么来赋予创建`TextBlock`的前景色吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:17:35.553

我看到了两种可能的解决方案

您需要将资源设为`StaticResource`. 例如，如果您将画笔更改为此它可以工作：

```
<SolidColorBrush x:Shared="false" x:Key="HeadingBrush" Color="{StaticResource HeadingColor}"/> 
```

或者，如果您将样式中的 Foreground 更改为 a `StaticResource`，它将起作用。

另一种选择是`x:Shared="false"`从画笔和颜色中删除 。这也解决了这个问题。

```
<Color x:Key="HeadingColor" A="255" R="17" G="158" B="218" />
<SolidColorBrush x:Key="HeadingBrush" Color="{DynamicResource HeadingColor}"/> 
```

`DynamicResource`多层加上非共享资源的组合似乎是一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:39:35.740

刚刚意识到我从未关闭过这个问题：

最后有一个库在应用程序级别导入资源。由于某种原因，这些导致与我的资源发生冲突，并且两者都没有被应用。将库的资源移至 Window 或 UserControl 级别解决了该问题。

# java - 文件监控期间 RandomAccessFile 的 readBytes 函数出现 IOException

> ID：12008343
> 
> 赞同：1
> 
> 时间：2012-08-17T15:05:48.120
> 
> 标签：java, file-io, ioexception

我正在监视另一个不断写入它的 java 进程的日志文件。这两个进程（监控应用程序和被监控应用程序）运行在 linux 发行版 centos 上。

问题是每次我重新启动受监控的应用程序时，监控应用程序似乎都会收到此错误：

> java.io.IOException：在 FileMonitor 的 LogMonster.fileChanged(LogMonitor.java:57) 的 java.io.RandomAccessFile.read(RandomAccessFile.java:361) 的 java.io.RandomAccessFile.readBytes(Native Method) 的输入/输出错误.fireFileChangeEvent(FileMonitor.java:96) 在 FileMonitor$FileMonitorTask.run(FileMonitor.java:128) 在 java.util.TimerThread.mainLoop(Timer.java:512) 在 java.util.TimerThread.run(Timer.java: 462)

我保留了一个 Map ，其中文件名作为键，RandomAccessFile 对象作为值，并在将此对象添加为侦听器后按如下方式填充它：

> monitor.addFileChangeListener(logMonitor, LogFileName, LogMonitor_Properties.getTimeDelay()); randomAccessFile_list.put(LogFileName, new RandomAccessFile(LogFileName, "r"));

每次修改文件时都会触发一个事件，并且它在 eventFired 函数中，我试图在受监控的应用程序重新启动后从 RandomAccessFile 读取内容（在重新启动之前它工作正常）。

'fileChanged' 函数中的以下代码行导致错误：

> randomAccessFile_list.get(file.getAbsolutePath()).read(byteArray);

我使用 bash 脚本来杀死应用程序的所有版本，然后在“go”文件中重新启动它。

go内容：

> cd /path/to/app
> 
> 。/杀
> 
> nohup ./app.run &

杀戮内容：

> 杀死 -9 $(lsof app.run| awk '{print $2}')
> 
> 杀死 -9 $(lsof app.log| awk '{print $2}')
> 
> 杀死 -9 $(lsof app.go| awk '{print $2}')

app.run 的内容：

> ./app.go >>app.log 2>&1

app.log 的内容：只是应用程序的文本输出。

app.go 的内容：

> . /path/to/some/other/location/setClassPath.go
> 
> 导出 CLASSPATH=$CLASSPATH
> 
> 回声 $CLASSPATH
> 
> /usr/local/jdk1.6.0_27/bin/java -cp $CLASSPATH MyApp

我很抱歉在您阅读之前发布了一个看起来很累的问题，但我真的无能为力，任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T16:00:41.277

从方法名称看来，您正在使用[它](http://code.google.com/p/google-enterprise-authzserver/source/browse/trunk/projects/authzserver/source/java/com/google/enterprise/util/FileMonitor.java?spec=svn153&r=153)进行文件监控。它实际上并没有打开文件，它只是偶尔统计一下。

然后，您还将为地图中的文件保持一个单独的文件句柄。

库仅在修改时间更改时触发事件 - 这并不意味着文件中添加了任何新*数据。*然后，您显然尝试从您的文件句柄中读取并获得 IO 异常。

这种方法存在许多问题，但是如果不查看更多代码，就不可能准确地告诉您问题出在哪里。我猜测受监控的进程在重新启动时正在截断、删除或对文件执行其他操作，这会使您打开的文件句柄无效。

当您想要重新加载整个文件（通常是属性文件或正在编辑的文档）时，通常会使用这样的文件监视，而不是尝试执行“尾部”操作。

# android - 如何在我的主应用程序中包含一个帮助应用程序？

> ID：12008345
> 
> 赞同：1
> 
> 时间：2012-08-17T15:05:50.940
> 
> 标签：android, installation, google-play

*前言：我了解与捆绑多个应用程序相关的大多数[问题](https://stackoverflow.com/questions/5283775/bundle-multiple-apps-in-one-app/5283856#5283856)和许多[解决方案。](https://stackoverflow.com/questions/5074695/how-to-merge-two-apk-into-single-so-that-both-apps-can-be-installed-at-the-same?lq=1)*

我当前的应用程序依赖于辅助应用程序才能正常运行。我[当前](https://stackoverflow.com/a/11728042/612266)安装此辅助应用程序的方法是将其 .apk 文件包含在主应用程序的资产中并提示用户安装它。

如果用户禁用了[INSTALL_NON_MARKET_APPS](http://developer.android.com/reference/android/provider/Settings.Secure.html#INSTALL_NON_MARKET_APPS)，则主应用程序会将用户[重定向](https://stackoverflow.com/a/4604922)到市场上的辅助应用程序。

但是，这个过程有几个问题：

*   大多数用户被迫从市场下载应用程序两次，这很麻烦。
*   我被迫拥有一个在市场上自己什么都不做的辅助应用程序，这很可能会让通过搜索市场找到它的用户感到困惑。

有没有更好的方法将两个应用程序捆绑在一起并让用户同时安装它们？或者，是否有一种方法可以在市场上创建一个未列出的应用程序，以便只有使用正确的市场 uri 才能安装它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-27T06:29:17.930

是的，克莱有一个选项一的例子：

android 手机应用程序实际上是几个应用程序捆绑在一起......它通过将每个应用程序作为一个大活动并使用选项卡活动导航来完成。

但是，我无权访问您的代码，告诉您捆绑在一起可能会出现什么安全隐患，因为捆绑在一起的两个应用程序将具有您通过 android manifest 代码等实现的相同安全沙盒设置。

# dynamics-crm-online - 无法使用 XrmDataContext 连接到新的 CRM Online 安全模型

> ID：12008348
> 
> 赞同：0
> 
> 时间：2012-08-17T15:06:17.200
> 
> 标签：dynamics-crm-online

Microsoft 已将新 CRM 站点的身份验证模型从 LiveID 更改为 Microsoft Online Services。本周我建立了一个新站点并启动并运行，但我编写的使用早期绑定类连接到该站点的代码无法进行身份验证。

我使用 LiveIDs 的旧站点的连接字符串如下所示。

我正在尝试使用此连接字符串连接到使用 Microsoft Online Services 进行身份验证的新站点

我创建了一个 XrmDataContext 实例，它似乎可以正常工作，直到我实际从站点上传数据。我收到的错误是 ACS10002：处理 SOAP 正文时发生错误。ACS50012：身份验证失败。

我在这里尝试了所有身份验证类型列表[http://technet.microsoft.com/en-us/library/ff681567](http://technet.microsoft.com/en-us/library/ff681567)，但似乎没有一个有效。

我看到很多论坛帖子说发现服务 URL 已更改，因此我尝试将其添加到我的连接字符串中。发现 URL=https://disco.crm.dynamics.com/XRMServices/2011/Discovery.svc

没运气。

有没有人编写过连接到新安全模型的代码？你做了什么特别的事吗？

在此先感谢，比尔·沃罗汉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T20:38:41.313

MS 于 2012 年 8 月 17 日发布了新版本的 SDK。我在 2012 年 8 月 16 日下载了最新版本，但该版本不起作用。一旦我下载了较新的版本并重新编译它就很好用。我只是时机不好。:-(

# android - 在 Android 上构建 ffmpeg。使用 NEON (Tegra3) 和 Cygwin

> ID：12008349
> 
> 赞同：1
> 
> 时间：2012-08-17T15:06:20.990
> 
> 标签：android, android-ndk, ffmpeg, cygwin, neon

我在使用 NEON 指令（用于 Tegra3）为 Android 构建 ffmpeg 时遇到了一些问题。我可以在没有优化的情况下创建 libffmpeg.so：-mfpu=neon

我在 Windows 上使用最新的 ffmpeg 0.11.1 和 Cygwin。

请在下面找到我正在使用的 build.sh 文件（在网上找到并进行了调整）

```
#!/bin/bash
export TMPDIR=C:/Arnaud/Private/Android/temp
NDK=C:/Arnaud/Private/Android/android-ndk-r8b
###Path for Android 8
PLATFORM=$NDK/platforms/android-8/arch-arm/
PREBUILT=$NDK/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows

function build_one
{
./configure --target-os=linux \
    --prefix=$PREFIX \
    --enable-cross-compile \
    --extra-libs="-lgcc" \
    --enable-asm \
    --enable-neon \
    --arch=armv7 \
    --cpu=cortex-a8 \
    --enable-memalign-hack \
    --cc=$PREBUILT/bin/arm-linux-androideabi-gcc \
    --cross-prefix=$PREBUILT/bin/arm-linux-androideabi- \
    --nm=$PREBUILT/bin/arm-linux-androideabi-nm \
    --sysroot=$PLATFORM \
    --extra-cflags="$OPTIMIZE_CFLAGS" \
    --disable-shared \
    --enable-memalign-hack \
    --enable-static \
    --extra-ldflags="-Wl,-rpath-link=$PLATFORM/usr/lib -L$PLATFORM/usr/lib -nostdlib -lc -lm -ldl -llog" \
    --disable-everything \
    --enable-demuxer=mov \
    --enable-demuxer=h264 \
    --disable-ffplay \
    --enable-protocols \
    --enable-avformat \
    --enable-avcodec \
    --enable-decoder=rawvideo \
    --enable-decoder=mjpeg \
    --enable-decoder=h263 \
    --enable-decoder=mpeg4 \
    --enable-decoder=h264 \
    --enable-parser=h264 \
    --disable-network \
    --enable-zlib \
    --disable-avfilter \
    --disable-avdevice \
$ADDITIONAL_CONFIGURE_FLAG

sed -i 's/HAVE_LRINT 0/HAVE_LRINT 1/g' config.h
sed -i 's/HAVE_LRINTF 0/HAVE_LRINTF 1/g' config.h
sed -i 's/HAVE_ROUND 0/HAVE_ROUND 1/g' config.h
sed -i 's/HAVE_ROUNDF 0/HAVE_ROUNDF 1/g' config.h
sed -i 's/HAVE_TRUNC 0/HAVE_TRUNC 1/g' config.h
sed -i 's/HAVE_TRUNCF 0/HAVE_TRUNCF 1/g' config.h

make clean
make  -j4 install

#Old Prebuilt (R8)
$PREBUILT/bin/arm-linux-androideabi-ar d libavcodec/libavcodec.a inverse.o
$PREBUILT/bin/arm-linux-androideabi-ld -rpath-link=$PLATFORM/usr/lib -L$PLATFORM/usr/lib  -soname libffmpeg.so -shared -nostdlib  -z,noexecstack -Bsymbolic --whole-archive --no-undefined -o $PREFIX/libffmpeg.so libavcodec/libavcodec.a libavformat/libavformat.a libavutil/libavutil.a libswscale/libswscale.a -lc -lm -lz -ldl -llog  --warn-once  --dynamic-linker=/system/bin/linker $PREBUILT/lib/gcc/arm-linux-androideabi/4.4.3/libgcc.a
}

#arm v7n
CPU=armv7-a
OPTIMIZE_CFLAGS='-I$PLATFORM/usr/include -mfpu=neon -mfloat-abi=softfp -O3 -fpic -DANDROID -DHAVE_SYS_UIO_H=1 -Dipv6mr_interface=ipv6mr_ifindex -fasm -Wno-psabi -fno-short-enums -fno-strict-aliasing -finline-limit=300'
PREFIX=./android/$CPU 
build_one 
```

使用此选项，在 optimize_cflags, **-mfpu=neon**上，构建失败并出现以下错误：

CP ffprobe STRIP ffprobe INSTALL install-progs-yes INSTALL ffprobe libavcodec/libavcodec.a(fft_fixed_init_arm.o): In function `ff_fft_fixed_init_arm': C:\Arnaud\Private\Android\DVBStream\jni\ffmpeg-0.11.1/libavcodec/arm/fft_fixed_init_arm.c:36: undefined reference to`ff_fft_fixed_calc_neon' libavcodec/libavcodec.a(fft_init_arm.o): In function `ff_fft_init_arm': C:\Arnaud\Private\Android\DVBStream\jni\ffmpeg-0.11.1/libavcodec/arm/fft_init_arm.c:47: undefined reference to`ff_fft_permute_neon' C:\Arnaud\Private\Android \DVBStream\jni\ffmpeg-0.11.1/libavcodec/arm/fft_init_arm.c:47：未定义对“ff_fft_calc_neon”的引用

似乎某些依赖项丢失/未设置。你知道发生了什么/如何用霓虹灯建造吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:02:15.723

Perhaps the libavcodec was not compiled with neon support enabled? This may be a matter of telling autoconf to enable the preprocessor to include the NEON support.

# qt - QListWidget 获取查看项目的列表

> ID：12008350
> 
> 赞同：1
> 
> 时间：2012-08-17T15:06:25.420
> 
> 标签：qt, qlistwidget

假设我有一个包含很多项目的列表小部件。当用户滚动查看更多项目时，我想对正在查看的项目执行操作。是否可以触发事件 itemsViewedChanged(QListWidgetItems *items) 给我当前查看的用户项目？

如果没有，我该如何实现这样的事情？

感谢您的任何回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:24:09.643

我不知道预先存在的方法，但是我在 QTreeWidget 中实现了类似的东西来处理仅可见项目的图标加载，我用于 QListWidget 的一般技术会更简单一些（请原谅语法，我通常使用 PyQt，所以这在 C++ 中可能是关闭的）：

```
QList<QListWidgetItem*> MyListWidget::visibleItems() {
    QList<QListWidgetItem>* output = new QList<QListWidgetItem*>();

    // make sure we have some items
    if ( !this->count() ) {
        return output;
    }

    // calculate the beginning and end items in our range
    QListWidgetItem* minimumItem = this->itemAt(5, 5);
    QListWidgetItem* maximumItem = this->itemAt(5, this->height() - 5);

    if ( !minimumItem ) { minimumItem = this->item(0); }
    if ( !maximumItem ) { maximumItem = this->item(this->count() - 1); }

    // get the start and end rows
    int minimum_row = this->indexForItem(minimumItem)->row();
    int maximum_row = this->indexForItem(maximumItem)->row();

    for (int row = minimum_row; row <= maximum_row; row++) {
        output->append(this->item(row));
    }

    return output;
} 
```

这将为您提供列表小部件的可见项目列表。要在用户编辑时动态检查和修改内容，您可以连接到列表小部件的 valueChanged(int) 和 rangeChanged() 信号。这样，当用户滚动或调整视图大小时，您就会对信号做出反应并收集现在可见的项目列表。

# git - 在 git（或任何其他版本控制系统）中保存什么？

> ID：12008352
> 
> 赞同：0
> 
> 时间：2012-08-17T15:06:30.490
> 
> 标签：git, svn, mercurial, cvs, dspace

我将以 Drupal 作为我的第一个问题的例子。我们有一个带有自定义主题和许多下载模块的 drupal 实例。我们有一个服务器用作源代码仓库。drupal 开发实例上的当前工作流程然后将更改迁移到测试。一旦客户对其进行测试并喜欢这些更改，就会将它们转移到生产环境中。- 我应该将整个drupal dir 放在git 中吗？还是主题+插件？还是只是主题？放置整个实例的一个优点是我可以轻松地克隆 prod 上的更改，并且它看起来与 dev 和 test 相同。

第二个问题是我们什么时候对产品的核心代码进行本地定制（我们以DSpace为例）。我们得到 1.6 版并进行本地更改并将它们保存在我们的存储库中。然后当他们发布 1.7 版时，我必须得到它并将我的本地更改合并到它。我如何获得 1.7？可以进分店吗？

在这些情况下最好的做法是什么。

谢谢。

PS - 我知道 git ignore 以及如何在技术上做到这一点。我正在寻找的是关于最佳实践的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:11:36.030

按重要性排序：

1.  将构建项目所需的所有内容放入 Git 中（即包括构建过程不会自行下载的所有依赖项）
2.  将所有内容放入 Git 以在开发人员机器上运行项目
3.  所有生成的文件（通常用于发现突然的错误 - 也就是“但我没有改变任何东西！”）。这些很好，但可能会令人讨厌，因为它们经常变化。
4.  所有依赖项（因此您可以轻松地重新创建旧版本）

我通常不会将生产版本放入 Git；相反，我有一个脚本，它从项目中创建一个生产站点，以及一个用于部署该站点的上传脚本。这样，我可以在本地运行新的生产版本。并且上传脚本有一个步骤“备份旧文件”，所以我可以在几分钟内恢复旧的生产站点（好吧，除非某些错误损坏了数据库）。

**[编辑]**很多人不同意第 3 点和第 4 点。

首先，（正如我上面已经说过的），这是一个**有序列表**。所以前两点比其他点重要得多。

也就是说，对生成的文件进行版本化仍然很有意义。常见的情况是 IDE 项目设置和代码生成器的输出。

当重新创建它们如此简单时，为什么要对它们进行版本控制？有几个原因：

1.  硬盘空间便宜。如果这可以帮助您在不到一小时的时间内找到错误，则相当于大约 100 美元，即大约 2TB 的磁盘空间。

2.  IDE 项目文件包含编译器设置和其他非常重要的配置。如果您不总是将它们置于版本控制之下，您最终会遇到这种情况：这些文件将在您的[DVCS](https://en.wikipedia.org/wiki/Distributed_revision_control)的忽略列表中。您发现了一个问题（例如应该处于活动状态的重要警告）。你激活警告。**您忘记将更改的文件添加到版本控制。**

    或者：你是团队的一员。一个月后，团队中的每个人都使用不同的选项来构建他们的项目。构建中断是因为某些内容在您的 IDE 中配置为警告，但对其他人来说却是错误。

3.  某些工具生成的代码肯定不应该进行版本控制吗？对代码生成器的配置文件进行版本控制还不够吗？

    也许。问题又来了：您是否必须在此代码中找到错误？即使不是：当文件受版本控制时，很容易看出配置选项的更改意味着什么。您只需更改选项，运行代码生成器并让您的版本工具向您显示更改的内容。当然，您可以手动执行类似的操作，但为什么要为可以免费获得的东西浪费这么多精力呢？

4.  最重要的是，它会导致“虚假的合并冲突”。许多人认为这是一个问题，但事实并非如此。实际上，您会希望看到这些问题，因为这意味着您的构建不稳定：

    1.  您的 VCS 说文件在不应该发生的情况下发生了更改；这不是一个错误，这是一个福音。如果没有版本控制，无论如何都会发生这种变化，**但你不会注意到它。**上一次无知胜于知识是什么时候？
    2.  您一遍又一遍地在一个文件中合并冲突。这表明您的构建或项目设置需要一些爱。再说一遍：解决合并冲突很痛苦。**但是每个开发人员在不注意的情况下**获得自己的文件版本真的更好吗？

# sql-server-2008 - SSIS 的作业验证错误

> ID：12008356
> 
> 赞同：0
> 
> 时间：2012-08-17T15:06:39.787
> 
> 标签：sql-server-2008, ssis

我在我的工作站中创建了一个 SSIS 包。它一直工作到最后一分钟，当我把它移到服务器机器上时（我的两台台式电脑上的 NT 用户都是一样的）

保护级别设置为`EncryptSensitiveWithPassword`。

这是来自作业运行尝试的输出错误。

```
 Error: 2012-08-17 11:57:04.74
   Code: 0xC0202009
   Source: CCTSQLBajadas Connection manager "MyPackage"
   Description: SSIS Error Code DTS_E_OLEDBERROR.  An OLE DB error has occurred. Error code: 0x80040E4D.
An OLE DB record is available.  Source: "Microsoft SQL Server Native Client 10.0"  Hresult: 0x80040E4D  Description: "Login failed for user 'COMPANY\TTP321$'.".
End Error
Error: 2012-08-17 11:57:04.76
   Code: 0xC020801C
   Source: call view populate replace [157] //name of one the steps inside the package.
   Description: SSIS Error Code DTS_E_CANNOTACQUIRECONNECTIONFROMCONNECTIONMANAGER.  The AcquireConnection method call to the connection manager "MyPackage" failed with error code 0xC0202009\.  There may be error messages posted before this with more information on why the AcquireConnection method call failed.
End Error 
```

对我来说奇怪的是这条线，`Login failed for user 'COMPANY\TTP321$`因为 COMPANY 是网络，TTP321 是服务器的主机名。不应该是我的 NT 用户名吗？由于包中使用的连接都在我的用户名下。当然，它不会验证它是否尝试做`COMPANY\TTP321$`

关于包试图使用该特殊用户名在哪里运行的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:47:03.537

COMPANY\TTP321$ 是 SQLAgent 在其下运行的用户 ID，因此您的程序包也以该用户的权限运行。如果您想在您的用户名下运行，您需要在 SQLAgent 中进行设置。

# javascript - 用 \\ 替换 id 中的冒号：

> ID：12008358
> 
> 赞同：1
> 
> 时间：2012-08-17T15:06:43.893
> 
> 标签：javascript, regex, salesforce, visualforce

`id`我正在处理的页面上的's 定义了一组以冒号分隔的字符串（例如`thisPage:theForm:address1content`）。我无法更改这种格式，我正在尝试对`address1content`.

我正在尝试将`id`for传递`address1content`给一个函数并执行 a`replaceAll`并将其替换为`:`，`\\:`这样我就可以执行`$(id)`. 它不工作。

这是我所拥有的：

```
function validateContent(text) {

var hardCoded=$('#thisPage\\:theForm\\:address1content').val();
alert(hardCoded);

var regex = new RegExp(":", 'g');
replacedText = text.replace(regex, '\\:');  
alert(replacedText);
foundElement= $(replacedText).val();
alert(foundElement);    
} 
```

现在该变量`hardCoded`正在正确通过，但我希望能够动态地执行此操作，以便我可以验证多个字段。

如果有帮助，我在小提琴中粘贴了一个简化版本：http: [//jsfiddle.net/nYeJH/](http://jsfiddle.net/nYeJH/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T15:15:19.287

K，因为我的评论实际上回答了这个问题（只需阅读标题，我知道你需要所有冒号前面都有一个双反斜杠），这是我的答案：

```
var foundElement= $(text.replace(/:/g,'\\\\:').val(); 
```

4个反斜杠：第一个转义第二个，第三个转义第四个，冒号仍然是冒号，所以。

也就是说，一旦达到一定数量的子字符串，正则表达式就会相当慢。您应该对此进行基准测试，但使用拆分可能会稍微快一些并且（也许）更容易阅读：

```
var foundElement = $(text.split(':').join('\\\\:')).val();//4 slashes still 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T15:12:52.427

由于我的评论，真正的原因是`#`文本中被遗忘的原因。

[http://jsfiddle.net/nYeJH/6](http://jsfiddle.net/nYeJH/6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T15:16:09.737

`.replace(/:/g,"\\:")`似乎工作得很好（假设你所说的硬编码是真的）。看看这个jsfiddle。

如果硬编码的*实际上*不起作用，并且您确实需要双重转义`:`，请试试这个`.replace(/:/g,"\\\\:")`

[http://jsfiddle.net/SeNy5/](http://jsfiddle.net/SeNy5/)

编辑：既然您有一个我们可以使用的 jsfiddle，我注意到您在 CSS 选择器的开头不小心遗漏了哈希。

# c++ - 访问数组中的元素

> ID：12008359
> 
> 赞同：0
> 
> 时间：2012-08-17T15:06:45.920
> 
> 标签：c++, mfc

我正在执行数组返回：

```
CStringArray & CQueue:: GetUsed()
{
   return  m_Used;
} 
```

而不是将此返回值存储在数组中并访问每个元素：

```
CStringArray lastUsed;
lastUsed.Append(m_Queue.GetUsed());
CString a = lastUsed.ElementAt(1); 
```

有没有一种方法可以让我直接在这样的位置访问元素？

```
CString a = (m_Queue.GetUsed()).ElementAt(2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:11:02.837

使用`GetAt`功能

```
CString CStringArray::GetAt( int <nIndex> ) const; 
```

例如：

```
CStringArray arr;
arr.Add(L"test");
arr.Add(L"ing");
cout << arr.getAt(0) << arr.getAt(1) << endl; 
```

输出：

```
testing 
```

# iphone - iOS：为什么我不能将 nil 设置为 NSDictionary 值？

> ID：12008365
> 
> 赞同：47
> 
> 时间：2012-08-17T15:07:09.337
> 
> 标签：iphone, ios, nsdictionary, null

这可能是一个非常基本的问题，但我想知道为什么我不能将 nil 分配为 NSDictionary 值？我的代码中有很多地方都有以下声明。如果`[q objectForKey:@"text"]`为 nil，则 App 正在崩溃。

```
NSMutableDictionary *dict = [[NSMutableDictionary alloc] initWithCapacity:2];
[dict setObject:[q objectForKey:@"text"] forKey:@"text"]; 
```

在将零分配给字典之前，我必须到处检查零。这是唯一正确的做法吗？我错过了一些明显的东西吗？

```
if([q objectForKey:@"text"] != nil)
    [dict setObject:[q objectForKey:@"text"] forKey:@"text"];
else
    [dict setObject:@"" forKey:@"text"]; 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-08-17T15:09:07.290

它想要一个实际的对象......使用[NSNull](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNull_Class/Reference/Reference.html)

```
[NSNull null]; 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-08-17T15:12:36.420

## 您*可以*使用设置 nil 值，`setValue:forKey`但它会删除密钥。

如果您希望能够设置一个密钥，`nil`您可以使用[`setValue:forKey:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsmutabledictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMutableDictionary/setValue:forKey:)which 将删除密钥，如果您将其设置为`nil`（引用以下文档）。注意**值**而不是对象。

> ## `setValue:forKey:`
> 
> 将给定的键值对添加到字典中。
> 
> ```
> ... 
> ```
> 
> **讨论**
> 
> 此方法使用 向字典添加值和键`setObject:forKey:`，除非`nil`在这种情况下，该方法尝试使用 删除键`removeObjectForKey:`。

当您稍后尝试通过将对象[`objectForKey:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/objectForKey:)设置为您删除的密钥来获取对象时，`nil`您将得到`nil`返回（引用以下文档）。

> **返回值：**
> 
> 与 aKey 关联的值，如果没有与 aKey 关联的值，则为 nil。

*注意：该键实际上不会出现在字典中，因此不会使用`allKeys`;获取它。或一一列举。*

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-01-05T10:46:20.343

您可以通过这种方式设置 nil 对象：

```
NSMutableDictionary *dictionary = [NSMutableDictionary dictionary];

dictionary[@“key”] = nil; 
```

你注意到了吗？

```
NSMutableDictionary *dictionary = [NSMutableDictionary dictionary];

/* this statement is safe to execute    */

dictionary[@“key”] = nil;

/* but this statement will crash application    */

[dictionary setObject:nil forKey:@"key"]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-25T07:10:51.923

使用此方法时：

```
func setObject(_ anObject: Any, forKey aKey: NSCopying) 
```

参数（*根据 Apple 文档*）：

**一个对象**：

> 如果 anObject 为 nil，则引发 invalidArgumentException。如果您需要在字典中表示 nil 值，请使用 NSNull 。

**关键**

> 如果 aKey 为 nil，则引发 invalidArgumentException。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T15:15:48.530

我的朋友使用 nil 作为标记是不良编程的标志。nil 保留用于某些不同的目的。

```
if([q objectForKey:@"text"] != nil)
    [dict setObject:[q objectForKey:@"text"] forKey:@"text"];
别的
    [dict removeObjectforKey:@"text"]; // 如果 key 不存在，这将不做任何事情。

```

//默认情况下，所有键的值都是 nil 并且您正在尝试覆盖此行为。违反语言规则总是会给你带来麻烦。

检查只是使用

```
if([dict objectforKey:@"text"] !=nil){} // 这将起作用，因为默认值为 nil
本身

```

# c# - 用于通过 LAN 访问的主机服务 Visual Studio 开发服务器

> ID：12008366
> 
> 赞同：2
> 
> 时间：2012-08-17T15:07:10.787
> 
> 标签：c#, wcf, lan

我正在尝试托管服务并通过本地网络访问它。

这是我的 app.config 的一部分：

```
 <client>
        <endpoint address="net.tcp://<my IP>:49770/Service1.svc"
            binding="netTcpBinding" contract="ServiceReference1.IService1"
            name="LAN" />
        <endpoint address="http://localhost:49770/Service1.svc" binding="basicHttpBinding"
            bindingConfiguration="BasicHttpBinding_IService1" contract="ServiceReference1.IService1"
            name="BasicHttpBinding_IService1" />
    </client> 
```

如果我在一台机器上工作，本地主机端点工作得很好，但局域网端点不起作用。这是我用来通过 LAN 端点连接的代码。

```
 ServiceReference1.Service1Client client = new
           ServiceReference1.Service1Client("LAN"); 
```

我读了这篇文章，但它仍然不起作用：

[如何在局域网内连接到 WCF Web 服务](https://stackoverflow.com/questions/6086731/how-to-connect-to-wcf-web-service-inside-lan)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:09:17.537

开发服务器不能接受远程连接。您必须为此使用适当的 IIS 实例。

# java - 无法使用 CertPathBuilder 构建 CertPath

> ID：12008370
> 
> 赞同：2
> 
> 时间：2012-08-17T15:07:28.243
> 
> 标签：java, cryptography

我正在尝试使用 Java从用户证书和 CA 证书`CertPathBuilder`创建，但我收到`CertPath`

```
Exception in thread "main" sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:174)
    at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:238)
    at CertPathBuilderTest.main(CertPathBuilderTest.java:63) 
```

当我启用了吊销检查（使用`.setRevocationEnabled(true)`）。所以看起来 Java 拒绝证书或 CRL，即使我可以使用 OpenSSL 和 gnupg 毫无问题地验证它们。

CA 结构是最简单的：只有 CA 签名证书和 CRL，没有中间 CA。

有问题的证书：[cacerts.jks](http://lin-q.qbs.com.pl/~hka/cacerts.jks)和[private.jks](http://lin-q.qbs.com.pl/~hka/private.jks)

示例程序：

```
import java.io.BufferedInputStream;
import java.io.FileInputStream;
import java.io.IOException;
import java.net.URL;
import java.security.InvalidAlgorithmParameterException;
import java.security.KeyStore;
import java.security.KeyStoreException;
import java.security.NoSuchAlgorithmException;
import java.security.cert.CRL;
import java.security.cert.CRLException;
import java.security.cert.CertPath;
import java.security.cert.CertPathBuilder;
import java.security.cert.CertPathBuilderException;
import java.security.cert.CertPathBuilderResult;
import java.security.cert.CertStore;
import java.security.cert.CertificateException;
import java.security.cert.CertificateFactory;
import java.security.cert.CollectionCertStoreParameters;
import java.security.cert.PKIXBuilderParameters;
import java.security.cert.X509CRL;
import java.security.cert.X509CertSelector;
import java.security.cert.X509Certificate;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Date;

public class CertPathBuilderTest {

/**
 * @param args
 * @throws IOException 
 * @throws CertificateException 
 * @throws NoSuchAlgorithmException 
 * @throws KeyStoreException 
 * @throws CRLException 
 * @throws InvalidAlgorithmParameterException 
 * @throws UnexpectedJCAException 
 * @throws SigningCertChainException 
 * @throws CertPathBuilderException 
 */
public static void main(String[] args) 
        throws KeyStoreException, NoSuchAlgorithmException, CertificateException, IOException, CRLException, InvalidAlgorithmParameterException, CertPathBuilderException
{
    // TODO Auto-generated method stub
    // keytool -importcert -file CA.pem -keystore cacerts.jks -storepass changeit
    KeyStore trustAnchors = loadJKSKeyStore("cacerts.jks", "changeit");
    KeyStore myKeyStore = loadJKSKeyStore("private.jks", "changeit");

    String crlLocation = "http://crl.qbs.com.pl/QBSJanKuban.crl";
    X509CRL crl = downloadCRL(crlLocation);

    CertStore cs = otherCertificatesCertStore(trustAnchors, myKeyStore, crl);
    ///*
    CertPathBuilder cpb = CertPathBuilder.getInstance("PKIX");
    X509CertSelector certSelector = new X509CertSelector();
    certSelector.setCertificate((X509Certificate) myKeyStore.getCertificate("mykey"));
    PKIXBuilderParameters cpp = new PKIXBuilderParameters(trustAnchors, certSelector);
    cpp.addCertStore(cs);
    cpp.setRevocationEnabled(true);
    cpp.setMaxPathLength(6);
    cpp.setDate(new Date());

    CertPathBuilderResult a = cpb.build(cpp);
    CertPath certPath = a.getCertPath();
}

private static KeyStore loadJKSKeyStore(String path, String password)
    throws KeyStoreException,
    NoSuchAlgorithmException, CertificateException, IOException
{
    FileInputStream fis = new FileInputStream(path);
    KeyStore ks = KeyStore.getInstance("jks");
    ks.load(fis, password.toCharArray());
    fis.close();
    return ks;
}

private static X509CRL downloadCRL(String crlLocation)
        throws IOException, CertificateException, CRLException
{
    URL crlURL = new URL(crlLocation);
    BufferedInputStream in = new BufferedInputStream(crlURL.openStream());

    CertificateFactory cf = CertificateFactory.getInstance("X.509");
    CRL crl = cf.generateCRL(in);

    return (X509CRL) crl;
}

private static CertStore otherCertificatesCertStore(KeyStore trustAnchors,
        KeyStore myCerts, X509CRL... crl)
        throws InvalidAlgorithmParameterException, NoSuchAlgorithmException, KeyStoreException
{

    CertStore cs;

    Collection<Object> contentList = new ArrayList<Object>();
    contentList.add(trustAnchors.getCertificate("qbsca"));
    contentList.add(myCerts.getCertificate("mykey"));
    for (int i=0; i < crl.length; i++) {
        contentList.add(crl[i]);
    }
    cs = CertStore.getInstance("Collection", new CollectionCertStoreParameters(contentList));

    return cs;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:53:22.353

问题是由 SUN 和 BC 加密提供程序中的错误（？）引起的。

当用户证书不仅`CRL Distribution Point`以 URI 的形式指定，而且`CRL Issuer`CertPathBuilder 无法验证 CRL 的有效性，整个过程失败。

解决方法是创建缺少此扩展的证书。

# mobile - 学习移动应用程序编程的最佳方式？

> ID：12008374
> 
> 赞同：-5
> 
> 时间：2012-08-17T15:07:36.923
> 
> 标签：mobile

我正在阅读一个名为 SkyBuilder.net 的网站，您可以在其中构建 Android 和 iPhone 应用程序。恐怕这对我来说有点太基础了。有人可以离开我最好的地方来真正学习如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:15:34.853

斯坦福大学有一门很棒的 iPhone 开发课程。[您可以在此处](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/downloads-2011-fall)查看讲义和作业和/或在[此处](http://itunes.apple.com/itunes-u/ipad-iphone-application-development/id473757255?mt=10)观看讲座。他们的[主要 iTunes U 页面](http://itunes.stanford.edu/)是一个指南/门户，用于设置所有内容以观看讲座。

我强烈建议您利用顶级计算机科学学校在线提供的课程供所有人查看。它不会花费您任何金钱，并且您在此过程中获得了很多知识。

# javascript - 在 JavaScript 中，当我们实例化派生对象时，原型的函数隐藏在哪里？

> ID：12008376
> 
> 赞同：1
> 
> 时间：2012-08-17T15:07:41.193
> 
> 标签：javascript, inheritance, prototypal-inheritance

我目前正试图弄清楚原型继承在 JavaScript 中是如何工作的。这是我目前试图解决的谜团。

假设我们设置了以下结构：

```
var base = { greet : "hello" }

var child = function () {}

child.prototype = base;
child.prototype.protoSomething = function () {}

var instance = new child(); 
```

没有什么花哨。现在让我们看看`instance`属性（拥有或其他）有什么：

```
for(prop in instance) {
    console.log(prop); // prints 'greet', 'protoSomething'
} 
```

好的，所以它有`greet`，`protoSomething`他们`instance`是自己的成员吗？

```
for(prop in instance) {
    if(instance.hasOwnProperty(prop))
        console.log(prop); // nothing is printed
} 
```

不，自己的财产清单是空的。它们在`instance`的原型中吗？

```
if(instance.prototype === undefined) {
    console.log("'instance' has no prototype"); // gets printed
} 
```

好吧，真可惜，`instance`没有分配原型。那么，如果这些属性不是*自己的*并且没有原型，那么它们是从哪里来的呢？在这一点上，我觉得某种图表会非常好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T15:11:05.683

只有函数具有属性 `prototype`。

```
instance.constructor.prototype === base // return true 
```

要获取对象的原型，您应该使用[Object.getPrototypeOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/GetPrototypeOf)方法。

```
Object.getPrototypeOf(instance) === base // return true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T15:17:08.283

此页面应该可以帮助您：

[http://joost.zeekat.nl/constructors-considered-mildly-confusing.html](http://joost.zeekat.nl/constructors-considered-mildly-confusing.html)

简而言之，实例的“幕后”原型（通过创建`new`）无法以任何方式访问，因此它返回`undefined`。`.prototype`当您尝试检索它时，只有构造函数（您在其上手动设置了属性）才会返回任何内容。

# iphone - 核心数据：实例化后谓词为零

> ID：12008379
> 
> 赞同：0
> 
> 时间：2012-08-17T15:07:53.000
> 
> 标签：iphone, ios5, core-data, iphonecoredatarecipes

我有一个带有简单核心数据模式的 iOS 程序： ![创建数据架构](../Images/6724b873b6f77fd948f38a59d688da5d.png)

并进入我喜欢获得第一点和最后一点的方法，因此我将这段代码用于最后：

```
NSFetchRequest * lastPointFetch = [[NSFetchRequest alloc] init];
[lastPointFetch setEntity:[NSEntityDescription entityForName:@"PointsForTrack"
                                 inManagedObjectContext:appDelegate.managedObjectContext]];
NSPredicate * pred = [NSPredicate predicateWithFormat:@"ALL Track == %@", ((Track*)self.detailItem)];
[lastPointFetch setPredicate:pred];
[lastPointFetch setFetchLimit:(NSUInteger)1];

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"timestamp" ascending:NO];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];

[lastPointFetch setSortDescriptors:sortDescriptors];

NSArray *fetchResults = [appDelegate.managedObjectContext executeFetchRequest:lastPointFetch
                                                                            error:&error];
if ([fetchResults count]>0){
    PointsForTrack *result = [fetchResults objectAtIndex:0];
    NSLog(@"Point in track: %@", [dateFormat stringFromDate:result.timeStamp]);
} 
```

但这是我上帝形式框架的错误：

```
2012-08-17 17:00:59.992 TrackMe[16799:907] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Unsupported predicate (null)' 
```

*** First throw call stack: (0x376ef6c3 0x3996897f 0x3582558f 0x358252b5 0x35824ecd 0x35824647 0x35824111 0x35823529 0x35821e23 0x3d56d 0x3cf63 0x3d0d5 0x391258d5 0x39131d75 0x39131a81 0x39120163 0x3911fe03 0x39180abd 0x39203529 0x371e4aaf 0x376c49ff 0x376c46b1 0x376c3321 0x3763639d 0x37636229 0x35feb31b 0x391128f9 0x3a661 0x39ad0b20) libc++abi.dylib: terminate called throwing an例外

知道为什么会这样吗？

感谢先进

更新：我已经打印了 NSPRedicate 的描述并记录了所有内容：

```
2012-08-17 20:59:39.081 TrackMe[8126:c07] NSPredicate ALL track == <Track: 0x778f6b0> (entity: Track; id: 0x778e0d0 <x-coredata://58DE6A89-8060-4D63-90DD-C31A09F53C79/Track/p1> ; data: {
creationDate = "2012-08-17 18:56:23 +0000";
inAcquisition = nil;
name = "New Track";
points = "<relationship fault: 0x77953f0 'points'>"; 
```

}) 2012-08-17 21:00:04.679 TrackMe[8126:c07] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“不支持的谓词（null）”***第一次抛出调用堆栈：（0x1b41552 0x1477e7e 0x118c8f9c 0x118c312 0x118 0x118beb5 0x118b697 0x118b184 0x118a2fd 0x1188259 0x6a19 0x61e0 0x6414 0x1a2c2c 0x1a2f5b 0x1b0a20 0x1b8a0d 0x1b92fb 0x1b98f3 0x1b94e8 0x513643 0x505379 0x5053f4 0x16f019 0x16f2bd 0xb6fef3 0x1b00956 0x1b003e6 0x1ae8042 0x1ae7504 0x1ae73db 0x1a9b823 0x1a9b6a8 0xc018c 0x2a4d 0x2975) libc++abi.dylib: terminate called throwing an exception

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:31:48.713

`NSPredicate`如果您弄乱了谓词字符串，则实例化后可以为 nil。

查看您的谓词，我可以看到您使用`Track`的是大写 T。但是，您的关系有一个小写的“t”。

那么，如果你使用谓词字符串，你会得到什么`@"ALL track == %@"`？

其次，你真的需要做这个查询吗？是否可以仅从您已有的参考中导航`points`关系？`(Track*)self.detailItem`（诚​​然，您通过 NSPredicate 方式进行排序。只是需要考虑的事情。）

# ruby-on-rails - has_one 与 has_many 有何不同？

> ID：12008383
> 
> 赞同：1
> 
> 时间：2012-08-17T15:08:12.730
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我有两个模型：

```
class Product < ActiveRecord::Base
  attr_accessible :amount, :name, :unit, :description, :stock, :limit
  has_many :cart_rows
  has_one :inquery
end 
```

和

```
class Inquery < ActiveRecord::Base
  attr_accessible :product, :text, :phone, :zip, :product_id, :state, :street, :city
  belongs_to :product
end 
```

在我的查询索引视图中，我有：

```
<% @inqueries.each do |inquery| %>
  <%= inquery.product.name %>
  <%= inquery.text %>
<% end %> 
```

我收到以下错误：`undefined method 'name' for nil:NilClass`

我究竟做错了什么？行为是否`has_one`不同于`has_many`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:14:05.227

不，你应该可以打电话`inquery.product`。您可能有一个没有产品的查询。

在控制台 ( `rails c`) 中，运行: `Inquery.where(product_id: nil)`，看看你是否得到结果。

您应该在 Inquery 模型中验证产品的存在：

```
validates :product, presence: true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T15:14:06.757

您有一个未附加产品的 Inquery。

当您调用时，`inquery.product`您将返回一个 nil 值，然后当您调用`.name`该 nil 值时，您会收到错误消息。这与 has_one 或 has_many 无关

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T15:28:36.090

我根据您在此处描述的信息构建了一个应用程序，并且能够通过使用带有 nil 产品值（也适用于文本）的 Inquery 记录来重现您的问题。您可能希望添加更好的验证器，以便无法保存带有 nil 的查询。

这是我的 rails 控制台会话中的粘贴：

```
 Inquery Load (0.1ms)  SELECT "inqueries".* FROM "inqueries" 
#<Inquery:0x00000002c03e40>
 => [#<Inquery id: 1, text: nil, phone: nil, zip: nil, product_id: nil, state: nil, street: nil, city: nil, created_at: "2012-08-17 15:23:49", updated_at: "2012-08-17 15:23:49">] 

1.9.3p194 :002 > Inquery.all.each { |n| puts n.product.name }
  Inquery Load (0.2ms)  SELECT "inqueries".* FROM "inqueries" 
NoMethodError: undefined method `name' for nil:NilClass 
```

顺便说一句，现在提供一些不请自来的建议：与关键字“文本”同名的字段是一个非常糟糕的主意。你今天可能不会在脚下开枪，但在某个时候你会。考虑将文本字段重命名为 usertext 或 description 或类似的东西。

# c++ - 一种读取 ASCII 文件的有效方法

> ID：12008384
> 
> 赞同：1
> 
> 时间：2012-08-17T15:08:14.120
> 
> 标签：c++, c

我正在开发一个处理相当大（4-5 MB）的矩阵形（存储为 N*M 行和列的数值）ASCII 文件的小程序：

```
1 2 3
4 5 6
7 8 9
etc. 
```

我注意到旧式 C 文件输入法：

```
csFile = fopen("file.dat","r");
while(fscanf(csFile, "%lf", &Point)!=EOF) {
}
fclose(csFile); 
```

比最基本的 C++ 实现快得多（230 毫秒，而 3MB 文件存储大约 230k 数值的约 1500 毫秒）：

```
ifstream myfile ("file.dat");
while(myfile >> Point) {
}
myfile.close(); 
```

为简单起见，我省略了循环内的数据操作函数，但即使是这些“裸”示例也显示了 C 类型 I/O 的几乎七倍增强。为什么会有如此巨大的性能差异？有没有更快的方法来使用 C++ 流/函数来读取这些类型的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T17:37:28.163

如果您看到 C 和 C++ 代码之间存在如此巨大的差异，我怀疑您没有进行优化编译。尝试使用`-O3`或您的编译器需要启用优化的任何标志。衡量未优化代码的速度通常是没有意义的，因为它比代码的复杂性更能告诉你语言的复杂性。特别是 C++ 非常依赖优化来获得合理的性能。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-17T17:58:54.423

它可能与缓冲区有关，请尝试通过函数为您的 ifstream 设置足够的缓冲区：

[文件.rdbuf()->pubsetbuf()](http://www.cplusplus.com/reference/iostream/streambuf/pubsetbuf/)

这将减少磁盘 IO 和系统调用。（以批处理模式读取）

# javascript - 动画文本阴影淡入和淡出

> ID：12008385
> 
> 赞同：5
> 
> 时间：2012-08-17T15:08:19.583
> 
> 标签：javascript, jquery, animation, jquery-animate

我正在尝试使用此处共享的代码段为文本阴影设置动画以淡入淡出：

[使用 jQuery 为 text-shadow 元素设置动画](https://stackoverflow.com/questions/2226906/animating-elements-of-text-shadow-with-jquery)

我的代码本质上是：

```
$.fx.step.textShadowBlur = function(fx) {
    $(fx.elem).css({textShadow: '0 0 ' + Math.floor(fx.now) + 'px white'});
};

$("#seconds").animate({textShadowBlur:20}, {duration: 300, complete: function() { 
    $("#seconds").animate({textShadowBlur:0}, {duration: 300}); 
}}); 
```

我遇到的问题是“淡出”部分似乎不起作用。阴影模糊仅增加到 20，然后“重置”为 0。

jsfiddle的问题：http: [//jsfiddle.net/ANs92/](http://jsfiddle.net/ANs92/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T23:18:51.233

您需要将正在制作动画的属性的当前状态存储在元素的属性中。否则 $.animate 将在每次动画开始时假定该属性为 0。从 0 到 0 的动画将不会产生任何动画。

这样它将起作用：

```
$.fx.step.textShadowBlur = function(fx) {
    $(fx.elem)
        .prop('textShadowBlur', fx.now)
        .css({textShadow: '0 0 ' + Math.floor(fx.now) + 'px black'});
};

setInterval(function() {
    $("#seconds").animate({textShadowBlur:20}, {
        duration: 300,
        complete: function() { 
            $("#seconds").animate({textShadowBlur:0}, {duration: 300}); 
        }
    });
}, 1000); 
```

工作示例：http: [//jsfiddle.net/ANs92/16/](http://jsfiddle.net/ANs92/16/)

请注意：使用 setInterval 时可能会遇到问题：http: [//bonsaiden.github.com/JavaScript-Garden/#other.timeouts](http://bonsaiden.github.com/JavaScript-Garden/#other.timeouts) --> Stacking Calls with setInterval

setInterval 在发出下一个调用之前*不会*等待第一个调用完成，因此调用可能会堆积。

# javascript - 从另一个页面链接到手风琴的一部分

> ID：12008389
> 
> 赞同：21
> 
> 时间：2012-08-17T15:08:35.857
> 
> 标签：javascript, jquery, html, twitter-bootstrap

我正在使用 twitter-Bootstrap 2.04，并且我正在使用最新的 jQuery。我正在尝试创建一个链接，该链接将从一个页面转到包含此手风琴的页面，然后激活相应的手风琴部分。这是手风琴：

```
 <div class="accordion-group">
          <div class="accordion-heading">
            <a name="Alink1" class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
            <strong>Title</strong>
            </a>
          </div>
          <div id="collapseOne" class="accordion-body in collapse" style="height: auto; ">
            <div class="accordion-inner">
             some random content
            <div>
          </div>
 </div>
 <div class="accordion-group">
          <div class="accordion-heading">
            <a name="Alink2" class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
            <strong>Title 2</strong>
            </a>
          </div>
          <div id="collapseTwo" class="accordion-body collapse" style="height: 0px; ">
            <div class="accordion-inner">
             some random content 2
            <div>
          </div>
 </div> 
```

这是链接：

```
 <a href="page.html/#Alink2">Link to some interesting stuff</a> 
```

链接到页面中的某个位置通常可以正常工作，我需要使用 Javascript 来激活它吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-17T15:48:42.043

是的，您需要在页面加载时手动激活它。像下面这样的东西应该可以工作：

```
$(document).ready(function () {
  location.hash && $(location.hash + '.collapse').collapse('show');
}); 
```

此外，正如@SaadImran 指出的那样，这假设您链接到可折叠元素 id（例如，`#collapseTwo`）而不是锚中的名称（例如，`#Alink2`）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-05T18:57:24.350

谢谢你的帮助。
我添加了功能，以便代码可以在 Accordions 内打开 Accordions：

```
$(document).ready(function () {
  if (location.hash){
    $(location.hash).collapse('show');
    $(location.hash).parents('.accordion-body').collapse('show');
  }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-09T13:29:52.557

您可以使用手风琴部分的位置。以下链接打开了 twitter bootstrap (wordpress) 手风琴的第三个手风琴部分。

链接示例：[http ://www.zfp-bauwesen.de/leistungen/ubersicht#3](http://www.zfp-bauwesen.de/leistungen/ubersicht#3)

Javascript代码：

```
$( document ).ready(function() {

 if (window.location.hash) {
   var AccordionSectionNumber = window.location.hash.substring(1);
   AccordionBodyID = $(".accordion .accordion-group:nth-of-type(" + AccordionSectionNumber + ") .accordion-heading a").attr('href')
      if (! (typeof AccordionBodyID === "undefined")) {
        $(AccordionBodyID).collapse('show');
        return true;
      }
    }

}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T15:14:06.207

你有没有试过这个：

```
<a href="page.html#Alink2">Link to some interesting stuff</a> 
```

# django - Django 用户注册 url 重定向损坏

> ID：12008396
> 
> 赞同：-1
> 
> 时间：2012-08-17T15:08:59.227
> 
> 标签：django, authentication

我的用户注册流程已中断。我有以下代码`views.py`，但收到 no user.url 属性错误（包含在视图代码下方）。用户正在正确创建，我可以导航到新的用户个人资料页面，但链接已损坏。我找不到有关默认用户 URL 调用的信息。

你能帮我吗？

视图.py

```
def register(request):
    if request.method == 'POST':
        form = UserCreationForm(request.POST)
        if form.is_valid():
            new_user = form.save()
            new_user = authenticate(username = request.POST['username'],
                                    password = request.POST['password1'])
            login(request, new_user)
            return HttpResponseRedirect(new_user.url)
    else:
        form = UserCreationForm()
    return render_to_response("registration/register.html", {'form': form},
                              context_instance=RequestContext(request)) 
```

错误：

```
AttributeError at /register/
'User' object has no attribute 'url'
Request Method: POST
Request URL:    http://localhost:8000/register/
Django Version: 1.4.1
Exception Type: AttributeError
Exception Value:    
'User' object has no attribute 'url'
Exception Location: /home/methuselah/code/django/ssc/dev/ssc/crewcal/views.py in register, line 74 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T16:01:43.607

如果你*真的*想为你的用户定义一个 URL，但继续使用用户`django.contrib.auth`而不是创建一个新模型，你需要在你的[`settings.ABSOLUTE_URL_OVERRIDES`](https://docs.djangoproject.com/en/dev/ref/settings/#absolute-url-overrides):

```
ABSOLUTE_URL_OVERRIDES = {
    'auth.user': lambda u: '/users/%s/' % u.id
} 
```

完成此操作后，您将能够`user.get_absolute_url()`在用户`/users/<id>/`注册后将其重定向到。

如果你想添加额外的配置文件`User`，你需要创建一个配置文件模型——此时将它们链接到那里是有意义的，而不是覆盖`User`的 get_absolute_url。[当您为用户提供 Profile 模型时， Nick 的回答](https://stackoverflow.com/a/12008764/240418)会更适合您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T15:32:38.560

用户对象没有 url。如果您想为每个用户设置一个 url，您需要创建一个与用户模型相关的附加模型。

```
class UserAttribute(models.Model):
    user = models.OneToOneField(User)
    url = models.URLField(verify_exists=False, default="/home/page/")

    def __unicode__(self):
        return self.user.username 
```

我不知道你为什么要为每个用户设置一个唯一的 url，因为`request.user`一旦他们登录，你就可以在每个请求上检索用户。

所以你可能只想做：

```
return redirect('/profile/') 
```

并编写另一个视图来处理配置文件的显示。如果没有有关您要完成的工作的更多信息，很难回答。

# objective-c - iOS：卸载和弹出视图控制器

> ID：12008400
> 
> 赞同：0
> 
> 时间：2012-08-17T15:09:12.657
> 
> 标签：objective-c, ios

我有一个应用程序，其中有几个视图控制器在最后阶段之前相互叠加，用户“保存”他在阶段中输入的所有数据。在输入数据阶段，允许用户返回并更改一些数据。但是我想释放一些数据结构，因为它们消耗大量内存。我无法在此期间释放它，`viewdidunload`因为它仅在设备内存不足时才被调用。我也无法发布它，`viewDidDisappear`因为如果用户想要返回并更改内容，数据将不存在。

我认为这样做的方法是设置指向前一个视图控制器的指针`viewcontrollers`，然后在指向前一个视图控制器的指针上调用释放函数来释放东西。

我该怎么做呢？

我想我放了类似的东西

```
#import "SomeViewController.h"

@property SomeViewController someViewController; 
```

在`.h`文件中？我不知道从这里去哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:18:50.017

如果您使用的内存过多，系统会以比任何 DIY 系统更有效的方式为您处理。这就是为什么首先出现内存警告、ARC、池和所有其他好东西的原因。因此，我会建议您不要尝试完成什么，并相应地处理内存警告。顺便说一句，请注意将数据存储在视图控制器中并不是一个好习惯，您应该将数据结构保存在单独的对象中（如 MVC 建议的那样）。例如，您可以将数据保存在单例对象中，您可以从每个视图控制器访问该对象，这样您还可以释放不再需要的内存，而无需保留指向所有 VC 链的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:18:29.297

这取决于您要保存的数据类型。我会在 iOS 中提升数据存储的层次结构。看看 NSUserDefaults 是否会帮助你（从你的问题的性质来看，我认为这不会有帮助）。然后尝试 SQLite。然后去核心数据。根据数据的性质，也许您也可以尝试将数据存储在文件中。如果您可以在单独的类中使用静态方法来处理在您导航关卡时保存所有这些中间数据，那将是非常棒的。保存最终数据后，删除所有临时存储空间即可。

哦，使用这种技术的另一个好处是“从你之前停止的地方继续”，以防用户出于某种原因决定终止你的应用程序并重新启动它，或者你的应用程序意外崩溃。在这种情况下，请检查导航已完成的级别并从那里继续。

# asp.net-mvc-3 - 从 Web 应用程序访问时 Silverlight 4 AutomationFactory.CreateObject 异常

> ID：12008403
> 
> 赞同：0
> 
> 时间：2012-08-17T15:09:43.983
> 
> 标签：asp.net-mvc-3, visual-studio-2010, silverlight-4.0

我编写了一个 SilverlIght 4 项目，用于与客户端文档扫描仪交互并从设备扫描文档。

当我运行 silverligth 项目时，这运行得很好。

但是当我将此 Silverlight 添加到我的 Web 应用程序时。我收到这个错误

> 当前上下文不支持此操作。

当我调试时，我注意到问题出在

```
 dynamic wiaDialog = AutomationFactory.CreateObject("WIA.CommonDialog"); 
```

对于任何**AutomationFactory.CreateObject();** 它失败了。

不确定，如何解决这个问题，我在网上查看了每个人都在谈论 OOB 设置，我已经正确配置了所有这些设置。

任何建议将是一个很好的治疗。

平台：Silverlight 4、VS2010、ASP.Net MVC 3.0 剃须刀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:44:25.980

要在 Web 浏览器中使用自动化工厂，您需要在客户端计算机上启用此功能，请参阅 MSDN [How to: Enable Trusted Applications to Run Inside the Browser](http://msdn.microsoft.com/en-us/library/gg192793%28v=vs.95%29.aspx)上的链接。但这仅适用于 SL5。只有在安装应用程序（OOB 模式）时才能使用 SL4 自动化工厂，请参阅另一个链接[如何：在受信任的应用程序中使用自动化](http://msdn.microsoft.com/en-us/library/ff457794%28v=vs.95%29.aspx)：

> 在 Silverlight 4 和更早版本中，受信任的应用程序还必须在浏览器之外运行。从 Silverlight 5 开始，系统管理员可以让受信任的应用程序在浏览器中运行。

# android - Android - 兼容库 v4 异常 (EdgeEffect) java.lang.NoClassDefFoundError: > android.widget.EdgeEffect

> ID：12008410
> 
> 赞同：3
> 
> 时间：2012-08-17T15:09:56.777
> 
> 标签：android, android-layout

如果有帮助，我也在使用 SherlockActionBar。

触发此异常的行是：`setContentView(R.layout.activity);`

我正在使用的课程 `extends SherlockFragmentActivity`

应用程序名称是 com.testapp.androidapp

类是：com.testapp.androidapp.SwipeyTabsActivity。

我已经在几部手机上尝试过这个应用程序，除了在这台设备上，Nexus S 之外，所有设备都可以工作。虽然所有设备都报告了 Android 的实际版本号（4.0.1、2.3.3），但这是唯一的设备具有命名版本 (IceCreamSandwich)。

问题是，如何确保不会发生此错误？如果有帮助，我不需要效果（EdgeEffect）。

这些是我的进口：

```
import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.SherlockFragmentActivity;

import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.os.SystemClock;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;

import android.support.v4.view.ViewPager;

import android.view.LayoutInflater;
import android.view.MotionEvent;
import android.view.Window;

import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuInflater;
import com.actionbarsherlock.view.MenuItem;
import com.actionbarsherlock.view.MenuItem.OnActionExpandListener;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.inputmethod.InputMethodManager;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.RelativeLayout;
import android.widget.TextView;
import android.widget.Toast; 
```

这个异常的总结是：

> 引起：java.lang.NoClassDefFoundError: android.support.v4.widget.EdgeEffectCompatIcs.newEdgeEffect(EdgeEffectCompatIcs.java:30) 在 android.support.v4.widget.EdgeEffectCompat$EdgeEffectIcsImpl.newEdgeEffect(EdgeEffectCompat. java:92) 在 android.support.v4.widget.EdgeEffectCompat.(EdgeEffectCompat.java:133) 在 android.support.v4.view.ViewPager.initViewPager(ViewPager.java:290)

完整的 StackTrace：

> java.lang.RuntimeException：无法启动活动 ComponentInfo{com.testapp.androidapp/com.testapp.androidapp.SwipeyTabsActivity}：android.view.InflateException：二进制 XML 文件第 22 行：膨胀类 android.support.v4.view 时出错.ViewPager at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1859) at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1875) at android.app.ActivityThread.access$600(ActivityThread.java:122) at android .app.ActivityThread$H.handleMessage(ActivityThread.java:1062) 在 android.os.Handler.dispatchMessage(Handler.java:99) 在 android.os.Looper.loop(Looper.java:137) 在 android.app。 ActivityThread.main(ActivityThread.java:4215) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 java.lang.reflect.Method.invoke(Method.java:511) 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 在 dalvik.system.NativeStart.main （本机方法）由以下原因引起：android.view.InflateException：二进制 XML 文件第 22 行：在 android.view.LayoutInflater.createView(LayoutInflater.java:606) 的 android.view.LayoutInflater.createView(LayoutInflater.java:606) 处膨胀类 android.support.v4.view.ViewPager 时出错。 view.LayoutInflater.createViewFromTag(LayoutInflater.java:680) at android.view.LayoutInflater.rInflate(LayoutInflater.java:739) at android.view.LayoutInflater.inflate(LayoutInflater.java:489) at android.view.LayoutInflater.inflate (LayoutInflater.java:396) 在 android.view.LayoutInflater.inflate(LayoutInflater.java:352) 在 com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:244) 在 com.actionbarsherlock.internal.ActionBarSherlockNative.setContentView(ActionBarSherlockNative.java:119) 在 com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:251) 在 com.testapp.androidapp.SwipeyTabsActivity.onCreate(SwipeyTabsActivity.java :112) 在 android.app.Activity.performCreate(Activity.java:4434) 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1823) .. . 11 更多原因：java.lang.reflect.Constructor.constructNative(Native Method) 的 java.lang.reflect.Constructor.newInstance(Constructor.java:417) 的 android.view.LayoutInflater 的 java.lang.reflect.InvocationTargetException .createView(LayoutInflater.java:586) ... 23 更多原因：java.lang.NoClassDefFoundError: android.widget.EdgeEffect 在 android.support.v4.widget.EdgeEffectCompatIcs.newEdgeEffect(EdgeEffectCompatIcs.java:30) 在 android.support.v4.widget.EdgeEffectCompat$EdgeEffectIcsImpl.newEdgeEffect(EdgeEffectCompat.java:92 ）在 android.support.v4.widget.EdgeEffectCompat.(EdgeEffectCompat.java:133) 在 android.support.v4.view.ViewPager.initViewPager(ViewPager.java:290) 在 android.support.v4.view.ViewPager.( ViewPager.java:277) ... 26 更多 android.view.InflateException: Binary XML file line #22: Error inflating class android.support.v4.view.ViewPager at android.view.LayoutInflater.createView(LayoutInflater.java:606 ) 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680) 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:739) 在 android。view.LayoutInflater.inflate(LayoutInflater.java:489) at android.view.LayoutInflater.inflate(LayoutInflater.java:396) at android.view.LayoutInflater.inflate(LayoutInflater.java:352) at com.android.internal.policy .impl.PhoneWindow.setContentView(PhoneWindow.java:244) 在 com.actionbarsherlock.internal.ActionBarSherlockNative.setContentView(ActionBarSherlockNative.java:119) 在 com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:251) 在 com. testapp.androidapp.SwipeyTabsActivity.onCreate(SwipeyTabsActivity.java:112) 在 android.app.Activity.performCreate(Activity.java:4434) 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 在 android.app.ActivityThread .performLaunchActivity(ActivityThread.java:1823) 在 android.app.ActivityThread。handleLaunchActivity(ActivityThread.java:1875) 在 android.app.ActivityThread.access$600(ActivityThread.java:122) 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1062) 在 android.os.Handler.dispatchMessage( Handler.java:99) 在 android.os.Looper.loop(Looper.java:137) 在 android.app.ActivityThread.main(ActivityThread.java:4215) 在 java.lang.reflect.Method.invokeNative(Native Method)在 java.lang.reflect.Method.invoke(Method.java:511) 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 在 com.android.internal.os.ZygoteInit.main (ZygoteInit.java:551) at dalvik.system.NativeStart.main(Native Method) 原因：java.lang.reflect.Constructor.constructNative(Native Method) at java.lang.reflect 的 java.lang.reflect.InvocationTargetException。构造函数。newInstance(Constructor.java:417) at android.view.LayoutInflater.createView(LayoutInflater.java:586) ... 23 更多原因：java.lang.NoClassDefFoundError: android.widget.EdgeEffect at android.support.v4.widget .EdgeEffectCompatIcs.newEdgeEffect(EdgeEffectCompatIcs.java:30) 在 android.support.v4.widget.EdgeEffectCompat$EdgeEffectIcsImpl.newEdgeEffect(EdgeEffectCompat.java:92) 在 android.support.v4.widget.EdgeEffectCompat.(EdgeEffectCompat.java:133)在 android.support.v4.view.ViewPager.initViewPager(ViewPager.java:290) 在 android.support.v4.view.ViewPager.(ViewPager.java:277) ... 还有 26 个 java.lang.reflect.InvocationTargetException 在java.lang.reflect.Constructor.constructNative(Native Method) 在 java.lang.reflect.Constructor.newInstance(Constructor.java:417) 在 android.view.LayoutInflater。createView(LayoutInflater.java:586) at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680) at android.view.LayoutInflater.rInflate(LayoutInflater.java:739) at android.view.LayoutInflater.inflate(LayoutInflater.java :489) 在 android.view.LayoutInflater.inflate(LayoutInflater.java:396) 在 com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow. java:244) at com.actionbarsherlock.internal.ActionBarSherlockNative.setContentView(ActionBarSherlockNative.java:119) at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:251) at com.testapp.androidapp.SwipeyTabsActivity.onCreate(SwipeyTabsActivity .java:112) 在 android.app.Activity.performCreate(Activity.java:4434) 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1875) 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1823) 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)。 app.ActivityThread.access$600(ActivityThread.java:122) 在 android.os.Handler.dispatchMessage(Handler.java:99) 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1062) 在 android.os。 Looper.loop(Looper.java:137) 在 android.app.ActivityThread.main(ActivityThread.java:4215) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 java.lang.reflect.Method.invoke( Method.java:511) 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 在 dalvik。system.NativeStart.main(Native Method) 引起：java.lang.NoClassDefFoundError: android.widget.EdgeEffect at android.support.v4.widget.EdgeEffectCompatIcs.newEdgeEffect(EdgeEffectCompatIcs.java:30) at android.support.v4.widget .EdgeEffectCompat$EdgeEffectIcsImpl.newEdgeEffect(EdgeEffectCompat.java:92) 在 android.support.v4.widget.EdgeEffectCompat.(EdgeEffectCompat.java:133) 在 android.support.v4.view.ViewPager.initViewPager(ViewPager.java:290)在 android.support.v4.view.ViewPager.(ViewPager.java:277) ... 还有 26 个 java.lang.NoClassDefFoundError: android.widget.EdgeEffect 在 android.support.v4.widget.EdgeEffectCompatIcs.newEdgeEffect(EdgeEffectCompatIcs.java :30) 在 android.support.v4.widget 的 android.support.v4.widget.EdgeEffectCompat$EdgeEffectIcsImpl.newEdgeEffect(EdgeEffectCompat.java:92)。EdgeEffectCompat.(EdgeEffectCompat.java:133) 在 android.support.v4.view.ViewPager.initViewPager(ViewPager.java:290) 在 android.support.v4.view.ViewPager.(ViewPager.java:277) 在 java.lang .reflect.Constructor.constructNative(Native Method) at java.lang.reflect.Constructor.newInstance(Constructor.java:417) at android.view.LayoutInflater.createView(LayoutInflater.java:586) at android.view.LayoutInflater.createViewFromTag (LayoutInflater.java:680) 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:739) 在 android.view.LayoutInflater.inflate(LayoutInflater.java:489) 在 android.view.LayoutInflater.inflate(LayoutInflater.java: 396) 在 com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:244) 在 com.android.view.LayoutInflater.inflate(LayoutInflater.java:352) 在 com。actionbarsherlock.internal.ActionBarSherlockNative.setContentView(ActionBarSherlockNative.java:119) 在 com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:251) 在 com.testapp.androidapp.SwipeyTabsActivity.onCreate(SwipeyTabsActivity.java:112) 在 android .app.Activity.performCreate(Activity.java:4434) 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1823) 在 android.app.ActivityThread。 handleLaunchActivity(ActivityThread.java:1875) 在 android.app.ActivityThread.access$600(ActivityThread.java:122) 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1062) 在 android.os.Handler.dispatchMessage( Handler.java:99) 在 android.os.Looper.loop(Looper.java:137) 在 android.app.ActivityThread.main(ActivityThread.java:4215) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 java.lang.reflect.Method.invoke(Method.java:511) 在 com .android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) at dalvik.system.NativeStart.main(Native Method)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T16:26:17.883

如果您在异常发生之前在 LogCat 中向上滚动一点，您会看到一条类似`Unable to find the superclass for that class`.

您会收到此错误的原因只有三个：

1.  这个类真的不存在。如果您使用官方示例中的代码并获取此代码，请确保您拥有该库的最新版本
2.  您尚未将 jar 添加到构建路径中。要解决此问题，请右键单击 Eclipse 中的 jar，然后执行 Build Path ► Add to Build Path。
3.  您的 jar 不在 /libs 文件夹中。当您将 jar 添加到构建路径时会发生这种情况，但较新版本的 ADT 需要它位于 /libs 中。将其放在那里并将其重新添加到构建路径中。

# c# - 在 Javascript 中使用 C#/VB.NET 值

> ID：12008413
> 
> 赞同：2
> 
> 时间：2012-08-17T15:10:04.873
> 
> 标签：c#, javascript, asp.net

我一直在寻找我的问题的明确答案，但找不到。很多网站都涵盖了该主题，但我找不到我正在寻找的答案。

例如，我有一个处理客户查询的 ASPX 页面。在后面的代码中，我有一个 Customer 类。例如，如果我想在 JavaScript 函数中使用客户 ID 和名称。对我来说最好的方法是什么？

我有这个代码（一个我被要求更新的网站），但我尝试整理所有警告 VS 显示，这个代码显示两个。

```
<script type="text/javascript">
function DoSomeThingFunction(enable)
{
    var enableStr = enable ? "on" : "off";
    var intClientID = <%= Customer.ClientID %>;
    var strClientName = <%= Customer.ClientName %>;

    <!--
        More functionality
    -->

};
</script> 
```

以下两行的预期表达式..

```
var intClientID = <%= Customer.ClientID %>;
var strClientName = <%= Customer.ClientName %>; 
```

我可以更新此代码以停止警告..

```
<script type="text/javascript">
function DoSomeThingFunction(enable)
{
    var enableStr = enable ? "on" : "off";
    var intClientID = parseInt('<%= Customer.ClientID %>');
    var strClientName = '<%= Customer.ClientName %>';

    <!--
        More functionality
    -->

};
</script> 
```

我的问题是：在没有任何警告的情况下实现这一目标的最佳方法是什么？最好的方法是否意味着我会收到警告并因此不得不忍受它？我讨厌看到任何形式的警告并尝试将它们全部修复。

感谢您的关注

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:18:45.583

第一个代码块是我过去的做法。如果值是单引号或双引号的字符串。数字没有引号是可以的。

另一种方法是在页面中使用隐藏字段。

```
<input type="hidden" id="customerId" value="1234" />
<input type="hidden" id="customerName" value="John Doe" />

<script type="text/javascript">
function DoSomeThingFunction(enable)
{
    var enableStr = enable ? "on" : "off";
    var intClientID = $('input#customerId').val(); //using jQuery to retrieve the value
    var strClientName = $('input#customerName').val();

    <!--
        More functionality
    -->

};
</script> 
```

我不担心 VS 警告，事实上我很少看它们。大多数情况下，代码仍会按预期工作，尤其是在涉及 html、css 和 javascript 时，警告已过时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T15:20:39.237

我将使用以下代码（例如在预渲染中）来注册变量：

```
Page.ClientScript.RegisterClientScriptBlock(GetType(), "variables", 
  String.Format("var intClientID = {0};var strClientName = '{1}';", 
     Customer.ClientID, 
     Customer.ClientName), 
   true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T15:17:52.307

如果您知道 ClientID 是一个整数并且 ClientName 是一个字符串，那么您拥有的第二个代码块会好得多。我认为 VS 中的 JS 验证器会看到分配，并且由于它无法确认 <%=...%> 是数字数据类型，因此它希望看到它周围的引号。此外，如果 ClientName 实际上是一个字符串，那么您的 JS 无论如何都会在运行时失败，因为该字符串*需要*用引号引起来。

# javascript - Jquery Onclick事件功能第二次不起作用

> ID：12008414
> 
> 赞同：1
> 
> 时间：2012-08-17T15:10:24.827
> 
> 标签：javascript, jquery, image, html5-canvas, onclicklistener

这是我用来添加图像和关闭按钮的函数（带有事件侦听器）

```
function loadframe(img, imgid) {

    li = '';
    li += '<li><img src="' + img + '" width="100" height="120" /></li>';
    //li +='<a href="javascript:void(0)" onclick="removeajax(\''+img+'\','+imgid+')" >Close</a>';
    li += '<input type="button"  id="activate' + imgid + '" value="close">';

    document.getElementById('ulimage2').innerHTML += li;

}​ 
```

我正在单击一些图像，它们会通过关闭按钮加载到预览窗格中。

我在这里调用这个函数..它包含一个名为

```
$('#activate' + imgid).click(function() {
    //alert(imgid)
    var yoda1 = stage.get("#" + imgid);
    layery.remove(yodaGroup1);
    layery.draw();
});​ 
```

这是完整的功能..

```
function initStage1(images, imgid) {
    //    alert(imgid)
    var yodaGroup1 = "yodaGroup1" + imgid;
    yodaGroup1 = new Kinetic.Group({
        x: 100,
        y: 110,
        draggable: true,
        name: imgid
    });

    layery.add(yodaGroup1);
    stage.add(layery);
    var yoda1 = new Kinetic.Image({
        image: images.yoda1,
        x: 0,
        y: 0,
        width: 100,
        height: 120,
        id: imgid,
        name: "image",
        detectionType: "Pixel"
    });

    $('#activate' + imgid).click(function() {
        //alert(imgid)
        var yoda1 = stage.get("#" + imgid);
        layery.remove(yodaGroup1);
        layery.draw();
    });

    yodaGroup1.add(yoda1);
    yodaGroup1.on("dragstart", function() {

        yodaGroup1.moveToTop();
        layery.draw();
    });
    yodaGroup1.on("dblclick dbltap", function() {
        layery.remove(yodaGroup1);
        layery.draw();
    });
    yodaGroup1.on("dragend", function() {
        layery.draw();
        yoda1.saveImageData();
    });
    addAnchor(yodaGroup1, 0, 0, "topLeft");
    addAnchor(yodaGroup1, 100, 0, "topRight");
    addAnchor(yodaGroup1, 100, 120, "bottomRight");
    addAnchor(yodaGroup1, 0, 120, "bottomLeft");

    stage.draw();
    yoda1.saveImageData();
}​ 
```

此 onclick 仅适用于最后上传的图像.. 或者如果我只添加一个图像然后删除它.. 它工作正常.. 如果我添加超过 1 个图像，它仅适用于最后上传的图像的关闭按钮.. 我在这里使用 kineticjs 来实现 HTML5 画布功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:09:14.467

尝试将你的 yoda 变量放在函数之外，因为当你删除你的 layer 变量时，你也删除了 yoda 变量以及它的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:03:37.580

也许它必须与 dom 娱乐有关，请尝试将您的`click()`功能更改为`on()`：

```
$('body').on('click','#activate' + imgid,function() {
    //alert(imgid)
    var yoda1 = stage.get("#" + imgid);
    layery.remove(yodaGroup1);
    layery.draw();
}); 
```

# java - 用于关闭 JDBC 对象的通用助手

> ID：12008418
> 
> 赞同：6
> 
> 时间：2012-08-17T15:10:56.920
> 
> 标签：java, reflection, jdbc

强烈建议在使用完 JDBC 对象（连接、语句、结果集）后关闭它们。但是，这会产生大量这样的代码：

```
Connection conn = null;
Statement stm = null;
ResultSet res = null;
try {
  // Obtain connection / statement, get results, whatever...
} catch (SQLException e) {
  // ...
} finally {
  if (res != null) { try { res.close(); } catch (SQLException ignore) {}}
  if (stm != null) { try { stm.close(); } catch (SQLException ignore) {}}
  if (conn != null) { try { conn.close(); } catch (SQLException ignore) {}}
} 
```

现在我考虑通过实现辅助函数来减少关闭对象的（重复）代码量。它将对象作为参数并尝试`close()`使用反射调用每个对象的方法（如果对象确实有这样的方法）。

```
public void close(Object... objects) {
  for (Object object : objects) {
    for (Method method : object.getClass().getMethods()) {
      if (method.getName().equals("close")) {
        try {
          method.invoke(object);
        } catch (Exception e) {
          e.printStackTrace();
        }
        break; // break on the methods, go for the next object
      }
    }
  }
} 
```

该`finally`块可以简化为：

```
} finally {
  close(res, stm, conn);
} 
```

这是一件好事吗？如果不是，原因是什么？有没有更好的办法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T15:15:04.823

就个人而言，我不会在这种情况下使用反射，因为有很多好方法可以做到这一点而不需要它。以下是您可以做的几件事。

1.  使用[弹簧](http://static.springsource.org/spring/docs/3.0.x/reference/jdbc.html)。Spring 有一个[`JdbcTemplate`](http://static.springsource.org/spring/docs/3.0.5.RELEASE/api/org/springframework/jdbc/core/JdbcTemplate.html)对象可以帮助减轻 Jdbc 编码的冗余。样板代码隐藏在 的实现中`JdbcTemplate`，因此您可以自由地为您的应用程序做重要的事情。
2.  使用[Java7](http://www.oracle.com/technetwork/java/javase/downloads/index.html)。Java7 提供了一种新的语言结构，可以更轻松地关闭实现[`AutoClosable`](http://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html)接口的对象。
3.  创建您自己的库来处理样板代码。如果 Spring 对您的需求来说太重了，您可以在一个基类中轻松完成所有关闭，您的 Jdbc 交互类可以从该基类扩展。你将不得不写一次，但在大多数情况下，它可能是看不见的，也可能是心不在焉的。

Java7 的方式看起来像这样：

```
try (
    Connection conn = getConnectionSomehow();
    Statement statement = getStatementFromConnSomehow(conn);
) {
    //use connection
    //use statement
} catch(SomeException ex) {
    //do something with exception
}//hey, check it out, conn and statement will be closed automatically! :) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T15:15:15.450

这在 java 7 中通过新的 AutoCloseable 特性和接口得到了修复。

如果您需要在 java6 中执行此操作，我建议您使用 aspectj 并创建一个注释来包装关闭调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T18:41:49.420

您不需要 Java 7，也不需要 AOP 或 Spring（而且您当然也不需要反射）。您可以像这样反转代码并将类用作穷人的闭包（伪代码）：

```
public class DbExecutor {
    public static void exec(DbAction action) {
        Connection conn = null;
        try {
            action.consume(conn);
        } catch (SQLException e) {
            // ...
        } finally {
          if (conn != null) { try { conn.close(); } catch (SQLException ignore) {}}
        }

       }
}

public class DbAction {
    public abstract void consume(Connection conn) throws SQLException;

    public static class QueryOne extends DbAction {
        public List<String> myAnswer = new ArrayList<String>();

        @Override
        public abstract void consume(Connection conn) throws SQLException {
            Statement stm = conn.prepare(...);
            ResultSet res = stm.execute();
            while(res.hasNext()) {
                myAnswer.add(...);
            }
            //...
        }
    }

    public static class QueryTwo extends DbAction {...}
} 
```

然后要使用它，您只需执行以下操作：

```
DbAction.QueryOne qAction = new DbAction.QueryOne();
DbExecutor.exec(qAction);
System.out.println("found this many:" + qAction.myAnswer.size()); 
```

你从连接管理中解脱出来，你不能忘记关闭，关闭连接应该自动处理关闭语句和结果集。

请注意，也可以使用匿名内部类，但获取结果可能比使用这种显式方法更成问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T13:28:02.007

关闭conn就够了，但是先关闭res，其次关闭stm才是好的代码风格。

# c# - 仅在生产中收到 DLL 的“无法加载文件或程序集”...“系统找不到指定的文件”错误

> ID：12008429
> 
> 赞同：0
> 
> 时间：2012-08-17T15:11:23.530
> 
> 标签：c#, asp.net, telerik

我有一个使用 Telerik 控件的 ASP.net 4.0 网站。最近，不再与公司合作的过去开发人员升级了 Telerik 控件版本。

该网站在本地运行良好，在我将其发布并将其移动到我的 DEV 环境后（以前的站点已被清除并替换为整个已发布的新站点），它运行良好，没有任何问题。

一旦我将已发布的版本移动到生产中，它每次都会出错，并带有以下消息（附截图）：

无法加载文件或程序集 'Telerik.Web.Design, Version=2011.2.915.40, Culture=neutral, PublicKeyToken=121fae78165ba3d4' 或其依赖项之一。该系统找不到指定的文件。

我知道 DLL 存在那里并且是相同的版本“2011.2.915.40”。我真的很困惑，因为我来回移动了它，并且由于某种原因，它只有在移动到 prod 时才会出错？

[错误截图](https://i.stack.imgur.com/tavIU.jpg)

![错误截图](../Images/f5008c65bdb2778bbeb39283addc1864.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T23:48:38.500

所以我觉得很愚蠢，但我不得不将 Telerik.Web.Design.dll 添加到 Prod 的 bin 中。奇怪的部分是 DLL 从来不是这个项目的一部分，而且在本地和 DEV 工作得很好。

我在我的电脑上进行了搜索，找到了它，然后添加了它。不知道为什么 Local 和 DEV 在没有它的情况下工作，但现在修复了我将它添加到 BIN 的问题。

Telerik.Web.Design.dll

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T15:19:04.273

尝试找到您的站点尝试加载的 Telerik 程序集，它可能仍会达到 ASP.NET 临时文件中的某个旧版本。也发生在我身上。

对于这样的调试问题，我将`AppDoman.AssemblyLoad`处理程序设置在我的`Global.asax.cs`：

```
var appDomain = AppDomain.CurrentDomain;
appDomain.AssemblyLoad += AssemblyLoadEventHandler;

LogLoadedAssemblies(); 
```

使用这些：

```
private void LogLoadedAssemblies()
{
    var log = LogManager.GetLogger("AssemblyLoadHandler");
    foreach (var assembly in AppDomain.CurrentDomain.GetAssemblies())
    {
        log.Info("Already loaded: " + assembly.FullName + " (" + (assembly.IsDynamic ? "dynamic" : assembly.Location) + ")");
    }
}

static void AssemblyLoadEventHandler(object sender, AssemblyLoadEventArgs args)
{
    LogManager.GetLogger("AssemblyLoadHandler").Info("Assembly loaded: " + args.LoadedAssembly.FullName + " (" + (args.LoadedAssembly.IsDynamic ? "dynamic" : args.LoadedAssembly.Location) + ")");
} 
```

我使用 log4net 记录器，但我相信您可以轻松地将此代码调整到您的日志记录基础设施。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T15:48:03.280

似乎我遇到了同样的问题。尝试将所有必需的 dll 放入生产中的**bin 文件夹**中。

# java - 是否有允许滑动和使用视图的 TabHost？

> ID：12008436
> 
> 赞同：0
> 
> 时间：2012-08-17T15:11:40.003
> 
> 标签：java, android, android-fragments, android-tabhost

几年前我构建了我的应用程序，但我没有任何`Fragments`. 因此，UI 的所有初始化都放在一个主类（ main `activity`）中，我不想更改应用程序的整个编码，因此我可以使用`ViewPagerIndicator`or `ActionBarSherlock`。因此，我问是否有任何`TabHost`可以处理不难设置和使用的水平滑动手势`Views`，例如原始的`TabHost`. 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:22:54.963

我决定使用很棒的[ViewPagerExtentions](https://github.com/astuetz/ViewPagerExtensions)库，它允许滑动并按我的意愿工作。

# apache - 重定向 301 中的重定向过多

> ID：12008438
> 
> 赞同：0
> 
> 时间：2012-08-17T15:11:43.250
> 
> 标签：apache, redirect

我想将 301 从旧 ulr 重定向到新 url。

旧网址：`/php/zend-framework/captcha-codigo-anti-spam-zend-framework`

新网址：`http://www.demo31.com/blog/php/zend-framework/captcha-codigo-anti-spam-zend-framework`

在 .htaccess 中，我像这样进行重定向...

```
RedirectMatch 301 /php/zend-framework/captcha-codigo-anti-spam-zend-framework   http://www.demo31.com/blog/php/zend-framework/captcha-codigo-anti-spam-zend-framework 
```

但我收到错误“ERR_TOO_MANY_REDIRECTS”。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T04:39:41.430

看起来两个 URI 都在同一个主机 ( `www.demo31.com`) 上，因此当您使用 时`RedirectMatch`，匹配的 URI 部分是重定向的一部分。例子

如果我去：

```
http://www.demo31.com/php/zend-framework/captcha-codigo-anti-spam-zend-framework 
```

1.  URI 是`/php/zend-framework/captcha-codigo-anti-spam-zend-framework`
2.  该`RedirectMatch`指令匹配 URI，重定向到：

    ```
    http://www.demo31.com/blog/php/zend-framework/captcha-codigo-anti-spam-zend-framework 
    ```

3.  新的 URI 是`/blog/php/zend-framework/captcha-codigo-anti-spam-zend-framework`
4.  但是，该指令**再次**`RedirectMatch`匹配 URI ，因为它包含**`/php/zend-framework/captcha-codigo-anti-spam-zend-framework`**

 **尝试更改`RedirectMatch`为 just `Redirect`。或者，如果您只希望该特定 URI 进行重定向（而不是`/php/zend-framework/captcha-codigo-anti-spam-zend-framework/some/other/stuff`也被重定向，请添加一些分隔符：

```
RedirectMatch 301 ^/php/zend-framework/captcha-codigo-anti-spam-zend-framework$   http://www.demo31.com/blog/php/zend-framework/captcha-codigo-anti-spam-zend-framework 
```

（`^`和`$`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-11T13:07:54.960

```
RewriteRule ^bad_url$ good_url [R=301,L] 
```

谢谢 ！为我工作**

# ios - WriteToFile：如何在 csv（或任何）文件中写入多个数据？

> ID：12008439
> 
> 赞同：0
> 
> 时间：2012-08-17T15:11:50.413
> 
> 标签：ios, xcode, ipad, csv

我正在尝试将用户名和电子邮件保存在 csv 文件中。将少于 50 人输入他们的姓名和电子邮件到此应用程序。这些详细信息应存储在 csv 文件中，并且我必须能够在 iPad 中物理访问该文件。请帮忙！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T17:01:33.230

所以我们需要先了解一个csv文件的格式。实际上很简单，它只是一个数据由逗号和换行符分隔的文件。

假设我们需要存储人们的姓名、电子邮件和消息。一个 csv 文件会是这样的：

约翰·多伊，john@abc.com，世界你好！

Jane Doe, jane@abc.com, Foo Foo

在这里，我们有两个人用换行符分隔，他们的信息用逗号分隔。我们将需要一个`outputString`来容纳所有这些混乱。

所以现在假设我们有一组名为`peopleArray`. 我们`peopleArray`拥有一堆，`PeopleObjects`每个`PeopleObject`都有一个`name`, `email`, 和`message`属性。

我们有一大群人及其各自的信息。现在让我们创建我们的`outputString`.

```
NSString *outputString = @"";

for (PeopleObject *person in peopleArray) {
       outputString = [outputString stringByAppendingFormat:@"%@,%@,%@\n", person.name, person.email, person.message];
} 
```

这将创建格式正确的字符串。所以现在我们需要将所有这些写入一个文件。

我们首先需要文档目录：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docDirectory = [paths objectAtIndex:0]; 
```

现在`docDirectory`将告诉我们在哪里写入文件。接下来，我们需要在目录中附加一个文件名。

```
NSString *outputFileName = [docDirectory stringByAppendingPathComponent:@"People.csv"]; 
```

所以现在我们有了格式化的 csv 字符串和保存它的位置。最后一部分是将其写入文件。

```
//Create an error incase something goes wrong
NSError *csvError = NULL;

//We write the string to a file and assign it's return to a boolean
BOOL written = [outputString writeToFile:outputFileName atomically:YES encoding:NSUTF8StringEncoding error:&csvError];

//If there was a problem saving we show the error if not show success and file path
if (!written) 
    NSLog(@"write failed, error=%@", csvError);
else
    NSLog(@"Saved! File path =", outputFileName); 
```

现在，如果您需要再次访问该文件，只需保存它，`outputFileName`这样您就会知道它在哪里。

# css - 使用跨度类是一种好习惯吗？

> ID：12008440
> 
> 赞同：0
> 
> 时间：2012-08-17T15:11:51.453
> 
> 标签：css, html

在 DIV 中为 SPAN 标记提供不同的类是否明智/良好的做法。例如样式需要特定布局/位置颜色等的文本段落...？

还是有更好/更有效的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:26:58.097

如果您为段落本身提供类，而不是用 包装段落的内容，您将拥有更少的 HTML `span`，但是完全可以按照您所说的去做。你当然可以给多个段落同一个类：

HTML：

```
<div>
    <p class="paragraph">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
    <p class="paragraph">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
    <p class="paragraph">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
</div> 
```

或者给`div`一个类并使用它选择段落。

HTML：

```
<div class="paragraphs">
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
</div> 
```

CSS：

```
div.paragraph p { } 
```

或者每一个都有不同的类，给你很大的灵活性

HTML：

```
<div>
    <p class="paragraph1">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
    <p class="paragraph2">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
    <p class="paragraph3">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
</div> 
```

如果您只需要突出显示单个段落的不同位，那么 a`span`是可以接受的，但不要忘记考虑现成的标签，例如`strong`or `em`。

```
<p>Lorem ipsum dolor sit amet, <strong>consectetur</strong> adipiscing elit.</p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T15:16:23.243

你的意思是这样吗？

```
<p><span>my text goes here it is lovely text</span></p> 
```

如果是这样，那么您最好在可能的情况下简单地在段落中添加一个类：

```
<p class="myclass">my special text goes here</p> 
```

一般来说，以您所说的方式使用 span 元素没有任何问题。

# facebook - Facebook Open Graph Watch 操作被拒绝

> ID：12008442
> 
> 赞同：0
> 
> 时间：2012-08-17T15:11:52.880
> 
> 标签：facebook, video, facebook-opengraph

我们正面临有关 Open Graph Action (watch) 的某些问题。

到目前为止，我们已经多次通过 App 开发者页面提交 Action，但每次我们都收到“App 需要进行一些更改才能被接受”的回复。

我们还通过 Auth 对话 Test User 使用了操作 (watch)，它工作正常。这是通过测试用户发布的操作的屏幕截图。

![](../Images/37c94462ceaaf4965080e5a47524a63e.png)

这不是我们第一次使用 Open Graph Action。我们之前也在我们的几个应用程序上使用过它，但这次它被拒绝了三次以上。

这是我们在提交动作时执行的步骤等的屏幕截图（就像我们一直做的那样）：

![](../Images/e74f6e4e0462a3495841ec994dc88fef.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:46:49.173

让 facebook 的人告诉你他们使用哪些用户 ID 来测试并使用那个确切的用户进行测试。请记住：

*   当您在应用程序管理面板中“创建”一个测试用户并“授权”它时，它不会分配所需的权限（例如流帖子等）。所以你需要在你的应用程序中分别检查权限和范围（通过 js-sdk 或 php-sdk 等）
*   测试用户无法访问普通用户的任何信息，反之亦然。所以请记住，您的聚合应该在两个测试用户之间做一些事情
*   测试用户无法点赞页面，因此不要将您的应用置于点赞门之后。

# r - 如何根据固定间隔对数字进行舍入

> ID：12008443
> 
> 赞同：0
> 
> 时间：2012-08-17T15:11:53.027
> 
> 标签：r

> **可能重复：**
> [R 舍入到最接近的 0.5 或 0.1](https://stackoverflow.com/questions/8664976/r-round-to-nearest-5-or-1)
> [如何舍入到 1、1.5、2 等，而不是 R 中的 1、2 或 1.1、1.2、1.3？](https://stackoverflow.com/questions/9502895/how-do-i-round-to-1-1-5-2-etc-instead-of-1-2-or-1-1-1-2-1-3-in-r)

如果我想在逗号后用一些数字四舍五入

```
a <- 2.1357 
```

我可以用

```
round(a, 1) 
```

得到 2.1 作为结果。

现在让我有一个数字数组，比如

```
b <- rnorm(n = 10, mean = .5, sd = .1)
> b
[1] 0.5554950 0.4527671 0.5217543 0.6137458 0.6023219 0.7045009 0.5140363 0.5312920
[9] 0.5841152 0.4492901 
```

如果我想将这些数字四舍五入以**使它们成为 0.1 的倍数，**输入就足够了

```
round(b, 1) 
```

现在我的问题是：如果我想将它们四舍五入以使... **0.2**的倍数？还是**0.3**？还是**0.25** ... 等等？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T15:15:04.997

```
a <- runif(20)  # Data
mult <- .125    # Multiple
mult*round(a/mult) 
```

得到你

```
 [1] 0.250 0.750 0.125 0.625 0.000 0.500 0.125 0.500 0.125 0.875 1.000 0.750
[13] 0.500 0.500 0.125 0.500 0.250 0.250 0.250 0.875 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T15:42:22.523

这会有帮助吗

```
b <- rnorm(n = 10, mean = .5, sd = .1) 
b
library(plyr)
round_any(b, 0.1) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T15:45:18.333

@Backlin 提供的答案是执行此操作的最直接方法，但请注意，如果您关心最终结果的分布，则必须仔细考虑如何绘制样本。例如，这是使用简单方法从随机制服中抽取 100 万次的结果：

```
> a <- runif(1000000)
> mult <- 0.125
> samp <- mult * round(a/mult) 
> table(samp)

samp
     0  0.125   0.25  0.375    0.5  0.625   0.75  0.875      1 
 62889 125172 124564 125096 125443 124716 124899 124988  62233 
```

请注意，即使原始数据是从均匀`[0,1]`分布中提取的，0 和 1 在舍入分布的分布中的代表性不足。`[0,1]`如果你真的想要一个从制服中以 为增量的随机样本`0.125`，我会使用`sample`and `seq`：

```
> rng <- seq(0, 1, 0.125)
> samp <- sample(rng, 1000000, replace=TRUE)
> table(samp)
samp
     0  0.125   0.25  0.375    0.5  0.625   0.75  0.875      1 
111206 111209 111222 110972 110617 111200 110827 111199 111548 
```

这就是我建议您从均匀分布中提取的方法。如果您想对可能的结果赋予不同的权重，您可以使用`prob`参数 to `sample`。如果您想从没有明确定义的上限和下限的不同分布（例如正态分布）中提取数据，您可能会也可能不会遇到类似的问题。您需要仔细考虑并运行许多测试，以确保您获得所需的发行版。

# java - FilenameFilter 不过滤 zip 文件 - Java

> ID：12008446
> 
> 赞同：0
> 
> 时间：2012-08-17T15:12:07.700
> 
> 标签：java

我正在实现一个`ZipComparison`文件，它遍历目录树结构，并处理该目录树结构中`MD5`的所有`.zip`文件。

```
import java.io.*;

public class ZipComparison {

public class ZipFilenameFilter implements FilenameFilter {

    public boolean accept(File dir, String name) {
        if( name != null &&
                ( dir.isDirectory() || name.toLowerCase().endsWith(".zip"))) {
            return true;
        }
        return false;
    }
}
/**
 * These two constant values are the root for the directory
 */
private static final String root_a = "D:/UDU/r/tc10.0.0.2012080100_A";
private static final String root_b = "D:/UDU/r/tc10.0.0.2012080100_B";
private ZipFilenameFilter filter;

public ZipComparison() {
     this.filter = new ZipFilenameFilter();
}

public void matchMD5() {
    try{
        File root = new File( ZipComparison.root_a );
        if( !root.exists() ){
            System.out.println( "root doesn't exist" );
        }
        else if( !root.isDirectory() ) {
            System.out.println( "root isn't a directory" );
        }
        else{

            File[] files = new File( ZipComparison.root_a ).listFiles( this.filter );

            if( files != null ){
                showFiles( files );
            }
            else{
                System.out.println( "List of files was null." );
                System.exit( -1 );
            }
        }
    }
    catch(SecurityException ex){
        ex.printStackTrace();
    }
}

/**
 * iterates over the directory tree structure.
 * @param files
 */
public void showFiles( File[] files ){
    for( File file : files ){
        if( file.isDirectory() ) {
            System.out.println( "Directory: " + file.getName() );
            showFiles( file.listFiles( this.filter ) );
        }
        else {
            System.out.println( "File: " + file.getName() );
        }
    }
}
/**
 * @param args
 */
public static void main( String[] args ) {
    // TODO Auto-generated method stub
    ZipComparison zc = new ZipComparison();
    zc.matchMD5();

    System.exit( 0 );
} 
```

}

当我在没有它的情况下执行程序时，`ZipFilenameFilter filter`它工作得很好。但是，当我添加`filter`到

```
File[] files = new File( ZipComparison.root_a ).listFiles( filter ); 
```

什么都没有打印出来。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T15:20:31.793

您正在搜索递归但错误地过滤了目录。尝试

```
if( name != null &&(name.isDirectory()||
                name.toLowerCase().endsWith(".zip"))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T15:22:44.120

您过滤后的`listFiles`呼叫将*仅*列出zip 文件。它将排除子目录，因此您只会看到直接位于根目录中的 zip 文件，而不是那些位于树更深处的文件。您可能想要一个`FileFilter`接受所有目录以及名称以`.zip`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T15:53:32.290

两个主要问题：

1.  过滤器需要检查当前路径（dir **+** file）是否为目录，并且
2.  zip 过滤器也需要在递归函数中应用，而不仅仅是第一个。

筛选：

```
public boolean accept(File dir, String name) {
    if (name == null) {
        return false;
    }

    return new File(dir, name).isDirectory() || name.toLowerCase().endsWith(".zip");
} 
```

递归函数（假设一个类变量 zip 过滤器）：

```
public void showFiles(File[] files) {
    for (File file : files) {
        if (file.isDirectory()) {
            System.out.println("Directory: " + file.getName());
            showFiles(file.listFiles(zipFilenameFilter));
        } else {
            System.out.println("File: " + file.getName());
        }
    }
} 
```

# iphone - iPad：加载时和旋转后出现奇怪的帧

> ID：12008453
> 
> 赞同：0
> 
> 时间：2012-08-17T15:12:52.700
> 
> 标签：iphone, objective-c, ios, ipad, frame

我有动态大小的标签和表格视图行高。有些东西似乎不起作用。我将标签的宽度记录在`cellForRowAtIndexPath:`.

```
Loading in Portrait --> 595
Rotate to Landscape --> 851
Rotate to Portrait  --> 595 
```

看起来不错。但

```
Loading in Landscape --> 595
Rotate to Portrait   --> 595
Rotate to Landscape  --> 851 
```

实际上，在横向模式下加载视图时，我的视图标签和单元格未正确呈现。

有任何想法吗？

**编辑：**

当我旋转时，我只需`reloadData`调用`didRotateFromInterfaceOrientation:`. 这就像一个魅力。

我**不会**在任何地方更改标签的宽度，只是更改高度。（当然，宽度对于计算高度很重要，但我并没有改变宽度。）

日志语句在 的*末尾*，`cellForRowAtIndexPath`它总是*在 之后* `heightForRowAtIndexPath`调用，因此之后没有更多的变化。

**编辑 2**：

有问题的标签是动态创建的。我现在切换到为每个方向使用不同的框架：

```
// in cellForRowAtIndexPath
BOLL landscape = UIInterfaceOrientationIsLandscape(
   [[UIApplication sharedApplication] statusBarOrientation]);
//...
textFieldFrame = CGRectMake(x, y, landscape ? 851 : 595, h); 
```

使用此帧初始化标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:17:32.283

解决方案：再次设置框架

```
-(void)willDisplayCellAtIndexPath: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:26:47.143

看起来您确实没有检查横向加载时会发生什么。更多代码将为您提供修复:-)

# jquery - jQuery 日历：如何在特定日期添加可点击事件？

> ID：12008454
> 
> 赞同：1
> 
> 时间：2012-08-17T15:12:56.710
> 
> 标签：jquery, ajax, fullcalendar

我正在使用 jquery full calendar [http://arshaw.com/fullcalendar](http://arshaw.com/fullcalendar) 来显示会议。

我只是想确认可以添加一个事件（让我们创建一个新会议

使用 php ajax ) 在特定日期使用这个 .?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T16:11:09.460

我假设您想在用户单击一天（在月视图中）或时间段（在日/周视图中）时添加事件。如果是这样，您可以使用`select`和`eventClick`回调在日历上添加和获取事件。

检查这个小提琴：http: [//jsfiddle.net/100thGear/xgSTr/](http://jsfiddle.net/100thGear/xgSTr/)

这将 jQuery UI 对话框合并到 FullCalendar 中，并且为了方便起见，还将选定的日期继承到 jQuery UI 日期选择器中！

让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T15:28:57.140

我已经广泛使用了 fullcalendar，是的，在特定日期添加事件是它的核心功能。您需要了解事件对象结构（请参阅[http://arshaw.com/fullcalendar/docs/event_data/Event_Object/](http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)），特别是您将 设置`start`为开始日期/时间的 unix 时间戳并将其标记为全部日事件`allDay = "true"`或设置`end`时间戳。

正如您提到的 Ajax，使用事件填充日历的一种方法是通过 JSON 加载它们，您可以这样做：

`$('#calendar').fullCalendar({ events: '/myfeed.php' });`

`myfeed.php`返回一个充满事件对象的 json 结构。

* * *

这是如何使用各种选项设置日历的完整示例

```
//Initialise the calendar
$('#calendar').fullCalendar({
    header: { left: 'title', center: '', right: 'today agendaDay,agendaWeek,month prev,next'},
    editable: true,
    showTime: true,
    allDayDefault: false,
    defaultView: 'agendaDay',
    firstHour: 8,
    eventColor: '#23478A',
    eventBorderColor:'#000000',
    eventTextColor:'#ffffff',
    //eventBackgroundColor:,
    theme: true, //enables jquery UI theme

    eventSources: [
        '/myfeed.php'
    ],

    //this is when the event is dragged and dropped somewhere else 
    eventDrop: function(event,dayDelta,minuteDelta,allDay,revertFunc) 
    {
        //do something...
    },

    //this is when event is resized in day/week view
    eventResize: function(event,dayDelta,minuteDelta,revertFunc) 
    {
        //do something
    },

    eventClick: function(calEvent, jsEvent, view) 
    {          
        //do something
    },

    eventRender: function( event, element, view ) 
    { 
        //redo the title to include the description
        element.find(".fc-event-title").html(event.title + ": <span>" + event.description + "</span>");
    },

    loading: function(bool) 
    {
        if (bool)
        {
            $("#loading").show();
        }
        else 
        {
            $('#loading').hide();
        }
    }
}); 
```

# arrays - 如何循环数组数组作为参考？

> ID：12008455
> 
> 赞同：6
> 
> 时间：2012-08-17T15:12:58.897
> 
> 标签：arrays, perl, reference

`$a`如果是数组数组，则以下代码有效，但我需要`$a`成为数组数组的引用。

**问题**

我如何迭代`$a`？

```
#!/usr/bin/perl

use warnings;
use strict;
use Data::Dumper;

my @AoA = ( ['aaa','hdr','500'],
            ['bbb','jid','424'],
            ['ccc','rde','402'],
            );

my $a = \@AoA;

my $s = "bbb";
my $d = "ddd";

for my $i ( 0 .. $#a ) {
    for my $j ( 0 .. $#{ $a[$i] } ) {
        if ($a[$i][$j] eq $s) {
            $a[$i][$j] = $d;
            last;
        }
    }
}

print Dumper $a; 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-17T15:19:15.833

```
foreach my $row (@$array_ref) {
    foreach my $cell (@$row) {
        if ($cell eq $s) {
            $cell = $d;
            last;
        }
    }
} 
```

此外，要计算数组引用中的元素数（从上面的代码中可以看出，您的特定代码不需要），最简单的方法是：

```
my $count = scalar(@$array_ref);
my $row_count = scalar(@{ $array_ref->[$i] });
my $last_index = $#$array_ref; 
```

此外，要访问 arrayrefs 的 arrayref 中的数据，只需在其上使用取消引用运算符：

```
$array_ref->[$i]->[$j]; # The second arrow is optional but I hate omitting it. 
```

此外，您可以按照您的方式创建您的 arrayrefs （获取对数组数组的引用），或者立即作为参考：

```
my $array_ref = [
         [1,2,3]
         ,[4,5,6]
        ]; 
```

作为旁注，请不要使用`$a`和`$b`作为标识符名称 - 它们有特殊用途（例如用于排序块）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T15:23:04.220

要在 Perl 中取消引用，您有多种选择。对于初学者，我建议您阅读[perlref](http://perldoc.perl.org/perlref.html)。这是相关的代码部分，更改最少，因此您可以看到需要有所不同的地方（但是，我同意其他人的建议，以使您的代码更加 Perlish）。

```
for my $i ( 0 .. $#$a ) {
    for my $j ( 0 .. $#{ $a->[$i] } ) {
        if ($a->[$i][$j] eq $s) {
            $a->[$i][$j] = $d;
            last;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T17:18:53.810

在我看来，取消引用的最简单方法是始终记住数组和哈希只能包含*标*量值（请参阅[perldoc perldata](http://perldoc.perl.org/perldata.html)）。这意味着你的数组

```
my @AoA = ( ['aaa','hdr','500'],
            ['bbb','jid','424'],
            ['ccc','rde','402']); 
```

...仅包含三个标量值，它们是对其他数组的引用。你可以这样写：

```
my $first = [ qw(aaa hdr 500) ];      # using qw() which will quote the args
my $sec   = [ qw(bbb jid 424) ];
my $third = [ qw(ccc rde 402) ];
my @all   = ($first, $sec, $third);   # this array is now identical to @AoA 
```

考虑到这一点，很容易想象（就像 DVK 在他的回答中建议的那样）一个循环，例如：

```
for my $aref (@all) {
    # $aref will contain $first, $sec, and $third 
} 
```

知道这`$aref`是一个数组引用，解引用很简单：

```
for my $aref (@all) {
    for my $value (@$aref) {
        # do your processing here
    }
} 
```

Also, since the values in a for loop are aliased, any changes to them affects the original array. So if the "processing" in the loop above contains an assignment such as

```
$value = $foo; 
```

That means that the values in `@all` are also changed, exactly as if you had written:

```
$all[0][1] = $foo; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T16:19:59.160

我发现“last”的使用是模棱两可的，内部或外部，所以我明确表示。

```
for (@$a) {
    INNER:
    for (@$_) {
        do {$_ = $d; last INNER} if $_ eq $s;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T17:18:34.437

每当我处理数组或哈希数组或哈希数组或数组哈希数组时，我都会开始考虑面向对象编程。Perl OOP 并不是那么复杂，它隐藏了很多逻辑复杂性。

现在，在这个非常简单的示例中，不面向对象编写它会容易得多，并且您已经有了几个好的答案（您主要忘记了取消引用您的引用）。

但是一旦你开始意识到你可以在 Perl 中拥有比简单的散列、数组和标量更复杂的结构，你的数据结构开始变得更加复杂，并且在没有 OOP 的情况下更难以解析。

```
#!/usr/bin/env perl

use strict;
use warnings;
use feature qw(say);

my $a_of_a = array_of_arrays->new;

$a_of_a->push(["aaa", "hdr", "500"]);
$a_of_a->push(["bbb", "jid", "424"]);
$a_of_a->push(["ccc", "rde", "402"]);

foreach my $member ($a_of_a->list) {
    my @array = @{$member};
    foreach my $element (@array) {
        printf "%-5.5s  ", $element;
    }
    print "\n";
}

package array_of_arrays;

sub new {
    my $class = shift;
    my $self = [];

    bless $self, $class;
    return $self;
}

sub push {
    my $self = shift;
    my $item = shift;

    push @{$self}, $item;
    return $self;
}

sub pop {
    my $self = shift;

    if (scalar @{$self}) {
        return pop @{$self};
    }
    else {
        return;
    }
}

sub list {
    my $self = shift;
    return @{$self};
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T15:17:56.927

```
for my $x (@{$a}) {
    for (@{$x}) {
        if ($_ eq $s) {
            $_ = $d;
            last;
        }
    }
} 
```

# udp - Netty Framework：海量数据的UDP发送

> ID：12008459
> 
> 赞同：1
> 
> 时间：2012-08-17T15:13:12.947
> 
> 标签：udp, netty

使用 Netty 3.5.3 我正在实现一个 UDP 服务器，它必须连续发送小数据包，而无需任何请求-响应通信。在论坛的任何地方，我发现最好的方法是重写 SimpleChannelHandler 的 channelBound 方法。

```
private static class MyHandler extends SimpleChannelHandler {

    private TargetDataReader dataReader = new TargetDataReader();

    private InetSocketAddress remoteAddress;

    private long sleep;

    /**
     * @param host
     * @param port
     */
    public MyHandler(String host, int port, long sleep) {
        super();
        this.remoteAddress = new InetSocketAddress(host, port);
        this.sleep = sleep;
    }

    /*
     * {@inheritDoc}
     */
    @Override
    public void channelBound(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception {
        Channel ch = e.getChannel();

        int cnt = 0;
        long start = System.currentTimeMillis();

        byte[] targetData;
        while ((targetData = dataReader.nextData()) != null) {

            ChannelBuffer tdBuf = ChannelBuffers.wrappedBuffer(targetData);

            ++cnt;
            ChannelFuture cf = ch.write(tdBuf, this.remoteAddress);
            cf.addListener(new ChannelFutureListener() {
                @Override
                public void operationComplete(ChannelFuture future) throws Exception {
                    System.out.println("Server - record sent "
                            + (future.isSuccess() ? "successfully" : "failed"));
                }
            });
            cf.await(30);

            if (sleep > 0)
                Thread.sleep(sleep);

            System.out.println("Server - written records " + cnt);
        }

        long duration = System.currentTimeMillis() - start;
        System.out.println("Server - duration=" + duration + ", cnt=" + cnt + ", records/sec="
                + String.format("%f", ((double) cnt) / duration * 1000));
    } 
```

乍一看，它似乎有效。但深入研究后，我意识到接收客户端只收到了大约 50% 的数据包。此外，我认为这是实际的问题，调用**ChannelFuture cf = ch.write(tdBuf, this.remoteAddress); 时服务器并没有真正发送数据包；**但直到 channelBound 方法完成，而不是一击。不幸的是，我不知道，如果能得到提示，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:42:06.297

您需要尽快从那里返回，`channelBound`因为您通过在那里运行所有代码来阻止 Netty 的 I/O 线程。

您应该使用[`Executor`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executor.html)（或 Netty 库中的等价物，如果存在）来执行长时间运行的代码（在本例中为`dataReader`循环），这样 Netty 的线程之一就不会阻塞等待您的代码完成。

# javascript - 骨干和rails collection.create等待

> ID：12008460
> 
> 赞同：0
> 
> 时间：2012-08-17T15:13:15.240
> 
> 标签：javascript, ruby-on-rails-3.1, backbone.js

我正在尝试等待：真正的选项来处理 collection.create(model) 并且没有任何运气。

要在添加时呈现的视图

```
window.ObjectsView = GreyboxView.extend
  initialize: function() {
    _.bindAll(this, 'render');
    this.collection.bind('add', this.render);
    return this.collection.bind('reset', this.render);
  },
  render: function() {
    json = { obj removed }
    this.template = _.template(JST['irboards/index'](json));
    this.$el.html(this.template());
    this.renderObjects();
    return this;
  }
} 
```

关于模型保存（新）

```
window.FormView = GreyboxView.extend({
  // un-needed code omitted
  saveModel: function() {
    this.model.set { all my attributes }

    this.collection.create(this.model, {
      wait: true
    });
  }
} 
```

在导轨控制器中：

```
def create
  @model = Model.new(params[:model].merge({:account_id => current_user.account.id, :action_user_id => current_user.id}))

  if @model.save
    flash[:success] = AppSystem::Notifications.created('Model')
    respond_with @model.to_json
  else
    flash[:error] = @model.errors[:base].blank? ? AppSystem::Notifications::FORM_ERROR :   @model.errors[:base]
    render :action => :new
  end
end 
```

基本上 {wait: true} 什么都不做......要么 js 模型没有被添加到集合中，b/c 它正在保存到数据库中，要么

```
this.collection.bind('add', this.render) 
```

没有被触发或者 Rails 没有返回成功......我真的不知道。

任何人都可以帮忙吗？

先感谢您

* * *

显然我还不能回答我自己的问题，但我不想忘记这个 b/c 我知道它会帮助别人。所以：

嗯...经过长时间的搜索，终于发布了这个问题......我发现了处理这个问题的方法。我找到了这篇文章/博客

[http://italktoomuch.com/2012/05/setting-up-backbonejs-with-ruby-on-rails/](http://italktoomuch.com/2012/05/setting-up-backbonejs-with-ruby-on-rails/)

基本上我的 create :action 需要是

```
def create
  respond_with = Model.create(params0
end 
```

js是：

```
this.collection.create(attributes, {
  wait: false,
  success: function() {
    return _this.collection.trigger('reset');
  },
  error: function() {
    return alert('wrong!');
  }
}) 
```

那么我是否可以相信等待什么也没做？还是我只是用错了？我不知道，但这是有效的，我很高兴。需要做更多的重构，但这是一个很好的起点

希望这对其他人也有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:30:09.903

`{wait:true}`肯定会有所作为！:-)

我对rails一无所知，但我认为这可能是问题所在。基本上，当您通过选项时，`wait:true`主干将在创建或销毁模型之前等待服务器响应，从而仅在验证资源已保存或删除后才从集合中添加或删除它。

因此，使用的重要组件`wait:true`是确保您的服务器响应包含正确的 HTTP 状态。如果是 OKAY，则返回 200 状态，如果不是，则返回 400 或 500 之类的状态。挑一个。我不太确定您的代码是否执行此操作，尽管需要检查。

进一步注意，您似乎在代码中添加了成功和错误回调。基本上这也是 Backbone 知道是否调用成功或错误的方式。200，它执行成功。其他任何东西都会运行错误。

默认情况下（当前）Backbone 是乐观的，这意味着如果你什么都不传递（或`wait:false`）Backbone 假设一切都会顺利进行。因此，它会在从您的服务器获得响应之前触发您的添加或销毁事件。

# python - 从较小的原始列表中返回 N 个随机项

> ID：12008465
> 
> 赞同：2
> 
> 时间：2012-08-17T15:13:46.050
> 
> 标签：python, random

我很惊讶我还没有找到没有循环的方法，因为这似乎是一个非常标准的问题。
在 python 中工作，我有 `colors = ["red","green","blue"]`并且我想将这些元素以随机顺序放入长度为 N 的列表中。现在我正在使用：

```
import random
colors = ["red","green","blue"]
otherList = []

for i in range (10):  # N=10 
    otherList.append(random.choice(colors)) 
```

这将返回：`otherList = ["red","green","green","green","blue","green","red","green","green","blue"]`，这正是我想要的。我只是在寻找一种更惯用的方式来做到这一点？有任何想法吗？看起来 random.sample 可能是答案，但我在文档中没有看到任何完全符合我需求的内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T15:16:37.883

您可以使用列表推导：

```
[random.choice(colors) for i in range(10)] #xrange for python2 compatability 
```

或者`random.sample()`通过一些体操：

```
nrandom = 10
random.sample( colors*(nrandom//len(colors)+1), nrandom ) 
```

虽然我不认为这比列表理解更好......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T15:18:08.487

```
>>> import random
>>> colors = ["red","green","blue"]
>>> [random.choice(colors) for i in range(10)]
['green', 'green', 'blue', 'red', 'red', 'red', 'green', 'red', 'green', 'blue'] 
```

# jquery - 如何告诉动画何时停止移动 div？使用 If 语句？

> ID：12008466
> 
> 赞同：1
> 
> 时间：2012-08-17T15:13:56.007
> 
> 标签：jquery, if-statement, jquery-animate, positioning, timeline

所以我在 Jquery 中使用定位创建了一个时间线，我可以很容易地让它上下移动问题是时间线应该只从 1943 年到 2020 年。我已经让时间线上下移动很容易，但是它将超过日期，并且什么都不会显示。如果点击功能到达时间线的末尾，我需要让它停止。

HTML：

```
<aside class="timeContainer">

    <div class="timeControlUp">
        <div id="yearUp"></div>
        <div id="decadeUp"></div>
    </div>
    <div class="timeHolder">
        <div class="timeView">
            <div class="longTimeline">

<!-- Year Markers -->            
                <div class="yearMarker">1943</div><div class="yearMarker">1944</div><div class="yearMarker">1945</div><div class="yearMarker">1946</div><div class="yearMarker">1947</div><div class="yearMarker">1948</div><div class="yearMarker">1949</div><div class="yearMarker">1950</div><div class="yearMarker">1951</div><div class="yearMarker">1952</div><div class="yearMarker">1953</div><div class="yearMarker">1954</div><div class="yearMarker">1955</div><div class="yearMarker">1956</div><div class="yearMarker">1957</div><div class="yearMarker">1958</div><div class="yearMarker">1959</div><div class="yearMarker">1960</div><div class="yearMarker">1961</div><div class="yearMarker">1962</div><div class="yearMarker">1963</div><div class="yearMarker">1964</div><div class="yearMarker">1965</div><div class="yearMarker">1966</div><div class="yearMarker">1967</div><div class="yearMarker">1967</div><div class="yearMarker">1969</div><div class="yearMarker">1970</div><div class="yearMarker">1971</div><div class="yearMarker">1972</div><div class="yearMarker">1973</div><div class="yearMarker">1974</div><div class="yearMarker">1975</div><div class="yearMarker">1976</div><div class="yearMarker">1977</div><div class="yearMarker">1978</div><div class="yearMarker">1979</div><div class="yearMarker">1980</div><div class="yearMarker">1981</div><div class="yearMarker">1982</div><div class="yearMarker">1983</div><div class="yearMarker">1984</div><div class="yearMarker">1985</div><div class="yearMarker">1986</div><div class="yearMarker">1987</div><div class="yearMarker">1988</div><div class="yearMarker">1989</div><div class="yearMarker">1990</div><div class="yearMarker">1991</div><div class="yearMarker">1992</div><div class="yearMarker">1993</div><div class="yearMarker">1994</div><div class="yearMarker">1995</div><div class="yearMarker">1996</div><div class="yearMarker">1997</div><div class="yearMarker">1998</div><div class="yearMarker">1999</div><div class="yearMarker">2000</div><div class="yearMarker">2001</div><div class="yearMarker">2002</div><div class="yearMarker">2003</div><div class="yearMarker">2004</div><div class="yearMarker">2005</div><div class="yearMarker">2006</div><div class="yearMarker">2007</div><div class="yearMarker">2008</div><div class="yearMarker">2009</div><div class="yearMarker">2010</div><div class="yearMarker">2011</div><div class="yearMarker">2012</div><div class="yearMarker">2013</div><div class="yearMarker">2014</div><div class="yearMarker">2015</div><div class="yearMarker">2016</div><div class="yearMarker">2017</div><div class="yearMarker">2018</div><div class="yearMarker">2019</div>

<!-- End Year Markers -->           

            <img src="img/dateButton.png" id="dateButton1" class="dateButton" />
            <img src="img/dateButton.png" id="dateButton2" class="dateButton" />
            <img src="img/dateButton.png" id="dateButton3" class="dateButton" />

            </div>
        </div>
    </div> 
```

CSS：

```
/*---------- Start Timeline 2 ---------*/

.timeContainer { position: fixed; width: 100px; height: 90%; margin: 2% 0% 5% 0%; top: 0px; right: 30px; overflow:hidden;}

.timeControlUp { position:absolute; width: 100px; height: 50px; top: 0px; left: 0px; background-image:url(../img/timeButBG.png); z-index: 101; text-align:center;}

#yearUp { position: relative; top: 0px; left: 0px; width: 50px; height: 50px; background-image: url(../img/timeUp.png); background-repeat:no-repeat; background-position:top left; cursor:pointer;}

#yearUp:hover { position: relative; top: 0px; left: 0px; width: 50%; height: 50px; background-image: url(../img/timeUp.png); background-repeat:no-repeat; background-position: -100px 0px; cursor:pointer;}

#decadeUp { position: relative; top: -50px; left: 50px; width: 50%; height: 50px; background-image: url(../img/timeUp.png); background-repeat:no-repeat; background-position: -52px 0px; cursor: crosshair;}

#decadeUp:hover { position: relative; top: -50px; left: 50px; width: 50px; height: 50px; background-image: url(../img/timeUp.png); background-repeat:no-repeat; background-position: -152px 0px; cursor:pointer;}

.timeHolder { position: absolute; width: 100px; height: 100%; margin: 50px 0px 50px 0px; top: 0px; left: 0px;}

.timeView { position:absolute; width: 100%; height: 28105px; top: -24820px; left: 0px; background-image:url(../img/longTimeBG3.png); background-repeat:repeat-y; background-position: top left; z-index: 90;}

.timeControlDown { position:absolute; width: 100%; height: 50px; bottom: 0px; left: 0px; background-image:url(../img/timeButBG.png); z-index: 101;}

#yearDown { position: relative; top: 0px; left: 0px; width: 50px; height: 50px; background-image: url(../img/timeDown.png); background-repeat:no-repeat; background-position:top left; cursor:pointer;}

#yearDown:hover { position: relative; top: 0px; left: 0px; width: 50%; height: 50px; background-image: url(../img/timeDown.png); background-repeat:no-repeat; background-position: -100px 0px; cursor:pointer;}

#decadeDown { position: relative; top: -50px; left: 50px; width: 50%; height: 50px; background-image: url(../img/timeDown.png); background-repeat:no-repeat; background-position: -52px 0px; cursor: crosshair;}

#decadeDown:hover { position: relative; top: -50px; left: 50px; width: 50px; height: 50px; background-image: url(../img/timeDown.png); background-repeat:no-repeat; background-position: -152px 0px; cursor:pointer;}

.yearMarker { position:relative; z-index: 91; top:0px; right: 0px; width: 95px; height: 365px; text-align:right; font-family:Verdana, Geneva, sans-serif; font-weight:bold; color: #000; }

.dateButton { width: 40px; cursor:pointer;}
#dateButton1 { position:absolute; z-index: 102; top:25430px; left: 5px; width: 30px; height: 30px; text-align:right; font-family:Verdana, Geneva, sans-serif; font-weight:bold; color: #000; }
#dateButton2 { position:absolute; z-index: 102; top:24687px; left: 5px; width: 30px; height: 30px;}
#dateButton3 { position:absolute; z-index: 102; top:21212px; left: 5px; width: 30px; height: 30px;}

/*---------- End Timeline 2 ---------*/ 
```

和脚本本身：

```
// JavaScript Document
$(document).ready(function() {

$('#yearUp').click(function(){
    $('.timeHolder').animate({
        marginTop: '+=365px',
    }, 1000);
})
$('#yearDown').click(function(){
    $('.timeHolder').animate({
        marginTop: '-=365px',
    }, 1000);
})
$('#decadeUp').click(function(){
    $('.timeHolder').animate({
        marginTop: '+=3650px',
    }, 1000);
})
$('#decadeDown').click(function(){
    $('.timeHolder').animate({
        marginTop: '-=3650px',
    }, 1000);
})

}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T16:38:41.150

进行了一些更改以使其正常工作。

首先是我将动画更改为使用`top`定位而不是`margin`. 接下来，我找到了最后一个元素的位置（1943 年），并在事件中放置了一个简单`if`的`click`事件，检查动画是否会超过这个最终位置。如果是这样，动画将不会触发。您可以将同样的心态应用于您的其他功能。我通常不喜欢使用绝对值来处理这样的事情，但有时它工作得很好，尤其是当列表是静态的时。

[http://jsfiddle.net/eqW66/9/](http://jsfiddle.net/eqW66/9/)

```
$('#yearUp').click(function(){
    var pos = $('.timeHolder').position();
    if (pos.top + 365 <= 24820) {
        $('.timeHolder').animate({
            top: '+=365px',
        }, 1000);
    }
}); 
```

****更新 ******

 **其余 4 个函数请参见下面的 jsfiddle。您必须切换到 >= 才能向下移动。

[http://jsfiddle.net/eqW66/9/](http://jsfiddle.net/eqW66/9/)

```
$('#yearDown').click(function(){
    var pos = $('.timeHolder').position();

    if (pos.top - 365 >= -2920) {
        $('.timeHolder').animate({
            top: '-=365px',
        }, 1000);
    }
});

$('#decadeDown').click(function(){
    var pos = $('.timeHolder').position();

    if (pos.top - 3650 >= -2920) {
        $('.timeHolder').animate({
            top: '-=3650px',
        }, 1000);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:57:09.593

看起来您正在`top`为`.timeView`元素初始化，但正在为`marginTop`. 我会说只是动画顶部。然后你可以检查 top 是否接近 0 并且只动画那么远。[这是一个更新的 jsfiddle](http://jsfiddle.net/eqW66/6/)。

我只更改了 yearup 事件，但您应该能够弄清楚其余的。要检测它是否接近底部，您必须使用当前顶部值加上容器的高度，并将其与完整的可滚动高度进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T13:34:19.033

好的，弄清楚了，您必须找出初始位置并从起点减去和添加位置，因此：

我的 div 总高度是 28105px

我的起点是 2011 年（当年）：

2011的位置是24829px

文档就绪时的 this 设置为 0

所以你必须弄清楚 where3 停止和开始

这是脚本：

```
// JavaScript Document 

$(document).ready(function() {

    $('#yearUp').click(function(){
        var pos = $('.timeHolder').position();        
        if (pos.top + 365 <= 24820) {
            $('.timeHolder').animate({
                top: '+=365px',
            }, 1000);
        }else{
            return false
        }
    });
    $('#yearDown').click(function(){
        var pos = $('.timeHolder').position();        
        if (pos.top - 365 >= -2555) {
            $('.timeHolder').animate({
                top: '-=365px',
            }, 1000);
        }else{
            return false
        }
    });
    $('#decadeUp').click(function(){
        var pos = $('.timeHolder').position();        
        if (pos.top + 3650 <= 24820) {
            $('.timeHolder').animate({
                top: '+=3650px',
            }, 1000);
        }else{
            return false
        }
    });
    $('#decadeDown').click(function(){
        var pos = $('.timeHolder').position();        
        if (pos.top - 3650 >= -2555) {
            $('.timeHolder').animate({
                top: '-=3650px',
            }, 1000);
        }else{
            return false
        }
    });

}); 
```

非常感谢@PJH 帮助指导道路，对不起，我无法为小提琴提供更多图像和东西，但在 Intranet 内是不允许的。感谢其他所有人的意见**

# symfony - Symfony2/Doctrine 中实体关系的复杂排序

> ID：12008471
> 
> 赞同：2
> 
> 时间：2012-08-17T15:14:17.767
> 
> 标签：symfony, doctrine, dql

我正在尝试为现有数据库设置一个简单的论坛查看器。主要作为学习 Symfony2 的练习。

与大多数论坛一样，它有一些相互关联的东西。主要是在这样的链中：

```
Forum -> Thread -> Comment -> Author 
```

我使用注释创建了一个模式，该模式描述了论坛 > 线程之间以及线程 > 评论之间的*OneToMany*关系。作者是*OneToOne*，带有 Thread 和 Comment。

我的问题是我想在我的论坛中显示一个主题列表，该列表按每个主题中最新评论的时间戳排序（这在论坛上很正常）。更复杂的是，我还需要确保粘性或固定线程位于列表顶部。

我一直在尝试将代码放在不同的地方，但我不确定它的最佳实践位置。我在我的 ForumRepository 中尝试了 DQL 解决方案

```
public function findWithOrderedComments($forum_id)
{
    $forum = $this->getEntityManager()
        ->createQuery('SELECT f,
           (SELECT c.time
                FROM xxForumArchiveBundle:Comment c
                WHERE c.post = p.id
                ORDER BY c.time DESC) AS time
            FROM xxForumArchiveBundle:Forum f 
            JOIN f.posts p
            WHERE f.id = :forum_id
            ORDER BY time')
        ->setParameter('forum_id', $forum_id)
        ->getSingleResult();

    return $forum[0];
} 
```

但这（除了将我的查询响应转换为数组之外）什么也没做。我玩弄了在模型中放置一些排序逻辑以返回排序的评论集合，但我 a) 不确定这是否是正确的位置，并且 b) 没有解决我在论坛页面上的排序顺序。我也想过在树枝模板中这样做，但这对我来说似乎是错误的。我也可以在控制器中执行此操作，但鉴于 Doctrine 已经加载了数据（？）我相当肯定那是一种浪费。

在我的树枝模板中，我基本上是在做`{% for post in forum.posts %}`.

我该怎么做？

# apache-camel - 用 Camel 的表达语言获取和格式化昨天的日期

> ID：12008472
> 
> 赞同：11
> 
> 时间：2012-08-17T15:14:32.883
> 
> 标签：apache-camel

我在 Camel 的路径中使用日期：

```
fileName=${date:now:dd-MM-yyyy} 
```

但我现在需要的是 - 1 天。那可能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-17T18:58:42.317

好吧，不是直接的。简单语言中的 date: 对象只能获取当前时间（或您放置在标头中的某个时间值 - 您可以在 java 或类似语言中执行此操作。

但你也可以这样做。创建一个类：

```
public class YesterdayBean{
    public String getYesterday(){
        Calendar cal = Calendar.getInstance();
        DateFormat dateFormat = new SimpleDateFormat("dd-MM-yyyy");
        cal.add(Calendar.DATE, -1); 
        return dateFormat.format(cal.getTime());  
    }
} 
```

将它作为 bean 连接到您的 Camel（或 spring，如果您使用它）注册表。如果您不确定如何执行此操作，请查找[注册表和](http://camel.apache.org/registry.html)[bean](http://camel.apache.org/bean)的“使用”部分。

假设您在注册表中将 bean 命名为“昨天”，使用 spring：

```
<bean id="yesterday" class="some.package.YesterdayBean"/> 
```

然后只需将它与文件组件一起使用。

```
.to("file:fo/bar?fileName=${bean:yesterday}") 
```

如果这只是您需要的一个地方，并且您正在使用 Java DSL，您也可以使用 Java 处理器预先创建日期并将其放在标题中。

像这样：

```
from("file:somewhere")
        .process(new Processor(){
            public void process(Exchange ex){
                Calendar cal = Calendar.getInstance();
                cal.add(Calendar.DATE, -1); 
                ex.getIn().setHeader("yesterday",cal.getTime());
            }
        })
       .to("file:target?fileName=${date:header.yesterday:dd-MM-yyyy}");
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-05-13T21:24:06.450

```
fileName=${date:now-24h:dd-MM-yyyy} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-22T17:24:27.163

我对此很好奇，并从骆驼邮件列表中寻求了一些帮助。实际上，您可以使用内联脚本（例如 groovy）执行您所要求的操作。见[这里](http://camel.465427.n5.nabble.com/use-of-expression-in-file-name-tp5731154p5731283.html)。

我得到这个为我工作：

```
<camelContext id="contextname">
    <route id="routename">
        <from uri="file://\temp\?fileName=#myGroovyExp" />
        <split>
            <tokenize token="(?=MSH\|)" regex="true" />
            <to uri="bean:filePickupByDateTest?method=test" />
        </split>
    </route>
</camelContext>

<spring:bean id="myGroovyExp" class="org.apache.camel.model.language.GroovyExpression">
    <spring:constructor-arg index="0" value="new Date().previous().format('MMddyy') + 'pa'" />
</spring:bean> 
```

我昨天的文件名在哪里：MMddyypa

您只需将脚本正文更改为：

```
new Date().previous().format('dd-MM-yyyy') 
```

当然，您需要在您的路径上使用 camel-groovy（或您使用的任何脚本语言）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-16T10:51:47.713

使用文件名过滤器的解决方案：

创建一个实现org.apache.camel.component.file.GenericFileFilter的类，并实现方法accept来验证文件名

```
public class CustomFileName implements GenericFileFilter {

    public boolean accept(GenericFile file) {

        Calendar cal = Calendar.getInstance();
        DateFormat dateFormat = new SimpleDateFormat("yyyyMMdd");
        cal.add(Calendar.DATE, -1); 

        return file.getFileName().equals ("FILENAME_PREFIX"+dateFormat.format(cal.getTime()) + ".EXT");
    }
} 
```

在 Spring 配置中

```
<bean id="customFileFilter" class="com.sample.proj.util.CustomFileName"/> 
```

和

```
<route>
    <description>Route for copying file from one location to another with custom file name filter</description>
    <from uri="file://C:\Source?filter=#customFileFilter" />
    <to uri="file://C:\Destination" />
</route> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-06T11:06:24.973

是的，您可以这样做，请参阅 Alberto 的回答。对此添加一些解释：Camel Simple 支持[文档](https://camel.apache.org/components/next/languages/simple-language.html#Simple-Variables)中写入的偏移量作为变量“日期”的描述。

# javascript - 如何在 jQuery 中一次性设置多个班级编号？

> ID：12008477
> 
> 赞同：1
> 
> 时间：2012-08-17T15:15:01.073
> 
> 标签：javascript, jquery, class

你能告诉我如何在一篇文章中设置多个班级号码吗？我有`$('.oven_program_01')`课，并且 .click 动作。单击具有 from 类的元素后，将触发此操作`$('.oven_program_01')`to `$('.oven_program_12')`。你能告诉我如何在不重复这门课的情况下写这个吗？类似的东西：`$('.oven_program_'01-12')`非常感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:19:34.463

类实际上旨在标记页面上事物的“类型”。如果要标记单个元素，则应使用 id 属性。

因此，对于您的元素，我会将“oven_program_01”的 id 设置为“oven_program_12”，并为所有元素设置一个“oven_program”类。

通过这种方式，您可以选择特定元素：

```
$("#oven_program_01") 
```

并选择此类型的所有元素：

```
$(".oven_program") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T15:17:01.337

您可以使用`Attribute Starts With`选择器：

> `[name^="value"]`

```
$('elem[class^="oven_program_"]').click(function(){
  // ...
}) 
```

请注意，通过使用此选择器，类属性`oven_program_`不能以其他类名开头。

* * *

或者[`Attribute Contains Selector`](http://api.jquery.com/attribute-contains-selector/)：

> 选择具有指定属性且值包含给定子字符串的元素。`[name*="value"]`

```
$('elem[class*="oven_program_"]').click(function(){
  // ...
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T15:18:45.160

类，如 ID，也可以用于 JavaScript 脚本，但与 ID 不同的是，它们可以在同一个 HTML 文档中多次使用。这种内容与表示的分离使得由 CSS 提供支持的网站更加健壮，但有些人不知道他们可以在多大程度上使用类。类不仅可以多次使用，而且可以在一个元素上使用多个：

我认为拥有不同的课程并不是一个好主意，最好使用相同的课程，不同的ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T15:16:23.053

```
$("[class^=oven_program_]").click(....) 
```

虽然最好的办法是为你的对象使用两个类，比如

```
class="oven_program_01 oven_clickable" 

$(".oven_clickable").click() 
```

或者更好地使用 ID 和公共类。

```
id="oven_program_01" class="oven_clickable" 
```

顺便说一句，这就是类和 ID 的目的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T15:20:11.480

```
$('[class^=oven_program_]') 
```

这将选择任何*以* `oven_program_`.

需要更具体吗？jQuery 没有内置的正则表达式选择器，但有人这样做：

[http://james.padolsey.com/javascript/regex-selector-for-jquery/](http://james.padolsey.com/javascript/regex-selector-for-jquery/)

没用过，不过好像可以

```
$(':regex(class, oven_program_\d\d?)') 
```

最后，我不是 100% 确定你在做什么，但我什至不会使用课程。我会做类似的事情`<element class="oven_program some other class names" data-oven_program="12">`。如有必要，您也可以在数据属性上使用相同的选择器。

# android - 我的相对布局隐藏了另一个相对布局

> ID：12008483
> 
> 赞同：0
> 
> 时间：2012-08-17T15:15:21.270
> 
> 标签：android, android-layout, android-relativelayout

我正在开发一个类似于菜单的应用程序，并且带有选项的菜单的相对布局被另一个包含图像的相对布局覆盖。你们能告诉我我哪里出错了吗？实际上，我希望菜单位于顶部，选项位于中间，图像位于底部。

这是我的xml代码：

```
<RelativeLayout
    android:id="@+id/RelativeLayout02"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android >

    <ImageView
        android:id="@+id/imageView3"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="false"
        android:contentDescription="@string/desc"
        android:scaleType="fitEnd"
        android:src="@drawable/half" />

</RelativeLayout>

<RelativeLayout
    android:id="@+id/RelativeLayout01"
    android:layout_width="match_parent"
    android:layout_height="247dp" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:contentDescription="@string/desc"
        android:src="@drawable/paranoid_android" />

    <TextView
        android:layout_width="200dp"
        android:layout_height="50dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_centerInParent="true"
        android:text="@string/menu"
        android:textColor="@color/white"
        android:textSize="@dimen/titlefont" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:contentDescription="@string/desc"
        android:src="@drawable/paranoid_android" />
</RelativeLayout> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:32:57.667

只需将它们全部放在一个相对布局中 - 这就是相对布局的用途。在其余组件之前或之后添加图像，使其位于其下方或上方。相对布局的设计使得在其中移动一个视图不会影响布局中其他视图的定位，因此您可以将视图分层放置。

# maven - 是否有可能获得反向依赖？

> ID：12008485
> 
> 赞同：3
> 
> 时间：2012-08-17T15:15:27.140
> 
> 标签：maven, dependencies

我有一个奇怪的问题=)。Maven 有漂亮的命令 - mvn dependency:tree，它在树中显示依赖模块，例如模块 A 依赖于模块 B。也许 mvn 有一些插件可以显示模块 B 的使用位置？例如 - A 中使用的模块 B

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-31T15:43:58.387

您可以将依赖项：树与变量“包含”一起使用：

```
mvn dependency:tree -Dincludes=groupId:B 
```

它会给出类似的东西

```
[INFO] ------------------------------------------------------------------------
[INFO] Building B 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.9:tree (default-cli) @ B ---
[INFO] groupId:B:jar:0.0.1-SNAPSHOT
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building A 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.9:tree (default-cli) @ A ---
[INFO] groupId:A:jar:0.0.1-SNAPSHOT
[INFO] \- groupId:B:jar:0.0.1-SNAPSHOT:compile
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building C 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.9:tree (default-cli) @ C ---
[INFO] 
```

然后您会看到只有模块 A 和 B 具有包含模块 B 的依赖关系树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T15:54:44.853

maven中没有这样的机制。

对于 maven 中央存储库，搜索引擎[http://mvnrepository.com/](http://mvnrepository.com/)提供了一个部分*This artifact is used by ...*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T15:42:35.013

插件无法真正回答这样的问题，因为它只知道当前反应堆构建中的模块。其他地方可能存在一些其他依赖关系 - 但依赖关系信息只存储在一个方向上。

话虽如此，您可以`--also-make-dependents`在构建多模块项目时使用该开关，它将构建您指定的模块的依赖模块。因此，您可以看到它们是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-09T13:21:54.223

至少在查看大型多模块结构时，versions-maven-plugin 可能会有所帮助[。](http://mojo.codehaus.org/versions-maven-plugin/)

# python - 使用 PIL 在 Python 中的文本周围创建一个光环？

> ID：12008493
> 
> 赞同：6
> 
> 时间：2012-08-17T15:15:42.557
> 
> 标签：python, text, python-imaging-library

我正在使用 PIL 为一些图片添加水印，但我很难阅读一些文本（深色背景上的黑色文本）。我不能只更改文本颜色，因为我有多种背景颜色。有什么方法可以在文本周围添加光环效果？

例如： http: [//i.imgur.com/WYxSU.jpg](http://i.imgur.com/WYxSU.jpg) 底部的文字是我得到的，顶部的文字是我希望得到的（除了颜色）。我真的只需要在文本周围画一个细轮廓。有任何想法吗？如果您真的认为它会有所作为，我可以上传一些代码，但这只是一个普通的 PIL ImageDraw.Draw 命令。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-17T17:02:56.227

如果您不太关心速度，可以使用组合来完成：

1.  `RGBA`在空白图像上绘制带有光晕颜色的文本
2.  模糊它
3.  用文字颜色再次绘制
4.  反转此图像以获得合成蒙版
5.  与原始图像“合并”

例如：

```
import sys
import Image, ImageChops, ImageDraw, ImageFont, ImageFilter

def draw_text_with_halo(img, position, text, font, col, halo_col):
    halo = Image.new('RGBA', img.size, (0, 0, 0, 0))
    ImageDraw.Draw(halo).text(position, text, font = font, fill = halo_col)
    blurred_halo = halo.filter(ImageFilter.BLUR)
    ImageDraw.Draw(blurred_halo).text(position, text, font = font, fill = col)
    return Image.composite(img, blurred_halo, ImageChops.invert(blurred_halo))

if __name__ == '__main__':
    i = Image.open(sys.argv[1])
    font = ImageFont.load_default()
    txt = 'Example 1234'
    text_col = (0, 255, 0) # bright green
    halo_col = (0, 0, 0)   # black
    i2 = draw_text_with_halo(i, (20, 20), txt, font, text_col, halo_col)
    i2.save('halo.png') 
```

它有很多优点：

*   结果很光滑，看起来不错
*   您可以选择不同的过滤器而不是`BLUR`获得不同的“光环”
*   它甚至可以使用非常大的字体并且看起来仍然很棒

要获得更厚的光环，您可以使用这样的过滤器：

```
kernel = [
    0, 1, 2, 1, 0,
    1, 2, 4, 2, 1,
    2, 4, 8, 4, 1,
    1, 2, 4, 2, 1,
    0, 1, 2, 1, 0]
kernelsum = sum(kernel)
myfilter = ImageFilter.Kernel((5, 5), kernel, scale = 0.1 * sum(kernel))
blurred_halo = halo.filter(myfilter) 
```

该零件`scale = 0.1 * sum(kernel)`使光晕变厚（小值）或变暗（大值）。

# unit-testing - TFS 2010 Build 中的单元测试资产

> ID：12008494
> 
> 赞同：3
> 
> 时间：2012-08-17T15:15:45.393
> 
> 标签：unit-testing, tfsbuild

我有一个单元测试，它查看我的测试项目中包含的文本文件。我不得不采取这条路线，因为我似乎无法正确复制用户正在进入原始数据本身（其他系统）的 C# 字符串中的特殊字符。

单元测试在排列部分读取文件的内容，然后对内容进行操作以确保事情按计划进行。

在本地，测试运行良好——零问题。

我们运行 TFS2010 构建，我的构建每次都未能通过该测试，因为在构建服务器上运行测试时找不到文本文件本身。

我的文件目前位于测试项目本身名为“Assets”的目录中，文本文件的属性是：

*   构建操作：内容
*   复制到输出目录：始终复制

测试代码是

```
 [TestMethod]
    public void Broken_First_Token_Ok_Second_Returns_Full_String()
    {
        string rawText = string.Empty;

        // load the broken translation
        using (StreamReader reader = new StreamReader(@"Assets\BrokenTranslation.txt")){
            rawText = reader.ReadToEnd();
        }

        string expected = rawText;

        string actual = [Some code that should return the proper values]

        Assert.AreEqual(expected, actual, "Failed to return proper match");

    } 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T09:06:29.367

您可以通过 DeploymentItem 属性可靠地使文本文件可用于您的测试。这篇博客文章描述了如何以及为什么使用它： http: [//luisfsgoncalves.wordpress.com/2011/05/31/unit-tests-with-dependencies-on-team-foundation-server/](http://luisfsgoncalves.wordpress.com/2011/05/31/unit-tests-with-dependencies-on-team-foundation-server/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:27:19.293

1 您必须在您的构建服务器中部署您的文件，您必须将您的文件添加到您的源代码控制中。

只需签入您的文件

2 您必须确保您引用的路径正确：@"Assets\BrokenTranslation.txt

# blackberry - 如何在黑莓中将高度设置为 GridFieldManager

> ID：12008502
> 
> 赞同：2
> 
> 时间：2012-08-17T15:16:06.810
> 
> 标签：blackberry

如何`GridFieldManager`在 BlackBerry 中将特定高度设置为 a？

任何人都可以提供示例代码吗？

我从 xml 获取数据并将其添加到 a`GridFieldManager`但我想设置的高度`GridFieldManager`并给它一个滚动条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:44:54.007

我只想放在`GridFieldManager`里面`VerticalFieldManager`：

```
VerticalFieldManager container = new VerticalFieldManager(VerticalFieldManager.VERTICAL_SCROLL | VerticalFieldManager.VERTICAL_SCROLLBAR);
...
GridFieldManager grid =...
...
container.add(grid);
add(container); 
```

`container`在为您的而不是设置高度之后`grid`。

# java - 如何使 BMP 填充 JPanel

> ID：12008507
> 
> 赞同：3
> 
> 时间：2012-08-17T15:16:14.893
> 
> 标签：java, image, swing

如何使 BMP 填充 JPanel？

```
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class BMPPanel extends JPanel {

    String sciezka;
    Image image;
    int skala;
    int rozdzielczosc;
    Dimension d;
    public static int NORMALNA = 0, MALA = 1;

    public BMPPanel(String sciezka, int skala, int rozdzielczosc) {
        this.sciezka = sciezka;
        this.skala = skala;
        this.rozdzielczosc  = rozdzielczosc;
        super.setMaximumSize(d);
        this.d = new Dimension(400,400);
        this.go();
    }
    public BMPPanel(String sciezka, int skala) {
        this(sciezka,skala,200);
    }

    public void go() {
        try {
            File input = new File(sciezka);
            image = ImageIO.read(input);
        } catch (IOException e) {
            e.printStackTrace();
        }

        setPreferredSize(new Dimension(image.getWidth(null),
                image.getHeight(null)));
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponents(g);
        Graphics2D g2d = (Graphics2D) g;
        g2d.drawImage(image, 0, 0, this);
    }

    @Override 
    public void setMaximumSize(Dimension d){

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:35:32.103

您需要回答的第一个问题是，您是否希望保持 BMP 的纵横比？

如果你不这样做，那么它很简单

```
Image scaled = image.getScaledInstance(getWidth() - 1, getHeight() - 1, Image.SCALE_SMOOTH); 
```

如果没有，那么你需要问问你自己。我是要“填充”还是“适合”图像。填充将允许图像溢出面板，但会完全填充它，适合将确保整个图像适合面板，但可能会留下间隙。

阅读这个[回答](https://stackoverflow.com/questions/11959758/java-maintaining-aspect-ratio-of-jpanel-background-image/11959928#11959928)类似问题的答案

# php - 获取 IMAP 消息正文的字符集（PHP-IMAP 扩展）

> ID：12008513
> 
> 赞同：4
> 
> 时间：2012-08-17T15:16:23.583
> 
> 标签：php, utf-8, imap

既不`imap_headerinfo`也不在结果中`imap_fetchstructure`包含明显的`Content-type`标题[显然，我希望在`imap_headerinfo`] 下找到它。我可以使用什么函数来获取原始标头，以便我可以解析该标头并将消息正文相应地转换为 UTF-8？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:24:28.120

当然，在我提出一个问题后，我在八分钟后弄清楚了。

解决方案是像这样运行`imap_fetchmime`消息/部分组合

```
$headers = imap_fetchmime($this->imapStream, $msgNumber, $partNumber); 
```

这将包含`Content-type`每个部分的标题（如果可用）。

# mysql - 通过 Linked MySQL-Database 更新 MySQL 数据库的 MSSQL

> ID：12008514
> 
> 赞同：1
> 
> 时间：2012-08-17T15:16:28.390
> 
> 标签：mysql, sql, sql-server, linked-list

我正在使用 MSSQL Server 2008。我正在尝试更新 MySQL 数据库。我将 MSSQL-Database 与 MySQL-Database 一起加入，现在尝试完成更新，但遇到了一个奇怪的问题。

当我执行以下查询时，我得到的结果数量有限：

```
select *
FROM [SQL-Database].[dbo].[Table] as c left join
openquery(MYSQL, 'select * from MySQL-Database.Table')
on c.KuNr=kunden_id collate German_PhoneBook_BIN
where c.Auswahltyp='2' and c.[gelöscht]=0 
                       and c.[Mietzeit bis]>GETDATE() and c.aktiveMail>'0' 
```

当我进行更新时，它会更新数据库中的所有行：

```
update openquery(MYSQL, 'select * from MySQL-Database.Table')
set paket_id=7
FROM [SQL-Database].[dbo].[Table] as c left join
openquery(MYSQL, 'select * from MySQL-Database.Table')
on c.KuNr=kunden_id collate German_PhoneBook_BIN
where c.Auswahltyp='2' and c.[gelöscht]=0 
                       and c.[Mietzeit bis]>GETDATE() and c.aktiveMail>'0' 
```

区别只是选择和更新，但它有点忽略了更新中的“位置”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:50:14.870

为您的 openquery 命名，它应该可以工作，例如：

```
update k
set paket_id=7
FROM [SQL-Database].[dbo].[Table] as c left join
openquery(MYSQL, 'select * from MySQL-Database.Table') as k
on c.KuNr=k.kunden_id collate German_PhoneBook_BIN
where c.Auswahltyp='2' and c.[gelöscht]=0 
and c.[Mietzeit bis]>GETDATE() and c.aktiveMail>'0' 
```

# objective-c - 命中测试 UIView 子类的填充区域

> ID：12008515
> 
> 赞同：4
> 
> 时间：2012-08-17T15:16:31.213
> 
> 标签：objective-c

我有一些 UIView 子类，我在 drawRect 中绘制 UIBezierPaths。在添加这些视图的 viewController 中，我需要做一个点击测试，看看是否在贝塞尔路径内发生了点击。我尝试在视图子类中创建一个 UIBezierPath 变量，然后对其进行测试。但是，当然，偏移是完全错误的——我会在屏幕的上角得到点击，而不是在形状上。

谁能建议最好的方法来做到这一点？这有意义吗，还是我应该添加一些代码？

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:27:10.783

这是我拥有的自定义三角形视图。它比贝塞尔路径简单得多，但我相信它应该工作得差不多。我还有一个类别，它基于每个像素的 alpha 级别进行命中测试，我将其用于具有 alpha 层的 UIImages。（它在这篇文章[Retrieving a pixel alpha value for a UIImage 中](https://stackoverflow.com/questions/1042830/retrieving-a-pixel-alpha-value-for-a-uiimage)）

```
- (void)drawRect:(CGRect)rect
{    
    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextMoveToPoint(context, 0.0, 0.0);
    CGContextAddLineToPoint(context, rect.size.width, 0.0);
    CGContextAddLineToPoint(context, 0.0, rect.size.height);
    CGContextClosePath(context);

    CGContextSetFillColorWithColor(context, triangleColor.CGColor);
    CGContextFillPath(context);

    CGContextSaveGState(context);

    [self.layer setShouldRasterize:YES];
    [self.layer setRasterizationScale:[UIScreen mainScreen].scale];

}

- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{
    CGMutablePathRef trianglePath = CGPathCreateMutable();
    CGPathMoveToPoint(trianglePath, NULL, 0.0, 0.0);
    CGPathAddLineToPoint(trianglePath, NULL, self.frame.size.width, 0.0);
    CGPathAddLineToPoint(trianglePath, NULL, 0.0, self.frame.size.height);
    CGPathCloseSubpath(trianglePath);

    if (CGPathContainsPoint(trianglePath, nil, point, YES)) {
        CGPathRelease(trianglePath);
        return self;
    } else {
        CGPathRelease(trianglePath);
        return nil;
    }
} 
```

# c - 是否设置 FILE* 等于 stdout 可移植？

> ID：12008516
> 
> 赞同：5
> 
> 时间：2012-08-17T15:16:36.503
> 
> 标签：c, stdout

我有一个函数需要能够写入标准输出或文件，这取决于用户想要什么。它默认为标准输出。为此，我正在执行以下操作（减去错误检查等）：

```
FILE* out;
if (writeToFile) { /*Code to open file*/; }

else
    out = stdout;

// ...rest of the function goes here

if (out != stdout)
    fclose(out); 
```

这当然可以，但我不知道它的便携性。如果不是，和/或它还有另一个问题，我应该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T15:20:30.620

是的，它是可移植的，而且很好，前提是您不要弄乱 的低级实现`*stdout`（例如通过调用`close(fileno(stdout))`Posix 或使用`dup`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T15:21:36.777

应该没问题。如果您在 DLL 的边界上来回传递指针，您可能会遇到麻烦（即，DLL 外部的 C 代码将指向标准输出的指针传递给 DLL 内部的 C 代码），但除此之外它应该是可移植的。

# android - 多屏支持和R.java无法生成

> ID：12008519
> 
> 赞同：1
> 
> 时间：2012-08-17T15:16:39.653
> 
> 标签：android, xml

我正在处理 android 应用程序的多屏支持问题。为了支持不同的屏幕尺寸，我遵循了这个[线程](https://stackoverflow.com/questions/8428096/design-layout-for-multiple-screens)中的第二个答案，即在文件系统中创建这些文件夹。

但是我没有通过 eclipse 创建这些文件夹，实际上我不知道我们是否可以这样做。我直接在文件系统中创建它们。然后，我重命名了 xml 文件并在原始布局文件夹中添加了一个新的 xml 文件。接下来，我将原始布局文件夹中的 xml 文件复制到每个新目录中。问题是：创建不同的屏幕尺寸布局是否正确？

在此之后，我去活动（.java 文件）来更改布局名称，因为我重命名了 xml 文件。但是我找不到重命名的文件，但找不到原始文件。所以我关注了这个[线程](https://stackoverflow.com/questions/6759891/android-i-got-error-when-open-xml-file-in-eclipse)，因为我也遇到了同样的问题。执行项目-> 清理后，我的每个活动都有错误符号（红十字），并且在导入中出现，由于未生成，`import com.mylocalname.R;`因此无法解决。`R.java`我没有导入`android.R`。

根据我的发现，没有生成 R.java 可能是因为 xml 文件有一些错误。但是我在这些文件上看不到任何红十字。那么如何解决这个问题呢？

所以这个项目现在一团糟。有谁知道如何解决这个问题？提前非常感谢。

编辑：

我正在使用 android 平台 4.1 和 API 级别 16。

xml 文件在 layout 文件夹中的图形布局（不在 layout-X 或 layout-XX 文件夹中）：

![图形布局](../Images/1de08d0efd71c2992a2f3cdc3807acfa.png)

具有 res 的项目结构展开：

![项目结构](../Images/6343d8de1c30cb36915dd31282406470.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:25:37.587

您是否检查过 Eclipse 中的问题视图？如果一个或多个 XML 文件中有错误，它肯定应该在该列表中。

据我所知，XML 文件不会像 Java 文件那样在它们上面有一个红十字——不过我现在无法确认。但是当您打开文件时，错误应该会显示在图形视图和源代码视图中（错误行旁边的红色 x）。

# javascript - 附加 jQuery 代码以运行 onLoad 并单击按钮？

> ID：12008523
> 
> 赞同：1
> 
> 时间：2012-08-17T15:17:02.197
> 
> 标签：javascript, jquery, geolocation

我有以下代码获取用户当前的邮政编码并将其显示在 div 中：

```
(function ($, geolocation) {
    if (geolocation) {
        geolocation.getCurrentPosition(function (position) {
            $.getJSON(
                "http://ws.geonames.org/findNearestAddressJSON?callback=?",
                {
                    lat : position.coords.latitude,
                    lng : position.coords.longitude
                },
                function (data) {
                    $(function () {
                        $('#zip').text(data.address.postalcode);
                    });
                }
            );
        });
    }
}(jQuery, navigator.geolocation)); 
```

代码运行`on document ready`，我相信。这与运行的代码相同`onLoad`吗？无论如何，单击按钮时是否可以运行此代码？我在想这样的事情会起作用，但是使用它不会产生 zipcode `on document ready`，或者在单击按钮时：

```
function update() {
    ...code from above
}
$('#button').click(function(){update();}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T15:24:48.073

这不会在 上运行`document.ready`，除了代码的一部分（在`function (data) { }`call.

不，`document.ready`不同于`onLoad`. `document.ready`是当 DOM 可以通过 Javascript 访问时（但不一定呈现/获取）；`onLoad`是所有内容都已加载（并且可能已渲染-想想图像等）的时间。

要在单击按钮时运行相同的功能，您已经或多或少地走在正确的轨道上。您想要引用该函数：

```
var update = function ($, geolocation) {
    // blah
};
// this will call the same function like you're doing above
update(jQuery, navigator.geolocation); 
```

然后通过点击处理程序运行：

```
// don't forget that this has to be in a document.ready handler
jQuery(function ($) {
    $('#button').click(function () { update($, navigator.geolocation); });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T15:30:14.483

将您的代码放在它自己的函数中，并在加载时调用该函数。然后有你的 button `onclick(getZipCode())`，它也将调用相同的函数。如果您不希望它加载，请将其从`$(function() {});`jQuery 中删除。

```
$(function() {
    //On Document Ready, call getZipCode
    getZipCode(navigator.geolocation);
});

function getZipCode(geolocation) {
    if (geolocation) {
        geolocation.getCurrentPosition(function (position) {
           $.getJSON(
               "http://ws.geonames.org/findNearestAddressJSON?callback=?",
                {
                    lat : position.coords.latitude,
                    lng : position.coords.longitude
                },
                function (data) {
                    $(function () {
                        $('#zip').text(data.address.postalcode);
                    });
                }
            );
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T15:22:57.707

**我相信，代码在准备好的文档上运行。这与运行 onLoad 的代码相同吗？**

好吧，`onload event`当从服务器获取整个页面并加载所有图像标签或其他元素时会触发。这肯定需要很长时间，Jquery 使用自己定义的名为 的事件`document.ready`，当页面准备好处理时触发您的脚本（这将在您的文档加载之前发生）

这是改编自 JQuery Enlightenment book ：

> window.onload 本机 JavaScript 事件可用于在浏览器中完全加载网页时以编程方式处理。但是，因为指示所有内容已加载的事件在加载所有资源（图像、Flash 等）之前不会触发，因此等待此事件可能会相当耗时。更好的解决方案是在 DOM 可供操作时立即开始编写脚本。jQuery 提供了一个自定义事件，该事件在 DOM 准备好编写脚本之后但在 window.onload 事件触发之前执行。这是一个名为 ready() 的自定义 jQuery 事件。有一个参数传递给这个函数，它是对 jQuery 函数的引用。

而对于点击功能，你的更新功能在哪里？尝试在您的 document.ready 之外定义它。

# java - JSF 多输入文本（其中一个是必需的）

> ID：12008526
> 
> 赞同：1
> 
> 时间：2012-08-17T15:17:11.980
> 
> 标签：java, validation, jsf, input

我有 JSF 页面，可以说我有

名字：*_* _

姓氏：*_* _

城市：*_* _

状态：*_* _

||人员搜索||

假设我有一个搜索按钮。因此，如果用户输入其中一个字段（名字或姓氏或城市或州），那么他可以按搜索，否则它应该会出错。

我不知道该怎么做？在 JSF 中，如何在不进入 Bean 类的情况下进行验证以获取“需要其中一个字段”。我不想使用 Validator，因为对于每个字段，它都必须转到 Validator 类，并且可能会影响性能。如果您对此有任何解决方案，请告诉我。感谢您的帮助，我很感激。

# cocos2d-iphone - 调整 CCLayer 的大小。不缩放

> ID：12008529
> 
> 赞同：1
> 
> 时间：2012-08-17T15:17:31.183
> 
> 标签：cocos2d-iphone

我有一个`CCLayer`，应该从上到下“不掩饰”。

我实施`GLScissor`了访问前和访问后以减少超出层范围的内容：

```
#pragma mark Clipping
-(void)visit {
    [self preVisit];
    [super visit];
    [self postVisit];
}
-(void)preVisit {
    if (!self.visible)
        return;

    glEnable(GL_SCISSOR_TEST);
    CGRect clipRect = [self boundingBox];
    CGPoint origin = [self convertToWorldSpaceAR:clipRect.origin];
    CGRect scissorRect = CGRectMake(origin.x - self.anchorPoint.x * clipRect.size.width, 768 - origin.y - self.anchorPoint.y * clipRect.size.height, clipRect.size.width, clipRect.size.height);

    scissorRect = CC_RECT_POINTS_TO_PIXELS(scissorRect);

    glScissor((GLint) scissorRect.origin.x, (GLint) scissorRect.origin.y,
          (GLint) scissorRect.size.width, (GLint) scissorRect.size.height);
}
-(void)postVisit {
    glDisable(GL_SCISSOR_TEST);
} 
```

我`CCLayer`通过将 contentSize 设置为 1024x0 并使用预定的调用来实现增长：

```
-(void) grow {
    float height = [self contentSize].height + 2;
    if (height >= 768){
        [self unschedule:@selector(grow)];
        height = 768;
    }
    [self setContentSize:CGSizeMake(1024, height)];
} 
```

这就像一个魅力。`CCLayer`高度稳步增长，它被完美地揭开。但是，我不能使用任何缓动函数，因为我没有使用任何动作。

是否有任何动作可以调整`CCLayer`（不缩放）允许我使用缓动函数的大小，或者是否有任何其他（更好的）方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:02:42.657

最好的选择是使用 CCActionTween（以前：CCPropertyAction）并将其包装在一个缓动动作中：

```
id tween = [CCActionTween actionWithDuration:5 key:"sizeHeight" from:1024 to:0];
id ease = [CCEaseInOut actionWithAction:tween];
[layer runAction:ease]; 
```

这将修改`sizeHeight`图层命名的属性。您可以使用它来调整 contentSize，因为您不能直接补间 C 结构属性（如 CGSize 或 CGPoint）：

```
-(void) setSizeHeight:(float)height
{
    self.contentSize = CGSizeMake(self.contentSize.width, height);
} 
```

# c# - 策略设计模式是否适合基于字符串比较的逻辑？

> ID：12008533
> 
> 赞同：2
> 
> 时间：2012-08-17T15:17:41.450
> 
> 标签：c#, design-patterns, strategy-pattern

到目前为止，我的代码有多个 if else 语句分支，具体取决于字符串的值。IE

```
if(input == "condition1")
{
    // Some logic
}
else if(input =="condition1")
{
    // Some other logic
} 
```

我打算使用策略模式。这是正确的方法吗？如果是，如何根据条件创建正确的具体策略对象？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T15:22:57.783

在您提供的代码示例中，策略不会让您摆脱已有的 if 条件。您最终需要一个工厂来创建您的策略对象，如下所示：

```
static class StrategyFactory
{
    static IStrategy CreateStrategy(string input)
    {
        if (input == "condition1")
        {
            return new StrategyForCondition1();
        }
        else if (input == "condition2")
        {
            return new StrategyForCondition2();
        }
    }
} 
```

这就是为什么我不会为您的案例推荐 Strategy 的原因。

一个非常优雅的替代解决方案是使用字典，其中键是输入字符串值，动作是 if 语句的内容：

```
var actions = new Dictionary<string, Action>
{
    {"condition1", () => Console.WriteLine("condition1")},
    {"condition2", NameOfMethodThatHandlesCondition2}
}; 
```

现在，此解决方案的美妙之处在于您只需使用 1 行代码即可使用它：

```
actions[input]; 
```

请参阅此处的示例：http: [//elegantcode.com/2009/01/10/refactoring-a-switch-statement/](http://elegantcode.com/2009/01/10/refactoring-a-switch-statement/)

您的代码示例中的一个问题是您正在与一个字符串进行比较......这可能是任何可能的值。如果可能，请创建一个表示所有可能条件的枚举。这将防止遇到您没有预料到的字符串值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:20:57.930

这是一个很棒的站点，其中包含 C# 中不同模式类型的一些非常好的示例。

[C# 和 VB 中的策略设计模式](http://www.dofactory.com/Patterns/PatternStrategy.aspx#_self1)

```
// Strategy pattern -- Structural example
using System;

namespace DoFactory.GangOfFour.Strategy.Structural
{
  /// <summary>
  /// MainApp startup class for Structural
  /// Strategy Design Pattern.
  /// </summary>
  class MainApp
  {
    /// <summary>
    /// Entry point into console application.
    /// </summary>
    static void Main()
    {
      Context context;

      // Three contexts following different strategies
      context = new Context(new ConcreteStrategyA());
      context.ContextInterface();

      context = new Context(new ConcreteStrategyB());
      context.ContextInterface();

      context = new Context(new ConcreteStrategyC());
      context.ContextInterface();

      // Wait for user
      Console.ReadKey();
    }
  }

  /// <summary>
  /// The 'Strategy' abstract class
  /// </summary>
  abstract class Strategy
  {
    public abstract void AlgorithmInterface();
  }

  /// <summary>  
  /// A 'ConcreteStrategy' class
  /// </summary>
  class ConcreteStrategyA : Strategy
  {
    public override void AlgorithmInterface()
    {
      Console.WriteLine("Called ConcreteStrategyA.AlgorithmInterface()");
    }
  }

  /// <summary>  
  /// A 'ConcreteStrategy' class
  /// </summary>
  class ConcreteStrategyB : Strategy
  {
    public override void AlgorithmInterface()
    {
      Console.WriteLine("Called ConcreteStrategyB.AlgorithmInterface()");
    }
  }

  /// <summary>
  /// A 'ConcreteStrategy' class
  /// </summary>
  class ConcreteStrategyC : Strategy
  {
    public override void AlgorithmInterface()
    {
      Console.WriteLine("Called ConcreteStrategyC.AlgorithmInterface()");
    }
  }

  /// <summary>
  /// The 'Context' class
  /// </summary>
  class Context
  {
    private Strategy _strategy;

    // Constructor
    public Context(Strategy strategy)
    {
      this._strategy = strategy;
    }

    public void ContextInterface()
    {
      _strategy.AlgorithmInterface();
    }
  }
}

Output
Called ConcreteStrategyA.AlgorithmInterface()
Called ConcreteStrategyB.AlgorithmInterface()
Called ConcreteStrategyC.AlgorithmInterface() 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-17T15:20:40.090

为什么不直接使用开关？

```
switch (input) {
  case "condition1": 
    // do stuff
    break;
  case "condition2":
    // do stuff....
    break;
  default:
    // default stuff
    break;
} 
```

或未能使用`Dictionary<string,Action>`

```
var actions=new Dictionary<string,Action> { { "condition1", () => {code}}, {"condition2",) => {code}}; 
```

然后..

```
if (actions.ContainsKey(input)) actions[input](); 
```

# android - 安卓异步任务

> ID：12008535
> 
> 赞同：4
> 
> 时间：2012-08-17T15:17:52.547
> 
> 标签：android, android-asynctask

我是否充分利用了我的 AsyncTask？有人可以纠正我的代码，如果它是错误的。我只是想确保我的 AsyncTask 完全正常工作，这样我以后就不会遇到任何麻烦。我希望对我的所有课程都使用 AsyncTask。这是一个好习惯吗？

```
 public class SingleMenuItemActivity  extends Activity {

    // XML node keys
static final String KEY_TITLE = "title";
static final String KEY_ARTIST = "artist";  
static final String KEY_THUMB_URL = "thumb_url";
private ProgressDialog pDialog;
String title;
String artist;
String image_url;
ImageView view;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.single_list_item);
        new loadSingleView().execute(); 

        view = (ImageView) findViewById(R.id.single_image);
    }

public class loadSingleView extends AsyncTask<String, String, String> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(
                    SingleMenuItemActivity.this);
            pDialog.setMessage("Connecting to Server ...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }
        @Override
        protected String doInBackground(String... args) {
            // updating UI from Background Thread

            Intent in = getIntent();

            image_url = in.getStringExtra(KEY_THUMB_URL);
                        title = in.getStringExtra(KEY_TITLE);
            artist = in.getStringExtra(KEY_ARTIST);

            return null;

                    }
        @Override       
        protected void onPostExecute(String args) {
            // dismiss the dialog after getting all products

            ImageLoader imgLoader = new ImageLoader(getApplicationContext());

            imgLoader.DisplayImage(image_url, view);

            TextView lblName = (TextView) findViewById(R.id.name_title);
            TextView lblCost = (TextView) findViewById(R.id.name_artist);

            lblName.setText(title);
            lblCost.setText(artist);
            pDialog.dismiss();
        }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T15:25:25.793

您无法从 Backgroud 线程更新 UI。例如用于`doInBackground()`从服务器获取数据。所有这些过程都将在后台完成。并且 `onPostExecute`是在后台进程结束后更新 UI

[欲了解更多信息在这里学习](http://developer.android.com/reference/android/os/AsyncTask.html)

[示例 1](http://labs.makemachine.net/2010/05/android-asynctask-example/)

[示例 2](https://stackoverflow.com/questions/9671546/asynctask-android-example)

您可以在 Google 中找到更多内容：)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T16:39:57.053

您必须从方法更新 UI `onPostExecute()`。我喜欢将我的任务移动到他们自己的文件中。这样我们就可以分离关注点，从而更容易理解代码。我们可以通过使用接口定义回调方法来做到这一点

```
public class LoadSingleView extends AsyncTask<String, String, String> {

    public interface LoadSingleViewHandler {
        void onSingleViewLoad(String result);
    }

    private LoadSingleViewHandler handler;

    public LoadSingleView(LoadSingleViewHandler handler) {
        this.handler = handler;
    }

    @Override
    protected String doInBackground(String... args) {
        // Do operation here and return the result
        // Operation is usually some network request
        // or something that will take alot of time
    }

    @Override       
    protected void onPostExecute(String result) {
        handler.onSingleViewLoad(result);
    }
} 
```

现在只需从活动启动任务并让活动实现`LoadSingleViewHandler`接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-25T23:26:32.660

Do in background 必须主要用于那些不能在 UI 线程上执行的任务，因此将其用于连接到服务器（API）以接收和发送数据。不要在没有必要的情况下使用它...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T15:30:56.543

是的，所有 UI 操作都必须在主线程上完成。您可以在 doInBackground() 中下载要显示的图像，在 onPostExecute() 中更新整个 UI。

此外，最好将 AsyncTask 移出您的活动。这是一个多一点的工作，但随着应用程序变得更大和更复杂，它会让你的生活更轻松。您可以使用处理程序将数据从 AsyncTask 传递到您的活动。

# c++ - 使用 cv::Mat 提升 Python 包装器和 OpenCv 参数错误

> ID：12008536
> 
> 赞同：3
> 
> 时间：2012-08-17T15:17:55.130
> 
> 标签：c++, python, boost, opencv, boost-python

我有一个用 Boost Python 封装的 C++ 类。

其中一个类方法接受两个`cv::Mat`s，如下所示：

```
MyClass::do_something(cv::Mat input, cv::Mat output) 
```

我用 python 提供的功能包括上述方法、构造函数和一些打印方法。

初始化和打印方法（用于调试）在 C++ 和 Python 包装器中运行良好：

```
obj = MyClass(arg1, arg2, arg3)
obj.print_things() 
```

这些调用成功完成。

我在`do_something()`调用时遇到了麻烦（在 Python 绑定中，它在 C++ 中成功完成）：

```
from libmyclass import *
import cv
rgb = cv.CreateMat(256,256,cv.CV_8UC3)
result = cv.CreateMat(256,256,cv.CV_8UC3)
#...fill "rgb"

obj.do_something(rgb,result) 
```

执行上面的python代码时出现的错误是：

```
Boost.Python.ArgumentError: Python argument types in
MyClass.do_something(MyClass, cv2.cv.cvmat, cv2.cv.cvmat)
did not match C++ signature:
do_something(MyClass {lvalue}, cv::Mat, cv::Mat) 
```

这是 cv2.cv.Mat 和 cv::Mat 之间的差异吗？我有 OpenCV 2.3.1 和 2.4，都带有 Boost Python 绑定。

如果它是相关的，这就是我的 Boost 包装器的样子：

```
#include <boost/python.hpp>
#include "MyClass.h"
#include <cv.h>
using namespace boost::python;

BOOST_PYTHON_MODULE(libmyclass) { 
  class_<MyClass>("MyClass", init<std::string, std::string, std::string>())
    .def("print_things", &MyClass::print_things)
    .def("do_something", &MyClass::do_something)
  ;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T12:04:22.633

Boost python 不会自动将您的 cv2.cv.Mat（在 python 中）转换为 cv::Mat (C++)。

您将需要声明您的 C++ 方法以获取 boost::object * 并在 C++ 中有额外的代码将对象转换为 cv::Mat。

这是我为包装 STASM Active Shape Model 库所做的示例

```
#ifndef ASMSearcher_HPP
#define ASMSearcher_HPP

#include <string>
#include <boost/python.hpp>
#include <opencv2/core/core.hpp>

class ASMSearcher;

/*
 * Wrapper around STASM ASMSearcher class so that we don't mix boost python code into the STASM library.
 */

struct memtrack_t {
  PyObject_HEAD
  void *ptr;
  Py_ssize_t size;
};

struct cvmat_t
{
  PyObject_HEAD
  CvMat *a;
  PyObject *data;
  size_t offset;
};

struct iplimage_t {
  PyObject_HEAD
  IplImage *a;
  PyObject *data;
  size_t offset;
};

namespace bp = boost::python;
class Stasm
{
  public:
    Stasm();
    Stasm(const std::string &conf_file0, const std::string &conf_file1);
    ~Stasm();

    bp::list detect(bp::object image, const std::string &conf_file0="",
        const std::string &conf_file1="");

  private:
    ASMSearcher *asmLandmarksSearcher;
    cv::Mat convertObj2Mat(bp::object image);
    cv::Mat convert_from_cviplimage(PyObject *o,const char *name);
    cv::Mat convert_from_cvmat(PyObject *o, const char* name);

};

#endif

#include "stasm.hpp"
#include "stasm_ocv.hpp"

#include <opencv2/highgui/highgui.hpp>

Stasm::Stasm() 
{
  asmLandmarksSearcher = NULL;
}

Stasm::~Stasm() 
{
  if (asmLandmarksSearcher != NULL)
    delete asmLandmarksSearcher;
}

Stasm::Stasm(const std::string &conf_file0, const std::string &conf_file1)
{
  asmLandmarksSearcher = new ASMSearcher(conf_file0, conf_file1); 
}

/*Detect asm facial landmarks in image*/
bp::list Stasm::detect(bp::object image, 
    const std::string &conf_file0, 
    const std::string &conf_file1)
{

  const char *file0 = conf_file0 == "" ? NULL : conf_file0.c_str();
  const char *file1 = conf_file1 == "" ? NULL : conf_file1.c_str();

  // Convert pyobject to IplImage/Mat etc.
  cv::Mat img = convertObj2Mat(image);
  bool isColor = img.channels() == 3 ? true : false;

  int nlandmarks;
  int landmarks[500]; // space for x,y coords of up to 250 landmarks
  asmLandmarksSearcher->search(&nlandmarks, landmarks,
      "image_name", (const char*)img.data, img.cols, img.rows,
      isColor /* is_color */, file0 /* conf_file0 */, file1 /* conf_file1 */);
      //isColor /* is_color */, NULL /* conf_file0 */, NULL /* conf_file1 */);

  // Convert landmarks to python list object
  bp::list pyLandmarks;
  for (int i = 0; i < 2*nlandmarks; i++)
    pyLandmarks.append(landmarks[i]);

  return pyLandmarks;
}

cv::Mat Stasm::convert_from_cvmat(PyObject *o, const char* name)
{
  cv::Mat dest;
  cvmat_t *m = (cvmat_t*)o;
  void *buffer;
  Py_ssize_t buffer_len;

  m->a->refcount = NULL;
  if (m->data && PyString_Check(m->data))
  {
    assert(cvGetErrStatus() == 0);
    char *ptr = PyString_AsString(m->data) + m->offset;
    cvSetData(m->a, ptr, m->a->step);
    assert(cvGetErrStatus() == 0);
    dest = m->a;

  }
  else if (m->data && PyObject_AsWriteBuffer(m->data, &buffer, &buffer_len) == 0)
  {
    cvSetData(m->a, (void*)((char*)buffer + m->offset), m->a->step);
    assert(cvGetErrStatus() == 0);
    dest = m->a;
  }
  else
  {
    printf("CvMat argument '%s' has no data", name);
    //failmsg("CvMat argument '%s' has no data", name);
  }
  return dest;

}

cv::Mat Stasm::convert_from_cviplimage(PyObject *o,const char *name)
{
  cv::Mat dest;
  iplimage_t *ipl = (iplimage_t*)o;
  void *buffer;
  Py_ssize_t buffer_len;

  if (PyString_Check(ipl->data)) {
    cvSetData(ipl->a, PyString_AsString(ipl->data) + ipl->offset, ipl->a->widthStep);
    assert(cvGetErrStatus() == 0);
    dest = ipl->a;
  } else if (ipl->data && PyObject_AsWriteBuffer(ipl->data, &buffer, &buffer_len) == 0) {
    cvSetData(ipl->a, (void*)((char*)buffer + ipl->offset), ipl->a->widthStep);
    assert(cvGetErrStatus() == 0);
    dest = ipl->a;
  } else {
    printf("IplImage argument '%s' has no data", name);
  }
  return dest;
}

cv::Mat Stasm::convertObj2Mat(bp::object image)
{
  if(strcmp(image.ptr()->ob_type->tp_name,"cv2.cv.iplimage") == 0)
  {
    return convert_from_cviplimage(image.ptr(),image.ptr()->ob_type->tp_name);
  }
  else
    return convert_from_cvmat(image.ptr(), image.ptr()->ob_type->tp_name);
} 
```

测试它的示例代码如下所示：

```
#!/usr/bin/env python

import cv2
import pystasm
import numpy as np
import sys

DEFAULT_TEST_IMAGE = "428.jpg"

def getFacePointsMapping():
  mapping = {}
  fhd = open('mapping2.txt')
  line = fhd.readline()
  a = line.split()
  for i, n in enumerate(a):
    mapping[int(n)] = i

  return mapping

def drawFaceKeypoints(img, landmarks):
  mapping = getFacePointsMapping()
  numpyLandmarks = np.asarray(landmarks)
  numLandmarks = len(landmarks) / 2
  numpyLandmarks = numpyLandmarks.reshape(numLandmarks, -1)
  for i in range(0, len(landmarks) - 1, 2):
    pt = (landmarks[i], landmarks[i+1])
    #cv2.polylines(img, [numpyLandmarks], False, (0, 255, 0))
    number = mapping[i/2]
    cv2.circle(img, pt, 3, (255, 0, 0), cv2.cv.CV_FILLED)
    cv2.putText(img, str(number), pt, cv2.FONT_HERSHEY_SIMPLEX, 0.3, (0, 0, 255)) 

  return img

def getFacePointsMapping():
  mapping = []
  fhd = open('mapping2.txt')
  line = fhd.readline()
  a = line.split()
  for n in a:
    mapping.append(n)

  return mapping

def main():

  asmsearcher = pystasm.Stasm('mu-68-1d.conf', 'mu-76-2d.conf')

  if len(sys.argv) == 2:
    imagename = sys.argv[1]
  else:
    imagename = DEFAULT_TEST_IMAGE

# Detect facial keypoints in image
  img = cv2.imread(imagename)
  img = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
  landmarks = asmsearcher.detect(cv2.cv.fromarray(img))

  img = drawFaceKeypoints(img, landmarks)

  #numpyLandmarks = np.asarray(landmarks)
  #numLandmarks = len(landmarks) / 2
  #numpyLandmarks = numpyLandmarks.reshape(numLandmarks, -1)
  #for i in range(0, len(landmarks) - 1, 2):
  #  pt = (landmarks[i], landmarks[i+1])
  #  #cv2.polylines(img, [numpyLandmarks], False, (0, 255, 0))
  #  number = mapping[i/2]
  #  cv2.circle(img, pt, 3, (255, 0, 0), cv2.cv.CV_FILLED)
  #  cv2.putText(img, str(number), pt, cv2.FONT_HERSHEY_SIMPLEX, 0.3, (0, 0, 255)) 

  cv2.imshow("test", img)
  cv2.waitKey()

if __name__ == '__main__':
  main() 
```

抱歉，我没有时间清理代码。请注意，您需要调用 cv2.cv.fromarray(numpy_array) 才能使其工作。我仍在试图弄清楚如何将 numpy 数组直接传递给 python boost。如果您已经弄清楚了，请告诉我:)。

顺便说一句，我应该补充一点，用于转换 boost 对象和 opencv 的 IplImage 和 Mat 的代码取自 OpenCV 的源代码。

# java - 获取有关 IP 地址的数据

> ID：12008538
> 
> 赞同：1
> 
> 时间：2012-08-17T15:18:01.587
> 
> 标签：java, php, html, geolocation, ip

我在 MySQL 数据库中有大约 30K IP 地址（IPv4）。

我想获取与这些 IP 相关的信息，例如

乡村城市等

我尝试过 IP 到国家/地区的数据库，这些数据库不是很准确，而且对于许多 IP 来说都是错误的。

Web API 不允许这么多 IP 查询，也可能不准确。

我想得到准确的信息。**（至少国家应该是准确的）**

我在后端有 Java，用于显示的 PHP/HTML5

请帮忙 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T15:19:57.303

我认为 maxmind 可能是事实上的 geoip 数据库。他们[提供免费的](http://www.maxmind.com/app/geolite)，在国家一级准确率为 99.5%，在城市一级准确率为 78%。

他们有 php 和 java 库。 [http://www.maxmind.com/app/ip-location](http://www.maxmind.com/app/ip-location)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:30:50.200

试试这个，它就像**魔术**一样............

**密钥和秘密：**

```
private final String key = "86b780aec0cee918718d7eb2fa084df412771c17";
private final String secret = "d3e3fa0a1fc6a35ac02aa591ed32ecaa750df9a7"; 
```

**创建会话的方法：**

```
public void xmlCreateSession(){

             String createSession = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>"+"\n"+"<request>"+"\n"+"<token>"+"</token>"+"\n"+"<key>"+this.getKey()+"</key>"+"\n"+"<secret>"+this.getSecret()+"</secret>"+"\n"+"</request>";
            firingUrl = "https://int.yumzing.com/index.php?func=sessionCreate";
            // firingUrl = "http://199.87.235.147/sessionCreate";

          //firingUrl = "https://int.yumzing.com/sessionCreate";

             String tempCreate = postData(firingUrl, createSession);
             this.getMToken(tempCreate);
             System.out.println("getToken value "+this.getToken()); 

    } 
```

**查找IP的方法：**

```
public void xmlUserIp(){

           String userIp = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>"+"\n"+"<request>"+"\n"+"<token>"+this.getToken()+"</token>"+"\n"+"</request>";

           firingUrl = "https://int.yumzing.com/index.php?func=userIp";

           String tempIp = postData(firingUrl, userIp);
           this.getMIp(tempIp);
           System.out.println("getToken value "+this.getIp()); 

    } 
```

**基于IP获取Info的方法：**

```
public void xmlUserLocation(){

        this.xmlUserIp();
        System.out.println("With in xmlUserLocation-"+this.getToken()+" "+this.getIp());

           String userLocation = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>"+"\n"+"<request>"+"\n"+"<token>"+this.getToken()+"</token>"+"\n"+"<ip>"+this.getIp()+"</ip>"+"\n"+"</request>";
           firingUrl = "https://int.yumzing.com/?func=userLocation";

          System.out.println("With in xmlUserLocation-"+this.getToken()+" "+this.getIp());
           String tempLoc = postData(firingUrl, userLocation);
           System.out.println("In xmluserLoc"+tempLoc);
           this.getMLocation(tempLoc);

           System.out.println("getToken value "+this.getCountry()); 
           System.out.println("getToken value "+this.getState()); 
           System.out.println("getToken value "+this.getCity()); 
           System.out.println("getToken value "+this.getLatitude()); 
           System.out.println("getToken value "+this.getLongitude()); 
    } 
```

# tags - 如何在我的网站照片上添加地理标记？

> ID：12008539
> 
> 赞同：1
> 
> 时间：2012-08-17T15:18:04.790
> 
> 标签：tags, photo, geo

我有一个小型社交网络，我希望用户可以使用foursquare 作为直方图对他们的照片进行地理标记。有可能做到这一点，我该怎么做？我不是专业的开发人员。

# javascript - JavaScript 是否能够像在 windows.location 中解析当前 URL 一样解析任意 URL？

> ID：12008541
> 
> 赞同：2
> 
> 时间：2012-08-17T15:18:09.897
> 
> 标签：javascript, jquery, uri, url-parsing

我喜欢将当前地址很好地拆分为 中的部分`window.location`，但我希望能够采用任意 URL 并按照完全相同的逻辑将其拆分。我不知道如何`window.location`处理极端情况和罕见情况，所以我想尽可能避免手动执行此操作。由于浏览器已经在当前地址上执行此工作，我希望它包含一个可以对*任何*地址执行此操作的函数。

如果那里有任何不错的跨浏览器库（可能是 jQuery 插件），我也很想听听它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T15:20:15.597

您可以在 JavaScript 中创建一个`a`( *HTML Anchor Element* ) 元素并指定`href`属性。然后，您将能够调用与锚元素、`hash`、`protocol`、`host`等关联的属性`port`...

[https://developer.mozilla.org/en-US/docs/DOM/HTMLAnchorElement](https://developer.mozilla.org/en-US/docs/DOM/HTMLAnchorElement)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T13:35:04.787

使用 Xander 的答案中的信息，我编写了一个小函数来解析 URL 并返回一个包含所需信息的对象。我想我会在这里分享它：

```
function parse_url(url)
{
    var e = document.createElement('a');
    e.href = url;

    return {
        'protocol': e.protocol,
        'hostname': e.hostname,
        'host': e.host,
        'port': e.port,
        'pathname': e.pathname,
        'search': e.search,
        'hash': e.hash
    }
} 
```

# javascript - 使用 jQuery DataTables 时禁用最后一列的排序

> ID：12008545
> 
> 赞同：83
> 
> 时间：2012-08-17T15:18:32.123
> 
> 标签：javascript, jquery, datatables

我在一个项目中使用 jQuery DataTables，我想知道如何禁用最后一列的排序。我想在整个站点范围内实施这个。

现在我有以下代码：

```
<!-- jQuery DataTable -->
    <script src="../assets/js/plugins/dataTables/jquery.datatables.min.js"></script>
    <script>
        /* Default class modification */
        $.extend( $.fn.dataTableExt.oStdClasses, {
            "sWrapper": "dataTables_wrapper form-inline"
        } );

        /* API method to get paging information */
        $.fn.dataTableExt.oApi.fnPagingInfo = function ( oSettings )
        {
            return {
                "iStart":         oSettings._iDisplayStart,
                "iEnd":           oSettings.fnDisplayEnd(),
                "iLength":        oSettings._iDisplayLength,
                "iTotal":         oSettings.fnRecordsTotal(),
                "iFilteredTotal": oSettings.fnRecordsDisplay(),
                "iPage":          Math.ceil( oSettings._iDisplayStart / oSettings._iDisplayLength ),
                "iTotalPages":    Math.ceil( oSettings.fnRecordsDisplay() / oSettings._iDisplayLength )
            };
        }

        /* Bootstrap style pagination control */
        $.extend( $.fn.dataTableExt.oPagination, {
            "bootstrap": {
                "fnInit": function( oSettings, nPaging, fnDraw ) {
                    var oLang = oSettings.oLanguage.oPaginate;
                    var fnClickHandler = function ( e ) {
                        e.preventDefault();
                        if ( oSettings.oApi._fnPageChange(oSettings, e.data.action) ) {
                            fnDraw( oSettings );
                        }
                    };

                    $(nPaging).addClass('pagination').append(
                        '<ul>'+
                            '<li class="prev disabled"><a href="#">&larr; '+oLang.sPrevious+'</a></li>'+
                            '<li class="next disabled"><a href="#">'+oLang.sNext+' &rarr; </a></li>'+
                        '</ul>'
                    );
                    var els = $('a', nPaging);
                    $(els[0]).bind( 'click.DT', { action: "previous" }, fnClickHandler );
                    $(els[1]).bind( 'click.DT', { action: "next" }, fnClickHandler );
                },

                "fnUpdate": function ( oSettings, fnDraw ) {
                    var iListLength = 5;
                    var oPaging = oSettings.oInstance.fnPagingInfo();
                    var an = oSettings.aanFeatures.p;
                    var i, j, sClass, iStart, iEnd, iHalf=Math.floor(iListLength/2);

                    if ( oPaging.iTotalPages < iListLength) {
                        iStart = 1;
                        iEnd = oPaging.iTotalPages;
                    }
                    else if ( oPaging.iPage <= iHalf ) {
                        iStart = 1;
                        iEnd = iListLength;
                    } else if ( oPaging.iPage >= (oPaging.iTotalPages-iHalf) ) {
                        iStart = oPaging.iTotalPages - iListLength + 1;
                        iEnd = oPaging.iTotalPages;
                    } else {
                        iStart = oPaging.iPage - iHalf + 1;
                        iEnd = iStart + iListLength - 1;
                    }

                    for ( i=0, iLen=an.length ; i<iLen ; i++ ) {
                        // Remove the middle elements
                        $('li:gt(0)', an[i]).filter(':not(:last)').remove();

                        // Add the new list items and their event handlers
                        for ( j=iStart ; j<=iEnd ; j++ ) {
                            sClass = (j==oPaging.iPage+1) ? 'class="active"' : '';
                            $('<li '+sClass+'><a href="#">'+j+'</a></li>')
                                .insertBefore( $('li:last', an[i])[0] )
                                .bind('click', function (e) {
                                    e.preventDefault();
                                    oSettings._iDisplayStart = (parseInt($('a', this).text(),10)-1) * oPaging.iLength;
                                    fnDraw( oSettings );
                                } );
                        }

                        // Add / remove disabled classes from the static elements
                        if ( oPaging.iPage === 0 ) {
                            $('li:first', an[i]).addClass('disabled');
                        } else {
                            $('li:first', an[i]).removeClass('disabled');
                        }

                        if ( oPaging.iPage === oPaging.iTotalPages-1 || oPaging.iTotalPages === 0 ) {
                            $('li:last', an[i]).addClass('disabled');
                        } else {
                            $('li:last', an[i]).removeClass('disabled');
                        }
                    }
                }
            }
        });

        /* Show/hide table column */
        function dtShowHideCol( iCol ) {
            var oTable = $('#example-2').dataTable();
            var bVis = oTable.fnSettings().aoColumns[iCol].bVisible;
            oTable.fnSetColumnVis( iCol, bVis ? false : true );
        };

        /* Table #example */
        $(document).ready(function() {
            $('.datatable').dataTable( {
                "sDom": "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",
                "sPaginationType": "bootstrap",
                "oLanguage": {
                    "sLengthMenu": "_MENU_ records per page"
                }
            });
            $('.datatable-controls').on('click','li input',function(){
                dtShowHideCol( $(this).val() );
            })
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-08-17T15:26:46.063

aoColumnDefs 的 aTargets 参数允许您为索引提供从右侧偏移（使用负数）以及从左侧偏移。所以你可以这样做：

```
aoColumnDefs: [
  {
     bSortable: false,
     aTargets: [ -1 ]
  }
] 
```

等效的新 API（适用于 DataTables 1.10+）将是：

```
columnDefs: [
   { orderable: false, targets: -1 }
] 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2014-03-28T14:01:28.007

我想开发当前的答案。

好的方法是`aoColumnDefs`如上所述使用。
该`bSortable`参数的默认值为`true`（对于每一列）。

你有2个选择...

## 按索引：

```
var table = $('#example').DataTable({
   'aoColumnDefs': [{
        'bSortable': false,
        'aTargets': [-1] /* 1st one, start by the right */
    }]
}); 
```

## 按班级：

```
var table = $('#example').DataTable({
   'aoColumnDefs': [{
        'bSortable': false,
        'aTargets': ['nosort']
    }]
}); 
```

在上添加类`<th>`：

```
<table>
    <thead>
        <tr>
            <th>Foo</th>
            <th>Bar</th>
            <th class="nosort">Baz</th>
        </tr>
    </thead>
    <tbody>...</tbody>
</table> 
```

**[关于列的文档](http://datatables.net/usage/columns)**

**[JSBin](http://live.datatables.net/aqoxob/16/edit)**

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-05-07T12:36:37.400

您可以使用数据属性`data-orderable="false"`。

```
<th data-orderable="false">Salary</th> 
```

```
 $(document).ready(function() {
    $('#example').DataTable()
    });
```

```
<link  rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/dataTables.bootstrap4.min.css"  />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap4.min.js"></script>

<table id="example" class="display" style="width:100%">
        <thead>
            <tr>
                <th>Name</th>
                <th>Position</th>
                <th>Office</th>
                <th>Age</th>
                <th>Start date</th>
                <th data-orderable="false">Salary</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Tiger Nixon</td>
                <td>System Architect</td>
                <td>Edinburgh</td>
                <td>61</td>
                <td>2011/04/25</td>
                <td>$320,800</td>
            </tr>
            <tr>
                <td>Garrett Winters</td>
                <td>Accountant</td>
                <td>Tokyo</td>
                <td>63</td>
                <td>2011/07/25</td>
                <td>$170,750</td>
            </tr>
            <tr>
                <td>Ashton Cox</td>
                <td>Junior Technical Author</td>
                <td>San Francisco</td>
                <td>66</td>
                <td>2009/01/12</td>
                <td>$86,000</td>
            </tr>
            <tr>
                <td>Cedric Kelly</td>
                <td>Senior Javascript Developer</td>
                <td>Edinburgh</td>
                <td>22</td>
                <td>2012/03/29</td>
                <td>$433,060</td>
            </tr>
            <tr>
                <td>Airi Satou</td>
                <td>Accountant</td>
                <td>Tokyo</td>
                <td>33</td>
                <td>2008/11/28</td>
                <td>$162,700</td>
            </tr>
            <tr>
                <td>Brielle Williamson</td>
                <td>Integration Specialist</td>
                <td>New York</td>
                <td>61</td>
                <td>2012/12/02</td>
                <td>$372,000</td>
            </tr>
            <tr>
                <td>Herrod Chandler</td>
                <td>Sales Assistant</td>
                <td>San Francisco</td>
                <td>59</td>
                <td>2012/08/06</td>
                <td>$137,500</td>
            </tr>
            <tr>
                <td>Rhona Davidson</td>
                <td>Integration Specialist</td>
                <td>Tokyo</td>
                <td>55</td>
                <td>2010/10/14</td>
                <td>$327,900</td>
            </tr>
            <tr>
                <td>Colleen Hurst</td>
                <td>Javascript Developer</td>
                <td>San Francisco</td>
                <td>39</td>
                <td>2009/09/15</td>
                <td>$205,500</td>
            </tr>
            <tr>
                <td>Sonya Frost</td>
                <td>Software Engineer</td>
                <td>Edinburgh</td>
                <td>23</td>
                <td>2008/12/13</td>
                <td>$103,600</td>
            </tr>
            <tr>
                <td>Jena Gaines</td>
                <td>Office Manager</td>
                <td>London</td>
                <td>30</td>
                <td>2008/12/19</td>
                <td>$90,560</td>
            </tr>
            <tr>
                <td>Quinn Flynn</td>
                <td>Support Lead</td>
                <td>Edinburgh</td>
                <td>22</td>
                <td>2013/03/03</td>
                <td>$342,000</td>
            </tr>
            <tr>
                <td>Charde Marshall</td>
                <td>Regional Director</td>
                <td>San Francisco</td>
                <td>36</td>
                <td>2008/10/16</td>
                <td>$470,600</td>
            </tr>
            <tr>
                <td>Haley Kennedy</td>
                <td>Senior Marketing Designer</td>
                <td>London</td>
                <td>43</td>
                <td>2012/12/18</td>
                <td>$313,500</td>
            </tr>
            <tr>
                <td>Tatyana Fitzpatrick</td>
                <td>Regional Director</td>
                <td>London</td>
                <td>19</td>
                <td>2010/03/17</td>
                <td>$385,750</td>
            </tr>
            <tr>
                <td>Michael Silva</td>
                <td>Marketing Designer</td>
                <td>London</td>
                <td>66</td>
                <td>2012/11/27</td>
                <td>$198,500</td>
            </tr>
            <tr>
                <td>Paul Byrd</td>
                <td>Chief Financial Officer (CFO)</td>
                <td>New York</td>
                <td>64</td>
                <td>2010/06/09</td>
                <td>$725,000</td>
            </tr>
            <tr>
                <td>Gloria Little</td>
                <td>Systems Administrator</td>
                <td>New York</td>
                <td>59</td>
                <td>2009/04/10</td>
                <td>$237,500</td>
            </tr>
            <tr>
                <td>Bradley Greer</td>
                <td>Software Engineer</td>
                <td>London</td>
                <td>41</td>
                <td>2012/10/13</td>
                <td>$132,000</td>
            </tr>
            <tr>
                <td>Dai Rios</td>
                <td>Personnel Lead</td>
                <td>Edinburgh</td>
                <td>35</td>
                <td>2012/09/26</td>
                <td>$217,500</td>
            </tr>
            <tr>
                <td>Jenette Caldwell</td>
                <td>Development Lead</td>
                <td>New York</td>
                <td>30</td>
                <td>2011/09/03</td>
                <td>$345,000</td>
            </tr>
            <tr>
                <td>Yuri Berry</td>
                <td>Chief Marketing Officer (CMO)</td>
                <td>New York</td>
                <td>40</td>
                <td>2009/06/25</td>
                <td>$675,000</td>
            </tr>
            <tr>
                <td>Caesar Vance</td>
                <td>Pre-Sales Support</td>
                <td>New York</td>
                <td>21</td>
                <td>2011/12/12</td>
                <td>$106,450</td>
            </tr>
            <tr>
                <td>Doris Wilder</td>
                <td>Sales Assistant</td>
                <td>Sidney</td>
                <td>23</td>
                <td>2010/09/20</td>
                <td>$85,600</td>
            </tr>
            <tr>
                <td>Angelica Ramos</td>
                <td>Chief Executive Officer (CEO)</td>
                <td>London</td>
                <td>47</td>
                <td>2009/10/09</td>
                <td>$1,200,000</td>
            </tr>
            <tr>
                <td>Gavin Joyce</td>
                <td>Developer</td>
                <td>Edinburgh</td>
                <td>42</td>
                <td>2010/12/22</td>
                <td>$92,575</td>
            </tr>
            <tr>
                <td>Jennifer Chang</td>
                <td>Regional Director</td>
                <td>Singapore</td>
                <td>28</td>
                <td>2010/11/14</td>
                <td>$357,650</td>
            </tr>
            <tr>
                <td>Brenden Wagner</td>
                <td>Software Engineer</td>
                <td>San Francisco</td>
                <td>28</td>
                <td>2011/06/07</td>
                <td>$206,850</td>
            </tr>
            <tr>
                <td>Fiona Green</td>
                <td>Chief Operating Officer (COO)</td>
                <td>San Francisco</td>
                <td>48</td>
                <td>2010/03/11</td>
                <td>$850,000</td>
            </tr>
            <tr>
                <td>Shou Itou</td>
                <td>Regional Marketing</td>
                <td>Tokyo</td>
                <td>20</td>
                <td>2011/08/14</td>
                <td>$163,000</td>
            </tr>
            <tr>
                <td>Michelle House</td>
                <td>Integration Specialist</td>
                <td>Sidney</td>
                <td>37</td>
                <td>2011/06/02</td>
                <td>$95,400</td>
            </tr>
            <tr>
                <td>Suki Burks</td>
                <td>Developer</td>
                <td>London</td>
                <td>53</td>
                <td>2009/10/22</td>
                <td>$114,500</td>
            </tr>
            <tr>
                <td>Prescott Bartlett</td>
                <td>Technical Author</td>
                <td>London</td>
                <td>27</td>
                <td>2011/05/07</td>
                <td>$145,000</td>
            </tr>
            <tr>
                <td>Gavin Cortez</td>
                <td>Team Leader</td>
                <td>San Francisco</td>
                <td>22</td>
                <td>2008/10/26</td>
                <td>$235,500</td>
            </tr>
            <tr>
                <td>Martena Mccray</td>
                <td>Post-Sales support</td>
                <td>Edinburgh</td>
                <td>46</td>
                <td>2011/03/09</td>
                <td>$324,050</td>
            </tr>
            <tr>
                <td>Unity Butler</td>
                <td>Marketing Designer</td>
                <td>San Francisco</td>
                <td>47</td>
                <td>2009/12/09</td>
                <td>$85,675</td>
            </tr>
            <tr>
                <td>Howard Hatfield</td>
                <td>Office Manager</td>
                <td>San Francisco</td>
                <td>51</td>
                <td>2008/12/16</td>
                <td>$164,500</td>
            </tr>
            <tr>
                <td>Hope Fuentes</td>
                <td>Secretary</td>
                <td>San Francisco</td>
                <td>41</td>
                <td>2010/02/12</td>
                <td>$109,850</td>
            </tr>
            <tr>
                <td>Vivian Harrell</td>
                <td>Financial Controller</td>
                <td>San Francisco</td>
                <td>62</td>
                <td>2009/02/14</td>
                <td>$452,500</td>
            </tr>
            <tr>
                <td>Timothy Mooney</td>
                <td>Office Manager</td>
                <td>London</td>
                <td>37</td>
                <td>2008/12/11</td>
                <td>$136,200</td>
            </tr>
            <tr>
                <td>Jackson Bradshaw</td>
                <td>Director</td>
                <td>New York</td>
                <td>65</td>
                <td>2008/09/26</td>
                <td>$645,750</td>
            </tr>
            <tr>
                <td>Olivia Liang</td>
                <td>Support Engineer</td>
                <td>Singapore</td>
                <td>64</td>
                <td>2011/02/03</td>
                <td>$234,500</td>
            </tr>
            <tr>
                <td>Bruno Nash</td>
                <td>Software Engineer</td>
                <td>London</td>
                <td>38</td>
                <td>2011/05/03</td>
                <td>$163,500</td>
            </tr>
            <tr>
                <td>Sakura Yamamoto</td>
                <td>Support Engineer</td>
                <td>Tokyo</td>
                <td>37</td>
                <td>2009/08/19</td>
                <td>$139,575</td>
            </tr>
            <tr>
                <td>Thor Walton</td>
                <td>Developer</td>
                <td>New York</td>
                <td>61</td>
                <td>2013/08/11</td>
                <td>$98,540</td>
            </tr>
            <tr>
                <td>Finn Camacho</td>
                <td>Support Engineer</td>
                <td>San Francisco</td>
                <td>47</td>
                <td>2009/07/07</td>
                <td>$87,500</td>
            </tr>
            <tr>
                <td>Serge Baldwin</td>
                <td>Data Coordinator</td>
                <td>Singapore</td>
                <td>64</td>
                <td>2012/04/09</td>
                <td>$138,575</td>
            </tr>
            <tr>
                <td>Zenaida Frank</td>
                <td>Software Engineer</td>
                <td>New York</td>
                <td>63</td>
                <td>2010/01/04</td>
                <td>$125,250</td>
            </tr>
            <tr>
                <td>Zorita Serrano</td>
                <td>Software Engineer</td>
                <td>San Francisco</td>
                <td>56</td>
                <td>2012/06/01</td>
                <td>$115,000</td>
            </tr>
            <tr>
                <td>Jennifer Acosta</td>
                <td>Junior Javascript Developer</td>
                <td>Edinburgh</td>
                <td>43</td>
                <td>2013/02/01</td>
                <td>$75,650</td>
            </tr>
            <tr>
                <td>Cara Stevens</td>
                <td>Sales Assistant</td>
                <td>New York</td>
                <td>46</td>
                <td>2011/12/06</td>
                <td>$145,600</td>
            </tr>
            <tr>
                <td>Hermione Butler</td>
                <td>Regional Director</td>
                <td>London</td>
                <td>47</td>
                <td>2011/03/21</td>
                <td>$356,250</td>
            </tr>
            <tr>
                <td>Lael Greer</td>
                <td>Systems Administrator</td>
                <td>London</td>
                <td>21</td>
                <td>2009/02/27</td>
                <td>$103,500</td>
            </tr>
            <tr>
                <td>Jonas Alexander</td>
                <td>Developer</td>
                <td>San Francisco</td>
                <td>30</td>
                <td>2010/07/14</td>
                <td>$86,500</td>
            </tr>
            <tr>
                <td>Shad Decker</td>
                <td>Regional Director</td>
                <td>Edinburgh</td>
                <td>51</td>
                <td>2008/11/13</td>
                <td>$183,000</td>
            </tr>
            <tr>
                <td>Michael Bruce</td>
                <td>Javascript Developer</td>
                <td>Singapore</td>
                <td>29</td>
                <td>2011/06/27</td>
                <td>$183,000</td>
            </tr>
            <tr>
                <td>Donna Snider</td>
                <td>Customer Support</td>
                <td>New York</td>
                <td>27</td>
                <td>2011/01/25</td>
                <td>$112,000</td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <th>Name</th>
                <th>Position</th>
                <th>Office</th>
                <th>Age</th>
                <th>Start date</th>
                <th>Salary</th>
            </tr>
        </tfoot>
    </table>
```

> 从 v1.10.5 开始，DataTables 还可以使用从 HTML5 data-* 属性读取的初始化选项。这提供了一种直接在 HTML 中设置选项的机制，而不是使用 Javascript。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-08-17T15:25:52.927

在这里阅读

[http://www.craiglotter.co.za/2010/04/19/how-to-disable-sorting-on-a-column-in-jquery-datatables-plugin/](http://www.craiglotter.co.za/2010/04/19/how-to-disable-sorting-on-a-column-in-jquery-datatables-plugin/)

```
$('#example').dataTable({
    "aoColumns": [
        null,
        null,
        { "bSortable": false }, // <-- disable sorting for column 3
        null
     ]
}); 
```

[http://datatables.net/usage/columns](http://datatables.net/usage/columns)下 bSortable 可以指定哪些列禁用使用`aoColumnDefs`和`aTargets`

```
$('#example').dataTable({
    "aoColumnDefs": [
        { 
          "bSortable": false, 
          "aTargets": [ -1 ] // <-- gets last column and turns off sorting
         } 
     ]
}); 
```

[http://live.datatables.net/aqoxob/edit#source](http://live.datatables.net/aqoxob/edit#source)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-11-20T09:01:53.350

在数据表 1.9.x 上：

```
$('.dataTable').dataTable({
    'aoColumnDefs': [{
        'bSortable': false,
        'aTargets': [-1], /* 1st colomn, starting from the right */
    }]
}); 
```

在 1.10.x 上时

```
$('.dataTable').dataTable({
    columnDefs: [{ orderable: false, "targets": -1 }] /* -1 = 1st colomn, starting from the right */
}); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-05-12T12:59:41.970

它对我有用 - 你可以试试这个

```
数据表（{
    “分页”：是的，
    “排序”：错误，
    “信息”：是的，
})

```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-05-03T08:06:25.817

如果您不允许对第一列进行排序然后使用，这对我来说是完美的工作

```
<script>
    $(document).ready(function () {
        $('#example2').DataTable({               
            'order':[],
            'columnDefs': [{
                "targets": 0,
                "orderable": false
            }]
        });
    });
</script> 
```

这里索引行从 0 开始，所以将 0 放在目标中。
如果您禁用一列或多列的排序，请使用，

```
<script>
    $(document).ready(function () {
        $('#example2').DataTable({               
            'order':[],
            'columnDefs': [{
                "targets": [0,3],
                "orderable": false
            }]
        });
    });
</script> 
```

在这里你可以看到， [![禁用数据表js中的排序](../Images/cc63000c2bd27f4942957fb0ac73e7c3.png)](https://i.stack.imgur.com/4saib.png)

在我的 0 位置的复选框列和第 3 位置的操作列上方，因此在两个表中都禁用排序。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-08-27T05:10:41.723

这已经解决了我的问题，只是`data-orderable="false"`像`<th></th>`这样添加`<th data-orderable="false">Salary</th>`

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-08-29T06:24:11.207

这对于 v1.10+ 的数据表很有用。设置要为其删除排序的列号，例如，第一列将如下所示：

```
columnDefs: [
   { orderable: false, targets: 0 }
] 
```

对于多列（第一、第二和第三）：

```
columnDefs: [
   { orderable: false, targets: [0,1,2] }
] 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-02-25T04:59:56.490

尝试使用减号从背面计数

```
<script>
    $(document).ready(function () {
        $('#example-2').DataTable({               
            'order':[],
            'columnDefs': [{
                "targets": [-1],
                "orderable": false
            }]
        });
    });
</script> 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-10-09T12:34:37.893

用这个：

```
$(document).ready(function () {
            $('#workPatternDataTable').dataTable({
                //"aaSorting": [],
                ajax: null,
                columnDefs: [
                    {
                        targets: 0,
                        sortable: false,
                        autoWidth: false,
                    }
                ]
            });
        }); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-10-05T09:39:22.407

使用此链接[http://datatables.net/ref#bSortable](http://datatables.net/ref#bSortable)

```
$(document).ready( function() {
   $('#example').dataTable( {
      "aoColumnDefs": [{ "bSortable": false, "aTargets": [ 0 ] }]
    } );
} ); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-01-22T16:25:21.323

要禁用对数据表中任何列的排序，请使用以下命令

```
aoColumnDefs: [{ "aTargets": [ 0 ], "bSortable": false}], 
```

这意味着 `"aTargets": [ 0 ]`是从 0 开始的列 id

所以在你的情况下它变成：

```
 $(".tableSort").dataTable({
        aaSorting: [[0, 'asc']],
        aoColumnDefs: [
            { "aTargets": [ -1 ], "bSortable": false},
        ]
    }); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-08-15T17:41:46.727

在 jQuery 中执行此操作。即使您自动生成列或不确定列号，以下代码也能正常工作。

```
var table = $('#tbl').DataTable({
        "columnDefs": [{ targets: 'no-sort', orderable: false }]}); 
```

并添加一个类'no-sort'到你想禁用这样的排序的任何标题..

```
<th class="no-sort">Header n</th> 
```

# image-processing - Opencv 3D来自立体对中的点

> ID：12008548
> 
> 赞同：3
> 
> 时间：2012-08-17T15:18:42.277
> 
> 标签：image-processing, opencv, stereo-3d

OpenCV 中是否有一个简单的函数可以从立体相机对中获取对象的 3D 位置和姿势？

我用棋盘校准了相机和基线。我现在想取一个已知对象，比如同一个棋盘，在它自己的坐标中具有已知的 3D 点，并找到真实世界的位置（在相机坐标中）。

有针对单个相机 (POSIT) 执行此操作的功能，以及查找整个场景的 3D 视差图像的功能。

执行与相机校准几乎相同的过程并在相机对中找到棋盘必须很简单 - 但我找不到任何获取对象+图像坐标并返回立体对的相机坐标的函数。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:19:16.163

校准立体相机系统后，您就获得了两个相机之间的相对姿势（=平移+方向）。使用[solvePnP](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#solvepnp) / [solvePnPRansac](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#solvepnpransac)，如果你找到一个相机和物体之间的相对姿势，然后你也得到了物体和另一个相机之间的相对姿势。例如，在用于机器人导航的立体系统中，通常仅将来自先前帧的重建 3D 点与其中一个相机匹配，然后估计来自 3d 点的相对相机位姿。立体系统只是简化并提高了三角测量/结构重建的质量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-20T12:19:43.740

是的，StereoBM_create()：

```
import numpy as np
import cv2 as cv
from matplotlib import pyplot as plt

imgL = cv.imread('tsukuba_l.png',0)
imgR = cv.imread('tsukuba_r.png',0)

stereo = cv.StereoBM_create(numDisparities=16, blockSize=15)
disparity = stereo.compute(imgL,imgR)

plt.imshow(disparity,'gray')
plt.show() 
```

[https://docs.opencv.org/4.x/dd/d53/tutorial_py_depthmap.html](https://docs.opencv.org/4.x/dd/d53/tutorial_py_depthmap.html)

# javascript - Windows 8/ Metro UI 数据绑定 javascript

> ID：12008556
> 
> 赞同：1
> 
> 时间：2012-08-17T15:18:54.073
> 
> 标签：javascript, html, data-binding, windows-8

我正在使用适用于 Windows 8 的 javascript/HTML 创建一个应用程序，它基本上显示从 html 文件中提取的文本。

我正在使用 data.js 文件来组织组和项目。属性之一是“url”，它存储包含应用程序主要内容的 html 页面的 url。

我想出了这段代码来从包含要显示的内容的 html 页面中检索 html 代码：

```
WinJS.UI.Fragments.renderCopy(url)
                  .done(function (fragment) {
                  return fragment;
}); 
```

如何为 data.js 中的数组中的每个项目运行此代码并绑定数据，以便内容来自 HTML 页面，标题/标题来自 data.js 文件？

如果我造成任何混乱，我深表歉意。我将不胜感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T16:16:38.810

假设您想坚持 data.js 的布局而不是创建自己的数据类，我会为列表视图使用自定义渲染器。

像这样的东西...

```
var customRender = WinJS.Utilities.markSupportedForProcessing(function (itemPromise) {
    var currentItem = {};

    return itemPromise.then(function (item) {
        currentItem = item;
        var myDiv = document.createElement("div");
        return WinJS.UI.Fragments.renderCopy("/html/1_BasicFragmentLoad_Fragment.html", myDiv)
    })
    .then(function (fragment) {
        var itemTemplate = WinJS.Utilities.query('.itemtemplate')[0];
        currentItem.data.title = fragment.innerHTML; 

        return itemTemplate.winControl.render(currentItem.data);

    });
} 
```

);

在此示例中，我将 html 片段的内容绑定到 data.js 中给定项目的标题。您将需要更新 itemtemplate 并将 title 元素绑定到 innerHTML 而不是 textContent。

```
<h4 class="item-title" data-win-bind="innerHTML: title"></h4> 
```

您还需要将自定义渲染器分配给列表视图。您可以在 HTML 标记中执行此操作，或者只需将 groupItems.js 中的模板 js 更改为此...

```
 listView.itemTemplate = customRender; 
```

如果您要创建自己的数据类，您可能希望将来自客户渲染器的承诺链放入类构造函数中，从而消除对客户渲染器的需要。

# prolog - swi-prolog 用户登录和注册

> ID：12008557
> 
> 赞同：1
> 
> 时间：2012-08-17T15:18:54.853
> 
> 标签：prolog

我有如下用户输入/登录：

```
login:- write('username: '), read(User), nl, write('password: '), read(Pass). 
```

我有一个包含用户名和密码的数据库。我使用 find 谓词将所有行作为列表获取，如代码所示：

```
find(R):-findall(Row, rs('SELECT name FROM patient where name=\'James\'', Row), R).

?- find(R).
 R = [row('James'), row('James'), row('James'), row('James')]. 
```

有没有办法使用来自 read() 的用户输入并检查该用户是否在数据库中？

我试过**member(User, R)**但它不能正常工作。

我知道 prolog 不是这种东西（登录/注册）的最佳语言。我这样做的原因是我正在 swi-prolog 中开发 helath 护理专家系统，我需要为患者登录和注册。

为什么可以这样做？我是 prolog 的新手，所以我陷入了很多愚蠢的事情。

谢谢！

............. **@gusbro**我尝试了**member(row(User)**正如你告诉我的那样：

```
check:-findall(Row, rs('SELECT name FROM patient where name=\'James\'', Row), R),
read(User), member(row(User), R); 
write('wrong username!'). 
```

但无论我写什么，我总是得到相同的结果：

```
?- check.
|: Bla.
true ;
wrong username!
true.

?- check.
|: James.
true ;
wrong username!
true. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T15:25:52.650

您尝试的方法无效，因为您试图将表单行（Atom）的术语与 Atom 统一起来。

如果你这样做应该可以正常工作`member(row(User), R)`。

但是，请注意，在您的示例中，它将多次成功，因为您重复了“行”......

您可能需要考虑使用`setof/3`而不是`findall/3`，因为它会从结果列表中消除重复项（如果没有匹配的 setof 模板，则会失败）

# c# - 异步读/写到同一个流？

> ID：12008561
> 
> 赞同：5
> 
> 时间：2012-08-17T15:19:05.587
> 
> 标签：c#, io, .net

有时我们需要在 AWS S3 中将大文件从一个存储桶复制到另一个存储桶。只要有可能，我们就使用 CopyRequest 在 AWS 上处理此操作（因为不需要返回客户端）。但有时我们没有这样做的选项，因为我们需要在 2 个完全独立的帐户之间进行复制，这需要一个[GET](http://docs.amazonwebservices.com/sdkfornet/latest/apidocs/html/T_Amazon_S3_Model_GetObjectRequest.htm)和一个[PUT](http://docs.amazonwebservices.com/sdkfornet/latest/apidocs/html/T_Amazon_S3_Model_PutObjectRequest.htm)。

问题：

1.  从 GET 返回的响应流不可搜索，因此无法传递给 PUT 请求并使其从一个无缝流到另一个
2.  使用 CopyTo() 将响应流复制到中间流 (MemoryStream)，然后将其传递给 PUT 操作效果很好，但无法扩展（大文件将引发 OutOfMemory 异常）

所以基本上我需要一个可以同时读/写的中间流，基本上我会从响应流中读取一个块并将其写入我的中间流，同时 PUT 请求正在读取内容，它只是一个无缝直通的场景。

我在 stackoverflow 上找到了这篇文章，起初它看起来很有希望，但它仍然会引发大文件的 OutOfMemory 异常。

[.NET 异步流读/写](https://stackoverflow.com/questions/1540658/net-asynchronous-stream-read-write)

有人不得不做类似的事情吗？你将如何应对？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T15:22:29.210

目前尚不清楚您为什么要使用`MemoryStream`. .NET 4 中的[`Stream.CopyTo`](http://msdn.microsoft.com/en-us/library/system.io.stream.copyto.aspx)方法不需要使用中间流 - 它只会读入固定大小的本地缓冲区，然后将该缓冲区写入输出流，然后读取更多数据（覆盖缓冲区）等。

如果您不使用 .NET 4，则很容易实现类似的东西，例如

```
public static void CopyTo(this Stream input, Stream output)
{
    byte[] buffer = new byte[64 * 1024]; // 64K buffer
    int bytesRead;
    while ((bytesRead = input.Read(buffer, 0, buffer.Length)) > 0)
    {
        output.Write(buffer, 0, bytesRead);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T15:43:08.313

我发现了这一点，但它在内部使用了一个队列，作者指出它比 MemoryStream 慢一个数量级。

[http://www.codeproject.com/Articles/16011/PipeStream-a-Memory-Efficient-and-Thread-Safe-Str](http://www.codeproject.com/Articles/16011/PipeStream-a-Memory-Efficient-and-Thread-Safe-Stre)

我一直希望我能找到一个官方的 MS 库解决方案，但似乎这个轮子还没有被正确地发明出来。

# javascript - 页面刷新后重新加载ajax检索的数据

> ID：12008563
> 
> 赞同：2
> 
> 时间：2012-08-17T15:19:08.127
> 
> 标签：javascript, jquery, ajax, url, refresh

所以，我有一个页面，其中有几个带有 onClick 事件的链接，这些链接将从外部文件中检索数据并用这些数据填充一个 div。这按预期工作。但是，当我刷新页面时，div 再次清空。我想要发生的是，在刷新后，div 将保持最后检索到的内容。

我不想走 cookie 的道路，并考虑将数据添加到 URL，我认为这是我想要的方式。

是否有一些不错的 JQuery 调用可以在单击链接时将数据附加到 url，然后在刷新时将所需内容恢复到 div？

我的 loadContent 函数是：

```
function loadContent (url, container) {
    var target = $(container);
    target.load(url, function (text, statusText) {
        if (statusText === "success") {
            target.find("a[rel^='gridnav']").initgn();
        }   
    });
} 
```

编辑：我忘了提，这条线

```
target.find("a[rel^='gridnav']").initgn(); 
```

用于在加载的新内容上重新初始化脚本。

所以当我点击一个链接时，onClick 事件会像这样调用函数

```
<a href="#" onClick="loadContent('xyz.html', '#right')">TEST</a></li> 
```

其中 xyz.html 仅包含我想要在 div "#right" 中的数据

有没有办法编辑这个功能来做我想做的事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:24:46.780

您可以通过使用将数据附加到 url

window.location.hash

[https://developer.mozilla.org/en-US/docs/DOM/window.location](https://developer.mozilla.org/en-US/docs/DOM/window.location)

如果你在 jQuery 插件中搜索 QueryString，应该有几十个插件可以简化这个任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:25:01.230

我会使用本地存储。它就像 cookie，但更容易维护。唯一的缺点是并非所有旧版浏览器都支持它（有关浏览器支持，请参阅[http://caniuse.com/#search=localStorage](http://caniuse.com/#search=localStorage)）。有关该功能的或视图，请参阅[https://developer.mozilla.org/en-US/docs/DOM/Storage](https://developer.mozilla.org/en-US/docs/DOM/Storage)如果您想完全不使用类似 cookie 的功能；那么据我所知，它必须在服务器端完成

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T15:26:03.300

如果没有 cookie，您的任务会有点困难。但我可能有两个解决方案给你：

1.  使用服务器上的会话，您可以控制调用了哪个 ajax，因此下次加载主页时，您可以将新内容附加到其中。
2.  使用 url 哈希附加 ajax 锚点已被单击`#anchorname`，因此您可以在重新加载后单击它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T15:27:22.163

该评论告诉您如何在不加载页面的情况下修改 url。你可以用那个。如果您必须使用旧版浏览器，那么您仍然可以使用片段（或同时使用这两种操作）。

有一些用于 jQuery/JavaScript 的历史插件来管理这个......这是一种称为“深度链接”的技术。你也许能找到一些简单的东西。基本上，在`loadContent`运行时，您希望使用指示加载内容 ID 或类似内容的片段`/whatever`来更新 url。`/whatever#right`

另一种选择是在页面最初加载时加载到该 div 的服务器上设置一些标志，这也可以为您节省 ajax 请求。但是，取决于您的服务器代码的设置方式，这可能对您不起作用。

# java - 如何在 Java 中使用进度条（Netbeans GUI）

> ID：12008565
> 
> 赞同：5
> 
> 时间：2012-08-17T15:19:17.970
> 
> 标签：java, netbeans, progress-bar, swingworker, swingx

我对 Java 不太熟悉，并且无法让进度条正常工作。我正在使用 Netbeans 的内置 GUI 制造商。目前，我的程序将目录中的图像读入图像数组。显然这需要一些时间，因此我想要一个简单的进度条来更新用户以了解加载的距离。我使用了其中一种拖放式进度条组件。

*   我目前可以获取目录中的文件数，并且可以计算加载文件的百分比
*   文件成功加载到数组中，但只有在加载所有文件后才会更新进度条。我尝试在循环时重新验证和重新绘制，但这不起作用
*   我已经尝试过 docs.oracle 上的各种教程，但似乎没有任何效果。
*   我相信 SwingWorker 是我应该使用的课程，这是正确的吗？

任何有关示例或建议的帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:27:36.593

是的，你遇到了所有新的 Swing 程序员的陷阱——[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

基本上来说，这`Thread`是任何 Swing 系统的核心。负责向所有 UI 组件分派事件，以及向重绘管理器发出请求以更新 UI。

如果您在 中执行任何耗时的任务`EDT`，您将阻止 UI 更新。

我建议您首先阅读[Worker Threads 和 SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)以及[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)，因为我知道您会问，请阅读此答案，它有许多使用示例`SwingWorker`，[JTextArea 附加问题](https://stackoverflow.com/questions/11927167/jtextarea-appending-problems/11927201#11927201)

# python - 使用 django 和 gunicorn 部署 Heroku：缺少 gunicorn_django 文件或目录

> ID：12008569
> 
> 赞同：1
> 
> 时间：2012-08-17T15:19:34.493
> 
> 标签：python, django, heroku, gunicorn

[该博客](http://elweb.co/programacion/django-static-files-on-heroku/)建议将以下内容放入我的`Procfile`.

```
web: python myproject_django/manage.py collectstatic --noinput; bin/gunicorn_django --workers=4 --bind=0.0.0.0:$PORT myproject_django/settings.py 
```

但是在 Heroku 上运行我的项目失败了。这是来自`$ Heroku logs`：

```
app[web.1]: bash: bin/gunicorn_django: No such file or directory 
```

所以`gunicorn_django`缺少一个文件/目录。该文件/目录应该包含什么，我应该把它放在哪里？

**树**

```
.
├── Procfile
├── myproject_django
│   ├── admin
│   ├── core
│   ├── __init__.py
│   ├── manage.py
│   ├── project_static
│   ├── settings.py
│   ├── templates
│   ├── urls.py
└── requirements.txt 
```

## 编辑

当我将我的项目更改`Procfile`为`web: python myproject_django/manage.py run_gunicorn -b 0.0.0.0:$PORT -w 3`我的项目时运行良好（也提供静态文件）。

然后当我推送到heroku，然后做`heroku run python myproject_django/manage.py collectstatic`，`heroku open`然后我的网站正在被提供，除了静态文件。

**树**（注意`staticfiles`目录是空的）

```
.
├── Procfile
├── myproject_django
│   ├── admin
│   ├── core
│   │   ├── admin.py
│   │   ├── __init__.py
│   │   ├── models.py
│   │   ├── static
│   │   │   ├── css
│   │   │   │   ├── base.css
│   │   │   │   ├── layout.css
│   │   │   └── media
|   |   |       ├── pek.ico
|   │   │       ├── pek.png
|   │   │       ├── pek_symbol.png
│   │   ├── tests.py
│   │   ├── views.py
│   ├── __init__.py
│   ├── manage.py
│   ├── settings.py
│   ├── staticfiles
│   ├── templates
│   │   └── core
│   │       ├── 404.html
│   │       ├── 500.html
│   │       ├── home.html
│   │       └── install.html
│   ├── urls.py
└── requirements.txt 
```

**在 settings.py**

```
PROJECT_PATH = os.path.dirname(os.path.abspath(__file__))
MEDIA_ROOT = os.path.join(PROJECT_PATH, 'static/media')
STATIC_ROOT = os.path.join(PROJECT_PATH,'staticfiles')
STATICFILES_DIRS = (
    os.path.join(PROJECT_PATH, 'core/static'),
) 
```

## Edit2（致马克西姆 R.）

从第一次编辑中的设置开始，我运行`python myproject_django/manage.py collectstatic`，然后推送到 heroku。`heroku open`仍然不提供静态文件。`DEBUG=True`在返回 404 错误时单击图像： `request url: http://myproject_django.herokuapp.com/static/media/pyk1.png`.

## Edit3（致马克西姆 R.）

**heroku 日志**

```
2012-08-18T10:18:37+00:00 heroku[web.1]: State changed from up to starting
2012-08-18T10:18:37+00:00 heroku[slugc]: Slug compilation finished
2012-08-18T10:18:38+00:00 heroku[web.1]: Starting process with command `python myproject_django/manage.py run_gunicorn -b 0.0.0.0:47262 -w 3`
2012-08-18T10:18:39+00:00 app[web.1]: /app/myproject_django
2012-08-18T10:18:39+00:00 app[web.1]: STATIC_ROOT: /app/myproject_django/staticfiles
2012-08-18T10:18:39+00:00 app[web.1]: STATICFILES_DIRS: '/app/myproject_django/core/static'
2012-08-18T10:18:39+00:00 app[web.1]: STATIC_ROOT: /app/myproject_django/staticfiles
2012-08-18T10:18:39+00:00 app[web.1]: STATICFILES_DIRS: '/app/myproject_django/core/static'
2012-08-18T10:18:39+00:00 app[web.1]: /app/myproject_django
2012-08-18T10:18:39+00:00 app[web.1]: 2012-08-18 05:18:39 [2] [INFO] Starting gunicorn 0.14.6
2012-08-18T10:18:39+00:00 app[web.1]: 2012-08-18 05:18:39 [2] [INFO] Listening at: http://0.0.0.0:47262 (2)
2012-08-18T10:18:39+00:00 app[web.1]: 2012-08-18 05:18:39 [2] [INFO] Using worker: sync
2012-08-18T10:18:39+00:00 app[web.1]: 2012-08-18 05:18:39 [5] [INFO] Booting worker with pid: 5
2012-08-18T10:18:39+00:00 app[web.1]: 2012-08-18 05:18:39 [6] [INFO] Booting worker with pid: 6
2012-08-18T10:18:39+00:00 app[web.1]: 2012-08-18 05:18:39 [7] [INFO] Booting worker with pid: 7
2012-08-18T10:18:39+00:00 app[web.1]: /app/myproject_django/app/myproject_django
2012-08-18T10:18:39+00:00 app[web.1]: /app/myproject_django
2012-08-18T10:18:39+00:00 app[web.1]: STATICFILES_DIRS: '/app/myproject_django/core/static'
2012-08-18T10:18:39+00:00 app[web.1]: STATIC_ROOT: /app/myproject_django/staticfilesSTATIC_ROOT: /app/myproject_django/staticfiles
2012-08-18T10:18:39+00:00 app[web.1]: STATICFILES_DIRS: '/app/myproject_django/core/static'
2012-08-18T10:18:39+00:00 app[web.1]: 
2012-08-18T10:18:39+00:00 app[web.1]: 
2012-08-18T10:18:39+00:00 app[web.1]: STATICFILES_DIRS: '/app/myproject_django/core/static'
2012-08-18T10:18:39+00:00 app[web.1]: STATIC_ROOT: /app/myproject_django/staticfiles
2012-08-18T10:18:40+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2012-08-18T10:18:40+00:00 heroku[web.1]: State changed from starting to up
2012-08-18T10:18:41+00:00 app[web.1]: 2012-08-18 05:18:41 [7] [INFO] Worker exiting (pid: 7)
2012-08-18T10:18:41+00:00 app[web.1]: 2012-08-18 05:18:41 [2] [INFO] Handling signal: term
2012-08-18T10:18:41+00:00 app[web.1]: 2012-08-18 05:18:41 [6] [INFO] Worker exiting (pid: 6)
2012-08-18T10:18:41+00:00 app[web.1]: 2012-08-18 05:18:41 [5] [INFO] Worker exiting (pid: 5)
2012-08-18T10:18:41+00:00 app[web.1]: 2012-08-18 05:18:41 [2] [INFO] Shutting down: Master
2012-08-18T10:18:42+00:00 heroku[web.1]: Process exited with status 0
2012-08-18T10:18:43+00:00 heroku[router]: GET myproject.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=36ms status=200 bytes=5474
2012-08-18T10:18:43+00:00 heroku[router]: GET myproject.herokuapp.com/static/media/pek.png dyno=web.1 queue=0 wait=0ms service=16ms status=404 bytes=2613 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T00:10:50.880

您提到的博客文章可以追溯到 2011 年 11 月，当时 virtualenv 安装在`/app`. 新[风格的 virtualenv](https://github.com/heroku/heroku-buildpack-python/commit/6aadf1683a2e2a3f9cca1ea90cf74bf809214328)提交将虚拟 env 从`/app`移到`/app/.heroku/venv`.

这解释了您的初始错误，`/app/.heroku/venv/bin/gunicorn_django`应该存在。

**这是不好的做法：**

通过在推送后收集静态文件，您不会成功地持久收集静态文件。阅读文档，尤其是[临时文件系统部分](https://devcenter.heroku.com/articles/dynos#isolation-and-security)：`collectstatic`并`open`在两个不同的 dynos 中运行，第一个中收集的内容将无法用于第二个，从而解释了您在编辑中指出的不一致之处。

它仅在您收集文件*并*在同一`[web]`进程中启动服务器时才有效，但是每次重新启动测功机时它都会重新收集所有静态文件。只是感觉设计不好。

任何一个：

*   在推送到heroku之前收集你的静态文件
*   使用另一种解决方案（例如 S3，即使博客文章的目的不是使用它）

无论如何，通过优雅高效的工作流程为静态资产提供服务并不容易。

恕我直言，最好坚持每个进程使用一个命令`Procfile`，如果您想链接命令，我建议您开始编写部署脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:06:37.817

确保您在 settings.py 中将 gunicorn 作为已安装的应用程序。

并尝试运行：

> `python my_project/manage.py run_gunicorn <options>`

# matlab - 在沿 x 轴定义的点处沿 y 轴插值数据

> ID：12008570
> 
> 赞同：0
> 
> 时间：2012-08-17T15:19:38.813
> 
> 标签：matlab

由于缺乏解释，我将稍微编辑我的问题。我有一个沿 y 轴绘制的数据集，沿 x 轴以 0.01 的步长绘制在 x 轴上。当然，沿 y 轴的步长可以是任意值。例如，我有 0.02 和 0.03，然后是 0.05。这意味着沿 y 轴缺少值 0.04。我想插入这个和这样的值。

请帮帮我。

数据：（它只是数据的一部分，实际数据在两列中都到 1）

```
0 0.154994
0.01 0.161559
0.02 0.16794
0.03 0.168151
0.04 0.172584
0.05 0.177927
0.06 0.187229
0.07 0.194835
0.08 0.195799
0.09 0.200876
0.1 0.207076
0.11 0.213972
0.12 0.220275
0.13 0.227207
0.14 0.234465
0.15 0.238785
0.16 0.250232
0.17 0.257551 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T16:07:59.787

按照@tmpearce 所说，最简单的用法是：

```
>> x = 0.0:0.01:0.17;
>> pred_y = interp1(Data(:,1), Data(:,2), x); 
```

编辑如下：

如果您发布的数据名为`Data`，并且您的`x`和`y`数据存在于`{0,1}`您可能希望这样做：

```
>> X = Data(:,1);
>> Y = Data(:,2);
>> pred_x = 0.0:0.01:1.0;
>> pred_y = interp1(X,Y,pred_x); 
```

有关所有选项，请参阅有关[interp1的文献。](http://www.mathworks.com/help/techdoc/ref/interp1.html)

# hibernate - 实例的标识符从 1 更改为 2

> ID：12008571
> 
> 赞同：7
> 
> 时间：2012-08-17T15:19:45.070
> 
> 标签：hibernate

我要做的是读取代码中的文本文件并将其插入到名为employee1 的表中。我收到了这个错误：

> Hibernate：插入到 EMPLOYEE1（NAME，SALARY，MANAGER，ID）值（？，？，？，？） com.Employee 实例的标识符从 1 更改为 2 线程“main”中的异常 org.hibernate.HibernateException：标识符在 org.hibernate.event.def.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:82) 的 org.hibernate.event.def.DefaultFlushEntityEventListener.checkId(DefaultFlushEntityEventListener.java:51) 的 com.Employee 实例的 1 更改为 2在 org.hibernate.event.def.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:190) 在 org.hibernate.event.def.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:70) 在 org.hibernate.event.def.DefaultFlushEventListener.onFlush （默认刷新事件监听器。java:26) at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:669) atroseindia.tutorial.hibernate.FirstExample.main(FirstExample.java:98)

Employee.java 的代码

```
public class Employee 
{

    private int id;
    private String name;
    private double salary;
    private String manager;

    public int getId() 
    {
        return id;
    }

    public void setId(int s) 
    {
        id = s;
    }
    //***************************************************//  
    public String getName() 
    {
        return name;
    }

    public void setName(String s) 
    {
        name = s;
    }
    //***************************************************//  
    public double getSalary() 
    {
        return salary;
    }

    public void setSalary(double s) 
    {
        salary = s;
    }
    //***************************************************//
    public String getManager() 
    {
        return manager;
    }

    public void setManager(String s) 
    {
        manager = s;
    }
} 
```

EmployeeEx.java 的代码（执行）

```
import java.io.File;
import java.util.Scanner;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.hibernate.cfg.Configuration;

import com.Employee;

public class EmployeeEx 
{

public static void main(String[] args) 
{
    Session session = null;

    try
    {       
        Transaction transaction = null; 

        SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();
        session =sessionFactory.openSession();

        Employee em = new Employee();   

        File f=new File("c:/Class/Employee1.txt") ;
        Scanner scan=new Scanner(f);
        transaction = session.beginTransaction();
        while(scan.hasNext())
        {               

            String line=scan.nextLine();            
            String empArray[]=line.split(" ");

            em.setId(Integer.parseInt(empArray[0]));
            em.setName(empArray[1]);
            em.setSalary(Double.parseDouble(empArray[2]));
            em.setManager(empArray[3]);

            session.save(em);
            transaction.commit();
        }

}
catch(Exception e)
{
    System.out.println(e.getMessage());
}
finally
{
    session.flush();
    session.close();

}

}

} 
```

配置文件：

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
<session-factory>
  <property name="hibernate.connection.driver_class">oracle.jdbc.OracleDriver</property>
  <property name="hibernate.connection.url">jdbc:oracle:thin:@localhost:1521:XE</property>
  <property name="hibernate.connection.username">system</property>
  <property name="hibernate.connection.password">system</property>
  <property name="hibernate.connection.pool_size">10</property>
  <property name="show_sql">true</property>
  <property name="dialect">org.hibernate.dialect.OracleDialect</property>
  <property name="hibernate.hbm2ddl.auto">update</property>
  <!-- Mapping files -->
  <mapping resource="contact.hbm.xml"/>
  <mapping resource="com.hbm.xml"/>
</session-factory>
</hibernate-configuration> 
```

映射文件：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
<class name="com.Employee" table="EMPLOYEE1">
   <id name="id" type="int" column="ID" >
   <generator class="assigned"/>
  </id>

  <property name="name">
     <column name="NAME" />
  </property>
  <property name="salary">
    <column name="SALARY"/>
  </property>
  <property name="manager">
    <column name="MANAGER"/>
  </property>
</class>

</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T16:58:57.023

实际上，您只有一个`Employee`实例，并且一次又一次地坚持相同的实例...

```
Employee em = new Employee();    // Not a right place..

while(scan.hasNext())
{               
   // Employee em = new Employee(); // Should be here...
   em.setId(Integer.parseInt(empArray[0]));
   em.setName(empArray[1]);
   em.setSalary(Double.parseDouble(empArray[2]));
   em.setManager(empArray[3]);
   ....
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-05T11:56:25.820

用来`Session.merge(Object)`代替`Session.save(Object)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-08T14:48:33.017

将 pojo 和映射文件中的**int** id 字段更改为**long**。

# javascript - AngularJS 模板中的三元运算符

> ID：12008580
> 
> 赞同：239
> 
> 时间：2012-08-17T15:20:25.133
> 
> 标签：javascript, html, angularjs, ternary-operator

你如何用 AngularJS（在模板中）做一个三元组？

在 html 中使用一些属性（类和样式）而不是创建和调用控制器的函数会很好。

* * *

## 回答 #1

> 赞同：374
> 
> 时间：2012-08-28T00:59:06.847

**更新**：Angular 1.1.5 添加了一个[三元运算符](https://github.com/angular/angular.js/commit/6798fec4390a72b7943a49505f8a245b6016c84b)，所以现在我们可以简单地编写

```
<li ng-class="$first ? 'firstRow' : 'nonFirstRow'"> 
```

* * *

如果您使用的是早期版本的 Angular，您的两个选择是：

1.  `(condition && result_if_true || !condition && result_if_false)`
2.  `{true: 'result_if_true', false: 'result_if_false'}[condition]`

上面的第 2 项创建了一个具有两个属性的对象。数组语法用于选择名称为 true 的属性或名称为 false 的属性，并返回关联的值。

例如，

```
<li class="{{{true: 'myClass1 myClass2', false: ''}[$first]}}">...</li>
 or
<li ng-class="{true: 'myClass1 myClass2', false: ''}[$first]">...</li> 
```

$first 在第一个元素的 ng-repeat 中设置为 true，因此上面将仅在第一次通过循环时应用类“myClass1”和“myClass2”。

但是使用**ng-class**有一种更简单的方法：ng-class 接受一个表达式，该表达式必须计算为以下之一：

1.  一串以空格分隔的类名
2.  类名数组
3.  类名到布尔值的映射/对象。

上面给出了 1) 的示例。这是 3 的示例，我认为它读起来更好：

```
 <li ng-class="{myClass: $first, anotherClass: $index == 2}">...</li> 
```

第一次通过 ng-repeat 循环，添加了 myClass 类。第三次通过（$index 从 0 开始），添加类 anotherClass。

**ng-style**接受一个表达式，该表达式必须计算为 CSS 样式名称到 CSS 值的映射/对象。例如，

```
 <li ng-style="{true: {color: 'red'}, false: {}}[$first]">...</li> 
```

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2012-08-17T15:20:25.133

**更新：** Angular 1.1.5 添加了一个三元运算符，这个答案只对 1.1.5 之前的版本是正确的。对于 1.1.5 及更高版本，请参阅当前接受的答案。

**在 Angular 1.1.5 之前：**

angularjs中三元的形式为：

```
((condition) && (answer if true) || (answer if false)) 
```

一个例子是：

```
<ul class="nav">
    <li>
        <a   href="#/page1" style="{{$location.path()=='/page2' && 'color:#fff;' || 'color:#000;'}}">Goals</a>
    </li>
    <li>
        <a   href="#/page2" style="{{$location.path()=='/page2' && 'color:#fff;' || 'color:#000;'}}">Groups</a>
    </li>
</ul> 
```

或者：

```
 <li  ng-disabled="currentPage == 0" ng-click="currentPage=0"  class="{{(currentPage == 0) && 'disabled' || ''}}"><a> << </a></li> 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-10-14T11:46:49.883

对于角模板中的文本（`userType`是 $scope 的属性，如 $scope.userType）：

```
<span>
  {{userType=='admin' ? 'Edit' : 'Show'}}
</span> 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-01-16T12:21:59.430

这个答案早于[1.1.5](https://github.com/angular/angular.js/blob/master/CHANGELOG.md#115-triangle-squarification-2013-05-22)`$parse`版本，其中函数中没有适当的三元组。如果您使用的是较低版本，或者作为过滤器的示例，请使用此答案：

```
angular.module('myApp.filters', [])

  .filter('conditional', function() {
    return function(condition, ifTrue, ifFalse) {
      return condition ? ifTrue : ifFalse;
    };
  }); 
```

然后将其用作

```
<i ng-class="checked | conditional:'icon-check':'icon-check-empty'"></i> 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-05-19T09:20:11.290

虽然您可以`condition && if-true-part || if-false-part`在旧版本的 Angular 中使用 - 语法，但通常的三元运算符`condition ? true-part : false-part`在[Angular 1.1.5 及更高版本](https://github.com/angular/angular.js/blob/master/CHANGELOG.md#115-triangle-squarification-2013-05-22)中可用。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-05-23T08:19:34.833

就是这样：三元运算符在**1.1.5**中被添加到角度解析器中！[查看更新日志](https://github.com/angular/angular.js/blob/master/CHANGELOG.md)

[这是一个小提琴](http://jsfiddle.net/lionroots/JRdRp/)，显示了 ng-class 指令中使用的新三元运算符。

```
ng-class="boolForTernary ? 'blue' : 'red'" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-02T16:43:07.993

```
 <body ng-app="app">
  <button type="button" ng-click="showme==true ? !showme :showme;message='Cancel Quiz'"  class="btn btn-default">{{showme==true ? 'Cancel Quiz': 'Take a Quiz'}}</button>
    <div ng-show="showme" class="panel panel-primary col-sm-4" style="margin-left:250px;">
      <div class="panel-heading">Take Quiz</div>
      <div class="form-group col-sm-8 form-inline" style="margin-top: 30px;margin-bottom: 30px;">

        <button type="button" class="btn btn-default">Start Quiz</button>
      </div>
    </div>
  </body> 
```

按钮切换和更改按钮的标题和显示/隐藏 div 面板。见[Plunkr](http://plnkr.co/edit/yj0kxW?p=preview)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-18T19:48:19.210

如果有人仍在处理像我这样的遗留代码，你也可以使用 ng-style 中的三元运算符来实现这一点，如下所示：

```
<li ng-style="{'color': connected ? '#008000' : '#808080'}"></li> 
```

# javascript - SWFUploader 在 Safari 和 Mac Chrome 中不起作用

> ID：12008588
> 
> 赞同：1
> 
> 时间：2012-08-17T15:20:44.243
> 
> 标签：javascript, flash, safari

我在使用这个插件时遇到了很大的问题。基本上，在 Windows 上，它在所有 3 种浏览器（Chrome、Firefox、Safari）上都可以正常工作，在 Mac 上，它在 Firefox 上工作正常，但在一台计算机上也可以在 Safari 上正常工作，而在另一台计算机上却不行？！？在 Mac 上，在 Chrome 中它根本不起作用。

对于上传，我收到 -200 错误（HTTP 错误）和 -302 作为消息。

我不知道从哪里开始，这显然不是由于编程代码，而是由于一些奇怪的 OS-browser-flash 播放器集成。尝试将 Flash 播放器更新到最新版本，但没有帮助。也试过清除cookie，但都是一样的。

有什么建议么？

# c++ - 模板类中的模板构造函数必须在类定义中定义吗？

> ID：12008589
> 
> 赞同：8
> 
> 时间：2012-08-17T15:20:46.020
> 
> 标签：c++, templates, constructor

假设我用模板构造函数编写了一个模板类，就像这样。

```
template<typename T>
class X{

    template<typename S>
    X(X<S> x){}
}; 
```

编译得很好。但是，当我尝试在模板声明之外定义构造函数时，如下所示：

```
template<typename T>
class X{

    template<typename S>
    X(X<S> x);
};

template<typename T, typename S>
X<T>::X(X<S> y){} 
```

我收到以下错误：

```
error: invalid use of incomplete type ‘class X<T>’ 
```

为什么？不能在类声明之外定义模板类的模板构造函数吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-17T15:24:08.530

您有两个级别的模板，并且必须分别指定它们。

```
template<typename T>
template<typename S>
X<T>::X(X<S> y){} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T15:23:49.710

试试这个：

```
template<typename T>
template<typename S>
X<T>::X()( X<S> y )
{
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-17T15:24:12.697

你的类有一个模板参数，你本质上里面有一个模板函数，所以你需要

```
template<typename T>
template <typename S>
X<T>::X(X<S> y){} 
```

# c# - 基类中定义的 log4net 记录器

> ID：12008592
> 
> 赞同：15
> 
> 时间：2012-08-17T15:20:57.880
> 
> 标签：c#, inheritance, logging, static, log4net

我想在我的 MVC 控制器抽象基类中构建我的 log4net 记录器，如下所示：

```
protected static readonly ILog Log = LogManager.GetLogger(typeof(AuthorizedController)); 
```

通过这种方式，我可以定义一次记录器并完成它。唯一的问题是日志输出中的 logger 属性将始终为`AuthorizedController`，如果我`FooController`继承自，`AuthorizedController`我希望日志输出能够反映这一点。

什么是一个好的 KISS、DRY 和有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-17T15:32:04.910

我不确定调用的成本有多高`LogManager.GetLogger()`，但我怀疑 log4net 系统中有一些巧妙的缓存和/或延迟初始化，可以保持请求的实例可用于快速检索。毕竟，没有理由`LogManager.GetLogger()`使用相同的类型参数调用两次会返回不同的实例。

也就是说，也许用以下属性替换该字段就足够了。

```
protected ILog Logger
{
    get { return LogManager.GetLogger(GetType()); }
} 
```

`GetType()`是虚拟的且重载的，因此每个具体类型将在调用此属性时提供其类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-26T19:15:27.913

正如*Steve Guidi*建议的那样 - 使用 GetType 为特定类型的实例创建记录器。您可以保存对在支持字段中调用 LogManager.GetLogger 的记录器实例的引用：

```
 private ILog _log;
    protected ILog Log => _log ?? (_log = LogManager.GetLogger(GetType())); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T15:34:40.350

我通过使用[NInject](http://www.ninject.org/)作为 IoC 容器做了类似的事情，但我想你可以抓住这个想法来使用你自己的容器。基本上我在请求类型构造函数上注入 ILog ，但我没有绑定到实例，[而是将其绑定到 provider](https://github.com/ninject/ninject/wiki/Providers,-Factory-Methods-and-the-Activation-Context)。

```
 kernel.Bind<ILog>().ToProvider<MyProvider>();

public object Create(IContext context)
{
    return LogManager.GetLogger(context.Request.Target.Member.DeclaringType);
} 
```

所以每种类型都会收到一个与构造函数中相同的记录器`GetLogger(GetType())`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T15:35:45.547

拥有静态记录器（或一般的静态实例）是一种不好的做法。它很容易导致不相关的组件之间出现不希望的耦合。

您应该考虑向游戏添加依赖注入/控制反转框架。将记录器注入到类的 ctor 中。大多数框架允许您在不同的上下文中定义不同的实现。

我们在产品中使用[Castle Windsor](http://docs.castleproject.org/Default.aspx?Page=MainPage&NS=Windsor&AspxAutoDetectCookieSupport=1)

您还可以查看[这篇文章](https://stackoverflow.com/questions/3452318/dependency-injection-and-named-loggers)以找到将日志记录与 DI 一起使用的示例

# c# - 如何创建支持任何/所有过滤器的 OData v3 服务

> ID：12008596
> 
> 赞同：1
> 
> 时间：2012-08-17T15:21:07.613
> 
> 标签：c#, wcf, wcf-data-services, odata

我需要将我的 OData 服务更新到第三个版本。现在，我只用 NuGet 存储库中的新库和 DataServiceConfiguration 将属性 MaxProtocolVersion 设置为 V3 更改了旧库。
可能这还不够吗？有人知道，我必须做什么才能支持我的应用程序中的任何/所有过滤器？

当我尝试发送这样的请求时： http:
[//expamle.com/OData.svc/Contacts](http://expamle.com/OData.svc/Contacts) ?$filter=Phones/any(p: p/Number eq '111-222-333-11')

我的应用程序抛出此异常：

```
<error xmlns="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">
    <code>4</code>
    <message xml:lang="" />
        <innererror>
            <message>No property 'any' exists in type 'City' at position 5.</message>
            <type>System.Data.Services.DataServiceException</type>
        <stacktrace>
            at System.Data.Services.Parsing.RequestQueryParser.ExpressionParser.ParseMemberAccess(Expression instance)
            at System.Data.Services.Parsing.RequestQueryParser.ExpressionParser.ParsePrimary()
            at System.Data.Services.Parsing.RequestQueryParser.ExpressionParser.ParseUnary()
            at System.Data.Services.Parsing.RequestQueryParser.ExpressionParser.ParseMultiplicative()
            at System.Data.Services.Parsing.RequestQueryParser.ExpressionParser.ParseAdditive()
            at System.Data.Services.Parsing.RequestQueryParser.ExpressionParser.ParseComparison()
            at System.Data.Services.Parsing.RequestQueryParser.ExpressionParser.ParseLogicalAnd()
            at System.Data.Services.Parsing.RequestQueryParser.ExpressionParser.ParseLogicalOr()
            at System.Data.Services.Parsing.RequestQueryParser.ExpressionParser.ParseExpression()
            at System.Data.Services.Parsing.RequestQueryParser.ExpressionParser.ParseWhere()
            at System.Data.Services.Parsing.RequestQueryParser.ParseLambdaForWhere(IDataService service, RequestDescription requestDescription, Type queryElementType, String expression)
            at System.Data.Services.Parsing.RequestQueryParser.Where(IDataService service, RequestDescription requestDescription, Expression source, String predicate)
            at System.Data.Services.RequestQueryProcessor.ProcessFilter() at System.Data.Services.RequestQueryProcessor.ProcessQuery()
            at System.Data.Services.RequestQueryProcessor.ProcessQuery(IDataService service, RequestDescription description)
            at System.Data.Services.RequestUriProcessor.ProcessRequestUri(Uri absoluteRequestUri, IDataService service, Boolean internalQuery)
            at System.Data.Services.DataService`1.ProcessIncomingRequestUri()
            at System.Data.Services.DataService`1.HandleRequest()
        </stacktrace>
    </innererror>
</error> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:22:45.190

您是否确保在 DataServiceBehavior 中启用了任何/所有支持？ [http://msdn.microsoft.com/en-us/library/system.data.services.dataservicebehavior.acceptanyallrequests(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/system.data.services.dataservicebehavior.acceptanyallrequests(v=vs.103).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:30:23.537

您可能需要将 WCF 数据服务更新到 5.0 以支持 v3 - 您可以[在此处](http://www.microsoft.com/en-us/download/details.aspx?id=29306)下载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T16:05:45.047

听起来 City 是一个单例（不是集合），在这种情况下你不需要任何东西，这样的事情就可以了：

IE`http://example.com/OData.svc/Contacts?$filter=City/Name eq 'New York'`

Any/All 仅适用于 $filter 中引用的集合。

# shopify - 403 Forbidden when call get products or get customers

> ID：12008597
> 
> 赞同：0
> 
> 时间：2012-08-17T15:21:14.850
> 
> 标签：shopify

我正在为 Shopify 开发一个私人应用程序，我可以使用 GET /admin/orders.xml 成功下载 XML 格式的订单列表。但是，当我尝试获取客户或产品列表时，会收到 403 禁止错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:54:22.797

检查您的应用程序是否有权读取客户或产品资源。

# android - 按下后退按钮时 singleTop 可搜索活动终止

> ID：12008598
> 
> 赞同：1
> 
> 时间：2012-08-17T15:21:23.480
> 
> 标签：android, android-intent, android-manifest

我有一个`ListActivity`作为我的应用程序的主要活动。列表中的项目应该是可搜索的，但我自然不想一遍又一遍地开始相同的活动，因此`singleTop`. 但是，我确实希望用户能够在搜索后返回到主列表，这给我带来了一些麻烦。目前，搜索后按返回将终止应用程序。一种解决方案是制作列表活动的副本，专门用于处理搜索，但我无法想象这是最好的方法。我已经简单地尝试过`activity-alias`，但是我尝试过的每一个排列要么不会改变行为，要么会执行 Web 搜索。我不知道是否`activity-alias`合适，但无论如何我已经包含了一个例子。

我的问题是，有没有一种最好的方法来实现我正在尝试做的事情，而不涉及多余的代码维护？

```
<activity
    android:name=".MainListActivity"
    android:label="@string/app_name"
    android:launchMode="singleTop">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>
<activity-alias
    android:name=".SearchList"
    android:targetActivity=".MainListActivity"
    android:launchMode="singleTop">
    <intent-filter>
        <action android:name="android.intent.action.SEARCH" />
    </intent-filter>
    <meta-data
        android:name="android.app.searchable"
        android:resource="@xml/searchable" />
</activity-alias> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:28:14.357

我找到了一个令人尴尬的简单解决方案。

显现：

```
<activity
    android:name=".MainListActivity"
    android:label="@string/app_name"
    android:launchMode="singleTop" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.intent.action.SEARCH" />
    </intent-filter>
    <meta-data
        android:name="android.app.searchable"
        android:resource="@xml/searchable" />
</activity> 
```

列表/搜索活动：

```
public class MainListActivity extends FragmentActivity
implements LoaderManager.LoaderCallbacks<Cursor>
{
    private boolean searching = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.list_cheapest);
        dbHelper = new DatabaseHelper(this);

        String[] fromColumns = {"pname", "store", "unit_price"};
        int[] toViews =
            {R.id.entryProductName, R.id.entryStore, R.id.entryUnitPrice};
        adapter = new SimpleCursorAdapter(this, R.layout.cheapest_row_entry,
            null, fromColumns, toViews);

        ListView lv = (ListView)findViewById(android.R.id.list);
        lv.setAdapter(adapter);
        lv.setEmptyView(findViewById(android.R.id.empty));
        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> l, View v, int position,
            long id) {
                searching = false;
                startActivity(new Intent(getBaseContext(),
                    EditProductActivity.class).putExtra("pid", ""+id));
            }
        });
        handleIntent(getIntent());
    }

    @Override
    public void onBackPressed() {
        if (searching) {
            searching = false;
            getSupportLoaderManager().restartLoader(LOADER_MAIN, null, this);
        } else {
            finish();
        }
    }

    @Override
    protected void onNewIntent(Intent intent) {
        handleIntent(intent);
    }

    private void handleIntent(Intent intent) {
        if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
            searching = true;
            filter = intent.getStringExtra(SearchManager.QUERY);
            getSupportLoaderManager().restartLoader(LOADER_SEARCH, null, this);
        } else {
            getSupportLoaderManager().initLoader(LOADER_MAIN, null, this);
        }
    }
    ...
} 
```

但是，我确实首先开始`activity-alias`工作。我将它包括在内以供后代使用。

显现：

```
<activity
    android:name=".MainListActivity"
    android:label="@string/app_name"
    android:launchMode="singleTop" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
    <meta-data
        android:name="android.app.default_searchable"
        android:value=".SearchListActivity" />
</activity>
<activity-alias
    android:name=".SearchListActivity"
    android:launchMode="singleTop"
    android:targetActivity=".MainListActivity" >
    <intent-filter>
        <action android:name="android.intent.action.SEARCH" />
    </intent-filter>
    <meta-data
        android:name="android.app.searchable"
        android:resource="@xml/searchable"
        android:value=".SearchListActivity" />
</activity-alias> 
```

列表/搜索活动：

```
public class MainListActivity extends FragmentActivity
implements LoaderManager.LoaderCallbacks<Cursor>
{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.list_view);
        ...
        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> l, View v, int position,
            long id) {
                if (Intent.ACTION_SEARCH.equals(getIntent().getAction())) {
                    finish();
                }
                startActivity(new Intent(getBaseContext(),
                    EditProductActivity.class).putExtra("pid", ""+id));
            }
        });
        handleIntent(getIntent());
    }

    @Override
    protected void onNewIntent(Intent intent) {
        handleIntent(intent);
    }

    private void handleIntent(Intent intent) {
        if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
            filter = intent.getStringExtra(SearchManager.QUERY);
            getSupportLoaderManager().restartLoader(LOADER_SEARCH, null, this);
        } else {
            getSupportLoaderManager().initLoader(LOADER_MAIN, null, this);
        }
    }
    ...
} 
```

# jpa - 在 jpacontroller 中使用自身的 Classcastexception

> ID：12008600
> 
> 赞同：1
> 
> 时间：2012-08-17T15:21:25.680
> 
> 标签：jpa, glassfish, classcastexception

我在 glassfish 上有一个 Web 应用程序，其中包括一些使用 JPA 构建的数据库调用。但是，每当我重新部署 Web 应用程序时，当我尝试检索项目时，都会收到 ClassCastException com.item.DBItem cannot be cast to com.item.DBItem。

```
public DBItem findActiveItemId(String itemid){
        EntityManager em = getEntityManager();
        try{
            Query q = em.createQuery("SELECT c from DBItems c WHERE c.itemId = :cid AND c.active = 1");
            q.setParameter("cid", itemid);
            return (DBItem)q.getSingleResult();
        }catch(javax.persistence.NoResultException nre){
            return null;
        }finally{
            em.close();
        }        
    } 
```

重新启动 glassfish 始终可以解决问题，但为什么会发生这种情况呢？

# java - 如何使用java更改html文件的宽度和高度

> ID：12008602
> 
> 赞同：0
> 
> 时间：2012-08-17T15:21:46.367
> 
> 标签：java, android

我想改变 width="xyz" ，其中 (xyz) 可以是任何特定值到 width="300"。我研究了正则表达式，这是我使用正则表达式的语法

```
String holder = "width=\"340\"";
String replacer="width=\"[0-9]*\"";
theWeb.replaceAll(replacer,holder); 
```

其中 web 是字符串。但这并没有被取代。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:45:33.910

你的正则表达式是正确的。您可能会忘记的一件事是，在 Java 中，所有字符串方法都不会影响当前字符串——它们只会返回一个经过适当转换的新字符串。试试这个：

```
String replacement = 'width="340"';
String regex = 'width="[0-9]*"';
String newWeb = theWeb.replaceAll(regex, replacement); // newWeb holds new text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:26:01.070

更好地`JSoup`用于**操作和提取**数据等`Html`

**有关详细信息，请参阅此链接：**

[http://jsoup.org/](http://jsoup.org/)

# networking - 从另一台计算机连接到 Windows localhost (IIS)

> ID：12008606
> 
> 赞同：5
> 
> 时间：2012-08-17T15:22:03.497
> 
> 标签：networking, iis-7, windows-vista

我有一台为其本地主机运行 IIS7 的 Windows Vista 笔记本电脑。在这台机器上，我可以成功导航到：

*   “http://localhost”
*   “http://127.0.0.1”
*   “http://mycpuname”

但是，我无法从同一网络上的另一台计算机访问此 localhost 网站。理想情况下，我可以访问“http://mycpuname”（这样我就可以对连接进行硬编码），但此时我可能会选择机器的 IP 地址（http://192.000.000.xyz )

我在这里和互联网上的其他地方看到过类似的问题......但似乎没有一个帖子能解决我的问题。

我尝试过的事情： - 向 Windows 防火墙添加例外以允许 TCP 端口 80 和 8080 - 完全禁用 Windows 防火墙 - 在[这篇文章中运行“netsh”命令](http://programming-girl.blogspot.com/2010/03/cant-access-localhost-using-ip-address.html)

此外，我通过在命令提示符下运行“ipconfig”来查看 Windows 笔记本电脑上的 IP 地址。奇怪的是，尝试从 Windows 笔记本电脑访问“http://192.000.000.xyz”似乎不起作用......

我也尝试过重新启动 IIS 并重新启动我的机器。

帮助？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-12-22T15:45:36.310

转到具有高级安全性、入站规则的 Windows 防火墙并检查是否启用了万维网服务。我有同样的问题，这为我解决了这个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T15:30:00.147

试试`netstat -na`- 它会告诉你你的网络服务器正在监听哪些 IP 地址。

如果它只是监听`127.0.0.1`，环回，你将不得不重新配置网络服务器来监听所有地址/接口（通常是`*.*.*.*`，或者`0.0.0.0`在一些配置文件中，或者只是某个地方的一些窗口对话框中的一些下拉列表）。

另一方面，如果`netstat`告诉您 Web 服务器正在侦听`*.*.*.*`or `0.0.0.0`，即所有接口，那么您必须弄清楚是什么阻止了流量 - 它要么是本地防火墙，要么是两台计算机之间的路径上的东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T15:32:57.787

你绑定到 127.0.0.1 吗？运行以下命令

```
netstat -an |findstr :80 |findstr LISTEN 
```

如果显示 127.0.0.1，则需要更改 IIS 监听 0.0.0.0

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-17T10:02:00.150

如果您想从本地网络上的任何其他计算机访问您的网站，则只需输入您的网络 IP 和端口即可。如果您想从 Internet 访问它，则需要配置您的 IP。

# symfony - 是否可以在 Symfony2 的 router:debug 命令的输出中获取控制器名称？

> ID：12008610
> 
> 赞同：1
> 
> 时间：2012-08-17T15:22:11.423
> 
> 标签：symfony

Symfony2 控制台命令`router:debug`生成所有当前配置的路由列表，包括每个路由的名称、HTTP 方法和模式。

是否也可以获取此列表中每个路由的控制器，而无需使用`router:debug [name]`每个路由并从“Defaults _controller：”行中解析出控制器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T16:12:00.330

检查 RouterDebugCommand 类表明这是不可能的，所以我对 outputRoutes 方法进行了更改：[https ://gist.github.com/3380250](https://gist.github.com/3380250)

# c++ - Listview 中的第一次机会异常设置检查状态

> ID：12008621
> 
> 赞同：0
> 
> 时间：2012-08-17T15:22:40.640
> 
> 标签：c++, windows, winapi, access-violation

我在 Visual Studio 的输出窗口中收到以下错误：

`First-chance exception at 0x5d0d47af (msvcr100d.dll) in Program.exe: 0xC0000005: Access violation reading location 0xcccccccc.`

每次执行此代码时：

```
const int iItem = ListView_GetItemCount(hListOutput);

LVITEM lvI;

lvI.mask        = LVIF_TEXT | LVIF_GROUPID;
lvI.iSubItem    = 0;
lvI.iGroupId    = 101;
lvI.iItem       = iItem;
lvI.pszText     = const_cast<LPWSTR>(mystr.c_str());

if (ListView_InsertItem(hListOutput, &lvI) != -1)
{
    ListView_SetCheckState(hListOutput, iItem, TRUE);
} 
```

如果我注释掉`ListView_SetCheckState`，我将停止访问冲突。

正在插入所有项目并且正在设置项目检查状态。
但我想弄清楚为什么我会遇到访问冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:39:34.707

> ListView_SetCheckState(hListOutput, **iItem** , TRUE);

这似乎是错误的，因为它将指向比列表中可用的值大一的值（因为索引为零）。

尝试

```
unsigned int iItem1=iItem-3;//anything greater than zero..

ListView_SetCheckState(hListOutput,iItem1, TRUE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T03:04:09.880

ListView_InsertItem 的返回值是否等于 iItem？MSDN 文档指出项目索引是从插入函数返回的，因此在设置检查状态时使用该值可能是最安全的。

# php - Joomla 覆盖标题

> ID：12008626
> 
> 赞同：1
> 
> 时间：2012-08-17T15:22:45.233
> 
> 标签：php, joomla, http-headers

我正在为手机（即运行 Android）提供下载服务，而 Android 似乎只接受[特定的 headers](http://www.digiblog.de/2011/04/android-and-the-download-file-headers/)。现在这就是我在 Joomla 中尝试做的事情。

```
 $doc =& JFactory::getDocument();
$doc->setMimeEncoding('application/octet-stream'); 
```

这可行，但由于某种原因，Joomla 将 charset=utf-8 添加到我的标题中，因此下载不起作用。我如何摆脱这个字符集（结果证明它对二进制文件毫无用处）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:40:44.327

PHP 5.3 引入了[`header_remove`](http://php.net/manual/en/function.header-remove.php)，可能会在您的情况下使用（尽管我对 Joomla 的经验很少）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T22:09:49.997

对于 Joomla 2.5（未针对较低或较高版本进行测试）Joomla 附加自己的标题，这就是您需要使用 JResponse::clearHeaders(); 的原因

```
$filename = basename($file);
ob_end_clean();
JResponse::clearHeaders();
JResponse::setHeader('Content-Type', 'application/octet-stream', true);
JResponse::setHeader('Content-Disposition', 'attachment; filename='.$filename.';', true);
JResponse::sendHeaders();
echo JFile::read($file); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T20:55:43.707

作为记录：它不能在 Joomla 的 MVC 结构中完成，因为总是附加一个字符集（和其他标题），所以我最终从一个单独的 php 文件导入和初始化 Joomla 的框架，如下所示：

```
define( '_JEXEC', 1 );

// real path depending on the type of server
// change the number of returns/level needed in your path relative to the position of your script in your directory
define( 'JPATH_BASE', realpath(dirname(__FILE__).'/../../..' ));
define( 'JPATH_COMPONENT', realpath(dirname(__FILE__).'/..' ));
define( 'DS', DIRECTORY_SEPARATOR );

// loading framework of Joomla!
require_once ( JPATH_BASE.DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE.DS.'includes'.DS.'framework.php' );
$mainframe =& JFactory::getApplication('site');
$mainframe->initialise();

/* 
... some other joomla stuff ...
*/
header('Content-Disposition: attachment; filename="example.zip"'));
header('Content-Type: application/octet-stream');
readfile($lfile); 
```

因此，基本上，加载框架，使用数据库或其他任何东西并自己调用标头函数。希望，这对其他人有帮助。

# python - 嵌入式 python - Numpy 导入时出错

> ID：12008633
> 
> 赞同：1
> 
> 时间：2012-08-17T15:23:37.400
> 
> 标签：python, numpy

我正在尝试在 C++ 中嵌入 python 2.7.3 并使用 Numpy 库，并且在第二次导入 Numpy 时出现运行时错误。这是一个简单的代码示例（尽可能小）：

```
#include <Python.h>

int main() {
    for(int i=0 ; i<2 ; i++) {
        Py_Initialize() ;
        PyImport_ImportModule("numpy");
        Py_Finalize() ;
    }
    return 0 ;
} 
```

这有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T16:02:18.247

从`Py_Finalize`您拥有的文档文档中：

> 如果多次调用它们的初始化例程，某些扩展可能无法正常工作；如果应用程序多次调用 Py_Initialize() 和 Py_Finalize() ，就会发生这种**情况**。

如果 Numpy 是这些扩展之一，我不会感到惊讶。

更新：看起来是这样，看到[这个问题](https://stackoverflow.com/questions/7676314/py-initialize-py-finalize-not-working-twice-with-numpy)。

# jquery - 未捕获的类型错误：对象 [对象对象] 没有方法“对话”

> ID：12008636
> 
> 赞同：1
> 
> 时间：2012-08-17T15:23:49.597
> 
> 标签：jquery, jquery-ui

我知道很多人都遇到过这个问题，而且我已经看到这些人的参考重复。但对我来说，我看不到任何重复的东西。

这是我的代码：

**HTML**

```
<title>The HUB</title> <link rel="stylesheet" href="/css/styles.css" type="text/css" /> 
<link rel="stylesheet" href="/css/jquery.ui.all.css"> 
</head> 
<body> 
<script type="text/javascript" src="/js/jquery-1.6.2.min.js"></script> 
<script type="text/javascript" src="/js/hub.js?n=1"></script> 
<script type="text/javascript" src="/js/testSignal.js"></script>  
<script type="text/javascript" src="/js/ui/jquery.ui.core.js"></script> 
<script type="text/javascript" src="/js/ui/jquery.ui.widget.js"></script>  
<script type="text/javascript" src="/js/ui/jquery.ui.mouse.js"></script>  
<script type="text/javascript" src="/js/ui/jquery.ui.draggable.js"></script> 
<div id="wrapper"> ....  <div id="dialog"><p>Some Text</p></div></div> 
```

**jQuery**

```
$(document).ready(function(){
    $("#dialog").dialog({ autoOpen: false });
    $("#testSignalBtn").click(function(){
        $("#dialog").dialog("open");
        return false;
    });
}); 
```

我试过重新排序所有的 javscript 文件，启用一些而不是其他等，但它似乎不起作用。文件*hub.js?n=1*确实使用 jQuery 并且没有问题。- 这不是我写的文件，我已经从别人那里接手了。我已经尝试禁用该文件，但我仍然遇到同样的问题。

这是其他人在同一件事上所说的：[未捕获的类型错误：对象 [对象对象] 没有方法“对话框”](https://stackoverflow.com/questions/8786104/uncaught-typeerror-object-object-object-has-no-method-dialog)，这里也是：[jQuery 未捕获的类型错误：对象 [对象对象] 没有方法滑块](https://stackoverflow.com/questions/9435505/jquery-uncaught-typeerror-objectobject-object-has-no-method-slider)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T15:35:31.833

`dialog`, 像`draggable`, 是一个小部件。如果你想使用它，你必须包括它：

```
<script type="text/javascript" src="/js/ui/jquery.ui.dialog.js"></script> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-17T15:34:20.163

无需包含所有这些单独的文件，只需包含整个 jQuery UI CDN 链接：

```
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.22/jquery-ui.min.js"></script> 
```

只是在小提琴中尝试过，你所拥有的一切都很好，它一定是一个丢失的 .js 文件。

[http://jsfiddle.net/nU5TF/](http://jsfiddle.net/nU5TF/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:57:02.980

正如上面所说的 pimvdb，`dialog`是一个小部件。但是，许多项目不使用单独的小部件包含文件，而是使用一种可定制的编译和缩小版本。要确保对话框小部件包含在您的构建中，请在文本编辑器中打开 jquery-ui.js 文件：标题会告诉您包含哪些组件，如下所示：

```
/*! jQuery UI - v1.10.0 - 2013-02-14
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js
* Copyright (c) 2013 jQuery Foundation and other contributors Licensed MIT */ 
```

在我的情况下，除了对话框小部件之外几乎所有东西都包括在内。

# hibernate - Hibernate 分页的 OneToMany 关系

> ID：12008637
> 
> 赞同：5
> 
> 时间：2012-08-17T15:23:51.993
> 
> 标签：hibernate, hibernate-onetomany

如何在 Hibernate 中映射多方需要分页的一对多关系？（即您有数百个或更多相关对象）
使用 OneToMany 注释（或其 xml 等效项）没有用，因为加载单侧对象会使用它检索所有相关对象，从而导致内存灾难（即使您使用延迟加载） .
一种可能的方法（我已经在使用）是在 DAO 实现中添加一个 getter 方法，您可以在其中引入分页参数。但是，我可以看到这并不理想，因为您失去了一些功能，如级联（例如，我必须在 DAO 类中包含 setter 方法来关联对象）。此外，您失去了一些 OOP 意义，因为单面对象没有检索其相关多面对象的方法。最好的解决方案是什么？
为了进一步说明我的观点，假设我有两个类，它们之间的关系如下： A has-many B.
我不能使用 OneToMany 注释编写 A.getAllB() 方法，因为有数百个 B 与A. 因此，为了对结果进行分页，我使用 getAllB() 方法创建了一个单独的 ADaoImpl 类，我可以在其中包含分页参数以一次仅返回一页数据。这个对吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T16:58:44.383

我想我会做与您提议的相同的事情：在我的 dao 上创建一个新方法，该方法采用分页参数并返回指定的结果页面。是否要将子对象保留在父对象中取决于您。您可以为这些对象创建一个瞬态字段。

```
 public class Parent {
    @Transient
    private List<Child> children;

  }

  public class ParentDao {

    // Solution 1 - You can keep the parent/child association
    public void loadChildren(Parent parent, int firstResult, int maxResults) {
       // do your query
       parent.setChildren(query.list());
    }

    // Solution 2 - Or just have your dao directly return the children and remove the list from Parent
    public List<Children> getChildren(Parent parent, int firstResult, int maxResults) {
      // do your query
      return query.list();
    }
  } 
```

我知道你所说的打破你对代码的 OO 感觉是什么意思。但实际上分页是数据层的功能。采用第一个解决方案可能会恢复一些不错的“OO”感觉。

# ruby-on-rails - ruby on rails 在 json 数组中呈现部分内容

> ID：12008652
> 
> 赞同：2
> 
> 时间：2012-08-17T15:24:53.250
> 
> 标签：ruby-on-rails, ajax, json, partial

我正在尝试为 ajax 请求渲染部分内容，但我找不到使用 Ruby on Rails 的方法...

这是我的数组变量

```
@return = { :error => false, :response => "Added", :partial => ... }

render :json => ActiveSupport::JSON.encode( @return ) 
```

`...`部分（html）应该在哪里......

方法名称是 add_item，它的控制器是 items，我在 items 文件夹中创建了一个 add_item.html.erb 文件，其中包含我想要传递给数组的 HTML，并使用 jQuery 将其添加到 DOM

我想这可以使用

```
render :partial => "partial", :object => @object 
```

但是我怎样才能将它添加到上面的数组中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:52:17.080

解决方案：

```
@return = { :error => false, :response => "Added", :partial => render_to_string(:partial => "partial/path", :object => @object) } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:35:38.590

我做我认为你正在尝试做的事情的方式是在 触发 ajax 消息`add_item`，然后在`add_item`有：

```
def add_item
  respond_to do |format|
    format.js
  end
end 
```

并`add_item.js.erb`使用 jQuery 内容制作一个：

```
$('#div-for-code').html('<%= escape_javascript(render :partial => "mypartial") %>'); 
```

不确定这是最好的方法，但它对我有用。

# php - 如果发布日期超过 30 天，则...

> ID：12008653
> 
> 赞同：-2
> 
> 时间：2012-08-17T15:24:56.770
> 
> 标签：php, date

我想在我的网站上发布新闻，但我希望它们在发布日期（比如说 $date）超过 30 天时消失。

$date 将显示为数字，zo 5384054354

任何人都可以帮忙吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T07:06:49.947

如果您不希望它们出现在查询结果中，请使用以下内容：

```
select 
    col1, 
    col2 
from 
    yourTable 
where 
    dateColumn>date_sub(now(), interval 30 day)
    and ... // Any other criteria you use. 
```

如果您想从数据库中完全删除记录，您可以偶尔使用类似的查询来删除记录（尽管这可能会让您稍后后悔）

# javascript - 列表分页

> ID：12008655
> 
> 赞同：-2
> 
> 时间：2012-08-17T15:25:00.327
> 
> 标签：javascript, jquery, html, css

我想知道是否有人知道是否有任何用于在无序列表和有序列表上进行分页的出色插件，我想要一个简单但高度可定制的插件。如果有人有任何很棒的建议，我在下面找到了这个链接，有人以前用过吗？

[http://www.jquery4u.com/plugins/10-jquery-pagination-plugins/](http://www.jquery4u.com/plugins/10-jquery-pagination-plugins/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:27:11.020

任你选！

[http://www.jquery4u.com/plugins/10-jquery-pagination-plugins/](http://www.jquery4u.com/plugins/10-jquery-pagination-plugins/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:58:01.590

尝试这个

```
Int Icount = ds1.Tables[0].Rows.Count(Total no of records, this should be come from Database tables);
        int startindexx = SIndex(here SIndex like a no of pages like 1,2,3,etc, it from your clicking pagination buttons);
        int EndIndex = SIndex;
        if (EndIndex == 1) { EndIndex = 0; }
        if (startindexx > 1) {
            startindexx = startindexx - 1;
            startindexx = startindexx * 10;
            startindexx = startindexx + 1;
            EndIndex = EndIndex * 10;
        }
        else {
            EndIndex = EndIndex + 10;
        }
        var Pages = 0; Pages = Icount / 10; var PagesReminder = Icount % 10;
        Icount = ds1.Tables[0].Rows.Count;
        int startindexx = Convert.ToInt32(SIndex);
        int EndIndex = Convert.ToInt32(SIndex);
        if (EndIndex == 1) {
            EndIndex = 0;
        }
        if (startindexx > 1) {
           startindexx = startindexx - 1;
           startindexx = startindexx * 10;
           startindexx = startindexx + 1;
           EndIndex = EndIndex * 10;
        }
        else {
           EndIndex = EndIndex + 10;
        }
        var Pages = 0; Pages = Icount / 10;
        var PagesReminder = Icount % 10;
        if (PagesReminder != 0) {
           Pages = Pages + 1; 
        } 
```

# indexing - 父元素中匹配项的索引，即使它们在其他子容器中

> ID：12008660
> 
> 赞同：0
> 
> 时间：2012-08-17T15:25:23.743
> 
> 标签：indexing, parent, children

我需要获取与 ul.showreel_thumbnails 相关的 li.play 的索引。这甚至可能吗？我似乎得到的只是 ul.row 中的 li 索引

```
<ul class="showreel_thumbnails">
    <li>
      <ul class="row">
        <li class="play_video">item</li>
        <li class="play_video">item</li>
        <li class="play_video">item</li>
      </ul>
   </li>
    <li>
       <ul class="row">
       <li class="play_video">item 4</li>
       <li class="play_video">item</li>
       </ul>
    </li>
</ul> 
```

因此，如果单击第 4 项，它应该给我 4 的索引等...

最好的，丹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:54:42.370

它可能不是有效的 HTML，但它是如何工作的（使用 JQuery）：

```
function FindMyCount()
{
    var item_count = 0;
    $("#showreel_thumbnails li").each(function() {
        ++item_count;
        if($(this).hasClass("igotclicked"))
            return false;
    });
    return item_count;
}

$("#showreel_thumbnails li").click(function() {
    $(this).addClass("igotclicked");
    var myCount = FindMyCount(); // 1 - the # of li's under the showreel piece
    $(this).removeClass("igotclicked");
    // Do what you want here.
}); 
```

# swing - 摆动未捕获异常处理程序

> ID：12008662
> 
> 赞同：2
> 
> 时间：2012-08-17T15:25:25.463
> 
> 标签：swing, exception, jython

我正在尝试为摆动应用程序构建一个通用异常处理程序，如下所述：[http ://www.javaspecialists.eu/archive/Issue081.html](http://www.javaspecialists.eu/archive/Issue081.html)

我在 jython 工作（python 语法被编译成 java 并执行）。我的代码大致如下（**更新**）：

```
def launcher(func):
    class launcherThread(Runnable):
        def __init__(self):
            super(launcherThread, self).__init__()

        def run(self):
            func()

    #trying to get the name which can be used to instantiate this in java
    cls = ExceptionGroup().getClass()
    fullName = cls.__module__ + '.' + cls.__name__

    System.setProperty("sun.awt.exception.handler", fullName)
    Thread(ExceptionGroup(), launcherThread(), 'Cross ExceptionHandlerThread').start()

class ExceptionGroup(ThreadGroup):
    def __init__(self):
         super(ExceptionGroup, self).__init__("HardenedGroup")

    def uncaughtException(self, thread, exception):
        #make a fancy dialog displaying str(exception) 
```

如果我对其进行测试，它可以正常工作，但是在生产环境中它会失败。为了测试，我在 Eclipse (PyDev) 中启动我的程序，生产环境是一个用 Java 编写的第三方应用程序，它内置了一个 Jython 控制台。该应用程序支持添加自定义菜单条目，并将 jython 脚本放在这些条目上。

我看到的测试环境和生产环境之间的主要区别在于，在生产环境中，swing 线程已经启动（第三方应用程序使用了 swing）。这会导致我的`ThreadGroup`设置失败，还是有其他原因导致它不起作用？

如何让参与的线程（由于 buttonActions 引发异常）来检查它们的 defaultException 处理程序？如果（我担心）应该证明第三方安装了自己的处理程序（所有异常都写入日志文件），我该如何创建一个新的 Swing 工作线程？（毕竟我不想捕获宿主应用程序创建的异常）

问题回顾： 1\. 如何检查为`func`传递给 `launcher`函数的函数启动了哪些线程并查看其未捕获的异常处理程序？2\. 我可以为我的 gui 部分和主要应用程序 gui 部分强制执行单独的 swing 调度程序吗？（如果我在插件的框架上退出OnClos，第三方应用程序将关闭）？

**更新**：考虑到`lbalazscs`我正在尝试使用该`sun.awt.exception.handler`属性的 anwser，但它没有效果，异常仍然会出现在日志文件中（应用程序 dfeault 行为）。我用对了吗？（ps：我在 Java 1.6 上）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T23:25:39.547

如果您有 Java 5 或更高版本，您还可以使用 Thread.setDefaultUncaughtExceptionHandler()，这也在较新的“Java 专家时事通讯”中有所描述：

[http://www.javaspecialists.eu/archive/Issue089.html](http://www.javaspecialists.eu/archive/Issue089.html)

这是最新的 Java 7 版本：

[http://www.javaspecialists.eu/archive/Issue196.html](http://www.javaspecialists.eu/archive/Issue196.html)

另请参阅： [为什么要设置“sun.awt.exception.handler”属性？](https://stackoverflow.com/questions/5794472/why-bother-with-setting-the-sun-awt-exception-handler-property)

编辑：这就是我使用 Thread.setDefaultUncaughtExceptionHandler 的方式（在 Java 中......）：

```
public static void setupGlobalExceptionHandling() {
    Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {
        @Override
        public void uncaughtException(Thread t, Throwable e) {
            handleException(e);
        }
    });
} 
```

# callback - Devexpress Aspxgridview 回调

> ID：12008669
> 
> 赞同：1
> 
> 时间：2012-08-17T15:25:59.343
> 
> 标签：callback, devexpress, aspxgridview

大家好，我有一个问题。

我从 aspxgridview 进行回调。当我制作 RowDblClick 时，我会进行回调，然后切换到 pageControl 的另一个选项卡并用数据库信息填充一些控件。其中一个控件是另一个gridview。所以我想做的是当我在新的gridview 中进行rowdblclick 时，进行另一个回调。

我不知道为什么，但是当我双击新的 aspxgridview 时，我的应用程序堆栈。所以我没有回复回调。我停止了第一个网格的第一个回调，第二个回调工作正常。

所以我的问题是，如何通过 rowdblclick 在 aspxgridview 中进行回调，然后在另一个 aspxgridview 中使用另一个 rowdblclick 进行另一个回调？

这是第一个 aspxgridview

```
<dx:ASPxGridView ID="grillaInformes" runat="server" KeyFieldName="ID" width="100%"        EnableCallBacks="false" ClientInstanceName="grillaInformes" OnCustomCallback="grillaInformes_CustomCallback">
                    <ClientSideEvents RowDblClick="function(s, e) { s.PerformCallback(e.visibleIndex); }"/> 
```

这是第二个aspxgridview，它的回调不起作用，因为我在grillaInformes之前做了另一个回调

```
<dx:ASPxGridView ID="grillaSubInformes" runat="server" KeyFieldName="ID"  Width="100%" EnableCallBacks="false" ClientInstanceName="grillaSubInformes" OnCustomCallback="grillaSubInformes_CustomCallback"  >
                       <ClientSideEvents RowDblClick="function(s, e) { s.PerformCallback(e.visibleIndex); }"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T19:10:23.550

您是否尝试过为 CallBacks 调用已定义的 JavaScript 函数并单步执行那里的代码？例如：

```
function grillaInformes_RowDblClick(s, e) {
    s.PerformCallback(e.visibleIndex);
}

function grillaSubInformes_RowDblClick(s, e) {
    s.PerformCallback(e.visibleIndex);
} 
```

并为您的网格使用以下内容：

```
<dx:ASPxGridView ID="grillaInformes" runat="server" KeyFieldName="ID" width="100%" EnableCallBacks="false" ClientInstanceName="grillaInformes" OnCustomCallback="grillaInformes_CustomCallback">
                    <ClientSideEvents RowDblClick="grillaInformes_RowDblClick"/>

<dx:ASPxGridView ID="grillaSubInformes" runat="server" KeyFieldName="ID"  Width="100%" EnableCallBacks="false" ClientInstanceName="grillaSubInformes" OnCustomCallback="grillaSubInformes_CustomCallback"  >
                       <ClientSideEvents RowDblClick="grillaSubInformes_RowDblClick"/> 
```

您应该立即看到第二次双击是否开始，然后单步执行后面的代码。我们经常做这样的事情，并且一次运行多个回调没有问题。

# php - 无法使用 curl 登录 Google

> ID：12008673
> 
> 赞同：1
> 
> 时间：2012-08-17T15:26:12.570
> 
> 标签：php, cookies, curl

我想通过 php 登录 google.com，`curl`但我一次又一次地获得登录页面。

这是我的代码

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.2) AppleWebKit/537.1    (KHTML, like Gecko) Chrome/21.0.1180.79 Safari/537.1 AlexaToolbar/alxg-3.1");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_COOKIEJAR, COOKIEJAR);
curl_setopt($ch, CURLOPT_COOKIEFILE, COOKIEJAR);
curl_setopt($ch, CURLOPT_HEADER, 0);  
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 120);
curl_setopt($ch, CURLOPT_TIMEOUT, 120);
curl_setopt($ch, CURLOPT_URL, 'https://accounts.google.com/ServiceLoginAuth');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_string);
$result = curl_exec($ch);
var_dump($result); 
```

它也没有创建cookie文件

我发现这个链接[Login to Google with PHP and Curl, Cookie 已关闭？](https://stackoverflow.com/questions/8991873/login-to-google-with-php-and-curl-cookie-turned-off). 也有与我相同的代码，但我也无法登录。

这段代码有什么问题？

# php - 使用 PHP 发布缓存推文

> ID：12008675
> 
> 赞同：0
> 
> 时间：2012-08-17T15:26:29.973
> 
> 标签：php, json, caching, twitter

我一直在使用各种不同的 twitter 提要来抓取推文，但现在我遇到了限速和缓存推文的问题。这是我的代码：

```
function tweets($twitter_handle, $tweet_limit, $tweet_links, $tweet_tags, $tweet_avatar,   $tweet_profile) {

    /* Store Tweets in a JSON object */
    $tweet_feed =   json_decode(file_get_contents('http://api.twitter.com/1/statuses/user_timeline.json?screen_name='.
                    $twitter_handle.'&include_entities=true&include_rts=true&count='.$hard_max.'')); 
```

在我达到速率限制之前，这很有效。这是我添加到缓存推文的内容：

```
function tweets($twitter_handle, $tweet_limit, $tweet_links, $tweet_tags, $tweet_avatar, $tweet_profile) {

$url = 'http://api.twitter.com/1/statuses/user_timeline.json?screen_name='.$twitter_handle.'&include_entities=true&include_rts=true&count='.$hard_max.'';
$cache = dirname(__FILE__) . '/cache/twitter';

if(filemtime($cache) < (time() - 60))
{
    mkdir(dirname(__FILE__) . '/cache', 0777);
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);
    curl_setopt($ch, CURLOPT_TIMEOUT, 5);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_REFERER, $_SERVER['REQUEST_URI']);
    $data = curl_exec($ch);
    curl_close($ch);
    $cachefile = fopen($cache, 'wb');
    fwrite($cachefile, $data);
    fclose($cachefile);
}
else
{
    $data = file_get_contents($cache);
}

$tweet_feed = json_decode($data); 
```

然而，这只会返回用户名和时间戳（这是错误的），而它应该返回推特头像、推文内容、正确的时间戳等。此外，它每隔几次刷新也会返回一个错误：

> 警告：mkdir() [function.mkdir]：文件存在于第 110 行的 /home/content/36/8614836/html/wp-content/themes/NCmainSite/functions.php

任何帮助，将不胜感激。
如果您需要更多信息，这里是函数的其余部分：http: [//snippi.com/s/9f066q0](http://snippi.com/s/9f066q0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:49:41.467

在这里尝试这个我解决了你的问题，加上你有一个流氓帖子选择卷曲。

```
<?php 
function tweets($twitter_handle, $tweet_limit, $tweet_links, $tweet_tags, $tweet_avatar, $tweet_profile) {

    $http_query = array('screen_name'=>$twitter_handle,
                        'include_entities'=>'true',
                        'include_rts'=>'true',
                        'count'=>(isset($hard_max))?$hard_max:'5');

    $url = 'http://api.twitter.com/1/statuses/user_timeline.json?'.http_build_query($http_query);

    $cache_folder = dirname(__FILE__) . '/cache';
    $cache_file = $cache_folder . '/twitter.json';

    //Check folder exists
    if(!file_exists($cache_folder)){mkdir($cache_folder, 0777);}

    //Do if cache files not found or older then 60 seconds (tho 60 is not enough)
    if(!file_exists($cache_file) || filemtime($cache_file) < (time() - 60)){
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);
        curl_setopt($ch, CURLOPT_TIMEOUT, 5);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
        curl_setopt($ch, CURLOPT_REFERER, $_SERVER['REQUEST_URI']);
        $data = curl_exec($ch);
        curl_close($ch);
        file_put_contents($cache_file,$data);
    }else{
        $data = file_get_contents($cache_file);
    }

    return json_decode($data);
}

$twitter = tweets('RemotiaSoftware', 'tweet_limit','tweet_links', 'tweet_tags', 'tweet_avatar', 'tweet_profile');
print_r($twitter);
?> 
```

# delphi - 如何设置 Excel 列类型和格式？

> ID：12008676
> 
> 赞同：6
> 
> 时间：2012-08-17T15:26:30.520
> 
> 标签：delphi, excel, delphi-xe2, quantumgrid

我正在将数据从 CxDBGrid 导出到 Excel 文件。我能够创建文件并在其中复制数据，但我在列格式方面遇到了真正的问题。由于我从数据库中提取数据，因此我希望电子表格能够反映以下类型：NUMBER、VARCHAR2、DATE 等等。我直观地创建了一个宏，去寻找 VBA 代码，并在 Delphi 项目中复制它：

```
sheet.Columns[K+2].NumberFormat := '0,000'; //Number
sheet.Columns[K+2].NumberFormat := '@'; //Text
sheet.Columns[K+2].NumberFormat := 'm/d/yyyy'; //Date 
```

数字格式在大多数情况下都可以正常工作，但其他两个则不行。当我打开生成的文件时，文本列显示为“自定义”类型，每个单元格显示“-64”。如果我去编辑一个单元格，正确的值实际上就在那里。日期是另一个问题：数据库的格式是 dd/mm/yyyy，如果我按原样将它提供给 Excel，它就会一团糟。我尝试设置正确的格式，但 Excel 无法识别它。

有什么线索吗？

我也在设置列宽。这完美无瑕。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-04T09:49:07.577

问题是分配的值是 Unicode 字符串。尝试这个：

```
sheet.Columns[K+2].NumberFormat := AnsiChar('@');
sheet.Columns[K+2].NumberFormat := AnsiString('m/d/yyyy'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T17:36:26.403

你没有说“你是如何手动做事的”，这意味着人们必须完全猜测你在做什么。所以这是我的疯狂猜测：

1.  如果我假设您使用的是 Developer Express 中的 Express Spreadsheet 组件，我对这个组件有丰富的经验。它不支持任意数字格式。它支持精确到小数点后两位的“货币”格式 (0.00)。它不支持三位或一位，或任何其他小数位数。如果是这样，这是 Express 电子表格中的一个已知设计问题。

2.  如果手动表示上面显示的“工作表”是一个 OLE 对象，并且您通过 OLE 自动化与 Excel 本身进行通信，那么您应该将 CELLS 格式化为单独或作为范围，而不是列对象。我不确定列对象格式将如何覆盖单元格值，如果他们这样做的话。单元格的格式化通常是一个单元一个单元的问题，并且必须这样处理。

3.  如果您真的希望它正常工作，您将不会通过 OLE 自动化使用 Excel，您将获得一个正确的 Excel XLS 格式的书写库。我很确定您可以直接从 CX（DevEx）数据库网格中获得正确的结果，但我会在他们的论坛上询问，而不是在这里。对于常规的 DB Grid，我只使用`TJvDBGridExcelExport`Jedi JVCL 中的哪个，并且可以与常规的 VCL DB Grid 一起使用。

# tableviewcell - 使用 didSelectRowAtIndexPath: 方法，第一次没有将单元格值传递给另一个控制器，尝试了两次或更多

> ID：12008681
> 
> 赞同：2
> 
> 时间：2012-08-17T15:26:47.400
> 
> 标签：tableviewcell

调用 didSelectRowAtIndexPath: 方法将单元格值传递给另一个单元格，当第一次单击 tableViewCell 单元格的任何一行时，数据不能传递到另一个控制器视图，第二个或之后可以成功传递值。

*   -(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath { self.updateNoification.nEntity = (NotificationEntity* ) [self.array objectAtIndex:indexPath.row];

[self.updateNoification.nEntity getId]);

self.updateNoification.title = @“修改”；

[self.updateNoification updateForReadViewValue];

[self.navigationController pushViewController:self.updateNoification 动画：YES]; }

# c - 由于 C 中的 malloc 错误导致程序崩溃

> ID：12008685
> 
> 赞同：1
> 
> 时间：2012-08-17T15:27:03.413
> 
> 标签：c, windows, malloc

我的程序在此行的第二次运行时崩溃：

```
 char* temp_directive = (char *)malloc(7); 
```

出现此错误：

```
Critical error detected c0000374
Windows has triggered a breakpoint in Maman14.exe.

This may be due to a corruption of the heap, which indicates a bug in Maman14.exe or       any of the DLLs it has loaded.

This may also be due to the user pressing F12 while Maman14.exe has focus. 
```

我不明白为什么，它总是发生在第二次运行。我尝试添加免费（temp_directive），但没有帮助

有这个问题的人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:32:19.683

[http://blogs.msdn.com/b/jiangyue/archive/2010/03/16/windows-heap-overrun-monitoring.aspx](http://blogs.msdn.com/b/jiangyue/archive/2010/03/16/windows-heap-overrun-monitoring.aspx)

听起来您在代码的较早部分跑出了数组的末尾，并且您的内存管理在您尝试分配该内存空间之前不会拾取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T16:17:04.123

发现问题，它是由不同的 realloc 引起的。谢谢大家！

# asp.net-web-api - webapi 批处理和委托处理程序

> ID：12008686
> 
> 赞同：9
> 
> 时间：2012-08-17T15:27:07.997
> 
> 标签：asp.net-web-api, batch-processing

根据我的[上](https://stackoverflow.com/questions/11998556/webapi-batch-requests/11998600#11998600)一篇文章，我能够进行批处理......直到某一点。除了注册路由特定的处理程序，我还有 2 个委托处理程序

1.  验证用户
2.  日志记录

批处理处理程序通过委托处理程序对用户进行身份验证并记录请求。当 messagehandlerinvoker 开始发送子/嵌套请求时，将引发以下异常。

```
System.ArgumentException was unhandled by user code
  HResult=-2147024809
  Message=The 'DelegatingHandler' list is invalid because the property 'InnerHandler' of 'AuthenticationMessageHandler' is not null.
Parameter name: handlers
  Source=System.Net.Http.Formatting
  ParamName=handlers
  StackTrace:
       at System.Net.Http.HttpClientFactory.CreatePipeline(HttpMessageHandler innerHandler, IEnumerable`1 handlers)
       at System.Web.Http.HttpServer.Initialize()
       at System.Web.Http.HttpServer.<EnsureInitialized>b__3()
       at System.Threading.LazyInitializer.EnsureInitializedCore[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
       at System.Threading.LazyInitializer.EnsureInitialized[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
       at System.Web.Http.HttpServer.EnsureInitialized()
       at System.Web.Http.HttpServer.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
       at System.Net.Http.HttpMessageInvoker.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
       at RoutingRequest.Service.Startup.BatchMessageHandler.<>c__DisplayClassd.<PrcoessRequest>b__b(Task`1 m) in C:\CEI\Clients\Footlocker.com\FL - Vendor Routing Portal\source\RoutingRequest.Service\Startup\BatchMessageHandler.cs:line 45
       at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
       at System.Threading.Tasks.Task.Execute()
  InnerException: 
```

是否有我缺少的配置选项，或者我需要绕过委托处理程序？

**编辑** 这里是我的身份验证处理程序。

```
public class AuthenticationMessageHandler
    : DelegatingHandler
{
    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        SetCurrentUser(request);
        return base.SendAsync(request, cancellationToken);
    }

    private void SetCurrentUser(HttpRequestMessage request)
    {
        var values = new List<string>().AsEnumerable();
        if (request.Headers.TryGetValues("routingrequest-username", out values) == false) return;

        var username = values.First();

        var user = Membership.GetUser(username, true);
        if (user == null)
        {
            var message = string.Format("membership information for '{0}' could not be found.", username);
            throw new HttpRequestException(message);
        }

        var roles = Roles.GetRolesForUser(username);

        Thread.CurrentPrincipal = new GenericPrincipal(new GenericIdentity(user.UserName), roles);
    }
} 
```

基于 Kiran 的回答，一个子类 httpserver 修复了一个问题并引入了另一个问题。我的角色提供者得到一个空引用异常。现在正在调查。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-07-16T04:27:16.990

该博客文章正确识别了问题，但如果您使用`Startup`or`OwinStartup`类配置 OWIN，则有一个更简单的解决方案：

将 OWIN 配置调用从 更改为 `UseWebApi(this IAppBuilder builder, HttpConfiguration configuration);` ， `UseWebApi(this IAppBuilder builder, HttpServer httpServer);` 以便您的批处理处理程序和 OWIN 管道使用相同的`HttpServer`实例。

其根本原因是许多批处理文章/示例（例如[http://bradwilson.typepad.com/blog/2012/06/batching-handler-for-web-api.html](http://bradwilson.typepad.com/blog/2012/06/batching-handler-for-web-api.html)）创建了一个新`HttpServer`的批处理除了`HttpServer`处理 HTTP 请求的主要部分；并且两个`HttpServer`s 都使用相同的`HttpConfiguration`.

当每个`HttpServer`都在第一次接收请求时被初始化时，它`HttpClientFactory.CreatePipeline`通过反转所有已配置的委托处理程序（例如跟踪处理程序或其他代理类型处理程序）创建处理程序管道（in ），并使用 Web API 调度程序终止管道。

如果您没有配置任何委托处理程序，那么这个问题不会对您造成影响 - 您可以拥有 2 个`HttpServer`使用相同`HttpConfiguration`.

但是，如果您有任何显式或隐式配置的委托处理程序（例如，通过[启用 Web API Tracing](http://www.asp.net/web-api/overview/testing-and-debugging/tracing-in-aspnet-web-api)），则 Web API 无法构建第二个管道 - 委托处理程序已经链接到第一个管道中 - 并且在第一个管道上引发此异常请求第 2 次`HttpServer`。

这个例外绝对应该更清楚地知道发生了什么。更好的是，这个问题甚至不应该是可能的——配置应该是配置，而不是单独的处理程序。配置可以是委托处理程序的工厂。但我离题了...

虽然这个问题有点难以解决，但有一个非常简单的解决方法：

1.  如果您使用的是 OWIN，请将`HttpServer`您在批处理处理程序中使用的相同内容通过`UseWebApi(this IAppBuilder builder, HttpServer httpServer);`
2.  如果您使用的是 IIS + Web API（没有 OWIN 启动类），请传递`GlobalConfiguration.DefaultServer`给您的批处理处理程序，以避免创建新的`HttpServer`

这是一个示例 OWIN 启动类，它创建一个单一的`HttpServer`并将其传递给批处理处理程序和 Web API。此示例用于 OData 批处理处理程序：

```
[assembly: OwinStartup(typeof(My.Web.OwinStartup))]
namespace My.Web
{

    /// <summary>
    /// OWIN webapp configuration.
    /// </summary>
    public sealed class OwinStartup
    {

        /// <summary>
        /// Configure all the OWIN modules that participate in each request.
        /// </summary>
        /// <param name="app">The OWIN appBuilder</param>
        public void Configuration(IAppBuilder app)
        {
            HttpConfiguration webApiConfig = new HttpConfiguration();
            webApiConfig.MapHttpAttributeRoutes();

            HttpServer webApiServer = new HttpServer(webApiConfig);

            // Configure batch handler
            var batchHandler = new DefaultODataBatchHandler(webApiServer);
            webApiConfig.Routes.MapODataServiceRoute("ODataRoute",
                                                     "odata",
                                                     BuildEdmModel(),
                                                     new DefaultODataPathHandler(),
                                                     ODataRoutingConventions.CreateDefault(),
                                                     batchHandler);

            app.UseWebApi(webApiServer);
        }

        private EdmModel BuildEdmModel()
        {
            // ...
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-27T18:18:28.210

我在没有批处理的情况下遇到了这个错误。我自己做了一个`HttpClientFactory`，它包含一个`HandlerFactory`，也是我自己的。

它调用`HandlerFactory.Create()`构造函数中的方法并存储它生成的处理程序。

每当`System.Net.Http.HttpClientFactory.Create(...)`工厂需要制作新的`HttpClient`.

但它只适用于单个调用，因为处理程序本身会被 .NET 代码改变，使它们处于无法重用的状态。

我改变了我的构造函数，使它不会预先创建处理程序，而是每次都创建。现在可以了。

# ruby-on-rails - 使用 roo /rails 读取 Excel 文件

> ID：12008692
> 
> 赞同：3
> 
> 时间：2012-08-17T15:27:26.733
> 
> 标签：ruby-on-rails, upload, import-from-excel

我正在使用名为[roo](http://roo.rubyforge.org/)的 rails gem来读取和解析上传的 Excel 和 CSV 文件。

我知道在 roo 中，它读取 Excel 文件的方式是`Excel.new("myfilename")`. 我遇到了问题，因为我必须阅读使用表单助手（上传助手）上传的文件、临时文件。在使用 roo/Excel 读取临时文件之前，我正在保存它。虽然我正在上传好的 excel 文件，但我得到了

> 该文件不是 Excel/xlsx

错误。

有没有办法直接从上传的 IO 中读取？你们能告诉我我在这里做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:03:37.270

I am not familiar with roo, but I have used [http://rubygems.org/gems/parseexcel](http://rubygems.org/gems/parseexcel)

```
workbook = Spreadsheet::ParseExcel.parse("#{Dir.getwd}/public/excel/foo.xls") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T16:18:08.430

如果您在 Windows 机器上进行开发，当您打开文件时，您必须在文件模式中添加一个 'b'（二进制），即：

```
File.open("spreadsheet.xls","rb") 
```

只读，二进制。

不确定这是否是您的问题，但我遇到了类似的问题，这就是解决方案。

祝你好运

# titanium - 如何更改form.js钛显示时间

> ID：12008695
> 
> 赞同：0
> 
> 时间：2012-08-17T15:27:43.810
> 
> 标签：titanium, titanium-mobile

如何从钛 appcelerator [https://github.com/appcelerator-developer-relations/Forging-Titanium/tree/master/ep-010/Forms更改 form.js 代码](https://github.com/appcelerator-developer-relations/Forging-Titanium/tree/master/ep-010/Forms)

接受时间？

我想在我的表单中添加一个“时间”字段（人们选择小时、分钟、上午/下午）。如何通过更改钛移动 form.js 代码来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:36:01.677

对于时间选择器来说，它很简单

```
var picker = Ti.UI.createPicker({
    type:Ti.UI.PICKER_TYPE_TIME
}); 
```

# jquery - 如何从回调函数中获取选择器

> ID：12008696
> 
> 赞同：0
> 
> 时间：2012-08-17T15:27:47.627
> 
> 标签：jquery, callback

从回调函数我怎样才能将选择器传递给主函数

```
$('.file_upload').uploadify({

        'uploader'  : 'uploadify/uploadify.swf',
        'script'    : 'uploadify/uploadify.php',
        'cancelImg' : 'uploadify/cancel.png',
        'folder'    : 'uploads',
        'auto'      : true,
        'buttonText': 'Upload a new file',
        'onComplete'  : function(event, ID, fileObj, response, data ) {
            //alert(fileObj.filePath);

            //get the uploaded file txt and add it to the textbox

            console.log(fileObj.filePath);
            $.get('readfile.php?file='+fileObj.filePath, function (data) {

            });

        // here I want to access the element the function called on 
        //$(this).parent().parent().find('textarea').val('this');

        }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:29:47.790

您可以在上传之前将其保存为变量：

```
var _file_upload = $('.file_upload');

//Then you can just do:
_file_upload.jQueryStuffHere(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T02:15:30.520

*发表评论作为答案...*

原始元素位于`event.target`：

```
$('.file_upload').uploadify({
    'onComplete'  : function(event, ID, fileObj, response, data ) {
        // Wrap event.target in jQuery: $(event.target)
        $(event.target).parent().parent().find('textarea').val('this');
    }
}); 
```

# html - 使用 jstl 在现有选择标签上设置选定选项

> ID：12008698
> 
> 赞同：9
> 
> 时间：2012-08-17T15:27:54.723
> 
> 标签：html, jsp, jstl

所以我对每个科目的成绩都有一个选择。它是预定义的，因此我不必将成绩作为表存储在数据库中。我有一个资格列表，我对每个资格都使用 jstl，如下所示`<c:forEach items="${qualificationdetails}" var="qd">`：

对于每个项目，我都在制作这样的选择。

```
<select class="grade" title="Grade Obtained">
   <option value="1">1</option>
   <option value="2">2</option>
   <option value="3">3</option>
   <option value="A">A</option>
   <option value="B">B</option>
   <option value="C">C</option>
   <option value="D">D</option>
   <option value="E">E</option>
</select> 
```

是否可以使用我的变量**qd**设置所选选项？就像是

```
<option value="${qd.grade}" selected="selecetd">${qd.grade}</option> 
```

这将为选择添加一个重复的选项。我认为用成绩制作一个数组并将其发送到生成选项会有点“笨拙”。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-21T11:25:18.053

您可以让 JSP`selected`有条件地呈现属性。

```
<select class="grade" title="Grade Obtained">
    <option value="1" ${qd.grade == '1' ? 'selected' : ''}>1</option>
    <option value="2" ${qd.grade == '2' ? 'selected' : ''}>2</option>
    <option value="3" ${qd.grade == '3' ? 'selected' : ''}>3</option>
    <option value="A" ${qd.grade == 'A' ? 'selected' : ''}>A</option>
    <option value="B" ${qd.grade == 'B' ? 'selected' : ''}>B</option>
    <option value="C" ${qd.grade == 'C' ? 'selected' : ''}>C</option>
    <option value="D" ${qd.grade == 'D' ? 'selected' : ''}>D</option>
    <option value="E" ${qd.grade == 'E' ? 'selected' : ''}>E</option>
</select> 
```

或者，您可以只创建一个成绩集合/数组并将其存储在应用程序范围中，以便它在 EL 中可用，以便您可以使用`<c:forEach>`. 我不确定那会是“笨拙”的。您可以使用`<c:set>`commaseparated 存储它们，并使用`fn:split()`将它们拆分为`<c:forEach>`.

```
<c:set var="grades" value="1,2,3,A,B,C,D,E" scope="application" />
<select class="grade" title="Grade Obtained">
    <c:forEach items="${fn:split(grades, ',')}" var="grade">
        <option value="${grade}" ${qd.grade == grade ? 'selected' : ''}>${grade}</option>
    </c:forEach>
</select> 
```

这样你最终会得到更多的[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)代码。

# iphone - 何时调用 searchDisplayController 委托方法？

> ID：12008701
> 
> 赞同：2
> 
> 时间：2012-08-17T15:28:06.077
> 
> 标签：iphone, uisearchdisplaycontroller

我像这样设置了我的 searchDisplayController 和 searchBar：

```
UISearchBar *aSearchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, 150, 44)];
self.reportSearchBar = aSearchBar;
_reportSearchBar.tintColor = DARKGRAY_COLOR;
_reportSearchBar.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin;
_reportSearchBar.delegate = self;
[aSearchBar release];

UISearchDisplayController *searchDisplayCtlr = [[UISearchDisplayController alloc] initWithSearchBar:self.reportSearchBar contentsController:self];
self.reportSearchDisplayController = searchDisplayCtlr;
self.reportSearchDisplayController.searchResultsDataSource = self;
self.reportSearchDisplayController.searchResultsDelegate = self;
[searchDisplayCtlr release];

UIBarButtonItem *searchBBI = [[UIBarButtonItem alloc] initWithCustomView:_reportSearchBar];
self.reportSearchBBI = searchBBI;
[searchBBI release];

[self.navigationItem setRightBarButtonItem:_reportSearchBBI animated:NO]; 
```

我检查了我的 ViewController 是否符合该类以防万一：

```
if ([self conformsToProtocol:@protocol(UISearchDisplayDelegate)]) {
    NSLog(@"conform to search display");
} 
```

我的 ViewController .h 文件有：

```
<UITableViewDelegate, UITableViewDataSource, UISearchBarDelegate, UISearchDisplayDelegate> 
```

但是，我在

```
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString {
    [self filterContentForSearchText:searchString];

    return YES;
} 
```

它永远不会到达那里。我实现了一个 UISearBarDelegate 方法，它确实得到了那个方法。当我运行 Apple 的示例代码 TableSearch 时，上面复制的 searchDisplayController 委托方法会运行。所以对我来说，我尝试在搜索栏中输入文本，但我的应用程序崩溃了，因为过滤后的列表中没有任何对象，因为 searchDisplayController 委托从未被调用。

想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:35:42.710

我只是在苹果参考中看到：

```
searchController = [[UISearchDisplayController alloc]
                     initWithSearchBar:searchBar contentsController:self];
searchController.delegate = self;
searchController.searchResultsDataSource = self;
searchController.searchResultsDelegate = self; 
```

我在您的代码中没有看到 searchController.delegate = self，这不是必需的吗？

[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISearchDisplayController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISearchDisplayController_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-09T14:54:10.913

确保在头文件中为 UISearchDisplayController 创建一个 iVar。

如果您使用以下方法创建 UISearchDisplayController：

`UISearchDisplayController* searchDisplayController = [[UISearchDisplayController alloc] initWithSearchBar:searchField contentsController:self];`

它将由 ARC 释放，它不会调用任何委托方法，并且当您调用`self.searchDisplayController`（UIViewController 的属性）时，它将是`nil`.

因此，解决方法是：在您的标头 (.h) 文件中：

```
@interface MenuViewController : UIViewController <UITableViewDataSource, UITableViewDelegate, UISearchBarDelegate, UISearchDisplayDelegate> {
        UISearchDisplayController* searchDisplayController;
        UISearchBar *searchField;
        UITableView* tableView;
        NSArray* searchResults;
} 
```

并在实现（.m）文件中：

```
searchField = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 49)];
searchField.delegate = self;

searchDisplayController = [[UISearchDisplayController alloc] initWithSearchBar:searchField contentsController:self];
searchDisplayController.delegate = self;
searchDisplayController.searchResultsDataSource = self;
searchDisplayController.searchResultsDelegate = self;

tableView.tableHeaderView = searchField;
tableView.contentOffset = CGPointMake(0, searchField.frame.size.height); 
```

当这样实现时，您可以在其余代码中调用`self.searchDisplayController`两者。`searchDisplayController`

# java - 空 Java 字符串的大小

> ID：12008706
> 
> 赞同：8
> 
> 时间：2012-08-17T15:28:55.340
> 
> 标签：java, string, size, primitive-types

我听一位同事说，如果我在 Java 类中删除了一个 String 成员，即使 String 为空，我也会支付“24 个字节”。那准确吗？Integer、Float、Double 一样吗？（与 int、float、double 不同，它们分别只有 4、4 和 8 个字节）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-17T15:31:23.487

您将为*参考*支付 4 或 8 个字节。您是否会为每个“容器”对象实例支付额外的*对象*取决于您如何获取空字符串。例如，如果您使用字面量，`""`那么*所有*实例都将引用同一个对象，因此您只需为引用本身付费。

如果您为每个实例创建一个*单独*的空字符串，那么显然这将占用更多内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-09T01:35:11.147

字符串由对象头（HotSpot 上 2 个字，J9 上 3 个字）、int 字段和 char 数组引用组成。Char 数组本身由 header、int 字段和数组的其余部分组成。一切都填充到 8 个字节。通常，字符编码为每个字符 2 个字节。一些 JVM 可以为 char 使用替代编码。在某一时刻，J9 可以用 UTF8 编码字符串。如果字符串由简单字符组成（本质上是 UTF-8 的 1 字节编码字形，如英文字母、数字等），现代 HotSpot 将使用每个字符 1 个字节。否则，它对整个数组使用每个字符 2 个字节。

因此，空字符串大小的深度大小为：

*   32 位 HotSpot 上的 32 个字节（字符串 16 个字节，char[] 16 个字节）
*   64 位 HotSpot 上 56 字节（String 为 32 字节，char[] 为 24 字节）
*   64 位 HotSpot 上 40 字节，带有压缩引用（24 字节用于字符串，16 字节用于 char[]）

通常，不会分配空字符数组，因为它的值将被推断出来。毕竟所有空字符数组都是相等的。因此，空字符串的实际惩罚将是浅字符串大小；对于当今最常见的情况（带有压缩参考的 64 位 HotSpot），这是**24 字节**。

IBM J9 JVM 有更大的对象头，它会分配[更多。](https://www.ibm.com/developerworks/library/j-codetoheap/ "看这里")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T15:45:08.687

借用[这个答案](https://stackoverflow.com/a/8445871/829571)：程序为空字符串打印 32 个字节（字符串池中的 "" 为 0）。

```
public static void main(String... args) {
    long free1 = free();
    String s = "";
    long free2 = free();
    String s2 = new String("");
    long free3 = free();
    if (free3 == free1) System.err.println("You need to use -XX:-UseTLAB");
    System.out.println("\"\" took " + (free1 - free2) + " bytes and new String(\"\") took " + (free2
            - free3) + " bytes.");
}

private static long free() {
    return Runtime.getRuntime().freeMemory();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T15:35:07.450

确实，您为 Integer 支付的费用要比为 int 多得多。我记得检查了几个 Java 版本，并且 Integer 多占用了大约 24 个字节。只要您的字符串指向一个空对象（也就是什么都没有），您只需要在内存中保留一个指针，而且我认为 JVM 不会保留一个位置来初始化它，在这种情况下您不会浪费了 24 个字节，只有 8 个。如果您创建字符串（甚至是空字符串“”），那么您已经在内存中拥有一个对象，并且由于所有对象都继承 Object，它们带有一些包袱并占用比您直观预期更多的内存. 根据您对字符串的使用，一个常见的解决方案是从一个空对象开始，并在需要时延迟初始化它。

# java - 在 Java 中使用 XML 作为语言管理器

> ID：12008709
> 
> 赞同：0
> 
> 时间：2012-08-17T15:29:02.773
> 
> 标签：java, internationalization, translation

所以，我想创建一个双语程序。据我所知，xml文件是可行的......

我真的找不到任何对谷歌有用的东西（当你在谷歌中输入 Java 时，它只会在“编程”中看到“语言”这个词，而不是想要的“口语”），所以如果你们中的任何一个可以指导我一些教程页面进一步解释了这个主题，甚至在这里向我展示（它可能很复杂，可以吗？），我将非常感激。

如果xml是要走的路，那就是！如果你们有更好的建议，我在听……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:33:23.490

XML 可能是要走的路，但***国际化***Java 应用程序的常用方法是使用[`ResourceBundles`](http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.html). 当向 Google 询问正确的关键字是：**Java i18n**或**Java Internationalization**。

有一个[基本的 java 教程](http://docs.oracle.com/javase/tutorial/i18n/index.html)可以让你开始使用 i18n。如果您正在编写 Web 应用程序，那么您应该检查特定框架的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T15:31:11.863

Java 有一个使用属性文件的内置国际化系统。

[Java 国际化 API 教程](http://docs.oracle.com/javase/tutorial/i18n/index.html)

# spring - 无法在 Hudson Maven 中为 JUnit 测试加载 ApplicationContext，但在本地没有问题

> ID：12008710
> 
> 赞同：3
> 
> 时间：2012-08-17T15:29:08.390
> 
> 标签：spring, maven, junit, hudson

我已经尝试了几乎所有我能想到的配置（并查看了 StackOverflow 上的一些答案），但是我们所有的测试在通过 Hudson 运行时都显示“加载 ApplicationContext 失败”错误。有趣的是，一些测试似乎运行并通过，而一些运行并失败（如预期的那样），但无论如何我总是得到所有测试的错误列表。这是基本配置：

```
@ContextConfiguration(locations = "classpath:/MyTest-context.xml")
@RunWith(SpringJUnit4ClassRunner.class)
public class MyTest {

    @Autowired
    private ApplicationContext applicationContext;

    public MyTest() {}

    @Test
    public void doSomething() {
        // Implementation...
    }
} 
```

**更新：**

似乎有一组重复的测试正在运行，一个用于 Emma 覆盖率报告，另一个用于正常测试。当测试运行 Emma 覆盖率时，它们会显示错误。如果我关闭“emma:emma package”目标，那么这些目标就不会运行，那么我就不会收到错误，并且测试似乎运行良好。我不确定这是否有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:33:08.220

答案最终接近了 gontard 所指的内容，这是 Emma 的类加载器工作方式隐藏的一个问题。在我的本地 JUnit 测试、我们的 DEV 环境中运行的测试以及使用 Emma 在 Hudson 中运行的测试之间，所有这些测试都有不同的类加载器命令加载库和类的方式。我最终查看了测试结果的堆栈跟踪，结果在我的本地，一个新版本的库是通过 POM 加载的，但在 Hudson，Emma 首先加载了一个旧版本的库。我必须找到并删除旧版本，现在一切正常。

# c# - 清除动态创建控件的视图状态以添加新控件

> ID：12008715
> 
> 赞同：1
> 
> 时间：2012-08-17T15:29:50.870
> 
> 标签：c#, asp.net, controls, viewstate, dynamically-generated

我目前有一个静态下拉列表，其项目从页面加载的数据库中绑定。基于此下拉列表中的选择，我在 ID 为“CustomControl1”、“CustomControl2”等的表中动态生成一组控件。我需要做的是下拉列表中的每个选择都有一个不同控件类型的唯一控件集，但它们都具有相同的 ID（基于它们生成的顺序）。因此，当我尝试生成一组新控件时，我收到此错误：

> 无法加载视图状态。正在加载视图状态的控制树必须与在先前请求期间用于保存视图状态的控制树匹配。例如，当动态添加控件时，回发期间添加的控件必须与初始请求期间添加的控件的类型和位置相匹配。

因此，在页面加载中，我有两种方法，一种基于 xml 生成控件，另一种创建验证控件，如下所示：

```
 if (xml != "" && externalProperties.Rows.Count == 0)
        {
            LoadExternalProperties(xml);
            ValidateExternalProperties(xml);
        } 
```

当我进行初始选择时，我能够正确生成控件，当我进行辅助选择时，无法生成控件，因为不同控件类型的视图状态不匹配。

所以我假设我需要做的是清除视图状态。我尝试了以下方法：

将视图状态设置为 null（在 Page_Init 和 In 之外尝试）：

```
ViewState["CustomControl1"] = null; 
```

清除表的行：

```
externalProperties.Rows.Clear(); 
```

清除控件表：

```
externalProperties.Controls.Clear(); 
```

在加载控件之前和之后切换 EnableViewState：

```
externalProperties.EnableViewState = false;
LoadExternalProperties(xml);
externalProperties.EnableViewState = true; 
```

*   我只需要在下拉列表的选定索引更改时清除视图状态。这是因为在接下来的步骤中（使用向导），我正在检索这些值并将它们用于其他目的。

我目前正在跟踪先前选择的索引，以确定何时必须清除视图状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:17:21.260

You should **EnableViewState = false** of the dropdownlist control.

# android - ViewPager 中的 setCurrentItem 不会立即滚动到正确的位置

> ID：12008716
> 
> 赞同：14
> 
> 时间：2012-08-17T15:29:57.017
> 
> 标签：android, scroll, android-viewpager

我用一个`PagerAdapter`. 我有很多元素，所以我不会同时加载所有元素。我重新加载适配器，用新元素更改旧元素。例如，我有 4 个元素，当我到达最后一个元素时，我重新加载元素并调用`setCurentItem(1)`以便能够在第一个位置显示 viewpager。我做了很多测试。我放：

```
viewPager.setCurrentItem(1,false); //But not scroll, put drastically the new page.
viewPager.setCurrentItem(1); 
```

我尝试过修改`onPageScrollStateChanged(int arg0)`，我只有 3 个视图，并且始终位于中间。

```
if (arg0 == ViewPager.SCROLL_STATE_DRAGGING) {
    if(focusedPage==2) {
        //Modify adapter
        viewPager.setCurrentItem(1,false);   

    }else if(focusedPage==0){
        //Modify adapter
        viewPager.setCurrentItem(1,false);
    } 
```

我试图修改`onPageSelected(int arg0)`

```
focusedPage=arg0; 
```

使用最后一个示例，我立即滚动视图，但它始终位于最后一页。任何人都知道我如何滑动。

谢谢

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-20T22:47:53.373

我可以更多地了解您要完成的工作的背景吗？

无论如何，据我所知，您正在尝试`ViewPager`从最后一个到第一个进行“无限”，反之亦然（如果我错了，请纠正我）。而且您希望您`ViewPager`转到第一页但滚动 - 而不仅仅是从无处出现。

好吧，如果您禁用平滑滚动（第二个参数），那么它将直接进入您想要的页面而没有滚动动作（并且不会在途中“改变”到其他页面），如果您启用平滑滚动然后它将遍历所有视图，因此您将看到它不是下一个而是第一个。

```
 /*No swipe animation, and no onPageChanged for the page in the middle*/
    mPager.setCurrentItem(1, false); 

    /*The same as if you do not add the second parameter*/
    mPager.setCurrentItem(1, true);

    /*Your ViewPager scrolls through all the needed views until it arrives at that view.*/
    mPager.setCurrentItem(1); 
```

考虑到这一点，我可以向您推荐的是，您可以尝试在位置 0 和“最后”添加“虚拟”视图，并且位置 0 的视图将与位置“最后 - 1”和“最后”相同视图将与位置“1”相同。所以你会做一切正常的事情，除了在 OnPageChangeListener 上你会检查当前页面是位置“0”还是“last”，如果是，你会调用 setCurrentItem("1", false) 或 setCurrentItem("last - 1", false) 取决于您现在所处的位置。通过这种方式，您将在完成所需内容的同时保持“页面更改”效果。

我希望这可以帮助你解决你的问题。

**注意：** 到达新位置后，它可能会有一个滞后的变化，因为它必须加载当前、下一个和最后一个视图的视图（或者如果你在 4.0+ 上，那么它只会加载实际位置）。

**更新：**

如果更改确定 内容的 List/Array 的内容，则`ViewPager`需要调用：

```
ViewPager mPager = new ViewPager();
mPager.getAdapter().notifyDataSetChanged();  //This notify that you need to recreate the views

/*This is if you want to change the data and then go to a specific position
If you do not do this you will have a very Buggy Behavior*/
new Handler().post(new Runnable() {
@Override
public void run() {
    mPager.setCurrentItem(2); //Where "2" is the position you want to go
    }
}); 
```

**更新 2：**

为什么不将所有元素添加到`ViewPager`? 已经对处理这些情况进行了`ViewPager`优化，在我的情况下，我有很多元素，它就像一个魅力。

另一件事，在您的代码中，每次页面“稳定”时，我都会看到您更改为中间页面。但是你真的从不显示右视图和左视图，那你为什么要有它们呢？

最后一件事，当您更改数据集时，您需要调用我上面提到的“notifyDataSetChanged”方法，然后在处理程序中调用“setCurrentItem”方法。否则，您的应用程序将无法按预期运行。

**更新 3：**

好吧，我唯一可以推荐的是有一个列表，您可以在其中不断添加从数据库中带来的新对象，然后只要您继续将对象插入到列表的末尾就没有问题。如果要在中间或开头添加对象，则需要调用 notifyDataSetChanged 但这会有点慢，因为它会再次生成视图。我们这样做并且效果很好，我们甚至从服务器下载信息，数据不是本地的（实际上我们将信息添加到列表的末尾和开头）。

如果您对如何实现这一目标有任何其他问题，请随时提出。

**更新 4：**

以防万一有人真的在寻找通告`ViewPager`，我添加了一个可以重复使用[的概念验证代码。](https://stackoverflow.com/questions/11622544/fix-the-animation-of-a-circular-viewpager/11691347#11691347)它可以毫无问题地工作，我已经将它用于复杂的视图，并且仍然没有任何延迟。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-15T21:24:17.677

如果没有 postDelayed，它就无法工作，请尝试使用以下代码：

```
viewPager.postDelayed(new Runnable()
{
    @Override
    public void run()
    {
        viewPager.setCurrentItem(num, true);
    }
}, 100); 
```

# javascript - 带有变量的 Javascript 复杂正则表达式

> ID：12008718
> 
> 赞同：3
> 
> 时间：2012-08-17T15:30:01.120
> 
> 标签：javascript, regex

我正在使用这个工具来构建一个正则表达式[http://www.gethifi.com/tools/regex](http://www.gethifi.com/tools/regex)

我发现下面的一个对我有用，例如，如果我想要匹配`$aazz[AB]`：

```
var regex = /[\+\=\-\*\^\\]\$aazz\[AB\]/g; 
```

我已阅读 Javascript 中 RegEx 构造函数的其他帖子，但无法完成以下工作：

```
var preToken = "[\+\=\-\*\^\\]";    
var toFind = "\$aazz\[AB\]";

var stringToReplace = "/" + preToken + toFind + "/";

var regex = new RegExp(stringToReplace, "g"); 
```

这是 jsbin [http://jsbin.com/ifeday/3/edit](http://jsbin.com/ifeday/3/edit)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T15:33:48.873

从字符串创建正则表达式时，您需要对反斜杠进行两次转义。

```
\ becomes \\
\\ becomes \\\\ 
```

因此，您可以尝试（在字符类中，并非所有内容都需要转义）：

```
var preToken = "[+=\\-*^\\\\]"; 
var toFind = "azz\\[A\\]"; 
```

此外，您的正则表达式的字符串源不需要由`/`s 绑定，但我在您的 jsBin 中看到您已经更正了这一点。

用这些变量声明更新你的 jsBin，它现在应该可以工作了。

# php - 电子邮件标题中的特殊字符是什么以及何时使用引号？

> ID：12008720
> 
> 赞同：4
> 
> 时间：2012-08-17T15:30:03.740
> 
> 标签：php, email, character-encoding, rfc822, rfc2822

我正在尝试使用 PHP 发送和阅读电子邮件。到目前为止，我发现我必须使用该函数对特殊字符进行编码`mb_encode_mimeheader()`，但我不必对空格进行编码。

我还发现，地址归档中的括号不起作用：（[在读取带括号的标题时，PHP 的 imap_fetch_overview() 函数是否有错误？](http://stackoverflow.com/questions/11989915/is-there-an-error-in-phps-imap-fetch-overview-function-when-reading-headers-w)）。例如 PHP 无法读取 header-section `From: Admin [] <user@mail.tld>`，但可以读取 header-section `From: "Admin []" <user@mail.tld>`。

因此，显然括号在邮件标头中具有特殊含义（至少对于 PHP）。**Mailheader 中有什么特殊字符，**它们**的含义是什么**，**它们需要在哪里编码/引用？**

例如，PHP 在主题中的括号没有问题，尽管主题也是标题的一部分。

似乎引号可以帮助我解决问题（[https://www.rfc-editor.org/rfc/rfc5322#section-3.2.4](https://www.rfc-editor.org/rfc/rfc5322#section-3.2.4) - 我仍然不能 100% 确定这是 PHP 的问题还是不正确的邮件头）。**但是如何使用引号，以及引号转义了什么？**

在[https://www.rfc-editor.org/rfc/rfc5322#section-3.2.4](https://www.rfc-editor.org/rfc/rfc5322#section-3.2.4)它说：

> 包含原子中允许的字符以外的字符的字符串可以用带引号的字符串格式表示，其中字符被引号（DQUOTE，ASCII 值 34）字符包围。

那么，我现在应该自己“转义/引用”每个角色吗

```
From: Admin "[""]" <user@mail.tld> 
```

还是把所有的东西都引用在一起可以吗？

```
From: "Admin []" <user@mail.tld> 
```

但是，如果其他控制序列包含在引号中，会发生什么？例如`ÄÖÜ`，我的字符串中有特殊字符，它们被编码为`=?UTF-8?B?w4PChMODwpbDg8Kc?=`. **那么，根据 RFC，“引用和编码”字符串仍然可以吗？**

```
From: "Admin [=?UTF-8?B?w4PChMODwpbDg8Kc?=]" <user@mail.tld> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T10:44:47.347

如果您有 RFC2047，则不妨将整个标头编码为 RFC2047，而忘记引用。

显然您已经找到了 RFC5322，它是关于需要引用什么以及为什么引用的权威来源。基本上，如果它不是电子邮件地址的一部分，则需要引用任何具有电子邮件地址含义的内容。传统的引用机制是反斜杠和/或双引号，但使用 MIME，您可以使用可用的 MIME 编码轻松透明地编码所有内容。

您提供的链接解释了“原子”中不允许的字符需要引用。原子中允许的字符列表在上一节中。

> ```
> ALPHA / DIGIT /    ; Printable US-ASCII
>                    "!" / "#" /        ;  characters not including
>                    "$" / "%" /        ;  specials.  Used for atoms.
>                    "&" / "'" /
>                    "*" / "+" /
>                    "-" / "/" /
>                    "=" / "?" /
>                    "^" / "_" /
>                    "`" / "{" /
>                    "|" / "}" /
>                    "~" 
> ```

如果你对 ASCII 表进行交叉检查，你会得到

```
32   (space)                    not OK
33 !                            OK
34 "                            not OK
35 # through $%& 38             OK
39 ' through () 41              not OK
42 * through + 43               OK
44 ,                            not OK
45 -                            OK
46 .                            not OK
47 / through 0123456789 57      OK
58 : through ;< 60              not OK
61 =                            OK
62 >                            not OK
63 ?                            OK
64 @                            not OK
65 A through BCD...XYZ 90       OK
91 [ through \] 93              not OK
94 ^ through _ 95               OK
96 `                            not OK
97 a through bcd...xyz{|}~ 126  OK
127 DEL                         not OK 
```

在某些情况下，允许设置“点原子”，即上述加点（句号，句点，ASCII 46），无需引用。

有些客户显然在谨慎方面犯了错误（有些客户只会将所有内容都放在双引号中，就好像您的真实姓名不是您的真实姓名一样。这很糟糕）。

我的理解是，在允许原子的地方允许使用 RFC2047 序列，但这意味着它不能与另一个原子相邻。无论如何，我会逃避并建议不要尝试将引用和 RFC2047 包装在同一个标​​题中，而不是可能弄清楚它们如何交互（然后可能会发现你的解释不是城里唯一的游戏，或者因为其他人做了弄错了，或者因为对规范有多种有效的解释）。

# android - 简单的 ImageView 缩放

> ID：12008721
> 
> 赞同：1
> 
> 时间：2012-08-17T15:30:07.883
> 
> 标签：android, imageview

我正在尝试构建一个屏幕，在底部显示一堆缩略图以及完整尺寸的照片。

缩略图是 Horizo​​ntalScrollView 的（间接）子级，完整尺寸的图片作为片段的 ImageViews 添加到 ViewPager 中。

**放大 ImageView 的最简单方法是**什么？缩放将使用固定因子。

我一直无法找到 Android Gallery 源代码，这可能对我有帮助。

```
public boolean onDoubleTap(MotionEvent event) {

    Log.e("test", "on double tap; event: "+ event);

    Matrix m = new Matrix();
    m.setScale(1.25f, 1.25f);
    clickedImageView.setImageMatrix(m);
    clickedImageView.invalidate();
    clickedImageView.refreshDrawableState();
    Log.e("test", "set image matrix after double tap event");

    return true; // indicate event was handled              
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T15:41:52.400

该代码看起来应该可以工作，只需确保您设置

```
android:scaleType="matrix" 
```

在 ImageView 的 xml 中，或

```
clickedImageView.setScaleType(ImageView.ScaleType.MATRIX); 
```

如果您想在代码中执行此操作。否则您设置的矩阵将不会被应用。

# remedy - 编辑补救用户宏文件.ARQ

> ID：12008723
> 
> 赞同：0
> 
> 时间：2012-08-17T15:30:16.027
> 
> 标签：remedy

使用 BMC Remedy User v7.5 p004 跟踪/管理事件。这个工具有一个选项可以记录保存为 .ARQ 文件的宏，我可以在 Notepad++ 中打开这个文件，但它非常混乱。

我想要做的是允许某人根据放在 WorkInfo 选项卡下的工作日志中的摘要来搜索事件。我知道您可以录制允许您输入将提示最终用户的搜索变量的宏，但是在录制宏时，workinfo 部分被停用。所以我想编辑一些预先存在的宏来尝试最终创建我需要的东西。

我想要提取的 SQL

```
SELECT incidentno, summary, notes, summary*, notes*
FROM whatever the main table name is
WHERE WorkInfoType = WorkingLog 
```

请注意，之所以有两个 summary 和 notes 字段，是因为其中两个字段位于 WorkingLog 下，另外两个是为整个事件列出的字段。这些不同字段的 BMC 命名约定差异是 *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:05:00.183

通过在事件管理控制台中的高级搜索表单中记录宏来解决此问题。在该表单中，您可以选择要搜索的字段，并且有一个高级按钮可以打开查询框以进行更复杂的搜索。将表单上的 WorkInfoType 更改为等于“工作日志”后，我使用以下高级查询来完成其余的搜索。

```
( 'Summary' LIKE "%$Search Technical Name$%") AND  ( 'Incident Status' = "Resolved" OR 'Incident Status' = "Closed" )  AND  ( 'Assigned Group' = "Group1" OR 'Assigned Group' = "Group2" ) 
```

注意：录制maco时可以输入$VariableName$来制作变量。这将允许用户在搜索框中为您创建变量的任何字段输入文本。例如，在查询中，我创建了一个名为“搜索技术名称”的变量，这会提示用户在运行宏时搜索汇总字段。此外， % 充当通配符搜索，将命中不完全匹配。

# objective-c - 初始化时在自定义类上设置属性时出现 EXC_BAD_ACCESS？

> ID：12008728
> 
> 赞同：4
> 
> 时间：2012-08-17T15:30:29.350
> 
> 标签：objective-c, xcode, exc-bad-access

我有一个简单的 Answer 类，如下所示：

```
@interface Answer : NSObject {
  NSString *_text;
  NSNumber *_votes;
}

@property(nonatomic, retain) NSString *text;
@property(nonatomic, retain) NSNumber *votes;

+(id)initFromAnswerData:(NSSet *)data;
-(id)initWithText:(NSString *)answer;

@end 
```

实现如下所示：

```
#import "Answer.h"
#import "AnswerData.h"
#import "AppDelegate.h"

@implementation Answer

@synthesize text = _text;
@synthesize votes = _votes;

-(id)initWithText:(NSString *)answer {
  if( (self=[super init])) {
    _text = answer;
    _votes = 0;
  }
  return self;
}

@end 
```

如果我使用该方法在视图控制器中创建一个答案数组，`initWithText:`当我在数组中获取答案并尝试查找它的文本值时，我不可避免地会遇到 EXC_BAD_ACCESS 错误。

但是，如果我初始化一个新的答案，设置文本值，然后将其添加到数组中，我没有这个访问问题。

所以这会导致问题：

```
[arrayOfAnswers addObject:[[Answer alloc] initWithText:@"Hello"]]; 
```

但这不会：

```
Answer *newAnswer = [[Answer alloc] initWithText:nil];
newAnswer.text = @"Hello";
[arrayOfAnswers addObject:newAnswer]; 
```

谁能解释为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T15:37:54.240

您直接使用属性**_text**和**_votes**而不是它们的设置器。因此，您没有保留该行的输入参数**答案**

```
_text = answer; 
```

您应该更改为

```
_text = [answer retain]; 
```

或者

```
self.text = answer; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T15:33:09.523

您是否保留了您放入的阵列`Answers`？这将是我对出了什么问题的猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T07:59:17.060

如您所见，您的 @property(nonatomic, retain) NSString *text; // 这个属性是保留。所以这个 setter 方法应该是`- (void) setText:(NSString*)text{ [_text release]; _text = text; [_text retain];` 这样，当你调用 newAnswer.text = @"hello" 时，它起作用了，newAnswer 保存了文本。但是在您的 initWithText 中，没有保留符号，所以很糟糕。

# extjs - CheckboxTree : lvl1 框 | lvl2 收音机

> ID：12008729
> 
> 赞同：2
> 
> 时间：2012-08-17T15:30:31.020
> 
> 标签：extjs

所有问题都在我的标题中=）。

我从checkBox Tree 示例开始，为第一级添加属性checked:false，我在左侧icone 文件夹中看到我的复选框。

但是收音机的级别是如此不同，我尝试了一些改变来转换收音机中的复选框，但没有 *:_:*

broogle 给出的某些主题仅使用复选框谈论某些级别，但没有使用收音机。

你有想法吗？

非常感谢，祝你有美好的一天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:21:12.090

好吧，我在这个线程上 brb 提供一点功能。把它放在你的树上，通常你有无线电行为的复选框。

```
 listeners: {
                'checkchange': function( n, check )
                {
                    if( check )
                    {
                        var p = n.parentNode;

                        p.eachChild( function( c )
                        {
                            if( c.isLeaf() && c.get('checked') )
                            {
                                c.set('checked', false);
                            }
                        });

                        n.set('checked', true);
                    }
                    else
                    {
                        n.set('checked', false);
                    }
                }
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:24:11.803

该[示例](http://docs.sencha.com/ext-js/4-1/#!/example/tree/check-tree.html)使用 JSON 文件加载节点。

在 de JSON 文件中，您可以将“checked”设置为 true 或 false。

```
{"text": "Grocery List",
"cls": "folder",
"children": [{
    "text": "Bananas",
    "leaf": true,
    "checked": false
},{
    "text": "Milk",
    "leaf": true,
    "checked": false
},{
    "text": "Cereal",
    "leaf": true,
    "checked": false
},{
    "text": "Energy foods",
    "cls": "folder",
    "children": [{
        "text": "Coffee",
        "leaf": true,
        "checked": false
    },{
        "text": "Red Bull",
        "leaf": true,
        "checked": false
    }]
}]} 
```

树中只能有一个复选框，但您始终可以编写自己的扩展:)

# android - 如何创建播放列表

> ID：12008730
> 
> 赞同：4
> 
> 时间：2012-08-17T15:30:30.400
> 
> 标签：android, random, playlists

我正在尝试创建一个仅提供 edittext 和 imagebutton 的应用程序。如果按钮被单击，则想法是将专辑添加到播放列表中，并在编辑文本框中命名。专辑应随机选择。不用说专辑曲目应该按正确的顺序排列。我可以稍后添加更多功能，例如。保存，覆盖，删除等。我有界面，但正在努力处理代码。我有点理解 ContentProviders 的概念。所以代码需要：

*   访问播放列表，我相信这是通过使用 MediaStore.Audio.Playlists 实现的

*   访问专辑，我相信这是通过使用 MediaStore.Audio.Albums 实现的

*   添加到播放列表

我有以下代码（从该站点获得的大多数位。谢谢顺便说一句）来访问播放列表，但它因 Null Exception 错误而崩溃。

```
public void checkforplaylists()
{
    //Get a cursor over all playlists.
    final ContentResolver resolver= MediaProvider.mContentResolver;
    final Uri uri=MediaStore.Audio.Playlists.INTERNAL_CONTENT_URI;
    final String id=MediaStore.Audio.Playlists._ID;
    final String name=MediaStore.Audio.Playlists.NAME;
    final String[]columns={id,name};
    final Cursor playlists= resolver.query(uri, columns, null, null, null);

        if(playlists==null)
            {
                Log.e(TAG,"Found no playlists.");
                    return;
            }
    return;
} 
```

有谁能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:39:28.390

我认为您的意思是`NullPointerException`，这意味着您的一项分配为空，然后您尝试访问您想要的对象的成员。很可能是`resolver`，但要确保您需要报告的行号和/或使用调试器逐步完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T18:56:52.397

This works. When using the ContentResolver, the Context (this) is required.

```
public void checkforplaylists(Context context)
{
    ContentResolver cr = context.getContentResolver();
    final Uri uri=MediaStore.Audio.Playlists.EXTERNAL_CONTENT_URI;
    final String id=MediaStore.Audio.Playlists._ID;
    final String name=MediaStore.Audio.Playlists.NAME;
    final String[]columns={id,name};
    final Cursor playlists= cr.query(uri, columns, null, null, null);
        if(playlists==null)
            {
                Log.e(TAG,"Found no playlists.");
                    return;
            }
        Log.e(TAG,"Found playlists.");
    return;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-12T05:11:35.657

使用此代码，将工作

```
public boolean addPlaylist(String pname) {

    Uri playlists = MediaStore.Audio.Playlists.EXTERNAL_CONTENT_URI;
    Cursor c = resolver.query(playlists, new String[] { "*" }, null, null,
            null);
    long playlistId = 0;
    c.moveToFirst();
    do {
        String plname = c.getString(c
                .getColumnIndex(MediaStore.Audio.Playlists.NAME));
        if (plname.equalsIgnoreCase(pname)) {
            playlistId = c.getLong(c
                    .getColumnIndex(MediaStore.Audio.Playlists._ID));
            break;
        }
    } while (c.moveToNext());
    c.close();

    if (playlistId != 0) {
        Uri deleteUri = ContentUris.withAppendedId(playlists, playlistId);
        Log.d(TAG, "REMOVING Existing Playlist: " + playlistId);

        // delete the playlist
        resolver.delete(deleteUri, null, null);
    }

    Log.d(TAG, "CREATING PLAYLIST: " + pname);
    ContentValues v1 = new ContentValues();
    v1.put(MediaStore.Audio.Playlists.NAME, pname);
    v1.put(MediaStore.Audio.Playlists.DATE_MODIFIED,
            System.currentTimeMillis());
    Uri newpl = resolver.insert(playlists, v1);
    Log.d(TAG, "Added PlayLIst: " + newpl);

    flag=true;
    return flag;
} 
```

# string - 找到数列的开始（和偏移）

> ID：12008731
> 
> 赞同：2
> 
> 时间：2012-08-17T15:30:47.267
> 
> 标签：string, matlab

给定以下单元格数组：

```
strings = {'str1', 'str2', 'str2', 'str1', 'str2', 'str2', 'str1', 'str1', 'str2'}; 
```

我想找到特定值的开始和偏移（第一次出现和最后一次出现）。例如，以下是“str1”的起始和偏移：

```
onset_str1 = [1, 4, 7, ];
offset_str1 = [1, 4, 8, ]; 
```

以下是“str2”的开启和偏移：

```
onset_str2 = [2, 5, 9];
offset_str2 = [3, 6, 9]; 
```

目前我做这样的事情：

```
[blub, ia, ic] = unique(strings, 'first');
all_str1 = find(ic == 1); %  1     4     7     8
all_str2 = find(ic == 2); %  2     3     5     6     9 
```

使用`all_str1`and`all_str2`然后我会寻找连续的值（`diff`例如使用）并确定 on 和 offsets 的方式。然而，这种实现对我来说感觉很“骇人听闻”。

还有哪些其他方法可以有效地提取序列中的 on 和 offset？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T16:30:48.337

```
[blub, ia, ic] = unique(strings, 'first'); 
```

好的，但接下来，只需使用逻辑并[找到](http://www.mathworks.nl/help/techdoc/ref/find.html)查找上升/下降沿：

```
N = numel(blub); % number of unique strings found
str_onsets=cell(N,1);
str_offsets=cell(N,1);
for ii=1:N
    x=ic==ii;
    str_onsets{ii} = find([true ~x(1:end-1)] & x);
    str_offsets{ii}= find(x & [~x(2:end) true]);
end 
```

或[strfind](http://www.mathworks.nl/help/techdoc/ref/strfind.html)如果您更清楚地理解：

```
N = numel(blub); % number of unique strings found
str_onsets=cell(N,1);
str_offsets=cell(N,1);
for ii=1:N
    x=ic==ii;
    str_onsets{ii} = strfind([0 x],[0 1]);
    str_offsets{ii}= strfind([x 0],[1 0]);
end 
```

# cookies - 什么是 cookie 长度，如何找到我的网站使用的 cookie 长度？

> ID：12008739
> 
> 赞同：0
> 
> 时间：2012-08-17T15:30:55.220
> 
> 标签：cookies

Pay Per Click 公司问我我们的网站使用什么 cookie 长度，但不知道这意味着什么。然后我用谷歌搜索，发现在谷歌浏览器 > 开发者工具 > 资源 > Cookies 下查看，但我们的网站还有很多其他 cookie，要考虑哪一个？

PHPSESSID __unam __utma __utmb __utmc __utmz __stid __uset

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:34:33.910

网站从来没有固定的 cookie 长度。每个 cookie 可以有不同的到期时间和日期。我不确定你应该考虑哪一个。这取决于您对哪些 cookie 感兴趣。例如，如果您想知道 PHP 会话将存在多长时间，请查看 PHPSESSID 的 cookie 过期日期是什么。

# eclipse - Eclipse buildpath 自动获取链接目录的所有 JAR

> ID：12008742
> 
> 赞同：1
> 
> 时间：2012-08-17T15:31:06.627
> 
> 标签：eclipse, dynamic, linked-list, buildpath

此问题是此处描述的问题的变体：[Eclipse buildpath automatically take all JARs of a internal directory](https://stackoverflow.com/questions/483563/eclipse-buildpath-automatically-taking-all-jars-of-a-internal-directory)

但是，我宁愿在构建路径中自动获取来自另一个项目的链接文件夹，而不是任何本地文件夹。

基本上，我的工作区中有一个主项目，其中包含目录 lib、ext-lib，每个目录包含多个 jar 文件。这些 jar 文件可能每隔几天就会升级/删除或添加新的。

我在工作区中还有许多其他项目，它们依赖于我的主项目中完全相同（最新）的 jar。

我的目标是，当我在主项目中修改这两个文件夹中的 jar 时，将它们作为所有其他项目中的链接文件夹，并将这些链接项目作为所有这些项目的构建路径的一部分动态拾取。

任何有关如何在 Eclipse 中执行此操作的建议都将受到高度赞赏。不幸的是，人们提到的“动态目录”插件不能与“链接”文件夹一起使用:(

真诚的，盖伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:34:18.383

我建议在 Eclipse 中创建一个用户库，然后在所有 Eclipse 项目中使用它。

尝试进入首选项`Java -> Build Path -> User Libraries`并使用所有 jar 创建一个新的用户库。然后在需要这些罐子的任何地方使用它。

有关详细信息，请参阅**[此页面。](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/preferences/java/buildpath/ref-preferences-user-libraries.htm)**

此外，**[此](http://my.safaribooksonline.com/book/software-engineering-and-development/ide/0321288157/java-project-configuration/ch06lev1sec2)**页面更详细地解释了创建用户库。还有一个用例似乎更符合您的想法：

```
6.2.1\. Linked Library Project

A useful hybrid strategy is to configure a user library that is also available as a linked folder in your Eclipse workspace. Follow these steps:
1.

Create a simple project in your workspace. Unlike Java projects, a simple project has no Java build path configuration in its properties. Use the command File > New > Project > Simple Project.

2.

Uncheck the option to use a default project location within the workspace folder and enter the path for your \eclipse-contrib\libraries folder (see Figure 6-8). 
```

# php - PHP页面工作一次

> ID：12008746
> 
> 赞同：0
> 
> 时间：2012-08-17T15:31:30.807
> 
> 标签：php

该代码运行一次，但不会再次加载 customer_login.php 页面。当我第二次尝试时，它会给出 HTTp 404 Not Found 错误。在它工作和出现错误之间，我没有改变任何东西。

```
 <?php
session_start();
if(isset($_SESSION["manager"]))
    {
        header("location: ./admin/website/".$websitelocation."/index.html");
        exit();
    }
     ?>
     <?php
if(isset($_POST["username"])&&isset($_POST["password"]))
    {
        $manager = preg_replace('#[^A-Za-z0-9]#i', '', $_POST["username"]); 
        $password = preg_replace('#[^A-Za-z0-9]#i', '', $_POST["password"]); 

        include "./scripts/connect_to_mysql.php";
        $sql = mysql_query("SELECT UsersID, Active, Website_Location  FROM users WHERE       User_Name='$manager' AND Password='$password' LIMIT 1") or die(mysql_error());

        $existCount = mysql_num_rows($sql);
        echo $existCount;

        if ($existCount == 1) 
                {
                    while($row = mysql_fetch_array($sql))
                        { 
                            $id = $row["UsersID"];
                            $active = $row["Active"];
                            $websitelocation = $row["Website_Location"];                            
                        }
                    if($active == 'Yes')
                    {   
                        $_SESSION["id"] = $id;
                        $_SESSION["manager"] = $manager;
                        $_SESSION["password"] = $password;

                        header("location: ./admin/website/".$websitelocation."/index.html");

                        exit();
                    }
                    else
                    {
                        echo "<script type='text/javascript'>alert('You are not authorized to login!!!!');</script> ";

                        echo "click here to go back to <a href='admin_login.php'>login page</a>. <br><br>"; 
                        echo "click here to go to <a href='../customer_login.php'>customer login</a>. <br><br>";
                        echo "click here to go to <a href='../index.php'>JE Designs LLC main page</a>. <br><br>";                               

                        exit();
                    }
                } 
                else 
                {
                    echo "<script type='text/javascript'>alert('The information you have entered is not correct, please try again.');</script> ";

                    echo "<a href=\"javascript:history.go(-1)\">Go back to login page.</a>"; 

                    exit();
                }

    }
     ?>

    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>User Login</title>
    </head>

    <body>
    <div align="center" id="mainWrapper">
    <?php include_once("template_header.php");?>
    <div id="pageContent"><br />
<div align="left" style="margin-left:24px;">
  <h2>Log in to view website.</h2>
  <form id="form1" name="form1" method="post" action="
  <?php 
    if(isset($_POST["username"])&&isset($_POST["password"]))
        {
            echo "./admin/website/".$websitelocation."/index.html"; 
        }
        else
        {
            echo "customer_login.php";
        }
  ?> " >
    User Name:<br />
      <input name="username" type="text" id="username" size="40" />
    <br /><br />
    Password:<br />
   <input name="password" type="password" id="password" size="40" />
   <br />
   <br />
   <br />

     <input type="submit" name="button" id="button" value="Log In" />

  </form>
  <p>&nbsp; </p>
</div>
<br />
<br />
<br />
</div>
<?php include_once("template_footer.php");?>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:38:03.470

当您已经登录时，您会重定向到`./admin/website/$websitelocation/index.html`. 但是变量`$websitelocation`从何而来？如果您在登录脚本中设置此变量也无济于事！因此，您将被重定向到`./admin/website//index.html`，这将为您提供 404。

顺便说一句：不要使用相对重定向，最佳做法是在`Location`标头中包含主机名，因为它得到了更广泛的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:35:46.467

我的猜测是您第二次加载页面时`$_SESSION["manager"]`已设置，然后它重定向到的 URL 是错误的，因此会给出 404。

我的第二个猜测是，`$websitelocation`当您尝试进行重定向时没有定义。如果您希望它与`manager`会话变量一样长，请将其存储`$_SESSION['websitelocation']`或类似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T15:43:00.170

使用目录的常量制作一个包含文件，然后将其包含在您的脚本中。这应该可以让您避免一直正确定义目录的麻烦[http://php.net/manual/en/language.constants.predefined.php](http://php.net/manual/en/language.constants.predefined.php)

# css - 使用 CSS 的 div 布局问题

> ID：12008747
> 
> 赞同：0
> 
> 时间：2012-08-17T15:31:43.330
> 
> 标签：css, css-tables

我正在尝试在我的页面上并排布局两个 Html 表。当我点击左侧的投资组合 ID 时，我的交易贡献记录会显示在右侧。

我使用单独的 div，它允许我创建一个锁定列标题的标题表，并在它下面创建另一个包含数据的可滚动表。

请参阅示例：http: [//jsfiddle.net/robertmazzo/6zWdP/1/](http://jsfiddle.net/robertmazzo/6zWdP/1/)

**详情**：

页面的一个主 div - 页面内的四个 div：

**1)**两个向左浮动的 div
**1a)**第一个 div 是一个只有`<caption>`and`<thead>`和`<th>`标题的表格
**2a)**第二个 div 是可滚动的并且包含完整的表格单元格内容，没有标题

**2)**两个向右浮动的 div
**1a)**同上
**2a)**同上

正如您将看到的，我的投资组合定义 div 和左侧的表格看起来漂亮而整洁。

但是，右侧的 Trade Contrib div 和表格略有倾斜。

仅供参考 - 如果没有这种为表列标题使用单独 div 的技术，我的两个表并排看起来很棒。但是，它们没有锁定标题列的外观。例如/ [http://jsfiddle.net/robertmazzo/bsApv/3/](http://jsfiddle.net/robertmazzo/bsApv/3/)

我将继续试验，但一些方向和建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:39:48.310

将您的 div 组合包装在包装器 div 中并浮动它们。

```
<div id=left>
    <div id=leftheaders />
    <div id=leftbody />
</div> 
```

# c# - 部署 ASP.NET 网站时出现 WebConfig 文件问题

> ID：12008753
> 
> 赞同：0
> 
> 时间：2012-08-17T15:32:03.457
> 
> 标签：c#, asp.net, deployment, web-config, database-connection

我正在尝试在远程服务器上部署带有数据库（SQL Server 2008）的 ASP.NET 网站。但是，我从 WebConfig 文件中收到错误消息。

**网络配置**：

在 VS 2010 中，WebConfig 包含：

> ```
> <configuration>
>   <system.web>
>     <compilation debug="true" targetFramework="4.0">
>       <assemblies>
>         <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=SOMETOKEN"/>
>       </assemblies>
>     </compilation>
>   </system.web>
> </configuration> 
> ```

当我在 Web 服务器上运行该页面时，出现此错误：

```
Details: To enable the details of this specific error message to be viewable on remote machines, please create a <customErrors> tag within a "web.config" configuration file located in the root directory of the current web application. This <customErrors> tag should then have its "mode" attribute set to "Off".

<!-- Web.Config Configuration File -->

<configuration>
    <system.web>
        <customErrors mode="Off"/>
    </system.web>
</configuration> 
```

因此，我添加`<customErrors mode="Off"/>` 并修改了我的 Web.Config 为：

```
<compilation debug="false" targetFramework="4.0">
    <customErrors mode="Off"/>  
      <assemblies>
        <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
      </assemblies>         
    </compilation> 
```

但这无济于事。我仍然遇到同样的错误。我错过了什么？我记得部署其他没有组件的项目（* .dlls），效果很好。大会是不是搞砸了什么？如果是的话，你能建议修复吗？

我很惊讶，没有单一的教程来解释 ASP.NET“网站”的部署，以及应该对 web.config 文件做什么。使用组件时应特别注意（如果有的话）。

我将感谢您对顺利部署相同的帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:39:27.760

错误：customErrors 在编译标签内

将顺序更改为：

```
<customErrors mode="Off"/>  
<compilation debug="false" targetFramework="4.0">
  <assemblies>
    <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
  </assemblies>         
</compilation> 
```

# c# - 如何将协程存储在列表中？

> ID：12008755
> 
> 赞同：-2
> 
> 时间：2012-08-17T15:32:09.397
> 
> 标签：c#, mono, unity3d

我想创建一个协程列表以在未来开始。如何将这些函数存储在列表中？

假设我们有一个类似的函数：

```
IEnumerator Example() {
    while (true) {
        yield return  new WaitForFixedUpdate();
    }
} 
```

我们不能将它存储在类似的东西中，`List<Func<IEnumerator >> list`但是我们得到编译器错误，例如：

```
Error   1   The best overloaded method match for 'System.Collections.Generic.List<System.Func<System.Collections.IEnumerator>>.Add(System.Func<System.Collections.IEnumerator>)' has some invalid arguments 
```

当我们打电话时

```
 list.Add(Example); 
```

或者如果我们使用`List<Example> list`我们没有编译错误但是

```
 if (disposeActions.Any()) {
                yield return StartCoroutine(list[0]); //here we get null exception
                disposeActions.RemoveAt(0);
            } 
```

所以我想知道如何创建一个列表来存储 IEnumerator 函数并能够将其项目发送到程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:34:53.757

你的问题很难理解，但也许你正在寻找这样的东西：

```
var listOfFunctions = new List<Func<T, TResult>>(); 
```

# c# - 构建 Where 子句（不确定 PredicateBuilder 是否适合我）

> ID：12008758
> 
> 赞同：3
> 
> 时间：2012-08-17T15:32:20.490
> 
> 标签：c#, asp.net, linq

我正在尝试使用 LINQ 查询数据库。我将 TableA 与 TableB 与 TableC 一起加入。

我有零到多个“关键字”（在设计时不知道有多少），我想在（LIKE '%%'）分布在三个表中的几个字段中查找。

假设在我的搜索框中输入了三 (3) 个关键字：

在 T-SQL 中我会有这个 -

```
SELECT tbl0.FieldA, tbl0.FieldB, tbl1.FieldC, tbl1.FieldD, tbl2.FieldE, tbl2.FieldF

FROM tbl0

JOIN tbl1 ON tbl0.KeyField = tbl1.KeyField

JOIN tbl2 ON tbl1.KeyField = tbl2.KeyField

WHERE (tbl0.FieldA LIKE '%{keyword1}%' OR tbl1.FieldC LIKE '%{keyword1}%' OR tbl2.FieldE LIKE '%{keyword1}%' OR tbl0.FieldA LIKE '%{keyword2}%' OR tbl1.FieldC LIKE '%{keyword2}%' OR tbl2.FieldE LIKE '%{keyword2}%' OR tbl0.FieldA LIKE '%{keyword3}%' OR tbl1.FieldC LIKE '%{keyword3}%' OR tbl2.FieldE LIKE '%{keyword3}%') 
```

问题是——我如何在 LINQ 中“动态”构建这个 WHERE 子句？

注意＃1 - 我不想（出于此问题范围之外的原因）想要在三个表中创建一个 VIEW

注意#2——因为我是以这种方式加入的（而且我还是 LINQ 的新手），所以我不知道如何使用 PredicateBuilder，因为我不确定要传递什么类型（T）？

注意#3——如果重要的话……我最终计划返回一个强类型的（自定义）对象列表，以显示在 GridView 中。

**编辑 - 2012 年 8 月 17 日 - 美国东部时间下午 5:15**

下面的评论是正确的。

“OP 正在寻找的代码是**任何一个字段包含任何一个关键字的地方**。”

谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T15:43:45.043

这是一个不使用 PredicateBuilder 的解决方案。只需获取包含第一个关键字的所有项目并将其与包含第二个关键字的所有项目合并，依此类推。对问题的背景一无所知，我无法判断这是否有效。

```
var query = from t0 in db.Table0
            join t1 in db.Table1 on t0.KeyField equals t1.KeyField
            join t2 in db.Table2 on t1.KeyField equals t2.KeyField
            select new
            {
                t0.FieldA, t0.FieldB,
                t1.FieldC, t1.FieldD,
                t2.FieldE, t2.FieldF
            };

string keyword = keywordsList[0];
var result = query.Where(x => x.FieldA.Contains(keyword) ||
                              x.FieldC.Contains(keyword) ||
                              x.FieldE.Contains(keyword));

for (int i = 1; i < keywordsList.Length; i++)
{
    string tempkey = keywordsList[i];
    result = result.Union(query.Where(x => x.FieldA.Contains(tempkey) ||
                                           x.FieldC.Contains(tempkey) ||
                                           x.FieldE.Contains(tempkey)));
}

result = result.Distinct(); 
```

# javascript - Chrome DOM 未针对 jQuery 追加/淡入更新

> ID：12008760
> 
> 赞同：6
> 
> 时间：2012-08-17T15:32:25.513
> 
> 标签：javascript, jquery, google-chrome, dom

从服务器获取新记录后，我使用 jQuery 1.7.2 中的 AJAX 成功回调将新记录添加到列表并淡入。

```
function onSuccess (data, status, xhr) {
    var record = $(template_html);

    // populate `record` with `data` values.

    body.append(record); // body is a jQuery object from closure scope
    record.fadeIn('fast');
} 
```

我在以下浏览器中对此进行了测试：

*   即 8
*   即 9
*   Safari 5.1.7
*   火狐 14.0.1
*   铬 21.0.1180.79
*   歌剧 11.64

它在上述所有浏览器中始终如一地工作，除了 Chrome。它偶尔在 Chrome 中工作。

当它在 Chrome 中失败时，如果我单击“检查元素”或查看开发人员工具上的元素选项卡，或者单击使用 打印到 Javascript 控制台的 DOM 元素`console.log(record)`，它会导致新记录弹出可见性。

我知道 DOM 元素正在正确创建、填充和附加。问题是有时 Chrome 拒绝重新渲染 DOM。有时。

我尝试过更换`fadeIn`或`show`不`fadeTo`更换。

“类似问题”中的答案都没有对我有用。记录的标记只是`<div>`s in `<div>`s，我在添加新记录之前和之后验证了页面，以查看是否存在无效的 HTML 问题。

有什么想法或想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-22T14:05:48.760

尝试这个：

```
$(document).ready(function () {
    var body = document.body;
    $(body).append(function () {
        return $('<div>').addClass('Appended').html('Test Div </br> :)');
    });

    setTimeout(function () {
        $('.Appended').fadeIn('fast');

        // i'm used timeout to see the effect
    }, 1500);
}); 
```

你可以通过这个小提琴[链接检查它](http://jsfiddle.net/rasoolghafari/6PFRS/)

# performance - “管理测试控制器”选项在 Visual Studio 2012 的“测试”菜单上不可用

> ID：12008761
> 
> 赞同：0
> 
> 时间：2012-08-17T15:32:31.180
> 
> 标签：performance, visual-studio-2012

我已在 Server 2012 RC DataCenter 上运行 Hyper-V 的虚拟机上将 Visual Studio Ultimate 2012 RC 版本 11.0.50522.1 RCREL 安装到 Windows 8 RP 上。

所有文档都指出，如果要管理负载测试装置中的测试控制器，则必须单击“测试”菜单中的“管理测试控制器”。但是，我在“测试”菜单中没有该选项。我试过手动添加它，但它仍然不可用。![在此处输入图像描述](../Images/8e7012b8fda6a81cd87c8e6fc10fe05f.png)

我究竟做错了什么？这真的让我望而却步。

我可以通过创建一个虚拟负载测试然后右键单击“控制器机器”注释并从那里选择“管理测试控制器”来管理测试控制器。我遇到的问题是我认为可能缺少其他一些菜单项：如何设置活动控制器（我有 4 个设置）。它似乎试图在本地运行测试，但是我为 4 个控制器中的每一个创建的 TestResults 数据库都没有使用，也找不到它。

**编辑：** 我已经向 Microsoft 提交了一个错误：[https ://connect.microsoft.com/VisualStudio/feedback/details/758768/can-not-administer-or-manage-test-controllers-from-the-test-菜单](https://connect.microsoft.com/VisualStudio/feedback/details/758768/can-not-administer-or-manage-test-controllers-from-the-test-menu)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T19:20:41.783

正如 Cyber​​maxs 所说，您可以在**负载测试**菜单中找到“管理测试控制器”命令。但是，仅当您的解决方案中有 C# Web 性能和负载测试项目时，此菜单才可见。如果您只有标准的 C# MS 测试项目，它对您没有帮助。

好消息是，您可以手动将“管理测试控制器”选项添加到**测试**菜单中，该菜单始终可见。

**解决方法：**
请注意，我的解决方案中有一个单元测试项目，但没有 Web 性能和负载测试项目。

![在此处输入图像描述](../Images/95df44fc4816bec1a6c4a4a0fe453cbe.png)

我有一个**测试**菜单，但没有**负载测试**菜单。

![在此处输入图像描述](../Images/e143c4193954b9c47ec25a31a15f4a7d.png)

我的**测试**菜单不包含*管理测试控制器*选项

![在此处输入图像描述](../Images/3b2a1c8ab89c7002207e4108d62da90e.png)

**手动添加命令：**

*   右键单击该菜单栏区域中的任意位置，然后选择“自定义”。

![在此处输入图像描述](../Images/171f5f0f108c672525812cd156b927e9.png)

*   在*Commands*选项卡中，从下拉列表中选择**Test菜单栏。**
*   单击“*添加命令*”按钮，向下滚动并选择“**负载测试**”类别，您知道什么……就是这样。“管理器测试控制器”命令。

![在此处输入图像描述](../Images/89b42038fc65032d23e265453ce6bb98.png)

*   选择它并单击“确定”将其添加到菜单中。使用“上移”和“下移”将其定位到您喜欢的位置（就个人而言，我更喜欢它在第一次休息的上方）。

*   点击“关闭”保存，有一种成功的感觉，看到败家命令又回来了：）

![在此处输入图像描述](../Images/3ec20ee78983dbba9e605344e42f26eb.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:46:19.777

您可以右键单击负载测试。

![在此处输入图像描述](../Images/f2b918e9befaaccbe37e710b0708e4b9.png)

它也可以在菜单项“负载测试”中使用。

# caching - 一个缓存与多个缓存

> ID：12008763
> 
> 赞同：1
> 
> 时间：2012-08-17T15:32:35.727
> 
> 标签：caching, web-applications, playframework-2.0

我正在使用使用 EHcache 的 playframework 2。现在api只有一个`Cache.set`，`Cache.get`所以我认为有一个大缓存。

如果有多个缓存不是更有效吗？例如，一个缓存用于 IP 地址，一个缓存用于用户名等。

你能给我一些优点/缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-08-02T11:24:54.033

考虑最一般意义上的缓存。通常允许缓存增长到某个大小限制，然后根据上次访问的时间从缓存中删除项目。

因此，假设您要缓存苹果和梨，并且您有足够的空间在缓存中保存 20 个项目。如果你把它分成一个缓存苹果和另一个缓存梨，它似乎很好地分割了。但是，如果您的客户使用了很多苹果但几乎没有梨，您最终会很快将苹果缓存装满，因此最近使用过的苹果将从苹果缓存中删除，而没有使用过的梨长时间使用可以留在梨缓存中，因为它没有满。

您可以看到，如果您只有一个可以存储苹果或梨的缓存，那么您将缓存最近使用的对象，因此总体上可能会更有效率。因此，从性能的角度来看，您通常最好使用尽可能少的缓存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T17:21:50.437

Play 中 Cache 对象的目的是拥有一个通用的缓存系统。

您可以通过扩展实际缓存并使用特定前缀来专门化缓存：

```
class UserCache {

    public static final String PREFIX = "UserCache";

    public static void set(String key, User value) {

        Cache.set(PREFIX + key, value);
    }

    public static User get(String key) {
        return (User)Cache.get(PREFIX + key);

    }

} 
```

# c# - 导出到从 GridView 派生的 Excel 控件

> ID：12008765
> 
> 赞同：0
> 
> 时间：2012-08-17T15:32:43.067
> 
> 标签：c#, asp.net

我有一个从 GridView 类派生的控件。BottomPagerRow 始终可见。覆盖 InitializePager，我在 UpdatePanel 中添加了一个 UpdatePanel 和一个 LinkBut​​ton（单击事件指向函数以转换数据）。

```
var download = new LinkButton { Text = "Open in Excel", CssClass = "fakeButton", ID = "DownloadToExcel" };
download.Click += DownloadExcelFile;
var up = new UpdatePanel() { ID = "ExcelUpdatePanel" };
var trigger = new PostBackTrigger { ControlID = download.ID };
up.Triggers.Add(trigger);
up.ContentTemplateContainer.Controls.Add(download);
row.Cells[0].Controls.Add(up); 
```

当我使用控件单击页面中的 LinkBut​​ton 时，我在 Web 浏览器中看到以下客户端异常，

> 未捕获的 Sys.WebForms.PageRequestManagerParserErrorException：Sys.WebForms.PageRequestManagerParserErrorException：无法解析从服务器接收到的消息。

据我了解，我认为这是因为我在 DownloadExcelFile() 中使用了 Response.Write。但是，我认为根据此[链接](http://weblogs.asp.net/leftslipper/archive/2007/02/26/sys-webforms-pagerequestmanagerparsererrorexception-what-it-is-and-how-to-avoid-it.aspx)添加 PostBackTrigger 可以避免这种情况。我还将 InitializePager 事件中的 PostBackTrigger 生成替换为

```
ScriptManager.GetCurrent(Page).RegisterPostBackControl(download); 
```

但是，结果保持不变，有时它有效，有时我看到异常。该异常在类似于以下内容的页面中可见：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master"
    AutoEventWireup="true" CodeBehind="somePage.aspx.cs" Inherits="somePage" %>
<asp:Content ID="SomeContent" ContentPlaceHolderID="MainContent" runat="server">
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            Some other junk...
        </ContentTemplate>
    </asp:UpdatePanel>
    <asp:UpdatePanel runat="server" ID="SomePanel" UpdateMode="Conditional">
        <ContentTemplate>
            <asp:CustomGridView ID="SomeCustomGridView" runat="server" AutoGenerateColumns="False"
                DataSourceID="SomeSqlDataSource" AllowPaging="True" AllowSorting="True">
                <Columns>
                    <asp:BoundField DataField="SomeField" />
                </Columns>
            </asp:CustomGridView>
            <asp:SqlDataSource ID="SomeSqlDataSource" runat="server" ConnectionString="<%$ ConnectionStrings:SomeConnectionString %>"
                SelectCommand="<%$ Resources: SomeResource, Query %>">
                <SelectParameters>
                    <asp:QueryStringParameter Name="SomeId" QueryStringField="SomeId" />
                </SelectParameters>
            </asp:SqlDataSource>
        </ContentTemplate>
    </asp:UpdatePanel>
</asp:Content> 
```

此子页面使用的母版页包括 ToolkitScriptManager。我正在使用 .NET Framework 4。如果有人对如何避免此异常有意见，我将不胜感激。不确定我是在控件生命周期的错误部分添加触发器，还是完全错过了链接文章的要点。谢谢。

# python - Pylons Mako 未定义变量

> ID：12008767
> 
> 赞同：2
> 
> 时间：2012-08-17T15:32:54.220
> 
> 标签：python, pylons, mako

在控制器中，我定义了 2 个方法：

foob​​ar.py：

```
class foo(self):
    c.help_text = 'help'
    return render('/index.html')

class bar(self):
    return render('/index.html') 
```

索引.html：

```
${c.help_text} 
```

这给了我一个错误 ==> AttributeError: 'ContextObj' object has no attribute 'help_text'

在阅读了一些 mako 文档后，我尝试：

```
 % if c.help_text is UNDEFINED:
        foo
    % else:
        ${c.help_text}
    % endif 
```

它也给了我一个错误。然后在我的 development.ini 中，我输入：

```
mako.strict_undefined = false 
```

后

```
[app:main] 
```

这仍然给我一个错误 ==> AttributeError: 'ContextObj' object has no attribute 'help_text'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:11:12.090

我相信您的控制器代码不正确。您的第一个样本应该是...

```
def foo(request):
    c.help_text = 'help'
    return render('/index.html')

def bar(request):
    return render('/index.html') 
```

...或者...

```
class Controller(object):
    def foo(self, request):
        c.help_text = 'help'
        return render('/index.html')

    def bar(self, request):
        return render('/index.html') 
```

我相信，因为你有这个控制器代码不正确，“c.help_text”实际上并没有运行以响应处理查询，但是当你启动应用程序时它正在被正确处理。

如果您修复了这些错误但仍有问题，您能否提供更多有关错误的信息？你有堆栈跟踪或确切的行号吗？

# c# - Parallel.ForEach 导致测试超时

> ID：12008782
> 
> 赞同：2
> 
> 时间：2012-08-17T15:33:56.687
> 
> 标签：c#, visual-studio-2010, unit-testing, tdd, mstest

我正在使用 Visual Studio 测试工具和 Rhino 模拟。

我目前正在对使用 Parallel.ForEach 处理数据的方法编写单元测试。这是我要测试的方法：

```
var exceptions = new ConcurrentQueue<Exception>();

Parallel.ForEach(messages, emailMessage =>
{
    try
    {
        this.Insert(emailMessage)
    }
    catch (Exception exception)
    {
        exceptions.Enqueue(exception);
    }
});

if (exceptions.Count > 0)
{
    throw new AggregateException(exceptions);
} 
```

这是我的测试：

```
[ExpectedException(typeof(AggregateException))]
public void MyTest()
{
    this.target = new MyClassToTest();

    // stub the throwing of an exception
    this.target.Stub(
        s => s.Insert(null)).IgnoreArguments().Throw(new ArgumentNullException());

    // perform the test
    this.target.Send();
} 
```

在我的测试中，我存根插入方法并强制它抛出异常。我的测试期望是抛出 AggregateException。如果我在 Visual Studio 中运行测试，它运行良好，但在持续集成服务器上，测试会超时。我希望这是一个围绕 Parallel.ForEach 的性质的问题，其中循环的迭代是并行完成的。

谁能看到我上面哪里出错了，或者我可以如何改变我的测试以防止它超时？

# javascript - django 管理界面 change_form.html 向 querydict/post 添加数据？

> ID：12008796
> 
> 赞同：2
> 
> 时间：2012-08-17T15:34:52.150
> 
> 标签：javascript, jquery, django, django-admin, django-templates

是否有可能通过 jQuery / javascript 从管理模板中向 querydict / post 变量添加数据？我希望在单击管理员内置的保存按钮时提交一些额外的数据。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:37:02.397

不可以。这意味着您有一个可以通过 XSS 攻击严重利用的安全问题。

要正确执行此操作，您需要将自定义表单子类化并构建其他视图。

# javascript - contentEditable 中的颜色编码？

> ID：12008797
> 
> 赞同：1
> 
> 时间：2012-08-17T15:34:52.940
> 
> 标签：javascript, jquery, contenteditable

我一直试图分解所见即所得编辑器的工作方式，但在弄清楚它时遇到了问题（甚至不需要 5% 的多功能性）。

我自己的问题很简单。

在 contentEditable div 内部，我有一堆文本。我想对任何匹配简单模式的文本进行颜色编码。所以我可能有这样的文字：

> “这是一个我们[可以忽略]之前的文本，但是任何符合 ref 的 [ref=xxxxxx|aaa|bnbb] 都必须用颜色编码。”

我想提到任何遵循`[ref=<whatever>]`稍微更小/有色的模式。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:43:06.423

一种方法是使用神话般的[http://alexgorbatchev.com/SyntaxHighlighter/插件并为您的](http://alexgorbatchev.com/SyntaxHighlighter/)*语法*编写自定义画笔，这应该不会太难，因为您的语法着色要求相当简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T16:45:05.457

如果您将 keyup 事件侦听器添加到您的 contenteditable，您可以在那里执行您的正则表达式替换以在 contenteditable 的 innerHTML 中添加 $1。

这样做会重置插入符号的位置，但您可以使用[**Rangy**](https://code.google.com/p/rangy/)保留它。

```
function highlight(){
  var selection = rangy.saveSelection();
  contenteditable.innerHTML = contenteditable.innerHTML.replace(/(\[ref=[^\]]*\])([^<])/g, '<span class="ref">$1</span>$2');
  rangy.restoreSelection(selection);
} 
```

正则表达式可能并不完美，但如果不是，它应该可以帮助您入门。

# android - 默认通知声音只有一次

> ID：12008798
> 
> 赞同：0
> 
> 时间：2012-08-17T15:34:53.017
> 
> 标签：android, audio, notifications, default

我有一个使用方向传感器的应用程序，我想在“y”值高于 170 度时播放默认通知声音。问题是它第一次发生时它会正确发出声音但两次（我想这是因为将 canSound 稳定为 false 所需的时间）并且在第一次发生之后，如果 'y' 值再次较高超过 170，听起来不像我预期的那样发生。所以，问题是，我在使用 mediaPlayer 时做错了什么？

提前致谢。

PD：这是我在 public void onSensorChanged(SensorEvent event) 中与我的问题相关的部分代码。

```
 if(y>170&&canSound)
    {
        canSound=false;
        Uri defaultRingtoneUri=RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
        mediaPlayer = new MediaPlayer();
        try
        {
            mediaPlayer.setDataSource(context, defaultRingtoneUri);
            mediaPlayer.setAudioStreamType(AudioManager.STREAM_NOTIFICATION);
            mediaPlayer.prepare();
            mediaPlayer.setOnCompletionListener(new OnCompletionListener()
            {
                @Override
                public void onCompletion(MediaPlayer mp)
                {
                    mp.release();
                }
            });
            mediaPlayer.start();
         }
         catch (IllegalArgumentException e) 
         {
            e.printStackTrace();
         }
         catch (SecurityException e)
         {
            e.printStackTrace();
         }
         catch (IllegalStateException e)
         {
            e.printStackTrace();
         }
         catch (IOException e) 
         {
            e.printStackTrace();
         }
     }    
 }
 else
 {
    if(y<170&&!canSound)
    {
       mediaPlayer.stop();
       mediaPlayer.reset();
       canSound=true;
    } 
```

# java - 在 Oracle JDBC 驱动程序中，当您将 Java 日期写入 TIMESTAMP 列时，时区会发生什么变化？

> ID：12008801
> 
> 赞同：12
> 
> 时间：2012-08-17T15:35:01.363
> 
> 标签：java, sql, oracle, jdbc

我四处搜索，令人惊讶的是找不到 Oracle JDBC 的答案。[这个密切相关的问题](https://stackoverflow.com/questions/4123534/before-writing-a-java-date-to-an-sql-timestamp-column-does-jdbc-translate-the-d)有 PostgreSQL 和 MySQL 的答案。

基本上，如果我在两个不同的时区有两台应用服务器将时间戳写入一个 Oracle 数据库，会发生什么情况？谢谢。

编辑：我应该补充一点，当我进行查询时，JDBC 发送到数据库的值似乎在我的本地时区。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T21:26:34.110

我整理了一些测试 JDBC 代码来弄清楚到底发生了什么。结果很有趣。Oracle 具有三种密切相关的数据类型：`TIMESTAMP`、`TIMESTAMP WITH TIME ZONE`和`TIMESTAMP WITH LOCAL TIME ZONE`. 我采用完全相同的代码，并从两个不同的盒子运行它，一个在“America/New_York”时区，一个在 UTC 上运行。两者都命中同一个数据库，以 UTC 运行。我使用的是 Oracle 11.2.0.2.0 驱动程序。

*   该`TIMESTAMP`列设置为执行 Java 代码的机器上的本地时间。未执行时区转换。
*   该`TIMESTAMP WITH TIME ZONE`列将时间转换为 JDBC 客户端所在的任何时区。
*   该`TIMESTAMP WITH LOCAL TIME ZONE`列还将时间转换为 JDBC 客户端所在的时区。

[这篇](http://oracle-cookies.blogspot.com/2008/03/whats-wrong-with-oracle-timestamp-with.html)较旧的文章表明，`TIMESTAMP WITH TIME ZONE`如果您想做诸如索引或分区之类的事情，那几乎没用。但是，它似乎`TIMESTAMP WITH LOCAL TIME ZONE`可能非常有用。（不确定如果更改服务器的时区会发生什么，但它似乎对 JDBC 客户端的本地时区很智能）。我没有机会使用这些数据类型测试索引行为等。

如果您想在您的环境中重现我的测试，请在下面粘贴我的示例类。

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.Timestamp;
import java.util.Date;

// create table x_tst_ts_tab(
// os_name varchar(256)
// ts timestamp,
// ts_with_tz timestamp with time zone,
// ts_with_local_tz timestamp with local time zone
// )
class TSTest {
    public static final void main(String[] argv) throws Exception {
        Class.forName("oracle.jdbc.OracleDriver");
        Connection conn = DriverManager.getConnection(
            "your_connection_string",
            "your_user_name",
            "your_password");

        try {
            // Insert some data
            Date nowDate = new Date();
            Timestamp nowTimestamp = new Timestamp(nowDate.getTime());
            PreparedStatement insertStmt = conn.prepareStatement(
                "INSERT INTO x_tst_ts_tab"
                + " (os_name, ts, ts_with_tz, ts_with_local_tz)"
                + " VALUES (?, ?, ?, ?)");
            try {
                insertStmt.setString(1, System.getProperty("os.name"));
                insertStmt.setTimestamp(2, nowTimestamp);
                insertStmt.setTimestamp(3, nowTimestamp);
                insertStmt.setTimestamp(4, nowTimestamp);
                insertStmt.executeUpdate();
            } finally {
                try {
                    insertStmt.close();
                } catch (Throwable t) {
                    // do nothing
                }
            }

            System.out.println("os_name, ts, ts_with_tz, ts_with_local_tz");

            // Read back everything in the DB
            PreparedStatement selectStmt = conn.prepareStatement(
                "SELECT os_name, ts, ts_with_tz, ts_with_local_tz"
                + " FROM dom_fraud_beacon.x_tst_ts_tab");
            ResultSet result = null;
            try {
                result = selectStmt.executeQuery();
                while (result.next()) {
                    System.out.println(
                        String.format("%s,%s,%s,%s",
                                      result.getString(1),
                                      result.getTimestamp(2).toString(),
                                      result.getTimestamp(3).toString(),
                                      result.getTimestamp(4).toString()
                                      ));
                }
            } finally {
                try {
                    result.close();
                } catch (Throwable t) {
                    // do nothing
                } finally {
                    try {
                        selectStmt.close();
                    } catch (Throwable t) {
                        // do nothing
                    }
                }
            }
        } finally {
            try {
                conn.close();
            } catch (Throwable t) {
                // do nothing
            }
        }
    }
} 
```

# android - Android overflow-y：自动滚动问题

> ID：12008807
> 
> 赞同：3
> 
> 时间：2012-08-17T15:35:28.823
> 
> 标签：android, scroll, overflow

我们正在开发一个 android 应用程序，并且我们有一些使用 overflow-y: scroll 的问题。因为我们有一个粘性页脚栏，所以我们的内容区域需要这个功能。

当我们在我们的内容 div 上启用 overflow-y: scroll 时，滚动不流畅并且非常难看。有时内容元素的底部也会有很多空白。

我们如何解决这个问题？

谢谢

# json - #3503 尝试通过 JSSDK 发布自定义操作时出错

> ID：12008819
> 
> 赞同：5
> 
> 时间：2012-08-17T15:36:06.347
> 
> 标签：json, facebook-javascript-sdk, facebook-opengraph

我正在尝试找出发布包含[用户生成的照片](https://developers.facebook.com/docs/opengraph/usergeneratedphotos/)的自定义打开图形操作所需的内容。我已经通过了审批流程，目前正在使用 JSSDK 进行测试。我有以下似乎有效的代码：

```
FB.api('/me/cheezburger-app:create', 'post', {
    meme:'http://cheezburger.com/6459677184'
}, function(response){
    console.log(response);
}); 
```

我的理解是，要将其发布为用户生成的照片，我需要做的就是包含一个包含如下对象数组的图像属性：

```
FB.api('/me/cheezburger-app:create', 'post', {
    meme:'http://cheezburger.com/6509097984',
    image:[{user_generated:true, url:'https://i.chzbgr.com/completestore/12/8/13/c9Smb0ba2EGTLepkCgEp2g2.jpg'}]
}, function(response){
    console.log(response);
}); 
```

可悲的是，这会返回以下错误：

```
{"error":{"message":"(#3503) \"[{\"user_generated\":true,\"url\":\"https://i.chzbgr.com/completestore/12/8/13/c9Smb0ba2EGTLepkCgEp2g2.jpg\"}]\" is an invalid value for property \"image:url\" with type \"URL\"","type":"OAuthException","code":3503}} 
```

我能够使用图形 api 资源管理器成功获取要发布的操作，但它没有使用 javascript 对象和 jquery。我假设我在传递额外参数的方式上做错了。但我就是想不通是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T14:30:48.287

我还没有尝试过，但我的猜测（因为它在文档中没有明确描述）是你必须提供一个包含 JSON 编码数据的*字符串值*，就像在其他类似情况下一样。

```
image: '[{"user_generated":"true","url":"https:\/\/i.chzbgr.com\/completestore\/12\/8\/13\/c9Smb0ba2EGTLepkCgEp2g2.jpg"}]' 
```

# bash - 使用 bash 将 plist 写入 sparsebundle

> ID：12008822
> 
> 赞同：1
> 
> 时间：2012-08-17T15:36:13.330
> 
> 标签：bash, plist, timemachine

我正在尝试编写 Time Machine 备份脚本。一切都在自己工作。sparsebundle 已创建，但 plist 文件未保存到其中。我尝试使用相同的代码并保存在其他地方，它工作得很好。任何想法为什么它不会写入plist？

```
#!/bin/bash

#Set Time Machine Location
loc="8437"
echo "$loc \$loc done"

#Find Hostname
hostname=`hostname -s`
echo "$hostname \$hostname done"

#Find MAC Address
mac1=`ifconfig en0 | grep ether | tr -d ":" | awk {'print $2'}`
mac2=`ifconfig en0 | grep ether | awk {'print $2'}`
echo "$mac1 \$mac1 done"
echo "$mac2 \$mac2 done"

#Create a folder based on $loc
mkdir -p /Volumes/$loc
echo "mkdir $loc done"

#Mount Time Machine Share
mount_afp afp://timemachine:doctorwho@$loc.lbox.com/$loc /Volumes/$loc
echo "mounted share"

#Look for Time Machine Sparsebundle if it doesn't exist create it
if [[ ! -d /Volumes/$loc/"$hostname"_"$mac".sparsebundle ]]; then
    hdiutil create -size 300g -type SPARSEBUNDLE -fs HFS+J -volname "Time Machine Backups" /Volumes/$loc/"$hostname"_"$mac1"
fi
echo "ran hdiutil"

UUID=`system_profiler | grep 'Hardware UUID' | awk '{print $3}'`
echo "found $UUID \$UUID"

echo -n "Generating property list file with uuid $UUID and mac $mac2 ... "

echo '<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
<key>com.apple.backupd.HostUUID</key>
<string>'$UUID'</string>
</dict>
</plist>' > /Volumes/$loc/$hostname"_"$mac1".sparsebundle"/com.apple.TimeMachine.MachineID.plist
open .

echo "done!" 
```

# php - Twitter API 和 OAuth - PHP

> ID：12008823
> 
> 赞同：0
> 
> 时间：2012-08-17T15:36:42.660
> 
> 标签：php, curl, twitter, oauth

我已经阅读了有关使用 API 的文档，但我不太确定如何将 OAuth 合并到我当前的 API 调用中。现在，我只是用...

```
file_put_contents("my_url"); 
```

...获取 JSON。有没有办法将 OAuth 凭据添加到该调用中，或者我是否必须切换到使用 curl 或其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:38:48.837

[我建议使用图书馆，这里](https://dev.twitter.com/docs/twitter-libraries#php)列出了很多好的图书馆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T07:08:52.263

根据使用情况，有时您不需要使用 OAuth 和官方 Twitter API，所以这里是另一个您不会在他们的列表中找到的库 :) [https://github.com/fbparis/TweetFuck](https://github.com/fbparis/TweetFuck)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-03T15:09:39.363

我的问题的答案是使用[stream_context_create](http://php.net/manual/en/function.stream-context-create.php)作为 file_get_contents 的附加参数，因为 OAuth 参数在请求标头中传递。

```
$opts = array(
'http'=>array(
'method'=>"GET",
'header'=>"Accept-language: en\r\n" .
          "Cookie: foo=bar\r\n" .
          "OAuth-Token: xyz\r\n"
 )
);

file_get_content('my url',stream_context_create($opts)); 
```

上面不是一个确切的例子，因为它依赖于上下文。但该`stream_context_create()`功能是您在使用`file_get_contents()`.

# css - WordPress页脚和嵌套标签

> ID：12008824
> 
> 赞同：0
> 
> 时间：2012-08-17T15:36:44.987
> 
> 标签：css, wordpress

我正在为一个朋友开发一个由 WordPress 驱动的小型网站，并且在页脚方面遇到了一些 CSS 问题。视口在容器标签（对于属性）中被视为 100% `height`，而不是在正文标签中。另外，我遇​​到了一个奇怪的问题，`a`即在标题中正确关闭的标签通过站点的其余部分在每个嵌套元素中吐出。对可能导致这种情况的任何见解？

该网站可以在这里查看：[www.dontyouwantto.com](http://www.dontyouwantto.com/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:56:46.680

**从wrap**元素中删除`height: 100%`规则，并将其替换为. 这应该可以使容器“包含”您的浮动元素。**`overflow: auto;`**

 **请注意，您还需要删除**容器**元素的`height`and`min-height`规则。一般来说，CSS 中的 100% 高度样式策略是损坏/易碎的，不推荐使用。**

# java - 循环停止运行java

> ID：12008827
> 
> 赞同：4
> 
> 时间：2012-08-17T15:37:08.433
> 
> 标签：java

对于下面的代码，它会在“n”达到 100,000 左右时停止运行。我需要它运行到 100 万。我不知道哪里出了问题，我还在学习 Java，所以代码中也可能存在简单的错误。

```
 public class Problem14{
public static void main(String[] args) {
    int chainLength;
    int longestChain = 0;
    int startingNumber = 0;
    for(int n =2; n<=1000000; n++)
    {
        chainLength = getChain(n);
        if(chainLength > longestChain)
        {
            System.out.println("chainLength: "+chainLength+" start: "+n);
            longestChain = chainLength;
            startingNumber = n;
        }
    }

    System.out.println("longest:"+longestChain +" "+"start:"+startingNumber);
}
public static int getChain(int y)
{
    int count = 0;
    while(y != 1)
    {
        if((y%2) == 0)
        {
            y = y/2;
        }
        else{
            y = (3*y) + 1;
        }
        count = count + 1;
    }

    return count;   
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T15:39:24.147

请使用`long`作为`data type` **代替** `int`

我希望这一点曝光，**这个数字确实高于**1000000，所以变量`y`需要`long`保持它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T15:46:36.563

这是**y**的数据类型。它应该很**长**。否则它会环绕到 -20 亿。

我以为我认识到了这一点——这是欧拉问题 14。我自己做过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T15:49:10.930

getChain() 方法导致问题变为负数，然后它永远挂在循环中。

# jquery - 桌子分拣机-斑马剥离

> ID：12008828
> 
> 赞同：1
> 
> 时间：2012-08-17T15:37:12.240
> 
> 标签：jquery, jquery-plugins, tablesorter, zebra-striping

我正在使用这个带斑马剥离的桌子分拣机。我正在使用下拉菜单选项进行排序。我有两个问题。

1）我有灰色和白色交替的行。但我有一些特殊的行总是灰色的。

假设如果是正常情况，我将有灰色、白色、灰色顺序。

现在假设上面的白色行是我正在谈论的特殊行。那么它将是灰色的。所以现在我们有三行灰色而不是灰色白色灰色。

有什么办法斑马小部件可以智能地注意到前一个是特殊行（总是灰色），它应该使当前行为白色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:02:22.257

考虑以下代码（[http://jsfiddle.net/cqN5W/](http://jsfiddle.net/cqN5W/)）：

```
var tables = document.getElementsByTagName("table");
var i;
for (i in tables) {
    if (tables.hasOwnProperty(i) && typeof tables[i] === "object") {
        var rows = tables[i].getElementsByTagName("tr");
        var counter = 0;
        var j;
        for (j in rows) {
            if (rows.hasOwnProperty(j)) {
                if (rows[j].className.indexOf("gray") === -1) {
                    counter++;
                }
                if (counter % 2) {
                    rows[j].className += " gray";
                }
            }
        }
    }
} 
```

它将记住哪些行已被明确标记为“灰色”，并将这些行纳入其着色中。

# java - 向 Java 添加标题和文本字段

> ID：12008830
> 
> 赞同：1
> 
> 时间：2012-08-17T15:37:14.937
> 
> 标签：java, swing, user-interface, paint

我有一个小程序已经启动了多个菜单项。

单击一个项目时，我希望在框架上显示一些内容，当单击另一个项目时，第一个项目消失，第二个出现。

我可以打印到控制台，但似乎无法打印到框架。

任何建议，将不胜感激：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class melco extends JFrame{

public static void main(String[] args){
    JFrame frame = new JFrame("Salesman Resources");
    frame.setVisible(true);
    frame.setSize(1000,800);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JMenuBar menubar = new JMenuBar();
    frame.setJMenuBar(menubar);

    JMenu file = new JMenu("File");
    menubar.add(file);
    JMenuItem exit = new JMenuItem("Exit");
    file.add(exit);

    JMenu orders = new JMenu("Orders");
    menubar.add(orders);
    JMenuItem bookedorders = new JMenuItem("Booked Orders");
    orders.add(bookedorders);
    JMenuItem backorders = new JMenuItem("BackOrders");
    orders.add(backorders);

    JMenu customers = new JMenu("Customers");
    menubar.add(customers);
    JMenuItem customersales = new JMenuItem("Customer Sales");
    customers.add(customersales);
    JMenuItem customeritems = new JMenuItem("Customer Items");
    customers.add(customeritems);
    JMenuItem customerprices = new JMenuItem("Customer Prices");
    customers.add(customerprices);
    JMenuItem customerlistings = new JMenuItem("Customer Listings");
    customers.add(customerlistings);

    JMenu inv = new JMenu("INV");
    menubar.add(inv);
    JMenuItem surplusinv = new JMenuItem("Surplus Inv");
    inv.add(surplusinv);
    JMenuItem stockinv = new JMenuItem("Stock Inv");
    inv.add(stockinv);

    JMenu search = new JMenu("Searh");
    menubar.add(search);
    JMenuItem itemsearch = new JMenuItem("Item Search");
    search.add(itemsearch);
    JMenuItem customersearch = new JMenuItem("Customer Search");
    search.add(customersearch);

    JMenu menulostsales = new JMenu("Lost Sales");
    menubar.add(menulostsales);
    JMenuItem lostsales = new JMenuItem("Lost Sales");
    menulostsales.add(lostsales);

    JMenu menumarginadvisor = new JMenu("Margin Advisor");
    menubar.add(menumarginadvisor);
    JMenuItem marginadvisor = new JMenuItem("Margin Advisor");
    menumarginadvisor.add(marginadvisor);

    JMenu menumakeandhold = new JMenu("Make and Hold");
    menubar.add(menumakeandhold);
    JMenuItem makeandhold = new JMenuItem("Make and Hold");

    menumakeandhold.add(makeandhold);

    makeandhold.addActionListener(
        new ActionListener(){
            public void actionPerformed(ActionEvent e)
            {
                System.out.println("Make and Hold is pressed");
                System.out.println("Hello World");                  
// This is Make and Hold Area

            }
        }
    );          

    class exitaction implements ActionListener {
        public void actionPerformed (ActionEvent e){
        System.exit(0);
        }
    }
        exit.addActionListener(new exitaction());

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:42:44.300

> 我可以打印到控制台，但似乎无法打印到框架。

你到底是什么意思？

如果要在 Frame 上设置标题，可以使用 setTitle：

```
frame.setTitle("a title"); 
```

否则，如果你想添加一些文本，你至少要向你的 JFrame 添加一些组件。看看[JLabel](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JLabel.html)：

```
JLabel label = new JLabel();
frame.getContentPane().add(label); 
```

当您需要更改文本时：

```
label.setText("some text"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T15:46:41.023

*   除了让它处理 GUI 之外，永远不要将 EDT（事件调度程序线程）用于其他事情。`main()` **Java Gui 中的方法在将 GUI 的构造调度到 Event Dispatcher 线程后退出。所以它是处理它的 EDT。**

**例如：**

```
public static void main(String[] args){

    EventQueue.invokeLater(new Runnable(){

         public void run(){

             myframe.setVisible(true);

           } 
      }
  } 
```

*   您需要类似的东西`JLable`来添加**Title**之类的东西。

*   您可以添加一个`JPanel`，`JFrame`然后添加一个`JTextField`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T16:06:06.127

您无法打印到框架，因为框架没有打印方法。如果您想直接将文本添加到框架中，您应该绘制它。这需要`paint`通过以下技术覆盖方法

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class melco extends JFrame{

  String str;
  int x = 100, y = 100;

  public melco(String title){
    super(title);
  }

  void print(String s){
    str = s;
    repaint();
  }

  public void paint(Graphics g){
    super.paint(g);
    if (str != null)
      g.drawString(str, x, y);
  }
  public static void main(String[] args){
    final melco frame = new melco("Salesman Resources");
    frame.setVisible(true);
    frame.setSize(1000,800);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JMenuBar menubar = new JMenuBar();
    frame.setJMenuBar(menubar);

    JMenu file = new JMenu("File");
    menubar.add(file);
    JMenuItem exit = new JMenuItem("Exit");
    file.add(exit);

    JMenu orders = new JMenu("Orders");
    menubar.add(orders);
    JMenuItem bookedorders = new JMenuItem("Booked Orders");
    orders.add(bookedorders);
    JMenuItem backorders = new JMenuItem("BackOrders");
    orders.add(backorders);

    JMenu customers = new JMenu("Customers");
    menubar.add(customers);
    JMenuItem customersales = new JMenuItem("Customer Sales");
    customers.add(customersales);
    JMenuItem customeritems = new JMenuItem("Customer Items");
    customers.add(customeritems);
    JMenuItem customerprices = new JMenuItem("Customer Prices");
    customers.add(customerprices);
    JMenuItem customerlistings = new JMenuItem("Customer Listings");
    customers.add(customerlistings);

    JMenu inv = new JMenu("INV");
    menubar.add(inv);
    JMenuItem surplusinv = new JMenuItem("Surplus Inv");
    inv.add(surplusinv);
    JMenuItem stockinv = new JMenuItem("Stock Inv");
    inv.add(stockinv);

    JMenu search = new JMenu("Searh");
    menubar.add(search);
    JMenuItem itemsearch = new JMenuItem("Item Search");
    search.add(itemsearch);
    JMenuItem customersearch = new JMenuItem("Customer Search");
    search.add(customersearch);

    JMenu menulostsales = new JMenu("Lost Sales");
    menubar.add(menulostsales);
    JMenuItem lostsales = new JMenuItem("Lost Sales");
    menulostsales.add(lostsales);

    JMenu menumarginadvisor = new JMenu("Margin Advisor");
    menubar.add(menumarginadvisor);
    JMenuItem marginadvisor = new JMenuItem("Margin Advisor");
    menumarginadvisor.add(marginadvisor);

    JMenu menumakeandhold = new JMenu("Make and Hold");
    menubar.add(menumakeandhold);
    JMenuItem makeandhold = new JMenuItem("Make and Hold");

    menumakeandhold.add(makeandhold);

    makeandhold.addActionListener(
      new ActionListener(){
        public void actionPerformed(ActionEvent e)
        {
          System.out.println("Make and Hold is pressed");
          frame.print("Make and Hold is pressed");
          System.out.println("Hello World");
          frame.print("Hello World");
// This is Make and Hold Area

        }
      }
    );

    class exitaction implements ActionListener {
      public void actionPerformed (ActionEvent e){
        System.exit(0);
      }
    }
    exit.addActionListener(new exitaction());

  }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T15:41:26.750

你不打印到一个框架。也许您想添加一个 JTextArea 并将数据附加到它？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T15:42:21.030

好的，所以你需要在框架上显示一些东西，比如`JLabel`??

```
frame.setLayout(new BorderLayout());
JLabel lblMessage = new JLabel(); // You'll probably need to declare this as final
frame.add(lblMessage); 
```

然后在你的动作监听器中可以做类似的事情

```
public void actionPerformed (ActionEvent e){
    label.setText("This is a message from the menu item");
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-17T15:41:28.700

为什么不在 JMenuItems 上添加 MouseListener？您可以将最近的“消息”引用保存为成员变量，并在另一个 MouseListener 被触发时将其从 JFrame 中删除。

# php - 从贝宝返回后会话被销毁

> ID：12008831
> 
> 赞同：1
> 
> 时间：2012-08-17T15:37:32.070
> 
> 标签：php, session, paypal

我已经将贝宝定期订阅与我的网站集成在一起。我在成功交易后设置了返回网址。但是一旦我从贝宝重定向，我的会话值就被破坏了，它在该页面上也没有返回任何内容。我无法得到响应（交易 ID、状态等）..任何人都可以指示我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T03:03:51.427

检查您的回复是否返回到正确的 URL。
在某些服务器上，www.site.com 被认为与 site.com 不同（会话方面）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T16:07:47.463

使用 PayPal，您必须单独设置一些东西来监听来自 PayPal 的 HTTP 请求——当 PayPal 将客户发送回返回 URL 时，您需要的数据不会被返回。您必须设置一个通知 URL，它与返回 URL 完全分开。

我最近将 PayPal 与 CodeIgniter 框架一起使用，并设置了一个专用于监听 PayPal 的控制器。在提交表单中，我为表单定义了一个参数，其中包含客户的 ID 以及其他一些所需的详细信息，当他们向我指定的通知 URL 发出 HTTP 请求时，PayPal 会包含此参数。然后，当监听 PayPal 的控制器收到请求时，它会通过 POST 将请求发送回 PayPal 以向他们确认。

恕我直言，PayPal 文档并不是那么好，尤其是在定期订阅方面。

# jquery - JQuery / AJAX 文件上传触发一次

> ID：12008834
> 
> 赞同：0
> 
> 时间：2012-08-17T15:37:48.370
> 
> 标签：jquery, ajax, codeigniter, function

我有以下功能：

```
$('#userfile').change(function() {
    $.ajaxFileUpload({
        url: 'control/upload/go',
        secureuri: false,
        fileElementId: 'userfile',
        dataType: 'json',
        success: function(data, status) {
            if(data.status != 'error') {
                $('.input_response').val(data.filename);
            }
            $('.response').text(data.msg);
        }
    });
}); 
```

问题是如果没有完整的页面刷新，它不会多次触发。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T11:40:26.340

使用 $(document).on() 修复；- [http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:54:49.203

请尝试使用以下代码：

```
jQuery('#userfile').live('change', function()
{

jQuery.ajaxFileUpload({
        url: 'control/upload/go',
        secureuri: false,
        fileElementId: 'userfile',
        dataType: 'json',
        success: function(data, status) {
            if(data.status != 'error') {
                jQuery('.input_response').val(data.filename);
            }
            jQuery('.response').text(data.msg);
        }
    });
}); 
```

# powershell - 无法从脚本导入 powershell 模块

> ID：12008835
> 
> 赞同：0
> 
> 时间：2012-08-17T15:37:49.133
> 
> 标签：powershell, module

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T16:13:04.997

模块必须是`.psm1`文件或`.psd1`清单文件（或 dll）。A`.ps1`没有资格作为模块，它“只是”一个脚本。

# sql - SELECT * FROM tableA, tableB WHERE 条件 [+]

> ID：12008838
> 
> 赞同：0
> 
> 时间：2012-08-17T15:38:07.340
> 
> 标签：sql, oracle, outer-join, full-outer-join

我有以下查询

```
SELECT * 
FROM tableA, tableB
WHERE Conditions [+] 
```

这个关键字Condition[+]代表什么？此查询如何作为外连接？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T15:46:10.270

那是旧的 Oracle Join 语法。

```
SELECT * 
FROM tableA, tableB
WHERE Conditions [+] -- this should be tableA (+) = tableB 
```

符号的位置`+`表示`JOIN`语法。

如果您查询的是：

```
SELECT * 
FROM tableA, tableB
WHERE tableA.id (+) = tableB.Id 
```

然后它会显示 a`RIGHT OUTER JOIN` 所以等价的是：

```
SELECT * 
FROM tableA
RIGHT OUTER JOIN tableB
   ON tableB.id = tableA.Id 
```

如果`+`标志在另一边，那么它将是`LEFT OUTER JOIN`

```
SELECT * 
FROM tableA, tableB
WHERE tableA.id  = tableB.Id (+) 
```

相当于

```
SELECT * 
FROM tableA
LEFT OUTER JOIN tableB
   ON tableA.id = tableB.Id 
```

不过，我建议使用标准连接语法。

如果您不指定`+`符号，那么它将被解释为`INNER JOIN`

```
SELECT * 
FROM tableA, tableB
WHERE tableA = tableB 
```

它的等价物是：

```
SELECT * 
FROM tableA
INNER JOIN tableB
    ON tableA.id = tableB.id 
```

A`FULL OUTER JOIN`将使用两个`SELECT`语句和 a编写`UNION`：

```
SELECT * 
FROM tableA, tableB
WHERE tableA.id  = tableB.Id (+)
UNION
SELECT * 
FROM tableA, tableB
WHERE tableA.id (+) = tableB.Id 
```

等效的是：

```
SELECT * 
FROM tableA
FULL OUTER JOIN tableB
    ON tableA.id = tableB.id 
```

这是一个解释了很多这些的教程：

[旧的外部连接语法](http://etutorials.org/SQL/Mastering+Oracle+SQL/Appendix+A.+Oracles+Old+Join+Syntax/A.2+Old+Outer+Join+Syntax/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T15:40:58.367

它的行为方式并不重要。您应该使用外部连接的标准语法：

```
select *
from tableA left outer join
     tableB
     on . . . 
```

"(+)" 语法是 Oracle 在标准语法之前引入的，它已经非常过时了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T15:40:33.377

这里的“条件”仅表示您用于过滤所有这些数据的内容。

就像这里的一个例子：

```
SELECT * 
FROM tableA, tableB
WHERE Name like '%Bob%' 
```

将返回内部任何地方都有“Bob”的名称。

关于外连接，实际上你会在 FROM 子句中使用它：

所以也许

```
SELECT * 
FROM tableA ta 
     OUTER JOIN tableB tb
     ON ta.name = tb.name
WHERE ta.age <> 10 
```

顺便说一下，这里是可选的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T15:42:57.743

我讨厌只是复制和粘贴答案，但是如果您进行一些搜索，就可以[很容易地找到这种东西...](http://oreilly.com/catalog/orsqlpluspr2/chapter/ch01.html)

> 外连接返回一个表的行，即使另一个表中没有匹配的行。通过在 WHERE 子句中可选表中的列名后面的括号中放置一个加号 (+)，您可以在 Oracle 中指定一个外连接。例如：
> 
> ```
> SELECT ut.table_name, uc.constraint_name 
> FROM user_tables ut, user_constraints uc 
> WHERE ut.table_name = uc.table_name(+); 
> ```
> 
> uc.table_name 之后的 (+) 使 user_constraint 表是可选的。该查询返回所有表，并且在没有相应约束记录的情况下，Oracle 在约束名称列中提供空值。

# javascript - Javascript 可用作书签，但不能用作 onclick 链接

> ID：12008841
> 
> 赞同：1
> 
> 时间：2012-08-17T15:38:11.847
> 
> 标签：javascript, onclick

我使用以下代码允许用户向浏览器添加书签，这非常有效，但如果我尝试从页面上的链接实际触发代码，它不会。

我需要从代码中添加/减去一些不同的东西吗？

这是我使用的：

```
javascript:(function(d){
var%20modal=document.createElement('iframe');
modal.setAttribute('src','http://url.com/bm.html?
url='+encodeURIComponent(window.location.href)+'&page_title='+document.title);
modal.setAttribute('scrolling','no');
modal.setAttribute('name','my_modal');
modal.className='modal';
document.body.appendChild(modal);
var%20c=document.createElement('link');
c.type='text/css';
c.rel='stylesheet';
c.href='//iframe.css';
document.body.appendChild(c);}(document)); 
```

我尝试了以下但不起作用：

```
<a href="#" onclick="javascript:(function(d){var%20modal=document.createElement('iframe');modal.setAttribute('src','http://url.com/bm.html?url='+encodeURIComponent(window.location.href)+'&page_title='+document.title);modal.setAttribute('scrolling','no');modal.setAttribute('name','my_modal');modal.className='modal';document.body.appendChild(modal);var%20c=document.createElement('link');c.type='text/css';c.rel='stylesheet';c.href='//iframe.css';document.body.appendChild(c);}(document));">test</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:49:08.357

你必须：

*   替换`%20`为`space`
*   消除`javascript:`

你也可以使用这个函数调用技巧`!function(`......

试试这个：

```
<a href="#" onclick="!function(d){var modal=document.createElement('iframe');modal.setAttribute('src','http://url.com/bm.html?url='+encodeURIComponent(window.location.href)+'&page_title='+document.title);modal.setAttribute('scrolling','no');modal.setAttribute('name','my_modal');modal.className='modal';document.body.appendChild(modal);var c=document.createElement('link');c.type='text/css';c.rel='stylesheet';c.href='//iframe.css';document.body.appendChild(c);}(document)">test</a> 
```

# objective-c - Objective-c 枚举类

> ID：12008842
> 
> 赞同：3
> 
> 时间：2012-08-17T15:38:19.430
> 
> 标签：objective-c, class, enums

我正在尝试在objective-c中创建一个枚举类。下面是我已经得到的。

```
#import <Foundation/Foundation.h>

typedef enum  {
    Car,
    Bike,
    Boat
} Vehicle;

@interface ModelVehicle : NSObject {

    Vehicle vehicle;

}

@property (nonatomic) Vehicle vehicle;

@end 
```

现在我可以从另一个类访问枚举，但只能使用以下代码。为什么我不能使用枚举所在的类名访问它，例如 ModelVehicle.Car？

```
Vehicle *hi = Car; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T15:41:25.673

在 Objective-C 中，枚举不是类的一部分，因此您可以直接按名称引用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:41:13.457

这里的枚举位不是目标 c 类的一部分。它只是在与您的目标 c 类相同的标头中声明 c-enum

# javascript - 用 $(function 等启动 javascript 代码

> ID：12008843
> 
> 赞同：29
> 
> 时间：2012-08-17T15:38:23.563
> 
> 标签：javascript, jquery, backbone.js

我正在研究来自[http://todomvc.com/](http://todomvc.com/)的 Backbone 和 todo 示例应用程序， 我注意到有 3 种方法可以在文件中启动代码：

```
$(function() {
 // code here
});

$(function( $ ) {
 // code here
});

(function() {
 // code here
}()); 
```

我不明白这些差异以及何时应该使用其中一个。

我还看到一些人使用它来启动他们的代码：

```
$(document).ready(function(){
  // code here
}); 
```

从我所见，这是完整的写作方式，对吗？

以更一般的方式，我是否应该始终将我的 javascript 代码包含在每个文件中的类似内容中？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-17T15:41:55.800

1.  `$(document).ready(function(){})`确保您的代码在准备好的 DOM 上运行，以便您可以访问 DOM。[您可以在jQuery 的文档](http://api.jquery.com/ready/)中阅读更多相关信息。

2.  `$(function(){})`只是#1 的别名。此处的任何代码都将等待 DOM 准备就绪（[请参阅文档](http://api.jquery.com/ready/)）。

3.  `$(function($){})`等效于#1 和#2，只有你在[本地范围内](http://skilldrick.co.uk/2011/04/closures-explained-with-javascript/)获得对 jQuery 的干净引用（请参阅下面的注释）。你同样可以传入`$`#1 中的函数，它会做同样的事情（创建一个对 jQuery 的本地引用）。

4.  `(function(){}())`只是一个[自执行匿名函数](https://stackoverflow.com/questions/592396/what-is-the-purpose-of-a-self-executing-function-in-javascript)，用于创建一个新的闭包。

请注意，这些都不是 Backbone 特有的。前 3 个是特定于 jQuery 的，而 #4 只是 vanilla JavaScript。

* * *

**注意：**要了解上面 #3 中发生了什么，请记住这`$`是`jQuery`. 然而，jQuery 并不是唯一使用该`$`变量的库。由于`$`可能会被其他人覆盖，因此您要确保在您的范围内，`$`将始终引用 jQuery - 因此是`$`参数。

* * *

最后，它基本上归结为以下2个选项：

1.  如果你的 JavaScript 被加载到 中`head`，你必须等待文件准备好，所以使用这个：

    ```
    jQuery(function($) {
        // Your code goes here.
        // Use the $ in peace...
    }); 
    ```

2.  如果您将 JavaScript 加载到文档的底部（在结束 body 标记之前 -[您绝对应该这样做](http://developer.yahoo.com/performance/rules.html/#js_bottom)），则无需等待文档准备好（因为在解析器到达您的脚本），一个[SEAF](https://stackoverflow.com/questions/592396/what-is-the-purpose-of-a-self-executing-function-in-javascript)（又名[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)）就足够了：

    ```
    (function($) {
        // Use the $ in peace...
    }(jQuery)); 
    ```

* * *

**PS**要更好地理解闭包和作用域，请参阅[**JS101: A Brief Lesson on Scope**](http://dailyjs.com/2012/07/23/js101-scope/)。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-17T15:43:53.207

我想通过意识到这一点开始是有意义的`$ = jQuery`。在阅读匿名函数中的命名空间时，下面的目的会更有意义。但本质上，您可以使用其中任何一个。如果他们正在使用多个库，并且希望另一个库使用它，那么他们会使用`jQuery()`而不是。`$()``$`

```
$(document).ready(function(){
    // Here we have jQuery(document) firing off the ready event
    // which executes once the DOM has been created in 
    // order to ensure that elements you are trying to manipulate exist.
});

​$(function () {
    // Short-hand version of $(document).ready(function () { });
}); 
```

[**有关 Document.ready() 的更多信息**](http://api.jquery.com/ready/)

将括号放在**`$`**括号内可确保**jQuery $ 别名**（您可以放心，它总是以这种方式表示 jQuery）。

```
$(function ($) { /* code here : $ always means jQuery now */ }); 
```

最后你有一个**IIFE（立即调用函数表达式）** - [IIFE 解释](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)

```
(function (myNameSpace, $) {
    // This is an anonymous function - it is ran instantly
    // Usually used for namespaces / etc
    // This creates a scope/wrapper/closure around everything inside of it
}(window.myNameSpace, jQuery)); 
```

顶部的 $（与底部的 jQuery 匹配）表示 $（美元符号）代表名称空间范围内的 jQuery。这样做是为了确保其他库不会与开发人员想要/希望使用的 $ 发生冲突。

```
(function (myNameSpace, $) {
    // Now because of all of this scope/wrapper/closure awesome...
    // you can create -INTERNAL- variables (sort of like Private variables from other langs) 
    // this variable cannot be accessed outside the namespace unless it is returned / exposed

    var internalVariable = '123'; // Internal

    // Even Internal functions!
    function privateFunction () {
        console.log('this is private!');
    }

    // --------------------------------------------------------
    // Public -method- of nameSpace exposing a private variable
    // Notice we're using the myNameSpace object we exposed at the top/bottom

    myNameSpace.nameSpaceMethod = function () {
        privateFunction(); // we can call the private function only inside of the namespace
        return internalVariable; // now we could get this variable
    };
}(window.myNameSpace, jQuery)); // notice these mirror the above arguments in the anon function 
```

[**有关匿名函数的更多信息**](http://helephant.com/2008/08/23/javascript-anonymous-functions/)

现在，如果我们在**namespace 之外**，我们可以看到这些内部/公共方法和变量是如何受到影响的：

```
// This will come up undefined
alert(internalVariable);

// This will trigger a -method- of the myNameSpace namespace - and alert "123"
// Showcasing how we access a Public method - which itself has access to the internal variable
// and exposes it to us!
alert(myNameSpace.nameSpaceMethod());
​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T15:42:27.633

这两个：

```
$(function() {
 // code here
});

$(document).ready(function(){
  // code here
}); 
```

直接等效，它们都是在文档加载时启动一些 jQuery 的方式。前者只是后者的较短版本。

这个：

```
(function() {
 // code here
}()); 
```

只是一个零参数的作用域函数，它会立即以零参数调用。

# html - .htaccess 删除 .html

> ID：12008847
> 
> 赞同：0
> 
> 时间：2012-08-17T15:38:27.267
> 
> 标签：html, .htaccess

我意识到还有另一篇关于如何删除 .html 的帖子，但它对我不起作用，所以我试图更好地理解这个过程是如何工作的。

我的托管服务有 fatcow。我从 fatcow 下载了 .htaccess 并下载了一个 .htm 文件。我通过记事本插入了这段代码。

```
 <IfModule mod_rewrite.c>

  Options +FollowSymLinks
  RewriteEngine On
  RewriteBase /

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/|#(.*))$
  RewriteRule ^(.*)$ $1/ [R=301,L]

  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME}\.html -f
  RewriteRule ^([^\.]+)/$ $1.html 

 </IfModule> 
```

我将文件保存为 .htaccess 并将其上传到 fatcow 上的根文件夹。它现在作为 .htaccess.txt 保存在我的根文件夹中

我在这不起作用的地方做错了什么？

更新：

我通过 FTP 客户端将 .htaccess.txt 重命名为 .htaccess。它现在显示在 .htaccess 中，但仍然没有从我的网址中删除 .html。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T15:39:44.297

它应该保存为`.htaccess`，而不是`.htaccess.txt`。

它可能以这种方式命名，因为您在 Windows 上创建了该文件。如果是这种情况，您有两种选择：

## 上传，然后重命名

文件上传到服务器后，您很可能可以将文件重命名为正确的名称。

## 重命名，然后上传

您可以通过在命令提示符中执行以下操作来重命名它：

```
cd C:\Directory\With\File\In\It
rename .htaccess.txt .htaccess 
```

一旦完成，它应该被`.htaccess`正确命名，并且可以上传。

# ruby-on-rails - BSON::InvalidDocument：无法将 User 类的对象序列化为 BSON

> ID：12008851
> 
> 赞同：0
> 
> 时间：2012-08-17T15:38:43.267
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid, ruby-on-rails-3.2

我有这些关系：

```
class User
  include Mongoid::Document
  has_many :orders, :class_name => 'Order', :inverse_of => :user
  has_many :sold_orders, :class_name => 'Order', :inverse_of => :seller
end

class Order
 include Mongoid::Document
 belongs_to :user, :class_name => 'User', :inverse_of => :orders
 belongs_to :seller, :class_name => 'User', :inverse_of => :sold_orders
end 
```

如果我想获得当前卖家的所有订单，我会在控制器中运行，例如：

```
def jobs
  @orders = Order.where(seller: current_user)
  p @orders
  respond_to do |format|
      format.html { render :layout => 'centered'}
    end
end 
```

我可以在我的日志控制台中看到：

```
#<Mongoid::Criteria
  selector: {:seller=>#<User _id: 500541f81d41c82f1b000037, _type: "User", created_at: 2012-07-17 10:44:08 UTC, ....more attributes>},
  options:  {},
  class:    Order,
  embedded: false> 
```

这是错误的，因为我有一个用户，但我想获得当前卖家的所有订单。

如何获取当前卖家的所有订单？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:18:08.783

这完全没问题。您在控制台中看到的是一个 Mongoid::Criteria 对象。Mongoid 非常懒惰地访问数据库，并且仅在绝对需要时才这样做。所以不要在这里访问数据库

```
 @orders = Order.where(seller: current_user) 
```

它只保留代理对象，并在您尝试对该数据执行某些操作时加载订单。因此，为了在控制台中获得您的订单，您可以这样做：

```
 p @orders.to_a 
```

而且，Mongoid 不支持`.where(seller: current_user)`。您需要根据关系的 id 创建查询，因此您应该像这样构建查询：

```
 @orders = Order.where(seller_id: current_user.id) 
```

另一件事是 - 你已经定义了关系，所以我会使用它们而不是自己创建查询，而不是

```
 @orders = Order.where(seller_id: current_user.id) 
```

您可以使用

```
 @orders = current_user.solo_orders 
```

如果您需要使用`seller`或`seller_id`

# java - 用于在段落中搜索特定行的正则表达式

> ID：12008857
> 
> 赞同：0
> 
> 时间：2012-08-17T15:39:07.043
> 
> 标签：java

我正在尝试搜索段落中的特定行。有人可以用正则表达式帮助我。

我需要在段落中搜索“无法扩展表格”：

> > > BasicData:RootContextID=3a88bfa0c11511e1915e9e572a3f5ee0,AuditTimestamp=1340883271834,ContextID=3a88bfa0c11511e1915e9e572a3f5ee0,AuditSchemaName=wMSession,AuditSchemaVersion=1,ServerID=wbrbwm7qi1:5555,SessionID=c8231fb0c11311e1872d8aebd5d052bf,SessionState=2,UserID=Default,SessionName=172.18.186.11,Rpcs=0, Age=621422,$$$AUDITPROCESS={MemData:DefaultJDBCConfig_1=4},ERRORINFO=java.sql.SQLException: [sag-cjdbc42-0000][Oracle JDBC Driver][Oracle]ORA-01653: 无法扩展表 WMIS712。 WMSESSION by 128 in tablespace WEBMDATA 2012-07-10 08:22:01 SAST [ISS.0095.0010E] AuditLogManager Runtime Exception: >>>BasicData:RootContextID=8faed230ca5711e1b0a6f6fdea974793,AuditTimestamp=1341901321940,ContextID=8faed230ca5711e1b0a6f6fdea974793,AuditSchemaName=wMSession,AuditSchemaVersion= 1,服务器ID=wbrbwm7qi1:5555,会话ID=8fac6130ca5711e1b0a3db011b193ad1,SessionState=2,UserID=Administrator,SessionName=system,Rpcs=0,Age=16<<< 发布日志条目 com.wm.app.audit.AuditException: [BAA.0002.0000] Wrapped Exception: com.wm.app.store .TSException：[BAT.0002.0000] 包装异常：com.wm.txn.TransactionException：[BAC.0002.0000] 包装异常：com.wm.txn.TransactionException：[BAF.0003.0072] BAF.0003.0072。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:42:28.747

如果您知道确切的文本，为什么不直接使用 String 的 indexOf？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:56:11.693

如果您只需要知道您的字符串是否存在，您可以使用`stringInstance.contains("our string")`.

但是，一个非常简单的正则表达式应该是`.*YOURTEXTHERE.*`-> .* 表示任何字符（0 或更多），然后是您的字符串，然后是任何字符（0 或更多）。

然而，这个正则表达式只是给你一个字符串是否存在的指示。事实上，该`contains(String)`方法可能是更好的选择。

此外，正如@thatidiotguy 已经说过的那样，如果您需要知道该字符串的确切位置，您可以使用 indexOf 或者如果您可能希望多次使用已编译的正则表达式模式的 Matcher 查找相同的字符串。

希望这可以帮助！:-)

# migration - 知道这个错误何时会出现在 Open Laszlo 中吗？

> ID：12008863
> 
> 赞同：2
> 
> 时间：2012-08-17T15:39:34.097
> 
> 标签：migration, openlaszlo, lzx

我目前正在将应用程序从 open laszlo 从 3.3 迁移到 5.0。我在其中一门课中遇到了这个错误。

```
line unknown: Error: A conflict exists with inherited definition $lzc$class_xxx.$datapath in namespace public, in line: var $classrootdepth;var $datapath;function $lzc$class__mjb ($0:LzNode? = null, $1:Object? = null, $2:Array? = null, $3:Boolean = false) { 
```

在那个特定的类中，我有数据路径标签，如果我删除它，那么我不会收到这个错误。

谁能告诉我为什么会发生这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T10:03:40.873

我设法使用此代码重现错误消息：

```
<canvas debug="true">

  <class name="c1" extends="node">
    <datapath />
  </class>

  <class name="c2" extends="c1">
    <datapath />
  </class>

</canvas> 
```

调查 JIRA，我看到它已经作为一个错误提交：[LPP-9747 - SWF10: Explicit <datapath> declarations in class definition导致编译器错误](http://jira.openlaszlo.org/jira/browse/LPP-9747)

似乎存在相对较多的错误或情况，其中编译器会吐出难以理解的错误消息或异常 - 特别是在将 3.x 或 4.0/4.1 应用程序升级到具有 SWF10+ 运行时支持的 OpenLaszlo 版本时。这是非常不幸的，因为它很容易给人一种编译器有问题的印象。

当您在 <c1> 和 <c2> 的实例中使用数据路径标记时，编译器不会报告任何错误消息，例如：

```
<canvas>

  <class name="c1" extends="node">
  </class>

  <class name="c2" extends="c1">
  </class>

  <c1>
    <datapath/>
    <c2>
      <datapath />
    </c2>
  </c1>

</canvas> 
```

# nhibernate - NHibernate - 从未映射的类中填充子实体

> ID：12008865
> 
> 赞同：1
> 
> 时间：2012-08-17T15:39:41.333
> 
> 标签：nhibernate, fluent-nhibernate

我有一个关于我编写的使用 NHibernate 调用过程的代码的问题，填充一个未映射的实体，然后获取一个子实体列表。

我给你举个例子。三个实体：**房屋、兴趣、用户**

```
class house
string name; string title; string description;
list<interest> users; 
```

我将**兴趣**用作房屋和用户之间关系的一个类，因为我有一些额外的属性，如排名、需要保存的评论。

```
class interest
house houseinterested;
user userinterested;
int ranking; string descriptions; 
```

和用户类

```
class user
string name 
```

因为我需要查询一个区域范围内的所有房屋，所以我正在对存储过程进行计算（发送纬度/经度），然后返回一个额外的属性**距离**，我需要在视图上显示该距离。

我不想将**距离**映射到表（因为我只是检索它，我从不存储该值），所以我创建了另一个类似于 house 但具有**距离**属性（houseview）的实体，我正在查询程序使用 CreateSQLQuery：

```
const string sql = "call imovel_within_area (:@orig_lat, :@orig_long, :@dist, :@take, :@skip, :@quartos, :@precomin, :@precomax)";
            var query = MvcApplication.Session.CreateSQLQuery(sql)
                .SetParameter("@dist", distancia)
                .SetParameter("@orig_lat", latitude) //-25.363882m
                .SetParameter("@orig_long", longitude) // 131.044922m
                .SetParameter("@take", resultados)
                .SetParameter("@skip", ((pagina-1 * resultados)))
                .SetParameter("@quartos", quartos.Value)
                .SetParameter("@precomin", precomin.Value)
                .SetParameter("@precomax", precomax.Value);
                query.SetResultTransformer(NHibernate.Transform.Transformers.AliasToBean(typeof(Core.Domain.houseview))); 
```

现在我想填写感兴趣的用户列表。

```
foreach (var housein houses.List<Core.Domain.houseview>())
            {
              house.Where(x => x.Id == house.Id).ToList().First().Interest =
              MvcApplication.Session.QueryOver<Core.Domain.House>()
              .Where(x => x.Id == imovel.Id).List().First().Interessados;
            } 
```

我从来不必从查询中返回未映射的列，所以我不太确定如何执行此操作，或者这在性能问题上是否可以接受。

我真的很感激一些建议！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T04:28:05.017

```
List<Core.Domain.houseview> houseviews = ...;

// load all wanted houses into session cache
MvcApplication.Session.QueryOver<Core.Domain.House>()
    .WhereRestrictionOn(x => x.Id).In(houseviews.Select(hv => hv.Id).Tolist())
    .Fetch(x => x.Interessados).Eager
    .List()

foreach (var view in houseviews)
{
    view.Interessados = Session.Get<house>(view.House.Id).Interessadoes;
} 
```

# html - 标题中的左，中，右

> ID：12008866
> 
> 赞同：0
> 
> 时间：2012-08-17T15:39:43.227
> 
> 标签：html, css, layout

我正在尝试在标题中创建左、中、右对齐...目标是：

1.  保存工具栏的顶级 DIV 应根据其内容调整大小。
2.  Left 和 Right div 具有固定大小，但中间应占用剩余空间。

我的例子：http: [//jsfiddle.net/WarrickF/bx3tw/](http://jsfiddle.net/WarrickF/bx3tw/)

有点作品，但是我的 CSS 真的很生疏，我无法完全理解如何以简单干净的方式去做。一旦我使用绝对位置方法，标题 div 就不再知道内容的大小。可以对具有搜索框的正确 div 进行成像。

有谁知道一个简单而干净的方法来做到这一点？

谢谢沃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:43:47.073

使左右 div 浮动，并省略中心 div 的宽度。

我已经更新了你的小提琴[http://jsfiddle.net/bx3tw/1/](http://jsfiddle.net/bx3tw/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:59:25.510

为了完整起见，您也可以使用绝对定位来完成此操作，如下所示：http: [//jsfiddle.net/bx3tw/4/](http://jsfiddle.net/bx3tw/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T15:49:56.337

是的，浮动 div，但我会给中心 div 侧边距。新小提琴[http://jsfiddle.net/bx3tw/2/](http://jsfiddle.net/bx3tw/2/)

# php - jSignature 图像导出到 PHP 电子邮件

> ID：12008871
> 
> 赞同：0
> 
> 时间：2012-08-17T15:40:11.070
> 
> 标签：php, javascript, svg, signature

我需要 jSignature 方面的帮助。我能够创建一个图像，然后将该图像写回页面。我无法工作（以及我最初探索这个插件的原因）是将图像导出到页面之外。我想获取图像数据并将其通过电子邮件发送出去，以便图像显示在电子邮件的正文中。如果尝试了很多方法，但没有任何效果。目前我的 js 看起来像这样：

```
var $sigDiv = $("#signature").jSignature();
      $('<input type="button" value="Reset">').bind('click', function(e){
        $sigDiv.jSignature('reset');
      }).appendTo($sigDiv); 
```

提交表单后，它看起来像这样：

```
var datapair = $sigDiv.jSignature("getData", "svg");
      var i = new Image();
      i.src = "data:" + datapair[0] + "," + datapair[1];
      $(i).appendTo($("#success")); 
```

我尝试在变量中获取该图像数据，并通过 AJAX 将其以数据字符串的形式发送到 PHP 邮件处理表单，执行如下操作：

```
<img src="<?php echo $_POST['signature']; ?>"/> 
```

或这个：

```
<object src="<?php echo $_POST['signature']; ?>"></object> 
```

我已经筋疲力尽地试图让它在发出的电子邮件中显示图像。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T16:18:47.587

耶！让它工作。如果我导出为图像并在图像上执行 encodeURIComponent(image) ，则 AJAX 调用不会破坏图像数据。现在像野兽一样工作。嘿感谢您的帮助阿比德。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:51:14.080

我不确定，但你看到下面的网址我认为这对你很有帮助

[https://github.com/brinley/jSignature/](https://github.com/brinley/jSignature/)

演示网址；-

[http://willowsystems.github.com/jSignature/#/demo/](http://willowsystems.github.com/jSignature/#/demo/)

jSignature 是一个 jQuery 插件，它简化了在浏览器窗口中创建签名捕获字段，允许用户使用鼠标、笔或手指绘制签名。

jSignature 将签名捕获为笔画的矢量轮廓。虽然 jSignature 也可以导出出色的位图 (PNG)，但提取签名的高度可扩展的笔画移动坐标（也称为矢量图像）允许签名渲染的更大灵活性。

额外的努力（通过平滑和压力模拟）使笔画在屏幕上看起来很漂亮，而这些是由签名者绘制的。

支持所有主要的桌面、平板电脑和手机浏览器。默认使用 HTML5 Canvas 元素。当浏览器不支持实际的 Canvas（Iinternet Explorer v.8 及更低版本）时，我们将使用基于 Flash 的 Canvas 元素模拟器 (FlashCanvas)。

实时 jSignature 仅呈现我们捕获的适合设备的“最漂亮”近似值。数据的捕获总是相同的——我们捕获尽可能多的运动坐标。笔画的渲染因浏览器的功能、设备的效率、屏幕大小而异。

捕获签名的屏幕表示的这种降级和增强是有目的的，以确保呈现不会影响捕获的响应性。例如，在慢速渲染设备（Android 浏览器、基于 FlashCanvas 的 Canvas 仿真）上，平滑提升了一个档次，以补偿捕获的笔画坐标中的大间隙 - 这是捕获设备效率低下的结果。在所有情况下，客户都会对图纸的响应能力和美观感到满意。

jSignature 可以很容易地将自己融入现有的风格站点。jSignature 自动检测包装元素上使用的颜色（文本颜色 = 笔颜色，背景 = 背景）并自动为“装饰”（签名线）选择一个令人愉悦的中间阴影。jSignature 可以很好地适应固定和可变宽度的网页设计，以及各种尺寸的屏幕（手机、平板电脑、电脑屏幕），并在父元素改变大小时自动重新缩放绘图区域和签名

# c# - StoreGeneratedPattern 不能与 DevArt 实体框架一起使用？

> ID：12008874
> 
> 赞同：3
> 
> 时间：2012-08-17T15:40:25.777
> 
> 标签：c#, oracle, entity-framework, devart, dotconnect

我编写了一个简单的测试程序，它将使用 DevArt dotConnect for Oracle v. 6.8.0.350 以直接模式访问 Oracle Express 上的默认 HR 模型：

```
using (var ctx = new HREntities())
{
    var locNew = new LOCATION();
    locNew.CITY = "Magdeburg";
    ctx.LOCATIONs.AddObject(locNew);
    ctx.SaveChanges();
    // will output 0; in database ID is generated
    Console.WriteLine(locNew.LOCATIONID);
} 
```

`LOCATION`如您所见，我正在向表中插入。这里我添加了一个触发器：

```
create or replace
trigger TRG_LOCATION_INS  
   before insert on "HR"."LOCATIONS" 
   for each row 
begin  
   if inserting then 
      select LOCATIONS_SEQ.nextval into :NEW."LOCATION_ID" from dual;       
   end if; 
end; 
```

最后一步是`StoreGeneratedPattern`在我的模型中设置为`Identity`（是的，我检查了它是否写入 XML）。

如果我运行测试应用程序，则会创建记录并且它有一个有效的新`LocationID`. 但在 EF 中，新 ID 不会到达。

为什么它不能识别生成的 ID？如果是，那是什么意思：[DevArt 博客](http://www.devart.com/blogs/dotconnect/index.php/set-identity-and-computed-properties-in-entity-framework-without-triggers.html#identity)

编辑：我现在在不同的场景中对其进行了测试：

1.  直接模式下的 devArt EntityModel
2.  带有 OracleClient 的 devArt EntityModel
3.  ADO.NET EntityModel 与 OracleClient

结果是一样的。`DSID`在 SaveChanged 上返回No。作为另一个结果，如果我写

```
ctx.Refresh(RefreshMode.ClientWins, log); 
```

一个 InvalidOperationException 会引发说，现在有键为“0”的实体是正确的但没有帮助:-(。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T08:47:19.057

如果您查看 .edmx 文件，您会看到定义了一个概念架构和一个存储架构。如果在设计器中更改 StoreGeneratedPattern，它只会在概念模式中更改，而不会在存储模式中更改，这确实是必要的。

StoreGeneratedPattern 在设计器中用于模型优先开发，如果您从模型生成数据库，则它没有效果。所以你必须在存储模式中手动插入属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T08:46:29.900

经过几次测试后，我再次查看了我的 edml 的 XML，我看到 StoreGeneratedPattern 没有到达 XML。我不知道发生了什么，因为在我最初写的帖子中，我检查了 XML。我第一次这样做时，属性就在那里。但是，对于那些对解决方案感兴趣的人，请看这里：[其他线程中的解决方案](https://stackoverflow.com/questions/7351260/oracle-entity-in-vs-entity-framework-doesnt-update-the-primary-key-in-code)

# windows-services - ConfigurationErrorsException：无法加载类型...因为它不是公共的

> ID：12008875
> 
> 赞同：2
> 
> 时间：2012-08-17T15:40:27.387
> 
> 标签：windows-services, app-config

我正在尝试访问 Windows 服务应用程序中 app.config 的自定义部分。

这就是我定义该部分的方式

```
<Configurations>
 <configSections>
   <section name="SectionName" type="ClassName, AssemblyName"/>
 </configSections>
 <SectionName>...</SectionName>
</Configurations> 
```

我收到以下错误

> 为以下内容创建配置节处理程序时出错`SectionName`：无法加载类型 ' `ClassName`, `AssemblyName`, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'，因为它不是公共的。

此错误的可能原因是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T15:50:33.777

尽管该类存在并且可以公开访问，但它缺少默认构造函数。
显然，默认构造函数将在解析配置时在内部被调用，因此对于配置部分中使用的此类类来说是必须的。

# models - 指定或更改 Tower 模型的 ID

> ID：12008881
> 
> 赞同：0
> 
> 时间：2012-08-17T15:40:46.203
> 
> 标签：models, towerjs

您不能再在 towerjs 的当前开发分支中设置特定的 id。

你知道有没有办法做到这一点？

我似乎无法做到：

```
data =
  id: "123456asdasd"
  name: "Foo"

App.User.create data, (err, resource) =>
  console.log resource.get("id")
  resource.set "id", data.id
  resource.save() # doesn't work 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:38:22.787

我找到了解决方案：

您可以像这样指定一个 ID：

```
data =
  id: "123456asd"
  name: "Foo"

record = App.User.build data
record.set "_id", data.id
record.save =>
  console.log record.get("id") 
```

# web-services - Groovy 在 Map 以外的 Structure 中捕获响应标头

> ID：12008882
> 
> 赞同：0
> 
> 时间：2012-08-17T15:40:53.983
> 
> 标签：web-services, grails, groovy, webclient, soapui

我正在尝试通过 Groovy 客户端捕获 Web 服务响应，我必须检查重复的标头键作为响应。我正在使用 messageExchage.responseHeaders() 捕获响应标头，但由于它返回映射，它只给我每个键一次，即使它在响应中出现两次。有没有办法在数组或其他数据结构中得到这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T17:19:49.927

您如何访问网络服务？如果您使用[groovy HttpBuilder](http://groovy.codehaus.org/HTTP+Builder)，您可以遍历标头，包括重复键：

```
new HTTPBuilder('http://webservice/').with {
    request(Method.GET) {
        uri.path = '/'
        response.success = { resp ->
            assert resp.status == 200
            resp.headers.each {
                println "${it.name}: ${it.value}"
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:39:55.643

```
rawResponseAsString = new String( messageExchange.getRawResponseData())
log.info rawResponseAsString 
```

# google-apps-script - ContentService 支持哪些格式？

> ID：12008889
> 
> 赞同：0
> 
> 时间：2012-08-17T15:41:28.013
> 
> 标签：google-apps-script

[ContentService](https://developers.google.com/apps-script/class_contentservice)的文档提供了一些示例格式。我认为 pdf 不在其中的原因是因为它不受支持。请确认。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:15:01.443

它支持 JSON、RSS、纯文本、ATOM、XML。

# asp.net-mvc - 在链接文本中使用 html 元素创建 ajax actionlink

> ID：12008899
> 
> 赞同：9
> 
> 时间：2012-08-17T15:42:25.280
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, asp.net-ajax

我想将链接转换为 ajax 操作链接。我不知道如何在链接文本中显示 html 元素？

这是原始链接：

```
<a href="#onpageanchor" id="myId" class="myClass" title="My Title."><i class="icon"></i>Click Me</a> 
```

这是ajax操作链接：

```
@Ajax.ActionLink("<i class='icon'></i>Click Me", "MyActionMethod", new { id = "testId" },
                        new AjaxOptions
                        {
                            UpdateTargetId = "mytargetid"
                        }, new
                        {
                            id = "myId",
                            @class = "myClass",
                            title="My Title."
                        }) 
```

呈现的链接文本是实际的字符串：`"<i class='icon'></i>Click Me</a>"`

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-06-07T11:56:51.193

晚了一年多，但这是我用的。希望它可以帮助别人。

```
@Ajax.RawActionLink(string.Format("<i class='icon'></i>Click Me"), "ActionResultName", null, new { item.Variable}, new AjaxOptions { HttpMethod = "Post", InsertionMode = InsertionMode.Replace, UpdateTargetId = "taget-div", LoadingElementId = "target-div" }, new { @class = "class" }) 
```

然后帮手...

```
 public static MvcHtmlString RawActionLink(this AjaxHelper ajaxHelper, string linkText, string actionName, string controllerName, object routeValues, AjaxOptions ajaxOptions, object htmlAttributes)
    {
        var repID = Guid.NewGuid().ToString();
        var lnk = ajaxHelper.ActionLink(repID, actionName, controllerName, routeValues, ajaxOptions, htmlAttributes);
        return MvcHtmlString.Create(lnk.ToString().Replace(repID, linkText));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T11:05:09.843

我创建了 Ajax.ActionLink 来显示图像而不是链接文本

```
 @Ajax.ActionLink(".", "Delete_Share_Permission", "Share", new { delwhich = "one", delid = @UserSharingDetails.PK_User_Sharing_Id }, new AjaxOptions { UpdateTargetId = "sharelist", InsertionMode = InsertionMode.Replace, OnBegin = "return confirmdeleteone();" }, new { @class = "deleteButton", @id = "fna" }) 
```

申请班级

```
 .deleteButton {        
    background-image: url("/images/DeleteData.png");
    position: absolute;
    right: 6px;
    background-repeat: no-repeat;
    border: none;
    background-position: 50% 50%;
    margin-left: 10px;
    background-color: transparent;
    width: 13px;
    color: #ffffff !important;
    display: block;
    top: 5px;
} 
```

我希望这段代码对你有用。

谢谢你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-06T17:29:22.630

```
@Ajax.ActionLink(" Name", "AjaxGetAllUsers", "Admin", new { sortBy = ViewBag.SortByName, search = Request.QueryString["search"] }, new AjaxOptions() { UpdateTargetId = "userlist", InsertionMode = InsertionMode.Replace, HttpMethod = "GET" }, new { @class = "fa fa-sort" }) 
```

# objective-c - 在 NSInputStream 子类上调用 open

> ID：12008902
> 
> 赞同：1
> 
> 时间：2012-08-17T15:42:31.773
> 
> 标签：objective-c, cocoa, nsinputstream

我正在尝试对 NSInputStream 进行子类化，但是当我在子类上调用 open 时，程序会因“仅为抽象类定义的打开”异常而崩溃。我阅读了 NSStream 的文档，其中说我需要在其他方法中实现 open ，但我正在继承 NSInputStream ，它已经有一个可以工作的 open 方法，这对我来说很好。

上述异常的原因是什么？有没有我不明白的语言概念？有人请赐教。

# javascript - AngularJS：如何在控制器之间传递变量？

> ID：12008908
> 
> 赞同：331
> 
> 时间：2012-08-17T15:42:45.000
> 
> 标签：javascript, angularjs, angularjs-controller

我有两个 Angular 控制器：

```
function Ctrl1($scope) {
    $scope.prop1 = "First";
}

function Ctrl2($scope) {
    $scope.prop2 = "Second";
    $scope.both = Ctrl1.prop1 + $scope.prop2; //This is what I would like to do ideally
} 
```

我不能`Ctrl1`在里面使用，`Ctrl2`因为它是未定义的。但是，如果我尝试像这样传递它......</p>

```
function Ctrl2($scope, Ctrl1) {
    $scope.prop2 = "Second";
    $scope.both = Ctrl1.prop1 + $scope.prop2; //This is what I would like to do ideally
} 
```

我得到一个错误。有谁知道如何做到这一点？

正在做

```
Ctrl2.prototype = new Ctrl1(); 
```

也失败了。

**注意：**这些控制器没有相互嵌套。

* * *

## 回答 #1

> 赞同：508
> 
> 时间：2012-08-17T16:17:16.747

在多个控制器之间共享变量的一种方法是[创建一个服务](https://code.angularjs.org/1.2.21/docs/guide/services)并将其注入您想要使用它的任何控制器中。

**简单的服务示例：**

```
angular.module('myApp', [])
    .service('sharedProperties', function () {
        var property = 'First';

        return {
            getProperty: function () {
                return property;
            },
            setProperty: function(value) {
                property = value;
            }
        };
    }); 
```

**在控制器中使用服务：**

```
function Ctrl2($scope, sharedProperties) {
    $scope.prop2 = "Second";
    $scope.both = sharedProperties.getProperty() + $scope.prop2;
} 
```

[这个博客](http://onehungrymind.com/angularjs-sticky-notes-pt-1-architecture/)（尤其是第 2 课）对此进行了很好的描述。

我发现如果你想跨多个控制器绑定到这些属性，如果你绑定到对象的属性而不是原始类型（布尔值、字符串、数字）来保留绑定的引用，效果会更好。

示例：`var property = { Property1: 'First' };`而不是`var property = 'First';`.

* * *

**更新：**为了（希望）让事情更清楚[这里是一个小提琴](http://jsfiddle.net/b2fCE/1/)，它显示了一个例子：

*   **绑定到共享值的静态副本（在 myController1 中）**
    *   绑定到原语（字符串）
    *   绑定到对象的属性（保存到范围变量）
*   **绑定到在更新值时更新 UI 的共享值（在 myController2 中）**
    *   绑定到返回原语（字符串）的函数
    *   绑定到对象的属性
    *   两种方式绑定到对象的属性

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2014-08-09T17:34:17.507

我喜欢用简单的例子来说明简单的事情:)

这是一个非常简单的`Service`例子：

```
 angular.module('toDo',[])

.service('dataService', function() {

  // private variable
  var _dataObj = {};

  // public API
  this.dataObj = _dataObj;
})

.controller('One', function($scope, dataService) {
  $scope.data = dataService.dataObj;
})

.controller('Two', function($scope, dataService) {
  $scope.data = dataService.dataObj;
}); 
```

这里[是 jsbin](http://jsbin.com/suxed/1/edit)

这是一个非常简单的`Factory`例子：

```
 angular.module('toDo',[])

.factory('dataService', function() {

  // private variable
  var _dataObj = {};

  // public API
  return {
    dataObj: _dataObj
  };
})

.controller('One', function($scope, dataService) {
  $scope.data = dataService.dataObj;
})

.controller('Two', function($scope, dataService) {
  $scope.data = dataService.dataObj;
}); 
```

这里[是 jsbin](http://jsbin.com/loyoro/1/edit)

* * *

如果这太简单了，[这里有一个更复杂的例子](http://jsbin.com/cekez/1/edit)

另[请参阅此处的答案以获取相关的最佳实践评论](https://codereview.stackexchange.com/questions/51596/angularjs-todo-list-too-much-controller-logic/59212#59212)

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2014-06-24T07:21:45.093

***---我知道这个答案不适用于这个问题，但我希望阅读这个问题并想要处理工厂等服务的人避免这样做----***

为此，您将需要使用服务或工厂。

这些服务是在非嵌套控制器之间共享数据的**最佳实践。**

关于数据共享这个主题的一个非常好的注释是如何声明对象。我很不幸，因为我在阅读之前就陷入了 AngularJS 的陷阱，我非常沮丧。所以让我帮你避免这个麻烦。

我从“ng-book: The complete book on AngularJS”中读到，在控制器中作为裸数据创建的 AngularJS ng-model 是错误的！

应该像这样创建一个 $scope 元素：

```
angular.module('myApp', [])
.controller('SomeCtrl', function($scope) {
  // best practice, always use a model
  $scope.someModel = {
    someValue: 'hello computer'
  }); 
```

而不是这样：

```
angular.module('myApp', [])
.controller('SomeCtrl', function($scope) {
  // anti-pattern, bare value
  $scope.someBareValue = 'hello computer';
  };
}); 
```

这是因为建议（最佳实践）DOM（html 文档）将调用包含为

```
<div ng-model="someModel.someValue"></div>  //NOTICE THE DOT. 
```

如果您希望您的子控制器能够从父控制器更改对象，这对嵌套控制器非常有帮助......

**但是在您的情况下，您不需要嵌套范围，但是有一个类似的方面可以将对象从服务获取到控制器。**

假设您有您的服务“工厂”，并且在返回空间中有一个包含 objectB 的 objectA，其中包含 objectC。

如果您想从您的控制器中将 objectC 获取到您的范围内，那么这样说是错误的：

```
$scope.neededObjectInController = Factory.objectA.objectB.objectC; 
```

**那行不通……** 而是只使用一个点。

```
$scope.neededObjectInController = Factory.ObjectA; 
```

然后，在 DOM 中，您可以从 objectA 调用 objectC。这是与工厂相关的最佳实践，最重要的是，**它将有助于避免意外和不可捕获的错误。**

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2014-08-27T18:58:31.953

**使用 $rootScope 不创建服务的解决方案：**

要跨应用控制器共享属性，您可以使用 Angular $rootScope。这是共享数据的另一种选择，让人们了解它。

跨控制器共享某些功能的首选方式是服务，要读取或更改可以使用 $rootscope 的全局属性。

```
var app = angular.module('mymodule',[]);
app.controller('Ctrl1', ['$scope','$rootScope',
  function($scope, $rootScope) {
    $rootScope.showBanner = true;
}]);

app.controller('Ctrl2', ['$scope','$rootScope',
  function($scope, $rootScope) {
    $rootScope.showBanner = false;
}]); 
```

在模板中使用 $rootScope（使用 $root 访问属性）：

```
<div ng-controller="Ctrl1">
    <div class="banner" ng-show="$root.showBanner"> </div>
</div> 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-07-15T16:35:38.507

上面的示例就像一个魅力。我只是做了一个修改，以防我需要管理多个值。我希望这有帮助！

```
app.service('sharedProperties', function () {

    var hashtable = {};

    return {
        setValue: function (key, value) {
            hashtable[key] = value;
        },
        getValue: function (key) {
            return hashtable[key];
        }
    }
}); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-02-16T16:37:19.267

我倾向于使用价值观，很高兴任何人都可以讨论为什么这是一个坏主意..

```
var myApp = angular.module('myApp', []);

myApp.value('sharedProperties', {}); //set to empty object - 
```

然后根据服务注入值。

在 ctrl1 中设置：

```
myApp.controller('ctrl1', function DemoController(sharedProperties) {
  sharedProperties.carModel = "Galaxy";
  sharedProperties.carMake = "Ford";
}); 
```

并从 ctrl2 访问：

```
myApp.controller('ctrl2', function DemoController(sharedProperties) {
  this.car = sharedProperties.carModel + sharedProperties.carMake; 

}); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-03-24T02:10:08.110

下面的例子展示了如何在**兄弟**控制器之间传递变量**并**在值改变时采取行动。

用例示例：您在侧边栏中有一个过滤器，可以更改另一个视图的内容。

```
angular.module('myApp', [])

  .factory('MyService', function() {

    // private
    var value = 0;

    // public
    return {

      getValue: function() {
        return value;
      },

      setValue: function(val) {
        value = val;
      }

    };
  })

  .controller('Ctrl1', function($scope, $rootScope, MyService) {

    $scope.update = function() {
      MyService.setValue($scope.value);
      $rootScope.$broadcast('increment-value-event');
    };
  })

  .controller('Ctrl2', function($scope, MyService) {

    $scope.value = MyService.getValue();

    $scope.$on('increment-value-event', function() {    
      $scope.value = MyService.getValue();
    });
  });
```

```
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>

<div ng-app="myApp">

  <h3>Controller 1 Scope</h3>
  <div ng-controller="Ctrl1">
    <input type="text" ng-model="value"/>
    <button ng-click="update()">Update</button>
  </div>

  <hr>

  <h3>Controller 2 Scope</h3>
  <div ng-controller="Ctrl2">
    Value: {{ value }}
  </div>  

</div>
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-02-21T23:21:33.877

我想通过指出在控制器甚至指令之间共享数据的推荐方法是使用已经指出的服务（工厂）来为这个问题做出贡献，但我也想提供一个应该如何做的工作实际例子。

**这是工作的 plunker：** [http ://plnkr.co/edit/Q1VdKJP2tpvqqJL1LF6m?p=info](http://plnkr.co/edit/Q1VdKJP2tpvqqJL1LF6m?p=info)

首先，**创建**您的**服务**，它将拥有您的**共享数据**：

```
app.factory('SharedService', function() {
  return {
    sharedObject: {
      value: '',
      value2: ''
    }
  };
}); 
```

然后，只需将其注入您的**控制器**并在您的范围内获取共享数据：

```
app.controller('FirstCtrl', function($scope, SharedService) {
  $scope.model = SharedService.sharedObject;
});

app.controller('SecondCtrl', function($scope, SharedService) {
  $scope.model = SharedService.sharedObject;
});

app.controller('MainCtrl', function($scope, SharedService) {
  $scope.model = SharedService.sharedObject;
}); 
```

您也可以为您的**指令**执行此操作，它的工作方式相同：

```
app.directive('myDirective',['SharedService', function(SharedService){
  return{
    restrict: 'E',
    link: function(scope){
      scope.model = SharedService.sharedObject;
    },
    template: '<div><input type="text" ng-model="model.value"/></div>'
  }
}]); 
```

希望这个实用而干净的答案对某人有所帮助。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-07-14T07:26:12.637

你可以通过服务或工厂来做到这一点。除了一些核心差异之外，它们基本上是相同的。我发现[thinkster.io](http://www.thinkster.io/angularjs/9jfpSmbx1j/angularjs-sharing-data-between-controllers)上的这个解释是最容易理解的。简单、中肯、有效。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-05-15T00:19:35.510

难道你不能也让属性成为范围父级的一部分吗？

```
$scope.$parent.property = somevalue; 
```

我并不是说它是正确的，但它确实有效。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-09-10T11:03:03.760

啊，有一点这种新东西作为另一种选择。它是本地存储，可以在 Angular 工作的地方工作。别客气。（但真的，谢谢那家伙）

[https://github.com/gsklee/ngStorage](https://github.com/gsklee/ngStorage)

定义您的默认值：

```
$scope.$storage = $localStorage.$default({
    prop1: 'First',
    prop2: 'Second'
}); 
```

访问值：

```
$scope.prop1 = $localStorage.prop1;
$scope.prop2 = $localStorage.prop2; 
```

存储值

```
$localStorage.prop1 = $scope.prop1;
$localStorage.prop2 = $scope.prop2; 
```

请记住在您的应用程序中注入 ngStorage 并在控制器中注入 $localStorage。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-11-24T14:23:39.570

有两种方法可以做到这一点

1) 使用获取/设置服务

2) `$scope.$emit('key', {data: value}); //to set the value`

```
 $rootScope.$on('key', function (event, data) {}); // to get the value 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-03-08T14:18:45.823

第二种方法：

```
angular.module('myApp', [])
  .controller('Ctrl1', ['$scope',
    function($scope) {

    $scope.prop1 = "First";

    $scope.clickFunction = function() {
      $scope.$broadcast('update_Ctrl2_controller', $scope.prop1);
    };
   }
])
.controller('Ctrl2', ['$scope',
    function($scope) {
      $scope.prop2 = "Second";

        $scope.$on("update_Ctrl2_controller", function(event, prop) {
        $scope.prop = prop;

        $scope.both = prop + $scope.prop2; 
    });
  }
]) 
```

* * *

网页：

```
<div ng-controller="Ctrl2">
  <p>{{both}}</p>
</div>

<button ng-click="clickFunction()">Click</button> 
```

有关更多详细信息，请参见 plunker：

[http://plnkr.co/edit/cKVsPcfs1A1Wwlud2jtO?p=preview](http://plnkr.co/edit/cKVsPcfs1A1Wwlud2jtO?p=preview)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2020-09-04T23:15:43.287

我查看了上面的答案，我推荐 pejman 的 2016 年 12 月 29 日 13:31 的建议，但他/她没有留下完整的答案。在这里，我将其设置为 --> （您需要一个服务和一个监听器**$watch**来自控制器的一个范围，以更改服务区域）

```
var app = 
angular.module('myApp', ['ngRoute', 'ngSanitize']);

app.service('bridgeService', function () {
    var msg = ""; 
    return msg;
});
app.controller('CTRL_1'
, function ($scope, $http, bridgeService) 
{
    $http.get(_restApi, config)
    .success(
    function (serverdata, status, config) {
        $scope.scope1Box = bridgeService.msg = serverdata;
    });
});
app.controller('CTRL_2'
, function ($scope, $http, bridgeService) 
{
    $scope.$watch( function () {
        return (bridgeService.msg);
    }, function (newVal, oldVal) {
        $scope.scope2Box = newVal;
    }, true
    );
}); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-03-01T11:12:35.683

如果您不想提供服务，那么您可以这样做。

```
var scope = angular.element("#another ctrl scope element id.").scope();
scope.plean_assign = some_value; 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2015-07-13T17:00:56.613

除了 $rootScope 和服务之外，还有一个干净且简单的替代解决方案来扩展 Angular 以添加共享数据：

在控制器中：

```
angular.sharedProperties = angular.sharedProperties 
    || angular.extend(the-properties-objects); 
```

此属性属于 'angular' 对象，与范围分离，并且可以在范围和服务中共享。

它的一个好处是您不必注入对象：在您定义后立即可以在任何地方访问它们！

# mongodb - 我如何要求 MongoDB 评估一些 JavaScript 以获得字段的值？

> ID：12008910
> 
> 赞同：2
> 
> 时间：2012-08-17T15:42:50.707
> 
> 标签：mongodb, go, mgo

我想让 MongoDB 动态地为我插入的文档的一个字段分配一个值。例如：MongoDB 服务器的当前时间，就像 MySQL 中的 NOW() 一样。

我试过这个：

```
c := mongoSession.DB("myapp").C("instances")
rand.Seed(time.Now().UnixNano())
err := c.Insert(
   struct{Serial, Priority, Url, LastSeen interface{}}{ 
      Url: getInformedHost() + ":" + getRunningPortString(), 
      Priority: rand.Int(), 
      LastSeen: mongoNow() }
)
checkError(err, "Could not register on MongoDB server.", 3) 
```

我有这个辅助功能：

```
func mongoNow() bson.JavaScript {
    return bson.JavaScript{Code: 
         "(new Date()).ISODate('YYYY-MM-DD hh:mm:ss')"}
} 
```

LastSeen 字段被存储为脚本而不是评估：

```
[_id] => MongoId Object (
    [$id] => 502d6f984eaead30a134fa10
)
[priority] => 1694546828
[url] => 127.0.0.1:8080
[lastseen] => MongoCode Object (
    [code] => (new Date()).ISODate('YYYY-MM-DD hh:mm:ss')
    [scope] => Array (
    )
) 
```

我怎样才能得到一些 javascript 评估而不是插入？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T16:30:56.987

请参阅 MongoDB 文档中的以下 URL：

[http://www.mongodb.org/display/DOCS/Server-side+Code+Execution#Server-sideCodeExecution-Storingfunctionsserverside](http://www.mongodb.org/display/DOCS/Server-side+Code+Execution#Server-sideCodeExecution-Storingfunctionsserverside)

> 有一个特殊的系统集合称为`system.js`，可以存储要重用的 JavaScript 函数。

但请注意，服务器端代码（相当于存储过程）的支持和性能仍然有点差（链接中的详细信息）。

**编辑：**

[要使用mgo 驱动](http://go.pkgdoc.org/labix.org/v2/mgo)程序从 Go 调用存储过程，请使用`mgo.Database`类型的`Run()`方法（[直接链接](http://go.pkgdoc.org/labix.org/v2/mgo#Database.Run)）并发出`eval`带有要在服务器端执行的 Javascript 代码的命令作为参数。就像是：

```
db.Run(bson.M{"eval": "myStoredFunction();"}) 
```

[未经测试的代码]

不可能在 MongoDB`insert`语句中评估代码。

# haskell - 如何表达数据值独立组合的模式匹配？

> ID：12008914
> 
> 赞同：2
> 
> 时间：2012-08-17T15:42:56.657
> 
> 标签：haskell, pattern-matching, generic-programming, gadt

```
data Foo = Bar1
         | Bar2 Foo Foo
         | Bar3 Foo
         | Bar4 Foo Foo Foo 
```

现在，假设有人建了一`Foo`棵树，我想检查 Foo 值的参数是否有效。构造函数参数的规则是：

*   `Bar2 Bar1 Foo`
*   `Bar3 (Bar2|Bar3|Bar4)`
*   `Bar4 Bar1 Bar1 (Bar1|Bar4)`

我知道值的构造函数，只想检查直接参数，没有递归。像这样：

```
bar2 Bar1 Bar1      = True
bar2 Bar1 (Bar2 {}) = True
bar2 Bar1 (Bar3 _)  = True
bar2 Bar1 (Bar4 {}) = True
bar2 _ _ = False 
```

例如，对于 Bar4 类似：

```
bar4 Bar1 Bar1 Bar1      = True
bar4 Bar1 Bar1 (Bar4 {}) = True
bar4 _ _ _ = False 
```

我怎样才能最简洁地表达这些条件？在某些情况下，列出所有组合有点过多。据我所知，不存在用于模式匹配的“OR”语法。

*更新*

我改编了丹尼尔的解决方案并得出了这个结论：

```
data Foo = Bar1
         | Bar2 Foo Foo
         | Bar3 Foo
         | Bar4 Foo Foo Foo
         deriving (Data, Typeable)

bar2 a b = a `isOf` [Bar1] && b `isOf` [Bar1,Bar2{},Bar3{},Bar4{}]
bar4 a b c = [a,b] `areOf` [Bar1] && c `isOf` [Bar1,Bar4{}]

isOf l r = toConstr l `elem` map toConstr r
areOf l r = all (`isOf` r) l 
```

我喜欢这个的原因是我不必更改我的数据类型，除了添加派生子句，而且它是可读的。当然，缺点是这些是动态检查。就我而言，这很好，因为它只是用于类似断言的检查以发现编程错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T16:22:19.507

我认为如何在类型系统级别检查它的唯一方法是将其拆分为几种数据类型。就像是：

```
data Foo = Foo1 Bar1 | Foo2 Bar2 | Foo3 Bar3 | Foo4 Bar4
data Bar1 = Bar1
data Bar2 = Bar2a Bar1 Foo
data Bar3 = Bar3a Bar2 | Bar3b Bar3 | Bar3c Bar4
data Bar4 = Bar4a Bar1 Bar1 Bar1 | Bar4b Bar1 Bar1 Bar4 
```

您不能说要将某些类型变量限制为某些构造函数，因此您需要为此创建一个新的数据类型。

缺点是您将需要输入更多的构造函数/模式，但这至少可以通过一些辅助函数来解决。

* * *

**编辑：**也许另一种解决方案是使用幻像类型来标记使用 GADT 的构造函数：

```
{-# LANGUAGE GADTs #-}

data FBar1
data FBar2
data FBar3
data FBar4

data Foo a where
    Bar1 :: Foo FBar1
    Bar2 :: Foo FBar1 -> Foo b -> Foo FBar2
    Bar3a :: Foo FBar2 -> Foo FBar3
    Bar3b :: Foo FBar3 -> Foo FBar3
    Bar3c :: Foo FBar4 -> Foo FBar3
    Bar4a :: Foo FBar1 -> Foo FBar1 -> Foo FBar4
    Bar4b :: Foo FBar1 -> Foo FBar4 -> Foo FBar4 
```

我不确定这个解决方案是否会产生比它解决的问题更多的问题。例如，不可能编写这样的函数：

```
construct :: Int -> FooAny X
construct 0 = Bar1
construct 1 = Bar2 Bar1 Bar1 
```

因为`X`必须同时是`FBar1`和`FBar2`。为此，您需要[存在主义](http://www.haskell.org/haskellwiki/Existential_type)，例如将其包装为

```
data FooAny where
    FooAny :: Foo a -> FooAny

construct :: Int -> FooAny
construct 0 = FooAny $ Bar1
construct 1 = FooAny $ Bar2 Bar1 Bar1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T18:27:44.347

发布了一个很好的静态检查解决方案；这是动态检查解决方案的建议。关键思想是回避模式匹配并使用我们拥有的所有工具来编写紧凑的代码。这样做有几个选择；我会讨论两个。首先是`isBarX`为每个构造函数编写函数：

```
isBar1 (Bar1 {}) = True
isBar1 _ = False

-- ...

isBar4 (Bar4 {}) = True
isBar4 _ = False

valid (Bar1)       = True
valid (Bar2 a b)   = isBar1 a
valid (Bar3 a)     = not (isBar1 a)
valid (Bar4 a b c) = isBar1 a && isBar1 b && (isBar1 c || isBar4 c) 
```

另一种选择是编写一个函数，该函数返回一些数据，告诉您使用了哪个构造函数——比如，自定义类型`data Constructor = CBar1 | CBar2 | CBar3 | CBar4`，如`Int`.

```
constr (Bar1 {}) = 1
constr (Bar2 {}) = 2
constr (Bar3 {}) = 3
constr (Bar4 {}) = 4

valid (Bar1)       = True
valid (Bar2 a b)   = constr a == 1
valid (Bar3 a)     = constr a /= 1
valid (Bar4 a b c) = constr a == 1 && constr b == 1 && constr c `elem` [1,4] 
```

# ios - 尝试构建到设备后无法启动“<appname>”</appname>

> ID：12008915
> 
> 赞同：1
> 
> 时间：2012-08-17T15:42:58.380
> 
> 标签：ios, xcode

我刚刚升级到 Xcode 4.4.1 并购买了 Apple Developer Program。我设置了*开发人员*配置文件并在我的设备上获得了所有正确的凭据。然后，当我尝试在设备上运行该应用程序时，它会给出“无法启动”。我已经尝试了关闭 xcode、删除派生数据、恢复设备和重新启动计算机的所有可能组合。这些似乎都不起作用。是否有其他人遇到此问题？当没有其他人的解决方案有效时，您是如何解决的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T15:43:31.337

尝试删除 -Info.plist 文件中的“所需设备功能”。

您不能在 3G 上要求 armv7，也不能在任何较新的设备上要求 armv6，因此只需完全删除此属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T16:32:48.540

您的设备运行 iOS 6 吗？您需要 Xcode 4.5 的开发者预览版才能在装有 iOS 6 的设备上运行应用程序。

您是否在 Apple 注册了您的应用 ID？

如果你去管理器（窗口->管理器），你设备旁边的灯是绿色的吗？

# c++ - C++模板方法创建对象

> ID：12008918
> 
> 赞同：5
> 
> 时间：2012-08-17T15:43:21.253
> 
> 标签：c++, templates, lua, luabind

我正在使用 Luabind 将我的游戏引擎暴露给 Lua。我最近遇到了麻烦，因为我发现无法在 Lua 中创建“新”，例如 GUIObject * obj = new GUIObject()，而是在 Lua 中创建的所有内容都归 Lua 所有。

好吧，这不是一个大问题，我决定在对象上创建一种工厂模式，例如我的 GUIManager 有

```
class GUIManager {
template <class T> T * CreateObject( T classType )
{
    return new T();
}
} 
```

我的 Luabind 绑定看起来像这样：

```
class_<GUIManager>("GUIManager")
         .def("CreateObject", (GUILabel*(GUIManager::*)(GUILabel classType))&GUIManager::CreateObject<GUILabel>)
         .def("CreateObject", (GUIImage*(GUIManager::*)(GUIImage classType))&GUIManager::CreateObject<GUIImage>) 
```

通过调用在 Lua 中找到一切工作：

```
testLabel = theGUI:CreateObject(GUILabel()) 
```

但是我觉得这不是“正确的”，因为我实际上是在创建一个要传入的对象，我确信有一种更简单的方法，但到目前为止我尝试过的所有其他方法都不同意编译器或卢宾德。

如果需要，请随时询问更多信息

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T16:41:26.127

由于您的 Luabind 绑定正在使用您的`CreateObject`方法的显式实例化，因此您可以将每个实例绑定到不同的名称：

```
class_<GUIManager>("GUIManager")
         .def("CreateLabel", /*...*/&GUIManager::CreateObject<GUILabel>)
         .def("CreateImage", /*...*/&GUIManager::CreateObject<GUIImage>) 
```

然后，您的 Lua 代码可以“简化”为：

```
testLabel = theGUI:CreateLabel() 
```

而且您的工厂方法中不再需要参数。

```
class GUIManager {
    template <class T> T * CreateObject() { return new T(); }
}; 
```

# macos - 主机文件在 OS X 中无法按预期工作

> ID：12008921
> 
> 赞同：1
> 
> 时间：2012-08-17T15:43:31.030
> 
> 标签：macos, apache, xampp, hosts

操作系统：OS X 10.6.8

运行 Xampp

我的主机文件有问题，无法找出问题所在。

主机文件

```
##
# Host Database
#
# localhost is used to configure the loopback interface
# when the system is booting.  Do not change this entry.
##
127.0.0.1   localhost
255.255.255.255 broadcasthost
::1             localhost
fe80::1%lo0 localhost
127.0.0.1 proj.dev
::1 proj.dev 
```

Xampp 中的虚拟主机

```
NameVirtualHost *:80

<VirtualHost *:80>
    DocumentRoot "/Applications/XAMPP/xamppfiles/htdocs"
    ServerName localhost
  <Directory "/Applications/XAMPP/xamppfiles/htdocs">
    Order allow,deny
    Allow from all
  </Directory>
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot "/Users/davey/Dropbox/proj"
    ServerName amas.dev
  <Directory "/Users/davey/Dropbox/proj">
    Order allow,deny
    Allow from all
  </Directory>
</VirtualHost> 
```

尽管使用 Terminal 多次重新启动和刷新缓存，但我无法让它工作。在终端中，ping 让我得到这个结果：

```
rafter:~ davey$ ping proj.dev
PING amas.dev (127.0.0.1): 56 data bytes
64 bytes from 127.0.0.1: icmp_seq=0 ttl=64 time=0.053 ms
*snip*
64 bytes from 127.0.0.1: icmp_seq=7 ttl=64 time=0.116 ms
^C
--- amas.dev ping statistics ---
8 packets transmitted, 8 packets received, 0.0% packet loss
round-trip min/avg/max/stddev = 0.053/0.109/0.121/0.021 ms 
```

然而下面的命令是这样的：

```
rafter:~ davey$ host proj.dev
Host proj.dev not found: 3(NXDOMAIN) 
```

完全死胡同，不知道该怎么办。有任何想法吗？

我一直在使用 Smultron、pico 和 nano 对文件进行各种编辑。Tomcat 已安装，但未运行。

编辑

好吧，我想我可能缩小了范围。在终端中，我得到以下信息：

```
rafter:~ davey$ host -v amas.dev
Trying "amas.dev"
Received 101 bytes from 134.226.32.57#53 in 0 ms
Trying "amas.dev.scss.tcd.ie"
Host amas.dev not found: 3(NXDOMAIN)
Received 91 bytes from 134.226.32.57#53 in 1 ms 
```

该 IP 号码是网络上的代理。这有什么区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T16:32:40.853

该`host`命令是一个DNS诊断工具。它只*查询*DNS，从不引用本地`hosts`文件。调用`gethostbyname()`或类似函数的命令*确实*引用了本地命名服务，其中可能包括本地`hosts`文件。

系统命令（如`ping`获取正确的 IP 地址）这一事实表明配置正确。

[本文档](http://decoding.wordpress.com/2009/04/06/how-to-edit-the-hosts-file-in-mac-os-x-leopard/)建议您可能需要刷新 DNS 缓存，如果系统之前缓存了一个主机名查找，其地址与您添加到本地主机文件的地址不同。

# c# - 从 HttpContext 获取页面

> ID：12008928
> 
> 赞同：0
> 
> 时间：2012-08-17T15:44:16.173
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我基本上是在尝试设计一个控制器操作，如果在页面上访问该文件将返回一个文件，但如果有人试图直接转到 URL 或对其进行热链接，则不会。

我看到了这样的东西，但它对我不起作用 C# 4

```
Page page = HttpContext.Current.Handler as Page;

if (page != null)
{
 // Use page instance.
} 
```

我也尝试使用 HttpContext.CurrentHandler，但也没有运气。您可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:46:30.167

我认为它可以帮助你：

[如何防止来自您的 ASP.NET 站点的图像热链接？](https://stackoverflow.com/questions/648592/how-to-prevent-image-hotlink-from-your-asp-net-site)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:51:07.117

通常的检查是查看引荐来源网址是否设置为您喜欢的内容 - 检查[HttpRequest.UrlReferrer](http://msdn.microsoft.com/en-us/library/system.web.httprequest.urlreferrer.aspx)。

更强大的检查是为文件生成“随机” url 或添加只有您的页面可以提供的查询参数（即当前时间的哈希值 + 只有服务器知道的秘密值）：

> /Files/Special.txt?openvalue=2012-08-17&hash=HASHVALUE

其中 HASHVALUE 是基于“openvalue”和一些秘密数据（即“2012-08-17”+“secretetext”）的串联计算的（即 SHA256）。

通过这种方式，您可以验证链接是否由您的页面生成，并在必要时将其过期。

# visual-studio-lightswitch - 单个“可编辑数据网格”单元格显示为只读；如何使它们真正可编辑？

> ID：12008929
> 
> 赞同：1
> 
> 时间：2012-08-17T15:44:19.320
> 
> 标签：visual-studio-lightswitch

我有一个 Lightswitch 屏幕，它是一个基于表上查询过滤器的可编辑数据网格。该查询按屏幕命令栏上可选择的日期范围过滤表结果。

每当我运行应用程序时，数据都会正确显示；但是，当我尝试编辑一个单元格时，它会短暂变为白色，然后变为灰色（控件可能被禁用 - 这种确切的行为可能是 cosmopolitan shell/主题所固有的）。此外，添加/编辑/删除条目按钮组也被禁用。

我搜索了可能将这些屏幕元素标记为只读的任何设置，但在单个列级别上看不到任何内容，只是在数据网格行级别上的“使用只读控件”，这不是检查。

我可以访问数据库，并且已验证我可以在运行 Visual Studio 的同一台机器上使用 SQL Server Management Studio 编辑基础数据。

这是灯开关配置问题、数据（库）访问问题还是其他问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:41:24.750

你的表有主键吗？没有主键的表默认为只读状态。

# android - ListFragment 内容不出现

> ID：12008933
> 
> 赞同：0
> 
> 时间：2012-08-17T15:44:55.300
> 
> 标签：android, android-listfragment

我试图通过布局 XML 使用嵌入在父片段中的列表片段（我也通过片段管理器完成了没有更改）。当我自己嵌入 listfragment 时，我可以从光标中看到内容。当我覆盖父片段 (ShoppingListActivity) 的 onCreateView 并返回自定义视图时，我不再能够看到我的列表片段内容。

在列表片段上，我使用 CursorLoader 和 onLoadFinished 始终使用具有内容的游标调用，因此当我在父片段上使用自定义布局时，这不是数据不存在的问题。listfragment 没有自定义布局（我最初是通过覆盖列表片段的 onCreateView 添加父片段中的按钮但产生相同的结果）

我最初也开始使用片段的支持库，但现在使用本机片段。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >
 <Button
    android:id="@+id/btn_shopping_list_add_item_manually"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toLeftOf="@+id/btn_shopping_list_add_item_barcode"
    android:onClick="addItemManually"
    android:text="TYPE"
    />

<Button
    android:id="@+id/btn_shopping_list_add_item_barcode"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_alignParentRight="true"
    android:onClick="addItemFromBarcode"
    android:text="SCAN"
    />
<fragment     android:name="com.ainesophaur.shopping.assistant.fragments.ShoppingListFragment"
    android:id="@+id/list"
    android:layout_height="0dp"
    android:layout_below="@+id/btn_shopping_list_add_item_manually"
    android:layout_alignParentLeft="true"
    android:layout_width="fill_parent" /> 
```

- -编辑 - -

因为我还不能上传图片我会画出会发生什么

当 onCreateView 被覆盖并提供自定义视图（上述 XML 布局）时，我得到

## 按钮 1 按钮 2

没有

当我直接调用 listview 片段时，我得到

列表项 1
列表项 2

列表视图片段有一个从 CursorAdapter 扩展的自定义适配器，当我从 onCreateView 返回上述指定的 XML 布局时，不会调用适配器的 newView 和 bindView。

我还尝试在父片段 XML 中包含一个 listview 项（而不是包含片段本身），并给它列表的标准 android ID，我仍然得到相同的结果..如果我给列表视图一个唯一的 ID并在列表上调用 setAdapter 然后在 cursorloader 的 onLoadFinished 之后我也没有得到任何结果（即适配器的 bindView 和 newView 永远不会被调用）---编辑

现在我可以上传图片了：）

![失踪名单](../Images/2c60eff1b95fa954ef70c93fa3fb83cc.png)

![显示列表](../Images/cc5ec9f9f63df8bf0d236c47e5426896.png)

* * *

这是包含 ListFragment 和 CursorAdapter 的代码

列表片段

```
public class ShoppingListFragment extends ListFragment implements
LoaderManager.LoaderCallbacks<Cursor> {
    private int mStoreID;
    private long mListID;
    private String mStoreName;
    private ShoppingListItemsAdapter adapter;
    private Context mContext;
    private Cursor mCursor;
    private static final int SHOPPING_LIST_LOADER = 0x04;

     CursorLoader cursorLoader;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mContext = getActivity();
        Bundle args = getArguments();
        mListID = 4; //args.getLong("listid");
        //mStoreName = args.getString("storename");

    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        mContext = getActivity();
        adapter = new ShoppingListItemsAdapter(mContext, mCursor, CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
        setListAdapter(adapter);
        //setListAdapter(adapter);
        getLoaderManager().initLoader(SHOPPING_LIST_LOADER, null, this);
    }
    @Override
    public Loader<Cursor> onCreateLoader(int id, Bundle args) {
        cursorLoader = new CursorLoader(getActivity(),
                 Uri.withAppendedPath(ShoppingListProvider.CONTENT_LIST_ITEMS_URI, String.valueOf(mListID)), ShoppingDBAdapter.joinitemProj, null, null, null);
        return cursorLoader;
    }
    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
        adapter.swapCursor(cursor);
        //setListShown(true);
    }
    @Override
    public void onLoaderReset(Loader<Cursor> loader) {
        adapter.swapCursor(null);
    }

    private OnClickListener addManual = new OnClickListener() {

        @Override
        public void onClick(View v) {
            Fragment fragment = new AddItemFragment();
            Bundle args = new Bundle();
            args.putLong("listid", mListID);
            fragment.setArguments(args);
            getFragmentManager().beginTransaction()
            .replace(R.id.container, fragment).addToBackStack(null)
            .commit();

            return;

        }
    };
    private static class ShoppingListItemViewHolder {
        public TextView separator;
        public TextView itemQuantity;
        public TextView itemName;
        public TextView itemPrice;
        public CharArrayBuffer quantityObtainedBuffer = new CharArrayBuffer(128);
        public CharArrayBuffer quantityNeededBuffer = new CharArrayBuffer(128);
        public CharArrayBuffer titleBuffer = new CharArrayBuffer(128);
        public CharArrayBuffer priceBuffer = new CharArrayBuffer(128);
        public CharArrayBuffer itemCategoryBuffer = new CharArrayBuffer(128);
  }
    public void addItemFromBarcode(View v)
    {
        return;
    } 
```

扩展 CursorAdapter

```
private static class ShoppingListItemsAdapter extends CursorAdapter
{
    private static final int STATE_UNKNOWN = 0;
    private static final int STATE_SECTIONED_CELL = 1;
    private static final int STATE_REGULAR_CELL = 2;
    String LAST_CATEGORYNAME = "";
    private final CharArrayBuffer mBuffer = new CharArrayBuffer(128);
    private int[] mCellStates;

    public ShoppingListItemsAdapter(Context context, Cursor c, int flags) {
        super(context, c, flags);
        mCellStates = (c == null) ? null : new int[c.getCount()];
    }
      @Override
        public void changeCursor(Cursor cursor) {
            super.changeCursor(cursor);
            mCellStates = (cursor == null) ? null : new int[cursor.getCount()];
        }
      @Override
        public Cursor swapCursor(Cursor cursor) {
            Cursor oldCursor = super.swapCursor(cursor);
            mCellStates = (cursor == null) ? null : new int[cursor.getCount()];
            return oldCursor;
        }
      @Override
        public void bindView(View view, Context context, Cursor cursor) {

          final ShoppingListItemViewHolder holder = (ShoppingListItemViewHolder) view.getTag();
          final int COLUMN_NAME_INDEX = cursor.getColumnIndex(ShoppingDBAdapter.KEY_NAME);
          final int COLUMN_ITEMCATEGORY_INDEX = cursor.getColumnIndex(ShoppingDBAdapter.KEY_CATEGORYID);
          final int COLUMN_PRICE_INDEX = cursor.getColumnIndex(ShoppingDBAdapter.KEY_PRICE);
          final int COLUMN_OBTAINED_INDEX = cursor.getColumnIndex(ShoppingDBAdapter.KEY_OBTAINED);
          final int COLUMN_NEEDED_INDEX = cursor.getColumnIndex(ShoppingDBAdapter.KEY_NEEDED);
          boolean needSeparator = false;  
          final int position = cursor.getPosition();
          cursor.copyStringToBuffer(COLUMN_NAME_INDEX, holder.titleBuffer);
          cursor.copyStringToBuffer(COLUMN_PRICE_INDEX, holder.priceBuffer);
          cursor.copyStringToBuffer(COLUMN_NEEDED_INDEX, holder.quantityNeededBuffer);
          cursor.copyStringToBuffer(COLUMN_ITEMCATEGORY_INDEX, holder.itemCategoryBuffer);
          switch (mCellStates[position]) 
             {
                  case STATE_SECTIONED_CELL:
                      needSeparator = true;
                      break;

                  case STATE_REGULAR_CELL:
                      needSeparator = false;
                      break;

                  case STATE_UNKNOWN:
                  default:
                      if (position == 0) {
                          if(holder.itemCategoryBuffer.sizeCopied > 0)
                          {
                              needSeparator = true;
                              int holderStoreNameSize = holder.itemCategoryBuffer.sizeCopied;
                              String holderStoreName = "";
                              for(int i = 0; i < holderStoreNameSize; i++)
                              {
                                  holderStoreName += holder.itemCategoryBuffer.data[i];
                              }
                              LAST_CATEGORYNAME = holderStoreName;
                          }
                      } 
                      else 
                      {
                          cursor.moveToPosition(position - 1);
                          cursor.copyStringToBuffer(COLUMN_ITEMCATEGORY_INDEX, mBuffer);
                          if (mBuffer.sizeCopied > 0 && holder.itemCategoryBuffer.sizeCopied > 0) 
                          {
                              int mBufferSize = mBuffer.sizeCopied;
                              int holderStoreNameSize = holder.itemCategoryBuffer.sizeCopied;
                              String mBufferName = "";
                              String holderStoreName = "";
                              for(int i = 0; i < holderStoreNameSize; i++)
                              {
                                  holderStoreName += holder.itemCategoryBuffer.data[i];
                              }
                              if(!LAST_CATEGORYNAME.equals(holderStoreName))
                              {
                                  needSeparator = true;
                                  LAST_CATEGORYNAME = holderStoreName;
                              }
                          }
                          cursor.moveToPosition(position);
                      }
                      mCellStates[position] = needSeparator ? STATE_SECTIONED_CELL : STATE_REGULAR_CELL;
                      break;
              }
          if (needSeparator) {
                holder.separator.setText(holder.itemCategoryBuffer.data, 0 , holder.itemCategoryBuffer.sizeCopied);
                holder.separator.setVisibility(View.VISIBLE);
            } else {
                holder.separator.setVisibility(View.GONE);
            }
            holder.itemName.setText(holder.titleBuffer.data, 0, holder.titleBuffer.sizeCopied);
            holder.itemPrice.setText(holder.priceBuffer.data, 0, holder.priceBuffer.sizeCopied);
            holder.itemQuantity.setText(holder.quantityNeededBuffer.data, 0, holder.quantityNeededBuffer.sizeCopied);
      }
    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
         View v = LayoutInflater.from(context).inflate(R.layout.fragment_shopping_list_items_row, parent, false);
         ShoppingListItemViewHolder holder = new ShoppingListItemViewHolder();
         holder.separator = (TextView)v.findViewById(R.id.separator);
         holder.itemName = (TextView)v.findViewById(R.id.item_name);
         holder.itemPrice = (TextView)v.findViewById(R.id.item_price);
         holder.itemQuantity = (TextView)v.findViewById(R.id.item_quantity);
         v.setTag(holder);
         return v;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:35:11.097

一旦我将列表视图片段使用的布局 XML 从 RelativeLayout 更改为 LinearLayout，我就能够看到这些项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T02:20:36.980

在您的布局中，您已将片段的高度设置为零，因此它不显示任何内容，请将 layout_height 设置为其他值。（查看片段标签中的属性）

# meteor - 流星，近乎同时的用户操作（聊天消息）

> ID：12008940
> 
> 赞同：2
> 
> 时间：2012-08-17T15:45:15.370
> 
> 标签：meteor

[我在http://instachat.meteor.com/room/General](http://instachat.meteor.com/room/General)上发现了一个问题 。（问题可能是 InstaChat 特定的或 Meteor 特定的。）

在一个浏览器中我输入“uno”，在另一个“dos”中输入，然后我在两个浏览器中的每一个中都按回车键（非常快速地连续）。两条消息中的一条丢失了。

又试了一次：

写下每条消息，在 Firefox 中输入，然后立即在 Safari 中输入 - 两条消息都丢失了（从消息字段中消失且未显示在聊天历史记录中）。

这是 Meteor 的问题吗？还是只是 InstaChat？

托比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:24:50.217

问题已经解决了，可能已经被 Meteor 的家伙解决了。

# c# - 如何使用 RadioButton 使其他 RadioButtons 可见？

> ID：12008944
> 
> 赞同：2
> 
> 时间：2012-08-17T15:45:22.820
> 
> 标签：c#, windows-phone-7, radio-button, visible

我一直在尝试使用 RadioButton 来显示另一个。我是这个环境的新手，这是我的第一个 Windows Phone 应用程序。我的代码：

```
 private void rb1_Checked(object sender, RoutedEventArgs e)
    {
        RadioButton rb1 = new System.Windows.Controls.RadioButton();

        if (rb1.IsChecked == true)
        {
            this.rb2.Visibility = Visibility.Visible;
        }
        else if (rb1.IsChecked == false)
        {
           this.rb2.Visibility = Visibility.Collapsed;
        } 
```

工作不顺利。我正在尝试使用 Windows Phone 模拟器来做到这一点。我已经找到了一个叫做 autopostback 的东西，是否也有与 Windows Phone 类似的属性？

如果我想把它变成动态的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:51:03.680

不起作用的原因是您实例化了一个名为 rb1 的新单选按钮。如果已经有一个 rb1，那么你可以试试这个：

尝试：

```
private void rb1_Checked(object sender, RoutedEventArgs e)
    {

        if (rb1.IsChecked == true)
        {
            this.rb2.Visibility = Visibility.Visible;
        }
        else if (rb1.IsChecked == false)
        {
           this.rb2.Visibility = Visibility.Collapsed;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:49:12.580

你可以删除

```
RadioButton rb1 = new System.Windows.Controls.RadioButton(); 
```

因为您每次单击时都会创建实例

# c# - 实体框架如何在我的模型中的多对多关系中包含 1=>0,1

> ID：12008945
> 
> 赞同：0
> 
> 时间：2012-08-17T15:45:22.953
> 
> 标签：c#, entity-framework, entity-framework-4, ef-code-first

我试图先用代码或先用 db 弄清楚如何获得一个代表这种情况的模型。我正在使用实体框架 5.0。

我有一个用户，可能有也可能没有与他们关联的单个帐户。如果他们与一个帐户相关，他们将扮演许多角色。

本质上，我需要：

用户 ==> 0,1 UserAccount 1 ==> * UserAccountRole * <== 1 AccountRole

UserAccount 表需要 UserID 上的唯一键 UserAccount 表有一个主键 UserID,AccountID UserAccountRole 有一个主键 UserID,AccountID,AccountRoleId

当我使用 DB First 时，模型不会选择 1=>0,1 在代码中，我首先无法弄清楚 Fluent API 的表示方式：

![在此处输入图像描述](../Images/3ada09242060e1fb72891b8300101e35.png)

我可以这样做，还是我需要一个只有一个业务规则的多对多用户帐户表？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:31:47.177

好的，我找到了答案，它有点复杂，所以我不确定我是否喜欢它。

要获得上面的表结构，您必须将 SystemUserAccount 创建为多对多。然后您需要在 SystemUserAccount 表的 UserId 列上创建一个单独的唯一 Key。我能找到运行它的唯一钩子是 DBInitializer 的 Seed 方法。这是代码：

```
public  class SystemUser
{
  public int Id { get; set; }
  public string Name { get; set; } 

  public ICollection<SystemUserAccount> SystemUserAccounts{get;set;}
}

 public class Account
{
   public int Id { get; set; }
   public ICollection<SystemUserAccount> SystemUserAccount { get; set; }
}

public class SystemUserAccount
{
    public int UserId { get; set; }
    public int AccountId { get; set; }

    public virtual ICollection<AccountRole> AccountRoles { get; set; }

    public SystemUser SystemUser { get; set; }
    public Account UserAccount { get; set; }
}

public class AccountRole
{
    public int Id { get; set; }
    public String Name { get; set; }

    public virtual ICollection<SystemUserAccount> UserAccounts { get; set; }
} 
```

然后这个上下文：

```
 public DbSet<SystemUser> SystemUser { get; set; }
    public DbSet<SystemUserAccount> SystemUserAccount { get; set; }
    public DbSet<Account> Account { get; set; }
    public DbSet<AccountRole> AccountRole { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<SystemUserAccount>()
            .HasKey(sua => new { sua.UserId, sua.AccountId });

        modelBuilder.Entity<SystemUserAccount>()
            .HasRequired(sua => sua.SystemUser)
            .WithMany(u => u.SystemUserAccounts)
            .HasForeignKey(u => u.UserId);

        modelBuilder.Entity<SystemUserAccount>()
            .HasMany(sua => sua.AccountRoles)
            .WithMany(ar => ar.UserAccounts)
            .Map(m =>
                     {
                         m.ToTable("UserAccountRole");
                         m.MapLeftKey("UserId", "AccountId");
                         m.MapRightKey("AccountRoleId");
                     }
            );
    } 
```

最后在数据库初始化程序的种子方法中：

```
public  class DatabaseInitializer : DropCreateDatabaseAlways<PeopleContext>
{
  protected override void Seed(PeopleContext context)
  {
        context.Database.ExecuteSqlCommand("ALTER TABLE SystemUserAccounts ADD CONSTRAINT uc_User UNIQUE(UserId)"); 
  }
} 
```

然后只需在程序中调用 DatabaseInitializer：

```
 Database.SetInitializer<PeopleContext>(new DatabaseInitializer()); 
```

这给了我 OP 中显示的表结构。我不确定它在查询中的表现如何。

我希望它可以帮助任何试图这样做的人。

塔尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:44:51.770

我不确定我是否理解您的目标 - 但我认为您想要的是 3 个主要类 -并且`User`，使用 UserAccountRole 的多对多关系表，这只是将 UserAccounts 映射到 AccountRoles。如果我对您的目标的理解有误，请用更多细节更新问题。`UserAccount``AccountRole`

如果是这样，我用这些类完成了这个：

```
public class User
{
    public int UserId { get; set; }
    public virtual UserAccount UserAccount { get; set; }
}

public class UserAccount
{
    public int UserId { get; set; }
    public int AccountId { get; set; }
    public virtual ICollection<AccountRole> AccountRoles { get; set; }

    public virtual User User { get; set; }

}

public class AccountRole
{
    public int AccountRoleId { get; set; }
    public virtual ICollection<UserAccount> UserAccounts { get; set; }
} 
```

这个映射：

```
public class Model : DbContext
{
    public DbSet<User> Users { get; set; }
    public DbSet<UserAccount> UserAccounts { get; set; }
    public DbSet<AccountRole> AccountRoles { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<User>()
            .HasOptional(u => u.UserAccount)
            .WithRequired(ua => ua.User);

        modelBuilder.Entity<UserAccount>()
            .HasKey(k => new {k.AccountId, k.UserId});

        modelBuilder.Entity<UserAccount>()
            .HasMany(ua => ua.AccountRoles)
            .WithMany(ar => ar.UserAccounts)
            .Map(map =>
                {
                    map.ToTable("UserAccountRole");
                    map.MapLeftKey("UserId", "AccountId");
                    map.MapRightKey("AccountRoleId");
                });

    }
} 
```

这创建了类，以及具有您正在寻找的复合键的多对多表：

![在此处输入图像描述](../Images/ca224dc2fe0428a02e2f2299b3a39f0b.png)

# javascript - HTML5 / Javascript视差对单个元素/ div标签的影响？

> ID：12008950
> 
> 赞同：9
> 
> 时间：2012-08-17T15:45:38.527
> 
> 标签：javascript, jquery, html, scroll, parallax

过去，我使用 scrolldeck.js 创建了一些网站，它们具有标准的全屏背景，顶部有一层和文本（标准滚动视差样式），这不是我想要的。

我正在寻找一个脚本或教程（或示例），以便在您滚动时在前景动画/移动中具有单个 div 标签（图像）。我将在单页垂直滚动网站上使用它，因此当您滚动时，我希望奇数图像以不同的速度滚动并具有开始和停止位置。我不想要整个背景的视差。

提前感谢一堆

* * *

编辑：这是对我正在寻找的内容的更好解释：

图片向下滚动页面，当您滚动时，您会看到一个浮动的瓶子（透明 png），您继续向下滚动阅读内容，并且在某个点上，瓶子很好地放在桌子上（背景的一部分），因为您继续滚动它会不再移动。

目标是让元素（图像）移动到预先确定的位置（基于滚动），然后在它们到达最终静止位置时保持原状。

* * *

编辑 2：这里有一些示例站点：http:
[//jessandruss.us/](http://jessandruss.us/) - 这个站点完全按照我想要的方式完成了大约 2/3 的操作：[见截图](https://i.imgur.com/cdOA3.jpg "看截图")
[http://smokeybones.com/](http://smokeybones.com/) - 汉堡我想要的效果很好，很小，但它会在你滚动时移动到位。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T14:26:38.207

[http://prinzhorn.github.com/skrollr/](http://prinzhorn.github.com/skrollr/)

这个库是一个原生 javascript（不需要 jQuery 等）视差滚动插件。插件主页有一个你正在寻找的实际演示。Github 仓库在[这里](https://github.com/Prinzhorn/skrollr)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-24T17:04:29.410

根据您的评论*`but hopefully at a different pace then the actual page scrolls creating a parallax effect.`*- 我试图模拟这种效果。

基本上，移动对象以与页面滚动**相同的速度**移动，但覆盖与视口（可见区域）成比例的**不同距离**

[演示在这里。](http://jsfiddle.net/mrobin/GS9ed/2/)

**注意**：使用滚动条手柄而不是鼠标滚轮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T11:01:01.023

您应该查看 [https://victoriabeckham.landrover.com/INT](https://victoriabeckham.landrover.com/INT)的来源， 基本上有一个“播放器”可以处理一些 CSS 属性，这些属性可以提供您想要实现的视差效果；主要不是背景位置的问题，应该有这种处理的元素是

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T15:11:20.927

给 jQuery [Transe](https://github.com/yckart/jQuery.transe.js)一个机会。有一些超级简单的**[演示](http://yckart.github.com/jQuery.transe.js/)**（还没有文档），它甚至可以使用[触摸设备](http://yckart.github.com/jQuery.transe.js/examples/mobile/)。*但是，我不得不说，这是一个早期的测试版，所以要小心。*

顺便说一句：它只有 8.682 kb

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T16:57:26.497

我认为你会从这本书中受益：[Supercharged Javascript Graphics](https://rads.stackoverflow.com/amzn/click/com/1449393632)它有大量的教程和有用的信息。我个人从中学到了很多。这是本书中一个示例的链接，可以在这里满足您的胃口[。](http://www.professorcloud.com/supercharged/scrolling/tilescrolling.htm)您可以在此处访问作者网站以获取更多精彩内容[。](http://www.professorcloud.com/mainsite/index.htm)

# c - C99 标准中的默认参数提升

> ID：12008951
> 
> 赞同：4
> 
> 时间：2012-08-17T15:45:43.313
> 
> 标签：c, function, prototype, c99, promotions

我对 C99 标准中的默认参数提升有疑问。在“C Programming - A Modern Approach, 2nd Edition”一书中，我读到：

> **参数转换：**
> 
> [...]
> 
> 1)**编译器在调用之前遇到了原型。**[...]
> 
> 2）**编译器在调用之前没有遇到原型**。编译器执行默认参数提升：(1)`float`参数转换为`double`. (2) 执行积分提升，导致`char`和`short`参数被转换为`int`。（*在 C99 中，执行整数提升。*）

几行进一步显示了一个示例，其中在调用之前没有函数原型或定义。评论如下：

> 当然，更好的解决方案是`square`在调用它之前提供一个原型。*在 C99 中，在`square`没有首先提供函数的声明或定义的情况下调用是错误的。*

这两个草书的句子是不是有点相反？我的意思是，如果 C99 禁止在没有事先声明/定义的情况下调用函数，它如何确定这种函数调用中的提升？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T15:55:25.613

不，它们并不矛盾。

声明不一定是原型：

```
int f(); 
```

声明了函数`f`但不是原型，因为对参数类型一无所知。

```
int (a)
 in a;
{
 ...
} 
```

是一个定义，但也不是原型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T15:58:23.083

C99 并没有禁止你调用没有原型的函数。

我无法提供详细信息，因为您尚未发布代码`square()`或对其的调用，但可能正在发生的事情是对调用中的参数进行的提升`square()`导致传递给函数的类型与实际声明的类型不同在实施中。

*这*将导致未定义的行为，并且将是一个错误。

例如：

```
// in foo.c:

int foo(void)
{ 
    char x = 42;

    return square(x); // x is promoted to int, but is wrong
}

// in bar.c

#include <stdio.h>
void bar(int x)
{ 
    square( &x); // this call is fine -  what is being passed is what square() expects
    printf("The result is %d\n", x);
}

// in square.c

void square( int* p)
{
    *p *= *p;
    return;
} 
```

如果`square()`使用声明参数的原型定义为具有类型的参数`char`，则在调用代码没有“看到”原型的情况下无法正确调用它，因为在这种情况下，参数将被提升为`int`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T17:02:33.373

如果没有在 C99 中提供事先声明或定义，我找不到任何关于调用函数的错误。

关闭的事情似乎是不再假定默认返回类型 int 。即声明`foo(int a);`在 C99 之前是允许的，但在 C99 中是错误的。C99之前的意思`int foo(int a);`

# database - ClientDataSet 将数字四舍五入为 15 位

> ID：12008952
> 
> 赞同：2
> 
> 时间：2012-08-17T15:45:45.010
> 
> 标签：database, delphi, ado

我有一个 Delphi XE 应用程序，它使用后面的`TClientDataSet`a`TDataSetProvider`和加号来访问 Oracle XE 数据库。`TADOQuery`我要写入的表有一个`NUMBER(19)`字段。

我正在向其中写入一个值，如下所示：

```
myDataModule.myClientDataSet.FieldByName('ID').AsLargeInt := ID; 
```

假设我有一个`1234567890123456789`四舍五入的 ID `1234567890123460000`。

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T05:47:33.140

确保`TClientDataSet`明确创建您的字段，`ftLargeint`否则您可能会遇到此类舍入问题。

忘记使用 ADO 访问 Oracle。请注意，由 ADO 连接的所有 OleDB 提供程序在处理 BLOB 时都存在错误：Microsoft 的版本只是不处理它们，Oracle 的版本将[随机返回 1/4 行的 null](https://stackoverflow.com/questions/6147274/is-oraoledb-provider-in-net-unreliable-on-clob-fields) ...如果您的网站出现类似问题，我不会感到惊讶案例，关于数值字段。

您可以查看访问 Oracle 的其他方法，例如 DBExpresss 驱动程序甚至 BDE。一些第三方组件也可用。

我们对 Oracle 的免费[直接访问类](https://stackoverflow.com/a/6646406/458259)本机处理此类数字字段，并将直接处理 Int64 值，无需`TDataSet`转换（这也可能是问题的原因）。例如，我认为它是唯一一个实现最新 11g 特性的 Delphi 单元，名为“*用于 OCI 绑定和定义调用的 64 位整数主机数据类型*”。它不需要客户端驱动程序（也不需要 BDE、Provider 或本地配置）：您只需使用 Delphi exe复制[Oracle Instance Client dll即可直接连接到 Oracle。](http://www.oracle.com/technetwork/database/features/instant-client/index-100365.html)结果[速度惊人](http://blog.synopse.info/post/2012/07/25/Synopse-mORMot-benchmark)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T00:31:43.693

您是否已`use debug .dcus`在 Delphi 项目选项中设置并逐步执行从初始变量分配到将数据传递给 Oracle 传输驱动程序的所有代码？您是否验证了该值何时四舍五入为 15 位？

这是其他论坛中的一些帖子，非 Delphi 用户也有同样的问题，这是由使用该`to_char()`功能引起的。我想知道`number(19)`（或`BigInt`）值是否在设置值和发布到数据库之间的某个位置被转换为字符串。

*   [dbaforums.org](http://forums.devshed.com/oracle-development-96/problem-in-conversion-number-19-to-varchar2-19t-640057.html)（描述 2 个实例，一个有效，一个无效）
*   [forums.devshed.com](http://dbaforums.org/oracle/index.php?showtopic=18689)（信息量不大，但问题的一个例子）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T06:37:29.497

我决定扔掉`TClientDataSet`and`TDataSetProvider`并`TADOQuery`直接使用 来插入值。

即我现在有这样的东西：

```
myDataModule.myQuery.SQL.Clear;
myDataModule.myQuery.SQL.Add('INSERT INTO mytable (ID) VALUES(:ID)');
myDataModule.myQuery.Prepared := True;
myDataModule.myQuery.Parameters.ParamByName('ID').Value := 1234567890123456789;
myDataModule.myQuery.ExecSQL; 
```

不是一个完美的解决方案，但它有效。

# mysql - mysql - 如何从一个表到另一个表的所有差异（大量行〜500k）

> ID：12008953
> 
> 赞同：0
> 
> 时间：2012-08-17T15:45:43.893
> 
> 标签：mysql, select

在里面

```
`synchro_newitems` 
```

表我有所有新项目（来自外部来源）~ 大约 500k 行。它有一列：

```
`new_ids` 
```

在里面

```
`synchro_olditems` 
```

表我有所有当前项目（也来自外部来源）~ 大约 500k 行。它有一列：

```
`old_ids` 
```

我必须只从以下位置获取新项目`synchro_newitems`：

（新项目）= `synchro_newitems`(-)`synchro_olditems`

我尝试通过将差异插入第三张表来做到这一点：

```
INSERT INTO `synchro_diff` (`id`) 
SELECT DISTINCT new_ids FROM synchro_newitems 
LEFT JOIN 
synchro_olditems ON synchro_newitems.new_ids = synchro_olditems.old_ids 
WHERE synchro_olditems.old_ids IS NULL 
```

（与“NOT IN”类似）

它适用于少量行。但是当有 500 000 行要比较时失败。

我试过很简单：

```
DELETE FROM synchro_newitems WHERE exists(SELECT * FROM synchro_olditems) 
```

但它不起作用..你知道一些聪明的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:54:42.837

这是 mysql 查询的一个奇怪之处。尝试这个：

```
select distinct new_ids
from synchro_newitems n
where not exists (select 1 from synchro_olditems o where n.new_ids = old.old_ids) 
```

这样优化更好。而且，更好的是，在 o.old_ids 上放置一个索引以使其快速运行。

# c - RSA 的 Openssl：未定义对 RSA_new 的引用

> ID：12008954
> 
> 赞同：9
> 
> 时间：2012-08-17T15:45:56.930
> 
> 标签：c, unix, openssl

我今天开始探索 RSA 的 openSSL api。这是简单的代码：

```
#include<stdio.h>
#include<openssl/rsa.h>
#include<openssl/engine.h>
int main() {
    RSA *rsa;
    rsa = RSA_new_();
    RSA_free(rsa);
    return 0;
} 
```

我正在编译

> gcc -I /usr/local/ssl/include -o 等等

但 gcc 返回未定义对 RSA_new 和 RSA_free 的引用的错误。我检查了 rsa.h 标头，并没有引用这两个函数。怎么了？我已经按照openssl网站上的参考指南...

编辑： gcc 输出：

> gcc -I /usr/local/ssl/include/ -o rsa rsa.c -L/usr/local/ssl/lib -lcrypto /usr/local/ssl/lib/libcrypto.a(dso_dlfcn.o)：在函数中`dlfcn_globallookup': dso_dlfcn.c:(.text+0x1d): undefined reference to`dlopen' dso_dlfcn.c:(.text+0x33): undefined reference to `dlsym' dso_dlfcn.c:(.text+0x3d): undefined reference to`dlclose' /usr/local/ssl/lib/libcrypto.a(dso_dlfcn.o): In function `dlfcn_bind_func': dso_dlfcn.c:(.text+0x3b1): undefined reference to`dlsym' dso_dlfcn.c:(.text+0x490) : 对`dlerror' /usr/local/ssl/lib/libcrypto.a(dso_dlfcn.o): In function`dlfcn_bind_var' 的未定义引用：dso_dlfcn.c:(.text+0x511): 对`dlsym' dso_dlfcn.c:(.text+0x5f0): undefined reference to`dlerror'/usr/local/ssl/lib/libcrypto.a(dso_dlfcn.o) 的未定义引用：在函数`dlfcn_load': dso_dlfcn.c:(.text+0x667): undefined reference to`dlopen' dso_dlfcn.c:( .text+0x6de): 对`dlclose' dso_dlfcn.c:(.text+0x715): undefined reference to`dlerror 的未定义引用'/usr/local/ssl/lib/libcrypto.a(dso_dlfcn.o): 在函数`dlfcn_pathbyaddr': dso_dlfcn.c:(.text+0x7b1): undefined reference to`dladdr' dso_dlfcn.c:(.text+0x819): 未定义的引用`dlerror' /usr/local/ssl/lib/libcrypto.a(dso_dlfcn.o): In function`dlfcn_unload': dso_dlfcn.c:(.text+0x87a): undefined reference to `dlclose' collect2: ld 返回 1 exit status

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T16:17:11.800

问题是您正在链接`libssl`并且您正在使用 RSA 加密，这是`libcrypto`另一个错误的一部分：没有调用函数`RSA_new_`：：

```
toc@UnixServer:/usr/include/openssl$ grep RSA_new *
rsa.h:RSA * RSA_new(void);
rsa.h:RSA * RSA_new_method(ENGINE *engine); 
```

所以更正你的代码：

```
rsa = RSA_new(); 
```

并像这样编译：

```
gcc -I/usr/include/openssl/ -Wall my_rsa.c -o my_rsa  -lcrypto 
```

**编辑：对于最后一个错误（dl 函数）：**

```
gcc -I/usr/include/openssl/ -Wall my_rsa.c -o my_rsa  -lcrypto -ldl 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T15:49:35.847

您还需要与库链接：

```
gcc -I/usr/local/ssl/include -o etc etc.c -L/usr/local/lib -lssl 
```

该`-L`选项告诉 GCC 在哪里寻找库文件，并且`-l`(small L) 告诉链接器它应该与库链接。

用你得到的替换库文件夹和库名称。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T15:48:54.173

您必须*链接*到 libSSL 库。就像是

```
gcc -I /usr/local/ssl/include -o myprog myprog.c -lssl 
```

会成功的。

（也许实际上不是`-lssl`but `-lopenssl`，`-lssl-rsa`或其他什么；您可以通过键入

```
pkg-config --libs PACKAGENAME 
```

其中 PACKAGENAME 是包含 libssl 的包的名称，例如 libssl、openssl、libssl-dev、openssl-devel 等）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T15:49:26.297

您需要添加`-lssl`或类似的东西。“未定义的引用”由链接器生成，它正在寻找`RSA_new`and的实际实现`RSA_free`。这些函数位于 openssl 库中的某个位置，`-lssl`您可以让链接器知道它们在哪里。

编辑：如果头文件有问题，您会看到类似“标识符 RSA_new 的隐式声明”之类的错误。但是您需要启用某些标志才能出现这种错误（我认为`-Wmissing-prototypes`）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-14T09:36:53.743

如果你使用 CMakeLists.txt，你必须添加这个简单的命令：

```
link_libraries(ssl  crypto) 
```

# java - javax.el.PropertyNotFoundException：类“java.lang.Integer”没有属性“0”

> ID：12008956
> 
> 赞同：-3
> 
> 时间：2012-08-17T15:46:03.990
> 
> 标签：java, spring-mvc, jstl, spring-webflow

我正在尝试使用 JSTL 将我的数据显示到 JSP 中，但控制台显示我`javax.el.PropertyNotFoundException: The class 'java.lang.Integer' does not have the property '0'`有一个`List<Object>`with`Integer and BigDecimal`和我的 JSP 我确实放了

```
<c:forEach items="${obj}" var="object">
   <tr>
      <td width="10%" class="r1Left">${object[0].id}</td>
   </tr>
</c:forEach> 
```

我的`List<Object>`包含 [10, 1278612143.23, 10, 3343443.56, 4, 123.45]

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T15:51:12.773

我想你只是想要`${object.id}`，此时你得到的是对象而不是列表。

# c# - 基于值的线程同步

> ID：12008957
> 
> 赞同：2
> 
> 时间：2012-08-17T15:46:07.063
> 
> 标签：c#, .net, multithreading, mutex, critical-section

我正在尝试同步关键部分中的线程，但我需要基于一个值来进行。例如，如果您有线程代表不同的人（即 bob、fred、bill），那么 Bob 和 Bill 的线程可能是并发的，但 Bob 的所有线程都将同步，因此只有 1 个线程可以通过临界区时间。我最初的想法是使用命名互斥锁，但不知道如何管理它们。也许某种类型的命名互斥体字典。有没有人做过类似的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T15:47:45.127

通常，在这种情况下，您将为每个用户拥有一个`User`实例。

如果是这样，您可以只`lock()`在该用户实例上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T15:51:20.453

*   如果你有一个`Person`代表这个人的类（Bob、Bill 等），你可以`lock`在那个实例上。
*   如果您没有表示 a 的类`Person`，请创建`Dictionary`将您的人员的唯一标识符映射到命名`Mutex`对象的实例的 a。对字典本身的访问应该是同步的。另请注意，在 .NET 中创建互斥锁并非易事。有关详细信息，请参阅[此答案](https://stackoverflow.com/a/847270/335858)。

# php - MYSQL 数据库结构 - 数组？

> ID：12008958
> 
> 赞同：0
> 
> 时间：2012-08-17T15:46:07.757
> 
> 标签：php, mysql

我已经阅读了多个不应将数组存储在 mysql 数据库中的地方。所以我想我会问我应该怎么做：

我正在用 php/mysql 编写一个基本的任务管理应用程序，我想要有项目和任务。任务是单个对象，而项目是包含多个任务的对象。所以我已经完成了任务，我有一个包含 id、name、dueDate 列的任务表。我的下一步是项目。

我的计划是创建一个包含 id、name、dueDate 和 taskID 列的项目表。taskID 列将包含一个任务 ID 数组，或者可能只是一个带有逗号分隔符的字符串。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T15:47:56.453

这在 MySQL 中称为一对多关系。您将拥有持有他们分配到的项目的 id 的任务。因此，要查找与项目关联的任务，您只需查询所有持有项目 ID 的任务。听起来对吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:51:48.723

如果每个 id/name 记录可以有不同数量的任务 ID，那么有两个选项。第一种是使用 XML 而不是 SQL。第二个是创建两个表。上面包含 id、名称和截止日期，然后是第二个只有 id 和 taskID。第二列中的 id 是引用表 1 中的 id 的外键，taskID 是单个 taskID。例如：

表格1：

```
id | name | dueDate
-------------------
1  | bob  | '2012-08-16'
2  | fred | '2012-08-17' 
```

表 2：

```
TableID | TaskID
-----------------
1       | 1
1       | 2
1       | 3
2       | 1
2       | 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T15:49:18.827

任务（id，名称，dueDate，**ProjectID**） 项目（id，名称，dueDate）

ProjectID 列是外键的 and，Proejcts 的表 id 列是另一个。

# specflow - 在 VS2010 中找不到任何 Specflow 模板

> ID：12008962
> 
> 赞同：0
> 
> 时间：2012-08-17T15:46:31.850
> 
> 标签：specflow

我正在尝试从 Visual Studio Galary 启动 specflow 1.9 Visual Studio IDE 集成。安装后，我找不到与 specflow 相关的任何模板@项目或文件级别。谁能告诉我我错过了什么或做错了什么？

提前致谢，

尼尔坎特·德赛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T01:53:29.453

这已解决，因为问题是我必须将 ticktack.scetchflow.dll 引用到我的项目中。添加参考后，我可以在“添加新项目”对话框中看到所有模板。

尼尔坎特·S·德赛

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T04:47:16.350

谷歌似乎认为这是最好的解决方案，但它对我没有帮助，因为我有同样的问题，并且引用 DLL 无济于事......直到我重建整个解决方案。

因此，如果一开始这对您不起作用，请记住，您可能需要在引用其中的 ticktack.scetchflow.dll 后显式重建引用 SpecFlow 的项目。

# watir - 将 Watir Webdriver 与 Google ChromeFrame (GCF) 一起使用

> ID：12008967
> 
> 赞同：1
> 
> 时间：2012-08-17T15:46:41.683
> 
> 标签：watir, watir-webdriver, google-chrome-frame

我正在使用 Watir Webdriver 针对许多浏览器运行集成测试。我们使用的一些页面包含元标记`<meta http-equiv="X-UA-Compatible" content="chrome=1" />`，以便页面使用 ChromeFrame 插件。这是必要的，因为我们使用的一些 javascript 对于我们需要支持的一些旧版本的 IE 来说太重了。当我们在没有 Chrome 框架的情况下运行 Watir 测试时，测试执行正常。使用元标记`Unable to find element with xpath`，一旦我们测试任何内容，它们都会立即失败并出现错误。显然 ChromeFrame 并没有像 IE 那样将相同的接口暴露给 Webdriver。我可以做任何配置来以这种方式测试 ChromeFrame 吗？

# xml - 如何为 xml 命名空间设置默认值？

> ID：12008969
> 
> 赞同：0
> 
> 时间：2012-08-17T15:46:44.737
> 
> 标签：xml, xsd, xerces-c

我在每个 xml 文件中都有一些这样的命名空间定义：-

```
xmlns:xi="http://www.w3.org/2001/XInclude" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
etc etc 
```

有没有办法让我将这些指定为默认值，这样我就不必在每个 XML 文件中都写这个？

如果有帮助，我主要使用 xerces-c 进行解析，但我更喜欢独立于库的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T23:15:57.843

@owagh，您是否考虑过定义一个包含所有适用命名空间的 XML 模板，而不是每次都从头开始编写 XML 文件？然后，您的程序可以首先加载该 XML 模板，然后开始填充它。

# ruby-on-rails-3 - Ruby on Rails Time.zone.now

> ID：12008970
> 
> 赞同：0
> 
> 时间：2012-08-17T15:46:47.483
> 
> 标签：ruby-on-rails-3, ruby-1.9.2

我正在使用 Time.zone.now 来获取用户的时间。

我认为这是错误的。你能确认它是错误的吗？如何获取用户的时间？

谁在我的服务器上设置 Time.zone？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:50:12.590

是的，这是错误的。Time.zone 是您应用程序的时区设置的任何值。这通常在 application.rb 中设置

```
config.time_zone = 'UTC' 
```

如果您想要用户的时区，您需要通过 JavaScript 从客户端获取它，或者让用户在您的应用程序中自行设置。

# php - 使用隐藏字段将数组中的搜索结果重新提交回 MySQL DB

> ID：12008973
> 
> 赞同：1
> 
> 时间：2012-08-17T15:47:02.320
> 
> 标签：php, mysql, arrays, search

我在这里的第一篇文章，即使我是这个非常有用的网站的常客

我想知道是否有人可以帮助我解决以下问题：

我正在用 MySQL 为我的公司编写一个简单的库存检查解决方案，我仍然是新手，但正在学习。

我们有以下搜索表单，当输入产品的条形码时显示来自数据库的结果，我要做的是在结果底部有一个按钮，上面写着“检查确定”，它将信息重新提交给数据库，更新时间戳，并有一个隐藏字段将“状态”更改为已检查。

数据库名称为“stock” 表名称为“main_stock” 字段为：id curr_timestamp mastercategory category product_desc 条码序列状态

每次搜索只给出一个结果，因为条形码是唯一的

我坚持的一点是如何将结果转换为表格以便能够将它们重新提交回数据库

这仅供受保护网络内部使用，非常感谢任何帮助

谢谢

乔恩

```
 <?php

    $dbHost = 'localhost'; // localhost will be used in most cases

    // set these to your mysql database username and password.

    $dbUser = 'xxxxxxxx'; 
    $dbPass = 'xxxxxxx';
    $dbDatabase = 'stock'; // the database you put the table into.

    $con = mysql_connect($dbHost, $dbUser, $dbPass) or trigger_error("Failed to connect to MySQL         Server. Error: " . mysql_error());
    mysql_select_db($dbDatabase) or trigger_error("Failed to connect to database {$dbDatabase}.         Error: " . mysql_error());

    // Set up our error check and result check array

    $error = array();
    $results = array();

    // First check if a form was submitted. 
    // Since this is a search we will use $_GET

    if (isset($_GET['search'])) {   
    $searchTerms = trim($_GET['search']);   
    $searchTerms = strip_tags($searchTerms); // remove any html/javascript.      

    if (strlen($searchTerms) < 2) {      
    $error[] = "Search terms must be longer than 2 characters.";   
    }else {      
    $searchTermDB = mysql_real_escape_string($searchTerms); // prevent sql injection.   
    }      

    // If there are no errors, lets get the search going.   

    if (count($error) < 1) {      
    $searchSQL = "SELECT mastercategory, category, product_desc, barcode, serial FROM main_stock         WHERE ";            

    // grab the search types.      
    $types = array();      
    $types[] = isset($_GET['barcode'])?"`barcode` LIKE '%{$searchTermDB}%'":''; 
    $types = array_filter($types, "removeEmpty"); // removes any item that was empty (not         checked)            

    if (count($types) < 1)         
    $types[] = "`barcode` LIKE '%{$searchTermDB}%'"; // use the body as a default search if none are checked                

    $andOr = isset($_GET['matchall'])?'AND':'OR';      
    $searchSQL .= implode(" {$andOr} ", $types) . " ORDER BY `barcode`"; // order by title.      
    $searchResult = mysql_query($searchSQL) or trigger_error("There was an error.<br/>" .         mysql_error() . "<br />SQL Was: {$searchSQL}");            

    if (mysql_num_rows($searchResult) < 1) {         
    $error[] = "The scanned barcode {$searchTerms} is not in the database.";      
    }else {         
    $results = array(); // the result array         
    $i = 1;         
    while ($row = mysql_fetch_assoc($searchResult)) {            
    $results[] = "{$i}:Product Name&nbsp;:&nbsp;<br />&nbsp;&nbsp;{$row['product_desc']}        <br />Master Category&nbsp;:&nbsp;<br />&nbsp;&nbsp;{$row['mastercategory']}<br />Sub         Category&nbsp;:&nbsp;<br />&nbsp;&nbsp;{$row['category']}<br />Barcode&nbsp;:&nbsp;{$row['barcode']}        <br />Serial No.&nbsp;:&nbsp;{$row['serial']}";            
    $i++;         
    }      
    }   
    }
    }
    function removeEmpty($var) {   
    return (!empty($var)); 
    }?>

    <html>   

    <title>Search Form</title>   
    <BODY onLoad="document.forms.searchForm.search.focus()">  
    <form action="index.php">
  <center>
    <span class="formcentjc">
      <input type=submit value="Home" />
      </span>
  </center>
</form>  
    <?php echo (count($error) > 0)?"The following had errors:<br /><span id=\"error\">" . implode("<br />", $error) . "</span><br /><br />":""; ?>      

    <form action="<?php echo $_SERVER['PHP_SELF'];?>" method="GET" name="searchForm" class="cent">
    <onLoad="document.searchForm.search()">
    <table width="196" border="1">
     <tr>
        <th bgcolor="#D6D6D6" style="text-align: center" scope="col">Search For:</th>
      </tr>
      <tr style="text-align: center">
        <td class="cent1">
          <input name="search" type="text" onFocus="this.value='';" value="<?php echo isset        ($searchTerms)?htmlspecialchars($searchTerms):''; ?>" size="28" maxlength="15" />
          <span style="text-align: center"></span></td>
      </tr>
    </table>
    </form> 
    <p>
     <tr>
        <td bgcolor="#D6D6D6"><form action="addproduct.php">
          <center>
             <span class="formcentjc">
              <input type=submit value="Add New Product" />
              </span>
          </center>
        </form></td>
      </tr>
      <tr>
    </p>

    <?php 
    echo (count($results) > 0)?"SUCCESS: {$searchTerms} :<br /><br />" . implode("", $results):""; 
    ?>   
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:14:44.203

欢迎来到 StackOverflow！

这里的想法是从数据库中获取数据，然后重新填充表单。当我这样建页面的时候，我通常在URL中有一个参数包含MySQL行的主键，我要抓取，像这样`mypage.php?id=37`。

如果`$_GET['id']`设置并且是数字，那么我运行这样的查询：

```
$id = mysqli::real_escape_string($_GET['id']);
$data = mysqli::query("SELECT * FROM table WHERE id = '{$id}'");

//Check to see if we got any data back :) 
```

然后，我们可以再次填充表单：

```
<input name="value1" type="hidden" value="<?php echo stripslashes($data['value1'])" /> 
```

再次从用户提交数据后，运行如下查询：

```
$id = mysqli::real_escape_string($_GET['id']);
$value1 = mysqli::real_escape_string($_POST['value1']);
$value2 = mysqli::real_escape_string($_POST['value2']);
mysqli::query("UPDATE table SET value1='{$value1}', value2='{$value2}' ... WHERE id = '{$id}' LIMIT 1"); 
```

**编辑：**

根据我收集的信息，您在详细信息页面上的按钮将提交（我猜是产品名称）其中一个返回的产品返回到数据库，以及搜索它的时间和某种状态。

当您遍历获取的结果数组以将它们显示给用户时，我会收集产品的名称并将其推送到这样的数组中：

```
$fetchedProducts = array();

while (/*Loop condition to loop through fetched results*/) {
  array_push($loopVariable['productName'], $fetchedProducts);

  //Build HTML to display results
}

//Insert into database
$products = mysqli::real_escape_string(json_encode($fetchedProducts));
$timestamp = strtotime("now");
$status = "some status";

mysqli::query("INSERT INTO searchRecords (
                  `id`, `products`, `timestamp`, `status`
               ) VALUES (
                  NULL, '{$products}', '{$timestamp}', '{$status}'
               )"); 
```

希望有帮助。

# jsp - Dojo 1.6：只解析一个对象

> ID：12008975
> 
> 赞同：0
> 
> 时间：2012-08-17T15:47:43.877
> 
> 标签：jsp, dojo

我正在尝试将 dojo 小部件添加到页面。因为它是一个旧应用程序，所以我使用的是 dojo 1.6。该小部件在一个带有 HTML 模板和定义一些额外选项的 CSS 文件的 js 文件中定义。

我正在使用 JSP 和 JSPF，并且由于某种原因（可能是两者之间的区别？）当我将`<script>`标签放入我正在使用的 JSPF 文件中时，它们在页面加载时不会运行。我想我稍后会解决这个问题，同时只是为了测试我将代码放在运行脚本标记的头 JSP 文件中的其他内容。

`dojo.require("x.y.z");`

```
<div
    id="testDiv"
    dojoType="x.y.z" onclick="dojo.parser.parse()">abc</div> 
```

这按我想要的方式工作。有一个 div，当我单击它时，它会使用我定义的模板加载 dojo 小部件。

在 JSPF 文件中，我放了相同的 div (abc)，然后我也做了类似的事情，但又上一步：

```
<div onclick="
    dojo.require('x.y.z');
    var n = document.createElement('div');
    n.setAttribute('id', 'xyz');
    n.setAttribute('dojoType', 'x.y.z');
    n.setAttribute('onclick', 'dojo.parser.parse()')
    n.innerHTML = 'Test';
    document.body.appendChild(n);
    ">Click Me Please!</div> 
```

我把它放进去的原因是，当我只有 abc 时，它在 Firebug 中给了我以下错误：

```
Error parsing in _ContentSetter#Setter_1:13_0
Error: Could not load class 'x.y.z

Error undefined running custom onLoad code: This deferred has already been resolved
undefineddojo._scopeArgs = [undefined]; 
```

我想这是因为 xyz 不是 dojo.require'd，不像 JSP 那样，因为我无法让 javascript 在 jspf 中自动运行，所以我写了“请点击我”在 onclick 和然后做同样的事情，只是为了尝试测试并让它们工作。

第二个的想法是我应该能够单击它并让 div 从以前出现。它似乎做得很好并创建了div，但是当我点击div时它说

```
Tried to register widget with id==(numbers) but that id is already registered 
```

所以我认为这是因为我只是在所有内容上运行 dojo.parser.parse，它已经在页面上捕获了一些东西——实际上我应该在我制作的新东西上运行它。所以我试图弄清楚如何只做一件事 dojo.parser.parse 。我找到了 1.8 和 1.7 但不是 1.6 的信息。我该如何做到这一点，我是否正确理解事物并做出良好的假设？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:09:56.223

```
Error: Could not load class 'x.y.z 
```

意味着您正在调用`require`一个在包描述位置中找不到的类。xyz 转换为来自 dojo.js 文件的相对路径（通过 script-tag 包含），如下所示：

```
 <!-- if -->
 <script src="/server/path/dojotoolkit/dojo/dojo.js"></script>
 <!-- then -->
 <script>dojo.require("x.y.z");</script>
 <!-- equals -->
 <script src="/server/path/dojotoolkit/dojo/ ../x/y/z.js"></script> 
```

由于类无法加载，可能的原因是文件不存在并且您遇到 HTTP 404 错误。

就此错误消息而言：

```
Tried to register widget with id==(numbers) but that id is already registered 
```

这意味着您已经创建了两次小部件（您设置了唯一 ID：testDiv）。可能是因为 div onclick 被调用了两次.. dijit widgetId 必须保持唯一 - 如果您迫切需要创建一个新的相同的`id`，请先调用`dijit.byId(id).destroy();`。

简单的方法是在您的标记中留下 no `id`，然后将生成一个通用的自动递增 id。

# c++ - getch() 和 _getch() 的区别

> ID：12008979
> 
> 赞同：2
> 
> 时间：2012-08-17T15:47:49.130
> 
> 标签：c++, c

> **可能重复：**
> [不推荐使用 getch](https://stackoverflow.com/questions/814975/getch-is-deprecated)

正如标题所说，这两种方法有什么区别？我是新手，所以我对它们的用法感到困惑......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T16:05:03.600

至少在我知道的实现中，函数本身没有区别。实际上，它们通常只是完全相同功能的两个不同名称。

至于有两个名字的原因：确实没有一个很好的名字。微软的某个人显然没有仔细阅读该标准的要求，并且基于对它的误解做出了一些相当……糟糕的决定。

首先，没有在标准标头中声明，因此更改名称并不是从¹`getch`开始的真正必要的。~~其次，如果他们确实需要更改名称，~~~~那么无论如何都不对 - 为实现保留的名称以下划线开头（他们做得非常正确），然后是另一个下划线或大写字母（他们弄错了） .~~ ~~换句话说，如果他们要更改名称，它应该是~~~~, 或~~~~，但至少就标准而言，~~~~它和 plain 一样糟糕~~~~。~~^(~~`_getch``__getch``_Getch``_getch``getch`~~)

就它们之间的选择而言：我只是使用`getch`它并完成它。使用`_getch`实际上使您的代码（略微）不那么可移植——在大多数 Unix 系统上做同样的事情，你使用 curses，它包括一个函数来做（大部分）同样的工作——它的名字是`getch`. 因此，如果您曾经移植过您的代码，则需要更改包含的标头，但名称`getch`是少数几个实际上会继续工作的名称之一。如果您正在执行大量交互式 I/O，那么您可能不得不重写相当多的其他代码。

* * *

¹好吧，反正也不应该。回到 16 位时代，Microsoft 的*链接器*有一个小问题，您必须向它传递一个额外的开关 ( `/noe`) 或您定义的名称之间的任何重复，而您正在链接的库中定义的名称会导致错误。所以，那时你必须通过一个额外的开关来获取链接代码，如果它使用与库中*任何东西*相同的名称，而不仅仅是一个标准名称。但这几乎是古老的历史。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T06:58:04.663

微软 C 编译器的非常古老的实现提供的函数使用的名称与 POSIX/UNIX 世界中的名称相同和/或侵犯了用户的命名空间。请注意，其中一些是“侵权”，可能是在标准化发生之前（在 MS-DOS 时代）。

很久以前，Microsoft 决定将这些名称移动到为编译器实现保留的一组名称中。他们为图书馆里的许多名字都这样做了，即使严格来说他们可能不必这样做。似乎他们对所有非标准 C/C++ 的库名称都这样做了。请注意，这不适用于 SDK 中的名称 - 该组头文件和库位于编译器实现域之外，即使 SDK 与编译器一起分发也是如此。

为了与使用旧名称（没有下划线的程序）编写的程序兼容，Microsoft 提供了一个库 oldnames.lib，它实现了将旧名称（例如`getch`）链接到新名称 ( `_getch`) 的别名。这两个名称指的是完全相同的代码。因此，就使工作正常而言，您可以使用任一名称（尽管您可能需要设置您的项目以链接到`oldnames.lib`）。

如果您有使用旧名称的旧 Windows 代码，我认为最好只是链接`oldnames.lib`并完成。

对于新代码，我认为使用新名称（带下划线且不链接 oldnames.lib）可能会稍微好一些。旧名称已被 Microsoft 弃用，其他一切都相同的情况下，这可能会影响天平。而且，如果您最终将代码移植到 POSIX 系统或将 POSIX 代码移植到 Windows，则更有可能会提醒您注意可能需要注意的区域。这些函数可能看起来和大部分行为都类似于 POSIX 版本，但它们可能需要以稍微不同的方式使用 - 特别是在错误处理中。

或者，您可以尝试使用 PDCurses 之类的库，或者使用您自己的包装器来提供可移植性，具体取决于对您而言价值多少。或者，如果您真的希望在 Windows 上具有 POSIX 可移植性，Cygwin 可能是一种选择（Unix 服务仍然存在吗？）。

MSVC 和 POSIX 函数具有相同/相似名称的细微差别的一些示例：

*   `getch()`在 Windows 上永远不会回显字符，总是阻塞直到有输入，需要多次调用才能读取某些键，并且不能返回错误。这些行为与 POSIX 不同。
*   `ungetch()`在 Windows 上返回传入或`EOF`出错的字符。在 POSIX 上，它返回`OK`or `ERR`。

# c# - 在 EWS 中使用 StreamingSubscriptionConnection 时自动重新连接

> ID：12008982
> 
> 赞同：3
> 
> 时间：2012-08-17T15:48:01.283
> 
> 标签：c#, exchangewebservices, ews-managed-api

我创建了一个使用 EWS 托管 dll 监视收件箱的小应用程序。

当我创建时，`StreamingSubscriptionConnection`我会在 1 分钟内断开连接。

然后在断开连接事件处理程序中，我睡了 45 秒并重新连接。

如果在 45 秒的睡眠周期内有任何内容发送到收件箱，它最初看起来好像它已正确唤醒并触发了`NotificationEventDelegate`。然而，经过一些测试，当不止一封电子邮件到达时，它似乎会为同一封电子邮件多次触发。

如果我不睡觉，那么我就没有这个问题。所以我的问题是，为什么`NotificationEventDelegate`重新连接时不能正常工作，立即重新连接有问题吗？

我的代码如下，

```
private MailDirectorServer()
{
    _isRunning = false;

    ExchangeService _service = new ExchangeService()
    {
        Credentials = new WebCredentials(userName, password),
        Url = new Uri(uriAddress)
    };

    _connection = 
        new StreamingSubscriptionConnection(_service, 1);

    // set up subscriptions here.
    _connection.OnNotificationEvent +=
                new StreamingSubscriptionConnection.NotificationEventDelegate(OnNewMail);

    _connection.OnDisconnect +=
        new StreamingSubscriptionConnection.SubscriptionErrorDelegate(OnDisconnect);

    _connection.Open();
    _isRunning = true;
}

private void OnDisconnect(object sender, SubscriptionErrorEventArgs args)
{
    while (true)
    {
        if (_isRunning)
        {
            //_logger.Debug("Sleeping for 45 seconds");
            //Thread.Sleep(new TimeSpan(0, 0, 45));
            _connection.Open();
            _logger.Info("Connection Re Opened");
            break;
        }
        else
        {
            _logger.Info("Closing Down");
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:10:19.267

删除`Sleep`呼叫 - 立即重新连接 ( `connection.Open`)。请参阅[相关的 SO 帖子](https://stackoverflow.com/a/6490642/175679)。Microsoft 还在[他们的论坛中推荐了这种自动重新连接的过程](https://web.archive.org/web/20120702212534/http://community.office365.com/en-us/forums/159/t/14645.aspx)。

我还将断开连接间隔增加到**30 分钟**，以避免不断打开和关闭连接。断开一分钟后，您还不如使用[Pull Subscriptions](http://msdn.microsoft.com/en-us/library/exchange/aa579617%28v=exchg.140%29.aspx)。

当您的流媒体订阅出现错误时，您还应该处理[`OnSubscriptionError`](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.streamingsubscriptionconnection.onsubscriptionerror%28v=exchg.80%29)捕获。

# sublimetext2 - Sublime Text 2：如何删除空白/空行

> ID：12008986
> 
> 赞同：291
> 
> 时间：2012-08-17T15:48:12.737
> 
> 标签：sublimetext2

假设我有一个包含以下九行的文本文件：

```
foo

bar

baz

qux

quux 
```

如何使用 Sublime Text 2 删除所有四个空白/空行，只留下五行？

* * *

## 回答 #1

> 赞同：704
> 
> 时间：2012-08-17T16:22:52.597

选择文本

按：

*   `Ctrl`+`H`在 PC 上，或
*   `Command`+ `Alt`+`F`在 Mac 上或
*   单击查找->替换。

确保您已通过按以下方式选择“正则表达式”：

*   `Alt`+`R`在 PC 上或
*   `Command`+ `Alt`+`R`在 Mac 上或
*   单击`.*`查找框。

找到什么：`^\n`或`^(\r|\n\r?)`

替换为：（无，留空）。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2013-02-15T10:58:33.100

当行中没有空格时，Hugo 的答案中的正则表达式是正确的。如果有空格正则表达式可以`^\s+$`

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-06-12T08:43:32.460

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-01-21T09:54:40.707

查找/替换解决方案：

正则表达式查找：`\s+`

替换为： `//单个空格`

 `* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-09-12T10:15:58.797

甚至不知道这整件事是如何运作的，但我尝试过 `^\s*$`但没有奏效（仍然留下一些空行）。

**这`^\s*`对我** 
有用 {sublime text 3}

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-11-13T00:03:48.423

我不得不使用：

将 \n^\s*\n 替换为 \n

[https://github.com/NicholasBuse/sublime_DeleteBlankLines](https://github.com/NicholasBuse/sublime_DeleteBlankLines)插件什么也没做。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-10-29T07:46:24.840

比我想象的要简单。`Ctrl`+`A`后跟`Ctrl`+`H`然后选择正则表达式`.*`。替换`\n\n`为`\n`。瞧！

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-10-16T22:40:12.587

# 崇高的文字 2 & 3

@crates 的评论对我有用，

第 1 步：只需按下`ctrl`+`H`

第 2 步：按 RegEX 键

第 3 步：在 Find 中写下：`^[\s]*?[\n\r]+`

第四步：全部替换

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2019-03-27T18:29:55.807

他们是没有正则表达式的更简单的方法。您只需选择整个文本。然后转到：编辑--> 置换行--> 唯一。

就这样。并且所有空行都将被删除。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-10-25T16:53:36.493

使用多选：选择一对换行符，然后重复使用快速查找全部（`Alt`+ `F3`）或快速添加下一个（`Ctrl`+ `D`），将它们全部选中；然后点击`Enter`用单行换行符替换它们。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2014-08-15T14:43:54.520

你正在寻找这个：

```
^\n|^\s+$ 
```

如果前面有空格或制表符的内容，它不会删除该行>

例如：

这些不会被删除：...空格... abc

...标签... abc

这将：

...空间... ...没有别的...

...标签... ...没有别的...

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-07-16T04:40:13.387

另一种方式，您可以使用`cc.dbl`ConyEdit（一个插件）的命令行来删除空行或空行。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-03-05T19:40:58.287

对于那些对 sublime 文本编辑器感到好奇的人，[非官方文档](http://sublime-text-unofficial-documentation.readthedocs.org/en/latest/search_and_replace/search_and_replace_overview.html#regular-expressions)可能会很有趣！

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-04-10T12:58:02.460

还有“加入行”。如果在 OSX 上，选择所有文本，然后按 CMD-J 几次，它将按行折叠您的选择，删除换行符。

编辑：这种方法将使您将所有内容放在一条线上，这不是您所要求的。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-12-20T08:24:31.627

要查找额外的空格和空行，请按 `Ctrl`+ `Shift`+`F` 选择**正则表达式**查找

`[\n\r]{2,}`

然后替换为

`\n`

删除 sublime 和 dreamviewr 中的所有类型的空间

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-01-13T09:47:36.970

有一个很棒的包（用于 Sublime 2 和 3），叫做 ' **Trimmer** '，它可以删除空行。它还做了许多其他有用的事情。

请参考：[https ://packagecontrol.io/packages/Trimmer](https://packagecontrol.io/packages/Trimmer)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-05-12T19:30:45.523

使用查找/替换，尝试从空白行上方的行尾开始粘贴选择，并在空白行的开头结束。这适用于单个空行。您也可以对多个空行重复该过程。 `CTRL`- `H`，将您的选择放在查找框中，并通过复制/粘贴或其他方法在替换框中放置一个换行符。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-09-20T15:29:10.150

在我的例子中，一些空行包含 unicode 字符**零宽度空格**(U+200b)。要删除空行，包括带有此 Unicode 字符的行：

```
\s\x{200b}|^\s 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2017-04-29T04:10:50.967

如果 `^\n`不能正常工作 ===> 试试 `.*[^\w]\n``

# visual-studio-2010 - Visual Studio 2010：解决方案资源管理器未显示项目目录结构

> ID：12008988
> 
> 赞同：7
> 
> 时间：2012-08-17T15:48:26.943
> 
> 标签：visual-studio-2010, visual-studio, directory-structure, solution-explorer

我正在使用新安装的 MS Visual Studio 2010，似乎无法让解决方案资源管理器显示项目目录结构（而不​​是解决方案中每个项目的项目中所有文件的列表）。没有“显示所有文件”按钮。

关于我可以在哪里找到选项的任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-17T15:50:43.700

试试这个快捷方式：

`CTRL`+ `ALT`+`L`

您还可以访问查看并选择解决方案资源管理器

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-20T20:49:04.753

这是我解决它的方法：

没有办法对整个解决方案执行此操作。您必须在解决方案资源管理器中选择每个单独的项目并单击每个项目的`Show All Files`图标，然后显示的文件夹结构将是您的目录结构。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-25T10:37:44.993

您必须在您的解决方案中添加一个项目，首先在您的视觉工作室中转到：

*文件*-->*新建项目*-->*选择您的项目类型*

并且在新项目窗口的底部有一个解决方案选项，将其从“*创建新解决方案*”更改为“***添加到解决方案***”。

之后，您的解决方案资源管理器展开，解决方案节点将添加到解决方案资源管理器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-06T06:53:30.610

请参考以下 ULR 并根据 setps 执行操作。

[参考这里及其为我工作](https://allinworld99.blogspot.in/2015/06/visual-studio-error-no-exports-were.html)

# python - 在另一个类中创建类的实例（带有通用示例）

> ID：12008991
> 
> 赞同：22
> 
> 时间：2012-08-17T15:48:37.747
> 
> 标签：python, class, instance

我正在通过书籍和互联网学习 python，但我被困在一个课堂问题上。

2个问题：

1.  如何在另一个（单独的）类中创建一个类的实例？
2.  如何在类和嵌套（？）类之间传递变量？

当我尝试在另一个（单独的）类中创建一个类的实例时，我可以在一个方法中这样做。这是代码：

```
import os

class FOO():
    def __init__(self):
        self.values = [2, 4, 6, 8]

    def do_something(self, x, y):
        os.system("clear")
        z = self.values[x] * self.values[y]
        print "%r * %r = %r" % (self.values[x], self.values[y], z)

class BAR():
    def __init__(self):
        pass

    def something_else(self, a, b):
        foo1 = FOO()
        foo1.do_something(a, b)

bar = BAR()
bar.something_else(1, 2) 
```

但是，这是否允许我访问 FOO 类及其其他 BAR 方法中的信息？如果是这样，怎么做？

我尝试了以下操作并收到错误：

```
import os

class FOO():
    def __init__(self):
        self.values = [2, 4, 6, 8]

    def do_something(self, x, y):
        os.system("clear")
        z = self.values[x] * self.values[y]
        print "%r * %r = %r" % (self.values[x], self.values[y], z)

class BAR():
    def __init__(self):
        foo1 = FOO()

    def something_else(self, a, b):
        foo1.do_something(a, b)

bar = BAR()
bar.something_else(1, 2) 
```

这是错误：

```
Traceback (most recent call last):
File "cwic.py", line 22, in <module>
bar.something_else(1, 2)
File "cwic.py", line 19, in something_else
foo1.do_something(a, b)
NameError: global name 'foo1' is not defined 
```

我使用时遇到同样的错误：

```
def __init__(self):
    self.foo1 = FOO() 
```

另外，我应该如何将“值”从一个类传递到另一个类？

如果我的一般方法和/或语法错误，请告诉我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T16:16:49.023

实例或类的所有属性都可以通过`self`它作为第一个参数传递给所有方法来访问。这就是为什么您正确地获得了方法签名`something_else(self, a, b)`，而不是`something_else(a, b)`像其他语言一样。所以你正在寻找：

```
 class BAR():
        def __init__(self):
            self.foo1 = FOO()

    def something_else(self, a, b):
        self.foo1.do_something(a, b) 
```

请注意， self 不是关键字，它只是一个参数名称，例如`a`and `b`，因此如果您来自 Java 背景，您可能会想使用它`this`来代替……但不要这样做！为此目的有一个非常强大的约定，`self`如果你使用其他任何东西，你会让很多人（最终包括你自己）非常生气！

关于传递值，我不确定您的意思，您可以通过实例访问它们，例如`foo1.an_attribute`或将它们作为参数传递给函数，`function(arg)`但您似乎在示例中使用了这两种技术，所以我不确定还有什么你在追求...

**编辑**

作为对@dwstein 评论的回应，我不确定它是如何在 VB 中完成的，但这是创建类实例时传递参数的方式。

如果我们看看你的课：

```
class BAR():
    def __init__(self):
        self.foo1 = FOO() 
```

我们可以通过将第二行更改为来将其更改为接受参数 baz ，`def __init__(self, baz):`然后如果我们愿意，我们可以通过设置来`baz`为我们的新实例创建一个属性。希望有帮助。`BAR``self.baz = baz`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T15:55:03.153

在 python 中，访问类实例的成员时，您总是必须使用“self”前缀。尝试

```
class BAR():
    def __init__(self):
        self.foo1 = FOO()

    def something_else(self, a, b):
        self.foo1.do_something(a, b) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T15:55:38.863

您走在正确的轨道上，请尝试：

```
class BAR():
    def __init__(self):
        self.foo1 = FOO()

    def something_else(self, a, b):
        self.foo1.do_something(a, b) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-08T06:15:00.047

如果您不`def __init__(self):`为类创建方法，则必须将类初始化为：例如：

```
class XYZ:
    def foo(self):
        ....
        ....
r1 = XYZ() 
```

并访问您必须编写的方法`r1.foo()` 但是当您创建了一个 init 方法时，您必须访问 foo 函数，因为它 在您的代码`self.foo()`中等于so，而不是，它应该是`r1.foo()``foo1.do_something()``self.foo1.do_something()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-19T06:25:08.497

我不确定我是否理解你的问题，这更多地反映了我而不是你。如果我了解您要查找的内容，则您想在类方法中创建类的实例。现在，我可能在这里“偏离基础”，所以如果这令人困惑，那可能是我在回答与您的问题不同的问题。

```
#! /usr/bin/env python3

class MyClass ( object ):

  instance_list = []  

  def __init__ ( self, arg1, arg2):
    self.arg1 = arg1
    self.arg2 = arg2

  @classmethod
  def make_instances( cls ):
    for a1 in range(1,4):
      for a2 in range(1,3):
        cls.instance_list.append( MyClass( a1, a2 ) )

  @classmethod
  def dump_instance_list ( cls ):
    for instance in cls.instance_list:
      print( "arg1= %d\targ2= %d" % ( instance.arg1, instance.arg2) )

if __name__ == "__main__" :
  MyClass.make_instances()
  MyClass.dump_instance_list()
  an_instance = MyClass(14, 22)
  print("An instance: %d, %d" % (an_instance.arg1, an_instance.arg2)) 
```

这个程序所做的是创建一个类，`MyClass`，它有一个类对象，`instance_list`。 `instance_list`将是一个实例列表。类方法`make_instances`就是这样做的：它创建实例并填充`instance_list`. 在程序结束时，我创建`an_instance`了“通常”创建实例的方式。`an_instance`class 的对象也是如此`MyClass`。

我希望这是有帮助的

# jquery - jQuery 选择器仅在 IE 中不起作用

> ID：12008997
> 
> 赞同：1
> 
> 时间：2012-08-17T15:48:53.927
> 
> 标签：jquery, internet-explorer, selector, legacy, frameset

我正在处理一个旧网站，当单击某个链接时，我需要换出徽标图像。这适用于 firefox 和 chrome，但不适用于 IE。

为了增加问题的复杂性，包含脚本的页面嵌套在三个框架集中。该链接与脚本位于同一框架集中，但徽标位于顶部框架中。

```
$('a.reset-logo').click(function() {
    var img = '../images/img1.gif';

    var $img = $('img.header-image', window.parent.top.frames[0].document);

    //testing
    //shows the correct src in chrome/firefox -- undefined in IE    
    //alert($img.attr('src'));

    $img.attr('src', img);
}); 
```

是的，我必须保持使用框架。这不是重写，只是维护问题。我已经把头撞在墙上太久了。

我尝试将上下文更改为 window.top.frames[0].document ，但结果相同，等等。问题在于选择器，我似乎无法确定它是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:09:54.640

通过将脚本更改为以下内容，我能够使其工作：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('a.reset-logo').click(function (e) {
            var theFrame = window.parent.top.frames[0].document;
            var theSrc = '../images/img1.jpg';

            $(theFrame).find('img.header-image').attr('src', theSrc);
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T16:56:43.797

[http://jsfiddle.net/TJVuY/4/](http://jsfiddle.net/TJVuY/4/)有帮助吗？我拿走了 window.parent.top.frames[0].document- 它不是必需的，因为它引用了文档本身，现在它可以在 IE 8 中使用。

# asp.net-mvc - MVC 3“不包含验证消息的定义”

> ID：12008998
> 
> 赞同：4
> 
> 时间：2012-08-17T15:48:55.753
> 
> 标签：asp.net-mvc, validation, html-helper

我有以下代码试图用我自己的 @Html.MyValidationMessageFor(model => model.myfield) 扩展 @Html.ValidationMessageFor 并提供自定义错误 html

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Text;
using System.Linq.Expressions;

namespace Hml.BackEnd.Helpers
{
public static class HtmlHelpers
{
    public static MvcHtmlString MyValidationMessageFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression)
    {
        string myContent = "<div>" + htmlHelper.ValidationMessageFor(expression).ToString() + "</div>";
        return MvcHtmlString.Create(myContent);
    }
}
} 
```

我收到以下编译消息：

'System.Web.Mvc.HtmlHelper < Model > 不包含 ValidationMessageFor 的定义，并且没有扩展方法 ValidationMessageFor 接受类型为 'System.Web.Mvc.HtmlHelper < TModel > 的第一个参数是否缺少使用或程序集参考。

我无法理解，因为 System.Web.Mvc 在项目引用和使用中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T11:12:54.467

[ValidationExtensions.ValidationMessageFor](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.validationextensions.validationmessagefor%28v=vs.98%29.aspx)是[System.Web.Mvc.Html](http://msdn.microsoft.com/en-us/library/system.web.mvc.html%28v=vs.98%29.aspx)命名空间的一部分。您需要`ValidationExtensions`使用完整的命名空间显式引用或包含`System.Web.Mvc.Html`在`using`指令中。