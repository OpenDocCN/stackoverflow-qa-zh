# StackOverflow 问答 10047000-10047999

# php - 从页面回调中删除应用

> ID：10047006
> 
> 赞同：1
> 
> 时间：2012-04-06T17:34:14.603
> 
> 标签：php, facebook, facebook-graph-api, facebook-page

我有一个页面标签应用程序，当人们从他们的页面中删除它时，我想通知它。不寻找取消授权回调 - 我发现人们删除了该应用程序，但不要取消授权。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:40:43.163

据我所知，您无法从 Facebook 获得此信息。

# asp.net-mvc-3 - ASP.NET MVC 3：IgnoreRoute("{resource}.axd/{*pathInfo}"); 的目的 ? 已弃用？

> ID：10047008
> 
> 赞同：3
> 
> 时间：2012-04-06T17:34:33.450
> 
> 标签：asp.net-mvc-3

我还需要这条规则吗？
我没有看到任何对 resource.axd 文件的请求（与我运行 webform 应用程序时相反）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T17:46:10.057

> WebResource.axd 是一个 HTTP 处理程序，它是 .NET 框架的一部分，它只做一件事 - 它的任务是从 DLL 中获取嵌入式资源并返回其内容。通过查询字符串指定要转到的 DLL 和要采用的嵌入式资源。例如，对 www.yoursite.com/WebResource.axd?d=EqSMS...&t=63421... 的请求可能会返回嵌入在特定程序集中的特定 JavaScript 片段。

它仍然是框架的一部分，您仍然可以使用上述处理程序检索嵌入式资源。您不希望您的路由处理程序处理此类请求，这就是它被忽略的原因。我的猜测是，如果您完全确定您使用的应用程序/库不使用它，您可以摆脱它。

# shell - 外壳 -e 命令

> ID：10047013
> 
> 赞同：0
> 
> 时间：2012-04-06T17:35:24.267
> 
> 标签：shell, syntax

我遇到了[这个 OSX 的 shell 脚本](https://gist.github.com/erikh/2260182)，但我不明白以下内容：

`[ -e ~/Library/Application\ Support/Dock/*.db ]`在第 191 行？

该命令在做什么？我也见过类似的东西`[ -r "$file" ]`。我不完全理解这种语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T17:37:17.677

`-e`是`[`command 的一个参数（它是 的别名`test`；您可以使用 阅读完整的文档`man test`）。这意味着«如果文件或目录存在»。`[`除非之前重新定义，否则这条线是无害的。

# java - 如何旋转按钮矩阵

> ID：10047017
> 
> 赞同：0
> 
> 时间：2012-04-06T17:35:46.153
> 
> 标签：java, android

在我的布局中，我有带有图像的按钮矩阵，所以我希望按列旋转按钮，或者从右到左和从左到右，这样我就可以看到没有图像的空白按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T17:44:25.760

看看

[http://developer.android.com/reference/android/graphics/Matrix.html#postRotate%28float%29](http://developer.android.com/reference/android/graphics/Matrix.html#postRotate%28float%29)

可以为你工作

# ipython - 如何关闭 IPython notebook 的文档阅读部分？

> ID：10047020
> 
> 赞同：5
> 
> 时间：2012-04-06T17:36:06.800
> 
> 标签：ipython

`?`在 IPython 笔记本中，当您使用或查看某些文档时`help()`，会在显示文档的屏幕底部打开一个拆分框。虽然我觉得这对于继续使用一些 Python 代码很有用，但我想在阅读完文档后关闭这个吐槽，以便重新获得屏幕空间。但是我在任何地方都找不到说明，不是用谷歌，也不是在 IPython 笔记本文档中如何做到这一点？

有人知道吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T17:37:54.007

*Doh*，必须点击非常纤细的分隔线。然后子框架关闭...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-13T16:40:57.573

您必须按 q 键。这对我行得通。

# c - 创建和销毁线程

> ID：10047024
> 
> 赞同：0
> 
> 时间：2012-04-06T17:36:18.097
> 
> 标签：c, multithreading, pthreads

```
gcc (GCC) 4.6.3
c89 
```

你好，

我只是想知道这是否是处理 main 创建的工作线程/后台线程的最佳方法？

我这样做对吗？这是我第一次完成任何多线程程序。只是想确保我走在正确的轨道上，因为这必须扩展以添加更多线程。

我有一个线程用于发送消息，另一个线程用于接收消息。

非常感谢您的任何建议，

```
int main(void)
{
    pthread_t thread_send;
    pthread_t thread_recv;

    int status = TRUE;

    /* Start thread that will send a message */
    if(pthread_create(&thread_send, NULL, thread_send_fd, NULL) == -1) {
        fprintf(stderr, "Failed to create thread, reason [ %s ]",
                strerror(errno));
        status = FALSE;
    }

    if(status != FALSE) {
        /* Thread send started ok - join with the main thread when its work is done */
        pthread_join(thread_send, NULL);

        /* Start thread to receive messages */
        if(pthread_create(&thread_recv, NULL, thread_receive_fd, NULL) == -1) {
            fprintf(stderr, "Failed to create thread for receiving, reason [ %s ]",
                    strerror(errno));
            status = FALSE;

            /* Cancel the thread send if it is still running as the thread receive failed to start */
            if(pthread_cancel(thread_send) != 0) {
                fprintf(stderr, "Failed to cancel thread for sending, reason [ %s ]",
                        strerror(errno));
            }
        }
    }

    if(status != FALSE) {
        /* Thread receive started ok - join with the main thread when its work is done */
        pthread_join(thread_recv, NULL);
    }

    return 0;
} 
```

用于发送消息的工作线程/后台线程示例，仅作为示例

```
void *thread_send_fd()
{
    /* Send the messages when done exit */

    pthread_exit(NULL);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T17:53:45.307

唯一可能证明这种结构是合理的情况是，如果只交换一条消息，即使这样，也可能存在一些问题。

如果要在应用程序运行期间不断地交换消息，则更常见的做法是将两个线程都编写为循环并且永不终止它们。这意味着没有持续的创建/终止/销毁开销，也没有死锁生成器（AKA join）。它确实有一个缺点 - 这意味着您必须参与线程间通信的信号、队列等，但是如果您编写许多多线程应用程序，无论如何都会发生这种情况。

无论哪种方式，通常首先启动 rx 线程。如果先启动 tx 线程，则可能会在 rx 线程启动之前重新调整并丢弃 rx 数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T23:06:46.610

这是每条消息执行一次吗？似乎该调用创建了一个线程来发送 1 条消息，并创建了另一个线程来等待 1 个响应。然后调用，我假设整个程序，只是等待整个事情完成。假设接收者在发送者完成发送之前不能做任何事情，这绝对不会改善程序的实际或感知性能。现在准确地说，我们需要知道发送者和接收者到底在做什么，然后才能确定这样做是否有任何好处。为了任何好处，发送者线程和接收者线程必须有他们可以**同时**完成的工作......而不是串行的。如果目的是不让程序等待发送和接收事务，那么这根本不会这样做。

# php - Doctrine 2 / PHP - getDocComment() 总是返回 false - AnnotationReader / DocParser 失败

> ID：10047030
> 
> 赞同：1
> 
> 时间：2012-04-06T17:36:35.040
> 
> 标签：php, zend-framework, doctrine

我在这里有一个非常有趣（也很烦人）的问题。出于某种原因，PHP 方法[ReflectionClass::getDocComment()](http://www.php.net/manual/en/reflectionclass.getdoccomment.php)在我的生产环境中返回 false （虽然课程中实际上有一个块注释......）。

导致 Doctrine AnnotationReader / DocParser 失败：

（学说\通用\注释\AnnotationReader.php:143）

```
public function getClassAnnotations(ReflectionClass $class)
    {
        $this->parser->setTarget(Target::TARGET_CLASS);
        $this->parser->setImports($this->getImports($class));
        $this->parser->setIgnoredAnnotationNames($this->getIgnoredAnnotationNames($class));

        return $this->parser->parse($class->getDocComment(), 'class ' . $class->getName());
    } 
```

我环顾四周，并没有看到太多关于这个问题的信息，所以我想知道为什么我的生产服务器上没有发生这种情况，而我的本地环境中却没有。

*   会不会是因为一些 PHP 配置？
*   会不会是因为某些读/写/文件访问权限（chown 等...）？
*   会不会是因为一些[缓存配置](https://eaccelerator.net/ticket/229)？

我必须说我的想法已经不多了。

任何帮助深表感谢。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T04:10:19.453

行。这似乎与 eAccelerator 在缓存字节码时剥离所有注释的一些奇怪行为有关......

[http://wildlyinaccurate.com/eaccelerator-and-doctrine-2/](http://wildlyinaccurate.com/eaccelerator-and-doctrine-2/)

（重新）引用 Doctrine 团队的 beberlei 的话：

> 应该恢复这种用于删除文档块的过早优化。Docblocks 是 PHP 令牌是有原因的，它们是语言的一部分，应该以这种方式使用。请修改您对此的立场，否则项目必须建议不要默认使用 eAccelerator。

解决方案是禁用 eAccelerator 或使用以下选项重新配置它：

```
--with-eaccelerator-doc-comment-inclusion 
```

（来源：[https](https://eaccelerator.net/ticket/229) ://eaccelerator.net/ticket/229 ）

# visual-studio-2010 - 如何使用VC++将数据保存到excel文件中？

> ID：10047032
> 
> 赞同：0
> 
> 时间：2012-04-06T17:36:51.233
> 
> 标签：visual-studio-2010, excel, c++-cli

我是 VC++ 的新手。我需要将数据保存到 Excel 文件中。请给我一些方向。我不知道从哪里开始。请帮忙

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:50:48.010

EPPlus is a library that allows to write and read excel files. I used it in c#, but I know it works in vb.net, so it should work for C++ as well since it's a dll.

[http://epplus.codeplex.com/](http://epplus.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T20:41:59.357

[OfficeWriter](http://www.officewriter.com/officewriter-api.aspx)是您可能希望查看的另一种解决方案。它是 .NET，因此您可以像 EEPlus 一样将其链接。[评估是免费的](http://www.officewriter.com/officewriter-free-evaluation-b.aspx)。它非常强大，因此根据您要生成的确切内容，它可能有点过头了。另外，免责声明，我是构建最新版本的工程师之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T20:57:12.187

如果您只是想编写表格数据，最简单的解决方案之一是使用 ADO。您可以执行 SQL INSERT 查询以在 Excel 工作表上写入数据行：http: [//support.microsoft.com/kb/257819](http://support.microsoft.com/kb/257819)

# ruby-on-rails - 如何使用存储在数据库中的参数构建对象的动态集合

> ID：10047034
> 
> 赞同：0
> 
> 时间：2012-04-06T17:37:13.167
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我正在运行一个带有 MySQL DB 的 Rails 3.2 应用程序，我想构建一个模型，它是一种动态集合，例如我将调用它`Album`。

专辑应该包含另一个模型的多个实例，例如我称它们为`Item`s 但我不想仅将它们与一对多连接表静态关联。

还应该可以定义标准，例如：

*   `Album`包含`Item`从开始日期到结束日期的 s
*   `Album`包含`Item`s，其中标志 XY 为“foo”
*   ..

这些标准/参数应永久存储在数据库中。`Item`s不应链接一次，`Item`如果与参数匹配，则应将新s附加到相册

参数的数量应该是灵活的，例如一个专辑的多个时间范围应该是可能的。所以我想了一个额外的表来存储专辑和匹配的时间范围之间的关系。

什么是最好/最高效的方式来实现这种方式并`Album`通过简单的`album.items`调用使所有项目都可以访问？

我应该如何/在哪里存储动态链接的参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T05:40:51.937

我认为您可以创建一个`ItemSet`类，因为每个类都`Album`可以有多组标准。`ItemSet`可以有使用单表继承的各种子类（或者您可以通过另一种方式实现这种行为；请参见[此处](http://code.alexreisner.com/articles/single-table-inheritance-in-rails.html)），并且您可以根据每个子类的类型（基于日期、标志集等）`items`在每个子类中定义方法`ItemSet`.)。`album.items`将是`items`每个 中的并集`album.item_sets`。

# javascript - 使用 jQuery 更改文本

> ID：10047035
> 
> 赞同：0
> 
> 时间：2012-04-06T17:37:17.053
> 
> 标签：javascript, jquery, html, dom

我要做的是向可扩展标题添加一个`[+]`或`[-]`符号，这样一旦用户单击标题，它的内容部分就会显示出来，它的符号部分将从`+`to更改，`-`反之亦然。由于有多个标题，我使用了 jQuery 的 `next()`. 到目前为止，`.content`切换效果很好，但由于某种原因，符号没有改变。

```
<script type="text/javascript">
jQuery(document).ready(function() {
  jQuery(".content").hide();

  jQuery(".heading").click(function()
  {
    jQuery(this).next(".content").toggle();
    if (jQuery(this).next(".sign").text()=="[+]")
    {jQuery(this).next(".sign").text("[-]");}
    else
    {jQuery(this).next(".sign").text("[+]");}

  });
});
</script> 
```

* * *

```
for (int i = 0; i < nodes.getLength(); i++)
 {
   Element element = (Element) nodes.item(i);
   NodeList title = element.getElementsByTagName("Title");
   Element ttl = (Element) title.item(0);
   String linkTitle = getCharacterDataFromElement(ttl);
   htmlReturn += "<a href='#' class='heading'><h4>" + linkTitle + " <span class='sign'>[+]</span></h4></a>";
   htmlReturn += "<div class='content'>";

    ...

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T17:43:53.770

因为符号是标题的后代元素，而不是兄弟元素，所以使用[`find`](http://api.jquery.com/find/)代替[`next`](http://api.jquery.com/next/)：

```
var sign = jQuery(this).find(".sign");
sign.text(sign.text() === "[+]" ? "[−]" : "[+]");
// Note: A minus sign (−) has the same width as a plus sign (+),
// whereas a hyphen (-) is typically narrower. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T17:43:48.130

```
if (jQuery(".sign").text()=="[+]")
{jQuery(".sign").text("[-]");}
else
{jQuery(".sign").text("[+]");} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T17:44:18.167

好吧，`next()`只得到直接的兄弟姐妹。尝试`closest()`改用。

# c# - 在 Windows Phone 7 中使用 ReactiveOAuth 访问 Dropbox

> ID：10047038
> 
> 赞同：0
> 
> 时间：2012-04-06T17:37:20.967
> 
> 标签：c#, windows-phone-7, dropbox, dropbox-api

我正在构建一个需要访问 Dropbox 的应用程序。由于还没有适用于 windows phone 的 api，我正在使用 ReactiveOAuth 来实现这一点。

我指的是本教程，[http://blogs.developpeur.org/kookiz/archive/2011/11/13/wp7-upload-a-file-to-dropbox-using-reactiveoauth-wp7.aspx](http://blogs.developpeur.org/kookiz/archive/2011/11/13/wp7-upload-a-file-to-dropbox-using-reactiveoauth-wp7.aspx)。

我已按照所有步骤操作，但 VS 显示错误提示

> 错误 1“DropBoxTest.MainPage”不包含“RequestToken”的定义，并且找不到接受“DropBoxTest.MainPage”类型的第一个参数的扩展方法“RequestToken”（您是否缺少 using 指令或程序集引用？）

我已经添加了所有提到的类和引用。任何人都可以看看和帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T13:07:18.823

你应该看看 Spring.NET Dropbox。它支持 WP7 并提供了一个示例。 [http://www.springframework.net/social-dropbox/](http://www.springframework.net/social-dropbox/)

# php - Youtube API 的 2-legged OAuth 与 3-legged OAuth

> ID：10047041
> 
> 赞同：2
> 
> 时间：2012-04-06T17:37:26.987
> 
> 标签：php, wordpress, oauth, youtube

我正在修改一个 Wordpress 插件，以允许用户通过表单将视频上传到 Youtube。（这样的插件已经存在，但我是为有特定要求的客户做的。）这些视频将上传到属于我的客户的 Youtube 帐户。

通读 Youtube API 和 Google API，OAuth 是向 Google 的服务器进行身份验证以使用其 API 的首选方法。但是，我看到的所有示例都需要用户授权从 OAuth 客户端到 OAuth 服务器的连接，类似于 OpenID 要求用户登录帐户的方式。

如果可能的话，我想避免这种情况；我不希望网站访问者通过 Wordpress 插件将视频上传到他们自己的帐户。即使他们无法选择帐户，我也不希望他们必须授权客户端访问。基本上，我想跳过验证阶段，因为我知道我有权限。

从我一直在阅读的内容来看，2-legged OAuth 允许应用程序对另一个应用程序进行身份验证，而无需任何额外的验证步骤，这正是我想要的。但是，上传视频需要登录用户帐户，因为它不是匿名功能（例如获取最新上传视频的列表）。

2-legged OAuth 可以做我想做的事情（单用户身份验证，不指定 UID/通行证，并且没有帐户确认）还是我仅限于 3-legged OAuth？

# asp.net - ScriptManager.RegisterClientScriptBlock 注册脚本两次

> ID：10047043
> 
> 赞同：0
> 
> 时间：2012-04-06T17:37:44.957
> 
> 标签：asp.net, asp.net-ajax, updatepanel, servercontrol

在我的自定义服务器控件的 OnPreRender 上，我正在注册一个警报以在每次页面在部分回发后加载时弹出 (add_pageLoaded(function() { alert('Hi')}))。我只希望它被调用一次，但它被调用的次数与部分回发的次数一样多。例如，在下面的代码中，如果您打开页面并单击“单击我”，您会得到一个警报，再次单击，您将得到两个警报，三个 --> 三个警报，依此类推。我的理解是 ScriptManager.RegisterClientScriptBlock，使用 scriptKey 参数是为了检查脚本是否已经注册，如果是，不要再次注册。我无法在 !IsPostBack 上注册此脚本，因为我的自定义控件将在回发期间插入到页面中，因此使用 !IsPostBack 不会包含我的脚本。

这是此问题的一个简单示例：

ASPX：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs"                                          Inherits="RegisterClientScriptExperimentation._Default" %>
<%@ Register Assembly="RegisterClientScriptExperimentation"         Namespace="RegisterClientScriptExperimentation" TagPrefix="cc" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>    
        <asp:ScriptManager ID="ScriptManager1" runat="server"/>       
        <asp:UpdatePanel runat="server">
            <ContentTemplate>
                <asp:Panel ID="panel" runat="server"/>                    
            </ContentTemplate>
        </asp:UpdatePanel>        
    </div>
    </form>
</body>
</html> 
```

后面的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Text;

namespace RegisterClientScriptExperimentation
{
    public partial class _Default : System.Web.UI.Page
    {
        protected override void OnInit(EventArgs e)
        {
            base.OnInit(e);
            panel.Controls.Add(new CustomControl());
        }
    }

    public class CustomControl : CompositeControl
    {
        private Button button;
        public CustomControl()
        {
            button = new Button();
            button.Text = "Click me";
        }
        protected override void CreateChildControls()
        {
            Controls.Clear();
            Controls.Add(button);
        }
        protected override void OnPreRender(EventArgs e)
        {
            base.OnPreRender(e);

            StringBuilder _text = new StringBuilder();
            _text.Append("var prm = Sys.WebForms.PageRequestManager.getInstance();");
            _text.Append("prm.add_pageLoaded(function() { alert('Page Loaded'); });");

            if (null != System.Web.UI.ScriptManager.GetCurrent(Page) && System.Web.UI.ScriptManager.GetCurrent(Page).IsInAsyncPostBack)
                System.Web.UI.ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "customControlScript", _text.ToString(), true);
            else
                Page.ClientScript.RegisterStartupScript(this.GetType(), "customControlScript", _text.ToString(), true);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T20:31:33.507

我找到了解决方案。

在您的页面事件中，执行您需要执行的任何操作后，您需要从您挂钩的事件中删除该函数。

例如：

```
var prm = Sys.WebForms.PageRequestManager.getInstance();
prm.add_pageLoaded(DoSomething);

function DoSomething() {
  alert('Hello');
  Sys.WebForms.PageRequestManager.getInstance().remove_pageLoaded(DoSomething);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:10:04.817

```
 if(!Page.ClientScript.IsClientScriptBlockRegistered("customControlScript") && !Page.IsPostBack)
        {

        if (null != System.Web.UI.ScriptManager.GetCurrent(Page) && System.Web.UI.ScriptManager.GetCurrent(Page).IsInAsyncPostBack)              
            System.Web.UI.ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "customControlScript", _text.ToString(), true);            
        else
            Page.ClientScript.RegisterStartupScript(this.GetType(), "customControlScript", _text.ToString(), true);
        } 
```

# sql - SQL查询以选择总数的百分比

> ID：10047048
> 
> 赞同：3
> 
> 时间：2012-04-06T17:38:08.543
> 
> 标签：sql, sql-server

我有一个 MSSQL 表存储，表中包含以下列：

```
Storeid, NumEmployees
1       125 
2       154
3       10 
4       698
5       54  
6       98
7       87
8       100
9       58
10      897 
```

有人可以帮助我使用 SQL 查询来生成占员工总数（NumEmployees）30% 的顶级商店（storeID）吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-06T17:46:58.163

```
WITH cte 
     AS (SELECT storeid, 
                numemployees, 
                ( numemployees * 100 ) / SUM(numemployees) OVER (PARTITION BY 1) 
                AS 
                percentofstores 
         FROM   stores) 
SELECT * 
FROM   cte 
WHERE  percentofstores >= 30 
ORDER BY numemployees desc 
```

[工作演示](http://sqlfiddle.com/#!3/be2fa/1)

不使用 SUM/OVER 的替代方案

```
SELECT s.storeid, s.numemployees 
FROM   (SELECT SUM(numemployees) AS [tots] 
        FROM   stores) AS t, 
       stores s 
WHERE  CAST(numemployees AS DECIMAL(15, 5)) / tots >= .3 
ORDER BY s.numemployees desc 
```

[工作演示](http://sqlfiddle.com/#!3/be2fa/14)

请注意，在第二个版本中，我决定在除法之前不乘以 100。这需要强制转换为十进制，否则它将被隐式转换为 int 导致不返回任何记录

此外，我并不完全清楚您是否想要这个，但您可以添加`TOP 1`到这两个查询中，它将结果限制为具有最大商店数量超过 30% 的结果

**更新**

根据您的评论，听起来像是在解释[凯文](https://stackoverflow.com/questions/10047048/sql-query-to-select-percentage-of-total/10047147#comment12855455_10047048)

> 你想要这些行，从员工最多的商店开始，一直到至少有 30 %

这很困难，因为它需要一个运行百分比并且它是一个装箱问题，但这确实有效。注意我已经包含了另外两个测试用例（百分比完全等于并且它刚刚超过前两个的组合）

[工作演示](http://sqlfiddle.com/#!3/be2fa/28)

```
DECLARE @percent DECIMAL (20, 16) 

SET @percent = 0.3
--Other test values
--SET @percent = 0.6992547128452433
--SET @percent = 0.6992547128452434 

;WITH sums 
     AS (SELECT DISTINCT s.storeid, 
                         s.numemployees, 
                         s.numemployees + Coalesce(SUM(s2.numemployees) OVER ( 
                                                   PARTITION 
                                                   BY 
                                                   s.numemployees), 0) 
                         runningsum 
         FROM   stores s 
                LEFT JOIN stores s2 
                  ON s.numemployees < s2.numemployees), 
     percents 
     AS (SELECT storeid, 
                numemployees, 
                runningsum, 
                CAST(runningsum AS DECIMAL(15, 5)) / tots.total 
                running_percent, 
                Row_number() OVER (ORDER BY runningsum, storeid ) rn 
         FROM   sums, 
                (SELECT SUM(numemployees) total 
                 FROM   stores) AS tots) 
SELECT p.storeID,
       p.numemployees,
       p.running_percent,
       p.running_percent,
       p.rn 
FROM   percents p 
       CROSS JOIN (SELECT MAX(rn) rn 
                  FROM   percents 
                  WHERE  running_percent = @percent) exactpercent 

       LEFT JOIN (SELECT MAX(rn) rn 
                   FROM   percents 
                   WHERE  running_percent <= @percent) underpercent 
         ON p.rn <= underpercent.rn 
             OR ( exactpercent.rn IS NULL 
                  AND p.rn <= underpercent.rn + 1 ) 
WHERE 
      underpercent.rn is not null or p.rn = 1 
```

# android-emulator - 启用 GPU 仿真时 Android 模拟器无限加载和错误

> ID：10047050
> 
> 赞同：2
> 
> 时间：2012-04-06T17:38:29.040
> 
> 标签：android-emulator, gpu, emulation

我已经从官方网站下载了整个 Android SDK，并安装了一个新的模拟器（Android 4.0.3）。只要我没有启用 GPU 仿真，它就可以工作（即使它需要大约 5 分钟才能启动然后使用大量资源）但是当我启用它时，仿真器会进入循环或其他东西并且它永远不会加载。当我查看任务管理器时，我看到内存使用量一直在增长，直到 Windows 消息显示关于剩余内存不足的警告（因此，我必须关闭它）。

当我执行*“adb logcat”*时，我得到这个重复错误：

```
E/EGL/Emulation < 113>: RcMakeCurrent returned EGL_FALSE
E/EGL/Emulation < 113>: tid 114: egMakeCurrent<976>: error 0x3006 <EGL_BAD_CONTEXT>
E/libEGL        < 113>: egMakeCurrent:674 error 3006 <EGL_BAD_CONTEXT>
E/SurfaceFlinger< 113>: Couldn't create a working GLES context. checks logs. exiting... 
```

我的电脑显卡是 nVidia 8400 GS 512 Mb，我的处理器是 3,2 Ghz Intel，它不支持硬件虚拟化，我可以运行 WebGL。也许这些信息可能对问题的检测有用。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:30:20.003

SDK 工具修订版 19 解决了问题

[http://code.google.com/p/android/issues/detail?id=28529](http://code.google.com/p/android/issues/detail?id=28529)

# ruby - 如何在 Ruby 中调用方法？

> ID：10047053
> 
> 赞同：0
> 
> 时间：2012-04-06T17:38:32.510
> 
> 标签：ruby, methods

嘿，我的计算两个数组协方差的方法有问题。

总是有错误：

> main:Object 的未定义方法“kovarianz”

这是我的代码：

```
rohstoff1 = "Eisen"
rohstoff2 = "Neodym"

daten_rohstoff1 = [1,2,3,4,5,6]
daten_rohstoff2 = [10,11,15,16,17,18]

module Enumerable
  def mean
    m = self.reduce(:+) / self.length.to_f
    return m
  end

  def covariance (dat1,dat2)
    kovar = dat1.inject(0) { |sum, x| sum + (x-dat1.mean) } *
    dat2.inject(0) { |sum, x, i| sum + (x-dat2.mean) } / dat1.length.to_f
    return kovar
  end
end

puts "Kovarianz von #{rohstoff1} und #{rohstoff2} = " +
covariance(daten_rohstoff1,daten_rohstoff2) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T17:55:20.733

你正在做的事情有两件事是错误的。首先，您定义了一个 Enumerable 实例方法，而不是类方法。您不会传入正在操作的数组，而是`covariance`直接在数组上调用：

`daten_rohstoff1.covariance daten_rohstoff2`

因此，您应该将方法定义为仅采用一个参数，即第二个数组。

其次，如前所述，您已经定义了一个方法`covariance`，但正在尝试调用`kovarianz`. 这显然行不通。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T17:48:04.187

好吧，这里的主要问题是您调用了 kovarianz，而不是协方差，但是代码也嵌入在模块中的事实意味着您必须像这样调用它：

```
Enumerable::covariance(daten_rohstoff1,daten_rohstoff2) 
```

希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T17:40:31.453

方法名称被调用`covariance`，但您`kovarianz`在最后一行调用。改变一个或另一个，你应该是金色的。

# image-processing - 图像检索——边缘直方图

> ID：10047057
> 
> 赞同：1
> 
> 时间：2012-04-06T17:38:53.897
> 
> 标签：image-processing, graphics, computer-vision

我的讲师有幻灯片`edge histograms`，`image retrieval`他说必须首先将图像分割成`4x4 blocks`，然后检查`horizontal, vertical, +45°, and -45° orientations`. 然后他说这在 a 中表示`14x1 histogram`。我不知道他是如何决定`14x1 histogram`必须创建 a 的。有谁知道他是如何得出这个值的，或者如何创建一个`edge histogram`？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T04:18:11.077

您所指的东西称为定向梯度直方图（HoG）。但是，数学不适用于您的示例。通常您会选择空间分箱参数（4x4 块）。对于每个块，您将计算一些不同方向的梯度幅度（在您的情况下，只有 2 个方向）。因此，在每个块中，您都会进行`N_{directions}`测量。将其乘以块数（您为 16 个），您会看到`16*N_{directions}`总测量值。

要形成直方图，您只需将这些测量值连接成一个长向量。只要您跟踪将 bin/direction 组合映射到 1-D 直方图中的插槽的方式，任何进行连接的方法都可以。然后，这种长的串联直方图最常用于机器学习任务，例如训练分类器以根据图像的梯度方向识别图像的某些方面。

但是在您的情况下，教授必须做一些特别的事情，因为如果您有 16 个不同的图像块（图像块的 4x4 网格），那么您需要计算每个块少于 1 个测量值才能得到总共整体直方图中的 14 个测量值。

或者，教授可能意味着您取 [-45,+45] 之间的角度范围，并将其分为 14 个不同的值：-45、-45 + 90/14、-45 + 2*90/14、 ... 等等。

如果这就是教授的意思，那么在这种情况下，您会在一个街区内获得 14 个方向箱。将所有内容连接起来后，您将拥有一个非常长的 14*16 = 224 分量向量来描述整个图像。

顺便说一句，我已经对梯度直方图的 Python 实现进行了很多测试，因此您可以[在此处](http://people.seas.harvard.edu/~ely/faceparts/index.html)或[此处查看](http://people.seas.harvard.edu/~ely/faceparts/about.html)链接的一些工作。该站点上也有一些示例代码，尽管更受支持的 HoG 版本出现在[scikits.image](http://scikits-image.org/)中。

# android - Android Camera "Error -1" wenn 调用 camera.takePicture

> ID：10047060
> 
> 赞同：0
> 
> 时间：2012-04-06T17:39:03.630
> 
> 标签：android, camera, android-camera

在我的活动中，我想用 android.hardware.Camera 拍照。代码（见下文）在我的 AVD 中运行良好，但在我的 Android 手机上不起作用 - 我得到的只是“错误 -1”。

**AVD**：目标：Android 2.3.3 SD 卡：64 MB WVGA800

**手机**：三星 Galaxy S2 安卓 2.3.6

**代码**：
`android.hardware.Camera camera = Camera.open();
camera.takePicture(null, null, mPictureCallback);
camera.stopPreview();
camera.setPreviewCallback(null);
camera.release();
camera = null;` 

**显现：**
`uses-feature android:name="android.hardware.camera"
uses-permission android:name="android.permission.CAMERA"` 

我不认为 PictureCallback 很重要 - 当我在 onPictureTaken 方法中评论所有内容时，会返回相同的错误。此外，我重新启动了手机，尝试设置一些相机参数等 - 但没有任何帮助。我也找不到相机的这个特定错误代码。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-14T23:43:10.120

您的代码有一个重要的缺失部分。您需要先打电话`startPreview()`，然后再打电话`takePicture()`。另一个重要的事情是，拍摄的照片可能会延迟一点，java Garbage Collector 可以在你得到结果之前收集你的相机变量。所以释放图片回调方法上的相机变量。你也不需要明确定义`setPreviewCallback(null)`，你可以从你的代码中删除它。重要的是要避免在`startPreview()`拍摄照片之前执行两次。禁用界面上的元素并在回调方法之后（和内部）启用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:20:54.393

如果没有正确分配的**SurfaceView**，它将无法工作。

甚至**SurfaceView**也必须具有最小尺寸。

# prolog - 序言。填写清单

> ID：10047062
> 
> 赞同：1
> 
> 时间：2012-04-06T17:39:12.740
> 
> 标签：prolog

我必须填写一个长度为 n 位的列表。我知道 n-1 在 1 到 9 的范围内，一个数字可以在 1 到 99 的范围内。我是这样做的：

```
generate([First|Next],Czynniki):-
    between(1,99,First),
    generate2(Next).

generate2(Next):-
    sublist([1,2,3,4,5,6,7,8,9],Next).

sublist([],[]).
sublist([H|T],[H|S]):-
    sublist(T,S).
sublist([_|T],S):-
    sublist(T,S). 
```

这样做我会生成一些相同的解决方案。也许你有一些想法，我怎样才能生成不重复的列表？

### 编辑

为了清楚起见，我（@repeat）添加了 OP 的以下相关评论：

> 在入口处，我有`N`未定义变量的长度列表。并想填写我的清单：`N-1`区间中的数字`1-9`和范围中的一个数字`1-99`。
> 
> 示例：N=5, L=[56,2,3,4,8] ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-19T19:43:03.350

**使用[clpfd](/questions/tagged/clpfd "显示标记为“clpfd”的问题")！**

```
:- use_module(library(clpfd)). 
```

让我们`digits10plusdigit100_n/2`这样定义：

```
digits10plusdigit100_n(Zs,N) :-
   Zs = [CentDigit|DecDigits],
   length(Zs,N),
   CentDigit in  1..99,
   DecDigits ins 1..9,
   labeling([],Zs). 
```

示例查询：

```
?- digits10plusdigit100_n(Zs,1).
  Zs = [1]
; Zs = [2]
; Zs = [3]
...
; Zs = [98]
; Zs = [99]
; false.

?- digits10plusdigit100_n(Zs,3).
  Zs = [1,1,1]
; Zs = [1,1,2]
; Zs = [1,1,3]
...
; Zs = [1,2,1]
; Zs = [1,2,2]
...
; Zs = [1,9,8]
; Zs = [1,9,9]
; Zs = [2,1,1]
; Zs = [2,1,2]
...
; Zs = [2,1,3]
; Zs = [2,1,4]
...
; Zs = [98,9,9]
; Zs = [99,1,1]
; Zs = [99,1,2]
...
; Zs = [99,9,8]
; Zs = [99,9,9]
; false. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T19:14:39.320

可能会改变`between(10,99,X)` 你的谓词，生成小于 10 的数字，然后生成最后一个大于 10 的变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T22:57:54.270

这不只是@false 在[这里非常优雅地所做的一种变体吗？](https://stackoverflow.com/questions/9980581/how-does-this-compute-i-am-trying-to-understand-how-the-values-of-h-get-assign)

```
gen(Xs) :-
       between(1, 9, L),
       length(Xs, L),
       maplist(between(1,99), Xs).

?- gen(Xs).
Xs = [1] ;
Xs = [2] ;
Xs = [3] ;
Xs = [4] ;
Xs = [5] ;
  ..
Xs = [99] ;
Xs = [1, 1] ;
Xs = [1, 2] ;
Xs = [1, 3] ;
Xs = [1, 4] ;
..
Xs = [1, 98] ;
Xs = [1, 99] ;
Xs = [2, 1] ;
Xs = [2, 2] ;
Xs = [2, 3] ;
Xs = [2, 4] ;
Xs = [2, 5] ;
Xs = [2, 6] ; 
```

# google-maps-api-3 - 检查点是否在视口中

> ID：10047063
> 
> 赞同：1
> 
> 时间：2012-04-06T17:39:18.453
> 
> 标签：google-maps-api-3

我这样检查：在此处输入代码 var point = new g.LatLng(parseFloat(lat),parseFloat(lng)); var bounds = map.getBounds(); if (bounds.contains(point)) { 点在视口中 }

但是当我更改缩放级别时，在视口的坐标之前，“不可见”点不会被检测为“可见”，我的意思是在视口中。点不是标记！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T21:41:03.017

我写了一个可能适用于您的场景的 hack。据我测试，当世界没有很多重复时，它可以工作。我知道如果世界显示两次或更多，这个黑客是不可靠的。因此，如果您可以设置地图的 minZoom，就可以防止这种情况发生。

这个想法是将地图分成左右两半，并检查标记是否在任一半。

这是hack，小心使用

[http://jsfiddle.net/QeR2D/3/](http://jsfiddle.net/QeR2D/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:06:39.070

如果您的视口中包含的不仅仅是地球的整个圆周，那么事情可能会出错。

左侧边缘可能比右侧边缘更靠东。`map.getBounds()`在这种情况下得到错误的结果。

左侧边缘可能在右侧边缘以西，但由两者的经度定义的区域可能不包括兴趣点。

这是我为另一个答案开发[的地图图像，](http://www.acleach.me.uk/gmaps/v3/wraparound.png)它证明了这一点。左侧边缘位于 83°E，右侧边缘位于 162°E。标记位于 54°W 和 8°W 并且两者都不在其中`map.getBounds()`——它们不在 83°E 和 162°E 之间——尽管它们显然在地图上。

我不知道 API 中有任何方法可以满足这种情况。

# php - 使用 jquery.MultiFile 将多个文件上传到 FTP 服务器

> ID：10047068
> 
> 赞同：1
> 
> 时间：2012-04-06T17:39:33.090
> 
> 标签：php, jquery

我在将多个文件上传到我的 ftp 服务器时遇到问题，我正在使用 jQuery 的多文件扩展名。

这是带有上传表单 (file_upload.php) 的页面上的多文件 javascript 代码：

```
<script type="text/javascript">
    $(function(){ // wait for document to load 
     $('.remove').MultiFile({ 
        STRING: {
         remove: '<img src="images/upload-remove.png" height="16" width="16" alt="x"/>',
         denied:'You can't choose file $ext .\nTry again...',
         file:'$file',
         selected:'Chosen file: $file',
         duplicate:'This file is already chosen:\n$file'
        }
     }); 
    });
</script> 
```

这是 HTML 表单（file_upload.php）：

```
<form name="uploader" action="file_upload2.php" method="post" enctype="multipart/form-data">
    <fieldset>
        <label for="file">Upload file:</label>
        <br />
            <input type="file" class="multi, remove" name="file[]" value="Upload file" />
            <input type="submit" value="submit"/>
    </fieldset>
</form> 
```

PHP部分是我不明白的地方。我试图用这段代码（file_upload2.php）来做到这一点：

```
<?php
if(isset($_POST['submit']))
{
    $ftp_config['server'] = 'ftpserver.org'; //ftp host
    $ftp_config['username'] = 'ftp_username'; // ftp username
    $ftp_config['password'] = 'ftp_password'; // ftp user password
    $ftp_config['web_root'] = 'public_html'; //foldername from user home dir.

    $fileElementName = 'file[]'; //file field name

    $conn_id = ftp_connect($ftp_config['server']);
    $ftp_login = ftp_login($conn_id,$ftp_config['username'],$ftp_config['password']);

    if(!ftp_put($conn_id,$ftp_config['web_root'].'/'.$_FILES[$fileElementName]['name'],$_FILES[$fileElementName]['tmp_name'],FTP_BINARY)){
        $result = " Error occurred.  ";
    }else{
        $result = " File has been uploaded. ";
    }
    echo $result;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T17:47:31.890

您必须遍历`$_FILES`上传的每个文件。

做一个`print_r($_FILES);`看看你必须使用什么。

# events - lFacebook JS SDK - 事件订阅不起作用

> ID：10047069
> 
> 赞同：2
> 
> 时间：2012-04-06T17:39:41.520
> 
> 标签：events, facebook-like, facebook-javascript-sdk

我有以下代码：

```
<html>
<head>
<script src="http://connect.facebook.net/en_US/all.js#xfbml=1"></script>
<script>
FB.Event.subscribe('edge.create',
    function(response) {
        alert('TEST');
    }
);
</script>
</head>
<body>
    <div id='fb-root'></div>
    <fb:like send="true" width="450" show_faces="true" />
</body>
</html> 
```

当我点击喜欢时，警报没有出现。我之前尝试过相同的代码，它似乎有效。你看出什么不对了吗？我在 JS 控制台中看不到任何错误...我在本地主机中。

**编辑**：在这里你可以看到它：http: [//jsfiddle.net/jCE5K/](http://jsfiddle.net/jCE5K/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:58:40.380

根据[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)，您需要有一个`fb-root`DIV 标签。

# audio - 用于脚本 WAV 或 MP3 输出的文本到语音 (TTS) 软件

> ID：10047070
> 
> 赞同：8
> 
> 时间：2012-04-06T17:39:42.983
> 
> 标签：audio, windows-7, text-to-speech

[我在 SuperUser 上](https://superuser.com/questions/409285/text-to-speech-tts-software-for-scripts-wav-or-mp3-ouput)问过这个问题，但它被置若罔闻。希望我能在这里得到更多的观众。

[我正在寻找像ScriptVox](http://www.screamingbee.com/support/ScriptVOX/ScriptVOXMoreTextToSpeechVoices.aspx)这样的低成本（或免费）解决方案，只有更好的引擎。也就是说，阅读脚本并将字符分配给语音。[我在这里](https://stackoverflow.com/questions/4645509/high-quality-text-to-speech-engine-for-personal-use)读过这篇文章，但即使有那些我也必须连接 wav 文件。不是我不喜欢 Audacity，而是它很耗时。我正在考虑编写自己的代码，但我确信必须有一个解决方案。有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T17:30:35.327

我会使用微软的文字转语音引擎。他们有一个简单的例子来说明如何做你正在寻找的东西：

[http://msdn.microsoft.com/en-us/library/ms717065(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms717065(v=vs.85).aspx)

使用该示例代码，您可以说出一些文本并将其转储到 WAV 文件中。从那里，如果您需要转换为 MP3 等格式，您可以使用 FFMPEG。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-14T17:27:54.683

[布拉德的答案](https://stackoverflow.com/a/10145510/517815)非常棒，因为它包含您正在寻找的内容。*但是*，它缺少您在问题勘误表中表达的偏好的一个基础：C# 中的实现。

这是获取托管代码中语音 API 访问权限[的完整教程。](http://windowscoding.com/blogs/blake/archive/2006/11/01/How-to-use-Microsofts-Speech-API-in-a-managed-application.aspx)完全归功于 Blake Niemyjski 和 Microsoft 的相关团队，这里有一些突出的部分，因为原始文章的链接已经失效，这似乎是直接从 Microsoft 借来的：

> 以下链接（给计算机一个声音）将引导您到一个 Microsoft 站点，该站点将向您展示如何创建一个项目，并立即在 VB .Net 或 c# 中启动和运行基本的文本到语音应用程序！
> 
> SAPI
> 
> SAPI 是一种语音 API，可让应用程序访问语音识别和文本转语音 (TTS) 引擎。本文重点介绍 TTS。对于 TTS，SAPI 将文本作为输入，并使用 TTS 引擎将该文本作为语音输出。这与 Windows 辅助工具“讲述人”使用的技术相同。自 XP 以来的每个 Windows 版本都附带 SAPI 和英文 TTS 引擎。
> 
> TTS 让用户的耳朵发挥作用。它允许应用程序向用户发送信息，而无需用户的眼睛或手。这是一个非常强大的输出选项，在 PC 上不经常使用。
> 
> 在托管应用程序中使用 TTS 需要三个步骤：
> 
> 1.  创建互操作 DLL
> 
> 由于 SAPI 是一个 COM 组件，因此需要一个互操作 DLL 才能从托管应用程序中使用它。要创建它，请在 Visual Studio 中打开项目。选择项目菜单并单击添加引用。选择 COM 选项卡，在列表中选择“Microsoft Speech Object Library”，然后单击“确定”。这些步骤将此引用添加到您的项目，并在与您的可执行文件相同的文件夹中创建一个 Interop.SpeechLib.dll。此互操作 DLL 必须始终与您的 .exe 位于同一文件夹中才能正常工作。
> 
> 2.  引用互操作命名空间
> 
> 在您的应用程序中包含此命名空间。在 C# 中，添加“使用 SpeechLib；”；i 在 VB 中，添加“导入 SpeechLib”。
> 
> 3.  调用说话（）
> 
> 创建一个 SpVoice 对象并调用 Speak()：
> 
> 视觉 C#
> 
> ```
> SpVoice voice = new SpVoice();
> voice.Speak("Hello World!", SpeechVoiceSpeakFlags.SVSFDefault); 
> ```
> 
> 视觉基础
> 
> ```
> voice = New SpVoice
> voice.Speak("Hello World!", SpeechVoiceSpeakFlags.SVSFDefault) 
> ```

我觉得布拉德的回答让我在这里找到了正确的解决方案（因此，他比我更值得称赞），但这应该是你遗漏的最后一块。您现在应该能够在托管代码中复制从[C++ 解决方案](http://msdn.microsoft.com/en-us/library/ms717065%28v=vs.85%29.aspx)写入的 WAV 文件，并从那里[转码](http://en.wikipedia.org/wiki/FFmpeg)为您想要的格式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-15T22:24:46.740

如果让程序访问互联网是可以接受的，那么您可以使用[iSpeech](http://www.ispeech.org/)。

您可以使用他们的[API](http://www.ispeech.org/developers)，但不幸的是，它仅限于每天 200 次使用。

他们的 API 还允许`format=(wav|mp3)`在查询之后追加，让您以两种所需的格式获得声音。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T17:26:53.400

[http://en.wikipedia.org/wiki/Comparison_of_speech_synthesizers](http://en.wikipedia.org/wiki/Comparison_of_speech_synthesizers)

这就是我所拥有的。

谷歌翻译使用 eSpeak [http://support.google.com/translate/](http://support.google.com/translate/)

# c# - 从另一个线程插入到列表视图

> ID：10047086
> 
> 赞同：0
> 
> 时间：2012-04-06T17:41:02.787
> 
> 标签：c#, listview, invoke

我正在尝试将电子邮件表单插入另一个线程到 Form1 列表视图，但不知何故它不起作用。这是我的代码：

```
 private delegate void InsertIntoListDelegate(string email);
    private void InsertIntoList(string email)
    {
        if (f1.listView1.InvokeRequired)
        {
            f1.listView1.Invoke(new InsertIntoListDelegate(InsertIntoList), email);
        }
        else
        {
            f1.listView1.Items.Add(email);
            f1.listView1.Refresh();
        }
    } 
```

如果你能帮助我，那么谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T17:52:26.820

尝试这个：

```
 private delegate void InsertIntoListDelegate(string email);
    public void InsertIntoList(string email)
    {
        if(InvokeRequired)
        {
            Invoke(new InsertIntoListDelegate(InsertIntoList), email);
        }
        else
        {
            f1.listView1.Items.Add(email);
            f1.listView1.Refresh();
        }
    } 
```

**InsertIntoList**是封闭控件的成员，因此应该在该控件而不是列表视图上调用。

试试这个对我有用的非常简单的测试：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private delegate void InsertIntoListDelegate(string email);

    public void InsertIntoList(string email)
    {
        if(InvokeRequired)
        {
            Invoke(new InsertIntoListDelegate(InsertIntoList), email);
        }
        else
        {
            listView1.Items.Add(email);
        }
    }

    private void button1_Click(object sender, System.EventArgs e)
    {
        Task.Factory.StartNew(() => InsertIntoList("test"));
    }
} 
```

# java - 是否可以在不删除的情况下修改地图中的项目？

> ID：10047091
> 
> 赞同：0
> 
> 时间：2012-04-06T17:41:39.310
> 
> 标签：java, map

我`ConcurrentMap<Integer, MyObj>`在我的程序中有。`MyObj`如果我知道密钥，我可以修改吗？不删除并放一个新的`MyObj`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T17:44:21.033

这取决于您对“修改”的定义。如果你想改变内部的东西`MyObj`，并且那个对象是可变的，你当然可以这样做。

```
ConcurrentMap<Integer, MyObj> map = /* snip */;
map.get(someKey).callMutatorMethod(); 
```

如果你想用一个全新的实例替换对象，你可以调用`Map#put()`，如果存在这样的值，它将覆盖现有的映射值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T17:58:01.420

不仅如此，如果你保留对对象的原始引用，你仍然可以修改它。

```
MyObject o = new MyObject();
myMap.put("key", o);

o.setName("foo");
myMap.get("key").getName(); //will return "foo"
myMap.get("key").setName("bar");
myMap.get("key").getName(); //will return "bar"

o = null; //this applies only for your local reference, not for the map
myMap.get("key").getName(); //will STILL return "bar" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T17:53:12.190

是的你可以。地图只是保存对对象的引用。对象可以更改而无需更新地图。

```
Map<Integer, MyObj> myMap = new ConcurrentMap<Integer, MyObj>();
myMap.put(1, new MyObj());
MyObj obj = myMap.get(1);
obj.setFoo("Foo"); 
```

# java - Java Tile 游戏缩放

> ID：10047096
> 
> 赞同：2
> 
> 时间：2012-04-06T17:42:37.310
> 
> 标签：java, 2d, zooming, tile, graphic

我正在用 Java 构建一个 2D 自上而下的基于瓷砖的游戏。当然，您可以平移和放大游戏，目前放大了 10 个不同的级别，其中每个图块的范围为 10x10 像素到 100x100 像素。目前，每个缩放级别的图块存储在单独的精灵表中，在程序启动时读取并存储在缓冲图像数组中。我确信这不是解决这个问题的最佳方式。

我正在寻找任何提高长期效率的技巧，最好只有 100x100 的图块并在 java 中动态缩放它们；以某种方式在java中使用矢量图形（我确定如何，但我确信谷歌可以帮助我）还是什么？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T17:52:34.590

我会动态的。通常在计算机图形中，您使用矩阵，将其应用于图形上下文，修改您在其上绘制的所有内容。

这用于修改位置、缩放、旋转等。不是将相机位置减去每个图块，而是将平移应用到图形上下文一次，然后在世界位置绘制图块。图形上下文将负责将图块放置在正确的屏幕空间中。

我建议您阅读以下内容：

[http://docs.oracle.com/javase/tutorial/2d/advanced/transforming.html](http://docs.oracle.com/javase/tutorial/2d/advanced/transforming.html) [http://www.javalobby.org/java/forums/t19387.html](http://www.javalobby.org/java/forums/t19387.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T18:19:43.187

如果您正在进行固定缩放（即每个缩放级别与相机的距离是固定的），而不是流体缩放（播放器可以放大 3.3x、7.5x，而不仅仅是 1x、2x、3x 等）。 ) 那么尝试通过简单地应用缩放变换来解决这个问题是非常浪费的。这很诱人，因为这是最简单的方法，而且从实现的角度来看很容易理解，但这意味着在最大缩小时，您将渲染一个在 X 方向上大 10 倍，在 X 方向上大 10 倍的区域Y 方向 - 所以**面积**你必须渲染的世界比最大放大时大 100 倍。我也怀疑你会喜欢你的纹理在缩小时被硬件挤压的方式。计算机图形与光学不同 - 亚像素渲染，如果您将任务交给软件/硬件，计算机图形中发生的其他事情不会使您的纹理看起来非常好。

即使你进行流体缩放，我仍然会做细节层次纹理，并根据正在渲染的世界和相机之间的距离动态交换它们。

另外，10 个缩放级别？你确定你真的需要 10 个缩放级别吗？缩放通常用于 2D 游戏，以允许您以不同的细节级别执行不同的活动，因为特定的缩放级别特别适合特定的活动集。我不记得任何需要 10 个缩放级别来完成此操作的 2D 游戏。3-5是我见过的最多的，我从来没有觉得不够。在每个缩放级别生成 10 个缩放级别的图像似乎也需要大量的艺术作品。

您还可能会发现应用 AffineTransform 听起来是个好主意，但它的计算成本非常高，而且如果您需要 60fps 的性能，您不太可能以这种方式实现它。不过，不要相信我的话，去尝试一下，看看它自己摔倒有多严重。

# c - 优化代码（检查 mod ==0 是否为大号 10^18）

> ID：10047099
> 
> 赞同：0
> 
> 时间：2012-04-06T17:42:54.340
> 
> 标签：c, algorithm, optimization

我有一个很大的不说'x'（10 ^ 18）和一个数字'z'说6。我试图使用ac代码知道/计算1到x（10 ^ 18）范围内有多少个数字能被 z 整除。为此我使用了一个简单的循环

```
While(x)
{
    if(x % z == 0)
       {
          count++;
        }
     --x;
  } 
```

但是这段代码像预期的那样花费了太多时间，因为它正在检查从 1 到 x 的所有值。是否有任何已知的算法或技术可以优化上述代码并仍然获得相同的结果。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T17:44:55.417

```
count = floor(x / z); 
```

显然，您将需要一个足够大的数据类型来容纳`x`.

# c# - 为特定客户更改 winform 应用程序

> ID：10047102
> 
> 赞同：0
> 
> 时间：2012-04-06T17:43:10.313
> 
> 标签：c#, oop, agile, software-design

我有一个 winform 应用程序。我把它给了三个客户，每个客户都想要一个专门针对他们的小调整或定制。为此，我必须为每个客户保留一个单独的版本。我可能会以这种方式完成许多版本。我认为依赖注入将是如何处理这个问题，但我听说您必须在 main 方法中注册您的依赖项，并且您仍然必须添加对每个客户端 DLL 的引用，所以我仍然需要不同的版本。处理此问题的首选面向对象方式是什么？有更好的方法来处理这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T17:59:08.370

您可以使用[插件模式](http://www.martinfowler.com/eaaCatalog/plugin.html)在运行时加载程序集：（来自链接）

> 当应用程序代码在多个运行时环境中运行时，通常使用分离接口 (476)，每个运行时环境都需要特定行为的不同实现。

大多数 DI 框架都提供此功能。您可以在 get很多示例中搜索您选择的框架 - 如果您不想[推出自己的](http://msdn.microsoft.com/en-us/library/ms972962.aspx).

1.  [忍者](https://stackoverflow.com/questions/330927/using-ninject-in-a-plugin-like-architecture)
2.  [MEF](http://www.codeproject.com/Articles/37559/Managed-Extensibility-Framework-Part-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:00:08.877

您可以使用配置文件来配置您的 DI 容器，以便您可以使用不同的配置文件重用相同的二进制文件来实现不同的自定义。但是您需要确保彻底测试所有不同的配置。同一应用程序的稍微不同的版本在不引起意外中断的情况下维护并非易事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T18:00:56.793

根据自定义的性质，您可能能够将所有相关修改捕获到项目的不同部分（而不是让它们分布在整个项目中）。如果可以（例如，客户端提供文件功能），您可以动态加载 DLL（例如，基于配置文件）并允许 DLL 中的函数执行完成自定义的必要功能（基于参数由主代码提供）。

通过这种方式，您可以根据客户端的需要为您的代码提供预定义的挂钩，这些挂钩可以动态更改（即使只是在启动时加载 dll）。如果客户端想要更改不同的功能，您可以将这些 DLL 分成多个，但不一定是所有客户端的所有功能。然后，您可以提供 DLL 的“默认”版本。

谁开发钩子取决于您与客户的设置。

确保您提供足够的文档说明这些钩子应该如何工作——即使您最终开发了它们。

# c# - 使下拉菜单对用户唯一

> ID：10047103
> 
> 赞同：0
> 
> 时间：2012-04-06T17:43:24.090
> 
> 标签：c#, asp.net, asp.net-mvc-3, asp.net-mvc-3-areas

大家好，我有一个查询，指出每个游戏都应该是唯一的帐户持有人，可以正常工作，现在当我为评论编写相同的查询时，我遇到了一个问题，有一个下拉菜单选择所有用户的游戏，然后可以写评论。遇到的问题是下拉菜单还显示了我不想要的其他用户添加的游戏，我希望添加的游戏对添加它们的用户来说是唯一的。

这是我的审查控制器：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using GameTest.Models;

    namespace GameTest.Controllers
    { 
        public class ReviewController : Controller
        {
            private gamezoneDBEntities db = new gamezoneDBEntities();

            //
            // GET: /Review/

            public ViewResult Index()
            {
                var Info = db.tblReviews.Include(x => x.tblGame).Where(UserInfo => UserInfo.UserName.Equals(User.Identity.Name)).ToList();
                return View(Info); 
            }

            //
            // GET: /Review/Details/5

            public ViewResult Details(int id)
            {
                tblReview tblreview = db.tblReviews.Find(id);
                return View(tblreview);
            }

            //
            // GET: /Review/Create

            public ActionResult Create()
            {
                ViewBag.GameIDFK = new SelectList(db.tblGames, "GameID", "GameName");
                return View(new tblReview { UserName = @User.Identity.Name });
            } 

            //
            // POST: /Review/Create

            [HttpPost]
            public ActionResult Create(tblReview tblreview)
            {
                if (ModelState.IsValid)
                {
                    db.tblReviews.Add(tblreview);
                    db.SaveChanges();
                    return RedirectToAction("Index");  
                }

                ViewBag.GameIDFK = new SelectList(db.tblGames, "GameID", "GameName", tblreview.GameIDFK);
                return View(tblreview);
            }

            //
            // GET: /Review/Edit/5

            public ActionResult Edit(int id)
            {
                tblReview tblreview = db.tblReviews.Find(id);
                ViewBag.GameIDFK = new SelectList(db.tblGames, "GameID", "GameName", tblreview.GameIDFK);
                return View(tblreview);
            }

            //
            // POST: /Review/Edit/5

            [HttpPost]
            public ActionResult Edit(tblReview tblreview)
            {
                if (ModelState.IsValid)
                {
                    db.Entry(tblreview).State = EntityState.Modified;
                    db.SaveChanges();
                    return RedirectToAction("Index");
                }
                ViewBag.GameIDFK = new SelectList(db.tblGames, "GameID", "GameName", tblreview.GameIDFK);
                return View(tblreview);
            }

            //
            // GET: /Review/Delete/5

            public ActionResult Delete(int id)
            {
                tblReview tblreview = db.tblReviews.Find(id);
                return View(tblreview);
            }

            //
            // POST: /Review/Delete/5

            [HttpPost, ActionName("Delete")]
            public ActionResult DeleteConfirmed(int id)
            {            
                tblReview tblreview = db.tblReviews.Find(id);
                db.tblReviews.Remove(tblreview);
                db.SaveChanges();
                return RedirectToAction("Index");
            }

            protected override void Dispose(bool disposing)
            {
                db.Dispose();
                base.Dispose(disposing);
            }
        }
    } 
```

我用来使游戏独一无二且评论独一无二的代码是这样的：

```
var Info = db.tblReviews.Include(x => x.tblGame).Where(UserInfo => UserInfo.UserName.Equals(User.Identity.Name)).ToList();
            return View(Info); 
```

我已将此代码添加到 i 控制器的 index 部分，并将以下代码添加到控制器的第一个 create 部分：

```
ViewBag.GameIDFK = new SelectList(db.tblGames, "GameID", "GameName");
            return View(new tblReview { UserName = @User.Identity.Name });
        } 
```

如果您还有其他要求，请告诉我？

所有表的数据模型：

审查：

```
 namespace GameTest.Models
{
    using System;
    using System.Collections.Generic;

    public partial class tblReview
    {
        public int ReviewID { get; set; }
        public string Recomendation { get; set; }
        public string AvoidOrBuy { get; set; }
        public string Score { get; set; }
        public int GameIDFK { get; set; }
        public string UserName { get; set; }

        public virtual tblGame tblGame { get; set; }
    }
} 
```

游戏：

```
 namespace GameTest.Models
{
    using System;
    using System.Collections.Generic;

    public partial class tblGame
    {
        public tblGame()
        {
            this.tblReviews = new HashSet<tblReview>();
        }

        public int GameID { get; set; }
        public string GameName { get; set; }
        public string ReleaseYear { get; set; }
        public string Cost { get; set; }
        public string Description { get; set; }
        public string Downloads { get; set; }
        public string Image { get; set; }
        public string ConsoleNameIDFK { get; set; }
        public string UserName { get; set; }

        public virtual tblConsole tblConsole { get; set; }
        public virtual ICollection<tblReview> tblReviews { get; set; }
    }
} 
```

安慰：

```
namespace GameTest.Models
{
    using System;
    using System.Collections.Generic;

    public partial class tblConsole
    {
        public tblConsole()
        {
            this.tblGames = new HashSet<tblGame>();
        }

        public string ConsoleName { get; set; }

        public virtual ICollection<tblGame> tblGames { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:19:59.997

在这一行中，您需要粘贴一个`.Where(...)`以`tblGames`过滤掉您不想出现的游戏

```
ViewBag.GameIDFK = new SelectList(db.tblGames, "GameID", "GameName");
        return View(new tblReview { UserName = @User.Identity.Name });
    } 
```

# iphone - 从照片库获取图像时，iPhone 中的 UIImagePickerViewController 内存警告

> ID：10047106
> 
> 赞同：0
> 
> 时间：2012-04-06T17:43:45.817
> 
> 标签：iphone, objective-c, uiimagepickercontroller

当我在 iphone 上添加 thre 到四个图像内存后运行这个程序时，警告来了，应用程序崩溃了。所以请帮助我谢谢我只是获取图像参考并写入文件，然后从文件路径获取图像。谢谢

```
- (IBAction)addPicsButtonClick:(id)sender 
{
    UIImagePickerController * picker = [[[UIImagePickerController alloc] init] autorelease];
    picker.delegate = self;
    picker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;    
    [self presentModalViewController:picker animated:YES];    
}

- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
    [picker dismissModalViewControllerAnimated:YES];
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
{        
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *pathToDocuments=[paths objectAtIndex:0];
    AppDelegate *app = [[UIApplication sharedApplication] delegate];
    NSData *imageData = UIImageJPEGRepresentation([info objectForKey:@"UIImagePickerControllerOriginalImage"], 0.3f);    
    [imageData writeToFile:[NSString stringWithFormat:@"%@/%d.jpg", pathToDocuments, [app.images count]] atomically:YES];    
    [self dismissModalViewControllerAnimated:YES];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T19:45:16.787

我在模拟器的新应用程序中运行相同的代码，没有崩溃问题或内存警告，它创建了文件。我确实取出了 [app.images count] 并使用了一个局部变量，因为 app.images 没有在此代码中的任何位置设置。因此，如果该变量是垃圾或过度释放，那可能是您的问题。

# c# - 在单独的表单上刷新对象

> ID：10047107
> 
> 赞同：3
> 
> 时间：2012-04-06T17:43:46.523
> 
> 标签：c#, .net, oop

我有一个显示来自 MySQL 表的数据的应用程序。基本上，我的应用程序由两种形式组成：主形式和用于向数据库添加内容的形式。

主窗体显示数据库中的所有条目和相关信息。当用户想要向数据库添加新条目时，会打开一个提示输入信息的辅助表单。填写完信息后，用户按下提交按钮并关闭表单。我的问题是，当辅助表单关闭时，`listBox`主表单中的 不会更新以反映新添加的条目。

以下是用户提交辅助表单时执行的代码：

> ```
>  private void closeWindow()
>     {
>         mainForm parent = new mainForm();
>         parent.listParts.Refresh();
>         this.Close();
>     } 
> ```

`listBox`当我调用刷新时，它没有显示我新添加的信息是否有原因？也许我以错误的顺序调用某些东西？或者该`Refresh()`方法甚至不能那样工作？

任何帮助，将不胜感激！或者，如果您知道更好的方法来做到这一点，我很想听听！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T17:47:05.960

问题是您刷新了*错误的表单*：

```
private void closeWindow()
{
    mainForm parent = new mainForm();
    parent.listParts.Refresh();
    this.Close();
} 
```

由于您使用: `new mainForm()`，因此您正在分配一个完全独立的“mainForm”实例，并刷新它的内容。这不会影响现有的打开表单。

我建议将引用传递给`mainForm`辅助表单的构造函数。然后它会知道它需要使用*哪个 mainForm 实例*`Refresh()`来调用.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T17:51:35.073

Reed[给出了一个答案](https://stackoverflow.com/a/10047149/1159478)，解释了为什么你所做的事情不起作用，这是如何实际解决它的一种可能的解决方案：

在 MainForm 的一些事件处理程序中：

```
var otherForm = new SomeOtherForm();
otherForm.Closed += (sender, args) =>
{
  //update the listbox in MainForm here
}; 
```

如果您需要来自第二种形式的信息来更新列表框，请在其中创建一个公共属性，`SomeOtherForm`以公开`MainForm`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T17:46:20.610

我认为您应该重新加载数据。再次获取它设置数据源

为您的子表单拥有一个父属性，该属性属于您的第一个表单。

像这样的东西。

**您的家长表格**

```
public partial class KitTypes : Form
{

 public void ReloadData()
 {
   // Get the data and Set as datasource of control
 }

} 
```

**和儿童形式**

```
public partial class Kit : Form
{
    private int _KitId=0;
    private KitTypes _parentForm = null;

 public Kit(KitTypes parentForm)
 {
   _parentForm =parentForm;
 }
} 
```

从您的第一个表单中，当您创建这个对象时，将父表单作为参数传递

```
 Kit objChild=new kit(this);
  objChild.Show(); 
```

现在在您的孩子中，您可以像这样调用父表单的公共方法

```
this._parentForm.ReloadData(); 
```

# objective-c - 如何找出scrollView是否即将向上或向下滚动

> ID：10047108
> 
> 赞同：4
> 
> 时间：2012-04-06T17:43:47.617
> 
> 标签：objective-c, ios, cocoa-touch, scrollview

我想知道 scrollView 是向上还是向下滚动。理想情况下，如果向上或向下滚动滚动视图，我只想打一个电话。我试过了，但它显然不会告诉我有关方向的任何信息：

```
-(void)scrollViewWillBeginDragging:(UIScrollView *)scrollView {
    NSLog(@"%.2f", scrollView.contentOffset.y);
} 
```

contentOffset 将始终为 0 - 我向上或向下滚动都没有关系。现在我可以简单地检查 -(void)scrollViewDidScroll: 如果偏移量是正数还是负数，但这会不断调用。scrollViewWillBeginDragging 的优点是只被调用一次，这就是我所需要的。有类似 scrollViewDidBeginDragging 的东西吗？我在文档中没有找到任何东西。任何聪明的解决方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-06T18:01:20.773

将初始内容偏移量存储在`scrollViewWillBeginDragging:`

```
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView {
    self.initialContentOffset = scrollView.contentOffset.y;
    self.previousContentDelta = 0.f;
} 
```

并检查每个`scrollViewDidScroll:`

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    CGFloat prevDelta = self.previousContentDelta;
    CGFloat delta = scrollView.contentOffset.y - self.initialContentOffset;
    if (delta > 0.f && prevDelta <= 0.f) {
        // started scrolling positively
    } else if (delta < 0.f && prevDelta >= 0.f) {
        // started scrolling negatively
    }
    self.previousContentDelta = delta;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-16T19:48:32.147

可以在注册任何滚动之前**执行**此签入。`scrollViewWillBeginDragging`（IOS 5+）。通过检查滚动视图的内置平移手势识别器，您可以检查手势方向。

```
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{ 
    CGPoint translation = [scrollView.panGestureRecognizer translationInView:scrollView.superview];

    if(translation.y > 0)
    {
        // react to dragging down
    } else
    {
        // react to dragging up
    }
} 
```

我发现当用户向禁止方向拖动时，在第一次拖动时取消滚动非常有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T17:48:14.297

创建一个声明的属性，让我们知道 tableview 开始滚动。让我们使用一个名为`scrollViewJustStartedScrolling`.

将其设置为`scrollViewWillBeginDragging`true：

```
self.scrollViewJustStartedScrolling = YES; 
```

在`scrollViewDidScroll`做类似的事情：

```
if (self.scrollViewJustStartedScrolling) {
    // check contentOffset and do what you need to do.
    self.scrollViewJustStartedScrolling = NO;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-01-21T16:20:31.910

```
-(void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset{

    if (velocity.y > 0){
        NSLog(@"up");
    } else {
        NSLog(@"down");
    }
} 
```

# python - 是否可以在运行时将参数传递给 python 制作的 exe？

> ID：10047110
> 
> 赞同：12
> 
> 时间：2012-04-06T17:43:48.490
> 
> 标签：python

我正在试验文件 I/O。我有一个小型练习程序，运行时会创建一个文本文件。我用 pyinstaller 打包它，这样双击 exe 会创建一个新文件夹，并在其中放置一个带有“hello world”的文本文件。十分简单。

然后我开始想知道`main()`。这只是一个和其他任何功能一样的功能，对吧？那么这是否意味着我可以在运行时向它传递参数？

我在考虑 Steam 客户端以及如何将“-dev”和“-console”之类的东西放在快捷方式中。有没有办法对我制作的 python exe 执行此操作？

我可能解释得很糟糕，所以这里有一个例子：

```
def makeFile(string):
    if string:
        f = open('mytext.txt', 'w') #create text file in local dir
        print >> f, 'hello, ' + string + '! \nHow are ya?'
        f.close()
    else:
        f = open('mytext.txt', 'w') #create text file in local dir
        print >> f, 'hello, person! \nHow are ya?'
        f.close()

def main(string = None):
    makeFile(string) 
```

因此，如果我采用此代码并将其设为 exe，我是否能够以某种方式添加我的可选参数。

我尝试了上面的代码，并且正在运行`test.exe --"myname"`，但是没有用。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-06T18:08:25.733

您正在寻找的是 sys 模块或 optparse 模块。

sys 将为您提供对命令行参数的非常基本的控制。

例如：

```
import sys

if __name__ == "__main__":
    if len(sys.argv)>1:
        print sys.argv[1] 
```

在上面的例子中，如果你打开一个 shell 并输入 -

```
test.exe "myname" 
```

结果输出将是：

```
myname 
```

请注意 sys.argv[0] 是您当前正在运行的脚本的名称。每个后续参数都由一个空格定义，因此在上面的示例中

```
test.exe -- myname

argv[0] = "test.exe"
argv[1] = "--"
argv[2] = "myname" 
```

Optparse gives a much more robust solution that allows you to define command line switches with multiple options and defines variables that will store the appropriate options that can be accessed at runtime.

重写你的例子：

```
from optparse import OptionParser

def makeFile(options = None): 
    if options:
        f = open('mytext.txt', 'w') #create text file in local dir
        print >> f, 'hello, ' + options.name + '! \nHow are ya?'
        f.close()
    else:
        f = open('mytext.txt', 'w') #create text file in local dir
        print >> f, 'hello, person! \nHow are ya?'
        f.close()

if __name__ == "__main__":
    parser = OptionParser()
    parser.add_option('-n','--name',dest = 'name',
                      help='username to be printed out')
    (options,args) = parser.parse_args()
    makeFile(options) 
```

您将使用以下命令运行您的程序：

```
test.exe -n myname 
```

并且输出（在 myfile.txt 中）将是预期的：

```
Hello, myname!
How are ya? 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-06T17:48:54.373

是的，您可以使用`sys.argv`. 查看此链接：[http](http://docs.python.org/library/sys.html#sys.argv) ://docs.python.org/library/sys.html#sys.argv 。但切记不要忘记`import sys`，然后就可以使用了。导入系统

```
# If there is an argument passed to your file
if len(sys.argv) > 1:
    # argv[1] has your filename
    filename = sys.argv[1]
    print (filename)

# Output...
# new-host:~ yanwchan$ python3.2 test.py text.txt
# text.txt 
```

`argv[0]`有`test.py`

`argv[1]`有`text.txt`

**编辑：**但是，我对此主题进行了更多研究并发现了这一点：[https ://stackoverflow.com/a/4188500/1276534](https://stackoverflow.com/a/4188500/1276534)

正如 katrielalex 指出的那样，也许你也可以调查一下[`argparse`](http://docs.python.org/library/argparse.html#module-argparse)。？它提供了更多功能以及安全检查。有趣的信息。

这是一个很棒的教程： http: [//www.doughellmann.com/PyMOTW/argparse/](http://www.doughellmann.com/PyMOTW/argparse/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T17:51:40.987

您正在寻找的是类似于 python [argparse 模块的东西](http://docs.python.org/library/argparse.html#module-argparse)

或者您可以直接使用[sys.argv读取值](http://docs.python.org/library/sys.html#sys.argv)

```
import sys
sys.argv[0] # the name of the command that was called
sys.argv[1] # the first argument, eg '--dev'
sys.argv[2] # the second... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-19T12:52:46.987

只是为了完整性：现在有[docopt](http://docopt.org/)，通过用简单的语言描述它，即使是复杂的命令行界面也很容易编写。记录和解析接口实际上成为与 docopt 相同的任务。

# java - jMonkey SimpleApplication 设置

> ID：10047112
> 
> 赞同：1
> 
> 时间：2012-04-06T17:43:53.880
> 
> 标签：java, jruby, jmonkeyengine

我正在将 jMonkey 教程翻译成 JRuby，目前是[第 8 个](http://jmonkeyengine.org/wiki/doku.php/jme3%3abeginner%3ahello_picking)初学者。但是当我运行它时，它一直抱怨没有`settings`定义方法或局部变量。`settings`应该是实例变量、方法还是什么？

编辑：我查看了两者的 javadoc，`com.jme3.app.Application` *并且* `com.jme3.app.SimpleApplication`它们都没有真正定义`settings`.

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:57:11.197

*仅针对可能会遇到此问题的其他人。*

至于最新版本的 jmonkey，设置在 Application.java 第 78 行中定义

```
protected AppSettings settings; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T20:42:44.643

没有`settings`在任何地方定义方法，所以我只是创建了自己的 AppSettings 对象并将其用于 SimpleApplication。问题解决了。

# r - 在 R 中对生态数据进行分组

> ID：10047124
> 
> 赞同：3
> 
> 时间：2012-04-06T17:45:12.707
> 
> 标签：r, bioinformatics

我正在查看一些生态数据（饮食）并试图找出如何按 Predator 分组。我希望能够提取数据，以便我可以查看每个捕食者的每个物种的每个猎物的重量，即计算出被例如 Predator 117 吃掉的每个物种的平均重量。我放了一个样本我的数据如下。

```
 Predator PreySpecies PreyWeight
1   114      10    4.2035496
2   114      10    1.6307026
3   115       1   407.7279775
4   115       1   255.5430495
5   117      10    4.2503708
6   117      10    3.6268814
7   117      10    6.4342073
8   117      10    1.8590861
9   117      10    2.3181421
10  117      10    0.9749844
11  117      10    0.7424772
12  117      15    4.2803743
13  118       1   126.8559155
14  118       1   276.0256158
15  118       1   123.0529734
16  118       1   427.1129793
17  118       3   237.0437606
18  120       1   345.1957190
19  121       1   160.6688815 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T18:20:26.460

您可以`aggregate`按如下方式使用该功能：

```
aggregate(formula = PreyWeight ~ Predator + PreySpecies, data = diet, FUN = mean)

#   Predator PreySpecies PreyWeight
# 1      115           1 331.635514
# 2      118           1 238.261871
# 3      120           1 345.195719
# 4      121           1 160.668881
# 5      118           3 237.043761
# 6      114          10   2.917126
# 7      117          10   2.886593
# 8      117          15   4.280374 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-06T20:01:11.000

有几种不同的方法可以得到你想要的：

1.  `aggregate`功能。可能是你所追求的。

    ```
    aggregate(PreyWeight ~ Predator + PreySpecies, data=dd, FUN=mean) 
    ```

2.  `tapply`：非常有用，但仅将变量除以单个因子，因此，我们需要使用粘贴命令创建一个需要的联合因子：

    ```
    tapply(dd$PreyWeight, paste(dd$Predator, dd$PreySpecies), mean) 
    ```

3.  `ddply`:`plyr`包的一部分。很有用。值得学习。

    ```
    require(plyr)
    ddply(dd, .(Predator, PreySpecies), summarise, mean(PreyWeight)) 
    ```

4.  `dcast`：输出更多的是表格格式。包装的一部分`reshape2`。

    ```
    require(reshape2)
    dcast(dd, PreyWeight ~ PreySpecies+ Predator, mean, fill=0) 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T20:51:29.443

`mean(data$PreyWeight[data$Predator==117]);`

# php - 当存储在数据库中的日期过去时做一些事情

> ID：10047125
> 
> 赞同：0
> 
> 时间：2012-04-06T17:45:21.900
> 
> 标签：php, mysql, database, cron

我有一个优惠券数据库，当它们过期时，我想向客户发送一封电子邮件，说它已过期，创建一个新的。做这个的最好方式是什么？每天用一个cron来检查它是否刚刚过期？或者有什么好方法可以更“主动”地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T17:50:26.047

您可以使用 cron 作业来运行检查过期条目的脚本，然后运行您的电子邮件功能。但我有一种感觉，在你的数据库中使用函数有一种很好的方法——你在使用 MySQL 吗？Postgre, mssql.... ??

在寻找时，我认为此页面可能会对您有所帮助： [Invoking a PHP script from a MySQL trigger](https://stackoverflow.com/questions/1467369/invoking-a-php-script-from-a-mysql-trigger)

# xpages - 当属性在组中时为复合数据设置值

> ID：10047127
> 
> 赞同：1
> 
> 时间：2012-04-06T17:45:27.560
> 
> 标签：xpages

我的自定义控件中有一个自定义属性。自定义属性位于 Field1 组中，称为 ClientID。组和字段在我的自定义属性定义中。我想在页面加载时设置它。所以我做了以下事情：

```
compositeData.Field1.ClientID = getClientId("Field1") 
```

当我这样做时，我得到一个错误：

'compositeData.Field1' 为空

但是，如果我定义了一个名为 Field1_ClientID 的根属性并执行以下操作：

```
compositeData.Field1_ClientID = getClientId("Field1") 
```

然后一切正常。如何在自定义属性中使用组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T14:30:05.557

布鲁斯，

CompositeData 是一个属性映射。如果其中没有值，compositeData.Field1 将为空（因为它也是一个属性映射）。

所以你可以这样做；

```
compositeData.Field1= { ClientID: getClientId("Field1") } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:33:10.373

要在组“group1”中设置属性“property1”，您可以执行以下操作：

`compositeData.group1.property1 = "test";`

您可以在自定义控件的 beforePageLoad 或 afterPageLoad 事件中运行上述代码。

我认为您的问题是您正在设置自定义控件之前发生的事件中的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T08:50:20.350

好的，我对自定义控件的组功能进行了快速测试（以前从未使用过）。

给定一组“testGroup”和该组内的“testProp”属性。

以下在 beforePageLoad 中起作用：

```
compositeData.testProp = "example1";
print("Test1: " + compositeData.testProp); 
```

以下不起作用：

```
compositeData.testGroup.testProp = "example2";
print("Test2: " + compositeData.testGroup.testProp); 
```

因此，我相信 group 属性可能只是一种对属性进行逻辑分组的方式，而不是定义具有多个属性的对象。尝试仅引用属性而不是组。

# ios - 为在调试器之外运行的 IOS 应用程序设置环境变量

> ID：10047128
> 
> 赞同：0
> 
> 时间：2012-04-06T17:45:30.023
> 
> 标签：ios, xcode, variables, environment

我有一个使用环境变量的 IOS 应用程序，并且能够在开发过程中使用 XCode 毫无问题地设置这些变量。但是我想弄清楚如何在不通过 XCode 运行时设置这些相同的环境变量，即从跳板正常启动应用程序时。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T22:41:14.433

在普通设备上绝对不可能。可能是越狱了。

# php - PHP 中 MySQL 的 UTF-8 字符集问题

> ID：10047131
> 
> 赞同：0
> 
> 时间：2012-04-06T17:45:37.123
> 
> 标签：php, mysql, utf-8, include, eval

这真的是我的疯子......

所有相关的 PHP 输出脚本都设置了标题（在这种情况下只有一个文件 - 主 php 脚本）：

```
header("Content-type: text/html; charset=utf-8"); 
```

HTML 元设置在 head 中：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

所有 Mysql 表和相关列设置为：

```
utf8_unicode_ci     Unicode (multilingual), case-insensitive 
```

我一直在编写一个类来进行一些翻译。当该类使用 fopen、fputs 等写入文件时，一切正常，正确的字符出现在我的输出文件中（它们被写为 php 数组并以 . php 或 .htm 文件。eval() 正确地返回 .htm 文件，当我想使用它们时只包含 .php 文件。一切都很好。

可能是当我尝试为我的数据库创建翻译条目时。我的数据库连接类在初始连接之后直接添加了以下行：

```
 mysql_query("SET NAMES utf8, character_set_results = 'utf8', character_set_client = 'utf8', character_set_connection = 'utf8', character_set_database = 'utf8', character_set_server = 'utf8'"); 
```

我没有看到正确的字符，而是得到了您期望在数据库中使用错误的字符集的常见问题。例如：

```
PropriÃÂ©tÃÂ©s 
```

代替：

```
propriétés 
```

甚至不要让我开始使用俄语、日语等字符！但是使用 UTF8 不应该使任何单一语言字符集成为问题......

我错过了什么？我知道它不是 PHP，因为该站点从包含的翻译 .php 或 .htm 文件中显示了正确的字符，只有在我处理 MySQL DB 时才会遇到这些问题。PHPMyAdmin 用错误的字符显示条目，所以我假设它发生在 PHP“写入”到 MySQL 时。已经在堆栈上检查了类似的问题，但没有一个答案（所有这些都得到了照顾）给我任何线索......

此外，任何人都对使用 include $filename 与 eval(file_get_contents($filename)) 的速度差异有想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:01:28.337

以下是确保这些字符得到良好显示所需的全部内容：

```
/* HTTP charset */
header("Content-Type:text/html; charset=UTF-8");

/* Set MySQL communication encoding */
mysql_set_charset("UTF8"); 
```

您还需要将 DB 编码设置为正确的编码，以及每个表的编码和字段的编码

最后但同样重要的是，您的 php 文件的编码也应该匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T18:07:17.380

您说您看到的是“使用错误字符集通常会出现的问题”。但实际上，这个杂物是通过在已经 UTF8 字符串上使用 utf8_encode() 创建的，所以很可能您没有在任何地方使用“错误编码”，而是超过了您编码为 UTF8 的时间。

您可以查看我为解决此类问题而制作的库：

[https://stackoverflow.com/a/3521340/290221](https://stackoverflow.com/a/3521340/290221)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T18:03:19.920

mysql中有一个`mysql_set_charset('utf8');`。在另一个查询的开头运行该查询。

# javascript - 如何使 VJET 插件在我的 node.js 项目的 eclipse 中完全工作

> ID：10047132
> 
> 赞同：1
> 
> 时间：2012-04-06T17:45:37.807
> 
> 标签：javascript, eclipse

VJET 几乎为我工作，我可以在同一个文件和基本 Node.js 模块（使用 NodejsTL）中完成代码，但是对于新模块（我的模块）或使用 npm 安装的模块，越来越多的错误困扰着我的“问题” Eclipse 中的选项卡。有什么方法可以让“构建”干净并摆脱所有警告和错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:48:17.237

Vjet 目前不理解用户定义的模块。有三种解决方案可以解决这个问题... (1) 可以添加类型库以支持更多模块。(2) Vjet 可以扩展以支持 npm 模块，对此有一个增强请求。(3) 还有一种方法可以禁用错误和警告。您可以在项目或工作区级别提供禁用错误和警告。请参阅首选项 -> vjet -> 代码合规性 -> 错误和警告。感谢您的反馈。

这是您应该投票支持的增强请求，以使 VJET 了解 nodejs 用户定义的模块 - [https://www.ebayopensource.org/jira/browse/VJET-88](https://www.ebayopensource.org/jira/browse/VJET-88)

# eclipse - 使用我的 Bundle 在 Eclipse 之外运行时出现 OSGi NoClassDefFoundError

> ID：10047133
> 
> 赞同：0
> 
> 时间：2012-04-06T17:45:44.277
> 
> 标签：eclipse, export, osgi, bundle, noclassdeffounderror

我有一个由多个捆绑包组成的应用程序。在 Eclipse 内部，它运行良好。当我将它作为产品导出时，它运行良好，但发生了一些变化，我不知道是什么。

现在，当我导出我的包时，在运行时我得到 NoClassDefFoundError。错误在我的包的一个激活器中，它无法找到的类在另一个包中。一个普通的捆绑包。

当我尝试启动捆绑包时，出现异常

 `````
Caused by: java.lang.NoClassDefFoundError: com/ardor/common/util/Systems 
````  `这个类在我的另一个包 com.ardor.common 中。在控制台上，当我使用“bundle”命令检查此捆绑包时，我得到

 `````
Exported packages
com.ardor.common.util; version="0.0.0"[exported] 
````  `我被想法困住了:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T07:09:22.780

当试图删除我从 build.properties 中删除的编译器警告时

输出.. = bin/

没有这个，捆绑包不包含任何类文件

**build.properties**

```
source.. = src/
output.. = bin/
bin.includes = META-INF/,\
. 
```````

# android - pageDown(true) 在 WebView Android 中总是返回 false

> ID：10047134
> 
> 赞同：3
> 
> 时间：2012-04-06T17:45:55.920
> 
> 标签：android, webview

我在 Android 中有一个 WebView，它为我的应用程序存储对话流。

应用程序每 20 秒轮询一次服务器以获取任何消息并更新 WebView。

每次 WebView 更新时，它都会滚动回视图的顶部。

我想阻止这种情况发生，所以我尝试使用 webView.pageDown(true); 但这似乎总是返回错误。

任何帮助将非常感激。这是代码：

```
 webView.loadDataWithBaseURL("fake://not/needed", html, "text/html", "utf-8", "");
    boolean scrolled = webView.pageDown(true);
    System.out.println("Scrolled is: " + scrolled); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T20:11:08.953

我有同样的问题，所以进一步调查并发现这些相关：

*   [为什么android webview pageDown() 方法返回false？](https://stackoverflow.com/questions/5644346/why-android-webview-pagedown-method-returns-false)
*   [https://stackoverflow.com/questions/10064622/fix-scrollbar-to-bottom-of-web-view-in-android](https://stackoverflow.com/questions/10064622/fix-scrollbar-to-bottom-of-web-view-in-android)

我设法想出的唯一解决方案是创建一个处理程序，它将对 webView.pageDown(true) 的调用延迟 100 毫秒，然后它就可以工作了。它可能需要更少或更多的时间，可能取决于 Web 视图组件需要呈现给定 html 的时间。

这是加载和滚动的代码：

```
webView.loadDataWithBaseURL("fake://not/needed", html, "text/html", "utf-8", "");
mWebViewScrollHandler.removeCallbacks(mScrollWebViewTask);
mWebViewScrollHandler.postDelayed(mScrollWebViewTask, 100); 
```

这是处理程序的代码：

```
private final Handler mWebViewScrollHandler = new Handler();    

private final Runnable mScrollWebViewTask = new Runnable() {
    public void run() {
        webView.pageDown(true);
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T06:59:20.710

`loadDataWithBaseURL`是异步的，因此`pageDown`将在页面完成加载之前执行。这就是为什么@ZoltanF 说它需要等待一段时间才能执行代码

您需要在页面加载中添加侦听器，然后进行滚动：

```
webView.setWebViewClient(new WebViewClient() {
    @Override  
    public void onPageFinished(WebView view, String url) {
        super.onPageFinished(view, url);
        webView.pageDown(true);
    }  
}); 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-29T09:59:25.297

这个问题有两种方法：

不要重新加载`WebView`，而是更改服务器上的网页，以便它使用 ajax 进行自我更新。这将对行为进行更多控制。

在另一种方法上，使用 Sean 提到的事件侦听器：

```
webView.setWebViewClient(new WebViewClient() {
    @Override  
    public void onPageFinished(WebView view, String url) {
        super.onPageFinished(view, url);
        webView.pageDown(true);
    }  
}); 
```

# html - html 选择标签以应用 css

> ID：10047136
> 
> 赞同：1
> 
> 时间：2012-04-06T17:46:09.553
> 
> 标签：html, css

我想在从 html`<select>`标签中选择一个选项后应用一个 css 文件。

我尝试使用这些链接到现有的 css 文件。

```
<link rel="stylesheet" href="first.css" />
<link rel="stylesheet" href="second.css" /> 
```

我怎样才能使用它们`<select>`？

```
 <select name="choose-an-option">
        <option value="first">
                            <!--use first.css here-->
        </option>
        <option value="second">
                            <!--use second.css here-->
        </option>
    </select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T17:59:12.800

你可能想看看[这个](http://www.dynamicdrive.com/dynamicindex9/stylesheetswitcher.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T19:01:46.577

试试这个：

```
$("#choose-an-option").change(function() {
    $("link").attr("href", this.value + ".css");
)}; 
```

# android - Android：在 nonTouchAble PopupWindow 中处理触摸事件

> ID：10047137
> 
> 赞同：1
> 
> 时间：2012-04-06T17:46:09.867
> 
> 标签：android, view, touch, popupwindow

我正在研究操纵杆键盘。我需要通过第三方应用程序查看创建全屏弹出窗口。我在 popupWindow 上的视图将处理 onTouchEvent，但是我需要让这个事件继续到第三方应用程序。我正在从服务中调用 popupWindow。

我尝试将 onTouchEvent 的返回值（在视图中）设置为 false，但没有成功...

这是我的想法，但也许还有另一种方法......我会为任何想法感到高兴。

谢谢布鲁诺

# java - 什么时候可以使用 FRAMESET

> ID：10047145
> 
> 赞同：0
> 
> 时间：2012-04-06T17:46:55.260
> 
> 标签：java, jquery, html, spring

在我的 Java EE 应用程序页面中，我有 header.jsp、side menu.jsp、body.jsp 和 footer.jsp。侧边菜单包含 jQuery dynatree 插件。当用户单击树中的菜单项时，应使用适当的页面（也是 .jsp）更改正文。我正在使用瓷砖框架，我在 layout.jsp 页面中导入所有 js 代码。我想实现复制框架集的效果，但没有实际使用框架集。我认为框架集很难管理并且需要时间来加载。

谁能建议我如何解决这个问题？如果我在激活 dynatree 节点时使用 AJAX 获取每个页面，那么我必须手动更新页面。如果我使用`IFRAME`in `body.jsp`，那么我必须重新导入所有插件 js 代码，因为框架将无法访问主页上的 js 功能。

我想要高效的 html 页面管理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T18:00:07.227

由于您使用的是 jQuery，因此您应该能够将 AJAX 与`live`应用事件的方法结合使用（[请参阅文档](http://api.jquery.com/live/)或[此处](http://api.jquery.com/delegate/)）。这种方法称为“事件委托”，即使 jQuery 会为你做这件事，你也应该[明白发生了什么](http://davidwalsh.name/event-delegate)。根据您使用的 jQuery 版本，您可能会使用`delegate`而不是`live`- 本质上是相同的东西。

框架集实际上在 HTML5 中已被弃用——您应该避免使用它们，因为很快它们将在新的用户代理中完全不受支持。请参阅[http://www.useit.com/alertbox/9612.html](http://www.useit.com/alertbox/9612.html)进行冗长的讨论，希望能阻止您考虑这种方法。

这种`IFRAME`方法是一种技巧。你也许可以让它工作，但你正在将一个方形钉子锤入一个圆孔。

底线，如果您不想直接深层链接到内页，AJAX 是最佳和首选的解决方案。结合事件委托，它确实优于任何旧的或 hacky 的解决方案。而且，一定要使用“[渐进增强](http://en.wikipedia.org/wiki/Progressive_enhancement)”的想法——如果有人点击了这些链接并且关闭了 javascript，内容应该仍然加载。这意味着您从常规直接链接开始，然后为那些启用了 javascript 的用户添加花哨的东西。否则，您将关闭一定比例的用户，使其无法访问主页之外的任何内容。

当您使用 AJAX 进行导航时，您仍然需要为不了解单击您网站上的链接或任何其他网站上的链接的用户做好准备。他们将使用浏览器的“返回”按钮并最终返回 Google 而不是最后一页！那是因为他们通过您的网站进行的导航在他们的浏览器中看起来不像是独特的页面。较新的浏览器中有一些工具可以处理这个问题，但细节有点超出了这个答案的范围。查看MDN 上的[这篇文章](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)，了解有关操作浏览器历史记录的更多信息。

**文档**

*   jQuery 的`live`- [http://api.jquery.com/live/](http://api.jquery.com/live/)
*   jQuery 的`delegate`- [http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)
*   David Walsh 谈活动委托 - [http://davidwalsh.name/event-delegate](http://davidwalsh.name/event-delegate)
*   Jakob Nielsen 谈框架集 - [http://www.useit.com/alertbox/9612.html](http://www.useit.com/alertbox/9612.html)
*   MDN 关于浏览器历史修改 - [https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)
*   *jQuery for Designers*博客的示例用例`delegate`- [http://jqueryfordesigners.com/simple-use-of-event-delegation/](http://jqueryfordesigners.com/simple-use-of-event-delegation/)
*   关于渐进增强的维基百科文章 - [http://en.wikipedia.org/wiki/Progressive_enhancement](http://en.wikipedia.org/wiki/Progressive_enhancement)

# mp3 - M3U 播放列表...为什么是冗余文件？

> ID：10047148
> 
> 赞同：0
> 
> 时间：2012-04-06T17:47:04.820
> 
> 标签：mp3, shoutcast, round-robin, m3u

我正在查看一些随机的 Icecast 播放列表（可在此处获得： http: [//dir.xiph.org/index.php](http://dir.xiph.org/index.php)），我想知道为什么许多似乎包含相同 mp3 文件的列表。

例如：

> 获取[http://dir.xiph.org/listen/193289/listen.m3u](http://dir.xiph.org/listen/193289/listen.m3u)

```
http://87.230.101.49:80/top100station.mp3
http://87.230.103.107:80/top100station.mp3
http://87.230.101.16:80/top100station.mp3
http://87.230.101.78:80/top100station.mp3
http://87.230.101.11:80/top100station.mp3
http://87.230.103.85:80/top100station.mp3
http://80.237.158.87:80/top100station.mp3
http://87.230.101.30:80/top100station.mp3
http://80.237.158.88:80/top100station.mp3
http://87.230.103.9:80/top100station.mp3
http://87.230.103.58:80/top100station.mp3
http://87.230.101.12:80/top100station.mp3
http://87.230.101.24:80/top100station.mp3
http://87.230.103.60:80/top100station.mp3
http://87.230.103.8:80/top100station.mp3
http://87.230.101.25:80/top100station.mp3
http://87.230.101.56:80/top100station.mp3
http://87.230.101.50:80/top100station.mp3 
```

对于它的价值，Icecast 流旨在播放那些 Shoutcast 类型的直播流（想想互联网上的直播广播），所以不会有不同曲目的列表是有道理的..但是那些重复是什么？不同的比特率或只是镜像？

我问这一切是因为我想在我的移动应用程序中流式传输这些 mp3 之一，所以我想知道是否需要以某种方式找出要使用的 url...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T17:50:03.493

Internet 广播流通常在许多服务器上进行镜像。这平衡了带宽负载，并减少了故障点。

此外，随着服务器的流行，服务器通常会被填满。当曲目失败时，大多数播放器将转到播放列表中的下一个曲目，因此当客户端无法连接到特定服务器或断开连接时，这允许自动故障转移。

# php - php图像更改

> ID：10047155
> 
> 赞同：-4
> 
> 时间：2012-04-06T17:47:48.803
> 
> 标签：php, html

您好我想知道我可以使用哪些 php 代码来允许我的页面包含多个更改的图像。我希望 php 代码输出 HTML 标记。谁能帮我这个？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T17:52:37.527

您需要将所有图像从 PHP 输出到浏览器，然后使用 Javascpt 更改图片。PHP 用于服务器端脚本，您所说的更改需要客户端处理，即 Javascript。搜索 jQuery 图像转换器以获得一些想法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:32:15.693

您所指的这种机制通常称为幻灯片或轮播，它是使用 javascript 完成的。谷歌“jQuery 幻灯片”或“jQuery 轮播”，你会发现很多。

如果您需要一些简单的东西，我建议您使用微小的 jQuery 插件[tiny carousel](http://baijs.nl/tinycarousel/)。

滚动到该`How To`部分以了解如何设置它。然后，要使用 php 更改图像，您需要执行以下操作：

```
<div id="slider-code">
    <a class="buttons prev" href="#">left</a>
    <div class="viewport">
        <ul class="overview">
           <?php foreach(glob('slideshow/*.jpg') as $imagePath): ?>
              <li><img src="$imagePath" /></li>
           <?php endforeach; ?>
        </ul>
    </div>
    <a class="buttons next" href="#">right</a>
</div> 
```

# iphone - CVOpenGLESTextureCacheCreateTextureFromImage 返回 -6683(kCVReturnPixelBufferNotOpenGLCompatible)

> ID：10047159
> 
> 赞同：11
> 
> 时间：2012-04-06T17:48:18.830
> 
> 标签：iphone, opengl-es, yuv

我已经分别从视频帧中提取 YUV 数据并将它们保存在`data[0],data[1],data[2];`帧大小是`640*480;`现在我创建`pixelBuffer`如下：

```
void *pYUV[3] = {data[0], data[1], data[2]};
size_t planeWidth = {640, 320, 320};
size_t planeHeight = {480, 240, 240};
size_t planeBytesPerRow = {640, 320, 320};
CVReturn renturn = CVPixelBufferCreateWithPlanarBytes(kCFAllocatorDefault,
                                   640, 
                                   480,
                                   kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange, 
                                   nil,
                                   nil,
                                   3, 
                                   pYUV,
                                   planeWidth,
                                   planeHeight, 
                                   planeBytesPerRow, 
                                   nil,
                                   nil, nil, &_pixelBuffer);
CVPixelBufferLockBaseAddress(_pixelBuffer, 0);
CVPixelBufferRetain(_pixelBuffer);
    // Periodic texture cache flush every frame
CVOpenGLESTextureCacheFlush(_textureCache, 0);

// The Buffer cannot be used with OpenGL as either its size, pixelformat or attributes are not supported by OpenGL
 glActiveTexture(GL_TEXTURE0);
CVReturn err = CVOpenGLESTextureCacheCreateTextureFromImage(kCFAllocatorDefault, 
                                                            _textureCache,
                                                            _pixelBuffer,
                                                            NULL,
                                                            GL_TEXTURE_2D,
                                                            GL_LUMINANCE,
                                                            im.width,
                                                            im.height,
                                                            GL_LUMINANCE,
                                                            GL_UNSIGNED_BYTE,
                                                            0,
                                                            &_yTexture);

if (!_yTexture || err) {
    NSLog(@"CVOpenGLESTextureCacheCreateTextureFromImage failed (error: %d)", err);  
    return;
}
glBindTexture(CVOpenGLESTextureGetTarget(_yTexture), CVOpenGLESTextureGetName(_yTexture));
 CVPixelBufferUnlockBaseAddress(_pixelBuffer, 0); 
```

但是错误是 -6638，文档只是指出“由于不支持的缓冲区大小、像素格式或属性，像素缓冲区与 OpenGL 不兼容”。这对我没有多大帮助。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T16:00:57.767

您的源图像/视频帧的分辨率是否为 2 的幂？如果没有，您必须在创建纹理之前调整它的大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-19T01:12:21.257

[Apple 在Technical Q&A 1781](https://developer.apple.com/library/ios/qa/qa1781/_index.html)中详细说明了这个确切问题的原因

问题是源像素缓冲区必须支持 IOSSurface。指定一个空字典作为值`kCVPixelBufferIOSurfacePropertiesKey`

# groovy - Grails 项目在 STS 中损坏？

> ID：10047160
> 
> 赞同：1
> 
> 时间：2012-04-06T17:48:19.790
> 
> 标签：groovy, project, sts-springsourcetoolsuite

随着许多类解析错误，我的项目突然开始在包上显示此错误：

groovy.lang.MetaClass 类型无法解析。它是从所需的 .class 文件中间接引用的 - groovy.lang.GroovyObject 类型无法解析。它是从所需的 .class 文件中间接引用的

我还注意到所有单元测试都无法编译并在 TestFor 注释上显示此错误：

```
- Groovy:class TestFor is not an annotation in @TestFor
- Groovy:unable to resolve class TestFor , unable to find class for 
 annotation 
```

我试图清理项目然后刷新依赖项，但仍然没有乐趣。我非常 STS 并重新启动并尝试了清理/刷新。

我的一个 .groovy 文件确实出现编译错误，该文件抱怨未定义的类——但我已将定义这些类的 jar 添加到我的 lib 文件夹中，并且在导入类时没有看到任何错误。

有什么建议么？我必须重建整个项目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:02:11.337

事实证明，停止编译的未定义符号具有此结果。我不熟悉 STS/Eclipse 如何处理无法解析类的问题，并且希望在任何实际编译完成之前定义类路径。

所以答案是查看 STS 的错误日志，确定我的某个类是否丢失，并在像这样的路径下钻研之前先解决这个问题。

# c# - 字典的二维数组 - 复制

> ID：10047162
> 
> 赞同：0
> 
> 时间：2012-04-06T17:48:25.073
> 
> 标签：c#, arrays, dictionary, copy

让我们告诉我有字典的二维数组：

```
public Dictionary<int, string>[,] mat = new Dictionary<int, string>[3, 5]
{
  { new Dictionary<int, string>(), new Dictionary<int, string>(), new Dictionary<int, string>() },
  { new Dictionary<int, string>(), new Dictionary<int, string>(), new Dictionary<int, string>() },
  { new Dictionary<int, string>(), new Dictionary<int, string>(), new Dictionary<int, string>() },
  { new Dictionary<int, string>(), new Dictionary<int, string>(), new Dictionary<int, string>() },           
  { new Dictionary<int, string>(), new Dictionary<int, string>(), new Dictionary<int, string>() }
} 
```

我需要把它**复制**到另一个。我尝试了所有方法。
就像是：

```
matNew = mat; 
```

但是当我更改第一个时，它仍然会自动更改第二个。
我真的不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T17:58:31.187

我假设你想要一个深拷贝？

```
var matNew = new Dictionary<int, string>[mat.GetLength(0), mat.GetLength(1)];
for (int i = 0; i < mat.GetLength(0); ++i)
    for (int j = 0; j < mat.GetLength(1); ++j)
        matNew[i, j] = new Dictionary<int, string>(mat[i, j]); 
```

构造函数复制指定字典中的[`Dictionary(IDictionary<TKey, TValue>)`](http://msdn.microsoft.com/en-us/library/et0ke8sz.aspx)所有元素，并且可能是执行现有字典的浅克隆的最快方法。这适合您的情况，因为您的键和值都是不可变的（`int`和`string`）。

# javascript - setTimeout 内的 window.open 不执行操作

> ID：10047165
> 
> 赞同：0
> 
> 时间：2012-04-06T17:48:32.550
> 
> 标签：javascript

为什么调用 setTimeout 会显示警告框，但不会调用 window.open？如果我删除警报，它也不会执行 window.open 。

```
 // Pause first then open window
    function pause_first (url) {
        alert (url);
        var external_window = window.open(url,'_blank'); 
        external_window.focus();
    }

    var pause_ret = setTimeout( function() { pause_first(url); }, 1000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T17:51:05.063

很可能，因为您的浏览器认为它是一个非用户触发的弹出窗口……所以它阻止了它。

# c - malloc 内存分配不完整的类型编译错误

> ID：10047168
> 
> 赞同：0
> 
> 时间：2012-04-06T17:48:41.613
> 
> 标签：c, types, malloc

```
static char st[][8192];
void foo ( int tab_size){
    st = (char**) malloc ((tab_size+1)*sizeof(char)*8192);
} 
```

我在 st 类型不完整的“malloc”行中收到编译错误。怎么了？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T17:50:11.870

你的定义`st`确实不是一个完整的类型。

试试这个：

```
static char (*st)[8192];

void foo (int tab_size){
    st = malloc ((tab_size+1)*sizeof(*st));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T18:05:59.420

由于您没有为 指定内部尺寸的大小`st`，因此编译器不知道它需要多大；因此类型是*不完整*的，你永远不会在`malloc`调用之前完成它。

由于看起来您的意图是`st`动态分配，因此请遵循 Oli 的建议并将其声明为*指向*8192 元素数组的指针`char`：

```
static char (*st)[8192]; 
```

`malloc`并将您的陈述改写为

```
st = malloc(sizeof *st * (tab_size+1)); 
```

`sizeof *st`== `sizeof (char [8192])`== 8192。这个表格更简洁一些，更容易阅读。另请注意，在 C 中，您不必强制转换结果`malloc`（除非您使用的是 C89 之前的实现，在这种情况下，我很抱歉），并且不鼓励这种做法。

这将分配足够的空间来容纳`tab_size + 1`每个包含 8192 个字符的数组。

它仅在函数参数声明的上下文中`T a[]`声明`a`为指向`T`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T18:01:44.813

您混淆了两种完全不同的类型：数组与指向数组的指针。

```
static char st[][8192]; 
```

将 st 声明为数组类型。它不是可修改的左值，不能分配给它。

如果您的意图是为整数数组分配空间并将其分配给指针，请使用 Oli Charlesworth 建议的指针声明。

请注意，您的 st 声明虽然不会分配空间。如果你尝试这样的事情，你会得到一个错误..

```
printf("0x%x\n", st); 
```

编译器将其视为声明，并希望在其他地方看到实际定义。它不是一个定义，因为您没有给出数组第一个维度的值。

# javascript - javascript，当前 html

> ID：10047172
> 
> 赞同：1
> 
> 时间：2012-04-06T17:49:19.817
> 
> 标签：javascript, html, dom, firebug

是否有返回窗口*当前 html的 javascript 脚本？*我的意思是*webinspector*或*Firebug* html 选项卡的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T17:51:23.420

是的——这已经在 StackOverflow 上讨论过：

[如何将整个文档 HTML 作为字符串获取？](https://stackoverflow.com/questions/817218/get-entire-document-html-as-string)

简而言之，

```
var txt = document.documentElement.innerHTML;
alert(txt); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:51:35.203

试试这个例子，它对你有用

```
 <html>

      <style type="text/css">
       body {
         margin: 3em;
          }

   #Wrapper {
   background: #aaa;
   min-width: 200px;
   padding: 10px;        
  }

    #Panel {
   width: 300px;
   background: green;
    position:absoulte;
  }
</style>

  <script language="javascript" type="text/javascript">

  function CallPrint(strid)
    {
     var prtContent = document.getElementById(strid);
var WinPrint = window.open('', '',    'left=30,top=0,width=600,height=600,toolbar=1,scrollbars=1,status=0');

           var ss='<html><body>' + prtContent.innerHTML + '</html></body>';
          alert(ss);
       WinPrint.document.write(ss);

            WinPrint.document.close();

     }

  </script>
    <body>

    <div id="Wrapper">
     <div id="first">Panel</div>
   <div id="second">Panel</div>
   <div id="third">Panel</div>
   <div id="fourth">Panel</div>
   <a href="#" onClick="CallPrint('Wrapper');">Click TO View Full Html</a>
      </div>
      </body>
     </html> 
```

# c# - DataGridView 等效于 DataGrid.NavigateTo()

> ID：10047175
> 
> 赞同：0
> 
> 时间：2012-04-06T17:49:43.983
> 
> 标签：c#, datagridview

是否有等效于 DataGrid.NavigateTo() 的 DataGridView？我认为 DataGridView.SelectedColumns[] 会这样做，但它并不等效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T17:59:29.470

也许[`FirstDisplayedScrollingRowIndex`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.firstdisplayedscrollingrowindex.aspx)？

```
dataGridView1.FirstDisplayedScrollingRowIndex = rowIndex; 
```

如果您[的](https://stackoverflow.com/a/1155432/95573)`DataGridView`.

# c# - 如何使用 Thread.Sleep 为二叉树设置动画？

> ID：10047179
> 
> 赞同：1
> 
> 时间：2012-04-06T17:49:55.763
> 
> 标签：c#, winforms, animation, binary-tree

我一直在开发一个程序，该程序可以直观地输出二叉树的内容（依次由我自己编写的类表示）。我想在这个程序中包含的最后一个功能是树的后序、中序和前序构造的动画。

事实证明，这比我想象的更具挑战性。这是原始的绘制方法：

```
private void DrawNode(int x, int y, BinaryTreeNode<T> node, int nodeLevel, int maxDepth, int connectX = -1, int connectY = -1, )
    {
        //calculate distance between the node's children
        int distance = CalculateDistance(nodeLevel, maxDepth);

        //draw the node at the specified coordinate
        node.Draw(x, y, this.device);

        if (node.Left != null)
        {
            DrawNode(x - distance / 2, y + 50, node.Left, nodeLevel + 1, maxDepth, x, y, node);
        }
        if (node.Right != null)
        {
            DrawNode(x + distance / 2, y + 50, node.Right, nodeLevel + 1, maxDepth, x, y, node);
        }

        //connect the node to its parent
        if ((connectX != -1) && (connectY != -1))
        {
            node.Connect(connectX, connectY, device);
        }

        this.display.Image = surface;
    } 
```

我最初的想法是简单地将 Thread.Sleep(1000) 放在前两个 if 子句中——我真正需要做的就是在每次绘制节点之前暂停程序的执行 1 秒钟。

我意识到 Sleep 方法阻塞了绘图代码的执行，所以我放弃了那个方法。然后我尝试使用 Timers，但在处理树时发现它非常困难。

我的目标是简单地找到一种方法来暂停程序执行，而不会破坏 GUI 的响应能力，也不会使代码过于复杂。

任何帮助，将不胜感激 ：）。

编辑：一些可能相关的信息：程序在 Winforms 上运行，所有图形都通过 GDI+ 处理。如果您需要任何其他信息，请询问:)

编辑：对于 SLaks，

```
//draw the node's children
        if (drawChildren)
        {
            if (node.Left != null)
            {
                if (this.timer2.Enabled)
                {
                    this.timer2.Stop();
                }
                if (!this.timer1.Enabled)
                {
                    this.timer1.Start();
                }
                this.count1++;
                this.timer1.Tick += (object source, EventArgs e) =>
                {
                    this.count1--;
                    DrawNode(x - distance / 2, y + 50, node.Left, nodeLevel + 1, maxDepth, x, y, node);
                    if (this.count1 == 0)
                    {
                        this.timer1.Stop();
                    }
                };
            }
            else
            {
                this.timer1.Stop();
                this.timer2.Start();
            }
            if (node.Right != null)
            {
                this.count2++;
                this.timer2.Tick += (object source, EventArgs e) =>
                {
                    this.count2--;
                    DrawNode(x + distance / 2, y + 50, node.Right, nodeLevel + 1, maxDepth, x, y, node);
                    if (this.count2 == 0)
                    {
                        this.timer2.Stop();
                    }
                };
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T18:05:56.063

使用计时器并设置适当的更新间隔。在`Tick`事件中执行下一步绘制并显示它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T18:14:19.763

首先，给自己写一个`DrawNodesForLevel(int level)`函数。然后从顶层开始，启动计时器，每次计时，`DrawNodesForLevel()`以适当的级别调用，并增加级别。当你到达终点时，停止计时器。

编辑：更新了解您希望在每个节点之间暂停，而不是每个级别。

将函数中的变量移动到它们自己的`DrawNodeState`类中，并在调用 DrawNode() 时传递该类的实例。然后，不要让 DrawNode() 自己调用，而是让 DrawNode() 启动一个计时器（也是`DrawNodeState`类的一部分）。当计时器滴答时，滴答函数调用 DrawNode() 并将状态结构传递给它。

状态结构还必须跟踪它最后绘制的是左节点还是右节点，因此它可以接下来绘制适当的节点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T19:37:03.460

将您的代码分成两部分 - 一个遍历树，另一个渲染（您已经拥有）。

重写您的“遍历树”代码，`IEnumerable<node>`以便您可以一一选择节点。对于任何顺序，树遍历都有非递归版本，因此您可以使用“yield return”来制作迭代器。您应该能够创建简单的测试来验证代码（不需要 UI）。

比在计时器回调中只需从迭代器中获取下一项，直到全部完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T18:00:06.187

一种可能的解决方案是生成一个单独的线程，然后使用该线程定期调用 DrawNode 函数。这样UI线程就不会被阻塞。

由于您生成的线程不是 UI 线程，因此您需要在 UI 线程上显式调用 DrawNode 函数。这是一种可能的方法：

[如何从 C# 中的另一个线程更新 GUI？](https://stackoverflow.com/questions/661561/how-to-update-gui-from-another-thread-in-c)

# mysql - 曾经有效的 SQL 查询不再有效

> ID：10047183
> 
> 赞同：0
> 
> 时间：2012-04-06T17:50:01.160
> 
> 标签：mysql, sql

我有一个适用于旧版本 MySQL4 的 SQL 查询，但不适用于我当前版本的 5.5 我希望有人能看到我看不到的东西。

```
select tblprefix_groups_permissions.permission_name
  from tblprefix_groups_permissions, tblprefix_users, tblprefix_permissions
 where tblprefix_groups_permissions.permission_name = tblprefix_permissions.permission_name
 and tblprefix_groups_permissions.group_id = tblprefix_users.group_id
 and (tblprefix_users.user_id = '==NUMERIC ID=='
 and (tblprefix_permissions.permission_name = 'ADMIN::SETTINGS::VIEW'
 or tblprefix_permissions.permission_name = 'ALL')) 
```

SQL 语句对于它的作用应该是非常自我解释的，我看不出挂断可能在哪里。假设返回一个列表，如果它没有返回任何内容，那么用户就会被拒绝。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T13:31:39.733

该语句是正确的，我忽略了该语句还检查以确保权限位于主权限表中的事实，即：tblprefix_permissions.permission_name 我尚未将权限放入主权限表中

所以这让我变得愚蠢或只是累了大声笑对不起伙计们，干得好，感谢您的快速回复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T17:54:18.253

看来您在这里错误地放置了引号：

```
ADMIN::SETTINGS::VIEW'' 
```

无论如何......你确定它适用于 MySQL 4 吗？

顺便说一句，您可以删除外部括号。

# java - PeriodFormatter - 如果小时或分钟恰好是个位数，如何在前面加上 0？

> ID：10047188
> 
> 赞同：5
> 
> 时间：2012-04-06T17:50:15.053
> 
> 标签：java, formatting, jodatime, period

当我使用`PeriodFormatter`如下

```
PeriodFormatter formatter = new PeriodFormatterBuilder().appendHours()
                .appendLiteral(":").appendMinutes().appendLiteral(":")
                .appendSeconds().toFormatter(); 
```

我得到的输出是`4:39:9`这意味着 4 小时 39 分 9 秒。

如何修改格式化程序来生成`04:39:09`？谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-06T18:32:42.693

添加`.printZeroAlways()`和`.minimumPrintedDigits(2)`：

```
 PeriodFormatter formatter = new PeriodFormatterBuilder()
        .printZeroAlways()
        .minimumPrintedDigits(2)
        .appendHours()
        .appendLiteral(":")
        .appendMinutes()
        .appendLiteral(":")
        .appendSeconds()
        .toFormatter(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:31:22.180

看看 minimumPrintedDigits。它应该做你想做的事。

[http://joda-time.sourceforge.net/api-release/org/joda/time/format/PeriodFormatterBuilder.html#minimumPrintedDigits(int)](http://joda-time.sourceforge.net/api-release/org/joda/time/format/PeriodFormatterBuilder.html#minimumPrintedDigits%28int%29)

# magento - 在magento中更改愿望清单网址

> ID：10047194
> 
> 赞同：0
> 
> 时间：2012-04-06T17:50:40.720
> 
> 标签：magento

我有一个特别的要求。可以将整个愿望清单链接指向不同的东西吗？一切都应该替换为不同的名称。因此，不是 demo.store.com/wishlist 而是 demo.store.com/scrapbook 如果可能的话，我应该从哪里开始寻找？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T15:36:12.190

您可以将其添加到`app/etc/local.xml`：

```
<config>
    <!-- other stuff -->
    <frontend>
        <routers>
            <wishlist>
                <args>
                    <frontName>scrapbook</frontName>
                </args>
            </wishlist>
        </routers>
    </frontend>
    <!-- other stuff -->
</config> 
```

# mysql - Mysql 给数据类型为 enum 的列添加新值

> ID：10047195
> 
> 赞同：31
> 
> 时间：2012-04-06T17:50:51.833
> 
> 标签：mysql, ddl

假设我有一个 mysql 表，并且我有一个类型的列，`enum`并且该列定义了一组值，例如`enum('a','b','c','d')`.

我如何`'e'`使用 alter table 语句向这个集合添加一个值？

我想使用 . 将新值附加到它的末尾`CONCAT`。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-06T17:53:10.770

不幸的是，在向枚举添加新值时，您需要重新列出所有现有的枚举值。

```
ALTER TABLE mytable MODIFY COLUMN mycolumn ENUM('a','b','c','d','e'); 
```

你真的不想`CONCAT()`在这种情况下使用。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2016-07-19T05:40:59.110

如果要添加默认值并且还想在特定列之后进行枚举，请尝试以下查询：

```
Alter table `your_table` 
Add column `visible_on` enum('web','mobile','both') default 'both' 
After `your_column`; 
```

# asp.net-mvc - MVC Mini-Profiler 在修改 RouteCollection 时抛出 LockRecursionException

> ID：10047203
> 
> 赞同：7
> 
> 时间：2012-04-06T17:51:39.483
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, mvc-mini-profiler

[使用 MVC MiniProfiler](http://code.google.com/p/mvc-mini-profiler/)时，我看到一个非常疯狂的错误。间歇性地，我正在处理的站点进入每个请求都会引发此异常的状态：

```
System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. 
---> System.TypeInitializationException: The type initializer for 'MvcMiniProfiler.MiniProfiler' threw an exception. 
---> System.Threading.LockRecursionException: Write lock may not be acquired with read lock held. 
 This pattern is prone to deadlocks. Please ensure that read locks are released before taking a write lock. 
 If an upgrade is necessary, use an upgrade lock in place of the read lock.
at System.Threading.ReaderWriterLockSlim.TryEnterWriteLockCore(Int32 millisecondsTimeout)
at System.Threading.ReaderWriterLockSlim.TryEnterWriteLock(Int32 millisecondsTimeout)
at System.Web.Routing.RouteCollection.GetWriteLock()
at MvcMiniProfiler.UI.MiniProfilerHandler.RegisterRoutes() 
 in C:\Users\sam\Desktop\mvc-mini-profiler\MvcMiniProfiler\UI\MiniProfilerHandler.cs:line 81
at MvcMiniProfiler.MiniProfiler..cctor() 
 in C:\Users\sam\Desktop\mvc-mini-profiler\MvcMiniProfiler\MiniProfiler.cs:line 241
— End of inner exception stack trace —
at MvcMiniProfiler.MiniProfiler.get_Current()
at TotallyNotOverDrive.Boom.MvcApplication.Application_EndRequest() 
```

错误一直存在，直到应用程序池被回收。看起来好像有一个锁被持有，它阻止了 MiniProfiler 尝试注册它的路由。这发生在我没有启动 MiniProfiler 但在`Application_EndRequest`我调用期间的请求中`MiniProfiler.Stop()`，这似乎导致在访问 Current 属性时创建 MiniProfiler。对于一个简单的解决方案，我修改了 EndRequest 以使用与 BeginRequest 相同的逻辑来停止分析器，因此如果请求未使用分析器，则应完全避免此错误。在将此代码发送到生产环境之前，我仍然想解决实际问题。

我的路由表非常简单，只添加到`Application_Start`方法中。我们没有使用任何其他可能在启动后修改路由表的第三方代码。我对路由所做的唯一可疑的事情是将自定义路由添加到表中，但这是一个非常简单的路由，我只需要一些比标准 MVC 路由可以完成的更复杂的模式匹配。

我查看了相关的 MiniProfiler 代码，没有看到任何可能导致锁未释放的内容，所以我假设它是 ASP.NET 和 MiniProfiler 在访问 RouteTable 时发生冲突的组合。我无法可靠地重现该问题，所以我想知道是否有其他人在路由方面遇到过这样的问题。谢谢你的尽心帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:54:31.393

我想我知道发生了什么，您需要提前注册路线。您在 期间注册它们`EndRequest`，此时管道中可能有其他请求在路由表上持有读锁。

路由在 的静态构造函数中注册`MiniProfiler`。如果您在 期间访问 MiniProfiler 中的任何设置`Application_Start`，这将启动将注册路由的静态构造函数。

例如，尝试在注册路线后添加类似的内容。

`MiniProfiler.Settings.PopupMaxTracesToShow = 10;`

# php - 如何在插入查询之前在变量中获取 insert_id

> ID：10047205
> 
> 赞同：0
> 
> 时间：2012-04-06T17:51:46.870
> 
> 标签：php, mysql, variables, insert

我喜欢为将由插入查询中的字段输入创建的文件创建一个特定的文件名。我喜欢有一个独特的钥匙。此键由一个 user_id、一个时间戳组成，在此结束时，应放置从触发的插入查询生成的 insert_id。它应该放在 auto_increment 号。在我生成的变量的末尾。所以问题是，我在插入查询触发之前创建了一个变量，以便该变量将成为插入查询的一部分，例如：

```
$get_num = $db->query("SELECT COUNT (*) FROM tableA");  
$num = $query->fetch_assoc();
$end = $num + 1;

$file_id = $id .".". time() .".". $end;

$insert = $db->query("INSERT INTO tableA ( file_id, a, b, c) VALUES('".$file_id."','".$a."','".$b."','".c."')"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T17:53:43.670

其实，忘记我之前写的。你不能指望`COUNT`为你工作，因为当一行被删除时会发生什么？您将有重复的值。对您来说最好的选择是首先创建行，获取 insert_id，然后`UPDATE`使用您之前描述的函数获取 file_id。

```
$uid = uniqid();
$insert = $db->query("INSERT INTO tableA ( file_id, a, b, c) VALUES('".$uid."','".$a."','".$b."','".c."')");

$file_id = $id .".". time() .".". mysql_insert_id();
$db->query("UPDATE tableA SET file_id='{$file_id}' WHERE file_id='{$uid}' LIMIT 1;"); 
```

最后，您仍然必须使用两个查询，所以它不会占用更多资源。另外，您不再进行`COUNT`手术。

在其他新闻中，请务必阅读 SQLi，具体取决于您的 a、b、c 变量的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T17:58:59.387

这是一个坏主意。进行插入，然后使用[LAST_INSERT_ID](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)。否则，正如@AuthmanApatira 指出的那样，您可能拥有错误的 ID。用于此的 PHP 是[mysql_insert_id()](http://www.php.net/manual/en/function.mysql-insert-id.php)。

另请注意，如果您的索引列是 auto_increment，您甚至不需要担心 id；db 会为您处理它。您可以在查询运行后获取它。

# sharepoint-2010 - 如何在受 Site Minder 保护的 SharePoint 2010 中调用自定义 Web 服务？

> ID：10047206
> 
> 赞同：1
> 
> 时间：2012-04-06T17:51:49.613
> 
> 标签：sharepoint-2010, siteminder

我在受 SiteMinder 保护的 SharePoint 2010 环境中部署了一个 Web 服务。我需要一种通过 SiteMinder 进行身份验证的方法，然后能够调用该 Web 服务并从调用中获取一些结果。

搜索 Google 后，我没有看到任何有用的资源。

任何帮助将不胜感激。谢谢

# java - 在 Glassfish 中制作数据源

> ID：10047207
> 
> 赞同：5
> 
> 时间：2012-04-06T17:51:54.733
> 
> 标签：java, jakarta-ee, glassfish

我正在使用服务器的管理控制台为 GlassFish 创建一个 JDBC 连接池资源。

页面上用于创建池的字段之一标记为“资源类型”。该字段有四个可能的值：javax.sql.DataSource、javax.sql.XADataSource、javax.sql.ConnectionPoolDataSource 和 javax.sql.Driver，但创建 JDBC 连接池“向导”的帮助文本没有太多关于这些选择的优点和缺点。

当提示选择我应该选择的资源类型时？

我将连接到本地 MySQL 服务器。最好也能解释下拉菜单中的选项之间的差异。

![在此处输入图像描述](../Images/8e3f508d9f0956c2d6424e6c800bea10.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T13:32:03.947

以下是您需要列出的每种资源类型的场景。希望这可以帮助。

**DataSource** DataSource DataSource 对象是 Connection 对象的工厂。使用简单数据源时，appserver 使用自己的池而不是原生的。

**ConnectionPoolDataSource** ConnectionPoolDataSource 对象是 PooledConnection 对象的工厂。ConnectionPoolDataSource 用于授予对通过 JDBC 驱动程序实现本机池的 PooledConnection 的访问权限。在这种情况下，应用服务器可以使用本机接口实现连接池。请参阅[Java API](http://docs.oracle.com/javase/1.4.2/docs/api/javax/sql/PooledConnection.html)以了解 PooledConnection 是什么... ConnectionPoolDataSource 可以使用第三方实现进行池化——据我所知，对于 Tomcat，例如使用 DBCP 连接池。

**XADataSource** 如果要执行分布式事务，则需要 XADataSource。如果应用程序应该使用 XADataSource 而不是 DataSource

*   使用 Java 事务 API (JTA)
*   在单个事务中包括多个数据库更新
*   在事务期间访问多个资源，例如数据库和 Java 消息服务 (JMS)

# php - 如何将人类可读的日期字符串转换回时间

> ID：10047209
> 
> 赞同：0
> 
> 时间：2012-04-06T17:52:10.543
> 
> 标签：php, string, date

我的网站使用以下代码：

```
$a1="1293011062"; // hex code umm i think !
$expires = date('M d, Y', $a1);
echo $expires; // Output Dec 22, 2010 
```

如何进行反向操作？也就是说，如果我想转换`Apr 06, 2012`为十六进制，它的表示方式是`a1`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T17:55:46.777

您可以使用 strtotime：[http](http://us2.php.net/strtotime) ://us2.php.net/strtotime这不是十六进制

```
<?php
$a1="1293004800";
$expires = date('M d, Y', $a1);
echo $expires . "<br/>"; // Output Dec 22, 2010

echo strtotime($expires); // 1293004800
?> 
```

# iphone - 钥匙串 ARC 错误

> ID：10047211
> 
> 赞同：3
> 
> 时间：2012-04-06T17:52:25.013
> 
> 标签：iphone, objective-c, ios, xcode, automatic-ref-counting

我在 XCode 中使用以下代码，为启用了 ARC 的 iOS 构建。为什么会出现这些错误？

![在此处输入图像描述](../Images/2bd66d7bb4cd781ceeaae68744a3fa11.png)

这是我的代码：

```
KeychainItemWrapper *keychainItem = [[KeychainItemWrapper alloc] initWithIdentifier:@"Test" accessGroup:nil];
[keychainItem setObject:@"Test" forKey:kSecAttrService];

[keychainItem setObject:password.text forKey:kSecValueData];
[keychainItem setObject:username.text forKey:kSecAttrAccount]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T17:54:15.840

你得到这个是因为`kSecAttrAccount`它不是 Obj-C 类型。只需`(__bridge id)`在每个喜欢之前放置一个

```
[keychainItem setObject:password.text forKey:(__bridge id)kSecValueData]; 
```

# iphone - 适用于 iOS 的 RESTful Web 服务器库

> ID：10047213
> 
> 赞同：2
> 
> 时间：2012-04-06T17:52:28.167
> 
> 标签：iphone, ios, json, cocoa, rest

我正在尝试创建一个在 iPhone 上运行的 Rest web 服务；我已经完成了初步研究，发现了 CocoaHttpServer 和 TouchCode json 解析器，是否有任何库/示例代码将它们绑定到一个 Rest 端点？

如果它不存在，我该如何写一个？对某种设计文档等的任何引用都会有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T06:16:25.217

我正在使用 CocoaHTTPServer 和 iOS 内置 JSON 库在 iVocabulary 中提供 RESTful 服务。首先，我自己编写了一个冗长的 Connection 类（CocoaHTTPServer 中处理请求的核心）。但是解析 URL 有点复杂。

所以我写了一个更通用的 Connection 类，它将 HTTP 请求路由到不同的块，用于不同的 URL 和不同的 HTTP 方法。URL 可以包含被解析的参数（以 : 作为前缀）。这本身不是一个通用的 REST 服务，但我（例如）为获取给定实体的所有核心数据对象的 url "/rest/:entityname" 添加了一个块。

你可以在我在 github 上的 CocoaHTTPServer 分支中找到路由器实现：[https ://github.com/chbeer/CocoaHTTPServer](https://github.com/chbeer/CocoaHTTPServer)

另一个路由器实现：[https ://github.com/mattstevens/RoutingHTTPServer](https://github.com/mattstevens/RoutingHTTPServer)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-06T18:24:55.937

检查 RestKit 以使用 Restful Web 服务。

[http://restkit.org/](http://restkit.org/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-15T18:23:09.733

我推荐[RestKit](http://restkit.org)，我已经用了一年多了，很喜欢。然而，我最近从一些同事那里了解到[AFNetworking](https://github.com/AFNetworking/AFNetworking)，他们声称它非常轻量级，因此更喜欢它作为 RestKit 的替代品，所以我很快就会尝试一下。

# c++ - C ++中的统一随机数生成器

> ID：10047215
> 
> 赞同：3
> 
> 时间：2012-04-06T17:52:32.920
> 
> 标签：c++, random, tr1

我正在尝试使用 C++ TR1 在 C++ 中生成真正的随机数。但是，当再次运行我的程序时，它会产生相同的随机数。代码如下。

我需要尽可能随机的每次运行的真实随机数。

```
std::tr1::mt19937 eng;  
std::tr1::uniform_real<double> unif(0, 1);
unif(eng); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-06T17:58:03.780

您必须使用种子初始化引擎，否则将使用默认种子：

```
eng.seed(static_cast<unsigned int >(time(NULL))); 
```

然而，*真正的*随机性是在没有额外输入的情况下在确定性机器上无法实现的。每个伪随机数生成器在某种程度上都是周期性的，这是您对非确定性数字所不期望的。例如`std::mt19937`，有 2^(次 19937) -1 次迭代。真正的随机性很难实现，因为您必须监控似乎不确定的事物（用户输入、大气噪声）。请参阅[Jerry](https://stackoverflow.com/a/10047328/1139697)和[Handprint 的回答](https://stackoverflow.com/a/10047398/1139697)。

如果您不想要基于时间的种子，您可以使用[`std::random_device`](http://en.cppreference.com/w/cpp/numeric/random/random_device)如[emsr's answer](https://stackoverflow.com/a/10048451/1139697)中所见。您甚至可以将`std::random_device`其用作生成器，这是仅使用标准库方法最接近真正随机性的方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-06T18:01:05.550

这些是伪随机数生成器。他们永远无法产生真正的随机数。为此，您通常需要特殊的硬件（例如，通常需要测量热二极管中的噪声或放射源的辐射）。

要在不同的运行中从伪随机生成器中获取不同的序列，您通常会根据当前时间为生成器播种。

但是，这会产生相当可预测的结果（即，其他人可以很容易地找出您使用的种子。如果您需要防止这种情况发生，大多数系统确实提供了一些至少相当随机数的来源。在 Linux 上，/dev/random 和在 Windows 上，`CryptGenRandom`.

但是，后者往往相当慢，因此您通常希望将它们用作种子，而不仅仅是从中检索所有随机数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-06T18:08:13.483

**这个答案是一个维基。**我正在.NET 中开发一个库和示例，请随时以任何语言添加您自己的...

没有外部“随机”输入（例如监控街道噪音），作为确定性机器，计算机无法生成真正的随机数：[随机数生成](http://en.wikipedia.org/wiki/Random_number_generation)。

由于我们大多数人没有资金和专业知识来使用特殊设备来提供混乱的输入，因此有一些方法可以利用您的操作系统、任务调度程序、进程管理器和用户输入（例如鼠标移动）的一些不可预测的性质，生成改进的伪随机性。

不幸的是，我对 C++ TR1 知之甚少，不知道它是否有能力做到这一点。

**编辑**

正如其他人指出的那样，通过使用不同的输入为 RNG 播种，您会得到不同的数字序列（最终会重复，因此它们不是真正随机的）。因此，您有两种选择来改进您的一代：

定期用某种混乱的输入为您的 RNG 重新播种，或者*根据您的系统运行方式使您的 RNG 的输出不可靠*。

前者可以通过创建算法来完成，这些算法通过检查系统环境来明确产生种子。这可能需要设置一些事件处理程序、委托函数等。

后者可以通过较差的并行计算实践来实现：即设置许多 RNG 线程/进程以“不安全的方式”竞争以创建每个后续随机数（或数字序列）。这隐含地从系统上的活动总和中增加了混乱，因为每分钟的事件都会影响到哪个线程的输出最终被写入并最终在调用“GetNext()”类型方法时被读取。下面是 .NET 3.5 中的粗略概念证明。注意两点：1）即使RNG每次都以相同的数字作为种子，但不会创建24个相同的行；2) 性能受到明显影响，资源消耗明显增加，这是改进随机数生成时给定的：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;

namespace RandomParallel
{
    class RandomParallel
    {
        static int[] _randomRepository;
        static Queue<int> _randomSource = new Queue<int>();
        static void Main(string[] args)
        {
            InitializeRepository(0, 1, 40);
            FillSource();
            for (int i = 0; i < 24; i++)
            {
                for (int j = 0; j < 40; j++)
                    Console.Write(GetNext() + " ");
                Console.WriteLine();
            }
            Console.ReadLine();
        }
        static void InitializeRepository(int min, int max, int size)
        {
            _randomRepository = new int[size];
            var rand = new Random(1024);
            for (int i = 0; i < size; i++)
                _randomRepository[i] = rand.Next(min, max + 1);
        }
        static void FillSource()
        {
            Thread[] threads = new Thread[Environment.ProcessorCount * 8];
            for (int j = 0; j < threads.Length; j++)
            {
                threads[j] = new Thread((myNum) =>
                    {
                        int i = (int)myNum * _randomRepository.Length / threads.Length;
                        int max = (((int)myNum + 1) * _randomRepository.Length /     threads.Length) - 1;
                        for (int k = i; k <= max; k++)
                        {
                            _randomSource.Enqueue(_randomRepository[k]);
                        }
                    });
                threads[j].Priority = ThreadPriority.Highest;
            }
            for (int k = 0; k < threads.Length; k++)
                threads[k].Start(k);
        }
        static int GetNext()
        {
            if (_randomSource.Count > 0)
                return _randomSource.Dequeue();
            else
            {
                FillSource();
                return _randomSource.Dequeue();
            }
        }
    }
} 
```

只要在生成过程中有用户输入/交互，这种技术*就会*产生一个不可破解的、非重复的“随机”数字序列。在这种情况下，知道机器的初始状态不足以预测结果。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-06T19:43:15.140

如果您想要真正的硬件随机数，则标准库通过 random_device 类提供对此的访问：

我用它来播种另一个生成器：

```
#include <random>
...
  std::mt19937_64 re;
  std::random_device rd;
  re.seed(rd());
...
  std::cout << re(); 
```

如果您的硬件有 /dev/urandom 或 /dev/random 则将使用它。否则，实现可以免费使用它的伪随机生成器之一。在 G++ 上，mt19937 用作后备。

我很确定 tr1 也有这个，正如其他人指出的那样，我认为此时最好使用 std C++11 实用程序。

埃德

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-06T18:05:23.090

这是播种引擎的示例（使用 C++11 而不是 TR1）

```
#include <chrono>
#include <random>
#include <iostream>

int main() {
    std::mt19937 eng(std::chrono::high_resolution_clock::now()
                                          .time_since_epoch().count());
    std::uniform_real_distribution<> unif;
    std::cout << unif(eng) << '\n';
} 
```

用当前时间播种是相对可预测的，可能不是应该做的事情。以上至少不会将您限制为每秒一个可能的种子，这是非常可预测的。

如果你想从 /dev/random 之类的东西而不是当前时间播种，你可以这样做：

```
std::random_device r;
std::seed_seq seed{r(), r(), r(), r(), r(), r(), r(), r()};
std::mt19937 eng(seed); 
```

（这取决于你的标准库实现。例如，libc++ 默认使用 /dev/urandom，但在 VS11 中 random_device 是确定性的）

当然，您从 mt19937 中得到的任何东西都无法满足您对“真正的随机数”的要求，我怀疑您并不真的需要真正的随机性。

# php - 如何用 php 打开 MS Word 文件？

> ID：10047219
> 
> 赞同：0
> 
> 时间：2012-04-06T17:52:38.137
> 
> 标签：php, ms-word

> **可能重复：**
> [在 Linux 中使用 PHP 创建 Word 文档](https://stackoverflow.com/questions/124959/create-word-document-using-php-in-linux)

我正在尝试打开 Word 文件并在基于 linux 的操作系统上对其进行编辑。
是否有任何 PHP API 可以让我打开和编辑 word 文件？我想阅读和编辑这些文件并查看图像和文本格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:05:22.647

我们使用 COM 对象在 Windows 机器上使用 PHP 打开 MATLAB。我们能够很好地控制它，通过脚本等。你可能想看看那个。

# linux - 如何在linux shell中检查数字是否偶数？

> ID：10047220
> 
> 赞同：0
> 
> 时间：2012-04-06T17:52:46.457
> 
> 标签：linux

我试过了

```
pancmite@atlas:~$ test ($LSD / 2) -eq 0
bash: syntax error near unexpected token `$LSD'

pancmite@atlas:~$ test $LSD / 2 -eq 0
bash: test: too many arguments

pancmite@atlas:~$ test $number -lt $LSD
bash: test: -lt: unary operator expected 
```

我想要一行命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T17:57:47.800

```
expr $LSD % 2 
```

或者：

```
$((LSD % 2)) 
```

返回值 1 是奇数，0 是偶数。所以你可以试试这个作为测试：

```
LSD=5
echo $((LSD % 2)) 
```

你应该得到一个返回值 1。

# java - 移动第一个索引

> ID：10047221
> 
> 赞同：0
> 
> 时间：2012-04-06T17:52:50.143
> 
> 标签：java, arrays, sorting

我的数组大小为 3，我试图将第一个索引移到最后一个位置，同时将其他索引移到左侧。例如：

{1,2,3} 到 {2,3,1}

这是我的代码

```
 int[] nums = {1,2,3}; 
 int[] numsShifted = new int[3];

 for(int i = 0; i < nums.length - 1; i++)
 {
  int tempNum = nums[i];
  numsRotated[i] = nums[i + 1];
  numsRotated[i+1] = tempNum;
 } 
```

我遇到的问题是数组的最后一个索引，我得到的值不正确。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T17:56:36.740

只需做一个简单的移位，然后将第一个数字复制到最后一个位置：

```
 int[] nums = {1,2,3}; 
 int[] numsShifted = new int[3];

 int temp = nums[0];
 for(int i = 1; i < nums.length; i++)
 {
    numsShifted[i - 1] = nums[i];
 }
 numsShifted[nums.length - 1] = temp; 
```

**编辑**：您实际上不需要保护第一项，因为您没有覆盖原始数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T17:57:38.160

好吧，您需要将第一个元素存储在循环之外，然后开始移位。循环结束后只需将第一个元素存储为数组的最后一个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T17:57:40.500

您必须保存 nums[0] 值；

```
int saved = nums[0];

for(int i = 0; i < nums.length - 1; i++) {
  numsShifted[i] = nums[i+1];
}
numsShifted[numsShifted.length - 1] = saved; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T18:01:01.443

```
int[] nums = {1,2,3}; 
int[] numsShifted = new int[3];

    for(int i = 0; i < nums.length - 1; i++)
    {
        int tempNum = nums[i]; //tempNum=1, tempNum=2
        numsRotated[i] = nums[i + 1]; //numsRotated[0]=2, numsRotated[1]=3
        numsRotated[i+1] = tempNum; //numsRotated[1]=1, numsRotated[2]=2  <- this is incorrect and the loop ends
    } 
```

最后，你有 2,3,2。您将需要修复循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T18:03:59.573

如果您想使用您编写的代码，只需像我一样修复它。否则，其他答案都很好！

```
 int[] nums = {1, 2, 3};
    int[] numsShifted = new int[3];

    for (int i = 0; i < nums.length; i++) { //Do one more iteration
        if (i + 1 > 2) { //If this is the last element, we take the first one of nums
            numsShifted[i] = nums[0];
        } else { //Otherwise we do as you did in your code
            numsShifted[i] = nums[i + 1];
            numsShifted[i + 1] = nums[i];
        }            
    }
    System.out.println(Arrays.toString(numsShifted)); 
```

编辑：删除 tempNum 因为你不需要它

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-06T18:05:21.120

```
int[] a = {1,2,3};
int[] b = new int[3];

for(int j = 0 , i = 2 ; j < a.length ; j++)
{
     b[i++] = a[j];
     if(i >= 3)
     i = 0;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-06T18:26:16.523

以下是一些其他选项，没有循环：

```
public static int[] queueFirst(int[] in) {
   int len = in.length;   
   if (len <= 1) return in;
   int[] ret  = Arrays.copyOf(Arrays.copyOfRange(in, 1, len), len);
   ret[len - 1] = in[0];
   return ret;
} 
```

或供参考：

```
public static <T> T[] queueFirst(T[] in) {
   if (in.length <= 1) return in;
   ArrayList<T> n = new ArrayList<T>(Arrays.asList(in));
   n.add(n.remove(0));
   return n.toArray(in);
} 
```

# php - 来自 PHP 结果的 jQuery json

> ID：10047222
> 
> 赞同：1
> 
> 时间：2012-04-06T17:52:50.257
> 
> 标签：php, jquery, ajax, json

我有这个 jQuery 脚本

```
var dataString = "class_id="+class_id;

$.ajax({
    type: "POST",
    url: "page.php",
    data: dataString,
    success: function (msg) {
        //stuck here
    },
    error: function () {
        showNotification("error", "Could not process at this time, try again later."); //this is a function created by me (which works fine so I just left the code in here)
    }
}); 
```

我的 PHP 输出是这样的

```
echo '{status:1,message:"Success"}'; 
```

或者

```
echo '{status:0,message:"Failure"}'; 
```

我在 jQuery`success: function(...)`部分尝试做的是检查状态是 0 还是 1，然后显示消息。

我试图做的是

```
success: function(text) {
   if(parseInt(text.status) == 1) {
      alert(text.message); // this is the success, the status is 1
   } else {
      alert(text.message); // this is the failure since the status is not 1
   }
} 
```

这不起作用，它只输出 else 语句，即使状态为 1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T17:56:13.483

您的 PHP 正在生成无效的 JSON，并且没有显示设置适当的内容类型标头来告诉浏览器首先将其视为 JSON 的迹象。所以首先，修复PHP：

```
header('application/json');
echo json_encode(Array("status" => 1, "message" => "Success")); 
```

然后：

```
success: function (msg) {
    alert(msg.message)
}, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T18:00:35.707

你也可以使用

**PHP**

```
echo json_encode(Array("status" => 1, "message" => "Success")); 
```

**JS**

在您的回调函数中使用

```
success: function (msg) {
    $.parseJSON(msg);
    alert(msg.message);
} 
```

将`parseJSON`PHP 返回/回显的 json 字符串转换为 json 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T17:55:19.737

试试下面的东西，

```
$.ajax({
    type: "POST",
    url: "page.php",
    data: dataString,
    dataType: 'json',
    success: function (msg) {
        if (msg.status == 0) {
          alert("Success " + msg.message);
        } else if (msg.status == 1) {
          alert("Error " + msg.message);
        }
    },
    error: function () {
        showNotification("error", "Could not process at this time, try again later."); //this is a function created by me (which works fine so I just left the code in here)
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T18:01:40.150

如果您未在 $.ajax 中指定，则传递给响应处理程序的类型“json”数据将被视为字符串。如果您指定 'json' dataType 参数，您可以使用：

```
msg.status 
```

和

```
msg.message 
```

作为提示，我建议在 php 中使用 json_encode 函数来生成 json 输出。

# azure - Windows Azure 部署保留旧版 Silverlight 应用程序

> ID：10047227
> 
> 赞同：4
> 
> 时间：2012-04-06T17:53:26.413
> 
> 标签：azure

我有一个由 2 个主要项目组成的小型解决方案，一个 Mvc4 Web Api 和一个 silverlight 5 应用程序。我最初在 Azure 平台上配置和部署了应用程序，一切都很顺利，但是从那以后，当我再次部署时，silverlight 项目没有被推送，并且在线站点具有旧版本。

我应该提到所有在我的本地开发机器上的天蓝色模拟器都很好用。

有人有类似的问题吗？

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T20:51:01.487

我首先怀疑（正如西蒙建议的那样）浏览器可能仍然缓存了以前的客户端并加载它而不是下载你的新客户端。

您可以在托管 silverlight 应用程序的页面上的代码中使用版本号来提供帮助。虽然清除缓存对您来说很容易——但您真的不想在更新时告诉用户这样做。

将版本设置为最新的程序集版本（silverlight 客户端项目程序集），如果缓存的版本号较低，这将强制浏览器下载客户端。

```
<param name="source" value="AppPath/App.xap?version=2.0.0.6"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T09:15:17.300

行，

所以在拔掉头发后，我终于想通了。

我必须更改构建配置以在 VS 中发布进行重建，然后进行发布，因为显然**天蓝色项目在您发布时不会在项目上进行重建。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:59:21.277

要解决此问题，您需要确定问题的根源（是否存在缓存问题的客户端问题）。即使您说缓存不是问题，我们也需要首先确定这一点。

我建议您首先执行以下操作：

1.  在您的角色上激活远程桌面
2.  通过 RDP 连接并将此文件保存到角色： http: [//support.microsoft.com/kb/841290](http://support.microsoft.com/kb/841290) (fciv.exe)
3.  找到 *.xap 文件（通常在 E:\sitesroot 中）并获取其校验和（使用 fciv.exe）
4.  在本地修改 Silverlight 项目（可能更改标签或移动元素）以确保其哈希已更改。
5.  重新部署应用程序
6.  通过 RDP 连接并使用 fciv.exe 再次获取 *.xap 文件的校验和
7.  比较两个校验和

如果校验和不同，则意味着部署工作正常并且 Silverlight xap 已更新。如果校验和相同，则问题出在部署上。

请让我们知道结果，以便我们帮助您找到解决方案。

# sql-server-2005 - SQL Server 2005，Windows 身份验证，连接字符串给出错误“登录失败”

> ID：10047228
> 
> 赞同：0
> 
> 时间：2012-04-06T17:53:36.600
> 
> 标签：sql-server-2005, connection-string, windows-authentication

我的桌面上安装了 SQL Server 2005 和 Visual Studio 2005。每次我运行 SQL Server 2005 时，我都必须手动选择“ ***RUN AS ADMINISTRATOR ”。***我已尝试更改设置，但没有成功。所以我只这样做。但无论如何，这不是真正的问题。

现在，当我在 Visual Studio 控制台应用程序中为 Windows 身份验证创建连接字符串时，它会抛出错误“登录失败”。

我是 .NET 的新手

代码如下：

```
using System;
using System.ComponentModel;
using System.Data;
using System.Data.SqlClient;
public class Vin 
{
    public static void Main()
    {
        Console.WriteLine("Hello World!!!");
        SqlConnection con = new SqlConnection("Data Source=.; Initial Catalog=VinOne; Integrated Security=True");
        SqlCommand cmd = new SqlCommand("select * from Prod", con);
        con.Open();
        SqlDataReader dr = cmd.ExecuteReader();
        while (dr.Read())
        {
            Console.WriteLine("Got It!!!");
        }
        Console.Read();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T03:31:02.997

我开始知道这种奇怪的情况可以通过在管理模式下运行 Visual Studio 来解决（通过右键单击图标并选择“以管理员身份运行”），就像我在 SQL Server 2005 中所做的那样。

非常感谢大家的支持和指导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:04:39.760

您正在创建的 SqlConnection 对象可能不正确。语法应如下所示：

```
 SqlConnection conn = new SqlConnection(
            "Data Source=(local);Initial Catalog=VinOne;Integrated Security=SSPI"); 
```

SSPI 代表安全支持提供者接口（如果你好奇的话）

还要检查服务以什么用户身份运行，为此导航到运行。键入 Services.msc，然后导航到 SQL 服务器，查看 Log On As 的值并将其设置为您当前登录的或 Visual Studio 运行的任何用户，我猜 SQL 服务器当前需要更高的权限。

希望有效！祝你好运..

# android - 从构造函数中的非活动类开始新活动

> ID：10047234
> 
> 赞同：-1
> 
> 时间：2012-04-06T17:53:47.987
> 
> 标签：android

我知道有很多这样的问题，但我没有找到答案。

```
public class Model3D extends ARObject implements Serializable{

    public Model3D(Context context)
    {
        super("model", "", 80.0, new double[]{0,0});
        mContext = context;
    }

    public Model3D(Model model,String patternName)
    {
        super("model", patternName, 80.0, new double[]{0,0});
        Intent myIntent = new Intent(mContext, toast.class);
        mContext.startActivity(myIntent);
    }
}

public class toast extends Activity
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        Toast.makeText(getApplicationContext(), "Let's do some search action", Toast.LENGTH_SHORT).show();
    }
} 
```

每次我这样做时，我的程序都会停止工作。实际上我想在构造函数中调用意图，因为我想显示一个 toast 消息，如果我在构造函数中使用 toast 消息，它会给出错误。

请帮忙谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:10:48.563

如果您只想举杯祝酒，为什么还要额外的活动？您只能在 ui 线程上显示 toasts。因此，如果您的构造函数未在 UI 线程中调用，则您必须具有对 Activity 或 Handler 的引用。

```
public Model3D(Model model, String patternName, final Activity activity) {
    super("model", patternName, 80.0, new double[] { 0, 0 });

    activity.runOnUiThread(new Runnable() {

        @Override
        public void run() {
            Toast.makeText(getApplicationContext(), "Let's do some search action", Toast.LENGTH_SHORT).show();          }
    });
} 
```

# sql-server - SSRS 折线图。如何阻止数字在垂直轴上重复

> ID：10047238
> 
> 赞同：2
> 
> 时间：2012-04-06T17:54:01.370
> 
> 标签：sql-server, reporting-services, ssrs-2008, business-intelligence, bids

我在 ssrs 中有一个折线图。每当最高线值为 1 或 2 而不是得到我想要的 0,1,2 比例时，我得到 0,1,1,2,2。这没有意义，特别是因为数值不是小数并且未格式化。

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T10:46:17.657

垂直轴间隔的表达式应低于表达式。

如果你的价值是总和

=IIF(Max(Sum(Fields!Item.Value))<20,1,"Auto")

如果你的价值是计数

=IIF(Max(Count(Fields!Item.Value))<20,1,"Auto")

注意：我在上面使用了 20 表示 Auto 可以正常工作。根据您的要求制作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T18:49:25.340

听起来垂直轴上有格式：它实际上试图显示 0、.5、1.0、1.5 和 2，但在四舍五入后显示为 0、1、1、2、2

您应该将垂直轴间隔从“自动”更改为 1：![在此处输入图像描述](../Images/92d7ed7e2ddbc69ee52d72161e867ce6.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-02T12:42:24.763

我知道这是一个很老的帖子。还是想回复。。

当比例尺范围较小时，我在柱形图上遇到了同样的问题....

**所以我在axis properties->interval**中使用了以下表达式

 ****=IIF(Max(Fields!count_Items.Value)>=6,0,1) - [注意：这里 0 表示 - 自动间隔]**

希望这个答案对某人有所帮助。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-04T12:28:10.233

这里的问题不仅是区间，还有轴使用的范围的最大值。您可以使用这种类型的表达式 IIF(Max(Sum(Fields!Item.Value))<20,1,"Auto") 设置 Interval 的值，但轴仍然会使刻度过大。然后它倾向于用小数填充，或者如果你抑制小数，你会得到重复的整数。

使用这样的自定义代码：

```
Public Shared Function AxisRange(ByVal Number As Double) As String
Dim RangeString as String
If Number <=5 Then 
RangeString ="5" 
Else If Number <=10 Then
RangeString =  "10"
Else RangeString = "Auto" 
End If
Return RangeString
End Function 
```

在范围的最大值中，使用如下表达式：

=code.AxisRange(Max(Fields!Field.Value))

通过这样做，您可以强制范围的最大值与图表中的最大值相似。这解决了问题。**

# salesforce - 为什么不能更改 Salesforce 受管软件包中的类关系？

> ID：10047246
> 
> 赞同：4
> 
> 时间：2012-04-06T17:54:37.777
> 
> 标签：salesforce, apex-code, force.com

我在 Salesforce 托管包中编写了一个 Apex 类，它使用[apex-lang](http://code.google.com/p/apex-lang/)库包的托管版本：

```
global class MySorter implements al.Objectcomparator 
```

我正在考虑通过将 apex-lang 与我的包一起分发来消除对托管包的依赖。安装了非托管版本的 apex-lang 后，我尝试更改我的课程：

```
global class MySorter implements Objectcomparator 
```

尝试保存时，出现错误：

> 错误：编译错误：必须维护所需的类关系：MySorter 在第 1 行第 8 列实现 al.ObjectComparator[Previous Managed]

为什么会有这样的限制？关于绕过它的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T18:45:24.933

该限制是为了阻止您使用包之外的代码更改合同。可能有来自您的包外部的此代码的调用者（因为您将其标记为全局），它们依赖于它实现 al.ObjectComparator 接口，如果您进行了您想要的更改，您将在他们升级时破坏该代码.

# xcode - 在xcode中将自定义图像添加到标签栏的背景

> ID：10047253
> 
> 赞同：0
> 
> 时间：2012-04-06T17:55:05.387
> 
> 标签：xcode, background, tabbar

我的 .h 文件中有以下文本：

```
CGRect frame = CGRectMake(0, 0, 480, 49);
UIView *v = [[UIView alloc] initWithFrame:frame];
UIImage *i = [UIImage imageNamed:@"background.png"];
UIColor *c = [[UIColor alloc] initWithPatternImage:i];
v.backgroundColor = c;
[[self tabbar] addSubview:v]; 
```

但在最后一行有一个错误说：“接收器类型'viewcontroller'例如消息没有声明带有选择器'tabbar'的方法

我正在尝试将 background.png 设置为标签栏视图的背景。

我显然错过了一些东西......

# html - Mac OS 10.6 上的 Chrome、Safari 和 Firefox 中的子菜单消失

> ID：10047260
> 
> 赞同：0
> 
> 时间：2012-04-06T17:55:59.280
> 
> 标签：html, css, macos

当我将鼠标悬停在付款人应用程序菜单上并尝试单击子菜单中的一项时，子菜单会在每一页上的[http://curo.creativedynamite.co.uk处消失。](http://curo.creativedynamite.co.uk)

我正在运行 Max OS 10.7，它适用于我的 Chrome、Firefox 和 Safari，但它不适用于运行 Snow Leopard (OS 10.6) 的朋友。

我一直在试图弄清楚为什么会这样，起初我认为这是由于 Slider 和标题图像以及我使用的 CSS 定位：

```
<div id="navigation" class="clearfix">
        <div class="menu-main-menu-container"><ul><li><li id="menu-item-212" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-212"><a href="/">Home</a></li>
<li id="menu-item-25" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-25"><a href="http://curo.creativedynamite.co.uk/our-approach">Our Approach</a></li>
<li id="menu-item-592" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-592"><a href="#">Payer Apps</a>
<ul class="sub-menu">
    <li id="menu-item-105" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-105"><a href="http://curo.creativedynamite.co.uk/payer-apps/payerlogic">PayerLogic</a></li>
    <li id="menu-item-107" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-107"><a href="http://curo.creativedynamite.co.uk/payer-apps/accessaccelerator">AccessAccelerator</a></li>
    <li id="menu-item-106" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-106"><a href="http://curo.creativedynamite.co.uk/payer-apps/charisma">CharismA</a></li>
    <li id="menu-item-108" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-108"><a href="http://curo.creativedynamite.co.uk/payer-apps/r3tracker">R3Tracker</a></li>
    <li id="menu-item-104" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-104"><a href="http://curo.creativedynamite.co.uk/payer-apps/prescriberlogic">PrescriberLogic</a></li>
</ul>
</li>
<li id="menu-item-23" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-23"><a href="http://curo.creativedynamite.co.uk/about-us">About Us</a></li>
<li id="menu-item-22" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-22"><a href="http://curo.creativedynamite.co.uk/careers">Careers</a></li>
<li id="menu-item-21" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-21"><a href="http://curo.creativedynamite.co.uk/blog">Blog</a></li>
<li id="menu-item-20" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-20"><a href="http://curo.creativedynamite.co.uk/news">News</a></li>
</li></ul></div>    </div><!-- navigation -->

/* Navigation */
#navigation { min-height:30px; height:60px; margin-left:-20px; }
    #navigation ul { list-style-type:none; text-align:center; padding:20px 0 0 0;}
        #navigation ul li { list-style-image:none; padding:0.2em 1.8em; /* 0.3 1.3 with 7 menu options*/ font-size:1.3em; float:left; }
        #navigation ul li a { color:#9d9fa0; padding:6px 10px; }
            #navigation ul li a:hover { background:url("../images/bg_menu.gif") repeat-x left top #868888; color:#fff; text-decoration:none; padding:6px 10px; }
                #navigation .current_page_item a { background:url("../images/bg_menu.gif") repeat-x left top #868888; color:#fff; padding:6px 10px; }

                    #navigation .current_page_item a, .current_page_item a:hover, .current_page_item a:visited { color:#fff; }

/* Navigation - Drop down menu 
#navigation li ul.sub-menu li { position:absolute; left:-999em; height:auto; width:190px; font-weight:normal; margin:0; line-height:1; border-top:1px solid #cccccc; }*/

#navigation ul ul {
    -moz-box-shadow: 0 3px 3px rgba(0,0,0,0.2);
    -webkit-box-shadow: 0 3px 3px rgba(0,0,0,0.2);
    box-shadow: 0 3px 3px rgba(0,0,0,0.2);
    display: none;
    float: left;
    margin: 0;
    position: absolute;
    top:9em;
    left: 55.6  em;
    width: 168px;
    z-index: 99999;
    background-color:#fff;
}
#navigation ul ul li {
    padding:0 0em;
}

#navigation ul ul ul {
    left: 100%;
    top: 0;
}
#navigation ul ul li a {
    color:#9d9fa0;
    font-size:14px; 
    font-weight: bold;
    height: auto;
    line-height: 0em;
    padding: 10px 10px;
    width: 175px;
}
#navigation ul ul :hover > a {
    background:url("../images/bg_menu.gif") repeat-x left top #868888; color:#fff;
}
#navigation ul li:hover > ul {
    display: block;
}
#navigation .current-menu-item > a,
#navigation .current-menu-ancestor > a,
#navigation .current_page_item > a,
#navigation .current_page_ancestor > a {
    font-weight: bold;
} 
```

请问有人对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T20:22:13.960

`top:9em;`从此删除...

```
#navigation ul ul {
    -moz-box-shadow: 0 3px 3px rgba(0,0,0,0.2);
    -webkit-box-shadow: 0 3px 3px rgba(0,0,0,0.2);
    box-shadow: 0 3px 3px rgba(0,0,0,0.2);
    display: none;
    float: left;
    margin: 0;
    position: absolute;
    top:9em; 
    left: 55.6  em;
    width: 168px;
    z-index: 99999;
    background-color:#fff;
} 
```

这会将子菜单放回它可以触摸菜单按钮底部边缘的位置，从而允许鼠标进入其中。是菜单按钮和子菜单抽屉之间的间隙导致了您的问题，因为鼠标无法在不失去`:hover`项目焦点的情况下越过间隙。

# ruby-on-rails - 无法通过 mac 本地地址在 Windows7 上查看 Rails 应用程序

> ID：10047261
> 
> 赞同：0
> 
> 时间：2012-04-06T17:56:03.443
> 
> 标签：ruby-on-rails, macos, networking, windows-7

我的应用程序在我的 Mac 上的 localhost:3000 上运行 我的 Mac 有自己的本地地址 eee.local

办公室中的其他计算机，包括其他 windows 机器，可以连接到 eee.local:3000 并使用 rails 应用程序。

但是我们曾经遇到过一个人的windows7机器无法连接的情况。我带来了一台全新的 windows7 机器用于 IE 测试，它也无法连接。

我尝试打开防火墙，但不起作用。我尝试使用 ip 代替，例如。192.160.0.3:3000 但这不起作用。

我不确定如何检查或搜索此问题 我忽略了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T02:37:19.150

另一件要尝试的事情是安装 iTunes。一开始听起来很傻，但是安装 iTunes 可以让你的 Windows 机器 Bonjour 服务发现（在 Mac 和 Ubuntu 桌面上默认启用），它可以让你解析 .local 地址。

通过 IP 访问确实应该有效，但如果您已经关闭了防火墙并且机器位于同一网络上，那么启用 Bonjour（通过安装 iTunes）值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T02:24:02.193

另一台 Windows 机器是否在不同的子网上？这可能会导致问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T02:27:51.287

您需要告诉 Web 服务器侦听所有接口，如下所示：

```
./script/server 0.0.0.0:3000 
```

# windows-8 - SMStextmesage 后台服务异步

> ID：10047264
> 
> 赞同：0
> 
> 时间：2012-04-06T17:56:14.920
> 
> 标签：windows-8, microsoft-metro, windows-runtime

以下代码适用于 CLICK 事件处理程序，但我不能让它自动发送

```
 async void Button_Click_1(object sender, RoutedEventArgs e)
    {
        SmsDevice smsDevice2 = (SmsDevice)await SmsDevice.GetDefaultAsync();

        // Create a text message - Set destination number and message text
        SmsTextMessage msg = new SmsTextMessage();
        msg.To = "12345678";
        msg.Body = "xxxx";

        // Send the message asynchronously
        await smsDevice2.SendMessageAsync(msg);

    } 
```

这不起作用（后台服务）

```
 async void DisplayToastAsync(IBackgroundTaskInstance taskInstance, ManualResetEvent manualEventWaiter)
    {
        SmsDevice smsDevice2 = (SmsDevice)await SmsDevice.GetDefaultAsync();
        // Create a text message - Set destination number and message text
        SmsTextMessage msg = new SmsTextMessage();
        msg.To = "12345678";
        msg.Body = "xxx";

        // Send the message asynchronously
        await smsDevice2.SendMessageAsync(msg); 
```

}

有谁知道为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:07:45.247

我正在试验，我发现您确实需要填写“发件人”字段（的副本`SmsDevice.AccountPhoneNumber`）。

话虽如此，我仍然得到所谓的“通用错误”，但至少它不是“参数错误”。

如果您有兴趣，我的一般错误是 0x80548212。

另外——我猜你已经这样做了（或者我认为你会得到一个空的短信设备）——但你需要让应用程序能够在清单中发送短信。

更多信息 - 通用错误是我的 SIM 卡仅启用了数据。换成包含 SMS 的 SIM 卡后，代码运行良好。

# python - appengine 中的数据库同步

> ID：10047265
> 
> 赞同：1
> 
> 时间：2012-04-06T17:56:19.960
> 
> 标签：python, database, google-app-engine

我正在使用 webapp2，python 2.7。以下是我的模型定义：

```
class Match(db.Model):
    date_time = db.DateTimeProperty()
    team1 = db.StringProperty()
    team2 = db.StringProperty()
    venue = db.StringProperty()
    result = db.IntegerProperty() 
```

现在我编写了一个自定义文件，以读取数据/csv 文件并通过对捕获它们的视图发出发布请求来更新模型。我更新了本地数据库，可以在以下位置看到更新的值：

```
http://localhost:8080/_ah/admin/datastore 
```

AFAIK 填充服务器上的数据，我需要使用更改 url 运行相同的脚本来填充服务器上的数据。

有什么办法让两个数据库保持同步？将当前数据存储从本地推送到服务器，反之亦然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T19:43:43.283

查看此文档：[上传和下载数据](https://developers.google.com/appengine/docs/python/tools/uploadingdata)

此页面将告诉您有关上传和下载数据的所有信息。要记住的关键一件事是，High Replication Datastore 不像 Master/Slave 那样一致，因此如果您尝试下载所有数据，您可能无法获得最新记录（这在链接页面中有说明）。还有一些在服务器上可用，在 SDK 上不可用的功能，例如下载所有实体选项。

# php - 在 where 子句中计算带有变量的行

> ID：10047266
> 
> 赞同：1
> 
> 时间：2012-04-06T17:56:21.730
> 
> 标签：php, sql

我在我的 SQL WHERE 子句中使用变量时遇到问题。我收到此错误：

> 警告：mysql_fetch_array()：提供的参数不是有效的 MySQL 结果资源

代码是：

```
$sql3= mysql_query("SELECT COUNT($ww) FROM data WHERE $".$ww." =  ".$weeknumber." "); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T19:05:46.390

为什么不通过将列名放在 COUNT(column_name) 中来计算表列？

像这样：

```
$sql3= mysql_query("SELECT COUNT(week_num) as wknum FROM data WHERE '$ww' =  '$weeknumber'"); 
$counted_weeks["week_num"]

// $counted_weeks["week_num"] will output your sum
//week_num would be a column name from your "data" table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:00:25.543

我猜`$ww`是指一个列名。`$weekNumber`显然是价值。在这种情况下，您的 SQL 查询应如下所示：

```
$sql3= mysql_query("SELECT COUNT(".$ww.") FROM data WHERE ".$ww." = ".$weeknumber." "); 
```

我不是 PHP 人，但我假设你有正确的 PHP 语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T18:04:30.247

我建议查看此[链接](http://php.net/manual/en/function.mysql-query.php)。正如@Crontab 提到的，我不确定为什么你的 where 子句前面有一个美元符号。

需要指出的其他几件事：正如链接中所说，您需要确保查询文本已正确转义。另外，如果我没记错（不熟悉 PHP），您是否需要明确连接文本而不是仅使用引号？（即，而不是“SELECT ...” ...“你需要做“SELECT ...”+“...”）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T18:11:54.190

php 字符串格式化在这里是完美的，把你混乱的 concat 字符串，让它干净易读！

```
$sql3= mysql_query(sprintf("SELECT COUNT(%s) FROM data WHERE %s=%d", $ww, $ww, $weeknumber)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T18:12:58.807

假设这`$ww`是一个有效的列名并且`$weekNumber`是一个整数，这应该有效：

```
$query = "SELECT COUNT(*) AS cnt FROM data WHERE $ww = '$weekNumber'";
$rs = mysql_query($query);
$r = mysql_fetch_assoc($rs);
echo "Count: {$r['cnt']}"; 
```

# android - Android - SQLite 创建表错误

> ID：10047267
> 
> 赞同：0
> 
> 时间：2012-04-06T17:56:29.800
> 
> 标签：android, sqlite

准备“创建表选项...创建表分数...我将在我的程序中发布所有其他代码，以便我可以在遇到更多问题时询问（接近“创建”：语法错误）） .

这是我的表（在 DBHelper.java 中）：

`final static String sqlcreate=`

```
 "create table option (id integer primary key autoincrement," + 
        "volume boolean not null, vibrate boolean not null, theme text not null) " +    

        "create table score (id integer primary key autoincrement," +
        "score text not null, difficulty text not null, date date not null, );"; 
```

这是我的 DBFunction.java：

`public int addScore(String score, String difficulty){`

`ContentValues values = new ContentValues();`

```
 SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd"); 
    Date scoredate = new Date();    
    values.put("score", score);
    values.put("difficulty", difficulty);
    values.put("date", dateFormat.format(scoredate));   
    return (int) db.insert(tableScore, null, values);
}` 
```

这是我的 OnClick()：

`if (v==btnadd){`

```
 String vol = tbtnvol.getText().toString();
        String vib = tbtnvib.getText().toString();
        String theme = themename.getText().toString();
        options.open();
        options.addOption(vol, vib, theme);
        options.close();
        Toast.makeText(this, "Data has been added", Toast.LENGTH_LONG).show();
    }` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T17:59:57.640

修正您的查询如下：

```
"create table option (id integer primary key autoincrement," + 
"volume boolean not null, vibrate boolean not null, theme text not null); " +

"create table score (id integer primary key autoincrement," +
"score text not null, difficulty text not null, date date not null);"; 
```

您错过了分号并在查询中留下了一个额外的逗号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T17:58:24.927

您需要用分号分隔其中的两个 SQL 语句。

```
... theme text not null); " +   <-- semi colon added here
"create table score ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T18:00:46.930

您的第一个查询没有错误

```
create table option (id integer primary key autoincrement,volume boolean not null, vibrate boolean not null, theme text not null) 
```

第二次查询

```
create table score (id integer primary key autoincrement," + 
```

“分数文本不为空，难度文本不为空，日期日期不为空）

我已经检查过它现在工作正常

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T18:01:02.243

从末尾删除

```
"create table score (id integer primary key autoincrement," +
    "score text not null, difficulty text not null, date date not null, );"; 
```

写如下

```
"create table score (id integer primary key autoincrement," +
    "score text not null, difficulty text not null, date date not null);"; 
```

是的，还有放；最后正如格雷厄姆所说

# java - 公司代理背后的 Apache 浪潮；或码头不尊重代理属性

> ID：10047272
> 
> 赞同：1
> 
> 时间：2012-04-06T17:56:46.400
> 
> 标签：java, jetty, google-wave

我们遇到的高级问题是这样的。我们已经在公司网络上安装并运行了 Apache Wave。只要我们加载网站、注册、登录、创建和参与 wave，它就可以工作。但我似乎无法加载外部小工具，例如[http://everybodywave.appspot.com/gadget/image/gadget.xml 。](http://everybodywave.appspot.com/gadget/image/gadget.xml)我确定这是一个代理问题，因为我已经在公司网络之外安装了 wave，而且我能够很好地加载小工具。

我感到困惑的地方是；我已经在几个地方设置了 Apache Wave 的 JVM 代理设置，但是它们加载小工具不起作用。我已经在 jvm 命令行、环境变量 JAVA_OPTIONS、JAVA_OPTS、JETTY_OPTIONS 和 JETTY_OPTS 中以及在调用加载小工具之前通过 System.setProperty 设置了 http.proxyHost 和 http.proxyPort。我添加了一些代码来在 Apache Wave 的 jvm 中吐出一个外部站点，并且可以正常工作，因此代理设置可以正常工作。但小工具仍然没有。

这是我能说的最接近问题的一点： [https://svn.apache.org/repos/asf/incubator/wave/trunk/src/org/waveprotocol/box/server/ServerMain.java](https://svn.apache.org/repos/asf/incubator/wave/trunk/src/org/waveprotocol/box/server/ServerMain.java) 我得到调用下方某处的调试消息：（第 121 行；在 GadgetProxyServlet 中）

```
public void service(ServletRequest req, ServletResponse res) throws ServletException, IOException {
    proxyServlet.service(req, res); 
```

调试是：

```
[java] 2012-04-06 10:47:25.197:WARN:oejsKwbs.ServerMain$GadgetProxyServlet, annotation=[none]]:java.net.ConnectException: Connection timed out 
```

所以也许我的问题是.. 为什么 Jetty ProxyServlet.Transparent 不尊重 jvm 的 http 代理设置？我是否也需要设置一些 Jetty 属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T19:38:01.030

看起来码头在幕后`ProxyServlet`使用了码头异步 http 客户端，该客户端具有`setProxy(Address)`用于设置代理的功能。 `ProxyServlet`还包含一个扩展点来执行所附 的自定义配置`HttpClient`，但这并没有被 Wave 平台公开。我会说你有两个选择：

*   提供自定义版本的码头`ProxyServlet`，它从系统属性或其他东西中获取代理地址并将其设置在包装好的`HttpClient`. 这很简单，将是我的选择。
*   同时，您可以向 wave 团队提交增强请求以公开此设置。

# inno-setup - Inno-setup install 不允许一个 exe 在另一个 exe 已经运行时运行。我该如何改变这种行为？

> ID：10047275
> 
> 赞同：2
> 
> 时间：2012-04-06T17:57:12.207
> 
> 标签：inno-setup

我们正在通过 inno setup 安装程序。我们有一个主 exe 文件，它运行我们的实际程序，但我们安装了一些始终在后台运行的其他 exe。

当 main.exe 第一次运行时，它会启动另一个 exe。其他exe一直运行是可以的，其实是必须的。但是，如果 main.exe 通过任务管理器或其他东西停止，则 other.exe 继续运行。当 other.exe 正在运行时，用户无法运行 main.exe。我们怎样才能改变这种行为？

**编辑**

似乎与 innosetup 无关，所以我将不得不走答案中建议的路线。

**再次编辑** 问题最终是windows看到main.exe启动了other.exe并认为它是一个子进程。找到一种在 main.exe 之外启动 other.exe 的方法最终是解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:12:41.533

~~如果我理解正确，您有两个（或更多）程序（EXE）。如果首先启动 MAIN.EXE，它会启动 OTHER.EXE，这是正确的。如果 OTHER.EXE 首先启动或正在运行并且 MAIN.EXE 停止，则 MAIN.EXE 将不会重新启动，直到 OTHER.EXE 停止。那是对的吗？如果是这样，您需要同时更改 MAIN.EXE 和 OTHER.EXE。在 MAIN.EXE 中，您需要检查 OTHER.EXE 并停止它或告诉用户在启动 MAIN.EXE 之前停止 OTHER.EXE。在启动时的 OTHER.EXE 中，您需要检查 MAIN.EXE。如果它没有运行，请启动它或告诉用户在启动 OTHER.EXE 之前启动它。~~

阅读其他评论后，我认为我的原始答案不正确。两个程序（APPLICATION.EXE 和 SERVICE.EXE）本身并不共享互斥锁，也不会自动阻止同时运行。你需要看看为什么 SERVICE.EXE 运行时 APPLICATION.EXE 不运行，返回什么错误。这可能有助于确定您需要做什么。您可能仍需要更改 SERVICE.EXE 和 APPLICATION.EXE。

# html - HTML5 本地存储排序顺序

> ID：10047276
> 
> 赞同：0
> 
> 时间：2012-04-06T17:57:15.210
> 
> 标签：html

我正在使用以 G 开头的键将数据插入本地存储：

我喜欢做的是在检索和显示时按特定顺序对它们进行排序。我尝试了 1G、2G、3G 等，但似乎没有按此顺序出现。

难道我做错了什么？

```
 getItem(.....) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T23:25:35.057

localstorage 中的项目按您添加它们的顺序排列。如果要对它们进行排序，则必须获取所有项目，然后自己对其进行排序。

如果您想要排序，那么如果您需要支持较旧的 WebKit/iOS，则应该查看[IndexedDB](http://www.w3.org/TR/IndexedDB/)或较旧的[Web SQL 。](http://www.w3.org/TR/webdatabase/)

# php - Php Apache2 Insert Large Binary MSSQL error: Changed database context to 'database'

> ID：10047280
> 
> 赞同：3
> 
> 时间：2012-04-06T17:57:53.640
> 
> 标签：php, sql-server, insert, binary, apache2

我一直在网上倾诉，似乎无法找到解决我问题的方法。

我有一个用于上传矢量图形（ai、eps、pdf、svg）的简单表格，它使用 imagemagik 将它们转换为 jpg，并将这两个文件存储在 MSSql 2000 中的“图像”字段中。

我们收到错误“MSSQL 错误：已将任何上传超过 16 兆的内容的数据库上下文更改为“数据库外”。

我知道它不是存储这些文件的首选方式......但在我们开始接收大文件之前，它对我们来说一直完美无缺。它对于我们如何处理版本和安全性也很方便。

我正在跟踪 apache 和 php 日志文件，并且在发生这种情况时找不到记录的单个错误！？

webserver 和 mssql 服务器是具有大量 ram 的强大机器，并且位于同一个千兆交换机上，所以我不担心性能。我只需要它工作。

同样，这对于 16megs 以下的任何东西都完美无缺，我在任何地方都找不到参考。

```
**Our Web Server Specs**
2.6.38-11-server #50-Ubuntu
PHP Version 5.3.5-1ubuntu7.7
Apache Version  Apache/2.2.17 (Ubuntu)
Apache API Version  20051115
Max Requests    Per Child: 0 - Keep Alive: on - Max Per Connection: 100
Timeouts    Connection: 300 - Keep-Alive: 15

**Php mssql settings**
MSSQL Support   enabled
Active Persistent Links 0
Active Links    0
Library version FreeTDS
Directive   Local Value
mssql.allow_persistent  On
mssql.batchsize 0
mssql.charset   no value
mssql.compatability_mode    Off
mssql.connect_timeout   90
mssql.datetimeconvert   On
mssql.max_links Unlimited
mssql.max_persistent    Unlimited
mssql.max_procs Unlimited
mssql.min_error_severity    11
mssql.min_message_severity  11
mssql.secure_connection Off
mssql.textlimit 2147483647
mssql.textsize  2147483647
mssql.timeout   180

**Other relevant php.ini settings**
max_execution_time = 300
max_input_time = 300
memory_limit = 512M
post_max_size = 300M
upload_file_size = 300M
default_socket_timeout = 60
odbc.defaultlrl = 2147483647
odbc.defaultbinmode = 1 
```

相关代码片段：

```
 $f1 = ("" .$outloc . $clean1 . "");
        $f1string  =  file_get_contents($f1); 
        $f1data  =  unpack("H*hex", $f1string);
        $cf1 = ("" .$outloc . $confilename1 . $outext . "");
        $cf1string  =  file_get_contents($cf1); 
        $cf1data  =  unpack("H*hex", $cf1string);
        $cf1name = ("" .$confilename1 . $outext. "");

        //Upload to database
        $query_result  =  mssql_query("INSERT INTO art_converted_table (image_blob,filename,comment,received_dt,image_name,contact_email,po_number,upload_blob,upload_mime,upload_filename) VALUES (0x".$cf1data['hex'].",'$cf1name','$ccomment','$received_dt','$clean1','$email','$cponum',0x".$f1data['hex'].",'$file1type','$clean1')", $db_conn)
        or die('MSSQL error: ' . mssql_get_last_message()); 
```

我尝试在解包过程之后手动添加 sleep() 计时器，以防这可能是问题。我只是对为什么会发生这种情况感到困惑。

可以插入到 mssql 的十六进制字符串是否有最大长度？

任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:14:34.783

我遇到了与大文件和 PHP 类似的问题，并通过使用此处所述的 PHP FTP 扩展解决了这个问题

“http://au.php.net/manual/en/book.ftp.php”

然后我使用 mysql.exe 和 shell_exec() 运行我的查询，您也可以从您的 Web 应用程序运行查询。

如果您决定继续使用表单，请检查 php.ini 中 post_max_size 变量的大小，表单发布可能是瓶颈。

# java - 使用泛型类型 AsyncTask 扩展类

> ID：10047281
> 
> 赞同：1
> 
> 时间：2012-04-06T17:57:59.610
> 
> 标签：java

类签名：`AsyncTask<Params, Progress, Result>`

我有多个类的实例，这些实例扩展`AsyncTask`了每个类`onPreExecute()`，并且`onPostExecute(Result)`我执行相同的功能。我想写一些类似的东西`BaseAsyncTask <Params, Progress, Result>`，它已经包含了`onPreExecute()`and中的函数`onPostExecute(Result)`。

这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T17:34:06.853

如果您希望 MyBaseAsynTask 使用泛型，则必须像这样定义它：

```
class MyBaseAsyncTask<Params, Progress, Result> extends AsyncTask<Params, Progress, Result> 
```

然后您只能在 MyBaseAsyncTask 的任何方法实现中使用这些泛型类型

# javascript - 隐藏表格的第二行和第三行

> ID：10047282
> 
> 赞同：3
> 
> 时间：2012-04-06T17:58:00.380
> 
> 标签：javascript, jquery, html-table, row, hide

```
<div class="NewsResultsList">   
 <table>
        <tr>
            <td>
                Results:<br/>
                First<br/>
                Second          
            </td>
        </tr>
        <tr>
            <td>        
            </td>
        </tr>
        <tr>
            <td>No Results</td>
        </tr>
    </table>
</div> 
```

我需要隐藏第二行和第三行。

```
$('div.NewsResultsList table tr:eq(1)').hide(); 
$('div.NewsResultsList table tr:eq(2)').hide(); 
```

那没做？怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T18:16:09.450

以下是几种方法：

## *[jsBin 演示](http://jsbin.com/ipuyat/3/edit)*

```
$('.NewsResultList tr:gt(0)').hide();

$('.NewsResultList tr').slice(-2).hide();

$('.NewsResultList tr').not(':eq(0)').hide();

$('.NewsResultList tr td:contains("No")').parent('tr').hide();

$('.NewsResultList tr').not(':first').hide();

$('.NewsResultList tr').eq(-1).hide().end().eq(-2).hide();

$('.NewsResultList tr:last').prev().andSelf().hide(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T18:26:14.340

使用此脚本：

```
 <script type="text/javascript">

        $(document).ready(function (e) {

            $('.NewsResultsList tr:eq(1)').hide();
            $('.NewsResultsList tr:eq(2)').hide();

        });

    </script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T18:02:27.693

您在 jQuery 调用中拼写`NewsResultList`错误。("NewsResultsList")... ;)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-06T18:08:05.553

您有错误的选择器来访问该表行：

它实际上应该是

```
$('div table tr:eq(1)').hide();
$('div table tr:eq(2)').hide(); 
```

[演示](http://jsfiddle.net/bZPwE/9/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-06T18:03:41.713

两个问题：

你有`NewsResultsList`你的选择器，但类是`NewsResultList`. 两者不相配。

而且，您`</td>`在表格中缺少 a 。

解决这两个问题，它可以在这里工作：http: [//jsfiddle.net/jfriend00/pfemk/](http://jsfiddle.net/jfriend00/pfemk/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-06T18:03:49.687

在你的 html/PHP 中试试这个：

```
 <table>
        <tr>
            <td>
                Results:<br/>
                First<br/>
                Second          
            </td>
        </tr>
        <tr class="hideMe">
            <td> </td>       
            <td></td>
        </tr>
        <tr class="hideMe">
            <td>No Results</td>
        </tr>
    </table>
</div> 
```

这在你的 jQuery/javascript 中：

```
$('#something').click( function() {
    $('.hideMe').hide();
}); 
```

# grails - Grails - 条件查询中的“in”节点 - groovy.lang.IntRange 无法转换为 java.lang.Integer

> ID：10047300
> 
> 赞同：1
> 
> 时间：2012-04-06T17:59:40.923
> 
> 标签：grails, casting, range, criteria

我的域类中有一个`Integer rankOnHighlights`属性。`Project`我想查询`rankOnHighlights`属性在 1 到 45 之间的所有项目。

为此，我发出以下条件查询：

```
Project.withCriteria {
        'in' "rankOnHighlights",[1..45]
        maxResults 45
        order "rankOnHighlights", "desc"
    } 
```

但是，我收到以下错误消息：

```
groovy.lang.IntRange cannot be cast to java.lang.Integer 
```

我尝试了各种不同的写作，但无济于事。任何建议都是最受欢迎的。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T19:26:03.353

我不确定为什么这不起作用，但它应该是因为它类似于文档中的示例 - [http://grails.org/doc/latest/ref/Domain%20Classes/createCriteria.html](http://grails.org/doc/latest/ref/Domain%20Classes/createCriteria.html) - 你应该创建[http://jira.grails.org/browse/GRAILS](http://jira.grails.org/browse/GRAILS)上的一个问题

但是，这确实有效：

```
between "rankOnHighlights", 1, 45 
```

**编辑**：我知道发生了什么，应该是

```
'in' "rankOnHighlights", (1..45) 
```

但我仍然会使用`between`，因为会`in`生成错误的 SQL（如果范围足够宽，对于数据库查询解析器来说可能太大）：

```
...
where
    this_.rank_on_highlights in (
        ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?
    )
... 
```

# node.js - Mocha with Node：仅显示失败测试的日志记录

> ID：10047303
> 
> 赞同：13
> 
> 时间：2012-04-06T17:59:47.173
> 
> 标签：node.js, mocha.js, winston

我正在使用带有 mocha 和 winston 的节点。有没有办法设置它只显示失败测试的日志？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-17T12:55:56.403

如果您使用 min 报告器运行，您将只能在失败的测试中获得完整输出：`mocha -R min`或者，如果您更喜欢详细选项，`mocha --reporter min`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-30T16:01:55.937

在撰写本文时（2022 年），现在有一个 npm 包可以做到这一点：

[https://www.npmjs.com/package/mocha-suppress-logs](https://www.npmjs.com/package/mocha-suppress-logs)

我喜欢它，因为我喜欢默认 mocha 报告器的输出。它保留了所有这些，但为后续测试隐藏了控制台输出。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-03-16T20:37:28.760

可以使用

```
if (!expect(next.called).to.be.true) {
        console.log("... further information")
} 
```

# java-me - 如何在 J2ME 中签署消息

> ID：10047306
> 
> 赞同：1
> 
> 时间：2012-04-06T18:00:02.387
> 
> 标签：java-me, bouncycastle, signing

我正在从 J2ME 应用程序发送一些文本。

我想使用 j2me 应用程序可用的私钥对其进行数字签名。

对方有相应的公钥来解密相同的消息。

如何在 J2ME 中进行此签名并在 C# 中进行解密？

我曾尝试使用[Bouncy Castle](https://stackoverflow.com/tags/bouncycastle/info "'bouncycastle' 标签维基")，但如果我不使用混淆，它会给我的内存不足，如果我确实使用混淆，那么它会给我一个`ClassFormatException`.

# android - 'Draw Something' 是用什么构建的？

> ID：10047310
> 
> 赞同：0
> 
> 时间：2012-04-06T18:00:12.693
> 
> 标签：android, iphone

我用谷歌搜索了这个，我发现的信息很少。任何人都知道用于创建“Draw Something”的框架（Flash？）

是原生的吗？

**对于不赞成和投票关闭的人**

我知道这不是一个编程问题。但是，我认为这可以归类为软件开发问题。

我问这个是因为我对应用程序的性能和流程印象深刻。我几乎觉得这个应用程序是使用 Flash 构建的，因为原始应用程序是一个使用 Flash 构建的 facebook 应用程序。但是，我不能确定，而且我对 Flash 在移动设备上的性能有些怀疑。

如果我的问题不够清楚。我想知道这个应用程序是原生构建的还是使用某种已经可用的框架。相信大家都知道有用于移动开发的开源游戏开发框架（cocos2d、libgdx 等）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T18:18:06.497

这是一个商业游戏，不是开源的，所以预计你不会找到任何关于它的信息。

这是我的猜测...

它没有任何原生 UI 组件，而且 iOS 版本和 Android 版本几乎相同，所以我不认为它是从各自的 SDK 创建的。我认为这都是在opengl es层中完成的，这是非常低级的，Android和iOS都支持。OpenGL 是用 C 编写的，您可以使用 C 与其库进行交互，C 是 iOS 和 Android 都支持的语言（通过 NDK）。

您可以使用 Marmalade SDK 之类的工具轻松完成此操作，这是一个使用 C++ 的跨平台游戏引擎。

# python-2.7 - App Engine 本地数据存储区内容不持久

> ID：10047315
> 
> 赞同：9
> 
> 时间：2012-04-06T18:00:35.730
> 
> 标签：python-2.7, google-app-engine, persistence, google-cloud-datastore

我正在运行一些基本的测试代码，包括 web.py 和 GAE（Windows 7、Python27）。该表单允许将消息发布到数据存储区。当我停止应用程序并再次运行它时，之前发布的任何数据都消失了。使用管理员（http://localhost:8080/_ah/admin/datastore）手动添加实体也有同样的问题。

我尝试使用额外标志在应用程序设置中设置路径：

```
--datastore_path=D:/path/to/app/ 
```

（不确定那里的语法）。它没有效果。我在我的计算机上搜索 *.datastore，也找不到任何文件，这似乎很可疑，尽管在应用程序运行期间数据显然存储在某个地方。

```
from google.appengine.ext import db
import web

urls = (
    '/', 'index',
    '/note', 'note',
    '/crash', 'crash'
)

render = web.template.render('templates/')

class Note(db.Model):
    content = db.StringProperty(multiline=True)
    date = db.DateTimeProperty(auto_now_add=True)

class index:
    def GET(self):
            notes = db.GqlQuery("SELECT * FROM Note ORDER BY date DESC LIMIT 10")
            return render.index(notes)

class note:
    def POST(self):
            i = web.input('content')
            note = Note()
            note.content = i.content
            note.put()
            return web.seeother('/')

class crash:
    def GET(self):
            import logging
            logging.error('test')
            crash

app = web.application(urls, globals())

def main():
    app.cgirun()

if __name__ == '__main__':
  main() 
```

更新：当我通过命令行运行它时，我得到以下信息：

```
WARNING  2012-04-06 19:07:31,266 rdbms_mysqldb.py:74] The rdbms API is not available because the MySQLdb library could not be loaded.
INFO     2012-04-06 19:07:31,778 appengine_rpc.py:160] Server: appengine.google.com
WARNING  2012-04-06 19:07:31,783 datastore_file_stub.py:513] Could not read datastore data from c:\users\amy\appdata\local\temp\dev_appserver.datastore
WARNING  2012-04-06 19:07:31,851 dev_appserver.py:3394] Could not initialize images API; you are likely missing the Python "PIL" module. ImportError: No module named _imaging
INFO     2012-04-06 19:07:32,052 dev_appserver_multiprocess.py:647] Running application dev~palimpsest01 on port 8080: http://localhost:8080
INFO     2012-04-06 19:07:32,052 dev_appserver_multiprocess.py:649] Admin console is available at: http://localhost:8080/_ah/admin 
```

建议数据存储...没有正确安装？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T05:41:43.477

从 1.6.4 开始，我们在每次写入后停止保存数据存储。在模拟高复制数据存储中的事务模型时，此方法不起作用（您将丢失最后几次写入）。它也非常低效。我们对其进行了更改，以便数据存储开发存根刷新所有写入并在关闭时保存其状态。听起来 dev_appserver 没有正确关闭。你应该看到：

> 应用所有待处理事务并保存数据存储

在关闭服务器时的日志中（参见[源代码](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/tools/dev_appserver.py#3426)和[源代码](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/tools/api_server.py#410)）。如果不这样做，则意味着 dev_appserver 没有被完全关闭（使用 TERM 信号或 KeyInterrupt）。

# c++ - 包括带有 Clang / LLVM 的 C++ 11 标头

> ID：10047320
> 
> 赞同：8
> 
> 时间：2012-04-06T18:00:48.000
> 
> 标签：c++, build, c++11, llvm, clang

我已经从源代码安装了 clang 和 llvm，并且正在尝试使用新标准的功能编译一些 C++ 代码。

我发现虽然例如使用 for 范围`for (i : vector)`（例如）工作正常，但当我需要导入标头（例如`<unordered_set>`或`<tuple>`.

我是否需要使用新的 libc++ 来使用这些头文件，还是只需要进行简单的构建更改？目前，我刚刚将 clang 和 llvm 构建到我的主目录中的一个文件夹中，并从那里调用 clang++。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-06T18:05:35.500

请参阅[http://clang.llvm.org/get_started.html](http://clang.llvm.org/get_started.html)。

> 如果您打算使用 Clang C++ 支持，您可能需要告诉它如何找到您的 C++ 标准库头文件。如果 Clang 找不到您的系统 libstdc++ 头文件，请按照以下说明操作：
> 
> *   *gcc -v -x c++ /dev/null -fsyntax-only*来获取路径。
>     
>     
> *   在*clang/lib/Frontend/InitHeaderSearch.cpp*中查找注释*“FIXME:temporary hack:hard-coded paths”*并更改下面的行以包含该路径。

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T18:06:01.067

虽然标准库随编译器的分发一起提供，但当您自己构建它时，您仍然需要构建标准库本身。它的一些组件可能只是标题，但并非所有组件都是。

因此，如果不构建它，您至少需要下载该库。Clang 可以使用 GCC 的 libstdc++，但他们也有他们的 libc++ 项目。*

# qt - Qt：在多个布局中使用一个小部件

> ID：10047321
> 
> 赞同：4
> 
> 时间：2012-04-06T18:00:50.923
> 
> 标签：qt, widget

我有一个 QTabBar，所有选项卡都应该有相同的小部件：

```
layout1->addWidget(w);
layout2->addWidget(w); 
```

然而，第二次调用`addWidget`会导致这个小部件在第一个布局中消失。

有什么方法可以使用一个小部件将其插入多个选项卡中？

当然，我总是可以为每个选项卡创建一个新的小部件实例，但这需要额外的时间和内存。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T19:02:34.753

> 有什么方法可以使用一个小部件将其插入多个选项卡中？

不，如果您希望小部件被看到两次，那么您需要它的两个实例。

> 当然，我总是可以为每个选项卡创建一个新的小部件实例，但这需要额外的时间和内存。

简单的小部件在创建内存/时间方面相对便宜。除非您的 GUI 变得无响应并且您的分析器说这是一个问题，否则您可能正在尝试过早的优化。

根据您尝试实现的特定目标，有一些模式，例如使用共享单个模型的多个视图，这些模式可能会被使用。

# php - WordPress foreach 错误

> ID：10047322
> 
> 赞同：0
> 
> 时间：2012-04-06T18:00:53.077
> 
> 标签：php, database, wordpress

我试图基本上从 wordpress 访问数据库中的一行，并为每一行执行一个功能。

这是php：

```
<?php
require('../../wp-blog-header.php');
global $wpdb;

$feed = $wpdb->get_row("SELECT * FROM wp_aggreg_emails");   
    foreach($feed as $row) {
        echo $row['email'];
    }

?> 
```

我怎么一直收到这个错误：

```
Parse error: syntax error, unexpected T_STRING in 
                   /home/wp-content/email/index.php on line 6 
```

一个伙伴试图重新创建它，但他不能：/

请问有人可以对这种情况有所了解吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T21:43:29.503

尝试改变

```
$feed = $wpdb->get_row("SELECT * FROM wp_aggreg_emails"); 
```

至

```
$feed = $wpdb->get_results("SELECT * FROM wp_aggreg_emails"); 
```

使用 get_row 期望返回 1 行，但您正尝试从该表中选择所有内容，因此使用 get_results 将填充您的 for 循环所需的数组

然后在你的 foreach

```
foreach($feed as $row){
   echo $row->email;
} 
```

# ruby-on-rails - 如何从 Web 应用程序获取桌面通知？

> ID：10047338
> 
> 赞同：6
> 
> 时间：2012-04-06T18:02:12.510
> 
> 标签：ruby-on-rails, windows, notifications, desktop-application

我需要为客户端创建一个 Web 应用程序，其中一个要求是每当触发事件时，Windows XP/7 中应该有一些桌面通知告诉他们该事件。类似于将新文件添加到 Dropbox 中的文件夹时弹出的气球。

我正在将 Rails 用于 Web 应用程序，但从未做过任何桌面开发。我应该看什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T19:55:18.650

这会不会：[来自 Web 服务器的咆哮通知](https://stackoverflow.com/questions/1109786/growl-notifications-from-a-web-server)

加上 Growl for windows 满足您的需求？[http://www.growlforwindows.com/gfw/developers.aspx](http://www.growlforwindows.com/gfw/developers.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T19:44:07.233

[Noti](http://notiapp.com)可能值得一看。

此工具允许 Web 应用程序将通知推送到在和上运行`OS X`的小应用程序。`Windows``Linux`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-06T18:03:43.613

支持 RSS 的应用程序，再加上桌面上的 RSS 小部件就足够了吗？这有一些缺点 - 例如，它需要在工作站上进行设置并且不是立即的。但它是非专有的。

如果这是一个 Windows 环境，也许应用程序可以使用 Windows 命令[msg.exe](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ts_cmd_msg.mspx?mfr=true)来弹出一个警告框（假设在工作站上启用了 Windows messenger 服务）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-04-20T13:21:35.910

您可以将[Telegram](https://desktop.telegram.org/)（包括桌面便携版）与[TeleNotify](https://github.com/ppati000/tele_notify) gem 一起使用。缺点是，您的应用程序必须具有 HTTPS。但是使用[CloudFlare](https://www.cloudflare.com/)，您可以让您的应用程序免费使用 SSL，甚至无需更改您的源代码。

# jquery - jquery toggleClass() - 访问选定的元素

> ID：10047339
> 
> 赞同：2
> 
> 时间：2012-04-06T18:02:19.293
> 
> 标签：jquery

我想根据**必须从已处理元素的 ID 计算的**某些条件[切换一个类](http://api.jquery.com/toggleClass/)：

 **```
$(".centre li").toggleClass("highlight", someFunction(x)); 
```

（这将选择大约 10 个列表元素。如果需要突出显示，我需要查找每个元素的 ID。）

```
someFunction(selectedElement) {
  if (selectedElement.id in someArray)
    return true
  else
    return false
} 
```

我可能**在closure-hell 中迷路了**，但`this`在函数中被设置为另一个元素。这是真正的代码：

```
...
showListItem = function(linkSelector, listSelectors, contentSelector) {
return function() {
    $(".centre li").toggleClass("backgroundFullOrange", test(this));
    function test(a) {
        console.log($(a).attr("id")); // -> id of the linkSelector-element
    }
}
};  
$(linkSelector).bind('click', showListItem(linkSelector, listSelectors, contentSelector))
... 
```

**更新**：原来 toggleClass() 不是我一直在寻找的功能。请参阅接受的答案以了解正确用法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T18:03:45.817

首先，`$(".centre li").toggleClass("highlight", someFunction(x));`不是正确的语法。第二个参数是`switch`，定义如下，

> switch 一个布尔值，用于确定是应该添加还是删除该类。

**switch 不能像你一样成为一个函数。**

在您的情况下，您将不得不调用`.removeClass('highlight')`，然后`addClass`您可以在其中比较元素的 ID 并返回突出显示或''。

请参阅每 1.5 秒随机突出显示 2 li 的 DEMO。

[**演示**](http://jsfiddle.net/skram/jTJ2H/6/)

```
 $(".centre li")
       .removeClass('highlight')
       .addClass(function () {
           return ($.inArray(this.id, someArray) >= 0)?'highlight': '';
       }); 
```

* * *

我想我这次理解正确。见下文，

[**演示**](http://jsfiddle.net/skram/jTJ2H/2/)

```
$(function() {
    var someArray = ['l1', 'l8'];

    $(".centre li").toggleClass(function() {
        return ($.inArray(this.id, someArray) >= 0)?'highlight':'';
    });

}); 
```

* * *

尝试使用`.filter`. 像下面这样的东西，

```
$(".centre li").filter(function() {
    return $.inArray(this.id, someArray);
}).toggleClass("highlight"); 
```

突出显示将仅添加到过滤器返回的那些元素。**

# entity-framework - 对不同模型使用相同的 dbcontext

> ID：10047342
> 
> 赞同：0
> 
> 时间：2012-04-06T18:02:31.030
> 
> 标签：entity-framework, code-first

我有一个空的 DbContext。映射是动态创建的，通常使用 Set() 使用 DbContext；

以下是我的通用 DbContext。

```
/// <summary>
/// Object context
/// </summary>
public class MethodObjectContext : DbContext, IDbContext
{
    private readonly IEventPublisher _eventPublisher;

    public MethodObjectContext(string nameOrConnectionString, IEventPublisher eventPublisher)
        : base(nameOrConnectionString)
    {
        _eventPublisher = eventPublisher;
    }

    public MethodObjectContext(DbConnection existingConnection, bool contextOwnsConnection, IEventPublisher eventPublisher)
        : base(existingConnection, contextOwnsConnection)
    {
        _eventPublisher = eventPublisher;
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        _eventPublisher.Publish(new ModelCreating(modelBuilder));
        base.OnModelCreating(modelBuilder);
    }

    public new IDbSet<TEntity> Set<TEntity>() where TEntity : class
    {
        return base.Set<TEntity>();
    }
} 
```

我正在尝试编写一个单元测试，如果我更改映射（来自 ModelCreating 事件），它将断言数据库不同步。

以下是我的测试代码。

```
[TestClass]
public class MigrationTests
{
    private string _connectionString = string.Empty;
    private string _testDb = string.Empty;

    public MigrationTests()
    {
        _testDb = Path.Combine("C:\\", System.Reflection.Assembly.GetExecutingAssembly().GetName().Name.Replace(".", "") + ".sdf");

        if (File.Exists(_testDb))
            File.Delete(_testDb);

        _connectionString = string.Format("Data Source={0};Persist Security Info=False;", _testDb);

        Database.DefaultConnectionFactory = new SqlCeConnectionFactory("System.Data.SqlServerCe.4.0");
    }

    [TestMethod]
    public void ThrowsErrorForOutOfDateDatabase()
    {
        // The initializer will handle migrating the database. 
        // If ctor param is false, auto migration is off and an error will be throw saying the database is out of date.
        Database.SetInitializer(new MigrationDatabaseInitializer<MethodObjectContext>(false));

        // Create the initial database and do a query.
        // This will create the database with the conventions of the Product1 type.
        TryQueryType<Product1>("Product");

        // The next query will create a new model that has conventions for the product2 type.
        // It has an additional property which makes the database (created from previous query) out of date.
        // An error should be thrown indicating that the database is out of sync.
        ExceptionAssert.Throws<InvalidOperationException>(() => TryQueryType<Product2>("Product"));
    }

    private void TryQueryType<T>(string tableName) where T : class
    {
        using (var context = new MethodObjectContext(_connectionString, new FakeEventPublisher(x => x.ModelBuilder.Entity<T>().ToTable(tableName))))
        {
            var respository = new EfRepository<T>(context);
            var items = respository.Table.ToList();
        }
    }
} 
```

我的 Product1 类是 POCO 对象，而我的 Product2 类是具有附加 db 字段的同一对象。

我的问题是，当我 new() 第二次启动 MethodObjectContext 并进行查询时，未调用 ModelCreating 方法，导致出现以下错误。

```
The entity type Product2 is not part of the model for the current context. 
```

Product2 将是正在调用的 ModelCreating 事件的上下文的一部分，但事实并非如此。有任何想法吗？

注意：我预计会出现错误，因为我们使用的是相同的连接字符串 (sdf)，并且正在创建的数据库没有创建我的第二次调用 (Product2) 所需的附加字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:10:54.723

我的 DbCompiledModel 正在被缓存。以下刷新了缓存。

```
private void ClearDbCompiledModelCache()
{
    var type = Type.GetType("System.Data.Entity.Internal.LazyInternalContext, EntityFramework");
    var cmField = type.GetField("CachedModels",System.Reflection.BindingFlags.Static | System.Reflection.BindingFlags.Public | System.Reflection.BindingFlags.NonPublic);
    var cachedModels = cmField.GetValue(null);
    cachedModels.GetType().InvokeMember("Clear", System.Reflection.BindingFlags.Public | System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.InvokeMethod, null, cachedModels, null);
} 
```

# java - Java程序阻塞端口？

> ID：10047343
> 
> 赞同：0
> 
> 时间：2012-04-06T18:02:31.137
> 
> 标签：java, sockets, port

有一个程序叫[PC^2](http://www.ecs.csus.edu/pc2/)（编程竞赛评审系统）。您可以向它提交 java 文件，它会编译/运行它。

我有一个创建套接字的程序，当我将它提交给 PC^2 时，它运行良好，但我无法在我的网络浏览器上访问 url (http://ip:port/)。但是当我退出 PC^2（我的程序仍在运行）时，当我在我的网络浏览器上点击刷新时它就可以工作了。这意味着 PC^2 以某种方式阻塞了端口，但没有占用它（即使其成为占用该端口的自己的 ServerSocket），因为如果它占用了它，那么我的程序将抛出异​​常并退出。

Java 程序有哪些可能的方法可以做到这一点？而且由于 PC^2 是封闭源代码，因此我无法查看。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T18:07:56.910

一次只有一个程序可以监听某个端口。

如果您使用某个端口启动两次tomcat，也会发生同样的情况

这与java无关。这就是套接字的工作方式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T19:58:03.620

如果 PS^2 在本地运行，您可以在运行程序之前检查它是否正在侦听。我看到[PS2 版本 9 使用套接字进行通信](http://pc2.ecs.csus.edu/doc/v9/pc2v9AdminGuide.pdf#page=79)，所以这可能是怎么回事？在 Windows 中，[这些说明将有助于确认哪个进程正在侦听端口](http://support.microsoft.com/kb/281336)。在 linux 中，[此页面会有所帮助](http://www.cyberciti.biz/faq/what-process-has-open-linux-port/)。

# cassandra - Hector/Cassandra：如何向现有的 SuperColumn 添加列？

> ID：10047346
> 
> 赞同：0
> 
> 时间：2012-04-06T18:03:24.017
> 
> 标签：cassandra, hector

我可以创建一个具有列的新 SuperColumn - 没问题。我可以创建一个新列 - 没问题。但是如何向现有的 SuperColumn 添加新列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T02:56:35.163

> 但是如何向现有的 SuperColumn 添加新列？

你真的应该看看赫克托的班级`SuperCfTemplate`和班级`SuperCfUpdater`。初始化它们后，执行所需的操作（例如您的问题，在此 scf 中添加一个新 cf），然后使用模板更新更改。下面是一个片段。

```
SuperCfTemplate<String, String, String> template = new ThriftSuperCfTemplate<String, String, String>(keyspace, "Super1", stringSerializer, stringSerializer, stringSerializer);
SuperCfUpdater<String, String, String> updater = template.createUpdater("key", "newcf");
updater.setString("subname", "1");
template.update(updater); 
```

# java - 更改计算机时钟后的 Java 系统时间

> ID：10047356
> 
> 赞同：1
> 
> 时间：2012-04-06T18:04:20.430
> 
> 标签：java, clock, systemtime

更改计算机时钟后，我想在 java 应用程序中获取时间。这似乎没有得到正确的时间。

例如

```
Computer clock reads 1:30pm; new Date() returns 1:30pm
Change computer clock to 12:30pm;
Computer clock reads 12:30pm; new Date() returns 12:30pm
Change computer clock to 1:30pm;
Computer clock reads 1:30pm; new Date() returns 12:30pm 
```

我的 java 应用程序是否可以检测到时钟的这种变化？

更新：似乎只发生在 Chrome 中......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T19:02:35.987

或者您可以像这样阅读启动“日期”的时间

```
Runtime.exec("date").getInputStream() ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:17:56.107

您可以创建一个在 X 毫秒后持续检查时间的线程。如果时间偏移大于 +-N 比它应该是的（认为这是因为其他进程可能正在使用处理器，所以可能存在小错误）然后为时间创建一个偏移量。然后为自己创建一个新的日期类并添加偏移量以获取时间。

我不知道它是否完全准确，但它适用于大多数情况

编辑：线程将记录系统时钟的时间并进入睡眠状态。

因此，例如，我们将 1 秒的错误率保持为 10 秒的线程睡眠时间

`System clock = 10:00:00`并且`Recorded in Thread = 10:00:00`和`Difference = null`

线程休眠 10 秒

`System clock = 10:00:11`并且在允许的范围内 10 +- `Recorded in Thread = 10:00:11`1`Difference = 11` `offset=0`

线程休眠 10 秒，系统时钟增加 1 小时

`System clock = 11:00:21`并且`Recorded in Thread = 11:00:21`和`Difference = 3600` `offset = 3599`

现在你需要减去这个偏移量，你会得到 10:00:22 不准确但接近。

# chef-infra - 厨师 - 安装 zenoss 但 HTTP 请求返回 500 内部服务器错误：连接被拒绝 - 连接（2）

> ID：10047365
> 
> 赞同：0
> 
> 时间：2012-04-06T18:05:10.430
> 
> 标签：chef-infra, zenoss

我正在尝试使用厨师在 ubuntu 上安装 zenoss。

当我运行 chef-client 时，我得到了这个错误。我不知道如何解决。

```
Fri, 06 Apr 2012 18:01:44 +0000] INFO: Loading cookbooks [apache2, apt, build-essential, monitor_base, openssh, openssl, python, yum, zenoss]
[Fri, 06 Apr 2012 18:01:44 +0000] INFO: HTTP Request Returned 500 Internal Server Error: Connection refused - connect(2)
[Fri, 06 Apr 2012 18:01:44 +0000] ERROR: Server returned error for http://106.187.89.115:4000/search/node?q=recipes:zenoss%5C:%5C:server&sort=X_CHEF_id_CHEF_X%20asc&start=0&rows=1000, retrying 1/5 in 3s
[Fri, 06 Apr 2012 18:01:47 +0000] INFO: HTTP Request Returned 500 Internal Server Error: Connection refused - connect(2)
[Fri, 06 Apr 2012 18:01:47 +0000] ERROR: Server returned error for http://106.187.89.115:4000/search/node?q=recipes:zenoss%5C:%5C:server&sort=X_CHEF_id_CHEF_X%20asc&start=0&rows=1000, retrying 2/5 in 6s
[Fri, 06 Apr 2012 18:01:53 +0000] INFO: HTTP Request Returned 500 Internal Server Error: Connection refused - connect(2)
[Fri, 06 Apr 2012 18:01:53 +0000] ERROR: Server returned error for http://106.187.89.115:4000/search/node?q=recipes:zenoss%5C:%5C:server&sort=X_CHEF_id_CHEF_X%20asc&start=0&rows=1000, retrying 3/5 in 16s 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:50:44.900

这是 solr 启动的问题。在您的 Chef 服务器上，确保 chef-solr 正在运行。我怀疑不是。这很可能是权限问题。确保 /var/run/chef 和 /var/log/chef 都归厨师所有。

# c++ - 在“堆栈”上分配的向量可以从一个函数传递到另一个函数吗？

> ID：10047369
> 
> 赞同：6
> 
> 时间：2012-04-06T18:05:29.623
> 
> 标签：c++, memory-management, vector

我知道当函数完成执行时，分配在该函数堆栈上的变量变得不可访问。但是，向量类型在堆上分配它们的元素，不管它们是如何分配的。例如，

```
vector<int> A; 
```

将在堆而不是堆栈上为其元素分配空间。

我的问题是，假设我有以下代码：

```
int main(int argc, char *argv[]) {
    // initialize a vector
    vector<int> A = initVector(100000);

    // do something with the vector...

    return 0;
}

// initialize the vector
vector<int> initVector(int size) {
    vector<int> A (size);  // initialize the vector "on the stack"

    // fill the vector with a sequence of numbers...
    int counter = 0;
    for (vector<int>::iterator i = A.begin(); i != A.end(); i++) {
        (*i) = counter++;
    }

    return A;
} 
```

在 main 函数中使用向量 A 时会出现内存访问问题吗？我尝试了几次，它们都正常工作，但我担心这可能只是运气。

我看到的方式是，向量 A 在堆上分配其元素，但它在堆栈本身上分配了一些“开销”参数（可能是向量的大小）。因此，如果这些参数被另一个分配覆盖，在主函数中使用向量可能会导致内存访问问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T18:24:53.697

当您执行“返回 A”时；您按值返回，因此您获得了向量的副本——C++ 创建一个新实例并在其上调用复制构造函数或 operator=。因此，在这种情况下，分配内存的位置并不重要，因为无论如何您都必须复制它并销毁旧副本（尽管有一些可能的优化）。

向量（以及所有其他 STL 容器）中的数据也按值移动，因此您存储整数的副本，而不是指向它们的指针。这意味着您的对象可以在任何容器操作中多次复制，并且它们必须正确实现复制构造函数和/或赋值运算符。默认情况下，C++ 会为您生成这些（只需对所有成员变量调用 copy ctor），但它们并不总是做正确的事情。

如果您想在 STL 容器中存储指针，请考虑使用共享指针包装器（std::shared_ptr 或 boost::shared_ptr）。他们将确保正确处理内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T18:08:12.553

是的，它将正常工作，因为元素的内存已分配，这将用于构建`vector<int> A =`变量。但是，就性能而言，这不是最好的主意。

我建议将您的功能更改为以下内容

```
void initVector(vector<int>& a, int size) 
```

有关用法的其他参考，请参阅[Returning a STL vector from a function...</a> 和](http://social.msdn.microsoft.com/Forums/en-US/vclanguage/thread/7d28351a-488f-4e97-b69e-6e73b43ce8af/)[[C++] Returning Vector from Function](http://ubuntuforums.org/showpost.php?p=3971175&postcount=3)。

有关性能的其他参考（使用 C++11），请参阅[正确方法（移动语义）从 C++0x 中的函数调用返回 std::vector](https://stackoverflow.com/questions/6211575/proper-way-move-semantics-to-return-a-stdvector-from-function-calling-in-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T18:33:47.067

C++ 向量实际上有两块内存，它们用一个指针链接。第一个在堆栈中，第二个在堆中。因此，您在单个对象中同时具有堆栈和堆的功能。

```
std::vector<int> vec;
vec.push_back(10);
vec.push_back(20);
vec.push_back(30);
std::cout << sizeof(vec) << std::endl; 
```

运行该代码后，您会注意到堆栈区域不包含元素，但它仍然存在。因此，当您将向量从函数传递到另一个函数时，您需要操作堆栈区域，并且向量将像任何其他基于堆栈的对象一样被复制。

# c# - 在不同的线程中调用/调用偶数

> ID：10047379
> 
> 赞同：1
> 
> 时间：2012-04-06T18:06:31.307
> 
> 标签：c#, multithreading, events, network-programming, console-application

我必须在 C# 中创建一个 Instant Messenger 服务器。服务器是一个 ConsoleApplication 项目。我想制作一个在 3 个线程中运行的服务器。我将在下面的代码中解释。

问题是如何从单独的线程调用函数，或在单独的线程上创建事件？

这是主要的服务器类。

```
public class GiNetServer
{
     public void Start()
     {
         netServer  = new NetServer();
         msgHandler = new NetMsgHandler();

         netServer.NewNetMsg += msgHandler.HandleMsg;

         Work();
     }

     private void Work()
     {
         while(true)  //This runs in the MainThread
           sleep(1);
     }
} 
```

NetServer 类创建 2 个线程：acceptClientsThread 和 receiveMessagesThread。接收线程调用 NewNetMsg。

```
public class NetServer
{

     public event NewNetMsgEventHandler NewNetMsg;

     public NetServer()
     {
          acceptClientsThread = new Thread(ListenForClients);
          receiveMessageThread = new Thread(Receive);
          //and of course starts them here...
     }

     private void Receive()
     {
          while(true)
          {
               Heartbeat();
          }
     }

     private void Heartbeat()
     {
          foreach(netClient in clientsList)
          {
               if (netClient.DataAvalible)
               {
                   netClient.Recive();
               }
               if (!netClient.IsBufferEmpty())
               {
                   nextMsg = netClient.NextMessage();
                   if (nextMsg != null)
                       NewNetMsg(netClient, nextMsg);  //Call the event!
               }
          }
     }
} 
```

如何使 msgHandler.HandleMsg 函数在单独的线程或 MainThread 中运行？

像这样，HandleMsg 在 receiveMessagesThread 中运行。

上面的代码是伪代码。如果有什么模棱两可的地方请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:27:55.807

有很多不同的方法可以将 HandleMsg 调用移动到不同的线程，具体取决于您的要求。[最简单的方法是使用ThreadPool](http://msdn.microsoft.com/en-us/library/kbf0f1ct.aspx)在不同的线程上引发 NewNetMsg 事件：

```
ThreadPool.QueueUserWorkItem(s => NewNetMsg(netClient, nextMsg)); 
```

您还可以使用[任务并行库 (TPL)](http://msdn.microsoft.com/en-us/library/dd460717.aspx)。您还可以将事件添加到由专用后台线程处理的[ConcurrentQueue](http://msdn.microsoft.com/en-us/library/dd267265.aspx)。而且还有更多选择。如果没有更多细节，就不可能给出更具体的建议。

# python - Django：根据特定标准拒绝模型保存

> ID：10047387
> 
> 赞同：0
> 
> 时间：2012-04-06T18:07:26.063
> 
> 标签：python, django

我有一个 Django 模型，非常简单：

```
class Person(models.Model):
    name = models.CharField(max_length=100) 
```

如果实际名称更改，我想拒绝保存此模型，但我想允许更改大小写。例如：

```
SAM -> sAm: allowed
Sam -> SAM: allowed
Sam -> John: not allowed 
```

如何覆盖`save()`我的 Person 模型的方法，以便拒绝此类编辑？特别是，我正在努力解决：

1.  在方法中获取对象的预保存版本`save()`。
2.  当保存被拒绝时，在 Django 的管理区域内向用户显示一条消息。
3.  拒绝保存时将用户返回到编辑屏幕。

随意回答问题的任何部分，并提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:46:30.720

[这个答案](https://stackoverflow.com/questions/1355150/django-when-saving-how-can-you-check-if-a-field-has-changed)有两种很好的方法来检测字段是否已更改并执行某些操作。

在您的情况下，您将对其进行修改，不仅可以检测字段是否已更改，还可以检测它是否是您想要允许的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:16:27.430

我会在“干净”方法中使用表单和一些自定义验证：

例子：

```
class MyForm(ModelForm):
    class Meta:
        model = MyModel

    def clean(self):
        cleaned_data = self.cleaned_data
        name = cleaned_data.get("name ")
        if name == ###:
            #custom validition checking here
            raise forms.ValidationError('You can only capitalize.')
        return cleaned_data 
```

# java - 是否有一个 java View 类来做到这一点？

> ID：10047392
> 
> 赞同：0
> 
> 时间：2012-04-06T18:07:49.480
> 
> 标签：java, html, htmleditorkit

我需要将自定义标签添加到 html 文件。该子类需要具有与 <a href="something"> 标记类似的行为。用户可以像点击链接一样点击标签的描述。我知道 HTMLEditorKit 类允许我创建自定义视图。我需要编写几种方法。我不想这样做，主要是因为我不知道编写视图所涉及的所有细节。我正在使用 swing JEditorPane 组件来显示 html 文本。我相信 JEditorPane 支持 HTML 3.2 格式。我只想拥有与 <a href > 标签相同的显示和行为。是否有允许我这样做的现有 java View 类？似乎应该有一个，因为 java 支持 <a href> 标记。

# java - 二进制文件传输 Ok Win7 到 Linux，而不是 Ok Linux 到 Win7

> ID：10047403
> 
> 赞同：0
> 
> 时间：2012-04-06T18:08:32.157
> 
> 标签：java, sockets, file-upload, md5, binaryfiles

我有一些客户端服务器套接字代码，并且正在 Windows 7 机器和 SUSE Linux 机器之间传输二进制文件。当我将文件从 Win7 传输到 Linux 时，它们最终得到相同的 MD5 校验和，所以我知道它们是相同的。但是当我从Linux传输到Win7时，校验和不一致，说明文件传输不正确。

有人遇到这个吗？我正在使用 ObjectOutputStreams 和 DataInputStreams ，两边的代码都是一样的。

```
 // connect socket to server socket, etc
//........

//=======================
// read the file
try {
size = file.length();
byteArr = new byte[(int) size];
dis = new DataInputStream(new FileInputStream(file));
dis.read(byteArr, 0, byteArr.length);
} catch (Exception e) {
System.out.println(e.getMessage());
e.printStackTrace();
}

//=======================
// then send it
try {
oos.writeObject(byteArr);
oos.flush();
} catch (Exception e) {
System.out.println(e.getMessage());
e.printStackTrace();
}

// then close oos, dis, etc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T21:23:00.723

`InputStream.read`不保证填充输入数组。它保证至少读取 1 个字节并且不超过可以放入数组中，或者如果到达文件末尾，则为 0 个字节，或者 IOException。可能是在 linux 下，您无法一次性获取整个文件。

另外，为什么要填充字节数组然后将其作为对象发送？流被概念化为字节流，不需要数组。

例如。

```
int bufferSize = 4096;
byte[] buffer = new byte[bufferSize];

FileInputStream input = new FileInputStream(file);

int read;
while ((read = input.read(buffer)) != -1) {
    output.write(buffer, 0, read);
}

// flush and close everything 
```

# php - curl 错误：“sslv3 警报意外消息”

> ID：10047407
> 
> 赞同：1
> 
> 时间：2012-04-06T18:09:08.903
> 
> 标签：php, ssl, curl

卷曲给我以下错误：

```
error:140773F2:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert unexpected message 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T12:53:14.490

这意味着糟糕的 SSL 握手。您将需要像这样指定协议的版本：

```
curl_setopt($curl_connection, CURLOPT_SSLVERSION, 3); 
```

如果仍然出现错误，请将 3 更改为 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-10T00:57:57.090

当我使用 macOS 默认值时出现同样的错误，`curl`这是一个仅支持 TLSv1.2 的旧版本。但我试图调用的端点是使用 TLSv1.3。

在 macOS 上，我通过`brew install curl`.

然后你可以运行一些东西，例如

```
/usr/local/opt/curl/bin/curl --version 
```

或者

```
/usr/local/opt/curl/bin/curl --tlsv1.3 --request GET \
     --url https://localhost:9200 \
     --cacert ca.crt \
     --key tls.key \
     --cert tls.crt \
     --header 'Content-Type: application/json' \
     --verbose 
```

# weka - 分类时跳过特征，但在输出中显示特征

> ID：10047409
> 
> 赞同：18
> 
> 时间：2012-04-06T18:09:37.963
> 
> 标签：weka

我创建了一个数据集，其中包含 +/- 13000 行和 +/- 50 个特征。我知道如何输出每个分类结果：预测和实际，但我希望能够输出带有这些结果的某种 ID。所以我在我的数据集中添加了一个 ID 列，但我不知道在分类时如何忽略 ID，同时仍然能够输出每个预测结果的 ID。我确实知道如何选择要在每个预测中输出的特征。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-06T22:24:15.500

使用过滤分类器。看到[这个](http://weka.wikispaces.com/Use+WEKA+in+your+Java+code)和[这个](http://weka.sourceforge.net/doc.dev/weka/classifiers/meta/FilteredClassifier.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-15T06:36:14.543

假设以下是您要删除的 bbcsport.arff 中的属性，并且逐行位于文件 attributes.txt 中。

serena
发球
服务
设置
引人注目的
网球
tiebreak
锦标赛
温布尔登
..
以下是您如何通过设置 true 或 false 来包含或排除属性。（相互难以捉摸） remove.setInvertSelection( **false** )

```
BufferedReader datafile = new BufferedReader(new FileReader("bbcsport.arff")); 
BufferedReader attrfile = new BufferedReader(new FileReader("attributes.txt"));

Instances data = new Instances(datafile); 
List<Integer> myList = new ArrayList<Integer>();
String line;

while ((line = attrfile.readLine()) != null) {
  for (n = 0; n < data.numAttributes(); n++) {
    if (data.attribute(n).name().equalsIgnoreCase(line)) {
      if(!myList.contains(n)) 
        myList.add(n); 
    } 
  }
}

int[] attrs = myList.stream().mapToInt(i -> i).toArray();
Remove remove = new Remove();
remove.setAttributeIndicesArray(attrs);
remove.setInvertSelection(false);
remove.setInputFormat(data); // init filter

Instances filtered = Filter.useFilter(data, remove); 
```

“过滤”具有最终属性..

我的博客.. [http://ojaslabs.com/include-exclude-attributes-in-weka](http://ojaslabs.com/include-exclude-attributes-in-weka)

# actionscript-3 - 在 3d 立方体上添加影片剪辑并与之交互

> ID：10047410
> 
> 赞同：0
> 
> 时间：2012-04-06T18:09:55.330
> 
> 标签：actionscript-3, cube, flash-cs4, papervision3d

我使用以下代码创建了一个旋转立方体，并将位图添加为立方体的侧面。我想知道是否可以将影片剪辑分配为立方体的侧面，以便我可以与它们进行一些交互。

```
 import flash.events.Event;
    import flash.display.Bitmap;
    import flash.display.BitmapData;

    import org.papervision3d.cameras.CameraType;
    import org.papervision3d.materials.BitmapMaterial;
    import org.papervision3d.materials.ColorMaterial;
    import org.papervision3d.materials.WireframeMaterial;
    import org.papervision3d.materials.utils.MaterialsList;
    import org.papervision3d.objects.primitives.Cube;
    import org.papervision3d.view.BasicView;

            var cube : Cube;                    
            var basicview : BasicView = new BasicView(640, 480, true, false, CameraType.FREE); 
            addChild(basicview);
            var logo : Logo = new Logo( 0,0); //Bitmapdata (jpeg) exported as class Logo from library   
            var matFront : BitmapMaterial = new BitmapMaterial(logo);
            var matBack : BitmapMaterial = new BitmapMaterial(logo); 

            var ml : MaterialsList = new MaterialsList(); 

            ml.addMaterial(matFront, "front"); 
            ml.addMaterial(matBack, "back"); 
            ml.addMaterial(new ColorMaterial(0x551F92),"right"); 
            ml.addMaterial(new ColorMaterial(0x431872),"bottom"); 
            ml.addMaterial(new ColorMaterial(0x341359),"top"); 
            ml.addMaterial(new ColorMaterial(0x7429C7),"left"); 

            cube = new Cube(ml,200,200,200,5,5,5); 

            basicview.scene.addChild(cube); 
            basicview.camera.fov = 20;          

            addEventListener(Event.ENTER_FRAME, enterFrame);                
            function enterFrame(e:Event) : void
            {
                cube.yaw((320-mouseX)*0.01); 
                cube.pitch((240-mouseY)*0.01); 
            }
            basicview.singleRender(); 
        } 
```

**更新**

我加了这个

```
var matFront : MovieMaterial = new MovieMaterial(new MV(),false,true);
matFront.interactive = true ; 
```

`MV`只是这个代码的正方形

```
package Scripts {

    import flash.display.MovieClip;
    import flash.events.*;

    public class MV extends MovieClip
    {
        public function MV( ) 
        {
            buttonMode = true;
            addEventListener(MouseEvent.CLICK,traceFunction);
        }
        private function traceFunction(ev:MouseEvent) {
            trace("clicked");
        }
    }
} 
```

为什么我点击有影片剪辑的一侧时没有任何交互？

**更新 2**

好的，我发现我必须添加这一行

```
basicview.viewport.interactive = true; 
```

但是为什么即使在影片剪辑的一侧不可见时我也会进行交互。

我怎样才能避免它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T19:45:56.247

是的，有可能，您必须从要使用的 MovieClips 创建材质，为此请查看[papervision3d 材质包](http://www.papervision3d.org/docs/as3/org/papervision3d/materials/package-detail.html)中的[MovieMaterial](http://www.papervision3d.org/docs/as3/org/papervision3d/materials/MovieMaterial.html)和[MovieAssetMaterial](http://www.papervision3d.org/docs/as3/org/papervision3d/materials/MovieAssetMaterial.html)类。

# symfony - Symfony2 对象的自定义注释

> ID：10047411
> 
> 赞同：5
> 
> 时间：2012-04-06T18:10:02.567
> 
> 标签：symfony

有谁知道是否可以让一个捆绑包使用注释阅读器来读取非 Doctrine 对象的新自定义注释？到目前为止，我所看到的一切要么用于控制器，要么以某种方式扩展 Doctrine。

我想做的是这样的：

```
class MyTestClass {

  /**
   * @MyBundleName\Foo
   */
  public $foo_var;

  /** 
   * @MyBundleName\Bar
   */
  public $bar_var;
} 
```

然后有一些代码，当给定一个实例时，`MyTestClass`可以计算出哪个注释应用于哪个属性。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-06T18:53:04.607

对，再深入研究一下 Doctrine 是如何做到这一点的，我想我知道该怎么做。因此，如果其他人需要这样做，这就是我的做法（感谢任何反馈）

我有一个用于读取注释的服务，因此在 config.yml 中我包含了该`annotation_reader`服务，该服务提供对读取注释的方法的访问。

每个注释都需要解析为一个类，并且该类必须扩展基本 Doctrine 注释类，因此要从我的问题中进行 Foo 注释，您可以执行以下操作：

```
namespace MyBundleName

class Foo extends \Doctrine\Common\Annotations\Annotation {

} 
```

然后您可以通过执行以下操作来阅读注释：

```
$class = get_class($object);
foreach(object_get_vars($object) as $fieldname => $val){

    //$this->annotationReader is an instance of the annotation_reader service
    $annotations = $this->annotationReader
                   ->getPropertyAnnotations(
                      new \ReflectionProperty($class, $fieldName)
                     );

   //$annotations will now contain an array of matched annotations, most likely just an instance of the annotation class created earlier
} 
```

希望对其他人有用！

# c# - SSIS 从数据库中获取电子邮件并发送单独的电子邮件

> ID：10047418
> 
> 赞同：0
> 
> 时间：2012-04-06T18:10:47.913
> 
> 标签：c#, sql-server-2008, ssis

我需要安排一个每月运行的任务，该任务将查询 sql server，获取电子邮件列表，并向列表中的每个人发送单独的电子邮件。

我假设我需要使用 SSIS 来安排每月任务，但我不确定我是否应该在 sql server 中完成所有工作并使用存储过程和数据库邮件，或者我是否应该使用 SSIS调用一个可以完成所有工作的.Net 可执行文件？

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:17:22.837

我个人在 SQL Server 中做过相同类型的事情。您可以设置 SQL Mail 并编写一个存储过程来提取电子邮件地址。然后，您可以简单地使用`msdb.dbo.sp_send_dbmail`并提供`profile`名称、列表`recipients`、the `subject`、an`attachment`等作为选项。

然后您可以使用 sql server 中的作业部分来每月、每周、每小时等运行这个存储过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:31:10.263

SQL Authority 对如何在不使用 SSIS 的情况下从数据库中执行此操作有很好的逐步说明。 [http://blog.sqlauthority.com/2008/08/23/sql-server-2008-configure-database-mail-send-email-from-sql-database/](http://blog.sqlauthority.com/2008/08/23/sql-server-2008-configure-database-mail-send-email-from-sql-database/)

设置完成后，您可以使用 SQL 代理来安排处理和发送电子邮件的过程。

# events - Nservicebus Sagas 和订阅事件

> ID：10047421
> 
> 赞同：2
> 
> 时间：2012-04-06T18:10:53.383
> 
> 标签：events, nservicebus, saga

在 NServiceBus 3.0.3 中，我写了一个传奇。根据我在 CQRS 范式中所看到的，当我们看到过去时，这应该与一个事件相吻合。我想确保我的传奇中没有业务逻辑。我在构建 saga 时的假设是，它将接收事件并根据传入的事件以及存储在 saga 中的某些数据元素发出命令。我遇到的问题是 Saga 默认情况下无法订阅已发布的事件。我已经尝试在 EndPointConfig 中设置 IWantToRunAtStartup 并在 Run 方法中执行

```
Bus.Subscribe<CustomerBilledEvent>(); 
```

我试过用 saga 在同一个程序集中创建一个处理程序，但仍然没有骰子。

我的 saga（由 Nservicebus.host.exe 托管）和发布者（控制台应用程序中的服务）的 app.config 都具有这样配置的消息端点

```
 <add Messages="Events.CustomerBilledEvent, Events" Endpoint="orderservice"/> 
```

Saga 上已配置 IHandleMessages，orderid 上已配置映射。

```
IHandleMessages<CustomerBilledEvent>

ConfigureMapping<CustomerBilledEvent>(s => s.OrderId, m=> m.OrderId); 
```

我有点迷茫，为什么我不能让 Saga 订阅这个活动。我知道他们默认情况下不会自动订阅，但是当我查看 Udi 和 John 的博客下的示例时，我看到过去时（IEvent？）被发送到 saga 并且他们发出 Bus.Send，我推断它是命令（ICommand）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:52:33.077

所以问题是你已经设置了你的 saga 试图订阅“orderservice”端点以接收有关 CustomerBilledEvent 的通知，但该端点没有发布它。

# c# - 在 .NET 中将音乐从 iPad/iPhone/iPod Touch 流式传输到 PC (AirTunes)

> ID：10047423
> 
> 赞同：-1
> 
> 时间：2012-04-06T18:10:57.700
> 
> 标签：c#, c++, .net, c, ios

我看到了[shairport](http://sourceforge.net/projects/shairport4w/develop)和[shairport4w](https://github.com/albertz/shairport)项目，它们将音乐从 iDevice（Apple 称为 AirTunes/AirPlay）流式传输到计算机。我想为我的媒体播放器做同样的事情。这两个项目在 C/C++/Perl 中，所以我不能将它们移植到 C#/VB。

谁能解释一下 AirTunes 协议的工作原理以及如何在 .NET 中实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:15:11.510

您有 2 个选项：

*   将 C/C++ 代码移植到 .NET / C#
*   `DllImport`通过或通过`Process.Start`.NET使用 C/C++/Perl 代码/库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T18:30:18.207

这是旧的，但可能是一个很好的起点；

[JustPort](http://nanocr.eu/software/justeport/)

[Airfoil](http://www.rogueamoeba.com/airfoil/)的第一个版本就是基于[此](http://nanocr.eu/2008/03/15/rogue-developers/)

# sql - Visual Basic：无法从记录集中读取记录/数据。

> ID：10047426
> 
> 赞同：1
> 
> 时间：2012-04-06T18:11:07.407
> 
> 标签：sql, vba, asp-classic, recordset

这是我的代码：

```
Dim CompanyName, _
    CompanyDomain, _
    CompanyEmail, _
    CompanySupportPhone

Call GetEmailList

Sub GetEmailList
    dim sql
    dim companydata

    sql = ""
    sql = sql & " DECLARE @CompanyName VARCHAR(100);"
    sql = sql & " DECLARE @CompanyDomain VARCHAR(100);"
    sql = sql & " DECLARE @CompanyActivityEmail VARCHAR(100);"
    sql = sql & " DECLARE @CompanySupportPhone VARCHAR(100);"

    sql = sql & " SELECT"
        sql = sql & " @CompanyName = CASE WHEN Setting = 'CompanyName'"
        sql = sql & " THEN StringValue ELSE @CompanyName END,"
        sql = sql & " @CompanyDomain = CASE WHEN Setting = 'CompanyDomain'"
        sql = sql & " THEN StringValue ELSE @CompanyDomain END,"
        sql = sql & " @CompanyActivityEmail = CASE WHEN Setting = 'CompanyActivityEmail'"
        sql = sql & " THEN StringValue ELSE @CompanyActivityEmail END,"
        sql = sql & " @CompanySupportPhone = CASE WHEN Setting = 'CompanySupportPhone'"
        sql = sql & " THEN StringValue ELSE @CompanySupportPhone END"
    sql = sql & " FROM ClientSettings"
    sql = sql & " WHERE Setting in ('CompanyDomain','CompanyActivityEmail','CompanySupportPhone','CompanyName')"

    sql = sql & " SELECT ISNULL(@CompanyName, '') AS CompanyName, ISNULL(@CompanyDomain, '') AS CompanyDomain, ISNULL(@CompanyActivityEmail, '') AS CompanyEmail, ISNULL(@CompanySupportPhone, '') AS CompanySupportPhone"
    set companydata =  getRecordset(sql)

    CompanyName = companydata("CompanyName") ' LINE 80
    CompanyDomain = companydata("CompanyDomain")
    CompanyEmail = companydata("CompanyEmail")
        CompanySupportPhone = companydata("CompanySupportPhone")

        companydata.Close
        Set companydata = Nothing
End Sub 
```

这会引发错误：

> 80 号线
> 
> 在与请求的名称或序号对应的集合中找不到项目。

我在上面标记了第 80 行。我在 SQL Server 管理器中运行这个完全相同的 SQL 并返回结果：

```
CompanyName CompanyDomain   CompanyEmail    CompanySupportPhone
MyCompanyName   http://localhost    MyCompanyName@email.com 801-555-1212 
```

知道我在这里做错了什么吗？

GetRecordSet 正确加载和处理数据库调用，此函数在 1,000 个其他地方有效。我确定问题不存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T18:16:46.497

添加

```
sql = sql & " SET NOCOUNT ON;" 
```

作为第一条 SQL 语句。

[SET NOCOUNT ON 使用情况](https://stackoverflow.com/questions/1483732/set-nocount-on-usage)

# jquery - youtube api 事件上的弹出窗口

> ID：10047427
> 
> 赞同：0
> 
> 时间：2012-04-06T18:11:10.230
> 
> 标签：jquery, youtube-api, dom-events, simplemodal

我正在使用 simplemodal 来弹出一个模态窗口。我已经测试了模态窗口的功能，一切正常。

我有一个隐藏的 div 元素：

```
 <div id="form-box" class="form-box" style="display:none;">
        <div class="form-crop">
        <script type="text/javascript"         src="https://releasetechnique.infusionsoft.com/app/form/iframe/84f82828ea34c2a633bbe0a87560586c"></script>
        </div>
        </div> 
```

如果我用计时器测试它，这会很好地弹出。

```
 <script type="text/javascript">
    $(function() {
    setInterval(update, 1000);
    });

    function update() {
    $("#form-box").modal();
    }
    </script> 
```

现在我要做的是从 Youtube 的 API 中获取信息，我已经成功地用以下方法进行了测试：

```
 function onYouTubePlayerReady(playerId) {
        $ytplayer = document.getElementById("myytplayer");
        $ytplayer.addEventListener("onStateChange", "onytplayerStateChange");
    }

    function onytplayerStateChange(newState) {
        alert("Player's new state: " + newState);

    } 
```

这按预期工作。它返回当前播放器状态，并且任何时候播放器状态发生更改，警报都会通知我。

现在，我要做的是弹出模式窗口，当播放器状态等于 0 时。0 表示播放器已停止。所以基本上，一旦 Youtube 视频播放完毕， 0 就会作为 newstate 返回。

我尝试了以下方法，但无法正常工作。有什么建议么？

```
 function onYouTubePlayerReady(playerId) {
        $ytplayer = document.getElementById("myytplayer");
        $ytplayer.addEventListener("onStateChange", "onytplayerStateChange");
    }

    function onytplayerStateChange(newState) {
        if(newstate === 0) {
            $("#form-box").modal(); 
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:14:27.360

1.  `$("form-box").modal();`应该`$("#form-box").modal();`
2.  你确定`newState`是数字吗？如果没有，您可能想使用`==`而不是`===`
3.  删除页面中其他未使用的 jQuery 插件。他们可能会引发冲突。

# ruby - 循环时出错

> ID：10047428
> 
> 赞同：0
> 
> 时间：2012-04-06T18:11:12.273
> 
> 标签：ruby, watir

我正在编写一些代码，这些代码将从文本文件中提取 URL，然后检查它们是否加载。我的代码是：

```
require 'rubygems'
require 'watir'
require 'timeout'

Watir::Browser.default = "firefox"
browser = Watir::Browser.new

File.open('pl.txt').each_line do |urls|
  begin
    Timeout::timeout(10) do
      browser.goto(urls.chomp)
      if browser.text.include? "server"
        puts 'here the page didnt' 
      else
        puts 'here site was found'
        File.open('works.txt', 'a') { |f| f.puts urls }
      end
    end
  rescue Timeout::Error => e
    puts e
  end
end

browser.close 
```

问题是虽然我得到了错误：

```
execution expired
/Library/Ruby/Gems/1.8/gems/firewatir-1.9.4/lib/firewatir/jssh_socket.rb:19:in `const_get': wrong number of arguments (2 for 1) (ArgumentError)
    from /Library/Ruby/Gems/1.8/gems/firewatir-1.9.4/lib/firewatir/jssh_socket.rb:19:in `js_eval'
    from /Library/Ruby/Gems/1.8/gems/firewatir-1.9.4/lib/firewatir/firefox.rb:303:in `open_window'
    from /Library/Ruby/Gems/1.8/gems/firewatir-1.9.4/lib/firewatir/firefox.rb:94:in `get_window_number'
    from /Library/Ruby/Gems/1.8/gems/firewatir-1.9.4/lib/firewatir/firefox.rb:103:in `goto'
    from samplecodestack.rb:17
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/timeout.rb:62:in `timeout'
    from samplecodestack.rb:16
    from samplecodestack.rb:13:in `each_line'
    from samplecodestack.rb:13 
```

有谁知道如何让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T21:47:48.217

您也可以使用 net/http 并处理超时。

```
require "net/http"
require "uri"
File.open('pl.txt').each_line do |urls|
    uri = URI.parse(urls.chomp)
    begin
        response = Net::HTTP.get_response(uri)
    rescue Exception=> e
        puts e.message
        puts "did not load!"
    end
end 
```

我在跟踪您的堆栈跟踪时遇到了麻烦，但它似乎在您的 goto 语句中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T13:43:10.420

`execution expired``Timeout::timeout`是超出块时发生的错误。请注意，超时是检查其整个块是否在指定时间内完成。鉴于行号错误，我猜测正在加载的 URL 花了将近 10 秒，然后文本检查超时。

我假设你真的只是意味着如果页面加载时间超过 10 秒，而不是整个测试需要 10 秒才能完成，则超时发生。因此，您应该将 if 语句移出 Timeout 块：

```
File.open('pl.txt').each_line do |urls|
  begin
    Timeout::timeout(10) do
      browser.goto(urls.chomp)
    end
    if browser.text.include? "server"
      puts 'here the page didnt' 
    else
      puts 'here site was found'
      File.open('works.txt', 'a') { |f| f.puts urls }
    end
  rescue Timeout::Error => e
    puts 'here the page took too long to load'
    puts e
  end
end 
```

# vb.net - 如何将多个数据表合并到一个数据表中。？

> ID：10047430
> 
> 赞同：3
> 
> 时间：2012-04-06T18:11:26.460
> 
> 标签：vb.net, ms-access, datatable, dataset

我正在使用 Microsoft Access 数据库（请不要建议我使用其他数据库，因为在这种特殊情况下我没有那个选择）。由于 Access 数据库表不能超过 255 列，因此我使用垂直数据库分区技术，将信息拆分为 5 个不同的表。每个表有 100 列，第一列是主键。（请不要在这里建议我进行数据库规范化）。现在我需要从这五个表中读取数据，以便将其导出到 Excel 文件中。

为了实现这一点，我已经完成了以下步骤，但无法弄清楚如何组合多个表。

1.  我正在阅读这些表中的每一个并将单独的 DataTable 放入同一个 DataSet 中。（由于我使用的是 Access 数据库，我无法从所有表中选择所有列）

2.  我已经在这五个表上声明了关系

3.  现在我需要将这些 DataTable 组合成一个 DataTable。这意味着我将总共有 496 列。我正在从 4 个表中删除主键，因为它是相同的信息。我该怎么做呢？

    ```
    Dim conn As OleDbConnection = New OleDbConnection
    Conn ="Connection string stuff goes"

    Dim FinalDS As New DataSet
    Dim DataSet1 As New DataSet
    Dim DataSet2 As New DataSet

    SQLstr1 = "SELECT * FROM Table1"
    SQLstr2 = "SELECT * FROM Table2"
    SQLstr3 = "SELECT * FROM Table3"
    SQLstr4 = "SELECT * FROM Table4"
    SQLstr5 = "SELECT * FROM Table5"

    Dim DA1 As New OleDb.OleDbDataAdapter(SQLstr1, cn)
    Dim DA2 As New OleDb.OleDbDataAdapter(SQLstr2, cn)
    Dim DA3 As New OleDb.OleDbDataAdapter(SQLstr3, cn)
    Dim DA4 As New OleDb.OleDbDataAdapter(SQLstr4, cn)
    Dim DA5 As New OleDb.OleDbDataAdapter(SQLstr5, cn)

    Try
       DA1.Fill(FinalDS, "Tl")
       DA2.Fill(FinalDS, "T2")
       DA3.Fill(FinalDS, "T3")
       DA4.Fill(FinalDS, "T4")
       DA5.Fill(FinalDS, "T5")

       Dim DataRelation1 As New DataRelation("R1", _
                        FinalDS.Tables("T1").Columns("ID"), _
                        FinalDS.Tables("T2").Columns("ID"))

       Dim DataRelation2 As New DataRelation("R2", _
                        FinalDS.Tables("T2").Columns("ID"), _
                        FinalDS.Tables("T3").Columns("ID"))

       Dim DataRelation3 As New DataRelation("R3", _
                        FinalDS.Tables("T3").Columns("ID"), _
                        FinalDS.Tables("T4").Columns("ID"))

       Dim DataRelation4 As New DataRelation("R4", _
                        FinalDS.Tables("T4").Columns("ID"), _
                        FinalDS.Tables("T5").Columns("ID"))

       FinalDS.Relations.Add(DataRelation1)
       FinalDS.Relations.Add(DataRelation2)
       FinalDS.Relations.Add(DataRelation3)
       FinalDS.Relations.Add(DataRelation4)
       FinalDS.Relations.Add(DataRelation5)

      'Here I need to combine all these five DataTables into one DataTable
      'So that I can use Export it to excel from that one Final DataTable instead of  reading data from five different DataTables.

       'My Exporting to excel logies goes here which simply supporse to reads data from final DataTable which has 496 columns.

    Catch ex As Exception
        MsgBox(ex.Message)
    End Try 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T21:03:05.030

我不会打扰 DataRelations，只会使用[Merge](http://msdn.microsoft.com/en-us/library/system.data.datatable.merge.aspx)方法。然后像这样破解其余的...

```
 'Make all of the DataTables have the same columns.
    For Each dtPrepForMerge As DataTable In FinalDS.Tables

        For Each dtColumnsToGrab As DataTable In FinalDS.Tables

            For Each dc As DataColumn In dtColumnsToGrab.Columns

                'Don't duplicate columns.
                If dtPrepForMerge.Columns(dc.ColumnName) Is Nothing Then

                    dtPrepForMerge.Columns.Add(New DataColumn(dc.ColumnName, dc.DataType))

                End If

            Next

        Next

    Next

    'Now you can merge all of the tables together.
    'The order of the columns don't have to be the same between the tables.
    For intTableMergeCursor As Integer = 1 To (FinalDS.Tables.Count - 1)

        FinalDS.Tables(0).Merge(FinalDS.Tables(intTableMergeCursor))

    Next

    'Clone a new table that will hold your final results.
    Dim dtFinalResult As DataTable = FinalDS.Tables(0).Clone()

    'Sort the rows of your merged table by ID.
    Dim arrSortedDataRows As DataRow() = FinalDS.Tables(0).Select("id > 0", "id")

    Dim intLastID As Integer = CInt(arrSortedDataRows(0).Item("id"))

    Dim drMergedRow As DataRow = dtFinalResult.NewRow()

    For Each dr As DataRow In arrSortedDataRows

        'New ID?
        If CInt(dr.Item("id")) <> intLastID Then

            intLastID = CInt(dr.Item("id"))

            dtFinalResult.Rows.Add(drMergedRow)

            drMergedRow = dtFinalResult.NewRow()

        End If

        For intColumnCursor As Integer = 0 To (dtFinalResult.Columns.Count - 1)

            'Don't overwrite values.
            If Not dr.Item(intColumnCursor) Is DBNull.Value Then

                drMergedRow.Item(intColumnCursor) = dr.Item(intColumnCursor)

            End If

        Next

    Next

    dtFinalResult.Rows.Add(drMergedRow) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T19:11:58.273

使用 datatable.columns.add - 请参阅[http://msdn.microsoft.com/en-us/library/hfx3s9wd.aspx#Y166](http://msdn.microsoft.com/en-us/library/hfx3s9wd.aspx#Y166)

下面是未经测试的代码，可能无法编译，但想法是遍历所有数据表并将列添加到一个大数据表中。

```
Dim HugeDT as new datatable

For dt as datatable in FinalDS.DataTables
    For col as datacolumn in dt.Columns
        HugeDT.columns.add (col)
    Next
    'Run a loop on rows of each datatable to copy over the rows.
    'Remember to correlate the recordpointer correctly for each iteration
Next 
```

# iphone - UITableView 在 reloadData 后自动向下滚动

> ID：10047434
> 
> 赞同：6
> 
> 时间：2012-04-06T18:12:04.910
> 
> 标签：iphone, ios, ipad, uitableview

我的 iPad 应用程序（OS X 10.7.3、Xcode 4.3.2）中有一个表格视图会自动向下滚动一点，但不确定在哪里寻找原因。情况如下：

UITableView 填满了整个屏幕，大部分单元格都是固定高度的单元格。一个例外是包含 UITextView 的单元格，并且具有动态高度（或者换句话说，单元格的高度会调整以适应文本量）。

如果表格碰巧在表格视图位于顶部时切断了动态高度单元格，则问题就会显现出来。当视图首次加载时，表格正常绘制，只有部分 UITextView 单元格可见。但是，如果我显示一个 UIPopoverController，我需要在弹出框被解除后执行 reloadData，当我这样做时，表格视图将向下滚动以显示所有 UITextView。（注意不是包含 UITextView 的单元格，只是 UITextView。该表格是一个分组表格，并且 UITextView 单元格是该部分中唯一的单元格，因此在此幻像滚动后，圆形底部边缘仍然不可见。）

我在我的应用程序中看不到任何滚动表格视图或设置内容偏移量的代码，所以我完全不知道是什么原因造成的。

为了尝试缩小范围，我设置了我的视图来尊重 UIScrollViewDelegate，如果我在 scrollViewDidScroll: 方法中放置一个断点，程序实际上会在弹出框消失后停止并给我以下回溯：

```
(lldb) bt
* thread #1: tid = 0x1f03, 0x0005245f MyApp`-[ContactDisplayViewController scrollViewDidScroll:] + 31 at ContactDisplayViewController.m:1143, stop reason = breakpoint 3.1
    frame #0: 0x0005245f MyApp`-[ContactDisplayViewController scrollViewDidScroll:] + 31 at ContactDisplayViewController.m:1143
    frame #1: 0x017e3494 UIKit`-[UIScrollView setContentOffset:] + 521
    frame #2: 0x0180804d UIKit`-[UITableView setContentOffset:] + 334
    frame #3: 0x017d495e UIKit`-[UIScrollViewScrollAnimation setProgress:] + 523
    frame #4: 0x0183d234 UIKit`-[UIAnimator(Static) _advance:] + 255
    frame #5: 0x02c013a3 GraphicsServices`HeartbeatTimerCallback + 35
    frame #6: 0x023278c3 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 19
    frame #7: 0x02328e74 CoreFoundation`__CFRunLoopDoTimer + 1220
    frame #8: 0x022852c9 CoreFoundation`__CFRunLoopRun + 1817
    frame #9: 0x02284840 CoreFoundation`CFRunLoopRunSpecific + 208
    frame #10: 0x02284761 CoreFoundation`CFRunLoopRunInMode + 97
    frame #11: 0x02bfe1c4 GraphicsServices`GSEventRunModal + 217
    frame #12: 0x02bfe289 GraphicsServices`GSEventRun + 115
    frame #13: 0x017a4c93 UIKit`UIApplicationMain + 1160
    frame #14: 0x0000263d MyApp`main + 125 at main.m:14 
```

如果我在该方法中打印出 scrollView，它表明 UITableView 正在运动（不确定 contentOffset 来自哪里）：

```
Printing description of scrollView:
<UITableView: 0xc3ed400; frame = (0 99; 383 817); clipsToBounds = YES; 
autoresize = W+RM+H; layer = <CALayer: 0x7bf1a40>; contentOffset: {0, 14}> 
```

这种幻像滚动显示在设备和模拟器上，以及 iOS 4.3、5.0 和 5.1 中。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:43:07.977

我模糊地记得以前听过这件事。由于[UITableViews](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)是[UIScrollView](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIScrollView_Class/Reference/UIScrollView.html)的子类，[UITextViews](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextView_Class/Reference/UITextView.html)也是如此，所以它可能会变得混乱。

猜测也许尝试在重新加载之前更改 TextView 上的某些属性，例如禁用滚动？

```
[myTextView setScrollEnabled:NO]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T20:18:58.500

当 UITextView 变为FirstResponder 时（我相信从 iOS 3 开始），如果它位于 UIScrollView/UITableViewController 内，iOS 将自动滚动该滚动视图以确保 UITextView 可见。

有关解决方法，请查看：[当 UITextField 成为第一响应者时禁用 UIScrollView 滚动](https://stackoverflow.com/questions/4585718/disable-uiscrollview-scrolling-when-uitextfield-becomes-first-responder)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-06T17:31:11.973

我对子类进行了子类化`UIScrollView`（在我的情况下是 subclassed `UITextField`）并确保我不接受“任意”内容偏移：

```
override var contentOffset: CGPoint {
    set {
        let maxContentOffsetY = max(self.contentSize.height - self.frame.size.height, 0.0)
        super.contentOffset.y = min(newValue.y, maxContentOffsetY)
    }
    get {
        return super.contentOffset
    }
} 
```

# css - IE9 无法使用浮动元素正确计算宽度

> ID：10047435
> 
> 赞同：0
> 
> 时间：2012-04-06T18:12:07.000
> 
> 标签：css, internet-explorer-9, width, css-float

当我创建一个宽度为 100px 的 div 容器并放置 2 个 div 元素时，一个向左浮动，另一个向右浮动，边框为 2px，宽度为 46px，它们应该并排绘制在同一行上覆盖父容器的整个宽度。这发生在 Firefox 和 Chrome 中，但 IE9 将它们绘制在单独的行上，为了具有与其他浏览器相同的效果，我需要在父元素中指定 102px 的宽度。这是为什么？

这是代码：

```
<html>

<head>

<style>

div {
margin:0;
padding:0;
}

</style>

</head>

<body>

<div style="border: 5px solid;width:100px;height:100px">

<div style='border:2px solid green;width:46px;height:46px;float:left'></div>

<div style='border:2px solid 
green;width:46px;height:46px;float:right'></div>
<div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T11:48:04.370

就个人而言，我宁愿使用花车也不愿使用`display: inline-block`花车。

`<div>`无论如何，问题的最可能原因是两个元素之间的空白。它可能会降低第二个。尝试删除它（即。`<div...>...</div><div...>...</div>`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:15:32.573

好的，我找到了解决问题的方法。

你需要做的是你必须添加 Doctype 声明，例如：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd"> 
```

这似乎不是因为 ie 盒子模型错误[http://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug](http://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug) 因为这种行为会导致更小的元素......我真的很困惑......

# javascript - 验证 javascript 中的 URL 信息

> ID：10047436
> 
> 赞同：1
> 
> 时间：2012-04-06T18:12:09.370
> 
> 标签：javascript, validation

我正在尝试验证以下脚本生成的输出。正在通过代理解析信息，该代理具有正确编码的所有信息（例如 & 是 &）但是当我使用 W3 验证器时，我得到以下信息

> & 没有开始字符引用。（& 可能应该转义为 &。）…://www.youtube.com/watch?v=pgALxO5r7_0&feature=youtube_gdata_player" class="wa…</p>

我试过但没有成功找出代理和输出之间出了什么问题。任何帮助，将不胜感激。我认为问题出在

> src: 转义($(this).find('link').text()),

完整来源：

```
<script type="text/javascript">
$(document).ready(function() {
    projekktor('#player_a', {
    useYTIframeAPI: false,
    width: 730,
    height: 452,
    plugin_display: {
        logoImage: "includes/images/transIcon.png"
    },
    controls: true,
    playlist: [{0:{src:'includes/proxy.php?url=http://gdata.youtube.com/feeds/base/users/SkiBsandDXL/uploads?alt=rss&amp;v=2&amp;orderby=published', type:"text/xml"}}],
    reelParser: function(xmlDocument) {
        var result = {};
        var regMatch = new RegExp("http:[^ ,]+\.jpg");  
        result['playlist'] = [];
        $(xmlDocument).find("item").each(function() {
        try {
            result['playlist'].push({
            0:{
                src: escape( $(this).find('link').text()),          
                type: 'video/youtube'
            },
            config: {
                poster: regMatch.exec(unescape( $(this).find('description').text())),
                title: $(this).find('title').text(),
                desc: $(this).find('description').text()
            }
            });
        } catch(e){}
        });
        return result;
    } 
    });
 });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:55:51.167

我将在这里进行一些疯狂的猜测：

猜测一个是您正在使用`XHTML doctype`. 除非您知道`XHTML`与`HTML`then 使用`HTML`. `HTML 4.01 strict`或`HTML5`。

同样，根据我的猜测，您`XHTML`的脚本元素的内容需要是`CDATA`. 这是不使用的足够理由`XHTML`。

如果您必须使用 XHTML，那么要么放入 CDATA 包装器，要么将您的脚本置于外部。无论如何，将脚本放在外部总是一个好主意。

# javascript - Javascript MIME

> ID：10047439
> 
> 赞同：2
> 
> 时间：2012-04-06T18:12:31.930
> 
> 标签：javascript, mime-types

我想知道使用 application/javascript 或 application/ecmascript 是否更好，我是否应该使用 application/languagename 而不是 text/languagename 和其他语言。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T18:31:57.593

正式地，IANA（[官方 MIME 类型注册表](http://www.iana.org/assignments/media-types/index.html)的维护者）列出`text/javascript`并`text/ecmascript`已过时（通过[RFC 4329](http://www.rfc-editor.org/rfc/rfc4329.txt)）。

在这两个中，它最容易使用`application/javascript`。的使用`application/ecmascript`带来了更严格的字符编码要求和 4329 中指定的更宽松的错误处理。

实际上，如果您希望它[在 IE 中工作，您](https://stackoverflow.com/q/1288263/201952)*必须*使用它。`text/javascript`

另外，我的建议是完全跳过标签的`type`属性。`<script>`每个浏览器都可以正常运行您的 JS。`Content-Type`（不过，您仍然需要使用 HTTP来提供 .js 文件`text/javascript`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:39:26.197

Douglas 曾多次写道，他更喜欢没有属性的纯脚本标签。争论是这样的：

“这个脚本块使用语言属性。这是微软为了支持 VBScript 而引入的一个特性。网景随后采用它来支持自己的非标准偏差。W3C 没有采用语言属性，而是采用类型属性一种 MIME 类型。不幸的是，MIME 类型没有标准化，所以有时它是“ `text/javascript`”或“ `application/ecmascript`”或其他东西。
幸运的是，所有浏览器都会选择 JavaScript 作为默认编程语言，所以最好简单地编写`<script>`。是最小的，它适用于大多数浏览器。”

参考：[JavaScript 风格的元素 - 第 1 部分](http://javascript.crockford.com/style1.html)

# javascript - 未调用 FB.ui 回调 / FB.ui 流永远发布加载

> ID：10047442
> 
> 赞同：0
> 
> 时间：2012-04-06T18:12:44.237
> 
> 标签：javascript, facebook, facebook-javascript-sdk

当与 FB JS API 一起使用时，这个最近运行良好的代码不再正常工作：

```
placeOrder : function(order_info) {
  var onOrderPlaced = function(data) {
    if (data['order_id'] && data['status'] == 'settled') {

      window.FLASH.flashObject.artifactAdded(order_info);

      return true;
    } else {
      // handle errors here
      return false;
    }
  };

  window.fbAsyncInit();

  // calling the payment dialog
  try {
    FB.ui({
      method : 'pay',
      order_info : order_info,
      purchase_type : 'item',
      dev_purchase_params : {
        'oscif' : false
      }
    }, onOrderPlaced);
  } catch (err) {
    // TODO handle payment error
  }
} 
```

订单发生并被完美处理，但之后没有发生什么，就像几天一样，回调函数 onOrderPlaced 在付款完成时永远不会被调用。正如我所说，几天前这个功能可以完美运行。

我遇到的另一个问题是使用 stream.publish 方法提示 FB.ui。我所看到的只是 iframe 和其中的加载动画，它需要很长时间。几天前完美运行的另一个功能。现在它不工作了。有人遇到同样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:16:37.210

关于：“我遇到的另一个问题是使用 stream.publish 方法提示 FB.ui。我所看到的只是 iframe 和其中的加载动画，它需要很长时间”

是的，从昨天开始我遇到了同样的问题。我不知道可以是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T21:07:55.043

我们遇到了同样的问题，我们的 FB.ui JS 回调最近停止工作。正如 Edwin 的链接问题中所建议的，我们将服务器切换到在端口 80 上运行，并且再次调用回调。我已经向 Facebook 提交了一个错误。感谢您提供链接的答案 - 我们对这种行为感到非常困惑！

# tcp - 我的 Arduino + Ethernet shield WebServer 草图有时无法连接到客户端。原因？

> ID：10047445
> 
> 赞同：1
> 
> 时间：2012-04-06T18:13:07.680
> 
> 标签：tcp, arduino, ethernet

我的 Arduino Web 服务器草图偶尔会失败：

```
 EthernetClient client = server.available();
 if (client) 
```

今天早上，它在第一次运行时连接得很好。现在，它无法再次连接到客户端。几天前，它工作了几次，但也失败了几次。我通过以太网电缆将屏蔽连接到我的家庭路由器。我已经验证了分配给 Arduino 的 IP 地址。我已经尝试了端口 80 和 8080。可能出了什么问题，我还能尝试什么？我的 ISP 会在这里阻止某些东西吗？请不要害怕提出显而易见的建议，因为我对网络几乎一无所知。

如果相关，这里是一段较大的代码，它循环

```
Serial.println("Listening"); 
```

代码：

```
#include <SPI.h>
#include <Ethernet.h>n

// Enter a MAC address and IP address for your controller below.
// The IP address will be dependent on your local network:

byte mac[] = { 0x90, 0xA2, 0xDA, 0x00, 0xF7, 0x99 };
IPAddress ip(192,168,2,5);

// Initialize the Ethernet server library
// with the IP address and port you want to use
// (port 80 is default for HTTP):
EthernetServer server(80);

String roundOpenTag = "";
String roundCloseTag = "";

void setup()
{
    // Start the Ethernet connection and the server:
    Ethernet.begin(mac, ip);
    server.begin();

    int ledPin = 8;
    // Initialize the digital pin as an output.
    pinMode(ledPin, OUTPUT);
    Serial.begin(9600);
    Serial.println("Setting up");
}

void loop()
{
    // Listen for incoming clients
    EthernetClient client = server.available();
    Serial.println("Listening");
    if (client)
    {
        Serial.println("Server available");
        // An HTTP request ends with a blank line
        boolean currentLineIsBlank = true;
        while (client.connected()) {
            Serial.println("Client connected");
            if (client.available())
            {
                char c = client.read(); 
```

我看不出包含草图的其余部分的目的。我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T06:12:08.577

您的 setup() 函数中有一个空的 Seiral.begin() 。尝试删除它。

**编辑**：

当您调用 Serial.begin() 时，您必须提供您想要通信的波特率（速度）。[您可以在Arduino library page](http://arduino.cc/en/Serial/Begin)阅读有关该功能的更多信息。

您的代码中有两个问题

*   你有一个空的 Serial.begin() 函数调用，没有任何参数
*   你有重复的 Serial.begin() 函数。您已经在 setup() 函数的开头指定了它。

# javascript - 如何通过 express.bodyParser() 和 response.write() 使用 node-formidable

> ID：10047446
> 
> 赞同：0
> 
> 时间：2012-04-06T18:13:09.903
> 
> 标签：javascript, node.js, socket.io, express

我正在使用 node-formidable 上传 multipart/formdata 。只要我一切正常

评论这一行：

```
//app.use(express.bodyParser()); 
```

但问题是我想在客户端实现一个进度条。为此，我正在尝试做这样的事情：

```
form.on('progress',function(a,b){
 response.write() //Gives error saying Can't set headers after they have been sent
}) 
```

当我使用 express bodyParser() res.write() 时效果很好。

PS：我知道这可以使用 socket.io 来完成，但我认为这不是一个优雅的解决方案。

有没有办法使用 response.write() 并同时使用 formidable ？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:56:54.270

使用正文解析器，您应该能够将“数据”事件绑定到 req 对象，然后使用 res.write() 写入 res 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T07:40:23.483

我认为您为该请求发送了两次响应。你不能简单地在节点中做到这一点。解决方法很少。我建议你阅读这两个答案。它可能会有所帮助。

[如何使用 ExpressJS 在同一个响应对象上多次渲染？](https://stackoverflow.com/questions/8607517/how-to-render-multiple-times-on-the-same-response-object-with-expressjs)

[我可以通过 Node.js 向客户端发送多个响应吗？](https://stackoverflow.com/questions/7800114/can-i-send-multiple-responses-via-node-js-to-the-client)

# javascript - 在 Ember.js 中绑定到嵌套模型

> ID：10047447
> 
> 赞同：1
> 
> 时间：2012-04-06T18:13:26.267
> 
> 标签：javascript, ember.js

我有以下模型：

```
App.Checklist = DS.Model.extend({
  name: DS.attr('string'),
  checkitems: DS.hasMany('App.Checkitem', { embedded: true }),

  remainingItemsCount: function() {
    var checkitemsToCount = this.get('checkitems');
    return checkitemsToCount.filterProperty('isDone', false).get('length');
  }.property()

}); 
```

我想显示一个清单列表，其中包含每个列表的当前检查项的计数。

如果我将以下内容放入模板中，我会得到正确的输出：

```
{{#each checklists}}
  {{this.name}}
  {{this.remainingItemsCount}}
{{/each}} 
```

但是，如果将新的检查项添加到检查表中，则计数不会增加。

但是，如果我更改`remainingItemsCount`Checklist 模型中的计算属性以使其依赖于`checkitems.@each.done`，那么计数会随着新检查项的添加而增加。

问题是，一旦添加了这个依赖项，子检查项的集合就是错误的——它不断重复第一个检查项的总检查项数（即，如果有五个项目的 'isDone' 为假，四个'isDone' 为真，则列表计数将显示为 9，第一个检查项将重复 9 次）。

我究竟做错了什么？

**更新：**

事实证明，将依赖项添加到 remainingItemsCount 属性会导致 ember-data 对服务器进行新的调用。

如果没有依赖关系，则在页面加载时会发出以下 XHR 请求：

```
GET http://localhost:3000/checklists 
```

使用依赖项，在页面加载时会发出以下 XHR 请求：

```
GET http://localhost:3000/checklists
GET http://localhost:3000/checkitems 
```

最后一个请求带有以下参数，这些参数似乎是第一个检查项的表示，包装在“ids”哈希中：

```
{"ids"=>
  {"0"=>
    {"id"=>"182",
     "checklist_id"=>"4",
     "title"=>
      "Make sure list count automatically increments",
     "is_done"=>"false"}},
 "action"=>"index",
 "controller"=>"checkitems"} 
```

我想知道这是否是因为`checkitem`模型是使用 belongsTo 属性定义的？

```
App.Checkitem = DS.Model.extend({
  title: DS.attr('string'),
  isDone: DS.attr('boolean'),
  checklist: DS.belongsTo('App.Checklist')
}); 
```

**更新 2**

我仍然不确定为什么，但很明显，将依赖项添加到属性中，如下所示......

```
remainingItemsCount: function() {
    var checkitemsToCount = this.get('checkitems');
    return checkitemsToCount.filterProperty('isDone', false).length;
}.property('checkitems.@each.isDone').cacheable() 
```

...导致 ember-data 的内置 DS.RESTAdapter 调用 findMany。findMany 请求应该接受一个 id 数组，而是将一个包含一个完整检查项对象的数组传递给它，该数组嵌套在一个散列中，键为 0。

**解决方案**

最后，我将问题追溯到 ember-data 深处的以下观察者：

```
dataDidChange: Ember.observer(function() {
    var associations = get(this.constructor, 'associationsByName'),
        data = get(this, 'data'), store = get(this, 'store'),
        idToClientId = store.idToClientId,
        cachedValue;

    associations.forEach(function(name, association) {
      if (association.kind === 'hasMany') {
        cachedValue = this.cacheFor(name);

        if (cachedValue) {
          var ids = data.get(name) || [];
          var clientIds = Ember.ArrayUtils.map(ids, function(id) {
            return store.clientIdForId(association.type, id);
          });

          set(cachedValue, 'content', Ember.A(clientIds));
          cachedValue.fetch();
        }
      }
    }, this);
  }, 'data') 
```

当观察者到达 line`return store.clientIdForId(association.type, id)`时，该数组`ids`是一个 checkitem 对象数组，而不是一个 id 整数数组。修复非常简单：`return store.clientIdForId(association.type, id.id)`返回一个 id 整数数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T20:46:51.397

我根据您的描述创建了一个 JSFiddle，但无法重现您的问题。我正在使用 Ember.js 0.9.6 和最新版本的 ember-data，请参阅[http://jsfiddle.net/pangratz666/dGjyR/](http://jsfiddle.net/pangratz666/dGjyR/)

**车把**：

```
<script type="text/x-handlebars" data-template-name="checklist" >
    {{#each checklists}}
      {{this.name}}
      remaining: {{this.remainingItemsCount}}
      {{#each checkitems}}
        {{view Ember.Checkbox valueBinding="isDone"}}
      {{/each}}
      <a {{action "addCheckitem"}} class="clickable">add item</a>
      <hr/>
    {{/each}}

</script>​ 
```

**JavaScript**：

```
App = Ember.Application.create({});

App.Checkitem = DS.Model.extend({
    isDone: DS.attr('boolean')
});

App.Checklist = DS.Model.extend({
    name: DS.attr('string'),

    checkitems: DS.hasMany('App.Checkitem', {
        embedded: true
    }),

    remainingItemsCount: function() {
        var checkitemsToCount = this.get('checkitems');
        return checkitemsToCount.filterProperty('isDone', false).get('length');
    }.property('checkitems.@each.isDone').cacheable()
});

App.store = DS.Store.create({
    revision: 4
});

App.checklistsController = Ember.ArrayProxy.create({
    content: App.store.find(App.Checklist)
});

Ember.View.create({
    templateName: 'checklist',
    checklistsBinding: 'App.checklistsController',
    addCheckitem: function(evt) {
        var checklist = evt.context;
        checklist.get('checkitems').addObject(App.Checkitem.createRecord({
            isDone: false
        }));
    }
}).append();

var checklist = App.Checklist.createRecord({
    name: 'firstChecklist'
});

App.Checklist.createRecord({
    name: 'secondChecklist'
});

checklist.get('checkitems').addObject(App.Checkitem.createRecord({
    isDone: false
}));
checklist.get('checkitems').addObject(App.Checkitem.createRecord({
    isDone: true
}));
checklist.get('checkitems').addObject(App.Checkitem.createRecord({
    isDone: true
}));​ 
```

# c++ - 为什么gcc不能内联可以确定的函数指针？

> ID：10047448
> 
> 赞同：10
> 
> 时间：2012-04-06T18:13:33.070
> 
> 标签：c++, gcc

以下程序在 gcc 4.6.2 下使用 -O3 在 centos 上编译：

```
#include <iostream>
#include <vector>
#include <algorithm>
#include <ctime>
using namespace std;

template <typename T>
class F {
public:
     typedef void (T::*Func)();

     F(Func f) : f_(f) {}

     void operator()(T& t) {
         (t.*f_)();
     }
private:
     Func f_;
};

struct X {
    X() : x_(0) {}

    void f(){
        ++x_;
    }

    int x_;
};

int main()
{
     const int N = 100000000;
     vector<X> xv(N);
     auto begin = clock();
     for_each (xv.begin(), xv.end(), F<X>(&X::f));
     auto end = clock();
     cout << end - begin << endl;
} 
```

`objdump -D`显示为循环生成的代码是：

```
 40097c:       e8 57 fe ff ff          callq  4007d8 <clock@plt>
  400981:       49 89 c5                mov    %rax,%r13
  400984:       0f 1f 40 00             nopl   0x0(%rax)
  400988:       48 89 ef                mov    %rbp,%rdi
  40098b:       48 83 c5 04             add    $0x4,%rbp
  40098f:       e8 8c ff ff ff          callq  400920 <_ZN1X1fEv>
  400994:       4c 39 e5                cmp    %r12,%rbp
  400997:       75 ef                   jne    400988 <main+0x48>
  400999:       e8 3a fe ff ff          callq  4007d8 <clock@plt> 
```

显然 gcc 没有内联函数。为什么 gcc 不能进行这种优化？是否有任何编译器标志可以使 gcc 进行所需的优化？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T15:41:12.440

我认为，GCC 试图优化整个`main`函数，但失败了（大量间接调用全局函数来为 分配/释放内存`xv`、获取计时器值、输入/输出等）。因此，您可以尝试将代码拆分为两个（或更多）独立部分，如下所示：

```
inline
void foobar(vector<X>& xv)
{
  for_each (xv.begin(), xv.end(), F<X>(&X::f));
}

int main()
{
  const int N = 100000000;
  vector<X> xv(N);
  auto begin = clock();
  foobar(xv);
  auto end = clock();
  cout << end - begin << endl;
} 
```

所以，现在我们有了和以前一样的“等效”代码，但是 GCC 的优化器现在更容易完成任务。我`ZN1X1fEv`现在在汇编列表中看不到任何调用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-17T22:49:23.650

一些很好的阅读材料是 Scott ~~Adams~~ Meyers 的 Effective C++（第三版）第 30 条：了解内联的来龙去脉，他声称对函数指针的调用永远不会内联。第三版于 2008 年发布，我确实能够让 gcc 从 2011 年（可能是 2010 年？）发布的 gcc 4.6 开始通过 compile-time-constant-pointer 进行内联函数调用。但是，这是在 C 中的，并且很棘手。在一种情况下，我必须在调用函数`__attribute__((flatten))`内联调用之前声明调用函数（在这种情况下，我将函数指针作为结构的成员传递，然后我将谁的指针传递给一个内联函数，该函数通过内联的指针）。

所以简而言之，不，这不是 gcc 的错误，但这并不意味着 gcc（和/或其他编译器）有一天可能无法内联。但我认为真正的问题是你不明白这里到底发生了什么。要获得这种理解，您必须更像汇编程序员或编译器程序员那样思考。

您正在传递一个类型的对象`F<X>`并使用指向另一个类的成员函数的指针对其进行初始化。您尚未将实例`F<X>`对象声明为常量，它的`Func f_`成员是常量，您的成员也不`void F::operator()(T& t)`是常量。在 C++ 语言级别，编译器必须将其视为非常量。这仍然不意味着它不能在以后的优化阶段确定你的函数指针没有改变，但你在这一点上让它变得非常困难。但至少它是本地的。如果您的`F<X>`对象是全局对象且未声明`static`，则它将完全禁止将其视为常量。

希望您在通过函数指针内联的练习中执行此操作，而不是作为间接的真正解决方案。当您希望 C++ 制作真正的性能产品时，您可以使用类型的力量。具体来说，当我将模板参数声明为成员函数指针时，它不仅仅是一个常量，它还是类型的一部分。我从未见过这种技术生成函数调用的情况。

```
#include <iostream>
#include <vector>
#include <algorithm>
#include <ctime>
using namespace std;

template <typename T, void (T::*f_)()>
class F {
public:
     void operator()(T& t) {
         (t.*f_)();
     }
};

struct X {
    X() : x_(0) {}

    void f(){
        ++x_;
    }

    int x_;
};

int __attribute__((flatten)) main()
{
     const int N = 100000000;
     vector<X> xv(N);

     auto begin = clock();
     for_each (xv.begin(), xv.end(), F<X, &X::f>());
     auto end = clock();
     cout << end - begin << endl;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-17T02:58:41.180

您可以添加`inline __attribute__((__always_inline__))`到您的函数中，并`-Winline`标记到编译器，因此当编译器无法内联函数时您会注意到。

不幸的是，属性不会使您的函数内联，也`Winline`不会发出警报。直到 4.8。但！！！从 4.9 开始，此问题似乎已修复！

所以，抓住你的 gcc 4.9，添加 always_inline 标志，将优化器设置为 -O3 级别。而且要快乐！

证明：http: [//goo.gl/kkuXzb](http://goo.gl/kkuXzb)

# php - PHP - 如何读取私有 XML 文件？

> ID：10047449
> 
> 赞同：2
> 
> 时间：2012-04-06T18:13:34.877
> 
> 标签：php, xml, permissions, simplexml

我在“域 1”上有一个脚本，它在“域 2”上的 XML 文件上执行 simplexml_load_file，如下所示：

```
$url = 'domain2.com/file.xml';
$xml  = simplexml_load_file($url);

$xmlEmail = $xml->xpath("//users/user/email");
$userEmail = implode(", ", (array) $xmlEmail); 
```

但是，此 XML 文件包含有关用户的私人信息。我不希望它可以直接访问。域 2 也会因用户而异，所以恐怕我无法按实际域或 IP 进行过滤。

**是否可以设置权限以使其无法被公众访问，但仍然可以通过 simplexml 调用以某种方式读取？也许有任何替代方法？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:16:20.347

将以下内容添加到您的`.htaccess`文件中，该文件与以下文件位于同一文件夹中`file.xml`：

```
<Files file.xml>
    Order Deny,Allow
    Deny from all
    Allow from domain2.com
</Files> 
```

这将告诉您的 Web 服务器禁用对该文件的访问，除非请求来自`domain2.com`.

更新：

根据楼主所说的问题，这个xml文件会被不同的域访问。在这种情况下，我可能想到的唯一合理的选择是密码。*galymzhan*已经提供了答案，但我会尝试扩展他的答案并提供一个可行的解决方案。

将以下内容添加到您的`.htaccess`文件中，该文件与以下文件位于同一文件夹中`file.xml`：

*.htaccess*

```
<Files file.xml>
    AuthType Basic
    AuthName "Protected Access"
    AuthUserFile /full/path/to/.htpasswd
    Require valid-user
</Files> 
```

请注意，不需要对服务器进行 shell 访问。您可以通过 ftp 上传`.htpasswd`文件，并更改其权限，使其不会被 Web 服务器组读取/写入。

有关密码保护的更多信息以及一些示例，请参见[此处](http://www.elated.com/articles/password-protecting-your-pages-with-htaccess/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T18:25:05.853

在“域 2”上为您的 Web 服务器设置 HTTP 基本身份验证。像这样更改 XML 文件的 url：

```
$url = 'http://my_username:my_password@domain2.com/file.xml';
$xml  = simplexml_load_file($url); 
```

[Apache 的 mod_auth_basic](http://httpd.apache.org/docs/2.2/mod/mod_auth_basic.html)

# css - 为什么我的文本不能在我的内部正确对齐 元素？

> ID：10047451
> 
> 赞同：0
> 
> 时间：2012-04-06T18:13:46.983
> 
> 标签：css, html-lists, alignment

我一直在摆弄这个几个小时。我无法让我的文本在 25px a 元素内垂直对齐。文本总是想坐在彩色“盒子”的每个顶部。我只想要它在垂直的中间。此外，这个问题在我的所有列表中都被继承了。

```
#nav ul li.cat:nth-child(1) > a {
    background-color: #647484;
}

#nav ul li a {
    color: #FFFF00;
    display: block;
    font-size: 1em;
    height: 25px;
    padding-left: 30px;
    text-decoration: none;
    width: 137px;
} 
```

HTML

```
<div id="nav">
<ul>
<li class="cat">
<a href="http://localhost/country/index.php/welcome/cat/19">Beef</a>
<ul>
<li class="subcat">
<a href="http://localhost/country/index.php/welcome/cat/21">Ribs</a>
</li>
</ul>
<ul>
<li class="subcat">
<a href="http://localhost/country/index.php/welcome/cat/30">Steaks </a>
</li>
</ul>
</li>
<li class="cat">
<a href="http://localhost/country/index.php/welcome/cat/19">Beef</a>
<ul>
<li class="subcat">
<a href="http://localhost/country/index.php/welcome/cat/21">Ribs</a>
</li>
</ul>
<ul>
<li class="subcat">
<a href="http://localhost/country/index.php/welcome/cat/30">Steaks </a>
</li>
</ul>
</li> <!-- etc etc -->
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:16:53.627

你的 line-height 小于你的 box 的高度，所以当它实际上只是占用它应该占用的空间时，它看起来像与顶部对齐。尝试`line-height: 25px`根据您的身高进行设置。

[请参阅 jsFiddle。](http://jsfiddle.net/c5gGj/4/)

# printing - 在 Play Framework 上打印表单

> ID：10047452
> 
> 赞同：0
> 
> 时间：2012-04-06T18:13:49.293
> 
> 标签：printing, playframework

我正在开发一个网络应用程序，使用 Play 框架和 javascript，但我不知道如何打印表单（即发票）。我认为它必须在 Javascript 上实现。但在网上阅读，我没有找到任何东西。我现在正在搜索实现是否在服务器端（Java），但我不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:17:10.370

这是一个非常奇怪的问题，你在这里，我可能不明白..

你是什​​么意思“打印表格”？！

从您最喜欢的浏览器**打印页面**怎么样？

一定是遗漏了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T16:48:54.323

以 pdf 格式呈现发票怎么样？如果您有兴趣做类似的事情，请检查此模块：

[http://www.playframework.org/modules/pdf](http://www.playframework.org/modules/pdf)

我认为这是最好的解决方案，这也是大多数公司所做的。希望对您有所帮助

# python - Django EmailMessage.send() 返回 0。这是什么意思？

> ID：10047454
> 
> 赞同：2
> 
> 时间：2012-04-06T18:14:13.130
> 
> 标签：python, django, email, send

我在 settings.py 中有以下代码

```
#EMAIL_USE_TLS = True
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_HOST_USER = 'sender@gmail.com'
EMAIL_HOST_PASSWORD = 'password'
EMAIL_PORT = 687 
```

（我尝试使用 TLS = True 和使用端口 25、567、465、687 的端口，还尝试了来自 MX 记录的 smtp.gmail.com 和其他 HOSTS，但我总是遇到连接被拒绝）

然后我尝试使用端口 687 并评论 TLS = True。我得到以下代码的返回值“0”

```
from django.core.mail import EmailMessage
email = EmailMessage('Subject', 'Body', 'me@gmail.com')
email.send() 
```

我的收件箱里没有收到任何邮件。0 是什么意思？我究竟做错了什么 ？

任何帮助，将不胜感激，

谢谢，

潘卡伊。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T18:51:16.053

如果您没有指定任何收件人（收件人、密件抄送、抄送），EmailMessage 将返回 0。如果您没有收件人，则 EmailMessage.send 返回 0。

此外，Google 的默认 smtp 端口是 587。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-13T12:14:42.237

如果电子邮件发送配置为使用 send_mass_mail 静默失败。然后一个错误可能会导致返回 0 个发送的消息。在这种情况下，您可能希望打开调试以查看实际错误或将发送配置为灾难性失败以揭示导致电子邮件未发送的原因。您必须检查您正在使用的电子邮件后端，因为不同的后端在输入时的行为会有所不同，尤其是在不同的后端用于测试和开发的情况下

# ruby-on-rails-3 - 照片廊 模特协会

> ID：10047461
> 
> 赞同：0
> 
> 时间：2012-04-06T18:14:47.187
> 
> 标签：ruby-on-rails-3, model-associations

我正在尝试为每个用户设置一个照片库。我将如何建立协会？

```
class User < ActiveRecord::Base
  has_many :photos
  has_many :galleries, through :photos
end

class Gallery < ActiveRecord::Base
  has_many :photos
  belongs_to :user
end

class Photo < ActiveRecord::Base
  belongs_to :gallery
  belongs_to :user
end 
```

我有画廊和照片模型目前正在工作。您可以创建图库并向其中添加照片。我很困惑的是如何将它添加到当前用户？

```
class GalleriesController < ApplicationController
def index
  @galleries = Gallery.all
end

def show
  @gallery = Gallery.find(params[:id])
end

def new
  @gallery = Gallery.new
end

def create
  @gallery = Gallery.new(params[:gallery])
  if @gallery.save
    flash[:notice] = "Successfully created gallery."
    redirect_to @gallery
  else
    render :action => 'new'
  end
end

def edit
  @gallery = Gallery.find(params[:id])
end

def update
  @gallery = Gallery.find(params[:id])
  if @gallery.update_attributes(params[:gallery])
    flash[:notice] = "Successfully updated gallery."
    redirect_to gallery_url
  else
    render :action => 'edit'
  end
  end

def destroy
  @gallery = Gallery.find(params[:id])
  @gallery.destroy
  flash[:notice] = "Successfully destroyed gallery."
  redirect_to galleries_url
end 
```

结尾

照片控制器

```
class PhotosController < ApplicationController
def new
  @photo = Photo.new(:gallery_id => params[:gallery_id])
end

def create
  @photo = Photo.new(params[:photo])
  if @photo.save
    flash[:notice] = "Successfully created Photo."
    redirect_to @photo.gallery
  else
    render :action => 'new'
  end
end

def edit
  @photo = Photo.find(params[:id])
end

def update
  @photo = Photo.find(params[:id])
  if @photo.update_attributes(params[:photo])
    flash[:notice] = "Successfully updated Photo."
    redirect_to @Photo.gallery
  else
    render :action => 'edit'
  end
  end

def destroy
  @photo = Photo.find(params[:id])
  @photo.destroy
  flash[:notice] = "Successfully destroyed Photo."
  redirect_to @photo.gallery
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:19:51.720

获取当前用户后，只需将图库连接到用户的图库。

```
def update
  @gallery = Gallery.find(params[:id])
  @user = current_user
   if @gallery.update_attributes(params[:gallery])
    @user.galleries << @gallery
    flash[:notice] = "Successfully updated gallery."
    redirect_to gallery_url
   else
    render :action => 'edit'
   end
 end 
```

# php - 如何在服务器端发生更改时（仅）更新网页

> ID：10047463
> 
> 赞同：1
> 
> 时间：2012-04-06T18:15:10.050
> 
> 标签：php, mysql, html

我有一个简单的 php 页面，显示来自 mysql 数据库的数据。我希望它在服务器上的数据发生更改时自动更新。（我不想以固定的时间间隔定期更新页面。）我想我需要 FB 聊天框或 omegle 背后的技术。但我不知道如何在 php 和 mysql 上实现它。如果你能帮助我，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T18:20:24.007

您需要研究[WebSockets](http://www.websocket.org/)或[Comet 服务器](http://en.wikipedia.org/wiki/Comet_%28programming%29)（使用长轮询技术）来完成推送系统。或者，您可以使用请求标识符和时间戳对服务器进行频繁轮询，而不是使用类似推送的通知，让服务器决定自上次轮询以来是否有任何新内容，如果有，则提供数据是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T18:22:42.883

您可以实现与 Ajax 相反的 Comet 技术。JavaScript Dojo Toolkit 可用于很好地处理此方法。

Dojo WebSocket
[http://dojotoolkit.org/features/1.6/dojo-websocket](http://dojotoolkit.org/features/1.6/dojo-websocket)
[http://cometd.org/](http://cometd.org/)

“Comet 是一种 Web 应用程序模型，其中长期持有的 HTTP 请求允许 Web 服务器将数据推送到浏览器，而无需浏览器明确请求它。”

[http://en.wikipedia.org/wiki/Comet_](http://en.wikipedia.org/wiki/Comet_(programming) （编程））

# javascript - Backbone collection.create() 不返回更新的模型

> ID：10047465
> 
> 赞同：5
> 
> 时间：2012-04-06T18:15:34.633
> 
> 标签：javascript, backbone.js

学习主干我正在创建一个类似 Twitter 的应用程序。所以你知道 Twitter 每 N 秒向服务器发送一个 GET 请求以检查新推文。如果有新推文，它会创建隐藏的*li*元素并显示带有“N 个新推文”的按钮。如果单击它，它会显示隐藏的*li*元素，显示新推文。但是当您添加新推文时，行为会有所不同：推文是可见的。您不必单击按钮即可查看它。

我已经为隐藏的推文制作了第一部分。对于发布新推文并直接显示它的部分，我认为通过创建新模型、调用 collection.create() 并触发正确的事件很容易，例如：

```
var newTweet = new Tweet();
newTweet.set( /* set the attributes here. Some attributes are missing, because they are calculated server side */ );

var created_tweet = this.collection.create( newTweet, { silent: true, wait: true } ); // I choose silent=true because the add event on my collection is in charge of adding the new hidden tweets when there are new ones on the server
this.collection.trigger("posted_new_tweet", created_tweet); 
```

然后，我的收藏订阅了事件“posted_new_tweet”，因此每次用户发布新推文时，都会调用我收藏的特定方法。这种方法工作正常，直到由于触发器中传递的变量 created_comment 而出现错误：它不是“完整的”。我的意思是该模型具有一些未定义的属性，例如*“id”*或 *“created_on”*。这些属性是在服务器端计算的，但我认为如果我通过**wait=true**，它会等待并使用服务器给出的响应更新我的模型（当向服务器发出**POST**请求时，它会返回新创建的模型json)

我的模型不应该也具有服务器端属性吗？这是处理这种事情的正确方法吗？如果不是，我怎样才能有两种不同的方法来显示集合视图？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-06T18:33:08.987

`create`即使你通过了，它仍然是异步的`{ wait: true }`。不同之处在于，没有`wait`模型将立即添加到集合中，而使用`wait`骨干网在服务器成功响应之前不会将其添加到集合中。

您应该做的是添加一个成功回调，以`create`在服务器响应时触发事件。

```
var created_tweet = this.collection.create( newTweet, { silent: true, wait: true, success: this.successCallback } );

// Add successCallback as a method to the collection
successCallback: function(collection, response) {
  // I'm not 100% positive which values are passed to this function. Collection may actually be the new model.
  this.collection.trigger("posted_new_tweet", created_tweet);
} 
```

# .net - SQL Server：等待新行

> ID：10047466
> 
> 赞同：3
> 
> 时间：2012-04-06T18:15:34.777
> 
> 标签：.net, sql-server, database, locking, service-broker

如何等待来自 .NET 客户端应用程序的 SQL Server 表中出现新行？

背景：我想建立一个基于表格的消息队列。我不想使用 Service Broker，因为我希望消息是结构化的和强类型的。使用普通表我也可以与其他表建立关系。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T18:22:10.273

通常的方法是使用轮询，但如果您确实需要即时事件，您可以使用[`SqlDependency`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx)该类在查询结果更改时获取事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T18:23:27.133

您需要投票或获得通知。

轮询将要求客户端使用谓词或 for 定期查询表`count(*)`。这可能不是一个很好的解决方案。

将触发器放在表中并向客户端中的侦听器发送消息可能是一个便宜但有用的通知系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T18:22:12.833

在我们的应用程序中，我们使用 System.Threading.Timer 来轮询数据库表。一旦有新消息可用，它就会被处理。如果处理成功，则从 DB 中删除消息。

# wpf - WPF WrapPanel 在 ViewBox 中的最大尺寸

> ID：10047467
> 
> 赞同：2
> 
> 时间：2012-04-06T18:15:35.487
> 
> 标签：wpf, wrappanel, viewbox

在我的程序中，我在视图框中有一个 WrapPanel。WrapPanel（实际上是 ItemsControl 的 ItemsPanelTemplate）包含一些可以是不同大小的绑定项。

```
<Viewbox Name="ViewWindow" Margin="10">
  <Grid>
    <ItemsControl ItemsSource="{Binding Path=Items}">
      <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
          <WrapPanel Orientation="Vertical" MaxHeight="600"/>
        </ItemsPanelTemplate>
      </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate> 
```

所有这一切的目标是我希望所有项目的大小都适合单个屏幕。Viewbox 通过缩放内容来处理这个问题，使它们都适合。WrapPanel 中的每个项目都是用户定义的文本，因此它们都可以是不同的大小。我试图用 WrapPanel 完成的是屏幕上的结果文本将尽可能大。我一直在通过设置 WrapPanel MaxHeight 来做到这一点，这样如果项目太高，它们就会被包裹到更多的列中，但这是一种很老套的方法，我发现对于不同的项目组，MaxHeight 需要是不同的。

作为我的意思的一个例子，想象 ItemsControl 绑定到的项目只是显示字母表中的每个字母。如果没有任何方法强制将项目包装到多列，您最终会得到一个非常高的列和非常小的文本，但是如果我们设置 WrapPanel 的 MaxHeight，那么我们可以像这样将项目强制到多列并且文本会在屏幕上变大：

```
A    F    K    P    U    Z
B    G    L    Q    V
C    H    M    R    W
D    I    N    S    X
E    J    O    T    Y 
```

我对这一切都错了吗？有没有比 WrapPanel 更好的控件？我需要创建某种自定义面板来获得我想要的吗？

谢谢你尽你所能的帮助

**编辑：**

举一个为什么 UniformGrid 不起作用的例子，假设我有这 5 个项目（每个字母代表一个不同的项目）

```
A    C    E
A    C    E
A    D    E
B    D    E 
```

使用 UniformGrid，所有项目都将采用项目 E 的大小，并且它们都会在屏幕上占据更多空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T18:28:07.587

这是否实现了您正在尝试做的事情：

```
 <ItemsControl ItemsSource="{Binding Path=Items}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <UniformGrid IsItemsHost="True"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl> 
```

使用您的示例字母表，我将其布局如下：

```
A B C D E F
G H I J K L
M N O P Q R
S T U V W X
Y Z 
```

现在，如果将它们按列而不是按行排列对您来说真的很重要，那么这有点棘手。这是让它们按列排列的一种非常老套的方法：

```
<ItemsControl ItemsSource="{Binding Path=Items}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <UniformGrid IsItemsHost="True"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding}">
                        <TextBlock.LayoutTransform>
                            <TransformGroup>
                                <ScaleTransform ScaleX="-1"/>
                                <RotateTransform Angle="-90"/>
                            </TransformGroup>
                        </TextBlock.LayoutTransform>
                    </TextBlock>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
            <ItemsControl.LayoutTransform>
                <TransformGroup>
                    <ScaleTransform ScaleX="-1"/>
                    <RotateTransform Angle="-90"/>
                </TransformGroup>
            </ItemsControl.LayoutTransform>
        </ItemsControl> 
```

我不*认为*你可以告诉一个统一的网格首先排列事物列。

# search - 如何在 Vertica 中搜索 column_names？

> ID：10047469
> 
> 赞同：10
> 
> 时间：2012-04-06T18:15:55.037
> 
> 标签：search, vertica

有人知道在 Vertica 中搜索 column_names 的便捷功能吗？从文档看来，\d 似乎只查询 table_names。我正在寻找类似 MySQL 的 information_schema.columns 的东西，但找不到关于类似元数据表的任何信息。

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-11T23:43:38.920

在 5.1 中，如果您有足够的权限，您可以这样做

```
SELECT * FROM v_catalog.columns; 
```

访问列的信息，对于一些你需要加入的事情

```
v_catalog.tables 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T02:53:53.547

答案可能因您使用的 Vertica 版本而异。

在最新版本 5.1 中，有一个 COLUMNS 系统表。仅从查看在线文档来看，这里似乎是最有用的列及其类型：

```
TABLE_SCHEMA VARCHAR
TABLE_NAME VARCHAR
DATA_TYPE VARCHAR 
```

那应该给你你需要的东西。如果您的版本没有系统表，请告诉我您正在运行的版本，我会看看我们能做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T00:44:44.423

将此 python 脚本包装在 shell 函数中，您将能够看到包含任意两列的所有表： import argparse

```
parser = argparse.ArgumentParser(description='Find Vertica attributes in tables')
parser.add_argument('names', metavar='N', type=str, nargs='+', help='attribute names')
args = parser.parse_args()

def vert_attributes(*names):
    first_name = names[0].lower()
    first = "select root.table_name, root.column_name from v_catalog.columns root "
    last = " where root.column_name like '%s' " % first_name
    names = names[1:]
    if len(names) >= 1:
        return first + " ".join([" inner join (select table_name from v_catalog.columns where column_name like '%s') q%s on root.table_name = q%s.table_name " % (name.lower(), index, index) for index,name in enumerate(names)]) + last
    else:
        return first + last

print nz_attributes(*tuple(args.names)) 
```

# javascript - 使用 History API 时，我应该如何处理返回到加载的初始页面

> ID：10047470
> 
> 赞同：0
> 
> 时间：2012-04-06T18:15:58.243
> 
> 标签：javascript, ajax, api, history.js

我很确定这里有一个非常简单的解决方案，但我似乎想不出最好的方法。我正在使用 History.js，它利用了 History API。假设我从以下页面开始：

```
<div ="header">
  Header
</div>
<div id="content">
  Content
</div>
<div id="footer">
  Footer
</div> 
```

我处理 AJAX 调用的方式是用新的 html 替换 #content 的内容。因此，例如，我加载了“内容 2”的文本。这一切都很好，直到用户导航回他们在我的网站上点击的第一页，因为它试图加载完整的第一页（包括#header和#footer，所以我最终得到：

```
<div ="header">
  Header
</div>
<div id="content">
  <div ="header">
    Header
  </div>
  <div id="content">
    Content
  </div>
  <div id="footer">
    Footer
  </div>
</div>
<div id="footer">
  Footer
</div> 
```

我知道有更好的方法来构建我的页面以避免这个问题，但我似乎无法弄清楚它是什么。这是我正在使用的代码：

```
(function(window,undefined){
    var
    History = window.History,
    State = History.getState();

    History.Adapter.bind(window,'statechange',function(){
    var State = History.getState();
    $.ajax({
        url: History.getState().url,
        cache: false
    }).done(function( html ) {
        $("#content").html(html);
    });
    });
})(window); 
```

有关处理此问题的正确方法的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T19:01:04.370

```
<?php

    $is_ajax = isset( $_SERVER['HTTP_X_REQUESTED_WITH'] ) && ( $_SERVER['HTTP_X_REQUESTED_WITH'] == 'XMLHttpRequest' );

    if ( $is_ajax ) {
      // Give the content
    } else {
      // Give a full page
    }

?> 
```

# python - 保留功能实现的顺序

> ID：10047475
> 
> 赞同：2
> 
> 时间：2012-04-06T18:16:18.593
> 
> 标签：python, function, functional-programming, composition

所以我有一个数值，可以应用这两个函数。

假设我有一个数字 8。

我想先取它的正方形，然后取它的原木，或者先取它的原木，然后再取它的正方形。

所以我的功能看起来像这样

```
def transform(value, transformation_list):
  # value is int, transformation_list = ["log",square"] or ["square","log"]
 # square function and log function
 return transformed value 
```

现在如果转换列表的第一个参数是“square”，第二个是“log”，那么它应该先执行square然后log

但是如果该列表中的第一个函数是“log”和第二个“square”，那么它应该实现第一个 log 然后是 square。

我不想要 if : else 有点东西，因为当我添加更多转换时它会变得丑陋我应该如何设计这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T18:31:34.520

像下面这样的东西应该可以工作：

```
import math

func_dict = {'square': lambda x: x**2,
             'cube': lambda x: x**3,
             'log': math.log}

def transform(value, transformation_list):
    for func_name in transformation_list:
        value = func_dict[func_name](value)
    return value 
```

例如：

```
>>> transform(math.e, ['cube', 'log', 'square'])
9.0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T18:39:05.900

使用此[方法](http://code.activestate.com/recipes/52902-function-composition/)进行函数组合（或者，使用[函数](http://oakwinter.com/code/functional/)模块），您可以组合任意函数列表 - 无需将名称作为字符串传递，只需传递函数：

```
class compose:
    def __init__(self, f, g, *args, **kwargs):
        self.f = f
        self.g = g
        self.pending = args[:]
        self.kwargs = kwargs.copy()
    def __call__(self, *args, **kwargs):
        return self.f(self.g(*args, **kwargs), *self.pending, **self.kwargs)

def transform(value, transformation_list, inverted=False):
    lst = transformation_list if inverted else reversed(transformation_list)
    return reduce(compose, lst)(value) 
```

现在你可以`transform`这样调用：

```
from math import *
value = 2
transformation_list = [sin, sqrt, log]
transform(value, transformation_list)
> -0.047541518047580299 
```

以上将等价于`log(sqrt(sin(2)))`. 如果您需要反转函数应用的顺序，例如`sin(sqrt(log(2)))`，则执行以下操作：

```
transform(value, transformation_list, inverted=True)
> 0.73965300649866683 
```

此外，您可以在线定义函数。例如，使用我的实现，FJ 的示例将如下所示：

```
transform(e, [lambda x:x**3, log, lambda x:x**2])
> 9.0 
```

# git - 当一个提交包含来自另一个提交的更改时，我如何合并？

> ID：10047477
> 
> 赞同：1
> 
> 时间：2012-04-06T18:16:21.010
> 
> 标签：git, version-control, git-merge, merge-conflict-resolution

我有一个使用 git 的项目。当我收到 repo 时，它有一些未提交的更改。我承诺了这些，并开始自己制作。

我收到了另一位开发人员的工作，该开发人员将他们的更改和**原始未提交的更改提交**到单个提交中。

现在我在不同的文件夹中有两个 git 存储库，我想知道如何将我的更改合并到开发人员更改中，并尽可能减少冲突。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T18:37:29.950

假设您当前已签出您的提示，并且它是`master`，一个选项是：

1.从您的存储库中添加一个指向他们[的远程。](http://help.github.com/remotes/)

2\. 获取他的更改
`git fetch hisRemote`

2\. 然后创建一个仅包含您所做更改的新分支，该分支从您提交原始更改的位置分支出来。
`git branch myChanges`

3\. 将分支重置`master`回您提交原始更改的提交
`git checkout master`
`git reset --hard <commitOriginalChangesAreIn>`

4\. 然后将他的分支与他的更改合并，并将原始更改合并到该分支中。
`git merge hisRemoteBranch`

5\. 最后将该分支提示与您的更改合并到分支中。
`git merge myChanges`

# jquery - 在 Gmail 中触发跨度“添加抄送：”的“点击”

> ID：10047489
> 
> 赞同：1
> 
> 时间：2012-04-06T18:17:36.397
> 
> 标签：jquery, gmail, userscripts

为了显示 cc: 地址的输入字段，我试图从 chrome 扩展程序中自动单击 gmail 中的“添加抄送”范围。

跨度如下所示：

```
<span id=":25j" class="el" role="link" tabindex="2">Add Cc</span> 
```

据我所知，它没有定义事件侦听器/onclick。

我试过

```
 $('iframe').each(function() {
    $('span:contains("Add Cc")',this.contentDocument).first().click();
   } 
```

和

```
 $('iframe').each(function() {
     $('span:contains("Add Cc")').first().trigger( jQuery.Event("click"));
   } 
```

更新：实际上跨度在 iframe 内。

有人可以给我一个指针如何触发对这些跨度的点击吗？

有什么方法可以观察/记录手动单击链接时触发的事件？

**更新：**感谢@veeTrain 指出如何在 Chrome 开发工具中设置断点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:27:07.897

我不确定您将如何通过代码单击抄送；你的尝试对我来说看起来不错。

您可以使用 Chrome 的开发者工具来观察和了解发生的事件。您可以暂停、中断、单步执行以及更多查看变量和查看调用堆栈。

但是，您可能希望先覆盖脚本中的单击事件，然后再中断该事件。

（未经测试）

```
$('span:contains("Add Cc")').click(function() {
    // Set a break point here and then when a click on Cc is
    // generated, you should be able to investigate
}); 
```

你确定手动包含 jQuery 吗？默认情况下，gmail 似乎没有加载它。尝试在检查器中输入 jQuery 来找出答案。此外，如果 span:contains 似乎不适合您，您可以尝试通过其他方式（例如通过 id）找到您的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T20:16:44.023

如果您查看 DOM，您会看到输入已经存在。你应该能够让它显示：

```
jQuery('textarea[name=cc]').parent().parent().show() 
```

但是，由于页面的设置方式，我似乎无法从控制台对此进行测试。他们使用 iframe 等。也许你可以从插件中获得它？

You might also try to find a better way to get at the parent element rather than using `parent().parent()`, I would, but I can't test this out.

# javascript - 无法在二维数组中设置未定义的属性“3”

> ID：10047495
> 
> 赞同：0
> 
> 时间：2012-04-06T18:18:09.867
> 
> 标签：javascript

我正在尝试创建一个二维数组，但出现此错误。

我循环一个对象并尝试分配它们，但它不会让我为第二维分配一个值。

这就是我所拥有的：

```
//this is globally set
var gcollision = new Array();

function create() {
    for (var X in sdata) {
        X = parseInt(X);
        for (var Y in sdata[X]) {
            Y = parseInt(Y);
            width = parseInt(sdata[X][Y][2]);
            height = parseInt(sdata[X][Y][3]);
            for (i = X; i != X + width; i++) {
                //error occurs here "Uncaught TypeError: Cannot set property '3' of undefined"
                gcollision[i][Y] = 1
                for (j = Y; j != Y + height; j++) {
                    gcollision[X][j] = 1
                }
            }
        }
    } 
```

如何使它正确设置值？

编辑 sdata 如下所示：

```
var sdata = {"4":{"7":["1","7","3","3"]},"3":{"3":["2","8","1","1"]}}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T18:21:08.960

```
//this is globally set
var gcollision = new Array();

function create(){
    for (var X in sdata) {
        X = parseInt(X);
        for (var Y in sdata[X]) {
            Y = parseInt(Y);
            width = parseInt(sdata[X][Y][2]);
            height = parseInt(sdata[X][Y][3]);

for (i=X; i!= X+width; i++) {
                 if( typeof gcollision[i] == 'undefined' ) gcollision[i] = new Array();
                 gcollision[i][Y] = 1

for (j=Y; j!=Y+height; j++) {
                 if( typeof gcollision[X] == 'undefined' ) gcollision[X] = new Array();
                 gcollision[X][j] = 1
                }
            }
        }
    } 
```

基本上，即使您创建了数组，这些索引也不存在，因此在您将它们定义为数组之前，您不能将它们*作为数组引用。*

如果你将你的 for 循环设置得更优化，你不必做 isset 并且可以在`gcol[index] = Array();`第一次访问它的内部循环之前创建右边。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T18:21:09.927

首先，您需要初始化第一级数组。

```
function create() {
    for (var X in sdata) {
        X = parseInt(X);
        gcollision[X] = [];

        for (var Y in sdata[X]) {
            Y = parseInt(Y);
            width = parseInt(sdata[X][Y][2]);
            height = parseInt(sdata[X][Y][3]);
            for (i = X; i < X + width; i++) {
                gcollision[i][Y] = 1;

                for (j = Y; j < Y + height; j++) {
                    gcollision[X][j] = 1;
                }
            }
        }
    } 
```

# google-app-engine - 使用 Objectify 的 Appengine 内存缓存过期

> ID：10047499
> 
> 赞同：-1
> 
> 时间：2012-04-06T18:18:22.403
> 
> 标签：google-app-engine, objectify

我在带有 java 运行时的 appengine 上使用 objectify。我还通过 @Cached 注释为多个实体使用 memcache。我的问题是关于将对象放入数据存储区时对象化的行为。放置具有@Cached 注解的实体时，是否更新了内存缓存？或者该实体的任何现有缓存数据现在与数据存储不同步。我希望在将对象放入数据存储区时更新 memcache，但是我不知道 objectify 是否默认执行此操作，或者我是否需要自己编写。如果更新了内存缓存，那么我的数据可以有更长的过期时间（或没有过期）。仅供参考，我没有使用交易。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T18:43:33.810

当您使用 @Cached 时，Objectify 会以一种近乎事务安全的方式为您处理对内存缓存的所有更新。它是“近乎事务性的”，因为虽然它不会在争用中分崩离析，但在极少数情况下它可能会不同步 - 例如，如果您遇到 DeadlineExceededException 或 OutOfMemoryException 并且 Google 终止了您的 VM。

对于大多数类型的缓存数据来说，较长的过期时间是合理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:48:56.373

使用 Objectify，您在 Memcache 中的数据将永远不会与 Datastore 不同步（某些旧版本和特殊情况除外，例如非常不幸的截止日期）。

我 Objectify 只会使 Memcache 版本无效（因此下一个“get”将转到 Datastore 并写入 Memcache），而不是更新它，尽管我不确定这一点。无论哪种方式，Objectify 都会为您解决。

# google-analytics-api - Google Analytics API：什么是“YOUR_OAUTH_ACCESS_TOKEN”？

> ID：10047500
> 
> 赞同：0
> 
> 时间：2012-04-06T18:18:33.767
> 
> 标签：google-analytics-api

是的，它是什么，它去哪儿了？我看到这样的例子：

```
 For example, the following example shows the request and the collection returned in the response:

GET https://www.googleapis.com/analytics/v3/management/accounts
Authorization: /* YOUR_OAUTH_ACCESS_TOKEN */ 
```

来自[http://code.google.com/intl/es-ES/apis/analytics/docs/mgmt/v3/mgmtRest.html](http://code.google.com/intl/es-ES/apis/analytics/docs/mgmt/v3/mgmtRest.html)

我完全迷失在这里！我应该如何在那里输入访问令牌？还有，这是什么？我的谷歌 API 密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:51:24.713

你必须用`code`OR`access token` **来**交换，如果你想得到它，`refresh token`.

然后，您使用`access token`或调用选择的 google api `refresh token`。

请参阅以下教程：

[使用 OAuth 2.0 进行身份验证以使用 PHP 访问 Google API](http://www.jensbits.com/2011/12/20/authenticating-with-oauth-2-0-for-google-api-access-with-php/)

[使用 OAuth 2.0 访问令牌的 Google API 请求](http://www.jensbits.com/2011/12/29/google-api-requests-with-oauth-2-0-access-token/)

[使用 OAuth 2.0 刷新令牌的 Google API 离线访问](http://www.jensbits.com/2012/01/09/google-api-offline-access-using-oauth-2-0-refresh-token/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:22:55.823

[在此处](https://developers.google.com/accounts/docs/OAuth2)查看有关将 OAuth 与 Google 服务结合使用的更多信息。

更新：[本文](http://www.alexc.me/using-the-google-analytics-api-getting-total-number-of-page-views/74/)提供了调用 GA API 的分步说明。

# prolog - 使用 Prolog 从语言规则中获取数据模型路径？

> ID：10047502
> 
> 赞同：0
> 
> 时间：2012-04-06T18:18:39.327
> 
> 标签：prolog, artificial-intelligence, dcg

我想为数据仓库构建一个半自然语言界面。例如，一个简单的数据模型如下所示：

```
公司
- 属性“名称”
- 参考“部门”

部门
- 属性“类型”
- 提及“员工”

员工
- 属性“年龄”
- 属性“薪水”

```

我想进行这样的查询：

`ACME employees`,`Bugs Bunny salary`等`ACME department types`。

对于不在语法中的输入，我会调用数据库并将 say `ACME`into解析为`Company`.

...并将查询转换为我的数据库语言可以理解的路径：

`[Company].departments.employees`, `[Employee].salary`, `[Company].departments.type`.

我记得以前使用 SWI-Prolog 解析英语句子并说出它们是否正确。在这种情况下，Prolog 仍然是要走的路吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:53:57.177

甚至更好的是，我现在使用带有嵌入式 Prolog 规则的 DCG。

因此，对于具有如下类和属性的模型：

```
c（公司，类（公司））-> [公司]。
a（公司，属性（名称））-> [名称]。

```

我可以要求一个类的属性：

```
q(q(A,C1,C2)) --> a(T1,A), [of], c(T1,C1)
    ,[of], c(T2,C2), {is_child(T1, T2)}。

```

并得到一棵树作为答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T13:47:50.300

在 SWI-Prolog 中，有准备安装的[Chat80 。](http://www.swi-prolog.org/pack/list?p=chat80)我认为可能与您所追求的非常相似，比照了。

只是会话日志中的一个示例查询（注意：是我自己的 chat80 到 SWI-Prolog 的旧端口，该包可能功能更强大，但我没有尝试运行）：

```
what rivers are there ? 

Parse: 0.0168457sec.
whq
   $VAR
      1
   s
      np
         3+plu
         np_head
            int_det(B)
            []
            river
         []
      verb(be,active,pres+fin,[],pos)
      void
      []

Semantics: 0.0170898sec.
answer([B]) :-
   river(B)
 & exists B 
     true

Planning: 0.0sec.
answer([B]) :-
   river(B)
 & exists B 
     true
amazon, amu_darya, amur, brahmaputra, colorado, congo_river, cubango, danube, don, elbe, euphrates, ganges, hwang_ho, indus, irrawaddy, lena, limpopo, mackenzie, mekong, mississippi, murray, niger_river, nile, ob, oder, orange, orinoco, parana, rhine, rhone, rio_grande, salween, senegal_river, tagus, vistula, volga, volta, yangtze, yenisei, yukon and zambesi.

Reply: 0.166992sec. 
```

话语回答查询所需的逻辑形式是系统的中心点。从地面制作并不容易！

我读了这本书`Prolog and Natural Language Analysis`，F.Pereira, S.Shieber, 1987（意大利语翻译），仍然是我的首选！英文原版可[在此处](http://www.mtome.com/Publications/PNLA/pnla.html)免费获得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T11:08:41.447

最终得到了这个将“句子”转换为模型中路径的示例：

```
% 根类
班级（首席执行官）。

% 模型关系
属性_of（年龄，首席执行官）。
属性_of（薪水，首席执行官）。

% 关系语法
属性（'年龄'，年龄）。
属性（'薪水'，薪水）。
属性（'钱'，薪水）。

% 答案格式
答案（[类，属性]，类，属性）。

% 语言规则
% 查询（属性，'of'，对象，答案）。
查询（AttributeQ，'of'，ClassQ，答案）：-
    db(ClassQ, Class), attribute(AttributeQ, Attribute), attribute_of(Attribute, Class), answer(Answer, Class, Attribute)。

% 数据库
db('Bugs Bunny', 首席执行官)。

```

例如，以下查询：

`?- query('age','of','Bugs Bunny', Answer).`

...给我：

`Answer = [ceo, age].`

# android-layout - Android应用RelativeLayout不显示

> ID：10047504
> 
> 赞同：0
> 
> 时间：2012-04-06T18:18:43.183
> 
> 标签：android-layout

所以我尝试使用相对布局（对于屏幕底部的基本应用程序选项卡），当我在其他 2 个布局（LinearLayout 和 ScrollView）之后将其放置在 LinearLayout 中时，它没有显示。ScrollView 包含几个 textViews 并且可以很好地自行滚动，并且之前的线性布局也可以很好地工作，但是我试图放置在屏幕底部的 relativelayout 不起作用。这是我正在尝试做的一般代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/common_bg"
    android:layout_height="fill_parent">

    <LinearLayout android:layout_width="fill_parent"
        android:layout_height="50dp">

        <TextView android:layout_height="50dp"
            android:text="Heading"
            android:gravity="center"
            android:textSize="17dp"
            android:textColor="@color/white"
            android:textStyle="bold"
            android:layout_width="fill_parent">
        </TextView>
    </LinearLayout>

    <ScrollView android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scrollbars="none"
        android:layout_gravity="top" 
        android:layout_marginBottom="60dp">

           <LinearLayout android:layout_width="fill_parent"
            android:orientation="vertical"
            android:paddingTop="15dp"
            android:layout_weight="1"
            android:paddingLeft="15dp"
            android:paddingRight="15dp"
            android:layout_height="fill_parent">

           <TextView android:layout_width="wrap_content"
                         android:textColor="@color/white"
                         android:textSize="18dp"
                         android:textStyle="bold"
                         android:text="@string/text"
                 android:layout_height="wrap_content">
           </TextView>

           </LinearLayout>

    </ScrollView>

    <RelativeLayout
        android:id="@+id/bottomMenu"
        android:layout_width="wrap_content"
        android:layout_height="60dp" />

</LinearLayout> 
```

更新：我使用的相对布局是自定义的，我无法在此处实际显示代码，但它包含一个带有多个按钮的单选组。

更新 2：好的，所以我通过在 3 个布局（第一个线性，一个持有滚动条和底部相对布局）上操作 layout_height="wrap_content" 以及操作每个布局的 layout_wieght 解决了这个问题，直到我对它的外观感到满意......这似乎不是最好的解决方案，但它确实有效，所以我不能抱怨太多哈哈......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:30:36.773

相对布局本身不会显示在xml图形布局中或者在运行应用程序时，它需要一个子元素来占据父布局，尝试在相对布局中放置一个文本视图，它会显示出来，定位它在具有滚动视图的线性布局正下方，它会正常工作，我只是用你的代码尝试过，它可以工作

# php - 调用现有方法时执行（魔术）方法

> ID：10047505
> 
> 赞同：7
> 
> 时间：2012-04-06T18:19:35.743
> 
> 标签：php

是否有一种魔术方法，当从对象调用某个方法时，首先调用一个魔术方法。有点像 __call 方法，但只有在找不到该方法时才会触发。

所以就我而言，我想要这样的东西：

```
class MyClass
{
    public function __startMethod ( $method, $args )
    {
        // a method just got called, so  this is called first
        echo ' [start] ';
    }

    public function helloWorld ( )
    {
        echo ' [Hello] ';
    }
}

$obj = new MyClass();
$obj->helloWorld();

//Output:
[start] [Hello] 
```

PHP中是否存在类似的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T18:35:34.160

没有直接的方法可以做到这一点，但在我看来，您尝试实现一种面向方面的编程形式。在 PHP 中有几种方法可以实现这一点，一种是设置您的类，如下所示：

```
class MyClass
{
    public function __startMethod ( $method, $args )
    {
        // a method just got called, so  this is called first
        echo ' [start] ';
    }

    public function _helloWorld ( )
    {
        echo ' [Hello] ';
    }

    public function __call($method, $args)
    {
        _startMethod($method, $args);
        $actualMethod = '_'.$method;
        call_user_func_array(array($this, $actualMethod), $args);
    }
}

$obj = new MyClass();
$obj->helloWorld(); 
```

查找在 PHP 中实现 AOP 的其他方法，看看哪种方法最适合您（我会看看是否可以在某处找到链接）。

编辑：这是给你的文件[http://www.liacs.nl/assets/Bachelorscripties/07-MFAPouw.pdf](http://www.liacs.nl/assets/Bachelorscripties/07-MFAPouw.pdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T18:31:39.453

不，这没有什么神奇的方法。

您可以做的最好的事情是为您的函数创建其他名称（例如：）`hidden_helloWorld`，然后捕获*所有*调用`__call`并尝试调用该`hidden_`方法（如果它可用）。当然，这只有在您完全控制类及其父类的命名等情况下才有可能......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-07T15:19:14.527

您可以通过将方法设为私有并使用 __call() 魔术方法调用方法来实现它。像：

```
<?php

class MyClass{
    function __call($methd, $args){
        if(method_exists($this, $mthd)){
            $this->$mthd($args);
        }
    }

    private function mthdRequired($args){
        //do something or return something
    } 
```

除了使用调用之外，不会调用 mthdRequired 方法。我希望这是有用的。

# ruby-on-rails-3 - Rails - 如何通过form_for中的关联显示价值？

> ID：10047507
> 
> 赞同：0
> 
> 时间：2012-04-06T18:19:42.580
> 
> 标签：ruby-on-rails-3, model, associations, form-for

这是我的看法：

```
= form_for(@user) do |f|
  = f.autocomplete_field @user.city.name, autocomplete_city_name_users_path 
```

在第二行我试图显示关联，但我得到

```
undefined method `London' for #<User:0x00000129bb3030> 
```

协会：

**用户** `belongs_to :city`

**城市** `has_one :user`

错误消息（伦敦）中显示的结果是正确的，但为什么我会收到该错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T19:17:21.070

to 的参数`f.autocomplete_field`应该是方法的名称。表单生成器将发送此方法以`@user`获取正确的值。由于您感兴趣的值不在用户中，而是在用户拥有的对象中，因此您有几个选择：

1.  向您的 User 类添加`city_name`和方法：`city_name=`

    ```
    # app/models/user.rb

    def city_name
      city && city.name
    end

    def city_name=(name)
      city.name = name   # You'll want to make sure the user has a city first
    end 
    ```

    如果你不知道如何确保你有一个城市，你可以通过改变你的`city_name=`方法来懒惰地创建一个：

    ```
    def city_name=(name)
      build_city unless city
      city.name = name
    end 
    ```

    然后你的表格看起来像这样：

    ```
    = form_for(@user) do |f|
      = f.autocomplete_field :city_name, autocomplete_city_name_users_path 
    ```

2.  或者您可以将其视为[嵌套对象](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)。将此添加到用户：

    ```
    accepts_nested_attributes_for :city 
    ```

    并[`fields_for`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)以您的形式使用：

    ```
    = form_for(@user) do |f|
      = f.fields_for :city do |city_f|
        = city_f.autocomplete_field :name, autocomplete_city_name_users_path 
    ```

# url - CakePHP 不会将 URL 中的“+”转义为“”

> ID：10047509
> 
> 赞同：0
> 
> 时间：2012-04-06T18:19:52.263
> 
> 标签：url, cakephp, escaping

我正在开发一个使用标准 CakePHP URL 模式的 CakePHP 应用程序。

如果我在控制器中使用以下功能：

```
class IndexController extends AppController {
    public $uses = false;
    public function test($a) {
        var_dump($a);
    }
} 
```

并使用此 URL 调用它：

```
http://server/index/test/Hello+%2BTest 
```

我得到这个结果：

```
string(11) "Hello++Test" 
```

我希望第一个“+”不会转义为“”。为什么这不会发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T19:51:14.870

我认为你的意思是“unencode”而不是“unes​​cape”。

发生这种情况可能是因为 + 号是 URL 的有效字符。只有 urlencoded 字符（即 %xx）会被转换回“可读”字符。（虽然很确定这是由 Apache 完成的，而不是蛋糕）

如果你想强制转换，你可以通过 PHP 的[urldecode()](http://www.php.net/manual/en/function.urldecode.php)函数来运行它。

来自[RFC 1738](http://www.faqs.org/rfcs/rfc1738.html)：

> 因此，只有字母数字、特殊字符“$-_.+!*'()”和用于其保留目的的保留字符可以在 URL 中未编码地使用。

# xml - dtd 元素和属性

> ID：10047514
> 
> 赞同：0
> 
> 时间：2012-04-06T18:20:12.400
> 
> 标签：xml, dtd

我的 dtd 文件有问题。我正在为订购单写这个。订购单上有外壳颜色、电池数量、充电器、武器、相机和语音。我想做的是合并手臂的长度。我的手臂代表客户选择的手臂数量，手臂长度是每条手臂的长度。但我不确定如何将其写入 dtd 文件。到目前为止，这是我的 dtd 文件。

```
<?xml version="1.0"?>
<!DOCTYPE orders [
<! ELEMENT orders (order)>
<! ELEMENT order (case, batteries, recharger, arm, camera, speech)>
<! ELEMENT case (#PCDATA)>
<! ELEMENT batteries (#PCDATA)>
<! ELEMENT recharger (#PCDATA)>
<! ELEMENT arm (#PCDATA)>
<! ELEMENT camera (#PCDATA)>
<! ELEMENT speech (#PCDATA)>
]> 
```

* * *

这就是我想在显示 xml 文件时设置长度的方式

```
<arm> 2 
 <length> 50 </length>
 <length> 75 </length>
</arm> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:33:06.287

您是否尝试将手臂长度作为属性添加到手臂元素？如果是这样，这应该工作：

```
<!DOCTYPE orders [
<!ELEMENT orders (order)>
<!ELEMENT order (case, batteries, recharger, arm, camera, speech)>
<!ELEMENT case (#PCDATA)>
<!ELEMENT batteries (#PCDATA)>
<!ELEMENT recharger (#PCDATA)>
<!ELEMENT arm (#PCDATA)>
<!ATTLIST arm
          length CDATA #REQUIRED>
<!ELEMENT camera (#PCDATA)>
<!ELEMENT speech (#PCDATA)>
]> 
```

如果您不希望该`length`属性是必需的，请更改`#REQUIRED`为`#IMPLIED`.

此外，由于您的`orders`元素只允许一个`order`元素`orders`，因此并不真正需要。也许你想允许不止一个`order`？( `<!ELEMENT orders (order+)>`)

# html - 前端开发的推荐文档结构是什么？

> ID：10047518
> 
> 赞同：1
> 
> 时间：2012-04-06T18:20:31.597
> 
> 标签：html, model-view-controller, frontend

前端 (HTML) 开发社区遵循的最一致的目录结构是什么？有很多因素需要考虑，例如易于更新和维护，易于后端集成，这将遵循 MVC 模式。

高度赞赏对此的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:46:25.877

这是我拥有的文件夹

`/css/`用于样式表

`/img/`用于图像

`/js/`用于 javascript 文件

`/template/`用于模板文件，例如用于脚本和函数的页眉、页脚

`/script/`（我使用 PHP 所以用于我的 php 文件） 用于语言包的

`/inc/`任何包含文件（flash 等）

`/lang/`（如果有的话）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:26:10.380

我不确定是否有必要的结构，但我喜欢这样做：

_assets/图像 _assets/css _assets/js _assets/flash _assets/pdf

# iphone - NSUserDefaults 性能对比

> ID：10047519
> 
> 赞同：1
> 
> 时间：2012-04-06T18:20:47.290
> 
> 标签：iphone, objective-c, ios

以下两种情况是否存在速度差异：

**A：**

```
userName=[[NSUserDefaults standardUserDefaults] objectForKey:@"userName"];
userEmail=[[NSUserDefaults standardUserDefaults] objectForKey:@"userEmail"];
userId=[[[NSUserDefaults standardUserDefaults] objectForKey:@"userId"] intValue]; 
```

**乙：**

```
userDictionary=[[NSUserDefaults standardUserDefaults] objectForKey:@"userDictionary"];
userName=[userDictionary objectForKey:@"name"];
userEmail=...etc... 
```

尽管速度上的差异可能非常小，但从*技术上讲*，是否存在性能差异？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T18:25:45.897

C 最快。

**C：**

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
userName=[defaults objectForKey:@"userName"];
userEmail=[defaults objectForKey:@"userEmail"];
userId=[[defaults objectForKey:@"userId"] intValue]; 
```

当您可以在本地缓存结果并重用它时，一遍又一遍地调用相同的方法是没有意义的。方法调用总是比访问局部变量慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T18:25:32.883

*从技术上讲*，是的。但是推测哪个更快是相当不明智的。第一次猜测可能是**A**更快，因为它只在哈希表中进行 3 次查找，而不是 4 次。但也许`+[NSUserDefaults standardUserDefaults]`使用锁来使自己成为线程安全的，也许这种开销足以使**B**更快。作为奖励，一个版本的 iOS 可能会更快，而另一个版本的 iOS 可能会更快。

差异是不可预测的，并且可以忽略不计。使用使代码更简单的那个。

# python - 如何在python中将包含所有文件的目录从c:\\xxx\yyy复制到c:\\zzz\

> ID：10047521
> 
> 赞同：10
> 
> 时间：2012-04-06T18:20:49.863
> 
> 标签：python, python-2.7

我一直在尝试使用“copytree（src，dst）”，但是我不能，因为目标文件夹应该存在。在这里你可以看到我写的一小段代码：

```
def copy_dir(src,dest):
    import shutil
    shutil.copytree(src,dest)

copy_dir('C:/crap/chrome/','C:/test/') 
```

这是我得到的错误，正如我所料......

```
Traceback (most recent call last):
File "C:\Documents and Settings\Administrator\workspace\MMS-Auto\copy.py", line 5, in        <module>
copy_dir('C:/crap/chrome/','C:/test/')   
File "C:\Documents and Settings\Administrator\workspace\MMS-Auto\copy.py", line 3, in copy_dir
shutil.copytree(src,dest)
File "C:\Python27\lib\shutil.py", line 174, in copytree
os.makedirs(dst)
File "C:\Python27\lib\os.py", line 157, in makedirs
mkdir(name, mode)
WindowsError: [Error 183] Cannot create a file when that file already exists:    'C:/test/' 
```

这是我的问题，有没有一种方法可以在不创建自己的 copytree 函数的情况下获得相同的结果？

先感谢您。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-28T05:53:42.260

我使用这个`distutils`包比这里的其他答案更成功。

[http://docs.python.org/2/distutils/apiref.html#module-distutils.dir_util](http://docs.python.org/2/distutils/apiref.html#module-distutils.dir_util)

该`distutils.dir_util.copy_tree`函数的工作方式与它非常相似，`shutil.copytree`只是它`dir_util.copy_tree`只会覆盖存在的目录而不是因异常而崩溃。

代替：

```
import shutil
shutil.copytree(src, dst) 
```

和：

```
import distutils.dir_util
distutils.dir_util.copy_tree(src, dst) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T18:49:31.270

Look at [`errno`](http://docs.python.org/library/errno.html) for possible errors. You can use `.copytree()` first, and then when there is error, use `shutil.copy`.

From: [http://docs.python.org/library/shutil.html#shutil.copytree](http://docs.python.org/library/shutil.html#shutil.copytree)

> If exception(s) occur, an Error is raised with a list of reasons.

So then you can decide what to do with it and implement your code to handle it.

```
import shutil, errno

def copyFile(src, dst):
    try:
        shutil.copytree(src, dst)
    # Depend what you need here to catch the problem
    except OSError as exc: 
        # File already exist
        if exc.errno == errno.EEXIST:
            shutil.copy(src, dst)
        # The dirtory does not exist
        if exc.errno == errno.ENOENT:
            shutil.copy(src, dst)
        else:
            raise 
```

About `.copy()`: [http://docs.python.org/library/shutil.html#shutil.copy](http://docs.python.org/library/shutil.html#shutil.copy)

> Copy the file src to the file or directory dst. If dst is a directory, a file with the same basename as src is created (or overwritten) in the directory specified. Permission bits are copied. src and dst are path names given as strings.

**Edit:** Maybe also look into [`distutils.dir_util.copy_tree`](http://docs.python.org/distutils/apiref.html#distutils.dir_util.copy_tree)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T17:27:36.577

在执行 shutil.copytree 函数之前，我需要先检查该位置是否存在同名目录。此外，它只复制带有某个通配符的目录。不确定是否需要回答这个问题，但我想把它留在那里。

```
import sys
import os
import os.path
import shutil 

src="/Volumes/VoigtKampff/Temp/_Jonatha/itmsp_source/"
dst="/Volumes/VoigtKampff/Temp/_Jonatha/itmsp_drop/"

for root, dirs, files in os.walk(src):
    for dir in dirs:
        if dir.endswith('folder'):
            print "directory to be moved: %s" % dir
            s = os.path.join(src, dir)
            d = os.path.join(dst, dir)
            if os.path.isdir(d):
                print "Not copying - because %s is already in %s" % (dir, dst)
            elif not os.path.isdir(d):
                shutil.copytree(s, d)
                print "Copying %s to %s" % (dir, dst) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T18:45:17.467

我很确定这取决于你所拥有的 python 的确切版本，但是当我调用 shutil.copytree 时。**医生**我明白了：

> 使用 copy2() 递归地复制目录树。
> 
> 目标目录必须不存在。
> 
> XXX 考虑这个示例代码而不是终极工具。

这解释了您遇到的错误。您可能可以改用[distutils.dir_util.copy_tree](http://docs.python.org/distutils/apiref.html#distutils.dir_util.copy_tree)。

# java - 算法是指数的，有没有办法让它不是这样？

> ID：10047523
> 
> 赞同：0
> 
> 时间：2012-04-06T18:20:55.480
> 
> 标签：java, performance, algorithm, caching, data-structures

更新：根据 rrenaud 的精彩评论，我想澄清一下，虽然我正在生成所有排列顺序并不重要（所以它不完全像一个旅行推销员问题......但仍然有点相似）。我专注于我的问题的观察结果（尽管欢迎任何关于如何加快速度的见解），结果是相互建立的，也许有一些方法（动态编程？）我可以用来建立以前的结果而不是重复大量的计算。查看这些结果，您可以看到结果只是相互构建（这样做是为了将项目数更改为 3 并在 for 循环中将最大值更改为 3）：

```
Grapes = 0
Strawberries = 0
Raspberries = 0
****
Grapes = 1
Strawberries = 0
Raspberries = 0
****
Grapes = 2
Strawberries = 0
Raspberries = 0
****
Grapes = 3
Strawberries = 0
Raspberries = 0
****
Grapes = 0
Strawberries = 1
Raspberries = 0
****
Grapes = 1
Strawberries = 1
Raspberries = 0
****
Grapes = 2
Strawberries = 1
Raspberries = 0
****
Grapes = 3
Strawberries = 1
Raspberries = 0
****
Grapes = 0
Strawberries = 2
Raspberries = 0
****
Grapes = 1
Strawberries = 2
Raspberries = 0
****
Grapes = 2
Strawberries = 2
Raspberries = 0
****
Grapes = 3
Strawberries = 2
Raspberries = 0
****
Grapes = 0
Strawberries = 3
Raspberries = 0
****
Grapes = 1
Strawberries = 3
Raspberries = 0
****
Grapes = 2
Strawberries = 3
Raspberries = 0
****
Grapes = 3
Strawberries = 3
Raspberries = 0
****
Grapes = 0
Strawberries = 0
Raspberries = 1
****
Grapes = 1
Strawberries = 0
Raspberries = 1
****
Grapes = 2
Strawberries = 0
Raspberries = 1
****
Grapes = 3
Strawberries = 0
Raspberries = 1
****
Grapes = 0
Strawberries = 1
Raspberries = 1
****
Grapes = 1
Strawberries = 1
Raspberries = 1
****
Grapes = 2
Strawberries = 1
Raspberries = 1
****
Grapes = 3
Strawberries = 1
Raspberries = 1
****
Grapes = 0
Strawberries = 2
Raspberries = 1
****
Grapes = 1
Strawberries = 2
Raspberries = 1
****
Grapes = 2
Strawberries = 2
Raspberries = 1
****
Grapes = 3
Strawberries = 2
Raspberries = 1
****
Grapes = 0
Strawberries = 3
Raspberries = 1
****
Grapes = 1
Strawberries = 3
Raspberries = 1
****
Grapes = 2
Strawberries = 3
Raspberries = 1
****
Grapes = 3
Strawberries = 3
Raspberries = 1
****
Grapes = 0
Strawberries = 0
Raspberries = 2
****
Grapes = 1
Strawberries = 0
Raspberries = 2
****
Grapes = 2
Strawberries = 0
Raspberries = 2
****
Grapes = 3
Strawberries = 0
Raspberries = 2
****
Grapes = 0
Strawberries = 1
Raspberries = 2
****
Grapes = 1
Strawberries = 1
Raspberries = 2
****
Grapes = 2
Strawberries = 1
Raspberries = 2
****
Grapes = 3
Strawberries = 1
Raspberries = 2
****
Grapes = 0
Strawberries = 2
Raspberries = 2
****
Grapes = 1
Strawberries = 2
Raspberries = 2
****
Grapes = 2
Strawberries = 2
Raspberries = 2
****
Grapes = 3
Strawberries = 2
Raspberries = 2
****
Grapes = 0
Strawberries = 3
Raspberries = 2
****
Grapes = 1
Strawberries = 3
Raspberries = 2
****
Grapes = 2
Strawberries = 3
Raspberries = 2
****
Grapes = 3
Strawberries = 3
Raspberries = 2
****
Grapes = 0
Strawberries = 0
Raspberries = 3
****
Grapes = 1
Strawberries = 0
Raspberries = 3
****
Grapes = 2
Strawberries = 0
Raspberries = 3
****
Grapes = 3
Strawberries = 0
Raspberries = 3
****
Grapes = 0
Strawberries = 1
Raspberries = 3
****
Grapes = 1
Strawberries = 1
Raspberries = 3
****
Grapes = 2
Strawberries = 1
Raspberries = 3
****
Grapes = 3
Strawberries = 1
Raspberries = 3
****
Grapes = 0
Strawberries = 2
Raspberries = 3
****
Grapes = 1
Strawberries = 2
Raspberries = 3
****
Grapes = 2
Strawberries = 2
Raspberries = 3
****
Grapes = 3
Strawberries = 2
Raspberries = 3
****
Grapes = 0
Strawberries = 3
Raspberries = 3
****
Grapes = 1
Strawberries = 3
Raspberries = 3
****
Grapes = 2
Strawberries = 3
Raspberries = 3
****
Grapes = 3
Strawberries = 3
Raspberries = 3
**** 
```

我还在学习算法，所以我的知识库有点有限。我基本上有一个递归，随着我向它添加更多输入，它会保持指数增长，但我想知道是否有什么可以用来让它不这样做的。

这是一个递归示例（java代码），它基本上采用一个项目列表并使用0-n数量计算出每个项目的所有组合（为简单起见，我的代码有2个项目，每个项目的数量为0到5。 .variables 可以在循环中更改）。为了使这更有趣，我有一个名为 Q 的变量，它进行一些随机处理并根据列表检查其值，然后才继续。我尽可能地评论了代码，希望它对你来说很容易阅读：

```
import java.util.Arrays;
import java.util.List;
//learning playground safe to delete

public class main {

    public static void main(String[] args) {
        System.out.println("Starting..");
        Integer number_of_items = 2; //how many items should we test with, over 7 or 8 takes a long time MAX is 11(based on the number of names we have below)
        long startTime = System.currentTimeMillis(); //start timer
        Integer[] integers_temp = new Integer[number_of_items]; // create a list with exactly the number of items specified above
        Arrays.fill(integers_temp, 0); // populate list with zeros 
        List<Integer> list_to_start = Arrays.asList(integers_temp); //set it as a list
        String[] name_of_list_to_start = new String[] {"Grapes", "Strawberries", "Raspberries", "Blackberries", "Pineapples", "Oranges", "Prunes", "Pears", "cherries", "Peaches", "Apples"};       
        List<Integer> numbers_to_choose_from = Arrays.asList(new Integer[] {0, 1,2,3,4,5,6,7,8,9,10}); //list of numbers program can choose from(could be anything,just learning)
        counter(list_to_start.size(), list_to_start, name_of_list_to_start, numbers_to_choose_from);
        long endTime = System.currentTimeMillis(); 
        System.out.println("Total execution time: " + (endTime-startTime));
    }

    private static void counter(int length, List<Integer> list_to_start, String[] name_of_list_to_start, List<Integer> numbers_to_choose_from) {
        // If we've gone through everything then return the results
        if (length == 0) {
            for (int i = 0; i<list_to_start.size(); i++) {
                System.out.println(name_of_list_to_start[i] + " = " + list_to_start.get(i));
            }
            System.out.println("****");
            return;
        }   
        //This part basically increments list_to_start and then the above part displays it.
        for (int i = 0; i<=5; i++) {
            int q = i +2;  //do anything here..random just for example, right now just takes the number in the loop and adds by 10
            //System.out.println(q);  // this area is looped as many times as i^items, yet seems like after the first run work is duplicated.
            if (length != 0 && numbers_to_choose_from.contains(q)) {
                list_to_start.set((length-1), q);
                counter((length-1), list_to_start, name_of_list_to_start, numbers_to_choose_from);
                list_to_start.set((length-1), 0);
            }
        }
    }
} 
```

如果将数量更改为 0-10 并将项目更改为 10，则它变为（10^10 即 10000000000 循环）。当我分析代码时，它说大部分时间都花在迭代器上，这是有道理的，所以我需要以某种方式减少它花费在迭代上的时间（希望有一种方法可以让它每个项目迭代一次，而不是每次递归） .

我的观察是最初的 for 循环似乎是必要的，因为它根据列表计算和检查值，但是一旦完成，它循环的所有其他时间都会重复相同的过程。我对所有算法都非常陌生（但目前正在阅读算法介绍），所以我想知道是否有一种方法可以使这个没有指数，以便它可以处理更多变量（这是我程序的一部分，它要大得多, 但理想情况下, 我需要处理尽可能多但至少 0-100 数量的 100 件物品并在一小时内完成或其他工作失败. 我无法用 100^100 来实现这一点, 所以我为想法而奋斗）。

如果有人有任何提示，或者如果他们看到任何解决类似问题的算法，那就太好了，因为我可以研究他们使用的逻辑，看看它是否适用。如果有人有直接的解决方案，那就太好了！

我希望这个问题不会太长并且有意义（我试图尽可能详细）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:51:06.433

If you want generate all possible permutations, this belongs to [`EXPTIME`](http://en.wikipedia.org/wiki/EXPTIME)-complete class like [`towers of Hanoi`](http://en.wikipedia.org/wiki/Tower_of_Hanoi), its more difficult than NP-complete problems (because all of them belong to [`PSPACE`](http://en.wikipedia.org/wiki/PSPACE)), you can't expect faster than 100^100\. But may be there is some heuristics for original problem, So it's better to say it. Also if your original problem is this, you can say your boss: No one in the world can do this. Also you can make it parallel, but except using extremely powerful mainframe, you don't have any chance to get result.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T19:01:04.497

现在的代码正在迭代每个组合。对于 n=100，没有办法在合理的时间内运行。优化内部循环不会阻止它呈指数增长。

您将需要一种不同的方法来使其可行。如何做到这一点取决于您要解决的问题的详细信息。例如，一些优化问题可以通过动态规划、线性规划、最大流量或二分搜索来解决。其他问题通过寻找近似解来解决。

# java - 将字符串转换为浮点数 -> Processing.org

> ID：10047525
> 
> 赞同：0
> 
> 时间：2012-04-06T18:21:05.470
> 
> 标签：java, geolocation, type-conversion, processing, latitude-longitude

我正在尝试将字符串纬度和经度坐标转换为浮点数，因为我将它们绘制在地图上。我已经尝试了多种方法，但它无法正常工作。任何帮助将不胜感激！

这是我的字符串：

```
String r = loc[1].substring(0, loc[1].length()-1);
It prints out as: 42.202344 (example)

float lon = float(r.replaceAll( "[^\\d]", "" ));
float lon = Float.valueOf(r.replaceAll( "[^\\d]", "" ).trim().floatValue());

float lon = Float.valueOf(r.replaceAll( "[^\\d]", "" )).floatValue(); 
```

上面的所有值都产生：4.2202344E7 <-- 这是不可绘制的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:36:43.227

你看过静态方法[Float.parseFloat()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Float.html#parseFloat%28java.lang.String%29)吗？它可能会使您的工作更轻松：

```
float lon = Float.parseFloat(r); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:24:41.070

尝试使用`"[^\d\.]"`或替换“。” 也。

# android - Android：如何在触摸事件中手动实现长按？

> ID：10047531
> 
> 赞同：2
> 
> 时间：2012-04-06T18:21:23.817
> 
> 标签：android, timer, long-press

简短版本：我想要一种在 onTouchEvent 上启动基于时间的计数器的方法，并测试在响应之前是否经过了一定的时间，作为手动 LongTouch 检测。

说明：我有一个自定义的 imageView 可以在两根手指上滑入/滑出屏幕。我想向它添加拖动事件，但这些事件需要比长按更快。我可以通过使用每个 onTouchEvent 更新一次的计数器来延迟拖动事件，并且只触发拖动，例如 10 个计数，但计数器只更新触摸事件并且手指必须移动。

如何创建一个基于时间的计数器，一个每秒增加 60 次或类似的活动级别字段？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T20:41:09.217

我不确定你的问题，但似乎你正试图在你的 onTouchListener 中实现一个捕捉长点击事件，除非你需要在 ACTION_UP 事件发生之前执行某种逻辑？如果是这样，那与我遇到的问题完全相同。我也尝试过使用 System.nanoTime() 但我发现了一个不那么棘手的方法。您可以使用计时器，您只需将其安排在第一个 ACTION_DOWN 事件上，并在发生任何不利情况时取消它（例如 ACTION_UP 意味着它不是长按而只是单击，或者 ACTION_MOVE 位移超过一定的门槛）。类似于以下内容：

```
layout.seyOnTouchListener(new OnTouchListener(){
    private Timer longpressTimer; //won't depend on a motion event to fire
    private final int longpressTimeDownBegin = 500; //0.5 s
    private Point previousPoint;

    switch(event.getAction()){

    case MotionEvent.ACTION_DOWN:{
        longPressTimer = new Timer();
        longpressTimer.schedule(new TimerTask(){
            //whatever happens on a longpress
        }, longpressTimeDownBegin);
        return true; //the parent was also handling long clicks
    }
    case MotionEvent.ACTION_MOVE:{
        Point currentPoint = new Point((int)event.getX(), (int)event.getY());

        if(previousPoint == null){
            previousPoint = currentPoint;
        }
        int dx = Math.abs(currentPoint.x - previousPoint.x);
        int dy = Math.abs(currentPoint.y - previousPoint.y);
        int s = (int) Math.sqrt(dx*dx + dy*dy);
        boolean isActuallyMoving = s >= minDisToMove; //we're moving

        if(isActuallyMoving){ //only restart timer over if we're actually moving (threshold needed because everyone's finger shakes a little)
            cancelLongPress();
            return false; //didn't trigger long press (will be treated as scroll)
        }
        else{ //finger shaking a little, so continue to wait for possible long press
            return true; //still waiting for potential long press
        }
    }
    default:{
        cancelLongPress();
        return false;
    }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T18:33:10.873

我解决这个问题的方法是在 Action_Down 发生时将一些布尔值设置为 true。如果 action_up 发生，则将布尔值设置为 false。当 action_down 发生时，还可以将 postDelayed 设置为您想要的任何延迟。在 postdelayed 中，如果您之前设置为 true 的布尔值仍然为 true，则执行您想要的操作。抱歉这么冗长的回答，但我就是这样做的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T18:25:14.190

只需查看android的源代码即可。

在 GestureDetector 中长按会在“key down”上启动延迟消息。当此消息在“key up”之前出现时，它是长按。

只是指向源 [http://www.devdaily.com/java/jwarehouse/android/core/java/android/view/GestureDetector.java.shtml的链接](http://www.devdaily.com/java/jwarehouse/android/core/java/android/view/GestureDetector.java.shtml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T20:59:46.167

答：使用系统时钟 (elapsedRealtime()) 并测量自按下启动以来的毫秒数。一旦你开始掌握它就很容易了。

# mysql - 建议的 SQL 格式

> ID：10047532
> 
> 赞同：1
> 
> 时间：2012-04-06T18:21:24.257
> 
> 标签：mysql, sql

我正在处理我的 SQL，并且我有以下语句：

```
1    SELECT c.credit_display, t.title, t.provider
2       FROM credits c
3           INNER JOIN title t 
4           ON c.vendor_id = t.vendor_id
5       WHERE c.position = 'Director' and t.provider = 'Premiere'
6           INTO OUTFILE '/var/tmp/file.csv'
7           FIELDS TERMINATED BY ',' 
```

我想知道关于标签的正确格式是什么。何时缩进的建议做法是什么（例如，第三行应该是两个制表符还是三个制表符？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T18:24:41.520

**这都是高度主观**的。

由于`INTO OUTFILE`and`FIELDS`选项属于整个`SELECT`语句，我可能不会在`WHERE`子句下方缩进它们，而是在最左边的位置（没有缩进）

由于您有多个`WHERE`条件，您可以将每个条件缩进一个新行。我会将相同的方法应用于`SELECT`列和`FROM`表。中的`ON`子句在它适用`JOIN`的 ed 表下方缩进。`JOIN`

```
SELECT
   /* each column on its own line */
   /* unless it is only 1 column */
   c.credit_display, 
   t.title, 
   t.provider
FROM
   credits c
   INNER JOIN title t 
      /* ON clause indented beneath the join */
      ON c.vendor_id = t.vendor_id
WHERE 
   /* each condition on its own line */
   c.position = 'Director'
   AND t.provider = 'Premiere'
/* This apply to the entire statement so I would not indent them
INTO OUTFILE '/var/tmp/file.csv'
  /* You might indent this and other LINES TERMINATED BY options 
     beneath the OUTFILE line */
  FIELDS TERMINATED BY ',' 
```

缩进是一个非常主观的事情，最好的办法是与你的团队就如何缩进代码达成一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:23:50.187

这都是个人喜好（或公司编码标准，取决于您的环境）。我倾向于这样写我的查询：

```
SELECT c.credit_display, t.title, t.provider
FROM credits c
INNER JOIN title t ON c.vendor_id = t.vendor_id
WHERE c.position = 'Director' AND t.provider = 'Premiere'
INTO OUTFILE '/var/tmp/file.csv'
FIELDS TERMINATED BY ',' 
```

查询的每个新行对齐的位置。缩进取决于它在代码中的位置以及使用的语言。但同样，这完全取决于个人喜好或公司标准。

# database - Prolog - 你如何区分一个字符串和一个变量？

> ID：10047534
> 
> 赞同：2
> 
> 时间：2012-04-06T18:21:37.093
> 
> 标签：database, prolog

在查询 Prolog 数据库时，通常会使用以大写字母开头的术语作为变量。但是，假设您查询的一个约束条件是一个人的位置必须是“达拉斯”，并且您想要查询数据库中符合这些规范的所有信息。您将如何正确确保 Dallas 不被解释为存储值的变量，而是被解释为字符串，以用作查询的约束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:26:47.200

只需将达拉斯包装成单引号 : `'Dallas'`。顺便说一句，这不是一个字符串，而是一个原子。例如，在具有默认设置的 Swi-Prolog 中，字符串将是：

```
?- X = "hello".
X = [104, 101, 108, 108, 111]. 
```

虽然原子将是

```
?- X = 'hello'.
X = hello. 
```

它们都有自己的一组谓词和语义。

# java - 暂停/暂停进程对象

> ID：10047540
> 
> 赞同：0
> 
> 时间：2012-04-06T18:22:03.477
> 
> 标签：java, android

我有这样的一行：

```
Process process = Runtime.getRuntime().exec(cmd); 
```

在某些时候我想暂停这个过程。3 秒。Thread.wait() 或对象锁；lock.wait() 无济于事，因为该进程在后台进行，而不是暂停。

我知道这样做既不安全也不愚蠢，我只需要暂停执行更长的输出命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T19:10:22.580

我建议您检查 Handler 以了解线程上的此类操作。

[http://developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

# .net - 使用 .Net DateTime 将 PST 转换为 GMT，而不考虑服务器时区

> ID：10047541
> 
> 赞同：1
> 
> 时间：2012-04-06T18:22:04.477
> 
> 标签：.net, datetime, timezone

给定一个日期和时间结构为：

“2011-10-21 14:44:19”

已知是太平洋时间（适当时调整夏令时），*无论*当前服务器时间如何，我都需要解析 DateTime 并将其转换为 UTC。

我已经看到了这个非常相似的问题，该问题以原始 DateTime 为 UTC 的假设开始：

[无论区域设置如何，如何将日期时间格式化为 GMT？](https://stackoverflow.com/questions/9803904/how-to-format-a-datetime-to-gmt-irrespective-of-regional-settings)

我正在尝试将其应用于我的情况，但不明白如何从太平洋时间（PST 或 PDT，视情况而定）字符串开始并到达 UTC 日期时间。具体来说，该解决方案应用 flag `DateTimeStyles.AssumeUniversal`，而我需要假设 Pacific Time。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T19:12:19.263

您将不得不使用 TimeZoneInfo.ConvertTimeToUtc(DateTime, TimeZoneInfo) 进行转换。服务器的时区无关紧要。使用 FindSystemTimeZoneById() 选择您作为第二个参数传递的时区。您需要“太平洋标准时间”作为 id。

此函数使用存储在注册表中并由 Windows 维护的时区数据库。时区规则随时间而变化，尤其是夏令时转换，因此在该计算机上保持 Windows Update 处于活动状态对于允许 Microsoft 更新数据库非常重要。清楚地知道字符串的*确切*来源对于它完全正常工作很重要。

# android - 为什么当我按下返回按钮时媒体播放器仍在播放

> ID：10047549
> 
> 赞同：0
> 
> 时间：2012-04-06T18:22:37.950
> 
> 标签：android, media-player, back-button

我知道我们可以使用`onPause()`event 来停止 MediaPlayer using`reset()`方法。但我想知道为什么当我按下后退按钮时媒体播放器仍在播放？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T18:24:51.433

我相信您的媒体播放器正在由服务运行。所以当你按下*返回*键时，它只会破坏活动，而不是服务。因此，您也需要在活动的**onStop**方法中停止服务

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T18:29:14.120

您可以停止播放媒体

onBackPress() 方法...

# c++ - 在 boost.python/pyplusplus 中包装 int 指针成员变量

> ID：10047555
> 
> 赞同：0
> 
> 时间：2012-04-06T18:23:15.327
> 
> 标签：c++, python, boost, boost-python, py++

如果我使用的是 boost.python 或 pyplusplus，我该如何包装一个 int 指针，或者任何作为类成员变量的指针？

例如，我将如何包装`x`以下类：

```
class Foo{
    int * x;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-06T18:42:46.933

首先，您需要将类和属性公开给 Python。

```
#include <boost/python.hpp>

BOOST_PYTHON_MODULE(mylib)
{
    using namespace boost::python;
    class_<Foo>("Foo")
        .def_readwrite("x", &Foo::x);
} 
```

在 Python 中调用该类同样简单。

```
>>> import mylib
>>> fooObj = mylib.Foo()
>>> fooObj.x = 3
>>> print 'fooObj.x is ', fooObj.x
fooObj.x is 3 
```

# ms-access - 将数据库导出到其他计算机时出错

> ID：10047560
> 
> 赞同：1
> 
> 时间：2012-04-06T18:23:53.657
> 
> 标签：ms-access, vba

我创建了一个作为 epos 系统运行的安装程序中的数据库。

在其他计算机上安装它时，我收到大量错误，都说缺少某些东西。该文件在我的计算机上完美运行，但错误阻止任何其他计算机上的工作....

错误如下。每个都有自己的弹出框。

```
broken reference to excel.exe version 1.7 or missing.
acwztool.accde missing
npctrl.dll v4.1 missing
contactpicker.dll v1.0 missing
cddbcontolwinamp.dll v1.0 missing
cddbmusicidwinamp.dll v1.0 missing
colleagueimport.dll v1.0 missing
srstsh64.dll missing 
```

我觉得这可能是因为我更改了模块 vba 库引用，以便我可以运行使用 excel 的 vba 代码，不幸的是我忘记了我添加了哪些库

如果有帮助，我添加的需要新引用的代码如下

```
Public Sub SalesImage_Click()
Dim rst As ADODB.Recordset

' Excel object variables
Dim xlApp As Excel.Application
Dim xlBook As Excel.Workbook
Dim xlSheet As Excel.Worksheet
Dim xlChart As Excel.Chart

Dim i As Integer

On Error GoTo HandleErr

' excel aplication created
Set xlApp = New Excel.Application

' workbook created
Set xlBook = xlApp.Workbooks.Add

' set so only one worksheet exists
xlApp.DisplayAlerts = False
For i = xlBook.Worksheets.Count To 2 Step -1
    xlBook.Worksheets(i).Delete
Next i
xlApp.DisplayAlerts = True

' reference the first worksheet
Set xlSheet = xlBook.ActiveSheet

' naming the worksheet
xlSheet.name = conSheetName

' recordset creation
Set rst = New ADODB.Recordset
rst.Open _
 Source:=conQuery, _
 ActiveConnection:=CurrentProject.Connection

With xlSheet
    ' the field names are imported into excel and bolded
    With .Cells(1, 1)
        .Value = rst.Fields(0).name
        .Font.Bold = True
    End With
    With .Cells(1, 2)
        .Value = rst.Fields(1).name
        .Font.Bold = True
    End With

    ' Copy all the data from the recordset into the spreadsheet.
    .Range("A2").CopyFromRecordset rst

    ' Format the data the numbering system has been extended to encompas up to 9,999,999 sales to cover all posibilities of sales since the last stock take
    .Columns(1).AutoFit
    With .Columns(2)
        .NumberFormat = "#,###,###"
        .AutoFit
    End With
End With

' Create the chart.
Set xlChart = xlApp.Charts.Add
With xlChart
    .ChartType = xl3DBarClustered
    .SetSourceData xlSheet.Cells(1, 1).CurrentRegion
    .PlotBy = xlColumns
    .Location _
     Where:=xlLocationAsObject, _
     name:=conSheetName
End With

'the reference must be regotten as it is lost
With xlBook.ActiveChart
    .HasTitle = True
    .HasLegend = False
    With .ChartTitle
        .Characters.Text = conSheetName & " Chart"
        .Font.Size = 16
        .Shadow = True
        .Border.LineStyle = xlSolid
    End With
    With .ChartGroups(1)
        .GapWidth = 20
        .VaryByCategories = True
    End With
    .Axes(xlCategory).TickLabels.Font.Size = 8
    .Axes(xlCategoryScale).TickLabels.Font.Size = 8
 End With

 With xlBook.ActiveChart
.Axes(xlCategory, xlPrimary).HasTitle = True
.Axes(xlCategory, xlPrimary).AxisTitle.Characters.Text = "Product"
.Axes(xlValue, xlPrimary).HasTitle = True
.Axes(xlValue, xlPrimary).AxisTitle.Characters.Text = "Sales"
End With

 'format the size and possition of the chart
With xlBook.ActiveChart
    .Parent.Width = 800
    .Parent.Height = 550
    .Parent.Left = 0
    .Parent.Top = 0
End With

'this displays the chart in excel. excel must be closed by the user to return to the till system
xlApp.Visible = True

ExitHere:
On Error Resume Next
'this cleans the excel file
rst.Close
Set rst = Nothing
Set xlSheet = Nothing
Set xlBook = Nothing
Set xlApp = Nothing
Exit Sub

HandleErr:
MsgBox Err & ": " & Err.Description, , "There has been an error!"
Resume ExitHere

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T18:39:55.813

如果您删除项目的 Excel 引用并为 Excel 对象使用后期绑定，那么部署应该不会那么麻烦。

缺点是您在后期绑定的开发过程中失去了 Intellisense 的优势。然而，在开发期间的早期绑定和生产期间的后期绑定之间切换非常容易。只需更改编译器常量的值。

在模块的声明部分...

```
 #Const DevStatus = "PROD" 'PROD or DEV 
```

然后在程序的主体内......

```
 #If DevStatus = "DEV" Then
        Dim xlApp As Excel.Application
        Dim xlBook As Excel.Workbook
        Dim xlSheet As Excel.Worksheet
        Set xlApp = New Excel.Application
    #Else ' assume PROD (actually anything other than DEV)
        Dim xlApp As Object
        Dim xlBook As Object
        Dim xlSheet As Object
        Set xlApp = CreateObject("Excel.Application")
    #End If 
```

通过后期绑定，您的代码将需要使用 Excel 常量的值而不是常量名称。或者您可以在块中定义命名常量以`#Else`供生产使用，然后继续在代码中按名称使用它们。

我不知道所有其他参考是什么。建议您复制您的项目，删除所有这些引用，看看当您`Debug->Compile`从 VB 编辑器的主菜单运行时会发生什么。不选中任何不需要的参考。并尝试对其余部分进行后期绑定。我在 Access 应用程序的生产版本中只使用了 3 个引用：VBA；使用权; 和 DAO。

# php - MySQL全文搜索布尔模式混淆

> ID：10047565
> 
> 赞同：6
> 
> 时间：2012-04-06T18:24:07.163
> 
> 标签：php, mysql, search, full-text-search, boolean

尝试在布尔模式下使用全文搜索设置搜索时，我有点困惑。这是我正在使用的查询：

```
$query = "SELECT *,

       MATCH(title) AGAINST('$q' IN BOOLEAN MODE) AS score

       FROM results

       WHERE MATCH(title) AGAINST('$q' IN BOOLEAN MODE)

       ORDER BY score DESC"; 
```

当我运行搜索时`+divorce+refinance`，返回的结果是：

```
1) Divorce: Paying Off Spouse = Rate/Term Refinance
2) Divorce - What to Look Out For Regarding Divorced Borrowers 
```

我是否认为第二个结果不应该出现，因为它没有两个词？如果没有，我该如何创建该功能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T19:12:36.463

也许我弄错了，但如果你搜索这个字符串`+divorce+refinance`，你会得到一个奇怪的结果。如果你想搜索**这两个**词，你应该搜索`+divorce +refinance`（之间有空格）。

我测试了它，它只返回一行：

```
Divorce: Paying Off Spouse = Rate/Term Refinance 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T19:03:11.757

您的问题与创建优先布尔查询有关，对于这种类型的查询，必须深入布尔搜索以及现在如何执行布尔搜索。简单来说，让我解释一下为什么显示结果的第二个数字结果。

曾经应该首先了解布尔在编程中是什么意思？这意味着条件为真或假，即 0 到 1。

现在让我解释一下布尔搜索是如何执行的？你给了两个字。让我们以布尔模式逐行搜索。搜索引擎现在开始并在找到第一个单词的地方逐行搜索，它使记录为真并对找到第一个单词的行给予 1 分，并准备在该行中找到的单词数。

现在它移动下一个单词并执行相同的过程，使记录为 True，并在找到该单词的任何位置创建一个记录列表，并准备在该行中找到的单词数。

现在有两行结果可用，它们被合并，优先考虑单词数最多的单词，这里的行是主要问题所在。

> 例子
> 
> 第一个>>>总数。>> 第二 >> 总数 >>> 最终 >> 行
> 单词 >>> 结果 >> 单词 >>>> 单词 >>> 结果 >>no >>Answer
> 
> * * *
> 
> 1 >>>>>>>> 2 >>>>>>>>1>>>>>>>>>>1>>>>>>>>1.33>>>> 1 >>> 1.33
> 0 >> >>>>>> 0 >>>>>>>>2>>>>>>>>2>>>>>>>>1.25>>>> 2 >>> 1.25
> 0 >>>>> >>> 0 >>>>>>>>1>>>>>>>>>0>>>>>>>>1.25>>>> 3 >>> 1

当将两个结果列表合并为 true 时添加 false 则结果为 true，就好像您添加 1 + 0 = 1 并且结果的值应该大于 1。因此，在对找到的单词的相关性进行评分时，总是发现搜索引擎显示它找到任何单词的结果。

评分相关性查询有两种类型，一种是忽略等于 1 的分数，只对分数大于 1 的记录进行计算。第二种是进行这样的查询，它永远不会显示等于 1 的记录。与您的情况一样，您也可以通过以下方式获得两个单词的正确结果：

```
SELECT *, ( (1.3 * (MATCH(title) AGAINST ('+term +term2' IN BOOLEAN MODE))) + (0.6 * (MATCH(text) AGAINST ('+term +term2' IN BOOLEAN MODE))) ) AS score FROM results WHERE ( MATCH(title, text) AGAINST ('+term +term2' IN BOOLEAN MODE) ) HAVING relevance > 0 ORDER BY relevance DESC; 
```

我知道使用 HAVING 这个词会使查询变得有点慢，但没有其他可用的解决方案。希望这能解决您的疑问。

# svn - 域上的 SVN：如何将主干释放到域上的文件夹中

> ID：10047566
> 
> 赞同：0
> 
> 时间：2012-04-06T18:24:16.490
> 
> 标签：svn, dns

对 SVN 来说是全新的，我为noobishness 道歉。我在这个问题上四处搜索无济于事（可能措辞不正确）。

我们在联网的 Windows 域上设置了一个 svn。基本上我希望能够在本地签出文件，修改，将我的更改提交到主干，然后将主干释放到域上的文件夹中。

这是我感到困惑的最后一步。

我想它是这样的：

svn 复制 [https://controller.company.local:8443/svnroot/javascript/trunk](https://controller.company.local:8443/svnroot/javascript/trunk) //controller/dummydirectory/

但显然这行不通。我显然错过了与 svn 的工作方式或命令中的协议有关的东西，或者希望像无意义的文件路径一样简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T19:25:43.760

您可以将主干检出到您的网络驱动器（执行一次）：

```
svn checkout https://controller.company.local:8443/svnroot/javascript/trunk //controller/dummydirectory/ 
```

然后在更改主干时更新它：

```
svn update //controller/dummydirectory 
```

“更新”将查找在主干上所做的更改并将它们合并到网络驱动器上的工作副本中。

或者你也可以使用 svn export：

```
svn export https://controller.company.local:8443/svnroot/javascript/trunk //controller/dummydirectory/ 
```

这只会复制没有任何版本信息的文件（即没有 .svn 文件夹）。

希望这可以帮助..

# c# - 临时挂起工作线程的正确方法

> ID：10047571
> 
> 赞同：1
> 
> 时间：2012-04-06T18:24:42.340
> 
> 标签：c#, .net, multithreading, sleep, worker

我有一个工作线程，它可能在短时间内处于活动状态，而在其余时间处于空闲状态。我正在考虑让线程进入睡眠状态，然后在需要时唤醒它。

我应该注意的任何其他建议？

谢谢！

*   这是在 C#/.NET4 中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T18:27:15.770

您可能不应该使用持久工作线程 - 使用线程池。这正是它的目的。

```
ThreadPool.QueueUserWorkItem(() => {
    // My temporary work here
}); 
```

如果你坚持要有一个持久的工作线程，让它运行这个：

```
// This is our latch- we can use this to "let the thread out of the gate"
AutoResetEvent threadLatch = new AutoResetEvent(false);

// The thread runs this
public void DoBackgroundWork() {
    // Making sure that the thread is a background thread
    // ensures that the endless loop below doesn't prevent
    // the program from exiting
    Thread.IsBackground = true;
    while (true) {

        // The worker thread will get here and then block 
        // until someone Set()s the latch:
        threadLatch.WaitOne();

        // Do your work here
    }
}

//  To signal the thread to start:
threadLatch.Set(); 
```

另请注意，如果此后台线程要与用户界面交互，则需要相应地调用或 BeginInvoke。见[http://weblogs.asp.net/justin_rogers/pages/126345.aspx](http://weblogs.asp.net/justin_rogers/pages/126345.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T18:39:55.597

只需使用一个事件来暂停工作线程：重置 - 暂停，设置 - 未暂停（工作）状态。

这是演示该方法的代码**草案版本。**

```
class Worker
{
    private Thread _thread;

    // Un-paused by default.
    private ManualResetEvent _notToBePaused = new ManualResetEvent(true);

    public Worker()
    {
        _thread = new Thread(Run)
            {
                IsBackground = true
            };
    }

    /// <summary>
    /// Thread function.
    /// </summary>
    private void Run()
    {
        while (true)
        {
            // Would block if paused!
            _notToBePaused.WaitOne();

            // Process some stuff here.
        }
    }

    public void Start()
    {
        _thread.Start();
    }

    public void Pause()
    {
        _notToBePaused.Reset();
    }

    public void UnPause()
    {
        _notToBePaused.Set();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T19:00:27.673

使用 WaitHandle 发出信号是正确的方法，但只是补充其他人已经说过的话

我通常会使用 2 个信号一起工作，否则您将不知道在需要时是“继续”还是“退出” - 或者不得不采取一种不太优雅的方式来做到这一点（停止线程 - 当然有还有其他做这样的事情的方法，只是一个“模式”）。所以通常它与“退出”信号和“新工作可用”信号一起工作 - 协同工作。例如

```
WaitHandle[] eventArray = new WaitHandle[2] { _exitEvent, _newWorkEvent };
while ((waitid = WaitHandle.WaitAny(eventArray, timeout, false)) > 1)
{
    // do your work, and optionally handle timeout etc.
} 
```

注意：
exit`ManualResetEvent`初始状态为“假”-“设置”事件退出。
`_newWork`是`Manual`在这种情况下，您需要从外部暂停/继续，这就是您想要的-我认为-
...或者也可能是`new AutoResetEvent(false)`您“发出信号”以进行一个工作循环，信号立即返回“假”-并且您需要为每个“新批次”工作重复这一点 - 这有点简化。（通常这与传递一些“消息”密切相关，当然以某种方式同步）。

希望这会增加更多信息，

# c# - Code First Fluent API 验证不起作用

> ID：10047582
> 
> 赞同：4
> 
> 时间：2012-04-06T18:25:25.417
> 
> 标签：c#, asp.net-mvc-3, entity-framework, ef-code-first, entity-framework-4.3

有一个类 - 这是一个普通的类，没什么特别的：

```
public class Trader{

public Guid UserId {get;set;}
public int TraderId { get; set; }
public string FirstName { get; set; }
public string LastName { get; set; }
public string PhoneNumber { get; set; }
public string Skype { get; set; }
public string Photo { get; set; }
public string Email { get; set; }

public virtual User User { get; set; }
} 
```

映射：

```
 public TraderMap()
        {
            this.ToTable("Trader", "General");
            this.HasKey(a => a.TraderId);
            this.HasRequired(a => a.User).WithMany().HasForeignKey(a => a.UserId);
            Property(a => a.UserId).HasColumnName("UserID").IsRequired();
            Property(a => a.TraderId).HasColumnName("TraderID").IsRequired();

            Property(a => a.FirstName).HasMaxLength(50).IsRequired();
            Property(a => a.LastName).HasMaxLength(50).IsRequired();
            Property(a => a.PhoneNumber).HasMaxLength(25).IsRequired();
            Property(a => a.Skype).HasMaxLength(50).IsOptional();
            Property(a => a.Photo).HasMaxLength(100).IsOptional();
            Property(a => a.Email).HasMaxLength(100).IsRequired();
        } 
```

**当我在表单（视图）中将 FirstName 或 IsRequired() 的其他字段留空时，验证不会启动。**它只是遇到错误：

> 一个或多个实体的验证失败。有关更多详细信息，请参阅“EntityValidationErrors”属性。

不幸的是，这个错误并没有说太多。我挖得更深了，但我唯一能得到的是

> 列名鉴别器无效。

我认为这将是某处被遗忘的继承（对于 User 类），但我没有发现任何可疑之处。

问题是当我在 Trader 类中使用属​​性时，一切都按预期工作。

```
 public class Trader{

    public Guid UserId {get;set;}
    public int TraderId { get; set; }
    [Required]
    public string FirstName { get; set; }
    [Required]
    public string LastName { get; set; }
    [Required]
    public string PhoneNumber { get; set; }
    public string Skype { get; set; }
    public string Photo { get; set; }
    [Required]
    public string Email { get; set; }

    public virtual User User { get; set; }
    } 
```

使用属性，验证工作正常，@Html.ValidationMessageFor 开始显示错误消息，并且不允许发送 NULL 值。

你有什么建议我的映射会有什么问题吗？

**更新 1** 事实上，上面的属性是这个问题的一个可能的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T18:38:25.373

仅当您使用“数据注释”时才开始验证 - 而 HasRequired 执行映射 - 数据注释属性同时执行映射和验证部分。
即为了验证您的观点，我相信您必须在您的属性上放置注释/属性。

这通常用于在“映射”与映射和验证之间“区分”。即，如果您希望两者都使用属性，如果您只想映射使用流畅的配置。

这里也有一个相关的答案[https://stackoverflow.com/a/9310435/417747](https://stackoverflow.com/a/9310435/417747)或[https://stackoverflow.com/a/9789984/417747](https://stackoverflow.com/a/9789984/417747)

编辑：这更接近你所需要的，感谢贾斯汀
[如何使流利的 API 配置与 MVC 客户端验证一起工作？](https://stackoverflow.com/questions/8894367/how-to-make-fluent-api-configuration-work-with-mvc-client-side-validation)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T18:59:09.760

我认为您将 EF 模型验证与 MVC 验证混淆了。MVC 对 EF 一无所知，反之亦然。它们是独立的技术，可以很好地协同工作。

当您在流式数据模型上定义验证时，您只是在为实体框架定义验证。这显然有效，因为当您尝试保存更改时，EF 失败并抱怨验证失败。

同样，这与 MVC 验证无关，并且两者在大多数情况下不能一起工作（一个例外是，如果您使用 POCO 类并使用 Data 注释，则某些注释在 MVC 和 EF 中都有效，但有些不这样做。直接在视图中使用数据模型不是一个好习惯，所以这在很大程度上是一个有争议的问题。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T19:29:56.353

你说的都是对的，我的假设是错误的。

**[必需] 不等同于 .IsRequired()**

有几种可能的解决方案：

1）**快速简单**：[属性](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-validation-to-the-model)

> **模型配置覆盖和验证**
> 
> 使用 CodeFirst，可以覆盖使用验证属性定义的模型配置，例如在 OnModelCreating 方法中。重新配置模型会影响验证，因为验证应该使用实际的模型配置——盲目使用属性会导致验证错误，因为根据 OnModelCreating() 中的覆盖，这些值可能是有效的。以下是在 OnModelCreating 中进行覆盖的三种特殊情况：
> 
> *   如果一个属性用 [Required] 属性修饰并被重新配置为可选（.IsOptional() 方法），则 [Required] 属性将被删除并因此在验证发生时被忽略
>     
>     
> *   如果属性用 [StringLength] 或 [MaxLength] 属性修饰，然后配置了新长度（.HasMaxLength() 方法），如果可能，将使用新的最大长度
>     
>     
> *   如果用 [StringLength] 或 [MaxLength] 属性修饰属性，然后将其定义为允许的最大长度 (.IsMaxLength)，则将删除该属性（如果可能）并且不会检查属性值的长度
>     
>     
> 
> 请注意，上述更改仅在使用某些验证属性修饰的属性时才有效。因此，根据需要设置属性 (.IsRequired()) 不会导致针对空值验证属性。
> 请参阅[EF 功能 CTP5：验证](http://blogs.msdn.com/b/adonet/archive/2010/12/15/ef-feature-ctp5-validation.aspx)

2）**一个快速修复**，但它是一个肮脏的，因为神秘人建议
[http://thedatafarm.com/blog/data-access/capturing-code-first-fluent-api-validationresults-to-display-in-mvc3-views/](http://thedatafarm.com/blog/data-access/capturing-code-first-fluent-api-validationresults-to-display-in-mvc3-views/)

[http://bradwilson.typepad.com/blog/2010/10/service-location-pt6-model-validation.html](http://bradwilson.typepad.com/blog/2010/10/service-location-pt6-model-validation.html)

3) **The heavy one**: [The Validation Application Block in Enterprise Library](http://msdn.microsoft.com/en-us/library/ff664356%28v=pandp.50%29.aspx)
[http://bradwilson.typepad.com/blog/2009/10/enterprise-library-validation-example-for-aspnet-mvc-2.html](http://bradwilson.typepad.com/blog/2009/10/enterprise-library-validation-example-for-aspnet-mvc-2.html) but Enterprise Library is very often considered as an overkill

4) **Validation nirvana**: [FluentValidation](http://fluentvalidation.codeplex.com/) looks very promising and I'll definitely give it a try.
[http://www.nuget.org/packages/FluentValidation.MVC3](http://www.nuget.org/packages/FluentValidation.MVC3)
Cons: Not the best approach in an n-layer app. It's primarily focused on Views.

5) **N-Layer**
[http://www.asp.net/mvc/tutorials/older-versions/models-(data)/validating-with-a-service-layer-cs](http://www.asp.net/mvc/tutorials/older-versions/models-(data)/validating-with-a-service-layer-cs)
This approach leads to problems with a validation on the client side so it must be solved separately.

# php - 浏览器不遵循来自 AJAX 响应的重定向（PHP 生成的响应使用 CAS 身份验证）

> ID：10047584
> 
> 赞同：5
> 
> 时间：2012-04-06T18:25:41.130
> 
> 标签：php, jquery, ajax, cas

好的，看来我在最初的问题上犯了一个错误。所以，这里有一些更正。答案仍然适用，因为当协议更改为 HTTPS (SSL) 时会停止第二次重定向。

就我而言，我多次发生重定向，并且浏览器不遵循第二次重定向。**遵循第一个重定向但返回错误。**

我一直在阅读包含重定向的 JavaScript AJAX 响应会被自动跟踪，但在我的情况下似乎不是。浏览器自动跟随第一个重定向，返回第一个重定向而不跟随标头中的第二个重定向。我的问题是我希望浏览器自动跟踪所有重定向。

重定向是 phpCAS 库的一部分。我有一个用 PHP 编写的 API，它每次都会在返回结果之前检查用户身份验证。

这是顺序。需要注意的主要是浏览器在执行 1 次重定向之后返回第二个响应。当我对`localhost/example/api`.

**本地主机/示例**

*   `localhost/example/api`使用 jQuery.ajax()调用

**响应 1：localhost/example/api**

*   重定向到`https://localhost/accounts/cas/login?service=api.example.com&gateway=true`（使用 SSL）。

**响应 2: (SSL) localhost/accounts/cas/login?service=api.example.com&gateway=true**

*   当查询键 'gateway' 存在时，登录会简单地重定向回由 'service' 键提供的 URL，无论是否有票证（向服务发出信号，告知用户是否已登录）。

**响应 3：localhost/api?ticket=TICKET**

*   验证票证并在没有票证的情况下重定向回自身。

**响应 4：本地主机/api**

*   这次 CAS 客户端查看 $_SESSION 以记住票据是什么，然后处理返回 JSONP 的 API 请求。

我在 OpenID 或 OpenAuth(orization) 上使用 CAS 并没有什么特别的原因。CAS 只是我能够在 WordPress 中使用的第一个身份验证模块。我对使用不同的身份验证库、CMS、框架等方面的建议持开放态度。虽然，我希望只是完成这个项目。因此，重新加工的次数越少越好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T19:03:14.457

正如您后来发现自己在评论中添加的那样，ajax 请求受制于[同源策略](https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript)。

是的，您可以使用 JSONP - 但是，如果您有幸只支持 IE8 及更高版本，[CORS](http://www.w3.org/TR/cors/#use-cases)可能是更好的解决方案。

基本上，添加标题，如

```
access-control-allow-origin: http://api.example.com
access-control-allow-credentials: true 
```

对于您的服务器答案，您可以解决跨源策略。

另请参阅此[jQuery 票证](http://bugs.jquery.com/ticket/8283)以使其与 jQuery 一起使用。

# crystal-reports - 重新排列水晶报告中的字段（批量）

> ID：10047587
> 
> 赞同：1
> 
> 时间：2012-04-06T18:25:51.843
> 
> 标签：crystal-reports, field, crystal-reports-2008

1.  我有一份包含大约 20 个字段和 1 个按字段分组的报告。当我创建一个新报告并按照向导进行操作时，它可以帮助我创建完整的报告，但所有领域都非常拥挤。它们在默认布局中并不真正可用。我想重新排列它们（增加尺寸，并将它们分开）。我可以通过选择多个字段并更改大小在 Crystal Report 中执行此操作吗？有解决办法吗？

2.  对我来说，另一种选择是将所有字段布局在页面页面侧向和彼此顶部，就像在表格中一样。这实际上看起来很漂亮和专业，只是在这种情况下缺少标题。由于我使用的是 group by 并且 1 group 包含大约 1-5 条记录，因此这种布局非常适合我。当水晶报表中的字段过多时您会做什么的任何建议。我是水晶新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:20:51.937

是的，您可以将所有字段重新排列为水晶报表设计。您可以将页面大小从纵向更改为横向。默认向导为您提供了一些默认设计。您可以在完成向导后更改所有内容。

# sql - sql db2 从任一表中选择记录

> ID：10047590
> 
> 赞同：0
> 
> 时间：2012-04-06T18:26:05.013
> 
> 标签：sql, join, db2

我有一个订单文件，其中包含订单 ID 和发货日期。订单只能在周一至周五发货。这意味着没有为周六和周日选择记录。

我使用相同的订单文件来获取所有订单日期，日期格式相同（yyyymmdd）。

我想根据订单日期从订单文件中选择所有记录的计数......和（我相信）完全外部连接（或者可能是正确连接？）日期文件......因为我想看看

20120330 293

20120331 0

20120401 0

20120402 920

20120403 430

20120404 827

ETC...

但是，我的 sql 语句仍然没有返回第 31 和第 1 的零记录。

```
with DatesTable as (
   select ohordt "Date" from kivalib.orhdrpf
   where ohordt between 20120315 and 20120406
   group by ohordt order by ohordt
)

SELECT ohscdt, count(OHTXN#) "Count"

FROM KIVALIB.ORHDRPF full outer join DatesTable dts on dts."Date" = ohordt
--/*order status = filled & order type = 1 & date between (some fill date range)*/

WHERE OHSTAT = 'F' AND OHTYP = 1 and ohscdt between 20120401 and 20120406

GROUP BY ohscdt ORDER BY ohscdt 
```

任何想法我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T20:35:27.843

这是因为那些日子没有数据，它们不会显示为行。您可以使用递归 CTE 在查询可以连接的两个值之间构建一个连续的日期列表：

它看起来像：

```
WITH dates (val) AS (
    SELECT CAST('2012-04-01' AS DATE)
    FROM SYSIBM.SYSDUMMY1
        UNION ALL
    SELECT Val + 1 DAYS
    FROM dates
    WHERE Val < CAST('2012-04-06' AS DATE)
)

SELECT d.val AS "Date", o.ohscdt, COALESCE(COUNT(o.ohtxn#), 0) AS "Count"
FROM dates AS d
LEFT JOIN KIVALIB.ORDHRPF AS o
  ON o.ohordt = TO_CHAR(d.val, 'YYYYMMDD')
WHERE o.ohstat = 'F'
  AND o.ohtyp = 1 
```

# iphone - MSMutableArray 中的 Objective-c UIImage 存储替代方案，潜在的内存泄漏？

> ID：10047594
> 
> 赞同：1
> 
> 时间：2012-04-06T18:26:16.867
> 
> 标签：iphone, objective-c, ios, ios5, memory-leaks

我正在使用 ARC 为 iOS 5 构建应用程序，但我似乎遇到了一些内存问题。基本上，它对显示器的一部分进行屏幕截图，将 UIImage 放在一个 MSMutableArray 中，然后将屏幕截图拼凑成一个大图像。现在的问题是，在这样做了几次之后，操作系统由于高内存使用而关闭了应用程序。

这是将 UIImage 拼凑在一起的片段：

```
UIImage* finalImage = nil;
//join the screenshot images together
UIGraphicsBeginImageContext(CGSizeMake(collage.width, collage.height));
{
    int hc = 0;
    for(UIImage *img in imageArr)
    {
        NSLog(@"drawing image at:: %i", hc);
        [img drawAtPoint:CGPointMake(0, hc)];
        hc+=img.size.height;
        img = nil;
    }

    //NSLog(@"creating finalImage");
    finalImage = UIGraphicsGetImageFromCurrentImageContext();
}
UIGraphicsEndImageContext();
//do something with the combined image
//remove all the objects
[imageArr removeAllObjects];
//reset class instance
[self setImageArr: [[NSMutableArray alloc] init]]; 
```

它们是我可以使用的任何其他替代方案，因此没有使用太多内存吗？也许将 CGImageRef 存储在数组中？上述代码是否存在任何潜在的内存泄漏？

任何提示，指针将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:55:16.010

`[imageArr removeAllObjects];`将从数组中删除对象。无需再次重置阵列

```
 [self setImageArr: [[NSMutableArray alloc] init]]; 
```

通过这样做，您分配了一个 NSMutableArray 对象而不是释放它。

删除线试试`[self setImageArr: [[NSMutableArray alloc] init]];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:40:05.593

确保你分配并初始化 setImageArr

```
if (setImageArr == nil){
setImageArr = [[NSMutableArray alloc]init];
}
else
{
[setImageArr removeAllObjects];
} 
```

或使用（如果您想从现有数组初始化）：

```
NSMutableArray *setImageArr = [[NSMtableArray]initWithArray:arrayOfImages]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T04:40:19.340

因为你说它之后会有内存问题`doing this a couple of times`。那么你如何`NSAutoreleasePool`在你的方法之后使用强制系统释放对象，示例如下：

```
@autoreleasepool {
    UIImage* finalImage = nil;
    //join the screenshot images together
    UIGraphicsBeginImageContext(CGSizeMake(collage.width, collage.height));
    {
        int hc = 0;
        for(UIImage *img in imageArr)
        {
            NSLog(@"drawing image at:: %i", hc);
            [img drawAtPoint:CGPointMake(0, hc)];
            hc+=img.size.height;
            img = nil;
        }
        finalImage = UIGraphicsGetImageFromCurrentImageContext();
    }
    UIGraphicsEndImageContext();
    //do something with the combined image
    //remove all the objects
    [imageArr removeAllObjects];
    //reset class instance
    [self setImageArr: [[NSMutableArray alloc] init]];
} 
```

而且我也怀疑您的其他代码中是否存在任何内存泄漏问题。使用 ARC 并不意味着没有内存泄漏问题，也许您将许多无用的对象存储在全局变量等中。

也许您应该使用 Instruments 来监控内存以找出内存的去向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T13:24:17.050

原来 imageArr 正在被正确清除。程序中的其他地方似乎存在内存问题。

# java - 流畅地重新排序 JList 的“最佳”方法是什么？

> ID：10047595
> 
> 赞同：4
> 
> 时间：2012-04-06T18:26:17.013
> 
> 标签：java, swing, list, jlist

我正在制作一个基于摇摆的应用程序，其中我有一个 JList 定期更新相同数据的不同顺序，很少更新新项目，也很少更新较少项目。我正在尝试找出使这看起来不错的最佳方法。现在，我只是打电话

```
JList.setListData(String [] data); 
```

这看起来不太好，它清除了选定的项目。

我想要一种更新它的方法，如果它从列表中删除，则只清除选定的项目，否则保持相同的项目被选中，即使它们的索引发生变化。我正在研究跟踪选择了哪些索引，然后在更改数据后设置所选项目，但这听起来很可怕。我还查看了 ListModels 并跟踪我自己的，但似乎选择的项目保存在 JList 本身中，因此也不能完美地工作。

我真的很感激任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T18:37:06.430

似乎标准`JList`没有调整排序的方法（为什么他们只将它添加到`JTable`...），但是有一个[排序列表的教程](http://java.sun.com/developer/technicalArticles/J2SE/Desktop/sorted_jlist/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T19:04:36.410

我给你做了一个工作的例子。

我使用了`JList`您要求的类似按钮，添加了从列表中选择、添加和删除的按钮。

无论如何，希望这会有所帮助！

干杯。

```
public class Test {

    private static String selectedValue = null;
    private static JList jList = new JList();

    public static void main(String args[]) {
        JFrame jFrame = new JFrame();
        jFrame.setSize(500, 500);
        jFrame.setLocationRelativeTo(null);
        jFrame.setLayout(new GridLayout(4, 1));

        jList = new JList(new String[]{"1", "2", "3", "4", "5"});
        jFrame.add(jList);

        JButton rearrangeButton = new JButton("rearrange");
        rearrangeButton.addActionListener(new Test().new SelectedListener());
        jFrame.add(rearrangeButton);

        JButton addButton = new JButton("add");
        addButton.addActionListener(new Test().new SelectedListener());
        jFrame.add(addButton);

        JButton deleteButton = new JButton("delete");
        deleteButton.addActionListener(new Test().new SelectedListener());
        jFrame.add(deleteButton);

        jFrame.setVisible(true);
    }

    private class SelectedListener implements ActionListener {

        public void actionPerformed(ActionEvent actionEvent) {
            storeSelected();

            if (actionEvent.getActionCommand().equalsIgnoreCase("rearrange")) {
                jList.setListData(new String[]{"5", "4", "3", "2", "1"});
            } else if (actionEvent.getActionCommand().equalsIgnoreCase("add")) {
                List< String> items = new ArrayList< String>();

                for (int item = 0; item < jList.getModel().getSize(); item++) {
                    items.add(jList.getModel().getElementAt(item).toString());
                }

                items.add("new");

                jList.setListData(items.toArray());
            } else if (actionEvent.getActionCommand().equalsIgnoreCase("delete")) {
                List< String> items = new ArrayList< String>();

                for (int item = 0; item < jList.getModel().getSize(); item++) {
                    items.add(jList.getModel().getElementAt(item).toString());
                }

                items.remove(0);

                jList.setListData(items.toArray());
            }

            reSelect();
        }
    }

    private static void storeSelected() {
        if (jList.getSelectedIndex() > -1) {
            selectedValue = jList.getSelectedValue().toString();
        } else {
            selectedValue = null;
        }
    }

    private static void reSelect() {
        if (selectedValue != null) {
            jList.setSelectedValue(selectedValue, true);
        }
    }
} 
```

# ios - 移动地图视图后显示标注

> ID：10047596
> 
> 赞同：3
> 
> 时间：2012-04-06T18:26:34.057
> 
> 标签：ios, mkmapview, mkannotationview

我在地图视图上有几个注释。选择其中一个（启用标注）后，我希望地图以它为中心。我呼吁`[mapView setCenterCoordinate:coordinate animated:YES];`实现`didSelectAnnotationView`这一目标。

它有效但并非总是如此 - 基本上当没有足够的空间来显示标注时，地图会移动并选择注释，但标注不会显示（无论移动是否动画）。如果我自己不使用 移动地图`setCenterCoordinate`，则在选择注释后，地图会自动移动（只是稍微移动）以显示标注，并且每次都可以使用。

任何想法如何使它适用于我的情况？总而言之，我想将地图集中在所选注释上并显示标注。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T15:35:51.317

`setCenter`通过稍微延迟调用来解决它`didSelectAnnotationView`：

```
dispatch_time_t dt = dispatch_time(DISPATCH_TIME_NOW, 0.2 * NSEC_PER_SEC);
dispatch_after(dt, dispatch_get_main_queue(), ^(void)
{
    [mapView setCenterCoordinate:view.annotation.coordinate animated:YES];
}); 
```

# delphi - 使用 LDAP 或 ADSI 与 Delphi 进行用户帐户管理

> ID：10047599
> 
> 赞同：7
> 
> 时间：2012-04-06T18:26:49.420
> 
> 标签：delphi, active-directory, ldap, delphi-2010, adsi

我们为大型医疗索赔处理组织和企业提供大型交易处理系统（批处理）ERP 解决方案。我们目前实施我们自己的用户帐户管理。即，具有适当权限/角色的用户可以创建、编辑或删除帐户，并根据需要分配权限和角色。

每个用户使用分配的帐户登录，并根据权限和角色分配对功能的访问。

客户询问我们是否支持 LDAP 或 Active Directory，用户帐户是否在虚拟域控制器上进行管理，并且一旦登录，用户就无需登录其他软件......例如，我们的。

我一直在查看 LDAP 协议和 Active Directory 服务接口。

只是想知道是否有人有这方面的经验，以及实现支持这些过渡的最佳方法是什么？我特别关心我们是否必须停止使用我们目前的帐户管理和登录系统？

我们目前正在使用 Delphi 2010 和 UNIDAC（用于数据库连接）进行开发。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:42:24.560

要在 AD 上验证用户身份，您可以尝试使用以下 adshlp 库：

[http://www.agnisoft.com/white_papers/active_directory.asp](http://www.agnisoft.com/white_papers/active_directory.asp)

有一些方法可以使用这个库自动登录。

# java - 尝试使用 JPA 注释保留具有复合键和基本值的映射

> ID：10047600
> 
> 赞同：0
> 
> 时间：2012-04-06T18:26:57.313
> 
> 标签：java, hibernate, postgresql, jpa, annotations

我有一个带有地图的实体。我在 PostgreSQL 上使用休眠。地图中的类是由 Java 定义的，我无法注释。我正在修改的类是从我无法更改的 XML 模式生成的。

所以我有

```
 import java.util.HashMap;
   import java.util.Map;
   import javax.xml.namespace.QName;

   @Entity public class TestClass {
   @XmlTransient
   @Id
   @GeneratedValue(strategy = GenerationType.IDENTITY)
   private long pk;

   ...

   @XmlAnyAttribute
   @ElementCollection(fetch = FetchType.EAGER)
   @Embedded
   private final Map<QName, String> otherAttributes = new HashMap<QName, String>();

   ... 
```

我正在使用 PostGreSQL，我收到以下错误：

```
Unsuccessful: create table TestClass_otherAttributes (TestClass_pk int8 not null, count int4 not null, hash int4 not null, offset int4 not null, value varchar(255), localPart varchar(255), namespaceURI varchar(255), prefix varchar(255), primary key (TestClass_pk, localPart, namespaceURI, prefix))
ERROR: syntax error at or near "offset" Position: 160 
```

显然，这意味着其中一个字符串中的 order 字段（很可能在 QName 中，但很难确定）被保留，因此创建表失败。

我对此进行了研究，并发现了许多其他注释会影响它如何构建和命名连接表，但没有任何东西可以让我引用字段名称（同样，不能注释 QName 或 String）也不会影响列名这不需要键或值类中的注释。

所以我的问题是，要添加的最少注释数量是多少，以便我可以保留此地图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:55:51.263

`offset`是 PostgreSQL 和 2008 标准中的保留字：

[http://www.postgresql.org/docs/current/interactive/sql-keywords-appendix.html](http://www.postgresql.org/docs/current/interactive/sql-keywords-appendix.html)

如果您有权访问 SQL，或者可以控制它的发出方式，则可以将列名放在引号中（双引号字符：["]）。带引号的标识符始终被视为标识符，并且永远不会与保留的标识符冲突如果你不能改变列名，也不能引用它，你就不能让它在 PostgreSQL 或任何符合 SQL-2008 的数据库产品中工作。

# python - 是否可以使用 GPU 来加速 Python 中的散列？

> ID：10047601
> 
> 赞同：12
> 
> 时间：2012-04-06T18:26:58.967
> 
> 标签：python, hash, gpu

[我最近阅读了 Jeff 的题为Speed Hashing](http://www.codinghorror.com/blog/2012/04/speed-hashing.html)的博客文章，其中除其他外，他提到您可以通过利用 GPU 的力量非常快速地对事物进行哈希处理。

我想知道是否可以利用 GPU 的力量在 Python（md5、sha-1 等）中对事物进行哈希处理？

我对此很感兴趣，因为我试图看看我能以多快的速度暴力破解事物（不是现实世界的东西，来自旧的泄露数据转储）。

目前，我正在做这种事情（简化示例）：

```
from itertools import product
from hashlib import md5

hashes = ["some","hashes"]

chars = []
for i in range(97,123): # a-z only
    chars.append(chr(i))

for i in range(1,6): # all combos of a-z, 1-5 chars
    for c in product(chars,repeat=i):
       s = ''.join(c)
       if md5(s).hexdigest() in hashes:
           print "Found",s 
```

但我想知道是否有办法使用 GPU 来加快速度？我猜我需要一个可以像这样连续生成哈希的模块——有人知道吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-06T19:52:39.527

有两个障碍：

1.  编写要在 GPU 上执行的程序。AFAIK，目前没有可用于将 Python 程序转换为 GPU 执行的代码的机制。所以除非你能找到你需要的东西（这可能是可能的，因为它看起来是一个相当常见的用例），那么你将不得不使用其中一种 GPU 编程语言（CUDA、OpenCL、Haskell、.. .)
2.  从 Python 调用在 GPU 上运行的程序，并交换数据。有几个 Python+CUDA 项目可以做到这一点：

    *   [http://mathema.tician.de/software/pycuda](http://mathema.tician.de/software/pycuda)
    *   [http://code.google.com/p/pystream/](http://code.google.com/p/pystream/)
    *   [https://launchpad.net/python-cuda](https://launchpad.net/python-cuda)

    通过适当的搜索，您可能会找到更多。

    [Python GPU编程](https://stackoverflow.com/questions/5957554/python-gpu-programming)看起来也 很相关

    然后，Python 程序将使用第 2 部分中的一种技术或等效技术加载并调用 GPU“内核”（使用本答案第 1 部分中的技术创建的程序）。

编辑您可能会生成整套“蛮力”值，以及 GPU 上的 md5 哈希值。然后只需使用 Python 检索结果。这可能比在 Python 中生成值、将它们传递给 GPU、然后取回 md5 更容易。

如果我理解了，程序会生成所有 1 个字符、2、3、4、5 和 6 个小写字母字符串，并生成 md5 哈希，是吗？

* * *

Edit2 - 我之前的分析完全错误 - 我很抱歉

* * *

Edit3：略读[维基百科 MD5](http://en.wikipedia.org/wiki/MD5)看起来可以优化为恒定长度字符串（例如 6 个 ASCII 字符）计算 MD5。

根据维基百科的伪代码，它只有 64 个循环，每组 16 个循环迭代使用相同的算法。因此，如果密钥小于 55 个字节，则计算的核心可以从以下位置“展开”：

```
for i from 0 to 63
    if 0 ≤ i ≤ 15 then
        f := (b and c) or ((not b) and d)
        g := i
    else if 16 ≤ i ≤ 31
        f := (d and b) or ((not d) and c)
        g := (5×i + 1) mod 16
    else if 32 ≤ i ≤ 47
        f := b xor c xor d
        g := (3×i + 5) mod 16
    else if 48 ≤ i ≤ 63
        f := c xor (b or (not d))
        g := (7×i) mod 16
    temp := d
    d := c
    c := b
    b := b + leftrotate((a + f + k[i] + w[g]) , r[i])
    a := temp
end for 
```

至：

```
// i == 0
f := (b and c) or ((not b) and d)   // +4 ops
// g := i
temp := d
d := c
c := b
b := b + leftrotate((a + f + k[0] + w[0]) , r[0])  // 9 ops
a := temp
// i == 1
f := (b and c) or ((not b) and d)
// g := i
temp := d
d := c
c := b
b := b + leftrotate((a + f + k[1] + w[1]) , r[1])
a := temp 
```

这种展开会导致一些数组索引是恒定的，这应该允许一个好的 GPU 编译器进行更恒定的传播。这可能会带来显着的改善。每一步大约是 9 次操作，编译器需要 shuffle 5 条数据，因此大约 14 操作/步 * 64 步，大约 1000 次操作。

编辑4：
**格勒克！**我已经阅读了更多 Wikipedia MD5 算法 - MD5 比我意识到的更容易攻击。只有每组16的前两个循环*直接*使用了6字节的可变key字符串，其余的字符串是常量。该算法的其余部分是改组和逐位操作，这可能会进行非常重要的进一步优化。每 16 个循环中只有 2 个涉及密钥，那么这可能快 8 倍，甚至可能超过 4 倍。

所以不是 1024 核心 GPU，运行在 1GHz，给出 1024 哈希/微秒，而是说 4096/微秒或 8096/us = 4-8 哈希/纳秒

大约有 27^6 个键 = 387,420,489 个键，因此有 md5 哈希。

387,420,489 键 / 4-8/纳秒大约 = 0.05 - 0.1 秒

主机和 GPU 之间的通信会很慢，但不太可能超过 100%。

所以大约在 0.1 秒到 0.2 秒之间。

一个 md5 散列是 16 个字节，因此如果要存储它会消耗 6.2 GB。在两个现代 GPU 上，每个只需要 2 次传输，但这将是一个非常显着的开销。如果散列值被保存到磁盘（即使使用 SSD），或者通过 10Gbit 以太网移动，散列生成会被 I/O 时间淹没。

只有 94 个可打印的 ASCII 字符，因此对于每个 ASCII 6 字符键：

94^6 = 689,869,781,056 键 / 4-8/纳秒 = 86-172 秒

天啊！-（

长键，比 MD5 更好的东西！

也许尝试编写一个 Python 程序来生成最佳 GPU 算法？

通过在 Python 程序中“展开”循环来生成 GPU“内核”的文本，并打印直线计算的文本，并填写所有常量。

然后尝试找出计算每个密钥长度的 MD5 的最佳指令序列是什么。使用展开的程序，尝试跟踪每个位的操作和依赖关系，然后尝试将位及其操作重新组合成连续的 32 位字和新的直线计算。（公平地说，也许 GPU 编译器无论如何都可以做到这一点？可能会很有趣）

# jboss5.x - JBoss 5 上的 RESTEasy - 需要 jar

> ID：10047612
> 
> 赞同：3
> 
> 时间：2012-04-06T18:28:33.460
> 
> 标签：jboss5.x, resteasy

我们正在运行 JBoss 5.1.0，我正在尝试使用 RESTEasy 启动并运行一个简单的测试应用程序。但是，我无法弄清楚我需要什么才能做到这一点。显然，新版本的 JBoss 包含所有内容，但这对我没有帮助。据我了解，我需要修改我的应用程序的 web.xml 以包含引导程序和其他一些东西。然后我需要在 WEB-INF/lib 中包含一些 jar。这就是我卡住的地方。

*   我是否需要在 JBoss 的 server/lib 中包含任何 jar，或者它们都应该在我的应用程序的 WEB-INF/lib 中？

*   我需要包括哪些罐子？我们没有使用 Maven。我见过很少有教程真正提到要使用哪些罐子，当我下载 RESTEasy 时，lib 文件夹中有 65 个罐子。我没有在我的 HelloWorld 应用程序中包含 65 个罐子，只是为了让 RESTEasy 运行。我找不到任何文档清楚地告诉我在 JBoss 5 上启动和运行 RESTEasy 应用程序需要什么

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T10:50:39.183

Resteasy 库不与 JBOSS.5.1.0 捆绑在一起。您应该在 WEB-INF/lib 中包含以下库

![在此处输入图像描述](../Images/3077b05b48d6bf84b7c25bcf79844809.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-05T05:48:28.513

要添加到 Prasobh.K 的答案 - 如果在 Maven 项目设置中使用 pom.xml - 那么您只需在依赖项标签中添加以下内容：

```
 <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>jaxrs-api</artifactId>
        <version>2.3.4.Final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jaxrs</artifactId>
        <version>2.3.4.Final</version>
    </dependency>
    <dependency>
        <groupId>org.scannotation</groupId>
        <artifactId>scannotation</artifactId>
        <version>1.0.3</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jaxb-provider</artifactId>
        <version>2.3.4.Final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jackson-provider</artifactId>
        <version>2.3.4.Final</version>
    </dependency>
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-jaxrs</artifactId>
        <version>1.8.5</version>
    </dependency>
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.8.5</version>
    </dependency>
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-core-asl</artifactId>
        <version>1.8.5</version>
    </dependency> 
```

（而不是将罐子复制到 lib 文件夹中）

它还可以帮助一些人从 Wildfly 移植到 JBoss 5.1，将 ... **\WEB-INF\web.xml**更改为：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

来自wildfly版本，即：

```
<!DOCTYPE web-app PUBLIC
    "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
    "http://java.sun.com/dtd/web-app_2_3.dtd" > 
```

# c++ - 为什么int加uint返回uint？

> ID：10047614
> 
> 赞同：12
> 
> 时间：2012-04-06T18:28:53.033
> 
> 标签：c++, int, unsigned, integer-arithmetic

int plus unsigned int 返回一个 unsigned int。应该是这样吗？

考虑这段代码：

```
#include <boost/static_assert.hpp>
#include <boost/typeof/typeof.hpp>
#include <boost/type_traits/is_same.hpp>

class test
{
    static const int          si = 0;
    static const unsigned int ui = 0;

    typedef BOOST_TYPEOF(si + ui) type;
    BOOST_STATIC_ASSERT( ( boost::is_same<type, int>::value ) ); // fails
};

int main()
{
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-06T18:36:31.370

如果“应该”是指“我的编译器是否按照标准运行”：**是**的。

C++2003：第 5 条第 9 段：

> 许多期望算术或枚举类型的操作数的二元运算符会以类似的方式导致转换和产生结果类型。目的是产生一个通用类型，这也是结果的类型。这种模式称为通常的算术转换，其定义如下：
> 
> *   *废话*
> *   否则，*废话*，
> *   否则，*废话*，...
> *   否则，如果任一操作数是无符号的，则另一个应转换为无符号。

如果“应该”是指“如果没有，世界会变得更美好吗”：我没有能力回答这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-30T16:08:03.797

无符号整数类型主要表现为包装抽象代数环的成员，这些值等效于 mod 2^N; 人们可能会认为 N 位无符号整数不是表示特定整数，而是在底部 N 位中具有特定值的所有整数的集合。例如，如果将后 4 位为`...1001`和的两个二进制数相加`...0101`，则结果将是`...1110`。如果加一个`...1111`and `...0001`，结果将是`...0000`; 如果`...0001`从`...0000`结果中减去一个将是`...1111`. 请注意，上溢或下溢的概念实际上并没有任何意义，因为操作数的高位值是未知的，而结果的高位值是不感兴趣的。另请注意，将其高位已知的有符号整数与高位为“不知道/不关心”的整数相加应该产生一个高位为“不知道/不关心”的数字（其中是无符号整数类型的主要行为）。

无符号整数类型无法充当环绕代数环成员的唯一地方是当它们参与比较、用于数值除法（这意味着比较）或提升为其他类型时。如果将无符号整数类型转换为更大的类型的唯一方法是为此目的使用运算符或函数，则使用这样的运算符或函数可以清楚地表明它正在对高位进行假设（例如，将“某个数字其低位为`...00010110`" 成 " 其低位为`...00010110`并且其高位全为零）。不幸的是，C 没有这样做。将有符号值添加到大小相等的无符号值会产生大小相同的无符号值（这对于上面对无符号值的解释是有意义的），但是将更大的有符号整数添加到无符号类型将导致编译器默默地假设所有后者的高位为零。如果根据编译器的提升规则，某些编译器可能认为两个表达式具有相同的大小，而其他编译器可能将它们视为不同的大小，则这种行为尤其令人烦恼。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-26T12:19:44.720

该行为很可能源于指针类型（内存位置，例如`std::size_t`）背后的逻辑加上内存位置差异（`std::ptrdiff_t`）也是内存位置。

换句话说，`std::size_t = std::size_t + std::ptrdiff_t`.

当此逻辑转换为底层类型时，这意味着`unsigned long = unsigned long + long`, 或`unsigned = unsigned + int`。

@supercat 的“其他”解释也可能是正确的。

很明显，`unsigned`整数不是设计的，也不应该被解释为*数学上的正数*，甚至在原则上也不应该。见[https://www.youtube.com/watch?v=wvtFGa6XJDU](https://www.youtube.com/watch?v=wvtFGa6XJDU)

# firebug - 使用 Firefox/Firebug，为什么您只能获取带有一些错误的 Stacktraces

> ID：10047618
> 
> 赞同：5
> 
> 时间：2012-04-06T18:29:17.240
> 
> 标签：firebug, stack-trace

我注意到对于 Firefox/Firebug（我的主要开发环境），*一些*错误会产生堆栈跟踪，而另一些则不会。起初我认为这与我是否生成了错误（例如 new Error("foo")）或 Javascript 是否生成了它（例如 undefinedFoo += 1）有关，但我注意到这两种类型都发生了的错误。

所以，我的问题是，有人知道这是什么原因吗？它是随机的还是有一些模式/逻辑？只是 Firefox 和/或 Firebug 蹩脚还是其他浏览器也这样做？最重要的是，我能做些什么来控制它（特别是让它总是给我堆栈跟踪）？

这不是一个关键问题（因为我总是可以在发生错误的任何行之前抛出一个“console.trace()”），但我很好奇是否有人知道答案。

**********编辑**********

我找到了这个线程： [http](http://groups.google.com/group/firebug/browse_thread/thread/1f32df8b96ec1d30/64b9074cb99056c2?pli=1) ://groups.google.com/group/firebug/browse_thread/thread/1f32df8b96ec1d30/64b9074cb99056c2? pli=1 其中提到如果错误不是一个实例，Firefox 不会为 Firebug 提供堆栈跟踪错误。换句话说，如果你抛出一些不是 new Error("foo") 的东西，你将不会得到堆栈跟踪。

但是，这对我没有帮助，因为即使我抛出新的 Error()，我也没有看到堆栈跟踪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T01:07:25.500

我找到了！事实证明，模块模式是问题所在。这是一个简单的例子：

```
var OuterModule = (function(module){
    module.throwError = function() {
        throw new Error("This has no stack trace!");
    };
    return module;
})({});
OuterModule.throwError(); 
```

由于某种原因，由于模块模式将 throwError 函数隐藏在模块范围内，Firebug/Firefox 无法正确跟踪它。

永远也想明白的人；希望其他人会从我的痛苦中受益:-)

# windows-phone-7.1 - Windows Phone - PhotoChooserTask 未显示

> ID：10047621
> 
> 赞同：5
> 
> 时间：2012-04-06T18:30:16.433
> 
> 标签：windows-phone-7.1

我遇到了这个 PhotoChooserTask 的问题，因为当我将它部署到我的设备上时它没有显示出来。它在模拟器中工作。我做了一个非常简单的代码，但不知道为什么它没有显示。

```
// inside the button
PhotoChooserTask selectphoto = new PhotoChooserTask();
selectphoto.ShowCamera = true;
selectphoto.Completed += new EventHandler<PhotoResult>(selectphoto_Completed);
selectphoto.Show();
// -------------

void selectphoto_Completed(object sender, PhotoResult e)
{
    if (e.TaskResult == TaskResult.OK)
    {
        // blah blah blha
    }
} 
```

任何想法？

我正在使用 Windows Phone 7 Mango (7.1)

- - - 更新 - -

我拿了 e.TaskResult，我总是得到“取消”。有什么不对？

我有个主意……也许是因为 Zune 正在运行：P

---更新-解决。Zune 正在运行：P

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T06:02:04.477

如果您正在工作或实现 Camera 或 PhotoChooserTask 并且您已连接到 Zune，那么现在最好在实际设备上测试您的应用程序。

因此，在将您的应用程序部署到具有媒体功能的实际设备上之前，请确保断开您的手机与 Zune 的连接。

# php - php var isset, ?data=menu

> ID：10047624
> 
> 赞同：0
> 
> 时间：2012-04-06T18:30:35.023
> 
> 标签：php, get, isset

我有脚本，其中一些 url 导致 index.php?data 并且页面打开我如何使用它来使用 url 打开像 index.php?data=menu 这样的“子页面”？我第一个使用的代码是

`if(isset($_GET['palvelut'])){ echo "this is a sample"; }`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T18:33:16.250

您的想法是正确的，但请允许我对此进行详细说明。您需要`$_GET['data']`通过执行检查是否已设置，`isset($_GET['data'])`如果已设置，请检查它是否具有给定值，在这种情况下为“菜单”。你可以这样做`$_GET['data'] == "menu"`。把它们放在一起，你会得到：

```
if (isset($_GET['data']) && $_GET['data'] == "menu") {
    /* Menu code goes here */
} 
```

如果您想让这项工作适用于多个值，`data`您可以执行以下操作：

```
if (isset($_GET['data'])) {
  switch($_GET['data']) {
    case "Possible_Value_1" :
      /* Code for this condition appears here */
      break;

    case "Possible_Value_2" :
      /* Code for this condition appears here */
      break;

    /* etc... */

    default :
      //Just as a precaution...
      echo "Invalid 'data' value supplied!";
      break;
  }
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T18:36:03.737

如果我理解你的问题（我不明白），那么你已经回答了。

您的网址是：**http ://www.mydomain.com/index.php?data=something**

您的代码将是：

```
if (!isset($_GET['data'])) {
  //do something because no data argument was passed
} else {
  switch ($_GET['data']) {  
     case "homepage":
       header("location: homepage.php");
       die;
       break;
     case "someotherpage":
       header("location: someotherpage.php");
       die;
       break;
     //and so on
  }
} 
```

显然，您可能只需要（）或包含（）一个文件，而不是使用标头重定向，或者完全做其他事情。

# character-encoding - 这是什么字符编码？[提供的示例字符到 Int 值]

> ID：10047626
> 
> 赞同：-1
> 
> 时间：2012-04-06T18:30:39.823
> 
> 标签：character-encoding

当打印为整数时，I 表示为 21321。

数据从一个设备进入一个 Delphi DLL 并被传递给我写出来。但是，它不适用于 Delphi 的 Ansi 字符串转换。

我只需要知道这可能是可能的字符编码，因此我可以开始确定如何正确转换它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T19:01:15.273

数字 21321 是十六进制的 5349，解释为 8 位值，53 和 49 是拉丁字母“S”和“I”的 ASCII 码。所以我的猜测是数据实际上是 ASCII 或某种兼容编码的“SI”。

很难想象“I”会是 5349 十六进制的任何编码，所以这不仅仅是未知编码。

# c# - 瑞典语字符的模式匹配

> ID：10047628
> 
> 赞同：1
> 
> 时间：2012-04-06T18:30:56.167
> 
> 标签：c#, regex

我需要有关正则表达式的帮助。

我必须像这样匹配字符串：âãa34dc

我用过的模式：

\s*[a-zA-Z]+[a-zA-Z_0-9]*\s

但是这种模式不足以识别这种字符串，例如âãa34dc

PS âã 这些都是瑞典字符。

请帮我找出这种字符串的正确模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T18:53:37.573

您真的想将其限制为瑞典语字符吗？换句话说，德国字符不应该匹配吗？如果是这样，那么您可能必须枚举整个字母表，并将其包括在内。

如果您真正想要的是匹配每个字母字符，请使用正则表达式术语来匹配所有字母。

`\w`匹配任何单词字符，但包括数字和一些标点符号。这很接近，但不完全是你想要的第二个任期。

对于第一个术语，您不想包含数字，指定字符应该是 Unicode“字母”类将起作用。`\p{L}`指定作为字母的所有 Unicode 字符。这包括 [a-zA-Z]，以及所有瑞典语字符，以及德语和俄语等。

因此，我认为这个正则表达式就是你想要的：

`\s*[\p{L}][\p{L}_0-9]*\s`

如果您想包含[来自其他字符集的数字和其他](http://www.fileformat.info/info/unicode/category/Nd/list.htm)一些[标点符号](http://www.fileformat.info/info/unicode/category/Pc/list.htm)，那么您可以使用`[\w]*`第二个术语。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:32:28.467

请给出一套规则。

根据你的问题：

```
 [X-Ya-zA-Z]{3}[0-9]{2}[a-zA-Z]{2} 
```

> 将 X 替换为第一个瑞典字母
> 
> 用最后一个瑞典字母替换 Y

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T18:48:04.783

[John Machin](https://stackoverflow.com/a/2039476/1149773)对此提供了很好的答案。适应他的模式，你需要的可能类似于：`\s*[^\W\d_]\w*\s*`

PS我`+`从你的第一部分中删除了量词。任何后续字母都将与后续 quantified 匹配`\w`。

# java - 使用 selectOneRadio 的 JSF 转换错误

> ID：10047629
> 
> 赞同：1
> 
> 时间：2012-04-06T18:30:57.530
> 
> 标签：java, jsf, web-applications

我有一个简单的 JSF Web 应用程序，如下所示。Java 类包含：

```
private String myString;

public String getMyString()
{
  return myString;
}

public void setMyString( String radioValue )
{
  myString = someHashMap.get( radioValue );
  doStuffWith( myString );
} 
```

JSF 页面源包含：

```
<h:form>
 <h:selectOneRadio id="topicSelectOneRadio" required="true"
    requiredMessage="Choose a thing"
    value="#{someBean.myString}">
    <f:selectItem itemValue="radioValue1" itemLabel="1"/>
    <f:selectItem itemValue="radioValue2" itemLabel="2"/>
 </h:selectOneRadio>
 <p><h:commandButton value="Do it"/></p>
</h:form> 
```

据我了解，网页中的 radioValueX 字符串在 Java 类中用作 myString setter 方法的参数。所以我想进一步扩展它以使用任何类：

```
private Foo myFoo;

public Foo getMyFoo()
{
  return myFoo;
}

public void setMyFoo( String radioValue )
{
  myFoo = someHashMap.get( radioValue );
  doStuffWith( myFoo );
} 
```

和

```
<h:form>
 <h:selectOneRadio id="topicSelectOneRadio" required="true"
    requiredMessage="Choose a thing"
    value="#{someBean.myFoo}">
    <f:selectItem itemValue="radioValue1" itemLabel="1"/>
    <f:selectItem itemValue="radioValue2" itemLabel="2"/>
 </h:selectOneRadio>
 <p><h:commandButton value="Do it"/></p>
</h:form> 
```

但是，我收到以下错误：

```
Conversion Error setting value 'radioValue' for 'null Converter'. 
```

我不确定我是否了解需要在哪里进行任何类型的“转换”。在这两种情况下，单选按钮中的字符串值都被用作 setter 方法的参数，该方法将字符串值作为参数。没错，在后一种情况下，它实际上是在为不是字符串的东西设置值，但这不重要，不是吗？我不想将后一种情况下的 radioValueX 字符串转换为任何其他类型，只是将其用作哈希图的键，与第一种情况相同。

任何人都可以帮助我了解我所缺少的吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T18:40:24.667

JSF 在调用 setter*之前*尝试将您转换`String`为。而且由于您没有为您的对象注册转换器，因此您会收到此错误。`Object`

 *转换在 JSF 的生命周期阶段 3（过程验证）中执行。在第 4 阶段（更新模型值）调用设置器。

您需要添加一个转换器才能使其工作：

```
import javax.faces.convert.Converter;
...
@FacesConverter("FooConverter")
public class FooConverter implements Converter{
  @Override
  public Object getAsObject(FacesContext context, UIComponent component,
            String value) {
    someHashMap.get(value);
  }
  @Override
  public String getAsString(FacesContext context, UIComponent component,
            Object value) {
    // convert from Object to String
   }    
} 
```

以这种方式使用转换器：

```
<h:selectOneRadio id="topicSelectOneRadio" required="true"
    requiredMessage="Choose a thing"
    value="#{someBean.myFoo}">
    <f:converter converterId="FooConverter"/>
    <f:selectItem itemValue="radioValue1" itemLabel="1"/>
    <f:selectItem itemValue="radioValue2" itemLabel="2"/>
</h:selectOneRadio> 
```

然后（正如伊恩对您问题的评论中正确说明的那样）您应该更改您的设置器，因为您不再需要在这里进行转换：

```
public void setMyFoo(Foo newFoo)
{
  myFoo = newFoo;
} 
```*

# objective-c - 按季度计算日期

> ID：10047633
> 
> 赞同：0
> 
> 时间：2012-04-06T18:31:21.593
> 
> 标签：objective-c, algorithm, date

我正在寻找一种简单但有效的 Objective-C 算法，该算法从一年的给定季度（3 个月）开始，添加或减去特定数量的季度。

例如，在 2012 年第一季度加上 10 个季度，我得到年份：2012 + Floor(10 / 4) = 2012 + 2 = 2014，那么季度：1 + Mod (10, 4) = 1 + 2 = Q3。从 2011 年第三季度减去 2 个季度，我想以 2011 年第一季度结束。

完成此任务的最优雅的代码是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T18:38:38.860

从这里更改的代码：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DatesAndTimes/Articles/dtCalendricalCalculations.html#//apple_ref/doc/uid/TP40007836-SW1](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DatesAndTimes/Articles/dtCalendricalCalculations.html#//apple_ref/doc/uid/TP40007836-SW1)

```
NSDate *today = [[NSDate alloc] init];
NSCalendar *gregorian = [[NSCalendar alloc]
          initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *offsetComponents = [[NSDateComponents alloc] init];

[offsetComponents setMonth:3]; // one quarter

NSDate *oneQuarterFromToday = [gregorian dateByAddingComponents:offsetComponents
          toDate:today options:0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T19:17:23.800

```
- (void)addQuarters:(NSInteger)quarters toYear:(NSInteger *)currentYear andQuarter:(NSInteger *)currentQuarter {
    if (*currentYear < 0 ||
        *currentQuarter < 1 ||
        *currentQuarter > 4) {
        return;
    }

    *currentYear += quarters / 4;
    *currentQuarter += quarters % 4;

    if (*currentQuarter  > 4) {
        *currentQuarter -= 4;
        *currentYear += 1;
    } else if (*currentQuarter < 1) {
        *currentQuarter += 4;
        *currentYear -= 1;
    }
}

// Example of use:
NSInteger year = 2012;
NSInteger quarter = 2;

[self addQuarters:-7 toYear:&year andQuarter:&quarter];
NSLog(@"Quarter %i of %i", quarter, year);
// Output: Quarter 3 of 2010 
```

# javascript - 如何禁用 jNiceIt 选择标签？

> ID：10047636
> 
> 赞同：0
> 
> 时间：2012-04-06T18:31:35.153
> 
> 标签：javascript, jquery

我有 Jquery 的 jNiceIT 插件。如何禁用使用 jNiceIt 样式的选择下拉菜单？它看起来像这样：

```
 <label for="titems">Select Box Control:</label>
                <div id="titems" tabindex="8" class="fmSelect" style="width: 40%; z-index: 1500;"><strong><span><cite>Value 1</cite></span></strong><ul style="display: none;"><li option="val_1" class="">Value 1</li><li option="val_2" class="">Value 2</li><li option="val_3" class="">Value 3</li><li option="val_4" class="">Value 4</li><li option="val_5">Value 5</li><li option="val_6">Value 6</li><li option="val_7">Value 7</li><li option="val_8">Value 8</li><li option="val_9">Value 9</li><li option="val_10">Value 10</li></ul></div>
                <select id="" name="items" tabindex="0" style="width: 100%; display: none;" class="fmZero">
                    <option value="val_1">Value 1</option>
                    <option value="val_2">Value 2</option>
                    <option value="val_3">Value 3</option>
                    <option value="val_4">Value 4</option>
                    <option value="val_5">Value 5</option>
                    <option value="val_6">Value 6</option>
                    <option value="val_7">Value 7</option>
                    <option value="val_8">Value 8</option>
                    <option value="val_9">Value 9</option>
                    <option value="val_10">Value 10</option>
                </select> 
```

我试图在“true”上为选择设置“禁用”，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:58:48.867

您能否显示将“禁用”设置为“真”的代码？

我对 jNiceIt 不熟悉，但您是否尝试过使用类似的东西？

```
// To disable 
$('.fmZero').attr('disabled', 'disabled'); 
```

您是否查看过有关禁用元素[的帖子？](https://stackoverflow.com/questions/5891493/disabling-an-element-in-jquery-1-6)

这个答案看起来很有希望：[https ://stackoverflow.com/a/5891520/469643](https://stackoverflow.com/a/5891520/469643)

# javascript - 在 JSON 对象中查找属性

> ID：10047638
> 
> 赞同：3
> 
> 时间：2012-04-06T18:31:39.830
> 
> 标签：javascript, jquery, json

我正在创建一个 JSON 对象，例如

```
tags = {"jon":["beef","pork"],"jane":["chicken","lamb"]}; 
```

它是使用 php 从数组中生成的，例如

```
$arr = array(
        'jon' => array('beef', 'pork'),
        'jane' => array('chicken', 'lamb')
       );
$tags = json_encode($arr); 
```

我想检查其中是否有东西。这些似乎都不起作用，但是像

```
if('lamb' in tags.jane)) {
    console.log('YES');
} else {
    console.log('NO');
} 
```

向控制台写入**NO**

```
if('foo' in tags.jane)) {
    console.log('YES');
} else {
    console.log('NO');
} 
```

还向控制台写入**NO**

所以看着

```
typeof(tags.jane); 
```

它表明这是一个`"object"`但是

```
console.log(tags); 
```

显示以下内容：

```
Object
jane: Array[2]
    0: "chicken"
    1: "lamb"
    length: 2
    __proto__: Array[0]
jon: Array[2]
    0: "beef"
    1: "pork"
    length: 2
    __proto__: Array[0]
__proto__: Object 
```

所以我想也许`tags.jane`实际上可能是一个数组并尝试过

```
if($.inArray('lamb', tags.jane)) {
    console.log('YES');
} else {
    console.log('NO');
} 
```

它将**YES**写入控制台，但是

```
if($.inArray('foo', tags.jane)) {
    console.log('YES');
} else {
    console.log('NO');
} 
```

还会将**YES**写入控制台。

我是否错误地构建了 JSON 对象？没有正确定位价值？任何意见是极大的赞赏。如果这更容易作为一个数组而不是一个对象，我可以完全控制它来改变它。我只是有点困惑我应该如何对待这个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T18:34:32.013

[找不到元素时， jQuery.inArray](http://api.jquery.com/jQuery.inArray/)返回 -1。这`true`是 Javascript 的 POV 的价值。尝试这个：

```
if($.inArray('foo', tags.jane) != -1) { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T18:34:36.853

你的第二组答案是你应该走的路。但是，$.inArray 返回一个索引，而不是布尔值。任何非零整数都为真，这意味着当`foo`未找到时，它返回 -1，其计算结果为`true`并打印**YES**。

同样，`$.inArray('chicken', tags.jane)`将返回`0`并强制转换为 false，这也不是您想要的答案。

相反，`$.inArray('foo', tags.jane) !== -1`请用作您的条件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T18:37:24.167

tags.name 将为您提供该人的数组。所以`$.inArray("chicken",tags.jane)`会看看“鸡”是否在简的标签数组中。如果不是，你会得到-1，否则你会得到它在数组中的位置（使用你的例子，这将返回零，第一个数组元素）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T18:48:04.610

您出于错误的原因使用了关键字 in。语句（prop 'in' obj ）检查对象（关联数组）是否具有值为 prop 的属性。由于您在数组上使用“in”关键字，因此将返回 false，因为 tags.jane 是一个带有索引的数组，而不是一个带有属性的关联数组。

如果您想知道值是否在数组中，则循环并比较。如果你想使用 'in' 关键字，然后将你的数组转换为这样的对象。

```
 tags = {};
    // old code
    tags.jane = ['lamb', 'food']; 
console.log(('lamb' in tags.jane) === false )
    // new code
    tags.jane = {
       'lamb':1,
        'food':1
    }
console.log(('lamb' in tags.jane) === true ) 
```

[https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T19:47:22.867

你不能用

```
if('foo' in tags.jane)) 
```

它应该用作

```
if (1 in tags.jane) 
```

如果你想检查 'foo' 在 tags.jane 中，试试这个

```
var inIt = (function() {
    var inIt = false;
    tags.jane.forEach(function(item) {
        inIt = inIt || 'foo' == item;
    });
    return inIt;
})(); 
```

# iphone - AVAudio Player 停止在设备上工作

> ID：10047640
> 
> 赞同：0
> 
> 时间：2012-04-06T18:31:43.453
> 
> 标签：iphone, objective-c, ios, avplayer

我正在使用`AVPlayer`它在设备上也可以完美运行，但是突然它停止在设备上运行，而它仍在模拟器上运行。我不明白为什么它停止工作。请检查以下代码

```
 NSURL *url=[NSURL URLWithString:self.urlStr];

    self.audioSound = [[AVPlayer alloc] init];

    playerItem = [AVPlayerItem playerItemWithURL:url];

    [playerItem addObserver:self forKeyPath:@"playbackBufferEmpty"   options:NSKeyValueObservingOptionNew context:nil];

    [playerItem addObserver:self forKeyPath:@"status" options:0 context:nil];

    [self.audioSound replaceCurrentItemWithPlayerItem:playerItem]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:27:39.743

我没有看到任何播放视频的代码，例如`[player play];`.

你写过这段代码吗？

# python - 如何从带有 parent_id 的 dict 中创建带有孩子的 dict

> ID：10047643
> 
> 赞同：1
> 
> 时间：2012-04-06T18:32:01.383
> 
> 标签：python, dictionary, parent-child

如何从这个字典中得到：

```
 cats = [
    {'parent_id': False, 'id': 1, 'title': u'All'},
    {'parent_id': False, 'id': 2, 'title': u'Toys'},
    {'parent_id': 2, 'id': 3, 'title': u'Toypads'},
    {'parent_id': 3, 'id': 4, 'title': u'Green'},
    ] 
```

像这样的东西？

```
cats = [
{'parent_id': False, 'id': 1, 'title': u'All'},
{'parent_id': False,
 'children': [{'parent_id': 2,
               'children': [{'parent_id': 3, 'id': 4,
                             'title': u'Green'}],
               'id': 3, 'title': u'Toypads'},
              [{'parent_id': 3, 'id': 4, 'title': u'Green'}]],
 'id': 2, 'title': u'Toys'}
] 
```

我需要它在 Jinja2 中构建一个菜单\子菜单。我写了一个非常糟糕的代码。这将是一个更优雅的解决方案。

```
 q = dict(zip([i['id'] for i in cats], cats))

    from collections import defaultdict
    parent_map = defaultdict(list)

    for item in q.itervalues():
        parent_map[item['parent_id']].append(item['id'])

    def tree_level(parent):
        for item in parent_map[parent]:
            yield q[item]
            sub_items = list(tree_level(item))
            if sub_items:
                for ca in cats:
                    if ca['id'] == item:
                        cats[cats.index(ca)]['children'] = sub_items
                        for s_i in sub_items:
                            try:
                                for ca_del_child in cats:
                                    if ca_del_child['id'] == s_i['id']:
                                        del cats[cats.index(ca_del_child)]
                            except:
                                pass
                yield sub_items
    for i in list(tree_level(False)):
        pass 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T18:44:21.627

这是一个相当简洁的解决方案：

```
cats = [{'parent_id': False, 'id': 1, 'title': u'All'},
        {'parent_id': False, 'id': 2, 'title': u'Toys'},
        {'parent_id': 2, 'id': 3, 'title': u'Toypads'},
        {'parent_id': 3, 'id': 4, 'title': u'Green'},]

cats_dict = dict((cat['id'], cat) for cat in cats)

for cat in cats:
    if cat['parent_id'] != False:
        parent = cats_dict[cat['parent_id']]
        parent.setdefault('children', []).append(cat)

cats = [cat for cat in cats if cat['parent_id'] == False] 
```

请注意，与 False 的比较通常不是必需的，但如果您的猫的 id 或 parent_id 为 0，则应在此处使用它们。在这种情况下，我会用它`None`来代替`False`没有父母的猫。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T18:43:59.400

可以按如下方式完成：

```
# Step 1: index all categories by id and add an element 'children'
nodes = {}
for cat in cats:
    nodes[cat['id']] = cat
    cat['children'] = []

# Step 2: For each category, add it to the parent's children
for index, cat in nodes.items():
    if cat['parent_id']:
        nodes[cat['parent_id']]['children'].append(cat)

# Step 3: Keep only those that do not have a parent
cats = [c for c in nodes.values() if not c['parent_id']] 
```

请注意，每个节点都会有一个名为 的属性`'children'`，它可能是一个空列表或具有一个或多个节点的列表。如果您不想要空`children`列表，您可以简单地在第 2 步和第 2 步之间从每个类别中删除它们`nodes`。

另请注意，以上假设`parent_id`实际存在具有给定的节点。最后，请注意，`if not c['parent_id']`当存在 id 为零的节点时也是如此，因此如果可能发生这种情况，您需要记住这一点。

# google-search - 如何调整 Google 搜索结果窗口的大小？

> ID：10047645
> 
> 赞同：0
> 
> 时间：2012-04-06T18:32:06.803
> 
> 标签：google-search

我在我正在开发的新网站上集成了自定义 Google 搜索。我尝试了多种方法来控制结果窗口的显示大小，并且它不断地覆盖这些值。

这是代码：

```
<div id="cse-search-results" style="width:700px;"></div>
        <script type="text/javascript">
          var googleSearchIframeName = "cse-search-results";
          var googleSearchFormName = "cse-search-box";
          var googleSearchFrameWidth = 700;
          var googleSearchDomain = "www.google.com";
          var googleSearchPath = "/cse";
        </script>
        <script type="text/javascript" src="http://www.google.com/afsonline/show_afs_search.js"></script> 
```

[这是该](http://yogahealthfoundation.org/search_results/)页面的链接 - 输入搜索词以查看结果。我将不胜感激任何帮助以使其以 700 像素显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T19:52:35.773

您是否尝试过使用 Google 自定义搜索中的新代码？如果您还没有并且没有其他方法适用于您当前的代码，我建议您尝试一下。

祝你好运！

# android - 自定义视图没有出现？

> ID：10047650
> 
> 赞同：0
> 
> 时间：2012-04-06T18:32:28.113
> 
> 标签：android, layout, view

我定义了一个扩展 LinearLayout 的视图，我想将它放入 ViewAnimator 中。麻烦的是，它没有出现。我没有为布局使用 XML，所以我有一个扩展 LinearLayout 的类，例如：

```
public class DetailView extends LinearLayout {

ImageView mImageView;
TextView mTxtName;

public DetailView(Context context) {
    super(context);     
    mTxtName = new TextView(context);

    LinearLayout.LayoutParams lpn = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);
    lpn.setMargins(3,3,3,3);
    mTxtName.setLayoutParams(lpn);
    mTxtName.setTextAppearance(context, android.R.attr.textAppearanceMedium);

    mImageView = new ImageView(context);
    LinearLayout.LayoutParams lpi = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);
    lpi.setMargins(10,10,10,10);
    mImageView.setLayoutParams(lpi);
    mImageView.setScaleType(ScaleType.CENTER_INSIDE);
    mImageView.setImageResource(R.drawable.wait);
} 
```

然后在我的活动中添加它：

```
va = new ViewAnimator(this);
detail = new DetailView(this);
        detail.setOrientation(1);
        LinearLayout.LayoutParams dLayout = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT,LinearLayout.LayoutParams.FILL_PARENT);
va.setLayoutParams(dLayout);
va.addView(detail,0); 
```

但它没有显示。我敢肯定，我错过了一些非常明显的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T18:47:56.087

我认为问题在于您从不打电话`addView`将孩子添加`Views`到您的`ViewGroup`. 它会是这样的：

```
 public DetailView(Context context) {
        super(context);     
        mTxtName = new TextView(context);

        LinearLayout.LayoutParams lpn = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);
        lpn.setMargins(3,3,3,3);
        mTxtName.setLayoutParams(lpn);
        mTxtName.setTextAppearance(context, android.R.attr.textAppearanceMedium);
        this.addView(mTxtName);//add the view to your viewgroup

        mImageView = new ImageView(context);
        LinearLayout.LayoutParams lpi = new  LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);
        lpi.setMargins(10,10,10,10);
    mImageView.setLayoutParams(lpi);
    mImageView.setScaleType(ScaleType.CENTER_INSIDE);
    mImageView.setImageResource(R.drawable.wait);
    this.addView(mImageView);
} 
```

# c - 警告：赋值使指针从整数而不进行强制转换[默认启用]

> ID：10047653
> 
> 赞同：0
> 
> 时间：2012-04-06T18:32:49.097
> 
> 标签：c, pointers

当我尝试在带有`-Wall`标志的 linux 上使用 gcc 版本 4.6.3 编译此代码时，我收到以下两个警告：

1.  它指向`cmd[1]=cmd2send;`

    > 警告：赋值使指针从整数而不进行强制转换[默认启用]

2.  它指向变量`static unsigned char *cmd[65]`

    > 警告：变量 'cmd' 已设置但未使用 [-Wunused-but-set-variable]。

*是什么导致了这些警告？以及如何避免它们？*

```
 int CommandHandler(unsigned char cmd2send)
    {
        static unsigned char *cmd[65];

        // *make sure device is open*
        if(handle==NULL) // handle defined in transceiver.h
        {
            puts("CommandHandler::Cant handle command");
            // try to open device again
            if(OpenMyDev()!=0)
            return -1;
            // if no return then retry is fine
            puts("retry SUCCEEDED!, device is open");
        }

        // *send command to firmware*
        cmd[0]=0x0;
        cmd[1]=cmd2send;
        .......
        return 0;

    } 
```

在这里，我也收到关于可变电压的警告 #2：

```
float Get_Temperature(void)
{
    //unsigned char RecvByte=0;
    //int byte[4];

    int i;

    float voltage=0;
    float resistance=0;
    float temperature=0;
    float SamplesAVG=0;

    unsigned int Samples=0;

    unsigned char* rvc;
    unsigned char mydata[65];

    for(i=0;i<=10;i++)
    {
        //Transimit Start Of Frame
        mydata[0]=0;
        mydata[1]=GET_TEMPERATURE;

        if(Write2MyDev(mydata)<0)  {return -1;}

        rvc=ReadMyDev(0);

        SamplesAVG+=(rvc[0]<<24)+(rvc[1]<<16)+(rvc[2]<<8)+rvc[3];
        usleep(100*1000);
    }

    Samples=SamplesAVG/10;
    printf("TO PRINT VAL:%d\n",Samples);
    puts("------------");

    voltage = (Samples * 5.0)/1023.0; // 0..1203= 1024 values
    resistance = 10000.0/ (1023.0/Samples);
    ...
    return retval;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T18:36:17.047

`cmd2send`是 a`unsigned char`并且您正在为其设置`cmd[1]`is a的值`char *`。A`char *`是一个指针，并且 an`unsigned char`被视为一个整数，因此您正在`cmd[1]`从`integer`没有强制转换的 an 中创建一个指针。

您可能想要一个字符数组而`char cmd[65]`不是`char *`

此外，由于您创建并分配了值`cmd`但您从未使用它，因此您也会收到警告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T18:34:42.263

> ```
> static unsigned char *cmd[65];
> ....
> cmd[1] = cmd2send; /* cmd is an array of pointers so cmd[1] is a pointer. */ 
> ```

好的，`cmd`数组 pf 256 指针也是如此。分配 a`char`生成`cmd[1]`第一个警告。

编译器还注意到**您实际上并没有`cmd`**在任何地方使用，因此它会生成第二个警告。

# java - Java Servlet：如何检索选定的单选按钮值？

> ID：10047654
> 
> 赞同：6
> 
> 时间：2012-04-06T18:32:49.110
> 
> 标签：java, servlets, radio-button

我创建了一个简单的 servlet，其中将向用户提出 2 个问题，回答是真还是假。我的问题在于检索用户选择的答案。

代码：

```
 out.println("<FORM ACTION=\"Game\" METHOD = \"POST\">" +

        "<b>Question 1: Are you over the age of 25? </b><br> <br>" +

        "<input type = \"radio\" name = \"Q1rad1\" onclick = \"getAnswer('a')\"> True " +
        "<input type = \"radio\" name = \"Q1rad2\" onclick = \"getAnswer('b')\"> False<br>" +

        "<br><br><b>Question 2: Are you from earth?</b><br> <br>" +

        "<input type = \"radio\" name = \"Q2rad1\" onclick = \"getAnswer('a')\"> True " +
        "<input type = \"radio\" name = \"Q2rad2\" onclick = \"getAnswer('b')\"> False<br>" +

        out.println("<Center><INPUT  TYPE=\"SUBMIT\"></Center>");

        ); 
```

每个问题都有 2 个单选按钮，Q1rad1 和 Q2rad2，用于回答 True 或 False。当按下提交按钮时，我如何知道每个用户选择的值。

我知道使用 Javascript 可能更有效，但为了解决这个问题，我必须使用 servlet。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-06T18:47:40.440

您必须定义选择单选按钮时要检索的值

*值*设置定义如果选中将提交的内容。

*名称*设置告诉该字段属于哪一组单选按钮。当您选择一个按钮时，同一组中的所有其他按钮都将被取消选择。

```
<input type = "radio" name = "Q2" onclick = \"getAnswer('b') value="b">
<input type = "radio" name = "Q2" onclick = \"getAnswer('a') value="a"> 
```

在您将收到请求的 Servlet 中，您将拥有类似的东西

```
public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // get the value of the button group 
    String q2 = request.getParameter("Q2");
    // compare selected value 
    if ("a".equals(q2)) {
       ...
    }
    ...

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-06T18:40:30.793

您没有正确命名您的单选按钮。同一问题的每个单选选项都需要相同的名称属性。此外，您应该`value`在每个`<input type="radio">`. 我不确定您是否需要`onclick`处理程序。您还应该有一个`</form>`更紧密的标签。您的表单可能如下所示：

```
 out.println("<form action=\"Game\" method=\"POST\">" +

    "<b>Question 1: Are you over the age of 25? </b><br> <br>" +

    "<input type = \"radio\" name = \"Q1\" value=\"True\"> True " +
    "<input type = \"radio\" name = \"Q1\" value=\"False\"> False<br>" +

    "<br><br><b>Question 2: Are you from earth?</b><br> <br>" +

    "<input type = \"radio\" name = \"Q2\" value=\"True\"> True " +
    "<input type = \"radio\" name = \"Q2\" value=\"False\"> False<br>" +

    "<Center><INPUT  TYPE=\"SUBMIT\"></Center>" +

    "</form>"
    ); 
```

然后在`doPost()`处理表单提交的 servlet 方法中，您可以使用`request.getParameter()`. 像这样的东西：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    String q1 = request.getParameter("Q1");
    String q2 = request.getParameter("Q2");
    // more processing code...
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-06T18:38:53.080

为同一个问题的收音机赋予相同的名称，并设置不同的值。看看这个[页面](http://www.w3schools.com/html/html_forms.asp)。

然后在请求中，您将获得一个带有无线电组名称和所选值的参数。提交 servlet 后，接收帖子可以使用：

```
String value = request.getParameter("radioName"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-19T11:23:20.120

对于您的 HTML 代码，以下几行就足够了

```
protected void doPost(HttpServletRequest req,HttpServletResponse res){
String q1 = request.getParameter("Q1");
String q2 = request.getParameter("Q2");`
} 
```

例如，考虑您的 HTML 代码。

如果按下 Q1

> “真的”

那么它将是我们在 Servlet 中的“输入”。

# jsf-2 - 为什么 JSF 需要验证错误将输入字段替换为其原始值

> ID：10047656
> 
> 赞同：1
> 
> 时间：2012-04-06T18:33:02.513
> 
> 标签：jsf-2

使用 JSF 2.0：

用户加载一个带有输入字段的页面，该输入字段绑定到具有现有值的支持 bean 字段。输入字段已被标记为必填项。如果用户随后清空该字段并提交表单，则会按预期显示所需的消息，但是在呈现页面时该字段的值将替换为其原始值，而不是将该字段留空。

此行为似乎与字段上存在格式验证错误（与必需的验证错误）时发生的情况不一致，例如，如果有一个字段供用户在页面上输入电子邮件地址，该字段链接到电子邮件格式验证器，并且当页面加载无效的电子邮件地址并提交表单时，用户替换了在字段中填充的现有有效电子邮件地址，出现验证错误消息，并且电子邮件地址字段的当前值保持不变（而不是替换加载页面时的原始值）。

当发生必填字段验证错误而不是重新加载其原始（非空白）值时，有什么方法可以将字段留空？

更多细节：

*   网络逻辑 10.3.2
*   我的脸 2.0.12

JSF 页面：

```
<h:form>
  <h:messages showSummary="true"/>
  <h:inputText value="#{page1Controller.firstName}" 
               required="true" 
               requiredMessage="You must enter a first name"/>
  <h:commandButton value="Submit"/>
</h:form> 
```

托管豆

```
@ManagedBean
public class Page1Controller
{

    public String getFirstName()
    {
        return "Default Value";
    }

    public void setFirstName(String value)
    {
        // no-op (for example purposes only)
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T13:55:14.777

将 web.xml 中的上下文参数 javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL 从 true 更改为 false 解决了该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:47:12.593

您的支持 bean 的范围是什么？

问题可能与范围有关，因为 Bean 可能在 Validation Error 后重新加载，导致输入字段显示原始 Bean 的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-25T07:30:44.210

我有同样的问题（Mojarra 2.2.7 的 Glassfish）

如果用户编辑已填充数据的页面，则在一个 selectOneMenu 中他选择空选项，当他提交时，他得到验证错误（字段为空）并且值返回。

为了解决这个问题，我添加了这个：

```
<h:selectOneMenu value="#{myBean.value}" validator="#{myBean.required}">
 <f:selectItem itemValue="#{null}" itemLabel="" />
 <f:selectItems value="#{myBean.list}" />
</h:selectOneMenu>

 public void required(FacesContext context, UIComponent component, Object value) throws ValidatorException {
    if(value == null) {
        ((UIInput) component).setValue(null);
        ((UIInput) component).setValid(false);
        throw new ValidatorException(new FacesMessage("Empty!"));
    }
} 
```

但是如果我们可以只使用“required=true”会更好。我们没有任何 INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL 设置，所以我认为这不是原因？

[编辑] 实际上我注意到它只是在 h:datatable 中输入的情况

# python - python和mechanize登录大学网页

> ID：10047663
> 
> 赞同：0
> 
> 时间：2012-04-06T18:33:27.740
> 
> 标签：python, mechanize, login-script

我知道很多人问过类似的问题，但是在查看了答案并遵循了这些提示之后，我无法让这个脚本工作......

这是我的问题......我正在尝试使用“mechanize”模块编写一个python脚本来登录我的大学“膳食平衡”页面并获取显示我的食物余额下降页面的源html，然后我会解析 html 源代码并获取数字...

问题是访问上述网页并登录...

这是登录网站：[http:](http://www.wcu.edu/11407.asp) //www.wcu.edu/11407.asp 最后你会看到我需要填写的表格...

这是我尝试使用的代码，用于登录并获取余额下降的页面：

```
import mechanize, cookielib
from time import sleep

url   = 'http://www.wcu.edu/11407.asp'
myId  = 'xxxxxxxx'
myPin = 'xxxxxxxx'

# Browser
#br = mechanize.Browser()
#br = mechanize.Browser(factory=mechanize.DefaultFactory(i_want_broken_xhtml_support=True))
br = mechanize.Browser(factory=mechanize.RobustFactory()) # Use this because of bad html

# Cookie Jar
cj = cookielib.LWPCookieJar()
br.set_cookiejar(cj)

# Browser options
br.set_handle_equiv(True)
br.set_handle_gzip(True)
br.set_handle_redirect(True)
br.set_handle_referer(True)
br.set_handle_robots(False)

# Follows refresh 0 but not hangs on refresh > 0
br.set_handle_refresh(mechanize._http.HTTPRefreshProcessor(), max_time=1)

# User-Agent (fake agent to google-chrome linux x86_64)                         
br.addheaders = [('User-agent','Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.56 Safari/535.11'),
                 ('Accept', 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'),
                 ('Accept-Encoding', 'gzip,deflate,sdch'),                      
                 ('Accept-Language', 'en-US,en;q=0.8'),                         
                 ('Accept-Charset', 'ISO-8859-1,utf-8;q=0.7,*;q=0.3')] 

# The site we will navigate into, handling it's session
br.open(url)

for f in br.forms():
    print f

# Select the third (index two) form
br.select_form(nr=2)

# User credentials
br.form['id']  = myId
br.form['PIN'] = myPin

br.form.action = 'https://itapp.wcu.edu/BanAuthRedirector/Default.aspx

# Login
res = br.submit().read()

sleep(10)

f = file('mycatpage.html', 'w')
f.write(res)
f.close() 
```

这给了我登录页面，而不是之后的页面......为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:42:19.543

为什么不通过在 python shell 中输入代码来检查错误的来源？或者用另一个站点测试它？有许多明显的可能性可以针对您面临的错误原因进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-02T14:25:14.677

[在这里](https://stackoverflow.com/questions/21686236/python-autologin-using-mechanize)查看我的问题

也是我大学的自动登录页面，以工作代码和 html 代码为例。

# java - 我可以使用 PUT 和 HttpUrlConnection 将图像发送到我的共享主机帐户吗？

> ID：10047667
> 
> 赞同：1
> 
> 时间：2012-04-06T18:33:43.823
> 
> 标签：java, file, upload, httpurlconnection

有点难以置信，Java 让客户端变得如此简单。我确信我将不得不将图像发布到服务器文件以首先对其进行清理，但我也想阻止任何人访问这样的服务器文件（并且想了一点）并最终用图片向我发送垃圾邮件。我需要严格的流程，最终用户没有潜在的篡改。

如果我理解正确，从我读到的内容来看，PUT 应该正是我所需要的。我的签名 ja 从客户端向服务器发送与站点相关的信息图像，而不会暴露我的任何 FTP 信息或显示可能受到攻击的上传文件。我猜我是否正确掌握了 PUT 是我的问题。它会通过 http 将图像放在我的帐户上，而无需额外的处理过程？

顺便说一句，我怎么能把这个片段用于图像？

```
URLConnection urlconnection=null;
try{
File file = new File("C:/test.txt");
URL url = new URL("http://192.168.5.27/Test/test.txt");
urlconnection = url.openConnection();
urlconnection.setDoOutput(true);
urlconnection.setDoInput(true);

if (urlconnection instanceof HttpURLConnection) {
try {
((HttpURLConnection)urlconnection).setRequestMethod("PUT");
((HttpURLConnection)urlconnection).setRequestProperty("Content-type", "text/html");
((HttpURLConnection)urlconnection).connect();

} catch (ProtocolException e) {
 // TODO Auto-generated catch block
 e.printStackTrace();
}
}

BufferedOutputStream bos = new BufferedOutputStream(urlconnection
 .getOutputStream());
BufferedInputStream bis = new BufferedInputStream(new FileInputStream(
 file));
int i;
// read byte by byte until end of stream
while ((i = bis.read()) >0) {
 bos.write(i);
}
System.out.println(((HttpURLConnection)urlconnection).getResponseMessage());
}
catch(Exception e)
{
e.printStackTrace();
}
try {

InputStream inputStream;
int responseCode=((HttpURLConnection)urlconnection).getResponseCode();
if ((responseCode>= 200) &&(responseCode<=202) ) {
inputStream = ((HttpURLConnection)urlconnection).getInputStream();
int j;
while ((j = inputStream.read()) >0) {
 System.out.println(j);
}

} else {
inputStream = ((HttpURLConnection)urlconnection).getErrorStream();
}
((HttpURLConnection)urlconnection).disconnect();

} catch (IOException e) {
// TODO Auto-generated catch block
e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:44:47.110

不，绝大多数 Web 服务器并没有像您想象的那样实现 PUT 命令。PUT 命令在 WebDAV 协议或自定义 REST API 之外通常没有用处。

# iphone - CoreData 测试数据？

> ID：10047669
> 
> 赞同：0
> 
> 时间：2012-04-06T18:33:59.487
> 
> 标签：iphone, objective-c, core-data

我在我的 iPhone 应用程序中使用 CoreData，我需要数百条记录来测试，但是在每次干净构建之后在应用程序中手动添加这么多记录将花费我一生的时间。是否有任何解决方案可以让我以某种方式注入大量数据进行测试？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T21:20:08.580

使用内存数据存储可能对测试很有用。商店中的数据仅在应用程序的生命周期内持续存在。如果您需要测试数据，您是否正在寻找比编写“insertTestData”方法更复杂的东西，该方法只不过是一个将特定数量的实体插入具有随机属性值的持久存储的for循环？

# ios - 从文本文件读取时出现 iOS 线程错误

> ID：10047670
> 
> 赞同：0
> 
> 时间：2012-04-06T18:34:00.733
> 
> 标签：ios, multithreading, nsarray, text-files, sigabrt

我正在尝试从文本文件中打印数组的单个元素，这是我正在使用的代码：

```
//Tells the compiler where the text file is and its type
NSString* path = [[NSBundle mainBundle] pathForResource:@"shakes" 
                                                 ofType:@"txt"];

//This string stores the actual content of the file
NSString* content = [NSString stringWithContentsOfFile:path
                                              encoding:NSUTF8StringEncoding
                                                 error:NULL];

//This array holds each word separated by a space as an element 
NSArray *array = [content componentsSeparatedByString:@" "];

//Fast enumeration for loop tha prints out the whole file word by word
// for (NSString* word in array) NSLog(@"%@",word);

//To access a certain element in an array
NSLog(@"%@", [array objectAtIndex:3
              ]); 
```

问题是 - 如果我希望访问前 2 个元素，0 或 1，那很好。但是，只要我想访问元素 2 或 3，我就会收到以下错误：

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 3 beyond bounds [0 .. 1] 
```

这是一个 SIGABRT 线程错误——这似乎在 iOS 编程中经常出现，但通常是可以解决的。

文本文件“Shakes.txt”有 6 个元素长，仅用于测试目的。

PS - 第三行被注释掉以防我以后想使用它......所以不用担心。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:36:21.483

基本上，您正在尝试访问超出数组范围的对象。日志非常明显，您的数组只有 1 个元素，而您正在尝试访问第 4 个元素。

将此添加到您的代码中。

```
 NSMutableArray *contentArray = [[NSMutableArray alloc] init];

   for (NSString* word in array)
   {
    [contentArray addObject:word]
   }

   //Now try to access contentArray

   NSLog(@"%@", [contentArray objectAtIndex:3
          ]); 
```

# java - java + 线程讨论论坛 + iphone app

> ID：10047673
> 
> 赞同：2
> 
> 时间：2012-04-06T18:34:23.323
> 
> 标签：java, iphone, forum

有哪些可用的免费论坛可以集成到我在 tomcat 上运行的基于 java 的应用程序中？我确实看过 jforum 和[http://java-source.net/open-source/forum-software](http://java-source.net/open-source/forum-software)，但我无法确定哪些是好/坏，或者哪些仍在积极开发中。

我还想写一个与论坛对话的 iphone 应用程序。有没有适合这些要求的免费论坛软件？

谢谢。

# javascript - 在数组的控制台对象中打印

> ID：10047683
> 
> 赞同：0
> 
> 时间：2012-04-06T18:35:26.800
> 
> 标签：javascript

嗨，我一直在尝试使用 codeacademy.com 学习 Javascript，并且我已经完成了一个练习，当我编写这个练习时似乎没有任何意义。这是我的代码：

```
 (function(){
    var bob = {
        firstName: "Bob",
        lastName: "Jones",

        phoneNumber: "(650) 777 - 7777",
        email: "bob.jones@example.com"
    };

    var mary = {
        firstName: "Mary",
        lastName: "Johnson",

        phoneNumber: "(650) 888 - 8888",
        email: "mary.johnson@example.com"
    };

    var contacts = [bob, mary];

    var printPerson = function(person){
        console.log(person.firstName + " " + person.lastName);
    }

    var list = function(){
        var i = contacts.length;
        for(var j= 0; j < i ; j++){
            printPerson(contacts[i]);
        }
    };

        list();
})(); 
```

问题出在 list 函数中，当我尝试调用 printPerson() 函数时，我得到那个人是未定义的，但是如果我写而不是 list() 函数，则：

```
 printPerson(contacts[0]);
    printPerson(contacts[1]); 
```

一切正常。我在 list() 函数中做错了什么，它不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T18:37:17.793

```
var list = function(){
    var i = contacts.length;
    for(var j= 0; j < i ; j++){
        printPerson(contacts[i]);
    }
}; 
```

`i`这是一个常数。如果你更换它：

```
var list = function(){
    var i = contacts.length;
    for(var j= 0; j < contacts.length ; j++){
        printPerson(contacts[contacts.length]);
    }
}; 
```

对于所有数组`arr`，`arr[arr.length]`将始终未定义。你可能想要`contacts[j]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T18:37:38.413

```
for(var j= 0; j < i ; j++){
    printPerson(contacts[i]); // this should be contacts[j]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T19:35:58.520

```
contacts.forEach(function(contact) {
    printPerson(contact);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-03T06:55:51.517

```
var bob = {
    firstName: "Bob",
    lastName: "Jones",
    phoneNumber: "(650) 777-7777",
    email: "bob.jones@example.com"
};

var mary = {
    firstName: "mary",
    lastName: "Johnson",
    phoneNumber: "(650) 888 - 8888",
    email: "mary.johnson@example.com"
};

 var contacts=[bob,mary];
 console.log(mary.phoneNumber); 
```

# c++ - 通过返回一个迭代器隐藏 STL 容器实现

> ID：10047685
> 
> 赞同：2
> 
> 时间：2012-04-06T18:35:36.290
> 
> 标签：c++, stl, iterator

我想要做的是返回一个 ForwardIterator（甚至是一对开始和结束迭代器），以便可以对客户端类隐藏底层实现。我找不到任何这样的例子。

如果底层实现是向量，则迭代器是 vector::iterator.. 即使您将输出模板化，这似乎也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T18:50:10.100

您不能同时按原样返回对象并期望调用者不知道其类型。“隐藏”任何对象的真实类型的典型方法是将其隐藏在接口后面。

例如，您可能想编写如下内容：

```
template<typename T>
class Cursor
{
public:
    typedef T value_type;
    virtual ~Cursor () {}
    virtual bool has_result () = 0;
    virtual value_type get_result () = 0;
};

// implements cursor interface for any sequence
// described as a pair of forward iterators.
template<typename I>
class ForwardSequenceCursor :
    public Cursor<std::iterator_traits<I>::value_type>
{
    I myCurrent;
    const I myEnd;
public:
     ForwardSequenceCursor(I begin, I end)
         : myCurrent(current), myEnd(end)
     {}
     virtual bool has_result () {
         return myCurrent != myEnd;
     }
     virtual value_type get_result () {
         return *myCurrent++;
     }
}; 
```

然后，您可以将任何正向序列返回为：

```
class Foo
{
    std::vector<int> myValues;
public:
    std::unique_ptr< Cursor<int> > values () {
        return std::unique_ptr< Cursor<int> >(
            new ForwardSequenceCursor<vector<int>::const_iterator>(
                myValues.begin(), myValues.end()
            )
        );
    }
}; 
```

并像这样使用它：

```
std::unique_ptr< Cursor<int> > cursor = foo.values();
while (cursor->has_result()) {
    std::cout << cursor->get_result() << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T18:41:58.570

您正在寻找的是“迭代器的类型擦除”。例如，参见以下之一：

*   [http://thbecker.net/free_software_utilities/type_erasure_for_cpp_iterators/start_page.html](http://thbecker.net/free_software_utilities/type_erasure_for_cpp_iterators/start_page.html)
*   [http://www.boost.org/doc/libs/1_46_1/boost/range/detail/any_iterator.hpp](http://www.boost.org/doc/libs/1_46_1/boost/range/detail/any_iterator.hpp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T19:29:54.367

你不能直接做你想做的事情，因为正如其他人所提到的，如果你的客户要获得一个返回值，它需要知道那个返回值是什么。

一种解决方法是执行以下操作：

```
template<typename Collection> class MyClass
{
    typedef Collection::iterator ReturnIt;
    typedef std::pair<ReturnIt, ReturnIt> IteratorPair;
    ReturnIt foo();
    IteratorPair bar();
}; 
```

现在，这并没有让我们从客户端看到容器类型中解放出来，但是接口没有绑定到容器类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T18:38:52.867

ForwardIterator 是一个概念，而不是一个类型。您需要声明您的函数以返回一个类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T18:45:56.073

没有“ForwardIterator”类型的基类，正常的 STL 方法是在你的类中有一个实际迭代器类型的 typedef，以便客户端代码可以像这样使用它：

> MyClass::iterator it = myclass.begin();

隐藏起来不是很好，但仍然可以让您稍后更改实现而无需更改客户端代码。

# ms-access - 能够将相同的信息输入到多个采购订单行

> ID：10047695
> 
> 赞同：1
> 
> 时间：2012-04-06T18:36:44.597
> 
> 标签：ms-access, ms-access-2007

我试图发现是否可以在 Access 2007/2010 中选择多个 Material#（或 PO 和 PO Line#），这样如果我想为所有这些输入相同的信息，那么我可以这样做一次，而不必查找每个单独的 Material# 并多次输入信息。

我们将我们产品的 Material#'s 以及 PO#'s 和 PO Line Item#'s 从 SAP 导入 Access。我的工作是查看每种材料# 并查看买方是否正确地对报价中的价格进行了基准测试，以验证我们从供应商那里获得了适当的节省金额。很多时候，一个 PO 上会包含多达 50 行，用于不同的材料#，但它们的规格和价格都是相同的。因此，我不必为 50 种不同的材料# 输入相同的评论，而是试图找出是否有更简单的方法来选择 50 种材料#并为所有这些材料输入一次评论。请让我知道是否有办法，因为它可以为我节省大量时间，而帮助建立我们的 Access 数据库的采购分析师认为没有办法，但我认为必须有办法做到这一点，

感谢您的任何帮助，您可以提供！

# authorization - Ruby on Rails – CanCan 只能让管理员查看已发布的博客文章

> ID：10047699
> 
> 赞同：1
> 
> 时间：2012-04-06T18:36:55.477
> 
> 标签：authorization, cancan, ruby-on-rails-3.2

# tl;博士

我在单作者博客中使用[CanCan进行授权。](https://github.com/ryanb/cancan)我希望非管理员用户无法查看未发布的帖子。以下不做的伎俩：

```
can :read, Post do |post|
  post.published_at && post.published_at <= Time.zone.now
end 
```

为什么它不起作用，我该怎么做才能使它起作用？

谢谢。;-)

# 长版

你好世界，

我有一个单用户博客应用程序并使用[CanCan](https://github.com/ryanb/cancan)进行授权。我希望管理员 ( `user.admin? # => true`) 能够为所欲为（他们毕竟是管理员……）。我还希望普通用户（登录但没有`admin`角色的用户和未登录的用户）能够查看已发布的博客文章。我不希望他们看到那些未发表的。

（模型的）博客文章`Post`都有一个名为（默认`published_at`为 a`DateTime`和）的属性。`nil`不用说：当`published_at`是时`nil`，帖子不发布，否则在设置的日期和时间发布。

我的`Ability`课堂上有以下内容：

```
class Ability
  include CanCan::Ability

  def initialize user
    user ||= User.new # guest user (not logged in)

    if user.admin?
      can :manage, :all
    else
      can :read, Post do |post|
        post.published_at && post.published_at <= Time.zone.now
      end
    end
  end
end 
```

但是，这似乎并不像我想要的那样工作。我在[CanCan wiki](https://github.com/ryanb/cancan/wiki/Defining-Abilities-with-Blocks)上读到这可能并不总是有效。但是，我相信它应该适用于我的情况，因为我确实有一个在我的操作中`Post`调用的模型实例：`@post``PostsController#show`

```
class PostsController < ApplicationController
  authorize_resource

  respond_to :html, :json

  # other actions omitted ...

  def show
    @post = Post.find params[:id]

    respond_with @post
  end

  # other actions omitted ...

end 
```

即使使用此代码，我也可以通过`show`操作和视图访问博客文章。我也尝试从`authorize_resource`中删除调用`PostsController`，意识到它可能会覆盖某些功能或其他东西，但它没有帮助。

我想出了一个临时解决方案，尽管我觉得它很丑，并且真的很想利用 CanCan 的能力。我丑陋的临时解决方案在内部检查`PostsController#show`用户是否有权查看资源：

```
def show
  @post = Post.find params[:id]

  unless @post.published_at
    raise CanCan::AccessDenied unless current_user && current_user.admin?
  end

  respond_with @post
end 
```

正如我所说，这行得通。但我真的不想采用这个解决方案，因为我相信有更好的方法来做这件事作为 CanCan 能力。

我非常感谢解释为什么我的方法不起作用以及解决问题的好方法。提前致谢。:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:50:47.890

在调用 authorize_resource 时（before_filter），您没有要授权的 post 对象。

假设 CanCan 1.6 或更高版本，试试这个..

在您的 Post 模型中

```
class Post < ActiveRecord::Base
  scope :published, lambda { where('published_at IS NOT NULL AND published_at <= ?', Time.zone.now) }
  # the rest of your model code
end 
```

在你的能力模型中

```
class Ability
  include CanCan::Ability

  def initialize user
    user ||= User.new # guest user (not logged in)

    if user.admin?
      can :manage, :all
    else
      can :read, Post, Post.published do |post|
        post.published_at && post.published_at <= Time.zone.now
      end
    end
  end
end 
```

在您的控制器中

```
class PostsController < ApplicationController
  load_and_authorize_resource
  respond_to :html, :json

  # other actions omitted ...

  def show
    respond_with @post
  end
end 
```

# c# - 选择前 50 行

> ID：10047700
> 
> 赞同：0
> 
> 时间：2012-04-06T18:37:04.507
> 
> 标签：c#, asp.net, sql-server

我对使用 MSSQL 还很陌生，遇到了一个奇怪的问题。给定最后一个查询的第一个记录 id，我需要找到之前的 50 行满足与第一个查询相同的条件并按降序返回它们。这是针对 ASP.NET 站点的，我很确定 ASP 端是正确的，但是当我尝试运行 SQL 查询时它给出了错误的结果

这是我一直在尝试的 SQL

```
 WITH PreviousPosts AS 
 (
    SELECT *
    FROM [database].[dbo].[table]
    WHERE (A_1STNAME LIKE '(variable)%')
    AND A_RECID < '(lastPost)'
 )
SELECT TOP 50 * FROM PreviousPosts
ORDER BY A_RECID ASC 
```

其中“（变量）”和“（lastPost）”实际上是用我的C＃填充的正确参数

我不再收到错误，但现在无论提供什么作为 lastPost，我都会得到相同的结果。

更新：结果是表中的前 50 个名字，例如（在我的测试用例中）“James”

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T18:41:05.027

您在 CTE 中缺少表名。看`**[TABLENAME]**`

```
 WITH PreviousPosts AS 
 (
    SELECT *
    FROM [database].[dbo].**[TABLENAME]**
    WHERE (A_1STNAME LIKE (variable)%)
    AND A_RECID < (lastPost)
    ORDER BY A_RECID DESC
 )
SELECT TOP 50 * FROM PreviousPosts
ORDER BY A_RECID ASC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T18:45:20.803

如前所述，您在 CTE 中缺少表名。您还缺少要从 CTE 中获取的列。

你应该改变：

```
SELECT TOP 50 FROM PreviousPosts ORDER BY A_RECID ASC 
```

到：

```
SELECT TOP 50 * FROM PreviousPosts ORDER BY A_RECID ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T18:48:35.027

要添加到列表中，您不能在 CTE 中进行排序。为了得到你想要的，完全放弃 CTE：

```
SELECT top 50 * 
FROM [database].[dbo].**[TABLENAME]** 
WHERE (A_1STNAME LIKE (variable)%) 
AND A_RECID < (lastPost) 
ORDER BY A_RECID DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T19:48:15.637

这是一个尝试，我现在知道你的架构。我仍然不得不做出比我能接受的更多的假设，所以这可能不是正确的：

```
;WITH RankedRecords AS
(
    SELECT
        ROW_NUMBER() OVER(ORDER BY A_RECID DESC) Row
        , A_RECID
    FROM [database]..[table]
    WHERE A_1STNAME LIKE '(variable)%')
        AND CAST(LEFT(A_RECID, 8) AS DATE) < CAST(LEFT('(lastPost)', 8) AS DATE)
)
SELECT TOP 50
    T.*
FROM[database]..[table] T
INNER JOIN RankedRecords
    ON RankedRecords.A_RECID = T.A_RECID
    AND RankedRecords BETWEEN (@LastPost - 51) AND (@LastPost - 1)
ORDER BY RankedRecords.Row 
```

# php - 使用 PDO 命名占位符时无法插入整数

> ID：10047705
> 
> 赞同：1
> 
> 时间：2012-04-06T18:37:19.790
> 
> 标签：php, sql, pdo, placeholder

我正在使用这样的命名占位符：

```
 $job['services_flag'] = 0;

    $SQL = "INSERT INTO jobs (
                        services_flag
                    )
                    VALUES (
                        :services_flag
                    )";

    $STH = $DBH->prepare($SQL);
    $STH->execute($job); 
```

但是，这坚持插入`1`.

如果我不使用命名占位符：

```
 $SQL = "INSERT INTO jobs (
                        services_flag
                    )
                    VALUES (
                        0
                    )";

    $STH = $DBH->prepare($SQL);
    $STH->execute(); 
```

然后它插入`0`. 诶？

**更新：**`services_flag`我的 SQL 数据库中字段 的数据类型是`BIT`. 我不知道这是否有什么不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:53:53.997

这是一个[已知](https://bugs.php.net/bug.php?id=50757)的`BIT`类型错误，您应该使用`bindParam`它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:54:35.357

您需要为其绑定一个值：

```
$STH->bindValue(':services_flag', $job['services_flag']);
$STH->execute(); 
```

这是一种方法。我已经看到一个数组，其值也映射到 execute() 中传递的占位符。

# javascript - 禁用JavaScript时创建浏览器后退按钮？

> ID：10047708
> 
> 赞同：3
> 
> 时间：2012-04-06T18:37:35.300
> 
> 标签：javascript, html, dom, browser

当用户的javascript被禁用时，是否不可能使用表单或链接创建浏览器后退按钮？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T18:51:59.477

没有服务器端脚本是不可能的。
但你可以显示这样的消息：

1)

```
<noscript>
    Sorry, I can’t show you that information unless you enable 
        Javascript for your web browser. 
        To go back to where you were, just click/tap your “back” button.

    <style type="text/css">
        #main-content { display:none; }
    </style>
</noscript> 
```

2）
或这样的页面： http:
[//saveyourself.ca/help-no-javascript.php](http://saveyourself.ca/help-no-javascript.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T18:40:02.453

最简单的方法是在服务器端。如果您可以获得[HTTP Referrer](http://en.wikipedia.org/wiki/HTTP_referrer)（这在许多服务器端语言中都可用），那么您可以构建一个链接并将其附加到页面的常规 HTML 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T18:39:27.317

没有服务器端脚本？不，这是不可能的。

但是，如果您能够运行服务器端脚本，那么您可以保存引荐来源并自己创建链接 ( `<a href="{REFERRER}">Back</a>`)。请注意，某些浏览器不会发送推荐人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T18:41:14.193

我相信当它被禁用时你不能使用任何javascript命令。但是，您仍然可以使用浏览器的后退按钮（不是 100%，因为我从未尝试过），但如果用户禁用了 javascript，那么网站上的许多内容将无法使用。如果没有启用 javascript，大型网站通常不会允许用户做太多事情。1 个例子是存储 cookie 之类的。

但是，有一些使用 PHP 的方法可以做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T18:43:44.900

服务器端可以采用 HTTP_REFERER 并将其动态添加到当前页面。但是，如果您知道他们最有可能来自哪里，您可以通过将最有可能返回的目的地作为链接来模拟后退按钮。[更多的](http://css-tricks.com/snippets/javascript/go-back-button/)

# uinavigationcontroller - UI 导航控制器中的右键未在 Monotouch 中显示

> ID：10047711
> 
> 赞同：0
> 
> 时间：2012-04-06T18:37:53.207
> 
> 标签：uinavigationcontroller, xamarin.ios, uinavigationbar, uinavigationitem

我正在尝试在 UI 导航控制器收费栏中添加一个自定义按钮我如下所示

1.  创建了一个从 UInavigation 控制器派生的类

2.重载viewdidload如下

{

注销按钮 = 新 UIbarbutton{..}

navigationitem.RightBArbutton = 注销按钮 }

请帮我解决问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T20:01:19.297

像这样的东西应该工作

```
_addButton = new UIBarButtonItem (UIBarButtonSystemItem.Add);
_rootVC.NavigationItem.RightBarButtonItem = _addButton; 
```

# excel - Excel 2007 为单个 Excel 文档启用宏

> ID：10047714
> 
> 赞同：4
> 
> 时间：2012-04-06T18:38:34.910
> 
> 标签：excel, vba

无论如何，用户是否可以默认为单个工作簿启用宏，但不能为其他工作簿启用宏？每次打开特定工作簿时都必须不断启用它们，这很烦人。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-06T20:34:13.307

您可以设置可以打开文件的受信任位置（文件夹），而无需启用宏： http: [//office.microsoft.com/en-us/word-help/create-remove-or-change-a-trusted-位置为您的文件-HA010031999.aspx](http://office.microsoft.com/en-us/word-help/create-remove-or-change-a-trusted-location-for-your-files-HA010031999.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T15:14:03.253

如果它是您创建的工作簿，那么您可以将您的数字证书添加到其中。您创建的数字证书将在您的机器中受到信任。数字证书可以通过 MS Office 工具（开始菜单）中列出的工具创建。创建数字证书后，您可以将其附加到 Excel 中的 vba 编辑器中的工作簿中。

# asp.net-mvc-3 - ASP.NET MVC3 Html.Raw 更改绝对 URL？

> ID：10047721
> 
> 赞同：2
> 
> 时间：2012-04-06T18:39:04.600
> 
> 标签：asp.net-mvc-3, html-helper

在我看来，我正在使用 ASP.NET MVC 3 和帮助程序 @Html.Raw。

我正在向它传递一些我存储在数据库中的 HTML 标记。该标记包含一些指向我网站上其他位置的 URL。例如[http://www.foo.fom/events](http://www.foo.fom/events)。这些数据是论坛帖子，因此显示它们的页面的格式为[http://www.foo.com/forums/thread/42/slug](http://www.foo.com/forums/thread/42/slug)。

但是，在呈现页面时，保存的 URL 会以修改后的形式呈现为：

[http://www.foo.com/forums/thread/42/events/](http://www.foo.com/forums/thread/42/events/)

这只发生在我网站上的 URL 上。如果 URL 指向某个外部站点，则它保持不变。

我已经验证我传递给@Html.Raw 的是正确的URL (http://www.foo.com/events)。为什么在呈现页面时它会发生变化？有没有一种简单的方法可以禁用此“功能”？

这是我显示标记的代码：

```
<div>
        @Html.Raw(post.Body)
</div> 
```

这是生成页面数据的控制器代码：

```
var post = _forumRepository.GetPostById(id)

var model = new ForumPostView()
{
    Body = post.Body,
    PostDate = post.DatePosted,
    PostedBy = post.Author,
    PostId = post.Id
};

return View(model); 
```

我已经通过调试器验证了 post.Body 中的确切 URL 在被传递回视图之前的格式为“http://www.foo.com/events”（没有尾部斜杠）。我还通过调试器验证了该值在传递到@Html.Raw 之前没有改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:42:15.700

It sounds like the urls that are pointing to other pages on your site are non-absolute. Are you **certain** they start with a `/` or `http`? If not, it's behaving exactly as it's supposed and treating them like relative urls -- and thus appending them to the current url.

(`Html.Raw` will not manipulate the string, so it's not at fault here)

Also, it wouldn't hurt to show us your code.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T23:35:30.100

No, in fact I am an idiot. The URLs were indeed stored in relative form without a leading /, which is why they ended up being relative to the current page. The text displayed was absolute, which is what I saw when I looked at the db. That's what I get for debugging on a few hours' sleep ;)

# php - 是否可以通过标准机制（即文件系统路径）公开 S3 存储？

> ID：10047732
> 
> 赞同：2
> 
> 时间：2012-04-06T18:40:00.697
> 
> 标签：php, perl, upload, amazon-s3, amazon-ec2

我需要将文件从网络浏览器上传到 S3。

我评估了许多上传组件并找到了我真正喜欢的东西：一个名为[FileChucker](http://encodable.com/filechucker/ "FileChucker")的 CGI 程序。

唯一的问题是，该程序适用于上传到服务器，而不是 S3。

我想**直接**上传到 S3/EC2，我不想将文件上传到我的服务器*然后*将它们发送到 S3

我联系了 FileChucker 作者询问与 S3/EC2 的兼容性，他们说：

> 我不熟悉 S3/EC2 如何在后端工作，但 FileChucker 可以安装在任何支持标准 Web 技术（即 Perl CGI）的服务器上，它可以将上传的文件保存到可通过该服务器访问的任何路径。因此，如果 EC2 支持 Perl，并且如果它通过标准机制（即文件系统路径）公开其 S3 存储，那么它应该可以正常工作。

自从我开始研究 S3/EC2 以来已经有几天了，所以我不能肯定地说。谁能告诉我这个条件是否满足？

> 如果 EC2 支持 Perl，并且如果它通过标准机制（即文件系统路径）公开其 S3 存储，那么它应该可以正常工作。

我相信 EC2 确实支持 perl，但我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T18:54:49.423

您实际上可以使用沼泽标准 HTTP `<form>`POST 到 S3 存储桶。

[http://aws.amazon.com/articles/1434](http://aws.amazon.com/articles/1434)

一些 FTP 客户端还允许您上传到 S3。在 Mac 上，Transmit 就是这样一种客户端。

如果您想在 Mac/Linux 上挂载 S3 存储桶作为文件系统，还有[S3FS 。](http://code.google.com/p/s3fs/)

# list - 在 Prolog 中除以列表并按其深度递增列表的每个元素

> ID：10047734
> 
> 赞同：0
> 
> 时间：2012-04-06T18:40:04.783
> 
> 标签：list, prolog

我正在尝试按其深度递增列表的每个元素。例如：

```
foo([0, 0, [0]], [1, 1, [2]]) -> true 
```

另外，我想在没有任何内置 Prolog 列表谓词的情况下这样做。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T20:09:44.440

这个定义划分了一个没有任何内置谓词的列表：

```
halve(List, A, B) :- halve(List, List, A, B).
halve(B, [], [], B).
halve(B, [_], [], B).
halve([H|T], [_,_|T2], [H|A], B) :-
    halve(T, T2, A, B). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:59:47.397

对于 divide_half，您需要验证两件事（可以独立完成）：列表定义了某种拆分，并且拆分的部分具有足够接近的长度。

其次，首先尝试查找每个元素，然后对其进行修改以跟踪深度，最后对其进行修改以构建列表的副本，其中包含已修改的元素（尽管我不明白这对一个人意味着什么-增加一个数字）。

# regex - 带有反向引用的 JavaScript 正则表达式

> ID：10047739
> 
> 赞同：0
> 
> 时间：2012-04-06T18:40:39.390
> 
> 标签：regex

我想构建将返回的正则表达式（在 JavaScript 中）：

*   对于字符串“测试”组（测试）和（） *第二组为空*
*   对于字符串“test-a”组 (test) 和 (test-a)

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T18:51:37.910

可以通过以下方式完成：

```
/(?=(test))(test-a)?/ 
```

将`test`和替换`a`为您真正需要的模式。

您可能还想锚定它，例如：

```
/^(?=(test))(?=(test-a)?)test(?:-a)?$/ 
```

# c# - 无论 systime 是否已被修改，我的应用程序是否可以显示时间

> ID：10047741
> 
> 赞同：1
> 
> 时间：2012-04-06T18:40:47.000
> 
> 标签：c#, windows, operating-system

另外我想问一下我的应用程序是否没有运行，那么我可以创建一个守护进程来检查这个（假设这个进程一直在运行）。

情况是这样的：用户将系统日期从 2012 年 1 月 1 日更改为 2013 年 1 月 1 日，但应用程序仍应使用 2012 年 1 月 1 日。

我使用的是 Windows 操作系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T19:06:30.280

没有可靠的方法来跟踪时间而不依赖于系统时间或外部源（Web 服务或 NTP），因为用户可能以几种不同的方式篡改日期。

您假设使用后台服务跟踪时间的选项无法阻止重新启动期间的时间更改（例如从 BIOS），那么保持内部时间的目的是什么？它与复制保护系统有关（如试用时间限制）？

如果是这样，您可以查看[CryptoLicensing 之](http://www.ssware.com/cryptolicensing/cryptolicensing_net.htm)类的库，该库声称具有**检测日期篡改**算法，并且可能对您有用。

*但是我认为应该尝试检测日期/时间回火而不是尝试自己跟踪时间...*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T19:06:10.017

没有办法实现你的要求，至少我知道。

我只是假设这是一个软件试用许可问题，如果是这样，有几个解决方法，比如

*   正如建议的那样，从远程源检查*实时*日期时间，一些安全的网络服务。

*   不是按时间限制试用版，而是按执行次数或保存次数限制。将该值存储在加密文件中的注册表或用户临时文件夹中的某个位置。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T02:22:43.250

您可以使用静态类在内部跟踪时间，例如下面的内部日期时间类。在程序开始时，使用以下命令对其进行初始化：

```
DateTime now = InternalDateTime.Now; 
```

您现在可以更改系统时间并拥有两个时间，也可以用于测量本地时钟漂移，如果您与时间服务器同步，那是您的事。

```
MessageBox.Show(
    DateTime.Now.ToString()+Environment.NewLine+
    InternalDateTime.Now.ToString()); 
```

并以相同的方式访问它，而不是使用 DateTime.Now，使用 InternalDateTime.Now 即使发生系统时间更改，它也会保留时间。

```
public class InternalDateTime
{
    private static volatile InternalDateTime _instance;
    private static object syncRoot = new Object();
    //threadsafe singleton
    public static InternalDateTime Instance
    {
        get
        {
            if (_instance == null)
            {
                lock (syncRoot)
                {
                    if (_instance == null)
                        _instance = new InternalDateTime();
                }
            }

            return _instance;
        }
    }

    private Stopwatch sw;
    private DateTime dtAppStart;

    private InternalDateTime()
    {
        dtAppStart = DateTime.Now;
        sw = new Stopwatch();
        sw.Start();
    }
    public static DateTime Now { get { return InternalDateTime.Instance.DateTimeNow; } }

    public DateTime DateTimeNow
    {
        get
        {
             return new DateTime(dtAppStart.Ticks).AddMilliseconds(sw.ElapsedMilliseconds);

        }
    }
} 
```

# c# - 控制器中的控制器？

> ID：10047743
> 
> 赞同：3
> 
> 时间：2012-04-06T18:40:51.897
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我对 MVC3 有点陌生，所以我有几个问题......

我正在创建一个博客类型的网站，我计划扩展它以包含许多其他内容。目前，我的项目中有一个 AdminController，其中包含我想要控制的各种事物的 ViewResult。例如：

```
public ViewResult Blog()
{
    var model = db.Posts.ToList();

    return View(model);
} 
```

另一个用于页面、导航、用户管理等。

我的问题是……我想为每个部分添加一个控制器……所以 BlogController、NavigationController 等。这些应该添加到 URL 中，如下所示……

```
/Admin/Blog/Create
/Admin/Blog/Edit
/Admin/Navigation/Create 
```

... 等等

我猜我必须从 AdminController 继承类似的东西：

```
public class BlogController : AdminController 
```

并创建自定义路线图？

任何建议或方向都会非常有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T18:44:33.363

你可能想看看*领域*；基本上，这可以让你的控制器有另一个层次的深度。换句话说，您将添加一个“管理”区域，然后在该区域内，您将拥有“博客”和“导航”控制器。以下是有关如何设置区域的教程：

[http://www.c-sharpcorner.com/UploadFile/b19d5a/areas-in-Asp-Net-mvc3/](http://www.c-sharpcorner.com/UploadFile/b19d5a/areas-in-Asp-Net-mvc3/)

# ssis - SSIS 的 EDI 输出文件

> ID：10047749
> 
> 赞同：1
> 
> 时间：2012-04-06T18:41:25.203
> 
> 标签：ssis, edi

我想知道从 SSIS 创建 EDI 输出的选项有哪些。

我已经看到 CozyRoc 的“EDI 源任务”，但我想从关系表中导出 EDI 文件？这是否可以通过 SSIS 实现，或者编写 C# 程序或类似程序比处理 SSIS 的细微差别要容易得多？

EDI的完整新手..任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T20:25:06.047

您无需担心 SSIS 的细微差别。您需要担心 EDI 的细微差别。

您使用的是 ANSI X12 还是 EDIFACT？您将如何处理封装（控制编号、多个贸易伙伴、拆分交换）？您要创建哪些文档？你将如何处理重复的片段？分隔符？

你是想做856还是837？如果是这样，使用 SSIS 只是自虐。

你正在重新发明轮子。查看 Liaison Delta (www.liaison.com)。您可以简单地映射 DB -> EDI，也可以构建复杂的逻辑。它还内置了 EDI 词典。您至少应该下载他们的免费 EDI 记事本工具。告诉他们我派你去的:)

查看 SourceForge (bots.sourceforge.net) 上的 BOTS。看看 EDIDEV。有很多工具可供选择，而且具有成本效益。这些工具/翻译器的存在是有原因的。SSIS 不是为正确的 EDI 创建/生成有效语法而构建的。可以做到吗？可能。应该是？上帝，没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-27T16:17:31.953

有可用的商业（和免费）EDI 包。然而，就我的目的而言，我看到的每一个都有一个严重的缺陷。他们只处理语法——最简单的部分。对于困难的部分——语义和业务逻辑——它们要求用户以 XML（或专有脚本）提供对需求的详细描述。编写 XML 比用 VB、C# 或任何其他过程语言编写整个解决方案更困难。甚至是 SQL。

如果我可以在 VB、C# 或 SQL 中完成，我可以轻松地将该代码放入 SSIS 脚本组件或 SQL 组件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:50:41.933

为了生成 EDI 文档，您应该使用某种类型的 EDI 软件。有许多类型的 EDI 翻译器、EDI 软件包和其他类型的 EDI 服务正是为此而设计的。

不要重新发明轮子。谷歌搜索 EDI 软件或 EDI 服务，您将有很多选择。尝试查看 Amosoft EDI Services ( [www.amosoft.com](http://www.amosoft.com) ) 这就是他们所做的。

# asp.net - 在 MVC3 的表单中获取所有文本框的值？

> ID：10047757
> 
> 赞同：0
> 
> 时间：2012-04-06T18:42:16.340
> 
> 标签：asp.net, asp.net-mvc-3, razor

我有一个表单，它包含一个 TreeView，每个节点中有许多文本框。使用 Razor 动态创建的 TreeView，我不知道文本框的名称或 ID。
如何在 MVC3 中获取控制器中所有文本框的值和 id？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T19:21:03.343

我会使用这个`FormCollection`类。在这里阅读[http://msdn.microsoft.com/en-us/library/system.web.mvc.formcollection.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.formcollection.aspx)

在您的控制器中；

```
Public ActionResult ActionName(FormCollection formCollection){
} 
```

这使您可以访问发布的任何密钥。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T19:18:03.707

`Request.Form.AllKeys`将允许您访问表单 ID 中的所有字段。然后您可以使用`Request.Form[id]`来访问该值。

编辑：可能的骗局：[如何从 Request.Form 获取所有元素值而不用 .GetValues(“ElementIdName”) 准确指定哪一个](https://stackoverflow.com/questions/6159103/)

# android - 清除 android 活动堆栈开始一个新活动

> ID：10047758
> 
> 赞同：4
> 
> 时间：2012-04-06T18:42:17.077
> 
> 标签：android, android-activity, stack

我有一个应用程序，每个新创建的活动都会启动一个异步任务来验证用户会话。如果会话有效，则应用程序流继续。如果没有，则必须清除整个活动堆栈，并且应该只有登录活动。此活动有一个“无历史记录”标志，因此它永远不会保存在堆栈中。

我一直在尝试这里提供的一些解决方案：[Android: Clear Activity Stack](https://stackoverflow.com/questions/7075349/android-clear-activity-stack)但没有成功。

这必须在最低的 android 上工作，至少是 2.2

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T20:00:44.087

我将登录活动保留在堆栈上。在登录活动的 onResume() 中，我检查用户是否具有登录凭据，如果是，则为登录后显示的下一个屏幕调用 startActivity。在这种情况下，用户看不到登录屏幕。

当用户按下注销按钮时，我会清除用户的凭据，然后将堆栈一直清除到登录屏幕：

```
 Intent intentLaunchLogin = new Intent(this, ActivityLogin.class);
    intentLaunchLogin.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivity(intentLaunchLogin); 
```

此外，如果用户在登录后显示的屏幕上并且他们按下“返回”按钮，我不希望他们进入登录活动。此代码将按预期将用户发送到主屏幕：

```
moveTaskToBack(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T19:27:03.983

你能做类似这里描述的事情吗：

[http://blog.janjonas.net/2010-12-20/android-development-restart-application-programmatically](http://blog.janjonas.net/2010-12-20/android-development-restart-application-programmatically)

基本上你创建一个警报来启动你的意图，然后你完全关闭你的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-26T05:41:08.383

这就是我一直在做的事情，而且效果很好。我使用主要活动启动应用程序，检查用户是否已登录，如果他未登录，则像这样启动登录活动

```
void launchLoginActivity(){
 /* Move user to LoginActivity, and remove the backstack */
    Intent intent = new Intent(getApplicationContext(), LoginActivity.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
    startActivity(intent);
    finish();
} 
```

它不会让你回去

# mysql - MySQL 根据多个条件选择用户

> ID：10047760
> 
> 赞同：2
> 
> 时间：2012-04-06T18:42:24.113
> 
> 标签：mysql

我的团队在一个学校项目的 php/MySQL 网站上工作。我有一个包含典型信息（ID、名字、姓氏等）的用户表。我还有一个问题表，其中包含如下示例数据。对于这个简化的例子，所有问题的答案都是数字的。

表问题：

```
qid | questionText
1   | 'favorite number'
2   | 'gpa'
3   | 'number of years doing ...' 
```

等等

用户将能够填写表格来回答任何或所有这些问题。注意：用户不需要回答所有问题，问题本身可能会在未来发生变化。

答案表如下所示：

表答案：

```
uid | qid | value
 37 |  1  |  42
 37 |  2  |  3.5
 38 |  2  |  3.6 
```

等等

现在，我正在处理该网站的搜索页面。我希望用户选择他们想要搜索的标准。我有一些工作，但我不确定它是否有效，或者它是否会扩展（并不是说这些表会很大——就像我说的，这是一个学校项目）。例如，我可能想列出所有喜欢的数字在 100 到 200 之间且 GPA 高于 2.0 的用户。目前，我有一个可以工作的查询生成器（据我所知，它创建了一个返回准确结果的有效查询）。此示例的查询生成器的结果如下所示：

```
SELECT u.ID, u.name (etc)
FROM User u
JOIN Answer a1 ON u.ID=a1.uid 
JOIN Answer a2 ON u.ID=a2.uid
WHERE 1
AND (a1.qid=1 AND a1.value>100 AND a1.value<200)
AND (a2.qid=2 AND a2.value>2.0) 
```

我添加 WHERE 1 以便在 for 循环中添加“AND (...)”。我意识到我可以删除 '1' 并使用 implode(and,array) 并添加 where if 数组不为空，但我认为这是等价的。如果没有，我可以很容易地改变它。

如您所见，我为搜索者要求的每个条件添加了一个 JOIN。这也允许我按 a1.value ASC 或 a2.value 等进行排序。

第一个问题：这个餐桌组织至少有点像样吗？我们认为，由于问题的数量是可变的，而且并不是每个用户都回答了每个问题，所以这样的事情是必要的。

主要问题：查询方式是否效率太低？我想将同一张桌子加入到自己身上多达十几次或两次（如果我们最终提出这么多问题的话）并不理想。我做了一些搜索，发现这两个帖子似乎有点触及我正在寻找的东西：

[1 个查询中有多个条件](https://stackoverflow.com/questions/2057439/mutiple-criteria-in-1-query)

这在 EXISTS 中使用了多个嵌套（正确的术语？）查询

[搜索具有多个条件的产品](https://stackoverflow.com/questions/3333795/search-for-products-with-multiple-criteria)

youssef azari 的评论之一提到使用'query 1' UNION 'query 2'

对于我正在尝试做的事情，这些中的任何一个会表现更好/更有意义吗？

奖金问题：

为简单起见，我在上面省略了，但实际上我有 3 个表（用于数值问题、布尔值和文本）决定有单独的表是因为（据我所知）它要么就是那个，要么有一个具有 3 个不同类型的值列的大答案表，其中 2 个始终为空。

这适用于我当前的查询生成器 - 示例查询是

```
SELECT u.ID,...
FROM User u
JOIN AnswerBool b1 ON u.ID=b1.uid
JOIN AnswerNum n1 ON u.ID=n1.uid
JOIN AnswerText t1 ON u.ID=t1.uid 
WHERE 1
AND (b1.qid=1 AND b1.value=true)
AND (n1.qid=16 AND n1.value<999)
AND (t1.qid=23 AND t1.value LIKE '...') 
```

考虑到这一点，获得结果的最佳方法是什么？

最后一个背景：我提到这是一个学校项目。虽然这是真的，但最终目标（这是一个本科生高级设计项目）是让一个部门使用我们的网站，让学生为他们的高级设计创建团队。对于规模的粗略估计，每个学期，该部门将有大约 200 名左右的学生使用我们的网站来组建团队。显然，当我们完成后，该部门将（希望）检查我们的网站是否存在安全问题和他们需要担心的其他问题（FERPA 和所有问题）。我们正在尝试考虑所有常见的安全实践和可扩展性问题，但最终，我们的代码可能会被其他人改进。

**更新** 根据 nnichols 的建议，我输入了相当数量的数据并对不同的查询进行了一些测试。我在表中放置了大约 250 个用户，并且在 3 个表中的每一个中放置了大约 2000 个答案。我发现提供的链接非常有用

（链接被删除，因为我不能超链接超过两次）链接在 nnichols 的回应中

以及我发现的这个：

[http://phpmaster.com/using-explain-to-write-better-mysql-queries/](http://phpmaster.com/using-explain-to-write-better-mysql-queries/)

我尝试了 3 种不同类型的查询，最后，我提出的查询效果最好。

第一：使用 EXISTS

```
SELECT u.ID,...
FROM User u WHERE 1
AND EXISTS 
    (SELECT * FROM AnswerNumber 
    WHERE uid=u.ID AND qid=# AND value>#) -- or any condition on value
AND EXISTS
    (SELECT * FROM AnswerNumber
    WHERE uid=u.ID AND qid=another # AND some_condition(value))
AND EXISTS
    (SELECT * FROM AnswerText
... 
```

我在 3 个答案表中的每一个上使用了 10 个条件（导致 30 个 EXISTS）

第二：使用 IN - 一种非常相似的方法（甚至可能完全一样？）产生相同的结果

```
SELECT u.ID,...
FROM User u WHERE 1
AND (u.ID) IN (SELECT uid FROM AnswerNumber WHERE qid=# AND ...)
... 
```

再次使用 30 个子查询。

我尝试的第三个与上述相同（使用 30 个 JOIN）

对前两个使用 EXPLAIN 的结果如下：（相同）

表 u 上的主要查询类型为 ALL（不好，尽管用户表并不大），搜索的行大约是用户表大小的两倍（不知道为什么）。EXPLAIN 输出中的每一行都是对相关答案表的依赖查询，类型为 eq_ref (good)，使用 WHERE 和 key=PRIMARY KEY 并且只搜索 1 行。总体还不错。

对于我建议的查询（JOINing）：

主要查询实际上是在您首先加入的任何表上（在我的情况下是 AnswerBoolean），其类型为 ref（优于 ALL）。搜索的行数等于任何人回答的问题数（因为任何人回答了 50 个不同的问题）（这将远少于用户数）。对于 EXPLAIN 输出中的每个附加行，它是一个简单的查询，类型为 eq_ref (good)，使用 WHERE 和 key=PRIMARY KEY 并且只搜索 1 行。总体几乎相同，但起始乘数较小。

JOIN 方法的最后一个优点：它是我唯一能弄清楚如何按各种值（例如 n1.value）排序的方法。由于其他两个查询使用子查询，我无法访问特定子查询的值。添加 order by 子句确实将第一个查询中的额外字段更改为也具有“使用临时”（我相信，对于 order by 是必需的）和“使用文件排序”（不知道如何避免这种情况）。然而，即使有这些减速，行数仍然少得多，另外两个（据我所知）不能使用 order by。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T19:11:04.053

[您可以使用适当大的测试数据集并使用EXPLAIN](http://dev.mysql.com/doc/refman/5.0/en/explain.html)和/或[profiler](http://dev.mysql.com/doc/refman/5.0/en/show-profiles.html)自己回答大多数问题。

您的 INNER JOIN 几乎肯定会比切换到 EXISTS 执行得更好，但这很容易使用合适的测试数据集和 EXPLAIN 进行测试。

# objective-c - Cocoa 框架角色

> ID：10047761
> 
> 赞同：-1
> 
> 时间：2012-04-06T18:42:26.620
> 
> 标签：objective-c, xcode, cocoa, frameworks

我有一些想要在我的 Xcode 项目中重用的共享代码。最简单的方法是使用共享框架。我必须公开标头才能在我的项目中重用该框架。

现在：由于必须在最终产品中复制框架，是否有一种自动方法来防止公共标头也被复制？当然，我可以手动执行此操作，但是自动化的技巧会很棒:)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T20:05:50.450

IIRC，您可以使用框架完成所有这些工作。框架可以安装在系统范围内，也可以安装在应用程序包中。如果您还没有阅读它，它在文档中：[Embedding a Private Framework in Your Application Bundle](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Tasks/CreatingFrameworks.html#//apple_ref/doc/uid/20002258-106880)

基本上，您将制作框架的两种变体，一种用于开发客户端应用程序，一种用于嵌入这些应用程序中。在 Xcode 中，您可以：

*   设置两个框架目标，并根据需要更改头文件的角色（公共或私有）
*   或`PUBLIC_HEADERS_FOLDER_PATH`在两个构建配置中使用具有不同值的构建设置。（比如说，“开发”和“部署”）。这样，您的头文件将最终位于不同的位置。

好久没做这个了，但是对嵌入式框架没有特别好的记忆。您正在重用什么类型的代码？这是通用的通用代码吗？或者它是一个完整的、连贯的项目？

如果您只是想重用通用代码，最好使用`.a`带有 headers 文件夹的简单、老式静态库，甚至更好的是[静态框架](http://blog.cloudmade.com/2010/05/10/iphone-static-framework/)。（这只是框架包中的一个静态库）

# c - c中的迭代目录遍历

> ID：10047762
> 
> 赞同：1
> 
> 时间：2012-04-06T18:42:44.927
> 
> 标签：c, filesystems, queue, dir

我一直在尝试用 c 编写一个迭代目录。我从一个标准的递归目录遍历开始，它按预期工作。现在我正在尝试使用队列结构将其转换为迭代版本，但它的行为出乎意料。不知何故，子目录中的文件被添加到我的队列中，当尝试将文件作为目录打开时，程序显然失败了。

代码片段

```
char *dirName;
DIR *dp;
struct dirent *d_ent;
struct stat s;
char name[80];

...

while(!IsEmpty(q)){
    dirName = FrontAndDequeue(q);
    if((dp = opendir(dirName)) == NULL) {
        printf("ERROR: dirRec: %s: %s\n", dirName, strerror(errno));
    } else {
        while((d_ent = readdir(dp)) != NULL) {
            if((strcmp(d_ent->d_name, "..") != 0) && (strcmp(d_ent->d_name, ".") != 0)){
                strcpy(name, dirName);
                strcat(name, "/");
                strcat(name, d_ent->d_name);
                if(lstat(name, &s) < 0) {
                    printf("ERROR: dirDepth: %s: %s\n", name, strerror(errno));
                } else {
                    if(S_ISDIR(s.st_mode)) {      /* Process directories. */
                        printf("Directory : %s\n", name);
                        Enqueue(name, q);
                    } else {              /* Process non-directories. */
                        printf("File      : %s\n", name);
                    } 
                }
            }
        }
        closedir(dp); 
```

样品运行

```
$ ./dir .
File      : ./dir.c
File      : ./dir.cpp
File      : ./dir.exe
File      : ./dir.exe.stackdump
File      : ./dirRec.c
File      : ./dirRec.exe
File      : ./fatal.h
File      : ./Makefile
File      : ./queue.c
File      : ./queue.h
File      : ./stackli.c
File      : ./stackli.h
Directory : ./testL1a
Directory : ./testL1b
File      : ./testL1b/New Bitmap Image.bmp
ERROR: dirRec: ./testL1b/New Bitmap Image.bmp: Not a directory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T18:51:44.813

We can't see what Enqueue() does, but odds are high to you put a pointer to a string on the queue instead of a copy of the string. So yes, what you dequeue won't be the same string again since you keep modifying *name* in the while loop.

# actionscript-3 - 使用动态 id 或名称来更改标签的文本

> ID：10047765
> 
> 赞同：0
> 
> 时间：2012-04-06T18:42:47.407
> 
> 标签：actionscript-3, apache-flex, actionscript, flex3

我有一个我正在开发的 flex 应用程序，并且希望能够遍历一系列标签并为它们分配文本

有点像

```
var labelnum:String = "1013";
var elem:Label = this["label" + labelnum];
elem.text = "this one"; 
```

网格项目的示例...我同时设置了名称和 ID

```
<mx:GridItem width="100%" height="100%">
    <mx:Label text="1005" id="label1005" name="label1005" />
</mx:GridItem>
<mx:GridItem width="100%" height="100%">
    <mx:Label text="1006" id="label1006" name="label1006" />
</mx:GridItem>
<mx:GridItem width="100%" height="100%">
    <mx:Label text="1007" id="label1007" name="label1007" />
</mx:GridItem>
<mx:GridItem width="100%" height="100%">
    <mx:Label text="1008" id="label1008" name="label1008" />
</mx:GridItem> 
```

访问这些标签和更改文本的正确方法是什么？

# php - PHP：这些下划线是什么？

> ID：10047766
> 
> 赞同：1
> 
> 时间：2012-04-06T18:42:51.380
> 
> 标签：php, coding-style

> **可能重复：**
> [PHP 中的双下划线？](https://stackoverflow.com/questions/1777131/double-underscore-in-php)

在我继承的 PHP 应用程序中，存在我难以理解的这些代码片段：

```
$foo = bar(array(
    'format' => '',
    'prev_text' => __('&laquo;'),
    'next_text' => __('&raquo;'),
)); 
```

另一个例子：

```
$some_text = sprintf( '<span>' . __( 'Displaying %s&#8211;%s of %s' ) . '</span>%s',
    number_format_i18n( ( $current_page - 1 ) * $per_page + 1 ),
    number_format_i18n( min( $current_page * $per_page, $total ) ),
    number_format_i18n( $total ),
    $page_links
); 
```

那些双下划线是什么？我试图寻找一个名称只是双下划线但没有找到的方法。那可能是什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T18:44:40.457

单个下划线是[gettext()](http://se.php.net/manual/en/function.gettext.php)的别名。我会假设双下划线将是用于类似目的的函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T18:47:01.660

它看起来像 WordPress 的本地化机制：[http ://codex.wordpress.org/Translating_WordPress#Localization_Technology](http://codex.wordpress.org/Translating_WordPress#Localization_Technology)

（像 PHPStorm 或 NetBeans 这样的 IDE 可以直接引导您进行函数声明。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T18:46:58.847

看起来您正在使用 Wordpress -`wp-includes/l10n.php`将 __ 定义为翻译字符串的函数（类似于[gettext](http://php.net/manual/en/function.gettext.php)及其别名，`_`但带有用于显式指定域的可选参数）。

# wpf - 覆盖 DataGrid 滚动条的视图

> ID：10047768
> 
> 赞同：0
> 
> 时间：2012-04-06T18:42:58.523
> 
> 标签：wpf, xaml, datagrid, custom-controls

我正在尝试自定义 xaml 数据网格中滚动条的外观。我可以毫无问题地为样式创建用户控件，但是如果我将它包裹在不起作用的数据网格周围。是否可以在 DataGrid 属性中绑定使用自定义控件或样式的内容？

谢谢所以

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T19:16:55.333

首先，您需要制作自定义的 ScrollBar 控件模板。然后，您可以在 Expression Blend 中打开 DataGrid 控件模板的副本，找到它正在使用的现有滚动条控件并将您的样式应用到它，然后使用 TargetType 的 BasedOn 值将其保存在资源字典中。这是推荐的，或者如果它是一个临时解决方案，您可以将其应用于数据网格的 usercontrol.resources。

[您可以在此处](http://msdn.microsoft.com/en-us/library/ms742173%28VS.85%29.aspx)找到滚动条控件模板

# ip - 具有端口映射的单个主机的多个 url？

> ID：10047769
> 
> 赞同：0
> 
> 时间：2012-04-06T18:43:03.007
> 
> 标签：ip

当一个人向 dns 注册器注册一个 url 时，它们可以包含到主机的端口映射吗？

www.myurl1.com myip:80 www.myurl2.com myip:81

基本上可以从外部使用端口 80 将多个 url 映射到同一台主机（所以不必做 www.myurl2.com:81）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T19:16:05.843

您可以将虚拟主机添加到您的 webs-servers conf 文件中。只需让您的 dns 注册商将您的所有域指向同一个 IP# 端口 :80，然后网络服务器将完成剩下的工作。

请参阅[http://httpd.apache.org/docs/2.0/vhosts/](http://httpd.apache.org/docs/2.0/vhosts/)

Apache httpd.conf 示例：

```
NameVirtualHost *:80

<VirtualHost *:80>
   DocumentRoot "/var/www/myurl1.com/"
   ServerName myurl1.com
</VirtualHost>

<VirtualHost *:80>
   DocumentRoot "/var/www/myurl1.com/"
   ServerName myurl2.com
</VirtualHost> 
```

Nginx - 见[http://wiki.nginx.org/ServerBlockExample](http://wiki.nginx.org/ServerBlockExample)

# android - 是否可以保存以前的活动？

> ID：10047770
> 
> 赞同：0
> 
> 时间：2012-04-06T18:43:10.920
> 
> 标签：android, android-activity, back-button, destroy

我的 Android 应用程序只有一个名为`MainActivity`. 当我按下`back-button`并再次运行我的应用程序时，之前的活动将被销毁。现在我想知道是否可以保存以前的活动？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:48:10.797

按返回键会终止您当前的活动。用户不会期望它被保存，因为没有办法“前进”。

您可以在按下返回时将活动的重要部分保存在 SharedPreferences 或数据库中，并在活动下一次启动时将其恢复到之前的状态，这会给人一种“已保存”的印象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T18:57:00.087

活动是在堆栈中创建的，当您从 B 创建 A 时，B 现在位于堆栈的顶部，当您按下后退按钮时，您告诉 android 不再需要堆栈的顶层（当前活动）并且它被删除。

如果在重新创建 B 时需要这样做，您将必须自己保存状态并恢复它。

您可以使用一种方法`sharedpreferences`来保存 TextView、EditView ...等的状态并在重新创建活动时再次辞职。

谢谢。也许有帮助:-)

# sqlite - 当我尝试上传比 drupal 7 上的上传限制小得多的文件时出错

> ID：10047771
> 
> 赞同：0
> 
> 时间：2012-04-06T18:43:19.110
> 
> 标签：sqlite, drupal, file-upload, image-upload

例如，当我尝试上传一个 200KB 的文件时，我收到一条错误消息，指出该文件大于 8MB。当我尝试上传 10KB 的图像时，上传过程成功完成。

我使用的是 Drupal 7，SQLite 作为数据库引擎，php.ini 中的上传限制为 8MB；服务器托管在 hordeeasy.com 上。

有人可以给我一个建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T20:13:32.067

这可能是您的网络服务器/主机的问题。

将 drupal 与 apache 一起使用时，文件上传有两种限制：

*   php/apache 强制限制
*   Drupal 强制软件限制

如果您可以访问您的 php.ini，请检查以下设置是否正确：

```
 post_max_size = 20M

 upload_max_file = 20M 
```

# c++ - 专门模板 U类>

> ID：10047780
> 
> 赞同：2
> 
> 时间：2012-04-06T18:44:02.687
> 
> 标签：c++, templates

我对嵌套模板及其模板专业化有疑问。给定以下类：

一个小模板类

```
template<class U>
class T {
public:
    T(){}
    virtual ~T (){}

}; 
```

还有某种嵌套模板

```
template<typename T, template<typename> class U>
class A {
public:
    void foo() 
    { 
        std::cerr << "A generic foo"; 
    }
}; 
```

还有一个小的 main.cpp

```
int main(int argc, const char *argv[])
{
    A<int,T> *a = new A<int,T>;
    a->foo();

    //This wont work:
    A<double,T*> *b = new A<double,T*>;
    b->foo();

    return 0;
} 
```

如果 U 是指针，现在我需要专门化：

```
 A<double,T*> *b = new A<double,T*>;
    b->foo(); 
```

如何做到这一点？我试过类似的东西：

```
template<typename T, template<typename> class U>
class A< T, U* >
{
public:
void foo()
{
    std::cerr << "A specialized foo";
}
}; 
```

但它只是解决

```
A.h:18:16: Error: Templateargument 2 is invalid 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T19:06:50.857

你要做的事情是不可能的，因为`T*`没有意义。它既不是正确的类型，也不匹配需要附加参数的模板。如果`U`要代表`T*`，会`U<int>`是什么？您可能的意思是`T<int>*`，但这与您的声明不匹配，因此无法将该类型插入`A`.

既然你从我的脑海中要求一种方法来解决这个问题，就像这样。

接受第三个模板参数`A`，我会调用`Expander`它并将其默认设置为：

```
template <typename T> struct Expander {
  typedef T type;
}; 
```

然后，在调用时`A`你可以说

```
A<int,T> normal;
A<int,T,PtrExpander> pointer; 
```

和

```
template <typename T> struct PtrExpander {
  typedef T* type;
}; 
```

并且`A`将是：

```
template<typename T, template<typename> class U, template <typename> class E = Expander> class A {
  typedef typename E<U<Your_Args_to_U> >::type; 
```

# linux - 鼠标在 Ubuntu 11.10 下的 WINE 应用程序中不起作用

> ID：10047790
> 
> 赞同：1
> 
> 时间：2012-04-06T18:44:41.317
> 
> 标签：linux, mouse, wine

我已经搜索了我能想到的所有地方，但似乎没有人遇到过这个问题或懒得去问。

我刚刚使用 gnome fallback shell 安装了 Ubuntu 11.10。一切都很好，除了一件事。

我的 WINE 应用程序在错误的屏幕上启动，这并不是什么大问题，但是当我将窗口拖到主屏幕时，鼠标不再在应用程序上工作。该应用程序不会冻结，并且完全响应键盘输入，我只是不能再点击任何东西了。

我的规格（相关）： - NVidia Geforce 540M - 1 个笔记本电脑屏幕 1366x768 - 1 个三星 Syncmaster SA550 27" - 1920x1080

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-14T18:26:46.443

您创建的应用程序的分辨率是否小于您电脑上当前的分辨率？

如果是这样，请执行以下操作（我有一台笔记本电脑，内部显示器为 1366x768，外部显示器为 1920x1080）：

*   打开 winecfg
*   选中虚拟桌面复选框并将大小设置为您要使用的最大分辨率
*   启动应用程序并检查它现在是否正常工作（您可以使用战网启动器进行检查:)）
*   再次启动 winecfg 并取消选中虚拟桌面框

# jquery - jQuery Mobile 与常规 jQuery

> ID：10047798
> 
> 赞同：5
> 
> 时间：2012-04-06T18:45:20.473
> 
> 标签：jquery

我读了这个线程 [jQuery vs jQuery Mobile vs jQuery UI?](https://stackoverflow.com/questions/6636388/jquery-vs-jquery-mobile-vs-jquery-ui)

但仍然很困惑。jQuery mobile 可以与桌面 jQuery 互换吗？

jQuery mobile 可以用于桌面开发吗？你可以使用常规的 jQuery 进行移动开发吗？

除了更好的触控支持，jQuery Mobile 还提供了哪些其他优势？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-06T18:56:56.223

让我帮助解释一下。

jQuery 是 jQuery Mobile 和 jQueryUI 的基础，有点像地下室是房子的其余部分。jQuery 本身有许多很棒的工具来操作网页和向页面添加交互性，以及许多其他仅靠 HTML 和 CSS 无法完成的奇特功能。这是他们的网站，其中包含可以单独使用 jQuery 完成的所有不同事情：http: [//api.jquery.com/](http://api.jquery.com/)。

jQueryUI 建立在 jQuery 之上，就像房子的第一层建在地下室之上。jQuery UI 包含一系列预先构建的交互式小部件，可以轻松集成到网站中。请记住，所有 jQuery UI 都是使用简单的 jQuery、JavaScript 和 CSS 构建的。仅使用 jQuery 就可以（而且非常容易）自己复制这些小部件。这些人很好地为你写了它们。:) 这是一个您可以查看他们所有小部件的网站：http: [//jqueryui.com/demos/](http://jqueryui.com/demos/)。

最后我们来到 jQuery Mobile。这也是建立在 jQuery 之上的，但不是在 jQuery UI 之上。使用我之前的类比，您可以将其视为车库。它不是在一楼的顶部，但它就在它的旁边，与房子的主要生活空间不同。jQuery Mobile 就像是 jQuery 和 jQuery UI 的轻量级修改版本的组合，针对在移动设备上的使用进行了优化。本质上，它是一个代码和小部件框架，可将类似应用程序的功能和小部件添加到网页以供移动使用。您可以在此处演示 jQuery Mobile：http: [//jquerymobile.com/demos/1.1.0-rc.2/](http://jquerymobile.com/demos/1.1.0-rc.2/)，或者您可以使用此拖放工具快速构建自己的 jQuery Mobile 页面：[http://codiqa。 com/](http://codiqa.com/) .

希望这有助于区分它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T18:52:50.227

jQuery 是 jQuery Mobile 和 jQuery UI 所依赖的库。

jQuery Mobile 专为触摸和更小的屏幕体验而设计。

jQuery UI 专为无触摸的标准屏幕体验而设计。

jQuery 本身非常适合用于移动设备或非移动设备。它只是 jQuery Mobile 和 jQuery UI 已经很好地为您构建了它，因为它们基于 jQuery 本身。

我不确定还需要说些什么。

# c# - ASP.NET 模拟打开文件共享

> ID：10047800
> 
> 赞同：0
> 
> 时间：2012-04-06T18:45:22.640
> 
> 标签：c#, asp.net, impersonation

我试图在我的 C# 代码中模拟用户以在 Windows 资源管理器中打开文件共享。但它不工作！我的代码如下。

```
Impersonator i = new Impersonator();

using (new Impersonator("userA", "domainA", "pa$$word", LogonType.LOGON32_LOGON_INTERACTIVE, LogonProvider.LOGON32_PROVIDER_DEFAULT))
{
    Process.Start(@"c:\windows\explorer.exe", @"\\fileshare\abc");
    Response.Write("Impersonated User: " + WindowsIdentity.GetCurrent().Name + "<br />"); 
    Response.Write("Logon User: " + Request.ServerVariables["LOGON_USER"] + "<br />"); 
    Response.Write("Authenticated User: " + Request.ServerVariables["AUTH_USER"] + "<br />") 
} 
```

我正在使用代码从该站点进行模拟：

[http://platinumdogs.wordpress.com/2008/10/30/net-c-impersonation-with-network-credentials/](http://platinumdogs.wordpress.com/2008/10/30/net-c-impersonation-with-network-credentials/)

我想这是因为登录和身份验证是我的 Windows 登录，因为我使用的是 Windows 身份验证？

我模拟的帐户是域帐户，并且拥有文件共享的完整帐户。

请帮忙

额外的：

我也尝试使用此代码，但它没有用。我收到“拒绝访问”错误

```
string target = "'_blank'";
string script = "window.open(" + @"'file://fileshare/abc'" + "," + target + "," + "'status=no, menubar=yes, toolbar=yes');";
Page.ClientScript.RegisterStartupScript(this.GetType(), "someUniqueId", script, true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:49:52.237

You can't start Explorer from an asp.net worker process. Explorer is a GUI application that requires a WindowStation to display.

When you say "it doesn't work", do you mean explorer doesn't open up when you go to the web page?

# java - 带有getter的“公共静态最终”或“私有静态最终”？

> ID：10047802
> 
> 赞同：57
> 
> 时间：2012-04-06T18:45:39.450
> 
> 标签：java, static, private, public, final

在 Java 中，变量应该保持私有以实现更好的封装，但是静态常量呢？这：

```
public static final int FOO = 5; 
```

结果相当于：

```
private static final int FOO = 5;
...
public static getFoo() { return FOO; } 
```

但哪个是更​​好的做法？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-04-06T18:54:30.027

不直接在代码中使用常量的原因之一。

假设 FOO 稍后可能会更改（但仍保持不变），例如`public static final int FOO = 10;`. 只要没有人愚蠢到直接对值进行硬编码，就不应该破坏任何东西吗？

不会。Java 编译器会将上面的 Foo 等常量内联到调用代码中，即`someFunc(FooClass.FOO);`变为`someFunc(5);`. 现在，如果您重新编译您的库而不是调用代码，您可能会遇到令人惊讶的情况。如果您使用函数，则可以避免这种情况 - JIT 仍会对其进行优化，因此不会影响到真正的性能。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-06T18:47:50.550

由于最终变量不能在以后更改，如果您将其用作全局常量，只需将其公开，不需要 getter。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-06T18:48:23.047

Getter 在这里毫无意义，很可能会被 JVM 内联。只要坚持公共常数。

封装背后的想法是保护变量的不需要的变化并隐藏内部表示。使用常量没有多大意义。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-06T19:21:20.360

将类外的变量用作：

```
public def FOO:Integer = 5; 
```

如果您的封装不是您的优先事项。否则，请使用第二个变体，以便公开方法而不是变量。

```
private static final int FOO = 5;
...
public static getFoo() { return FOO; } 
```

不依赖变量也是代码维护的更好做法。请记住“过早的优化是万恶之源”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-06T18:49:14.623

第一个，如果 getFoo 结果是常数并且不需要在运行时进行评估。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-06T18:51:53.530

我会继续使用 getFoo()，因为它允许您在将来更改实现而不更改客户端代码。正如@Tomasz 所指出的，JVM 可能会内联您当前的实现，因此您会付出很多性能损失。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-06T18:49:45.373

在成员上使用 setter 和 getter 的优点是能够覆盖。这对静态“方法”（而不是函数）无效

也没有办法定义接口的静态方法。

我会去现场访问

# java - 如何在java中使用位寻址？

> ID：10047805
> 
> 赞同：1
> 
> 时间：2012-04-06T18:45:45.857
> 
> 标签：java

如何在java中使用bit-addresable（程序集）？

例如

```
int a = 13;
int b = 99;
//How can i write 13 & 99 (but & only last bit of 13,99 = 1 & 1)?
//In assembly you can use Acc.0 or anything.x to manipulate bit.
//How to use this feature in java? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T18:53:32.693

```
int a = 99;
int b = 11;
int q = a & b & 0x1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T18:50:42.110

此操作没有特殊的语法，直接位操作在 Java 中并不像在汇编中那样重要。

您总是可以使用掩码来实现相同的效果，并且有一个[`BitSet`](http://docs.oracle.com/javase/6/docs/api/java/util/BitSet.html)类，它可以让您进行各种位操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T18:53:22.833

你必须写

```
(a & b) & 0x01 
```

# wcf - WCF 访问被拒绝异常

> ID：10047809
> 
> 赞同：1
> 
> 时间：2012-04-06T18:46:07.523
> 
> 标签：wcf, exception, wcf-security

我有一个异步调用的 wcf 服务。当我通过从 Visual Studio 运行服务并从客户端异步调用它来测试服务调用时，一切正常。当我将服务移动到服务器并异步调用服务时，我遇到了异常。

服务器异常：

```
<ExceptionType>System.ServiceModel.FaultException, System.ServiceModel, Version=3.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>Access is denied.</Message>
<StackTrace>
at System.ServiceModel.Dispatcher.AuthorizationBehavior.Authorize(MessageRpc&amp; rpc)
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc&amp; rpc)
at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.Dispatch(MessageRpc&amp; rpc, Boolean isOperationContextSet)
at System.ServiceModel.Dispatcher.ChannelHandler.DispatchAndReleasePump(RequestContext request, Boolean cleanThread, OperationContext currentOperationContext)
at System.ServiceModel.Dispatcher.ChannelHandler.HandleRequest(RequestContext request, OperationContext currentOperationContext)
at System.ServiceModel.Dispatcher.ChannelHandler.AsyncMessagePump(IAsyncResult result)
at System.ServiceModel.Dispatcher.ChannelHandler.OnContinueAsyncReceive(Object state)
at System.ServiceModel.Channels.IOThreadScheduler.CriticalHelper.WorkItem.Invoke2()
at System.ServiceModel.Channels.IOThreadScheduler.CriticalHelper.WorkItem.OnSecurityContextCallback(Object o)
at System.Security.SecurityContext.Run(SecurityContext securityContext, ContextCallback callback, Object state)
at System.ServiceModel.Channels.IOThreadScheduler.CriticalHelper.WorkItem.Invoke()
at System.ServiceModel.Channels.IOThreadScheduler.CriticalHelper.ProcessCallbacks()
at System.ServiceModel.Channels.IOThreadScheduler.CriticalHelper.CompletionCallback(Object state)
at System.ServiceModel.Channels.IOThreadScheduler.CriticalHelper.ScheduledOverlapped.IOCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
at System.ServiceModel.Diagnostics.Utility.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped)
at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)
</StackTrace>
<ExceptionString>System.ServiceModel.FaultException: Access is denied.</ExceptionString> 
```

客户端异常：

```
<Exception>
<ExceptionType>System.Reflection.TargetInvocationException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>An exception occurred during the operation, making the result invalid.  Check InnerException for exception details.</Message>
<StackTrace>
at System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary()
at RegenerateManagerApprovedDeptDocsCompletedEventArgs.get_Result() in C:\Service References\ManagePos\Reference.cs:line 476
at Tjx.Pm.Clients.PaperVisionBatchConsole.Program.client_RegenerateManagerApprovedDeptDocsCompleted(Object sender, RegenerateManagerApprovedDeptDocsCompletedEventArgs e) in C:\Client\Console\Tjx.Pm.Clients.PaperVisionBatchConsole\Program.cs:line 125
at Tjx.Pm.Common.Proxies.ManagePos.ManagePoServiceClient.OnRegenerateManagerApprovedDeptDocsCompleted(Object state) in C:\Service References\ManagePos\Reference.cs:line 1641
at System.Threading.QueueUserWorkItemCallback.WaitCallback_Context(Object state)
at System.Threading.ExecutionContext.runTryCode(Object userData)
at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
at System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
at System.Threading.ThreadPoolWorkQueue.Dispatch()
at System.Threading._ThreadPoolWaitCallback.PerformWaitCallback()
</StackTrace>
<ExceptionString>System.Reflection.TargetInvocationException: An exception occurred during the operation, making the result invalid.  Check InnerException for exception details. ---&gt; System.ServiceModel.Security.SecurityAccessDeniedException: Access is denied.

Server stack trace: 
   at System.ServiceModel.Channels.ServiceChannel.ThrowIfFaultUnderstood(Message reply, MessageFault fault, String action, MessageVersion version, FaultConverter faultConverter)
   at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc&amp; rpc)
   at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeEndService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp; msgData, Int32 type)
   at ManagePoService.EndRegenerateManagerApprovedDeptDocs(IAsyncResult result)
   at ManagePoServiceClient.EndRegenerateManagerApprovedDeptDocs(IAsyncResult result) in C:\Service References\ManagePos\Reference.cs:line 1620
   at ManagePoServiceClient.OnEndRegenerateManagerApprovedDeptDocs(IAsyncResult result) in C:\Service References\ManagePos\Reference.cs:line 1631
   at System.ServiceModel.ClientBase`1.OnAsyncCallCompleted(IAsyncResult result)
   --- End of inner exception stack trace ---
   at System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary()
   at ManagePos.RegenerateManagerApprovedDeptDocsCompletedEventArgs.get_Result() in C:\Service References\ManagePos\Reference.cs:line 476
   at Program.client_RegenerateManagerApprovedDeptDocsCompleted(Object sender, RegenerateManagerApprovedDeptDocsCompletedEventArgs e) in C:\Console\Tjx.Pm.Clients.PaperVisionBatchConsole\Program.cs:line 125
   at ManagePoServiceClient.OnRegenerateManagerApprovedDeptDocsCompleted(Object state) in C:\Tjx.Pm.Common.Proxies\Service References\ManagePos\Reference.cs:line 1641
   at System.Threading.QueueUserWorkItemCallback.WaitCallback_Context(Object state)
   at System.Threading.ExecutionContext.runTryCode(Object userData)
   at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
   at System.Threading.ThreadPoolWorkQueue.Dispatch()
   at System.Threading._ThreadPoolWaitCallback.PerformWaitCallback()</ExceptionString>
<InnerException>
<Exception>
<ExceptionType>System.ServiceModel.Security.SecurityAccessDeniedException, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>Access is denied.</Message>
<StackTrace>
Server stack trace:
at System.ServiceModel.Channels.ServiceChannel.ThrowIfFaultUnderstood(Message reply, MessageFault fault, String action, MessageVersion version, FaultConverter faultConverter)
at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc&amp; rpc)
at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)
at System.ServiceModel.Channels.ServiceChannelProxy.InvokeEndService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
Exception rethrown at [0]:
at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp; msgData, Int32 type)
at Tjx.Pm.Common.Proxies.ManagePos.ManagePoService.EndRegenerateManagerApprovedDeptDocs(IAsyncResult result)
at Tjx.Pm.Common.Proxies.ManagePos.ManagePoServiceClient.EndRegenerateManagerApprovedDeptDocs(IAsyncResult result) in C:\Common\Tjx.Pm.Common.Proxies\Service References\ManagePos\Reference.cs:line 1620
at ManagePoServiceClient.OnEndRegenerateManagerApprovedDeptDocs(IAsyncResult result) in C:\Tjx.Pm.Common.Proxies\Service References\ManagePos\Reference.cs:line 1631
at System.ServiceModel.ClientBase`1.OnAsyncCallCompleted(IAsyncResult result)
</StackTrace>
<ExceptionString>System.ServiceModel.Security.SecurityAccessDeniedException: Access is denied.

Server stack trace: 
   at System.ServiceModel.Channels.ServiceChannel.ThrowIfFaultUnderstood(Message reply, MessageFault fault, String action, MessageVersion version, FaultConverter faultConverter)
   at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc&amp; rpc)
   at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeEndService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp; msgData, Int32 type)
   at ManagePoService.EndRegenerateManagerApprovedDeptDocs(IAsyncResult result)
   at ManagePoServiceClient.EndRegenerateManagerApprovedDeptDocs(IAsyncResult result) in C:\Service References\ManagePos\Reference.cs:line 1620
   at ManagePoServiceClient.OnEndRegenerateManagerApprovedDeptDocs(IAsyncResult result) in C:\Service References\ManagePos\Reference.cs:line 1631
   at System.ServiceModel.ClientBase`1.OnAsyncCallCompleted(IAsyncResult result)</ExceptionString>
</Exception> 
```

客户端配置：

```
 <system.serviceModel>
    <diagnostics>
      <messageLogging logMalformedMessages="true" logMessagesAtServiceLevel="true" logMessagesAtTransportLevel="true"/>
    </diagnostics>
    <extensions>
      <bindingElementExtensions>
        <add name="gzipMessageEncoding" type="Common.Utilities.GZipEncoding.GZipMessageEncodingElement, Common.Utilities, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"/>
      </bindingElementExtensions>
      <behaviorExtensions>
        <add name="azManAuthorization" type="Common.Security.ServiceBehavior.AuthorizationBehaviorExtensionElement, Common.Security, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"/>
      </behaviorExtensions>
    </extensions>
    <behaviors>
      <endpointBehaviors>
        <behavior name="LookupServiceQuotaBehavior">
          <azManAuthorization/>
          <dataContractSerializer maxItemsInObjectGraph="1000000"/>
        </behavior>
        <behavior name="AuthorizationEndPointBehavior">
          <azManAuthorization/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <bindings>
      <customBinding>
        <binding name="WorksheetServiceEndPoint" sendTimeout="00:02:00" receiveTimeout="00:02:00">
          <gzipMessageEncoding innerMessageEncoding="textMessageEncoding">
            <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
          </gzipMessageEncoding>
          <security defaultAlgorithmSuite="Basic128" authenticationMode="Kerberos" requireDerivedKeys="true" securityHeaderLayout="Strict" includeTimestamp="true" keyEntropyMode="CombinedEntropy" messageProtectionOrder="SignBeforeEncryptAndEncryptSignature" messageSecurityVersion="WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10" requireSignatureConfirmation="false">
            <localClientSettings cacheCookies="true" detectReplays="true" replayCacheSize="900000" maxClockSkew="00:05:00" maxCookieCachingTime="Infinite" replayWindow="00:05:00" sessionKeyRenewalInterval="10:00:00" sessionKeyRolloverInterval="00:05:00" reconnectTransportOnFailure="true" timestampValidityDuration="00:05:00" cookieRenewalThresholdPercentage="60"/>
            <localServiceSettings detectReplays="true" issuedCookieLifetime="10:00:00" maxStatefulNegotiations="128" replayCacheSize="900000" maxClockSkew="00:05:00" negotiationTimeout="00:01:00" replayWindow="00:05:00" inactivityTimeout="00:02:00" sessionKeyRenewalInterval="15:00:00" sessionKeyRolloverInterval="00:05:00" reconnectTransportOnFailure="true" maxPendingSessions="128" maxCachedCookies="1000" timestampValidityDuration="00:05:00"/>
            <secureConversationBootstrap/>
          </security>
          <httpTransport manualAddressing="false" maxBufferPoolSize="524288" maxReceivedMessageSize="2147483647" allowCookies="false" authenticationScheme="Anonymous" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" keepAliveEnabled="true" maxBufferSize="2147483647" proxyAuthenticationScheme="Anonymous" realm="" transferMode="Buffered" unsafeConnectionNtlmAuthentication="false" useDefaultWebProxy="true"/>
        </binding>
      </customBinding>
    </bindings>
    <client>
      <endpoint address="http://server1:8100/V2.0/ManagePoService.svc" binding="customBinding" behaviorConfiguration="LookupServiceQuotaBehavior" bindingConfiguration="WorksheetServiceEndPoint" contract="ManagePoService" name="ManagePoServiceEndPoint">
        <identity>
          <servicePrincipalName value="User1@corp.abccorp.net"/>
        </identity>
      </endpoint>
    </client>
  </system.serviceModel> 
```

服务器配置：

```
<system.serviceModel>
    <serviceHostingEnvironment>
      <baseAddressPrefixFilters>
        <add prefix="http://fra1vmos01d.abc.com:8100"/>
      </baseAddressPrefixFilters>
    </serviceHostingEnvironment>
    <extensions>
      <bindingElementExtensions>
        <add name="gzipMessageEncoding" type="Common.Utilities.GZipEncoding.GZipMessageEncodingElement, Common.Utilities, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
      </bindingElementExtensions>
    </extensions>
    <diagnostics>
      <messageLogging logMalformedMessages="false" logMessagesAtServiceLevel="false" logMessagesAtTransportLevel="false" />
    </diagnostics>
    <bindings>
      <customBinding>
        <binding name="Server.Services.CustomWsBinding"  sendTimeout="00:02:00" receiveTimeout="00:02:00">
          <gzipMessageEncoding innerMessageEncoding="textMessageEncoding">
            <readerQuotas maxArrayLength="2147483647" maxDepth="2147483647" maxStringContentLength="2147483647" />
          </gzipMessageEncoding>
          <security authenticationMode="Kerberos" requireSecurityContextCancellation="false">
            <secureConversationBootstrap authenticationMode="Kerberos" requireSecurityContextCancellation="false"></secureConversationBootstrap>
          </security>
          <httpTransport maxReceivedMessageSize="2147483647" maxBufferSize="2147483647"  />
        </binding>
      </customBinding>
    </bindings>
    <services>
      <service behaviorConfiguration="Server.Services.PoBehavior" name="Server.Framework.Po.Facade.ManagePoFacade">
        <endpoint binding="customBinding"
                  bindingConfiguration="Server.Services.CustomWsBinding"
                  name="ManagePoServiceEndPoint"
                  bindingNamespace="urn:Common.Types.ServiceContracts.ManagePoService"
                  contract="Common.Types.ServiceContracts.Po.IManagePoService"
                  behaviorConfiguration="LookupServiceQuotaBehavior" >
          <identity>
            <servicePrincipalName value="User1@corp.abccorp.net"/>
          </identity>
        </endpoint>
        <endpoint address="/ws"
                  binding="wsHttpBinding"
                  bindingConfiguration="Server.Services.WsBinding"
                  name="ManagePoServiceEndPoint_WsBinding"
                  bindingNamespace="urn:Common.Types.ServiceContracts.ManagePoService"
                  contract="Common.Types.ServiceContracts.Po.IManagePoService"
                  behaviorConfiguration="LookupServiceQuotaBehavior" />
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="LookupServiceQuotaBehavior">
          <dataContractSerializer maxItemsInObjectGraph="1000000" />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="Server.Services.PoBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceAuthorization principalPermissionMode="UseWindowsGroups"
           serviceAuthorizationManagerType="Common.Security.AuthorizationManager, Common.Security" />
          <serviceThrottling
               maxConcurrentCalls="250"
               maxConcurrentInstances="2147483647"
               maxConcurrentSessions="250"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>      
  </system.serviceModel> 
```

# bash - 如何在 sed 命令之前打印 IP_ADDRESS:port #

> ID：10047811
> 
> 赞同：0
> 
> 时间：2012-04-06T18:46:14.200
> 
> 标签：bash

有没有简单的方法来打印 IP_Address:port# ？因为我一进入 SED 命令，端口 :# 就被剥离了

### 输入文件示例

```
Apr 6 14:20:41 TCP 178.255.83.1:80 in 
```

### 像这样的首选输出

```
Apr 6 14:20:41 TCP 178.255.83.1:80 in United Kingdom 
```

```
egrep -w 'TCP|UDP' $Denied_IPs |
sed 's/:[^:]* in/ in/; s/:[^:]* out/ out/' |
awk '{cmd="echo "$5" | code | fgrep 'Country:' | cut -c 16-43";
      cmd | getline rslt;
      close(cmd);
      print $1" "$2" "$3" "$4" "$5" "$6" "rslt}' >> "$IP2COUNTRY" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:55:49.793

该`sed`命令明确剥离端口。鉴于这就是`sed`命令所做的全部，只需将其从表达式中删除即可。

顺便说一句，这是一个相当不理想的实现。尤其是在我们去掉 之后`sed`，`egrep`可以折叠成`awk`：

```
awk '/ (TCP|UDP) / {
       split($5, addr, /:/);
       cmd = "echo " addr[1] " | code | fgrep Country: | cut -c 16-43";
       cmd | getline rslt;
       close(cmd);
       print $1, $2, $3, $4, $5, $6, rslt
     }' < "$Denied_IPs" >> "$IP2COUNTRY" 
```

我不禁认为 inside 的调用`code`可以`awk`优化一点。

（我还删除了 周围的单引号`'Country:'`，它们没有任何用处——如果*需要*它们，它们实际上会破坏脚本，因为整个东西已经用单引号包裹了。）

# parsing - 使用 awk 解析日志行

> ID：10047817
> 
> 赞同：0
> 
> 时间：2012-04-06T18:46:35.197
> 
> 标签：parsing, sed, awk, logging

我必须从大日志文件行中解析一些信息。它就像

```
abc.log:2012-03-03 11:12:12,457 ABC[123.RPH.-101] XYZ: Query=get_data @a=0,@b=1 Rows=10Time=100 
```

日志文件中有许多类似上面的日志行。我需要提取诸如日期时间之类的信息，即 2012-03-03 11:12:12,457 工作详细信息，即 123.RPH.-101 查询，即 get_data（无参数）行，即 10 时间，即 100

所以输出应该看起来像

```
2012-03-03 11:12:12,457|123|-101|get_data|10|100 
```

我用 awk 尝试了各种排列计算，但没有得到正确的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T19:42:16.553

我在 gawk 中的解决方案：它使用 gawk 扩展来匹配。

您没有指定文件格式，因此您可能需要调整正则表达式。

脚本调用： `gawk -v OFS='|' -f script.awk`

```
{
match($0, /[0-9]+-[0-9]+-[0-9]+ [0-9]+:[0-9]+:[0-9]+,[0-9]+/)
date_time = substr($0, RSTART, RLENGTH)

match($0, /\[([0-9]+).RPH.(-?[0-9]+)\]/, matches)
job_detail_1 = matches[1]
job_detail_2 = matches[2]

match($0, /Query=(\w+)/, matches)
query = matches[1]

match($0, /Rows=([0-9]+)/, matches)
rows = matches[1]

match($0, /Time=([0-9]+)/, matches)
time = matches[1]

print date_time, job_detail_1, job_detail_2, query,rows, time
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T19:28:45.317

好吧，这真的很可怕，但是因为`sed`在标签中并且还没有答案......

```
sed -e 's/[^0-9]*//' -re 's/[^ ]*\[([^.]*)\.[^.]*\.([^]]*)\]/| \1 | \2/' -e 's/[^ ]* Query=/| /' -e 's/ [^ ]* Rows=/ | /' -e 's/Time=/ | /' my_logfile 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T19:34:26.493

发射器：

```
@(collect :vars ())
@file:@year-@mon-@day @hh:@mm:@ss,@ms @jobname[@job1.RPH.@job2] @queryname: Query=@query @params Rows=@{rows /[0-9]+/}Time=@time
@(output)
@year-@mon-@day @hh-@mm-@ss,@ms|@job1|@job2|@query|@rows|@time
@(end)
@(end) 
```

跑：

```
$ txr data.txr data.log
2012-03-03 11-12-12,457|123|-101|get_data|10|100 
```

这是使程序断言日志文件中的每一行都必须匹配模式的一种方法。首先，不允许在集合中出现间隙。这意味着不能跳过不匹配的材料来查找匹配的行：

```
@(collect :gap 0 :vars ()) 
```

其次，在脚本的最后我们添加：

```
@(eof) 
```

这指定了文件末尾的匹配项。如果`@(collect)`由于不匹配的行（由于`:gap 0`约束）而提早退出，`@(eof)`则将失败，因此脚本将以失败状态终止。

在这种类型的任务中，字段拆分正则表达式黑客会适得其反，因为它们会盲目地为正在处理的输入的某些子集产生不正确的结果。如果输入包含大量行，则没有简单的方法来检查错误。最好有一个非常具体的匹配，它可能会拒绝任何与模式所基于的示例不相似的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T19:44:34.140

这是另一个不那么花哨的 AWK 解决方案（但也适用于 mawk）：

```
BEGIN { OFS="|" }

{
    i = match($3, /\[[^]]+\]/)
    job = substr($3, i + 1, RLENGTH - 2)
    split($5, X, "=")
    query = X[2]
    split($7, X, "=")
    rows = X[2]
    split($8, X, "=")
    time= X[2]

    print $1 " " $2, job, query, rows, time
} 
```

这假设`Rows=10`和`Time=100`字符串用空格分隔，也就是说，问题示例中有一个错字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T20:48:13.327

只需要正确的字段分隔符

```
awk -F '[][ =.]' -v OFS='|' '{print $1 " " $2, $4, $6, $10, $15, $17}' 
```

我假设“abc.log：”实际上不在日志文件中。

# spotify - 确定当前正在播放的 Spotify 播放列表？

> ID：10047818
> 
> 赞同：0
> 
> 时间：2012-04-06T18:46:41.283
> 
> 标签：spotify

我目前正在构建一个 Spotify 播放列表应用程序。当前有多个播放列表出现在一个页面上，但是当用户加载播放列表时，我想用当前正在播放的播放列表更新页面上的一个订阅按钮。

我可以使用播放器模型来确定当前播放的曲目。对播放列表执行相同操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T10:10:36.593

不幸的是，目前无法通过 Spotify Apps API 访问用户播放列表，除非用户通过将它们放到您的应用程序中直接将它们提供给您。这包括查看当前正在播放的播放列表（如果有）。

# javascript - 是否有更有效的方法来正则表达式匹配/替换 HTML 表中的日期？

> ID：10047822
> 
> 赞同：0
> 
> 时间：2012-04-06T18:47:06.777
> 
> 标签：javascript, jquery, regex

我的任务是统一 HTML 表格的日期格式，其中包含不同的数据库。使用 SQL 过程不是一种选择。已知事实是 TBODY 中的单元格将是纯文本或包含在一个链接中的纯文本。

我编写了一个 jQuery 插件来完成这项工作，但我想知道执行 innerHTML 与循环遍历每个 TD 是否有意义。

原插件：

```
$.fn.reformatAllDates = function () {
  var $txt = $(this).text();

  var reformatDate = function ($str) {
    var $parts = $str.split('/'),
        $year = $parts[2],
        $month = $parts[0],
        $day = $parts[1];
    if ($parts.length === 3) {
      $month = $month.length < 2 ? '0' + $month : $month;
      $day = $day.length < 2 ? '0' + $day : $day;

      //Returns dates in sort friendly format [YYYY-MM-DD]
      return $year + '-' + $month + '-' + $day;
    }
    return $str;
  };

  var $result, $reg = new RegExp(/^\d{1,2}\/\d{1,2}\/\d{4}$/);

  while (($result = $reg.exec($txt)) !== null) {
    var $match = $reg.exec($txt)[0];
    var $newFormat = reformatDate($match);
    $txt = $txt.replace($match, $newFormat);
  }
  return $(this).html($txt);
} 
```

原始实现：

```
$('table.display tbody tr td').each(function () {
  if ($(this).html().indexOf('href') >= 0)
    $(this).find('a:first').reformatAllDates();
  else
    $(this).reformatAllDates();
}); 
```

innerHTML 实现：

```
$('table.display tbody').reformatAllDates(); 
```

这行得通，尽管我还没有测试 innerHTML 在失败之前可以有多大，并准备好后备步骤......

```
$.fn.reformatAllDates = function () {
  var $result, 
      $reg = new RegExp(/\d{1,2}\/\d{1,2}\/\d{4}/),
      $r2 = new RegExp(/[\n\r\f]/g),
      $html = $(this).html();
  $html = $html.replace($r2,'');
  $html = $html.replace($r2,'');

  var reformatDate = function ($str) {
    var $parts = $str.split('/'),
        $year = $parts[2],
        $month = $parts[0],
        $day = $parts[1];
    if ($parts.length === 3) {
      $month = $month.length < 2 ? '0' + $month : $month;
      $day = $day.length < 2 ? '0' + $day : $day;
      return $year + '-' + $month + '-' + $day;
    }
    return $str;
  };

  var $match, $newFormat, $msg;
  while (($result = $reg.exec($html)) !== null) {
    $match = $reg.exec($html)[0];
    $newFormat = reformatDate($match);
    var $re = new RegExp($match,"g");
    $html = $html.replace($re, $newFormat);
  }
  return $(this).html($html);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:08:49.850

下面是我想出的。要了解我是如何得出以下结论的，请通读问题下的评论。

```
jQuery(document).ready(function($) {
    var reg = new RegExp(/^\d{1,2}\/\d{1,2}\/\d{4}$/);

    $.fn.reformatAllDates = function (subselect) {
        var $this = $(this),
            $nodes,
            $node,
            text,
            matched;

        if (subselect) {
            $nodes = $this.find(subselect);
        } else if ($this.is('table')) {
            $nodes = $this.find('td');
        } else if ($this.is('dl')) {
            $nodes = $this.find('dt, dd');
        } else {
            $nodes = $this.children();
        }

        for (var i = 0, l = $nodes.size(); i < l; i++) {
            $node = $($nodes[i]);
            text = $node.text();
            matched = text.match(/\//g);

            if (matched !== null && matched.length == 2) {
                $node.reformatDate(text);
            }
        }
    };

    $.fn.reformatDate = function(text, parts) {
        var $this = $(this),
            matched,
            year,
            month,
            day;

        if (!parts) {
            text = text ? text : $this.text();
            matched = reg.exec(text);
            parts = matched !== null ? matched[0].split('/') : [];
        }

        if (parts.length === 3) {
            month = parts[0];
            day = parts[1];
            year = parts[2];

            month = month.length < 2 ? '0' + month : month;
            day = day.length < 2 ? '0' + day : day;

            //Returns dates in sort friendly format [YYYY-MM-DD]
            $this.html(year + '-' + month + '-' + day);
        }
    };

    $('#trigger').click(function(){
        $('#tabledata').reformatAllDates();
    });
}); 
```

[http://jsfiddle.net/userdude/gkeL6/10/](http://jsfiddle.net/userdude/gkeL6/10/)

# wordpress - Wordpress 的联系表 7 返回 404 但在主页上有效

> ID：10047823
> 
> 赞同：1
> 
> 时间：2012-04-06T18:47:09.650
> 
> 标签：wordpress

我已将 Contact Form 7 (v 3.1.1) 安装到 Wordpress (v 3.3.1) 中。它在主页上工作正常（这是一个名为“主页”的静态页面），但在任何其他页面上它什么都不做，控制台说：

`POST http://trademarkshop.ca/contact/ 404 (Not Found)`

我`do_shortcode`用来从两个主题文件中调用它：

`<?php echo do_shortcode('[contact-form-7 id="212" title="Contact form"]'); ?>`

我`wp_footer()`在页脚和`wp_head()`页眉中。我没有安装其他插件。我什至检查了`if(is_home())`限制。我还尝试重定向其他页面以使用主页模板文件，但仍然给出 404 错误。

我以前从来没有遇到过这个问题。任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:18:35.280

您是否尝试过将永久链接更改为其他内容，

然后保存，

然后将其改回 /%postname%/

可能是它没有在 wp 根目录中创建 htaccess 文件，因此您的永久链接不起作用，

马蒂

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-15T11:33:07.757

使用此代码

```
 <?php echo do_shortcode( '[contact-form-7 id="7" title="Contact"]' ); ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-10T07:30:15.190

更改您的联系表 7 字段名称。因为一些已经被 wordpress 使用的名字可能是有冲突的。

例子：

**名称**到**用户名**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-20T14:04:40.023

他的问题是由两个错误配置的组合引起的。首先，AJAX JavaScript 在您的联系表单上不起作用。由于这个问题，您的联系表单在提交后会不必要地重定向。其次，您的联系表单在输入字段的名称中使用了不可用的词。这个问题让 WordPress 感到困惑，导致 404（“未找到”）错误。

[https://contactform7.com/faq/my-contact-form-always-redirects-to-404-error-page-after-submission/](https://contactform7.com/faq/my-contact-form-always-redirects-to-404-error-page-after-submission/)

# perl - perl 中的令牌是什么？

> ID：10047824
> 
> 赞同：-5
> 
> 时间：2012-04-06T18:47:10.597
> 
> 标签：perl

我的任务是打开并读取一个文件，从中删除所有逗号、句号、空格和感叹号。此外，我必须通过将单词作为散列并将出现次数作为值和单词作为键来显示每个单词的单词出现次数。例如，在一个说“Perl Program, Perl Program”的文档中。Perl 和 program 是键，其中值是 n

单词-----计数

Perl--------2

程序---2

指导员已经发布了指示，但他在其中提到，“将线分成标记并存储数组”。如果我知道令牌是什么，我想我可以做到这一点，那么有人可以解释一下令牌是什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T18:54:23.113

根据[维基百科](http://en.wikipedia.org/wiki/Token_%28parser%29#Token)

> 令牌是一串字符，根据规则分类为符号（例如，标识符、数字、逗号）。

Perl中的**token**没有特殊含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:54:58.320

在这种情况下，标记很可能是由特殊字符分解的单词/符号，这将是您应该忽略的所有字符。

这意味着在您的示例中，您将拥有的令牌（按顺序）

```
Perl
Program
Perl
Program 
```

但在另一个没有间隔的例子中

```
"Perl!ProgramHello,Name.GoodBye>ASFDKLDJ" 
```

令牌将是

```
Perl
ProgramHello (even though this is two english words)
Name
GoodBye
ASFDKLDJ 
```

您应该与您的教授澄清您必须拆分令牌的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-03T19:21:04.867

从一些以空格作为标准单词分隔符的文本文件开始，说明并没有说在删除空格和标点符号时不能替换其他分隔符。

# android - Android，访问系统私有/公共证书

> ID：10047828
> 
> 赞同：2
> 
> 时间：2012-04-06T18:47:27.677
> 
> 标签：android, ssl-certificate

Android 系统有一个内置的证书存储。例如，在创建 Exchange 帐户或设置无线 LAN 时会使用此存储中的证书。

这有什么方法可以在我自己的应用程序中使用证书吗？我更喜欢这个来管理我自己的证书存储。我可以接受 Android 4.0+ 解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T19:02:17.770

是的，4.0+ 是你需要的：

使用[钥匙串](https://developer.android.com/reference/android/security/KeyChain.html)

这是[原始的博文](http://android-developers.blogspot.com/2012/03/unifying-key-store-access-in-ics.html)

*摘录*：

> **ICS 中的新功能：钥匙串**
> 
> 为了弥补 ICS 中的差距，有一个名为[KeyChain](https://developer.android.com/reference/android/security/KeyChain.html)的新 API ，它规范应用程序对系统密钥存储的访问，并允许用户授予应用程序访问存储在那里的凭据的权限。此外，此 API 使应用程序能够从 X.509 证书和 PKCS#12 密钥库开始安装凭据。

# android - Android - 来自 AsynchTask 调用的异常

> ID：10047838
> 
> 赞同：0
> 
> 时间：2012-04-06T18:48:14.373
> 
> 标签：android

我有一个 Activity 进行远程服务器调用并尝试填充列表。对服务器的调用工作正常，并且调用返回一些很好的 JSON。

但随后系统抛出此异常：

```
04-06 18:43:19.626: D/AndroidRuntime(2564): Shutting down VM
04-06 18:43:19.626: W/dalvikvm(2564): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
04-06 18:43:19.686: E/AndroidRuntime(2564): FATAL EXCEPTION: main
04-06 18:43:19.686: E/AndroidRuntime(2564): java.lang.NullPointerException
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:394)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.widget.AbsListView.obtainView(AbsListView.java:2033)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.widget.ListView.onMeasure(ListView.java:1155)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.view.View.measure(View.java:12723)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:660)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.view.View.measure(View.java:12723)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.view.View.measure(View.java:12723)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:812)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.view.View.measure(View.java:12723)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2092)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.view.View.measure(View.java:12723)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1064)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.os.Looper.loop(Looper.java:137)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at java.lang.reflect.Method.invokeNative(Native Method)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at java.lang.reflect.Method.invoke(Method.java:511)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-06 18:43:19.686: E/AndroidRuntime(2564):     at dalvik.system.NativeStart.main(Native Method) 
```

为什么会发生这种情况？它没有指向我的任何代码，所以有点奇怪。

永远不会在回调中`protected void onPostExecute(String result)`被调用。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T23:25:36.377

您应该为我们发布您的 AsyncTask 以获得完整的图片，但从日志中我会告诉您，您正试图在`doInBackground()`. 只允许 UI 交互`onPostExecute()`。如果不是这种情况，请发布您的代码。

# php - 用新内容替换旧的 div 内容

> ID：10047839
> 
> 赞同：-7
> 
> 时间：2012-04-06T18:48:17.620
> 
> 标签：php, jquery

我正在开发其中 XML 是我的播放列表的视频播放器。这是代码：

```
$crxml=file_get_contents('http://spoti.com/latest.xml/?lang=en');    
$rss=new SimpleXMLElement($crxml);
$playlistitem=1;
   foreach($rss->channel->item as $post)
    {   
    if($playlistitem<=8)
    {    
    echo '<ul>';
    echo '<li class="xtitle">'.$post->title.'</li>';
    echo '<li class="xdesc">'.$post->description.'</li>';    
    $dc=$post->children('http://search.yahoo.com/mrss/');
    echo '<li class="xthumb">'.$dc->thumbnail->attributes()->url.'</li>';
    echo '<li class="xpreview">'.$dc->thumbnail->attributes()->url.'</li>'; 
    echo '<li class="xsources_mp4">'.$dc->content->attributes()->url.'</li>';
    $dc->content->attributes()->url=preg_replace('/.mp4/','.webm',$dc->content-attributes()->url);
     echo '<li class="xsources_webm">'.$dc->content->attributes()->url.'</li>';
     echo '</ul>';
    $playlistitem++;
     } 
```

当用户单击语言时，我想用新内容替换旧内容所有条目都替换为新条目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T18:54:07.543

```
$("#oldDivId").html(newContent); 
```

# php - 表单下拉功能

> ID：10047841
> 
> 赞同：0
> 
> 时间：2012-04-06T18:48:22.203
> 
> 标签：php, codeigniter

我正在尝试使用 codeigniter 表单助手的表单下拉功能。

```
echo form_dropdown('userCharacters', $userRoster, '', '', 'id="userCharacter"'); 
```

如果您注意到这`$userRoster`是我从控制器传递到视图的数组。

这是我在数组上执行 print_r 时的显示方式。

```
Array
(
[0] => stdClass Object
    (
        [id] => 1
        [rosterName] => Kid Wonder
    )

[1] => stdClass Object
    (
        [id] => 3
        [rosterName] => Oriel
    )

) 
```

但是我收到这些错误，不知道为什么

```
A PHP Error was encountered

Severity: 4096

Message: Object of class stdClass could not be converted to string

Filename: helpers/form_helper.php

Line Number: 352
A PHP Error was encountered

Severity: 4096

Message: Object of class stdClass could not be converted to string

Filename: helpers/form_helper.php

Line Number: 352 
```

**编辑 ：**

```
Array
(
[0] => Array
    (
        [id] => 1
        [rosterName] => Kid Wonder
    )

[1] => Array
    (
        [id] => 3
        [rosterName] => Oriel
    )

) 
```

**编辑2：** 应该发生的是用户登录后它具有默认字符ID和用户数据数组中保存的用户角色ID。它运行库函数 getRosterList。在该函数内部，它检查用户的角色 ID 是否为 4（管理员）或 5（超级管理员），如果是，那么我想要它做的是获取所有名册成员，其中包括他们的默认角色并拥有它作为选定的选项。如果他们不是这两个角色之一，那么我只希望它获取他们控制的名册成员并将预选选项作为默认角色 ID。如果他们只有一个字符，那么它会显示一个 h1 标签而不是下拉菜单。

控制器：

```
$this->data['userData'] =   $this->users->getUserByUserID($this->session->userdata('userID'));
$this->data['userRoster'] = $this->kowauth->getRosterList($this->data['userData']->usersRolesID); 
```

图书馆 (kowauth)

```
 * Get roster list
 *
 * @param   integer
 * @return  object/NULL
 */
function getRosterList($usersRolesID)
{
    // Check args
    if(!is_numeric($usersRolesID)) { throw new Exception('Non-numeric $usersRolesID provided to getRosterList()'); }

    if (($usersRolesID == 4) || ($usersRolesID == 5))
    {
        return $this->ci->users->getAllRoster();
    } 
    else
    {
        return $this->ci->users->getRosterByUserID($this->ci->session->userdata('userID'));
    }
} 
```

模型：

```
/**
 * Get roster list
 *
 * @return  object/NULL
 */
function getAllRoster()
{       
    $this->db->select('id');
    $this->db->select('rosterName');
    $this->db->select('rosterStatusID');
    $this->db->from('rosterList');
    $this->db->order_by('rosterName');
    $query = $this->db->get();
    if ($query->num_rows() > 0) 
    {
        return $query->result();
    }
    return null;
}

/**
 * Get list of roster by user ID
 *
 * @return  object/NULL
 */
function getRosterByUserID($userID)
{
    // Check args
    if (!is_numeric($userID)) { throw new Exception('Non-numeric $userID provided to getRosterByUserID()'); }

    $this->db->select('id');
    $this->db->select('rosterName');
    $this->db->from('rosterList');
    $this->db->where('userID', $userID);
    $this->db->order_by('rosterName');
    $query = $this->db->get();
    if ($query->num_rows() > 0) 
    {
        return $query->result_array();
    }
    return null;
} 
```

看法：

```
<?php 
        echo '<pre>';
        print_r($userRoster);
        echo '</pre>';
        if (count($userRoster) == 1)
        {
            echo '<h1>'.$userRoster->rosterName.'</h1>';
        }
        else 
        {
            $options = array (
                $userRoster['id'] => $userRoster->rosterName
            );
            echo form_dropdown('userCharacters', $options, '', 'id="userCharacter"');
        }
        ?> 
```

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T18:54:18.083

您当前正在传递一个对象数组。我相信你的 $userRoster 数组应该像这样格式化：

```
Array
(
     1 => 'Kid Wonder'
     3 => 'Oriel'
) 
```

另外，我相信 form_dropdown 只需要四个参数，而您正在尝试传递五个参数。您可能希望将最后一个参数移到第四个位置：

```
echo form_dropdown('userCharacters', $userRoster, '', 'id="userCharacter"'); 
```

应该产生：

```
<select name="userCharacters" id="userCharacter">
<option value="1">Kid Wonder</option>
<option value="3">Oriel</option>
</select> 
```

我*认为*这就是你想要的！

[http://codeigniter.com/user_guide/helpers/form_helper.html](http://codeigniter.com/user_guide/helpers/form_helper.html)

# knockout.js - 将 json 映射到淘汰视图模型上的属性

> ID：10047845
> 
> 赞同：0
> 
> 时间：2012-04-06T18:48:46.467
> 
> 标签：knockout.js

这工作正常：

```
var vm = {};
$.getJSON('file.json', function (data) {
    vm.objects = data;
});
ko.applyBindings(vm); 
```

但这不起作用：

```
var vm = {
    objects: $.getJSON('file.json', function (data) {});
};
ko.applyBindings(vm); 
```

为什么不？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:59:02.677

因为 $.getJSON 不返回任何内容（或者，至少，它不返回您的数据）。它是异步的，因此访问数据的唯一方法是在回调函数中。

# c++ - c ++ win32：向ComboBox添加值

> ID：10047846
> 
> 赞同：5
> 
> 时间：2012-04-06T18:48:54.480
> 
> 标签：c++, winapi, combobox

我确定这个问题对所有专家来说都很容易，但我是 C++ 新手，并试图在我的程序中向“选项”对话框添加一个组合框，我已经完成了以下操作，但仍然看不到组合中的任何项目盒子你能告诉我我在这里缺少什么吗？

在 Resource.h 中：`#define IDD_TRIGGER_MODE 201`

在 Project.rc 中：`COMBOBOX IDD_TRIGGER_MODE, 64,22,68,14,WS_TABSTOP | WS_VSCROLL | CBS_DROPDOWN`

.cpp 文件中的任何我都有以下代码：

```
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam){
int wmId, wmEvent;
PAINTSTRUCT ps;
HDC hdc;

switch (message)
{
case WM_COMMAND:    
    ///Other codes///
        case IDM_OPTIONS:       

    g_hToolbar = CreateDialog(hInst, MAKEINTRESOURCE(IDD_OPTION_BOX), hWnd, ToolDlgProc);
    if(g_hToolbar != NULL)
    {
        ShowWindow(g_hToolbar, SW_SHOW);
    }        
        break;
    default:
        return DefWindowProc(hWnd, message, wParam, lParam);
    }
    break;
///Other codes///
} 
```

ToolDlgProc 函数：

```
INT_PTR CALLBACK ToolDlgProc(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)
{
UNREFERENCED_PARAMETER(lParam);
 HWND fgModes;

switch (message)
{
case WM_INITDIALOG:
     fgModes = ::GetDlgItem(hDlg, IDD_TRIGGER_MODE);
  fgModes = GetDlgItem(hDlg, IDD_TRIGGER_MODE); 
     if(fgModes!=NULL){
     if(SendMessage(fgModes,CB_ADDSTRING,0, reinterpret_cast<LPARAM (_T("FreeRun")))==NULL){            
        return (INT_PTR)FALSE ;          
     }                  
    return (INT_PTR)TRUE;
     }

case WM_COMMAND:
    if (LOWORD(wParam) == IDOK || LOWORD(wParam) == IDCANCEL)
    {
        EndDialog(hDlg, LOWORD(wParam));
        return (INT_PTR)TRUE;
    }
    break;
}
return (INT_PTR)FALSE;
} 
```

我将它用于解决此问题的任何想法，谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T17:03:35.073

非常感谢你的帮助。但我注意到我的代码没有问题，只是 .rc 文件中 ComboBox 的大小非常小（因为我缺乏 c++ API 经验），所以我将其更改为 42 现在我可以看到我的项目。这是编辑后的代码：

`COMBOBOX IDD_TRIGGER_MODE, 64,22,69,42,WS_CHILD|WS_VISIBLE|CBS_DROPDOWNLIST`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T20:46:10.247

改变：

```
SendMessage(fgModes,CB_ADDSTRING,0, reinterpret_cast<LPARAM>("FreeRun")); 
```

至：

```
SendMessage(fgModes,CB_ADDSTRING,0, reinterpret_cast<LPARAM>(_T("FreeRun"))); 
```

还有你混合`CreateWindow/Ex`和资源的充分理由吗？我假设`CreateWindow/Ex`是因为我看到您`WndProc`在第一个 cpp 中使用 a，而不是`DialogProc`.

# android - Android：如何检查活动是否有选项菜单？

> ID：10047848
> 
> 赞同：1
> 
> 时间：2012-04-06T18:49:01.530
> 
> 标签：android

给定一个 Activity 对象，有没有办法确定它是否有选项菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:51:46.160

You could put a flag in the "onCreateOptionsMenu" method that you could check for to see it had ever been called.

# android - Android - 让线程等待通知或超时*实时*

> ID：10047849
> 
> 赞同：1
> 
> 时间：2012-04-06T18:49:06.853
> 
> 标签：android, timeout, power-management

我在 Android 应用程序中有一个线程，我想在其操作的某个时间点等待：

1.  来自另一个线程的通知，或
2.  发生超时，我想实时指定。

目前我（大致）有以下几点：

```
...
doStuff();
synchronized(this) {
  if (!notificationReceived) wait(TIMEOUTPERIOD);
}
doMoreStuff();
... 
```

并在从另一个线程调用的方法中：

```
synchronized(this) {
  notificationReceived = true;
  notifyAll();
} 
```

这几乎可以工作。事实上，它一直工作到调试和测试，直到我尝试在现场部署应用程序时才停止工作。因为事实证明 Object.wait() 中的计时器在手机 CPU 进入睡眠状态时停止。和 Thread.sleep() 中的一样。哎呀。

现在，我不介意电话睡着时电话不会返回（实际上我认为这是可取的——电话睡着时在任何时候都不需要操作的结果），但是如果电话在我的超时期间睡觉，我希望动作一醒来就触发。

我有什么办法可以做到这一点吗？我知道我*可以*使用 AlarmManager 在所需时间后向我发送广播 Intent，并将延续代码放入（什么......？广播接收器？我以前从未这样做过......）但这会使我的应用程序的逻辑。那么：有没有更简单的方法可以在我的线程中放置（可取消的）实时延迟？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:25:13.863

我通过动态注册一个广播接收器来解决这个问题，该广播接收器引用了我想要通知的对象，并在它收到广播时调用 notifyAll()。然后，我在每次调用 wait() 之前使用 AlarmManager 为其设置警报，如果不是由于超时，在 wait() 返回后取消警报。

我认为我的代码中可能存在一种竞争条件，即超时与外部通知几乎同时发生，但在我的情况下，我认为我是否不时收到重复通知并不重要。

# sql-server - SQL Server：选择到同一个表？

> ID：10047850
> 
> 赞同：1
> 
> 时间：2012-04-06T18:49:10.427
> 
> 标签：sql-server, select

在 SQL Server 2008 中，我有两个表。一张表供用户使用：

```
id_user - integer, primary key 
id_group - integer 
username - varchar 
phone - varchar 
id_coordinating - int 
```

样本数据：

```
1, 1, admin,       0230029921, NULL 
2, 2, supervisor1, 0230029933, NULL
3, 2, supervisor2, 0321211233, NULL 
4, 3, user1,       0321222323, 2 
5, 3, user2,       0323211232, 2 
6, 3, user3,       0324223121, 3 
```

组 USERS 中的所有用户都有一名主管，由`id_user`

还有另一个团体表

```
id_group - integer, primary key 
groupname - varchar 
```

样本数据：

```
1, Administrators 
2, Supervisors 
3, Users 
```

我正在运行以下查询：

```
select  id_user, username,  group.groupname, phone, id_coordinating
from users  
INNER JOIN group ON users.id_group = group.id_group 
```

我得到以下结果：

```
1 1 admin        Administrators 0230029921 NULL
2 2 supervisor1  Supervisors    0230029933 NULL
3 2 supervisor2  Supervisors    0321211233 NULL 
4 3 user1        Users          0321222323 2
5 3 user2        Users          0323211232 2 
6 3 user3        Users          0324223121 3 
```

我想`id_coordonating`用用户名替换，看起来像这样......

```
1 1 admin        Administrators 0230029921 NULL 
2 2 supervisor1  Supervisors    0230029933 NULL 
3 2 supervisor2  Supervisors    0321211233 NULL 
4 3 user1        Users          0321222323 supervisor1  
5 3 user2        Users          0323211232 supervisor1  
6 3 user3        Users          0324223121 supervisor2 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T19:13:35.467

您可以`left join`为此返回您的用户表。

```
select
  u.id_user, 
  u.username,  
  g.groupname, 
  u.phone,
  u2.username
from users u
join group g
  on u.id_group = g.id_group
left join users u2
  on u.id_coordinating = u2.id_user 
```

# html - javascript - HTML5 local storage sort order

> ID：10047851
> 
> 赞同：0
> 
> 时间：2012-04-06T18:49:10.350
> 
> 标签：html, local-storage

> **Possible Duplicate:**
> [HTML5 local storage sort](https://stackoverflow.com/questions/3959817/html5-local-storage-sort)

I am storing data into a localstorage using HTML5 I need to have it sort in the order I put them in. Originally, I had them start with Q: and then appended data to it. I found out taht when I retrieved the data, it did not come out in the same order I entered them in. I then did someting like 1Q:.., 2Q:.. + ..

but found that it again did not sort in the order I needed them in.

```
 localStorage.getItem(... ) 
```

Wondering how I can tell it what sort order to retrieve the data in?

I have the key as such:

```
1Q:fdf
2Q:dfdf
3Q:dfdf 
```

For the value is is random values. I as hoping that having the key in a certain order may make it work.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T19:02:26.813

localStorage 是一个纯**键值存储**。它不关心订单或除了它的键值对之外的任何东西，它们总是被字符串化的。

如果您想做一些更花哨的事情，您可能想使用`indexed db`现在属于 html5 标准的（或`web sql database`在某些浏览器中实现但前一段时间被放弃的）或传递可能包含更多信息的字符串化对象，例如值和可能的排序顺序。

~~您究竟是如何将数据传递到本地存储的？~~

编辑您对我的问题的回答：

您可以创建一个数组，包含您的排序值并存储它的字符串化表示。您可能需要为此编写自己的排序函数。

```
localStorage.setItem(JSON.stringify( <your sorted array> )); 
```

然后，要检索该值，您可以执行以下操作：

```
var array = JSON.parse( localStorage.getItem( <your sorted array> ) ); 
```

# java - Java 泛型和注解：类型安全

> ID：10047857
> 
> 赞同：6
> 
> 时间：2012-04-06T18:49:33.063
> 
> 标签：java, generics, annotations

我知道我可以做类似的事情：

```
public class AbstractDao<T extends Bean> {

} 
```

在这种情况下，Bean 是一个类或接口。

我想知道是否有办法使用注释来做到这一点，例如：

```
public class AbstractDao<T extends javax.persistence.Entity> {

} 
```

这样的事情可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T18:55:11.197

不幸的是，注释中没有继承，所以这是不可能的。

在这里查看类似问题的答案：

[为什么不能在 Java 中扩展注解？](https://stackoverflow.com/questions/1624084/why-is-not-possible-to-extend-annotations-in-java)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T19:04:54.767

不可以。Java 语言规范[说](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.4)类型变量只能被限制为扩展/实现特定的类或接口。由于注释类不会导致该类扩展或实现特定类型，因此您不能通过注释进行约束。

# c# - 在表单之间传递数据并在 Form1 中继续

> ID：10047858
> 
> 赞同：0
> 
> 时间：2012-04-06T18:49:41.160
> 
> 标签：c#, winforms

我有一个非常基本的问题。场景：2 个表单 Form1，Form2- 接受用户 3 个输入的对话框 Form1 有一个网格，用户可以在其中选择一些单元格。一旦用户做出选择，rowindex 和 colindex 就会存储在变量 c1,c1,r1,r2 中

表格1：

```
private InsertRowsMethod(...)
{
float dv ;
     GridRangeInfoList list;
       Boolean b = theGrid.Selections.GetSelectedRanges(out list, true);
       if (list.Count > 0)
       {

          r1= list.ActiveRange.Top;  
          c1 = list.ActiveRange.Left;
          c2 = list.ActiveRange.Right;
       }
     DateTime dt;
    frmDialog dialog = new frmDialog();

    dialog.Show();

     int dialognrows = Int32.Parse(dialog.textBox1.Text);
    float dialogdv = float.Parse(dialog.textBox2.Text);
   // var dttext = (DateTime.Parse(textBox3.Text)).Ticks;

    TimeSpan dialogdt = TimeSpan.Parse(dialog.textBox3.Text);

    for (int nc = insertc1; nc <= insertc2; nc++)
    {
        insertData(nc, insertr1, dialognrows, dialogdv, dialogdt, null);

    }

} 
```

在 Form2 中：它需要 3 个参数。nrows,time,value 现在我需要将这 3 个变量从 Form2-Dialog 传递给 Form1。我尝试了蛮力方式（我想改变它，我稍后会谈到）

```
In form2: I created method

     private void button1_Click(object sender, EventArgs e)
            {
                int nrows = Int32.Parse(textBox1.Text);
                float dv = float.Parse(textBox2.Text);
               // var dttext = (DateTime.Parse(textBox3.Text)).Ticks;

                TimeSpan dt = TimeSpan.Parse(textBox3.Text);
                this.Hide();

} 
```

所以它起作用了，我能够将三个参数 nrows、dv、dt（用户输入）从对话框传递到 form1-main 表单。

问题：我希望 Form1 中的程序等待，显示对话框，接受用户输入并返回并继续执行此部分。

```
 for (int nc = insertc1; nc <= insertc2; nc++)
                    {
                    insertData(nc, insertr1, dialognrows, dialogdv, dialogdt, null);

                    }} 
```

该对话框应显示然后返回到 form1 以执行插入数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:54:12.877

你实际上已经说过你需要什么。称呼

`form2.ShowDialog()`

这是一个“阻塞”调用，因此`Form1`代码将等到用户关闭`Form2`并且您可以从中读取值之后。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:55:35.393

那么Form2应该是一个弹出窗口吗？

在这种情况下，当你创建它时，打开它

```
MyForm2.ShowDialog(); 
```

这将使对话框“模态”，这意味着用户将无法与第一个表单交互，直到他们处理了这个新表单。然后，如果您在表格 2 中有公共属性，您应该能够在表格 1 中访问它们。

# sql - 想缩短查询的运行时间

> ID：10047861
> 
> 赞同：0
> 
> 时间：2012-04-06T18:49:59.133
> 
> 标签：sql, plsql, oracle11g

我有一个查询将被放入一个过程中，它将创建一个 id 报告。我的查询的`WHERE`子句（不是内部视图中的子句）是长时间运行的原因。这个查询需要大约`twelve minutes`，我想知道你们是否有任何缩短运行时间的技巧。或者，即使`balance = 0`在过程的 pl/sql 代码中，而不是在查询中，也可以不显示记录/行。

```
SELECT x.arp_person_id AS student_id,
   xf_ar_charges(x.arp_person_id, '2008FL') as charges,
   xf_ar_pymts(x.arp_person_id,'2008FL') as payment,
   (xf_ar_charges(x.arp_person_id, '2008FL') 
                                    - (xf_ar_pymts(x.arp_person_id,'2008FL')) AS balance
  FROM (select distinct arp_person_id 
          from ar_payments
          WHERE arp_fa_transmittal IS NOT NULL
   AND ('N' = 'N' OR arp_date BETWEEN TO_DATE('11/01/2008','MM/DD/YYYY')
   AND TO_DATE('12/31/2008','MM/DD/YYYY')) 
   AND ('Y' = 'N' OR arp_term IN ('2008FL', 'N')) ) x 
  WHERE (xf_ar_charges(x.arp_person_id, '2008FL') 
                                         - (xf_ar_pymts(x.arp_person_id,'2008FL')) != 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T19:06:14.023

假设您是正确的，并且大部分时间都花在执行这两个函数上`xf_ar_charges`，并且`xf_ar_pymts`（请注意，这是造成性能问题的外部子句暗示的逻辑含义`WHERE`）这两种最有可能的方法提高性能的方法是优化这些过程背后的代码，或者将逻辑移出这些过程并将其嵌入到 SQL 语句本身中。在不了解您的数据和代码的情况下，很难建议其中哪些更有可能提高性能或如何优化功能（当然，任何人都无法确认它确实是`WHERE`导致性能问题的 外部子句）。

# android - Signed app not working on phone

> ID：10047866
> 
> 赞同：0
> 
> 时间：2012-04-06T18:50:36.670
> 
> 标签：android, eclipse, signing

I used eclipse export wizard to sign my apk file. But when i try to install it on phone it says "application not installed". I uninstalled the unsigned apk from the phone before installing the signed one. My jdk is 6.0.29 .What am i doing wrong?

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:50:55.670

我收到了您描述的错误，但前提是设备已经安装了应用程序并且使用不同的密钥签名。当您从 Eclipse 安装时，它会在安装前自动为您的 apk 签名，但密钥与使用导出向导时使用的密钥不同。

您的安装可能失败的更多原因：

*   如果手机上没有足够的存储空间，尽管我认为应该有更多用户友好的错误
*   如果您不允许安装来自未知来源的应用程序。[这](http://www.makeuseof.com/tag/download-install-nonmarket-google-android-mobile-apps/)是您如何做到这一点的图片描述。

如果其他建议对您没有帮助，也请考虑查看[此线程。](https://stackoverflow.com/questions/4226132/application-not-installed-error-on-android)

# r - 在地图上绘制插值数据

> ID：10047870
> 
> 赞同：24
> 
> 时间：2012-04-06T18:50:51.943
> 
> 标签：r, maps, ggplot2, automap, spatial-interpolation

我有在美国切萨皮克湾不同地点采集的物种丰富度调查数据，我想以图形方式将数据呈现为“热图”。

我有一个纬度/经度坐标和丰富度值的数据框，我将其转换为 a`SpatialPointsDataFrame`并使用`autoKrige()`automap 包中的函数生成插值。

首先，任何人都可以评论我是否正确实现了该`autoKrige()`功能？

其次，我无法绘制数据并覆盖该地区的地图。或者，我可以指定插值网格以反映海湾的边界（如此处建议[）](https://stackoverflow.com/questions/8563334/average-values-of-a-point-dataset-to-a-grid-dataset)？关于我如何做到这一点以及我可以从哪里获得这些信息的任何想法？提供网格`autoKrige()`看起来很容易。

* * *

编辑：感谢保罗的超级有用的帖子！这就是我现在所拥有的。无法让 ggplot 同时接受插值数据和地图投影：

```
require(rgdal)
require(automap)
#Generate lat/long coordinates and richness data
set.seed(6)
df=data.frame(
  lat=sample(seq(36.9,39.3,by=0.01),100,rep=T),
  long=sample(seq(-76.5,-76,by=0.01),100,rep=T),
  fd=runif(10,0,10))
initial.df=df

#Convert dataframe into SpatialPointsDataFrame
coordinates(df)=~long+lat

#Project latlong coordinates onto an ellipse
proj4string(df)="+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"
#+proj = the type of projection (lat/long)
#+ellps and +datum = the irregularity in the ellipse represented by planet earth

#Transform the projection into Euclidean distances
project_df=spTransform(df, CRS("+proj=merc +zone=18s +ellps=WGS84 +datum=WGS84")) #projInfo(type="proj")

#Perform the interpolation using kriging
kr=autoKrige(fd~1,project_df)
#Extract the output and convert to dataframe for easy plotting with ggplot2
kr.output=as.data.frame(kr$krige_output)
#Plot the output
#Load the map data for the Chesapeake Bay
cb=data.frame(map("state",xlim=range(initial.df$long),ylim=range(initial.df$lat),plot=F)[c("x","y")])

ggplot()+
  geom_tile(data=kr.output,aes(x=x1,y=x2,fill=var1.pred))+  
  geom_path(data=cb,aes(x=x,y=y))+
  coord_map(projection="mercator") 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-07T22:18:41.723

我对你的帖子有一些评论：

# 使用克里金法

我看到您正在使用地统计学来构建热图。您还可以考虑其他插值技术，例如样条曲线（例如，字段包中的薄板样条曲线）。这些对数据的假设更少（例如平稳性），并且还可以很好地可视化您的数据。如果您将其发送到期刊，那么减少假设数量可能会有所帮助，这样您就无需向审稿人解释了。如果需要，您还可以比较一些插值技术，请参阅[我写的报告](http://www.numbertheory.nl/files/report_evap.pdf)以获取一些提示。

# 数据投影

我看到您正在使用经纬度坐标进行克里金法。Edzer Pebesma（作者`gstat`）[评论说，](http://r-sig-geo.2731867.n2.nabble.com/Great-Circle-distances-in-Automap-Gstat-td6863940.html)没有适合经纬度坐标的变异函数模型。这是因为在纬度中，距离不是直线（即[欧几里得](http://en.wikipedia.org/wiki/Euclidean_distance)），而是在一个球体上（即[大圆距离](http://en.wikipedia.org/wiki/Great-circle_distance)）。没有对球坐标有效的协方差函数（或变异函数模型）。我建议在使用 automap 之前`spTransform`从包中投影它们。`rgdal`

rgdal 包使用[proj4 投影库](http://trac.osgeo.org/proj/)来执行计算。要投影您的数据，您首先需要定义其投影：

```
proj4string(df) = "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs" 
```

上面表达式右侧的 proj4 字符串定义了投影的类型 ( `+proj`)、使用的省略号 ( `+ellps`) 和基准 ( `+datum`)。要理解这些术语的含义，您必须将地球想象成一个土豆。地球不是完美的球形，这是由椭圆定义的。地球也不是一个完美的椭球体，但表面更不规则。这种不规则性由基准定义。另请参阅[Wikipedia 上的这篇文章](http://en.wikipedia.org/wiki/Map_projection)。

定义投影后，您可以使用`spTransform`：

```
project_df = spTransform(df, CRS("+proj= etcetc")) 
```

其中 CRS("+proj etc") 定义目标投影。哪种投影合适取决于您的地理位置和研究区域的大小。

# 用 ggplot2 绘图

要向 ggplot 添加多边形或折线，请查看`coord_map`. 这包括使用`maps`包绘制国家边界的示例。如果您需要为您的研究区域加载例如 shapefile，您可以使用`rgdal`. 请记住，它`ggplot2`适用于 data.frame，而不是`SpatialPolygons`. 您可以转换`SpatialPolygons`为`data.frame`使用：

```
poly_df = fortify(poly_Spatial) 
```

另请参阅我创建的用于绘制空间网格的[此函数。](https://bitbucket.org/paulhiemstra/paultools/src/ac65b18511f0/plotSpatialGrids.r)它直接在 SpatialGrids/Pixels 上工作。请注意，您需要从该存储库 ( [continuousToDiscrete](https://bitbucket.org/paulhiemstra/paultools/src/ac65b18511f0/continuousToDiscrete.r) ) 中获取一两个附加文件。

# 创建插值网格

当没有指定时，我创建了自动映射以生成输出网格。这是通过在数据点周围创建一个凸包并在其中采样 5000 个点来完成的。预测区域的边界以及在其中采样的点数（以及分辨率）是相当随意的。对于特定应用，预测区域的形状可以从多边形中导出，用于`spsample`对多边形内的点进行采样。要采样的点数以及分辨率取决于两件事：

*   您拥有的数据类型，例如，如果您的数据非常平滑，那么与这种平滑度相比，将分辨率提高得非常高并没有多大意义。或者，如果您的数据有许多小规模结构，则需要高分辨率。当然，这只有在您有支持这种高分辨率的观察结果时才有可能。
*   数据的密度。如果您的数据更密集，您可以提高分辨率。

如果您将插值地图用于后续分析，则获得正确的分辨率很重要。如果您将地图纯粹用于可视化目的，那么这一点就不那么重要了。但是请注意，在这两种情况下，过高的分辨率都可能会误导您的预测准确性，而过低的分辨率不会对数据产生公正的影响。

# silverlight - ExpanderView，自定义非扩展标头（Windows Phone）

> ID：10047876
> 
> 赞同：2
> 
> 时间：2012-04-06T18:51:24.717
> 
> 标签：silverlight, windows-phone-7, datatemplate, silverlight-toolkit

我正在尝试使用 Silverlight 工具包控件 (ExpanderView)。要编辑扩展查看器的标题，我使用 ExpanderTemplate，如下所示：

```
<toolkit:ExpanderView.ExpanderTemplate>
  <DataTemplate>
    <StackPanel Orientation="Horizontal" Margin="0,10">
      <Image Source="Images/List.png" Width="30" VerticalAlignment="Center" />
      <TextBlock Margin="30,0,0,0" FontSize="25" FontWeight="Bold"
                 Foreground="#00A7D4" Text="Elite Plan" 
                 VerticalAlignment="Center" 
                 FontFamily="/DU;component/Fonts/Fonts.zip#Co Headline Light"  />
    </StackPanel>
  </DataTemplate>
</toolkit:ExpanderView.ExpanderTemplate> 
```

这个模板是一样的，控件是否展开。

项目展开后，我需要更改模板（更改文本颜色、更改图像等）

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-14T13:08:13.937

是的，您可以通过创建自定义属性来做到这一点

*在 MainPage.xaml*

```
<toolkit:ExpanderView.ExpanderTemplate>
  <DataTemplate>
    <StackPanel Orientation="Horizontal" Margin="0,10">
      <Image Name="imgExpander"  Width="50" Height="50" Margin="20,0,0,0">
        <Image.Source>
          <BitmapImage UriSource="{Binding Path=ImageUrl,Mode=TwoWay}" />
        </Image.Source>
      </Image>
      <TextBlock Margin="30,0,0,0" FontSize="25" FontWeight="Bold"
                 Foreground="#00A7D4" Text="Elite Plan" 
                 VerticalAlignment="Center" 
                 FontFamily="/DU;component/Fonts/Fonts.zip#Co Headline Light" />
    </StackPanel>
  </DataTemplate>
</toolkit:ExpanderView.ExpanderTemplate> 
```

*在 MainPage.xaml.cs*

```
public MainPage() {
    InitializeComponent();
    List<CustomPizza> customPizzas = new List<CustomPizza>() {
        new CustomPizza() {
            Name = "Custom Pizza 1",
            DateAdded = new DateTime(2010, 7, 8),
            ImageUrl=new Uri("Images/Right-Arrow.jpg", UriKind.Relative),
            Options = new List<PizzaOption> {
                new PizzaOption() { Name = "Ham" },
                new PizzaOption() { Name = "Mushrooms" },
                new PizzaOption() { Name = "Tomatoes" }
            }
        }
    };
}

private void expandes_click(object sender, RoutedEventArgs e) {
    customPizza.IsExpanded = true;
    customPizza.ImageUrl = new Uri("Images/Down-Arrow.jpg", UriKind.Relative);
}

public class CustomPizza : INotifyPropertyChanged
{
    public string Name { get; set; }
    public DateTime DateAdded { get; set; }
    public IList<PizzaOption> Options { get; set; }
    public bool HasNoOptions {
        get {
            return this.Options == null || this.Options.Count == 0;
        }
    }

    private bool isExpanded;
    public bool IsExpanded {
        get { return this.isExpanded; }
        set {
            if (this.isExpanded != value) {
                this.isExpanded = value;
                this.OnPropertyChanged("IsExpanded");
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    protected void OnPropertyChanged(string propertyName) {
        PropertyChangedEventHandler handler = this.PropertyChanged;
        if (handler != null) {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    private Uri imageUrl;
    public Uri ImageUrl {
        get { return imageUrl; }
        set {
            if (imageUrl != value) {
                imageUrl = value;
                OnPropertyChanged("ImageUrl");
            }
        }
    }
}

public class PizzaOption
{
    public string Name { get; set;}
} 
```

# vb6 - 在 VB6 中，是否有验证事件的自动生成代码？

> ID：10047877
> 
> 赞同：4
> 
> 时间：2012-04-06T18:51:34.640
> 
> 标签：vb6

在 VB6 中，文本框的 CausesValidation 属性默认设置为 True。在这种情况下，当验证事件触发时是否还有一些自动生成的验证代码？我想这种自动生成的代码至少会检查该字段是否为非空。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T19:11:04.537

要回答您的问题，没有与 TextBox Validation 事件关联的自动生成的验证代码。您必须自己编写，您可以在其中检查 TextBox 的 Text 属性等的内容。

您可能会发现以下内容很有用：

[CausesValidation 属性和 Validate 事件 - Visual Basic 6 TextBox 控件](http://visualbasic.freetutes.com/learn-vb6/8.3.causevalidation-property-validate-event.html)

如果您想知道如何验证 TextBox 是否为“非空”，则可以使用链接中的以下验证事件示例：

```
Private Sub txtRequired_Validate(Cancel As Boolean)
    ' Check that field is not empty.
    If txtRequired.Text = "" Then 
        MsgBox "Please enter something here", vbExclamation
        Cancel = True
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T19:08:46.767

它只是意味着当您离开该字段时它将调用验证函数。您仍然需要编写验证。检查此示例：[http ://www.techrepublic.com/article/automate-data-validation-in-vb6-with-causesvalidation-and-validate/5904942](http://www.techrepublic.com/article/automate-data-validation-in-vb6-with-causesvalidation-and-validate/5904942)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T19:09:40.590

不，没有。

`CausesValidation`控制是否`Validate`为控件触发事件。如果它被触发，但您的代码中没有定义处理程序，则不会发生任何事情并且验证成功。

# footer - 水平重复页脚背景图像以填充浏览器窗口

> ID：10047880
> 
> 赞同：0
> 
> 时间：2012-04-06T18:51:42.037
> 
> 标签：footer

我绞尽脑汁想弄清楚这一点。我认为这会很容易:) 我只是希望页脚扩展我的浏览器窗口的宽度，而页脚环绕包含 960 像素内的内容，但由于某种原因它只能填充到 960 像素。这是我的代码：

```
footer {
background: url(images/footerbkg.jpg) repeat-x bottom center;
width: 100%;
height: 1232px; 
```

}

```
footer section.wrap {
width: 960px;
margin: 60px auto 0;
position: relative;
float: left; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:50:08.827

许多网站的页脚都包含在一个整体包装器中。确保您已将页脚 div（或页脚标记，如果您使用 HTML5）放置在包装器之外。如果是，100% 宽度应该填满屏幕。

# mysql - 统计满足查询的项目

> ID：10047885
> 
> 赞同：0
> 
> 时间：2012-04-06T18:51:57.870
> 
> 标签：mysql, sql, select, having

假设我有

```
SELECT * FROM table t
GROUP BY j
HAVING condition_one OR condition_two OR condition_three 
```

如何修改查询，使其返回满足有子句中三个不同条件的行数的 COUNT

所以理想情况下，输出应该是这样的：

```
condition_one: 100
condition_two: 200
condition_three: 300 
```

其中有 100 个项目满足 condition_one，200 个满足 condition_two 等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T18:55:52.610

```
SELECT
  SUM(IF(condition_one,1,0)) AS condition_one,
  SUM(IF(condition_two,1,0)) AS condition_two,
  SUM(IF(condition_three,1,0)) AS condition_three
FROM (
  SELECT * FROM t
  GROUP BY j
) AS baseview 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T19:36:19.307

如果您使用`having`子句，您实际上会丢失这些记录。所以你不能使用`having`子句。除此之外，如果你使用`OR`s，那么你不会有哪个条件导致`true`.

因此，您应该使用包含所有分组值的派生表。完成后，查询该表以获取每个表的计数。但是，该解决方案将为您提供三列而不是三行。让我们选择一个更容易的：

```
SELECT
    SUM(condition_one) condition_one,
    SUM(condition_two) condition_two,
    SUM(condition_three) condition_three
FROM (
    SELECT * FROM t
    GROUP BY j
) final 
```

请注意，这`condition_one`实际上是一个条件，例如`age = 23`，但 MySQL 中的条件返回`0`for`false`和`1`for，`true`因此您可以实际设置`SUM`条件。

现在，如果你想让它们成行，那就有点复杂了，因为你必须`UNION`独立地处理每个值：

```
SELECT 'condition_one: ' Condition, SUM(condition_one) ConditionCount FROM (
    SELECT * FROM t GROUP BY j
) s1
UNION ALL
SELECT 'condition_two: ', SUM(condition_two) FROM (
    SELECT * FROM t GROUP BY j
) s2
UNION ALL
SELECT 'condition_three: ', SUM(condition_three) FROM (
    SELECT * FROM t GROUP BY j
) s3 
```

或者至少，这是我现在能想到的最好的方式。希望这可以帮助！

# jquery - Jquery script behaving differently when unobtrusive than when inside the rails view

> ID：10047887
> 
> 赞同：1
> 
> 时间：2012-04-06T18:52:00.977
> 
> 标签：jquery, ruby-on-rails, unobtrusive

I have this in my view

```
<script type='text/javascript'>
$(function(){       
    $('#users').click(function(){
        alert($("tr[aria-selected=true] td:first").html())                      
    })
})
</script> 
```

And inside my users.js

```
$(function(){       
    $('#users').click(function(){
        alert($("tr[aria-selected=true] td:first").html())                      
    })
}) 
```

Having them,obviously not at the same time,gives me different results Basically I'm trying to retrieve the ID of the selected row finding it attr value.\

With the unobtrusive way right after loading the page I'd get "null" on my first click on a row and then every time I hit a row shows me the value that I clicked previously...TWICE!. But when keeping the script inside my view I get the result I want.

What am I doing wrong?

EDIT:

My view

```
<%=raw jqgrid("List of users", "users", "/users", 
 [    
   { :field => "id", :label => "id",:width => 50 },    
   { :field => "username", :label => "username",:width => 120,:editable => true },    
   { :field => "email", :label => "email",:width => 120,:editable => true },    
   { :field => "name", :label => "name",:width => 100,:editable => true },    
   { :field => "lastname", :label => "lastname",:width => 100,:editable => true },
   { :field => "groups", :label => "roles",:width => 180}   
 ] , {:add => true,:edit => true,:delete => true,:error_handler => "s",:inline_edit => 'true',:edit_url => post_data_users_url,:sortable_rows => 'true'}  
 ) %>
 <p><%= link_to "Edit roles",roles_path%>
 <%= link_to "| Edit user",{:action => 'edit'},{:class => 'editLink hide'}%></p>

 <script type='text/javascript'>
   $(function(){
       var _last = new String()     
       $('#users').click(function(){
           _last = $("tr[aria-selected=true] td:first").html()
           $(".editLink").attr("href","/users/edit/"+ _last)
           $(".editLink").addClass('show')
       })
   })
</script> 
```

My layout

```
<!DOCTYPE html>
<html>
<head>
  <title>UserManager</title>
  <%= stylesheet_link_tag "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
  <%=jqgrid_javascripts%>
  <%=jqgrid_stylesheets%>
</head>
<body>
    <div>
        <%if flash[:notice]%>
            <p><%= flash[:notice]%></p>
        <%end%>
        <%if current_user%>
            Logged in as <%= current_user.username%> | <%= link_to 'logout', log_out_path%>
        <%end%>
    </div>
    <%= yield %>
 </body>
</html> 
```

The way I see it...nothing special there

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T19:56:29.697

根据您的性能要求，使用 .live('click', function(){}) 而不是 click(function(){})，或者在 users.js 中创建一个函数来进行绑定并使用回调jqgrid 来运行它。

在 users.js 中

```
$(function(){       
    $('#users').live('click', function(){
        alert($("tr[aria-selected=true] td:first").html())                      
    })
}) 
```

或者在 users.js 中：

```
function bindClickToRow(){
   $(function(){       
     $('#users').click(function(){
        alert($("tr[aria-selected=true] td:first").html())                      
     })
   })
 } 
```

然后在 jqgrid 的回调中使用它（我不知道他们的 API 是如何工作的，我无法快速找到，但我很确定一个好的网格插件支持这一点，所以将其视为伪代码）：

```
jQuery('table').jqgrid({
  afterCreate: bindClickToRow
}) 
```

希望这可以帮助。

据我所知，原因是您正在使用“点击”将点击事件绑定到一个函数。但是当实际本身还不存在时，您正在这样做。所以你基本上是在告诉 jQuery，在现在存在的所有 s 上绑定“点击”。

如果你使用 'live' 会发生什么，这相当于告诉 jQuery 将该函数绑定到与你的选择器匹配的所有 current AND future 上的一个 'click' 事件。

尚不存在的原因是因为显然 jqgrid 是在被调用的绑定之后加载的。此外，jqgrid 可能会在调用“click”绑定很久之后定期创建新的 s。如果你使用'live'，jQuery 会留意所有新的，并在它们创建后立即将回调函数绑定到它们。

# ssl - How can I create PFX certificate signed by some CA from scratch?

> ID：10047889
> 
> 赞同：4
> 
> 时间：2012-04-06T18:52:16.623
> 
> 标签：ssl, openssl, pfx, pkcs#12

I want to generate certificate for my domain locally and then sign it, for example, by getaCert.com service. But I get an error at the end.

Below are steps:

*   Create config for OpenSSL openssl.cnf based on [http://www.dylanbeattie.net/docs/openssl.conf](http://www.dylanbeattie.net/docs/openssl.conf)

*   Create private key my.key and certificate request my.csr

    openssl req -new -nodes -keyout my.key -out my.csr -newkey rsa:2048 -config openssl.cnf

*   Submit my.csr to [http://www.getacert.com/signacert.html](http://www.getacert.com/signacert.html) and download signed public certificate my.cer and CA certificate getacert.cer

*   Try create PFX

    openssl pkcs12 -export -in my.cer -inkey my.key -out gd.p12 -certfile getacert.cer

Error occurs: No certificate matches private key

Why? And what am I doing wrong?

Here are similar question but without any reasonable answer

[using OpenSSL to create .pfx file](https://stackoverflow.com/questions/2868989/using-openssl-to-create-pfx-file)

[Is it possible to convert an SSL certificate from a .key file to a .pfx?](https://stackoverflow.com/questions/553149/is-it-possible-to-convert-an-ssl-certificate-from-a-key-file-to-a-pfx)

# jquery - How to Prevent Chrome fetching the last 128 bytes of an MP3 file

> ID：10047890
> 
> 赞同：23
> 
> 时间：2012-04-06T18:52:20.723
> 
> 标签：jquery, google-chrome, html5-audio, jplayer, last.fm

I am having a problem with this for a while now, so I thought I'd ask for your help.

For a proof of concept project, I created a [HTML 5 only last.fm player](https://github.com/tburny/html5-lastfm-player) using [jPlayer](http://jplayer.org "jPlayer 2.0") . It works fine with Firefox, but does not play using the html solution when using Chrome(Chromium).

First, Chrome tries to fetch the mp3 file via the stream url. After it has pre-buffered a bit, it **always** tries to read the last 128 bytes by making another HTTP request. The problem now is that the last.fm streaming servers only seem allow one connection per file at a time, which causes both http connections to fail. It seems Chrome/Chromium is ignoring the preload="none" property of the audio tag. As far as I could find out the tag is only a recommendation to the browser.

Normal mp3 files work like a charm. Also, when entering the redirected streaming url in the browser, it starts playing. It seems last.fm is using the original urls as kind of one-time access token/access control filter, whereas the resolved stream url is valid for a while.

For the full HTTP headers (cookies censored), see [http://pastebin.com/rBAdL4X8](http://pastebin.com/rBAdL4X8). (Copied from Chromium element inspector).

Is there any way to circumvent this problem from within the browser?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T12:59:19.297

目前似乎没有解决方法，但从 neoascetic 指出的错误报告的评论 11 中，它可能会在 Chrome 的下一个版本 - M20 中得到解决。

# matlab - Changing black pixels to be transparent in matlab

> ID：10047892
> 
> 赞同：1
> 
> 时间：2012-04-06T18:52:26.137
> 
> 标签：matlab, background, pixel, transparent

First, I'm new to matlab, so thanks in advance for any help.

I have a .png image that I have overlayed onto another image. How can I make only the black pixels on the .png image transparent? I have looked around and no one seems to specifically address this question clearly. I was trying to use either the 'BackgroundColor' function or alphadata.

thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T21:40:27.100

使用来自 File Exchange 的[EXPORT_FIG提交。](http://www.mathworks.com/matlabcentral/fileexchange/23629)

我相信它支持 PNG 文件的背景颜色透明度。

# java - Red5 RTMPClient playback sample starts to drop messages if full stream played

> ID：10047898
> 
> 赞同：3
> 
> 时间：2012-04-06T18:52:42.583
> 
> 标签：java, streaming, red5, playback, rtmp

Client below is intended to run over oflaDemo application, running on red5 on localhost. It contains Avatar movie promo.

The problem is that client reads 15 seconds of movie and hangs. Why?

To compile program below, just download red5 from here [http://wiki.red5.org/wiki/1_0_RC1](http://wiki.red5.org/wiki/1_0_RC1), install it and run it. Open root page [http://localhost:5080](http://localhost:5080) and navigate to demos installation page. Install `oflaDemo` sample. Then navigate to oflaDemo page and check it is working.

Then create new Java project with all jars from red5 as a library. Run it with running red5\.

Client communicates with server via port 1935.

The structure of app follows:

1) `connect()` method connects to application

2) `connectCallback` on result of previous operation new stream is created; library function is not used to inject custom stream class

3) `createStreamCallback` it is injecting on result of stream creation

4) custom stream is `MyClientStream`; it just prints what was dispatched

On my machine I it works up to the timestamp 15203 and hangs.

```
public class SSCCE_RTMPPlayer extends RTMPClient{

private String server = "localhost";
private int port = 1935;
private String application = "oflaDemo";
private String filename = "avatar.flv";

private static boolean finished = false;

public static void main(String[] args) throws InterruptedException {

    final SSCCE_RTMPPlayer player = new SSCCE_RTMPPlayer ();
    player.connect();

    synchronized( SSCCE_RTMPPlayer.class ) {
        if( !finished ) SSCCE_RTMPPlayer.class.wait();
    }

    System.out.println("Ended");
}

public void connect() {
    connect(server, port, application, connectCallback);

    setExceptionHandler(new ClientExceptionHandler() {

        @Override
        public void handleException(Throwable throwable) {
            throwable.printStackTrace();
        }
    });
}

private IPendingServiceCallback connectCallback = new IPendingServiceCallback() {
    @Override
    public void resultReceived(IPendingServiceCall call) {
        System.out.println("connectCallback");
        invoke("createStream", null, createStreamCallback);
    }
};

private IPendingServiceCallback createStreamCallback = new IPendingServiceCallback() {
    @Override
    public void resultReceived(IPendingServiceCall call) {
        Integer streamIdInteger = (Integer) call.getResult();
        MyClientStream myClientStream = new MyClientStream();
        myClientStream.setStreamId(streamIdInteger.intValue());
        myClientStream.setConnection(conn);
        conn.addClientStream(myClientStream);

        play(streamIdInteger.intValue(), filename, 0, -2);
    }
};

protected void onInvoke(RTMPConnection conn, Channel channel, Header header, Notify notify, RTMP rtmp) {
    super.onInvoke(conn, channel, header, notify, rtmp);
    System.out.println("onInvoke, header = " + header.toString());
    System.out.println("onInvoke, notify = " + notify.toString());
    System.out.println("onInvoke, rtmp = " + rtmp.toString());

};

public static class MyClientStream extends AbstractClientStream implements IEventDispatcher {

    @Override
    public void start() {
        // TODO Auto-generated method stub

    }

    @Override
    public void stop() {
        // TODO Auto-generated method stub

    }

    @Override
    public void close() {
        // TODO Auto-generated method stub

    }

    @Override
    public void dispatchEvent(IEvent event) {
        System.out.println("AudioListenerClientStream.dispachEvent()" + event.toString());
    }

}

} 
```

**UPDATE 1**

The version with conventional `setStreamEventDispatcher()` behaves in the same way.

```
public class SSCCE_RTMPPlayer2 extends RTMPClient {

private String server = "localhost";
private int port = 1935;
private String application = "oflaDemo";
private String filename = "avatar.flv";

private static boolean finished = false;

public static void main(String[] args) throws InterruptedException {

    final SSCCE_RTMPPlayer2 player = new SSCCE_RTMPPlayer2();
    player.connect();

    synchronized( SSCCE_RTMPPlayer.class ) {
        if( !finished ) SSCCE_RTMPPlayer.class.wait();
    }

    System.out.println("Ended");
}

public void connect() {

    setExceptionHandler(new ClientExceptionHandler() {

        @Override
        public void handleException(Throwable throwable) {
            throwable.printStackTrace();
        }
    });

    setStreamEventDispatcher(streamEventDispatcher);

    connect(server, port, application, connectCallback);

}

private IEventDispatcher streamEventDispatcher = new IEventDispatcher() {

    @Override
    public void dispatchEvent(IEvent event) {
        System.out.println("AudioListenerClientStream.dispachEvent()" + event.toString());
    }
};

private IPendingServiceCallback connectCallback = new IPendingServiceCallback() {
    @Override
    public void resultReceived(IPendingServiceCall call) {
        System.out.println("connectCallback");
        createStream(createStreamCallback);
    }
};

private IPendingServiceCallback createStreamCallback = new IPendingServiceCallback() {
    @Override
    public void resultReceived(IPendingServiceCall call) {
        Integer streamIdInteger = (Integer) call.getResult();
        play(streamIdInteger.intValue(), filename, 0, -2);
    }
};

protected void onInvoke(RTMPConnection conn, Channel channel, Header header, Notify notify, RTMP rtmp) {
    super.onInvoke(conn, channel, header, notify, rtmp);

    System.out.println("onInvoke, header = " + header.toString());
    System.out.println("onInvoke, notify = " + notify.toString());
    System.out.println("onInvoke, rtmp = " + rtmp.toString());

    /*
    ObjectMap<String, String> map = (ObjectMap) notify.getCall().getArguments()[0];
    String code = map.get("code");
    if (StatusCodes.NS_PLAY_STOP.equals(code)) {

        synchronized( SSCCE_RTMPPlayer.class ) {
            finished = true;
            SSCCE_RTMPPlayer.class.notifyAll();
        }

        disconnect();
        System.out.println("Disconnected");
    }
    */
};

} 
```

**UPDATE 2**

I found that packets start to drop after the hang occurs. The drop method is `RTMPProtocolEncoder#dropMessage()`

**UPDATE 3**

I see that 'tardiness` is increasing at realtime rate. When it exceeds value of 8000, dropping starts.

**UPDATE 4**

More precisely, at the server side the process is starting to drop packets approximately after 8 seconds passed. This is probably the value of 8000 which is tolerance time. At the same moment the packet timestamp is reaching approx 15-16 seconds. Client is playing until this time and stops only then.

So the picture it that server outruns client 2 times and when it reaches some limit, it does not wait but starting to drop packets.

It looks like that correct behaviour would wait until client reaches timestamp and continue....

**UPDATE 5**

Probably Client Stream class does not intended to listen stream from server and so does not contain appropriate synchronization logic?

**MAGIC SOLUTION**

While observing the differences in the log while playing stream with oflaDemo client and my application, I found that standard client reports buffer size of 5000 ms while my client does not. I don't understand how this can play, but when I added RTMP ping to my application, it starts to work. The magic line follows

```
conn.ping(new Ping(Ping.CLIENT_BUFFER, streamId, 5000)); 
```

Since it's role is just to shift tardiness by it's value, I suppose that overall problem is due to red5 bug, which makes it unable to calculate tardiness correctly.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T17:18:43.630

某些文件的视频流存在问题，导致播放停止。但我已经在服务器中修复了它；使用修订版 4329 或更高版本。供您参考的问题在这里：[http ://code.google.com/p/red5/issues/detail?id=200](http://code.google.com/p/red5/issues/detail?id=200)

# installshield - InstallShield 2012：连接到 Oracle 数据库的正确方法是什么

> ID：10047900
> 
> 赞同：0
> 
> 时间：2012-04-06T18:52:52.517
> 
> 标签：installshield

我有一个需要连接到 Oracle 数据库的 InstallScript MSI 项目。

我配置了一个 tnsnames.ora 文件并安装了 Oracle 客户端。以下代码来自 OnSQLLogin 函数：

```
SQLRTInitialize2();
...
nResult = SQLServerSelectLogin2( szConnection, szServer, szUser, szPassword, bWinLogin, szDB, TRUE, TRUE );
if (nResult = NEXT) then
    SQLRTPutConnectionInfor2(szConnection, szServer, szDB, szUser, szPassword );
    SQLRTPutConnectionAuthentication (szConnection, bWinLogin);
    nResult = SQLRTTestConnection2(szConnection, szServer, szDB, szUser, szPassword, bWinLogin);
    ...
endif; 
```

按下 next 后显示的错误消息是这样的：

```
Error 27502\. Could not connect to Oracle '192.168.10.150'. 
[Microsoft][ODBC driver for Oracle]
[Oracle]ORA=12504: TNS:listener was not given the SERVICE_NAME in CONNECT_DATA(12504) 
```

szServer = IP 地址 szDB 设置为 tnsnames.ora 中的 SERVICE_NAME

我还需要做什么才能让 IS 与 Oracle 合作？

一个例子会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T16:42:55.300

它总是简单的事情。原来，当文件被保存时，它被命名为 tnsnames.ora.ora

更改为 tnsnames.ora 并按照用户指南中的说明进行操作，一切正常。

# emacs - Common Lisp has a some function. How can I write some or any in elisp?

> ID：10047901
> 
> 赞同：2
> 
> 时间：2012-04-06T18:52:54.540
> 
> 标签：emacs, map, elisp

An `any` function would evaluate a function (or predicate) on elements of a sequence, returning true if the predicate returns true for any element of the sequence. Therefore

```
(any `stringp `(42 t "yes" nil)) 
```

..would return non-nil, and

```
(any `stringp `(42 t nil 89)) 
```

...would return nil.

I think there is a `some` function in the CL module, but I don't want to use that.

It's easy to write a naive implementation using mapc:

```
(defun my-any (predicate sequence)
  "Return true if PREDICATE is true of any element of SEQUENCE.
If so, return the first non-nil value returned by PREDICATE.
"
  (let (result)
    (mapc '(lambda (elt)
             (or result
                 (setq result (funcall predicate elt))))
          sequence)
    result)) 
```

But can anyone provide optimizations or improvements on this? Is there a faster or cleaner or more idiomatic elisp way to do this? In particular what is the best way to stop mapping through the sequence when the first one fires? I could "unroll" mapc, but is that the best way?

I think I could use a `catch` but that may actually cost more than it saves.

tips?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T22:10:46.303

```
(defun any (pred list)
  (while (and list (not (funcall pred (car list))))
    (pop list))
  (car list)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T21:30:02.063

至少，当谓词为真时，您可以提前终止。像下面的东西。

```
 (defun my-any (predicate sequence)
  "Return true if PREDICATE is true of any element of SEQUENCE.
If so, return the first non-nil value returned by PREDICATE.
"
  (catch 'looking
    (mapc '(lambda (elt)
             (if (funcall predicate elt) (throw 'looking t)))
          sequence)
    nil)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T19:47:24.907

您可能可以使用`find-if`，描述于[http://www.cs.cmu.edu/Groups/AI/html/cltl/clm/node145.html](http://www.cs.cmu.edu/Groups/AI/html/cltl/clm/node145.html)

听起来它正是你想要的

```
(find-if 'stringp '(a "yes"))
"yes"
(find-if 'stringp '(a b))
nil 
```

# javascript - 一次删除多个 Div 元素——JavaScript

> ID：10047904
> 
> 赞同：1
> 
> 时间：2012-04-06T18:53:06.233
> 
> 标签：javascript, html, removechild

我没有找到任何关于我遇到的奇怪问题的问题。基本上我已经设置了一个用于输入用户电话号码和分机的表单。我制作了一个添加按钮，以便可以在表单中添加更多电话/分机。我已经在表单和 SQL 代码中添加了正常工作。问题是删除表单和 SQL 代码。您可以在代码中看到每个新条目都有自己的“删除”链接，其中包含该特定条目的 DIV 信息。它进入一个“删除”功能，将其取出。它适用于表单，但它对 SQL 代码没有任何作用。我为 SQL 代码创建了类似的东西，所以我有一个可以删除它的函数。只是为了测试我输入了与表单相同的“删除”href，如果我单击 SQL 部分的链接，它会删除它。所以我试图找到一种方法来单击表单部分上的“删除”链接，并让它取出该特定表单和相应的 SQL 代码。我玩弄了尝试从 DIV 表单中获取与 SQL 部分的 DIV 名称匹配的名称的想法，但我似乎无法让它工作。

```
 ////
    //-------------Add Phone Form----------------
    ////

    function addElement() { 

    var ni = document.getElementById('phoneDiv'); 
    var numi = document.getElementById('theValue'); 
    var num = (document.getElementById('theValue').value -1 + 2); 
    numi.value = num; 
    var newdiv = document.createElement('div'); 
    var divIdName = 'phoneDiv'+num+''; 
    var sqlDivIdName = 'SQL'+divIdName+'';
    newdiv.setAttribute('id',divIdName); 
    newdiv.innerHTML = '<input type=hidden id=' + num + ' name='+sqlDivIdName+' value='        + num + '><a href="javascript:remove('+divIdName+')">Remove</a> <tr><td>Phone Number:</td>  <td> <input type="text" name="phone' + num + '" maxlength="10"> </td></tr> <tr>  <td>Extension:</td><td> <input type="text" name="ext' + num +'" maxlength="5" value="00000">'; 
    ni.appendChild(newdiv); 

    javascript:addElement2(); 
    } 

    ////
    //-------------Add Phone SQL----------------
    ////

    function addElement2() {

var ni = document.getElementById('SQLphoneDiv'); 
    var numi = document.getElementById('theValue2'); 
    var num = (document.getElementById('theValue2').value -1 + 2); 
    numi.value = num; 
    var newdiv = document.createElement('div'); 
    var divIdName = 'SQLphoneDiv'+num+''; 
    newdiv.setAttribute('id',divIdName); 
    newdiv.innerHTML = '<input type=hidden id=' +num+ ' value=' +num+ '><a         href="javascript:removeSQL('+divIdName+')">Remove</a> $insert_phone = "INSERT INTO phone (Phone_Cust_ID,Phone_Numb,Ext) VALUES (\'$cust_ID[0]\',\'".$_POST[\'phone' +num+ '\']."\',\'".$_POST[\'ext' +num+ '\']."\')"; $add_phone = mysql_query($insert_phone);'; 
    ni.appendChild(newdiv); 
    }

    ////
    //-------------Remove Phone Form----------------
    ////

    function remove(xy) {
    var ni = document.getElementById('phoneDiv'); 

    ni.removeChild(xy);

    }

    ////
    //-------------Remove Phone SQL----------------
    ////

    function removeSQL(yz) {
    var ni = document.getElementById('SQLphoneDiv'); 
    ni.removeChild(yz);

    } 
```

我尝试只使用一个删除函数而不是两个，或者让第一个删除函数触发第二个，但我认为问题是我无法获取关于我的孩子的 SQL 部分的 +divName+ 信息我试图删除。

我对 JavaScript 很陌生，所以我确信 jQuery 有一个非常简单的方法可以做到这一点，但是 jQuery 现在让我感到困惑，因为我仍然试图单独掌握 JavaScript 中的大部分概念。感谢我能得到的任何提示。

另外，我知道 SQL 并不真正正确，但我现在并不担心。一旦我让这个功能工作，我就可以清理一切。

弥敦道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T19:08:59.937

`addElement`您可以通过在函数中执行以下操作将 SQLphoneDiv 元素 id 存储在 phoneDiv 元素中

```
newdiv.sqlDivId = sqlDivIdName 
```

然后在你的`remove`功能做

```
var sqlDiv = document.getElementById(xy.sqlDivId);
var sqlNi = document.getElementById('SQLphoneDiv');
sqlNi.removeChild(sqlDiv); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T19:22:27.847

我知道您正在寻找一个纯 JavaScript 解决方案，但是我想我会发布一个 jQuery 解决方案仅供参考。无论如何，当使用 jQuery 时，最好将函数加载到文档就绪函数中......就像这样......

```
$(document).ready(function(){

}); 
```

这基本上就是它所读的。在运行该函数之前，它会等待文档完全加载。

从那里你可以做一个像这样的点击功能......

**示例 HTML**

```
<a href="" id="mylink">My Link</a> 
```

**jQuery**

```
 $('#mylink').click(function(){

    }); 
```

然后删除您可以使用的链接`.remove()`......所以所有这些看起来像这样......

```
$(document).ready(function(){

$('#mylink').click(function(){
   $('#mylink').remove();
});

}); 
```

要使用一键删除多个 IDS，您可以这样做...

```
$('#mylink, #mylink2, #mydiv').remove(); 
```

我怀疑这是您正在寻找的答案。但是，当您决定开始使用 jQuery 时，您将学会爱上需要多少代码来完成需要大量代码的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T19:24:16.717

这么久了，不想看了。您想通过 id 删除元素吗？这个功能可以工作。

```
function removeById(id) {
    var toremoved = document.getElementbyId(id);
    toremoved.parentNode.removeChild(toremoved);
} 
```

# php - MySql 查询从好友表中获取好友列表

> ID：10047906
> 
> 赞同：1
> 
> 时间：2012-04-06T18:53:20.490
> 
> 标签：php, mysql

我有一个名为 Friends 的表，其结构如下：

```
id, from_id, to_id, confirmed, .... 
```

此表包含所有用户的所有好友列表。from_id 和 to_id 包含用户的 id，其中 from_id 是实际发送好友请求的用户。

现在，我需要选择一个特定用户的所有好友列表。

最好使用以下查询或联合查询：

```
"select (from_id + to_id)- $user_id as friend_id, ... from friends where from_id=$user_id or to_id=$user_id" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:56:05.423

我会使用一个`union`（确保你有索引`from_id`和`to_id`）：

```
select from_id from friends where to_id = $user_id
union
select to_id from friends where from_id = $user_id 
```

在我看来，这种方式更清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T18:56:40.653

假设您在 id 上有键，则联合肯定会更好，然后执行算术运算。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T19:19:30.923

虽然我喜欢你的数学风扇解决方案，但我认为它没有考虑溢出问题。例如：如果将两个非常大的数字相加会发生什么？

除此之外，您的解决方案依赖于数字 user_id。使用联合可能需要更多时间（您应该测试以确保），但适用于任何数据类型。

# css - UL 和浮动 DIV：列表文本换行但背景颜色不换行

> ID：10047910
> 
> 赞同：2
> 
> 时间：2012-04-06T18:53:33.230
> 
> 标签：css, css-float, html-lists, background-color

`DIV`在浮动和列表方面需要帮助。A`DIV`浮动到页面的右侧，而列表条目围绕它流动。问题在于，在将背景颜色应用于列表的 LI 元素时，颜色会拉伸全宽，而文本会在到达 DIV 时换行。如何在将 LI 的显示保持为块的同时使 LI 的背景颜色像文本一样环绕？

这是示例代码：

```
<html>
<style>
  .mydiv {
    height: 200px;
    width: 200px;
    background-color: red;
    margin-right: 45px;
    float: right;
    clear: right;
  }

  li {
    background-color: cyan;
  }
</style>

<body>

  <div class="mydiv"></div>

  <ul>
    <li>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure
      dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</li>
  </ul>
</body>

</html>
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T19:00:18.707

尝试`display: inline;`如下

```
li
{
    background-color:cyan;
    display: inline;
} 
```

编辑：

另一种方式，假设您可以向您的 UL 添加一个固定的

```
ul
{
    width: 700px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T00:57:05.687

如何在你的 ul 标签上应用边距

试试这个css，也许它会把你带到你想去的地方。div 不是浮动的，所以你需要决定你是否真的需要它。

```
<style>
    .mydiv
    {
    height:200px;
    width:200px;
    background-color:red;
    margin-left:45px;
    position: absolute;
    right: 0px;
    }
    li
    {
    background-color:cyan;
    }
   ul{
    margin-right: 200px;
    }
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T23:56:32.283

如果将 CSS 更改为：

```
li {
    background-color:cyan;
    margin-right:45px;
} 
```

然后`<li>`将在结束的地方`<div class="mydiv">`结束。您甚至可以将其设置为`margin-right:245px;`，这将导致`<li>`结束于左边缘。

# ios - 如何发出 https 请求并加密 POST 参数？

> ID：10047913
> 
> 赞同：0
> 
> 时间：2012-04-06T18:53:51.347
> 
> 标签：ios, api, rest, ios5, https

我开发了一个通过 RESTful API 连接到我的 Web 服务的移动应用程序。

现在，我需要通过 WireShark 嗅探我的 API 来保护我的 API。我只需要以某种方式隐藏我的 URL 和 POSTed 参数...我该怎么做？

我的风险是，如果“某人”获取我的 API 的 Url 并更改每个请求的 ?user_id 参数可能会充当另一个用户，并做坏事......

（我不使用 Oauth 2.0）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T19:04:38.653

第一步是切换到 HTTPS。这将加密您的 POST 参数。

您的第二步是修复您的协议以对用户进行身份验证。总是可以对您的协议进行逆向工程。如果唯一的身份验证是 user_id 参数，那么您很容易受到攻击。再多的混淆也无法保护您。您的协议必须能够抵御未经授权的应用程序的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T19:06:16.517

最简单的方法是使用 HTTPS

客户端连接到服务器

客户端和服务器执行 SSL 握手客户端发送加密的东西，如

```
POST /resource/ HTTP1.1 

Name=Jonathan+Doe&Age=23&Formula=a+%2B+b+%3D%3D+13%25%21 
```

# java - GWT - DialogBox glass 和 GoogleChrome - glass 不会重绘

> ID：10047915
> 
> 赞同：1
> 
> 时间：2012-04-06T18:53:58.230
> 
> 标签：java, gwt, google-chrome

我刚刚安装了最新的谷歌浏览器，并试图用 DialogBox 测试 GWT 2.3 代码；出于某种原因，选项 like`setGlassEnabled(true);`以一种奇怪的方式工作:(

如果 chrome 的滚动窗格**（y 位置为 0）**，则玻璃被正确绘制

但如果 chrome 的滚动窗格**（y 位置 > 0）**，则玻璃保持在 0 位置，因此 chrome 的其余底部不会被玻璃覆盖:(

我要向我的构造函数展示第一个玻璃选项

```
...
public MyDIalog() {

        this.setGlassEnabled(true);
        this.setAnimationEnabled(true);
        this.setModal(true);
        this.setPreviewingAllNativeEvents(true);
... 
```

我不太确定是什么导致了这个错误或什么，因为代码在 IE 和 FF 中运行良好：S

所以我猜在镀铬中，玻璃位置总是静态的或其他东西，它的位置总是

> x,y{0,0} w,h{firstInitedWidth,firstInitedHeight}

所以我的问题是 chrome 有没有四处走走？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T16:14:05.200

解决了：

创建您自己的扩展 PopupPanel 的类并添加：

```
 @Override
    public void setGlassEnabled(boolean enabled) {
        super.setGlassEnabled(enabled);
        Element glass = getGlassElement();
        if (glass != null) {
            glass.getStyle().setPosition(Position.FIXED);
        }
    } 
```

这只是将玻璃面板的位置设置为固定而不是绝对。这使得面板不会随着滚动而移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T19:49:35.610

奇怪....但我想最坏的情况是你可以在 CSS 中给玻璃样式一些疯狂的高度/宽度。

```
.gwt-PopupPanelGlass{
    height:15000 px;
    width:15000 px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-31T22:37:39.023

作为替代方案，无需设置宽度和高度，您始终可以将 CSS 属性设置为固定（使用 !important 指令）

```
.gwt-PopupPanelGlass {
    position:fixed!important;
} 
```

# jakarta-ee - 如何为 Play 2.0 Framework 设置全局环境变量？

> ID：10047922
> 
> 赞同：1
> 
> 时间：2012-04-06T18:54:16.893
> 
> 标签：jakarta-ee, playframework, environment-variables

在 Windows 7 操作系统上，我正在尝试设置 Play 2.0 框架。

如何为 Play 2.0 设置全局环境变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T14:37:26.847

我不认为 Play 2.0 强加一个变量名。我建议使用经典约定“PLAY2_HOME”，指向您的播放安装目录。为了从任何控制台位置使用 Play，您还必须更新 PATH 变量（添加 %PLAY2_HOME%）

# gwt - GWT RequestFactory 认证函数

> ID：10047925
> 
> 赞同：1
> 
> 时间：2012-04-06T18:54:28.913
> 
> 标签：gwt, authentication, requestfactory

我在一个需要身份验证的新项目上使用 GWT 和 RequestFactory。

添加登录和注销功能的最佳位置在哪里？在 UserRequestContext 中？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T00:32:14.427

使用 servlet 过滤器。

我将 RequestFactory 调用分成两个流——一个用于未经身份验证的调用，另一个用于经过身份验证的调用。这是我的一块`web.xml`。

```
<servlet>
    <servlet-name>CustomRequestFactoryServlet</servlet-name>
    <servlet-class>my.server.CustomRequestFactoryServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>CustomRequestFactoryServlet</servlet-name>
    <url-pattern>/gwtRequest</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>CustomRequestFactoryServlet</servlet-name>
    <url-pattern>/gwtRequestAuth</url-pattern>
</servlet-mapping> 
```

然后我创建了如下所示的 servlet 过滤器：

```
public class GaeAuthFilter implements Filter
{
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException
    {
        UserService userService = UserServiceFactory.getUserService();
        HttpServletRequest request = (HttpServletRequest) servletRequest;
        HttpServletResponse response = (HttpServletResponse) servletResponse;

        if (!userService.isUserLoggedIn())
        {
            String returnURI = "/";

            String requestURI = request.getRequestURI();
            String refererURI = request.getHeader("Referer");
            if (requestURI.equals("/gwtRequestAuth"))
            {
                if (refererURI != null)
                    returnURI = refererURI;
            } else
                returnURI = requestURI;

            response.setHeader("login", userService.createLoginURL(returnURI));
            response.sendError(HttpServletResponse.SC_UNAUTHORIZED);
            return;
        }

        LoginService.login(request);

        filterChain.doFilter(request, response);
    }
} 
```

如您所见，我将`login`带有 URL 的 http-header 设置为 auth 网页。

在客户端代码中，我通过实现我自己的[DefaultRequestTransport](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/web/bindery/requestfactory/gwt/client/DefaultRequestTransport.html)来拦截它，如下所示：

```
public class GaeAuthRequestTransport extends DefaultRequestTransport
{
    private final EventBus eventBus;

    public GaeAuthRequestTransport(EventBus eventBus)
    {
        this.eventBus = eventBus;
    }

    @Override
    protected RequestCallback createRequestCallback(final TransportReceiver receiver)
    {
        final RequestCallback superCallback = super.createRequestCallback(receiver);

        return new RequestCallback()
        {
            public void onResponseReceived(Request request, Response response)
            {
                if (Response.SC_UNAUTHORIZED == response.getStatusCode())
                {
                    String loginUrl = response.getHeader("login");
                    if (loginUrl != null)
                    {
                        receiver.onTransportFailure(new ServerFailure(
                                "Unauthenticated user", null, null, false /* not fatal */));
                        eventBus.fireEvent(new GaeAuthenticationFailureEvent(loginUrl));
                        return;
                    }
                }
                superCallback.onResponseReceived(request, response);
            }

            public void onError(Request request, Throwable exception)
            {
                superCallback.onError(request, exception);
            }
        };
    }
} 
```

触发的事件在将浏览器导航到登录 URL 的客户端代码中处理。

就是这样。

# knockout.js - 提交对结果数据源的更改后刷新淘汰模型

> ID：10047928
> 
> 赞同：0
> 
> 时间：2012-04-06T18:54:39.443
> 
> 标签：knockout.js, asp.net-mvc-4, upshot

我按照 MVC4 SPA 演练示例创建了一个简单的应用程序，在其中我下拉了 10 个主题的列表，让用户将它们标记为安全或不良，然后保存更改。现在，当用户保存更改时，我想重新加载包含接下来要处理的 10 个主题的列表。我该怎么做？

这是我的视图数据模型：

```
function TopicsViewModel() {
    // Data
    var self = this;
    self.dataSource = upshot.dataSources.UnsafeTopics.refresh();
    self.topics = self.dataSource.getEntities();

    // Operations
    self.saveAll = function () {
        self.dataSource.commitChanges();
    }
    self.revertAll = function () {
        self.dataSource.revertChanges();
    }
} 
```

看法：

```
@(Html.UpshotContext(bufferChanges: true).DataSource<TopicDataController>(x => x.GetUnsafeTopics()))

<button id="saveAll" data-bind="click: saveAll">Commit changes</button>

<ul data-bind="foreach: topics">
    <li data-bind="css: { updated: IsUpdated }">
        <strong class="topicItem" data-bind="text: TopicName"></strong> 
        <label><input class="bad" type="checkbox" data-bind="checked: IsBad" /> is bad</label>
        <label><input class="safe" type="checkbox" data-bind="checked: IsSafe"/> is safe</label>
    </li>
</ul>

<script src="~/Scripts/App/TopicsViewModel.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function () {
        ko.applyBindings(new TopicsViewModel());
    });

</script> 
```

控制器：

```
public class TopicDataController : DbDataController<SocialViewEntities>
    {
        public IQueryable<Topic> GetUnsafeTopics()
        {
            return DbContext.Topics.Where<Topic>(t => t.IsBad == false).Where<Topic>(t => t.IsSafe == false).Take<Topic>(10);
        }

        public void UpdateTopic(Topic topic) { UpdateEntity(topic); }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T02:09:56.643

基本上你想要做的是分页。坏消息是，显然最新版本的 Upshot (1.0.0.2) 没有名为 PagingModel 的对象，[BigShelf](http://code.msdn.microsoft.com/ASPNET-Single-Page-d6d7172c)示例使用该对象进行分页。

好消息是您可以尝试下载该示例并提取位于**upshot.knockout.extensions.js**文件中的 PagingModel 代码（包含在上述下载中），看看它是否适用于最新版本的 upshot (1.0.0.2 ）。我会自己尝试这样做，并为您提供任何结果。

* * *

**更新：** 我一直在深入挖掘，发现 PagingModel 对象确实适用于 1.0.0.2 并且在您的情况下使用它可能是一个好主意，因为它可以简化一切（为您提供可以绑定到的功能下一页，转到最后一页等）

但是 PagingModel 并不是真正需要的，因为您需要进行分页（跳过和获取功能）的所有内容都已经在 dataSource 对象中。这是一个示例，说明如何在没有 PagingModel 的情况下执行此操作。

首先，添加一个 currentPage 可观察对象：

```
self.currentPage = ko.observable(); 
```

其次，初始化时不要刷新你的数据源，而是设置分页参数，使你的DB中的**不是**每个主题都被获取，*然后*刷新数据源。每当 currentPage 属性更改时都会执行此操作：

```
self.currentPage.subscribe( function() {
  this.dataSource.setPaging({ 
    skip: (this.currentPage() - 1) * 10,
    take: 10, includeTotalCount: true });
    this.dataSource.refresh();
}).bind(self);

// Trigger the refresh
self.currentPage(1); 
```

然后，将 viewModel 的 saveAll 函数更改为以下内容，以触发刷新到下一页。

```
// Operations
self.saveAll = function () {
    self.dataSource.commitChanges();
    self.currentPage(self.currentPage() + 1);
} 
```

**请记住：**从 dataSource 初始化行中删除 refresh() ！

希望能帮助到你！

# javascript - 检查网站根目录中的 cookie

> ID：10047933
> 
> 赞同：0
> 
> 时间：2012-04-06T18:55:00.940
> 
> 标签：javascript, php, cookies

您好，我目前有此代码检查 cookie 是否存在，在您转到子页面之前，它工作得非常好，因为网站的标题部分对所有页面都是通用的。

我目前正在使用此代码来检查 cookie -

```
if(! isset( $_COOKIE['AVS'] ) )
        {
            header('Location: http://www.mydomain.com/splash/');
        } 
```

这就是我设置cookie的方式

```
<script type="text/javascript">
            function createCookie() {
                var name = "AVS";
                var value = "AVL";
                var expires = 24*60*60*1000;
                document.cookie = name+"="+value+expires+"; path=/";
            }
</script> 
```

即使浏览器关闭，我实际上在设置 cookie 后将 cookie 保留 24 小时也有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T19:00:07.533

这取决于您如何设置 cookie。

查看[setcookie的路径和域参数](http://php.net/manual/en/function.setcookie.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T19:13:09.497

我想通了，我完全使用 PHP 而不是任何 javascript，它似乎可以工作..这是我使用的代码。

```
 if(! isset( $_COOKIE['AVS'] ) )
    {
        $value = 'AVL';
        setcookie("AVS", $value, time()+43200);
        header('Location: http://www.mydomain.com/splash/');
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T16:24:37.797

如果您想在 JavaScript 中创建和检查 cookie，那么我可以帮助您解决一些我在 3-4 个月前编写的代码。

如果你想要这个，那么你去这里

在 HTML 页面中获取一个按钮并在其 onclick 函数上调用 JavaScript 函数“checkCookie()”。

```
<input type="button" value="Click Me" onclick="checkCookie()" /> 
```

现在转到 head 部分并在那里定义 checkCookie() 方法。

```
function checkCookie() {
        var username = getCookie("username");
        if (username != null && username != "") {
            alert("Welcome again " + username);
        }
        else {
            username = prompt("Please enter your name:", "");
            if (username != null && username != "") {
                setCookie("username", username, 365);
            }
        }
    } 
```

现在，如果您的浏览器已将您在文本框中输入的名称保存在 cookie 中，那么上述方法将向您显示“再次欢迎您输入的名称”的警报。

让我们定义 getCookie() 方法。

```
function getCookie(c_name) {
    var c_value = document.cookie;
    var c_start = c_value.indexOf(" " + c_name + "=");
    if (c_start == -1) {
        c_start = c_value.indexOf(c_name + "=");
    }
    if (c_start == -1) {
        c_value = null;
    }
    else {
        c_start = c_value.indexOf("=", c_start) + 1;
        var c_end = c_value.indexOf(";", c_start);
        if (c_end == -1) {
            c_end = c_value.length;
        }
        c_value = unescape(c_value.substring(c_start, c_end));
    }
    return c_value;
} 
```

现在定义 setCookie() 方法。

```
function setCookie(c_name, value, exdays) {
    var exdate = new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value = escape(value) + ((exdays == null) ? "" : "; expires=" 
                                      + exdate.toUTCString());
    document.cookie = c_name + "=" + c_value;
} 
```

对于整个提示，您可以访问我在这里写的文章，[在 Javascript 中检查和创建 Cookie](http://www.tapankumar.in/2013/08/create-cookie-in-javascript.html)

# javascript - 我可以使用 SheepIt JQuery 插件拥有多个级别的嵌套克隆表单吗？

> ID：10047937
> 
> 赞同：2
> 
> 时间：2012-04-06T18:55:13.027
> 
> 标签：javascript, jquery, forms, jquery-plugins

我尝试使用 SheepIt 在另一个嵌套表单中创建一个嵌套表单，但无济于事！插入。这甚至可能吗？

在 SheepIt 上扩展[Demo 7 ！](http://www.mdelrosso.com/sheepit/index.php?lng=en_GB&sec=demo7)网站，我尝试在[JSFiddle中添加一个额外的嵌套表单](http://jsfiddle.net/YWZ8K/1/)

但我得到一个 indexOf 错误......

删除以下部分以消除错误但破坏预期的功能：[JSFiddle](http://jsfiddle.net/YWZ8K/)

```
,
         nestedForms: [
        {
                id: 'person_addresses_#index#_phones_#index_phones#_tests',
                    options: {
                indexFormat: '#index_tests#'
            }
        }
         ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T21:44:39.730

这是[JSFiddle 解决方案](http://jsfiddle.net/njB5t/)

看来，SheepIt！插件只喜欢在nestedForm ID 中看到一个索引。它给了我 indexOf 错误，因为它击中了第一个#index#。您仍然可以在输入中使用多个索引，它会按预期填写它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-15T11:17:02.933

在“那个”声明之后将此行添加到函数 normalizeFieldsForForm

```
var nameTemplateAttr = that[0]['name']; 
```

# c# - 指示 XmlWriterSettings 使用自闭合标记

> ID：10047939
> 
> 赞同：10
> 
> 时间：2012-04-06T18:55:20.470
> 
> 标签：c#, xml, xmlwriter

我正在使用 XmlWriterSettings 将 Xml 写入文件。我的元素只有属性，没有子元素。我希望他们输出为：

```
<element a="1" /> 
```

代替

```
<element a="1"></element> 
```

我可以用 XmlWriterSettings 来做吗？

编辑：

代码如下：

```
private void Mission_Save(string fileName)
    {
        StreamWriter streamWriter = new StreamWriter(fileName, false);
        streamWriter.Write(Mission_ToXml());
        streamWriter.Close();
        streamWriter.Dispose();

        _MissionFilePath = fileName;
    }

private string Mission_ToXml()
    {
        XmlDocument xDoc;
        XmlElement root;
        XmlAttribute xAtt;

        xDoc = new XmlDocument();

        foreach (string item in _MissionCommentsBefore)
            xDoc.AppendChild(xDoc.CreateComment(item));

        root = xDoc.CreateElement("mission_data");
        xAtt = xDoc.CreateAttribute("version");
        xAtt.Value = "1.61";
        root.Attributes.Append(xAtt); 
        xDoc.AppendChild(root);

        //Out the xml's!
        foreach (TreeNode node in _FM_tve_Mission.Nodes)
            Mission_ToXml_private_RecursivelyOut(root, xDoc, node);

        foreach (string item in _MissionCommentsAfter)
            xDoc.AppendChild(xDoc.CreateComment(item));

        //Make this look good
        StringBuilder sb = new StringBuilder();
        XmlWriterSettings settings = new XmlWriterSettings();

        settings.Indent = true;
        settings.IndentChars = "  ";
        settings.NewLineChars = "\r\n";
        settings.NewLineHandling = NewLineHandling.Replace;
        settings.OmitXmlDeclaration = true;
        using (XmlWriter writer = XmlWriter.Create(sb, settings))
        {
            xDoc.Save(writer);
        }

        return sb.ToString();
    }

private void Mission_ToXml_private_RecursivelyOut(XmlNode root, XmlDocument xDoc, TreeNode tNode)
    {
        root.AppendChild(((MissionNode)tNode.Tag).ToXml(xDoc));
        foreach (TreeNode node in tNode.Nodes)
            Mission_ToXml_private_RecursivelyOut(root, xDoc, node);
    } 
```

这里_FM_tve_Mission是一个TreeView控件，它有节点，每个节点都有一个MissionNode类的标签，它有ToXml方法返回包含这个MissionNode转换为xml的XmlNode

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-06T19:02:38.540

您不需要任何特殊设置：

```
XmlWriter output = XmlWriter.Create(filepath);
 output.writeStartElement("element");
 output.writeAttributeString("a", "1");
 output.writeEndElement(); 
```

这会给你一个输出`<element a="1" />`（刚刚在我正在为其编写 xml 的应用程序中对其进行了测试）

基本上，如果您在编写结束元素之前不添加任何数据，它只会为您关闭它。

我还有以下内容`XmlWriterSettings`，如果默认情况下不工作，它可能是其中之一：

```
XmlWriterSettings wSettings = new XmlWriterSettings();
wSettings.Indent = true;
wSettings.ConformanceLevel = ConformanceLevel.Fragment;
wSettings.OmitXmlDeclaration = true;
XmlWriter output = XmlWriter.Create(filePathXml, wSettings); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-09T11:25:17.500

从外部文件处理 XML，我编写了以下类来摆脱非空封闭元素。我的 XML 现在有自结束标记。

```
using System.Linq;
using System.Xml.Linq;

namespace XmlBeautifier
{
    public class XmlBeautifier
    {
        public static string BeautifyXml(string outerXml)
        {
            var _elementOriginalXml = XElement.Parse(outerXml);
            var _beautifiedXml = CloneElement(_elementOriginalXml);
            return _beautifiedXml.ToString();
        }

        public static XElement CloneElement(XElement element)
        {
            // http://blogs.msdn.com/b/ericwhite/archive/2009/07/08/empty-elements-and-self-closing-tags.aspx
            return new XElement(element.Name,
                element.Attributes(),
                element.Nodes().Select(n =>
                {
                    XElement e = n as XElement;
                    if (e != null)
                        return CloneElement(e);
                    return n;
                })
            );
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-27T09:39:43.523

使用正则表达式和递归方法，这很容易：

```
 using System.Xml.Linq;
    public static class Xml
    {
        /// <summary>
        /// Recursive method to shorten all xml end tags starting from a given element, and running through all sub elements 
        /// </summary>
        /// <param name="elem">Starting point element</param>
        public static void ToShortEndTags(this XElement elem)
        {
            if (elem == null) return;

            if (elem.HasElements)
            {
                foreach (var item in elem.Elements()) ToShortEndTags(item);
                return;
            }

            var reduced = Regex.Replace(elem.ToString(), ">[\\s\\n\\r]*</\\w+>", "/>");

            elem.ReplaceWith(XElement.Parse(reduced));
        }
    } 
```

要使用它，请输入以下内容：

```
 var path = @"C:\SomeFile.xml";
    var xdoc = XDocument.Load(path).Root.ToShortEndTags(); 
```

`xdoc`现在是`XDocument`从给定路径加载的实例，但其所有合格（无内容）的**完整结束标签**现在都已**缩短**

# c# - 在 LINQ 中选择计数

> ID：10047942
> 
> 赞同：5
> 
> 时间：2012-04-06T18:55:45.363
> 
> 标签：c#, .net, linq, count

我有一个带有列的 SQL Server 表`ResolvedDate`和`ResolvedBy`.

现在我想选择这两列并计算它们的结果，我想我会这样实现：

```
_dataContext.Activities
    .Where(a => a.IsResolved && a.ResolvedBy == userId)
    .Select(a => new { a.ResolvedDate, ***COUNT*** }); 
```

如您所见，缺少 Count-Part。

我想得到在这个 ResolvedDate 中完成的每一个活动并计算它。

我该如何实施？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-06T18:58:29.257

```
from a in dataContext.Activities
where a.IsResolved && a.ResolvedBy == userId
group a by a.ResolvedDate into g
select new {ResolvedOn=g.Key, NumberResolved= g.Count()} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-06T18:58:41.497

如果您尝试按日期计算每个项目，则需要使用`GroupBy`：

```
var countsByDate = _dateContext.Activities
                           .Where(a => a.IsResolved && a.ResolvedBy == userId)
                           .GroupBy(a => a.ResolvedDate)
                           .Select(g => new {ResolvedDate = g.Key, Count = g.Count() }); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-06T18:59:57.060

您必须按 ResolvedDate 对数据进行分组，以获取每天解决的活动数量。

```
var dates = from a in dataContext.Activities
            where a.IsResolved && a.ResolvedBy == userId
            group a by a.ResolvedDate into g
            select new { Date = g.Key, Count = g.Count() } 
```

要按天分组（不包括小时、分钟等），您可以更改 group 语句：

```
var dates = from a in dataContext.Activities
            where a.IsResolved && a.ResolvedBy == userId
            group a by a.ResolvedDate.Date into g
            select new { Date = g.Key, Count = g.Count() } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-06T18:57:16.717

```
var dates = dataContext.Activities
    .Where(a => a.IsResolved && a.ResolvedBy == userId)
    .Select(a => a.ResolvedDate)
    .ToList();

var count = dates.Count; 
```

如果您只想获取计数，则可以通过单独选择计数来使其更快：

```
var count = dataContext.Activities
    .Count(a => a.IsResolved && a.ResolvedBy == userId); 
```

# java - 无法从大型 Berkeley DB 文件中读取数据

> ID：10047947
> 
> 赞同：2
> 
> 时间：2012-04-06T18:55:56.057
> 
> 标签：java, perl, berkeley-db

我正在尝试从大小 > 12 GB 的 Berkeley DB 文件中读取数据，并以键值对的形式写入文本文件。但我不能这样做，因为我的进程在读取 2600 万条记录后停止。我尝试使用 perl/ruby 读取文件，但获取记录的对象似乎只能容纳 2600 万条记录。有什么方法可以拆分 BDB 文件然后读取记录吗？或者如果我能找到一些方法来读取数据块然后处理它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T00:11:17.447

没有看到你的代码，没什么好说的。你在使用[BerkeleyDB](https://metacpan.org/module/BerkeleyDB)模块吗？文件是哈希表的形式吗？你已经用 Perl 和 Java 标记了你的问题；您是否尝试过使用 Java 以及 Perl 和 Ruby 读取文件？

您可能已经使用 Perl 达到了虚拟内存限制，因为与 C 等中的简单字符串相比，散列和标量值的支持数据是巨大的。

我怀疑是否有拆分 Berkely DB 文件的方法，但要求很简单，只需几行 C 即可编写。

如果您需要帮助，请出示您的 Perl 代码，或者用 C 或 Java 重写它。一旦数据作为键/值对存储在文本文件中，Perl 就可以轻松处理它。

* * *

**编辑**

我建议你使用`DB_File`模块提供的原生 Berkely DB API。这将避免将所有数据保存在单个 Perl 哈希中，并且可能会解决您的问题。

此代码可以编译，但仅在最少数据上进行测试，因为我显然无法访问您的数据库文件。

```
use strict;
use warnings;

use DB_File;

my $db = tie my %dbhash, 'DB_File', 'TestId', O_RDONLY, 0644, $DB_BTREE
    or die "Cannot open file 'TestId' :$!\n";

my $file = 0;
my $fh;
my $c = 0;

my ($key, $val);

my $stat = $db->seq($key, $val, R_FIRST);
while ($stat == 0) {

  if (not $fh or $c == 10_000_000) {
    $file++;
    open $fh, '>', "TestId$file.txt" or die $!;
    $c = 0;
  }

  print $fh "$key|$val\n";
  $c++;
}
continue {
  $stat = $db->seq($key, $val, R_NEXT);
}
close $fh or die $!;

undef $db;
untie %dbhash; 
```

* * *

**编辑 2**

如果这种使用方法`DB_File`有同样的问题，那么我建议您尝试使用[BerkeleyDB](https://metacpan.org/module/BerkeleyDB)模块。它是由同一作者编写的，但它的接口似乎与 Perl 的哈希无关。

这是我之前尝试使用替代模块的等效代码。它适用于最小的数据集。如果这也不起作用，那么我建议您给模块的作者 Paul Marquess 写一行

```
use strict;
use warnings;

use BerkeleyDB;

my $db = BerkeleyDB::Btree->new(-Filename => 'TestId')
    or die "Cannot open file 'TestId' :$!\n";

my $cursor = $db->db_cursor;

my $file = 0;
my $fh;
my $c = 0;

my $key = my $val = "";

my $stat = $cursor->c_get($key, $val, DB_FIRST);
while ($stat == 0) {

  if (not $fh or $c == 10_000_000) {
    $file++;
    open $fh, '>', "TestId$file.txt" or die $!;
    $c = 0;
  }

  print $fh "$key|$val\n";
  $c++;
}
continue {
  $stat = $cursor->c_get($key, $val, DB_NEXT);
}

close $fh or die $!; 
```

# magento - Magento - 将隐藏字段添加到联系表

> ID：10047950
> 
> 赞同：0
> 
> 时间：2012-04-06T18:56:16.293
> 
> 标签：magento

我偶尔会收到来自我的 Magento 商店的联系表格的垃圾邮件。我不愿意添加验证码，所以想尝试在表单中添加一个隐藏字段。如果该字段被填写，则不会提交表单（大多数机器人会自动填写所有字段）。

我知道如何添加字段，但是如果字段有值，是否有人知道如何/在哪里添加代码以拒绝表单？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T10:52:05.593

首先，您需要知道联系人表单请求的控制器操作。如果您还不知道，请检查`action`您的参数`<form>`，或使用[Fiddler](http://fiddler2.com)，或使用某些浏览器特定工具（如 Firebug 等）来查找。

接下来，由您自己[覆盖找到的控制器操作。](http://www.catgento.com/how-to-override-a-magento-core-controller/)

最后，在您的覆盖操作中，放置

```
$sMyHiddenField = $this->getRequest()->getParam('my_hidden_field', '');
if ($sMyHiddenField) {
    $this->_forward('noRoute');    // or whatever
} 
```

去抓。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T09:25:08.620

我对人们搜索的小贡献——这种防御称为蜜罐。所以你去。

在 Magento 1.3.2 中，我在我的控制器副本的第 75 行添加了这个`code/local/Mage/Contacts/controllers/IndexController.php`：

```
// check the spam honeypot
if (!empty($post['yummy'])) {
    $error = true;
} 
```

'yummy' 是我添加的隐藏字段`template/contacts/form.phtml`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T19:52:33.003

我不确定您到底要在这里做什么，但也许这会有所帮助。

标准控制器`Mage_Contacts_IndexController`位于此处：**app/code/core/Mage/Contacts/controllers/IndexController.php**

当然，您可能希望将其复制到`local`目录中，或者使用您自己的自定义模块扩展该类。您可以尝试使用此文件的副本。我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-15T10:16:14.197

我认为您可以在主块中创建表单时放置隐藏字段，如下所示：

```
$fieldset->addField('entity_type_id', 'hidden', array(
      'name'               => 'entity_type_id',
      'value'              => 11
)); 
```

在此之后，您可以在 saveAction() 中检查它以检查这些值是否已设置

# c - C: gcc 中的 uint16_t 减法行为

> ID：10047956
> 
> 赞同：3
> 
> 时间：2012-04-06T18:56:54.383
> 
> 标签：c, gcc, unsigned, stdint

我正在尝试减去两个无符号整数并将结果与​​有符号整数（或文字）进行比较。使用`unsigned int`类型时，行为符合预期。使用`uint16_t`(from `stdint.h`) 类型时，行为不是我所期望的。比较是使用 gcc 4.5 完成的。
给定以下代码：

```
unsigned int a;
unsigned int b;

a = 5;
b = 20;

printf("%u\n", (a-b) < 10); 
```

输出为 0，这是我的预期。a 和 b 都是无符号的，并且 b 大于 a，因此结果是一个大于 10 的大无符号数。现在如果我将 a 和 b 更改为 uint16_t：

```
uint16_t a;
uint16_t b;

a = 5;
b = 20;

printf("%u\n", (a-b) < 10); 
```

输出为 1。这是为什么呢？两个 uint16_t 类型之间的减法结果是否存储在 gcc 的 int 中？如果我将输出更改`10`为`10U`0，这似乎支持这一点（如果减法结果存储为 int 并且与 unsigned int 进行比较，则减法结果将转换为 unsigned int）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T18:59:34.813

因为计算不是使用低于 int / unsigned int 的类型（char、short、unsigned short 等；但不是 long、unsigned long 等）进行的，但它们首先被提升为 int 或 unsigned int 之一。“uint16_t”在您的实现中可能是“unsigned short”，在您的实现中提升为“int”。因此，该计算的结果是“-15”，小于 10。

在使用 16 位计算的旧实现中，“int”可能无法表示“unsigned short”的所有值，因为它们具有相同的位宽。这样的实现必须将“unsigned short”提升为“unsigned int”。在此类实现中，您的比较结果为“0”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-07T12:36:00.187

在执行`-`and`<`操作之前，会应用一组称为*通常算术转换*的转换来将操作数转换为通用类型。作为此过程的一部分，将应用*整数提升*，它将类型提升为比这两种类型中的一种更窄`int`或更窄`unsigned int`的类型。

在第一种情况下， 和 的类型`a`是`b`，`unsigned int`因此不会由于`-`运算符而发生类型更改 - 结果是`unsigned int`具有大正值的 an `UINT_MAX - 14`。然后，因为`int`和`unsigned int`具有相同的排名，所以`10`类型为 的值`int`被转换为`unsigned int`，然后执行比较，得到值`0`。

在第二种情况下，很明显，在您的实现中，类型`int`可以保存 type 的所有值`uint16_t`。这意味着当应用整数提升时，`a`和的值`b`被提升为 type `int`。执行减法，得到`-15`type的值`int`。的两个操作数`<`都已经是`int`，因此不执行任何转换；的结果`<`是`1`。

在后一种情况下使用 a`10U`时，结果`a - b`仍然`-15`是 type `int`。然而，现在，通常的算术转换导致这个值被转换为`unsigned int`（就像`10`第一个例子中的那样），这导致值`UINT_MAX - 14`; 的结果`<`是`0`。

# asp.net - 如何在 IIS 中启用 .NET 角色部分？

> ID：10047960
> 
> 赞同：3
> 
> 时间：2012-04-06T18:57:13.857
> 
> 标签：asp.net, iis

我正在观看培训视频，他们正在展示如何使用 IIS 中的 .NET 角色部分添加角色。我在 IIS 7 中没有看到该部分。我猜我需要在某处启用它。如何在 IIS 中显示 .NET 角色？

**更新：**还有 .NET 用户和 .NET 配置文件部分不可见。这些是相关的，所以我认为启用角色的任何东西都会启用其余部分。

![在此处输入图像描述](../Images/4e409f09067cbb957fbbea0832f21ba0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T19:00:33.800

使用 WSAT 工具 - 图标应该在 VS 中的解决方案资源管理器窗口的顶部。

还要在这里检查类似的问题：

[使用 sql server 2008 数据库问题进行表单身份验证](https://stackoverflow.com/questions/9901819/forms-authentication-with-sql-server-2008-database-questions/9901945#9901945)

# php - 在 php 中分页显示 123....7 而不是 1234567？

> ID：10047965
> 
> 赞同：1
> 
> 时间：2012-04-06T18:57:55.733
> 
> 标签：php, pagination

好吧，我有一个班级分页

```
<?php
class Pagination {

  public $current_page;
  public $per_page;
  public $total_count;

  public function __construct($page=1, $per_page=20, $total_count=0){
    $this->current_page = (int)$page;
    $this->per_page = (int)$per_page;
    $this->total_count = (int)$total_count;
  }

  public function offset() {
    return ($this->current_page - 1) * $this->per_page;
  }

  public function total_pages() {
    return ceil($this->total_count/$this->per_page);
    }

  public function previous_page() {
    return $this->current_page - 1;
  }

  public function next_page() {
    return $this->current_page + 1;
  }

    public function has_previous_page() {
        return $this->previous_page() >= 1 ? true : false;
    }

    public function has_next_page() {
        return $this->next_page() <= $this->total_pages() ? true : false;
    }

}

?> 
```

这是我在 index.php 中使用它的方法

```
<?php

$page = !empty($_GET['page']) ? (int)$_GET['page'] : 1;
$per_page = 4;
$total_count = class::count_all();

$pagination = new Pagination($page, $per_page, $total_count);

$sql = "SELECT * FROM tablename ";
$sql .= "LIMIT {$per_page} ";
$sql .= "OFFSET {$pagination -> offset()}";

?>

<?php foreach($variables as $variable):
?>

<?php endforeach;?>

    <?php
    if ($pagination -> total_pages() > 1) {

        if ($pagination -> has_previous_page()) {
            echo "<a href=\"index.php?page=";
            echo $pagination -> previous_page();
            echo "\">&laquo; Previous</a> ";
        }

        for ($i = 1; $i <= $pagination -> total_pages(); $i++) {
            if ($i == $page) {
                echo " <span class=\"selected\">{$i}</span> ";
            } else {
                echo " <a href=\"index.php?page={$i}\">{$i}</a> ";
            }
        }

        if ($pagination -> has_next_page()) {
            echo " <a href=\"index.php?page=";
            echo $pagination -> next_page();
            echo "\">Next &raquo;</a> ";
        }

    }
?> 
```

我的问题是如果有很多页面我希望它输出 1 2 3 ....... 10 而不是 1 2 3 4 5 6 7 8 9 10

在此先感谢，我真的很抱歉让你们所有人都这样烦恼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T19:18:21.537

```
$delta = 1; // +/- 1 page from current
$start = max(1, $page - $delta);
$end = min($pagination -> total_pages(), $page + $delta);

if ($start > 1) {
    // place first page link
    echo " <a href=\"index.php?page=1\">1</a> "; 
    if ($start > 2) {
        // place "..." if $start is not next to "1"
        echo " ... ";
    }
}
for ($i = $start; $i <= $end; $i++) {
    if ($i == $page) {
        echo " <span class=\"selected\">{$i}</span> ";
    } else {
        echo " <a href=\"index.php?page={$i}\">{$i}</a> ";
    }
}
if ($end < $pagination -> total_pages()) {
    if ($end < $pagination -> total_pages() - 1) {
        // place "..." if $end is not prev to "1"
        echo " ... ";
    }
    // place last page link
    echo " <a href=\"index.php?page={$pagination -> total_pages()}\">{$pagination -> total_pages()}</a>"; 
} 
```

这将产生：

```
1 2 3 ... 10 
```

如果有 10 页和“2”作为当前页，以及

```
1 ... 3 4 5 ... 10 
```

在“4”作为当前页面的情况下，等等。

# javascript - 从 Raphael.js 修改对象

> ID：10047971
> 
> 赞同：0
> 
> 时间：2012-04-06T18:58:48.683
> 
> 标签：javascript, dom, raphael

如果我有类似[http://raphaeljs.com/ball.html](http://raphaeljs.com/ball.html)的项目，我如何通过 DOM 修改它，以更改特定实例的颜色？

前任：

```
Raphael.fn.ball = function (x, y, r, hue) {
        hue = hue || 0;
        return this.set(
            this.ellipse(x, y + r - r / 5, r, r / 2).attr({fill: "rhsb(" + hue + ", 1, .25)-hsb(" + hue + ", 1, .25)", stroke: "none", opacity: 0}),
            this.ellipse(x, y, r, r).attr({fill: "r(.5,.9)hsb(" + hue + ", 1, .75)-hsb(" + hue + ", .5, .25)", stroke: "none"}),
            this.ellipse(x, y, r - r / 5, r - r / 20).attr({stroke: "none", fill: "r(.5,.1)#ccc-#ccc", opacity: 0})
        );
    };

function drawBall(div_id, color) {
        var X = Raphael(div_id), x = 100, y = 80, r = 50;
        X.ball(x, y, r, color);
    } 
```

我确实在文档中创建了一个“球”(document.write(active_div, 0.3459912)，现在我想更改颜色。

使用相同的 div 调用 drawBall，只会在 DIV 中创建另一个“球”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T02:49:36.620

尝试

```
var hue = hue;  
X.attr("fill", r(.3,.25) white-" + hue); 
```

您可以使用任何颜色`yellow`或颜色代码，例如`#00CC33`色调。
[演示](http://jsfiddle.net/UKUeE/2/embedded/result/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T02:46:36.657

那这个呢？

```
X.attr("fill", newColor); 
```

`newColor`您要将其颜色更改为的变量的名称在哪里。

# asp.net - 具有 .multiple dot net 框架 (aspnet_regiis.exe) 的 svc (wcf) 的 IIS 7.5 处理程序映射

> ID：10047973
> 
> 赞同：1
> 
> 时间：2012-04-06T18:58:49.667
> 
> 标签：asp.net, wcf, iis, svc

我有一个 2008 服务器，它没有在 IIS 的处理程序映射中列出 svc。我相信运行 aspnet_regiis.exe 会添加这些（按照[4932722](https://stackoverflow.com/questions/4932722/iis-7-not-recognizing-svc-file)。

但是那个 .exe 存在于：

*   “C:\Windows\Microsoft.NET\Framework\v2.0.50727”
*   "C:\Windows\Microsoft.NET\Framework\v3.0"
*   "C:\Windows\Microsoft.NET\Framework\v3.5"
*   "C:\Windows\Microsoft.NET\Framework\v4.0.30319"
*   "C:\Windows\Microsoft.NET\Framework64\v2.0.50727"
*   "C:\Windows\Microsoft.NET\Framework64\v3.0"
*   "C:\Windows\Microsoft.NET\Framework64\v3.5"
*   “C:\Windows\Microsoft.NET\Framework64\v4.0.30319”

我应该选择哪个？（我的猜测是 v4.0 的两个版本）

与此有关...

查看列出了 .svc 的其他几台机器，但......

一点指向：`%SystemRoot%\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll`

其他指向：`%SystemRoot%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll`

您可以为 svc 指向不同框架的多个处理程序映射吗？

谢谢，DF

# c# - 文件上传 - 返回 null

> ID：10047975
> 
> 赞同：0
> 
> 时间：2012-04-06T18:59:04.570
> 
> 标签：c#, javascript, jquery, asp.net, asp.net-mvc

我正在我的 ASP.NET MVC 应用程序中上传一个文件。在 .ascx 文件中，我有以下内容：

```
<form action="/Admin/Mail/ABC" enctype="multipart/form-data"  method="post">
<div>               
    <input type="file" name="file" id="file" />
    <input type="submit" value="Upload" id="UploadList" onclick="Origin.UploadOptOutList();"/>
</div> 
```

在 .js 文件中：

```
Origin.UploadList = function () {
    Origin.ajax({
        url: '/Admin/Mail/Upload',
        type: 'POST',
        dataType: 'json',
        success: function (data) {
            alert('success!');
        }
    });               
} 
```

和控制器：

```
[HttpPost]
public ActionResult Upload(HttpPostedFileBase file)
{
    List<string> validIDs, invalidIDs;
    if (file.ContentLength > 0)
    {
        // do something
    }
} 
```

从 .js 调用 Action 时，“文件”始终为 NULL。知道我缺少什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T19:08:40.963

起初，您不能异步上传文件，除非您使用的是 HTML5。如果你仍然需要这个功能，你可能想试试[jQuery Form plugin](http://malsup.com/jquery/form/)。

其次，在您当前的 js 中，您没有随请求发送任何数据（方法选项`data`中的字段`ajax`），这就是为什么您在服务器端没有收到任何数据的原因。此外，正如我之前提到的，不可能在此请求中插入文件。这里最简单的解决方案是放弃 AJAX，让文件以通常的方式上传：

看法：

```
<form action="/Admin/Mail/Upload" enctype="multipart/form-data"  method="post">
    <div>               
        <input type="file" name="file" id="file" />
        <input type="submit" value="Upload" id="UploadList" />
    </div>
</form> 
```

这里没有js，服务器代码是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T21:43:14.940

这就是你需要的

```
ScriptManager sm = ScriptManager.GetCurrent(Page);
            sm.RegisterPostBackControl(btnEditSubmit);
            Page.Form.Attributes.Add("enctype", "multipart/form-data");
            Page.Form.Attributes.Add("method", "post"); 
```

# c++ - 强制 keydown 事件触发 (Windows)

> ID：10047980
> 
> 赞同：0
> 
> 时间：2012-04-06T18:59:36.937
> 
> 标签：c++, windows, input

我正在创建一个输入系统（使用 Windows 消息系统），我现在想对其进行单元测试。已经创建了一个用于测试的窗口，但我想知道如何以编程方式触发键（和鼠标）事件，以便我可以测试输入系统中的相应标志是否正确设置和取消设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T19:36:19.133

这是目的[`SendInput`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)：

> 合成击键、鼠标动作和按钮点击。

# sql - 获取 SQL 语句返回的列

> ID：10047982
> 
> 赞同：4
> 
> 时间：2012-04-06T18:59:45.380
> 
> 标签：sql, sql-server-2008-r2

有没有办法在不实际执行 SQL 语句的情况下获取 SQL 查询返回的列？

我研究了使用`set showplan_all on`和使用 OutputList 字段，但结果并不是我想要的。我需要以正确的顺序获取列和正确的列名（如果它们有别名）。

我正在使用 SQL Server 2008 R2。

为了澄清，这里是一个可以运行的查询示例：

```
--log that the user has executed a query
insert into execution_log_table
(timestamp
,user_id
,report_id)
values (CURRENT_TIMESTAMP
,1234
,5678)

select *
from (select column1
,column2
from another_table) tbl 
```

在尝试返回列时，我不想在第一个表中插入任何内容。

*注意：这只是一个简单的例子，我有一些 SQL 语句，它们是数百行代码，执行多个 crud 操作。我知道我可以尝试手动解析代码行，但我的问题是针对使用 SQL 服务器解析器来确定最终选择语句中将返回哪些列的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:14:45.663

[`SET FMTONLY ON`](http://msdn.microsoft.com/en-us/library/ms173839.aspx). 它“返回”空结果集，但不应影响任何实际表：

```
set fmtonly on
go
insert into execution_log_table
([timestamp]
,user_id
,report_id)
values (CURRENT_TIMESTAMP
,1234
,5678)

select *
from (select column1
,column2
from another_table) tbl 
```

* * *

顺便说一句，在将相同的连接用于任何其他活动（在自己的批处理中使用）之前，*请记住*将其关闭`SET FMTONLY OFF`，否则您可能会迷惑一段时间。（就像我在尝试创建表来测试您的一批语句时所做的那样，忘记了`CREATE TABLE`s 本身一旦`FMTONLY`打开就会静默失败（带有成功消息））。

* * *

我刚刚注意到此功能似乎已被弃用，并且替换仅允许您检索有关第*一个*结果集的信息。面对复杂的查询*，*这有什么用？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T19:51:59.027

我认为这是不可能的，但你当然可以做类似的事情

```
 select <column list>
    ... blah blah
  where 1=0 
```

为了得到没有任何结果的结果集的形状。

您必须执行查询，但执行时间会很短。

# ravendb - 为什么 LINQ 查询与 Advanced.LuceneQuery 之间的性能差异如此之大？

> ID：10047985
> 
> 赞同：0
> 
> 时间：2012-04-06T19:00:05.300
> 
> 标签：ravendb

我问的原因是我一直在使用强类型版本，但遇到了它不够灵活的问题，所以我切换到了 AdvancedQuery.Luncene，它确实提供了灵活性，但性能有所下降。我在想较低级别的查询引擎会比它的对应部分或至少等效的要快。有人可以对此有所了解吗？

谢谢你，斯蒂芬

```
watch = Stopwatch.StartNew();
        result = s.Query<Product>()
            .Statistics(out stats)
            .Where(x => x.HasPicture == true)
            .ToArray();
watch.Stop(); 
```

执行 HasPicture 查询的时间 == true 975

找到的产品总数：412352

```
watch = Stopwatch.StartNew();
result = s.Advanced.LuceneQuery<Product>("Products_Index")
            .Statistics(out stats)
            .Where("HasPicture:(True)")
            .ToArray()
            ;

watch.Stop(); 
```

使用 Lucene 7065 执行查询所用的时间

找到的产品总数：412352

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:01:45.693

当您偏离标准绩效基准时，选择绩效战。我将从开箱即用的设置开始，收集数据，测量，冲洗并重复。如果观察到不可接受的性能下降，然后根据您的观察采取行动，然后改变一件事，收集数据，测量......所以答案首先是 OOB 设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T02:05:48.067

感谢伊塔马尔。

问题是 Where 子句，当使用 LuceneQuery 时使用 WhereEquals。

```
 result = s.Advanced.LuceneQuery<Product>("Products_Index")
                    .Statistics(out stats)
                    .WhereEquals("HasPicture", true)
                    .ToArray()
                    ; 
```

# jquery - 自定义 JQuery 插件 - 如何获取/维护用户定义的选项？

> ID：10047991
> 
> 赞同：1
> 
> 时间：2012-04-06T19:00:31.277
> 
> 标签：jquery, jquery-plugins

我有一个前段时间写的简单（轻量级） div 滑块，因为我在各种不同的项目中使用它 - 是时候将它包装到自己的插件中了（冒着不再那么轻量级的风险！ ）。

我一直在阅读，并从[http://docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)复制，因为这正在弹出我的插件樱桃，这很有意义（主要是），但有些事情让我望而却步。这是我的插件代码：

```
(function( $ ) {

    //List of callable methods
    var methods = {
        init : function(options) {

            var settings = $.extend({

                optionOne   : 'aaa',
                optionTwo   : 'bbb',
                optionThree : 'ccc',
                optionFour  : 'ddd'

            }, options);        

        },

        error : function(message) {
            alert(message);            
        },        

        showSettings : function() { 
            //This bit... how to show whats in 'settings' defined in init?
        }

    }

    $.fn.ccSlider = function( method ) {

        //Calling methods
        if (methods[method]) {
            //If plugin is called with a recognised method, run that.
            return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
        } else if (typeof method === 'object' || !method) {
            //if plugin is called without a method, run the init() function
            return methods.init.apply( this, arguments );
        } else {
            //Run the error() function to catch all else.
            return methods.error("ccSlider: Method '"+method+"' does not exist!");            
        }
    };

})( jQuery ); 
```

这里的一切都按预期工作，但我无法继续编写我需要的方法，只是因为我不知道如何在 init() 方法之外访问“设置”的内容。

我正在使用“showSettings”作为测试......我将如何编写一个弹出的 showSettings 方法并告诉我指定设置的值（比如 optionTwo）是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T21:10:08.137

你得到了正确的架构，但是方法和设置应该对你的插件都是全局的。

```
(function( $ ) {
   var defaults = {
        optionOne   : 'aaa',
        optionTwo   : 'bbb',
        optionThree : 'ccc',
        optionFour  : 'ddd'
   } //if there are any

   var settings = {}; //you can reach the settings from any where in your plugin now
   //List of callable methods
   var methods = {
      init : function(options) {
         //initialize the settings in your init function and you are good to go
         settings = $.extend({},defaults,options);        
      },

      error : function(message) {
        alert(message);            
      },        

      showSettings : function() { 
        //This bit... how to show whats in 'settings' defined in init?
      }

  }

  //your plugin code here like in your post but now you can use the settings variable      we defined in your plugin
}); 
```

# c - Getcontext() 应用于带有结构的数组元素

> ID：10047993
> 
> 赞同：0
> 
> 时间：2012-04-06T19:00:39.037
> 
> 标签：c, arrays, malloc

```
typedef struct _ut_slot {
   ucontext_t uc;
   ....
}*ut_slot;

static ut_slot*  table;  //array of the structs

void foo (int tab_size){
     table =  malloc ( tab_size *(sizeof (ut_slot))); // memory allocation for array of structs 
     for(i = 0 ; i < tab_size ; i++  ){
        getcontext(&table[i].uc); <--- ?????? 
      }
} 
```

我在“getcontext”字符串中收到错误。如何编写对数组任何元素的引用？以及如何使用“getcontext”命令初始化每个数组元素的“uc”字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T19:10:56.637

getcontext 的手册提出了这样的原型：

```
int getcontext(ucontext_t *ucp); 
```

你确定你传递的是正确的论点吗？;)

如果你真的想要一个结构数组，你必须为每个结构留出一些内存。注意 -> 如何取消引用指针并 & 获取成员结构的地址。它令人困惑，向后看。

抱歉，我的程序没有大括号和标点符号。锚点 C 自动添加它们。

```
#include <stdio.h>
#include <stdlib.h>
#include <ucontext.h>
typedef struct _ut_slot
    ucontext_t uc
    ...
*ut_slot
static ut_slot *table
int main  void
    static ucontext_t uc
    table = malloc  1 * sizeof ut_slot
    table[0] = malloc  sizeof *ut_slot
    getcontext  &table[0]->uc
    free  table[0]
    free  table
    return 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T19:09:48.407

您对它的定义和使用有不一致`ut_slot`的地方：

```
typedef struct _ut_slot {
   ucontext_t uc;
   ....
}*ut_slot; //<--- pointer to struct 
```

你说这`ut_slot`是一个指向结构的指针，然后你声明

> 静态 ut_slot* 表；

所以你有一个指向结构的指针。

您可能只想`ut_slot`成为一个结构，或者`table`成为一个指向结构的指针。

* * *

更准确地说：`table`是指向结构的指针，指向结构`table[i]`的指针也是如此，并且您尝试使用 访问非结构的结构成员`table[i].ut`，这会引发编译错误。

* * *

尝试以下操作：

```
typedef struct _ut_slot {
   ucontext_t uc;
   ....
} ut_slot; //removed "*"

static ut_slot *table; 
```

您的其余代码都可以，不需要更改。

# c# - 创建自动下载器/更新器打开下载的文件时出错

> ID：10047994
> 
> 赞同：0
> 
> 时间：2012-04-06T19:00:46.590
> 
> 标签：c#, webclient, download

我正在使用 c# 并创建一个自动下载器/更新器，用于检查应用程序是否存在，或者应用程序是否需要更新。如果需要下载新版本的应用程序，它会下载它并将其放入 LocalAppData/MyApplication 目录中。

当我尝试执行应用程序时出现错误

```
The volume for a file has been externally altered so that the opened file is no longer valid 
```

我不明白这个错误是从哪里来的。如果我只是用 FTP 复制文件，它们就可以正常工作，无论我把它们放在哪里。但是一旦更新程序运行..我得到那个错误。

我正在使用 C# 并使用 WebClient 下载文件，然后使用 WshShellClass 为应用程序创建快捷方式。

任何见解都会很棒。如果发布我用来下载项目的代码对我有帮助，我也可以这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T16:48:54.873

很酷的问题。

在以下情况下也会发生此类错误：1.在域中加载程序集。2\. 程序集将可执行配置重命名为 .backup 并创建新配置 3\. 程序集被卸载并再次加载

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T19:25:51.577

好的，我发现了问题，WebClient 没有下载 MyApplication.exe.config，因为服务器在尝试 http 下载配置文件时返回 404 未找到配置文件......显然......对不起伙计们

# html - 如何操作非 DOM jQuery 对象

> ID：10047997
> 
> 赞同：1
> 
> 时间：2012-04-06T19:01:06.407
> 
> 标签：html, jquery

我有一个嵌入了 HTML 的文本字符串。它还具有 CR 和/或换行符以及制表符。我通过将其传递给 jQuery 将其转换为 jQuery 对象：

```
var htmlJqueryObj = jQuery(mystring); 
```

现在我想通过 jQuery 选择和操作其中的内容：

```
var modJqueryObj = jQuery("#"+buttonsParentID,htmlJqueryObj).clone().insertAfter(jQuery("#"+buttonsParentID,htmlJqueryObj)); 
```

但是上面只返回所选元素的克隆，而我希望它在这些元素之后插入所选元素的克隆，并返回带有修改内容的原始 jQuery 对象。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T19:18:36.573

[jQuery`end()`](http://api.jquery.com/end/) ftw：

```
var modJqueryObj =
    jQuery("#"+buttonsParentID,htmlJqueryObj)
        .clone()
             .insertAfter(jQuery("#"+buttonsParentID,htmlJqueryObj))
        .end()
    .end(); 
```

# node.js - node.js中如何验证navigator.id.get返回的断言？

> ID：10047999
> 
> 赞同：2
> 
> 时间：2012-04-06T19:01:20.437
> 
> 标签：node.js, post, npm, bigint, browserid

好的，所以我正在尝试验证 browserID 返回的断言以登录用户。为此，我试图使用该`browserid-verifier`软件包。但是我无法安装它。包中有错误，`node-bigint`如下图：

```
npm http GET https://registry.npmjs.org/browserid-verifier
npm http 304 https://registry.npmjs.org/browserid-verifier
npm http GET https://registry.npmjs.org/jwcrypto/0.1.1
npm http GET https://registry.npmjs.org/express/2.5.1
npm http 304 https://registry.npmjs.org/jwcrypto/0.1.1
npm http 304 https://registry.npmjs.org/express/2.5.1
npm http GET https://registry.npmjs.org/mime
npm http GET https://registry.npmjs.org/connect
npm http GET https://registry.npmjs.org/qs
npm http GET https://registry.npmjs.org/mkdirp/0.0.7
npm http GET https://registry.npmjs.org/browserify/1.8.1
npm http GET https://registry.npmjs.org/vows/0.5.13
npm http GET https://registry.npmjs.org/optimist/0.2.6
npm http GET https://github.com/benadida/node-bigint/tarball/2ac68
npm http 304 https://registry.npmjs.org/mime
npm http 304 https://registry.npmjs.org/qs
npm http 304 https://registry.npmjs.org/mkdirp/0.0.7
npm http 304 https://registry.npmjs.org/connect
npm http 304 https://registry.npmjs.org/browserify/1.8.1
npm http 304 https://registry.npmjs.org/vows/0.5.13
npm http GET https://registry.npmjs.org/formidable
npm http 304 https://registry.npmjs.org/optimist/0.2.6
npm http 200 https://github.com/benadida/node-bigint/tarball/2ac68

> bigint@0.3.7 install /home/aaditmshah/struggleforlife/node_modules/browserid-verifier/node_modules/jwcrypto/node_modules/bigint
> node-waf configure build

npm http GET https://registry.npmjs.org/wordwrap
npm http GET https://registry.npmjs.org/eyes
Checking for program g++ or c++          : /usr/bin/g++ 
Checking for program cpp                 : /usr/bin/cpp 
Checking for program ar                  : /usr/bin/ar 
Checking for program ranlib              : /usr/bin/ranlib 
Checking for g++                         : ok  
Checking for node path                   : not found 
Checking for node prefix                 : ok /usr 
'configure' finished successfully (0.022s)
Waf: Entering directory `/home/aaditmshah/struggleforlife/node_modules/browserid-verifier/node_modules/jwcrypto/node_modules/bigint/build'
[1/2] cxx: bigint.cc -> build/Release/bigint_1.o
npm http GET https://registry.npmjs.org/detective
npm http GET https://registry.npmjs.org/deputy
npm http GET https://registry.npmjs.org/resolve
npm http GET https://registry.npmjs.org/nub
npm http GET https://registry.npmjs.org/commondir
npm http GET https://registry.npmjs.org/coffee-script
npm http 304 https://registry.npmjs.org/formidable
../bigint.cc:9:17: fatal error: gmp.h: No such file or directory
compilation terminated.
Waf: Leaving directory `/home/aaditmshah/struggleforlife/node_modules/browserid-verifier/node_modules/jwcrypto/node_modules/bigint/build'
Build failed:  -> task failed (err #1): 
    {task: cxx bigint.cc -> bigint_1.o}
npm ERR! error installing bigint@0.3.7
npm ERR! error installing jwcrypto@0.1.1
npm ERR! error installing browserid-verifier@0.0.4

npm ERR! bigint@0.3.7 install: `node-waf configure build`
npm ERR! `sh "-c" "node-waf configure build"` failed with 1
npm ERR! 
npm ERR! Failed at the bigint@0.3.7 install script.
npm ERR! This is most likely a problem with the bigint package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node-waf configure build
npm ERR! You can get their info via:
npm ERR!     npm owner ls bigint
npm ERR! There is likely additional logging output above.
npm ERR! 
npm ERR! System Linux 3.0.0-17-generic
npm ERR! command "node" "/usr/bin/npm" "install" "browserid-verifier"
npm ERR! cwd /home/aaditmshah/struggleforlife
npm ERR! node -v v0.6.14
npm ERR! npm -v 1.1.4
npm ERR! code ELIFECYCLE
npm ERR! message bigint@0.3.7 install: `node-waf configure build`
npm ERR! message `sh "-c" "node-waf configure build"` failed with 1
npm ERR! errno {}
npm http 304 https://registry.npmjs.org/resolve
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /home/aaditmshah/struggleforlife/npm-debug.log
npm not ok 
```

因此，我尝试编写自己的代码来验证断言。这就是我想出的：

```
var mongoLife = "mongodb://nodejitsu:02a0f2d1cacb5259588ddfdfad59cf49@staff.mongohq.com:10088/nodejitsudb449201704656";

var querystring = require("querystring");
var mongoose = require("mongoose");
var express = require("express");
var https = require("https");
var nowjs = require("now");

mongoose.connect(mongoLife);
var app = express.createServer();
app.use(express.static(__dirname + "/public"));
var everyone = nowjs.initialize(app);

everyone.now.login = function (assertion) {
    var client = this.now;

    var postData = querystring.stringify({
        audience: "http://life.nodejitsu.com/",
        assertion: assertion
    });

    var options = {
        host: "browserid.org",
        path: "/verify",
        method: "POST",
        port: 80,
        headers: {
            "Content-Type": "application/x-www-form-urlencoded",
            "Content-Length": postData.length
        }
    };

    var request = https.request(options, function (response) {
        response.setEncoding("utf8");
        response.on("data", function (responseText) {
            var user = JSON.parse(responseText);
            client.loggedIn(user.status === "okay" ? user.email : null);
        });
    });

    request.write(postData);
    request.end();
};

var Schema = mongoose.Schema;
var ObjectId = Schema.ObjectId;

app.listen(8080); 
```

但是，当用户尝试登录时，我收到以下错误：

```
[Error: 139723080664896:error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol:s23_clnt.c:683:]
Error: 139723080664896:error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol:s23_clnt.c:683:

    at CleartextStream._puller (tls.js:501:24)
    at CleartextStream._pull (tls.js:432:19)
    at SecurePair.cycle (tls.js:727:20)
    at EncryptedStream.write (tls.js:130:13)
    at Socket.ondata (stream.js:38:26)
    at Socket.emit (events.js:67:17)
    at TCP.onread (net.js:367:14)
{ [Error: socket hang up] code: 'ECONNRESET' }
Error: socket hang up
    at createHangUpError (http.js:1107:15)
    at CleartextStream.<anonymous> (http.js:1210:27)
    at CleartextStream.emit (events.js:88:20)
    at Array.0 (tls.js:792:22)
    at EventEmitter._tickCallback (node.js:192:40) 
```

任何帮助将不胜感激。我要做的就是创建一个 HTTP POST 请求`https://browserid.org/`，传递断言和观众，并检查返回状态。我想确切地知道我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T22:17:25.647

我发现出了什么问题。在我的选项中，我将端口设置为 80。由于我使用的是 HTTPS，因此端口应该是 443。所以我删除了端口以允许它选择默认端口。此外，由于它以块的形式接收数据，因此我只是将所有块收集到一条消息中，并在收到整个消息时对其进行解析。是的，我为自己感到骄傲。

```
everyone.now.login = function (assertion) {
    var client = this.now;

    var postData = querystring.stringify({
        audience: "http://life.nodejitsu.com/",
        assertion: assertion
    });

    var options = {
        host: "browserid.org",
        path: "/verify",
        method: "POST",
        headers: {
            "Content-Type": "application/x-www-form-urlencoded",
            "Content-Length": postData.length
        }
    };

    var request = https.request(options, function (response) {
        var responseText = "";

        response.on("data", function (chunk) {
            responseText += chunk;
        });

        response.on("end", function () {
            var user = JSON.parse(responseText);
            client.loggedIn(user.status === "okay" ? user.email : null);
        });
    });

    request.write(postData);
    request.end();
}; 
```