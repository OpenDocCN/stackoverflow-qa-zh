# StackOverflow 问答 12322000-12322999

# java - 使用参数化类型实现 guice Provider

> ID：12322001
> 
> 赞同：0
> 
> 时间：2012-09-07T16:27:01.570
> 
> 标签：java, generics, guice

所以我正在尝试实现 guice Provider 接口，

```
public interface Provider<T> {
  T get();
} 
```

我有另一个接口叫做`Creator`

```
public interface Creator {
    void create();
} 
```

我想创建一个 Provider 来`Creator`在创建多个`CreatePhases`.

```
private static final class CreatePhaseProvider<T> implements Provider<CreatePhase<T extends Creator>>
    {
        @Override
        public CreatePhase<T> get(){
            return null;
        }
    } 
```

这给了我一个错误“令牌“扩展”的语法错误，”。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T16:59:32.703

```
private static final class CreatePhaseProvider<T extends Creator> implements Provider<CreatePhase<T>>
    {
        @Override
        public CreatePhase<T> get(){
            return null;
        }
    } 
```

哎呀，把扩展放在错误的地方！

# symfony - 在 Symfony2 中使用假脱机和发送即时电子邮件的附加邮件服务 - 奇怪的标题

> ID：12322002
> 
> 赞同：5
> 
> 时间：2012-09-07T16:27:01.583
> 
> 标签：symfony, swiftmailer, spool

默认情况下，我使用假脱机邮件解决方案在我的网页中发送时事通讯。但我也需要立即发送电子邮件。所以我使用[了这个解决方案](https://stackoverflow.com/questions/12270162/how-to-define-an-additional-mailer-service-to-use-the-spool-and-send-instant-ema)

如果我使用 Spool 发送时事通讯，一切都很好。但是当我使用

```
$mailer = $this->get('instant_mailer'); 
```

我收到的电子邮件在开头添加了一些文本：

> HTTP/1.0 200 OK Cache-Control: no-cache Content-Type: text/html; charset=UTF-8 日期：格林威治标准时间 2012 年 9 月 7 日星期五 16:19:06

如何删除这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T12:50:31.550

我敢打赌，您正在尝试发送 Response 对象。

```
new Response(); 
```

它转到 __toString ()

```
public function __toString()
{
    $this->prepare();

    return
        sprintf('HTTP/%s %s %s', $this->version, $this->statusCode, $this->statusText)."\r\n".
        $this->headers."\r\n".
        $this->getContent();
} 
```

这是因为：

```
$this->render('template.html.twig'); 
```

返回 Response 以避免使用：

```
$response = $this->render('template.html.twig');
$text = $response->getContent(); 
```

问候， 马克斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-10T09:37:22.413

利用

```
$content = $this->renderView('template.html.twig'); 
```

代替

```
$content = $this->render('template.html.twig'); 
```

渲染返回响应

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T17:48:54.350

该问题的其他可能解决方案是使用`templating`service 而不是`$this->render()`：

```
<?php
$body = $this->get('templating')->render('template.html.twig'); 
```

# sql - 使用 CTE 的 In 子句不起作用

> ID：12322005
> 
> 赞同：0
> 
> 时间：2012-09-07T16:27:06.113
> 
> 标签：sql, sql-server

这是我的 CTE/SQL 语句：

```
with cte as (
    ...
)

select 1, 0, q.quadrantID, 0, '', 1
from Quadrants q
where q.quadrantID not in (select cte.quadrantID from cte)
order by quadrantID ASC 
```

Quadrants 表有 6 条记录。

此场景中的 CTE 不返回任何记录。我的选择应该从象限返回 6 条记录，但它没有。这是为什么？

如果我运行以下语句：

```
select 1, 0, q.quadrantID, 0, '', 1
from Quadrants q
where q.quadrantID not in (5)
order by quadrantID ASC 
```

它将返回 6 行中的 5 行，就像它应该的那样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T16:42:35.503

您是否知道`NOT IN`如果您的 CTE 在数据中返回 NULL 将返回不正确的结果。

尝试运行此查询并查看结果，您将获得零记录

```
select 1, 0, q.quadrantID, 0, '', 1 
from Quadrants q 
where q.quadrantID not in (NULL,5) 
order by quadrantID ASC 
```

您应该在编写查询时`NOT EXISTS`阅读此内容以获取更多信息。

[http://decipherinfosys.wordpress.com/2007/01/21/32/](http://decipherinfosys.wordpress.com/2007/01/21/32/)

**编辑：**我用子句写了你的查询`NOT EXISTS`，试试这个

```
select 1, 0, q.quadrantID, 0, '', 1 
from Quadrants q 
where NOT EXISTS
(
SELECT 1  from cte WHERE cte.quadrantID=q.quadrantID 
)
order by quadrantID ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T17:17:26.083

```
; WITH cte AS (
    ...
)

SELECT 1, 0, quadrantID, 0, '', 1
FROM 
  ( SELECT quadrantID
    FROM Quadrants q
  EXCEPT
    SELECT quadrantID
    FROM cte
  ) tmp 
ORDER BY quadrantID ASC ; 
```

# jquery - jQuery Ajax 获取 JSON

> ID：12322009
> 
> 赞同：14
> 
> 时间：2012-09-07T16:27:26.680
> 
> 标签：jquery, ajax, ruby-on-rails-3

我有这段代码：

```
$.ajax({
url: '/piece.json',
type: "GET",
dataType: "json",
success: function (data) {
    alert(data);
}
}); 
```

我在一个 rail3 应用程序上，当我输入“/piece.json”时，我在浏览器上得到了我想要的东西。但我无法使用 Javascript 让它保持警觉！为什么会发生这种情况？

解决了，不得不使用这个：

```
complete: function (data_response) {

    alert(data_response.responseText);
}, 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T16:36:23.220

可能`piece.json`不会返回有效的 JSON，因此 jQuery 会丢弃它。尝试更改`dataType: "json"`为`dataType: "html"`并查看是否`alert(data)`显示输出。如果警报显示您的数据，则 json 对象中存在语法错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-07T19:57:49.250

这对我有用：

```
$.getJSON( "example.json", function(data) {
   console.log( "success" );
}).done(function() {
   console.log( "second success" );
})
.fail(function() {
  console.log( "error" );
})
.always(function() {
   console.log( "complete" );
}); 
```

将 example.json 替换为 json 文件的 url 或路径。注意 $.getJSON 与 $get 的使用。这是我的参考：[http ://api.jquery.com/jquery.getjson/](http://api.jquery.com/jquery.getjson/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T16:31:55.230

大概你没有工作路线`/piece.json`。使用浏览器中的开发人员工具并从 rails 应用程序登录以查看 XHR 请求发生了什么。

（查看浏览器中的 http 响应。）

请注意，您可以更简单地使用：

```
$.get('/piece.json',function(data){
  // data is a JS object parsed from a JSON response
},'json'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-07T16:39:32.267

尝试将数据类型更改为 JSONP。通常是为了克服同源政策，但可能适用于您的情况。

```
$.ajax({
    url: '/piece.json',
    type: "GET",
    dataType: "jsonp",
    success: function (data) {
        alert(data);
    }
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-07T16:36:25.207

尝试使用`complete`回调而不是`success`. 我不知道为什么，`success`即使所有数据和响应都正确，回调也不会触发。看起来像某种错误

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-07T16:38:02.663

添加这个，看看返回了什么

```
error: function (error) {
    alert(JSON.stringify(error));
} 
```

# xcode - 如何将私有框架添加到目标依赖项？

> ID：12322010
> 
> 赞同：9
> 
> 时间：2012-09-07T16:27:29.543
> 
> 标签：xcode, macos, xcode4, frameworks, build

我正在尝试使用 XCode 4 并遵循 Apple（看似）过时的[说明在我的应用程序包中嵌入一个](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Tasks/CreatingFrameworks.html)[私有框架](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Concepts/WhatAreFrameworks.html#//apple_ref/doc/uid/20002303-BBCEIJFI)（最后一段） 。

就我而言，我*为每个 Target 使用单独的 Xcode 项目*。这是最后一步：

> 在检查器窗口的常规选项卡中，将您的框架添加为应用程序的依赖项。添加此依赖项会导致 Xcode 在构建应用程序目标之前构建框架目标。
> 
> 您在应用程序目标中建立的构建依赖关系会导致框架在应用程序之前构建。这很重要，因为它保证了框架的构建版本可用于链接和嵌入应用程序。由于这种依赖关系，您可以将 Xcode 项目的活动目标设置为您的应用程序并将其保留在那里。构建应用程序现在构建框架并将其复制到应用程序包目录，在两者之间创建必要的链接。

然而，当点击*Target Dependencies*中的 + 按钮时，框架并没有显示出来。如何在 Xcode 4 中的私有框架和应用程序目标之间建立构建依赖关系？

**编辑**：我应该澄清一下我已经让私有框架工作了。我只是想避免每次对框架进行更改时都清理项目，并确保在应用程序目标之前构建框架。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-08T00:43:50.537

设法通过将私有框架项目添加为子项目来解决此问题，然后在*Target Dependencies*中添加框架目标。

但是，在我的情况下，直到我删除 DerivedData ，框架目标才在*目标依赖项中显示为选项。*那个讨厌的小虫子把我逼疯了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-19T13:47:18.647

如果要添加私有框架而不将其作为子项目包含，则必须为其添加**复制文件**任务：

[![复制文件任务](../Images/d7f95bc344995d3d2ca668d85d867275.png)](https://i.stack.imgur.com/PVSqF.png)

**使用+**按钮选择您的框架，然后`Frameworks`选择**Destination**。

您无需在**Target Dependencies**中添加任何内容。

此外，要使其正常工作，请确保**Runpath Search Paths**值`@executable_path/Frameworks`位于**Build Settings**选项卡中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T19:39:12.377

在 Xcode 中选择您的项目，然后您可以在右侧找到 Project 和 Target。然后选择 Target 并转到 LinkBinary with Libraries，然后会出现一个窗口，在左下方有一个名为 Add other 的选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-16T14:20:30.280

您首先需要将其他项目`.xcodeproj`作为子项目添加到项目中：

1.  右键单击`Frameworks`组（或其他任何地方）
2.  选择`Add Files to "<Project>..."`
3.  选择其他项目的`.xcodeproj`
4.  其他项目的目标现在将出现在`Target Dependencies`菜单中

# asp.net - 在内容页面的不同位置呈现 webusercontrol 的一部分

> ID：12322015
> 
> 赞同：3
> 
> 时间：2012-09-07T16:27:50.483
> 
> 标签：asp.net, webforms, webusercontrol

鉴于此 webusercontrol：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="Comments.ascx.cs" Inherits="Controls_Fresh_Comments" %>

Hello World!

<asp:PlaceHolder runat="server" ID="Javascript">
    <script>
        alert("Hello!");
    </script>
</asp:PlaceHolder> 
```

这在我的母版页上：

```
<asp:ContentPlaceHolder runat="server" ID="JSContent"/> 
```

如何使`Javascript`webusercontrol 中的内容呈现到`JSContent`内容占位符中？

为了获得良好的实践和性能，我希望控制 Javascript 在页面上的呈现位置。我正在寻找一种不需要我修改 webusercontrol 之外的任何内容的解决方案。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T12:53:46.860

Doh，刚开始赏金，然后立即为自己弄清楚了。在 webusercontrol`Page_Load`添加以下行：

```
Page.Master.FindControl("JSContent").Controls.Add(Javascript); 
```

# c++ - 控件不在无模式对话框 MFC 中呈现

> ID：12322018
> 
> 赞同：2
> 
> 时间：2012-09-07T16:28:08.033
> 
> 标签：c++, visual-studio-2010, visual-c++, mfc

**更新**：可能的解决方案。在标题中声明 CWait 对话框似乎可以解决这个问题。

**UPDATE2：**消息泵可能是罪魁祸首。明确的“抽水”似乎可以解决问题。

我试图在应用程序中执行某些功能时显示模式“请稍候”对话框。我要显示的对话框是这样的： ![在此处输入图像描述](../Images/f5fd4a788ed7d253b77ef3503178b852.png)

我使用此代码来调用对话框。

```
CWait dialog;
dialog.Create(IDD_WAIT);
dialog.SetWindowTextW(L"Geocoding");
dialog.ShowWindow(SW_SHOW);

mastImageGeocode(); //Working here
slvImageGeocode();
interfImageGeocode();
cohImageGeocode();

dialog.CloseWindow(); 
```

最终显示的是这样的： ![在此处输入图像描述](../Images/3e1cac808f1fe1a0f555b15007f8e461.png)

我似乎无法弄清楚为什么控件不呈现。

我尝试在使用这种方法初始化对话框后手动处理消息循环：

```
MSG stMsg;

             while (::PeekMessage (&stMsg, NULL, 0, 0, PM_REMOVE)) 
            {
            ::TranslateMessage (&stMsg);
            ::DispatchMessage (&stMsg);
            } 
```

并没有真正起作用。

我也尝试过指针方法

```
Cwait * dialog; //THis is in header
dialog = new CWait(this);
dialog->Create(IDD_WAIT);
dialog->SetWindowTextW(L"Geocoding");
dialog->ShowWindow(SW_SHOW);

mastImageGeocode(); //Some work here
slvImageGeocode();
interfImageGeocode();
cohImageGeocode();

dialog->CloseWindow();
delete dialog; 
```

难道我做错了什么。

谢谢您的帮助。

更新：如果我在单个函数中调用它，它工作正常！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-15T21:04:32.047

您不仅需要在对话框开始时手动发送消息，还需要在更新后手动发送消息。像这样的东西：

```
void CProgressDialog::SetProgress(int Progress) 
{
    m_progressBar.SetPos(Progress);

    MSG msg;
    while (PeekMessage(&msg, NULL, 0, 0, PM_REMOVE) > 0)
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T07:04:33.190

听起来您没有从主处理循环中更新对话框。我在下面放了一个精简版的 MFC 进度对话框。请注意，需要定期调用**SetProgress**来更新屏幕。作为更一般的观点，如果您在 MFC 中使用无模式对话框，则需要调用**OnUpdate(FALSE)**以使它们刷新，并确保它们有足够的时间这样做。很多时候，当我认为我需要一个无模式对话框时，实际上通过将任务分成单独的线程来为我提供更好的服务，即处理部分被放置在它自己的工作线程中。YMMV。

```
class CProgressDialog : public CDialog
{
public:
    CProgressDialog(LPCTSTR Name,int Max,CWnd* pParent = NULL);  
    CProgressDialog(UINT NameID,int Max,CWnd* pParent = NULL);   
    virtual ~CProgressDialog();

    int m_Max;
    void SetProgress(int Progress);
    void SetRange(int Range);
    enum { IDD = IDD_PROGRESS_DIALOG };
    CProgressCtrl   m_Progress;
    protected:
    virtual void DoDataExchange(CDataExchange* pDX);  
protected:
    virtual BOOL OnInitDialog();
    DECLARE_MESSAGE_MAP()
};

CProgressDialog::CProgressDialog(LPCTSTR Name,int Max,CWnd* pParent /*=NULL*/)
    : CDialog(CProgressDialog::IDD, pParent)
{
    Create(CProgressDialog::IDD, pParent);
    SetWindowPos(&wndTop,1,1,0,0,SWP_NOSIZE | SWP_SHOWWINDOW);
    SetWindowText(Name);
    m_Max = Max;
}

CProgressDialog::~CProgressDialog()
{
    DestroyWindow();    
}

void CProgressDialog::DoDataExchange(CDataExchange* pDX)
{
    CDialog::DoDataExchange(pDX);
    DDX_Control(pDX, IDC_PROGRESS, m_Progress);
}

BEGIN_MESSAGE_MAP(CProgressDialog, CDialog)
END_MESSAGE_MAP()

BOOL CProgressDialog::OnInitDialog() 
{
    CDialog::OnInitDialog();
    m_Progress.SetRange32(0,m_Max);
    return TRUE; 
}

void CProgressDialog::SetProgress(int Progress) 
{
    m_Progress.SetRange32(0,m_Max);
    m_Progress.SetPos(Progress);
    UpdateData(FALSE);
}

void CProgressDialog::SetRange(int Range) 
{
    m_Max = Range;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-07T13:15:35.827

利用：

m_progressBar.SetPos(进度+1);

m_progressBar.SetPos(进度);

它会显示出来。不要问我为什么...... PS.：到达最后一个Progressstep时要注意！

# seo - 从搜索结果预览片段中排除文本？

> ID：12322019
> 
> 赞同：1
> 
> 时间：2012-09-07T16:28:10.297
> 
> 标签：seo, search-engine, screen-readers

我在我的网站上实现了一个“跳到内容”链接并将其隐藏在屏幕外（`:focus`编辑时除外）。然而，我注意到在一些我没有明确定义元描述的页面上，谷歌在搜索结果中为其预览片段选择了“跳到内容”。

有没有办法格式化或标记不应在搜索片段中使用的文本？我的案例是跳转到内容链接，但我可以想象其他类似的需求。但是，在这种情况下，它必须保持可访问性（因此 no`display:none`等）。

我想我要找的是`rel="nofollow"`下一个版本，而不仅仅是链接。

* * *

tl;dr：“跳到内容”链接出现在搜索片段中。这是不希望的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:11:23.047

我认为一般的谷歌搜索没有这样的方法。

Google 允许其*Google Search Appliance*和*Google Mini*`googleoff`产品的客户使用`googleon`HTML 注释来说明搜索时应忽略哪些内容；请参阅[从索引中排除不需要的文本](https://developers.google.com/search-appliance/documentation/46/admin_crawl/Preparing#pagepart)。**但这**当然不适用于公共 Google 搜索。

* * *

我认为尝试防止该问题的最佳方法是使用`meta` `description`： http: [//support.google.com/webmasters/bin/answer.py ?hl=en&answer=79812](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=79812)

```
<meta name="description" content="A description of the page" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-04T12:17:45.797

> 它必须保持可访问（所以没有显示：无等）

好吧，如果您可以使用 JavaScript，您仍然可以`style="display:none"`在 div 或 span 标签中使用，并将以下内容添加到您的 JS 文件中：

```
$(document).ready(function() {
    document.getElementById('skip').style.display = "block";

    //Or shorter with jQuery
    $('#skip').show(); //Alternatively: fadeIn()
}); 
```

# c# - Dapper & MS Access - 读取有效，写入无效

> ID：12322023
> 
> 赞同：9
> 
> 时间：2012-09-07T16:28:27.020
> 
> 标签：c#, ms-access, ado.net, oledb, dapper

让我们从解决这个问题开始：我被困在使用 MS Access DB 并且无法更改它。

这工作正常：

```
using (OleDbConnection conn = ConnectionHelper.GetConnection())
{
  conn.Open();
  var results = conn.Query<string>(
    "select FirstName from Students where LastName = @lastName", 
    new { lastName= "Smith" }
  );
  conn.Close();
} 
```

这工作正常：

```
using (OleDbConnection conn = ConnectionHelper.GetConnection())
{
  OleDbCommand cmd = new OleDbCommand(
    "update Students set FirstName = @firstName, City = @city where LastName = @lastName", 
    conn
  );
  cmd.Parameters.AddWithValue("firstName", "John");
  cmd.Parameters.AddWithValue("city", "SomeCity");
  cmd.Parameters.AddWithValue("lastName", "Smith");

  conn.Open();
  var result = cmd.ExecuteNonQuery();
  conn.Close();
} 
```

这不是......它执行时没有错误，但它在数据库中将 FirstName 设置为“SomeCity”，将 City 设置为“John”：

```
using (OleDbConnection conn = ConnectionHelper.GetConnection())
{
  conn.Open();
  var results = conn.Query<string>(
    "update Students set FirstName = @firstName, City = @city where LastName = @lastName", 
    new { firstName = "John", city = "SomeCity", lastName = "Smith" }
  );
  conn.Close();
} 
```

有任何想法吗？

**在下面编辑**

如果我使用 DynamicParameters，Dapper 可以工作：

```
using (OleDbConnection conn = ConnectionHelper.GetConnection())
{
  DynamicParameters parameters = new DynamicParameters();
  parameters.Add("firstName", "John");
  parameters.Add("city", "SomeCity");
  parameters.Add("lastName", "Smith");

  conn.Open();
  var result = conn.Query<string>(
    "update Students set FirstName = @firstName, City = @city where LastName = @lastName",
    parameters
  );
  conn.Close();
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-08T01:08:25.830

经过一番挖掘，我找到了原因：

下面是来自 dapper 的 SqlMapper 的 CreateParamInfoGenerator 委托：

```
 public static Action<IDbCommand, object> CreateParamInfoGenerator(Identity identity)
    {

        // code above here
        IEnumerable<PropertyInfo> props = type.GetProperties().OrderBy(p => p.Name); 
```

道具是您一致的参数，它由 OrderBy(p => p.Name) 重新排序，从而将城市提前移动。

```
new { firstName = "John", city = "SomeCity", lastName = "Smith" } 
```

然后将道具添加到顺序很重要的 IDbCommand 参数中。

如果我注释掉 OrderBy() 子句，那么一切正常。

我还测试了 DynamicParameters 并有意重新排序属性以提前移动城市：

```
 var parameters = new DynamicParameters();
        parameters.Add("city", "SomeCity");
        parameters.Add("firstName", "John");
        parameters.Add("lastName", "Smith");

        var result = dbConnection.Query<string>(
          "update Students set FirstName = @firstName, City = @city where LastName = @lastName",
          parameters
        ); 
```

上面的也不起作用，所以属性的顺序就是原因！

我想你现在可以修改你本地的 SqlMapper 副本并删除 OrderBy() 并等待 Marc 的正式判决......

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-29T07:03:35.550

我有一个类似的问题，我所做的是`use parameter names like @param1, @param2`而不是@name，@id，@price，因此订单保持不变，而无需修改 SQLMapper.cs 文件。

就像是

```
public void Update(Movie movie)
{
  var sql = "UPDATE myDB.movies set title=@param1, genre=@param2 where ID=@param3";
  db.Execute(sql, new { param1 = movie.Title, param2 = movie.Genre, param3 = movie.ID });
} 
```

# json - Instagram 的最大请求数是多少？

> ID：12322028
> 
> 赞同：4
> 
> 时间：2012-09-07T16:28:54.233
> 
> 标签：json, api, jquery, jsonp, instagram

我想知道您可以返回的标记图像的数量是否有限制？

这是我的代码：

```
<script type="text/javascript">
$(function() {
$.ajax({
    type:'GET',
    dataType:'jsonp',
    cache: false,
    url:'https://api.instagram.com/v1/tags/[TAG NAME]/media/recent?client_id=[CLIENT ID]',
    success: function(data) {
        for (var i = 0; i < 50; i++) {
        $(".pics").append("<li><a target='_blank' href='" + data.data[i].link +
        "' class='upshot-instagram' rel='instagram-group'><img src='" + data.data[i].images.thumbnail.url +"' ></img></a></li>");
        }
    }
});
});
</script> 
```

我有 50 张返回，但我只收到 20 张返回给我的图像。我知道我们有超过 250 个已被标记。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T17:23:31.940

API 每次调用只会返回 20 张图像。这是`pagination`数据派上用场的地方，您可以使用`MAX_ID`Instagram API 提供的数据，[在此处](http://instagram.com/developer/endpoints/)阅读更多内容。

这是在 PHP 和 jQuery 中，但它可以帮助您走上正轨：[加载更多示例](https://gist.github.com/2961185)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-06T05:39:03.923

返回的默认项目数为 20。但是，您可以使用`count`参数指定更多。在撰写本文时，它似乎是 33，但由于没有记录，这可能会改变。

所以你的问题的答案是 - 33，但它可以（并且可能会）改变。

要回答您的*问题*，您可以使用我编写的脚本[**Instafetch**](https://github.com/d4nyll/instafetch)，它会为您分页和过滤，并允许您获取指定数量的图片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-18T02:30:41.017

2021 年，使用[Instagram Basic Display API](https://developers.facebook.com/docs/instagram-basic-display-api/overview)，默认返回的媒体数量为 25。如果使用 limit 参数，则超出此默认值，但**返回的最大项目数为 100**。

[以下是使用Me 端点](https://developers.facebook.com/docs/instagram-basic-display-api/reference/me)的示例 cURL 代码片段：

```
GET https://graph.instagram.com/me
    ?fields={fields}
    &access_token={access-token}
    &limit={required number of items} 
```

# c# - 插入 MAX()+1 和其他值

> ID：12322031
> 
> 赞同：1
> 
> 时间：2012-09-07T16:29:05.967
> 
> 标签：c#, asp.net, ms-access, insert, max

我对 C# 非常陌生，并尝试将多个值插入到 access 数据库中，其中一个值将递增 1。我不能在 access 中使用自动编号，因为条目从 99001 开始，我需要能够编辑/跳过数字很​​容易。我整天都在尝试与此类似的不同帖子，但所有帖子都会导致错误或根本不起作用。我的代码目前如下。

```
AccessDataSource1.InsertCommand = "INSERT INTO [1U] ([serial], [model], [motherboard], [mobogroup], [bios]) SELECT ((SELECT MAX([serial])+1 FROM [1U]), ?, ?, ?, ?)";
AccessDataSource1.InsertParameters["serial"].DefaultValue = "1";
AccessDataSource1.InsertParameters["model"].DefaultValue = "D";
AccessDataSource1.InsertParameters["motherboard"].DefaultValue = "D";
AccessDataSource1.InsertParameters["mobogroup"].DefaultValue = "D";
AccessDataSource1.InsertParameters["bios"].DefaultValue = "D"; 
```

按钮将其称为

```
<asp:Button ID="InsertButton" runat="server"  OnClick="update_click" CausesValidation="True" CommandName="Insert" Text="Insert" /> 
```

但这给了我一个错误，说“查询值和目标字段的数量不一样”。关于如何解决这个问题或替代方法来实现我正在寻找的结果的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:34:43.067

> 我不能在访问中使用自动编号，因为条目从 99001 开始

您可以欺骗 MS Access 使用种子自动编号，有关如何执行此操作的示例，请参阅[创建以大于 1 的数字开头的自动编号字段。](http://blogs.office.com/b/microsoft-access/archive/2010/04/02/power-tip-create-an-autonumber-field-that-starts-with-a-number-greater-than-1.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T16:37:23.073

您有 4 个占位符和 5 个插入参数，这就是您的错误消息的原因。由于您没有`serial`在查询中使用，请删除该 InputParameter。

```
AccessDataSource1.InsertCommand = "INSERT INTO [1U] ([serial], [model], [motherboard], [mobogroup], [bios]) SELECT ((SELECT MAX([serial])+1 FROM [1U]), ?, ?, ?, ?)";
AccessDataSource1.InsertParameters["model"].DefaultValue = "D";
AccessDataSource1.InsertParameters["motherboard"].DefaultValue = "D";
AccessDataSource1.InsertParameters["mobogroup"].DefaultValue = "D";
AccessDataSource1.InsertParameters["bios"].DefaultValue = "D"; 
```

此外，[文档](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasourceview.insertcommand)在查询中显示命名输入参数，而不是问号。如果上面的代码不起作用，请尝试将 InsertCommand 更改为此。

```
AccessDataSource1.InsertCommand = "INSERT INTO [1U] ([serial], [model], [motherboard], [mobogroup], [bios]) SELECT ((SELECT MAX([serial])+1 FROM [1U]), @model, @moetherboard, @mobogroup, @bios)"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T16:34:36.570

如果你只是硬编码值怎么办？

```
AccessDataSource1.InsertCommand = "INSERT INTO [1U] ([serial], [model], [motherboard], [mobogroup], [bios]) SELECT ((SELECT MAX([serial])+1 FROM [1U]), "D", "D", "D", "D")"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T16:35:58.753

我认为你做的是对的。自动编号（SQL 中的标识列）已用于对记录进行编号，生成手动编号可能会给您带来一些问题，因为您说您是初学者。您还需要知道自动编号列的种子和起始编号是如何工作的。

顺便说一句，您的问题与您在评论中提到的任何内容无关。它只是说您在 Insert 子句中插入的列与目标表中的列不同。

干杯

# hibernate - 获取异常 Javassist 增强失败：由于 JavassistLazyInitializer.getProxy

> ID：12322032
> 
> 赞同：11
> 
> 时间：2012-09-07T16:29:12.277
> 
> 标签：hibernate

当我使用 HibernateSession 类中的 load 方法时，出现以下异常，如下所示：

`getCurrentSession().load(entityClass, id);`.

如果我使用以下内容，我没有得到例外：

`getCurrentSession().get(entityClass, id);`.

这是课程代码

```
package com.company.x.y.field;

 @Entity
 @Table(name = "FIELD")
 @Inheritance(strategy = InheritanceType.SINGLE_TABLE)
 @DiscriminatorColumn(name = "FIELDTYPE")
 @Cache(usage = CacheConcurrencyStrategy.READ_WRITE,region="xEntity")
 public abstract class AbstractField extends AbstractEntity {
private static final long serialVersionUID = 1L;

private final ValueType valueType;
private final FieldType fieldType;
private DataPoint dataPoint;
private String name;
private String title;
private String guid;
private boolean deleted;
private Integer sequence;

protected AbstractField(FieldType fieldType, ValueType valueType) {
    this.fieldType = fieldType;
    this.valueType = valueType;
}

@Id
@SequenceGenerator(name = "SEQ_FIELD_ID", sequenceName = "SEQ_FIELD_ID", allocationSize = 1)
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "SEQ_FIELD_ID")
@Override
@Column(name = "FIELD_ID")
public Long getId() {
    return id;
}

@Transient
public ValueType getValueType() {
    return valueType;
}

@Transient
public FieldType getFieldType() {
    return fieldType;
}

@ManyToOne
//@JoinColumn(name = "DP_ID", updatable = false)
@JoinColumn(name = "DP_ID")
public DPClass getDPClass() {
    return dpClass;
}

public void setDataPoint(DPClass dpClass) {
    this.dpClass = dpClass;
}

@Column(name = "NAME")
public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

@Column(name = "TITLE")
public String getTitle() {
    return title;
}

public void setTitle(String title) {
    this.title = title;
}

@Column(name = "GUID")
public String getGuid() {
    if (StringUtils.isEmpty(guid)) {
        guid = UUID.randomUUID().toString().toUpperCase().replaceAll("-", "");
    }
    return guid;
}

public void setGuid(String guid) {
    this.guid = guid;
}

@Column(name = "DELETED_IND")
public boolean isDeleted() {
    return deleted;
}

public void setDeleted(boolean deleted) {
    this.deleted = deleted;
}

@Column(name = "SEQUENCE")
public Integer getSequence() {
    return sequence;
}

public void setSequence(Integer sequence) {
    this.sequence = sequence;
}

@Column(name = "CREAT_TS")
public Date getDateCreated() {
    return dateCreated;
}
@Column(name = "CREAT_USER")
public String getUserCreated() {
    return userCreated;
}
@Column(name = "LAST_UPDATE_TS")
public Date getDateUpdated() {
    return dateUpdated;
}
@Column(name = "LAST_UPDATE_USER")
public String getUserUpdated() {
    return userUpdated;
}
} 
```

例外情况如下：

```
org.hibernate.HibernateException: Javassist Enhancement failed: com.company.x.y.field.AbstractField
    at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.getProxy(JavassistLazyInitializer.java:142)
    at org.hibernate.proxy.pojo.javassist.JavassistProxyFactory.getProxy(JavassistProxyFactory.java:71)
    at org.hibernate.tuple.entity.AbstractEntityTuplizer.createProxy(AbstractEntityTuplizer.java:631)
    at org.hibernate.persister.entity.AbstractEntityPersister.createProxy(AbstractEntityPersister.java:3737)
    at org.hibernate.event.def.DefaultLoadEventListener.createProxyIfNecessary(DefaultLoadEventListener.java:360)
    at org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:281)
    at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:152)
    at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:1090)
    at org.hibernate.impl.SessionImpl.load(SessionImpl.java:985)
    at org.hibernate.impl.SessionImpl.load(SessionImpl.java:978)
    at com.company.x.y.field.app.FieldServiceImpl.getById(FieldServiceImpl.java:152)
    at com.company.x.y.field.app.FieldServiceImpl.getById(FieldServiceImpl.java:1)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy67.getById(Unknown Source)
    at com.company.impl.web.AbstractEntityBean.getEntity(AbstractEntityBean.java:36)
    at sun.reflect.GeneratedMethodAccessor289.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:302)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:116)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:163)
    at com.sun.el.parser.AstEqual.getValue(AstEqual.java:54)
    at com.sun.el.parser.AstOr.getValue(AstOr.java:54)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:219)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:193)
    at javax.faces.component.UIComponentBase.isRendered(UIComponentBase.java:422)
    at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1038)
    at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1048)
    at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1048)
    at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1048)
    at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1048)
    at org.primefaces.component.tabview.TabView.processDecodes(TabView.java:243)
    at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1048)
    at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1048)
    at org.primefaces.component.tabview.TabView.processDecodes(TabView.java:243)
    at javax.faces.component.UIForm.processDecodes(UIForm.java:216)
    at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1048)
    at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1048)
    at javax.faces.component.UIViewRoot.processDecodes(UIViewRoot.java:926)
    at com.sun.faces.lifecycle.ApplyRequestValuesPhase.execute(ApplyRequestValuesPhase.java:78)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:508)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:64)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:185)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:151)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:269)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.InstantiationException: com.company.x.y.field.AbstractField_$$_javassist_28
    at java.lang.Class.newInstance0(Class.java:340)
    at java.lang.Class.newInstance(Class.java:308)
    at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.getProxy(JavassistLazyInitializer.java:139)
    ... 100 more 
```

感激，如果有人知道是什么原因造成的>谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-08T07:51:41.037

该类`com.company.x.y.field.AbstractField`没有默认（无参数）构造函数。

导致上述结论的堆栈跟踪部分。

```
Caused by: java.lang.InstantiationException: com.company.x.y.field.AbstractField_$$_javassist_28
    at java.lang.Class.newInstance0(Class.java:340)
    at java.lang.Class.newInstance(Class.java:308)
    at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.getProxy(JavassistLazyInitializer.java:139)
    ... 100 more 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-13T15:07:25.370

当hibernate没有正确版本的javassist类或多个版本时会发生这种情况，在我的Websphere 8.5.5.12上是因为该服务器具有该库的非常旧版本，而我的耳朵在APP-INF有一个新版本/库。我可以通过以这种方式更改模块类加载器来修复它： [![在此处输入图像描述](../Images/036410eff0bee4b3b2bf6b0a747c1e60.png)](https://i.stack.imgur.com/ybYe4.png)

# jquery - 替换输入表单中的字符，但保留光标位置

> ID：12322039
> 
> 赞同：2
> 
> 时间：2012-09-07T16:29:38.317
> 
> 标签：jquery, input

我需要创建一个日期输入表单，例如：

```
<input type="text" id="field" maxlength="10" value="__/__/____"/> 
```

当用户输入日期值时，它应该用输入的值替换每个底线：

```
var firstValue= $("#field").val();

$("#field").keypress(function (e) {
  var pattern = /^\d*(\d*)?$/;
  var digit= String.fromCharCode(e.keyCode);
  if (digit.match(pattern)) {
    $("#field").val($("#field").val().replace("_", digit))
  }
  else 
    event.target.value = firstValue;
}); 
```

一切正常，除了光标在输入过程中一直固定在输入表单的末尾。有人知道为什么会这样吗？你能帮我让光标跟随输入吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:33:11.793

无需重新发明轮子。改用[**jQuery Masked Input Plugin**](http://digitalbush.com/projects/masked-input-plugin/)：

> 它允许用户更轻松地输入固定宽度的输入，您希望他们以某种格式（日期、电话号码等）输入数据。它已经在 Internet Explorer、Firefox、Safari 和 Chrome 上进行了测试。

# javascript - 使用 javascript 禁用 Applet 按钮

> ID：12322041
> 
> 赞同：2
> 
> 时间：2012-09-07T16:29:49.040
> 
> 标签：javascript, html, button

我想禁用一个按钮

```
<BUTTON name="Next Page" onClick="Next()" VALUE="NextPage">NextPage</button> 
```

基于 javascript 变量

```
var opening = 0;

function Next()
{
var currentdoc = viewONE.getDocIndex();
    if (currentdoc == 5)
    {
    **[DISABLE BUTTON]**
    } 
```

请问javascript代码是什么？

背景信息：只需使用下一个和上一个按钮浏览文档。在第一个文档上，我希望“上一个”按钮变灰，在最后一个文档上，我希望“下一个”按钮变灰。

为任何不正确的术语道歉，newb，以前从未问过此类问题。欢迎您以建设性的方式纠正我的术语……需要学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:14:59.790

Sam 的解决方案很好，将禁用按钮的操作，但不会在功能上禁用它。

您可以通过更改“禁用”属性来禁用输入按钮，但您确实需要首先为您的按钮提供一个有效的标识符（由于空格，我什至不想让 jQuery 按名称选择它）。

jQuery 看起来像这样：

```
$('#yourbuttonid').attr('disabled','disabled'); 
```

常规 Javascript 如下：

```
document.getElementById('yourbuttonid').disabled = true; 
```

[这是一个关于 JSBin 的例子](http://jsbin.com/anacef/2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T16:33:51.010

您需要做的就是：

```
var opening = 0;

function Next()
{
    var currentdoc = viewONE.getDocIndex();
    if (currentdoc == 5)
    {
        return; //This will end the function immediately.
    }
} 
```

在按钮变灰方面，你能不能不添加/删除类来显示不同版本的按钮？我们需要更多内容来查看您的 html，以及您迄今为止所做的尝试以进一步提供帮助。

[退货教程](http://www.golivecentral.com/pages/txttut/jstut/return.shtml)

# solr - 在 Solr 中使用组进行分布式搜索

> ID：12322042
> 
> 赞同：0
> 
> 时间：2012-09-07T16:29:52.103
> 
> 标签：solr, grouping, distributed

我有按日期拆分的 Solr 分片。

特定数据可以位于多个分片上。我希望将数据分组以在不同的分片之间具有不同的元素。

想象一下，我在 3 个分片之间进行分布式搜索，找到一个 url 'http://a.com'，这 3 个分片有 url。

我的问题是分布式搜索的 group.ngroups 结果不是我所期望的。我有 3 个不同的组，但我只想要 1 个。

问题是，这是预期的行为吗？

谢谢

# ruby-on-rails - 在 Ruby 调试中，仅单步执行应用程序/项目文件并跳过框架文件？

> ID：12322049
> 
> 赞同：4
> 
> 时间：2012-09-07T16:30:26.933
> 
> 标签：ruby-on-rails, ruby, debugging, ruby-debug, pry

我正在使用[pry-debugger](https://github.com/nixme/pry-debugger)和[debugger](https://github.com/cldwalker/debugger)。单步执行堆栈时，我想跳过框架和库文件，只查看我的项目（rails 应用程序）中的代码。

有没有办法做到这一点？

[类似的问题在这里。](https://stackoverflow.com/questions/7732660/debugging-rubymine-only-debug-project-files)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T11:43:46.263

我被同样的问题困住了。

显然，您可以通过进入配置排除您不想输入的文件`Run|Edit`，然后选择代码覆盖率选项卡并单击添加模式按钮。

您必须为要排除的文件输入正则表达式。

# zend-framework - 如何在zend翻译表达式中包含视图变量？

> ID：12322052
> 
> 赞同：0
> 
> 时间：2012-09-07T16:30:37.930
> 
> 标签：zend-framework, zend-translate, poedit

我想在我的主页上显示最新的 3 条新闻。我从 MySql 数据库的表中选择最新消息并将它们分配给索引控制器中的视图变量，如下所示：

```
$this->view->latestNew = $someClass->getNewsfunction(); 
```

然后我在视图中声明它：

```
echo $this->translate->_($this->latestNew); 
```

假设每次我从 MySql 数据库中向我的 News 表中添加一个新行时，都会将一个唯一的标题传递给 Zend_Translate，它会自动被 Poedit 检测并建议进行翻译。但它不会起作用。像这样的选项`{$this->latestNew}, '$this->latestNew', "$this->latestNew"`也不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:03:59.673

一个建议：

声明要在 poedit 中使用的文字并将变量作为参数传递给它

在你看来

```
printf($this->translate->_("title"), $this->latestNew); 
```

在 po编辑

源文本：“标题”翻译文本：%s

您可以随时使用 poEdit 翻译内容。

# php - php表单验证返回不匹配错误

> ID：12322057
> 
> 赞同：1
> 
> 时间：2012-09-07T16:31:08.590
> 
> 标签：php

我是 php 新手，这是我在这里的第一篇文章，对写文章也很陌生。我正在使用脚本来验证表单输入。部分脚本如下：

```
$data=$_POST;
print_r($data); 

if(($data['dm']="No") and (!empty($data['dmsince']))):
    $error=$error." dm mismatch N";  
endif;  

if(($data['dm']="Yes") and (empty($data['dmsince']))):
    $error=$error." dm mismatch Y";  
endif;

if ($error):
    print $error;
    $error="";   
    print $form;
else:
    print "OK"; 
```

我`$_POST['dm']`通过选择语句接受是或否。

出现的问题是在处理表单时：

`$_POST['dm']='No'`并且`$_POST['dmsince']`是空白的。我得到错误为`'dm mismatch Y'`.

`$_POST['dm']`=我`Yes`得到`$_POST['dmsince']='some valid date'` 错误为`'dm mismatch N'`.

从逻辑上讲，在这两种情况下，我都不应该得到任何错误。它似乎是强行进入其中一个循环。我也尝试过 elseif 没有结果。这段代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T16:33:58.417

更新您的条件以实际使用条件比较运算符（即`==`或`===`）。现在，您在第一个条件中将 $data['dm'] 分配为等于“否”，在第二个条件中分配为“是”。

您可能还想养成这样写比较的习惯：

```
if(true === $var)
if("Yes" === $var2) 
```

使用您将变量与左侧进行比较的项目。以这种方式，如果您不小心做了类似的事情：

```
if(true=$var) 
```

PHP 会抛出错误而不是这样的情况

```
if($var=true) 
```

这将设置 $var = true 并始终将条件评估为 true。

它使调试代码变得更加容易。

# cocoa - 在计算机之间发送消息

> ID：12322058
> 
> 赞同：5
> 
> 时间：2012-09-07T16:31:10.137
> 
> 标签：cocoa, networking

我想开始调查客户端/服务器通信。我已经开始研究[Distributed Objects](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DistrObjects/DistrObjects.html)和一点点[CFNetwork](https://developer.apple.com/library/mac/#documentation/Networking/Conceptual/CFNetwork/Introduction/Introduction.html)。假设我正在寻找更快的速度（更慢）。

我希望能够从一台计算机向另一台计算机发送消息，可能携带字符串或其他类型的数据。我正在考虑构建一个简单的学生响应系统，其中一台计算机充当服务器，客户端连接并向其发送数据。

我正在寻找可能对我有帮助的资源以及从哪里开始理解所涉及概念的建议。我一直在自学 Objective-C 并且是编程的相对新手，所以我知道我的理解存在漏洞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:36:03.757

“套接字”是规范的答案。

如果您有兴趣，这里有一个关于套接字编程的精彩介绍（偏向于 C，但仍然非常有用）：

*   [Beej 的网络编程指南](http://beej.us/guide/bgnet/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T16:50:21.517

另一种非常简单的方法是让服务器设置一个本地http服务器（在它自己内部），然后让客户端简单地发出http请求。通过这样做，您可以让 http 层完成所有花哨的套接字工作。更简单，开销更大，但可能适合您的情况。调试起来也容易得多，因为您可以使用浏览器来测试连接。在 cocoa 中实现 HTTP 服务器的方法有很多，不记得我用过哪一个，但是一个快速的 google 向我指出了[这个](https://github.com/robbiehanson/CocoaHTTPServer)，例如

# python - 在 Python 中附加到列表（未使用索引）时出现 IndexError

> ID：12322065
> 
> 赞同：0
> 
> 时间：2012-09-07T16:31:52.747
> 
> 标签：python, python-2.7, bytecode

`images`在 for 循环的每次迭代中，我都将一个对象附加到列表（初始化为空）。我没有通过索引显式访问列表，我只是将一个对象附加到它，这就是为什么我莫名其妙地得到了`IndexError: list index out of range`回报。

这是堆栈跟踪：

```
 Traceback (most recent call last):
   File "/mnt/www-data/run/backend/lib/python2.7/site-packages/flask/app.py", line 1504, in wsgi_app
     response = self.full_dispatch_request()
   File "/mnt/www-data/run/backend/lib/python2.7/site-packages/flask/app.py", line 1264, in full_dispatch_request
     rv = self.handle_user_exception(e)
   File "/mnt/www-data/run/backend/lib/python2.7/site-packages/flask/app.py", line 1262, in full_dispatch_request
     rv = self.dispatch_request()
   File "/mnt/www-data/run/backend/lib/python2.7/site-packages/flask/app.py", line 1248, in dispatch_request
     return self.view_functions[rule.endpoint](**req.view_args)
   File "/mnt/www-data/run/backend/lib/python2.7/site-packages/newrelic-1.4.0.137-py2.7-linux-x86_64.egg/newrelic/api/object_wrapper.py", line 166, in __call__
     self._nr_instance, args, kwargs)
   File "/mnt/www-data/run/backend/lib/python2.7/site-packages/newrelic-1.4.0.137-py2.7-linux-x86_64.egg/newrelic/api/function_trace.py", line 81, in literal_wrapper
     return wrapped(*args, **kwargs)
   File "/mnt/www-data/run/backend/lib/python2.7/site-packages/newrelic-1.4.0.137-py2.7-linux-x86_64.egg/newrelic/api/name_transaction.py", line 58, in __call__
     return self._nr_next_object(*args, **kwargs)
   File "/mnt/www-data/run/backend/webservice/decorators/controller_wrapper.py", line 75, in decorated_function
     return _return(f(*args, body=body, **kwargs))
   File "/mnt/www-data/run/backend/webservice/decorators/controller_wrapper.py", line 90, in decorated_function
     r = f(*args, **kwargs)
   File "/mnt/www-data/run/backend/webservice/decorators/login_required.py", line 16, in decorated_function
     return f(*args, **kwargs)
   File "/mnt/www-data/run/backend/webservice/controllers/me/photos.py", line 28, in create_photo
     phs = photos.store_photos(g.user, data)
   File "/mnt/www-data/run/backend/evertale/tasks/photos.py", line 106, in store_photos
     images.append(entity)
  IndexError: list index out of range 
```

以及 .../tasks/photos.py 的摘录，失败的行是 for 循环的最后一行：

```
def store_photos(user, photos, update=False):
    if type(photos) is dict:
        photos = [photos]

    images = []
    for pic in photos:
        if 'gps' in pic and pic['gps']:
            loc = Location(ts=long(pic['ts']), user=user, _latlon=pic['gps'])
            loc.save()
        image = None
        if 'data' in pic:
            image = _read_image_from_base64(pic['data'])
            image = _normalize_rotation(image)
        entity = _persist_entity(user, image, update, **pic)
        if image:
            file_name = _file_name(entity.id)
            _persist_file(image, file_name)
            thumb_photo(entity.id)
        images.append(entity)

    if len(images) > 1:
        return images
    elif len(images) == 1:
        return images[0]
    else:
        return [] 
```

有人知道为什么会这样吗？我无法调试它，因为代码在生产服务器上，而且在本地机器上测试时我从未遇到过类似的情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T16:39:00.737

我怀疑您服务器上的源代码自您启动以来已更改。事实上，我几乎可以肯定。

Python 字节码包含一个行号，当回溯发生时，该行号用于查找并显示未编译的源代码行。

但是，一旦将字节码加载到内存中，如果您要更改源文件，它就不会重新加载。如果在服务器启动后从源文件中添加或删除行，回溯中的行将是错误的。

换句话说，您的回溯中显示的行几乎肯定不是发生错误的行。我当然不希望一个简单`.append()`的*人*抛出那个异常。特定异常 ( `list index out of range`) 仅在尝试通过`__getattr__`（`lst[index]`操作）查找列表中的特定条目时发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T16:45:08.590

Martijn 可能是对的，但还有另一种可能性。

如果在 之前调用的最后一个函数`.append()`是用 C 编码的（要么 要么`_persist_entity()`）`thumb_photo()`，或者其中一个所做的最后一件事是调用用 C 编码的东西，并且 C 代码未能正确检查和处理错误，那么您最终可能会处于以下状态已引发异常但未识别。在这种情况下，附加调用可能会识别出已引发异常，即使它本身并未引发异常。

# c# - 为什么 Resharper 告诉我我的 string[] 从未分配过？

> ID：12322071
> 
> 赞同：1
> 
> 时间：2012-09-07T16:32:12.253
> 
> 标签：c#, refactoring, resharper, automated-refactoring

在此声明中：

```
string[] TardyEvenEmorys; 
```

...Resharper 告诉我，“*永远不会分配字段‘TardyEvenEmorys’。* ”

稍后在代码中，对字符串 [] 进行了赋值：

```
TardyEvenEmorys[1] = string.Empty;
TardyEvenEmorys[2] = string.Empty;
TardyEvenEmorys[3] = string.Empty;
TardyEvenEmorys[4] = string.Empty; 
```

...然后有条件地添加实际值：

```
foreach (KeyValuePair<int, string> entry in itemNumberTardyPairs)
{
    TardyEvenEmorys[entry.Key] = entry.Value; 
```

. . .

...最后，这些值以这种方式使用：

```
string url = GetTardyFilename(TardyEvenEmorys[Number]); 
```

那么 Resharper 告诉我什么？我应该在声明时实例化字符串[]，或者......？？？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-07T16:33:33.960

您正在分配数组的各个元素，但从未实际创建*数组本身*。

> 那么 Resharper 告诉我什么？我应该在声明时实例化字符串[]，或者......？？？

您需要在某处实例化数组。这可能是在声明期间或之后。例如，要在声明期间执行此操作，您需要添加：

```
string[] TardyEvenEmorys = new string[5]; // Some appropriate length 
```

如果没有这个，当你第一次分配一个元素时，你会得到一个异常，因为数组是空的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T16:34:21.000

您在某处缺少以下代码，应该得到空指针异常：

```
TardyEvenEmorys = new string[22]; 
```

# public-key-encryption - 获得了 GnuPG v1.4.5 公钥文件。是否有一个简单的虚拟证明工具可以加密 OSX 上的文件？

> ID：12322072
> 
> 赞同：0
> 
> 时间：2012-09-07T16:32:17.190
> 
> 标签：public-key-encryption, pgp, gnupg, openpgp

我之前几乎不得不处理 PGP 加密，我只记得它把我搞糊涂了。今天，一位客户向我们扔了一个曲线球，告诉我们必须先加密 CSV 文件，然后才能通过 FTP 传递它们。他们给我们发了一个公钥。不幸的是，我们将有相当不精通技术的人处理 CSV 文件并对其进行加密，上次我记得我必须做很多命令行，并在钥匙串或其他东西中进行初始设置。是否有一个简单的工具可以让 CSV 管理员设置他们的系统并使用一个不错的 GUI 工具来加密文件？还是我们必须进行疯狂的手动命令行设置？我从 CSV 管理器远程工作，所以我不容易先在我的系统上弄清楚，然后尝试在他们的系统上镜像我在此处所做的事情。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T16:46:23.457

[GPGMail](https://www.gpgtools.org/gpgmail/index.html)非常易于使用，但设置起来并不容易。不幸的是，它还不能在 Mountain Lion 中使用。

你必须使用公钥/私钥加密吗？如果他们对共享密钥加密没问题，那么在 OS X 下创建 AES 加密的磁盘映像相当容易：http: [//blog.makezine.com/2007/03/18/how-to-create-an-encrypted-dis /](http://blog.makezine.com/2007/03/18/how-to-create-an-encrypted-dis/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-10T14:30:35.987

GPG Tools 也非常直接——这里有一篇关于它的超级文章：[https](https://www.deepdotweb.com/2015/02/20/pgp-tutorial-os-x/) ://www.deepdotweb.com/2015/02/20/pgp-tutorial-os-x/或直接访问[GPG Tools Help Page](https://gpgtools.tenderapp.com/kb/gpgservices-faq/how-to-encrypt-and-sign-text-or-files-with-gpgservices)

然后可以使用 mac os x 右键菜单对任何文件进行加密。

这很容易，但您将无法避免一些设置。

# java - Java：如何将 InputStream 转换为 GZIPInputStream？

> ID：12322073
> 
> 赞同：6
> 
> 时间：2012-09-07T16:32:26.120
> 
> 标签：java, inputstream, gzipinputstream

我有一个方法

```
 public void put(@Nonnull final InputStream inputStream, @Nonnull final String uniqueId) throws PersistenceException {
        // a.) create gzip of inputStream
        final GZIPInputStream zipInputStream;
        try {
            zipInputStream = new GZIPInputStream(inputStream);
        } catch (IOException e) {
            e.printStackTrace();
            throw new PersistenceException("Persistence Service could not received input stream to persist for " + uniqueId);
        } 
```

我想将其转换`inputStream`为`zipInputStream`，这样做的方法是什么？

*   上述方法不正确并抛出异常为“不是 Zip 格式”

将 Java Streams 转换为我真的很困惑，我没有让它们正确

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T16:42:46.933

[`GZIPInputStream`](http://docs.oracle.com/javase/7/docs/api/java/util/zip/GZIPInputStream.html)用于**解压缩**传入的[`InputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html). 要使用 GZIP 压缩传入`InputStream`，您基本上需要将其写入[`GZIPOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/util/zip/GZIPOutputStream.html).

`InputStream`如果您使用将[`ByteArrayOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayOutputStream.html)gzip 压缩的内容写入 a`byte[]`并将[`ByteArrayInputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayInputStream.html)a`byte[]`转换为`InputStream`.

所以，基本上：

```
public void put(@Nonnull final InputStream inputStream, @Nonnull final String uniqueId) throws PersistenceException {
    final InputStream zipInputStream;
    try {
        ByteArrayOutputStream bytesOutput = new ByteArrayOutputStream();
        GZIPOutputStream gzipOutput = new GZIPOutputStream(bytesOutput);

        try {
            byte[] buffer = new byte[10240];
            for (int length = 0; (length = inputStream.read(buffer)) != -1;) {
                gzipOutput.write(buffer, 0, length);
            }
        } finally {
            try { inputStream.close(); } catch (IOException ignore) {}
            try { gzipOutput.close(); } catch (IOException ignore) {}
        }

        zipInputStream = new ByteArrayInputStream(bytesOutput.toByteArray());
    } catch (IOException e) {
        e.printStackTrace();
        throw new PersistenceException("Persistence Service could not received input stream to persist for " + uniqueId);
    }

    // ... 
```

如有必要，您`ByteArrayOutputStream`可以在`ByteArrayInputStream`由`FileOuputStream`.`FileInputStream``File#createTempFile()`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-07T16:36:26.803

[GZIPInputStream](http://docs.oracle.com/javase/6/docs/api/java/util/zip/GZIPInputStream.html)用于*读取*gzip 编码的内容。

如果您的目标是获取常规输入流并将其压缩为 GZIP 格式，那么您需要将这些字节写入[GZIPOutputStream](http://docs.oracle.com/javase/6/docs/api/java/util/zip/GZIPOutputStream.html)。

另请参阅[相关问题的答案](https://stackoverflow.com/a/8189791/4249)。

# linq - 使用 RavenDB，我如何有效地检索与“外键”相关的项目列表

> ID：12322076
> 
> 赞同：1
> 
> 时间：2012-09-07T16:32:52.963
> 
> 标签：linq, ravendb

我将`User`对象存储在 RavenDB 中。每个`User`人都有一个`User.Id`财产。

我还有一个`Relationship`类将两个`User.Id`s 链接在一起以创建 Mentor/Mentee 关系，如下所示：

```
public class User
{
    public string Id { get; set; }
    public string UserName { get; set; }
    ... more properties
}

public class Relationship
{
    public string Id { get; set; }
    public string MentorId { get; set; }
    public string MenteeId { get; set; }
    public RelationshipStatus Status { get; set; }
} 
```

现在我想检索给定导师的学员列表。我通过以下方式做到了这一点：

```
public static List<User> GetMentees(IDocumentSession db, string mentorId)
{
    var mentees = new List<User>();
    db.Query<Relationship>()
            .Where(r => r.MentorId == mentorId)
            .Select(r => r.MenteeId)
            .ForEach(id => mentees.Add(db.Load<User>(id)));
    return mentees;
} 
```

这似乎工作得很好，但是我肩上的编码天使对`IDocumentSession`(db) 的嵌套使用和需要多次`Load`调用来填充`Mentees`列表所散发出的气味皱起了鼻子。

如何使用最佳实践 RavenDB 语法优化此方法？

**编辑** 感谢@Jonah Himango（见下面接受的答案），他为我解决了多次调用数据库的问题。此外，我还创建了一个名为“Memoize”的新扩展方法，以消除对外部“学员”结果列表的需要（参见上面的代码）。

这是优化的代码。请随时发表评论并进一步完善。

**林克**

```
public static List<User> GetMentees(IDocumentSession db, string mentorId)
{
    return  db.Query<Relationship>()
            .Customize(x => x.Include<Relationship>(o => o.MenteeId))
            .Where(r => r.MentorId == mentorId)
            .Memoize()
            .Select(r => db.Load<User>(r.MenteeId))
            .ToList();
} 
```

**扩展方法**

```
public static List<T> Memoize<T>(this IQueryable<T> target)
{
    return target.ToList();
} 
```

**注意**：这种扩展方法可能看起来完全多余（确实如此），但它激怒了我的怪胎，我必须调用一个名为 的函数`ToList()`，而不是创建一个列表，而是强制执行 Linq 语句。所以我的扩展方法只是重命名`ToList()`为更准确的`Memoize()`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:46:27.590

您需要使用[.Include 查询自定义](http://ravendb.net/docs/client-api/querying/handling-document-relationships)来告诉 Raven 将相关的用户对象包含在每个关系之外：

```
db.Query<Relationship>()
            .Customize(x => x.Include<Relationship>(o => o.MenteeId))
            .Where(r => r.MentorId == mentorId)
            .Select(r => r.MenteeId)
            .ForEach(id => mentees.Add(db.Load<User>(id))); // .Load no longer makes a call to the DB; it's already loaded into the session! 
```

[相关文档在这里](http://ravendb.net/docs/client-api/querying/handling-document-relationships)：

> 对 Load() 的调用完全在客户端解决（即无需向 RavenDB 服务器发出额外请求），因为已经通过 .Include 调用检索了 [相关] 对象。

# android - Android 资源与 R

> ID：12322077
> 
> 赞同：0
> 
> 时间：2012-09-07T16:32:58.293
> 
> 标签：android

在android中，我可以执行以下操作（均返回整数）：

```
R.color.my_color; 
```

对比

```
Resources myR = getResources();
myR.getColor(R.color.my_color); 
```

它们都返回整数有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T16:35:11.390

`R.color.my_color`仅包含您的资源的 ID，因此它只是一个标识符。

`getResources().getColor(R.color.my_color);`包含实际颜色。在这里，您使用颜色 ID 加载实际颜色。

你打算在哪里使用这种颜色？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T16:35:07.863

`R.color.my_color`将返回资源的 id，而不是颜色本身。

# nuget - 带有公共 NuGet 包的 VS 项目模板

> ID：12322078
> 
> 赞同：3
> 
> 时间：2012-09-07T16:33:01.573
> 
> 标签：nuget, vsix, visual-studio-templates

NuGet 文档为在 VS 模板中定义的包文件描述了两个可能的存储库：1）在 VSIX 中，或 2）在模板中。“已安装”包的注册表还有第三个选项。

我们有自定义项目模板，这些模板将使用尚未在注册表中定义的公开可用的 NuGet 包。它会使 VSIX 和/或模板过于膨胀，以至于无法包含 nupkg 文件。是否有一些隐藏的选项或技巧可以让存储库改为指向 Visual Studio 用户定义的包源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:43:51.790

由于我没有找到任何简单的“技巧”，因此我根据此讨论编写了一个自定义项目向导 - [http://nuget.codeplex.com/discussions/385955](http://nuget.codeplex.com/discussions/385955)。

可以通过 PackageSourceProvider 找到包源，您可以通过 MEF 将其与 PackageInstaller 一起导入。然后，您从包源创建一个存储库，并将其传递给安装程序：

```
var factory = NuGet.PackageRepositoryFactory.Default;
var packageSources = PackageSourceProvider.LoadPackageSources().Select(s => s.Source).ToList();
var repository = new AggregateRepository(factory, packageSources, true);
NuGetPackageInstaller.InstallPackage(repository, project, package.Id, package.Version, false, false); 
```

直接调用 InstallPackage 还允许您安装依赖包和程序集引用，标准 NuGet VSIX 包安装程序禁用了这两者。

我猜标准 NuGet 出于安全原因不允许安装依赖项，但在我们的例子中，我们使用的是我们自己的 VSIX、我们的模板和我们的 NuGet 包，以及一些额外的已知依赖项，所以许可证检查早在实际使用模板之前就已经制作好了。

# foreign-keys - 规范化为 3NF（第三范式）时，您可以将复合键和/或外键移动到其他表吗

> ID：12322080
> 
> 赞同：3
> 
> 时间：2012-09-07T16:33:08.063
> 
> 标签：foreign-keys, relational-database, database-normalization, 3nf

我的数据库设计目前处于 3NF 阶段。值得关注的问题是外键，在某些情况下是复合键。

我的问题是这样的：

如果与复合键/外键关联的属性不依赖于主键，您能否移动复合键和/或外键来创建其他表？

由于这个链接，我认为答案是肯定的：

> **第三范式中是否包含外键？**
> **最佳答案**：仅仅因为它是外键并不意味着它也不能被视为主键的属性。它是一个外键开始的事实意味着它定义了与另一个表的关系，因此不会违反 [...] 3NF。
> -- TheMadProfessor
> [https://answers.yahoo.com/question/index?qid=20081117095121AAXWBbX#](https://answers.yahoo.com/question/index?qid=20081117095121AAXWBbX#)

这让我想知道我当前正在处理的标准化阶段是否实际上处于 3NF 中。

我不能就这个问题发布我的表格，因为我是新手并且没有足够的积分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T18:41:45.460

### 前言

在纯关系数据库理论中，没有什么可以阻止您拥有复合主键 (PK)，并且您可以拥有引用它们的外键 (FK)，并且这些 FK 也必然是复合的。有些软件在组合键方面有困难，所以你经常会发现人们添加了一个 ID 列，其中包含一个自动生成的数字，然后将其指定为表的 PK。然后，其他表可以具有引用（简单）ID 列的（简单）FK。一个不常见的错误是忘记原始复合 PK 仍然是候选键 (CK)，它的唯一性应该由 DBMS 通过对表的唯一约束来强制执行；它成为备用密钥（AK）。

### 导流

CKs、AKs 和 PKs 的系统是这样工作的：

*   每个 CK 都是一组（一个或多个）列，它是表中每行数据其余部分中数据的唯一标识符。
*   一个CK可以被指定为*PK*。
*   其他 CK 成为 AK。

考虑这张表：

```
CREATE TABLE elements
(
    atomic_number   INTEGER NOT NULL PRIMARY KEY
                    CHECK (atomic_number > 0 AND atomic_number < 120),
    symbol          CHAR(3) NOT NULL UNIQUE,
    name            CHAR(20) NOT NULL UNIQUE,
    atomic_weight   DECIMAL(8,4) NOT NULL,
    period          SMALLINT NOT NULL
                    CHECK (period BETWEEN 1 AND 7),
    group           CHAR(2) NOT NULL
                    -- 'L' for Lanthanoids, 'A' for Actinoids
                    CHECK (group IN ('1', '2', 'L', 'A', '3', '4', '5', '6',
                                     '7', '8', '9', '10', '11', '12', '13',
                                     '14', '15', '16', '17', '18')),
    stable          CHAR(1) DEFAULT 'Y' NOT NULL
                    CHECK (stable IN ('Y', 'N'))
); 
```

和`atomic_number`中的每一个都是候选键。对于化学来说，作为主键最方便；对于物理来说，最方便的。与同位素等相关的表格引用了该列，但与化学化合物相关的表格引用了该列。这里的三个CK都很简单；另一方面，同位素表有一个由元素的原子序数（质子数）和中子数组成的化合物PK。`symbol``name``symbol``atomic_number``atomic_number``symbol`

### 回答

回到你的问题，你的数据很可能是 3NF，或者更有可能是 BCNF（正式比 3NF 更强）。

在我们评估您的设计之前，您必须向我们展示您的表模式并指定适用于列的约束（功能依赖等）。但是，您所描述的任何东西都没有先验地阻止它被很好地规范化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T17:49:57.723

我不确定我是否理解你的问题。如果您要问，“您能否在不违反 3NF 的情况下在表中拥有外键？” 答案是肯定的，肯定的。规范化的任何阶段都没有说您应该消除外键。事实上，在不使用外键的情况下，几乎不可能标准化除了最琐碎的数据之外的所有数据。

** 更新 **

好的，也许现在我明白了你的问题，但我想你已经自己回答了。是的，在完全规范化的数据库中，您不应该有非关键依赖项。如果您有不依赖于 PK 的 FK，则应将它们移至另一个表。

举一个简单的例子，假设你想跟踪人们，他们居住的城市，以及该城市所在的国家。所以对于你的初稿，你制作了这样的结构：（星号标记 PK。）

```
Person (person_id*, person_name, city_id, country_id)
City (city_id*, city_name)
Country (country_id*, country_name) 
```

这不是标准化的。无论我们谈论的是哪个城市的居民，一个城市都在同一个国家。当我们谈论皮埃尔时，巴黎不在法国，而当我们谈论弗朗索瓦时，巴黎不在法国。（如果有两个同名的城市，当然是不同的城市，应该有不同的记录。我想一个城市可以跨越国界，但为了我们的目的，我们假设如果它是，我们认为它是两个城市碰巧碰到。他们肯定会有不同的市政府、不同的邮政系统等）所以我们有一个非关键依赖。country_id 取决于 city_id，而不是 person_id。

所以为了规范这个模式，我们应该将 country_id 移动到一个表中，它只依赖于 PK。据推测，城市表：

```
Person (person_id*, person_name, city_id)
City (city_id*, city_name, country_id)
Country (country_id*, country_name) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-13T05:56:37.567

*你了解什么是 FD（功能依赖）吗？*FD 是在两个属性集之间带有箭头的表达式。给定一个表和一个 FD，说 FD 在表中保存或表具有 FD 或表满足 FD 表示第一个属性集的所有子行与第二个属性集的相同子行出现。

*您是否了解规范化涉及 CK（候选键）？*独立于规范化，我们可以将一个 CK 称为 PK（主键）和其他 AK（备用键）。

*你了解什么是 FK（外键）吗？*给定一个数据库、一个表和一个属性列表，说该列表是一个 FK，它引用了某个表中的某个属性列表，那么第一个表中属性的每个值列表也是第一个表中属性值的列表第二个表，这些属性形成 CK（候选键）。

规范化使用 FD 和 JD（连接依赖项）通过连接回该表的投影来替换表。*FK（外键）与规范化无关。*这与表是否处于给定的 NF（正常形式）以及分解为给定的 NF 相关。您链接到的答案还说 FK 与表是否在 3NF 中无关——首先针对特定情况，然后针对一般情况。

因为组件共享原始表中的列值，所以一些 FK 将来自规范化。就像各种表格及其 PK、AK、CK、超级密钥、FD 和 JD 一样。那是标准化输出，而不是输入。

由于规范化通过它们的投影来替换表，因此原始 & 组件之间共有的列集必须包含相同的子行值。这是一个 EQD（平等依赖）。因此，形成 CK 的子行值将具有来自标准化的 FK。

但是在规范化过程中，我们经常看到我们想用一些投影替换一个表，而其他表*至少*具有投影的子行。然后，投影中的公共子行必须出现在展开的组件中，但反之则不然。那是一个IND（包含依赖）。当公共列在作为投影超集的表中形成 CK 时，仍然会有 FK。这样的设计更改不是规范化，它只是您在规范化过程中注意到的一个更改，该设计是错误的，不允许将所有可能的业务情况记录到没有该问题的设计。

“复合”与“简单”与“空”适用于 FK、PK、AK、CK（候选密钥）和超级密钥，并且与 FD 和 JD 部分相关。*定义将在重要时指定复合/简单/空。*（例如：有时 FD 被放入涉及单列的规范形式。有时我们可以很容易地部分基于 CK 是否简单来推断 NF 成立。）

*获得表后，声明（足够的）约束。*然后 DBMS 可以强制执行它们。FKs、PKs、AKs、CKs、superkeys、FDs & JDs 都有相关的约束。SQL 允许您声明所有 PK 和 AK（通过`PRIMARY KEY`& `UNIQUE NOT NULL`）。这些声明实际上声明了*超级*密钥，当其中没有声明较小的密钥时，它们恰好是 CKs/PKs/AKs。类似地，SQL`FOREIGN KEY`声明一个外部超键，如果它实际上是一个 CK，它就是一个 FK。声明足够的`FK`s 链以强制执行您未声明的链。（通过传递性。）SQL DBMS 通常不允许您声明 FK 循环。SQL 还让您声明声明所引用的超键，`FK`无论这些列是否包含较小的声明超键/CK，因此*必须*成为超级钥匙。通过触发器声明或强制执行任何 CK 约束未隐含的 FD 或 JD 约束。（5NF 摆脱了所有这些限制，除了 CK 上的一些 FD 循环。）

查找学术教科书定义和算法。

# android - 不能在脸书上发图片

> ID：12322083
> 
> 赞同：-1
> 
> 时间：2012-09-07T16:33:27.403
> 
> 标签：android, facebook, facebook-graph-api

我可以在 facebook 上成功发布文字，但是当我在 facebook 上发布带有图片的消息时，我无法在 facebook 上发布图片，我也没有收到任何错误，只是得到了

```
 json.isNull("id") =  null 
```

我已经使用了许可

```
 private static final String[] PERMISSIONS = new String[] { "publish_stream", "read_stream", "offline_access" }; 
```

我的代码是

```
 try {
            // String response = authenticatedFacebook.request("me");
            // JSONObject obj = Util.parseJson(response);
            path = Environment.getExternalStorageDirectory().toString() + "/Diegodeals";
            Bundle parameters = new Bundle();
            parameters.putString("message", txtTitle.getText().toString() + "\n" + txtDesc.getText().toString());
            File file = new File(path, "diegodeals.jpg");
            System.out.println(file.getAbsolutePath());
            Bitmap bitmap = getResizedBitmap(BitmapFactory.decodeFile(file.getAbsolutePath()), 120, 120);
            byte[] data = null;
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            bitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos);
            data = baos.toByteArray();
            if (data != null) {
                parameters.putByteArray("picture", data);
            }
            parameters.putString("access_token", authenticatedFacebook.getAccessToken());
            authenticatedFacebook.request("me");
            String response = authenticatedFacebook.request("me/feed", parameters, "POST");
            JSONObject json;
            try {
                json = Util.parseJson(response);
                if (!json.isNull("id")) {
                    isWallPostSuccess = false;
                    return "failed";
                } else {
                    isWallPostSuccess = true;
                    return "success";
                }
            } catch (FacebookError e) {
                isWallPostSuccess = false;
                e.printStackTrace();
            }

        } catch (Throwable e) {
            isWallPostSuccess = false;
            e.printStackTrace();
        }
        return null;
    }

    public Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth) {
        int width = bm.getWidth();
        int height = bm.getHeight();
        float scaleWidth = ((float) newWidth) / width;
        float scaleHeight = ((float) newHeight) / height;
        // CREATE A MATRIX FOR THE MANIPULATION
        Matrix matrix = new Matrix();
        // RESIZE THE BIT MAP
        matrix.postScale(scaleWidth, scaleHeight);

        // RECREATE THE NEW BITMAP
        Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, false);
        return resizedBitmap;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:22:02.467

将 Facebook 上的照片上传到您自己的墙上的正确方法是将参数“照片”和“标题”捆绑到“我/照片”。请注意，您的“图片”和“消息”是“我/饲料”，这是行不通的。

在您的示例中，您似乎有一个要上传的本地图像。这是如何做到的：

```
Bundle params = new Bundle();
params.putByteArray(
        "photo",
        Util.getByteArrayFromDrawable(getResources().getDrawable(
                R.drawable.picture)));
params.putString("caption", "test message here");
mAsyncRunner.request("me/photos", params, "POST", new PhotoUploadListener()); 
```

否则，为“picture”参数提供一个 URL（而不是字节数组），为“caption”参数提供一个字符串，然后发布到“me/feed”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T17:01:16.477

该`picture`参数接受图片的 URL，而不是图片二进制文件本身。将图片放在某个可公开访问的服务器上并链接到那里，或者使用 Facebook 的图形 API`/photos`图片上传机制。

# jquery - 在 IE8 中设置圆角 用 CSS 标记

> ID：12322084
> 
> 赞同：0
> 
> 时间：2012-09-07T16:33:30.220
> 
> 标签：jquery, html, css, rounded-corners

我`border-radius`在 IE8 上遇到 CSS 属性问题。在 Safari、Chrome、FF 和 IE9 上，此属性按预期工作。但是，在 IE8 上却没有。

我已经阅读了一些关于实现 jQuery Corner 插件的帖子和评论，但我在这方面的成功有限。我不确定问题是否在于尝试将其应用于`<hr>`.

有没有办法单独在 CSS 中实现圆角效果，而无需使用 jQuery Corner 插件？

![在此处输入图像描述](../Images/0fb716cc775f29976555262b3a562eae.png)

我的标记：

```
<span id="title_divider"><hr /></span> 
```

我的 CSS：

```
 #title_divider {
        position: absolute;
        width: 49px;
        left: 472px;
        top: 64px;
        padding-top: 10px;
    }
    #title_divider hr {
        height: 10px;
        background-color: #000000;
        border: 1px solid black;
        border-radius: 7px;
        height: 5px;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:36:49.920

使用[`css3pie.com`](http://css3pie.com)它可以修复所有不支持边界半径的低版本中的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T16:37:17.153

**是**的，有。

看看[这里的 css3pie](http://css3pie.com/)。

您需要做的就是在您的服务器上包含该文件，然后在您的 css 中指向它，如下所示：

```
behavior: url(/PIE.htc); 
```

# php - PHP维护类状态

> ID：12322096
> 
> 赞同：5
> 
> 时间：2012-09-07T16:33:59.950
> 
> 标签：php

我想要一个库类来维护同一个请求的状态。我的用例是我想将“消息”传递给班级，然后随时从视图中调用它们。可以从应用程序的任何部分添加消息。

我最初是通过静态方法完成的，效果很好。但是，作为库的一部分，我还需要调用`__construct`and `__destruct()`，这不能在静态类上完成。

这是我正在尝试做的一个非常简单的示例：

```
class Messages
{
  private static $messages = array();

  public function __construct()
  {
    // do something
  }

  public function __destruct()
  {
    // do something else
  }

  public static function add($message)
  {
    self::$messages[] = $message;
  }
  public static function get()
  {
    return self::$messages;
  }
} 
```

然后我可以在我的代码中的任何地方添加消息

```
Messages::add('a new message'); 
```

如果可能的话，我想避免使用静态（可测试性）。我看过 DI，但它似乎不合适，除非我遗漏了什么。

我可以创建一个类（非静态），但是我如何确保所有消息都写入同一个对象 - 以便我以后可以检索它们？

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T16:46:25.243

我看起来你可以从使用单例模式中受益——它是为一个在整个请求中必须只有一个实例的对象设计的。基本上，您创建一个私有构造函数和一个静态方法来检索唯一的实例。这是一个将执行您描述的单例的示例。

```
<?php
class Messages
{
    private static $_instance;
    private $_messages = array();

    private function __construct() {
        // Initialize
    }

    static public function instance() {
        if (! self::$_instance) {
            self::$_instance = new self();
        }
        return self::$_instance;
    }

    public function add_message( $msg ) {
        $this->_messages[] = $message;
    }

    public function get_messages() {
        return $this->_messages;
    }

    private function __destruct() {
        // Tear-down
    }
}

$my_messages = Messages::instance();
$my_messages->add_message( 'How now, brown cow?' );
// ...
$your_messages = Messages::instance();
$msgs = $your_messages->get_messages();
echo $your_messages[0]; // Prints, "How now, brown cow?" 
```

由于构造函数是私有的，因此您只能`Messages`从对象本身的方法中创建对象。由于您有一个静态方法，`instance()`因此您可以从那里创建一个新`Messages`实例。但是，如果一个实例已经存在，您希望返回该实例。

基本上，单例是它自己实例的看门人，它顽固地拒绝让自己的实例存在多个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T16:39:37.743

听起来你想做一个*单例*类。这将在一个类中创建一个实例，并允许您访问另一个类中的同一实例。查看[http://www.developertutorials.com/tutorials/php/php-singleton-design-pattern-050729-1050/](http://www.developertutorials.com/tutorials/php/php-singleton-design-pattern-050729-1050/)了解更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T16:41:30.300

让它成为一个单例类怎么样？

```
class Messages
{
    // singleton instance of Messages
    private static $instance;

    public function __construct() { ... }

    public static function getInstance()
    {
        if (!self::$instance)
        {
            self::$instance = new Messages();
        }

        return self::$instance;
    }
} 
```

这将确保您的所有消息都写入同一个对象，并且还允许您调用`__construct`和`__destruct`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T16:39:39.983

您需要的是[单例](http://en.wikipedia.org/wiki/Singleton_pattern)模式：

```
final class Singleton {
    // static variable to store the instance
    private static $instance = NULL;

    // disable normal class constructing
    private function __construct() {}

    // instead of using the normal way to construct the class you'll use this method
    public static function getInstance() {
       if (NULL === self::$instance) {
           self::$instance = new self;
       }
       return self::$instance;
    }
    // disable external cloning of the object
    private function __clone() {}
}

// get the instance across some of your scripts
$singleton = Singleton::getInstance(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T16:45:15.033

听起来有点像你想要一个单例，尽管[作为一种反模式](http://accu.org/index.php/journals/337)我会避免它。

您可以创建一个完整的静态类，其中每个静态成员调用一个`self::_isBuilt();`方法来执行您的构造元素。Destruct 有点棘手。

满足您需求的最佳情况可能是您立即构建的普通（非静态）类，然后从全局访问......不是超级整洁，但允许构造/破坏和成员，以及您使用的静态变量`$this`可能是有帮助。如果你不喜欢全局变量，你也可以将它包装在一个方法中（在 JS 中使用的技巧相当多），但它并不是真的更整洁。

**作为一个普通的全局类：**

```
$myClass=new myClass();
//Access anywhere as:
globals['myClass']->myFunction(..); 
```

**封装在一个函数中**

```
function my_class() {
 static $var=null;
 if ($var===null) $var=new myClass();
 return $var;
}
//Access anywhere as:
my_class()->myFunction(..); 
```

# c# - 使用 OBDC 连接打包应用程序

> ID：12322102
> 
> 赞同：0
> 
> 时间：2012-09-07T16:34:30.833
> 
> 标签：c#, installshield-le

我正在使用 Visual Studio 2012 打包应用程序并安装屏蔽限量版。在设置过程中，我需要与 mysql 数据库建立 obdc 连接，以使应用程序正常工作。有谁知道如何做到这一点？

# sql - 如何使用重复项的计数更新 PostgreSQL 表

> ID：12322106
> 
> 赞同：2
> 
> 时间：2012-09-07T16:35:01.123
> 
> 标签：sql, postgresql, duplicates, sql-update, duplicate-removal

我在一个创建大量重复值的程序中发现了两个错误：

*   创建了“索引”而不是“唯一索引”
*   重复检查未集成在 4 个扭曲例程之一中

所以我需要进去清理我的数据库。

第一步是用所有重复值的计数来装饰表（接下来我将研究找到第一个值，然后将所有内容迁移过来）

下面的代码有效，我只记得几年前在同一张表上做了类似的“从选择计数更新”，我用一半的代码完成了它。

有没有更好的方法来写这个？

```
UPDATE 
    shared_link 
SET 
    is_duplicate_of_count = subquery.is_duplicate_of_count 
FROM
    (
        SELECT 
            count(url) AS is_duplicate_of_count 
            , url
        FROM 
            shared_link
        WHERE
            shared_link.url = url
        GROUP BY 
            url
    ) AS subquery
WHERE 
    shared_link.url = subquery.url
; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T18:52:00.903

通常，您的查询很好，除了子查询中无意义（但也无害）的 WHERE 子句：

```
UPDATE shared_link 
SET    is_duplicate_of_count = subquery.is_duplicate_of_count 
FROM  (
    SELECT url
         , count(url) AS is_duplicate_of_count 
    FROM   shared_link
~~--  WHERE  shared_link.url = url~~
    GROUP  BY url
    ) AS subquery
WHERE shared_link.url = subquery.url;
```

注释的子句与

```
WHERE  shared_link.url = shared_link.url 
```

因此仅消除`NULL`值（因为`NULL = NULL`is not `TRUE`），这很可能既不是您的设置也不需要。

* * *

除此之外，您只能使用别名和更短的名称进一步缩短代码：

```
UPDATE shared_link s
SET    ct = u.ct
FROM  (
    SELECT url, count(url) AS ct
    FROM   shared_link
    GROUP  BY 1
    ) AS u
WHERE s.url = u.url; 
```

在 PostgreSQL 9.1 或更高版本中，您可能能够在*一条*SQL 语句中使用聚合和窗口函数以及[**数据修改 CTE**](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)*来完成整个操作*（识别重复数据、合并数据、删除重复数据）- 从而无需在开始时添加额外的列.*[](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)*

# java - 如何从 JSP 文件中删除实体（Java 与 Google App Engine）

> ID：12322108
> 
> 赞同：2
> 
> 时间：2012-09-07T16:35:05.190
> 
> 标签：java, google-app-engine, jsp

我有一个 jsp 文件，它显示数据存储区中的一些记录，我希望在每个条目旁边都有一个删除按钮，可以将其从数据库中删除。

所以，我知道 Servlet 会进行实际的删除，但我不确定在 jsp 中使用删除按钮放什么，以便我的 Servlet 知道要在数据库中查找什么实体（项目）。

有一个更好的方法吗？

这是我的jsp。往下看我有删除按钮的底部：

```
 <%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ page import="java.util.List" %>
<%@ page import="com.google.appengine.api.users.User" %>
<%@ page import="com.google.appengine.api.users.UserService" %>
<%@ page import="com.google.appengine.api.users.UserServiceFactory" %>
<%@ page import="com.google.appengine.api.datastore.DatastoreServiceFactory" %>
<%@ page import="com.google.appengine.api.datastore.DatastoreService" %>
<%@ page import="com.google.appengine.api.datastore.Query" %>
<%@ page import="com.google.appengine.api.datastore.Entity" %>
<%@ page import="com.google.appengine.api.datastore.FetchOptions" %>
<%@ page import="com.google.appengine.api.datastore.Key" %>
<%@ page import="com.google.appengine.api.datastore.KeyFactory" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>

<html>
  <head>
    <link type="text/css" rel="stylesheet" href="/stylesheets/main.css" />
  </head>

  <body>

<%
    String podlistName = request.getParameter("podlistName");
    if (podlistName == null) {
        podlistName = "default";
    }
    pageContext.setAttribute("podlistName", podlistName);
    UserService userService = UserServiceFactory.getUserService();
    User user = userService.getCurrentUser();
    if (user != null) {
      pageContext.setAttribute("user", user);

%>
<p>Hello, ${fn:escapeXml(user.nickname)}! (You can
<a href="<%= userService.createLogoutURL(request.getRequestURI()) %>">sign out</a>.)</p>
<%
    } else {
%>
<p>Hello!
<a href="<%= userService.createLoginURL(request.getRequestURI()) %>">Sign in</a>
to include your name with podcasts you post.</p>
<%
    }
%>

<%
    DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
    Key podlistKey = KeyFactory.createKey("Podlist", podlistName);
    // Run an ancestor query to ensure we see the most up-to-date
    // view of the Greetings belonging to the selected Podlist.
    Query query = new Query("Podcast", podlistKey).addSort("date", Query.SortDirection.DESCENDING);
    List<Entity> podcasts = datastore.prepare(query).asList(FetchOptions.Builder.withLimit(5));
    if (podcasts.isEmpty()) {
        %>
        <p>Podlist '${fn:escapeXml(podlistName)}' has no items.</p>
        <%
    } else {
        %>
        <p>Items in Podlist '${fn:escapeXml(podlistName)}'.</p>
        <%
        for (Entity podcast : podcasts) {
            pageContext.setAttribute("podcast_url",
                                     podcast.getProperty("podcast_url"));
            if (podcast.getProperty("user") == null) {
                %>
                <p>An anonymous person wrote:</p>
                <%
            } else {
                pageContext.setAttribute("podcast_user",
                                         podcast.getProperty("user"));
                %>
                <p><b>${fn:escapeXml(podcast_user.nickname)}</b> wrote:</p>
                <%
            }
            %>
            <blockquote>${fn:escapeXml(podcast_url)}</blockquote>
            <form action="/delete" method="post">
              <div><input type="submit" value="Delete Podcast" /></div>
              <input type="hidden" name="podlistName" value="${fn:escapeXml(podlistName)}"/>
              <!-- not sure what to put here to give a reference to this entity-->
              <input type="hidden" name="podcast_id" value="$??"/>
            </form>
            <%
        }
    }
%>

    <form action="/add" method="post">
      <div><textarea name="podcast_url" rows="3" cols="60"></textarea></div>
      <div><input type="submit" value="Post Podcast" /></div>
      <input type="hidden" name="podlistName" value="${fn:escapeXml(podlistName)}"/>
    </form>

  </body>
</html> 
```

这是我的 Servlet：

```
package com.aol.sharepodder;

import java.io.IOException;
import java.util.Date;
import java.util.UUID;
import java.util.logging.Logger;

import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.google.appengine.api.datastore.DatastoreService;
import com.google.appengine.api.datastore.DatastoreServiceFactory;
import com.google.appengine.api.datastore.Entity;
import com.google.appengine.api.datastore.Key;
import com.google.appengine.api.datastore.KeyFactory;
import com.google.appengine.api.users.User;
import com.google.appengine.api.users.UserService;
import com.google.appengine.api.users.UserServiceFactory;

public class AddPodcastServlet extends HttpServlet {
    private static final Logger log = Logger.getLogger(AddPodcastServlet.class.getName());

    public void doPost(HttpServletRequest req, HttpServletResponse resp)
                throws IOException {
        UserService userService = UserServiceFactory.getUserService();
        User user = userService.getCurrentUser();

        String podlistName = req.getParameter("podlistName");
        Key podlistKey = KeyFactory.createKey("Podlist", podlistName);
        String podcast_url = req.getParameter("podcast_url");
        Date date = new Date();
        Entity podcast = new Entity("Podcast", podlistKey);
        podcast.setProperty("user", user);
        podcast.setProperty("date", date);
        podcast.setProperty("podcast_url", podcast_url);

        DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
        datastore.put(podcast);

        resp.sendRedirect("/podlist.jsp?podlistName=" + podlistName);
    }
} 
```

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T16:39:59.390

看来您已经在使用“podcast_id”了——那么为什么不在请求中将它传递给`/delete`处理程序呢？

```
podcast.getProperty("podcast_id") 
```

我们似乎很难告诉您需要传递什么，因为它是您的应用程序 - 但您可能想要传递一个唯一引用实体的参数（无论是“key”、“podcast_id”等）。GAE 中的每个实体都有一个唯一的密钥。

# c# - 实现一个按钮来执行文件菜单项的功能

> ID：12322113
> 
> 赞同：2
> 
> 时间：2012-09-07T16:35:24.977
> 
> 标签：c#, .net, user-interface

我有一个菜单项`File -> Export`。当我选择该菜单项时，会出现一个导出对话框。

我想在不同的视图（例如主页、摘要等）中实现一个按钮，该按钮基本上具有与`File -> Export`. 文件菜单项可在任何视图下访问。

我注意到这些功能有以下几点：`function_Click(object sender, EventArgs e)`

我宁愿不重新散列代码。我考虑过创建一个新实例，然后传递参数，但是通过按钮`sender`与`e`通过文件菜单不同。

**当前视图是否可以通过按钮访问文件菜单项（`File -> Export`）？**仅具有隐式访问文件菜单项的功能将是理想的……对于像最终结果这样简单的事情，参数传递会变得混乱。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T16:38:12.493

通常，您不会使用按钮或菜单单击的发送者和事件参数。因此，您通常可以只拥有一个所有事件处理程序都引用的方法，即： `ExportFile()`，并从每个事件处理程序中调用它。

这样，就没有重复的（真实的）代码，因为每个事件处理程序都只调用一个共享的方法。

# macos - 如何从mac终端打开一个窗口

> ID：12322117
> 
> 赞同：6
> 
> 时间：2012-09-07T16:35:38.137
> 
> 标签：macos, emacs, terminal

这是我第一次在 stackoverflow 上提问，因为我在任何地方都找不到答案。我使用 emacs 编写我所有的代码，我刚刚从 ubuntu 切换到 mac os。一个问题一直困扰着我：如何从 mac 终端打开 emacs 窗口，就像在 Linux 系统上从终端打开 firefox 窗口一样？我知道它适用于 Linux 系统的方式是，每当您从终端键入命令时，终端都会在您的 PATH 中搜索二进制文件并执行它。Mac是否只能在“/Application”目录下以窗口形式打开应用程序，并且从终端打开的所有二进制文件都是非窗口形式？非常感谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T23:08:34.847

OS X 附带的预安装 Emacs 是在没有 GUI 的情况下构建的。因此

```
$ emacs   # in the shell/terminal 
```

不会*打开*图形窗口，而是打开文本/终端版本。请注意，此版本（安装于`/usr/bin/emacs`）也很旧，在 Mountain Lion 中为 22.1.1。

要获得您想要的行为（并且还可以获得最新版本的 Emacs 作为奖励），您可以下载最新的 Emacs 构建。这可以在各个地方获得，包括[http://emacsforosx.com/](http://emacsforosx.com/)。

大多数这些预构建的 Emacs 都安装在 下`/Applications`，为了从终端调用，您需要指定二进制文件的完整路径，通常是：

```
 /Applications/Emacs.app/Contents/MacOS/Emacs 
```

您可以在`.bashrc`as 中为此二进制文件创建一个简单的别名：

```
 alias emacs=/Applications/Emacs.app/Contents/MacOS/Emacs 
```

然后从命令行充分调用 emacs。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-19T22:10:53.983

我建议要么通过 fink 获取 emacs，要么去这里：[http ://emacsformacosx.com/](http://emacsformacosx.com/)

这将允许您安装通过 X 服务器运行的本地版本的 emacs，因此具有完整的 GUI 界面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-19T22:48:56.563

首先，从这里下载 Mac OS/X emacs 构建：http: [//emacsformacosx.com/](http://emacsformacosx.com/)

其次，安装后，您可以：

1.  从命令行打开它`open -a emacs`
2.  在您的 .emacs init 中将其设置为运行服务器模式，然后在命令行类型`emacsclient foo`为 file `foo`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T16:41:40.457

不确定你是否正在寻找这样的东西

打开 /path/to/some.app

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-07T16:41:49.540

我刚试过

> /Applications/Utilities/Terminal.app/Contents/MacOS/Terminal &

它确实打开了一个新窗口就好了。

OS X 10.7.4 在这里。

编辑：确实，如果我尝试：

> 打开 /Applications/Utilities/Terminal.app

没有打开新的终端窗口

但，

> 打开 --new /Applications/Utilities/Terminal.app

也可以，并且可能比我的第一个选项更好，因为该工作与您启动新终端的终端无关。

# ckeditor - 表格对话框中背景重复的重复无重复值

> ID：12322118
> 
> 赞同：0
> 
> 时间：2012-09-07T16:35:40.377
> 
> 标签：ckeditor, wysiwyg, background-repeat

我正在使用 CKEditor 并且遇到了背景属性的无重复值被复制的问题。

脚步

*   插入表格
*   右键单击，表属性，然后转到高级选项卡
*   插入*背景重复：不重复；*在样式框中

当您保存并返回时，它实际上有*background-repeat:no-repeat no-repeat*；

这似乎只发生在表属性上。例如，它在 DIV 上工作得很好（单个无重复值）。我向 ckeditor 人员提交了一个错误以解决，但我不确定这可能需要多长时间才能解决。我的版本是 3.6.1，但我可以在 ckeditor.com/demo 网站以及他们最新的夜间版本上复制它。

有没有人遇到过这个问题并解决了这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:53:07.937

这确实是 ckeditor 中的一个错误，只发生在 webkit 中。他们能够重现它，并且应该在未来的版本中修复。

# windows-phone-7 - 在获取 NavigationContext.QueryString 时在页面加载时获取 NullReferenceException

> ID：12322119
> 
> 赞同：1
> 
> 时间：2012-09-07T16:35:46.630
> 
> 标签：windows-phone-7

我使用 MVVM 模式来开发我的 Windows 应用程序。当用户单击我的列表框用户控件上的项目时。视图模型后面的代码将导航另一个页面。页面显示正确，但问题是当我想从导航上下文中获取 queryString 时出现错误 - “NullReferenceException”。我检查了我的视图模型上的 uri 是否已更正。有人会告诉我如何让它工作吗？提前致谢。

我参考[An error is occurred when we use navigation to move other page](https://stackoverflow.com/questions/6830123/an-error-is-occur-when-we-use-navigation-to-move-other-page) to add the following code on App.xamls.cs page,所以viewModel页面可以导航另一个页面。

```
 public static PhoneApplicationFrame CurrentRootVisual
    {
        get
        {
            return (App.Current.RootVisual as PhoneApplicationFrame);
        }
    }

    public static bool Navigate(Uri source)
    {
        if (CurrentRootVisual != null)
            return CurrentRootVisual.Navigate(source);

        return false;
    }

    public static void GoBack()
    {
        if (CurrentRootVisual != null)
            CurrentRootVisual.GoBack();
    } 
```

viewModel 上有用于导航页面的代码：

```
 private void ShowCallPage()
        {
            if (m_CurrentQueue != null)

                App.Navigate(new Uri("/PivotPage1.xaml?id=" + m_CurrentQueue.callNumber, UriKind.Relative));

        } 
```

在另一页上有我收到错误的代码：

```
 public PivotPage1()
    {
        InitializeComponent();
        MessageBox.Show(NavigationContext.QueryString.ContainsKey("id").ToString());            

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:46:54.603

不要访问 PivotPage1 构造函数上的 NavigationContext 对象，而是使用 Loaded 事件。

# jquery - 使用 JQuery 动态加载图像

> ID：12322127
> 
> 赞同：0
> 
> 时间：2012-09-07T16:36:06.700
> 
> 标签：jquery, asp.net-mvc-3

我有一个场景，我让用户在我的网页上选择要上传到他/她的用户个人资料的图像。我正在为我的网站使用 .net 的 MVC3 架构。我需要的是在他选择他想要的图像之后但在我将其存储在数据库中之前，图像显示在页面上。我四处搜寻并最终尝试了这个，我的一个朋友说这对他有用：

在我尝试的视图中：

```
<div class="floatRight">
    <a onclick="opendialogbox('imageLoad2');" style="cursor: pointer">Photo</a>
    <img src="… " width="16" height="16" id="imgThumbnail2" alt="photo" />
    <input type="file" name="imageLoad2" accept="image/*" id="imageLoad2" onchange="ChangeImage('imageLoad2','#imgThumbnail2')" hidden="hidden" />
</div>

<script type="text/javascript">
    function opendialogbox(inputid) {
        document.getElementById(inputid).click();
    }

function ChangeImage(fileId, imageId) {
        var ext = document.getElementById(fileId).value.match(/\.(.+)$/)[1];
        switch (ext.toLowerCase()) {
            case 'jpg':
            case 'bmp':
            case 'png':
            case 'gif':
            case 'jpeg':
                {
                    var myform = document.createElement("form");
                    myform.style.display = "none";
                    myform.action = "/ImagePreview/AjaxSubmit";
                    myform.enctype = "multipart/form-data";
                    myform.method = "post";
                    var imageLoad;
                    var imageLoadParent;
                    //test browser used then submit form
                    $(myform).ajaxSubmit({ success:
                        function (responseText) {
                            var d = new Date();
                            $(imageId)[0].src = "/ImagePreview/ImageLoad?a=" + d.getMilliseconds();
                            if (document.all || is_chrome)//IE
                                imageLoadParent.appendChild(myform.firstChild);
                            else//FF                     
                                document.body.removeChild(myform);
                        }
                    });
                }
                break;
            default:
                alert('Error, please select an image.');
        }

    }

</script> 
```

在控制器中我尝试过：

```
[AcceptVerbs(HttpVerbs.Post)]
        public ActionResult AjaxSubmit(int? id)
        {
            Session["ContentLength"] = Request.Files[0].ContentLength;
            Session["ContentType"] = Request.Files[0].ContentType;
            byte[] b = new byte[Request.Files[0].ContentLength];
            Request.Files[0].InputStream.Read(b, 0, Request.Files[0].ContentLength);
            Session["ContentStream"] = b;
            HttpPostedFileBase file = Request.Files[0];
            string myFilePath = Server.MapPath(Url.Content("~/Content/themes/base/images/Auxiliar.png"));
            file.SaveAs(myFilePath);
            return Content(Request.Files[0].ContentType + ";" + Request.Files[0].ContentLength);
        }

        public ActionResult ImageLoad(int? id)
        {
            byte[] b = (byte[])Session["ContentStream"];
            int length = (int)Session["ContentLength"];
            string type = (string)Session["ContentType"];
            Response.Buffer = true;
            Response.Charset = "";
            Response.Cache.SetCacheability(HttpCacheability.NoCache);
            Response.ContentType = type;
            Response.BinaryWrite(b);
            Response.Flush();
            Response.End();
            Session["ContentLength"] = null;
            Session["ContentType"] = null;
            Session["ContentStream"] = null;
            return Content("");
        } 
```

现在我认为这一切都是有道理的，但是当我在我的网站上尝试它时，该方法永远不会到达服务器（我在控制器中两种方法的开头都放置了一个断点）。我还使用了 firefox 的 firebug 来跟踪页面上的脚本，直到它到达该行：

```
$(myform).ajaxSubmit({ success:
                        function (responseText) {
                            var d = new Date();
                            $(imageId)[0].src = "/ImagePreview/ImageLoad?a=" + d.getMilliseconds();
                            if (document.all || is_chrome)//IE
                                imageLoadParent.appendChild(myform.firstChild);
                            else//FF                     
                                document.body.removeChild(myform);
                        }
                    }); 
```

在这里它继续但从未进入成功条件。我认为页面上包含的 JQuery 版本可能有问题，并注意到我的朋友网站包括：jquery-1.5.1.min.js、jquery-1.3.2.js 和 jquery_form.js

我将这些添加到我的网站（使用 jquery-1.7.2.min.js），但问题仍然存在。不确定包含各种版本的 jquery 是否会导致与方法发生某种冲突，或者问题是否出在其他地方。

对于此事，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T16:47:31.020

唐尼，仍然很难推断出问题所在，但是您可以采取一些措施来确定问题的确切性质。

首先，您正在处理成功条件，但您还需要使用与上面写的类似的匿名函数来处理错误条件。 [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)对此有一些信息，但基本上你要写：

```
$(myform).ajaxSubmit({ success: function (responseText) {
                                  // your success method
                                },
                       error: function (responseText) {
                                  // your error method
                                }
                }); 
```

接下来，FireBug 很棒，但您还想使用它的网络监控功能，而不仅仅是脚本调试器。很可能有一个非常相关的 500 或 404 回到那里，而您不知道。

如果是 404，则可能与此行有关：

```
myform.action = "/ImagePreview/AjaxSubmit"; 
```

我通常新建一个 var 并让 MVC 像这样构建我的操作 url：

```
var actionUrl = '@Url.Action("Action", "Controller")' 
```

作为最佳实践，我通常会将此 URL 作为我的视图模型的一部分注入，或者将其存储在视图中的隐藏字段中，但这也可以。

希望这些提示对一些人有所帮助。干杯。

# iphone - UIKeyboardWillHide 未触发

> ID：12322137
> 
> 赞同：3
> 
> 时间：2012-09-07T16:37:11.513
> 
> 标签：iphone, ios, notifications, uikeyboard

我在这里阅读了很多关于这个主题的帖子，但我无法找到我的问题的答案，所以，希望你不会对另一个 UIKeyboard 帖子感到无聊:-)

在我的视图控制器的实现中，我添加`self`了两个通知的观察者`UIKeyboardWillShowNotification`和`UIKeyboardWillHideNotification`，传递选择器`keyboardWillShow:`并`keyboardWillHide:`处理通知。当我触摸 a`UITextField`时，会调用该`keyboardWillShow:`方法，但是当我按下“完成”按钮（关闭键盘）时，`keyboardWillHide:`不会调用该方法。

真的，我想`UITextField`用键盘右下角的“隐藏按钮”让我的显示器成为一个键盘，但我找不到正确的键盘类型。也许我需要将文本字段 retuntype 设置为“...完成”。这样，我看到“返回”键变成“完成”。

所以我将工具栏设置为我`UITextField`的`inputAccessoryView`，所以现在我可以显示一个标准键盘，上面有一个工具栏，上面有“完成”按钮。当用户触摸该按钮时，我使用该`resignFirstResponder`方法隐藏键盘。

奇怪的是，当我打电话时`resignFirstResponder`，`UIKeyboardWillHideNotification`没有发布；至少`keyboardWillHide:`没有调用该方法。

你对我有什么建议？我真的很想用带有向下箭头的小按钮显示一个键盘来隐藏键盘，但这个解决方案也可能是正确的，但我想调整视图的大小并为此我需要观察者`UIKeyboardWillHideNotification`。

非常感谢您的帮助...

（添加：）

在`viewDidLoad`：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(keyboardWillShow:)
                                             name:UIKeyboardWillShowNotification
                                           object:[[self view] window]];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(keyboardWillHide:)
                                             name:UIKeyboardWillHideNotification
                                           object:[[self view] window]]; 
```

我从“你的”帖子中获取了这些声明:-) 但是 willShow 有效......

`UIToolbar`分配为`inputAccessoryView`我的文本字段的“完成”按钮的操作是：

```
-(void)keyboardDone {
    [msgTextField resignFirstResponder]; 
```

关闭：好的！当开发人员很愚蠢时......它很愚蠢:-) :-)

这是我更正后的 willHide 方法：

```
-(void)keyboardWillHide:(NSNotification*)n {
    NSDictionary* userInfo;
    CGSize keyboardSize;
    CGRect viewFrame;

    /* This was the bad guy :) I forgot to delete it
     * after I previously copied the willShow method that
     * checks if keyboard is already shown (if so returns).
     *
     * if( keyboardIsShown )
     *   return;
     */
    userInfo = [n userInfo];
    keyboardSize = [[userInfo objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;
    viewFrame = [[self scrollView] frame];
    viewFrame.size.height += ( keyboardSize.height - TABBAR_HEIGHT );

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:0.5];
    [[self scrollView] setFrame:viewFrame];
    [UIView commitAnimations];

    keyboardIsShown = NO;
    NSLog(@"HIDE\n");
} 
```

首先，我要感谢大家为帮助我所做的无用工作。我想给你一些分数，所以我会尝试为每个答案增加一个“兴趣点”，但我需要选择正确的......困难的部分...... :-)

再次打扰一下……我真的没有看到 if() 语句……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T19:08:13.110

如果您阅读文档，`UIWindow`它会说这些通知的通知对象是`nil`. 您将`self.view.window`作为对象传递给该`addObserver:selector:name:object:`方法。尝试通过`nil`：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(keyboardWillShow:)
                                             name:UIKeyboardWillShowNotification
                                           object:nil;
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(keyboardWillHide:)
                                             name:UIKeyboardWillHideNotification
                                           object:nil]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-26T03:52:45.837

需要注意的是，当用户通过隐藏按钮隐藏软件键盘时，不会调用隐藏方法。再次调用 show 方法，但除了主行工具栏外，键盘几乎不在屏幕上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T21:41:04.160

检查是否`keyboardDone`真的被调用（即使用`NSLog(@"%@", @"keyboard done called");`）。如果它被调用，但 resignFirstResponder 无助于关闭键盘，那么试试这个：

`[self.view endEditing:YES];`

也请提供您的`keyboardWillHide:`方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T22:29:18.043

要设置键盘以使其具有“完成”按钮，请执行以下操作：

1) 设置您的视图控制器，使其实现 UITextFieldDelegate。例如：

```
#import <UIKit/UIKit.h>

@interface TX_ViewController : UIViewController <UITextFieldDelegate>

@property (nonatomic, retain) IBOutlet UITextField *textField;

@end 
```

2) 在您的视图控制器实现文件中，使用以下代码设置键盘：

```
- (void)viewDidLoad
{
    [self.textField setDelegate:self];
    [self.textField setReturnKeyType:UIReturnKeyDone];
    [self.textField addTarget:self action:@selector(textFieldFinished:) forControlEvents:UIControlEventEditingDidEndOnExit];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
} 
```

3) 如果您希望在`DONE`按下按钮时执行某些操作，只需将以下函数添加到视图控制器的实现文件中：

```
- (IBAction)textFieldFinished:(id)sender
{
    [sender resignFirstResponder];
} 
```

此外，如果您使用 Interface builder 创建接口，请不要忘记为 TextField 设置 IBOutlet 引用；否则，您的班级将不会收到来自 XIB 的消息。

我在一个示例应用程序中进行了设置，只是为了查看它是否工作以及它是否按照您希望应用程序执行的方式执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-25T18:21:22.063

**斯威夫特 $**

```
NotificationCenter.default.addObserver(self, selector: #selector(self.keyboardWillHide), name: NSNotification.Name.UIKeyboardWillHide, object: nil)

func keyboardWillHide(notification: NSNotification){
     print("keyboardWillHide")
} 
```

# jquery - jquery清除所有输入字段的值，除了一个

> ID：12322138
> 
> 赞同：4
> 
> 时间：2012-09-07T16:37:15.380
> 
> 标签：jquery, loops

我正在尝试编写一个脚本来清除除一个之外的所有输入字段的值。此脚本仍在清除说明输入字段。

```
jQuery('.campaign-column').not('active').each(function(index){
    if(jQuery('.campaign-column input[name!="DESCRIPTION"]')){
        jQuery(this+':input').val('');
        }
    }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T16:38:35.380

简化：

```
$('.campaign-column:not(.active) input:not([name="DESCRIPTION"])').val('') 
```

我假设您的意思是`.not('.active')`而不是`.not('active')`，因为 HTML 中没有`<active>`元素。请注意，原始代码中的循环 ( `.each()`) 毫无意义，因为每次迭代都会一遍又一遍地选择相同的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T16:48:44.490

在这种情况下，您不需要编写每个循环.. 试试这个

```
$(function(){
    // Select all text fields but not Description field..   

    var $txtfields = $('.campaign-column:not(.active)').find('input[type=text][name!=DESCRIPTION]')

    $('#btn1').on('click', function() {
       $txtfields.val('')  ;
    });
});​ 
```

检查此[FIDDLE](http://jsfiddle.net/sushanth009/wh3W7/)以获取工作示例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-04T11:02:19.473

```
$("input").each(function() {
    if($(this).attr('id') != 'source_url'){
        $(this).val('');
    }
}); 
```

# java - Java 监视服务似乎重新创建已删除的文件。到底是怎么回事？

> ID：12322143
> 
> 赞同：6
> 
> 时间：2012-09-07T16:37:34.920
> 
> 标签：java, windows, multithreading, debugging, filesystems

当 WatchService 监视的目录被删除时，其父目录不会立即在其 File 的 listFiles 方法中反映删除，[因此](http://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html)[无法](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles%28%29)删除。在整个服务被明确[停止](http://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html#close%28%29)之前，父级的后果似乎是：

1.  删除非空目录的[推荐递归解决方案失败。](https://stackoverflow.com/questions/779519/delete-files-recursively-in-java)
2.  正常终止时未执行[deleteOnExit](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#deleteOnExit%28%29)
3.  调用[删除](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#delete%28%29)返回 false 并且对文件系统没有影响。

为了演示，这个测试代码：

```
import java.io.*;
import java.nio.file.*;

class DirectoryTester { 
  static WatchService watcher; 
  static {
    try{watcher = FileSystems.getDefault().newWatchService();} 
    catch (IOException e) {e.printStackTrace();}
  }

  public static void main(String[] args) throws IOException {
    String SEPARATE = System.getProperty("file.separator");
    String testDirName = System.getProperty("user.dir") + SEPARATE + "testDir";
    String subDirName = testDirName + SEPARATE + "subDir";
    String fileName = subDirName + SEPARATE +"aFile";
    create(fileName);
    Paths.get(subDirName).register(watcher, StandardWatchEventKinds.ENTRY_DELETE);
    delete(new File(testDirName));
  }

  static void create(String nameOfFile) throws IOException {
    new File(nameOfFile).getParentFile().mkdirs();
    Files.createFile(Paths.get(nameOfFile));
    System.out.println("Created " + nameOfFile);
  }     

  static void delete(File toDelete) throws IOException {
    if (toDelete.isDirectory())
      for (File c : toDelete.listFiles()) 
        delete(c);
    int numContainedFiles = toDelete.listFiles() != null ? toDelete.listFiles().length : 0;
    if (!toDelete.delete()) {
      System.out.println("Failed to delete " + toDelete + " containing " + numContainedFiles);
    }
    else {
      System.out.println("Deleted " + toDelete + " containing " + numContainedFiles);
    }
  }  
} 
```

在 windows 上给出以下输出，这对应`testDir`于文件系统上没有被删除。

```
Created C:\Dropbox\CodeSpace\JavaTestbed\src\testDir\subDir\aFile
Deleted C:\Dropbox\CodeSpace\JavaTestbed\src\testDir\subDir\aFile containing 0
Deleted C:\Dropbox\CodeSpace\JavaTestbed\src\testDir\subDir containing 0
Failed to delete C:\Dropbox\CodeSpace\JavaTestbed\src\testDir containing 1 
```

如果我在删除后放置一个断点，`subDir`我可以看到它实际上已在文件系统上被删除。从断点恢复会导致最后一次删除成功，这表明这可能是监视服务线程所做更改的可见性的问题。有谁知道这里发生了什么，如果它是一个错误？我实际上想要做的是删除受监视的目录而不停止对其他目录的监视，因为 API 似乎没有提供取消注册路径方法，还有什么其他标准的 Java 方法可以实现这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T17:09:19.263

可能相关：

[http://bugs.sun.com/view_bug.do?bug_id=6972833](http://bugs.sun.com/view_bug.do?bug_id=6972833)

> WatchService 对每个被监视的目录都有一个打开的句柄。如果删除了一个监视目录，则 WatchService 关闭句柄，以便可以从父目录中删除目录条目。期望能够立即删除父目录的实用程序和应用程序会出现问题，因为监视服务可能需要几毫秒才能获得通知并关闭句柄。如果在此期间该工具尝试删除父目录，那么它将失败。我们目前没有解决此问题的方法。

# php - 从两个表中选择不匹配的记录

> ID：12322148
> 
> 赞同：3
> 
> 时间：2012-09-07T16:38:06.860
> 
> 标签：php, mysql

我需要一个 Mysql 查询来解决我的以下问题。

我有两张桌子。

1.  **带有字段**id**和**考试名称的****考试****

***   **Exam_Applied**字段**id**、**examname**和**student_id**** 

 **这里**student_id**是申请考试的学生的 id，我存储在**Exam_Applied**

现在我需要一个查询来**从特定的 student_id 未应用的表考试中选择考试名称**

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T16:40:01.147

你可以`NOT IN`用来回答你的问题。基本上它的作用是在子查询中，它***获取`examname`特定 student 的***所有内容。`NOT IN`检查表`Exam`上不存在的表的考试名称`Exam_Applied`

```
SELECT  id, examName
FROM    Exam
WHERE   examName NOT IN
        (
            SELECT examName
            FROM Exam_Applied
            WHERE Student_ID = 'idHERE'
        ) 
```

希望这是有道理的

![在此处输入图像描述](../Images/93ade274bc045c3f9cc5bcd3ee37acb8.png)**

# heroku - Heroku - DNSimple 配置

> ID：12322150
> 
> 赞同：4
> 
> 时间：2012-09-07T16:38:25.780
> 
> 标签：heroku, dns, ssl-certificate, dnsimple

尝试设置 SSL 以在 mydomain.com 上工作。在 Heroku 文档之后，我设法让 SSL 在[https://secure.mydomain.com](https://secure.mydomain.com)上运行。然而，当我添加 SSL 时由 heroku 创建的实际端点仍然在说

```
**Heroku | No such app**

There is no app configured at that hostname.
Perhaps the app owner has renamed it, or you mistyped the URL. 
```

**对于如何让tokyo-2121.herokussl.com**指向我在 Heroku 上的实际应用程序，我有点困惑。

```
emet:myapp vezu$ heroku certs
Endpoint                  Common Name(s)         Expires                   Trusted
------------------------  ---------------------  ------------------------  -------
tokyo-2121.herokussl.com  secure.mydomain.com  2013-09-09 12:28:05 CEST     True 
```

然后

```
emet:myapp vezu$ heroku certs:info
Fetching information on SSL endpoint tokyo-2121.herokussl.com... done
Certificate details:
    subject: /serialNumber=htilpsjjgrrlhyVZ8rbeandz78555bgpWx/FDEVd/OU=GT166968518/OU=See www.rapidssl.com/resources/cps (c)12/OU=Domain Control Validated - RapidSSL(R)/CN=secure.mydomain.com
    start date: 2012-09-06 12:38:54 CEST
    expire date: 2013-09-09 12:28:05 CEST
    common name(s): secure.mydomain.com
    issuer: /serialNumber=htilpsjjgrrlhyVZ8rbeandz78555bgpWx/FDEVd/OU=GT166968518/OU=See www.rapidssl.com/resources/cps (c)12/OU=Domain Control Validated - RapidSSL(R)/CN=secure.mydomain.com
    SSL certificate is verified by a root authority. 
```

我假设这意味着我已经正确安装了 SSL。我的 dnsimple 配置看起来像这样

```
Type    Name                     TTL          Points to 
ALIAS   mydomain.com             3600         proxy.herokuapp.com   
CNAME   secure.mydomain.com  600          tokyo-2121.herokussl.com  
CNAME   www.mydomain.com     3600         proxy.herokuapp.com   
MX          mydomain.com             600          mx00.1and1.co.uk (P:10)   
MX          mydomain.com             600          mx01.1and1.co.uk (P:20) 
```

如何让端点**tokyo-2121.herokussl.com**链接到我的应用程序？我应该在我的应用程序的任何地方添加它吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-11T12:15:06.257

听起来您已经正确配置了 SSL 端点，但没有告诉 Heroku 您将使用哪个域。此错误消息实际上来自 Heroku 内部，这意味着在键入主机名时，您将被定向到正确的位置，但 Heroku 无法识别主机名，因此无法确定要服务的站点。

你需要看一下`heroku domains`命令。

您可以使用以下方式列出域：

```
heroku domains 
```

如果域没有出现在列表中，那么您需要添加它。您可以使用以下方法执行此操作：

```
heroku domains:add secure.mydomain.com 
```

这会将域添加到您的 Heroku 应用程序，以便 Heroku 服务器为您的站点提供对该主机名的任何请求。

# installation - 安装文件从 install4j 损坏

> ID：12322155
> 
> 赞同：0
> 
> 时间：2012-09-07T16:38:48.137
> 
> 标签：installation, corrupt, install4j

install4j 的多平台安装程序多年来一直运行良好。现在出乎意料的是，我们收到了一个错误弹出对话框，`The installation file is corrupted. If it is a download please try again.`它已经安装了大约 19MB 和 164MB，最后一个没有写入的文件是一个小 jar，现在已经在构建中一段时间​​了。

在作为测试构建后立即运行完整安装程序时，我们会收到此错误。我们还构建了几个“伴侣”应用程序，这些应用程序具有所有相同的文件，只是启动选项不同，其安装程序运行良好。

我们在批处理模式下使用 install4j： install4j 版本：5.0.8 (build 5311)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T19:53:09.033

您是否在最新的 Mac OS 上运行它？如果是这样，那么这是因为 Apple 最新的 Gatekeeper “功能”，您需要签署您的代码：http: [//support.apple.com/kb/HT5290](http://support.apple.com/kb/HT5290)

# ruby - 如何重建 gem 的补丁版本？

> ID：12322160
> 
> 赞同：4
> 
> 时间：2012-09-07T16:39:13.127
> 
> 标签：ruby, rubygems, gem

只是想学习如何在没有 gemspec 的情况下重建 ruby​​ 的 gem：

例如尝试为 Gosu 库创建固定 gem：

1.  下载 gem`gem fetch gosu`
2.  提取宝石的内容`gem unpack gosu-0.7.45.gem`
3.  应用补丁：`cd gosu-0.7.45 && patch -p1 /path/to/patch/fix_cflags.patch`
4.  **？？？如何从修改后的来源重建 gem？我找不到原始的 gemspec。**

任何的想法 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T19:49:24.813

回答我自己的问题：

4a。提取gemspec文件`gem unpack --spec <gem archive>`

4b。从源代码树的顶部重建更新的 gem`gem build /path/to/<gemspec>`

# java - 即使不再编译客户端项目，Java 接口也可以更改吗？

> ID：12322166
> 
> 赞同：2
> 
> 时间：2012-09-07T16:39:49.693
> 
> 标签：java

我正在尝试更改 Proj2 中的界面。但是，Proj1 已经在使用这个接口，并且不会与我的新版本一起编译。

看起来只有当我更改/删除现有方法但添加新方法似乎不会导致任何问题时才会出现问题。

因此，只要我只向接口“添加”方法，我就可以期待 Proj1 与最新的 Proj2 Jar 兼容。

这是一个坚如磐石的安全假设吗？

更新：接口和 impl 都驻留在 proj2 中。Proj1 没有该接口的实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T17:01:26.927

通过“使用”，您的意思是“使用接口引用对象并使用该引用调用接口定义的方法”，而不是“实现接口”（是的，您已经在评论中澄清了，但我只想重复一遍，因为所有其他答案是关于实现接口）。

在这种情况下，只要您没有从接口中删除方法或更改其签名，您现有的代码就可以工作。

这将起作用的原因是编译器将方法调用转换为调用[接口](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.invokeinterface)字节码，该字节码通过名称引用接口类和方法。在*运行时*，JVM 只是验证实际引用是否实现了接口，并调用方法。

如果*删除*或*更改*引用的接口方法，将发生以下两种情况之一：JVM 将拒绝加载 proj1 中的类，因为无法解析接口引用，或者它会给出一个`NoSuchMethodError`（我相信是第二个） . 如果您删除或更改具体类中的引用方法，也是如此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T16:42:25.733

不可以。向接口添加新方法或更新其当前签名将要求您在已实现接口的类中提供这些方法的实现。

但是，当您从接口中删除特定方法声明时，*即使它是在实现该接口的类中定义的*，也不会产生任何影响。删除的方法只是作为类的普通方法，不再与接口的现有契约绑定。

我能想到的解决您的问题的唯一方法是利用 Java 让您为给定的类实现多个接口。你应该尝试做的是创建一个新接口，在这里定义你的新方法，让你在 proj2 中的类也实现这个接口。这样，当您打包新 jar 时，proj1 中现有的类将不受影响。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T16:47:11.317

如果您只是添加方法，请创建第二个接口。Java 类可以实现多个接口。这样，实现 Interface1 的类保持不变。

您较新的类实现接口 Interface1 和 Interface2。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T16:46:15.343

你会得到错误：

```
The type XXXImpl must implement the inherited abstract method IXXX.method() 
```

# svn - svn 也 ws 显示绿色复选框

> ID：12322172
> 
> 赞同：0
> 
> 时间：2012-09-07T16:40:05.050
> 
> 标签：svn, tortoisesvn

在所有系统上，我看到文件和文件夹图标始终显示绿色复选框。当其他人修改或提交文件时，它不会变为红色或黄色或锁定图标。它只处理我在本地打开或修改的文件。当我提交其他人的文件状态时，它们不会更改，并且它们必须始终在开始项目之前进行更新。但我的经验表明，我只会更新那些图标为非绿色的文件，而其他我不需要更新。有人可以告诉我这是否是 svn 存储库或乌龟 svn 中的设置有问题。万分感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T11:18:00.873

Subversion 的工作周期是进行初始检查，然后在一个循环中工作，类似于编辑 -> 更新 -> 提交 -> 编辑 -> 更新 -> 提交 -> 等。因为 svn 是基于开发人员进行并发编辑- 默认情况下没有文件锁定 - 更新应该始终适用于所有文件（在您正在工作的“分支”中）。

TortoiseSVN 使用图标来指示本地文件夹中文件的当前状态——即它反映了您所做的编辑的结果。

要使用命令行将本地 repo 的状态与服务器进行比较，请执行以下操作：

```
svn status -u 
```

要使用 tortoise 执行相同操作，请选择“检查修改”（基本上会显示与图标相同的内容），然后单击“检查存储库”按钮。

# hibernate - CGLIB 增强失败：参数类型不匹配

> ID：12322174
> 
> 赞同：3
> 
> 时间：2012-09-07T16:40:17.953
> 
> 标签：hibernate, cglib, type-mismatch

我收到以下错误：

```
Caused by: org.hibernate.HibernateException: CGLIB Enhancement failed: sk.statistics.isis.conceptsvocab.jpa.entities.VocabDomain
at org.hibernate.proxy.pojo.cglib.CGLIBLazyInitializer.getProxy(CGLIBLazyInitializer.java:119)
at org.hibernate.proxy.pojo.cglib.CGLIBProxyFactory.getProxy(CGLIBProxyFactory.java:72)
at org.hibernate.tuple.entity.AbstractEntityTuplizer.createProxy(AbstractEntityTuplizer.java:402)
at org.hibernate.persister.entity.AbstractEntityPersister.createProxy(AbstractEntityPersister.java:3483)
at org.hibernate.event.def.DefaultLoadEventListener.createProxyIfNecessary(DefaultLoadEventListener.java:298)
at org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:219)
at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:126)
at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:905)
at org.hibernate.impl.SessionImpl.internalLoad(SessionImpl.java:873)
at org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:590)
at org.hibernate.type.EntityType.resolve(EntityType.java:412)
at org.hibernate.engine.TwoPhaseLoad.initializeEntity(TwoPhaseLoad.java:139)
at org.hibernate.loader.Loader.initializeEntitiesAndCollections(Loader.java:877)
at org.hibernate.loader.Loader.doQuery(Loader.java:752)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259)
at org.hibernate.loader.Loader.doList(Loader.java:2228)
at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2125)
at org.hibernate.loader.Loader.list(Loader.java:2120)
at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:401)
at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:361)
at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:196)
at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1148)
at org.hibernate.impl.QueryImpl.list(QueryImpl.java:102)
at sk.statistics.isis.conceptsvocab.adminmodule.services.impl.SubdomainsServiceImpl.getAllSubdomainLocalizationNamesForSpecificLocalization(SubdomainsServiceImpl.java:70)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy31.getAllSubdomainLocalizationNamesForSpecificLocalization(Unknown Source)
at sk.statistics.isis.conceptsvocab.adminmodule.ui.SubdomainsList.initContent(SubdomainsList.java:210)
at sk.statistics.isis.conceptsvocab.adminmodule.mainWindow.MainPanel.selectWindowToDisplay(MainPanel.java:63)
at sk.statistics.isis.conceptsvocab.adminmodule.mainWindow.MainPanel.access$0(MainPanel.java:50)
at sk.statistics.isis.conceptsvocab.adminmodule.mainWindow.MainPanel$MainPanelListener.valueChange(MainPanel.java:98)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.vaadin.event.ListenerMethod.receiveEvent(ListenerMethod.java:510)
... 26 more
Caused by: java.lang.IllegalArgumentException: argument type mismatch
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.hibernate.repackage.cglib.proxy.Enhancer.setCallbacksHelper(Enhancer.java:616)
at org.hibernate.repackage.cglib.proxy.Enhancer.setThreadCallbacks(Enhancer.java:609)
at org.hibernate.repackage.cglib.proxy.Enhancer.registerCallbacks(Enhancer.java:578)
at org.hibernate.proxy.pojo.cglib.CGLIBLazyInitializer.getProxyInstance(CGLIBLazyInitializer.java:129)
at org.hibernate.proxy.pojo.cglib.CGLIBLazyInitializer.getProxy(CGLIBLazyInitializer.java:116)
... 69 more 
```

Vocab域名列表：

```
/**
* The persistent class for the VOCAB_DOMAINS database table.
* 
*/
@Entity
@Table(name="VOCAB_DOMAINS")
public class VocabDomain implements Serializable {

/**
 * 
 */
private static final long serialVersionUID = 202977208021067034L;
private Long domainid;
private Long optlockversion;
private Set<VocabDomainsLoc> vocabDomainsLocs;
private Set<VocabSubdomain> vocabSubdomains;

public VocabDomain() {
}

@Id
@SequenceGenerator(name="VOCAB_DOMAINS_DOMAINID_GENERATOR", sequenceName="SEQ_DOMAIN_ID")
@GeneratedValue(strategy=GenerationType.SEQUENCE, generator="VOCAB_DOMAINS_DOMAINID_GENERATOR")    
public Long getDomainid() {
    return this.domainid;
}

public void setDomainid(Long domainid) {
    this.domainid = domainid;
}

@Version
public Long getOptlockversion() {
    return this.optlockversion;
}

public void setOptlockversion(Long optlockversion) {
    this.optlockversion = optlockversion;
}

//bi-directional many-to-one association to VocabDomainsLoc
@OneToMany(mappedBy="vocabDomain",fetch=FetchType.LAZY) 
public Set<VocabDomainsLoc> getVocabDomainsLocs() {
    return this.vocabDomainsLocs;
}

public void setVocabDomainsLocs(Set<VocabDomainsLoc> vocabDomainsLocs) {
    this.vocabDomainsLocs = vocabDomainsLocs;
}

//bi-directional many-to-one association to VocabSubdomain
@OneToMany(mappedBy="vocabDomain",fetch=FetchType.LAZY)
public Set<VocabSubdomain> getVocabSubdomains() {
    return this.vocabSubdomains;
}

public void setVocabSubdomains(Set<VocabSubdomain> vocabSubdomains) {
    this.vocabSubdomains = vocabSubdomains;
}

@Override
public boolean equals(Object other) {
    if (this == other) {
        return true;
    }
    if (!(other instanceof VocabDomain)) {
        return false;
    }
    if (this.getDomainid() == null) {
        return false;
    }       
    VocabDomain castOther = (VocabDomain) other;
    if (castOther.getDomainid() == null) {
        return false;
    }
    return this.getDomainid().equals(castOther.getDomainid());

}

@Override
public int hashCode() {
    final int prime = 211;
    int hash = 223;
    hash = hash * prime + (this.getDomainid() != null ?     this.getDomainid().hashCode() : 1);
    return hash;
}       
} 
```

执行此命令期间代码失败： Query q = sessionFactory.getCurrentSession().createQuery("SELECT vsd FROM VocabSubdomain vsd LEFT JOIN vsd.vocabSubdomainsLocs"); 列表 vsdl = q.list();

* * *

我在 pom.xml 中的依赖项

```
<spring.version>3.1.1.RELEASE</spring.version>
<hibernate.version>3.4.0.GA</hibernate.version>

<dependencies>

<dependency>
    <!-- na poradi zalezi -->
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-jcl</artifactId>
    <version>1.6.1</version>
</dependency>

<dependency>        
      <groupId>sk.statistics.isis.conceptsvocab.jpa</groupId>
      <artifactId>ConceptsVocabJpa</artifactId>
      <version>0.0.1-SNAPSHOT</version>
</dependency>

    <!-- Spring dependencies -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-expression</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aspects</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-acl</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>${spring.version}</version>
    </dependency>   

    <!--  Vaadin dependencies -->
    <dependency>
        <groupId>com.vaadin</groupId>
        <artifactId>vaadin</artifactId>
        <version>${vaadin.version}</version>
    </dependency>
    <!--  J2EE dependencies -->
<dependency>
<groupId>javax.servlet</groupId>
<artifactId>servlet-api</artifactId>
<version>2.5</version>
<scope>provided</scope>
</dependency>
    <!-- Portlet dependencies -->       
    <dependency>
        <groupId>javax.portlet</groupId>
        <artifactId>portlet-api</artifactId>
        <version>2.0</version>
        <scope>${portal.scope}</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.portals.bridges</groupId>
        <artifactId>portals-bridges-common</artifactId>
        <version>2.0</version>
    </dependency>   
    <!-- Ldap configuration start -->
    <dependency>
        <groupId>com.sun</groupId>
        <artifactId>ldapbp</artifactId>
        <version>1.0</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.ldap</groupId>
        <artifactId>spring-ldap-core</artifactId>
        <version>1.3.1.RELEASE</version>
    </dependency>
    <!-- Ldap configuration end -->         
    <!-- Hibernate configuration -->
    <dependency>
      <artifactId>jta</artifactId>
      <groupId>javax.transaction</groupId>
      <version>1.1</version>
      <scope>${websphere.scope}</scope>
      <!--  TODO: pre profil na websphere tu treba dat provided -->
    </dependency>
    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-annotations</artifactId>
      <version>${hibernate.version}</version>
      <!--  vynechaj jta transakcny management, websphere ma vlastny -->
      <exclusions>
          <exclusion>
              <artifactId>jta</artifactId>
              <groupId>javax.transaction</groupId>
          </exclusion>
          <exclusion>
              <groupId>xml-apis</groupId>
              <artifactId>xml-apis</artifactId>
          </exclusion>
      </exclusions>
    </dependency>
   <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-orm</artifactId>
    <version>${spring.version}</version>
   </dependency>        
   <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-cglib-repack</artifactId>
      <version>2.1_3</version>
    </dependency>
    <dependency>
      <groupId>cglib</groupId>
      <artifactId>cglib</artifactId>
      <version>2.2.2</version>
    </dependency>   
    <!-- Slf4j over commons logging -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.6.6</version>
        <type>jar</type>
    </dependency>           
    <!-- 
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>1.6.6</version>
        <type>jar</type>
    </dependency>           
<dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-jdk14</artifactId>
        <version>1.6.6</version>
    </dependency>
    --> 
<dependency>
    <groupId>log4j</groupId>
    <artifactId>log4j</artifactId>
    <version>1.2.16</version>
</dependency>

</dependencies> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T16:59:47.507

问题是由于 hibernate-cglib-repack 造成的。如果您删除该依赖项，它应该可以工作。

背景：在 hibernate 的一个版本中，他们决定将 cglib 类重新打包到 org.hibernate 包下。忽略更改以处理对编码为字符串的类名的引用。因此，一旦将休眠代码升级为使用 2.2 版本的 cglib，就不需要更改，因此它被恢复了。

与此问题相关的休眠错误。

[https://hibernate.onjira.com/browse/HHH-3504](https://hibernate.onjira.com/browse/HHH-3504)

[https://hibernate.onjira.com/browse/HHH-2875](https://hibernate.onjira.com/browse/HHH-2875)

相关摘录

> 计划是不再使用重新打包的 cglib，并在它已经发布后迁移到 2.2。事实上，这已经由 Scott 在 SVN 中完成了：HHH-3832
> 
> 不幸的是，当我们进行此更改时，我们没有太多选择。那时我们已经等待 cglib 2.2 发布一年多了，但我们多次尝试联系他们都没有得到任何回应。我说的是一年多没有发布，而不是 beta、crs、nada。我没有意识到 Enhancer 中的琴弦。我认为阴影插件应该将类的 FQN 处理为字符串。猜不着 在这一点上，考虑到 cglib 2.2 已经过时了，最好继续将它用于 Hibernate 3.5 而不是重新打包。对于 3.3，我们将需要继续使用重新打包，除非 cglib 2.1 和 2.2 是字节码兼容的（我不理解它们）。我将调查这是否已经在阴影插件中得到解决，或者其他选项可能是什么。还， [http://anonsvn.jboss.org/repos/hibernate/cglib/](http://anonsvn.jboss.org/repos/hibernate/cglib/)那么，谁会自愿看看如何让 cglib 2.2 与 hibernate 一起工作？

# c# - Thread.CurrentThread 存储用户标识等自定义数据

> ID：12322178
> 
> 赞同：1
> 
> 时间：2012-09-07T16:40:45.217
> 
> 标签：c#, .net, wcf

在 .net 4 中，是否可以在 Thread.CurrentThread 对象中存储自定义值，例如 userid？

我正在尝试在 AfterReceiveRequest 方法中将 wcf 客户端的用户 ID 存储在 MessageInspector 的客户端，如下所示：

```
request.Headers.Add(MessageHeader.CreateHeader("userid", string.Empty, userid)); 
```

在服务器端，我想在 AfterReceiveRequest 方法中的 Thread.CurrentThread 中检索它。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T05:04:20.137

不推荐使用 ThreadStatic，因为 WCF 会随机使用线程池中的线程，并且线程回收时不会重新初始化 ThreadStatic 变量。此外，如果您有一个包含多个 WCF 调用的会话，则同一服务实例可能会在调用之间切换线程。

**您应该创建一个 OperationContext 扩展。**

请参阅[在哪里存储当前 WCF 调用的数据？ThreadStatic 安全吗？](https://stackoverflow.com/questions/1895732/where-to-store-data-for-current-wcf-call-is-threadstatic-safe)

# c++ - C++。为什么我不能编译这段代码？使用 const_cast 删除 const 有什么问题？

> ID：12322179
> 
> 赞同：1
> 
> 时间：2012-09-07T16:40:46.503
> 
> 标签：c++, const-cast

我在使用 const_cast 删除 constness 时遇到了一些问题。错误消息说“转换是有效的标准转换.....”

这个问题的本质是什么？为什么我应该使用 C-style cast 代替？

"error C2440: 'const_cast' : cannot convert from 'const size_t' to 'size_t'"

```
template<typename T>
const IFixedMemory* FixedMemoryPkt<T>::operator=(const IFixedMemory* srcObj)
{
    // doesn't remove constness this way. why?
    const_cast<char*> (this->m_Address) = (char*)srcObj->GetAddress();

    // compile this way, but maybe(?) undefined behaviour
    // const_cast<char*&> (this->m_Address) = (char*)srcObj->GetAddress();

    // doesn't doesn't work too
    const_cast<size_t> (this->m_Size) = (size_t)(srcObj->GetSize());
    // const_cast<size_t> (this->m_Size) = 0;

    return this;
}

template<typename T>
class FixedMemoryPkt : public IFixedMemory
{
private:
    const size_t m_Size;
    const char*  m_Address;
}

class IFixedMemory
{
public:
    virtual const char* GetAddress() const = 0;
    virtual size_t GetSize() const = 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T16:44:33.560

`const_cast`用于从指向`const`对象的指针或引用转换为它们的非`const`等价物。但是，如果对象本身是 ，则不能使用它们来修改它们引用的对象`const`。没有有效的修改方法`m_Size`；如果你想修改它，那么不要声明它`const`。

您不需要强制转换来分配给指针，因为指针本身不是`const`：

```
this->m_Memory = srcObj->GetAddress(); 
```

如果您确实希望指针本身为`const`，那么`const`将在*之后*出现`*`：

```
char * const m_Address; 
```

并且，与 一样`const size_t`，您将无法重新分配它。

正如错误所说，您可以将一个`const` *值*转换为该值的非`const` *临时副本*而无需强制转换；但你不能分配给那个临时的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T16:46:08.553

您正在尝试将 size_t 事物转换为 r 值，并且无法分配给 r 值。

我不得不说抛弃你的 size_t 成员的常量是非常邪恶的。这就是 mutable 的用途。而 AFAICS 你的第一个 const 演员没有任何用处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T17:37:03.067

现在这样工作...

```
template<typename T>
const IFixedMemory* FixedMemoryPkt<T>::operator=(const IFixedMemory* srcObj)
{
   this->m_Address = srcObj->GetAddress();
   this->m_Size = srcObj->GetSize();
   return this;
}

template<typename T>
class FixedMemoryPkt : public IFixedMemory
{
private:
    const char* m_Address;
    size_t      m_Size;
}; 
```

# php - 创建指向更多 HTML 代码的 HTML 链接

> ID：12322184
> 
> 赞同：0
> 
> 时间：2012-09-07T16:41:21.160
> 
> 标签：php, html

我有 file1.php 生成一个 html 网站。我有 file2.html 仅包含 html 代码。是否可以在 file1.php 中创建生成的超链接以链接到 file2.html 中的代码？我希望 file1.php 生成一个不依赖于 file2.html 是否存在的 html 网站。

我可以使用 php 的 file_get_contents 函数获取 file2.html 的内容，但是如何超链接到该函数返回中保存的代码？

例如，我会单击超链接，我会看到 file2.html，就像我使用任何 Web 浏览器打开 file2.html 一样。我希望它看起来好像我正在链接到一个外部文件（file2.html），但实际上就像在执行 file1.php 生成的 html 网站期间 file2.html 不存在一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:45:19.493

文件1.php

```
<a href="show_contents.php?file=file2.html">Link</a> 
```

显示内容.php

```
// perform checks to make sure $_GET['file'] exists then display contents
// you will also have to do some validation on the variable passed in to file so 
// the user can't change the path to be whatever they want
echo file_get_contents($_GET['file']) 
```

**根据评论更新：**

文件1.php

```
if (isset($_GET['file')) {
    // perform checks to make sure $_GET['file'] exists then display contents
    // you will also have to do some validation on the variable passed in to file so 
    // the user can't change the path to be whatever they want
    echo file_get_contents($_GET['file'])
    exit();
}

<a href="<?php echo $_SERVER['PHP_SELF']; ?>?file=file2.html">Link</a> 
```

# download - Visual C Runtime 2005版下载

> ID：12322185
> 
> 赞同：1
> 
> 时间：2012-09-07T16:41:29.260
> 
> 标签：download, version, crt, visual-c++-2005

我有一个 EXE，它在一个 m/c 上执行，但不在其他 m/c 上执行，两者都装有 Windows 7。

当我尝试执行它时，它会抛出错误消息，

“应用程序无法启动，因为它的并排配置不正确。请查看应用程序事件日志或使用命令行 sxstrace.exe 工具了解更多详细信息。”

正如我所建议的，我使用了 SXSTrace.exe，发现问题出在 C-RT 上，

```
ERROR: Cannot resolve reference Microsoft.VC80.CRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50727.5592". 
```

执行所需文件所在的 m/c，

```
c:\windows\winsxs\x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.6195_none_d09154e044272b9a\MSVCM80.DLL 
```

如您所知，我们无法在“winsxs”文件夹中复制。

因为，我需要“Visual C-Runtime 版本 8 (2005) x86 v 8.0.50727.5592 或 8.0.50727.6195。

系统中存在旧版本所需的库文件：

```
C:\Windows\winsxs\x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.4053_none_d08d7da0442a985d\msvcm80.dll
C:\Windows\winsxs\x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.42_none_db5f52fb98cb24ad\msvcm80.dll
C:\Windows\winsxs\x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.4940_none_d08cc06a442b34fc\msvcm80.dll
C:\Windows\winsxs\x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.762_none_10b2f55f9bffb8f8\msvcm80.dll 
```

我想知道我是否需要将安装在“winsxs”文件夹中的不同版本的相同库然后我需要哪个安装程序

你能指出我可以从哪里得到这个软件的网址吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:54:02.210

请通过下面提到的链接。

[http://social.msdn.microsoft.com/Forums/en-US/vcmfcatl/thread/c1dc12ae-f032-4c20-9ff9-c16ea531ca08?prof=required](http://social.msdn.microsoft.com/Forums/en-US/vcmfcatl/thread/c1dc12ae-f032-4c20-9ff9-c16ea531ca08?prof=required)

谢谢，阿米特

# c# - 使用代码缩放和移动图像

> ID：12322189
> 
> 赞同：0
> 
> 时间：2012-09-07T16:41:40.207
> 
> 标签：c#, wpf, image, zooming

我有一个`image`内部 a `border`，我想在不同时间在图像框中显示图像源的不同部分。具体来说，当某个文本框获得焦点时，我想更改图像，使其缩放到图像内容的某个部分。

这是 XAML：

```
<Border BorderBrush="Silver" BorderThickness="1" Grid.Column="5" Height="504"   
   HorizontalAlignment="Left" Margin="20,116,0,0" Name="border1"  
   VerticalAlignment="Top" Width="410" ClipToBounds="True">
   <Image Height="493" Name="image5" Stretch="Fill" Width="390" 
       ClipToBounds="True" BindingGroup="{Binding}" 
       Clip="{Binding ElementName=border1}" 
       Cursor="Hand" StretchDirection="Both" />
</Border> 
```

例如，我的图像源是 2550 x 3320 像素。我希望该`image`框在从点 1755,300 开始的矩形中显示源，宽度为 650，高度为 230。我不想使用 CloneBitmap 剪切该矩形并显示它，因为我还设置了手动缩放为此`image`，用户可以使用鼠标滚轮放大和缩小并单击和拖动以平移图像。在我们缩放到所需区域后，我仍然希望允许这样做。

**更新：** 我已经尝试实现科林史密斯的答案，但是每当我更改滚动查看器的偏移量时，它都会切割图像，所以如果我稍后移动（单击并拖动以平移）它，它就是空白空间。我以前只使用滚动查看器内的图像进行此工作，但现在我在边框内的滚动查看器内有一个图像。因为我现在已经设置了边框，所以我的缩放和平移需要边框。

我更新的 XAML：

```
<Border BorderBrush="Silver" BorderThickness="1" Grid.Column="5" Height="504" 
   HorizontalAlignment="Left" Margin="20,116,0,0" Name="border1"   
   VerticalAlignment="Top" Width="410" ClipToBounds="True">

   <ScrollViewer x:Name="image5scroll" VerticalScrollBarVisibility="Hidden" 
      HorizontalScrollBarVisibility="Hidden">
      <Image Height="493" Name="image5" Stretch="Fill" Width="390" 
         ClipToBounds="True" BindingGroup="{Binding}" 
         Clip="{Binding ElementName=image5scroll}" Cursor="Hand" 
         StretchDirection="Both" />
   </ScrollViewer>
</Border> 
```

和后面的代码：

```
public void imageZoom(Element element, int index)
{
   if (element.Rectangle.Left - 100 > 0)
   {
      image5scroll.ScrollToHorizontalOffset(element.Rectangle.Left - 100);
      image5scroll.Width = element.Rectangle.Width + 200;
      image5scroll.Height = element.Rectangle.Height + 200;
      border1.Width = image5scroll.Width;
      border1.Height = image5scroll.Height;
      image5.Width = image5scroll.Width;
      image5.Height = image5scroll.Height;
      image5.Stretch = System.Windows.Media.Stretch.None;
   }
   else
     {
        image5scroll.ScrollToHorizontalOffset(0);
     }

   if (element.Rectangle.Top - 100 > 0)
   {
      image5scroll.ScrollToVerticalOffset(element.Rectangle.Top - 100);
   }
   else
      {
         image5scroll.ScrollToVerticalOffset(0);
      }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T15:13:37.597

`ScrollToVerticalOffset()`您可以使用 ScrollViewer 来包装您的 Image...然后您可以通过调用and方法告诉 ScrollViewer 转到垂直和水平偏移`ScrollToHorizontalOffset()`（因为没有可以设置的属性）。

```
<Page
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <Grid>  
        <Border BorderBrush="Silver" BorderThickness="1" Grid.Column="5" Height="504"
        HorizontalAlignment="Left" Margin="20,116,0,0" Name="border1" VerticalAlignment="Top" Width="410">
        <ScrollViewer x:Name="image5scroll" VerticalScrollBarVisibility="Hidden" HorizontalScrollBarVisibility="Hidden">
            <Image Height="493" Name="image5" Stretch="None" Width="390" BindingGroup="{Binding}"
            Cursor="Hand" Source="http://www.noaanews.noaa.gov/stories/images/goes-12-firstimage-large081701.jpg"/>
        </ScrollViewer>
        </Border>  
  </Grid>
</Page> 
```

但是，如果您必须能够使用属性而不是代码隐藏来设置 ScrollViewer 的位置，那么解决方案是定义一个附加属性，该属性在下面为您调用 ScrollToVerticalOffset/ScrollToHorizo​​ntalOffset。

*   [http://marlongrech.wordpress.com/2009/09/14/how-to-set-wpf-scrollviewer-verticaloffset-and-horizo​​ntal-offset/](http://marlongrech.wordpress.com/2009/09/14/how-to-set-wpf-scrollviewer-verticaloffset-and-horizontal-offset/)

# html - html css 2列布局，两列自动高度相同？

> ID：12322191
> 
> 赞同：1
> 
> 时间：2012-09-07T16:42:00.207
> 
> 标签：html, css, layout

我设置了两列布局，我想让两列自动拉伸以填充两列的父 div，原因是左列有背景和边框，我希望它占据页面的整个侧面，因此它看起来不会凌乱等。我使用 inline-block 对齐两列，而不是浮动或任何东西（我不能使用溢出：隐藏，因为它弄乱了我的一些可能超出 div 的功能，例如：下拉菜单）所以我需要找到一个简单的方法来做到这一点，使用这个方法。

jsfiddle：

[http://jsfiddle.net/sFBGX/](http://jsfiddle.net/sFBGX/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T16:47:48.300

您可以使用**CSS**表格布局（不是 HTML 表格布局，这将是糟糕的语义）：

```
.container {
    display: table;
    table-layout: fixed;
    width: 944px;
    font-size: 0.75em;

}
.col {
    display: table-cell;
    vertical-align: top;
}

.container .left
{
    width: 236px;
    background-color:grey;
}
.container .right
{
    width: 708px;
    background-color:yellow;
}
```

```
<div class="container">
    <div class="col left">Left</div>
    <div class="col right">Right
    </br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br>Hey

    </div>
</div>
```

兼容性是 IE8+，如果需要，IE6/7 的回退与`inline-block`

以前的答案中更长的解释：**[这里](https://stackoverflow.com/questions/11359407/sidebar-height-stretch-with-the-content-height-css/11359442#11359442)**和**[那里](https://stackoverflow.com/questions/12019386/html-css-how-to-create-four-equal-size-tabs-that-fill-100-width/12019783#12019783)**还有很好的旧方法*仿列*（你的设计必须考虑到这种技术）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T16:55:00.003

试试这个：http: [//jsfiddle.net/scrimothy/Y2ZsJ/](http://jsfiddle.net/scrimothy/Y2ZsJ/)

只需将其添加到您的 CSS 中：

```
.container { overflow: hidden; }
.container div { 
  padding-bottom: 9999px;
  margin-bottom: -9999px;
} 
```

（来自：[http](http://css-tricks.com/fluid-width-equal-height-columns/) ://css-tricks.com/fluid-width-equal-height-columns/在标题下：一种真正的布局方法）

# css-transitions - CSS3 过渡 chrome 和 winxp / debian

> ID：12322195
> 
> 赞同：1
> 
> 时间：2012-09-07T16:42:39.197
> 
> 标签：css-transitions

CSS3 动画适用于 WIN7 WINXP Ubuntu 12.04 和 Debian Squeeze 中的 Opera Firefox 和 Safari。使用 Chrome 在 WIN 7 (Chrome 21.1.1180.89m ) 和 Ubuntu12.04 下都可以。(21.1.1180.89) 但在 WINXP 和 Debian Squeeze 下不使用相同的版本）。

请参阅演示站点[http://www.hiddenwell.org.uk](http://www.hiddenwell.org.uk)，其中包含简单示例（查看源代码显示代码）。

目标是在将鼠标悬停在给定单词上时移动一个句子（并旋转另一个句子）。在 Win XP 和 Debian 中，我第一次“悬停” - 没有任何反应 - 但第二次“悬停”会激活动画。一切都很好，直到问题再次出现时刷新缓存。使用 WIN7 和 Ubuntu 时列出的其他浏览器以及 Chrome 浏览器 - 第一次一切正常。

从页面加载开始的另一个更复杂的动画也会出现相同的情况。这里我使用@keyframes 函数来驱动动画。在这种情况下，对于 Chrome（WIN XP 和 Debian），屏幕会冻结，我需要“刷新”才能获得动画。它在列出的所有其他场景中首次工作。

有人有什么想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:53:38.870

现在可用于 WIN XP 和 Debian Squeeze 的 chrome 测试版解决了问题 - 即版本 23.0.1271.17 测试版。

感谢 Chrome 团队对此进行排序。

我会将我的迷你演示留在我的网站上一周左右 - 这样其他人就可以看到效果。

（上面讨论的更复杂的动画也解决了这个问题——我现在可以继续开发另一个网站，希望使用最新的 CSS3/动画技术）

# wpf - WPF转换器和字典

> ID：12322201
> 
> 赞同：1
> 
> 时间：2012-09-07T16:43:11.563
> 
> 标签：wpf, ivalueconverter

如果在另一个类中填充了字典，如何正确实现 IValueConverter？

我确定我在这里做错了，但是为了正确解释我的问题，这里是支持该问题的代码。

iPresenter_IconLists.cs

```
public interface iPresenter_IconLists
{
    Dictionary<string, IconPositionDetails> IconDetails { get; set; }
} 
```

Presenter_IconLists.cs

```
public class Presenter_IconLists : iPresenter_IconLists, IValueConverter
{
    public Presenter_IconLists()
    {

    }

    public void PopulateDictionaryTest()
    {
        this.IconDetails.Add("test1", new IconPositionDetails()
        {
            x = 0,
            y = 0
        });
        this.IconDetails.Add("test2", new IconPositionDetails()
        {
            x = 0,
            y = 0
        });
        this.IconDetails.Add("test3", new IconPositionDetails()
        {
            x = 0,
            y = 0
        });
    }

    Dictionary<string, IconPositionDetails> _IconDetails = new Dictionary<string, IconPositionDetails>();
    public Dictionary<string, IconPositionDetails> IconDetails
    {
        get { return this._IconDetails; }
        set { this._IconDetails = value; }
    }

    // IValueConverter implementation
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        iPresenter_IconLists i = this;

        IconPositionDetails ipd = i.IconDetails[value.ToString()];
        // or
        // IconPositionDetails ipd = this.IconDetails[value.ToString()];

        return string.Format("x: {0}, y: {1}", ipd.x, ipd.y);
    }
} 
```

主窗口.xaml

```
<Window.Resources>
    <l:Presenter_IconLists x:Key="DictConvert" x:Name="DictConvert" />

    <TextBlock Text="{Binding Converter={StaticResource DictConvert}, ConverterParameter=Value.x}" Height="28" HorizontalAlignment="Left" Margin="60,49,0,0" VerticalAlignment="Top" FontSize="11" />
</Window.Resources> 
```

主窗口.xaml.cs

```
Presenter_IconLists iconlists;
void MainWindow_Loaded(object sender, RoutedEventArgs e)
{
    this.iconlists = new Presenter_IconLists();
    this.iconlists.PopulateDictionaryTest();

    lbIcons.ItemsSource = this.iconlists.IconDetails;
} 
```

这里的问题是，我总是得到“字典中不存在给定的键”。当我检查 this.IconDetails 集合的数量时，它为零。

如何在 Converter 中访问我的字典？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:24:33.340

您在绑定中使用转换器**参数**而不是**路径。**

在绑定中使用**路径：**

```
<DataTemplate x:Key="lbItems" x:Name="lbItems">
    <TextBlock Text="{Binding Path=Value.name, Converter={StaticResource DictConvert}}" />
</DataTemplate> 
```

或在**Convert函数中使用****参数**：

 **```
IconPositionDetails ipd = i.IconDetails[parameter.ToString()]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T16:47:19.260

您的构造函数不会将项目添加到字典中，因此其中没有项目。当你去转换时，字典是空的。

在某些时候，您需要用值填充字典。这不会发生，因为字典是由 WPF ( `<l:Presenter_IconLists x:Key="DictConvert" />`) 创建的，并且从未向其中添加值。**

# java - 如何让 Maven 使用 Eclipse 工作区默认的 JRE？

> ID：12322202
> 
> 赞同：4
> 
> 时间：2012-09-07T16:43:30.537
> 
> 标签：java, eclipse, maven, m2e

我正在使用 Spring Tool Suite 和 m2e 将我们现有的一些项目转换为 Maven 项目。有问题的项目使用 jdk1.6.0_20，它在 Eclipse 中被命名为 [jdk1.6]。但是，当我执行 Maven -> Update 项目时，它会用标准 [JavaSE-1.6] 替换该 jre。虽然它们似乎指向相同的库，但名称的更改会导致一系列异常，例如：

> 访问限制：由于所需库 C:\Program Files\Java\jdk1.6.0_20\jre\lib\rt.jar 的限制，无法访问类型 WindowsPopupMenuSeparatorUI

我的 pom.xml 有这个：

```
<plugin>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.3.2</version>
    <configuration>
        <source>1.6</source>
        <target>1.6</target>
    </configuration>
</plugin> 
```

有没有办法让 Maven/m2e 使用默认工作区 JRE 而不是用 .classpath 中的特定工作区替换它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T16:58:31.143

1.  进入项目的配置构建路径并转到库选项卡。
2.  删除 JRE 系统库
3.  单击“添加库...”并选择“工作区默认 JRE”

这将为您提供当前的 JRE，而不是指定特定的 JRE

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-17T14:13:25.070

将 maven-compiler-plugin 添加到您的 pom 会强制 maven 使用给定版本的 Java：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
             <version>3.3</version>
             <configuration>
                 <source>1.8</source>
                 <target>1.8</target>
             </configuration>
        </plugin>
    </plugins>
</build> 
```

但是**，如果您的系统上同时安装了 jre 和 jdk**（对于特定的 java 版本），**maven 可能会选择 jre 然后抱怨它需要 JDK**。在 Eclipse 中使用 Maven > **Update Project后可能会发生这种情况。**

为了解决这个问题，在 Eclipse 中，右键单击 JRE System Library > Properties > Environments 并选择 JavaSE-1.8。如果您的系统中有多个兼容的 JRE，请勾选 jdk1.8.x > OK > 选择 JavaSE-1.8 (jdk1.8.x) 作为执行环境 > OK

现在 maven 应该选择 Java 版本 1.8，Eclipse 会告诉 maven 使用 jdk1.8 作为这个 java 版本的默认 JRE。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T14:47:11.673

事实证明，Maven 似乎没有办法做到这一点。相反，当我与违规代码的所有者一起解决问题时，我将错误更改为 Eclipse 设置中的警告。

# javascript - 在使用数组和对象的 JavaScript 方面需要帮助

> ID：12322203
> 
> 赞同：0
> 
> 时间：2012-09-07T16:43:40.960
> 
> 标签：javascript, arrays, object

我对 JavaScript 有点陌生（刚在学校开始使用它），我一直在四处寻找这个程序来完成课堂。出于某种原因，我无法让它正常工作（无论我目前正在做什么）我试图用一组 Missle 对象填充一个 Player 对象......在将我的代码切换到对象的这种使用之前，我是能够显示“导弹”，但现在我被卡住了。

我只放置我必要的代码：

```
function Player(){
    this.x = c.width/2;
    this.y = c.height-20;
    this.w = 50;
    this.h = 10;
    this.dx = 30;
    this.score = 0;
    this.missles = new Array();}

function Missle(x, y){
    this.x = x;
    this.y = y;
    this.dy = 10;
    this.w = 8;
    this.h = 8;
    this.visible = "false";}

function init1P(){
if (playing == "true"){
    player = new Player();
    animate1P();
}}

function animate1P(){
cntxt.clearRect( 0, 0, c.width, c.height );

cntxt.fillStyle="#000000";
cntxt.fillRect(0,0,c.width,c.height);

cntxt.fillStyle="#ffffff";
cntxt.font="34px Verdana";
cntxt.fillText(player.score, 10, c.height-10);  

cntxt.fillStyle="#ffffff";

cntxt.fillRect(player.x,player.y,player.w,player.h);

//cntxt.fillRect(comp.x,comp.y,comp.w,comp.h);

if ( player.missles.visible == "true" ) {
    cntxt.fillStyle = "#FF0000";
    cntxt.fillRect( player.missles.x, player.missles.y, player.missles.w, player.missles.h );
    //isHit();
    if ( hit == "false" ) {
        player.missles.y -= player.missles.dy;
        if ( player.missles.y <= 0 ) {
            player.missles.visible = "false";
        }
    }
}

// request new frame
if ( playing == "true" ) {
    requestFrame( function() { animate1P(); } );
}

//moveComp();
checkBoundaries(player);
//checkBoundaries(comp);
//isHit(player);
//isHit(comp);  }

function shoot() {
player.missles.push(new Missle(player.x + player.w/2, player.y + 10));
player.missles.visible = "true";
hit = "false";} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:58:47.843

你的玩家应该有几个导弹，你用一个数组来表示：

```
this.missles = new Array(); 
```

使用数组时，您必须循环（使用 eg `for`）将某些内容应用于每个元素。所以，`player.missles.visible = "false"`实际上只是在数组本身上设置一个属性，而不是在每个元素上。你必须这样做：

```
for(var i = 0; i < player.missles.length; i++) {
  player.missles[i].visible = "false";  // player.missles[i] is one item on each iteration
} 
```

绘图也是如此：在循环中获取和更新每个导弹的数据：

```
for(var i = 0; i < player.missles.length; i++) {
  if ( player.missles[i].visible == "true" ) {
    // ...
} 
```

另外，请注意 JavaScript 中有布尔值。你可以只使用`true`/ `false`，然后你可以直接使用`if`这样的：

```
if(player.missles[i].visible) {
  // ... 
```

# java - 将外部文件添加到 build.xml - java / xml

> ID：12322207
> 
> 赞同：0
> 
> 时间：2012-09-07T16:43:47.403
> 
> 标签：java, ant

我有两个班，`ZipComparison`和`Tczip`。`Tczip`消化一个`zip`文件并处理其`MD5`, 同时`ZipComparison`搜索`.zip`条目，并比较`.zip`文件的两个不同版本以确定它们是否具有相同的内容。例如，在 a`package_a`中有`encodes.zip`所以我想确定在 the`package_b`中`encodes.zip`是否与`.zip`在`package_a`. 所以我处理`MD5`，如果它们匹配，那么我不需要复制`MD5`. `build.xml`如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<project>

    <path id="external.classpath">
        <pathelement location="src/commons-codec-1.2.jar"/>
    </path>

    <target name="clean">
        <delete dir="build" />
    </target>

    <target name="compile">
        <mkdir dir="build/classes" />
        <javac srcdir="src/tczip" destdir="build/classes">
            <classpath>
                <path refid="external.classpath" />
             </classpath>
        </javac>
    </target>

    <target name="jar">
        <mkdir dir="build/jar" />
        <jar destfile="build/jar/Tczip.jar" basedir="build/classes">
            <manifest>
                <attribute name="Main-Class" value="tczip.ZipComparison" />
            </manifest>
        </jar>
    </target>

    <target name="run">
        <java jar="build/jar/Tczip.jar" fork="true" />
    </target>

</project> 
```

所以我正在尝试创建一个`ant`构建文件。`ZipComparison`使用`Tczip`，但是当我编译时，执行是完美的，但是，当我这样做时，`ant run`我收到以下错误：

```
C:\Users\souzamor\workspace\tczip>ant run
Buildfile: C:\Users\souzamor\workspace\tczip\build.xml

run:
     [java] Processing: bhmcommonclient.zip
     [java] Exception in thread "main" java.lang.NoClassDefFoundError: org/apach
e/commons/codec/binary/Hex
     [java]     at tczip.Tczip.digest(Unknown Source)
     [java]     at tczip.Tczip.execute(Unknown Source)
     [java]     at tczip.ZipComparison.showFiles(Unknown Source)
     [java]     at tczip.ZipComparison.showFiles(Unknown Source)
     [java]     at tczip.ZipComparison.showFiles(Unknown Source)
     [java]     at tczip.ZipComparison.showFiles(Unknown Source)
     [java]     at tczip.ZipComparison.showFiles(Unknown Source)
     [java]     at tczip.ZipComparison.matchMD5(Unknown Source)
     [java]     at tczip.ZipComparison.main(Unknown Source)
     [java] Caused by: java.lang.ClassNotFoundException: org.apache.commons.code
c.binary.Hex
     [java]     at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
     [java]     at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
     [java]     at java.security.AccessController.doPrivileged(Native Method)
     [java]     at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
     [java]     at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
     [java]     at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)

     [java]     at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
     [java]     ... 9 more
     [java] Java Result: 1

BUILD SUCCESSFUL
Total time: 4 seconds 
```

我知道`Tczip`在舞台上丢失了`compile`，但是我怎样才能添加它，`ZipComparison`这样我就没有那种错误了？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:48:23.480

看起来该`tczip.Tczip`课程正在寻找来自[Apache Commons Codec](http://commons.apache.org/codec/)的课程。确保此 jar 与任何其他依赖项一起位于您的类路径中。请参阅[此答案](https://stackoverflow.com/a/683412/646634)`<path/>`以了解在从 Ant元素创建 JAR 文件时如何将类路径添加到 JAR 清单中。

此外，您的 XML 不使用`depends`标签来确保`compile`和`jar`执行`run`，这不是好的构建脚本实践。它应该真正使用`depends`：

```
<target name="clean">
    <!-- ... -->
</target>

<target name="compile">
    <!-- ... -->
</target>

<target name="jar" depends="compile">
    <!-- ... -->
</target>

<target name="run" depends="jar">
    <!-- ... -->
</target> 
```

# css - CMYK 值作为背景颜色

> ID：12322208
> 
> 赞同：3
> 
> 时间：2012-09-07T16:43:49.550
> 
> 标签：css, background-color, cmyk

我必须使用 RGB 值设置 div 的 backgroundColor 。我能够做到这一点。

```
<div style="width: 100px; height: 100px; background-color: rgb(255,0,0)">
</div> 
```

现在，由于我也有 CMYK (0,1,0.5,0) 值，所以你能帮我如何实现这些值。

我这样做了，但没有收获。

```
<div style="width: 100px; height: 100px; background-color: device-cmyk(0, 1, 0.5, 0)">
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T16:56:50.257

您不能直接在 CSS 中执行此操作。您必须在其他地方（可能通过服务器端脚本）将 CMYK 值转换为对应的 RGB 值，并在 CSS 中使用转换后的值。请注意，转换实际上与 SVG 函数所做的并没有太大区别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T06:26:43.053

您可以使用此 PHP 函数或使用类似的算法来通过客户端脚本语言实现：

```
function cmyk_to_rgb2($c, $m, $y, $k)
{
    $c = (255 * $c) / 100;
    $m = (255 * $m) / 100;
    $y = (255 * $y) / 100;
    $k = (255 * $k) / 100;

    $r = round(((255 - $c) * (255 - $k)) / 255) ;
    $g = round((255 - $m) * (255 - $k) / 255) ;
    $b = round((255 - $y) * (255 - $k) / 255) ; 

    $o->r = $r ;
    $o->g = $g ;
    $o->b = $b ;

    return $o ;
} 
```

[脚本](http://blog.loftdigital.com/blog/cmyk-rgb-and-php)[语言](http://www.javascripter.net/faq/rgb2cmyk.htm)_

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-04T21:36:27.133

你可以用 SCSS 做到这一点：

```
@function cmyk($c, $m, $y, $k:0) {
  $c: $c / 255;
  $m: $m / 255;
  $y: $y / 255;
  $k: $k / 1;
  $r: 255 * (1 - $c) * (1 - $k);
  $g: 255 * (1 - $m) * (1 - $k);
  $b: 255 * (1 - $y) * (1 - $k);
  @return rgb($r, $g, $b);
} 
```

注意：key 的最大值是 1，如果超过了，颜色开始反转。

# php - 每月平均日期到图表，如何？

> ID：12322209
> 
> 赞同：0
> 
> 时间：2012-09-07T16:43:51.643
> 
> 标签：php, javascript, codeigniter, date, average

我在一个基于代码点火器的网站上工作。在我的数据库中，我有很多这种格式的日期：yyyy-mm-dd hh:mm:ss

我想要的是在图表中表示所有 12 个月，以及每个月我在数据库中拥有的日期总数。现在只是 2012 年的图表，明年将更改为 2013 年的图表。

我该怎么做？有任何想法吗？

我在 google api 中搜索了很多 javascript 图形/表格，但它们都没有给我所需的一切。另外，我如何从数据库中读取日期并在每个月“放置”它们。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T21:29:58.843

首先从数据库中提取您的平均日期，例如以下代码：

```
SELECT ROUND(AVG(UNIX_TIMESTAMP(`date`)),0) as avg_time
FROM `data`
WHERE `id`>0
GROUP BY Month(`date`) 
```

此 SQL 工作正常，并返回`unix_timestamp`四舍五入到最接近的平均值并按月分组。在 PHP 代码中，如果需要，您可以轻松地恢复为日期时间格式。
您也可以添加`WHERE`一年的关闭检查。例如：`WHERE YEAR(date)=2012`。

祝你好运 ：）

# python - 处理 Paramiko SSHException - 服务器连接断开

> ID：12322210
> 
> 赞同：4
> 
> 时间：2012-09-07T16:43:53.967
> 
> 标签：python, ssh, paramiko

我正在尝试将文件从远程服务器复制到我的本地目录。

我正在使用 Python paramiko 的 sftp get 来复制文件。

```
sftp.get(remote_pate, local_path) 
```

复制很少的文件后，我得到以下异常。

```
SSHException('Server connection dropped') 
```

建立连接使用，

```
ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect(host, username=username, password=password)
sftp = ssh.open_sftp() 
```

为什么连接会掉线？我该如何处理？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T16:47:10.513

[当读取数据包](http://www.lag.net/paramiko/docs/paramiko.sftp_client-pysrc.html)时出现任何错误或出现EOFError

# sql-server-2008 - 从表中创建分层格式的输出

> ID：12322212
> 
> 赞同：4
> 
> 时间：2012-09-07T16:44:30.477
> 
> 标签：sql-server-2008, tsql, hierarchical

我有一个这样的 SQL 表：

```
CC     Descr  C_NO     Vol   Wt

2050   Des1   123      20    40
2060   Des2   123      30    50
2050   Des1   125      20    40
2060   Des2   125      30    50
2050   Des1   126      20    40 
```

我想要这样的输出：

```
2050
    Des1

 123
    20
    40
 125
    20
    40   
 126
    20
    40

2060
    Des2

 123
    30
    50
 125
    30
    50 
```

如何使用 TSQL 代码做到这一点？

对于总是具有相似 Descr 值的每个相似 CC 值，它显示与输出部分中写入的序列中的特定 CC 值相关的所有 C_No、Vol 和 Wt 值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:43:16.633

尝试这个

```
 DECLARE @t TABLE
(
    CC BIGINT,
    Descr NVARCHAR(10),
    C_NO INT,
    Vol SMALLINT,
    WT SMALLINT
)

INSERT INTO @t(CC,Descr,C_NO,Vol,WT)
VALUES  (2050,'Des1',123,20,40)
       ,(2060,'Des2',123,30,50)
       ,(2050,'Des1',125,20,40)
       ,(2060,'Des2',125,30,50)
       ,(2050,'Des1',126,20,40)

;WITH CTE1 AS(
    SELECT 
        t1.CC
        ,t1.Descr
        ,MergedColumn = STUFF(
            (SELECT 
                    ',' 
                    + CAST(C_NO AS VARCHAR(10)) + '/' + CAST(Vol AS VARCHAR(10)) + '/' + CAST(Wt AS VARCHAR(10)) 
            FROM @t AS t2
            WHERE t2.CC=t1.CC AND t2.Descr=t2.Descr
            FOR XML PATH('')),1,1,'')
FROM  @t t1
GROUP BY t1.CC,t1.Descr) 
,CTE2 AS
(
    SELECT
            X.CC
            ,X.Descr
            ,Y.SplitDataByComma         
    FROM
        (
            SELECT 
                    *,
                    CAST('<X>'+REPLACE(F.MergedColumn,',','</X><X>')+'</X>' AS XML) AS xmlfilter 
            FROM CTE1 F
        )X
    CROSS APPLY
    ( 
        SELECT fdata.D.value('.','varchar(50)') AS SplitDataByComma 
        FROM X.xmlfilter.nodes('X') AS fdata(D)
    )Y
)
,CTE3 AS
(
    SELECT
            X.CC
            ,X.Descr
            ,Y.SplitDataBySlash         
            , X.SplitDataByComma AS GrpID
            ,ROW_NUMBER() OVER( PARTITION  BY X.SplitDataByComma ORDER BY X.CC,X.Descr ) AS Rn
            ,X.SplitDataByComma + CAST(CC AS Varchar(200)) + CAST(Descr AS Varchar(200))   CC_Descr 
    FROM
        (
            SELECT 
                    *,
                    CAST('<X>'+REPLACE(F.SplitDataByComma,'/','</X><X>')+'</X>' AS XML) AS xmlfilter 
            FROM CTE2 F
        )X
    CROSS APPLY
    ( 
        SELECT fdata.D.value('.','varchar(50)') AS SplitDataBySlash 
        FROM X.xmlfilter.nodes('X') AS fdata(D)
    )Y
)
,CTE4 AS
(
    SELECT  
        Rn = ROW_NUMBER() OVER(PARTITION BY CC ORDER BY CC)     
        ,CC
        ,Descr      
        ,CASE WHEN  Rn = 1 THEN CAST (SplitDataBySlash AS VARCHAR(10)) ELSE ' '  END C_NO
        ,CASE WHEN  Rn = 1 THEN ' ' ELSE CAST (SplitDataBySlash AS VARCHAR(10)) END Vol_Wt
        ,GrpID  
    FROM Cte3
)
,CTE5 AS(
SELECT 
        CC =  CASE WHEN Rn > 1 THEN ' ' ELSE CAST(CC AS Varchar(200)) END 
        ,Descr =  CASE WHEN Rn > 1 THEN ' ' ELSE CAST(Descr AS Varchar(200)) END 
        ,C_NO
        ,Vol_Wt
        ,GrpID  
FROM Cte4)

SELECT  
          CHAR(10)      
        + REPLICATE(SPACE(1),10) 
        + CAST(CC as VARCHAR(100)) 
        + CHAR(10) 
        + REPLICATE(SPACE(1),15) 
        + Descr
        + CHAR(10)
        + REPLICATE(SPACE(1),10)
        + C_NO
        + CHAR(10) 
        + REPLICATE(SPACE(1),15)
        + Vol_Wt
FROM CTE5 
```

在文本模式（CTRL + T）中，结果是

```
 2050
           Des1
      123
           20           
           40
      125
           20           
           40
      126
           20
           40

      2060
           Des2
      123
           30           
           50
      125
           30
           50 
```

在 Grid Mode(CTRL + D) 中，结果是

```
(No column name)
      2050
           Des1
      123 
           20           
           40
      125           
           20           
           40
      126
           20
           40

      2060
           Des2
      123
           30
           50
      125
           30
           50 
```

但是，SQL Server（或任何数据库）不是像其他人所说的那样进行格式化的地方。请调查此事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T17:25:33.157

我不会这样做的。TSQL 用于获取数据，然后使用应用程序代码格式化该数据。
但是，如果您在查询分析器中工作并且只想要那里的输出，您可以尝试以下操作：

```
DECLARE mytable_cursor CURSOR FOR 
SELECT CC, Descr, C_NO, Vol, Wt
FROM myTable
ORDER BY CC, Descr, C_NO

OPEN mytable_cursor;

FETCH NEXT FROM mytable_cursor 
INTO @CC, @Descr, @C_NO, @Vol, @Wt

SET @oCC = @CC
SET @oDescr = @Descr
SET @oC_NO = @C_NO

WHILE @@FETCH_STATUS = 0
BEGIN
    PRINT @CC;
    WHILE @@FETCH_STATUS = 0 AND @oCC = @CC
    BEGIN    
        PRINT '    ' + @Descr;
        WHILE @@FETCH_STATUS = 0 AND @oDescr = @Descr
        BEGIN
            PRINT ' ' + @C_NO;
            WHILE @@FETCH_STATUS = 0 AND @oC_NO = @C_NO
            BEGIN
                PRINT '    ' + @Vol;
                PRINT '    ' + @WT;

                FETCH NEXT FROM mytable_cursor 
                INTO @CC, @Descr, @C_NO, @Vol, @Wt

            END
            SET @oC_NO = @C_NO
        END             
        SET @oDescr = @Descr
    END             
    SET @oCC = @CC
END     
CLOSE mytable_cursor;
DEALLOCATE mytable_cursor; 
```

或者，您可以使用 GROUP BY ... WITH ROLLUP 和 CASE WHEN 来获取单个查询的结果。

这是一个用破折号代替空格的示例，以确保格式可见：

```
SELECT (CASE
        WHEN Descr IS NULL THEN CC
        WHEN C_NO IS NULL THEN '----' + Descr
        WHEN Vol IS NULL THEN '--' + C_NO
        WHEN Wt IS NULL THEN '------' + Vol
        ELSE '------' + Wt
        END)
FROM
    (SELECT CC, Descr, C_NO, Vol, Wt
    FROM my
    GROUP BY CC, Descr, C_NO, Vol, Wt
    WITH ROLLUP) AS x
WHERE CC IS NOT NULL
ORDER BY CC, Descr, C_NO, Vol, Wt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T17:09:56.907

您不能在 tsql 代码中执行此操作。您需要在应用程序代码中执行此类操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T08:06:02.497

以分层顺序表示数据的最佳方法之一是使用 XML。更重要的是，XML 的使用通常与出色的性能有关。

使用您的示例信息和代码的和平：

```
;WITH DistinctValues (CC,Descr ) AS
(
    SELECT DISTINCT CC,Descr 
    FROM @TableOne
)
SELECT  (
            SELECT  CC AS "CC/@CC"
                   ,Descr AS "CC/Descr"
                   ,(
                        SELECT C_NO AS "C_NO/@C_NO",
                               Vol AS "C_NO/Vol",
                               Wt AS "C_NO/Wt"
                        FROM @TableOne AS Data
                        WHERE Data.CC=DV.CC AND Data.Descr=DV.Descr
                        FOR XML PATH(''),TYPE
                   ) AS  "CC"
            FROM DistinctValues AS DV
            FOR XML PATH(''),TYPE
        )
FOR XML PATH('Source'),TYPE 
```

我得到以下结果（以上面语句返回一行的形式）：

```
<Source>
  <CC CC="2050">
    <Descr>Des1</Descr>
    <C_NO C_NO="123">
      <Vol>20</Vol>
      <Wt>40</Wt>
    </C_NO>
    <C_NO C_NO="125">
      <Vol>20</Vol>
      <Wt>40</Wt>
    </C_NO>
    <C_NO C_NO="126">
      <Vol>20</Vol>
      <Wt>40</Wt>
    </C_NO>
  </CC>
  <CC CC="2060">
    <Descr>Des2</Descr>
    <C_NO C_NO="123">
      <Vol>30</Vol>
      <Wt>50</Wt>
    </C_NO>
    <C_NO C_NO="125">
      <Vol>30</Vol>
      <Wt>50</Wt>
    </C_NO>
  </CC>
</Source> 
```

请注意，T-SQL 中的 XML 函数与 XML 语言结构相结合，为您提供了大量可能的输出数据格式变化——您使用一个或多个节点，您可以将数据表示为属性或节点文本。随意组合它，并且您认为在您的应用程序级别中使用它是最容易的。

这是我用来生成先前 XML 结构的整个代码（只需复制和粘贴）：

```
DECLARE @TableOne TABLE
(
    CC BIGINT,
    Descr NVARCHAR(10),
    C_NO INT,
    Vol SMALLINT,
    WT SMALLINT
)

INSERT INTO @TableOne(CC,Descr,C_NO,Vol,WT)
VALUES  (2050,'Des1',123,20,40)
       ,(2060,'Des2',123,30,50)
       ,(2050,'Des1',125,20,40)
       ,(2060,'Des2',125,30,50)
       ,(2050,'Des1',126,20,40)

;WITH DistinctValues (CC,Descr ) AS
(
    SELECT DISTINCT CC,Descr 
    FROM @TableOne
)
SELECT  (
            SELECT  CC AS "CC/@CC"
                   ,Descr AS "CC/Descr"
                   ,(
                        SELECT C_NO AS "C_NO/@C_NO",
                               Vol AS "C_NO/Vol",
                               Wt AS "C_NO/Wt"
                        FROM @TableOne AS Data
                        WHERE Data.CC=DV.CC AND Data.Descr=DV.Descr
                        FOR XML PATH(''),TYPE
                   ) AS  "CC"
            FROM DistinctValues AS DV
            FOR XML PATH(''),TYPE
        )
FOR XML PATH('Source'),TYPE 
```

这就像一个魅力，它在 Microsoft SQL Server Management Studio 2012 上进行了测试。

# javascript - 定时循环，使用 Javascript 的 2 个循环之间的 x 秒

> ID：12322214
> 
> 赞同：0
> 
> 时间：2012-09-07T16:44:42.767
> 
> 标签：javascript

从这里继续： [定时循环，10 秒之间](https://stackoverflow.com/questions/12319813/timed-loop-10-second-between)

这给了我一个很好的答案，告诉我如何每 10 秒在外部 for() 上进行一次循环。（他们）

现在我希望制作内循环，即 X，因此每 1 秒循环一次，并将外循环（“Y”）保持在 10000 毫秒（10 秒）

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T16:49:08.260

您需要以`currentX`类似的方式添加到`currentY`. 然后，而不是增加`currentY`你应该增加`currentX`. 如果`currentX`不小于`xnumHigh`则将其设置回`xnumLow`并递增`currentY`。

基本上，您只是在做与戴上`y`计时器完全相同的事情，只是`x`改为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T17:17:42.390

这是一种方法：（画布的东西只是一种视觉表示）

[http://jsfiddle.net/J5GvM/1/](http://jsfiddle.net/J5GvM/1/)

```
(function nestedLoop(){
    var innerStep = 10;
    var xnumLow = 0;
    var xnumHigh = 500;
    var currentX = xnumLow;

    var outerStep = 3000;
    var ynumLow = 0;
    var ynumHigh = 500;
    var currentY = ynumLow;

    var canvas = $("#canvas")[0];
    var ctx = canvas.getContext('2d');

    var drawPixel = function(x, y){
        ctx.fillRect(x,y,1,1);
    };

    (function outerLoop(oStart, oEnd){
        currentX = xnumLow;
        currentY = oStart;

        (function innerLoop(iStart, iEnd){
            currentX = iStart;

            // Do stuff here
            drawPixel(currentX, currentY);

            if (iStart < iEnd)
                setTimeout(function(){innerLoop(++iStart, iEnd);}, innerStep); 
            else
                setTimeout(function(){outerLoop(++oStart, oEnd);}, outerStep);
        })(currentX, xnumHigh);
    })(currentY, ynumHigh);
})();​ 
```

# c# - WCF 请求中的 ISO-8859-1 字符集

> ID：12322215
> 
> 赞同：1
> 
> 时间：2012-09-07T16:44:43.343
> 
> 标签：c#, wcf, web-services, rest, iso-8859-1

我编写了一个由外部 API 调用的 REST WCF 服务。该请求正在发送 ISO-8859-1 格式的 XML POST 请求。这导致我的服务发出 400 错误请求响应。

这是我的服务方法的存根：

```
 [OperationContract]
 [WebInvoke(Method ="POST", UriTemplate="/", RequestFormat = WebMessageFormat.Xml, BodyStyle = WebMessageBodyStyle.Bare)]
 [FaultContract(typeof(String))]
 XmlElement GetInstructions(XmlElement request); 
```

目前，我正在尝试拦截请求并返回适当的内容类型：

```
public class XmlContentTypeMapper : WebContentTypeMapper
{
    public override WebContentFormat GetMessageFormatForContentType(string contentType)
    {
        return WebContentFormat.Xml;
    }
} 
```

这仅在我从标题中删除 charset=ISO-8859-1 时才有效。

我见过使用 IClientMessageInspector 和 IDispatchMessageInspector 的示例，但这些似乎是 SOAP 特有的，除非我遗漏了什么。

我能做些什么来解决这个问题？我无法控制传入的请求。

感谢您的任何见解。

这是 XML 请求的第一部分：

```
POST http://localhost:54814/autocallerid.svc HTTP/1.1
Host: localhost:54814
Content-Type: text/xml, charset=ISO-8859-1
Content-Length: 1734

<?xml version="1.0" encoding="UTF-8"?>
<Request xmlns="urn:oasis:names:tc:xacml:2.0:context:schema:os">
    <Subject SubjectCategory="urn:oasis:names:tc:xacml:1.0:subject-category:access-subject">
 .... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:55:58.497

好的。我解决了这个问题。

我只需要将输入类型从 XmlElement 更改为 Stream 并将格式返回为 WebContentFormat.Raw。

像这样：

```
 [OperationContract]
 [WebInvoke(Method ="POST", UriTemplate = "/info", BodyStyle = WebMessageBodyStyle.Bare,
    RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml)]
 [FaultContract(typeof(String))]
 XmlElement GetInstructions(Stream request); 
```

和这个：

```
public class XmlContentTypeMapper : WebContentTypeMapper
{
    public override WebContentFormat GetMessageFormatForContentType(string contentType)
    {
        return WebContentFormat.Raw;
    }
} 
```

# c++ - 如何将小部件添加到 qt 工具栏

> ID：12322216
> 
> 赞同：0
> 
> 时间：2012-09-07T16:44:43.113
> 
> 标签：c++, qt

我有以下问题：我在我的 qt 工具栏中添加了一个微调器，它位于从顶部到底部的位置。这工作正常。但现在我想以特殊顺序订购一些按钮，但使用 mainToolBar->addWidget(button_name) 它将是其中之一。那么我该如何解决呢？我尝试制作一个新的小部件“widget_1”并向该小部件添加一些按钮，但是当我编写 mainToolBar->addWidget(widget_1) 时，什么都没有出现，只有我已经添加的一个滑块。谁能帮我？非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T11:49:49.787

好吧，只是忘记一些事情。选择小部件，然后以表单或您喜欢的任何布局进行布局。就是这样。现在，小部件将显示在工具栏中。这是因为大小和子小部件的位置。通过布局，所有内容都将调整大小并正确定位。

# performance - 我怎样才能弄清楚为什么我的 Wordpress 页面加载如此缓慢？

> ID：12322217
> 
> 赞同：2
> 
> 时间：2012-09-07T16:44:43.237
> 
> 标签：performance, wordpress, optimization, pagespeed, yslow

然而，我的网站页面加载非常缓慢。通常在页面呈现之前会有 2-3 秒的延迟，我不知道为什么。

*   我的网站由 Wordpress v3.4.2 提供支持。

*   我在具有大量资源和带宽的专用虚拟服务器上。

*   没有巨大的图像加载。

*   我的 CSS 文件在 JS 脚本之前加载。

我花了很多时间尝试在平台的限制（Wordpress + 插件等）内优化网站。我不希望我的网站超级快，但我需要它不要那么慢。

我正在使用 Chrome 的开发人员工具来审核我的网站，但这些建议似乎无法解释较长的加载时间（未使用的 CSS 规则等）。当我查看时间线时，我最初看到 2.7 秒的加载时间，但我不知道为什么。任何人都可以帮助我了解这一点吗？

我的网站位于[此处](http://streetofwalls.com)。主页有一些额外的脚本，因此查看[此页面](http://streetofwalls.com/about-us)可能会更有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T00:20:17.007

我发现这个极好的指南真的帮助我克服了优化 Apache 以与 WordPress 一起使用的泥潭：

[http://thethemefoundry.com/blog/optimize-apache-wordpress/](http://thethemefoundry.com/blog/optimize-apache-wordpress/)

你说你有一个虚拟服务器，所以它目前很可能被设置为加载每个模块 - 如果你消除不必要的模块，你会在这里发现一个很大的速度提升。保留配置文件的备份，以防万一搞砸了。

另外 - 通过 SSH 使用 TOP 命令查看 PHP 正在使用多少内存。目前应该很多吧。这一切都将通过消除上述链接中的模块来得到改善。您没有提到您的 VPS 上有多少内存，但您的性能问题很可能来自内存抖动，通过使用上面的链接减少每个 PHP 实例消耗的内存量，可以显着缓解这种情况。

此外，找出性能问题的真正来源也很重要——一个名为 WP Tuner 的很棒的小插件可以帮助我找到性能瓶颈。原来的插件不兼容但是别人写了升级：

[http://www.wwvalue.com/tuts/tut-wp/wordpress-profiler-tuner-revised.html](http://www.wwvalue.com/tuts/tut-wp/wordpress-profiler-tuner-revised.html)

这将帮助您确定页面的哪些特定部分加载时间最长，以便您立即找到性能瓶颈。

此外，一个名为 Debug Queries 的很​​酷的插件对于跟踪性能问题很有用，尽管上面的 wordpress 分析器实际上也可以跟踪查询。

最后——我不能高度推荐这个关于性能的 WordPress.org 讨论，特别是关于 W3 Total Cache vs Super Cache（两者都很出色）。

对于任何寻求瞬间响应时间的人来说，这都是一本绝妙的读物： [http ://wordpress.org/support/topic/wp-super-cache-vs-w3-total-cache](http://wordpress.org/support/topic/wp-super-cache-vs-w3-total-cache)

我在我的一个站点上使用 W3 总缓存，在另一个站点上使用 WP Super Cache。两者都很棒。我都用过，所以我可以了解两者。如果您正在寻找极致性能，我想说使用 WP Super cache 以及上面链接中的人推荐的所有其他工具，但如果您想要立即获得性能，W3 总缓存在其初始设置中更加全面。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T17:13:03.983

*   使用缓存插件，
*   将JS文件放在底部，
*   尝试不同的虚拟主机（数据库服务器有时可能很慢）
*   缩小 CSS 和 JS，
*   减少 HTTP 请求
*   确保外部服务（如 FB 和其他服务）没有变慢（删除它们，看看是否有帮助）
*   运行 Yslow 或类似的测试
*   尝试使用 typekit 或 google 字体而不是 cufon

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T16:49:19.600

您是否尝试过[http://wordpress.org/extend/plugins/wp-super-cache/](http://wordpress.org/extend/plugins/wp-super-cache/)或类似的缓存插件？

# python - GAE 数据存储缓存键与过滤器

> ID：12322233
> 
> 赞同：3
> 
> 时间：2012-09-07T16:45:46.867
> 
> 标签：python, google-app-engine, datastore

假设您有一个这样的实体。

```
postid=db.StringProperty()
comment=db.StringProperty() 
```

用于存储对由帖子 ID 标识的某个帖子的评论。评论可以达到数十亿条记录。现在，如果您想获取属于某个帖子的所有评论，您可以这样做，

```
query=Comment.all()
query.filter('postid = ','id'). 
```

或者，您可以定义 post 之类的，而不是这样做

```
class Post(db.Model)
    commentids=db.StringListProperty()#store list of comment ids 
```

这样你就可以通过做直接得到评论

```
comment=Comment.get_by_key_name('commentkey') 
```

从长远来看（当评论达到数百万甚至数十亿大关时）哪个更有效。换句话说，哪个更合适。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T17:47:05.510

如果您打算拥有数十亿条评论，还可以考虑使用最新的[NDB API](https://developers.google.com/appengine/docs/python/ndb/)，它支持自动缓存。

`postid`您可能应该为您的`Comment`实体使用父级，而不是由您过滤它们。这是一个示例（使用 DB，但使用 NDB 非常相似）：

如果你有这样的模型：

```
class Post(db.Model):
  desc = db.StringProperty()

class Comment(db.Model):
  desc = db.TextProperty() 
```

您可以创建帖子和评论，例如：

```
post_db = Post(desc='Hello World')
post_db.put()

comment_db = Comment(parent=post_db, desc='Nice post')
comment_db.put() 
```

最后，如果您想从特定`post_db`实体获取所有评论：

```
comment_dbs = Comment.all().ancestor(post_db) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T21:53:20.353

实体的大小限制为 1MB。此外，实体最多可以有 5000 个索引条目，因此如果您`commentids`被索引，那么最大大小将为 5000 个条目。

因此，选项二不太适合数百万条评论（我从未见过一个网站每条帖子有一百万条评论，但 Reddit 的热门帖子确实获得了超过 5k 条评论。

此外，您可能需要一种以渐进方式（分页、渐进滚动）列出评论的方法。在这种情况下，通过查询的选项一会更好，因为您可以通过光标逐步列出评论，也可以通过不同的标准（时间、投票等）对属性进行排序。

# c# - 实体框架中的一对一外键对性能造成巨大影响？

> ID：12322234
> 
> 赞同：3
> 
> 时间：2012-09-07T16:45:50.710
> 
> 标签：c#, asp.net, entity-framework

我要让这变得非常简单。我有两张桌子。

```
public class User
{
    public virtual int UserId { get; set; } //primary key AND foreign key
    //user attributes in here
    public virtual UserProfile UserProfile { get; set; }
}
public class UserProfile
{
    public virtual int UserId { get; set; } //primary key AND foreign key
    //profile attributes in here
    public virtual User User { get; set; }
} 
```

基本上，它们是两个以 1-1 关系共享主键的表。这些是否应该合并为一个，我不知道，我是基于现有的数据库。

现在，我遇到的问题是我何时访问它。

**这段代码运行得很快（第二个，也许是两个）：**

```
List<User> userList; //**This userList is defined elsewhere, but it's a list of about 400 users.
foreach (User user in userList)
{
    var test = user.FirstName;
} 
```

**这段代码真的很慢（10-30 秒）：**

```
List<User> userList; //**This userList is defined elsewhere, but it's a list of about 400 users.
foreach (User user in userList)
{
    var test = user.UserProfile.EmailAddress;
} 
```

当我从用户表访问 UserProfile 时，为什么我的代码需要更长的时间？！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T16:53:15.980

可能是因为您在`UserProfile`这里延迟加载。这意味着对于循环中的每次迭代，`UserProfile`当您尝试访问电子邮件地址时，您都会单独调用数据库以加载。

我不确定您是如何创建`userList`集合的，但假设您正在对`User`表进行简单查询，您可以使用它`Include`来预先加载您希望预先拥有的任何属性：

```
var userList = (from u in dbContext.Users.Include("UserProfile")
                select u) 
```

现在，性能损失仅限于最初执行此查询时，枚举结果将不再需要单独调用数据库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T16:54:45.403

如果没有查询给您问题中的 s，很难确定`User`，但这就是我所看到的；

第一个查询循环遍历所有`User`对象并打印每个对象的名字。
**1 SQL 查询。**

第二个查询循环遍历所有`User`对象，并为每个对象发送一个查询到数据库以获取`UserProfile`对 EmailAddress 的访问权限。
**401 次查询。**

您应该阅读延迟加载与急切加载。

# amazon-web-services - 通过元数据查询更新 IAM 凭证时是否有宽限期？

> ID：12322237
> 
> 赞同：5
> 
> 时间：2012-09-07T16:45:55.857
> 
> 标签：amazon-web-services, amazon-iam

EC2 实例可以使用“169.254.169.254”的 HTTP GET 检索元数据。如果实例正确分配了 IAM 角色，它可以自动“发现”其 API 凭证。

但这些都是暂时的，必须定期更新。如果它们在检查后不到 5 分钟过期，Boto 会自动执行此操作。

有时，更新可能会很长（几分钟）。在我切换到这个系统之前，是否有一段时间可以同时使用当前和“未来”凭证，或者当我查询新凭证时，当前凭证是否失效？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T16:24:38.597

新凭证会在旧凭证过期之前自动颁发并推送到实例。

当您在 查询实例元数据服务时`169.254.169.254`，您将始终获得有效（未过期）的凭据。

如果您在应用程序中缓存凭证，则指导是通过在之前的凭证过期前至少 15 分钟调用实例元数据服务来刷新凭证。如果您使用的是 AWS 开发工具包，则该开发工具包会自动刷新凭证。

更多详细信息，请访问[http://aws.amazon.com/iam/faqs/#How_do_i_get_started_with_IAM_roles_for_EC2_instances](http://aws.amazon.com/iam/faqs/#How_do_i_get_started_with_IAM_roles_for_EC2_instances)

# android - Android PhoneGap 意图过滤器，浏览器回调正在运行的应用程序？

> ID：12322242
> 
> 赞同：4
> 
> 时间：2012-09-07T16:46:16.093
> 
> 标签：android, cordova, intentfilter, cordova-2.0.0

我有一个基于 Cordova/PhoneGap 2.0 的 Android 应用程序，我正在尝试使用意图过滤器来注册自定义协议处理程序。

因此，我的 PhoneGap 应用程序启动，执行它的操作，然后调用浏览器应用程序到远程网页（通过`navigator.app.loadUrl('http://example.com/')`或`window.open('http://example.com/'))`。浏览器中该远程网页上的链接 ( `myprotocol://do/stuff`) 将通过数据方案的意图过滤器。通过 WebIntents 插件，我可以在我的应用程序中获取并解析此 url。

这适用于 HTC One X 上的 Android 4.0.4（因此是 Android 的“Sense”版本）。

相同的代码不适用于 Galaxy Nexus 上的 Android 4.0.4 或 4.1.1，或 Nexus S 上的 4.0.1。

我在“库存”Android 上看到的奇怪问题是，当触发了意图过滤器时，它会启动应用程序的新视图，并*在 Android*浏览器中。我可以看到它重新加载了 html 页面。它不会按预期将现有的应用程序实例带到前台。查看 logcat 我发现这实际上是相同的 I/Web 控制台进程，但它再次加载了 html。没有“Start proc”的新日志。

奇怪的是，我现在在任务管理器中显示了我的应用程序的两个实例。原始应用程序实例仍然存在，带有我的自定义应用程序图标。浏览器进程有自己的浏览器应用程序图标，但显然正在运行我的应用程序 UI。我可以单独切换每个 webview 并与之交互。几乎就像我的进程现在有两个 web 视图 - 一个在应用程序中，第二个 web 视图现在在 Browser 进程中运行。

我目前在 AndroidManifest.xml 中有这样的内容：

```
<activity android:name="MyApp" android:label="@string/app_name" 
          android:screenOrientation="portrait"
          android:launchMode="singleTop"
          android:configChanges="orientation|keyboardHidden">

    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>

    <intent-filter>
      <data android:scheme="myprotocol" />
      <action android:name="android.intent.action.VIEW" />
      <category android:name="android.intent.category.BROWSABLE" />
      <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>

</activity> 
```

我的应用程序正在使用 WebIntents 插件和 NFC 插件，但没有它们我也看到了同样的问题。我也在 PhoneGap 1.8.1 和 1.9.0 中重现了这个问题。

我还可以通过日志记录看到，对于 HTC，`DroidGap.onCreate()`触发意图时不会调用，但在 Nexus 上会调用。

我在以这种方式连接意图过滤器时做错了什么吗？

如何在现有的 Android 4.x 上触发现有应用程序实例而不是浏览器中的新应用程序实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T16:15:19.743

使用`android:launchMode="singleTask"`而不是`android:launchMode="singleTop"`活动为我的场景解决了这个问题。

看来 HTC 只是以不同于默认 Android 的方式处理这个问题。

阅读 [http://developer.android.com/guide/components/tasks-and-back-stack.html](http://developer.android.com/guide/components/tasks-and-back-stack.html) 并查看浏览器如何启动 Google Play 商店应用程序（*在*浏览器中，在任务列表中）有货 Android 表示我看到的行为是有意的，如果有点混乱的话。

我只有一个活动，并且打算只有一个我的应用程序实例，所以这里的“singleTask”解决了这个问题。

# javascript - cookie onload 事件页面重定向

> ID：12322243
> 
> 赞同：0
> 
> 时间：2012-09-07T16:46:22.393
> 
> 标签：javascript, jquery, httpcookie

cookie 加载完成后如何执行任何操作。例如，我们必须在 cookie 加载完成后重定向 url。

```
$(document).ready(function() {  // Handler for .ready() called. }); 
```

我们通过 javascript 在页面加载后加载了 cookie。所以我别无选择，只能等到 cookie 完全加载并重定向页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:03:36.993

您可以尝试以下方法

```
<head>
  <script>
    if(condition){
      window.location = "http://yournewlocation.com";
    }
  </script>
</head> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T16:47:46.130

cookie 通过 HTTP 标头发送，因此您可以在任何地方加载它们并在页面中执行重定向操作，即使在`<head>`阻塞时也是如此。

这里不需要jQuery，只需执行一个`location.href = ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T16:48:00.583

cookie 在响应标头中发送（除非在通过 javascript 加载页面后执行它们），因此您甚至不必等到文档准备好。您可以将 javascript 重定向作为提供给浏览器的第一个内容，无需等待页面加载。

通常在这种情况下，您可能只想在服务器上处理整个事情（即根本不依赖 javascript）。

# python - gevent 库：“导入错误：没有名为 greenlet 的模块”

> ID：12322247
> 
> 赞同：11
> 
> 时间：2012-09-07T16:46:28.127
> 
> 标签：python, gevent

大家好，我已经下载了一个需要 gevent python 库的脚本，每次运行脚本时都会显示：

```
 File "shodan.py", line 7, in <module>
   from gevent import monkey
 File "C:\Python27\lib\site-packages\gevent\__init__.py", line 48, in <module>
   from gevent.greenlet import Greenlet, joinall, killall
 File "C:\Python27\lib\site-packages\gevent\greenlet.py", line 6, in <module>
   from gevent.hub import greenlet, getcurrent, get_hub, GreenletExit, Waiter
 File "C:\Python27\lib\site-packages\gevent\hub.py", line 30, in <module>
   greenlet = __import__('greenlet').greenlet    
ImportError: No module named greenlet 
```

我已经成功下载并安装了 gevent，我很困惑有人能给我解决方案并解释问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T17:36:10.307

尝试像这样`greenlet`通过[pip](http://www.pip-installer.org/en/latest/index.html)安装：`pip install greenlet`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T16:59:28.723

这就是我如何使它工作：

1.  从github下载最新的gevent源码：[gevent](https://github.com/surfly/gevent)
2.  将 C:\Python27\lib\site-packages\gevent\ 中的源代码替换为下载的源代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-21T17:53:05.240

运行命令时

> 蟒蛇应用程序.py

而是尝试

> python2.7 app.py

为我工作....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-21T23:59:47.327

**假设您已安装*gevent***：

*检查您是否在名为gevent.py*的同一文件夹中没有另一个文件，因为如果是，那么当您执行“ *import gevent* ”时，它正在导入/调用您命名为*gevent.py*的文件。

更改文件名，它应该可以工作。

# google-app-engine - GAE 应用实例支持的自定义域数

> ID：12322249
> 
> 赞同：1
> 
> 时间：2012-09-07T16:46:48.913
> 
> 标签：google-app-engine

我想知道 AppEngine 应用程序可以拥有多少个自定义域是否有限制？我正在创建一项服务，我希望允许客户将他们的域指向我的应用程序（GAE-java），并且我将使用 URL 重写为客户提供内容——我知道现在我必须手动添加域（如在[AppEngine Instance 的许多自定义域中](https://stackoverflow.com/questions/1990041/many-custom-domains-for-appengine-instance)），但我不期望大量并且没有资源来设置反向代理。

潜在的陷阱是什么？我知道每个帐户可以安装的 SSL 证书是有限制的，所以如果我需要为自定义域支持 HTTPS，我会遇到问题，但还有其他问题吗？或者，也许我应该研究一下 cloudflare 之类的服务，然后才能上位？

谢谢，阿德里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T03:10:51.047

App Engine 应用程序可以拥有的域数量没有限制。SSL 支持会有点棘手，但并非不可能。域所有者必须自己为其域设置 SSL。提示：为 SSL 支持付费的 App Engine 应用程序可能与从域提供的应用程序不同。

# .net - 在 JSON WCF 上使用自定义数据类型

> ID：12322250
> 
> 赞同：0
> 
> 时间：2012-09-07T16:46:49.240
> 
> 标签：.net, json, wcf

我有一个 JSON WCF 服务。在该服务中，我使用了名为的自定义类`Date`（它就像`DateTime`结构一样，只是它忽略了 的时间部分`DateTime`）。

无论如何，假设我有一个这样的操作合同：

```
[OperationContract]
Date Test(); 
```

这是实现：

```
public Date Test()
{
    return new Date();
} 
```

该服务被配置为充当 JSON 服务（在我设置的 Service.svc 中`Factory="System.ServiceModel.Activation.WebServiceHostFactory"`）。

这是 Date 类：

```
public class Date
{
    private DateTime _internalDate;

    public Date()
    {
        _internalDate = new DateTime(DateTime.Now.Year, DateTime.Now.Month, DateTime.Now.Day);
    }

} 
```

当然，在我运行这个例子之后，我得到了

> {}

如何定义我希望 Date 类序列化为 JSON 的方式？

# java - 是否可以在 .jar 文件中自动创建目录层次结构？

> ID：12322254
> 
> 赞同：0
> 
> 时间：2012-09-07T16:47:01.343
> 
> 标签：java, jar

我很少使用 java，所以我对现代生态系统的了解非常有限 :(。AFAIK，Java 与目录层次结构和文件名紧密相关：例如，如果我有一个带有“com.mycompany.myapp.jar”的 .jar 文件。 WndMain”类，对应的 .class 文件必须准确命名为“WndMain.class”（区分大小写！）并放在 .jar 文件（实际上是 .zip 存档）内的“com/mycompany/myapp”目录树中。

但是在开发应用程序时，我不希望我的**源代码**文件被命名为 CamelCase 并分散在一些目录树中！毕竟，这是**我的源代码。****我更喜欢以我**可以舒适地使用它们的方式来组织文件，而不是一些愚蠢的编译器和存档器:)。我想要一个干净的“src”文件夹，其中包含“wnd_main.java”、“wnd_about.java”等文件。在编译过程中根据实际源代码内容自动生成正确的文件名和目录结构是否是一种**简单的方法？**

当然，我可以创建自己的脚本——通过 Python、Ruby、Shell 或其他方式——读取“.java”文件的内容、解析“using”和“class”指令、创建目录结构、复制文件、编译等。 ..但也许所有这些都在几年前就已经完成了，我所需要的只是“sudo apt-get install javamake”之类的东西？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T16:52:33.340

不，编译器不会让您声明文件中声明的包名称（如`package com.mycopmany.myapp`）与磁盘上的实际目录结构不匹配的类。

`src`为了避免在您的层次结构中包含目录，这似乎需要做很多工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T16:55:01.083

这将是一项艰巨的任务，因为每个源文件中的包名称必须与@mattb 所说的目录结构相同，但是您可以使用一些构建工具，例如[Ant](http://ant.apache.org/)（最常用的工具）来创建您正在寻找的解决方案为了。

例如，如果您以这种方式组织您的源：

```
src
    foo
        class_1.java
        class_2.java
    bar
        class_3.java
        class_4.java 
```

您可以使用 Ant 将所有源文件复制到一个临时目录，然后编译并打包到一个 .jar 中，但正如我所说，您会遇到一些问题，例如名称冲突（例如：您可以在不同的目录中拥有相同名称的类目录）。您的所有类必须具有不同的名称，并且所有类必须相互访问，因为它们在同一个包中。所有这些问题都与我提出的解决方案有关。当然，您可以修改复制到 temp 目录的文件的代码，但我真的不认为这一切都值得一试……我真诚地建议您遵循“开发方式”中的Java，使用一些 IDE，遵循[Java 代码约定](http://java.sun.com/docs/codeconv/CodeConventions.pdf)等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T16:58:17.243

这是没有意义的。在这里很难找到问题。
但我会试着回答：

1.  Java 要求您的文件**严格按照**其类名进行组织。
    想想 Python，它*强制*缩进。它这样做是为了*消除*与缩进相关的编码约定的需要
    。
2.  它这样做是*为了您自己好*，以防止以下类型的情况：

    > 我如何在这么大的项目中找到这门课？
    > 事实证明，我正在编写一个已经存在的类/功能。
    > 对于这个项目，*我应该如何*组织文件？有什么约定吗？
    > **什么？！**在一个文件中定义了 100 个类？

3.  不喜欢手动处理文件和目录结构？
    **使用 IDE**，它会为你做到这一点。

4.  如果您仍然想要 Java 的灵活性，为什么不尝试一些**基于 Java 的语言**呢？
    例如，像 Groovy。或者 Clojure，或者 Scala，或者......
    它们都在 JVM 中工作，它们的语法与 Java 的兼容，但更加**宽松**和**宽松**。这同样适用于目录结构。**奖金！**您可以将 Groovy 脚本与 Java 类混合使用。

**底注：**实际上，非公共类**不需要遵循这个约定**。
如果出于某种奇怪的原因，您决定声明一个具有**包访问权限**的类，
则**不会从您的包外部访问**它，但您可以给它起您想要的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T17:08:21.550

您不必严格*地*将`.java`文件组织到与包匹配的目录结构中 -`.class`文件必须采用这种结构，但`javac`会接受`.java`文件的平面结构 - 但是如果您这样做，您的生活会变得更加轻松世界上所有更高级别的 Java 工具都希望您遵循这个约定。例如，Ant 依靠`.java`和`.class`目录结构之间的匹配来判断哪些`.class`文件相对于它们对应的`.java`. 如果结构不匹配，它将每次重新编译每个`.java`文件。

但是，每个`.java`文件的名称*必须*与其定义的名称匹配`public class`（您可以在一个文件中有多个类，`.java`但最多可以有一个，`public`并且其名称必须与文件名匹配）。这是编译器的要求，不值得反对。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T22:08:06.903

`scons`构建系统根据`.java`文件内容完美创建目录结构。安装就像`pypm -g install scons`.

# regex - str_replace 具有多个模式和多个替换的字符向量

> ID：12322264
> 
> 赞同：2
> 
> 时间：2012-09-07T16:47:37.277
> 
> 标签：regex, r, stringr

> **可能重复：**
> [有条件的 gsub 替换](https://stackoverflow.com/questions/8703398/conditional-gsub-replacement)

如何用定义的替换替换字符向量的某些元素？

```
county <- c("wagner", "mccain", "mcclain", "dallas")

pattern     <- c("mccain",  "mcclain",   "mcdonald")
replacement <- c("mc cain", "mc clain",  "mc donald")

library(stringr)
str_replace(county, pattern, replacement) 
```

看起来这应该很简单，但我已经搞砸了很长时间，无法弄清楚。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:18:03.687

如果我正确理解您的问题，您不想使用正则表达式进行搜索和替换（`gsub`例如通过）。在这方面，变量名的使用`pattern`可能会产生误导。

相反，您只想在完全匹配的地方进行简单的替换。您需要使用`match`和`ifelse`：

```
ifelse(is.na(idx <- match(county, pattern)), county, replacement[idx])
# [1] "wagner"   "mc cain"  "mc clain" "dallas" 
```

你也可以把它放在一个函数中：

```
substitute.all <- function(pattern, replacement, x) {
   idx <- match(x, pattern)
   return(ifelse(is.na(idx), x, replacement[idx]))
}
substitute.all(pattern, replacement, county)
# [1] "wagner"   "mc cain"  "mc clain" "dallas" 
```

# c - 右值定义是不能赋值的对象，但为什么文字是左值？

> ID：12322265
> 
> 赞同：4
> 
> 时间：2012-09-07T16:47:43.603
> 
> 标签：c, literals, lvalue, rvalue

所以我正在回顾我们即将到来的主题，我遇到了左值和右值，尽管定义让我感到困惑。为什么文字是左值？

“右值是指存储在内存中某个地址的数据值。右值是一个表达式，不能为其分配值”

“左值的原始定义是指“可以出现在赋值左侧的对象。”但是，const 对象是左值，但它们不能出现在赋值的左侧。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T16:54:56.777

C 语言中有三类不可赋值的左值：`const`对象、数组（以及具有 const 或数组成员的对象）和类型不完整的表达式。

字符串文字是数组（我的意思是：字符串文字表达式所引用的对象是数组）。这使它们成为左值。

非正式地，左值是引用对象的表达式，而字符串字面量是对象。

* * *

如果您想要 C 中左值的正式定义，请参阅标准。在 C99(6.3.2.1) 中：

> *左值*是具有对象类型或除 void 以外的不完整类型的表达式；如果左值在评估时未指定对象，则行为未定义。

带脚注：

> 名称“左值”最初来自赋值表达式 E1 = E2，其中要求左操作数 E1 是（可修改的）左值。将其视为表示对象“定位器值”可能更好</p>

因此，出现在赋值的 LHS 上与它无关，除了在标准 C 以外的其他语言中，左值曾经意味着别的东西。

您可能会认为，根据该正式定义，整数常量`5`也应该是左值表达式：它是表达式（特别是主表达式），并且具有对象类型（`int`是对象类型）。评估表达式当然是有效的`5`，所以如果它是一个左值，那么它必须“指定一个对象”。

这将与地址操作符的定义相矛盾，该定义说它的操作数可能是一个指定对象的左值表达式。编译器拒绝`&5`，通常带有一条错误消息，说明`5`它*不是*左值。

我认为答案在于 6.5.1，它列出了不同类型的主要表达式，包括常量。对于每一种其他类型的主表达式，它都说明在什么条件下它是左值。对于常量，它明显什么也没说，表明它们不是左值。但通常在 C 标准中，“An *X* is...”形式的文本，带有斜体的*X*，是术语 X 的定义。所以我认为标准可以更清晰。

更新：n1570（C11 的后期草案）中的文本是，我的重点是：

> 左值是一个表达式（对象类型不是 void）**，它可能指定一个对象**

C89 (3.2.2.1) 中的等效文本说“指定一个对象”[感谢 hvd]。这表明标准的作者对文本也不满意。常量不会潜在地指定对象，因此在此定义下，数字常量肯定*不是*左值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T23:18:08.880

左值的*非正式*定义基本上是任何可以引用对象的表达式（在 C 意义上，任何占用内存的东西），以便可以读取或修改对象的值。任何你可能*应用*一元运算`&`符的东西都是左值。

不幸的是，您有一些表达式可以引用内存中的对象，但语义是这样的，您无法通过该表达式修改该对象的值。这包括数组表达式（包括字符串文字）、`const`限定类型的表达式和不完整类型的表达式。

最后一种类型的示例如下所示：

```
struct foo;
struct foo *fooptr; 
```

表达式`*fooptr`是不完整类型的表达式；`struct foo`尚未完全定义。

所以我们有*可修改*和*不可修改的*左值。可*修改*的左值可能是赋值的目标。

字符串字面量是*不可修改的*左值，因为它是数组类型表达式（字符串字面量存储为数组，`char`使得内存对整个程序可见，并且从程序启动到终止都保持不变，并且数组的语义是这样的数组表达式可能不是赋值的目标）。这是与*数字*文字或单个字符常量不同的情况，它们不引用内存中的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T16:50:08.900

右值被定义为没有名称或**您无法获取其地址**或临时地址的事物。

如今，原始定义不再有效。您可以获取左值的地址，但不能获取右值的地址，这对我来说是最容易区分的。

如果你不能获取它的地址，那么它就是一个右值。

# wordpress - 如何在 wp -property 中设置默认值

> ID：12322266
> 
> 赞同：0
> 
> 时间：2012-09-07T16:47:43.423
> 
> 标签：wordpress

嗨，我正在 wordpress 中开发房地产网站，为此我正在使用[wp-propery](http://wordpress.org/extend/plugins/wp-property/)插件。

这是创建属性的一个选项。我已经创建了一个属性，`province name`它的出现正确，但我不希望出现初始值`any`，我只想直接出现第一个值。

[你可以在这里](http://ruthwiens.com/)查看我的网站链接 。右边第一件事是省

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T18:14:16.977

我想在我们的一个网站上做同样的事情，我发现这样做的唯一方法是更改​​一些代码。您需要打开文件：template-functions.php，位于 wp-content/plugins/wp-property/templates/template-functions.php。然后你需要找到这一行：“case 'dropdown':”（不带双引号），它应该在 1400 行左右。下面几行应该有一行：

```
<option value="-1"><?php _e( 'Any' ,'wpp' ) ?></option> 
```

将该行更改为：

```
<?php if (strcmp($attrib, "province") == 0){ ?>
    <option value="Manitoba">Manitoba</option>
    <option value="-1"><?php _e( 'Any' ,'wpp' ) ?></option>
<?php }
else{  ?>
    <option value="-1"><?php _e( 'Any' ,'wpp' ) ?></option>
<?php } ?> 
```

这将使 Manitoba 成为省下拉菜单的默认值。

有几件事，曼尼托巴省将是网站上所有你有省下拉菜单的默认设置，如果你更新了你的 WP-Properties 插件，这个更改将会丢失，所以你需要记住你在哪里进行了这个更改，这样你如果需要，以后可以再次修改。

# air - Adobe Air addEventListener 未注册

> ID：12322269
> 
> 赞同：2
> 
> 时间：2012-09-07T16:47:48.837
> 
> 标签：air, drag-and-drop, adobe, addeventlistener

抱歉，我是使用 Adob​​e Air 的新手，我不知道为什么我的

`addEventListener(NativeDragEvent.NATIVE_DRAG_ENTER, onDragIn);`

和

`addEventListener(NativeDragEvent.NATIVE_DRAG_DROP, onDragDrop);`

行未注册。它给了我一个错误，上面写着“调用可能未定义的方法 addEventListener”

我正在尝试加载应用程序并使用以下代码示例：http: [//www.mikechambers.com/blog/2007/11/07/air-example-native-drag-and-drop/](http://www.mikechambers.com/blog/2007/11/07/air-example-native-drag-and-drop/)

[这是我的](http://pastebin.com/SNZyW5Cx)DragAndDropExampleClass.as：http://pastebin.com/SNZyW5Cx

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:55:45.480

在 Mike Chamber 的示例中，文件中的代码`DragAndDropExampleClass`旨在用作内联代码，它不是实际的类。

因此，您删除了包/类指令。那应该已经解决了您遇到的问题（如评论跟踪中所述）。

然而，在脚本标签中包含内联代码`<mx:Script source="DragAndDropExampleClass.as" />`是一种不好的做法，并且可能会导致您的困惑。我已将您的两个文件合并到下面的一个应用程序中。它与 Mike Chambers 的例子完全一样，只是在一个文件中。也许这会有所帮助。我已经运行了这个应用程序并且它可以工作。

注意：我是用 Flash Builder 4.6 编译的，所以代码有点不同。如果您使用的是 Flex 3，请尝试像我一样组合 Mike 的两段代码。

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                       xmlns:s="library://ns.adobe.com/flex/spark" 
                       xmlns:mx="library://ns.adobe.com/flex/mx"
                       creationComplete="onCreationComplete()">
    <fx:Script>
        <![CDATA[
            import flash.desktop.ClipboardFormats;
            import flash.desktop.NativeDragManager;
            import flash.display.Sprite;
            import flash.events.NativeDragEvent;
            import flash.filesystem.File;
            import flash.filesystem.FileMode;
            import flash.filesystem.FileStream;

            //called when app has initialized and is about to display
            protected function onCreationComplete():void
            {
                //register for the drag enter event
                addEventListener(NativeDragEvent.NATIVE_DRAG_ENTER, onDragIn);

                //register for the drag drop event
                addEventListener(NativeDragEvent.NATIVE_DRAG_DROP, onDragDrop);
            }

            //called when the user drags an item into the component area
            protected function onDragIn(e:NativeDragEvent):void
            {
                //check and see if files are being drug in
                if(e.clipboard.hasFormat(ClipboardFormats.FILE_LIST_FORMAT))
                {
                    //get the array of files
                    var files:Array = e.clipboard.getData(ClipboardFormats.FILE_LIST_FORMAT) as Array;

                    //make sure only one file is dragged in (i.e. this app doesn't
                    //support dragging in multiple files)
                    if(files.length == 1)
                    {
                        //accept the drag action
                        NativeDragManager.acceptDragDrop(this);
                    }
                }
            }

            //called when the user drops an item over the component
            protected function onDragDrop(e:NativeDragEvent):void
            {
                //get the array of files being drug into the app
                var arr:Array = e.clipboard.getData(ClipboardFormats.FILE_LIST_FORMAT) as Array;

                //grab the files file
                var f:File = File(arr[0]);

                //create a FileStream to work with the file
                var fs:FileStream = new FileStream();

                //open the file for reading
                fs.open(f, FileMode.READ);

                //read the file as a string
                var data:String = fs.readUTFBytes(fs.bytesAvailable);

                //close the file
                fs.close();

                //display the contents of the file
                outputField.text = data;
            }
        ]]>
    </fx:Script>

    <mx:TextArea top="10" right="10" bottom="10" left="251"
                 id="outputField" />
    <mx:Text text="Drag a Text File into the Application"
             width="233" height="148" top="11" left="10"/>
</s:WindowedApplication> 
```

# html - 使用 TFmail 脚本的多页表单

> ID：12322283
> 
> 赞同：1
> 
> 时间：2012-09-07T16:48:48.533
> 
> 标签：html, webpage, forms, http-post

我已经设置了一个 TFmail 脚本并使用单页表单使其正常工作。

现在，我想制作一个跨越 2 个 HTML 页面的表单，但我不确定如何设置提交按钮以同时提交和链接到不同的站点。是否有可能做到这一点？

# box-api - 从为 SSO 配置的企业帐户获取 auth_token

> ID：12322287
> 
> 赞同：3
> 
> 时间：2012-09-07T16:49:09.383
> 
> 标签：box-api

我正在尝试使用 API 通过外部应用程序进行身份验证。不幸的是，我们的企业帐户被配置为通过 SAML 将身份验证重定向回我们的内部 AD 以使用 SSO。有没有办法配置“服务帐户”或至少让我的企业帐户进行身份验证，以便我可以接收 auth_token 来运行我的夜间进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T21:31:24.860

如果您使用 Box API 的标准身份验证过程，您应该能够以 SSO 用户的身份获取 auth_token。该过程涉及您的应用程序将用户定向到 Box，它可以将用户定向到一个 SSO 端点。登录 SSO 端点后，用户可以将您的应用程序连接到 Box。

获得 auth_token 后，您可以保留该 auth_token 以在后台运行进程。用户只需连接您的应用程序一次，您就可以从那里运行每晚的进程。

# python - KDB+ like asof 加入熊猫中的时间序列数据？

> ID：12322289
> 
> 赞同：14
> 
> 时间：2012-09-07T16:49:21.490
> 
> 标签：python, join, time-series, pandas, kdb

kdb+ 有一个[aj](https://code.kx.com/q/ref/aj/)函数，通常用于沿时间列连接表。

这是一个示例，其中我有交易和报价表，并且我获得了每笔交易的现行报价。

```
q)5# t
time         sym  price size 
-----------------------------
09:30:00.439 NVDA 13.42 60511
09:30:00.439 NVDA 13.42 60511
09:30:02.332 NVDA 13.42 100  
09:30:02.332 NVDA 13.42 100  
09:30:02.333 NVDA 13.41 100  

q)5# q
time         sym  bid   ask   bsize asize
-----------------------------------------
09:30:00.026 NVDA 13.34 13.44 3     16   
09:30:00.043 NVDA 13.34 13.44 3     17   
09:30:00.121 NVDA 13.36 13.65 1     10   
09:30:00.386 NVDA 13.36 13.52 21    1    
09:30:00.440 NVDA 13.4  13.44 15    17

q)5# aj[`time; t; q]
time         sym  price size  bid   ask   bsize asize
-----------------------------------------------------
09:30:00.439 NVDA 13.42 60511 13.36 13.52 21    1    
09:30:00.439 NVDA 13.42 60511 13.36 13.52 21    1    
09:30:02.332 NVDA 13.42 100   13.34 13.61 1     1    
09:30:02.332 NVDA 13.42 100   13.34 13.61 1     1    
09:30:02.333 NVDA 13.41 100   13.34 13.51 1     1 
```

如何使用 pandas 进行相同的操作？我正在使用索引为 datetime64 的交易和报价数据框。

```
In [55]: quotes.head()
Out[55]: 
                              bid    ask  bsize  asize
2012-09-06 09:30:00.026000  13.34  13.44      3     16
2012-09-06 09:30:00.043000  13.34  13.44      3     17
2012-09-06 09:30:00.121000  13.36  13.65      1     10
2012-09-06 09:30:00.386000  13.36  13.52     21      1
2012-09-06 09:30:00.440000  13.40  13.44     15     17

In [56]: trades.head()
Out[56]: 
                            price   size
2012-09-06 09:30:00.439000  13.42  60511
2012-09-06 09:30:00.439000  13.42  60511
2012-09-06 09:30:02.332000  13.42    100
2012-09-06 09:30:02.332000  13.42    100
2012-09-06 09:30:02.333000  13.41    100 
```

我看到 pandas 有一个 asof 函数，但它没有在 DataFrame 上定义，只在 Series 对象上。我想人们可以遍历每个系列并将它们一一对齐，但我想知道是否有更好的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-09T02:22:04.847

`ordered_merge`前段时间我写了一个广告不足的函数：

```
In [27]: quotes
Out[27]: 
                        time    bid    ask  bsize  asize
0 2012-09-06 09:30:00.026000  13.34  13.44      3     16
1 2012-09-06 09:30:00.043000  13.34  13.44      3     17
2 2012-09-06 09:30:00.121000  13.36  13.65      1     10
3 2012-09-06 09:30:00.386000  13.36  13.52     21      1
4 2012-09-06 09:30:00.440000  13.40  13.44     15     17

In [28]: trades
Out[28]: 
                        time  price   size
0 2012-09-06 09:30:00.439000  13.42  60511
1 2012-09-06 09:30:00.439000  13.42  60511
2 2012-09-06 09:30:02.332000  13.42    100
3 2012-09-06 09:30:02.332000  13.42    100
4 2012-09-06 09:30:02.333000  13.41    100

In [29]: ordered_merge(quotes, trades)
Out[29]: 
                        time    bid    ask  bsize  asize  price   size
0 2012-09-06 09:30:00.026000  13.34  13.44      3     16    NaN    NaN
1 2012-09-06 09:30:00.043000  13.34  13.44      3     17    NaN    NaN
2 2012-09-06 09:30:00.121000  13.36  13.65      1     10    NaN    NaN
3 2012-09-06 09:30:00.386000  13.36  13.52     21      1    NaN    NaN
4 2012-09-06 09:30:00.439000    NaN    NaN    NaN    NaN  13.42  60511
5 2012-09-06 09:30:00.439000    NaN    NaN    NaN    NaN  13.42  60511
6 2012-09-06 09:30:00.440000  13.40  13.44     15     17    NaN    NaN
7 2012-09-06 09:30:02.332000    NaN    NaN    NaN    NaN  13.42    100
8 2012-09-06 09:30:02.332000    NaN    NaN    NaN    NaN  13.42    100
9 2012-09-06 09:30:02.333000    NaN    NaN    NaN    NaN  13.41    100

In [32]: ordered_merge(quotes, trades, fill_method='ffill')
Out[32]: 
                        time    bid    ask  bsize  asize  price   size
0 2012-09-06 09:30:00.026000  13.34  13.44      3     16    NaN    NaN
1 2012-09-06 09:30:00.043000  13.34  13.44      3     17    NaN    NaN
2 2012-09-06 09:30:00.121000  13.36  13.65      1     10    NaN    NaN
3 2012-09-06 09:30:00.386000  13.36  13.52     21      1    NaN    NaN
4 2012-09-06 09:30:00.439000  13.36  13.52     21      1  13.42  60511
5 2012-09-06 09:30:00.439000  13.36  13.52     21      1  13.42  60511
6 2012-09-06 09:30:00.440000  13.40  13.44     15     17  13.42  60511
7 2012-09-06 09:30:02.332000  13.40  13.44     15     17  13.42    100
8 2012-09-06 09:30:02.332000  13.40  13.44     15     17  13.42    100
9 2012-09-06 09:30:02.333000  13.40  13.44     15     17  13.41    100 
```

它可以很容易地（好吧，对于熟悉代码的人来说）扩展为模仿 KDB 的“左连接”。我意识到在这种情况下，向前填充交易数据是不合适的；只是说明功能。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-10-03T19:29:05.320

[pandas 0.19 引入了 asof join](http://pandas.pydata.org/pandas-docs/version/0.19.0/whatsnew.html#whatsnew-0190-enhancements-asof-merge)：

```
pd.merge_asof(trades, quotes, on='time') 
```

语义与 q/kdb+ 中的功能非常相似。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-07T22:16:09.623

正如您在问题中提到的，遍历每一列应该适合您：

```
df1.apply(lambda x: x.asof(df2.index)) 
```

我们可能会创建一个更快的 NaN-naive 版本的 DataFrame.asof 来一次性完成所有列。但就目前而言，我认为这是最直接的方法。

# apk - 尝试使用 adb 安装 apk 文件时找不到 adb 命令

> ID：12322291
> 
> 赞同：5
> 
> 时间：2012-09-07T16:49:28.453
> 
> 标签：apk, adb

我正在尝试在我的模拟器中安装一个 apk 文件。我导航到 apk 文件所在的目录并输入 adb install [name of file].apk

我收到了这样的回复：

```
-bash: adb: command not found 
```

我应该怎么办？请保持简单，因为我对此了解不多。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T08:37:23.353

在终端中输入“which adb”并查看 adb 的位置。如果没有显示到 adb 的位置/路径，那么您应该在系统 PATH 变量中添加来自 android sdk 的 platform-tools 文件夹的位置。

```
export PATH=$PATH:/home/path_to_android_sdk/platform-tools 
```

此外，要使更改永久生效，您可以编辑 .bashrc 文件并在末尾添加上述行。保存并执行 .bashrc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:12:09.280

您的 PATH 肯定不包括 ADB。它通常可以在 android sdk paltform-tools 中找到（搜索“platform-tools”通常可以解决问题）。

注意：在 UBUNUTU 12.04 下，adt 将 android sdk 保存在：/usr/lib/eclipse/adt-bundle-linux-x86_64/sdk/platform-tools

# asp.net - 如何按id过滤到gridview但不显示

> ID：12322293
> 
> 赞同：1
> 
> 时间：2012-09-07T16:49:32.167
> 
> 标签：asp.net, vb.net, gridview

在下面的网格视图中，我不想显示“ID”，但我需要按它进行过滤。我怎么做？您会看到我正在尝试使用“IF”进行过滤，但这不起作用`e.Row.Cells("ID").Text = "21"` ？

```
Imports System.Data

Partial Class Default2
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    Dim table2 As New DataTable
    ' Create four typed columns in the DataTable.
    table2.Columns.Add("ID", GetType(Integer))
    table2.Columns.Add("Drug", GetType(String))
    table2.Columns.Add("Patient", GetType(String))
    table2.Columns.Add("Date", GetType(DateTime))
    ' Add five rows with those columns filled in the DataTable.
    table2.Rows.Add(25, "Indocin", "David", DateTime.Now)
    table2.Rows.Add(50, "Enebrel", "Sam", DateTime.Now)
    table2.Rows.Add(10, "Hydralazine", "Christoff", DateTime.Now)
    table2.Rows.Add(21, "Combivent", "Janet", DateTime.Now)
    table2.Rows.Add(1100, "Dilantin", "Melanie", DateTime.Now)
    table2.Rows.Add(125, "Indocin", "David", DateTime.Now)
    table2.Rows.Add(150, "Enebrel", "Sam", DateTime.Now)
    table2.Rows.Add(110, "Hydralazine", "Christoff", DateTime.Now)

    GridView1.DataSource = table2

    Dim s_Patient As BoundField = New BoundField
    s_Patient.DataField = "Patient"
    s_Patient.HeaderText = "Patient"

    Dim s_Drug As BoundField = New BoundField
    s_Drug.DataField = "Drug"
    s_Drug.HeaderText = "Drug"

    GridView1.Columns.Clear()
    GridView1.Columns.Add(s_Patient)
    GridView1.Columns.Add(s_Drug)

    GridView1.AutoGenerateColumns = False

    GridView1.DataBind()

End Sub

Protected Sub GridView1_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles GridView1.RowDataBound

    If e.Row.RowType = DataControlRowType.DataRow AndAlso (e.Row.Cells("ID").Text = "21" OrElse e.Row.Cells("ID").Text = "150") Then

        e.Row.BackColor = Drawing.Color.Blue

    End If

End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:55:35.010

这段代码*对我有用......*

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    ' only bind gridViewData once!
    If Not Page.IsPostBack Then
        ' INIT your table

        Dim s_Patient As BoundField = New BoundField
        s_Patient.DataField = "Patient"
        s_Patient.HeaderText = "Patient"
        Dim s_Drug As BoundField = New BoundField
        s_Drug.DataField = "Drug"
        s_Drug.HeaderText = "Drug"

        ' only for option 2
        GridView1.DataKeyNames = New String() {"ID"}

        GridView1.Columns.Add(s_Patient)
        GridView1.Columns.Add(s_Drug)
        GridView1.AutoGenerateColumns = False

        GridView1.DataSource = table2
        GridView1.DataBind()
    End If
End Sub

Protected Sub GridView1_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles GridView1.RowDataBound
    If e.Row.RowType = DataControlRowType.DataRow Then
        ' option one: check the underlying dataRowView
        Dim row As DataRowView = CType(e.Row.DataItem, DataRowView)
        If row("ID") = "21" OrElse row("ID") = "150" Then
            e.Row.BackColor = Drawing.Color.Blue
        End If

        ' option two: check according to the current DataItemdIndex 
        '             (ie what's the dataKey, in this case ID, of the fifth element)
        Dim id As String = GridView1.DataKeys(e.Row.DataItemIndex).Value
        If id = "21" OrElse id = "150" Then
            e.Row.BackColor = Drawing.Color.Brown
        End If
    End If
End Sub 
```

此外，我建议查看[**WebForms**](http://msdn.microsoft.com/en-us/library/aa984209%28v=vs.71%29.aspx)（和[**dataBoundControls**](http://www.asp.net/web-forms/tutorials/moving-to-aspnet-20/data-bound-controls)）中的 dataBinding 。例如，您可以*在标记中设置 boundFields*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T20:32:23.270

可以显式设置 DataGridView 的任何 Column 的可见性。设置网格的数据源属性后，您可以访问列：

```
Dim gridViewColumn as datagridviewcolumn = GridView1.Columns("ID")
gridViewColumn.Visible = False 
```

对于过滤器，您可能需要重新定义绑定设置：

对于 datagridview，您现在使用表作为数据源。（事实上​​，您正在使用（在“屏幕”后面）表上的 DEFAULT 数据视图。）

更灵活和清晰的是使用：

a) 显式绑定源，以及

b) 显式数据视图，

在de view中，您可以根据需要设置过滤器（并在运行时更改它），就像这样（假设您已经填充了表格）：

```
dim mySort As Sting = ""
dim mySort As Sting = ""
dim mySort As Sting = ""
dim myFilter as String = "ID>23"
dim myDataView as new DataView(table2, myFilter, mySort, DataViewRowState.Currentrows)
dim myBindingSource as new BindingSource
myBindingSource.DataSource = myDataView
DataGridView1.DataSource = myBindingSource 
```

然后再一次：

```
DataGridview1.Columns("ID").Visible = False 
```

运行时您可以修改 DataView 的过滤器（和/或排序）属性。这将由 bindingsource 反映到网格显示的内容。

```
myDataView.Filter = "ID>24 AND ID<27" 
```

顺便说一句：您可以将数据视图直接设置为网格的数据源。

# asp.net-mvc-3 - MVC3 管理特定角色的所有用户和附加信息

> ID：12322295
> 
> 赞同：1
> 
> 时间：2012-09-07T16:49:42.883
> 
> 标签：asp.net-mvc-3, asp.net-membership, asp.net-roles

我正在构建项目的管理端，此时我将不得不： - 创建新用户并添加一些关于他们的更具体的信息（即位置、位置等） - 必须将不同的用户分配给不同的角色，

我首先要做的是提取现有用户的信息，将数据与附加表中的信息进行内部连接，并按不同角色进行过滤

```
public class UserDetail
{
    [HiddenInput(DisplayValue = false)]
    public string UserId { get; set; }

    public int StoreID { get; set; }

    public string PositionID { get; set; }
} 
```

在控制器中，我首先想做一个简单的事情，将来自 Membership 类的数据进行内连接，并在 UserID 级别与上述 UserDetail 类进行内连接。所以我使用了以下代码

```
 public ActionResult Index()
    {
        var allSystemUsers = Membership.GetAllUsers().Cast<MembershipUser>()
            .Select(user => new {user.UserName, user.Email, user.CreationDate, user.LastLoginDate });

                    return View();
    } 
```

问题是我不知道如何首先拉动某些角色的人而不是所有角色，然后如何与上面的 UserDetail 类进行内部连接。

一旦我有了 Index ActionaResult，我希望我应该能够创建 - 创建和编辑功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:45:57.317

要获得特定角色的用户，请使用角色提供程序：

```
List<string> users = Roles.GetUsersInRole("someRole"); 
```

这将返回分配给指定角色的所有用户的用户名列表。然后您可以遍历`users`列表并获取您想要的任何细节。

```
foreach(var user in users)
{
   //do stuff
} 
```

存储 UserDetail 的一种稍微简单的方法（恕我直言）是使用 mvc3 框架中包含的 Profile 提供程序。然后，您将一起使用这三个提供程序（成员、角色和配置文件），因为它们被设计为使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T16:55:44.647

您不必只使用`.Select`，因为您也可以使用`.Skip`and `.Take`。您还可以`.OrderBy`用于设置可重复的顺序，也可以`.Where`用于过滤掉您不想包含的用户。

那就是如果你想自己动手。

现在，如果您真的想推出自己的产品，它可能并不是您正在寻找的东西，但 Troy Goode 编写了一个最出色的、基于区域的会员制方法。如果需要，您可以将其从 GitHub 分叉并更改为使用配置文件（或通过 EF Code First 将其他信息绑定到用户，我已经这样做了）。

[https://github.com/TroyGoode/MembershipStarterKit](https://github.com/TroyGoode/MembershipStarterKit)

这是一个很好的起点，可以立即为您处理大部分用户管理。当它被放入一个区域时，它对您网站的其余部分的影响最小。

# java - 请推荐漂亮的 Java Swing 组件库

> ID：12322296
> 
> 赞同：32
> 
> 时间：2012-09-07T16:49:49.880
> 
> 标签：java, swing, user-interface, look-and-feel

我现在正致力于修饰用 Java 编码的软件的用户界面。该界面现在是使用 Swing 构建的。我正在寻找一个 Java Swing 组件库，它看起来应该比原来`JComponent`的 s.

我已经找到[了 SlickerBox](http://code.deckfour.org/slickerbox/)；那里的组件看起来比原件好得多。但是，我不喜欢 SlickerBox 中组件的颜色，也找不到自定义颜色的方法。我正在寻找更好的图书馆。

我会很感激你的回答！

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-09-07T16:54:01.910

为什么不使用标准的 java Look and Feels 有很多：

*   [JGoodies](http://www.jgoodies.com/products/swing-suite/)
*   [JTatoo](http://www.jtattoo.net/)
*   [杰德外观](http://www.jidesoft.com/products/)
*   [液体信息](http://java.net/projects/liquidlnf/)
*   [餐巾纸](http://napkinlaf.sourceforge.net/)
*   [Pgs LookAndFeel](http://www.pagosoft.com/projects/pgslookandfeel/)
*   [Quaqua](http://www.randelshofer.ch/quaqua/index.html)（看起来像 MacOS X 中的 aqua）
*   [海玻璃](http://code.google.com/p/seaglass/)
*   [合金外观和感觉](http://lookandfeel.incors.com/)
*   适合您系统的本[机](http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)
*   [灵气](http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/nimbus.html)LaF _
*   [实质](http://java.net/projects/substance/)项目（分叉为非[实质](https://github.com/Insubstantial)项目）
*   [网络观感](http://weblookandfeel.com/)

另请参阅此处了解更多免费 L&F：

*   [javootoo.com](http://www.javootoo.com/)
*   [Synthetica 主题 - 自定义 L&F](http://www.javasoft.de/synthetica/themes/)

或者，您可能想知道如何创建自己的：

*   [如何编写自定义外观](http://today.java.net/pub/a/today/2006/09/12/how-to-write-custom-look-and-feel.html)

或者[修改外观](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/)可能是您需要的

Java 外观库/引擎：

*   [塞尚 L&F 发动机](http://www.centigrade.de/en/products/cezanne-look-and-feel-engine)

### 参考 ：

*   [最佳 Java Swing 外观和感觉主题 | 前10名](http://www.taranfx.com/best-java-swing-look-and-feel-themes-professional-casual-top-10)
*   [oracle.com - 修改外观](http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/index.html)
*   [wikipedia.org - 可插拔的外观和感觉](http://en.wikipedia.org/wiki/Pluggable_look_and_feel)
*   [Java2s.com - 外观和感觉](http://www.java2s.com/Product/Java/Swing/Look-And-Feel-LaF.htm)
*   [Java 外观 (L&F)](https://stackoverflow.com/questions/3954616/java-look-and-feel-lf)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-28T23:48:48.343

我会推荐 javaFX，它支持 CSS。天空是极限，而且您可以通过 oracle 获得一个友好的 UI 构建器，[在这里](http://www.oracle.com/technetwork/java/javase/overview/javafx-overview-2158620.html)查看它们！

# sql - 如何根据条件更新列

> ID：12322297
> 
> 赞同：2
> 
> 时间：2012-09-07T16:49:55.840
> 
> 标签：sql, db2

我需要更新表中的列，如果该列具有空值或与输入不同的值。

是否可以在单个 sql 查询中执行此操作。？我的数据库是 db2

我已经尝试了下面的一个，但即使没有更改，它也在更新。我不想要那个。

```
UPDATE ABC 
SET AG = CASE 
  WHEN AG IS NULL
    OR AG <> 1000010 
  THEN 1000010
  ELSE AG
END, 
     P = CASE 
  WHEN P IS NULL 
    OR P <> 1235
  THEN 1235
  ELSE P 
END
WHERE c = 607 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T18:13:30.533

尝试将条件移至 WHERE 子句：

```
UPDATE ABC 
SET AG = 1000010 ,
    P = 1235
WHERE c = 607 and
      (AG IS NULL OR AG <> 1000010 or
       P is NULL or P <> 1235
      ) 
```

这应该最大限度地减少对触发器的调用。

# sql-server - 如何将日期时间解析为某种格式？

> ID：12322301
> 
> 赞同：0
> 
> 时间：2012-09-07T16:50:21.877
> 
> 标签：sql-server, c#-4.0, datetime

如何将日期时间从 sql 格式化为 C# 中定义的特定格式用户？例如sql中的日期时间是2011-02-06 12:00:21，用户定义的格式是mmddyyyy，我期望输出是02062011（注意不是262011）。如何在 C# 中进行转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:55:09.073

这应该这样做：

```
((DateTime)reader["DateColumn"]).ToString("MMddyyyy"); 
```

假设`reader["DateColumn"]`返回一个`DateTime`对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T16:56:33.000

您所需要的只是正确的格式[`ToString`](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)。在你的情况下，那是`MMddyyyy`. 例如：

```
var myDate = new DateTime(2011,2,6,12,0,21);
Console.WriteLine(myDate.ToString("MMddyyyy")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T16:57:12.077

更加详细一些。假设您有 DateTime 对象。如果要显示它，可以使用`ToString`重载方法：

```
new DateTime(2011, 2, 6).ToString("MMddyyyy"); 
```

# sql-server - 在 MS SQL 2008R2 环境中执行简单的 ssis 包时生成异常 0x80040154

> ID：12322303
> 
> 赞同：1
> 
> 时间：2012-09-07T16:50:34.117
> 
> 标签：sql-server, sql-server-2008, ssis

您好，我尝试执行一个简单的 SSIS 包。Basicall 我正在读取一个平面源文件，将其按 id 排序，然后再次写入一个新的平面源文件目标。但是当我执行时，我得到以下异常：

## 标题：Microsoft Visual Studio

启动项目失败

* * *

附加信息：

## 类未注册（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)）（Microsoft.DataTransformationServices.VsIntegration）

我浏览了很多论坛，他们大多专注于 32 位 64 位问题，并坚持重新安装 MS SQL 服务器。我不确定这个异常，因为它是针对不同场景和问题的常见错误。只是想知道是否有人以前遇到过类似的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:04:31.193

产生异常的主要原因是，我试图在 64 位环境中运行 32 位 SSIS 包。因此，解决方案只需将其中一个属性值“Run64BitRunTime”设置为 false 即可。您可以在解决方案资源管理器下的解决方案属性中找到它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T16:55:19.993

获取 .dtsx 文件并在另一个位置创建一个副本。创建一个新项目并将此文件添加到新项目中。再次尝试运行该软件包。

# python - python字符串拆分之谜IndexError

> ID：12322305
> 
> 赞同：0
> 
> 时间：2012-09-07T16:50:34.623
> 
> 标签：python, list, indexing, range

好的......这对我来说是一个谜，下面的代码打印：

```
['03:20:01', 'PM', '262144', '16176136', '98.41', '547744', '11459404', '2096128',   '312', '0.01', '0']
['12:30:01', 'PM', '261748', '16176532', '98.41', '547600', '11459084', '2096128', '312', '0.01', '0']
['10:50:11', 'PM', '257516', '16180764', '98.43', '548064', '11460312', '2096128', '312', '0.01', '0'] 
```

但是当我尝试打印 c[2] 它给了我：

```
IndexError: list index out of range 
```

我错过了什么？

代码看起来很简单

```
cmd = 'sar -r -f /xactly/apps/sar/sjcxtlycomp22s/sa05 |sort -g -k4' 
high = subprocess.Popen([cmd],
      stdin=subprocess.PIPE,
      stdout=subprocess.PIPE,
      stderr=subprocess.PIPE,
        shell=True)

memuse = False
count = 0 

sep = re.compile('[\s]+')
for line in high.stdout:
    if line:
        line = line.strip()
        count += 1
        c = sep.split(line)
        print c 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:05:58.227

我需要跳过前三行数据，所以我修改了它：

```
sep = re.compile('[\s]+')
   for line in high.stdout:
       if line:
           line = line.strip()
           count += 1
           if count > 3:
               c = sep.split(line)
               print c[4] 
```

# linux - 如何使用 mod_rewrite 将 URL 从一个子域重定向到另一个子域？

> ID：12322307
> 
> 赞同：0
> 
> 时间：2012-09-07T16:50:58.913
> 
> 标签：linux, apache, mod-rewrite

我有一个测试网络服务器：`abc2.example.com`. 我将网站：迁移`abc1.example.com`到这个测试服务器（abc2）。abc2 上的所有链接都保持不变并指向 abc1 的页面。当我单击 abc2 上的链接时，我希望它转到 abc2 托管页面而不是转到 abc1。如何使所有传出链接`abc2.example.com/anypage`转到`abc2.example.com/anypage`而不是转到`abc1.example.com/anypage`？

我试过用 mod_rewrite 做这个（添加到 httpd.conf）：

```
RewriteCond %{HTTP_HOST} ^abc1\.example\.com [NC]
RewriteRule ^(.*)$ http:\/\/abc2\.example\.com/$1 [R,L] 
```

...但这似乎不起作用

我想保持链接不变，因为`abc2.example.com`很快就会接管`abc1.example.com`并成为现场制作网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:54:02.657

如果这是一个完美的 1:1 映射，并且两个站点之间唯一改变的是主机名，那么您不需要 mod_rewrite。一个简单的

```
RedirectMatch (.*) http://abc1.example.com$1 
```

在 abc2 vhost 定义中就可以了。

# windows - 检查 64 位或 32 位操作系统的批处理文件

> ID：12322308
> 
> 赞同：57
> 
> 时间：2012-09-07T16:51:04.187
> 
> 标签：windows, command-line

我可以检查当前机器是否在批处理文件中运行**64 位**操作系统或**32 位** **操作系统？**

**编辑：**

在网上找到[了这个](http://www.msfn.org/board/topic/129674-how-can-i-identify-if-os-is-32-bit-or-64-bit-in-batch-file/)，现在对我来说已经足够了：

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2014-07-05T21:09:05.873

这是按照 Microsoft 的知识库参考 ( [http://support.microsoft.com/kb/556009 ) 执行检查的](http://support.microsoft.com/kb/556009)***正确***方法，我已将其重新编辑为一行代码。

它不依赖任何环境变量或文件夹名称，而是直接在注册表中检查。

如下面的完整批处理文件所示，它将环境变量**OS**设置为**32BIT**或**64BIT**，您可以根据需要使用它。

```
@echo OFF

reg Query "HKLM\Hardware\Description\System\CentralProcessor\0" | find /i "x86" > NUL && set OS=32BIT || set OS=64BIT

if %OS%==32BIT echo This is a 32bit operating system
if %OS%==64BIT echo This is a 64bit operating system 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-10-30T16:54:07.130

我使用以下任何一种：

```
:CheckOS
IF EXIST "%PROGRAMFILES(X86)%" (GOTO 64BIT) ELSE (GOTO 32BIT)

:64BIT
echo 64-bit...
GOTO END

:32BIT
echo 32-bit...
GOTO END

:END 
```

或者我设置`bit`变量，稍后在我的脚本中使用它来运行正确的设置。

```
:CheckOS
IF EXIST "%PROGRAMFILES(X86)%" (set bit=x64) ELSE (set bit=x86) 
```

或者...

```
:CheckOS
IF "%PROCESSOR_ARCHITECTURE%"=="x86" (set bit=x86) else (set bit=x64) 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-09-07T16:54:01.663

如果你只做这些似乎工作：

```
echo "%PROCESSOR_ARCHITECTURE%" 
```

我发现[这些脚本](http://www.windowsitpro.com/article/windows-client-oss/q-how-can-i-run-a-check-in-a-batch-file-for-the-architecture-type-of-a-windows-installation-)会根据操作系统架构（x64 或 x86）执行特定的操作：

```
@echo off
echo Detecting OS processor type

if "%PROCESSOR_ARCHITECTURE%"=="AMD64" goto 64BIT
echo 32-bit OS
\\savdaldpm01\ProtectionAgents\RA\3.0.7558.0\i386\DPMAgentInstaller_x86 /q
goto END
:64BIT
echo 64-bit OS
\\savdaldpm01\ProtectionAgents\RA\3.0.7558.0\amd64\DPMAgentInstaller_x64 /q
:END

"C:\Program Files\Microsoft Data Protection Manager\DPM\bin\setdpmserver.exe" -dpmservername sa 
```

请尝试找到一种没有 GOTO 的方法...

对于使用 Unix 系统的人来说，`uname -m`可以做到这一点。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-01-20T05:54:19.817

在命令提示符下运行以下命令：

开始 -> 运行 -> 键入`cmd`并在生成的黑框中输入以下命令：

```
wmic os get osarchitecture 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-11-11T08:42:01.907

'ProgramFiles(x86)' 是 cmd.exe（32 位和 64 位版本）仅在 Windows 64 位机器上自动定义的环境变量，所以试试这个：

```
@ECHO OFF

echo Check operating system ...
if defined PROGRAMFILES(X86) (
    echo 64-bit sytem detected
) else (
    echo 32-bit sytem detected
)
pause 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-09-07T16:55:07.447

```
PROCESSOR_ARCHITECTURE=x86 
```

将出现在 Win32 上，并且

```
PROCESSOR_ARCHITECTURE=AMD64 
```

将出现在 Win64 上。

如果您不正常地运行 32 位`cmd.exe`进程，那么 Windows 会提供两个环境变量：

```
PROCESSOR_ARCHITECTURE=x86
PROCESSOR_ARCHITEW6432=AMD64 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-11-06T04:41:43.533

```
*** Start ***

@echo off

Set RegQry=HKLM\Hardware\Description\System\CentralProcessor\0

REG.exe Query %RegQry% > checkOS.txt

Find /i "x86" < CheckOS.txt > StringCheck.txt

If %ERRORLEVEL% == 0 (
    Echo "This is 32 Bit Operating system"
) ELSE (
    Echo "This is 64 Bit Operating System"
)

*** End *** 
```

参考[http://support.microsoft.com/kb/556009](http://support.microsoft.com/kb/556009)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-03-14T05:07:31.740

如果您以管理员身份运行脚本，则该脚本可以使用 wmic 命令。

```
FOR /f "tokens=2 delims==" %%f IN ('wmic os get osarchitecture /value ^| find "="') DO SET "OS_ARCH=%%f"
IF "%OS_ARCH%"=="32-bit" GOTO :32bit
IF "%OS_ARCH%"=="64-bit" GOTO :64bit

ECHO OS Architecture %OS_ARCH% is not supported!
EXIT 1

:32bit
ECHO "32 bit Operating System"
GOTO :SUCCESS

:64bit
ECHO "64 bit Operating System"
GOTO :SUCCESS

:SUCCESS
EXIT 0 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-10-16T16:48:44.033

这里的答案都不适用于我的情况（64 位处理器但 32 位操作系统），所以这是对我有用的解决方案：

```
(set | find "ProgramFiles(x86)" > NUL) && (echo "%ProgramFiles(x86)%" | find "x86") > NUL && set bits=64 || set bits=32 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-10-16T17:00:05.900

我通常会做以下事情：

```
:Check_Architecture
if /i "%processor_architecture%"=="x86" (
    IF NOT DEFINED PROCESSOR_ARCHITEW6432 (
        REM Run 32 bit command

    ) ELSE (
        REM Run 64 bit command
    )           
) else (
        REM Run 64 bit command
) 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-02-28T07:32:07.747

这是我个人最喜欢的，一个逻辑炸弹:)

```
::32/64Bit Switch
ECHO %PROCESSOR_ARCHITECTURE%|FINDSTR AMD64>NUL && SET ARCH=AMD64 || SET ARCH=x86
ECHO %ARCH%
PAUSE 
```

使用 AND 的 ( `&&`) 和 OR 的 ( `||`) 这是一个`IF THEN ELSE`批处理构造。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-06-23T16:46:19.703

这是一个简洁的版本：

```
set isX64=False && if /I "%PROCESSOR_ARCHITECTURE%"=="AMD64" ( set isX64=True ) else ( if /I "%PROCESSOR_ARCHITEW6432%"=="AMD64" ( set isX64=True ) )

echo %isX64% 
```

不要使用“Program Files (x86)”目录作为任何证据：顽皮的软件可以轻松地在 32 位机器上创建此目录。而是使用 PROCESSOR_ARCHITECTURE 和 PROCESSOR_ARCHITEW6432 环境变量。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-08-09T19:41:22.963

这是一个单行代码，`%errorlevel%`64 位为 0，非 64 位为 1。我不能保证它适用于所有版本的 Windows，但演示了一种确定它的方法。如果您知道要查找的所有可能性，则可以添加多个`findstr`查询。

`set | findstr /i processo.*64 > nul 2>&1`

基本上，您正在转储环境变量，并使用正则表达式来搜索在其行中某处具有“ `processo`”+“ ”的内容。`64`管道只是为了抑制匹配线。如果我将其更改为`set | findstr /i processo.*64`在我当前的装备上，这将是结果：

```
 C:\Windows\System32>set | findstr /i processo.*64 
```

> ```
> PROCESSOR_ARCHITECTURE=AMD64
> PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 158 Stepping 9, GenuineIntel 
> ```

这是查看您的处理器是否为 64 位 AMD 的一条线

`set | findstr /i processo.*amd.*64 > nul 2>&1`

您可以将这些作为起点，并根据您的要求对其进行细化。我最终在已知的环境变量名称上使用了这个，因为它在我正在使用的不同主要版本的 Windows 中更可靠。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-03-15T17:30:34.100

我真的不明白这里给出的一些答案（对此感到抱歉）。例如，投票最多的答案不会返回 Windows 架构，而是会为您提供处理器架构。在 64 位 CPU 上运行 32 位 Windows 时，您会得到错误的结果（这是对正在使用的硬件的查询）。

*最安全的选择是从注册表中查询 BuildLabEx 值。*

***确定 x86 (intel) 或 x86-64 (amd)***

```
reg query "HKLM\Software\Microsoft\Windows NT\CurrentVersion" /v "BuildLabEx" | >nul find /i ".x86fre."   && set "_ARCH_=x86" || set "_ARCH_=x86-64" 
```

***确定 x86 (intel)、x86-64 (amd) 或 arm***

```
set "_ARCH_=unknown"
reg query "HKLM\Software\Microsoft\Windows NT\CurrentVersion" /v "BuildLabEx" | >nul find /i ".x86fre."   && set "_ARCH_=x86" 
reg query "HKLM\Software\Microsoft\Windows NT\CurrentVersion" /v "BuildLabEx" | >nul find /i ".amd64fre." && set "_ARCH_=x86-64" 
reg query "HKLM\Software\Microsoft\Windows NT\CurrentVersion" /v "BuildLabEx" | >nul find /i ".armfre."   && set "_ARCH_=arm" 
```

***另一种选择***（前面提到过）

```
if defined ProgramFiles(x86) ( set "_ARCH_=x86-64" ) else ( set "_ARCH_=x86" ) 
```

后者的问题是，当您弄乱变量时，您将无法使用此方法。当以前安装有剩余（或某些用户故意创建文件夹）时，检查文件夹是否存在也会导致问题。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-03-09T06:07:33.803

不同版本的 Windows 中的许多 DOS 命令是相似的，但可能支持不同的参数。此外，较新版本的 Windows 可能支持新命令或淘汰旧命令。因此，如果您希望编写一个可以在不同类型的机器上运行的批处理文件，确定运行该批处理文件的 Windows 版本可能是有益的。这样，批处理文件可以执行适合操作系统的命令。

以下批处理文件将确定计算机是否运行 Windows 7、Windows Server 2008、Windows Vista、Windows Server 2003、Windows XP、Windows 2000 或 Windows NT。它可以根据需要轻松修改以支持其他版本的 Windows，或根据检测到的 Windows 版本设置环境变量。请注意，要让此批处理文件正确区分较新版本的 Windows Server 和消费者版本的 Windows，它比您可能在其他地方看到的批处理文件更加复杂。我已经解释了下面的原因。

1) 打开记事本窗口。

2) 将以下文本复制到记事本中（您可能希望在某些行换行时访问此提示的打印版本）：

```
@echo off

ver | find "2003" > nul
if %ERRORLEVEL% == 0 goto ver_2003

ver | find "XP" > nul
if %ERRORLEVEL% == 0 goto ver_xp

ver | find "2000" > nul
if %ERRORLEVEL% == 0 goto ver_2000

ver | find "NT" > nul
if %ERRORLEVEL% == 0 goto ver_nt

if not exist %SystemRoot%\system32\systeminfo.exe goto warnthenexit

systeminfo | find "OS Name" > %TEMP%\osname.txt
FOR /F "usebackq delims=: tokens=2" %%i IN (%TEMP%\osname.txt) DO set vers=%%i

echo %vers% | find "Windows 7" > nul
if %ERRORLEVEL% == 0 goto ver_7

echo %vers% | find "Windows Server 2008" > nul
if %ERRORLEVEL% == 0 goto ver_2008

echo %vers% | find "Windows Vista" > nul
if %ERRORLEVEL% == 0 goto ver_vista

goto warnthenexit

:ver_7
:Run Windows 7 specific commands here.
echo Windows 7
goto exit

:ver_2008
:Run Windows Server 2008 specific commands here.
echo Windows Server 2008
goto exit

:ver_vista
:Run Windows Vista specific commands here.
echo Windows Vista
goto exit

:ver_2003
:Run Windows Server 2003 specific commands here.
echo Windows Server 2003
goto exit

:ver_xp
:Run Windows XP specific commands here.
echo Windows XP
goto exit

:ver_2000
:Run Windows 2000 specific commands here.
echo Windows 2000
goto exit

:ver_nt
:Run Windows NT specific commands here.
echo Windows NT
goto exit

:warnthenexit
echo Machine undetermined.

:exit 
```

3) 将文件另存为 %WINDIR%\whichvers.bat

4) 现在，从命令提示符输入：

无论哪个

这将显示您正在运行的 Windows 版本。

笔记：

1.  使用 SYSTEMINFO 命令而不是依赖 VER 命令的原因是因为 Windows Server 2008 与其他 Windows 版本“共享”版本号（请参阅 Microsoft）。因此，依靠“版本号”6.0 来检测 Windows Vista 或依靠 6.1 来检测 Windows 7 无法将计算机与 Windows Server 2008 或 Windows Server 2008 R2 区分开来。

2.  %TEMP%\osname.txt 的创建完全是因为我无法放置 systeminfo | 的结果。直接在 for /f 命令中找到“操作系统名称” - 它不喜欢管道命令。您可能会找到一种更简单的方法来处理从 SYSTEMINFO 获取信息 - 如果是这样，请发表评论。

3.  环境变量 %vers% 有前导空格。我可以使用更长的批处理文件来删除这些，但在这种情况下没有必要。

4.  批处理文件检测 SYSTEMINFO，因为它假定如果它超出了较旧的操作系统检测范围，则运行的 Windows 版本甚至更旧，并且不会具有此实用程序。在 Windows 7 64 位上，它仍位于 %SystemRoot%\system32 文件夹中 - 如果更高版本的 Windows 仅变为 64 位，则可能必须更新此批处理文件。

返回到 Windows XP 和 DOS 页面。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-12-02T22:26:43.800

经过多次试验和错误，我设法得到了一些不同的工作示例，但最重要的是当批处理在 32 位 CMD 上的 64 位操作系统上启动时。最后，这是我可以开始工作的最简单的检查，它适用于 Win2k-Win8 32/64。也非常感谢帮助我解决这个问题的菲尔。

```
set bit64=n
if /I %Processor_Architecture%==AMD64 set bit64=y
if /I "%PROCESSOR_ARCHITEW6432%"=="AMD64" set bit64=y 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-10-05T05:04:22.383

您可以使用以下注册表位置检查计算机是否运行 32 位或 64 位 Windows 操作系统：

```
HKLM\HARDWARE\DESCRIPTION\System\CentralProcessor\0 
```

您将在右窗格中看到以下注册表项：

```
Identifier     REG_SZ             x86 Family 6 Model 14 Stepping 12
Platform ID    REG_DWORD          0x00000020(32) 
```

以上`x86`并`0x00000020(32)`表示操作系统版本为32位。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-07-27T00:25:21.747

```
set bit=64
IF NOT DEFINED PROGRAMFILES(X86) (
set "PROGRAMFILES(X86)=%PROGRAMFILES%"
set bit=32
)
REM Example 1: REG IMPORT Install%bit%.reg (all compatibility)
REM Example 2: CD %PROGRAMFILES(X86)% (all compatibility) 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2015-11-03T03:49:18.677

```
If $SYSTEM_os_arch==x86 ( 
  Echo OS is 32bit
 ) else ( 
  ECHO OS is 64bit
) 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2016-01-22T14:11:08.370

正如SAM之前写的那样，***正确的方法是：***

> reg 查询 "HKLM\Hardware\Description\System\CentralProcessor\0" **/v "标识符"** | 查找 /i "x86" > NUL && 设置 OS=32BIT || 设置操作系统=64BIT

但是***/v "Identifier"***有点正确。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2016-08-22T14:57:43.323

仅供参考，请尝试远离使用 %PROCESSOR_ARCHITECTURE%，因为 SCCM 在 2012 版周围进行了更改，该更改始终在 32 位进程下启动包/程序（它可以安装 x64，但环境变量将显示为 x86）。我现在使用；

如果存在“%SystemDrive%\Program Files (x86)”转到 X64

杰克

* * *

## 回答 #22

> 赞同：-2
> 
> 时间：2016-04-22T06:40:54.247

```
set "_os=64"
if "%PROCESSOR_ARCHITECTURE%"=="x86" (if not defined PROCESSOR_ARCHITEW6432 set "_os=32") 
```

基于：[https ://blogs.msdn.microsoft.com/david.wang/2006/03/27/howto-detect-process-bitness/](https://blogs.msdn.microsoft.com/david.wang/2006/03/27/howto-detect-process-bitness/)

和[http://ss64.com/nt/syntax-64bit.html](http://ss64.com/nt/syntax-64bit.html)

# ios - 需要 ios 现有的 ca 电子邮件地址

> ID：12322310
> 
> 赞同：7
> 
> 时间：2012-09-07T16:51:12.267
> 
> 标签：ios, certificate, keychain

当使用钥匙串和证书助手从现有 CA 请求证书时，所有说明都说我应该单击“保存到磁盘”选项并且不需要“CA 电子邮件地址”。

我看到的面板没有提供“保存到磁盘”选项，当我尝试在没有 CA 电子邮件地址的情况下单击继续时，它会失败并显示需要 CA 电子邮件地址的消息。

我怎样才能找到 CA 电子邮件地址应该是什么？

我有证书助手的过时版本吗？当我检查更新时，它说没有可用的更新。（在具有 1 Gb DDR SDRAM 的 1.42 GHz PowerPC G4 上运行 OS XV 10.4.11）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T04:31:24.800

**解决方案：**

![从证书颁发机构窗口请求证书](../Images/dded701003823acd6525242f6d1eb43a.png)

*   在代码签名请求（CSR）窗口中，会有一个名为**“请求是”的字段，选择与****“保存到磁盘”**对应的单选按钮。

**您遇到问题的原因：**

*   默认情况下，**“请求是”**字段被选为 **“通过电子邮件发送给 CA”**。

**笔记：**

*   要进入 CSR 窗口，请打开 Keychain Access > Certificate Assistant > Request a Certificate from a Certificate Authority。

**参考：**

*   [https://developer.apple.com/ios/manage/certificates/team/create.action](https://developer.apple.com/ios/manage/certificates/team/create.action)

# android - JSONArray 文本必须在第 5 个字符处以 '[' 开头

> ID：12322311
> 
> 赞同：0
> 
> 时间：2012-09-07T16:51:16.510
> 
> 标签：android, parsing, arrays

我在使用 JSONArray 解析时遇到问题 我的日志错误是

> 09-07 16:00:23.516：E/log_tag(216)：解析 dataorg.json.JSONException 时出错：JSONArray 文本必须在字符 5 处以“[”开头

我的活动是

```
public class Httppostaux {

InputStream is =null;
String result ="";

public JSONArray getserverdata(ArrayList<NameValuePair>parameters,String urlwebserver){
    //conexion mediante un http y envío mediante post
    httppostconnect(parameters,urlwebserver);
    if(is!=null){//si hay respuesta
        getpostresponse();
        return getjsonarray();
    }else{
        return null;
    }
    }

//peticion HTTP
private void httppostconnect(ArrayList<NameValuePair>parametros,String urlwebserver){

    try{
        HttpClient httpclient=new DefaultHttpClient();
        HttpPost httppost=new HttpPost(urlwebserver);
        httppost.setEntity(new UrlEncodedFormEntity(parametros));

        //ejecuta peticion enviando datos por post
        HttpResponse response=httpclient.execute(httppost);
        HttpEntity entity=response.getEntity();
        is=entity.getContent();
    }catch(Exception e){
        Log.e("Log_taf","Error in http connection"+e.toString());
    }
}

public void getpostresponse(){
    //convierte respuesta a string
    try{
        BufferedReader reader=new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder sb=new StringBuilder();
        String line =null;
        while ((line = reader.readLine())!=null){
            sb.append(line + "\n");
        }
        is.close();

        result=sb.toString();
        Log.e("gestpostresponse","result= "+sb.toString());
    }catch(Exception e){
        Log.e("log_tag","Error converting result"+e.toString());
    }
}

public JSONArray getjsonarray(){
    //parse json data
    try{
        JSONArray jArray = new JSONArray(result);
        return jArray;
    }
    catch(JSONException e){
        Log.e("log_tag","Error parsing data"+ e.toString());
        return null;
    }
}
} 
```

我正在验证用户并通过 Logi 活动。谢谢

# java - 在 CQ5 中搜索多个标签

> ID：12322312
> 
> 赞同：2
> 
> 时间：2012-09-07T16:51:24.750
> 
> 标签：java, search, aem

我正在使用 CQ5 的 SimpleSearch 类来执行搜索。我的要求之一是我必须检查标签是否存在（对于惰性形式的身份验证）。这很简单。问题在于我想检查这个标签是在“jrc:content/cq:tags”还是“jcr:content/metadata/cq:tags”中。所以因为我一直做不到。任何建议将不胜感激。谢谢！

这是代码：

```
 Predicate tagPredicate;
    Cookie[] tagsFromCookie = slingRequest.getCookies();

    tagPredicate = new Predicate("tags", "tagid");
    tagPredicate.set("property", "jcr:content/cq:tags");
    for (Cookie cookie : tagsFromCookie) {
        if (cookie.getName().contains(CREDENTIALS)) {
            tagPredicate.set("tagid",
                    (cookie.getValue().replaceAll("---", ":")));
                                            search.addPredicate(tagPredicate);
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T20:21:54.903

我自己没有使用过该`SimpleSearch`机制，但是文档指出您可以创建一个包含多个谓词的`PredicateGroup`（的子类），并且可以通过调用来指定逻辑运算符（AND/OR） 。`Predicate``setAllRequired()`

[http://dev.day.com/docs/en/cq/5-3/javadoc/com/day/cq/search/PredicateGroup.html](http://dev.day.com/docs/en/cq/5-3/javadoc/com/day/cq/search/PredicateGroup.html)

也许您可以尝试：

```
PredicateGroup group = new PredicateGroup("tags");

// This will set operator between each predicate to OR
group.setAllRequired(false);

Predicate tagPredicate = new Predicate("tags");
tagPredicate.set(JcrPropertyPredicateEvaluator.OPERATION, JcrPropertyPredicateEvaluator.OP_LIKE);
tagPredicate.set(JcrPropertyPredicateEvaluator.PROPERTY, "./jcr:content/cq:tags");
tagPredicate.set(JcrPropertyPredicateEvaluator.VALUE, cookieValue);
group.add(tagPredicate);

Predicate metaTagPredicate = new Predicate("metatags");
metaTagPredicate.set(JcrPropertyPredicateEvaluator.OPERATION, JcrPropertyPredicateEvaluator.OP_LIKE);
metaTagPredicate.set(JcrPropertyPredicateEvaluator.PROPERTY, "./jcr:content/metadata/cq:tags");
metaTagPredicate.set(JcrPropertyPredicateEvaluator.VALUE, cookieValue);
group.add(metaTagPredicate);

search.addPredicate(group);

// To debug and view your predicate tree you can invoke toString() on your predicate group 
```

**编辑：**忘了提及，使用`JcrPropertyPredicateEvaluator`，您可以执行类似于 的操作`jcr:like()`。对于`jcr:contains()`，您可能希望使用全文评估器。

或者，您可以直接构建并执行 JCR 查询。我发现它比创建谓词和使用`QueryBuilder API`. 这是一个非常简单的 XPath 示例：

```
StringBuilder queryBuilder = new StringBuilder();
queryBuilder.append("/jcr:root//*[jcr:contains(@cq:tags,");
queryBuilder.append(cookieValue);
queryBuilder.append(")] OR [jcr:contains(@metadata/cq:tags,");
queryBuilder.append(cookieValue);
queryBuilder.append(")]);

QueryManager manager = session.getWorkspace().getQueryManager();
Query query = manager.createQuery(queryBuilder.toString(), "xpath");
QueryResult result = query.execute();

// From the result you can then retrieve a NodeIterator to loop through the result set 
```

[http://www.day.com/maven/jsr170/javadocs/jcr-2.0/javax/jcr/query/Query.html](http://www.day.com/maven/jsr170/javadocs/jcr-2.0/javax/jcr/query/Query.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-11T17:16:23.723

我会对任何节点的 cq:tags 属性值做一个简单的[jcr 查询，所以](https://sling.apache.org/apidocs/sling6/org/apache/sling/api/resource/ResourceResolver.html#findResources%28java.lang.String,%20java.lang.String%29)

```
//element(*, nt:unstructured)[@cq:tags=COOKIEVALUE] 
```

然后，您可以处理结果以计算[包含页面](http://docs.adobe.com/docs/en/cq/current/javadoc/com/day/cq/wcm/api/PageManager.html#getContainingPage%28org.apache.sling.api.resource.Resource%29)或资产

# html - 编辑 Google 搜索为您的网站显示的段落

> ID：12322313
> 
> 赞同：1
> 
> 时间：2012-09-07T16:51:25.847
> 
> 标签：html, seo

我想知道如何编辑 Google 在您网站的搜索结果中显示的段落。

![（我不能发布图片，所以有我的意思的链接。）](../Images/e493eaa64ac7f39d1b29057ce54cafe4.png)

我需要做某个 html 标签来编辑它吗？我很难找到这个问题的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T16:54:24.340

来自 Google 本身， http: [//support.google.com/webmasters/bin/answer.py](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=35624#1) ?hl=en&answer=35624#1 ：

> 标记中的 description 属性是提供每个页面内容的简明易读摘要的好方法。谷歌有时会在搜索结果片段中使用页面的元描述，如果我们认为它为用户提供的描述比纯粹来自页面内容的描述更准确。准确的元描述有助于提高您的点击率；以下是正确使用元描述的一些指南。

因此，请使用，`<meta>`但没有给出谷歌是否或何时使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T16:54:53.807

是的，它被称为`meta`标签，您可以将其保留在`<head>`标签之间

```
<meta name="description" content="This is an example of a meta description. This will often show up in search results."> 
```

分配的值`content`将显示为描述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T16:56:34.890

这都是因为元标签的魔力，请参阅本文以了解更多信息 [http://searchenginewatch.com/article/2067564/How-To-Use-HTML-Meta-Tags](http://searchenginewatch.com/article/2067564/How-To-Use-HTML-Meta-Tags)

# sql - SQL 查询返回有和没有子记录的记录

> ID：12322318
> 
> 赞同：1
> 
> 时间：2012-09-07T16:51:44.177
> 
> 标签：sql

我有 3 个要查询的表，分别是客户、员工和佣金，大致如下所示：-

**客户**

```
ID - Code - Name 
```

**雇员**

```
ID - Code - Name 
```

**佣金**

```
ID - ClientCode - EmployeeCode - Percent 
```

现在，佣金表有每个客户/员工的多条记录，定义员工在为特定客户工作时的佣金百分比，但每个客户的佣金条目总和为 100% 例如：-

```
CL001 - EMP001 -  50.00

CL001 - EMP002 -  50.00

CL002 - EMP001 -  75.00

CL002 - EMP002 -  25.00

CL003 - EMP001 - 100.00 
```

但是，并非客户表中的每个客户在佣金表中都有一个条目（那些没有设置默认佣金的客户）。

我需要检索的是每个客户的记录，详细说明针对它设定的佣金。但是，我需要将结果包括没有定义任何佣金的客户，到目前为止我一直无法得到我需要的东西。

所以我想我的问题是，这看起来合理吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T16:54:03.830

你试过这个吗？

```
SELECT Clients.ID, Clients.Code, Clients.Name, Commission.Percent
FROM Clients
LEFT JOIN Commission ON Commission.ClientCode = Clients.Code 
```

# curl - 将openssl so库与android make文件链接

> ID：12322320
> 
> 赞同：2
> 
> 时间：2012-09-07T16:52:05.800
> 
> 标签：curl, android-ndk, openssl, libcurl

我使用以下链接 openssl [https://github.com/eighthave/openssl-android分别为 android ndk 构建了 curl 和 openssl](https://github.com/eighthave/openssl-android)

curl [http://thesoftwarerogue.blogspot.in/2010/05/porting-of-libcurl-to-android-os-using.html#comment-form](http://thesoftwarerogue.blogspot.in/2010/05/porting-of-libcurl-to-android-os-using.html#comment-form)

我还测试了可以使用 libcurl.so 的 http GET 的简单 curl 代码，现在如何在 curl 代码中使用 openssl 库（libssl.so，libcrypto.so）来尝试 https

请对此提供一些见解

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:10:06.417

您必须配置 libcurl 以启用 SSL，特别是使用 OpenSSL。使用配置脚本准备`curl_config.h`. 确保在此处设置了以下定义（适用于 Android 和 OpenSSL）：

```
#define HAVE_LIBSSL 1
#define USE_OPENSSL 1
#define USE_SSLEAY 1
#define HAVE_OPENSSL_CRYPTO_H 1
#define HAVE_OPENSSL_ERR_H 1
#define HAVE_OPENSSL_PEM_H 1
#define HAVE_OPENSSL_PKCS12_H 1
#define HAVE_OPENSSL_RSA_H 1
#define HAVE_OPENSSL_SSL_H 1
#define HAVE_OPENSSL_X509_H 1 
```

使用此定义重新编译 lib curl。现在您可以访问 https 链接。

# excel - Excel下拉列表：快速选择？

> ID：12322328
> 
> 赞同：5
> 
> 时间：2012-09-07T16:52:35.873
> 
> 标签：excel

我有一个 Excel 文档从另一个 xls 中提取项目作为列表项来填充下拉菜单。问题是，有很多选择。我找不到快速前往我想去的地方的方法。（例如，打开下拉列表并按“b”不会像大多数普通下拉菜单那样进入 B）

这可能吗？或者，一旦用户开始输入下拉菜单，是否有某种方法可以自动完成下拉菜单？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-10T09:27:48.120

尽管这是一篇旧文章，但我想对其进行改进，因为关于此的信息并不多。我想补充 3 个重点：

1.  从原始列表复制和粘贴时，请使用`Paste Special`>`Paste link`选项。这样，当您的原始列表更新时，此隐藏列表也将更新。

2.  有时无法直接在上方或下方添加此列表。对于自动完成功能，这不是必需的。唯一需要的是`data link`下拉框和下方或上方项目的链接列表之间有一个。例如，假设您的下拉框在 field 上`B5`。您的列表可以从 开始`B15`，前提是在 A、B 或 C 列中的第 5 行和第 15 行之间存在数据链接（将其视为必须连接/连续的链。）。`Data`可以是这些连接单元格中填充的任何内容，甚至是空格。因此，在我们的示例中，我们只需要在单元格中添加空格，`B6`以便`B14`自动完成功能正常运行。这些数据单元格也可以在`A5:A15`或`C5:C15`. 这听起来很奇怪，但我已经对此进行了大量测试。自己试试吧！

3.  我想说的最后一点是能够输入字母并让下拉列表自动完成。当您使用数据验证下拉列表和自动完成时，它们实际上是*两个不同的数据下拉列表*。如果您输入单元格并按键盘快捷键`Alt`+ `Down Arrow`，您将获得在您设置的验证中使用的下拉列表。如果你先输入一个字母，然后按`Alt`+`Down Arrow`你会得到自动完成下拉列表（当前在列中的项目列表，由数据链接，隐藏与否。）

    *现在这里有点棘手和奇怪*。如果您有一个很大的项目列表，超过 1000 个，在您输入第一个或多个字母后，Excel 会在列中对可能的选项进行背景搜索，以从上到下自动填充。如果这是一个按字母顺序排列的名称列表，并且您输入了 B，然后按`Alt`+ `Down arrow`，则 B 名称应该会很快出现。（如果在输入字母后不等待一两秒钟。）如果此列表很大并且您要查找的名称位于列表底部，则 excel 查找这些项目所需*的秒数将会增加。*因此，如果您要查找以 X 开头的名称，请输入 X，等待几秒钟，*然后*按`Alt`+`Down Arrow`，并且您的列表应显示以 X 开头的名称。随着列表长度和机器速度的不同，所需的时间量需要反复试验。

这似乎是很多细节。但是，如果您要求人们从一个大列表中选择一个名称，并且无法在下拉列表中滚动超过 3,000 个名称，那么上述信息将很有帮助，因为最终用户可以节省大量定位时间项目。我制作了一个视频，概述了 Excel 中的自动完成功能，突出显示了该`Don't Break The Chain`方法： [https ://youtu.be/PVEzHbdHf1Y](https://youtu.be/PVEzHbdHf1Y)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T17:00:15.127

> 转到工具>选项 - 编辑并选中为单元格启用自动完成
> 
> 值将您的项目列表移动到紧接在上方的范围内
> 
> 验证单元。隐藏验证单元格上方的行。

取自这里：

[http://www.ozgrid.com/Excel/autocomplete-validation.htm](http://www.ozgrid.com/Excel/autocomplete-validation.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-26T02:49:28.203

我有另一种方法，用于`Offset()`从输入下拉单元格的文本点开始列表。

例如，输入国家/地区`Can`列表将以 . 开头`Canada`。只需键入`C`就会以`Cambodia`.

**请注意**，确实需要关闭错误警报才能使其正常工作。

关键是使用如下公式作为列表源。

```
=OFFSET(<I>CountriesListFirstCell</I>,MATCH(<I>DropDownCell</I>&"*",<I>CountriesListcolumn</I>,0)-2,0,COUNTA(<I>CountriesListColumn</I>)-MATCH(<I>DropDownCell</I>&"*",<I>CountriesListColumn</I>,0)+1,1) 
```

# php - 根据用户输入过滤多维数组

> ID：12322329
> 
> 赞同：2
> 
> 时间：2012-09-07T16:52:36.407
> 
> 标签：php

我在这里找到了一个关于如何过滤多维数组的优秀教程： [PHP filter 2 dimensional array by specific key](https://stackoverflow.com/questions/7341033/php-filter-2-dimensional-array-by-specific-key)

尽管

```
$filtered = array_filter(
    $array, 
    function($v) { 
        return $v['type'] == 'folder'; 
    }
); 
```

在仅显示文件夹条目方面确实完全符合我的需要，我需要能够根据用户输入过滤数组。

因此，从我上面提到的页面上使用的示例中，文件夹和页面会有一个复选框，然后根据用户选择的内容（页面、文件夹或两者），将显示他们的选择。

我遇到的问题是我似乎无法使用变量来存储 $v['type'] == 'folder'。

我希望做类似的事情：

```
$filtered = array_filter($array, function($v) { return $userSelections; }); 
```

我还探索了使用 eval() 的可能性（我知道这可能不是最好的主意，但我已经尝试了我能想到的所有其他方法）来提供变量的内容，但这似乎也不起作用.

这里的任何建议都会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:54:55.443

这可能是因为闭包内的变量范围。尝试以下操作：

```
$filtered = array_filter($array, 
    function($v) use ($userinput) { 
        return in_array($v['type'], $_POST['userSelections']); 
    }
); 
```

随着`use`你声明一个外部变量可以从闭包内部访问 - 你可以说它是“全局的”。

编辑：我从下面包含了最终解决方案。

# c# - 如何使用 Linq 获得此分组结果

> ID：12322330
> 
> 赞同：0
> 
> 时间：2012-09-07T16:52:37.053
> 
> 标签：c#, linq

我有一个类 Foo 如下。

```
public class Foo
{
    public string Name { get; set; }
    public string Value { get; set; }   
} 
```

我有一个此类的集合，比如说列表，有时我在集合中有如下数据。

```
名称 值   
吉米你好   
吉米世界   
彼得如何  
彼得是你吗？   
苏珊娜 我很好

```

我想将相同名称的值字段组合为以下内容

```
名称 值  
吉米你好世界  
彼得你好吗？  
苏珊娜 我很好  

```

无论如何这可以使用Linq来完成吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T16:55:36.510

`GroupBy`您可以按如下方式使用 Linq ：

```
fooCollection.GroupBy(foo => foo.Name)

    // create a new "Foo" object based on each grouping
    .Select(g => new Foo() { 

        // "Name" becomes the group key (ie, "Jimmy", "Peter", etc)
        Name = g.Key, 

        // "Value" becomes the Value for all Foo in this group, concatenated
        Value = string.Join(" ", g.Select(item => item.Value).ToArray()) 
    })
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T17:18:59.250

这在我看来像是某种聊天功能。所有其他答案都适合常规使用，并且适用于您提供的示例案例，但我相信您需要进行连续分组。

假设您有这样的数据：

```
Name Value
Jimmy hello
Jimmy world
Peter how
Peter are you?
Suzanne I am fine
Jimmy OK, bye 
```

注意底部的另一个 Jimmy 值。如果您像其他人建议的那样仅使用常规分组，结果将是：

```
Name Value
Jimmy hello world OK, bye
Peter how are you?
Suzanne I am fine 
```

你可能会想要这样的东西：

```
Name Value
Jimmy hello world
Peter how are you?
Suzanne I am fine 
Jimmy OK, bye 
```

看看这个 SO 问题，了解如何进行连续分组：[如何使用 Linq (C#) 分隔所有连续对象](https://stackoverflow.com/questions/4100375/how-to-separate-all-consecutive-objects-using-linq-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T16:57:43.820

```
from a in myList
group a by a.Name
into g
select new Foo {
                 Name = g.Key.Name,
                 Value = string.Join(" ",g.Select(x=>x.Value).ToArray()
               }; 
```

# django - Django：根据字段值是否在列表中排序QuerySet

> ID：12322333
> 
> 赞同：1
> 
> 时间：2012-09-07T16:53:02.023
> 
> 标签：django, sorting, django-queryset

我试图通过模型字段值是否在列表中来订购 Django QuerySet。

我知道您可以过滤此属性，如下所示：

`my_qs = MyModel.objects.filter(id__in=[1,3,5,11])`

只会给我 ID 为 1、3、5 和 11 的 MyModel 对象。

我想在这家酒店订购。使用上面的示例，我希望首先在列表中拥有带有 id 的 MyModel 对象，但仍然有所有其他 MyModel 对象，就在它们之后。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:12:28.393

```
my_qs = MyModel.objects.filter(id__in=[1,3,5,11])
not_my_qs = MyModel.objects.exclude(id__in=[1,3,5,11])

from itertools import chain
result_list = list(chain(my_qs, not_my_qs)) 
```

# node.js - 将变量传递给 Jade without Express

> ID：12322339
> 
> 赞同：5
> 
> 时间：2012-09-07T16:53:42.863
> 
> 标签：node.js, express, pug

关于 Jade 模板引擎的快速问题：

*   不使用时如何将`node.js`变量传递给`.jade`模板`express.js`？

我正在尝试制作一个不使用 express 的小型网站，以便我可以了解一切是如何运作的。

还有，有没有关于Jade的使用教程或者文章，`node.js`没有express？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T17:02:50.973

```
var jade = require('jade');
jade.renderFile('tpl.jade', { hello: 'world' }, function(err, html) {
        console.log(err);
        console.log(html);
}); 
```

**tpl.jade:**

```
html
  body
    h1 #{hello} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-21T21:53:04.923

[Vadim](https://stackoverflow.com/a/12322449/1476885)的回答很好，但很旧。[它使用与 Jade官方教程](http://jade-lang.com/tutorial/#Javascript)中当前使用的语法不同的语法来声明 Jade 变量。此外，它没有显示如何使用[Jade options](http://jade-lang.com/api/)。

## 简单示例

**索引.jade**

```
doctype html
html
  head
    title= pageTitle
  body
    h1= greetings 
```

在这个例子中，变量是**pageTitle**和**greetings**。

**应用程序.js**

```
var jade = require('jade');

var locals = {
  pageTitle : 'My Page',
  greetings : 'Hello World!'
};

jade.renderFile('index.jade', locals, function(err, html) {
  console.log(html);
}); 
```

**输出：**

```
<!DOCTYPE html><html><head><title>My Page</title></head><body><h1>Hello World!</h1></body></html> 
```

## 使用翡翠选项

前面的示例输出的 HTML 没有漂亮的打印。这不是问题，但 Jade 有一个选项可以输出漂亮的打印 HTML。您可以在[此处](http://jade-lang.com/api/)查看完整的选项列表。

Jade 的[官方教程](http://jade-lang.com/tutorial)不会教您在模板中还有变量时如何使用选项。Jade 的[GitHub 页面](https://github.com/jadejs/jade)尝试进行教学，但不完整。它用：

```
jade.renderFile('filename.jade', merge(options, locals)); 
```

作为`merge`一个未定义的函数，你必须定义它。此函数将合并两个 JSON 对象。

**应用程序.js**

```
var jade = require('jade');

function merge(obj1, obj2) {
  var result = {};

  for(var key in obj1) 
    result[key] = obj1[key];

  for(var key in obj2) 
    result[key] = obj2[key];

  return result;
}

var options = {
  pretty : true
};

var locals = {
  pageTitle : 'My Page',
  greetings : 'Hello World!'
};

jade.renderFile('index.jade', merge(options, locals), function(err, html) {    
  console.log(html);
}); 
```

**输出：**

```
<!DOCTYPE html>
<html>
  <head>
    <title>My Page</title>
  </head>
  <body>
    <h1>Hello World!</h1>
  </body>
</html> 
```

# sql - 如何在 PIVOT 中用 0 输出替换（空）值

> ID：12322342
> 
> 赞同：56
> 
> 时间：2012-09-07T16:54:00.413
> 
> 标签：sql, sql-server, pivot

我尝试在 PIVOT 函数中将（空）值转换为 0（零）输出，但没有成功。

下面是我尝试过的表格和语法：

```
SELECT
CLASS,
[AZ],
[CA],
[TX]
FROM #TEMP
PIVOT (SUM(DATA)
FOR STATE IN ([AZ], [CA], [TX])) AS PVT
ORDER BY CLASS

CLASS   AZ  CA      TX
RICE    10  4       (null)
COIN    30  3        2
VEGIE   (null) (null) 9 
```

我尝试使用`ISNULL`但没有用。

```
PIVOT SUM(ISNULL(DATA,0)) AS QTY 
```

我需要使用什么语法？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-07T16:57:28.880

```
SELECT CLASS,
isnull([AZ],0),
isnull([CA],0),
isnull([TX],0)
FROM #TEMP
PIVOT (SUM(DATA)
FOR STATE IN ([AZ], [CA], [TX])) AS PVT
ORDER BY CLASS 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-07-08T16:11:59.390

如果您在数据透视语句中使用动态列，则可以使用以下内容：

```
DECLARE @cols               NVARCHAR(MAX)
DECLARE @colsWithNoNulls    NVARCHAR(MAX)
DECLARE @query              NVARCHAR(MAX)

SET @cols = STUFF((SELECT distinct ',' + QUOTENAME(Name) 
            FROM Hospital
            WHERE Active = 1 AND StateId IS NOT NULL
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

SET @colsWithNoNulls = STUFF(
            (
                SELECT distinct ',ISNULL(' + QUOTENAME(Name) + ', ''No'') ' + QUOTENAME(Name)
                FROM Hospital
                WHERE Active = 1 AND StateId IS NOT NULL
                FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

EXEC ('
        SELECT Clinician, ' + @colsWithNoNulls + '
        FROM
        (
            SELECT DISTINCT p.FullName AS Clinician, h.Name, CASE WHEN phl.personhospitalloginid IS NOT NULL THEN ''Yes'' ELSE ''No'' END AS HasLogin
            FROM Person p
            INNER JOIN personlicense pl ON pl.personid = p.personid
            INNER JOIN LicenseType lt on lt.licensetypeid = pl.licensetypeid
            INNER JOIN licensetypegroup ltg ON ltg.licensetypegroupid = lt.licensetypegroupid
            INNER JOIN Hospital h ON h.StateId = pl.StateId
            LEFT JOIN PersonHospitalLogin phl ON phl.personid = p.personid AND phl.HospitalId = h.hospitalid
            WHERE ltg.Name = ''RN'' AND
                pl.licenseactivestatusid = 2 AND
                h.Active = 1 AND
                h.StateId IS NOT NULL
        ) AS Results
        PIVOT
        (
            MAX(HasLogin)
            FOR Name IN (' + @cols + ')
        ) p
') 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-09-07T16:56:30.787

您不能`IsNull()`在选择数据之后放置直到，因此您将`IsNull()`在最终值周围放置`SELECT`：

```
SELECT CLASS,
  IsNull([AZ], 0) as [AZ],
  IsNull([CA], 0) as [CA],
  IsNull([TX], 0) as [TX]
FROM #TEMP
PIVOT 
(
  SUM(DATA)
  FOR STATE IN ([AZ], [CA], [TX])
) AS PVT
ORDER BY CLASS 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-07T16:57:59.760

有时最好像解析器一样思考，例如 T-SQL 解析器。在执行语句时，解析器在 Pivot 部分中没有任何值，并且您在该部分中不能有任何检查表达式。顺便说一句，您可以简单地使用它：

```
SELECT  CLASS
,   IsNull([AZ], 0)
,   IsNull([CA], 0)
,   IsNull([TX], 0)
    FROM #TEMP
    PIVOT (
        SUM(DATA)
        FOR STATE IN (
            [AZ]
        ,   [CA]
        ,   [TX]
        )
    )   AS  PVT
    ORDER   BY  CLASS 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-03-19T19:38:33.857

您必须考虑数据透视集中的所有值。您可以使用笛卡尔积来完成此操作。

```
select pivoted.*
from (
    select cartesian.key1, cartesian.key2, isnull(relationship.[value],'nullvalue') as [value]
    from (
      select k1.key1, k2.key2
      from ( select distinct key1 from relationship) k1
          ,( select distinct key2 from relationship) k2
    ) cartesian
      left outer join relationship on relationship.key1 = cartesian.key1 and  relationship.key2 = carterisan.key2
) data
  pivot (
    max(data.value) for ([key2_v1], [key2_v2], [key2_v3], ...)
  ) pivoted 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-24T07:08:41.957

我遇到了类似的问题。根本原因是（在我的情况下使用您的方案），在#temp 表中，没有以下记录：

一个。`CLASS=RICE and STATE=TX`
湾。`CLASS=VEGIE`和 (`STATE=AZ`或`STATE=CA`)

因此，当 MSSQL 没有记录时，MSSQL 总是为 MAX、SUM、...（聚合函数）显示 NULL。

以上解决方案 (IsNull([AZ], 0)) 都不适合我，但我确实从这些解决方案中获得了一些想法。

抱歉，这真的取决于#TEMP 表。我只能提供一些建议。

1.  确保#TEMP 表有以下条件的记录，即使数据为空。

    一个。CLASS=RICE 和 STATE=TX
    b. CLASS=VEGIE 和（STATE=AZ 或 STATE=CA）

    您可能需要使用笛卡尔积：`select A.*, B.* from A, B`

2.  在 #temp 的选择查询中，如果您需要使用 WHERE 连接任何表，那么最好将 where 放在另一个子选择查询中。（目标是 1。）

3.  `isnull(DATA, 0)`在#TEMP 表中使用。

4.  在进行支点之前，请确保您已实现目标 1。

我无法回答原始问题，因为#temp 表没有足够的信息。我在这里粘贴了我的代码作为示例。

```
SELECT * FROM (
            SELECT eeee.id as enterprise_id
            , eeee.name AS enterprise_name
            , eeee.indicator_name
            , CONVERT(varchar(12) , isnull(eid.[date],'2019-12-01') , 23) AS data_date
            , isnull(eid.value,0) AS indicator_value
            FROM (select ei.id as indicator_id, ei.name as indicator_name, e.* FROM　tbl_enterprise_indicator ei, tbl_enterprise e) eeee                                             
            LEFT JOIN  (select * from　tbl_enterprise_indicator_data WHERE [date]='2020-01-01') eid
                    ON  eeee.id = eid.enterprise_id and eeee.indicator_id = enterprise_indicator_id
        ) AS P 
        PIVOT 
        (
            SUM(P.indicator_value) FOR P.indicator_name IN(TX,CA)
        ) AS T 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-28T21:26:26.087

要修改数据透视下的结果，您可以将列放在选定的字段中，然后相应地修改它们。可能您可以对使用数据透视函数构建的列使用 DECODE。

*   克兰蒂

# python - Python lxml：如何使用 xml 文件中定义的 xml 模式文件验证文件

> ID：12322345
> 
> 赞同：2
> 
> 时间：2012-09-07T16:54:01.023
> 
> 标签：python, xml, xsd, lxml

我正在使用 Python lxml 库来解析 xml 文件。我需要根据 xml 模式验证 xml 文件。lxml 支持 XML 模式验证，但必须提供 xml 模式文件路径/内容（此处提供信息：http: [//lxml.de/validation.html](http://lxml.de/validation.html)）。但是，我事先并不知道 xml 架构文件路径，它应该从 xml 文件头标签中解析出来。我找不到访问这些标签的方法。

lxml 以某种方式支持这个用例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:16:11.760

如果架构是使用根元素上的属性链接的，则在`http://www.w3.org/2001/XMLSchema-instance`命名空间中，您可以通过在属性名称前面加上花括号中的命名空间 URL 来使用 lxml 检索这些：

```
XMLSchemaNamespace = '{http://www.w3.org/2001/XMLSchema-instance}'
document = lxml.parse(xmlfile)
schemaLink = document.get(XMLSchemaNamespace + 'schemaLocation')
if schemaLink is None:
    schemaLink = document.get(XMLSchemaNamespace + 'noNamespaceSchemaLocation') 
```

然后使用 URL 库从引用的位置加载架构。有关更多信息，请参阅[lxml 命名空间处理](http://lxml.de/tutorial.html#namespaces)。

# objective-c - 从 NSInputStream 读取字符串数据是否存在字节顺序问题

> ID：12322348
> 
> 赞同：5
> 
> 时间：2012-09-07T16:54:04.407
> 
> 标签：objective-c, cocoa-touch, endianness, external-accessory

我正在通过外部附件框架从第三方源（例如硬件）写入的 NSInputStream 读取二进制数据并将其转换为字符串。是否存在我应该关注的字节顺序问题，即我应该询问硬件提供商他们在发送字符串时使用什么字节顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:05:48.633

正如人们所说，如果您使用的是 ASCII 或 UTF8，则可能不会。现在的大多数处理器，即使在专用设备中，也使用小端。

在不相关的说明中，如果您通过外部附件进行联网，您可能需要注意网络和主机字节顺序。

# ruby-on-rails - Rails 应用程序邪恶的路由错误

> ID：12322349
> 
> 赞同：3
> 
> 时间：2012-09-07T16:54:06.780
> 
> 标签：ruby-on-rails, ruby, routes

我正在自杀试图解决这个路由错误。

一些背景信息：我正在使用 Ryan Bates 的 Rails Cast on Wicked Wizard Forms 创建一个多步骤表单。我收到路由错误：

```
No route matches {:controller=>"user_steps", :action=>"show", :id=>nil} 
```

显然，`user.id`没有被传递到后续视图 - 任何想法如何解决这个问题？

用户控制器创建：

```
def create
    @user = User.new(params[:user])
    respond_to do |format|
      if @user.save
        session[:user_id] = @user.id
        format.html { redirect_to user_steps_path(@user) }
        #format.html { redirect_to @user, notice: 'User was successfully created.' }#
        format.json { render json: @user, status: :created, location: @user }
      else
        format.html { render action: "new" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end 
```

用户步骤控制器（用于 Wicked）

```
class UserStepsController < ApplicationController
    include Wicked::Wizard
    steps :gender, :items, :brands, :final

    def show
        render_wizard
    end 

    def update
        @user.update_attributes(params[:user])
        render_wizard @user
    end
end 
```

路线：

```
Store::Application.routes.draw do

  resources :likes

  resources :categories

  resources :user_steps

  match "user_steps/gender", to: "user_steps#gender", via: "post"
  resources :users 
```

users_steps/gender.html.erb

```
<%= form_for :user, url: wizard_path do |f| %>

<div class="container" align="center">
  <div class="div2" align="center">
    <h2 align="center"> You are a ...</h2>
    <div class="container" align="center">
      <div class="row" align="center">
        <div class="span6">
          <h9>Guy</h9>
          <label for="user_gender_guy"><img src="http://i.imgur.com/bpIMo.png" class="new" width="200" height="500"></label>
          <input checked="checked" id="user_gender_guy" name="user[gender]" type="radio" value="Guy" /> 
        </div>
        <div class="span6">
          <h9>Girl</h9>
          <label for="user_gender_girl"><img src="http://i.imgur.com/xpA1S.png" class="new" width="200" height="500"></label>
          <input checked="checked" id="user_gender_girl" name="user[gender]" type="radio" value="Girl" />
        </div>
      </div>
    </div>
    </div> 
</div>

<%= f.submit "Next" %>
<% end %> 
```

耙路线：

```
user_steps GET    /user_steps(.:format)          user_steps#index
                  POST   /user_steps(.:format)          user_steps#create
    new_user_step GET    /user_steps/new(.:format)      user_steps#new
   edit_user_step GET    /user_steps/:id/edit(.:format) user_steps#edit
        user_step GET    /user_steps/:id(.:format)      user_steps#show
                  PUT    /user_steps/:id(.:format)      user_steps#update
                  DELETE /user_steps/:id(.:format)      user_steps#destroy
user_steps_gender POST   /user_steps/gender(.:format)   user_steps#gender 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:12:31.017

在您的 user_controller#create 方法中尝试更改

`redirect_to user_steps_path(@user)` 到

`redirect_to user_steps_path(:gender)`

另外，我认为您的路由文件中不需要此行：

`match "user_steps/gender", to: "user_steps#gender", via: "post"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T04:30:36.980

您正在覆盖 :id 参数，wicked 使用该参数来控制步骤。要传递其他查询字符串参数，您需要使用第二个 arg（选项哈希）到 user_steps_path，这意味着您需要提供 :id（步骤）作为第一个 arg。

```
redirect_to user_steps_path(:gender, :user_id => @user.id) 
```

然后在你的控制器中：

```
def show
    @user = User.find(params[:user_id])
    render_wizard
end 
```

最后在你看来（不要忘记 :method => :put）；

```
<%= form_for @user, url: wizard_path, method: put do |f| %>
    ...    
<%= f.submit "Next" %>
<% end %> 
```

虽然不确定为什么不使用表单辅助变量 f 来生成字段（例如 <%= f.radio_button :gender, "Guy" %>），但它应该仍然可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T17:02:37.873

在用户控制器中，
`redirect_to user_steps_path(@user)`
我认为这可以解决您的问题。

# ruby - 与 RVM 捆绑。没有找到红宝石

> ID：12322350
> 
> 赞同：1
> 
> 时间：2012-09-07T16:54:09.427
> 
> 标签：ruby, gem, rvm, bundler

我使用 RVM 安装了 Ruby，但是在使用 bundler 时遇到了问题。

```
$ bundle -v
/usr/bin/env: ruby: File or directory not found 
```

其他命令有效：

```
$ ruby -v
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]
$ rails -v
Rails 3.2.8
$ gem -v
1.8.24 
```

谁能帮我？其他一些可以帮助您的信息：

```
$ which ruby
/home/gabriel/.rvm/bin/ruby
$ which bundle
/home/gabriel/.rvm/bin/bundle
$ which rails
/home/gabriel/.rvm/gems/ruby-1.9.3-p194/bin/rails
$ gem list | grep bundle
  bundler (1.2.0)
  rubygems-bundler (1.0.7)
$ rvm -v
  rvm 1.15.8 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/] 
```

我在 .bashrc 中的路径配置如下：

```
GEM_HOME="/home/gabriel/.rvm/gems/ruby-1.9.3-p194"
GEMGLOBAL_HOME="/home/gabriel/.rvm/gems/ruby-1.9.3-p194@global"

export PATH=$PATH:$GEM_HOME/bin:$GEMGLOBAL_HOME/bin:$HOME/.rvm/bin:$MONGODB_HOME/bin 
```

我是红宝石的新手，有人可以帮助我吗？非常感谢。祝你有美好的一天 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T07:48:05.830

如果您使用的是 Gnome 终端，您还必须在“编辑 -> 配置文件首选项 -> 标题和命令”中设置“以登录 shell 方式运行命令”。如果你不这样做，rvm use 命令将不起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:16:01.233

您应该使用默认值来加载 ruby​​：

```
rvm use 1.9.3 --defaut 
```

并在终端 rvm 中使用登录 shell 将自动负责设置环境

# c# - 将 C# 连接到远程 MySQL 数据库

> ID：12322355
> 
> 赞同：2
> 
> 时间：2012-09-07T16:54:27.060
> 
> 标签：c#, mysql

我正在尝试将 C# 应用程序连接到位于远程服务器中的 MySQL 数据库。当我尝试执行这个简单的程序时，我收到以下错误：`sqlException was unhandled`

```
private void button1_Click(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection("user id=student_abdo;password=XXXXXX;server=178.239.167.XXX;Trusted_Connection=yes;database=student_sms;connection timeout=30");
    SqlCommand com = new SqlCommand("UPDATE `sms` SET `id`=23 WHERE `sms`='hi'",con);
    com.CommandType = CommandType.Text;
    con.Open();
    com.ExecuteNonQuery();
    con.Close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T16:56:38.687

SqlClient 命名空间用于连接到 Microsoft SqlServer 数据库。如果您想使用 MySql，您需要找到一个 ADO.NET 实现（第 3 方）或确定是否有办法使其与 OleDb/Odbc 一起使用。

**更新**

显然，MySql 提供[了自己的 ADO.NET 驱动程序](http://dev.mysql.com/downloads/connector/net/6.1.html "自己的api")来完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T17:10:48.203

正如布赖恩指出的那样，您使用了错误的提供程序。此外，您的连接字符串是错误的。它应该读

```
"Server=myServerAddress;Database=myDataBase;Uid=myUsername;Pwd=myPassword;" 
```

您可以参考[此站点](http://www.connectionstrings.com/mysql)以获取 mysql 的所有不同连接字符串类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T17:21:13.263

[这](http://dev.mysql.com/downloads/connector/net/) 是您需要下载的内容

请记住，在 .NET 中使用 MySql 的类与使用 MSSQL 基本相同，只是它们具有 My... 前缀

```
private void button1_Click(object sender, EventArgs e)
{
MySqlConnection con = new MySqlConnection("userid=student_abdo;password=XXXXXX;server=178.239.167.XXX;Trusted_Connection=yes;database=student_sms;connection timeout=30");
MySqlCommand com = new MySqlCommand("UPDATE `sms` SET `id`=23 WHERE `sms`='hi'",con);
com.CommandType = CommandType.Text;
con.Open();
com.ExecuteNonQuery();
con.Close();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-30T18:10:13.130

首先，你知道什么是连接字符串的形式，然后建立与数据库的连接。

```
<a href="http://www.technomakes.net/2016/10/bb-rec-screen-recorder-iOS.html">bb rec</a>

private void btnretrive_Click(object sender, EventArgs e)
{
    string cs = "server=localhost;user id=root;database=world;";
    SqlConnection conn = new SqlConnection(cs);
    conn.Open();
    SqlCommand cmd = new SqlCommand("select * from world;",conn);
    SqlDataReader reader = cmd.ExecuteReader();

    DataTable table = new DataTable();
    table.Load(reader);
    dataGridView1.DataSource = table;
    conn.Close();
} 
```

# android - 如何制作 DialogFragment 模态？

> ID：12322356
> 
> 赞同：7
> 
> 时间：2012-09-07T16:54:31.757
> 
> 标签：android, android-fragments, modal-dialog, android-dialogfragment

我有一个 DialogFragment ：

```
public static class CharacteristicDialog extends DialogFragment {
        int mNum;

        static CharacteristicDialog newInstance(int num) {
            CharacteristicDialog f = new CharacteristicDialog();            
            Bundle args = new Bundle();
            args.putInt("num", num);
            f.setArguments(args);
            return f;
        }

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            mNum = getArguments().getInt("num");
            setStyle(STYLE_NO_INPUT, 0);        
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            View v = inflater.inflate(R.layout.characteristic_dialog, container, false);
            v.setOnClickListener(new OnClickListener() {                
            @Override
            public void onClick(View v) {
                dismiss();
            }
        });
    } 
```

我在我的主要片段中创建它，如下所示：

```
 DialogFragment newFragment = CharacteristicDialog.newInstance(v.getId());
        newFragment.setShowsDialog(true);
        newFragment.show(getFragmentManager(), "dialog"); 
```

它显示得很好，但它不是模态的（我可以单击侧面并在对话框后面的主要片段上进行操作）。

我如何使它成为模态的？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-10-26T18:08:17.567

这对我有用。

```
myDialogFragment.setCancelable(false); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T18:05:02.590

只需将`STYLE_NO_INPUT`то更改`STYLE_NORMAL`为您的`setStyle()`方法即可。有关 DialogFragment 样式和主题的更多信息，请查看文档：http: [//developer.android.com/reference/android/app/DialogFragment.html](http://developer.android.com/reference/android/app/DialogFragment.html)

# jquery - 使用 Jquery AJAX 从 ASP.NET Web 服务器获取对象

> ID：12322367
> 
> 赞同：4
> 
> 时间：2012-09-07T16:55:06.747
> 
> 标签：jquery, asp.net, ajax, web-services, post

我正在尝试使用 Jquery Ajax post 方法调用 asp.net Web 服务，例如：

```
$.ajax({
    type: "POST",
    url: this._baseURL + method,
    data: data,
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: fnSuccess,
    error: fnError
}); 
```

在服务器端，我有看起来像的网络方法

```
public myClass myWebMethod(Guid Id) { ... } 
```

问题是我得到一个错误的回报，说“500 内部服务器错误”和

> 无效的 Web 服务调用，缺少参数值：\u0027Id\u0027。

我已经尝试过这个数据：

`'{"Id":"thisistheid"}'`和`'{ Id:thisistheid}'`

...以及我在示例中找到的许多其他组合。

请问有人知道如何处理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:56:02.380

试试看

```
data : {Id :"thisistheid"} 
```

对象周围没有引号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T10:20:56.897

谢谢Fabrizio，这是答案的一部分！我终于想通了：

```
data = {Id :"thisistheid"};
...
$.ajax({
...
    data: JSON.stringify(data),
...
}); 
```

奇迹般有效。

# c# - 使用 LINQ 连接到不同的数据库

> ID：12322369
> 
> 赞同：0
> 
> 时间：2012-09-07T16:55:09.740
> 
> 标签：c#, database, linq-to-sql

我需要编写简单的实用程序，它将连接到不同的数据库。使用 LINQ 会很好。如何使用 LINQ 创建自定义连接？例如，表单将包含 4 个文本框：服务器、数据库名称、登录名和密码。我需要用这个参数创建连接字符串。

我知道如何通过 ADO 做到这一点，但我需要使用 LINQ。

PS LINQ 到 SQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:59:58.393

您可以使用[SqlConnectionStringBuilder](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.aspx)从输入构建连接字符串，然后将其传递给 DataContext 的构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:59:02.877

SqlConnectionStringBuilder 对有效的键/值对执行检查。因此，您不能使用此类创建无效的连接字符串；尝试添加无效对将引发异常。该类维护一个固定的同义词集合，并且可以从同义词转换为相应的知名键名。

# ios - 关于 CoreData 和预填充模型的问题

> ID：12322371
> 
> 赞同：0
> 
> 时间：2012-09-07T16:55:21.427
> 
> 标签：ios, sqlite, core-data

为了在第一次启动时在我的应用程序中预填充 CoreData，我包含了一个 PreModel.sqlite 文件，该文件以前由应用程序从它从 Web 服务下载的数据中创建，其中包括图像。

为了填充模型，我这样做：

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{    
    if (_persistentStoreCoordinator != nil) {
        return _persistentStoreCoordinator;
    }

    NSLog(@"creating new store");

    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"PreModel.sqlite"];

    if(![[NSFileManager defaultManager] fileExistsAtPath:[storeURL path]]) {

        NSString *sqlitePath = [[NSBundle mainBundle] pathForResource:@"PreModel" ofType:@"sqlite"];
        if (sqlitePath) {
            NSError *error = nil;
            [[NSFileManager defaultManager] copyItemAtPath:sqlitePath toPath:[storeURL path] error:&error];
            if (error) {
                NSLog(@"Error copying sqlite database: %@", [error localizedDescription]);
            }
        }
    }     

    NSError *error = nil;
    _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {

        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }   

    return _persistentStoreCoordinator;
} 
```

它似乎工作。但我有两个问题：

1.  如果 sqlite 文件只是一个数据库文件并且实际上不包含任何图像，那么应用程序如何在首次启动时查找和加载图像？
2.  即使在应用程序的后续运行中，我每次都会看到“创建新商店”记录。为什么`_persistentStoreCoordinator`总是零？我清楚地在代码中设置它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:08:32.930

1.  可以将图像存储在数据库文件中，通常作为二进制 blob（看起来像 Core Data 中的 NSData 实例）。如果您可以提供有关您的模型或存储/加载图像的代码的更多信息，我们可以更具体。
2.  在这种情况下，每次启动应用程序时，都会记录*“*创建新商店” 。尽管 SQLite 文件在磁​​盘上是持久的，但您不能期望代码中的数据结构在应用程序终止时仍然存在 - 您需要在程序每次启动时为其创建一个新的持久存储对象。

    Think of it like assigning `NSInteger x = 10`, then expecting to be able to quit and relaunch your program while maintaining that `x` has the value 10\. That's not how programs work - you'd need to reassign `x = 10` before you can expect to read `x` and get 10 back. The variable `_persistentStoreCoordinator` works the same way here.

# entity-framework - 实体框架将数据检索为列表（字符串）

> ID：12322376
> 
> 赞同：0
> 
> 时间：2012-09-07T16:55:49.193
> 
> 标签：entity-framework

我有以下代码从县表中选择给定 stateid 的所有县。

```
 Public Shared Function GetCountiesfromState(statename As String) As List(Of String)
    Dim context As New Model.teckEntities()
    Dim query = From c In context.counties Where c.stateId = 7 Select c
    Return query.ToList()
End Function 
```

我收到查询返回模型列表的任何错误。关于错误所在的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:17:47.703

如果 County 实体上有一个`Name`（或`Title`）字段，它应该很简单：

```
Public Shared Function GetCountiesfromState(statename As String) As List(Of String)
    Dim context As New Model.teckEntities()
    ' Here is the difference:
    Dim query = From c In context.counties Where c.stateId = 7 Select c.Name
    Return query.ToList()
End Function 
```

在上面的代码中，您选择的`c`是县实体，不一定是字符串属性。通过选择`c.Name`(或`c.Title`)，您将构建一个字符串列表，而不是县实体列表。

干杯。

# php - jQuery根据表格行传递输入值

> ID：12322377
> 
> 赞同：1
> 
> 时间：2012-09-07T16:55:55.510
> 
> 标签：php, javascript, jquery, ajax

我对jquery知之甚少，所以如果我没有多大意义，请原谅。

我有一个表，它的行是从 php db 查询中填充的（行数会有所不同），在这种情况下有两行数据。这是 php 生成的 html 表的一部分。

```
<table border=1 width=800px id=workout>
 <tr>
 <th width=300px id=clients>Client</th>
 <th width=200px id=movements>Movements</th>
 <th>X Completed</th>
 </tr>

<tr>
<td><input type="hidden" name="client_id[]" class="clientval" value="1"></td>   
<td>
<select name="movement[]" width=200 class='typeval' onchange='changeMovement()'>
              <option value="select">Select...</option>
              <option>Key Movement</option>
              <option>Movement -1</option>
              <option selected="selected" >Movement -2</option>
              <option>Movement -3</option>
              <option>Movement -4</option>
        </select>
</td>
<td><label id="count"></label></td>
</tr>

<tr>
<td><input type="hidden" name="client_id[]" class="clientval" value="8">
<td>
<select name="movement[]" width=200 class='typeval' onchange='changeMovement()'>
              <option value="select">Select...</option>
              <option>Key Movement</option>
              <option>Movement -1</option>
              <option selected="selected" >Movement -2</option>
              <option>Movement -3</option>
              <option>Movement -4</option>
        </select>
</td>
<td><label id="count"></label></td>
</tr> 
```

我将 和 的值传递`movement`给`client_id`jquery `POST`，因此我可以对数据运行 php 查询并返回结果。如何根据选择菜单所在的行传递所选移动的值和 client_id。

例如：如果用户更改第二行的移动下拉菜单，我想将`client_id`和发送`selected>Movement<`到 jQuery 函数。现在它只是得到我表的第一行，仅此而已。

这是我编辑的 jQuery：

编辑：

```
<script type="text/javascript">

var typeval,clientval, class_id;
$('.typeval').on('change', function(){
    movement =  $(".typeval option:selected").val();
    client_id = $(this).parents('tr').find('input.clientval').val();
    class_id = $(<? echo $class_id; ?>).val();

    //console.log($(this).parents('tr').find('input.clientval').val(), $(this).val());
    $.ajax(
    { url: "movement_count.php",
      type: "post",
      data: {typeval:typeval, client_id: clientval, class_id :},
      dataType: "json",
      });

    success: (function(output) {
    alert(output);
    $(".count").html(output);
    })
 });

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:15:17.423

由于您使用的是 jQuery，因此我会这样做。移除内联 JavaScript 并绑定到选择元素的更改事件。

```
var typeval,clientval;
$('select.typeval').change(function() {
    //console.log($(this).parents('tr').find('input').val(), $(this).val());
    typeval =  $(this).val();
    clientval = $(this).parents('tr').find('input').val();
});​ 
```

*   `$(this).parents('tr').find('input').val();`//会给你client_id
*   `$(this).val();`// 会给你选择项的值

然后，您可以将这些值放入您的 AJAX 调用中。

**[jsFiddle 示例](http://jsfiddle.net/j08691/suNPQ/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T17:17:30.240

使用詹姆斯的解决方案，它看起来像这样：

那么jquery看起来像这样：

var 运动 = this.value var client_id = this.parent().find(".clientval")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T17:18:10.067

检查这个工作示例.. [http://jsfiddle.net/sushanth009/BZ5Wt/](http://jsfiddle.net/sushanth009/BZ5Wt/)

您可以使用此行获取所选行的 ClientId..

```
var client = $(this).parent().parent().find('.clientval').val(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T17:27:45.363

那么，您需要执行以下操作：

**1.**全部删除`onchange='changeMovement()'`，您将不再需要它们。

**2.**只是`echo`来自`class_id`PHP。

**3.**修正你得到的方式`client_id`如下。

**代码：**

```
$(document).ready(function() {

    $('.typeval').change(function() {
        var movement = $(this).val();
        var client_id = $(this).parent().siblings().find('.clientval').val();
        var class_id = <?php echo $class_id; ?>;

        /* Do your AJAX call here */
    });

});​​​​​​​​​​​​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T17:01:12.077

使用 php 为您的选择和输入元素提供一个唯一的 id。就像是：

```
<input type="hidden" id="client_id$client_id" ...

<select name="movement[]" id="mov$client_id" ... 
```

然后在您的 javascript 函数中使用 php 来包含 client_id，如下所示：

```
changeMovement(client_id) 
```

然后您可以使用 client_id 更改任何对应的移动，如下所示：

```
var client = $("#client_id"+client_id).val();
var movement = $("#mov"+client_id).val(); 
```

对于唯一 ID，您可能希望使用填充每行隐藏输入值字段的任何变量。我在不知道这些数字的确切来源的情况下这么说。

# asp.net - Windows 身份验证限制到特定域

> ID：12322379
> 
> 赞同：4
> 
> 时间：2012-09-07T16:56:09.633
> 
> 标签：asp.net, windows, authentication, dns

在我的 asp.net mvc 应用程序中，我使用 Windows 身份验证。公司在多个域中拥有用户，例如“DOMAIN-A\james、DOMAIN-B\james”。我的应用程序应该只对“DOMAIN-A”中的用户进行身份验证。如何对除“DOMAIN-A”中的用户之外的其他域用户进行身份验证失败

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:57:29.177

它通常只会自动使域-b 用户失败（除非特殊的 AD 配置，如林和受信任的域，即使那样，祝它工作顺利。）

**它只会对身份验证 Web 服务器所在的域进行身份验证。**

如果两个域都获得授权，只需检查用户名，其中将包括域。

```
public class Global : System.Web.HttpApplication
{
    void WindowsAuthentication_OnAuthenticate(object sender, WindowsAuthenticationEventArgs e)
    {
        // ensure we have a name and made it through authentication
        if (e.Identity != null && e.Identity.IsAuthenticated)
        {

        } 
```

}

# sql - 选择具有特定列值的第一行

> ID：12322380
> 
> 赞同：1
> 
> 时间：2012-09-07T16:56:11.550
> 
> 标签：sql, sql-server, multithreading, locking

我有一个被多个线程访问的表。该表包含具有行状态的列，即“已拨”，如果它已经被处理，“未拨”，如果它不是。我想

```
Select first row where status = "not Dialled" (Read Past ). 
```

我正在使用 readpast 以便多个线程可以有不同的行并且不会发生死锁。

在这里可以使用 Read Past 吗？其次，我怎样才能始终获得第一行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T08:22:46.107

您可以像这样简单地使用“Top”子句。

```
Select Top 1
    *
    From Data
        Where status = "not Dialled"
        ; 
```

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T03:00:47.173

TOP 子句用于指定要返回的记录数。注意：并非所有数据库系统都支持 TOP 子句。

**SQL Server 语法：** SELECT TOP number|percent column_name(s) FROM table_name

**MySQL 语法：** SELECT column_name(s) FROM table_name LIMIT number 示例

**Oracle 语法：** SELECT column_name(s) FROM table_name WHERE ROWNUM <= number

进一步参考： [http ://www.w3schools.com/sql/sql_top.asp](http://www.w3schools.com/sql/sql_top.asp)

# javascript - 将包含不同参数的内联 JS 转换为外部脚本的建议

> ID：12322382
> 
> 赞同：0
> 
> 时间：2012-09-07T16:56:19.083
> 
> 标签：javascript

我有一些带有如下行的html：

```
<ul>
<li onClick ="click(event, l1, url1)";>
..

<li onClick = "click(event, l2, url2)";>
.. 
```

等等

如果我取出 onClick，我可以遍历 li 元素并在每个元素上调用 attachEvent。但是有没有一种简单的方法来处理每个事件的论点不同的事实？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:01:51.617

而不是迭代，你应该使用像 jQuery's [on function](http://api.jquery.com/on/)这样的委托。至于传递不同的论点，这完全取决于这些论点的含义。如果它们是上下文的，则可以从 DOM 中检索它们，或者您可以使用元素[数据集](http://msdn.microsoft.com/en-us/library/system.data.dataset.aspx)。

# macos - 我如何知道谁对 OS X 应用程序进行了代码签名？

> ID：12322389
> 
> 赞同：6
> 
> 时间：2012-09-07T16:56:41.660
> 
> 标签：macos, codesign

在 Windows 上，我可以右键单击一个文件，然后在“属性”对话框的“数字签名”选项卡上查看是谁对其进行了代码签名。是否有类似的方法可以查看哪个发布者签署了 OS X 应用程序，或有关用于签署它的证书的详细信息？

我知道我可以运行`codesign -d -r- appname.app`以查看有关证书的详细信息，并`codesign -vvvv appname.app`查看它是否通过了验证，但这些都没有向我显示任何关于签署它的实际证书或发布者的信息，只是应用程序包标识符中的那个。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T18:10:24.977

利用

> $ codesign -dvvv the.app

并查看`Authority`诸如

`Authority=Adobe Systems, Incorporated`

但是，Mac App Store 上分发的应用程序都由 Apple 的证书签名：

`Authority=Apple Mac OS Application Signing`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-25T11:15:01.057

还有一个不错的免费 G​​UI 实用程序，称为[RB App Checker Lite](https://itunes.apple.com/cz/app/rb-app-checker-lite/id519421117?mt=12)：

![RB App Checker Lite 截图](../Images/cea61c67657bdf28e1f143abb3b46a7e.png)

# c# - 在 MVVM 中处理不同的视图模型状态

> ID：12322393
> 
> 赞同：2
> 
> 时间：2012-09-07T16:56:54.290
> 
> 标签：c#, xaml, windows-8, microsoft-metro, winrt-xaml

我正在为我的 Metro 应用程序使用 MVVM 模式。在我的主页上，用户按下按钮，应用程序获取用户的当前位置。

获取用户位置的过程是异步的，我希望 UI 发生变化，因此按钮将被禁用，并且会显示一个不确定的进度条，直到返回坐标。

根据 MVVM 管理此问题的最佳方法是什么？有自定义的视觉状态？我注意到有 ApplicationViewStates 和 CommonStates，是否可以添加自己的自定义？你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:22:56.217

我认为您正在寻找类似的东西：

视图模型：

```
private async void CommandExecution()
{
    IsAwaitingResponse=true;
    var response = await _myService.DoNetworkCall()
    IsAwaitingResponse=false;
} 
```

如果您使用的是 Microsoft 模板之一，您的“Common”文件夹中应该有一个 BooleanToVisibilityConverter。你像这样使用它：

```
<Page.Resources>
    <BooleanToVisibilityConverter x:key="booleanToVisibilityConverter"/>
</Page.Resources>
"..."
<ProgressBar Visibility={Binding IsAwaitingResponse,Converter={StaticResource booleanToVisibilityConverter}}" IsIndeterminate="true"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:01:42.500

我的 xaml 经验是使用 WPF 和 Silverlight，但我希望这个建议适用于 Metro 应用程序。您可以将按钮的 IsEnabled 属性和进度条的可见性属性绑定到视图模型上的布尔属性（可能称为 IsCurrentLocationComplete）。当异步方法完成并且您的视图将被更新时，您将更改此属性的值。设置 Button 的属性很简单，但是您需要一个值转换器 (IValueConverter) 来实现进度条的可见性。

# ios - Application Loader：Apple 的 Web 服务操作不成功

> ID：12322397
> 
> 赞同：4
> 
> 时间：2012-09-07T16:57:18.027
> 
> 标签：ios, air, application-loader, flash-cs6

我正在尝试上传一个应用程序，`Application Loader`但出现以下错误：

> Apple 的 Web 服务操作不成功 Unable to authenticate the package: 54005906.itmsp 发生未知错误。(2010)

问题是什么？我真的找不到任何信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T19:39:30.073

这是苹果流程的问题。后天上班！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T17:42:05.863

我会检查以下 1\. 配置文件、用户名、密码、证书 2\. 清理构建并重试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-03T19:49:31.107

我一直得到它好几天，直到我将部署目标从 3.1.3 更改为 4.3。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-15T11:12:24.063

我刚刚在 Project 和 Target 中都选择了标准架构，它对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-02T23:28:40.410

我有同样的错误，但通过更改**Build Active Architecture Only**来修复它

释放 YES 以释放 NO。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-05T20:22:26.660

# 提交此类问题时，您需要包含所有错误消息

如果您选择只发布您认为相关的错误消息，您可能会选择错误消息。如果您知道如何识别无关信息，您可能根本不需要向 StackOverflow 发布问题。;-)

# 提交此类问题时，需要注意以下几点：

## • 如果您在某个给定的时间范围内提交了足够多的失败， Apple 将停止允许您在其他时间范围内*连接/提交！*

![不为你提交！](../Images/e39de873709fa17ca5af5ed03c868ab3.png) - 在大多数情况下，这种情况似乎会在一夜之间自行纠正。您可以使用其他授权帐户来解决此问题。（如果需要，请创建一个新的。）

## • 前 2 项是[红鲱鱼](http://en.wikipedia.org/wiki/Red_herring)

![不要被赶上](../Images/5ac7cf0c05c62da741b5e54205899023.png)

> **苹果网络服务运营不成功**

*   不管它听起来如何，这并不意味着它无法连接。这仅仅意味着最终目标没有成功。
*   作为一个比喻：`if (ApplicationLoader.DeliverYourApp(SelectedFile)){log("Delivery Successful");} else {msg("Apple's web service operation was not successful");}`

> **无法验证包：81680085.itmsp**

*   在 Apple 在他们的服务器上接受您的包裹之前，他们希望它通过一些“现场清醒”检查。
*   在他们看来，这就像“云计算”。他们通过在云中进行分析来节省服务器资源。云是他们所有 developer.apple.com 成员的工作站。

## • “后台活动”面板（通过单击“活动...”显示）非常有用。

看到“Could not start delivery: all tr​​ansports failed diagnostics”会让您认为存在某种形式的连接或登录错误（尤其是与前 2 个错误相结合时。如果您尽早打开“后台活动”面板并观察整个过程，您看到上面屏幕截图中红色的消息实际上经历了这些状态：

*   将包上传到 iTunes Store
*   使用 iTunes Store 进行身份验证
*   使用 iTunes Store 验证资产
*   无法开始交付：所有传输都失败诊断

* * *

## 最后，我的截图中的错误实际上意味着......

给我的 IPA 文件修复了阻止我之前上传成功的错误，但是，开发人员忘记增加内部版本号，Apple 原则上拒绝了它。如果他们实现一个单独执行`git log --oneline | wc -l`. 这[几乎就是我](http://jomnius.blogspot.com/2011/12/how-to-autogenerate-app-version-number.html)在项目中的做法。

# html - 水平对齐标签 img div

> ID：12322398
> 
> 赞同：0
> 
> 时间：2012-09-07T16:57:22.423
> 
> 标签：html, alignment, label

在一个长单元格内，我有一个左对齐的图像。美好的。现在我想在图像的右侧插入一个与最右侧对齐的标签。当我尝试这个时，标签总是直接出现在图像旁边，因此不会向右移动到单元格的末端。

我尝试了以下变体：

```
<img align="left" src="..." /><span align="right"><label>Mytext</label></span> 
```

但是文本永远不会移动到最右边，它总是直接位于图像旁边。有任何想法吗？

编辑：修复：

```
<img align="left" src="..." /><span style="float:right"><label>Mytext</label></span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:58:58.247

改变

```
<span alignment="right"> 
```

至

```
<span style="float:right"> 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/SEXQ6/)**

没有“对齐”属性，所以只使用普通的旧 CSS。

# tfsbuild - 自定义 TFS 2010 构建过程

> ID：12322404
> 
> 赞同：0
> 
> 时间：2012-09-07T16:57:54.390
> 
> 标签：tfsbuild

每次在 TFS 服务器上执行构建时，我都想运行一个控制台应用程序。此应用程序应接收最新构建源和二进制文件的路径作为参数。我无法弄清楚要使用哪个构建活动。网上似乎也没有足够的信息，或者我不知道要寻找什么。

有人可以帮忙吗？

谢谢你的时间...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:22:56.803

您是否看过以下博客：[http](http://www.ewaldhofman.nl/?tag=/build+2010+customization) ://www.ewaldhofman.nl/?tag=/build+2010+customization ？

我已经有一段时间没有把它放在一起了，所以我不确定你的答案是否在那里，但这是一个很好的起点。

# ruby - Ruby中是否有等效的addlashes？

> ID：12322407
> 
> 赞同：4
> 
> 时间：2012-09-07T16:58:03.860
> 
> 标签：ruby

使用 Ruby，我如何能够自动转义一些写入输出文件的变量中的单引号和双引号。来自 PHP 我正在寻找一个添加斜杠类型的函数，但在 Ruby 中似乎没有一个简单的解决方案。

```
require "csv"

def generate_array( file )
    File.open("#{file}" + "_output.txt", 'w') do |output|
        CSV.foreach(file) do |img, _, part, focus, country, loc, lat, lon, desc, link|
            output.puts("[#{lat}, #{lon}, '#{img.downcase}', '#{part}', '#{loc}', '#{focus}', '#{country}', '#{desc}', '#{link}'],")
        end
    end
end

ARGV.each do |file|
    generate_array(file)
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T17:03:44.380

我想你可以`addslashes`用这个 Ruby 构造来模拟 PHP 功能：

```
.gsub(/['"\\\x0]/,'\\\\\0') 
```

例如：

```
slashed_line = %q{Here's a heavily \s\l\a\s\h\e\d "string"}
puts slashed_line.gsub(/['"\\\x0]/,'\\\\\0')
# Here\'s a heavily \\s\\l\\a\\s\\h\\e\\d \"string\" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T19:26:26.103

还有[String#dump](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-dump)：

```
slashed_line = %q{Here's a heavily \s\l\a\s\h\e\d "string"}
puts slashed_line.dump
#=> "Here's a heavily \\s\\l\\a\\s\\h\\e\\d \"string\"" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T17:04:51.077

我不了解 Ruby，但我知道在 PHP`addslashes`中它已被弃用。

每次您需要转义数据时，都需要不同的转义例程。HTML 需要对数据库工作进行不同的编码和处理，并且每个数据库都有自己的特殊规则。

我假设您的问题是您希望将内容输出到 CSV 文件。由于没有标准的 CSV，这再次打开了一锅鱼。您需要对生成数据的内容（以及是否是严格的 ASCII 或 Unicode 或其他内容）以及需要哪种格式的转义引号进行一些研究。大多数 CSV 使用者使用两个双引号来替换单个双引号。如果你需要`"`在你的字符串中，你写`""`.

# dart - 谷歌飞镖地区？

> ID：12322412
> 
> 赞同：13
> 
> 时间：2012-09-07T16:58:50.723
> 
> 标签：dart, region

在 c# 中有一种叫做区域的东西，它可以用于构建代码。我想知道 Google Dart 是否有类似的东西？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2019-11-18T15:43:35.290

```
//#region Test 

//#endregion 
```

这适用于 Android Studio 和 IntelliJ。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-07T19:29:00.530

Dart 不支持将区域作为语言规范的一部分。但是，许多 IDE 工具使用格式化注释提供此功能。请参阅下面的答案，将 Android Studio 和 IntelliJ 确定为两个这样的示例。

# asp.net - 具有无限单节点可扩展性的 ASP.NET 托管

> ID：12322414
> 
> 赞同：0
> 
> 时间：2012-09-07T16:58:55.447
> 
> 标签：asp.net, hosting, cloud-hosting

由于这个问题是从用户（开发人员）的角度来看的，我认为它可能比服务器故障更适合这里。

我想要一个满足以下条件的 ASP.NET 主机：

*   该应用程序看似在单个服务器上运行（因此无需担心会话状态甚至静态变量）
*   可以选择以“无限”的方式按需扩展存储、内存、数据库大小和 CPU 功率

我研究过，但似乎没有这样一个平台，它完全抽象了底层架构，因此具有简单共享主机的易用性，但“无限”可扩展性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:37:10.873

恐怕“单服务器”和“可扩展性”是相互排斥的。但是一个好的负载均衡器会对请求应用亲和力，因此您不需要在多个服务器上不必要地双重缓存数据。

但是，设计良好的 Web 应用程序很容易移植到多服务器场景。

我认为您最好的选择是运行在您无权访问的 VM 上的 Windows Azure 网站（与 Azure Web Workers 分开）。VM 本身提供了运行网站所需的足够功率，因此您无需担心分配额外的 CPU 功率或 RAM。

SQL Server 之类的东西是单独处理的，但是运行起来很便宜，你可以拖动一个滑块给自己更多的存储空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-30T17:29:42.290

这仍然可以通过使用像[www.gearhost.com](http://www.gearhost.com)这样的云主机来完成。应用程序存在于云中，默认情况下有 1 个节点工作器，因此可以保持会话粘性。然后，您可以扩展该应用程序更大的工作人员来完成您需要的工作，同时保持 HA 和 LB。更进一步，您可以添加多个网络工作者。每个访问者都绑定到一个特定节点以维护会话状态，即使您可能有 10 个工作人员。只需单击几下，即可将拥有 100 名访问者的网站扩展到数百万，这是一种简单且廉价的方式。

# ssrs-2008 - 在报告服务中处理订阅中的错误

> ID：12322417
> 
> 赞同：1
> 
> 时间：2012-09-07T16:59:23.997
> 
> 标签：ssrs-2008, reporting-services

我在 SSRS 中有一份带有“数据驱动订阅”的报告，但有时会出现如下错误

*   完成：总共 10 个已处理的 10 个；10 个错误。 ![在此处输入图像描述](../Images/0ba481473aff60d90a23a417f739bb50.png)

以及这些错误的原因我认为网络问题，ssrs 无法将 pdf 存储在网络文件夹中。

所以我需要一种方法来处理这个阶段发生的任何错误，以便能够再次重试，或者至少知道女巫报告没有正确生成，

任何想法我该如何处理这些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:49:13.830

没有技术可以捕获错误，如果您在报告中有参数，您只需要仔细调整它们。我有多年发表这些声明的经验，一开始我遇到了类似的问题，但我解决了

# stored-procedures - Oracle 存储过程同义词和授权未按预期工作

> ID：12322419
> 
> 赞同：1
> 
> 时间：2012-09-07T16:59:33.003
> 
> 标签：stored-procedures, oracle11g, database-schema, toad

在 Oracle 中，当我在 user1 下创建存储过程时，在该过程上创建公共同义词和授予用户“PUBLIC”对该过程的执行权限有什么区别？
我的目标是：用户 2 应该登录 TOAD，转到模式浏览器，然后从下拉列表中选择 PUBLIC 模式，并能够查看和执行该过程。

我尝试向 user2 和 PUBLIC 授予执行授权，并创建一个 PUBLIC 同义词....但仍然没有运气。user2 看不到 PUBLIC 模式下的过程。

但有趣的是，当我以 user2 身份登录时，在 TOAD（不是模式浏览器）中打开一个编辑器，然后我可以使用以下命令执行该过程：

```
BEGIN
PROC(arg1,arg2,arg3);
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T22:51:32.513

Oracle`synonym`基本上允许您在`create a pointer to an object`其他地方存在。您需要 Oracle 同义词，因为当您登录到 Oracle 时，它​​会在您的模式（帐户）中查找您正在查询的所有对象。如果它们不存在，它将给您一个错误，告诉您它们不存在或未声明。

在您的情况下`user1`，创建一个 proc，它将存在于他的`schema`. 对于 user2 ，它只是一个指向那个的指针。所以你不能在你的模式中看到他的对象或`public schema`.

由于 user2 有执行授权，所以这意味着当 user2 尝试`proc`从他的架构中执行时，它将尝试查看`proc`他的架构，如果他找到了 proc，那么它将查看他从同义词中找到的指针。并且最后他找到`proc`并尝试执行它，因为proc有`public execute grants`（*这意味着任何用户都可以执行它们*）然后它将能够执行`proc`。

如果你去`schema browser`你的`toad`，你会找到一个标签`synonym`，在那里你会发现你`proc`在`user2` 模式甚至`public`模式中有同义词。抱歉英语不好:(

# f# - 是否有任何工具可以自动整理 F# 代码

> ID：12322421
> 
> 赞同：6
> 
> 时间：2012-09-07T16:59:44.447
> 
> 标签：f#

Visual Studio 不提供 F# 的自动格式化，我可以使用其他编辑器来自动格式化吗？

我希望它会在算术运算符之间放置合理的空格`(a+b)`去`(a + b)`或赋值运算符`=`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-06T13:04:33.510

我一直在[为 F# 开发源代码格式化程序](http://lonelypad.blogspot.dk/2013/04/developing-source-code-formatter-for-f.html)。源代码可以[在 Github](https://github.com/dungpa/fantomas)上找到。

目前，VS 扩展已[在 Visual Studio 库中](http://visualstudiogallery.msdn.microsoft.com/24ef5c87-b4e3-4c3b-b126-1064cc66e148)发布。当 API 和命令行已经可用时，应该可以集成到其他 IDE 和编辑器。

[VS 扩展可以通过格式选择功能](https://github.com/dungpa/fantomas/blob/master/docs/Documentation.md#using-visual-studio-2012-extension)很好地处理您描述的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T20:33:08.893

Emacs 中的 FSharpMode 支持通用代码缩进： [链接到下载站点](http://sourceforge.net/projects/fsharp-mode/) 但它不会帮助您对运算符进行自动空格分隔，只有缩进。

也许编写一个基于 Tomas Petriceks 代码的简单格式化程序来突出显示语法？

[链接到 FSharp.Formatting](https://github.com/tpetricek/FSharp.Formatting)

# mysql - Codeigniter - 将 mysql 查询转换为 CodeIgniter 的活动记录查询

> ID：12322423
> 
> 赞同：1
> 
> 时间：2012-09-07T16:59:52.300
> 
> 标签：mysql, codeigniter, subquery

我正在尝试将此 SQL 查询转换为 codeigniter 查询

```
SELECT 
  uploads.EMAIL
FROM
  uploads 
  JOIN (

    SELECT EMAIL, COUNT(*) as num FROM uploads GROUP BY EMAIL
  ) c ON uploads.EMAIL = c.EMAIL
ORDER BY 
  c.num DESC, 
  EMAIL ASC 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:31:24.570

我不确定为什么您无法使用[活动记录文档](http://codeigniter.com/user_guide/database/active_record.html)自己解决这个问题，但是：

```
$this->db->select('uploads.EMAIL');
$this->db->from('uploads');
$this->db->join('(SELECT EMAIL, COUNT(*) as num FROM uploads GROUP BY EMAIL) c','uploads.EMAIL = c.EMAIL','',FALSE);
$this->db->order_by('c.num desc, uploads.EMAIL asc'); 
```

接着

```
$query = $this->db->get(); 
```

仅供参考，将 FALSE 作为第四个参数传递给`db->join()`方法将导致它不会转义语句，因此如果要使用外部变量，则应小心。在 CodeIgniter 3 之前，这是使用活动记录进行子查询而不扩展活动记录类来添加它们的唯一方法。

# java - 使用 jnlp.jar 的 Java 文件关联，没有完整的 JWS？

> ID：12322425
> 
> 赞同：0
> 
> 时间：2012-09-07T17:00:11.627
> 
> 标签：java, swing, java-web-start, file-association

Java Web Start 技术有一个用于创建文件关联的[IntegrationService API。](http://docs.oracle.com/javase/7/docs/jre/api/javaws/jnlp/javax/jnlp/IntegrationService.html "集成服务")我的问题是是否有可能以某种方式使用此 API（可能通过在我的应用程序中包含 jnlp.jar）来创建文件关联，但没有完整的 Java Web Start 技术（没有用于初始安装的网站，该程序以传统的安装程序或作为一个简单的可执行 jar 文件）。有问题的应用程序是桌面/摇摆应用程序。

（这个问题出现在问题[How to associate a file with a program in java](https://stackoverflow.com/questions/12320138/how-to-associate-a-file-with-a-program-in-java)的评论中）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T18:25:32.253

无需网站即可`jnlp`在本地使用文件，只需为and使用[文件 URI 方案](http://en.wikipedia.org/wiki/File_URI_scheme)即可。`jnlp codebase``jar href`

这将让您试验文件关联，但您需要先进行备份并清理 Java Preferences 缓存。

附加物：

*   作为一个具体的例子，这`jnlp`将启动[`JFreeChart`](https://stackoverflow.com/tags/jfreechart/info)：

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <jnlp spec="1.0+" 
            codebase="file:///Users/trashgod/jnlp/"
            href="jfreechart-1.0.14-demo.jnlp">
        <information>
            <title>JFreeChart 1.0.14 Demo</title>
            <vendor>Object Refinery Ltd</vendor>
            <homepage href="http://www.object-refinery.com/" />
            <description>A demo for the JFreeChart class library</description>
            <description kind="short">JFreeChart demo application.</description>
            <description kind="tooltip">JFreeChart 1.0.14 Demo</description>
            <offline-allowed />
        </information>
        <resources>
            <j2se version="1.5+" initial-heap-size="12m" max-heap-size="256m" />
            <jar href="file:///opt/jfreechart/jfreechart-1.0.14-demo.jar" />
            <jar href="file:///opt/jfreechart/lib/jcommon-1.0.17.jar" />
            <jar href="file:///opt/jfreechart/lib/jfreechart-1.0.14.jar" />
        </resources>
        <application-desc main-class="demo.SuperDemo" />
    </jnlp> 
    ```

*   该[`<association/>`](http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/syntax.html)标签使用这些属性`mime-type`并`extensions`作为“对 JNLP 客户端的提示，即它希望向操作系统注册作为某些扩展和某些 mime 类型的主要处理程序”。

# qt - Qt从字符串中删除正则表达式

> ID：12322427
> 
> 赞同：2
> 
> 时间：2012-09-07T17:00:27.290
> 
> 标签：qt, qstring, qregexp

我有一个 QString，我用“”替换了“=”和“”。现在我想编写一个正则表达式，它将删除某个字符串的每次出现，然后立即删除包含 1 到 2 个字符长数字的括号。例如：“mat(1) = 5, mat(2) = 4, mat(3) = 8” 将变为“5 4 8”

所以这就是我到目前为止所拥有的：

```
text = text.replace("=", " "); 
text = text.replace(",", " "); 
text = text.remove( QRegExp( "mat\([0-9]{1,2}\)" ) ); 
```

正则表达式不正确，我该如何修复它来做我想做的事？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T18:07:30.767

您需要为 C++ 字符串文字转义反斜杠：

```
text = text.remove( QRegExp( "mat\\([0-9]{1,2}\\)" ) ); 
```

# jquery - Jquery 图像滑块错误

> ID：12322428
> 
> 赞同：0
> 
> 时间：2012-09-07T17:00:29.300
> 
> 标签：jquery, slider

这是我的网站.... [https://dl.dropbox.com/u/14080718/nategines.com-peopleperhour/index.html](https://dl.dropbox.com/u/14080718/nategines.com-peopleperhour/index.html)

如果您单击工作部分，您会注意到屏幕左侧有一个带有一些文本的奇怪灰色条。现在更改浏览器窗口的大小。图像会自行调整大小以填充浏览器窗口的宽度。它应该一直都是这样的全尺寸。这是我的图像滑块插件上发生的某种调整大小错误。

我已经联系了开发人员，他告诉我...。仅在将滑块及其父级添加到 DOM 或调用 updateSliderSize() 方法之后才初始化滑块。$('.royalSlider').royalSlider('updateSliderSize');

我还使用 Jquery Ui 选项卡构建了此站点，但我不确定如何处理此代码。我对 Jquery 开发不是很有经验，需要一些帮助。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:05:58.080

要在 DOM 加载后调用函数，请务必使用以下内容：

```
$(function() {
    // Code goes in here.
} 
```

如果调用是在 DOM 加载之后发生的，则添加`$(window).resize();`到回调的末尾。这将导致浏览器再次渲染元素，这次是正确的。

# python - 使用 urllib3 或 requests 和 Celery

> ID：12322429
> 
> 赞同：6
> 
> 时间：2012-09-07T17:00:29.853
> 
> 标签：python, django, celery, python-requests, urllib3

我们有一个脚本，可以定期从各种来源下载文档。我打算把它移到 celery 上，但是在这样做的同时，我想同时利用连接池，但我不知道该怎么做。

我目前的想法是使用请求做这样的事情：

```
import celery
import requests

s = requests.session()

@celery.task(retry=2)
def get_doc(url):
    doc = s.get(url)
    #do stuff with doc 
```

但我担心连接会无限期地保持打开状态。

只要我正在处理新文档，我真的只需要连接保持打开状态。

所以这样的事情是可能的：

```
import celery
import requests

def get_all_docs()
    docs = Doc.objects.filter(some_filter=True)
    s = requests.session()
    for doc in docs: t=get_doc.delay(doc.url, s)

@celery.task(retry=2)
def get_doc(url):
    doc = s.get(url)
    #do stuff with doc 
```

但是，在这种情况下，我不确定连接会话是否会跨实例持续存在，或者一旦酸洗/解酸洗完成，请求是否会创建新连接。

最后，我可以在类方法上尝试对任务装饰器的实验性支持，如下所示：

```
import celery
import requests

class GetDoc(object):
    def __init__(self):
        self.s = requests.session()

@celery.task(retry=2)
def get_doc(url):
    doc = self.s.get(url)
    #do stuff with doc 
```

最后一个似乎是最好的方法，我将对此进行测试；但是，我想知道这里是否有人已经做过类似的事情，或者如果没有，你们中的一个人阅读这篇文章可能有比上述方法之一更好的方法。

# android - 传递在不同方法中返回的双重计算？

> ID：12322430
> 
> 赞同：0
> 
> 时间：2012-09-07T17:00:33.127
> 
> 标签：android, variables, methods, android-activity, void

我的程序现在执行以下操作：

*   用户输入一个值
*   用户选择转化
*   用户点击提交

根据选择的转换（使用单选按钮），我需要调用一个方法来执行转换的计算，然后将转换返回到案例，但我遇到了问题，因为我返回的是双精度数。

```
package com.exercise_5;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RadioButton;
import android.widget.RadioGroup;
import android.widget.TextView;

public class MainActivity extends Activity {

private String textValue;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

// Method called when the convert button is clicked
public void convert(View view) {
    RadioGroup conRadioGroup = (RadioGroup) findViewById(R.id.conRadioGroup);
    EditText textValue = (EditText) findViewById(R.id.editText1);

    switch(conRadioGroup.getCheckedRadioButtonId()) {
    case R.id.radioCelsiusToFahrenheit:
// Call the convert method
        fahrenheitToCelsius();
//Return the converted variable

        break;

    case R.id.radioFahrenheitToCelsius:
        fahrenheitToCelsius();

        break;

    default:
       Log.e("Some class tag", "Invalid id was passed to conversion method doing celsius conversion.");
       return celsiusToFahrenheit();
       break; 
     }

}

public void fahrenheitToCelsius(Convert tempCelsius) { 

    double conCelsius = Double.parseDouble(textValue);

    //Calculate Celsius
    tempCelsius = ((conCelsius * 9) / 5) + 32; 
}

public double celsiusToFahrenheit(double tempInFahrenheit) {

    double conFahrenheit = Double.parseDouble(textValue);

    //Calculate Fahrenheit
    return ((conFahrenheit * 9) / 5) + 32;
}

public void clear(View view) {
    //Reset Appended Strings After Previous Run
    TextView fahrenheit_TV = (TextView) this.findViewById(R.id.textView1);
    TextView celsius_TV = (TextView) this.findViewById(R.id.textView3);

    fahrenheit_TV.setText("Fahrenheit: ");
    celsius_TV.setText("Celsius: ");

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:10:10.673

我认为您遇到的问题是因为您的操作是使用整数（乘以 9 并除以 5）完成的，因此编译器在进行微积分时将 conCelsius 转换为 int，而不是应该是这样的：

```
return ((conCelsius * 9.0) / 5.0) + 32; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T10:50:04.687

对Kuu来说，实际上没有。如果二元运算（加法、乘法、减法、加法、余数）中的任何一个变量是双精度数，则 Java 将这两个值都视为双精度数，因此

(((conCelsius * 9) / 5) + 32

操作是双重的。

要回答实际问题，代码存在几个问题。设置相关单选按钮的正确方法是将它们分组到单选按钮组中（我假设您没有得到代码）。有关示例，请参见 [http://www.mkyong.com/android/android-radio-buttons-example/](http://www.mkyong.com/android/android-radio-buttons-example/)

之后，您可以检查单选按钮的 id 选择了哪些按钮。

这是代码的一般布局：

```
 @Override
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    radioTempConvGroup = (RadioGroup) findViewById(R.id.radioTempConvGroup);
    btnConvert = (Button) findViewById(R.id.btnConvert);

    btnConvert.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

                // get selected radio button from radioGroup
            int selectedId = radioTempConvGroup.getCheckedRadioButtonId();

                    double convertedTemp = convert(selectedId);
                    //do other operations with convertedTemp like display 
        }

    });

  private double convertTemp(int selectedId) {
       //TODO get value from the textview that holds  the value
       double temperature = //INSERT code to get the value to convert
       switch(selectedId) {
       case  R.id.radioCelsius:
           return celsiusToFahrenheit(temperature);
           break;
       case R.id.radioFahrenheit:
           return fahrenheitTocelsius(temperature);
          break;
       default:
          Log.e("Some class tag", "Invalid id was passed to conversion method doing celsius conversion.");
          return celsiusToFahrenheit(temperature);
          break; 
        }
   }

   private double celsiusToFahrenheit(double tempInCelsius) {
      //TODO add actual conversion
   }

   private double fahrenheitToCelsius(double tempInFahrenheit) {
      //TODO add actual conversion
   } 
```

您的代码有几个问题：

始终使用带有 if 和类似结构的大括号，以防止执行一条指令而不是多条指令。我假设

```
case R.id.radioButton1:
    if (checked)
        fahrenheit();

        //Append Strings
        fahrenheit_TV.append(" " +fahrenheit.conversion);

    break; 
```

原意为

```
case R.id.radioButton1:
    if (checked) {
        fahrenheit();

        //Append Strings
        fahrenheit_TV.append(" " +fahrenheit.conversion);
    }
    break; 
```

但是，只有 if 之后的指令才会在您的版本中执行。

当原始双精度足够时，不要使用双精度。对象创建和装箱和拆箱是昂贵的操作。

```
 public static double fahrenheit(Double conversion) {

    Double conCelsius = Double.parseDouble(getCelsius);

    //Calculate Celsius
    return ((conCelsius * 9) / 5) + 32;
  } 
```

应该：

```
 public static double fahrenheit(double conversion) {

    double conCelsius = Double.parseDouble(getCelsius);

    //Calculate Celsius
    return ((conCelsius * 9) / 5) + 32;
  } 
```

第三，尝试在整个代码中保持一致和/或尝试使用 java 约定，这使得其他人（以及 6 个月后的您）更容易阅读代码。一种方法名称以大写字母开头，另一种以小写字母开头。一些变量使用 _ 进行分隔，其他使用驼峰式。

# c++ - 生成伪随机正定矩阵

> ID：12322431
> 
> 赞同：5
> 
> 时间：2012-09-07T17:00:49.837
> 
> 标签：c++, matlab, math, matrix, scipy

我想测试我用 C++ 编写的一个简单的 Cholesky 代码。所以我正在生成一个随机的下三角 L 并乘以它的转置来生成 A。

```
A = L * Lt; 
```

但是我的代码没有考虑 A。所以我在 Matlab 中尝试了这个：

```
N=200; L=tril(rand(N, N)); A=L*L'; [lc,p]=chol(A,'lower'); p 
```

这输出非零 p，这意味着 Matlab 也无法分解 A。我猜测随机性会生成秩不足的矩阵。我对吗？

**更新：**

我忘了提到下面的 Matlab 代码似乎可以正常工作，正如 Malife 在下面指出的那样：

```
N=200; L=rand(N, N); A=L*L'; [lc,p]=chol(A,'lower'); p 
```

不同之处在于 L 在第一个代码中是下三角形而不是第二个。为什么这很重要？

[在阅读了用于生成正半定矩阵的简单算法](https://stackoverflow.com/questions/619335/a-simple-algorithm-for-generating-positive-semidefinite-matrices)之后，我还尝试了以下 scipy ：

```
from scipy import random, linalg
A = random.rand(100, 100)
B = A*A.transpose()
linalg.cholesky(B) 
```

但它出错了：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/dist-packages/scipy/linalg/decomp_cholesky.py", line 66, in cholesky
    c, lower = _cholesky(a, lower=lower, overwrite_a=overwrite_a, clean=True)
  File "/usr/lib/python2.7/dist-packages/scipy/linalg/decomp_cholesky.py", line 24, in _cholesky
    raise LinAlgError("%d-th leading minor not positive definite" % info)
numpy.linalg.linalg.LinAlgError: 2-th leading minor not positive definite 
```

我不明白为什么 scipy 会发生这种情况。有任何想法吗？

谢谢，
尼莱什。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T19:09:38.647

问题不在于cholesky 分解。问题在于随机矩阵`L`。 `rand(N,N)`条件比 好得多`tril(rand(N,N))`。要看到这一点，请与`cond(rand(N,N))`比较`cond(tril(rand(N,N)))`。我得到了`1e3`第一个和`1e19`第二个类似的东西，所以第二个矩阵的条件数要高得多，计算在数值上会不太稳定。这将导致在病态情况下得到一些小的负特征值 - 使用 来查看特征值`eig()`，一些小的特征值将是负的。

所以我建议用来`rand(N,N)`生成一个数值稳定的随机矩阵。

顺便说一句，如果你对为什么会发生这种情况的理论感兴趣，你可以看看这篇论文：

[http://epubs.siam.org/doi/abs/10.1137/S0895479896312869](http://epubs.siam.org/doi/abs/10.1137/S0895479896312869)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T10:09:15.937

如前所述，三角矩阵的特征值位于对角线上。因此，通过做

```
L=tril(rand(n)) 
```

你确保 eig(L) 只产生正值。您可以通过向对角线添加足够大的正数来改善 L*L' 的条件数，例如

```
L=L+n*eye(n) 
```

并且 L*L' 是正定的且条件良好：

```
> cond(L*L')

ans =

1.8400 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T17:49:37.553

要在 MATLAB 中生成随机正定矩阵，您的代码应为：

```
N=200;
L=rand(N, N); 
A=L*transpose(L); 
[lc,p]=chol(A,'lower');
eig(A)
p 
```

你确实应该让特征值大于零并且`p`为零。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T23:17:04.967

你问下三角形的情况。让我们看看会发生什么，以及为什么会出现问题。查看测试用例通常是一件好事。

对于一个简单的 5x5 矩阵，

```
L = tril(rand(5))
L =
      0.72194            0            0            0            0
     0.027804      0.78422            0            0            0
      0.26607     0.097189      0.77554            0            0
      0.96157      0.71437      0.98738      0.66828            0
     0.024571     0.046486      0.94515      0.38009     0.087634

eig(L)
ans =
     0.087634
      0.66828
      0.77554
      0.78422
      0.72194 
```

当然，三角矩阵的特征值只是对角线元素。由于 rand 生成的元素总是介于 0 和 1 之间，因此它们平均约为 1/2。也许查看 L 行列式的分布会有所帮助。更好的是考虑log(det(L))的分布。由于行列式只是对角元素的乘积，因此对数是对角元素的对数之和。（是的，我知道行列式不能很好地衡量奇异性，但是 log(det(L)) 的分布很容易计算，而且我懒得考虑条件数的分布。）

啊，但是均匀随机变量的负对数是指数变量，在这种情况下是 lambda = 1 的指数。来自区间 (0,1) 的一组 n 个均匀随机数的对数之和将由中心极限定理是高斯的。该总和的平均值将为-n。因此，由这种方案生成的下三角 nxn 矩阵的行列式将是 exp(-n)。当 n 为 200 时，MATLAB 告诉我

```
exp(-200)
ans =
   1.3839e-87 
```

因此，对于任何可观大小的矩阵，我们可以看到它的条件很差。更糟糕的是，当您形成产品 L*L' 时，它通常是数字单数。相同的参数适用于条件编号。因此，即使是 20x20 矩阵，看到这样的下三角矩阵的条件数也相当大。然后当我们形成矩阵 L*L' 时，条件将按预期平方。

```
L = tril(rand(20));

cond(L)
ans =
   1.9066e+07

cond(L*L')
ans =
   3.6325e+14 
```

看看一个完整的矩阵有多少更好的东西。

```
A = rand(20);

cond(A)
ans =
       253.74

cond(A*A')
ans =
        64384 
```

# android - Android中的ViewPager滚动问题

> ID：12322433
> 
> 赞同：3
> 
> 时间：2012-09-07T17:00:58.177
> 
> 标签：android, scroll, android-viewpager, horizontal-scrolling, vertical-scrolling

我有一个`ViewPager`动态数字`images`。这`ViewPager`将作为自定义行添加到表视图中。由于此表视图可以有多个动态自定义行，因此我必须将此表视图添加到`scrollview`滚动中。

现在我的问题是，当我水平滚动到 View Pager 时，它不完全是水平滚动，它也与一些垂直滚动混合在一起。因此，当检测到垂直滚动时，会将事件传递给滚动视图；这使得`ViewPager`重置到初始位置。

那么如何将事件传回`ViewPager`或避免滚动视图捕获垂直滚动事件？

**注意：**我尝试禁用`scrollview`垂直滚动，但这并没有阻止它捕获垂直滚动事件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T11:13:12.680

我找到了我的问题的解决方案，这就是我的做法。

我通过以下方式覆盖了我的 Viewpager 的 on touch 事件

```
myViewPager.setOnTouchListener(new OnTouchListener() {

                public boolean onTouch(View v, MotionEvent event) {

                    if(event.getAction() == MotionEvent.ACTION_MOVE && myScrollView!=null){
                        myScrollView.requestDisallowInterceptTouchEvent(true);
                    }
                    return false;
                }
            }); 
```

注意：myScrollView 是 myViewPager 的父级，如我的问题中所述。

# macos - 如何在 Mac 上安装 MIT Scheme？

> ID：12322434
> 
> 赞同：61
> 
> 时间：2012-09-07T17:01:03.930
> 
> 标签：macos, scheme, mit-scheme

我想在我的 Mac 上安装[MIT Scheme](http://www.gnu.org/software/mit-scheme/)，我已经下载了*MacOS X binary(x86-64)*。

但是，我无法使用 Mac Terminal 使其工作。

我试图关注这些文章：

[在 Mac OS X Leopard 上安装 MIT/GNU Scheme](http://renevanbelzen.wordpress.com/2008/11/13/installing-mitgnu-scheme-on-mac-os-x-leopard/)

~~[在 Mac OS X 上安装 MIT Scheme](https://wiki.umn.edu/CSCI1901/InstallingMITScheme)~~

但它似乎已经过时并且不起作用。

所以，我正在寻找一种简单的方法，它允许我使用 Mac 终端编写 Scheme 代码。

我已经挣扎了几个小时来尝试安装它。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2015-07-24T02:41:50.393

**为 EL CAPITAN 更新**：

我发现的最好方法是从[这里](https://jacksonisaac.wordpress.com/2014/03/25/installing-scheme-on-mac-os-x/)：

1.  下载 Scheme 的[32 位](http://ftp.gnu.org/gnu/mit-scheme/stable.pkg/9.2/mit-scheme-9.2-i386.dmg)或[64 位](http://ftp.gnu.org/gnu/mit-scheme/stable.pkg/9.2/mit-scheme-9.2-x86-64.dmg)dmg 文件。
2.  双击 .dmg 文件，你会得到这个窗口，你应该在其中将“MIT/GNU Scheme”文件拖到应用程序文件夹中。![](../Images/6ec2ec51a10f899289058d24ce2e972a.png)
3.  **对于 32 位版本**，运行以下命令：

    ```
    sudo ln -s /Applications/MIT\:GNU\ Scheme.app/Contents/Resources /usr/local/lib/mit-scheme-i386 
    ```

    然后输入您的管理员密码，并运行以下命令：

    ```
    sudo ln -s /usr/local/lib/mit-scheme-i386/mit-scheme /usr/local/bin/scheme 
    ```

    **对于 64 位版本**，首先运行以下命令：

    ```
    sudo ln -s /Applications/MIT\:GNU\ Scheme.app/Contents/Resources /usr/local/lib/mit-scheme-x86-64 
    ```

    然后输入您的管理员密码并运行以下命令：

    ```
    sudo ln -s /usr/local/lib/mit-scheme-x86-64/mit-scheme /usr/local/bin/scheme 
    ```

* * *

就是这样！现在您应该可以通过在命令行中输入“scheme”来在终端中使用 MIT Scheme：

![](../Images/34f2cc338240ba026654caeba49772e8.png)

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-09-07T17:05:41.820

Homebrew 让您轻松搞定。在终端上，键入：

~~`ruby <(curl -fsSkL raw.github.com/mxcl/homebrew/go) ; brew install mit-scheme`~~

完毕！

**编辑**

安装脚本已被移动：

```
ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)" ; brew install mit-scheme 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2015-04-11T18:33:17.560

~~对于优胜美地 10.10.3：~~

安装 X11.app 和 homebrew 后，

```
$ brew tap homebrew/x11
$ brew install mit-scheme 
```

~~我发现当像 homebrew 这样的维护包管理器涵盖所有依赖项和构建内容时，它会更容易。~~

* * *

编辑：简单

```
$ brew install mit-scheme 
```

会做。X11 现在是可选的，而不是依赖。还有一个`--with-x11`选项需要整个 Xcode。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2014-06-18T18:14:51.533

您可以使用以下命令使用[自制软件](http://brew.sh/)安装方案

```
brew install mit-scheme 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-10-07T03:35:37.813

如果您拥有最新版本的 Mac 系统**El Capitan 10.11.2**，您可能需要执行与上述不同的操作。

第一个命令将是相同的。 **对于 64 位版本**，首先运行以下命令：

```
sudo ln -s /Applications/MIT\:GNU\ Scheme.app/Contents/Resources /usr/local/lib/mit-scheme-x86-64 
```

然后输入您的管理员密码并运行以下命令：

`sudo ln -s /usr/local/lib/mit-scheme-x86-64/mit-scheme /usr/local/bin/scheme`

注意：不同之处在于您需要在 /usr/ 和 /bin/ 之间放置**local**

在终端中键入方案以查看它是否有效。如果您得到以下屏幕截图，则表示您成功了。

[成功结果](http://i.stack.imgur.com/UmgH1.png)

你肯定需要把**本地**放在那里。原因是，Apple 在 OSX 10.10 (rootless) 中改进了 OS 安全性，并且不允许更改通用系统范围的二进制文件（例如 /usr/bin）。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-10-12T19:26:03.643

如果您对@virgil-ming 接受的答案有疑问，请尝试以下操作：

```
$ brew install Caskroom/cask/xquartz
$ brew install mit-scheme 
```

当然，同样的想法，但这让我在`brew tap homebrew/x11`应对多个冲突时启动并运行。

与往常一样，请记住在`brew update`遇到问题时再试一次，这是[Homebrew 的故障排除指南](https://github.com/Homebrew/homebrew/blob/master/share/doc/homebrew/Troubleshooting.md#check-for-common-issues)。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-12-04T11:05:21.373

**MAC OS HIGH SIERRA 的更新：**

只需执行即可为我工作（如果您使用的是 Homebrew）：

`brew install mit-scheme`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-06-26T19:08:31.207

如果您使用的是 docker，我建议您这样做：

`docker run -it inikolaev/alpine-scheme`

会让你直接进入 REPL 计划。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-01-05T10:24:54.013

如果您使用的是 MacPorts，则该命令类似于其他人为自制软件发布的命令 -

```
sudo port install mit-scheme 
```

这让我在 OS X 10.8.5 上做得很好

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-08-28T09:08:45.867

我遇到了一个问题，即*MIT/GNU Scheme的***10.x**版本不支持*Mac OS X* **10.11** *El Capitan*。事实上，它需要*Mac OS X* **10.13 或更高版本**。

 *******支持旧*Mac OS X*版本的最高版本是*MIT/GNU Scheme* **9.2**。*******

# mercurial - 如何在未提交的合并期间从 mercurial 中恢复错误删除的文件？

> ID：12322438
> 
> 赞同：2
> 
> 时间：2012-09-07T17:01:25.683
> 
> 标签：mercurial

我犯了一个愚蠢的错误，但我做了一个拉合并并忘记在合并后进行提交。

我开始处理一些文件并错误地删除了一个文件夹。我尝试`hg restore`对文件进行操作，但出现错误：

```
abort: uncommitted merge with no revision specified 
```

如果我尝试这样做，`hg ci`我会得到：

```
abort: cannot commit merge with missing files 
```

如何恢复文件以便提交合并并继续工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T17:53:28.623

尝试：

```
hg revert <file> -r <specific_revision_to_restore> 
```

当正在进行合并时，Mercurial 不知道从哪个父级恢复修订。

# c# - Word16和UWord16之间的混淆

> ID：12322440
> 
> 赞同：2
> 
> 时间：2012-09-07T17:01:36.920
> 
> 标签：c#, c, porting

我正在将一些 C 代码移植到 C#。我看到了很多`Word16`,的`Word32`用法，还有`UWord16`and `UWord32`。

我知道`Word32`它是一个无符号的 32 位`int`类型，但是有什么需要用不同的名字来写呢`UWord32`？我在这里错过了什么吗？`Word32`它在某些方面有所不同吗？

另外，`WORD32`我可以用 替换它在 C# 中的用法`int`吗？如果不是，为什么？

**[这个 Source](http://www.haskell.org/ghc/docs/6.12.1/html/libraries/base/Data-Word.html)**说 WORD 是无符号整数类型。是的，来源是 Haskell，我找不到任何其他解释 datatype 的文档`WORD`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T17:02:14.760

> 但是有什么需要用不同的名称 UWord32 来编写它呢？

这是一个无符号的 32 位整数类型。

通常，您可以替换（移至 C#）：

`WORD32`-> `int` ( `Int32`)

`UWORD32`-> `uint`( `UInt32`)

`WORD16`-> `short` ( `Int16`)

`UWORD16`-> `ushort` ( `UInt16`)

但是，鉴于您展示的命名方案，这都是基于我的期望的所有猜测。

请注意，如果您使用的是[Windows 数据类型](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383751%28v=vs.85%29.aspx)、`WORD`->`ushort`和`DWORD`-> `uint`。有符号类型是`INT`/ `INT32`-> `int`，然后是`INT16`-> `short`、`INT64`->`long`等。

话虽如此，**所有**这些选项都是用 C 或 C++ 定义的，而不是“本机”（语言定义）类型。`WORD`如果选择，您的代码可以定义为表示无符号 64 位整数。因此，您需要查看定义的来源（我在此处列出了 Windows API 标准）。

* * *

> 我知道 Word32 是无符号的 32 位 int 类型，但有什么需要用不同的名称 UWord32 编写它？

如果是这种情况，可能不需要对同一类型有两个定义。可能是您使用的两个标头定义的内容略有不同。同样，您需要检查您正在使用的定义这些类型的标头，并查看它们是如何指定的。

# html - 站点从本地主机看起来很完美，但不是从服务器

> ID：12322443
> 
> 赞同：10
> 
> 时间：2012-09-07T17:01:53.680
> 
> 标签：html, css, apache

我偶然发现了一个非常奇怪的问题，我正在构建一个 HTML 模型，它在 localhost 的所有主要浏览器中都运行良好，但是当我将它上传到服务器时，事情变得很奇怪。

**当我在Chrome**或**Safari**中从服务器加载我的网站时，标题（看起来我需要从本地主机）显示扭曲。但是当我重新加载页面时，它可能会正常显示。

两个位置的代码是相同的。服务器正在运行 apache 2.2.16

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-07T18:04:08.313

它来自从`Adblock Plus`附加组件注入的 CSS。停用附加组件可以解决我在 Chrome 中的问题。

这是在关闭后立即从 Adblock Plus 注入的`</body>`：

```
<link rel="stylesheet" type="text/css" href="data:text/css,"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T17:21:55.477

您的测试服务器对我来说看起来不错。

不过，有两件事（独立于 Apache）浮现在脑海中：

1.  您是否考虑过浏览器缓存？当您更新 CSS 文件时，有时浏览器会使用旧的缓存版本的文件。有关这方面的提示，请参阅[此问题](https://stackoverflow.com/questions/1922910/force-browser-to-clear-cache)。
2.  文件和文件夹权限。上传到 Web 服务器时，权限通常会在每次上传时被覆盖，并且无法从正在运行的 Apache 进程访问相关文件（例如 CSS 或 javascript 文件）。

    我`chmod -R 755 /path/to/my/webfolder/`经常跑步...

如果这仍然不起作用，我会查看 Apache.conf 文件，看看 localhost 和公共服务器之间是否存在任何差异。想不出它会是什么......权限差异可能......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T17:31:13.903

~~我想我找到了罪魁祸首（它现在每次都在我的本地 apacheserver 上工作）：~~

 ~~```
.headblock {
    float: right;
    width: 650px;
} 
```~~ 

（我删除了`height: auto;`）

~~我还发现了一篇关于`height: auto`Chrome 中问题的帖子，http://productforums.google.com/forum/#!topic/chrome/ [ikmnUr22cyI](http://productforums.google.com/forum/#!topic/chrome/ikmnUr22cyI)。那里没有关于它被修复的反馈。~~

不是这样。我简化了页面并上传了一个小提琴[http://jsfiddle.net/KqVJ9/](http://jsfiddle.net/KqVJ9/)进行测试。

**固定的？**

它的这个更新版本[http://jsfiddle.net/KqVJ9/3/](http://jsfiddle.net/KqVJ9/3/)一直为我工作。填充/边距可能与原始版本不完全相同，但我留给您修复的那些调整。:)

# vbscript - vbs ldap查询问题

> ID：12322446
> 
> 赞同：1
> 
> 时间：2012-09-07T17:02:27.147
> 
> 标签：vbscript, ldap, ldap-query

我目前正在尝试使用我对脚本编写的小知识通过 ldap 进行搜索，根据变量查找用户，然后获取该用户的显示名称。到目前为止，我在下面，我被卡住了

```
On Error Resume Next

Dim objNetwork 
Dim userName   

  Set objNetwork = CreateObject("WScript.Network") 
  userName = objNetwork.UserName   
  WScript.Echo userName 

  Set objConnection = CreateObject("ADODB.Connection")
 Set objCommand =   CreateObject("ADODB.Command")
 objConnection.Provider = "ADsDSOObject"
 objConnection.Open "Active Directory Provider"
 Set objCommand.ActiveConnection = objConnection

     objCommand.Properties("Page Size") = 1000

        objCommand.CommandText =  _
  "<LDAP://dc=domain,dc=com>;(objectCategory=User);Name;Subtree"  
Set objRecordSet = objCommand.Execute

 objRecordSet.MoveFirst

  Do Until objRecordSet.Fields("Name").Value = username

  objRecordSet.MoveNext
  Loop

  Wscript.Echo objRecordSet.Fields("Name").Value 
```

= 请帮忙！！

我对上述内容进行了检查，现在正在尝试此操作，但出现语法错误

```
option explicit dim cmd, cn, rs, objRoot,
set cmd = createobject("ADODB.Command") 
    set cn = createobject("ADODB.Connection") 

set rs = createobject("ADODB.Recordset") 
cn.open "Provider=ADsDSOObject;" 

cmd.activeconnection = cn set 

objRoot = getobject("LDAP://RootDSE") cmd.commandtext = "<LDAP://dn=domain,dn=com">;(&(objectClass=user)(!(objectClass=computer)            (sAMAccountName=first.last))));name,displayname;subtree"

cmd.properties("page size")=1000 set rs = cmd.execute 

wscript.echo rs("name") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:54:32.693

最终得到了这个

设置 objConnection = CreateObject("ADODB.Connection")

```
Set objCommand = CreateObject("ADODB.Command")  

objConnection.Open "Provider=ADsDSOObject;" 
objCommand.ActiveConnection = objConnection  

strDomainName = "dc=domain,dc=com" 
strUserCN = username 
objCommand.CommandText = "<LDAP://" & strDomainName & ">;(&(objectCategory=person)     (objectClass=user)(cn=" & strUserCN & "));displayName;subtree"  

Set objRecordSet = objCommand.Execute  

If Not objRecordset.EOF Then  

strray = split(objRecordSet.Fields("displayName"),"(") 
strdat = strray(0)

username = trim(strdat)

End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T17:20:26.043

我怀疑属性名称是名称，并在此行中尝试显示名称：

```
"<LDAP://dc=domain,dc=com>;(objectCategory=User);Name;Subtree" 
```

# knockout.js - 如何在运行时根据服务器输出使用 Knockout 在 WijGrid 上创建列？

> ID：12322448
> 
> 赞同：0
> 
> 时间：2012-09-07T17:02:42.560
> 
> 标签：knockout.js, wijmo

在 WijGrid 的每个示例中，列都是在这样的数组中手动​​创建的：

```
<table id="dataGrid" data-bind="wijgrid: {
                                          data: dataRows,
                                          pageSize: pageSize,
                                          pageIndex: pageIndex,
                                          totalRows: totalRows,
                                          allowPaging: true,
                                          allowSorting: true,
                                          sorted: sorted,
                                          pageIndexChanged: paged,
                                          columns: [
                                                   { sortDirection: 'ascending', dataType: 'number', dataFormatString: 'n0', headerText: 'ID', width: 60 },
                                                   { headerText: 'Product' },
                                                   { dataType: 'currency', headerText: 'Price', width: 100},
                                                   { dataType: 'number', dataFormatString: 'n0', headerText: 'Units', width: 100}]
                                                   }">
</table> 
```

或者在这样的 WijGrid 对象中：

```
$('#activejobs').wijgrid({
    columns: [
        { headerText:'Customer',allowSort:true, dataType:'string' },
        { headerText:'Job Number',allowSort:true, dataType:'string'},
                    { headerText:'Scheduled Completion',allowSort:true, dataType:'datetime', sortDirection:'ascending'},
            { headerText:'Description',allowSort:false, dataType:'string', ensurePxWidth:true, width:250 },
            { headerText:'Total Hours',allowSort:true, dataType:'number'}
    ],
    columnsAutogenerationMode: "merge",
    dynamic:true
}); 
```

然而，当使用敲除时，我找不到一种方法来编辑或操作基于服务器数据自动生成的列。例如，我正在处理的项目返回特定工作在每个制造过程或部门中花费的小时数。客户可以随着时间的推移添加或删除流程或部门，所以我不能保证这些列总是相同的，我也不能保证它们的数据类型、排序选项、类、格式等。

通过淘汰赛，我可以遍历我的数据并按需添加列，虽然这很好用，但我无法更改每个列参数。

下面是我正在使用的代码：

```
var viewModel = {
    pageSize: ko.observable(10),
    pageIndex: ko.observable(0),
    sortCommand: ko.observable("EndDate asc"),
    dataRows: ko.observableArray([]),
    totalRows: ko.observable(0),
    sorted:function(e,data){
        viewModel.sortCommand(data.sortCommand);
    },
    paged:function(e,data){
        viewModel.pageIndex(data.newPageIndex);
    },
    load:function(){
        $.ajax({
            url:"/workcenters/get-active-jobs/",
            datatype:'json',
            data:{
                format: 'json',
                inlinecount: "allpages",
                orderby: viewModel.sortCommand(),
                top: viewModel.pageSize(),
                skip: viewModel.pageIndex() * viewModel.pageSize(),
                page:viewModel.pageIndex()
            },
            success:function(result){
                var data = result.d.results;
                var arr = [];
                $.each(data,function(i){
                    var collection = data[i];
                    arr.push(new job(collection));                      
                });
                viewModel.totalRows(result.d.__count);
                viewModel.dataRows(arr);
            }
        });
    }
};
var job = function(data){
var collection = {
        "Customer Name": ko.observable(data.customername),
        "Job Number": ko.observable(data.jobnumber),
        "Delivery Date": ko.observable(data.projectedend),
        Description: ko.observable(data.description),
        Hours: ko.observable(data.hours)
};

var workhoursCollection = data.workhours;
$.each(workhoursCollection,function(i,workhours){
    var heading = workhours.elements.heading;
    collection[heading] = ko.observable(workhours.elements.value);
});
return collection;
};
$(document).ready(function(){

$('#pagesize').wijdropdown();

$('#activejobs').wijgrid({
    allowColSizing:true,
    allowColMoving:true,
    allowKeyboardNavigation:true,
    allowPaging:true,
    allowSorting:true,
    cellStyleFormatter: function(args){
    },
    rowStyleFormatter: function(args){
    },
    columns: [
            { headerText:'Customer',allowSort:true, dataType:'string'        },
            { headerText:'Job Number',allowSort:true, dataType:'string'},
            { headerText:'Scheduled Completion',allowSort:true, dataType:'datetime', sortDirection:'ascending'},
            { headerText:'Description',allowSort:false, dataType:'string', ensurePxWidth:true, width:250 },
            { headerText:'Total Hours',allowSort:true, dataType:'number'}
        ],
    columnsAutogenerationMode: "merge",
    culture:"en",
    dynamic:true,
    highlightCurrentCell: true,
    loadingText:"Please wait a moment...",
    scrollMode:"auto",
    //showGroupArea:true,
    staticRowIndex:0,
    staticColumnIndex:0
});

ko.applyBindings(viewModel);
viewModel.load();
viewModel.sortCommand.subscribe(function(newValue){
    viewModel.load();
});
viewModel.pageIndex.subscribe(function(newValue){
    viewModel.load();
});
viewModel.pageSize.subscribe(function(newValue){
    viewModel.load();
    $('#pagesize').wijdropdown("refresh");
});
});

function addColumn(rowObject){
var grid = $('#activejobs');
options = grid.wijgrid('option');

grid.wijgrid('destroy');

options.columns.push(rowObject);
grid.wijgrid(options);
} 
```

服务器返回的对象如下所示（PHP）：

```
d = array(
 'results'=>array{
          "customername"=>$data->name,
      "jobnumber"=>$data->number,
      "projectedend"=>$data->projectedenddate,
      "description"=>$data->description,
      "hours"=>$data->estimatedhours,
       "workhours"=>$workgroupCollection
  }, '__count'=>$count
)
$workgroupCollection = array{   
    'info'=>array('heading'=>$workgroup->name,'name'=>$workgroupName),
    'elements'=>array(
     'name'=>$element,
     'heading'=>$workAreaModel->name,
         'value'=>$hours
    )
} 
```

最终，我也想使用这些数据来创建波段，但第一步是能够编辑动态生成的列属性。

摘要：如何构建带有一些默认列的 wijmo Grid，然后在运行时添加新列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:21:10.850

你看过这个链接：[http](http://wijmo.com/demo/explore/?widget=Grid&sample=Column%20visibility) ://wijmo.com/demo/explore/?widget=Grid&sample=Column%20visibility ？如果您知道所有列的可能性是什么，您可以将它们全部隐藏在服务器上的源代码 HTML 中，然后根据需要切换可见性。

# extjs - ExtJS 2.3 BorderLayout 在折叠时调整中心

> ID：12322450
> 
> 赞同：1
> 
> 时间：2012-09-07T17:02:58.403
> 
> 标签：extjs, extjs2

我正在使用 BorderLayout 并尝试在左侧面板折叠时调整中心区域的大小。我的中心区域是一个标签面板。我的一个标签包含一个网格面板。我想在折叠时调整中心区域选项卡面板中的任何面板的大小。

App.centerTabPanel 是对中心区域的选项卡面板的引用。App.mainPanel 只是我正在测试调整大小的选项卡之一。

没有任何东西可以调整大小，我的标签布局“适合”。只有当我重新加载商店时，带有网格面板的选项卡才会调整大小。

这是我的代码：

```
Ext.override(Ext.layout.BorderLayout.Region, {

        onCollapse : Ext.layout.BorderLayout.Region.prototype.onCollapse.createSequence(function() {
                    //App.centerTabPanel.doLayout(); //doesn't work
                    //App.centerTabPanel.getActiveTab().doLayout() // doesn't work
            //App.centerTabPanel.syncSize(); // doesn't work
            App.mainPanel.getStore().reload(); // this works, when the store reloads it resizes the grid
        })
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:49:12.413

尝试将配置选项**split : true**添加到边框布局中的所有项目（区域）

# java - Birt：我们可以在birt中创建树表来表示父子关系吗？

> ID：12322451
> 
> 赞同：1
> 
> 时间：2012-09-07T17:03:05.890
> 
> 标签：java, birt

我们可以在 birt 中创建树表来使用 birt 报告来表示父子关系吗？

我需要类似于[ExtJS 树网格](http://dev.sencha.com/deploy/ext-4.0.0/examples/tree/treegrid.html)的东西 在我的数据库表中，孩子有一个父 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T21:54:07.580

默认情况下不是，但您可以采用该示例并将其包含在 BIRT 报告中，使用文本元素从数据集值加载节点数据。但它只能以 HTML 格式工作。另一种选择是创建一个报表项扩展，它可以执行类似于生成图像的操作。

# macos - 以编程方式使计算机静音

> ID：12322460
> 
> 赞同：2
> 
> 时间：2012-09-07T17:04:12.427
> 
> 标签：macos, audio

我正在为 OS X 开发一个免费的应用程序，它可以按计划将您的计算机静音。它背后的想法是，如果您在开会或上课，您只需运行该应用程序并确保它不会发出噪音。问题是，我不知道如何使系统音量静音。有什么帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T17:16:04.847

在 AppleScript 中，您可以这样做：

```
set volume output volume 0 
```

（音量是从 0 到 100 的值，其中 0 是“静音”，100 是全音量。）

您可以只创建一个包含这一行代码的小程序，并根据需要从 iCal 中按计划运行。

或者，如果您真的想要，您可以创建一个成熟的 Cocoa 应用程序，您只需要[使用 NSAppleScript 运行上述代码](https://stackoverflow.com/questions/4909702/run-applescript-from-cocoa-application)。不过，这似乎有点矫枉过正。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T17:27:04.163

很多例子：

[http://cocoadev.com/wiki/SoundVolume](http://cocoadev.com/wiki/SoundVolume)

和

[http://code.google.com/p/android-notifier/source/browse/SoundVolume.m?repo=oldsvn&name=MacDroidNotifier-0.2.4](http://code.google.com/p/android-notifier/source/browse/SoundVolume.m?repo=oldsvn&name=MacDroidNotifier-0.2.4)

和

[如何获取计算机当前的音量级别？](https://stackoverflow.com/questions/8950727/how-to-get-the-computers-current-volume-level)

# javascript - 如何使用 JS/jQuery 在另一个站点上的 iframe 中显示特定内容

> ID：12322462
> 
> 赞同：0
> 
> 时间：2012-09-07T17:04:28.373
> 
> 标签：javascript, jquery, iframe

我需要定位另一个站点上的特定区域，并使该模块适合 iframe 的大小。我认为 jQuery 可能最适合用于定位我需要的内容围绕它的 div id 或类。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:09:45.893

尝试：

```
$('#id', window.frames['frame-name'].document) 
```

# android - 从 SVN 导入的项目不会在 Eclipse 中启动

> ID：12322468
> 
> 赞同：0
> 
> 时间：2012-09-07T17:05:09.843
> 
> 标签：android, eclipse, svn

我的 Eclipse 本地工作区中的项目启动并正确运行（Hello World Java 项目和 Hello World Android 项目在模拟器中打开正常）。当我从 SVN 导入一个项目（该项目是 android Hello World 应用程序）并尝试运行这个项目时，我收到一个错误：“无法启动”“无法启动选择并且最近没有启动”。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:32:11.740

选择项目 -> 右键单击​​ -> 运行方式 -> Android 应用程序

# objective-c - Objective C - 导入具有相同变量名的标头

> ID：12322470
> 
> 赞同：-1
> 
> 时间：2012-09-07T17:05:31.433
> 
> 标签：objective-c, ios

我有一个准备推出的安卓游戏，我目前正在努力将它移植到 iOS。

总的来说，我对 Objective C 和 C 还很陌生，我不确定 @properties 和 @synthesize 以及 #imports 是如何工作的。

我的游戏共享一个名为 gMain 的方法文件。该文件包括对象之间的共享方法。我有一个名为 Fish 的对象，其中包含一个方法，该方法需要另一个名为 Fish2 的对象的 x,y 值。

当 Fish 和 Fish2 共享相同的变量名 int x、int y 时，我不确定如何访问这些变量。

这行得通吗？

```
//Fish.h 
@interface Fish 
{
     int x, y; 
} 
@property int x, y; 
-(void)blah;
@end  

//Fish2.h
@interface Fish2
{
    int x, y;
}
@property int x, y; 
@end    

//Fish.m 
#import Fish.h 
@implementation Fish  
@synthesize x, y;

-(void)blah
{
    x = Fish2.x;
    y = Fish2.y;
}
@end 

//Fish2.m
#import Fish2.h
@implementation Fish2
@synthesize x, y;
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:18:52.490

> 这是否从 2 个对象合成 xs 和 ys？

**不。**

你的代码不会编译。您已经省略了所有告诉编译器您正在谈论的类的`@interface`、`@implementation`和指令。`@end`指令将`@synthesize`始终包含在`@implementation *classname*`和之间`@end`，并且它只会为指定的类合成一个属性。

如果你更正你的代码，效果`@synthesize`应该是显而易见的。

```
//Fish.h
@interface Fish
{
    int x, y;
}
@property int x, y;

@end

//Fish.m
#import Fish.h
#import Fish2.h       // it's not clear why you'd need this

@implementation Fish

@synthesize x, y;     // creates accessors for properties x and y of class Fish

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:26:18.397

这行不通

```
 -(void)blah
{
    x = Fish2.x;
    y = Fish2.y;
} 
```

您需要为 Fish2 创建一个指针。像这样的东西...

```
 -(void)blah
{
    Fish2 *selectedFish = //wherever the instance of the fish is.
    x = selectedFish.x;
    y = selectedFish.y;
} 
```

如果 Fish 创建了一个 fish2 的实例，那么做这样的事情可能会更有帮助。

```
 -(void)blahWithFish:(Fish2)currentFish
{
    x = currentFish.x;
    y = currentFish.y;
} 
```

如果你做类似的事情，你可以将鱼传递给这个方法。

还有fish2的原因吗？您不只是创建 2 个鱼对象吗？他们执行相同的任务吗？也许fish2应该继承自Fish？

这有帮助吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T18:45:47.563

我不确定您是否要处理一个类，两个实例，两个单独的类。我将尝试给出每个示例，并尝试解释代码在做什么。

## 单类，两个实例

**鱼.h**

```
@interface Fish : NSObject
@property (nonatomic, assign) int x;
@property (nonatomic, assign) int y;
- (void) someMethod;
@end 
```

因此，您正在定义一个名为 FishA 的新对象，该对象有 2 个公共属性，x 和 y。括号中的 2 项 nonatomic 和 assign 告诉编译器有关属性的额外信息。Bassicaly`nonatomic`意味着不担心线程安全，`assign`意味着属性是基本类型，而不是对象。

**鱼米**

```
#import "Fish.h"

@implementation Fish
@synthesize x = _x;
@synthesize y = _y;

- (id) init {
    self = [super init];
    if (self) {
        // Initilize default values
        // Only use the _x and _y in init
        // no other place
        _x = 0;
        _y = 0;
    }
    return self;
}

- (void) someMethod {
    // Set the values
    self.x = 10;
    self.y = 10;

    // Access the values
    NSLog(@"X: %d", self.x)
    NSLog(@"Y: %d", self.y)
} 
```

因此，`@synthesize`语句将为您创建两种方法，一种用于设置值，另一种用于获取值。在上面的语句中，告诉编译器为属性`x`创建方法，是属性的内部存储变量的名称。最好将属性和内部存储分开命名，它使代码更清晰，更容易理解发生了什么。`x``_x`

在`init`该方法中，我们直接使用初始值设置内部变量。该`init`方法*通常*是您要访问内部变量的唯一位置。

**采用**

```
#import "Fish.h"

- (void) example {
    Fish *fishA = [[Fish alloc] init];
    Fish *fishB = [[Fish alloc] init];

    fishA.x = 10;
    fishB.x = 20;

    [fishA someMethod];
    [fishB someMethod];
} 
```

## 单独的类

**鱼A.h**

```
@interface FishA : NSObject
@property (nonatomic, assign) int x;
@property (nonatomic, assign) int y;
@property (nonatomic, assign) int size;
- (void) someMethod;
@end 
```

**FishA.m**

```
#import "FishA.h"

@implementation FishA
@synthesize x = _x;
@synthesize y = _y;
@synthesize size = _size;

- (id) init {
    self = [super init];
    if (self) {
        // Initilize default values
        // Only use the _x and _y in init
        // no other place
        _x = 0;
        _y = 0;
        _size = 10;
    }
    return self;
}

- (void) someMethod {
    // Set the values
    self.x = 10;
    self.y = 10;

    // Access the values
    NSLog(@"X: %d", self.x)
    NSLog(@"Y: %d", self.y)
} 
```

**鱼B.h**

```
@interface FishB : NSObject
@property (nonatomic, assign) int x;
@property (nonatomic, assign) int y;
@property (nonatomic, strong) NSColor *color;
- (void) someMethod;
@end 
```

颜色属性看起来有点不同。因为颜色是一个对象而不是基本类型，我们需要告诉编译器我们想要如何处理它。告诉编译器保留这个`strong`对象，直到我们完成它。另一个选项是`weak`并且告诉编译器不要保留对象。一般来说，与对象，使用强。

**鱼B.m**

```
#import "FishB.h"

@implementation FishB
@synthesize x = _x;
@synthesize y = _y;
@synthesize color = _color;

- (id) init {
    self = [super init];
    if (self) {
        // Initilize default values
        // Only use the _x and _y in init
        // no other place
        _x = 0;
        _y = 0;
        _color = [NSColor blueColor];
    }
    return self;
}

- (void) someMethod {
    // Set the values
    self.x = 10;
    self.y = 10;

    // Access the values
    NSLog(@"X: %d", self.x)
    NSLog(@"Y: %d", self.y)
} 
```

所以我创建了两个独立的类，FishA 有一个 size 属性，FishB 有一个 color 属性。两条鱼都具有 x 和 y 属性。并不过分令人兴奋，但它使两个课程有所不同。

**采用**

```
#import "FishA.h"
#import "FishB.h"

- (void) example {
    FishA *fishA = [[FishA alloc] init];
    FishB *fishB = [[FishB alloc] init];

    fishA.x = 10;
    fishB.x = 20;

    fishA.size = 50; // Works
    fishB.size = 50; // Will not work

    fishA.color = [NSColor redColor]; // Will not work
    fishB.color = [NSColor redColor]; // Works
} 
```

# git - 有没有办法获得heroku toolbelt的各个组件？

> ID：12322473
> 
> 赞同：10
> 
> 时间：2012-09-07T17:05:45.003
> 
> 标签：git, heroku, foreman

有没有办法单独下载和安装 heroku toolbelt 组件，或者至少没有捆绑的 git？Heroku Toolbelt 附带了 git。上次我下载并安装它时，它覆盖了我现有的 git 安装。Heroku Toolbelt 捆绑了旧版本的 git，我至少需要 1.7.10。有没有办法只安装heroku和工头？考虑到大多数 Heroku 用户可能已经是 git 的开发人员，没有这样的选项似乎有点奇怪。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T18:22:21.953

它只是 Foreman、Git 和 Heroku CLI 客户端。

![自定义 Heroku Toolbelt 安装屏幕](../Images/c2b4320d7abb4cab56707517477befbd.png)

如果你已经有 Git 和 Foreman，你可以从命令行安装 CLI，

```
wget -qO- https://toolbelt.heroku.com/install.sh | sh 
```

Windows 安装程序提供相同的选项。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-03T00:53:15.553

我会使用 mxcl 的自制软件来安装 heroku-toolbelt。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:30:30.727

在 OS X 上，您可以选择要安装的组件：在“安装类型”阶段，窗口底部有一个“自定义”按钮，可让您选择所需的组件。

（我没有使用过 Linux 或 Windows 安装程序，所以我不知道它们是否提供相同的自定义选项。）

# facebook - CouchDB FB 身份验证注册

> ID：12322474
> 
> 赞同：2
> 
> 时间：2012-09-07T17:05:54.263
> 
> 标签：facebook, couchdb

我正在尝试在 CouchDB 应用程序中启用 FB 身份验证。我正在使用 IrisCouch，它说它内置了这个，但有很多问题。尝试了这里列出的一堆教程：

[http://www.iriscouch.com/blog/2011/07/coffeescript-facebook-and-futon#facebook_authentication](http://www.iriscouch.com/blog/2011/07/coffeescript-facebook-and-futon#facebook_authentication) https://getsatisfaction.com/iriscouch/topics/ocasta_labs_facebook_authentication

但他们似乎没有工作。我去我在 Futon 中的配置并设置客户端 ID 和密码，但它似乎没有做任何事情。想法？

——阿什利

编辑：好的，所以我通过 FB 工作获得了身份验证，现在只是在进行注册，我收到错误“创建用户文档需要在页面中加载 sha1.js”

但是，当我阅读我的 couch.js 文件时，我看到那里已经存在散列，我是否在某处缺少 js 文件？

# ios - 共享不可变的 NSStrings

> ID：12322478
> 
> 赞同：0
> 
> 时间：2012-09-07T17:06:10.883
> 
> 标签：ios, nsstring, nsdictionary

我有一个大约 10k 字典的列表，每个字典包含大约 50 个键。所有字典的键或多或少都相同。

使用 NSDictionary.alloc.initWithContentsOfFile 加载数据。

似乎键对象在不同的​​字典之间重用，因此内存中没有大约 50 万个字符串，每个唯一键只有一个字符串，因此只有几百个。

所以我想知道这是否是*initWithContentsOfFile*方法的预期行为并且我可以依赖它，或者在某些情况下我会为不同字典中的相同键获得不同的字符串对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:56:23.467

您正在经历的是 Objective-C 实现的一个特性。我不知道它是 Cocoa 还是 Objective-C 独有的。这是内存优化。

```
NSString *myString1 = @"Hello!";
NSString *myString2 = @"Hello!";
if (myString1 == myString2) {
   NSLog(@"Same");
} 
```

myString1 和 myString2 都将指向同一个内存位置。控制台将打印 Same。

```
NSString *myString1 = [[NSString alloc] initWithString:@"Hello!"];
NSString *myString2 = [[NSString alloc] initWithString:@"Hello!"];
if (myString1 == myString2) {
   NSLog(@"Same");
} else {
   NSLog(@"Not the same");
}
if ([myString1 isEqualToString:myString2]) {
   NSLog(@"String matches");
} 
```

myString1 和 myString2 不会指向同一个内存位置

在这种情况下，控制台会打印 Not the same，然后 String 匹配。使用 == 比较字符串是不安全的。NSString 有一个特殊的方法叫做 isEqualToString: 用于比较。有可能使相同的“字母串”不等于相同的“字母串”，因为它们占用不同的内存位置。

Anyway, in your question, you if you're using initWithContentsOfFile to load a dictionary, you don't need to worry about having key values shared across several dictionaries. Each NSDictionary will add a retain to each key, even though it's only in memory once. YOu don't need to worry about it disappearing.

# sql - SQL 对作为代码的字段进行计数

> ID：12322481
> 
> 赞同：4
> 
> 时间：2012-09-07T17:06:25.880
> 
> 标签：sql, oracle

我有一张桌子

```
ANSWERS 
   qId
   toggle_value 
```

它记录了一个 HTML 单选按钮值`{Yes, N/A, No, Resolved}`

现在我想计算和总结按问题 ID 分组的是、否、nas 和已解决的数量。

为简单起见，我开始构建每个单独的查询。

```
SELECT qId, count(*) as yes_qty FROM ANSWERS WHERE TOGGLE_VALUE='Yes' GROUP BY qId;
SELECT qId, count(*) as na_qty FROM ANSWERS WHERE TOGGLE_VALUE='NA' GROUP BY qId;
SELECT qId, count(*) as no_qty FROM ANSWERS WHERE TOGGLE_VALUE='No' GROUP BY qId;
SELECT qId, count(*) as resolved_qty FROM ANSWERS WHERE TOGGLE_VALUE='Resolved' GROUP BY qId; 
```

但我真的希望它在一个查询中，所以我可以遍历列表并显示类似的内容（聚合 14 个清单和 3 个问题）

```
Q      Yes      No     NA     Resolved
1       4       10     0        10
2      14        0     0         0
3       7        0     7         0 
```

我实际上并没有使用字符串作为切换值，而是使用数字 1=yes、2=NA 等...并且想知道是否会有更好的表格设计

```
ANSWERS 
   qId
   yes_value
   no_value
   na_value
   resolved_value 
```

如果我更改表设计，我将不得不重构很多其他的东西，所以我希望让一个查询工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T17:10:08.850

```
SELECT qId,
       SUM(CASE WHEN TOGGLE_VALUE='Yes' THEN 1 ELSE 0 END) AS YesQty,
       SUM(CASE WHEN TOGGLE_VALUE='No' THEN 1 ELSE 0 END) AS NoQty,
       SUM(CASE WHEN TOGGLE_VALUE='NA' THEN 1 ELSE 0 END) AS NAQty,
       SUM(CASE WHEN TOGGLE_VALUE='Resolved' THEN 1 ELSE 0 END) AS ResolvedQty
  FROM ANSWERS 
 GROUP BY qId 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T17:11:35.910

我喜欢你的桌子设计。我会亲自用`SUM`and`GROUP BY`和 using`CASE`子句来创建新列来解决这个问题。

# c# - 如何解决通用 GridView 中的通用 ComboBox 表示

> ID：12322484
> 
> 赞同：0
> 
> 时间：2012-09-07T17:06:54.530
> 
> 标签：c#, wpf, wpfdatagrid, celltemplate, autogeneratecolumn

我在用户控件 (DataGridView) 中有一个 DataGrid。此用户控件从应用程序的任何位置传播到 DataGrid 的 ItemsSource 的绑定，并用 K 的列表填充它。

对于此示例，让我们为 K 定义具有一些具有自定义属性的属性的类：

```
public class Foo
{
    [Enumeration(IsEnum=true, EnumerationType=typeof(MessageType))] //MessageType is enumeration and is consisted of values: 'Error', 'Warning' and 'Info'
    public MessageType MessageType { get; set; }

    [Enumeration(IsEnum=true, EnumerationType=typeof(FooType))] //FooType is enumeration and is consisted of values: 'Sweet' and 'Salty'
    public FooType FooType { get; set; }
 } 
```

DataGrid 有一个用于自动生成列的事件。

```
private void OnAutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
    {
        foreach (Attribute attribute in (e.PropertyDescriptor as System.ComponentModel.PropertyDescriptor).Attributes)
        {
            Utilities.EnumerationAttribute enumAttribute = attribute as Utilities.EnumerationAttribute;

            if (enumAttribute != null
                && enumAttribute.IsEnum)
            {
                DataGridTemplateColumn templateColumn = new DataGridTemplateColumn();

                templateColumn.CellTemplate = (DataTemplate)Resources["enumTemplate"];

                e.Column = templateColumn;
            }
        }
        e.Column.IsReadOnly = true;
   } 
```

“enumTemplate”的资源在 MergedDictionary 中定义为 DataTemplate

```
<DataTemplate x:Key="enumTemplate">
    <StackPanel>
        <ComboBox/>
    </StackPanel>
</DataTemplate> 
```

我打算做的是设置网格将生成的每个 ComboBox 的 ItemsSource，其返回值为字符串 [] 类型的 Enum.GetNames(enumAttribute.EnumerationType)。

现在这里有很多匿名性，我不知道属性的名称、它们的类型，甚至这个 DataGrid 在运行时将显示的对象的类型。

我对此进行了几次尝试......比如定义一个 List> 类型的属性 DataSourcesList，其中 NamedArray 包含要填充组合框的项目和属性的名称（来自 e.PropertyName），以便我知道哪个 NamedArray 用于组合框正在生成...类似于：

```
 DataSourcesList.Add(new DataSourceWithMappedName<System.Object>() { MappedName = e.PropertyName, SourceList = Enum.GetNames(enumAttribute.EnumerationType) }); 
```

然后更改 DataTemplate：

```
<DataTemplate x:Key="enumTemplate">
    <DataTemplate.Resources>
        <converters:IListToItemsSource x:Key="ilistToItemsSource"/>
    </DataTemplate.Resources>
    <StackPanel>
        <ComboBox ItemsSource="{Binding DataSourcesList, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type local:DataGridView}}, Converter={StaticResource ilistToItemsSource}, ConverterParameter={Binding somethingButAllInVaine}}"/>
    </StackPanel>
</DataTemplate> 
```

，但由于 ConverterParameter 不是 DependencyObject 且无法绑定，因此无法执行此操作。

也许我应该声明，以后应该将相同的原则用于绑定集合而不仅仅是枚举。

所以拜托，任何人都可以帮助我解决通用 GridView 中的通用 ComboBox 表示。

Tnx 和快乐的编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:03:57.000

也许`DataTemplate`在代码中设置会更容易。首先定义`datatemplate`，然后将设置`ComboBox ItemSource Binding Source`为.`List of String``Enum.GetNames()`

**编码方式**

```
 // Create template
        DataTemplate newTemplate = new DataTemplate();
        FrameworkElementFactory stackFactory = new FrameworkElementFactory(typeof(StackPanel));
        FrameworkElementFactory comboFactory = new FrameworkElementFactory(typeof(ComboBox));
        Binding newBinding = new Binding();
        newBinding.Source = Enum.GetNames(typeof(enumAttribute.EnumerationType));
        comboFactory.SetBinding(ComboBox.ItemsSourceProperty, newBinding);
        stackFactory.AppendChild(comboFactory);
        newTemplate.VisualTree = stackFactory;

        // Set the template
        templateColumn.CellTemplate = newTemplate; 
```

* * *

**XAML / 代码方式***

```
<CollectionViewSource x:Key="EnumCollection"/>

<DataTemplate x:Key="enumTemplate"> 
    <StackPanel>
        <ComboBox ItemsSource="{Binding Source={StaticResource EnumCollection}}" />
    </StackPanel>
</DataTemplate> 
```

代码（确保设置`Collection Source`）：

```
CollectionViewSource enumCollection = (CollectionViewSource)this.FindResource("EnumCollection");
enumCollection.Source =Enum.GetNames(typeof(enumAttribute.EnumerationType)); 
```

**纯 Xaml**

```
<ObjectDataProvider x:Key="EnumCollection"
                    MethodName="GetValues"
                    ObjectType="{x:Type sys:Enum}">
    <ObjectDataProvider.MethodParameters>
        <x:Type TypeName="YourEnum" />
    </ObjectDataProvider.MethodParameters>
</ObjectDataProvider>

<DataTemplate x:Key="enumTemplate"> 
    <StackPanel>
        <ComboBox ItemsSource="{Binding Source={StaticResource EnumCollection}}" />
    </StackPanel>
</DataTemplate> 
```

# objective-c - 在 XCode 中使用静态库时必须将二进制文件与库链接两次

> ID：12322490
> 
> 赞同：1
> 
> 时间：2012-09-07T17:07:32.300
> 
> 标签：objective-c, xcode, static-libraries, static-linking, xcode4.4

我正在尝试在项目中使用静态库。静态库依赖于几个框架……CoreData、CFNetwork、AddressBook 等。

静态库也使用类别，所以我不得不在主项目的“其他链接器设置”中使用 -all_load 链接器选项。当我启用此功能时，我会收到 120 个错误，这些错误都与我的主项目没有与我的静态库（CoreData、CFNetwork、AddressBook 等）相同的框架链接。

开发人员想要使用静态库，链接到它，但仍然需要链接到库链接到的所有框架，这是非常不方便的。有没有办法自动化这个过程，以便主项目自动链接到静态库链接的所有框架？

我正在使用 XCode 4.4。

编辑：更清楚地说，我有以下内容：

```
StaticLibrary.xcodeproj
    - AFNetworking
        - files...
    - CoreData
        - categories for NSManagedObjectContext, for convenience
    - AddressBook
        - convenience methods for working with contacts 
```

该项目的目标链接到 Build Phases > Link Binary With Libraries 下的必要框架。这包括 CoreData.framework、AddressBook.framework 等。

现在我想做的是将此库添加到我的另一个项目中。事实上，我想将这个库添加到我从这里开始制作的每个新项目中，所以我总是可以轻松访问我编写的便利函数/类别。所以：我将库添加到我的项目中，然后将`.a`文件添加到 Build Phases > Link Binary With Libraries（我的主项目的）。我还做了我所知道的所有其他必要的事情（见评论）。

我想要发生的事情：主项目现在链接到库，因此它继承了库的所有链接，因此主项目现在也链接到 CoreData.framework、AddressBook.framework 等。

会发生什么：主项目给了我错误，因为它没有链接到库需要的任何东西。

有没有办法自动将静态库中的链接框架添加到主项目中，或者我应该将库拆分为 CoreDataStaticLibrary 等，然后要求开发人员将 CoreData.framework 以及静态库添加到项目中每次都瞄准？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:16:25.877

据我了解，仅`-all_load`当您的库仅包含类别时才需要。否则，您可以使用`-ObjC`. 无论如何，这就是我使用的。

此外，当您构建静态库时，您只是在创建已编译对象模块的存档。库中没有解决外部依赖项。实际上，您应该将其视为一堆目标代码文件的单个集合。

因此，当您最终链接可执行文件时，它将链接您的所有编译代码，以及静态库中预编译代码的存档。链接器将期望解析所有符号，因此您必须告诉它在哪里可以找到完全解析所有符号所需的所有库（框架）。

XCode 是否应该能够查看静态库子项目内部并从该项目中提取框架依赖项并将它们添加到最终项目的链接器调用中？当然。但是，我不知道有一种方法可以自动实现这一点。

如果需要，您可以为您的库创建一个 podfile，并使用[CocoaPods](http://cocoapods.org)来管理您的项目依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:56:29.037

问题是您多次包含相同的符号。我已经多次遇到相同的问题，解决方案基本上是了解“-all_load”标志的作用，这在这个 SO 问题中得到了很好的解释：[What do the all load linked flag do](https://stackoverflow.com/questions/2906147/what-does-the-all-load-linker-flag-do)

也就是说，您永远不会以这种方式从您的库中引用框架。由于这些框架是动态链接的，它们并不真正属于您的静态库，因此只有指向它们的引用。

此类库的用户应负责添加必要的框架以使其正常工作。这意味着，您不必将您的库链接到此类框架（因为这样的事情没有意义），只需将它们添加到将使用它的项目中即可。（看看 Restkit 看看它是如何完成的）。

另外，我认为您可以摆脱“all_load”标志并尝试将其替换为“force_load /path/to/the/library” all_load 仅在您的库仅包含类别（根本没有类）时才需要。

让我们知道进展如何，祝您编码愉快！

# java - 为 REST API 处理球衣中的全部和部分视图

> ID：12322491
> 
> 赞同：1
> 
> 时间：2012-09-07T17:07:33.297
> 
> 标签：java, rest, jersey, jackson

我正在为一个项目创建一个 RESTful API。我在尝试用球衣实现它时遇到了一些问题：

1.  我的对象模型显然不包含 uri 信息。例如，假设我有一个水果课。Fruit 对象有一个 FruitName 和一个 FruitColor。但在响应中，我还需要发送一个 URI。这通常是如何处理的？我应该创建一个单独的“FruitResource”，它有一个构造函数，它接受一个“Fruit”并从中创建一个完整的资源，包括 URI？我还需要嵌套对象中的 URI，例如，如果我返回一个`Child`对象列表，我需要每个`Child`对象也有一个 URI，但我不希望 URI 成为对象模型的一部分。最干净的方法是什么？

2.  我希望能够返回同一资源的完整和部分视图。例如，部分视图只有名称和 URI。如何完成这项工作？

现在我拥有的是一个`Service`接受请求的类，它使用`DAO`来创建和返回对象，因为它们是从数据库建模的，使用杰克逊序列化为 JSON。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:48:37.057

我正在开发一个支持这两个问题的项目：[https ://github.com/skyscreamer/yoga，在](https://github.com/skyscreamer/yoga)[http://yoga.skyscreamer.org/](http://yoga.skyscreamer.org/)提供更多信息，包括演示。

它将 JAX-RS（或 Spring MVC）渲染机制替换为更符合 REST 系统需求的定制构建解决方案。

对于#1，我们有一个注释，您必须将其应用于您的 Child pojo。JAX-RS 的注解旨在将 URL 映射到控制器而不是底层对象，因此我们需要一个自定义解决方案……但它实际上只是归结为每个 pojo 1 个额外的注解。

对于#2，我们有一个基于 URL 的机制，用于指定您希望从 pojo 或 pojo 的子项中获得哪些附加信息（并且可以进一步嵌套）。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T18:33:54.943

有一种使用 JaxB 类的方法，您可以将对象模型传递给 JaxB 类，然后 JaxB 类生成 URI。下面是小样机。

**用户资源类**

```
@Path("/user")
public class UserResource {
@GET
@Produces(MediaType.APPLICATION_JSON)
@Path("{user-id}")
public UserJaxB getUser(@PathParam("user-id") String userId, @Context
HttpServletRequest request) {
    // now XYZ is hard-coded value 
    String serviceEndpoint = request.getContextPath() + "/" + "user";
    UserModel userModel = new UserModel(userId, "XYZ");
    return new UserJaxB(serviceEndpoint,userModel);
}
} 
```

**用户 JAXB 类**

```
@XmlRootElement
public class UserJaxB {

private String name;
private String id;
private String serviceEndpoint;
private String URI;

public UserJaxB(String serviceEndpoint, UserModel userModel) {
    this.name = userModel.getName();
    this.id = userModel.getId();
    this.serviceEndpoint = serviceEndpoint;
}

public String getId() {
    return id;
}

public void setId(String id) {
    this.id = id;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public String getURI() {
    return this.serviceEndpoint + "/" + id;
}
} 
```

**用户模型类** public class UserModel {

```
String name;
String id;

public UserModel(String name, String id) {
    this.name = name;
    this.id = id;
}

public String getId() {
    return id;
}

public String getName() {
    return name;
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T18:37:09.797

**1)**我不知道有任何 Jersey 或 JAX-RS 机制支持这一点。不过，必须将 URI 添加到每个域类的构造函数中似乎是一种不好的做法。您可以创建一个方面来拦截该方法并将响应包装在一个新对象中 - 在包装器中添加资源的 URI（您可以通过拦截器的反射获取 URIInfo）。我在构建 etag 支持时已经这样做了，所以我不必为每个响应添加缓存代码。我想你也可以在同一方面添加一些东西来处理子 URI 问题......

您可能还想看看这些讨论：

*   [http://java.net/projects/jersey/lists/users/archive/2009-01/message/357](http://java.net/projects/jersey/lists/users/archive/2009-01/message/357)
*   [http://markmail.org/search/?q=list%3Anet.java.dev.jersey.users+brett.dargan%40gmail.com#query:list%3Anet.java.dev.jersey.users%20brett.dargan %40gmail.com+page:1+mid:7ln7wixfihfodngg+state:results](http://markmail.org/search/?q=list%3Anet.java.dev.jersey.users+brett.dargan%40gmail.com#query:list%3Anet.java.dev.jersey.users%20brett.dargan%40gmail.com+page:1+mid:7ln7wixfihfodngg+state:results)

**2）**为了构建“更轻”的响应实体，我通常有一个`BeanLite.class`只包含摘要所需的属性，然后`Bean.class`用更多细节对其进行扩展。您可以将两者都添加到您的 ORM 中，并提供一个选项以在您的 DAO 中切换表示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T13:55:57.547

感谢您的所有回复。通过你们提出的所有方法，经过我自己的一些研究，这就是我决定的：

1）我将 uri 添加为对象模型的一部分。这似乎是我目前最干净的解决方案。无论何时创建对象（使用对象的其他属性），都可以自动填充 URI。早些时候我认为这是一个坏主意，但我无法预见这种方法的任何问题，除了必须与对象一起移动的额外字段。

2）为了支持完整/部分视图，我正在尝试使用[`@JsonView`](http://wiki.fasterxml.com/JacksonJsonViews)注释。这似乎是一个很好的方法。

让我知道这种处理方式是否还有其他潜在问题。

# asp.net - 我可以使用 ASP.Net 2.0 多长时间？

> ID：12322492
> 
> 赞同：2
> 
> 时间：2012-09-07T17:07:34.217
> 
> 标签：asp.net, sql-server

2005 年，我为企业客户编写了一个简单的 ASP.NET 2.0 网站，并将其托管在数据中心内租用的企业级服务器上。

它根本没有做任何花哨的事情。它连接到 SQL Server 2005 并使用一个将数据添加到同一数据库的 Web 服务。

它已经运行了 7 年，没有一次停机，我希望保持这种状态。

现在数据中心正在讨论将服务器升级到 ASP.NET 4.5。

这可能会破坏任何基本的东西，比如 CRUD 交易吗？

我可以安全地使用 Net 2.0 多长时间？再过几年？

我不需要任何新功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T17:22:31.750

[.NET 2.0 的主流支持](http://support.microsoft.com/lifecycle/search/?sort=pn&alpha=.net%20framework)于 2011 年结束，扩展支持于 2016 年结束。SQL Server 2005 的时间框架相同，于 2016 年结束。

如果您的托管服务提供商正在迁移到 .NET 4.5，那么您可以选择继续使用该提供商或升级您的应用程序。

如果您的应用程序中没有任何特别之处，您是否尝试将应用程序代码升级到 .NET 4.5？如果您没有使用过任何已贬值的东西（我不知道 .NET 是否像 SQL Server 那样做），那么 4.5 对您来说应该是一个平滑的升级。国际海事组织。

# asp.net-mvc - MVC 编辑实体 - 安全隐患

> ID：12322493
> 
> 赞同：1
> 
> 时间：2012-09-07T17:07:39.687
> 
> 标签：asp.net-mvc, security

可能是一个新手问题，但无论如何我都会问它。我是一名网络表单开发人员，但是我得到了一个 MVC 应用程序来照顾并发现我认为可能是一个安全漏洞，只是想在我向雇主举报之前检查我的想法是否正确。

基本上我们有一个编辑对象的视图（称之为汽车）所以对象包含品牌、型号、制造年份、颜色、注册编号

该视图显示上述所有内容，但仅允许编辑颜色。

问题是其他属性被写入隐藏字段中的 HTML，然后被回发并用于填充被推送到数据库的汽车对象。

我看到了这个想法，如果我改变这些隐藏的字段会发生什么，果然，我现在有一辆生产日期为 10 年后的汽车......

最初的开发人员说这就是 MVC 的工作方式……我是新手（实际上有 2 小时的 MVC 经验），所以目前无法对此提出异议。

有人有什么想法吗？任何人都可以建议应该如何做到这一点 - 我还告诉我这样做的方式（即从数据库中提取汽车并只更新视图可以实际操作的字段）也是错误的......

我很感激建议！

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:15:50.857

无论如何，这不是“MVC”所固有的。它更符合 Web 的无状态特性和所有 RESTful 类型的东西，但这种特殊情况并不合理。听起来如果您只想要一组有限的可更新字段，您应该只有某种形式的对象标识符（如 RDBMS 中的主键）和要更新的字段（或者控制器应该丢弃其余部分） . 您当然*不*应该允许任意访问为了追求不携带状态而应该限制的字段。

# android - Child的OnClickListener防止Android ViewPager的滑动

> ID：12322497
> 
> 赞同：12
> 
> 时间：2012-09-07T17:08:03.430
> 
> 标签：android, android-viewpager, onclicklistener

我正在使用带有动态视图的 ViewPager，如此[链接](http://android.catalinstefan.com/viewpager-with-dynamic-views-2/)所示。我正在将每个页面添加到 viewpager。创建每个页面并将其添加到寻呼机适配器的代码如下

```
public View createPage( )
{   
TableLayout table = new TableLayout(mycontext);
TableRow row = new TableRow(mycontext);

for(int i=0; i <= num_of_views; i++)
{

        TableLayout catTable = new TableLayout(mycontext);

        TableLayout.LayoutParams params = new TableLayout.LayoutParams();   

        params.height = LayoutParams.MATCH_PARENT;

        TableRow catName = new TableRow(mycontext);
        catName.setGravity(0x03);
        catName.setLayoutParams(params);

        TextView cat = new TextView(mycontext);
        TableRow.LayoutParams RowParams= 
            new TableRow.LayoutParams(pixeltoDp(0),pixeltoDp(85));
        RowParams.weight = 1;
        cat.setLayoutParams(RowParams);
        cat.setPadding(35, 0, 5, 0);
        cat.setGravity(0x13);
        cat.setSingleLine(true);
        cat.setHorizontallyScrolling(true);
        cat.setFocusable(true);
        cat.setFocusableInTouchMode(true);
        cat.setLines(1);
        cat.setText(data.getCats().get(i).getName());
        cat.setTextColor(color);
        cat.setSelected(true);

        catName.addView(cat);
        catTable.addView(catName);
        for(int j=0; j < 5; j++)
        {
            TableRow trChild = new TableRow(mycontext);
            trChild.setLayoutParams(params);
            trChild.setGravity(0x11);
            for (int k=0; k<4; k++)
            {
                TextView app = new TextView(mycontext);
                TableRow.LayoutParams tableRowParams= 
                    new     TableRow.LayoutParams(pixeltoDp(0),pixeltoDp(80));
                margin = pixeltoDp(11);

                tableRowParams.weight = 1;
                app.setLayoutParams(tableRowParams);

                app.setGravity(0x11);
                app.setSingleLine(true);
                app.setTextSize(pixeltoDp(12));
                app.setTextColor(Color.BLACK);
                app.setTypeface(verdana);

                int pos = j+(k*5);
                if((pos < mysize))
                {
                        Drawable icon = getMyDrawable();

                        app.setCompoundDrawablesWithIntrinsicBounds(null, icon, null, null);
                        app.setText("some Name");
                        app.setTag(i+":"+pos);
                        app.setEllipsize(TextUtils.TruncateAt.END);
                        app.setOnClickListener(onMyClick);

                }

                trChild.addView(app);
            }
            catTable.addView(trChild);              
        }   
        TableRow.LayoutParams tableRowParams=
              new TableRow.LayoutParams
                  (TableRow.LayoutParams.MATCH_PARENT,TableRow.LayoutParams.WRAP_CONTENT);
        margin = pixeltoDp(5);
        tableRowParams.setMargins(margin,0,margin, pixeltoDp(18));
        catTable.setLayoutParams(tableRowParams);       
}           
row.setGravity(0x03);
table.addView(row);     
return table;           
} 
```

页面中textview的OnClickListener如下

```
 private View.OnClickListener onAppClick=new View.OnClickListener() {
    public void onClick(View v) {
        // TODO Auto-generated method stub
        String gettext = (String)v.getTag();
        String[] splittext = gettext.split(":");

        Log.d("TAG","Click Event is Triggered");
    }
}; 
```

我面临的问题是，当我在屏幕上滑动时，viewpager 会滑动，但是如果我的手指从带有 onclicklistener 的文本开始滑动，则页面不会滑动，也不会调用 click 事件。如果我单击文本视图，则会调用单击事件。如果从带有单击事件的文本视图开始滑动，我无法弄清楚为什么 viewpager 不翻转页面。

为了找出错误的原因，我在 viewpager 中添加了一个 ontouchlistener，发现当在没有文本视图的页面部分发生滑动时调用 viewpager 的触摸事件，并且触摸事件没有被调用如果滑动从文本视图的顶部开始。如果我删除了 textview 的 onclicklistener，那么整个 viewpager 会正确翻转而不会出现任何问题。所以问题是textview的点击事件正在停止viewpager的触摸事件。如果我在创建页面代码中做错了什么，请告诉我。我在此函数中创建的视图通过 pageadapter 添加到 viewpager，如我在开头提到的教程中所示。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-10T10:01:41.910

最后我发现在最新版本的 ViewPager 中存在一个错误，如果手指从顶部开始移动，则带有 click 事件、singleLine 设置为 true 且重力设置为 center 的 TextView 不会将触摸事件传递给 ViewPager文本视图。如果我们将 singleLine 设置为 false 或删除中心重心，则事件将传递给 ViewPager，然后它就可以抛出。我们不能将中心重心和 setsingleline(true) 用于 textview 或将 sinlgeline 设置为 true 的按钮。我已将其报告为[此处的错误](http://code.google.com/p/android/issues/detail?id=37256&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)

请参阅此处的“应用单行”源：[https ://github.com/android/platform_frameworks_base/blob/7bfb1e7f46d2ed3df6cc467bccec95b5999d9cc4/core/java/android/widget/TextView.java#L7877](https://github.com/android/platform_frameworks_base/blob/7bfb1e7f46d2ed3df6cc467bccec95b5999d9cc4/core/java/android/widget/TextView.java#L7877)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-16T14:59:27.653

似乎有一些解决方案：您可以使用`setMaxLines(1)`代替，`setSingleLine()`它可以在不损害系统的情况下工作。但是，我可以确认您[之前的回答](https://stackoverflow.com/a/12349365/2135787)，您说这是一个[错误](https://code.google.com/p/android/issues/detail?id=37256&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)

# c# - 将字符串转换为日期时间

> ID：12322499
> 
> 赞同：2
> 
> 时间：2012-09-07T17:08:11.223
> 
> 标签：c#, asp.net, casting

我有 asp.net Calendar 来选择日期'selectedDate' 和时间 Piker 来选择时间'starttime' 我正在尝试添加 2 个字符串 1 startTime 对象 'startDateTime'

```
 string strDate = Calendar1.SelectedDate.ToShortDateString(); ;
        string startTime = txtb_endTimeManual.Text;
        DateTime startDateTime = Convert.ToDateTime(strDate + startTime); 
```

错误消息字符串未被识别为有效的日期时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T17:09:37.710

您需要在两个字符串之间添加一个空格。如果 strDate 是 '1/15/2012' 并且 startTime 是 '6:30:00 PM' 那么连接这两个字符串会给你 '1/15/20126:30:00 PM' 所以格式全部关闭。

```
DateTime startDateTime = Convert.ToDateTime(strDate + " " + startTime); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T17:10:31.400

`Convert.ToDateTime()`如果没有看到输入，很难说您是否可以相信它们的格式正确，但除此之外，我会说您在方法调用中的日期和时间之间没有空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T17:16:05.317

Calendar 已经返回了一个 DateTime 对象，而不是转换为字符串、字符串 concat 和另一个转换。你可以设置时间。

```
string startTime = txtb_endTimeManual.Text;
DateTime startDateTime = Calendar1.SelectedDate.Add(TimeSpan.Parse(startTime)); 
```

# openssl - openssl 证书验证 - 构建和目标系统上的不同行为（在 ARM 上无法正常工作）

> ID：12322500
> 
> 赞同：0
> 
> 时间：2012-09-07T17:08:17.210
> 
> 标签：openssl, arm

这个故事的背景是我将 gSOAP 与 openssl 一起用于一些 SOAP/WSDL 应用程序开发。最终的应用程序必须针对嵌入式 ARM 设备进行交叉编译。

在我的构建系统（Fedora 17 x64）上一切正常，但是当我在目标设备（ARM/Montavista 5）上运行交叉编译版本时，出现以下错误：

> 错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败

我开始查看 OpenSSL 以查看是否可以缩小范围 - 我的构建系统与我的嵌入式系统肯定存在不同的行为，导致验证失败。

我在两者上都运行了以下命令（IP 地址是 google.com）：

> openssl s_client -showcerts -connect 173.194.67.104:443 -verify 9

下面列出了不同机器上的输出。在这两种情况下，我都在运行 openssl 1.0.1c。特别是目标（ARM）系统似乎接收/解释不同的证书链。

我不知道为什么输出不同。有人可以解释一下我如何能够让我的目标设备以与构建机器相同的方式正确验证证书吗？

## 构建（Fedora）机器的输出：

> ```
> 验证深度为 9
> 已连接（00000003）
> depth=2 C = US, O = "VeriSign, Inc.", OU = Class 3 Public Primary Certification Authority
> 验证返回：1
> depth=1 C = ZA, O = Thawte Consulting (Pty) Ltd., CN = Thawte SGC CA
> 验证返回：1
> depth=0 C = 美国，ST = 加利福尼亚，L = 山景城，O = Google Inc，CN = www.google.com
> 验证返回：1
> ---
> 证书链
>  0 秒：/C=US/ST=加利福尼亚/L=山景/O=Google Inc/CN=www.google.com
>    i:/C=ZA/O=Thawte Consulting (Pty) Ltd./CN=Thawte SGC CA
> -----开始证书-----
> [为简洁起见删除]
> -----结束证书-----
>  1 s:/C=ZA/O=Thawte Consulting (Pty) Ltd./CN=Thawte SGC CA
>    i:/C=US/O=VeriSign, Inc./OU=Class 3 Public Primary Certification Authority
> -----开始证书-----
> [为简洁起见删除]
> -----结束证书-----
> ---
> 服务器证书
> 主题=/C=US/ST=加利福尼亚/L=山景/O=Google Inc/CN=www.google.com
> 发行人=/C=ZA/O=Thawte Consulting (Pty) Ltd./CN=Thawte SGC CA
> ---
> 未发送客户端证书 CA 名称
> ---
> SSL 握手已读取 1907 个字节并写入 299 个字节
> ---
> 新的，TLSv1/SSLv3，密码是 RC4-SHA
> 服务器公钥为 1024 位
> 支持安全重新协商
> 压缩：无
> 扩展：无
> SSL-会话：
>     协议：TLSv1
>     密码：RC4-SHA
>     会话 ID：C05953342AC01E9AB63CF0BABBE942B4E29061AA4904C3F1393EBBB1548B0254
>     会话 ID-ctx：
>     万能钥匙：38B97C0CC2795AD1D3EEACAE244E33F1E5A0988AE9182AC85DFFF5B6BFAE6585E6BCF763E1E0EB300CD38B87CC0F2501
>     键-Arg：无
>     Krb5 主体：无
>     PSK 身份：无
>     PSK 身份提示：无
>     TLS 会话票证生命周期提示：100800（秒）
>     TLS 会话票证：
> [为简洁起见删除]
>     开始时间：1347036912
>     超时：300（秒）
>     验证返回码：0（ok）
> 
> ```

## 目标（ARM）机器的输出

> ```
> 验证深度为 9
> 已连接（00000003）
> depth=1 C = ZA, O = Thawte Consulting (Pty) Ltd., CN = Thawte SGC CA
> 验证错误：num=20：无法获取本地颁发者证书
> 验证返回：1
> depth=1 C = ZA, O = Thawte Consulting (Pty) Ltd., CN = Thawte SGC CA
> 验证错误：num=27：证书不受信任
> 验证返回：1
> depth=0 C = 美国，ST = 加利福尼亚，L = 山景城，O = Google Inc，CN = www.google.com
> 验证返回：1
> ---
> 证书链
>  0 秒：/C=US/ST=加利福尼亚/L=山景/O=Google Inc/CN=www.google.com
>    i:/C=ZA/O=Thawte Consulting (Pty) Ltd./CN=Thawte SGC CA
> -----开始证书-----
> [为简洁起见删除]
> -----结束证书-----
>  1 s:/C=ZA/O=Thawte Consulting (Pty) Ltd./CN=Thawte SGC CA
>    i:/C=US/O=VeriSign, Inc./OU=Class 3 Public Primary Certification Authority
> -----开始证书-----
> [为简洁起见删除]
> -----结束证书-----
> ---
> 服务器证书
> 主题=/C=US/ST=加利福尼亚/L=山景/O=Google Inc/CN=www.google.com
> 发行人=/C=ZA/O=Thawte Consulting (Pty) Ltd./CN=Thawte SGC CA
> ---
> 未发送客户端证书 CA 名称
> ---
> SSL 握手已读取 2130 字节并写入 443 字节
> ---
> 新的，TLSv1/SSLv3，密码是 ECDHE-RSA-RC4-SHA
> 服务器公钥为 1024 位
> 支持安全重新协商
> 压缩：无
> 扩展：无
> SSL-会话：
>     协议：TLSv1.2
>     密码：ECDHE-RSA-RC4-SHA
>     会话 ID：AA9E7D7AD223F18241A210D224B8BEF4A441572C1A9719BF3504FB03297D85DE
>     会话 ID-ctx：
>     万能钥匙：7A15F2071D50C076C0524AAD45857C5683212370582AD7D9F882B64104F0A0A8C2948B8B85C1EC19015C
> 51CAC30D4A05
>     键-Arg：无
>     PSK 身份：无
>     PSK 身份提示：无
>     SRP 用户名：无
>     TLS 会话票证生命周期提示：100800（秒）
>     TLS 会话票证：
> [为简洁起见删除]
> 
>     开始时间：1347036508
>     超时：300（秒）
>     验证返回码：27（证书不受信任）
> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T02:32:52.720

错误消息非常清楚：`openssl`无法使用 ARM 框上的 CA 存储验证签署服务器证书的 CA 是否受信任。
要验证您是否可以从`curl`的站点下载受信任的 CA 包：http: [//curl.haxx.se/ca/cacert.pem](http://curl.haxx.se/ca/cacert.pem)然后使用`-CAfile`参数来使用它：`openssl s_client -showcerts -connect 173.194.67.104:443 -verify 9 -CAfile <full_path_to_cacert.pem>`

要以编程方式执行此操作，请参阅[SSL_CTX_load_verify_locations](http://www.openssl.org/docs/ssl/SSL_CTX_load_verify_locations.html)函数。另请参阅命令行工具
的源代码以获取更多详细信息： [http](http://cvs.openssl.org/fileview?f=openssl/apps/s_client.c&v=1.169) : //cvs.openssl.org/fileview?f=openssl/apps/s_client.c&v=1.169（搜索 CAfile 和 SSL_CTX_load_verify_locations）。`openssl`

# php - Soundcloud php curl程序

> ID：12322507
> 
> 赞同：1
> 
> 时间：2012-09-07T17:08:42.577
> 
> 标签：php, javascript, ajax, curl, soundcloud

我有一些 php 和 javascript 经验，刚开始学习 curl。一直在搞乱远程登录到 soundcloud。最终，我希望能够关注或取消关注我的程序。我一直在查看 soundcloud 源代码，但似乎无法弄清楚它是如何处理跟随按钮点击的。onclick 只是设置为返回 false。

1.  谁能指导我他们如何处理？我在想 Ajax，但脚本似乎有所不同。这是json吗？
2.  为了有效地创建这个程序，我需要知道另一种特定的语言吗？

让我知道我可以提供哪些源代码，因为整个页面似乎太多无法发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:29:07.803

他们似乎有一个您可以访问的[开发人员 API](http://developers.soundcloud.com/docs)，支持[关注和喜欢用户](http://developers.soundcloud.com/docs#follow)，因此执行您想要的最佳方法是使用他们的 API 登录和执行操作。

如果他们没有 API，您可以在单击关注时嗅出浏览器发出的请求，并查看浏览器发出的 HTTP 请求并使用 cURL 模拟这些请求以获得相同的结果。但是因为他们有一个 API 是最可靠的方法。

跟随用户使用 PHP API 代码很简单：

```
<?php
require_once 'Services/Soundcloud.php';

// create a client object with access token
$client = new Services_Soundcloud('YOUR_CLIENT_ID', 'YOUR_CLIENT_SECRET');
$client->setAccessToken('YOUR_ACCESS_TOKEN');

// Follow user with ID 3207
$client->put('/me/followings/3207');

// check the status of the relationship
try {
    $client->get('/me/followings/3207');
} catch (Services_Soundcloud_Invalid_Http_Response_Code_Exception $e) {
    if ($e->getHttpCode() == '404')
        print "You are not following user 3207\n";
} 
```

# css - 具有四个以上角的 div

> ID：12322508
> 
> 赞同：0
> 
> 时间：2012-09-07T17:08:53.950
> 
> 标签：css, html

是否可以制作具有五个或六个角的 div？

我需要这个来在地图上制作可点击区域。如果有其他方法可以实现这一点，我会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:10:54.007

不，你不能。[HTML 中的块是矩形的](http://dev.w3.org/csswg/css3-box/)。

即使您使用（昂贵的）[基于 css 的技巧](http://css-tricks.com/examples/ShapesOfCSS/)来改变它的外观，可点击区域仍将保持矩形。

但是可点击区域有几种解决方案：

*   使用javascript从点击事件坐标进行简单计算
*   旧的[图像映射格式](http://en.wikipedia.org/wiki/Image_map)

如果您想在没有图像映射的 javascript 中执行此操作，您可能会对现成的[算法感兴趣，以确定一个点是否在一个多边形内](http://jsfromhell.com/math/is-point-in-poly)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T17:16:04.190

如果地图是图像，请使用多边形图像地图。有几个网络应用程序可以很容易地创建这些（只是谷歌“[图像地图生成器](https://www.google.com/webhp?sourceid=chrome-instant&ie=UTF-8&ion=1#hl=en&sugexp=les;cpsugrpq1&gs_nf=1&tok=mk6h8MHU4AmcE6mUeWuPpg&cp=9&gs_id=5&xhr=t&q=imagemap%20generator&pf=p&sclient=psy-ab&oq=imagemap%20&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=f8988a7f1ebacbd3&ion=1&biw=1145&bih=682)”）。

如果您使用的是 Google 之类的地图 API，他们将提供有关在地图中创建可点击目标的文档（例如：[Google Maps Docs](https://developers.google.com/maps/documentation/javascript/overlays)）。

# python - python对象的可搜索类数据库结构？

> ID：12322509
> 
> 赞同：3
> 
> 时间：2012-09-07T17:08:57.610
> 
> 标签：python, database

我正在寻找一种类似数据库的结构，它可以保存 python 对象，每个对象都有可以搜索的各种字段。一些搜索会产生 ZODB，但我不确定这就是我想要的。

为了解释，我有可以以给定文件格式从磁盘写入/读取的对象。我想要一种组织和搜索这些对象的多组的方法。目前，我将它们存储在嵌套字典中，这些字典是根据文件系统的结构和文件名填充的。

我想要一个更像数据库的方法，但我认为我不需要数据库。我希望能够将结构保存到磁盘，但不想连接服务器或类似的东西。也许我只是想使用 numpy 的结构化数组？[http://docs.scipy.org/doc/numpy/user/basics.rec.html](http://docs.scipy.org/doc/numpy/user/basics.rec.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T17:11:12.903

Python 自带数据库... [http://docs.python.org/library/sqlite3.html](http://docs.python.org/library/sqlite3.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T17:18:34.987

如果您只是想将数据保存到磁盘，我认为您正在寻找的是 python [shelve 。](http://docs.python.org/library/shelve.html)它也几乎 100% 兼容 dict 接口，因此您只需更改很少的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T22:31:14.360

ZODB 将满足您的需求。您可以在那里完全按照您已有的方式构建数据。您必须切换到持久映射，而不是使用内置字典，如果它们往往很大，您可能应该从一开始就从 btrees 开始。[这里](http://www.zodb.org/documentation/articles/index.html "ZODB 文档概述")通过简单的示例和教程进一步阅读是一个很好的起点。正如您将看到的，ZODB 不提供一些类似 SQL 的访问语言。但是，由于您似乎已经将数据结构化以适合某些字典，因此您可能无论如何都不会错过。与普通搁置相比，ZODB 还提供在将数据写入磁盘之前动态压缩数据。总的来说，它提供了比搁置更多的选择，并且与此相比现在显示出明显的缺点，所以我可以热烈推荐它。一年前我改用它，因为典型的关系数据库与 ORM 一起执行非常慢，尤其是对于插入或更新操作。使用 ZODB，我的速度提高了大约一个数量级，因为应用程序和数据库之间没有通信开销，

# jquery - 用于选择文件的文件输入类型，然后将数据移动到具有适当文件输入标签的表单

> ID：12322514
> 
> 赞同：1
> 
> 时间：2012-09-07T17:09:31.417
> 
> 标签：jquery, forms, post, input

我有一个 iframe，它有一个输入标签，可让您浏览要上传的文件。

我当时正在做的是在我的隐藏表单数据中创建一个新的输入类型 =“文件”标签，该标签将填充文件的 src。

在所有内容的最后都有一个按钮，用户可以使用它来提交实际表单。

提交的表单会有文件，但它是空的。我在想可能有一些我不知道的潜在事件正在发生。在阅读它时，我还注意到如果源错误，它只会发送一个空文件。

这是如何正确完成的？

*更新：查看数据时，dom 元素 input:file 有一个名为 files 的属性，这是我想要移动到新项目的属性。我的小提琴是：http:* [//jsfiddle.net/4vNXv/](http://jsfiddle.net/4vNXv/)

我似乎无法让新数据从旧输入转移到新输入。

*编辑：我在想 jQuery 可能能够通过复制整个对象来维护数据。通过**$(this).clone()**命令，但这也不起作用。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:59:35.347

编辑文件表单字段存在安全风险，因此在大多数浏览器上都被禁用。

请参阅[在 Javascript 中克隆文件输入元素](https://stackoverflow.com/questions/415483/clone-a-file-input-element-in-javascript)

在您的场景中，我相信您可以创建两个表单（一个在 iframe 中）并在按钮请求上提交。

请参阅[一键提交两份表格](https://stackoverflow.com/questions/7843355/submit-two-forms-with-one-button)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:41:04.293

这里提到的关键问题是标题，上面写着 MOVE。通过移动整个元素来移动数据不应该出现安全风险问题。这背后的原因是没有创建或修改任何内容。输入保持不变，但它只是从一个区域移动到另一个区域。

要完成此解决方法，您应该执行以下操作：

```
1\.  clone the object.  This will leave a placeholder there, so it doesnt look like anything moved.
2\.  use appendTo to append it to the new form. 
```

我使用过的示例如下：

```
$item = $(this);
$clone = $(this).clone();
$item.after($clone).appendTo("#newForm"); 
```

这种变通方法创建了新对象，但因为它不是被移动或更改的东西，所以您不必担心内容会因安全风险而被打乱。原件被选中并从其当前位置移动到#newForm 中的新位置。

源信息： [将一个表单的文件输入域的值复制到另一个表单的输入域](https://stackoverflow.com/questions/8898077/copying-the-value-of-a-forms-file-input-field-to-another-forms-input-field)

# java - 无法使用 mouseEvents 在 Java 中删除形状

> ID：12322517
> 
> 赞同：1
> 
> 时间：2012-09-07T17:09:42.377
> 
> 标签：java, object, methods, mouseevent, shape

我正在尝试在 Eclipse 中制作一个原始游戏，并且在编写将删除 GObjects 并使用 mouseClicked 方法更改其他人的属性的代码时遇到了一些麻烦。

问题似乎是在 mousePressed 方法中未识别私有即时变量。

有人可以告诉我我在这里做错了什么吗？我花了一整天的时间在这上面，我们将不胜感激。

亲切的问候，

梅胡尔

```
*/*
 * File: Linesv1.java
 * 07/08/2012
 * 
 */
import acm.graphics.*;
import acm.program.*;
import acm.util.*;
import java.applet.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.event.MenuEvent;
public class Linesv1 extends GraphicsProgram {

    /** Width and height of application window in pixels */
    public static final int BACKGROUND_WIDTH = 400;
    public static final int BACKGROUND_HEIGHT = 600;
    /** Dimensions of game board (usually the same) */
    private static final int WIDTH = BACKGROUND_WIDTH;
    private static final int HEIGHT = BACKGROUND_HEIGHT;

    /** Dimensions of triangle*/
    private static final int LENGTH_OF_TRIANGLE_SIDE = 100;

    /** Dimensions of arc height*/
    private static final int ARC_HEIGHT = 100;

    /** Dimensions of radius of switches*/
    private static final int SWITCH_RADII = 5;

    // private instant variables

    private GObject switchA;

    private GOval switchB;

    private GObject triangle;

    private GObject bottomArc;

public void run() {
        addMouseListeners();
        setUpGame();
        }

public void setUpGame(){

    //add central triangle
    GPolygon triangle = new GPolygon (WIDTH/2,HEIGHT/2);
    triangle.addVertex(0,-LENGTH_OF_TRIANGLE_SIDE*2/3);
    triangle.addVertex(LENGTH_OF_TRIANGLE_SIDE/2,+LENGTH_OF_TRIANGLE_SIDE*1/3);
    triangle.addVertex(-LENGTH_OF_TRIANGLE_SIDE/2,+LENGTH_OF_TRIANGLE_SIDE*1/3);
    triangle.setFilled(true);
    triangle.setFillColor(Color.green);
    add(triangle);

    //add topArc
    GArc bottomArc = new  GArc (WIDTH/2-LENGTH_OF_TRIANGLE_SIDE/2, HEIGHT/2+LENGTH_OF_TRIANGLE_SIDE*1/3-ARC_HEIGHT/2, ARC_HEIGHT,ARC_HEIGHT,0,-180);
    bottomArc.setFilled(true);
    bottomArc.setFillColor(Color.green);
    add(bottomArc);

    //add switches to the bottom of the triangle
    GOval switchA = new GOval (WIDTH/2-LENGTH_OF_TRIANGLE_SIDE/2-SWITCH_RADII, HEIGHT/2+LENGTH_OF_TRIANGLE_SIDE*1/3-SWITCH_RADII,SWITCH_RADII*2,SWITCH_RADII*2);
    switchA.setFilled(true);
    switchA.setFillColor(Color.black);
    add(switchA);

    //add switches to the bottom of the triangle
    GOval switchB = new GOval (WIDTH/2+LENGTH_OF_TRIANGLE_SIDE/2-SWITCH_RADII, HEIGHT/2+LENGTH_OF_TRIANGLE_SIDE*1/3-SWITCH_RADII,SWITCH_RADII*2,SWITCH_RADII*2);
    switchB.setFilled(true);
    switchB.setFillColor(Color.black);
    add(switchB);
    }
public void mousePressed(MouseEvent e) {
    findObject(e.getX(),e.getY());
    GObject check = findObject(e.getX(),e.getY());
    if (check!=null){
        remove(triangle);
        switchA.setColor(Color.cyan);
    }
}
private GObject findObject(int a, int b){

    if(getElementAt(a,b) != null) {
        return getElementAt(a,b);
    } else {
        return null;
    }
}
}* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:49:36.767

您尝试删除的三角形不是您添加的三角形。您在 setupGame() 中创建了一个名为 triangle 的本地 GPolygon 并添加了它，而不是私有成员。

```
 private GObject triangle; // this is uninitialized

 public void setUpGame(){

   GPolygon triangle = new GPolygon (WIDTH/2,HEIGHT/2);  // this is hiding your member variable

   // THIS IS LOCAL COPY, NOT MEMBER VARIABLE
   add(triangle); 
```

然后稍后您尝试删除未初始化的成员变量，因此没有任何反应。您可能不想要三角形的单独本地副本。你可能想要

```
 public void setUpGame() {
    triangle = new GPolygon (WIDTH/2, HEIGHT/2);
    // ...
    add(triangle); // Now, you are adding the member
  } 
```

# android - 从 TimePicker android 获取数据

> ID：12322519
> 
> 赞同：1
> 
> 时间：2012-09-07T17:09:46.353
> 
> 标签：android, mobile

我正在尝试制作一个非常简单的应用程序。我只需要从 TimePicker 元素中获取时间，然后根据值为 1-8 的 Spinner 添加 30 分钟增量。也就是说，如果用户选择值'3'和时间'8:30am'程序应该做

```
 (30min) * 3 = 90min 
```

然后

```
 (8:30am) + 90min = 10:00am 
```

有谁知道如何从 Spinner 获取输入（值 1-8），进行简单计算，然后将其添加到来自 TimePicker 的数据输入中？

对此主题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:47:09.817

这里有几件事： 1\. 设置一个侦听器以获取从选择器中选择的值，然后获取时间选择器的值：

```
public class MainActivity extends Activity{
    Integer[] numbers = new Integer[]{0,1,2,3,4,5,6,7,8};

        final TimePicker tp = (TimePicker)findViewById(R.id.timePicker1);
        tp.setIs24HourView(true);
        Spinner s1 = (Spinner) findViewById(R.id.spinner1);
        ArrayAdapter<Integer> adapter = new ArrayAdapter<Integer>(this, 
                android.R.layout.simple_list_item_single_choice, numbers);

s1.setAdapter(adapter);
        s1.setOnItemSelectedListener(new OnItemSelectedListener(){   
            public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3)

            {
                int index = arg0.getSelectedItemPosition();
                switch(index)
                {
                case 0: 
                    int min = tp.getCurrentMinute();
                    int hour = tp.getCurrentHour();
                    //Do your calculations here etc

                }
            }

            public void onNothingSelected(AdapterView<?> arg0) {

            }
        }); 
```

}

1.  这可能对你也有帮助，如何为时间选择器设置监听器，（如果有人可以帮助我并编辑它，不能让它正确格式化）：

    ```
    final TimePicker tp = (TimePicker)findViewById(R.id.timePicker1);
            TimePicker.OnTimeChangedListener listen = new  

            TimePicker.OnTimeChangedListener() {

        public void onTimeChanged(TimePicker view, int hourOfDay, int minute) {
            // TODO Auto-generated method stub
            //do some calculations with hourOfDay and minute

        }
    }; 
    ```

    tp.setOnTimeChangedListener(听);

# xml - 解析存储在 varchar 中的所有匹配值的 XML 数据，并给出这些值的总和

> ID：12322523
> 
> 赞同：1
> 
> 时间：2012-09-07T17:10:04.730
> 
> 标签：xml, sql-server-2008

我有一个 SQL Server 2008 数据库，它将一些 XML 数据存储在表的 varchar 字段中。这用于表示 asp.net 页面中的一次旅行，因此我需要一种方法来获取该数据并将所有成本值相加以获得该值的总成本。

XML 字符串是许多其他字符串之一。可以有多个匹配的字符串。它说以下，

------------更新的 XML 模式添加了编辑--------

```
<trip>
   <toolboxitemadded id="8ce489fa-acb7-40e9-8440-cad46e16ca65" class="ToolBoxItemAdded" version="1">
    <control id="Location" type="text" value="Mattison, LLC-David Taylor" tag="INPUT" />
    <control id="Description" value="Mattison, LLC&#xA;PO Box 7137&#xA;Statesville, NC 28687, United States&#xA;Tel:704-838-1991 Ext 209&#xA;E-Mail:david@mattison-consulting.com" tag="TEXTAREA" />
       <control id="Visibility_Customer" type="checkbox" value="true" tag="INPUT" />
       <control id="Visibility_Bidder" type="checkbox" value="true" tag="INPUT" />
       <control id="Visibility_Status" type="checkbox" value="true" tag="INPUT" />
       <control id="Reserved_expires" type="text" value="7/22/2012 17:47" tag="INPUT" />
       <control id="Reserved_contacts" type="hidden" value="2366" tag="INPUT" />
   </toolboxitemadded>
   <toolboxitemadded id="8a19f19b-79a8-4d1a-a12c-a4378160116e" class="ToolBoxItemAdded" version="1">
       <control id="TypeOfItem" value="Pallet" tag="SELECT" />
       <control id="NumberOfItems" type="text" value="4" tag="INPUT" />
       <control id="Description" value="Some cool stuff" tag="TEXTAREA" />
       <control id="BreaksDown" type="checkbox" value="false" tag="INPUT" />
       <control id="Length" type="text" value="48" tag="INPUT" />
       <control id="Width" type="text" value="48" tag="INPUT" />
       <control id="Height" type="text" value="48" tag="INPUT" />
       <control id="Weight" type="text" value="2000" tag="INPUT" />
       <control id="MeasurementType" value="Standard" tag="SELECT" />
       <control id="Hazmat" type="checkbox" value="false" tag="INPUT" />
       <control id="UNCode" type="text" value="" tag="INPUT" />
       <control id="ClassCode" type="text" value="" tag="INPUT" />
       <control id="Visibility_Customer" type="checkbox" value="true" tag="INPUT" />
       <control id="Visibility_Bidder" type="checkbox" value="true" tag="INPUT" />
       <control id="Visibility_Status" type="checkbox" value="false" tag="INPUT" />
  </toolboxitemadded>
  <toolboxitemadded id="ae33c118-2981-4a3e-b001-c6dc56d0e7f1" class="ToolBoxItemAdded" version="1">
    <control id="AirportName" type="text" value="KCLT" tag="INPUT" />
    <control id="ICAO" type="text" value="KCLT" tag="INPUT" />
    <control id="IATA" type="text" value="CLT" tag="INPUT" />
    <control id="Address" value="Charlotte" tag="TEXTAREA" />
    <control id="Description" value="" tag="TEXTAREA" />
    <control id="Visibility_Customer" type="checkbox" value="true" tag="INPUT" />
    <control id="Visibility_Bidder" type="checkbox" value="true" tag="INPUT" />
    <control id="Visibility_Status" type="checkbox" value="true" tag="INPUT" />
    <control id="Reserved_expires" type="text" value="7/22/2012 17:48" tag="INPUT" />
    <control id="Reserved_cost" type="text" value="15000" tag="INPUT" />
    <control id="Reserved_markup" type="text" value="" tag="INPUT" />
  </toolboxitemadded>
  <toolboxitemadded id="4aea1ef1-e0fd-482c-9d64-217b7f891e61" class="ToolBoxItemAdded" version="1">
    <control id="Description" type="text" value="Falcon test 3" tag="INPUT" />
    <control id="TailNumber" type="text" value="MP123D" tag="INPUT" />
    <control id="FlightNumber" type="text" value="12334" tag="INPUT" />
    <control id="Carrier" type="text" value="[object Object]" tag="INPUT" />
    <control id="Model" type="text" value="Desault Falcon 20" tag="INPUT" />
    <control id="AircraftNotes" value="Some aircraft" tag="TEXTAREA" />
    <control id="Visibility_Customer" type="checkbox" value="false" tag="INPUT" />
    <control id="Visibility_Bidder" type="checkbox" value="false" tag="INPUT" />
    <control id="Visibility_Status" type="checkbox" value="true" tag="INPUT" />
    <control id="Reserved_cost" type="text" value="20000" tag="INPUT" />
    <control id="Reserved_markup" type="text" value="" tag="INPUT" />
  </toolboxitemadded>
  <toolboxitemadded id="ae33c118-2981-4a3e-b001-c6dc56d0e7f1" class="ToolBoxItemAdded" version="1">
    <control id="AirportName" type="text" value="ATL" tag="INPUT" />
    <control id="ICAO" type="text" value="KATL" tag="INPUT" />
    <control id="IATA" type="text" value="ATL" tag="INPUT" />
    <control id="Address" value="Atlanta" tag="TEXTAREA" />
    <control id="Description" value="" tag="TEXTAREA" />
    <control id="Visibility_Customer" type="checkbox" value="true" tag="INPUT" />
    <control id="Visibility_Bidder" type="checkbox" value="true" tag="INPUT" />
    <control id="Visibility_Status" type="checkbox" value="true" tag="INPUT" />
    <control id="Reserved_expires" type="text" value="7/22/2012 17:48" tag="INPUT" />
    <control id="Reserved_cost" type="text" value="22000" tag="INPUT" />
    <control id="Reserved_markup" type="text" value="" tag="INPUT" />
  </toolboxitemadded> 
```

------------更新的 XML 模式添加了编辑--------

这不是所有的代码，但应该有很多可以理解它是如何组合在一起的，

我需要从字段中解析这个 xml 字符串的每个实例，然后获取这些值并将它们一起添加，以便报告可以给出旅行的总价格，但我不知道如何做到这一点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:20:06.727

看起来像 XML，所以运气好的话，您可以将`varchar`列转换为 XML 并在 XQuery 表达式中求和，同时获取值。

```
declare @T table
(
  Cost nvarchar(max)
)

insert into @T values
('<control id="Reserved_cost" type="text" value="20000" tag="INPUT" /><control id="Reserved_cost" type="text" value="20000" tag="INPUT" />'),
('<control id="Reserved_cost" type="text" value="20000" tag="INPUT" />')

select cast(T.Cost as xml).value('sum(//control/@value)', 'int') as CostSum
from @T as T 
```

结果：

```
CostSum
-----------
40000
20000 
```

**更新：**

您可以在 XQuery 中的方括号之间添加谓词。
使用它仅对属性`id`具有值的节点求和`Reserved_cost`。

```
select cast(T.Cost as xml).value('sum(//control[@id="Reserved_cost"]/@value)', 'int') as CostSum
from @T as T 
```

# pyqt4 - pyqt4：为从单亲产生的 4 个子窗口设置焦点

> ID：12322529
> 
> 赞同：0
> 
> 时间：2012-09-07T17:10:29.363
> 
> 标签：pyqt4, setfocus

我在将焦点设置在主窗口的四个子窗口之一时遇到问题。我尝试将 setFocus 设置为四个之一，但主窗口仍然保持焦点。我有一个组合框，可让您选择四个窗口中的哪一个成为焦点。每个寡妇都在单独的监视器上。

```
from PyQt4 import QtGui, QtCore
import numpy as np
from ui_GuiMask import Ui_MainWindow

class MainWindow(QtGui.QMainWindow):
    def __init__(self, parent = None):
    QtGui.QMainWindow.__init__(self, parent)
    QtGui.QWidget.__init__(self, parent)
    self.ui = Ui_MainWindow()
    self.ui.setupUi(self)

QtCore.QObject.connect(self.ui.cb_projectorSelector, QtCore.SIGNAL("currentIndexChanged(int)"), self.setProjectorFocus)

self.maskProjector_1 = MaskWindow(screen = 0)
self.maskProjector_1.show()
self.maskProjector_2 = MaskWindow(screen = 0)
self.maskProjector_2.show()

def setProjectorFocus(self):

whichProj = self.ui.cb_projectorSelector.currentIndex()
if whichProj == 0:              
    self.maskProjector_1.setFocus(True)
    self.maskProjector_2.setFocus(False)

elif whichProj == 1:                
    self.maskProjector_1.setFocus(False)
    self.maskProjector_2.setFocus(True) 
```

焦点不应该激活其中一个窗口并将其移到前面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T02:15:22.770

文档[`setFocus()`](http://doc.qt.nokia.com/4.7-snapshot/qwidget.html#setFocus)（*重点添加*）：

> `void QWidget::setFocus ( Qt::FocusReason reason )`
> 
> **如果此小部件或其父级之一是活动窗口，**则将键盘输入焦点赋予此小部件（或其焦点代理）。

据我了解，`setFocus`不会激活顶级小部件（窗口）。它改变活动窗口内的焦点。

使用[`.activateWindow()`](http://doc.qt.nokia.com/4.7-snapshot/qwidget.html#activateWindow)，可能与[`.raise()`](http://doc.qt.nokia.com/4.7-snapshot/qwidget.html#raise)。

# javascript - 在 jquery 中分离和附加 div 作为对话框

> ID：12322533
> 
> 赞同：1
> 
> 时间：2012-09-07T17:10:39.637
> 
> 标签：javascript, jquery, html, dialog, jquery-ui-dialog

我有一个包含一些按钮/标签的 id 的 div。它本身就是一个容器。我想要一个按钮，当用户单击按钮时，对话框必须以相同的 div 出现，但 div 必须从页面中消失。因此，当单击“分离”按钮时，会出现一个带有该 div 的对话框，并且按钮会变为“附加”。单击附加时，对话框消失，页面上出现常规 div。

这是我到目前为止所尝试的，它仅在单击分离时起作用，如果单击附加，则对话框关闭但常规 div 不显示。

```
 $(document).on('click', '#detach', function() {
      var button = $(this).text();
          if (button == 'Detach') {
           $('.search_div_box').dialog({ autoOpen: false, width: 700 });
           $('.search_div_box').dialog('open');
              $(this).html('Attach');
          } else if (button == 'Attach') {
             $('.search_div_box').dialog('close');
             $(this).html('Detach');
          }

      }); 
```

我知道我在附加部分丢失了一个代码，它只会关闭对话框，但我尝试了各种方法，比如再次将 div 附加到正文等等，但没有奏效。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T17:29:35.633

您可以使用 jQuery 的[$.clone()](http://api.jquery.com/clone/)创建一个副本，`div`然后将其与对话框一起显示/隐藏，如下所示：

```
var $original = $('.search_div_box');
var $clone = $('.search_div_box').clone();
    $clone.dialog({
            autoOpen: false,
            width: 700,
        });

$(document).on('click', '#detach', function() {
    var button = $(this).text();

    if (button == 'Detach') {
        $original.hide();
        $clone.dialog('open');

        $(this).html('Attach');
    } else if (button == 'Attach') {
        $original.show();
        $clone.dialog('close');

        $(this).html('Detach');
    }
});​ 
```

[JSFiddle 这里](http://jsfiddle.net/m4U9G/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T17:23:45.420

尝试这个：

html:

```
<button id="button">Attach</button> 
```

javascript (jquery):

```
$("#button").click(function() {
    var button = $(this).html();
    if (button === "Attach") {
        $('.search_div_box').dialog('close');
        $(this).html('Detach');
    }
    else {
        $('.search_div_box').dialog({ autoOpen: false, width: 700 });
        $('.search_div_box').dialog('open');
        $(this).html('Attach');
    }
}); 
```

那应该工作:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T17:27:11.467

尝试这个：

HTML

```
<button class="content detach"></button> 
```

CSS

```
.content.detach:after {
   content: "Detach";
}
.content.attach:after {
   content: "Attach";
} 
```

JS

```
 $('.search_div_box').dialog({ autoOpen: false, width: 700 });
$(".content, .ui-dialog-titlebar-close").on("click", function(){
    if ($(".content").hasClass("detach")) {

        $('.search_div_box').dialog('open');
    } else {
        $('.search_div_box').dialog('close');
    }

    $(".content").toggleClass("detach attach");
}); 
```

演示：http: [//jsfiddle.net/n8Mbz/](http://jsfiddle.net/n8Mbz/)

# php - 在 PHP 中将字符串转换为 int

> ID：12322534
> 
> 赞同：4
> 
> 时间：2012-09-07T17:10:45.183
> 
> 标签：php, string, int

```
 $date = "1346706576967";  // miliseconds
    $newDate = (int) $date;
    echo $newDate; 
```

我得到“2147483647”作为 $newDate。

我只是想将变量从 String 1346706576967 转换为 int 1346706576967 - 这怎么可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T17:14:38.630

不幸的是，2147483647 是整数可以容纳的最大值。您可以在此处使用浮点数，因为浮点数可以准确地保存高达 10000000000000 的整数值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T17:15:05.223

因为这是 PHP 中整数可以具有的最大大小。您将需要一个专门用于处理较大整数（如 BCMath 或 GMP）的 PHP 库，或者只是将其转换为浮点数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T12:25:11.150

可能的转换，

```
$input => 1346706576967
(integer)$input => 2147483647
intval($input) => 2147483647
$input*1 => 1346706576967
settype($input, "integer") => 1346706576967 
```

[http://phpconvert.com/online/](http://phpconvert.com/online/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T17:32:09.483

您可以使用隐式转换来正确转换它：

```
$date = "1346706576967";  // miliseconds
$newDate = 0+$date; // float(1346706576967)
$newDate = (int) $date; // int(2147483647) 
```

# git - 版本控制建议

> ID：12322537
> 
> 赞同：2
> 
> 时间：2012-09-07T17:10:52.087
> 
> 标签：git, svn, version-control, mercurial

人们推荐使用哪些版本控制系统来管理大量主要是二进制文件？该集合包含数千个文件，总计约 8GB，并且会随着时间的推移而增长。

我们尝试了 GIT，发现执行这么多二进制比较有点慢。也许我们配置错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T19:06:50.587

版本控制往往被称为另一个名称......源代码控制或源代码控制。这个名字本身就暗示了它们是为什么而构建的：源代码 - 即相对较少数量的相对较小的文本文件。大多数系统可以（或至少*应该*）能够处理大型二进制文件的大型存储库，并取得不同程度的成功。

## 版本控制系统

大致有三种主要类型的版本控制工具，在存储版本控制方面，每种工具都有不同的权衡。但是，当您拥有大型二进制文件的大型存储库时，这些设计决策可能会成败。

1.  **像 CVS 和 Subversion 这样的编辑/合并/提交系统**并不能很好地解决这个问题。在这些类型的系统中，当您从服务器获取代码时，文件将在您的工作目录中创建并以读/写方式创建。此外，客户端将存储一些机制来确定您是否在本地更改了这些文件 - 这可能是文件内容的哈希值，因为它们存在于服务器上，或者它可能是未经编辑的“基线”文件的副本。当您想确定文件系统上发生了什么变化时，您的版本控制客户端会将您的工作目录与基线进行比较，以告诉您您编辑了哪些文件。

    这些类型的系统往往不能很好地扩展到具有多 GB 文件的多 GB 存储库。如果您对自己的使用模式非常小心，某些工具可能还可以 - 例如，您可以通过避免使用 UI 前端来限制这些工具的范围，而是显式提供您要签入的路径（而不是扫描整个工作目录。）

    此外，如果您选择使用整个基线文件的工具，您将需要双倍的磁盘空间 - 8GB 用于您的资源，另外 8GB 用于基线文件。

2.  **像 git 和 mercurial 这样的分布式版本控制系统**也不太可能是这里表现最好的。DVCS 工具的[历史模型](http://www.ericsink.com/entries/dvcs_dag_1.html)与集中式编辑/合并/提交系统完全不同，但大多数工具的相似之处在于，当您想要确定工作目录的状态时，它们会比较目录中的文件以查看发生了什么变化。

    在这里，您的磁盘空间需求也会增加。由于分布式系统在本地存储存储库的副本，因此存储库至少需要与工作文件夹一样多的空间 - 这是最好的情况，并假设您的系统支持“浅”历史，其中它*不会*存储文件的所有历史版本。

    一些 DVCS 工具具有[二进制或“大文件”模式或插件，](http://mercurial.selenic.com/wiki/BigfilesExtension)其中大文件放置在中央服务器而不是本地存储库中。这种混合方法肯定有其优点，尤其是当您并不*总是需要*那些大文件时。否则，您可能会遇到集中式版本控制系统的所有复杂性与 DVCS 的所有复杂性相结合的情况。

3.  **像 Team Foundation Server 和 Perforce 这样的签出/编辑/签入系统**可能是最合适的版本控制系统。在这些类型的系统中，当您从服务器获取代码时，文件将在您的工作目录中创建并设置为只读。这是因为您将在开始编辑这些文件时指示该工具，此时您的客户端会将它们设置为读写。然后，您的客户端（或服务器）会维护您所做更改的列表。完成编辑后，您可以将它们签入服务器。

    当您拥有非常大（多 GB）的存储库和/或非常大（多 GB）的文件时，这些类型的系统是有利的，因为您不必检查工作文件夹中的更改或差异文件。

    请注意，某些系统可能能够在任一模式下工作。例如，TFS 2012 默认使用编辑/合并/提交模型（称为*“本地工作空间”*），但可以明确使用检出/编辑/签入模型（称为*“服务器工作空间”*）。

（注意，我在这里借用了[Eric Sink 的术语](http://www.ericsink.com/scm/scm_checkins.html)，但考虑到他写了一本关于版本控制系统的书，我认为这些是适当的权威。）

## 数字资产管理

如果您的多 GB 文件的大型存储库碰巧不仅仅是随机数据，而是......图形或音频，那么您最好完全避免使用版本控制系统并瞄准专门为此设计的[数字资产管理](http://en.wikipedia.org/wiki/Digital_asset_management)工具目的。

其中一些工具（如 Quark Publishing System 和 K4）针对出版业，一些（如 Adob​​e VersionCue）针对图形设计和插图行业。其中一些工具（如 Alienbrain）甚至具有 Visual Studio 插件，以试图吸引从事繁重图形和音频工作以及编写代码的游戏开发工作室。

如果您碰巧从事游戏开发工作，那么在[游戏开发网站](https://gamedev.stackexchange.com/questions/480/version-control-for-game-development-issues-and-solutions)上有几个很好的回答这个问题。

# html - 如何将 html 表格转换为 Excel 文件？

> ID：12322539
> 
> 赞同：0
> 
> 时间：2012-09-07T17:10:55.403
> 
> 标签：html, ajax, vb.net, excel, export-to-excel

我试图让我的页面 Data.aspx 返回一个 html 表，但我希望该表采用 excel 格式。到目前为止，这是我的代码。

在 Data.aspx 中加载：

> 响应.清除（）
> 
> ```
>  Select Case lstrCmd
>         Case "summary"
>             Response.Write(Summary())
>             Response.Cache.SetCacheability(HttpCacheability.NoCache)
>         Case "export"
>             Response.ContentType = "application/ms-excel"
>             Response.AddHeader("Content-Disposition", "attachment;filename=" & _
>                     mstrProjectName & ".xls")
>             Response.Write(SummaryExport())
>     End Select
> 
>     Response.End() 
> ```

所以添加标题是我感到困惑的地方。这是我的软件的另一个用途，但我不确定它是否会起作用..

调用它的 jquery 使用 ajax：

> ```
>  function btnSubmitExport_Click() {
>         var compID = $("#ddlCompanies").val();
>         var projectID = $("#ddlProjects").val();
>         var startDate = $("#txtStartDate").val();
>         var endDate = $("#txtEndDate").val();
>         var compName = $("#ddlCompanies :selected").text();
>         var projectName = $("#ddlProjects :selected").text(); 
> ```

```
 $("#content").html("<div class='loading'>loading...</div>");

        $.ajax({
            url:        "Data.aspx",
            data:       {
                            CompanyID:  compID,
                            ProjectID:  projectID,
                            CompanyName: compName,
                            ProjectName: projectName,
                            StartDate:  startDate,
                            EndDate:    endDate,
                            Cmd:        "export"
                        },                
            success:    function(html) {
                             $("#content").html(html);       
                        },
            error:      function(response) {
                    alert(response);
            }
        });
     } 
```

因此，通常，当我请求此数据时，我只是将生成的 html 放入我的 default.aspx 页面上的“内容”div 中。但我希望该 html 成为一个 excel 文件！

对此的任何提示或想法都会有所帮助。

我在其他地方看到了同样的问题，但没有任何答案可以帮助我使用现有代码..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:13:27.907

如果您的 html 文本中包含 Table 标签，只需使用 XLS 扩展名保存它，Microsoft Excel 就会像魅力一样打开它！而且正如我所见，您希望用户下载文件，而不是在页面中显示其内容。您应该直接在 ASPX 页面上重定向页面（不使用 JQuery）。我建议您在开发人员工具中使用网络监视器来查看发生了什么。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T17:47:24.690

通常，您需要使用此标头

`Response.ContentType = "application/vnd.ms-excel"`
`Response.AddHeader "Content-Disposition", "filename=excelfile.xls"`

在此特定页面中根据需要打印所有输出，就是这样。研究这些标题，你会没事的。

# jsf - 从 h:selectOneListbox 中的 f:selectItems 传递参数

> ID：12322541
> 
> 赞同：0
> 
> 时间：2012-09-07T17:11:15.410
> 
> 标签：jsf, jsf-2, facelets

我有一个 selectOneListbox，当单击它时，应该将一个附加参数（id）传递给服务器。就像现在一样，用户会看到一个名称列表，当他们选择一个时，我可以获得名称。但是，每个名称也有一个唯一的 id 与之关联，我不希望用户看到 - 如何在用户没有看到的情况下将所选名称的唯一 id 传递给支持 bean？可能吗？我试图弄清楚如何使用 f:param 但我不知道这将如何工作。

```
 <h:selectOneListbox id="listBox" value="#{ScheduleMB.clients}" size="5"  
                rendered="#{ScheduleMB.showClients}" >
                    <f:selectItems value="#{ScheduleMB.clientList}" var="c"
                        itemLabel="#{c.lastName} #{', '} #{c.firstName}" itemValue="#{c.lastName}" />
                    <f:ajax event="click" listener="#{ScheduleMB.clickListener}"  
                        render="group" />
                </h:selectOneListbox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:10:23.037

`<f:param>`用于不同的目的。即使这`<f:param>`是可能的，它最终仍然会在生成的 HTML 输出中可见。最终用户只需右键单击并*查看源代码*，然后将 ID 定义为选项值。

最好的办法是根据不同的唯一标识符从数据库中检索 ID，可能是名字+姓氏的唯一组合。

顺便说一句，为什么你想从输出中隐藏 ID 对我来说没有任何意义。如果您将其用作选项值会容易得多，如果您使用转换器则更容易，这样您就可以将整个`#{c}`作为选项值传递。最终用户不能以任何方式欺骗/更改它。JSF 将根据可用选项列表（无论如何在服务器端定义）重新验证提交的值。

# facebook - Facebook：如何将共享器作为弹出窗口

> ID：12322543
> 
> 赞同：3
> 
> 时间：2012-09-07T17:11:54.070
> 
> 标签：facebook, share, facebook-sharer

我知道共享者有 2 个参数。有url（u）和title（t）：

`http://www.facebook.com/sharer/sharer.php?u=[url]&t=[title]`

我希望该共享器显示为弹出窗口。怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-07T17:23:33.167

`window.open`用Javascript方法打开它：

```
window.open('http://www.facebook.com/sharer/sharer.php?u=[url]&t=[title]', 'facebook_share', 'height=320, width=640, toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, directories=no, status=no'); 
```

# opencl - OpenCL / 尝试理解内核代码

> ID：12322546
> 
> 赞同：1
> 
> 时间：2012-09-07T17:12:05.400
> 
> 标签：opencl

我正在研究一个 OpenCL 代码，它模拟了以下教程中的 N 体问题：

[http://www.browndeertechnology.com/docs/BDT_OpenCL_Tutorial_NBody-rev3.html](http://www.browndeertechnology.com/docs/BDT_OpenCL_Tutorial_NBody-rev3.html)

我的主要问题依赖于内核代码：

```
 for(int jb=0; jb < nb; jb++) { /* Foreach block ... */

19          pblock[ti] = pos_old[jb*nt+ti]; /* Cache ONE particle position */
20          barrier(CLK_LOCAL_MEM_FENCE); /* Wait for others in the work-group */

21          for(int j=0; j<nt; j++) { /* For ALL cached particle positions ... */
22             float4 p2 = pblock[j]; /* Read a cached particle position */
23             float4 d = p2 - p;
24             float invr = rsqrt(d.x*d.x + d.y*d.y + d.z*d.z + eps);
25             float f = p2.w*invr*invr*invr;
26             a += f*d; /* Accumulate acceleration */
27          }

28          barrier(CLK_LOCAL_MEM_FENCE); /* Wait for others in work-group */
29       } 
```

我不明白执行时到底发生了什么：内核代码被执行 n 次，其中 n 是工作项的数量（也是线程的数量），但在上面的代码部分中，我们使用本地内存对于每个工作组（似乎有 nb 个工作组）

那么，在执行时，直到第一个“障碍”，我是否用 pos_old 的全局值在本地填充 pblock 数组？

总是到第一个障碍，对于另一个工作组，pblock 数组将包含与其他工作组的数组相同的值，因为在障碍之前 jb=0？

这似乎是所有工作组共享这些数组的一种方式，但这对我来说并不完全清楚。

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T22:44:04.767

你能发布整个内核代码吗？我必须对参数和私有变量做出假设。

看起来组中有 nt 个工作项，ti 代表当前工作项。当循环执行时，组中的每个项目将只复制单个元素。通常，此副本来自全局数据源。第一个障碍强制工作项等待，直到其他项完成复制。这是必要的，因为组中的每个工作项都需要读取从其他每个工作项复制的数据。这些值不应该相同，因为每个工作项的 ti 应该不同。（但对于第一个循环，jb*nt 仍然为零）

* * *

这是整个内核代码：

```
__kernel
void 
nbody_sim(
    __global float4* pos ,
    __global float4* vel,
    int numBodies,
    float deltaTime,
    float epsSqr,
    __local float4* localPos,
    __global float4* newPosition,
    __global float4* newVelocity)
{
    unsigned int tid = get_local_id(0);
    unsigned int gid = get_global_id(0);
    unsigned int localSize = get_local_size(0);

    // Number of tiles we need to iterate
    unsigned int numTiles = numBodies / localSize;

    // position of this work-item
    float4 myPos = pos[gid];
    float4 acc = (float4)(0.0f, 0.0f, 0.0f, 0.0f);

    for(int i = 0; i < numTiles; ++i)
    {
        // load one tile into local memory
        int idx = i * localSize + tid;
        localPos[tid] = pos[idx];

        // Synchronize to make sure data is available for processing
        barrier(CLK_LOCAL_MEM_FENCE);

        // calculate acceleration effect due to each body
        // a[i->j] = m[j] * r[i->j] / (r^2 + epsSqr)^(3/2)
        for(int j = 0; j < localSize; ++j)
        {
            // Calculate acceleartion caused by particle j on particle i
            float4 r = localPos[j] - myPos;
            float distSqr = r.x * r.x  +  r.y * r.y  +  r.z * r.z;
            float invDist = 1.0f / sqrt(distSqr + epsSqr);
            float invDistCube = invDist * invDist * invDist;
            float s = localPos[j].w * invDistCube;

            // accumulate effect of all particles
            acc += s * r;
        }

        // Synchronize so that next tile can be loaded
        barrier(CLK_LOCAL_MEM_FENCE);
    }

    float4 oldVel = vel[gid];

    // updated position and velocity
    float4 newPos = myPos + oldVel * deltaTime + acc * 0.5f * deltaTime * deltaTime;
    newPos.w = myPos.w;
    float4 newVel = oldVel + acc * deltaTime;

    // write to global memory
    newPosition[gid] = newPos;
    newVelocity[gid] = newVel;
} 
```

每个工作组都有“numTiles”工作组和“localSize”工作项。

“gid”是全局索引，“tid”是本地索引。

让我们从循环“for(int i = 0; i < numTiles; ++i)”的第一次迭代开始，其中“i=0”：

如果我举个例子：

numTiles = 4, localSize = 25 和 numBodies = 100 = 工作项数。

然后，在执行时，如果我有 gid = 80，则 tid = 5，idx = 5，第一个分配将是：localPos[5] = pos[5]

现在，我取 gid = 5，然后 tid = 5 和 idx = 5，我将有相同的分配：localPos[5] = pos[5]

所以，据我了解，在第一次迭代和第一个“障碍”之后，每个工作项都包含相同的本地数组“localPos”，即第一个全局块的子数组，即“pos[0: 24]”。

这是对发生的事情的一个很好的解释吗？

# ios - GPUImage：输出平铺图像的方式？

> ID：12322547
> 
> 赞同：1
> 
> 时间：2012-09-07T17:12:06.133
> 
> 标签：ios, gpuimage

我在我的 iOS 项目中使用 GPUImage (https://github.com/BradLarson/GPUImage) 并且非常喜欢它。

现在我用它来处理带有过滤器的图像（只有颜色变化，没有缩放/变换），并使用`GPUImageView`输出中的层来做其他事情，所以我的链看起来像：

`GPUImagePicture`->（滤色器）-> `GPUImageView`。

现在我想将输出更改为平铺图像，其中渲染结果将用作模式。我考虑了几种方法来做到这一点：

1.  只需使用 Quartz2D 生成平铺图像到`GPUImagePicture`，然后对其进行处理（因此结果也会被平铺）。但由于`GPUImagePicture`将再次使用 Quartz2D 重绘，它的效率可能会降低。我对吗？
2.  修改或子类化`GPUImageView`以使用 OpenGL 生成平铺结果。这可能很难，我想不出一个好的方法来实现它。

哪个会更好，还有其他方法吗？

# facebook - 如果用户登录与否，点赞按钮“点赞”计数不同

> ID：12322550
> 
> 赞同：1
> 
> 时间：2012-09-07T17:12:21.813
> 
> 标签：facebook, facebook-like, facebook-likebox

当我登录到 facebook 时，我目前正在一个拥有 14k 赞的网站上工作。但是当我没有登录 Facebook 时，这个数字会下降到 9.2k。

有谁知道这是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:23:04.100

看看这篇文章： http: [//faso.com/fineartviews/21028/facebook-like-button-count-inaccuracies](http://faso.com/fineartviews/21028/facebook-like-button-count-inaccuracies)。报告的夸大数字可能是该页面的总参与计数（喜欢和分享）您在哪里寻找粉丝计数（有多少人明确点击了喜欢按钮）。

# php - 使用php在单独的行中插入值

> ID：12322552
> 
> 赞同：-2
> 
> 时间：2012-09-07T17:12:26.190
> 
> 标签：php

我正在使用 curl 概念并从其他网站获取描述，但描述以 aldpabetic 顺序插入，例如：

所有**A**在一排，所有**B**在一排

依此类推，但我希望所有这些都在单独的行中。请帮忙。

```
include('simple_html_dom.php'); // get DOM from URL or file 
$html = file_get_html('animecrunch.com/';); 
// find all td tags with attribite valign=top and plain text    
foreach($html->find('td[valign=top]') as $e) { 
   $anime= htmlentities(trim($e->plaintext), ENT_NOQUOTES ,'UTF-8'); 
   $vowels = array("!", "'"); 
   $pureanime = str_replace($vowels, "", "$anime"); 
   $count=mysql_num_rows($query1); 
   if($count==0) { 
      $query=mysql_query("insert into anime(anime) values('$pureanime')") or die(mysql_error()); 
      header("location:test1.php"); 
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:42:12.970

不确定您要在数据库中存储什么，但您的问题是“描述”，所以我假设您只需要动画的名称。你只是错过了一件事情，而不是找到`td[valign=top]`，你想要`a`每个里面的标签`td`。

另外，我删除了重定向和 $query1 的东西，我不确定它来自哪里。（也许检查它是否已经存在？）

```
include('simple_html_dom.php'); // get DOM from URL or file 
$html = file_get_html('animecrunch.com/';); 
// find all td tags with attribite valign=top and plain text    
foreach($html->find('td[valign=top] a') as $e) { 
   $anime= htmlentities(trim($e->plaintext), ENT_NOQUOTES ,'UTF-8'); 
   $vowels = array("!", "'"); 
   $pureanime = str_replace($vowels, "", "$anime"); 

   $query=mysql_query("insert into anime(anime) values('$pureanime')") or die(mysql_error()); 

   }
} 
```

# nsstring - NSString 的二进制表示

> ID：12322557
> 
> 赞同：0
> 
> 时间：2012-09-07T17:12:49.350
> 
> 标签：nsstring, nsdata

我需要有人通过 NSStream 向我发送二进制数据，然后我会将其转换为 NSString。他们需要知道什么二进制表示（字节大小、字节顺序）才能让我成功地将数据转换回 NSString 中的相同字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:05:44.667

首先获取数据并转换成`NSData` 然后转换`NSData`成`NSString`

```
NSString* newStr = [[[NSString alloc] initWithData:theData
                                         encoding:NSUTF8StringEncoding] autorelease]; 
```

如果数据以空值结尾，则应改为使用 -stringWithUTF8String: 以避免末尾的额外 \0。

```
NSString* newStr = [NSString stringWithUTF8String:[theData bytes]]; 
```

（如果您启用了 ARC，请删除 -autorelease 调用。）

# ios - 为什么设置此 UISlider 的 value 属性不更新其位置？

> ID：12322562
> 
> 赞同：0
> 
> 时间：2012-09-07T17:13:11.777
> 
> 标签：ios, cocoa-touch, uiviewcontroller, uislider, ios6

...视图控制器.h：

```
@property (nonatomic, strong) IBOutlet UISlider *slider; 
```

...视图控制器.m：

```
@synthesize slider;

- (void)viewDidLoad
{
    [super viewDidLoad];

    ...
    currentValue = 50;
    self.slider.value = currentValue;

    // Do any additional setup after loading the view, typically from a nib.
} 
```

.xib：

我界面中的 UISlider 连接到滑块属性。

行为：

当滑块应该在中间时，滑块一直位于右侧，值为 100。我设置的一个动作确认 currentValue 的值为 50。如果 currentValue 为 50，slider.value 设置为 50，为什么位置没有反映这一点？

PS 我试过 [slider setNeedsDisplay] 并没有影响这种行为。

**更新：**感谢您的快速回答！多么愚蠢的事情。我将 currentValue 作为 int 在别处打印出来，所以我现在使用以下代码设置 slider.value：

```
self.slider.value = (float) currentValue/100; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:18:05.657

```
currentValue = 50; 
```

滑块的范围**不是**0...100 而是 0...1。你必须写

```
currentValue = 0.5; 
```

或更改滑块的范围：

```
self.slider.maximumValue = 100; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T17:16:22.650

UISlider 的默认范围是 0.0 到 1.0（即作为浮点数）。将值设置为高于最大值将导致滑块一直显示到右侧。检查您的 minimumValue 和 maximumValue 属性。

# wix - 在哪里可以找到 wix 自定义操作的文档

> ID：12322563
> 
> 赞同：0
> 
> 时间：2012-09-07T17:13:21.857
> 
> 标签：wix

我们正在向 Microsoft 提交我们的 Windows 徽标计划申请，他们要求我们提供有关安装程序中每个 customAction 的文档。

我们可以为我们添加的 customActions 提供文档，但是 wix 安装程序会自动添加一大堆。我正在尝试在线搜索，但找不到可靠的 wix 搜索。甚至 wix 文档也没有谈论 customActions 或者我可能遗漏了一些东西。

你能指出我正确的方向吗？

![在此处输入图像描述](../Images/318b023630953fb14106aea230eb48c1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:21:33.397

查看使用 WiX 安装的 CHM 文件 - 您会在其中找到必要的信息。

# android - 果冻豆中的活动生命周期不同

> ID：12322568
> 
> 赞同：-2
> 
> 时间：2012-09-07T17:14:02.683
> 
> 标签：android, android-activity, android-4.2-jelly-bean

在 jelly bean 4.1.1 中运行时，我的应用程序中有一个奇怪的行为，当我启动一个 Activity 并按下后退按钮返回到第一个 Activity 时，它也通过调用重新创建它`onCreate`，我做了什么我也处理了配置更改与第一个活动，因此它不会在配置更改时重新创建，但那没有做任何事情。！！！！为什么果冻豆中的Activity生命周期有一个奇怪的行为。您可以明白我的意思，只需创建一个简单的 Android 项目并创建两个活动，从第一个导航到活动，然后按返回按钮，然后查看日志 onCreate on Activity 1 将被调用！！！！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T17:39:31.080

如果操作系统确定它需要资源，则无法保证操作系统不会随时终止您的*后台活动。*只是一个猜测，但`onCreate`在这些情况下可能会被调用，因为系统会在您返回第一个 Activity 之前杀死它。

编辑：http: [//developer.android.com/guide/components/activities.html#Lifecycle](http://developer.android.com/guide/components/activities.html#Lifecycle)

*如果一个活动被暂停或停止，系统可以通过要求它完成（调用它的 finish() 方法）或简单地终止它的进程来将它从内存中删除。当活动再次打开时（在完成或杀死之后），必须重新创建它。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:19:20.137

这是给你的另一个参考：

[http://developer.android.com/training/basics/activity-lifecycle/recreating.html](http://developer.android.com/training/basics/activity-lifecycle/recreating.html) [http://developer.android.com/training/basics/activity-lifecycle/starting.html](http://developer.android.com/training/basics/activity-lifecycle/starting.html)

在第一个链接中：

> 如果您的活动当前已停止并且长时间未使用，或者前台活动需要更多资源，系统也可能会破坏您的活动，因此系统必须关闭后台进程以恢复内存。
> 
> ...
> 
> 但是，如果系统由于系统限制（而不是正常的应用程序行为）而破坏了 Activity，那么尽管实际的 Activity 实例已经消失，但系统会记住它的存在，因此如果用户导航回它，系统会创建一个新的使用一组保存的数据来描述活动被销毁时的状态的活动实例。系统用来恢复之前状态的保存数据称为“实例状态”，是存储在 Bundle 对象中的键值对的集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-25T05:47:53.903

1.  打开电话设置屏幕
2.  单击开发人员选项（如果不存在，请按大约电话 5-6 次）
3.  在应用程序类别的开发者选项中，取消选中不要保留活动标志

# openid - 在我自己的网站上实现 OpenId

> ID：12322569
> 
> 赞同：1
> 
> 时间：2012-09-07T17:14:19.187
> 
> 标签：openid

我想在我的网站上实现 OpenId，以便用户可以从各个站点登录，就像[stackexchange](http://www.stackexchange.com)登录系统一样。但我对 OpenId Provider、consumer、server 等一些常用术语感到困惑。我应该安装哪一个才能使 OpenId 登录系统正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:23:37.057

您的网站应该实现一个 OpenID 消费者。

# c# - .Net c# char的编组*

> ID：12322572
> 
> 赞同：3
> 
> 时间：2012-09-07T17:14:26.790
> 
> 标签：c#, marshalling, cstring

我正在尝试使用 System.Runtime.InteropServices 从 C# 应用程序调用现有的 C dll，并且难以匹配 PInvoke 函数和 Target 函数之间的签名。

目标函数是

```
__declspec(dllexport) DWORD GetSomeString(char* strOut); 
```

我的 PInvoke 功能是

```
[DllImport("Existing.dll")]
public static extern uint GetSomeString([MarshalAs(UnmanagedType.LPWStr)]
                            string strDisplay); 
```

我进行函数调用

```
string tempStr = "My Output String";
uint retVal = GetSomeString(tempStr); 
```

但我得到了消息

> 托管调试助手“PInvokeStackImbalance”检测到问题... ...对 PInvoke 函数“GetSomeString”的调用使堆栈失衡。这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 PInvoke 签名的调用约定和参数是否与目标非托管签名匹配。

我也尝试将 PInvoke 函数实现为

```
[DllImport("Existing.dll")]
public static extern uint GetSomeString([MarshalAs(UnmanagedType.LPWStr)]
                            StringBuilder strDisplay); 
```

但无济于事。

有没有人知道我做错了什么？

如果需要更多信息或我的问题不清楚，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T17:16:43.817

您需要指定[调用约定](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.callingconvention.aspx)。默认情况下，PInvoke 使用`StdCall`，但您的方法是 (likely) `Cdecl`。

```
[DllImport("Existing.dll", CallingConvention=CallingConvention.Cdecl)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T17:29:01.890

除了 Reed Copsey 提到的不正确的调用约定外，匹配类型`char*`为`UnmanagedType.LPStr`.

# sql - 使用 ADODB 在 VBA 过程中查询 Excel 文件时，多个 JOIN 是否不可用？

> ID：12322576
> 
> 赞同：4
> 
> 时间：2012-09-07T17:14:47.120
> 
> 标签：sql, excel, adodb, vba

我有 3 张表格，其中的数据格式为表格。工作表名称为“Riesgos”、“Eventos”和“EventosRiesgos”。

EventosRiesgo 拥有与事件和风险相关的信息（多对多关系）。

我正在尝试从 Riesgos 获取所有风险，以及与来自 (.) 的风险相关的事件。我使用 ADODB 将工作表查询为数据库表并使用以下 SQL：

```
SELECT * FROM [Riesgos$] r
LEFT JOIN [EventosRiesgos$] er ON r.[Id]=er.[Id Riesgo]
LEFT JOIN [Eventos$] e ON er.[Id Evento]=e.[Id] 
```

但我收到一个错误，它是西班牙语，但粗略的翻译是：表达式“r.[Id]=er.[Id Riesgo] LEFT JOIN [Eventos$] e ON er.[Id Evento] 中的语法错误（缺少运算符） ]=e.[Id]"

当我只使用前 2 行（只有一个连接）运行查询时，一切都按预期工作。我的问题是：为什么当我使用两个 JOIN 时查询不起作用？

谁能帮助我，至少找到有关使用 ADODB 查询 Excel 工作表的文档？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T17:56:24.560

~~Access~~ Jet/ADODB/ACE 喜欢带有多个表的括号

```
SELECT  * FROM ( [Riesgos$] r
LEFT JOIN [EventosRiesgos$] er ON r.[Id]=er.[Id Riesgo] )
LEFT JOIN [Eventos$] e ON er.[Id Evento]=e.[Id] 
```

唯一的区别是括号周围`[riesgos$] r .... er.[Id Riesggo]`

# css - 如何使文本与图像右对齐？

> ID：12322577
> 
> 赞同：0
> 
> 时间：2012-09-07T17:14:49.763
> 
> 标签：css

我有一个包含图像的超链接，没什么特别的 - 像这样。

我想根据附件1将文本对齐到图像的右侧，但结果是根据附件2。我还需要阻止超链接，以便它填充矩形（它的宽度和高度）

![附件1](../Images/136f6c02ed6a425998895bee077d60d6.png)

![截图](../Images/6bf415f83f083360533579322222c78f.png)

有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:25:08.563

有很多方法可以做到这一点：

使用`<div>`_

```
<div style="width: 200px;">
<div style="float: left; width: 70px;">
<img src="http://a0.twimg.com/profile_images/749158551/Ry_reasonably_small.jpg" width="64" height="64" />
</div>
<div style="float: right; width: 130px;">
<p><strong><a href="#">This is a really really over sized title for a link to neverland</a></strong></p><p>Some other text</p>
</div>
<div style="clear: both;">
</div> 
```

用一个`<table>`

```
<table width="200">
  <tr>
   <td rowspan="2"><img src="http://a0.twimg.com/profile_images/749158551/Ry_reasonably_small.jpg" width="64" height="64" /></td>
   <td><strong><a href="#">This is a really really over sized title for a link to neverland</a></strong></td>
 </tr>
  <tr>
   <td>Some other text</td>
 </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T17:25:32.043

把它放在你的页面上，看看发生了什么。干杯

```
<div style="width:500px;height:250px; padding:10px; padding-left:250px; border:solid 1px black; background-repeat:no-repeat; background-position:left center; background-image:url('https://lh4.googleusercontent.com/-v0soe-ievYE/AAAAAAAAAAI/AAAAAAAAlUA/EHduo3GhTDs/s250-c-k/photo.jpg')">
        Google – 52 minutes ago – September 8 marks the anniversary of Star Trek's first broadcast, and naturally ... Amit Singhal originally shared this post: OK, I admit it, I am a die-hard Trekkie. I grew up watching endless ...
        Google – 18 hours ago – By now, you may know that when you search for [define] followed by a word, Google will show you the definition. But did you know that there's a Dictionary mode ...
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T17:28:18.240

类似于@njk，但使用`a`作为块元素。 [http://jsfiddle.net/scrimothy/r6TKz/](http://jsfiddle.net/scrimothy/r6TKz/)

# php - PHP 类的 Apache2 模块

> ID：12322580
> 
> 赞同：-1
> 
> 时间：2012-09-07T17:14:59.420
> 
> 标签：php, c, apache, apache-modules

> **可能重复：**
> [在 apache 模块中转换 PHP 类](https://stackoverflow.com/questions/6963633/convert-php-class-in-apache-module)

我正在网上寻找一些指导来创建一个 apache2 模块，该模块在加载时能够在 php 中公开一个类：

如果我创建一个 php 类作为

```
// myclass.php
class myClass {
     public function myFunction ($t) {
         return $t;
     }
} 
```

我可以写

```
include("myclass.php");
$item = new myClass ();
echo $item-> hello ("word"); 
```

* * *

我想创建一个 apache 模块，使我的服务器中的所有 php 文件都可以使用该类，以便我可以编写：

```
$item = new myClass ();
echo $item-> hello ("word"); 
```

当然我可以在 php.ini 中设置自动加载文件，但是我需要加密类的方法和算法，以便将类重新分发为框架

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:18:04.957

您必须为此编写 PHP 扩展，而不是 apache 模块。

为了混淆你的源代码，你可以使用 Zend Guard 之类的东西，只要你可以在服务器上安装额外的软件，这会更容易。

# azure - 向外行或学生解释 windows azure

> ID：12322582
> 
> 赞同：2
> 
> 时间：2012-09-07T17:15:07.067
> 
> 标签：azure

我正在寻找简单的类比来向学生或外行人解释 Windows azure、应用程序结构等。如果您有任何建议，请告诉我。谢谢 N

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-12-30T15:02:58.853

好吧，首先我会尝试谈谈我们*过去*是如何构建和维护事物的。购买我们自己的硬件，构建它，对其进行编程，并将其连接到互联网。那是老办法。然后，我将转向云服务提供商是什么。简而言之，它们只是别人的服务器。通常是亚马逊、微软或谷歌的服务器。AWS/Azure/GCP。

这是一个快速的 youtube 视频，用外行的方式解释它。 [https://www.youtube.com/watch?v=1ERdeg8Sfv4](https://www.youtube.com/watch?v=1ERdeg8Sfv4)

云服务提供商提供 Web 门户网站，人们可以在其中单击并构建服务，例如存储、备份、DNS、数据库、更多网站、负载平衡，以及——也许是最受欢迎的——虚拟机托管。

使 CSP 如此成功的原因在于规模经济。CSP 将建立巨大的数据中心并对其进行设计，以提供大多数企业所需的服务。相比之下，如果每个企业都从头开始建立自己的企业。然而，这些 CSP 面临着许多挑战，例如需要更多的备用容量，并且必须构建适合所有人的东西，而不是适合特定用户的东西。因此，对于小型企业来说，他们是否省钱取决于他们的用例。您可能会从头开始节省更多的建筑，但是您必须培训并支付费用来维护您自己的服务器。

云服务提供商为市场带来的最具革命性的好处之一是购买额外容量更加容易和快捷。您可能需要花费数周时间购买硬件并将其安装在您的位置。或者，如果您通过传统供应商租用，您可能需要几个小时让他们手动重新配置。但是，他们现在使一切自动化，因此您可以在几秒钟内获得新服务器。这使企业能够构建他们的应用程序以允许他们按需扩展。这意味着他们根据使用量为服务支付不同的金额。这具有降低成本的能力，但它再次需要更多时间来开发和维护更复杂的应用程序。

# distributed-transactions - 可以使用 JMS 进行跨机器事务吗？

> ID：12322584
> 
> 赞同：0
> 
> 时间：2012-09-07T17:15:23.607
> 
> 标签：distributed-transactions, spring-jms

案例：开始：创建交易

1.  将数据插入数据库（机器 A）
2.  将同步 JMS 消息发送到队列（机器 A）
3.  从队列接收 JMS 消息（机器 B）
4.  将数据插入数据库并返回（机器 B）
5.  （机器A）中的进一步处理

结束：提交事务

机器 A 和 B 中的进程能否处理一个事务。因此，如果进程 B 回滚，则进程 A 回滚，反之亦然？

有什么例子吗？需要任何额外的服务器/组件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:17:44.723

您将需要某种事务服务器，我建议使用[JOTM](http://jotm.ow2.org/xwiki/bin/view/Main/WebHome)

# c# - Linq Include 方法未显示在视图模型中

> ID：12322587
> 
> 赞同：1
> 
> 时间：2012-09-07T17:15:54.960
> 
> 标签：c#, linq, entity-framework, mvvm, ria

我有一个使用 mvvm 和 ria 服务的 Silverlight 应用程序。我在用户输入作业编号并单击查找的视图上有一个文本框。此查找按钮使用 xaml 中的 ICommand 转到此处..

```
public ICommand FindJob
{
    get
    {
        return new DelegateCommand(BeginFindJob, (o) => true);
    }
}

public void BeginFindJob(object o)
{
    if (!IsDesignTime)
    {
        IsLoading = true;
        string jobnum = o.ToString();
        OnPropertyChanged("IsLoading");
        LoadOperation<Job> loadOp = _context.Load<Job>(_context.GetJobsByJobNumQuery(jobnum));
        loadOp.Completed += new EventHandler(loadOp_Completed);
    }
} 
```

它像这样在我的 ria 服务中使用 GetJobsByJobNumQuery。

```
public IQueryable<Job> GetJobsByJobNum(string JobNum)
{
    var query = ((from j in this.ObjectContext.Jobs
                  where j.JobNumber == JobNum
                  select j) as ObjectQuery<Job>).Include("JobHeadings").Include("JobContracts").Include("JobTags").Include("JobMarket"); 
    return query;
} 
```

我希望它返回有关工作的所有信息，所以我编写了上面的查询以包含所有这些关系。在 linq 查询上放置一个断点并查看结果，它完全符合我的要求。所有字段、JobHeadings 和 Contracts 都在工作，并将所有绑定带回该作业。所以现在我将该查询带回我的视图模型并填充字段，就像这样..

```
void loadOp_Completed(object sender, EventArgs e)
{
    try
    {
        LoadOperation<Job> loadOp = sender as LoadOperation<Job>;
        if (!loadOp.HasError)
        {
            _job = loadOp.Entities.FirstOrDefault<Job>();

            base.IsLoading = false;
            base.ProgressBarVisibility = Visibility.Collapsed;
            base.OnPropertyChanged("IsLoading");
            base.OnPropertyChanged("ProgressBarVisibility");
            base.OnPropertyChanged("CurrentJob");
        }
    }
    catch (Exception ex)
    {
    }
} 
```

我的问题是，没有关系数据返回。所有基本作业信息都从我的数据库中的作业表返回，但相关表中的任何信息都没有返回到我的视图模型中。将 bp 放入并查看应该包含所有内容的 _job，所有关系表 JobHeading/JobContract 都显示“枚举未产生任何结果”。

那么它是如何不回到视图模型的呢？我该怎么做才能将完整的查询结果放入视图/视图模型中，以便进行更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:43:46.440

包含在 ObjectSet 上不应该更高吗？像这样：

```
public IQueryable<Job> GetJobsByJobNum(string JobNum)
    {
        var query = ((from j in this.ObjectContext.Jobs.Include("JobHeadings").Include("JobContracts").Include("JobTags").Include("JobMarket")
                      where j.JobNumber == JobNum
                      select j) as ObjectQuery<Job>); 
        return query;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T21:04:53.280

这是元数据服务没有获取我最新的表关联的问题。在我经历了重新生成元数据的混乱之后，包含和关联正确的键是一件简单的事情。感谢昆顿伯恩哈特的努力！

# gwt - gwt rpc 序列化泛型类

> ID：12322593
> 
> 赞同：1
> 
> 时间：2012-09-07T17:16:08.403
> 
> 标签：gwt, rpc, gwt-rpc

我需要通过 gwt rpc 连接作为泛型传递一个类对象，但似乎 rpc 不与它合作。该类使用 java.io.Serializable 进行序列化。我已经使用 gwt IsSerializable 检查了它，但我仍然有错误。

这是我的代码

MySource.java

```
@SuppressWarnings("serial")
@PersistenceCapable
@Inheritance(strategy = InheritanceStrategy.SUBCLASS_TABLE)
public abstract class MySource implements Serializable {
@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
private Long id;
@Persistent
private String userId;
@Persistent
private String title;
@Persistent
private String description;
@Persistent
private String blobKey;
@Persistent
private String youtubeLink;
@Persistent
private String personalLink;
@Persistent
private Date submitedDate;
@Persistent
private float price;

public float getPrice() {
    return price;
}

public void setPrice(float price) {
    this.price = price;
}

public String getUserId() {
    return userId;
}

public void setUserId(String userId) {
    this.userId = userId;
}

public String getTitle() {
    return title;
}

public void setTitle(String title) {
    this.title = title;
}

public String getDescription() {
    return description;
}

public void setDescription(String description) {
    this.description = description;
}

public String getBlobKey() {
    return blobKey;
}

public void setBlobKey(String blobKey) {
    this.blobKey = blobKey;
}

public String getYoutubeLink() {
    return youtubeLink;
}

public void setYoutubeLink(String youtubeLink) {
    this.youtubeLink = youtubeLink;
}

public String getPersonalLink() {
    return personalLink;
}

public void setPersonalLink(String personalLink) {
    this.personalLink = personalLink;
}

public Date getSubmitedDate() {
    return submitedDate;
}

public void setSubmitedDate(Date submitedDate) {
    this.submitedDate = submitedDate;
}

public Long getId() {
    return id;
}

} 
```

AndroidSource.java

```
@SuppressWarnings("serial")
@PersistenceCapable
public class AndroidSource extends MySource{

public AndroidSource() {
    super();
}

} 
```

CategoryBrowseService.java 是远程服务模型

```
@RemoteServiceRelativePath("categoryService")
public interface CategoryBrowseService extends RemoteService{

ArrayList<MySource> getSourceList(Class<? extends MySource> classType); 
} 
```

CategoryBrowseServiceAsync.java 公共接口 CategoryBrowseServiceAsync {

```
void getSourceList(Class<? extends MySource> classType,
        AsyncCallback<ArrayList<MySource>> callback);

} 
```

调用 rpc 的 CategoryBrowsePresenter.java

```
private void retrieveSources(Class<? extends MySource> classType) {
    CategoryBrowseServiceAsync rpcService =   GWT.create(CategoryBrowseService.class);

    rpcService.getSourceList(classType, new AsyncCallback<ArrayList<MySource>>() {

        @Override
        public void onFailure(Throwable caught) {
            Window.alert("Ooops!!!Sorry!Something went wrong.I am still beta!");
        }

        @Override
        public void onSuccess(ArrayList<MySource> result) {
            sourceList = result;
            display.setSourceContent(sourceList);
        }
    });
} 
```

CategoryBrowseServiceImpl.java

```
@SuppressWarnings("serial")
public class CategoryBrowseServiceImpl extends RemoteServiceServlet implements CategoryBrowseService{

  private SourceDatastore dataStore;

  public CategoryBrowseServiceImpl() {
    dataStore = new SourceDatastore();
  }

  @Override
  public ArrayList<MySource> getSourceList(Class<? extends MySource> classType) {

      return dataStore.getSources(classType);

  }

} 
```

这是我得到的错误。

```
Compiling module com.sourcebay.SourceBay
   Scanning for additional dependencies: file:/home/santaris/workspace/SourceBay/src/com/sourcebay/client/presenter/mybay/browse/CategoryBrowsePresenter.java
      Computing all possible rebind results for 'com.sourcebay.client.model.mybay.browse.CategoryBrowseService'
         Rebinding com.sourcebay.client.model.mybay.browse.CategoryBrowseService
            Invoking generator com.google.gwt.user.rebind.rpc.ServiceInterfaceProxyGenerator
               Generating client proxy for remote service interface 'com.sourcebay.client.model.mybay.browse.CategoryBrowseService'
                  [ERROR] java.lang.Class<T> is not assignable to 'com.google.gwt.user.client.rpc.IsSerializable' or 'java.io.Serializable' nor does it have a custom field serializer (reached via java.lang.Class<? extends com.sourcebay.shared.source.MySource>)
                  [ERROR] java.lang.Class<T> has no available instantiable subtypes. (reached via java.lang.Class<? extends com.sourcebay.shared.source.MySource>)
                     [ERROR]    subtype java.lang.Class<T> is not assignable to 'com.google.gwt.user.client.rpc.IsSerializable' or 'java.io.Serializable' nor does it have a custom field serializer (reached via java.lang.Class<? extends com.sourcebay.shared.source.MySource>)
   [ERROR] Errors in 'file:/home/santaris/workspace/SourceBay/src/com/sourcebay/client/presenter/mybay/browse/CategoryBrowsePresenter.java'
      [ERROR] Line 75:  Failed to resolve 'com.sourcebay.client.model.mybay.browse.CategoryBrowseService' via deferred binding 
```

矛盾的是，当我通过 eclipse 插件运行我的应用程序时，一切正常。有人可以帮我吗？我已通过 DTO 解决方案检查以解决问题，但没有成功。此外，我也尝试按照 Google 的建议实施 CustomFieldSerializer，但也没有任何成功。

提前致谢，

斯特凡诺斯·安塔里斯

PS 很抱歉这个巨大的帖子:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:53:11.917

那么问题是你试图`Class`通过网络传输一个对象。我不知道为什么它在开发模式下工作（我已经在本地项目上尝试过但失败了），但它不应该工作。您必须使用其他名称而不是`Class`名称，例如 String，它将包含类的名称。从理论上讲，如果您创建 CustomFieldSerializer ，它可以工作`Class`，但使用 String 而不是 Class 会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T19:00:26.933

具有持久性注解的类可以在服务器端很好地工作，但是如果要将其数据传递给客户端，则必须创建一个普通的 java 可序列化类来将数据从服务器传输到客户端。

如上一个答案所述，客户端不支持持久性注释，因为它们无法转换为等效的 javascript 代码（这是有道理的，因为客户端没有持久性的责任）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-30T15:37:05.857

尝试使用`implements Serializable`来定义你的类。我的意思是这样的：

```
 public class AndroidSource extends MySource implements Serializable{

public AndroidSource() {
    super();
}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T18:10:11.270

可能是 MySource.java 中与持久性相关的注释使其无法转换为 javascript。尝试删除注释以查看它是否相关。还要确保 MySource.java 在模块 xml 文件（“源”元素）中声明为可翻译的包中。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-01-19T22:11:48.883

您的 RPC 服务必须只处理可序列化对象。域类无法转换为 JavaScript，因此 GWT 无法通过网络（RPC 协议）发送和接收此类对象。您需要创建实现 java.io.Serializable 的 DTO 类（至尊域类），然后重新配置所有 RPC 服务以在输入 DTO 和输出 DTO 中使用。祝你的项目好运。

# sql - 摆脱在尝试在 MS SQL 2008 R2 上执行 SSIS 包时生成的异常 0x80040154

> ID：12322596
> 
> 赞同：0
> 
> 时间：2012-09-07T17:16:17.693
> 
> 标签：sql, sql-server, sql-server-2008, ssis

> **可能重复：**
> [在 MS SQL 2008R2 环境中执行简单 ssis 包时生成异常 0x80040154](https://stackoverflow.com/questions/12322303/exception-0x80040154-generated-while-executing-a-simple-ssis-package-in-ms-sql-2)

我正在尝试在 MS SQL 2008 R2 上执行一个简单的 SSIS 包。我正在读取一个平面源文件，根据 ID 对数据进行排序并将结果写入一个新的平面源文件目标。但是当我执行时，我得到以下异常：

```
TITLE: Microsoft Visual Studio

Failed to start project

ADDITIONAL INFORMATION:

Class not registered (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)) (Microsoft.DataTransformationServices.VsIntegration) 
```

我该如何从这里开始？

很多论坛要求重新安装 MS SQL 环境，但我不确定这是否是摆脱异常的唯一方法。

有没有更好或替代的方法来摆脱这个异常？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:59:43.073

尝试这个：

出现此错误消息的最常见原因是在 64 位计算机上运行 32 位 dtExec。这篇文章将正确解释它 - [32 位和 64 位的快速参考 SSIS](http://toddmcdermid.blogspot.com/2009/10/quick-reference-ssis-in-32-and-64-bits.html)。

**编辑：**文章的缓存 Google 链接： [http ://webcache.googleusercontent.com/search?q=cache:FQN0QKQCleEJ:toddmcdermid.blogspot.com/2009/10/quick-reference-ssis-in-32-and-64 -bits.html+&cd=1&hl=en&ct=clnk&gl=au#!http://toddmcdermid.blogspot.com/2009/10/quick-reference-ssis-in-32-and-64-bits.html](http://webcache.googleusercontent.com/search?q=cache:FQN0QKQCleEJ:toddmcdermid.blogspot.com/2009/10/quick-reference-ssis-in-32-and-64-bits.html+&cd=1&hl=en&ct=clnk&gl=au#!http://toddmcdermid.blogspot.com/2009/10/quick-reference-ssis-in-32-and-64-bits.html)

> 关于 SQL Server 集成服务和 64 位，存在不少误解。我不得不在论坛中让不少人走上正确的道路——主要是在被误解的 SSIS 包中的一个特定设置上。当然，此信息仅适用于 64 位体系结构 - 如果您运行的是 Windows 32 位操作系统，则别无选择 - 您的包将始终以 32 位模式运行。
> 如果您有 64 位系统，为什么要在 32 位模式下运行？主要是司机。我指的不是硬件驱动程序，而是数据提供者。例如，Excel 和某些版本的 Oracle 没有 64 位提供程序。因此，对于不断增加的 64 位用户群，这里是在您选择的 64 位或 32 位模式下执行集成服务包的简要说明。背景 我可以设计的很好，为什么它不能运行？开始的一点背景。商业智能设计工作室 (BIDS) 是一个 32 位应用程序。当您设计您的软件包时，您使用的是 32 位设备 - 在这件事上别无选择。当您使用 DTExec 执行包时，您可以选择 32 位或 64 位操作 - 但 64 位安装的默认设置是使用 64 位模式（显然）。然而，SSIS 中的一些常用对象没有 64 位对应对象，因此会导致您的包失败。不幸的是，通常在这些消息中的任何地方都没有说明故障在于 32 位和 64 位。它通常类似于： 0x80040154 ... 未注册类对连接管理器 XXX 的 AcquireConnection 方法调用失败，错误代码为 0xC0202009 0xC00F9304 ... SSIS 错误代码 DTS_E_OLEDB_EXCEL_NOT_SUPPORTED OLE DB 提供程序“Microsoft.Jet.OLEDB.4.0”尚未已注册（我在此处包含这些示例错误，希望那些在网上搜索的人可以找到这篇文章！） 为什么我想要 32 位模式？在执行的 SSIS 包中需要 32 位模式的最常见原因是 Excel 提供程序。它目前不适用于 64 位，并且会导致你的包崩溃。（据报道，Office 14 (2010) 支持 64 位 - 尽管它不支持与 32 位并行。）这也适用于其他 Office 提供程序 - 特别是访问 - 以及其他几个方驱动程序和提供程序（如 Oracle）。它们根本无法在 64 位环境中工作（2010 年之前）。您可能还希望运行 Execute DTS 2000 Package Tasks - 这些也只能在 32 位模式下运行。这取决于您执行包的方式 执行 SSIS 包的方法有很多——这是决定您是在 64 位还是 32 位模式下运行它的主要决定因素。所以从下面的列表中选择你的执行环境，并阅读如何强制你想要的位数。在 Business Intelligence Development Studio (BIDS) 中选择 Bitness 如果您在 BIDS 中运行包，则设置很简单，除非您使用执行包任务或执行流程任务来运行子包。您当前打开的包将（默认情况下）以 64 位模式运行。控制它的设置是名为 Run64BitRuntime 的项目上的一个属性。要访问此属性，请在解决方案资源管理器中右键单击 Integration Services 项目并选择属性。然后在编辑器中选择 Debugging 节点。这里默认为“true”，表示该项目中的所有包都将运行在 64 位模式下。如果将此更改为“false”，则所有包都将以 32 位模式运行。特别说明：Execute Package Task 无论子包所属项目的 Run64BitRuntime 设置如何，无论 ExecuteOutOfProcess 的设置如何，通过 Execute Package Task 执行的任何子包都将以与父包相同的模式运行。这意味着即使您的子包在您设计它的项目中将 Run64BitRuntime 设置为 false，如果您的父包的 Run64BitRuntime 属性为 true，它将在 BIDS 中以 64 位模式执行。特别注意：执行进程任务 执行进程任务可以让您选择独立于父包中的设置的 32 位模式，代价是在另一个进程中运行子包。与后面介绍的 SQL 代理方法一样，您可以专门识别 32 位 DTExec 以在 32 位模式下运行 SSIS 子包（见下文）。使用 SQL 代理选择位数 在 Integration Services 2008 中，指示 SQL 代理您希望程序包在什么环境中运行很简单。SSIS 2005 让您跳过更多的障碍。Integration Services 2008 在代理作业步骤属性中，您将使用 SQL Server Integration Services 包类型的步骤。如果您转到“执行选项”选项卡，您会在底部看到“使用 32 位运行时”选项。Integration Services 2005 使用 SQL 2005，您不能使用 Integration Services 包类型的作业步骤在 32 位模式下运行 SSIS 包。您的办法是使用作业步骤的操作系统类型，并在您使用的命令行中专门引用 32 位版本的 DTExec，并手动指定 DTExec 的参数。障碍 #1 - 查找 32 位 DTExec 查找可执行文件应该不难。在标准 64 位安装中，32 位 DTExec.EXE 应位于“\Program Files (x86)\Microsoft SQL Server\90\DTS\Binn”文件夹中。它被简单地称为“DTExec.EXE”，并且不会以任何方式将自己标识为 32 位应用程序 - 您必须“知道”它位于 32 位文件夹中。（或者您可以尝试执行它并观看任务管理器。）如果您已将 SQL 安装到非标准位置，则可能需要进行一些搜索。如果你根本找不到它，你可能没有在你的 64 位机器上安装 32 位组件。在安装 SQL Server 的过程中，如果您只选择了“集成服务”而没有安装“ 已经在 GUI 的十个左右的其他选项卡上进行了选择。利用它！使用 GUI 设置您的包执行，然后从最后一页复制参数。预编译脚本 这只是 Integration Services 2005 中的一个问题 - 开发团队在 SSIS 2008 中完全修复了这个问题。脚本任务上有一个“预编译”选项，默认设置为“真”。如果以某种方式将其设置为“false”，则您的包可能无法在 64 位环境中执行。32 位 ODBC 驱动程序 在 Windows 中使用 32 位 ODBC 驱动程序还有另一个奇怪之处——至少在 Server 2003、2008、Vista 和 Windows 7 64 位操作系统中。使用这些驱动程序的第一步是设置一个 DSN 来处理存储服务器名称和其他详细信息。根据我的经验，自然的第一个开始是打开“ 位于您的 SYSWOW64 文件夹中的 exe。那个 ODBC 数据源管理员确实在 32 位进程中管理 32 位驱动程序。参考资料/资源 此信息的大部分（如果不是全部）也在 MSDN 文章中提炼出来：集成服务的 64 位注意事项。如果您在上面发现其他有用的文章、指针或错误，请发表评论。其他一些非常有用的文章：How To: Run a Package, MSDN 64-bit references within an SSIS Script Component by Michael Entin, Microsoft SSIS Dev。SQL Server 集成服务的 64 位注意事项，Microsoft SSIS 开发人员 Douglas Laudenschlager。我的 SSIS 的 app.config 在哪里？作者：Darren Green，SQL Server MVP。

# asp.net - 根据文件大小使用进度条

> ID：12322597
> 
> 赞同：0
> 
> 时间：2012-09-07T17:16:18.133
> 
> 标签：asp.net

我正在使用上传文件并想根据文件大小显示进度条。

我不知道如何使用根据文件大小工作的进度条。

```
<script language='Javascript' type="text/javascript">

  function addFile() {

        var ni = document.getElementById("fileDiv");

        var objFileCount = document.getElementById("fileCount");
        var num = (document.getElementById("fileCount").value - 1) + 2;
        objFileCount.value = num;
        var newdiv = document.createElement("div");
        var newdiv1 = document.createElement("div");
        var divIdName = "file" + num + "Div";
        newdiv.setAttribute("id", divIdName);
        newdiv.innerHTML = '<input type="file" name="attachment" id="attachment"/><a href="#" onclick="javascript:removeFile(' + divIdName + ');">Remove </a>';
        ni.appendChild(newdiv);

  }

  function removeFile(divName) {
        var d = document.getElementById("fileDiv");
  d.removeChild(divName);

}

</script>

<div>
     <input type="file" name="attachment" runat="server" id="attachment" onchange="document.getElementById('moreUploadsLink').style.display = 'block';" />
      <input type="file" name="attachment" runat="server" id="File1" visible="false"/>
     <div id="process" style="height:10px; width:150px; background-color:Gray"></div>
  <input type="hidden" value="0" id="fileCount" />
  <div id="fileDiv">
  </div>
  <div id="moreUploadsLink" style="display: none">
        <a href="javascript:addFile();">Attach another File</a>
  </div>
  <asp:Button ID="btnUpload" runat="server" Text="Upload" OnClick="btnUpload_Click" />
</div> 
```

这是我的代码：

```
protected void btnUpload_Click(object sender, EventArgs e)
{
    HttpFileCollection uploadFiles = Request.Files;
    for (int i = 0; i < uploadFiles.Count; i++)
    {
        HttpPostedFile uploadFile = uploadFiles[i];
        string fileName = Path.GetFileName(uploadFile.FileName);
        if (fileName.Trim().Length > 0)
        {
            uploadFile.SaveAs(Server.MapPath("Others/") + fileName);
        }
    }
} 
```

当第一次加载页面时，它会显示一个带有上传按钮的文件上传控件。

当我选择一个文件后，会出现一个带有名称的锚按钮附加另一个文件。

当我再次单击它时，会出现另一个文件上传控件。

就像您可能见过的 Gmail 一样。

现在我添加了一个 div id 是文件上传控件下方的进度，我希望当他们单击附加文件时，每个文件上传控件的进度条都应该像 Gmail 一样显示。

我不想要任何 jQuery 代码

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:19:14.797

这是一个有趣的解决方案[http://www.ultramegatech.com/2010/10/create-an-upload-progress-bar-with-php-and-jquery/](http://www.ultramegatech.com/2010/10/create-an-upload-progress-bar-with-php-and-jquery/)

对于快速简单的事情，请使用[http://www.uploadify.com/](http://www.uploadify.com/)

这是另一种常用方法，但同样，您的服务器需要 APC [http://www.johnboy.com/php-upload-progress-bar/](http://www.johnboy.com/php-upload-progress-bar/)

# javascript - 如何使 jQuery `bind` 或 `on` 事件处理程序具有幂等性

> ID：12322607
> 
> 赞同：3
> 
> 时间：2012-09-07T17:17:11.783
> 
> 标签：javascript, jquery, jquery-events, idempotent

有没有一种我可以调用`$(selector).bind('click', handler)`或`$(selector).on('click', handler)`多次调用的方法，以便处理程序只附加一次？

现在，我有多个具有不同成功回调的 AJAX 处理程序，每个处理程序都会在页面上重新呈现一组不同的元素。理想情况下，我想将“重新附加事件”例程重构为单个函数，而不是所有人的例程。

我现在能想到的唯一方法是显式取消绑定，例如：

```
$(selector).off('click');
$(selector).on('click', handler); 
```

寻找一种自动执行类似操作的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T17:22:21.660

更好的方法是将`.on`调用移至容器。如果您有一个容器，则该容器会`.on`保留并应用于与您的选择器匹配的任何现有或新子项：

```
$(container-selector).on("click", "element-selector", function(event){
// do stuff
}); 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

干杯。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T17:20:14.860

您可以命名您的事件处理程序，然后确保在绑定之前取消绑定：

```
$('#something').unbind("click.some-feature").bind("click.some-feature", function() { ... }); 
```

您可以编写自己的 jQuery 函数来自动执行此操作：

```
$.fn.schneiderBind = function(name, fn) {
  return this.unbind(name).bind(name, fn);
});

$('#something').schneiderBind("click", function() { ... }); 
```

或者，您可以使用冒泡和委托在 DOM 中绑定更高的位置，从而不受动态更新的影响。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-07T17:21:51.747

```
$(document).on("click","selector", function() {  code goes here... }); 
```

这将适用于动态添加的对象

# android - Android：如何将事件侦听器添加到自动建议下拉列表

> ID：12322611
> 
> 赞同：0
> 
> 时间：2012-09-07T17:17:22.830
> 
> 标签：android, autosuggest, autocompletetextview

我试图在我的应用程序的自动建议中捕获事件侦听器。我正在使用 wiki-suggest 填充列表：[http](http://en.wikipedia.org/w/api.php?action=opensearch&search=%22bike%22&limit=8&namespace=0&format=json) ://en.wikipedia.org/w/api.php?action=opensearch&search=%22bike%22&limit=8&namespace=0&format=json 。

我把所有的事情都做好了，但现在我只想单击列表中的项目并将字符串带到下一个活动。我已经通过： http: [//developer.android.com/reference/android/widget/AutoCompleteTextView.html#setOnItemClickListener](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html#setOnItemClickListener(android.widget.AdapterView.OnItemClickListener) (android.widget.AdapterView.OnItemClickListener )

但这并没有让我知道如何实现它。

我在此处粘贴我的代码以进行自动建议填充。请建议如何克服这个问题。

```
@Override
    protected String doInBackground(String... key) {
        String newText = key[0];
        newText = newText.trim();
        newText = newText.replace(" ", "+");
        try {
            HttpClient hClient = new DefaultHttpClient();
            HttpGet hGet = new HttpGet(
                    "http://en.wikipedia.org/w/api.php?action=opensearch&search="
                            + newText + "&limit=8&namespace=0&format=json");
            ResponseHandler<String> rHandler = new BasicResponseHandler();
            data = hClient.execute(hGet, rHandler);
            suggest = new ArrayList<String>();
            JSONArray jArray = new JSONArray(data);
            for (int i = 0; i < jArray.getJSONArray(1).length(); i++) {
                String SuggestKey = jArray.getJSONArray(1).getString(i);
                suggest.add(SuggestKey);
            }

        } catch (Exception e) {
            Log.w("Error", e.getMessage());
        }
        runOnUiThread(new Runnable() {
            public void run() {
                aAdapter = new ArrayAdapter<String>(
                        getApplicationContext(), R.layout.item, suggest);
                autoComplete.setAdapter(aAdapter);
                aAdapter.notifyDataSetChanged();
            }
        });

        return null;
    } 
```

* * *

这就是我从 wiki-suggest 获得新建议的方式：

```
autoComplete = (AutoCompleteTextView) findViewById(R.id.text); 
autoComplete.addTextChangedListener(new TextWatcher() { 
    public void afterTextChanged(Editable editable) {} 
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {} 

    public void onTextChanged(CharSequence s, int start, int before, int count) { 
        String newText = s.toString(); 
        new getJson().execute(newText); 
    } 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:27:06.313

**从评论更新**
你初始化的地方`autoComplete`，可能在`onCreate()`，像这样添加你的 OnItemClickListener：

```
autoComplete = (AutoCompleteTextView) findViewById(R.id.autoComplete);
autoComplete.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        String text = ((TextView) view).getText().toString();
        new getJson().execute(text);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:36:48.747

解决了。只需将整个字符串传递给 ItemClickListener 上的 URL。

# html - 指向未跳到页面顶部的锚点的链接

> ID：12322614
> 
> 赞同：0
> 
> 时间：2012-09-07T17:17:32.320
> 
> 标签：html, css

我有这样的布局：http: [//jsfiddle.net/MTWu5/](http://jsfiddle.net/MTWu5/)

居中页面，带有粘性标题。在标题内有指向页面中锚点的菜单链接。我的问题是当我点击它们时，我希望锚点在标题下方滚动，而不是在它后面。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T09:28:48.703

首先，我会这样写锚。

```
<a name="anchor" id="anchor"></a> 
```

如果你不使用 a 元素的关闭标签，则无法应用任何位置样式而不会错过所有内容。

然后我就应用了那种风格

```
#anchor{position:absolute;margin-top:-100px;} 
```

它似乎有效。您的布局被保留，没有边距。该解决方案仅在您使用固定高度时才有效。页边距顶部是标题的高度。

希望这就是你要找的。

链接到示例[jsfiddle](http://jsfiddle.net/MTWu5/8/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-07T17:37:51.337

你的问题是固定的“路径是：http: [//jsfiddle.net/MTWu5/2/](http://jsfiddle.net/MTWu5/2/)

# java - 休眠：更新子对象

> ID：12322617
> 
> 赞同：3
> 
> 时间：2012-09-07T17:17:45.260
> 
> 标签：java, hibernate

我有这样的结构：

```
// all objects have valid mapping to database
public class Child {
   private int id;
   private String name;
}
public class Parent {
   private int id;
   private String name;
   private List<Child> chidlren;
} 
```

我必须更新父 A 中的特定子 B。

有两种方法：

1.  更新集合内的子字段并更新整个对象：
    `Parent temp = dao.getParent(id);
    temp.getChildren.get(0).setName('test');
    dao.updateParent(temp);`

2.  仅更新子对象：
    `Child temp = dao.getChild(id);
    temp.setName('test');
    dao.updateChild(temp);`

如果我想获得更高的性能，哪个更好？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:02:29.220

从表面上看，我推测第二种解决方案

> 2.仅更新子对象

会更高效。

但是，定量地确定这一点的唯一方法是打开 Hibernate `show_sql`，捕获解决方案 1 和解决方案 2 的 SQL，为每个解决方案运行解释计划，然后比较生成的解释计划。

您可能会得到不同的结果，具体取决于父对象和`Parent.children`集合中的其他子对象中的其他更改/未更改。在为解释计划捕获 SQL 时，您可能想尝试不同的场景。

# cognos - Cognos 两种导入表的方式：有什么区别？

> ID：12322621
> 
> 赞同：1
> 
> 时间：2012-09-07T17:17:51.980
> 
> 标签：cognos

和有什么区别

```
'Run MetaData Wizard' --> Select Data Source 
```

和
'`Create Query Subject' --> 'Data Source' and then picking the datasource from the wizard`

它们是一样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T17:52:54.567

如果您按照上面的建议选择选项，它们是相同的。
在运行元数据向导中，您可以选择从其他 Cognos 工具或第三方应用程序导入元数据。
在创建查询主题中，您可以创建直接针对数据源进行的数据源查询。
模型查询，针对模型
和存储过程中的其他查询主题进行，映射到返回结果集的数据库存储过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T07:53:02.947

使用元数据向导，您可以在单个操作中从数据源创建多个查询源（例如导入多个表）。

# entity-framework - 缓慢迁移 EDMX 应用程序以使用 DbContext？

> ID：12322626
> 
> 赞同：3
> 
> 时间：2012-09-07T17:18:10.067
> 
> 标签：entity-framework, dbcontext, edmx

我有一个旧版 EF 4 库，其中包含数据库首先生成的带有 EntityObjects 的 ObjectContext。我想慢慢迁移到使用 DbContext 并且需要一些指导。

DbContext 的重载之一采用现有的 ObjectContext。我认为这将允许我将现有的 ObjectContext 包装在 DbContext 中，并通过 IDbSet 属性公开现有的 EntityObjects。不幸的是，在创建 DbContext 时，没有创建 IDbSet 属性，而是引发异常并显示以下消息：“验证类型是否定义为类，不是原始的、嵌套的或泛型的，并且不继承自 EntityObject。 "

有没有办法使用带有 IDbSet 的 DbContext 来公开现有的 ObjectContext 和 EntityObjects？我可以用 ObjectContext 创建一个 DbContext，但不暴露实体本身，这似乎很奇怪。

这是一些示例代码：

```
public class MyDbContext : DbContext
{
    public MyDbContext(MyObjectContext objectContext, bool dbContextOwnsObjectContext)
        : base(objectContext, dbContextOwnsObjectContext)
    {
    }

    public IDbSet<Person> People { get; set; }
} 
```

该异常是由 DbContext 试图创建 IDbSet 引起的。Person 是我现有 EDMX 中的一个 EntityObject。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:24:03.640

如您所述，您不能使用 edmx 创建的现有实体对象。

您是否考虑过使用[逆向工程师 Code First 电动工具](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)？

我在几个项目中使用过它们，它很简单，只需将它指向您的数据库，它会在同一个项目中生成模型，然后删除 edmx 文件。

# sql - 如果超过 1 个匹配项，则不返回 'unknown'

> ID：12322627
> 
> 赞同：0
> 
> 时间：2012-09-07T17:18:23.867
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我编写了一个怪物查询。我确信它可以被优化，我非常感谢关于查询本身的任何评论/指导；但是，我有一个具体问题：

我返回的数据有时会在多个列上重复：

```
+-------+------+----------+------+-------+--------+----------+-------+------+
| first | last |  deaID   | cert | count |  npi   | clientid | month | year |
+-------+------+----------+------+-------+--------+----------+-------+------+
| Alex  | Jue  | UNKNOWN  | MD   |    11 | 123123 |   102889 |     7 | 2012 |
| Alex  | Jue  | BJ123123 | MD   |    11 | 123123 |   102889 |     7 | 2012 |
+-------+------+----------+------+-------+--------+----------+-------+------+ 
```

如您所见，所有字段均相等，除了`deaID`

在这种情况下，我只想返回：

```
+------+-----+----------+----+----+--------+--------+---+------+
|      |     |          |    |    |        |        |   |      |
+------+-----+----------+----+----+--------+--------+---+------+
| Alex | Jue | BJ123123 | MD | 11 | 123123 | 102889 | 7 | 2012 |
+------+-----+----------+----+----+--------+--------+---+------+ 
```

但是，如果没有重复：

```
+-------+------+---------+------+-------+--------+----------+-------+------+
| first | last |  deaID  | cert | count |  npi   | clientid | month | year |
+-------+------+---------+------+-------+--------+----------+-------+------+
| Alex  | Jue  | UNKNOWN | MD   |    11 | 123123 |   102889 |     7 | 2012 |
+-------+------+---------+------+-------+--------+----------+-------+------+ 
```

那我想保留它！

**总结** 如果有重复删除所有记录`'deaID=unknown'`; 但是，如果只有 1 个匹配项，则返回该匹配项

**问题**如果有 1 个匹配项 ，我如何返回`unknown`记录？

这是怪物查询，以防有人感兴趣:)

```
with ctebiggie  as (

select distinct
p.[IMS_PRESCRIBER_ID],
p.PHYSICIAN_NPI as MLISNPI,
a.CLIENT_ID,
p.MLIS_FIRSTNAME,
p.MLIS_LASTNAME,
p_address.IMS_DEA_NBR,
p.IMS_PROFESSIONAL_ID_NBR,
p.IMS_PROFESSIONAL_ID_NBR_src,
p.IMS_CERTIFICATION_CODE,
datepart(mm,a.RECEIVED_DATE) as [Month],
datepart(yyyy,a.RECEIVED_DATE) as [Year]

from

MILLENNIUM_DW_dev..D_PHYSICIAN p
left outer join
MILLENNIUM_DW_dev..F_ACCESSION_DAILY a
on a.REQUESTOR_NPI=p.PHYSICIAN_NPI
left outer join MILLENNIUM_DW_dev..D_PHYSICIAN_ADDRESS p_address
on p.PHYSICIAN_NPI=p_address.PHYSICIAN_NPI

where 
a.RECEIVED_DATE is not null
--and p.IMS_PRESCRIBER_ID is not null
--and p_address.IMS_DEA_NBR !='UNKNOWN'
and p.REC_ACTIVE_FLG=1
and p_address.REC_ACTIVE_FLG=1
and DATEPART(yyyy,received_date)=2012
  and DATEPART(mm,received_date)=7

group by 
p.[IMS_PRESCRIBER_ID],
p.PHYSICIAN_NPI,
p.IMS_PROFESSIONAL_ID_NBR,
p.MLIS_FIRSTNAME,
p.MLIS_LASTNAME,
p_address.IMS_DEA_NBR,
p.IMS_PROFESSIONAL_ID_NBR,
p.IMS_PROFESSIONAL_ID_NBR_src,
p.IMS_CERTIFICATION_CODE,
datepart(mm,a.RECEIVED_DATE),
datepart(yyyy,a.RECEIVED_DATE),
a.CLIENT_ID

)
,
ctecount as 
(select
 COUNT (Distinct f.ACCESSION_ID) [count],
 f.REQUESTOR_NPI,f.CLIENT_ID,
 datepart(mm,f.RECEIVED_DATE) mm,
datepart(yyyy,f.RECEIVED_DATE)yyyy
from MILLENNIUM_DW_dev..F_ACCESSION_DAILY f

where 
 f.CLIENT_ID not in (select * from SalesDWH..TestPractices)

 and DATEPART(yyyy,f.received_date)=2012
  and DATEPART(mm,f.received_date)=7

group by f.REQUESTOR_NPI,
f.CLIENT_ID,
datepart(mm,f.RECEIVED_DATE),
datepart(yyyy,f.RECEIVED_DATE)
)

select ctebiggie.*,c.* from
ctebiggie
full outer join
ctecount c
on c.REQUESTOR_NPI=ctebiggie.MLISNPI
and c.mm=ctebiggie.[Month]
and c.yyyy=ctebiggie.[Year]
and c.CLIENT_ID=ctebiggie.CLIENT_ID 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T17:30:46.313

假设您有基本查询，我将在此结果集上按分区函数分配 row_number 和计数。然后在外部选择中，如果计数为 1，则选择未知，否则不选择。

```
SELECT first,
       last,
       deaID,
       cert,
       count,
       npi,
       clientid,
       month,
       year
  FROM (
         SELECT first,
                last,
                deaID,
                cert,
                count,
                npi,
                clientid,
                month,
                year,
                ROW_NUMBER() OVER (PARTITION BY
                                     first,last,cert,count,npi,clientid,month,year 
                                    ORDER BY CASE WHEN deaID = 'Unkown' THEN 0 ELSE 1 END,
                                       deaID) AS RowNumberInGroup,
                COUNT() OVER (PARTITION BY first,last,cert,count,npi,clientid,month,year)
                    AS CountPerGroup,
                 SUM(CASE WHEN deaID = 'Unkown' THEN 1 ELSE 0 END) 
                     OVER (PARTITION BY first,last,cert,count,npi,clientid,month,year)
                     AS UnknownCountPerGroup
           FROM BaseQuery
      ) T
 WHERE (T.CountPerGroup = T.UnknownCountPerGroup AND T.RowNumberInGroup = 1) OR T.RowNumberInGroup > T.UnknownCountPerGroup 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T17:30:08.683

看看这有没有帮助

```
select distinct main.col1,main.col2  ,
       isnull(( select col3 from table1 where table1.col1=main.col1
       and table1.col2=main.col2 and col3 <>'UNKNOWN'),'UNKNOWN')
from   table1 main 
```

[Sql fiddle 中的示例](http://sqlfiddle.com/#!3/fdae0/1/0)

或者你的公平版本将是

```
SELECT distinct first,
       last,
       cert,
       count,
       npi,
       clientid,
       month,
       year,
      isnull(
      select top 1 dealid from table1 intable where 
      intable.first=maintable.first and
      intable.last=maintable.last and
      intable.cert=maintable.cert and
      intable.npi=maintable.npi and
      intable.clientid=outtable.clientid and
      intable.month=outtable.month and
      intable.year=outtable.year
      where dealid<>'UNKNOWN'),'UNKNOWN') as dealId
FROM  table1 maintable 
```

# jquery - jQuery复选框根据复选框值禁用/启用辅助输入

> ID：12322630
> 
> 赞同：0
> 
> 时间：2012-09-07T17:18:34.480
> 
> 标签：jquery, checkbox

我有一个使用专有复选框的表单（它是一个 WordPress 插件，Contact 7，仅供参考）。有两个复选框选项，是和否。如果他们检查是，我有一个我正在启用的文本字段（我默认禁用它）。如果他们选中否，我有第二个专用复选框，其中包含我启用的 2 个框（默认情况下也是如此）。您可以推测，当用户选择是时，它还应该禁用第二个复选框。如果他们选择否，我希望文本字段返回禁用状态。

所以我有这个工作，除了它不识别更改事件；换句话说，如果我选择是，它会启用文本字段，但如果我选择否，它不会更新其他输入元素的关联状态。我必须取消选中否，然后重新选中它，以便它执行该功能。这是我的 jQuery 代码片段：

```
$(document).ready(function() {
    $('p#myTextFieldHolder input:text').val('').attr('disabled', true);
    $('#mySecondCheckBoxHolder input:checkbox').attr('disabled', true);

    $("#myCheckBoxHolder input").change(function() {

        if ($(":checked").val() == "If yes, what is the estimated closing date?") {

            $('p#myTextFieldHolder input:text').val('').attr('disabled', false);
            $('#mySecondCheckBoxHolder input:checkbox').attr('disabled', true);
        } else if ($(":checked").val() == "No:") {
            $('p#myTextFieldHolder input:text').val('').attr('disabled', true);
            $('#mySecondCheckBoxHolder input:checkbox').attr('disabled', false);
        } else {
            $('p#myTextFieldHolder input:text').val('').attr('disabled', true);
            $('#mySecondCheckBoxHolder input:checkbox').attr('disabled', true);
        }
    })
});​ 
```

关于如何解释和纠正它的任何建议？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:48:51.920

这是您要求[的示例，希望对您有所帮助](http://jsfiddle.net/mWt6Q/)

```
$(function(){
    $('#chkboxes input:checkbox').on('change', function(){
        if($(this).is(':checked'))
        {
            if($(this).attr('id')=='yes')
            {         
                $('#txt1').prop('disabled', false);
                $('#chkno input:checkbox').prop('disabled', true).prop('checked', false);
                $('#no').prop('checked', false);  
            }
            else
            {
                $('#txt1').val('').prop('disabled', true);
                $('#chkno input:checkbox').prop('disabled', false);   
                $('#yes').prop('checked', false);             
            }
        }
    });
});​ 
```

# php - jQuery弹出 - 在加载页面之前询问变量

> ID：12322632
> 
> 赞同：0
> 
> 时间：2012-09-07T17:18:38.887
> 
> 标签：php, jquery, variables, popup

在加载它所在的同一页面之前，我需要一个 jQuery 弹出窗口来询问用户一些必需的数据。

输入的数据将成为一个 php 变量，我将使用它来查询 mysql 表并预填充一些表单字段。

有什么建议吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:53:30.800

您可以对 PHP 进行 AJAX 调用并将其加载到您想要的 div 中。对于 ajax 调用，您可以使用 jquery，它确实让您的工作变得轻松。

例如：

```
 $.ajax({
    url: 'getitems.php',
    success: function(data) {
        $('#manage_inventory').html(data);
        //alert('Load was performed.');
     }
    }); 
```

就像在示例中调用 getitems.php 并获取列表并将其加载到 #manage_inventory 中一样。返回的数据可以是 XMl 或其他类型，可以根据您的需要进行解析和使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:01:01.240

您的解决方案可以像`prompt()`在 javascript 中使用一个框然后通过 ajax 传递信息一样简单

```
var stuff = prompt('Gimme Stuff');
$.ajax({
    url: 'dostuff.php',
    data: 'stuff=' + stuff,
    success: function(data) {
            //process stuff
     }
    }); 
```

# c# - 如何计算未来指定时期的日期？

> ID：12322637
> 
> 赞同：1
> 
> 时间：2012-09-07T17:18:47.497
> 
> 标签：c#, asp.net

我有这个：

```
string dataNow = DateTime.Today.tostring();
string dateAfter = dateNow + ( 20 days); 
```

如何找到 20 天后的日期？
我如何找到一个月中的天数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T17:19:37.527

您可能的意图是将日期用作日期类型`DateTime`。`ToString()`在这种情况下，在完成日期操作之前不要打电话：

```
string dataNow = DateTime.Today.AddDays(20).ToString(); 
```

[日期时间.AddDays](http://msdn.microsoft.com/en-us/library/system.datetime.adddays.aspx)

* * *

更新后：

获取当月的天数：

```
var date = DateTime.Today;
int days = DateTime.DaysInMonth(date.Year, date.Month); 
```

[日期时间.DaysInMonth](http://msdn.microsoft.com/en-us/library/system.datetime.daysinmonth.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T17:22:37.300

这应该这样做：

```
 DateTime dtNow = DateTime.Today;
    string dateNow = dtNow.ToString();
    string dateAfter = dtNow.AddDays(20).ToString();
    int DaysInTheMonth = DateTime.DaysInMonth(dtNow.Year, dtNow.Month); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T17:44:49.713

```
DateTime today = DateTime.Today;
DateTime later = today.AddDays(20);

string todayAsString = today.ToString("d");
string laterAsString = later.ToString("d");

int daysThisMonth = DateTime.DaysInMonth(today.Year, today.Month);
int daysLaterMonth = DateTime.DaysInMonth(later.Year, later.Month); 
```

# c# - 是否有可能有一个 out ParameterExpression？

> ID：12322641
> 
> 赞同：11
> 
> 时间：2012-09-07T17:19:00.207
> 
> 标签：c#, .net, linq, .net-4.0, expression-trees

我想定义一个带有`out`参数的 Lambda 表达式。有可能做到吗？

下面是我尝试过的 C# .Net 4.0 控制台应用程序的代码片段。

正如您在 Procedure25 中看到的那样，我可以使用 lambda 表达式来定义具有输出参数的委托，但是，当我想使用 linq 表达式来执行相同操作时，过程 24 中的代码失败并显示：

> System.ArgumentException 未处理 Message=“System.Boolean”类型的 ParameterExpression 不能用于“System.Boolean&”类型的委托参数 Source=System.Core

我知道我可以使用带有 bool 成员的输入类对象并以这种方式将值传递回调用者，但我很好奇是否可以以某种方式定义出参数。

谢谢

```
static void Main(string[] args)
{
  Procedure25();
  Procedure24();
  Console.WriteLine("Done!");
  Console.ReadKey();
}

private delegate int Evaluate(string value, out bool usesVars);

private static void Procedure24()
{

  // This fails to compile:
  //Expression<Evaluate> x = (string val,  out bool usesSimVals) =>
  //{
  //  usesSimVals = true;
  //  Console.WriteLine(val);
  //  return 1;
  //};

  ParameterExpression valueParameter = Expression.Parameter(typeof (string));
  MethodCallExpression methodCall = Expression.Call(typeof(Console).GetMethod("WriteLine", new Type[] { typeof(object) }), valueParameter);

  bool usesVars;
  ParameterExpression usesVarsParameter = Expression.Parameter(typeof (bool), "out usesVars");

  Expression.Lambda<Evaluate>(methodCall, valueParameter, usesVarsParameter).Compile()("test", out usesVars);
  Console.WriteLine(usesVars);

}

private static void Procedure25()
{
  Evaluate x = (string value, out bool vars) => { vars = true;
    Console.WriteLine(value);
                                                    return 1;
  };

  bool usesVars;
  x("test", out usesVars);
} 
```

编辑：

阿尼，太棒了，谢谢。所以关键是在参数类型上调用 MakeByRefType。

为了记录，这里是一个基于 Ani 建议的代码片段：

```
private static void Procedure24()
{
  ParameterExpression valueParameter = Expression.Parameter(typeof (string));
  MethodCallExpression methodCall = Expression.Call(typeof(Console).GetMethod("WriteLine", new Type[] { typeof(object) }), valueParameter);

  bool usesVars;
  ParameterExpression usesVarsParameter = Expression.Parameter(typeof (bool).MakeByRefType(), "out usesVars");

  Expression block = Expression.Block(methodCall, Expression.Assign(usesVarsParameter, Expression.Constant(true)), Expression.Constant(1));
  int result = Expression.Lambda<Evaluate>(block, valueParameter, usesVarsParameter).Compile()("test", out usesVars);
  Console.WriteLine("Result={0}, usesVars={1}", result, usesVars);

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T17:28:02.513

你需要[`Type.MakeByRefType`](http://msdn.microsoft.com/en-us/library/system.type.makebyreftype.aspx)：

```
var usesVarsParameter = Expression.Parameter(typeof(bool).MakeByRefType(), "usesVars"); 
```

请注意，您的代码示例还有一个问题：您的表达式主体不正确 - 当它应该返回`int`满足委托类型的返回类型时，它没有返回值。

这是一种可以解决此问题的方法（例如您的 lambda 示例）：

```
var body = Expression.Block(methodCall, Expression.Constant(1));

Expression.Lambda<Evaluate>(body, valueParameter, usesVarsParameter)
          .Compile()("test", out usesVars); 
```

另请注意，您没有`out`在表达式中分配参数。`Expression.Lambda`是让你侥幸逃脱，这是我没想到的，但是，嘿，BCL 不必遵循与 C# 相同的规则！

# java - Java，数组值的getter（动态定义的数组）

> ID：12322642
> 
> 赞同：2
> 
> 时间：2012-09-07T17:19:04.590
> 
> 标签：java, arrays, object, inheritance

我有一系列`String[]`数组，它们是单词列表。就像是：

```
String[] ListOne = new String[100];
String[] ListTwo = new String[100];
/*And so on with other lists */

ListOne[0] = "word00";
ListOne[1] = "word01";
/*And so on till*/
ListLast[99] = "word 99 from last list"; 
```

现在我想要每个列表的函数，给定一个数字返回相应的元素（单词）：

```
public String GetFromListOne(int key) { return ListOne[key];} 
```

有没有办法避免手动编写每个 getter 函数？

例如，在 PHP 中，我只会使用魔法方法`__call`，
或者作为参数与列表名称一起传递并动态引用它。

有没有办法在 Java 中做类似的事情？
或者是实现相同结果的替代策略？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T17:25:46.803

你应该研究继承。

您基本上必须做的是定义一个接口（或扩展一个 List 类）

```
 public interface ListTest{
//**Gets keys from lists*//
GetFromListOne(int key);
} 
```

然后

```
public class Listone implements ListTest{

/** methods **//
GetFromListOne(int key);
/** methods **//
} 
```

玩得开心 展开

[http://docs.oracle.com/javase/tutorial/java/IandI/createinterface.html](http://docs.oracle.com/javase/tutorial/java/IandI/createinterface.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T17:27:50.557

您可以使用二维数组或数组列表，并让您的函数采用 2 个参数。一个用于您想要的数组，另一个用于数组中的元素。

二维数组：

```
String[][] ListN = new String[100,100];

String getFromList(int n, int key) {
    return ListN[n][key];
} 
```

或数组列表：

```
List<String[]> listOfArrays = new ArrayList<String[]>();
listOfArrays.add(new String[100]);
listOfArrays.add(new String[100]);

String getFromList(int n, int key) {
    return listOfArrays.get(n)[key];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T17:23:21.873

你能有一个函数将键和列表号作为输入：

```
public String GetFromListOne(int list, int key) {
    switch(list):
       case 1:
           return ListOne[key];
           break;
       case 2:
           return ListTwo[key];
           break;
       ...
} 
```

甚至更好地制作一个数组数组：

```
String[][] ListOfLists = new String[10];
ListOfLists[0] = new String[100];
...

public String GetFromList(int list, int key) {
    return ListOfLists[list][key];
} 
```

否则我不知道像 __call 这样可以覆盖的函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T17:35:43.350

基于`__call`PHP 方法，您可以通过实现接收列表和索引的方法来实现这一点，并且使用泛型您可以获得类似的东西。

```
public class Utility {
    public <T> T getElementFromArray(T[] array, int index) {
        if (index >= array.length || index < 0) return null;
        return array[index];
    }
} 
```

这种方法的缺陷是不能用于原始数组持有者，例如`int[]`. 这些情况的解决方案是使用原始类型的包装类。

```
public static void main(String[] args) {
    Utility u = new Utility();
    String[] ss = new String[2];
    ss[0] = "Hello";
    ss[1] = "world!";
    System.out.println(u.getElementFromArray(ss, 0));
    System.out.println(u.getElementFromArray(ss, 1));
    int[] ii = new int[2];
    ii[0] = 5;
    System.out.println(u.getElementFromArray(ii, 0)); //compile error
    //Solution: use wrapper classes
    Integer[] ii2 = new Integer[2];
    ii2[0] = 5;
    System.out.println(u.getElementFromArray(ii2, 0));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T17:38:37.803

```
 String[] ListFour=new String[100];
   String[] ListTwentyThree=new String[100];
   String[] ListNine=new String[100];
   String[] ListOne=new String[100];

   Hashtable<Integer,String[]> yourlist=new Hashtable<Integer,String[]>();      
   yourlist.put(4, ListFour);
   yourlist.put(23, ListTwentyThree);
   yourlist.put(9, ListNine);
   yourlist.put(1, ListOne);
   System.out.println(yourlist.get(4)[5]);//fifth string in ListFour
   System.out.println(yourlist.get(23)[51]);//fifty first string in List23
    System.out.println(yourlist.get(9)[1]);//first stringin ListNine 
```

另一个版本：

```
 Hashtable<Object,String[]> yourlist=new Hashtable<Object,String[]>();        
   yourlist.put("two multiplied by two", ListFour);
   yourlist.put(23, ListTwentyThree);
   yourlist.put(0.03, ListNine);
   yourlist.put(true, ListOne);
   System.out.println(yourlist.get("two multiplied by two")[5]);//fifth string in ListFour
   System.out.println(yourlist.get(23)[51]);//fifty first string in List23
    System.out.println(yourlist.get(true)[1]);//first stringin ListNine 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T17:41:51.213

试试这个代码

```
List<String[]> lists = new ArrayList<String[]>();

public String getFromLists(int key) {
  List<String> res = new ArrayList<String>();
  for (String[] s: lists){
      res.add(s[key]);
  }    
  return res.get(key);
} 
```

或更好

```
public String getFromLists(int key) {
  return lists.get(key)[key];
} 
```

# sql - 不一致的插入结果PLSQL

> ID：12322644
> 
> 赞同：0
> 
> 时间：2012-09-07T17:19:13.373
> 
> 标签：sql, plsql, oracle10g

我有一个查询，如下所示：

```
TRUNCATE TABLE DNARTLOAD;
COMMIT;

.... <Cursor here> .... <do something>.....

tmp_future_phaseA := substr(tmp_phases,1,1);
tmp_future_phaseB := substr(tmp_phases,2,1);
tmp_future_phaseC := substr(tmp_phases,3,1);

INSERT INTO DNARTLOAD (LOADNAME,KVARATING,PHASE,FULLPHASE) VALUES 
(tmp_load_name, tmp_kvarating, tmp_future_phaseA, tmp_phase); 
```

问题是查询每次都无法正确插入 tmp_phases。我正在做的是获取临时阶段的子字符串（从不为空）并将第一个、第二个和第三个字符分配给另一组 varchar 变量。分配它们后，我将数据插入到表中并提交。问题是它并不总是有效。它总是会用一个字符填充 tmp_future_phaseA、B 和 C，但是当我插入 tmp_phase 时，它​​有时会填充 null，有时会填充值。

示例数据：

```
tmp_phase = 'ABC'

tmp_futurephaseA = 'A'

tmp_futurephaseB = 'B'

tmp_futurephaseC = 'C' 
```

有时我会得到以下信息：

```
A  'ABC'

B 'ABC'

C 'ABC' 
```

在同一 plsql 中的其他时间，我将得到以下信息：

```
A NULL

B NULL

C NULL 
```

编辑：添加问题：

```
LOOP
    tmp_future_phaseA := NULL;
    tmp_future_phaseB := NULL;
    tmp_future_phaseC := NULL;
    tmp_phases := NULL;

    FETCH C3 INTO tmp_load_name, tmp_kvarating, tmp_phases;
    EXIT WHEN C3%NOTFOUND;

IF LENGTH(tmp_phases) = 3 THEN
  tmp_kvarating := tmp_kvarating / 3;
END IF;

IF LENGTH(tmp_phases) = 2 THEN
  tmp_kvarating := tmp_kvarating /2;
END IF;

tmp_future_phaseA := substr(tmp_phases,1,1);
tmp_future_phaseB := substr(tmp_phases,2,1);
tmp_future_phaseC := substr(tmp_phases,3,1);

IF tmp_future_phaseA IS NOT NULL THEN
  INSERT INTO DNARTLOAD (LOADNAME,KVARATING,PHASE) VALUES (tmp_load_name, tmp_kvarating, tmp_future_phaseA);
END IF;

IF tmp_future_phaseB IS NOT NULL THEN
  INSERT INTO DNARTLOAD (LOADNAME,KVARATING,PHASE) VALUES (tmp_load_name, tmp_kvarating, tmp_future_phaseB);
END IF;

IF tmp_future_phaseC IS NOT NULL THEN
  INSERT INTO DNARTLOAD (LOADNAME,KVARATING,PHASE) VALUES (tmp_load_name, tmp_kvarating, tmp_future_phaseC);
END IF; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T21:13:01.423

> “有时我会得到以下信息：......在同一个 plsql 中的其他时候，我会得到以下信息：”

有时您的程序有效，有时则无效。这意味着您有*数据*问题。

更准确地说，您编写了一个程序，该程序可以正确处理某些州的数据，但不能正确处理其他州的数据。我们绝对无法诊断出这种情况。

所以，你需要做的是*调试你的代码*。如果您有一个合适的 IDE，应该为您提供调试工具。否则，您将需要使用 DBMS_OUTPUT 之类的东西来显示循环中每次行程的输入和后续结果，以便您了解您的程序未正确处理哪些值。

# cuda - Cuda：追逐资源不足的问题

> ID：12322648
> 
> 赞同：2
> 
> 时间：2012-09-07T17:19:31.157
> 
> 标签：cuda

内核使用： ( `--ptxas-options=-v`)
0 字节堆栈帧，0 字节溢出 sotes，0 字节溢出加载
ptxas 信息：使用 45 个寄存器，49152+0 字节 smem，64 字节 cmem[0]，12 字节 cmem[16]

启动：`kernelA<<<20,512>>>(float parmA, int paramB);`它会运行良好。
使用：启动，`kernelA<<<20,513>>>(float parmA, int paramB);`它会出现资源不足错误。（启动请求的资源过多）。

Fermi 设备属性：每个 SM 48KB 共享内存，64KB 常量内存，每个 SM 32K 寄存器，每个块最多 1024 个线程，comp 能力 2.1 (sm_21)

我正在使用我所有的共享内存空间。我将用完大约 700 个线程/块的块寄存器空间。如果我要求超过一半的 MAX_threads/block 数，内核将不会启动。这可能只是巧合，但我对此表示怀疑。

1.  为什么我不能使用完整的线程块 (1024)？
2.  猜猜我用完了哪个资源？
3.  我经常想知道停滞的线程数据/状态在扭曲之间去哪里。什么资源拥有这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T21:26:30.607

当我进行注册计数时，我注释掉了 printf 的。Reg count= 45
当它运行时，它已经对 printf 进行了编码。注册数 = 63 w/大量溢出“注册”。
我怀疑每个线程确实有 64 个 reg，程序只有 63 个可用。
64 reg * 512 个线程 = 32K - 单个块可用的最大值。

因此，我建议将可用“代码” reg 的数量设置为 block = cudaDeviceProp::regsPerBlock - blockDim，即内核无法访问所有 32K 寄存器。编译器当前将每个线程的 reg 数限制为 63，（或者它们溢出到 lmem）。我怀疑这 63 是硬件寻址限制。

所以看起来我的寄存器空间用完了。

# jquery - Ruby on Rails 中的 JavaScript 弹出窗口，可在当前页面上加载数据并更改 URL，例如 Pinterest

> ID：12322652
> 
> 赞同：-1
> 
> 时间：2012-09-07T17:19:50.883
> 
> 标签：jquery, ruby-on-rails

我想在当前页面上创建一个 JavaScript 弹出窗口，因此当单击链接时，它会打开弹出窗口、加载数据并显示它，并在不刷新页面的情况下更改 URL，因此后退按钮仍然有效。我在 Rails 和 jQuery 上使用 ruby​​。

我不完全确定让它工作的整个过程。我还希望弹出窗口有一个加载动画 gif（我已经有图像本身），直到加载弹出窗口的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:23:38.003

尝试[pjax gem](https://github.com/defunkt/jquery-pjax)。我认为这对你来说是特别的宝石:)

# playframework - play 2.0 模板中的条件标签

> ID：12322658
> 
> 赞同：5
> 
> 时间：2012-09-07T17:20:31.507
> 
> 标签：playframework, playframework-2.0

我有一个带有参数的模板

```
@(title: Html, topbar: Html, nav: String = "")(content: Html) 
```

我使用@title 标签来设置页面的标题和页眉，即：

```
<div class="header">
<h1>@title</h1> 
</div> 
```

但是，有些页面我不想在其中添加页眉/标题，所以我将它们留空并尝试：

```
@if(title != {}){
    <div class="header">
    <h1>@title</h1> 
    </div>
} 
```

但这不起作用..我将如何实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T17:31:02.380

您可以在控制器中传递`null`值，在不应该使用的操作中`title`，然后检查是否`title != null`

```
@if(title != null){
    <div class="header">
    <h1>@title</h1> 
    </div>
} 
```

# vim - Vim 语法区域有序或无序地相互接续

> ID：12322659
> 
> 赞同：1
> 
> 时间：2012-09-07T17:20:34.907
> 
> 标签：vim, syntax-highlighting, vim-syntax-highlighting

我已经问过一个关于语法高亮的问题，但这似乎（对我来说）有所不同，我在 Stackoverflow 中找不到答案。

1) 假设我想在 Vim 中建立一个 Todo 列表。此待办事项列表应该有任务 + 3 个不同突出显示的“区域”：

*   任务（例如洗车），总是在开始，应该保持简单的非高亮文本
*   必须做那件事的人——我自己——前面是@。我希望它以（例如）绿色突出显示
*   任务的类别 - 这里是家庭 - 以§开头。我希望它是黄色的
*   任务的重要性——这里稍后——，前面是我要红色的#。

因此结果应该是（一行）：

> 洗车@myself（绿色）§Household（黄色）#Later（红色）

我试图定义第一个以@开头，以§结尾的区域，第二个以§开头并以#结尾的区域，以及第三个以#开头并以$结尾的区域。

```
:syntax region xPers start ='@' end='§'
hi xPers ctermfg=DarkGreen
:syntax region xProject start ='§' end='#'
hi xProject ctermfg=DarkYellow
:syntax region xImportance start ='#' end='$'
hi xImportance ctermfg=DarkRed 
```

无济于事......任务本身之后的所有指示，以@开头，都以绿色突出显示。

我的（不可原谅的）错误是什么？

2）为了让事情更复杂，我可能会乱写任务，写：

> 洗车@myself（绿色）#Later（红色）§Household（黄色）

应该如何定义语法以考虑到这种缺乏纪律性并保持颜色正确？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:55:07.627

您可能想查看[Todo.txt](http://todotxt.com/)和 Todo.txt 的 vim[语法文件](https://github.com/davidoc/todo.txt-vim/blob/master/syntax/todotxt.vim)。但是，根据您的问题，您似乎想以空格而不是符号结尾。所以你可以这样做：

```
syntax region xPers start ='@' end=' '
hi xPers ctermfg=DarkGreen
syntax region xProject start ='§' end=' '
hi xProject ctermfg=DarkYellow
syntax region xImportance start ='#' end=' '
hi xImportance ctermfg=DarkRed 
```

但是，这不会说明一行的结尾。因此，您可以在该行的末尾放置一个“或”语句，如下所示：

```
syntax region xPers start ='@' end=' \|$'
hi xPers ctermfg=DarkGreen
syntax region xProject start ='§' end=' \|$'
hi xProject ctermfg=DarkYellow
syntax region xImportance start ='#' end=' \|$'
hi xImportance ctermfg=DarkRed 
```

# flash - 跟踪从 Flash as2 中的文本文件加载的变量时，我得到未定义的值

> ID：12322661
> 
> 赞同：0
> 
> 时间：2012-09-07T17:20:56.853
> 
> 标签：flash, variables, actionscript-2, undefined

我正在使用 Swishmax 4，我想从 flash 的外部 txt 文件中加载一个变量。
我创建了一个动态文本来加载我的变量。它运行良好，但是当我想跟踪变量时，我得到一个*undefined value*。这是我的代码：

**文件.txt**

```
&cont=data 
```

**代码**

```
onFrame (1) {
    this.loadVariables("file.txt");
    trace(cont); // i get an undefined value here
} 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:13:12.640

您不指定该 file.txt 的内容是什么，也不指定它是否与 swf 本身位于同一文件夹中。但是，您应该始终考虑到，加载过程需要一些时间，因此您不应该期望该代码可以在远程服务器上工作（至少，不是第一次运行 swf 文件时）。如何确定文件在第 0 帧（onLoad 事件）之前加载？事实上你不能。在第二个脚本中，您稍后尝试访问数据，因此很可能数据已被加载。

因此，您必须找到一种方法来确保文件加载正常，并且您有两种方法可以做到这一点：使用 loadVars 类（推荐）或使用 file.txt 本身中的另一个变量并检查其值是否已定义或不。第二种方法的一个例子可能是：

**文件 txt**

```
&myVar=Hello World!!&
&yourVar=finally there!!&
&yourAge=24&
&loadedDone=1& 
```

**sw码：**

```
onSelfEvent(load){
  this.loadVariables("file.txt");
}
onFrame(2){
  if(loadedDone!= 1)prevFrameAndPlay(); // Wait till the file is loaded
}
onFrame(3){!!
  // Once the data is loaded, display variable values!!
  trace(myVar);
  trace(yourVar);
  trace(yourAge);
} 
```

但是这个方法有个问题，如果没有定义变量**loadeDone**或者file.txt不存在，你的swi文件就会陷入死**循环**。因此，您最好尝试 loadVars 类或为此目的使用 XML。

问候， cancrexo

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:14:11.157

我真的不知道为什么，但我将脚本修改为此并正确调试

```
onSelfEvent (load) {
    this.loadVariables("file.txt");
}
onFrame (3) {
    trace(cont);
} 
```

# bash - bash 脚本：将脚本参数的子集传递给命令

> ID：12322666
> 
> 赞同：1
> 
> 时间：2012-09-07T17:21:25.547
> 
> 标签：bash, shell

我对 shell 脚本很陌生，所以这让我有点困惑，我似乎找不到解决方案。假设我有一个可以接受多个参数的 shell 脚本。为了举例，我可以这样称呼它：

myscript -a valA -b valB -c valC -d valD 一些/目录

现在，其中一些参数用于我的脚本本身，而其他参数用于将在我的脚本中调用的命令。因此，对于这种情况，-a、-d 和目录用于我的脚本，其他所有内容都用于命令。所以我想做这样的事情：

```
args=''

if [ $# == 0 ]
then
    echo "No arguments found!"
    exit 1
fi

while [ "$2" ]
do
    if [ $1 == '-a' ]
    then
        #some process here
        shift 2
    elif [ $1 == '-d' ]
    then
        #some process here
        shift 2
    else
        #add the argument to args
        shift
    fi
done
directory=$1

for file in $directory/*.txt
do 
    #call 'someCommand' here with arguments stored in args + $file
done 
```

我试过做

```
args="$args $1" 
```

然后调用命令做

```
someCommand "$args $file" 
```

但是， someCommand 似乎认为整个事情是一个单一的论点。

另外，如果您发现我的脚本的其余部分有任何问题，请随时指出。它似乎有效，但我很可能会错过一些极端情况或做一些可能导致意外行为的事情。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:43:12.590

只需删除引号：

```
someCommand $args "$file" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T17:25:20.283

使用数组。

```
newargs=()
newargs+="-9"
newargs+="$somepid"
kill "${newargs[@]}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T10:24:15.617

使用`set`：

从[set man page](http://linuxmanpages.com/man1/cd.1.php) : *如果没有选项，每个 shell 变量的名称和值都以可以重用作为输入的格式显示。输出根据当前语言环境进行排序。指定选项时，它们会设置或取消设置 shell 属性。处理选项后剩余的任何参数都被视为位置参数的值，并按顺序分配给 $1, $2, ... $n。*

```
args=''

if [ $# == 0 ]
then
    echo "No arguments found!"
    exit 1
fi

while [ "$2" ]
do
    if [ $1 == '-a' ]
    then
        echo "Consuming $1 $2"
        shift 2
    elif [ $1 == '-d' ]
    then
        echo "Consuming $1 $2"
        shift 2
    else
        args="$args $1"
        shift
    fi
done
directory=$1

# *** call set here ***
set "$args"

for file in $directory/*.txt
do 
    # refer to the parameters using $@
    someCommand $@ $file
done 
```

# php - PHP升级后比较失败

> ID：12322667
> 
> 赞同：0
> 
> 时间：2012-09-07T17:21:27.543
> 
> 标签：php, if-statement, include, php4

此代码曾经在 PHP4 的早期版本中工作，但现在托管服务器已升级到 PHP5，因此不再在我的网站上工作。有什么简单的方法可以更改此代码以使其再次工作？

```
<?
if ($info == "file1") {include ("file1.html");}
if ($info == "file2") {include ("file2.html");}
if ($info == "file3") {include ("file3.html");}
if ($info == "file4") {include ("file4.html");}
if ($info == "file5") {include ("file5.html");}
?> 
```

编辑：是的，这是我在最终网站上的代码（这里不是 PHP 专业人士）。我只是在一个简单的链接中调用“$info= **_ *”（我想返回 www.website.com/?info=file***），即：

```
<a href="?info=file1">Click here to read File 1</a> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T17:25:57.290

如果这是实际代码，则您的问题是在`<?`PHP 块的开头使用短标签。PHP5 默认不再支持这些。而是使用

```
<?php ...code here... ?> 
```

或者，您可以要求您的提供商在 php.ini 中设置“short_open_tag”选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T23:24:11.173

根据您的编辑，问题似乎在于您[`register_globals`](http://php.net/manual/en/security.globals.php)在 php.ini 文件中使用旧版本的 php。

`register_globals`提取所有全局变量，以便在您通常使用的地方`$_GET['info']`，使用`register_globals`on，您可以简单地使用`$info`.

此功能在 php 5.3 中已弃用，并从 php 5.4 中删除，因为它会带来巨大的安全风险。

要解决您的问题，您可以在条件之前设置变量：

```
$info = $_GET['info'];
if ($info == "file1") {include ("file1.html");}
... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T17:25:40.973

默认情况下，`<? ?>`不启用短标签。

在不知道您的错误的情况下，尝试使用`<?php`而不是`<?`

**更新**：由于您显然包含带有短打开标签的页面，因此在您的调用页面中，您可以调用：

```
ini_set('short_open_tag', '1'); 
```

我怀疑您的服务提供商会为您设置短开放标签属性。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-07T17:24:27.133

你的代码有错误。改变这个：

```
if ($info == "file5") {include ("file5html");} 
```

对此：

```
if ($info == "file5") {include ("file5.html");} 
```

# python - Jenkins python api认证“403禁止”

> ID：12322668
> 
> 赞同：2
> 
> 时间：2012-09-07T17:21:37.680
> 
> 标签：python, jenkins, urllib2

我正在尝试使用[jenkinsapi python 库](http://pypi.python.org/pypi/jenkinsapi)与 Jenkins 一起工作。我的 Jenkins 设置为使用 LDAP 进行身份验证（使用[Active Directory Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Active+Directory+plugin)）。但是，当我运行我的脚本进行身份验证时，我失败了（实际上它运行了一次，但从那以后我每次都收到 403 Forbidden 错误）

它从一开始就失败了：

```
from jenkinsapi.jenkins import Jenkins
j = Jenkins("https://qaa.server.com/jenkins", "username", "password")

Traceback (most recent call last):
  File "C:\eclipse-SDK-4.2-win32-x86_64\eclipse\plugins\org.python.pydev_2.6.0.2012062818\pysrc\pydevd.py", line 1392, in <module>
    debugger.run(setup['file'], None, None)
  File "C:\eclipse-SDK-4.2-win32-x86_64\eclipse\plugins\org.python.pydev_2.6.0.2012062818\pysrc\pydevd.py", line 1085, in run
    pydev_imports.execfile(file, globals, locals) #execute the script
  File "C:\work\selenium-project\ses-web\utils\mark_slave_offline.py", line 10, in <module>
    j = Jenkins("https://qaa.server.com/jenkins", "username", "password")
  File "C:\Python27\lib\site-packages\jenkinsapi-0.1.11-py2.7.egg\jenkinsapi\jenkins.py", line 43, in __init__
    JenkinsBase.__init__(self, baseurl, formauth=formauth)
  File "C:\Python27\lib\site-packages\jenkinsapi-0.1.11-py2.7.egg\jenkinsapi\jenkinsbase.py", line 34, in __init__
    self.poll()
  File "C:\Python27\lib\site-packages\jenkinsapi-0.1.11-py2.7.egg\jenkinsapi\jenkinsbase.py", line 41, in poll
    self._data = self._poll()
  File "C:\Python27\lib\site-packages\jenkinsapi-0.1.11-py2.7.egg\jenkinsapi\jenkinsbase.py", line 45, in _poll
    return retry_function(self.RETRY_ATTEMPTS , self.get_data, url)
  File "C:\Python27\lib\site-packages\jenkinsapi-0.1.11-py2.7.egg\jenkinsapi\utils\retry.py", line 39, in retry_function
    raise e
urllib2.HTTPError: HTTP Error 403: Forbidden 
```

有趣的是，**以下代码*每次都能***正常工作：

```
def urlopen(url,username=None, password=None, data=None):
    '''Open a URL using the urllib2 opener.'''
    request = urllib2.Request(url, data)
    base64string = base64.encodestring('%s:%s' % (username, password)).replace('\n', '')
    request.add_header("Authorization", "Basic %s" % base64string)
    response = urllib2.urlopen(request)
    return response

result = urlopen('https://qaa.server.com/jenkins', "username", "password") 
```

问题：为什么 Jenkins 代码会失败？会不会是apache服务器配置错误？

谢谢！

**更新：**这就是我得到的回应

```
<html>
    <head>
        <meta http-equiv='refresh' content='1;url=/jenkins/loginfrom=%2Fjenkins%2Fapi%2Fpython%2F'/>
        <script>window.location.replace('/jenkins/login?from=%2Fjenkins%2Fapi%2Fpython%2F');
        </script>
    </head>
<body style='background-color:white; color:white;'>Authentication required</body>
</html> 
```

Apache 访问日志：`- [07/Sep/2012:15:24:21 -0400] "GET /jenkins/api/python/ HTTP/1.1" 403 593`

更新：调试模式下的error.log：

```
.....
[Fri Sep 07 16:52:09 2012] [debug] ssl_engine_io.c(1897): OpenSSL: read 160/160 bytes from BIO#e08150 [mem: e96ea5] (BIO dump follows)
[Fri Sep 07 16:52:09 2012] [debug] ssl_engine_io.c(1830): +-------------------------------------------------------------------------+
[Fri Sep 07 16:52:09 2012] [debug] ssl_engine_io.c(1869): | 0000: 64 c2 ac 70 d0 d6 22 02-ef 56 98 32 6e 16 20 53  d..p.."..V.2n. S |
[Fri Sep 07 16:52:09 2012] [debug] ssl_engine_io.c(1869): | 0010: 84 fb 94 c7 51 a4 a8 9c-b3 8f 48 c8 84 1e 46 6b  ....Q.....H...Fk |
[Fri Sep 07 16:52:09 2012] [debug] ssl_engine_io.c(1869): | 0020: 15 c9 f4 cb ef cf 38 ed-a1 8b 41 08 a6 3b 95 f0  ......8...A..;.. |
[Fri Sep 07 16:52:09 2012] [debug] ssl_engine_io.c(1869): | 0030: bd b3 05 ef 68 68 e0 fb-52 92 ad fc 7f aa 72 50  ....hh..R.....rP |
[Fri Sep 07 16:52:09 2012] [debug] ssl_engine_io.c(1869): | 0040: 9e d9 7d 98 18 82 eb 07-bb 45 e3 e5 b2 93 6d 34  ..}......E....m4 |
[Fri Sep 07 16:52:09 2012] [debug] ssl_engine_io.c(1869): | 0050: fe 18 b5 d4 5c c9 78 c9-78 0c 6b cb 50 80 96 6d  ....\\.x.x.k.P..m |
[Fri Sep 07 16:52:09 2012] [debug] ssl_engine_io.c(1869): | 0060: 49 8a 39 b2 73 b2 ae 76-a4 d3 50 7a 38 a7 54 72  I.9.s..v..Pz8.Tr |
[Fri Sep 07 16:52:09 2012] [debug] ssl_engine_io.c(1869): | 0070: 41 e5 13 b2 1f 71 a1 b0-db 89 81 4f 14 3a 93 18  A....q.....O.:.. |
[Fri Sep 07 16:52:09 2012] [debug] ssl_engine_io.c(1869): | 0080: 5a e0 0e 9e c9 d9 1e f3-01 53 eb 08 dc 23 89 fd  Z........S...#.. |
[Fri Sep 07 16:52:09 2012] [debug] ssl_engine_io.c(1869): | 0090: a0 13 81 ac 26 55 54 fd-22 64 7e 37 f3 cd 2d af  ....&UT."d~7..-. |
[Fri Sep 07 16:52:09 2012] [debug] ssl_engine_io.c(1875): +-------------------------------------------------------------------------+
[Fri Sep 07 16:52:09 2012] [info] Initial (No.1) HTTPS request received for child 63 (server qaa.server.com:443)
[Fri Sep 07 16:52:09 2012] [debug] mod_proxy_http.c(56): proxy: HTTP: canonicalising URL //localhost:8180/jenkins/api/python/
[Fri Sep 07 16:52:09 2012] [debug] proxy_util.c(1506): [client 207.***.***.1*2] proxy: http: found worker http://localhost:8180/jenkins for http://localhost:8180/jenkins/api/python/
[Fri Sep 07 16:52:09 2012] [debug] mod_proxy.c(1015): Running scheme http handler (attempt 0)
[Fri Sep 07 16:52:09 2012] [debug] mod_proxy_http.c(1973): proxy: HTTP: serving URL http://localhost:8180/jenkins/api/python/
[Fri Sep 07 16:52:09 2012] [debug] proxy_util.c(2011): proxy: HTTP: has acquired connection for (localhost)
[Fri Sep 07 16:52:09 2012] [debug] proxy_util.c(2067): proxy: connecting http://localhost:8180/jenkins/api/python/ to localhost:8180
[Fri Sep 07 16:52:09 2012] [debug] proxy_util.c(2193): proxy: connected /jenkins/api/python/ to localhost:8180
[Fri Sep 07 16:52:09 2012] [debug] proxy_util.c(2444): proxy: HTTP: fam 2 socket created to connect to localhost
[Fri Sep 07 16:52:09 2012] [debug] proxy_util.c(2576): proxy: HTTP: connection complete to 127.0.0.1:8180 (localhost)
[Fri Sep 07 16:52:09 2012] [debug] mod_proxy_http.c(1743): proxy: start body send
[Fri Sep 07 16:52:09 2012] [debug] mod_proxy_http.c(1847): proxy: end body send
[Fri Sep 07 16:52:09 2012] [debug] proxy_util.c(2029): proxy: HTTP: has released connection for (localhost)
[Fri Sep 07 16:52:09 2012] [debug] ssl_engine_kernel.c(1884): OpenSSL: Write: SSL negotiation finished successfully
[Fri Sep 07 16:52:09 2012] [info] [client 207.***.***.1*2] Connection closed to child 63 with standard shutdown (server qaa.server.com:443) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T13:03:41.010

这个问题的解决方案是使用不同[的 python-jenkins 模块](http://packages.python.org/python-jenkins/)

使用此模块一切正常：

```
import jenkins
j = jenkins.Jenkins(base_url, username, password) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T22:54:36.307

由于利用了`jenkinsapi`杠杆作用`urllib2`，您可以使用开启程序来处理身份验证。

看到这个答案：[https ://stackoverflow.com/a/24048578/1733117](https://stackoverflow.com/a/24048578/1733117)

# r - Knitr 块正在将 *.csv 中的记录子集作为 R 中的相同代码导入

> ID：12322678
> 
> 赞同：4
> 
> 时间：2012-09-07T17:22:42.627
> 
> 标签：r, knitr

Rstudio 版本 0.96.331 和 knitr 版本 0.8

我认为我的问题已经通过更新 RStudio 和库得到了解决......但是：

R 中的以下运行为我提供了 940 个唯一的 Table.ID 值。在 knitr 块中运行，我得到 228 个唯一值和以下警告：

“在输入连接上发现无效输入‘ [http://www2.census.gov/acs2010_5yr/summaryfile/Sequence_Number_and_Table_Number_Lookup.txt](http://www2.census.gov/acs2010_5yr/summaryfile/Sequence_Number_and_Table_Number_Lookup.txt) ’

我不明白为什么这两种方法之间存在区别。

```
Sequence <- read.csv("http://www2.census.gov/acs2010_5yr/summaryfile/Sequence_Number_and_Table_Number_Lookup.txt",
                   stringsAsFactors=FALSE)
unique(Sequence$Table.ID) 
```

![在此处输入图像描述](../Images/6d59698244a40cf8ff609b1a85d73ee0.png) ![在此处输入图像描述](../Images/436e53502674e9f068a4e4d914944bb6.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T18:10:18.890

在 Rstudio 版本`0.96.331`和 knitr 版本上运行良好`0.8`

我的`.Rmd`文件：

```
 knitr test for length
        ========================================================
        This should successfully return a length of 940

    ```{r}
    Sequence <- read.csv("http://www2.census.gov/acs2010_5yr/summaryfile/Sequence_Number_and_Table_Number_Lookup.txt", 
fileEncoding = "iso8859-8", stringsAsFactors = FALSE)
    length(unique(Sequence$Table.ID))
    ``` 
```

结果是：

![在此处输入图像描述](../Images/f7f739a05bd41b87b1e71f955f5ef12f.png)

# sql - 从多个表中获取总和

> ID：12322682
> 
> 赞同：2
> 
> 时间：2012-09-07T17:23:22.810
> 
> 标签：sql, sql-server, tsql, sum

我在单个 SQL 语句中从多个表中提取总和时遇到问题。

我有三个表 tblCases、tblTimesheetEntries 和 tblInvoices tblCases 和其他两个表之间存在一对多的关系。

我目前正在使用以下 SQL 语句

```
SELECT c.CaseNo, SUM(i.InvFees), SUM(t.Fees)
FROM tblCases AS c
INNER JOIN tblInvoices AS i ON c.CaseNo = i.CaseNo
INNER JOIN tblTimesheetEntries AS t ON c.CaseNo = t.CaseNo
GROUP BY c.CaseNo
ORDER BY c.CaseNo; 
```

但是，这似乎重复了发票金额。例如，如果一个案例只有一张发票，但说有 4 个时间表条目，它会计算 4 x 发票金额作为该表的总和。

如果我将分组取出并运行以下 SQL：

```
SELECT c.CaseNo, i.InvFees, t.Fees
FROM tblCases AS c
INNER JOIN tblInvoices AS i ON c.CaseNo = i.CaseNo
INNER JOIN tblTimesheetEntries AS t ON c.CaseNo = t.CaseNo    
ORDER BY c.CaseNo; 
```

我可以看到这是因为发票金额在所有 4 行中重复，例如

```
Case 1001,  Inv 001  950.00,  TimeFees  250.00
Case 1001,  Inv 001  950.00,  TimeFees  175.00
Case 1001,  Inv 001  950.00,  TimeFees  225.00
Case 1001,  Inv 001  950.00,  TimeFees  190.00 
```

所以发票总数是 Invoice 001 金额的四倍。

我想从上述数据中返回的是一条求和线：

```
Case 1001,  Total Invoices 950.00,  Total TimeFees 840.00 
```

如何避免求和中的这种重复？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T17:40:53.453

```
SELECT c.CaseNo,
       i.InvFees,
       t.Fees
FROM   tblCases AS c
       INNER JOIN (SELECT CaseNo,
                          Sum(InvFees) AS InvFees
                   FROM   tblInvoices
                   GROUP  BY CaseNo) AS i
         ON c.CaseNo = i.CaseNo
       INNER JOIN (SELECT CaseNo,
                          Sum(Fees) AS Fees
                   FROM   tblTimesheetEntries
                   GROUP  BY CaseNo) AS t
         ON c.CaseNo = t.CaseNo
ORDER  BY c.CaseNo; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T17:41:56.620

尝试：

```
SELECT c.CaseNo, i.InvFees, sum(t.Fees)
FROM tblCases AS c
INNER JOIN tblInvoices AS i ON c.CaseNo = i.CaseNo
INNER JOIN tblTimesheetEntries AS t ON c.CaseNo = t.CaseNo    
group by c.CaseNo, i.InvFees 
```

# cocos2d-iphone - 将 Kobold2d 项目从 1.1.2 升级到 2.0.3

> ID：12322687
> 
> 赞同：0
> 
> 时间：2012-09-07T17:23:42.417
> 
> 标签：cocos2d-iphone, kobold2d

我正在进行一个 kobold2d 项目，我正在使用 kobold2d 1.1.2。是否可以将我的项目升级到 kobold2d 2.0.3 我知道较新的版本使用 opengles 2.0 和 cocos2d 2.x。所以我的问题是我是否能够升级而无需更改项目中的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T23:18:49.747

实际上，没有。从 cocos2d 1.1 到 2.0 有很多 API 变化。尽管其中大多数只是通过重命名来修复。

在任何情况下，Kobold2D 项目升级器工具都会复制您的项目，那么为什么不试一试，看看您遇到了多少错误和哪些错误呢？

# google-maps - 查找使用语言葡萄牙语巴西不起作用的地方

> ID：12322690
> 
> 赞同：2
> 
> 时间：2012-09-07T17:23:46.740
> 
> 标签：google-maps, google-places-api

查找使用葡萄牙语巴西语言的地方不起作用，只能用英语 =/。

使用： [http ://maps.googleapis.com/maps/api/js?libraries=places&key=----&sensor=false&language=pt-BR](http://maps.googleapis.com/maps/api/js?libraries=places&key=----&sensor=false&language=pt-BR)

例子：

```
var request = {
  location: results[0].geometry.location,
  radius: '500',
  types: [localType]
}; 
```

巴西葡萄牙语的 localtype 不起作用，只有英语。

# c# - CoreLocation 不适用于 MonoMac

> ID：12322691
> 
> 赞同：3
> 
> 时间：2012-09-07T17:23:51.217
> 
> 标签：c#, mono, core-location, monomac

好的，所以我正在尝试在单声道 mac 应用程序中使用 CoreLocation。在几次尝试让它工作但没有运气（事件从未引发）之后，我从[MonoMac 存储库](https://github.com/mono/monomac/tree/master/samples/WhereIsMyMac)`.UpdatedLocation`中获取了这个示例。

CLLocationManager 的配置/使用看起来很简单：

```
locationManager = new CLLocationManager();
locationManager.UpdatedLocation += HandleLocationManagerUpdatedLocation;
locationManager.Failed += HandleLocationManagerFailed;
locationManager.StartUpdatingLocation(); 
```

不幸的是，那里的结果似乎与从未显示的位置相同：

![我的 Mac 示例应用程序在哪里](../Images/610691dc9e780a8b230c5adf8de17d6f.png)

那么我需要在mac上启用某种设置才能使其正常工作吗？`CLLocationManager.LocationServicesEnabled`当我在运行时检查它时返回true。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T06:51:17.183

确保您已允许 WhereIsMyMacApp 允许访问定位服务。如果您错过了第一次运行程序时显示的弹出窗口，您必须在“系统设置 -> 安全 -> 隐私”中设置复选框。如果您错过为应用程序设置复选框但启用了位置服务，则为`CLLocationManager.LocationServicesEnabled`true，但您的应用程序将无法使用该服务。

这是它在我的机器上的样子： ![位置设置](../Images/2351315c8bab8c21c7320f12591fcb71.png)

（很抱歉它是德语，但您应该能够在 Mac 上找到该设置）。刚刚使用从源代码编译的 MonoMac 1.0 tarball 在 Lion 上测试了 MonoMac 示例 WhereIsMyMac，这很有吸引力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T12:16:08.740

在 Mountain Lion 上，我看到了 Joel 看到的同样问题。更新永远不会发生。我创建了一个示例 obj-c 应用程序，它确实有效。在控制台日志中，我看到 MonoMac 应用程序出现以下错误：

```
9/16/12 8:06:34.291 AM com.apple.launchd.peruser.501[154]: (com.apple.CoreLocationAgent) Throttling respawn: Will start in 1 seconds
9/16/12 8:06:35.332 AM CoreLocationAgent[7744]: CodeSigningInforequest for pid=7739 
9/16/12 8:06:35.333 AM CoreLocationAgent[7744]: getting requirement data failed for pid=7739 
```

但是对于 obj-c 应用程序，它看起来像：

```
9/16/12 8:02:18.143 AM CoreLocationAgent[7674]: locationRequest for pid=7670 message=0
9/16/12 8:02:20.196 AM CoreLocationAgent[7674]: locationRequest for pid=7670 response=1 
```

我还没有确定原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T16:19:47.327

我有同样的问题。但是，对于 OS X 10.8.3 和从源代码构建的最新 MonoMac（从 7e55bb19cf27afe44b53eacb33643397921aafb9 开始），现在又可以正常工作了。

# c# - 仅在调试期间由于文件夹创建和 Outlook 2010 中的消息框显示而导致意外且非常奇怪的挂断

> ID：12322692
> 
> 赞同：1
> 
> 时间：2012-09-07T17:24:00.163
> 
> 标签：c#, vsto, add-in, outlook-2010, office-addins

对不起标题......这很容易赢得“本周最奇怪的事情”。我希望至少有人能给我一个关于如何调查这里发生的事情的提示......

当我使用 Outlook 运行我的加载项时，一切都按预期运行，并且我没有冻结。

但是，当我尝试在调试模式下从 VS10 执行相同操作时，我会进入初始屏幕并卡在那里。首先，我看到加载加载项的 Flash 屏幕。然后它消失了，过了一会儿，它又出现了，保持动画（Office 2010 初始屏幕上的彩色波浪）并在“处理”文本旁边用点闪烁。

我可以取消它并关闭初始屏幕（在此屏幕上 Outlook 关闭而不显示），因此应用程序显然没有被冻结。另外，让我提醒一下，通过启动 Outlook 运行时，一切正常。

**现在是奇怪的部分，抓住你的帽子，因为它真的很奇怪。**

仅当我执行以下**两项操作时****才会**出现该行为。

 **1.  为联系人添加一个新文件夹（参见下面的代码 #1）。
2.  在 Outlook 中显示欢迎消息（请参阅下面的代码 #2）。

代码 #1 在代码 #2 之前执行。如果我跳过（1），挂断就会消失。如果我跳过（2），它也会消失。导致问题的原因是这两者的混合（仅在调试模式下）。我很想**得到**一些解释为什么鸭子（不是错字 - 鸟是故意的）会发生这种情况。

代码#1：

```
Outlook.Folder contacts = this.Application.Session.GetDefaultFolder(
  Outlook.OlDefaultFolders.olFolderContacts) as Outlook.Folder;
Outlook.Folder addressBook = contacts.Folders.Add(
  "My AB", Outlook.OlDefaultFolders.olFolderContacts) as Outlook.Folder; 
```

代码 #2

```
MessageBox.Show("Coolest add-in ever! Gimme $$$!"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:39:11.370

我可能知道导致问题的原因。我只能提供一种解决方法，而不解释为什么会发生这种情况。

我突然想到这可能与 UI 中的一些混乱有关，所以我按了 ALT-TAB-ing 就可以了。一个隐藏的消息框。一旦你点击它，程序就会继续。

不要问我为什么或如何...**

# requirejs - 组合模块，同时使用 Require.js 独立处理它们

> ID：12322695
> 
> 赞同：1
> 
> 时间：2012-09-07T17:24:25.320
> 
> 标签：requirejs, js-amd

使用 require.js 和 r.js 优化器，我如何将两个模块（例如 Backbone 和 Underscore）组合到一个包/模块中，然后能够加载包并通过调用来获取对依赖项的引用组合的任何一个模块。这可能吗？

例如，假设我已经设法将 Underscore 和 Backbone 放到一个模块中，那么我将能够使用以下代码加载整个包（包括下划线），并且将主干注入到函数中。

```
define(['backbone'], function(Backbone){
  // My code...
}) 
```

# html - 阻止一个 td 元素影响同级 td 元素的高度

> ID：12322698
> 
> 赞同：1
> 
> 时间：2012-09-07T17:24:31.940
> 
> 标签：html, html-email, html-table

我有一个带有 3 个 td 元素的 tr 元素。第一个和最后一个 td 包含图像，中间 td 包含文本。中间 td 的高度受第一个和第三个 td 中图像高度的影响。我如何对其进行编码，以使中间 td 始终具有小于第一个和第三个的固定高度。或者，问这个问题的另一种方式是，如何对其进行编码，以使每个 td 内容的高度不会影响同级 td？我正在尝试为 html 电子邮件制作具有环绕效果的功能区。

用 CSS 设置中间 td 的高度不起作用。

```
 <table align="center" style="width:740px;" border="0" cellpadding="0" cellspacing="0">

    <tr>
          <td>
          <img style="border:none;" src="imageAlt2/sliceLeft.png" /></td>

      <td style=" background:#0082c8; color:#fff; padding:20px 50px;">"The amount of time it has saved us is pretty much immeasurable" </td>

            <td><img style="border:none;" src="imageAlt2/sliceRight.png" /></td>
    </tr>
  </table> 
```

对于下面的屏幕，您会看到中间和第三个 td。中间 td 的高度受第三个 td 中图像高度的影响。显然，要获得 3D 效果，中间的 td 需要有更短的高度。

![在此处输入图像描述](../Images/ad2a4a3f2cf8b8e9735432826d49962e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:37:03.430

仅当高度大于 img 的高度时，使用 CSS 指定 td 的高度才有效（换句话说，td 不能小于 img）。这就是表格的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T17:38:16.697

您是否尝试过 CSS `overflow`（或`overflow-y`）属性？

```
overflow: hidden;
height: 50px; 
```

[看起来](https://stackoverflow.com/questions/480722/how-can-i-set-a-td-width-to-visually-truncate-its-displayed-contents)你可能还需要`table-layout: fixed`.

# visual-studio-2010 - 从许多较小的解决方案中制作主解决方案的工具？(vs2010)

> ID：12322700
> 
> 赞同：0
> 
> 时间：2012-09-07T17:24:37.363
> 
> 标签：visual-studio-2010, projects-and-solutions

我一直在寻找一种工具，它可以采用一堆解决方案并将它们组合成一个大型解决方案，同时保留项目之间的依赖关系。Visual Studio 2010 是否存在这样的工具？

情况是我有一堆用于非常大的产品的单独解决方案文件。我希望“查找所有参考”之类的操作能够正常工作，但它不会跨解决方案进行搜索。除了所有较小的解决方案之外，我还想为所有项目创建一个“主解决方案”。我不想手动创建它，因为有很多解决方案，甚至更多的项目。

谢谢，-吉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:44:48.400

根据 Microsoft Visual Studio 的配置，我认为这是不可能的。因为在每个解决方案中，您可能有一个或多个启动项目、一个专门的配置管理器、解决方案文件夹和许多其他取决于您的解决方案文件的设置。

我一直使用的策略之一是不要在他们之间丢失很多项目。我强烈建议您合并您的项目，查看正在发生的事情并将它们分组为几个大项目，而不是拥有许多小项目。另外我建议您使用 TFS，它是用于团队管理和您正在寻找的东西的出色服务器。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T06:26:19.643

我也有完全一样的问题。由于您拥有完全相同的构建平台和配置，因此您可以尝试[http://slntools.codeplex.com/](http://slntools.codeplex.com/)。这不完全是您所需要的，但根据它的文档，您可以拥有一个大型主解决方案并自动创建它的子解决方案......

# javascript - 在动态创建的元素上运行 jQuery.each()

> ID：12322704
> 
> 赞同：4
> 
> 时间：2012-09-07T17:24:58.163
> 
> 标签：javascript, jquery

我有以下代码；

```
$('#btnSave').click(function (e) {
    $("input:text").each(function (index, value) {
        var el = $(this);
        if (el.val().length == 0) { el.css('border', '1px solid red') }
        return false;
    });
}); 
```

在这里，所有输入文本元素都是动态创建的，因此我永远无法验证它们是否为空..

我该如何使用`.on()`with `.each()`？我用谷歌搜索没有运气..提前谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T17:29:59.737

您的代码非常好，但去掉`return false;`. 它在第一个输入被击中后停止`.each()`循环。

**[jsFiddle 示例](http://jsfiddle.net/j08691/ujTFG/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T17:40:29.970

除非当您单击页面时元素不在页面上，否则这应该不是问题。也因为您要返回 return false ; 当该字段为空时，只有第一个文本框将被赋予边框..即使为空，其他文本框也会被忽略..

尝试这个

```
​$(function() {
    $('#btn1').on('click' , function() {
        var inp = '';
        for(var i=1;i< 6;i++){
           inp += '<input type="text" id="txt' + i + '"/>'
        }   
        $('.textboxes').append(inp);

       var isError = false;
       $("input:text").each(function (index, value) {
            var el = $(this);
            if (el.val() == '') { 
               el.addClass('error');
               isError = true;
            }
        });

            if(isError){return false;}    
    });    

});​ 
```

还要检查这个工作示例...... [FIDDLE](http://jsfiddle.net/sushanth009/PP99g/)

# objective-c - 登录视图前的模态视图屏幕

> ID：12322706
> 
> 赞同：0
> 
> 时间：2012-09-07T17:25:04.417
> 
> 标签：objective-c, ios

我是一个新手 ios 开发人员，我有一个关于如何向登录页面添加视图的问题。目前我有一个登录页面，我想做的是在登录页面可见之前，另一个模式视图应该在它之前，用户必须首先关闭它。我怎样才能在xcode中添加这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:25:59.907

这是展示视图控制器的几个选项。

```
- (IBAction)goToLoginView:(id)sender
{
     //if you are using xibs use this line
     UIViewController *controller = [[UIViewController alloc] initWithNibName:@"myXib" bundle:[NSBundle mainBundle]];
     //if you are using storyboards use this line
     UIViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"myViewControllersID"];

     //to present the controller modally use this
     [self presentViewController:controller animated:YES completion:nil];
     //or if you are pushing to this controller using a navigation controller use this
     [self.navigationController pushViewController:controller animated:YES];
} 
```

然后关闭视图控制器使用这个：

```
- (IBAction)closeMyController
{
    //if the view was presented modally close it with this
    [self dismissViewControllerAnimated:YES completion:nil];

    //and to pop back up the navigation stack
    [self.navigationController popToRootViewControllerAnimated:YES];
} 
```

# css - Opera - 容器外的旋转元素丢失事件

> ID：12322710
> 
> 赞同：0
> 
> 时间：2012-09-07T17:25:17.313
> 
> 标签：css, rotation, opera

在 Opera（我有 12.02）[http://jsfiddle.net/VArHZ/28/](http://jsfiddle.net/VArHZ/28/)上查看此示例。点击蓝框内的红框（事件被触发），然后点击蓝框外的红框（事件未被触发）。

容器必须有位置和 z-index。

在其他浏览器上一切正常。Opera有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T00:36:30.280

不要包装绝对 div - 你将能够避免这个错误。

示例：http: [//jsfiddle.net/jaAV8/1/](http://jsfiddle.net/jaAV8/1/)

# cocoa - 更改 NSWindow 标题文本的颜色

> ID：12322714
> 
> 赞同：12
> 
> 时间：2012-09-07T17:25:32.887
> 
> 标签：cocoa, nswindow

我知道这不会是一个流行的问题，而且有些人不喜欢具有非标准外观的应用程序，但它对我的应用程序很有用。

是否可以以“标准”非私有 API 方式更改 NSWindow 标题栏文本的颜色？

我知道如果我使用私有 API（[如本答案中所述）](https://stackoverflow.com/questions/2453248/changing-window-title-color "如本答案所述")是可能的，但我认为可以在没有私有 API 的情况下做到这一点，因为 Pixelmator 已经完成了它并且没有被 MAS 拒绝。我知道也可以通过制作无边框窗口并自己绘制所有内容来做到这一点，但我不认为 Pixelmator 是这样做的，因为他们仍然可以获得标准 NSWindow 标题栏附带的所有附加位；可拖动图标、重命名窗口、文档修订的下拉菜单和全屏按钮。

基本上，我使用 setBackgroundColor: 制作了一个黑色窗口：但文本仍然显示为黑色，这在黑色背景上不起作用。

那么有没有人知道这样做的方法，或者 Pixelmator 是如何做到的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-08-27T06:22:14.803

从 OS X 10.10 开始，将窗口的外观更改为 NSAppearanceNameVibrantDark 就足够了

```
 window.appearance = NSAppearance(named:NSAppearanceNameVibrantDark) 
```

认为值得一提，因为您可以找到的大多数答案都已过时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-29T01:40:27.747

这是 Swift 中的一个解决方案。已经很晚了，我很累，所以这可能不是最佳选择，但它确实有效。

首先，这是一个在层次结构中查找视图的函数，可以选择跳过特定视图。（如果我们正在搜索`window.contentView.superview.subviews`并且我们想忽略您在 中的观点，这很有用`contentView`）

```
func findViewInSubview(subviews: [NSView], #ignoreView: NSView, test: (NSView) -> Bool) -> NSView? {
    for v in subviews {
        if test(v) {
            return v
        } else if v != ignoreView {
            if let found = findViewInSubview(v.subviews as [NSView], ignoreView: ignoreView, test) {
                return found
            }
        }
    }
    return nil
} 
```

以下是您将如何使用它，例如从`NSViewController`子类中。请注意，您需要在窗口变得可见时执行此操作，因此您不能在`viewDidLoad`.

```
override func viewDidAppear() {
    if let windowContentView = view.window?.contentView as? NSView {
        if let windowContentSuperView = windowContentView.superview {
            let titleView = findViewInSubview(windowContentSuperView.subviews as [NSView], ignoreView: windowContentView) { (view) -> Bool in
                // We find the title by looking for an NSTextField. You may
                // want to make this test more strict and for example also
                // check for the title string value to be sure.
                return view is NSTextField
            }
            if let titleView = titleView as? NSTextField {
                titleView.attributedStringValue = NSAttributedString(string: "Hello", attributes: [NSForegroundColorAttributeName: NSColor.redColor()])
            }
        }
    }
} 
```

*请注意，您是在玩火。出于某种原因，未指定像这样的内部结构。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-11T02:39:34.577

这就是我这样做的方式：

```
#import <objc/runtime.h>

@interface SOWindow : NSWindow
@end

@interface SOWindowFrameOverrides : NSView
@end

@implementation SOWindow

+ (void)load
{
    SEL selector = NSSelectorFromString(@"_currentTitleColor");
    SEL originalSelector = NSSelectorFromString(@"_original_currentTitleColor");
    Class frameClass = NSClassFromString(@"NSThemeFrame");

    Method m = class_getInstanceMethod(frameClass, selector);
    Method m2 = class_getInstanceMethod([SOWindowFrameOverrides class], selector);
    class_addMethod(frameClass, originalSelector, method_getImplementation(m), method_getTypeEncoding(m));
    method_exchangeImplementations(m, m2);
}

@end

@implementation SOWindowFrameOverrides

- (NSColor *)_currentTitleColor
{
    if ([self.window isKindOfClass:[SOWindow class]]) {
        return [NSColor redColor];
    } else {
        return [self _original_currentTitleColor];
    }
}

- (NSColor *)_original_currentTitleColor
{
    // will be filled in at runtime
    return nil;
}

@end 
```

虽然从 Mavericks 到 Yosemite 的视图层次结构发生了很大变化，`_currentTitleColor`但它已经在 API 中使用了很长时间，并且在不久的将来可能不会改变。即使是艰难的方法调配也是一种 hacky 方式，我发现它比遍历视图层次结构更优雅，但这只是我。

如果您想进一步自定义标题，您可以覆盖`_titleTextField`on`NSThemeFrame`以返回自定义文本字段（我使用它来更改我的[F3X](https://github.com/insidegui/F3X)项目的背景样式）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-26T09:02:55.330

您可以使用一些私有 API 如您的问题的评论中所述解决此问题 - 但是，您将无法将该应用程序提交到 AppStore。

其他解决方案是获取`[[myWindow contentView] superview]`- 它为您提供上述`NSThemeView`实例。然后，您需要做的就是在视图（实际上称为框架视图）子视图的子视图中搜索 NSTextField 的任何实例并修改它们。请注意，这些私有视图的层次结构可能会随着 OS X 的每个版本而改变，可能会破坏您的代码。

可能最好的解决方案是子类化（仅子类化，没有其他自定义）`NSWindow`并实现`-title`and`-setTitle:`方法 - 对于每个窗口，您将实际标题设置为`@""`（通过调用`[super setTitle:@""]`），然后将您自己的、以编程方式创建的`NSTextField`实例放入框架中视图（即`[[[self contentView] superview] addSubview:myTextField]`，`myTextField`文本字段在哪里。您需要弄清楚该字段的确切位置等，但这是最简单的部分。

# javascript - window.open 根据动态内容自动调整高度和宽度

> ID：12322716
> 
> 赞同：0
> 
> 时间：2012-09-07T17:25:35.030
> 
> 标签：javascript, popup

我将 div 值传递给 window.open 弹出窗口，该弹出窗口应根据内容调整高度，但是当我使用 auto 时，它只会打开一个新窗口。我尝试了此代码但无法正常工作

```
 function openPopup() {

            var divText = document.getElementById("pass").outerHTML;
            var myWindow = window.open('', '', 'width=500,height=auto');
            var doc = myWindow.document;
            doc.open();
            doc.write(divText);
            doc.close();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:36:42.483

我强烈推荐你使用 JQuery window，因为当你使用 window.open 时，PopupBlocker 会给你带来问题。这种方式的窗口也有很多限制，但是在 JQuery 窗口中你可以显示动态内容，它就像一个魅力。

顺便说一句，如果你必须这样做，窗口的“高度”属性没有“自动”值。因此，您应该在弹出窗口中打开页面中处理“onload”事件并计算所有内容并在加载窗口时调整窗口大小。

干杯

# javascript - 围绕环的 Javascript 粒子动画

> ID：12322719
> 
> 赞同：0
> 
> 时间：2012-09-07T17:25:42.687
> 
> 标签：javascript, animation, random, particles, particle-system

嗨，stackoverflowers 同胞！

我正在用 Javascript 构建一个粒子动画，我希望所有粒子都朝着画布中心的方向移动，并在文本周围形成一个**环。**但是，到目前为止，我的代码形成了一个正方形（很可能是因为粒子的随机位置生成中的分布）。关于如何让它们围绕中心而不是正方形建立一个环的任何想法？非常感谢，非常感谢您对此的意见。

这是代码（受[本教程](http://thecodeplayer.com/walkthrough/make-a-particle-system-in-html5-canvas)启发）：

```
<!DOCTYPE HTML>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title> :: Particle Animation Demo</title>
</head>

<body>

    <canvas id="canvas" width="960" height="500"></canvas>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script><script>$(document).ready(function(){

var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");

var W = 960; var H = 500;

var tolerance = 2;

var particles = [];
for(var i = 0; i < 1000; i++)
{
    particles.push(new create_particle());
}

function create_particle()
{

    this.x = Math.random()*W*2 * (Math.random()<0.5 ? -1 : 1)+W;//Math.random() * (W*2 - W) + W;
    this.y = Math.random()*H*2 * (Math.random()<0.5 ? -1 : 1)+H;//Math.random() * (H*2 - H) + H;

    this.vector_x = (W/2) - this.x;
    this.vector_y = (H/2) - this.y;

    this.distance = Math.sqrt(this.vector_x*this.vector_x + this.vector_y*this.vector_y);

    this.normvector_x = this.vector_x/this.distance; 
    this.normvector_y = this.vector_y/this.distance; 

    this.vx = Math.random()*20-10;
    this.vy = Math.random()*20-10;
    this.radius = Math.random()*10;
}

function draw()
{
    ctx.fillStyle = "white";
    ctx.fillRect(0, 0, W, H);

    for(var t = 0; t < particles.length; t++)
    {
        var p = particles[t];

        ctx.beginPath();

        ctx.fillStyle = "gray";
        ctx.arc(p.x, p.y, p.radius, Math.PI*2, false);
        ctx.fill();

        //p.x += p.vx;
        //p.y +=p.vy;
        if (!(Math.abs(p.x-W/2)<120 && Math.abs(p.y-H/2)<120)) {
            p.x = p.x+ p.normvector_x*7;
            p.y = p.y+ p.normvector_y*7;
        } else {
            if (t%2)
                        tolerance+=0.0005;
            //console.log(tolerance);
        }

        //if(p.x < -50) p.x = W+50;
        //if(p.y < -50) p.y = H+50;
        //if(p.x > W+50) p.x = -50;
        //if(p.y > H+50) p.y = -50;
    }
}

setInterval(draw, 33);
});</script>    
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:49:49.057

问题在于你的方程：

```
var inside = Math.sqrt(Math.pow(p.x - W/2, 2) + Math.pow(p.y - H/2, 2)) < 120;
if (!inside) {
    p.x = p.x+ p.normvector_x*7;
    p.y = p.y+ p.normvector_y*7;
} else {
    if (t%2)
        tolerance+=0.0005;    
} 
```

[http://jsfiddle.net/mLMKR/](http://jsfiddle.net/mLMKR/)

您可以像这样包含要增加的容差：（注意我将圆半径提取到全局变量。此外，这会将圆内的任何粒子移动到边缘）

```
var distance = Math.sqrt(Math.pow(p.x - W/2, 2) + Math.pow(p.y - H/2, 2));
var inside =  Math.abs(distance - radius) < tolerance;
if (!inside) {
    p.x = p.x+ p.normvector_x*7;
    p.y = p.y+ p.normvector_y*7;
} else {
    if (t%2)
        tolerance+=0.0005;
} 
```

[http://jsfiddle.net/mLMKR/1/](http://jsfiddle.net/mLMKR/1/)

# php - PHP REST 服务抛出异常——想要避免控制台错误

> ID：12322720
> 
> 赞同：0
> 
> 时间：2012-09-07T17:25:44.040
> 
> 标签：php, javascript, ajax, console

我们有一个 PHP 服务，我们在其中抛出一个自定义 Exception 对象（只是有一个 message 属性）。这些在 PHP 中被捕获，然后我们执行以下操作：

```
header($_SERVER['SERVER_PROTOCOL'] . ' 400 Bad Request', true, 400); 
```

这会导致两件事：

1) 如果他们的控制台已启动，则会出现控制台错误

2) 要调用的延迟对象上的 error() 回调和 .fail()。

我们希望 2 没有 1 的副作用。如果我们将错误代码设置为 200，则只会调用 success() 和 then()。

我们可以使用任何中间立场吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:32:13.347

更正，我的第一个答案是废话。

```
if(!window.console) console = {log: function() {}}; 
```

这是要走的路。在调用之前使用它`$.ajax`（或者您执行 ajax 请求）。

# c - C 结构中对齐填充的平台特定位置

> ID：12322728
> 
> 赞同：3
> 
> 时间：2012-09-07T17:26:07.650
> 
> 标签：c, alignment

除非使用打包编译器选项或编译指示，否则代码如下（假设 8 位 char 和 16 位短）

```
struct foo
{
   short a ;
   char  b ;
   short c ;
} ; 
```

据我所知，在`c`我们的产品支持的所有平台（不少）上，最后都会有一个 1 字节的对齐垫。

我不记得看到没有在`b`and之间放置对齐填充的任何平台`c`，但可以想象编译器可以合法地将填充放在`a`and之间`b`。

（动机：我们在我们的代码中引入了一些基础设施，以确保当前写入磁盘或涉及网络流的某些结构的二进制兼容性，并且在可能的情况下，希望插入显式填充，以便其他开发人员知道额外的这些数据结构在幕后消耗的存储空间）。

有谁知道一个平台，其编译器不会在需要时将对齐填充放在将不对齐的成员之前？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T17:29:34.800

它不是我所知道的任何地方的默认设置，但支持 MSVC（我相信，为了兼容性，还有 gcc），`#pragma pack`它允许控制结构打包并允许未对齐的访问。

基本上，任何对 C 结构字节布局的假设都是自找麻烦。这样做的代码也往往落入对单词字节序进行假设的陷阱，这在通用平台之间**绝对不兼容。**

# paypal - Paypal Express 结帐取消

> ID：12322729
> 
> 赞同：0
> 
> 时间：2012-09-07T17:26:18.687
> 
> 标签：paypal, express-checkout

我正在使用 Paypal 的 Express Checkout 设置支付系统。当用户提交付款，然后在 Paypal 上确认时，他们会被重定向到我们的网站。在我们的网站上，有一个按钮显示“确认付款”并将信息提交到我们的数据库。

我的问题是，我需要在我的网站上有一个取消按钮吗？如果我需要这个取消按钮，我应该让按钮在取消时告诉 Paypal 什么？我需要告诉 Paypal 令牌不再有效，还是只需要告诉我的网站付款已取消？

[编辑：在这里](https://stackoverflow.com/questions/8522835/how-do-i-cancel-a-paypal-express-checkout-transaction)找到答案

# algorithm - 什么时候散列不是算法中的好方法

> ID：12322732
> 
> 赞同：-4
> 
> 时间：2012-09-07T17:27:05.460
> 
> 标签：algorithm, data-structures

我想知道什么时候散列不是一个好方法。我知道散列函数可能很糟糕，但是是否有任何其他原因可以基于我们说这个问题或问题通过散列来解决是不好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:28:26.407

哈希可能会发生冲突（不能保证它们对于每个输入都是唯一的）。因此，如果您遇到不可接受哈希冲突的情况，则不应使用哈希。

相对于原始输入，散列通常也是无序的。也就是说，“1”的哈希值不能保证大于“2”的哈希值，等等。因此，如果您尝试对有序数据进行操作并保留顺序，则散列可能没有用。

最后（希望很明显），散列是有损的——你不能仅仅从散列中恢复原始的散列文本。因此，除非您有意采用一种方式（例如密码），否则它们不应完全替换原始数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T17:30:49.487

裸散列可能会导致安全问题。例如，如果你 MD5 是一个通用密码，那么哈希值都是相似的，那么你就有一个重大的安全漏洞。

# solr - solr 4.0 beta ping 响应

> ID：12322734
> 
> 赞同：1
> 
> 时间：2012-09-07T17:27:09.753
> 
> 标签：solr, jetty

我有两个核心运行的最新 solr 4.0.0 beta。每个的 solrconfig.xml 文件实际上是相同的。在管理 UI 中，当我为每个请求发出 ping 请求时，我会得到不同的结果。简而言之，这是设置：

对 solrconfig.xml 的 ping 配置：

```
 <requestHandler name="/admin/ping" class="solr.PingRequestHandler">
      <lst name="invariants">
        <str name="q">solrpingquery</str>
      </lst>
      <lst name="defaults">
        <str name="qt">standard</str>
        <str name="echoParams">all</str>
        <str name="df">text</str>
      </lst>
    </requestHandler> 
```

我正在使用我的 chrome 浏览器访问管理 UI。第一个核心的 ping 请求是通过 url 请求的（url 中的域解析为我的 localhost IP）：

`http://solr:8983/solr/core1/admin/ping?wt=json&ts=1347035067191`

回复如下：

{"responseHeader":{"status":0,"QTime":29,"params":{"echoParams":"all","df":"text","echoParams":"all","ts" :"1347035067191","wt":"json","q":"solrpingquery","distrib":"false"}},"status":"OK"}

第二个核心的 ping 请求通过以下方式完成：

`http://solr:8983/solr/core2/admin/ping?wt=json&ts=1347036906643`

回复如下：

{“状态”：“确定”}

请注意第二个响应如何缺少 responseHeader。ajax ping 响应回调取决于该 responseHeader。由于缺少它（即 responseHeader.QTime），浏览器会发出以下错误：

```
Uncaught TypeError: Cannot read property 'QTime' of undefined ping.js:53
$.ajax.success ping.js:53
jQuery.Callbacks.fire require.js:3099
jQuery.Callbacks.self.fireWith require.js:3217
done require.js:9452
jQuery.ajaxTransport.send.callback 
```

我是否在某处遗漏了一些导致这种情况的琐碎配置？

# oop - 领域驱动的设计理念

> ID：12322736
> 
> 赞同：3
> 
> 时间：2012-09-07T17:27:14.090
> 
> 标签：oop, architecture, domain-driven-design, separation-of-concerns, object-oriented-analysis

我在使用域驱动设计构建的应用程序中遇到了一些概念问题。

我有以下几层：

*   应用
*   领域
*   基础设施

所以，假设我有以下课程：

*   `Order`
*   `EmailService`
*   `OrderNotificationService`
*   `OrderApplicationService`

很明显，`Order`领域层和`OrderApplicationService`应用层都有。这`EmailService`是用于发送电子邮件的通用服务，并在基础设施层中实现。这`OrderNotificationService`是发送订单通知的具体实现。使用发送实际的电子邮件 `OrderNotificationService`。`EmailService`

所以，我的第一个问题是：会`OrderNotificationService`被实现为域服务、应用程序服务还是基础设施服务？

对于我的下一个问题，让我们假设以下对象：

*   `Employee`
*   `SalesforceService`

假设当员工被添加到系统时，他们也应该被添加到 Salesforce。这`SalesforceService`是一项使用 Salesforce api 注册用户的服务。将`SalesforceService`被实现为应用程序服务通过发送员工信息使用的域服务或通用基础设施服务吗？

感谢您的建议。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-08T00:09:30.573

## 这听起来不像 DDD

您的问题中没有太多关于您的域模型的内容。您提到了“将员工添加到系统和 Salesforce”，但除此之外，我对您的应用程序*在商业意义上*的用途没有真正的了解。我对“员工”和“销售人员”的理解是基于对这些词的熟悉程度，而不是基于它们在您的系统中的模型的解释。

我真的不知道“订单应用程序服务”在您的模型中应该代表什么。我收到“订单”和“订单通知”。似乎“客户”下达了“订单”，一些“订阅者”得到了“通知”，但其中很多都是基于我对设计模式的先验知识。

**您应该能够描述业务域模型，因为如果计算机不存在，它会起作用。** 如果你需要一个计算机术语来解释这个想法，它可能混入了模型之外的东西。

显然，您需要将应用程序逻辑与您的域逻辑集成，但这不应该混淆您的关注点。但是，有一些方法可以解决这个问题。

## 你怎么能解决它

1.  您可以使用接口而不是实现特定的类来对领域层中的服务进行建模。这就是所谓的[界面隔离原则](http://en.wikipedia.org/wiki/Interface_segregation_principle)。有道理的是，您的模型的一部分包括在客户下订单时通知负责的员工。但是，不一定有任何理由将此通知的实现与其建模目的相结合。可能有主管在拥挤的办公室中通过对讲机发布公告，或者可能有一封电子邮件由自动化系统发送。这两个示例都服务于相同的业务目的。`IOrderNotificationService`您可以拥有一个只包含一个方法的接口，而不是在您的域层中嵌入电子邮件服务`void NotifyOrderReceived(Order order);`. 这样，您就可以在域层中拥有所需的所有业务逻辑，而不会引入不必要的问题，例如“电子邮件”实现或数据库的持久性。我猜是这样，但是您的`OrderNotificationService`和`OrderApplicationService`确实是对同一事件的响应，但是一个具有数据库依赖关系，另一个具有 SMTP 依赖关系。两者都是基础设施问题。

在许多情况下，针对单个接口进行编码就足够了。但是，存在一个问题，即您的域对象现在依赖于注入的服务或全局变量。此外，这可能表明这些实体对它们的依赖关系了解太多。客户可能不需要知道如何处理订单的内部工作原理，而只需要知道它已被处理并且他们将收到他们所订购的东西。同样，员工可能不会将自己添加到 Salesforce，因为他在成为员工之前并不知道这件事。他只知道他刚刚找到工作。

这个问题有一个很好的解决方案...

1.  您可以使用“域事件”模式。基本思想是域对象只知道刚刚发生了什么以及它们的状态是如何改变的，而不需要知道关于保持或传播改变的状态的任何事情。他们处理其内部逻辑，然后引发“领域事件”。这更类似于客户下订单然后大喊“哟，我订购了这个产品！” 或者一名员工被录用，然后大喊：“哟，我找到了工作！”。采用这种方法将大大简化您的域逻辑，并允许您实现更清晰的关注点分离。Udi Dahan 有一系列优秀的博客文章，他在其中解释了利用领域事件模式背后的逻辑，并提供了一个非常简单但非常有效的实现。以下是一些链接：

    *   [如何创建完全封装的领域模型](http://www.udidahan.com/2008/02/29/how-to-create-fully-encapsulated-domain-models/)

    *   [领域事件 - 拿 2](http://www.udidahan.com/2008/08/25/domain-events-take-2/)

    *   [领域事件 - 拯救](http://www.udidahan.com/2009/06/14/domain-events-salvation/)

现在，如果您是那种喜欢在完全理解代码之前复制和粘贴代码的开发人员，我建议您从这些帖子中的第三篇开始。他们记录了 Udi Dahan 对这种模式的思考和经验的演变。最健全的代码示例出现在第三篇文章中。理想情况下，您应该按顺序阅读所有三本书，这样您就可以遵循他的逻辑并真正理解您如何从他的方法中受益，以及为什么它准确地代表了“领域驱动设计”。

作为对“领域事件模式”的补充说明，Eric Evans 在 2009 年回顾了他自撰写开创性著作以来对领域驱动设计的了解，指出*领域事件是他书中被严重忽视的核心构建块*。他的演讲摘要可[在此处](http://gojko.net/2009/03/12/qcon-london-2009-eric-evans-what-ive-learned-about-ddd-since-the-book/)获得，演示文稿的链接可[在此处](http://qconlondon.com/london-2009/presentation/What+I%27ve+learned+about+DDD+since+the+book)获得。

其他一些可能帮助您成功应用此模式的资源包括 Jimmy Bogard 的文章[加强您的领域：领域事件](http://lostechies.com/jimmybogard/2010/04/08/strengthening-your-domain-domain-events/)和[Martin Fowler 的领域事件文章](http://martinfowler.com/eaaDev/DomainEvent.html)。Bogard 从引用的链接中提供了指向其他有用的 DDD 博客文章的链接。

## 一般来说，

如果您真的想尝试应用领域驱动设计，那么通过真正了解您正在建模的内容以及您为什么目的实施的内容，您将获得更大的成功。简单地使用您不熟悉的术语并将您的代码标记为这样并没有隐含的价值。DDD 可能非常有用，但是如果您不花时间理解为什么要进行区分和设计决策，您最终会遇到很多不必要的抽象和一般的混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T22:44:43.810

OrderNotificationService 属于领域层。如果您认为它是 Order 类的协作者，它应该靠近 Order 类。IMO，我认为 OrderNotificationService 可以改为 OrderNotifier ，其职责是在订单状态更改时发布通知。它显然是一个接口而不是一个具体的类。它可以由OrderNotificatoinService实现，属于基础设施层或应用层。无需将 OrderNotificationService 设为接口。

这同样适用于 SalesforceService。将其视为 Employee 类的协作者，负责在创建员工时注册新员工信息。它属于领域层。与前面的情况相同，您可以考虑将其重命名为 EmployeeRegister 或类似的名称，这描述了它的角色而不是它的实现。改为使用 SaleforceService 实现它。

一个副作用是您的域对象（订单/员工）间接依赖于应用程序/基础设施层的类。如果您的域对象由其他域对象实例化，您可能会发现在创建域对象时注入第三方依赖项很棘手。这篇文章可能有用。[http://thinkinginobjects.com/2012/09/05/abstract-factory-in-domain-modelling/](http://thinkinginobjects.com/2012/09/05/abstract-factory-in-domain-modelling/)

# python - 使用 Latex 进行渲染时，如何更改 matplotlib 图中的轴刻度字体？

> ID：12322738
> 
> 赞同：24
> 
> 时间：2012-09-07T17:27:17.097
> 
> 标签：python, latex, matplotlib

以下代码生成的轴刻度标签的字体不是 Helvetica，但仍然是默认的衬线 Computer Modern。非常感谢任何建议。

```
from matplotlib import rc, font_manager
from numpy import arange, cos, pi
from matplotlib.pyplot import figure, axes, plot, xlabel, ylabel, title, \
grid, savefig, show

sizeOfFont = 12
fontProperties = {'family':'sans-serif','sans-serif':['Helvetica'],
    'weight' : 'normal', 'size' : sizeOfFont}
ticks_font = font_manager.FontProperties(family='Helvetica', style='normal',
    size=sizeOfFont, weight='normal', stretch='normal')
rc('text', usetex=True)
rc('font',**fontProperties)
figure(1, figsize=(6,4))
ax = axes([0.1, 0.1, 0.8, 0.7])
t = arange(0.0, 1.0+0.01, 0.01)
s = cos(2*2*pi*t)+2
plot(t, s)

for label in ax.get_xticklabels():
    label.set_fontproperties(ticks_font)

for label in ax.get_yticklabels():
    label.set_fontproperties(ticks_font)

xlabel(r'\textbf{time (s)}')
ylabel(r'\textit{voltage (mV)}',fontsize=16,family='Helvetica')
title(r"\TeX\ is Number $\displaystyle\sum_{n=1}^\infty\frac{-e^{i\pi}}{2^n}$!",
    fontsize=16, color='r')
grid(True)
savefig('tex_demo.pdf')

show() 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-05-02T18:21:36.497

我认为这里的混乱源于您混合了 TeX 和非 TeX 字体命令的事实。

这将打开 TeX 模式，因此所有文本都使用外部 TeX 安装呈现：

```
rc('text', usetex=True) 
```

在这一行中，将其设置为 sans-serif 将传递给 TeX，但 TeX 无法使用特定的 ttf 字体名称，因此忽略第二部分（涉及 Helvetica）。并且在 TeX 中设置默认正文文本不会（默认情况下）更改数学字体。这是（不幸的是标准的 TeX 行为）。

```
rc('font',**{'family':'sans-serif','sans-serif':['Helvetica']}) 
```

这会影响 matplotlib 的内部 mathtext 渲染器使用的字体集，并且对 TeX 没有影响：

```
rc('mathtext', fontset='stixsans') 
```

当我希望所有无衬线字体都脱离 TeX 时，我使用的解决方案是使用 cmbright 包，可以通过添加以下内容来打开它：

```
rc('text.latex', preamble=r'\usepackage{cmbright}') 
```

如果您还没有安装 cmbright LaTeX 包，则可能需要安装它。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-07T18:57:33.193

好的，这对我有用。替换以下行：

```
for label in ax.get_xticklabels():
    label.set_fontproperties(ticks_font)

for label in ax.get_yticklabels():
    label.set_fontproperties(ticks_font) 
```

有了这个：

```
from matplotlib.pyplot import gca
a = gca()
a.set_xticklabels(a.get_xticks(), fontProperties)
a.set_yticklabels(a.get_yticks(), fontProperties) 
```

您在原始代码中所做的对我来说很有意义，但是我以这种方式得到了不同的结果。奇怪的。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-01-15T22:29:51.737

我刚刚找到了一个你可以尝试的简单方法。只需调用 .xticks 方法并将字体名称作为用户设置参数。

例如

```
import matplotlib.pyplot as plt
plt.figure()
#... do the plot you want...
plt.yticks(fontname = "Times New Roman")  # This argument will change the font.
plt.show() 
```

# cocos2d-iphone - Cocos2d：Box2d 身体不会对力做出反应（Ghetto Birds 系统）

> ID：12322739
> 
> 赞同：0
> 
> 时间：2012-09-07T17:27:18.087
> 
> 标签：cocos2d-iphone, box2d-iphone

我一直在尝试实施[Ghetto Birds](https://github.com/robotron2084/GhettoBirds)弹弓系统，让它启动并运行到触摸位置后拉力反馈（显示力量/方向的点路径）更新的点，但遗憾的是球不会飞我释放。这就是我释放拉动时发生的情况（说代码）：

```
1.applyForce-method gets called, this contains these operations:
  -> Calls a method that creates a box2d body of the ball sprite. 
  -> Calculates the force to be applied on the ball. 
  -> Applies the force on the ball. 
```

我已经检查过所有这些方法实际上在运行时被调用。

所以，身体被创造出来，力被施加到那个身体上，但它不会移动。我在这里错过了一个必需的步骤吗？

任何建议将不胜感激！

编辑：我正在使用 cocos2d 2.0 物有所值！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:51:49.117

您可以在此处检查两件事。

1.  确保主体是动态主体。否则它不会对力做出反应。
2.  应连续施加力，因为它们可能在每个时间步后被清除。因此，`body->ApplyForce()`应该在每个时间步调用的计划方法中。但是，根据您的描述，使用`body->ApplyLinearImpulse()`. 这只会应用一次，但会给你的对象足够的“踢”来启动它。

# android - 如何在 ListView 项目单击上使用媒体播放器的单个实例

> ID：12322752
> 
> 赞同：2
> 
> 时间：2012-09-07T17:28:25.773
> 
> 标签：android, listview, singleton, android-mediaplayer

我想在用户触摸 Listview 中的项目时播放声音。我制作了列表视图，以下是项目点击监听器的点击实现。

```
listView.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> adapter, View view,int pos, long id) {

 //Here I am getting getting sound bytes from raw folder with name
 // like "a"+pos and using getResourse

  mp.create(context, resid);
  mp.start();

    }
 }); 
```

我对android的MediaPlayer了解不多

我的**问题**是我应该如何使用媒体播放器**播放单个声音实例**。我使用了媒体播放器（见上面的代码），但如果**用户点击不止一次**，它会播放多个声音实例。如果我没记错的话，最好在全局级别调用 mediaplayer.create() 。但是我将如何传递媒体文件的资源 ID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T17:48:04.680

首先，您需要在每次单击项目时检查 MediaPlayer 是否为空。

```
 if(mp!=null) {
        try{
            mp.stop();
            mp.release();
        } catch(Exception e){
            Log.w("Exception", e);
        }
    } 
```

然后您可以使用相同的媒体播放器播放另一种声音，例如

```
mp = MediaPlayer.create(YOUR_ACTIVITY_NAME.this, YOUR_SOUND_FILE);
mp.prepare();
mp.start(); 
```

希望这将帮助您解决您的问题。

可能这不是最好的方法，如果有人知道其他方法，请更新我。

谢谢！

# objective-c - 重复访问核心数据实体的首选方式

> ID：12322753
> 
> 赞同：0
> 
> 时间：2012-09-07T17:28:31.267
> 
> 标签：objective-c, ios, core-data, dry

基本上，我已经厌倦了编写`NSFetchRequest`和有时`NSEntityDescription`以及所有这些只是为了创建/访问核心数据实体。`NSSortDescriptor``NSPredicate`

我在想我会在实体上创建一个类别（因为它可以在任何地方使用），但我想和大家核实一下。

你如何优雅而干燥地完成这一切？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:32:04.277

在找到 Magical Record 之前，我遇到了同样的问题。获取实体非常棒，但也消除了设置 CoreData 的麻烦。

你可以在这里找到它：[https ://github.com/magicalpanda/MagicalRecord](https://github.com/magicalpanda/MagicalRecord)

# php - PHP页面加载错误

> ID：12322754
> 
> 赞同：0
> 
> 时间：2012-09-07T17:28:36.813
> 
> 标签：php, html, forms, passwords, restriction

我正在尝试使用 PHP 隐藏页面的内容，但总是出现错误，这是我正在使用的代码。数据`$pass`来自从另一个页面提交的表单：

```
<?php
 $pass = $_POST['pass'];
 $password = "content";  // Modify Password to suit for access, Max 10 Char.
?>

<html>
<title></title>
<head>

<?php 
 // If password is valid let the user get access
 if ( "$pass" == "$password") {
?>

<!-- START OF HIDDEN HTML - PLACE YOUR CONTENT HERE -->
</head>
<body>
You have gained access!
<!-- END OF HIDDEN HTML -->

<?php 
 } else {
   // Wrong password or no password entered display this message
   print "<p align=\"center\"><font color=\"red\"><b>Restricted Area!</b><br>Please enter from the log in page</font></p>";}
}
?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:36:18.663

```
print "<p align=\"center\"><font color=\"red\"><b>Restricted Area!</b><br>Please enter from the log in page</font></p>";} 
```

在这一行，最后有一个额外的花括号。所以在你的文件中，你有一个额外的大括号。尝试将此行更改为

```
print "<p align=\"center\"><font color=\"red\"><b>Restricted Area!</b><br>Please enter from the log in page</font></p>"; 
```

它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T17:35:26.470

链接，您的代码没有运行并最终出现致命错误，仅仅是因为您在`}`之后有一个额外的`print`，这意味着您`else`以一个太多的结尾`}`。删除它，然后您的代码将运行而不会出现任何错误：

[在线工作示例](http://codepad.org/pUiSFRwE)

另外，如果你比较变量，你一定不能使用引号`"`，尝试这样做：

`if ( $pass == $password) {`

# c# - Async TaskCompletionSource 调用方法两次

> ID：12322758
> 
> 赞同：4
> 
> 时间：2012-09-07T17:28:43.467
> 
> 标签：c#, async-await, c#-5.0

[找到这种](http://softwareblog.alcedo.com/post/2012/01/25/TaskCompletionSource-in-real-life-%28part-2-of-2%29.aspx)使用`await`回调调用异步方法的方法后，我在 Argotic RSS 阅读器库中使用了它：

```
var tcs = new TaskCompletionSource<string>();

EventHandler<SyndicationResourceLoadedEventArgs> feedReaderOnLoaded = null;
feedReaderOnLoaded = (sender, args) =>
                {
                    feedReader.Loaded -= feedReaderOnLoaded;
                    tcs.SetResult(""); // Needed so the await completes
                };
feedReader.Loaded += feedReaderOnLoaded;
feedReader.LoadAsync(new Uri(feed.Url), new object());

await tcs.Task;

// Result is put in a property, rather than returned from the method
var items = feedReader.Channel.Items; 
```

所以效果很好，我得到了我的物品。

我注意到在 Fiddler 中对 RSS 提要的 url 进行了两次调用。在调试器中单步执行代码时，它会被调用一次 on `LoadAsync`，然后再次 on `await tcs.Task`。我应该怎么做才能消除其中一个电话？

**更新**有一个控制台应用程序项目可以[从这里下载，](https://dl.dropbox.com/u/9861259/AsyncPuzzle.zip)它演示了这种行为。

**更新**我已经更改了使用 Argotic 库的方式，因此我使用 下载 RSS 提要`HttpClient`，然后将内容作为字符串传递给 Argotic，现在只产生一个调用。如果有人有任何想法，我仍然想知道为什么它被调用了两次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T12:17:40.263

看起来这是[供稿阅读器](http://argotic.codeplex.com/SourceControl/latest#Argotic/Microsoft%20.NET%203.5/Argotic.Core/Syndication/Rss/RssFeed.cs)的异步 API 中的错误/功能。

它执行异步 WebRequest 以获取提要。但是，当它处理 WebRequest 完成时，它会为响应创建一个 XmlReader，但实际上使用： `SyndicationEncodingUtility.CreateSafeNavigator(Url, new WebRequestOptions(), null)` 从源 Url 再次（同步）读取它。

提要本身将被第二次缓存，因此不会造成大量开销。

认为可以通过将响应流传递给它来修复它，`CreateSafeNavigator`但也许读取响应流也可以从异步完成中受益。

# zend-framework - 创建 Dev、Tst 和 Prod 部署的方法

> ID：12322759
> 
> 赞同：1
> 
> 时间：2012-09-07T17:28:57.787
> 
> 标签：zend-framework, deployment

我的团队整个夏天都在使用最新版本的 ZF1 开发一个简单的微博应用程序。

我们将把钱投资在可靠的 VPN 托管服务器上。我们的目标是创建 3 个环境 - dev、test 和 prod。我们的想法是在 VPN 服务器上创建一个 Apache vhost 配置并设置 test.domain.com 只能从服务器访问，这样普通用户就无法从 Web 访问它。然后我们的开发人员可以通过隧道进入服务器并访问 test.domain.com。这是可行的吗？有没有人试过这个？有没有更好的不同方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T10:13:25.427

阅读 Vhosts，您会发现这是一件非常常见且简单的事情。下面是一个基于我自己的 Linux 开发机的例子。使用此配置，Apache 将尝试将 ServerName 与浏览器中的 URL 匹配。如果我输入 test.domain.com，它将匹配测试站点，并在那里检查允许哪些 IP 访问该站点。如果我与该 IP 不匹配，Apache 将返回并“不允许您查看此目录错误”（401 或 403 http 代码。不确定是哪个）。如果 Apache 没有找到匹配项，它将使用第一个 Vhost，因此您的产品站点应该首先使用。

一句警告：Apache 使用浏览器中的 URL 进行匹配，所以如果我编辑我的主机文件，我可以欺骗 apache。随后，如果我成功欺骗了我的 IP，我就可以访问您的开发站点。因此，请始终在 TEST 和 DEV 站点上使用正确的登录/身份验证和授权程序，以防止任何损坏。

```
<VirtualHost *:80>
        ServerName domain.com, www.domain.com
           DocumentRoot /home/prod/document_root
        <Directory />
            Options FollowSymLinks
            AllowOverride All
            Order deny,allow
            Allow from all
        </Directory>   
</VirtualHost>

<VirtualHost *:80>
        ServerName dev.domain.com
           DocumentRoot /home/dev/document_root
        <Directory />
            Options FollowSymLinks
            AllowOverride All
            Order deny,allow
            Deny from all
            Allow from "localhost"
        </Directory>   
</VirtualHost>

<VirtualHost *:80>
        ServerName test.domain.com
           DocumentRoot /home/test/document_root
        <Directory />
            Options FollowSymLinks
            AllowOverride All
            Order deny,allow
            Deny from all
            Allow from "Some IPs"
        </Directory>   
</VirtualHost> 
```

# knockout.js - 将元素放入淘汰视图模型中

> ID：12322763
> 
> 赞同：2
> 
> 时间：2012-09-07T17:29:32.337
> 
> 标签：knockout.js

如何绑定元素以使元素本身位于我的视图模型中？我不想使用`document.getElementByID`.

## html

```
<div id="someDiv" data-bind="self: someDiv" /> 
```

## 视图模型

```
viewModel.someDiv = ko.observable(); 
```

## 例子

```
(viewModel.someDiv() === document.getElementByID('someDiv')) === true; 
```

**编辑：**

一些上下文...我在调用图形库的包装层中订阅了另一个视图模型。我想绑定图形库呈现的元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T20:07:07.947

您可以编写自定义绑定来设置您的 observable：

```
ko.bindingHandlers.bindElement = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var value = valueAccessor();
        value(element);
    }

    };

<div id="someDiv" data-bind="bindElement: myElement"> 
```

见小提琴：[链接](http://jsfiddle.net/8JJcS/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T20:29:30.007

直接从视图模型访问视图违背了 MVVM 的分离原则。也许更好的是使用自定义绑定处理程序作为一种行为 - 绑定处理程序`init`和`update`函数将使您能够访问 DOM 元素本身。这样，可以以声明的方式从视图中添加行为。

有关您正在尝试实现的确切目标的更多信息将有助于提供有用的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T17:54:03.287

为您通过 document.getElementById('') 返回的元素设置一个 observable，例如

```
viewModel.someDiv = ko.observable(document.getElementById('someDiv')); 
```

我用几个 if 语句创建了一个小提琴，以显示与您的示例类似的内容。

[http://jsfiddle.net/Rynan/DnXrd/](http://jsfiddle.net/Rynan/DnXrd/)

# python - celery 没有找到 python-dateutil，尽管它已安装

> ID：12322767
> 
> 赞同：2
> 
> 时间：2012-09-07T17:29:40.253
> 
> 标签：python, virtualenv, celery

我激活了一个 virtualenv，我正在运行一个命令

```
 celery -A dnslookup worker --loglevel=info 
```

投掷

```
Traceback (most recent call last):
File "/Users/myuser/dev/project-backend-ENV/bin/celery", line 5, in <module>
from pkg_resources import load_entry_point
File "/Users/myuser/dev/project-backend-ENV/lib/python2.7/site-packages/setuptools-   0.6c11-py2.7.egg/pkg_resources.py", line 2607, in <module>
File "/Users/myuser/dev/project-backend-ENV/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 565, in resolve
pkg_resources.DistributionNotFound: python-dateutil>=1.5,<2.0 
```

但是 python-dateutil 安装在我的 virtualenv 中。

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T17:53:21.020

我猜你使用的版本`dateutil`太新了。默认情况下，安装`dateutil`到新的 virtualenv 会得到我`dateutil`的 2.1 版，这是行不通的（正如您的错误消息指出的那样）。从[芹菜更新日志](http://celery.readthedocs.org/en/2.2/changelog.html)：

> 依赖列表现在明确指定我们不想要 python-dateutil 2.x，因为这个版本只支持 py3k。
> 
> 如果你不小心安装了 dateutil 2.0，你应该降级到 1.5.0 版本：
> 
> ```
> pip install -U python-dateutil==1.5.0 
> ```

# c# - PowerShell 中的 ValidatePattern - 智能管道

> ID：12322770
> 
> 赞同：0
> 
> 时间：2012-09-07T17:29:45.307
> 
> 标签：c#, powershell

想象一下这个 CmdLet：

```
Request-RemoteAssistance [-IPAddress <string>]
Request-RemoteAssistance [-HostName <string>] 
```

两个参数都可以从管道中获取数据。两个参数都是字符串，所以类型解析不起作用。如果 IP 地址应用了正则表达式验证属性，如果输入了非 IP 地址格式的字符串，PS 是否会自动看到它对 IPAddress 无效并将其通过管道传递给 HostName 参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:22:30.003

不，powershell 无法通过正则表达式解析参数集。我同意这很酷，但在 v3 中是不可能的。

你的选择是

*   将这两个参数放在不同的参数集中，每个参数集中都有其他独特的参数，因此通过存在其他参数来完成分辨率
*   不验证格式，在您的 cmdlet 正文中进行额外处理
*   只提供一个参数，也许`-Host`，它接受 IP 或主机名。在内部使用`switch -regex`来选择它是主机名还是 IP，然后进行相应的处理。

如果你不能做#1，我会推荐#3。除非您在每种情况下都需要其他特殊参数，否则用户可以在一个地方使用 IP 或主机名是最简单的。大多数其他工具都允许这样做。

# jsf - 我想每次都使用 Managed Bean Null 加载 JSF UI？

> ID：12322778
> 
> 赞同：0
> 
> 时间：2012-09-07T17:30:29.393
> 
> 标签：jsf

每当我加载 JSF WebPage .. 然后将 Managed Bean 设为 NULL。并显示..因为我使用的是@Session Scoped。我不想存储任何会话内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:07:54.380

Cdi jsr-299 不响铃？如果不是，这些是您应该调查的事情。基本上你可以用 cdi bean 代替 jsf bean。Cdi 提供了对话范围，它可能很好地满足您的需求。

如果您使用 jsf2 bean，您应该阅读 viewscope，可能也符合您的需求。

最后，如果您确实使用 jsf bean，则可以实现您想要的，但这不是最佳实践。此处的答案之一中的代码：[How (and when?) to remove a Session scoped bean in JSF 2.0](https://stackoverflow.com/questions/9741778/how-and-when-to-remove-a-session-scoped-bean-in-jsf-2-0)

# python - 熊猫：独特的数据框

> ID：12322779
> 
> 赞同：41
> 
> 时间：2012-09-07T17:30:38.933
> 
> 标签：python, pandas

我有一个重复行的 DataFrame。我想获得一个具有唯一索引且没有重复项的 DataFrame。可以丢弃重复的值。这可能吗？这会是一个完成`groupby`吗？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-09-07T18:37:39.740

```
In [29]: df.drop_duplicates()
Out[29]: 
   b  c
1  2  3
3  4  0
7  5  9 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-07T17:38:49.223

通过阅读[split-apply-combine](http://pandas.pydata.org/pandas-docs/stable/groupby.html#splitting-an-object-into-groups)文档示例找到了一种方法。

```
df = pandas.DataFrame({'b':[2,2,4,5], 'c': [3,3,0,9]}, index=[1,1,3,7])
df_unique = df.groupby(level=0).first()

df
   b  c
1  2  3
1  2  3
3  4  0
7  5  9

df_unique
   b  c
1  2  3
3  4  0
7  5  9 
```

# xcode - 如何在 applescript 中使用 do shell 脚本？

> ID：12322789
> 
> 赞同：1
> 
> 时间：2012-09-07T17:31:34.073
> 
> 标签：xcode, shell, applescript

我是 Applescript 的新手，并且在终端方面也有一些有限的经验。我今天做了一个简单的 shell 脚本，我保存在我的桌面上。它被命名为“Test.sh”，只是将文件从一个文件夹复制到另一个文件夹。当我`sh ~/Desktop/Test.sh`从终端内运行时，一切运行良好。但是，当我`do shell script "/Volumes/volume_name/Users/username/Desktop/Test.sh"`在 Xcode 中键入 Applescript 命令时，什么也没有发生。我在 Mac OS 10.7.4 上使用 Xcode 4.4.1（尽管我猜这无关紧要）。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T05:03:01.460

因为启动盘的路径不是以“ **/Volumes/** ”开头的

使用它来获取正确的路径

```
set shScript to quoted form of POSIX path of ((path to desktop folder as string) & "Test.sh")
do shell script shScript 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T05:19:18.213

输入终端并键入以下内容：

```
cd ~
cd Desktop
sh Test.sh 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T21:16:54.540

让我们考虑一下您要在 shell 脚本中运行的 applescript 是清空垃圾箱。按着这些次序：

1.  打开终端
2.  输入“touch sample.sh”并按回车
3.  键入“chmod +x sample.sh”并按回车键
4.  键入“open -e sample.sh”并按回车键，这个打开的文本编辑器
5.  将以下代码粘贴到文本文件中并保存。

# !/bin/bash

osascript -e '告诉应用程序“Finder”清空垃圾桶结束告诉'

1.  回到终端。键入“./sample.sh”。这将导致空垃圾。

# iphone - 使用四元数计算 iphone 的偏航、俯仰和滚动？

> ID：12322797
> 
> 赞同：1
> 
> 时间：2012-09-07T17:32:10.903
> 
> 标签：iphone, xcode, quaternions, rotational-matrices, cmmotionmanager

我看到很多问题和文章都提到四元数可以用来从 iPhone 获得更好、准确和稳定的偏航、俯仰和滚动读数，而不是直接读取它的偏航、俯仰和滚动读数。但与此同时，我还没有看到任何在 iPhone 平台上实现四元数的合适方法。作为一个初学者，真的很难知道，这些四元数是如何工作的并在一段代码中实现它们？（很抱歉没有提供任何代码，因为我不知道它在苹果的 xcode 平台中是如何工作的）

所以请善意地回答我的问题，大多数用户都会从中受益！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:57:05.983

您不必实现任何东西，API 为您提供了四元数：

[CMAttitude 类参考，四元数属性](http://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMAttitude_Class/Reference/Reference.html#//apple_ref/occ/instp/CMAttitude/quaternion)

我个人更喜欢旋转矩阵，因为我发现它们更容易理解和使用。

当我阅读您的问题时，我仍然觉得您以某种方式想要偏航，俯仰和滚动。你必须在代码中**到处**使用四元数来消除偏航、俯仰和滚动引起的问题。

# python - 如何使用 Django 验证器将日期限制为 1900 或更大

> ID：12322799
> 
> 赞同：3
> 
> 时间：2012-09-07T17:32:14.777
> 
> 标签：python, django

我发现这个显示模式的[提交](https://github.com/django/django/commit/e15567bf58)`_datere`现在需要一个日期 > 1900 但是......当我`django.core.validators`今天查看时，我没有看到任何类似的东西（与上面链接的提交确实说它是 7 年前的）。

django 中的这种验证发生了什么？人们今天在 Django 1.4.1 中使用什么来获得这种类型的验证？

我问这个是因为 strftime 错误：

```
"ValueError('year=1800 is before 1900; the datetime strftime() methods require year >= 1900',)" 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T19:26:17.210

@SimeonVisser 很好地解释了您曾经获得此异常的原因以及您不再这样做的原因。

如果仍然希望日期大于 1900 作为业务逻辑而不是实际的固有限制，您应该能够使用内置的 Django `MinValueValidator`。只需输入 1900-01-01 的日期/日期时间，即

```
validators=[MinValueValidator(datetime(1900, 1, 1, 0, 0))] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T17:42:06.303

截至[本次提交](https://github.com/django/django/commit/df2b19cc17)，有一个新模块`django.utils.datetime_safe`支持年份 < 1900 的日期。

`strftime`如果您希望支持年份 < 1900 的日期，则可以从该模块中使用。类似地，您可以使用( `new_datetime`)`new_date`获得支持年份 < 1900 的`datetime`( `date`)：

```
value = datetime_safe.new_datetime(value)
# or:
value = datetime_safe.new_date(value) 
```

另一种选择是自己为表单编写一个自定义验证器，并强制年份不少于 1900。

# php - explode() 数组中的每个元素，产生多维数组

> ID：12322801
> 
> 赞同：0
> 
> 时间：2012-09-07T17:32:27.007
> 
> 标签：php, explode

如何`explode()`在每个数组条目上使用 PHP 函数？

例如：

```
foreach ($persons as $person) {
    $zips = $person->getZipResponsibility();
    $zips = nl2br($zips);

    $rangesArray = explode('<br />', $zips);
} 
```

返回这个：

```
Array
(
    [0] => 10000-20000
    [1] => 30000-40000
) 
```

这很好用，但现在我必须分解每个数组部分以获得如下输出：

```
Array
(
  [0] => Array (
     [0] => 10000
     [1] => 20000
  )
  [1] => Array (
     [0] => 30000
     [1] => 40000
  )
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T17:34:49.990

这应该有效，尚未测试。

```
$rArray = array();

foreach($rangesArray as $key=>$val) {
    $rArray[] = explode('-', $val);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T17:36:43.900

只需使用另一个爆炸，这次是这样的：`explode('-', $i);`。你必须把它放在这样的 foreach 中：

```
$x = 0;
foreach ($rangesArray as $i)
{
  $arr = explode('-', $i);
  foreach ($arr as $j)
  {
    $arr1[$x] = $j;
  }
  $x++;
}

var_dump($arr1); 
```

# syntax - Puppet 语法：如何制作仅适用于给定类中的资源的集合？

> ID：12322803
> 
> 赞同：0
> 
> 时间：2012-09-07T17:32:40.783
> 
> 标签：syntax, puppet

在 Puppet 中，假设我有一个`class`包含众多资源`file`的`package`资源。我想使用资源链接（`->`和`~>`）来确保它们以正确的顺序得到管理。我希望在资源`file`之前管理所有`package`资源。我阅读了[有关资源链接的 Puppet Language Guide 部分](https://docs.puppetlabs.com/guides/language_guide.html#chaining-resources)，并尝试了它的建议，使用集合，如下所示：

`File <| |> -> Package["package1"] -> Package["package2"]`等等。

但是，这不起作用，并且发生了一些非常奇怪的行为：该指令管理我的 Puppet 配置中的*每个`file`对象*，而不仅仅是在`class`我正在处理的`package`s 指定之前。

我将如何使用集合来表示“仅在指定资源之前管理*此类中*`file`的每个对象？

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T02:42:02.583

可能不是您要查找的内容，但您可以将文件资源分成单独的清单 mymodule::myfiles ，然后执行 Class['Mymodule::Myfiles'] -> Package['package1'] 等等。*

# javascript - Hide and show extra colums withinin table using jQuery

> ID：12322807
> 
> 赞同：1
> 
> 时间：2012-09-07T17:33:07.370
> 
> 标签：javascript, jquery

I'm working on something complex (for my standards at least) in jQuery and am completely stuck on how to move forward. I more or less see the structure in my head but having difficulties writing it down into properly working jQuery code:

*   When clicking next or previous, the next or previous column should be highlighted, this works fine.
*   Once you are at the last column (R6) and click next one new element should appear (R7) and R1 should be removed. R7 and further cols are already in the html, but are made invisible with CSS. How can I make R7 appear and R1 disappear and so on?

The invisble tables are already in the html code, you can see it in the top right table with the race description once you click further then R6, it will continue to R7 up to R12.

The logic I have in my mind is something like this:

*   When user arrives at last visible R and clicks next, add class 'invisible' to the R on the left and add class 'visible' to R on the right. T
*   When user clicks previous the opposite of above should happen.

The tricky part is to get the next Rn appear once it is at the last one..

Thanks for looking into my code: [http://jsfiddle.net/yunowork/hVHZb/](http://jsfiddle.net/yunowork/hVHZb/)

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:41:01.557

Here is an [update of your fiddle](http://jsfiddle.net/hVHZb/7/) that works as you like.

This is the code I added to show the new column and hide the previous:

```
 if ($nextCol.hasClass("invisible")) {
        $nextCol.removeClass("invisible");        
        $nextCol.addClass("visible");
        var $toRem = $nextCol.prev('td').prev('td').prev('td').prev('td').prev('td').prev('td');
        $toRem.removeClass("visible");
        $toRem.addClass("invisible");
    } 
```

There is analogous code for `previous`. I also made the `colspan` of the header column 12 so that the extra columns also fell within its grasp.

The only "ugly" part of the code is how to find which column to remove. I just decided to backtrack 6 columns and hide that one. Ideally you'd want to abstract that functionality out and make it more flexible.

EDIT: [Updated fiddle with fixed prev bug](http://jsfiddle.net/hVHZb/14/). I added this in the `if` statement: `if($prevCol.length != 0 && $prevCol.index() >= 8)`. I'm not sure why `8` is the number (I would think it should be 2) but it seems to go in multiples of 4\.`

# php - 调用时传递引用已被删除

> ID：12322811
> 
> 赞同：51
> 
> 时间：2012-09-07T17:33:16.260
> 
> 标签：php, class, function, pass-by-reference, public

> **可能重复：**
> [调用时传递引用已被弃用](https://stackoverflow.com/questions/4665782/call-time-pass-by-reference-has-been-deprecated)

虽然它可能记录在互联网上的某个地方，但我找不到解决问题的方法。自 PHP 5.4 更新以来，传递引用已被删除。

现在我对这部分代码有疑问，我希望有人能看到我正在尝试用它做什么，以便他们可以帮助我解决我的传递引用问题。

以下是有问题的代码：

```
public function trigger_hooks( $command, &$client, $input ) {
    if( isset( $this->hooks[$command] ) ) {
        foreach( $this->hooks[$command] as $func ) {
            PS3socket::debug( 'Triggering Hook \'' . $func . '\' for \'' . $command . '\'' );
            $continue = call_user_func( $func, &$this, &$client, $input );
            if( $continue === FALSE ) {
                break;
            }
        }
    }
} 
```

.

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-09-07T17:36:05.807

仅删除*调用时间*传递引用。所以改变：

```
call_user_func($func, &$this, &$client ... 
```

对此：

```
call_user_func($func, $this, $client ... 
```

`&$this`无论如何，在 PHP4 之后永远都不需要。

如果您绝对需要通过引用传递 $client，请改为更新函数 ($func) 签名 ( `function func(&$client) {`)

# android - Android 文件系统和 inode

> ID：12322813
> 
> 赞同：1
> 
> 时间：2012-09-07T17:33:27.177
> 
> 标签：android, linux, filesystems, inode

我最近了解了 Unix inode 及其用途。特别是，我了解到 an.inode 在文件系统中是独一无二的。

**我的问题是：**如果用户将 Micro SD 卡插入他们的 Android 设备，该卡会​​成为现有文件系统的一部分还是成为单独的文件系统？

**或者，换一种说法：** inode 可以在内部和外部存储之间复制吗？

非常感谢，P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:55:15.017

它是一个单独的文件系统。所以是的，内部存储上的文件可以与外部存储上的文件具有相同的 inode 编号，即使它们是不同的文件。

如果您真正的问题是如何唯一标识文件，则需要 inode 号和设备 ID 号。两者都可以通过 *stat() 系列系统调用来检索，特别是 stat 结构的 st_dev 和 st_ino 字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T07:45:03.597

Micro SD 卡通常使用 FAT32，一种不存储 inode 的文件系统。当访问新文件时，Linux 内核正在创建一个与其他不同的随机 inode 编号。

在 FAT32 文件系统上，路径名足以唯一标识文件，这与其他文件系统不同，在其他文件系统中，文件可以有任意数量的路径名，甚至根本没有。

这些 FAT32 假 inode 号被删除：

*   当文件系统被卸载时
*   当操作系统重新启动时
*   当存储它们的固定大小缓存已满时

如果您想要一种可靠的方法来识别 FAT32 上的文件，请不要使用它们的 inode。

I would suggest to use a hash of their pathname, combined with their size if you want to be really sure to avoid collision.

# cuda - cuda-gdb 是否需要 root 权限？

> ID：12322815
> 
> 赞同：2
> 
> 时间：2012-09-07T17:33:29.063
> 
> 标签：cuda, archlinux, cuda-gdb

我正在使用`cuda-sdk`and `cuda-toolkit`包在 Arch Linux 上进行 GPGPU 开发。我尝试以`cuda-gdb`普通用户身份在一个简单的程序上运行导致：

```
$ cuda-gdb ./driver
NVIDIA (R) CUDA Debugger
4.2 release
Portions Copyright (C) 2007-2012 NVIDIA Corporation
GNU gdb (GDB) 7.2
Copyright (C) 2010 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-unknown-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /home/nwh/Dropbox/projects/G4CU/driver...done.
(cuda-gdb) run
Starting program: /home/nwh/Dropbox/projects/G4CU/driver 
warning: Could not load shared library symbols for linux-vdso.so.1.
Do you need "set solib-search-path" or "set sysroot"?
[Thread debugging using libthread_db enabled]
fatal:  The CUDA driver initialization failed. (error code = 1) 
```

如果我`cuda-gdb`以 root 身份运行，它会正常运行：

```
# cuda-gdb ./driver
NVIDIA (R) CUDA Debugger
4.2 release
Portions Copyright (C) 2007-2012 NVIDIA Corporation
GNU gdb (GDB) 7.2
Copyright (C) 2010 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-unknown-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /home/nwh/Dropbox/work/2012-09-06-cuda_gdb/driver...done.
(cuda-gdb) run
Starting program: /home/nwh/Dropbox/work/2012-09-06-cuda_gdb/driver 
warning: Could not load shared library symbols for linux-vdso.so.1.
Do you need "set solib-search-path" or "set sysroot"?
[Thread debugging using libthread_db enabled]
[New Thread 0x7ffff5ba8700 (LWP 11386)]
[Context Create of context 0x6e8a30 on Device 0]
[Launch of CUDA Kernel 0 (thrust::detail::backend::cuda::detail::launch_closure_by_value<thrust::detail::backend::cuda::for_each_n_closure<thrust::device_ptr<unsigned long long>, unsigned int, thrust::detail::device_generate_functor<thrust::detail::fill_functor<unsigned long long> > > ><<<(1,1,1),(704,1,1)>>>) on Device 0]
[Launch of CUDA Kernel 1 (set_vector<<<(1,1,1),(10,1,1)>>>) on Device 0]
vd[0] = 0
vd[1] = 1
vd[2] = 2
vd[3] = 3
vd[4] = 4
vd[5] = 5
vd[6] = 6
vd[7] = 7
vd[8] = 8
vd[9] = 9
[Thread 0x7ffff5ba8700 (LWP 11386) exited]

Program exited normally.
[Termination of CUDA Kernel 1 (set_vector<<<(1,1,1),(10,1,1)>>>) on Device 0]
[Termination of CUDA Kernel 0 (thrust::detail::backend::cuda::detail::launch_closure_by_value<thrust::detail::backend::cuda::for_each_n_closure<thrust::device_ptr<unsigned long long>, unsigned int, thrust::detail::device_generate_functor<thrust::detail::fill_functor<unsigned long long> > > ><<<(1,1,1),(704,1,1)>>>) on Device 0] 
```

测试程序`driver.cu`是：

```
// needed for nvcc with gcc 4.7 and iostream
#undef _GLIBCXX_ATOMIC_BUILTINS
#undef _GLIBCXX_USE_INT128

#include <iostream>
#include <thrust/device_vector.h>
#include <thrust/host_vector.h>

__global__
void set_vector(int *a)
{
  // get thread id
  int id = threadIdx.x + blockIdx.x * blockDim.x;
  a[id] = id;
  __syncthreads();
}

int main(void)
{
  // settings
  int len = 10; int trd = 10;

  // allocate vectors
  thrust::device_vector<int> vd(len);

  // get the raw pointer
  int *a = thrust::raw_pointer_cast(vd.data());

  // call the kernel
  set_vector<<<1,trd>>>(a);

  // print vector
  for (int i=0; i<len; i++)
    std::cout << "vd[" << i << "] = " << vd[i] << std::endl;

  return 0;
} 
```

`driver.c`使用以下命令编译：

```
$ nvcc -g -G -gencode arch=compute_20,code=sm_20 driver.cu -o driver 
```

如何`cuda-gdb`在没有 root 权限的情况下运行？

更多信息：输出`nvidia-smi`为：

```
$ nvidia-smi
Mon Sep 10 07:16:32 2012       
+------------------------------------------------------+                       
| NVIDIA-SMI 4.304.43   Driver Version: 304.43         |                       
|-------------------------------+----------------------+----------------------+
| GPU  Name                     | Bus-Id        Disp.  | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap| Memory-Usage         | GPU-Util  Compute M. |
|===============================+======================+======================|
|   0  Quadro FX 1700           | 0000:01:00.0     N/A |                  N/A |
| 60%   52C  N/A     N/A /  N/A |   4%   20MB /  511MB |     N/A      Default |
+-------------------------------+----------------------+----------------------+
|   1  Tesla C2070              | 0000:02:00.0     Off |                    0 |
| 30%   82C    P8    N/A /  N/A |   0%   11MB / 5375MB |      0%      Default |
+-------------------------------+----------------------+----------------------+

+-----------------------------------------------------------------------------+
| Compute processes:                                               GPU Memory |
|  GPU       PID  Process name                                     Usage      |
|=============================================================================|
|    0            Not Supported                                               |
+-----------------------------------------------------------------------------+ 
```

显示器连接到 Quadro，我在 Tesla 上运行 CUDA 应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T06:03:32.747

谢谢你。从它的声音来看，您的问题是所需的设备节点没有被初始化。通常，运行 X 将创建 CUDA 软件堆栈与硬件通信所需的设备节点。当 X 没有运行时，就像这里的情况一样，以 root 身份运行会创建节点。由于缺乏权限，普通用户无法创建节点。[在没有 X 的情况下运行 Linux 系统时，推荐的方法是以 root 身份运行以下脚本（来自http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_Getting_Started_Linux](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_Getting_Started_Linux.pdf)的入门指南[.pdf](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_Getting_Started_Linux.pdf) )

```
#!/bin/bash
/sbin/modprobe nvidia
if [ "$?" -eq 0 ]; then
# Count the number of NVIDIA controllers found.
NVDEVS=`lspci | grep -i NVIDIA`
N3D=`echo "$NVDEVS" | grep "3D controller" | wc -l`
NVGA=`echo "$NVDEVS" | grep "VGA compatible controller" | wc -l`
N=`expr $N3D + $NVGA - 1`
for i in `seq 0 $N`; do
mknod -m 666 /dev/nvidia$i c 195 $i
done
mknod -m 666 /dev/nvidiactl c 195 255
else
exit 1
fi 
```

请注意，您需要在每次启动时重新创建设备节点，因此最好将此脚本（或类似脚本）添加到您的启动序列中。

@Till：对作为答案的问题表示歉意:)。我是 SO 新手，没有足够的声誉来发表评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:19:19.167

最新的 Nvidia 驱动程序 (304.60) 和最新版本的 cuda (5.0.35) 已修复此问题。 `cuda-gdb`不需要root权限即可运行。

# ruby - Ruby - 在正则表达式中快速插入文本

> ID：12322816
> 
> 赞同：0
> 
> 时间：2012-09-07T17:33:29.337
> 
> 标签：ruby, regex, string

我们知道：

```
p '%s' % "test"
#=> "test" 
```

但是有可能做到这一点：

```
s = "string"
s[/#{%s}/] % "test" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:47:44.840

好吧，你总是可以这样做：

```
s[Regexp.new("%s" % "test")] 
```

如果您的字符串可以包含具有特殊含义的字符，请`Regexp.escape`预先使用。此外，您可以直接插入到正则表达式中：

```
s = "test"
/#{s}/ #=> /test/ 
```

# c++ - open() 的参数：每个人都应该拥有对文件的所有访问权限，并且应该在创建时被截断

> ID：12322818
> 
> 赞同：1
> 
> 时间：2012-09-07T17:33:44.247
> 
> 标签：c++, linux, file-handling

我想在 Unix 中创建一个允许每个人都可以访问的文件。如果文件已存在，则应将其截断为空。

阅读打开的手册页后，我有以下电话。只是想确认它是否是正确的方法。

```
int fd;
int flags = O_RDWR | O_CREAT | O_TRUNC;
/* Set umask to Octal 011 */
mode_t mode = S_IXGRP | S_IXOTH;
/* umask syscall alwasy succeeds. No need to save return value (previous umask value) */
umask(mode);
/* Set mode to Octal 666\. open syscall will and mode with ~umask. 
   0666 & ~0011 = 0666 i.e. the mode we want to set.
*/
mode = S_IRUSR | S_IWUSR | S_IRGRP | S_IWGRP | S_IROTH | S_IWOTH;
if ((fd = open(path.c_str(), flags, mode)) < 0) {
   return false;
} else {
  close(fd);
  return true;
} 
```

谢谢！

编辑：根据 Nikolai 的评论，所有访问权限 = 读写。我不希望每个人都能够写入可执行文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:32:16.360

您可以保证文件创建模式的唯一方法是在调用之前显式清零您的 umask `open`，因为该`mode`参数是针对您的 umask 进行与非运算的。

最好在你之后简单地设置你的文件*模式*`creat`。

# javascript - 使用 Javascript 跨多个站点捕获主机名

> ID：12322819
> 
> 赞同：1
> 
> 时间：2012-09-07T17:33:54.900
> 
> 标签：javascript, .htaccess, parsing, dns

我正在尝试捕获主机名，而不使用“www。”或“.com”。此时我可以使用以下内容捕获我正在寻找的内容：

```
var host = document.location.host;
var parts = host.split('\.');
var result = parts[1];
var partner = result+"_block"; 
```

这将在 20 多个站点中使用，并且这个数字会增长，我担心某些站点可能不使用重定向到“www”，如果域显示为 example.com 与 www.example.com，那么我将捕获“com ” 而不是“例子”。有没有更好的解决方案来解决这个问题而不使用条件语句？

**更新**

据我所知，没有标准的方法可以做到这一点，所以我只是添加了一个条件语句，如下所示：

```
var result;
var host = document.location.hostname;
var parts = host.split('\.');
if(parts[0] == 'www' || 'beta' || 'm'){
    result = parts[1]
}else{
    result = parts[0]
} 
```

# javascript - WIll window.addEventListener("load", function(), false); 等待浏览器自动填充字段？

> ID：12322822
> 
> 赞同：2
> 
> 时间：2012-09-07T17:34:15.023
> 
> 标签：javascript, greasemonkey, addeventlistener

我正在创建一个 GreaseMonkey 脚本，只要用户在浏览器中保存了他们的用户名和密码，它就会自动登录到一个页面。这很简单，它只是检查以确保用户名字段和密码字段不为空，然后它会自动单击登录按钮。

时不时地我遇到一个问题，它没有登录。页面加载并坐在那里。我认为这仅仅是因为在检查用户名和密码字段时页面没有完全加载。

因此，我将其添加到我的脚本中。

```
window.addEventListener("load", Login(), false); 
```

我的问题是......这实际上会等待浏览器在尝试登录之前自动填充这些字段，还是页面加载和浏览器填充这些字段是 2 个不同的操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:38:39.870

您的意思是引用`Login`而不是立即执行它吗？

```
window.addEventListener("load", Login, false); 
```

您的方式在窗口加载`Login` **之前执行。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T17:39:00.763

因为自动保存表单的工作方式没有标准，我会设置一个计时器`setTimeout()`

呃..我傻了。如果这个人试图输入他们的用户信息，当前的代码会做坏事。

未经测试，快速编写的代码：

```
function logMeIn() {
  var el = document.getElementById("username");
  if (el && el.value !== "") {
    // Finish the login
  } else {
    window.setTimeout(logMeIn, 200);
  }
}

logMeIn(); 
```

尝试2：

```
// This is a User Script -- runs in its own encloser, won't pollute names back to the main document.
var loginTimer;

function logMeIn() {
  var el = document.getElementById("username");
  if (el && el.value !== "") {
    // Finish the login
  } else {
    loginTimer = window.setTimeout(logMeIn, 200);
  }
}

logMeIn();

// can't use ".onfocus" -- its a userscript.
// Cancel the timer if the username field gets focus -- if the user tries to enter things.
document.getElementById("username").addEventListner("focus") = function(e) {
  if (loginTimer) {
    window.clearTimeout(loginTimer);
  }
} 
```

# makefile - Makefile 规则定义中的分号

> ID：12322823
> 
> 赞同：17
> 
> 时间：2012-09-07T17:34:18.113
> 
> 标签：makefile

我在 Makefile 中看到许多规则，如下所示：

```
$(PATH)/foo.inc:;
include $(PATH)/foo.inc

$(PATH)/bar.inc:;
include $(PATH)/bar.inc 
```

规则定义末尾的分号是无操作还是具有特定含义？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-07T17:46:26.117

带有 target-prerequisite 的行上的分号是为此规则执行的第一个命令行，至少在 GNU make 中是这样。

从手册的第 5 章：

> 规则的命令由要一一执行的 shell 命令行组成。每个命令行必须以制表符开头，除了第一个命令行可以附加到 target-and-prerequisites 行，中间用分号隔开。

在您的情况下，由于分号后没有命令，因此它最终成为无操作。

# php - PHP preg_match 与工作正则表达式

> ID：12322824
> 
> 赞同：3
> 
> 时间：2012-09-07T17:34:22.550
> 
> 标签：php, preg-match

```
function validateDate( $date )
{ 
    echo $date;
    //2012-08-24 20:30:00
    if(preg_match('/^([0-9]{4})-([0-9]{2})-([0-9]{2}) ([1-2]{1})([0-9]{1}):([0-5]{1})([0-9]{1}):([0-5]{1})([0-9]{1})$/', $date) >= 1)
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

这总是返回 false。我使用了一个唯一的工具来构建正则表达式，它在那里工作得很好。当我将“/”添加到正则表达式时，麻烦就开始了。不知何故，PHP 似乎需要这些，但我不知道为什么，也不知道为什么它会破坏我的正则表达式。

它应该为某事返回 TRUE。像“2012-08-24 20:30:00”和“asdf2012-08-24 20:30:00asdf”的 FALSE 或任何不符合我的正则表达式的东西

提前致谢！

------------------------------------编辑感谢您的所有回答！

正如一些用户指出的那样，我的函数对于示例日期“2012-08-24 20:30:00”返回 true。但是，只有当我手动设置 $date='2012-08-24 20:30:00' 时才会这样做。如果我在代码中的其他地方使用完全相同的字符串调用该函数，它将返回 false。有谁知道为什么？

------------------------ EDIT2

是的，很抱歉浪费您的时间，实际上是在字符串中添加了一些空格。在调用我的函数之前在我的日期使用 trim() 现在会给出正确的结果。

感谢大家！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-07T17:50:46.327

为什么使用正则表达式？使用[DateTime](http://www.php.net/manual/en/book.datetime.php)类。

```
function validateDate($date, $format = 'Y-m-d H:i:s')
{
    $d = DateTime::createFromFormat($format, $date);
    return $d && $d->format($format) == $date;
} 
```

您可以将此功能用于所有类型的日期/时间验证。例子：

```
var_dump(validateDate('2012-02-28 12:12:12')); # true
var_dump(validateDate('2012-02-30 12:12:12')); # false
var_dump(validateDate('2012-02-28', 'Y-m-d')); # true
var_dump(validateDate('28/02/2012', 'd/m/Y')); # true
var_dump(validateDate('30/02/2012', 'd/m/Y')); # false
var_dump(validateDate('14:50', 'H:i')); # true
var_dump(validateDate('14:77', 'H:i')); # false
var_dump(validateDate(14, 'H')); # true
var_dump(validateDate('14', 'H')); # true

var_dump(validateDate('2012-02-28T12:12:12+02:00', 'Y-m-d\TH:i:sP')); # true
# or
var_dump(validateDate('2012-02-28T12:12:12+02:00', DateTime::ATOM)); # true

var_dump(validateDate('Tue, 28 Feb 2012 12:12:12 +0200', 'D, d M Y H:i:s O')); # true
# or
var_dump(validateDate('Tue, 28 Feb 2012 12:12:12 +0200', DateTime::RSS)); # true
var_dump(validateDate('Tue, 27 Feb 2012 12:12:12 +0200', DateTime::RSS)); # false
# ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T17:44:58.640

为我退货`true`。试试这个正则表达式：

```
function validateDate($date) {
  echo $date;
  if( !preg_match("/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})$/",$date,$m)) return false;
  if( !checkdate($m[1],$m[2],$m[0])) return false;
  if( $m[3] > 23) return false;
  if( $m[4] > 59) return false;
  if( $m[5] > 59) return false;
  return true;
} 
```

在 RegEx 中验证格式，然后使用目标函数验证内容，比尝试在 RegEx 中做所有事情更容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T17:48:27.000

您要问的是分隔符。阅读 PHP.net 手册中的这篇文章：[RegExp - Delimiters](http://php.net/manual/en/regexp.reference.delimiters.php)

> 使用 PCRE 函数时，需要用***分隔符***将模式括起来。定界符可以是任何非字母数字、非反斜杠、非空白字符。

和：

> 常用的分隔符是正斜杠 (/)、井号 (#) 和波浪号 (~)。以下是有效分隔模式的所有示例。

# iphone - AudioQueueGetProperty 返回 -50

> ID：12322828
> 
> 赞同：3
> 
> 时间：2012-09-07T17:34:59.957
> 
> 标签：iphone, ios, xcode

这是代码行：

音频流基本描述是

```
recordFormat.mFormatID = kAudioFormatMPEG4AAC;
recordFormat.mChannelsPerFrame   = 2;

OSStatus oss=AudioQueueGetProperty(queue, kAudioConverterCurrentOutputStreamDescription,
                                       &recordFormat, &size); 
```

它保持返回 OSStatus 为 -50，这是什么意思？

谢谢扎希

# php - U+0008 在某些浏览器中添加到字符串的字符

> ID：12322829
> 
> 赞同：0
> 
> 时间：2012-09-07T17:35:00.700
> 
> 标签：php, mysql

我的网站上有一个评论部分。这些评论存储在 MySQL 数据库中具有“文本”数据类型和 latin1_swedish_ci 排序规则的字段中。当我回显查询结果以显示评论时，在 Firefox、Opera 和其他浏览器中会显示字符 U+0008（退格）。Chrome 会忽略这一点，只显示空白。有什么办法可以去掉这个字符？

**编辑：** 我在网站上有两个部分，一个是我发布通知的部分，一个是用户发布评论的部分。包含内容的“消息”字段具有相同的配置和回显。正如我所说，无论我是通过网站发表评论，还是通过直接查询发表评论，都没有什么区别。值得注意的是，末尾带有 -tag 的注释没有附加 U+0008 字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:50:55.407

将 MySQL 中的排序规则从更改`latin1_swedish_ci`为 unicode 并尝试。可能是数据在输入时以 unicode 编码，但在存储在数据库中时会丢失编码并以 unicode 字符串显示退格。但是，您需要按照@WebnetMobile.com 的建议找出它的来源

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:31:35.923

我在`echo`函数中替换了一个空格。这显然解决了这个问题。我真的不知道如何解决它，但是`U+0008`角色都消失了......

# drupal-7 - Drupal - 7 个类别/分类法，块中有节点

> ID：12322830
> 
> 赞同：1
> 
> 时间：2012-09-07T17:35:01.470
> 
> 标签：drupal-7, block, categorization

我是 drupal 7 的新手，我想创建一个视图博客，我可以在其中列出分类作为类别，并在其中显示两篇文章和指向该类别的阅读更多链接。任何人都可以详细解释我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:39:36.703

如果您为您的类别使用带有**术语参考字段**的内容类型，它将自动为每个类别创建页面，其中列出了带有该类别标记的文章。

如果您想更好地控制分类模块生成的这些页面，您可以在 de Views UI 中打开**分类术语**示例视图并添加和删除要显示的字段。可以通过在您的主题模板文件夹中为文件**page--taxonomy.tpl.php**创建自定义模板文件来编辑这些页面的布局。

在那里你还可以创建一个额外的块显示（*我假设你说博客时你的意思是块*），并且在页面设置区域中，你可以打开**更多链接**，当有更多文章可用时，这将显示一个更多链接然后你已将您的寻呼机设置为显示（*即使用寻呼机 - 显示指定数量的项目 - 每页项目数 = 2*）。确保将 de 设置从**For all display**更改为**This block (override)**以不覆盖其他显示。

您可以通过 Blocks UI 将此块放置在任何页面上的任何区域中，并且应该做您想做的事情。

# javascript - 当 div 在浏览器窗口中可见时运行脚本

> ID：12322833
> 
> 赞同：7
> 
> 时间：2012-09-07T17:35:26.260
> 
> 标签：javascript, jquery

当 a 在浏览器窗口中可见时，我需要运行一些 JavaScript `div`，例如，当它滚动到时，甚至是重复滚动时。我该怎么做呢？

基本结构：

```
<div class='page1'></div>

<div class='page2'></div>

<div class='page3'></div>

<div class='page4'></div> 
```

CSS：

```
div {
    float: left;
    height: 500px;
    width: 500px;
    margin: 50px 0;
    background: grey;
} 
```

小提琴：http: [//jsfiddle.net/Q5BUe/1/](http://jsfiddle.net/Q5BUe/1/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T18:10:12.473

与其他提供的问题/解决方案一样，这里是完整的实现......

加载后，我们运行该函数为可见的 div 分配相应的颜色。在 jQuery 滚动处理程序上，我们继续调用该函数来分配新的背景颜色。

[http://jsfiddle.net/Q5BUe/5/](http://jsfiddle.net/Q5BUe/5/)

```
$(allInView);
$(window).scroll(allInView);

function isScrolledIntoView(elem) {
    var docViewTop = $(window).scrollTop();
    var docViewBottom = docViewTop + $(window).height();

    var elemTop = $(elem).offset().top;
    var elemBottom = elemTop + $(elem).height();

    return ((elemBottom <= docViewBottom) && (elemTop >= docViewTop));
}

function allInView() {

    if (isScrolledIntoView($(".page1"))) $(".page1").css("backgroundColor", "red");
    else $(".page1").css("backgroundColor", "grey");

    if (isScrolledIntoView($(".page2"))) $(".page2").css("backgroundColor", "green");
    else $(".page2").css("backgroundColor", "#333");

    if (isScrolledIntoView($(".page3"))) $(".page3").css("backgroundColor", "yellow");
    else $(".page3").css("backgroundColor", "#222");

    if (isScrolledIntoView($(".page4"))) $(".page4").css("backgroundColor", "blue");
    else $(".page4").css("backgroundColor", "#111");

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T18:01:30.530

由于您暗示您使用 jQuery，您可能会喜欢

```
if($('#element').is(':visible'))
{
    //do your thing
} 
```

# ios - 更新视图内容时实现页面卷曲

> ID：12322837
> 
> 赞同：1
> 
> 时间：2012-09-07T17:35:47.647
> 
> 标签：ios, xcode, uiview, uiviewanimation

我有一组连续显示的工作表，即当用户完成一个时，下一个会出现。在代码中，下一个工作表是动态生成`UIButtons`/ `UILabels`（和其他子视图）来呈现它。我想用页面卷曲动画显示这个新工作表。请注意，视图控制器和顶层视图保持不变，只是重新创建了子视图。

我可以使用该`UIViewAnimationTransitionCurlUp`选项以我当前的方法执行此操作吗？似乎只有在一个视图被另一个视图替换时才使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-11T10:51:57.520

请试试这个。希望这会帮助你。

[UIView transitionWithView:self.view duration:0.3 options:UIViewAnimationOptionTransitionCurlUp 动画：^ { [self.view addSubview:blurView]; } 完成：无];

这里 blurView 将是您的视图。

# ios - AFNetworking 替代 sendSynchronousRequest 用于填充 CoreData

> ID：12322838
> 
> 赞同：1
> 
> 时间：2012-09-07T17:35:50.017
> 
> 标签：ios, core-data, nsurlconnection, afnetworking

从 JSON 文件填充核心数据时，我目前正在这样做：

```
NSString *urlString = [value objectForKey:@"url"];
NSURL *url = [NSURL URLWithString:urlString];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
NSURLResponse *response = nil;
NSError *error = nil;
NSData *dataResponse = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
[managedObject setValue:dataResponse forKey:@"image"]; 
```

AFNetworking 有没有更好的（异步）方法来做到这一点？这种情况下最好的方法是什么？它是否必须是同步的，因为我们正在处理 CoreData？

更新：现在试试这个：

```
NSOperationQueue *queue = [[NSOperationQueue alloc] init];

[NSURLConnection sendAsynchronousRequest:request queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
                 {
                     [managedObject setValue:data forKey:@"image"];
                 }]; 
```

由于某种原因，当我稍后访问托管对象时，图像属性始终为空，即使上面的 *data 在完成处理程序中不为空。图像在同步方法中保存得很好。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:49:37.310

`NSURLConnection`也可以处理异步。

您可以使用的方法是 (iOS >= 5) 是

```
+ sendAsynchronousRequest:queue:completionHandler: 
```

如果您需要以 iOS < 5 为目标，则将委托模式用于`NSURLConnection`. 可以在[NSURLConnection 和 grand central dispatch](https://stackoverflow.com/questions/5037545/nsurlconnection-and-grand-central-dispatch)中找到一个很好的包装器。

关于核心数据，我会说这取决于。如果您需要存储的数据很便宜，请在主线程中进行。相反，您有三种不同的方法来做到这一点：

*   (1) 使用新的 Core Data 基于队列的 API (iOS >= 5)
*   （2）在a`NSOperation`内开始a`NSOperationQueue`并在后台做长时间的工作
*   (3)使用GDC

在处理（2）或（3）时要注意Core Data的约束（线程约束）。

希望有帮助。

PS如果你想知道别的让我知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T17:54:15.410

有[NSURLConnection](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)`sendAsynchronousRequest:queue:completionHandler:`的消息。

# ruby-on-rails - 创建 git post-merge 钩子并在 Git Tower 中使用它们

> ID：12322847
> 
> 赞同：2
> 
> 时间：2012-09-07T17:36:36.273
> 
> 标签：ruby-on-rails, git, rails-migrations, git-tower

我们使用 Git Tower 来管理我们的 git 存储库，并且我们希望设置能够`rake db:migrate`在我们拉下新更新时自动运行。我已将合并后的 git 钩子修改为如下所示：

```
#!/bin/bash
bundle exec rake db:migrate 
```

如果我从命令行运行它，它工作得很好。但是，如果我尝试在 Tower 本身中运行 git pull，我会收到以下错误：

`/Library/Ruby/Gems/1.8/gems/bundler-1.1.4/lib/bundler/spec_set.rb:90:in 'materialize': Could not find sass-3.2.1 in any of the sources (Bundler::GemNotFound)`

有没有人有让 Tower 在 git pull 上运行自动迁移的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:21:53.863

把它放在一个脚本中：

```
#!/bin/bash
bundle exec rake db:migrate 
```

然后在 .git/hook/post-merge 文件中：

```
exec <path/to/script/based/on/repo/directory>/<script_name> & 
```

你需要 & 在行尾。hooks 脚本必须立即返回，否则 git 会不高兴。

某人

# android - 通过内连接将数据保存在内容提供者的关系表中

> ID：12322850
> 
> 赞同：2
> 
> 时间：2012-09-07T17:36:42.310
> 
> 标签：android, sqlite, relational-database, inner-join, multi-table

您如何在图像中看到我有一个表 A，表 C 和一个数组列表 A。

我需要创建一个具有表 A (id_A) 的 id 和表 C (id_C) 的 id 的关系表 (表 B)。数组列表包含我需要的表 C 的每个 id。所以我需要一种方法来保存表 B 的数据，其中 1 id_A 相对于 id_C 的 N 个元素。

我知道我可以使用内部连接，但我不知道如何在内容提供程序中启动它。任何人都可以提供帮助或示例？

谢谢或您的时间

![在此处输入图像描述](../Images/96ea0f1a34b9d8ed8805dc931dcc24e1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:00:28.053

这一点我错了。内连接用于对数据库进行查询，而不是创建一个由另外两个结果组成的表。

这是我使用外键做我假装的解决方案

```
 private static final String DATABASE_SOCIO_QUOTA = " CREATE TABLE IF NOT EXISTS  "
        + SocioQuota.TABLE_NAME + " ( "
        + SocioQuota.C_ID + " INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "
        + SocioQuota.C_VALOR + " DOUBLE NOT NULL, "
        + SocioQuota.C_ESTADO + " INTEGER NOT NULL, "
        + SocioQuota.C_SOCIO_ID + " INTEGER NOT NULL, "
        + SocioQuota.C_SESSAO_QUOTA_ID + " INTEGER NOT NULL, "
        + " FOREIGN KEY( " + SocioQuota.C_SOCIO_ID + " ) REFERENCES " +              Table_A + " ( " + Socio.C_ID + " ) "
        + " FOREIGN KEY( " + SocioQuota.C_SESSAO_QUOTA_ID + " ) REFERENCES " + Table_C + " ( " +SessaoQuota.C_ID + " ) "
        + " ) "; 
```

然后保存该表每一列的值

# java - 如何从资源文件创建自动生成的枚举？

> ID：12322856
> 
> 赞同：2
> 
> 时间：2012-09-07T17:37:04.473
> 
> 标签：java, resources, auto-generate

我想从 android 创建一个类似于 R 的自动生成的资源文件。我知道如何解析和创建文件，并基本上创建一个新的类文件。我不知道该怎么做是开始这个​​自动生成过程。

因此，使用 eclipse（尽管如果有办法以不可知的方式实现这一点，我更喜欢它），我如何触发自动生成会话来读取属性文件并创建一个包含静态变量的 .java 文件和这个解析文件中的“密钥”，然后我可以从我的代码中引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:29:36.603

[已经提供了](https://stackoverflow.com/questions/121324/a-java-api-to-generate-java-source-files)一些如何生成 java 源文件的示例。读取属性文件和调用这些 API 之一应该相对容易。

要触发代码生成过程，您需要添加自定义构建步骤。使用 Ant，只需[添加一个自定义任务](https://stackoverflow.com/questions/8121846/how-to-make-custom-ant-task)。然后将其连接到 Eclipse Builder：项目 Properties -> Builders -> New。

随后，Eclipse 应自行查找并刷新此文件。如果没有，请检查您的配置：首选项-> 常规-> 工作区-> 找到“使用本机挂钩或轮询刷新”和类似的并检查它们。（请注意，我不能 100% 确定这最后一部分会起作用。）

阻力最小的路径是单独运行此构建步骤。如果您的属性文件不经常更改，那么它应该没什么大不了的。这类似于您使用 Protocol Buffers、JAXB、wsdl2java 等时所做的事情。如果您希望一切都像 R.java 那样神奇地工作，那么您可能需要做一些更复杂的事情：

 - 尝试使用 Eclipse Builder 选项来控制执行 Ant 任务的时间 - 如果您无法弄清楚，那么我会检查 Eclipse 如何连接到上述项目（即，到 Protocol Buffers、JAXB、wsdl2java等） - 查看 ADT 自定义 PreCompilerBuilder 类 - 查看[build-helper-plugin](https://stackoverflow.com/questions/7160006/m2e-and-having-maven-generated-source-folders-as-eclipse-source-folders)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:39:37.650

通常使用 a`ResourceBundle`创建一个允许您通过键查找属性的对象。您可以`ResourceBundle`在[Java Trail](http://docs.oracle.com/javase/tutorial/i18n/resbundle/concept.html)上了解。

基本思想是你有一个带有`.properties`扩展名的文本文件。您将`ResourceBundle`对象指向该文件。然后，您可以使用`getString()`or`getObject()`方法将密钥传递给您想要的属性。这就是它的全部。您只需要`ResourceBundle`在启动程序时（或在您需要它之前的某个时间）加载。

如果您创建自己的具有 a`ResourceBundle`作为成员值的类，您可以使用这样的简单代码来获得一个简单的`get()`方法来获取属性值：

```
 public String get(String aString)
    {        
    String sVal = null;

    try
    {
        sVal = (String)myProperties.getObject(aString);
    }
    catch (MissingResourceException e)
    {
        log.debug("Missing Property Value: "+aString);
    }

    return sVal;
    } 
```

我希望这很有用。

# html - 生成依赖于动态信息的 html 时的优雅方法

> ID：12322857
> 
> 赞同：3
> 
> 时间：2012-09-07T17:37:12.990
> 
> 标签：html, ruby-on-rails, dynamic

我是一名初级程序员，使用 Ruby on Rails。当您必须显示具有不同状态的内容时，我很好奇什么是最好/优雅的方法。

例如：我在页面上有一个可以显示、隐藏（替换为某些文本）或禁用（三种状态）的表单 - 取决于用户权限和其他变量。

最好将表格放在部分中吗？为不同的表单状态制作不同的部分？使用助手来包装逻辑？

此外，当我只需要向 HTML 元素添加（或不添加）类标记时（根据某些变量做出决定），最好的方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:42:26.050

显示/隐藏/视图必须基于一些业务规则，所以你不应该纯粹在前端实现。例如，如果您实际获取数据但使用样式隐藏它，则数据并没有真正隐藏。所以它应该在应用程序的中间层“控制器”中实现。

# java - android quiz 单选按钮不显示正确的值

> ID：12322862
> 
> 赞同：2
> 
> 时间：2012-09-07T17:37:58.363
> 
> 标签：java, android, random

我创建了这个算法来生成随机生成的数字。由于某种原因，假答案和正确答案不会输出正确的结果。我不明白为什么有时会返回答案，但有时正确的答案会返回错误的答案。我想知道数组的改组是否工作不正确。有人可以阐明这个问题。

```
public void randomGenerator()
{

    int Min = 1;
    int Max = 99;

    int numberText  = Min + (int)(Math.random() * ((Max - Min) + 1));
    int numberText2 = Min + (int)(Math.random() * ((Max - Min) + 1));
    num1_text.setText(String.valueOf(numberText));
    num2_text.setText(String.valueOf(numberText2));
    answer = numberText + numberText2;
    Toast.makeText(getBaseContext(), "what is the value for the answer "  + answer, Toast.LENGTH_LONG).show();

    int randomoption1  = Min + (int)(Math.random() * ((Max - Min) + 1));
    int randomoption2 = Min + (int)(Math.random() * ((Max - Min) + 1)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:54:37.573

如果我理解这一点，你想生成一个 1 到 99 之间的数字。

```
int numberText  = Min + (int)(Math.random() * Max)+1;
int numberText2 = Min + (int)(Math.random() * Max)+1; 
```

这很好用:)

# java - 如何根据股票文件名创建 xml 文件

> ID：12322865
> 
> 赞同：1
> 
> 时间：2012-09-07T17:38:16.043
> 
> 标签：java

我有一个包含一些股票价格文件的文件夹，格式为 stockA.txt 我正在尝试创建一个 java 程序，该程序将不带扩展名的文件名存储在 xml 文件中作为节点。例如，file.xml 应采用以下形式：

```
<stockA></stockA>
<stockB></stockB> 
```

问题是我收到以下错误代码：线程“主”org.w3c.dom.DOMException 中的异常：HIERARCHY_REQUEST_ERR：尝试插入不允许的节点。

这是代码

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package xmlfilecreation;

import java.io.File;
import java.util.ArrayList;
import java.util.List;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;
import org.w3c.dom.Document;
import org.w3c.dom.Element;

/**
 *
 * @author Administrator
 */
public class XMLFileCreation {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
        File folder = new File("/Users/Administrator/Documents/TM470/NYSE_EOD/NyseLast2Years/");
        File[] listOfFiles = folder.listFiles();

        List<String> results = new ArrayList<String>();
        for (int i = 0; i < listOfFiles.length; i++)
        {
            results.add(listOfFiles[i].getName().replace(".txt", ""));
            //System.out.println(results.get(i));
        }

        try
        {
            DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder docBuilder = docFactory.newDocumentBuilder();

            //elements
            Document doc = docBuilder.newDocument();

            //root element
            Element rootElement = doc.createElement("Stocks");
            doc.appendChild(rootElement);

            int counter = 0;

            Element myElement;
            for (String item: results)
            {
                myElement = doc.createElement(item);
                doc.appendChild(myElement);
                rootElement.appendChild(myElement);
                counter++;
            }

            System.out.println(counter);

            //write the content into xml file
            TransformerFactory transformerFactory = TransformerFactory.newInstance();
            Transformer transformer = transformerFactory.newTransformer();
            DOMSource source = new DOMSource(doc);
            StreamResult result = new StreamResult(new File("file.xml"));

            transformer.transform(source, result);

            System.out.println("File saved!");
        }
        catch (ParserConfigurationException ex)
        {
            ex.printStackTrace();
        }
        catch(TransformerException ex)
        {
            ex.printStackTrace();
        }
    }
} 
```

我该如何解决这个错误？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:42:50.537

您要附加两次元素，一次在根级别，另一次在`Stocks`标签中。你只需要做一次。

```
for (String item: results) {
    Element myElement = doc.createElement(item);
    // doc.appendChild(myElement); -> You don't need this one
    rootElement.appendChild(myElement);
    counter++;
} 
```

附加到根元素就足够了。

# python - 从逐笔报价数据到烛台

> ID：12322869
> 
> 赞同：7
> 
> 时间：2012-09-07T17:38:32.373
> 
> 标签：python, numpy, scipy, finance, pandas

我已经逐笔勾勒了外汇对的数据

这是一个示例`EURUSD/EURUSD-2012-06.csv`

```
EUR/USD,20120601 00:00:00.207,1.23618,1.2363
EUR/USD,20120601 00:00:00.209,1.23618,1.23631
EUR/USD,20120601 00:00:00.210,1.23618,1.23631
EUR/USD,20120601 00:00:00.211,1.23623,1.23631
EUR/USD,20120601 00:00:00.240,1.23623,1.23627
EUR/USD,20120601 00:00:00.423,1.23622,1.23627
EUR/USD,20120601 00:00:00.457,1.2362,1.23626
EUR/USD,20120601 00:00:01.537,1.2362,1.23625
EUR/USD,20120601 00:00:03.010,1.2362,1.23624
EUR/USD,20120601 00:00:03.012,1.2362,1.23625 
```

完整的刻度数据可以在这里下载 [http://dl.free.fr/k4vVF7aOD](http://dl.free.fr/k4vVF7aOD)

列是：

```
Symbol,Datetime,Bid,Ask 
```

我想将此逐笔报价数据转换为烛台数据（也称为 OHLC Open High Low Close）我会说我想获得一个 M15 时间范围（15 分钟）作为示例

我想使用 Python 和 Pandas 库来完成这个任务。

我已经完成了一小部分工作...逐个读取刻度数据文件

这是代码

```
#!/usr/bin/env python

import pandas as pd
import matplotlib.pyplot as plt
import numpy as np
from matplotlib.finance import candlestick
from datetime import *

def conv_str_to_datetime(x):
    return(datetime.strptime(x, '%Y%m%d %H:%M:%S.%f'))

df = pd.read_csv('test_EURUSD/EURUSD-2012-07.csv', names=['Symbol', 'Date_Time', 'Bid', 'Ask'], converters={'Date_Time': conv_str_to_datetime})

PipPosition = 4
df['Spread'] = (df['Ask'] - df['Bid']) * 10**PipPosition

print(df)

print("="*10)

print(df.ix[0]) 
```

但现在我不知道如何开始剩下的工作......

我想获得类似的数据

```
Symbol,Datetime_open_candle,open_price,high_price,low_price,close_price 
```

蜡烛价格将基于出价栏。

问题的第一部分是在我的脑海中获取第一个 Datetime_open_candle（与所需的时间范围兼容，假设变量的名称是 dt1）和最后一个 Datetime_open_candle（假设这个变量的名称是 dt2）。

之后我可能需要从 dt1 到 dt2 获取数据（而不是 dt1 之前和 dt2 之后的数据）

知道 dt1 和 dt2 以及所需的时间范围，我就可以知道我将拥有的蜡烛数量......

我“只是”知道，对于每根蜡烛，什么是开盘价/最高价/最低价/收盘价。

我正在寻找一种非常快的算法，如果可能的话，一个矢量化算法（如果可能的话），因为刻度数据可能非常大。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-07T18:49:06.047

```
In [59]: df
Out[59]:
                             Symbol      Bid      Ask
Datetime
2012-06-01 00:00:00.207000  EUR/USD  1.23618  1.23630
2012-06-01 00:00:00.209000  EUR/USD  1.23618  1.23631
2012-06-01 00:00:00.210000  EUR/USD  1.23618  1.23631
2012-06-01 00:00:00.211000  EUR/USD  1.23623  1.23631
2012-06-01 00:00:00.240000  EUR/USD  1.23623  1.23627
2012-06-01 00:00:00.423000  EUR/USD  1.23622  1.23627
2012-06-01 00:00:00.457000  EUR/USD  1.23620  1.23626
2012-06-01 00:00:01.537000  EUR/USD  1.23620  1.23625
2012-06-01 00:00:03.010000  EUR/USD  1.23620  1.23624
2012-06-01 00:00:03.012000  EUR/USD  1.23620  1.23625

In [60]: grouped = df.groupby('Symbol')

In [61]: ask =  grouped['Ask'].resample('15Min', how='ohlc')

In [62]: bid = grouped['Bid'].resample('15Min', how='ohlc')

In [63]: pandas.concat([ask, bid], axis=1, keys=['Ask', 'Bid'])
Out[63]:
                                Ask                                 Bid
                               open     high      low    close     open     high      low   close
Symbol  Datetime
EUR/USD 2012-06-01 00:15:00  1.2363  1.23631  1.23624  1.23625  1.23618  1.23623  1.23618  1.2362 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-06-05T10:51:19.540

同时不推荐使用 Overmeire 答案中的语法。

而不是这个：

```
ask =  grouped['Ask'].resample('15Min', how='ohlc')
bid = grouped['Bid'].resample('15Min', how='ohlc') 
```

用这个：

```
ask =  grouped['Ask'].resample('15Min').ohlc()
bid = grouped['Bid'].resample('15Min').ohlc() 
```

# sql - 如何删除 PK 是唯一标识符字段的重复记录

> ID：12322874
> 
> 赞同：0
> 
> 时间：2012-09-07T17:38:46.863
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我想知道我们可以删除 PK 是唯一标识符的重复记录的方式。我必须根据一组字段中的重复值删除记录。我们可以使用选项来使用 Row_Number() 获取临时表，除了第一行，我们可以删除其余的或记录。但我想建立一个班轮查询。有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T17:42:39.733

你可以使用CTE来做这个，不用看你的表结构这里是基本的SQL

```
;with cte as
(
    select *, row_number() over(partition by yourfields order by yourfields) rn
    from yourTable
)
delete
from cte
where rn > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:25:43.750

```
delete from table t using table ta where ta.dup_field=t.dup_field and t.pk >ta.pk
; 
```

# tfs - TFS 2010 升级模板 - 如何在构建失败时关闭自动工作项创建？

> ID：12322876
> 
> 赞同：4
> 
> 时间：2012-09-07T17:38:47.433
> 
> 标签：tfs

我们正在为我们的一个构建使用升级模板，当它失败时，它会创建一个工作项。请记住，这是升级模板，是否有关闭此功能的方法？我没有像在默认模板中那样看到该选项。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T17:42:46.193

这行得通吗？

1-右键单击构建定义

2-编辑构建定义

3- 过程

4-扩展高级

5-创建失败的工作项。将其设置为假

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T10:04:04.187

如果您使用升级模板，则在 TFSbuild.proj 中进行设置（本质上升级模板只运行此文件，因此 Team Build 的行为就像 TFS 2008）。在 proj 文件中，您将看到一个部分

```
<!-- Additional Properties -->

<!--  WorkItemType
 The type of the work item created on a build failure. 
 -->
<WorkItemType>Bug</WorkItemType>

<!--  WorkItemFieldValues
 Fields and values of the work item created on a build failure.

 Note: Use reference names for fields if you want the build to be resistant to field name 
 changes. Reference names are language independent while friendly names are changed depending 
 on the installed language. For example, "System.Reason" is the reference name for the "Reason" 
 field.
 -->
<WorkItemFieldValues>System.Reason=Build Failure;System.Description=Start the build using Team Build</WorkItemFieldValues>

<!--  WorkItemTitle
 Title of the work item created on build failure.
 -->
<WorkItemTitle>Build failure in build:</WorkItemTitle>

<!--  DescriptionText
 History comment of the work item created on a build failure. 
 -->
<DescriptionText>This work item was created by Team Build on a build failure.</DescriptionText>

<!--  BuildLogText
 Additional comment text for the work item created on a build failure.
 -->
<BuildlogText>The build log file is at:</BuildlogText>

<!--  ErrorWarningLogText
 Additional comment text for the work item created on a build failure. 
 This text will only be added if there were errors or warnings.
 -->
<ErrorWarningLogText>The errors/warnings log file is at:</ErrorWarningLogText>

<!--  UpdateAssociatedWorkItems
 Set this flag to enable/disable updating associated workitems on a successful build.
 -->
<UpdateAssociatedWorkItems>true</UpdateAssociatedWorkItems> 
```

您可以注释掉或删除下面的所有内容`<!-- WorkItemType.....`并添加以下内容

```
<!-- Additional Properties -->
<SkipWorkItemCreation>true</SkipWorkItemCreation> 
```

# axwindowsmediaplayer - 媒体播放器例外

> ID：12322881
> 
> 赞同：0
> 
> 时间：2012-09-07T17:39:07.860
> 
> 标签：axwindowsmediaplayer

我正在编写一个 Windows 应用程序。我的表单中有媒体播放器。当我将 URL 设置为类似“fsgfbnhgb”（有问题！）时，播放器本身会显示错误。但这并不好。我有“try”和“catch”块，并且当 URL 为“fgdsfgasgfas”时，在 try 块中没有任何异常！因为玩家自己会捕捉到异常。如何自己为媒体播放器设置错误？

```
try
{
  player.URL = "fdgsdgsdg";
  player.Ctlcontrols.play();
}
catch
{
  snd.Play();
  MessageBox.Show("An error occurred during reading the alarm music path. Check that its directory is valid.", "Alarm music error", MessageBoxButtons.OK, MessageBoxIcon.Error);
} 
```

谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:43:36.230

您可以先在 try{} catch{} 中尝试检查文件是否存在

```
try{
    string url = "sdahgjk";
   if (!File.Exists(url))
        throw new Exception("Exception Message Here");
   player.Url = url;
   player.Ctlcontrols.play();
        }
        catch
        {
            snd.Play();
            MessageBox.Show("An error occurred during reading the alarm music path. Check that its directory is valid.", "Alarm music error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        } 
```

# ruby-on-rails - 从 after_post_process 或 after_save 获取 id，或者 bin

> ID：12322883
> 
> 赞同：1
> 
> 时间：2012-09-07T17:39:12.763
> 
> 标签：ruby-on-rails, ruby, amazon-s3, paperclip, after-save

我已经为此奋斗了一段时间，您的帮助肯定会非常感激。

我已经建立了一种签署 pdf 文档的方法，您可以在[此处](https://stackoverflow.com/questions/12315643/paperclip-processor-timeout-on-s3)找到，现在离签署我的文件只有一步之遥。

我想异步执行此操作，但首先我需要了解如何同步执行此操作。

所以我尝试了两种不同的方法，在 post_process 之后：

```
after_post_process do |receipt|
    if receipt.receipt_file_changed?

      require 'aws-sdk'
          logger.debug("RECEIPT ID: #{self.inspect}")
          file = receipt.receipt_file.queued_for_write[:original]
          s3=AWS::S3.new(
          access_key_id: S3_CONFIG["access_key_id"],
          secret_access_key: S3_CONFIG["secret_access_key"])
          bucket_name = S3_CONFIG["bucket"]

          b = s3.buckets[bucket_name]
          filen = File.basename(file.path)
          outputF = "original/teste.pdf"

          o = b.objects[outputF]
          o.write(file: file.path)

    end
  end 
```

我希望能够将文件发送到类似于`/original/1/myfilename.pdf`1 将是我的receipt_id 的路径（并且在 post_process 之后为空）。

然后我用 after_save 尝试了一种不同的方法，但是receipt_file.to_file(:original) 不是一个有效的调用......

```
after_save do |receipt|
    if receipt.receipt_file_changed?

      require 'aws-sdk'
          logger.debug("RECEIPT ID: #{receipt.inspect}")

          s3=AWS::S3.new(
          access_key_id: S3_CONFIG["access_key_id"],
          secret_access_key: S3_CONFIG["secret_access_key"])
          bucket_name = S3_CONFIG["bucket"]

          b = s3.buckets[bucket_name]
          filen = File.basename(receipt_file_file_name)
          outputF = "original/teste.pdf"

          o = b.objects[outputF]
          o.write(file: receipt.receipt_file.to_file(:original))

    end
  end 
```

如何获取文件并将其再次上传回 S3？

**编辑**

经过一些研究，我阅读了如何从[亚马逊](http://docs.amazonwebservices.com/AWSRubySDK/latest/frames.html)加载文件，现在的问题是我的文件内容是空的......我做错了什么？

```
after_save do |receipt|
    if receipt.receipt_file_changed?

      require 'aws-sdk'

          logger.debug("I was here inside after_save")
          s3=AWS::S3.new(
          access_key_id: S3_CONFIG["access_key_id"],
          secret_access_key: S3_CONFIG["secret_access_key"])
          bucket_name = S3_CONFIG["bucket"]

          b = s3.buckets[bucket_name]
          filen = File.basename(receipt_file_file_name)
          logger.debug("Filename is #{filen}")
          path = "original/#{receipt.id}/#{filen}"
          o = b.objects[path]

          require 'tempfile'

          ext= File.extname(filen)

          file = Tempfile.new([File.basename(filen,ext),ext], :encoding => 'ascii-8bit')
          # streaming download from S3 to a file on disk

          begin
            o.read do |chunk|
                file.write(chunk)
            end
          end
          file.close

          logger.debug("File is #{file.inspect}")

          o.write(file: signPdf(file).path)
          file.unlink

    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:21:02.277

将这个问题分成几部分后，我注意到真正的问题是在下载和写入本地磁盘的过程中。所以我问了这个[问题](https://stackoverflow.com/questions/12352230/using-aws-sdk-to-download-files-from-s3-encoding-not-right)，并寻求解决方法。最后得到了保存后的代码：

```
 after_save do |receipt|
    if receipt.receipt_file_changed? && !@receipt.receipt_file.url[".pdf"] 

      require 'aws-sdk'

          s3=AWS::S3.new(
          access_key_id: S3_CONFIG["access_key_id"],
          secret_access_key: S3_CONFIG["secret_access_key"])
          bucket_name = S3_CONFIG["bucket"]

          b = s3.buckets[bucket_name]
          filen = File.basename(receipt_file_file_name)

          path = "original/#{receipt.id}/#{filen}"
          o = b.objects[path]

          require 'open-uri'
          require 'tempfile'

          ext= File.extname(filen)
          tfile = Tempfile.new([File.basename(filen,ext),ext])
          begin
            open(tfile.path,"wb") do |file|
                file << open(receipt.receipt_file.url,:ssl_verify_mode => OpenSSL::SSL::VERIFY_NONE).read
                o.write(file: signPdf(file).path, :acl => :public_read)
            end
          ensure
            tfile.close!
          end

    end
  end 
```

# java - 如何将 java 源附加到项目？

> ID：12322884
> 
> 赞同：3
> 
> 时间：2012-09-07T17:39:20.890
> 
> 标签：java, intellij-idea, websphere, war, web-deployment

我正在 IDEA 11 中开发一个 WebSphere portlet。该 portlet 使用了一些在门户网站上定义的方法。我的 PC 上没有生产环境编译的类或 jar，但我有源代码。

我可以以某种方式将 .java 文件“附加”到我的项目中，以构建将部署到生产环境中的 war 文件吗？还是我必须先构建生产源（这似乎更难，因为有很多依赖项）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:19:33.647

如果这只是为了在您等待 JAR/编译类时测试某些内容，您可能只需要引入 API（例如，希望没有外部依赖项的引用接口）即可做到这一点。然后，打开编译好的 WAR 并手动删除那些 .class 文件，以避免与服务器上的真实代码发生冲突。

最大的问题是，你肯定会遇到试图限制对真实代码的公开的问题，除非其余的代码被很好地设置为公开一个依赖非常有限的 API。

# c# - VS2010 上的 TFS，合并代码问题

> ID：12322887
> 
> 赞同：4
> 
> 时间：2012-09-07T17:39:30.460
> 
> 标签：c#, visual-studio-2010, tfs, coded-ui-tests

最近我们遇到了 TFS 和我们的代码库的问题。我们有一段使用 Webdriver 的测试，还有一段使用 Coded UI。最近，在推出新版本后，我们在合并代码时遇到了问题。有些文件夹显示为文件夹的白色轮廓，我们可以右键单击并选择“包含在项目中”。我们还注意到一些文件丢失了，我们无法“获取最新”来获取它们。我们必须采取一些方法来做到这一点（搁置代码、删除本地文件、获取最新的、合并代码）。即使我们这样做了，我们仍然有一些问题。

但是我们遇到的主要问题是我们的编码 UI 地图正在破坏。而不是正常的结构，例如：

.uitest

- - 。CS

----.designer.cs

当我们合并新代码时，UI 映射如下所示：

。CS

----.designer.cs

.uitest

我在 notepad++ 中打开 .csproj 并注意到 .cs 和 .designer.cs 文件不再依赖 .uitest 文件。现在.cs文件没有依赖，.designer依赖.cs文件。我们可以相对轻松地修复它，但它会在每次构建中不断中断，并且我们需要修复几张地图。问题究竟出在哪里？另外，提到我的第一个问题是文件未包含在项目中，问题可能出在哪里？

我在 MSDN 论坛上问过同样的问题，但我收到的建议我已经尝试过了，比如创建一个新的工作区，因为另一个可能已损坏。仍然没有工作。

提前致谢

编辑：在 MSDN 论坛上建议以管理员身份运行 VS。那也没有用。不太确定是什么导致了这个问题。它似乎并没有给每个人带来问题，因为一些新版本会给某些人带来问题，但不会给其他人带来问题。更多信息是我在 Windows 7 64 位和 Visual Studio Ultimate 2010 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:54:28.083

在过去，我遇到过听起来相似的 TFS 问题，我们的 2 位开发人员在将文件合并到数据存储时似乎会定期产生问题，文件夹和文件会显示为不包含，而项目文件会进入（破坏一切获取最新信息后）。最终问题消失了，但我们从未真正找到源头。我相信这与我们的网络有关 - 可能与我们将工作文件夹映射到指向共享开发服务器的网络驱动器的方式相结合的开关问题。此外，其中一个工作站似乎存在 Windows 资源管理器在开发服务器共享上看不到文件更新的问题......开发人员必须点击 \servername\C$\sharefolder 然后再次点击他的映射网络驱动器，然后更新才会刷新。（而他的签到造成的问题最多）......我们运行了 VS2008、TFS2010

只是一些想法...

# javascript - 球反弹 - javascript

> ID：12322888
> 
> 赞同：0
> 
> 时间：2012-09-07T17:39:35.070
> 
> 标签：javascript, jquery

```
function randomXToY(minVal,maxVal,floatVal)
  {
   var randVal = minVal+(Math.random()*(maxVal-minVal));
   return typeof floatVal=='undefined'?Math.round(randVal):randVal.toFixed(floatVal);
  }

  Ball = (function() {

   // constructor
 function Ball(x,y,radius,color){
  this.center = {x:x, y:y};  
  this.radius = radius;               
  this.color = color;
  this.dx = 2;               
  this.dy = 2;        
  this.boundaryHeight = $('#ground').height();
  this.boundaryWidth = $('#ground').width();

  this.dom  = $('<p class="circle"></p>').appendTo('#ground');

  // the rectange div a circle
  this.dom.width(radius*2);
  this.dom.height(radius*2);
  this.dom.css({'border-radius':radius,background:color});

  this.placeAtCenter(x,y);         
}

// Place the ball at center x, y
Ball.prototype.placeAtCenter = function(x,y){
  this.dom.css({top: Math.round(y- this.radius), left: Math.round(x - this.radius)});
  this.center.x = Math.round(x);        
  this.center.y = Math.round(y);             
};

Ball.prototype.setColor = function(color) {
  if(color) {
    this.dom.css('background',color);
  } else {
   this.dom.css('background',this.color);
 }           
};

// move and bounce the ball
 Ball.prototype.move = function(){
  var diameter = this.radius * 2;                                               
  var radius = this.radius;  
  if (this.center.x - radius < 0 || this.center.x + radius > this.boundaryWidth ) {
   this.dx = -this.dx;
 }
  if (this.center.y - radius < 0 || this.center.y  + radius > this.boundaryHeight ) {
    this.dy = -this.dy;
  }
  this.placeAtCenter(this.center.x + this.dx ,this.center.y +this.dy);

};

return Ball;
})();

var number_of_balls = 5;
var  balls = [];   

$('document').ready(function(){
  for (i = 0; i < number_of_balls; i++) { 
  var boundaryHeight = $('#ground').height();
  var boundaryWidth = $('#ground').width();
  var y = randomXToY(30,boundaryHeight - 50);
  var x = randomXToY(30,boundaryWidth - 50);
  var radius = randomXToY(15,30);
   balls.push(new Ball(x,y,radius,     '#'+Math.floor(Math.random()*16777215).toString(16))); 
 }
 loop(); 
 });

loop = function(){
 for (var i = 0; i < balls.length; i++){
  balls[i].move();
}

   setTimeout(loop, 8);    
}; 
```

我从未在 javascript 中使用过 oops 概念。当球相互接触时如何改变球的颜色？

这是链接：http: [//jsbin.com/imofat/1/edit](http://jsbin.com/imofat/1/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:52:23.087

您目前没有与球进行任何互动。您可以做的是检查两个球是否在彼此“内部”，并在这种情况下更改颜色：http: [//jsbin.com/imofat/1491/](http://jsbin.com/imofat/1491/)。

```
// calculates distance between two balls
var d = function(a, b) {
  var dx = b.center.x - a.center.x;
  var dy = b.center.y - a.center.y;
  return Math.sqrt(dx*dx + dy*dy);
}; 
```

和：

```
// for each ball
for(var i = 0; i < balls.length; i++) {
  // check against rest of balls
  for(var j = i + 1; j < balls.length; j++) {
    var a = balls[i];
    var b = balls[j];
    // distance is smaller than their radii, so they are inside each other
    if(d(a, b) < a.radius + b.radius) {
      // set to some other color using your random color code
      a.setColor('#'+Math.floor(Math.random()*16777215).toString(16));
      b.setColor('#'+Math.floor(Math.random()*16777215).toString(16));
    }
  }
} 
```

尽管如此，还是有一些需要改进的地方：

*   只要球在彼此内部，它们就会改变颜色，而不仅仅是一次。
*   如果您希望它们“触摸”，您可能需要实现某种弹跳效果以使其更逼真。

# ruby-on-rails - 如何从活动管理员进入用户页面？

> ID：12322889
> 
> 赞同：0
> 
> 时间：2012-09-07T17:39:40.563
> 
> 标签：ruby-on-rails, devise, activeadmin

我在我的 Rails 应用程序中使用活动管理员。

我想从活动管理页面进入用户的帐户页面，因为我想检查用户到底看到了什么。

我以为我可以解密设计加密的密码，但我发现我不能这样做[Rails Devise，如何解密密码？](https://stackoverflow.com/questions/5555934/rails-devise-how-to-unencrypt-a-password)

我尝试使用加密密码进入该网站，但我不能。

我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:08:34.837

如果它如此重要，您可以从 db 复制加密密码并为该用户粘贴自己的加密密码。您可以通过`rails c`. 在您的操作之后再次重写密码。但这是一个不好的方法。您必须为您的应用程序编写一些测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:32:08.737

Devise Wiki How to 中有一个示例： [How To: Sign in as another user if you are an admin](https://github.com/plataformatec/devise/wiki/How-To%3a-Sign-in-as-another-user-if-you-are-an-admin)

建议的解决方案会替换会话中的当前用户，因此我认为您将退出 ActiveAdmin。

# c++ - 静态对象的同步

> ID：12322890
> 
> 赞同：1
> 
> 时间：2012-09-07T17:39:41.957
> 
> 标签：c++, multithreading, static, thread-safety

我有以下代码 C++ 伪代码

```
class A
{
 private:
 B s_staticvar;

 public:
 static void doSomething()
 {
 }
} 
```

许多线程可以调用doSomething()。所有线程只读取 s_staticvar 并且不修改它们。我的问题是我们必须在阅读静态变量之前锁定它吗？

对象 B 的非原子读取会导致同步问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T17:42:20.667

您可以安全地从多个线程中读取数据。不需要锁定。这些线程甚至不会注意到对方。只有您需要确保在其他线程启动之前完全准备好您的变量。

在多核/多处理器环境中，您的数据的多个副本可能会出现在不同处理器的缓存中。只要它们都相同，这不是问题。

# .htaccess - .htaccess 重写操作方法

> ID：12322893
> 
> 赞同：0
> 
> 时间：2012-09-07T17:39:45.130
> 
> 标签：.htaccess, rewrite

> **可能重复：**
> [使用 htaccess 文件重定向](https://stackoverflow.com/questions/11669695/redirect-using-htaccess-file)

你好（非常简单的问题），

如何映射

```
mydomain/language/somepage 
```

至

```
mydomain/somepage.php 
```

物理页面当然是 mydomain/somepage.php

想法是/en/somepage、/fr/somepage、/de/somepage 都指向somepage.php（我打算用php 获取URL 中传递的语言）。

更具体地说，我希望 apache 理解从请求 URI 中抑制 /fr /en /de 并提供正确的文档，我的物理树没有任何 /fr /en /de 子目录：即

```
root/fr/subdir/subsubdir/somepage 
```

应该指向

```
root/subdir/subsubdir/somepage.php 
```

谢谢 ！

*** 编辑 ***

所以，我想我对 URL 重写的工作原理有了更好的了解，所以我来到了这里。它坏了，我实际上很讨厌正则表达式，所以如果有人可以帮我解决它，我会喜欢它！^^

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond ^[a-z]{2}$/%{REQUEST_FILENAME}\.php -f
RewriteRule ^([a-z]{2})/(.*)$ $2.php?lang=$1 
```

说明：URL 将以以下形式传递给 apache

```
root/(fr|de|en|whatever)/document 
```

并且（应该）以/传递给php的形式重写

```
root/document.php?lang=(fr|de|en|whatever) 
```

我希望它足够清楚，TYVM！

此外，能够传递子目录以及

```
root/(fr|de|en|whatever)/sub/.../document 
```

会很好。我需要进一步解释 htaccess 的常量，例如 %{REQUEST_FILENAME}, %{REQUEST_URI}, ...

泰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:55:34.220

如果您尝试将用户重定向到 apache 中的某个 URL，那么本教程应该可以为您提供一个很好的指导：

[Apache mod_rewrite](http://www.yourhtmlsource.com/sitemanagement/urlrewriting.html)

但是，对于您的网站，我认为更好的方法是使用语言选项作为查询字符串。我觉得这样你可以更好地处理基于语言的网站。例如，如果您的网站有 30 个不同国家/地区的本地化版本，您将需要为所有 30 个国家/地区执行 mod_rewrite，当您需要更新您的网站时，您必须全部修复它们。但是，如果您使用查询字符串。您`somepage.php`可以获取查询字符串值并基于该值呈现必要的页面。

我认为它更容易实现。（或者也许这是一种错误的做法，我不知道缺点）

# android - Android SDK 需要哪个 JDK？

> ID：12322898
> 
> 赞同：-5
> 
> 时间：2012-09-07T17:39:55.647
> 
> 标签：android, sdk, java

祝大家有美好的一天，小问题：

JDK 6 或 JDK 7 需要最新的 Android SDK？哪个更喜欢？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:42:27.093

正如Android要求所写：

*   Eclipse 3.6.2 (Helios) 或更高版本 注意：最新版本的 ADT 不再支持 Eclipse 3.5 (Galileo)。
*   Eclipse JDT 插件（包含在大多数 Eclipse IDE 包中）
*   JDK 6（仅 JRE 是不够的）
*   Android 开发工具插件（推荐）
*   与 Gnu Compiler for Java (gcj) 不兼容

[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T17:50:19.643

如果不确定，请获取 JDK 7。它有效并且是更新的。

# javascript - 在 JavaScript 中包含 jQuery

> ID：12322900
> 
> 赞同：0
> 
> 时间：2012-09-07T17:40:05.020
> 
> 标签：javascript, jquery

我有两段代码想一起工作，但我没有设法将这个 jQuery 片段正确地集成到 JavaScript 中……</p>

JavaScript：

```
(function(){

// Creates the plugin
tinymce.create('tinymce.plugins.mygallery', {

    // Creates control instances based on the control's ID.
    createControl : function(id, controlManager) {
        if (id == 'mygallery_button') {

            // Creates the button
            var button = controlManager.createButton('mygallery_button', {
                title : 'MyGallery Shortcode', // Title of the button
                image : '../wp-includes/images/smilies/icon_mrgreen.gif', // Path to the button's image
                onclick : function() {

                    // Triggers the thickbox
                    var width = jQuery(window).width(), H = jQuery(window).height(), W = ( 720 < width ) ? 720 : width;
                    W = W - 80;
                    H = H - 184;
                    tb_show( 'My Gallery Shortcode', '#TB_inline?width=' + W + '&height=' + H + '&inlineId=mygallery-form' );
                }
            });
            return button;
        }
        return null;
    }
});

// Registers the plugin
tinymce.PluginManager.add('mygallery', tinymce.plugins.mygallery);

// Executes this when the DOM is ready
jQuery(function(){

// Creates a form to be displayed everytime the button is clicked
    var form = jQuery('<div id="mygallery-form"><table id="mygallery-table" class="form-table">\
        <form id="myForm">\
            <div id="input1" style="margin-bottom:4px;" class="clonedInput">\
                Name: <input type="text" name="name1" id="name1" />\
            </div>\
            <div>\
                <input type="button" id="btnAdd" value="add another name" />\
                <input type="button" id="btnDel" value="remove name" />\
            </div>\
        </form>\

        </div>');

    […]
});
})() 
```

jQuery：

```
$(document).ready(function() {
        $('#btnAdd').click(function() {
            var num     = $('.clonedInput').length; // how many "duplicatable" input fields we currently have
            var newNum  = new Number(num + 1);      // the numeric ID of the new input field being added

            // create the new element via clone(), and manipulate it's ID using newNum value
            var newElem = $('#input' + num).clone().attr('id', 'input' + newNum);

            // manipulate the name/id values of the input inside the new element
            newElem.children(':first').attr('id', 'name' + newNum).attr('name', 'name' + newNum);

            // insert the new element after the last "duplicatable" input field
            $('#input' + num).after(newElem);

            // enable the "remove" button
            $('#btnDel').attr('disabled','');

            // business rule: you can only add 5 names
            if (newNum == 5)
                $('#btnAdd').attr('disabled','disabled');
        });

        $('#btnDel').click(function() {
            var num = $('.clonedInput').length; // how many "duplicatable" input fields we currently have
            $('#input' + num).remove();     // remove the last element

            // enable the "add" button
            $('#btnAdd').attr('disabled','');

            // if only one element remains, disable the "remove" button
            if (num-1 == 1)
                $('#btnDel').attr('disabled','disabled');
        });

        $('#btnDel').attr('disabled','disabled');
}); 
```

仅供参考：JS 使用表单（WordPress）和 jQuery 片段创建一个弹出窗口，我想实现用户可以动态添加更多输入字段的功能。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:51:39.050

您可以将 jQuery 代码段放在您的 javascript 代码之后。这不应该是问题，因为您的 jQuery 代码只是绑定事件。

但是，我不知道#btnAdd 和#btnDel 在哪里。问题可能是元素是在运行 jQuery 代码之后创建的，因此当您调用它时： `$('#btnAdd').click(function(){...});` 元素 #btnAdd 不存在。

尝试这个： `$(document).on('click', '#btnAdd', function(){...});`

这会将点击事件绑定到文档（始终存在）而不是#btnAdd。但是，为了提高性能，您应该将其绑定到 #btnAdd 的父级，当文档准备好时您肯定知道该父级存在。

# java - 带有安全标头的 SOAP Web 服务

> ID：12322901
> 
> 赞同：1
> 
> 时间：2012-09-07T17:40:06.050
> 
> 标签：java, web-services, jakarta-ee, soap

我将为我的 Java EE 项目实现带有安全标头的 SOAP Web 服务。我正在开发服务器端应用程序，我必须在其中验证标头。我将第一次做这份工作。任何人都可以为此提供一些有价值的想法并帮助我吗？欢迎任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T18:08:13.237

如果在 HTTP 标头中实现了安全性，那么您可以从消息上下文（从 WebServiceContext.get(MessageContext.HTTP_REQUEST_HEADERS) 返回）获取 HTTP 标头的映射。

这里有一个很好的介绍教程：[http ://www.mkyong.com/webservices/jax-ws/application-authentication-with-jax-ws/](http://www.mkyong.com/webservices/jax-ws/application-authentication-with-jax-ws/)

或者，WS-Security 标准在 SOAP 标头中实现身份验证信息。可以通过编写部署在端点上的 SOAPHandler 来完成验证。您可以在这里找到一个示例：[https ://forums.oracle.com/forums/thread.jspa?threadID=2335032&tstart=15](https://forums.oracle.com/forums/thread.jspa?threadID=2335032&tstart=15)

# java - Liferay：从 init() 获取 PortletID 和 companyID

> ID：12322904
> 
> 赞同：2
> 
> 时间：2012-09-07T17:40:14.870
> 
> 标签：java, liferay, portlet, init

也许通过 init(PortletConfig) 中的 PortletConfig

问题是使用

```
((PortletConfigImpl) portletConfig).getPortletId(); 
```

不再允许，因为在 package.properties 中添加 portal-impl.jar 会在尝试执行构建 ant 目标时抛出异常，表示不再允许这样做

对于 companyID，我直接不知道从哪里开始。我目前正在使用

```
long companyId = CompanyLocalServiceUtil.getCompanies().get(0).getCompanyId(); 
```

但是一旦我得到了不止一家公司，它就会失败

如果我能以某种方式获得 Portlet 对象，我认为获得 portletId 和 companyId 就足够了

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T20:13:32.950

我不是 100% 确定您需要什么，但如果您只有一家公司，您可以使用以下代码获取公司 ID：

```
PortalUtil.getDefaultCompanyId() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T07:33:13.340

添加`portal-impl.jar`到插件一直是问题的根源，而且从来都不是正确的做法。有了这个，我很高兴看到构建脚本现在似乎正在积极禁止它。正如在[这个问题](https://stackoverflow.com/questions/12213294)中所讨论的，您不应该这样做，并且 portlet API 不支持您想要的。严格来说，您没有必要的上下文来了解已将 portlet 实例添加到哪个公司。

请记住：可能（并且通常是）只有一个 portlet 类的实例，无论 portlet 实例是否放置在任何页面上 - 并且与整个门户中存在多少 portlet 实例无关，跨越所有公司和网站。

你不应该走这条路，而是解释你想用它来实现什么。我们可能会在这方面为您提供帮助，但无法帮助您学习如何实现不可能的事情，或者，如果您发现漏洞，将无法维护并在下一次更新时随机中断，因为它远远超出规范。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T09:02:09.790

您可以通过get `Portlet`from方法获取 from ，然后使用：`PortletConfig``portletId`[`Portletconfig.getPortletName()`](http://docs.liferay.com/portlet-api/2.0/javadocs/javax/portlet/PortletConfig.html#getPortletName%28%29 "Portlet API 2.0 文档")[`PortletLocalServiceUtil.getPortletById(String)`](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portal/service/PortletLocalServiceUtil.html#getPortletById%28java.lang.String%29 "Liferay 6.1 文档")

```
// I have not tried this but I think it should work
String portletName = Portletconfig.getPortletName();
Portlet portlet = PortletLocalServiceUtil.getPortletById(portletName);
long companyId = portlet.getCompanyId(); 
```

然后您可以从 Portlet 轻松获取`companyId`.

*正如 Olaf Kock 在他的***回答***[中](https://stackoverflow.com/a/12347117/468763 "奥拉夫·科克（Olaf Kock）回答了同样的问题")所说的那样，如果您了解公司的某些方面，这里是另一个[答案](https://stackoverflow.com/a/12067525/468763 "如何在 Liferay 中获取全局（公司）组 ID？")，它为您提供了一些替代方法来获取由于 Olaf Kock 解释的原因，`companyId`这种方法不会从 portlet 实例中获取`companyId`*

 *试试这种方法，看看是否有帮助。*

# cuda - CUDA：了解 PTX 信息

> ID：12322906
> 
> 赞同：9
> 
> 时间：2012-09-07T17:40:23.903
> 
> 标签：cuda

我在 PTX 信息上没有找到太多有用的信息，`--ptxas-options=-v` 我发现了一个 2008 NVCC pdf，它有一个小简介，但没有详细信息。
1) 是什么`64 bytes cmem[0], 12 bytes cmem[16]`意思？我认为它指的是持续的记忆。我在代码中没有使用任何常量内存，所以这必须来自编译器。（什么进入 RO 内存？）
2) 是什么`49152+0 bytes smem`意思？是的，是共享内存，但是两个#是什么意思呢？
3）是否有文档可以帮助我解决这个问题？（它叫什么？）
4) 我在哪里可以找到解释 *.ptx 文件的文档？（我希望能够阅读/理解 cuda 汇编代码。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T18:27:20.193

1.  `cmem`[在这里](https://stackoverflow.com/q/12290708/929437)讨论。在您的情况下，这意味着 64 个字节用于将参数传递给内核，而 12 个字节被编译器生成的常量占用。

2.  如果是`smem`，第一个数字是您的代码请求的数据量，第二个数字 ( `0`) 表示用于系统用途的内存量。

3.  我不知道有关详细`ptxas`输出格式的任何官方信息。例如，在“CUDA 占用计算器”中，他们只是简单地说对值求和而`smem`没有任何解释。

4.  [nVidia 网站](http://developer.nvidia.com/cuda/nvidia-gpu-computing-documentation)上有几个 PTX 文档。最基本的是[PTX: Parallel Thread Execution ISA Version 3.0](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/ptx_isa_3.0.pdf)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:41:48.027

请参阅“[其他 NVCC 用法](http://docs.nvidia.com/cuda/cuda-compiler-driver-nvcc/index.html#miscellaneous-nvcc-usage)”。他们提到，恒定的银行分配是**特定于配置文件的**。

在[PTX 指南](http://docs.nvidia.com/cuda/parallel-thread-execution/index.html)中，他们说除了 64KB 常量内存之外，他们还有 10 个用于常量内存的银行。驱动程序可以在这些区域中分配和初始化常量缓冲区，并将指向缓冲区的指针作为内核函数参数传递。

我想，为 nvcc 提供的配置文件将处理哪些常量进入哪个内存。***无论如何，如果每个常量内存cmem[n] 小于 64KB***，我们不必担心，因为每个 bank 的大小为 64KB，并且对网格中的所有线程都是通用的。

# ubuntu - 如何以编程方式在 sublime 2 上安装 zen 编码？

> ID：12322909
> 
> 赞同：1
> 
> 时间：2012-09-07T17:40:43.120
> 
> 标签：ubuntu, sublimetext2, emmet

我想知道是否有一种以编程方式安装 zen 编码插件的方法。我做了研究，但我发现的唯一方法是通过[Sublime Console](http://net.tutsplus.com/tutorials/tools-and-tips/sublime-text-2-tips-and-tricks/)。我正在为这个答案而苦苦挣扎，但它从未出现过。

我这样做是因为我有一个在 Ubuntu 中安装 Sublime 的[脚本](https://github.com/waldyr/Sublime-Installer)，而且只安装 sublime 不是很好。如果我让用户有机会自动安装和配置 zen 编码，它将改进脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T09:00:47.397

Sublime Text 2 的每个插件都可以通过简单地将其内容复制到*Packages*文件夹中来安装（在 ST2 中找到“Browse Packages...”菜单项来获取它）。

因此，您需要做的就是克隆 Zen Coding 插件仓库（https://github.com/sublimator/ZenCoding 或[https://github.com/sergeche/emmet-sublime](https://github.com/sergeche/emmet-sublime)，后者可能还不能工作，如果你' re on Linux x32) 到 Packages 文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-08T22:33:02.327

请注意，ZenCoding 的继任者是 Emmet。它已与 emmet-sublime 合并：[https ://github.com/sergeche/emmet-sublime](https://github.com/sergeche/emmet-sublime)

合并讨论：[https ://github.com/wbond/package_control_channel/pull/1067#issuecomment-16730933](https://github.com/wbond/package_control_channel/pull/1067#issuecomment-16730933)

# android - 带有嵌入式视频的 WebView 在后台播放

> ID：12322914
> 
> 赞同：7
> 
> 时间：2012-09-07T17:41:16.180
> 
> 标签：android, webview, android-webview

我有一个托管嵌入式视频的 WebView。当我降级 Webview 时，视频的声音会继续播放。我怎样才能阻止这个？我确实尝试`webview.destroy();`过，但是当我再次尝试打开 WebView 时，该强制关闭了应用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-01T05:13:49.957

为此，您必须调用 WebView 的[`onPause()`](http://developer.android.com/reference/android/webkit/WebView.html#onPause%28%29)和[`onResume()`](http://developer.android.com/reference/android/webkit/WebView.html#onResume%28%29)方法。您通常在 Activity 上执行此操作`onPause()`，`onResume()`但您也可以在以某种方式隐藏 WebView 时执行此操作，并且它的内容也应该停止执行他们正在执行的任何操作，例如运行 Javascript 或播放 HTML5 视频。

如果您在 11 之前的 API 级别中需要这些方法，则可以像这样使用反射：`WebView.class.getMethod("onPause").invoke(myWebView);`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-04T13:15:07.950

我假设“当我降级 Webview 时”是当您关闭视图时。无论如何，我也尝试了相同的方法 - 调用 webview.destroy()，并遇到了和你一样的崩溃。

唯一有效的方法是调用 _webView.loadData("", "text/html", "utf-8"); 从我的活动完成（）方法。

（基于这个答案：[How do I stop Flash after leave a WebView?](https://stackoverflow.com/questions/6201615/how-do-i-stop-flash-after-leaving-a-webview?rq=1)这并没有真正起作用，因为直到很久以后才调用 onDestroy）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T22:05:44.700

你是什​​么意思：“当我降级 Webview 时，视频的声音会继续播放”。

这是自定义应用程序吗？如果是这样，您需要使用 android:hardwareAccelerated=true 构建您的应用清单文件（假设您在 ICS 或 JB 上执行此操作）。如果没有硬件加速，您只会听到音频但看不到视频（听起来就像您看到的那样）。以下是有关更改清单文件的一些信息：http: [//developer.android.com/guide/topics/graphics/hardware-accel.html](http://developer.android.com/guide/topics/graphics/hardware-accel.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-14T21:51:08.773

您还可以执行 Java 脚本以在活动的 onPause 生命周期回调上暂停视频/音频，在下面的示例中，我已经为音频完成了它（它有效）。希望将“音频”更改为“视频”对您有用。

```
 @Override
protected void onPause() {

    executeJavascript("javascript:document.querySelector('audio').pause();", new ValueCallback() {
        @Override
        public void onReceiveValue(Object value) {
            Trace.d(TAG, value.toString());
        }
    });

    super.onPause();
} 
```

和

```
 private void executeJavascript(String javascript, ValueCallback callback){
    if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.KITKAT) {
        mWebView.evaluateJavascript(javascript, callback);
    } else {
        mWebView.loadUrl(javascript);
    }
} 
```

# c++ - 用于存储大数的数据类型

> ID：12322915
> 
> 赞同：-1
> 
> 时间：2012-09-07T17:41:18.220
> 
> 标签：c++, gcc, types, largenumber

我有一个程序需要存储几个数字。最大的可以是 10^15 的数量级。我应该如何存储号码。

我正在使用 Gcc 4.3.2 编译器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T17:41:43.197

`long long`适合 10^15，因为它是 64 位。

要查看所有数据类型的限制值，您可以使用`<limits>`标题。

```
#include <iostream>
#include <limits>    

int main() {
    //print maximum of various types
    std::cout << "Maximum values :\n";
    std::cout << "Short : " << std::numeric_limits<short>::max() << std::endl;
    std::cout << "Int : " << std::numeric_limits<int>::max() << std::endl;
    std::cout << "Long : " << std::numeric_limits<long>::max() << std::endl;
    std::cout << "Long Long: " << std::numeric_limits<long long>::max() << std::endl;
    std::cout << "Float : " << std::numeric_limits<float>::max() << std::endl;
    std::cout << "Double : " << std::numeric_limits<double>::max() << std::endl;

    //print minimum of various types
    std::cout << "\n";
    std::cout << "Minimum Values: \n";
    std::cout << "Short : " << std::numeric_limits<short>::min() << std::endl;
    std::cout << "Int : " << std::numeric_limits<int>::min() << std::endl;
    std::cout << "Long : " << std::numeric_limits<long>::min() << std::endl;
    std::cout << "Long Long: " << std::numeric_limits<long long>::min() << std::endl;
    std::cout << "Float : " << std::numeric_limits<float>::min() << std::endl;
    std::cout << "Double : " << std::numeric_limits<double>::min() << std::endl;
} 
```

哪些输出（在我的机器上）：

```
Maximum values :
Short : 32767
Int : 2147483647
Long : 2147483647
Long Long: 9223372036854775807
Float : 3.40282e+038
Double : 1.79769e+308

Minimum Values: 
Short : -32768
Int : -2147483648
Long : -2147483648
Long Long: -9223372036854775808
Float : 1.17549e-038
Double : 2.22507e-308 
```

# visual-studio-2010 - 一些解决方案文件仍然有 VS10 图标

> ID：12322916
> 
> 赞同：1
> 
> 时间：2012-09-07T17:41:18.363
> 
> 标签：visual-studio-2010, visual-studio-2012

我已经安装了 Visual Studio 2012（又名 11）并卸载了 2010。但是我注意到解决方案（.sln）文件显示一个图标，上面有一个小“10”，而其他有“11”，没有看似模式。它们都是我在 2010 年开始使用但在 11 年开始使用的解决方案。为什么会这样？

**编辑：** 我注意到如果我在文本编辑器中打开 .sln 文件，“10”图标对应于：

```
Microsoft Visual Studio Solution File, Format Version 11.00 
```

而“11”图标对应：

```
Microsoft Visual Studio Solution File, Format Version 12.00 
```

是的，你没有看错 （！！！）

**编辑：** 如果我将文本编辑器中的 .sln 文件从 11.00 更改为 12.00 会怎样？这是推荐的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T16:48:29.177

据我所知：

如果您在 Visual Studio 中进行任何更改导致其更改 .sln 文件（即在解决方案级别添加文本文件，然后将其删除，然后执行“全部保存”），.sln 文件的标题将更改为：

```
Microsoft Visual Studio Solution File, Format Version 12.00
# Visual Studio 2012 
```

图标将变为“11”。

如果需要，您可以手动更改标题，同样的事情也会发生。

但是，图标和标题真的无关紧要......您可以保持原样，一切都会正常工作，因为文件格式与VS2010相同。

我不确定如果您将标题更改为上述 12.00 然后尝试在 VS2010 中打开它会发生什么

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T21:18:38.133

忽略文件格式版本号。如果不是 VS2003，版本 7.1，它将与 VS 版本号保持同步。本质上是 VS2002 的主要维护版本，该版本首先引入了 .NET 支持。所以它现在是一回事。

文件格式版本随着每个 VS 版本的增加而增加。这造成了很大的痛苦，当你在一个团队中工作时，如果不是所有的团队成员都同时迁移到下一个版本，你会非常头疼。SO有很多关于它的问题。

VS2012改变了，它是VS的第一个版本，可以读写上一版本的解决方案和项目文件。这解释了您所看到的，您的 VS2010 项目从未被转换，即使在 VS2012 中打开它之后也是如此。不错的功能。

# coldfusion - 如何将格式化的电子邮件地址解析为显示名称和电子邮件地址（在 ColdFusion 中）？

> ID：12322918
> 
> 赞同：4
> 
> 时间：2012-09-07T17:41:48.320
> 
> 标签：coldfusion

给定一个格式化的电子邮件地址，如以下示例：

*   `"John" <John@gmail.com>`
*   `John Smith <john@smith.com>`
*   `john@smith.com (John Smith)`

如何将此格式化的地址解析为 ColdFusion 中的名称和电子邮件地址部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T17:41:48.320

[此函数使用 JavaMail 为您提供InternetAddress](http://docs.oracle.com/javaee/1.4/api/javax/mail/internet/InternetAddress.html#parse%28java.lang.String,%20boolean%29)对象数组。您可以调用 getPersonal() 来获取姓名，调用 getAddress() 来获取电子邮件地址。

```
<cfscript>
function getEmailInfo(emailString)
{
    var iAddressClass = "";
    iAddressClass = CreateObject("java", "javax.mail.internet.InternetAddress");
    return iAddressClass.parse(arguments.emailString,true); 
}
</cfscript> 
```

# r - R根据向量选择数据框的列

> ID：12322923
> 
> 赞同：0
> 
> 时间：2012-09-07T17:42:00.437
> 
> 标签：r, plyr, apply

我有一个示例数据框，如下所示。

```
> x=data.frame(id=1:5,c1=letters[1:5],c2=letters[13:17])
> x
  id c1 c2
1  1  a  m
2  2  b  n
3  3  c  o
4  4  d  p
5  5  e  q 
```

我想从这个数据框中创建一个向量，它根据另一个向量为每一行选择不同的列。所以如果那个向量是

```
> vars
[1] 1 2 2 1 1 
> 
```

我想要 x 中的第一行，第 1 列，x 中的第二行，第 2 列，依此类推。所以预期的输出向量（或数据帧）将是如果向量

```
a n o d e 
```

如果数据框

```
id V1
 1  a
 2  n
 3  o
 4  d
 5  e 
```

任何帮助，非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T17:46:35.493

您可以使用矩阵“切片”数据框：

```
y=data.frame(1:5,c(1,2,2,1,1))
x[2:3][as.matrix(y)] 
```

结果：

```
[1] "a" "n" "o" "d" "e" 
```

让我们通过创建一个函数来概括这一点

```
selector=function(x)matrix(c(seq_along(x),x),ncol=2) 
```

请注意，在开始时要忽略一列，因此将 1 添加到您的选择向量 v

```
v=c(1,2,2,1,1)
x[selector(v+1)] 
```

结果

```
[1] "a" "n" "o" "d" "e" 
```

# c# - 引发 DotNetCharting 异常

> ID：12322933
> 
> 赞同：1
> 
> 时间：2012-09-07T17:42:34.357
> 
> 标签：c#, wcf, charts

我正在使用 DotNetCharting 4.2 版。我正在尝试创建一个图表，将其保存到磁盘并将路径作为字符串返回。到目前为止，这是我的代码的简化版本。

```
Chart aChart = new Chart();
aChart aChart.Title = "Some Title";
aChart aChart.ChartArea.Background = new Background(Color.White);

aChart.TempDirectory = "C:\\temp\\"
aChart.Width = chartWidth;
aChart.Height = chartHeight;

imageName = aChart.FileManager.SaveImage(); 
```

我从[这个](http://dotnetcharting.com/kb/KnowledgebaseArticle10073.aspx)dotnetCharting 支持页面得到了这个。这是非常简单的代码。

这是问题所在：上面的代码实际上确实在适当的目录中创建了一个图像。这不是目录权限问题。当我将我的实际数据添加到 aChart 时，它实际上确实添加了它并创建了一个图像。但是，该`SaveImage()`方法总是会抛出“无法映射路径'/'”的异常。该`SaveImage()`方法应该返回一个字符串，但是，它总是返回 "" 并抛出异常。

更多信息：我在 WCF 服务中执行此操作。由于它在服务中，dotNetCharting DLL 是否有可能在某些内部 MapPath 上遇到问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:54:37.640

我刚刚将 DotNetCharting 升级到最新版本（7.0），现在它工作正常。我相信这是旧版本的 DLL 的问题。我会把这个留在这里，以防其他人有这个问题。

# jquery - 使用 jquery 检索 li 父标题属性

> ID：12322937
> 
> 赞同：0
> 
> 时间：2012-09-07T17:42:44.110
> 
> 标签：jquery

我正在尝试使用 jquery 获取 li 的父标题。下面是我的 jQuery 和 html。如果我将鼠标悬停在 Sub 1、2 或 3 上，我想提醒父母的标题是“关于我们”

查询

```
$('a').hover(function(e) {
var whatami = $(this).parent('a').attr('title');

if(somethingnew == "About Us") {
alert(whatami);
    } 
else {
    //Do nothing
}
}); 
```

HTML

```
<ul>
<li><a href="" title="Home">Home</a></li>
<li><a href="" title="About Us">About Us</a>
<ul>
<li><a href="" title="Sub 1">Sub 1</a></li>
<li><a href="" title="Sub 2">Sub 2</a></li>
<li><a href="" title="Sub 3">Sub 3</a></li>
</ul>
</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:44:08.933

父级中不存在标题，而是存在于当前锚元素中，所以使用`$(this).attr('title')` 试试这个，

[**现场演示**](http://jsfiddle.net/rajaadil/8wDPW/)

```
$('a').hover(function(e) {
var whatami = $(this).attr('title');
//alert(whatami );
if(whatami  == "About Us") {
alert(whatami);
    } 
else {
    //Do nothing
}
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T17:46:21.223

一种有效的方法是：

```
$('ul > li > ul > li a').hover(
    function(){
        var whatami = $(this).parents('li').eq(1).find('a[title]:first').attr('title');
        if (whatami == 'About Us') {
            alert(whatami);
        }
    },
    function(){
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/NF78q/)。

对以上内容稍作修改：

```
$('ul > li > ul > li a').hover(
    function(){
        var whatami = $(this).closest('ul').prev('a').attr('title');
        if (whatami == 'About Us') {
            alert(whatami);
        }
    },
    function(){
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/NF78q/2/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T17:50:58.470

正如 Adil 所说，在您的 HTML 标题属性中，属于 ，所以也许您的意思是每个 li 标签的孩子。如果你真的想悬停在

*   而不是你的问题所暗示的，那么你可以这样做：

    ```
    $('li').hover(function(){
        var theTitle = $(this).find('a').attr('title');
        //do stuff
    }); 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T17:56:46.140

```
var whatami = $(this).closest('ul').closest('li').find('> a').attr('title'); 
```

[演示](http://jsfiddle.net/UhCUA/1/)

# perl - 在 perl 中将日期格式从 9/15/12 转换为 255

> ID：12322942
> 
> 赞同：1
> 
> 时间：2012-09-07T17:43:06.973
> 
> 标签：perl

我想知道是否有人可以告诉我如何将 9/15/12 转换为 255 格式。getdate 数组中的 php 中的某些内容可以获取 ydate。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T17:52:05.210

我想您是在问如何获得`1 <= yday <= 366`日期的日期表示，类似于`yday`php 中的`getdate()`. 在 PERL 中很常见，有不止一种方法可以做到这一点。最简单的机制是`localtime()`用于今天的日期：

```
my ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime(time); 
```

如果您想在其他日期执行此操作，我可能会使用[`TimeDate`CPAN 模块](http://search.cpan.org/~gbarr/TimeDate-1.20/)

```
use Date::Parse;

print time2str("%j",str2time("9/15/2012")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T18:14:31.093

我认为 Tawnos 提到的 php`yday`来自`getdate()`目标。这是一个选项（假设 2012 是您的日期字符串中的年份）：

```
use strict;
use warnings;
use Date::Calc qw/Day_of_Year/;

my $date = '9/15/12';
my ( $month, $day, $year ) = split '/', $date;
my $doy = Day_of_Year( "20$year", $month, $day ) - 1;

print $doy; # (0 - 365) 
```

输出：

```
258 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T18:19:01.393

你想要一年中的哪一天吗？不过，那将是第 258 天（基于 0）或第 259 天（基于 1）。仅使用核心 Perl：

```
use Time::Local qw( timegm );
my $date = '9/15/12';
my ($m,$d,$y) = split(qr{/}, $date);
my $epoch = timegm(0,0,0, $d,$m-1,$y);
my $yday = ( gmtime($epoch) )[7];   # 258 (0-based index) 
```

请注意，无论日期的时区如何， `timegm`+都适用。`gmtime`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T18:31:32.640

您只能使用[`strftime`](http://search.cpan.org/perldoc?POSIX#strftime)核心模块中的功能[`POSIX`](http://search.cpan.org/perldoc?POSIX)。

```
use strict;
use POSIX qw(strftime);

print strftime "%j", localtime(time); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-07T20:44:19.560

```
my $dt = '9/15/2012';
my ( $m, $d, $y ) = split( '/', $dt );
my $t = POSIX::mktime( 0, 0, 0, $d, $m - 1, $y - 1900 );
say [ localtime $t ]->[7] - 3; 
```

朱利安日期（减 1）是列表中的插槽 7，从`localtime`和返回`gmtime`。为什么要减去 3？我不知道; 9 月 15 日是 259 朱利安。它仍然执行将“9/15/2012”映射到 255 的功能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-07T18:50:06.250

这是另一种方式，使用核心模块[Time::Piece](https://metacpan.org/module/Time%3a%3aPiece)：

```
#!/usr/bin/env perl
use strict;
use warnings;
use Time::Piece;
my $t = Time::Piece->strptime(shift,"%m/%d/%y");
print $t->yday, "\n"; 
```

日输出是零相关的：1 月 1 日 = 0。

# ruby-on-rails - 我如何使 Rails 集合通用

> ID：12322944
> 
> 赞同：1
> 
> 时间：2012-09-07T17:43:12.320
> 
> 标签：ruby-on-rails, ruby-on-rails-3

对于单个对象，我可以通过执行 f.object 使其通用

```
<%= render 'shared/error_messages', object: f.object %> 
```

这允许我使我的部分通用

```
<% if object.errors.any? %> 
```

我将如何为任何数组做类似的事情，比如这些

```
<%= render partial: 'shared/feed_item', collection: @feed_items %>
<%= render partial: 'shared/feed_item', collection: @all_items %> 
```

所以在部分我可以用 my_item 而不是 feed_item 来引用它？

```
<li id="<%= feed_item.id %>"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:51:26.437

```
<%= render partial: 'shared/feed_item', collection: @feed_items, as: :feed_item %>
<%= render partial: 'shared/feed_item', collection: @all_items, as: :feed_item %> 
```

# javascript - 如何使用 Backbone.js 将多条记录呈现到 html 表中？

> ID：12322946
> 
> 赞同：2
> 
> 时间：2012-09-07T17:43:27.813
> 
> 标签：javascript, backbone.js

```
var ContractModel = Backbone.Model.extend({
    url:  "${g.createLink(controller:'waiverContract', action:'index')}"
})

var contract = new ContractModel({});
contract.fetch();
var contracts = new Backbone.Collection.extend({
    model: contract
});

var ContractView = Backbone.View.extend({
    initialize: function(){
        this.render();
    },
    render: function() {
        var root = this.$el;
        _.each(this.model, function(item) {
            var row = '<tr><td>' + item + '</td></tr>';
            root.find('tbody').append(row);
        });
        return this;
    }
});

var cView = new ContractView({ model: contract, el: $('#contracts') }); 
```

我打开了 Chrome 的开发者工具。如果我在渲染函数中执行 console.log(this.model)，我可以看到一个对象的混乱，其中两个记录存储在 .attributes 中。但是，我没有将两行添加到表中，而是得到了 7 个。其中 6 个是对象。（虽然我在 Chrome 的控制台中看到了 9 个子对象）。

这对我来说没有多大意义。任何人都可以帮助我不仅让这个工作，而且理解它吗？我知道一旦我实例化了 cView，render() 就会触发，而且我知道一旦我将 .fetch() 放入模型中，它就会执行 ajax。但这就是我能理解的极限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:02:09.160

您应该获取并迭代集合，而不是模型。模型是一个“东西”，一个集合有很多“东西”。假设您正在获取一个 JSON 格式的数组到您的模型中，它将以“1”、“2”等属性结束，并且这些属性中的每一个都只是一个普通的 Javascript 对象，而不是一个 ContractModel 实例。

以下是重构代码的方法：

```
var ContractModel = Backbone.Model.extend();
var ContractCollection = Backbone.Collection.extend({
  //ContractModel class, not an instance
  model: ContractModel,
  //Set the url property on the collection, not the model
  url:  "${g.createLink(controller:'waiverContract', action:'index')}"
})

var ContractView = Backbone.View.extend({
  initialize: function(){
    //Bind the collection reset event, gets fired when fetch complets
    this.collection.on('reset', this.render, this);
  },
  render: function() {
    //This finds the tbody element scoped to your view.
    //This assumes you have already added a tbody to the view somehow.
    //You might do this with something like
    //this.$el.html('<table><tbody></tbody></table>');
    var $tbody = this.$('tbody');
    this.collection.each(function(contract) {
      //Add any other contract properties here,
      //as needed, by calling the get() model method
      var row = '<tr><td>' + contract.get('someContractProperty') + '</td></tr>';

      //Append the row to the tbody
      $tbody.append(row);
    });
    return this;
  }
});

//Instantiate collection here, and pass it to the view
var contracts = new ContractCollection();
var cView = new ContractView({
  collection: contracts,
  el: $('#contracts')
});
//Makes the AJAX call.
//Triggers reset on success, and causes the view to render.
//Assumes a JSON response format like:
// [ { ... }, { ... }, ... ]
contracts.fetch(); 
```

# string - Selenium IDE：如何从存储的字符串中删除 \n？

> ID：12322952
> 
> 赞同：0
> 
> 时间：2012-09-07T17:43:51.433
> 
> 标签：string, selenium, ide

我正在尝试从地址字符串中提取邮政编码，但它包含换行符 \n 字符。请问如何从硒存储的var中删除它？我已经尝试使用`storeEval | "${Addrsss}".replace("\n", "") | Address`. 但是，selenium ide 会返回错误`Threw an exception: unterminated string literal`

这是地址： `${Address} = "100 RILEY DR\n AVONDALE,\n ARIZONA\n 85323-2004"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-20T04:07:09.230

尝试使用以下转义>替换>取消转义序列作为解决方法来删除换行符：

1.  逃避价值，
2.  将转义的换行符 ( `%0A`) 替换为空白 ('')，
3.  Unescape 回到原来的值，

```
storeEval | unescape(escape(storedVars['has_nl']).replace(/%0A/g,'')) | no_nl 
```

这个换行符似乎来自`<br />`浏览器-Selenium-IDE 组合呈现的 HTML 中断标记 ( )，然后由 Selenium IDE 提取为换行符 ( `\\n`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T00:00:41.373

可能的方法：1）找到元素（地址）的正确css（或xPath）定位器2）然后使用从元素中获取内容（文本）

```
String cssSelecotr=..blablabla..
//1st way
String myAddress=driver.findELement(by.cssSelector(cssSelector)).getText();
//2nd way, using js executor
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();

stringBuilder.append("var x = $(\""+cssSelecotr+"\");");
        stringBuilder.append("return x.text().toString();")       ;

       String myAddress= (String) js.executeScript(stringBuilder.toString()); 
```

3）然后您可以为您的地址应用正则表达式（所有可见符号）

```
 //  myAddress ="100 RILEY DR\n AVONDALE,\n ARIZONA\n 85323-2004";

         String myAdressEdited = myAddress.replaceAll("[^\\x20-\\x7E]+",""); 
```

希望这可以帮助

# java - Java applet HTML 页面发生了奇怪的事情

> ID：12322953
> 
> 赞同：0
> 
> 时间：2012-09-07T17:43:54.767
> 
> 标签：java, html, internet-explorer, applet

我的 Java 小程序在我的网页上运行良好，但也显示了很多奇怪的代码。我正在使用 Internet Explorer，有什么问题？

以下是页面上显示的内容：

```
{\rtf1\ansi\ansicpg1252\deff0\deflang2057{\fonttbl{\f0\fswiss\fcharset0 Arial;}} {\*\generator Msftedit 5.41.21.2508;}\viewkind4\uc1\pard\f0\fs20 \par \par 
```

（小程序）

```
/par/par/par} 
```

这是我的html：

```
<html>
<body>
<applet code = "NameInLights.class" width = "500" height = "500">
</applet>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:48:25.937

我怀疑这就是您的 HTML 页面中的全部内容。您一定是使用某种 Microsoft 工具创建了 HTML 页面。该工具通过放置其登录/版权信息来声名鹊起。打开您的 HTML 页面，找到上面的字符串并小心地删除它。

# android - 在 TableLayout 中动态更改 TableRow 的内容

> ID：12322957
> 
> 赞同：0
> 
> 时间：2012-09-07T17:44:08.430
> 
> 标签：android, android-layout, android-xml, android-tablelayout

是否可以在 TableLayout 中动态更改 TableRow 的内容？

目前，我有一个简单的表格布局，如下所示：

```
 <TableLayout
        android:id="@+id/tableid"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center" >

        <TableRow>   
            <TextView
                android:id="@+id/tv1id"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="right"
                android:text="@string/tv1text" />

            <TextView
                android:id="@+id/tv2id"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="right"
                android:text="@string/tv2text" />   

        </TableRow>

        <!-- more TableRows ... -->

    </TableLayout> 
```

我想要做的是用另一个视图（在我的例子中是一个 EditView）动态更改第二列的 TextView。这样做的原因是我希望表格首先以只读模式呈现数据，然后切换到可编辑状态，比如在用户按下编辑按钮之后。

这可能吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:07:19.330

是的，这是可能的。不过，这会很痛苦。您将不得不膨胀您的 XML，然后，在收到切换到 EditText 的触发器后，您将找到要删除的视图的 id，然后删除该视图。然后你必须创建一个新的 EditText，给它一个 id 并创建一个新的 LayoutParams，它类似于你要删除的 View。然后将 EditText 添加到视图组。

# apache - apache + fastcgi + fpm 为什么需要 suexec？

> ID：12322958
> 
> 赞同：0
> 
> 时间：2012-09-07T17:44:20.553
> 
> 标签：apache, fastcgi, php, suexec

所以我有以下*工作*虚拟主机：

```
<VirtualHost 192.168.128.20:80> 
        ServerName euclid.domain.tld 

        #LogLevel debug 
        ErrorLog /var/www/euclid/logs/error_log 

        SuexecUserGroup fastcgi www_euclid 
        FastCgiExternalServer /var/www/euclid/htdocs/cgi-bin -socket /var/run/php-fpm/euclid.sock -user fastcgi -group www_euclid 
        AddHandler php-fastcgi .php 
        Action php-fastcgi /cgi-bin 
        Alias /cgi-bin /var/www/euclid/htdocs/cgi-bin 

        <Location /cgi-bin> 
                Order Deny,Allow 
                Deny from All 
                # Prevent accessing this path directly 
                Allow from env=REDIRECT_STATUS 

                Options +ExecCGI +FollowSymLInks +SymLinksIfOwnerMatch 
        </Location> 

        DocumentRoot /var/www/euclid/htdocs 
        <Directory /var/www/euclid/htdocs> 
                AllowOverride all 
                Order allow,deny 
                Allow from all 
        </Directory> 
</VirtualHost> 
```

我似乎无法弄清楚为什么我需要使用带有 -user fastcgi -group www_euclid 标志的 SuexecUserGroup fastcgi www_euclid 和 FastCgiExternalServer 中的一个/两个。FPM 启用了池，并且每个池都在其自己的用户/组下运行。这工作正常，没有问题。如果我删除 SuexecUserGroup 和/或 -user fastcgi -group www_euclid 参数，我会收到以下错误，我不知道为什么。另外，fastcgi 使用什么 uid 和 gid 来访问套接字文件？它当然不是 fastcgi:ww_euclid。

```
(13)Permission denied: FastCGI: failed to connect to server
"/var/www/euclid/htdocs/cgi-bin": connect() failed  FastCGI:
incomplete headers (0 bytes) received from server
"/var/www/euclid/htdocs/cgi-bin" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T22:31:44.783

好的，我相信我已经弄清楚了问题所在。简单的答案是；mod_fastcgi 很烂。它陈旧、未维护且记录不充分。为什么在查找如何运行 php-fpm 时它不断出现，这超出了我的理解。省去你的头痛，只是不要使用它！

真正的解决方案相当简单：

```
<VirtualHost 192.168.128.20:80> 
        ServerName euclid.domain.tld 

        #LogLevel debug 
        ErrorLog /var/www/euclid/logs/error_log 

        <IfDefine PROXY>
                #If you want to use mod_proxy (Probably the best option)
                ProxyPassMatch ^/(.*\.php(/.*)?)$ fcgi://localhost:9000/var/www/euclid/htdocs/$1
        </IfDefine>

        <IfDefine FASTCGI_HANDLER>
                #If you want to use mod_fastcgi_handler (3rd party)
                AddHandler fcgi:/var/run/php-fpm-euclid.sock .php
        </IfDefine>

        DocumentRoot /var/www/euclid/htdocs 
        <Directory /var/www/euclid/htdocs> 
                AllowOverride all 
                Order allow,deny 
                Allow from all 
        </Directory> 
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-26T17:05:36.030

你是偶然使用[SELinux](http://selinuxproject.org/page/Main_Page)的吗？我遇到了由阻止 Apache 连接到 Django 的 fastcgi 套接字的 SELinux 安全策略引起的类似问题。运行`setenforce Permissive`允许它工作。

# r - R 尽管内存似乎可用，但无法分配内存

> ID：12322959
> 
> 赞同：12
> 
> 时间：2012-09-07T17:44:26.830
> 
> 标签：r, memory, memory-management, amazon-ec2

在运行了几个模型之后，我需要`system()`在我的 R 脚本上运行一个命令来关闭我的 EC2 实例，但是当我到达那一点时，我得到了：

```
cannot popen 'ls', probable reason 'Cannot allocate memory' 
```

注意：对于这个问题，我什至尝试过`ls`哪个不起作用

我的脚本流程如下

*   加载模型（约 2GB）
*   挖掘文档并写入 MySQL 数据库

上述步骤重复大约 20 次，不同型号的平均大小为 2GB

*   终止实例

此时是我需要调用`system("sudo shutdown -h now")`并且没有任何反应的时候，但是当我尝试时，`system("sudo shutdown -h now",intern=TRUE)`我得到了分配错误。

`rm()`我在调用关机之前尝试了所有对象，但同样的错误仍然存​​在。

这是我系统上的一些数据，它是一个**大型 EC2 Ubuntu 实例**

```
R version 2.15.1 (2012-06-22)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] splines   stats     graphics  grDevices utils     datasets  methods  
[8] base     

other attached packages:
 [1] RTextTools_1.3.9   tau_0.0-15         glmnet_1.8         Matrix_1.0-6      
 [5] lattice_0.20-10    maxent_1.3.2       Rcpp_0.9.13        caTools_1.13      
 [9] bitops_1.0-4.1     ipred_0.8-13       prodlim_1.3.2      KernSmooth_2.23-8 
[13] survival_2.36-14   mlbench_2.1-1      MASS_7.3-21        rpart_3.1-54      
[17] e1071_1.6-1        class_7.3-4        tm_0.5-7.3         nnet_7.3-4        
[21] tree_1.0-31        randomForest_4.6-6 SparseM_0.96       RMySQL_0.9-3      
[25] ggplot2_0.9.1      DBI_0.2-5         

loaded via a namespace (and not attached):
 [1] colorspace_1.1-2   dichromat_1.2-4    digest_0.5.2       grid_2.15.1       
 [5] labeling_0.2       memoise_0.1        munsell_0.3        plyr_1.7.1        
 [9] proto_0.3-9.2      RColorBrewer_1.0-5 reshape2_1.2.1     scales_0.2.1      
[13] slam_0.1-25        stringr_0.6.1 
```

gc() 返回

```
 used (Mb) gc trigger   (Mb)  max used   (Mb)
Ncells 1143171 61.1    5234604  279.6   5268036  281.4
Vcells 1055057  8.1  465891772 3554.5 767962930 5859.1 
```

我注意到，如果我只运行 1 个模型而不是 20 个模型，它工作正常，所以可能是每次运行后内存都没有释放，尽管我做`rm()`了使用过的对象

我还注意到，如果我关闭 R 并重新启动它，然后调用`system()`它就可以了。如果有办法在 R 中重新启动 R，那么也许我可以将其添加到我的`script.sh`流程中。

哪种方法适合清理我的所有对象并为每个循环释放内存，所以当我需要调用`system()`命令时没有内存问题？

任何正确方向的提示将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T18:54:55.143

我只是发布这个，因为它太长了，不适合评论。由于您没有包含任何代码，因此很难提供建议。但是，这里有一些你可以考虑的代码。

```
wd <- getwd()
assign('.First', function(x) {
  require('plyr') #and whatever other packages you're using
  file.remove(".RData") #already been loaded
  rm(".Last", pos=.GlobalEnv) #otherwise won't be able to quit R without it restarting
  setwd(wd)
}, pos=.GlobalEnv)
assign(".Last", function() {
  system("R --no-site-file --no-init-file --quiet")
}, pos=.GlobalEnv)
save.image() #or only save the things you want to be reloaded.
q("no") 
```

这个想法是你把你需要的东西保存在一个名为`.RData`. 您创建了一个`.Last`在您退出 R 时将运行的函数。该`.Last`函数将启动 R 的新会话。您创建一个`.First`将在 R 重新启动后立即运行的函数。该`.First`功能将加载您需要的包并进行清理。

现在，你可以退出 R，它会重新开始加载你需要的东西。

（`q("no")`表示不保存，但您已经保存了需要的所有内容`.RData`，重新启动时将在其中加载）

# grails - 我如何动态更新 Datasource.groovy 文件

> ID：12322960
> 
> 赞同：1
> 
> 时间：2012-09-07T17:44:28.100
> 
> 标签：grails

在 grails 项目中，会有一个名为`DataSource.groovy`. 如下：

```
dataSource {
  pooled = true
  driverClassName = "org.h2.Driver"
  username = "sa"
  password = ""
}

mongodb {
  host = 127.0.0.1// adjust this according to your settings
  port = 27017
  databaseName = 'test'
  username = 'user'  // database user and password, if server requires authentication
  password = 's3cret' 
} 
```

我的问题是如何`mongodb.host`在运行时动态设置例如。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:42:25.487

`environments`如果您有不同的MongoDB主机，您可以使用`DataSource.groovy`.

在上面的示例中，假设您`localhost 127.0.0.1`用于开发和`mongo-prodserver`生产

```
environments {
   development {
       grails {
           mongo {
               host = "127.0.0.1"
               port = 27017
               username = "user"
               password= "s3cret"
               databaseName = "test"
           }
       }
   }
   production {
       grails {
           mongo {
               host = "mongo-prodserver"
               port = 27017
               username = "user"
               password= "s3cret"
               databaseName = "prod"
           }
       }
   }
   ...
} 
```

这是[Grails Doc on DataSources and Environments](http://grails.org/doc/latest/guide/conf.html#dataSourcesAndEnvironments)的链接。

# java - 为服务器运行瓶颈测试

> ID：12322962
> 
> 赞同：0
> 
> 时间：2012-09-07T17:44:31.890
> 
> 标签：java

我正在尝试检测我们服务器中的瓶颈，我很难决定从哪里开始。机器崩溃前的症状是连接断开（超时，这是当客户端看到响应时间过长时发生的情况，可能表明服务器端代码无法分配处理器，并且请求无法'不被处理）和内存不足的问题。后一个错误代码实际上是由 JVM 在错误日志中给出的，但我很难相信 RAM 和可用 CPU 的缺乏同时成为瓶颈。（在之前崩溃的日子里，它一直以上述方式崩溃。）我们有自己的内部服务器代码，我不会将它归类为类似于 Apache 或我见过的任何其他代码。

我想花一些时间在本地创建一个有点受控的测试。我正在运行服务器，并且正在创建一个程序，该程序将从本地服务器请求不同的东西。什么是监控 RAM/CPU 的好方法？我目前正在使用 Java 的 VisualVM，但是当我对它进行一些测试时，监视器停止响应。

任何想法都将不胜感激。就像我提到的那样，我正在尝试获取尽可能多的有用数据，以帮助我进一步排除故障。一般来说，当出现这样的瓶颈问题时，可以采取哪些一般策略？直播服务器均在 Windows Server 2008 上运行。Java 版本为 7.03。我的本地机器正在运行 Windows 7，以及 Java 7.03。我不想做太多假设，但我认为可以合理地假设 Server 2008 和 Windows 7 非常相似。（操作系统架构是相同的。）除此之外，我的本地机器与我们的服务器具有相同的硬件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:00:34.327

对于 Windows，您需要：

1）建立“绩效基线”

2）尝试重现瓶颈，并将压力下的行为与基线进行比较

3) 找出瓶颈的原因，并加以纠正。

这些链接将有助于：

*   [http://technet.microsoft.com/en-us/library/cc781394%28v=ws.10%29.aspx](http://technet.microsoft.com/en-us/library/cc781394%28v=ws.10%29.aspx)

*   [http://msdn.microsoft.com/en-us/library/windows/hardware/gg463394.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463394.aspx)

您还应该查看这些 TCP/IP 注册表设置：

*   增加临时端口的范围

    HKLM\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters, MaxUserPort

*   考虑禁用自动调整：

    [http://geekswithblogs.net/cajunmcse/archive/2010/08/20/windows-2008-exchange-and-tcpip-auto-tuning.aspx](http://geekswithblogs.net/cajunmcse/archive/2010/08/20/windows-2008-exchange-and-tcpip-auto-tuning.aspx)

# java - JNI ByteBuffer 放字节

> ID：12322964
> 
> 赞同：2
> 
> 时间：2012-09-07T17:44:42.517
> 
> 标签：java, c++, java-native-interface, bytebuffer, nosuchmethoderror

```
JNIEXPORT jboolean JNICALL Java_directshowcamera_dsInterface_grab_1frame_1stream(JNIEnv *env, jobject obj, jint streamid, jobject barray)
{
    jclass bbclass = env->FindClass( "java/nio/ByteBuffer" );
    jmethodID putMethod = env->GetMethodID(bbclass, "put", "(I, B)Ljava/nio/ByteBuffer");
    unsigned char *buffer = stream_buffer( streamid );

    if( !stream_image_ready( streamid ) ) return (jboolean)0;

    for(int i=0; i < stream_device_size( streamid ); i++ ) {
        env->CallByteMethod( barray, putMethod, i, (jbyte)buffer[i] );
    }

    return (jboolean)1;
} 
```

所以，我有一个字节缓冲区，在 Java 中我已经分配了适当的大小，并注意到它可以到 ByteBuffer.put(index, byte)，所以我尝试获取该方法，但是当我在 Java 中这样做时，我得到以下运行时异常：

> java.lang.NoSuchMethodError：放

任何想法我做错了什么？我不太了解 JNI，并且主要是在重新编写我在网上找到的示例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T17:52:31.747

方法签名`(I, B)Ljava/nio/ByteBuffer`错误。方法签名和类之间没有`,`参数`L<class>;`（你忘记了`;`）。

所以正确的签名是：`(IB)Ljava/nio/ByteBuffer;`

然后代码应该可以工作。

# html - 使所有 容器内的元素 相同宽度的元素

> ID：12322965
> 
> 赞同：0
> 
> 时间：2012-09-07T17:44:43.860
> 
> 标签：html, css

我已经为此苦苦挣扎了一天左右，我已经回去并从第一方开始了几次，但我试图让一个水平 css 弹出标题按我的意愿工作。

当容器扩展以容纳它们时，我想根据需要扩展下拉位（如果类别名称被迫在一行上会很棒）。小提琴会更好地解释。

[http://jsfiddle.net/HyuLy/](http://jsfiddle.net/HyuLy/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:48:19.120

要使容器`<li>`内的所有元素`<ul>`具有相同的宽度，请添加：

```
div#dropMenu ul.level2 li {width: 100px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:05:04.067

将代码更改为以下内容`<li>`以填充.`<ul>``<ul>``<li>`

```
.subCatodd{
    background-color:#7b631d;
    padding:10px 0;}
.subCateven {
    background-color:#665011;
    padding:10px 0;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T18:28:25.467

你有一些`width: 100%`因为你的 's 而破坏了你的布局`padding`。 `width`是元素的内部宽度，所以当你结合`width:100%`时，假设`padding:20px`你的元素现在是 100% + 40px。

此外，您还有一些`float: left`不应该存在的 's。如果您仍然垂直堆叠元素，则无需`float: left`.

看看这个：http: [//jsfiddle.net/scrimothy/mxW4y/](http://jsfiddle.net/scrimothy/mxW4y/)

由于这里发生了很多事情，您可能希望将此 css 复制回您的文本编辑器以更好地查看它。我删除了一些宽度和浮动

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T18:28:59.177

检查这个

[http://jsfiddle.net/XUj5S/](http://jsfiddle.net/XUj5S/)

当您开始**将**填充添加到 100% 宽度时，它会这样做，这就是为什么您的 li 对象开始覆盖其父对象的原因，它们不是 100%，它们就像您添加的填充的 110%，这是一个示例我是说...

[http://jsfiddle.net/EcENF/](http://jsfiddle.net/EcENF/)

如果开始基于 px 添加填充，则必须在 px 上定义宽度，使用 % 只会搞砸

# winapi - 使用 SetDisplayConfig 启用辅助显示

> ID：12322974
> 
> 赞同：2
> 
> 时间：2012-09-07T17:45:04.380
> 
> 标签：winapi, windows-7

我正在尝试使用 Windows CCD API (SetDisplayConfig) 来启用辅助监视器，但还没有弄清楚如何去做。我已经成功地重新定位和禁用显示器，但还没有找到任何关于如何启用以前禁用的显示器的示例。

有人有这方面的经验吗？我发现了其他问题，展示了如何使用 ChangeDisplaySettingsEx 进行操作，但我正在尝试使用 SetDisplayConfig。

# mvvm - 使用 MVVMLight v 4.0 在 WP7 中创建视图模型

> ID：12322976
> 
> 赞同：1
> 
> 时间：2012-09-07T17:45:31.687
> 
> 标签：mvvm, mvvm-light

我刚开始构建一个 windows phone 应用程序，我非常清楚应用程序的内存限制。所以我的疑问是，动态视图模型比静态视图模型有什么优势。我认为如果我创建静态视图模型，而应用程序启动内存的时间将分配给我的所有视图模型，它最终可能会增加我的应用程序的内存使用量。我该如何应对这种情况。我在 V 4.0 中找到了。SimpleIOC 容器与库一起添加，我如何利用它。提供一些样本或文档，让我更轻松地学习该技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T06:52:26.847

除非您有一个高度复杂的模型，否则视图模型消耗的内存与存储 UI 资产（如图像、UI 控件、视图等）所需的内存相比将是微不足道的......

只需以最自然的方式创建视图模型。人们不使用 MVVMLight 或 IoC 容器来减少内存使用，他们使用它们来帮助构建代码。

我建议你从简单的开始，没有任何框架，并合理地构建你的代码。不久前我写了[一篇博文，展示了如何将 MVVM 用于 WP7](http://www.scottlogic.co.uk/blog/colin/2011/05/a-simple-windows-phone-7-mvvm-tombstoning-example/)。

# android - 如何下载网页以在 Nexus 7 上离线查看

> ID：12322978
> 
> 赞同：1
> 
> 时间：2012-09-07T17:45:59.423
> 
> 标签：android, tablet, nexus-7

当我不在 Nexus 7 平板电脑的 WIFI 区域时，我想查看一个网页。
我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:49:33.143

尝试像[Pocket](http://getpocket.com "口袋")这样的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T17:53:45.003

下载该网站的一种解决方案是使用 HTTrack。我可以将它复制到 Nexus 7，然后我可以使用 ES File Explorer 之类的东西打开它。

另一种解决方案是，如果您的 Nexus 上有 Kindle 应用程序，则可以轻松地将网页从您的 PC 发送到您的 Nexus Kindle 应用程序。

第三种解决方案是使用应用程序 Pocket。

# axapta - 查询对象未按预期工作？

> ID：12322979
> 
> 赞同：1
> 
> 时间：2012-09-07T17:46:07.247
> 
> 标签：axapta, dynamics-ax-2009, x++

此代码应该能够在任何 AX 系统（更改项目和仓库）上运行。问题是 CustInvoiceJour 有时不会被返回。奇怪的是，如果我只是做一个具有相同关系的“select custInvoiceJour”，它会找到它吗？这怎么可能？

```
static void Job59(Args _args)
{
    CustInvoiceTrans            custInvoiceTrans;
    CustInvoiceJour             custInvoiceJour;
    InventTable             inventTable;
    QueryBuildRange             rangeItem;
    Query                       query;
    QueryBuildDataSource        qbds1;
    QueryBuildDataSource        qbds2;
    QueryBuildDataSource        qbds3;
    QueryRun                    qr;
    ;

    query = new Query();
    qbds1 = query.addDataSource(tablenum(CustInvoiceTrans));
    qbds2 = qbds1.addDataSource(tablenum(CustInvoiceJour));
    qbds2.relations(true);

    qbds2.addRange(fieldnum(CustInvoiceJour, SalesType)).value('!' + enum2str(SalesType::ReturnItem));
    rangeItem = qbds1.addRange(fieldnum(CustInvoiceTrans, ItemId));
    qbds1.addRange(fieldnum(CustInvoiceTrans, InvoiceDate)).value(queryRange(@'8/1/2011', @'8/31/2011'));
    qbds2.orderMode(OrderMode::OrderBy);
    qbds2.addOrderByField(fieldnum(CustInvoiceJour, DlvCountryRegionId));
    qbds2.addOrderByField(fieldnum(CustInvoiceJour, DlvState));
    qbds3 = qbds1.addDataSource(tablenum(InventDim));
    qbds3.relations(true);
    qbds3.joinMode(JoinMode::ExistsJoin);
    qbds3.addRange(fieldnum(InventDim, InventLocationId)).value(SysQuery::value('FG'));

    select firstonly inventTable
        where inventTable.ItemId    == '44831';

    info (strfmt("%1", inventTable.ItemId));
    rangeItem.value(inventTable.ItemId);

    qr = new QueryRun(query);
    while (qr.next())
    {
        custInvoiceTrans    = qr.get(tablenum(CustInvoiceTrans));
        custInvoiceJour     = qr.get(tablenum(CustInvoiceJour));

        if (!custInvoiceJour)
        {
            info ("Not found");
            select firstonly custInvoiceJour
                where custInvoiceJour.SalesId               == custInvoiceTrans.SalesId     &&
                      custInvoiceJour.InvoiceId             == custInvoiceTrans.InvoiceId   &&
                      custInvoiceJour.InvoiceDate           == custInvoiceTrans.InvoiceDate &&
                      custInvoiceJour.numberSequenceGroup   == custInvoiceTrans.numberSequenceGroup;
            if (custInvoiceJour)
                info("Found it");
        }
    }
} 
```

调试器将这些显示为查询：

```
NAME:
    qbds1
VALUE:
    SELECT * FROM CustInvoiceTrans ORDER BY CustInvoiceJour.DlvCountryRegionId ASC, CustInvoiceJour.DlvState ASC WHERE ((ItemId = N'44831')) AND ((InvoiceDate>={ts '2011-08-01 00:00:00.000'} AND InvoiceDate<={ts '2011-08-31 00:00:00.000'})) EXISTS JOIN * FROM InventDim WHERE CustInvoiceTrans.InventDimId = InventDim.inventDimId AND ((InventLocationId = N'FG'))

NAME:
    qbds2
VALUE:
    SELECT * FROM CustInvoiceJour WHERE CustInvoiceTrans.SalesId = CustInvoiceJour.SalesId AND CustInvoiceTrans.InvoiceId = CustInvoiceJour.InvoiceId AND CustInvoiceTrans.InvoiceDate = CustInvoiceJour.InvoiceDate AND CustInvoiceTrans.numberSequenceGroup = CustInvoiceJour.numberSequenceGroup AND ((NOT (SalesType = 4)))

NAME:
    qbds3
VALUE:
    SELECT * FROM InventDim WHERE CustInvoiceTrans.InventDimId = InventDim.inventDimId AND ((InventLocationId = N'FG')) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T00:39:31.790

您的 qbds1 值未显示`JOIN * FROM CustInvoiceJour WHERE ...`（加入 qbds2）。

添加`qbds2.fetchMode(QueryFetchMode::One2One);`到您的代码中，一切都应该没问题。

PS我建议反过来做：qbds1中的CustInvoiceJour和qbds2中的CustInvoiceTrans（默认fetchMode），那么你根本不会有这个问题。

# ruby - 在不初始化对象的情况下存储变量？红宝石“邮件”

> ID：12322982
> 
> 赞同：2
> 
> 时间：2012-09-07T17:46:21.753
> 
> 标签：ruby, class, object, initializer

使用[Ruby Gem 'Mail'](https://rubygems.org/gems/mail)时，我对如何在不初始化对象的情况下存储变量感到困惑？例如：

```
Mail.defaults do
  retriever_method :pop3, :address    => "pop.gmail.com",
                          :port       => 995,
                          :user_name  => '<username>',
                          :password   => '<password>',
                          :enable_ssl => true
end 
```

之后，您可以调用方法，例如`Mail.first`并让它返回邮箱中配置的默认值的第一条消息。

我意识到 Ruby 中的一切都是一个对象，甚至是一个类，所以当`require 'mail'`被调用时，一个包含`class Mail`实际创建的对象是否对程序可用？这里到底发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:09:27.013

的内容`mail.rb`被加载到具有该`require 'mail'`语句的文件中。

查看 gem 后，`mail.rb`包含`Mail`模块，该模块又包含许多其他要求语句。

**邮件.rb**

```
module Mail
  ## skipped for brevity

  # Finally... require all the Mail.methods
  require 'mail/mail'
end 
```

**邮件/mail.rb**

```
module Mail
  ## skipped for brevity

  # Receive the first email(s) from the default retriever
  # See Mail::Retriever for a complete documentation.
  def self.first(*args, &block)
    retriever_method.first(*args, &block)
  end
end 
```

因此，这些方法可用于您的程序。

# c++ - 这个 UUID 生成代码有问题吗？

> ID：12322985
> 
> 赞同：4
> 
> 时间：2012-09-07T17:46:38.840
> 
> 标签：c++, random, uuid

所以我有一些代码需要使用 UUID 作为数据库 ID。为简单起见，我使用了 v4（随机），而且我看不出有任何真正的理由使用任何其他不那么随机的 UUID 版本。我的 UUID 类的定义大致如下（简化）：

```
class uuid {
public:
    static uuid create_v4();
public:
    // cut out for simplification...
public:
    uint8_t bytes[16];
}; 
```

实际的生成代码如下所示：

```
namespace {

uint32_t rand32() {
    // we need to do this, because there is no
    // gaurantee that RAND_MAX is >= 0xffffffff
    // in fact, it is LIKELY to be 0x7fffffff
    const uint32_t r1 = rand() & 0x0ff;
    const uint32_t r2 = rand() & 0xfff;
    const uint32_t r3 = rand() & 0xfff;
    return (r3 << 20) | (r2 << 8) | r1;

}

}

uuid uuid::create_v4() {

    static const uint16_t c[] = {
        0x8000,
        0x9000,
        0xa000,
        0xb000,
    };

    uuid uuid;

    const uint32_t rand_1 = (rand32() & 0xffffffff);
    const uint32_t rand_2 = (rand32() & 0xffff0fff) | 0x4000;
    const uint32_t rand_3 = (rand32() & 0xffff0fff) | c[rand() & 0x03];
    const uint32_t rand_4 = (rand32() & 0xffffffff);

    uuid.bytes[0x00] = (rand_1 >> 24) & 0xff;
    uuid.bytes[0x01] = (rand_1 >> 16) & 0xff;
    uuid.bytes[0x02] = (rand_1 >> 8 ) & 0xff;
    uuid.bytes[0x03] = (rand_1      ) & 0xff;

    uuid.bytes[0x04] = (rand_2 >> 24) & 0xff;
    uuid.bytes[0x05] = (rand_2 >> 16) & 0xff;
    uuid.bytes[0x06] = (rand_2 >> 8 ) & 0xff;
    uuid.bytes[0x07] = (rand_2      ) & 0xff;

    uuid.bytes[0x08] = (rand_3 >> 24) & 0xff;
    uuid.bytes[0x09] = (rand_3 >> 16) & 0xff;
    uuid.bytes[0x0a] = (rand_3 >> 8 ) & 0xff;
    uuid.bytes[0x0b] = (rand_3      ) & 0xff;

    uuid.bytes[0x0c] = (rand_4 >> 24) & 0xff;
    uuid.bytes[0x0d] = (rand_4 >> 16) & 0xff;
    uuid.bytes[0x0e] = (rand_4 >> 8 ) & 0xff;
    uuid.bytes[0x0f] = (rand_4      ) & 0xff;

    return uuid;
} 
```

这对我来说**看起来**是正确的，但我最近从数据库中收到一个错误，说我尝试插入的 UUID 是重复的。由于这应该是极不可能的，我不得不假设我的代码可能存在问题。所以有人看到有什么不对吗？我的随机 UUID 生成是否不够随机？

**注意：**我不能使用 boost 的随机数生成或它的 UUID 库。我希望可以，但我与安装了特定版本的库的特定系统相关联，并且获得足够新的 boost 版本来拥有这些功能几乎是不可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T23:54:24.017

该代码对我来说似乎是合理的。正如评论中所提到的，关于 rand() 是否是这个任务的一个不错的选择存在一些问题，但是假设一个新版本的库正在被更新，你对它的使用似乎是一种产生 32 位数据的合理方法用于确保较低位与较高位一样随机（您在评论中也提到过）。

因此，只要 rand() 函数做得还不错，您似乎不太可能得到重复。所以我的猜测是有另一种失败。想到的一些可能性：

1.  时间（0）失败。这似乎极不可能。如果它返回 -1 以指示在两次不同的运行中出现错误，那么它可能会导致问题。但是，它应该能够失败的唯一方法是给它一个无效的地址（这里绝对不是这种情况）。
2.  多线程使用。我不认为 rand() 是线程安全的。如果在多线程情况下使用此代码，则可能会导致意外行为。
3.  Cron 造成了困难。如果工作站上的时钟不准确，并且它被自动设置（例如，通过 rdate）与某个服务器同步，那么它可能会导致 cron 作业在某个时间重复。我能够通过创建一个 cron 作业来模仿这种行为，每分钟将当前日期转储到一个文件中，然后重复设置日期......它最终将相同的日期/时间（到第二个）写入文件更多不止一次。对于时间函数的一秒分辨率，这很容易导致重复种子。
4.  将 UUID 写入数据库的代码不正确。即使 UUID 生成器工作正常，也可能存在将相同 UUID 两次写入数据库的不同错误。

只是疯狂的猜测。其中，第三个是我最喜欢的，但如果我正在审查自己的代码，我会首先怀疑第四个。

# xcode - 如何解决推送通知错误“没有有效的 'aps-environment”

> ID：12322986
> 
> 赞同：0
> 
> 时间：2012-09-07T17:46:40.283
> 
> 标签：xcode, push-notification, certificate

我正在尝试从我的 iPhone 检索我的设备令牌并将该令牌发送到服务器以用于推送通知。我已经登录到开发者舷窗，添加了一个应用程序，并下载了证书。我将此代码添加到我的应用程序 didFinishLaunching

```
NSLog(@"Registering for remote notifications"); 
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound)]; 
```

我还添加了

```
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken 
{
    NSLog(@"deviceToken: %@", deviceToken); 
} 

- (void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error 
{
    NSLog(@"Error in registration. Error: %@", error); 
} 
```

我收到此错误

```
Error in registration. Error: Error Domain=NSCocoaErrorDomain Code=3000 "no valid 'aps-environment' entitlement string found for application" 
```

我注意到的一件事是，在开发人员舷窗中，它在“描述”下的捆绑 ID 开头附加了一个数字，我认为问题可能与此有关。如何确保 porthole 中的应用程序详细信息与我的目标中的相同。另外，我错过了一步吗？我需要对证书和 xcode 做进一步的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:15:33.797

你看到

```
<key>aps-environment</key> 
```

在文本编辑器中打开您正在使用的 mobileprovision 时的字符串？如果您不这样做，请尝试在 developer.apple.com 管理面板中重新发布 mobileprovision

# asp.net-mvc - 如何将值传递给asp mvc razor中的强类型视图

> ID：12322993
> 
> 赞同：0
> 
> 时间：2012-09-07T17:47:25.233
> 
> 标签：asp.net-mvc, razor

在我的一项行动中，我得到了这个：

```
ViewBag.Val = "a val";
View(); 
```

相关视图：

```
@{
  Model.Attr = ViewBag.Val;
} 
```

异常详情：

```
System.NullReferenceException: Object reference not set to an instance of an object. 
```

...

```
Line 27: Model.Attr = ViewBag.Val; 
```

这是造成麻烦的真正原因吗，如果它是如何将值传递给视图并将模型属性设置为该值。

**编辑：**

我已经记录了执行，分配工作正常：

采取行动：

```
var Obj = MyModel();
Obj.Attr = 123;
return View(Obj); 
```

看法：

```
<p>@Model.Attr</p> // shows 123 
```

但在接收 MyModel 的发布操作中，MyModel.Atrr 为 0。

为什么会发生这种情况以及如何解决它。

**编辑 2**

视图绑定到的模型是预期将在发布操作上处理的模型，并且是我要在视图或上一个（获取）操作上分配值的模型。我只想从'get action'传递一个值'a'来查看，分配'model.a' ='a'，然后在'post action'上处理'model'（附加'a'） .

我从日志中可以看出，绑定到视图的模型和从“获取操作”传递给视图的模型是不同的实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:49:35.320

您没有将对象传递给视图，因此`Model`为 null，因此尝试写入该`Attr`属性时抛出。

在这里传递一些东西：

```
ViewBag.Val = "a val";
View(new SomeModelTypeYadaYadaThatCorrespondsToTheView()); 
```

Michal Klouda 的评论也是正确的，你的做法是错误的。您需要填充的值应该在构建模型时完成，**而不是**在视图渲染期间完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:42:42.837

我认为您可以将其添加到您的 .cshtml 文件中（我认为您没有）：

```
 @model YourModelNameSpace.YourModel 
```

这将为您提供一个不为空的强类型模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T18:51:17.967

您需要在 Action 方法中**返回View 并传递 Model。**

```
ViewBag.Val = "a val";
return View(YourModel); 
```

# iphone - xcode 创建常量/变量作为构建设置？

> ID：12322994
> 
> 赞同：1
> 
> 时间：2012-09-07T17:47:35.450
> 
> 标签：iphone, objective-c, xcode

我的代码中有一个 URL 多次使用，并希望将其集中到构建设置常量/变量之类的东西中。我将如何从我的代码中访问构建设置？这是正确的做法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:55:57.977

```
Constants.h

static NSString * const myStackURL = @"http://stackoverflow.com/users"; 
```

或者

```
#define myStackURL @"http://stackoverflow.com/users" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:09:50.063

本质上，您想要做的是将定义常量的标头导入其他每个文件中。最简单的方法是将其粘贴在项目导航器的 Supporting Files 组中的*(应用程序名称)-Prefix.pch中。*任何其他文件都可以使用此预编译头文件中定义的任何内容。来自 Matt Neuburg 的 iOS 5 编程：

> 预编译头文件是一种使编译速度更快的设备。这是一个头文件；它编译一次（或至少很少编译），结果被缓存（在 /var/folders/ 中关闭）并由所有代码文件隐式导入。所以预编译的头文件应该主要由#import 指令组成，用于永远不会改变的头文件（例如内置的 Cocoa 头文件）；它也是一个放置#defines 的合理位置，它永远不会改变并且将由您的所有代码共享。

# javascript - CSS 通过“嵌套”使各种高度和宽度的 div 占用尽可能少的空间

> ID：12322996
> 
> 赞同：0
> 
> 时间：2012-09-07T17:47:43.603
> 
> 标签：javascript, css, layout, tiling

嗨，我正在尝试让一堆不同高度的 div 浮动到最佳位置，以尽可能少地占用空间。我尝试使用将垂直对齐设置为顶部的内联块以及将所有内容浮动到左侧。divs 是嵌套的（有点），但不时留下很大的空白。有没有办法使用 css（或必要时使用 javascript）将这些 div 组织在一起，就像没有间隙的瓷砖一样？（或可能的最小间隙）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:22:02.490

喜欢[http://iam.beyonce.com/](http://iam.beyonce.com/)上的图片吗？

如果是，请查看[jQuery Masonry](http://masonry.desandro.com/)上的演示并了解如何修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T15:05:21.107

或者看看 Masonry 的大姐姐[Isotope](http://isotope.metafizzy.co/)。除了 Masonry 之外，她还有许多其他技巧，例如分类和过滤物品等等。

# vim - 在 VIM 中重新映射 'd' 键时消除延迟

> ID：12322998
> 
> 赞同：3
> 
> 时间：2012-09-07T17:48:00.177
> 
> 标签：vim, macvim

我使用 Dvorak 键盘布局，因此我对默认的 VIM 映射进行了一些调整——我所做的一项更改是将右侧的主行键重新映射到

```
noremap d h
noremap h j
noremap t k
noremap n l 
```

这样移动键的位置就很方便，就像 QWERTY 用户一样。 `h`, `t`, 并且`n`做他们的工作并且非常敏感。 `d`但是，在按照预期的方式离开之前会滞后片刻。我认为这是因为有以`d`（如`dd`删除行）开头的键序列命令，因此 VIM 正在等待接收序列中的第二个笔划，然后再执行单个 'd' 的命令。我已经重新映射`dd`：

```
noremap dd hh 
```

但这并不能解决问题。然而，诸如`d3w`或`d$`（之后的文本对象）之类的命令`d`不起作用（在重新映射之后`d`），因此它们不会导致问题。有谁知道如何摆脱滞后？顺便说一句，即使在禁用所有插件后我也有同样的问题。我的 vimrc 中也没有其他映射`d`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T19:04:02.400

AFAIK`d`和`c`他们的“运营商待定”朋友并不是*真正*的映射。这意味着你不能`:unmap d`。我相信，如果没有副作用，您所经历的延迟是无法避免的。

您可能想玩`:h timeout`和`:h timeoutlen`。

值得一提的是，替代布局/Vim 的故事……很复杂。[而且根本没有安定下来。](http://vim.wikia.com/wiki/Using_Vim_with_the_Dvorak_keyboard_layout)

# python - 使用矩阵 1 中的索引从矩阵 2 中提取行

> ID：12322999
> 
> 赞同：0
> 
> 时间：2012-09-07T17:48:00.463
> 
> 标签：python, arrays, matrix, numpy, sparse-matrix

我有两个矩阵，一个是文本，一个是文本中的词频。我从词频矩阵中删除了一行。然后如何使用文本编号（文本矩阵中的行索引）从词频矩阵中提取一行？

例如：

**第 1 步：文本列表**

我有一个行中的文本列表，其中每个文本都由其行号引用：

```
>>print type(texts)
>>print texts.shape
<type 'numpy.ndarray'>
(53,) 
```

**第 2 步：根据行号选择文本**

我有一个这样的范围：

```
>>print train_range
>>[ 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
  26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50
  51 52] 
```

此范围用于从 中选择行`texts`。这基本上意味着删除一个文本，因为`train_range`. 在下面的示例中，第一行（第 0 行）被删除，因为 0 不在`train_range`：

```
texts[train_range] 
```

**第三步：获取文本的词频**

然后分析文本（按词频）以返回稀疏矩阵`train_X`。由于每个文本都是 in 中的一行`texts`，因此每个文本的词频都放在 in 中的一行中`train_X`。所以`texts`有 53 行，`texts[train_range]`有 52 行，`train_X`有 52 行：

```
trainX = get_word_freq_matrix( texts[train_range] )
>>print train_X.shape
(52, 6237)
>>print type(train_X)
<class 'scipy.sparse.csr.csr_matrix'> 
```

**第 4 步：获取某些文本的词频**

我现在想`train_X`使用新的范围从原始文本编号中获取行，如下所示：

```
apply_range = [4,7,8]
train_X[apply_range] 
```

但是，`apply_range`(like `train_range`) 中的数字指的是 中的行`texts`。这些数字不指`train_X`. 如何使用此范围`train_X`根据它们出现的位置获取正确的频率`texts`？

我尝试[使用来自另一个矩阵的索引来引用矩阵中的行](https://stackoverflow.com/questions/12317151/referencing-rows-in-a-matrix-using-index-from-another-matrix)。但是，我不确定这是如何工作的，因为该函数没有考虑从`texts`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T13:56:02.883

像您在问题中解释的所有其他内容一样，只需执行

```
apply_range = [4,7,8]
train_X[[train_range.index(i) for i in apply_range]] 
```