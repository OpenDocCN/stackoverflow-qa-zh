# StackOverflow 问答 000618000-000618999

# wcf - 使用 Linq-to-SQL 的 ADO.NET 数据服务

> ID：618027
> 
> 赞同：18
> 
> 时间：2009-03-06T08:09:14.493
> 
> 标签：wcf, linq-to-sql, wcf-data-services

在将 linq-to-sql 与 ado.net 数据服务一起使用时，我遇到了一个奇怪的错误。我有一个连接到远程数据库的简单 silverlight 应用程序。我首先添加了 linq-to-sql 类并将一个表拖到设计器上。然后我添加了一个 ADO.NET 数据服务，更新了 DataService 引用以指向 L2S 数据上下文。

编译没有问题。

当我在 IE 中打开服务时，我立即收到错误消息，因此我将以下属性添加到数据服务：

```
[System.ServiceModel.ServiceBehavior(IncludeExceptionDetailInFaults = true)] 
```

这会显示详细的错误消息：

> 异常消息是“在数据上下文类型“DataClasses1DataContext”上，有一个顶级 IQueryable 属性“table1”，其元素类型不是实体类型。确保 IQueryable 属性是实体类型或在数据上下文类型上指定 IgnoreProperties 属性以忽略此属性

我在 L2S 设计器中使用的任何数据库表都会发生这种情况！

这是什么错误，为什么我会得到它？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-03-06T08:43:13.007

您需要使用 DataServiceKey 属性来装饰您的类。

有关 Marc 的博客的更多详细信息，[这里](http://marcgravell.blogspot.com/2008/12/astoria-and-linq-to-sql-getting-started.html)还有一个 MSDN 博客（后者讨论[了](http://blogs.msdn.com/bags/archive/2008/06/17/working-with-linq-to-sql-many-to-many-relationships-in-ado-net-data-services.aspx)多对多关系，但它涵盖了 DatServiceKey 属性）。

# word - 词建议

> ID：618037
> 
> 赞同：1
> 
> 时间：2009-03-06T08:15:04.523
> 
> 标签：word, spelling, search-suggestion

重复[谷歌你的意思是算法如何工作](https://stackoverflow.com/questions/307291/how-does-the-google-did-you-mean-algorithm-work)

有谁知道如何编写像 Google 的“你的意思是”这样的单词建议功能吗？特征？或者知道我在哪里可以找到代码示例。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T08:16:56.610

Peter Norvig（谷歌的研究主管）在这里有一个简单的，实际上非常有效： http: [//norvig.com/spell-correct.html](http://norvig.com/spell-correct.html)

它是用python编写的，但翻译成其他语言相当简单（注意页面底部有一些翻译，但C#版本至少有一些bug，效率很低，所以值得做翻译成您自己需要的任何语言 - 这也是理解代码的好方法）。

# c# - Unity：如何在解析另一种类型时指定使用类型的特定实例

> ID：618038
> 
> 赞同：6
> 
> 时间：2009-03-06T08:15:47.673
> 
> 标签：c#, .net, unity-container

我在 Unity 中尝试以下操作：

我有一个带有以下构造函数的类型

```
public Type1(Type2 firstDependency, Type3 secondDependency) 
```

使用 Unity解析时`Type1`，我想指定`Type2`要注入的特定实例。此特定实例`Type2`未在容器中注册。`Type3`已在容器中注册，应照常解决。

更具体地说，考虑`Type1`是一个`DocumentViewer`类。`Type2`是一个特定的`Document`. `Type3`是一个`SpellingChecker`。

我希望能够解决仅`DocumentViewer`在`Document`运行时才知道的问题。可以创建不同的多个`DocumentViewer`实例。`Documents`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-06T08:21:22.590

这是我制作的一个简单示例，您使用 RegisterInstance 或者您可以使用 Lifetime management Claas

```
static void Main(string[] args)
{
    IUnityContainer container = new UnityContainer();

    container.RegisterType<Type1>();

    container.RegisterInstance<Type2>(new Type2());

    Type1 t = container.Resolve<Type1>();

    Type2 t2 = container.Resolve<Type2>();

    Type3 t3 = container.Resolve<Type3>();

    Console.ReadKey();
}

public class Type1
{
}

public class Type2
{
}

public class Type3
{
    private Type1 t;
    private Type2 t2;
    public Type3(Type1 t, Type2 t2)
    {
        this.t = t;
        this.t2 = t2;
    }
} 
```

**更新：**我在构造函数中包含了一个带有两个参数的类型，以表明它也可以被解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T08:35:10.467

尝试使用命名实例：

```
 IUnityContainer container = new UnityContainer();
container.RegisterType<Type1>();
container.RegisterType<Type2>("Instance 1", new ContainerControlledLifetimeManager());
container.RegisterType<Type2>("Instance 2", new ContainerControlledLifetimeManager());
container.RegisterType<Type3>();

Type1 type1 = container.Resolve<Type1>();
if (type1 == ...)
{
  Type2 instance1 = container.Resolve<Type2>("Instance 1");
}
else
{
  Type2 instance2 = ontainer.Resolve<Type2>("Instance 2");
} 

```

您可以对类型 1 进行一些检查并决定您需要哪个类型 2 的实例。请注意，“new ContainerControlledLifetimeManager()”参数将初始化被抵抗类型的单例实例，因此您将始终获得相同的类型 2 实例。

**更新：**与接口相同。希望这可以帮助。

```
 IUnityContainer container = new UnityContainer();
container.RegisterType<TextDocument>();
container.RegisterType<ImageDocument>();
container.RegisterType(typeof (IView), typeof (TextView), "Text", new ContainerControlledLifetimeManager());
container.RegisterType(typeof (IView), typeof (ImageView), "Image", new ContainerControlledLifetimeManager());

IDocument document = container.Resolve<TextDocument>();

IView view = null;
if (document is TextDocument)
{
    view = container.Resolve<IView>("Text");
}
else
{
    view = container.Resolve<IView>("Image");
}

view.Show(); 

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T03:26:07.937

使用工厂。

```
public class Type1Factory
{
  private Type3 type3;

  public Type1Factory(Type3 _type3)
  {
     type3 = _type3;
  }

  public GetType1(Type2 type2)
  {
    return new Type1(type2, type3);
  }
} 
```

这样称呼它：

```
// SpellingChecker is subclass of Type3
IUnityContainer container = new UnityContainer();
container.RegisterType<Type3>(typeof(SpellingChecker));

// DocumentViewer is subclass of Type2
Type1Factory factory = container.Resolve<Type1Factory>();
Type1 type1 = factory.GetType1(new DocumentViewer()); 
```

这假设您只是尝试使用 Unity 来解决 Type3 依赖项，并且您无法控制 Type1 中的构造函数。如果您可以编辑 Type1，请使用 Alexader R. 的建议使 Unity 仅解析一个参数构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-06T10:40:35.500

如果您有一个具有多个构造函数的类，您可以使用“InjectionConstructor”属性来决定 Unity 容器使用哪个构造函数。这使您可以手动设置一些参数。

```
 public class Test
{
    public Test()
    {
    }

    // Always use the following constructor
    [InjectionConstructor]
    public Test(Type1 type1) : this()
    {
    }

    public Test(Type1 type1, Type2 type2) : this(type1)
    {
    }
} 

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-04-21T09:15:03.750

您可以使用容器层次结构，请在此处阅读我对类似问题的回答：[Microsoft Unity。如何在构造函数中指定某个参数？](https://stackoverflow.com/questions/4059991/microsoft-unity-how-to-specify-a-certain-parameter-in-constructor/5741907#5741907).

唯一的区别是看起来你应该`RegisterInstance()`在你的子容器中使用而不是`RegisterType()`. 也许不是，这取决于您是否在代码之外的某个地方创建了实例。

# windows - Windows 中的 msync 等效项

> ID：618046
> 
> 赞同：2
> 
> 时间：2009-03-06T08:20:23.903
> 
> 标签：windows, unix, msdn

Windows 中 msync [unix sys call] 的等价物是什么？我正在 C、C++ 空间中寻找 MSDN api。有关 msync 的更多信息，请访问[http://opengroup.org/onlinepubs/007908799/xsh/msync.html](http://opengroup.org/onlinepubs/007908799/xsh/msync.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T09:43:15.217

FlushViewOfFile

查看 Python 2.6 mmapmodule.c 以获取 FlushViewOfFile 和 msync 的使用示例：

```
/*
 /  Author: Sam Rushing <rushing@nightmare.com>
 /  Hacked for Unix by AMK
 /  $Id: mmapmodule.c 65859 2008-08-19 17:47:13Z thomas.heller $

 / Modified to support mmap with offset - to map a 'window' of a file
 /   Author:  Yotam Medini  yotamm@mellanox.co.il
 /
 / mmapmodule.cpp -- map a view of a file into memory
 /
 / todo: need permission flags, perhaps a 'chsize' analog
 /   not all functions check range yet!!!
 /
 /
 / This version of mmapmodule.c has been changed significantly
 / from the original mmapfile.c on which it was based.
 / The original version of mmapfile is maintained by Sam at
 / ftp://squirl.nightmare.com/pub/python/python-ext.
*/

static PyObject *
mmap_flush_method(mmap_object *self, PyObject *args)
{
    Py_ssize_t offset = 0;
    Py_ssize_t size = self->size;
    CHECK_VALID(NULL);
    if (!PyArg_ParseTuple(args, "|nn:flush", &offset, &size))
        return NULL;
    if ((size_t)(offset + size) > self->size) {
        PyErr_SetString(PyExc_ValueError, "flush values out of range");
        return NULL;
    }
#ifdef MS_WINDOWS
    return PyInt_FromLong((long) FlushViewOfFile(self->data+offset, size));
#elif defined(UNIX)
    /* XXX semantics of return value? */
    /* XXX flags for msync? */
    if (-1 == msync(self->data + offset, size, MS_SYNC)) {
        PyErr_SetFromErrno(mmap_module_error);
        return NULL;
    }
    return PyInt_FromLong(0);
#else
    PyErr_SetString(PyExc_ValueError, "flush not supported on this system");
    return NULL;
#endif
} 
```

更新：我认为您不会在 win32 映射文件 API 中找到完全奇偶校验。FlushViewOfFile API 没有同步风格（可能是因为缓存管理器的可能影响）。如果需要精确控制何时将数据写入磁盘，也许您可​​以在创建映射文件的句柄时将`FILE_FLAG_NO_BUFFERING`and`FILE_FLAG_WRITE_THROUGH`标志与 CreateFile API 一起使用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-08-27T20:41:33.183

我怀疑 FlushViewOfFile 实际上是正确的。当我阅读[msync 的手册页时](http://opengroup.org/onlinepubs/007908799/xsh/msync.html)，我不会假设它实际上是在刷新磁盘缓存（磁盘单元中的缓存，而不是主内存中的系统缓存）。

在磁盘堆栈完成写入之前，FlushViewOfFile 不会返回；像 msync 文档一样，它没有说明磁盘缓存中发生的情况。我们可能应该看看在文档中更清楚地说明这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-16T22:19:48.703

用于刷新所有文件映射的 Windows 等效项是

```
void FlushToHardDrive(LPVOID fileMapAddress,HANDLE hFile)
{
    FlushViewOfFile(fileMappAddress,0); //Async flush of dirty pages
    FlushFileBuffers(hFiles); // flush metadata and wait 
} 
```

并用于刷新部分文件映射

```
void FlushToHardDrive(LPVOID address,DWORD size, HANDLE hFile)
{
    FlushViewOfFile(address,size); //Async flush of region
    FlushFileBuffers(hFiles); // flush metadata and wait 
} 
```

[这](https://msdn.microsoft.com/en-us/library/windows/desktop/aa366563(v=vs.85).aspx)在 MSDN 中有所描述

标志`FILE_FLAG_NO_BUFFERING`实际上对内存映射文件没有任何作用（描述[here](https://docs.microsoft.com/en-US/windows/desktop/api/fileapi/nf-fileapi-createfilew)），**甚至**文件句柄也是用这些标志创建的，文件的元数据可以被缓存而不是刷新，所以如果你想完全确定，IO和MM总是需要FlushFileBuffers保存所有数据（包括文件访问时间）。[此处](https://docs.microsoft.com/en-US/windows/desktop/FileIO/file-caching)描述了此行为

PS 一些现实世界的例子：SQLite 使用 MM-files 几乎只用于[读取](https://www.sqlite.org/mmap.html)，所以当您使用 MM-files 进行写入/更新时，您需要了解这种情况的所有副作用

# algorithm - 基于拍摄日期聚类图片的算法

> ID：618054
> 
> 赞同：7
> 
> 时间：2009-03-06T08:26:45.370
> 
> 标签：algorithm, cluster-analysis, grouping

任何人都知道根据照片拍摄日期将照片分组为事件的算法。显然我可以按日期分组，但我想要一些更复杂的东西，它（可能）能够根据特定时间跨度内的频率对跨越多天的图片进行分组。考虑以下分组：

*   2009 年 1 月 2 日 15 张照片
*   2009 年 1 月 3 日 20 张照片
*   2009 年 1 月 4 日 13 张照片
*   2009 年 1 月 5 日 19 张照片
*   2009 年 1 月 15 日 5 张照片

可能这些将分为两组：

1.  2009 年 1 月 2 日 -> 2009 年 1 月 5 日
2.  2009 年 1 月 15 日

显然，需要建立一些公差。

除了发明我自己的自上而下的方法之外，是否有任何成熟的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-06T08:31:46.233

您可以应用几乎[任何标准的聚类技术](http://en.wikipedia.org/wiki/Cluster_analysis)，这只是正确定义距离函数的问题。当您制作照片之间的距离矩阵时，您应该考虑位置之间的物理距离（如果有的话）和它们的创建时间戳之间的时间距离的组合。 [将它们归一化](http://en.wikipedia.org/wiki/Normalization_(statistics))并将它们放在不同的维度上，您甚至可以采用常规的欧几里德距离。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T08:30:45.860

只需将连续几天（没有没有拍照的日子）拍摄的照片组合在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-06T08:40:55.633

您可能会尝试根据要创建的集群的数量或大小（绝对或百分比）动态计算容差。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-06T08:45:10.630

要根据日期获得有用的图片聚类，您需要以下内容：

1) 聚类的数量应该是可变的，而不是先验固定的聚类

2）每个簇的直径不应超过特定数量。

最能满足这两个要求的聚类算法是[QT（质量阈值）聚类算法](http://en.wikipedia.org/wiki/Data_clustering#QT_clustering_algorithm)。来自维基百科：

> QT（质量阈值）聚类（Heyer，Kruglyak，Yooseph，1999）是一种替代数据分区方法，发明用于基因聚类。它比 k-means 需要更多的计算能力，但不需要先验指定簇的数量，并且运行多次时总是返回相同的结果。

虽然它主要用于基因聚类，但我认为它非常适合您的需求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-05T18:15:56.307

尝试检测间隙而不是集群。

# c# - 在数据库中存储货币价值的最佳方式是什么？

> ID：618056
> 
> 赞同：29
> 
> 时间：2009-03-06T08:28:15.867
> 
> 标签：c#, sql, tsql, currency

我需要在数据库中存储几个与货币相关的字段，但我不确定在**货币**和**小数**之间使用哪种数据类型。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-03-06T08:37:15.627

十进制和金钱应该是相当可靠的。我可以向你保证（来自继承应用程序的痛苦的个人经验）是**不要**使用浮动！

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-03-06T08:35:22.573

我总是使用十进制；以前从未使用过MONEY。

最近，我发现一篇关于 Sql server 中小数与货币数据类型的文章，您可能会感兴趣：

[金钱与小数](https://sqlblog.org/2008/04/27/performance-storage-comparisons-money-vs-decimal)

当您使用它执行计算时，money 数据类型似乎并不总是会产生准确的结果：[单击](http://groups.google.com/group/microsoft.public.sqlserver.server/browse_thread/thread/e19bf068e208dd5b/f79e614829931537?hl=en&lnk=st&q=author:kass+money+accuracy#f79e614829931537)

我过去所做的就是使用一个 INT 字段，并将金额存储在美分（欧元/美元）中。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-03-06T08:31:20.540

我想这归结为精度和规模。IIRC，`money`是 4dp。如果没问题，就`money`表达了你的意图。如果您想要更多控制，请使用`decimal`特定的精度和比例。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-06T09:18:22.687

这取决于您的应用程序！！！我在金融服务行业工作，我们通常认为价格在小数点后 5 位非常重要，当然，当您以 3.12345 便士/美分的价格购买数百万美元时，这是一笔不小的数目。一些应用程序会提供自己的 sql 类型来处理这个问题。

另一方面，这可能没有必要。<幽默> 承包商费率似乎总是四舍五入到最接近的 100 英镑，但在当前的信贷紧缩中，目前似乎接近 25 英镑。</幽默>

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-17T14:56:14.647

不要根据可用的数据类型调整你的想法。相反，分析您的需求，然后查看最适合的数据类型。考虑到架构在存储二进制版本的浮点数方面的限制，浮点数在任何时候都是最糟糕的选择。钱是一个标准单位，在处理钱相关的操作上肯定会有更多的支持。在十进制的情况下，您必须处理所有内容，但您知道只有您自己在处理十进制类型，因此对于其他两种数据类型，您可能不会感到意外。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-06T19:03:28.570

使用小数并使用比您认为需要的更多的小数位，以便计算正确。金钱并不总是在计算中返回正确的结果。在任何情况下都不要使用 float 或 real，因为它们是不精确的数据类型，并且可能导致计算错误（尤其是当它们变得更加复杂时）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-10-01T12:26:45.560

对于某些数据（如货币），您不希望因浮点值而产生近似值或变化，您必须确保数据永远不会“浮动”，它必须在小数点两侧都是刚性的。
一种简单的安全方法是，通过将其转换为 INTEGER 数据类型来赋值，并确保在检索值时，小数点放置在正确的位置。
例如
1\. 将 240.10 美元存入数据库。
2.将其转换为纯整数形式：24010（您知道它只是小数的移位）。
3\. 将其恢复为正确的十进制状态。将小数点放在右起 2 位。240.10 美元

因此，在数据库中时，它将采用严格的整数形式。

# iphone - iPhone 中的 SMTP

> ID：618057
> 
> 赞同：2
> 
> 时间：2009-03-06T08:29:14.943
> 
> 标签：iphone

如何在 iPhone 本机应用程序中连接 SMTP？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-06T08:45:13.970

看看[skpsmtpmessage](http://code.google.com/p/skpsmtpmessage/)

# ruby-on-rails - 从 Rails 2.3 上的 Facebooker API 获取错误 406？

> ID：618083
> 
> 赞同：0
> 
> 时间：2009-03-06T08:43:33.053
> 
> 标签：ruby-on-rails, facebook

我的应用程序在 Rails 2.2 和 Facebooker 1.0.13 上运行良好，但在 Rails 2.3 上我不断收到 406 错误。我检查了 Facebook 中的 mime 类型、画布/iframe 设置，并且请求在 Facebook 之外正常工作（即，只要我不在 Facebook iframe 中访问它，我就可以获得完整的应用程序）。Facebook API 最近是否发生了会导致此错误的更改？或者你发现 Facebooker 中有什么东西可以很快修复？

这是我的开发日志供参考： `Processing PostsController#index (for xx.xxx.xx.xxx at 2009-03-06 03:24:44) [GET] Parameters: {"fb_sig_app_id"=>"xxxxx",
"fb_sig_in_iframe"=>"1",
"fb_sig_locale"=>"en_US", "fb_sig_in_new_facebook"=>"1",
"fb_sig"=>"xxxxx",
"fb_sig_added"=>"1",
"fb_sig_expires"=>"xxxxx",
"fb_sig_session_key"=>"xxxxx",
"fb_sig_ss"=>"xxxxx",
"fb_sig_api_key"=>"xxxxx",
"fb_sig_time"=>"1236327886.7997",
"fb_sig_profile_update_time"=>"1228275036",
"fb_sig_user"=>"11111"}
User Columns (6.0ms) SHOW FIELDS FROM `users` User Load (1.0ms) SELECT * FROM `users` WHERE (`users`.`login` = 11111) LIMIT 1 SQL (0.0ms) BEGIN SQL (0.0ms) COMMIT Competition Load (0.0ms) SELECT * FROM `posts``

 `### Completed in 135ms (View: 8, DB: 8) | 406 Not Acceptable` 

`[[http://xx.xx.xxx.xxx/?fb_sig_in_iframe=1&](http://xx.xx.xxx.xxx/?fb_sig_in_iframe=1&)
fb_sig_locale=en_US&
fb_sig_in_new_facebook=1&
fb_sig_time=xxxxx.xxxxx&
fb_sig_added=1&
fb_sig_profile_update_time=1228275036&
fb_sig_expires=xxxxx&
fb_sig_user=xxxxx&
...]`

如果需要更多详细信息，我很乐意给他们... :-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-07T05:18:07.717

在 Facebook 论坛中找到答案：

[http://forum.developers.facebook.com/viewtopic.php?pid=93648#p93648](http://forum.developers.facebook.com/viewtopic.php?pid=93648#p93648)

很抱歉暗示 Facebooker 工作不正常……你所做的是伟大的迈克尔（等人），继续努力！

# java - 不区分大小写的三元搜索树

> ID：618086
> 
> 赞同：3
> 
> 时间：2009-03-06T08:45:18.867
> 
> 标签：java, data-structures, ternary-tree, ternary-search-tree

我一直在使用[三元搜索树](http://en.wikipedia.org/wiki/Ternary_search_tree)作为实现自动完成下拉组合框的数据结构。这意味着，当用户键入“fo”时，将显示下拉组合框

foo 食品 足球

问题是，我目前使用的三元搜索树是区分大小写的。我的实现如下。它已被现实世界使用了大约 1++ 年。因此，我认为它非常可靠。

[我的三元搜索树代码](http://jstock.cvs.sourceforge.net/viewvc/jstock/jstock/src/org/yccheok/jstock/engine/TernarySearchTree.java?view=markup)

但是，我正在寻找不区分大小写的三元搜索树，这意味着，当我输入“fo”时，下拉组合框将显示我

foo 食物 足球

以下是 TST 的一些关键接口，我希望新的不区分大小写的 TST 也可能有类似的接口。

```
 /** 
 * Stores value in the TernarySearchTree. The value may be retrieved using key.
 * @param key A string that indexes the object to be stored.
 * @param value The object to be stored in the tree.
 */    
public void put(String key, E value) {
    getOrCreateNode(key).data = value;
}

/**
 * Retrieve the object indexed by key.
 * @param key A String index.
 * @return Object The object retrieved from the TernarySearchTree.
 */
public E get(String key) {
    TSTNode<E> node = getNode(key);
    if(node==null) return null;
    return node.data;
} 
```

使用示例如下。TSTSearchEngine 使用 TernarySearchTree 作为核心骨干。

[三元搜索树的示例用法](http://jstock.cvs.sourceforge.net/viewvc/jstock/jstock/src/org/yccheok/jstock/engine/TSTSearchEngine.java?revision=1.2&view=markup)

```
// There is stock named microsoft and MICROChip inside stocks ArrayList.
TSTSearchEngine<Stock> engine = TSTSearchEngine<Stock>(stocks);
// I wish it would return microsoft and MICROCHIP. Currently, it just return microsoft.
List<Stock> results = engine.searchAll("micro"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-09T22:04:13.897

使我当前的三元搜索树难以支持不区分大小写搜索的关键因素之一是，我的底层数据结构是一对一映射。请看下面的测试代码：

```
public void testPut() {
    System.out.println("put");
    Name name0 = new Name("abc");
    Name name1 = new Name("abc");
    TernarySearchTree<Name> instance = new TernarySearchTree<Name>();
    instance.put(name0.toString(), name0);
    instance.put(name1.toString(), name1);
    assertEquals(2, instance.matchPrefix("a").size()); // fail here. Result is 1
} 
```

我目前的短期解决方案是，我正在使用 TSTSearchEngine 来包装整个 TernarySearchTree。TSTSearchEngine 由

(1) 三元搜索树，提供大写键映射。

(2) String-To-ArrayList 映射。

这是我执行时发生的情况：

```
TSTSearchEngine<Name> engine = TSTSearchEngine<Name>();
engine.put(name0); // name0 is new Name("Abc");
engine.put(name1); // name0 is new Name("aBc"); 
```

(1) name0.toString() 将被转换为大写字母（“ABC”）。它将被插入到 TernarySearchTree。“ABC”将是 TernarySearchTree 的键和值。

(2) "ABC" 将用作 map 的键，将 name0 插入到数组列表中。

(3) name1.toString() 将被转换为 UPPER-CASE ("ABC")。它将被插入到 TernarySearchTree。S1 将是 TernarySearchTree 的键和值。

(4) "ABC" 将用作 map 的键，将 name1 插入到数组列表中。

当我尝试

```
engine.searchAll("a"); 
```

(1) TernarySearchTree 将返回“ABC”。

(2) “ABC”将作为访问地图的键。Map 将返回一个数组列表，其中包含 name0 和 name1。

此解决方案有效。示例代码可以参考[New TSTSearchEngine 示例代码](http://jstock.cvs.sourceforge.net/viewvc/jstock/jstock/src/org/yccheok/jstock/engine/TSTSearchEngine.java?view=markup)

但是，这可能不是一个有效的解决方案，因为它需要两次搜索。我发现 C++ [C++ Implementation of Case Insensitive Ternary Search Tree](http://www.abc.se/~re/code/tst/tst_docs/tst_usage.html#usage_custom_comp)中有一个实现。因此，有机会将 C++ 代码移植到 Java。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T09:00:52.027

我以前没有使用过 TST，但这不是在存储和查找期间都像小写或大写密钥一样简单吗？从您的代码片段看起来应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-05-20T14:08:23.340

我已经实现了一个三元搜索树，你可以看看[http://kunalekawde.blogspot.com/2010/05/radix-patricia-and-ternary.html](http://kunalekawde.blogspot.com/2010/05/radix-patricia-and-ternary.html) 至于大小写不敏感，要么你映射 small 和 caps一个十六进制/十进制值或在获取前缀时，检查该值。

# javascript - 我可以使用 .appendChild() 将元素插入到元素的开头吗？

> ID：618089
> 
> 赞同：71
> 
> 时间：2009-03-06T08:47:51.967
> 
> 标签：javascript, html, prototypejs

如果用户在下拉框中选择一个选项，则必须添加一个标签和一个文本框。使用`appendChild`，这些元素被添加到`container`.

```
var newFreeformLabel = document.createElement('label');
newFreeformLabel.innerHTML = 'Omschrijving:';

var newFreeformField = document.createElement('input');
newFreeformField.className = 'textfield';
newFreeformField.name = 'factuur_orderregel[]';

var newFreeformSpacer = document.createElement('div');
newFreeformSpacer.className = 'spacer';

container.appendChild(newFreeformLabel);
container.appendChild(newFreeformField);
container.appendChild(newFreeformSpacer); 
```

问题是这些元素应该插入到 的开头`container`，而不是结尾。

PrototypeJS 中有解决方案吗？

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2009-03-06T09:30:27.573

此外`appendChild`，DOM 节点有一个[insertBefore](https://developer.mozilla.org/en/DOM/element.insertBefore)方法

```
container.insertBefore(newFreeformLabel, container.firstChild); 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2017-08-13T03:02:59.510

## 现代解决方案

要将孩子添加到父母的*开头*，请使用`prepend`

```
parent.prepend(newChild) 
```

要在父级*末尾添加，请使用*`append`

```
parent.append(newChild) 
```

此外，如果您想添加相对于另一个孩子，请使用以下之一：

```
child1.after(newChild)  // [child1, newChild, child2]

child1.before(newChild) // [newChild, child1, child2] 
```

## 高级用法

1.  您可以传递多个值（或使用扩展运算符`...`）。
2.  任何字符串值都将作为文本元素添加。

**例子：**

```
parent.prepend(newChild, "foo")  // [newChild, "foo", child1, child2]

const list = ["bar", newChild]
parent.append(...list, "fizz")  // [child1, child2, "bar", newChild, "fizz"] 
```

[相关 DOM 方法](https://stackoverflow.com/a/40444300/974045)-`child.replaceWith`

[文档](https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/prepend)

[我可以用吗](https://caniuse.com/#feat=dom-manip-convenience)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-03-06T08:50:01.273

使用[`Element.insert(element, content)`](http://prototypejs.org/doc/latest/dom/Element/insert/index.html).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-06T09:12:11.720

```
container.
    insert({
        // key is position
        // 'before', 'after', 'top' and 'bottom' are allowed
        top: new Element('label').
            update('Omschrijving:')
    }).
    insert({
        top: new Element('input').
            addClassName('textfield').
            writeAttribute('name', 'factuur_orderregel[]')
    }).
    insert({
        top: new Element('div').
            addClassName('spacer')
    }); 
```

但是，我认为 Prototype 的/`Element.insert`有点尴尬。例如，如果您想将 ,之后的某个时间放在您的代码之前，您需要执行以下操作：`before``after``.spacer``.textfield`

```
container.
    down('.textfield').
    insert({
        before: new Element('div').
            addClassName('spacer')
    }); 
```

这是，特别是如果您熟悉 DOM API `Element.insertBefore`，有点不直观，因为您**不是**`.spacer`在.**之前**插入，`.textfield`而是在.`container`**`.textfield`**

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T11:46:01.527

如果我按时看到了 Gareth 的解决方案，我可能会接受，因为我曾经使用过：

```
$('toggle_product').innerHTML = insertContent + $('toggle_product').innerHTML; 
```

因为 Prototypes 的 insert() 函数在 IE8 中返回错误。

# python - 如何在 Python 中查找数字是否属于特定范围？

> ID：618093
> 
> 赞同：47
> 
> 时间：2009-03-06T08:49:08.093
> 
> 标签：python, range

假设我想检查是否`x`属于范围 0 到 0.5。我该怎么做？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2009-03-06T08:53:15.743

不，你不能那样做。`range()`需要整数参数。如果您想知道是否`x`在此范围内，请尝试以下某种形式：

```
print 0.0 <= x <= 0.5 
```

小心你的上限。如果您使用`range()`它被排除在外（`range(0, 5)`不包括5！）

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-03-06T08:51:47.540

```
print 'yes' if 0 < x < 0.5 else 'no' 
```

[`range()`](http://docs.python.org/library/functions.html#range)用于生成连续整数数组

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-03-06T08:54:56.753

```
>>> s = 1.1
>>> 0<= s <=0.2
False
>>> 0<= s <=1.2
True 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-03-06T09:12:17.367

要检查某个数字 n 是否在两个数字 a 和 b 表示的包含范围内，您可以执行以下任一操作

```
if   a <= n <= b:
    print "yes"
else:
    print "no" 
```

使用replace `>=`and `<=`with `>`and`<`来检查是否在and`n`表示的排他范围内（即and本身不是该范围的成员）。`a``b``a``b`

Range 将生成由两个（或三个）转换为整数的参数定义的算术级数。请参阅[文档](http://docs.python.org/library/functions.html?#range)。我猜这不是你想要的。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-08-14T14:06:52.997

我会使用 numpy 库，它也允许您对数字列表执行此操作：

```
from numpy import array
a = array([1, 2, 3, 4, 5, 6,])
a[a < 2] 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-03-11T14:39:42.030

```
if num in range(min, max):
  """do stuff..."""
else:
  """do other stuff...""" 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-03-06T11:40:55.887

老忠实：

```
if n >= a and n <= b: 
```

而且它看起来不像 Perl（笑话）

# css - 你如何轻松地水平居中 使用 CSS？

> ID：618097
> 
> 赞同：737
> 
> 时间：2009-03-06T08:51:07.980
> 
> 标签：css, html

我正在尝试将`<div>`页面上的块元素水平居中并将其设置为最小宽度。最简单的方法是什么？我希望`<div>`元素与我的页面的其余部分内联。我将尝试举一个例子：

```
page text page text page text page text
page text page text page text page text
               -------
               | div |
               -------
page text page text page text page text
page text page text page text page text 
```

* * *

## 回答 #1

> 赞同：821
> 
> 时间：2012-05-29T10:28:09.240

在**非固定宽度**div 的情况下（即您不知道 div 将占用多少空间）。

```
#wrapper {
  background-color: green; /* for visualization purposes */
  text-align: center;
}
#yourdiv {
  background-color: red; /* for visualization purposes */
  display: inline-block;
}
```

```
<div id="wrapper">    
    <div id="yourdiv">Your text</div>
</div>
```

请记住， 的宽度`#yourdiv`是动态的 -> 它会增长和缩小以容纳其中的文本。

您可以在[Caniuse上检查浏览器兼容性](http://caniuse.com/inline-block)

* * *

## 回答 #2

> 赞同：575
> 
> 时间：2009-03-06T09:08:21.353

在大多数浏览器中，这将起作用：

```
div.centre {
  width: 200px;
  display: block;
  background-color: #eee;
  margin-left: auto;
  margin-right: auto;
}
```

```
<div class="centre">Some Text</div>
```

在 IE6 中，您需要添加另一个外部`div`：

```
div.layout {
  text-align: center;
}

div.centre {
  text-align: left;
  width: 200px;
  background-color: #eee;
  display: block;
  margin-left: auto;
  margin-right: auto;
}
```

```
<div class="layout">
  <div class="centre">Some Text</div>
</div>
```

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2009-03-06T08:55:11.260

```
margin: 0 auto; 
```

正如[ck 所说](https://stackoverflow.com/questions/618097/how-do-you-easily-horizontally-center-a-div-using-css/618104#618104)，并非所有浏览器都支持[min-width](http://www.w3schools.com/CSS/pr_dim_min-width.asp)

* * *

## 回答 #4

> 赞同：50
> 
> 时间：2015-08-14T10:29:01.937

问题的标题和内容实际上是不同的，所以我将发布两个解决方案，使用`Flexbox`.

我想`Flexbox`在 IE8 和 IE9 被完全破坏时替换/添加到当前的标准解决方案；）

检查当前[**浏览器兼容性表以获取 flexbox**](http://caniuse.com/#search=flexbox)

**单元素**

```
.container {
  display: flex;
  justify-content: center;
}
```

```
<div class="container">
  <img src="http://placehold.it/100x100">
</div>
```

**多个元素，但只有一个居中**

默认行为是`flex-direction: row`将所有子项对齐在一行中。将其设置为`flex-direction: column`将有助于堆叠线条。

```
.container {
  display: flex;
  flex-direction: column;
}
.centered {
  align-self: center;
}
```

```
<div class="container">
  <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged.
   </p>
  <div class="centered"><img src="http://placehold.it/100x100"></div>
  <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It
    has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p>
</div>
```

* * *

## 回答 #5

> 赞同：35
> 
> 时间：2015-11-04T07:54:24.760

如果旧浏览器不是问题，请使用 HTML5 / CSS3。如果是，应用 polyfills 并仍然使用 HTML5 / CSS3。我假设您的 div 在这里没有边距或填充，但它们相对容易解释。代码如下。

```
.centered {
    position: relative;
    left: 50%;
    transform: translateX(-50%);
} 
```

这是做什么的：

1.  定位`div`相对于它的容器；
2.  将`div`的左边界水平放置在**其容器宽度**的 50% 处；
3.  水平向后平移**自身宽度****的`div`**50% 。

很容易想象这个过程来确认`div`最终会水平居中。作为奖励，您可以**垂直居中**而无需额外费用：

```
.centered-vertically {
    position: relative;
    top: 50%;
    transform: translateY(-50%);
} 
```

这种方法的优点是您不必做任何违反直觉的事情，例如将您的 div 视为某种文本，将其包装在一个（通常在语义上无用的）附加容器中，或者给它一个固定的宽度，这不是总是可能的。

`transform`如果需要，不要忘记供应商前缀。

* * *

## 回答 #6

> 赞同：29
> 
> 时间：2009-03-06T08:54:09.453

```
.center {
   margin-left: auto;
   margin-right: auto;
} 
```

全局不支持最小宽度，但可以使用

```
.divclass {
   min-width: 200px;
} 
```

然后你可以将你的 div 设置为

```
<div class="center divclass">stuff in here</div> 
```

* * *

## 回答 #7

> 赞同：28
> 
> 时间：2009-03-06T08:58:08.883

**CSS** , **HTML** :

```
div.mydiv {width: 200px; margin: 0 auto}
```

```
<div class="mydiv">

    I am in the middle

</div>
```

您的图表还显示了块级元素（通常是 div ），而不是内联元素。

在我的头顶，`min-width`FF2+/Safari3+/IE7+支持。可以使用hacky CSS 或一些简单的JS 为IE6 完成。

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2015-06-13T20:45:34.110

您应该在父元素上使用`position: relative`and `text-align: center`，然后`display: inline-block`在要居中的子元素上使用。这是一个简单的 CSS 设计模式，适用于所有主流浏览器。这是下面的示例或查看[CodePen 示例](http://codepen.io/joshuapekera/pen/ZGJzYo)。

```
p {
  text-align: left;
}
.container {
  position: relative;
  display: block;
  text-align: center;
}
/* Style your object */

.object {
  padding: 10px;
  color: #ffffff;
  background-color: #556270;
}
.centerthis {
  display: inline-block;
}
```

```
<div class="container">

  <p>Aeroplanigera Mi Psychopathologia Subdistinctio Chirographum Intuor Sons Superbiloquentia Os Sors Sesquiseptimus Municipatio Archipresbyteratus O Conclusio Compedagogius An Maius Septentrionarius Plas Inproportionabilit Constantinopolis Particularisticus.</p>

  <span class="object centerthis">Something Centered</span>

  <p>Aeroplanigera Mi Psychopathologia Subdistinctio Chirographum Intuor Sons Superbiloquentia Os Sors Sesquiseptimus Municipatio Archipresbyteratus O Conclusio Compedagogius.</p>
</div>
```

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2017-11-21T09:45:28.397

请使用以下代码，您的 div 将位于中心。

```
.class-name {
    display:block;
    margin:0 auto;
} 
```

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2014-09-04T10:40:02.103

你可以`margin: 0 auto`在你的 CSS 上使用而不是`margin-left: auto; margin-right: auto;`

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2018-03-01T12:40:08.477

如果您知道 div 的宽度并且它是固定的，则可以使用以下 css：

```
margin-left: calc(50% - 'half-of-your-div-width'); 
```

其中 'half-of-your-div-width' 应该（显然）是 div 宽度的一半。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2018-02-11T01:45:25.647

九年后，我认为是时候推出一个新版本了。这是我的两个（现在是一个）最喜欢的。

**利润**

设置`margin`为`auto`。你应该知道方向序列是`margin: *top* *right* *bottom* *left*;`或`margin: *top&bottom* *left&right*`

```
aside{
    display: block;
    width: 50px;
    height: 100px;
    background-color: green;
    float: left;
}

article{
    height: 100px;
    margin: 0 0 0 50px; /* 50px aside width */
    background-color: grey;
}

div{
  margin: 0 auto;
  display:block;
  width: 60px;
  height: 60px;
  background-color: blue;
  color: white;
}
```

```
<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <aside>
        </aside>
        <article>           
                <div>The div</div>
        </article>
    </body>
</html>
```

**中心：已废弃，不要使用这个！**

使用`<center></center>`标签作为`<div></div>`.

例子：

```
aside{
    display:block;
    background-color:green;
    width: 50px;
    height: 100px;
    float: left;
}

center{
    display:block;
    background-color:grey;
    height: 100px;
    margin-left: 50px; /* Width of the aside */
}

div{
    display:block; 
    width: 60px; 
    height: 60px; 
    background-color:blue;
    color: white;
}
```

```
<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <aside>
        </aside>
        <article>
            <center>
                <div>The div</div>
            </center>
        </article>
    </body>
</html>
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2017-09-29T11:46:38.877

将此类添加到您的 css 文件中，它将完美地执行以下步骤：

1）首先创建这个

```
<div class="center-role-form">
  <!--your div (contrent) place here-->
</div> 
```

2）将此添加到您的CSS

```
.center-role-form {
    width: fit-content;
    text-align: center;
    margin: 1em auto;
    display: table;
} 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2014-12-09T04:14:34.770

```
.center {
  height: 20px;
  background-color: blue;
}

.center>div {
  margin: auto;
  background-color: green;
  width: 200px;
}
```

```
<div class="center">
  <div>You text</div>
</div>
```

[提琴手](https://jsfiddle.net/5e74pajk/)

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2015-04-24T20:36:58.253

如果你`<div>`有`position: absolute`你需要使用`width: 100%;`

```
#parent {
    width: 100%;
    text-align: center;
}

    #child {
        display: inline-block;
    } 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2015-05-07T19:12:03.940

在这里我添加正确的答案

您可以使用此代码段并进行自定义。这里我使用了 2 个子块。这应该显示页面的中心。您可以使用一个或多个块。

```
<html>
<head>
<style>
#parent {
    width: 100%;
    border: solid 1px #aaa;
    text-align: center;
    font-size: 20px;
    letter-spacing: 35px;
    white-space: nowrap;
    line-height: 12px;
    overflow: hidden;
}

.child {
    width: 100px;
    height: 100px;
    border: solid 1px #ccc;
    display: inline-block;
    vertical-align: middle;
}
</style>
</head>

<body>

<div class="mydiv" id="parent">

<div class="child">
Block 1
</div>
<div class="child">
Block 2
</div>

</div>
</body>
</html> 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2015-02-15T17:06:45.673

对这个问题的最佳回答是使用`margin-auto`，但要使用它，你必须知道`width`你的`div`in`px`或`%`。

CSS 代码：

```
div{
    width:30%;
    margin-left:auto;
    margin-right:auto;
} 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2017-06-23T14:56:27.767

在你的 html 文件中你写：

```
<div class="banner">
  Center content
</div> 
```

你写的css文件：

```
.banner {
display: block;
margin: auto;
width: 100px;
height: 50px;
} 
```

为我工作。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2017-09-07T15:40:29.973

使用 margin-left:auto 和 margin-right:auto 在某些情况下可能不起作用。这是一个始终有效的解决方案。您指定所需的宽度，然后将左边距设置为剩余宽度的一半。

```
 <div style="width:80%; margin-left:calc(10%);">
        your_html
    </div> 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-04-20T02:21:58.263

我将 div 和 span 标签与 css 属性（例如块、跨浏览器内联块和文本对齐中心）一起使用，请参阅我的简单示例

```
<!DOCTYPE html>
<html>
    <head>
       <title>Page Title</title>
       <style>
           .block{display:block;}
           .text-center{text-align:center;}
           .border-dashed-black{border:1px dashed black;}
           .inline-block{
                 display: -moz-inline-stack;
                 display: inline-block;
                 zoom: 1;
                 *display: inline;
            }
           .border-solid-black{border:1px solid black;}
           .text-left{text-align:left;}
        </style>
    </head>
    <body>
          <div class="block text-center border-dashed-black">
              <span class="block text-center">
                  <span class="block"> 
        <!-- The Div we want to center set any width as long as it is not more than the container-->
                      <div class="inline-block text-left border-solid-black" style="width:450px !important;">
                             jjjjjk
                      </div> 
                  </span>
              </span>
          </div>
      </body>
   </html> 
```

* * *

## 回答 #21

> 赞同：-3
> 
> 时间：2014-12-28T23:59:07.307

使用 jQuery：

```
$(document).ready(function() {
    $(".myElement").wrap( '<span class="myElement_container_new"></span>' ); // for IE6
    $(".myElement_container_new").css({// for IE6
        "display" : "block",
        "position" : "relative",
        "margin" : "0",
        "padding" : "0",
        "border" : "none",
        "background-color" : "transparent",
        "clear" : "both",
        "text-align" : "center"
    });
    $(".myElement").css({
        "display" : "block",
        "position" : "relative",
        "max-width" : "75%", // for example
        "margin-left" : "auto",
        "margin-right" : "auto",
        "clear" : "both",
        "text-align" : "left"
    });
}); 
```

或者，如果您想使用类“.myElement”将每个元素居中：

```
$(document).ready(function() {
    $(".myElement").each(function() {
        $(this).wrap( '<span class="myElement_container_new"></span>' ); // for IE6
        $(".myElement_container_new").css({// for IE6
            "display" : "block",
            "position" : "relative",
            "margin" : "0",
            "padding" : "0",
            "border" : "none",
            "background-color" : "transparent",
            "clear" : "both",
            "text-align" : "center"
        });
        $(this).css({
            "display" : "block",
            "position" : "relative",
            "max-width" : "75%",
            "margin-left" : "auto",
            "margin-right" : "auto",
            "clear" : "both",
            "text-align" : "left"
        });
    });
}); 
```

* * *

## 回答 #22

> 赞同：-4
> 
> 时间：2014-07-14T11:47:02.577

您可以使用位置：相对；然后设置 left 和 top 值：

```
.cenverDiv{
    position:relative;
    left:30%;
    top:0px;
} 
```

# .net - 在 .Net 中，我可以指定默认的应用程序范围的隔离级别吗？

> ID：618103
> 
> 赞同：0
> 
> 时间：2009-03-06T08:54:06.600
> 
> 标签：.net, transactionscope, isolation

当我使用一个对象时，我可以[使用事务选项](https://stackoverflow.com/questions/609907/how-do-i-specify-the-database-isolation-level-to-be-used-at-a-high-level/609928#609928)`TransactionScope`指定 Isoaltion Level 。

如果未指定，则使用的默认隔离级别是什么？

是否可以设置 s 将使用的应用程序范围的默认隔离级别`TransactionScope`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T08:57:41.257

您可以创建自己的对象来包装 TransactionScope，设置正确的隔离级别，然后使用它来代替 TransactionScope。

我不能保证这会奏效，但听起来很合理。让我知道是否有，我会更新答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T09:04:42.660

我们只有一个辅助方法`TransactionManager.CreateTransactionScope`，它使用项目范围的选项创建一个。它也是封装其他逻辑的有用地方，例如，如果有环境事务，您可以使用它，或者创建具有兼容选项的嵌套事务，或者创建新事务，具体取决于适合您的应用程序的内容（您可能想要创建指定哪些行为是允许的）。

# unit-testing - 您是否更专注于单元、集成或验收测试？

> ID：618105
> 
> 赞同：2
> 
> 时间：2009-03-06T08:54:21.920
> 
> 标签：unit-testing, integration-testing, acceptance-testing, roi

我最终参加的大多数演出要么很少或没有单元测试。通常，被描述为单元测试的内容实际上是集成测试，并且很少从开发人员的机器上运行。我通常通过宣传两者之间的区别来开始我的布道，并尝试让人们编写非常集中的单元测试并将集成测试留到以后，即当有足够多的人编写单元测试时，我们可以“继续”编写集成测试。验收或系统级测试通常由开发人员手动处理，然后由 QA 部门处理。

我的问题是，在敏捷环境之外工作时，您在单元、集成和验收测试中投入了多少精力，您认为最大的价值是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-06T09:03:41.227

我尝试从一开始就进行单元测试。我不是世界上最大的 TDD 粉丝，但我真的很喜欢单元测试。我不认为某些魔法仙女会确保集成测试能够顺利通过，因为所有单元测试都有效，但它已经非常接近了。

至于验收测试，在我看到单元测试通过（或失败，如果它们应该失败）之前，我什至不会看一些东西。我想不出很多我会接受完全缺乏单元测试的情况。如果应用程序中的某些核心库更新了怎么办？

许多人会争辩说单元测试是以开发人员为中心的，他们是正确的。然而，缺乏单元测试本身就是一个指标......尤其是如果做验收测试的人恰好是开发人员:)

**编辑：**

集成测试对我来说也很重要。我们通常按照非常严格的规范构建东西......当集成测试失败（在之前通过之后），它是范围蔓延的一个强有力的指标。发生这种情况时，需要有人在修复它之前发出一些声音。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T09:00:51.467

很多时候，对这个问题的回答变得极端。就像你应该有几乎 100% 的覆盖率或者单元测试是愚蠢的......

我相信你必须找到平衡。

在合理怀疑类逻辑可能失败的情况下使用单元测试。必须在隔离类上进行单元测试，因此这意味着您可能需要模拟该类使用的服务。这样你就可以安全地执行重构，因为单元测试将确保该类仍然按预期工作。

集成测试对于确保您的应用程序完全正常工作是必要的。您可以进行许多单元测试，但这并不意味着您的应用程序可以正常工作。

关于验收测试，我完全同意你的看法。在（冲刺）结束时进行，部分必须手动完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T09:10:10.523

我听说单元测试就像测试墙上的单个砖块，而功能/集成测试就像测试整面墙的稳定性。

单元测试对于开发人员来说是必要的，以确保这些类正在做他们应该做的事情。

功能/集成测试是必要的，以确保您没有错过实际提供某些功能的“大图”目标。

所以恕我直言，**两者**都是绝对必要的，从投资回报率的角度来看，将其中任何一个都排除在外是个坏主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-06T09:01:35.957

我认为你不能混淆它。您描述的每个测试都有不同的目标。

单元测试是针对开发人员的。他们在模块实现之前或并行编写单元测试，以确保其正常工作或满足所有接口和要求。

在测试中心开发之后进行集成测试。在开发过程中，您不会像在单元测试中那样测试单个模块。集成测试涵盖了几个模块之间的交互。

验收测试通常涉及客户自己检查是否满足所有要求以及是否按规定实施功能。

# c++ - C++（标准）异常和 Unicode

> ID：618111
> 
> 赞同：10
> 
> 时间：2009-03-06T08:56:58.823
> 
> 标签：c++, exception, unicode

我遇到了一个问题，我正在处理 unicode 字符串，我想用标准异常进行一些错误报告。标准异常中包含的错误消息不是 unicode。

通常这对我来说不是问题，因为我可以在非 unicode 中定义错误消息并拥有足够的信息，但在这种情况下，我想包含原始字符串中的数据，这些数据*可以*是 unicode。

您如何处理异常中的 unicode 消息？您是否创建了自己的自定义异常类，是否从标准异常中派生出将它们扩展为 unicode，或者您是否有针对此问题的其他解决方案（例如“不要在异常中使用 unicode”的规则）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-06T09:15:09.390

[我认为Boost 错误处理指南](http://www.boost.org/community/error_handling.html)中指出的 Peter Dimov 的基本原理很好地涵盖了这一点：

> 不要太担心 what() 消息。很高兴有一个程序员有机会弄清楚的消息，但你不太可能在抛出异常时编写相关且用户可理解的错误消息。当然，国际化超出了异常类作者的范围。Peter Dimov 提出了一个很好的论点，即正确使用 what() 字符串是作为错误消息格式化程序表的键。现在，如果我们能够为标准库抛出的异常获得标准化的 what() 字符串……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-06T09:27:01.887

（由于弗洛丁的回答，我在洞察后添加了我自己的问题的答案）

在我的特殊情况下，我有一个可能包含 unicode 字符的字符串，我正在解析它，因此期望它采用某种格式。解析可能会失败并抛出异常以指示发生了问题。
最初我打算在异常中创建一个程序员可读的消息，详细说明解析失败的字符串的内容，这就是我遇到麻烦的地方，因为标准异常的异常消息不能包含 unicode 字符。

但是，我正在考虑的新设计是通过 std::exception 派生类中的异常机制返回字符串中解析错误的位置。创建包含导致错误的字符串部分的程序员可读消息的过程可以委托给类外部的处理程序。这对我来说感觉像是一个更干净的设计。

谢谢大家的投入！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T09:37:12.830

如果您真的想要 Unicode，您可以对异常消息进行 UTF-8 编码，在开头输入 BOM，以便`char`在准备输出消息时判断异常消息是 UTF-8、raw 还是其他编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-06T09:06:25.400

我们使用自己的异常类。如果这是不可能的，您总是可以从 Unicode 转换为当前字符集中表示的 MBSC - 您通常只需要这个文本一小段时间，进一步的转换不是问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-06T09:13:50.843

我建议从 std::exception 派生并将其扩展为使用您的 unicode 字符串类。从 std::exception 派生可以为您带来以下好处：

```
catch (std::exception&)... 
```

作为您最后一次捕获并让它捕获您可能抛出的任何异常（和 STL）。如果您创建自己的基本异常（并从中派生其他异常），则需要添加另一个捕获。

无论哪种方式，我认为这*并不*重要，但我更喜欢这种风格（显然这会浪费 std::exception 中的空 std::string 但我认为它不会有很大的不同）。

# perl - 如何从 Excel 调用 Perl 脚本？

> ID：618116
> 
> 赞同：4
> 
> 时间：2009-03-06T08:58:41.097
> 
> 标签：perl, excel

我想使用 VBA 从 Excel 调用 Perl 脚本。我使用了一个shell命令。我还使用了以下代码：

```
Function Chk()
Dim RetVal
RetVal = Shell("C:\Perl\bin\Hello.pl", 1)
End Function 
```

但是上面的函数不运行文件。有什么错误吗？

有没有其他方法可以使用 Excel 调用 Perl 脚本或外部程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-06T09:46:11.840

看看 ActiveState 的 Perl 扩展。他们有一个“ActivePerl”DLL，它将 Perl 解释器作为一个 ActiveX 组件运行，它应该允许与 Excel 无缝集成。

此外，它们的 OLE 扩展允许 Perl 访问完整的 Excel OLE 对象模型，因此您可以非常精确地操作电子表格。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-06T09:02:37.360

您需要支付以下费用：

```
 c:\perl\bin\perl.exe Hello.pl 
```

让它运行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-06T09:09:32.087

您还可以将此行添加为脚本中的第一行：

```
#!c:\perl\bin\perl.exe 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-07T20:36:56.450

Excel 的 Shell() 函数可能会忽略文件关联。你几乎肯定需要说更多类似的话：

```
Function Chk()
  Dim RetVal
  Chk = Shell("C:\Perl\bin\perl.exe C:\Perl\bin\Hello.pl", 1)
End Function 
```

得到你想要的效果。需要注意的两个更改首先是 perl.exe 的显式调用，其次是编写的函数中的小语法错误。

请注意，如果 perl.exe 的路径或脚本的路径（或脚本的任何其他参数）中有空格，那么您将需要形成一个字符串，其中包含引用它们的双引号字符，例如：

```
Function Chk()
  Dim RetVal
  Chk = Shell("C:\Perl\bin\perl.exe ""C:\Some path\with spaces\Hello.pl""", 1)
End Function 
```

会成功的。

# .net - 您可以在 VS2008 中将单元测试分组到单个测试项目中吗？

> ID：618118
> 
> 赞同：2
> 
> 时间：2009-03-06T08:59:21.813
> 
> 标签：.net, visual-studio-2008, unit-testing

您可以在 VS2008 中将单元测试分组到单个测试项目中吗？

例如 - test1 和 test2 属于 A 组。Test4 和 test5 属于 B 组。

我不希望 B 组中的测试运行，除非我明确选择它们。这是因为并非所有测试都应该包含在自动测试中。

编辑：
改写第二部分。
我可以使用测试列表编辑器创建组。是否可以只选择其中一个或两个组进行自动测试？

例如，我希望 A 组每晚作为自动化测试运行，B 组用于手动测试运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-06T09:28:33.990

在测试视图窗口中有一个“分组依据”组合框。您可以对类名、命名空间、描述等进行分组测试。

因此，通过将其与测试方法上可用的一些属性结合使用，例如`Category`在运行测试时可以更有选择性。

编辑：这只是手动运行测试时的解决方案。也许类似的解决方案可用于自动测试，您可以选择仅运行某个类别或某个命名空间中的测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-06T09:58:54.150

查看测试列表编辑器（在`Test`|下`Windows`）。这将向您显示解决方案中的所有测试。在左侧，您可以创建组的 TreeView，并且可以将每个测试拖到一个组中。通过每个 TreeView 节点上的复选框，您可以轻松切换要运行或调试的（组）测试。

这是你要找的吗？

此信息似乎存储在`vsmdi`元数据文件中，因此应该持久保存。但是，我不确定这是否（以及如何）与自动测试有关。对我来说，它看起来像是一个 VS GUI 功能，用于手动分组和运行测试。

编辑：对于自动化测试，我会尝试为不同的“场合”分离测试代码（例如，您在处理代码时总是想要运行的快速单元测试，可能需要一些时间的性能测试，多层集成测试，等）在语义上进入不同的测试项目，即使您使用相同的单元测试框架来物理实现所有这些测试。然后，您应该能够选择正确的测试组以在正确的时间运行（签入、每日构建、需要时的手动测试）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-03-06T09:06:23.590

Visual Studio 单元测试背后的概念强烈建议对每个目标程序集使用单个测试项目。当然，可以为所有单元测试使用单个测试项目，但您必须手动编写它们。单元测试向导不是那么灵活。

[NUnit](http://www.nunit.org)更灵活。存储单元测试的程序集没有限制。您可以对所有单元测试使用单个程序集，甚至可以将其存储在与要测试的目标类相同的类中。

# iphone - 在 Xcode 中编译失败，因为未找到链接库

> ID：618119
> 
> 赞同：4
> 
> 时间：2009-03-06T08:59:25.073
> 
> 标签：iphone, objective-c, xcode, openssl

我的 iPhone 应用程序中的一些 C 代码需要 openssl 库。所以我把这个库放到了我的项目中。

但是当我编译它时，Xcode 会抛出一些错误：

> 错误：openssl/ssl.h：没有这样的文件或目录

这是我的代码，包括：

```
 #include <openssl/ssl.h> 
```

Xcode 中的目标设置：

[替代文字 http://img17.imageshack.us/img17/2266/bild3tez.png](http://img17.imageshack.us/img17/2266/bild3tez.png)

**我错过了正确链接它的哪一步？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-06T09:00:40.017

这不是链接问题。这是预处理器无法找到头文件。您需要检查该标头的最终位置，并可能更改 Xcode（或您的项目）的设置以包含该位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-06T17:56:04.503

由于这似乎适用于 iPhone，因此您不会找到它。OpenSSL 在 iPhone 上不可用，对第三方应用程序也不可用。为模拟器编译可能会起作用，因为它有各种真实设备没有的东西。让它为手机编译是不可能的——找不到标头，因为它不存在，如果你以某种方式欺骗它使用不同的副本，它将无法链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-08-22T16:12:12.323

好吧，当找不到链接库时，我现在去这里查看我需要链接到哪个库/框架。

我知道您的问题是其他问题，但这对其他人应该有用。

[http://developer.apple.com/iPhone/library/documentation/Xcode/Conceptual/iphone_development/910-A-iPhone_Simulator_Frameworks/iphone_simulator_frameworks.html](http://developer.apple.com/iPhone/library/documentation/Xcode/Conceptual/iphone_development/910-A-iPhone_Simulator_Frameworks/iphone_simulator_frameworks.html)

Also, to link the libraries, go to the targets area of xcode. Expand that area until you find "link binary with libraries". Right click and add existing framework. Click the plus at the bottom and then find the library you need and add it.

# visual-studio-2005 - VS 2005 无法在设计器模式下打开 DataSet Schema

> ID：618133
> 
> 赞同：0
> 
> 时间：2009-03-06T09:06:21.297
> 
> 标签：visual-studio-2005, upload, dataset, windows-forms-designer

我无法在 VS 2005 中以设计器模式查看 DataSet 文件。当我尝试使用另一个解决方案时，它没问题，但在我的一个项目解决方案中我不能。这些项目是解决方案文件中的 C# 类库项目。有什么建议吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-09-15T07:53:18.277

如果您没有收到任何错误，那么我猜它是设置问题。为了解决这个问题，请转到 Dot.NEt 中的查看菜单，然后单击非虚拟控件或`Ctrl+Alt+Q`启用相同的控件。

现在您将能够查看`Dataset`设计视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T09:32:09.363

尝试遍历它以查找错误...

```
System.Data.DataSet ds = new {your dataset}

if (ds.HasErrors)
{
    foreach (DataTable dt in ds.Tables)
    {
        if (dt.HasErrors)
        {
            DataRow[] drErr =  dt.GetErrors();
            foreach (DataRow dr in drErr)
            {
                DataColumn[] dca = dr.GetColumnsInError();
                foreach(DataColumn dc in dca)
                {
                    System.Diagnostics.Debug.Print(dr.GetColumnError(dc)); 
                }
            }
         }
    }
} 
```

# c# - 如何在 C# 中使用和创建用户定义的委托？

> ID：618143
> 
> 赞同：0
> 
> 时间：2009-03-06T09:10:52.083
> 
> 标签：c#, delegates

我在.NET 中设计win 表单时使用了委托...即拖放按钮、双击并填写myButton_click 事件。我想了解如何在 C# 中创建和使用用户定义的委托。

如何在 C# 中使用和创建用户定义的委托？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-06T09:16:00.337

我建议阅读有关该主题的教程。

基本上，您声明一个委托类型：

```
public delegate void MyDelegate(string message); 
```

然后您可以直接分配并调用它：

```
MyDelegate = SomeFunction;
MyDelegate("Hello, bunny"); 
```

或者您创建一个事件：

```
public event MyDelegate MyEvent; 
```

然后你可以像这样从外部添加一个事件处理程序：

```
SomeObject.MyEvent += SomeFunction; 
```

Visual Studio 对此很有帮助。输入 += 后，只需按 tab-tab，它就会为您创建处理程序。

然后您可以从对象内部触发事件：

```
if (MyEvent != null) {
    MyEvent("Hello, bunny");
} 
```

这就是基本用法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T09:16:31.960

```
public delegate void testDelegate(string s, int i);

private void callDelegate()
{
    testDelegate td = new testDelegate(Test);

    td.Invoke("my text", 1);
}

private void Test(string s, int i)
{
    Console.WriteLine(s);
    Console.WriteLine(i.ToString());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T09:20:06.303

不是完全重复（找不到重复），但这里有很多关于 SO 的信息，请尝试

[Events 和 Delegates 之间](https://stackoverflow.com/questions/563549/difference-between-events-and-delegates-and-its-respective-applications)的区别上手，然后看看

[何时使用。. .](https://stackoverflow.com/questions/491374/c-can-someone-tell-me-why-and-where-i-should-use-delegates)

[什么是闭包](https://stackoverflow.com/questions/428617/what-are-closures-in-net)

[这位代表在做什么。. .](https://stackoverflow.com/questions/73024/what-is-this-delegate-call-doing-in-this-line-of-code-c)

希望这些帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T10:50:17.727

有关广泛的答案，请查看[mohamad halabi](http://www.codeproject.com/script/Membership/View.aspx?mid=3651361)的这篇[文章](http://www.codeproject.com/KB/cs/NETDelegatesAndEvents.aspx#Definition)。要获得更简短的答案，请检查 c:/Program Files/Microsoft Visual Studio 9.0/Samples/1033/ 文件夹中的这个稍作修改的示例...

```
using System;
using System.IO; 

namespace DelegateExample
{
  class Program
  {
    public delegate void PrintDelegate ( string s );

    public static void Main ()
    {
      PrintDelegate delFileWriter = new PrintDelegate ( PrintFoFile );
      PrintDelegate delConsoleWriter = new PrintDelegate ( PrintToConsole);
      Console.WriteLine ( "PRINT FIRST TO FILE by passing the print delegate -- DisplayMethod ( delFileWriter )" );

      DisplayMethod ( delFileWriter );      //prints to file
      Console.WriteLine ( "PRINT SECOND TO CONSOLE by passing the print delegate -- DisplayMethod ( delConsoleWriter )" );
      DisplayMethod ( delConsoleWriter ); //prints to the console
      Console.WriteLine ( "Press enter to exit" );
      Console.ReadLine ();

    }

    static void PrintFoFile ( string s )
    {
      StreamWriter objStreamWriter = File.CreateText( AppDomain.CurrentDomain.BaseDirectory.ToString() + "file.txt" );
      objStreamWriter.WriteLine ( s );
      objStreamWriter.Flush ();
      objStreamWriter.Close ();
    }

    public static void DisplayMethod ( PrintDelegate delPrintingMethod )
    { 
      delPrintingMethod( "The stuff to print regardless of where it will go to" ) ;
    }

    static void PrintToConsole ( string s )
    {
      Console.WriteLine ( s );    
    } //eof method 
  } //eof classs 
} //eof namespace 
```

# java - 枚举和枚举的区别 ?

> ID：618148
> 
> 赞同：10
> 
> 时间：2009-03-06T09:12:24.433
> 
> 标签：java, generics

枚举<? 扩展 ZipEntry> 和 Enumeration<ZipEntry>？如果是这样，有什么区别？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-06T09:17:19.930

当您拥有其中一个时，您可以做什么并没有实际区别，因为类型参数仅用于“输出”位置。另一方面，在您可以*用作*其中之一方面存在很大差异。

假设你有一个`Enumeration<JarEntry>`- 你不能把它传递给一个`Enumeration<ZipEntry>`作为它的参数之一的方法。你*可以*将它传递给一个方法`Enumeration<? extends ZipEntry>`。

当你有一个在输入和输出位置都使用类型参数的类型时会更有趣——`List<T>`这是最明显的例子。以下是三个参数变化的方法示例。在每种情况下，我们都会尝试从列表中获取一个项目，然后添加另一个。

```
// Very strict - only a genuine List<T> will do
public void Foo(List<T> list)
{
    T element = list.get(0); // Valid
    list.add(element); // Valid
}

// Lax in one way: allows any List that's a List of a type
// derived from T.
public void Foo(List<? extends T> list)
{
    T element = list.get(0); // Valid
     // Invalid - this could be a list of a different type.
     // We don't want to add an Object to a List<String>
    list.add(element);   
}

// Lax in the other way: allows any List that's a List of a type
// upwards in T's inheritance hierarchy
public void Foo(List<? super T> list)
{
    // Invalid - we could be asking a List<Object> for a String.
    T element = list.get(0);
    // Valid (assuming we get the element from somewhere)
    // the list must accept a new element of type T
    list.add(element);
} 
```

有关更多详细信息，请阅读：

*   [Java 语言泛型指南](http://java.sun.com/j2se/1.5.0/docs/guide/language/generics.html)
*   [Java 泛型教程 (PDF)](http://java.sun.com/j2se/1.5/pdf/generics-tutorial.pdf)
*   [Java 泛型常见问题解答](http://www.angelikalanger.com/GenericsFAQ/JavaGenericsFAQ.html)- 特别[是通配符部分](http://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedTypes.html#WIldcard%20Instantiations)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-06T09:18:55.120

是的，直接来自[sun 泛型教程](http://java.sun.com/developer/technicalArticles/J2SE/generics/)之一：

> 这里的 Shape 是一个抽象类，它有三个子类：Circle、Rectangle 和 Triangle。
> 
> ```
> public void draw(List<Shape> shape) {
>   for(Shape s: shape) {
>     s.draw(this);
>   }
> } 
> ```
> 
> 值得注意的是，draw() 方法只能在 Shape 列表上调用，而不能在例如 Circle、Rectangle 和 Triangle 列表上调用。为了让该方法接受任何类型的形状，它应该写成如下：
> 
> ```
> public void draw(List<? extends Shape> shape) {
>    // rest of the code is the same
> } 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-06T09:32:53.543

现在你刚刚离开并让我想起了我希望我们在 C# 世界中拥有的东西。

除了提供的链接之外，还有一些关于 C# 和 Java 与此主题相关的很好的链接，在这个问题的答案中：[Logic and its application to Collections.Generic and inherit](https://stackoverflow.com/questions/110121)

其中的一个选择是：

*   [C# 中的逆变和协变](http://blogs.msdn.com/ericlippert/archive/2007/10/16/covariance-and-contravariance-in-c-part-one.aspx)（代码是特定于 C# 的，并且是理论上的，因为语法不存在 [还]，但很好地涵盖了一般主题。）
*   [Java泛型和参数的协变和逆变](http://etymon.blogspot.com/2007/02/java-generics-and-covariance-and.html)
*   Sun 的[Java 泛型教程。](http://java.sun.com/j2se/1.5/pdf/generics-tutorial.pdf)

# c# - 内置类型的运算符重载

> ID：618149
> 
> 赞同：2
> 
> 时间：2009-03-06T09:12:39.473
> 
> 标签：c#

如何覆盖要在字符串、数组等内置类型上使用的运算符？例如：我希望覆盖数组 + 运算符的含义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-06T09:15:11.947

基本上你不能。

您可以使用扩展方法来添加如下功能：

```
public void CustomAdd( this Array input, Array addTo ) {
    ...
} 
```

但这不适用于运营商。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T09:17:01.397

你不能:)

但是，对于数组示例，您可以从 IEnnumerable 或 List ... 继承并覆盖这些运算符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T09:17:28.557

[正如@Keith](https://stackoverflow.com/users/905/keith)指出的那样，简短的回答是你不能。

更长的答案是，要为类添加运算符重载，您需要能够更改该类的源代码。

在添加运算符来处理两种不同类型（例如数组 + 字符串）的组合的情况下，您可以更改其中一种类型的源代码就足够了。这意味着您应该能够添加代码来指定如果您将自己的一种类型添加到数组中会发生什么。

在 BCL 类的情况下，你运气不好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-06T10:11:41.500

您不能为现有类型重载运算符，因为这可能会破坏使用这些类型的任何其他代码。

您可以创建自己的类来封装数组，从数组中公开您需要的方法和属性，并重载任何有意义的运算符。

例子：

```
public class AddableArray<T> : IEnumerable<T> {

    private T[] _array;

    public AddableArray(int len) {
        _array = new T[len];
    }

    public AddableArray(params T[] values) : this((IEnumerable<T>)values) {}

    public AddableArray(IEnumerable<T> values) {
        int len;
        if (values is ICollection<T>) {
            len = ((ICollection<T>)values).Count;
        } else {
            len = values.Count();
        }
        _array = new T[len];
        int pos = 0;
        foreach (T value in values) {
            _array[pos] = value;
            pos++;
        }
    }

    public int Length { get { return _array.Length; } }

    public T this[int index] {
        get { return _array[index]; }
        set { _array[index] = value; }
    }

    public static AddableArray<T> operator +(AddableArray<T> a1, AddableArray<T> a2) {
        int len1 = a1.Length;
        int len2 = a2.Length;
        AddableArray<T> result = new AddableArray<T>(len1 + len2);
        for (int i = 0; i < len1; i++) {
            result[i] = a1[i];
        }
        for (int i = 0; i < len2; i++) {
            result[len1 + i] = a2[i];
        }
        return result;
    }

    public IEnumerator<T> GetEnumerator() {
        foreach (T value in _array) {
            yield return value;
        }
    }

    IEnumerator System.Collections.IEnumerable.GetEnumerator() {
        return _array.GetEnumerator();
    }

} 
```

用法：

```
// create two arrays
AddableArray<int> a1 = new AddableArray<int>(1, 2, 3);
AddableArray<int> a2 = new AddableArray<int>(4, 5, 6);

// add them
AddableArray<int> result = a1 + a2;

// display the result
Console.WriteLine(string.Join(", ", result.Select(n=>n.ToString()).ToArray())); 
```

（请注意，当类实现`IEnumerable<T>`时，您可以使用类似的扩展方法`Select`。）

# multithreading - 同步多个阅读器，单个作者？

> ID：618164
> 
> 赞同：7
> 
> 时间：2009-03-06T09:17:49.053
> 
> 标签：multithreading, delphi, synchronization

另一个同步问题......我希望你们不要生气;）

假设以下场景：一个中央数据结构（非常大，所以我真的不想让它不可变并在发生更改时复制它。我什至不想在内存中保留多个副本），多个读取器线程它以只读方式访问该数据结构和一个在后台保持数据结构最新的编写器线程。

我目前同步了对数据结构的所有访问，效​​果很好（没有同步效果，没有死锁）。我不喜欢这种方法的地方在于，大多数时候我有很多阅读器线程处于活动状态，而编写器线程只是时不时地处于活动状态。现在阅读器线程完全没有必要等待其他阅读器线程完成。只要编写器线程当前没有写入，它们就可以轻松地并行访问数据结构。

有没有一种优雅而优雅的方式来解决这种情况？

**编辑：**非常感谢您的答案和链接！让我再补充一个简短且相关的问题：如果在读者的关键部分执行的代码只需要很短的时间（就像只是一个哈希表查找），是否值得考虑实现您描述的技术之一或者是序列化在这种情况下，锁的效果不是那么糟糕吗？可扩展性和性能非常重要。你怎么看？

**编辑 2：**我刚刚研究了单个写入器/多个读取器的一个实现 - 锁，这个实现使用监视器来同步 WaitToRead 方法中的一些代码。这不会导致我一开始想避免的相同的序列化效果吗？（仍然假设要同步的代码又短又快）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-06T12:54:30.080

RTL(sysutils) 中有一个用于此目的的类：**TMultiReadExclusiveWriteSynchroniser**

这是非常容易使用。您不需要像阅读器或作者那样严格分类您的线程。只需在线程中调用“BeginRead”或“BeginWrite”即可启动线程安全操作。调用“EndRead”或“EndWrite”完成操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-06T09:44:18.007

您正在寻找的（以及 vartec 描述的）称为[Reader(s)-Writer-Lock](http://en.wikipedia.org/wiki/Readers-writer_lock)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-06T09:43:09.023

[您可以在msdn 杂志](http://msdn.microsoft.com/en-us/magazine/cc163599.aspx)和[Programming applications for MS windows](http://ymei.freeshell.org/gopher/Book/Programming%20Applications%20for%20MS%20Windows%204thed/ch10d.htm)中找到有关解决此问题的一些详细说明。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-06T09:59:02.107

使用读写器锁将解决问题。多个读者可以访问一个数据库，并且一旦所有读者都完成阅读，一个作家就会获得一个锁。

但是，这可能会导致作者永远无法访问源，因为总是有新的读者想要访问。这可以通过在作者想要访问时阻止新读者来解决：作者具有更高的优先级。一旦源上的所有读者都完成阅读，作者就可以访问。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-06T09:24:07.433

每当作者想要访问时，您将传入的读者排入队列（让他们等待条件），等待活动读者完成，写入，完成后让入队的读者访问。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-06T10:29:16.403

没有人能真正回答您的问题，序列化是否会极大地影响应用程序的性能 - 您必须自己分析，结果将在很大程度上取决于线程数、内核数和特定工作负载。

但是请注意，使用比关键部分更智能的同步，例如读写器锁，可能会引入可能难以调试和修复的[饥饿问题。](http://en.wikipedia.org/wiki/Resource_starvation)您确实需要仔细研究增加的吞吐量是否超过了潜在的问题。另请注意，吞吐量实际上可能不会增加，尤其是在锁定代码非常短且快速的情况下。Jeffrey Richter有一篇[不错的文章](http://msdn.microsoft.com/en-us/magazine/cc163599.aspx)实际上包含了这句话：

> **性能** 即使没有对 ReaderWriterLock 的争用，它的性能也很慢。例如，调用其 AcquireReaderLock 方法的执行时间大约是调用 Monitor 的 Enter 方法的五倍。

这当然适用于 .NET，但基本原则也适用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-06T10:24:56.710

读写器锁是您所需要的。 [教程](http://www.eonclash.com/Tutorials/Multithreading/MartinHarvey1.1/Ch8.html#TMultiReadExclusiveWriteSynchroniser.)有描述，但我确信有人将它作为标准添加到 Delphi。可能值得检查 D2009 还没有它。

# c++ - 每次循环迭代都清理向量。什么是最节省内存的方法？

> ID：618169
> 
> 赞同：5
> 
> 时间：2009-03-06T09:19:40.250
> 
> 标签：c++, vector, loops, memory-management, memory-optimization

我对 std::vector 有疑问。

我有一个非常占用内存的算法，我预见到预测向量大小并提前为向量保留足够的内存将对减少内存使用有很大帮助。

以下哪个更好：

```
for ( ... ) {
  std::vector<Type> my_vector;
  my_vector.reserve(stuff_count);
  // Do stuff , and append stuff to my_vector.
} 
```

或这个：

```
std::vector my_vector;
for ( ... ) {
  my_vector.clear();
  my_vector.reserve(stuff_count);
  // Do stuff , and append stuff to my_vector.
} 
```

请告诉我哪个最好，或者是否有更好的做事方式。

非常感谢您！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-06T09:23:28.353

使用第一个变体，您在每次迭代时重新分配向量的缓冲区——这通常是非常昂贵的。使用第二种变体，您只会偶尔重新分配。第二种变体更好，因为速度是您的首要任务。

从你的问题中不清楚元素的数量是从哪里知道的。也许您甚至可以快速计算所有迭代的最大元素数，将其设置为缓冲区大小并且没有重新分配。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-06T09:57:05.653

> 我预见到预测向量大小并提前为向量保留足够的内存将对减少内存使用有很大帮助。

尝试像工程师而不是算命先生一样行事。创建一个测试，并测量差异。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-06T09:23:27.713

第二个可能会稍微快一些，但我发现第一个更干净。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-06T09:30:09.320

由于代码中的差异很小，为什么不测试这两种方法，看看哪种方法最适合您的特定应用程序？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-06T09:45:19.237

我会说，这在一定程度上取决于 Type 需要如何构造/销毁。如果是不需要销毁的 POD，则可以跳过 clear()，它在循环中调用所有的析构函数，而将其用作静态数组：

```
std::vector<Type> my_vector(size);
for (...)
{
  int index = 0;
  // Do stuff
  my_vector[index] = some_value;
} 
```

（警告：代码未经测试）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-06T09:46:08.457

> ...提前为向量保留足够的内存对减少内存使用有很大帮助

呃……什么？！这根本没有意义。保留内存无助于以任何方式减少内存使用量。它避免了不断重新分配的需要，这使事情变得更快，但就*使用*而言，您没有任何好处。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-10T15:56:15.350

第二个将通过循环使用它所有使用的最大内存，即stuff_count类型的最大大小。[`std::vector::clear()`不一定释放内存](http://www.gotw.ca/gotw/054.htm)。即，如果您在符合标准的实现`std::vector::capacity()`之前和之后调用可能会返回相同的值。`std::vector::clear()`

充其量，您将减少使用上述方案分配内存的次数。但是您肯定不会在任何时候减少内存占用。如果你想缩小到保留的内存量，你应该使用向量交换习惯用法：

```
std::vector<type>().swap(my_vector);
my_vector.reserve(stuff_count); 
```

或者你的第一个解决方案，因为整体效果是一样的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-06T10:17:12.093

如果你需要做很多附加使用 std::deque 而不是 std::vector 并且只使用“push_back”。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-06T17:51:20.160

怎么样？

```
std::vector<DataType> my_vector;
my_vector.resize(sizeof(yourData));
memcpy(reinterpret_cast<char*>(&my_vector), &yourData, sizeof(yourData)); 
```

# c# - 如何在Linq中获取所有以J开头的产品？ps简单

> ID：618182
> 
> 赞同：0
> 
> 时间：2009-03-06T09:26:36.850
> 
> 标签：c#, linq

试图让我的头脑进入 Linq to Objects 并且为了我的生活它逃脱了我......我想获得所有 _name 以 J 开头的产品的列表。

```
 Product prod;

            for (int i = 0; i < 10;i++ ) {
                prod = new Product();
                prod._Name = "J" + i.ToString();
                prod._Surname = "F" + i.ToString();

            } 
```

更新

```
 Product prod;
            List<Product> productList = new List<Product>();

            for (int i = 0; i < 10;i++ ) {
                prod = new Product();
                prod._Name = "J" + i.ToString();
                prod._Surname = "F" + i.ToString();

                productList.Add(prod);
            }

            var query = productList.Where(p=> p._Name.StartsWith("J")); 
```

谢谢乔恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T09:32:16.680

好吧，您没有在代码示例中提供任何类型的集合，但是假设您有一个名为的集合，`products`您想要类似的东西：

```
var query = products.Where(prod => prod._Name.StartsWith("J")); 
```

这将给出一个`IEnumerable<Product>`. 如果你想在最后`List<Product>`添加一个调用`ToList()`：

```
var query = products.Where(prod => prod._Name.StartsWith("J"))
                    .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T09:43:28.680

如果你想摆脱这个错误，只需`Product proc;`在你的循环中移动：

```
for (int i = 0; i < 10;i++ ) {
    Product prod = new Product();
    ... 
```

# mysql - 检索同时具有标记 T1 和 T2 的记录

> ID：618187
> 
> 赞同：2
> 
> 时间：2009-03-06T09:27:39.700
> 
> 标签：mysql, tags

我需要一个 sql 查询来检索具有两个标签的所有项目，而不是任何标签。我已经有一个查询，但返回了包含两个标签的所有项目，而不是预期的结果。在下面找到详细说明。谢谢！

表结构：

```
ITEMS TABLE
------------
item_id
item_name

TAGS TABLE
----------
tag_id
tag_name

ITEMTAGS TABLE
---------------
tag_id
item_id 
```

询问：

```
SELECT Items.* FROM Items 
INNER JOIN ItemTags ON Items.item_id = ItemTags.item_id
WHERE ItemTags.tag_id IN (T1, T2)
GROUP BY Items.item_id 
```

结果：所有具有 T1 或 T2 的项目

预期结果：所有同时具有 T1 和 T2 的项目

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-06T09:50:01.020

```
select i.*
from items i, itemtags it1, itemtags it2
where i.item_id=it1.item_id and it1.tag_id=T1
and i.item_id=it2.item_id and it2.tag_id=T2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T09:45:50.563

如果您的数据库支持 intersect 关键字（SqlServer 支持），您可以编写：

```
SELECT Items.* 
FROM Items 
WHERE Items.item_id in 
/* intersection between items that have the tag T1 
   and the ones that have the tag T2 */ 
(
    SELECT item_id FROM ItemTags WHERE tag_id = T1
    INTERSECT 
    SELECT item_id FROM ItemTags WHERE tag_id = T2
) 
```

如果没有，您将需要执行以下操作：

```
SELECT Items.* 
FROM Items 
WHERE Items.item_id in 
(
    SELECT ItemTags1.item_id 
    FROM ItemTags as ItemTags1 
        INNER JOIN ItemTags as ItemTags2 
        ON ItemTags1.item_id = ItemTags2.item_id 
    WHERE 
            ItemTags1.tag_id = T1
        AND ItemTags2.tag_id = T2
) 
```

由于 ItemTags1.item_id = ItemTags2.item_id 在第二个查询中处理可能的性能问题。您将需要外键上的索引才能正常工作。

# linq - 如何使用 LINQ 从通用列表中获取自定义对象？

> ID：618190
> 
> 赞同：0
> 
> 时间：2009-03-06T09:28:05.520
> 
> 标签：linq, ienumerable

为什么我在以下代码中收到以下错误？

我想如果我将自定义对象放在其类型的通用列表中，那么 IEnumerable 会得到处理吗？我还需要对此 List 做什么才能在其上使用 LINQ？

> 无法将类型“System.Collections.Generic.IEnumerable `<TestLinq23.Customer>`”隐式转换为“TestLinq23.Customer”

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace TestLinq23
{
    class Program
    {
        static void Main(string[] args)
        {
            List<Customer> customerSet = new List<Customer>();
            customerSet.Add(new Customer { ID = 1, FirstName = "Jim", LastName = "Smith" });
            customerSet.Add(new Customer { ID = 2, FirstName = "Joe", LastName = "Douglas" });
            customerSet.Add(new Customer { ID = 3, FirstName = "Jane", LastName = "Anders" });

            Customer customerWithIndex = customerSet[1];
            Console.WriteLine("Customer last name gotten with index: {0}", customerWithIndex.LastName);

            Customer customerWithLinq = from c in customerSet
                           where c.FirstName == "Joe"
                           select c;
            Console.WriteLine(customerWithLinq.LastName);

            Console.ReadLine();
        }
    }

    public class Customer
    {
        public int ID { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-06T09:29:00.137

您需要添加一个调用[`Single()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.single.aspx)- 否则它会返回*一系列*客户。

同时，这里没有真正需要使用查询表达式。使用点表示法会更简单：

```
Customer customerWithLinq = customerSet.Where(c => c.FirstName == "Joe")
                                       .Single(); 
```

事实上，你可以让它更简单，因为有`Single()`一个谓词的重载：

```
Customer customerWithLinq = customerSet.Single(c => c.FirstName == "Joe") 
```

如果不完全匹配，这是错误情况吗？如果没有，您可能想要使用[`First()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.first.aspx)而不是`Single()`.

编辑：正如 Garry 所指出的，如果可能*没有*您可能想要的结果，[`SingleOrDefault()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.singleordefault.aspx)或者-如果没有条目匹配[`FirstOrDefault()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.firstordefault.aspx)，这两者都将返回。`null`

# flash - 我可以在 Silverlight 应用程序中包含 Flash 内容吗？

> ID：618193
> 
> 赞同：2
> 
> 时间：2009-03-06T09:29:32.507
> 
> 标签：flash, silverlight

我有一个 Silverlight 应用程序，它需要打印图表。由于 silverlight 不支持打印，我正在考虑在我的应用程序中包含一些闪存图表。我知道这听起来很奇怪……但这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-06T23:42:52.610

不可以，不能在 Silverlight 中运行 Flash 内容，反之亦然。但是，*可以*在同一个 html 页面上运行两种类型的内容。您甚至可以（我*认为*）使用无窗口控件将它们层叠在一起。您可以让他们通过 javascript 进行通信。您可能可以做类似的事情来解决您面临的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T14:51:19.410

嘿..检查[这个](http://forums.asp.net/t/1211511.aspx)。第二篇文章谈到在silverlight中嵌入闪光灯。尝试在该线程中询问。

但我怀疑这是否可能，因为葡萄柚在评论中说它们是猫和狗；-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-03-19T17:30:33.993

查看具有打印支持的 Silverlight 4，它终于发布了，可以使用 Silverlight 工具包构建图表。

检查此链接（用于打印）： [http ://timheuer.com/blog/archive/2009/11/18/whats-new-in-silverlight-4-complete-guide-new-features.aspx#printing](http://timheuer.com/blog/archive/2009/11/18/whats-new-in-silverlight-4-complete-guide-new-features.aspx#printing)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-06T21:55:36.097

您不得在 Silverlight 应用程序中运行 Flash 内容。他们使用两个不同的插件，它们不会以这种方式相互交互。

我正在回答该主题的主要问题。我建议打印问题的另一个主题（如果尚不存在）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-03-25T06:15:57.503

Silverlight 3 测试版现已推出。它允许您编写自己的编解码器。

来自 silverlight 3 文档中的新增功能：

> 可扩展的媒体格式支持：借助新的 Raw AV 管道，Silverlight 可以轻松支持各种第三方编解码器。音频和视频可以在运行时之外解码并在 Silverlight 中呈现，从而将格式支持扩展到本机编解码器之外。

据我所知，我认为 Silverlight 本身支持 Flash 的问题是 adobe 和 microsoft 之间的版权问题。

很可能有人会编写一个编解码器，您可以将其放入您的应用程序中。

# c# - TFS 客户端 API - 查询以获取链接到特定文件的工作项？

> ID：618203
> 
> 赞同：5
> 
> 时间：2009-03-06T09:32:20.237
> 
> 标签：c#, .net, visual-studio-2008, tfs

我们正在使用 TFS 客户端 API 编写自定义工具，以连接到 TFS、获取项目的工作项等。

* * *

我们正在使用 WIQL 查询工作项存储。

给定一个完全限定的文件名，获取具有包含指定文件的更改集的工作项列表的最简单方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-06T15:18:58.390

我不确定是否有一种简单的方法来执行您使用 TFS API 请求的查询。我知道你肯定不能使用 WIQL 来做到这一点。我认为，使用 API，您将不得不遍历所有工作项 - 获取其中的变更集链接，然后在每个变更集中查找您所追求的文件路径。这显然没有多大用处。

但是，您可以使用 TFS 数据仓库数据库获取该数据。此信息将落后于实时运营商店信息，因为仓库只会定期更新 - 但可以让您轻松地按文件夹/文件维度跟踪事物。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-06-09T21:17:00.063

这个小代码片段将为您提供给定 TFS 服务器名称和项目的工作项集合。它还过滤掉处于已删除状态的工作项。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.TeamFoundation.Client;
using Microsoft.TeamFoundation.WorkItemTracking.Client;

    namespace EngineTFSAutomation
    {
        class TFSHelper
        {
            static public WorkItemCollection QueryWorkItems(string server, string projectname)
            {
                TeamFoundationServer tfs = TeamFoundationServerFactory.GetServer(server);
                WorkItemStore workItemStore = (WorkItemStore)tfs.GetService(typeof(WorkItemStore));
                Project p = workItemStore.Projects[projectname];
                string wiqlQuery = "Select * from Issue where [System.TeamProject] = '"+projectname+"'";
                wiqlQuery += " and [System.State] <> 'Deleted'";
                wiqlQuery+= " order by ID";
                WorkItemCollection witCollection = workItemStore.Query(wiqlQuery);
                return witCollection;
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-17T09:09:19.270

对于**TFS 2012**

```
 Uri tfsUri = new Uri("http://xxx.xx.xx.xxx:8080/tfs2012");
    TfsConfigurationServer configurationServer =TfsConfigurationServerFactory.GetConfigurationServer(tfsUri);                  
    ReadOnlyCollection<CatalogNode> collectionNodes = configurationServer.CatalogNode.QueryChildren(new[] {CatalogResourceTypes.ProjectCollection },false,CatalogQueryOptions.None);   

    foreach (CatalogNode collectionNode in collectionNodes)
    {
        // Use the InstanceId property to get the team project collection
        Guid collectionId = new Guid(collectionNode.Resource.Properties["InstanceId"]);
        TfsTeamProjectCollection teamProjectCollection = configurationServer.GetTeamProjectCollection(collectionId);

        WorkItemStore workItemStore = (WorkItemStore)teamProjectCollection.GetService(typeof(WorkItemStore));

        string query = "SELECT [System.Id] FROM WorkItems where [Assigned to]=@Me";
        WorkItemCollection queryResults = workItemStore.Query(query);

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-09T08:43:27.547

对于 TFS 2013，以下代码可用于访问 TFS 项目信息：

```
var tfsUri = new Uri("http://tfs.xxx.xxx.com:8080/tfs/myCollection");
var tfs = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(tfsUri);
tfs.EnsureAuthenticated();
var iis = tfs.GetService<Microsoft.TeamFoundation.WorkItemTracking.Client.WorkItemStore>();
// here access to a particular Project with its name
var uriWithGuid = iis.Projects["My project name"].Uri; 
```

# c++ - C++ 中可用的原始类型的事实列表

> ID：618204
> 
> 赞同：-2
> 
> 时间：2009-03-06T09:32:33.403
> 
> 标签：c++, reference, types, variant, primitive-types

例如，如果您要编写一个变体类型类，您自然需要识别该类的实例所承载的类型。我想知道是否有人知道人们可能感兴趣的所有原始数据类型的任何官方或半官方（事实上？）参考？

只有原语，不需要像*string*或*handle*这样的抽象类型。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-06T09:53:15.180

您是否考虑过让另一个图书馆承担繁重的工作？

Boost.Variant可能满足您的需求，经过全面测试，类型安全且正确，而且非常高效[。](http://www.boost.org/doc/libs/1_38_0/doc/html/variant.html)

或者，如果您想自己动手，请使用[Boost.TypeTraits](http://www.boost.org/doc/libs/1_38_0/libs/type_traits/doc/html/index.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-06T09:38:05.543

唯一的*官方*参考是[ISO/IEC 14882](http://en.wikipedia.org/wiki/ISO/IEC_14882) C++ 标准。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-06T09:36:12.910

谷歌搜索总是一个好的开始。[在这里](http://en.wikibooks.org/wiki/C%2B%2B_Programming/Code/Variables)。现在，推出你的实际问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-06T09:37:04.810

使用任何第三方变体。

您在标准中找不到的所有数据类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-06T10:15:48.993

如果使用 typeid，则无需了解任何类型：

```
#include <typeinfo>
#include <iostream>

using namespace std;

struct var_base
{
    const type_info & t;
    var_base(const type_info & t) : t(t) {};

    virtual ~var_base() {};
};

template<class T> struct var : var_base
{
    T value;

    var(T x) : var_base(typeid(T)), value(x) {};
};

struct variant {
    const static int max_size=16;

    char data[max_size];
    var_base & v;

    variant() : v(*(var_base*)data) {
        new (data) var<int>(0);
    }

    const type_info & getType() { return v.t; }

    template<class T> T & get() {
        assert(getType()==typeid(T));
        return static_cast< var<T> &>(v).value;
    }

    template<class T> void set(const T & value) {
            // Compile time assert is also possible here.
        assert(sizeof(var<T>)<=max_size);
        v.~var_base();
        new (data) var<T>(value);
    }
};

main()
{
    variant v;
    v.set<float>(1.2);
    cout << v.getType().name() << endl;
    cout << v.get<float>();
    cout << v.get<int>(); // Assert fails
} 
```

请注意，如果您可以接受该值是动态分配的，则可以摆脱 max_size。如果您知道最大类型的大小，我只是想表明就地分配也有效。

# c++ - 如何在 Linux C++ 中捕获系统级异常？

> ID：618215
> 
> 赞同：4
> 
> 时间：2009-03-06T09:36:39.413
> 
> 标签：c++, linux, exception, try-catch

不调用以下 catch()：

```
void test(void)
{
    int i=1,j=0,k;
    try
    {
        k = i/j;
    }
    catch(...)
    {
        ...handle it...
    }
} 
```

有没有办法捕捉这种异常？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-06T09:40:47.190

请检查 [http://linux.die.net/man/1/gcc](http://linux.die.net/man/1/gcc) 有一个编译器选项 -mcheck-zero-division 来处理这个问题。

或者，安装 SIGFPE 处理程序可能是一个选项，浮点 div by 0 然后会生成一个“FPE_ZERODIVIDE”

```
 signal(SIGFPE, (fptr) FPE_ExceptionHandler);

         void FPE_ExceptionHandler(int nSig,int nErrType,int */*pnReglist*/)
          {
                switch(nErrType)
                  {
                    case FPE_ZERODIVIDE:  /* ??? */ break;
                }

            } 
```

自从

大多数浮点系统基于 IEEE 标准，允许除以 0。这将根据数字的符号返回正无穷大或负无穷大。（除了 0/0 返回未定义的 NAN——这也不是例外情况。）这往往对科学和数学应用很有用。NAN 有效地表明了计算不可行但允许继续计算的情况。继续计算不会产生新的结果，但会继续返回 NAN。这允许在不检查计算中的错误检查的情况下执行长长的计算链。错误检查只需要在工作的最后进行。这使得代码更简单也更快。对于某些应用程序，它有时也可能更有用，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-06T09:50:10.567

不 - 没有抛出异常（你得到一个信号 - 可能是 SIGFPE）。您需要检查代码中可能被零除，然后自己抛出异常，

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-06T15:50:47.660

如果这完全导致运行时错误（请参阅[lakshmanaraj 关于 IEEE 数学的精彩讨论](https://stackoverflow.com/questions/618215/how-do-i-catch-system-level-exceptions-in-linux-c/618229#618229)，尽管某些编译器会让您强制错误而不是 NaN），它会抛出一个浮点异常*信号*。

信号是与 c++ 异常不同的机制，并且在操作系统级别进行处理。已经有许多关于 *nix 信号机制的 SO 问题，包括：

*   [Unix 中的信号是什么？](https://stackoverflow.com/questions/455842/what-is-a-signal-in-unix)
*   [sigaction 和 signal 有什么区别？](https://stackoverflow.com/questions/231912/what-is-the-difference-between-sigaction-and-signal)

对于windows，你必须问别人。Mac OS X 是 - 当然 - 一个 unix 派生系统。

# c# - 在多线程应用程序中查找/避免共享数据的规则

> ID：618216
> 
> 赞同：2
> 
> 时间：2009-03-06T09:36:56.107
> 
> 标签：c#, multithreading, c#-3.0

嗨，

众所周知，开发多线程应用程序是一件困难的事情。尤其是锁定时间和锁定内容的时间点并不那么明显，恕我直言。通常我在看一个方法/类，我必须问自己，如果我共享一些数据，这些数据可以被多个线程修改。当我不确定它以 lock() 结束整个代码块时。

所以我想知道的是：您对识别共享数据的模式/规则等有什么建议吗？或确保您的代码是线程安全的技术。

例如：

*   静态方法不应修改类字段。（除非他们锁定场地。）

*   不应“直接”传递方法的引用类型参数。总是通过一个克隆。

顺便一提：

Microsoft Research 正在研究[**CHESS**](http://research.microsoft.com/en-us/projects/chess/)。在并发程序中查找和重现 Heisenbugs 的工具。我希望这和 PLINQ 将改进并发程序的开发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-06T09:40:32.650

尽可能让你的类型从一开始就保持不变。那么就不需要克隆了。如果您需要“更改”对象的内容，请让该方法返回一个新对象 - 就像`String.Replace`etc 一样。

这基本上是函数式编程风格，而且很可爱。不幸的是，我们（目前）没有将不可变集合内置到 .NET 框架中，尽管周围有第三方集合，[包括我们自己的 JaredPar](http://code.msdn.microsoft.com/BclExtras)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T11:17:49.313

在使其线程安全时，将数据封装在一个类中很有用。您可以控制数据的访问方式，并且可以让类负责同步，而不是让整个应用程序中的代码尝试正确同步。

此外，您可以在某个地方放置一个可以用作锁标识符的私有变量，这样您就可以避免使用数据本身作为锁的标识符。通过使用专用变量作为锁标识符，您可以消除一种可能的死锁来源。

# java - 是否可以使用 XSLT 和 JXPath 转换 javabean？

> ID：618222
> 
> 赞同：2
> 
> 时间：2009-03-06T09:38:09.503
> 
> 标签：java, xslt, jxpath

假设我有一个香草 javabean：

```
class Person {
  String firstName;
  String lastName;
  ...
} 
```

现在假设我想把它转换成另一个 javabean：

```
class Human {
  String name;
  ...
} 
```

我目前正在使用[JXPath](http://commons.apache.org/jxpath/index.html)来帮助我将一个转换为另一个：

```
JXPathContext personContext = JXPathContext.newContext(person);
JXPathContext humanContext = JXPathContext.newContext(new Human());
humanContext.setValue("name", personContext.getValue("firstName") +
                              personContext.getValue("lastName")); 
```

有没有一种方法可以使用例如 XSLT 和 JXPath 来指定这些转换，而不是手动做这类事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-03-30T22:02:23.247

Dozer bean 映射器 (http://dozer.sourceforge.net/) 对于映射相似的 bean 很有用。默认情况下，它映射具有相同名称的属性，但可以通过 xml 轻松自定义不同的映射。此映射的示例可在[http://dozer.sourceforge.net/documentation/mappings.html找到](http://dozer.sourceforge.net/documentation/mappings.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T09:53:51.010

我认为仅使用 JXPath 是不可能的，因为它是 XPath 实现而不是 XSLT 实现。XSLT 使用 XPath 作为语言的一部分，但不仅如此。

您可以尝试将 bean 序列化为 XML，使用 XSLT 转换 XML 并将生成的 XML 反序列化为目标类。因此，对于您的 person 对象，您可能会得到

```
<person>
    <firstName>John</firstName>
    <lastName>Doe</lastName>
</person> 
```

您可以将 XSLT 与这样的模板一起使用

```
<xslt:template match="/person">
    <human>
        <name><xslt:value-of select="./firstName"/> <xslt:value-of select="./lastName"/></name>
    </human>
</xslt:template> 
```

这应该会产生这样的结果文档：

```
<human>
    <name>John Doe</name>
</human> 
```

然后可以将该文档反序列化为 Human 类的实例。

注意：bean 的 XML 表示是为了这个示例而组成的。实际上，您既可以使用 java.beans.XMLEncoder，也可以寻找任何其他的 Java/XML 绑定实现（JAXB 等...）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-06T09:48:24.550

我确信这是可能的，但它似乎有点令人费解。一方面，您提到的两个类之间似乎存在继承关系。如果是这样，您可能应该有一个接受其他类型作为参数的构造函数。

如果没有明显的继承关系，为什么不直接使用 javabeans setter 呢？这里有什么需要使用 JXPath？那几乎肯定会更慢。

# c# - 从 Lucene Query 获取不同值的更快方法

> ID：618227
> 
> 赞同：4
> 
> 时间：2009-03-06T09:40:37.220
> 
> 标签：c#, lucene

目前我喜欢这样：

```
IndexSearcher searcher = new IndexSearcher(lucenePath);
Hits hits = searcher.Search(query);
Document doc;
List<string> companyNames = new List<string>();

for (int i = 0; i < hits.Length(); i++)
{
    doc = hits.Doc(i);
    companyNames.Add(doc.Get("companyName"));
}
searcher.Close();

companyNames = companyNames.Distinct<string>().Skip(offSet ?? 0).ToList();
return companyNames.Take(count??companyNames.Count()).ToList(); 
```

如您所见，我首先收集所有字段（数千个）然后区分它们，可能会跳过一些并取出一些。

我觉得应该有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-06T10:50:24.277

将此问题与您之前的问题（re：“子句太多”）联系起来，我认为您绝对应该从索引阅读器中查看术语枚举。缓存结果（我使用了一个以字段名称为键的排序字典，将术语列表作为数据，每个字段最多 100 个术语），直到索引阅读器变得无效并离开。

或者我应该说，当面临与您类似的问题时，我就是这样做的。

希望这可以帮助，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:30:10.710

我建议您找到一个逻辑来跳过这种迭代，但是如果您的上下文中没有解决方案，那么您可以使用以下代码获得性能提升
1) 在索引时间最好放置您想要迭代的字段, 在第一场

```
Document doc = new Document();
Field companyField = new Field(...);
doc.Add(companyField);
...
```

2）然后你需要像这样定义一个FieldSelector

```
class CompanyNameFieldSelector : FieldSelector
{
    public FieldSelectorResult Accept(string fieldName)
    {
        return (fieldName == "companyName" ? FieldSelectorResult.LOAD_AND_BREAK : FieldSelectorResult.NO_LOAD);
    }
}
```

3）然后当你想迭代并选择这个字段时，你应该做这样的事情

```
FieldSelector companySelector = new CompanyNameFieldSelector();
// when you iterate through your index
doc = hits.Doc(i);
doc.Get("companyName", companySelector);
```

上述代码的性能比您提供的代码要好得多，因为它跳过了读取不必要的文档字段，并节省了时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-24T16:03:34.037

```
public List<string> GetDistinctTermList(string fieldName)
    {
        List<string> list = new List<string>();

        using (IndexReader reader = idxWriter.GetReader())
        {
            TermEnum te = reader.Terms(new Term(fieldName));

            if (te != null && te.Term != null && te.Term.Field == fieldName)
            {
                list.Add(te.Term.Text);

                while (te.Next())
                {
                    if (te.Term.Field != fieldName)
                        break;
                    list.Add(te.Term.Text);
                }
            }
        }

        return list;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-06T10:18:24.587

老实说，我不确定是否存在，因为 Lucene 不提供“独特”的功能。我相信使用 SOLR 您可以使用构面搜索来实现这一点，但是如果您想在 Lucene 中实现这一点，则必须自己编写某种构面功能。所以只要你没有遇到任何性能问题，你应该可以这样。

# usb - 通过 USB 连接的调制解调器：可以嗅探“AT 命令”吗？

> ID：618233
> 
> 赞同：1
> 
> 时间：2009-03-06T09:42:14.783
> 
> 标签：usb, modem, sniffing

有人可以确认我是否可以使用 USB 嗅探来捕获从外部应用程序发送到 HSDPA 调制解调器的“AT 命令”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-06T09:52:24.870

在 USB parliance 中，调制解调器属于[通信设备类](http://en.wikipedia.org/wiki/USB_communications_device_class)。

我相信这个类指定使用 AT 命令（更正确地称为[Hayes 命令](http://en.wikipedia.org/wiki/Hayes_command_set)）来支持设备，所以是的，如果你有总线嗅探器，你应该能够看到 AT 命令。

# php - 动态 JavaScript 幻灯片

> ID：618248
> 
> 赞同：1
> 
> 时间：2009-03-06T09:47:10.310
> 
> 标签：php, javascript, mysql, ajax, slideshow

我有一个 JavaScript 幻灯片，它从 MySQL 数据库中预加载图像，然后在 HTML 文档的图像标记中一次显示一个。简而言之，它通过像网上许多幻灯片教程一样预加载图像来实现这一点，但它不是使用静态图像（即 images/image1.jpg 等），而是使用通过 PHP 提供的动态图像（即 getData.php?n =1) getData.php 脚本在服务器上运行，并为每个预加载的图像打开一个到数据库的新连接。

有没有办法避免与数据库建立如此多的连接，并让每个连接在图像数据库上只使用 LIMIT n,1 进行一次查询？

似乎如果我要使用 getData.php 作为 image.src 那么 getData.php 需要一次返回一个图像！我真的很想以 10 个为一组来获取它们，然后在客户端将它们一一分配给 Image() 对象。我认为这会更快，因为当我在 python 中编写一个客户端应用程序来显示图像（当然是在浏览器之外）时，大约 10 个块的传输速度要快得多（并减少了 mySQL 服务器上的负载）。我可以用 JavaScript 和 PHP 完成这个吗？我在两者之间使用 XML 吗？如果我可以使用 AJAX 将二进制图像数据转换为 JavaScript，我可以用它做些什么吗？JavaScript 中是否有`imagecreatefromstring()`我缺少的函数？

我可以自己找出确切的代码，但我是网络编程新手，需要关于如何解决这个问题的提示！我想我错过了一些主要框架。我是否需要 ActionScript 或 JavaScript 以外的东西来解决这个问题？提前感谢您的提示！

编辑：我喜欢第一个建议，我想我可以完成。它也将使我能够遵循 alex shishkin 的部分建议以避免 LIMIT n,1 查询（尽管我确实想保留 SQL BLOB 字段）但是如何将二进制数据从 XML 粘贴到 JavaScript 中的 Image() 对象中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-06T09:55:03.600

我会说：

*   让 getData.php 生成一个包含接下来 10 个图像的 XML 文件。
*   让 javascript 从 AJAX-Request 到 getData.php 获取 XML 响应。
*   逐个遍历 XML 响应中的图像，当显示第九个图像时，查询 getData.php 以获取下一组图像。

至于框架：我的建议是对 AJAX 请求以及图像显示和预加载都使用 JQuery。

* * *

您可以使用像 base64 这样的二进制到文本编码来通过 XML 传递二进制数据。在大多数浏览器中，您可以单独使用 base64 解码并将其传递给图像对象，如下所示：

```
<img src="data:image/jpeg;base64,your binary data comes here"> 
```

这将适用于除 Internet Explorer 之外的所有设备，您可以使用 Dean Edwards 的[巧妙技巧](http://dean.edwards.name/weblog/2005/06/base64-ie/)将 base64 数据传递回 IE 的 PHP 模块 :)

使用 JQuery 和 PHP 制作一个简单的图像（没有幻灯片......这只是我的测试代码），代码看起来像这样：

PHP：

```
<?php
   echo base64_encode(file_get_contents("image.jpg"));
?> 
```

JS / 查询：

```
$(document).ready( function() {
   $.get( "image.php", function( data ) {
      $(document).append("<img src=\"data:image/jpeg;base64,"+ data +"\">");
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T14:45:24.167

使用二进制图像和“限制 n,1” - 非常糟糕的解决方案。

为什么您的图像没有作为图像链接存储在数据库中？并且图像必须存储在文件系统上。像“Limit n, 1”这样的查询真的很慢，尤其是在大表上。您需要使用具有大偏移量的小查询，而不是许多具有小偏移量的查询，并将 php 中的数据打包为 json 格式以发送到 javascript。（例如限制 100 个）发送一个图像的 ajax 请求非常浪费。

你可以在这里找到漂亮的幻灯片 - plugins.jquery.com。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-06T22:34:46.487

1.  创建一个网页。
2.  让页面连接到服务器并获取带有图像 ID 的 XML 或 JSON。
3.  使用步骤 2 中的 ID 从服务器请求图像。

# c# - Remove transparency in images with C#

> ID：618259
> 
> 赞同：11
> 
> 时间：2009-03-06T09:51:59.113
> 
> 标签：c#, .net, image, transparency

does anyone know a smooth / fast way of removing transparency from e.g. pngs/tiffs etc and replacing it with a white background?

Basically what I need this for is I need to create PDF/A compatible images, which may, according to the spec, have -no- transparency (and therefore a fixed white background is fine).

Any ideas / suggestions?

Cheers & thanks, -Jörg

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-03-06T10:04:08.867

You could create a bitmap the same size as the png, draw a white rectangle and then draw the image on top of it.

```
void RemTransp(string file) {
    Bitmap src = new Bitmap(file);
    Bitmap target = new Bitmap(src.Size.Width,src.Size.Height);
    Graphics g = Graphics.FromImage(target);
    g.DrawRectangle(new Pen(new SolidBrush(Color.White)), 0, 0, target.Width, target.Height);
    g.DrawImage(src, 0, 0);
    target.Save("Your target path");
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-02-03T13:54:45.120

You have to remove the alpha channel. Otherwise you'll still have a transparent image - just without transparent areas.

```
class Program
{
    static void Main(string[] args)
    {
        //this also works for different file formats
        ReplaceTransparency(@"C:\Y\transparent.png", System.Drawing.Color.White).Save(@"C:\Y\no_transparency.png");
        ReplaceTransparency(@"C:\Y\transparent.gif", System.Drawing.Color.White).Save(@"C:\Y\no_transparency.gif");
    }

    public static System.Drawing.Bitmap ReplaceTransparency(string file, System.Drawing.Color background)
    {
        return ReplaceTransparency(System.Drawing.Image.FromFile(file), background);
    }

    public static System.Drawing.Bitmap ReplaceTransparency(System.Drawing.Image image, System.Drawing.Color background)
    {
        return ReplaceTransparency((System.Drawing.Bitmap)image, background);
    }

    public static System.Drawing.Bitmap ReplaceTransparency(System.Drawing.Bitmap bitmap, System.Drawing.Color background)
    {
        /* Important: you have to set the PixelFormat to remove the alpha channel.
         * Otherwise you'll still have a transparent image - just without transparent areas */
        var result = new System.Drawing.Bitmap(bitmap.Size.Width, bitmap.Size.Height, System.Drawing.Imaging.PixelFormat.Format24bppRgb);
        var g = System.Drawing.Graphics.FromImage(result);

        g.Clear(background);
        g.CompositingMode = System.Drawing.Drawing2D.CompositingMode.SourceOver;
        g.DrawImage(bitmap, 0, 0);

        return result;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T23:13:04.103

Adding to Stormenet's answer; remember to wrap all Bitmap and Graphics objects with "using" statement to dispose unmanaged resources.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-06T10:02:23.237

1) Create a bitmap with a white background and with the same size as your image
2) Load you image and paint it on top of your "white" bitmap
3) Save the newly created image

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-06T10:04:17.553

PNGs have alpha channel, so simple recoloring won't do. Create white image of same size, and create composite image overlay your image over it.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-22T22:18:08.080

namespaces:

```
using Microsoft.Win32;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using PdfSharp;
using PdfSharp.Pdf;
using PdfSharp.Drawing; 
```

Creating PNG or TIFF BitmapSource from File:

```
BitmapSource BitmapSource;
private void OpenFile(Object sender, RoutedEventArgs e)
    {
        OpenFileDialog OpenFileDialog = new OpenFileDialog();
        OpenFileDialog.Filter = "PNG files (*.png)|*.png|TIFF files (*.tif)|*.tif";            

        if (OpenFileDialog.ShowDialog() == true)
        {
            try
            {
                if (OpenFileDialog.OpenFile() != null)
                {
                    String InitialPath = OpenFileDialog.FileName;                       
                    FileStream InitialFileStream = new FileStream(InitialPath, FileMode.Open, FileAccess.Read, FileShare.Read);

                    switch (OpenFileDialog.FilterIndex)
                    {
                        case 1:
                            PngBitmapDecoder PngBitmapDecoder = new PngBitmapDecoder(InitialFileStream, BitmapCreateOptions.PreservePixelFormat, BitmapCacheOption.OnLoad);
                            BitmapSource = PngBitmapDecoder.Frames[0];
                            InitialFileStream.Close();
                            break;
                        case 2:
                            TiffBitmapDecoder TiffBitmapDecoder = new TiffBitmapDecoder(InitialFileStream, BitmapCreateOptions.PreservePixelFormat, BitmapCacheOption.OnLoad);
                            BitmapSource = TiffBitmapDecoder.Frames[0];
                            InitialFileStream.Close();
                            break;
                    }  
                }
            }
            catch (Exception Exception)
            {
                MessageBox.Show("Error: Could not read file from disk. Original error: ", Exception.Message, MessageBoxButton.OK, MessageBoxImage.Error);
            }
        }
    } 
```

Functions on Button Click:

```
private void ButtonClick(Object sender, RoutedEventArgs e)
    {
        PixelFormat PixelFormat = BitmapSource.Format;
        if (PixelFormat == PixelFormats.Bgra32)
        {
            try
            {
                BitmapSource = Bgra32ToBgra24(BitmapSource);
                //BitmapSource = Bgra32ToGray8(BitmapSource);
            }

            catch (Exception Exception)
            {
                MessageBox.Show("Error: Could not convert BitmapSource. Original error: ", Exception.Message, MessageBoxButton.OK, MessageBoxImage.Error);
            }
        }
    } 
```

Function:

```
public static BitmapSource Bgra32ToBgr24(BitmapSource BitmapSource)
    {
        Int32 PixelWidth = BitmapSource.PixelWidth;
        Int32 PixelHeight = BitmapSource.PixelHeight;
        Double DpiX = BitmapSource.DpiX;
        Double DpiY = BitmapSource.DpiY;

        PixelFormat InputPixelFormat = BitmapSource.Format;
        BitmapPalette InputPalette = BitmapSource.Palette;
        Int32 InputBitsPerPixel = BitmapSource.Format.BitsPerPixel;
        Int32 InputStride = PixelWidth * InputBitsPerPixel / 8;
        Byte[] InputPixelsArray = new Byte[InputStride * PixelHeight];
        BitmapSource.CopyPixels(InputPixelsArray, InputStride, 0);

        PixelFormat PixelFormat = PixelFormats.Bgr24;
        BitmapPalette Palette = null;
        Int32 BitsPerPixel = 24;
        Int32 Stride = PixelWidth * BitsPerPixel / 8;
        Byte[] PixelsArray = new Byte[InputStride * PixelHeight / 4 * 3]; 

        Int32 i = 0; Int32 j = 0; Int32 k = 0;
        while (i < InputPixelsArray.Length / 4)
        {
            PixelsArray[k] = InputPixelsArray[j];
            PixelsArray[k + 1] = InputPixelsArray[j + 1];
            PixelsArray[k + 2] = InputPixelsArray[j + 2];

            i = i + 1;
            j = j + 4;
            k = k + 3;
        }

        BitmapSource = BitmapSource.Create(PixelWidth, PixelHeight, DpiX, DpiY, PixelFormat, Palette, PixelsArray, Stride);
        return BitmapSource;
    } 
```

Converting A channel to Gray8 BitmapSource

```
public static BitmapSource Bgra32ToGray8(BitmapSource BitmapSource)
    {
        Int32 PixelWidth = BitmapSource.PixelWidth;
        Int32 PixelHeight = BitmapSource.PixelHeight;
        Double DpiX = BitmapSource.DpiX;
        Double DpiY = BitmapSource.DpiY;

        PixelFormat InputPixelFormat = BitmapSource.Format;
        BitmapPalette InputPalette = BitmapSource.Palette;
        Int32 InputBitsPerPixel = BitmapSource.Format.BitsPerPixel;
        Int32 InputStride = PixelWidth * InputBitsPerPixel / 8;
        Byte[] InputPixelsArray = new Byte[InputStride * PixelHeight];
        BitmapSource.CopyPixels(InputPixelsArray, InputStride, 0);

        PixelFormat PixelFormat = PixelFormats.Gray8;
        BitmapPalette Palette = null;
        Int32 BitsPerPixel = 8;
        Int32 Stride = PixelWidth * BitsPerPixel / 8;
        Byte[] A_PixelsArray = new Byte[InputStride * PixelHeight / 4];

        Int32 i = 0; Int32 j = 3;
        while (i < InputPixelsArray.Length / 4)
        {
            A_PixelsArray[i] = InputPixelsArray[j];

            i = i + 1;
            j = j + 4;
        }

        BitmapSource = BitmapSource.Create(PixelWidth, PixelHeight, DpiX, DpiY, PixelFormat, Palette, A_PixelsArray, Stride);
        return BitmapSource;
    } 
```

Saving BitmapSource to PDF:

```
private void SaveFileAs(Object sender, RoutedEventArgs e)
    {
        SaveFileDialog SaveFileDialog = new SaveFileDialog();
        SaveFileDialog.Filter = "PDF files (*.pdf)|*.pdf";
        if (SaveFileDialog.ShowDialog() == true)
        {
            try
            {
                if (SaveFileDialog.FileName != null)
                {
                    String DestinationPath = SaveFileDialog.FileName;
                    FileStream DestinationFileStream = new FileStream(DestinationPath, FileMode.Create, FileAccess.Write, FileShare.Write);

                    switch (SaveFileDialog.FilterIndex)
                    {   
                        case 1:
                            PdfDocument PdfDocument = new PdfDocument();
                            PdfPage PdfPage = new PdfPage();
                            PdfDocument.Pages.Add(PdfPage);
                            XImage Image = XImage.FromBitmapSource(BitmapSource);
                            XGraphics XGraphic = XGraphics.FromPdfPage(PdfDocument.Pages[0]);

                            Double VerticalMargin = 20;
                            Double HorizontalMargin = 20;
                            Double Ratio = BitmapSource.Height / BitmapSource.Width;
                            Double ImageWidth = PdfPage.Width - 2 * VerticalMargin;
                            Double ImageHeight = Ratio * (PdfPage.Width - 2 * HorizontalMargin);

                            XGraphic.DrawImage(Image, VerticalMargin, HorizontalMargin, ImageWidth, ImageHeight);
                            PdfDocument.Save(DestinationFileStream);
                            PdfDocument.Close();
                            DestinationFileStream.Close();
                            break;
                    }
                }
            }
            catch (Exception Exception)
            {
                MessageBox.Show("Error: Could not write file to disk. Original error: ", Exception.Message, MessageBoxButton.OK, MessageBoxImage.Error);
            }
        }
    } 
```

# java - Quartz Scheduler突然停止运行并且没有异常错误

> ID：618265
> 
> 赞同：26
> 
> 时间：2009-03-06T09:54:01.213
> 
> 标签：java, quartz-scheduler

我有一些石英工作，每天晚上 7 点运行。突然跑不起来了。我检查了我的 server.log 并且没有抛出异常。任何人都知道可能是什么问题？

提前致谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2011-04-11T18:30:38.133

我有一个类似的问题，但问题是，我在石英属性中有 10 个线程石英默认线程数，当我进行线程转储*时，我发现我在**阻塞**状态中有 10 个作业，这意味着我不能再运行了线程。

快速修复此问题以增加石英属性中线程池中的线程数。

实际的修复是查看我的代码以了解为什么我有 10 个阻塞线程。

*要进行线程转储，您可以使用**kill -3 < java process number >**将线程转储打印到您的应用程序标准输出，即如果您运行 tomcat，您可以在**catalina.out**日志文件中找到它

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-20T14:09:47.757

就我而言，我与数据库有一个开放的连接。当我没有更多可用的连接时，我的线程一直在等待。由于我无法开始任何其他工作，所以什么都没有发生，一切都被阻止了。我的建议是让您检查是否有任何可能需要释放的阻塞资源。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-05T13:13:54.227

如果您使用数据库来存储作业，请检查触发器的 trigger_state。现在我看到了一个类似的问题（或者至少它有类似的症状）。

每分钟运行一次的作业会使触发器处于“已获取”状态，并且永远不会再次运行。像你一样，我什么也没看到日志。

我也看到了相同问题的不同原因。同样，作业只是停止运行，但触发器未处于“ACQUIRED”状态。到目前为止我还不知道原因。

到目前为止我所知道的是调度程序线程正在等待一个空闲的工作线程。看起来所有的工作线程都在等待一个信号量来更新他们的日程安排。我还无法获得线程转储来验证工作线程正在等待什么。

我正在运行 Quartz 1.6.1 RC1。请参阅此错误报告：http: [//jira.opensymphony.com/browse/QUARTZ-668](http://jira.opensymphony.com/browse/QUARTZ-668)

我想这就是我所看到的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-11-10T16:39:29.627

检查是否有任何作业抛出异常。将您的 Job exe 代码放入 try catch 阻止跟踪任何异常以解决问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-10T20:33:24.753

我有一个类似的问题，不幸的是，以上答案都没有帮助我找出我的问题。我使用的是quartz-2.3.2 版本。首先，我同意其他一些人的观点，其中大多数情况下调度程序没有启动，是由于线程竞争条件阻塞并尝试从进入临界区的线程获取标志并且它没有释放它造成的。这简直是​​一种糟糕的代码，但无论如何，我不想再重复其他人所做的事情。我想提出我的解决方案，为您提供解决问题的方法。

假设您像以下方式使用 Cron 调度程序，我将提供一个详细的示例

这是 SimpleJob 类

```
import org.quartz.Job;
import org.quartz.JobExecutionContext;
import org.quartz.JobExecutionException;
import org.quartz.JobKey;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.util.Date;

public class SimpleJob implements Job {

    private static Logger _log = LoggerFactory.getLogger(SimpleJob.class);

    public SimpleJob() {
    }

    public void execute(JobExecutionContext context)
            throws JobExecutionException {

        // This job simply prints out its job name and the
        // date and time that it is running
        JobKey jobKey = context.getJobDetail().getKey();
        _log.info("SimpleJob says: " + jobKey + " executing at " + new Date());
    }

} 
```

这是你的主要课程

```
import org.quartz.CronTrigger;
import org.quartz.JobDetail;
import org.quartz.Scheduler;
import org.quartz.impl.StdSchedulerFactory;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import static org.quartz.CronScheduleBuilder.cronSchedule;
import static org.quartz.JobBuilder.newJob;
import static org.quartz.TriggerBuilder.newTrigger;

public class CronTriggerExample {

    public void run() throws Exception {
        Logger log = LoggerFactory.getLogger(CronTriggerExample.class);

        log.info("------- Initializing -------------------");

        // First we must get a reference to a scheduler
        JobDetail job = newJob(SimpleJob.class)
                .withIdentity("job1", "group1").build();

        CronTrigger trigger = newTrigger()
            .withIdentity("trigger1", "group1")
            .withSchedule(cronSchedule("10 10/5 * ? * *").withMisfireHandlingInstructionFireAndProceed())
            .build();
        Scheduler scheduler = new StdSchedulerFactory().getScheduler();
        scheduler.start();
        scheduler.scheduleJob(job, trigger);
    }

    public static void main(String[] args) throws Exception {

        CronTriggerExample example = new CronTriggerExample();
        example.run();
    }
} 
```

下面的 cron 表达式表示在秒 :10，每 5 分钟开始，从分钟 :10 开始，每小时。

```
cronSchedule("10 10/5 * ? * *") 
```

如果你注意到这里最有趣的部分是

```
withMisfireHandlingInstructionFireAndProceed() 
```

如果您的触发器处于失火状态，这是解决问题的关键，它会指示您的调度程序立即被触发。另一种场合是使用

```
withMisfireHandlingInstructionDoNothing() 
```

在发生错误触发的情况下，cronTrigger 将在调度程序设置的开始时间下一次触发。例如，在我们的情况下，在每秒 10 分钟，从每小时 10 分钟开始，每 5 分钟一次。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-11-29T11:03:20.693

我有类似但有些不同的问题。我的调度程序在开发环境中运行良好。在这个调度程序中，我正在做更新事务等工作。

当我们将构建转移到生产中时，调度程序运行良好，直到周六一切都很好。星期六我的调度程序突然停止了。我在我的应用服务器 (OC4J) 中没有发现任何与调度程序相关的异常。

我使用的是quartz-1.5.2 版本。我无法追踪问题的实际根本原因。

我在应用程序服务器启动时启动调度程序。如果出现问题，它就会停止工作。那我就没有机会启动它们了。

我认为如果我通过再次使用一些 jsp 请求调用 init servlet 来启动调度程序会有所不同。这就像查看配置文件（我们的调度程序的健康状况并再次启动它们）。如果您有更好的方法来启动调度程序，请建议我。

# c# - .Net Scripting Engine (C#) - .Net 语言是否有某种“头文件”或“dll 引用文件”？

> ID：618267
> 
> 赞同：2
> 
> 时间：2009-03-06T09:54:35.487
> 
> 标签：c#, .net, vb.net, visual-studio, jscript.net

我正在用 C# 制作一个小型脚本引擎，我想知道是否有某种#compiler 指令或某种其他类似头文件的文件我可以用我的脚本文件编译以定义我的脚本文件引用的托管 Dll？

```
public static CompilerResults LoadScript(
    string SourceCodeFile, string[] References)
{
    var Parameters = new CompilerParameters()
    {
        GenerateExecutable = false,
        GenerateInMemory = true,
        IncludeDebugInformation = false,
    };

    Parameters.ReferencedAssemblies.AddRange(References);

    return CSharpCodeProvider.CreateProvider(
        CSharpCodeProvider.GetLanguageFromExtension(
            Path.GetExtension(SourceCodeFile)))
                .CompileAssemblyFromFile(Parameters, SourceCodeFile);
}
```

我希望能够消除这行代码：

```
Parameters.ReferencedAssemblies.AddRange(References);
```

并将这些信息放在我的脚本中。问题是我不一定提前知道脚本将引用什么 .dll。我目前的解决方案是解析一个看起来像这样的自定义“script.cs.refs”文件：

```
"System.dll","System.Data.dll","SomeOther.dll","Ect.dll"
```

有关找出 Visual Studio 将您对 dll 的引用存储在何处以及是否必须在单独的文件中定义它的任何帮助，如果有我应该使用的标准化格式，我可以将其加载到告诉它此信息的编译器中，将是非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-06T09:58:37.007

您不能在 C# 源代码中指定程序集引用，不。

Visual Studio 在构建项目时会将项目中的引用传递给编译器。

请注意，在使用命令行时，存在包含大量选项的[响应文件的概念。](http://msdn.microsoft.com/en-us/library/8a1fs1tb.aspx)这可以在命令行上指定，或者`csc.resp`在 .NET 框架目录中有一个默认文件，该文件具有包括引用在内的默认选项，但我怀疑它是从`CSharpCodeProvider`.

您可能拥有自己的“特殊注释”格式，其中列出了引用 - 解析您获得的脚本以获取这些引用，然后将它们传递进去。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-06T10:10:49.707

我认为没有标准的解决方案，除了您可以采用类似 ASP.NET 的方法来引用源文件中定义的程序集。

然后你需要

1.  解析源代码文件以查找程序集引用
2.  将它们传递给 CompilerParameters
3.  确保在源代码中定义引用的行不会产生编译错误。

要实现 3.，您可以在注释中定义引用。例如

```
//@ Assembly name="SomeOther.dll" 
```

然后，您可以为这些 //@ 行正则表达式源代码文件并解析出程序集名称。

# sql - 缺少值时更新数据库表

> ID：618269
> 
> 赞同：0
> 
> 时间：2009-03-06T09:54:49.823
> 
> 标签：sql, sybase, sql-update

我有两张桌子：

*账单 ：*

```
create table Bill(
               BillDate datetime,
               Amount decimal(10,2) ,
               BillCurrency varchar(3) ,
               ReportingCurrency decimal(10,2)) 
```

*汇率：*

```
create table FxRate( 
               RateDate datetime,
               SourceCurrency varchar(3),
               TargetCurrency varchar(3),
               ExchangeRate decimal(15,4)) 
```

这就是我想要做的：

我想将我的 Bill 表更新为

```
update Bill 
set ReportingCurrency = FxRate.ExchangeRate * Bill.Amount
from FxRate
where FxRate.RateDate = Bill.BillDate 
```

在此更新中，所有具有该特定日期条目的行都将获得新的报告货币数据。由于 Bill 表可以有多个符合更新条件的行，所以我遇到了以下问题：

对于 FxRate 表（该日期）中没有条目的行，ReportingCurrency 变为 NULL。我想返回`nearest <= RateDate`并获取汇率。是否可以使用同一更新语句中的修改或其他一些有效的方法？（我想避免使用光标）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T10:05:23.700

您应该能够通过子查询来实现这一点。希望我下面的示例可以不加修改地工作（并且没有错误！）唯一需要注意的是您需要用您的报告（基础）货币代替我假设的“美元”。

```
UPDATE Bill SET ReportingCurrency = (Bill.Amount * 
  (SELECT TOP 1 FxRate.ExchangeRate FROM FxRate
   WHERE FxRate.SourceCurrency = Bill.BillCurrency
   AND FxRate.TargetCurrency = 'USD'
   AND FxRate.RateDate <= Bill.BillDate
   ORDER BY FxRate.RateDate DESC)) 
```

希望这可以帮助。编辑 - 添加了 ORDER BY 条款

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T10:03:23.140

当然这是可能的 - 作为一个 SELECT 这将是：

```
SELECT
  b.BillDate,
  r.RateDate,
  r.ExchangeRate
FROM
  Bill b
  LEFT JOIN FxRate r ON r.RateDate = (
    SELECT MAX(RateDate) FROM FxRate WHERE RateDate <= b.BillDate
  ) 
```

因此，作为更新：

```
UPDATE
  Bill
SET
  ReportingCurrency = r.ExchangeRate * b.Amount
FROM
  Bill b
  LEFT JOIN FxRate r ON r.RateDate = (
    SELECT MAX(RateDate) FROM FxRate WHERE RateDate <= b.BillDate
  ) 
```

该解决方案做出以下假设：

*   `FxRate`任何一天的记录都不会超过一个
*   有一条`FxRate`记录早于所有`Bill`记录

如果这些假设不适用，则必须适应查询。

另请注意，这是 SQL Server 语法。Sybase 可能有点不同。

* * *

由于评论者对一般的“最近日期”解决方案表现出兴趣：

```
UPDATE
  Bill
SET
  ReportingCurrency = r.ExchangeRate * b.Amount
FROM
  Bill b
  LEFT JOIN FxRate r ON r.RateDate = (
    SELECT TOP 1 RateDate 
    FROM         FxRate
    ORDER BY     ABS(DATEDIFF(d, RateDate, b.BillDate)), RateDate
  ) 
```

不过，这会很慢。选择：

```
UPDATE
  Bill
SET
  ReportingCurrency = CASE 
                      WHEN DATEDIFF(d, r1.RateDate, b.BillDate) <= DATEDIFF(d, b.BillDate, r2.RateDate)
                      THEN r1.ExchangeRate
                      ELSE COALESCE(r2.ExchangeRate, r1.ExchangeRate)
                      END * b.Amount
FROM
  Bill b
  LEFT JOIN FxRate r1 ON r1.RateDate = (
    SELECT MAX(RateDate) FROM FxRate WHERE RateDate <= b.BillDate
  )
  LEFT JOIN FxRate r2 ON r2.RateDate = (
    SELECT MIN(RateDate) FROM FxRate WHERE RateDate >= b.BillDate
  ) 
```

# actionscript-3 - Flex 3：顶部对齐图像和标签

> ID：618274
> 
> 赞同：1
> 
> 时间：2009-03-06T09:56:03.300
> 
> 标签：actionscript-3, flex3, mxml

在 Adob​​e Flex 3 中，我有一个包含图像和标签的 HBox：

```
<mx:HBox width="240" verticalAlign="top" horizontalGap="8">
    <mx:Image width="46" source="@Embed(source='/assets/blah.swf')"/>
    <mx:Label text="Blah."/>
</mx:HBox> 
```

我的目标是对齐图像的顶部边缘和标签的顶部边缘（即标签内大写字符的顶部）。但是，无论我摆弄什么属性和样式，标签上方都会保留大约 6 个像素的恒定“填充”（在引号中，因为 paddingTop 为零），将其顶部边缘设置在图像下方。有谁知道为什么？

谢谢，西蒙

**编辑：**

paddingTop 没有做到这一点。我看到了同样的行为：

```
<mx:HBox width="240" verticalAlign="top" paddingTop="0">
    <mx:Canvas width="46" height="46" backgroundColor="red" paddingTop="0"/>
    <mx:Label text="Blah." paddingTop="0"/>
</mx:HBox> 
```

我还验证了没有全局样式表干扰任何这些类。

**编辑2：**

来自 Label, ll 在内部使用的 mx.core.UITextField 源代码 (Flex 3.2.0)。159：

> ```
>  /*
>         The width and height of the TextField are 4 pixels greater than
>         the textWidth and textHeight.
>     */ 
> ```
> 
> 并且
> 
> ```
>  public function get measuredHeight():Number
>    {
>    (...)
>        return textHeight + TEXT_HEIGHT_PADDING;
>    (...)
>    } 
> ```

然后我将 Label 的 paddingTop 设置为 -4，瞧，问题解决了！不过，这并不是一个真正干净的解决方案......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-10T13:16:48.743

我一直在摆弄这个，似乎你必须将标签的 paddingTop 设置为零，因为如果你不声明任何填充，它将使用组件的内置填充，所以它不会零。

当我运行示例时，这似乎有效。

编辑：脏，但固定，对吧？;)

# asp.net - 通过 EventDetailCode 忽略 HealthMonitoring 事件

> ID：618275
> 
> 赞同：0
> 
> 时间：2009-03-06T09:56:08.977
> 
> 标签：asp.net

我被这个难住了。我们正在使用 HealthMonitoring API 在我们的应用程序中记录事件，包括成员资格/表单身份验证事件 (WebAuthenticationFailureAuditEvent)。

日志被许多“提供的票证已过期”事件弄得乱七八糟，事件代码为 4005。

我想忽略这些事件，但我不想忽略所有 4005 事件，以防有人试图篡改 cookie。

有谁知道根据他们的 EventDetailCode（在本例中为 50202）忽略事件的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-12-18T17:46:42.243

您可以通过从 System.Web.Management.WebEventProvider 基提供程序类继承来创建自定义事件提供程序。这样，您可以通过记录错误并忽略任何其他错误来处理您想要的错误。查看“[如何为 ASP.NET 2.0 编写自定义 Web 事件提供程序](http://dotnetslackers.com/articles/designpatterns/how_to_write_a_custom_web_event_provider_for_asp_net_2_0.aspx)”和“[创建自定义事件提供程序](http://dotnetslackers.com/articles/sql/HealthMonitoring.aspx)”以获取更多信息。

# java - 重载真的是在 Java 中获取方法参数默认值的唯一方法吗？

> ID：618276
> 
> 赞同：2
> 
> 时间：2009-03-06T09:56:30.677
> 
> 标签：java, default, overloading

我对 Java 以及 Python 和 PHP 还是很陌生，我习惯于函数参数的默认值。

所以我有编写方法的习惯，这些方法旨在从您只想设置一些值的稍微不同的情况下调用。例如，在我的 PHP 代码中，这很常见，因为我有工厂方法为对象实例提供稍微不同的属性。

在 Java 中，似乎我必须有一个需要所有参数的方法，然后是几个重载的变体，这些变体将调用该方法，其中一些参数设置为默认值，一些参数由调用者提供。这是，好吧，但有时会让我紧张。

我记得在我对 C++ 和 ActionScript 的一些简短考察中，这已经让我很恼火。现在，更有经验的 Java 开发人员是否有一些捷径？

*在我看来，从技术上讲，这个问题已经被所有帖子的总和回答为“是的，它是”。我在下面打开了一个 wiki 帖子来收集各种替代解决方案，如果您愿意，请提供。我发现所有这些都非常有用，可以作为典型 Java 结构的灵感和学习示例。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-06T10:02:08.370

另一种选择是构建器模式的变体——你有一个代表所有参数的类型，构造该类型的实例（相应地默认），设置你想要的属性，然后将结果传递给原始方法，或者添加“参数类型”中的方法为您调用该方法。

[`ProcessBuilder`](http://java.sun.com/javase/6/docs/api/java/lang/ProcessBuilder.html)您可以在标准库中通过和[`Process`](http://java.sun.com/javase/6/docs/api/java/lang/Process.html)类看到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-06T09:59:01.530

见可变参数

[http://www.java-tips.org/java-se-tips/java.lang/using-the-varargs-language-feature.html](http://www.java-tips.org/java-se-tips/java.lang/using-the-varargs-language-feature.html)

（更新的 URL；添加此评论是因为 stackoverflow 需要 >30 个字符）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-06T18:35:32.427

为了使这更简单，我为默认值创建了一个注释，并创建了一个注释处理器，该处理器生成一个具有重载方法的超类。例如：

```
protected void process(
    Processor processor,
    String item,
    @Default("Processor.Size.LARGE") Size size,
    @Default("red") String color,
    @Default("1") int quantity) {
        ...
} 
```

生成（在生成的超类中）

```
protected void process(sample.Processor processor, java.lang.String item)  {
    process(processor, item, Processor.Size.LARGE, "red", 1);
}
protected void process(sample.Processor processor, 
                       java.lang.String item, 
                       sample.Processor.Size size)  {
    process(processor, item, size, "red", 1);
}
protected void process(sample.Processor processor, 
                       java.lang.String item, 
                       sample.Processor.Size size, 
                       java.lang.String color)  {
    process(processor, item, size, color, 1);
}
protected abstract void process(sample.Processor processor, 
                                java.lang.String item, 
                                sample.Processor.Size size, 
                                java.lang.String color, 
                                int quantity) ; 
```

请参阅[http://code.google.com/p/javadude/wiki/Annotations](http://code.google.com/p/javadude/wiki/Annotations) -- Scott

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-06T10:39:37.983

尝试将您的思考过程从一种语言翻译成另一种语言可能非常困难。正如其他人所指出的那样，您可以做一些工作来获得您想要的东西......但是您越早“接受”Java 设计的工作方式，您在使用 Java 时就会做得更好。

我不得不做一些 PHP 的东西......让我很恼火，因为我无法让它做我想做的事......所以它是双向的。

您将遇到的最大障碍可能是静态类型。您可以尝试做一些事情来解决它，但最终它们将是一个非常大的黑客。

在 C++ 的早期，人们试图说服 C++ 表现得像 Smalltalk……但效果不佳。在早期，如果 Java 人试图获取他们的 C++ 知识并在 Java 中使用它......并没有很好地工作（这令人倍感沮丧，因为这些语言在表面上非常相似）。

我的建议是，对于您的 Java 编码，学习像 Java 开发人员而不是 PHP 开发人员一样编程。

对于您的直接问题，您是否真的应该从工厂重新调整不同的类，而不是创建具有不同变量集的相同类型的对象？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-06T10:19:40.263

只要您以 OO 方式编码，您就不会错过 Java 中的默认值。默认参数仅在过程编码风格中很方便。

在 OO 中，不是通过方法/过程传递状态，而是状态已经在您调用的对象中，或者您作为参数传递的对象中。大多数时候，您的方法中需要的参数不超过 1 或 2 个。

如果你想在使用它之前配置你的对象，你可以用一个简单的构造函数来构造它，然后调用不同的 setter。与调用具有许多参数的构造函数相比，这使代码更具可读性（因为您看到了 setter 名称）。如果稍后出现新属性，您可以将其添加到对象中，而无需修改现有的工厂方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-06T10:25:26.677

看起来，“是的，它是”，除了：

类似的效果可以通过 Paul Whelan 建议的[varargs](http://java.sun.com/developer/JDCTechTips/2005/tt0104.html#1)或通过定义一个额外的类型来实现，该类型携带参数作为具有正确默认值的字段，如 Jon Skeet 建议的那样。Boris Pavlović 补充说，他的类型可以是一个内部静态类，以将事物整齐地放在正确的位置。

缺点（请注意，这整个问题不是关于任何严重的影响，只是关于方便的调整）：

Varargs 似乎最适合传递具有非常相似的形式和大部分等效含义的可变长度值列表，例如名称列表。如果用于问题中所述的目的，则该方法必须对列表执行各种检查才能对其进行解释，这似乎不多，但不太方便。

如果结果类型可以用于其他用途，而不仅仅是传递给一个特定方法，或者当它是一组更复杂的参数时，携带参数的特殊类型似乎最有用。如果有 2-4 个参数，有些可能有默认值，重载似乎仍然更方便一些，但这可能是个人喜好问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-20T03:37:24.523

是的，oop 的重载是在 java 中使用 Default 参数的唯一方法。但这是给你的黑客。如果您使用重载并且想要使用默认参数。然后你会结束

```
public void methodA(A arg1) { }
public void methodA( B arg2,) { }
public void methodA(C arg3) { }
public void methodA(A arg1, B arg2) { }
public void methodA(A arg1, C arg3) { }
public void methodA( B arg2, C arg3) { }
public void methodA(A arg1, B arg2, C arg3) { } 
```

但是通过使用可变参数

```
public class DefaultValue
{
 public static void main(String[] args)
  {
       defaultParameter();
       defaultParameter(true);
  }

  public static void defaultParameter(Boolean …gender)
  {
       boolean genderBoolean = false; // It is the default value you want to give
       if(1 == gender.length)
       {
            genderBoolean = gender[0]; // Overrided Value
      }
       System.out.println(genderBoolean);
 }
} 
```

上面的代码输出将是

```
false
true 
```

有关更多类似示例和说明，请访问[java-default-parameter-values](http://itfrustration.in/java-default-parameter-values/)

# asp.net - 如何获取 asp.net 控件以生成符合 W3c 的 html？

> ID：618277
> 
> 赞同：0
> 
> 时间：2009-03-06T09:56:54.467
> 
> 标签：asp.net

我最近通过“HTML Tidy”验证运行了我的一些 ASP 页面，发现由于 HTML 标签格式不正确（即额外的结束标签）生成了几个警告。在调查中，我使用的 ASP 菜单控件似乎是左侧导航栏正在生成这个无效的 HTML。微软自动生成的该控件的 HTML 似乎与 HTML 不兼容。

有没有其他人经历过这个？

有谁知道是否有任何方法可以解决这个问题？

**请参阅下面的警告**

```
line 175 column 41 - Warning: discarding unexpected </a>
line 175 column 45 - Warning: discarding unexpected </td>
line 176 column 4 - Warning: discarding unexpected </tr>
line 181 column 48 - Warning: missing </a> before <tr>
line 192 column 41 - Warning: discarding unexpected </a>
line 192 column 45 - Warning: discarding unexpected </td>
line 193 column 4 - Warning: discarding unexpected </tr>
line 198 column 48 - Warning: missing </a> before <tr>
line 209 column 41 - Warning: discarding unexpected </a>
line 209 column 45 - Warning: discarding unexpected </td>
line 210 column 4 - Warning: discarding unexpected </tr>
line 215 column 48 - Warning: missing </a> before <tr>
line 226 column 41 - Warning: discarding unexpected </a>
line 226 column 45 - Warning: discarding unexpected </td>
line 227 column 4 - Warning: discarding unexpected </tr>
line 232 column 48 - Warning: missing </a> before <tr>
line 243 column 41 - Warning: discarding unexpected </a>
line 243 column 45 - Warning: discarding unexpected </td>
line 244 column 4 - Warning: discarding unexpected </tr>
line 249 column 48 - Warning: missing </a> before <tr>
line 260 column 41 - Warning: discarding unexpected </a>
line 260 column 45 - Warning: discarding unexpected </td>
line 261 column 4 - Warning: discarding unexpected </tr>
line 266 column 48 - Warning: missing </a> before <tr>
line 277 column 41 - Warning: discarding unexpected </a>
line 277 column 45 - Warning: discarding unexpected </td>
line 278 column 4 - Warning: discarding unexpected </tr>
line 283 column 48 - Warning: missing </a> before <tr>
line 294 column 41 - Warning: discarding unexpected </a>
line 294 column 45 - Warning: discarding unexpected </td>
line 295 column 4 - Warning: discarding unexpected </tr>
line 306 column 9 - Warning: missing </span> before <table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T10:00:25.253

你可能想看看这个项目：[http ://www.asp.net/CssAdapters/](http://www.asp.net/CssAdapters/)

# oracle - UNDOTBS 表空间已满，现在怎么办？

> ID：618279
> 
> 赞同：4
> 
> 时间：2009-03-06T09:57:48.943
> 
> 标签：oracle, oracle10g

我一直在对应用程序进行负载测试，当我登录企业控制台时，我注意到我的`UNDOTBS`表空间已满。

我知道`UNDOTBS`表空间用于保存事务开始之前存在的数据副本。我认为一旦事务完成/回滚，这些数据将是暂时的并过期？

我只是删除表空间，扩展它，还是有办法清除它？

**更新：**数据库一夜之间没有任何活动。有人可以解释为什么 oracle 仍然需要这些数据吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-06T10:01:16.143

别管它。这就是它应该的样子。Oracle 将根据需要对其进行管理和重用。

对更新的回应：

UNDOTBS 的行为与其他表空间不同……数据保留在其中，并在不再需要时标记为未使用，而不是被显式删除。

除非您正在执行相当大的 DML 并开始出现错误，否则您通常不需要担心它，此时您可以考虑增加 UNDOTBS 大小，降低您的撤消保留等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-09T18:31:30.553

除了 cagcowboy 已经发布的内容之外，如果您的撤消一直满并且您遇到错误。确保您的撤消大小正确，并且撤消保留设置为适合该大小的值。如果撤消保留设置较高，则需要为撤消分配更多空间，以在撤消保留中指定的时间限制内保留信息。只有基于撤消保留的过期事务才会被清除和删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T10:01:45.407

查看您的撤消保留期 - 确保它不是太大，否则 oracle 将继续缓冲数据，直到表空间填满。适当的时间段将取决于您的应用程序

# dotnetnuke - DNN 5 - DotNetNuke.UI.Modules.ModuleHost.LoadModuleControl() 抛出 NullReferenceException

> ID：618289
> 
> 赞同：6
> 
> 时间：2009-03-06T10:00:39.467
> 
> 标签：dotnetnuke, dotnetnuke-5

**发帖作为参考**

当重定向到自定义 DNN 5 模块中的自定义控件时，我得到

```
InnerException: Object reference not set to an instance of an object.
Method: DotNetNuke.UI.Modules.ModuleHost.LoadModuleControl
StackTrace:
Message: DotNetNuke.Services.Exceptions.ModuleLoadException: Object reference not set to an instance of an object. ---> System.NullReferenceException: Object reference not set to an instance of an object. at DotNetNuke.UI.Modules.ModuleHost.LoadModuleControl() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-06T10:01:27.297

通过确保所有自定义控件都从**PortalModuleBase继承来解决问题**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-04-18T22:27:13.227

对我来说，当 .ascx.cs 控件继承自 DotNetNuke.Entities.Modules.ModuleSettingsBase 时，它​​起作用了

# c# - NUnit 在汇编中找不到测试

> ID：618292
> 
> 赞同：3
> 
> 时间：2009-03-06T10:01:29.060
> 
> 标签：c#, nunit, mstest

我用 MSTest 继承了一个程序集，但是这些测试是在构建机器上使用 nunit-console 运行的（不确定它是如何工作的）。所以我决定整理一下并将它们更改为适当的 NUnit 测试，但现在 nunit-console（或 gui）找不到任何测试。不过，它们使用 ReSharper 测试运行器运行得很好。知道可能缺少什么吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-06T10:04:56.507

查看：

*   课堂是公开的吗？
*   它是否有一个公共的无参数构造函数（例如，如果您不指定任何其他构造函数，则为默认构造函数）
*   它是否具有`[TestFixture]`类级别的属性？
*   每个测试都是公开的吗？
*   每个测试都有`[Test]`属性吗？
*   每个测试都是无参数的吗？

我相信*某些*版本的 NUnit 能够根据它们的名称找到测试，例如`TestFooBarBaz()`没有`[Test]`属性，但我不知道它现在的状态 - 它可以解释差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-06T10:46:59.603

谢谢大家的帮助。升级到最新的 NUnit 框架解决了这个问题（你建议的所有明显的事情都可以）。

Frederik Gheysels，我猜你也可以试试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T10:03:59.973

你的测试装置、类和方法是公开的吗？它们必须是 NUnit 才能找到它们。

# binding - IP地址与Session id的绑定

> ID：618301
> 
> 赞同：5
> 
> 时间：2009-03-06T10:04:11.330
> 
> 标签：binding

为了防止会话固定问题，我们如何将 IP 地址与会话 ID 绑定？是否可以将会话ID与IP地址绑定？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-06T10:10:39.647

我不认为这是一个好主意。来自相同用户的后续请求可能不一定来自相同的 IP 地址，因为请求可能来自不同的代理。IIRC 这曾经适用于所有 AOL 用户，也可能适用于其他提供商或某些公司网络。

最好使用[页面令牌](http://palisade.plynt.com/issues/2005Aug/page-tokens/)保护您的会话，以防止劫持会话。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-06T10:10:11.300

你可以，但这不是一个好主意。如果您的客户端位于代理服务器场后面，则他们的外部 IP 地址可能会在每次请求时发生变化。例如，AOL 就是这样做的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-06T10:13:11.340

我以前读过一些关于它的文章。您可能会检查用户 IP 地址作为额外的会话元数据。但是，如果您想将其用作通用会话 ID，则可能无法处理某个代理网关后面的用户，所有用户都将拥有相同的 IP 地址。尽管它可以在一定程度上用于防止会话盗窃（使用 cookie 劫持等技术）。但应该考虑到cookie劫持者也可以模仿受害者的IP地址。因此检查用户会话和 IP 地址可能是获得更高安全性的好习惯，但不是防弹解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-06T10:11:51.187

[http://en.wikipedia.org/wiki/Session_fixation](http://en.wikipedia.org/wiki/Session_fixation)

```
if($_SERVER['REMOTE_ADDR'] != $_SESSION['PREV_REMOTEADDR']) {
   session_destroy(); // destroy all data in session
}
session_regenerate_id(); // generate a new session identifier
$_SESSION['PREV_REMOTEADDR'] = $_SERVER['REMOTE_ADDR']; 
```

# c# - 在 C# 中将超出范围的数字转换为枚举不会产生异常

> ID：618305
> 
> 赞同：33
> 
> 时间：2009-03-06T10:06:04.400
> 
> 标签：c#, exception, enums, casting

以下代码不会产生异常，而是将值 4 传递给 tst。谁能解释这背后的原因？

```
 public enum testing
 { 
    a = 1,
    b = 2,
    c = 3
 }

testing tst = (testing)(4); 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2009-03-06T10:09:45.437

在 C# 中，与 Java 不同，枚举不被检查。您可以具有基础类型的任何值。这就是为什么检查您的输入非常重要的原因。

```
if(!Enum.IsDefined(typeof(MyEnum), value))
     throw new ArgumentOutOfRangeException(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-06T10:07:38.763

由于您的枚举基于 int，因此它可以接受 int 可以接受的任何值。并且由于您明确地（通过强制转换）告诉编译器可以将 4 强制转换为您的枚举，因此它会这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T10:08:20.650

每个枚举都有一个用于表示的底层数字类型（例如 int）。即使一个值没有名称，它也是枚举可以具有的可能值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-06T10:12:52.090

其他人没有说的：通过强制转换，你告诉编译器你知道你在做什么。所以如果你告诉它，把它当作一个枚举值，它确实如此。其他张贴者指出了为什么仍然允许这样做，因为 C# 编译器不允许很多坏事，即使你说你知道自己在做什么。

如果不允许该值，那将非常糟糕，因为那样您就无法将标志值保存为 int。或者，有人必须检查 int 是否是允许的组合之一，如果您使用标志枚举（可以将值组合在一起），这可能会很多。

# .net - 跨版本序列化和反序列化 .net 对象的最佳实践

> ID：618306
> 
> 赞同：5
> 
> 时间：2009-03-06T10:07:16.020
> 
> 标签：.net, xml, serialization, object

使用 .NET XML 序列化程序将对象序列化到数据库。对象会随着时间而改变，因此数据库中同时存在多个版本。

有关构建代码的最佳方式的任何建议，以便您仍然可以将此对象反序列化为最新版本。（接口/地图/手动序列化等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-06T10:36:07.913

在序列化对象中有一个模式版本号。使用自定义反序列化，首先检查版本属性，如果是旧版本，在反序列化之前将其升级到最新架构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-06T15:35:55.930

[看这里](http://msdn.microsoft.com/en-us/library/ms733832.aspx)这个关于 WCF 数据契约版本控制的最佳实践的讨论，这比你真正想要的更具体一些，但是这些模式解决了与你相同的问题，你可以在任何你想要的技术中使用它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T17:03:21.837

这一切都取决于您的应用程序。它是一个分布式富应用程序，旧应用程序可能会遇到来自中央数据库或其他来源的新数据对象？（就像旧版本的办公应用程序需要有一些处理新文档格式的方法一样。）

如果是这样，我会说，使用显式模式版本编号的自定义序列化和反序列化。我会在每个元素和属性上放置明确的元数据，说明读者是否必须理解元素/属性（如果不是，则为默认值）。这当然会消耗大量空间并增加代码复杂性......

但答案实际上取决于您为什么要序列化到数据库。您对使用数据库的关系能力不感兴趣吗？否则，可能会感兴趣 O/R 映射解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-06T10:13:50.900

不要删除/重命名属性。只添加它们。

为所有属性分配默认值。

这将保证 xml 序列化程序能够将旧 xml 反序列化为新对象，并且该对象将具有“正常”的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-06T10:27:32.553

亚历克斯·雷特博特所说的。

您还可以实现 ISerializable 接口来处理旧值

# html - 使用 DIV 等效的表布局

> ID：618323
> 
> 赞同：4
> 
> 时间：2009-03-06T10:12:55.443
> 
> 标签：html, css, layout

我今天正在创建一个布局，如下所示：

```
+----+ +----+ +----+ +----+
|    | |    | |    | |    |
+----+ +----+ +----+ +----+ 
```

看起来很简单，但我还有一些额外的规格：

1.  最大列数 (n) 需要是动态的（此 HTML 页面是在运行时生成的）。
2.  整个集合必须是水平流动的（当窗口变窄时，它们会尽可能地压缩。
3.  整个集合还必须在屏幕上居中，一次在任何 1 行中不超过 n 列。
4.  理想情况下，最右边的“盒子”会放到下一行并在必要时重新排列，即当窗口变窄并且 n 个盒子不适合屏幕时。
5.  当然，当要显示的元素超过 n 个时，它们只会创建额外的行。
6.  各个框都带有圆角，并且可以通过任何操作进行点击。

通过一些研究（google+对我发现的示例的改编），我能够像使用 div 和 css 那样做#6。但是，我很难做到 2-4。我几乎一路走到了那里，但我一生都无法让 2 和 3 工作。2 没什么大不了的，但 3 至关重要。我正在使用浮动 div 进行定位，并找到了一个[示例站点](http://www.pmob.co.uk/temp/centred-float4.htm)，该站点提到使用相对定位和左移等使其居中，但在我的情况下它不起作用（尽管该示例工作正常）。*在我的情况下，他们不会从中心开始*，而是从中心开始向右移动，让它看起来很滑稽，所以我不知道我错过了什么。

在为此苦苦挣扎了几个小时后，我在 5 分钟内使用以下代码完成了它：

```
<simplified code>
max_columns = 3; /* whatever */
html = "<table>";
for i = 1 to num_elements
  if i % max_columns eq 1 then
    html += "<tr>";
  endif
  html += "<td>";
  html += "<div>my element</div>"; /* This is a complex multi-leveled div */
                                   /* that makes boxes with rounded corners */
  html += "</td>";
  if i % max_columns eq 0 or i eq num_elements then
    html += "</tr>";
  endif
endfor
html += "</table>";
</simplified code> 
```

这满足了我的所有要求，除了#4 这是一个很好但不是必需的。

问题：[你将如何]/[有什么办法]在不使用表格的情况下做到这一点？

**编辑**：我没有机会实施/测试以下任何潜在的解决方案，因为在我回到这个问题之前我需要完成其他方面（在接下来的 5 天内）。我当前的*蹩脚*（？）解决方案似乎工作正常，除了 req #4，所以这个问题现在不在我的关键路径上。但我*将*对此进行测试并发布反馈。所以我会一直保持这个问题，直到那时。我很欣赏这些回应。谢谢。

**编辑#2**：所以我尝试了下面的一些解决方案，这就是我想出的：

```
<html>
    <head>
    <style>
  .box {
          width: 19%;
          height: 150px;
          border: 1px solid black;
          display: inline-block;
          margin: 3 0 0 0;
  }
  #center {
          text-align: center;
          border: 1px solid green;
          width: 80%;
          height: 85%;
          padding: 0 0 0 0;
          vertical-align: middle;
          margin: 0;
  }
  .footr{
          text-align: center;
          border: 1px solid green;
          width: 80%;
          height: 38px;
          padding: 0 0 0 0;
          vertical-align: middle;
          margin: 0;
  }
  </style>
    </head>
    <body style="margin-left:0; margin-top:0; margin-right:3;" >
    <div style="background-image: url(x); height: 60; width:131; float:left;"></div>
    <div style="background-image: url(x); background-repeat:repeat-x; height:60;"></div>
    <div class="clearer"></div>
    <center>
    <div id="center">
          <span class="box" style="float:left;">Blah</span>
          <span class="box">Blah</span>
          <span class="box">Blah</span>
          <span class="box">Blah</span>
          <span class="box" style="float:right;">Blah</span><br>
          <span class="box" style="float:left;">Blah</span>
          <span class="box">Blah</span>
          <span class="box">Blah</span>
          <span class="box">Blah</span>
          <span class="box" style="float:right;">Blah</span><br>
          <span class="box" style="float:left;">Blah</span>
          <span class="box">Blah</span>
          <span class="box">Blah</span>
    </div>
    <div class="footr">Footer</div>
    </center>
    </body
</html> 
```

正如您可能知道的那样，这解决了我几乎所有的问题，除了 2/3 （我原来的 Q 中没有提到：

1.  整个块的垂直对齐，使其垂直居中
2.  在水平行上，我希望跨度粘在外部 div 的外边缘，内部 div 在它们之间均匀分布。
3.  在小于`n`跨度的行上，我会让他们在前一排的第 3 个跨度下排列。

我做这个练习完全是为了我个人的“痒我只是不得不抓”，而且是在我自己的时间。为了工作，我已经（谨慎地）使用表格完成了大部分工作以使内容正确排列。

**PS：**请原谅一些格式错误的 HTML 和内联样式等。一旦我得到一个 100% 工作的解决方案，我*会*清理它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-09T08:50:16.630

最好将表格用于表格数据。请注意[Divitis](http://csscreator.com/?q=divitis)问题。

**更新**：如果这些“框”是指向其他地方的链接，那么只需使用锚点实现它们并适当地设置它们的样式。一种称为[图像替换](http://www.google.com/search?q=image+replacement)的技术可能会对您有所帮助。关于如何布置这些链接，请查看[listamatic 水平列表](http://css.maxdesign.com.au/listamatic/index.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-09T03:03:13.297

你可以试试`display:inline-block;`。这将满足除扩大收缩之外的所有条件。

教程在这里：[display:inline-block; 教程](http://blog.hedgerwow.com/2007/11/14/item-list-grid-real-world-practice-with-displayinline-block-across-browsers/)

示例用法在这里：[display:inline-block; 例子](http://www.hedgerwow.com/360/dhtml/css-inline-block-layout.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T14:08:59.587

试试这是否适合您：

```
<html>
    <head>
        <title>box test</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <div id="boxContainer">
            <span class="box">1</span>
            <span class="box">2</span>
            <span class="box">3</span>
            <span class="box">4</span>
            <span class="box">5</span>
            <span class="box">6</span>
            <span class="box">7</span>
            <span class="box">8</span>
            <span class="box">9</span>
            <span class="box">a longer block</span>
            <span class="box">a longer multi <br/> lined<br/> block</span>
            <span class="box">12</span>
            <span class="box">13</span>
            <span class="box">14</span>
            <span class="box">15</span>
            <span class="box">16</span>
            <span class="box">17</span>
            <span class="box">18</span>
            <span class="box">19</span>
            <span class="box">20</span>         
        </div>
    </body>
</html>

#boxContainer{
    text-align: center;

    background-color: #D0DC16;
    border: 1px solid black;
    height: 100%;
    padding: 1em 0 1em 0;
    width: 100%;
}
.box{
    /*width: 24%;*/
    display: inline-block;

    padding: 2em;
    margin: 0.5em 0 0.5em 0;
    background-color: #DC6216;
    border: 1px solid black;
} 
```

您可以将 .box 宽度更改为 (100/n)-1。我不完全知道为什么是-1，但它可能与边距和边框不计入宽度以及单个像素不能划分为子像素的事实有关。

--EDIT--
评论后审查代码。注释/注释框宽度线，用于自拟合/每行固定数量的框。
添加了两个不规则的盒子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-06T15:24:59.733

> 问题：[你将如何]/[有什么办法]在不使用表格的情况下做到这一点？

只需给它们一个固定的宽度并将它们浮动到左边。（如果它们没有设定的宽度，这是不够的）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-06T16:36:05.757

好吧，这就是我想出的。您可能必须使用宽度来调整浏览器舍入错误/空白校正，但总体上应该可以。*此外，IE 可能需要明智地使用溢出：隐藏|自动。*

```
<!DOCTYPE html>
<html><head><style type="text/css">

.container { width: 100%;text-align: center;}
.ib { min-width: 150px; display: -moz-inline-stack; display: inline-block; zoom: 1; *display: inline;}
.ib .styleMe { display: block; background: green; margin: 5px; text-align:left; border: 2px solid black; padding: 0 8px; }
.n1 .ib { width: 100%; } /* you could also use max-width here (if you can ignore IE6) and want jagged lines of items */
.n2 .ib { width: 50%; }
.n3 .ib { width: 33%; }
.n4 .ib { width: 25%; }
.n5 .ib { width: 20%; }
.n6 .ib { width: 16%; }
/*.nX .ib { max-width: 100/X; } may need to account for white-space/browser rounding errors too! */

</style></head>
<body>

<div class="container n4">
    <div class="ib"><div class="styleMe">
        <p>One</p>
        <p>Line 2</p>
    </div></div><!--
    kill whitespace (or adjusts widths above)
    --><div class="ib"><div class="styleMe">
        <p>Two</p>
        <p>Line 2</p>
    </div></div><!--
    kill whitespace (or adjusts widths above)
    --><div class="ib"><div class="styleMe">
        <p>Three</p>
        <p>Line 2</p>
    </div></div><!--
    kill whitespace (or adjusts widths above)
    --><div class="ib"><div class="styleMe">
        <p>Four</p>
        <p>Line 2</p>
    </div></div><!--
    kill whitespace (or adjusts widths above)
    --><div class="ib"><div class="styleMe">
        <p>Five</p>
        <p>Line 2</p>
    </div></div><!--
    kill whitespace (or adjusts widths above)
    --><div class="ib"><div class="styleMe">
        <p>Six</p>
        <p>Line 2</p>
    </div></div>
</div>
</body></html> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-03-06T11:09:08.147

将您的 div 转换为内联元素并给它们一个固定的宽度：

```
<html>
<head><title>Column test</title></head>
<style>
.box {
        width: 60px;
        height: 20px;
        border: 1px solid black;
        display: inline;
        margin: 3px;
}
.center {
        text-align: center;
        border: 1px solid green;
}
</style>
<body>
<div class="center">
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
</div>
</body>
</html> 
```

这将使它们像普通文本一样在彼此后面流动。一旦没有更多元素适合当前行，它们将开始一个新元素。

您需要固定宽度，因为默认宽度是 100%。如果可以说“宽度以适应内容”会很好，但这不起作用，因为 div 的内容需要 div 的宽度来布局本身（母鸡问题）。

# sql-server - 在 SQL Server 中锁定

> ID：618324
> 
> 赞同：1
> 
> 时间：2009-03-06T10:13:05.753
> 
> 标签：sql-server, sql-server-2005, locking

我有 2 个批处理程序，一个是发送电子邮件的程序，另一个是发送传真的程序。他们都访问一个名为`QUEUE`.

在电子邮件发件人程序中，这与`QUEUE`. 对于`QUEUE`满足条件的每条记录：

1.  锁定`QUEUE`表中的记录 1：
    `select 1 from QUEUE with (UPDLOCK) where id = 1`
2.  处理发送电子邮件
3.  删除 QUEUE 表中的记录 1：
    `delete from QUEUE where id = 1`
4.  提交事务（事务不是自动提交）

在传真发送程序中，也会发生类似的步骤，只是在第 2 步中，我们发送了传真（当然）。

问题是有时 delete from`QUEUE`会抛出一个它被锁定的异常。因此，会重新发送电子邮件/传真。我确信这些程序处理的记录组不会相交。

似乎 delete 尝试在表中的其他记录上获得更新 (U) 锁，尽管只有一条记录要被删除。因此，当其他事务锁定同一张表中的其他记录时，就会发生异常。

有了这个，我需要知道是否有一个选项可以使“删除”操作不获取记录上的锁，而不是获取它将删除的记录。因为似乎问题在于“删除”操作锁定了表中的其他记录。

顺便说一下，这里有一些关于数据库的信息（我不确定它们是否会有所帮助）：

*   已提交读取快照已打开
*   快照隔离状态开启

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-06T11:47:11.457

您是否尝试过在删除语句中使用 WITH ROWLOCK 或 WITH NOLOCK 提示？

你读过[这篇文章](http://www.mssqltips.com/tip.asp?tip=1257)吗？它建议您使用 (UPDLOCK, READPAST) 来防止您遇到的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T10:31:09.377

有时，锁会从锁定单行升级为锁定表的一部分或锁定整个表。这很可能是您在事务中实际未使用的记录上获得锁定的原因。

您可以使用状态字段来标记已处理的记录，而不是使用事务来锁定记录。

例子：

锁定一些记录，然后获取成功锁定的记录：

```
update queue set status = 'email_processing' where status is null and id = 1
select email, message from queue where status = 'email_processing' 
```

当您没有明确使用事务时，每个查询都在其自己的事务中运行，因此更新查询可以安全地更改状态，因为它正在验证同一查询中的当前状态。

完成发送后，删除记录：

```
delete from queue where status = 'email_processing' 
```

传真发件人当然会使用不同的状态（如“fax_processing”），以便隔离标记的记录。

# c++ - C++ 扩展 Ascii 字符

> ID：618332
> 
> 赞同：3
> 
> 时间：2009-03-06T10:15:45.687
> 
> 标签：c++, extended-ascii

如何检测 C++ 字符数组中是否存在扩展 ASCII 值（128 到 255）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-03-06T10:18:32.403

请记住，没有扩展 ASCII 这样的东西。ASCII 过去和现在只定义在 0 和 127 之间。以上所有内容要么无效，要么需要使用 ASCII 以外的定义编码（例如 ISO-8859-1）。

请阅读[每个软件开发人员绝对、绝对必须了解 Unicode 和字符集的绝对最低要求（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)。

除此之外：迭代它并检查任何值> 127（或使用signed `char`s时<0）有什么问题？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-06T11:04:35.647

Char 可以有符号或无符号。不过，这并不重要。您实际上想检查每个字符是否是有效的 ASCII。这是一个积极的、明确的检查。您只需检查每个字符是否同时 >=0 和 <= 127。其他任何内容（无论是正数还是负数，“扩展 ASCII”或 UTF-8）都是无效的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-02-07T23:27:44.180

现在没有人使用 isascii 了吗？

```
char c = (char) 200;

if (isascii(c))
{
    cout << "it's ascii!" << endl;
}
else
{
    cout << "it's not ascii!" << endl;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-06T10:42:22.737

确保您知道相关机器的字节顺序，并使用按位与掩码检查最高位：

```
if (ch & 128) {
  // high bit is set
} else {
  // looks like a 7-bit value
} 
```

但是您可能应该为此使用语言环境功能。更好的是，知道输入的字符编码数据是什么。试图猜测它就像试图猜测进入数据库字段的数据格式。它可能会进去，但垃圾进，垃圾出。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-06T10:17:43.980

遍历数组并检查每个字符是否不在 128 到 255 范围内？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-06T10:18:18.753

检查它们不是负数的值

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-06T10:18:41.670

```
bool detect(const signed char* x) {
  while (*x++ > 0);
  return x[-1];
} 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2018-03-26T14:58:02.720

```
(char) c = (char) 200;

if (isascii(c))
{
    cout << "it's ascii!" << endl;
}
else
{
    cout << "it's not ascii!" << endl;
} 
```

> 试试这个代码

# sql-server - 无法在 Visual Studio Team System 2008 中调试 SQL Server 2005 存储过程

> ID：618335
> 
> 赞同：5
> 
> 时间：2009-03-06T10:16:04.967
> 
> 标签：sql-server, visual-studio, sql-server-2005, debugging

我一直在尝试在 Visual Studio Team System 2008 中调试 SQL Server 2005 存储过程。

我连接到数据库服务器并在存储过程上右键单击“执行”。我什至尝试过“步入存储过程”，但没有运气。

[![替代文字](https://i.stack.imgur.com/VD5wl.jpg)](https://i.stack.imgur.com/VD5wl.jpg)
[（来源：[googlepages.com](http://ferdspics.googlepages.com/vs-executesproc.JPG)）]

IDE 显示它正在运行，但我似乎无法中断或进入存储过程。

[![替代文字](https://i.stack.imgur.com/0DwT2.jpg)](https://i.stack.imgur.com/0DwT2.jpg)
[（来源：[googlepages.com](http://ferdspics.googlepages.com/vs-executesproc-ideshowsitsrunning.JPG)）]

我检查了事件查看器，没有日志。没有显示问题所在的输出或消息。

Visual Studio 包含以下组件：-

[![替代文字](https://i.stack.imgur.com/5ocwn.jpg)](https://i.stack.imgur.com/5ocwn.jpg)
[（来源：[googlepages.com](http://ferdspics.googlepages.com/vs.JPG)）]

很多论坛都提到了调试问题，但没有找到简单的解决方案。

我错过了什么吗？或者有谁知道一个更简洁的站点，它可以成功地进行存储过程调试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-06T23:46:35.253

检查这个，特别是远程调试部分：[http ://www.dbazine.com/sql/sql-articles/cook1](http://www.dbazine.com/sql/sql-articles/cook1)

有关调试 sql 的其他一般信息，请查看[http://msdn.microsoft.com/en-us/library/zefbf0t6.aspx](http://msdn.microsoft.com/en-us/library/zefbf0t6.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-06T23:52:08.313

请记住，您还必须对正在调试的 sql server 框具有管理员权限。过去，我不得不使用资源管理器上下文菜单中的 RunAs 选项来启动 Visual Studio。我使用与 sql server 框上的管理员用户相同的凭据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T11:22:19.817

您是否在项目中启用了 SQL Server 调试？

项目 | 属性 | 调试选项卡。

编辑：还可以在服务器资源管理器中的数据连接上启用“允许 SQL/CLR 调试”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-08-19T16:29:51.100

需要调查的一个问题是，任何参与 SQL 调试的 SQL Server 用户帐户都必须对名为 sp_sdidebug 的扩展存储过程具有“执行”权限，默认情况下只有系统管理员帐户 (sa) 才具有该权限。

要检查这一点，请使用该帐户登录 SQL Server，然后使用 SQL Server Management Studio 键入以下 SQL 命令：

```
EXEC master..sp_sdidebug 
```

您将看到表明命令成功完成的结果或执行权限错误。如果您看到后一个结果，您还应该检查该帐户是否具有对主数据库本身的权限。DBA 向存储过程授予权限而不是向主数据库授予权限并不是未知的。

将 SQL Server 帐户的执行权限授予 sp_sdidebug 的最快方法是输入以下 SQL：

```
GRANT EXECUTE ON master..sp_sdidebug TO SpecificAccountName 
```

还有另一个问题，但它不会影响您，因为您正在使用服务器资源管理器。如果您从客户端应用程序调试，您还必须执行以下命令：

```
EXEC master..sp_sdidebug 'legacy_on' 
```

请注意，远程 SQL Server 调试是使用 DCOM 完成的，正确配置可能会很棘手。首先，您需要在远程数据库服务器上安装完整的远程调试组件。每次使用服务包或补丁升级 SQL Server 时，您可能还需要重复此过程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-23T12:51:37.417

您是否尝试过通过 Citrix 或 RDP 在服务器上进行本地调试？

希望这可以帮助，

账单

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T06:23:12.150

它的Windows防火墙。禁用它并尝试它应该可以工作

# .net - ASP.NET Web 表单 HTML 标记中的自定义属性

> ID：618339
> 
> 赞同：3
> 
> 时间：2009-03-06T10:17:25.837
> 
> 标签：.net, asp.net, webforms, code-behind

我在 .NET 3.5 框架上使用 ASP.NET 网络表单。如何在 HTML 标签中实现自定义属性，例如：

```
<HTML lang="en"> 
```

我想在一个共同继承的基页上的代码中实现这一点。每次加载页面时，属性值将根据会话值动态设置。

后期添加：如果可能的话，我想在不对脚本标签进行任何 ASP 页面更改的情况下实现这一点

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-06T12:00:19.290

建议的解决方案：

```
<HTML lang="<%= PageLanguage %>"> 
```

工作正常。Aleris 还有另一种选择，但还没有完全正确。如果将 runat="server" 属性添加到 HTML 标记，它将被解析为服务器端 HtmlGenericControl 并在 Controls 集合中可用。此外，如果您添加一个 id 属性，您将在后面的代码中有一个变量可以直接访问它，因此：

```
<html runat="server" id="html"> 
```

在代码隐藏中：

```
html.Attributes["lang"] = "en"; 
```

注意：这适用于页面中的任何 HTML 标记。

**编辑**：我现在看到 Aleris 确实做对了 - 他在包含 html 标记的 Controls 集合中引用了“文本”（实际上是 LiteralControl）（连同 doctype 和直到第一个服务器标记的任何其他内容）。当然，您可以操纵此文本，这将是（正如他所说）一种黑客行为 - 但它会将更改限制为仅代码隐藏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-24T14:43:03.533

我使用 Page 类的 AddParsedSubObject 方法。

在解析过程中可以通过 AddParsedSubObject 方法参数获取控件对象。

覆盖此方法，例如...

```
protected override void AddParsedSubObject(object control)
{
    if (obj is LiteralControl) 
    {
        String html = (obj as LiteralControl).Text;
        if (Regex.IsMatch(html, "<html[^>]*>") == true)
        {
            String newhtml = Regex.Replace(html, "<html[^>]*>", "<html lang=\"en\">");
            base.AddParsedSubObject(new LiteralControl(newhtml));
        }
    }
} 
```

您可以自定义 html 标签和其他标签的输出。希望你的帮助！！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-29T22:56:27.827

如果您碰巧使用了现有的[ASP.NET 网页全球化](https://msdn.microsoft.com/en-us/library/bz9tc508.aspx)脚手架，那么您想改用它：

```
@using System.Threading
<html lang="@Thread.CurrentThread.CurrentUICulture.TwoLetterISOLanguageName"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-06T10:21:44.720

在 html 中：

```
<HTML lang="<%=myLang%>"> 
```

在代码隐藏中：

```
protected string myLang = "en" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-06T10:28:44.673

**解决方案1：**

```
<HTML lang="<%= PageLanguage %>"> 
```

其中 PageLanguage 是基本页面的虚拟受保护属性。该值在派生页面中被覆盖（据我了解，您需要在页面级别更改此值？）

**解决方案2：**

Hack-it：Page.Controls[0] 包含一个包含 html 标记的文本。页面预渲染事件上的简单替换就可以了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-21T14:03:14.103

问题很旧，但可能对某人有用。这就是我所做的..

**在后面的代码中：**

```
 public string langName
            {
                get
                {
                    return Thread.CurrentThread.CurrentUICulture.TwoLetterISOLanguageName;
                }
            } 
```

**在 ASP.NET 页面中**

```
<html lang="<%= langName %>"> 
```

我也在`Local Resources`为每种语言和文化工作，所以我发现这是一个更好的解决方案。

另外，因为我使用的是母版页，所以我只需要添加一次。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-08-16T04:59:38.090

如果您只是想对您的网站进行国际化，不妨使用 .net 提供的内置系统（因为它们很漂亮）。那是你想做的吗？或者是其他东西？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-22T19:21:46.863

我用它来设置我在代码中使用的语言：

```
<html xmlns="http://www.w3.org/1999/xhtml" lang="<%= System.Threading.Thread.CurrentThread.CurrentUICulture.TwoLetterISOLanguageName %>"> 
```

# eclipse - 同步/维护 ant 和 eclipse 类路径

> ID：618349
> 
> 赞同：5
> 
> 时间：2009-03-06T10:20:16.283
> 
> 标签：eclipse, ant, build-process

我有兴趣了解人们为确保 ant 和 eclipse 配置的项目类路径同步而拥有的任何自动化过程。就我而言，我希望 ant 构建文件中定义的类路径成为主配置，因为它用于我们的生产构建。作为构建的一部分，我想添加一个 ant 目标，它将验证 eclipse 类路径是否是最新的，或者至少表明两个类路径之间的差异。

我知道[ant4eclipse](http://ant4eclipse.sourceforge.net/)，但它的重点是相反的，确保 eclipse 类路径是主路径，并且 ant 构建重用了 eclipse 路径。我喜欢[AntAndEclipse](http://people.csail.mit.edu/stefie10/antAndEclipse.html)背后的想法，但我想知道他们在这个领域的其他工具是我不知道的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-07T03:55:44.157

您在以前的公司的解决方案是让 ant 调用 Eclipse 进行编译，如下所述：

[http://www.eclipse.org/articles/Article-PDE-Automation/automation.html](http://www.eclipse.org/articles/Article-PDE-Automation/automation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-07-30T14:06:02.950

You need [Ant2Eclipse](http://gleamynode.net/articles/2234/ant2ide-ide-project-file-generation-from-ant-buildxml).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-15T21:07:17.730

有一个 ant 任务来进行 xml 转换，我们使用该任务在我们的构建文件中创建类路径。让 XSL 正确是一个小技巧，但一旦成功，它就很棒了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-18T10:14:11.233

我的团队编写了一个 Eclipse 插件，用于在项目设置中的 Java Build Path->Add Library 选项中添加一种新类型的库。这种自定义库类型允许 Eclipse 和 ANT 引用相同的规范依赖项列表。

如今，如果我被锁定在使用 ANT 而不是自己编写的话，我可能会考虑 IVY 做同样的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-06T10:42:57.510

我不知道有任何 ant 工具可以做到这一点，但几年前我已经从 ant 切换到[Maven并且从未回头。](http://maven.apache.org/)您可以使用“ [Maven integration for Eclipse](http://m2eclipse.codehaus.org/) ”让 Eclipse 使用 Maven 类路径。

不过，到目前为止，我对 Eclipse 插件还不是 100% 满意。它有点慢，并且由于 Eclipse 和 Maven 的不同理念，一些操作表现得很奇怪。例如，Eclipse 不区分“生产”和“测试”类路径，因此当 Eclipse 中的一切看起来都很好时，您可能会在 Maven 中得到编译错误。

我的解决方案是使用插件来保持类路径同步并从命令行编译。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-09-18T10:02:13.707

你评估过 Apache IVY 吗？目前我正在我们的地方构建一个持续集成环境，我们使用 IVY 来处理我们的依赖关系。有一个 eclipse 插件，它采用 eclipse 的依赖配置并将其用作 eclipse 类路径。目前，这个解决方案看起来很有希望。

# regex - 在 postgresql 查询中转义括号

> ID：618350
> 
> 赞同：1
> 
> 时间：2009-03-06T10:21:31.570
> 
> 标签：regex, postgresql

我正在尝试转义 PostgreSQL 8.2 的模式匹配表达式中的括号

该子句类似于：

```
WHERE field SIMILAR TO '%UPC=\[ R%%(\mLE)%' 
```

但我不断得到：

```
ERROR:  invalid regular expression: brackets [] not balanced 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-06T10:54:57.307

试试这个：

```
select '%UPC=\[ R%%(\mLE)%';
WARNING:  nonstandard use of escape in a string literal
LINE 1: select '%UPC=\[ R%%(\mLE)%';
               ^
HINT:  Use the escape string syntax for escapes, e.g., E'\r\n'.
     ?column?     
------------------
 %UPC=[ R%%(mLE)%
(1 row) 
```

您需要将 Postgres 设置为[符合标准的字符串](http://www.postgresql.org/docs/8.3/interactive/runtime-config-compatible.html#GUC-STANDARD-CONFORMING-STRINGS)模式，而不是向后兼容模式。

```
set standard_conforming_strings=1;
select '%UPC=\[ R%%(\mLE)%';
      ?column?      
--------------------
 %UPC=\[ R%%(\mLE)%
(1 row) 
```

或者您需要使用无论模式如何都有效的[转义字符串语法：](http://www.postgresql.org/docs/8.3/interactive/sql-syntax-lexical.html#SQL-SYNTAX-CONSTANTS)

```
set standard_conforming_strings=1;
select E'%UPC=\\[ R%%(\\mLE)%';
      ?column?      
--------------------
 %UPC=\[ R%%(\mLE)%
(1 row)

set standard_conforming_strings=0;
select E'%UPC=\\[ R%%(\\mLE)%';
      ?column?      
--------------------
 %UPC=\[ R%%(\mLE)%
(1 row) 
```

您可以在 postgresql.conf 中为所有数据库[设置此设置](http://www.postgresql.org/docs/8.3/interactive/config-setting.html)`alter database`，用于单个数据库，`alter user`用于单个用户或用户组或`set`用于当前连接。

# kindle - 如何将有用的 Stackoverflow 文章发送到我的 Kindle？

> ID：618353
> 
> 赞同：8
> 
> 时间：2009-03-06T10:22:51.223
> 
> 标签：kindle

我喜欢stackoverflow，我喜欢我的新[Kindle](http://www.amazon.com/kindle)，我正在寻找弥补差距。

有人想出一个聪明的方法来做到这一点吗？

免责声明：是的，我知道这在技术上不是一个编程问题，但这里总是有很多东西我想阅读，但想在游泳池边而不是在我的办公桌前完成 :-)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-31T18:49:38.643

[http://Instapaper.com](http://Instapaper.com)有很好的 kindle 支持，[http](http://www.kindlefeeder.com/) ://www.kindlefeeder.com/有 rss 支持。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2010-11-23T20:37:41.147

RekindleIt ( [http://www.rekindle.it/](http://www.rekindle.it/) ) 也是一种将当前页面发送到 Kindle 设备的服务。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2011-01-09T03:41:30.940

我最近创建了专为 Kindle 设计的 Mobipocket 格式[的前 20 个标签的电子书。](https://meta.stackexchange.com/questions/74399/stack-overflow-top-20-tags-in-ebook-format)

该代码使用每月数据转储来挑选热门文章，如果您想调整它以供自己使用，可以在 Github 上找到源代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-04-07T01:15:18.757

您可以使用[发送到 Kindle](http://www.klip.me/sendtokindle/)。实际上受到这个问题的启发，最新版本的“发送到 Kindle”增加了对 Stackoverflow 和 Quora 的支持。

:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-03T03:37:35.547

亚马逊有自己的用于 Chrome的[Send to Kindle扩展程序。](http://www.amazon.com/gp/sendtokindle/chrome)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-06T10:25:02.560

您可以使用 Google Reader 阅读 RSS。它允许[离线阅读](http://www.google.com/help/reader/offline.html)。

[http://thepugetnews.com/2008/04/29/using-google-reader-on-the-amazon-kindle/](http://thepugetnews.com/2008/04/29/using-google-reader-on-the-amazon-kindle/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-14T07:30:07.887

我现在在 iPad 上使用 POcket（以前读过）

# asp.net-mvc - 如何将类作为 ASP.NET MVC htmlAttributes 的键值对传递？

> ID：618354
> 
> 赞同：2
> 
> 时间：2009-03-06T10:24:00.953
> 
> 标签：asp.net-mvc

我想使用 Html.TextBox("FullName", null, new{ **class** ="grey-input"}) 为我的输入框在 ASP.NET MVC 中传递 html 输入类属性。但我想我可以使用“ *class* ”关键字。

我怎样才能绕过这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-06T10:31:02.670

是的，您需要使用@class，它允许您使用保留字。

```
Html.TextBox("FullName", null, new{@class="grey-input"}) 
```

举个例子：

```
<%= Html.TextBox("Name","Andy",new{@class="Test"}) %> 
```

生产

```
<input class="Test" id="Name" name="Name" type="text" value="Andy" /> 
```

您也可以为此创建自定义扩展方法，但我使用的是上述方法。

# image-processing - 基于几何形式检测图像上的物体

> ID：618360
> 
> 赞同：10
> 
> 时间：2009-03-06T10:25:27.877
> 
> 标签：image-processing, pattern-matching, computer-vision, pattern-recognition

我对图像处理有了基本的了解，现在正在深入研究冈萨雷斯的《数字图像处理》一书。

当给定图像和感兴趣对象的近似形式已知（例如圆形、三角形）时，在图像上找到该对象的最佳算法/方法是什么？

物体可能会稍微变形，所以蛮力方法无济于事。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-05T10:52:37.170

您可以尝试使用方向梯度直方图（也称为边缘方向直方图）。我们已将它们用于检测道路标志。[http://en.wikipedia.org/wiki/Histogram_of_orient_gradients](http://en.wikipedia.org/wiki/Histogram_of_oriented_gradients)和 Bill Triggs 的论文应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-06T10:44:30.860

我建议您使用 Hough 变换，它允许您找到由方程描述的任何给定模式。此外，霍夫变换也适用于变形对象。

算法和实现本身非常简单。更多细节可以在这里找到：[http](http://en.wikipedia.org/wiki/Hough_transform) ://en.wikipedia.org/wiki/Hough_transform ，甚至这个算法的源代码也包含在参考页面上（[http://www.rob.cs.tu-bs.de /content/04-teaching/06-interactive/HNF.html](http://www.rob.cs.tu-bs.de/content/04-teaching/06-interactive/HNF.html)）。

我希望这对你有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-11T01:12:19.100

我会分两步看你的问题：

*   首先**找到你的对象的外边界**：我假设你有足够的对比图像，你可以很容易地阈值来获得你的对象的二进制图像。您需要提取对象边界链码。

*   然后**分析边界的形状**以推断形式（圆形、多边形、...）：您可以计算边界链的每个点的曲率，从而确定您的形状中有多少个锐角（即高曲率值）。几个锐角​​意味着你有一个多边形，没有一个意味着你有一个圆（恒定曲率）。

[您可以在Gonzalez 的《数字图像处理》第 11 章](http://books.google.com/books?id=8uGOnjRGEzoC&printsec=frontcover&dq=gonzalez+image&ei=cAS3SZ_wJYjcygTR3KTSDQ&client=firefox-a#PPA797,M1)中找到有关如何从二进制图像中获取对象边界以及分析它的方法的描述。

我还发现了这个[关于二值图像分析 (PPT) 的有见地的演示文稿](http://www.csee.wvu.edu/~xinl/courses/ee465/binary_image_analysis.ppt)和一个[matlab 脚本](http://www.mathworks.com/matlabcentral/fileexchange/15491)，该脚本实现了 Gonzalez 在 DIP 中谈到的一些技术。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-11-10T17:06:33.293

看起来，来自舍布克大学的[Jean Rouat](http://www.gel.usherbrooke.ca/rouat/shortBioRouat.html)教授已经找到了一种通过处理中性脉冲神经网络来查找图像中对象的方法。他的技术名称[RN-SPIKES](http://www.socpra.com/en/fiche_Rouat-Reseaux_neurone_images_fichiers_sonores.php)似乎可用于许可。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-30T15:37:36.113

我强烈推荐你使用[OpenCV](http://opencv.willowgarage.com/wiki/)，它是一个很棒的计算机视觉库，对任何与计算机视觉相关的事情都有很大帮助。他们的网站不是很吸引人，也不是很有帮助，但是 API 确实很强大。

由于网络上没有大量文档，因此对我有很大帮助的一本书是[Learning OpenCV](https://rads.stackoverflow.com/amzn/click/com/0596516134)。API 附带的文档很好，但不适合学习如何使用它。

与您的问题相关，您可以使用 Canny Edge 检测器来查找项目的边界然后对其进行分析，或者您可以继续使用霍夫变换来搜索线和/或圆。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-10-26T22:12:32.743

您可以专门尝试“人脸识别”。因为，你知道这是一个特定的话题。另一方面，“面部检测”等。EmguCV 对您很有用。它是英特尔 OpenCV 图像处理库的 .Net 包装器。

# vb.net - 延迟加载对象集合

> ID：618364
> 
> 赞同：0
> 
> 时间：2009-03-06T10:28:22.987
> 
> 标签：vb.net, loading

我有一个 sql 查询，可以通过 DataReader 带回大量行。刚才我查询数据库将结果集转换为 List(of ) 并将 Grid 数据绑定到 List。

由于数据集的大小，这有时会导致超时。

我目前有一个三级设置，其中 UI 作用于业务层中的对象列表。

谁能建议在这个场景中实现延迟加载的最佳方法？还是有其他方法可以干净地实现这一点？

我目前正在使用 Visual Studio 2005、.NET 2.0

编辑：在这种情况下如何使用分页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T10:28:56.043

LINQ to SQL 在您的情况下似乎很有意义。

否则，如果出于任何原因，您不想使用 LINQ to SQL（例如，您使用的是 .NET 2.0），请考虑编写一个迭代器来读取`DataReader`并将其转换为适当的对象：

```
IEnumerator<MyObject> ReadDataReader() {
  while(reader.MoveNext())
    yield return FetchObject(reader);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T10:38:03.060

您是否需要一次带回所有数据？你可以考虑分页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-08T12:35:24.023

分页可能是您最好的解决方案。如果您使用的是 SQL Server 2005 或更高版本，则添加了新功能。[行号（）](http://msdn.microsoft.com/en-us/library/ms186734.aspx)：

```
WITH MyThings AS
(
    SELECT ThingID, DateEntered,
    ROW_NUMBER() OVER (ORDER BY DateEntered) AS 'RowNumber'
    FROM dbo.Things 
) 
SELECT * 
FROM ThingDetails
WHERE RowNumber BETWEEN 50 AND 60; 
```

David Hayden的一个[例子](http://www.davidhayden.com/blog/dave/archive/2005/12/30/2652.aspx)对演示 SQL 很有帮助。

此方法将减少返回的记录数，从而减少总体加载时间。这确实意味着您将不得不做更多的事情来跟踪您在记录序列中的位置，但值得付出努力。
标准分页技术要求所有内容都从数据库返回，然后在中间层或客户端层（代码隐藏）进行过滤，此方法将记录减少到更易于管理的子集。

# forms - VB6更改窗体上每个控件的颜色

> ID：618371
> 
> 赞同：1
> 
> 时间：2009-03-06T10:30:15.027
> 
> 标签：forms, vb6

我正在尝试更改旧 VB6 应用程序的颜色主题（让它看起来更现代一点！）。

有人可以告诉我如何更改表单上每个控件的背景色，而无需为每个控件（标签、按钮、框架等！）。

我有大约 50 个表单，所有表单都包含这样的控件，并且为代码中的每个表单手动执行此操作需要很长时间！

我也愿意就如何为 VB6 应用程序皮肤/主题提供更好的建议和想法？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-06T11:02:34.107

.frm 文件只是标准的 ANSI 文本文件。控件的背景颜色属性如下所示：-

```
BackColor       =   &H80000005& 
```

（请注意，上面是系统颜色，但您可以使用低 3 个字节并保留高字节 0 来指定 RGB 颜色）。

一个这样的标签控件看起来像这样：-

```
Begin VB.Label Label1 
  Caption         =   "Hello:"
  Height          =   285
  Left            =   90
  TabIndex        =   3
  Top             =   480
  Width           =   1305
End 
```

因此，该任务可以通过解析 .frm 文件并插入（或替换）BackColor 属性行来完成。

**编辑：**

[MarkJ](https://stackoverflow.com/users/15639/markj)在评论中发布的有用链接： [表单描述属性](http://msdn.microsoft.com/en-us/library/aa716301(VS.60).aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-06T10:36:56.743

您可以为每个都做一个并消除您不想要的控件。

```
Dim frmThing as Form    
Dim ctlThing as Control

For Each frmThing In Forms
  frmThing.BackColor = vbYellow
  For Each ctlThing In frmThing.Controls
    If (TypeOf ctlThing Is TextBox) Or _
    (TypeOf ctlThing Is CheckBox) Or _
    (TypeOf ctlThing Is ComboBox) Then
      ctlThing.BackColor = vbYellow
    End If
  Next
Next 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T10:33:25.720

您可以在运行时通过循环控制集合并设置每个集合的背景来执行此操作。这将为您提供更改主题的灵活性。

您还可以处理源文件，解析控件并输入/更改所需的背景颜色。这种方法可能更多的工作，更少的回报。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-02-21T11:57:30.073

只是为了完整...

ssCheck 没有 BackColor 属性，使用上述方法会产生错误

~迈克~

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-06T10:34:23.113

现在已经过去好几年了，但是没有“透明”背景色吗？

将所有标签设置为透明背景，只需设置一次表单颜色。

# bash - 从 UNIX shell 脚本中的列表中选择唯一或不同的值

> ID：618378
> 
> 赞同：286
> 
> 时间：2009-03-06T10:33:38.420
> 
> 标签：bash, unique, distinct, ksh, sh

我有一个 ksh 脚本，它返回一长串值，换行符分隔，我只想查看唯一/不同的值。有可能做到这一点吗？

例如，假设我的输出是目录中的文件后缀：

> ```
> tar
> gz
> java
> gz
> java
> tar
> class
> class 
> ```

我想查看如下列表：

> ```
> tar
> gz
> java
> class 
> ```

* * *

## 回答 #1

> 赞同：503
> 
> 时间：2009-03-06T10:34:51.973

您可能想查看`uniq`和`sort`应用程序。

```
./yourscript.ksh | 排序 | 独特的

```

（仅供参考，是的，在此命令行中排序是必需的，`uniq`仅删除紧随其后的重复行）

**编辑：**

[与Aaron Digulla](https://stackoverflow.com/questions/618378/select-unique-or-distinct-values-from-a-list-in-unix-shell-script/618382#618382)就`uniq`命令行选项发布的内容相反：

给定以下输入：

```
班级
罐
罐
罐
斌
斌
爪哇

```

`uniq`将只输出所有行一次：

```
班级
罐
斌
爪哇

```

`uniq -d`将输出所有出现多次的行，并将它们打印一次：

```
罐
斌

```

`uniq -u`将输出恰好出现一次的所有行，并将它们打印一次：

```
班级
爪哇

```

* * *

## 回答 #2

> 赞同：102
> 
> 时间：2009-03-06T14:44:08.117

```
./script.sh | sort -u 
```

这与[一氧化碳的](https://stackoverflow.com/users/15537/monoxide) [答案](https://stackoverflow.com/questions/618378/select-unique-or-distinct-values-from-a-list-in-unix-shell-script/618381#618381)相同，但更简洁一些。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2009-03-06T12:06:34.233

使用*zsh*你可以这样做：

```
% cat infile 
tar
more than one word
gz
java
gz
java
tar
class
class
zsh-5.0.0[t]% print -l "${(fu)$(<infile)}"
tar
more than one word
gz
java
class 
```

或者您可以使用 AWK：

```
% awk '!_[$0]++' infile    
tar
more than one word
gz
java
class 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-03-06T11:02:43.203

对于可能不需要排序的较大数据集，您还可以使用以下 perl 脚本：

```
./yourscript.ksh | perl -ne 'if (!defined $x{$_}) { print $_; $x{$_} = 1; }' 
```

这基本上只是记住每一行输出，以便它不会再次输出。

与 " " 解决方案相比，它的优势`sort | uniq`在于无需预先进行排序。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-05-22T21:27:52.993

使用 AWK，您可以：

```
 ./yourscript.ksh | awk '!a[$0]++' 
```

我发现它比 sort 和 uniq 更快

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2009-03-06T10:35:05.047

将它们通过`sort`和管道`uniq`。这将删除所有重复项。

`uniq -d`只给出重复的，`uniq -u`只给出唯一的（去除重复的）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-28T21:00:13.100

唯一，按要求（但未排序）；
使用少于约 70 个元素的系统资源（经时间测试）；
编写为从标准输入获取输入，
（或修改并包含在另一个脚本中）：（
Bash）

```
bag2set () {
    # Reduce a_bag to a_set.
    local -i i j n=${#a_bag[@]}
    for ((i=0; i < n; i++)); do
        if [[ -n ${a_bag[i]} ]]; then
            a_set[i]=${a_bag[i]}
            a_bag[i]=$'\0'
            for ((j=i+1; j < n; j++)); do
                [[ ${a_set[i]} == ${a_bag[j]} ]] && a_bag[j]=$'\0'
            done
        fi
    done
}
declare -a a_bag=() a_set=()
stdin="$(</dev/stdin)"
declare -i i=0
for e in $stdin; do
    a_bag[i]=$e
    i=$i+1
done
bag2set
echo "${a_set[@]}" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-20T21:20:39.713

我得到了一个更好的提示来获取文件中的非重复条目

```
awk '$0 != x ":FOO" && NR>1 {print x} {x=$0} END {print}' file_name | uniq -f1 -u 
```

# java - 在 Java 中：在哪里可以创建一个指向更大数组的一部分的子数组？

> ID：618396
> 
> 赞同：11
> 
> 时间：2009-03-06T10:40:53.880
> 
> 标签：java, performance

学习Java，所以请温柔一点。理想情况下，我需要创建一个字节数组，指向更大数组的一部分：

```
byte[] big  = new byte[1000];

// C-style code starts
load(file,big);

byte[100] sub = big + 200; 

// C-style code ends 
```

我知道这在 Java 中是不可能的，我想到了两种解决方法，包括：

1.  *将big*的部分复制到*sub*中迭代*big*。

2.  或者编写自己的类，该类将引用*big + offset + size并通过使用**big*作为实际底层数据结构的访问器方法实现“子数组” 。

我要解决的任务是将文件加载到内存中，然后通过类获得对与文件一起存储的记录的只读访问权限。速度是最重要的，因此理想情况下我想避免复制或访问器方法。因为我正在学习 Java，所以我想坚持下去。

我还有其他选择吗？如果我没有很好地解释任务，请提出问题。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-03-06T11:14:05.077

在 Java 中创建一个数组作为另一个数组的“视图”是不可能的。但是您可以使用[java.nio.ByteBuffer](http://java.sun.com/javase/6/docs/api/java/nio/ByteBuffer.html)，这基本上是您在解决方法#2 中建议的类。例如：

```
ByteBuffer subBuf = ByteBuffer.wrap(big, 200, 100).slice().asReadOnlyBuffer(); 
```

不涉及复制（尽管有一些对象创建）。作为一个标准库类，我还假设 ByteBuffer 更有可能接受特殊处理。JVM 的“JIT”优化比自定义优化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-06T10:50:18.723

如果您想以低级访问快速读取文件，请检查 java nio 的东西。[这是java almanac](http://www.exampledepot.com/egs/java.nio/ReadChannel.html)的一个例子。

您可以使用映射的字节缓冲区在文件内容中导航。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T10:49:04.827

查看 java.lang.String 的源代码（它将在 src.zip 或 src.jar 中）。你会看到他们有一个 cahrs 数组，然后是一个开始和结束。所以，是的，解决方案是使用一个类来做到这一点。

[这是在线源的链接](https://openjdk.dev.java.net/source/browse/openjdk/jdk/trunk/jdk/src/share/classes/java/lang/String.java?rev=257&view=markup)。

感兴趣的变量是：

*   价值
*   抵消
*   数数

substring 可能是一个很好的起点。

如果您想直接从文件中读取，请使用[java.nio.channels.FileChannel](http://java.sun.com/javase/6/docs/api/java/nio/channels/FileChannel.html)类，特别是 map() 方法 - 这将让您使用内存映射 I/O，这将非常快并且使用的内存比复制到数组。

# c - 什么是 C 开发的最佳 IDE/为什么在 IDE 上使用 Emacs？

> ID：618403
> 
> 赞同：64
> 
> 时间：2009-03-06T10:43:06.667
> 
> 标签：c, ide

所以根据我之前的一个问题，我正在复习我的 C 技能。

**我的问题是，人们用什么来开发 C？**

很多人都在使用 Emacs，并且已经使用了多年，但是**学习 emacs 是否比仅使用**Geany 或 KDevelop 之类的 IDE 更好？

还想听听那些**仍在使用 emacs**的人的意见，以及**为什么他们**在其他应用程序上使用它？

请注意，我只对**免费的 IDE/编辑器**真正感兴趣。

**编辑：**

感谢您发布回答我的一些问题的链接，但我想我真正想知道的是：

学习使用 emacs / vim 编辑和使用 gcc-toolchain 编译 / 调试是否值得，而不是仅仅使用 IDE，为什么？

人们不迁移到 IDE 的原因是什么？

有没有人从以终端为中心的开发转移到 IDE 开发，他们为什么要转移？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2009-03-06T11:23:48.753

我从使用 IDE 开始，不管是不是微软。然后，很久以前在 QNX 上工作时，我被迫使用文本编辑器 + 编译器/链接器。现在我更喜欢这种简单的组合——语法高亮编辑器 + C 编译器和链接器 cli + make——而不是任何 IDE，即使环境允许。

对我来说，原因是：

1.  它无处不在。如果你用 C 编程，你有编译器，通常你可以给自己一个编辑器。我做的第一件事——我让自己在 Linux 上使用 nedit 或在 Windows 上使用 Notepad++。我会使用 vi，但 GUI 编辑器提供了更好的字体，当你整天看代码时，这很重要

2.  您可以在需要时通过 ssh 远程编程。有时能够通过 ssh 进入目标并在那里做一些快速的事情确实很有帮助

3.  它让我接近 CLI，最好是 UNIX/Linux CLI。所以所有命令都在我的指尖，当我需要它们时，我不必去阅读参考书。UNIX CLI 可以做 IDE 通常做不到的事情——因为他们的开发人员认为你不需要它们

4.  最重要的是，它非常像在原始代码中看到矩阵。我操作文件，所以我不得不让它们易于管理。我在我的代码中手动查找东西，这让我保持简单和有条理。我明确地进行配置管理，所以我知道何时同步以及如何同步。我知道我的 Makefile，因为我编写了它们，它们只做我告诉他们的事情

    （如果你想知道这是否适用于“真正的大项目”——它确实有效，项目越大，它获得的性能就越多）

5.  当人们要求我查看他们的代码时，我不必学习他们使用的 IDE

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2009-03-06T12:18:03.100

对于我的大部分项目，我已经从终端文本编辑器+制作环境转移到 Eclipse。从 C 和 C++，到 Java 和 Python，仅举几例我目前正在使用的语言。

原因只是生产力。当其他事情变得更加重要时，我无法承受将所有项目“留在我的脑海中”的时间和精力。

使用“硬核”方法（终端）有很多好处 - 例如，您自己和代码之间有一个更薄的层，当您全都在项目“内部”并且一切正常时，您可以提高工作效率在你的头顶上。但我认为，当你的思想在其他地方需要时，不可能仅仅为了它自己的利益而捍卫这种工作方式。

通常，当您使用命令行工具时，您经常需要解决许多样板问题，这些问题会使您无法提高工作效率。您需要详细了解这些工具才能充分发挥它们的潜力。维护一个项目也需要更多的努力。重构将导致生成文件等的更新。

总结一下：如果你只从事一个或两个项目，最好是全职工作，没有太多分心，“基于终端的编码”可能比一个成熟的 IDE 更有效率。但是，如果您需要将思考的精力花在更重要的事情上，那么 IDE 绝对是保持生产力的最佳选择。

做出相应的选择。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-03-06T11:05:49.090

Emacs*是*一个 IDE。

*编辑*：好的，我会详细说明。什么是 IDE？

作为起点，让我们扩展首字母缩略词：集成开发环境。为了分析这一点，我从头开始。

一般而言，*环境*是围绕观点的世界的一部分。在这种情况下，它是我们在显示器上看到的（可能是从我们的扬声器中听到的）并通过我们的键盘（也可能是鼠标）进行操作。

*开发*是我们想要在这个环境中做的事情，它的目的，如果你愿意的话。我们使用环境来开发软件。这定义了我们需要的子部分：编辑器，REPL 的接口，resp。编译器、调试器的接口以及对在线文档的访问（此列表可能并不详尽）。

*集成*意味着环境的所有部分都在一个统一的表面之下。在 IDE 中，我们可以通过最少的切换访问和使用不同的子部分；我们不必离开我们定义的环境。这种集成让不同的子部分可以更好地交互。例如，编辑器可以知道我们用什么语言编写，并给我们符号自动补全、跳转到定义、自动缩进、语法高亮等。它可以从编译器获取信息，自动跳转到错误，并突出它们。在大多数（如果不是全部）IDE 中，编辑器自然是开发过程的核心。

Emacs 做到了这一切，它使用多种语言和任务来做到这一点，而且做得非常出色，因为它可以由用户无缝扩展，无论他错过了什么。

反例：您可以使用记事本之类的工具进行开发，通过 Firefox 和 XPdf 访问文档，并从 shell 控制编译器和调试器。这将是一个开发环境，但它不会被*集成*。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-03-06T11:01:23.533

我已经非常成功地使用了带有 CDT 插件的 Eclipse。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-03-06T10:48:22.067

如果 Emacs 里面有一个文本编辑器会更好... :-)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-03-06T10:50:58.503

使用[代码::块](http://www.codeblocks.org/)。它有你需要的一切和一个非常干净的 GUI。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2010-08-22T13:38:32.733

Netbeans 有[很好的 C 和 C++ 支持](http://netbeans.org/features/cpp/)。有些人抱怨它臃肿而缓慢，但我几乎只将它用于个人项目并且喜欢它。代码辅助功能是我见过的最好的功能之一。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-09-27T19:29:50.490

怎么没人提到[Bloodshed Devc++？](http://www.bloodshed.net/devcpp.html)有一段时间没有使用它，但我在上面学习了 c/c++。非常类似于 MS Visual c++。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-06T10:56:57.520

如果您正在寻找一款免费、美观、跨平台的编辑器，请尝试[Komodo Edit](http://www.activestate.com/komodo_edit/)。它不如 Komodo IDE 强大，但它不是免费的。见[特征图](http://www.activestate.com/komodo_edit/comparison/)。

另一个免费的、可扩展的编辑器是[jEdit](http://www.jedit.org/)。跨平台，因为它是 100% 纯 Java。不是地球上最快的 IDE，但对于 Java，它实际上非常快、非常灵​​活，但看起来并不那么漂亮。

两者都具有非常复杂的代码折叠、语法突出显示（适用于您能想到的所有语言！）并且在根据您的个人需求进行配置方面非常灵活。顺便说一句，jEdit 很容易扩展以添加您可能需要的任何功能（它具有超简单的脚本语言，看起来像 Java，但实际上是“脚本化的”）。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2009-03-06T10:57:48.737

如果您使用的是 Windows，那么这完全是明智之举：获取 Visual C++ Express。

# jpa - Ejb-QL 区别开

> ID：618406
> 
> 赞同：1
> 
> 时间：2009-03-06T10:43:34.120
> 
> 标签：jpa, ejb, distinct

是否可以在 EJB-QL 查询中使用类似 PostgreSQL 的 DISTINCT ON ？

我需要做的是从 10 列中的 3 列不同的数据库记录中获取。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-12T14:38:40.247

你为什么不发布你的实体？

想象一下，有一个`Customer`who 有多个`Reservation`s。`Customer`如果有多个，则此查询将返回重复项`Reservation`：

```
SELECT c FROM Reservation r, IN(r.customer) c 
```

使用`DISTINCT`关键字可确保每个客户在结果中出现一次：

```
SELECT DISTINCT c FROM Reservation r, IN(r.customer) c 
```

我希望这有帮助。

# visual-studio - Visual Studio Addin 开发 - 如何解决退出 Visual Studio 后“进程无法访问文件”的问题？

> ID：618408
> 
> 赞同：4
> 
> 时间：2009-03-06T10:44:38.860
> 
> 标签：visual-studio, add-in

我目前正在开发一个 Visual Studio 插件，但是当我关闭 Visual Studio 并关闭我的机器并在第二天回来时，我无法构建该插件，因为它当前已加载到 Visual Studio 中。如何解决这个问题，这样我就不必在每次想要调试或更改我的加载项时手动删除删除并重新安装加载项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-06T12:03:03.183

插件通常由放置在这些位置之一的 .AddIn 文件加载

C:\Documents and Settings\All Users\Application Data\Microsoft\MSEnvShared\Addins\ C:\Documents and Settings\Computer.User\My Documents\Visual Studio 2008\Addins

因此，当我进行 AddIn 开发时，我会使用特殊的 .bat 文件启动 Visual Studio。在处理其他项目时，我也会使用 AddIn，因此会有额外的复杂性。这是我使用的文件的示例：

```
:: My installed .AddIn file goes in All Users directory
move "C:\Documents and Settings\All Users\Application Data\Microsoft\MSEnvShared\Addins\Sample.AddIn" "C:\Documents and Settings\All Users\Application Data\Microsoft\MSEnvShared\Addins\Sample.AddIn_"

:: just in case it got left from the previous session
del "C:\Documents and Settings\Computer.User\My Documents\Visual Studio 2008\Addins\Sample_dbg_.AddIn"

:: start Visual Studio and open AddIn solution
"C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\devenv.exe" D:\dev\Sample.sln /resetaddin Sample.Connect

:: this will execute after Visual Studio is closed
del "C:\Documents and Settings\Computer.User\My Documents\Visual Studio 2008\Addins\Sample_dbg_.AddIn"

:: This is needed because my installed AddIn, and the one I'm developing are in different directories, yet have the same name. That confuses studio and this line sets things straight
"C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\devenv.exe" /resetaddin Sample.Connect /Command File.Exit

:: restore installed AddIn file
move "C:\Documents and Settings\All Users\Application Data\Microsoft\MSEnvShared\Addins\Sample.AddIn_" "C:\Documents and Settings\All Users\Application Data\Microsoft\MSEnvShared\Addins\Sample.AddIn"

exit 
```

我也在 AddIn 项目中的 Prebuilt 事件中执行此操作：

```
copy "$(ProjectDir)\Sample_dbg_.AddIn" "C:\Documents and Settings\Computer.User\My Documents\Visual Studio 2008\Addins\Sample_dbg_.AddIn" 
```

您也可以查看 Visual Studio 命令行参数 /rootsuffix ，但我无法找到解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T10:52:21.107

您可以设置插件的行为及其加载方式，我将其设置为“按需加载”，我目前正在尝试为您查找一些信息。

我找不到任何官方信息，但如果您进入安装项目，右键单击并选择“查看注册表”，它会显示所有已创建的注册表项。向下导航到插件的级别并将“LoadBehavior”从“3”更改为“2”。

从那时起，您应该能够使用插件管理器加载您的插件。

当我能得到它时，我会尝试更新更多信息，希望它有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-19T00:57:28.047

这对我
[有用：将目标重命名为 target.locked 的预构建事件](http://social.msdn.microsoft.com/forums/en-US/Vsexpressinstall/thread/5b71eb06-5047-483d-8fd3-b75c102d41e9/)

# user-interface - 作为服务执行的 AutoIt 脚本是否适用于 GUI 操作？

> ID：618409
> 
> 赞同：5
> 
> 时间：2009-03-06T10:44:44.307
> 
> 标签：user-interface, service, autoit

我正在使用[AutoIt](http://www.autoitscript.com/)脚本来启动和自动化 GUI 应用程序。我需要每小时激活一次脚本。

AutoIt 脚本（在 GUI 上执行操作）在用作服务时会起作用吗？该脚本将作为服务运行（不是计划任务）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T15:32:32.650

您可以使用autoit 论坛[的 archer 编写的 service.au3](http://www.autoitscript.com/forum/index.php?showtopic=80201&hl=as+a+service)轻松地将 autoit 脚本作为服务运行。不幸或幸运的是，因为它是一种安全措施。服务需要独立于当前用户会话（在登录之前）启动。它无法从那里访问用于当前用户会话的输入操作的发送 API。这听起来更像是您需要计划任务而不是服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T09:51:42.497

如上所述，计划任务就是您要查找的内容。要将脚本作为服务运行，请阅读以下内容：

> Q4。如何将我的脚本作为服务运行？这也是一个有多个答案的问题，没有一个是唯一的方法。要问自己的第一个问题是，您是否希望在除您自己的计算机之外的其他计算机上安装该服务。

```
A1\. If you only wish to install the service on your own computer, The easiest way to do this is to use Pirmasoft RunAsSvc. This program makes services easy to install and easy to remove when necessary.
A2\. If you wish to make the service available to anyone running your script, you can use SRVANY.EXE and ServiceControl.au3\. You can then use this code to install your script as a service:
    #include "ServiceControl.au3"
    $servicename = "MyServiceName"
    _CreateService("", $servicename, "My AutoIt Script", "C:\Path_to_srvany.exe", "LocalSystem", "", 0x110)
    RegWrite("HKLM\SYSTEM\CurrentControlSet\Services\" & $servicename & "\Parameters", "Application", "REG_SZ", @ScriptFullPath)

or use the following code to delete this service:
    #include "ServiceControl.au3"
    $servicename = "MyServiceName"
    _DeleteService("", $servicename) 
```

> 将 AutoIt 设置为服务有一个警告。如果没有使用上述代码安装服务，则必须设置“允许服务与桌面交互”，否则 Control* 或 Win* 等自动化功能将无法运行。为确保服务确实具有此设置，请使用以下代码：RegWrite("HKLM\SYSTEM\CurrentControlSet\Services[ServiceName]", "Type", "REG_DWORD", 0x110)

取自 AutoIt 论坛上的常见问题解答主题。www.autoitscript.com/forum/index.php?showtopic=37289)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T10:52:22.260

听起来您想使用计划任务而不是服务。计划任务可以在您登录时每小时执行一次，并且还应该能够与您的桌面进行交互。请记住，如果您使用启用了用户帐户控制的 Vista/Windows Server 2008，则以普通用户身份运行的任务无法与提升的程序交互（发送输入）。

# ruby-on-rails - 如何将对象数组（在我的情况下为用户）从控制器传递给 jQuery 脚本

> ID：618420
> 
> 赞同：1
> 
> 时间：2009-03-06T10:49:54.323
> 
> 标签：ruby-on-rails

我不明白如何使用在控制器中初始化的变量，例如 jQuery 脚本（在我的例子中是自动完成）。所以我正在使用 Rails 并获取我的作者列表。我如何在我想使用 jQuery 自动完成插件的 jQuery 脚本中引用它们：

[代码] $(document).ready(function() { $("#book_author").autocomplete(url or data, options); }); [/code] 所以我应该将我的作者数组从控制器传递给脚本。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-06T11:17:46.893

你可以这样做。

```
<script type="text/javascript">
  var authors = <%= Author.find(:all).to_json -%>;
  $(document).ready(function() { 
      $("#book_author").autocomplete(authors, options ); });
</script> 
```

Json 字符串将在 JavaScript 中作为对象直接评估。在这种情况下，最终结果将类似于

```
var authors = [{"author": {"id": 1, "name": "John"}}, {"author": {"id": 2, "name": "Jack"}}]; 
```

这将是一个易于在 JavaScript 中处理的对象数组。为了让它与自动完成一起工作，你可能需要做更多的处理才能得到它想要的格式。

请记住，除非您将其关闭，否则 json 字符串将包含模型

```
ActiveRecord::Base.include_root_in_json = false 
```

# python - 防止 wxPython 显示“未处理的异常”对话框

> ID：618429
> 
> 赞同：1
> 
> 时间：2009-03-06T10:51:27.533
> 
> 标签：python, windows, wxpython, error-reporting

我有用 Python 和 wxPython 编写的复杂 GUI 应用程序。

我希望它通过 Windows Vista 认证，因此它必须以一种导致 Windows 错误报告对话框（询问“*你想向 Microsoft 发送报告吗？* ”）出现的方式崩溃。这与“ *Certified for Windows Vista Test Cases* ”文档中的第 32 号测试用例有关。

`ThreadHijacker`不幸的是，当我使用工具 wxPython使我的应用程序崩溃时，会显示如下消息：

```
未处理的异常
--------------------------
发生未处理的异常。按“中止”终止程序，
“重试”正常退出程序，“忽略”尝试继续。
--------------------------
中止 重试 忽略
```

如何防止 wxPython 显示此消息？我有 custom `sys.excepthook`，但似乎在我的 except 钩子可以干扰之前显示了这个对话框。

**编辑：**

wxWidgets[文档](http://docs.wxwidgets.org/trunk/classwx_app_console.html#ca806b41cf74fd6166e4fb2e2708e9bf)说*wxAppConsole::OnExceptionInMainLoop*被调用，并在 MSW 下显示一些精美的对话框，允许用户在不同的选项之间进行选择。然而，似乎 wxPython 不允许重载该函数......有谁知道如何在 wxPython 中更改*wxAppConsole::OnExceptionInMainLoop*的默认行为？
我更喜欢 Python 级别的解决方案，而不是 C/C++ 的解决方案

**编辑2：**

总而言之，我在 wxPython 邮件列表中询问过，Robin Dunn 回答说他会考虑在 wxPython 的下一个版本*中使 wxAppConsole::OnExceptionInMainLoop成为可覆盖的。*由于迫不及待，我不得不编译我自己的 wxPython 版本，它不包含该函数。事实证明， 可以通过正确设置编译标志来启用/禁用*wxAppConsole::OnExceptionInMainLoop函数的存在。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-03-29T10:53:30.543

这一切都以编译我自己的 wxWidgets 和 wxPython 告终，只更改了一个编译标志：**wxUSE_EXCEPTIONS**应设置为 0。

Robin Dunn 写道，他将尝试修补 wxPython，因此无需重新编译整个库即可修改此行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T11:19:15.550

如果我没记错的话，这是 wxWidgets 中顶层（wxApp）的 catch(...)。您可以使用向量异常处理程序或 _set_se_translator() 来获得结构化异常的第一枪，然后从那里退出到 WER，即 ReportFault()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-09T00:48:15.620

你有可能只处理所有事情吗？我猜你必须在绑定到小部件的每个方法周围放置一个 try:except: 块。你可以写一个装饰器：

```
def catch_exception(f):
    def safe(*args, **kw):
        try:
            f(*args, **kw)
        except Exception, e:
            handle_exception(e)
    return safe

def handle_exception(e):
    # do Vista stuff
    sys.exit() 
```

然后装饰任何可以被主循环调用的函数（因为我认为那是 wxPython 自己捕获的地方）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-06T11:11:12.790

试试[http://wiki.python.org/moin/CrashingPython](http://wiki.python.org/moin/CrashingPython)

# netbeans - Netbeans 中是否有“反向声明”功能？

> ID：618430
> 
> 赞同：1
> 
> 时间：2009-03-06T10:51:53.993
> 
> 标签：netbeans, netbeans6.5

是否有可以更改这些语句的功能或插件

```
x = y;
jTextField1.setText(entity.getValue());
... 
```

进入这些：

```
y = x;
entity.setValue(jTextField1.getText());
... 
```

# iphone - iPhone书签链接添加到主屏幕？

> ID：618431
> 
> 赞同：7
> 
> 时间：2009-03-06T10:52:18.843
> 
> 标签：iphone, bookmarks

是否可以将书签链接添加到主屏幕？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-14T15:37:40.717

如果可以将链接放在网页上以便用户不需要按加号键，我确定 John ment 是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-03-11T17:27:13.747

楼上的搞笑回答。Chris 问这是否可以通过网络应用程序以编程方式完成。例如，我在我的网页上放了一个“添加到主屏幕”的大按钮，从 Safari 访问它，单击大按钮，完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-06T11:32:17.857

除非我误解了这个问题，否则答案是：在 Safari 中按加号键，然后按“添加到主屏幕”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-01-18T23:40:32.923

使用这个脚本：[http ://cubiq.org/add-to-home-screen](http://cubiq.org/add-to-home-screen)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-10T06:33:16.517

按下 + 键时如何阅读选项？它询问您是否要添加到家中。希望这能回答你的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-29T17:13:30.250

没有一种编程方式可以做到这一点，但是有一些脚本可以让用户注意到他们可以手动完成这一事实。

[添加到主屏幕](http://cubiq.org/add-to-home-screen)就是这样一种选择。

[移动书签泡泡](https://github.com/h5bp/mobile-boilerplate/wiki/Mobile-Bookmark-Bubble)是另一个。

# jquery - 如何使用 jQuery 在 Ajax 中实现购物车？

> ID：618438
> 
> 赞同：4
> 
> 时间：2009-03-06T10:56:56.383
> 
> 标签：jquery, ajax

我正在开发一个购物车。每个`Product`都有一个`Price`和一个`SubCategory`。

### 产品：

```
ID Price    Product No ProductName
1  250.5$   esp1       Electronic Machine
2  500.0$   esp2       Scanner 
```

用户可以通过选择上述任何一个来选择产品`Product`。每一个也有一个`CommonProduct`关联`Product`。

### 常见产品：

```
Common_id   Price  Name
cs1         1.2$   Addional_Item1
cs2         5.0$   Additional_Item2 
```

做出选择后，购物车将如下所示：

```
 Qty  Name                 Price
 1    Electronic Machine   256.7$
      Additional_item1
      Additional_item2
 1    Scanner             505.0$
       Additional_item2 
```

我需要上述过程的实施思路。我很难`Product`融入`Common Product`.

有没有使用 Ajax 的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T01:11:35.497

根据[Greg](https://stackoverflow.com/questions/618438/how-can-i-implement-a-shopping-cart-in-ajax-using-jquery/693841#693841)所说，您可以构建一个看起来有点像这样的简单 JavaScript 对象......

```
Cart = function(){    
    this.add = function( productid ){
        //jQuery Ajax method via PUT
    }
    this.remove = function( id ){
        //jQuery Ajax method via DELETE
    }
} 
```

这个[CRUD](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete)对象将是服务器端购物车的 JavaScript 接口，它可以/应该实现一个[RESTful](http://en.wikipedia.org/wiki/Representational_state_transfer#RESTful_web_services)接口。

至于显示通用产品，在服务器上返回一个包含通用产品的 XML 响应。添加电子机器的 XML 响应可能如下所示：

```
<root>
   <product price="250.0">Electronic Machine</product>
   <commonproducts>
       <commonproduct price="1.2">additional_item 1</commonproduct>
       <commonproduct price="5.0">additional_item 2</commonproduct>
   </commonproducts>
</root> 
```

用例：购买 Sanner

```
Cart = new Cart();
//Do Ajax call
xmlResponse = Cart.add(1);

//Parse XML response and get an array of products
commonProducts = $(xmlResponse).find('commonProducts');

//Iterate over the array
$().each( commonProducts, function(v,i){
    //Format them as you please
}) 
```

另一种方法是将其分离为两个方法，并提供另一个接口用于查询产品是否具有通用产品，并简单地向 CRUD 方法返回成功或失败响应。

希望这有用且有意义！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-29T00:11:25.663

就像一种非常普遍的做法一样：

构建与之交互的 Web 服务。使用 JQuery 与 Web 服务进行交互。小心要求这些方法具有一定的同步性。例如，如果商品不在购物车中，则无法更新数量，或者您可以在下订单后增加数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T16:15:16.047

你可以，但这里更好的问题是你应该吗？

2007 年，可用性专家 Jakob Neilsen 对 AJAX 推车进行了研究，发现[用户大多认为它们令人困惑](http://www.useit.com/alertbox/web-2.html)。

只是一个想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-30T09:13:49.923

您应该创建一个数据库表来存储客户购物车中的项目：

**CartItem** id（主键）、customer_id、product_id、数量

还有另一个表来存储购物车中每个项目的常用产品：

**CartCommonItem** cart_item_id(主键), common_id(主键)

然后为您的[jQuery](http://en.wikipedia.org/wiki/JQuery) [Ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)请求创建一个生成[JSON](http://en.wikipedia.org/wiki/JSON)、[XML](http://en.wikipedia.org/wiki/XML)甚至[HTML的脚本。](http://en.wikipedia.org/wiki/HTML)

# servlets - 将 EJB 作为实例变量注入 servlet 是否安全？

> ID：618440
> 
> 赞同：12
> 
> 时间：2009-03-06T10:57:34.477
> 
> 标签：servlets, ejb-3.0, code-injection

我们都知道，在 Web 层中，可能只存在给定 Servlet 的单个实例，它服务于多个请求。这可能会导致实例变量中的线程问题。

我的问题是，使用 @EJB 注释将 EJB 作为实例变量注入 servlet 是否安全？

我最初的直觉是不会，假设同一个 EJB 实例会同时服务多个请求。这似乎也是许多其他程序员的本能：[不要注入到 servlet](http://weblogs.java.net/blog/ss141213/archive/2005/12/dont_use_persis_1.html)

但是，我是否跳到了错误的结论。很明显，注入到 servlet 的是代理，在底层，容器实际上是否使用不同的实例为每个请求提供服务并维护线程安全？正如这个论坛所建议的那样：[Do inject to servlet](http://www.manning-sandbox.com/thread.jspa?threadID=25461&tstart=120)

似乎有很多相互矛盾的意见。哪个是对的？？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-25T15:36:25.863

只要 EJB 是无状态的，将 EJB 作为 Servlet 实例变量注入 Servlet 是安全的。你绝不能在 Servlet 中注入有状态的 Bean。

您必须实现 EJB 无状态，因为它不包含任何本身包含有状态值的实例变量（如持久性上下文）。如果需要使用持久化上下文，则必须在 EJB 的方法中获取它的实例。您可以通过将 PersistenceContextFactory 作为 EJB 实例变量来做到这一点，然后在 EJB 的方法中从工厂获取实体管理器的实例。

PersistenceContextFactory 是线程安全的，因此可以将其注入实例变量中。

只要遵守上述规则，在 Servlet 中注入 Stateless Bean 应该是线程安全的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-07T04:21:01.957

您的参考“不要注入到 servlet”没有提及 ejbs 或 @ejb 注释。它讨论了非线程安全的对象，例如 PersistenceContext。

根据 EJB 规范，您可以从各种远程客户端访问 ejb，包括 servlet（EJB 3.0 规范 (JSR-220) - 第 3.1 节）。使用@EJB 注解注入 ejb 是一种通过依赖注入（第 3.4.1 节）获取 EJB 接口的方法，它可以替代在 JNDI 命名空间中查找 ejb 对象。因此，对于获得的 EJB，@EJB 注释没有什么特别之处。

因此，基于 EJB 3.0 规范，使用 @EJB 注释从 servlet 获取 ejb 是一种标准做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-08-27T13:52:24.220

这是一个混合包。

无状态会话 bean 可以被注入并且是安全的。这是因为即使使用存根的单个实例，对方法的访问也将由容器序列化。

我认为 inferreddesign 所说的**不是真的**。无状态会话 bean 是否使用持久性上下文并不重要。只有一个调用者会同时访问一个 bean 实例，因此即使持久性上下文不是线程安全的，EJB 也会防止对它的多次访问。可以把它想象成每个会话 bean 方法都应用了 synchronized 关键字。

我认为在 Servlet 中注入 EJB 的主要问题是性能。当多个请求排队等待为它们执行会话 bean 方法时，单个存根实例将成为主要的争用区域。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-06T12:10:44.677

我认为简单的答案是你不能保证它是安全的。

原因是 EJB 规范中没有明确规定 EJB 主接口必须是线程安全的。该规范仅概述了服务器端部分的行为。您可能会发现客户端骨架实际上是线程安全的，但您需要查看您正在使用的库是如何实现它们的。注释部分将扩展为服务定位器，因此不会为您购买任何东西。

# c# - linux和windows中的单声道

> ID：618447
> 
> 赞同：3
> 
> 时间：2009-03-06T11:01:14.610
> 
> 标签：c#, linux, mono

在 linux 中使用 mono 运行两个可执行文件时，性能是否有任何差异，如果：

1) 一个可执行文件已从先前在 windows (egVS) 中的 c# 源代码编译。

2) 另一个可执行文件已从与 gmcs 在 linux 中相同的源编译。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-06T11:07:09.150

从单声道运行时的角度来看，这无关紧要，因为它们都是有效的 IL 代码（假设编译器没有错误）。

可能存在性能差异，这可归因于*C# 编译器*完成的优化级别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-06T11:07:31.350

Windows上的哪个编译器？

我相信 Windows 或 Linux 上的 gmcs 会给你相同的输出。

如果您使用不同的编译器（例如 VS / csc），您可能会有细微的差异

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-07T05:43:58.700

我认为在 Linux 和 Windows 上的 Mono 上运行相同的应用程序时没有任何直接的性能差异。存在间接的性能差异是可能的。间接我的意思是单声道在 Linux 和 Windows 上的性能差异。

# video - 将十几个PNG粘贴到视频中的工具

> ID：618448
> 
> 赞同：5
> 
> 时间：2009-03-06T11:01:22.330
> 
> 标签：video

我制作了近 20 张 PNG 屏幕截图。我希望将它们粘贴到视频中。你能推荐一个工具吗？

如果这将是从一张图片到另一张图片的平滑变化，例如 Flash 中的补间动画，那就更好了。

使用实际闪光灯不是一种选择。因为工具必须是免费的并且可以在 linux 上运行。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2010-04-28T18:31:26.200

这对我有用：

1.  安装 ffmpeg。
2.  在文件名中创建带有连续数字的 png，例如 img0001.png、img0002.png、...、...img5467.png。
3.  然后运行 ​​ffmpeg -qscale 5 -r 20 -b 9600 -i img%04d.png movie.mp4

感谢： http: [//www.miscdebris.net/blog/2008/04/28/create-a-movie-file-from-single-image-files-png-jpegs/](http://www.miscdebris.net/blog/2008/04/28/create-a-movie-file-from-single-image-files-png-jpegs/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-06T11:16:49.253

使用[mplayer 的](http://www.mplayerhq.hu/)mencoder：

```
for i in *.png; do for j in `seq 1 20`; do echo $i; done; done > frames.txt
mencoder mf://@frames.txt -mf fps=5:type=png \
  -audiofile audio.mp3 -oac copy \
  -of lavf -ovc lavc \
  -lavcopts vcodec=flv:mbd=2:v4mv:mv0:trell:cbp:last_pred=3:vbitrate=200 \
  -lavfopts i_certify_that_my_video_stream_does_not_use_b_frames \
  -o video.flv 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T11:10:15.213

[png2mng.pl](http://pwet.fr/man/linux/commandes/png2mng_pl)你可以从扩展中猜到，它是一个 Perl 脚本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-09-15T19:53:17.300

虽然很久以前就已经回答了这个问题，但为了将来参考，它在过去再次被问过，并且包含一个对我也有帮助的漂亮答案：

[如何从一组图像编写电影创建脚本？](https://stackoverflow.com/questions/945250/how-can-i-script-the-creation-of-a-movie-from-a-set-of-images)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-06T11:17:54.367

您可能可以使用[ffmpeg](http://www.ffmpeg.org) - 我使用它的“image2”编解码器将 mpeg 转换为一系列 JPEG 帧，很确定反过来也是可能的。如果它无法读取 PNG，您可以先使用[ImageMagick](http://www.imagemagick.org)将您的 PNG 转换为 JPEG。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-03-06T11:20:16.170

Video Mach [(http://www.gold-software.com/download8598.html)](http://www.gold-software.com/download8598.html)对您来说似乎是一个不错的选择。虽然对于winows，它是一个共享软件。

-广告

# c# - C#数据分配问题

> ID：618450
> 
> 赞同：0
> 
> 时间：2009-03-06T11:01:37.307
> 
> 标签：c#, c++, free, allocation

我有以下问题。我有一个 C++ dll，包含函数

```
void cpp_send (void *data_, size_t size_, free_fn *ffn_)
{
    //sends data
} 
```

然后我有一个类的 C# dll

```
public class CS_dll : IDisposable
{
    void cs_send (void *data)
   {
       IntPtr ptr = Marshal.AllocHGlobal (data.Length);
       Marshal.Copy (data, 0, ptr, data.Length);
       try
       {
            cpp_send (ptr,
            Convert.ToUInt32 (data.Length), Free);
       }
 catch
 {
     Free (ptr);
 }
} 
```

//函数Free()看起来像：

```
public static void Free (IntPtr ptr)
{
    Marshal.FreeHGlobal (ptr);
} 
```

我从 C# 应用程序中将其称为

```
CS_dll w = new CS_dll();
byte [] msg = new byte [msg_size];
w.cs_send (msg, msg_size); 
```

问题是，一段时间后，C# 应用程序因 SystemAccessViolationExcetpion 而崩溃。你知道问题出在哪里吗？

为了更清楚：C# aaplication 可以完成某些类型的输入，而其他类型的输入会崩溃，所以我不认为调用约定有问题，是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T11:16:41.250

您要向仅接收 3 个的函数发送 5 个参数？

编辑：感谢您修复代码。你说它因某些类型的数据而失败。能说一下是什么类型吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T11:12:03.570

什么是'data.Length'？请提供声明数据的定义。

更新：也可能是您传递给函数的回调（委托）正在使用 stdcall，而非托管函数需要 cdecl 调用约定。

# sharepoint - 添加在共享点内容类型上浏览的列

> ID：618451
> 
> 赞同：2
> 
> 时间：2009-03-06T11:02:03.967
> 
> 标签：sharepoint

我在 sharepoint 中创建了一个新的内容类型。

我正在尝试添加一个新的列/字段，让用户浏览共享点站点中存在的“资产”，例如图片或视频。

如何添加让用户能够浏览的列。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-06T13:45:42.670

您将需要创建一个[自定义字段](http://msdn.microsoft.com/en-us/library/ms446361.aspx)并在呈现控件模板中提供您自己的浏览 UI（见下文）。上手相当简单，但您需要注意有多个活动部分：

1.  字段类型/渲染控件 - 这是一个封装字段定义的对象。它负责了解如何在设计时（将其添加到列表时）、运行时（在表单中填写或在列表视图页面上查看时）呈现字段以及字段值的类型包含。
2.  运行时 UI/呈现控件模板（可选） - 这是当您的字段在新/编辑项目页面上从用户那里收集新值时显示的 UI。
3.  字段值类（可选） - 这是您存储用户输入字段值的方式
4.  设计时 UI/编辑控件（可选）- 这是用户在将自定义字段添加到列表时将看到的 UI

这一切都在上面的链接中描述。有很多关于创建自定义字段的博客文章。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-08T23:09:20.193

正如其他答案所述，您应该为此功能创建一个[自定义字段。](http://msdn.microsoft.com/en-us/library/bb417414.aspx)但是，您不应自己实现浏览功能，而应查看 Microsoft.SharePoint.Publishing.WebControls 命名空间中的 AssetUrlSelector 控件（您可以使用[.NET Reflector](http://www.red-gate.com/products/reflector/)工具查看控件）。

在实现自定义字段时，您可以将 AssetUrlSelector 添加到自定义 UserControl 并使其在文件处于编辑模式时可见。下面显示了该方法的示例：

```
<%@ Control Language="C#" %>
<%@ Assembly Name="Microsoft.SharePoint, Version=12.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %>
<%@ Register Tagprefix="publishing" Namespace="Microsoft.SharePoint.Publishing.WebControls" Assembly="Microsoft.SharePoint.Publishing, Version=12.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %>

<SharePoint:RenderingTemplate ID="CustomFieldControl" runat="server">
  <Template>
    <publishing:AssetUrlSelector id="CustomUrlSelector" runat="server" />
  </Template>
</SharePoint:RenderingTemplate> 
```

上面的示例仅显示了如何将控件添加到自定义字段。确保在不处于编辑模式时隐藏 AssetUrlSelector 控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-26T10:38:56.240

我使用了 PublishingWebControls:AssetUrlSelector

# windows - 使用 Windows 脚本的带有自定义标头字段的 HTTP 请求

> ID：618453
> 
> 赞同：1
> 
> 时间：2009-03-06T11:02:42.983
> 
> 标签：windows, scripting, http-headers

是否可以使用 Windows Script Host 或任何其他 Windows 脚本技术执行带有特定标头字段（如“referer”、“cookies”或“User-Agent”）的 HTTP 请求？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T11:09:58.880

是（VBScript）：-

```
Dim oWinHTTP

Set oWinHTTP = CreateObject("WinHttp.WinHttpRequest.5.1")

oWinHTTP.Open "GET", "http://remoteserver/thing.ext", False
oWinHTTP.SetRequestHeader "User-Agent", "My Agent String"
oWinHTTP.Send 
```

使用 WinHttp 可以为您提供最高级别的控制，如果您想更有效地访问任何发送的 XML DOM，您可以使用 MSXML2.ServerXMLHTTP.3.0。使用标准的 MSXML2.XMLHTTP.3.0 组件通过 WinINet 为您提供用户代理设置和 cookie 存储等，但减少了您对对话的控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-13T10:42:34.553

我们可以使用 jsp / java设置请求标头，如**Cache-control : 'max-age =10000'吗？**实际上，只有当用户在指定的时间（例如 10 分钟）返回此页面时，我才希望在单击浏览器的后退按钮时查看带有旧数据的上一页。

谢谢，阿努拉格

# svn - 使用 svn move --force 会丢失更改信息吗？

> ID：618463
> 
> 赞同：4
> 
> 时间：2009-03-06T11:07:55.810
> 
> 标签：svn

svn move 允许移动文件，同时保留更改的可追溯性。现在我有以下情况：

1.  svn 复制 dir1/file1 dir1/file2
2.  修改 dir1/file1*和*dir1/file2
3.  svn 将 dir1/file1 移动到 dir2/file1

Subversion 告诉我它不会移动文件，除非我使用该`--force`选项，因为 dir1/file1 发生了变化。假设我进行了强制移动，这会对 file1 和/或 file2 更改的可追溯性产生什么影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-06T11:45:30.917

不，您不会丢失任何更改信息。但是 --force 选项会提醒您有本地修改并且可能不想移动该文件（还）。而且您以后不能在不丢失这些本地修改的情况下使用 'svn revert' 'revert' 移动。这就是为什么你必须使用--force。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T11:48:50.097

好吧，svn 抱怨 file1 和 file2 在将 file1 移动到 file2 之前没有提交。如果您强制并提交，您将对存储库中的 file1 进行更改，但对 file2 的本地更改会丢失。但是这应该不是问题，当您将 file1 移动到 file2 时，您确实希望覆盖 file2 的内容。

可追溯性是授予的，您松动的是对 file2 的本地更改。

# c# - 转换绑定列表 到 T 的数组

> ID：618466
> 
> 赞同：3
> 
> 时间：2009-03-06T11:10:02.497
> 
> 标签：c#, .net, generics, .net-3.0

`BindingList<T>`将 a 转换为 a的最简单方法是`T[]`什么？

编辑：我在这个项目上使用 3.0，所以没有 LINQ。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-06T11:12:20.073

好吧，如果您有 LINQ（C# 3.0 + .NET 3.5 或[LINQBridge](http://www.albahari.com/nutshell/linqbridge.aspx)），您可以使用`.ToArray()`- 否则，只需创建一个数组并复制数据。

```
T[] arr = new T[list.Count];
list.CopyTo(arr, 0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-06T11:12:02.760

在 .Net 2 中，您必须`.CopyTo()`在您的`BindingList<T>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T11:11:58.937

自从我注意到您用 .net2.0 标记此帖子后，我已更改此帖子。您可以使用 List 因为它有一个 ToArray() 方法。

```
public T[] ToArray<T>(BindingList<T> bindingList) {
    if (bindingList == null)
        return new T[0];

    var list = new List<T>(bindingList);
    return list.ToArray();
} 
```

注意：与其他成员展示的 CopyTo 解决方案相比，这确实是一个性能较低的解决方案。改用他们的解决方案，这个会创建两个数组，一个是结果数组，一个是 List 实例的内部数组。

# c++ - 使用 std::accumulate

> ID：618472
> 
> 赞同：7
> 
> 时间：2009-03-06T11:11:58.577
> 
> 标签：c++, stl

需要以下示例的更漂亮的解决方案，但使用 std::accumulate。

```
#include <algorithm>
#include <vector>
#include <iostream>

class Object
{
public:
    Object( double a, double b ):
        a_( a ),
        b_( b )
    {}

    double GetA() const { return a_; }
    double GetB() const { return b_; }
    // other methods
private:
    double a_;
    double b_;
};

class Calculator
{
public:
    Calculator( double& result ):
        result_( result )
    {}

    void operator() ( const Object& object )
    {
        // some formula
        result_ += object.GetA() * object.GetB();
    }
private:
    double& result_;
};

int main()
{
    std::vector< Object > collection;
    collection.push_back( Object( 1, 2 ) );
    collection.push_back( Object( 3, 4 ) );

    double result = 0.0;
    std::for_each( collection.begin(), collection.end(),
                   Calculator( result ) );

    std::cout << "result = " << result << std::endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-06T11:49:00.377

对计算器和主要功能进行更改。

```
struct Calculator
{
    double operator() ( double result, const Object& obj )
    {
        return result + ( obj.GetA() * obj.GetB());
    }

};

int main()
{
    std::vector< Object > collection;
    collection.push_back( Object( 1, 2 ) );
    collection.push_back( Object( 3, 4 ) );

    double result = std::accumulate( collection.begin(), collection.end(), 0, Calculator() );
    std::cout << "result = " << result << std::endl;

    return 0;
} 
```

也可以更好：

```
double sumABProduct( double result, const Object& obj )
{
    return result + ( obj.GetA() * obj.GetB());
}

double result = std::accumulate( collection.begin(), collection.end(), 0, sumABProduct ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-06T11:17:37.160

**更新 2：** Boost.Lambda 让这变得小菜一碟：

```
// headers
#include <boost/lambda/lambda.hpp>
#include <boost/lambda/bind.hpp>
using namespace boost::lambda;
// ...
cout << accumulate(dv.begin(), dv.end(), 
                   0, 
                   _1 += bind(&strange::value, _2)) //strange defined below
     << endl; 
```

**更新：**这一直困扰着我一段时间。我不能让任何 STL 算法以体面的方式工作。所以，我推出了自己的：

```
// include whatever ...
using namespace std;

// custom accumulator that computes a result of the 
// form: result += object.method();
// all other members same as that of std::accumulate
template <class I, class V, class Fn1, class Fn2>
V accumulate2(I first, I last, V val, Fn1 op, Fn2 memfn) {
    for (; first != last; ++first)
        val = op(val, memfn(*first));
    return val;
}

struct strange {
    strange(int a, int b) : _a(a), _b(b) {}
    int value() { return _a + 10 * _b; }
    int _a, _b;
};

int main() {
    std::vector<strange> dv;
    dv.push_back(strange(1, 3));
    dv.push_back(strange(4, 6));
    dv.push_back(strange(20, -11));        
    cout << accumulate2(dv.begin(), dv.end(), 
                        0, std::plus<int>(), 
                        mem_fun_ref(&strange::value)) << endl;
} 
```

当然，最初的解决方案仍然成立：最简单的方法是实现一个`operator+`. 在这种情况下：

```
double operator+(double v, Object const& x) {
        return v + x.a_;
} 
```

并使其成为朋友`Object`或成员（查看为什么您可能更喜欢其中一个）：

```
class Object
{
   //...
  friend double operator+(double v, Object const& x); 
```

你完成了：

```
 result = accumulate(collection.begin(), collection.end(), 0.0); 
```

我之前的方法不起作用，因为我们需要一个`binary_function`.

[std::accumulate](http://www.sgi.com/tech/stl/accumulate.html)手册。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-03-10T00:47:24.570

这里是一个问题，我猜参数写错了应该是：

```
result = std::accumulate(collection.begin(), collection.end(), Object(0),Adapt())
where Adapt is defined thus:

struct Adapt { 
    static double mul(Object const &x) { return x.GetA() * x.GetB(); }
    static Object operator()(Object const &x, Object const &y) { 
       return Object(mul(x)+mul(y)) ; } }; 
```

在这种累积的情况下，结果包含在返回的对象中。

如果您使用 gnu 并行模式，如果结果和迭代器引用的实际对象不同，仿函数会给您带来问题。

```
struct Adapt { 
        static double mul(Object const &x) { return x.GetA() * x.GetB(); }
        static double operator()(Object const &x, Object const &y) { 
           return mul(x)+mul(y) ; } };
result = std::accumulate(collection.begin(), collection.end(), 0.0,Adapt()) 
```

由于某些奇怪和愚蠢的原因，无法使用 gnu 并行模式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-29T15:33:54.023

使用 c++0x：

```
#include <numeric>
#include <vector>
#include <iostream>

class Object
{
  public:
     Object( double a, double b ):
        a_( a ),
        b_( b )
      {}

    double GetA() const { return a_; }
    double GetB() const { return b_; }
    // other methods
  private:
    double a_;
    double b_;
};

int main()
{
    std::vector< Object > collection;
    collection.push_back( Object( 1, 2 ) );
    collection.push_back( Object( 3, 4 ) );
    double result = std::accumulate( collection.begin(), collection.end(), 0,
                                     [] (double result, const Object& obj) 
                                     {
                                       return result + obj.GetA() * obj.GetB();
                                     }
                                   ); 

   std::cout << "result = " << result << std::endl;

   return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-07T23:46:47.397

希望这是家庭作业...

```
struct Adapt { 
    static double mul(Object const &x) { return x.GetA() * x.GetB(); }
    static double operator()(Object const &x, Object const &y) { 
       return mul(x)+mul(y); } }; 
```

和

```
result = std::accumulate(collection.begin(), collection.end(), Object(0,0),Adapt() ); 
```

假设您不允许触摸 Object 的声明。

# .net - 日期文化格式问题

> ID：618480
> 
> 赞同：0
> 
> 时间：2009-03-06T11:12:25.877
> 
> 标签：.net, datetime

我在处理日期时遇到了问题。我需要一个具有“dd-MM-yyyy”格式的 DateTime 实例。我不要求在“dd-MM-yyyy”中有我的日期实例的字符串，我知道。

我需要通过实体框架播种我的日期对象，该框架调用一个存储过程，该过程接收一个参数，它是一个日期......

我总是可以更改我的存储过程以接收 Varchar 而不是 Date，但我想要类型安全。

以下代码可以帮助您理解问题：

```
Dim s1 As String = CurrentUICulture.ToString() 'pt-PT
Dim s2 As String = CurrentCulture.ToString()'pt-PT
Dim odate As Date = DateTime.ParseExact(sdate, CurrentUICulture.DateTimeFormat.ShortDatePattern, CurrentUICulture) 'sdate = 19/03/2009
'CurrentUICulture = pt-PT - ShortDatePattern = "dd-MM-yyyy"
'odate is 03/19/2009 !!!

Convert.ToDateTime(sdate, CurrentUICulture)
'its the same! 
```

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T11:19:35.440

DateTimes 没有格式。它们也不是实例，因为 DateTime 是一种值类型。

在我看来，您认为 DateTime 的“格式不正确”（您声称它是 03/19/2009）。你是如何检查日期的值的？通过将其打印为 odate.ToString()，或在调试器窗口中检查其值？尝试使用以下命令打印出来：

```
Debug.Print odate.ToString(_
   Globalization.CultureInfo.CurrentUICulture.DateTimeFormat.ShortDatePattern, _
   Globalization.CultureInfo.CurrentUICulture) 
```

odate 只是一个 DateTime - 它包含自很久以前的某个日期以来的秒数（我现在不想记住这一点）。它没有格式化信息，因此将在输出时格式化。

日期为 2009 年 3 月 19 日这一事实意味着您的解析已成功。03/19/2009 只是 2009 年 3 月 19 日（19 月 3 日不是有效日期）。所以停止担心并继续前进;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T20:18:54.083

每当处理日期和 SQL Server（我假设您也在这里）时，我建议使用 ISO-8601 格式 - 无论您的语言、文化或其他设置如何，它都应该可以工作。

ISO-8601 将日期格式定义为：YYYY-MM-DD（带或不带破折号；YYYYMMDD 也是可以接受的）。

这行得通吗？

```
Dim oDate as Date = DateTime.Parse("2009-03-06") 
```

日期为 2009 年 3 月 6 日。

另见： [http ://www.w3.org/TR/NOTE-datetime](http://www.w3.org/TR/NOTE-datetime)

和：[http ://www.cl.cam.ac.uk/~mgk25/iso-time.html](http://www.cl.cam.ac.uk/~mgk25/iso-time.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-11T12:14:22.800

问题解决了……因为，一开始就没有问题！

问题是我正在使用一个类似这样的函数

```
GetFormatedDate(ByVal sdate As String) As Date 
```

并且...如果 sdate 什么都不是（或 null），当它到达 SQL 存储过程时，我的日期无效。

`ValueTypes`don't have nothing 有任何价值......但可以这样做：

```
GetFormatedDate(ByVal sdate As String) As Global.System.Nullable(Of Date) 
```

这样我就不再得到无效的参数异常。

是的！

# windows - Windows 上的 MonoDevelop

> ID：618483
> 
> 赞同：8
> 
> 时间：2009-03-06T11:15:45.107
> 
> 标签：windows, monodevelop

我的 google-fu 让我失望了 - MonoDevelop 可以在 Windows 上使用吗？最好不必从源代码编译？

它在我家的 Ubuntu 机器上运行良好，虽然我有 Visual Studio 在工作，但似乎也有 MonoDevelop 的一些优势。

编辑：我知道 SharpDevelop；如果可能的话，我更喜欢 MonoDevelop，因为我已经开始熟悉界面，而且我相信 SharpDevelop 和 MonoDevelop 不再那么密切相关了。

* * *

呜呼！[MonoDevelop for Windows 是受支持的下载。](http://monodevelop.com/Download)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-06T11:44:10.013

似乎[Windows 上的 MonoDevelop 仍然存在许多突出问题](http://mjhutchinson.com/journal/2009/02/07/monodevelop_vista64)，即使是从源代码构建的（并且只能在 .NET 上构建，而不是在 Mono 上构建）。所以显然也没有安装程序。

我的问题的答案是**不，Windows 上的 MonoDevelop 还没有准备好正常使用**。

我想我会在 Windows 上使用 Visual Studio 和 SharpDevelop 并耐心等待（或者甚至看看突出的错误......！）

* * *

更新：[Windows 的 MonoDevelop 现在有一个预览安装程序](http://foodformonkeys.blogspot.com/2009/06/monodevelop-installer-for-windows.html)，可以在[这里下载](http://monodevelop.com/Download/Windows_Preview)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-09-09T19:34:33.577

MonoDevelop 从 2.2 版开始正式支持 Windows：

> 视窗支持
> 
> 现在正式支持 Windows
> 
> Windows 现在是官方支持的运行 MonoDevelop 的平台。许多 Windows 特定问题已得到修复，并且一些加载项（如调试和颠覆支持）已专门为 Windows 编写。
> 
> Windows 安装程序
> 
> 我们正在发布一个新的 Windows 安装程序，其中包含运行 MonoDevelop 所需的几乎所有内容。唯一的外部依赖项是 gtk#，它在单独的安装程序中提供。

您可以[下载最新的稳定版本](http://monodevelop.com/Download)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-06T11:17:09.923

尝试[SharpDevelop](http://www.icsharpcode.net/OpenSource/SD/)。MonoDevelop 建立在 SharpDevelop 的代码库之上。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-07T11:28:12.637

[最近](http://foodformonkeys.blogspot.com/2009/05/monodevelop-on-windows.html)有一篇关于 Windows 上的 MonoDevelop 的博客文章。现在可能是尝试一下的时候了。

**更新：** MonoDevelop 刚刚为 Windows 和 Mac 发布。更多来自[Miguel 的博客](http://tirania.org/blog/archive/2009/Jun-04.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-06T11:28:44.183

这是可能的，但并不容易。肯定没有安装程序。

这几乎是让它工作的唯一指南：http: [//lists.ximian.com/pipermail/monodevelop-list/2006-September/004442.html](http://lists.ximian.com/pipermail/monodevelop-list/2006-September/004442.html)

# php - 对 MYSQL 数据库实施版本控制的最佳方法是什么？

> ID：618490
> 
> 赞同：1
> 
> 时间：2009-03-06T11:17:14.290
> 
> 标签：php, mysql, version-control

我必须制作一个版本控制系统来将我的文章的多个版本存储在数据库中，以允许用户在需要时回滚。我的第一个想法是当用户真的想编辑一篇文章时，我让 sql 不再更新，但你将他们的信息插入回数据库。目前的问题是我有一个文章表，我使用 ID 作为我的主键来识别我的文章（所以阅读更多链接等等）。如果我插入到该表中，我将有基本的新文章，所以我想我需要一个新表来存放旧文章，但是我在第一个表 dbArticles 中遇到了原件的问题，我还需要为什么要告诉他们是哪篇文章已经选择，例如，如果他们有 3 次编辑，那么 3 篇文章让所有文章都在 5 月 1 日的不同日子完成，2 日和 3 日我需要如何证明他们选择了 5 月 2 日的版本，而不是 5 月 3 日的最新版本。任何帮助都会非常感谢，

酷手卢克英国

Ps 我也在使用 PHP，我正在为文章添加时间戳：D。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-06T11:23:25.383

有2张桌子：

*   文章：在这里您存储文章 ID、文章名称和任何其他元数据
*   article_version：在这里您存储文章的每个版本（包括原始版本）并与 article_version.article_id=article.article_id 链接。请务必在此表中添加时间戳和版本等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T11:26:41.973

如果您要对文本文章进行版本控制，则应考虑使用 wiki，例如[MediaWiki](http://www.mediawiki.org/wiki/MediaWiki)。他们可能已经为您解决了问题。

# compiler-construction - 你能找出哪个编译器被用来编译一个程序吗？

> ID：618491
> 
> 赞同：19
> 
> 时间：2009-03-06T11:17:35.600
> 
> 标签：compiler-construction, identification

给定一个从 C 编译以在 Solaris 上运行的可执行文件，是否可以确定使用哪个编译器来编译相关的不完整的可执行文件？

使用字符串或文件命令时，我什么都看不到，而且魔法似乎不包含任何特定内容。

编译器通常会在其可执行输出文件中添加指纹吗？

干杯，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-06T11:20:29.010

是的，IDA 非常适合这个。它使用一种称为[FLIRT](http://www.hex-rays.com/idapro/flirt.htm)的技术。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-06T11:29:59.097

[PEID](http://www.peid.info/)可以解决问题。它通常工作得很好。显然，PEID 是一个 Windows 工具，但它不重要，应该向编译器展示（有时甚至是特定的版本信息）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-01-11T00:53:19.780

如果可执行文件没有被剥离，试试 /usr/ccs/bin mcs -p 这通常会显示编译器、链接器和所有使用的头文件

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-09T23:11:48.993

使用您尝试识别的每个编译器构建小型测试应用程序。然后在十六进制编辑器中查看结果，并尝试查找模式。结果可能非常明显——例如来自微软链接器的[“Rich”签名。](http://www.ntcore.com/Files/richsign.htm)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-05T19:44:24.917

未剥离：

$ cc -O hello.c

$文件a.out

a.out：ELF 32 位 MSB 可执行 SPARC32PLUS 版本 1，V8+ 必需，动态链接，未剥离

$ 字符串-a a.out | grep 抄送

/opt/solarisstudio12.3/prod/bin/cc -O hello.c

$ dwarfdump -i a.out | grep compile_o

DW_AT_SUN_compile_options Xa;O;R= **Sun C 5.12 SunOS_sparc 补丁 148917-07** 2013/10/18;backend;raw;cd;

剥离：

$ 剥离 a.out

$文件a.out

a.out：ELF 32 位 MSB 可执行 SPARC32PLUS 版本 1，V8+ 必需，动态链接，剥离

$ 字符串-a a.out | grep 抄送

（没有任何）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-06T11:24:54.287

Visual Studio 和 GCC 通常遵循不同的启动例程（调用 main）。这也许是一个暗示。虽然我不知道其他人。对于 dll，我想不出类似的东西。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-09T23:14:49.330

编译器通常将自己的个人“签名”作为明文添加到编译文件中。您可以使用诸如字符串之类的工具来提取明文。

# language-agnostic - 确定Vista中本地Administrators组的名称

> ID：618496
> 
> 赞同：1
> 
> 时间：2009-03-06T11:18:33.490
> 
> 标签：language-agnostic, windows-vista

如何确定 Vista 中本地管理员组的名称？这可能因操作系统语言而异。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-06T11:24:58.937

通过众所周知的 SID 进行查找。

在 .NET 中，您可以使用枚举值：`System.Security.Principal.BuiltinAdministratorsSid`

在 Win32 中，您可以使用枚举值：有关详细信息`WELL_KNOWN_SID_TYPE.WinBuiltinAdministratorsSid`，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/aa379649(VS.85).aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-06T11:32:37.403

按照 Richard 的建议，使用众所周知的 sid 来查找该组。

```
var adminGroupSid = new SecurityIdentifier("S-1-5-32-544");
var adminGroup = (NTAccount)adminGroupSid.Translate(typeof(NTAccount));
var adminGroupName = adminGroup.Value; 
```

# html - IE7 默认元素为 100% 宽度

> ID：618507
> 
> 赞同：0
> 
> 时间：2009-03-06T11:21:52.923
> 
> 标签：html, css, internet-explorer-7

我正在处理的 Web 应用程序遇到了一个非常令人沮丧的问题（我最初并没有编写它）。它使用框架进行布局足够可怕。我遇到的问题是所有通过 CSS 设置背景颜色和边框的元素默认为 100% 宽度。我刚刚测试了 div 元素、段落元素等。

我完全删除了样式表，然后对其进行了测试，我遇到了同样的问题，所以不是样式表导致了问题。

我写了一个快速测试以确保它没有冲突的代码，并使用了与我们相同的 doctype 和 xmlns - 我遇到了同样的问题。这是示例代码。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<style type="text/css">
    #test {
        border:1px solid #ccc;
        background-color:#ddd;
    }
</style>
</head>
<body>
    <div id="test">
        Test information!
    </div>
</body>
</html> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-06T11:23:50.233

我认为这是 HTML/CSS 所要求的。除非有东西阻止它们，否则块元素会扩展整个宽度。

（FF 具有相同的行为。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-06T11:38:19.450

It's not because the element has a background or a border that it expands to the full with of the parent, it's because it's a block element. The background or border just makes you see how large the element really is.

The default width is actually not "100%", but "auto". The practical difference is that the element including borders uses 100% of the width, instead of the width excluding the borders becoming 100% of the width (making the width including borders wider than it's parent).

If you don't want the element to use the available width you can make it a floating element. Then it will adjust itself to it's content.

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Test</title>
    <style type="text/css">
    #test1 {
        float: left;
        border:1px solid #ccc;
        background-color: #ddd;
    }
    #test2 {
        float: left;
        clear: both;
        border:1px solid #000;
        background-color: #ccf;
    }
    </style>
</head>
<body>
    <div id="test1">
        Test information!
    </div>
    <div id="test2">
        Test information!
    </div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-06T11:31:31.883

As Richard and BeefTurkey say, divs are block elements and will fill the width of the browser.

You can either use an inline element, such as a span

```
<span id="test">
    Test information!
</span> 
```

or add some style to your div to force it to be inline

```
div#test { display: inline; } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-06T11:26:09.777

Don't divs default to 100% (of parents size) because they're blocks? You could always try changing display to inline: #test {display:inline;}

# wiki - 将 Wiki 内容转化为系统手册的工作流程

> ID：618508
> 
> 赞同：4
> 
> 时间：2009-03-06T11:21:58.960
> 
> 标签：wiki, manuals

我们正在为许多地方的许多用户（8 个国家/地区的 200 多个用户）部署一个新的软件系统。过去我们为用户编写了手册，然后每隔一段时间进行更新。这行得通，因为所有用户都拥有相同的手册，它涵盖了主要内容，但它也有问题，比如它不会经常更新，我们有时会错过更新，并且一些用户会有旧副本。

我们一直在讨论在测试和部署阶段使用 wiki 来构建有关系统的知识库。理想情况下，我们希望通过某种方式将其转换为某种形式的电子文档，然后我们可以“漂亮”并作为官方手册发送出去，并让用户使用和更新 wiki。

有没有其他人做过类似的事情？对 wiki 系统、工作流程、文档格式等有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-06T11:27:22.923

大多数 wiki 支持通过 PDF 导出，例如：

*   [MediaWiki PDF 导出](http://www.mediawiki.org/wiki/Extension:Pdf_Export)
*   [DokuWiki PDF 导出](http://www.dokuwiki.org/plugin:html2pdf)
*   [TWiki PDF 导出](http://www.wikimatrix.org/wiki/TWiki:PDF%20Export)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T11:29:07.257

您可以编写一些东西，从 wiki 生成[LaTeX](http://www.ctan.org)并将手册呈现为 PDF。使用[hyperref](http://www.tug.org/applications/hyperref/)之类的包，您可以将交叉引用保留为超链接。

此外，您可以将来自多个来源的内容（例如数据字典）集成到 LaTeX 文档中，该文档可以与 wiki 内容混合和匹配。您还可以设置体系结构，以便它可以支持任何一种方式的交叉引用。

[Framemaker](http://www.adobe.com/uk/products/framemaker/?sdid=EGQWM)还可以使用生成的[MIF](http://help.adobe.com/en_US/FrameMaker/9.0/MIF_Reference/MIF_Reference.pdf)文件来支持这一点，您也可以以类似的方式使用[Lout或将您的 wiki 内容转换为](http://lout.wiki.sourceforge.net/)[docbook，](http://www.docbook.org/)这将允许您使用该格式可用的许多渲染选项中的任何一个。

顺便说一句，以下 Stackoverflow 帖子讨论了用于维护文档的各种系统。

*   [用于制作用户手册的应用程序（不是标记语言）](https://stackoverflow.com/questions/371654/application-not-a-markup-language-for-producing-a-user-manual)

*   [LaTeX 可以用于生成软件附带的任何文档吗？](https://stackoverflow.com/questions/501241/can-latex-be-used-for-producing-any-documentation-that-accompanies-software)

*   [使用什么工具来编写文档？](https://stackoverflow.com/questions/12537/what-tools-are-used-to-write-documentation)

*   [您的团队使用什么工具来编写用户手册？](https://stackoverflow.com/questions/314117/what-tools-does-your-team-use-for-writing-user-manuals)

*   [如何最好地编写针对网络（html）和纸质（pdf）的文档（最好是乳胶）？](https://stackoverflow.com/questions/409717/how-best-to-write-documentation-ideally-in-latex-targeting-both-the-web-html)

*   [处理 DocBook XML 文档的最佳工具？](https://stackoverflow.com/questions/55622/best-tools-for-working-with-docbook-xml-documents)

*   [用于格式化 XML DocBook 的推荐工具链是什么？](https://stackoverflow.com/questions/122752/what-is-the-recommended-toolchain-for-formatting-xml-docbook)

*   [TeX/LaTeX 的继任者在望吗？](https://stackoverflow.com/questions/303877/is-a-successor-for-tex-latex-in-sight)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T12:46:17.353

[Madcap Flare](http://www.madcapsoftware.com/products/flare/)是一个帮助和手动创作工具，它使用 HTML 作为每个主题的来源。您可以很容易地大量导入 Wiki 页面。然后需要进行一些清理，但之后您就有了一个不错的单源系统，可以输出 CHM、Web 可浏览帮助、PDF、DOC/DOCX 等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-06T11:27:51.580

您目前如何存储帮助源？是 MS Word 文件、MS 帮助、LaTeX 吗？

如果您将帮助源文件置于版本控制之下，那么您将获得 wiki 的所有好处，而无需迁移到新系统 - 人们可以轻松地对帮助文件进行编辑 - 这些更改可以被跟踪、恢复等，而您像以前一样获得美化手册。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-06T11:59:20.010

我关注了 Node 的链接，发现了一些我认为值得注意的 mediawiki 页面。

*   [扩展：OpenDocument 导出](http://www.mediawiki.org/wiki/Extension:OpenDocument_Export)
*   [扩展：PDF Writer](http://www.mediawiki.org/wiki/Extension:PDF_Writer)
*   [类别：数据提取扩展](http://www.mediawiki.org/wiki/Category:Data_extraction_extensions)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-09T01:43:29.650

我给出了一个可能对“wiki 到 PDF”部分有用的[答案](https://stackoverflow.com/questions/447216/web-pages-to-print-media-solutions/618009#618009)——看看使用开源 PediaPress 代码或功能。您也可以从中获取 ODF，尽管它们的 PDF 已经非常漂亮（但我想您可能想要重新命名它并为您的公司重新设计它）。

# c++ - 在 C++ 中创建矩阵的正确方法

> ID：618511
> 
> 赞同：30
> 
> 时间：2009-03-06T11:23:43.930
> 
> 标签：c++, data-structures, stl, graph, matrix

我想为图创建一个邻接矩阵。因为我读到使用表单的数组是不安全的，`matrix[x][y]`因为它们不检查范围，所以我决定使用 stl 的向量模板类。我需要在矩阵中存储的只是布尔值。所以我的问题是，如果使用`std::vector<std::vector<bool>* >*`会产生过多的开销，或者是否有更简单的矩阵方法以及如何正确初始化它。

编辑：非常感谢您的快速回答。我刚刚意识到，我当然不需要任何指针。矩阵的大小将在开始时初始化，直到程序结束才会改变。这是一个学校项目，所以如果我写“好”的代码会很好，尽管技术上的性能并不是太重要。使用 STL 很好。使用诸如 boost 之类的东西可能不受欢迎。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-03-06T11:34:48.570

请注意，您还可以使用[boost.ublas](http://www.boost.org/doc/libs/1_38_0/libs/numeric/ublas/doc/index.htm)进行矩阵创建和操作，还可以使用[boost.graph](http://www.boost.org/doc/libs/1_38_0/libs/graph/doc/index.html)以多种方式表示和操作图形，以及在它们上使用算法等。

*编辑*：无论如何，为您的目的做一个向量的范围检查版本并不是一件难事：

```
template <typename T>
class BoundsMatrix
{
        std::vector<T> inner_;
        unsigned int dimx_, dimy_;

public:
        BoundsMatrix (unsigned int dimx, unsigned int dimy)
                : dimx_ (dimx), dimy_ (dimy)
        {
                inner_.resize (dimx_*dimy_);
        }

        T& operator()(unsigned int x, unsigned int y)
        {
                if (x >= dimx_ || y>= dimy_)
                        throw std::out_of_range("matrix indices out of range"); // ouch
                return inner_[dimx_*y + x];
        }
}; 
```

请注意，您还需要添加 const 版本的运算符和/或迭代器，以及异常的奇怪用法，但您明白了。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-03-06T11:55:31.670

最好的办法：

制作你自己的矩阵类，这样你就可以控制它的每一个方面，包括范围检查。

例如。如果您喜欢“[x][y]”表示法，请执行以下操作：

```
class my_matrix {
  std::vector<std::vector<bool> >m;
public:
  my_matrix(unsigned int x, unsigned int y) {
    m.resize(x, std::vector<bool>(y,false));
  }
  class matrix_row {
    std::vector<bool>& row;
  public:
    matrix_row(std::vector<bool>& r) : row(r) {
    }
    bool& operator[](unsigned int y) {
      return row.at(y);
    }
  };
  matrix_row& operator[](unsigned int x) {
    return matrix_row(m.at(x));
  }
};
// Example usage
my_matrix mm(100,100);
mm[10][10] = true; 
```

注意。如果您像这样编程，那么 C++ 与所有其他“安全”语言一样安全。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-03-06T12:40:53.480

默认情况下，标准向量不进行范围检查。

即 operator[] 不做范围检查。

at() 方法与 [] 类似，但会进行范围检查。
它会在超出范围时抛出异常。

[std::vector::at()](http://www.cppreference.com/wiki/stl/vector/at)
[std::vector::operator[]()](http://www.cppreference.com/wiki/stl/vector/vector_operators)

其他说明：为什么是 vector<Pointers> ？
你可以很容易地拥有一个vector<Object>。现在无需担心内存管理（即泄漏）。

```
std::vector<std::vector<bool> >   m; 
```

注意：vector<bool> 被重载并且效率不高（即这个结构针对大小而不是速度进行了优化）（现在标准委员会认为这可能是一个错误）。

如果您在编译时知道矩阵的大小，您可以使用 std::bitset?

```
std::vector<std::bitset<5> >    m; 
```

或者如果它是运行时定义的使用 boost::dynamic_bitset

```
std::vector<boost::dynamic_bitset>  m; 
```

以上所有内容将允许您执行以下操作：

```
m[6][3] = true; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-06T13:51:55.293

如果您想要“C”数组性能，但要增加安全性和类似 STL 的语义（迭代器等`begin()`）`end()`，请使用[`boost::array`](http://www.boost.org/doc/libs/1_38_0/doc/html/array.html).

基本上，它是“C”数组的模板化包装器，带有一些`NDEBUG`可禁用的范围检查断言（以及一些`std::range_error`抛出异常的访问器）。

我使用类似的东西

```
boost::array<boost::array<float,4>,4> m; 
```

代替

```
float m[4][4]; 
```

一直都很好，而且效果很好（无论如何，使用适当的 typedef 来降低冗长）。

* * *

**更新：**`boost::array`在此处对vs的相对性能的评论中进行了一些讨论后`boost::multi_array`，我要指出，`g++ -O3 -DNDEBUG`在 Debian/Lenny amd64 上编译的这段代码，在 1333MHz DDR3 RAM 的 Q9450 上需要 3.3 秒，`boost::multi_array`而`boost::array`.

```
#include <iostream>
#include <time.h>
#include "boost/array.hpp"
#include "boost/multi_array.hpp"

using namespace boost;

enum {N=1024};

typedef multi_array<char,3> M;
typedef array<array<array<char,N>,N>,N> C;

// Forward declare to avoid being optimised away
static void clear(M& m);
static void clear(C& c);

int main(int,char**)
{
  const clock_t t0=clock();

  {
    M m(extents[N][N][N]);
    clear(m);
  }

  const clock_t t1=clock();

  {
    std::auto_ptr<C> c(new C);
    clear(*c);
  }

  const clock_t t2=clock();

  std::cout 
    << "multi_array: " << (t1-t0)/static_cast<float>(CLOCKS_PER_SEC) << "s\n"
    << "array      : " << (t2-t1)/static_cast<float>(CLOCKS_PER_SEC) << "s\n";

  return 0;
}

void clear(M& m)
{
  for (M::index i=0;i<N;i++)
    for (M::index j=0;j<N;j++)
      for (M::index k=0;k<N;k++)
    m[i][j][k]=1;
}

void clear(C& c)
{
  for (int i=0;i<N;i++)
    for (int j=0;j<N;j++)
      for (int k=0;k<N;k++)
    c[i][j][k]=1;
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-03-06T11:41:47.413

我要做的是创建自己的类来处理矩阵（可能是数组 [x*y]，因为我更习惯于 C 语言（并且我会进行自己的边界检查），但是您可以使用向量或任何该类中的其他子结构）。

先让你的东西发挥作用，然后再担心它的运行速度。如果你正确地设计了这个类，你可以取出你的 array[x*y] 实现并将其替换为向量或位掩码或任何你想要的东西，而无需更改其余代码。

我不完全确定，但我认为这就是类的意义所在，能够很好地抽象实现并且只提供接口:-)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-03-06T12:16:52.213

除了到目前为止已发布的所有答案之外，您最好查看[C++ FAQ Lite](http://www.parashift.com/c++-faq-lite/index.html)。问题[13.10 - 13.12](http://www.parashift.com/c++-faq-lite/operator-overloading.html#faq-13.10)和[16.16 - 16.19](http://www.parashift.com/c++-faq-lite/freestore-mgmt.html#faq-16.16)涵盖了与滚动您自己的矩阵类相关的几个主题。您将看到几种不同的存储数据的方法以及如何最好地编写下标运算符的建议。

此外，如果您的图形足够稀疏，您可能根本不需要矩阵。您可以使用`std::multimap`将每个顶点映射到它连接的顶点。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-02-15T16:29:56.557

我最喜欢的存储图表的方式是`vector<set<int>>`；向量中的 n 个元素（节点 0..n-1），>=0 每个集合中的元素（边）。只是不要忘记添加每个双向边缘的反向副本。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-06T11:32:39.450

还要考虑你的图/矩阵有多大，性能很重要吗？图是静态的，还是可以随着时间的推移而增长，例如通过添加新边？

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-06T11:37:47.500

请注意，您`std::vector`也不进行范围检查。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-11-01T09:47:35.683

可能不相关，因为这是一个老问题，但您可以使用[Armadillo](http://arma.sourceforge.net "犰狳")库，它提供了许多面向线性代数的数据类型和函数。

以下是针对您的特定问题的示例：

```
// In C++11
Mat<bool> matrix = {  
    { true, true},
    { false, false},
};

// In C++98
Mat<bool> matrix;
matrix << true << true << endr
       << false << false << endr; 
```

# php - SQL like 语句问题

> ID：618527
> 
> 赞同：1
> 
> 时间：2009-03-06T11:29:00.533
> 
> 标签：php, sql, mysql, mysqli

我在通过 mysqli 执行准备好的语句时遇到问题。

首先，我遇到了 Command 不同步错误。我正在存储结果并关闭连接，并且我已经停止收到此错误，所以希望问题已经停止。

但是，当命令不同步时，我的 sql 语法错误中的错误再次出现。这是我当前的代码：

我尝试了许多不同的方法来纠正这个 snytax 错误，从使用 CONCAT，它在失败时被注释掉，从在绑定之前将 % 符号分配给变量等等。没有任何效果。

尝试使用：

```
$numRecords->bind_param("s",  "%".$brand."%"); 
```

通过引用传递会导致错误。

```
<?php
$con = mysqli_connect("localhost", "blah", "blah", "blah");
if (!$con) {
    echo "Can't connect to MySQL Server. Errorcode: %s\n". mysqli_connect_error();
    exit;
}
$con->query("SET NAMES 'utf8'");
$brand = "o";
$brand = "% ".$brand." %";
echo "\n".$brand;
$countQuery = "SELECT ARTICLE_NO FROM AUCTIONS WHERE upper(ARTICLE_NAME) LIKE ?";
//CONCAT('%', ?, '%')";
echo "\ntest";
if ($numRecords = $con->prepare($countQuery)) {
    $numRecords->bind_param("s",  $brand);
    echo "\ntest bind";
    $numRecords->execute();
    echo "\ntest exec";
    $numRecords->store_result();
    $data = $con->query($countQuery) or die(print_r($con->error));
    $rowcount = $data->num_rows;
    $numRecords->free_result();
    $numRecords->close();
    echo "/ntest before rows";
    $rows = getRowsByArticleSearch("test", "Auctions", " ");
    $last = ceil($rowcount/$page_rows);
} else {
    print_r($con->error);
}
foreach ($rows as $row) {
    $pk = $row['ARTICLE_NO'];
    echo '<tr>' . "\n";
    echo '<td><a href="#" onclick="updateByPk(\'Layer2\', \'' . $pk . '\')">'.$row['USERNAME'].'</a></td>' . "\n";
    echo '<td><a href="#" onclick="updateByPk(\'Layer2\', \'' . $pk . '\')">'.$row['shortDate'].'</a></td>' . "\n";
    echo '<td><a href="#" onclick="deleterec(\'Layer2\', \'' . $pk . '\')">DELETE RECORD</a></td>' . "\n";
    echo '</tr>' . "\n";
}
function getRowsByArticleSearch($searchString, $table, $max) {
    $con = mysqli_connect("localhost", "blah", "blah", "blah");
    //global $con;
    $recordsQuery = "SELECT ARTICLE_NO, USERNAME, ACCESSSTARTS, ARTICLE_NAME, date_format(str_to_date(ACCESSSTARTS, '%d/%m/%Y %k:%i:%s'), '%d %m %Y' ) AS shortDate FROM $table WHERE upper(ARTICLE_NAME) LIKE '%?%' ORDER BY str_to_date(ACCESSSTARTS, '%d/%m/%Y %k:%i:%s')" . $max;
    if ($getRecords = $con->prepare($recordsQuery)) {
        $getRecords->bind_param("s", $searchString);
        $getRecords->execute();
        $getRecords->bind_result($ARTICLE_NO, $USERNAME, $ACCESSSTARTS, $ARTICLE_NAME, $shortDate);
        while ($getRecords->fetch()) {
            $result = $con->query($recordsQuery);
            $rows = array();
            while($row = $result->fetch_assoc()) {
                $rows[] = $row;
            }
            return $rows;
        }
    }
} 
```

确切的错误是：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '?' at line 11 
```

第 11 行是定义 $countQuery 的行。

如您所见，品牌被称为“o”；

所以SQL语句应该是

```
SELECT ARTICLE_NO FROM AUCTIONS WHERE upper(ARTICLE_NAME) LIKE %o%; 
```

当我手动放入时效果很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-06T12:08:15.727

[`mysqli_stmt::bind_param`](http://php.net/mysqli_stmt.bind_param)只能绑定特定的变量，不能绑定表达式。提供的变量通过引用而不是值传递给“绑定”，这意味着底层 SQL 在执行命令时获取该变量具有的任何值，而不是在绑定时。

采用：

```
WHERE field LIKE CONCAT('%', ?, '%") 
```

或者做：

```
$brand = '%' . $brand . '%' 
```

在命令执行之前。

你不能做的是：

```
WHERE field LIKE '%?% 
```

因为`?`绑定变量必须对应于单个字符串或数值，而不是子字符串（或字段名称）。

**编辑**在这种情况下，您的真正问题似乎是将准备好的语句（由[`mysqli::prepare`](http://php.net/mysqli.prepare)and支持[`mysqli_stmt::execute()`](http://php.net/mysqli_stmt.execute)）与普通的旧查询（如用 完成[`mysqli::query()`](http://php.net/mysqli.query)）混合在一起。您还应该直接从数据库服务器询问行数，而不是提取数据并使用 num_rows：

```
$countQuery = "SELECT COUNT(ARTICLE_NO) FROM AUCTIONS WHERE upper(ARTICLE_NAME) LIKE ?";
if ($numRecords = $con->prepare($countQuery)) {
    $numRecords->bind_param("s",  $brand);
    $numRecords->execute();
    $numRecords->bind_result($num_rows);
    $numRecords->fetch();
    $numRecords->free_result();
    $numRecords->close();
    $last = ceil($rowcount/$page_rows);
} else {
    print_r($con->error);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T11:52:48.557

[mysql.com](http://mysql.com)上的这篇文章似乎表明`CONCAT()`应该有效： http://forums.mysql.com/read.php?98,111039,111060#msg- [111060](http://forums.mysql.com/read.php?98,111039,111060#msg-111060)

您是否尝试过使用命名参数？

您尝试致电：

```
$numRecords->bind_param("s", "%".$brand."%"); 
```

但是你的sql是：

```
$countQuery = "SELECT ARTICLE_NO FROM AUCTIONS WHERE upper(ARTICLE_NAME) LIKE ?"; 
```

不应该吗？（注意`LIKE ?s`）

```
$countQuery = "SELECT ARTICLE_NO FROM AUCTIONS WHERE upper(ARTICLE_NAME) LIKE ?s"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-06T13:04:38.620

问题不在于准备好的语句，而在于对不应该存在的“查询”方法的调用 - 因为它用于执行“标准”（未准备好的）语句。

```
$data = $con->query($countQuery) or die(print_r($con->error));
$rowcount = $data->num_rows; 
```

应该

```
$rowcount = $numRecords->num_rows; 
```

在 getRowsByArticleSearch 函数中，您应该再次删除查询并使用传递给 bind_result 的变量作为输出：

```
 $getRecords->bind_result($ARTICLE_NO, $USERNAME, $ACCESSSTARTS, $ARTICLE_NAME, $shortDate);
  while ($getRecords->fetch()) {
    $pk = $ARTICLE_NO;
    echo '<tr>' . "\n";
    echo '<td><a href="#" onclick="updateByPk(\'Layer2\', \'' . $pk . '\')">'.$USERNAME.'</a></td>' . "\n";
    // etc...
  } 
```

有关更多信息，请查看 PHP 的 bind_result 手册：http: [//php.net/manual/en/mysqli-stmt.bind-result.php](http://php.net/manual/en/mysqli-stmt.bind-result.php)

# java - 关闭特定的命令提示符

> ID：618528
> 
> 赞同：3
> 
> 时间：2009-03-06T11:29:04.607
> 
> 标签：java

我已经使用 java 程序打开了一个命令提示符，并手动打开了另一个命令提示符。现在我的要求是我需要关闭我使用该程序的java程序打开的命令提示符。

我试图通过给出 rt.exec("taskkill /IM cmd.exe"); 来关闭它。

但问题是我手动打开的命令提示符也关闭了，这是我不想要的。

需要帮助。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T11:35:01.160

如果您使用的是 Runtime.getRuntime().exec()，它会返回一个 Process 对象。你应该坚持下去，完成后调用 Process.destroy() 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-29T12:38:40.477

这很简单 -

`Step 1`- 创建一个批处理文件（比如**closeCMD.bat**）

`Step 2`-在**closeCMD.bat**中写入**退出**

 **`Step 3`- 在您的 java 代码中调用上面的批处理文件，如下所示 -

**Runtime.getRuntime().exec("cmd /c start closeCMD.bat");**

而已 ！！干杯！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-09-27T09:55:34.767

在命令提示符下完成任务后，您可以尝试将“退出”编程到命令提示符中

# .net - .NET 中十进制、浮点和双精度的区别？

> ID：618535
> 
> 赞同：2286
> 
> 时间：2009-03-06T11:31:23.103
> 
> 标签：.net, floating-point, double, decimal

.NET和.NET`decimal`中有什么区别？`float``double`

什么时候有人会使用其中之一？

* * *

## 回答 #1

> 赞同：2458
> 
> 时间：2009-03-06T11:56:02.670

`float`并且`double`是[浮点*二进制*点类型](http://csharpindepth.com/Articles/General/FloatingPoint.aspx)。换句话说，它们代表这样的数字：

```
10001.10010110011 
```

二进制数和二进制点的位置都在值内编码。

`decimal`是[浮点数类型](http://csharpindepth.com/Articles/General/Decimal.aspx)*。[*_*](http://csharpindepth.com/Articles/General/Decimal.aspx) 换句话说，它们代表这样的数字：*

 *```
12345.65789 
```

同样，数字和*小数点*的位置都在值内编码——这就是`decimal`仍然是浮点类型而不是定点类型的原因。

需要注意的重要一点是，人类习惯于以十进制形式表示非整数，并期望以十进制表示的精确结果；并非所有十进制数都可以用二进制浮点数精确表示——例如 0.1——所以如果你使用二进制浮点值，你实际上会得到一个 0.1 的近似值。当使用浮点小数点时，您仍然会得到近似值——例如，无法精确表示 1 除以 3 的结果。

至于什么时候用：

*   对于“自然精确小数”的值，最好使用`decimal`. 这通常适用于人类发明的任何概念：财务价值是最明显的例子，但也有其他例子。例如，考虑给潜水员或溜冰者的分数。

*   对于更多的自然产物，无论如何都无法准确测量的值*，*`float` /`double`更合适。例如，科学数据通常会以这种形式表示。在这里，原始值一开始就不是“十进制精度”，因此保持“十进制精度”对于预期结果并不重要。浮点二进制点类型比小数要快得多。

* * *

## 回答 #2

> 赞同：1186
> 
> 时间：2009-03-06T11:33:02.363

精度是主要区别。

[浮点数](https://docs.microsoft.com/en-us/dotnet/api/system.single)- 7 位（32 位）

[双](https://docs.microsoft.com/en-us/dotnet/api/system.double)-15-16 位（64 位）

[十进制](https://docs.microsoft.com/en-us/dotnet/api/system.decimal)-28-29 位有效数字（128 位）

小数具有更高的精度，通常用于需要高精度的金融应用程序中。小数比双精度/浮点数慢得多（在某些测试中高达 20 倍）。

小数和浮点数/双精度数不能在没有强制转换的情况下进行比较，而浮点数和双精度数可以。小数还允许编码或尾随零。

```
float flt = 1F/3;
double dbl = 1D/3;
decimal dcm = 1M/3;
Console.WriteLine("float: {0} double: {1} decimal: {2}", flt, dbl, dcm); 
```

结果 ：

```
float: 0.3333333  
double: 0.333333333333333  
decimal: 0.3333333333333333333333333333 
```

* * *

## 回答 #3

> 赞同：109
> 
> 时间：2013-06-07T12:50:10.403

```
+---------+----------------+---------+----------+---------------------------------------------------------+
| C#      | .Net Framework | Signed? | Bytes    | Possible Values                                         |
| Type    | (System) type  |         | Occupied |                                                         |
+---------+----------------+---------+----------+---------------------------------------------------------+
| sbyte   | System.Sbyte   | Yes     | 1        | -128 to 127                                             |
| short   | System.Int16   | Yes     | 2        | -32,768 to 32,767                                       |
| int     | System.Int32   | Yes     | 4        | -2,147,483,648 to 2,147,483,647                         |
| long    | System.Int64   | Yes     | 8        | -9,223,372,036,854,775,808 to 9,223,372,036,854,775,807 |
| byte    | System.Byte    | No      | 1        | 0 to 255                                                |
| ushort  | System.Uint16  | No      | 2        | 0 to 65,535                                             |
| uint    | System.UInt32  | No      | 4        | 0 to 4,294,967,295                                      |
| ulong   | System.Uint64  | No      | 8        | 0 to 18,446,744,073,709,551,615                         |
| float   | System.Single  | Yes     | 4        | Approximately ±1.5e-45 to ±3.4e38                       |
|         |                |         |          |  with ~6-9 significant figures                          |
| double  | System.Double  | Yes     | 8        | Approximately ±5.0e-324 to ±1.7e308                     |
|         |                |         |          |  with ~15-17 significant figures                        |
| decimal | System.Decimal | Yes     | 16       | Approximately ±1.0e-28 to ±7.9e28                       |
|         |                |         |          |  with 28-29 significant figures                         |
| char    | System.Char    | N/A     | 2        | Any Unicode character (16 bit)                          |
| bool    | System.Boolean | N/A     | 1 / 2    | true or false                                           |
+---------+----------------+---------+----------+---------------------------------------------------------+ 
```

[请参阅此处了解更多信息](https://social.msdn.microsoft.com/Forums/vstudio/en-US/921a8ffc-9829-4145-bdc9-a96c1ec174a5/decimal-vs-double-difference?forum=csharpgeneral)。

* * *

## 回答 #4

> 赞同：92
> 
> 时间：2011-04-13T13:55:01.900

Decimal 结构严格适用于需要精确度的金融计算，相对不能容忍四舍五入。然而，小数对于科学应用来说是不够的，原因如下：

*   由于被测量的物理问题或人工制品的实际限制，在许多科学计算中，一定程度的精度损失是可以接受的。在金融领域，精度损失是不可接受的。
*   对于大多数操作来说，十进制比浮点和双精度要慢得多（很多），主要是因为浮点运算是以二进制完成的，而十进制的东西是以 10 为底完成的（即浮点和双精度由 FPU 硬件处理，例如 MMX/SSE ，而小数是在软件中计算的）。
*   尽管 Decimal 支持更多位数的精度，但 Decimal 的值范围比 double 小得令人无法接受。因此，Decimal 不能用于表示许多科学值。

* * *

## 回答 #5

> 赞同：70
> 
> 时间：2016-04-22T15:18:17.973

我不会重复其他答案和评论中已经回答的大量好的（和一些坏的）信息，但我会用提示回答您的后续问题：

> *什么时候有人会使用其中之一？*

**对计**数值使用小数

**对测量**值使用浮点数/双精度值

一些例子：

*   钱（我们是数钱还是量钱？）

*   距离（我们计算距离还是测量距离？*）

*   分数（我们计算分数还是衡量分数？）

我们总是数钱，永远不应该衡量它。我们通常测量距离。我们经常计算分数。

* 在某些情况下，我称之为*标称距离*，我们可能确实想要“计算”距离。例如，也许我们正在处理显示到城市距离的国家标志，我们知道这些距离永远不会超过一位十进制数字（xxx.x km）。

* * *

## 回答 #6

> 赞同：50
> 
> 时间：2011-08-29T00:06:27.303

`float`7位精度

`double`大约有 15 位的精度

`decimal`大约有 28 位精度

如果您需要更高的精度，请使用 double 而不是 float。在现代 CPU 中，两种数据类型的性能几乎相同。使用浮动的唯一好处是它们占用的空间更少。只有当你有很多时，实际上才重要。

我发现这很有趣。[每个计算机科学家都应该知道的关于浮点运算的知识](http://download.oracle.com/docs/cd/E19957-01/806-3568/ncg_goldberg.html)

* * *

## 回答 #7

> 赞同：42
> 
> 时间：2015-01-02T13:12:39.123

没有人提到过

> 在默认设置中，浮点数 (System.Single) 和双精度数 (System.Double) 永远不会使用溢出检查，而十进制 (System.Decimal) 将始终使用溢出检查。

我是说

```
decimal myNumber = decimal.MaxValue;
myNumber += 1; 
```

抛出**溢出**异常。

但这些不会：

```
float myNumber = float.MaxValue;
myNumber += 1; 
```

&

```
double myNumber = double.MaxValue;
myNumber += 1; 
```

* * *

## 回答 #8

> 赞同：28
> 
> 时间：2012-05-22T12:05:17.550

如前所述，整数是整数。他们无法存储点，例如 .7、.42 和 .007。如果您需要存储不是整数的数字，则需要不同类型的变量。您可以使用双精度型或浮点型。您以完全相同的方式设置这些类型的变量：`int`您键入`double`or ，而不是使用单词`float`。像这样：

```
float myFloat;
double myDouble; 
```

（`float`是“浮点数”的缩写，仅表示末尾带有点的数字。）

两者之间的区别在于它们可以容纳的数字的大小。对于`float`，您的号码中最多可以有 7 位数字。对于`double`s，您最多可以有 16 位数字。更准确地说，这是官方尺寸：

```
float:  1.5 × 10^-45  to 3.4 × 10^38  
double: 5.0 × 10^-324 to 1.7 × 10^308 
```

`float`是一个 32 位的数字，并且`double`是一个 64 位的数字。

双击您的新按钮以获取代码。将以下三行添加到您的按钮代码中：

```
double myDouble;
myDouble = 0.007;
MessageBox.Show(myDouble.ToString()); 
```

停止您的程序并返回到编码窗口。更改此行：

```
myDouble = 0.007;
myDouble = 12345678.1234567; 
```

运行您的程序并单击您的双按钮。消息框正确显示数字。但是，在末尾添加另一个数字，C# 将再次向上或向下舍入。道德是如果你想要准确，小心四舍五入！

* * *

## 回答 #9

> 赞同：27
> 
> 时间：2010-07-29T07:21:10.860

1.  在编译和运行时，双精度和浮点数都可以被整数零除而无一例外。
2.  小数不能除以整数零。如果你这样做，编译总是会失败。

* * *

## 回答 #10

> 赞同：18
> 
> 时间：2014-01-02T05:01:41.580

*   浮动：±1.5 x 10^-45 到 ±3.4 x 10^38（~7 个有效数字
*   双倍：±5.0 x 10^-324 至 ±1.7 x 10^308（15-16 位有效数字）
*   十进制：±1.0 x 10^-28 至 ±7.9 x 10^28（28-29 位有效数字）

* * *

## 回答 #11

> 赞同：13
> 
> 时间：2012-04-16T09:23:44.703

这对我来说是一个有趣的话题，因为今天，我们刚刚遇到了一个令人讨厌的小错误，关于`decimal`精度低于`float`.

在我们的 C# 代码中，我们从 Excel 电子表格中读取数值，将它们转换为`decimal`，然后将其发送`decimal`回服务以保存到*SQL Server*数据库中。

```
Microsoft.Office.Interop.Excel.Range cell = …
object cellValue = cell.Value2;
if (cellValue != null)
{
    decimal value = 0;
    Decimal.TryParse(cellValue.ToString(), out value);
} 
```

现在，对于我们*几乎所有*的 Excel 值，这都非常有效。但是对于一些非常小的 Excel 值，使用**`decimal.TryParse`**完全丢失了值。一个这样的例子是

*   单元格值 = **0.00006317592**

*   *Decimal.TryParse(cellValue.ToString(), out value);* // 将返回**0**

奇怪的是，解决方案是将 Excel 值转换为`double`第一个，然后转换为`decimal`：

```
Microsoft.Office.Interop.Excel.Range cell = …
object cellValue = cell.Value2;
if (cellValue != null)
{
    double valueDouble = 0;
    double.TryParse(cellValue.ToString(), out valueDouble);
    decimal value = (decimal) valueDouble;
    …
} 
```

尽管`double`精度低于 a `decimal`，但这实际上确保了仍然可以识别小数字。由于某种原因，**`double.TryParse`**实际上能够检索到如此小的数字，而**`decimal.TryParse`**将它们设置为零。

奇怪的。很奇怪。

* * *

## 回答 #12

> 赞同：13
> 
> 时间：2014-09-30T08:22:24.160

Decimal、Double 和 Float 变量类型在存储值的方式上有所不同。精度是主要区别，其中 float 是单精度（32 位）浮点数据类型，double 是双精度（64 位）浮点数据类型，decimal 是 128 位浮点数据类型。

浮点数 - 32 位（7 位）

双 - 64 位（15-16 位）

十进制 - 128 位（28-29 位有效数字）

更多关于... [Decimal、Float 和 Double 之间的区别](http://net-informations.com/q/faq/float.html)

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2014-05-16T16:21:29.247

对于内存和性能都至关重要的游戏和嵌入式系统等应用程序，float 通常是首选的数字类型，因为它速度更快，大小只有 double 类型的一半。整数曾经是首选的武器，但浮点性能在现代处理器中已经超过了整数。十进制就出来了！

* * *

## 回答 #14

> 赞同：8
> 
> 时间：2019-12-14T12:16:36.717

*   **十进制**128 位（28-29 位有效数字） 在金融应用中，最好使用 Decimal 类型，因为它可以为您提供高水平的准确性并且易于避免舍入错误 在需要精度的非整数数学中使用十进制（例如货币和货币）

*   **双** 64 位（15-16 位） 双精度类型可能是最常用的实数值数据类型，除了处理钱。对不需要最精确答案的非整数数学使用 double。

*   **浮点** 32 位（7 位） 它主要用于图形库，因为对处理能力的要求非常高，也用于可以忍受舍入错误的情况。

`Decimals`比 a 慢得多`double/float`。

`Decimals`并且`Floats/Doubles`不能在没有强制转换的情况下进行比较，而`Floats`和`Doubles`可以。

`Decimals`还允许编码或尾随零。

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2017-02-23T13:05:31.637

所有这些类型的问题是存在一定的不精确性，并且这个问题可能会出现在小十进制数上，如下例所示

```
Dim fMean as Double = 1.18
Dim fDelta as Double = 0.08
Dim fLimit as Double = 1.1

If fMean - fDelta < fLimit Then
    bLower = True
Else
    bLower = False
End If 
```

问题： bLower 变量包含哪个值？

答：在 32 位机器上 bLower 包含 TRUE !!!

如果我用十进制替换 Double，bLower 包含 FALSE，这是一个很好的答案。

在 double 中，问题在于 fMean-fDelta = 1.09999999999 低于 1.1。

警告：我认为其他数字肯定存在同样的问题，因为 Decimal 只是精度更高的双精度数，并且精度总是有限制的。

实际上，Double、Float 和 Decimal 对应 COBOL 中的 BINARY 十进制！

令人遗憾的是，在 COBOL 中实现的其他数字类型在 .Net 中不存在。对于那些不知道COBOL的人，COBOL中存在以下数字类型

```
BINARY or COMP like float or double or decimal
PACKED-DECIMAL or COMP-3 (2 digit in 1 byte)
ZONED-DECIMAL (1 digit in 1 byte) 
```

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2018-02-10T08:47:40.287

简单来说：

1.  Decimal、Double 和 Float 变量类型在存储值的方式上有所不同。
2.  精度是***主要区别***（注意这不是单一的区别），其中**float**是单精度（32 位）浮点数据类型，**double**是双精度（64 位）浮点数据类型，**decimal**是 128 位浮点数据类型。
3.  汇总表：

```
/==========================================================================================
    Type       Bits    Have up to                   Approximate Range 
/==========================================================================================
    float      32      7 digits                     -3.4 × 10 ^ (38)   to +3.4 × 10 ^ (38)
    double     64      15-16 digits                 ±5.0 × 10 ^ (-324) to ±1.7 × 10 ^ (308)
    decimal    128     28-29 significant digits     ±7.9 x 10 ^ (28) or (1 to 10 ^ (28)
/========================================================================================== 
```

[您可以在此处](http://net-informations.com/q/faq/float.html) 阅读更多内容，[Float](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/float)、[Double](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/double)和[Decimal](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/decimal)。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2014-12-21T18:50:12.293

它们之间的主要区别在于精度。

`float`是一个`32-bit`数字，`double`是一个`64-bit`数字，`decimal`是一个`128-bit`数字。

* * *

## 回答 #18

> 赞同：-3
> 
> 时间：2020-01-17T11:26:59.830

## 在 .Net (c#) 中定义 Decimal、Float 和 Double

您必须将值提及为：

```
Decimal dec = 12M/6;
Double dbl = 11D/6;
float fl = 15F/6; 
```

并检查结果。

## 并且每个占用的字节数是

```
Float - 4
Double - 8
Decimal - 12 
```

# clickonce - 在 clickonce 发布的 html 中修改谷歌分析跟踪代码

> ID：618544
> 
> 赞同：1
> 
> 时间：2009-03-06T11:33:42.160
> 
> 标签：clickonce, google-analytics, publish

以前有人试过吗？

如何通过 Visual Studio 将谷歌分析跟踪代码 .js 修改为 publish.htm？有没有简单的方法？例如通过使用构建后事件或什么？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T11:52:10.260

你可以像在任何其他网站上一样添加谷歌分析的东西，它只是纯 html。

但是，您将无法跟踪查询更新的已安装 clickonce 应用程序。谷歌提供的统计数据不会为您提供有关 clickonce 应用程序安装频率的任何信息。

# jquery - JQuery 中的选项卡选择问题

> ID：618546
> 
> 赞同：0
> 
> 时间：2009-03-06T11:34:22.080
> 
> 标签：jquery, html, tabs

我有以下问题：

我想创建一个网页，我可以在其中通过侧边栏和 jQuery 选项卡本身的上部按钮栏使用 jQuery 选项卡。我正在使用以下代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
        <title>title here</title>
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript" src="ui.core.js"></script>
        <script type="text/javascript" src="ui.datepicker.js"></script>
        <script type="text/javascript" src="ui.tabs.js"></script>
        <link rel="stylesheet" type="text/css" media="screen" href="local.css" />
        <script type="text/javascript">
            $(document).ready(function(){
            $("#datepicker").datepicker();
        });
        </script>
        <script type="text/javascript">
            $(document).ready(function() {
                $("#tabs").tabs();
            });
            $("select2").click(function() { // bind click event to link
                $("$tabs").tabs("select", 1); // switch to third tab
                return false;
            });
        </script>
    </head>

<body>
    <div id="container">
        <div id="row">
            <div id="leftsubcontainer"><div class="column-in">
                <h4>rev0.1</h4>
                <p>medewerkernaam</p>
                <br/>
                <div type="text" id="datepicker"></div>
                <br/><br/>
                <br/><br/>
                <p>log out</p>
                <button id="select2">kies derde</button>
                <br/><br/>
            </div></div>
            <div id="rightsubcontainer"><div class="column-in">
                <div id="tabs">
                    <ul>
                        <li><a href="#tabs-1">Nunc tincidunt</a></li>
                        <li><a href="#tabs-2">Proin dolor</a></li>
                        <li><a href="#tabs-3">Aenean lacinia</a></li>
                    </ul>
                    <div id="tabs-1">
                        <p>tekst1</p>
                    </div>
                    <div id="tabs-2">
                        <p>tekst 2</p>
                    </div>
                    <div id="tabs-3">
                        <p>tekst 3</p>
                    </div>
                </div>
            </div></div>
        </div>
    </div>
</body>
</html> 
```

问题是，每当我单击按钮时，选项卡都不会改变（即它没有选择正确的选项卡）。你们有谁知道我做错了什么？

希望收到大家的来信，

亲切的问候，杰伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T12:29:34.897

您的选择器有一些拼写错误和问题，这会妨碍您。用以下代码替换您的 javascript 代码

```
$(document).ready(function() {
    var $tabs = $("#tabs").tabs();
    $("#select2").click(function() {
        // bind click event to link
        $tabs.tabs("select", 1); // switch to second tab
        return false;
    });
}); 
```

那应该可以正常工作。

# open-source - 现有的服务器存储管理软件解决方案？

> ID：618549
> 
> 赞同：1
> 
> 时间：2009-03-06T11:35:14.560
> 
> 标签：open-source, infrastructure

我正在尝试以图形方式表示我们所有的服务器机架。因此，当我们收到一个新服务器时，我们可以决定它应该放在哪里以及特定服务器当前所在的位置。

是否有任何现有的软件包可以存储此类数据？如果有的话，我更喜欢开源的，但任何东西都会有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-06T11:52:27.013

如果您使用[nagios](http://www.nagios.org)作为监控应用程序，您可以使用[NagVis](http://www.nagvis.org)创建自定义状态图，例如服务器的机架视图。

[示例截图](http://www.nagvis.org/sites/default/files/screenshots/nagvis-1.3-rack.png)

[RackMonkey](http://www.flux.org.uk/projects/rackmonkey/)似乎也符合您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T16:56:40.260

我环顾四周并提出了建议的解决方案（感谢Node），目前我的感觉是使用以下之一：

*   [NVentory](http://opensource.vidavee.com/NVentory/)虽然我不确定我的公司会想要使用 ruby​​ 和 rails，因为这将是我们第一个使用它的产品
*   [机架视图](http://rackview.sourceforge.net/)
*   或者更可能只是[用于机架服务器虚拟化的 MS Office Visio 2007 插件，](http://www.microsoft.com/Downloads/details.aspx?familyid=3250331A-0116-4064-92D1-50B9B0727B75&displaylang=en)但这看起来只链接到 excel，希望我可以使用 excel 来查询数据库。

当我使用这些工具时，我会更新，看看它们能提供什么。

# c# - 如何处理 Asp.Net MVC 中的一般异常？

> ID：618550
> 
> 赞同：12
> 
> 时间：2009-03-06T11:36:07.333
> 
> 标签：c#, asp.net-mvc, exception-handling

我想将所有未处理的异常转移到 Asp.Net MVC 中的错误页面。在 Asp.net MVC 中处理未处理异常的方法是什么？有没有类似application_error的东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-06T11:46:48.713

查看 HandleError 属性。[这里](http://weblogs.asp.net/scottgu/archive/2008/07/14/asp-net-mvc-preview-4-release-part-1.aspx)有一篇好文。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-06T11:48:16.337

如果您使用的是标准设置，您的控制器可以通过覆盖其中一种方法来做到这一点（可能是`OnException`，但我没有方便检查）。如果您希望所有控制器共享此逻辑，则可以使用基本控制器。

或者，您可以通过过滤器执行此操作（例如`[HandleError]`）。不过，我不知道这种逻辑是否存在一个全球性的地方。

# python - Python 正则表达式通过两个分隔符之一拆分字符串

> ID：618551
> 
> 赞同：7
> 
> 时间：2009-03-06T11:36:13.183
> 
> 标签：python, regex

我想剪切一串电子邮件地址，这些地址可以用逗号和空格的任意组合分隔。

我认为这会很简单：

```
sep = re.compile('(\s*,*)+')
print sep.split("""a@b.com, c@d.com

   e@f.com,,g@h.com""") 
```

但事实并非如此。我找不到一个不会像这样留下一些空插槽的正则表达式：

```
['a@b.com', '', 'c@d.com', '', 'e@f.com', '', 'g@h.com'] 
```

我尝试了各种组合，但似乎都不起作用。事实上，这可能与正则表达式有关吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-06T11:42:11.017

嗬！

就是这个。

```
sep = re.compile('[\s,]+') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-06T12:23:44.410

无需重新

```
line = 'e@d , f@g, 7@g'

addresses = line.split(',')    
addresses = [ address.strip() for address in addresses ] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-06T11:44:11.060

我喜欢下面...

```
>>> sep= re.compile( r',*\s*' )
>>> sep.split("""a@b.com, c@d.com

   e@f.com,,g@h.com""")
['a@b.com', 'c@d.com', 'e@f.com', 'g@h.com'] 
```

这似乎也适用于您的测试数据。

# python - Django：使用和 POST 我在我的模板中使用了类似的东西 <select multiple="multiple" name="services" id="services" size="5"> {% for service in services %} <option value="{{ service.id}}">{{service}}</option> {% endfor %} </select> 当我在 F

> ID：618557
> 
> 赞同：74
> 
> 时间：2009-03-06T11:39:14.160
> 
> 标签：python, django, http

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2009-03-06T12:06:52.597

```
request.POST.getlist('services') 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2011-07-05T18:31:45.743

仅供参考，我不得不使用：

```
 list = request.POST.getlist("items[]") 
```

因为省略 [] 会导致返回空白列表而不是正确的值。我正在使用 jQuery 来获取多选元素的值，并且 jQuery 似乎正在添加 []

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-28T13:36:00.777

您只需使用...即可获得预期的列表

```
request.POST.getlist('fiel_name') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T10:56:04.523

小心！如果键不存在，QueryDict 的 getlist 方法将返回一个空列表。它不会抛出异常。[http://bit.ly/MdgrUH](http://bit.ly/MdgrUH)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-24T12:13:06.037

request.POST.getlist('服务')

为我工作。或者您可以将选择框名称定义为列表

# php - 在 Flash 中正确呈现特殊字符，从 XML 解析并使用 PHP/MySQL 生成

> ID：618568
> 
> 赞同：1
> 
> 时间：2009-03-06T11:44:57.267
> 
> 标签：php, xml, flash

可能你们中的许多人在前一天遇到了一个问题，但是我在 Flash 中呈现特殊字符（as2 和 as3）时遇到了问题。

所以我的问题是：在 Flash 文本字段中显示 '、"、ë、ä 等字符的正确且万无一失的方法是什么？数据是从 php 生成的 xml 文件中收集的，内容是从 SQL 数据库中检索的.

我相信这与检索到的数据库数据的 UTF-8 编码有关（我已经尝试过），但我还没有找到可靠的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T12:07:02.283

我觉得你把这个放到xml头就够了

```
<?xml version="1.0" encoding="UTF-8"?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T22:03:59.307

*仅仅*将标题设置为 UTF-8 是行不通的，这有点像将一本书的封面从英文更改为法文，并期望内容随之改变。
您需要做的是确保您的文本从头到尾都是 UTF-8，将其存储在数据库中，如果您不能这样做，请确保正确编码您的输出。如果你完成了所有这些步骤，它应该在 Flash 中都能正常工作，假设你已经嵌入了正确的字形，除非你使用的是系统字体。

AS2 有一个名为 useSystemCodepage 的设置，这*似乎*可以解决问题，但可能会使它对不同代码页上的用户造成更大的破坏，除非您真的确定自己在做什么，否则请尽量避免这种情况。

有时在您的语言中使用这些额外的字母实际上会有所帮助；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-09T13:34:23.453

如果您的特殊字符是 Unicode 集的一部分（它们应该是，否则您基本上只能靠自己），您只需要确保用于呈现文本的字体具有所有必要的字形，并且数据库输出产生正确的 unicode 文本。

有些字体不一定包含所有的 unicode 字形，而只是其中的一个子集（通常会删除国际字形和特殊字符）。确保字体有它们（例如，在文字处理器中测试字体）。此外，如果您使用嵌入字体，请务必嵌入您需要使用的所有字符。

# jquery - 在 JQuery 中选择选项卡有什么问题？

> ID：618570
> 
> 赞同：0
> 
> 时间：2009-03-06T11:45:46.420
> 
> 标签：jquery, html, tabs

我想创建一个网页，我可以在其中通过侧边栏和 jQuery 选项卡本身的上部按钮栏使用 jQuery 选项卡。

我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type"
          content="text/html; charset=ISO-8859-1" />
  <title>title here</title>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="ui.core.js"></script>
  <script type="text/javascript" src="ui.datepicker.js"></script>
  <script type="text/javascript" src="ui.tabs.js"></script>
  <link rel="stylesheet" type="text/css" media="screen" href="local.css" />
  <script type="text/javascript">
    $(document).ready(function(){
    $("#datepicker").datepicker();
    });
  </script>
  <script type="text/javascript">
    $(document).ready(function() {
      $("#tabs").tabs();
    });
    $("select2").click(function() { // bind click event to link
        $("$tabs").tabs("select", 1); // switch to third tab
        return false;
    });
  </script>
</head>
<body>
  <div id="container">
    <div id="row">
      <div id="leftsubcontainer"><div class="column-in">
        <h4>rev0.1</h4>
        <p>medewerkernaam</p>
        <br/>
        <div type="text" id="datepicker"></div>
        <br/><br/>
        <br/><br/>
        <p>log out</p>
        <button id="select2">kies derde</button>
        <br/><br/>
      </div></div>
      <div id="rightsubcontainer"><div class="column-in">
        <div id="tabs">
          <ul>
            <li><a href="#tabs-1">Nunc tincidunt</a></li>
            <li><a href="#tabs-2">Proin dolor</a></li>
            <li><a href="#tabs-3">Aenean lacinia</a></li>
          </ul>
          <div id="tabs-1">
            <p>tekst1</p>
          </div>
          <div id="tabs-2">
            <p>tekst 2</p>
          </div>
          <div id="tabs-3">
            <p>tekst 3</p>
          </div>
        </div>

      </div></div>
    </div>
  </div>
</body>
</html> 
```

问题是，每当我单击按钮时，选项卡都不会改变（即它没有选择正确的选项卡）。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T12:13:40.300

你这里有问题：

```
$("$tabs").tabs("select", 1); 
```

您应该使用 # 而不是 $ ：

```
$("#tabs").tabs("select", 1); 
```

并且将 1 作为第二个参数传递将选择第二个选项卡，而不是第三个选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T12:26:44.170

次要细节，但：

```
 $(document).ready(function(){
    $("#datepicker").datepicker();
    });
    </script>
    <script type="text/javascript">
            $(document).ready(function() {
                    $("#tabs").tabs();
            }); 
```

可以合并为：

```
 $(document).ready(function(){
                  $("#datepicker").datepicker();
                  $("#tabs").tabs();
            }); 
```

# c++ - 注册每个 C/C++ 源文件以创建使用源的运行时列表

> ID：618581
> 
> 赞同：1
> 
> 时间：2009-03-06T11:49:17.303
> 
> 标签：c++, c, logging, singleton, static-members

对于调试和日志库，我希望能够在运行时找到项目已编译和链接的所有源文件的列表。我假设我将在每个源文件中包含某种标题，并且预处理器 __FILE__ 宏可以为我提供该文件的字符常量，因此我只需要以某种方式“广播”来自每个文件的信息以由 a运行时函数。

问题是如何优雅地做到这一点，特别是如果它可以从 C 而不是 C++ 中完成。在 C++ 中，我可能会尝试使用静态存储创建一个类来保存文件名列表。每个头文件都将创建该类的文件本地静态实例，该实例在创建时会将 FILE 指针或其他任何内容附加到类的静态数据成员中，可能作为链表。

但我认为这在 C 中不起作用，即使在 C++ 中，我也不确定是否可以保证每个元素都会被创建。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-06T11:56:38.797

我不会在代码中做那种事情。我会编写一个工具来解析项目文件（vcproj、makefile 甚至只是扫描项目目录中的 *.c* 文件）并生成一个额外的 C 源文件，其中包含某种预定义的所有源文件的名称初始化数据结构

然后我会将该工具作为构建过程的一部分，这样每次您进行构建时，这一切都会自动发生。在运行时，您所要做的就是读取已构建的数据结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-06T12:17:49.230

我同意 Ferruccio 的观点，最好的方法是在构建系统中，而不是代码本身。作为他想法的扩展，在您的构建系统中添加一个目标，它将文件列表（无论如何它必须知道）作为字符串或字符串数​​组转储到 C 文件中，然后将此文件编译到您的源代码中。这避免了源代码中的很多复杂性，并且是可扩展的，如果您想添加其他信息，例如源代码控制系统的版本号、构建可执行文件的人等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-06T12:49:02.603

在 UNIX 和 Linux 上有一种标准方式 - `ident`. 对于您创建的每个源文件 ID 标记 - 通常它由您的版本控制系统分配，例如[SVN 关键字](http://svnbook.red-bean.com/en/1.0/ch07s02.html#svn-ch-7-sect-2.3.4)。

然后找出你只需使用`ident`命令的每个源文件的名称和版本。如果您需要在运行时执行此操作，请查看它是如何`ident`操作的 - 它的源代码应该是免费提供的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-06T11:58:58.747

在 C 中没有办法做到这一点。在 C++ 中，您可以创建这样的类：

```
struct Reg {
   Reg( const char * file ) {
      StaticDictionary::Register( file );
}; 
```

其中 StaticDictionary 是所有文件名的单例容器。然后在每个源文件中：

```
static Reg regthisfile( __FILE__ ); 
```

您可能希望将字典设为[Meyers](http://www.devarticles.com/c/a/Cplusplus/C-plus-plus-In-Theory-The-Singleton-Pattern-Part-I/4/)单例以避免创建顺序问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-06T11:57:38.297

我认为您不能以“被动”模式下概述的方式做到这一点。也就是说，您将以某种方式为要添加到注册表的每个源文件运行代码，很难让它自动发生。

当然，您可以使用宏使该代码非常不显眼。对于没有“入口点”的 C 源文件可能会有问题，因此如果您的代码还没有组织为“模块”，例如`init()`每个模块都有一个函数，那可能会很困难。静态初始化代码可能是可能的，我不能 100% 确定初始化的顺序是否会在这里产生问题。

在注册表模块中使用`static`存储听起来是个好主意，如果您的项目还没有包含任何通用实用程序库，那么简单的链表或简单的哈希表应该很容易实现。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-06T11:58:24.473

在 C++ 中，您的解决方案将起作用。这是有保证的。

**编辑：**刚刚在我的脑海中找到了一个解决方案：更改makefile中的规则以将'-include“cfiles_register.h”'添加到每个'g++ file.cpp'。

```
%.o : %.cpp
    $(CC) -include 'cfiles_register.h' -o $@ $< 
```

将您的建议放在“cfiles_register.h”的问题实施中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-06T12:48:33.430

在 C++ 中使用静态实例可以正常工作。

您也可以在 C 中执行此操作，但您需要使用运行时特定功能 - 对于 MSVC CRT，请查看[http://www.codeguru.com/cpp/misc/misc/threadsprocesses/article.php/c6945/](http://www.codeguru.com/cpp/misc/misc/threadsprocesses/article.php/c6945/)

对于 C - 你可以用宏来做 - 定义一个与你的文件相对应的变量，然后你可以扫描你的可执行文件的符号，就像一个想法：

```
 #define TRACK_FILE(name) char _file_tracker_##name; 
```

在你的 my_c_file.c 中使用它，如下所示：

```
 TRACK_FILE(my_c_file_c) 
```

而不是像这样从二进制文件中grep所有文件/变量名

```
nm my-binary | grep _file_tracker 
```

不是很好，但是...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-06T13:02:57.937

可怕的想法，我敢肯定，但使用单例。并在每个文件上做类似的事情

```
 Singleton.register(__FILE__); 
```

在全球范围内。它只适用于 cpp 文件。几年前，我作为新手做过类似的事情，并且奏效了。但我现在很想这么做。我现在要添加一个构建步骤。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-06T14:38:01.000

我同意那些说最好避免在运行时这样做的人的观点，但是在 C 中，您可以使用函数调用来初始化静态变量，即在每个文件中：

```
static int doesntmatter = register( __FILE__); 
```

# c# - LINQ：在运行时访问子列表

> ID：618585
> 
> 赞同：0
> 
> 时间：2009-03-06T11:50:41.823
> 
> 标签：c#, linq, group-by

我进行分组并获取子列表...在查询期间我创建了一个新的obj

```
var result3 = from tick in listTicks
              group tick by bla bla into g
              select new 
              { 
                  Count = g.Count(), 
                  Key = g.Key, 
                  Items = g,
                  Timestamp = g.First().timestamp,
                  LastTimestamp = g[-1].First().timestamp result3 isn't still declared???
              }; 
```

我想在运行时访问最后创建的 obj 的新值，可能会检查最后一个 first.Timestamp 是否具有特定值

在创建 select new {} 期间是否可以访问最后一个 g 我想检查最后一个 g 中的一个实际值

我想像 result3[result.count - 1].timestamp 之类的东西？？？在选择新部分...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T12:09:12.857

我不应该正确理解，但这就是你想要的吗？

```
result3.Last().Timestamp; 
```

* * *

评论后：我想我现在明白了。您需要创建一个临时变量来存储最后一组的时间戳并将其值设置为更复杂的委托：

```
int lastTimestamp = 0; // Put the correct type and default value

var result3 = (from tick in listTicks
              group tick by bla bla into g
              select g)
              .Select
              (g => 
              {
                  // Create your object with the last timestamp
                  var result = new
                  { 
                      Count = g.Count(), 
                      Key = g.Key, 
                      Items = g,
                      Timestamp = g.First().timestamp,
                      LastTimestamp = lastTimestamp
                  };
                  // Set last timestamp for next iteration
                  lastTimestamp = result.Timestamp;
                  // Return your object
                  return result;
              }); 
```

不知道确切的上下文，但您可能想要添加“ToList()”来覆盖延迟获取。

# javascript - 如何根据文本框中的用户输入更改下拉列表中的选定项目？

> ID：618588
> 
> 赞同：1
> 
> 时间：2009-03-06T11:51:12.133
> 
> 标签：javascript, jquery, jquery-plugins

我有一个选择下拉列表，其中可能包含一个大客户的 1000 多个项目。

```
<select name="location" id="location">
    <option value="1">Store# 1257</option>
    <option value="2">Store# 1258</option>
    ...
    <option value="973">Store# 8200</option>
    <option value="974">Store# 8250</option>
    <option value="975">Store# 8254</option>
    <option value="976">Store# 8290 Fuel Center</option>
</select> 
```

我还有一个文本框，当用户输入文本时，我想在下拉列表中移动所选项目。

例如，如果用户键入 82，那么我想移动到存在 82 的框中的第一个项目，其值为 973。如果用户键入 825，则移动到 974，等等。如果用户键入 Fuel，找到包含该字符串的第一个选项。

我目前使用 jquery 作为我的 javascript 库。

你有什么建议来解决这个问题？我应该切换到自动完成吗？如果是这样，我需要带有箭头的东西来下拉整个列表，因为某些客户可能只有 3 或 4 个可供选择。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-06T11:59:09.930

给定一个包含搜索字符串的变量`searchFor`，您可以使用此 jquery 片段选择包含该文本的第一个选项：

```
$("#location option[text*=" + searchFor + "]:first").attr("selected", true); 
```

所以如果你有一个带有 id 的文本输入`selectSearchBox`，你可以这样写：

```
$("#selectSearchBox").keyup(function () {
     var searchFor = $(this).val();
     $("#location option[text*=" + searchFor + "]:first").attr("selected", true);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T12:05:19.853

使用[jQuery 自动完成插件](http://bassistance.de/jquery-plugins/jquery-plugin-autocomplete/)可能是您的最佳选择。[您可以在 SO 上查看](https://stackoverflow.com/questions/612045/jquery-autocomplete-for-input-form-using-textpattern-category-list-as-a-source/612208#612208)先前的答案（请不要执行选择 => 数组转换，使用数组或服务器端脚本）。

# ruby-on-rails - :symbol 到 Rails 中的常量

> ID：618607
> 
> 赞同：3
> 
> 时间：2009-03-06T11:59:49.447
> 
> 标签：ruby-on-rails

Rails 中是否有将符号转换为常量的方法？我希望能够做类似的事情

```
:monkey.to_constant #=> Monkey 
```

目前我必须做

```
:monkey.to_s.camelize.constantize 
```

这有点拗口。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-06T12:13:35.670

```
class Symbol
  def to_c
    self.to_s.camelize.constantize
  end
end

:monkey.to_c 
```

**更新 Rails >= 4**

从 Rails 开始 >= 4`.classify`比使用更好`.camelize`

```
# .camelize with singular and plural symbols/strings
:user.to_s.camelize.constantize
# => User
:users.to_s.camelize.constantize
# => NameError: uninitialized constant Users

# .classify with singular and plural symbols/strings
:user.to_s.classify.constantize
# => User
:users.to_s.classify.constantize
# => User 
```

# visual-studio-2008 - 是否可以在 MS VS 2005 中打开使用 Microsoft Visual Studio 2008 创建的 *.sln 文件？

> ID：618608
> 
> 赞同：1
> 
> 时间：2009-03-06T12:00:10.787
> 
> 标签：visual-studio-2008, visual-studio-2005

我有一个使用 MS VS 2008 版创建的工作区（*.sln、*.vcproj）文件。是否有任何方法可以将它们转换为在 MS VS 2005 版中打开。

在使用源/头文件创建新工作区时出现一些错误。因为它有一些资源文件，包括在内，一些dll也包括在内。因此，假设排除了此选项，那么是否有任何解决方法？

-广告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-06T12:09:18.440

我能够将 MS VS2008 工作区文件转换为 MS VS 2005。我在文本编辑器中打开 *.sln 并手动更改了条目

Microsoft Visual Studio 解决方案文件，将版本 10.00 格式化为版本 9.0

我在 *.vcproj 文件中编辑的类似内容。在 *.vcproj 文件中，实际条目说：

```
VisualStudioProject

    ProjectType="Visual C++"

    Version="9.00" 
```

我将其更改为 8.00 版。

在这些更改之后，我可以在 MS VS 2005 中打开相同的工作区。

凉爽的！

-广告

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T12:04:55.923

完全可以更改文件中的版本号，它们只是普通的 XML 文件......

不过，您的里程可能会因实际打开它们而有所不同。除非您有很多元数据文件（.sln、.vcproj 等），否则在 VS2005 中重新创建一组新的解决方案/项目文件可能会更容易

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-06T12:03:27.660

您可以创建一个新的解决方案，并逐个添加项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-06T12:22:17.957

我认为不将 VS2005 升级到 VS2008 所节省的钱很容易支付反向转换过程中的时间和潜在错误。问问自己——值得冒险和胡闹吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-06T12:43:45.737

在记事本中打开 .sln，将“Visual Studio 2008”更改为“Visual Studio 2005”（主要在第 2 行或第 3 行）并保存。在 Vs2005 中打开此解决方案后，您可能会遇到一些错误。注意：要在 VS2005 中编译 VS2008 解决方案，您需要从解决方案中删除所有 .Net 3.0 和 3.5 引用和代码。

# linq - linq (to nhibernate) where sql 中动态属性的子句

> ID：618612
> 
> 赞同：2
> 
> 时间：2009-03-06T12:02:35.600
> 
> 标签：linq, nhibernate

我的实体有一个从其他属性派生的属性

```
public class MyClass
{
    public DateTime Deadline { get; set; }
    public Severity Severity 
    {
        return (DateTime.Now - Deadline < new TimeSpan(5, 0, 0, 0)) ? Severity.High : Severity.Low;
    }
} 
```

有没有办法可以修改以下内容

```
return repository.Query().Where(myClass => myClass.Severity == High); 
```

以便 where 子句在 sql 中而不是在代码中计算？

我试图做这样的事情，但无济于事

```
public class MyClass
{
    public DateTime Deadline { get; set; }
    public Func<MyClass, bool> SeverityFunc = (DateTime.Now - Deadline < new TimeSpan(5, 0, 0, 0)) ? Severity.High : Severity.Low;
    public Severity Severity 
    {
        return SeverityFunc.Invoke(this);
    }
}

return repository.Query().Where(myClass => myClass.SeverityFunc(myclass) == High); 
```

我猜是因为 func 无法评估为 SQL。有没有其他方法可以做到这一点而不会重复计算严重性

任何帮助表示赞赏，ta

编辑：这是我尝试做的简化版本，我正在寻找涵盖此理论而不是特定修复的答案（尽管仍然受欢迎）。我对实现这种事情的可能性和最佳实践感兴趣。

安德鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-06T23:35:04.047

我在映射器上使用了类似的东西。确保将 Func 包装在 Expr 上，例如：

```
public Expr<Func<MyClass, bool>> SeverityFunc ... 
```

通过用 expr 包装它，linq2sql 将能够查看完整的表达式并进行适当的翻译。我没有像你所拥有的那样将它用作类实例的一部分，所以我不确定这会如何影响它。

关于把它放在哪里，我上次处理类似场景时不得不继续前进，在我的情况下，它最终出现在映射器中，但主要是因为它更多的是来自非常糟糕的数据库模式而不是域逻辑的映射问题。为此，我什至没有在域实体上动态计算属性（肯定是不同的场景）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T10:57:09.967

一种选择是 LINQ 动态查询库，请参阅[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library。 aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

另一种选择是使用来自[http://www.albahari.com/nutshell/predicatebuilder.aspx的 PredicateBuilder](http://www.albahari.com/nutshell/predicatebuilder.aspx)

希望这能回答你的问题，Roelof。

# nhibernate - 当有外键但引用的行不存在时，是否可以避免 NHibernate.ObjectNotFoundException？

> ID：618615
> 
> 赞同：18
> 
> 时间：2009-03-06T12:03:51.137
> 
> 标签：nhibernate

我正在使用 NHibernate 从遗留数据库中提取一些数据，并且我发现有几种情况存在外键，但引用的行已被删除。

当我进行 NHibernate 映射时（像这样使用 Fluent NHibernate：

```
References(d => d.Group)
    .WithColumns("groupId", "dataset")
    .SetAttribute("lazy", "true"); 
```

`Group`我在加载根对象时得到了一个统一的代理，然后是`ObjectNotFoundException`我尝试使用它的时候。

如果我禁用延迟加载，我会`ObjectNotFoundException`在加载根目录时立即得到一个。

因此：有没有办法让 NHibernate`Group`在加载根目录时为空？或者是否可以以某种方式检查未初始化的代理，看看它是否会成功加载该行？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-09T11:42:35.017

我在[这里](http://devlicio.us/blogs/derik_whittaker/archive/2009/01/29/many-to-one-mapping-throwing-a-objectnotfoundexception-and-how-to-resolve-it.aspx)找到了解决方案- 我需要添加

```
.SetAttribute("not-found", "ignore"); 
```

到映射。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-07T19:19:13.500

您是否已验证您引用的属性仍在延迟加载？为了让 NHibernate 延迟加载引用，它需要确保引用不是 NULL。当您设置 not-found="ignore" 时，您间接告诉 NHibernate 引用可能不存在，从而阻止 NOT NULL 约束有效。在上述情况下，您不会遇到错误，但您可能会观察到对数据库的急切调用以加载您的组。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-08T08:12:28.413

在我正在设置的应用程序上

```
lazy="proxy" 
```

解决了这个问题。

# java - 哪个 Weblogic 10.3 JAR 包含 weblogic.rmi.RemoteException

> ID：618616
> 
> 赞同：1
> 
> 时间：2009-03-06T12:03:52.883
> 
> 标签：java, jar, weblogic, rmi

我正在尝试追踪包含 weblogic.rmi.RemoteException 的 Weblogic 10.3 JAR，以解决构建路径问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-06T13:36:49.510

我终于在 $BEA-HOME/modules/com.bea.core.weblogic.rmi.client_1.4.0.0.jar 找到了

似乎在 10.3 或（10g 作为 Oracle 的品牌）中，他们已经将 $BEA-HOME/wlserver_10.x/server/lib/weblogic.jar 中的很多内容移到了 bea 安装根目录中的单独模块目录中.

我还必须在构建路径中包含 $BEA-HOME/modules/com.bea.core.weblogic.workmanager_1.4.0.0.jar 才能使用 com.bea.core.weblogic.rmi.client_1.4.0.0.jar

上面的脚本很有用，一个稍微简单的版本将通过子目录递归搜索它遇到的指定类的每个 jar 文件是

查找 -name "*.jar" -exec grep "" {} \;

例如 find -name "*.jar" -exec grep "weblogic/rmi/RemoteException.class" {} \;

我发现小费由

[http://snipplr.com/view/12702/find-in-which-jar-a-class-is-defined/](http://snipplr.com/view/12702/find-in-which-jar-a-class-is-defined/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T13:25:00.537

我没有在这里安装 WebLogic，但我保留了一个 shell/cygwin 脚本来查找 jar 中的类：

```
#! /bin/sh

target=$1
for jf in `find . -name '*.jar' -type f -print`; do
  jar tvf $jf | awk "/\/$target\.class/ { print \"$jf: \" \$NF }"
done 
```

只需调用类似 jarfind.sh 之类的脚本并将其放在路径中的某个位置。然后`jarfind.sh RemoteException`在你的 weblogic 树中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-06T12:29:29.827

它在我的 10.0 版的 server/lib/weblogic.jar 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-06T15:55:08.053

该网站[jarhoo](http://www.jarhoo.com/)声称拥有所有常见 JAR 文件的可搜索索引 - 但我已经多年没有使用它了，现在您似乎需要登录：

*   [www.jarhoo.com](http://www.jarhoo.com)

其他答案中给出的脚本显然会为您的 CLASSPATH 提供更好的结果:-)

# powershell - 如何在 PowerShell 中从数组创建 ArrayList？

> ID：618618
> 
> 赞同：24
> 
> 时间：2009-03-06T12:04:09.107
> 
> 标签：powershell

我有一个数组中的文件列表。我想枚举这些文件，并从中删除特定文件。显然我不能从数组中删除项目，所以我想使用`ArrayList`. 但以下内容对我不起作用：

```
$temp = Get-ResourceFiles
$resourceFiles = New-Object System.Collections.ArrayList($temp) 
```

`$temp`数组在哪里。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2009-03-06T12:24:47.170

我也无法让该构造函数工作。然而，这似乎有效：

```
# $temp = Get-ResourceFiles
$resourceFiles = New-Object System.Collections.ArrayList($null)
$resourceFiles.AddRange($temp) 
```

您还可以在构造函数中传递一个整数来设置初始容量。

当您说要枚举文件时，您是什么意思？为什么你不能将想要的值过滤到一个新的数组中？

**编辑：**

看来您可以像这样使用数组构造函数：

```
$resourceFiles = New-Object System.Collections.ArrayList(,$someArray) 
```

注意逗号。我相信正在发生的事情是，当您调用 .NET 方法时，您总是将参数作为数组传递。PowerShell 解压缩该数组并将其作为单独的参数传递给方法。在这种情况下，我们不希望 PowerShell 解包数组；我们想将数组作为一个单元传递。现在，逗号运算符创建数组。因此 PowerShell 解包数组，然后我们使用逗号运算符再次创建数组。我认为这就是正在发生的事情。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2011-08-16T06:29:44.133

可能是最短的版本：

```
[System.Collections.ArrayList]$someArray 
```

它也更快，因为它不调用相对昂贵`New-Object`。

# web-services - 经典的 Asp Web 服务问题

> ID：618621
> 
> 赞同：2
> 
> 时间：2009-03-06T12:05:43.380
> 
> 标签：web-services, asp-classic

我正在尝试创建一个代码以允许现有的经典 asp 程序使用 asp.net web 服务。从经典的 asp 更新不是一种选择，因为我在一家大公司工作，事情就是这样。

我一直在浏览大量据称对此有所帮助的教程，但我还没有设法让它们工作。作为一个初学者，我可能犯了一些真正明显的错误，但我不知道是什么。

首先，Web 服务位于外部服务器上。“Greeting”方法需要一个 String 参数，通过该参数它可以确定返回哪个 String。向它输入“g”会产生这个xml：

```
  <?xml 版本="1.0" 编码="utf-8" ?>
  <string xmlns="http://server1/Logger_WebService/">问候和欢迎！</string>

```

我假设获取内容的 xpath 是“string/*”还是“*”？

接下来，我的 Web 服务本身如下所示：

```
    <WebMethod()> _
    公共函数问候（ByVal stringel As String）作为字符串

        如果 stringel.ToLower = "g" 那么
            返回“问候和欢迎！”
        别的
            回“再见！”
        万一

    结束功能

```

Web 服务在常规的 asp.net 解决方案中运行良好。

现在问题来了，经典的 asp 代码看起来像这样（我尝试了 4 种不同的方式让它工作，SOAP 工具包安装在 Web 服务服务器上，所有示例均取自教程并进行了修改）：

```
'******* 使用获取方法
Dim wsurl="http://server1/Logger_WebService/service.asmx/Greeting?g"
昏暗的xmlhttp
设置 xmlhttp=Server.CreateObject("MSXML2.ServerXMLHTTP")
xmlhttp.open "GET",wsurl,false
xmlhttp.send
暗值
'rValue=xmlhttp.responseXML.selectSingleNode("string") '使用 XPATH 作为输入参数
' 或者您可以获得响应 XML
rValue=xmlhttp.responseXML
设置 xmlhttp=nothing

'---------------------------------------------------- -----

'******** 使用 POST 方法
Dim wsurl="http://server1/Logger_WebService/service.asmx/Greeting"
昏暗的xmlhttp
设置 xmlhttp=Server.CreateObject("MSXML2.ServerXMLHTTP")
xmlhttp.open "POST",wsurl,false
xmlhttp.send "stringeli=g"
暗值
rValue=xmlhttp.responseXML.selectSingleNode("字符串")
' 或者您可以获得响应 XML
' rValue=xmlhttp.responseXML
设置 xmlhttp=nothing

'---------------------------------------------------- -----

Response.Write 消费WebService()

函数消费WebService()
    暗淡 webServiceUrl、httpReq、节点、myXmlDoc

    webServiceUrl = "http://server1/Logger_WebService/service.asmx/Greeting?stringel=g"

    设置 httpReq = Server.CreateObject("MSXML2.ServerXMLHTTP")

    httpReq.Open "GET", webServiceUrl, False
    http请求发送

    设置 myXmlDoc =Server.CreateObject("MSXML.DOMDocument")
    myXmlDoc.load(httpReq.responseBody)

    设置 httpReq = 无

    设置节点 = myXmlDoc.documentElement.selectSingleNode("string/*")

    consumeWebService = " " & node.text

结束功能

'---------------------------------------------------- -----

  Response.Write(Helou())

  公共函数 Helou()
     SET objSoapClient = Server.CreateObject("MSSOAP.SoapClient")
     objSoapClient.ClientProperty("ServerHTTPRequest") = True

    ' 需要使用您的 Web 服务 WSDL 的 url 进行更新，并且是
    ' 后跟 Web 服务名称
    调用 objSoapClient.mssoapinit("http://server1/Logger_WebService/service.asmx?WSDL", "Service")

    ' 使用 SOAP 对象调用所需的 Web 方法  
    Helou = objSoapClient.Greeting("g")    
  结束功能

```

我真的不知道为什么没有任何效果，我已经用各种不同的设置等方式尝试了它们。一个可能的问题是 Web 服务位于 ASP.Net 中要求我输入此“[ServiceVariableName”的服务器上].Credentials = System.Net.CredentialCache.DefaultCredentials"。我是从公司网络内部执行此操作的，并且存在一些安全和授权问题。

我只需要能够发送信息，而不是接收，因为我将使用的实际方法是将信息插入数据库。但就目前而言，仅仅让 Hello World 工作起来似乎已经提供了足够的挑战。:)

感谢所有的帮助。我会试着在假期回来查看并回复评论，毫无疑问，我遗漏了需要的信息。

请像对白痴一样说话，我是新手，所以我很可能会以这种方式更好地理解。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T14:04:49.223

您可能会考虑编写一些 .NET 包装器代码来使用 Web 服务。然后将 .NET 代码公开为 ASP 可以直接调用的 COM 对象。如您所见，在经典 ASP 中没有工具可以帮助您，因此请考虑尽可能多地使用 .NET 作为工具。然后，使用 COM 在两者之间进行互操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-11T10:28:29.293

一位同事花了一整天的时间终于让它工作了。决定发送信息比接收信息要容易得多。由于 Web 服务的最终目的是将数据写入数据库而不是返回任何消息，因此我们尝试通过在 Web 服务中简单地写入文件来实现这一目标。

需要进行以下更改：

首先，为了让它通过公司网络工作，必须在 IIS 中启用匿名访问。

Web 服务需要在 web.config 中进行以下更改：

```
<网络服务>
  <协议>
    <add name="HttpGet"/>
  </协议>
</web服务>

```

并且 Web 服务代码隐藏更改如下：

```
<WebMethod()> _
    公共函数问候（ByVal stringel As String）作为字符串

        Dim kirj 作为 StreamWriter
        'kirj = File.CreateText("\\server1\MyDir\Logger_WebService\test.txt")
        '如果在本地运行，则需要使用上面的行，否则需要使用下面的行
        kirj = File.CreateText("C:\Inetpub\serverroot\MyDir\Logger_WebService\test.txt")

        kirj.WriteLine（字符串）
        kirj.Close()
        kirj.Dispose()

        返回字符串
    结束功能

```

当我们完成上述工作时，只需将其应用于大型 Web 方法即可解析和检查信息并将其插入数据库中。

经典的 asp 代码本身需要添加到旧页面中，这是最大的问题，最终结果还是比较简单。

```
函数工作（）
    message = "http://server1/mydir/logger_webservice/service.asmx/Greeting?" &_
            "stringel=" & "它有效"
    设置 objRequest = Server.createobject("MSXML2.XMLHTTP")

    使用 objRequest
    .open “GET”，消息，假
    .setRequestHeader "内容类型", "文本/xml"
    。发送
    结束于

    作品 = objRequest.responseText
结束函数
作品（）

```

花了大约一周的时间来解决这个问题。:/ 最困难的部分是根本不知道任何时候出了什么问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-06T12:36:26.613

您可能缺少 SOAPAction 标头。这是一个工作示例：

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
public class GreetingService : WebService
{
    [WebMethod]
    public string Greet(string name)
    {
        return string.Format("Hello {0}", name);
    }
} 
```

以及调用 VBS 脚本：

```
Dim SoapRequest
Set SoapRequest = CreateObject("MSXML2.XMLHTTP")

Dim myXML 
Set myXML = CreateObject("MSXML.DOMDocument")

myXML.Async=False
SoapRequest.Open "POST", "http://localhost:4625/GreetingService.asmx", False
SoapRequest.setRequestHeader "Content-Type","text/xml;charset=utf-8"
SoapRequest.setRequestHeader "SOAPAction", """http://tempuri.org/Greet"""

Dim DataToSend
DataToSend= _
    "<soapenv:Envelope xmlns:soapenv=""http://schemas.xmlsoap.org/soap/envelope/"" xmlns:tem=""http://tempuri.org/"">" & _
        "<soapenv:Header/>" & _
        "<soapenv:Body>" & _
            "<tem:Greet>" & _
                "<tem:name>John</tem:name>" & _
            "</tem:Greet>" & _
        "</soapenv:Body>" & _
    "</soapenv:Envelope>"

SoapRequest.Send DataToSend

If myXML.load(SoapRequest.responseXML) Then
    Dim Node
    Set Node = myXML.documentElement.selectSingleNode("//GreetResult")
    msgbox Node.Text

    Set Node = Nothing
End If

Set SoapRequest = Nothing
Set myXML = Nothing 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-09T06:32:18.660

可能需要仔细检查 MSXML 组件的版本。您是否使用 Windows 身份验证？我注意到 IIS 7、Classic ASP 和 MSXML 存在一些奇怪的 XML 解析问题。

这也将有助于获得有用的错误。检查 ** myXML.parseError.errorCode**，如果它不是 0，则写出错误。

参考代码：

```
If (myXML.parseError.errorCode <> 0) then
    Response.Write "XML error: " & myXML.parseError.reason
Else
    'no error, do whatever here
End If
'You get the idea... 
```

# c# - 框架给我关于无法直接启动的错误

> ID：618622
> 
> 赞同：0
> 
> 时间：2009-03-06T12:05:46.560
> 
> 标签：c#, .net, frameworks, class-design

我创建了 Web 项目，并为框架添加了新的类库。该框架包括 DAL。但添加了参考。并且运行 no this 不会让我失败。runnig 给我错误：

" 不能直接启动输出类型为类库的项目

为了调试这个项目，将一个可执行项目添加到这个引用库项目的解决方案中。将可执行项目设置为启动项目”

请帮帮我...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-06T12:09:52.120

您收到此错误是因为类库的项目被选为 Visual Studio 中的启动项目。右键单击您的 Web 项目并选择“设置为启动项目”。

# c# - 以编程方式将部分添加到从 app.config 读取的配置中

> ID：618623
> 
> 赞同：0
> 
> 时间：2009-03-06T12:06:08.900
> 
> 标签：c#, configuration, app-config, configurationsection

我正在开发一个组件/组件，该组件/组件将分发给其他开发人员并包含在他们的系统中。

为了尽量减少他们必须做的工作，所有配置都在一个单独的文件 (my.config) 中完成。

我当前的问题是我正在使用的库需要将配置添加到应用程序的 app.config 文件中。我无法修改它，以便它读取我的自定义配置文件。

有什么方法可以将部分/设置添加到当前配置中，使其表现得好像是从 app.config 中读取的一样？

我可以添加到 app.config，所以它只能在运行时工作。

谢谢，乔纳斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-06T12:11:49.277

我认为您无法在不更改基础文件的情况下更新配置。这是一个只读的东西。

# uml - UML类图关系类型题

> ID：618630
> 
> 赞同：1
> 
> 时间：2009-03-06T12:07:44.200
> 
> 标签：uml

我有一个具有以下方法的数据类：

*   执行UDIQuery（字符串查询）
*   ExecuteSelectQuery（字符串查询）
*   ExecuteSP(string anme, string[,] params)

我有很多使用数据类的类。现在我想创建一个类图，但我不知道这些类与数据类有什么样的关系。是复合的吗？是 1:1 还是 .. ？

使用数据类的类的一个示例是 Staff 类。此类有一个方法 Load()，它将加载一个带有员工 ID 的员工对象。此方法包含一个查询，该查询传递给 Data 类的 ExecuteSelectQuery(string query) 方法。

编辑：数据类不是静态的。但是，我有我的怀疑。我其实不知道该怎么做。关键是，它唯一做的就是执行查询并返回结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-06T12:19:50.257

我建议它是一种***使用***依赖关系。

有关简要说明，请参见[此处](http://publib.boulder.ibm.com/infocenter/rsmhelp/v7r0m0/index.jsp?topic=/com.ibm.xtools.modeler.doc/topics/cdepend.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T12:30:36.190

我会查询你的类的命名。类名通常应该是单数名词。例子;

*   窗户
*   人
*   交易

数据是复数，无论如何我认为它应该是数据库。

同样对于 Staff - 再次是复数，我认为它应该是 MemberOfStaff。当然，除非它是一份工作人员名单，在这种情况下，我会称它为部门、项目或部门之类的东西——无论你的问题领域是什么。

你会发现为类想出好名字非常困难，但值得付出努力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-06T12:21:24.760

聚合、复合和 1 对 1 关系之间的区别有点模糊，有些武断。

如果一个类拥有另一个类（负责生命周期），我使用聚合（开放菱形）。

在所有其他情况下，我使用 1 对 1 关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-06T12:21:33.887

类是由使用它的类实例化的还是方法是静态的？如果它们是静态的，我会将其表示为不合格的依赖项（从使用数据类的类指向数据类的虚线箭头）

如果使用数据类的类创建自己的该类的私有实例，这将是 1:1 组合（假设数据类实例的生命周期与使用它的对象相关联）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-06T12:23:47.047

我不能不评论您的整体设计，我会尝试将 Load 方法移出 Staff 类，以便该类不直接依赖于 Data 类。

在您现有设计的范围内，我建议如下：如果人员类包含数据类的实例变量，则它是一个关联。如果实例化数据类只是为了检索实例，那么它只是给定类型的依赖项，就像@toolkit 所说的那样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-06T12:24:14.333

没有足够的数据。

给我们一些课程大纲之类的。据我所见，我实际上不会将其称为数据类（它看起来更像是数据*访问器*），这听起来*可能*是单例（多：1，聚合或关联），或者如果实例化将是1:1 组件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-06T12:51:39.867

> 现在我想创建一个类图，但我不知道这些类与数据类有什么样的关系。

我们也没有 - 您只描述了 Data 类，并没有说明 Staff 如何获取它使用的 Data。

如果 Staff 持有数据类的一个或多个实例，则 Staff 和 Data 之间存在关联，或者 Staff 具有 Data 类型的属性（如果 Data 具有值语义）。

如果 Data 实例被多个 Staff 实例引用，并且它们的生命周期依赖于 Staff 实例的引用，那么这可以显示为聚合关系。如果 Data 实例没有在 Staff 实例之间共享并且它们的生命周期依赖于被引用，那么这可以显示为组合关系。

如果 X 不保留它使用的 Data 实例，则使用关系是合适的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-24T03:58:10.450

依赖和使用是两种最弱的“连接器”。您可能会考虑刻板印象、关键字来细化关系。您可能会发现实例化、调用、创建、发送构造型工作。尽管正确的答案似乎是使用，但没有更多信息。

# c# - 如何从 C# 代码访问 wpf 中的 ResourceDictionary？

> ID：618648
> 
> 赞同：65
> 
> 时间：2009-03-06T12:15:29.860
> 
> 标签：c#, wpf, resources

我`DataTemplate`在要通过 C# 代码访问的 xaml 文件中定义了一个。谁能告诉我如何访问它？我添加了一个新`ResourceDictionary`文件，它的名称是**Dictionary1.xaml**。我有一个数据模板，例如：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <DataTemplate x:Key="mytemplate">
        <TextBlock Text="Name:" Background="Blue"/>
    </DataTemplate>
</ResourceDictionary> 
```

不是我有一个`ListBox`名为 listBox1 并且我想将它分配给它的`Itemtemplate`属性，但我不知道我该怎么做？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2014-09-02T14:17:42.313

由于`Application.Current`在我的情况下为空，我最终使用了这个：

```
 var myResourceDictionary = new ResourceDictionary();
    myResourceDictionary.Source =
        new Uri("/DllName;component/Resources/MyResourceDictionary.xaml",
                UriKind.RelativeOrAbsolute); 
```

然后通过使用获取我需要的指定密钥 `myResourceDictionary["KeyName"] as TypeOfItem`

（[来源](http://akashsoni7.blogspot.co.il/2012/12/wpf-how-to-use-resource-dictionary-in-c.html)）

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2009-03-06T12:28:43.323

你到底在哪里定义它？

如果您在对象的 ResourceDictionary 中定义它，那么

```
Application.Current.Resources[typeof(yourDataTemplateTargetType)] 
```

应该管用。如果您将其定义为其他事物的成员，例如 ItemsControl，您需要获取 ItemsControl 实例的句柄并调用 ItemTemplate 属性。

编辑：好的，我认为我们正在取得进展。因此，您在自己的文件中定义了 ResourceDictionary。在您可以在您的 UI 中使用它并从您的代码中访问它之前，您需要将该 ResourceDictionary 合并到您的应用程序中。你在做这个吗？

如果您是，那么下一步就是获取此资源。每个 FrameworkElement 都有一个名为[FindResource](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.findresource.aspx)的方法。这个方法很棒，因为它遍历 ResourceDictionary 树并尝试使用键定位资源。因此，如果您想从 UserControl 访问此资源，您可以在后面的代码中执行以下操作：

```
FindResource(typeof(yourDataTemplateTargetType)); 
```

如果这对您不起作用，请告诉我们您是如何声明此资源字典的，以及它是如何合并到您的应用程序资源中的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-03-06T12:21:51.063

例如，如果您在 App.xaml 文件的资源字典中有一个 Button 模板，您可以使用以下代码访问它：

```
Application.Current.Resources[typeof(Button)] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-12-03T21:25:57.073

如果您在同一个项目中获取资源，请尝试以下操作：

```
yourControl.Style = FindResource("YourResourceKey") as Style; 
```

否则，试试这个：

```
ResourceDictionary res = (ResourceDictionary)Application.LoadComponent(new Uri("/ProjectName;component/FolderName/ResourceDictionaryName.xaml", UriKind.Relative)); 
yourControl.Style = (Style)res["YourResourceKey"]; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-07-11T14:40:36.487

如果您使用如下代码合并了资源字典

```
<Window x:Class="MainWindow">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="DefaultStyle.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
</Window> 
```

然后，您需要指定控件名称（在本例中为 MainWindow）而不是 Application.Current.Resources["ResourceKey"]，如下所示

```
var style = Application.Current.MainWindow.Resources["ResourceKey"];
// OR
var style = Application.Current.MainWindow.TryFindResource("ResourceKey"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-12T21:51:52.270

您可以访问添加到项目中的资源字典，如下所示：

```
var rd = new ResourceDictionary();
rd.Source = new Uri("ms-appx:///Dictionary1.xaml"); 
```

然后您可以访问存储在资源字典中的资源，如下所示：

```
someObject.Property = rd["mytemplate"]; 
```

**注意：**
您必须根据您创建的相对于项目基本目录的位置来修改资源字典的 URI。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-11-11T11:48:55.640

我在这里找到了答案

[https://docs.microsoft.com/en-us/dotnet/framework/wpf/advanced/how-to-use-a-resourcedictionary-to-manage-localizable-string-resources](https://docs.microsoft.com/en-us/dotnet/framework/wpf/advanced/how-to-use-a-resourcedictionary-to-manage-localizable-string-resources)

*   创建资源字典“ColorResources.xaml”
*   添加到它：蓝色

*   编辑您的 app.xml 并添加：

*   使用代码中的颜色

    var color = (System.Windows.Media.Color)Application.Current.FindResource("ButtonColor1");

瞧

ps：管理员可以修复代码吗？不显示，谢谢

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-22T15:08:55.797

以上任何一种方法都可以根据位置获取资源，如果您关注 MVVMm，我建议您这样做：

1.  创建一个像 ProvideDataTemplateService 这样的服务，（创建一个通常继承自 Behavior 的服务）
2.  使用您选择的容器将此服务注入您希望对 DataTemple 拥有 ace 的位置。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-04T11:58:30.473

在我的一生中，虽然我能够通过 XAML 加载我的资源字典，但我无法通过“代码隐藏”（在 C# 中）加载它。

所以我求助于加载它的视图：（MyView.xaml）

```
 <UserControl.Resources>
    <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/My.Proj;component/My/Path/myResourceDictionary.xaml" />
      </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
  </UserControl.Resources> 
```

然后通过实例化该视图并访问它在我的 UT 中访问它：

`new MyView().Resources.MergedDictionaries[0]`

哈克，但有效。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-13T17:15:46.993

只是在这里添加另一个答案，以防您没有视图或`Application.Current`为空。我意识到这可能并不常见，但就我而言，我有一个父应用程序的插件并且`Application.Current`为空；我还想将我的一个资源作为 an 传递给父级，`ImageSource`因此我没有创建 XAML 视图来直接从中获取资源。

您还可以将字典制作成可创建对象的代码。只需`x:Class`在 XAML 中设置属性，然后`.xaml.cs`在后面的代码中创建一个文件。您更新的 XAML，让我们调用代码文件`MyDictionary.xaml`，然后看起来像这样：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                    x:Class="Some.Namespace.MyDictionary"
                    mc:Ignorable="d">
    ...Resources...
</ResourceDictionary> 
```

( ) 后面的代码`MyDictionary.xaml.cs`如下所示：

```
using System.Windows;

namespace Some.Namespace
{
    public partial class MyDictionary : ResourceDictionary
    {
        public MyDictionary()
        {
            InitializeComponent();
        }
    }
} 
```

不要忘记调用`InitializeComponent()`，因为这是加载资源的原因。**其实不抱歉，请参阅下面的编辑**

完成此操作后，您可以简单地在代码中的任何位置构造类的实例并通过键引用资源，如下所示：

```
var dictionary = new MyDictionary();
var resource = dictionary["whateverKey"] as WhateverResourceType; 
```

感谢[这篇文章](https://stackoverflow.com/questions/92100/is-it-possible-to-set-code-behind-a-resource-dictionary-in-wpf-for-event-handlin)导致了这个想法。

**编辑**

刚刚遇到了一个潜在的问题。在我的某些控件上使用此设置时出现“无法重新初始化 ResourceDictionary 实例”异常。在进一步的研究中，这可能与调用`InitializeComponent`构造函数有关。相反，我从后面的代码中删除了构造函数，并添加了一个静态方法来获取初始化实例，如下所示：

```
public static MyDictionary ConstructInitializedInstance()
{
    var dictionary = new MyDictionary();
    dictionary.InitializeComponent();
    return dictionary;
} 
```

您也可以在后面的代码中创建和初始化。

# c# - 如何在运行时为隐藏的 DataGridView 列输入默认值？

> ID：618649
> 
> 赞同：0
> 
> 时间：2009-03-06T12:15:42.370
> 
> 标签：c#, datagridview

我正在使用 DataGridView 在运行时接受某些值。我在 DataGridView 中有一个隐藏的外键列，它应该包含一个默认值，而 DataGridView 中的其他列正在使用 OleDbAdapter 类的 Update() 方法进行更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-06T12:24:52.583

来自同一绑定数据源的外键列是否与其余数据相同？

编辑：

首先，您需要找出要编辑的行，如果事件是基于 klick 的，则可以使用以下内容：

```
this.dgv.Rows[e.RowIndex].Cells[e.ColumnIndex].Value 
```

好的，您还可以通过其名称值访问任何列。您可以使用编辑列

```
this.dgv.Rows[e.RowIndex].Cells["YOUR_HIDDEN_COLOMN"].Value = "NEW_VALUE" 
```

我希望我能帮助，如果没有，请明确你想要做什么。:-)

编辑2：->如果您想编辑所有行，只需使用foreach（尽管itemArray要求您使用列号。我认为这不是最好的技术，但它是我最了解的技术：>）

```
foreach( DataRow Row in YOUR_DATASOURCE.Table[0].Rows)
{
   Row.ItemArray[YOUR_HIDDEN_COLOMN_NUMBER] = "YOUR_DEFAULT_VALUE"
} 
```

# json - GWT/彗星：有什么经验吗？

> ID：618656
> 
> 赞同：6
> 
> 时间：2009-03-06T12:18:30.587
> 
> 标签：json, gwt, comet

有没有办法从 GWT“订阅”到 JSON 对象流并在保持连接的情况下监听传入事件，而不是一次尝试全部获取它们？我相信这项技术的流行语是“彗星”。

假设我有一个 HTTP 服务，它打开保持连接，并实时将带有传入股票报价的 JSON 对象放在那里：

`{"symbol": "AAPL", "bid": "88.84", "ask":"88.86"}`
`{"symbol": "AAPL", "bid": "88.85", "ask":"88.87"}`
`{"symbol": "IBM", "bid": "87.48", "ask":"87.49"}`
`{"symbol": "GOOG", "bid": "305.64", "ask":"305.67"}`
`...`

我需要监听这些事件并实时更新 GWT 组件（表、标签）。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-07-22T21:19:22.123

StreamHub 有一个 GWT Comet 模块：

[http://code.google.com/p/gwt-comet-streamhub/](http://code.google.com/p/gwt-comet-streamhub/)

[StreamHub](http://www.stream-hub.com/)是一个带有免费社区版的 Comet 服务器。这里有一个例子[。](http://stream-hub.com/demo/gwt-comet-stock-table/gwt-stock-table-demo.html)

您需要下载 StreamHub Comet 服务器并创建一个新的 SubscriptionListener，使用 StockDemo 示例作为起点，然后创建一个新的 JsonPayload 来流式传输数据：

```
Payload payload = new JsonPayload("AAPL");
payload.addField("bid", "88.84");
payload.addField("ask", "88.86");
server.publish("AAPL", payload);
... 
```

从 google 代码站点下载 JAR，将其添加到您的 GWT 项目类路径中，并将包含添加到您的 GWT 模块中：

```
<inherits name="com.google.gwt.json.JSON" />
<inherits name="com.streamhub.StreamHubGWTAdapter" /> 
```

从您的 GWT 代码连接和订阅：

```
StreamHubGWTAdapter streamhub = new StreamHubGWTAdapter();
streamhub.connect("http://localhost:7979/");
StreamHubGWTUpdateListener listener = new StockListener();
streamhub.subscribe("AAPL", listener);
streamhub.subscribe("IBM", listener);
streamhub.subscribe("GOOG", listener);
... 
```

然后在更新侦听器（也在 GWT 代码中）以您喜欢的方式处理更新：

```
public class StockListener implements StreamHubGWTUpdateListener {
      public void onUpdate(String topic, JSONObject update) {
          String bid = ((JSONString)update.get("bid")).stringValue();
          String ask = ((JSONString)update.get("ask")).stringValue();
          String symbol = topic;
          ...
      }
} 
```

不要忘记在您的 GWT 项目主 HTML 页面中包含 streamhub-min.js。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-08T05:27:27.810

我已经在几个项目中使用了这种技术，尽管它确实存在问题。我应该注意，我只是专门通过 GWT-RPC 完成了这项工作，但无论您使用何种机制来处理数据，原理都是相同的。取决于你到底在做什么，可能没有太多需要过度复杂的事情。

首先，在客户端，我不相信 GWT 可以正确支持任何类型的流数据。在客户端可以实际处理数据之前，连接必须关闭。从服务器推送的角度来看，这意味着您的客户端将连接到服务器并阻塞，直到数据可用，此时它将返回。无论在完成的连接上执行什么代码，都应该立即重新打开与服务器的新连接以等待更多数据。

从服务器端，您只需进入一个等待周期（java 并发包特别方便地处理阻塞和超时），直到有新数据可用。在那个时间点，服务器可以将数据包返回给客户端，客户端将相应地更新。根据您的数据流的情况，有很多考虑因素，但这里有一些需要考虑：

*   客户获得每一次更新都很重要吗？如果是这样，那么服务器需要缓存客户端获取一些数据然后重新连接之间的任何潜在事件。
*   会有大量更新吗？如果是这种情况，最好每隔几秒打包多个更新并一次下推块，而不是让客户端一次获得一个更新。
*   服务器可能需要一种方法来检测客户端是否已离开，以避免为该客户端堆积大量缓存包。

我发现服务器推送方法存在两个问题。对于大量客户端，这意味着 Web 服务器上有大量打开的连接。根据所讨论的 Web 服务器，这可能意味着要创建和保持打开大量线程。第二个与典型浏览器对每个域 2 个请求的限制有关。如果您能够为二级域提供图像、css 和其他静态内容，则可以缓解此问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-08T04:56:44.233

确实有一个类似彗星的 gwt 库 - [http://code.google.com/p/gwteventservice/](http://code.google.com/p/gwteventservice/)

但是我没有亲自使用过，所以不能真正保证它的好坏，但是doco看起来还不错。值得一试。

我见过其他一些，比如[gwt-rocket 的 cometd](http://code.google.com/p/rocket-gwt/)库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-06T12:27:17.803

可以在[这里找到为 GWT 实现 Comet 的一些初步想法……](http://www.jroller.com/masini/entry/a_comet_implementation_for_google)虽然我想知道是否有更成熟的东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-06T14:38:33.557

[此外，那里](http://docs.codehaus.org/display/JETTY/GWT)还提供了一些关于 GWT/Comet 集成的见解，使用了更尖端的技术：“Jetty Continuations”。值得一看。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-01-29T16:35:19.120

[您可以在此处](http://wintermuteblog.blogspot.com/2010/01/websphere-gwt-comet.html)找到有关如何为 IBM WebSphere Application Server 执行此操作的描述（带有一些源示例）。与 Jetty 或任何其他支持 Comet 的 J2EE 服务器应该不会有太大的不同。简而言之，这个想法是：通过 GWT RPC 将您的 Java 对象编码为 JSON 字符串，然后使用 Cometd 将其发送到客户端，Dojo 接收它，触发您的 JSNI 代码，调用您的小部件方法，在其中反序列化对象再次使用 GWT RPC。瞧！:)

我对这种设置的体验是积极的，除了安全问题之外没有任何问题。在这种情况下如何实现彗星的安全性并不清楚......似乎彗星更新servlet应该有不同的URL，然后可以应用J2EE安全性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-12-02T20:45:23.533

JBoss Errai 项目有一个消息总线，它提供双向消息传递，是 cometd 的一个很好的替代方案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-26T10:43:36.680

我们在 GWT 应用程序中为 ServerPush/Comet使用 Atmosphere Framewrok( [http://async-io.org/ )。](http://async-io.org/)

在客户端，框架具有非常简单的 GWT 集成。在服务器端，它使用普通的 Servlet。

我们目前在生产环境中使用它，在集群环境中有 1000 多个并发用户。我们在途中遇到了一些问题，必须通过修改 Atmosphere 源来解决。文档也很薄。

框架可以免费使用。

# .net - FCL 是否已经有异常意味着方法执行失败？

> ID：618661
> 
> 赞同：0
> 
> 时间：2009-03-06T12:19:50.287
> 
> 标签：.net, exception, fcl

我有我自己的异常，它在**方法执行失败时**抛出（在我的例子中是 p/invoke）。

```
public PInvokeException(string methodName)
: base(String.Format(CultureInfo.CurrentCulture,
"An error occured while external method '{0}' call",
methodName)) { } 
```

但我想用已经存在的替换它。整箱里有这样的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-13T12:09:34.327

您的调用者是否会根据您是否抛出 PInvokeException 与 InvalidOperationException 来采取不同的操作？如果是这样，则创建一个自定义 PInvokeException。否则使用 InvalidOperationException 和明确的错误消息。

请参阅[如何设计异常层次结构](http://blogs.msdn.com/kcwalina/archive/2007/01/30/ExceptionHierarchies.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T12:31:45.173

BCL 中没有专门用于 PInvoke 调用的内容。存在的最接近的是 Marshal.GetExceptionForHR 和 Marshal.GetHRForLastWin32Error。每当 PInvoke 调用失败时，您可以使用这两个函数的组合来引发适当的异常。

前任：

```
throw Marshal.GetExceptionForHR(Marshal.GetHRForLastWin32Error()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-09T11:27:11.107

有一个：[Win32Exception](http://msdn.microsoft.com/en-us/library/system.componentmodel.win32exception.aspx "Win32异常")。

如果您从中引发异常的方法是 .Net 方法，则您*应该*使用自定义异常（或现有异常，具体取决于发生的情况）。

如果您代表调用您的方法的人调用方法（或与反射有关 - 但 MethodInfo.Invoke 无论如何都会这样做），例如：

```
public void DoIt(Action action) { action(); } 
```

您应该使用[TargetInvocationException](http://msdn.microsoft.com/en-us/library/system.reflection.targetinvocationexception.aspx "目标调用异常")异常。

如果您无法处理异常，请重新抛出它，或忽略它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-13T12:13:54.957

怎么样`System.Runtime.InteropServices.ExternalException`？

# .net - 应该在存储过程之外还是在内部指定事务？

> ID：618672
> 
> 赞同：15
> 
> 时间：2009-03-06T12:23:57.377
> 
> 标签：.net, sql, sql-server, stored-procedures, isolation

我们可以在事务中包装对存储过程的调用并指定隔离级别。

或者我们可以把事务放在存储过程里面，在那里指定一个隔离级别。

哪个更好？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-06T12:34:36.757

您应该采用一致的方法。请注意，在存储过程中回滚事务将回滚任何嵌套事务范围，包括任何外部范围。

我建议你不要在程序之外进行交易。这样，您就可以完全控制。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-06T12:53:05.183

存储过程内部是我认为最合适的位置。

良好事务设计的基本规则之一是尽可能缩短事务的生命周期，因此提交应该在事务逻辑完成后立即发生。在存储过程之外控制事务将导致不必要地延长事务的生命周期。

您还应该考虑在过程中定义事务也会使您的代码更加清晰。否则，如果另一个编码人员需要修改给定的存储过程，他们将不得不依赖调用者确实将过程包装在事务中的事实。在过程中包含事务明确定义了您的事务处理。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-06T13:18:44.793

仅供参考，Oracle 不支持嵌套事务，如果您在外部级别开始事务然后调用一系列存储过程，则任何发出提交的存储过程都将提交整个事务，而不仅仅是它发起的交易。因此，当从 C# 等语言调用时，您必须管理存储过程之外的事务

只是想您可能会感兴趣，以进行比较。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-06T13:21:40.357

在数据库 API 的外层，或者至少在外层。

如果您在每个存储过程中提交，那么您不妨打开自动提交，想象以下存储过程

```
create_user_with_email_address
  calls -> create_user
  calls -> create_email_address 
```

如果您在 create_user/create_email_address 中提交，则 create_user_with_email_address 不再是事务性的，如果 create_email_address 失败，则 create_user 已经提交，并且您的数据已损坏。

根据需要将交易放在尽可能高的位置，以保留其中的所有内容。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-06T12:31:06.267

这取决于业务逻辑，如果 SP 是原子的，它应该实现自己的事务。如果您不这样做，您将在未来冒错误代码的风险，而不是创建包装事务。所以在回答你的问题时，我认为交易应该在 SP 内部进行。

当然，没有什么可以阻止您同时进行这两种操作，原子 SP 实现它们自己的事务，并且在该范围之外，可能已经存在其他更广泛的事务。

通常，在 SP 中使用事务创建时，您可能已经在事务范围内，在执行 Commit/Rollback 时必须为此实例编写代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-06T16:05:13.537

我们在 Sproc 中执行以下操作，因为如果我们只是回滚它会增加外部 Sproc 中的事务计数，这可能会向应用程序生成一个警告 - 如果它不期望/处理它可能会导致应用程序错误.

但是，此方法仅回滚“本地”事务，因此外部“调用者”必须适当地解释返回值；或者使用 RAISERROR 或类似的。

```
BEGIN TRANSACTION MySprocName_01
SAVE  TRANSACTION MySprocName_02
...
IF @ErrorFlag = 0
BEGIN
    COMMIT TRANSACTION MySprocName_01
END
ELSE
BEGIN
    ROLLBACK TRANSACTION MySprocName_02
    COMMIT TRANSACTION MySprocName_01
END 
```

# content-management-system - 什么是满足我需求的“最佳”免费 CMS？

> ID：618685
> 
> 赞同：4
> 
> 时间：2009-03-06T12:27:32.780
> 
> 标签：content-management-system

我的任务是为一个较小的非营利组织建立一个网站。我对 ASP.NET 有一点经验，但是因为 ASP.NET 托管在德国这里相当昂贵（我们还需要大量的网络空间和流量），而且因为有很多我认为我应该使用的功能列表基于 PHP/MySQL 的 CMS（如果我错了，请纠正我）。问题是哪一个？那里有很多免费的 CMS。如果我告诉你我需要什么，你能告诉我什么是好的选择吗？

这是我的要求（按优先级排序）：

1.  **易于使用**（安装、配置、维护）对于构建站点的我以及组织成员来说，他们必须能够轻松更改*某些*主页的内容，添加超页面，添加新的邮件列表上传文件到存储库等
2.  会员/**角色管理系统**。基于成员角色对文件管理系统中某些子页面、子论坛或文件夹等的访问必须受到限制。只有某些角色才能添加新的邮件列表或管理论坛。
3.  允许我或组织成员添加新地址、邮件列表或新闻通讯的邮件**系统**。
4.  一个**文件管理系统**。成员应该能够在服务器上上传任意文件并通过网络前端浏览它们。应根据成员权限限制对文件夹的访问。
5.  带有私人子**论坛**的公共论坛。
6.  **本地化**。呈现给站点访问者以及维护站点的成员的最终站点（如果不是全部）应尽可能以德语呈现。
7.  对整个网站的**设计/外观有**很好的控制。我应该很好地控制我希望网站的外观。
8.  一个充满活力的**社区**，有足够的动力在我迷路时寻找**资源和帮助。**
9.  **可扩展性**。如果缺少一些较小的功能，或者现有功能的行为不是我想要的方式，我自己轻松添加它会很酷。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-06T13:30:32.830

正如其他人所提到的，Joomla 对您来说可能是一个不错的选择，尽管 Wordpress 也可以工作（而且更容易）。但是，我强烈建议您查看[OpenSourceCMS.com](http://opensourcecms.com/)，它提供了许多免费和开源 CMS、博客、论坛、购物车等的演示。对于其中大多数，您可以同时尝试管理和前端. 花一些时间查看它们，然后当你找到一些你喜欢的东西时，通过访问他们的网站进一步调查它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-06T12:56:23.990

[Concrete5](http://www.concrete5.org/)是一个非常出色的新内容管理系统。易于主题化、用户友好、出色的管理小仪表板

它是开源的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-06T12:52:37.447

我的投票是[Joomla](http://joomla.org)。它具有您所讨论的大部分功能，如果不是作为扩展、组件或主题的核心。我已经设置了几个，并且在设置过程中很少需要使用任何编码，如果您需要帮助，还有一个充满活力的社区。它还与 BB 论坛、Coppermine 照片库等其他“同类最佳”应用程序完美集成。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-06T12:58:32.737

[Joomla！](http://joomla.org)似乎符合您的需求，我还建议将[Kunena](http://www.kunena.com/)用于论坛（与 Joomla 集成）和[DOCman](http://extensions.joomla.org/extensions/82/details)用于文件管理解决方案。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-06T13:17:05.687

好吧，我建议将 Drupal 用于任何类型的高级网站。虽然 Joomla！和类似的系统更容易上手，Drupal 更加灵活和可扩展。

您想完全控制主题吗？还是用户认证？访问控制？数据库查询？用户图片缩放？标签云？
当你需要它时它就在那里：）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-06T12:54:23.823

即使我是 ASP.NET 开发人员，我也会选择[Joomla 。](http://joomla.org)Joomla 非常灵活且可定制，因此它可以满足您的所有需求，因为它拥有庞大的社区。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-06T13:24:40.130

作为一个完整的 CMS 菜鸟，我问自己同样的问题。我从 Drupal 开始。当然你可以用它做很多事情。非常可扩展和可定制。

但是在 Drupal 中实现了我的第一个站点之后，我决定在 Joomla 中创建下一个站点，以便进行比较。结论：Joomla 非常容易上手，而且从头开始创建一个正常运行的网站所需的时间要少得多。当然，对于非常大的项目，Drupal 可以让您自定义更多，但是对于您建议的项目类型：我会推荐 Joomla...

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-25T21:18:38.833

当我最近问自己同样的问题时，我发现[这份比较 WordPress、Joomla、Drupal 和 Plone 的 PDF 报告非常有帮助。](http://www.idealware.org/comparing_os_cms/idealware_comparing_os_cms_report.pdf)以非营利组织为重点的好评论 - 在第 13-14 页上找到比较摘要/建议。

一定要阅读该报告，因为它讨论了每个软件包的优势/问题 - 考虑到您优先考虑的功能列表，我会推荐[**Joomla**](http://www.joomla.org)。[我认为你可以通过合理的努力和像DocMan](http://www.joomlatools.eu/products/docman.html)这样的最新模块来做你想做的事。WordPress 非常适合博客网站，但缺少您的许多要求（2、3、4、9），尽管 Drupal 功能强大且灵活，但它肯定有一个陡峭的学习曲线。克隆更是如此。

祝你好运！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-06T12:35:49.640

我会投票给[DotNetNuke](http://www.dotnetnuke.com)，它是 ASP.Net ，但它可以节省你学习一个全新的环境、语言和工具的开销，只是为了实现一个“免费”的 CMS，实际上你的时间值多少钱？它符合您的所有标准，目前有 600,000 名用户 - 这意味着您可以继续使用它，有人已经为您解决了您的问题。

至于昂贵的托管，为什么不在另一个国家托管，我在美国的 DotNetNuke 每月获得 5 美元，我在澳大利亚编码。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-06T12:48:14.710

[我对Joomla](http://www.joomla.org/)有一些经验。高度可定制、大量插件和开发中最活跃的社区之一。它也有一个很棒的管理面板。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-04-15T14:07:00.110

好吧，正如[Tom Deleu 所说](https://stackoverflow.com/users/26579/tom-deleu)，是的，虽然 Drupal 是非常有能力和强大的 CMS，但它的工作既艰难又复杂。来到 CMS 的另一个选项是[Wordpress](http://wordpress.org/)。虽然使用 wordpress 开发基于内容的网站非常容易，但范围和灵活性非常有限。

根据您的要求，我的投票也将投给[Joomla](http://www.joomla.org/)。它非常用户友好，经过优化，是您可以信赖的 CMS。您提到的“邮件系统”、“文件系统”等小型应用程序比其他应用程序更适合 joomla。

# asp.net - ASP .Net WorldPay 集成

> ID：618690
> 
> 赞同：5
> 
> 时间：2009-03-06T12:29:09.330
> 
> 标签：asp.net, transactions

我想知道是否有人有关于将 WorldPay 集成到 ASP.Net Web 应用程序中的任何有用信息？我希望直接从网站收取固定金额的付款，无需购物车。

本质上，我只是在寻找一些参考源代码或一篇涵盖所需内容的好文章。WorldPay 是否支持网络服务或 REST 等？

干杯，

布赖恩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:53:08.153

在您的“结帐”页面上包含以下表格（带有相关值）：

```
<form action="https://select.worldpay.com/wcc/purchase" method="post">
    <input type="hidden" name="instId" value="<your worldpay installation ID>" />
    <input type="hidden" name="cartId" value="<a reference for this transaction>" />
    <input type="hidden" name="amount" value="<the amount to pay>" />
    <input type="hidden" name="currency" value="<your currency code i.e. GBP>" />
    <input type="hidden" name="desc" value="<a description of this transaction>" />
    <input type="hidden" name="testMode" value="<worldpay's test mode ID>" />
    <input type="hidden" name="name" value="<customer's name>" />
    <input type="hidden" name="address" value="<customer's full address>" />
    <input type="hidden" name="postcode" value="<customer's postcode>" />
    <input type="hidden" name="country" value="<country code i.e. GB>" />
    <input type="hidden" name="email" value="<customer's email address>" />
</form> 
```

然后在您的 Worldpay 个人资料中（在您注册后在他们的网站上）您将有一个回发 URL 选项（不记得确切的标签），它将向该 URL 发布以下密钥（因此它将是一个页面在您收到此信息的网站上）包含交易结果：

```
string wp_rawauthcode = Request.Form["rawauthcode"];
string wp_amount = Request.Form["amount"];
string wp_installation = Request.Form["installation"];
string wp_tel = Request.Form["tel"];
string wp_address = Request.Form["address"];
string wp_mc_log = Request.Form["mc_log"];
string wp_rawauthmessage = Request.Form["rawauthmessage"];
string wp_authamount = Request.Form["authamount"];
string wp_amountstring = Request.Form["amountstring"];
string wp_cardtype = Request.Form["cardtype"];
string wp_avs = Request.Form["avs"];
string wp_cost = Request.Form["cost"];
string wp_currency = Request.Form["currency"];
string wp_testmode = Request.Form["testmode"];
string wp_authamountstring = Request.Form["authamountstring"];
string wp_fax = Request.Form["fax"];
string wp_transstatus = Request.Form["transstatus"];
string wp_compname = Request.Form["compname"];
string wp_postcode = Request.Form["postcode"];
string wp_authcost = Request.Form["authcost"];
string wp_desc = Request.Form["desc"];
string wp_cartid = Request.Form["cartid"];
string wp_transid = Request.Form["transid"];
string wp_callbackpw = Request.Form["callbackpw"];
string wp_sessionId = Request.Form["MC_sessionId"];
string wp_CusId = Request.Form["MC_cusId"];
string wp_authmode = Request.Form["authmode"];
string wp_name = Request.Form["name"];
string wp_shop = Request.Form["MC_shop"];
string wp_wafMerchMessage = Request.Form["wafMerchMessage"];
string wp_authentication = Request.Form["authentication"];
string wp_email = Request.Form["email"]; 
```

在此处执行一些基本验证，例如确保安装 ID (wp_installation) 与您期望的匹配，以及在将订单状态设置为“已付款”或其他内容之前的金额、货币等。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2010-12-12T18:21:39.750

布赖恩，我建议您与 WorldPay 联系。大多数商家帐户网关提供商都提供 API、用于测试、文档甚至代码示例的沙箱。我没有专门与 WorldPay 集成，但我发现其他提供商也是如此。

# metrics - 显示 SLOC 和 SLOC 修改、添加、删除的 Linux 工具

> ID：618694
> 
> 赞同：5
> 
> 时间：2009-03-06T12:30:02.743
> 
> 标签：metrics, code-metrics

我目前正在使用 SLOCCOUNT 工具来获取代码库的源代码行 (SLOC)。

但是，它不支持比较两个版本的代码库然后报告：

*   代码行 (LOC) 已修改
*   已删除 LOC
*   已添加 LOC

谁能建议一个基于 linux（最好是免费）的工具来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-01-11T19:48:10.150

我使用[CODECOUNT](http://sunset.usc.edu/research/CODECOUNT/)来区分基线。这比较了不同代码库之间的更改、删除和添加。它由南加州大学免费提供。

他们只提供源代码。但是，它使用 g++ 从 cygwin 中的 zip 文件中完全构建出来。他们还声称支持 Visual Studio，但我没有尝试过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-06T12:56:18.967

我相信`diffstat`实用程序可以做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-06T13:33:07.770

听起来[SLOCCount](http://www.dwheeler.com/sloccount/)和[SLOC Compare](http://mindx.josefspillner.de/kde/stats/)可以向您展示一段时间内的趋势，但它并不是您想要的。

# c# - 将非 ASP.NET 应用程序与 IIS 集成？

> ID：618695
> 
> 赞同：0
> 
> 时间：2009-03-06T12:30:10.620
> 
> 标签：c#, .net, asp.net, windows, iis

基本上，我想将用 C# 编写的应用程序与 IIS 集成，并且该应用程序不是用 ASP.NET 创建的，但能够输出 HTML - 所以我所追求的是以某种方式连接到 IIS 并将所有请求捕获到“Web站点”（IIS 概念）并允许我的自定义应用程序处理它们。

老实说，我什至*不知道*从哪里开始看这种东西，所以任何帮助都是值得的。

**tl；dr** -version：我将如何为 IIS 的 apache 模块创建一些内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T12:40:07.400

[你可以通过创建一个 HttpHandler](http://www.devx.com/dotnet/Article/6962/0/page/2)来做这样的事情。

# django - Django QueryDict 在列表中包装值的解决方法？

> ID：618699
> 
> 赞同：20
> 
> 时间：2009-03-06T12:30:54.957
> 
> 标签：django

希望这是一个容易的。
问题：**Django QueryDict 将值包装在列表中。**

这：

```
data[u'test'] = [u'1', u'2'] 
```

变成：

```
<QueryDict: {u'test': [[u'1', u'2']]}> 
```

我该怎么做：

```
<QueryDict: {u'test': [u'1', u'2']}> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-03-06T12:37:15.533

你的意思是？

```
data.setlist( 'test', [u'1', u'2'] ) 
```

[http://docs.djangoproject.com/en/dev/ref/request-response/?from=olddocs#django.http.QueryDict.setlist](http://docs.djangoproject.com/en/dev/ref/request-response/?from=olddocs#django.http.QueryDict.setlist)

# html - IE 中的宽度与其他浏览器不同 我有三个选择框。<div style='浮动：左；padding-right: 10px;'> <select size="10" name="company_id"> // 这里有很多选项 </select> </div> <div style='float: left; padding-right: 10px;'> <select size="10" name="department_id

> ID：618700
> 
> 赞同：3
> 
> 时间：2009-03-06T12:30:55.563
> 
> 标签：html, ajax, html-select

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-06T13:19:02.610

IE 和选择选项有一些我从未真正完全理解的“怪癖”（一些，关于选择框和 innerHTML 的详细信息[在这里](http://channel9.msdn.com/wiki/internetexplorerprogrammingbugs/)），但我至少可以为您提供一种解决方法。诀窍是将选项显式添加到选择框，而不仅仅是更改选择元素的整个 html。所以以下工作：

```
function changeval() {

    var option = document.createElement("option");
    option.text = 'my long text value to change stuff';
    option.value = 'test';
    $('#department_id')[0].options.add(option);
} 
```

虽然这不会：

```
function changeval() {
    var data = '<option value="test">my long test string with wide stuff</option>';
    $("#department_id").html(data);

} 
```

您可能会发现此[页面](http://www.workingwith.me.uk/blog/software/web_browser/internet_explorer/problems_create_a_select_box_using_the_dom_in)很有帮助 - 显然他只是通过修饰 innerHTML 来修复它，因此这可能是一个更简单的选择。由你决定。

第二个链接的解决方案如下所示：

```
function changeval() {
    var data = '<option value="test">my long test string with wide stuff</option>';
    $("#department_id").html(data);
    $("#department_id").parent()[0].innerHTML += '';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T12:39:02.020

尝试在开始时的选择中放置一个选项。我猜你只有在你从第一个中选择了一些东西时才开始填写第二个和第三个选择。

我在 IE 中遇到了空选择的问题，所以只需放一个

```
<option value="-1">-</option> 
```

在第二个和第三个选择开始。

# c# - C#关于数据网格的问题

> ID：618701
> 
> 赞同：0
> 
> 时间：2009-03-06T12:31:02.147
> 
> 标签：c#, datagrid

我有一个 DataGrid，它显示程序集中的可用类和方法。这里我附上了dataGrid的图片

[替代文字 http://img150.imageshack.us/img150/5109/datagrid.png](http://img150.imageshack.us/img150/5109/datagrid.png)

现在我的任务是根据 DataGrid 中的值生成测试用例。这里有几个测试用例。

```
 namespace proj.Test {
        using System;
        using NUnit.Framework;
        using proj;

        [TestFixture()]
        public class TestClass1 {

            [Test()]
            public virtual void Testadd1() {
                Class1 Class1 = new Class1();

                int a = 2147483647;
                int b = 2147483647;

            }

            [Test()]
            public virtual void Testadd2() {
                Class1 Class1 = new Class1();

                int a = 2147483647;
                int b = -2147483648;

            }

            [Test()]
            public virtual void Testadd3() {
                Class1 Class1 = new Class1();

                int a = 2147483647;
                int b = -2147483647;

            }

            [Test()]
            public virtual void Testadd4() {
                Class1 Class1 = new Class1();

                int a = 2147483647;
                int b = 2147483646;
    }
 }
 } 
```

现在的问题是，DataGrid 中的所有值都是字符串。我需要转换为 System.Reflection.MethodInfo、System.Type 等类型，以便生成这样的测试用例？

我该怎么做，或者有没有其他可能生成这样的测试用例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-06T12:36:57.750

您不应该真正从 dataGrid 本身获取值，因为这只是 UI 控件。相反，您应该找出它们来自哪里（填充网格的位置）并连接到那里。然后您将拥有正确类型的所有数据，并希望它不会依赖于 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T12:42:18.453

这是一篇关于数据驱动单元测试的 MSDN 文章：

[http://msdn.microsoft.com/en-us/library/ms404708%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms404708%28VS.80%29.aspx)

那里有一个工作示例，其中包括使用数据库存储值以插入单元测试。

我建议不要生成完整的代码（即生成单元测试主体的代码以及要测试的值），因为您最终会将代码放在测试用例和测试代码本身之间，这可能会导致细微的不一致或错误。

# javascript - 如何使用 Markdown 创建 jQuery 选项卡

> ID：618710
> 
> 赞同：3
> 
> 时间：2009-03-06T12:35:12.887
> 
> 标签：javascript, jquery, tabs, markdown

我目前正在运行一个基于 PHP 的 Content-Management-System，它在[Markdown Extra](http://michelf.com/projects/php-markdown/extra/)的帮助下生成其 HTML 内容。大多数内容由标题和子标题构成，导致页面非常长。在每个页面的开头，我借助列表和[Markdown Extra 的](http://michelf.com/projects/php-markdown/extra/) *Header Id Attribute*创建了一个目录。

为了缩短页面视图的长度，我想在第一级标题上使用 jQuery 的[选项卡插件。](http://docs.jquery.com/UI/Tabs)

问题是[Markdown Extra的输出与 jQuery](http://michelf.com/projects/php-markdown/extra/) [Tabs Plugin](http://docs.jquery.com/UI/Tabs)所期望的不兼容，因为[Markdown Extra](http://michelf.com/projects/php-markdown/extra/)没有将部分的内容包装到单独的 div 标记中。

有没有办法让这两个库一起工作？

### 编辑

这是 HTML 输出的样子：

```
 <p>Some intro text...</p>
 <h3>Table of content</h3>
 <ul>
  <li><a href="#sub1">Topic 1</a></li>
  <li><a href="#sub2">Topic 2</a></li>
  <li><a href="#sub3">Topic 3</a></li>
 </ul>
 <h3 id="sub1">Topic 1</h3>
 <p>The content of this topic.</p>
 <h3 id="sub2">Topic 2</h3>
 <p>The content of this topic.</p>
 <h3 id="sub3">Topic 3</h3>
 <p>The content of this topic.</p> 
```

..这是相应的降价代码：

```
Some intro text...

###Table of content###

* [Topic 1](#sub1)
* [Topic 2](#sub2)
* [Topic 3](#sub3)

###Topic 1### {#sub1}

The content of this topic.

###Topic 2### {#sub2}

The content of this topic.

###Topic 3### {#sub3}

The content of this topic. 
```

### 解决方案

在 cobbal 的帮助下，我做了这个 jQuery 语句，它将 Markdown 标记转换为 Tabs 插件可以使用的东西：

```
 $("#tabs :header").each(function() 
  {
    var id = $(this).attr("id");
    if(id=="") return;    
    var div = $("<div>");
    var tagName = this.tagName;    
    $(this).nextAll().each(function()
    {
      if(this.tagName==tagName) return false;
      div.append(this);
    });
    $(this).removeAttr("id");
    div.attr("id", id);
    $(this).before(div);
    div.prepend(this);
  }); 
```

但是，我需要转换标记以适应 Tabs 插件，而不仅仅是告诉 Tabs 插件它应该以不同的方式选择其内容，这一事实可能使该解决方案不是理想的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-07T07:21:00.900

在您的文档上。准备就绪

```
$("#sub1,#sub2,#sub3").each(function() {
    var containerDiv = $("<div>").attr("id", $(this).attr("id") + "div");
    $(this).before(containerDiv);
    containerDiv.append(this);
}); 
```

并将您的降价更改为

```
...
* [Topic 1](#sub1div)
* [Topic 2](#sub2div)
* [Topic 3](#sub3div)
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T15:41:16.090

在我看来，您可以自己将目录包装在 div 中。

您链接到它的 Markdown Extra 页面的一半显示了如何在 div 中插入 Markdown，如下所示：

PHP Markdown Extra 为您提供了一种将 Markdown 格式的文本放入任何块级标签的方法。为此，您可以通过将 markdown 属性添加到值为 1 的标签（即 markdown="1" ），如下所示：

```
<div markdown="1">
This is *true* markdown text.
</div> 
```

markdown="1" 属性将被剥离，并且 's 的内容将从 Markdown 转换为 HTML。最终结果将如下所示：

```
<div>

<p>This is <em>true</em> markdown text.</p>

</div> 
```

# .net - Linq to SQL 还是 Linq to DataSet？

> ID：618713
> 
> 赞同：9
> 
> 时间：2009-03-06T12:35:41.980
> 
> 标签：.net, linq, linq-to-sql, linq-to-dataset

我是 Linq 世界的新手，目前正在探索它。我正在考虑在我的下一个涉及数据库交互的项目中使用它。

从我读过的任何内容来看，我认为与数据库交互有两种不同的方式：

*   LINQ转SQL
*   Linq 到数据集

现在我要开发的产品不能依赖于数据库的类型。例如，它可能与 SQL server/Oracle 一起部署。

现在我的问题是：

1.  如果我使用 Linq to SQL，我是否只使用 SQL 服务器？
2.  我想我可以将 Linq to DataSet 用于 SQL server 和 oracle。但是，如果我将 Linq to DataSet 用于 SQL 服务器（与 Linq to SQL offcourse 相比），我会失去一些东西（易于编程、性能、可靠性等）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-06T12:48:53.633

您对 #1 是正确的 - Linq to Sql 仅适用于 SQL Server 数据库。

如果您希望能够访问不同的数据源（使用不同的提供程序），我会选择 ADO 实体框架。您在使用类似 POCO 的实体方面获得了类似的灵活性，并且很容易扩展为更高级/复杂的实现。

在我当前的项目中，我们使用的是 Linq to Sql，它很好，但是我们有很多问题需要克服。在可扩展性方面，我发现它有时过于简单。[我在这里](https://stackoverflow.com/questions/349718/ado-net-entity-framework-decision-making-between-orm-solutions/349755#349755)写了一个关于 Linq to Sql 和实体框架的（更好的）回复。

关于问题 #2 - 我不确定我是否想回到 DataSets。恕我直言，它们已成为过去，但如果您有一个带有特定控件（如 Infragistics）的体面的工具包，它们会很有用。但是，我发现它们的开销对于快速事务系统来说太昂贵了。该实现没有 Linq to Sql 或实体框架的一半功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-06T12:51:08.403

要回答您的第一个问题：不，还有其他用于 oracle 的 linq 提供程序的实现，例如：

[LinqToOracle](http://www.codeplex.com/LinqToOracle)

[DbLinq](http://code.google.com/p/dblinq2007/)

后者支持更多的数据库，例如 SqlLite。

还要检查[ADO.NET Entity Framework](http://msdn.microsoft.com/en-us/library/aa697427(VS.80).aspx)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-06T12:48:58.110

1.  是的，它只是 SQL Server。此外，微软已经冻结了 L2S，不会进一步细化。但它是一个很好的框架，性能非常好并且易​​于使用。
2.  Linq to DataSet 在从数据库中获取数据后将数据集作为可枚举访问。Linq to SQL 使用 IQueriable 来实际构建动态 SQL 查询。在许多情况下，L2S 的性能会好得多，并且根本不用编写 DB 代码。

您应该查看 Linq to Entity。这是可用的最成熟的框架。目前主要是针对SQL Server的，不过以后会支持Oracle等的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-06T12:49:42.167

1.  您不仅仅停留在 SQL Server 上。理论上，您可以为任何数据库构建 linq 提供程序。有一个关于 Linq to Oracle 的 codeplex 项目[http://www.codeplex.com/LinqToOracle](http://www.codeplex.com/LinqToOracle)。我自己没有尝试过。

2.  您将如何将数据放入数据集中？我不认为您要将整个表提取到数据集中？那将是一个严重的性能问题。如果您打算使用 Linq 数据集，您需要自己编写所有 SQL 查询以从数据库中获取数据，而不是让 linq 创建 sql 查询。因此，您实际上首先必须查询数据库，然后再查询数据集。对我来说似乎是双重工作......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-06T12:50:55.923

据我所知，当您使用 Linq to SQL 时，您几乎会被 SQL Server 卡住。

如果您使用 Linq to DataSet，您将失去一点编程的便利性：使用 Linq，您可以直接使用 Linq 实体，而使用 DataSets，您必须继续使用 DataSet 名称（MyDataSet.Entity = new MyDataSet.Entity( ))，一段时间后会变老。我认为这是唯一的牺牲。

但是，您可以将它与例如 Oracle 一起使用（在项目中这样做）。它也几乎是拖放操作，对 DataAdapter 有更多的控制（据我所知 - 我从来没有对 Linq-to-SQL 进行过多的调整），您可以指定（例如）要使用的查询， ETC。

由于您仍然可以在 DataSets 中定义表之间的关系，因此您仍然可以很好地使用 Linq，因此您不会真正看到那里的问题。

我认为 Linq-to-DataSet 的可靠性与 Linq-to-SQL 一样好（从来没有问题），性能似乎足够好，但永远无法真正分析它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-10-13T12:48:49.807

您不仅仅局限于 SQL Server。我们为 Oracle、MySQL、PostgreSQL 和 SQLite 服务器提供 LINQ to SQL 实现。[在此处](http://www.devart.com/dotconnect/linq.html)获取更多信息 与 LINQ to SQL 技术相比，数据集并不那么方便。查看实体框架选项作为替代方案。您可以使用一个概念模型编写多个存储模型，然后并行使用 SQL Server 和 Oracle 数据库。

# java - Eclipse 不会退出我的插件

> ID：618716
> 
> 赞同：1
> 
> 时间：2009-03-06T12:36:45.113
> 
> 标签：java, eclipse, eclipse-pde

我正在开发自己的 Eclipse 插件，遇到了一个非常奇怪的行为。在某些非常具体的情况下，当我关闭工作台时 Eclipse 不会退出。它一直挂着，直到我终止进程。通过 PDE 运行和作为常规安装运行时会发生这种情况。

很难提供更多细节，我知道这是一个非常笼统的问题。然而，我想知道是否有人遇到过这种行为并可以分享解决方案。

谢谢。兹维基

PS。在工作台退出后，我正在附加所有正在运行的线程的堆栈跟踪。也许会弹出一些东西。此跟踪是通过在调试模式下运行 IDE、在冻结后将其挂起并复制所有线程树来实现的。

```
Test1 [Eclipse Application] 
org.eclipse.equinox.launcher.Main at localhost:54840 (Suspended)    
    Daemon System Thread [Finalizer] (Suspended)    
        Object.wait(long) line: not available [native method]   
        ReferenceQueue<T>.remove(long) line: 120    
        ReferenceQueue<T>.remove() line: 136    
        Finalizer$FinalizerThread.run() line: 159   
    Daemon System Thread [Reference Handler] (Suspended)    
        Object.wait(long) line: not available [native method]   
        Reference$Lock(Object).wait() line: 474 
        Reference$ReferenceHandler.run() line: 116  
    Thread [main] (Suspended)   
    Daemon System Thread [Signal Dispatcher] (Suspended)    
    Daemon Thread [Thread-0] (Suspended)    
        OS.CFRunLoopRunInMode(int, double, boolean) line: not available [native method] 
        Display.sleep() line: 3902  
        IDEWorkbenchAdvisor(WorkbenchAdvisor).eventLoopIdle(Display) line: 364  
        Workbench.runEventLoop(Window$IExceptionHandler, Display) line: 2383    
        Workbench.runUI() line: 2346    
        Workbench.access$4(Workbench) line: 2198    
        Workbench$5.run() line: 493 
        Realm.runWithDefault(Realm, Runnable) line: 288 
        Workbench.createAndRunWorkbench(Display, WorkbenchAdvisor) line: 488    
        PlatformUI.createAndRunWorkbench(Display, WorkbenchAdvisor) line: 149   
        IDEApplication.start(IApplicationContext) line: 113 
        EclipseAppHandle.run(Object) line: 193  
        EclipseAppLauncher.runApplication(Object) line: 110 
        EclipseAppLauncher.start(Object) line: 79   
        EclipseStarter.run(Object) line: 386    
        EclipseStarter.run(String[], Runnable) line: 179    
        NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]  
        NativeMethodAccessorImpl.invoke(Object, Object[]) line: 39  
        DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25  
        Method.invoke(Object, Object...) line: 585  
        Main.invokeFramework(String[], URL[]) line: 549 
        Main.basicRun(String[]) line: 504   
        Main.run(String[]) line: 1236   
        Main.main(String[]) line: 1212  
    Daemon Thread [State Data Manager] (Suspended)  
        Thread.sleep(long) line: not available [native method]  
        StateManager.run() line: 297    
        Thread.run() line: 613  
    Daemon Thread [Framework Event Dispatcher] (Suspended)  
        Object.wait(long) line: not available [native method]   
        EventManager$EventThread(Object).wait() line: 474   
        EventManager$EventThread.getNextEvent() line: 377   
        EventManager$EventThread.run() line: 317    
    Daemon Thread [Start Level Event Dispatcher] (Suspended)    
        Object.wait(long) line: not available [native method]   
        EventManager$EventThread(Object).wait() line: 474   
        EventManager$EventThread.getNextEvent() line: 377   
        EventManager$EventThread.run() line: 317    
    Thread [Worker-0] (Suspended)   
        Object.wait(long) line: not available [native method]   
        WorkerPool.sleep(long) line: 185    
        WorkerPool.startJob(Worker) line: 217   
        Worker.run() line: 51   
    Daemon Thread [Java indexing] (Suspended)   
        Object.wait(long) line: not available [native method]   
        IndexManager(Object).wait() line: 474   
        IndexManager(JobManager).run() line: 371    
        Thread.run() line: 613  
    Thread [Worker-1] (Suspended)   
        Object.wait(long) line: not available [native method]   
        WorkerPool.sleep(long) line: 185    
        WorkerPool.startJob(Worker) line: 217   
        Worker.run() line: 51   
    Thread [Worker-2] (Suspended)   
        Object.wait(long) line: not available [native method]   
        WorkerPool.sleep(long) line: 185    
        WorkerPool.startJob(Worker) line: 217   
        Worker.run() line: 51 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-06T13:35:42.367

很抱歉打扰大家...有问题。

我的问题很简单：我的一个动作处理程序在 Dispose 方法中引发了异常。这会导致整个工作区挂起。

# windows - 免费注册 (Regfree) COM

> ID：618726
> 
> 赞同：3
> 
> 时间：2009-03-06T12:43:05.300
> 
> 标签：windows, com, regfreecom, idispatch

我们使用 COM 对象自动化模型使我们的应用程序可供客户使用。

他们大部分时间都在使用 python 来访问我们的应用程序接口。

由于我们希望能够安装（尚未运行，这是另一个问题）应用程序的不同版本，我们正在将我们的 COM 组件更改为无 regfree。

但这与通过 IDispatch 自动化从脚本语言访问相冲突，因为它们需要注册表中的条目。

我们的方法是创建一个应用程序来管理我们实际应用程序的活动版本。它让用户决定他想要哪个版本，并负责注册表项。

我们的方法有哪些替代方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-09T11:19:35.740

COM 中有一个用于执行此操作的协议。如果您对接口进行版本化（并更改每个版本的 GUIDS），您可以安装多个版本。微软用 WORD 等来做到这一点。

可以创建一个特定于库版本 5 的 Word.Document.5 类，或者只创建一个 word.Document 类，它将创建机器上最高存在的实例。我不确定这个功能是内置在 COM 中还是需要实现，但值得研究。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-19T09:16:39.980

Regfree COM 对象可以通过[Microsoft.Windows.ActCtx](http://msdn.microsoft.com/en-us/library/aa375644(VS.85).aspx)对象访问。

至于需要注册表中条目的 IDispatch 自动化——这并不完全正确。我假设您使用的是默认的 ATL 实现，IDispatchImpl。我们通过提供我们自己的实现 IRegFreeDispatchImpl 解决了这个解决方案，它[以此处建议](http://msdn.microsoft.com/en-us/library/aa375197(VS.85).aspx)的方式使用[激活上下文操作 API](http://msdn.microsoft.com/en-us/library/aa374166(VS.85).aspx)将所有入口点包装到具有激活上下文激活/停用的 DLL 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T12:48:41.980

好吧，答案是你自己建议的。您可以编写一个包含所有 COM 组件版本的完整列表的应用程序。用户选择版本后，您可以调用 regsvr32 应用程序来注册该特定版本。

# php - 如何将句子转换为单词数组？

> ID：618729
> 
> 赞同：9
> 
> 时间：2009-03-06T12:43:58.747
> 
> 标签：php, arrays, string, split

从这个字符串：

```
$input = "Some terms with spaces between"; 
```

我怎样才能产生这个数组？

```
$output = ['Some', 'terms', 'with', 'spaces', 'between']; 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-03-06T12:46:16.900

您可以使用[`explode`](http://docs.php.net/explode),[`split`](http://docs.php.net/split)或[`preg_split`](http://docs.php.net/preg_split).

`explode`使用固定字符串：

```
$parts = explode(' ', $string); 
```

while`split`并`preg_split`使用正则表达式：

```
$parts = split(' +', $string);
$parts = preg_split('/ +/', $string); 
```

基于正则表达式的拆分有用的示例：

```
$string = 'foo   bar';  // multiple spaces
var_dump(explode(' ', $string));
var_dump(split(' +', $string));
var_dump(preg_split('/ +/', $string)); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-03-06T12:46:06.683

```
$parts = explode(" ", $str); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2010-07-04T15:53:14.470

```
print_r(str_word_count("this is a sentence", 1)); 
```

结果是：

```
Array ( [0] => this [1] => is [2] => a [3] => sentence ) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-15T09:24:37.087

只是觉得值得一提的是，Gumbo 发布的正则表达式——尽管它可能对大多数人来说已经足够了——可能无法捕捉到所有的空白情况。一个例子：在以下字符串的批准答案中使用正则表达式：

```
$sentence = "Hello                       my name    is   peter string           splitter"; 
```

通过 print_r 为我提供了以下输出：

```
Array
(
    [0] => Hello
    [1] => my
    [2] => name
    [3] => is
    [4] => peter
    [5] => string
    [6] =>      splitter
) 
```

其中，当使用以下正则表达式时：

```
preg_split('/\s+/', $sentence); 
```

为我提供了以下（所需的）输出：

```
Array
(
    [0] => Hello
    [1] => my
    [2] => name
    [3] => is
    [4] => peter
    [5] => string
    [6] => splitter
) 
```

希望它可以帮助任何陷入类似障碍并且对原因感到困惑的人。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-06T16:36:15.100

只是一个问题，但是您是否要从数据中提取 json？如果是这样，那么您可能会考虑这样的事情：

```
return json_encode(explode(' ', $inputString)); 
```

# php - SOAP WSDL 关联数组

> ID：618736
> 
> 赞同：7
> 
> 时间：2009-03-06T12:47:36.150
> 
> 标签：php, web-services, soap, wsdl

如何在 SOAP wsdl 文件中定义关联数组？到目前为止，这就是我定义数组元素类型的方式：

```
<wsdl:types>
    <xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" targetNamespace="webservice.wsdl" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
        <xsd:import namespace="http://schemas.xmlsoap.org/soap/encoding/" />
        <xsd:complexType name="ArrayOfString">
            <xsd:complexContent>
                <xsd:restriction base="soapenc:Array">
                    <xsd:attribute ref="soapenc:arrayType" wsdl:arrayType="tns:arrayElement"/>
                </xsd:restriction>
            </xsd:complexContent>
        </xsd:complexType>
    </xsd:schema>
</wsdl:types> 
```

谢谢！

* * *

我说的是[PHP 关联数组](http://www.php.net/manual/en/language.types.array.php)，我想使用任意数量的任意 key=>value 字符串对，它们将在通信方的另一端转换回关联数组。作为替代方案，我可以将序列化数组或 json 表示形式作为字符串发送，但我也想知道如何在 wsdl 中执行此操作。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2011-11-19T20:30:34.463

要通过肥皂传输 php 关联数组，您需要在 wsdl 中定义以下内容：

```
<xsd:complexType name="KeyValueData">
      <xsd:sequence>
        <xsd:element minOccurs="1" maxOccurs="1" name="id" type="string"/>
        <xsd:element minOccurs="1" maxOccurs="1" name="name" type="string"/>
        <xsd:element minOccurs="1" maxOccurs="1" name="data" type="string"/>
      </xsd:sequence>
</xsd:complexType>
<xsd:complexType name="ArrayOfKeyValueData">
    <xsd:sequence>
      <xsd:element minOccurs="0" maxOccurs="unbounded"
               name="keyval" type="tns:KeyValueData"/>
    </xsd:sequence>
</xsd:complexType> 
```

现在将新定义的 ArrayOfKeyValueData 类型指定为结果类型或参数

```
<message name='getPostStatsResponse'>
  <part name='Result' type='ArrayOfKeyValueData'/>
</message> 
```

并用类似的东西指定你的操作

```
<operation name='getPostStats'>
    <input message='tns:getPostStatsRequest'/>
    <output message='tns:getPostStatsResponse'/>
</operation> 
```

这将适用于某种用 php 编写的 web 服务，它返回类似的东西

```
return array("k1" => "v1", "k2" => "v2"); 
```

如果您使用 php 作为客户端，您将在客户端获得完全相同的数组。其他语言或肥皂库可能会产生其他结构，因为并非每种语言都有这种“关联数组”概念。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-06T14:00:01.810

WSDL 无法描述关联数组的关联性质。您可以做的最好的事情是定义一个名称/值数组。

您是否可以使用返回关联数组的操作定义 PHP 服务，然后查看生成的 WSDL 是什么？然后，您可以在自己的手写 WSDL 中遵循相同的模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T12:54:05.370

如果你想使用一个字符串数组，你可以只在需要数组的类型中声明：

```
<xs:complexType name="SomeTypeThatUsesAnArrayOfStrings">
    <xs:sequence>
        <xs:element name="TheStringValue" type="xs:string" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
</xs:complexType> 
```

顺便说一句，“关联数组”是什么意思？像 c++ 地图或 python 字典之类的东西？

# powershell - 如何让 Select-Object 返回原始类型（例如字符串）而不是 PSCustomObject？

> ID：618749
> 
> 赞同：43
> 
> 时间：2009-03-06T12:49:25.223
> 
> 标签：powershell, pscustomobject

下面的代码给了我一个 PSCustomObjects 数组，我怎样才能让它返回一个字符串数组？

```
$files = Get-ChildItem $directory -Recurse | Select-Object FullName | Where-Object {!($_.psiscontainer)} 
```

（作为第二个问题，psiscontainer 部分是做什么用的？我从网上的一个例子中复制了它）

**接受后编辑：**两个很好的答案，希望我能同时标记它们。已授予原始答案。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-03-06T13:06:24.637

您只需要从对象中挑选出您想要的属性。`FullName`在这种情况下。

```
$files = Get-ChildItem $directory -Recurse | Select-Object FullName | Where-Object {!($_.psiscontainer)} | foreach {$_.FullName} 
```

**编辑：**对 Mark 的解释，他问，“foreach 是做什么的？枚举是什么？”

Sung Meister 的解释非常好，但我会在这里添加一个演练，因为它可能会有所帮助。

关键概念是管道。想象一系列乒乓球一个接一个地滚下一个狭窄的管子。这些是管道中的对象。管道的每个阶段——由管道 (|) 字符分隔的代码段——都有一个管道进入它，管道从它流出。一个阶段的输出连接到下一个阶段的输入。每个阶段都会在对象到达时对其进行处理，然后将它们发送回输出管道或发送新的替换对象。

```
Get-ChildItem $directory -Recurse 
```

Get-ChildItem 遍历文件系统，创建代表它遇到的每个文件和目录的 FileSystemInfo 对象，并将它们放入管道中。

```
Select-Object FullName 
```

Select-Object 在每个 FileSystemInfo 对象到达时获取它，从中获取 FullName 属性（在本例中为路径），将该属性放入它创建的全新自定义对象中，并将该自定义对象放入管道中。

```
Where-Object {!($_.psiscontainer)} 
```

这是一个过滤器。它获取每个对象，对其进行检查，然后根据某些条件将其送回或丢弃。顺便说一句，您这里的代码有一个错误。到达这里的自定义对象没有 psiscontainer 属性。这个阶段实际上并没有做任何事情。Sung Meister 的代码更好。

```
foreach {$_.FullName} 
```

Foreach 的长名称是 ForEach-Object，它在每个对象到达时抓取它，在这里，从它抓取 FullName 属性，一个字符串。现在，这里是微妙的部分：任何未被消耗的值，即未被变量捕获或以某种方式抑制的值，都被放入输出管道。作为一个实验，尝试用这个替换那个阶段：

```
foreach {'hello'; $_.FullName; 1; 2; 3} 
```

实际尝试一下并检查输出。该代码块中有四个值。它们都没有被消耗。请注意，它们都出现在输出中。现在试试这个：

```
foreach {'hello'; $_.FullName; $ x = 1; 2; 3} 
```

请注意，其中一个值正在被变量捕获。它不会出现在输出管道中。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2009-03-07T04:32:46.470

要获取文件名的字符串，您可以使用

```
$files = Get-ChildItem $directory -Recurse | Where-Object {!($_.psiscontainer)} | Select-Object -ExpandProperty FullName 
```

该`-ExpandProperty`参数允许您根据指定的属性类型取回对象。

进一步的测试表明，这不适用于 V1，但该功能自 V2 CTP3 起已修复。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-03-06T13:39:18.740

**对于问题 #1**

我已经删除了“select-object”部分 - 它是多余的，并且在“foreach”之前移动了“where”过滤器，这与[dangph 的答案](https://stackoverflow.com/questions/618749/how-to-get-select-object-to-return-a-raw-type-e-g-string-rather-than-pscustomo/618797#618797)不同- 尽快过滤，以便您只处理下一个必须处理的子集管道。

```
$files = Get-ChildItem $directory -Recurse | Where-Object {!$_.PsIsContainer} | foreach {$_.FullName} 
```

该代码片段基本上读取

*   递归获取所有文件的完整路径（Get-ChildItem $directory -Recurse）
*   过滤掉目录（Where-Object {!$_.PsIsContainer}）
*   仅返回完整文件名（foreach {$_.FullName}）
*   将所有文件名保存到 $files

请注意，对于*foreach {$_.FullName}*，在 powershell 中，将返回脚本块 ({...}) 中的最后一条语句，在本例中为 $_.FullName 类型的字符串

如果你真的需要得到一个原始对象，你不需要在摆脱“select-object”之后做任何事情。如果您要使用 Select-Object 但想要访问原始对象，请使用“PsBase”，这是一个完全不同的问题（主题） - 请参阅“ [PSBASE、PSEXTENDED、PSADAPTED 和 PSOBJECT 有什么问题？](http://blogs.msdn.com/powershell/archive/2006/11/24/what-s-up-with-psbase-psextended-psadapted-and-psobject.aspx) ”了解更多信息那个主题

**对于问题 #2**

并且通过*!$_.PsIsContainer*过滤意味着您排除了容器级别的对象 - 在您的情况下，您正在对*FileSystem提供程序执行**Get-ChildItem*（您可以通过 Get-PsProvider 查看 PowerShell 提供程序），因此容器是[目录信息](http://System.IO.DirectoryInfo)（文件夹）

 **PsIsContainer*在不同的 PowerShell 提供者下意味着不同的东西；例如）对于*注册表*提供程序，PsIsContainer 的类型是[Microsoft.Win32.RegistryKey](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.aspx) 试试这个：

```
>pushd HKLM:\SOFTWARE
>ls | gm 
```

**[更新]**以下问题：*foreach 做什么？这是在枚举什么？* 为了澄清，“foreach”是“Foreach-Object”的别名你可以通过以下方式找到，

```
get-help foreach 
```

- 或者 -

```
get-alias foreach 
```

现在在我的回答中，“foreach”正在枚举从前一个管道（已过滤目录）返回 的[FileInfo](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)类型的每个对象实例。*FileInfo*有一个名为*FullName*的属性，这就是“foreach”正在枚举的内容。
并且您通过名为“$_”的特殊管道变量引用通过管道传递的对象，该变量在“foreach”的脚本块上下文中属于*FileInfo类型。*

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-22T06:45:41.607

对于 V1，将以下过滤器添加到您的配置文件中：

```
filter Get-PropertyValue([string]$name) { $_.$name } 
```

然后你可以这样做：

```
gci . -r | ?{!$_.psiscontainer} | Get-PropertyName fullname 
```

顺便说一句，如果您使用的是[PowerShell 社区扩展](http://www.codeplex.com/powershellcx)，那么您已经拥有它。

关于在 V2 中使用 Select-Object -Expand 的能力，这是一个可爱的技巧，但并不明显，而且真的不是 Select-Object 和 -Expand 的本意。-Expand 与 LINQ 的 SelectMany 一样是关于展平的，而 Select-Object 则是关于将多个属性投影到自定义对象上。

# php - 如何将 ORM 添加到 PHP 遗留项目？

> ID：618751
> 
> 赞同：2
> 
> 时间：2009-03-06T12:50:12.243
> 
> 标签：php, sql, orm, doctrine, legacy-code

我们正在开发一个 PHP 项目，该项目已经开发了 2 年多，现在团队已准备好并愿意将开发切换到 ORM。因为它确实加快了开发速度，让您可以通过 Objects 来操作，而不是大多数时候考虑 SQL 代码和数据库表。

我们决定选择[Doctrine](http://en.wikipedia.org/wiki/Doctrine_%28PHP%29) ORM，因为它加载了 YAML 数据夹具——我们非常需要它来进行单元测试。

我主要担心的是，使用新的 ORM 框架会降低网站的性能。我们无法在当前数据库抽象层（使用`pg_connect`语法，不兼容[PDO ）之间建立共享连接。](http://en.wikipedia.org/wiki/PHP_Data_Objects)数据库连接机制不能切换到PDO-compatible，因为有很多SQL代码不兼容PDO_SQLITE语法。

因此，据我了解，如果我们开始使用它，它将使数据库连接数增加一倍。我不确定数据库服务器是否能够处理这个问题。

在这种情况下，您会建议我们做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T13:00:11.703

PDO_SQLITE 有什么相关性？

除非您确实计划使用 SQLite 驱动程序，否则 PDO 不强制要求兼容性。

如果您不打算使用 SQLite，那么我将使遗留数据库层 PDO 兼容并重新使用连接，直到您可以完全迁移到 Doctrine。

也就是说，连接级别不会是您迁移到 ORM 的唯一性能问题。它们本质上是低效的，因此我预计查询速度会变慢，应用程序服务器和数据库服务器之间的带宽使用量会更高，并且由于不可避免地会选择冗余数据，因此应用程序级别的内存使用量会更高。根据您当前的设置，上述可能是也可能不是问题。

不过，您可能应该对最后一段有所保留，因为它们只是一般的 ORM 的特征，而不是特别的 Doctrine，我没有经验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T13:04:54.187

您可以做的显而易见的事情是在您需要之前不要打开数据库连接。我个人使用这样的代码：

```
public function connect() {
  if (!defined('CONNECT')) {
    mysql_connect(...);
  }
}

public function db_query($query) {
  connect();
  $ret = mysql_query($query);
  if (!$ret) {
    die(mysql_error());
    error_log(mysql_error() . ' - ' . $query);
  }
  return $ret;
} 
```

减少重复次数并仅在需要时打开连接。

在你的情况下，你需要打破你可以开始的最小块。理想情况下，它应该是一个**垂直切片**，这意味着该切片将使用新代码完成几乎所有的数据库工作，而很少使用旧代码。通过这种方式，您可以最大限度地减少数据库连接的增加，这可以让您积累一些技能并获得一些经验。

但请注意，ORM 绝不是灵丹妙药。您可能讨厌 SQL 并发现它繁琐且容易出错，但在大多数情况下，您只是简单地将一组问题换成另一组问题。我个人认为，虽然 ORM 可能有用，但它被夸大了，而且比许多人意识到或愿意承认的更虚假经济。我在[Using an ORM or plain SQL?](https://stackoverflow.com/questions/494816/using-an-orm-or-plain-sql/494853#494853)

我不是说你不应该这样做。只是不要以为它会解决你所有的问题。此外，由于这种重写实际上根本不会改变功能（根据您所描述的），我不确定这样做的成本是否与修复已有的成本相比更有利。太多的未知数无法说明您的情况会如何发展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-06T13:11:29.757

好吧，是也不是——只要您同时拥有非 PDO 和 PDO 连接，您的 DB 连接只会翻倍。

我不确定您对 PDO_SQLITE 参考的意思是什么，因为 SQLite 是一个与您现在正在使用的 PostgreSQL 完全不同的数据库。

您应该能够像今天一样通过 PDO::query 运行当前查询，除非您做错了什么:)

# iphone - 在 iPhone 上的 UITextView 中获取光标位置？

> ID：618759
> 
> 赞同：29
> 
> 时间：2009-03-06T12:51:43.783
> 
> 标签：iphone, uitextview

我们的 iPhone 应用程序中有一个可编辑的 UITextView。当用户按下一些工具栏按钮时，我们需要在光标位置插入一些文本，但似乎找不到找到光标当前位置的记录（或未记录）方法。

有没有人有任何想法或其他人是否取得了类似的成就？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-03-06T15:14:09.213

就像 drawh 说的，你可以使用 UITextView 的 selectedRange 来返回插入点。此范围的长度始终为零。下面的例子展示了如何做到这一点。

```
NSString *contentsToAdd = @"some string";
NSRange cursorPosition = [tf selectedRange];
NSMutableString *tfContent = [[NSMutableString alloc] initWithString:[tf text]];
[tfContent insertString:contentsToAdd atIndex:cursorPosition.location];
[theTextField setText:tfContent];
[tfContent release]; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-03-01T15:58:47.187

**斯威夫特 4**：

```
// lets be safe, thus if-let
if let cursorPosition = textView.selectedTextRange?.start {
    // cursorPosition is a UITextPosition object describing position in the text

    // if you want to know its position in textView in points:
    let caretPositionRect = textView.caretRect(for: cursorPosition)
} 
```

我们只是`textView.selectedTextRange`用来获取选定的文本范围和光标位置在它的`start`位置。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-03-06T15:46:29.727

当文本视图是第一响应者时，使用`UITextView selectedRange`属性查找插入点。否则，当视图不在焦点上时，此属性返回`NSNotFound`。如果您需要在这种情况下知道光标位置，请考虑子类化`UITextView`和覆盖`canResignFirstResponder`方法，您可以将光标位置存储到成员变量中。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-03-06T14:56:05.670

你试过`UITextView.selectedRange`吗？它返回一个`NSRange`，它的位置元素应该告诉你光标在哪里。

# c - 如何访问 C 中的阴影全局变量？

> ID：618769
> 
> 赞同：34
> 
> 时间：2009-03-06T12:54:34.180
> 
> 标签：c, scope, global-variables

如何访问 C 中的阴影全局变量？在 C++ 中，我可以使用`::`全局命名空间。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2009-03-08T08:48:01.590

如果您的文件范围变量不是静态的，那么您可以使用在嵌套范围中使用 extern 的声明：

```
int c;

int main() {
    {
        int c = 0;
        // now, c shadows ::c. just re-declare ::c in a 
        // nested scope:
        {
            extern int c;
            c = 1;
        }
        // outputs 0
        printf("%d\n", c);
    }
    // outputs 1
    printf("%d\n", c);
    return 0;
} 
```

如果变量是用静态声明的，我看不到引用它的方法。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-03-06T13:06:55.027

c 中没有 :: 但您可以使用 getter 函数

```
#include <stdio.h>

int L=3;

inline int getL()
{
   return L;
}

int main();
{
   int L = 5;

   printf("%d, %d", L, getL());
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-06T13:42:31.117

如果您正在谈论影子全局变量，那么（在 Linux 上）您可以使用它`dlsym()`来查找全局变量的地址，如下所示：

```
int myvar = 5;    // global

{
    int myvar = 6;    // local var shadows global
    int *pglob_myvar = (int *)dlsym(RTLD_NEXT, "myvar");
    printf("Local: %d, global: %d\n", myvar, *pglob_myvar);
} 
```

如果您希望您的代码看起来很性感，请使用宏：

```
#define GLOBAL_ADDR(a,b)  b =(typeof(b))dlsym(RTLD_NEXT, #a)
...
int *pglob_myvar;
GLOBAL_ADDR(myvar, pglob_myvar);
... 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-06T13:34:23.417

根据您*在 C 中所谓的屏蔽全局变量，*可能会有不同的答案。

`extern`如果您的意思是在另一个源文件或链接库中定义的全局变量，您只需使用前缀再次声明它：

```
extern int aGlobalDefinedElsewhere; 
```

如果您的意思是全局变量被同名的局部变量遮蔽（或黯然失色，选择您喜欢的术语），那么在 C 中没有内置方法可以做到这一点。所以您要么不这样做，要么解决它。可能的解决方案是：

*   用于访问全局变量的 getter/setter 函数（这是一种很好的做法，尤其是在多线程情况下）

*   通过在局部变量之前定义的指针对全局变量的别名：

    ```
    int noName;
    {
        int * aliasToNoName = &noName; /* reference to global */
        int noName;                    /* declaration of local */
        *aliasToNoName = noName;       /* assign local to global */
    } 
    ```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-06T13:05:20.070

什么是纯 C 中的“屏蔽全局变量”？

在 C 中，您有局部变量、文件局部/全局变量（静态）和全局变量（外部）

```
so file1.c:
int bla;

file2.c
extern int bla; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-15T14:35:40.827

另一种选择是在定义本地之前引用全局，或者至少先获取指向它的指针，以便在定义本地之后访问它。

```
#include <stdio.h>

int x = 1234;
int main()
{
   printf("%d\n",x); // prints global
   int x = 456;
   printf("%d\n",x); // prints local
} 
```

# windows - 如何从中间解密密码？

> ID：618777
> 
> 赞同：1
> 
> 时间：2009-03-06T12:58:27.450
> 
> 标签：windows, winapi, encryption

我必须在 A 应用程序中加密输出文件，然后在 B 应用程序中解密它，但我发现 MS 加密存在一些限制，如果我加密一个 1000 字节的缓冲区，然后想在 B 中以不同大小的不同位置开始解密应用程序，返回值为错误。是否有任何加密可以满足我的要求？谢谢。这是我的示例代码：

```
clTemp.EncryptDataDirectly(buffer, 1000);
clTemp.DecryptDataDirectly(buffer + 1, 500); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-06T13:44:01.300

免责声明：我不知道这个用于加密的 Windows API。所以这只是问题的一般概述。使用您的常识和文档来了解更多信息。

有两种可能：

1.  流密码。他们一次加密一个字节（甚至可能是位），您必须从加密流的开头开始才能正确解密。一些密码具有同步功能，可帮助您在传输中出现一些小错误后恢复。

2.  分组密码。它们加密固定大小的块，64 位或 128 位是流行的块大小。但他们可以使用不同的加密模式。例如，ECB 自己加密每个块。您可以跳到文件的中间，抓取一个块并对其进行解密。但它使您容易受到已知的明文攻击，其中攻击者知道一些加密文本并试图找到您使用的密钥。CBC 或其他带有反馈的模式更安全，但在这种情况下，您需要再次从加密文件的开头开始解密。

以下是一些相关的维基百科文章：

*   [维基百科上的分组密码](http://en.wikipedia.org/wiki/Block_ciphers)
*   [维基百科上的分组密码操作模式](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T14:12:42.340

一种解决方案是使用具有 CTR（计数器）块模式的密码。它允许在解密期间随机访问；块不相互依赖，你只需要知道密钥和块号。

有关详细信息，请参阅[维基百科描述](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Counter_.28CTR.29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-06T13:03:24.800

你想加密一些东西然后只解密它的一部分吗？不是从头开始吗？我明白了吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-06T13:36:01.650

您可以尝试使用可用于电子密码本 (ECB) 模式的分组密码算法，这意味着每个分组的加密都独立于其前身的加密。这允许您在缓冲区中的任何点开始解密，只要您从代码块的开头开始，而不是在代码块内。

例如，您选择了 DES 算法进行加密，其块大小为 64 位。因此，您必须使用与加密明文相同的块大小来解密密码。但是您不必从密码的开头开始，您也可以从每个点开始，即 64 的倍数。

也许这可能会对你有所帮助。

有关分组密码的更多信息：

[分组密码](http://en.wikipedia.org/wiki/Block_cipher)

[分组密码模式](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation)

[凯撒密码](http://en.wikipedia.org/wiki/Caesar_cipher)（这不是块芯片）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-06T13:43:59.587

大多数数据加密算法都是[块密码](http://en.wikipedia.org/wiki/Block_cipher)，它一次加密一个块，例如 128 位。

为了使块密码安全，大多数人根据第一个加密的输出初始化第二个块的加密，这称为密码块链接或 CBC。通过使用电子代码块 (ECB) 模式，您可以关闭链接并一次加密一个块，但您确实会失去一些复杂性。

以下是欧洲央行为何[不那么安全](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation)的示例：

[![原来的](https://i.stack.imgur.com/G7Ugx.jpg)](https://i.stack.imgur.com/G7Ugx.jpg)
[（来源：[wikimedia.org](http://upload.wikimedia.org/wikipedia/en/5/56/Tux.jpg)）]
![燕尾服欧洲央行](https://upload.wikimedia.org/wikipedia/commons/f/f0/Tux_ecb.jpg) ![Tux 链接](https://upload.wikimedia.org/wikipedia/commons/a/a0/Tux_secure.jpg)

第二张图片使用 ECB 加密，最后一张使用链接加密。

# mysql - 在执行之前记录查询

> ID：618779
> 
> 赞同：2
> 
> 时间：2009-03-06T12:59:09.193
> 
> 标签：mysql, ruby-on-rails, database, performance

我遇到了一个问题，我运行一些查询并且 mysqld 进程开始使用 100% CPU 功率，而没有结束。我想查明这个查询。问题是 log/development.log 只包含已完成的查询。任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-06T13:21:02.417

我认为你有几个选择。首先是真正查看您的 development.log 并查看导致它的操作。查看您要求 rails 运行的查询并尝试查明该特定查询。如果花费大量时间，则可能意味着您正在执行诸如返回 n+1 个查询、缺少索引或其他一些性能杀手之类的事情。

你说开发日志只有已经完成的查询。你不能计算出下一个要运行的查询是什么吗？

您的其他选项涉及使用日志启动 mysqld（我认为其中一些名称已更改）：

```
mysqld --log[=file_name] --log-slow-queries[=file_name] 
```

使用 mysql 中的 processlist 显示当前语句列表：

```
show processlist; 
```

为了防止类似的事情再次发生，您还可以花一些时间查看 Rails 性能监视器，例如 New Relic ( [http://www.newrelic.com/](http://www.newrelic.com/) ) 的 RPM。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-06T13:17:56.433

您可以通过以下方式查看正在运行/未完成的语句

```
show processlist; 
```

命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T13:23:47.730

如果您对 MySQL 有评估，请考虑 SQL 查询

```
SHOW PROCESSLIST 
```

或者从命令行：

```
mysqladmin processlist 
```

或者，最强大的方法是覆盖 ActiveRecord::Base 连接实例的 'execute' 方法。本文展示了一般方法：

[http://www.misuse.org/science/2006/12/12/sql-logging-in-rails/](http://www.misuse.org/science/2006/12/12/sql-logging-in-rails/)

你把这段代码放到 application.rb 中：

```
# define SQL_LOG_FILE, SQL_LOG_MAX_LINES

connection = ActiveRecord::Base.connection
class << connection
    alias :original_exec :execute
    def execute(sql, *name)
        # try to log sql command but ignore any errors that occur in this block
        # we log before executing, in case the execution raises an error
        begin
            lines = if File::exists?(SQL_LOG_FILE) then IO::readlines(SQL_LOG_FILE) else [] end
            log = File.new(SQL_LOG_FILE, "w+")
            # keep the log to specified max lines
            if lines.length > SQL_LOG_MAX_LINES
                lines.slice!(0..(lines.length-SQL_LOG_MAX_LINES))
            end
            lines << Time.now.strftime("%x %I:%M:%S %p")+": "+sql+"n"
            log.write(lines)
            log.close
            $sql_log = sql
        rescue Exception => e
            ;
        end
        # execute original statement
        original_exec(sql, *name)
    end # def execute
end # class << 
```

# project-management - 谁应该给出高水平的项目估算？

> ID：618781
> 
> 赞同：3
> 
> 时间：2009-03-06T13:00:16.430
> 
> 标签：project-management, estimation

我刚刚参加了关于谁最适合对给定工作进行估算的讨论。

在详细的层面上，我总是说最好的估计来自实际必须做这项工作的人，因为他们有充分的理解，这让他们完全接受，但是在更高的抽象层次上（即在整个项目级别）我不太确定。

我想起了 Peopleware 中的第 5 章，它给出了 1985 年澳大利亚研究的结果——我能找到的最佳链接[在这里](http://javatroopers.com/Peopleware.html#Chapter_5)。

我对您在这里的关注点特别感兴趣——您是作为开发人员、架构师、项目经理还是其他人回答问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-06T13:11:53.687

我以经理（现在）和开发人员（过去）的身份回答这个问题。

高层估计应该来自团队/项目负责人，但需要开发人员的投入。它们也应该以范围的形式给出 - 最有可能出现最坏的情况，并指示每个的置信水平。

团队领导不可能足够深入地了解项目的所有内容，因此他们需要开发人员的一些意见，但这样做的危险是您在过程中过早陷入细节的困境。同样，单个开发人员对项目的了解不够广泛（除非它真的很小），无法对所有内容进行估算。

然后，经理整合这些估计并寻找冲突和协同作用以获得“大局”——毕竟这就是我们的报酬。

作为一名开发人员，我不会信任一个在没有与开发人员核实的情况下给出估算的经理，但同样我也不会信任一个只是询问开发人员并在没有以某种方式“编辑”它的情况下传递该信息的经理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-06T13:09:35.860

负责签署估算的人应该是项目经理。那是他们的利基。

然而，我并不是说 PM 应该做出估计。

我是说项目经理需要从各种来源（技术、业务等）对项目的不同部分进行估算。在任何项目中，都会有很大一部分不是技术性的。

任何技术性的东西都应该由技术人员估计。

但是，出于同样的原因，任何非技术性的事情都应该由适当的专家进行评估（CPA 类型称这些 SME——主题专家）。架构师可以估计技术解决方案。A BA 差距分析。经理可以执行业务流程实施。等等。

但是确实需要一个 PM 将所有这些联系在一起，形成一个高水平的估计，特别是在资源配置和制定相互依赖关系和关键路径方面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T13:07:22.077

1.  开发人员通常应该做出初步估计。经理应该能够根据谁实施它来为其添加风险因素。（例如：如果实施它的开发人员比给出估计的开发人员有更好的知识，风险会更低）。开发人员也可能不知道项目的其他开发领域（假设它很大）。这就是经理的估计出现的地方。如果项目很小，那么开发人员的估计就足够了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-06T13:14:00.640

每个人都应该给项目经理一个估计：功能分析师、测试分析师和高级开发人员。

PM 的任务是确保它们在一定程度上符合现实并加以总结。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-06T13:38:02.923

开玩笑的敏捷答案是：没有人应该这样做，因为无论如何它都会大错特错。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-06T13:11:46.777

我认为这取决于作品。很多时候，项目经理完全有能力估计说，在屏幕上添加一些额外的数据，改变布局，你说出它需要多长时间。

但是，有时事情会更加复杂，尤其是当它们深入触及系统架构时。在这种情况下，项目经理应该咨询开发人员、架构师或两者的估计，以及为什么要花费特定时间来实施。

此外，我认为项目经理应该使用开发人员的估算来得出最终估算，就像 schar 说的那样。他们应该增加一定百分比的开销、测试时间、风险因素等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-06T13:30:19.087

我以经理（现在）和开发人员（过去）的身份回答这个问题。

在我们公司，开发人员总是参与估算。我们对业务顾问创建的用户故事进行高级估计。

业务顾问将用户故事传达给我（技术团队经理）和开发人员。

我们安排了一次评估会议来讨论用户故事和项目背景（三个人，业务顾问、开发人员、技术经理）。在会议中，我和开发人员都做笔记并写下每个用户故事所需的时间。

会议结束后，开发人员填写了一份估算表，我们确保双方都同意该估算。完成后，估算表将返回给业务顾问。

通常会在 x 到 x 次 3 天的范围内给出高水平的估计。

例如：40 到 120 天。

显然，我们只估计所需的开发/测试/部署时间。X 百分比将用于项目管理和技术管理、风险和管理费用。

# javascript - 请分享 JavaScript 中日历或日期选择器（弹出窗口）的代码以在 JSF 中实现

> ID：618784
> 
> 赞同：0
> 
> 时间：2009-03-06T13:00:27.990
> 
> 标签：javascript, calendar

请分享 JavaScript 中日历或日期选择器（弹出窗口）的代码以在 JSF 中实现

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-06T13:03:31.010

[jQuery UI 日期选择器](http://jqueryui.com/demos/datepicker/)——开源。免费下载:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T13:08:11.327

[“最酷”的 DHTML 日历](http://www.dynarch.com/projects/calendar/)- 当您按住箭头时，我喜欢它的菜单。对于挑选一些较旧的日期非常有用。

# iphone - 从 iPhone 中的 UITextView 搜索文本

> ID：618809
> 
> 赞同：2
> 
> 时间：2009-03-06T13:12:32.000
> 
> 标签：iphone, objective-c

我正在为 iPhone 开发一个应用程序，其中一些文本显示在 UITextView 中。我想在文本中搜索特定单词，然后用该特定单词着色显示文本。如果有人能帮我解决这个问题，我会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-06T13:32:50.877

UITextView 不允许对其中的文本进行任何格式设置。如果文本是静态的（即不需要编辑），请改用 UIWebView；这将允许您应用 HTML 格式。

如果 web 视图不是一个选项，你最好的办法是尝试计算有问题的文本在文本视图中的位置，然后在它周围画出某种高亮。NSString 有一些方法可以计算在屏幕上绘制给定字符串需要多少空间；通过非常非常聪明地使用这些方法，您可能能够弄清楚您要突出显示的单词在哪里。不幸的是，这一点都不简单。

如果您确实提出了解决方案，那么这里的每个人都可能很想听听！

# visual-studio-2008 - 在 Visual Studio 中调试时包含所有文件？

> ID：618813
> 
> 赞同：5
> 
> 时间：2009-03-06T13:15:10.310
> 
> 标签：visual-studio-2008, debugging, file-not-found

调试时如何设置 Visual Studio 2008 以包含项目根目录中的所有文件？

我在项目根文件夹中有一些文件没有复制到 bin/debug 文件夹中，所以当我要调试应用程序时，我必须**手动**复制这些文件。我正在寻找一种让 VS在调试构建过程中**自动**包含这些文件的方法。有什么提示吗？

谢谢你。/亚当

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-06T13:19:40.097

对于非源文件和非资源文件（因此不是编译的一部分），将该文件属性中的“复制到输出目录”设置设置为“不复制”以外的其他内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-06T13:21:12.557

尝试将文件包含到解决方案中，一旦它们出现在项目的树中，将“复制到输出目录”属性设置为“始终复制”或“如果更新则复制”之一

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-06T13:18:29.430

我发现将它们保存在 bin 文件夹中最容易，但将它们作为解决方案项添加到解决方案中。这样它们就成为解决方案的一部分，受源代码控制等，但当您在运行时需要它们时，它们总是在正确的位置。

# debugging - 记录与调试

> ID：618820
> 
> 赞同：10
> 
> 时间：2009-03-06T13:18:15.607
> 
> 标签：debugging, logging, usability, messaging

**背景：** 我继承了一个 Web 应用程序，该应用程序旨在在本地和远程设备之间创建即时连接。最近有大量的活动部分：应用程序本身发生了重大变化；开发工具链刚刚更新；并且本地和远程设备都已“修改”以支持这些更改。

好的一面是它有一个合理的日志系统，可以将调试消息写入文件，并将日志记录到文件和实时用户屏幕。我有机会重新设计整个日志/调试机制。

**例子：**

*   所有消息都带有时间戳，并以严重性级别为前缀。
*   日志是给客户的。他们记录系统对他/她的请求的响应。
*   任何识别问题的日志也会提出解决方案。
*   调试适用于开发人员和技术支持。它们揭示了系统内部。
*   调试指示生成它们的函数和/或行。
*   客户可以动态调整调试级别以设置详细程度。

**问题：**作为开发人员或消费者，您使用过哪些最佳实践来生成有用的日志和调试？

* * *

**编辑：**到目前为止有很多有用的建议，谢谢！*澄清一下*：我对记录的内容更感兴趣：内容、格式*等*——以及这样做的原因——而不是特定的工具。

你见过的最好的日志是什么让它们最有帮助？

*谢谢你的帮助！*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-06T13:41:03.493

不要混淆日志记录、跟踪和错误报告，我认识的一些人会这样做，它会创建一个非常糟糕的日志文件以通过 grep 获取我想要的信息。

如果我想把所有东西都做好，我会分成以下几部分：

> *   **跟踪**-> 转储每个动作和步骤，带有时间戳，以及该阶段的输入和输出数据（最丑和最大的文件）
> *   **记录**-> 仅记录业务流程步骤，客户端进行查询，因此只记录查询条件和输出数据。
> *   **错误报告/调试**-> 记录异常，详细说明它发生的位置、时间戳、输入/输出数据（如果可能）、用户信息等

这样，如果发生任何错误并且错误/调试日志不包含我喜欢的足够信息，我总是可以做一个`grep -A 50 -B 50 'timestamp' tracing_file`以获得更多详细信息。

**编辑：** 正如已经说过的那样，坚持标准包，例如 python 的内置日志记录模块，总是好的。滚动你自己的不是一个好主意，除非该语言的标准库中没有一个。我确实喜欢将日志记录包装在一个小函数中，该函数通常采用消息和值来确定它转到哪些日志，即。1 - 跟踪，2 - 日志记录，4 - 调试，因此将值 7 发送到所有 3 等等。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-06T13:23:58.260

使用任何日志记录框架完成的绝对最有价值的事情是“一键式”工具，即使应用程序部署在属于客户的机器上，它也会收集所有日志并将它们邮寄给我。

并在记录的内容上做出正确的选择，这样您就可以大致遵循应用程序中的主要路径。

作为框架，我使用了标准（log4net、log4java、log4c++）

不要实现你自己的日志框架，当已经有一个好的开箱即用的框架时。大多数人只是重新发明轮子。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-24T09:38:57.807

有些人从不使用调试器，但会记录所有内容。那是不同的哲学，你必须做出自己的选择。你可以找到很多[这样](https://web.archive.org/web/20130527013805/http://andrevanderschyff.za.net/?p=143)的建议，或者[这个](http://www.perl.com/pub/2002/09/11/log4perl.html)。请注意，这些建议与语言无关...

[Coding Horror](http://www.codinghorror.com/)有[一篇](http://www.codinghorror.com/blog/2008/12/the-problem-with-logging.html)关于*日志记录问题*的有趣帖子，以及为什么在某些情况下滥用日志记录可能会浪费时间。

我只是相信日志记录是为了跟踪可能保留在生产中的东西。调试是为了开发。可能是看东西的方式太简单了，导致有些人用日志来调试，因为他们受不了调试器。但是调试器模式也可能是浪费时间：您不必像测试用例那样使用它，因为*它没有被记录下来*并且会在调试会话后消失。

所以我认为我对此的看法是：

*   使用日志框架（*log4*系列工具）在开发和生产环境中记录必要和有用的跟踪，具有开发和生产级别
*   当事情失控时，用于特殊情况的调试模式
*   测试用例很重要，可以节省在地狱迷宫式调试会话中花费的时间，用作抗回归方法。请注意，大多数人不使用测试用例。

编码恐怖说*抵制记录一切的趋势*。没错，但是我已经看到了一个 hudge 应用程序，它以一种漂亮的方式（并通过数据库）完全相反......

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-06T14:10:22.080

我只是将您的日志记录系统设置为具有多个日志记录级别，在我编写的服务上，我对几乎每个操作都有一个日志记录/审核，并且它被分配了一个审核级别 1-5，数量越高，您获得的审核事件越多。

1.  最基本的日志记录：启动、停止和重新启动
2.  基本日志记录：处理 x 个文件等
3.  标准记录：开始到处理，完成处理等
4.  高级日志记录：处理中每个阶段的开始和结束
5.  一切：采取的每一个行动

您在配置文件中设置审核级别，以便可以即时更改它。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-06T14:26:27.253

我发现一些通用的经验法则在服务器端应用程序中很有用：

*   **requestID** - 为每个传入 (HTTP) 请求分配一个请求 ID，然后将其记录在每个日志行上，以便您以后可以轻松地通过该 ID 对这些日志进行 grep 并找到所有相关行。如果您认为将 ID 添加到每个日志语句非常繁琐，那么至少 java 日志框架通过使用[映射诊断上下文](http://logback.qos.ch/manual/mdc.html)(MDC) 使其变得透明。
*   **objectID** - 如果您的应用程序/服务处理一些具有主键的业务对象，那么将该主键也附加到诊断上下文很有用。后来，如果有人提出问题“这个对象是什么时候被操纵的？” 您可以轻松地通过 objectID grep 并查看与该对象相关的所有日志记录。在这种情况下，（有时）实际使用[嵌套诊断上下文](http://wiki.apache.org/logging-log4j/NDCvsMDC)而不是 MDC 很有用。
*   **何时登录？**- 至少当你跨越一个重要的服务/组件边界时，你应该记录。这样，您以后可以重建调用流程并深入到似乎导致错误的特定代码库。

由于我是一名 Java 开发人员，我还将介绍我在 Java API 和框架方面的经验。

**API**

我推荐使用[Simple Logging Facade for Java](http://www.slf4j.org/) (SLF4J) - 根据我的经验，它是记录日志的最佳外观：

*   全功能：它没有遵循*最小公分母*方法（如 commons-logging）；相反，它使用了*优雅地降级*的方法。
*   具有适用于几乎所有流行的 Java 日志框架（例如 log4j）的适配器
*   提供有关如何将所有旧式日志记录 API（log4j、commons-logging）重定向到 SLF4J 的解决方案

**实现** 与 SLF4J 一起使用的最佳实现是[logback](http://logback.qos.ch/) - 由创建 SLF4J API 的同一个人编写。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-06T13:44:01.130

使用现有的日志格式，例如 Apache 使用的格式，然后您可以搭载许多可用于分析格式的工具。

# apache-flex - 如何用actionscript画一条很短的线？

> ID：618826
> 
> 赞同：1
> 
> 时间：2009-03-06T13:19:55.307
> 
> 标签：apache-flex, flash, actionscript-3

我无法用 actionscript3 画一条很短的线：

```
var cSp:Sprite = new Sprite();
var cGx:Graphics = cSp.graphics;
cGx.lineStyle( 1, 0xFF0000, 1, false, LineScaleMode.NONE, null, null, 1 );

cGx.moveTo( 2, 10 );
cGx.lineTo( 3, 10 ); 
```

这会创建两个*垂直堆叠*的像素，它们不是很红（#7f0000）！

[垂线？http://www.freeimagehosting.net/uploads/449212bd1f.png](http://www.freeimagehosting.net/uploads/449212bd1f.png)

*（这里放大了：）*

[放大 http://www.freeimagehosting.net/uploads/5c9014a148.png](http://www.freeimagehosting.net/uploads/5c9014a148.png)

由于我试图画一条水平线，这不是我所期望的。我假设这里发生了一些别名/亚像素诡计。绘制一条非常短的线或一个像素的命令的神奇组合是什么？

注意：如果我让我的真正短线长 4 像素（或更多），它会按预期渲染（4+ 像素长，1 像素高，每个渲染像素 #FF0000）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-06T13:40:07.397

您是否尝试过使用各种*帽*和*关节*设置？您的 null/null 值将指示 Flash 使用圆形帽和圆形接头。*斜接限制*的 [last] 参数“1”也将被忽略，因为您不会使用斜接接头。

我建议先尝试 CapsStyle.NONE。然后可能是斜接关节。供参考：[Graphics.lineStyle()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html#lineStyle%28%29)。

编辑：也尝试使用*像素提示*。

# python - 优化 Jinja2 环境创建

> ID：618827
> 
> 赞同：9
> 
> 时间：2009-03-06T13:19:58.270
> 
> 标签：python, google-app-engine, jinja2

我的应用程序在 Google App Engine 上运行，并且由于 CPU 使用率高，大多数请求不断收到黄旗。使用分析器，我将问题跟踪到创建`jinja2.Environment`实例的例程。

我在模块级别创建实例：

```
from jinja2 import Environment, FileSystemLoader
jinja_env = Environment(loader=FileSystemLoader(TEMPLATE_DIRS)) 
```

由于 Google AppEngine 操作模式 (CGI)，此代码可以在每个请求上运行（他们的模块导入缓存似乎将模块缓存几秒钟而不是几分钟）。

我正在考虑将环境实例存储在 memcache 中，但它似乎不可挑选。`FileSystemLoader`实例似乎是可腌制的并且可以被缓存，但我没有观察到使用这种方法对 CPU 使用率有任何实质性的改进。

任何人都可以建议一种方法来减少创建`jinja2.Environment`实例的开销？

**编辑**：下面是探查器输出的（相关）部分。

```
222172 function calls (215262 primitive calls) in 8.695 CPU seconds

 ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     33    1.073    0.033    1.083    0.033 {google3.apphosting.runtime._apphosting_runtime___python__apiproxy.Wait}
438/111    0.944    0.002    2.009    0.018 /base/python_dist/lib/python2.5/sre_parse.py:385(_parse)
   4218    0.655    0.000    1.002    0.000 /base/python_dist/lib/python2.5/pickle.py:1166(load_long_binput)
      1    0.611    0.611    0.679    0.679 /base/data/home/apps/with-the-flow/1.331879498764931274/jinja2/environment.py:10() 
```

一个电话，但据我所知（这在我所有基于 GAE 的应用程序中都是一致的），这是整个请求处理周期中最昂贵的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-19T21:02:24.583

Armin 建议将 Jinja2 模板预编译为 python 代码，并在生产中使用编译好的模板。所以我为此制作了一个编译器/加载器，它现在将一些复杂的模板渲染速度提高了 13 倍，从而消除了**所有**的解析开销。与存储库链接的相关讨论在[这里](http://groups.google.com/group/google-appengine-python/browse_thread/thread/04d4bf3dd615ed1e/2907cdeff922710c)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-08T20:20:49.863

好的，人们，这就是我今天在#pocoo 上得到的：

[20:59] zgoda：你好，我想知道我是否可以优化我的jinja2环境创建过程，问题->[优化Jinja2环境创建](https://stackoverflow.com/questions/618827/optimizing-jinja2-environment-creation)

[21:00] zgoda：我有来自“冷”应用程序的分析器输出-> [http://paste.pocoo.org/show/107009/](http://paste.pocoo.org/show/107009/)

[21:01] zgoda：对于“热”-> [http://paste.pocoo.org/show/107014/](http://paste.pocoo.org/show/107014/)

[21:02] zgoda：我想知道是否可以降低为“冷”请求创建环境的 CPU 成本

[21:05]mitsuhiko：zgoda：将环境创建放入您导入的模块中

[21:05] 光彦：喜欢

[21:05]mitsuhiko：从 yourapplication.utils 导入环境

[21:05] zgoda：它已经在那里了

[21:06] 光彦：嗯

[21:06] mitsuhiko：我认为问题在于模板在每次访问时都重新编译

[21:06] mitsuhiko：不幸的是，gae 是非常有限的，我不知道我目前能做些什么

[21:07] zgoda：我尝试使用 jinja bytecache，但它在 prod 上不起作用（它在开发服务器上）

[21:08] 光彦：我知道

[21:08]mitsuhiko：appengine 没有元帅

[21:12] zgoda：mitsuhiko：谢谢

[21:13] zgoda：我希望我做错了什么，这可以优化......

[21:13] mitsuhiko：zgoda：下一个版本将提供改进的 appengine 支持，但我还不确定如何为 ae 实现改进的缓存

看起来 Armin 意识到 AppEngine 上的字节码缓存存在问题，并计划改进 Jinja2 以允许在 GAE 上进行缓存。我希望随着时间的推移事情会变得更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-30T13:29:51.063

根据这个[google recipe](http://appengine-cookbook.appspot.com/recipe/better-performance-with-jinja2/?id=ahJhcHBlbmdpbmUtY29va2Jvb2tyqwELEgtSZWNpcGVJbmRleCJGYWhKaGNIQmxibWRwYm1VdFkyOXZhMkp2YjJ0eUhnc1NDRU5oZEdWbmIzSjVJaEJYWldKaGNIQWdSbkpoYldWM2IzSnJEQQwLEgZSZWNpcGUiSGFoSmhjSEJsYm1kcGJtVXRZMjl2YTJKdmIydHlIZ3NTQ0VOaGRHVm5iM0o1SWhCWFpXSmhjSEFnUm5KaGJXVjNiM0pyREExMAw)你可以使用 memcache 来缓存字节码。您还可以缓存模板文件内容本身。都在同一个食谱中

# c++ - 带有交错缓冲区的openGL glDrawElements

> ID：618829
> 
> 赞同：4
> 
> 时间：2009-03-06T13:20:31.593
> 
> 标签：c++, opengl, vertex-buffer

到目前为止，我只使用了 glDrawArrays 并且想转而使用索引缓冲区和索引三角形。我正在用纹理坐标、法线和顶点坐标绘制一个有点复杂的对象。所有这些数据都被收集到一个交错的顶点缓冲区中，并使用类似于（假设所有的 serup 都正确完成）的调用进行绘制：

```
glVertexPointer( 3, GL_FLOAT, 22, (char*)m_vertexData );
glNormalPointer( GL_SHORT, 22, (char*)m_vertexData+(12) );
glTexCoordPointer( 2, GL_SHORT, 22, (char*)m_vertexData+(18) );
glDrawElements(GL_TRIANGLES, m_numTriangles, GL_UNSIGNED_SHORT, m_indexData ); 
```

这是否允许 m_indexData 也与我的法线和纹理坐标的索引以及标准位置索引数组交错？或者它是否假设一个单一的线性索引列表适用于整个顶点格式（POS、NOR、TEX）？如果后者是真的，如何用不同的纹理坐标或法线渲染相同的顶点？

我想这个问题也可以改写为：如果我有 3 个单独的索引列表（POS、NOR、TEX），其中后 2 个不能重新排列以与第一个共享相同的索引列表，那么呈现它的最佳方法是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-06T13:33:36.927

不同的列表不能有不同的索引。当您指定时`glArrayElement(3)`，OpenGL 将采用每个列表的第三个元素。
您可以做的是使用您指定的指针，因为实际上最终访问的列表中的位置是从列表开头的指针偏移量加上您指定的索引。如果列表之间有恒定的偏移量，这很有用。如果列表只是一个随机排列，那么这种对每个顶点的播放可能会像使用普通的 old 一样昂贵`glVertex3fv()`，`glNormal3fv()`并且`glTexCoord3fv()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T19:03:00.907

我在 Direct3D 9.0 中尝试做同样的事情时遇到了类似的问题

对于我的 OpenGL 3 实现来说，它相当简单，如果它可以帮助你，我的源代码可以在线获得...... [https://github.com/RobertBColton/enigma-dev/blob/master/ENIGMAsystem/SHELL/Graphics_Systems/ OpenGL3/GL3model.cpp](https://github.com/RobertBColton/enigma-dev/blob/master/ENIGMAsystem/SHELL/Graphics_Systems/OpenGL3/GL3model.cpp)

# windows-installer - 默认 MSI 安装（非自定义）中的操作序列是什么？

> ID：618830
> 
> 赞同：6
> 
> 时间：2009-03-06T13:20:36.257
> 
> 标签：windows-installer

MSI 安装程序在安装过程中会调用许多预定义的操作 - FindRelatedProducts、CheckVersion 等。在不同的安装类型和顺序期间会调用不同的操作：管理员、无人值守、用户、执行、延迟... ' 或“在”这些预定义的 MSI 操作之后。

是否有可用的完整列表显示在不同安装模式和顺序中调用 MSI 操作的确切顺序？理想情况下，对每个操作的作用以及插入自定义操作的好做法进行简短评论。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-10T04:22:45.890

请参阅 MSDN 文档，特别是有关[Using a Sequence Table](http://msdn.microsoft.com/en-us/library/aa372404(VS.85).aspx)的文档。

对于离线参考，下载[Windows Installer 4.5 SDK](http://www.microsoft.com/downloadS/details.aspx?familyid=6A35AC14-2626-4846-BB51-DDCE49D6FFB6&displaylang=en)并阅读**MSI.CHM**（无论如何它比 MSDN 的东西更容易导航）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-30T08:01:25.547

Windows Installer 非常复杂（根据我的经验，我可以说这是荒谬混乱的委婉说法），我没有找到所需操作顺序的任何摘要。但是，例如[Suggested InstallExecuteSequence](https://msdn.microsoft.com/en-us/library/windows/desktop/aa372038(v=vs.85).aspx)中的顺序是 MS 建议的，因此它应该可以工作。

# java - Java：反向排序而不保持顺序

> ID：618835
> 
> 赞同：0
> 
> 时间：2009-03-06T13:21:33.023
> 
> 标签：java, algorithm, sorting, comparison

**更新**：事实上，对于这个问题，唯一可以接受的解决方案是将数组升序排序，然后将其反转。

令**S**为以下事件序列：

```
Event | Time
  A   | 0:00
  B   | 0:01
  C   | 0:01
  D   | 0:02 
```

我有一个简单的 Comparator 来排序**S**，它根据*时间*值对元素进行排序。

```
public int compare(Event e1, Event e2) {

    // Reverse sorting. 
    // _sortOrder is set outside this method.
    if(SORT_DESCENDING.equals(_sortOrder))
        return e2.getTime() - e1.getTime(); /* time is long */

    return e1.getTime() - e2.getTime();
} 
```

问题是：当排序顺序为升序时，**S**排序正确：A、B、C、D。

但是当我使用反向排序时，**S**变成了D、B、C、A：

```
Event | Time
  D   | 0:02
  B   | 0:01 /* B and C should be reversed */
  C   | 0:01
  A   | 0:00 
```

发生这种情况是因为默认排序算法会保持具有相同*时间*值的元素的原始顺序。

那么，如何在不保持原始顺序的情况下对其进行反向排序？

**注意：**我知道我可以对**S**进行升序排序并进一步简单地还原它，但不幸的是，这不是我的选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-06T13:25:39.037

你用什么排序？我的猜测是它可以保证它是一个[稳定的排序](http://en.wikipedia.org/wiki/Sorting_algorithm#Stability)- 就比较而言，你有两个相等的值。

在这种情况下，您可以施加任何额外的命令吗？你能轻松地分辨出哪个事件会在升序中排在第一位吗？如果是这样，只需使原始比较也使用它，然后您的降序将开始自然地工作。

编辑：由于您的数据中没有任何额外的排序信息，因此当您在 Oracle 中再次执行相同的查询时，如果它以不同的顺序返回，我不会感到惊讶。但是，如果您只关心这种特殊情况下的顺序，我建议您在 Java 内存表示中添加一个额外的字段，以将原始索引存储在加载的列表中 - 当您读取数据时，跟踪有多少您已阅读并相应地分配了该字段。然后你可以在排序时使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-06T13:28:04.833

排序算法是正确的：0.01 是 0.01。除非有什么你没有告诉我们。但是，如果您想要升序排序的确切相反顺序，则按升序对它们进行排序并使用[Collections.reverse()](http://java.sun.com/j2se/1.4.2/docs/api/java/util/Collections.html#reverse(java.util.List))。我的意思是：

```
List<SomeObject> list = ...;
Collections.sort(list, myComparator);
Collections.reverse(list); 
```

这会给你你想要的。

但是，如果倒车不是一种选择，那么您只剩下两个选择：

1.  让它没有两个元素可以“相等”。要么包含另一个字段，要么添加一个合成字段（例如当前索引或主键，如果它是一个数字）。这将为您提供可重现、一致和镜像的顺序；或者
2.  实现自己的排序算法。不建议这样做，因为它太容易出错。

现在在你说你不能反转（为什么？）之前，让我问你你是如何排序的？如果您正在使用`Collections.sort()`考虑源代码（Java 6u10）：

```
public static <T extends Comparable<? super T>> void sort(List<T> list) {
Object[] a = list.toArray();
Arrays.sort(a);
ListIterator<T> i = list.listIterator();
for (int j=0; j<a.length; j++) {
    i.next();
    i.set((T)a[j]);
}
} 
```

所以它将集合复制到一个数组中，对该数组进行排序，然后使用它对集合进行重新排序。

你确定你买不起逆转？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T13:32:15.353

我认为您真正想要的是次要排序标准，这样即使主要排序标准认为项目相等，您也可以对项目进行排序。在您的示例中，主要标准是时间，次要标准是事件。这样，在执行排序之前，您不必依赖项目按特定顺序排列，这使事情变得容易得多。

如果您真的没有次要标准，您可能需要研究稳定与不稳定的排序算法，就像 Jon Skeet 提到的那样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-06T13:53:10.373

我是否遗漏了什么，或者您不能只使用事件名称（或任何 A、B、C 和 D）作为辅助排序键？只需将您的 Comparator 扩展为：

```
public int compare(Event e1, Event e2) {
    int cmp = e1.getTime() - e2.getTime(); // compare times
    if (cmp == 0)  // if times are equal, compare names instead
        cmp = e1.getName().compareTo(e2.getName());
    return SORT_DESCENDING.equals(_sortOrder)? -cmp : cmp;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-05-13T19:18:30.810

另一种方法，但不能解决您的问题：

```
List<SomeObject> list = ...;
Collections.sort(list, Collections.<SomeObject>reverseOrder()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-06T13:25:32.610

为什么 0:01 小于/大于 0:01，或者如果它们都相同，为什么要以非常特殊的方式对其进行排序？

您不是在寻找反向排序，而是在寻找反向排序，对不起。:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-06T14:08:16.780

排序顺序看起来确实正确，只需比较名称，如果 e1.getTime() == e2.getTime()。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-06T15:20:29.947

根据比较两个元素与切换它们相比的速度，您可以只进行降序稳定排序，然后仅反转“相等”元素的所有区域。

# maven-2 - 如何用 Maven 替换 Ant？

> ID：618839
> 
> 赞同：14
> 
> 时间：2009-03-06T13:23:47.560
> 
> 标签：maven-2, ant

用 Maven 替换 Ant 应该遵循的最少步骤是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-06T13:45:35.697

1.  [根据标准目录布局](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)设置您的项目。
2.  使用 groupId、artifactId 和 version创建一个[最小的 pom.xml 。](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html#Minimal_POM)
3.  将您的[依赖](http://maven.apache.org/pom.html#Dependencies)项添加到 pom.xml
4.  将 WAR/JAR/EAR 与旧版本进行比较，看看是否有任何变化。采取行动以尽量减少[此处](http://blog.manupk.com/2014/02/4-simple-steps-to-migrate-legacy.html)所述的差异。

您现在应该能够构建一个简单的项目，运行测试并将其打包。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-06T14:36:12.173

轶事：一旦你在 Maven 中，反向之旅（尽管你为什么要回去！）是如此简单：

```
mvn ant:ant 
```

[生成功能等效的 ant 脚本](http://maven.apache.org/plugins/maven-ant-plugin/)。现在如果只存在一个 Ant->Maven 生成器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-27T14:28:00.550

您可以查看[ant2maven](https://github.com/ewhauser/ant2maven)脚本，它从 Ant 脚本构建 pom.xml。我从来没有尝试过，但它可以用来有一个好的 pom.xml 开始......

# java - How to properly handle error logs?

> ID：618844
> 
> 赞同：1
> 
> 时间：2009-03-06T13:24:59.163
> 
> 标签：java, servlets, error-handling

I tried to do several searches before posting this question. If this is a duplicate, please let me know and I will delete it.

My question revolves around the proper way to handle errors produced through our web application. We currently log everything through log4j. If an error happens, it just says "An error has occurred. The IT Department has been notified and will work to correct this as soon as possible" right on the screen. This tells the user nothing... but it also does not tell the developer anything either when we try to reproduce the error. We have to go to the error log folder and try finding this error. Let me also mention that the folder is full of logs from the past week. Each time there is an error, one log file is created for that user and email is sent to the IT staff assigned to work on errors. This email does not mention the log file name but it is a copy of the same error text written that is in the log file.

So if Alicia has a problem at 7:15 with something, but there are 10 other errors that happen that same minute, I have to go through each log file trying to find hers.

What I was proposing to my fellow co-workers is adding an Error Log table into the database. This would write a record to the table for each error, record who it is for, the error, what page it happened on, etc. The bonus of this would be that we can return the primary key value from the table (error_log_id) and show that on the page with a message like "Error Reference Id (1337) has been logged and the proper IT staff has been notified. Please keep this reference id handy for future use". When we get the email, it would tell us the id of the error for quick reference. Or if the user is persistent, they can contact us with the id and we can find the error rather quickly.

How do you setup your error logging? By the way, our system uses Java Servlets that connect to a SQL Server database.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-06T16:29:06.693

I answered a similar question [here](https://stackoverflow.com/questions/618820/logging-vs-debugging/619020#619020), but I will adapt that answer to your question.

We use **requestID** for this purpose - assign a request ID to each incoming (HTTP) request, at the very beginning of processing (in filter) and then log that on every log line, so you can easily grep those logs later by that ID and find all relevant lines.

If you think it is very tedious to add that ID to every log statement, then you are not alone - java logging frameworks have made it transparent with the use of [Mapped Diagnostic Context](http://logback.qos.ch/manual/mdc.html) (MDC) (at least log4j and logback have this).

RequestID can also work as a handy reference number, to spit out, in case of errors (as you already suggested). However, as others have commented, it is not wise to load those details to database - better use file-system. Or, the simplest approach is to just use the requestID - then you do not need to do anything special at the moment error occurs. It just helps you to locate the correct logfile and search inside that file.

How would one requestID look like?

We use the following pattern:

> <instanceName>:<currentTimeInMillis>.<counter>

In consists of the following variables:

*   *instanceName* uniquely identifies particular JVM in particular deployment environment / .
*   *currentTimeInMillis* is quite self-explanatory. We chose to represent it in human-readable format "yyyyMMddHHmmssSSS", so it is easy to read request start time from it (beware: SimpleDateFormat is not thread-safe, so you need to either synchronize it or create a new one on each request).
*   *counter* is request counter in that particular millisecond - in the rare case you might need to generate more than one request ID in one millisecond

As you can see, the ID format has been set up in such a way that *currentTimeInMillis.counter* combination is guaranteed to be unique in particular JVM and the whole ID is guaranteed to be globally unique (well, not in the true sense of "global", but it is global enough for our purposes), without the need to involve database or some other central node. Also, the use of *instanceName* variable gives you the possibility to limit the number of log files you later need to look in to find that request.

Then, the final question: *"that is fine and dandy in single-JVM solution, but how do you scale that to several JVMs, communicating over some network protocol?"*

As we use [Spring Remoting](http://static.springframework.org/spring/docs/2.0.x/reference/remoting.html) for our remoting purposes, we have implemented custom [RemoteInvocationFactory](http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/remoting/support/RemoteInvocationFactory.html) (that takes request ID from context and saves it to [RemoteInvocation attributes](http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/remoting/support/RemoteInvocation.html#addAttribute(java.lang.String,%20java.io.Serializable))) and [RemoteInvocationExecutor](http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/remoting/support/RemoteInvocationExecutor.html) (that takes request ID from attributes and adds it to diagnostic context in the other JVM).

Not sure how you would implement it with plain-RMI or other remoting methods.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T13:50:20.007

I'd oppose the idea of storing error logs in a database. The logging system should be as simple as possible and not involve components that are not 100% necesary to write a log record.

Things can get pretty complex when logging into a DB - e.g. you can having troubles logging any database-related errors (how to log errors that occured because DB not responding, e.g. because of a heavy load or a infrastructure error); other issue I'd see is a potential need to have separate transactions for logging, etc.

On the other hand, having a reference ID for an error is not a bad idea, but again, this it also means to increase complexity of logging system ( e.g. how would you propagate the ref. ID through all layers of your application when a error occurs? )

In projects I'm involved to, the general guideline is to log errors as verbosely as possible, and to include as much context information as possible (to write the logs, we use a 'conventional' approach usually - log4j or simillar). Usually, this works well even for heavy loaded systems.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T14:27:19.030

If multiple servers are running and each server leaves log messages on itself, it is really difficult to trace them. So,somebody or a tool should gather and sort them in time order. It is a good way to have a central point where all messages are sent.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-06T15:03:16.040

A possible solution, have your error page include a 'send email to whatever' link. When the user clicks this email the body of the e-mail might start with a few blank lines followed by something like:

> ----Please do not modify the information below this line.---
> 
> Error details

Any users complaining via this link will automatically send you the info you need and if you are reproducing the error you have quick access to the error message. You might even have a form for sending the e-mail so that the user never sees this (which may be important to some) but then you are relying on your system being at least able to send an e-mail.

Actually I find it useful to print the error details in an HTML comment on error pages like this so that I can always get at them myself.

I do agree with david above that I do not like storing this kind of information in a DB.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-06T15:43:21.687

For the strategies of logging you can see the discussion [Logging best practices](https://stackoverflow.com/questions/576185/logging-best-practices).

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-06T16:44:31.150

I have used an approach like the one you're suggesting ( log to a db ) in the past and it has been **very** helpful.

Not only you cat get the error via SQL but you can also generate reports of what's the most recurring errors and attend them first.

On the design we did, equals stacktraces belong to the same records ( since they were originated exactly in the same place )

We had an small app that pooled that db and we knew then a new exception was generated instead of getting an e-mail that summed with the rest of the previous weeks were ignored altogether.

Of course this database design was very specific for the application we had and additional identifications were possible, we had software version, build, some times input parameters , etc. etc.

With time, the system administrators get to know what to do with each kind of exception and proceed accordingly.

But! Your application may not be that big anyway. Probably you can have the same just parsing the log files.

# java - 从 JMF 中的视频捕获中读取原始数据

> ID：618850
> 
> 赞同：3
> 
> 时间：2009-03-06T13:26:37.647
> 
> 标签：java, jmf

我正在尝试使用 JMF（Java 媒体框架）从视频捕获设备读取原始视频帧。

我已经成功编写了“捕获”部分 - 使用由*Manager创建的**Player*对象，我可以显示来自网络摄像头的实时视频。但是，我不知道如何创建自定义组件来访问实际框架。这可能是因为到目前为止，*Manager*已经创建了我需要的每个类实例。

 **我想首先编写一个显示视频的 GUI 组件。（我不熟悉 AWT/Swing，但基于对其他 GUI 框架的了解，我会说一些源自 JPanel 的东西，该 JPanel 在发出重绘请求或新帧可用时绘制视频。）我希望能够处理每个新帧并在 x/y 上循环所有像素。我可以在我的设备上访问原始/RGB 格式，但是从 YUV 等自动转换不会受到伤害。

我不知道从哪里开始。JMF 文档建议我在几个不同的地方从*Processor*或*DataSink*派生我的类。使用*处理器*接口似乎有点过头了——例如，我不需要播放和定时控制功能；而且我一开始就不知道如何实现它们。从*DataSink*派生似乎是一个更简单的选择，具有较少无用的抽象函数。但是，无论哪种情况，我都完全不知道如何：

a) 将组件连接到我的视频捕获数据源
b) 从类中访问实际的帧缓冲区

我什至可能在这里走错了方向；我只是想记录一下我到目前为止所做的尝试。JMF 文档似乎很少，并且主要面向 [设计] 媒体播放器和转换器。

注意：处理库似乎对此有一个简单的解决方案。我已经看到了一个示例：`x = new Image(captureDevice.getFrame())`这似乎表明像素级访问是可能的，如果不是中间类型，则通过 Image。

但我真的很想先看看 JMF 有多难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-02-07T03:56:26.253

对不起，但在这一点上，JMF 基本上已经死了。您可能会为此使用 FX，但 FX 也不是很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-02-08T01:02:27.783

您可以试试我在[此处](https://stackoverflow.com/questions/1382508/how-to-integrate-webcam-in-swing-application-of-java/1382841#1382841)发布的代码，它使用 JMF 和一个名为 FrameGrabber 的类。

# jquery - 如何通过 JQuery 将图像插入到一些 html 中？

> ID：618851
> 
> 赞同：0
> 
> 时间：2009-03-06T13:26:52.450
> 
> 标签：jquery, image, add

这是情况。我有一个像这样的标准链接：

```
<h2><a href="#">Link Title</a></h2> 
```

现在，我想插入一个背景让它看起来像一个按钮，所以我用 JQuery 添加了一个跨度，如下所示：

```
$(document).ready(function()
{
      $(".post a").wrapInner("<span></span>");
}); 
```

（链接的 html 可以在这里找到， http: [//flickrental.co.uk/](http://flickrental.co.uk/) - 顺便说一下，这不是网站，只是链接的代码）

现在我可以将链接转换成一个更好的“按钮”，我很高兴......但我有另一个想法，如果我可以在链接内添加一个小箭头图像（在文本的右侧）（这个网站是一个附属网站，按钮应该增加点击率以及箭头图像）

但我似乎找不到正确的语法来做到这一点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-06T13:31:29.583

您可能应该使用 css 添加箭头。给定一个 10 像素宽的箭头：

```
.post a {
    padding-right: 10px;
    background: url(arrow.png) no-repeat right 50%;
} 
```

但是，如果您已经将背景图像用于其他用途，则可以使用 jquery 添加图像：

```
$("<img src='arrow.png'/>").prependTo(".post a"); 
```

我从您的问题推测您无权直接更改 HTML。否则，这可能是最好的解决方案。

# visual-studio-2005 - VS2005 设置和部署 - 重新启动时的 MSI 安装程序

> ID：618855
> 
> 赞同：0
> 
> 时间：2009-03-06T13:28:16.737
> 
> 标签：visual-studio-2005, windows-installer, setup-deployment

我构建了一个 VS 2005 安装和部署项目，我能够毫无问题地安装设置。但是，如果我重新启动计算机，设置实用程序将再次运行，要求我再次安装软件（它已经存在）。我以前没有遇到过这个问题，任何帮助都会非常感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-24T22:39:34.950

*   检查[事件日志](http://support.microsoft.com/kb/308427)，它将显示缺少的组件/文件/导致安装程序运行的任何内容。
*   尝试启用[Windows Installer 日志记录](http://support.microsoft.com/default.aspx/kb/223300)并查看日志文件以查看可能出现的问题。
*   [使用Orca](http://msdn.microsoft.com/en-us/library/aa370557.aspx)[验证](http://msdn.microsoft.com/en-us/library/aa369206(VS.85).aspx)生成的 MSI ，它作为[Windows Installer 4.5 SDK](http://msdn.microsoft.com/en-us/library/aa370557.aspx)的一部分提供（在**TOOLS**文件夹中查找**orca.msi**）

 **# c++ - 如何让我自己的 C++ 编译器理解模板、嵌套类等 C++ 的强大特性？

> ID：618859
> 
> 赞同：4
> 
> 时间：2009-03-06T13:30:27.107
> 
> 标签：c++, templates, compiler-development

编写类 C 语言的编译器是我小组的一项大学任务。当然，我将实现我们心爱的 C++ 的一小部分。
确切的任务是绝对愚蠢的，讲师告诉我们它需要是自编译的（应该能够自己编译）——所以，他的意思是不要使用诸如 Boost 和 STL 之类的库。
他也不希望我们使用模板，因为它很难实现。
问题是 - 这对我来说是真的吗，因为我将自己编写这个项目，截止日期为 5 月底 - 6 月中旬（今年），不仅要实现模板，还要实现嵌套语法分析级别的类、命名空间、虚函数表？
PS 我不是 C++ 中的菜鸟

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-03-06T13:35:49.230

坚持做一个C编译器。

相信我，构建一个像样的 C 编译器已经够辛苦了，*尤其是*如果它期望自己编译的话。试图支持所有 C++ 特性，如嵌套类和模板，会让你发疯。也许一个小组可以做到，但就你自己而言，我认为一个 C 编译器就足够了。

如果您对此一无所知，请至少先实现一种类似 C 的语言（这样您就可以提交一些东西）。*然后*专注于炫耀。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-03-06T13:38:06.010

“确切的任务绝对是愚蠢的”——我认为你不能公平地做出这个判断。最好放弃这种观点。

“我要自己写这个项目”——你说这是一个小组项目。您是说您的团队不同意您的观点，即它应该转变为 C++，所以您要开始自己的工作？还有一点我建议改变。

你对 C++ 的了解程度并不重要。您在语法、解析器、词法分析器、AST 和代码生成方面的能力似乎更为密切。

在不了解您或任务的情况下，我会说您在 5 月底之前完成原始任务会做得很好。那就是三个月了。坚持任务。它的难度可能会让你大吃一惊。

如果您提前完成并履行您对团队的义务，我会说您应该随时修改生成的内容以添加 C++ 功能。

我敢打赌 Bjarne Stroustrup 花了三个多月的时间才将对象添加到 C。不要高估自己或低估最初的任务。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-03-06T14:07:24.553

没问题。当您使用它时，为什么不实施一个操作系统来让它运行呢。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-03-06T13:56:26.793

按照任务。*为类 C*语言编写编译器！我要做的是选择 C ​​的一个*子集*。删除浮点数据类型和构建编译器时不需要的所有其他功能。

编写 C 编译器需要大量工作。几个月后你将无法做到这一点。编写 C++ 编译器简直是疯了。5年内你不可能做到这一点。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-03-06T15:32:33.117

我想强调已经提到的几点并提供一些参考。

1) 坚持 1989 ANSI C 标准，没有优化。

2) 别担心，只要有适当的指导、良好的组织和相当多的努力，这是可行的。

3) 阅读[C 编程语言](https://rads.stackoverflow.com/amzn/click/com/0131103628)封面。

[4) 从龙书](https://rads.stackoverflow.com/amzn/click/com/0201100886)了解编译器开发的重要概念。

5）看看[lcc](http://www.cs.princeton.edu/software/lcc/)的代码和[书](https://rads.stackoverflow.com/amzn/click/com/0805316701)。

6) 看看[Lex 和 Yacc](http://dinosaur.compilertools.net/)（或 Flex 和 Bison）

7) 编写一个 C 编译器（直到它可以自编译）是程序员的通行仪式。好好享受。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-03-06T15:13:12.100

对于一个类项目，我认为要求编译器能够自己编译有点过分。我认为这就是问题中愚蠢的意思。这意味着您需要提前确定要实现多少 C，并在构建编译器时坚持这一点。因此，使用原语而不是仅仅使用 STL 映射来构建符号表。这对于数据结构课程可能很有用，但错过了编译器课程的重点。它应该是关于理解编译器所涉及的问题，并选择要使用的数据结构，而不是对数据结构进行编码。

构建编译器是一种很好的方式，可以真正了解一旦编译器掌握了代码会发生什么情况。目标语言是什么？当我学习编译器时，我们三个人花了整个学期的时间来构建一个从 sorta-pascal 到汇编的编译器。这不是一项微不足道的任务。它是一开始看起来很简单的事情之一，但你越深入，事情就越复杂。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-06T14:50:49.503

您应该能够在时间范围内完成类 c 语言。假设您参加的课程超过 1 门，这正是您可以及时完成的​​。C++ 也是可行的，但需要花费更多的额外时间。期望做 c++ 模板/虚拟函数是对自己的期望过高，你可能会一起失败。所以最好坚持使用ac子集编译器并及时完成。您还应该考虑质量检查所需的时间。如果你想要彻底的 QA 本身也需要很好的时间。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-06T13:37:41.333

命名空间或嵌套类，无论是虚函数在语法级别上都非常简单，它只需要解析一两个规则。在更高级别上，在决定选择哪个函数/类（名称阴影、命名空间之间的名称不明确等）或编译为字节码/运行 AST 时要复杂得多。所以 - 你可以写这些，但如果没有必要，跳过它，只写裸函数模型。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-06T13:41:32.227

如果您谈论的是带有代码生成的完整编译器，那就忘了它。如果您只是打算做词法和句法分析方面的事情，那么某种形式的模板可能在时间框架内几乎是可行的，具体取决于您使用的编译器构建工具。

# asp.net - 动态添加控件和 AJAX

> ID：618863
> 
> 赞同：3
> 
> 时间：2009-03-06T13:31:45.667
> 
> 标签：asp.net, ajax

让我首先指出，这不是一个容易回答的问题。至少它几乎不可能找到答案。

在 UpdatePanel 中，我将一些控件动态添加到我的面板控件中。

```
List<Showing> showings = cBLL.GetShowings(tenant.Id);

        int j = 1;
        foreach(Showing showing in showings)
        {
            UserControl uc = (UserControl)Page.LoadControl("Controls/BookShowing.ascx");
            uc.ID = "showing_" + j;
            uc.Visible = true;
            ((BookShowing)uc).SetShowing(showing);
            pnl_showings.Controls.Add(uc);
            j++;
        } 
```

这一切都发生在从控件异步触发的按钮事件中。

在这些字段下方，我在上面显示的代码中添加了一个按钮。该按钮也放置在更新面板中。这个按钮叫做：btn_editShowings

现在，当我来到 btn_editShowings_Click 事件处理程序时，我的动态添加控件不再存在。我也尝试在 OnInit 中捕获它们，但它们也不存在。

F...怎么可能从动态添加的控件中获取数据？？？无论如何，我不在乎它的表现有多糟糕或任何东西，来解决这个问题？

**更新：**

我现在尝试执行以下操作，这应该在我读到的 LoadViewState 之前触发 Init 时起作用。

我在 Button 事件中添加了一些动态控件

```
 protected void Button2_Click(object sender, EventArgs e)
    {    
         for (int i = j; i < showno + 4; i++)
                {
                    UserControl uc = (UserControl)Page.LoadControl("Controls/BookShowing.ascx");
                    uc.ID = "showing_" + i;
                    uc.Attributes.Add("runat", "Server");
                    uc.EnableViewState = true;
                    uc.Visible = true;
                    pnl_showings.Controls.Add(uc);
                }
          UpdatePanel1.Update();
    } 
```

我在 init 函数中做了同样的事情：protected override void OnInit(EventArgs e) { base.OnInit(e);

```
 if (Session["ShowingsCount"] != null)
        {
            int noOfUCs = (int)Session["ShowingsCount"];
            for (int i = 1; i < noOfUCs; i++)
            {
                UserControl uc = (UserControl)Page.LoadControl("Controls/BookShowing.ascx");
                uc.ID = "showing_" + i;
                uc.Attributes.Add("runat", "Server");
                uc.EnableViewState = true;
                uc.Visible = true;
                pnl_showings.Controls.Add(uc);
            }
            UpdatePanel1.Update();
        }
    } 
```

但是当我尝试这个时：

```
FindControl("showing_1").Visible = false; 
```

我得到一个空引用异常。

最好的问候 真正的 Napster，再次陷入困境。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-06T14:41:11.243

1.  当您第一次添加控件时，请跟踪您需要在视图状态中重新创建的控件数量。
2.  在此之后的每次回发时，请确保在 LoadViewState 方法中使用相同 ID 将相应数量的控件添加回页面。

关键是您总是必须在每次回发时向页面添加动态创建的控件，并且您必须在加载视图状态之前执行此操作，以便控件将其表单发布的值加载回其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-09T12:53:16.920

```
BookShowing bs = (BookShowing)UpdatePanel1.FindControl("showing_" + i); 
```

是解决方案， OnInit 覆盖确实有效，是我以错误的方式获取用户控件。

关闭。

# sql-server - 在 Microsoft SQL Server 7 上恢复单个表？

> ID：618872
> 
> 赞同：0
> 
> 时间：2009-03-06T13:35:22.570
> 
> 标签：sql-server, backup, restore

是否可以从 Microsoft SQL Server 7 的完整备份文件中恢复单个表（是的，我知道这确实很旧，但我们的客户端由于各种原因无法升级）。

总备份文件大小约为 180GB，每周一次将整个数据库恢复到开发服务器是不切实际的，因为它需要几天（字面意思）。但是为了开发，我们只需要从这个巨大的文件中取出一些表。

是否可以从备份文件中仅提取我们需要的表？

提前致谢！

最好的问候，马丁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-06T17:14:12.310

这可能不是你所追求的，因为我认为你所追求的不可能。

但是，您可以将有问题的表放入不同的文件组中。然后在恢复时，您只需要恢复与表相关的文件组。

[SQL SERVER 中的文件组](http://msdn.microsoft.com/en-us/library/aa178410(SQL.80).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T13:47:52.930

不是没有第 3 方工具……而且我不知道任何副手。

或者您从 prod 导出/导入您需要的表（或只是新的/更改的数据）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-24T13:30:20.307

我们一直在使用 Red Gate 工具在 Db 之间传输一些表，效果很好。但是，它不是免费工具，您可以下载 14 天试用版试用。

# vb.net - 如何只比较日期部分而不是两个日期的时间？

> ID：618878
> 
> 赞同：28
> 
> 时间：2009-03-06T13:37:08.493
> 
> 标签：vb.net, date, compare

我只想比较两个 VB.NET Date 对象的日期部分（而不是时间）。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2009-03-06T13:39:18.630

只需通过`Date`属性获取每个日期部分并比较两者：

```
date1.Date.CompareTo(date2.Date) 
```

或者：

```
If date1.Date < date2.Date Then 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-06T14:44:28.753

您也可以使用 TimeSpan

```
Dim ts As TimeSpan
ts = dt1 - dt2 
```

ts.Days 现在将两个日期的差作为整天。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-03-06T13:39:02.453

比较 DateTime.Date 属性。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2011-02-25T08:28:11.467

将 txt1 日期更改为使用 dd/mm/yyyy 格式`myDateTime.ToShortDateString()`，以便两个日期的格式相同。然后 ：

```
if (DateTime.Compare(date1, date2) > 0) 
// which means ("date1 > date2")
if (DateTime.Compare(date1, date2) == 0) 
//which means ("date1 == date2");
if (DateTime.Compare(date1, date2) < 0) 
//which means ("date1 < date2"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-04T08:22:44.263

```
Dim backDateCount As Integer = DateDiff(DateInterval.Day, CDate(dtpCheckIn.SelectedDate.Value).Date, Date.Now.Date) 
```

> **日期.现在.日期：** #12/4/2018 12:00:00 AM#
> 
> **日期。现在：** #12/4/2018 03:23:34 PM#

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-06-25T10:56:39.280

```
Dim date1, date2 As Date
date1 = Date.Parse(dtpStart.Text)
date2 = Date.Parse(dtpEnd.Text)
If (DateTime.Compare(date1, date2) > 0) Then ' which means ("date1 > date2") 
    MessageBox.Show("يجب تحديد  الفترة للتاريخ بشكل صحيح  ", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error, MessageBoxDefaultButton.Button1, MessageBoxOptions.RtlReading)
    Exit Sub
End If 
```

# sql-server - 如何创建用于获取最后状态信息的 mssql 视图

> ID：618888
> 
> 赞同：0
> 
> 时间：2009-03-06T13:39:31.343
> 
> 标签：sql-server, view

可以说，我有两张表，一张用于对象记录，一张用于有关这些对象的活动记录。

每次插入或更新对象时，我都会在此活动表中插入一条新记录。

为了以简单的方式告诉它，假设我在活动表中有四个字段；objectId、类型、状态和日期。

当一个对象即将更新时，我计划获取该对象的最后一个状态并查找更改。如果更新值与之前的值有差异，我将使用新输入设置该值，否则我将其设置为空。因此，例如在更新过程中，用户只更改对象的状态值，但类型值保持不变，因此我将插入一个新行，其中类型为空值，状态为新值。

```
从活动中选择 *；

oid 类型状态日期
-----------------------------------------
1 0 1 2009.03.05 17:58:07
1 空 2 2009.03.06 07:00:00
1 1 空 2009.03.07 20:18:07
1 3 空 2009.03.08 07:00:00

```

所以我必须创建一个视图来告诉我对象的当前状态，例如，

```
SELECT * FROM ObjectStateView 其中 oid = 1;

oid 类型状态日期
-----------------------------------------
1 3 2 2009.03.08 07:00:00

```

我如何实现这个_？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-06T13:50:36.573

您是否考虑过使用[MAX](http://msdn.microsoft.com/en-us/library/ms187751.aspx)功能？

```
select oid, type, status, MAX(date) as max_date 
from ObjectStateView 
where oid = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T13:51:38.583

不太确定为什么要在其中使用空值。您可以通过比较最新条目与前一个条目来跟踪输入之间的变化。那么对象的当前状态就是表中的最新条目。您可以通过创建要跟踪更改的对象部分的哈希并将其存储为额外列来确定对象是否已更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-06T14:01:45.237

假设日期可用于查找最新记录：

```
CREATE VIEW foo
AS
    SELECT
        A.oid,
        (SELECT TOP 1 type FROM Activity At WHERE At.OID = A.oid AND At.Date <= MAX(A.date) AND type IS NOT NULL),
        (SELECT TOP 1 status FROM Activity Ast WHERE Ast.OID = A.oid AND Ast.Date <= MAX(A.date) AND status IS NOT NULL),
        MAX(A.date) AS date
    FROM
        Activity A
GO 
```

编辑：如果你想要一个 JOIN （未经测试）

```
CREATE VIEW foo
AS
    SELECT TOP 1
        A.oid,
        At.type,
        Ast.status,
        A.date
    FROM
        Activity A
        LEFT JOIN
        (SELECT TOP 1 oid, date, type FROM Activity WHERE type IS NOT NULL ORDER BY date DESC) At ON A.OID = At.oid
        LEFT JOIN
        (SELECT TOP 1 oid, date, status FROM Activity WHERE status IS NOT NULL ORDER BY date DESC) Ast ON A.OID = Ast.oid
    ORDER BY date DESC
GO 
```

应该早点添加这个：

它将呈指数级扩展，因为您必须触摸桌子 11 次不同的时间。

更好的解决方案是维护一个“当前”表并通过活动触发器来维护它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-28T16:43:04.943

**历史价值：**

由于您跟踪更改，您可能希望查看对象的历史状态：

```
SELECT      a.oid,
            a.date,
            a_type.type,
            a_status.status
FROM        Activity a
LEFT JOIN   Activity a_type
        ON  a_type.oid = a.oid
        AND a_type.date = (SELECT TOP 1 date FROM Activity WHERE oid = a.oid AND date <= a.date AND type IS NOT NULL ORDER BY date DESC)
LEFT JOIN   Activity a_status
        ON  a_status.oid = a.oid
        AND a_status.date = (SELECT TOP 1 date FROM Activity where oid = a.oid AND date <= a.date AND status IS NOT NULL ORDER BY date DESC) 
```

这将返回：

```
oid         date       type        status
----------- ---------- ----------- -----------
1           2009-03-05 0           1
1           2009-03-06 0           2
1           2009-03-07 1           2
1           2009-03-08 3           2 
```

**性能考虑：**

另一方面，如果您的字段多于几个字段，并且表很大，则性能将成为问题。在这种情况下，我还可以将整个值存储/缓存在另一个表*MyDataHistory*中，该表将包含如上表所示的数据。然后使用按 oid 和日期过滤最新行（仅 1 行）的 SQL 视图选择当前（最新）版本是微不足道的。

# continuous-integration - 集成在 Selenium 中的 xHTML 标记检查器

> ID：618890
> 
> 赞同：2
> 
> 时间：2009-03-06T13:40:52.200
> 
> 标签：continuous-integration, selenium, markup, tidy

最近，我在思考如何通过在持续集成机器上使用持续检查 xHTML 源代码来提高项目的质量。

看，我们有一个项目

[http://sourceforge.net/projects/jtidy](http://sourceforge.net/projects/jtidy) - jTidy JTidy 是 HTML Tidy 的 Java 端口，一个`HTML syntax checker`漂亮的打印机。

它可以通过命令行界面验证 xHTML。或者这个工具可以按照我们需要的方式进行扩展，因为所有源代码都是开放的。

我们可以覆盖每个 Selenium 验证方法，例如 assertTextPresent 或任何其他方法，因此它将调用 jTidy（通过提供当前状态的 HTML 源），如果发生一些错误或警告 - 它可以保存到持续集成机器构建的日志 - 因此任何项目的相关人员都可以看到此信息。

我们不能重写所有的 Selenium 方法，在每一步都集成这个调用，而是在我们想要的地方进行这个调用（在 DOM 操作之后）。

是的，我们可以为我们的网站使用 W3C 标记验证器，但没有任何可能使用此验证器验证页面源的初始状态。在页面创建之后，可能会有很多 DOM 操作会产生标记错误/警告——我们可以通过这个方案立即找到它。

使用持续集成的好处之一是您可以从代码中获得快速反馈——它如何与现有代码库集成，测试单元和功能测试是否通过。为什么不获取额外的有用信息，例如即时 xHTML 标记验证状态。我们越早发现问题，就越容易解决它。

我还没有在谷歌上找到关于这个主题的任何东西。并且想知道，你对这个想法有什么看法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-07T03:51:16.287

似乎是一个值得的想法。

我之前用 CI 做过两件类似的事情：

1.  作为构建过程的一部分，我使用 Ant 的[XMLValidate任务来验证静态 xhtml 文件](http://ant.apache.org/manual/Tasks/xmlvalidate.html)

2.  我使用 httpunit 来拉取页面，然后将其解析为 xml

但是在功能测试运行期间绑定到 Selenium 以固有地验证内容的想法对我来说是新颖的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-21T09:14:11.307

我认为，这个想法很棒，但很难从头开始实施。但是这个想法就像构建/质量验证过程的演变，因此有一天它将作为带有文档的即用型工具发布。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-07-18T09:44:07.957

好主意！- 事实上，我只是有完全相同的想法，只是在检查是否有人以前做过 - 啊！看起来你打败了我:)

我正在考虑捕获和自动提交 selenium 命中的每个页面到 w3c HTML 和 CSS 验证器（通过文件而不是链接，因此保持状态） - 任何错误都失败。不过，我喜欢 jtidy 的想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-12-13T03:58:48.397

原则上很好，但我不太确定如何从 Selenium 调用它。我很想看到解释如何从 Selenese 或 PHPUnit 运行它的文档。

# internet-explorer - IE6 锚点点击移动 iframe

> ID：618894
> 
> 赞同：4
> 
> 时间：2009-03-06T13:42:05.580
> 
> 标签：internet-explorer, internet-explorer-6

我们在 IE6 中遇到了一个奇怪的问题。该页面在 Firefox 和 IE7 中运行良好。

我们有一个页面，该页面在该 div 中包含一个 div 和一个 iframe 示例：

```
<html>
<body>
...
<div>
   <iframe src="page.aspx" />
</div>
</body>
</html> 
```

现在假设 page.aspx 有这个代码：

```
<html>
<body>
..
 <a href="#" onclick="alert('just an alert');">click me</a>
</body>
</html> 
```

现在，如果用户点击链接“点击我”，那么 iframe 就会移动！这是对行为的描述：

**在点击链接之前**

![](https://i.stack.imgur.com/8yHyE.jpg)

**点击链接后**

![](https://i.stack.imgur.com/0K0hG.jpg)

似乎我们编写的任何代码都没有引起问题，因为当用户单击“单击我”链接时发生的唯一事情就是显示一个警告框。

有没有人遇到过类似的问题？有关如何解决此问题的任何指示？

PS：我很难用一个简单的例子来重现这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-11-06T16:31:44.053

您是否尝试添加一个`return false;`？需要避免锚点的默认行为。

```
<a href="#" onclick="alert('just an alert');return false;">click me</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T14:20:31.947

好的，如果我们向 iframe 添加 width 属性，问题就会消失

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-06T13:48:12.227

如果你能在公共网络的某个地方提供一个非常简单的演示，那就太好了。如果你这样做了，我们可以玩一下它，看看发生了什么。

# ajax - 是否有任何诊断工具可以对 Opera Mini 的内容交付进行故障排除？

> ID：618895
> 
> 赞同：0
> 
> 时间：2009-03-06T13:42:07.797
> 
> 标签：ajax, cross-browser, opera-mini

我有一个针对各种设备和平台的应用程序。应用程序可以根据客户端的类型呈现不同的 HTML。然而，由于应用程序的复杂性，它共享了大量依赖于异步和 ajax 方法调用的 JavaScript 库。

该应用程序的目标之一是 Opera Mini。这种“某种”有效，但似乎有时在构建专用标记以发送到 Opera Mini JVM 客户端时，它不会等到异步调用完成。是否有任何技术或工具可以查看 Opera 服务器（不是我的应用程序 Web 服务器）发生了什么情况 页面的侧处理以确定我可以做些什么来使这个稳定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-24T19:30:36.993

经过进一步调查，似乎服务器端浏览器在 CSS 方面相当挑剔。我不记得确切的问题，但是一旦我删除了样式表，所有内容都正确显示了。那时我慢慢地重新引入了 CSS，一切都重新上线并按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-04-12T11:24:24.783

在中止之前，您的 javascript 只会被允许很短的时间：

> 出于资源限制的原因，在 Mini 服务器上运行的 JavaScript 只会在暂停前运行几秒钟。这适用于由于事件触发（例如 onload）而运行的 JavaScript，以及由于用户操作而运行的代码。

~ [http://dev.opera.com/articles/view/opera-mini-web-content-authoring-guidelines/#javascript](http://dev.opera.com/articles/view/opera-mini-web-content-authoring-guidelines/#javascript)

所以最好的办法是为 Opera Mini 用户代理提供最少的 javascripty 版本的网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-03-10T03:11:52.987

`server:source`如果您想查看当前的 DOM 树，可以在页面加载后在地址栏中输入。

也可以将该源发布到服务器上的脚本，使用`server:source?post=http://your.server.com/script.`它将发送三个字段作为 POST 请求`url`：`host`和`html`。然后，您可以让您的脚本将其保存到文件中。

（回答一个老问题，以防它帮助某人。）

# asp.net - 为 HTTP POST / GET 请求启用 ASP.NET ASMX Web 服务

> ID：618900
> 
> 赞同：71
> 
> 时间：2009-03-06T13:44:06.077
> 
> 标签：asp.net, web-services, asmx

我想为 HTTP POST 和 GET 请求启用 ASP.NET 经典 (ASMX) Web 服务。我意识到这可以通过添加...在机器或应用程序级别上完成

```
<webServices>
    <protocols>
        <add name="HttpGet"/>
        <add name="HttpPost"/>
    </protocols>
</webServices> 
```

.. 到 machine.config 或 web.config。我的问题是可以按 Web 服务或 Web 方法级别而不是按应用程序或机器启用 HTTP POST 和 GET 请求吗？

我的 Web 服务是使用 net 3.5sp1 用 c# 编写的。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2009-03-06T14:08:30.057

尝试在您的方法上声明 UseHttpGet 。

```
[ScriptMethod(UseHttpGet = true)]
public string HelloWorld()
{
    return "Hello World";
} 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2011-03-21T11:52:31.970

实际上，我找到了一种有点古怪的方法来做到这一点。将协议添加到您的 web.config，但在 location 元素中。将 web 服务位置指定为路径属性，如下所示：

```
<location path="YourWebservice.asmx">
  <system.web>
    <webServices>
      <protocols>
        <add name="HttpGet"/>
        <add name="HttpPost"/>
      </protocols>
    </webServices>
  </system.web>
</location> 
```

# tfs - 为什么我的 TFS 工作区路径不断重新映射自身？

> ID：618901
> 
> 赞同：6
> 
> 时间：2009-03-06T13:44:53.670
> 
> 标签：tfs, workspace

我们正在使用 Visual Studio 2008/TFS 2008。

我们有一个小型开发团队，出于某种原因，当我们中的任何人“获取最新信息”时，我们的某个路径会定期重新映射到它自己的不同路径。这会导致“获取最新”开始删除文件，因为路径已更改。每次重新映射到错误的路径时，它都是相同的路径。

1.  工作空间定义存储在哪里？
2.  是否有什么我们可能已经检查到 TFS 导致了这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-07-03T17:37:43.260

我在打开解决方案时遇到了这种情况。如果解决方案包含指向不在其文件夹下的其他项目的相对路径，这些项目在您的工作区中以不同方式映射，则 GET 将告诉我它正在重新映射以解决此问题。问题是它做出的决定是完全错误的。

解决这个问题的唯一方法是确保所有开发人员都使用与 sourcec 控制相同的结构，并且拥有在每个工作区中表示的结构。

到达那里虽然很痛苦。基本上每个人都必须删除所有文件的所有本地副本，重做工作区，在工作区更改时选择“否”以“获取”，关闭 VS，打开，获取最新信息。

原因是如果项目副本存在本地，即使这些项目没有打开，GET 仍然是错误的。这令人沮丧，因为在检查这些项目的最新差异时没有任何变化，但是当打开包含该项目的解决方案时，该项目中的 dll 引用会自动更改。在那一刻，任何文件都没有待处理的更改。但是在构建之后，这些变化会持续存在并导致下一个 get 再次关闭......

我敢肯定这都是错的，但这就是本周发生在我们身上的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T15:14:40.033

您还可以尝试清除工作区缓存并重新映射它：

```
SET AppDataTF=%USERPROFILE%\Local Settings\Application Data\Microsoft\Team Foundation
SET AppDataVS=%APPDATA%\Microsoft\VisualStudio
如果存在 "%AppDataTF%\1.0\Cache" rd /s /q "%AppDataTF%\1.0\Cache" > NUL
如果存在 "%AppDataTF%\2.0\Cache" rd /s /q "%AppDataTF%\2.0\Cache" > NUL
IF EXIST "%AppDataVS%\8.0\Team Explorer" rd /s /q "%AppDataVS%\8.0\Team Explorer" > NUL
IF EXIST "%AppDataVS%\9.0\Team Explorer" rd /s /q "%AppDataVS%\9.0\Team Explorer" > NUL

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-04-02T13:11:26.720

好，我知道了。这是解决方案。

首先安装 Visual Studio 2008 SP1。（我想你已经安装了 VS 2008 和 Team Explorer）。

现在启动 Visual Studio 2008，转到源代码管理并删除工作区。创建一个新的工作区并将源代码管理文件夹映射到本地文件夹。单击确定。**当它询问“工作空间已被修改**，您想要获取最新的”时，**选择否。**

现在**关闭 Visual Studio 2008**。

重新打开 Visual Studio 2008 并转到源代码管理和**获取特定（选中两个复选框以覆盖文件）。**

如果你有一个基于 asp.net 的 web 解决方案，**现在是时候创建应用程序池、在 IIS 中配置网站**、设置适当的身份验证和授权了。否则它是可选的！

现在转到源代码管理中的相应文件夹并**双击解决方案文件**。您也可以通过双击本地文件夹中的解决方案文件来打开解决方案，但我发现从源代码管理中打开解决方案更容易。

执行上述步骤，**如果您的网站已配置，Visual Studio 2008 将自动检测您**已设置的网站并提示您确认。单击确定。

它将联系源代码控制服务器以查看是否需要同步。如果您的解决方案中有多个项目，**您会观察到文件获取进度条在屏幕上快速闪烁，**您的解决方案将在几分钟内设置完毕。

真正的问题是**Visual Studio 2008 Service Pack 1**。没有它，TFS 映射就会损坏。如果安装了 SP1 并遵循上述指南，则不会有任何问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-06T15:12:08.843

这不是正常行为 - 听起来有些事情很有趣。只是想检查一下-您所做的只是从源代码管理资源管理器中简单获取正确吗？另外-你们所有人都在不同的机器上？（即您不共享虚拟 PC 映像或多台机器具有相同名称的任何内容）

我想我会检查的是转到文件、源代码管理、管理工作区并在获取之前和之后查看您的工作文件夹映射，看看是否有任何变化。它不应该 - 如果它这样做，这可能会给我们一个关于正在发生的事情的线索。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-06T14:28:09.213

工作区定义存储在服务器上。

如果您转到命令行并键入“tf workspace”，您将看到您的工作区的定义。

# php - 从准备好的语句中获取数据

> ID：618902
> 
> 赞同：1
> 
> 时间：2009-03-06T13:45:21.080
> 
> 标签：php, sql, mysql, mysqli, prepared-statement

我有一个函数，它是从数据库中返回一个包含记录的行数组，这些记录是基于 LIKE 查询选择的。出于安全原因，我希望此查询成为准备好的语句。显然我不能像我一样使用绑定参数和查询功能。那时我不确定如何将我的查询保留为准备好的语句，并返回我试图返回的行。

```
function getRowsByArticleSearch($searchString, $table, $max) {
    $con = mysqli_connect("localhost", "x", "x", "x");
    //global $con;
    $recordsQuery = "SELECT ARTICLE_NO, USERNAME, ACCESSSTARTS, ARTICLE_NAME, date_format(str_to_date(ACCESSSTARTS, '%d/%m/%Y %k:%i:%s'), '%d %m %Y' ) AS shortDate FROM AUCTIONS WHERE upper(ARTICLE_NAME) LIKE '%?%' ORDER BY str_to_date(ACCESSSTARTS, '%d/%m/%Y %k:%i:%s')" . $max;
    if ($getRecords = $con->prepare($recordsQuery)) {
        $getRecords->bind_param("s", $searchString);
        //$getRecords->execute();
        echo "test if";
        //$getRecords->bind_result($ARTICLE_NO, $USERNAME, $ACCESSSTARTS, $ARTICLE_NAME, $shortDate);
        while ($getRecords->fetch()) {
            $result = $con->query($recordsQuery);
            $rows = array();
            echo "test while";
            while($row = $result->fetch_assoc()) {
                $rows[] = $row;
            }
        }
        return $rows;
    } else {
        print_r($con->error);
    }
} 
```

永远不会进入 while 循环。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-06T13:51:38.397

如果您有很多列，虽然很乏味，但您可以这样做：

```
function getRowsByArticleSearch($searchString, $table, $max) {

  $con = mysqli_connect("localhost", "x", "x", "x");
  $recordsQuery = "SELECT ARTICLE_NO, USERNAME, ACCESSSTARTS, ARTICLE_NAME, date_format(str_to_date(ACCESSSTARTS, '%d/%m/%Y %k:%i:%s'), '%d %m %Y' ) AS shortDate FROM AUCTIONS WHERE upper(ARTICLE_NAME) LIKE ? ORDER BY str_to_date(ACCESSSTARTS, '%d/%m/%Y %k:%i:%s')" . $max;
  if ($getRecords = $con->prepare($recordsQuery)) {
        $getRecords->bind_param("s", $searchString);
        $getRecords->execute();
        $getRecords->bind_result($ARTICLE_NO, $USERNAME, $ACCESSSTARTS, $ARTICLE_NAME, $shortDate);
        $rows = array();
        while ($getRecords->fetch()) {
            $row = array(
                'ARTICLE_NO' => $ARTICLE_NO,
                'USERNAME' => $USERNAME,
                 ...
            );
             $rows[] = $row;
        }
        return $rows;
    } else {
        print_r($con->error);
    }
} 
```

本质上，您必须自己创建所需的关联数组，因为您不能使用`$result_set->fetch_assoc()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:28:38.947

写`"... LIKE ? ..."`（而不是`"... LIKE '%?%' ..."`）和`$getRecords->bind_param("s", "%$searchString%");`

# asp.net - 是否有任何理由为什么 asp:Button 可以工作但 asp:LinkBut ton 不能？

> ID：618903
> 
> 赞同：0
> 
> 时间：2009-03-06T13:45:25.603
> 
> 标签：asp.net, fckeditor, linkbutton

我正在为帮助台构建管理门户。在一个页面上，我有一个带有 LinkBut​​ton 的下拉菜单，以及另一个带有 Button 的下拉菜单。两个按钮都通过触发 a 重定向到单击它们的页面`Response.Redirect()`，如下所示：

```
Response.Redirect(String.Format("article.aspx?action={0}", ActionDropDown.SelectedValue), False) 
```

这使我可以将一页用于多种功能。

无论如何，LinkBut​​ton 不起作用的页面中有一个 WYSIWYG 编辑器[FCKeditor](http://www.fckeditor.net/)，当我单击 LinkBut​​ton 时，FireBug 会引发以下错误：

```
FCKeditorAPI is not defined
 - WebForm_OnSubmit()()
 - WebForm_OnSubmit()
 - __doPostBack("ctl00$Content$LinkButton1", "")
 - Sys$WebForms$PageRequestManager$_doPostBack("ctl00$Content$LinkButton1", "")
 - (?)()()
 - javascript:__doPostBack('ctl00$Content$LinkButton1','')
 - var editor = FCKeditorAPI.GetInstance('ctl00_Content_NewArticleEditor'); 
```

使用按钮时没有错误。有什么想法吗？

客户端中未禁用 Javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T13:50:11.740

这里不是一个完整的答案，但需要检查的几件事是您确保 JavaScript 在客户端上打开？（听起来像是错误）。

要检查的最明显的事情是按钮在单击时实际执行的操作。它是呈现为提交按钮，还是进行回发？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T13:52:17.507

LinkBut​​ton 使用 javascript。检查它是否未在浏览器上关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-06T13:52:59.063

我认为这是因为 LinkBut​​ton 被渲染成他自己的 <form>，它在 FCKEdit 中继承，或者 FCKeditor 覆盖了它的表单的 onSubmit 行为？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-06T14:41:28.277

通常，当浏览器遇到 JavaScript 错误时，该点之后的所有脚本都无法运行。

FCK 编辑器是否按照您的预期工作？它需要的所有 JavaScript 文件是否都正确到位？您可以在 FireBug 的 Scirpt 选项卡上查看：

选择脚本选项卡，确保脚本已启用，然后在 FireBug 的第一行中，您应该会看到如下内容：

[![检查 |  全部 |  页面路径](https://i.stack.imgur.com/iZ7iF.png)](https://i.stack.imgur.com/iZ7iF.png)

点击页面路径可以查看其他 JS 包括：

[![检查 |  全部 |  页面路径 |  选择脚本](https://i.stack.imgur.com/Bp6YI.png)](https://i.stack.imgur.com/Bp6YI.png)

检查每个请求的文件是否没有返回某种错误。

最后，您是使用[FCKEditor.Net](http://sourceforge.net/project/showfiles.php?group_id=75348&package_id=137125)包装器来访问 FCK 编辑器，还是仅使用现有的编辑器？

# c# - 关闭 JIT，并控制 MSIL（自己的 VM）中的代码流

> ID：618909
> 
> 赞同：1
> 
> 时间：2009-03-06T13:48:02.867
> 
> 标签：c#, interpreter, jit, cil

我正在用 C# 编写自己的脚本语言，具有一些我喜欢的特性，并且我选择使用 MSIL 作为输出的字节码（Reflection.Emit 非常有用，我不必想出另一个字节码）。它可以工作，发出可执行文件，可以运行（甚至可以使用 Reflector 反编译 :)）并且速度非常快。

但是 - 我想在一个进程+一个线程中运行多个“进程”，并手动控制它们分配的 CPU 时间（也实现由 .NET 框架提供的更强大的 IPC）有没有办法完全禁用 JIT 并创建自己的VM，使用.NET框架（并控制内存使用等）在指令后步进指令，无需自己编写任何东西，或者要实现这一点，我必须编写整个MSIL解释？

编辑 1): 我知道解释 IL 并不是世界上最快的事情:)

编辑2）：澄清-我希望我的VM成为某种“操作系统”-它获得一些CPU时间并将其分配给进程，控制它们的内存分配等等。它不必很快，也不必有效，而只是我的一些实验的概念证明。我不需要在处理每条指令的级别上实现它 - 如果这应该由 .NET 完成，我不会介意，我只想说：第一步指令，等到我告诉你下一步。

编辑 3)：我意识到，ICorDebug 可能可以满足我的需求，现在正在查看 Mono 运行时的实现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-06T13:54:08.047

您可以使用[Mono](http://mono-project.com/Main_Page) - 我相信它允许一个选项来解释 IL 而不是 JITting 它。它是开源的这一事实意味着（取决于许可）您也应该能够根据自己的需要对其进行修改。

诚然，Mono 不具备 .NET 的所有功能——但它*可以满足*您的所有需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T14:16:27.887

请注意，MSIL 被设计为由 JIT 编译器解析。它不太适合口译员。一个很好的例子可能是 ADD 指令。它用于添加多种值类型值：byte、short、int32、int64、ushort、uint32、uint64。您的编译器知道需要什么样的添加，但在生成 MSIL 时您会丢失该类型信息。

现在您需要在运行时找到它，这需要检查评估堆栈上的值的类型。非常慢。

易于解释的 IL 具有专用的 ADD 指令，例如 ADD8、ADD16 等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T14:35:58.010

Microsoft 的公共语言运行时实现只有一个执行系统，即 JIT。另一方面，Mono 同时带有 JIT 和解释器。

但是，我并不完全了解您*自己到底想做*什么以及您希望将什么留给微软的实施：

> 有没有办法完全禁用 JIT 并创建自己的 VM？

和

> ...无需我自己写任何东西，或者为了实现这一点，我必须编写整个 MSIL 解释？

有点矛盾。

如果你认为，你可以写出比微软的 JIT 更好的执行系统，你将不得不从头开始编写它。但是请记住，microsoft 和 monos JIT 都是高度优化的编译器。[（编程语言枪战）](http://shootout.alioth.debian.org/)

在用户模式下，无法准确地为操作系统进程安排 CPU 时间。这就是操作系统的任务。

一些绿色线程的实现可能是一个想法，但这绝对是非托管代码的主题。如果这是您想要的，请查看 CLR 托管 API。

我建议您尝试在 CIL 中实现您的语言。毕竟，它被编译为原始 x86。如果您不关心可验证性，则可以在必要时使用指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T20:34:17.920

您可以考虑做的一件事是以状态机样式生成代码。让我解释一下我的意思。

当您在 C# 中使用 yield return 编写生成器方法时，该方法将编译为实现状态机的内部 IEnumerator 类。该方法的代码被编译成逻辑块，这些逻辑块以 yield return 或 yield break 语句终止，每个块对应一个编号状态。因为每个收益返回都必须提供一个值，所以每个块都以在本地字段中存储一个值结束。枚举器对象，为了生成它的下一个值，调用一个由当前状态编号上的巨型 switch 语句组成的方法，以便运行当前块，然后推进状态并返回本地字段的值。

您的脚本语言可以以类似的方式生成其方法，其中方法对应于状态机对象，VM 通过在分配的时间内推进状态机来分配时间。这个方法有一些棘手的部分：实现方法调用和 try/finally 块比直接生成 MSIL 更难。

# python - dateutil.rrule.rrule.between() 只给出现在之后的日期

> ID：618910
> 
> 赞同：4
> 
> 时间：2009-03-06T13:48:08.640
> 
> 标签：python, python-dateutil, rrule

从 IPython 控制台：

```
In [16]: b
Out[16]: datetime.datetime(2008, 3, 1, 0, 0)

In [17]: e
Out[17]: datetime.datetime(2010, 5, 2, 0, 0)

In [18]: rrule(MONTHLY).between(b, e, inc=True)
Out[18]:
[datetime.datetime(2009, 3, 6, 14, 42, 1),
 datetime.datetime(2009, 4, 6, 14, 42, 1),
 datetime.datetime(2009, 5, 6, 14, 42, 1),
 datetime.datetime(2009, 6, 6, 14, 42, 1),
 datetime.datetime(2009, 7, 6, 14, 42, 1),
 datetime.datetime(2009, 8, 6, 14, 42, 1),
 datetime.datetime(2009, 9, 6, 14, 42, 1),
 datetime.datetime(2009, 10, 6, 14, 42, 1),
 datetime.datetime(2009, 11, 6, 14, 42, 1),
 datetime.datetime(2009, 12, 6, 14, 42, 1),
 datetime.datetime(2010, 1, 6, 14, 42, 1),
 datetime.datetime(2010, 2, 6, 14, 42, 1),
 datetime.datetime(2010, 3, 6, 14, 42, 1),
 datetime.datetime(2010, 4, 6, 14, 42, 1)] 
```

如何使`between()`返回日期从开始 ( `b`) 日期开始？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-06T13:58:08.553

您需要传入`b`rrule，如下所示：

```
rrule(MONTHLY, dtstart = b).between(b, e, inc=True) 
```

从这些文档（[http://labix.org/python-dateutil](http://labix.org/python-dateutil)）看来，调用 rrule 而不指定 dtstart 将使用 datetime.datetime.now() 作为您稍后应用的序列的起点`between`。这就是为什么你的价值观始于 2009-03-06。

# db2 - 从 Cobol/CICS 系统到现代 Oracle/C++/Server 设置的最佳方式是什么

> ID：618916
> 
> 赞同：2
> 
> 时间：2009-03-06T13:51:22.250
> 
> 标签：db2, cobol, parsing, mainframe

我们计划将旧的 IBM/COBOL/DB2 遗留应用程序迁移到 Solaris/Oracle/C++“已设置”的世界。我在这里的具体问题是：

1.  是否有使用能够在模型驱动视图中分析 COBOL 代码的工具的经验？（例如数据流分析、代码流分析、交叉/超引用列表、漂亮的打印）

2.  openCOBOL 真的有机会吗？

3.  分析 DB2 和 Oracle 数据模型的最佳工具/框架是什么？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-08T19:49:32.217

[Microfocus](http://www.microfocus.com/)提供了一个名为 Enterprise Server 的产品，它允许 COBOL 与 Web 服务进行交互。

如果您有一个 COBOL 程序 A 和另一个 COBOL 程序 B 并且 A 通过接口部分调用 B，则该工具允许您将 B 的接口部分公开为 Web 服务。

对于程序 A，然后生成客户端代理，A 现在可以通过 Web 服务调用 B。

当然，因为 B 现在有一个 Web 服务，任何其他类型的程序（命令行、Windows 应用程序、Java、ASP 等）现在也可以调用它。

这将允许 C++ 程序调用 COBOL 代码。

他们还有另一个产品 COBOL.Net，它为 COBOL 程序提供了 .NET IL 的解释器。

因为这是在 .NET 平台上，所以您可以与 C# 等混合搭配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T07:58:45.387

适用于 CICS 和 Batch 的 Oracle Tuxedo Application Runtime 支持将 IBM 大型机应用程序重新托管到 Oracle Tuxedo。它提供了 API 和服务的组合，允许 OLTP 和 Batch 大型机应用程序以不变的方式运行，从而保留多年的业务逻辑和数据投资。它通过支持标准 3270 终端仿真器来保护应用程序用户免受更改。它还提供了开发人员在其大型机应用程序中使用的熟悉的 API 和功能。

结果是能够快速（且风险低）将遗留大型机应用程序迁移到运行 COBOL 和 C/C++ 应用程序服务器的开放系统。这提供了显着的成本节约和更大的灵活性。

更多信息，请参考[http://docs.oracle.com/cd/E35855_01/artrt/docs12c/index.html](http://docs.oracle.com/cd/E35855_01/artrt/docs12c/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-08T14:17:59.270

我会推荐[Micro Focus Server 企业版](http://www.microfocus.com/products/Server/ServerEE.asp)作为在 unix/linux 机器上运行的新生产平台。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-14T06:34:43.873

我的公司提供的工具可以满足您的所有要求：IBM Enterprise COBOL 的解析、漂亮打印、流分析（每个编译单元的控制/数据流、跨超大型系统的调用图/点）。请参阅[http://www.semdesigns.com/Products/FrontEnds/COBOLFrontEnd.html](http://www.semdesigns.com/Products/FrontEnds/COBOLFrontEnd.html)

# java - 将数据插入动态创建的表列时面临的问题

> ID：618919
> 
> 赞同：0
> 
> 时间：2009-03-06T13:51:41.050
> 
> 标签：java, mysql, database

我正在使用更改表查询通过代码将列动态添加到数据库中的表中。但是当我试图在该列中插入值时，我遇到了问题。它抛出一个异常列不存在。我通过 netbeans 清理和重建我的项目，它工作正常。

我使用 java 和 mysql 作为数据库。

有没有人知道这个问题的解决方案。

以下是我的更改表查询代码

```
 String alterTableQuery ="alter table `test` add `abc` varchar(50) NOT NULL default ''";
     stmt = conn.prepareStatement(alterTableQuery);
     boolean val = stmt.execute(); 
```

我正在尝试使用以下代码插入数据。

```
 String sqlQuery = "insert into `test` (`id`,`abc`) values (?)" ;
      stmt = conn.prepareStatement(sqlQuery);
      boolean val = stmt.execute(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T21:17:46.857

你也可以重新考虑你的设计。一般来说，用户界面向表中添加列是一种不好的做法。也许您需要更规范的设计。数据库结构更改不应来自用户。如果不同的用户同时进行更改，您可能会造成真正的混乱。此外，用户不应具有添加列的安全权限。这对您的系统来说是一个重大风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T14:01:11.917

我不了解 Java，但在 .net 中对表执行更改后需要调用 dataAdapter.AcceptChanges(); 这基本上将更改提交到表。

在您的代码中，您需要在将列添加到表后进行类似的调用，以便插入能够工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-06T14:16:14.640

这可能是因为数据*描述*语言 (DDL) 通常在事务之外执行。也许提交/回滚，甚至重新连接都会解决问题。只是一个猜测。

# jquery - Ajax 调用完成事件

> ID：618922
> 
> 赞同：0
> 
> 时间：2009-03-06T13:52:13.170
> 
> 标签：jquery, ajax

我需要知道元素完成渲染时是否会触发任何事件。我有一个 ID 为 A 的 div。现在我正在使用 ajax 创建和渲染该 div，并且需要访问 div 内的元素。我该怎么做。尝试使用 $("#A").init()。它不工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-06T13:55:51.990

如果您使用 ajax 调用更新您的 div，则可以将回调函数添加到参数中。一旦 ajax 调用完成，此回调函数将运行：

```
$("#A").load(url, parameters, function () {
    // access elements inside div here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T13:56:21.770

[http://docs.jquery.com/Ajax/load#urldatacallback](http://docs.jquery.com/Ajax/load#urldatacallback)

加载（网址，数据，回调）

为什么你不能开始在回调中使用 div？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-06T14:10:39.757

显而易见的方法是将您的操作放在 load/ajax/post/etc AJAX 调用的回调中。如果您不能这样做（无论出于何种原因），也许这[ajaxComplete](http://docs.jquery.com/Ajax/ajaxComplete#callback)事件就是您所追求的：

```
$("#msg").ajaxComplete(function(request, settings){
  $(this).append("<li>Request Complete.</li>");
}); 
```

当然，您必须检测到它是正确的 AJAX 调用，但这可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-29T13:57:22.710

我多次遇到类似的问题。我几乎放弃了，直到我阅读了[.on()](http://api.jquery.com/on/)函数的详细文档。

通常通过使用 .on() 函数，我们附加如下事件处理程序：

```
 $("#dataTable tbody tr").on("click",function() {
        alert($(this).text());
    }); 
```

但是通过委托事件方法，我们可以通过以下方式实现相同的目标：

```
 $("#dataTable tbody").on("click","tr",function() {
        alert($(this).text());
    }); 
```

在这里，即使表格行（即 tr 元素）通过 ajax 调用更新，上述代码仍将保持附加状态并继续执行预期的操作。

我想这可以解决你的问题。

# sql - 仅提交在 TRANSACTION 中进行的可能回滚的特定更改

> ID：618928
> 
> 赞同：5
> 
> 时间：2009-03-06T13:54:41.103
> 
> 标签：sql, sql-server-2005, transactions, locking, transaction-isolation

*这是对原始问题的重要修改，使其更加简洁并涵盖了现有答案提出的要点......*

是否可以在单个事务中对多个表进行多次更改，并且只回滚一些更改？

在下面的 TSQL 中，我不希望“myLogSP”所做的任何更改都被回滚。但如有必要，各种 myBusinessSP 所做的所有更改都应回滚。

```
BEGIN TRANSACTION  

    EXEC myLogSP

    EXEC @err = myBusinessSPa
    IF (@err <> 0) BEGIN ROLLBACK TRANSACTION RETURN -1 END

    EXEC myLogSP

    EXEC @err = myBusinessSPb
    IF (@err <> 0) BEGIN ROLLBACK TRANSACTION RETURN -1 END

    EXEC myLogSP

    EXEC @err = myBusinessSPc
    IF (@err <> 0) BEGIN ROLLBACK TRANSACTION RETURN -1 END

    EXEC myLogSP

COMMIT TRANSACTION
RETURN 0 
```

顺序很重要，myLogSPs 必须发生在 myBusinessSPs 之间和之后（myLogSPs 接受 myBusinessSPs 所做的更改）

同样重要的是，所有 myBusinessSP 都发生在一个事务中以维护数据库完整性，并在必要时允许其所有更改回滚。

就好像我希望 myLogSP 表现得好像它们不是事务的一部分。它们恰好在一个内部（由于需要在 myBusinessSP 之间调用），这只是一个不便的事实。

编辑：

最终答案是“否”，唯一的选择是重新设计代码。要么使用表变量进行日志记录（因为变量不会回滚），要么将业务逻辑重新设计为不需要事务...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-06T14:00:00.653

使用[`SAVEPOINT`s](http://msdn.microsoft.com/en-us/library/ms188378.aspx)，例如

```
BEGIN TRANSACTION  

    EXEC myLogSP

    SAVE TRANSACTION savepointA
    EXEC @err = myBusinessSPa
    IF (@err <> 0) BEGIN
        ROLLBACK TRANSACTION savepointA
        COMMIT
        RETURN -1
    END

    EXEC myLogSP

    SAVE TRANSACTION savepointB
    EXEC @err = myBusinessSPb
    IF (@err <> 0) BEGIN
        ROLLBACK TRANSACTION savepointB
        COMMIT
        RETURN -1
    END

    EXEC myLogSP

    SAVE TRANSACTION savepointC
    EXEC @err = myBusinessSPc
    IF (@err <> 0) BEGIN
        ROLLBACK TRANSACTION savepointC
        COMMIT
        RETURN -1
    END

    EXEC myLogSP

COMMIT TRANSACTION 
```

* * *

**编辑**

根据迄今为止提供的信息（以及我对它的理解），您似乎必须重新设计您的日志记录 SP，要么使用变量，要么使用文件，或者允许它们“事后”运行如下：

```
BEGIN TRANSACTION  

    SAVE TRANSACTION savepointA
    EXEC @err = myBusinessSPa
    IF (@err <> 0) BEGIN
        ROLLBACK TRANSACTION savepointA
        EXEC myLogSPA -- the call to myBusinessSPa was attempted/failed
        COMMIT
        RETURN -1
    END

    SAVE TRANSACTION savepointB
    EXEC @err = myBusinessSPb
    IF (@err <> 0) BEGIN
        ROLLBACK TRANSACTION savepointB
        EXEC myLogSPA -- the call to myBusinessSPa originally succeeded
        EXEC myLogSPB -- the call to myBusinessSPb was attempted/failed
        COMMIT
        RETURN -1
    END

    SAVE TRANSACTION savepointC
    EXEC @err = myBusinessSPc
    IF (@err <> 0) BEGIN
        ROLLBACK TRANSACTION savepointC
        EXEC myLogSPA -- the call to myBusinessSPa originally succeeded
        EXEC myLogSPB -- the call to myBusinessSPb originally succeeded
        EXEC myLogSPC -- the call to myBusinessSPc was attempted/failed
        COMMIT
        RETURN -1
    END

    EXEC myLogSPA -- the call to myBusinessSPa succeeded
    EXEC myLogSPB -- the call to myBusinessSPb succeeded
    EXEC myLogSPC -- the call to myBusinessSPc succeeded

COMMIT TRANSACTION 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-06T14:46:14.193

我们很幸运地将日志条目放入表变量中，然后在提交或回滚后插入到真实表中。

好的，如果您不在 SQL Server 2008 上，请尝试此方法。这很混乱，是一种解决方法，但它应该可以工作。#temp 表和表变量必须使用 sp 返回的结构进行设置。

```
create table #templog (fie1d1 int, field2 varchar(10))

declare @templog table (fie1d1 int, field2 varchar(10))

BEGIN TRANSACTION      
insert into #templog
Exec my_proc

insert into @templog (fie1d1, field2)
select t.* from #templog t 
left join @templog t2 on t.fie1d1 = t2.fie1d1 where t2.fie1d1 is null

insert into templog
values (1, 'test')

rollback tran
select * from #templog
select * from templog
select * from @templog 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-06T14:46:58.263

您基本上需要跳出当前上下文。有几种方法可以做到这一点。一种（我从未尝试过）是调用 CLR 进行插入。

也许更好的方法是使用表变量不受事务影响的事实。例如：

```
CREATE TABLE dbo.Test_Transactions
(
     my_string VARCHAR(20) NOT NULL
)
GO

DECLARE
     @tbl TABLE (my_string VARCHAR(20) NOT NULL)

BEGIN TRANSACTION

INSERT INTO dbo.Test_Transactions (my_string) VALUES ('test point one')

INSERT INTO @tbl (my_string) VALUES ('test point two')

INSERT INTO dbo.Test_Transactions (my_string) VALUES ('test point three')

ROLLBACK TRANSACTION

INSERT INTO dbo.Test_Transactions (my_string) select my_string from @tbl

SELECT * FROM dbo.Test_Transactions
SELECT * FROM @tbl
GO 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-06T14:20:27.033

使用[保存点](http://msdn.microsoft.com/en-us/library/ms188378.aspx)和[事务隔离级别](http://msdn.microsoft.com/en-us/library/ms173763.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-06T13:59:33.293

将日志插入移到事务之外不是简单的方法吗？

对于表锁，我真的没有答案，我想你已经有了答案，***必须有***一个表锁，因为标识列可能会回滚。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-06T14:00:19.733

将 BEGIN TRANSACTION 语句移到第一次插入之后。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-06T15:17:38.503

也许您可以将业务表的插入/更新放在它们自己的原子事务 t1 中，并将这些事务中的每一个都包装在另一个事务 t2 中，该事务执行日志表更新和 t1（业务表更新）而没有任何回滚。例如：

```
BEGIN TRANSACTION t2
     <insert to log>
     <execute stored procedure p1>
END TRANSACTION t2

CREATE PROCEDURE p1
AS
     BEGIN TRANSACTION t1
         <insert to business tables>
         <rollback t1 on error>
     END TRANSACTION t1 
```

我相信当您在存储过程中回滚 t1 时，这将使调用事务 t2 不受影响。

# wpf - WPF MouseMove 事件轮询

> ID：618933
> 
> 赞同：3
> 
> 时间：2009-03-06T13:56:58.180
> 
> 标签：wpf, onmousemove

我创建了一个 WPF 应用程序，其中关闭了标题栏和 chrome。我在整个应用程序周围都有一个边框，我认为它在某些方面会像 chrome 一样。我要做的第一件事是让 mousemove 事件在单击鼠标时捕获鼠标的移动，以便窗口随鼠标移动。问题是，如果鼠标移动得太快，它会设法离开窗口，因此 mousemove 不再触发。无论鼠标的速度如何，我都可以使用普通的 WinForm 来执行此操作，而不会出现任何问题。有没有办法更有效地做到这一点，或者调整mousemove的轮询？也许除了边界之外的其他容器会表现更好？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-06T14:58:24.337

在窗口的左键单击事件处理程序中尝试 Me.DragMove。它比大多数自定义解决方案要好得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-06T14:04:51.640

当用户单击时，您应该捕获鼠标（请参阅[Mouse.Capture](http://msdn.microsoft.com/en-us/library/system.windows.input.mouse.capture.aspx)）。这样，无论鼠标光标是否在您的元素上，您都将获得鼠标事件。

# visual-studio-2005 - 设置和部署项目 - VS2005

> ID：618938
> 
> 赞同：0
> 
> 时间：2009-03-06T13:58:07.163
> 
> 标签：visual-studio-2005, windows-installer

嗨，我构建了一个 VS 2005 安装和部署项目，我能够毫无问题地安装设置。但是，如果我重新启动计算机，设置实用程序将再次运行，要求我再次安装软件（它已经存在）。我以前没有遇到过这个问题，任何帮助都会非常感激。

谢谢！

这是我在应用程序下的 Windows 事件查看器中看到的内容：

事件类型：警告事件源：MsiInstaller 事件类别：无事件 ID：1001 日期：2009 年 3 月 6 日时间：上午 8:14:49 描述： **检测到产品“{2B4F800C-FA4E-42D9-93D3-C3DC4A4FCAB7}”，在请求组件“{D2D7B4BF-6CCA-11D5-8B3F-00105A9846E9}”期间功能“AlwaysInstall”失败**

我不记得在项目的任何地方看到“AlwaysInstall”属性，我在哪里设置或取消设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T14:44:11.640

是否有可能在重新启动之前已安装的文件之一已因某种原因被修改？

我不熟悉错误消息，但也许 Windows 安装程序正在尝试在重新启动时修复安装？

您是否尝试过安装产品一次，然后在重新启动之前再次运行安装程序并选择修复选项并查看是否成功？如果此时修复失败，请在打开详细日志记录的情况下从命令行再次运行它：

```
msiexec /lv logfile.txt /i "MyInstaller.msi" 
```

当错误消息弹出时，检查日志文件中发生的最后一件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T14:12:09.720

我不知道这个具体的错误，但是当我有时删除应用程序的一些看似无关紧要的部分时，我也看到过类似的行为，例如可能是桌面快捷方式、开始菜单快捷方式、原始安装程序安装的配置文件等。下次我会尝试运行应用程序，msiexec 会启动并尝试重新安装应用程序。

# c# - 我可以在不读取原始数据的情况下从 C# 追加到 MSSQL 数据库中的 BLOB 吗？

> ID：618940
> 
> 赞同：2
> 
> 时间：2009-03-06T13:59:11.467
> 
> 标签：c#, sql-server, blob

我希望能够从 C# 将一些数据附加到 MS SQL 2005 服务器中的二进制字段，而无需读取原始数据，将其连接起来，然后将其全部设置回去。

这可能吗？

干杯! 史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-07-26T09:10:01.093

我不知道 MSSQL 2005 中是否存在此选项，但如果有人在 MSSQL2008 中搜索将信息附加到 varbinary(max) 中，则可以这样做：

```
UPDATE [dbo].[Files] SET [FileContent].WRITE('0x',NULL,0)
WHERE Id = 1 
```

希望这会对某人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T14:12:42.543

阅读[http://msdn.microsoft.com/en-us/library/3517w44b.aspx](http://msdn.microsoft.com/en-us/library/3517w44b.aspx)上的 UPDATETEXT sql 语句。Msdn 文章包含将二进制数据附加到 StorePhoto 方法中的 blob 的示例代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-06T14:09:07.013

好吧，我不知道对于 BLOB，但是对于文本，您可以这样做：

UPDATE tablename SET columnname=concat(columnname,'我的额外文本');

# .htaccess - mod_rewrite 图形用户界面？

> ID：618941
> 
> 赞同：24
> 
> 时间：2009-03-06T13:59:12.717
> 
> 标签：.htaccess, user-interface, mod-rewrite

任何人都有用于开发 mod_rewrite 规则的图形工具。

理想情况下，它将显示一个重写管道，然后当给定一个 uri 实例时，将显示转换为 get 应用。

让它们设置得恰到好处总是很痛苦，所以任何使它更容易的方法都会有所帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-02-14T08:07:25.003

对于 .htaccess（读取：mod_rewrite）规则的在线测试，请尝试：

[http://htaccess.madewithlove.be/](http://htaccess.madewithlove.be/)

它向您展示了规则应用于输入 URL 的内容和方式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-08T22:29:25.950

我不知道任何可下载的工具，但有一些有用的网站可以用来完成基础知识：

[http://www.webmaster-toolkit.com/mod_rewrite-rewriterule-generator.shtml](http://www.webmaster-toolkit.com/mod_rewrite-rewriterule-generator.shtml)

[http://www.thejackol.com/htaccess-cheatsheet/](http://www.thejackol.com/htaccess-cheatsheet/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-09T11:13:07.440

我觉得写一个挺难的。因为 mod_rewrite 的行为在很大程度上取决于它所使用的环境。

以用于测试*TestString*是否存在并且是文件系统中的常规文件的[指令](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond)`-f`表达式为例。如果没有实际的文件系统，您将如何做到这一点？[`RewriteCond`](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond)

 *虽然`RewriteRule`可以实现基本行为（只是指令）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-07T01:17:33.973

我不知道有任何此类工具。我解决这个问题的方法是通过一组单元测试来检查我的规则的正确性。如果您想让您的测试始终与配置同步，您必须配置您的测试以直接从配置文件中读取加载规则。

./亚历克斯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-18T12:20:27.017

在 mwl.be api 的帮助下，technicalseo.com 还开发了一个新的 web 应用程序，它们具有很好的 gui 和相同的功能。

[https://technicalseo.com/tools/htaccess/](https://technicalseo.com/tools/htaccess/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-03-06T16:38:13.783

听起来您正在寻找像[RegexBuddy](http://www.regexbuddy.com/)这样的应用程序。

# html - 如何将html id添加到rails form_tag

> ID：618948
> 
> 赞同：77
> 
> 时间：2009-03-06T14:01:59.870
> 
> 标签：html, ruby-on-rails

我正在使用 Rails 2.2.2，我想在 form_tag 生成的 html 表单代码中添加一个 id。

```
<% form_tag session_path do -%>      
<% end -%> 
```

目前生产：

```
<form action="/session" method="post">
</form> 
```

希望它产生：

```
<form id="login_form" action="/session" method="post">
</form> 
```

该[api](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#M001697)并没有任何帮助，我尝试添加各种组合

```
:html => {:id => 'login_form'} 
```

没有运气。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2009-03-06T14:04:39.270

为`<element>_tag`您直接指定 HTML 属性，如下所示：

```
<% form_tag session_path, :id => 'elm_id', :class => 'elm_class',
                          :style => 'elm_style' do -%>
   ...
<% end -%> 
```

它适用于您需要在地图中移动 HTML 属性的构造：`<element>_`**`remote`**`_tag``:html`

```
<% form_tag form_remote_tag :url => session_path, :html => {
                            :id => 'elm_id', :class => 'elm_class',
                            :style => 'elm_style' } do -%>
   ...
<% end -%> 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-10-27T23:36:10.897

这段代码

```
form_tag(:controller => "people", :action => "search", :method => "get", :class => "nifty_form") 
```

给出结果：

```
<form accept-charset="UTF-8" action="/people/search?method=get&class=nifty_form" method="post"> 
```

但是，如果你使用这种结构

```
form_tag({:controller => "people", :action => "search"}, :method => "get", :class => "nifty_form") 
```

你会得到结果

```
<form accept-charset="UTF-8" action="/people/search" method="get" class="nifty_form"> 
```

这正是你想要的

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-06T14:07:09.233

```
<% form_tag 'session_path', :id => 'asdf' do -%>      
<% end -%> 
```

生成

```
 <form action="session_path" id="asdf" method="post"><div style="margin:0;padding:0"><input name="authenticity_token" type="hidden" value="ed5c62c836d9ba47bb6f74b60e70280924f49b06" /></div>
   </form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-20T12:40:51.033

就我而言，我需要将 HTML 选项放入`{}`实际添加`id`到 中`form_tag`，如下所示：

`<%= form_tag(some_update_path(@some_record), { method: :put, id: "some-id" }) do <% end %>`

# sql - 将休眠用于复杂查询的最佳方式，例如每组前 N 个

> ID：618951
> 
> 赞同：2
> 
> 时间：2009-03-06T14:02:35.017
> 
> 标签：sql, hibernate, orm, greatest-n-per-group

我现在在一个报告应用程序上工作了一段时间，我使用休眠来定义我的查询。然而，我越来越觉得，对于报告用例，这不是最好的方法。

1.  查询只会产生部分列，因此不会产生类型化的对象（除非您在 java 中强制转换所有字段）。
2.  不直接进入 sql 或 hql 就很难表达查询。

我目前的问题是我想获得每个组的前 N ​​个，例如组中每个元素的最后 5 天，每天我都会显示访问者的数量。

结果应如下所示：

```
| RowName | 1-1-2009 | 2-1-2009 | 3-1-2009 | 4-1-2009 | 5-1-2009
| SomeName| 1        | 42       | 34       | 32       | 35 
```

将每天每行存储的数据转换为这样的输出的最佳方法是什么？是时候回到常规 sql 并使用无类型数据了吗？

我真的很想为我的结果使用类型化的对象，但是 java 让我的生活变得非常艰难。欢迎任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-26T01:43:31.950

使用 Criteria API，您可以执行以下操作：

```
Session session = ...;
Criteria criteria = session.createCriteria(MyClass.class);
criteria.setFirstResult(1);
criteria.setMaxResults(5);
... any other criteria ...
List topFive = criteria.list(); 
```

要在 vanilla SQL 中执行此操作（并确认 Hibernate 正在执行您期望的操作），请查看[此 SO 帖子](https://stackoverflow.com/questions/595123/is-there-an-ansi-sql-alternative-to-the-mysql-limit-keyword)：

# perl - 如何将输出从一个文件句柄重定向到另一个文件句柄？

> ID：618953
> 
> 赞同：3
> 
> 时间：2009-03-06T14:03:52.970
> 
> 标签：perl, redirect, filehandle

我想从 Perl（在 Linux 上运行）中建立一个进程管道，由两个部分组成，在不同的时间运行。

例如：

启动消费者进程：

```
open( OUT, "| tar xvf - " ) || die "Failed: tar: $!"; 
```

然后很久以后开始生产者进程：

```
open( IN, "gpg -d $file |" ) || die "Failed: gpg: $!"; 
```

但随后以某种方式将 gpg 的输出重定向到 tar 的输入。

我可以通过构建一个循环来做到这一点：

```
while (<IN> ) {
  print OUT;
} 
```

但我想知道我是否可以通过重定向将这两个过程粘合在一起。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-06T14:15:41.443

添加

```
pipe( IN, OUT ); 
```

在两个打开的语句之前。就是这样！

如果你想做更复杂的事情，我会推荐 IPC::Run CPAN 模块：

[http://search.cpan.org/dist/IPC-Run/](http://search.cpan.org/dist/IPC-Run/)

它允许您启动进程，将它们的输入和输出绑定在一起，并在链中的任何点添加日志记录或重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T14:17:38.367

如果这两个进程完全不相关，请使用 FIFO。

```
use POSIX qw(mkfifo);
mkfifo($path, 0700) or die "mkfifo $path failed: $!"; 
```

这会在 $path 处创建一个 FIFO。现在让一个进程写入该文件，另一个进程从中读取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T16:54:29.610

我喜欢[Proc::SafeExec](http://search.cpan.org/dist/Proc-SafeExec/)，它可以让你以几乎任意的方式轻松地将进程和文件句柄联系在一起。这是一个例子：

```
use strict;
use warnings;

use Proc::SafeExec;

open(my $ls, "-|", "ls", "-l") or die "Err: $!";
open(my $fh, ">", "tmp.txt") or die "Err: $!";

my $p = Proc::SafeExec->new({
  exec => [qw(sed -e s/a/b/)],
  stdin => $ls,
  stdout => $fh,
});
$p->wait(); 
```

在查看 IPC::Run 之后，它看起来要简单得多……下面是使用 IPC::Run 的相同示例：

```
use IPC::Run qw(run);

run [qw(ls -l)], "|", [qw(sed -e s/a/b/)], ">", "tmp.txt"; 
```

# python - Python 构建/发布系统

> ID：618958
> 
> 赞同：5
> 
> 时间：2009-03-06T14:04:56.150
> 
> 标签：python, ant, build-automation

我最近开始使用 Pyant 来执行各种构建/发布任务，但最近发现该项目的开发已经结束。

我做了一些研究，似乎找不到任何其他可比较的 Python 构建脚本。只是想知道是否有人可以推荐一个？我基本上需要它来做 ANT 所做的事情 - 使用 XML 文件进行 SVN 更新、移动/复制文件、存档等。

谢谢，克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-06T14:31:09.567

可能最好的答案是按原样使用 Ant……也就是说，使用 Java 版本。我的第二个建议是使用[scons](http://www.scons.org/)。在您问“谁曾想过使用 XML 编写构建脚本？”之前使用 scons 不会花费太多时间？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-06T14:36:23.453

它不完全可比，但我倾向于使用[fabric](http://www.nongnu.org/fab/)。它更适合部署，支持 ssh 到生产主机并以 root 身份运行等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-06T15:20:33.707

有些人使用[Paver](http://www.blueskyonmars.com/projects/paver/)来构建/部署 Python 包。虽然我知道它有效，但它对我的吸引力并不大。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-06T14:21:34.520

行家呢？( [http://maven.apache.org/](http://maven.apache.org/) ) 使用正确的插件，它可以比 ant 做更多的事情，如果你这样配置，它甚至可以使用 ant 进行构建。

它非常灵活，支持整个产品生命周期。我真的建议你看看它。

# windows - 没有路径的 Windows 快捷方式

> ID：618959
> 
> 赞同：2
> 
> 时间：2009-03-06T14:05:55.663
> 
> 标签：windows, visual-studio, visual-studio-2008, windows-installer, shortcuts

“常规”Windows 应用程序快捷方式的目标是可执行文件的路径。此路径在快捷方式的属性对话框中可见（并可编辑）。

但是很多快捷方式没有这样的路径，只显示一个（只读）应用程序名称。例如，所有的 MS Office 程序都有这样的快捷方式。

这些快捷方式是如何工作的（我猜有一个天才），它们比“常规”快捷方式有什么优势，为什么我要在我自己的应用程序中使用这些快捷方式？

最后，我可以使用 Visual Studio 2008 中的安装项目构建的安装程序创建这样的快捷方式吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-06T14:13:06.833

这些是 MSI 提供的“广告”快捷方式。

这是一个谷歌搜索，其中包含一些您可能会觉得有用的信息： [谷歌搜索](http://www.google.com/search?q=advertised+msi+shortcuts)

我不知道您是否可以通过安装项目创建这些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-06T14:20:28.577

广告快捷方式的一个优点是您可以按需安装某些功能，如果我没记错的话，我认为丢失的文件也可以修复。作为一个我讨厌的用户的缺点是我有时想找出可执行文件在哪里以及正在运行哪个可执行文件，而且很难找到。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-03-07T10:09:00.403

阅读 MSDN，关于 Links 的所有内容都有详细说明。

# python - Python 元类

> ID：618960
> 
> 赞同：6
> 
> 时间：2009-03-06T14:06:27.363
> 
> 标签：python, metaclass

我一直在像这样在 Python 中编写类：

```
def hack(f,aClass) :
  class MyClass(aClass) :
     def f(self) :
       f()
  return MyClass

A = hack(afunc,A) 
```

这对我来说看起来很干净。它接受一个类 A，创建一个从它派生的具有额外方法的新类，调用 f，然后将新类重新分配给 A。

这与 Python 中的元类黑客攻击有何不同？与此相比，使用**元类**有什么优势？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-06T14:27:36.283

Python 中类的定义是类型的实例（或类型的子类的实例）。换句话说，类定义本身就是一个对象。使用元类，您可以控制成为类定义的类型实例。

调用元类时，您可以完全重写类定义。您可以访问类的所有建议属性、它的祖先等。不仅仅是注入一个方法或删除一个方法，您还可以从根本上改变继承树、类型以及几乎任何其他方面。您还可以将元类链接在一起，以获得非常动态且完全复杂的体验。

我想真正的好处是类的类型仍然是类的类型。在您的示例中，键入：

```
a_inst = A()
type(a_inst) 
```

将显示它是`MyClass`. 是的，`isinstance(a_inst, aClass)`会返回`True`，但您引入了一个子类，而不是动态重新定义的类。那里的区别可能是关键。

正如 rjh 所指出的，匿名内部类也具有性能和可扩展性的含义。一个元类只被处理一次，并且在类被定义的那一刻，永远不会再被处理。API 的用户也可以扩展您的元类，因为它没有包含在函数中，因此您获得了一定程度的可扩展性。

这篇稍微有点旧的文章实际上有一个很好的解释，它将您在示例中使用的“函数修饰”方法与元类进行了比较，并展示了 Python 元类在该上下文中的演变历史：http: [//www.ibm.com/developerworks /linux/library/l-pymeta.html](http://www.ibm.com/developerworks/linux/library/l-pymeta.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T00:09:30.353

元类是类的类。IMO，这里的家伙很好地覆盖了它，包括一些用例。请参阅 Stack Overflow 问题*[“MetaClass”、“ **new** ”、“cls”和“super”——具体的机制是什么？](https://stackoverflow.com/questions/395982/metaclass-new-cls-and-super-can-someone-explain-the-mechanism-exactly/396109#396109)*.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T06:40:19.413

您也可以使用`type`可调用对象。

```
def hack(f, aClass):
    newfunc = lambda self: f()
    return type('MyClass', (aClass,), {'f': newfunc}) 
```

我发现使用`type`最简单的方法进入元类世界。

# actionscript-3 - For-Each Loop AS3：方向有保证吗？

> ID：618966
> 
> 赞同：13
> 
> 时间：2009-03-06T14:07:57.687
> 
> 标签：actionscript-3, iteration, foreach

我想知道 AS3 中数组、字典和对象类型的迭代顺序，包括 for-each 和 for-in 循环。还有哪些因素可以改变这些循环类型组合的迭代顺序？

例如，我假设在 Array 类型上使用 for-each 总是从第一个元素移动到最后一个元素。For-each 不能在 Dictionary 上使用，那么如何使用 for-in 循环确定顺序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-07T00:34:17.090

正如 Colin Moock 在 Essential Actionscript 3.0 中所述，除非枚举 XML 或 XMLList 对象，否则不能保证 for each in 循环的顺序；

[单击此处查看 Colin Moock 在他的书中的话。](http://books.google.com/books?id=gUHX2fcLKxYC&pg=PA283&lpg=PA283)

[这里](http://manishjethani.com/blog/2008/12/19/guaranteeing-enumeration-order-in-for-in-loops/)讨论了一些解决方法，但老实说，如果您需要保证顺序，那么只需使用常规的旧 for 循环并让它迭代（长度、numChildren 等）次数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-06T14:21:56.343

你的意思是`for (x in y)`for-each循环的类型吗？AS3 规范说 for 循环“具有与 ECMA-262 第 3 版和 E4X 中定义的相同的语法和语义”。

ECMA-262，第 12.6.4 节声明“枚举的顺序由对象定义” - 换句话说，它将取决于您是否正在遍历列表、字典、数组等。

我*希望*大多数集合的文档将明确说明枚举顺序（或未定义顺序），但我没有检查...

编辑：不幸的是，规范声明“枚举属性的机制 [...] 取决于实现。” 我在 Array 文档中看不到任何指定排序的内容。老实说，这有点不令人满意:(

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-06T16:27:00.177

评估顺序在 AS3.0 中有所更改 早期，在 AS 1.0 和 2.0 中，评估顺序基于添加对象的顺序。现在，在 3.0 中，所有循环都保持数组顺序。试试这个片段：

```
var a:Array = new Array();
a[ 1 ] = 'first';
a[ 0 ] = 'second';

for (var key:String in a) 
    trace( key + ': ' + a[ key ] ); 
```

用 AS3.0 和 AS1.0/2.0 试试上述方法

# 64-bit - 64 位线程开销

> ID：618975
> 
> 赞同：2
> 
> 时间：2009-03-06T14:10:09.803
> 
> 标签：64-bit, stack

64 位窗口上的线程开销是多少？我相信堆栈的用户空间为 1mb，而 32 位的内核空间则较少。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-06T14:16:44.903

它可以是你想要的任何东西。[CreateThread(](http://msdn.microsoft.com/en-us/library/ms682453(VS.85).aspx) ) API 允许您指定堆栈大小。如果您使用堆栈大小为 0 调用它，它将使用在可执行文件头中定义的堆栈，可以通过链接器选项进行设置。默认值（对于 x86 和 x64 系统）是 1MB。

# sql - SQL Server 2005 全文论坛搜索

> ID：618985
> 
> 赞同：0
> 
> 时间：2009-03-06T14:12:27.847
> 
> 标签：sql, sql-server, stored-procedures, full-text-search

我正在为我们现有的论坛开发一个搜索存储过程。

我编写了以下使用标准 SQL 全文索引的代码，但是我确信有更好的方法可以做到这一点，并且希望指出正确的方向。

为了提供一些关于它需要如何工作的信息，该页面有 1 个搜索文本框，单击该文本框将搜索主题标题、主题描述和发布文本，并且应该首先返回标题匹配的结果，然后是描述，然后发布数据。

以下是我到目前为止所写的内容，它有效，但并不优雅或没有我想要的那么快。举一个 20K 线程和 80K 帖子的性能示例，搜索 5 个随机单词大约需要 12 秒。

```
ALTER PROCEDURE [dbo].[SearchForums]
(
    --Input Params
    @SearchText VARCHAR(200),
    @GroupId INT = -1,
    @ClientId INT,
    --Paging Params
    @CurrentPage INT,
    @PageSize INT,           
    @OutTotalRecCount INT OUTPUT
)
AS

--Create Temp Table to Store Query Data
CREATE TABLE #SearchResults
(
    Relevance INT IDENTITY,
    ThreadID INT,
    PostID INT,
    [Description] VARCHAR(2000),
    Author BIGINT
)

--Create and populate table of all GroupID's This search will return from
CREATE TABLE #GroupsToSearch
(
GroupId INT
)
IF @GroupId = -1
    BEGIN
        INSERT INTO #GroupsToSearch
        SELECT GroupID FROM SNetwork_Groups WHERE ClientId = @ClientId
    END
ELSE
    BEGIN
        INSERT INTO #GroupsToSearch
        VALUES(@GroupId)
    END

--Get Thread Titles
INSERT INTO #SearchResults
    SELECT 
        SNetwork_Threads.[ThreadId],
        (SELECT NULL) AS PostId,
        SNetwork_Threads.[Description],
        SNetwork_Threads.[OwnerUserId]
    FROM 
        SNetwork_Threads
        INNER JOIN SNetwork_Groups ON SNetwork_Groups.GroupId = SNetwork_Threads.GroupId        
    WHERE 
        FREETEXT(SNetwork_Threads.[Description], @SearchText) AND
        Snetwork_Threads.GroupID IN (SELECT GroupID FROM #GroupsToSearch) AND
        SNetwork_Groups.ClientId = @ClientId

--Get Thread Descriptions
INSERT INTO #SearchResults
    SELECT 
        SNetwork_Threads.[ThreadId],
        (SELECT NULL) AS PostId,
        SNetwork_Threads.[Description],
        SNetwork_Threads.[OwnerUserId]
    FROM 
        SNetwork_Threads
        INNER JOIN SNetwork_Groups ON SNetwork_Groups.GroupId = SNetwork_Threads.GroupId        
    WHERE 
        FREETEXT(SNetwork_Threads.[Name], @SearchText) AND
        Snetwork_Threads.GroupID IN (SELECT GroupID FROM #GroupsToSearch) AND
        SNetwork_Groups.ClientId = @ClientId

--Get Posts
INSERT INTO #SearchResults
    SELECT 
        SNetwork_Threads.ThreadId,
        SNetwork_Posts.PostId,
        SNetwork_Posts.PostText,
        SNetwork_Posts.[OwnerUserId]
    FROM 
        SNetwork_Posts 
        INNER JOIN SNetwork_Threads ON SNetwork_Threads.ThreadId = SNetwork_Posts.ThreadId
        INNER JOIN SNetwork_Groups ON SNetwork_Groups.GroupId = SNetwork_Threads.GroupId        
    WHERE 
        FREETEXT(SNetwork_Posts.PostText, @SearchText) AND
        Snetwork_Threads.GroupID IN (SELECT GroupID FROM #GroupsToSearch) AND
        SNetwork_Groups.ClientId = @ClientId

--Return Paged Result Sets
SELECT @OutTotalRecCount =  COUNT(*) FROM #SearchResults
SELECT  
    #SearchResults.[ThreadID],
    #SearchResults.[PostID],
    #SearchResults.[Description],
    #SearchResults.[Author]
FROM  
    #SearchResults          
WHERE  
    #SearchResults.[Relevance] >= (@CurrentPage - 1) * @PageSize + 1 AND 
    #SearchResults.[Relevance] <= @CurrentPage*@PageSize
ORDER BY Relevance ASC

--Clean Up
DROP TABLE #SearchResults
DROP TABLE #GroupsToSearch 
```

我知道它有点啰嗦，但只要朝正确的方向轻推将不胜感激。

以防它有助于在搜索帖子时占用 80% 的查询时间，并且根据查询计划花费在帖子表上的“聚集索引扫描”上。我无论如何都看不到这个。

谢谢

加文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T14:31:44.353

我真的必须看到一个解释计划才能知道慢的部分在哪里，因为我在你的代码中没有看到任何特别讨厌的东西。第一件事 - 确保所有索引都处于良好状态，正在使用它们，统计数据是最新的，等等。

另一个想法是首先搜索线程标题，然后使用结果来修剪线程描述和发布文本的搜索。同样，使用线程描述搜索的结果来修剪帖子文本搜索。

这里的基本思想是，如果您在线程标题中找到关键字，为什么还要搜索描述和帖子？我意识到这可能不起作用，具体取决于您向用户呈现搜索结果的方式，并且可能不会产生很大的不同，但这是值得考虑的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-24T23:24:49.893

80k 条记录并不多。我建议不要将结果数据插入临时表，而只插入 ID，然后再加入该表。这将节省写入临时表的时间，因为您可以存储 10000 个整数，而不是 10000 个完整的帖子（您丢弃除了一页之外的所有帖子）。这也可以减少扫描帖子所花费的时间。

看起来您需要两个临时表，一个用于线程，一个用于帖子。您将在最终选择中合并它们。

# agile - ITIL 或 CMMI 对开发有何影响？

> ID：618990
> 
> 赞同：7
> 
> 时间：2009-03-06T14:13:27.923
> 
> 标签：agile, cmmi, itil

我读了很多关于软件开发中哪些实践行之有效的书籍。而且我从未在开发领域的任何网络广播、书籍或博客中听说过像 ITIL 或 CMMI 这样的方法。

我在学校听说过这些方法，对我来说，这似乎是官僚作风。

然而，我读过的每一本关于开发的书籍都在谈论协作，或者人们对文档的看法。（是的，很多敏捷书籍）

所以我的问题是：像 ITIL 或 CMMI 这样的方法对开发或开发人员的日常生活有影响吗？您是否有很棒的书籍或博客讨论了我可以在开发团队中使用的这些方法论中的一些好主意？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-19T20:30:09.390

ITIL 更关注基础设施和支持方面而不是开发，因此对 ITIL 的讨论可能更适合于据称正在开发中的 StackOverflow 的“IT”关注版本。顺便说一句，我不同意将其他站点称为“IT”，因为 IT 包含大多数企业的基础架构、支持和开发……可能很大比例的 StackOverflow 用户是 IT 部门的开发人员。

我曾使用过 CMMI 和 Team Software Process (TSP)，它们都是 Watts Humphrey 和 Carnegie Mellon Software Engineering Institute 的产品。如果您致力于持续改进并相信测量是任​​何持续改进的核心，那么您会发现 CMMI 的价值。

CMMI（和 TSP）很容易出错，或者以一种疏远开发人员的方式，最终成为装饰门面或在一堆认证上看起来不错的东西。看看印度的开发供应商......他们奇迹般地都是 CMMI 5 级。他们没有告诉你的是，几乎总是他们组织中的一个小项目或团队努力获得认证，但可重复的做法95% 的组织根本不存在。

专注于时间跟踪（打卡）、缺陷跟踪（错误配额）、代码行（如果你愿意的话，有很多“游戏”的方法），以及使你的过程可重复（让开发人员感觉像一个没有创新自由）关闭了许多开发人员。<--注意括号中厌倦的反驳。

事实仍然是，90% 的开发人员（其中很少有人阅读 StackOverflow 或任何技术博客/网站）都是一时兴起，并且非常缺乏对自己改进机会所在的自我意识。对他们来说，过程的严谨性和通过重复和测量促进的自我意识来逐步提高质量的机会是 CMMI 的重要组成部分。

如果做得好，你会从像 Scrum 这样的敏捷方法中获得同样的好处，其中重点再次放在可重复的迭代上，从每次迭代中学习，以及改进/缩小目标。带领团队采用敏捷方法或 CMMI 并从中获得全部价值需要大量的成熟度和经验。

敏捷是性感的，而 CMMI 与你所能得到的性感相去甚远，这就是为什么你很少听到它的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-18T12:58:34.703

敏捷采用往往是自下而上的：技术人员偶然发现它并将其推荐给管理层。

ITIL/CMMI 往往是自上而下的：管理层偶然发现它并将其推给技术人员。

这不会使一个好而另一个坏；主要影响用于描述每种方法的语言。也有很多例外——有一线经验的人擅长应用 CMMI，而经理则深谙敏捷。

谷歌搜索“敏捷 CMMI”，你会得到很多点击。我不想特别推荐一个，因为这是一场持续的辩论（即其中一些人完全是错误的）。

在我看来，在分析日常软件开发工作时，**过程的概念肯定是一个有用的想法。**有一些重复性活动，并且这些活动通常以相似的顺序组织的想法是提出导致改进的问题的一个很好的切入点。您还可以通过询问什么是**可重复**的以及在什么条件下可以将活动称为**管理**活动来获得一些信息。

当神奇的思维开始出现时，错误和过度行为就开始了：“如果我们只是（在纸上）描述完美过程并准确记录它，人们就会遵循它，我们将获得完美的软件。” 它不是那样工作的。

# silverlight - Silverlight 拉伸子元素以填充父容器？

> ID：618992
> 
> 赞同：3
> 
> 时间：2009-03-06T14:13:37.253
> 
> 标签：silverlight, layout, containers, parent, stretch

在 Silverlight 中，如何拉伸 Line 的宽度以填充作为子元素的 StackPanel 的宽度？更喜欢 XAML 解决方案，而不是代码隐藏。这是我在 WPF 中的操作方法：

```
<Line X1="0" 
      X2="{Binding Path=ActualWidth, ElementName=HolePatternStackPanel}" 
      Stroke="Gray" 
      StrokeThickness="1" /> 
```

但这在 Silverlight 中不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-25T22:33:57.173

```
<Line X1="0" Y1="0" X2="0" Y2="1" Stretch="Fill" Stroke="#FF000000" /> 
```

适用于 WPF 和 Silverlight。

如果 X 为 0，则它是一条垂直线。如果 Y 为 0，则它是水平的。使用 X1=0 Y1=0 X2=1 Y2=1 表示从左上角到右下角的对角线，或者将其反转为从左下角到右上角。

时髦新鲜。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-06T18:36:28.883

用户 sladapter 在 Silverlight.net 论坛上回答了以下问题：

当前 Silverlight 不支持元素绑定。

你必须使用 Line 对象吗？如果你只想画一条线，你可以使用 Rectangle (2 px height) ，然后你可以设置 Horizo​​ntalAlignment="Stretch" 让它自动拉伸。

它非常适合我的需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-07-16T16:10:32.907

在 Silverlight 4 中确实存在 ElementBinding。但仍然没有一种很好的方法来拉伸项目以填充其父容器。您真正想要的是适应可视树中的父容器，它考虑了模板的应用。

# c# - 如何从 [Serializable] INotifyPropertyChanged 实现者中排除不可序列化的观察者？

> ID：618994
> 
> 赞同：14
> 
> 时间：2009-03-06T14:16:05.610
> 
> 标签：c#, serialization, remoting, inotifypropertychanged

我有将近一百个看起来像这样的实体类：

```
[Serializable]
public class SampleEntity : INotifyPropertyChanged
{
    private string name;
    public string Name
    {
        get { return this.name; }
        set { this.name = value; FirePropertyChanged("Name"); }
    }

    [field:NonSerialized]
    public event PropertyChangedEventHandler PropertyChanged;

    private void FirePropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
            this.PropertyChanged(this,
                new PropertyChangedEventArgs(propertyName));
    }
} 
```

注意 上的`[field:NonSerialized]`属性`PropertyChanged`。这是必要的，因为某些观察者（在我的情况下 - 显示编辑实体的网格）可能无法序列化，并且实体必须是可序列化的，因为它是由运行在单独机器上的应用程序通过远程处理提供的.

此解决方案适用于琐碎的情况。然而，有些观察者可能是`[Serializable]`，并且需要被保留。我该如何处理？

我正在考虑的解决方案：

*   完全`ISerializable`- 自定义序列化需要编写大量代码，我不想这样做
*   使用`[OnSerializing]`和`[OnDeserializing]`属性`PropertyChanged`手动序列化-但那些辅助方法仅提供`SerializationContext`，AFAIK不存储序列化数据（`SerializationInfo`这样做）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-11T18:00:14.060

你是对的，第一个选择是更多的工作。虽然它可能会为您提供更有效的实施，但它会使您的实体复杂化很多。考虑一下，如果您有一个`Entity`实现的基类，那么`ISerializable`所有*子类也必须手动实现序列化*！

使第二个选项起作用的技巧是继续将事件标记为不可序列化，但要具有可序列化的第二个字段，*并且*您在适当的序列化挂钩期间填充自己。这是我刚刚写的一个示例，向您展示如何：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.IO;
using System.Runtime.Serialization;
using System.Runtime.Serialization.Formatters.Binary;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            var entity = new Entity();
            entity.PropertyChanged += new SerializableHandler().PropertyChanged;
            entity.PropertyChanged += new NonSerializableHandler().PropertyChanged;

            Console.WriteLine("Before serialization:");
            entity.Name = "Someone";

            using (var memoryStream = new MemoryStream())
            {
                var binaryFormatter = new BinaryFormatter();
                binaryFormatter.Serialize(memoryStream, entity);
                memoryStream.Position = 0;
                entity = binaryFormatter.Deserialize(memoryStream) as Entity;
            }

            Console.WriteLine();
            Console.WriteLine("After serialization:");
            entity.Name = "Kent";

            Console.WriteLine();
            Console.WriteLine("Done - press any key");
            Console.ReadKey();
        }

        [Serializable]
        private class SerializableHandler
        {
            public void PropertyChanged(object sender, PropertyChangedEventArgs e)
            {
                Console.WriteLine("  Serializable handler called");
            }
        }

        private class NonSerializableHandler
        {
            public void PropertyChanged(object sender, PropertyChangedEventArgs e)
            {
                Console.WriteLine("  Non-serializable handler called");
            }
        }
    }

    [Serializable]
    public class Entity : INotifyPropertyChanged
    {
        private string _name;
        private readonly List<Delegate> _serializableDelegates;

        public Entity()
        {
            _serializableDelegates = new List<Delegate>();
        }

        public string Name
        {
            get { return _name; }
            set
            {
                if (_name != value)
                {
                    _name = value;
                    OnPropertyChanged("Name");
                }
            }
        }

        [field:NonSerialized]
        public event PropertyChangedEventHandler PropertyChanged;

        protected virtual void OnPropertyChanged(PropertyChangedEventArgs e)
        {
            var handler = PropertyChanged;

            if (handler != null)
            {
                handler(this, e);
            }
        }

        protected void OnPropertyChanged(string propertyName)
        {
            OnPropertyChanged(new PropertyChangedEventArgs(propertyName));
        }

        [OnSerializing]
        public void OnSerializing(StreamingContext context)
        {
            _serializableDelegates.Clear();
            var handler = PropertyChanged;

            if (handler != null)
            {
                foreach (var invocation in handler.GetInvocationList())
                {
                    if (invocation.Target.GetType().IsSerializable)
                    {
                        _serializableDelegates.Add(invocation);
                    }
                }
            }
        }

        [OnDeserialized]
        public void OnDeserialized(StreamingContext context)
        {
            foreach (var invocation in _serializableDelegates)
            {
                PropertyChanged += (PropertyChangedEventHandler)invocation;
            }
        }
    }
} 
```

# mysql - 在实时生产服务器中诊断和分析 MySQL 的最佳方法是什么？

> ID：618997
> 
> 赞同：12
> 
> 时间：2009-03-06T14:16:38.710
> 
> 标签：mysql, statistics, profiling, monitoring

您推荐哪些工具/方法在实时生产服务器中诊断和分析 MySQL？

我的目标是测试扩展系统的替代方法，看看它们对读/写时间、内存、CPU 负载、磁盘访问等的影响，并找出瓶颈。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-06T14:25:03.823

首先，您应该设置某种监控，例如：

*   [MySQL 企业监视器](http://www.mysql.com/products/enterprise/monitor.html)
*   [摩尼奥](http://www.webyog.com)
*   [仙人掌](http://www.cacti.net/)（免费）
*   [穆宁](http://munin-monitoring.org/)（免费）
*   [MySQL 活动报告](http://gert.sos.be/en/)（免费）

其他可能有用的工具：[mytop](http://jeremy.zawodny.com/mysql/mytop/) [innotop](http://innotop.sourceforge.net/) [mtop](http://mtop.sourceforge.net/) [maatkit](http://www.maatkit.org/)

此外，您应该在 my.cnf 中启用记录[慢速查询](http://dev.mysql.com/doc/mysql/en/Slow_query_log.html)。

在您开始调整/更改参数之前，您应该创建某种测试计划并比较之前/之后的结果，以查看您的更改是否有意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-06T14:32:18.347

这是我已经做了很多工作的事情。

*   [MonYog](http://www.webyog.com/en/) - MySQL 监控服务。我们在生产中使用它。它不是免费的，但有很多功能，包括警报和历史数据。

*   [MySQL Enterprise Monitor](http://www.mysql.com/products/enterprise/monitor.html) - MySQL 企业可用（即，不便宜）

*   自己动手！

关于滚动您自己的选项：

我们实际上开发了一个非常酷的监控应用程序，它使用[RRD 工具](http://oss.oetiker.ch/rrdtool/)（由常见的 MRTG 使用）以及 MySQL 统计信息和系统统计信息的组合，例如 iostat。这不仅是一个很好的练习，而且给了我们很大的灵活性，可以通过一个界面准确地监控我们想要什么。

以下是构建您自己的统计数据的一些方法的[简要说明。](http://www.mysql.com/news-and-events/newsletter/2004-01/a0000000301.html)

尽管我们也使用 MonYog，但我们推出自己的产品的一大动机是跟踪磁盘统计信息。磁盘 i/o 可能是主要瓶颈，标准 MySQL 监控系统没有 i/o 监控。我们使用[iostat](http://en.wikipedia.org/wiki/Iostat)，它是[sysstat](http://pagesperso-orange.fr/sebastien.godard/)包的一部分。

我们有一个界面，可以在磁盘 i/o 统计数据旁边显示 MySQL 统计数据图表，使我们能够真正全面了解 MySQL 负载如何影响磁盘 i/o。

在此之前，我们真的不知道为什么我们的生产应用程序会陷入困境。我们发现磁盘 i/o 是一个主要问题，当我们运行复杂的查询时，MySQL 会在磁盘上创建大量临时表。我们能够优化查询并显着提高磁盘性能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-09-11T21:49:59.140

[Jet Profiler](http://www.jetprofiler.com/)肯定

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-01-19T17:58:40.457

[投票 http://tinyurl.com/vote-gif](http://tinyurl.com/vote-gif)添加到列表：

*   马特吉特
*   用于 mysql 的 dbForge 工作室
*   [射流剖面仪](http://www.jetprofiler.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-01-23T19:53:57.317

还添加到列表中：RHQ 4（开源）-- [http://rhq-project.org/](http://rhq-project.org/)

# c# - 通过 c# 应用程序打开 excel 文件

> ID：618999
> 
> 赞同：0
> 
> 时间：2009-03-06T14:17:00.800
> 
> 标签：c#, excel

我的应用程序使用 excel 文件从 web 读取数据（使用 excel web 查询并从 excel 文件读取数据）
我正在使用的 excel 文件称为 webGate。
我的问题是我不希望将 webGate 呈现给用户。
如果用户在我的应用程序正在读取 webGate 文件时打开 excel 文件（任何其他文件），则 webGate 文件将与用户文件一起呈现
（即用户打开 excel 文件并呈现两个文件，其中一个是 webGate）
关于我如何使用该文件，但它永远不会呈现给用户？
谢谢伊兰
_

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-09T04:23:22.030

您可以使用 .xls 作为 OLEDB 数据源。您使用 Microsoft.Jet.OLEDB.4.0 数据提供程序。

这意味着您正在从 Excel 工作表中读取数据，而不是在 Excel 应用程序中将 .xls 作为文档打开。

这不是自动化。它不会启动 Excel.exe。它不需要 Excel.exe。不需要第三方组件。没有额外费用（除了 Windows 的费用）。它适用于服务器端应用程序。

[完整的源代码在这里](http://cheeso.members.winisp.net/srcview.aspx?dir=MSOffice&file=adonet-excel.cs)。

片段：

```
void CreateExcelDocThroughAdoNet()
{
    const string Filename= "adonet-excel.xls";

    const string strConnect = 
      "Provider=Microsoft.Jet.OLEDB.4.0;" + 
      "Data Source=" + Filename + ";" + 
      "Extended Properties=\"Excel 8.0;HDR=yes;\""; 

    try
    {
      conn = new System.Data.OleDb.OleDbConnection(strConnect);
      CreateTable();
      for(int i=0; i < 4; i++) Insert(i);
    }
    catch (System.Exception ex)
    {
      System.Console.WriteLine("Exception: " + ex.Message+ "\n  " + ex.StackTrace); 
    }
}

private void CreateTable()
{

    string strSql = "CREATE TABLE SampleTable ( Ix NUMBER, CustName char(255), Stamp datetime )";

    System.Data.OleDb.OleDbCommand cmd= new System.Data.OleDb.OleDbCommand(strSql, conn);
    conn.Open();
    cmd.ExecuteNonQuery();
    conn.Close();
}

private void Insert(int ix)
{
    string strSql = "insert into [SampleTable] ([ix],[CustName],[Stamp]) value(@p1,@p2,@p3)";

    System.Data.OleDb.OleDbCommand cmd= new System.Data.OleDb.OleDbCommand(strSql, conn);

    cmd.Parameters.Add("@p1", System.Data.OleDb.OleDbType.Numeric).Value = ix;
    cmd.Parameters.Add("@p2", System.Data.OleDb.OleDbType.VarChar).Value = "Some text";
    cmd.Parameters.Add("@p3", System.Data.OleDb.OleDbType.Date).Value = System.DateTime.Now;

    conn.Open();
    cmd.ExecuteNonQuery();
    conn.Close();
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T14:25:21.233

你想达到什么目标？它还不清楚。关于如何使用该文件**但它永远不会呈现给用户的任何想法？**

如果要在 C# 代码中打开/修改文件：http: [//www.codeproject.com/KB/office/csharp_excel.aspx](http://www.codeproject.com/KB/office/csharp_excel.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-08T18:07:18.173

如果项目需要不到 30 天的时间，您可以使用[SpreadsheetGear for .NET](http://www.spreadsheetgear.com/)的免费评估将 Excel 工作簿嵌入到 .NET 应用程序中，而无需将其呈现给用户。只需按照以下步骤操作：

*   创建一个新的 C# Windows 窗体应用程序并在窗体上放置一个 WorkbookView 控件（如果您不确定如何执行此操作，请参阅适用于 Windows 窗体应用程序的 SpreadsheetGear 教程）。
*   右键单击 WorkbookView 并选择“Workbook Designer...”。
*   在 Workbook Designer 中，关闭默认工作簿并使用 File Open... 打开您的工作簿。这会将您的工作簿作为资源嵌入到应用程序中。
*   关闭工作簿设计器。
*   如果您不希望用户看到 WorkbookView，您可以隐藏它，或者您可以使用 WorkbookView.DisplayReference 属性来限制他们可以看到的工作簿的哪些部分。

[您可以在此处](https://www.spreadsheetgear.com/downloads/register.aspx)下载免费评估。

免责声明：我拥有 SpreadsheetGear LLC

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-06T15:41:00.880

为此，我使用[Infragistics 工具集，它运行良好（支持所有 excel 版本，并且功能非常丰富）](http://www.infragistics.com/dotnet/netadvantage/winforms/infragisticsexcel.aspx#Overview)

它可能不适合您的需求，因为它不是免费的，但如果您问我，它在很大程度上是值得的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-06T14:26:14.350

我不知道这会不会太麻烦，但是将 excel 文件导出为 xml 可能是值得的（如果可能的话，我不知道你的 excel 文件是什么样的）并阅读那样的数据。***********