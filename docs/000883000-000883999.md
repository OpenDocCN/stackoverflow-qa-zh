# StackOverflow 问答 000883000-000883999

# javascript - 节点资源管理器脚本？

> ID：883001
> 
> 赞同：2
> 
> 时间：2009-05-19T14:07:10.990
> 
> 标签：javascript, dom

我想在浏览器中显示一个带有可折叠子节点的 DOM 节点树。我正在寻找与 FireBug 的“html”选项卡几乎相同的功能，只是我希望它在浏览器窗口中，并且我希望能够选择任意节点作为根。在我自己写之前，我想我会检查以确保没有人可以将我指向一个已经写好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T23:48:58.970

我会查看 FireBug Lite，这是一个特殊版本的 FireBug，全部用 Javascript 实现，以便在 Internet Explorer 等劣质浏览器上使用： [http ://www.getfirebug.com/lite.html](http://www.getfirebug.com/lite.html)

这几乎正​​是您想要的（我认为），即使不是，它也应该足够接近，可以为您提供一些起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T18:32:35.887

结束写我自己的。它使用 jquery（我在下面将其称为 $jq）。

```
nodeExplorer = function(node, container){ // note: container must be a jquery object

    $jq(".nodeExplorerNode").live("click", function(){
        $jq(this).toggleClass("collapsed");
        return false;
    });

    if($jq("#nodeExplorerStyles").length == 0){

        $jq("body").append(
            "<style id='nodeExplorerStyles'>"+
                ".collapsed .nodeExplorerNode{"+
                    "display:none" +
                "}"+
                ".collapsed>.minus{"+
                    "display:none" +
                "}"+
                ".collapsed>.plus{"+
                    "display:inline" +
                "}"+
                ".plus{"+
                    "display:none" +
                "}"+
                ".nodeExplorerNode{"+
                    "cursor: pointer" +
                "}"+
            "</style>"
        )

    };

    var drawNodes = function(node, container){
        if(node.tagName){
            container = $jq("<div style='margin-left: 20px' class='collapsed nodeExplorerNode'><span class='minus'>- </span><span class='plus'>+ </span>"+ node.tagName +" </div>").appendTo(container);
        }else if(node.data){
            container.append("<b>" + node.data + "</b>");
        }
        for(var i=0; i< node.childNodes.length; i++){
            drawNodes(node.childNodes[i], container)    
        }
    }   

    drawNodes(node, container);

} 
```

# asp.net-mvc - 我在哪里可以找到 MVC 的简单解释？

> ID：883004
> 
> 赞同：20
> 
> 时间：2009-05-19T14:07:54.297
> 
> 标签：asp.net-mvc

在我的公司，我们即将使用 ASP.NET MVC 构建一个新站点。我的老板（营销人员）想了解更多有关该技术的信息，因此我试图找到一个非常好的、简单且具有教学意义的 MVC 概念演示，但没有任何运气。他们中的大多数需要相当多的编程基础知识。

有什么好的视频、幻灯片或其他建议吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-19T14:13:29.323

Craig Strong 有一篇关于 MVC 以及如何解释它对业务的好处的非常好的文章。在这里查看：[更新的链接](http://c6s.co.uk/?s=%22how%20to%20explain%20mvc%22&x=0&y=0)。

> # 通俗地定义 MVC
> 
> 请记住，您具有技术头脑并且接近代码。MVC 对您来说一清二楚，但对业务人员说“模型、视图、控制器”可能会给他们一种印象，即您患有某种形式的抽动秽语综合征。即使在您根据代码定义 MVC 之后，MVC 对业务也没有多大意义。让企业了解为什么这是答案，最重要的是它是什么，这可能比我的经验预期的任务更多。甚至一些开发人员有时也很难理解这一点。
> 
> 为了让听众了解 MVC 是什么以及它为什么起作用，我在通行证中尝试过的是将 MVC 应用到听众更多参与的不同行业。与财产甚至车辆相比，过去对我有用的一个例子。大多数人都与建筑商、木匠、水管工、电工打过交道，或者在电视上观看过大量的房地产节目。这个经验是一个很好的使用平台，可以解释为什么像 MVC 这样的分离是有效的。我知道您可能会认为这不会起作用，因为它与软件中的不同，但请记住，您并不是要训练企业成为开发人员或深入了解 MVC，只是向他们解释分离在生产中是必需的，这就是 MVC 结构所提供的。
> 
> 为了举例说明如何描述这一点，我已经非常简要地解释了分离在财产中的作用。请记住，这侧重于使用未开发的系统，这可能是一个完全不同的解释角度。
> 
> ## 看法
> 
> **MVC 中的视图是表示层。**这是产品的最终用户将看到并与之交互的内容。一个系统可以有所有不同类型的多个视图，从命令行输出到呈现的 HTML。在最清晰的设计中，视图不包含业务逻辑。界面适合目的，是交互的区域。因此，您可以简单地输出 HTML 供消费者交互，或输出 SOAP/XML 供企业交互。两者都使用系统背后的相同业务逻辑，也称为模型和控制器。
> 
> 在财产世界中，您可以将视图视为与居民交互的财产的内部或财产的外层。内部可以根据目的进行定制，同一物业可以有许多不同类型的租户。例如，特定设计的财产可能包含住宅。相同的内部空间可以很容易地用作办公空间，尽管在同一处房产有不同的用途。但是属性结构是一样的。因此，用户交互的环境不会干扰建筑物的结构。
> 
> ## 控制器
> 
> **控制器是魔法发生的地方，它定义了业务应用程序逻辑。**这可能是用户从视图发送响应的地方，然后此响应用于处理请求的内部工作并将响应处理回给用户。以用户请求购买书籍的典型响应为例。控制器具有用户 ID、付款详情、送货地址和商品选择。然后通过业务逻辑处理这些元素以完成购买。数据通过系统传递到模型层，最终在整个请求满足业务定义后，订单被构建，用户收到他们的商品。
> 
> 如果我们将其与房产进行比较，我们可以将在线订购一本书与打开电灯开关进行比较。租户将打开开关，就像订购一本书一样。开关本身是视图层中的一个元素，它将请求发送到控制器，就像单击网站上的结帐按钮一样。在这种情况下，业务逻辑是电工安装并嵌入到物业设计中的。轻弹开关，完成电路。电力通过包括保险丝盒在内的所有电线直接通向灯泡。就像用户收到一本书一样，在这种情况下租户收到光。租户看不到涉及电力布线的整个幕后过程。
> 
> ## 楷模
> 
> **MVC 中的模型是最底层的，处理系统的核心逻辑。**在大多数情况下，这可以被视为与数据源交互的层。在使用 MVC 的系统中，控制器将信息传递给模型以存储和检索数据。继上面的控制器定义示例之后，这是存储订单详细信息的位置。诸如库存水平、图书产品的物理位置等附加数据都存储在这里。如果这是订购的最后一本书，则对该项目的下一个请求可能会检查它是否可用，并在该项目不再可用时拒绝该订单。
> 
> 继续我们打开电灯开关的例子，我们结构中的这一层可能是电力供应。当租户轻触开关时，内部电路必须请求电力来为请求供电，这与用户从数据库请求数据时类似，如处理请求需要数据。如果住宅未连接到电源，则无法完成该过程。使用 MVC 的商业利益
> 
> 在您得到解释 MVC 是什么的信息后，您将不得不看看可以从中获得什么好处。我不打算在这里详细介绍，我相信您可以更准确地应用与您的实际情况直接相关的福利。为了列出基于 MVC 的系统的一些常见好处，这里有几个示例：
> 
> *   不同的技能水平可以在不同的系统水平上工作。例如，设计人员只需很少的开发知识就可以在界面（视图）上工作，而开发人员可以在业务逻辑（控制器）上工作，而对设计级别的关注很少。然后他们在完成时简单地整合在一起。
> *   由于上述分离项目可以更容易和更快地管理。设计人员可以在开发人员之前启动接口，反之亦然。这个开发过程可以是并行的，而不是顺序的，因此减少了开发时间。
> *   使用相同的业务逻辑很容易拥有多个视图类型。
> *   通过系统清除路线。您清楚地知道系统的不同级别在哪里。有了清晰的系统路径，逻辑就可以共享和改进。这增加了安全优势，因为您清楚地知道从数据到用户的允许路径，并且可以沿路径进行明确的安全检查。
> *   每一层都对自己负责。（与第 1 点相关）这意味着您可以拥有干净的文件结构，与可能有大量重复逻辑的紧密耦合系统相比，可以更轻松、更快速地维护和管理它。
> *   拥有清晰的结构意味着开发将更加透明，如果应用得当，这将减少开发时间、维护问题和发布周期。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-19T14:31:45.323

MVC 将其视为：“订单详细信息（包括客户和员工信息）”、“HTML/ASP 表单（显示订单详细信息）”和“订单详细信息服务类（具有*SaveOrderDetails*、*GetOrderDetails*等方法）。

**模型**（数据类，例如 OrderDetails）

1.  您要显示的数据

**控制器**（服务类）

1.  了解型号（订单详情）
2.  具有管理*模型的方法*
3.  因此可以进行单元测试它的单一职责是管理 OrderDetails CRUD 操作。
4.  它对视图一无所知

**视图**（ASP 页面）

1.  显示模型（OrderDetail 的 ViewData）。
2.  它必须了解*模型的*结构，才能在屏幕上正确地向用户显示数据。
3.  *视图的*结构（样式、布局、HTML 等、语言环境）可以随时更改，而不会更改应用程序功能中的任何内容。
4.  因此，许多*视图*可以以许多不同的方式显示同一个*模型*。
5.  在多租户 Web 应用程序中，客户特定*视图*可以存储在数据库表中并根据客户信息显示

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-19T14:15:38.837

你必须解释 ASP.NET MVC 的好处，而不是特性

1.  你可以控制你的网址——这意味着网站的 SEO 会更好——这意味着你的网站在谷歌中会更高

2.  代码更干净，这意味着更容易更改，这意味着您可以更快地添加功能

等等

如何省钱、赚钱、降低风险？这就是你的老板想知道的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T14:18:01.543

想象一个工厂的控制室，模型是机器本身，监控设备是视图，仪表板是控制器。您可以为同一台机器设置多个不同的控制室，并且一个控制室中控件的更改将反映在所有控制室的监视器上。

关键是您应该只建模一次，然后查看或控制，但最方便。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-19T14:39:49.927

**模型**是数据访问层，它可以只是对管理数据实体关系本身的 ORM 的一些简单查询的包装器。它处理与数据源的通信、检索数据并通常将其组织到应用程序中定义的对象中。

**视图**只是带有一些 html 和 css 的 html 文件，带有一些模板引擎（smarty、mako 等）代码，以按照您想要的方式显示传递给它的数据。

**控制器**将它们放在一起。对您的页面发出的请求将被路由到控制器（类）和控制器内的操作（​​方法）。就像任何其他应用程序一样，该操作将执行它的请求，但它仍然是控制器的一部分。

因此，控制器使用模型来查询数据（用户、内容等），然后将数据传递给视图以按照您想要的方式呈现和显示。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-19T14:14:42.673

我不会尝试向他解释技术，我会尝试解释 MVC 架构原则的全部内容。

MVC 旨在分离关注点。干净利落。向他解释，当你构建任何东西时，你正在构建的东西可以分为两个不同的类别：业务需求是什么（领域），以及其他一切。

MVC 通过引入层来分离关注点，从而将领域与其他一切分开。M 代表模型，这是您的域。V代表View，对他来说是可见的部分，他所看到的。C代表控制器，控制域和视图之间发生的事情的部分。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-19T14:27:35.550

营销人员只会对“V”部分，即视图感兴趣。根据您的设计方式，视图只是营销人员可以修改的基本 HTML/CSS“模板”。从技术上讲，没有破坏任何东西。

理想情况下，模型（数据库）和控制器（逻辑）不应该关心视图（表示）是 XML、HTML、文本等。营销人员不应该关心模型和控制器做什么，除了请求额外的功能。

更进一步的“理想”，从技术上讲，您应该能够用 PHP、Java、Ruby 等代替 ASP 作为控制器，而无需触及模型或视图。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-19T14:14:27.980

你可以很容易地做到这一点，那就是如果你理解标记说话。我不知道，但我想它会像这样......

这个应该用。MVC（如果操作正确）将允许您将 UI 与数据（模型）和 UI 控制（控制器）分离。这将使用户界面更加灵活，从而可以更快地更好地推销它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-19T14:14:39.413

这是一个非常简单的

[http://en.wikipedia.org/wiki/Model-view-controller#Pattern_description](http://en.wikipedia.org/wiki/Model-view-controller#Pattern_description)

我能想到的最好的方法是模型是数据表示，视图是向用户的表示，而控制器是收集改变模型的用户交互的东西。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-19T14:19:12.587

对于营销人员来说，解释 ASP.Net MVC 原因的最佳方式可能是扩大产品范围的能力。

通过使用 MVC，代码已经以一种方式分离，让您可以更轻松地构建在桌面上感觉自然的界面，然后是迎合一般移动设备用户的不同界面，以及仍然略有不同的界面这迎合了 iPhone 用户，而不会冒后端代码不同步和引入微妙和危害公司的错误的风险。而且，如果有一个可以成为产品的智能客户端桌面应用程序……它也可以基于相同的代码库。

模型是“盒子里的东西是如何运作的”。控制器是“您可以在盒子外面触摸的东西”，而视图是“开箱即用的东西”......

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-19T14:22:08.057

对您的营销人员来说，最重要的是资金、预算、TCO ......

当您不使用 MVC 时，您通常会将设计、应用程序逻辑等全部混合在一起。

那么程序员必须知道html设计，编程等......这可能意味着你需要强大的专业人士来完成这一切。

如果您使用 MVC，则所有内容都分为“单独的部分”。Html 编码器可以准备 html 层，程序员只处理应用程序逻辑等......

MVC 带来了更好的粒度，每个人都可以专注于他或她能做的最好的事情！

听着，例如 xhtml 有效性和 css 清洁度是如此之难，以至于有很多人只关注这一点，而同时考虑到很多浏览器和平台的兼容性。

通常一个人不是最好的 asp.net 程序员，xhtml 编码器合二为一；-)

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2015-06-05T07:51:58.657

在这种情况下，经理头衔中的重要词是“营销”。他是一名营销经理。作为营销经理，人们关心的问题与战略和战术有关。这两个不是一回事。战略是一个宏观的词，它包括公司如何在概念上满足客户需求以及公司如何从竞争中脱颖而出。策略通常不是软件可以向用户描绘的。另一方面，策略是公司赢得客户业务的直接方法或途径。战术往往比战略更频繁地改变，当营销经理问 MVC 能给他带来什么优势时，他很可能真的在问，”

营销管理是关于以美元和美分衡量的结果，而不是充斥着缺乏任何真正特异性的概念性词语的华丽和细致入微的解释。程序员可能说的每一句话对自己来说都可能有意义，但营销经理需要知道对不断变化的客户看法或快速实施以不同方式向同一客户销售的真正可能性。他需要知道它是否会比现有方法花费更多，因为如果他在产品上多卖 100 万美元，而在软件开发上花费 125 万美元，他可能会丢掉工作。

因此，简而言之，他正在寻求灵活性和成本效益。他需要能够快速适应不断变化的条件的软件，就像他首先以一种方式改变他的推销，然后再向难以说服的潜在客户改变他的推销方式一样，他需要知道他不必为巨额费用承担责任这种灵活性的价格标签。

坦率地说，我认为如果做出这样的承诺，您将无法兑现这些承诺，因为尽管从开发的角度来看 MVC 具有所有优势，但我们仍然在这里谈论软件，而且我们都知道, 软件是一个严格的、要求苛刻的监工，它需要自己的甜蜜时间来成熟到值得信赖的程度并摆脱它的错误。作为程序员，我们总是在寻找软件可重用性的圣杯，当我们不断尝试一件事然后另一件事（MVC、MVP、MVVM 以及任何其他人可能想到的）时，世界其他地方只是要求有用的东西。所以祝你好运。我希望你能赢得你的案子。

# sql - 如何从 Crystal Reports 调用存储过程？

> ID：883020
> 
> 赞同：4
> 
> 时间：2009-05-19T14:11:00.153
> 
> 标签：sql, stored-procedures, crystal-reports

我有一个存储过程，它接受一个用户 ID 并通过一个非常简单的查询计算他们的余额并返回它。我想将此添加到我的应用程序中的水晶报表中。唯一的问题是，Crystal Reports 要我为过程设置一个值，而为它设置一个值对我来说毫无用处。

我将所有内容按`User.ID`字段分组，并且我想`User.ID`用作查询的参数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T14:17:19.673

在您的主报表中，您可以添加一个子报表，该子报表将使用存储过程作为数据源并使用 userId 作为参数。

您的主报告将列出您感兴趣的所有用户 ID，并将它们分别传递给子报告

自从我上次使用水晶报告以来一直很安静，所以我不记得技术细节，只记得主要概念

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T14:23:42.813

几个选项

1\. 创建一个返回所有用户 ID 的新存储过程，然后为链接到用户 ID 主报告的每个用户创建一个子报告。

2\. 如果您可以选择，更改存储过程以接受用户名的值，例如“All”，并在 All 为值时让存储过程返回所有值。不是 100% 确定这是否可行，只是一个头脑风暴的想法。

# svn - 对硬质合金的颠覆

> ID：883022
> 
> 赞同：0
> 
> 时间：2009-05-19T14:11:10.700
> 
> 标签：svn, symbian, carbide

我正在使用碳化物进行 symbian 开发，有一个名为 subclipse 的插件，但问题是当我在软件更新下选择查找和安装选项时，IDE 会挂起是否有任何其他方法可以提前在碳化物 IDE Thnx 中添加插件，任何帮助都会受到赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-23T12:08:05.027

`subclipse`在 Carbide-2.0 上安装的过程很简单：

1.  [从subclipse 下载页面](http://subclipse.tigris.org/servlets/ProjectProcess;jsessionid=E9DC725D5582C7EE11562BF4F6BC67F7?pageID=p4wYuA)获取最新版本 subclipse 的“Eclipse 更新站点 URL” ；
2.  在 Carbide 中，转到帮助 > 软件更新 > 查找和安装；
3.  选择“搜索要安装的新功能”；
4.  点击“新建远程站点”按钮；
5.  添加步骤 1 中的 URL；
6.  检查软件包并安装。

我`subclipse`在 Carbide-2.0 上使用没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-23T22:58:45.410

如果您使用代理访问 Internet，则需要配置 Eclipse 代理设置以访问更新站点。

*   转到窗口>首选项...
*   在左上角的搜索框中键入“代理”以过滤首选项面板集。
*   点击网络连接
*   输入您的代理设置
*   再次尝试更新过程

# java - 正确 printstacktrace 的 servlet 异常

> ID：883030
> 
> 赞同：4
> 
> 时间：2009-05-19T14:13:24.080
> 
> 标签：java, exception, servlets, stack-trace

所以我使用过滤器来捕获 servlet 异常（因为我们使用的是 jsf/plain servlet 的混合）

当捕获 ServletException 并调用 printstacktrace 时，大部分信息都会丢失。

“真正的”根异常似乎隐藏在“有趣”的表达背后

```
((ServletException) e.getRootCause().getCause()).getRootCause().getCause().getCause().getCause() 
```

这显然不是这样做的方法。

是打印此类异常的“完整”信息的简单方法。有人可以解释一下为什么以这种方式包装异常吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T14:29:39.743

查看 commons-lang 中的[ExceptionUtils](http://commons.apache.org/lang/api-release/org/apache/commons/lang/exception/ExceptionUtils.html)类。它包含几个有用的方法来打印整个异常链。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T14:41:47.410

在我查看了 ExceptionUtils 之后，这解决了问题！

```
 final StringWriter stacktrace = new StringWriter();
    ExceptionUtils.printRootCauseStackTrace(throwable,new PrintWriter(stacktrace));
    msg.append(stacktrace.getBuffer()); 
```

这将打印出包含每条相关信息的完整堆栈跟踪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T14:20:32.210

这称为[异常链接](http://en.wikipedia.org/wiki/Exception_chaining)。通过将异常包装在不同的异常中，您可以让异常在堆栈中冒泡，而无需让您的主应用程序类担心一些低级异常。

例子：

```
public void doStuff() throws StuffException {
    try {
        doDatabaseStuff();
    } catch (DatabaseException de1) {
        throw new StuffException("Could not do stuff in the database.", de1);
    }
} 
```

这样，您的应用程序只需要处理，但如果它真的需要，`StuffException`它可以到达底层。`DatabaseException`

要了解您捕获的异常的最底层（和所有其他）异常，您可以迭代其根本原因：

```
 ...
} catch (SomeException se1) {
    Throwable t = se1;
    logger.log(Level.WARNING, "Top exception", se1);
    while (t.getCause() != null) {
        t = t.getCause();
        logger.log(Level.WARNING, "Nested exception", t);
    }
    // now t contains the root cause
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-24T18:32:45.890

ServletException 的异常链接很棘手。根据使用的 Web 服务器实现和 Web 开发框架，在运行时链可能使用原因和/或 rootCause。这个[链接](http://closingbraces.net/2007/11/27/servletexceptionrootcause/)很好地解释了它。使事情复杂化的是，我已经看到了原因指向异常本身的异常。这是我们使用的递归方法，它涵盖了 ServletExceptions 的所有基础：

```
public static Throwable getDeepCause(Throwable ex) {
    if (ex == null) {
        return ex;
    }
    Throwable cause;
    if (ex instanceof ServletException) {
        cause = ((ServletException) ex).getRootCause();
        if (cause == null) {
            cause = ex.getCause();
        }
    } else {
        cause = ex.getCause();
    }
    if (cause != null && cause != ex) {
        return getDeepCause(cause);
    } else {
        // stop condition - reached the end of the exception chain
        return ex;
    }
} 
```

# javascript - Javascript 中的备忘录

> ID：883033
> 
> 赞同：5
> 
> 时间：2009-05-19T14:13:52.723
> 
> 标签：javascript, undo-redo, memento

我正在寻找用于 CRUD 表单的备忘录模式 (GoF) 的 JavaScript 实现。在其基本级别中，撤消对输入的更改就足够了，但是将它与 YUI 或 Ext 等标准 JS 框架一起使用来撤消和重做网格操作（新行、删除行等）会很棒。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-29T21:39:38.883

由于我没有看到任何代码示例，因此这里是 EXT 表单的 undo 的快速 'n Dirty 实现：

```
var FormChangeHistory = function(){
    this.commands = [];
    this.index=-1;
}

FormChangeHistory.prototype.add = function(field, newValue, oldValue){
    //remove after current 
    if (this.index > -1 ) {
        this.commands = this.commands.slice(0,this.index+1)
    } else {
        this.commands = []
    }
    //add the new command
    this.commands.push({
        field:field,
        before:oldValue,
        after:newValue
    })
    ++this.index
}

FormChangeHistory.prototype.undo = function(){
    if (this.index == -1) return;
    var c = this.commands[this.index];
    c.field.setValue(c.before);
    --this.index
}

FormChangeHistory.prototype.redo = function(){
    if (this.index +1 == this.commands.length) return;
    ++this.index
    var c = this.commands[this.index];
    c.field.setValue(c.after);
}

Ext.onReady(function(){
    new Ext.Viewport({
        layout:"fit",
        items:[{    
            xtype:"form",
            id:"test_form",
            frame:true,
            changeHistory:new FormChangeHistory("test_form"),
            defaults:{
                listeners:{
                    change:function( field, newValue, oldValue){
                        var form = Ext.getCmp("test_form")
                        form.changeHistory.add(field, newValue, oldValue)
                    }   
                }
            },
            items:[{
                fieldLabel:"type some stuff",
                xtype:"textfield"
            },{
                fieldLabel:"then click in here",
                xtype:"textfield"
            }],
            buttons:[{
                text:"Undo",
                handler:function(){
                    var form = Ext.getCmp("test_form")
                    form.changeHistory.undo();
                }
            },{
                text:"Redo",
                handler:function(){
                    var form = Ext.getCmp("test_form")
                    form.changeHistory.redo();
                }
            }]
        }]
    })
}); 
```

为可编辑网格实现这个有点棘手，但您应该能够创建一个执行相同操作的 GridChangeHistory，然后从 EditorGrid 的 AfterEdit 侦听器调用 add() 函数。

“之前”和“之后”属性可以是回调函数，允许您撤消/重做任何类型的命令，但调用 add() 时需要更多工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T14:30:25.687

由于您正在尝试撤消/重做命令，我建议改用[命令模式](http://en.wikipedia.org/wiki/Command_pattern)。 [这是教程的链接](http://www.codeproject.com/KB/architecture/sharped.aspx)；它在 C# 中，但对于 OO 程序员来说应该足够简单。

# cruisecontrol.net - CruiseControl.Net 使用预编译器“检测到重复节点”

> ID：883037
> 
> 赞同：0
> 
> 时间：2009-05-19T14:14:27.247
> 
> 标签：cruisecontrol.net

我正在使用 CruiseControl.Net 并尝试采用文章[http://www.zorched.net/2009/01/30/dry-your-cruisecontrolnet-configuration/](http://www.zorched.net/2009/01/30/dry-your-cruisecontrolnet-configuration/)中所示的干式方法我有一个简单的 ccnet.config和一个简单的项目文件 Test-project.xml。配置评估工具告诉我“检测到重复节点”。任何线索/提示都会很棒。

ccnet.config

 `````
<cruisecontrol  xmlns:cb="urn:ccnet.config.builder">
  <!-- Standard Inits -->
  <cb:define name="StandardInit-block">
    <webURL>http://localhost/ccnet-dashboard/?_action_ViewProjectReport=true&amp;server=local&amp;project=Introvert</webURL>
    <artifactDirectory>D:\CC\$(ProjName)\artifact\</artifactDirectory>
    <modificationDelaySeconds>120</modificationDelaySeconds>
  </cb:define>

  <!-- Trigger run weekly -->
  <!-- Vars $(TriggerTime), $(ProjName) -->
  <cb:define name="WeeklyBuild-block">
    <triggers>
      <scheduleTrigger time="$(TriggerTime)" buildCondition="ForceBuild" name="Nightly build at $(TriggerTime) for $(ProjName)">
        <weekDays>
          <weekDay>Monday</weekDay>
          <weekDay>Tuesday</weekDay>
          <weekDay>Wednesday</weekDay>
          <weekDay>Thursday</weekDay>
          <weekDay>Friday</weekDay>
        </weekDays>
      </scheduleTrigger>
    </triggers>
  </cb:define>

  <cb:include href="Test-project.xml" xmlns:cb="urn:ccnet.config.builder"/>
</cruisecontrol> 
````  `测试项目.xml

 `````
<project name="Test" xmlns:cb="urn:ccnet.config.builder">

    <cb:scope
      TriggerTime="2:30"
      ProjName="Test"
      ProjStarPath="" >

      <!-- Standard block -->
      <cb:StandardInit-block/>

      <!-- Trigger block -->
      <cb:WeeklyBuild-block/>

      <tasks></tasks>
      <publishers></publishers>

    </cb:scope>
  </project> 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T13:08:24.347

本周我也遇到了这个问题，因为我也决定将这种 DRY 方法用于 CruiseControl。

启动 criusecontrol 服务（然后它很快失败）后，我查看了日志文件（C:\CruiseControl.NET\server\ccnet.log 对我来说......），我看到了类似的内容：

ThoughtWorks.CruiseControl.Core.Config.ConfigurationException：检测到重复节点：...（导致问题的其余节点）

这至少让我知道它有什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T14:27:45.253

不确定在此处发布您的 xml 文件是否是疏忽，但您`</project>`在 Test-project.xml 中没有结尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T14:30:48.493

ccnet.config：

```
<cruisecontrol xmlns:cb="urn:ccnet.config.builder"> 

    <!-- Standard Inits --> 
    <cb:define name="StandardInit-block">

        <!--<webURL>http://localhost/ccnet-dashboard/?_action_ViewProjectReport=true&server=local&project=Introvert</webURL>-->
        <artifactDirectory>D:\CC\$(ProjName)\artifact\</artifactDirectory> 
        <modificationDelaySeconds>120</modificationDelaySeconds> 

    </cb:define>

    <!-- Trigger run weekly --> 

    <!-- Vars $(TriggerTime), $(ProjName) --> 
    <cb:define name="WeeklyBuild-block"> 

        <triggers> 
            <scheduleTrigger time="$(TriggerTime)" buildCondition="ForceBuild" name="Nightly build at $(TriggerTime) for $(ProjName)"> 
                <weekDays> 
                    <weekDay>Monday</weekDay> 
                    <weekDay>Tuesday</weekDay> 
                    <weekDay>Wednesday</weekDay> 
                    <weekDay>Thursday</weekDay> 
                    <weekDay>Friday</weekDay> 
                </weekDays>
            </scheduleTrigger> 
        </triggers> 

    </cb:define>

    <cb:include href="Test-project.xml" /> 

</cruisecontrol> 
```

测试项目.xml：

```
<project name="Test" xmlns:cb="urn:ccnet.config.builder">

    <cb:scope
        TriggerTime="2:30"
        ProjName="Test"
        ProjStarPath="" >

    <!-- Standard block -->
    <cb:StandardInit-block/>

    <!-- Trigger block -->
    <cb:WeeklyBuild-block/>

    <tasks/>
    <publishers/>

    </cb:scope>
</project> 
```

刚刚通过我的盒子上的 Cruisecontrol 运行了这么多，我得到的唯一问题是 ccnet.config 文件中的 URL。删除它，我粘贴在此文本上方的代码可以正常工作。

# asp.net - 当我单击表单上的按钮时...我的代码永远不会到达它的 onclick 事件

> ID：883046
> 
> 赞同：1
> 
> 时间：2009-05-19T14:15:26.603
> 
> 标签：asp.net, vb.net, event-handling, drop-down-menu, selectedindexchanged

我在表单上有一个下拉列表和一个带有按钮的文本框。单击按钮时，即使在代码中它也不会转到我的 onclick，但会转到我的下拉列表的 selectedIndexchanged 事件。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T14:28:36.720

我不是 VB.net 的人，但尝试将您的 asp:button 更改为：

```
 <asp:Button id="btnlookup" Height="24px" Text="LookUp" Width="60px" 
 OnClick="btnlookup_Click" runat="server"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T14:31:30.580

除了检查回发之外，您的 Page_Load 是否需要更改所选索引或 DropDownList 中的项目？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T14:18:25.600

确保事件处理程序正在处理正确的控件，或者按钮标记在其 onclick 元素上引用了正确的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T14:33:21.123

如果您的下拉列表未设置为自动回发，并且您在单击按钮（并触发回发）之前更改了其值，则应该触发下拉列表的 onchange 事件。

...并不是说这解释了为什么单击处理程序*没有*触发。

# algorithm - 超越贪心算法的有效方法是什么

> ID：883049
> 
> 赞同：2
> 
> 时间：2009-05-19T14:15:58.350
> 
> 标签：algorithm, non-greedy

这个问题的领域是在受限硬件上调度操作。结果的分辨率是时间表适合的时钟周期数。搜索空间增长非常迅速，早期的决策限制了未来的决策，并且可能的调度总数快速且呈指数增长。许多可能的调度是等价的，因为仅仅交换两条指令的顺序通常会导致相同的时序约束。

基本上，问题是在不花费太多时间的情况下探索广阔的搜索空间的好策略是什么。我希望只搜索一小部分，但希望在这样做的同时探索搜索空间的不同部分。

当前的贪心算法有时会在早期做出愚蠢的决定，并且分支定界的尝试速度非常慢。

编辑：想要指出结果是非常二元的，可能贪心算法最终使用 8 个周期，而存在使用分支定界仅使用 7 个周期的解决方案。

第二点是指令之间的数据路由和指令之间的依赖关系有很大的限制，这限制了解决方案之间的通用性。将其视为具有大量排序约束的背包问题以及由于路由拥塞而完全失败的一些解决方案。

澄清：在每个循环中，每种类型的操作数量都有限制，并且某些操作有两种可能的类型。有一组路由约束可以变化为相当严格或相当宽容，并且限制取决于路由拥塞。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T14:44:39.977

**NP-hard问题的整数线性优化**

根据您的侧面约束，您可能能够使用[关键路径方法](http://en.wikipedia.org/wiki/Critical_path_method)或（如上一个答案中所建议的）[动态编程](http://en.wikipedia.org/wiki/Dynamic_programming)。但是许多调度问题是 NP 难题，就像经典的旅行推销员一样——精确的解决方案具有指数搜索时间的最坏情况，正如您在问题中所描述的那样。

重要的是要知道，虽然 NP-hard 问题仍然有一个非常糟糕的**最坏情况**解决时间，但有一种方法通常可以通过非常短的计算产生准确的答案（**平均情况**是可以接受的，你通常看不到最坏的情况） .

这种方法是将您的问题转换为具有整数变量的线性优化问题。有免费软件包（例如 lp-solve）可以有效地解决这些问题。

这种方法的优点是它可以在可接受的时间内为您提供 NP-hard 问题的准确答案。我在一些项目中使用了这种方法。

由于您的问题陈述不包含有关侧面约束的更多详细信息，因此我无法详细说明如何应用该方法。

**编辑/添加：示例实现**

以下是有关如何在您的情况下实施此方法的一些详细信息（当然，我做了一些可能不适用于您的实际问题的假设——我只知道您问题的详细信息）：

假设您有 50 条指令 cmd(i) (i=1..50) 被安排在 10 个或更少的周期 cycle(t) (t=1..10) 内。我们引入了 500 个二进制变量 v(i,t) (i=1..50; t=1..10)，它们表示指令 cmd(i) 是否在周期 (t) 执行。这个基本设置给出了以下线性约束：

```
v_it integer variables
0<=v_it; v_it<=1;       # 1000 constraints: i=1..50; t=1..10
sum(v_it: t=1..10)==1   # 50 constraints:   i=1..50 
```

现在，我们必须指定您的附加条件。假设操作 cmd(1)...cmd(5) 是乘法运算，并且您恰好有两个乘法器 --- 在任何循环中，您最多可以并行执行其中两个操作：

```
sum(v_it: i=1..5)<=2    # 10 constraints: t=1..10 
```

对于每个资源，您需要添加相应的约束。

另外，假设操作 cmd(7) 依赖于操作 cmd(2) 并且需要在它之后执行。为了使方程更有趣，我们还需要它们之间的两个周期间隙：

```
sum(t*v(2,t): t=1..10) + 3 <= sum(t*v(7,t): t=1..10)   # one constraint 
```

注意： sum(t*v(2,t): t=1..10) 是循环 t，其中 v(2,t) 等于 1。

最后，我们希望最小化周期数。这有点棘手，因为您按照我建议的方式获得了相当大的数字：我们为每个 v(i,t) 分配一个随时间呈指数增长的价格：将操作推迟到未来比尽早执行要昂贵得多：

sum(6^t * v(i,t): i=1..50; t=1..10) --> 最小值。# 一个目标函数

我选择 6 大于 5 以确保向系统添加一个周期比将所有内容压缩成更少的周期更昂贵。一个副作用是程序会尽可能早地安排操作。您可以通过执行两步优化来避免这种情况：首先，使用这个目标函数来找到最少的必要循环数。然后，用不同的目标函数再次问同样的问题 --- 一开始就限制可用周期的数量，并为以后的操作施加更温和的价格惩罚。你必须玩这个，我希望你明白了。

希望您可以将所有要求表达为二进制变量中的线性约束。当然，可能有很多机会可以利用您对特定问题的洞察力来减少约束或减少变量。

然后，将您的问题交给 lp-solve 或 cplex，让他们找到最佳解决方案！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T14:25:47.863

乍一看，听起来这个问题可能适合[动态规划解决方案](http://en.wikipedia.org/wiki/Dynamic_programming)。多个操作可能会花费相同的时间，因此您最终可能会遇到重叠的子问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T14:37:00.087

如果您可以将您的问题映射到“旅行推销员”（例如：找到在最短时间内运行所有操作的最佳序列），那么您就有一个 NP 完全问题。

解决这个问题的一个非常快速的方法是[蚂蚁算法](http://en.wikipedia.org/wiki/Ant_colony_optimization)（或蚁群优化）。

这个想法是你在每条路径上都派一只蚂蚁。蚂蚁在路径上散布有气味的物质，随着时间的推移会蒸发。较短的部分意味着当下一只蚂蚁出现时，这条路会更臭。蚂蚁更喜欢臭而不是干净的路径。通过网络运行成千上万的蚂蚁。最臭的路径是最佳路径（或至少非常接近）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T14:19:41.603

尝试模拟退火，cfr。[http://en.wikipedia.org/wiki/Simulated_annealing](http://en.wikipedia.org/wiki/Simulated_annealing)。

# ant - 使用 J2ME-Polish 设置 Midlet 图标

> ID：883050
> 
> 赞同：0
> 
> 时间：2009-05-19T14:16:34.153
> 
> 标签：ant, java-me, midlet, j2mepolish, jad

我正在使用 J2ME Polish 版本 2.0.7 和 ant 来构建我的 Midlet 应用程序。为了指定应用程序的主类、名称和图标，J2ME 波兰[文档](http://www.j2mepolish.org/cms/leftsection/documentation/building/build.xml/build-section.html#midlet)建议我在`midlet`元素内部使用`build`元素。

```
<build usePolishGui="false" >
    <midlet name="My Killer App." icon="/logo.png" class="com.foo.MidletMain" /> 
...
</build> 
```

但是，在生成的 .jad 文件中，当我构建 Midlet 时，只考虑类名。

```
MIDlet-1: MidletMain,,com.foo.MidletMain 
```

有人能弄清楚我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-11-21T11:57:07.713

不，它必须在 j2mepolish 目标的信息部分中：

```
<project ...>
<target name="j2mepolish"  ...>
        <j2mepolish>
            <info ... icon="xxx.png"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-12-05T20:28:08.667

你需要做的是：

```
<j2mepolish>
.....
<build>  
  ...
   <jad>
         <attribute name="MIDlet-Icon" value="/icon.png" />
   <jad>
</build> 
```

你的图标会工作！

# nhibernate - 如何使用 HQL 加入非 PK/FK 列？

> ID：883052
> 
> 赞同：1
> 
> 时间：2009-05-19T14:16:57.397
> 
> 标签：nhibernate, hql

使用 HQL，您如何加入非 PK/FK 的列（或对象属性）？

我正在阅读文档，它似乎隐含地要加入 PK 列，对吗？

[https://www.hibernate.org/hib_docs/nhibernate/html/queryhql.html](https://www.hibernate.org/hib_docs/nhibernate/html/queryhql.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T14:26:55.457

HQL 在外键上“隐式”连接。如果您没有（映射）关系，只需制作笛卡尔积并加入 where 子句。

```
select order.id
from Order as o, Product as p
where o.productKey = p.Key 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-03-06T13:19:30.643

从 Order as o 中选择 order.id，Product as p 其中 o.productKey = p.Key

那将是一个内连接，有没有办法可以使用隐式连接来做一个左外连接。

# ssl - 用于多个网站的单个服务器上的 SSL

> ID：883058
> 
> 赞同：2
> 
> 时间：2009-05-19T14:17:24.977
> 
> 标签：ssl, iis-6

这是我的场景：

IIS 6.0 上的默认网站已经受到 SSL 证书的保护，其通用名称包括以下内容：

域名.com www.domainname.com

我在同一个 IIS 服务器上有一个新网站，需要使用具有以下通用名称的 SSL 证书来保护它：

subdomainname.domainname.com（与默认域名相同）

我没有向服务器添加新 IP 地址的自由。无论出于何种原因，这都不是对基础设施友好的请求。

我们的 Exchange 网络邮件也受到另一台服务器上的另一个证书的保护：

webmail.domainname.com

我不相信我可以使用通配符证书，因为交换位于不同的服务器上，对吗？

无论我是否可以使用通配符服务器，如何使用新证书保护主 IIS 服务器上的新子域？我是否将默认证书替换为代表子域网站的新公用名和默认网站公用名。我可以在 IIS 6.0 上为多个网站分配需要保护的所有常用名称的同一服务器上的相同证书吗？

感谢您为解决此问题提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T14:49:30.653

您是对的，您的服务器需要多个签名证书。Godaddy 仅为单服务器 AFAICT 提供证书。 [DigiCert](http://www.digicert.com/wildcard-ssl-certificates.htm)提供多域、多服务器证书。我从来没有使用过它们，所以我不能保证它们提供的任何东西，但它表明你想要的东西在市场上是可用的*。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T18:53:07.777

只要 DNS 条目映射到正确的服务器，您就可以获得一个证书并在多个服务器上使用它。

Go Daddy 提供了几种证书类型，但他们并没有明确说明如何处理这个问题。

标准 (Turbo) SSL 1 个域 ~$30
标准多域 (UCC) SSL 最多 5 个域 ~$90
标准 (Turbo) 通配符 SSL ~$200

获取 5 域证书

domainname.com
www.domainname.com
subdomainname.domainname.com
webmail.domainname.com

都列在一张证书上。在您开始请求的服务器上完成请求，然后使用 Windows 服务器中内置的工具将证书从一台服务器复制到另一台服务器。这样做不会将其从第一台服务器中删除并将其添加到第二台服务器。

我不久前做过这个。我的 Web 服务器是 2008，邮件服务器是 2003。在这种组合中，我必须导出为 .pfx 文件，然后导入 .pfx。如果您从 2003 年到 2003 年执行此操作，则可以使用从另一个服务器选项复制并保存手动移动导出的文件。

在我的情况下，证书提到“证书主题替代名称”

非关键
DNS 名称：www.adomain.com
DNS 名称：adomain.com
DNS 名称：www.adomain.com
DNS 名称：mail.adomain.com

看起来其中一条线是重复的，但它有效。我不知道为什么证书使用“不重要”的术语来领导该部分。

IIS 不会让您将两个站点放在同一个 IP/端口组合上，但它会让您将相同的 SSL 放在两个不同的站点上。如果您无法选择使用不同的 IP 地址，则辅助站点必须使用 443 以外的其他内容。

# java - 如何确定日期是否在 Java 中的两个日期之间？

> ID：883060
> 
> 赞同：107
> 
> 时间：2009-05-19T14:17:51.000
> 
> 标签：java, date

在所有三个日期都由 的实例表示的情况下，如何检查一个日期是否在另外两个日期之间`java.util.Date`？

* * *

## 回答 #1

> 赞同：279
> 
> 时间：2009-05-19T14:22:19.773

这可能更具可读性：

```
Date min, max;   // assume these are set to something
Date d;          // the date in question

return d.after(min) && d.before(max); 
```

* * *

## 回答 #2

> 赞同：141
> 
> 时间：2009-05-19T19:28:31.603

如果您不知道最小值/最大值的顺序

```
Date a, b;   // assume these are set to something
Date d;      // the date in question

return a.compareTo(d) * d.compareTo(b) > 0; 
```

如果您希望范围具有包容性

```
return a.compareTo(d) * d.compareTo(b) >= 0; 
```

您可以将`null`其视为不受约束

```
if (a == null) {
    return b == null || d.compareTo(b) < 0;
} else if (b == null) {
    return a.compareTo(d) < 0;
} else {
    return a.compareTo(d) * d.compareTo(b) > 0;
} 
```

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2009-05-19T14:19:53.257

像这样：

```
Date min, max;   // assume these are set to something
Date d;          // the date in question

return d.compareTo(min) >= 0 && d.compareTo(max) <= 0; 
```

您可以使用`>`而不是`>=`和`<`而不是`<=`从“之间”的意义上排除端点。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-02-09T07:27:43.010

日期之间包括端点可以写为

```
public static boolean isDateInBetweenIncludingEndPoints(final Date min, final Date max, final Date date){
    return !(date.before(min) || date.after(max));
} 
```

注意：正如@Ponmudi 在评论中指出的那样，如果日期在毫秒级别不同，则此解决方案可能不起作用。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2014-01-31T07:27:55.110

以下是使用[Joda-Time](http://www.joda.org/joda-time/) 2.3 库的几种方法。

一种方法是在[DateTime](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html)实例上使用简单的`isBefore`和`isAfter`方法。顺便说一句，Joda-Time 中的 DateTime 在概念上类似于 java.util.Date（宇宙时间线上的一个时刻），但包含一个时区。

另一种方法是在 Joda-Time 中建立一个区间。该`contains`方法测试给定的 DateTime 是否出现在 Interval 覆盖的时间范围内。Interval 的开始是包含的，但端点是独占的。这种方法被称为“半开放”，象征性地`[)`。

请参阅以下代码示例中的两种方式。

将 java.util.Date 实例转换为 Joda-Time[`DateTime`](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html)实例。只需将 Date 实例传递给 DateTime 的构造函数。在实践中，您还应该传递特定[`DateTimeZone`](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTimeZone.html)对象而不是依赖 JVM 的默认时区。

```
DateTime dateTime1 = new DateTime( new java.util.Date() ).minusWeeks( 1 );
DateTime dateTime2 = new DateTime( new java.util.Date() );
DateTime dateTime3 = new DateTime( new java.util.Date() ).plusWeeks( 1 ); 
```

通过测试之前/之后进行比较……</p>

```
boolean is1After2 = dateTime1.isAfter( dateTime2 );
boolean is2Before3 = dateTime2.isBefore( dateTime3 );

boolean is2Between1And3 = ( ( dateTime2.isAfter( dateTime1 ) ) && ( dateTime2.isBefore( dateTime3 ) ) ); 
```

使用 Interval 方法而不是 isAfter/isBefore...</p>

```
Interval interval = new Interval( dateTime1, dateTime3 );
boolean intervalContainsDateTime2 = interval.contains( dateTime2 ); 
```

转储到控制台...</p>

```
System.out.println( "DateTimes: " + dateTime1 + " " + dateTime1 + " " + dateTime1 );
System.out.println( "is1After2 " + is1After2 );
System.out.println( "is2Before3 " + is2Before3 );
System.out.println( "is2Between1And3 " + is2Between1And3 );
System.out.println( "intervalContainsDateTime2 " + intervalContainsDateTime2 ); 
```

运行时……</p>

```
DateTimes: 2014-01-22T20:26:14.955-08:00 2014-01-22T20:26:14.955-08:00 2014-01-22T20:26:14.955-08:00
is1After2 false
is2Before3 true
is2Between1And3 true
intervalContainsDateTime2 true 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2009-05-19T14:37:34.673

另外一个选项

```
min.getTime() <= d.getTime() && d.getTime() <= max.getTime() 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-01-29T11:15:07.267

干得好：

```
public static void main(String[] args) throws ParseException {

        SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy");

        String oeStartDateStr = "04/01/";
        String oeEndDateStr = "11/14/";

        Calendar cal = Calendar.getInstance();
        Integer year = cal.get(Calendar.YEAR);

        oeStartDateStr = oeStartDateStr.concat(year.toString());
        oeEndDateStr = oeEndDateStr.concat(year.toString());

        Date startDate = sdf.parse(oeStartDateStr);
        Date endDate = sdf.parse(oeEndDateStr);
        Date d = new Date();
        String currDt = sdf.format(d);

        if((d.after(startDate) && (d.before(endDate))) || (currDt.equals(sdf.format(startDate)) ||currDt.equals(sdf.format(endDate)))){
            System.out.println("Date is between 1st april to 14th nov...");
        }
        else{
            System.out.println("Date is not between 1st april to 14th nov...");
        }
    } 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-19T14:33:31.997

您可以使用`getTime()`和比较返回的长 UTC 值。

如果您确定不必处理 1970 年之前的日期，请编辑，不确定在这种情况下它会如何表现。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-05-19T14:38:10.817

你可能想看看[Joda Time](http://joda-time.sourceforge.net/)，它是一个非常好的处理日期/时间的 API。即使您真的不需要它来解决当前问题，它也一定会在未来为您节省痛苦。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2010-08-13T01:40:06.317

```
import java.util.Date;

public class IsDateBetween {

public static void main (String[] args) {

          IsDateBetween idb=new IsDateBetween("12/05/2010"); // passing your Date
 }
 public IsDateBetween(String dd) {

       long  from=Date.parse("01/01/2000");  // From some date

       long to=Date.parse("12/12/2010");     // To Some Date

       long check=Date.parse(dd);

       int x=0;

      if((check-from)>0 && (to-check)>0)
      {
             x=1;
      }

 System.out.println ("From Date is greater Than  ToDate : "+x);
}   

} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-04-14T07:46:46.493

以下是如何确定今天是否在 2 个月之间：

```
private boolean isTodayBetween(int from, int to) {
    if (from < 0 || to < 0 || from > Calendar.DECEMBER || to > Calendar.DECEMBER) {
        throw new IllegalArgumentException("Invalid month provided: from = " + from + " to = " + to);
    }
    Date now = new Date();
    GregorianCalendar cal = new GregorianCalendar();
    cal.setTime(now);
    int thisMonth = cal.get(Calendar.MONTH);
    if (from > to) {
        to = to + Calendar.DECEMBER;
        thisMonth = thisMonth + Calendar.DECEMBER;
    }
    if (thisMonth >= from && thisMonth <= to) {
        return true;
    }
    return false;
} 
```

并称之为：

```
isTodayBetween(Calendar.OCTOBER, Calendar.MARCH) 
```

# biztalk - BizTalk 文件接收慢

> ID：883074
> 
> 赞同：2
> 
> 时间：2009-05-19T14:19:42.603
> 
> 标签：biztalk

我有一个带有文件接收位置的应用程序。主机实例运行几个小时后，接收位置无法识别放入它正在监视的文件夹中的新文件。它并没有完全忘记它们，只是性能变得爬行。接收位置配置为每 60 秒轮询一次目标文件夹，但在主机实例运行一个小时左右后，似乎目标文件夹仅每 30 分钟轮询一次。如果我重新启动主机实例，则会立即收集目标文件夹中等待的文件，并且在接下来的一个小时左右性能很好。

相同的应用程序在不同的环境中运行良好。现在，事件日志中有与该问题相关的明显条目。除了备份 BizTalk Server (BizTalkMgmtDb) 之外，所有 BizTalk SQL 作业都运行良好。

任何建议都非常感激。

谢谢

抢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T18:12:32.543

这里有一些额外的工具可以帮助您识别和诊断 BizTalk 数据库问题。

[BizTalk 消息框查看器](http://blogs.technet.com/jpierauc/pages/msgboxviewer.aspx)

这是修复已识别错误的工具：

[终结者](http://blogs.msdn.com/biztalkcpr/pages/using-biztalk-terminator-to-resolve-issues-identified-by-biztalk-msgboxviewer.aspx)

使用风险自负...阅读日志和文档。从消息框查看器开始，让我们知道我们的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T18:40:16.107

如果没有更多细节，最大的问题是您的备份作业失败了。如果备份作业失败，则可能未正确配置。如果配置正确但仍然失败，那么您还有其他问题。您能否给我们一些有关您的 BizTalk 安装的更多信息。

1.  你运行的是什么版本？
2.  我们的数据库大小是多少？
3.  您的清除和存档设置是什么样的？
4.  您的 SQL Server 数据库中是否有来自 BizTalk 的长期运行块？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T21:48:51.393

要考虑的另一件事是运行发送、接收和编排主机的用户帐户。请检查 BizTalk 管理控制台。如果它们都运行同一个帐户，有时编排可能会占用 CPU 时间的发送和接收进程。我相信优先考虑编排，然后接收，然后发送。即使您只是在开发，为此使用单独的帐户也很有用。这也提高了安全性。

Wrox BizTalk Server 2006 还将提供调整建议。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-21T15:14:06.893

服务器还发生了哪些其他事情？BizTalk 是固定的还是闲置的？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-21T21:27:40.633

您提到该解决方案在另一个环境中没有任何问题，因此很可能存在配置问题。

检查以下内容：

** 在 SQL Server 上，为 SQL Server 设置一些内存上限。默认情况下，SQL Server 使用它可以获取的任何内容然后挂起，因此请设置一个合理的限制，以便您的系统可以运行，而无需花费大量时间在硬盘驱动器上进行内存分页。

** 确保您有可用的磁盘空间 - 也许您的磁盘空间不足 - 这可能会导致各种奇怪的问题。

** 尝试在其物理驱动器之间拆分系统的页面文件（如果系统上有多个驱动器）。还可以考虑使用更快的驱动器，或者如果您有大量现金，请购买 SAN。

** 在 BizTalk 中，是否启用了跟踪？如果是这样，您是否也在跟踪邮件正文？禁用跟踪或邮件正文跟踪，看看是否有区别。

** 启动性能监视器并在运行您的解决方案时监视以下计数器

*   对象：BizTalk 消息传递
*   实例：（选择接收主机）%%
*   计数器：收到的文件/秒

*   对象：BizTalk 消息传递

*   实例：（选择发送主机）%%
*   计数器：文件发送/秒

*   对象：XLANG/s 编排

*   实例：（选择处理主机）%%
*   计数器：编排已完成/秒。

%% 你可能只有一台主机，所以就用它吧。由于 BizTalk 配置各不相同，因此我使用主机的通用名称。

前面的计数器监视服务器的最基本方面，但可能有助于缩小范围以进一步查看。当然，您也可以添加 CPU 和内存。如果您有时间（几天......也许几周），您可以监视分配内存并且从不释放它的进程。使用以下计数器...

*   对象：内存
*   计数器：池非分页字节

此计数器的缓慢下降表明进程没有释放内存，这会影响系统上的所有内容。

让我们知道结果如何！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-01-30T13:54:16.193

我遇到了同样的问题，当我的编排空闲一段时间时，处理第一个 msg 需要很长时间。EvYoung 的一篇文章帮我解决了这个问题。

“这是由 BizTalk 主机进程中的应用程序域卸载引起的。如果 AppDomain 在空闲后关闭，则出现的下一条消息需要等待 Orchestration 再次编译。根据设计的复杂性，这可能会很明显等待。为防止在低延迟要求的情况下出现这种情况，您可以修改 BTSNTSVC.EXE.config 文件并将 SecondsIdleBeforeShutdown 属性设置为 -1。这将防止 AppDomain 因空闲而关闭。

你可以在这里找到这篇文章：http: [//blogs.msdn.com/b/biztalkcpr/archive/2008/05/08/thoughts-on-orchestration-performance.aspx](http://blogs.msdn.com/b/biztalkcpr/archive/2008/05/08/thoughts-on-orchestration-performance.aspx)

我花了很长时间才做出回应，但我想我可能会帮助某人。干杯:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-08T10:20:16.080

其他人的一些好的建议。我会加 ：

您在接收位置是否有任何自定义接收管道组件？如果是这样，也许有人正在泄漏内存，调用一些外部组件，例如需要很长时间的数据库？

您收到的文件有多大？

在接收位置的文件传输属性上，将“文件重命名”设置为开启，文件是否在 60 秒内被重命名。

# django - 在使用外部 API 时加快页面加载

> ID：883075
> 
> 赞同：0
> 
> 时间：2009-05-19T14:19:42.757
> 
> 标签：django, api

我正在用 django 构建一个网站，让用户可以在一堆照片服务之间移动内容。正如您可以想象的那样，该应用程序执行了很多 api 命中。

例如：用户将 picasa、flickr、photobucket 和 facebook 连接到他们的帐户。现在我们需要从 4 个不同的 api 中提取内容，以使这些用户数据保持最新。

现在我有一个更新每个 api 的函数，我通过线程同时运行它们。（所有未启用的 api 在第二行返回 false，不，运行它们的开销并不大）。

# 这是我的问题：

使用这些 API**保持内容最新**的最佳策略是什么？

我有两个可能可行的想法：

1.  **定期更新 api（如 cron 作业），我们当时拥有的就是用户得到的。**

    > **好处：**
    > 
    > *   它易于实施。
    > *   当用户加载他们的第一页时，我们总是会有很好的数据。
    > 
    > **陷阱：**
    > 
    > *   我们要一直给不活跃的用户做api命中，浪费了很多带宽
    > *   它可能会让 api 提供者不高兴

2.  **用户登录时触发更新（在页面加载时）**

    > **好处**：
    > 
    > *   我们节省了大量带宽并降低了惹恼 api 提供者的风险
    > *   几乎不需要我们服务器上的资源量
    > 
    > **陷阱：**
    > 
    > *   我们要么必须异步进行更新（并且在第一次登录时不会有任何内容），要么......
    > *   第一个页面需要很长时间才能加载，因为我们正在获取所有 api 数据（我用这种方式测量了 26 秒）

**编辑**：设计很轻，设计只有两个图像，一个外部 css 文件和两个外部 javascript 文件。

此外，26 秒数来自运行在与服务器位于同一 LAN 的机器上的 firebug 网络监视器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T15:03:07.163

就个人而言，我会选择你提到的第二种方法。第一次登录时，您可以异步查询每个服务，在进程运行时向用户显示某种活动/状态栏。然后，您可以在从每个服务返回结果时填充页面。

然后，您可以为每个用户缓存这些调用的结果，这样您就不必每次都调用 api。

这样可以减轻服务器的负载，快速加载页面，并为用户提供一些活动指示（以及在内容加载时对页面的增量更新）。我认为这些加起来就是您可以提供的最佳用户体验。

# performance - 如何将 Oracle 用户配置文件投入实际使用？

> ID：883099
> 
> 赞同：3
> 
> 时间：2009-05-19T14:24:19.660
> 
> 标签：performance, oracle, oracle10g

Oracle 10g 具有允许限制各种资源的配置文件。为了清楚起见，这里有一些参考资料 - [orafaq.com](http://www.orafaq.com/wiki/Profiles_and_password_management)，[Oracle 文档](http://download.oracle.com/docs/cd/B19306_01/server.102/b14220/security.htm#sthref2740)。我对限制`CPU_PER_CALL`,`LOGICAL_READS_PER_CALL`以及`COMPOSITE_LIMIT`防止格式不正确的语句破坏其他会话的性能特别感兴趣。

我的问题是我不知道为这些参数使用什么值，这些值将允许您进行典型的长时间运行的资源密集型操作，同时防止真正糟糕的操作。我意识到这些值会根据所涉及的硬件、容差级别和查询而有所不同，这就是为什么我更感兴趣的方法是确定哪些值是最好的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T15:07:16.437

有多种方法，视情况而定。有任何工作希望的最简单的可能方法是询问运行时间最长的实际操作将运行多长时间（这显然取决于系统，并且取决于这是您正在构建的系统还是现有的系统）并返回基于该时间限制和并行度的 CPU_PER_CALL。假设单线程操作，如果你可以合理地说如果一个查询在 30 分钟内没有返回你想杀死它，你可以设置 CPU_PER_CALL 分配 30 分钟的 CPU（显然大多数查询不会使用 100 % 不断，因此 30 分钟的限制为您提供了一些呼吸空间）。

如果这是一个现有系统，您（或您的 DBA）可以在合理的天数内查看 AWR/statspack 报告（某些系统需要确保查看月/季度/年末的报告，其中可能会进行额外处理完成）并找到使用最多 CPU 和 I/O 的真实语句。然后，您可以适当地设置您的配置文件限制（即，在过去一个月中为语句记录的最大 CPU + 30% 的呼吸空间）。

当然，对于您选择的任何限制，都必须有人监控系统以确保限制保持同步。例如，如果查询由于数据量的增加而变得越来越昂贵，那么在 6 个月内，最大 + 30% 的限制可能是不够的。您不想在夜间处理中止时发现这一点，必须有人继续关注。

如果您使用的是企业版，那么查看资源管理器而不是配置文件可能会更好。虽然配置文件允许您终止失控会话，但资源管理器允许您根据各种因素更改会话优先级。与其杀死一个使用超过 30 分钟 CPU 的查询，不如将其设置为较低的优先级，这样它就不会在不杀死它的情况下干扰其他会话，以防它运行很长时间。

# django - 表单集保存和更新

> ID：883106
> 
> 赞同：1
> 
> 时间：2009-05-19T14:25:43.963
> 
> 标签：django

我有一个内联表单集，它最多显示 10 个表单。但是当我尝试保存/更新表单集时，这些额外的对象（内容为空白）也会被保存。因此，每次保存/编辑表单集时，这些空白记录都会不断输入数据库。可能是什么原因？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-26T18:47:58.683

在您看来，当您收到带有表单集的 POST 时，您必须检查每个表单以确保它已更改（这样空的内容将被忽略）。如果您启用了删除，我还包括对已删除表单的额外检查：

```
for form in formset.forms:
  if form.has_changed():
       if not form in formset.deleted_forms:
            # Do something with this form 
```

# c# - 在 Linq 中按问题分组

> ID：883108
> 
> 赞同：1
> 
> 时间：2009-05-19T14:25:49.330
> 
> 标签：c#, .net, linq

我在使用 LINQ 时遇到问题，希望有人能向我解释原因。我有这个代码：

```
 List<Spec> specs = GetSpecs(userObject, seasonID, partnershipID);

        var query = from s in specs
                    where (DateTime)s.FinalApprovedDate != null
                    && !((DateTime)s.FinalApprovedDate).Equals(DateTime.Parse("1/1/1900 12:00:00 AM"))
                    group s by s.ForCompanyID into g 
                    select new
                    {
                        Vendor = g.Key,
                        Avg = g.Average(s.FinalApprovedDate.Subtract((DateTime)s.Created_Date).Days)
                    }; 
```

我想从此查询中检索的是由 ForCompanyID 表示的每个公司的创建日期和最终批准日期之间的平均天数差异，其中日期不为空或“1/1/1900”。我的问题是我无法弄清楚如何从这个查询中获取这些数据。从我读过的内容来看，我相信这是正确的语法，但我得到一个“名称's'在当前上下文中不存在于新下的 s 值上。我也在这里用 g 尝试过这个，但那不也有价值观。有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T14:28:26.703

尝试将倒数第二行更改为：

```
Avg = g.Average(s => s.FinalApprovedDate.Subtract((DateTime)s.Created_Date).Days) 
```

# c++ - Barton-Nackman 技巧中使用的 C++ 非模板成员是什么？

> ID：883109
> 
> 赞同：0
> 
> 时间：2009-05-19T14:25:51.780
> 
> 标签：c++, design-patterns, templates

来自维基百科：

```
// A class template to express an equality comparison interface.
template<typename T> class equal_comparable
{
    friend bool operator==(T const &a, T const &b) { return  a.equal_to(b); }
    friend bool operator!=(T const &a, T const &b) { return !a.equal_to(b); }
};

class value_type
// Class value_type wants to have == and !=, so it derives from
// equal_comparable with itself as argument (which is the CRTP).
     : private equal_comparable<value_type>
{
public:
    bool equal_to(value_type const& rhs) const; // to be defined
}; 
```

这应该是[Barton-Nackman](http://en.wikipedia.org/wiki/Barton-Nackman_trick)，它可以实现编译时维度分析（检查应用于变量的某些操作是否以可比较的数字结束，例如速度与空间/时间相当，但没有加速）。

谁能解释一下，或者至少解释一下非模板成员是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T22:14:04.310

自从这种模式被发明以来，语言的规则已经发生了变化，尽管注意不要破坏它。换句话说，据我所知，它仍然有效，但原因与最初不同。我不认为我会尝试基于这种模式进行维度分析，因为我认为今天有更好的方法可以做到这一点。

我也认为这个例子太琐碎了，没有帮助。如前所述，`equal_comparable<value_type>`原因`operator==`和`operator!=`出现的实例化`value_type`。由于它们是非成员，因此继承是否私有并不重要，因此在解决调用时它们仍然有资格被选择。在这个例子中很难看出这一点。但是，假设您添加了一个模板参数`equal_comparable`和其他一些东西：

```
template<typename U, typename V> class equal_comparable
{
    friend bool operator==(U const &a, V const &b) { return  a.equal_to(b); }
    friend bool operator!=(U const &a, V const &b) { return !a.equal_to(b); }
};

class some_other_type 
{
    bool equal_to(value_type const& rhs) const;
};

class value_type
: private equal_comparable<value_type>,      // value_type comparable to itself
  private equal_comparable<some_other_type>  // value_type comparable to some_other_type
{
public:
    bool equal_to(value_type const& rhs) const;
    bool equal_to(some_other_type const& rhs) const;
}; 
```

免责声明：我不知道这是否是它*应该*使用的方式，但我有理由确定它会按照描述的方式工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T14:57:13.557

这些实际上是非模板非成员 - 基本模板中的比较运算符 - 它们被 ADL 用于派生类。模板成员将类似于：

```
 class C
{
    ...
    template < typename T > void DoGreatStuff( T t ) { ... }
    ...
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T15:10:37.977

`equal_comparable<value_type>`in class的实例化`value_type`导致编译器生成两个比较函数：

```
friend bool operator==(value_type const &a, value_type const &b) { return  a.equal_to(b); }
friend bool operator!=(value_type const &a, value_type const &b) { return !a.equal_to(b); } 
```

这些函数是非模板的，因为它们不依赖于任何模板参数，但它们也是非成员，因为它们被声明为`friend`.

# html - 提交返回整个页面的 HTML

> ID：883113
> 
> 赞同：0
> 
> 时间：2009-05-19T14:26:51.213
> 
> 标签：html, forms, submit

当我在我的页面上提交表单时，我的“响应文本”会返回整个页面的 HTML，而不仅仅是提交的表单。这个是正常的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T14:43:42.430

responseText 是 XHR 表示“服务器响应请求的内容，不包括 HTTP 标头”。

如果您访问旨在响应常规表单提交的资源，则包含完整的 HTML 文档是完全正常的。

听起来您需要更聪明地了解服务器的响应内容。

这个[简单的示例](http://github.com/dorward/simple-ajax-demo/blob/b86a9ce37f2ebed207b50cac0004ff849d544c58/webroot/demo.pl)（用 Perl 编写，有关更多上下文，请参阅链接）检查查询字符串参数，以决定是否应该将已获取的数据放在 HTML 模板中并返回，或者将数据转换为 JSON 并返回.

```
 if ($view eq "json") {
    my $data = $json->convert_blessed->encode($vars);
    print $q->header('application/json;charset=utf-8'), $data;
    return;
  }

  my $output;
  $tt->process('html.tt', $vars, \$output)
    || die $tt->error(), "\n";

  print $q->header('text/html;charset=utf-8'), $output; 
```

# c# - 我可以使用什么来确定相似的词或关键字？

> ID：883118
> 
> 赞同：2
> 
> 时间：2009-05-19T14:27:35.113
> 
> 标签：c#, algorithm

有谁知道开源或通过 API 提供的“相似词或关键字”算法？我正在寻找类似词库但更智能的东西。

例如：

> 英特尔

返回：

> 处理器，
> i7核心芯片，
> 四核芯片，
> ..等

有什么想法甚至可以在 C# 中为我指明正确的方向吗？

* * *

### 编辑：

我很想听听您的想法，但为什么我们不能只使用 Google Adwords API 来生成与输入的关键字相关的关键字？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T14:30:54.607

为什么不向 Google 发送搜索查询并解析它返回的内容呢？

另外，请查看[Google Sets](http://labs.google.com/sets)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T14:29:45.420

这种事情没有算法。您将必须获取同义词库的数据，并将其加载到数据结构中，然后它是一个简单的字典查找（您可以使用 C# Dictionary 类）。也许您可以查看[Wordnet](http://wordnet.princeton.edu/obtain)或[Moby Thesaurus](http://www.gutenberg.org/etext/3202)作为数据源。其他选项是使用[叙词服务器](http://www.alexandria.ucsb.edu/thesaurus/)并根据需要在线获取信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T14:34:12.963

您将需要一个包含此信息的大型数据库。剩下的很简单——查找输入并查看存储了哪些相关单词。

困难的部分是生成数据库。如果您想涵盖大量单词和主题，手动执行可能需要数年时间。
生成它是非常重要的。也许您可以尝试下载网页并分析经常一起出现的单词，但我认为这仍需要几个月的时间来构建、调整并最终收集高质量的数据。也许从维基百科中提取链接可能是一个很好的信息来源，因为它是半结构的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-28T07:06:34.860

我已经在 NHunspell 项目中为 .NET 提供了开放式 Office 同义词库功能。您可以使用 OO 叙词文件。 [这是 NHunspell 项目](http://nhunspell.sourceforge.net/)

# php - PHP 打印日期变量格式

> ID：883123
> 
> 赞同：0
> 
> 时间：2009-05-19T14:28:20.043
> 
> 标签：php

所以这应该是一个非常简单的问题，但我似乎无法在任何地方找到一个简单的答案。

我正在修补一些 PHP 代码（我不是 PHP 人）并且我有这个变量 $orderDate。我如何打印这个变量，使它只是 M/d/yy h:mm tt？

更新：所以我环顾四周，看到 $orderDate 是什么。这是代码：

```
global $orderDate;
$orderDate = strftime('%c');
print("Order Date: ".date("M/d/Y h:M", $orderdate)."<br />"); 
```

所以我得到这个输出：

> 1969 年 12 月 31 日 06:12

并且应该得到今天的日期....

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-19T14:30:28.133

```
echo date("m/d/Y h:m", $orderDate);
echo date("m/d/Y h:m", strtotime($orderDate)); // or this 
```

取决于 $orderDate 包含的内容。

查看[date()](http://is.php.net/manual/en/function.date.php)，因为它有很多示例并且使用起来非常简单。

更新：

```
$orderDate = date("M/d/Y h:M");
print("Order Date: ".orderDate ."<br />"); 
```

另请查看这是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T14:31:24.170

[`date`功能](http://php.net/date)将为您做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T14:31:49.893

请参阅 PHP[`date()`](http://uk.php.net/manual/en/function.date.php)函数。

> `format`如果没有给出时间戳，则使用给定的整数`timestamp`或当前时间返回根据给定字符串格式化的字符串。
> 
> ```
> string date ( string $format [, int $timestamp = time() ] ) 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T14:43:53.817

如果 $orderDate 是一个整数时间戳，您可能需要[strftime](http://us2.php.net/strftime)。具体来说，我认为您想要的电话是：

```
strftime("%D %l:%M %p", $orderDate) 
```

但是，我建议您查看网页以确保我已正确解释了您想要的内容。

# sql - SQL Server SET DATEFIRST 范围

> ID：883127
> 
> 赞同：10
> 
> 时间：2009-05-19T14:28:52.303
> 
> 标签：sql, sql-server

如果那样，我正在使用 SS 2005

我见过像这样的示例代码

```
DECLARE @restore = SELECT @@DATEFIRST
SET DATEFIRST 1
SELECT datepart(dw,ADateTimeColumn) as MondayBasedDate,.... FROM famousShipwrecks --
SET DATEFIRST @restore 
```

假设当查询正在运行另一个查询设置 DATEFIRST？

如果另一个查询依赖于 datefirst 为 7 （例如）并且没有设置它，并且在我的查询运行时运行，那是他没有设置它的问题吗？或者有没有更好的方法来编写取决于给定日期的查询是第 1 天。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-05-19T14:40:35.180

@@DATEFIRST 在您的会话中是本地的。您可以通过打开 Sql Server Management Studio (SSMS) 中的选项卡来验证它。在第一个选项卡中执行此代码：

```
 SET DATEFIRST 5 
```

并验证它不会影响其他选项卡：

```
select @@datefirst 
```

请参阅此[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms187766.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-03-25T17:31:37.237

还有一点，如果您想避免设置 DATEFIRST，您可以将 DATEFIRST 的值合并到查询中，以找到所需的日期：

```
 SELECT (datepart(dw,ADateTimeColumn) + @@DATEFIRST) % 7)  as 'MondayBasedDate'
    , ...
    FROM famousShipwrecks -- 
```

那你完全不用担心恢复它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-30T23:14:09.080

要设置一周的参数化第一天，以下应该工作

```
DECLARE @FirstDayOfWeek INT = 1;
DECLARE @DateTime DATETIME = '2015-07-14 8:00:00';
SELECT (DATEPART(weekday, @DateTime) + @@DateFirst - @FirstDayOfWeek - 1) % 7 + 1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-20T15:39:49.997

您可以忘记`DATEPART(weekday, DateColumn)`并`@@DATEFIRST`自己计算一周中的哪一天。

对于基于星期一的周（欧洲），最简单的是：

```
SELECT DATEDIFF(day, '17530101', DateColumn) % 7 + 1 AS MondayBasedDay 
```

对于基于星期日的周（美国），请使用：

```
SELECT DATEDIFF(day, '17530107', DateColumn) % 7 + 1 AS SundayBasedDay 
```

自 1753 年 1 月 1 日和 7 日以来，这一直运行良好。

# html - css 100 % 高度错误

> ID：883128
> 
> 赞同：2
> 
> 时间：2009-05-19T14:29:22.287
> 
> 标签：html, css, height

当我调整窗口大小并出现垂直滚动条时，如果我将其滚动到底部， - 底部会中断。我不明白为什么，但我认为这与页面使用 100% 高度的方式有关。任何帮助，将不胜感激！

这是页面：[zxsdesign.com/main1.html](http://zxsdesign.com/main1.html)

这是一个屏幕截图

[zxsdesign.com/bug1.PNG http://zxsdesign.com/bug1.PNG](http://zxsdesign.com/bug1.PNG)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T14:52:03.770

它是你使用 CSS`height`属性和绝对定位的混合体。ajm 谈到了使用`min-height`- 理想情况下，您应该使用它，而不是`height`在使事情达到 100% 高时使用。

到你的另一个问题。当您绝对定位元素时，它们不再是页面结构的一部分。相反，它们位于单独的平面中，因此不会影响页面尺寸。当您`<div id="flashcontent">`越过窗口边界时，它不会影响`<body>`的边界。

您可以通过不使用来解决此问题`position: absolute`。没有真正的必要。相反，您可以`#flashcontent`正常定位元素，并完全摆脱`#bg`元素 - 只需提供`#flashcontent`背景即可。然后使用`margin: 0 auto;`和`padding-top: 179px;`将其放置在正确的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T14:36:16.080

不幸的是身高：100%；以不同的方式实现...您无法确定浏览器在使用时会执行您想要的操作。

尝试使用 clear: left; 或明确：两者；以你的风格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T14:36:37.000

100% 高度是一个屏幕高度。如果向上滚动，它会覆盖 100% 的高度。让你的块也缩放，或者至少移动到屏幕的中心。您可以通过将它们的顶部和底部填充设置为自动来做到这一点。

此外，您的头部标签未正确关闭。检查[这个](http://validator.w3.org/check?uri=http%3A%2F%2Fzxsdesign.com%2Fmain1.html&charset=(detect+automatically)&doctype=Inline&group=0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T14:39:01.080

您的页面完全基于对所有元素使用 100% 高度。如果用户的浏览器视口足够大，那很好；但是，如果他们将浏览器的大小调整到足够*小*，您的页面将是该较小高度的 100%，并且内容将从底部掉出。

研究在您的一个容器元素上设置最小高度。如果浏览器窗口低于该高度，这将迫使事物停止调整大小。或者，您可以设置一个足够大的普通旧高度，以在您的一个容器项目上包含您的闪存，并让其他容器继承。

而且，由于 IE6 不支持最小高度（FF2+、IE7、Safari 都支持），你需要[像这样破解它。](http://www.greywyvern.com/code/min-height-hack)

# java - EJB3构造函数抛出异常？

> ID：883131
> 
> 赞同：1
> 
> 时间：2009-05-19T14:29:36.700
> 
> 标签：java, ejb-3.0

如果 EJB3 无状态/有状态 bean no args 构造函数抛出异常，会发生什么？例如，A 类有一个 DI：

```
@EJB
B b; 
```

B 在构造函数中抛出异常？我没有在 EJB3 规范中找到任何关于这种情况的提及。我猜想 A 类的实例被丢弃了，因为它真的没有办法成功完成它的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T16:10:21.570

IME 如果您的任何 EJB 在启动应用程序时未能初始化，则应用服务器知道发生了问题并且不会将您的应用程序标记为可用。

发生这种情况时，您的 EJB / Web URL 不可用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-27T14:05:52.980

javax.ejb.EJBTransactionRolledbackException

当您使用 b 的方法时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-22T18:05:28.047

当您尝试使用 b 时，通常会出现空指针异常。

# java - 在 Java 中编写 URL 或 URI 的惯用方式是什么？

> ID：883136
> 
> 赞同：121
> 
> 时间：2009-05-19T14:29:54.377
> 
> 标签：java, url

如何在 Java 中构建 URL 或 URI？有没有一种惯用的方式，或者图书馆可以轻松做到这一点？

我需要允许从请求字符串开始，解析/更改各种 URL 部分（方案、主机、路径、查询字符串）并支持添加和自动编码查询参数。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-03-03T17:17:40.390

从 Apache HTTP 组件 HttpClient 4.1.3 开始，来自官方[教程](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/index.html)：

```
public class HttpClientTest {
public static void main(String[] args) throws URISyntaxException {
    List<NameValuePair> qparams = new ArrayList<NameValuePair>();
    qparams.add(new BasicNameValuePair("q", "httpclient"));
    qparams.add(new BasicNameValuePair("btnG", "Google Search"));
    qparams.add(new BasicNameValuePair("aq", "f"));
    qparams.add(new BasicNameValuePair("oq", null));
    URI uri = URIUtils.createURI("http", "www.google.com", -1, "/search",
                                 URLEncodedUtils.format(qparams, "UTF-8"), null);
    HttpGet httpget = new HttpGet(uri);
    System.out.println(httpget.getURI());
    //http://www.google.com/search?q=httpclient&btnG=Google+Search&aq=f&oq=
}
} 
```

编辑：从 v4.2`URIUtils.createURI()`开始，已弃用，取而代之的是`URIBuilder`：

```
URI uri = new URIBuilder()
        .setScheme("http")
        .setHost("www.google.com")
        .setPath("/search")
        .setParameter("q", "httpclient")
        .setParameter("btnG", "Google Search")
        .setParameter("aq", "f")
        .setParameter("oq", "")
        .build();
HttpGet httpget = new HttpGet(uri);
System.out.println(httpget.getURI()); 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-01-02T22:59:00.547

作为作者，我可能不是判断我的 URL/URI 构建器是否*良好*的最佳人选，但这里仍然是：[https ://github.com/mikaelhg/urlbuilder](https://github.com/mikaelhg/urlbuilder)

我想要最简单的完整解决方案，在 JDK 之外具有零依赖性，所以我不得不自己动手。

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2009-05-19T14:33:14.713

[阿帕奇 HTTP 客户端](http://hc.apache.org/httpclient-3.x/index.html)？

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2009-05-19T20:16:12.100

使用 HTTPClient 效果很好。

```
protected static String createUrl(List<NameValuePair> pairs) throws URIException{

  HttpMethod method = new GetMethod("http://example.org");
  method.setQueryString(pairs.toArray(new NameValuePair[]{}));

  return method.getURI().getEscapedURI();

} 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2017-04-13T04:54:58.030

有很多库可以帮助您构建 URI（不要重新发明轮子）。这里有三个可以帮助您入门：

* * *

### [Java EE 7](http://search.maven.org/#artifactdetails%7Cjavax%7Cjavaee-api%7C7.0%7Cjar)

```
import javax.ws.rs.core.UriBuilder;
...
return UriBuilder.fromUri(url).queryParam(key, value).build(); 
```

* * *

### [org.apache.httpcomponents:httpclient:4.5.2](http://search.maven.org/#artifactdetails%7Corg.apache.httpcomponents%7Chttpclient%7C4.5.2%7Cjar)

```
import org.apache.http.client.utils.URIBuilder;
...
return new URIBuilder(url).addParameter(key, value).build(); 
```

* * *

### [org.springframework:spring-web:4.2.5.RELEASE](http://search.maven.org/#artifactdetails%7Corg.springframework%7Cspring-web%7C4.2.5.RELEASE%7Cjar)

```
import org.springframework.web.util.UriComponentsBuilder;
...
return UriComponentsBuilder.fromUriString(url).queryParam(key, value).build().toUri(); 
```

* * *

**另请参阅：** [GIST > URI 构建器测试](https://gist.github.com/nickgrealy/b4f35bf5e5e5a444aff20c4616b51513)

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2017-05-25T14:58:16.093

# 使用 OkHttp

现在是**2021 年**，有一个非常受欢迎的名为[OkHttp](https://github.com/square/okhttp)的库，它在 GitHub 上已被**加注4 万次。**使用这个库，您可以构建一个如下所示的 url：

```
import okhttp3.HttpUrl;

URL url = new HttpUrl.Builder()
    .scheme("http")
    .host("example.com")
    .port(4567)
    .addPathSegments("foldername/1234")
    .addQueryParameter("abc", "xyz")
    .build().url(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-02-29T20:32:50.537

在因建议 URL 类而受到抨击之后。我会接受评论者的建议，并建议使用[URI 类](http://docs.oracle.com/javase/6/docs/api/java/net/URI.html)。我建议您仔细查看 URI 的构造函数，因为该类一旦创建就非常不可变。
我认为此构造函数允许您在 URI 中设置您可能需要的所有内容。

```
URI(String scheme, String userInfo, String host, int port, String path, String query, String fragment)
          Constructs a hierarchical URI from the given components. 
```

# python - 有没有办法轮询从 subprocess.Popen 返回的文件句柄？

> ID：883152
> 
> 赞同：4
> 
> 时间：2009-05-19T14:33:15.353
> 
> 标签：python, pipe, subprocess

说我写这个：

```
from subprocessing import Popen, STDOUT, PIPE
p = Popen(["myproc"], stderr=STDOUT, stdout=PIPE) 
```

现在如果我这样做

```
line = p.stdout.readline() 
```

我的程序一直等到子进程输出下一行。

有什么魔法我可以做的，`p.stdout`这样我就可以读取输出（如果有的话），否则就继续？我正在寻找类似的东西`Queue.get_nowait()`

我知道我可以创建一个阅读线程`p.stdout`，但假设我不能创建新线程。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-19T14:36:21.523

使用`p.stdout.read(1)`它将逐个字符读取

这是一个完整的例子：

```
import subprocess
import sys

process = subprocess.Popen(
    cmd, stdout=subprocess.PIPE, stderr=subprocess.PIPE
)

while True:
    out = process.stdout.read(1)
    if out == '' and process.poll() != None:
        break
    if out != '':
        sys.stdout.write(out)
        sys.stdout.flush() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-19T14:42:41.230

使用`select`Python 标准库中的模块，请参阅[http://docs.python.org/library/select.html](http://docs.python.org/library/select.html)。 `select.select([p.stdout.fileno()], [], [], 0)`立即返回一个元组，其项目是三个列表：如果该文件描述符上有要读取的内容，第一个将是非空的。

# wpf - 在 WPF 中绘制一个 2px 的 Hatch 笔刷

> ID：883155
> 
> 赞同：1
> 
> 时间：2009-05-19T14:33:34.320
> 
> 标签：wpf, brush

我正在尝试构建一个 WPF DrawingBrush，它将使用两个 1px x 1px 矩形绘制一个填充图案。生成的图案看起来就像经典 Macintosh 应用程序的背景。

这是我正在使用的：

```
<Canvas SnapsToDevicePixels="True">
    <Canvas.Background>
        <DrawingBrush x:Name="gridBackgroundBrush" 
        Viewport="0,0,10,10"            
        ViewportUnits="Absolute"
        TileMode="Tile">
          <DrawingBrush.Drawing>
            <DrawingGroup>
              <DrawingGroup.Children>                                   
                <GeometryDrawing Geometry="M0,0 L10,0 10,10, 0,10Z" Brush="Green"/>                 
                <GeometryDrawing Geometry="M10,10 L20,10 20,20, 10,20Z" Brush="Green" />                                
              </DrawingGroup.Children>
            </DrawingGroup>
          </DrawingBrush.Drawing>
        </DrawingBrush>
    </Canvas.Background>
</Canvas> 
```

一切看起来都清晰锐利，除了盒子太大了。当我调整画笔上的视口时，事情开始变得模糊。看起来抗锯齿正在杀死我；它想使用 3px 从纯绿色淡化为无，当我的尺寸低于 3-4px 时，这不起作用。我能做些什么来完全禁用抗锯齿并进行像素精确绘图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-10-04T01:34:42.273

将绘图偏移 0.5px，您将摆脱抗锯齿效果。这是因为绘图是在像素偏移的边缘完成的，而不是在您指定的实际像素偏移上。通过将 X、Y 偏移半个像素，您可以告诉绘图引擎在像素本身上进行绘图，从而消除了抗锯齿的需要。

出于某种原因，这不适用于渐变画笔。

此行为类似于您在 Mac 上的 Quarts 绘图中的行为。

注意：您应该偏移的*不是*视口，而是您使用指定画笔绘制的实际形状。

如需更完整的答案，请[阅读本文](http://www.wpftutorial.net/DrawOnPhysicalDevicePixels.html)。

# c++ - 异步 IO 的整洁代码

> ID：883156
> 
> 赞同：26
> 
> 时间：2009-05-19T14:33:58.487
> 
> 标签：c++, c, asynchronous, io

虽然异步 IO（带有 select/poll/epoll/kqueue 等的非阻塞描述符）不是网络上记录最多的东西，但有一些很好的例子。

但是，所有这些示例在确定了调用返回的句柄后，都只有一个 ' `do_some_io(fd)`' 存根。他们并没有真正解释如何以这种方法最好地处理实际的异步 IO。

阻塞 IO 非常整洁且易于阅读代码。另一方面，非阻塞的异步 IO 多毛且混乱。

有哪些方法？什么是健壮和可读的？

```
void do_some_io(int fd) {
  switch(state) {
    case STEP1:
       ... async calls
       if(io_would_block)
          return;
       state = STEP2;
    case STEP2:
       ... more async calls
       if(io_would_block)
          return;
       state = STEP3;
    case STEP3:
       ...
  }
} 
```

或者也许（ab）使用 GCC 的计算 goto：

```
#define concatentate(x,y) x##y
#define async_read_xx(var,bytes,line)       \
   concatentate(jmp,line):                  \
   if(!do_async_read(bytes,&var)) {         \
       schedule(EPOLLIN);                   \
       jmp_read = &&concatentate(jmp,line); \
       return;                              \
}

// macros for making async code read like sync code
#define async_read(var,bytes) \
    async_read_xx(var,bytes,__LINE__)

#define async_resume()            \
     if(jmp_read) {               \
         void* target = jmp_read; \
         jmp_read = NULL;         \
         goto *target;            \
     }

void do_some_io() {
   async_resume();
   async_read(something,sizeof(something));
   async_read(something_else,sizeof(something_else));
} 
```

或者可能是 C++ 异常和状态机，因此工作函数可以触发中止/恢复位，或者可能是表驱动的状态机？

我追求的不是如何让它工作，而是如何让它变得可维护！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-19T15:13:47.220

我建议看一下：[http](http://www.kegel.com/c10k.html) ://www.kegel.com/c10k.html ，其次看一下已经完成这项工作的现有库，如 libevent、Boost.Asio，看看它们是如何工作的。

关键是每种系统调用的方法可能不同：

*   选择是简单的反应器
*   epoll 具有需要不同方法的边缘或电平触发接口
*   iocp 是 proactor 需要其他方法

建议：使用良好的现有库，如 C++ 的 Boost.Asio 或 C 的 libevent。

编辑：这就是 ASIO 处理这个问题的方式

```
class connection {
   boost::asio:ip::tcp::socket socket_;
public:
   void run()
   {
         // for variable length chunks
         async_read_until(socket_,resizable_buffer,'\n',
               boost::bind(&run::on_line_recieved,this,errorplacehplder);
         // or constant length chunks
         async_read(socket_,buffer(some_buf,buf_size),
               boost::bind(&run::on_line_recieved,this,errorplacehplder);
   }
   void on_line_recieved(error e)
   {
        // handle it
        run();
   }

}; 
```

因为 ASIO 作为前摄器工作，所以它会在操作完成时通知您并在内部处理 EWOULDBLOCK。

如果您将其命名为 reactor，则可以模拟此行为：

```
 class conn {
    // Application logic

    void run() {
       read_chunk(&conn::on_chunk_read,size);
    }
    void on_chunk_read() {
         /* do something;*/
    }

    // Proactor wrappers

    void read_chunk(void (conn::*callback),int size, int start_point=0) {
       read(socket,buffer+start,size)
       if( complete )
          (this->*callback()
       else {
          this -> tmp_size-=size-read;
          this -> tmp_start=start+read;
          this -> tmp_callback=callback
          your_event_library_register_op_on_readable(callback,socket,this);
       }
    }
    void callback()
    {
       read_chunk(tmp_callback,tmp_size,tmp_start);
    }
 } 
```

类似的东西。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-19T14:51:14.723

状态机是一种不错的方法。前面有点复杂，这会让你在未来很头疼，因为未来真的很快就会开始。;-)

另一种方法是使用线程并在每个线程的单个 fd 上执行阻塞 I/O。这里的权衡是使 I/O 变得简单，但*可能会*在同步中引入复杂性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-03-30T20:05:05.523

存在伟大的设计模式“协程”来解决这个问题。

这是两全其美的：整洁的代码，就像同步 io 流和没有上下文切换的出色性能，就像 async io 一样。协程内部看起来像一个普通的同步线程，具有单指令指针。但是许多协程可以在一个 OS 线程中运行（所谓的“协作多任务”）。

协程代码示例：

```
void do_some_io() {
   blocking_read(something,sizeof(something));
   blocking_read(something_else,sizeof(something_else));
   blocking_write(something,sizeof(something));
} 
```

看起来像同步代码，但实际上控制流使用了另一种方式，像这样：

```
void do_some_io() {
   // return control to network io scheduler, to handle another coroutine
   blocking_read(something,sizeof(something)); 
   // when "something" is read, scheduler fill given buffer and resume this coroutine 

   // return control to network io scheduler, to handle another coroutine
   CoroSleep( 1000 );
   // scheduler create async timer and when it fires, scheduler pass control to this coroutine
    ...
   // and so on 
```

因此，单线程调度程序使用用户定义的代码和对 io 的整洁的类似同步的调用来控制许多协程。

C++协程实现示例是“boost.coroutine”（实际上不是boost的一部分：） [http://www.crystalclearsoftware.com/soc/coroutine/](http://www.crystalclearsoftware.com/soc/coroutine/) 这个库完全实现了协程机制，可以使用boost.asio作为调度器和异步io层。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-04T18:01:49.547

您需要有一个提供 async_schedule()、async_foreach()、async_tick() 等的主循环。这些函数依次将条目放入全局方法列表中，这些方法将在下次调用 async_tick() 时运行。然后，您可以编写更整洁且不包含任何 switch 语句的代码。

你可以写：

```
async_schedule(callback, arg, timeout); 
```

或者：

```
async_wait(condition, callback, arg, timeout); 
```

然后您的条件甚至可以在另一个线程中设置（前提是您在访问该变量时注意线程安全）。

我已经在 C 中为我的嵌入式项目实现了一个异步框架，因为我想要非抢占式多任务处理，并且异步非常适合通过在主循环的每次迭代期间做一些工作来完成许多任务。

代码在这里：[https ://github.com/mkschreder/fortmax-blocks/blob/master/common/kernel/async.c](https://github.com/mkschreder/fortmax-blocks/blob/master/common/kernel/async.c)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T18:35:45.520

您想将“io”与处理分离，此时您阅读的代码将变得非常可读。基本上你有：

```
 int read_io_event(...) { /* triggers when we get a read event from epoll/poll/whatever */

     /* read data from "fd" into a vstr/buffer/whatever */

     if (/* read failed */) /* return failure code to event callback */ ;

     if (/* "message" received */) return process_io_event();

     if (/* we've read "too much" */) /* return failure code to event callback */ ;

     return /* keep going code for event callback */ ;
    }

    int process_io_event(...) {
       /* this is where you process the HTTP request/whatever */
    } 
```

...然后真正的代码正在处理事件中，即使您有多个请求响应，它也非常可读，您只需在设置状态或其他内容后执行“返回 read_io_event()”。

# quartz-scheduler - 以“用户”身份运行 Quartz.NET 作业 - 权限问题

> ID：883161
> 
> 赞同：3
> 
> 时间：2009-05-19T14:35:09.780
> 
> 标签：quartz-scheduler

**场景：** 我有一个控制台应用程序需要访问具有读/写权限的网络共享。手动运行时没有问题。

**问题：** 当我将此应用程序添加为我的quartz.net 服务器中的作业时，它无法访问共享。我无权更改网络共享的权限，所以基本上我需要我的石英作业，或者如果需要我的石英服务器以我（或作为具有适当权限的用户）运行作业。

关于如何做到这一点的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-23T20:23:23.977

您需要更改运行服务的用户（因此这实际上不是 Quartz.NET 问题）。在服务中打开服务属性并将用户从 SYSTEM 或 NETWORK SERVICE 更改为对网络共享具有适当权限的某个命名用户帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-23T20:56:28.543

您还可以使用[模拟](http://blogs.msdn.com/shawnfa/archive/2005/03/21/400088.aspx)来动态更改您正在运行的用户。

# debugging - 如何调试/监控 SMTP 通信？

> ID：883163
> 
> 赞同：14
> 
> 时间：2009-05-19T14:35:18.017
> 
> 标签：debugging, smtp, monitoring

调试 HTTP 很容易，你有各种各样的工具来做它（比如 Fiddler）。SMTP 呢？

**如何调试 SMTP 通信？**

我的目标系统是 Windows。

* * *

推荐工具：

*   空灵
*   tcpdump
*   微软网络监视器

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-19T19:21:20.353

对于用 Ethereal 做出回应的两个人：由于商标问题，我们在 2006 年将该项目重命名为 Wireshark ( [http://www.wireshark.org )。](http://www.wireshark.org)我强烈建议升级。

根据您的具体问题，Wireshark 的[Follow TCP Stream](http://www.wireshark.org/docs/wsug_html_chunked/ChAdvFollowTCPSection.html)功能对于调试 Internet 消息协议（包括 SMTP）非常有用。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-02-18T12:28:48.920

如何使用 Wireshark 捕获电子邮件：

1.  [获取wireshark](https://www.wireshark.org/download.html) -> 安装
2.  进入过滤器输入`smtp`点击`Apply` ![在此处输入图像描述](https://i.stack.imgur.com/j6kgv.png)
3.  当您获得过滤的行时，在其中一个上单击鼠标右键并选择“Follow TCP stream”。你应该得到如下窗口 ![在此处输入图像描述](https://i.stack.imgur.com/9Pv3I.png)
4.  （可选）如果您想检查 base64 编码的电子邮件内容，将看起来像乱码的部分复制到 base64 到文本转换器之一中，[网上有很多。](https://www.base64decode.org/)您应该收到已发送的可读文本。

![在此处输入图像描述](https://i.stack.imgur.com/dhdVp.png)

希望这可以节省您一些时间。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-02-19T23:16:14.487

[smtp-cli](http://smtp-cli.logix.cz/ "smtp-cli")对此有好处。从主页：

> smtp-cli 是一个强大的 SMTP 命令行客户端，支持高级功能，例如 STARTTLS、SMTP-AUTH 或 IPv6

除了作为一个全功能的客户端之外，它的`--verbose`选项使它成为我认为您正在寻找的工具来追踪 SMTP 问题（例如，为什么服务器拒绝给定到：地址，这就是我发现的工具 ：-） ）

再次从主页：

> 它也是测试和调试 SMTP 服务器设置的便捷工具。即使是习惯于通过 telnet 键入 SMTP 协议的核心邮件管理员，在验证启用 TLS 的服务器的加密设置以及随后的用户身份验证时，也需要一个专门的工具。这样的事情很难手动输入 telnet 会话:-)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-19T14:39:37.570

试试 Ethereal - 它是一个免费的网络协议分析器。

SMTP 协议全是 ascii，所以一旦你看到 TCP 连接内部的内容，你就可以开始了。

学习如何使用 Ethereal 需要一些工作。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-19T14:44:06.080

您可以使用 SMTP 开发服务器，例如[Neptune](http://donovanbrown.com/post/2008/10/20/Neptune.aspx)或[Antix](http://www.antix.co.uk/Projects/SMTPServerForDevelopers.aspx)。两者的工作方式相同：它们在您的机器中创建一个“假”SMTP 服务器，因此您可以测试您的电子邮件发送方法，而无需实际发送它们收到的消息。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-19T14:43:49.980

如果您想查看 SMTP 流量，请使用**ethereal** (www.ethereal.com) 或**tcpdump (www.tcpdump.org) 等工具。**

如果您想检查您的服务器是否符合中继标准，请执行

```
 telnet relay-test.mail-abuse.org 

```

来自您的 SMTP 服务器，它会检查您的服务器是否存在中继漏洞。

# c# - 关于出和归的问题？

> ID：883168
> 
> 赞同：1
> 
> 时间：2009-05-19T14:36:31.150
> 
> 标签：c#, .net

在此代码中（来自[WCF REST starterkit](http://aspnet.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=24644) - preview2）：

```
protected override SampleItem OnAddItem(SampleItem initialValue, out string id)
        {
            // TODO: Change the sample implementation here
            id = Guid.NewGuid().ToString();
            this.items.Add(id, initialValue);
            return initialValue;
        } 
```

我是以字符串的形式返回 id，还是以 SampleItem 的形式返回初始值？

编辑：看起来我都回来了，那么一个简单的方法调用示例看起来像分配给几个变量吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T14:39:31.830

您将在作为参数传递给方法的字符串中返回 id。此外，该方法将返回 SampleItem 实例。

```
SampleItem myItem = new SampleItem();
string newId = string.Empty;
myItem = OnAddItem(myItem, out newId);
// now myItem will be assigned with SampleItem returned from the
// OnAddItem method, and newId will be updated with the id assigned
// within that method 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T14:38:31.627

你得到了两者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T14:40:04.450

你两个都回来了。

您将为 ID 传递一个字符串变量，并将通过 'out' 修饰符返回给您。该函数还将返回您传入的 SampleItem 实例 initialValue。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T14:40:10.190

你两个都回来了。`out`参数只是返回某些编程语言提供的值的另一种方式。

# .net - dot net：Express Edition Visual Studio 2008 中的线程运行速度太慢？

> ID：883173
> 
> 赞同：1
> 
> 时间：2009-05-19T14:37:09.120
> 
> 标签：.net, multithreading, webrequest

我正在运行 12 个线程。这些线程正在调用的函数对某些对象没有任何锁定。但是这些线程仍然花费了太多时间。（16 分钟）。每个线程都在解析一个运行良好的 xml 文档，如果单独运行.这个问题是因为某些原因与快递版提供的最大没有线程或快递版的某些阻塞dn有关。

* * *

下面给出了每个线程调用的函数的代码。每个线程都有不同的 rssfeed(urladdress)

```
public static class RssFileReader
{
    public static Rss GetRssDocumentData(string rssFeed)
    {
        Console.WriteLine("thread in RssFileReader: " + Thread.CurrentThread.Name);

        IFormatProvider culture = new CultureInfo("fr-FR", true);

        Rss rssDocumentObject=new Rss();
        XmlDocument documentObj = new XmlDocument();
        try
        {
            documentObj.Load(HttpClient.GetWebResponse(@rssFeed, null, null, 1200000, @"http://www.sahil.com").GetResponseStream());
        }
        catch(Exception e)
        {
            e.Source = "RssFileReader:Loading xmldocument object";
            throw;
        }
        try
        {
            XmlNodeList channelList = documentObj.GetElementsByTagName("channel");
            for (int k = 0; k < channelList.Count; k++)
            {

                rssDocumentObject.ListOfChannel.Add(new Channel());
                int noOfItemInChannel = -1;
                //XmlNodeList itemList = channelList[k].ChildNodes;
                for (int i = 0; i < channelList[k].ChildNodes.Count; i++)
                {

                    switch (channelList[k].ChildNodes[i].Name)
                    {

                        case "item":
                            noOfItemInChannel++;
                            XmlNodeList xmlChildNodeOfItem = channelList[k].ChildNodes[i].ChildNodes;
                            //debugging
                            //Console.WriteLine("Thread Name in item in RssFileReader" + Thread.CurrentThread.Name);

                            rssDocumentObject.ListOfChannel[k].ListOfItem.Add(new Item());

                            for (int j = 0; j < xmlChildNodeOfItem.Count; j++)
                            {
                                switch (xmlChildNodeOfItem[j].Name)
                                {
                                    case "title":
                                        rssDocumentObject.ListOfChannel[k].ListOfItem[noOfItemInChannel].ItemTitle.InnerText = xmlChildNodeOfItem[j].InnerText;
                                        break;
                                    case "link":
                                        rssDocumentObject.ListOfChannel[k].ListOfItem[noOfItemInChannel].ItemLink.InnerText = xmlChildNodeOfItem[j].InnerText;
                                        break;
                                    case "description":
                                        rssDocumentObject.ListOfChannel[k].ListOfItem[noOfItemInChannel].ItemDescription.InnerText = xmlChildNodeOfItem[j].InnerText;
                                        break;
                                    case "pubDate":
                                        try
                                        {
                                            string dateTimeTemp = xmlChildNodeOfItem[j].InnerText;
                                            char[] splitCharArray = new char[1];
                                            splitCharArray[0] = ' ';
                                            string[] splitedDateTimeTemp = dateTimeTemp.Split(splitCharArray);
                                            string RFC822 = "ddd,ddMMMyyyyHH:mm:ss";
                                            rssDocumentObject.ListOfChannel[k].ListOfItem[noOfItemInChannel].ItemPubDate.PublicationDate = DateTime.ParseExact(splitedDateTimeTemp[0] + splitedDateTimeTemp[1] + splitedDateTimeTemp[2] + splitedDateTimeTemp[3] + splitedDateTimeTemp[4], RFC822, DateTimeFormatInfo.InvariantInfo, DateTimeStyles.None);
                                        }
                                        //exception not rethrown default date is assigned 
                                        catch (Exception e)
                                        {
                                            //Console.WriteLine("Exception while formatting string to datetime in rssFileReader():" + e);
                                        }
                                        break;
                                    case "guid":
                                        rssDocumentObject.ListOfChannel[k].ListOfItem[noOfItemInChannel].ItemGuid.InnerText = xmlChildNodeOfItem[j].InnerText;
                                        break;

                                }
                            }
                            break;
                        case "title":
                            rssDocumentObject.ListOfChannel[k].ChannelTitle.InnerText = channelList[k].ChildNodes[i].InnerText;
                            break;
                        case "description":
                            rssDocumentObject.ListOfChannel[k].ChannelDescription.InnerText = channelList[k].ChildNodes[i].InnerText;
                            break;
                        case "link":
                            rssDocumentObject.ListOfChannel[k].ChannelLink.InnerText = channelList[k].ChildNodes[i].InnerText;
                            break;

                        case "language":
                            rssDocumentObject.ListOfChannel[k].ChannelLanguage.InnerText = channelList[k].ChildNodes[i].InnerText;
                            break;
                        case "pubDate":
                            try
                            {
                                string dateTimeTempForChannel = channelList[k].ChildNodes[i].InnerText;
                                char[] splitCharArrayForChannel = new char[1];
                                splitCharArrayForChannel[0] = ' ';
                                string[] splitedDateTimeTempForChannel = dateTimeTempForChannel.Split(splitCharArrayForChannel);
                                string formatStringForChannel = "ddd,ddMMMyyyyHH:mm:ss";
                                rssDocumentObject.ListOfChannel[k].ChannelPubDate.PublicationDate = DateTime.ParseExact(splitedDateTimeTempForChannel[0] + splitedDateTimeTempForChannel[1] + splitedDateTimeTempForChannel[2] + splitedDateTimeTempForChannel[3] + splitedDateTimeTempForChannel[4], formatStringForChannel, DateTimeFormatInfo.InvariantInfo, DateTimeStyles.None);
                            }
                            //exception not rethrown default date is assigned 
                            catch (Exception e)
                            {
                                //Console.WriteLine("Exception while formatting string to datetime in rssFileReader():" + e);

                            }
                            break;
                        case "lastBuildDate":
                            try
                            {
                                string dateTimeTempForChannel = channelList[k].ChildNodes[i].InnerText;
                                char[] splitCharArrayForChannel = new char[1];
                                splitCharArrayForChannel[0] = ' ';
                                string formatStringForChannel = "ddd,ddMMMyyyyHH:mm:ss";

                                string[] splitedDateTimeTempForChannel = dateTimeTempForChannel.Split(splitCharArrayForChannel);
                                rssDocumentObject.ListOfChannel[k].ChannelLastBuildDate.LastBldDate = DateTime.ParseExact(splitedDateTimeTempForChannel[0] + splitedDateTimeTempForChannel[1] + splitedDateTimeTempForChannel[2] + splitedDateTimeTempForChannel[3] + splitedDateTimeTempForChannel[4], formatStringForChannel, DateTimeFormatInfo.InvariantInfo, DateTimeStyles.None);
                            }
                            //exception not rethrown default date is assigned 
                            catch (Exception e)
                            {
                                //Console.WriteLine("Exception while formatting string to datetime in rssFileReader():" + e);

                            }

                            break;

                        case "docs":
                            rssDocumentObject.ListOfChannel[k].ChannelDocs.InnerText = channelList[k].ChildNodes[i].InnerText;
                            break;
                        case "generator":
                            rssDocumentObject.ListOfChannel[k].ChannelGenerator.InnerText = channelList[k].ChildNodes[i].InnerText;
                            break;
                        case "managingEditor":
                            rssDocumentObject.ListOfChannel[k].ChannelManagingEditor.InnerText = channelList[k].ChildNodes[i].InnerText;
                            break;
                        case "webMaster":
                            rssDocumentObject.ListOfChannel[k].ChannelWebMaster.InnerText = channelList[k].ChildNodes[i].InnerText;
                            break;
                        case "ttl":
                            rssDocumentObject.ListOfChannel[k].ChannelTtl.InnerText = channelList[k].ChildNodes[i].InnerText;
                            break;

                    }
                }

            }
        }
        catch(Exception e)
        {
            e.Source = "RssFileReader:Reading xml document object data to rss object";
            throw;
        }
        Console.WriteLine("    Thread out RssFilereader :" + Thread.CurrentThread.Name);
        return rssDocumentObject;
    }
} 
```

* * *

注意：-在调试时我知道加载 xml 文档需要时间。系统对 webrequest 对象的数量是否有任何限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T14:42:20.170

如果您对同一服务器使用 Web 请求，则默认情况下这些请求一次限制为两个连接。

然后，您无法处理响应和响应流，这意味着它将等到垃圾收集后释放连接以供其他地方使用。将加载代码更改为：

```
 try
    {
        // Removed unnecessary @ signs
        using (WebResponse response = HttpClient.GetWebResponse(
                  rssFeed, null, null, 1200000, "http://www.sahil.com"))
        using (Stream responseStream = response.GetResponseStream())
        {
            documentObj.Load(responseStream);
        }
    }
    catch(Exception e)
    {
        e.Source = "RssFileReader:Loading xmldocument object";
        throw;
    } 
```

您可能只需要关闭 Web 响应 - 将通过关闭响应来处理流 - 但最好确定。

您仍然只能同时使用到同一服务器的连接获得两个线程（默认情况下，对于非 ASP.NET；您可以自己使用[`ServicePointManager.DefaultConnectionLimit`](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.defaultconnectionlimit.aspx)或[`connectionManagement`配置文件元素](http://msdn.microsoft.com/en-us/library/fb6y0fyc.aspx)更改它）但至少那时您不需要在连接空闲或等待垃圾收集时等待。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T08:44:34.230

我从控制台应用程序 fr 测试运行它需要时间。花费大量时间的原因是由于调试中的 pint 语句而导致 io 阻塞。

# jquery - 如何使用 jQuery 为文本对齐动态添加样式

> ID：883180
> 
> 赞同：85
> 
> 时间：2009-05-19T14:38:20.507
> 
> 标签：jquery, css, text-align

我正在尝试纠正围绕 CSS 2.1 的常见 IE 错误，并且需要一种方法来更改元素样式属性以添加自定义文本对齐样式。

目前在 jQuery 中，您可以执行类似的操作

```
$(this).width() or $(this).height() 
```

但我似乎找不到用同样的方法改变文本对齐的好方法。

该项目已经有一个类，我在该类中设置了文本对齐，但没有运气。是否可以在定义类后仅向该元素添加 text-align CSS 属性？

我有这样的东西

```
$(this).css("text-align", "center"); 
```

就在我调整宽度之后，在我在萤火虫中查看这个之后，我看到只有“宽度”是样式上唯一设置的属性。有什么帮助吗？

**编辑：**

哇 - 对这个问题的强烈回应！关于手头问题的更多细节：

我正在调整[jqGrid](http://www.trirand.com/blog/) A3.5 的 js 源以执行一些自定义子网格工作，我正在调整的实际 JS 如下所示（抱歉在上面的示例中使用“this”，但我想保持这个简单简洁）

```
var subGridJson = function(sjxml, sbid) {
    var tbl, trdiv, tddiv, result = "", i, cur, sgmap,
    dummy = document.createElement("table");
    tbl = document.createElement("tbody");
    $(dummy).attr({ cellSpacing: "0", cellPadding: "0", border: "0" });
    trdiv = document.createElement("tr");
    for (i = 0; i < ts.p.subGridModel[0].name.length; i++) {
        tddiv = document.createElement("th");
        tddiv.className = "ui-state-default ui-th-column";
        $(tddiv).html(ts.p.subGridModel[0].name[i]);
        $(tddiv).width(ts.p.subGridModel[0].width[i]);
        trdiv.appendChild(tddiv);
    }
    tbl.appendChild(trdiv);
} 
```

我已经尝试了以下两种方法（来自提供的答案），但都没有运气。

```
$(tddiv).width(ts.p.subGridModel[0].width[i]).attr('style', 'text-align: center'); 
```

和

```
$(tddiv).width(ts.p.subGridModel[0].width[i]).css('text-align', 'center'); 
```

今天我将继续解决这个问题，并为任何对这个奇怪问题感到痛苦的人发布最终解决方案。

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2009-05-19T14:49:24.680

如文档所示，您的想法是正确的：

[http://docs.jquery.com/CSS/css#namevalue](http://docs.jquery.com/CSS/css#namevalue)

你确定你用class或id正确地识别它吗？

例如，如果您的班级是 myElementClass

```
$('.myElementClass').css('text-align','center'); 
```

另外，我有一段时间没有使用 Firebug，但是您查看的是 dom 而不是 html？javascript 不会更改您的源代码，但 dom 会更改。查看 dom 选项卡，看看是否应用了更改。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2009-05-19T14:49:57.410

您还可以尝试以下方法为元素添加内联样式：

```
$(this).attr('style', 'text-align: center'); 
```

这应该确保其他样式规则不会覆盖您认为可行的内容。我相信内联样式通常优先。

**编辑：** 另外，另一个可以帮助你的工具是 Jash ( [http://www.billyreisinger.com/jash/](http://www.billyreisinger.com/jash/) )。它为您提供了一个 javascript 命令提示符，因此您可以确保轻松测试 javascript 语句并确保您选择了正确的元素等。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-05-19T15:33:32.720

我通常使用

```
$(this).css({
    "textAlign":"center",
    "secondCSSProperty":"value" 
}); 
```

希望有帮助

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T14:50:59.403

我认为你应该使用“textAlign”而不是“text-align”。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-19T15:01:30.803

有趣的。当我写一个测试版本时，我遇到了和你一样的问题。

解决方案是利用 jquery 的能力[链](http://ejohn.org/blog/ultra-chaining-with-jquery/)和做：

```
$(this).width(500).css("text-align", "center"); 
```

不过有趣的发现。

为了扩展一点，以下**不起作用**

```
$(this).width(500);
$(this).css("text-align", "center"); 
```

并且只导致在样式上设置宽度。正如我上面建议的那样，将两者链接起来似乎确实有效。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-19T14:46:56.697

`$(this).css("text-align", "center");`应该可以工作，请确保“this”是您实际尝试设置 text-align 样式的元素。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-09T17:31:19.987

是正确的？

```
<script>
$( "#box" ).one( "click", function() {
  $( this ).css( "width", "+=200" );
});
</script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-17T05:31:08.963

```
<!DOCTYPE html>
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script>
      $( document ).ready(function() {
      $this = $('h1');
         $this.css('color','#3498db');
         $this.css('text-align','center');
         $this.css('border','1px solid #ededed');
      });
    </script>

  </head>
  <body>
      <h1>Title</h1>
 </body>
</html> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-01T07:04:02.933

```
 $(this).css({'text-align':'center'}); 
```

您可以使用类名和 id 代替它

```
$('.classname').css({'text-align':'center'}); 
```

或者

```
$('#id').css({'text-align':'center'}); 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-02-01T11:13:45.847

假设下面是 html 段落标签：

```
<p style="background-color:#ff0000">This is a paragraph.</p> 
```

我们想改变jquery中的段落颜色。

客户端代码将是：

```
<script>
$(document).ready(function(){
    $("p").css("background-color", "yellow");
});
</script> 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-04-18T04:06:11.027

函数 add_question(){ var count=document.getElementById("nofquest").value; var container = document.getElementById("container"); // 清除容器之前的内容 while (container.hasChildNodes()) { container.removeChild(container.lastChild); } for (i=1;i

如何设置文本框的中心

# c# - 处理常见的递归函数

> ID：883182
> 
> 赞同：1
> 
> 时间：2009-05-19T14:38:28.507
> 
> 标签：c#, recursion, hierarchy

我注意到在我的项目中，我们经常编写递归函数。

我的问题是：有没有办法为使用递归迭代的每个层次结构创建递归函数作为通用函数？

也许我可以使用一个委托来获取递归的根和结束标志？

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T15:05:15.083

我认为您想要的是一种以通用方式处理分层结构的方法（英语中定义的“通用”，不一定是.Net中定义的）。例如，当我需要获取 Windows 窗体中的所有控件时，这是我曾经写过的：

```
public static IEnumerable<T> SelectManyRecursive<T>(this IEnumerable<T> items, Func<T, IEnumerable<T>> selector)
{
    if (items == null)
        throw new ArgumentNullException("items");
    if (selector == null)
        throw new ArgumentNullException("selector");

    return SelectManyRecursiveInternal(items, selector);
}

private static IEnumerable<T> SelectManyRecursiveInternal<T>(this IEnumerable<T> items, Func<T, IEnumerable<T>> selector)
{
    foreach (T item in items)
    {
        yield return item;
        IEnumerable<T> subitems = selector(item);

        if (subitems != null)
        {
            foreach (T subitem in subitems.SelectManyRecursive(selector))
                yield return subitem;
        }
    }
}

// sample use, get Text from some TextBoxes in the form
var strings = form.Controls
                  .SelectManyRecursive(c => c.Controls) // all controls
                  .OfType<TextBox>() // filter by type
                  .Where(c => c.Text.StartWith("P")) // filter by text
                  .Select(c => c.Text); 
```

另一个例子：一个`Category`类，其中每个都`Category`可以有`ChildCategories`（同样的方式 a`Control`有一个`Controls`集合）并假设它`rootCategory`直接或间接地是所有类别的父类：

```
// get all categories that are enabled
var categories = from c in rootCategory.SelectManyRecursive(c => c.ChildCategories)
                 where c.Enabled
                 select c; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T15:15:46.420

> 我的问题是：有没有办法为使用递归迭代的每个层次结构创建递归函数作为通用函数？可能我可以使用获取递归的根和结束标志的委托吗？

是的 - 您唯一需要的是一个委托函数，它为每个元素计算一个子元素列表。当没有孩子返回时，该函数终止。

```
 delegate IEnumerable<TNode> ChildSelector<TNode>(TNode Root);

    static IEnumerable<TNode> Traverse<TNode>(this TNode Root, ChildSelector<TNode> Children) {
        // Visit current node (PreOrder)
        yield return Root;

        // Visit children
        foreach (var Child in Children(Root)) 
            foreach (var el in Traverse(Child, Children))
                yield return el;

    } 
```

例子：

```
 static void Main(string[] args) {

        var Init = // Some path

        var Data = Init.Traverse(Dir => Directory.GetDirectories(Dir, "*", SearchOption.TopDirectoryOnly));

        foreach (var Dir in Data)
            Console.WriteLine(Dir);

        Console.ReadKey();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T14:42:09.810

我不确定您的问题到底是什么，但递归函数可以是通用的。对此没有任何限制。例如：

```
int CountLinkedListNodes<T>(MyLinkedList<T> input) {
   if (input == null) return 0;
   return 1 + CountLinkedListNodes<T>(input.Next);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T14:55:49.457

一种更简单且通用的方法可能是缓存函数的结果并仅在结果已知时使用“真实”函数 - 这种方法的有效性取决于递归期间使用同一组参数的频率。

[如果您了解 Perl，您应该查看以电子书形式提供的Higher-Order Perl](http://hop.perl.plover.com/)的前 4 章，其中提出的想法与语言无关。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T15:03:11.377

听起来您的解决方案可以成功使用[Visitor Pattern](http://en.wikipedia.org/wiki/Visitor_pattern)。

您可以通过创建[分层访问者](http://c2.com/cgi/wiki?HierarchicalVisitorPattern)[模式来创建访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)的特定变体。

在这里完全讨论有点复杂，但这应该让你开始进行一些研究。基本思想是你有一个知道如何遍历结构的类，然后你有一个知道如何处理特定节点的访问者类。您可以将树的遍历与节点的处理分开。

# javascript - 压缩/缩小 javascript 文件的方法

> ID：883184
> 
> 赞同：8
> 
> 时间：2009-05-19T14:38:40.303
> 
> 标签：javascript, compression, minify, jscompress

### 复制：

> *   [最好的 javascript 压缩器](https://stackoverflow.com/questions/28932/best-javascript-compressor)
> *   [哪个 javascript 缩小库产生更好的结果？](https://stackoverflow.com/questions/360818/which-javascript-minification-library-produces-better-results)
> *   [减小 Javascript 和 CSS 文件大小的最佳方法是什么？](https://stackoverflow.com/questions/65491/what-is-the-best-method-to-reduce-the-size-of-my-javascript-and-css-files)

* * *

到目前为止，我已经看到了这些工具来压缩 javascript 文件

*   [打包机](http://svn.offwhite.net/trac/SmallSharpTools.Packer/wiki)
*   [JSMin](http://www.crockford.com/javascript/jsmin.html)
*   [雅虎压缩器](http://developer.yahoo.com/yui/compressor/)

在 Packer 页面上有一个“Packer vs JSMin”部分，它说 JSMin 可以比 Packer 更有效。在 Yahoo Compressor 页面上，它指出 Yahoo 压缩器比 JSMin 更有效，因此看起来 Yahoo 压缩器可能是最佳候选者。

压缩 javascript 文件的最佳选择是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T14:45:47.353

雅虎的压缩器，结合了安全性和体面的压缩。

它使用真正的 JavaScript 解析器，而不是使用一组正则表达式。它能够进行与 Packer 相同的变量重命名，但更安全。如果您忘记在函数定义的末尾添加分号，它不会中断。

Packer 确实具有生成更小的文件的编码功能。但是，它仅在您的 Web 服务器不支持 gzip 或 deflate 压缩时才有效。使用 gzip / deflate，YUI 和 Packer 生成大小相同的文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T14:41:03.980

我专门使用 YUICompressor，因为它智能地减少了删除空格并减少了内部变量，同时正确地维护了外部 refs，并且还没有破坏我的代码，而且它还使用 CSS 来启动！

之后，我们在 GZip HTTP 连接上提供服务，瞧！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T14:41:21.263

更改服务器设置以使用 gzip 压缩，然后您可以对任何文本文件、javascript、html 等进行压缩。您也不会在每个页面加载时获得使用压缩 javascript 获得的解压缩延迟。

# bluetooth - 是否有监控蓝牙串口活动的挂钩

> ID：883190
> 
> 赞同：1
> 
> 时间：2009-05-19T14:39:45.947
> 
> 标签：bluetooth, windows-ce, serial-port

是否有任何方法可以使用软件挂钩或外部蓝牙监视器通过蓝牙连接监控活动，其中蓝牙正在模拟 RS232 串行端口。

当我使用有线连接时，我可以使用内联数据示波器进行此活动，这基本上是检查 PC 和外部设备之间是否正在发生通信。该连接的特点是一端的 PC 与另一端的 Windows CE 设备通信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T15:27:16.490

Sysinternals的Portmon可以监控串口，见[http://technet.microsoft.com/en-us/sysinternals/bb896644.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896644.aspx) 大概可以监控蓝牙虚拟串口...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T07:00:38.673

[您可以使用Frontline](http://www.fte.com/products/FTS4BT-01.asp)完成蓝牙连接的空中追踪。我认为您需要能够设置默认安全性和加密才能使其正常工作。

如果您的问题出在空中接口，这是一个非常好的工具。

# java - 用于导入 Excel 电子表格的工具

> ID：883195
> 
> 赞同：1
> 
> 时间：2009-05-19T14:40:17.427
> 
> 标签：java, excel, apache-poi, castor

我需要将一些 Excel 电子表格导入 Java 对象。我将使用 POI 来完成任务（不幸的是它的旧版本）。但是我想知道是否有一些高级框架可以以声明方式执行相同的任务。我在考虑 Castor 和 XML。映射 Excel-Class 将存储在资源中（例如 XML 文件）。是的，我是个懒骨头。但是当用户决定更改输入格式时，我不喜欢有很多硬编码的 POI 语句。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T15:02:43.263

我非常喜欢[JExcelApi](http://jexcelapi.sourceforge.net/)，它简单而强大

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T14:56:17.990

有一些开源库允许您将电子表格视为数据库并通过 JDBC 访问它。谷歌搜索“excel jdbc 驱动程序”应该可以帮助您入门。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T15:22:02.570

JVM 总是附带 JDBC-ODBC 桥接器

```
import java.lang.*; 

public class jdbcodbc { 

   public static void main(String[] args) { 
    // Attempt to load database driver
    try
    {
        // Load Sun's jdbc-odbc driver
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver").newInstance();
    }
    catch (ClassNotFoundException cnfe) // driver not found
    {
        System.err.println ("Unable to load database driver");
        System.err.println ("Details : " + cnfe);
        System.exit(0);
    } 
    catch (InstantiationException ex)  
    {
        System.err.println ("Unable to load database driver");
        System.err.println ("Details : " + ex);
        System.exit(0);
    }
   } 
```

}

[Sun 网站上的文档，JDBC-ODBC 桥](http://java.sun.com/j2se/1.3/docs/guide/jdbc/getstart/bridge.doc.html)

示例 jdbc url 可能可从 Hibernate 使用，例如：

jdbc:odbc:mydb;UID=我;密码=秘密

# visual-studio-2008 - 如何在解决方案中定义 Makefile 样式的变量以用于多个项目（VS 2008）？

> ID：883205
> 
> 赞同：1
> 
> 时间：2009-05-19T14:42:46.517
> 
> 标签：visual-studio-2008, msbuild, projects-and-solutions

我正在使用具有多个 C# 项目和一些 C++ 项目的 Visual Studio 2008 解决方案，并希望使用构建后事件来执行一些第 3 方供应商命令行工具。多个项目需要这些构建后事件。

我可以硬编码命令行上需要的路径名和其他文件，但我真的更喜欢更灵活的东西。也许：

$(ToolsDir)\$(PackageBuilder) $(ThirdPartyDllFolder) $(SharedOutputFolder)

当我为 UNIX 开发并使用 makefile 执行构建时，我能够在高级 makefile 中定义一个变量并让子 makefile 继承它。通过这种方式，我可以让所有输出到一个特定的地方，或者在一个特定的地方寻找一个图书馆，等等。

是否有可以使用 Visual Studio 解决方案完成的等效操作，例如我可以定义环境变量之类的内容，然后在项目级别的构建后事件中引用它？

编辑：我现在正在使用 Windows 环境变量，但除了下载代码并构建它之外，我更喜欢不需要设置的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T14:46:24.157

您是否考虑过 Windows 中的环境变量？我知道这并不完全相同，但您可以使用批处理文件设置它们并在构建后执行该批处理文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-02-01T20:54:21.067

不久前我有一个类似的问题。我的第一个“解决方案”是创建一个工具，该工具在开发人员从存储库中获得第一个“get”时构建并运行。它不漂亮，是一个额外的步骤 - 但只有一次。

我放弃了，现在我们有了另一种方法。我们将第三方工具放在 svn 存储库（与我们的源不同的存储库）中，并且需要一个特定的层次结构和名称来说明该存储库相对于我们代码库根的位置。通过这种方式，我们可以在构建后的步骤或其他部分中自信地使用相对路径。

我同意这是 MS 构建工具的一个弱点。

# iphone - 更改 UIAlertView 的背景颜色？

> ID：883208
> 
> 赞同：38
> 
> 时间：2009-05-19T14:43:06.940
> 
> 标签：iphone, objective-c, cocoa-touch, uikit, uialertview

我想更改 UIAlertView 的背景颜色，但这似乎没有颜色属性。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-05-19T15:08:32.097

AlertView 的背景是图像，您可以更改此图像

```
UIAlertView *theAlert = [[[UIAlertView alloc] initWithTitle:@"Atention"
   message: @"YOUR MESSAGE HERE", nil)
   delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil] autorelease];

   [theAlert show];

   UILabel *theTitle = [theAlert valueForKey:@"_titleLabel"];
   [theTitle setTextColor:[UIColor redColor]];

   UILabel *theBody = [theAlert valueForKey:@"_bodyTextLabel"];
   [theBody setTextColor:[UIColor blueColor]];

   UIImage *theImage = [UIImage imageNamed:@"Background.png"];    
   theImage = [theImage stretchableImageWithLeftCapWidth:16 topCapHeight:16];
   CGSize theSize = [theAlert frame].size;

   UIGraphicsBeginImageContext(theSize);    
   [theImage drawInRect:CGRectMake(0, 0, theSize.width, theSize.height)];    
   theImage = UIGraphicsGetImageFromCurrentImageContext();    
   UIGraphicsEndImageContext();

   [[theAlert layer] setContents:[theImage CGImage]]; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-09-25T18:26:58.463

我还找到了一个几乎相同的解决方法，就我而言，它效果更好。使用 oxigen 出路我发现屏幕上的结果很差，并且上下文变得模糊。而不是子类化 UIAlertView 我实现：

```
- (void)willPresentAlertView:(UIAlertView *)alertView; 
```

所以...只需复制和粘贴

```
- (void)willPresentAlertView:(UIAlertView *)alertView 
{
    blah blah blah...
    [[alertView layer] setContents:(id)theImage.CGImage];  // to avoid the warning
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2010-01-08T13:52:16.813

我最近需要这个并最终继承了 UIAlertView。这是任何有兴趣的人的代码。

[http://kwigbo.com/post/318396305/iphone-sdk-custom-uialertview-background-color](http://kwigbo.com/post/318396305/iphone-sdk-custom-uialertview-background-color)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2011-12-28T10:08:56.033

好吧，我以不同的方式解决了这个问题。我搜索了包含背景图像的 UIImageView 并更改了图像。

......好吧，展示可能不是改变视图的最佳解决方案......

```
@implementation CustomAlertView

- (void)show {
    [super show];

    for (UIView *view in self.subviews) {
        NSLog(@"%@ with %i children", view, [view.subviews count]);
        // change the background image
        if ([view isKindOfClass:[UIImageView class]]) {
            UIImage *theImage = [UIImage imageNamed:@"password entry bg - default.png"];    
            ((UIImageView *)view).image = [theImage resizableImageWithCapInsets:UIEdgeInsetsMake(49, 8, 8, 8)];
        }
    }
}

@end 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-02-23T06:42:45.420

这是一个更新的解决方案，它利用了块并以 TweetBot 为模型：

[https://github.com/Arrived/BlockAlertsAnd-ActionSheets](https://github.com/Arrived/BlockAlertsAnd-ActionSheets)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-01-24T18:40:51.397

这不是可能的事情。

要么您需要创建自己的警报类型视图（包括提供动画等），要么使用 Apple 提供的默认 UIAlertView。

Apple 倾向于不公开诸如 UIAlertView 的颜色之类的东西，以便 UI 在所有应用程序中具有共同的感觉。将颜色从应用程序更改为应用程序会使用户感到困惑。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-12-14T13:02:28.617

将 QuartzCore 框架添加到应用程序并在源文件中包含 #import "QuartzCore/CALayer.h"。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-20T20:45:56.700

我最近发现了 GRAlertView，它允许您以至少我喜欢的简单方式定制 UIAlertView。你在这里找到它：[https ://github.com/goncz9/GRAlertView](https://github.com/goncz9/GRAlertView)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-04-23T12:34:02.013

你必须使用这个：

```
UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"You are Select Row of" message:@"Human" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        alert.backgroundColor=[UIColor redColor];
        [alert show];
        [alert release]; 
```

它会改变 UIAlertView 的背景颜色。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-02-07T09:22:30.343

这对我来说似乎是最强大的解决方案

[http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-uialertview-custom-graphics/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-uialertview-custom-graphics/)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-02-20T07:29:25.100

只需使用此代码，

```
 UIImage *theImage = [UIImage imageNamed:@"imageName.png"];
 UIView *view=[alert valueForKey:@"_backgroundImageView"];
 //Set frame according to adustable
  UIImageView *image=[[UIImageView alloc] initWithImage:theImage];
 [image setFrame:CGRectMake(0, 0, 280, 130)];
 [view addSubview:image]; 
```

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2009-01-24T17:09:53.813

我不相信有这样做的公开方法或属性。设置 UIAlertView 的 backgroundColor（作为 UIView）只是在警报视图后面放置一个彩色矩形背景。

我会说它可能会违背 iPhone 的通用界面来改变这种颜色，所以我不认为这是推荐的行为（就像在 Mac OS X 中改变警报视图的背景颜色一样推荐的）。

# wpf - 从 WPF 主题中隔离触发器

> ID：883210
> 
> 赞同：0
> 
> 时间：2009-05-19T14:43:31.773
> 
> 标签：wpf, triggers, themes

你好，

我正在使用 Codeplex.com 中发布的 WPF 主题库。一切正常。应用了使用的主题。但是当我需要为按钮控件（尤其是触发器）创建样式并将其与按钮关联时，就会出现问题。发生的情况是主题不会单独应用于该按钮，因为我应用了不同的样式。

我该如何处理？

-兰吉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T15:19:03.450

这个问题在这里被“打死”[了](https://stackoverflow.com/questions/16096/how-to-apply-multiple-styles-in-wpf)。

# python - 从 python 调用 python - 模块导入的持久性？

> ID：883211
> 
> 赞同：2
> 
> 时间：2009-05-19T14:43:39.137
> 
> 标签：python, import, module

所以我有一些 Python 脚本，并且我有一个 BaseHTTPServer 来提供他们的响应。如果请求的文件是 .py，那么我将使用 execfile(script.py) 运行该脚本。

问题是：关于进口有什么特殊规定吗？一个脚本只需要运行一次，最好在请求之间保持它创建的对象处于活动状态。我可以相信这会发生吗？

通过 execfile() 运行的脚本是否以不同方式运行，或者有任何范围访问问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T15:30:16.250

execfile 方法的文档在[这里](http://docs.python.org/library/functions.html)。由于没有指定特定版本的 python，我假设我们谈论的是 2.6.2。

execfile 的文档指定它需要三个参数：文件名、字典（充当局部变量）和第二个字典（充当全局变量）。如果省略第二个和第三个参数，文件的内容将在它们自己的范围（如模块）中运行，该范围捕获局部变量，但将全局变量暴露给父范围。所以如果文件创建了局部变量，它们不会被保留，但全局变量会被保留。

但是，在没有指定本地和全局上下文的情况下运行 execfile 意味着该文件会看到调用函数的局部变量和全局变量。对于您不信任的代码，这应该被视为安全漏洞。通常明智的做法是为本地和全局创建两个字典，并将它们作为第二个和第三个参数传递给 execfile。如果您将这些字典保存在某个地方（例如在另一个由文件名键入的字典中），那么您可以在下次提供文件时重新使用这些字典，这将使文件创建的对象保持活动状态。

简而言之：execfile 并不完全像 import。但是您可以保留局部变量和全局变量的字典，以保留 execfile 调用的结果以供再次使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T15:31:04.940

I recommend not using `execfile`. Instead, you can dynamically import the python file they request as a module using the builtin `__import__` function. Here's a complete, working example that I just wrote and tested:

```
from BaseHTTPServer import BaseHTTPRequestHandler, HTTPServer

class Handler(BaseHTTPRequestHandler):
    def do_GET(self):
        self.send_response(200)
        self.send_header("Content-type", "text/plain")
        self.end_headers()

        filename = self.path.lstrip("/")
        self.wfile.write("You requested " + filename + "\n\n")
        if filename.endswith(".py"):
            pyname = filename.replace("/", ".")[:-3]
            module = __import__(pyname)
            self.wfile.write( module.do_work() )

HTTPServer(("",8080), Handler).serve_forever() 
```

So in this case, if someone visits [http://localhost:8080/some_page](http://localhost:8080/some_page) then "You requested some_page" will be printed.

But if you request [http://localhost:8080/some_module.py](http://localhost:8080/some_module.py) then the file `some_module.py` will be imported as a Python module and the `do_work` function in that module will be called. So if that module contains the code

```
def do_work():
    return "Hello World!" 
```

and you make that request, then the resulting page will be

```
You requested some_module.py

Hello World! 
```

This should be a good starting point for dealing with such things. As an aside, if you find yourself wanting a more advanced web server, I highly recommend [CherryPy](http://cherrypy.org/).

# java - BIRT：Java - 事件处理程序，文件位置

> ID：883223
> 
> 赞同：1
> 
> 时间：2009-05-19T14:44:59.040
> 
> 标签：java, eclipse, reporting, birt

我想通过 java 类为我的报告实现事件处理......我必须把文件放在哪里？我需要 .class 文件还是 .jar 文件？

BIRT 2.1.3，RCP - 设计师

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T04:41:47.827

它在[BIRT FAQ](http://wiki.eclipse.org/BIRT/FAQ/JavaEventHandlers)中有介绍。

# php - 在 Mac OS X 服务器上为 MySQL 安装 PDO 扩展

> ID：883224
> 
> 赞同：1
> 
> 时间：2009-05-19T14:45:07.323
> 
> 标签：php, mysql, pdo

我想尽可能将 PHP / MySQL 组合保持为“普通”，但想为 MySQL 安装 PDO 驱动程序。我怎样才能在 10.5 上做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-14T11:30:07.600

我遇到了同样的问题，被迫从[entropy.ch](http://www.entropy.ch)安装不同版本的 PHP 。我仍然在使用 php CLI 时遇到了一些问题，但除此之外它工作正常。

或者，您可能想看看[MAMP](http://www.mamp.info/en/index.html)。

希望有帮助，

罗斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-05T17:12:38.097

您可以[单独编译扩展](http://blog.elance.at/2009/09/15/adding_php_extensions_under_mac_os_x_10_6.html)并在 php.ini 文件中简单地链接到它们。其实很容易做到。

# .net - 基类中的事件

> ID：883231
> 
> 赞同：3
> 
> 时间：2009-05-19T14:45:52.223
> 
> 标签：.net, vb.net, events, derived-class

好的，所以我有一个声明 event 的基类`StatusTextChanged`。我的孩子班，当然不能直接提出这个事件。

所以我结束了这样的事情（为了简单起见）：

```
Public MustInherit Class FooBase
    Public Event StatusTextChanged(ByVal StatusText As String)
    Protected Sub RaiseStatusTextChangedEvent(ByVal StatusText As String)
        RaiseEvent StatusTextChanged(StatusText)
    End Sub
End Class 
```

然后在我调用的子类中 `MyBase.RaiseStatusTextChangedEvent("something")`。有没有更好或更推荐的方法来做到这一点？

编辑：VB.NET 或 C#，无论哪种方式，它的工作原理基本相同。

编辑：所以在响应之后，我在基类中，然后只需在子类中设置 StatusText 属性......

```
 Public Event StatusTextChanged(ByVal StatusText As String)
    Private _StatusText As String = "Idle."
    Public Property StatusText() As String
        Get
            Return _StatusText
        End Get
        Protected Set(ByVal value As String)
            RaiseEvent StatusTextChanged(value)
        End Set
    End Property 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T14:55:43.543

我会说您非常接近推荐的方式（或者至少是我推荐的方式）。

如果可以选择，我会对您的代码进行一些更改：

*   使 StatusTextChanged`Protected Overridable`
*   在自定义 EventArgs 类中包装 StatusText
*   将 StatusTextChanged 声明更改为`Public Event StatusTextChanged As EventHandler(Of YourCustomEventArgs)`

结果代码：

自定义 eventargs 类：

```
Public Class TextEventArgs
    Inherits EventArgs

    Private _text As String

    Public Sub New(ByVal text As String)
        _text = text
    End Sub

    Public ReadOnly Property Text() As String
        Get
            Return _text
        End Get
    End Property

End Class 
```

基类中的事件实现：

```
Public Event StatusTextChanged As EventHandler(Of TextEventArgs)
Protected Overridable Sub OnStatusTextChanged(ByVal e As TextEventArgs)
    RaiseEvent StatusTextChanged(Me, e)
End Sub 
```

...最后是引发事件的代码行；在基类或继承它的类中：

```
OnStatusTextChanged(New TextEventArgs("some text")) 
```

这将更符合在 .NET 框架的其余部分中设计事件的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T14:47:55.057

除非您的子类特别需要覆盖基类方法，否则我会说调用基类实现绝对是最好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T14:50:35.240

对于此类场景，这几乎是通过派生类在基类上引发事件的标准方法。

但是，这可能会有所改变，具体取决于谁控制了层次结构的 StatusText。如果 FooBase 中有一个只能通过访问器更改的具体 StatusText 支持字段，那么我不会让孩子控制 StatusTextChanged 事件的引发。相反，我会强制在 StatusText 属性的 Setter 中引发事件。这给了父类更多的控制权来执行它想要的关于何时和何时不引发所述事件的任何合同。

但是，如果 StatusText 是必须由派生类定义的属性，我会选择您显示的路线。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T15:05:28.627

您可以选择的一种选择是将 Status 属性包装在基类中，以便它在更改中引发事件本身（在 C# 中，因为不知道 VB 并且目前无法访问 Visual Studio）

```
private string _status;

public string Status
{
    get { return _status; }
    protected set
    {
        if (_status == value) return;
        _status = value;
        StatusChanged(value);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T12:32:04.060

这是我的带有委托和状态文本参数的事件的代码

```
作为 StatusEventHandler 的公共事件状态

Protected Overridable Sub OnStatus(ByVal e As StatusEventArgs)
    RaiseEvent 状态（我，e）
结束子

Public Delegate Sub StatusEventHandler(ByVal sender As Object, _
   ByVal e 作为 StatusEventArgs)

<System.Serializable()> _
公共类 StatusEventArgs
    继承 System.EventArgs

    公共子新（）
    结束子

    Public Sub New(ByVal statusText As String)
        _StatusText = 状态文本
    结束子

    ' 在此处输入事件属性等的代码。

    Private _StatusText As String = ""
    公共属性 StatusText() 作为字符串
        得到
            返回 _StatusText
        结束获取
        设置（ByVal 值作为字符串）
            _StatusText = 值
        结束集
    结束属性

结束类

```

# javascript - 使用 IIS httpCompression 时压缩 javascript/css 文件的好处

> ID：883241
> 
> 赞同：2
> 
> 时间：2009-05-19T14:47:59.613
> 
> 标签：javascript, iis, compression, minify, http-compression

看起来[IIS httpCompression](http://www.iis.net/ConfigReference/system.webServer/httpCompression)压缩了您的文件。如果这种压缩已经到位，那么使用 Packer、JSMin 或 Yahoo Compressor 等压缩工具压缩文件的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T14:56:25.930

您提到的工具是缩小器，而不是压缩。

尝试“压缩”您的普通和缩小的 javascript 文件，然后查看它们的大小。您可能会发现它更小，您可能会发现它没有区别。

您将获得的一个好处是不支持压缩的代理浏览器仍将受益于缩小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T14:53:01.257

原因是，或者曾经是，某些浏览器不支持 gzip 的 HTTP 传输或存在错误。我们在这里谈论的是 NS4 和早期的 IE，因此除非您无法控制您的网络服务器（第 3 方托管），否则原因不再存在。

# javascript - JSON.parse() 是否需要双引号？

> ID：883243
> 
> 赞同：17
> 
> 时间：2009-05-19T14:48:35.133
> 
> 标签：javascript, json, firefox

我正在使用 Firefox 3.5b4。

这会提醒 [object Object],[object Object]：

```
var jsonString = '[{"foo": "one", "bar": 1}, {"foo": "two", "bar": 2}]';
var jsonObjects = JSON.parse(jsonString);
alert(jsonObjects); 
```

这会警告一个空字符串，即 jsonObjects 为空。

```
var jsonString = "[{'foo': '1', 'bar': 2}, {'foo': '3', 'bar': 4}]";
var jsonObjects = JSON.parse(jsonString);
alert(jsonObjects); 
```

同样对于未加引号的属性名称，即 {foo: '1', bar: 2}。

这是怎么回事？我是否遗漏了一些明显的东西，或者是否有关于使用 JSON.parse 进行双引号和单引号的规则？所有三个版本都可以与 eval 一起使用。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-05-19T14:55:48.880

JSON 标准要求使用双引号。

请记住，JSON 不仅仅是“编写一个 JS 对象”。这是一个非常严格的语法，恰好也可以作为 JS 对象读取。不是每个 JS 有效的语法都是有效的 JSON。实际上，您的示例并不是真正有效的 JSON，因为它是一个对象数组，而标准指定顶部构造必须是一个对象。

当然，大多数 JSON 解析器更灵活，允许使用非标准选项（如单引号）；但不要依赖于此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T14:59:29.090

补充一下 Javier 所说的，JSON 限制格式主要是出于安全原因（因此无法调用函数等）。如果您不关心安全性，请使用 javascript 的“eval()”函数将字符串转换为对象。

# asp.net-mvc - ASP MVC 区域和 ActionLink

> ID：883244
> 
> 赞同：13
> 
> 时间：2009-05-19T14:49:04.960
> 
> 标签：asp.net-mvc, asp.net-mvc-areas

我正在做一个新项目，我想使用 Phil Haack Areas (1) 想法 + Steve Sanderson 的调整 (2)。我有一个简单的根视图，其中包含指向视图区域（Foo）的操作链接。生成的 URL 具有适当的区域，但它在末尾附加了根控制器 (Bar)。这是我的根视图代码：

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<h2>Index</h2>

<%= Html.ActionLink("Foo Index Page", "Index", new { area="Foo" } )%>

</asp:Content> 
```

这是它生成的 URL：

本地主机:6494/Foo/Bar

知道为什么“/Bar”在那里吗？

(1): [haacked.com/archive/2008/11/04/areas-in-aspnetmvc.aspx](http://haacked.com/archive/2008/11/04/areas-in-aspnetmvc.aspx)

(2): [blog.codeville.net/2008/11/05/app-areas-in-aspnet-mvc-take-2/](http://blog.codeville.net/2008/11/05/app-areas-in-aspnet-mvc-take-2/)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-19T15:43:54.073

我找到了解决方案。我认为这不合适，所以我会要求改进。通过指定控制器名称，我可以获得正确形成的 URL。IE

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<h2>Index</h2>

<%= Html.ActionLink("Foo Index Page", "Index", new { area="Foo", controller="Baz" } )%>

</asp:Content> 
```

一旦我这样做了，那么 URL 是正确的

本地主机：6494/Foo

为什么这是个问题？Phil 的演示使用名为 HomeController 的控制器。我不知道（因为我无法追踪） Html.ActionLink() 方法是如何构建 URL 的；但它看起来好像依赖于 HomeController 存在的默认情况，而我没有。

如果有人对如何允许未命名为 Home 的控制器作为默认控制器有任何建议，请回复。谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T15:52:23.027

要不`Home`使用默认控制器名称，只需[更改默认路由](https://stackoverflow.com/questions/849624/asp-net-actionresult-parameter-is-coming-back-null-always-when-passing-string/849666#849666)即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T17:30:05.620

@乔

在您的 App_Start/RouteConfig.cs 文件中，您必须将默认控制器的值从 Home 更改为您喜欢的任何值：

```
routes.MapRoute(
            "Default",                                              // Route name
            "{controller}/{action}/{id}",                           // URL with parameters
            new { controller = "NAME_OF_YOUR_HOME_CONTROLLER", action = "Index", id = "" }  // Parameter defaults
        ); 
```

# .net - 更改文件时如何让 ASP.NET 重新启动？

> ID：883245
> 
> 赞同：3
> 
> 时间：2009-05-19T14:49:17.270
> 
> 标签：.net, asp.net, configuration

我有一个 ASP.NET 应用程序，它是更大系统的一部分；它从 Web 应用程序根级别以上的文件中读取其大部分配置。

由于已经编写了应用程序并且选择了配置文件的格式以方便客户编辑，因此我无法使用[“.NET 中的共享配置文件”中的解决方案。](https://stackoverflow.com/questions/820811/shared-configuration-files-in-net)

我希望 ASP.NET 有一个 API，我可以在启动时调用它来告诉它要观看哪个文件。（我可以使用“FileSystemWatcher”以艰难的方式编写此代码并捕获事件然后自己重​​新启动，但是这将是一个遗憾，因为 ASP.NET 已经有代码来监视文件并在文件更改时重新启动。）

另外，我应该调用什么 ASP.NET API 来让 ASP.NET 以一种不错的方式重新启动？

这些是我发现的一些可能有帮助的链接： [Using the FileSystemWatcher from ASP.NET](http://aspadvice.com/blogs/ericm/archive/2005/08/05/2706.aspx) and [Extending FileSystemWatcher to ASP.NET](http://www.vsj.co.uk/dotnet/display.asp?id=381)

* * *

在一种情况下，我将配置缓存在 ASP.NET 缓存中，并将 CacheDependency 设置为文件。在另一种需要更快访问的情况下，我使用了 FileSystemWatcher 并在配置更改时更新了一个静态字段。

（我从来没有发现如何以合理的方式从代码中重新启动 ASP.NET。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2011-10-06T19:16:18.693

```
 static FileSystemWatcher ConfigWatcher;

  static void StartWatchConfig() {

     ConfigWatcher = new FileSystemWatcher("configPath") {
        Filter = "configFile"
     };

     ConfigWatcher.Changed += new FileSystemEventHandler(ConfigWatcher_Changed);
     ConfigWatcher.EnableRaisingEvents = true;
  }

  static void ConfigWatcher_Changed(object sender, FileSystemEventArgs e) {
     HttpRuntime.UnloadAppDomain();
  } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-19T15:19:40.767

如果您知道您的应用永远不会访问 HttpContext 之外的配置，请考虑缓存您的配置并将[CacheDependency](http://msdn.microsoft.com/en-us/library/system.web.caching.cachedependency.aspx)添加到文件中。如果文件更改，您的缓存配置将被删除，您可以使用更新的值重新添加它。

就像是：

```
public MyConfigObj GetConfig()
{
    var config = Cache["configkey"] as MyConfigObj;
    if(config == null)
    {
        var configPath = Server.MapPath("myconfigpath");
        config = GetConfigFromFile(configPath);
        Cache.Insert("configkey", config, new CacheDependency(configPath));
    }
    return config;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-08-27T09:06:57.663

对于第二部分，您可以使用以下代码来触发 AppPool 回收（这与重新启动 IIS 相同，仅在应用程序级别而不是整个服务器上）。

```
using System.DirectoryServices;

public void RecycleAppPool(string machine, string appPoolName) 
{
    string path = "IIS://" + machine + "/W3SVC/AppPools/" + appPoolName;
    DirectoryEntry w3svc = new DirectoryEntry(path);
    w3svc.Invoke("Recycle", null);
} 
```

（从[这里](http://chrison.net/RecyclingIISApplicationPoolsProgrammatically.aspx)）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-19T15:18:01.407

我认为您将需要创建一个使用 FileSystemWatcher 的服务来监视对 Web 应用程序目录之外的配置文件的更改——然后当检测到更改时，对 Web 应用程序的 web.config 进行非重大更改文件并保存，这将重新启动应用程序。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-20T04:30:04.727

可能是愚蠢的答案，但是您始终可以“触摸”（添加一些空格或其他内容）您的 web.config 文件，这将触发重新启动。这是穷人的 iisreset =)

（我想再次强调，这不是一般重启网站或重置 IIS 的理想解决方案）

# data-binding - MVVM 单选按钮

> ID：883246
> 
> 赞同：40
> 
> 时间：2009-05-19T14:49:21.933
> 
> 标签：data-binding, mvvm

有人请帮忙。我有一个有趣的问题。我正在尝试实现一个 MVVM 应用程序，并且我想在我的视图中绑定到单选按钮。

这是我的看法：

```
<StackPanel Orientation="Horizontal" Grid.ColumnSpan="2"  >
    <RadioButton GroupName="1" IsChecked="{Binding Path=NoteGeneral, Mode=TwoWay}">General</RadioButton>
    <RadioButton GroupName="1" IsChecked="{Binding Path=NoteContact, Mode=TwoWay}" >Contact</RadioButton>
    <RadioButton GroupName="1" IsChecked="{Binding Path=NoteAddress, Mode=TwoWay}" >Address</RadioButton>
    <RadioButton GroupName="1" IsChecked="{Binding Path=NotePhone, Mode=TwoWay}" >Phone</RadioButton>
</StackPanel> 
```

这是我的视图模型：

```
 bool _NoteGeneral;
    public bool NoteGeneral
    {
        get { return _NoteGeneral; }
        set
        {
            _NoteGeneral = value;
            OnPropertyChanged("NoteGeneral");
        }
    }

    bool _NoteContact;
    public bool NoteContact
    {
        get { return _NoteContact; }
        set
        {
            _NoteContact = value;
            OnPropertyChanged("NoteContact");
        }
    }

    bool _NoteAddress;
    public bool NoteAddress
    {
        get { return _NoteAddress; }
        set
        {
            _NoteAddress = value;
            OnPropertyChanged("NoteAddress");
        }
    }

    bool _NotePhone;
    public bool NotePhone
    {
        get { return _NotePhone; }
        set
        {
            _NotePhone = value;
            OnPropertyChanged("NotePhone");
        }
    } 
```

问题是这样的，当我单击不同的单选按钮时，属性设置器只会在第一次被调用（当我通过调试运行时）。例如，当我再次单击 NoteGeneral、NoteContact 和 NoteGeneral 时，只有前两次单击会更新我的视图模型。我想我的绑定可能有问题，或者我正在以完全错误的方式处理这个问题。

任何人都可以帮忙吗？

我应该如何在我的视图模型中实现单选按钮选择？

## .NET 4 及更高版本

当 .NET 4 发布时，Microsoft 解决了 RadioButton 绑定的这个问题。RadioButtons 的绑定现在可以按您预期的方式工作，而无需下面列出的任何解决方法。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-19T15:07:33.613

看看[这里](http://blogs.msdn.com/mthalman/archive/2008/09/04/wpf-data-binding-with-radiobutton.aspx)。

我还没有实施提供的解决方案，但它是有道理的。执行单击时，底层框架控件会破坏您的绑定。解决方案是覆盖执行此操作的方法并仅依赖绑定。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-10-01T22:00:14.243

[Jaime Rodriguez](http://blogs.msdn.com/jaimer/default.aspx)在 Microsoft 从事 WPF 工作，发表了一篇关于 WPF 的完整问答，最新一期有一篇关于 RadioButtons 和 MVVM 的帖子！

该帖子位于[http://blogs.msdn.com/jaimer/archive/2009/09/22/wpf-discussion-090922.aspx](http://blogs.msdn.com/jaimer/archive/2009/09/22/wpf-discussion-090922.aspx)，您想查看该帖子中的最后一项。我测试了这个解决方案，它的效果令我满意。

为方便起见引用：

> 我已经在 .NET 3.5 SP1 中解决了这个问题。以下是我如何将一组单选按钮数据绑定到枚举值属性：

```
<StackPanel>
    <RadioButton Content="New folder"
        IsChecked="{Binding Path=PublishTarget,
                    Converter={StaticResource equalityConverter},
                    ConverterParameter={x:Static local:PublishTarget.NewServerFolder}, Mode=TwoWay}"
        GroupName="1" />

    <RadioButton Content="Existing folder"
        IsChecked="{Binding Path=PublishTarget,
                    Converter={StaticResource equalityConverter},
                    ConverterParameter={x:Static local:PublishTarget.ExistingServerFolder},
                    Mode=TwoWay}"
        GroupName="2" />

    <RadioButton Content="Local folder"
        IsChecked="{Binding Path=PublishTarget,
                    Converter={StaticResource equalityConverter},
                    ConverterParameter={x:Static local:PublishTarget.LocalFolder},
                    Mode=TwoWay}"
        GroupName="3" />
</StackPanel> 
```

> 将每个单选按钮的 GroupName 设置为唯一值可防止在用户单击单选按钮时绑定被破坏。这里我依靠数据源来实现 INotifyPropertyChanged，它将告诉其他单选按钮进行更新。类似的方法应该适用于 ItemsControl 中的单选按钮。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-09-26T07:02:42.193

我已经在我的博客上为这个问题写[了一个简单的提示。](http://www.ryeol.com/27)

在这种情况下，您应该将 View 和 ViewModel 编写如下：

```
<StackPanel Orientation="Horizontal" Grid.ColumnSpan="2">
    <RadioButton IsChecked="{Binding IsGeneralNote}">General</RadioButton>
    <RadioButton IsChecked="{Binding IsContactNote}">Contact</RadioButton>
    <RadioButton IsChecked="{Binding IsAddressNote}">Address</RadioButton>
    <RadioButton IsChecked="{Binding IsPhoneNote}">Phone</RadioButton>
</StackPanel> 
```

```
public enum Note
{
    General,
    Contact,
    Address,
    Phone,
}

...

    Note note = Note.General;

    public Note Note
    {
        get { return this.note; }
        set
        {
            if (this.note == value)
                return;

            this.note = value;
            OnPropertyChanged("Note");
            OnPropertyChanged("IsGeneralNote");
            OnPropertyChanged("IsContactNote");
            OnPropertyChanged("IsAddressNote");
            OnPropertyChanged("IsPhoneNote");
        }
    }

    public bool IsGeneralNote
    {
        get { return Note == Note.General; }
        set { Note = value ? Note.General : Note; }
    }

    public bool IsContactNote
    {
        get { return Note == Note.Contact; }
        set { Note = value ? Note.Contact : Note; }
    }

    public bool IsAddressNote
    {
        get { return Note == Note.Address; }
        set { Note = value ? Note.Address : Note; }
    }

    public bool IsPhoneNote
    {
        get { return Note == Note.Phone; }
        set { Note = value ? Note.Phone : Note; }
    }
... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-19T06:23:36.563

您必须设置`UpdateSourceTrigger="PropertyChanged"`XAML 绑定，例如：

```
<StackPanel Grid.Column="1" Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center">
    <RadioButton Name="rdbTimeFormat12" GroupName="TimeFormat" Content="12 Hrs" IsChecked="{Binding Radio1IsCheck,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"/>
    <RadioButton Name="rdbTimeFormat24" GroupName="TimeFormat" Margin="40,0,0,0" Content="24 Hrs" IsChecked="{Binding Radio2IsCheck,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"/>
</StackPanel> 
```

# c++ - 在 C++ 中集成 swf

> ID：883250
> 
> 赞同：4
> 
> 时间：2009-05-19T14:49:35.710
> 
> 标签：c++, flash

有没有办法制作包含 .swf 的 c++ gui 应用程序？

swf 文件非常小，并且比 gif 或其他类型的动画更容易制作，因此能够包含它们会很好。

图书馆的一些建议，免费甚至开源......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T15:22:23.647

不是免费或开源的，但[Scaleform GFx](https://www.scaleform.com/products/gfx)是一个商业的跨平台 Flash 播放器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T15:07:14.177

您可以在您的应用程序中托管 Flash 播放器本身。你只需要实现你选择的插件架构的 webbrowser 端。您有两个选择，Netscape 风格的插件和 ActiveX。如果您只想在 Windows 上运行，将其作为 ActiveX 控件托管非常简单。如果你想跨平台运行，你必须实现浏览器端的 NPAPI 插件的东西，这实际上是相当复杂的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-19T20:44:00.497

**[这家伙的](http://www.princeofcode.com)[Awesomium](http://princeofcode.com/awesomium.php)和其他网站正是您所需要的。**

*   解释 html/javascript/css - 通过 Chromium - Google 的 Chrome 网络浏览器的基础。
*   **播放 Flash 内容**
*   C++
*   自由的
*   开源的
*   惊人的

它从网页内容（html/javascript/css + flash!）**生成纹理**（2D 图像）。然后你可以在[这个演示](http://www.youtube.com/watch?v=wT1UR6qEgdg)中随意使用。在此视频中，您可以看到 Youtube 显示在用于 3D 四边形网格的纹理上。您也可以下载演示。

有些人正在使用它来替换他们的 GUI 系统。也见 AkaRUI。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T15:05:12.603

所以......我不是一个 c++ 人，但我是一个 flash / flex 人，我曾在完成此任务的项目的 flash 方面工作。

我想你可能会发现这个： [http ://www.rohitab.com/discuss/lofiversion/index.php/t29239.html](http://www.rohitab.com/discuss/lofiversion/index.php/t29239.html)

也许这有帮助： http: [//www.codeproject.com/KB/cpp/FlashGui.aspx](http://www.codeproject.com/KB/cpp/FlashGui.aspx)

您应该能够很好地与 swf 进行交互，并且您将使用 ExternalInterface 与它们进行通信。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T14:52:57.387

我听说过一个名为 swiff 的库，它用于战地 2 菜单，但它不是开源的 afaik。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-19T15:01:46.730

是的，有：[SWFDEC](http://swfdec.freedesktop.org) 我几年前用过。我在处理交互式 SWF 时遇到了一些问题，但是我不确定这是由于我还是由于图书馆。无论如何，swfdec 声称现在支持 Youtube 视频。所以我确信它可以处理简单的动画。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-19T15:15:53.160

我知道这并不能回答您最初的问题，即在 C/C++ 程序中使用 swf，但您可以使用 adobe labs 的炼金术在 flex/air 应用程序中使用 c/c++。

来自网站“C/C++ 代码被编译为 ActionScript 3.0，作为在 Adob​​e Flash Player 10 或 Adob​​e AIR 1.5 上运行的 SWF 或 SWC。”

[http://labs.adobe.com/technologies/alchemy/](http://labs.adobe.com/technologies/alchemy/)

# asp.net-mvc - ASP.NET MVC：部署问题

> ID：883252
> 
> 赞同：0
> 
> 时间：2009-05-19T14:50:30.263
> 
> 标签：asp.net-mvc, deployment, medium-trust

我创建了一个在我的机器上运行良好的 ASP.NET MVC 1.0 应用程序（在 vs 2008 Web 服务器中运行）。但是，当我将它部署到我的虚拟主机（以中等信任度运行）时，我在第一次点击时得到以下异常：找不到文件或依赖系统，版本 1.0.9.0。查看堆栈跟踪，我看到了目标调用异常，方法不允许异常（抱歉我没有保留原始异常详细信息）。我的虚拟主机将我的信任级别切换为完全信任并开始工作。

我认为 ASP.Net MVC 1.0 应该在中等信任下工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T15:05:24.537

ASP.Net MVC 确实应该在中等信任下运行，它之前已经在 SO 上讨论过 - 例如[，ASP.NET MVC 框架需要什么应用程序信任级别？](https://stackoverflow.com/questions/791488/what-application-trust-level-is-need-for-asp-net-mvc-framework)

显然，您的应用程序正在做一些在中等信任度下不满意的事情，您能否重现并提供有关异常的更多详细信息？

# winforms - NSIS中不可见的表单字段？

> ID：883257
> 
> 赞同：0
> 
> 时间：2009-05-19T14:51:27.220
> 
> 标签：winforms, installation, nsis, nsdialogs

是否可以在 NSIS 安装程序中创建不可见的表单字段？我正在使用 nsDialogs，目前有一个复选框，可以通过以下方式将某些字段从只读/非只读切换为：

```
SendMessage $TextBox1 ${EM_SETREADONLY} 1 0 
```

我想让这个控件可见/不可见。这可能吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T15:24:02.877

显示窗口 $handle <0|1>

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-08-05T06:03:10.407

我遇到了类似的问题，最终将一个字段设置为离开页面以使其“不可见”。我不是专家，但它似乎对我有用：

```
WriteIniStr $PLUGINSDIR\Directories.ini "Field 4" "Left"  "500"
WriteIniStr $PLUGINSDIR\Directories.ini "Field 4" "Right"  "500" 
```

当然，您需要将其设置回其原始位置以使其再次“可见”。

# c# - DeploymentItem 属性的问题

> ID：883270
> 
> 赞同：97
> 
> 时间：2009-05-19T14:55:24.370
> 
> 标签：c#, visual-studio, unit-testing, mstest, deploymentitem

我目前正在维护一个用 C#.net 编写的“旧”系统，删除了一些过时的功能并进行了一些重构。感谢上帝，前面的人写了一些单元测试（MSTests）。我对 JUnit 测试很满意，但对 MSTests 还没有做太多。

测试方法有一个`DeploymentItem`属性，指定一个文本文件，该文件由正在测试的业务逻辑方法解析，第二个属性`DeploymentItem`只指定了一个路径，其中包含必须部署的一堆 TIF 文件。

```
[TestMethod()]
[DeploymentItem(@"files\valid\valid_entries.txt")]
[DeploymentItem(@"files\tif\")]
public void ExistsTifTest()
{
   ...
} 
```

测试之前工作，但现在我必须更改包含在 \files\tif 目录中的 TIF 文件的名称。根据规则，TIF 文件名必须与该`ExistsTifTest()`方法也检查的特定模式匹配。现在我不得不更改文件名以使它们适应新的要求，并且突然之间不再像以前那样部署 TIF 文件。

有人可以告诉我为什么会发生这种情况或可能是什么原因吗？如果我在 \files\valid\ 目录中的“valid_entries.txt”旁边添加一个新的文本文件“my2ndTest.txt”，并在测试方法上使用相应的 DeploymentItem 属性，也会发生同样的事情。文件没有被部署？

我现在通过直接在 testrunco​​nfig 中定义部署路径来部署图像，但我想了解为什么会发生这些事情，或者为什么我的新文件“my2ndTest.txt”没有部署而其他文件部署。

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2009-05-19T14:58:01.433

`DeploymentItem`有点乱。

解决方案中的每个文件都将在 VS.NET 中具有“复制到输出文件夹”设置。您需要将其设为“始终复制”（或类似的），以便将文件放入输出文件夹。

检查您是否已为新文件设置了此设置。如果您没有此设置，则文件不会被复制到输出文件夹，然后它们无法从输出文件夹部署到 MSTest 执行它的文件夹。

就个人而言，如果我有单元测试所需的文件，我发现将这些文件作为资源嵌入到程序集中，并在测试期间让该程序集“解包”自己是一种更可预测的做事方式。YMMV。

**注意：**这些评论是基于我对 VS2010 的经验。对我的回答的评论表明这不是 VS2012 的问题。我仍然坚持认为使用嵌入式资源涉及更少的“魔法”，并且对我来说，使我的单元测试的“安排”阶段更加明确。

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2010-07-27T16:59:17.500

在 VS2010 中，我的 Local.testsettings 未选中“启用部署”，并且 DeploymentItem 属性不起作用。我检查了它，一切正常。我希望这有帮助！

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-08-29T06:40:21.947

我也遇到过类似的问题，但我找到了简单的 3 步解决方案：

假设您的文件夹结构如下所示： `SolutionFolder\ TestProjectFolder\ SubFolder\`

1.  转到“解决方案项目/Local.testsettings”>“部署”>选中“启用部署”
2.  如果您使用的是 VS2010，请确保您要部署的所有文件的“复制到输出文件夹”属性设置为“始终复制”或“如果更新则复制”
3.  将您的 TestMethod 归因于以下任一项：
    *   `[DeploymentItem(@"TestProjectFolder\SubFolder")]`将所有内容部署`<SubFolder>`到测试运行目录
    *   `[DeploymentItem(@"TestProjectFolder\SubFolder", "TargetFolder")]` 将 to 的所有内容部署`<SubFolder>`到`<TargetFolder>`Test Run 目录中

关于 MSTest 的最后一点说明（至少对于 VS2010）：

如果您希望 与`<TargetFolder>`具有相同的名称，则`<SubFolder>`使用`[DeploymentItem(@"SubFolder", @"SubFolder")]`将在 MSTest 运行器遇到愚蠢的边缘情况时静默失败。这就是为什么你应该`<SubFolder>`用`<TestProjectFolder>`as 作为前缀：`[DeploymentItem(@"TestProjectFolder\SubFolder", @"SubFolder")]`

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-01-24T19:11:58.720

希望能帮助别人：我在这里尝试了所有建议，**但**我的部署项目仍然没有被复制。

我必须做的（[如此处所建议的](https://stackoverflow.com/questions/3738819/do-mstest-deployment-items-only-work-when-present-in-the-project-test-settings-f)）是向 DeploymentItem 属性添加第二个参数：

```
[DeploymentItem(@"UnitTestData\TestData.xml", "UnitTestData")] 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2010-03-19T17:19:05.470

如果您进入 .testrunco​​nfig 文件并在部署下取消选中“启用部署”，则测试将在其正常位置运行，并且一切都会像在单元测试之外运行应用程序时一样工作。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2011-07-19T15:27:16.597

这可能与您的确切问题无关，但这里有一些我在 [DeploymentItem] 属性中发现的提示。

1.  复制到输出目录应设置为始终复制。

**与 [ TestInitialize** ] 属性一起使用时不起作用

```
[TestInitialize]
[DeploymentItem("test.xlsx")]
public void Setup()
{ 
```

它应该在您的 [TestMethod] 上，例如

```
 [TestInitialize]
    public void Setup()
    {
        string spreadsheet = Path.GetFullPath("test.xlsx");
        Assert.IsTrue(File.Exists(spreadsheet));
        ...
    }

    [TestMethod]
    [DeploymentItem("test.xlsx")]
    public void ExcelQuestionParser_Reads_XmlElements()
    {
        ...
    } 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2017-08-16T14:31:53.340

# 不要使用`DeploymentItem`.

正确设置非常困难，它不适用于我的 ReSharper 测试运行器，也不适用于 Visual Studio 2017 中 MSTEST 的本机运行器。

相反，右键单击您的数据文件，然后选择**properties**。选择**复制到输出目录：始终**。

现在在你的测试中，这样做。该目录只是文件相对于测试项目的目录。简单的。

```
 [TestMethod()]
    public void ParseProductsTest()
    {
        // Arrange
        var file = @"Features\ParseProducts\Files\ParseProducts_Workbook_2017.xlsx";
        var fileStream = File.Open(file, FileMode.Open);
        // etc.
    } 
```

这似乎确实适用于自动化构建和测试系统。

这是解决方案中文件所在位置的图片：

[![在此处输入图像描述](https://i.stack.imgur.com/r06FD.png)](https://i.stack.imgur.com/r06FD.png)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-11-15T21:20:49.850

在尝试了此处列出的所有其他建议后，我仍然无法弄清楚发生了什么。最后我发现在测试/测试设置菜单下没有选择设置文件，这意味着没有启用部署。我单击了测试/测试设置/选择测试设置文件菜单项，选择了 Local.TestSettings 文件，然后一切正常。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-07-23T19:02:21.177

不确定这是否完全回答了这个问题，但它可能会有所帮助。首先，我发现必须选中“启用部署”框才能使部署工作。其次，文档说源路径是“相对于项目路径”，起初我认为它是指项目文件夹。实际上，它似乎是指构建输出文件夹。因此，如果我有一个名为“TestFiles”的项目文件夹和一个名为 的文件，则以`Testdata.xml`这种方式使用该属性是行不通的：

```
[DeploymentItem(@"TestFiles\Testdata.xml")] 
```

我可以标记`Testdata.xml`文件`Copy Always`，以便构建将副本放在输出文件夹下（例如，`Debug\TestFiles\TestData.xml`）。然后，部署机制将找到位于该路径 ( `TestFiles\Testdata.xml`) 相对于构建输出的文件副本。或者，我可以这样设置属性：

```
[DeploymentItem(@"..\\..\TestFiles\Testdata.xml")] 
```

部署机制会找到原始文件。所以两者都可以，但我注意到使用`Copy Always`我在项目中编辑 app.config 文件时偶尔会遇到同样的问题 - 如果我不更改代码或强制重建，则不会触发复制标记为的文件在构建时复制。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2011-09-15T18:20:44.650

我首先禁用了部署标志。但是即使在我启用它之后，由于某种未知的原因，甚至目标 DLL 都不会被复制。不小心我打开了测试运行窗口并杀死了所有以前的运行，然后神奇地我在下一次运行时在测试文件夹中找到了我需要的所有 DLL 和文件......非常混乱。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-01-11T16:41:39.907

我在尝试部署文件时遇到了巨大的问题 - 尝试了上面的所有建议。

然后我关闭了VS2010；重新启动它，加载解决方案，一切正常。（！）

我做了一些检查；在 local.TestSetting 上设置“启用部署”标志后，您不应简单地从“测试结果”窗口重新运行测试。您必须从 UI 中删除之前的测试运行，例如通过运行不同的测试或重新打开您的解决方案。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-10-22T09:14:51.583

对于那些喜欢避免 DeploymentItem 的混乱并采用@Martin Peck 建议的方法（已接受答案）的人，您可以使用以下代码访问嵌入式资源的内容：

```
public string GetEmbeddedResource(string fullyQulifiedResourceName)
{
    var assembly = Assembly.GetExecutingAssembly();
    // NOTE resourceName is of the format "Namespace.Class.File.extension";

    using (Stream stream = assembly.GetManifestResourceStream(fullyQulifiedResourceName))
    using (StreamReader reader = new StreamReader(stream))
    {
        string result = reader.ReadToEnd();
    }
} 
```

有关详细信息，请参阅[**此 SO 线程**](https://stackoverflow.com/questions/3314140/how-to-read-embedded-resource-text-file)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2011-04-08T20:42:50.407

由于我总是发现 DeploymentItem 属性一团糟，因此我使用构建后脚本来部署此类文件。- 确保您要复制的文件具有 Copy Always 属性集。- 修改您的测试项目构建后脚本，将文件从构建目标文件夹（Bin\Debug）复制到您的测试期望它们的位置。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2011-12-17T17:24:25.067

在 VS2010 上试试这个。所以你不需要为每个 tif 添加 DeployItems
删除

```
[DeploymentItem(@"files\valid\valid_entries.txt")]  
[DeploymentItem(@"files\tif\")] 
```

添加测试配置。
- 在解决方案资源管理器中右键单击解决方案节点
- 添加 -> 新项目...
- 选择左侧的测试设置节点，选择右侧的项目
- 单击添加

称之为例如`TDD`

`TDD`在`TestMenu`>下选择`Edit Testsettings`。

单击部署。启用它，然后添加所需的文件和目录。将有一个相对于解决方案的路径。文件将被放置。原始文件例如在这里：

```
D:\Users\Patrik\Documents\Visual Studio 2010\Projects\DCArrDate\WebMVCDCArrDate\Trunk\WebMVCDCArrDate\Authority.xml 
```

当我运行我的单元测试时，它被复制到

```
D:\Users\Patrik\Documents\Visual Studio 2010\Projects\DCArrDate\WebMVCDCArrDate\Trunk\WebMVCDCArrDate.Tests\bin\Debug\TestResults\Patrik_HERKULES 2011-12-17 18_03_27\Authority.xml 
```

在测试代​​码中，我从以下位置调用它：

```
[TestMethod()]
public void Read_AuthorityFiles_And_ParseXML_To_Make_Dictonary()  
{  
  string authorityFile = "Authority.xml";  
  var Xmldoc = XDocument.Load(authorityFile); 
```

无需选择始终复制；将文件放在测试项目中；在测试代​​码中添加硬编码路径。对我来说，这个解决方案效果最好。我尝试使用 DeploymentItem，总是复制，但这不是我喜欢的。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-06-24T13:37:56.543

我一直在 VS2013 中研究这个。我的发现使这个工作：

*   Copy to output directory 应设置为 Copy if Newer / Copy Always: MANDATORY。
*   .TestSettings 中的“启用部署”：不需要。我完全没有 .TestSettings 文件就可以正常工作。
*   将文件夹指定为第二个参数：可选。塑造输出文件夹布局，没有它也能正常工作。
*   文件名中的空格：这让我很头疼 - 文件从未被复制。删除空格解决了这个问题。还没有研究转义字符。

一个技巧，我也学到了一个艰难的方法：不要忘记将此属性添加到每个单独的测试中。该文件在 testrun 中的第一个属性测试中复制，但在测试顺序更改并且非属性测试尝试首先找到该文件时仍然丢失。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-11-05T15:13:34.940

对我来说，根本原因完全是另外一回事：我的测试执行的生产代码是重命名和/或删除正在部署的 .xml 测试文件。

因此，当我单独运行我的测试时，它们会通过，但是当它们一起运行时，第二个和后续测试将失败，并出现“找不到文件”错误（我最初误诊为`DeploymentItem`属性不起作用）。

我的解决方案是让每个单独的测试方法复制部署的文件（使用[这种技术](https://stackoverflow.com/a/581574/12484)），然后让正在测试的生产代码使用复制的文件而不是原始文件。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-12-05T10:46:12.250

我们在本地单元测试运行和团队城市单元测试重新运行中花费了大量时间来解决部署项目问题。这不简单。

调试此问题的非常好的工具是[ProcessExplorer](https://technet.microsoft.com/en-us/sysinternals/processexplorer.aspx)。使用进程资源管理器，您可以检查 Visual Studio 在哪里搜索部署项并对项目进行更正。只需过滤路径包含您的部署项文件名的所有文件操作，您就会看到它。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-12-19T10:01:45.097

除了需要检查 Deployment 属性之外，我还发现了有关 DeploymentItem 属性的其他内容。

```
[TestMethod()]
[DeploymentItem("folder\subfolder\deploymentFile.txt")]
public void TestMethod1()
{
   ...
} 
```

您的 deploymentFile.txt 需要与解决方案文件相关，而不是 testfile.cs。

[![在此处输入图像描述](https://i.stack.imgur.com/J2prA.png)](https://i.stack.imgur.com/J2prA.png)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-04-10T16:34:39.363

我最大的“陷阱”是 DeploymentItem 处理目录的方式。我使用的是双参数版本，两者都作为包含我想要部署的子目录的目录路径。最初我没有意识到它只复制目录根目录中的内容，而不是整个递归文件夹结构！

我基本上有 [DeploymentItem(@"Foo\", @"Foo\")] 并期待它部署我的 Foo\Bar。我特别不得不将其更改为 [DeploymentItem(@"Foo\Bar\", @"Foo\Bar\")]，现在它就像一个魅力。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-07-11T09:26:31.813

我也遇到过类似的问题。我有上面提到的所有步骤，但仍然没有运气。我正在使用VS2010。然后我发现选择了*$Menu > Test > Select Active Test Setting > Trace and Test Impact* 。*在我将 Trace 和 test Impact 更改为Local*后，它开始工作。此页面包含有关将文件复制到测试结果文件夹的非常丰富的信息，我觉得也可以添加此体验。

# sql-server - 在调用者的上下文中运行 Sql Server 存储过程

> ID：883278
> 
> 赞同：4
> 
> 时间：2009-05-19T14:56:31.967
> 
> 标签：sql-server, sql-server-2008, stored-procedures

这让我发疯了，我相信答案很简单。

我有多个模式，每个模式都有一个名为“任务”的视图。我想制作一个在多个默认模式中运行的用户可以成功执行的存储过程——存储过程在任务视图上进行选择。

所以说我有这些对象：

查看：fr.Task（默认架构为“fr”的用户只需键入“select * from Task”即可获得此信息查看：de.Task（同上，但对于默认架构为“de”的用户）

StoredProc: dbo.MyProc -- 所有用户都有执行权限。过程很简单：

```
select count(*) from Task 
```

现在我希望（并且我想要）如果具有默认模式“fr”的用户做到了

```
exec dbo.MyProc 
```

然后他们将从视图 fr.Task 中获取行数。但相反，他们得到错误“无效的对象名称'任务'。”

是否不可能制作一个通用的存储过程来在运行用户的模式中执行选择？

谢谢，比尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T15:20:00.343

要在 CALLER 的上下文中运行存储过程，您可以使用 Execute As 子句，但是，我怀疑这并不是您真正想要做的。

[http://msdn.microsoft.com/en-us/library/ms188354.aspx](http://msdn.microsoft.com/en-us/library/ms188354.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-05-06T13:01:27.050

使用动态 SQL 即 exec ('select count(*) from Task')

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-26T11:41:30.073

“不可能制作一个通用的存储过程来在运行用户的模式中执行选择吗？” 答案是不”

default_schema 取自stored_procedure 的位置

```
create procedure fr.MyProc as select * from Task
create procedure de.MyProc as select * from Task 
```

将在第一种情况下返回 fr.Task-Table，在第二种情况下返回 de.Task-Table。不管调用者有哪个default_schema

# c - 选择 EBADF：哪个 FD 不好？

> ID：883282
> 
> 赞同：12
> 
> 时间：2009-05-19T14:57:51.260
> 
> 标签：c, linux

我们的生产代码中有一个长期存在的错误。这本质上是一个基于套接字的守护进程。它使用 select 监听一堆文件描述符。

偶尔（大约一天一次），select 将返回 EBADF。

我已经编写了代码来搜索错误的文件描述符，它遍历每个 fd 并在其上调用 select。这些调用永远不会返回 EBADF。我也试过fstat。他们也从不返回 EBADF。

我还重写了守护进程以使用 poll。这没有帮助。

有人有其他想法吗？（除了我犯了一个愚蠢的错误，这很容易通过选择来完成）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T15:09:03.783

最有可能在`select`关闭的文件描述符上调用。通常的来源是重用`fd_set`而不重新初始化它。您在信号处理程序中有什么事情吗？（比如在 HUP 上重新打开日志文件？）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T05:13:39.473

我同意詹姆斯的观点。使用 poll()，您可以轻松检查每个 fd 的 revents。

IE

```
struct pollfd fds[NUM_FDS];
int ret, i;

...

ret = poll(fds, NUM_FDS, POLL_TIMEOUT);
for (i = 0; i < NUM_FDS; i++)
  if (fds[i].revents & POLLHUP || fds[i].revents & POLLNVAL)
     ... do something ... 
```

当然，您不会在现实世界中以这种方式实现它，这只是一个示例。我很久以前就停止使用 select()，poll() 是一个更好的接口。你是对的，用select（）很容易把自己踢到脚上。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-19T18:25:44.663

如果您使用 poll() 那么您可以查看数据并查找哪个 fd 失败了，这是一个很大的优势。

# java - Java，不要等待线程完成

> ID：883284
> 
> 赞同：9
> 
> 时间：2009-05-19T14:58:45.847
> 
> 标签：java, multithreading

我需要找到一种从静态调用中分离线程而不是等待线程完成的方法。基本上，一种“一劳永逸”的方法。有人可以给我一个简单的例子来说明如何做到这一点吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-05-19T15:00:47.667

```
Thread t = new Thread(new YourClassThatImplementsRunnable());
t.start();

// JDK 8
new Thread(() -> methodYouWantToRun()).start(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-19T15:55:11.217

如果它是一个与您的应用程序本身具有相似生命周期的长寿命线程，并且将花费大量时间等待其他线程：

```
new Thread(new yourLongRunningProcessThatImplementsRunnable()).start(); 
```

如果它是一个短暂的、受 CPU 限制的任务：

```
ExecutorService es = Executors.newFixedThreadPool(Runtime.availableProcessors());
es.submit(new yourTaskThatImplementsRunnable()); 
```

但是，在大多数情况下，您将向同一个`ExecutorService`.

# 看：

*   [Java并发教程](http://java.sun.com/docs/books/tutorial/essential/concurrency/)
*   [执行服务](http://java.sun.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)
*   [ExecutorCompletionService](http://java.sun.com/javase/6/docs/api/java/util/concurrent/ExecutorCompletionService.html)
*   [可运行](http://java.sun.com/javase/6/docs/api/java/lang/Runnable.html)
*   [线](http://java.sun.com/javase/6/docs/api/java/lang/Thread.html)
*   [未来](http://java.sun.com/javase/6/docs/api/java/util/concurrent/Future.html)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-19T15:01:55.170

```
public static void foo() {
    new Thread() {
        public void run() {
                     //do something here....
        }
    }.start();
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-19T16:24:46.663

根据您的任务性质，可能采用不同的方法：

(1) 正如许多人所提到的，一个临时任务的常用方法是简单地**构造一个线程并调用它的 start()**方法。

(2) 请记住，如果您的后台线程没有停止，那么默认情况下它将阻止您的程序在其他线程完成时关闭。因此，您**可能希望在线程上调用 setDaemon(true)**以便它没有这种行为。（另一方面，在基于 GUI 的应用程序中，您通常最终只是调用 System.exit() ，理想情况下，您会在长时间运行的任务中构建一种*干净*的关闭方式。）

(3) 如果你**经常有一些短期任务**要“一劳永逸”，那么可以考虑使用 Java 5 以后的[Executors 框架](http://www.javamex.com/tutorials/threads/ThreadPoolExecutor.shtml)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-19T15:05:59.013

基本上启动线程并且不执行连接。所以你不会等待线程完成。

# html - HTML 表单如何发布到 exe 应用程序？

> ID：883285
> 
> 赞同：0
> 
> 时间：2009-05-19T14:58:51.260
> 
> 标签：html, post, exe

我只是想知道网站如何将信息发布到 exe 以及该 exe 如何获取该信息并使用模板 html 文件输出它。

Web 端的代码如下所示：

```
<FORM ACTION="scripts/fetch.exe" METHOD=POST NAME=somename> 
<INPUT TYPE=TEXT NAME="id" WIDTH=30>
<INPUT TYPE=SUBMIT NAME="nothing" VALUE="Submit">
</FORM> 
```

exe文件如何获得那个“id”？

**编辑：**更具体一点：

在调用该 exe（如果需要，我有源代码）之后，它会在基于该 ID 的目录中查找用户，然后根据模板文件打印出用户信息。我知道它对信息的作用，我只是不明白它是如何获取这些信息的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T15:05:01.560

此表单使用[CGI](http://en.wikipedia.org/wiki/Common_Gateway_Interface)

简而言之，大多数 CGI 程序都包含一个库，可帮助程序员轻松访问表单参数。此时，程序可以通过多种方式（数据库查找、计算等）处理数据，并生成内容（html、javascript 等）以返回页面。在 Web 服务器像现在这样与应用程序服务器和解释器很好地集成之前，CGI 很常见。

如果没有该可执行文件的源代码（或反汇编），您将无法知道它在做什么的细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T15:19:30.530

这是一个 CGI 应用程序。运行时，Web 服务器将执行程序并通过环境变量和 STDIN 提供数据。

在本例中，POST 表单以如下形式从 STDIN 读取

```
id=30&nothing=Submit 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T15:01:24.967

为什么你这么确定exe实际上是一个.exe应用程序？您可以将文件扩展名映射到您喜欢的任何内容。我实际上喜欢将我的 PHP 页面伪装成 JSP。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T15:03:37.567

Web 服务器通常通过[通用网关接口](http://en.wikipedia.org/wiki/Common_Gateway_Interface)将此类请求传递给外部处理程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T15:03:54.760

如果您有一个需要从表单执行的可执行文件，请尝试设置一个 Web 脚本，该脚本将获取参数并为您执行命令，而不是直接发布到 .exe。

# regex - glibc 正则表达式性能

> ID：883288
> 
> 赞同：0
> 
> 时间：2009-05-19T14:59:36.140
> 
> 标签：regex, glibc

有人有测量 glibc 正则表达式函数的经验吗？是否需要运行任何通用测试来进行此类测量（除了测试我打算搜索的确切模式）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-01-07T13:53:26.760

看看 [http://www.boost.org/doc/libs/1_41_0/libs/regex/doc/gcc-performance.html](http://www.boost.org/doc/libs/1_41_0/libs/regex/doc/gcc-performance.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-05-01T17:30:13.753

您是否使用手写的逐字符比较、标准字符串匹配函数或智能文本匹配算法？

特别是在前一种情况下，切换到 regexp 甚至可能更快，这取决于 regexp 的类型和您使用的库（不仅有 glibc，周围还有很多库：PCRE，[这里](http://hackerboss.com/is-your-regex-matcher-up-to-snuff/)列出的等等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T01:25:09.363

正则表达式的性能很大程度上取决于您使用的正则表达式以及您将其应用于哪些数据。仅仅对一堆正则表达式进行基准测试没有什么意义。您必须使用正则表达式比较实际代码和实际数据上的实际纯 C 替代方案。

根据经验，我会说，如果您已经有正常运行的程序代码来进行所需的文本匹配，只需将其保留在适当的位置即可。如果您还没有该代码，我建议您从正则表达式开始，因为您可以节省大量开发时间（假设您熟悉正则表达式）。您可能可以编写比等效正则表达式更快的程序代码，但差异不会很大。编写和维护程序代码的工作量将明显高于使用正则表达式。

# c# - 哪一个更好地处理版本控制？XmlSerializer 与 DataContractSerializer？

> ID：883289
> 
> 赞同：4
> 
> 时间：2009-05-19T14:59:41.023
> 
> 标签：c#, xml-serialization

需要序列化一个对象，并且反序列化时程序集版本可能会发生变化。此外，对象可能会发生一些变化。

XmlSerializer 不存储类型信息，如果对象发生了一些变化，它不会失败，但是 XmlSerializer 无法序列化超类的私有或内部属性，我无法用属性标记。所以我看了一下DataContractSerializer。到目前为止看起来还不错，超类的私有/内部属性的问题将得到解决，所有属性都必须标记，我不需要它们，但是类型信息呢？如果删除、重命名或添加某些属性，DataContractSerializer 的行为如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T09:17:25.233

我使用 DataContractSerializer 进行了测试，似乎 DataContractSerializer 对对象更改非常宽容，因此我将使用该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-09-27T00:54:36.320

这没有被标记为 WCF 问题，但您在谈论 DataContractSerializer 的事实让我认为您在 WCF 中工作。如果是这种情况，那么查看 IExtensibleDataObject 接口可能是值得的。

参考：

[http://msdn.microsoft.com/en-us/library/system.runtime.serialization.iextensibledataobject.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.iextensibledataobject.aspx)

和

[http://msdn.microsoft.com/en-us/library/ms731138.aspx](http://msdn.microsoft.com/en-us/library/ms731138.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T16:08:38.017

仍然可以根据您的需要使用 XmlSerializer。但是您必须使用`IXmlSerializable`接口实现自定义序列化逻辑。

# javascript - 安装的 SP3 与集成的 SP3，默认安全设置有何不同？

> ID：883293
> 
> 赞同：2
> 
> 时间：2009-05-19T15:00:28.027
> 
> 标签：javascript, lotus-notes, sametime

最终尝试启动 IBM SameTime 7.5.1 聊天客户端的 Lotus Notes 安装 Domino 7x 在某些机器上失败。

具体来说，它在安装了 SP3 的 Windows XP 机器上会失败，而之后安装了 SP3 的 Windows XP 机器可以正常工作。

通过调整 Internet Explorer 中与活动内容相关的高级设置，可以暂时解决此问题：

```
[ ] Allow active content from CDs to run on My Computer 
```

设置`[x]`那里使整个事情工作，删除它（这是默认设置），使它不起作用。但正如我所说，此设置在之后安装了 SP3 的机器上被禁用，并且它在那里工作。

这不是一个可接受的解决方案，因此我们需要找出其根本原因。

所发生的情况是，作为初始化过程的一部分，Lotus Notes 下载了一个小网页。此网页包含 javascript，它只是运行 window.open 并使用指向 SameTime 服务器的 url，包括会话 ID 等。

如果我把这个 url 粘贴到 Notes 的地址栏中，一切都会按预期工作。

因此，我认为问题与 Notes 根本不允许脚本运行有关。

Process Monitor 显示，在下载网页后，Notes 不会对该服务器进行任何类型的网络查询（我可以看到它写入磁盘的位置），所以我认为问题出在 javascript 处理上。

所以，问题：

*   有谁知道安装 SP3 和滑流 SP3 之间的任何特定安全差异，这可能会影响到这一点？
*   对于我们可以尝试在机器上进行哪些具体调整以使其正常工作，是否有人有任何其他想法？

# testing - 软件测试自动化 - 硕士论文

> ID：883305
> 
> 赞同：6
> 
> 时间：2009-05-19T15:03:11.080
> 
> 标签：testing, automation, gui-testing, regression-testing

我正在尝试写一篇关于软件测试自动化的论文。我计划比较两种测试脚本的记录和编程方法，并讨论几个自动化框架，例如 Abbot、Selenium、Yemmy、FEST 等……在我的论文中还将简要概述软件测试技术和也许是自动化测试与软件测试的比较。

编辑：我计划在其 GUI 上测试应用程序的各个方面。所以我的测试主要是在测试世界的黑盒方面。我还没有打算写单元测试。

目前，我阅读了很多关于不同自动化框架的信息，但我可能没有时间查看所有这些。所以我计划阅读它们并使论文更加基于文学。

*   你觉得这个话题能成功吗？
*   你对这个话题还有其他想法吗？
*   你能推荐文学吗？
*   你对这个话题有什么看法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-26T14:10:14.220

对文献的调查应该是 MS 论文的重点。听起来您只想谈论黑盒 GUI 驱动的面向客户的工具，这是一个相当小的利基市场。

您/可能/想要在整个测试工具世界中有一两页 - 单元测试，安全性，负载等，正如上面提到的那样。但我认为你很好地瞄准了你的利基市场。

我认为对于一篇 6 学分的论文，你应该有足够的时间来探索和尝试一些更大的商业和开源工具以及调查文献。我鼓励您研究商业工具（快速测试专家，测试完成）以及关键字驱动的自动化 - 例如 selenium RC。其他人提到“在 GUI 之后”进行测试，例如 FIT/Fitnesse，这可能值得讨论和评估。

我在 2008 年 12 月的软件测试和性能杂志的月刊专栏中介绍了黑盒、功能测试自动化：

[http://www.stpmag.com/issues/stp-2008-12.pdf](http://www.stpmag.com/issues/stp-2008-12.pdf)（第 7 页）

那是一页纸的粗浅介绍。五句话的介绍是屏幕记录/播放工具会比较所有内容，因此如果您的 GUI 发生任何变化（即使您只是更改屏幕分辨率），都可能会作为错误错误返回。关键字驱动的工具只检查您告诉他们检查的内容——如果按钮突然无故禁用或图标不透明，它们就会错过。

只有人类擅长在每个测试用例结束时检查隐藏的断言“......并且没有发生任何其他奇怪的事情。”

所以基于计算机的测试执行和评估可能有一些价值，但它应该是均衡早餐的一部分。

其他需要调查的事情：

*   詹姆斯巴赫的“软件测试自动化蛇油”
*   Kaner、Bach 和 Pettichord 的书《软件测试中的经验教训》
*   我关于测试框架的博客文章 - [http://xndev.blogspot.com/2007/09/whats-test-framework.html](http://xndev.blogspot.com/2007/09/whats-test-framework.html)（这是“什么是测试框架”的 4 号谷歌结果，所以我很乐意推荐它）
*   雷区类比（[http://www.testingperspective.com/tpwiki/doku.php?id=minefield](http://www.testingperspective.com/tpwiki/doku.php?id=minefield)）
*   Doug Hoffman 关于测试自动化的论文：http: [//www.softwarequalitymethods.com/H-Papers.html](http://www.softwarequalitymethods.com/H-Papers.html)
*   测试自动化的经典“搁置件”问题
*   黑盒测试自动化社区的一些支持者推动的反智主义
*   Kaner 的黑盒软件测试课程
*   James Bach 在 /cognitive/ testing 方面的工作
*   上下文驱动的软件测试
*   Jon Kohl 在“人与机器”方面的工作，或 cyborg 方法（而不是单独的计算机测试执行和评估）

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T16:24:51.547

软件测试自动化是一个很大的话题，您可能希望缩小关注范围，而不是尝试涵盖各种框架、回放/记录、技术概述、自动化与非自动化。

关于软件测试自动化的整本书都写过：

*   作为一般话题
*   专注于功能/特性测试 (FIT)
*   专注于单元测试
*   专注于使用一种特定语言和框架的单元测试

框架针对不同类型的测试：

*   单元测试
    *   测试驱动开发
    *   行为驱动开发
*   特性/功能测试
*   GUI 测试（Windows、Java GUI、X Windows 等）
*   网络测试
*   性能测试
*   安全测试

我会考虑专注于其中一个领域的框架（或技术，或其他），而不是试图涵盖所有领域。或者选择其中几个区域并进行对比。

播放/记录与手写测试的问题对我来说似乎很老。在 1980 年代，供应商喜欢推动 Windows GUI 自动化的播放/录制。它带来了很棒的演示和寄予厚望。但它也适用于脆性测试和搁板。回放/记录可以很好地帮助您开始使用工具，但为了便于维护，您通常需要编写更高级别的脚本。这开启了电子表格和基于关键字的方法的新时代，并最终迎来了 FIT/FitNesse。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T15:46:25.680

我不了解文学，但我认为你们学校图书馆的 ACM 出版物可能会产生成果。特别是[SIG* 通讯](http://portal.acm.org/browse_dl.cfm?linked=1&part=sig&coll=portal&dl=ACM)。（也许是[SIGSOFT](http://portal.acm.org/browse_dl.cfm?linked=1&part=sig&idx=SP950&coll=portal&dl=ACM&CFID=35266102&CFTOKEN=74097758)？）

对我来说，这听起来确实是一篇很好的硕士论文。当然，你的论文导师是最后的决定。你应该去和他们谈谈。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T16:05:46.833

作为基于文献的评论，这是一个很好的话题；那里有很多材料。显然，我不会开始讨论所有细节，因为那是你作为作者的工作。:-)

但是，虽然我不熟悉硕士论文的原始研究要求，但这对于博士论文来说肯定是不够的。我会寻找您可以添加到此的原创作品。一个想法是测试方法和系统的分类。与形式验证相比，您还可以检查测试的作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-12-07T14:22:01.670

如果可以在线获得，我将有兴趣阅读该论文。值得考虑以编程方式访问 GUI - Web 和应用程序。然后是 Selenium 或 WatiR 等录制和播放工具。当然，自动化的利弊——工具的局限性（例如，大多数人无法查看 Java 小程序或网页上的 Flash）以及一些人在自动化时忘记的最重要的事情——并非所有事情都*应该*自动化！

但是，如果您有可能对此发表评论，以便在完成时通知我们，我真的很想读一读。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-05-27T05:33:14.217

今年刚刚出版了一本关于测试自动化的优秀书籍：“实施自动化测试”，Elfriede Dustin、Thom Garrett 和 Bernie Gauf、Addison Wesley。

# debugging - 调试 BizTalk SOAP 消息……使用 WireShark 还是什么？

> ID：883312
> 
> 赞同：1
> 
> 时间：2009-05-19T15:04:11.357
> 
> 标签：debugging, soap, biztalk

我正在尝试找出对 Web 服务的 BizTalk 调用失败的原因，并想查看实际的消息内容是什么。我找到了 Elton Stoneman 关于使用 WireShark 的[博客](http://geekswithblogs.net/EltonStoneman/archive/2009/01/29/debugging-soap-messages-with-wireshark.aspx)，这让我开始了，我现在至少可以看到 POST 和 SOAP 响应数据包，但是获取实际内容非常费力......*复制并粘贴到记事本*......

有没有更好的方法来查看消息？
- 我尝试使用 Fiddler，但它没有看到任何消息
- 而至少 WireShark 可以看到东西

如果你有建议，请把它们拼出来，因为这对我来说是一个新领域:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T15:54:28.143

我在这里看到两个选择。在 Wireshark 中，您可以从感兴趣的连接中选择一个数据包，然后从“*分析*”菜单中选择“ *Follow TCP Stream”*。这将打开一个新窗口，显示该连接的正确排序的 TCP 数据。

但是，使用名为[tcpflow](http://www.circlemud.org/~jelson/software/tcpflow/)的程序收集数据可能更方便，该程序会将其记录到文本文件中，供您以后分析使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-21T21:44:13.470

有两个非常好的 SOAP 调试实用程序...

**提琴手2

[http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)

这是一个相对简单的实用程序 - 您可以捕获请求和响应。如果幸运的话，您可以让它充当代理，这样您就不必重新配置任何东西。我在这方面有过不同的经验，所以我通常只是重新配置我的端口来捕获它。

Fiddler 的缺点是它将请求与响应匹配，因此它不会显示未收到回复的消息。如果你正在调试一些可能没有响应的东西，或者想要更多，试试soapUI。

** 肥皂界面

[http://www.soapui.org/](http://www.soapui.org/)

这就像 Fiiddler2，但更进一步。您可以捕获请求和响应，然后您可以自己修改请求并将其发送到您的端点。您还可以使用捕获的响应让soapUI 充当您的模拟服务器。这两个功能在生成请求需要很长时间或者您想查看系统如何处理特定类型的响应的情况下非常有用。

（我不隶属于任何一个，只是一个快乐的客户！）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T19:21:21.163

Windows 网络监视器一直是我的首选工具：

[Windows 网络监视器 3.3](http://www.microsoft.com/downloads/details.aspx?familyid=983B941D-06CB-4658-B7F6-3088333D062F&displaylang=en)

需要一些网络协议知识，但非常容易使用。我已经用这个调试了 HTTP、SOAP 和 FTP。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-27T14:35:18.383

我很满意 Simon Fell 的 YATT，来自 PocketSoap.com 的“Yet Another Trace Tool”。您可以查看给定网络连接上的所有流量，也可以对其进行过滤。

像所有的跟踪器一样，让它不经过滤地运行会吓到你，因为你会不时发现有多少良性应用程序“打电话回家”。

但是请注意，如果您使用 SSL (HTTPS)，您将很难跟踪包的内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-29T07:27:47.967

要将 Fiddler2 与指向本地服务的 BizTalk 发送端口一起使用，您需要将主机名“localhost”替换为“ipv4.fiddler”

例如。http: **//ipv4.fiddler** :8080/UrlToYourService

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-25T17:10:36.633

您可以使用 Microsoft 的[SOAP Toolkit](http://www.microsoft.com/downloads/details.aspx?FamilyId=C943C0DD-CEEC-4088-9753-86F052EC8450&displaylang=en)，然后，如果您使用的是 WCF 适配器，请使用[clientVia](http://msdn.microsoft.com/en-us/library/ms731725(VS.85).aspx)选项。

如果您对消息本身感兴趣（不是完整的 SOAP 内容），您可以配置发送的端口组并将每条消息都发送到 WebService 和本地文件夹。这样，您可以轻松查看发送的所有消息的内容。

# python - django excel xlwt

> ID：883313
> 
> 赞同：35
> 
> 时间：2009-05-19T15:04:14.307
> 
> 标签：python, django, excel, xlwt

在 django 站点上，我想根据数据库中的一些数据生成一个 excel 文件。

我正在考虑使用[xlwt](http://pypi.python.org/pypi/xlwt)，但它只有一种将数据保存到文件的方法。如何才能将文件获取到 HttpResponse 对象？或者你知道更好的图书馆吗？

我也找到了这个[片段](http://www.djangosnippets.org/snippets/1151/)，但它不能满足我的需要。我想要的只是一种将流从 xlwt 对象获取到响应对象的方法（无需写入临时文件）

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2009-05-19T15:09:44.250

整洁的包装！我不知道这个

根据文档，该`save(filename_or_stream)`方法采用要保存的文件名或要写入的类似文件的流。

一个 Django 响应对象恰好是一个类似文件的流！就这样吧`xls.save(response)`。[查看有关使用 ReportLab生成 PDF](http://docs.djangoproject.com/en/dev/howto/outputting-pdf/#complex-pdfs)的 Django 文档以查看类似情况。

**编辑：（**改编自 ShawnMilo 的评论）：

```
def xls_to_response(xls, fname):
    response = HttpResponse(mimetype="application/ms-excel")
    response['Content-Disposition'] = 'attachment; filename=%s' % fname
    xls.save(response)
    return response 
```

然后，从您的视图功能中，只需创建`xls`对象并完成

```
return xls_to_response(xls,'foo.xls') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2010-01-28T06:05:15.223

***更新：django-excel-templates 不再被维护，而是尝试 Marmir [http://brianray.github.com/mm/](http://brianray.github.com/mm/)

在我键入此内容时仍在开发中，但[http://code.google.com/p/django-excel-templates/](http://code.google.com/p/django-excel-templates/) Django excel 模板项目旨在满足您的要求。

具体看测试。这是一个简单的案例：

```
#
from django_excel_templates import *
from django_excel_templates.color_converter import *
from models import *
from django.http import HttpResponse

def xls_simple(request):

    ## Simple ##
    testobj = Book.objects.all()

    formatter = ExcelFormatter()
    simpleStyle = ExcelStyle(vert=2,wrap=1)
    formatter.addBodyStyle(simpleStyle)
    formatter.setWidth('name,category,publish_date,bought_on',3000)
    formatter.setWidth('price',600)
    formatter.setWidth('ebook',1200)
    formatter.setWidth('about',20000)

    simple_report = ExcelReport()
    simple_report.addSheet("TestSimple")
    filter = ExcelFilter(order='name,category,publish_date,about,bought_on,price,ebook')
    simple_report.addQuerySet(testobj,REPORT_HORZ,formatter, filter)

    response = HttpResponse(simple_report.writeReport(),mimetype='application/ms-excel')
    response['Content-Disposition'] = 'attachment; filename=simple_test.xls'
    return response 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T19:17:54.917

您可以将 XLS 文件保存到类似于文件的[StringIO](http://docs.python.org/library/stringio.html)对象。

您可以在响应中返回 StringIO 对象`getvalue()`。请务必添加标题以将其标记为可下载的电子表格。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-09-01T13:56:18.617

您可能想检查[huDjango](https://cybernetics.hudora.biz/projects/wiki/huDjango)，它带有一个名为`serializers.queryset_to_xls()`do convert a queryset into an可下载的 Excel Sheet 的函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-10-06T13:36:50.723

使用[https://bitbucket.org/kmike/django-excel-response](https://bitbucket.org/kmike/django-excel-response)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T15:15:40.337

如果您的数据结果不需要公式或精确的表示样式，您可以随时使用 CSV。任何电子表格程序都会直接读取它。我什至见过一些生成 CSV 但将其命名为 .XSL 的 Web 应用程序，以确保 Excel 会打开它

# .net - .NET：通用编程关键字字典

> ID：883324
> 
> 赞同：1
> 
> 时间：2009-05-19T15:06:09.450
> 
> 标签：.net, naming-conventions, naming, keyword

在[Hanselminutes 的第 162 集中，](http://hanselminutes.com/default.aspx?showID=180)他们正在谈论 PowerShell，但更重要的是，在 04:50 左右，他们提到 PowerShell 使用了一种称为**[通用工程标准](http://www.microsoft.com/windowsserversystem/cer/)**的东西来制定在为其开发新模块时**使用哪些词的标准。**

我无法通过此页面找到任何关于推荐单词的具体词典。

**有没有人知道在开发.NET（在这种情况下为 C#）时使用**标准化关键字的好资源？**我说的是**名词**和**动词**。**

 **他们在播客中提出的一个好点是，您**几乎总能猜到对象和方法的名称**。

这是为了避免不知道选择哪一个：

```
object.GetInfo();
object.FetchInfo();
object.CreateInfo();
object.RetrieveInfo(); 
```

**更新**：我找到了一个好的开始，[这是 PowerShell 中使用的标准化动词列表](http://msdn.microsoft.com/en-us/library/ms714428.aspx)，但它们看起来像 .NET Framework 中使用的标准。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T15:08:32.737

我会查看[Microsoft 的名称指南](http://msdn.microsoft.com/en-us/library/ms229002.aspx)：

> 命名指南为组成类库的元素（包括程序集、命名空间、类型、成员和参数）选择适当的标识符提供了指导。选择符合这些准则的标识符可以提高图书馆的可用性，并鼓励用户相信你的图书馆不需要学习一套新的约定。

您最感兴趣的很可能是标题[为类型成员名称](http://msdn.microsoft.com/en-us/library/ms229012.aspx)的部分：

> **方法名称**
> 
> 一定要给方法名称是动词或动词短语。
> 
> 通常方法作用于数据，因此使用动词来描述方法的操作可以让开发人员更容易理解方法的作用。在定义方法执行的操作时，请注意选择一个从开发人员的角度来看清晰的名称。不要选择描述方法如何做的动词；换句话说，不要在方法名称中使用实现细节。

除此之外，这真的取决于你。您在这里有很多自由，但一个好的经验法则是模仿您在 .NET 框架中找到的名称样式，以便您的类型和成员“有宾至如归的感觉”。

# asp.net - 从 WindowsIdentity 获取用户的显示名称

> ID：883325
> 
> 赞同：13
> 
> 时间：2009-05-19T15:06:20.137
> 
> 标签：asp.net, vb.net

我在使用 Windows 身份验证的 ASP.NET 应用程序中。

我正在使用 HttpContext.Current.User.Identity.Name 来获取当前经过身份验证的用户的用户名，这为我获取了格式为 DOMAIN\USERNAME 的用户名。这工作正常。

有没有一种简单的方法可以将其转换为显示名称（例如“Richard Gadsden”），就像出现在 XP 开始菜单顶部的名称一样？

如果必须，我想我可以通过 System.DirectoryServices 并查询 ADSI，但肯定有更简单的方法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-07T20:41:09.810

现在有一个更简单的方法，使用 System.DirectoryServices.AccountManagement

```
Imports System.DirectoryServices.AccountManagement

...

   Dim CurrentUser As UserPrincipal = UserPrincipal.Current
   Dim DisplayName As String = CurrentUser.DisplayName 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T15:25:14.827

这是有关如何执行此操作的教程：

[http://www.youcanlearnseries.com/Programming%20Tips/CSharp/LDAPReader.aspx](http://www.youcanlearnseries.com/Programming%20Tips/CSharp/LDAPReader.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T15:12:15.897

我想ADSI是要走的路。这很容易。我没有看到更简单的方法。您只需查询`LDAP://<SID=user-sid>`并获取专有名称属性。

# asp.net - 嵌入在锚标记中的输入按钮在 IE 中不起作用

> ID：883327
> 
> 赞同：2
> 
> 时间：2009-05-19T15:06:37.327
> 
> 标签：asp.net, html

**重复：** [锚链接内的按钮在 Firefox 中有效，但在 Internet Explorer 中无效？](https://stackoverflow.com/questions/802839/my-links-dont-work-in-ie-but-do-in-firefox)

我有以下代码在 FF 中有效，但在 IE 中无效，谁能告诉我为什么会这样？

```
<a href="ContentAdmin.aspx"><input type="button" value="Cancel" /></a> 
```

# c++ - C++ 项目的“CruiseControl”自动化？

> ID：883332
> 
> 赞同：4
> 
> 时间：2009-05-19T15:07:09.650
> 
> 标签：c++, automation, continuous-integration, hudson, cruisecontrol

我们有一个 C++ 项目，目前使用 Linux 上的 Make 来构建。我想自动化它类似于 CruiseControl 下的 Java 项目。

1) 有没有类似CruiseControl for C++ 项目的项目？

或者

2) 在 C++ 项目中使用 CruiseControl 是否有很好的“操作方法”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T15:24:57.650

我一直在寻找在 Linux 上为 C++ 项目设置 CruiseControl 但遇到了[Hudson](http://hudson-ci.org/)。它有一个文件/一个命令行设置，您可以启动并运行。管理访问是通过漂亮的 Web 界面进行的。我强烈推荐它。

与 CC 相比，Hudson 似乎更易于设置和管理，而且您可以通过插件访问构建静态、错误/警告（放入目录并且它们可用），并且您可以将其设置为在构建失败时自动发送电子邮件。

我创建了为每个项目目录调用 make 的 shell 脚本。我指示哈德森运行该脚本。构建是通过类似设置的 cron 设置的 - 通过 Web 界面设置。我让它每 30 分钟检查一次代码更改，并从 perforce 和重新编译中获取构建。

如果您不确定，请尝试一下。只需几分钟即可启动并运行。我下载它是因为我想看看我们当前的构建设置有什么可能，而且我从未回头，它已经运行了将近一年，没有任何问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T15:14:33.910

我不知道 CruiseControl，因为我们使用的是 TeamCity，但 CruiseControl 应该能够执行命令行构建，即只需调用 Make。这没什么不好。在 TeamCity 中，甚至可以轻松地将进度通知添加到 make 文件（只是以特定格式输出），因此它与“原生”项目并没有太大区别。我不知道 CruiseControl 在这方面能走多远。

我们有一个使用 CMake 构建的大型 C++ 项目，在命令行上运行，它甚至可以正确报告单元测试结果（使用 Boost::Test）。

哦，如果 CruiseControl 不支持命令行运行器或 Java 以外的项目类型，您应该看看[TeamCity](http://www.jetbrains.com/teamcity)作为替代品。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T15:18:12.360

我们正在运行[Hudson](http://hudson-ci.org/)来构建 C++ 和 Java 代码的混合体，它运行良好。与 CruiseControl 相比的一个优势是 Hudson 具有完整的 Web 界面，因此您永远不必手动编辑任何 XML 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T17:03:21.270

我们正在使用[Cruisecontrol](http://cruisecontrol.sourceforge.net/)来构建我们的 C++ 和 Java 项目。我们的 C++ 项目使用[SCons而不是 make，我们只需通过](http://www.scons.org/)[exec](http://ant.apache.org/manual/Tasks/exec.html) Ant 任务从 Cruisecontrol [Ant](http://ant.apache.org/)脚本调用 scons。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T17:10:15.847

我们将 CruiseControl 用于 C++ 项目。*我们只是使用exec*在 Ant 脚本中执行 devenv.com来构建解决方案。

# qt - 如何以编程方式查看 Qt 认为它拥有哪些资源？

> ID：883334
> 
> 赞同：1
> 
> 时间：2009-05-19T15:07:14.083
> 
> 标签：qt, resources

我希望能够枚举 Qt 拥有的资源的路径，例如：

> :/new/prefix/blabla.jpg

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-19T17:45:35.790

Qt 可以透明地使用资源。这意味着您可以像任何文件系统一样使用[QDir](http://doc.trolltech.com/4.5/qdir.html)来获取资源中任何路径的内容——从开头`:/`将为您提供最顶层的资源文件夹内容。然后，您可以递归地浏览资源中的文件夹（或者如果有任何可用的内容，请查看 Qt 文档）。

另请参阅`QDir()`: 它的详细描述，它明确声明它可以与资源一起使用。

# asp.net - 是否有与 ASP.NET 中的 Java EE ServletContext 等效的东西？

> ID：883337
> 
> 赞同：3
> 
> 时间：2009-05-19T15:07:22.037
> 
> 标签：asp.net, servlets, jakarta-ee

我需要一种在 ASP.NET 中存储应用程序级数据（即跨用户会话）的方法。在 Java EE 中，我会使用 ServletContext。ASP.NET 中是否有等价物？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T15:17:01.223

从你所说的（跨用户会话）来看，你在 ASP.NET 中最接近的是通过[HttpApplicationState](http://msdn.microsoft.com/en-us/library/system.web.ui.page.application.aspx)对象。

# php - 在 PHP 中将特定命名空间添加到 SOAP 信封

> ID：883345
> 
> 赞同：1
> 
> 时间：2009-05-19T15:08:34.190
> 
> 标签：php, xml, web-services, soap, namespaces

我确实需要将某个命名空间添加到 WSDL 中未指定的 SOAP 信封，出于某种原因我已经尝试在 SoapCliente 构造函数中使用“uri”参数，但它不起作用

如何将此命名空间添加到 SoapEnvelope ？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-04-13T09:53:43.840

您不能[更改](http://www.w3schools.com/soap/soap_envelope.asp)SoapEnvelope 的命名空间。

> 请注意上面示例中的 xmlns:soap 命名空间。它的值应始终为：“http://www.w3.org/2001/12/soap-envelope”。命名空间将 Envelope 定义为 SOAP Envelope。如果使用不同的命名空间，应用程序会生成错误并丢弃该消息。

# python - wxPython + 多处理：检查颜色字符串是否合法

> ID：883348
> 
> 赞同：0
> 
> 时间：2009-05-19T15:09:05.857
> 
> 标签：python, wxpython, multiprocessing

我有一个带有两个进程的 wxPython 程序：一个主进程和一个辅助进程（我正在使用多处理模块。）主进程运行 wxPython GUI，第二进程不运行。但是，我想从辅助过程中做一些事情：给定一个描述颜色的字符串，检查这是否是 wxPython 的合法颜色。这意味着，我是否可以创建一个`wx.Pen(color_string)`。

我该怎么做呢？

（我尝试制作一个 wx.Pen 并将其颜色与 null 颜色进行比较，但这需要在第二个过程中创建一个 wx.App，当我创建一个时，程序在某些特殊的 wxPython 窗口中引发了错误。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T15:26:43.917

您可以在两个进程之间创建两个队列，并让第二个将与 wx 相关的功能委托给第一个（通过在第一个队列上推送要执行的任务的参数，并在第二个队列上等待结果）。

# visual-studio - Subsonic 3 T4 模板 - 将视图的一半输出到用户控件

> ID：883350
> 
> 赞同：0
> 
> 时间：2009-05-19T15:09:33.000
> 
> 标签：visual-studio, subsonic, t4

我正在使用 Subsonic MVC 模板，在 List.tt 模板中，它循环遍历所有属性并将它们放入 HTML 表中。

我希望将该表写入用户控件，但几个小时后我无法使其正常工作。

T4 模板可以在这里找到[http://code.google.com/p/subsonicproject/downloads/list](http://code.google.com/p/subsonicproject/downloads/list)。

我可以把东西放到一个单独的文件中，但是把整个表的属性都拿出来是很困难的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-27T16:20:03.710

我已经做到了，所以不用担心...

# c# - ASP.net，Accordian 窗格是否必要？

> ID：883352
> 
> 赞同：0
> 
> 时间：2009-05-19T15:09:44.827
> 
> 标签：c#, asp.net-ajax

当使用 MS Ajax 控件工具包中的[Accordian 控件](http://www.asp.net/AJAX/AjaxControlToolkit/Samples/Accordion/Accordion.aspx)时，我什至需要使用窗格吗？看来我可以使用 HeaderTemplate 和 ContentTemplates 来显示我的数据，而无需使用任何 AccordianPanes。这是推荐的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T15:45:12.867

窗格基本上是内容的包装器。因此，在该站点上的 Accordion 示例中，有四个窗格（Accordion、AutoSize 等）。如果您不使用任何窗格，则将只有一个没有折叠/展开功能的巨型窗格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-02T21:20:27.017

如果使用数据绑定，则不需要定义窗格。您只需使用 HeaderTemplate 和 ContentTemplate，ASP .Net 将为您创建窗格。在模板中包含数据绑定表达式。

我看不到在不使用数据绑定的情况下不使用 AccordionPanes 的方法。但可能有一个。

# javascript - 为什么我的图像在我的 HTML 页面中加载不一致？

> ID：883354
> 
> 赞同：0
> 
> 时间：2009-05-19T15:09:52.050
> 
> 标签：javascript, html

我目前有一个网站，在主页上包含一个文章列表，每个文章旁边都有一张图片。图片来自不同的网站。有时某些图像未加载，当我检查该图像的 url 时它很好，当我刷新页面时它会加载所有图像。

有没有办法确保它们被加载（即使是 js）？

URL 绝对没问题，我怀疑图像来自的站点响应不太好，但是，当我自己尝试时，它仍然可以正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T15:14:55.190

可能是您要链接的站点具有图像盗链保护机制等，以减少其服务器上的负载。

如果您有权在您的网站上显示这些图像，请将它们下载到您的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T15:37:49.830

If you can't host the images yourself, maybe try using the error event to attempt to reload the failed images: www.quirksmode.org/dom/events/error.html

I've never used it myself, but that's the way I'd attempt to go.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T15:18:04.373

我之前遇到过这个错误，你是用javascript调整它们的大小，还是改变父div的宽度？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-19T15:18:31.110

您的虚拟主机可能有问题。共享主机意味着您与许多其他人共享该服务器，它可能会在前一分钟超载，而下一分钟不会超载。您可能想要切换托管公司或要求您的主机将您转移到另一台服务器。

# python - Python unittest：如何测试异常中的参数？

> ID：883357
> 
> 赞同：5
> 
> 时间：2009-05-19T15:10:36.197
> 
> 标签：python, unit-testing

我正在使用 unittest 测试异常，例如：

```
self.assertRaises(UnrecognizedAirportError, func, arg1, arg2) 
```

我的代码提出：

```
raise UnrecognizedAirportError('From') 
```

哪个效果很好。

如何测试异常中的参数是否符合我的预期？

我希望以某种方式断言`capturedException.argument == 'From'`。

我希望这足够清楚 - 在此先感谢！

塔尔。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-19T15:19:27.850

像这样。

```
>>> try:
...     raise UnrecognizedAirportError("func","arg1","arg2")
... except UnrecognizedAirportError, e:
...     print e.args
...
('func', 'arg1', 'arg2')
>>> 
```

`args`如果您只是子类化，您的论点就在其中`Exception`。

请参阅[http://docs.python.org/library/exceptions.html#module-exceptions](http://docs.python.org/library/exceptions.html#module-exceptions)

> 如果异常类派生自标准根类 BaseException，则关联值作为异常实例的 args 属性存在。

* * *

**编辑**更大的示例。

```
class TestSomeException( unittest.TestCase ):
    def testRaiseWithArgs( self ):
        try:
            ... Something that raises the exception ...
            self.fail( "Didn't raise the exception" )
        except UnrecognizedAirportError, e:
            self.assertEquals( "func", e.args[0] )
            self.assertEquals( "arg1", e.args[1] )
        except Exception, e:
            self.fail( "Raised the wrong exception" ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T15:23:55.063

`assertRaises`有点简单，并且不允许您测试超出指定类的引发异常的详细信息。对于更细粒度的异常测试，您需要使用一个`try/except/else`块“滚动您自己的”（您可以在添加到您自己的 unittest 测试用例的通用子类的方法中一劳永逸地做到这一点`def assertDetailedRaises`，然后将您的测试用例全部继承你的子类而不是 unittest 的）。

# datagridview - 在 datagridview 中维护当前选定的行

> ID：883361
> 
> 赞同：0
> 
> 时间：2009-05-19T15:11:37.490
> 
> 标签：datagridview

当从数据库加载数据然后显示到datagridview时，记录指针将指向datagridview的第一行。

刷新记录后是否可以在datagridview中维护指向当前选定行的记录指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T16:52:47.757

在刷新 DataGridView 之前，我会保留 DataGridView.CurrentCellAddress（我忘记了类型）。刷新后，检查该地址的 Cell 是否仍然有效。然后，将 DataGridView.CurrentCell 设置为该地址的单元格。

# php - PDO 的行数

> ID：883365
> 
> 赞同：215
> 
> 时间：2009-05-19T15:12:30.717
> 
> 标签：php, mysql, pdo

周围有许多相互矛盾的说法。在 PHP 中使用 PDO 获取行数的最佳方法是什么？在使用 PDO 之前，我只是简单地使用了`mysql_num_rows`.

`fetchAll`是我不想要的东西，因为我有时可能会处理大型数据集，所以不适合我的使用。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：296
> 
> 时间：2009-05-19T15:16:13.767

```
$sql = "SELECT count(*) FROM `table` WHERE foo = ?"; 
$result = $con->prepare($sql); 
$result->execute([$bar]); 
$number_of_rows = $result->fetchColumn(); 
```

这不是最优雅的方式，而且它涉及额外的查询。

PDO has `PDOStatement::rowCount()`，这显然在 MySql 中不起作用**。**多么痛苦。

来自 PDO 文档：

> 对于大多数数据库，PDOStatement::rowCount() 不返回受 SELECT 语句影响的行数。相反，使用 PDO::query() 发出 SELECT COUNT(*) 语句，其谓词与预期的 SELECT 语句相同，然后使用 PDOStatement::fetchColumn() 检索将返回的行数。然后，您的应用程序可以执行正确的操作。

编辑：上面的代码示例使用准备好的语句，在许多情况下，这对于计算行数可能是不必要的，所以：

```
$nRows = $pdo->query('select count(*) from blah')->fetchColumn(); 
echo $nRows; 
```

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2009-05-19T15:39:51.093

正如我之前在[对类似问题的回答中](https://stackoverflow.com/questions/769767/pdos-rowcount-not-working-on-php-5-2-6/770045#770045)所写的那样，唯一`mysql_num_rows()`有效的原因是因为它在内部获取所有行以向您提供该信息，即使您看起来并不喜欢它。

因此，在 PDO 中，您的选择是：

1.  使用 PDO 的[`fetchAll()`](http://php.net/manual/en/pdostatement.fetchall.php)函数将所有行提取到一个数组中，然后`count()`在其上使用。
2.  `SELECT COUNT(*)`按照 karim79 的建议，对 进行额外查询。
3.  使用 MySQL 的[`FOUND_ROWS()`](https://dev.mysql.com/doc/refman/8.0/en/information-functions.html#function_found-rows)函数，**除非**查询有`SQL_CALC_FOUND_ROWS`或`LIMIT`子句（在这种情况下，查询返回的行数和返回的行数`FOUND_ROWS()`可能不同）。但是，此功能已弃用，将来将被删除。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2013-05-27T16:00:21.977

正如它经常发生的那样，这个问题令人困惑。人们来到这里有**两个不同**的任务：

1.  他们需要知道表中有多少行
2.  他们需要知道查询是否返回了任何行

这是两个完全不同的任务，它们没有任何共同之处，并且无法通过相同的功能来解决。具有讽刺意味**的是，它们都不**需要使用实际`PDOStatement::rowCount()`功能。

让我们看看为什么

# 计算表中的行数

> 在使用 PDO 之前，我只是简单地使用了`mysql_num_rows()`.

表示你**已经**做错了。就消耗服务器资源而言，使用`mysql_num_rows()`或`rowCount()`计算表中的行数是一场**真正的灾难**。数据库必须从磁盘读取所有行，消耗数据库服务器上的内存，然后将所有这些数据堆发送到 PHP，同时消耗 PHP 进程的内存，绝对没有理由给您的服务器增加负担。
此外，仅选择行来计算它们根本没有意义。必须`count(*)`改为运行查询。数据库将从索引中计算出记录，**而不读取实际行**，然后只返回**一行**。

为此目的，[接受的答案](https://stackoverflow.com/a/883382/285587)中建议的代码是公平的，除了它不是“额外”查询而是唯一要运行的查询这一事实。

# 计算返回的行数。

第二个用例不是灾难性的而是毫无意义的：如果您需要知道您的查询是否返回任何数据，您总是拥有数据本身！

比如说，如果您只选择一行。好的，您可以将获取的行用作标志：

```
$stmt->execute();
$row = $stmt->fetch();
if (!$row) { // here! as simple as that
    echo 'No data found';
} 
```

如果您需要获取很多行，那么您可以使用`fetchAll()`.

> `fetchAll()`是我不想要的，因为我有时可能会处理大型数据集

是的，当然，对于第一个用例，情况会差一倍。但正如我们已经了解到的那样，**不要**只选择行来计算它们，无论是 with`rowCount()`还是`fetchAll()`.

但是，如果您要实际使用选定的行，使用`fetchAll()`. 请记住，在 Web 应用程序中，您永远不应该选择大量的行。只应选择将在网页上实际使用的行，因此您必须使用`LIMIT`,`WHERE`或 SQL 中的类似子句。而对于这样一个中等数量的数据，它是可以使用的`fetchAll()`。同样，只需在条件中使用此函数的结果：

```
$stmt->execute();
$data = $stmt->fetchAll();
if (!$data) { // again, no rowCount() is needed!
    echo 'No data found';
} 
```

当然，运行一个**额外的查询**只是为了判断您的其他查询是否返回任何行，这将是绝对**疯狂的，正如它在两个最佳答案中所建议的那样。**

 **# 计算大型结果集中的行数

在这种罕见的情况下，当您需要选择大量的行（例如在控制台应用程序中）时，您必须使用**无缓冲查询**，以减少使用的内存量。但这是实际情况，当`rowCount()` [**将不可用**](https://phpdelusions.net/pdo#mysqlnd)时，因此也没有使用此功能。

因此，这是您可能需要运行额外查询的唯一用例，以防您需要知道所选行数的接近估计值。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2011-07-31T17:05:48.097

我最终使用了这个：

```
$result = $db->query($query)->fetchAll();

if (count($result) > 0) {
    foreach ($result as $row) {
        echo $row['blah'] . '<br />';
    }
} else {
    echo "<p>Nothing matched your query.</p>";
} 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2013-03-06T07:02:56.687

这已经很晚了，但我遇到了问题，我这样做了：

```
function countAll($table){
   $dbh = dbConnect();
   $sql = "select * from `$table`";

   $stmt = $dbh->prepare($sql);
    try { $stmt->execute();}
    catch(PDOException $e){echo $e->getMessage();}

return $stmt->rowCount(); 
```

这真的很简单，也很容易。:)

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2014-07-23T00:31:06.740

这篇文章很旧，但是使用 PDO 在 php 中获取行数很简单

```
$stmt = $db->query('SELECT * FROM table');
$row_count = $stmt->rowCount(); 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2010-07-14T02:29:47.067

这是一篇旧帖子，但在寻找替代品时感到沮丧。非常不幸的是 PDO 缺乏这个特性，尤其是 PHP 和 MySQL 往往齐头并进。

使用 fetchColumn() 有一个不幸的缺陷，因为 fetchColumn() 将指针移动到下一行，因此您不能再（有效地）使用该结果集。因此，例如，如果您的结果类似于

1.  水果->香蕉
2.  水果->苹果
3.  水果->橙子

如果你使用 fetchColumn() 你可以发现返回了 3 个水果，但是如果你现在循环结果，你只有两列， fetchColumn() 的价格是第一列结果的损失刚刚找到返回了多少行。这会导致编码草率，如果实施的话，会导致完全错误的结果。

因此，现在，使用 fetchColumn() 您必须实现全新的调用和 MySQL 查询才能获得新的工作结果集。（希望自您上次查询以来没有改变），我知道，不太可能，但它可能会发生。此外，所有行计数验证的双重查询的开销。对于这个例子来说，它很小，但是在连接查询中解析 200 万行，这不是一个令人愉快的代价。

我喜欢 PHP，并支持参与其开发的每个人以及整个社区每天使用 PHP，但我真的希望在未来的版本中解决这个问题。这“真的”是我对 PHP PDO 的唯一抱怨，否则它是一个很棒的课程。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-08-10T06:01:44.617

回答这个问题是因为我现在知道这一点，也许它会很有用。

请记住，您不能两次获取结果。您必须将获取结果保存到数组中，通过 获取行数`count($array)`，并使用 输出结果`foreach`。例如：

```
$query = "your_query_here";
$STH = $DBH->prepare($query);
$STH->execute();
$rows = $STH->fetchAll();
//all your results is in $rows array
$STH->setFetchMode(PDO::FETCH_ASSOC);           
if (count($rows) > 0) {             
    foreach ($rows as $row) {
        //output your rows
    }                       
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-06-11T09:16:24.203

如果您只想获取行数（而不是数据），即。在准备好的语句中使用 COUNT(*) 那么您需要做的就是检索结果并读取值：

```
$sql = "SELECT count(*) FROM `table` WHERE foo = bar";
$statement = $con->prepare($sql); 
$statement->execute(); 
$count = $statement->fetch(PDO::FETCH_NUM); // Return array indexed by column number
return reset($count); // Resets array cursor and returns first value (the count) 
```

实际上检索所有行（数据）来执行简单计数是一种资源浪费。如果结果集很大，您的服务器可能会阻塞它。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-04-13T04:19:34.603

看看这个链接： [http](http://php.net/manual/en/pdostatement.rowcount.php) ://php.net/manual/en/pdostatement.rowcount.php 不建议在 SELECT 语句中使用 rowCount() ！

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-08-12T14:45:38.750

当涉及**到 mysql 如何****使用 PHP PDO**计算或获取表中的行数时，我使用它

```
// count total number of rows
$query = "SELECT COUNT(*) as total_rows FROM sometable";
$stmt = $con->prepare($query);

// execute query
$stmt->execute();

// get total rows
$row = $stmt->fetch(PDO::FETCH_ASSOC);
$total_rows = $row['total_rows']; 
```

归功于 Mike@codeofaninja.com

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-12-07T23:44:07.813

要在查询中使用变量，您必须使用`bindValue()`or `bindParam()`。并且**不要**将变量与`" . $variable . "`

```
$statement = "SELECT count(account_id) FROM account
                  WHERE email = ? AND is_email_confirmed;";
$preparedStatement = $this->postgreSqlHandler->prepare($statement);
$preparedStatement->bindValue(1, $account->getEmail());
$preparedStatement->execute();
$numberRows= $preparedStatement->fetchColumn(); 
```

总帐

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2013-10-02T12:57:19.163

一个快速的一个班轮让第一个条目返回。这对于非常基本的查询非常有用。

```
<?php
$count = current($db->query("select count(*) from table")->fetch());
?> 
```

[参考](http://www.php.net/manual/en/pdostatement.fetch.php#84495)

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-05-08T19:53:36.203

我尝试`$count = $stmt->rowCount();`使用 Oracle 11.2，但它不起作用。我决定使用如下所示的 for 循环。

```
 $count =  "";
    $stmt =  $conn->prepare($sql);
    $stmt->execute();
   echo "<table border='1'>\n";
   while($row = $stmt->fetch(PDO::FETCH_OBJ)) {
        $count++;
        echo "<tr>\n";
    foreach ($row as $item) {
    echo "<td class='td2'>".($item !== null ? htmlentities($item, ENT_QUOTES):"&nbsp;")."</td>\n";
        } //foreach ends
        }// while ends
        echo "</table>\n";
       //echo " no of rows : ". oci_num_rows($stmt);
       //equivalent in pdo::prepare statement
       echo "no.of rows :".$count; 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2016-01-30T23:33:14.283

对于我想要特定行并想知道是否找到它的直接查询，我使用如下内容：

```
function fetchSpecificRow(&$myRecord) {
    $myRecord = array();
    $myQuery = "some sql...";
    $stmt = $this->prepare($myQuery);
    $stmt->execute(array($parm1, $parm2, ...));
    if ($myRecord = $stmt->fetch(PDO::FETCH_ASSOC)) return 0;
    return $myErrNum;
} 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2021-04-01T06:30:49.537

最简单的方法，只有2行，

```
$sql = $db->query("SELECT COUNT(*) FROM tablename WHERE statement='condition'");
echo $sql->fetchColumn(); 
```

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2013-05-27T15:48:38.860

当您在 mysql 语句中创建 COUNT(*) 时，例如

```
$q = $db->query("SELECT COUNT(*) FROM ..."); 
```

您的 mysql 查询已经在计算结果的数量 为什么要在 php 中再次计算？得到你的mysql的结果

```
$q = $db->query("SELECT COUNT(*) as counted FROM ...");
$nb = $q->fetch(PDO::FETCH_OBJ);
$nb = $nb->counted; 
```

并将`$nb`包含您用 mysql 语句计算的整数，写起来有点长，但执行起来很快

编辑：抱歉发错了帖子，但是作为一些示例显示带有计数的查询，我建议使用 mysql 结果，但是如果您不使用 sql fetchAll() 中的计数，如果您将结果保存在变量中是有效的你不会松懈的。

```
$data = $dbh->query("SELECT * FROM ...");
$table = $data->fetchAll(PDO::FETCH_OBJ); 
```

`count($table)`将返回行数，您仍然可以在喜欢`$row = $table[0]` 或使用之后使用结果`foreach`

```
foreach($table as $row){
  print $row->id;
} 
```

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2013-07-15T08:32:20.307

这是 PDO 类的定制扩展，具有帮助函数来检索最后一个查询的“WHERE”条件所包含的行数。

不过，您可能需要添加更多“处理程序”，具体取决于您使用的命令。现在它只适用于使用“FROM”或“UPDATE”的查询。

```
class PDO_V extends PDO
{
    private $lastQuery = null;

    public function query($query)
    {
        $this->lastQuery = $query;    
        return parent::query($query);
    }
    public function getLastQueryRowCount()
    {
        $lastQuery = $this->lastQuery;
        $commandBeforeTableName = null;
        if (strpos($lastQuery, 'FROM') !== false)
            $commandBeforeTableName = 'FROM';
        if (strpos($lastQuery, 'UPDATE') !== false)
            $commandBeforeTableName = 'UPDATE';

        $after = substr($lastQuery, strpos($lastQuery, $commandBeforeTableName) + (strlen($commandBeforeTableName) + 1));
        $table = substr($after, 0, strpos($after, ' '));

        $wherePart = substr($lastQuery, strpos($lastQuery, 'WHERE'));

        $result = parent::query("SELECT COUNT(*) FROM $table " . $wherePart);
        if ($result == null)
            return 0;
        return $result->fetchColumn();
    }
} 
```

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2016-05-26T23:25:21.847

您可以将最好的方法组合到一行或一个函数中，并为您自动生成新的查询：

```
function getRowCount($q){ 
    global $db;
    return $db->query(preg_replace('/SELECT [A-Za-z,]+ FROM /i','SELECT count(*) FROM ',$q))->fetchColumn();
}

$numRows = getRowCount($query); 
```

* * *

## 回答 #20

> 赞同：-2
> 
> 时间：2016-06-25T05:40:16.377

```
<table>
      <thead>
           <tr>
                <th>Sn.</th>
                <th>Name</th>
           </tr>
      </thead>
      <tbody>
<?php
     $i=0;
     $statement = $db->prepare("SELECT * FROM tbl_user ORDER BY name ASC");
     $statement->execute();
     $result = $statement->fetchColumn();
     foreach($result as $row) {
        $i++;
    ?>  
      <tr>
         <td><?php echo $i; ?></td>
         <td><?php echo $row['name']; ?></td>
      </tr>
     <?php
          }
     ?>
     </tbody>
</table> 
```

* * *

## 回答 #21

> 赞同：-2
> 
> 时间：2018-04-11T06:22:05.577

```
function count_x($connect) {  
 $query = "  SELECT * FROM tbl WHERE id = '0' ";  
 $statement = $connect->prepare($query);  $statement->execute();  
 $total_rows = $statement->rowCount();  
 return $total_rows; 
} 
```

* * *

## 回答 #22

> 赞同：-2
> 
> 时间：2019-02-21T18:13:41.437

有一个简单的解决方案。如果您使用 PDO 像这样连接到您的数据库：

```
try {

    $handler = new PDO('mysql:host=localhost;dbname=name_of_your_db', 'your_login', 'your_password'); 
    $handler -> setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

} catch (PDOException $e) { 

    echo $e->getMessage();
} 
```

现在，如果您想知道表中存在多少行并且您将列“id”作为主键，那么对 DB 的查询将是：

```
$query = $handler->query("SELECT id FROM your_table_name"); 
```

最后，要获得与您的查询匹配的行数，如下所示：

```
$amountOfRows = $query->rowCount(); 
```

或者你可以写：

```
$query = $handler ->query("SELECT COUNT(id) FROM your_table_name");

$amountOfRows = $query->rowCount(); 
```

或者，如果您想知道“产品”表中有多少产品的价格在 10 到 20 之间，请编写以下查询：

```
$query = $handler ->query("SELECT id FROM products WHERE price BETWEEN 10 AND 
20");

$amountOfRows = $query->rowCount(); 
```

* * *

## 回答 #23

> 赞同：-2
> 
> 时间：2020-05-14T07:39:05.043

**取列（）**

如果想获得记录计数，则使用*[effisien]*

```
$sql   = "SELECT COUNT(*) FROM fruit WHERE calories > 100";
$res   = $conn->query($sql);
$count = $res->fetchColumn(); // ex = 2 
```

**询问（）**

用于检索数据和记录计数*[选项]*

```
$sql = "SELECT * FROM fruit WHERE calories > 100";
$res = $conn->query($sql);

if ( $res->rowCount() > 0) {

    foreach ( $res as $row ) {
        print "Name: {$row['NAME']} <br />";
    }

}
else {
    print "No rows matched the query.";
} 
```

[PDOStatement::rowCount](https://www.php.net/manual/en/pdostatement.rowcount.php)

* * *

## 回答 #24

> 赞同：-5
> 
> 时间：2016-03-23T18:32:15.650

使用参数 `array(PDO::ATTR_CURSOR => PDO::CURSOR_SCROLL)`，否则显示-1：

使用参数 `array(PDO::ATTR_CURSOR => PDO::CURSOR_SCROLL)`，sin ello sale -1

例子：

```
$res1 = $mdb2->prepare("SELECT clave FROM $tb WHERE id_usuario='$username' AND activo=1 and id_tipo_usuario='4'", array(PDO::ATTR_CURSOR => PDO::CURSOR_SCROLL));
$res1->execute();

$count=$res1->rowCount();
echo $count; 
```

# python - Python 多处理 atexit 错误“atexit._run_exitfuncs 中的错误”

> ID：883370
> 
> 赞同：18
> 
> 时间：2009-05-19T15:13:33.320
> 
> 标签：python, process, interrupt, atexit

我正在尝试在 Python 中运行一个简单的多进程应用程序。主线程产生 1 到 N 个进程并等待它们都完成处理。每个进程都运行一个无限循环，因此它们可能会在没有用户中断的情况下永远运行，所以我输入了一些代码来处理 KeyboardInterrupt：

```
#!/usr/bin/env python
import sys
import time
from multiprocessing import Process

def main():
    # Set up inputs..

    # Spawn processes
    Proc( 1).start()
    Proc( 2).start()

class Proc ( Process ):
    def __init__ ( self, procNum):
        self.id = procNum
        Process.__init__(self)

    def run ( self ):
        doneWork = False

        while True:

            try:
                # Do work...
                time.sleep(1)
                sys.stdout.write('.')

                if doneWork:
                    print "PROC#" + str(self.id) + " Done."
                    break

            except KeyboardInterrupt:
                print "User aborted."
                sys.exit()

# Main Entry
if __name__=="__main__":
    main() 
```

问题是，当使用 CTRL-C 退出时，即使进程似乎立即退出，我也会收到一个额外的错误：

```
......User aborted.
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "C:\Python26\lib\atexit.py", line 24, in _run_exitfuncs
    func(*targs, **kargs)
  File "C:\Python26\lib\multiprocessing\util.py", line 281, in _exit_function
    p.join()
  File "C:\Python26\lib\multiprocessing\process.py", line 119, in join
    res = self._popen.wait(timeout)
  File "C:\Python26\lib\multiprocessing\forking.py", line 259, in wait
    res = _subprocess.WaitForSingleObject(int(self._handle), msecs)
KeyboardInterrupt
Error in sys.exitfunc:
Traceback (most recent call last):
  File "C:\Python26\lib\atexit.py", line 24, in _run_exitfuncs
    func(*targs, **kargs)
  File "C:\Python26\lib\multiprocessing\util.py", line 281, in _exit_function
    p.join()
  File "C:\Python26\lib\multiprocessing\process.py", line 119, in join
    res = self._popen.wait(timeout)
  File "C:\Python26\lib\multiprocessing\forking.py", line 259, in wait
    res = _subprocess.WaitForSingleObject(int(self._handle), msecs)
KeyboardInterrupt 
```

我在 Windows 上运行 Python 2.6。如果有更好的方法在 Python 中处理多处理，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2021-08-03T15:30:25.673

这是一个非常古老的问题，但似乎接受的答案并不能真正解决问题。

主要问题是您还需要在父进程中处理键盘中断。除此之外，在`while`循环中，您只需要退出循环，无需调用`sys.exit()`

我试图尽可能地匹配原始问题中的示例。该`doneWork`代码在示例中没有任何作用，因此为了清楚起见，已将其删除。

```
import sys
import time
from multiprocessing import Process

def main():
    # Set up inputs..

    # Spawn processes
    try:
        processes = [Proc(1), Proc(2)]
        [p.start() for p in processes]
        [p.join() for p in processes]
    except KeyboardInterrupt:
        pass

class Proc(Process):
    def __init__(self, procNum):
        self.id = procNum
        Process.__init__(self)

    def run(self):
        while True:
            try:
                # Do work...
                time.sleep(1)
                sys.stdout.write('.')

            except KeyboardInterrupt:
                print("User aborted.")
                break

# Main Entry
if __name__ == "__main__":
    main() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T15:36:09.673

而不是只是强迫`sys.exit()`，你想向你的线程发送一个信号告诉他们停止。研究在 Python 中使用[信号处理程序](http://docs.python.org/library/signal.html)和线程。

您可以通过将`while True:`循环更改为`while keep_processing:` 在`keep_processing`KeyboardInterrupt 异常上设置的某种全局变量来潜在地做到这一点。不过，我认为这不是一个好习惯。

# asp.net - 有效的密码加密

> ID：883371
> 
> 赞同：12
> 
> 时间：2009-05-19T15:13:43.210
> 
> 标签：asp.net, security, encryption, hash

我查看了 StackOverflow 问题[“密码加密/数据库层 AES 或应用程序层 AES”](https://stackoverflow.com/questions/877583/password-encryption-database-layer-aes-or-app-layer-aes)，我想在注册（网络应用程序）时有效且高效地散列我的密码，然后能够检查它们是登录时正确。我正在使用 VB，但使用 C# 很舒服。

我很想使用[“.NET Encryption Simplified”](http://www.dotnetmonster.com/Uwe/DirItem.aspx/Articles/NET-Framework/Security/NET-Encryption-Simplified)中描述的 Jeff Atwood 的加密类，因为它真的很容易理解。它有一个散列类——但我不知道如何“登录”并在散列后比较散列。这是 Jeff 使用他的 Encryption 类演示他的哈希方法：

```
Sub DemoHash()
    Dim d As New Encryption.Data( _
        "{ts '2004-10-09 08:10:04'}The world is beautiful and needs caring by its children")

    Dim hash As New Encryption.Hash(Encryption.Hash.Provider.SHA1)
    Dim hash2 As New Encryption.Hash(Encryption.Hash.Provider.SHA256)
    Dim hash3 As New Encryption.Hash(Encryption.Hash.Provider.SHA384)
    Dim hash4 As New Encryption.Hash(Encryption.Hash.Provider.SHA512)
    Dim hash5 As New Encryption.Hash(Encryption.Hash.Provider.MD5)
    Dim hash6 As New Encryption.Hash(Encryption.Hash.Provider.CRC32)

    hash.Calculate(d)
    hash2.Calculate(d)
    hash3.Calculate(d)
    hash4.Calculate(d)
    hash5.Calculate(d)

    Console.WriteLine("SHA1:   " & hash.Value.Hex)
    Console.WriteLine("SHA256: " & hash2.Value.Hex)
    Console.WriteLine("SHA384: " & hash3.Value.Hex)
    Console.WriteLine("SHA512: " & hash4.Value.Hex)
    Console.WriteLine("MD5:    " & hash5.Value.Hex)
    Console.WriteLine("CRC32:  " & hash6.Calculate(d).Hex)
    Console.WriteLine()

    Dim salt As New Encryption.Data("salty!")
    Console.WriteLine("Salted CRC32:  " & hash6.Calculate(d, salt).Hex)

    Console.WriteLine("Press ENTER to continue...")
    Console.ReadLine()
End Sub 
```

所以我的问题是：

1.  我可以加密密码（尽管我无意存储它）并散列一个字符串。如果我有一个名为“barry”的用户，其密码为“fishlegs”，那么存储和检索他的密码的最佳方法是什么？

2.  在 SQL Server 中；binary 或 nvarchar 是存储哈希的最佳选择吗？

3.  基于“巴里”和他的密码，哈希存储的有效方法是什么？它是附加到盐的“鱼腿”的加密吗？

密码学很难！

感谢任何可以提供帮助的人...

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2009-05-19T15:32:24.827

嗯，我认为您只是缺少一些与散列如何工作相关的基本概念。让我试着简要解释一下。我将从简单开始，然后详细说明我的答案，所以请通读全文，开头的信息不安全。

您想用来存储密码的是一种称为“单向哈希”的函数。这意味着，对于您提供给函数的任何输入，相同的输入将始终给出相同的结果。但是，没有**数学过程**可以让您获取该结果字符串并找出原始输入是什么。

让我们以 MD5 作为散列函数的示例。如果我对字符串“password”运行 MD5，我将**始终**得到结果“5f4dcc3b5aa765d61d8327deb882cf99”。但是，如果您只是给某人一个结果字符串（“5f4d ...”），他们就不可能应用一些数学过程来“反转”函数并找出它来自“密码”。

这意味着当用户第一次设置他们的密码时，您对其应用哈希函数并存储结果。因此，不是存储“密码”，而是存储“5f4dcc3b5aa765d61d8327deb882cf99”。然后，当该用户尝试登录时，您将输入他们在登录表单上的密码框中输入的任何内容，并应用相同的散列函数。如果您得到的结果与数据库中存储的结果相同，那么他们一定输入了与最初选择的密码相同的密码，即使您不知道原始密码实际上是什么。

现在，即使不可能“反转”散列函数，但相同的输入总是给出相同的输出这一事实意味着某人可以简单地建立一个输入/输出对的大型数据库，并使用它来有效地反转散列。这被称为“彩虹表”。互联网上有很多可用的方法，因此使用简单的散列是不安全的，以防万一您的数据库受到损害。也就是说，即使在**数学上**不可能取“5f4dcc3b5aa765d61d8327deb882cf99”并确定它来自在“密码”上运行 MD5，但在实践中很容易确定。您所要做的就是通过 MD5 运行字典中的每个单词并存储结果，并且您可以轻松地反转简单的密码。

这就是“加盐”的用武之地。如果您为每个用户生成一个随机的“盐”字符串并将其附加到他们的密码中，它实际上会破坏彩虹表。例如，假设上面的同一用户使用密码作为“密码”注册。在散列之前，我们生成一个随机的 8 个字符的盐附加到他们的密码上。假设它是“A4BR82QX”。现在，我们不是散列“密码”，而是散列“A4BR82QXpassword”。这给出了结果“87a4ba071c8bcb5efe457e6c4e6c4490”，因此我们将其与盐字符串一起存储在数据库中。然后，当该用户尝试登录时，我们不会直接对他们在登录表单中输入的密码进行散列和比较，而是将他们输入的内容，再次放在“A4BR82QX”前面，然后对其进行散列。

实际上，您在这里所做的是使预先生成的彩虹表对于尝试破解数据库中的密码毫无用处。**由于盐是随机的，并且每个用户（通常）都有不同的盐，因此攻击者将不得不为每个单独的用户**重新生成他们的彩虹表。这要困难得多。

但是，还有一个问题，那就是生成 MD5 哈希值**很快**。尽管像这样的加盐需要他们重新生成彩虹表，但由于 MD5 的速度有多快，一些体面完整的彩虹表可以非常快速地创建。因此，如果他们只是想在您的网站上破解一个高价值帐户，他们花一些时间生成彩虹表来尝试反转该密码并不是什么大不了的事。如果高价值账户的原始密码本身不够安全，即使加盐也能很快找到。

所以下一步是找到一个**慢**散列函数，并使用它来代替像 MD5 这样的快散列函数。让您的网站多花几秒钟时间来检查登录并不是什么大问题。但是当有人试图生成彩虹表来破解密码时，让每个条目花费几秒钟是绝对的杀手锏。我在这里写的够多了，所以我将通过链接到这篇文章来结束，这篇文章详细介绍了如何选择一个好的、缓慢的散列函数：[彩虹表足够了：你需要知道的关于安全密码方案](https://www.nccgroup.trust/us/about-us/newsroom-and-events/blog/2007/july/enough-with-the-rainbow-tables-what-you-need-to-know-about-secure-password-schemes/?Year=2007)的知识。

这是一个相当大的答案，如果有任何不清楚的地方，请在评论中告诉我，我会编辑详细说明。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-19T15:39:35.807

好的，首先是关于 Jeff 班级的一些事情。现在不推荐使用 SHA1 和 MD5。CRC32 根本不适合密码。其次，您应该对每个哈希进行加盐处理，最好使用不同的盐值。通常，您为此选择一个加密的随机数据块，但在推送时您可以使用用户名。要加盐，请在过程中的某处添加前缀或后缀。我倾向于对密码进行哈希处理，对盐进行哈希处理，将两者结合起来，然后再次进行哈希处理。但是你可以交换周围的东西并不重要，只要你是一致的。

因此，与其将事情与 Jeff 的课程进一步混淆，不如让我们以经典的方式来做这件事。

首先是随机盐生成。

```
public static byte[] GetRandomSalt()
{
  int minSaltSize = 16;
  int maxSaltSize = 32;

  Random random = new Random();
  int saltSize = random.Next(minSaltSize, maxSaltSize);
  saltBytes = new byte[saltSize];
  RNGCryptoServiceProvider rng = new RNGCryptoServiceProvider();
  rng.GetNonZeroBytes(saltBytes); 
  return saltBytes;
} 
```

然后散列

```
public static byte[] ComputeHash(string plainText)
{
  byte[] plainTextBytes = Encoding.UTF8.GetBytes(plainText);
  HashAlgorithm hash = new SHA256Managed();
  return hash.ComputeHash(plainTextWithSaltBytes);
} 
```

所以这将计算一个 SHA256 哈希并将其作为字节数组返回。

如果你在加盐，你会做如下的事情

```
byte[] passwordHash = ComputeHash(password);
byte[] salt = GetRandomSalt();
byte[] saltHash = ComputeHash(salt);

byte[] hashWithSaltBytes = new byte[hashBytes.Length + saltBytes.Length];
for (int i=0; i < hashBytes.Length; i++)
  hashWithSaltBytes[i] = hashBytes[i];
for (int i=0; i < saltBytes.Length; i++)
  hashWithSaltBytes[hashBytes.Length + i] = saltBytes[i]; 
```

然后，如果您感到无聊，请再次将其分解，或者保持原样。

要将字节数组转换为字符串，如果您不喜欢存储字节，可以使用

```
string hashValue = Convert.ToBase64String(hashWithSaltBytes); 
```

字符串比较比字节比较容易，你必须遍历每个数组，这取决于你。请记住，如果您使用的是随机盐，则需要将它们存储在密码旁边。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-19T15:23:46.827

*   取用户密码“ **Secret!** ”。
*   生成几个字节的随机盐“ **s4L75a1T** ”。
*   将它们连接到“ **s4L75a1TSecret！** ”。
*   计算哈希“ **b9797a5b683804eb195b6ba2a5e368ae74394cd3** ”（这是十六进制的 SHA-1）
*   将散列和盐（都作为十六进制字符串、Base64 字符串或任何你喜欢的字符串）与用户名和其他用户信息一起存储在数据库中（在示例中，盐只是一个普通字符串，散列是 Base64 编码的）。

```
    名字姓氏盐哈希
    -------------------------------------------------- ---------------
    约翰·多伊 s4L75a1T uXl6W2g4BOsZW2uipeNornQ5TNM=

```

如果要验证用户密码，只需取用户名，查找盐，再执行上述操作，查看计算的哈希值是否与数据库中的哈希值匹配。没有（已知）方法可以（轻松）恢复密码。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-19T15:18:25.433

不要将加密密码与散列密码混淆；使用良好的加密散列函数，您应该无法反转散列过程来检索原始字符串。

乍得上面的回答是对所涉及概念的逐点解释。

~~这个话题在整个互联网上都被做死了；不只是在堆栈溢出；说真的 - 一个简单的网络搜索应该会为您找到一个非常全面的指南。~~

*谢谢，杰夫，又传播了一堆错误信息。我想我们会在下周看到一大堆关于散列、加密等的误导性问题，更不用说关于浮点运算的废话了。*

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-19T15:20:22.917

我相信这个过程是这样的：生成一个随机盐，所以 'fishlegs' + 'r4nd0mS4lt' 得到 'fishlegsr4nd0mS4lt'。然后你对它进行哈希处理，比如使用 MD5（尽管你可能希望使用 SHA256 更安全）得到：593d5518d759b4860188158ef4c71f28。存储它和随机生成的盐。当用户登录时，附加随机盐，然后检查他输入的带盐的密码是否与数据库中的哈希匹配。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-19T15:33:02.440

您本质上想要做的是：

A）在创建帐户时，您从用户那里获得用户名和密码，您将它们与您自己的盐一起散列并将结果字符串存储在您的数据库中，例如：

```
Dim sUserName = "barry"
Dim sPassWord = "fishlegs"
Dim mySalt = "A deliciously salty string! fillED WIth all KindS of Junkk(&^&*(£"
Dim d As New Encryption.Data(mySalt + sUserName + sPassWord)
Dim hash As New Encryption.Hash(Encryption.Hash.Provider.SHA256)
hash.Calculate(d)
Dim sTheSaltedHashedUnPassCombination = hash.Value.Hex;
SavenewPasswordHashToDatabase(sTheSaltedHashedUnPassCombination) 
```

您永远不会存储 sPassWord。

B）当用户登录时，您对提供的用户名和密码执行完全相同的操作，然后将生成的哈希与数据库中先前存储的值进行比较，以便您使用：

```
Dim sThePreviouslyCreatedHashFromTheDatabase = GetHashForUserFromDatabase(usernameProvided)
Dim mySalt = "A deliciously salty string! fillED WIth all KindS of Junkk(&^&*(£"
Dim d As New Encryption.Data(mySalt + usernameProvided+ passwordProvided)
Dim hash As New Encryption.Hash(Encryption.Hash.Provider.SHA256)
hash.Calculate(d)
Dim sTheSaltedHashedUnPassCombination = hash.Value.Hex;
if (sThePreviouslyCreatedHashFromTheDatabase.Equals(sTheSaltedHashedUnPassCombination))
    'UN & Password Valid!
else
    'UN & PW Invalid!
end 
```

（请原谅任何错误，VB 不是我的语言）

要回答您给定的问题：

1) 见上文。永远不要直接存储密码，存储哈希值

2) 使用 char(X)，从哈希返回的字符数是恒定的，所以你可以给它一个已知的存储大小。

3）您有效存储的是用户的密码，用他们的用户名加盐，也用服务器上的常数加盐。这将是一个固定长度的字符串，您不能将此字符串更改回单独的用户名和密码。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-19T15:22:53.410

1.  散列的全部意义在于您存储的是散列而不是明文密码，并且它们无法恢复（至少很难恢复）。[散列函数](http://en.wikipedia.org/wiki/Hash_function)被设计为单向函数，因此*无法*检索- 这是它们的本质。
2.  `nchar[n]`可能是最好的选择，因为常见的哈希算法会产生恒定长度的结果（[SHA1](http://en.wikipedia.org/wiki/Sha1)输出 160 位哈希）。通常的做法是将散列转换为[Base64](http://en.wikipedia.org/wiki/Base64)，以便可以将其存储为 ASCII 文本。
3.  盐只是一种将随机位添加到哈希中以使破解过程复杂化的方法。每多一点盐就意味着暴力破解器必须花费两倍的时间（并使用两倍的内存）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-22T23:14:53.097

ASP.NET 包含一个基于 SQL 的[成员资格提供程序](http://msdn.microsoft.com/en-us/library/yh26yfzy.aspx)，它允许您创建、存储和验证[加密或散列密码](http://msdn.microsoft.com/en-us/library/system.web.security.sqlmembershipprovider.passwordformat.aspx)，而无需您做任何事情 - 正如 Eric Lippert 所说：

> 让我给你所有关于滚动你自己的加密算法和安全系统的标准警告：不要。
> 
> *   [你想加盐吗？第一部分：安全与默默无闻](http://blogs.msdn.com/ericlippert/archive/2005/01/28/you-want-salt-with-that-part-one-security-vs-obscurity.aspx)
> *   [你想加盐吗？第二部分：安全与默默无闻](http://blogs.msdn.com/ericlippert/archive/2005/01/31/you-want-salt-with-that-part-two-we-need-a-hash.aspx)
> *   [你想加盐吗？第三部分：我们需要一个哈希](http://blogs.msdn.com/ericlippert/archive/2005/02/03/you-want-salt-with-that-part-three-salt-the-hash.aspx)
> *   [你想加盐吗？第四部分：挑战-响应](http://blogs.msdn.com/ericlippert/archive/2005/02/07/you-want-salt-with-that-part-four-challenge-response.aspx)

# asp.net - 通过 Web 应用程序基于 WCF 表单的身份验证 - 传递凭据

> ID：883373
> 
> 赞同：0
> 
> 时间：2009-05-19T15:13:49.840
> 
> 标签：asp.net, wcf, wcf-security

我有一个简单的 Web 服务，通过基于表单的身份验证来处理安全性。

```
WCFTestService.ServiceClient myService = new
          WCFTestService.ServiceClient();
myService.ClientCredentials.UserName.UserName = "user";
myService.ClientCredentials.UserName.Password = "secret";
lblResult.Text = myService.GetData(1231);
myService.Close(); 
```

我正在通过网络应用程序访问它。所以我想做一次以上但为了安全/性能不必再做一次。我在想像下面这样的事情，但是当我使用 FormsAuthentication 时，这将不起作用...

```
//Obtain the authenticated user's Identity and impersonate the original caller
using (((WindowsIdentity)HttpContext.Current.User.Identity).Impersonate())
{
  WCFTestService.ServiceClient myService2 = new WCFTestService.ServiceClient();
  lblResult.Text = "From Logged On Credentials"+myService2.GetData(1231);
  myService2.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T19:00:34.270

您要做的是在您的客户端和您的服务之间建立一个“安全会话”。这是一个仅适用于 wsHttpBinding 的概念 - 因此，如果您不使用该特定绑定，它将无法工作。

要建立安全会话，您需要在客户端和服务器的配置文件中设置一些特定的配置属性 - 您当然可以通过阅读文档（查找“建立安全上下文”）或查看 Michele Leroux Bustumante 的优秀 WCF[截屏视频](http://www.dasblonde.net/ct.ashx?id=c639724e-3ae5-4e8b-9d3f-d4e42dea41e6&url=http%3a%2f%2fmsevents.microsoft.com%2fCUI%2fEventDetail.aspx%3fEventID%3d1032344346%26Culture%3den-US)来找到这些设置关于 MSDN[上的安全基础。](http://www.dasblonde.net/ct.ashx?id=c639724e-3ae5-4e8b-9d3f-d4e42dea41e6&url=http%3a%2f%2fmsevents.microsoft.com%2fCUI%2fEventDetail.aspx%3fEventID%3d1032344346%26Culture%3den-US)

但实际上：我不建议尝试使用安全会话。在正常情况下，使用 per-call services 是首选选项，并且每次调用服务重新进行身份验证的开销可以忽略不计。

马克

# linux - 通过我的服务器上的 php 脚本进行身份验证的方法

> ID：883375
> 
> 赞同：0
> 
> 时间：2009-05-19T15:14:15.487
> 
> 标签：linux, authentication, web-applications, cron

我正在使用一项新服务从服务器中提取 xml 数据。

该服务提供了两种登录方法，一种是通过 url 查询：

```
http://<server>/login.asp?username=<User Name>&password=<Password> 
```

服务器返回一个有效期为 7 天的 cookie。这意味着我不需要为每个查询都登录（并使我的脚本效率降低），我只需要每周登录一次。

我刚刚意识到我不能这样做，因为脚本不是从 Web 浏览器运行的，而是从服务器上的 cron 脚本运行的。有没有办法在我的服务器上存储 cookie，或者我必须采用第二种方法：

令牌

> 令牌是使用带有密钥和时间戳的 DES 算法加密的用户名、密码和用户组。令牌可以由任何应用程序使用具有适当密钥的 DES 算法生成，也可以使用以下安全调用：令牌包含在返回页面的正文中，有效期为一小时

我对这种方法一无所知。你能为我指出正确的方向吗？谢谢。

埃德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T13:47:57.057

> 有没有办法在我的服务器上存储 cookie？

是的。就是这样：

```
curl -c cookies.txt http://<server>/login.asp?username=<User Name>&password=<Password> 
```

这将以 netscape 格式将它们写入`cookies.txt`.

诺亚

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T17:32:36.273

如果您有权访问实际的登录脚本，则可以始终包含某种只有您知道的唯一 ID。

更好的是使用一些 HMAC-(MD5/SHA1) 方案，比如 OpenAuth。如果您很懒惰，只需在您访问的每个 url 中包含类似 '?key=somethingonlyyouknow' 的内容，绕过用户名 + 密码。用户 + 密码方案“应该”仅由人类使用，而不是由机器使用。

如果一切都失败了，请更改您的脚本以存储 cookie。如果您使用“curl”，您可以指定应该存储 cookie，以及应该存储在哪个文件中。

# sql - MS ACCESS 中的子查询：每个日期每个“人”只选择一条记录

> ID：883383
> 
> 赞同：3
> 
> 时间：2009-05-19T15:16:23.940
> 
> 标签：sql, ms-access, select, subquery

我正在使用 Microsoft Access 中的已分析表。它有很多字段，但在这种情况下用于过滤的三个字段是analyzed.readings_miu_id、analyzed.ReadDate、analyzed.ReadTime。我需要从“已分析”表中提取记录，其中 readings_miu_id 分组在一起，然后按 ReadDate 排序，但仅显示所述日期的最后一个条目，这可能是 ReadTime 中的最高值时间。我创建了一个查询：

```
SELECT readings_miu_id, Reading, ReadDate, ReadTime, 
    MIUwindow, SN, Noise, RSSI, OriginCol, ColID, Ownage
FROM analyzed
WHERE analyzed.ReadDate Between #4/21/2009# and #4/29/2009#  
AND analyzed.ReadTime= ( 
    SELECT TOP 1 analyzed.ReadTime 
    FROM analyzed 
    WHERE analyzed.readings_miu_id = *????*** 
    ORDER BY analyzed.ReadTime DESC); 
```

*????*** 被用来表明我不知道该放什么

如果我输入了一个有效的 readings_miu_id，我会得到一条该 readings_miu_id 时间最长的记录。

我如何使用像上面这样的子查询来仅提取每个 ReadDate 每个 readings_miu_id 的最后一个 ReadTime？

*readings_miu_id*不是表 ID，它更类似于 Item Number 或 Name

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T15:35:20.673

```
 SELECT readings_miu_id
    , Reading , ReadDate , ReadTime
    , MIUwindow, SN, Noise, RSSI
    , OriginCol, ColID, Ownage 
 FROM analyzed AS A
    WHERE analyzed.ReadDate Between #4/21/2009# and #4/29/2009# 
       AND analyzed.ReadTime=
          (SELECT TOP 1 analyzed.ReadTime FROM analyzed 
             where analyzed.readings_miu_id = A.readings_miu_id 
                AND analyzed.ReadDate = A.ReadDate
             ORDER BY analyzed.ReadTime DESC); 
```

我只是将主表别名为 A 并在子查询中引用它。不确定是否需要在子查询中按 ReadDate 过滤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T15:31:13.550

这会让你接近。“将 readings_miu_id 组合在一起”的说法让我感到困惑。不确定您是否需要 GroupBy 或对该字段进行排序。此查询将为您提供分析表中具有相同日期的记录，但该给定日期的“最大：”时间。听起来这就是你想要的。

```
SELECT readings_miu_id, Reading, ReadDate, ReadTime, MIUwindow, SN, Noise, RSSI, OriginCol, ColID, Ownage 
FROM analyzed ,
(
  Select ReadDate as matchDate, Max(ReadTime) as matchTime
  FROM analyzed 
  Where analyzed.ReadDate Between #4/21/2009# and #4/29/2009# 
  Group by ReadDate
) dateAndTime
WHERE analyzed.ReadDate Between #4/21/2009# and #4/29/2009# AND ReadDate = dateAndTime.matchDate AND readTime = dateAndTime.matchTime  
Order By readDate 
```

# sql-server - 如何使用存储过程从 FTP 站点获取文件

> ID：883384
> 
> 赞同：3
> 
> 时间：2009-05-19T15:16:33.033
> 
> 标签：sql-server

我想创建一个存储过程（在 SQL Server 2005 上），它**从 FTP 站点获取文件**，将其保存在本地，然后运行 ​​SSIS 包以将文件的内容导入表中。

我对如何通过调用存储过程来**获取文件提出了一些建议。**我应该使用 SQL CLR、调用执行它的 SSIS 包、xp_cmdshell 还是其他什么？

我希望这个过程尽可能通用，这样我们就可以一遍又一遍地使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T16:08:22.277

我支持 SSIS 路线。

通过创建通用 FTP 例程节省的任何东西都很棒，但除非所有文件的布局相同，否则无论如何您都无法使用单个可重复使用的 SSIS 包轻松处理不同文件的导入。您可以处理 SSIS 中的所有错误处理和日志记录，您不必担心在外部处理 FTP 并在那里处理错误，然后如果成功进入导入包，无论如何您都必须在那里处理任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T15:23:14.940

我建议你走SSIS路线。您需要的所有组件和技术都已创建供您使用。

如果您愿意，您还可以在将数据导入数据库之前添加一层验证和数据转换。

# .net - 无法围绕 wpf 数据绑定

> ID：883395
> 
> 赞同：0
> 
> 时间：2009-05-19T15:18:34.713
> 
> 标签：.net, wpf, data-binding, observablecollection

我的场景：一个 wpf 表单有一个文本框和一个 wpf toolkig [datagrid](http://wpf.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=25047)。在文本框中输入文本时，我的服务会返回一个`IEnumerable<TranslationItem>`项目。我希望我的数据网格显示此服务的结果。

我试着用谷歌搜索，但我无法得到正面或反面。我才刚刚开始学习 WPF，大多数使用过的术语都让我无法理解。
我收集到的是我应该把我的服务结果放在一个 ObservableCollection 中，不费吹灰之力。但后来我想以某种方式将它绑定到我的数据网格。我怎样才能做到这一点？网格如何知道要生成哪些列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T16:26:36.630

> 我收集到的是我应该把我的服务结果放在一个 ObservableCollection 中，不费吹灰之力。但后来我想以某种方式将它绑定到我的数据网格。我怎样才能做到这一点？

最简单的方法是将 DataGrid 的 ItemsSource 属性设置为 ObservableCollection。

> 网格如何知道要生成哪些列？

DataGrid 反映该集合中的对象，并为它找到的每个公共属性创建一个列。请参阅[此处](http://windowsclient.net/wpf/wpf35/wpf-35sp1-toolkit-datagrid-feature-walkthrough.aspx#autogen)了解更多信息。

如果您直接设置 ItemsSource 属性，那么它并不是真正的 wpf 绑定。这是我在 WPF 中开始数据绑定时发现的三个有用的链接。

[Bea Stollnitz：“{Binding}”是什么意思？](http://bea.stollnitz.com/blog/?p=5)
[WPF 基本数据绑定常见问题解答](http://blogs.msdn.com/wpfsdk/archive/2006/10/19/wpf-basic-data-binding-faq.aspx)
[MSDN：数据绑定操作方法主题](http://msdn.microsoft.com/en-us/library/ms752039.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T07:27:36.950

虽然可以为此使用 ObservableCollection，但取决于它的使用方式，您不会从中获得任何好处。ObservableCollection 的关键特性是它实现了 INotifyCollectionChanged。这个接口的作用是提供一个通知机制来告诉 UI 一个属性已经改变。由于 ObservableCollection 已经实现了这一点，如果您将 DataGrid、ListBox、ItemsControl 等的 ItemSource 属性绑定到此类型的集合，它将在任何时候添加/删除/替换/移动/重置项目时自动更新 UI。因此，每次您想使用新的 IEnumerable 结果集更新集合时，都必须先清除集合，然后再添加新结果。

但是，在这种情况下，我会推荐另一个选项而不是 ObservableCollection。它是使用一个叫做 ObjectDataProvider 的东西。使用它我们可以完全避免后面的代码，并且它整体上更干净。所以我们在某个地方有我们的服务，在本例中是在我的 Window.xaml.cs

```
public class TranslationService
{
    public IEnumerable<string> Translate(string s)
    {
        return s.ToCharArray().Select(c => c.ToString());
    }
} 
```

就像您描述的服务一样，它从文本框中获取一个字符串，并返回一个 IEnumerable。现在，在 XAML 中，我们可以使用该服务并对其进行调用。

在窗口声明中，我们为服务所在的位置添加命名空间：

```
 xmlns:local="clr-namespace:WpfApplication4" 
```

现在，在我们的 Window.Resources（或 UserControl，或其他任何地方）中，我们可以引用我们的服务。一旦我们将服务公开为资源，我们就可以创建一个 ObjectDataProvider 来公开我们希望使用的 Translate 方法。

```
<Window.Resources>
    <local:TranslationService x:Key="MyTranslationService" />
    <ObjectDataProvider x:Key="MyProvider"
                        ObjectInstance="{StaticResource MyTranslationService}"
                        MethodName="Translate">
        <ObjectDataProvider.MethodParameters>
            ""
        </ObjectDataProvider.MethodParameters>
    </ObjectDataProvider>
</Window.Resources> 
```

ObjectDataProvider 以我们的 Service 为键，并使用 String 参数调用 Translate 方法。现在我们要做的就是让它响应我们的文本框。

我们可以通过使用一些 Binding 属性来做到这一点。我们希望 TextBox 中的 TextProperty 绑定到 ObjectDataProvider，因此我们将 Source 属性设置为指向它。我们要在 Path 中绑定的 ObjectDataProvider 部分是 MethodParameter。现在，我们将其设置为直接绑定到该属性的源，并且只移动一种方式，这意味着 ObjectDataProvider 的方法参数不会更新 TextBox 的文本。最后，我们可以将 UpdateSourceTrigger 设置为 PropertyChanged，告诉绑定在对象数据提供程序中设置我们绑定到的源，只要文本有任何更改。

```
<StackPanel>
        <TextBox TextChanged="OnTextChanged"
            Text="{Binding Source={StaticResource MyProvider}, Path=MethodParameters[0], BindsDirectlyToSource=True, Mode=OneWayToSource, UpdateSourceTrigger=PropertyChanged}" />
        <ListBox ItemsSource="{Binding Source={StaticResource MyProvider}}" />
    </StackPanel> 
```

剩下的就是在 Grid 中设置 ItemsSource，或者在本例中设置一个简单的 ListBox。

关于 DataGrid 的最后一部分：如果您使用的是 WPFToolkit 的数据网格，它确实具有可以通过属性设置的自动生成功能，您可以在[此处](http://sweux.com/blogs/smoura/index.php/wpf/2009/04/15/introducing-the-wpf-toolkit-datagrid/)找到更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T15:22:49.760

您将网格的 DataSource（甚至 DataContext）设置为 Observable Collection。

我不熟悉该数据网格，但大多数网格都有选项可以将 Observable Collection 中该类型的所有公共属性公开为列，或者您在 XAML 中显式设置列布局并且列定义的属性之一是用于列数据的对象的属性。

例如，使用 Infragistics 数据网格

```
 <igDP:Field Name="OrderSize" Label="Order Size">
                    <igDP:Field.Settings >
                        <igDP:FieldSettings CellWidth="75">
                            <igDP:FieldSettings.EditorStyle>
                                <Style TargetType="{x:Type Editors:ValueEditor}" >
                                    <Style.Setters>
                                        <Setter Property="Format" Value="#,##0"/>
                                    </Style.Setters>
                                </Style>
                            </igDP:FieldSettings.EditorStyle>
                        </igDP:FieldSettings>
                    </igDP:Field.Settings>
                </igDP:Field> 
```

名称是您在要使用的对象上设置属性的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T15:24:21.583

您的网格可以直接构建列，也可以指定所需的列类型。如果你看这个[视频](http://download.microsoft.com/download/2/7/8/2789D34C-ECAB-48E1-9982-A95BDE19426B/winvideo-FirstWPFApplicationL.wmv)，它会解释它。这适用于 VS2010，但基本原理与 VS2008 相同——尽管实现方式略有不同，因为它没有完全集成。

至于如何绑定，请将保存您的项目的 ObservableCollection 分配给网格的 ItemsSource 属性。

# flash - 如何将存储在数据库中的文件路径传递到 ASP.NET MVC (VB.NET) 中的 Flash

> ID：883396
> 
> 赞同：0
> 
> 时间：2009-05-19T15:18:37.740
> 
> 标签：flash, model-view-controller

我在 ASP.NET MVC 应用程序中使用 JW Player，我正在尝试从数据库传递文件路径。

参数名称="flashvars" 值="文件=<%ResolveUrl(item.VideoPath)%>&image=preview.jpg"

我没有得到文件路径。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T15:21:27.407

% 后面需要一个等号，如下所示：

```
param name="flashvars" value="file=<%=ResolveUrl(item.VideoPath)%>&image=preview.jpg" 
```

# sql-server-2005 - 为什么 SQLCLR proc 运行速度比相同的代码客户端慢

> ID：883407
> 
> 赞同：2
> 
> 时间：2009-05-19T15:19:54.820
> 
> 标签：sql-server-2005, sqlclr

我正在编写一个存储过程，完成后将用于逐列扫描临时表中的虚假数据。

练习的第一步只是扫描表格——这就是下面的代码所做的。问题是此代码在 5:45 秒内运行 --- 但是作为控制台应用程序运行的相同代码（当然更改连接字符串）在大约 44 秒内运行。

```
 using (SqlConnection sqlConnection = new SqlConnection("context connection=true"))
    {
        sqlConnection.Open();
        string sqlText = string.Format("select * from {0}", source_table.Value);
        int count = 0;
        using (SqlCommand sqlCommand = new SqlCommand(sqlText, sqlConnection))
        {
            SqlDataReader reader = sqlCommand.ExecuteReader();
            while (reader.Read())
                count++;
            SqlDataRecord record = new SqlDataRecord(new SqlMetaData("rowcount", SqlDbType.Int));
            SqlContext.Pipe.SendResultsStart(record);
            record.SetInt32(0, count);
            SqlContext.Pipe.SendResultsRow(record);
            SqlContext.Pipe.SendResultsEnd();
        }
    } 
```

然而，相同的代码（当然不同的连接字符串）在大约 44 秒内在控制台应用程序中运行（这更接近我在客户端的预期）

我在 SP 方面缺少什么，这会导致它运行如此缓慢。

请注意：我完全理解，如果我想要行数，我应该使用 count(*) 聚合 --- 这不是本练习的目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T16:51:43.657

您正在编写的代码类型极易受到 SQL 注入的影响。您可以使用 RecordsAffected 属性来查找阅读器中的行数，而不是像您一样处理阅读器。

编辑：

在做了一些研究之后，您看到的差异是上下文连接和常规连接之间的设计差异。彼得·德贝塔（Peter Debetta）对此发表了博客并写道：

“上下文连接是这样编写的，它一次只获取一行，因此对于 2000 万个奇数行中的每一行，代码分别请求每一行。但是，使用非上下文连接，它请求 8K 值一次行。”

[http://sqlblog.com/blogs/peter_debetta/archive/2006/07/21/context-connection-is-slow.aspx](http://sqlblog.com/blogs/peter_debetta/archive/2006/07/21/context-connection-is-slow.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T16:24:45.087

好吧，答案似乎毕竟在连接字符串中。

```
context connection=true 
```

相对

```
server=(local); database=foo; integrated security=true 
```

出于某种奇怪的原因，使用“外部”连接，SP 的运行速度几乎与控制台应用程序一样快（仍然没有那么快！——55 秒）

当然，现在必须将程序集部署为外部而不是安全的——这会带来更多的挫败感。

# css - 使用mootools 1.11加载后的ie6背景图像png AlphaImageLoader问题

> ID：883413
> 
> 赞同：0
> 
> 时间：2009-05-19T15:21:05.957
> 
> 标签：css, mootools, background-image

我正在尝试在更改徽标 div 的背景图像的 mootools onclick 事件之后在 ie6 中呈现 .png 背景图像。

这是刚刚的相关代码-

```
if(!window.ie6){
    $('logo').setStyle('background-image', imagePath);
}else{
    $('logo').setStyles({
    filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+imagePath+")"
    });
} 
```

无论出于何种原因，这似乎都不起作用！该事件被调用并且适用于所有其他浏览器，但在 ie6 中运行时徽标只是空白。

如果有人能对此有所了解或有任何想法，我将不胜感激。

干杯，彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T13:40:11.927

您是否尝试过将 PNG 保存为 PNG8？这样你就可以优雅地处理IE6了。节省了所有的 alpha 负载麻烦。

此外，为什么不尝试在条件样式表中编写您的 CSS，并且只需更改相关项目的类（或添加更多内容）而不是其内联属性。

[http://www.sitepoint.com/blogs/2008/03/20/making-ie6-friendly-png8-images/](http://www.sitepoint.com/blogs/2008/03/20/making-ie6-friendly-png8-images/)

# objective-c - 如果两个方法相互调用，而我不想在头文件中公开其中一个方法，我该怎么办？

> ID：883414
> 
> 赞同：0
> 
> 时间：2009-05-19T15:21:11.683
> 
> 标签：objective-c

我有两种方法-a 和-b。-a 有时调用-b，-b 有时调用-a。这两种方法都是私有的，而不是从外部调用。

但是我必须在 .h 文件中公开其中一个，否则编译器会发疯，并对其中任何一个发出警告。

有没有针对该问题的有效和良好实践的解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T15:30:34.863

Traditionally, what you'd do is define a category (something like `@interface MyClass (MyClass_Private)` inside the implementation file that declares the private methods. Apple recently introduced a feature called a class extension that is intended for this exact case. It's basically a specialization of a category, but the class *has to* implement the methods when it's first defined. It looks like:

```
@interface MyObject ()
    - (void)setNumber:(NSNumber *)newNumber;
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T01:48:34.543

如果您真的希望函数是私有的，则需要将它们声明为`static`. 为了消除循环依赖，应该在定义另一个之前声明一个。这是一个简单的例子：

```
static void b(); /* forward declaration */

static void a()
{
    if (foo)
        b(); /* forward-declared, so we're ok */
}

static void b()
{
    if (bar)
        a(); /* already defined, so we're ok */
} 
```

这都是有效的 C，因此根据 OP 的评论，我认为这也是有效的 ObjC。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T15:29:01.743

实现一个[协议](http://en.wikipedia.org/wiki/Objective-C#Protocols)。

或者

编写第二个带有[类别](http://en.wikipedia.org/wiki/Objective-C#Categories)的头文件。

# c# - ASP.net 中的可折叠面板

> ID：883417
> 
> 赞同：-1
> 
> 时间：2009-05-19T15:21:47.093
> 
> 标签：c#, asp.net, web-controls

好的，我想我只是在这里犯了一个愚蠢的错误，但我想使用良好的 ASP.net ViewState/PostBack 模型创建一个可折叠的控件（源自 System.Web.UI.Control）。

我的班级中有一个 ImageButton，我在 OnInit() 事件中对其进行了初始化：

```
 private ImageButton _collapseImage;
    protected override void OnInit(EventArgs e)
    {
        if (_collapseImage == null)
        {
            _collapseImage = new ImageButton();
            _collapseImage.Click += CollapseImageClick;
        }
        _collapseImage.ImageUrl = string.Format("/images/{0}", IsCollapsed ? "plus.gif" : "minus.gif");
        _collapseImage.Width = 16;
        _collapseImage.Height = 16;
    } 
```

IsCollapsed 是一个布尔值，CollapseImageClick 只是切换它：

```
 private void CollapseImageClick(object sender, ImageClickEventArgs e)
    {
        IsCollapsed = !IsCollapsed;
    } 
```

然后我的 CreateChildControls 正在检查这个参数：

```
 protected override void CreateChildControls()
    {
        Panel pnl = new Panel();

        pnl.Controls.Add(_collapseImage);
        if(!IsCollapsed)
        {
            // Add some more Controls
        }
        Controls.Add(pnl);
    } 
```

不幸的是，它不起作用。我点击 ImageButton，页面确实是回发，但它不会改变它的状态 - 如果它之前展开，它仍然在之后展开。

在构造函数中，我设置 EnableViewState = true;

为了坚持这些更改，我缺少什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T15:25:45.403

您实际上是否将面板的状态（折叠的布尔值）保存到视图状态中？

```
ViewState("collapsed") = Collapsed 
```

视图状态不会自动保存您拥有的任何属性/变量，您必须告诉它要做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T16:32:56.610

如果 ViewState 不适合您，您可以随时尝试将其存储为会话。

# c - 使用 -std=c99 编译时，struct ip_mreq 消失

> ID：883424
> 
> 赞同：4
> 
> 时间：2009-05-19T15:22:32.180
> 
> 标签：c, linux, sockets

在我们使用 gcc -std=c99 编译的一些 linux 机器上，使 struct ip_mreq 消失（包含在 netinet/in.h 中）

我们应该使用其他接口吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-21T15:18:18.150

试试 --std=gnu99。

GCC 的默认值是“--std=gnu89”，这意味着带有 GNU 扩展的 C89。通过选择“--std=c99”，您将启用 C99，但禁用 GNU 扩展。'--std=gnu99' 将同时选择 C99 和 GNU 扩展支持，让您两全其美。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T17:25:12.380

我认为c99之前没有另一个接口。`-std=c99`如果您在源代码的顶部添加以下内容，则可以使用它：

```
#define __EXTENSIONS__ 
```

但更好的方法可能是

```
#define _XOPEN_SOURCE 
```

请注意，我尚未确认。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T15:17:18.963

我有同样的问题。当我不提供“-std = c99”时，使用 gcc 一切都可以正常编译，但是当包含该标志时，编译器无法说明类型为“struct ip_mreq”的字段“类型不完整”。

这是一个问题，因为我依赖于一些 C99 功能。

# vim - 如何让 Vim 自动放置大括号？

> ID：883437
> 
> 赞同：36
> 
> 时间：2009-05-19T15:24:09.883
> 
> 标签：vim, autocomplete

在编辑文件时，如果 Vim 会在我一开始`.scm`就自动放置结束括号，那就太好了。我该怎么做呢？`)``(`

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-05-19T15:26:55.290

您可以根据自己的喜好映射左大括号：

```
:imap ( ()<left> 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2009-05-19T15:39:50.157

尝试使用[AutoClose](http://www.vim.org/scripts/script.php?script_id=1849)插件。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-01-21T13:00:35.723

最简单的答案是包含一张地图。例如。：

```
:inoremap ( ()<left> 
```

问题是您需要为每个要自动关闭的符号添加一个条目（'{'、'['、'"'等）。此外，插件通常更智能，提供诸如检测“关闭”之类的功能字符，而不是重复它。

上述解决方案和*大多数*插件的问题在于，它们往往会破坏撤消序列（[gundo](http://sjl.bitbucket.org/gundo.vim/)任何人？），如[:help ins-special-special](http://vimdoc.sourceforge.net/htmldoc/insert.html#ins-special-special)中所述。

这是执行您要求的插件列表（来自[vimtips](http://vim.wikia.com/wiki/Automatically_append_closing_characters)）：

*   [delimitMate](http://www.vim.org/scripts/script.php?script_id=2754) by Israel Chauca Fuentes（可配置，不会破坏撤消/重做/重复，但是 - 破坏 iabbr）也在[GitHub 上](https://github.com/Raimondi/delimitMate)
*   [Karl Guertin 的AutoClose](http://www.vim.org/scripts/script.php?script_id=1849)（自动关闭特定的硬编码字符，但不会破坏撤消/重做/重复）
*   [蒂亚戈](http://www.vim.org/scripts/script.php?script_id=2009)·阿尔维斯的自动关闭（可配置，但会中断撤消/重做/重复）
*   [auto-pairs](http://www.vim.org/scripts/script.php?script_id=3599) Auto Pairs by Miaojiang（可配置，但会中断撤消/重做/重复）
*   [ClosePairs](http://www.vim.org/scripts/script.php?script_id=2373) by Edoardo Vacchi（可配置，但会中断撤消/重做/重复）
*   [夏](https://github.com/kana/vim-smartinput)野假名的智能输入（可配置，但会中断撤消/重做/重复）

除了[vimtips](http://vim.wikia.com/wiki/Automatically_append_closing_characters)，网络上还有[另一个很好的解释](http://sharats.me/vim-undo-breaks-with-auto-close-plugins.html)。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-05-19T21:38:40.310

我也需要一个，我已经尝试了一些插件：

自动关闭，[http://www.vim.org/scripts/script.php?](http://www.vim.org/scripts/script.php?script_id=1849) script_id=1849，有点激进。

简单的对，[http://www.vim.org/scripts/script.php?](http://www.vim.org/scripts/script.php?script_id=2339) script_id=2339 ，取决于 Python。如果您在 Linux 上，这不是问题，但在 Windows 上，将 Vim 版本与您拥有的 Python 解释器匹配可能会很麻烦。

我的建议是 ClosePairs，你可以在[http://www.vim.org/scripts/script.php?script_id=2373](http://www.vim.org/scripts/script.php?script_id=2373)找到它，它对我来说非常有效。它简单实用。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-05-19T16:33:39.667

关于这个主题有很多提示和插件。查看 vimtips 站点中的[相关条目](http://vim.wikia.com/wiki/Automatically_append_closing_characters)。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-07-27T18:09:53.103

我目前正在使用[自动配对](https://github.com/jiangmiao/auto-pairs)，效果非常好。

插件破坏撤消/重做/重复的问题似乎在上面列出的一些插件中仍然存在，但我认为这不是什么大问题（好吧，至少目前对我来说不是）。

*不过需要注意的是，在撰写本文时，我无法使用 :helptags 生成带有此插件的帮助文件。*

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-09-24T17:14:29.637

查看这个新插件：[Townk 的 vim-autoclose](https://github.com/Townk/vim-autoclose)。前面提到的[AutoClose](https://github.com/vim-scripts/AutoClose)具有攻击性，有时会以不受欢迎的方式表现。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-21T18:10:29.753

使用这个有问题（通过 imap 或脚本之一）。您将无法使用该`.`命令重复完整的编辑。

`e.g. (foo) with . only gets you foo, without the brackets.`

如果您将括号作为两个字符正常插入，则效果很好。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-23T03:56:58.350

您可以尝试下载以下插件 [AutoClose ：插入匹配的括号、括号、大括号或引号](http://www.vim.org/scripts/script.php?script_id=1849)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-03-13T21:23:38.860

[https://github.com/vim-scripts/Auto-Pairs](https://github.com/vim-scripts/Auto-Pairs)

测试了这个插件的undo redo。2013 它只是工作。还带有 python-mode 插件。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-08-03T08:39:40.653

cohama 有一个新插件：

**`lexima.vim`**( [github](https://github.com/cohama/lexima.vim) )

（还没有在 vim.org 上）

**这个插件支持`.`命令！**
Afaik，这是唯一支持这个的插件。

撤消/重做序列也有效。

# c# - 在不改变外观的情况下禁用组合框

> ID：883445
> 
> 赞同：3
> 
> 时间：2009-05-19T15:25:22.097
> 
> 标签：c#, wpf, combobox

有没有办法在 WPF 中禁用更改 ComboBox 的值而不给它禁用 ComboBox 的视觉属性？例如，我知道对于文本字段，您可以将 IsReadOnly 属性设置为 true。但是，对 ComboBox 执行此操作不会阻止用户选择不同的值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-19T16:40:57.350

Benages 先生，我认为在 ComboBox 上将 IsHitTestVisible 和 Focusable 设置为 false 可能会奏效。希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-19T16:11:42.337

虽然我同意禁用的控件应该看起来被禁用，但您可以将 ComboBox ControlTemplate 设置为标准的（或您使用的）删除任何标准功能

例如，这将为您提供一个看起来不错的只读组合框

```
 <ComboBox>
    <ComboBox.Template>
        <ControlTemplate TargetType="{x:Type ComboBox}">
          <Grid>
            <Microsoft_Windows_Themes:ListBoxChrome x:Name="Border" Height="23" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" RenderFocused="{TemplateBinding IsKeyboardFocusWithin}" RenderMouseOver="{TemplateBinding IsMouseOver}"/>
            <TextBlock FontSize="{TemplateBinding FontSize}" VerticalAlignment="Center" Text="Selected Item" Margin="5,0,0,0"></TextBlock>
          </Grid>
      </ControlTemplate>
    </ComboBox.Template>
  </ComboBox> 
```

您需要包含以下命名空间

```
xmlns:Microsoft_Windows_Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T15:41:48.050

从可用性/约定的角度来看，您确定这是一个好主意吗？如果您的目标是可读性，也许您可​​以更改禁用的颜色以提高对比度。

[http://social.msdn.microsoft.com/forums/en-US/wpf/thread/45dd7614-326b-4a51-b809-d25a3ff1ade8/](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/45dd7614-326b-4a51-b809-d25a3ff1ade8/)

无论如何，我怀疑您可以编写一个 onChange 事件处理程序来将值重置为上一个条目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T15:47:57.740

您可以设置前景色和背景色，这似乎会覆盖禁用的颜色。下拉按钮显示为禁用，这很好。

编辑我在 IE 6/Kaxaml 中测试的代码。

```
<Page
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <StackPanel>
  <ComboBox  Foreground="black" Background="white" IsEditable="True" Text="Hello" IsEnabled="false">
  <ComboBoxItem>Test1</ComboBoxItem>
  <ComboBoxItem>Test2</ComboBoxItem>
  <ComboBoxItem>Test3</ComboBoxItem>
  </ComboBox>
  </StackPanel>
</Page> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T15:48:05.617

我不确定它在.net 中是否相同，但是在我用来获取图片框、框架或其他容器的 VB6 时代（对不起，我不记得是哪个）。我会把组合框放在里面。对于用户来说，它看起来是一样的。当您禁用容器时，这也会锁定组合框，使其看起来正常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-16T23:43:43.123

那么，为什么要使用组合框。

我的选择是边框内的标签代替控件，表明这是一个仅显示的屏幕。

如果它必须看起来像一个组合框，最好使用像按钮但不可点击的主题对象。你甚至可以画一个灰色的下拉箭头，让它看起来更像一个组合框。

当标签可以正常工作时，实际上在屏幕上拥有一个人们无法交互的组合框似乎有点矫枉过正。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-28T17:03:38.887

> > *...防止用户选择不同的值。*

除了样式之外，您还可以通过覆盖一些 ComboBox 方法来禁用键盘输入：

```
using System.Windows.Controls;
using System.Windows.Forms;
using System.Windows.Input;

public class LockableComboBox : ComboBox
{

    protected override void OnSelectionChanged(SelectionChangedEventArgs e)
    {
        if (this.IsReadOnly)
        {
            e.Handled = true;
        }
        else
        {
            base.OnSelectionChanged(e);
        }
    }

    protected override void OnPreviewKeyDown(KeyEventArgs e)
    {
        if (this.IsReadOnly)
        {
            if ((e.Key == Key.C || e.Key == Key.Insert)
                && (Keyboard.Modifiers & ModifierKeys.Control) 
                == ModifierKeys.Control)
            {
                // Allow copy
                Clipboard.SetDataObject(SelectedValue, true);
            }
            e.Handled = true;
        }
        else
        {
            base.OnPreviewKeyDown(e);
        }
    }

    protected override void OnPreviewTextInput(TextCompositionEventArgs e)
    {
        if (this.IsReadOnly) 
        {
            e.Handled = true;
        }
        else
        {
            base.OnPreviewTextInput(e);
        }
    }

    protected override void OnKeyUp(KeyEventArgs e)
    {
        if (this.IsReadOnly)
        {
            e.Handled = true;
        }
        else
        {
            base.OnKeyUp(e);
        }
    }
} 
```

# jquery - 有没有办法使用 Jquery 在悬停时放大/缩小图像？

> ID：883448
> 
> 赞同：10
> 
> 时间：2009-05-19T15:26:20.877
> 
> 标签：jquery

有没有一种方法，使用 Jquery 在悬停时增长然后缩小图像（使用动画，使其看起来很平滑），而不会对布局产生太大影响（我假设填充也必须缩小然后增长）。

* * *

经过一番折腾，我终于想出了解决方案，感谢所有提供帮助的人。

```
<html>
<head>
<style type="text/css"> 
    .growImage {position:relative;width:80%;left:15px;top:15px}
    .growDiv { left: 100px; top: 100px;width:150px;height:150px;position:relative }
</style>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>

</head>
<body> 
<div class="growDiv"> 
      <img class="growImage" src="image.jpg" alt="my image"> 
</div>

<script type="text/javascript">

$(document).ready(function(){

    $('.growImage').mouseover(function(){
      //moving the div left a bit is completely optional
      //but should have the effect of growing the image from the middle.
      $(this).stop().animate({"width": "100%","left":"0px","top":"0px"}, 400,'swing');
    }).mouseout(function(){ 
      $(this).stop().animate({"width": "80%","left":"15px","top":"15px"}, 200,'swing');
    });;
});
</script>
</body></html> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-19T15:49:50.423

如果您在 CSS 中将图像绝对定位到文档，则当您为图像设置动画时，页面布局的其余部分不应更改。

您应该能够使用 jQuery 的 animate() 函数。代码看起来像这样：

```
$("#yourImage").hover(
    function(){$(this).animate({width: "400px", height:"400px"}, 1000);},        
    function(){$(this).animate({width: "200px", height:"200px"}, 1000);}
); 
```

此示例将 id=yourImage 的图像在鼠标悬停时增大到 400px 宽和高，并在悬停结束时将其恢复到 200px 宽和高。也就是说，您的问题更多在于 HTML/CSS 而不是 jQuery。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-19T15:39:59.207

增长和收缩操作很容易[`.animate`](http://docs.jquery.com/Effects/animate)：

```
$("#imgId").click(function(){
  $(this).animate({ 
    width: newWidth,
    height: newHeight
  }, 3000 );
}); 
```

问题是如何在不改变页面布局的情况下做到这一点。一种方法是使用绝对位于内容上方的副本。另一个可能是将图像绝对定位在相对固定大小的 div 内 - 尽管 IE 可能会遇到问题。

这是一个现有的图书馆，似乎可以满足您的要求[http://justinfarmer.com/?p=14](http://justinfarmer.com/?p=14)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-17T10:25:29.470

您可以将图像包装在 div （或您认为合适的任何 html 元素，li 等）中，并将其溢出设置为隐藏。然后使用 jQuery *.animate*以任何你喜欢的方式来增长那个 div。

因此，例如**html**可能是

```
<div class="grower">
  <img src="myimg.jpg" width="300" height="300" alt="my image">
</div> 
```

然后你的**CSS**看起来像

```
.grower {width:250px;height:250px;overflow:hidden;position:relative;} 
```

所以你的图像本质上是由 div 裁剪的，然后你可以在任何事件上增长它以使用**jQuery显示图像的完整大小**

```
$('.grower').mouseover(function(){
  //moving the div left a bit is completely optional
  //but should have the effect of growing the image from the middle.
  $(this).stop().animate({"width": "300px","left":"-25px"}, 200,'easeInQuint');
}).mouseout(function(){ 
  $(this).stop().animate({"width": "250px","left":"0px"}, 200,'easeInQuint');
});; 
```

*注意：您可能希望在 js 中添加额外的 css，例如增加 div 的 z-index 以便它可以在布局等上增长*

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-07-08T04:24:24.523

想根据这篇文章和[Fox](https://stackoverflow.com/questions/318630/get-real-image-width-and-height-with-javascript-in-safari-chrome)对相关问题的回答中的信息发布我正在使用的简单解决方案。

使用`<img>`这样的：`<img style="position: absolute;" class="resize" />`

您可以执行类似于以下内容的操作。它将采用图像的当前宽度+高度，在悬停（`current * 3`）时使其大 3 倍，然后在鼠标移出时将其恢复。

```
var current_h = null;
var current_w = null;

$('.resize').hover(
    function(){
        current_h = $(this, 'img')[0].height;
        current_w = $(this, 'img')[0].width;
        $(this).animate({width: (current_w * 3), height: (current_h * 3)}, 300);
    },
    function(){
        $(this).animate({width: current_w + 'px', height: current_h + 'px'}, 300);
    }
); 
```

这些`current_X`变量是全局的，因此可以在鼠标移出操作中访问它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T15:38:47.803

你不能使用jQuery的[动画](http://docs.jquery.com/Effects/animate)来实现吗？稍加修修补补，它应该是一个快照。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-20T05:24:32.793

如果您的意思是“不影响布局”，则需要更多地关注 CSS 而不是 javascript。

所涉及的 javascript 已经在此处发布...但是为了确保您的布局不被破坏，您需要*从布局的流程中删除您的图像。*

这可以通过绝对定位并将其 z-index 设置为更大的值来完成。然而，这并不总是最干净的解决方案......所以我建议你在父 DOM 元素中使用“position:relative”，在图像样式中使用“position:absolute”。

相对和绝对的相互作用非常有趣。你应该google一下。

干杯，jrh

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-08-03T05:05:34.947

-- HTML

```
<div class="container">
  <img id="yourImg" src="myimg.jpg">
</div> 
```

-- JS

```
$( ".container" ).toggle({ effect: "scale", persent: 80 }); 
```

--更多信息
[http://api.jqueryui.com/scale-effect/](http://api.jqueryui.com/scale-effect/)

# git - Git 与 Mercurial 存储库的互操作性

> ID：883452
> 
> 赞同：200
> 
> 时间：2009-05-19T15:26:51.250
> 
> 标签：git, version-control, mercurial, interop, dvcs

我在 Mac 上使用 GIT。说够了。我有工具，我有经验。我想继续使用它。这里没有战争...

问题总是与互操作性有关。大多数人使用SVN，这对我来说很棒。Git SVN 开箱即用，是一个简单的解决方案。人们可以继续愉快地使用 SVN，而且我的工作流程和工具都不会丢失。

现在......有些人和Mercurial一起来了。对他们来说很好：他们有他们的理由。但我找不到任何开箱即用的 GIT HG。我不想切换到 HG，但我仍然需要与他们的存储库互操作。

你们中的任何人都知道一个简单的解决方案吗？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-11-13T02:52:03.413

有一个新的 git-remote-hg 提供原生支持：

[Git 中对 Mercurial 和 Bazaar 的桥接支持](http://felipec.wordpress.com/2012/11/13/git-remote-hg-bzr-2/)

只需将[git-remote-hg](https://raw.githubusercontent.com/felipec/git-remote-hg/master/git-remote-hg)复制到您的 $PATH 中，使其可执行，仅此而已，没有依赖项（Mercurial 除外）：

```
git clone hg::https://www.mercurial-scm.org/repo/hg/ 
```

您应该能够像本地 Git 存储库一样对其进行推送和拉取。

当您推送新的 Git 分支时，将为它们创建 Mercurial 书签。

有关更多信息，请参阅[git-remote-hg wiki](https://github.com/felipec/git-remote-hg/blob/master/README.asciidoc)。

* * *

## 回答 #2

> 赞同：106
> 
> 时间：2009-07-06T21:06:31.573

您应该能够使用[hg-git](http://hg-git.github.com/)。

```
hg clone <hg repository> 
```

编辑`~/.hgrc`并添加：

```
[extensions]
hgext.bookmarks =
hggit = 
```

创建一个书签，以便您`master`在 git 中有一个：

```
cd <repository>
hg bookmark -r default master 
```

在存储库中编辑`.hg/hgrc`并添加：

```
[git]
intree = true 
```

现在您可以创建 git 存储库：

```
hg gexport 
```

您可以将生成的目录用作 git clone。从 mercurial 中提取将是：

```
hg pull
hg gexport 
```

并推动 mercurial ：

```
hg gimport
hg push 
```

（是的，您需要在此工作流程中使用 hg，但您的黑客攻击将全部在 git 中）

PS 如果您对此工作流程有任何疑问，请提交错误。

* * *

## 回答 #3

> 赞同：63
> 
> 时间：2012-06-24T15:31:43.540

从 2012 年 6 月开始更新。目前，当开发人员想要从 git 端工作时，似乎有以下 Git/Hg 互操作性方法：

1.  安装 Mercurial 和[**hg-git 扩展**](https://hg-git.github.io/)。您可以使用包管理器或使用`easy_install hg-git`. 然后确保您的 ~/.hgrc 中有以下内容：

    ```
    [extensions]
    hggit = 
    ```

您也可能会看到一些关于在`bookmarks`此处指定扩展名的参考资料，但自 1.8 版以来，这已内置于 Mercurial 中。以下是[有关在 Windows 上安装 hg-git 的一些提示](http://candidcode.com/2010/01/12/a-guide-to-converting-from-mercurial-hg-to-git-on-a-windows-client/)。

拥有 hg-git 后，您可以使用大致类似于[上面发布的 Abderrahim Kitouni 的](https://stackoverflow.com/a/1089221/674840)命令。不过，自 2009 年以来，此方法已得到[改进和调整](http://traviscline.com/blog/2010/04/27/using-hg-git-to-work-in-git-and-push-to-hg/)，并且有一个友好的包装器：[**git-hg-again**](https://github.com/abourget/git-hg-again)。这同时使用顶级目录作为 Mercurial 和 Git 的工作目录。它创建一个 Mercurial 书签，它与 Mercurial 存储库中（未命名）分支的尖端保持同步`default`，并从该书签更新本地 Git 分支。

2.  [**git-remote-hg**](https://github.com/rfk/git-remote-hg)是一个不同的包装器，同样基于 Mercurial`hg-git`扩展。这还利用了`git-remote-helpers`协议（因此得名）。它仅将顶层目录用于 Git 工作目录；它保持其 Mercurial 存储库裸露。它还维护了第二个裸 Git 存储库，以使 Git 和 Mercurial 之间的同步更安全，更符合 git 的习惯。

3.  [**git-hg**](https://github.com/cosmin/git-hg)脚本（以前在此处维护）[使用](https://github.com/offbytwo/git-hg)`hg-fast-export`不同的方法，基于[**快速导出项目**](http://repo.or.cz/w/fast-export.git)。与方法 2 一样，这也保留了一个裸 Mercurial 存储库和一个额外的裸 Git 存储库。

对于拉取，此工具会忽略 Mercurial 书签，而是将每个命名的 Mercurial 分支导入 Git 分支，并将默认（未命名的）Mercurial 分支导入 master。

一些评论将此工具讨论为仅 hg->git，但它声称已于 2011 年 12 月 7 日合并到 git->hg 推送支持中。不过，正如我在[对这些工具的评论中](https://github.com/dubiousjim/yagh/blob/master/Evaluation.md)解释的那样，该工具尝试实现的方式推送支持似乎不可行。

4.  还有[**另一个名为 git-remote-hg 的项目**](https://github.com/msysgit/msysgit/wiki/Guide-to-git-remote-hg)。与上面列出的版本不同，这个版本不依赖 hg-git，而是直接访问 Mercurial Python API。目前，使用它还需要一个修补版本的 git。我还没试过这个。

5.  最后，[**Tailor**](http://progetti.arstecnica.it/tailor)是一个在各种不同 VCS 之间进行增量转换的项目。听起来这方面的发展不会积极地继续下去。

这些方法中的前三种看起来很轻巧，足以说服我进行调查。我需要以某种方式调整它们以使它们在我的设置上运行，我看到了一些进一步调整它们以改进它们的方法，然后我进一步调整它们以使它们的行为更像彼此，以便我可以评估他们更有效。然后我认为其他人可能也希望进行这些调整，以进行相同的评估。因此，我[制作了一个源代码包](https://github.com/dubiousjim/yagh)，使您能够安装我的前三个工具中的任何一个版本。它还应该注意安装所需的`hg-fast-export`部件。（您需要自行安装`hg-git`。）

我鼓励您尝试一下，然后自己决定最有效的方法。我很高兴听到这些工具损坏的案例。我将尝试使它们与上游更改保持同步，并确保上游作者了解我认为有用的调整。

正如我上面提到的，在评估这些工具时，我得出的结论`git-hg`是仅可用于从 Mercurial 中拉取，而不能用于推送。

相关地，这里有一些 Git 和 Mercurial 之间有用的比较/翻译手册，在某些情况下针对已经了解 Git 的用户：

*   [面向 Git 用户的 Mercurial](https://www.mercurial-scm.org/wiki/GitConcepts)
*   [Git 和 Mercurial - 比较和对比](https://stackoverflow.com/questions/1598759/git-and-mercurial-compare-and-contrast)
*   [Mercurial和Git有什么区别](https://stackoverflow.com/questions/35837/what-is-the-difference-between-mercurial-and-git)
*   [Mercurial 和 Git：技术比较](http://alblue.bandlem.com/2011/03/mercurial-and-git-technical-comparison.html)
*   [Git hg 罗塞塔石碑](https://github.com/sympy/sympy/wiki/Git-hg-rosetta-stone)
*   [自制编码：Mercurial](http://quirkygba.blogspot.com/2009/04/mercurial.html)
*   [Francisoud 的博客：Git 与 Mercurial (hg)](http://francisoud.blogspot.com/2010/07/git-vs-mercurial.html)
*   [Git vs Mercurial](http://www.wikivs.com/wiki/Git_vs_Mercurial)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2009-05-19T15:39:10.313

你可以试试`hg2git`，它是 python 脚本，是快速导出的一部分，你可以在[http://repo.or.cz/w/fast-export.git](http://repo.or.cz/w/fast-export.git)找到。

不过，您需要安装 mercurial。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2009-05-20T21:34:06.010

由于 hg-git 是一个双向**桥接**器，它还允许您将变更集从 Git 推送到 Mercurial。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-05-19T15:32:52.330

[Hg-Git Mercurial 插件](http://hg-git.github.com/)。自己没有尝试过，但可能值得一试。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-06-27T09:59:04.950

我`git-hg`从[https://github.com/cosmin/git-hg](https://github.com/cosmin/git-hg)获得了巨大的成功（也需要工作安装`hg`）。它支持获取、拉取和~~推送~~，并且对我来说比`hg-git`（与`hg`git 类似的功能）更稳定。

有关使用示例，请参阅[https://github.com/cosmin/git-hg#usage](https://github.com/cosmin/git-hg#usage)。用户界面与`git-svn`.

每个克隆的`git-hg`hg 存储库都需要额外的磁盘空间。该实现使用完整的 mercurial 克隆、一个额外的 git 裸克隆和实际的 git repo。所需的磁盘空间大约是普通 git 使用量的 3 倍。额外的副本存储在`.git`您的工作目录（或`GIT_DIR`通常指向的位置）的目录下。

**注意：**试图解决的基本问题是和特征`git-hg`之间没有 1:1 的映射。*最大的问题是 git 分支和hg 未命名分支*以及*hg 命名分支*和*hg 书签*之间的阻抗不匹配（所有这些看起来很像用户的分支）。一个相关的问题是尝试将原始命名分支名称保存在版本历史记录中，而不是 git，其中分支名称默认情况下仅添加到模板提交消息中。`git``hg`***`git``hg`***

 *****任何声称在两者之间创建可互操作的桥梁的工具`git`都`hg`应该解释它将如何处理这种阻抗匹配。**然后，您可以决定所选解决方案是否符合您的需求。

使用的解决方案`git-hg`是丢弃所有 hg 书签并将命名分支转换为 git 分支。此外，它将 git master 分支设置为默认的未命名 hg 分支。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2011-08-04T06:45:39.750

试过hggit。对我有用，因为我必须应付 git'ers 和 hg'ers 的工作。特别是对于评论，这很棒。

关于该主题的一个小问题/警告：

我试图用 hg 克隆一个稳定的 linux 内核存储库。这些存储库在 git 中维护，通常其中包含大量文件。

这是非常缓慢的。我花了 2 天时间完全克隆*和*更新工作副本。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-01-01T17:51:27.823

我在[mutt 的 hg repo上](http://dev.mutt.org/hg/mutt)[再次尝试](https://github.com/abourget/git-hg-again)[了 cosmin 的 git-hg](https://github.com/cosmin/git-hg)和abourget 的 git-hg- ，似乎后者很好地尊重了合并的顺序，前者有点随机。您可以从下面的屏幕截图中看到。

## 由[cosmin 的 git-hg](https://github.com/cosmin/git-hg)导入的 mutt 合并历史图：

![在此处输入图像描述](https://i.stack.imgur.com/bukjF.png)

## [abourget 的 git-hg-again](https://github.com/abourget/git-hg-again)导入的 mutt 合并历史图：

![在此处输入图像描述](https://i.stack.imgur.com/7u3W6.png)

## hgk 在 mutt 的 hg 存储库上绘制的实际历史图表：

![在此处输入图像描述](https://i.stack.imgur.com/9oH8e.png)

从上面可以看出，[abourget 的 git-hg-again](https://github.com/abourget/git-hg-again)的第二张图非常接近原始的 hgk 图，实际上反映了 mutt 的真实工作流程。

我发现 git-hg-again 的一个缺点是它没有添加“hg”远程，而是将其所有引用作为本地标签导入，git-hg 有一个很棒的“hg”远程代表上游 hg 存储库。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-17T06:59:41.920

2021 年的最新答案似乎[`git cinnabar`](https://github.com/glandium/git-cinnabar)是 Firefox，例如 Firefox。

此页面上建议的其他脚本要么未维护，要么需要过时的软件才能运行（通常是 python 2.7）。相比之下，cinnabar 与 python 3.5+ 一起工作，并且至少保持到写作之日。

安装 cinnabar 后，您可以通过以下前缀直接克隆 mercurial 存储库`hg::`：

```
git clone hg::https://hg.mozilla.org/mozilla-unified 
```

或添加或设置遥控器

```
git remote set-url origin hg::https://hg.mozilla.org/mozilla-unified
git fetch origin 
```

您可以推送到 mercurial 遥控器。

使用`hg2git`和`git2hg`命令允许将 git commit sha1s 转换为 mercurial 变更集并返回。更多文档可[在 github 页面上找到](https://github.com/glandium/git-cinnabar)。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2017-04-30T16:36:23.487

[使用Git-hg Mirror](https://githgmirror.com/)服务也可以实现双向 hg-git（和 git-git、hg-hg）同步。它在幕后使用 hg-git（以及其他），其代码也是开源的。

* * *

*免责声明*：我来自它背后的公司。

# c# - 使用 PDFSharp 打印 PDF

> ID：883456
> 
> 赞同：7
> 
> 时间：2009-05-19T15:27:14.323
> 
> 标签：c#, pdf, printing, pdfsharp

我有以下代码：

```
using System;
using System.Diagnostics;
using System.IO;
using PdfSharp.Pdf.Printing;

namespace PrintPdfFile
{

  class Program
  {
    [STAThread]
    static void Main(string[] args)
    {
      // Set Acrobat Reader EXE, e.g.:
        PdfFilePrinter.AdobeReaderPath = @"C:\\Documents and Settings\\mike.smith\\Desktop\\Adobe Reader 9.0.exe";
      // -or-
        //PdfPrinter.AdobeReaderPath = @"C:\Program Files\Adobe\[...]\AcroRd32.exe";

      //// Ony my computer (running a German version of Windows XP) it is here:
        //PdfFilePrinter.AdobeReaderPath = @"C:\\Documents and Settings\\mike.smith\\Desktop\\Adobe Reader 9.0.exe";

      // Set the file to print and the Windows name of the printer.
      // At my home office I have an old Laserjet 6L under my desk.
      PdfFilePrinter printer = new PdfFilePrinter(@"C:\Documents and Settings\mike.smith\Desktop\Stuff\ReleaseNotesAndFolderList.pdf", " \\ny-dc-03\\IT-01");

      try
      {
        printer.Print();
      }
      catch (Exception ex)
      {
        Console.WriteLine("Error: " + ex.Message);
      }
    }
  }
} 
```

对于我的一生，我无法让它工作并打印出一个 PDF。每当我去打印时，我都会收到错误“找不到指定的文件”。有人知道我的代码是否有问题吗？我在这里使用 PDFSharp ...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-19T15:32:36.607

一个观察，在以下行中：

```
PdfFilePrinter.AdobeReaderPath 
      = @"C:\\Documents and Settings\\mike.smith\\Desktop\\Adobe Reader 9.0.exe"; 
```

您正在使用“@”转义字符串并转义反斜杠。删除“@”或使用单个反斜杠。

还要确保这是您的 EXE 的正确路径。

**更新：**如果您已确认 Acrobat Reader EXE 的路径正确，接下来要查看的是您传递给 PdfFilePrinter 构造函数的“打印机名称”参数。

您`" \\ny-dc-03\\IT-01"`作为打印机名称传递。这需要与打印机的名称完全匹配，因为它出现在 Windows 的打印机列表中，而不仅仅是任意 IP 打印机。

如果这是正确的，请务必删除前导空格：`"\\ny-dc-03\\IT-01"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T15:31:58.213

这可能是显而易见的，但杂技演员在：

> C:\Documents and Settings\mike.smith\Desktop\Adobe Reader 9.0.exe

只是您的用户名暗示您的名字不是 Mike smith。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-08-25T11:17:23.263

> 你正在路过`" \\ny-dc-03\\IT-01"`

我认为这应该是`"\\\\ny-dc-03\\IT-01"`或`@"\\ny-dc-03\IT-01"`

不确定是否`@"\\ny-dc-03\\IT-01"`可以工作，但`"\\ny-dc-03\\IT-01"`不能工作，因为 UNC 名称以双反斜杠开头。

# linux - 前台程序和后台程序有什么区别？

> ID：883463
> 
> 赞同：0
> 
> 时间：2009-05-19T15:28:29.077
> 
> 标签：linux, bash

我试图在后台模式和前台模式下运行程序。

在后台模式下，它无法运行。

但是在前台模式下，它成功了。

那么可能导致此问题的背景和前景模式之间的区别是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T15:38:57.817

A foreground process has access to the terminal (standard input and output).

You can try to fix the issue by adding `<> /dev/null` to the commandline. This will tell the program not to use stdin. Some programs take this into accound and "behave" as soon as you don't give them a terminal anymore.

Another solution is the `nohup` program which does basically the same plus some more things.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T15:33:38.630

Background processes typically run with little or no user interaction, they interact with the system instead. Forground processes are what the user interacts with. Background processes, unless explicitly ran so, run with non-admin permissions. If you ran it under your user-context, then it would likely have the permissions to do whatever it is the app does.

# .net - 来自 .NET 3.5 项目的错误显示为 .NET 2.x

> ID：883464
> 
> 赞同：0
> 
> 时间：2009-05-19T15:28:29.733
> 
> 标签：.net, asp.net, clr, error-logging

虽然我的 ASP.NET 项目使用**3.5 版框架**，但事件日志将错误记录为来自**2.X 版框架**，例如：

```
Event Type:         Error
Event Source:       ASP.NET 2.0.50727.0
Event Category:     None
Event ID:           1334
Date:               2009-05-19
Time:               17:04:29
User:               N/A
Computer:           XXXXXXXXXX

Description:
An unhandled exception occurred and the process was terminated.

Application ID: /LM/W3SVC/234989001/Root
Process ID: 8912
Exception: System.Web.HttpException
Message: The remote host closed the connection. The error code is 0x80072746. 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-19T15:30:43.643

.NET 2.0、3.0 和 3.5 都基于 2.0 CLR。你看到的版本是CLR版本，不是Framework版本，所以一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T15:30:13.910

ASP.NET 具有与底层 .Net 框架不同的版本号。

ASP.NET 2.0.50727.0 可以与 .Net 3.5 一起运行 - 您的错误消息正在报告正确的版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T17:10:05.800

有关更多信息，我发现 Scott Hanselman 的这篇文章内容丰富：

[如何设置 IIS 应用程序或 AppPool 以使用 ASP.NET 3.5 而不是 2.0](http://www.hanselman.com/blog/HowToSetAnIISApplicationOrAppPoolToUseASPNET35RatherThan20.aspx)

# .net - 现实世界应用程序中的策略注入应用程序块？

> ID：883465
> 
> 赞同：1
> 
> 时间：2009-05-19T15:28:43.977
> 
> 标签：.net, performance, enterprise-library, application-blocks, policy-injection

Microsoft Enterprise Library 的 PIAB 看起来可以用于一些非常酷的事情。由于它使用了基于远程的拦截技术，许多人质疑它在现实世界的应用程序中的表现。我最近没有听到太多关于它的消息，我想知道是否有人从性能的角度分享了好的或坏的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-07-27T13:44:35.363

哇，一年多没有一个回应。我想这就是我的答案！

# php - PHP include_once：处理导入，即配置文件

> ID：883474
> 
> 赞同：0
> 
> 时间：2009-05-19T15:30:39.353
> 
> 标签：php, localization, include

假设我们有以下结构：

```
index.php
config.inc.php
\ lib
\ lib \ common.php 
```

数据库名称、用户和合作等几个参数在`config.inc.php`. 访问它们的正确方法是什么，即从位于`\lib\common.php`. 我真的必须`include_once("config.inc.php")`在每个函数中做一个吗？

如果出现以下情况，它似乎不起作用：

*   `config.inc.php`在 index.php 中包含一次，在包含`\lib\common.php`之前
*   如果`config.inc.php`在包含和所有其他文件之前定义所有变量`\lib\common.php`（这样我只需要`config.inc.php`在所有“中央”文件中包含`index.php`
*   `config.inc.php`如果包含在顶部，它也不起作用`\lib\common.php`

非常感谢 - 我无法通过 Google 找到解决方案！

**解决方案**

我包括`config.inc.php`一次`index.php`（如 Galen 所建议）并使用 global（如 David 所建议）。一切都按我的预期工作，非常感谢！

稍后我一定会`auto_prepend`按照 n3rd 的建议进行研究，tkx 也是如此！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T15:38:47.117

您必须使用[`global`](http://at2.php.net/manual/en/language.variables.scope.php)关键字来访问在函数外部定义的变量：

```
$var1 = "muh";
$var2 = "foo";

function test() {
    global $var1;
    echo "var1=$var1; var2=$var2\n";
} 
```

将打印`"var1=muh; var2="`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T15:37:53.903

你只需这样做：

```
include_once("..\\config.inc.php"); 
```

在 common.php 的顶部。

现在这里有几件事 - 首先反斜杠很烦人，你可以（即使在 Windows 上，将它们交换为正斜杠（“../config.inc.php”）。如果你有 config.inc 所在的目录。 php 包含在您的包含路径中，您甚至可以只执行“config.inc.php”。

最后同样重要的是，如果 common.php 需要 config.inc.php 中的数据才能正常工作，我建议您改用[require_once()](http://php.net/require_once)，因为这将导致调用[exit()](http://php.net/exit)或[die()](http://php.net/die)，以防万一文件未能包含在内，因此停止进一步执行。

编辑：啊，我没有发现其他人说的话。要在函数内部使用在函数外部声明的变量，您需要让函数知道它需要使用 global 关键字在函数范围内“拉”这些变量（正如其他人所说）。

考虑以下示例：

```
$var = "Hello World";
function changeVar(){
    $var = "Bye World!";
    echo $var . "\n";
}
changeVar();
echo $var; 
```

上述代码的输出不是：

```
Bye World!
Bye World! 
```

反而：

```
Bye World!
Hello World 
```

这是因为函数的 $var INSIDE 是它自己的变量，与函数的 $var 定义的 OUTSIDE 不同。将其更改为：

```
$var = "Hello World";
function changeVar(){
    global $var;

    $var = "Bye World!";
    echo $var . "\n";
}
changeVar();
echo $var; 
```

现在你有了预期的输出：

```
Bye World!
Bye World! 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T15:46:17.257

如果您在 index.php 文件中包含 config.inc.php ......所有包含在它之后的文件都将能够使用其中的数据。

如果您在 common.php 中有函数，则必须使用[global](http://us3.php.net/manual/en/language.variables.scope.php)关键字，或将数据作为参数传递，以便访问 config.inc.php 中的数据

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T15:39:45.133

你使用该`auto_prepend`功能来做到这一点。前置文件然后从当前脚本向上搜索目录层次结构并查找以'.autoinc.php' 结尾的文件并以相反的顺序包含它们，即子目录中的文件可以覆盖在层次结构更上层的文件中定义的内容。这是设置一次并在任何地方自动运行，并且完全不引人注目。我发现这是一个相当漂亮和通用的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T17:14:47.463

恕我直言，这不是在配置目的中定义变量的好习惯。您可以在代码中重写它们。更好地定义常量。作为一个好处 - 它们在全局范围内，您可以在没有“全局”关键字的任何地方使用它们。

我通常使用带有静态方法的抽象 Config 类，它解析外部数据（我使用 DOCUMENT_ROOT 之外的 XML 配置文件），然后提供它，转换为对象，代码如下

```
$dbalias = Config::get('db');
DB::connect($dbalias);
echo $dbalias->user . '@' . $dbalias->host; 
```

当您与团队合作并使用版本控制工具（如 SVN）时，它非常有用。您团队中的每个人都在 localhost 上工作，除了本地配置文件之外的所有内容都没有被版本化。

不确定，这种方式是最好的，但安全且编码、阅读和支持非常舒适。

# delphi - 我可以将 xsd:complexContent 与 Delphi XML 绑定向导一起使用吗？

> ID：883477
> 
> 赞同：2
> 
> 时间：2009-05-19T15:31:03.707
> 
> 标签：delphi, binding, xsd

Delphi 2009 XML 数据绑定向导无法处理包含复杂内容声明（无效指针操作）的简单 XSD。

它是错误还是已知限制？

例子：

```
<?xml version="1.0" encoding="utf-8"?>
<xsd:schema targetNamespace="http://example.org/"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    elementFormDefault="qualified">

  <xsd:complexType name="TestType">
    <xsd:complexContent>
      <xsd:restriction base="xsd:anyType">
        <xsd:attribute name="Name" type="xsd:string"/>
      </xsd:restriction>
    </xsd:complexContent>
  </xsd:complexType>

</xsd:schema> 
```

编辑：其他示例工作正常，因此看起来 complexContent 定义的一部分会导致错误。工作示例：

```
<xsd:complexType name="pc-Typ">
  <xsd:sequence>
    <xsd:element name="name"       type="xsd:string"/>
  </xsd:sequence>
  <xsd:attribute name="id" type="xsd:integer"/>
</xsd:complexType>

<xsd:complexType name="myPC-Typ">
  <xsd:complexContent>
    <xsd:extension base="pc-Typ">
      <xsd:sequence>
        <xsd:element name="ram" type="xsd:integer"/>
      </xsd:sequence>
    </xsd:extension>
  </xsd:complexContent>
</xsd:complexType> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-13T02:39:50.933

> > 我可以将 xsd:complexContent 与 Delphi XML 绑定向导一起使用吗？

是的，`xsd:complexContent`可以使用。

我知道 Delphi 有它的缺陷，但我不怪 Delphi 这种模式。XSD 是一种丰富的模式语言，Delphi 的 OO 类也是如此。两个世界的部分重叠，但有些部分不会重叠。XML 数据绑定是将 XML 模式转换为 OO 类结构的行为，因此模式必须足够具体才能表示为类。

在这个例子中，你说`TestType`匹配任何类型，只要它有一个`string`名为 的属性`Name`。XML 验证器可能会接受这种定义，但很难在单继承模型中定义它，因为`foo:Animal`、`foo:Plant`和`foo:Mineral`可能都具有`Name`属性。

我定义了一个名为的空 complexType`TestBaseType`并且生成的类非常好。

```
<?xml version="1.0" encoding="utf-8"?>
<xsd:schema targetNamespace="http://example.org/"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    elementFormDefault="qualified">

  <xsd:complexType name="TestBaseType">
    <xsd:sequence>
    </xsd:sequence>
  </xsd:complexType>

  <xsd:complexType name="TestType">
    <xsd:complexContent>
      <xsd:restriction base="TestBaseType">
        <xsd:attribute name="Name" type="xsd:string"/>
      </xsd:restriction>
    </xsd:complexContent>
  </xsd:complexType>
</xsd:schema> 
```

这生成了以下代码：

```
unit test;

interface

uses xmldom, XMLDoc, XMLIntf;

type

{ Forward Decls }

  IXMLTestBaseType = interface;
  IXMLTestType = interface;

{ IXMLTestBaseType }

  IXMLTestBaseType = interface(IXMLNode)
    ['{0FBC1D84-DA5E-4315-83A9-B5FFE9528969}']
  end;

{ IXMLTestType }

  IXMLTestType = interface(IXMLTestBaseType)
    ['{12E35067-516F-4457-8C62-4131CA60D706}']
    { Property Accessors }
    function Get_Name: WideString;
    procedure Set_Name(Value: WideString);
    { Methods & Properties }
    property Name: WideString read Get_Name write Set_Name;
  end;

{ Forward Decls }

  TXMLTestBaseType = class;
  TXMLTestType = class;

{ TXMLTestBaseType }

  TXMLTestBaseType = class(TXMLNode, IXMLTestBaseType)
  protected
    { IXMLTestBaseType }
  end;

{ TXMLTestType }

  TXMLTestType = class(TXMLTestBaseType, IXMLTestType)
  protected
    { IXMLTestType }
    function Get_Name: WideString;
    procedure Set_Name(Value: WideString);
  end;

implementation

{ TXMLTestBaseType }

{ TXMLTestType }

function TXMLTestType.Get_Name: WideString;
begin
  Result := AttributeNodes['Name'].Text;
end;

procedure TXMLTestType.Set_Name(Value: WideString);
begin
  SetAttribute('Name', Value);
end;

end. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-08T12:27:18.180

我一直在玩 D2007，xsd:anyType 似乎也有问题。不过，不知道有什么办法可以解决这个问题。我确实知道 Delphi 的 XML 解析功能总是存在一些小问题。直到 D7，它甚至都没有真正符合 XML 标准。所以认为这只是 Delphi 中的另一个缺陷。在我的 Delphi 应用程序中使用 XML 时，我只是忽略了这个 XML 向导，而只是导入 MSXML 类型库，编写自己的代码来包装 XML 文件。这需要更多时间，但它为我的代码解决了很多问题。对于一个项目，我什至做了一些不同的事情，创建一个 .NET 模块作为 XML 文件的包装器，将此包装器作为 COM 对象导入我的 Delphi 项目中以调用它的所有功能。它更有效，也相当快。

我喜欢 Delphi，自从它取代 Turbo/Borland Pascal 以来，它一直是我作为开发语言的首选，但现在竞争（例如 .NET）变得同样强大。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-09T01:21:12.013

最好不要使用 XML 数据绑定向导。我开始使用它，但发现它非常不适合我使用的许多 XML。然后我开始直接使用 IXMLDocument 和 IXMLNode，它们稍微好一点，但由于性能和设计原因，它们仍然不是特别好。然后我切换到[libxml2](http://xmlsoft.org)并一直使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T04:24:38.833

确认您的第一个示例在 xmllint 中解析得很好。

我很惊讶地看到`xsd:NCName`，因为我倾向于认为它仅供内部使用 - 但您当然可以使用它。我在想 Dephi 的实现者可能做出了同样的假设。尝试将其更改为`xsd:string`, 以帮助缩小范围。

而且 - 当然 - 为什么不将这个发布到官方的 Dephi 论坛呢？（我确定它存在）他们可能会修复它，或者有一个解决方法。

* * *

顺便说一句：如果您将 XSD 设置为完整的模式，则可以更轻松地测试 XSD - 可能会更快获得答案，因为其他人不需要添加标签。

# iphone - geo location and blocking access to my app on iPhone

> ID：883480
> 
> 赞同：0
> 
> 时间：2009-05-19T15:31:25.157
> 
> 标签：iphone

I am working on a radio player for iPhone. What I need is to provide my position before playing stream. I am thinking of using CoreLocation, it's ok, but how to determine geo position if user does not allow CoreLocation when asked ?

What would be the best way to determine the position of the iPhone? I was thinking of getting IP address, but it could be an address from another country. For exemple, user has an iPhone account in United States, and is using my application in 3G in Canada, IP address will be provided by his cell carrier right ?

So I was wondering how to get cell carrier name, without success... using a private framework is not possible.

I am waiting for your great suggestions!

thierry

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T15:37:11.233

I would just use core location. If for whatever reason the user declines the core location popup, then just prompt them to enter their location manually (e.g. choose country and city).

You could use the IP address, but then you run into other problems as well (for instance if they are using WiFi on their iPhone or are on an iPod touch.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T17:01:02.707

我认为这是不允许的，并且是设计使然。如果用户不想让你的应用知道他们在哪里，你为什么认为你有权忽略他们的意愿？

# .net - EndInvoke 更改当前 CallContext - 为什么？

> ID：883486
> 
> 赞同：7
> 
> 时间：2009-05-19T15:32:50.147
> 
> 标签：.net, multithreading

我有以下测试

```
[Test]
public void aaa()
{
    CallContext.LogicalSetData("aa", "1");

    Action parallelMethod = () => CallContext.LogicalSetData("aa", "2"); 
    var r = parallelMethod.BeginInvoke(null, null); 
    parallelMethod.EndInvoke(r);

    Assert.That(CallContext.LogicalGetData("aa"), Is.EqualTo("1")); 
} 
```

谁能告诉我为什么这个测试在最后一行失败了？

实际上我知道为什么 - 因为 EndInvoke 正在将 CallContext 从并行方法合并到当前方法 - 但我不明白这是为什么。

对我来说，这种行为类似于从被调用的方法内部更改方法参数值:-(

**编辑：**我已将代码示例更改为仅使用 LogicalGetData 和 LogicalSetData。正如您在我的另一个[问题](https://stackoverflow.com/questions/846187/how-to-include-own-data-in-executioncontext)中看到的那样，我想将一些数据传递给另一个线程，但我没想到 EndInvoke() 会用其他线程中更改的值覆盖我的值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-09-24T16:33:33.243

您的示例说明的行为确实是设计使然。LogicalCallContext 能够通过异步调用或 .net 远程调用双向流动。正如您所观察到的，当您调用 EndInvoke 时，子上下文的 LogicalCallContext 将合并回父上下文。这是有意的，以便远程方法的调用者可以访问远程方法设置的任何值。如果您愿意，您可以使用此功能将数据从孩子*传回。*

在 .NET Framework 源代码步进的帮助下对此进行调试，对此效果有明确的注释：

在 System.Runtime.Remoting.Proxies.RemotingProxy.Invoke 中：

```
 case Message.EndAsync: 
         // This will also merge back the call context
         // onto the thread that called EndAsync
         RealProxy.EndInvokeHelper(m, false); 
```

在 System.Runtime.Remoting.Proxies.RealProxy.EndInvokeHelper 中：

```
 // Merge the call context back into the thread that
    // called EndInvoke 
    CallContext.GetLogicalCallContext().Merge(
         mrm.LogicalCallContext); 
```

如果你想避免数据合并，很容易跳过，只需避免从主线程调用 EndInvoke。例如，您可以使用 ThreadPool.QueueUserWorkItem，它将 LogicalCallContext 流入*但*不流出，或者从 AsyncCallback 调用 EndInvoke。

查看 Microsoft Connect 站点上的示例，您没有看到 LogicalSetData 值从 RunWorkerCompleted 调用流回的原因是 BackgroundWorker 没有将上下文流回。另外，请记住，LogicalSetData 与线程本地存储不同，因此 RunWorkerCompleted 恰好在 UI 线程上运行并不重要——LogicalCallContext 仍然有一个子上下文，除非父级显式将其流回通过从生成线程调用 EndInvoke，它将被放弃。如果您想要线程本地存储，您可以从 Thread 访问它，如下所示：

```
 private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        Thread.SetData(Thread.GetNamedDataSlot("foo"), "blah!!");
    }

    private void button1_Click(object sender, EventArgs e)
    {
        var val = (string)Thread.GetData(Thread.GetNamedDataSlot("foo"));
        MessageBox.Show(val ?? "no value");
    } 
```

此示例弹出一个显示“blah!!”的 MessageBox。原因是两个回调都在 UI 线程上运行，因此可以访问同一个线程本地存储。

希望这有助于澄清事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T15:56:21.700

这是因为您将 SetData/GetData 与 LogicalSetData/LogicalGetData 混合在一起。有[一篇文章](http://dotnetmustard.blogspot.com/2008/08/identifying-differences-between.html)您可以阅读更多关于这两种方法之间的差异的文章。这里的经验法则是始终将 SetData 与 GetData 结合使用，将 LogicalSetData 与 LogicalGetData 结合使用。

此修改将使您的测试通过：

```
[Test]
public void aaa()
{
    CallContext.SetData("aa", "1");
    Action parallelMethod = () => CallContext.SetData("aa", "2");
    var r = parallelMethod.BeginInvoke(null, null);
    Assert.That(CallContext.GetData("aa"), Is.EqualTo("1"));
    parallelMethod.EndInvoke(r);
    Assert.That(CallContext.GetData("aa"), Is.EqualTo("1"));
} 
```

# java - send real time voice using udp

> ID：883494
> 
> 赞同：1
> 
> 时间：2009-05-19T15:34:22.170
> 
> 标签：java, udp

hi every body could you please help me . I write java code for sending string msg between client and server using udp socket . but I want to to send real time voice so could you please give some notes to do it

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T15:46:39.813

I can point you a little of the way, you probably would want to use the [Real-time Transport Protocol (RTP)](http://en.wikipedia.org/wiki/Real-time_Transport_Protocol), which is more or less the standard for sending audio or video real time over the net. However the implementation is not straight forward, and you should use a helper library like [jlibrtp](http://jlibrtp.org/) for the implementation. There is also a RTP packetizer in Java Media Framework (JMF), but you don't wanna go there....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T15:47:44.760

UDP 没有服务质量保证，因此在发送数据包时，您需要在数据中添加某种订单号，以确定如何将数据重新组合在一起。例如，您可以从服务器按顺序发送 3 个数据报包，但客户端可能会以不同的顺序（2、1、3）获取它们。或者它可能根本没有得到其中之一，在这种情况下，您要么希望它重新发送（怀疑），要么只是忽略它并在某个超时时继续前进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T15:47:18.597

Look into using Real Time Protocol RFC3550 ([http://en.wikipedia.org/wiki/Real-time_Transport_Protocol](http://en.wikipedia.org/wiki/Real-time_Transport_Protocol)) as the transport over UDP. RTCP as the control over TCP.

# language-agnostic - 判断能力 - 一只燕子能度过一个夏天吗？

> ID：883497
> 
> 赞同：5
> 
> 时间：2009-05-19T15:35:45.353
> 
> 标签：language-agnostic

今天早上在处理一些通常很糟糕的 Javascript 代码时，我遇到了以下问题（在多个地方）：

```
// make moveAmount negative
moveAmount = moveAmount - (moveAmount * 2); 
```

我就坐在写这篇文章的人对面；他在这里做了七年的开发人员。另一方面，我才刚刚开始，我很初级，并不声称认识杰克。

尽管如此，这让我对这个家伙在开发软件这么多年后对简单逻辑的扭曲感到好奇。

我的问题是，这里的其他人可能会如何看待写这篇文章（3 周前）的开发人员的整体能力，或者它是否完全反映了这一点？

有人会指出卷积吗？

我，我自己，一直害怕别人对我做出这样的判断。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-05-19T15:42:51.390

简单的解决方案：向他展示代码行并询问他为什么这样做。这是你们俩学习一些东西的机会。也许浏览器中存在错误或其他问题（想到四舍五入），因此如果没有这个，代码可能会中断。或者他犯了一个错误。无论哪种方式，询问都会解决这个问题。

虽然你是对的，其他人会根据他们从你身上看到的代码来评判你，但这并不是他们*唯一*考虑的事情（如果是，那么你在错误的地方工作——在你离开的时候离开'仍然神志清醒）。他们也会看到你何时礼貌、好奇、乐于助人。

这些东西比你写的代码更重要：代码比愤怒的同事更容易修复。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-19T15:47:11.687

你的例子可能是糟糕的代码，但我见过更糟糕的（毕竟，在某些情况下它会起作用；有些代码甚至不能这么说）。我认为您真正要问的问题是：是否有任何代码行如此糟糕以至于这意味着开发人员可以根据这一行被视为无能？

我拒绝。我有两个孩子，他们小时候睡觉很糟糕。我是来对付流感的。我一直在以死亡行军模式工作，我已经连续工作了 20 个小时。在这种情况下，任何人都可以编写糟糕的代码行。（这就是为什么应该避免这种情况。）

当然，我希望我以后能发现可怕的代码，并修复它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-19T15:38:49.767

好吧，它可以工作，所以如果你告诉他你不喜欢那个代码，你就会看起来像 ap****，而且可能是正确的 :) 然后他可能在 7 年前就已经完成了那个代码，作为他编写的第一个 JavaScript，但说真的永远不要仅仅从一行代码来判断一个人。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T18:46:00.763

关于对判断的恐惧，放松。确实，我们都会在某个时候受到某人的评判，无论是某个尖头发的老板还是恶毒的小暴发户。我认为，要掌握的主要问题是如何从每次这样的遭遇中获得有用的东西。

显然，会有人为此而发牢骚，但你也会发现许多类似的情况，其中有一些值得学习的地方。

上面与您的同事开始对话的建议非常好；它可能会直接融入这样的相遇中，你们中的任何一个或两个都可能从中学到一些重要的东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T15:40:37.210

很容易找到一个例子并概括一个开发人员，但除非他有这种胡说八道的记录，否则我会认为这是一个孤立的事件。简单地问他为什么不写：

```
moveAmount = moveAmount * (-1) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-19T15:41:42.543

此行为与 mountAmount = -moveAmount 不同，如果 moveAmount 足够大（例如 2^32-1），则 2*moveAmount 可能导致溢出。

我不知道这是不是他的意图。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-19T15:44:16.163

如果他在刚开始的时候写了这个，他就会通过。如果他最近写了这个，他会从我那里得到一个大拇指。开发人员的整体能力绝对值得怀疑。

其他人说你不能用一行代码来判断一个开发人员，但我说这肯定会让人怀疑他的能力。我不是建议你草率下结论，但这种类型的代码肯定充其量是一个平庸的开发人员的证据。

...至于它与过度疲劳或压力或其他有关...底线是代码质量很重要。如果他写了这样一个单行，还有什么不那么容易脱颖而出的呢？

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-19T15:59:29.390

既然他是 3 周前写的，我想说他应该对这行的批评持开放态度。它显示了一种在专业工作 7 年后确实不可原谅的不成熟。

如果他至少会这样做：

```
moveAmount -= moveAmount * 2; 
```

他会少一点脾气。这至少表明他了解其他运算符，并且正在努力使事情更具可读性。

我不认为你总是可以用一句话来判断一个人，但是代码可以告诉你很多关于一个人的能力的信息，以至于一行可以告诉你很多关于一个人的信息。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-19T19:01:07.477

我说这将取决于燕子。如果孤立的话，你所展示的那行代码是我对疲惫的程序员的期望，即使是一个非常称职的程序员。这是一个不太聪明的事情的例子，累了的人不那么聪明的事情。另一方面，如果这种代码经常出现，那么您可能正在与头脑扭曲的人一起工作。

明显表明一个糟糕的程序员的事情与糟糕的做法有关。好的程序员不会做出巨大的方法。即使很累，他们也会尽量保持他们的类型松散耦合。他们将避免公开公共字段，而不是通过访问器或属性公开它们。他们将尝试将继承和聚合作为代码重用的形式，而不是重复进行复制粘贴……列表很长。这些燕子让我几乎立刻就觉得现在是夏天。:-)

# c++ - How to make a wxFrame behave like a modal wxDialog object

> ID：883498
> 
> 赞同：8
> 
> 时间：2009-05-19T15:35:57.147
> 
> 标签：c++, wxwidgets

Is is possible to make a wxFrame object behave like a modal dialog box in that the window creating the wxFrame object stops execution until the wxFrame object exits?

I'm working on a [small game](http://www.starfrontiers.info/forum/viewforum.php?f=7) and have run into the following problem. I have a main program window that hosts the main application (strategic portion). Occasionally, I need to transfer control to a second window for resolution of part of the game (tactical portion). While in the second window, I want the processing in the first window to stop and wait for completion of the work being done in the second window.

Normally a modal dialog would do the trick but I want the new window to have some functionality that I can't seem to get with a wxDialog, namely a status bar at the bottom and the ability to resize/maximize/minimize the window (this should be possible but doesn't work, see this question [How to get the minimize and maximize buttons to appear on a wxDialog object](https://stackoverflow.com/questions/883536/how-to-get-the-minimize-and-maximize-buttons-to-appear-on-a-wxdialog-object)).

As an addition note, I want the second window's functionality needs to stay completely decoupled from the primary window as it will be spun off into a separate program eventually.

Has anyone done this or have any suggestions?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2010-04-04T05:26:14.033

我也在寻找类似的解决方案，并提出了这个解决方案，创建一个框架，通过执行 frame.MakeModal() 禁用其他窗口，并在显示框架后停止执行启动和事件循环，当框架关闭时退出事件循环，例如我这里是使用 wxpython 的示例，但它在 wxwidgets 中应该是相似的。

```
import wx

class ModalFrame(wx.Frame):
    def __init__(self, parent, title):
        wx.Frame.__init__(self, parent, title=title, style=wx.DEFAULT_FRAME_STYLE|wx.STAY_ON_TOP)

        btn = wx.Button(self, label="Close me")
        btn.Bind(wx.EVT_BUTTON, self.onClose)
        self.Bind(wx.EVT_CLOSE, self.onClose) # (Allows main window close to work)

    def onClose(self, event):
        self.MakeModal(False) # (Re-enables parent window)
        self.eventLoop.Exit()
        self.Destroy() # (Closes window without recursion errors)

    def ShowModal(self):
        self.MakeModal(True) # (Explicit call to MakeModal)
        self.Show()

        # now to stop execution start a event loop 
        self.eventLoop = wx.EventLoop()
        self.eventLoop.Run()

app = wx.PySimpleApp()
frame = wx.Frame(None, title="Test Modal Frame")
btn = wx.Button(frame, label="Open modal frame")

def onclick(event):
    modalFrame = ModalFrame(frame, "Modal Frame")
    modalFrame.ShowModal()
    print "i will get printed after modal close"

btn.Bind(wx.EVT_BUTTON, onclick)

frame.Show()
app.SetTopWindow(frame)
app.MainLoop() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T17:57:00.140

“停止执行”窗口实际上没有任何意义，因为窗口只处理发送给它的事件，例如鼠标、键盘或绘图事件，而忽略它们会使程序看起来挂起。您应该做的是禁用框架中的所有控件，这将使它们变灰并使用户意识到此时无法与之交互的事实。

您还可以完全禁用父框架，而不是禁用其上的所有控件。查看*wxWindowDisabler*类，构造函数有一个参数指示可以与之交互的窗口，应用程序的所有其他窗口都将被禁用。

如果您稍后想要执行辅助程序，那么您可以使用*wxExecute()*函数来执行它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-26T20:51:51.210

这让我花了很长时间才弄清楚，但这是一个从 Anurag 的例子中衍生出来的工作示例：

```
import wx

class ChildFrame(wx.Frame):
    ''' ChildFrame launched from MainFrame '''
    def __init__(self, parent, id):
        wx.Frame.__init__(self, parent, -1,
                          title=self.__class__.__name__,
                          size=(300,150))

        panel = wx.Panel(self, -1)
        closeButton = wx.Button(panel, label="Close Me")

        self.Bind(wx.EVT_BUTTON, self.__onClose, id=closeButton.GetId())
        self.Bind(wx.EVT_CLOSE, self.__onClose) # (Allows frame's title-bar close to work)

        self.CenterOnParent()
        self.GetParent().Enable(False)
        self.Show(True)

        self.__eventLoop = wx.EventLoop()
        self.__eventLoop.Run()

    def __onClose(self, event):
        self.GetParent().Enable(True)
        self.__eventLoop.Exit()
        self.Destroy()

class MainFrame(wx.Frame):
    ''' Launches ChildFrame when button is clicked. '''
    def __init__(self, parent, id):
        wx.Frame.__init__(self, parent, id,
                          title=self.__class__.__name__,
                          size=(400, 300))

        panel = wx.Panel(self, -1)
        launchButton = wx.Button(panel, label="launch modal window")

        self.Bind(wx.EVT_BUTTON, self.__onClick, id=launchButton.GetId())

        self.Centre()
        self.Show(True)

    def __onClick(self, event):
        dialog = ChildFrame(self, -1)
        print "I am printed by MainFrame and get printed after ChildFrame is closed"

if __name__ == '__main__':
    app = wx.App()    
    frame = MainFrame(None, -1)
    frame.Show()
    app.MainLoop() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-30T09:26:33.427

不确定这是一个很好的答案，但它确实有效。

```
bool WinApp1::OnInit()
{
  if (!wxApp::OnInit())
    return false;

  SettingsDialog dialog(m_settingsData);
  dialog.ShowModal();

  return false;
}

SettingsDialog::SettingsDialog(SettingsData& settingsData)
  : m_settingsData(settingsData)
{
  SetExtraStyle(wxDIALOG_EX_CONTEXTHELP);

  wxWindow* parent = nullptr;
  Create(parent, wxID_ANY, "Preferences", wxDefaultPosition, wxDefaultSize,
    wxDEFAULT_DIALOG_STYLE | wxRESIZE_BORDER); 
```

WinApp1 窗口永远不会被赋予 wxFrame 并且永远不会绘制。

# asp.net - ASP.NET Logging onto web service using username and password the first time only

> ID：883499
> 
> 赞同：0
> 
> 时间：2009-05-19T15:35:58.113
> 
> 标签：asp.net, wcf, web-services, security

The first time I log onto my webservice I want to use FormsAuthentication e.g.

```
myService.ClientCredentials.UserName.UserName = "name";
myService.ClientCredentials.UserName.Password = "password"; 
```

but once a user has logged onto my web app I dont want to have to know about his password so I would like to be able to connect to the webservice as this user without knowing his password. Is this possible?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T15:54:15.837

我会将密码保存在访问 Web 服务的任何前端，然后在用户调用 Web 服务时将其传递到幕后。

因此，本质上，设计您的 Web 服务始终使用密码，但让前端缓存密码，这样一旦用户输入密码，前端就不会再询问。

预先警告，保持密码缓存可能存在安全问题，因为我相信这将是会话的一部分。我不熟悉 .net 如何处理此问题，但您可能想研究[hashing](http://en.wikipedia.org/wiki/Cryptographic_hash_function)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T15:57:25.570

您应该能够做到这一点，但有几个问题需要考虑。基于表单的身份验证 (FBA) 通常使用 cookie 来跟踪身份验证。

1.  安全性 - 将 Web 应用程序和 Web 服务配置为使用相同的 FBA 数据库。

2.  域 - 只要 Web 服务与 Web 应用程序位于同一域中，Web 服务就可以使用相同的身份验证 cookie。如果客户端禁用了 cookie，那么这可能不起作用。

3.  Cookie 过期 - 您需要在 web.config 文件中将身份验证的持续时间配置为可接受的时间限制（30 分钟、1 小时、1 天或更多）。这将允许用户在登录后的适当时间范围内访问 Web 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T16:30:50.177

您可以在您的网络服务中启用会话。您可以在服务声明的开头添加一个简单的令牌。

```
<WebMethod(True)> Method Name 
```

# c# - 我真的不应该在属性访问器中做“长时间运行”的事情吗？

> ID：883504
> 
> 赞同：9
> 
> 时间：2009-05-19T15:37:19.550
> 
> 标签：c#, vb.net, properties, class-design

如果是这样，为什么？什么是“长期运行”？

在属性访问器中施展魔法似乎是我作为类设计师的特权。我一直认为这就是 C# 的设计者将这些东西放在那里的原因——所以我可以做我想做的事。

当然，最好的做法是尽量减少对课程用户的意外，因此在方法中嵌入真正长时间运行的东西（例如，10 分钟的蒙特卡罗分析）是有意义的。

但是假设一个 prop 访问器需要一个 db 读取。我已经打开了数据库连接。db 访问代码在属性访问器中是否在正常预期范围内是“可接受的”？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-19T15:42:45.213

就像您提到的那样，这对课程的用户来说是一个惊喜。人们习惯于用属性来做这样的事情（人为的例子如下：）

```
foreach (var item in bunchOfItems)
    foreach (var slot in someCollection)
        slot.Value = item.Value; 
```

这看起来很自然，但如果`item.Value`实际上每次访问时都在访问数据库，那将是一场小灾难，并且应该以与此等效的方式编写：

```
foreach (var item in bunchOfItems)
{
   var temp = item.Value;
   foreach (var slot in someCollection)
      slot.Value = temp;
} 
```

请帮助引导使用您的代码的人们远离这样的隐患，并将慢的东西放在方法中，让人们知道它们很慢。

当然，也有一些例外。只要延迟加载不会花费非常长的时间，延迟加载就可以了，并且有时使事物属性对于反射和数据绑定相关的原因非常有用，所以也许你会想要打破这个规则。但是在没有特定理由的情况下，违反惯例并违反人们的期望并没有多大意义。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-05-19T18:45:02.060

除了已经发布的好的答案之外，我还要补充一点，当您检查类的实例时，调试器会自动显示属性的值。你*真的*想调试你的代码并在每次检查你的类时*在调试器中进行**数据库获取*吗？善待你代码的未来维护者，不要那样做。

 ***此外，框架设计指南**中也广泛讨论了这个问题；考虑拿起一个副本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-19T15:40:37.130

在属性访问器中读取 db 就可以了——这实际上是延迟加载的重点。我认为最重要的是将它记录好，以便类的用户了解访问该属性时可能会影响性能。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-19T15:41:11.953

你可以做任何你想做的事，但你应该牢记你的 API 的使用者。访问器和修改器（getter 和 setter）应该是非常轻量级的。有了这种期望，使用您的 API 的开发人员可能会对这些属性进行频繁和闲聊的调用。如果您在实施中消耗外部资源，则可能会出现意外瓶颈。

为了一致性起见，最好坚持公共 API 的约定。如果您的实现完全是私有的，那么可能没有什么害处（除了私下与公开解决问题的不一致方法）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-19T15:41:57.443

不让属性访问器花费很长时间来执行只是一个“好习惯”。这是因为属性看起来像调用者的字段，因此调用者（即您的 API 的用户）通常假设除了“return smth;”之外什么都没有。

如果您真的需要在幕后采取一些“行动”，请考虑为此创建一种方法......

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-19T15:40:55.150

我看不出有什么问题，只要您提供 XML 文档，以便 Intellisense 通知对象的使用者他们正在进入什么。

我认为这是没有一个正确答案的情况之一。我的座右铭是“说总是几乎总是错误的”。您应该在任何给定情况下做最有意义的事情，而不考虑广泛的概括。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-19T15:50:08.083

属性 getter 中的数据库访问很好，但尝试通过缓存值来限制访问数据库的次数。

很多时候人们在循环中使用属性而不考虑性能，所以你必须预料到这种使用。程序员在多次使用某个属性时并不总是存储它的值。

如果对这条数据可行，将从数据库返回的值缓存在私有变量中。这样访问通常非常快。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-26T21:42:58.207

这与您的问题没有直接关系，但是您是否考虑过将一次加载方法与刷新参数结合使用？

```
class Example
    {
        private bool userNameLoaded = false;
        private string userName = "";
        public string UserName(bool refresh)
        {
            userNameLoaded = !refresh;   
            return UserName();
        }
        public string UserName()
        {
            if (!userNameLoaded)
            {
                /*
                userName=SomeDBMethod();
                */
                userNameLoaded = true;                    
            }
            return userName;         
        }
    } 
```

# iphone - 由 UITabBarController 自动从另一个 nib 加载 UINavigationController

> ID：883510
> 
> 赞同：4
> 
> 时间：2009-05-19T15:38:39.033
> 
> 标签：iphone, cocoa-touch, xib

我想我找到了原因：IB 中的文档信息窗口有一个警告：*“'Selected Navigation Controller (Second)' has nib name property set to 'SecondView.nib', but this view controller is not to have its view以这种方式设置。”*

真可惜。

* * *

我已经在 Interface Builder 中构建了 nib，它具有`UITabBarController`顶层并在`UINavigationController`s 之间切换。

当所有内容都在一个`nib`文件中时它工作正常，但我想`nib`为 s 使用单独的文件`UINavigationController`。

从 Apple 的 TabBar 模板开始，如果我只是将 SecondView 的类更改为`UINavigationController`，这一切都会中断：

![第二个笔尖](https://imgur.com/g6t59.png)

我得到的只是：

```
// imgur has lost the image, sorry // 
```

`UINavigationController`是否可以在不以编程方式设置所有内容的情况下拥有单独的文件？

我想`TabBarController`处理笔尖的装卸。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T15:49:26.897

我还没有尝试通过 IB 设置 UINavigationController。我有多个屏幕，每个屏幕都存储在单独的 xib 中，并且有一个扩展 UIViewController 的相应类。在 applicationDidFinishLaunching 中，我使用 xib 初始化 UIViewControllers，然后手动创建 UINavigationController，将导航控制器的视图添加到窗口并将第一个视图推送到导航控制器。

不确定这是否有帮助。

```
- (void)applicationDidFinishLaunching:(UIApplication *)application {    

    navigationController = [[UINavigationController alloc] init];

    FirstViewController * viewController = [[FirstViewController alloc] 
                                           initWithNibName:@"FirstView"
                                                    bundle:nil];
    [navigationController pushViewController:viewController animated:NO];
    [viewController release];
    [window addSubview:navigationController.view];
    [window makeKeyAndVisible];
} 
```

FirstViewController 上面扩展了 UIViewController，在 IB 中创建视图，然后将 File 的所有者类设置为您的类（例如这里的 FirstViewController）并将 File 的所有者视图连接到 UIView 的视图。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-19T21:12:14.047

只需将 UINavigationController 与 FirstViewController 交换即可。

所以层次结构应该是这样的：

```
Tab bar controller
-----Tab bar
-----Navigation Controller
----------First View Controller
---------------Navigation Item
----------Tab bar item (First)
-----Navigation Controller
----------Second View Controller
---------------Navigation Item
----------Tab bar item (Second) 
```

您在检查器中将 First View Controller 的 nib 设置为包含实际视图对象的 nib 文件（因为您试图将它们拆分为单独的文件，这是一件好事）。

您有一个选项卡，该选项卡有一个导航控制器，它将 First View Controller 作为其根视图加载。

完毕。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T15:48:13.590

我相信你正在寻找这样的东西。您可以将“whatever”替换为您的第二个 nib 文件的名称。

```
newNavController = [[UINavigationController alloc] initWithNibName:@"whatever" bundle:[NSBundle mainBundle]]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T16:04:38.377

首先，看起来您的`UITabBarItem`s*在*导航控制器下，而不是直接在`UITabBarController`. 这可能是您问题的一部分。

其次，当您`UITabBarController`在 IB 中添加一个并单击顶层对象列表中的图标（您的第一个屏幕截图）时，属性检查器将允许您更改每个选项卡的视图控制器的类型。使用它，您可以根据需要将它们全部更改为导航控制器。此外，由于您想从其他 nib 加载自定义视图和视图控制器，如果您查看属性检查器底部的“视图控制器”部分，您可以从项目中选择一个 nib 来加载视图。假设 nib 的“文件所有者”设置为您的`UINavigationController`子类，它应该可以正常工作。

所有这些都不需要大量的编码工作。让我知道您是否想要我正在谈论的内容的屏幕截图，以防您找不到这些面板。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-12-24T14:51:52.800

我发现了同样的警告。我将所有视图控制器保存在单独的 xib 文件中。我通过删除 .nib 名称并将其保留为空来摆脱它。

# python - 用于在 Apache 访问日志中查找日期的正则表达式

> ID：883520
> 
> 赞同：1
> 
> 时间：2009-05-19T15:39:41.203
> 
> 标签：python, regex

我正在编写一个 python 脚本来从我们的 2GB Apache 访问日志中提取数据。这是日志中的一行。

```
81.52.143.15 - - [01/Apr/2008:00:07:20 -0600] "GET /robots.txt HTTP/1.1" 200 29 "-" "Mozilla/5.0 (Windows; U; Windows NT 5.1; fr; rv:1.8.1) VoilaBot BETA 1.2 (http://www.voila.com/)" 
```

我试图从该行获取日期部分，而正则表达式让我失望，我不知道为什么。这是我的python代码：

```
l = 81.52.143.15 - - [01/Apr/2008:00:07:20 -0600] "GET /robots.txt HTTP/1.1" 200 29 "-" "Mozilla/5.0 (Windows; U; Windows NT 5.1; fr; rv:1.8.1) VoilaBot BETA 1.2 (http://www.voila.com/)"

re.match(r"\d{2}/\w{3}/\d{4}", l) 
```

什么都不返回。也不做以下事情：

```
re.match(r"\d{2}/", l)
re.match(r"\w{3}", l) 
```

或者我能做的任何事情，甚至可以*参加*约会。我有什么误解？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T15:46:07.693

match() 在字符串的开头查找匹配项。使用 search() 在字符串中的任意位置查找匹配项。更多信息在这里：[http ://docs.python.org/library/re.html#matching-vs-searching](http://docs.python.org/library/re.html#matching-vs-searching)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-10-19T14:59:11.757

或者您可以使用已经可用的 python apache 日志解析器之一，例如：

*   阿帕奇日志
*   日志工具
*   Logrep（Wtop 包）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T15:45:19.657

`match()`尝试匹配整个字符串。试试[`search()`](http://docs.python.org/library/re.html#re.search)吧。

另请参阅[Python 正则表达式 HOWTO](http://docs.python.org/howto/regex.html)和always-excellent [regular-expressions.info上的](http://www.regular-expressions.info/)[Python 页面](http://www.regular-expressions.info/python.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T21:04:31.893

与其使用正则表达式来获取日期，不如将行拆分为空格并提取日期可能更容易：

```
 l = '81.52.143.15 - - [01/Apr/2008:00:07:20 -0600] "GET /robots.txt HTTP/1.1" 200 29 "-" Mozilla/5.0 (Windows; U; Windows NT 5.1; fr; rv:1.8.1) VoilaBot BETA 1.2 (http://www.voila.com/)"'
 date = l.split()[3] 
```

如果您正在处理非常大的文件，这可能比使用正则表达式更有效。

# .net - Automated Recording Tools

> ID：883531
> 
> 赞同：-2
> 
> 时间：2009-05-19T15:41:13.997
> 
> 标签：.net, automated-tests

Is there any good test recording tools that can record the actions that are performed on a .Net application?

I am doing desktop .Net application, and sometimes users can crash the application after a series of long-winded steps. So in this case, a test recording tool is helpful as it can collect the mouse clicks and mouse actions the users do.

Any idea?

**Edit: Question edited**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T13:45:29.537

我对你在找什么有点困惑。您的问题标题和正文似乎不是同一件事。您的标题似乎暗示您想要一个测试自动化工具，但您的身体暗示您正在记录/捕获手动测试会话的事件以进行调试。这是2个不同的东西。你能澄清一下吗？

如果您正在寻找用于创建测试自动化套件的测试自动化工具，请参阅其中一些相关文章。那里有很多工具，包括 HP QTP、IBM Rational Functional Tester、IBM Rational Robot、Borland SilkTest、Compuware TestPartner 等……

*   [Windows 上的自动化 gui 测试工具](https://stackoverflow.com/questions/120359/tools-for-automated-gui-testing-on-windows)
*   [gui测试](https://stackoverflow.com/questions/92059/gui-testing)
*   [Windows 表单的自动化测试](https://stackoverflow.com/questions/701603/automated-testing-of-windows-forms)
*   [GUI测试工具列表](http://en.wikipedia.org/wiki/List_of_GUI_testing_tools)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T07:27:44.550

Quick Test Pro，但至少可以说并不便宜。

[https://h10078.www1.hp.com/cda/hpms/display/main/hpms_content.jsp?zn=bto&cp=1-11-127-24](https://h10078.www1.hp.com/cda/hpms/display/main/hpms_content.jsp?zn=bto&cp=1-11-127-24) ^1352_4000_100__

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-21T11:19:07.883

正如汤姆 E 所说，您的问题令人困惑。您需要一个可以捕获和记录用户操作的库，而不是测试自动化工具。我知道的一个是[TestRecorder](http://www.automatedqa.com/products/testrecorder/)；这是其描述的摘录：

> TestRecorder 是一组运行时库，与您的 32 位和 64 位应用程序一起分发。一旦合并到您的应用程序中，TestRecorder 就会以二进制格式完整记录最终用户的操作。之后，可以使用 TestComplete 将记录的数据转换为关键字测试或 VBScript、JScript、DelphiScript、C++Script 或 C#Script 中易于阅读的脚本代码。这些脚本准确地告诉您用户在应用程序执行期间正在做什么——允许您通过 TestComplete 或 TestExecute 准确地重复用户操作的序列。

# java - MimeMessage 中的智能引号未在 Outlook 中正确显示

> ID：883532
> 
> 赞同：1
> 
> 时间：2009-05-19T15:41:28.677
> 
> 标签：java, email, character-encoding, outlook, mime-message

我们的应用程序从 Web 表单中获取文本并通过电子邮件将其发送给适当的用户。但是，当有人从 Word 中复制/粘贴臭名昭著的“智能引号”或其他特殊字符时，事情就会变得棘手。

用户输入

> 他对我说“你好”——这不是很好吗？

但是当消息出现在 Outlook 2003 中时，它会像这样出现：

> 他和我打招呼不是很好吗？

代码是：

```
Session session = Session.getInstance(props, new MailAuthenticator());
Message msg = new MimeMessage(session);

//removed setting to/from addresses to simplify

msg.setSubject(subject);
msg.setText(text);
msg.setHeader("X-Mailer", MailSender.class.getName());
msg.setSentDate(new Date());
Transport.send(msg); 
```

经过一番研究，我认为这可能是一个字符编码问题，并试图将其移至 UTF-8。因此，我因此更新了代码：

```
Session session = Session.getInstance(props, new MailAuthenticator());
MimeMessage msg = new MimeMessage(session);

//removed setting to/from addresses to simplify

msg.setHeader("X-Mailer", MailSender.class.getName());
msg.addHeader("Content-Type", "text/plain");
msg.addHeader("charset", "UTF-8");
msg.setSentDate(new Date());
Transport.send(msg); 
```

这让我更接近，但没有雪茄：

> 他对我说“你好”——这不是很好吗？

我无法想象这是一个不常见的问题——我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T16:01:25.100

带有您的表单的页面是否也使用 UTF-8 或不同的字符集？如果您不指定网页字符集，那么您的脚本中的数据格式是任何人的猜测。

* * *

编辑：消息中的字符集应该这样设置：

```
msg.addHeader("Content-Type", "text/plain; charset=UTF-8"); 
```

因为 charset 不是单独的标头，而是 Content-type 的一个选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T15:49:30.280

为什么不用常规的素引号替换漂亮的引号？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T16:41:41.063

我会检查从浏览器接收到的数据是否正确 - 转储 Unicode 代码点并对照[图表](http://www.unicode.org/charts/)检查它们：

```
 public static void printCodepoints(char[] s) {
    for (int i = 0; i < s.length; i++) {
      int codePoint = Character.isHighSurrogate(s[i]) ? Character
          .toCodePoint(s[i], s[++i])
          : s[i];
      System.out.println(Integer.toHexString(codePoint));
    }
  } 
```

例如，符号双左引号 ( **“** ) 是字符 U+201C。

我已经很久没有使用邮件 API 了，但是[MimeMessage.html.setText(text, charset)](http://java.sun.com/javaee/5/docs/api/javax/mail/internet/MimeMessage.html#setText(java.lang.String,%20java.lang.String))方法可能值得一看。[setText(String)](http://java.sun.com/javaee/5/docs/api/javax/mail/internet/MimeMessage.html#setText(java.lang.String))上的文档说它使用默认字符集（如果您使用的是英语/拉丁语-1 Windows，则可能是 windows-1252）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-24T15:25:03.153

IIRC，MS Office 引号是字符集“iso-8859-1”。

# java - 您可以将 Future/Futuretask 对象与 Spring TaskExecutors 一起使用吗？

> ID：883533
> 
> 赞同：8
> 
> 时间：2009-05-19T15:41:36.740
> 
> 标签：java, spring, concurrency, future, futuretask

是否可以将 Java [FutureTask](http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/FutureTask.html)与 Spring TaskExecutor 一起使用来获取[Future](http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/Future.html)对象？

[我正在寻找一个实现Java ExecutorService](http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/ExecutorService.html)接口的TaskExecutor，特别是submit() 方法。查看[Spring Javadocs](http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/scheduling/concurrent/package-summary.html)并没有发现任何这样的类。是否有一些我不知道的通过 Spring TaskExecutors 处理期货的替代方法？

如果可能的话，您能否举个例子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T16:11:28.593

[Spring 3 向AsyncTaskExecutor](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/core/task/AsyncTaskExecutor.html)添加了支持 Future 对象的提交方法。在那之前，如果您想访问 Future 对象，我认为您将需要获取底层 JDK 执行程序（例如使用[getThreadPoolExecutor](http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/scheduling/concurrent/ThreadPoolTaskExecutor.html#getThreadPoolExecutor%28%29)）并直接在其上提交任务。

# c++ - 如何让最小化和最大化按钮出现在 wxDialog 对象上

> ID：883536
> 
> 赞同：1
> 
> 时间：2009-05-19T15:41:49.067
> 
> 标签：c++, wxwidgets

我在 Linux 上使用 wxDialog 对象时遇到了问题在对象的构造器中，我传递了相关的样式标志`(wxCAPTION|wxMINIMIZE_BOX|wxMAXIMIZE_BOX|wxCLOSE_BOX|wx_RESIZE_BORDER)`，但按钮没有显示。当我在 wxformbuilder 中设计类时，它们会出现在显示的设计中，但不会出现在我正在运行的应用程序中。

我目前正在使用 wxWidgets 2.8.7 并在 Scientific Linux 5 (RHEL 5) 上运行。关于如何解决这个问题的任何建议或想法？

编辑：顺便说一句，这与[这个问题有关](https://stackoverflow.com/questions/883498/how-to-make-a-wxframe-behave-like-a-modal-wxdialog-object)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T17:07:24.807

你能用 wxWindow 代替 wxDialog 吗？也许最小化对话框没有意义，但这些是应用程序窗口的常用操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T20:00:42.240

如果您在 wxGTK 上创建一个对话框，那么在构建期间

```
gtk_window_set_type_hint(GTK_WINDOW(m_widget), GDK_WINDOW_TYPE_HINT_DIALOG); 
```

被调用，这让窗口管理器为这个窗口显示什么装饰。所以如果你给它样式但没有显示按钮，那么你无能为力。无论如何，我认为在禁用父框架时显示*wxFrame应该也可以。*

# google-app-engine - 调试 Google App Engine 的 SDC - USER_NOT_HOSTED 是什么意思？

> ID：883538
> 
> 赞同：0
> 
> 时间：2009-05-19T15:42:27.147
> 
> 标签：google-app-engine

我在我的 Google App Engine 应用程序中使用 Google 的 SDC（安全数据连接器）时遇到问题（我的应用程序无法从我的网络中获取数据，但使用 Google Docs 电子表格我可以获取数据）。

所以我找到了这个故障排除信息：[http](http://code.google.com/securedataconnector/docs/debug.html) ://code.google.com/securedataconnector/docs/debug.html 。并且按照建议，我将调试标头添加到 url fetch 并收到了调试信息，但我不确定这意味着什么：

sdc_routing：互联网 sdc_internet_routing：USER_NOT_HOSTED

谢谢，杰米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-03T19:50:51.370

这意味着您用来访问 SDC 资源的用户不是该域中的有效用户。

公司 foobar.com 可能会授予某些用户通过 SDC 访问资源的权限。并且 foobar.com 通过 foobar.com 域管理页面向 Google 注册所有此类用户。

您使用的此用户不是 foobar.com 已授予访问权限的用户之一。

您还可以通过 google.com 上的域管理页面提供您的域名、用户名等，并更快地获得更好的帮助。这个问题应该很容易解决。

希望这可以帮助。

# box2d - 如何在 Box2D 中创建一个环绕世界

> ID：883539
> 
> 赞同：8
> 
> 时间：2009-05-19T15:42:33.403
> 
> 标签：box2d

我需要用 Box2D 创建一个无尽的包装世界（其中所有对象的 X 坐标为 0 < X < 1000（比如说））。我玩过一些来回传送物体的游戏，但感觉可能有更好的方法——有什么想法吗？没有对象（或链接对象链）将具有大于约 50 的 X 跨度，例如小于屏幕的宽度。

相机一次只能看到世界的一小部分（大约 5% 的宽度，100% 的高度 - 世界大约是 30 高乘以 1000 宽）。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-27T08:27:37.390

我已经实现了以下，这绝不是理想的，但适合我的目的。涉及许多限制，它不是一个真正的包装世界，但它已经足够好了。

```
 public void Wrap()
    {
        float tp = 0;

        float sx = ship.GetPosition().X;            // the player controls this ship object with the joypad

        if (sx >= Landscape.LandscapeWidth())       // Landscape has overhang so camera can go beyond the end of the world a bit
        {
            tp = -Landscape.LandscapeWidth();
        }
        else if (sx < 0)
        {
            tp = Landscape.LandscapeWidth();
        }

        if (tp != 0)
        {
            ship.Teleport(tp, 0);                   // telport the ship

            foreach (Enemy e in enemies)            // Teleport everything else which is onscreen
            {
                if (!IsOffScreen(e.bodyAABB))       // using old AABB
                {
                    e.Teleport(tp, 0);
                }
            }
        }

        foreach(Enemy e in enemies)
        {
            e.UpdateAABB();                         // calc new AABB for this body

            if (IsOffScreen(g.bodyAABB))            // camera has not been teleported yet, it's still looking at where the ship was
            {
                float x = e.GetPosition().X;

                // everything which will come onto the screen next frame gets teleported closer to where the camera will be when it catches up with the ship

                if (e.bodyAABB.UpperBound.X < 0 || e.bodyAABB.LowerBound.X + Landscape.LandscapeWidth() <= cameraPos.X + screenWidth)
                {
                    e.Teleport(Landscape.LandscapeWidth(), 0);
                }
                else if (e.bodyAABB.LowerBound.X > Landscape.LandscapeWidth() || e.bodyAABB.UpperBound.X - Landscape.LandscapeWidth() >= cameraPos.X - screenWidth)
                {
                    e.Teleport(-Landscape.LandscapeWidth(), 0);
                }
            }
        }
    } 
```

# jquery - 具有 $(document).ready 等效项的 jQuery UI 选项卡

> ID：883540
> 
> 赞同：0
> 
> 时间：2009-05-19T15:42:44.120
> 
> 标签：jquery, jquery-ui

我正在尝试使用 jQuery UI 选项卡，就像 ASP.Net 中的母版页一样。我有特定的 javascript 需要在每个选项卡加载后运行。我试图在每个页面中都有一个 $(document).ready 函数，但我读过这是不好的做法，而且似乎只在 IE 中工作。

我知道有一个加载事件，但我需要该事件针对每个选项卡都是特定的，我不确定如何完成此操作，或者是否有可能。对于每个页面加载，我可能不得不恢复使用带有回发的实际 MasterPage。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T16:13:08.107

`$(document).ready()`不错的做法，它适用于 jQuery 工作的每个浏览器。如果您的事件仅在 IE 中触发，那么您自己的代码中的某个地方就有错误。

我的应用程序中有几十个现成的功能，没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T15:47:29.300

你在哪里读到这是不好的做法？

Afaik，拥有多个`$(document).ready()`'s 只会使它们“合并”，因此它们中的任何一个中的所有代码都将运行。我不记得这在[jQuery 1.3](http://www.jquery.com/)中是否是新的，所以你可能想检查一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T16:10:28.890

拥有多个`$().ready`'s 并不是坏习惯，除非您不必要地将其分解为多个 's。在以 ajaxily 方式加载选项卡的情况下，恕我直言，将 $(document).ready 放入加载的内容**中**可能是发生某些特定于选项卡的操作的最佳方式。我用它来重新绑定新加载的元素，因为它们被注入到新加载的选项卡中。

# javascript - JQuery“约束”插件 - 奇怪的 Javascript 错误

> ID：883544
> 
> 赞同：1
> 
> 时间：2009-05-19T15:43:11.123
> 
> 标签：javascript, jquery, jquery-plugins, internet-explorer-7

背景：我们的网络应用程序使用 jquery.constrain.js 插件来处理某些文本框中的数据输入，只允许添加有效字符。该插件允许对数据进行各种约束，使用正则表达式、白名单/黑名单字符等。直到今天，我们一直在运行该插件的 1.0 版本，未经修改。

几天前我注意到一些文本框仍然允许输入无效数据。例如，仅数字文本框允许使用字母字符等。它还显示 javascript 错误“对象不支持此属性或方法”。我将其追踪到 jquery.constrain 插件中的以下函数。

```
 function match(item, input, e) {
        var arr = item.chars.split("");
        for (var i in arr) {
            var token = arr[i];
            if (token.charCodeAt(0) == e.which) {
                return true;
            }
        }
        if (item.regex) {
            var re = new RegExp(item.regex);
            if (re.test(String.fromCharCode(e.which))) {
                return true;
            }
        }

        return false;
    }; 
```

通过这段代码进行调试，我确定了以下内容：

*   *item*是一个具有两个字符串属性的对象：*chars*和*regex*
*   *item.chars*在失败时是一个空字符串 ("")。
*   *arr*，*item.chars.split("")*的结果正如预期的那样是一个空数组。

这就是奇怪的地方。即使*arr是一个空数组，for 循环也会为**i*分配一个有效值。值为“删除”。所以我们进入循环。 *token*显然为空，因为 arr["remove"] 为空。所以*token.charCodeAt(0)*抛出。

我通过在 for 循环周围添加 if 语句来纠正错误，如下所示：

```
 if (arr.length > 0) {
            for (var i in arr) {
                var token = arr[i];
                if (token.charCodeAt(0) == e.which) {
                    return true;
                }
            }
        } 
```

但是，我完全困惑为什么这甚至是*必要*的 - 这是一个 IE 错误，插件中的一个错误，还是我在编译应用程序时只是屏住呼吸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T15:46:44.010

你永远不应该使用 for(i in arr) 来循环数组。如果脚本向 Array 原型添加方法，这些方法也将使用 for(i in arr) 循环进行迭代。这可能是导致您的错误的原因。您可能已经添加了修改 Array.prototype 链的脚本。

另请阅读“为什么你应该停止使用 for...in 来迭代（或永远不要使用它）”
[http://www.prototypejs.org/api/array](http://www.prototypejs.org/api/array)

# profiling - Showing call tree in kcachegrind

> ID：883545
> 
> 赞同：2
> 
> 时间：2009-05-19T15:43:18.800
> 
> 标签：profiling, kcachegrind

How can I use kcachegrind to get a non-graphical tree of all my function calls, in the order they were called?

There are two typical ways to look at profiling data:

*   sorted by the most expensive entries
*   sorted in order of execution

I'm looking for the latter. I can sort of get it with the "Call Graph" tab, but this omits some data, and it can be confusing the way it represents loops. I'd prefer a text view, like this:

[![alt text](https://i.stack.imgur.com/1Tqed.png)](https://i.stack.imgur.com/1Tqed.png)
[(source: [msdn.com](http://blogs.msdn.com/blogfiles/ronang/WindowsLiveWriter/JavascriptprofilinginIE8beta2_DF55/image_thumb_5.png))]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T07:45:38.970

它位于右下角的“所有被调用者”选项卡中。

# c# - XmlSerializer 找不到文件 C:\Windows\Temp\*.dll

> ID：883551
> 
> 赞同：4
> 
> 时间：2009-05-19T15:44:25.790
> 
> 标签：c#, asp.net, xml-serialization

我有一个 ASP.NET 2.0 Web 应用程序在一个著名的 Web 托管服务提供商的共享服务器上运行。有时我似乎收到这样的错误：

找不到文件“C:\WINDOWS\TEMP\lxnmfrsz.dll”。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.IO.FileNotFoundException：找不到文件“C:\WINDOWS\TEMP\lxnmfrsz.dll”。

我四处搜索，似乎这是一个常见问题。一种解决方案是清除临时文件夹或重新启动 IIS。由于我无法在我不拥有的服务器上访问这些东西，因此这些并不是真正的选择。我尝试使用 web.config 中的指令将临时目录设置为不同的目录，但它似乎仍在使用默认的临时目录。还有其他方法可以更改临时目录和/或解决此问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T15:54:14.587

如果您总是序列化相同的类型，您可以尝试[使用 sgen.exe 预生成 XmlSerializer 二进制文件](https://stackoverflow.com/questions/134224/generating-an-xml-serialization-assembly-as-part-of-my-build)。在这种情况下，XmlSerializer 不会去搜索它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-04-07T10:23:50.210

这里唯一需要注意的是，如果涉及泛型（例如，您的类型的 List < >），似乎无法使用 sgen 预生成序列化程序程序集。

一种解决方法是使用您自己的类型从 List < MyType > 派生，然后将其包含在预生成的程序集中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-08-14T09:48:08.527

我无法更改我的项目（以前的解决方案），所以我必须在客户站点为我的客户找到解决方案，经过很长时间试图通过更改卡巴斯基杀毒软件来找到解决方案，最终我找到了解决方案。在 IIS 中右键单击站点并选择添加网站...并在另一个端口上启动您的站点。这就对了。完成的！！。哟哈。

# visual-studio - 查看具有给定前缀的已分配 Visual Studio 快捷方式的方法

> ID：883555
> 
> 赞同：0
> 
> 时间：2009-05-19T15:46:22.107
> 
> 标签：visual-studio, visual-studio-2005, keyboard-shortcuts

有没有一种简单的方法来查看具有给定前缀的分配的快捷方式？类似于 emacs `Ctrl`+ `M`, `Ctrl`+的东西`H`。我可以通过以下方式做到这一点，但希望有更简单的解决方案：

*   工具 -> 自定义 -> 键盘
*   在“按快捷键”中按给定的前缀（比如`Ctrl`+ `M`）
*   在“当前使用的快捷方式”组合框中，有一个具有给定前缀的已分配快捷方式列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T15:53:57.643

Wintellect 有一个[可以列出所有 Visual Studio 快捷方式的宏](http://www.wintellect.com/cs/blogs/jrobbins/archive/2005/11/03/charles-petzold-is-right-and-some-code-and-some-profiling-and-some-bsod-debugging.aspx)。运行它，您可以对您喜欢的输出进行任何分析。

# javascript - 函数如何知道它在 DOM 中的位置？

> ID：883562
> 
> 赞同：3
> 
> 时间：2009-05-19T15:47:32.560
> 
> 标签：javascript, dom

我正在尝试编写一个 javascript 函数，将一些 DOM 节点添加到文档中被调用的位置，如下所示：

```
...
<div>
  <script type="text/javascript">
    pushStuffToDOMHere(args);
  </script>
</div>
... 
```

我尝试“干净”地做到这一点，而不使用 div 的节点 id 属性或 innerHTML 字符串操作。为此，我需要知道脚本标签在文档中的位置。有办法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-19T15:48:56.943

讲干净，我不认为你的方法特别干净。给 div 一个唯一的 id 并在 DocumentReady 事件触发时执行你的 javascript 是一个更好的主意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T15:56:49.097

你这样做有一个压倒一切的理由吗？如果不是，使用唯一 ID 的建议是最有意义的。而且你总是可以使用像 jQuery 这样的库来让你自己更容易做到这一点。

但是，以下快速测试表明，如果您在函数中使用 document.write()，那么它会将值写入调用函数的位置。

```
<html>
<head>
   <script type="text/javascript">
           function dosomething(arg){
              document.write(arg);
           }
   </script>
</head>
<body>
<div>The first Div</div>
 <div>The 
    <script type="text/javascript">
           dosomething("Second");
   </script>
      Div
 </div>
 <div>The
        <script type="text/javascript">
           dosomething("Third");
       </script>
      Div
    </div>
   </body>
</html> 
```

但是，问题又来了，你确定这是你想要做的吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-21T02:00:55.270

尽管我同意 n3rd 并投票支持他，但我理解您所说的，您面临一个特定挑战，即您无法在 html 分区中添加 id，除非通过脚本。

所以这将是我的建议内联脚本知道它在 DOM 层次结构中的位置，在这种情况下：

1.  将***id***添加到您的***脚本标签***。（是的，脚本标签也可以有 id。）

    *   前任。`<script id="specialagent" type="text/javascript">`
2.  将一行添加到通过 id 获取脚本元素的内联脚本函数。
    *   前任。`this.script = document.getElementById('specialagent');`
3.  ...另一个获取脚本元素的父节点。

    *   前任。`var targetEl = this.script.parentNode;`
4.  如果可以的话，考虑将你的函数重组为一个自动执行的函数。

    *   理想情况下，它会立即执行，无需“onload”调用。
    *   见摘要示例，下一个。

总结示例：

```
<script id="specialagent" type="text/javascript">
var callMe = function(arg1,arg2,arg3) {
    this.script = document.getElementById('specialagent');
    var targetEl = this.script.parentNode.nodeName=="DIV" && this.script.parentNode;
    //...your node manipulation here...
}('arg1','arg2','arg3');
</script> 
```

下面的 TEST 代码在运行时证明该函数已经确定了它在 DOM 中的位置，而且，重要的是，它的 parentNode。测试有带有 id 的划分节点，仅用于测试目的。除了测试之外，它们不是功能识别它们所必需的。

测试代码：

```
<html>
<head>
<title>Test In place node creation with JS</title>
</head>
<body>
<div id="one">
    <h2>Child of one</h2>
    <div id="two">
            <h2>Child of two</h2>
            <script id="specialagent" type="text/javascript">
            var callMe = function(arg1,arg2,arg3) {
                this.script = document.getElementById('specialagent');
                var targetEl = this.script.parentNode;
                /*BEGIN TEST*/
                 alert('this.script.id: ' + this.script.id);
                 alert('targetEl.nodeName: ' + targetEl.nodeName + '\ntargetEl.id: '+targetEl.id);
                 alert('targetEl.childNodes.length: ' + targetEl.childNodes.length);
                 var i = 0;
                 while (i < targetEl.childNodes.length) {
                     alert('targetEl.childNodes.'+i+'.nodeName = ' + targetEl.childNodes[i].nodeName);
                     ++i;
                }
                /*END TEST - delete when done*/     
                //...rest of your code here...to manipulate nodes
            }('arg1','arg2','etc');
            </script>
     </div>
 </div>
 </body>
 </html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T15:52:36.803

不太确定您要实现什么，但这会在单击时将 dom 元素传递给函数。然后你可以在函数中使用 jquery 来做你想做的事情

```
...
<script type="text/javascript">
    function pushStuffToDOMHere(element)
    {
          $(element).append("<p>Hello</p>"); // or whatever
    }
</script>
<div onclick="pushStuffToDOMHere(this);">

</div>
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T09:41:03.920

我的解决方案是此处发布的（好的）答案的组合：

调用该函数时，它将 document.write 一个具有唯一 ID 的 div。然后在 document.onload 上，可以轻松找到该 div 的父节点并添加新的子节点。

我选择这种方法是因为一些独特的限制：除了添加脚本元素之外，我不能接触 HTML 代码。真的，请问我的老板...

后来想到的另一种方法：

```
function whereMI(node){
    return (node.nodeName=='SCRIPT')? node : whereMI(node.lastChild);
}
var scriptNode = whereMI(document); 
```

但是，当诸如 fireBug 之类的东西在文档加载完成之前将自己附加为 HTML 节点中的最后一个元素时，这应该会失败。

# sql - 如何使 Linq to SQL 转换为派生列？

> ID：883564
> 
> 赞同：3
> 
> 时间：2009-05-19T15:47:44.870
> 
> 标签：sql, linq-to-sql

我有一个带有 'Wav' 列的表，该列的类型为 'VARBINARY(max)'（存储一个 wav 文件），并且希望能够检查是否存在从 Linq 到 SQL 的 wav。

我的第一种方法是在 Linq 中执行以下操作：

```
var result = from row in dc.Table
             select new { NoWav = row.Wav != null }; 
```

上面代码的问题是它会将所有二进制内容检索到 RAM，这并不好（速度慢且内存不足）。

知道如何让 Linq 查询转换为 SQL 中的波纹管吗？

```
SELECT (CASE WHEN Wav IS NULL THEN 1 ELSE 0 END) As NoWav FROM [Update] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T13:17:53.343

感谢所有的答复。他们都说得通。事实上，Linq*应该*正确翻译 != null ，但它似乎没有有效地做到这一点：运行我的代码非常慢，所以不知何故，我唯一的解释是它把二进制数据传输到了 RAM ......但也许我错了。

我想我在stackoverflow的其他地方找到了一个解决方法：[在日期时间创建一个计算列](https://stackoverflow.com/questions/441869/create-a-computed-column-on-a-datetime)

我对我的表运行了以下查询：

```
ALTER TABLE [Table]
ADD WavIsNull AS (CASE WHEN [Wav] IS NULL Then (1) ELSE (0) END) 
```

现在我将更新我的 DBML 以反映该计算列并查看它的运行情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T16:06:46.847

您确定此代码会将数据检索到 RAM 吗？

我使用**LINQPad**进行了一些测试，并按照您的建议对生成的 SQL 进行了优化：

```
from c in Categories
select new
{
    Description = c.Description != null
}

SELECT 
    (CASE 
        WHEN [t0].[description] IS NOT NULL THEN 1
        ELSE 0
     END) AS [Description]
FROM [Category] AS [t0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T16:08:18.143

这个查询怎么样：

```
var result = from row in dc.Table where row.Wav == null
 select row.PrimaryKey 
```

对于您的值为空的键列表。对于 null/not null 的列表，您可以这样做：

```
var result = from row in db.Table 
             select new 
             { Key = row.Key, NoWav = (row.Wav == null ? true : false) }; 
```

这将生成类似于以下的 SQL 代码：

```
SELECT [t0].[WavID] AS [Key], 
    (CASE 
        WHEN [t0].[Wav] IS NULL THEN 1
        ELSE 0
     END) AS [NoWav]
FROM [tblWave] AS [t0] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T16:08:46.613

我在这里不清楚，您的 SQL 代码将从您的数据库中返回一个 1 和 0 的列表。那是你要找的吗？如果您有记录的 ID，那么您可以使用 Wav 字段上的 a 条件检索该单条记录，返回 null 表示没有 wav，即

```
var result = from row in dc.Table
             where (row.ID == id) && (row.Wav != null)
             select new { row.Wav }; 
```

# visual-studio-2008 - 更改 Visual Studio 2008 的默认安装目录

> ID：883573
> 
> 赞同：1
> 
> 时间：2009-05-19T15:49:27.193
> 
> 标签：visual-studio-2008, installation, development-environment

我想在安装了现有 VS2005 的 PC 上安装 Visual Studio 2008。由于我的 C: 驱动器空间不足，我想在我的 D: 驱动器上安装 VS2008。这可能吗？

### 笔记：

我已经在我的 D: 驱动器上重新安装了所有琐碎的应用程序，并在 C: 驱动器上清理了尽可能多的空间。由于我的开发机器被锁定，我无法更改默认分区大小或重建机器。

我知道这不是严格意义上的编程问题，但由于它确实与开发环境有关，所以我想我会问它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T15:52:12.247

当您进行自定义安装时，您有机会指定目标目录，但仍需要系统驱动器上的一些空间。

# python - Django中的自定义排序

> ID：883575
> 
> 赞同：38
> 
> 时间：2009-05-19T15:49:31.030
> 
> 标签：python, django, django-models

您如何在 Django 中定义特定的排序`QuerySet`？

具体来说，如果我有`QuerySet`这样的：`['a10', 'a1', 'a2']`。

常规订单（使用`Whatever.objects.order_by('someField')`）会给我`['a1', 'a10', 'a2']`，而我正在寻找：`['a1', 'a2', 'a10']`。

定义我自己的排序技术的正确方法是什么？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2009-05-19T16:03:55.773

据我所知，没有办法以这种方式指定数据库端排序，因为它太特定于后端。您可能希望使用良好的老式 Python 排序：

```
class Foo(models.Model):
    name = models.CharField(max_length=128)

Foo.objects.create(name='a10')
Foo.objects.create(name='a1')
Foo.objects.create(name='a2')

ordered = sorted(Foo.objects.all(), key=lambda n: (n[0], int(n[1:])))
print ordered # yields a1, a2, 10 
```

如果您发现自己经常需要这种排序，我建议`models.Manager`您为执行排序的模型创建一个自定义子类。就像是：

```
class FooManager(models.Manager):
    def in_a_number_order(self, *args, **kwargs):
        qs = self.get_query_set().filter(*args, **kwargs)
        return sorted(qs, key=lambda n: (n[0], int(n[1:])))

class Foo(models.Model):
    ... as before ...
    objects = FooManager()

print Foo.objects.in_a_number_order()
print Foo.objects.in_a_number_order(id__in=[5, 4, 3]) # or any filtering expression 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2009-05-20T18:20:33.670

@Jarret 的答案（在 Python 中进行排序）非常适合简单的情况。只要您有一个大表，并且想只提取以某种方式排序的结果的第一页，这种方法就会中断（您必须先从数据库中提取每一行，然后才能进行排序）。那时我会考虑添加一个非规范化的“排序”字段，您可以在保存时从“名称”字段填充该字段，您可以以通常的方式在数据库级别进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T16:04:56.630

这取决于你想在哪里使用它。

如果您想在自己的模板中使用它，我建议编写一个模板标签，它将为您进行排序在其中，您可以使用您想要使用的任何排序算法。

在管理员中，我通过将模板扩展到我的需要并加载模板标签来进行自定义排序，如上所述

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-04T09:31:39.363

如果您有更大的数据集并另外使用 SOLR 后端（例如使用 Haystack）：

与选项`solr.ICUCollationField`一起`numeric=true`用作排序字段的类型。这将根据语言进行排序，如果存在数字，将根据数字规则而不是字符串排序对数字部分进行排序。

请参阅： [https ://cwiki.apache.org/confluence/display/solr/Language+Analysis#LanguageAnalysis-UnicodeCollat​​ion](https://cwiki.apache.org/confluence/display/solr/Language+Analysis#LanguageAnalysis-UnicodeCollation) [http://www.solr-start.com/javadoc/solr-lucene/org/apache/solr/schema /ICUCollat​​ionField.html](http://www.solr-start.com/javadoc/solr-lucene/org/apache/solr/schema/ICUCollationField.html)

# sql - 决定定价向导的数据库结构

> ID：883578
> 
> 赞同：1
> 
> 时间：2009-05-19T15:50:08.673
> 
> 标签：sql, linq-to-sql, database-design

## 选项 A

我们正在开发一个需要自定义表格定价向导的小项目。（是的，实际的定制桌子——你吃的那种。从这里开始，我将它们称为厨房桌子，这样我们就不会混淆了）我想出了一个模型，其中每个厨房桌子部分都是一个数据库表。所以数据库看起来像这样：

```
TableLineItem
-------------
ID
TableSizeID
TableEdgeWoodID
TableBaseID
Quantity

TableEdgeWoodID
---------------
ID
Name
MaterialUnitCost
LaborSetupHours
LaborWorkHours 
```

每个部分都必须能够计算其价格。大多数计算非常相似。我喜欢这种结构，因为我可以将它直接拖到 linq-to-sql 设计器中，并生成我的所有类。（更少的代码编写意味着更少的维护......）然后我实现了一个计算成本接口，它只考虑表格的大小。我写了一些测试，这个功能很好。我还添加了一个表格来根据之前的选择过滤 UI 中的部分。（您不能拥有具有特定饰面的特定木材。）模型中还有其他一些例外，我对它们进行了硬编码。这个模型非常僵化，不断变化的需求会改变数据模型。（例如，如果所有桌子突然需要雨伞。）

## 选项 B：

在与我的同事多次会面后（考虑到这个项目的规模，这可能花费了更多的时间），我的同事们决定他们更喜欢更通用的方法。像这样的东西：

```
Spec
----
SpecID
SpecTypeID
TableType_LookupID
Name
MaterialUnitCost
LaborSetupHours
LaborWorkHours

SpecType 
--------
SpecTypeID
ParentSpecType_SpecTypeID
IsCustomerOption
IsRequiredCustomerOption 
```

ETC...

这是一种更通用的方法，可用于构建任何产品。（比如，如果他们开始销售椅子......）我认为这需要更长的时间来实施，但将来会更加灵活。（尽管我怀疑我们是否会重新考虑这一点。）此外，您还失去了一些参照完整性——您需要触发器来强制不能为桌木设置桌基。

## 问题：

1.  您更喜欢哪种数据库结构？随意提出你自己的建议。
2.  什么是最佳实践？如果您有几个相似的数据库表，您是创建一个具有类型列的数据库表，还是创建几个不同的表？我怀疑答案以“这取决于...”开头
3.  两种方法的估计时间差是多少（1 周、1 天、150% 长等）

提前致谢。如果您有任何问题，请告诉我，以便我更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T15:58:04.243

通过设计符合我的客户原始规格但结果过于僵化的数据库结构，我经常被抓住，我总是会选择更灵活的方法，即使它需要更多时间来设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T16:11:46.003

我现在没有时间给出完整的答案，但我会把它扔掉：

*   根据您用来编写代码的开发工具来设计数据库通常是个坏主意。
*   你想在一定程度上是通用**的**。数据库中的表应该代表某些东西，并且可以使其过于通用。例如，名为“Things”的表可能过于通用。
*   可能会做出超出您预期的约束。你的“桌子底座”和“桌木”的例子对我来说没有意义，但如果你可以扩展一个特定的例子，有人可能会提供帮助。
*   最后，如果这是针对单个商店的小型应用程序，那么您的设计对项目结果的影响将比您设计的应用程序会被大量使用且不断变化的应用程序影响小得多。这又回到了上面“太笼统”的评论。当系统的使用最少且定义明确时，可能会过度设计系统。我希望这是有道理的。

鉴于您在下面对桌子底座和木材的评论，您可以设置一个名为 TableAttributes 的表格（或类似的东西），并且每个可能的选项都属于特定的表格属性类型。然后，您可以强制任何给定选项仅用于通过外键应用的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T16:06:48.003

数据库模式设计存在过度抽象的趋势，因为更改的成本可能很高。我自己，我喜欢具有相当描述性的表名。我经常将模式设计与 OO 设计等同起来。例如，您通常不会创建名为 Thing 的类，您可能会将其命名为 Product、Furniture、Item，这些与您的业务相关的东西。

在您提供的架构中，混合了抽象（规范）和特定（TableType_LookupID）。我倾向于均衡抽象级别，所以使用如下实体：

```
ProductGroup (for the case where you have a product that is a collection of other products)
Product
ProductType
ProductDetail 
ProductDetailType
etc. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T21:11:26.637

以下是我的经验告诉我的：

1.  **您更喜欢哪种数据库结构？** 毫无疑问，我会选择方法一。选择可能有效的最简单设置。如果您增加复杂性，请始终问自己，它对客户有什么价值？
2.  **什么是最佳实践？**这确实取决于项目的规模和预期的变化率等。作为一般规则，当您期望客户添加新类型时，通用表是值得的。例如，如果您的客户希望能够将新的“颜色”实体添加到表中，则您需要通用表。您无法事先预测他们会添加什么。
3.  **两种方法的估计时间差是多少？**不了解您的业务、技能和环境，不可能给出[有效的估计](https://rads.stackoverflow.com/amzn/click/com/0735605351)。您对编码有信心的方法将花费最少的时间。在这里，我的猜测是方法 #1 可能快 5 到 50 倍。通用表在数据库和客户端都很难。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T21:15:35.567

选项 B..

**通用通常优于特定。** 软件已经注定要失败或仅通过其为一组特定任务而设计的能力。如果你构建了一些通用的东西，如果通过对它可能走向的现实分析进行抽象，它就会减少破坏。只要你远离过度抽象和抽象不足，它可能就是最佳选择。

在这种情况下，“代码越少越好”的格言可能是因为您不必再​​回来重新编写它。

# caching - L1/2 缓存问题

> ID：883579
> 
> 赞同：1
> 
> 时间：2009-05-19T15:51:27.693
> 
> 标签：caching, hardware, computer-architecture

L1/L2 高速缓存行能否分别高速缓存主存数据字的多个副本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T16:07:19.953

主内存可能不止一次在缓存中。显然，这是真实的，并且在多处理器机器上很常见。但即使在单处理器机器上，它也可能发生。

考虑一个具有拆分 L1 指令/数据缓存的 Pentium CPU。指令仅进入 I-cache，数据仅进入 D-cache。现在，如果操作系统允许自我修改代码，则可以将相同的内存加载到 I 和 D 缓存中，一次作为数据，一次作为指令。现在，您在 L1 缓存中拥有该数据两次。因此，具有这种拆分缓存架构的 CPU 必须采用缓存一致性协议来避免竞争条件/损坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T16:00:03.447

否 - 如果它已经在缓存中，MMU 将使用它而不是创建另一个副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T16:01:40.203

每个缓存基本上都存储整个内存的一小部分。当 CPU 需要内存中的一个字时，它[首先进入 L1，然后进入 L2 缓存，依此类推，然后再检查主存](http://en.wikipedia.org/wiki/L3_cache#Multi-level_caches)。因此，一个特定的记忆字可以同时在 L2 和 L1 中，但它不能在 L1 中存储两次，因为这不是必需的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T00:38:46.093

是的，它可以。L1 副本已更新，但尚未刷新到 L2。仅当 L1 和 L2 是非独占缓存时才会发生这种情况。这对于单处理器来说是显而易见的，但对于通常每个内核都有自己的 L1 缓存的多处理器来说更是如此。

这一切都取决于缓存架构——它是否能保证任何事情。

# coldfusion - 如何在 cfscript 标签内执行 cfdump？

> ID：883585
> 
> 赞同：29
> 
> 时间：2009-05-19T15:52:42.263
> 
> 标签：coldfusion, railo, cfml, openbd

为了调试，我想将某些变量转储到我的网页上。我怎样才能从 cfscript 标签内做到这一点？

我尝试了以下方法，但它不起作用：

```
<cfscript>
  ...
  <cfif cgi.REMOTE_ADDR eq "IP">
    <cfdump var="#var1#"><br/>
  </cfif>
  ...
</cfscript> 
```

关于可以做什么的任何线索？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-05-19T16:56:31.950

在 CF 9 之前的版本中，您不能直接这样做。但是，您可以使用CFLib 中的[dump() UDF。](http://cflib.org/udf/Dump)那里有一整个 UDF 库，它们模仿没有直接 CFSCRIPT 等效项的 CF 标记。

ColdFusion 9（及更高版本）提供了该`writeDump()`功能。

[用于WriteDump()](https://helpx.adobe.com/coldfusion/cfml-reference/coldfusion-functions/functions-t-z/writedump.html)函数的 Adob​​e文档链接

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2011-01-17T20:34:42.533

像使用 writeOutput() 一样使用 writeDump()

请参阅CF 9 参考上的[writeDump](https://helpx.adobe.com/coldfusion/cfml-reference/coldfusion-functions/functions-t-z/writedump.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-02-17T22:02:46.943

以下是不是更容易和直接？

```
oAdmin = createObject("component", "cfide.adminapi.base");
oAdmin.dump(myVar); 
```

它适用于 CF7 及更高版本，甚至可能更早。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-22T20:06:51.403

自己编写也相当容易。您只需在 cfml 而不是 cfscript 中定义一个函数。您也可以使用它来执行 cfaborts 和 cfloops。

像这样的东西（在我的脑海中......没有被执行）。

```
<CFFUNCTION NAME="MyDump">
    <CFARGUMENT NAME="OBJ" Required="TRUE">
    <CFDUMP VAR="#Obj#">
</CFFUNCTION>
<CFSCRIPT>
  if(cgi.REMOTE_ADDR eq "IP"){
    MyDump(Var1);
  }
</CFSCRIPT> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-10-17T02:55:34.390

现在在开始 ColdFusion 11 的 cfscript 中允许使用普通标签名称

```
<cfscript>
    cfdump (var=#myVar#);
</cfscript> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-26T17:33:17.490

```
<cffunction name="setAbort" access="private" returntype="void" output="false">
 <cfdump var="#arguments#"/><cfabort>
</cffunction> 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-01-10T17:05:24.080

对于转储，我们使用 Writedump(myvar); 我们使用 abort 而不是 cfscript 和相同的；而不是在任何实例中退出程序的执行。我们使用 writeoutput(); 代替

```
 <cfoutput>#myvar#</cfoutput> 
```

下面是 cfscript 中转储和中止的代码。

```
writedump(myvar); for dump

abort; for stop execution of programm 

writeoutput(myvar); for output within cfscript 
```

# prototypejs - 原型 findElements querySelectorAll 错误

> ID：883589
> 
> 赞同：0
> 
> 时间：2009-05-19T15:54:01.093
> 
> 标签：prototypejs

我正在调用“down”函数，但使用 1.6.1_rc2 得到一个无效参数

这是html片段：

```
<TR id=000000214A class="activeRow searchResultsDisplayOver" conceptID="0000001KIU">
    <TD>
        <DIV class=gridRowWrapper>
            <SPAN class=SynDesc>Asymmetric breasts</SPAN> 
            <DIV class=buttonWrapper>
                <SPAN class=btnAddFav title="Add to Favorites">&nbsp;</SPAN> 
            </DIV>
        </DIV>
    </TD>
</TR> 
```

这是代码：

```
var description = row.down('span.SynDesc').innerHTML; 
```

row 是对元素的 dom 引用。

原型附加一个 # 然后是元素的 id：

```
findElements: function(root) {
    root = root || document;
    var e = this.expression, results;

    switch (this.mode) {
      case 'selectorsAPI':
        if (root !== document) {
          var oldId = root.id, id = $(root).identify();
          id = id.replace(/[\.:]/g, "\\$0");
          e = "#" + id + " " + e;
        }

        results = $A(root.querySelectorAll(e)).map(Element.extend); <-- e = "#000000214A span.SynDesc"
        root.id = oldId;

        return results;
      case 'xpath':
        return document._getElementsByXPath(this.xpath, root);
      default:
       return this.matcher(root);
    } 
```

我收到“无效参数”错误？

如果我在违规行之前放置一个断点并将 e 更改为等于“span.SynDesc”它工作正常。

帮助。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-30T17:20:23.733

I ran into this. Changing the TR's ID to start with a letter should fix the problem. It turns out that legal HTML IDs match /^[A-Za-z][A-Za-z0-9_:.-]*$/.

# visual-studio - Microsoft Visual Studio：opendir() 和 readdir()，怎么样？

> ID：883594
> 
> 赞同：5
> 
> 时间：2009-05-19T15:54:42.667
> 
> 标签：visual-studio, visual-c++, readdir

我之前在我的 Dev-cpp 中使用过这种代码：

```
if((dh = opendir(folder)) !== false){
    while((file = readdir(dh)) !== false){
        // do my stuff
    }
    closedir(dh);
} 
```

但是现在我正在使用 MSVC++，我不知道如何在那里添加这些文件，我试图在那里复制 dirent.h/dir.h/errno.h，但它给出了另一个与这些文件中的另一个包含文件相关的错误.. .，通过查看文件，我看到了 mingw 的东西，所以它的编译器相关？idk MSVC++ 使用什么编译器，但是是否可以在 MSVC++ 中复制粘贴这些文件并使其正常工作？

我试图从 MSDN 查找一些代码，但它真的搞砸了，所以我希望我可以使用上面的这些功能......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T20:37:52.693

我建议使用[FindFirstFile()](http://msdn.microsoft.com/en-us/library/aa364418(VS.85).aspx)和[FindNextFile()](http://msdn.microsoft.com/en-us/library/aa364428(VS.85).aspx)。

示例代码：

```
HANDLE hFind;
WIN32_FIND_DATA FindFileData;

if((hFind = FindFirstFile("C:/some/folder/*.txt", &FindFileData)) != INVALID_HANDLE_VALUE){
    do{
        printf("%s\n", FindFileData.cFileName);
    }while(FindNextFile(hFind, &FindFileData));
    FindClose(hFind);
} 
```

这确实更好，因为我可以使用“* .txt”等，这使得查找某些特定文件类型变得更加容易，之前我必须为此编写自己的匹配函数：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-18T10:01:50.127

使用`boost::filesystem`，或者`std::filesystem`如果您使用的是 C++17

# iphone - 如何获得像星际迷航应用程序一样的过渡？

> ID：883596
> 
> 赞同：0
> 
> 时间：2009-05-19T15:54:52.730
> 
> 标签：iphone, cocoa-touch, uiview, quartz-graphics

我已将 ViewTransitions 应用程序修改为使用 kCAScrollHorizo​​ntally。我已在应用程序委托中设置转换以使用 kCATransitionPush 而不是 kCATransitionFade。但是，我仍然会淡入淡出。我怎样才能像星际迷航应用程序（[http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewSoftware?id=305916616&mt=8](http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewSoftware?id=305916616&mt=8)）一样让视图在横向上滑动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-11-15T02:07:15.673

我以前做过这样的转换。基本上我有一个占据屏幕的大视图，其中嵌入了另一个视图（实际的屏幕内容）。当我想从左侧或右侧滑入新页面时，我将获取下一页内容，将其放置在屏幕外，并将其嵌入到大背景视图中。然后我将只制作动画（使用简单`[UIView beginAnimations:context:]`的同时更改两个页面的框架（实际上只是更改框架的原点）。屏幕外视图滑动到当前视图所在的位置，当前视图滑动到屏幕外位置。离开屏幕后，我会将其从超级视图中删除。就像一个魅力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T18:42:57.257

模拟器仍然会淡出而不是执行一些复杂的转换......

你在设备上试过了吗？

# jquery - 关于 jQuery、元数据和 XHTML 合规性

> ID：883599
> 
> 赞同：5
> 
> 时间：2009-05-19T15:55:14.947
> 
> 标签：jquery, metadata, xhtml

我想向我们的网站添加一些 jQuery 功能，其中一个标记将具有一个单击处理程序，该处理程序需要在另一段标记上引起动作，即 A 是 B 动作的触发器。不能保证相对A 和 B 的结构，所以我不能依赖 jQuery 选择器，而且每个唯一的 A 只需要与其唯一的对应物 B 相关。

对于在这种情况下进行的最佳方式的普遍共识是什么？

**选项 1：**谁在乎 XHTML 合规性，反正它被高估了。我们有未经培训的 Web 内容生产者能够将标记注入我们的网站，因此严格的 XHTML 合规性将是一个白日梦。只需制作标签属性并使用 jQuery 读取它们的值。

```
Example:
<div class="jquery-feature-trigger" actson="targetID">Trigger</div> 
```

**选项 2：**使用看起来像 HTML 的属性，但实际上不应该用于该目的。

```
Example:
<div class="jquery-feature-trigger" rel="targetID">Trigger</div> 
```

**选项 3：**使用像 ASP.NET 4.0 那样的命名空间。

```
Example:
<div class="jquery-feature-trigger" custom:actson="targetID">Trigger</div> 
```

如果您想推荐选项 3，我将不胜感激一个链接，以使其工作所需的内容，因为我真的不知道是否必须制作 DTD 或如何链接它。

**选项 4：** Stack Overflow 社区有更好的主意……？？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-19T16:27:58.967

您可以研究[jQuery Metadata plugin](http://plugins.jquery.com/project/metadata)，它可以将 JSON 元数据存储在`class`属性（或其他各种地方）中。例子：

```
<div class="jquery-feature-trigger { actson: 'targetID' }">Trigger</div> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2010-10-26T01:34:03.547

尽管符合 XHTML 规范，但我现在会为此使用[`data-`属性，如下所示：](http://dev.w3.org/html5/spec/Overview.html#attr-data)

```
<div class="jquery-feature-trigger" data-actson="targetID">Trigger</div> 
```

这些是 HTML5 功能，但不会在 HTML4/XHTML 中引起任何问题，除了不是验证器中的有效属性......但不会因此产生实际问题。

自 jQuery 1.4.3以来，jQuery还在方法[中添加了对这些的内置支持](http://blog.jquery.com/2010/10/16/jquery-143-released/)[`.data()`](http://api.jquery.com/data/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T16:21:50.330

有什么方法可以将信息存储在 jQuery 数据方法中？避免标记混乱

有关示例，请参见此处

snipplr.com/view/9715/the-jquery-data-store/

或直接文件

docs.jquery.com/Core/data#name

我已经用它来存储关于我的元素的信息了几次，非常有用的功能似乎并没有被广泛了解！

抱歉不能发链接我是新用户:(

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T16:23:29.237

试试这个：

```
<html>
<head>

  <script src="scripts/jquery/jquery-1.2.6.min.js" type="text/javascript"></script>
  <!--Using highlight effect to illustrate-->      
  <script src="scripts/jquery/jquery-ui-highlight.min.js" type="text/javascript"></script>
  <script type="text/javascript">
    $(document).ready(function(){
      $(".jquery-feature-trigger").click(function(){
           $("#target-" + $(this).attr("id")).effect("highlight", {}, 6000);

      });
});
</script>

</head>

<body>

 <div class="jquery-feature-trigger" id="1">Trigger 1</div>
 <div class="jquery-feature-trigger" id="2">Trigger 2</div>
 <div class="jquery-feature-trigger" id="3">Trigger 3</div>
 <div class="jquery-feature-target" id="target-1">Target 1</div>
 <div class="jquery-feature-target" id="target-2">Target 2</div>
 <div class="jquery-feature-target" id="target-3">Target 3</div>   

</body>
</html> 
```

所以我决定给目标 div 的 id 为“target-x”，并给触发 div 的 id 为“x”。这样，当您单击触发器 x 时，它会影响目标“target-x”。

注意那行

```
$("#target-" + $(this).attr("id")) 
```

此时，您将获得单击的 div 的 id 并将其连接到“target-”，这将成为目标 div 的 id。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T16:25:20.077

那么在你的 div 隐藏输入中放入适当的名称和 ID 呢？这样您就可以保持 XHTML 清晰。所以你会这样使用：

```
$( "div_name").find( "hidden_input_name").val() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T16:41:38.660

我不知道你在做什么，但是否可以让触发器成为一个锚标签，然后给目标一个 id？像这样：

```
<a href="#target1">Trigger 1</a>
<div id="target1">Target 1</div> 
```

然后，您可以使用 jQuery 通过查看 href 属性来查找目标的 id。

如果触发器 1 隐藏或显示目标 1 或向下滚动到它，则此方法将具有额外的好处，即在禁用 JavaScript 的情况下仍然可以执行某些操作。

# html - 有没有人有一个脚本可以从图像目录自动生成图像标签？

> ID：883602
> 
> 赞同：0
> 
> 时间：2009-05-19T15:56:06.600
> 
> 标签：html, xhtml

我在 Photoshop 中进行了很多切片，手动`<img />`为每个切片编写标签很乏味——写入文件名、检查高度和宽度、编写 alt 标签等。

我可以使用 Photoshop 来生成 HTML，但他们通常会通过不生成 XHTML 或将其包装在表格中等等来搞砸它。我试图让我的生活比这更轻松。

所以我想知道是否有人使用基于目录自动生成img标签的脚本？或者，如果某些我不知道的 IDE 会这样做？我只是希望它生成一堆这样的标签：

```
<img src="{filename}" alt="" width="{width}" height="{height}" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T15:59:08.363

首先，我要赞扬您在图像中具有宽度和高度信息。你这样做很好，每个人都应该这样做。您可以使用任何脚本语言（例如 Python 或 PHP）来使用图像库（例如 imagemagick 或 gd）来执行此操作。在不知道您使用什么语言或工具来运行您的网站的情况下，我无法真正提供示例。

在 Python 中，使用模板系统您可能会执行以下操作：

```
<div>
     <% addImg("/images/myImage.png") %>
</div> 
```

这将生成正确的图像标签：

```
<div>
  <img src="/images/myImage.png" alt="MyImage" width="200" height="100" />
</div> 
```

您在 python 中的某个地方定义：

```
def addImg(imgPath):
  #do image processing here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T16:01:31.357

如果 Photoshop 在这方面做得不错，那么最简单的方法就是从那里处理输出，使用正则表达式或其他东西来解决其中的问题。这可能比尝试从头开始重新实现该功能更简单。

如果您可以发布 Photoshop 的 HTML 输出示例，我可以提供正则表达式搜索/替换，将其转换为您要查找的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-30T19:54:00.297

制作php脚本：

```
<?php

$images = scandir('images');

$txt = '';

$tmpl = '<img id="{{id}}" src="images/{{name}}">';
foreach($images as $image) {

    $tag = $tmpl;
    $tag = str_replace('{{id}}', explode('.', $image)[0], $tag);
    $tag = str_replace('{{name}}', $image, $tag);

    $txt .= $tag . "\n";
}

file_put_contents('tags.txt', $txt); 
```

创建一个 php 文件并运行它：

php脚本.php

PHP 脚本必须与图像文件夹位于同一目录中。

您将在 tags.txt 文件中获得图像任务。

# eclipse - Eclipse：如何显示在 CVS 中更改此行的用户？

> ID：883606
> 
> 赞同：7
> 
> 时间：2009-05-19T15:57:25.040
> 
> 标签：eclipse, cvs, history, visualization

有人曾经向我展示了一个很酷的 IntelliJ Idea 插件，它可以在 Java 源代码编辑器中显示来自 CVS 的所有用户提交信息。

它在窗口右侧有一个垂直条，用户更改/提交的每个代码块都以不同的颜色突出显示，鼠标悬停将显示有关用户和版本等的详细信息。

我渴望在 Eclipse 中有类似的东西。

任何指针？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-19T15:59:37.143

你在找[这个](http://stuvel.eu/archive/42/blame-support-in-eclipse)吗？

> 右键单击文件，选择“团队”，“显示注释”，您将看到谁最后编辑了哪行代码。

这是来自[onjava.com的“](http://www.onjava.com/) [What's New in Eclipse 3.2](http://www.onjava.com/pub/a/onjava/2006/06/28/whats-new-in-eclipse-3-2-java-development-tools.html?page=3) ”文章的插图，其中添加：

> 将鼠标悬停在更改块上将显示为该更改输入的开发人员姓名、日期和评论。它还将突出显示文件其余部分中在同一修订版中提供的其他代码部分。

[![CVS Quick Diff 注释显示文件中谁做了什么的基于颜色的注释。](https://i.stack.imgur.com/TfZkp.gif "CVS Quick Diff 注释显示文件中谁做了什么的基于颜色的注释。")](https://i.stack.imgur.com/TfZkp.gif "CVS Quick Diff 注释显示文件中谁做了什么的基于颜色的注释。")
[（来源：[onjava.com](http://www.onjava.com/onjava/2006/06/28/graphics/fig03.gif)）]

# oop - 具有静态字段的有趣功能。StackOverflow 异常

> ID：883612
> 
> 赞同：2
> 
> 时间：2009-05-19T15:58:08.800
> 
> 标签：oop

你有什么想法，为什么下面的代码：

```
public class A
{
    public static int i = B.i + 1;
}

public class B 
{
    public static int i = A.i + 1;
} 
```

有：

```
 int aa = A.i;
        int bb = B.i; 
```

说 aa = 2 (!!!) 和 bb = 1。

我的脑子里有一个堆栈溢出！！！据我了解，递归在静态方法上停止，但为什么呢？如果您将 int i 重新制作为 getter（以调试并了解它究竟为什么会这样工作），您会得到堆栈溢出异常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T16:03:13.010

毫无疑问，执行是这样发生的：

`B.i`静态初始化程序首先运行，并设置`B.i = A.i + 1`. 由于`A.i`尚未初始化，`A.i`等于`default(int)`，即`0`。 `B.i`获得价值`1`。

`A.i`静态初始化程序第二次运行，并设置`A.i = B.i + 1 = 2`.

由于静态初始化程序以未定义的顺序运行，您可能会发现`2`每次运行时都会出现不同的字段，或者当您对代码进行其他结构更改时它们会切换。然而，一个应该总是以 结束`2`，一个应该总是`1`。

PS这与多态无关。

**编辑：** 为了进一步了解静态初始化程序和构造函数的时间，您可能需要检查[C# 规范的这个相关部分。](http://msdn.microsoft.com/en-us/library/aa645758(VS.71).aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-19T16:02:28.800

字段不像属性获取器。它只是存储数据，而不是任何操作。实际上，初始化将移至另一个方法（静态构造函数`.cctor`），该方法将初始化类中的静态变量。

一开始，两者都等于0。在您`A.i`第一次访问之前，`.cctor`类的方法`A`运行。它第一次尝试访问`B.i`，这将导致执行 class 的静态构造函数`B`。`.cctor`of`B`将尝试访问`A.i`，但由于这不是第一次访问字段，静态构造函数 of`A`将**不再**运行。`A`它只是获取仍然为 0的当前值。因此，当完成执行并将控制权返回给时，`B.i`它将等于 1 。它将看到该值并将其加 1 并将其存储在. 因此，将等于 2 (1+1) 并且`B..cctor``A..cctor``B.i``A.i``A.i``B.i`将等于 1。

您获得的唯一保证是在访问该类的任何静态成员**之前**将调用静态构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T17:37:21.307

这是正在发生的事情。

*   第一次访问 A。
*   Ai 是用值 0 创建的。
*   A 的静态初始化程序运行。
*   首次访问 B。
*   Ai 被访问。它当前的值为 0。
*   Bi 设置为 1。Ai 设置为 2。

需要注意的真正重要的事情是静态属性被初始化为其默认值，*然后*静态初始化程序运行。

就个人而言，我尽可能避免静态初始化、静态等。有太多的陷阱。

# python - 给定一个日期范围，如何计算部分或全部在该范围内的周末数？

> ID：883615
> 
> 赞同：1
> 
> 时间：2009-05-19T15:58:57.287
> 
> 标签：python, date, date-arithmetic

给定一个日期范围，如何计算部分或全部在该范围内的周末数？

（根据要求的一些定义：将“周末”表示为周六和周日。日期范围包括在内，即结束日期是“全部或部分”范围的一部分，表示周末的任何部分落在日期范围内意味着整个周末都计算在内。）

为简化起见，我想您实际上只需要知道初始日期的持续时间和一周中的哪一天...

我现在很好，它将涉及到对整数除以 7 和一些逻辑来根据余数加 1，但我不太清楚是什么......

Python中答案的加分；-)

**编辑**

这是我的最终代码。

周末是周五和周六（因为我们计算了住宿的夜数），从周一开始，日子是 0 索引的。我使用了 onebyone 的算法和 Tom 的代码布局。非常感谢各位。

```
def calc_weekends(start_day, duration):
    days_until_weekend = [5, 4, 3, 2, 1, 1, 6]
    adjusted_duration = duration - days_until_weekend[start_day]
    if adjusted_duration < 0:
        weekends = 0
    else:
        weekends = (adjusted_duration/7)+1
    if start_day == 5 and duration % 7 == 0: #Saturday to Saturday is an exception
        weekends += 1
    return weekends

if __name__ == "__main__":
    days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
    for start_day in range(0,7):
        for duration in range(1,16):
            print "%s to %s (%s days): %s weekends" % (days[start_day], days[(start_day+duration) % 7], duration, calc_weekends(start_day, duration))
        print 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T16:19:16.013

这种事情的一般方法：

对于一周中的每一天，计算从那一天开始的“包含一个周末”的时间段之前需要多少天。例如，如果“包含一个周末”的意思是“包含周六和周日”，那么我们有下表：

周日：8 周一：7 周二：6 周三：5 周四：4 周五：3 周六：2

对于“部分或全部”，我们有：

周日：1 周一：6 周二：5 周三：4 周四：3 周五：2 周六：1

显然，不必将其编码为表格，因为它的外观已经很明显了。

然后，给定周期开始的星期几，从周期长度中减去 [*] 魔法值（以天为单位）（可能是 start-end+1，包括两个栅栏）。如果结果小于 0，则它包含 0 个周末。如果它等于或大于 0，则它包含（至少）1 个周末。

然后你必须处理剩下的日子。在第一种情况下，这很容易，每 7 天多一个周末。在第二种情况下，除周日外的每个开始日也是如此，周日只需要再多 6 天就可以包括另一个周末。因此，在从星期日开始的第二种情况下，您可以在周期开始时计算 1 个周末，然后从长度中减去 1 并从星期一重新计算。

更一般地说，“整个或部分”周末在这里发生的事情是，我们正在检查我们是否从有趣的部分（“周末”）中途开始。如果是这样，我们可以：

*   1) 数一，将开始日期移到感兴趣位的末尾，然后重新计算。
*   2) 将开始日期移回感兴趣位的开头，并重新计算。

在周末的情况下，只有一种特殊情况在中途开始，所以 (1) 看起来不错。但是，如果您将日期作为日期+时间以秒而不是天为单位，或者如果您对 5 天工作周而不是 2 天周末感兴趣，那么 (2) 可能更容易理解。

[*] 当然，除非你使用无符号类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-05-12T00:59:02.073

我对这类事情的一般方法：不要开始尝试重新实现自己的日期逻辑 - 这很难，即。你会把它搞砸的边缘情况，看起来很糟糕。**提示：**如果您在程序中的任何地方都有 mod 7 算术，或者在程序中的任何地方将日期视为整数：***您失败***了。如果我在我的代码库中的任何地方（甚至附近）看到“公认的解决方案”，就需要有人重新开始。任何认为自己是程序员的人都会投票赞成这个答案，这令人难以置信。

相反，请使用 Python 附带的内置日期/时间逻辑：

首先，获取您感兴趣的所有日期的列表：

```
from datetime import date, timedelta    
FRI = 5; SAT = 6

# a couple of random test dates
now = date.today()
start_date = now - timedelta(57)
end_date = now - timedelta(13)
print start_date, '...', end_date    # debug

days = [date.fromordinal(d) for d in  
            range( start_date.toordinal(),
                   end_date.toordinal()+1 )] 
```

接下来，过滤到仅属于周末的日子。在您的情况下，您对周五和周六晚上感兴趣，分别是 5 点和 6 点。（请注意，我并没有尝试将这部分纳入之前的列表理解，因为这很难验证是否正确）。

```
weekend_days = [d for d in days if d.weekday() in (FRI,SAT)]

for day in weekend_days:      # debug
    print day, day.weekday()  # debug 
```

最后，您想弄清楚您的列表中有多少个周末。这是棘手的部分，但实际上只有四种情况需要考虑，周五或周六各结束一个。具体示例有助于使其更清晰，而且这确实是您希望在代码中记录的那种东西：

```
num_weekends = len(weekend_days) // 2

# if we start on Friday and end on Saturday we're ok,
# otherwise add one weekend
#  
# F,S|F,S|F,S   ==3 and 3we, +0
# F,S|F,S|F     ==2 but 3we, +1
# S|F,S|F,S     ==2 but 3we, +1
# S|F,S|F       ==2 but 3we, +1

ends = (weekend_days[0].weekday(), weekend_days[-1].weekday())
if ends != (FRI, SAT):
    num_weekends += 1

print num_weekends    # your answer 
```

更短、更清晰、更容易理解意味着你可以对自己的代码更有信心，并且可以处理更多有趣的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T17:20:36.817

要计算整个周末，只需调整天数，使您从星期一开始，然后除以七。（请注意，如果开始日是工作日，则添加天数以移至上一个星期一，如果是周末，则减去天数以移至下一个星期一，因为您已经错过了这个周末。）

```
days = {"Saturday":-2, "Sunday":-1, "Monday":0, "Tuesday":1, "Wednesday":2, "Thursday":3, "Friday":4}

def n_full_weekends(n_days, start_day):
    n_days += days[start_day]
    if n_days <= 0:
        n_weekends = 0
    else:
        n_weekends = n_days//7
    return n_weekends

if __name__ == "__main__":
    tests = [("Tuesday", 10, 1), ("Monday", 7, 1), ("Wednesday", 21, 3), ("Saturday", 1, 0), ("Friday", 1, 0),
    ("Friday", 3, 1), ("Wednesday", 3, 0), ("Sunday", 8, 1), ("Sunday", 21, 2)]
    for start_day, n_days, expected in tests:
        print start_day, n_days, expected, n_full_weekends(n_days, start_day) 
```

如果您想知道部分周末（或几周），只需查看除以七的小数部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T16:09:02.807

除了原始数学之外，您还需要外部逻辑。您需要有一个日历库（或者如果您有大量时间自己实现它）来定义周末、一周中的哪一天开始、结束等。

看看[Python 的日历类](http://docs.python.org/library/calendar.html)。

如果您的代码中没有对天数的逻辑定义，纯数学方法将在极端情况下失败，例如 1 天的间隔，或者我相信任何低于整周的时间（或者如果允许部分时间，则低于 6 天）。

# c# - 在 C# 中使用 BackgroundWorker 形成不透明动画

> ID：883617
> 
> 赞同：1
> 
> 时间：2009-05-19T15:59:24.900
> 
> 标签：c#, multithreading, animation, backgroundworker, opacity

在 BackgroundWorker 的帮助下，我为某种形式创建了不透明动画。

这种方法只有一个小问题，但我不明白问题出在哪里。动画速度是可配置的，即使速度值非常高，有时动画非常非常慢，出于某种奇怪的原因......

我说的“慢动画”不是卡顿，动画其实很流畅，只是需要更多的时间来执行整个动画（从 0% 到 100%，反之亦然）。这只会不时发生。似乎（不确定）它发生在计算机正在执行其他一些有些密集的后台操作时。

我当然需要解决这个问题，但我也想知道你是否会改进这段代码，或者你是否会以不同的方式和/或更好的方式来做。

这是我的代码：

```
private const int TOGGLE_EFFECT_SPEED = 10;

private void blendWorker_DoWork(object sender, DoWorkEventArgs e) {
    bool blendIn = (bool)e.Argument;

    // Loop through all opacity values
    for(double value = 1; value <= 100; value += 1) {
        // Report the current progress on the worker
        blendWorker.ReportProgress(0, blendIn ? value : 100 - value);

        // Suspends the current thread by the specified blend speed
        System.Threading.Thread.Sleep(11 - TOGGLE_EFFECT_SPEED);
    }

    // Set the worker result as the inverse tag value
    e.Result = !blendIn;
}

private void blendWorker_ProgressChanged(object sender, ProgressChangedEventArgs e) {
    double opValue = (double)e.UserState;

    // Show and repaint the whole main notes window?
    if(opValue == 1.0) {
        Show();
        Invalidate(true);
    }

    // Set the main notes window opacity value
    Opacity = (double)e.UserState / 100;
}

private void blendWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e) {
    bool tagFlag = (bool)e.Result;

    // Hide the main notes window?
    if(tagFlag) {
        Hide();
    }

    // Set the main notes window tag value
    Tag = tagFlag;
}

/*
   THE FOLLOWING METHOD IS PART OF A DIFFERENT CLASS.
   ACTUALLY, IT'S THE "PROGRAM" CLASS WHERE MAIN()
   IS LOCATED. THIS METHOD IS CALLED TO SHOW/HIDE
   THE MAIN APPLICATION FORM WITH AN OPACITY ANIMATION
*/
internal static void ToggleNotesWindow() {
    // Get the tag value converted to boolean type
    bool tagFlag = Convert.ToBoolean(NotesWindow.Tag, CultureInfo.InvariantCulture);

    // Bring the main notes window to front?
    if(tagFlag) Program.NotesWindow.BringToFront();

    // Run the blend effect if it's not already running
    if(!NotesWindow.blendWorker.IsBusy) {
        NotesWindow.blendWorker.RunWorkerAsync(tagFlag);
    }

    // Activate and focus the main notes window?
    if(tagFlag) Program.NotesWindow.Activate();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T19:22:29.320

每次更改窗体的不透明度时，Windows 都必须重新绘制它下面的所有窗口、窗口本身，然后应用不透明度（Vista 执行此操作要快得多并且有缓冲）。由于您从 1...100 逐步完成每个不透明度状态，因此此过程必须完成 100 次。有时重绘你的窗口或它下面的窗口会很慢。

无论您传递什么值，值 > 0 的 Thread.Sleep 方法都会从 0...~10ms 休眠。Windows 上的线程调度程序计时器分辨率约为 10 毫秒（同样，Vista 和其他操作系统会更改和优化，因此并不准确），因此您无法安排比这更小的时间片。100x10ms + 实际渲染的时间可能需要 2 整秒才能淡入/淡出。

加快它的方法是减少重画的次数。而不是为不透明度步进 +1，步进 +5、+10 等。这减少了所需的重新绘制的总数，并且会导致表单在 100 毫秒内褪色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T18:26:18.797

总的来说，至少乍一看，我看不出有太多值得改变的地方。如果您发现一些性能瓶颈，您可以尝试查看 Ants Profiler 或类似的代码分析工具，看看您是否可以查明任何慢速部分。

# .net - 测试 Linqto SQL 类

> ID：883619
> 
> 赞同：1
> 
> 时间：2009-05-19T15:59:33.837
> 
> 标签：.net, unit-testing, linq-to-sql, datacontext

如何对具有 LTS Datacontext 的代码进行单元测试。我在测试时出错，我有很多数据上下文，手动添加连接字符串很痛苦，任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T16:13:58.637

好吧，我这样做的方式如下：

我的数据层有一个接口，如下：

```
public class MyDataLayer : iMyDataLayer
{
  public string GetMyData(parameters)
  {
    return myQueryValue;
  }

}

public interface iMyDataLayer
{
  public string GetMyData(parameters);
} 
```

现在，在我的主要代码库（业务逻辑）的构造函数中，我将有一个参数传递给数据层的接口：

```
private iMyDataLayer DataLayer;

public class MyBusinessLogic(iMyDataLayer dataLayer)
{
   DataLayer = dayaLayer
}

public string GetMyData(parameters)
{
  return DataLayer.GetMyData(parameters)
} 
```

有了这个，我现在可以在我的 TDD 项目中创建一个“假”数据服务：

```
public class FakeDataLayer : iMyDataLayer
{
      public string GetMyData(parameters)
      {
        return "Some Default Value or Object";
      }

} 
```

所以现在当我运行我的测试时，我现在可以将我的假数据层对象传递给我的业务逻辑，从这里它将调用假逻辑并返回一个默认结果。

现在，当然您不会在这里使用真实数据。但是，如果您使用真实有效/无效数据设置假对象，您可以通过这种方式测试您的业务逻辑，而无需连接到数据库。

希望这可以帮助。如果您需要澄清任何事情，请告诉我。

# memory-management - windows下，如何分配“写组合”内存块？

> ID：883622
> 
> 赞同：2
> 
> 时间：2009-05-19T15:59:46.287
> 
> 标签：memory-management

主要动机：使用 movntdqa 汇编器命令来避免堆栈污染。此命令仅适用于写入组合内存（也称为 WS 和 USWC）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T02:07:13.327

将 PAGE_WRITECOMBINE 传递给 VirtualAllocEx()。对该页面的顺序写入将由 MMU 进行写入组合。读取或非顺序写入将导致严重的性能损失。

# javascript - 为什么在 JavaScript 中的正则表达式测试返回 false 时 match 会找到结果？

> ID：883625
> 
> 赞同：0
> 
> 时间：2009-05-19T16:00:13.090
> 
> 标签：javascript, regex, tablesorter

我正在尝试使用 jquery 插件*tablesorter*调试排序问题，它使用以下代码检查数字：

```
this.isDigit = function(s,config) {
                var DECIMAL = '\\' + config.decimal;
                var exp = '/(^[+]?0(' + DECIMAL +'0+)?$)|(^([-+]?[1-9][0-9]*)$)|(^([-+]?((0?|[1-9][0-9]*)' + DECIMAL +'(0*[1-9][0-9]*)))$)|(^[-+]?[1-9]+[0-9]*' + DECIMAL +'0+$)/';
                return RegExp(exp).test($.trim(s));
            }; 
```

config.decimal 的值为 '.'

现在，如果 s='0' 失败，但如果您运行 match 而不是 RegEx 似乎正按预期响应。

```
return exp.match($.trim(s)) != null 
```

为了返回不同的结果，此处理有何不同？

以防万一您想要派生 s 的 HTML（最后一列被视为文本）：

```
<tr class="">
  <td><a href="#">Click</a></td>
  <td>Annen Woods</td>
  <td>131</td>
  <td>20</td>        
  <td>5</td>
  <td>3</td>
  <td>12</td>
  <td>6</td>
  <td>50%</td>
  <td>0</td>    
</tr> 
```

我知道 test 返回一个布尔值，而 match 返回一个字符串或 null。

最终的问题是为什么不是这个正则表达式：

```
return RegExp(exp).test($.trim(s)); 
```

相当于 ：

```
return exp.match($.trim(s)) != null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T16:01:28.330

匹配返回值数组，测试返回布尔值，在某些引擎上测试返回第一个结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T17:56:04.727

由于用于构造正则表达式的函数，我认为这有点奇怪。

匹配是字符串的成员。

Test 是 RegExp 的成员。

但是，在那里的函数中， exp 被定义为一个字符串。因此，从技术上讲，您使用 exp 作为字符串值而不是正则表达式来运行 String 的 match()。

通过 RegExp 构造函数运行 exp 应该返回与 test() 相同的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T13:39:27.793

原来这是适当对象的反转。

```
return exp.match($.trim(s)) != null 
```

应该

```
return $.trim(s).match(exp) != null 
```

原始代码只是检查 RegEx 字符串中是否存在“0”

似乎仍然是 tablesorter 中的错误。如果表中存在 0 个值，则必须将解析器声明为“数字”。[jQuery表格排序问题](https://stackoverflow.com/questions/302749/jquery-tablesorter-problem)

# wpf - 带有包含按钮的 ItemTemplate 的 ComboBox

> ID：883626
> 
> 赞同：3
> 
> 时间：2009-05-19T16:00:47.533
> 
> 标签：wpf, silverlight, combobox, itemtemplate

所以，假设我有一个带有自定义数据模板的 ComboBox。数据模板中的一项是按钮：

```
<ComboBox Width="150" ItemsSource="{Binding MyItems}">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <Button Content="ClickMe" /> 
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

这样做的问题是按钮会吃掉点击，如果选择了按钮，项目不会被选中。这意味着下拉不会消失，并且没有选择任何项目。

我明白为什么会这样。

有没有办法解决它？可能是一种处理按钮单击的方法（我绑定到一个命令）并告诉它继续向上链，以便组合框也可以处理单击？

注意：我在 Silverlight 中看到了我的问题，但我猜测在 WPF 中可以看到完全相同的行为。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T18:22:23.947

好的，我明白了。这是一个彻底的黑客，但它仍然让我将我的命令绑定到按钮并继续使用组合框行为来选择项目：

```
<ComboBox x:Name="MyCombo" Width="150" ItemsSource="{Binding MyItems}">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <Button Content="ClickMe" Click="Button_Click" /> 
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

在后面的代码中：

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    MyCombo.SelectedItem = (sender as Button).DataContext;
    MyCombo.IsDropDownOpen = false;
} 
```

如果我真的想要，我可以将 SelectedItem 和 IsDropDownOpen 绑定到我的 ViewModel 中的属性，但我决定反对它，将这种行为作为 XAML 的 hack 扩展，以保持我的 ViewModel 干净。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T11:26:25.100

我发现了 MVVM 上下文的另一种可能性。我使用了一个派生类`ComboBox`，如果添加了一个派生自我`ButtonBase`附加到`Click`事件以关闭`ComboBox`.

这适用于我的项目 - 但只是因为项目本身是按钮，如果它们只包含按钮作为子元素，它将不起作用。

```
public class MyComboBox : ComboBox
{
    public MyComboBox()
    {
        // use Loaded event to modify inital items.
        Loaded += OnLoaded;
    }

    private void OnLoaded(object sender, RoutedEventArgs routedEventArgs)
    {
        if (Items != null)
        {
            foreach (var item in Items)
            {
                var button = item as ButtonBase;
                if (button != null)
                {
                    ModifyButtonItem(button);
                }
            }
        }
    }

    protected override void OnItemsChanged(System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        base.OnItemsChanged(e);
        // Check added items. If an item is a button, modify the button.
        if (e.NewItems != null)
        {
            foreach (var item in e.NewItems)
            {
                var button = item as ButtonBase;
                if (button != null)
                {
                    ModifyButtonItem(button);
                }
            }
        }
    }

    private void ModifyButtonItem(ButtonBase button)
    {
        button.Click += (sender, args) => { IsDropDownOpen = false; };
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T23:01:03.717

您最好的选择可能是在按钮的命令中设置 SelectedItem。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T16:12:00.713

我不知道是否有办法做你想做的事。例如，如果您将 a 放入 a`Button`中`ListBox`，则会发生相同的行为 - 单击`Button`不会导致其在 中的项目`ListBox`被选中。事实上，任何`ItemsControl`支持选择的控件都是如此。

您可能可以对`Click`事件执行某些操作并将其标记为未处理，以便它继续在可视树上运行，但即便如此我也不确定这是否可行。

# c++ - 如何通过引用传递 Generic::List？

> ID：883632
> 
> 赞同：1
> 
> 时间：2009-05-19T16:01:35.240
> 
> 标签：c++, .net, pass-by-reference, argument-passing

为了将一些非托管代码包装在托管 .dll 中，我试图将 a`Generic::List`数据点转换为`std::vector`. 这是我正在尝试做的一个片段：

```
namespace ManagedDLL
{
    public ref class CppClass
    {
        void ListToStdVec( const List<double>& input_list, std::vector<double>& output_vector )
        {
            // Copy the contents of the input list into the vector
            // ...
        }

        void ProcessData( List<double> sampleData )
        {
            std::vector<double> myVec;

            ListToStdVec( sampleData, myVec );

            // Now call the unmanaged code with the new vector
            // ...
        }
    }
} 
```

编译这个给了我：

> 错误 C3699：“&”：不能在类型“const System::Collections::Generic::List”上使用此间接

我可能在这里错过了一些基本的东西（我对 .net 的做事方式相对较新），但这对我来说似乎是合理有效的代码..？

**[编辑]**我已经尝试了 Andy 和 Dario 的建议并且它们有效，但是我如何访问输入列表的成员？我尝试了各种引用组合，但似乎没有任何编译：

```
void ListToStdVec( const List<double>% input_list, std::vector<double>& output_vector )
{
    int num_of_elements = input_list->Count;
}

void ListToStdVec( const List<double>^ input_list, std::vector<double>& output_vector )
{
    int num_of_elements = input_list.Count;
} 
```

...都给我：

> 错误 C2662：“System::Collections::Generic::List::Count::get”：无法将“this”指针从“const System::Collections::Generic::List”转换为“System::Collections::通用::列表 %'

...那么您如何访问引用/指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T16:09:38.983

根据[Herb Sutter](http://blogs.msdn.com/hsutter/archive/2004/07/31/203131.aspx)的说法，`%`是通过引用字符传递的托管对象。将代码转换为以下内容，它应该可以工作：

```
void ListToStdVec( const List<double>% input_list, std::vector<double>& output_vector
{
    // Copy the contents of the input list into the vector
    // ...
} 
```

**编辑**：我认为`const`是导致问题的原因，尽管我不确定为什么。如果您将`List`参数更改为 not `const`，那么如果您使用运算符，则第一个函数将编译，而如果您使用`->`运算符，则第二个函数将编译`.`（我不确定为什么存在这种差异 - 这没有多大意义）。

也就是说，如果您只想将 中的元素复制`List`到 中`vector`，那么您真的想使用`^`. 将其视为对托管对象的引用。我认为`%`如果您想“通过引用”传递引用（即重新分配`input_list`给 内的其他内容`ListToStdVec()`，并让调用者看到该分配的结果，则可以使用它。但是，鉴于您在使用`.`时使用运算符来访问成员`%`，这告诉我，我可能根本不明白这样做的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T16:09:19.483

作为`List<T>`托管 .NET 类，它由 ^ 表示的托管 GC-Handle 传递，而不是由 C++ 引用传递。

前任：

```
void ListToVec(List<double>^ input_list, std::vector<double>& out) 
```

这里不需要额外`const`的。该符号`List<T>^%`创建一个跟踪引用（类似于 C++ 指针）而不是按引用调用。只需通过`list->...`和访问成员`list[...]`。

# oracle - 如何修复 oracle 表/索引行计数不匹配

> ID：883634
> 
> 赞同：1
> 
> 时间：2009-05-19T16:01:50.000
> 
> 标签：oracle

我刚刚遇到了 oracle9 数据库崩溃，它给我留下了几个 .trc 文件。他们中的一些人指定了不平衡的索引，我删除并读取了这些索引。

但是，当我运行时：

```
ANALYZE TABLE TABLESPACE.TABLE VALIDATE STRUCTURE CASCADE; 
```

我仍然收到错误：ora_00900，sqlstate：4200

这将创建一个 .trc 文件，其中包含：

```
Table/Index row count mismatch
table 1172 : index 1250, 0
Index root = tsn: 9 rdba: 0x0240390b 
```

我该如何处理这些信息？

我找到了这个链接，但是我不确定如何使用它： [http ://www.freelists.org/post/oracle-l/Table-index-mismatch-trace-file,1](http://www.freelists.org/post/oracle-l/Table-index-mismatch-trace-file,1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T19:08:55.510

The error says your indexes (perhaps not the ones you thought) are still bad.

From your link, if you run the query through SQL*PLUS it will ask for a rdba number. Enter the value from your error message '0x0240390b' (no quotes). This will return a file number and a block number.

```
SELECT dbms_utility.data_block_address_file(
         to_number(trim(leading '0' from
replace('&&rdba','0x','')),'XXXXXXXX')
       ) AS rfile#,
       dbms_utility.data_block_address_block(
         to_number(trim(leading '0' from
replace('&&rdba','0x','')),'XXXXXXXX')
       ) AS block#
FROM dual; 
```

Next run the following query:

```
select owner, segment_name, segment_type 
from  dba_segments 
where header_file = <rfile#>
  and header_block = <block#> 
```

This will give you the offending index to be dropped and recreated.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T16:45:58.703

老实说，如果出现这样的错误，我建议您使用 Oracle 打开 SR - 您要确保不会丢失数据！

# language-agnostic - substring() 应该如何工作？

> ID：883638
> 
> 赞同：7
> 
> 时间：2009-05-19T16:02:37.440
> 
> 标签：language-agnostic, language-design, substring, substr

我不明白为什么 Java 的 [String.substring() 方法]( [http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html#substring(int,%20int% 29)](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html#substring(int,%20int%29))以它的方式指定。我不能告诉它从编号位置开始并返回指定数量的字符；我必须自己计算结束位置。如果我指定结束位置超出字符串，而不是只为我返回字符串的其余部分，Java 抛出一个异常。

我习惯于 substring()（或 substr()）采用两个参数的语言：起始位置和长度。这在客观上是否比 Java 做的更好，如果是，你能证明吗？您所见过的 substring() 的最佳语言规范是什么？什么时候让一种语言以不同的方式做事是个好主意？Java 抛出的 IndexOutOfBoundsException 是不是一个好的设计理念？这一切都归结为个人喜好吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-19T16:15:19.010

有时第二个参数为长度更方便，有时第二个参数为“停止前的偏移量”更方便。同样，有时“如果我给你的东西太大，就到字符串的末尾”很方便，有时它表示一个错误，应该真的抛出一个异常。

如果您有固定长度的字段，则作为长度的第二个参数很有用。例如：

```
// C#
String guid = fullString.Substring(offset, 36); 
```

如果您要使用另一个分隔符，则作为偏移量的第二个参数很有用：

```
// Java
int nextColon = fullString.indexOf(':', start);
if (start == -1)
{
    // Handle error
}
else
{
    String value = fullString.substring(start, nextColon);
} 
```

通常，根据我的经验，您要使用的与您当前平台上提供的相反:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-19T16:13:53.207

> 我习惯于 substring()（或 substr()）采用两个参数的语言：起始位置和长度。这在客观上是否比 Java 做的更好，如果是，你能证明吗？

不，客观上并没有更好。这完全取决于您要使用它的上下文。如果你想提取一个特定长度的子字符串，那就不好了，但是如果你想提取一个以第一次出现“。”结尾的子字符串。在字符串中，这比您首先必须计算长度要好。问题是：哪个要求更常见？我会说后者。当然，最好的解决方案是在 API 中同时拥有这两个版本，但是如果您一直需要基于长度的版本，那么使用静态实用程序方法并不是那么可怕。

至于例外，是的，这绝对是好的设计。您要求特定的东西，而当您无法获得特定的东西时，API 不应该尝试猜测您可能想要的东西 - 这样，错误会更快地显现出来。

此外，Java 确实有一个[替代的 substring()](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html#substring(int))方法，它返回从开始索引到字符串结尾的子字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-19T16:08:15.367

第二个参数应该是可选的，第一个参数应该接受负值..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T16:06:27.083

如果您[省略第二个参数](http://tinyurl.com/qdxqqd)，它将为您转到字符串的末尾，而无需您计算它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T16:45:08.780

得到一些反馈后，我看到第二个参数作为索引方案何时有用，但到目前为止，所有这些方案似乎都在解决其他语言/API 限制。例如，API 没有提供方便的例程来给我输入字符串中第一个冒号前后的字符串，因此我获取该字符串的索引并调用 substring()。（这解释了为什么 substr() 中的第二个位置参数超过了所需的索引 1，IMO。）

在我看来，通过语言工具包中更全面的字符串处理功能，第二个参数作为索引的场景输给了第二个参数作为长度。但是有人请给我一个反例。:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T16:51:39.367

如果你把它藏起来，这个问题应该不再困扰你的梦想，你最终会睡个好觉：

```
public String skipsSubstring(String s, int index, int length) {
    return s.subString(index, index+length);
} 
```

# c# - 为什么我会看到使用本机代码的速度提高了约 20%？

> ID：883642
> 
> 赞同：24
> 
> 时间：2009-05-19T16:04:03.073
> 
> 标签：c#, winforms

知道为什么这个代码：

```
extern "C" __declspec(dllexport) void Transform(double x[], double y[], int iterations, bool forward)
{
    long n, i, i1, j, k, i2, l, l1, l2;
    double c1, c2, tx, ty, t1, t2, u1, u2, z;

    /* Calculate the number of points */
    n = (long)pow((double)2, (double)iterations);

    /* Do the bit reversal */
    i2 = n >> 1;
    j = 0;
    for (i = 0; i < n - 1; ++i)
    {
        if (i < j)
        {
            tx = x[i];
            ty = y[i];
            x[i] = x[j];
            y[i] = y[j];
            x[j] = tx;
            y[j] = ty;
        }
        k = i2;
        while (k <= j)
        {
            j -= k;
            k >>= 1;
        }
        j += k;
    }

    /* Compute the FFT */
    c1 = -1.0; 
    c2 = 0.0;
    l2 = 1;
    for (l = 0; l < iterations; ++l)
    {
        l1 = l2;
        l2 <<= 1;
        u1 = 1; 
        u2 = 0;
        for (j = 0; j < l1; j++) 
        {
            for (i = j; i < n; i += l2) 
            {
                i1 = i + l1;
                t1 = u1 * x[i1] - u2 * y[i1];
                t2 = u1 * y[i1] + u2 * x[i1];
                x[i1] = x[i] - t1; 
                y[i1] = y[i] - t2;
                x[i] += t1;
                y[i] += t2;
            }
            z = u1 * c1 - u2 * c2;
            u2 = u1 * c2 + u2 * c1;
            u1 = z;
        }
        c2 = sqrt((1.0 - c1) / 2.0);
        if (forward) 
            c2 = -c2;
        c1 = sqrt((1.0 + c1) / 2.0);
    }

    /* Scaling for forward transform */
    if (forward)
    {
        for (i = 0; i < n; ++i)
        {
            x[i] /= n;
            y[i] /= n;
        }
    }
} 
```

运行速度比这段代码快 20%？

```
public static void Transform(DataSet data, Direction direction)
{
    double[] x = data.Real;
    double[] y = data.Imag;
    data.Direction = direction;
    data.ExtremeImag = 0.0;
    data.ExtremeReal = 0.0;
    data.IndexExtremeImag = 0;
    data.IndexExtremeReal = 0;

    long n, i, i1, j, k, i2, l, l1, l2;
    double c1, c2, tx, ty, t1, t2, u1, u2, z;

    /* Calculate the number of points */
    n = (long)Math.Pow(2, data.Iterations);

    /* Do the bit reversal */
    i2 = n >> 1;
    j = 0;
    for (i = 0; i < n - 1; ++i)
    {
        if (i < j)
        {
            tx = x[i];
            ty = y[i];
            x[i] = x[j];
            y[i] = y[j];
            x[j] = tx;
            y[j] = ty;
        }
        k = i2;
        while (k <= j)
        {
            j -= k;
            k >>= 1;
        }
        j += k;
    }

    /* Compute the FFT */
    c1 = -1.0; 
    c2 = 0.0;
    l2 = 1;
    for (l = 0; l < data.Iterations; ++l)
    {
        l1 = l2;
        l2 <<= 1;
        u1 = 1; 
        u2 = 0;
        for (j = 0; j < l1; j++) 
        {
            for (i = j; i < n; i += l2) 
            {
                i1 = i + l1;
                t1 = u1 * x[i1] - u2 * y[i1];
                t2 = u1 * y[i1] + u2 * x[i1];
                x[i1] = x[i] - t1; 
                y[i1] = y[i] - t2;
                x[i] += t1;
                y[i] += t2;
            }
            z = u1 * c1 - u2 * c2;
            u2 = u1 * c2 + u2 * c1;
            u1 = z;
        }
        c2 = Math.Sqrt((1.0 - c1) / 2.0);
        if (direction == Direction.Forward) 
            c2 = -c2;
        c1 = Math.Sqrt((1.0 + c1) / 2.0);
    }

    /* Scaling for forward transform */
    if (direction == Direction.Forward)
    {
        for (i = 0; i < n; ++i)
        {
            x[i] /= n;
            y[i] /= n;
            if (Math.Abs(x[i]) > data.ExtremeReal)
            {
                data.ExtremeReal = x[i];
                data.IndexExtremeReal = (int)i;
            }
            if (Math.Abs(y[i]) > data.ExtremeImag)
            {
                data.ExtremeImag = y[i];
                data.IndexExtremeImag = (int)i;
            }
        }
    }
} 
```

[FFT http://www.rghware.com/fft.png](http://www.rghware.com/fft.png)

通过在我的应用程序中选择“Native DLL FFT”，我创建了在图表中间看到的 CPU 下降：

[http://www.rghware.com/InstrumentTuner.zip](http://www.rghware.com/InstrumentTuner.zip)（源代码）

我认为这将在大多数 PC 上运行。您需要安装 DirectX。我在使用某些硬件的捕获设置时遇到了一些问题。捕获设置应该是可配置的，但这个有趣的发现使应用程序的开发偏离了方向。

无论如何，为什么我看到使用本机代码的速度提高了 20%？这似乎与我之前的一些假设背道而驰。

**更新**

在将函数转换为不安全的方法并修复 long/int 问题后。新的 unsafe 方法实际上比原生方法运行得更快（很酷）。

[简介 http://www.rghware.com/profile.png](http://www.rghware.com/profile.png)

很明显，数组边界检查是这种 FFT 方法速度降低 20% 的原因。由于其性质，无法优化此方法中的 for 循环。

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-05-19T16:17:22.550

只看这段代码，根据我的经验，我怀疑从 C++ -> C# 会出现相当大的减速。

在将此类例程幼稚地移植到 C# 中时，您将面临的一个主要问题是 C# 将在此处对每个数组检查添加边界检查。由于您永远不会以优化的方式遍历数组（[有关详细信息，请参阅此问题](https://stackoverflow.com/questions/631123/what-is-the-special-case-with-the-foreach-loop-that-eliminates-bounds-checking)），因此几乎每个数组访问都会接受边界检查。

此外，这个端口非常接近 C 的 1->1 映射。如果您通过一个好的 .NET 分析器运行它，您可能会发现一些可以优化的好点，以使其恢复到接近 C++ 的速度一两个调整（这几乎一直是我移植此类例程的经验）。

但是，如果您想让它以几乎相同的速度运行，您可能需要将其转换为不安全的代码并使用指针操作而不是直接设置数组。这将消除所有边界检查问题，并恢复您的速度。

* * *

编辑：我看到另一个巨大的差异，这可能是您的 C# 不安全代码运行速度较慢的原因。

查看[有关 C# 与 C++ 比较的此页面](http://msdn.microsoft.com/en-us/library/yyaad03b.aspx)，特别是：

“long 类型：在 C# 中，long 类型是 64 位，而在 C++ 中，它是 32 位。”

您应该将 C# 版本转换为使用 int，而不是 long。在 C# 中，long 是 64 位类型。这实际上可能对您的指针操作产生深远的影响，因为我相信您无意中在每个指针调用上添加了 long->int 转换（带有溢出检查）。

此外，当您使用它时，您可能想尝试将整个函数包装在[unchecked block](http://msdn.microsoft.com/en-us/library/a569z7k8.aspx)中。C++ 没有做你在 C# 中得到的溢出检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T17:27:50.833

与 JIT 编译器相比，本机编译器可以进行更深入、更重的优化，例如矢量化、过程间分析等。FFT 可以通过矢量化获得极大的加速。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-19T16:16:59.227

这很可能是由于 JIT 编译器生成的代码不如本机编译器生成的代码高效。

如果您关心性能下降 20%，或者您可能考虑使用现成的优化库，那么分析代码可能应该是您的下一步。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T05:34:19.533

我只是用 int 而不是 long 运行了他发布的代码，但这并没有真正的改变。我知道其他人[在 .NET 中使用 FFT 的](http://www.grimes.demon.co.uk/dotnet/man_unman.htm)运气更好，这表明即使使用 FFT 数学，.NET 也可以达到或超过 C++ 的性能。

所以我的回答是，要么海报的代码比链接中的代码更优化（针对 C），要么比我链接的文章中的代码针对 C# 的优化更少。

> 我在两台使用 .NET 2.0 的机器上执行了两组测试。一台机器有 XPSP2，有一个处理器，850MHz Pentium III，有 512Mb 的 RAM。另一台机器构建了 5321 的 Vista 并具有单个处理器，2 GHz Mobile Pentium 4，具有 1Gb 的 RAM。在每种情况下，我计算了 217 (131072) 个数据值的 100 次单独 FFT 计算的平均值。根据这些值，我根据标准偏差计算了标准误差。
> 
> 结果以毫秒显示。Pentium III 机器的结果是：
> 
> ```
>  Not Optimized   Optimized For Space Optimized For Speed
> Unmanaged   92.88 ± 0.09    88.23 ± 0.09    68.48 ± 0.03
> Managed C++ 72.89 ± 0.03    72.26 ± 0.04    71.35 ± 0.06
> C++/CLI 73.00 ± 0.05    72.32 ± 0.03    71.44 ± 0.04
> C# Managed  72.21 ± 0.04    69.97 ± 0.08 
> ```
> 
> Mobile Pentium 4 的结果是：
> 
> ```
>  Not Optimized   Optimized For Space Optimized For Speed
> Unmanaged   45.2 ± 0.1  30.04 ± 0.04    23.06 ± 0.04
> Managed C++ 23.5 ± 0.1  23.17 ± 0.08    23.36 ± 0.07
> C++/CLI 23.5 ± 0.1  23.11 ± 0.07    23.80 ± 0.05
> C# Managed  23.7 ± 0.1  22.78 ± 0.03 
> ```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T16:19:06.697

考虑到托管代码会对每个数组访问的索引进行边界检查，而非托管代码不会这样做，我会说差异比我预期的要小。

如果您也将数组更改为托管代码中的指针（因为那是它们在非托管代码中的真正含义），我希望它们的性能大致相同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-13T11:39:27.643

Because C# .NET compiler is not the best in producing efficient code. And the entire logic of the language prevents from that. BTW, [F# has much better performance than C# in Math](http://abdullin.com/journal/2009/1/6/f-has-better-performance-than-c-in-math.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T16:08:44.210

您是否使用像[AQTime](http://www.automatedqa.net)这样的分析器来查看瓶颈在哪里？有时将本机代码转换为托管代码是一件微不足道的事情。另一方面，由于在某些情况下托管代码比本机代码慢，您可能希望尝试使用不安全代码。

# c++ - 用 C++ 开始编程的教育 IDE？

> ID：883644
> 
> 赞同：4
> 
> 时间：2009-05-19T16:04:56.160
> 
> 标签：c++, ide

我知道有一个关于“C++ 中最好的 IDE”的一般性问题，但我想强调一下，我是C++ 和一般编程的**新手。**这意味着我有一个学生的需求：

*   相对轻松和不臃肿的工作环境
*   一切正常，专注于代码
*   颜色编码以显示不同的语言特征（评论等）
*   不太不友好（*不是*一个简单的编辑器，从头到尾处理项目的东西）
*   跨平台，因此不受特定系统实践的约束

**我认为以上是对教育IDE**的相对合理的要求，也许不包括最后一个，因为这样的通用工具可能不存在。有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-19T16:14:56.997

这取决于您来自哪个世界来学习 C++。

*   你以前有 Java 经验吗？- 使用 Eclipse CDT。
*   以前使用过 .NET？*- 使用 Visual Studio C++ Express Edition（如果您真的需要多平台IDE*，而不仅仅是代码，则将其丢弃）。
*   你是 Unix 人吗？仅使用语法高亮编辑器 + Makefile。当你想学习 C++ 的基础知识时，项目不应该很复杂，并且花时间学习如何使用预处理器选项调用 C++ 编译器等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T16:09:57.737

我会推荐[Komodo Edit](http://www.activestate.com/komodo_edit/)。

它是一个很棒的文本编辑器，我在 Ubuntu、Windows(XP/7) 和 OSX 上使用过。它的老大哥是一个成熟的 IDE，但 KE 仍然允许项目和一些很棒的扩展。它也是免费和开源的。我发现它很容易快速入门，并且随着您的技能的增长，它有能力跟上。

编辑以添加到 ActiveState 的[Komodo Extensions](http://community.activestate.com/addons)社区站点的链接。如果您决定尝试 KE，我建议您从 RemoteDrive Tree（ssh、ftp、scp 远程编辑）和 Source Tree 开始。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-19T16:19:54.780

[Code::Blocks](http://www.codeblocks.org/)是免费的，而且非常易于安装和使用。我总是把它推荐给我的学生。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-19T16:20:28.537

我听说过有关[Code::Blocks](http://www.codeblocks.org/)的好消息。可能有点复杂，但您可以关闭任何不需要的窗格，而且它是跨平台的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-19T16:11:15.957

直到最后一点，我会说 Microsoft Visual C++ Express Edition，它是免费的并且符合您的前 4 个标准。跨平台您会看到诸如 emacs 或 vim 之类的东西，它们都不是特别友好。在 Windows 上，我实际上将 Notepad++ 用于小型 C++ 程序，因为它具有良好的语法突出显示和（有限的）智能感知。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-19T16:13:20.480

我推荐[Eclipse CDT](http://www.eclipse.org/cdt/)，因为它可以很好地完成代码，并且可以即时构建代码，因此您可以立即看到错误，这对于语言学习非常有用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-19T16:16:52.143

假设类似 Linux/Unix 的系统...

我发现反其道而行之更容易也更有益。尝试使用像 vim 这样的“简单”编辑器，对于 C++，只使用 Makefiles 来使用 gcc 和链接器进行编译。

我在 uni 和 5> 年开始使用它，后来有几家公司，它仍然是最简单和最灵活的选择，因为您可以快速访问一个简单文件中的所有设置。

即使您稍后切换到 IDE，您也会知道如果事情不工作要寻找什么，因为您将了解基础知识，例如从源文件到目标文件以及链接到二进制可执行文件的步骤是什么，如何处理图书馆等等。这些东西在 IDE 之间会发生变化，并且通常很难跟踪和修改。

您可以从简单的 makefile 开始，并在几年内不断改进它。将它复制到您的项目目录并更新文件名很容易 - 对于 C++，项目之间的编译过程将是相当标准的。

我强烈建议您考虑这个选项。这样做我学到了很多，当你的 IDE 无法工作时，你有一个备份计划。

我保留了一个通用的 Makefile，它将 main.cpp 编译为可执行文件。为了快速编译一些东西，我只需将它复制到目录和`make`.

我目前的工作流程是用vim（`vim *.cpp *.hpp`）打开项目目录（平面文件系统）中的所有文件，编辑，用`:mak`（或`:mak -C .. debug`）从vim中编译以调用存储在相关目录中的Makefile，编译后它会跳转到第一个警告/错误，用于`:cn`检查错误，修复所需内容，在单独的窗口中打开错误`:cope`（使用关闭`:clo`或卸载文件，使用或`:bd`在拆分窗口之间跳转- 按住并按两次）...`ctrl-w ctrl-w``ctrl-ww``ctrl``w`

Vim 具有突出显示数百万其他功能的语法，我使用标签（或 ctags）在 vim 中导航代码等等。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-19T16:22:53.450

如果您同时使用 windows 和 linux（如您的评论所示），我建议您使用[Qt Creator](http://www.qtsoftware.com/products/developer-tools)。Qt 是跨平台的，因此您的应用程序可以在 linux、windows 和 mac 上运行。Qt 也有优秀的文档，所以它对新手非常友好。Signals and Slots 需要一些时间来适应，但 IMO 值得。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-19T16:13:52.570

就个人而言，我认为所有 C++ IDE 都很糟糕。当我编写 C 或 C++ 时，我倾向于使用某种功能强大的程序员文本编辑器以及命令行编译。如果我只是在搞乱并且有几个源文件，我将`gcc -g -o myprog *.c`自己在命令行上调用。如果我有一个更复杂的项目，我将只编写一个简单的 makefile。`gmakemake`如果您不想为了编译程序而费心学习 makefile 语法，也可以考虑一下。

在 Mac 方面，我一直是[BBEdit](http://www.barebones.com/)和[TextMate](http://macromates.com/)的粉丝，但更喜欢后者，尤其是考虑到它的价格更低和更现代的感觉。两者都具有项目组织功能。

在 Windows 上，我会坚持使用[e](http://www.e-texteditor.com/)（基本上是 TextMate 到 Windows 的一个端口）或[Notepad++](http://notepad-plus.sourceforge.net/uk/site.htm)。Notepad++ 的缺点是它没有任何项目组织功能，而 e 有。您也可以查看[SciTE](http://www.scintilla.org/SciTE.html)，但与 Notepad++ 一样，它没有项目组织功能。

至于Linux，我个人不确定。我会坚持使用其他人的答案，涵盖该平台的建议。

# css - 列表和弹出菜单中的 css 颜色效果

> ID：883646
> 
> 赞同：0
> 
> 时间：2009-05-19T16:05:09.937
> 
> 标签：css

在 Firefox 中（这在 IE6 中根本不起作用）我有这个代码

```
<div class="menu">
    <ul class="nav">
    <li><a href="index.html">Home</a></li>
    <li><a href="software.html">Software</a>
        <ul>
        <li>Blah</li>
        <li>Blah3</li>
        <li>Blah</li>
        </ul>
    </li>
    <li><a href="samples.html">Code Samples</a></li>
    <li><a href="resume.html">Resume</a></li>
    </ul>
    </div> 
```

使用这个 CSS

```
ul.nav li:hover,
.nav   a:hover
{
    background-color:#606060;
    color: white;
} 
```

我让菜单文本（“软件”）变为白色，而背景变为灰色。但是，当我将鼠标向下移动到菜单项时，背景仍然是灰色的，但下一个不再是白色！为什么？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T16:08:32.527

这应该有效：

```
ul.nav li:hover,
ul.nav li:hover a,
{
    background-color:#606060;
    color: white;
} 
```

我不知道为什么，但显然你必须直接选择*a*元素来改变它的颜色，否则它将被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T16:09:26.643

可能是其他规则干扰您的 CSS，不能说没有看到所有内容。我建议使用 Firebug 查看计算出的 CSS 和 CSS 规则，看看它是否符合您的预期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T16:21:11.737

你必须重新设计你的css，但如果你正在做一个基本的菜单子菜单，你可以通过将子菜单包装在你的'a'标签中来让它在IE和FF中工作。

```
<div class="menu">
    <ul class="nav">
    <li><a href="index.html">Home</a></li>
    <li><a href="software.html">Software
       <ul>
            <li>Blah</li>
            <li>Blah3</li>
            <li>Blah</li>

       </ul>
      </a>
    </li>
    <li><a href="samples.html">Code Samples</a></li>
    <li><a href="resume.html">Resume</a></li>
    </ul>
</div> 
```

一些不需要 JS 才能在 IE6 中工作的 CSS。未经测试，但应该可以工作。请注意，您还需要为子导航添加样式和定位，但这仍然显示了基础知识。

```
.menu ul li a {
  color: blue;
}
.menu ul li a ul {
  display: none;
}
.menu ul li a:hover {
  color: white;
}
.menu ul li a:hover ul {
  display: block;
}
.menu ul li a:hover ul li {

}
.menu ul li a:hover ul li a {
  color: black;
}
.menu ul li a:hover ul li a:hover {
  color: red;
} 
```

然后对于第一个菜单之后您想要的每个子菜单，只需添加

```
.menu ul li a:hover ul li a ul {
  display: none;
}
.menu ul li a:hover ul li a:hover ul {
  display: block;
} 
```

# .net - COM 互操作中的 .NET 属性？

> ID：883649
> 
> 赞同：6
> 
> 时间：2009-05-19T16:06:22.557
> 
> 标签：.net, com, interop

您不能使用 COM 互操作来公开 COM 属性是真的吗？一切都必须是一种方法？

如果这不是真的，你怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-19T17:20:48.517

不对。

我理解您的问题是询问[COM 调用或使用 .NET 类](http://msdn.microsoft.com/en-us/library/f07c8z1c.aspx)。

根据[此页面](http://msdn.microsoft.com/en-us/library/zsfww439.aspx)，您可以将托管类的方法、属性和字段公开给 COM 消费者。

> 您要向 COM 公开的所有托管类型、方法、属性、字段和事件都必须是公共的。类型必须有一个公共的默认构造函数，这是唯一可以通过 COM 调用的构造函数。

这对你有用吗？：

```
[InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
[Guid("A1209192-723B-4325-8599-FB39D9F202D9")]
public interface ITicklee
{
    [DispId(1)]
    void TickleMe();

    [DispId(2)]
    int Count{get;}
}

[Guid("45715A3B-CA95-49f7-9889-A0022B31EF8A")]
public class Elmo : ITicklee
{
    // default ctor
    public Elmo () {}

    private int _tickleCount;

    public int Count
    {
        get
        {
            return _tickleCount;
        }
    }

    public void TickleMe()
    {
        _tickleCount++;
    }
} 
```

VBScript 测试客户端可能如下所示：

```
Sub TestTickle()  

    WScript.echo("")

    WScript.echo("Instantiating an Elmo ...")
    dim elmo
    set elmo = WScript.CreateObject("Ionic.Tests.Com.Elmo")

    WScript.echo("Tickling...")

    For i = 1 to 5
      elmo.TickleMe()
    Next  

    WScript.echo("")
    c = elmo.Count

    WScript.echo("Tickle Count = " & c)

    ' one for the road'
    elmo.TickleMe()

End Sub

call TestTickle()     ' ahem ' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-22T19:18:06.243

如果您的意思是您不能使用互操作将 com 对象属性公开给 .NET 应用程序，并且 COM 对象是在 VB 中创建的，那么您是对的。VB 对本地类型使用属性 LET，对对象类型使用属性 SET。如果您尝试从 .NET 应用程序设置 COM 对象的属性，它会尝试使用 SET。如果基础属性是本机 VB 类型，则会失败。

据我所知，除了使用方法而不是属性之外，唯一的解决方案是手动操作 IDL。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-09-27T15:21:03.450

评论：afaik 你可以只使用只读属性吗

# asp.net - Telerik FileExplorer 示例

> ID：883651
> 
> 赞同：0
> 
> 时间：2009-05-19T16:06:37.223
> 
> 标签：asp.net, ajax, telerik

我一直在为 Telerik 的 FileExplorer 控件创建自己的文件浏览器内容提供程序而争论不休。他们的网站上有一个示例，但它并没有帮助我解决我一直遇到的一些 ASP.NET Page 和 UserControl 生命周期问题。

有没有更好的例子将 FileExplorer 控件与自定义内容提供程序一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T16:41:26.710

看到这个链接：

[http://demos.telerik.com/aspnet-ajax/fileexplorer/examples/dbfilebrowsercontentprovider/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/fileexplorer/examples/dbfilebrowsercontentprovider/defaultcs.aspx)

如果您遇到来自 Telerik 论坛的任何问题，您可以搜索论坛。

就像下面的链接

[http://www.telerik.com/community/forums/search.aspx?rtf=Forum&start=0&q=%2bFile%2bBrowser%2bContent%2bProvider%2b](http://www.telerik.com/community/forums/search.aspx?rtf=Forum&start=0&q=%2bFile%2bBrowser%2bContent%2bProvider%2b)

这是 Telerik 论坛： [http](http://www.telerik.com/community/forums.aspx) ://www.telerik.com/community/forums.aspx 。您可以选择您拥有的产品并搜索您面临的问题。如果您通过票证要求，他们还将提供其他示例。

# .net - {“试图读取或写入受保护的内存。这通常表明其他内存已损坏。”}

> ID：883652
> 
> 赞同：0
> 
> 时间：2009-05-19T16:06:45.427
> 
> 标签：.net, winforms, unity-container

我围绕 Unity 构建了一个简单的应用程序框架。即表单和用户控件被描述为 xml 并动态构建。我有一个包含 ComboBox 的表单，当它关闭时会导致下面详述的错误。如果 ComboBox 替换为 ListBox 控件，则不会发生此问题。

一些谷歌搜索引发了一些关于我无法安装的补丁的报告.. [KB923028](http://support.microsoft.com/kb/923028)

> {“试图读取或写入受保护的内存。这通常表明其他内存已损坏。”}

堆栈跟踪：

```
 at System.Windows.Forms.UnsafeNativeMethods.CallWindowProc(IntPtr wndProc, IntPtr hWnd, Int32 msg, IntPtr wParam, IntPtr lParam)
   at System.Windows.Forms.NativeWindow.DefWndProc(Message& m)
   at System.Windows.Forms.Control.DefWndProc(Message& m)
   at System.Windows.Forms.Control.WmCommand(Message& m)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ComboBox.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
   at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
   at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(Int32 dwComponentID, Int32 reason, Int32 pvLoopData)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
   at System.Windows.Forms.Application.Run(Form mainForm)
   at DPOSSQL.Program.Main() in C:\VSSData\DPOS SQL\DPOS SQL\Program.cs:line 46
   at System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-01-20T02:25:03.663

当我的 .NET 应用程序正在运行时，尝试将系统显示切换到“超大字体”时，只需在 Windows XP 上点击它即可。

似乎这与格式错误的字体或类似字体有关。

```
Attempted to read or write protected memory. This is often an indication that other memory is corrupt.
Source: System.Windows.Forms
   at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
   at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(Int32 dwComponentID, Int32 reason, Int32 pvLoopData)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T19:14:24.017

当控件使用 XP/Vista 样式然后在旧版本的 Windows 上运行时，我已经看到了这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T19:32:35.527

我在系统上安装新字体时看到了这个错误。您是否安装了新字体，或者最近安装了新字体的程序？

其他 .net 程序是否正常运行？如果没有，最好的办法可能是重新安装 .NET 框架。

# mysql - 我可以为 MySQL、windows 或 Unix/Linux/Ubuntu/Debian 选择哪个服务器？

> ID：883657
> 
> 赞同：0
> 
> 时间：2009-05-19T16:07:29.157
> 
> 标签：mysql, architecture, resources, hosting, shared-hosting

我正在做一个 SaaS 项目，mysql 是我们的主要数据库。我们的应用程序是在 c# .net 上编写的，并在 windows 2003 服务器下运行。

考虑到维护、成本、选项和性能，我可以为 MySQL 托管、windows 还是 Unix/Linux/Ubuntu/Debian 选择哪个服务器平台？

场景如下：

我今天运行的服务器的交易量适中。数据库每天增加 5MB，我们预计在几个月内增加 50MB，这是关键任务。

我不知道数据库会有多大。我们租用 VPS 来托管应用程序和数据库服务器。

我们的大多数查询都很简单，但我们的 ORM 工具不断使用子查询。我们还运行简单和繁重的报告。其中一些在用户单击后运行，但大多数运行在队列中。

随着我们有更多的客户，购买一个额外的 co-lo 空间会很好。毕竟那是SaaS项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T16:15:13.847

开发时，您可以使用 Windows 机器来运行 MySQL 服务器。如果您希望将 DBMS 放在单独的服务器中，它可以位于 Windows 或 Linux 服务器中。

MySql 和备份等支持工具在 Linux 中可能有更多选择。

还有第三方供应商将在他们的服务器上托管您的 MySQL 数据库。好处是他们将处理备份、维护等。

另外：查看 phpMyAdmin 以用作出色的管理工具。

拉里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T16:09:10.560

我认为您需要更多信息才能做出明智的决定。在没有具体信息的情况下很难得出“最佳”答案。

*   您预期的交易量是多少？
*   数据库将有多大？
*   您的查询有多复杂，即它们运行时间长还是相对较快？
*   您是否将应用程序托管在您自己位置的您自己的服务器上？如果您必须购买额外的 co-lo 空间，那么额外的服务器可能不是最佳选择。
*   这个数据库有多“关键任务”？即，也许您需要复制服务器以确保稳定性。

[http://www.sizinglounge.com/](http://www.sizinglounge.com/)上有一个在线服务器大小调整工具，因此您应该检查一下。听起来您的服务器可能比它们的最小层小，但它应该是一个很好的起点。

如果这是一个任务关键型应用程序，您需要对额外的服务器进行某种复制，以防主服务器出现故障，因此您肯定会看到两个系统。这必须是一个好的备份计划的补充。

鉴于您不确定它会变得多大，您可能会继续租用服务器。对于您的备份，一个想法是查看在 Amazon EC2 实例上运行 MySQL。顺便说一句，拥有远程复制服务器很重要。如果您有两个相邻的系统并且出现环境问题，则它们可能同时无法使用。但是对于远程副本，您的选择是开放的，可能会解决它。

如果您在本地运行大量只读查询并将您的站点托管在某个地方，那么设置一个本地复制的数据库副本以进行查询可能是有意义的。这可能会大大改善您的网站和本地性能。另外，它会让您在控制下拥有一个本地副本。

HTH，布兰登

# c - C中的硬编码字节数组

> ID：883659
> 
> 赞同：27
> 
> 时间：2009-05-19T16:08:14.460
> 
> 标签：c, arrays, syntax

我正在调试网络应用程序。

我必须模拟一些交换的数据才能使应用程序正常工作。在 C++ 中，您可以执行类似的操作

```
char* myArray = { 0x00, 0x11, 0x22 }; 
```

但是，我似乎找不到这种语法的 C 等效项。

基本上我只想用硬编码值填充一个数组。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2009-05-19T16:10:38.173

您可以在 C 中做同样的事情，但您应该将其声明为 类型`char[]`，而不是`char*`，以便您可以使用`sizeof`运算符获取其大小：

```
char myArray[] = { 0x00, 0x11, 0x22 };
size_t myArraySize = sizeof(myArray);  // myArraySize = 3 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-19T21:36:31.500

只是为了完整起见，使用 C99，您还可以使用复合文字：

```
 char *myArray = (char []) {0x00, 0x11, 0x22 }; 
```

如果需要与 C++ 的源代码兼容性，则最好不要使用此构造，因为它 - afaik - 不是 C++ 标准的一部分。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-19T16:11:58.390

尝试：

```
char myArray[] = { 0x00, 0x11, 0x22 }; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T16:11:10.683

不

```
char myArray[] = {0x00, 0x01,0x02}; 
```

工作？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-19T16:12:13.397

*   [数组初始化](http://publications.gbdirect.co.uk/c_book/chapter6/initialization.html)

*   [数组初始化](http://c-faq.com/%7Escs/cclass/notes/sx4aa.html)

    字符 myArray[] = {0x00, 0x11, 0x22};

# iis - 经典 ASP - 请求对象为空

> ID：883672
> 
> 赞同：6
> 
> 时间：2009-05-19T16:09:24.880
> 
> 标签：iis, asp-classic, vbscript

我正在向一个旧的经典 asp 站点添加一个功能，并遇到了一个有趣的问题。页面上的以下行导致有用的错误“需要对象：”

```
strServerName = Request.ServerVariables("server_name") 
```

当我附加一个调试器来查看它时，请求实际上是空的，我不明白这是怎么发生的？这一行存在于几页上，除了这一行之外，执行时没有任何问题。在这种情况下，该页面由来自另一个页面的重定向执行。

我一直在寻找一天左右的解决方案，但找不到任何有用的东西。我很绝望，任何想法将不胜感激。

哦，如果需要更多信息，请随时给我打电话。

谢谢！

**更新 1**
根据要求，以下是包装在 <% %> 标记中的整个代码片段。此块作为文件中的第一个代码存在（名为“order-results-instant.asp”）：

```
<%
strServerName = Request.ServerVariables("server_name")
strServerName = UCase(strServerName)

strServerURL = "http://localhost/cbr"
strServerURLhttps = "https://localhost/cbr"
strConnect = "Provider=SQLOLEDB;Data Source=localhost;Initial Catalog=CBR; Integrated Security=SSPI"

Dim objConn
Dim sql_stmt
Dim rs  
%> 
```

**更新 2**
我使用以下 2 种方法将执行重定向到此页面 - 也许这会导致请求丢失？

```
 'Response.Redirect strServerURL & "/order-results-instant.asp?gwstep=1"
 Response.Write "<META HTTP-EQUIV=""refresh"" content=""5;URL=" & strServerURL & "/order-results-instant.asp?gwstep=1"">" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T19:49:20.967

扫描其余代码。在全球层面，您会发现：-

```
Dim Request 
```

Rename this variable and its current usage and the Request object attached to the script context will become visible.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T16:57:51.183

在您的服务器上是否允许（打开）Active Server Pages Web 服务扩展？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T17:05:11.033

我使用以下代码将您的代码复制到我的测试 asp 文件中，并且它重定向得很好。

```
<%
strServerName = Request.ServerVariables("server_name")
strServerName = UCase(strServerName)
strServerURL = "http://localhost/"
strServerURLhttps = "https://localhost/"
strConnect = "Provider=SQLOLEDB;Data Source=localhost;Initial Catalog=CBR; Integrated Security=SSPI"
Dim objConn
Dim sql_stmt
Dim rs  

Response.Write(strServerName)

if Request.Querystring("test") <> "1" then
    Response.Redirect("http://" + strServerName + "/asptest.asp?test=1")
 end if
%> 
```

唯一真正的区别是我在重定向中添加了“http://”。也许我所做的一些事情会帮助您解决问题。

谢谢

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T19:09:36.397

如果您尝试在页面的较早位置访问它，它是否有效？

# sql - 如何将数据库备份到 .bak 文件？

> ID：883675
> 
> 赞同：21
> 
> 时间：2009-05-19T16:09:42.197
> 
> 标签：sql, database, visual-studio, backup

我有一个在 Visual Studio 2008 中创建的网站，我需要将其上线。如何将数据库文件备份到 .bak，以便将其交给托管公司以放置在服务器上？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-05-19T16:15:40.023

从 SQL 提示符：

```
BACKUP DATABASE MyDatabase TO DISK='E:\MyDatabase.bak' 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-19T16:14:28.403

转到 Microsoft Server Management Studio 并右键单击您的数据库名称。转到“任务”->“备份...”

然后分配您的属性，确保“备份类型”已满。

然后在右侧有一个“添加”按钮，按下该按钮并设置您的文件名，确保将扩展名 .bak 放在文件名的末尾。

最后点击确定并等待备份完成。

MSDN 也有一篇文章解释了这个[http://msdn.microsoft.com/en-us/library/ms187510.aspx](http://msdn.microsoft.com/en-us/library/ms187510.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-19T16:12:42.757

在ssms中右键点击数据库，进入任务，点击备份。从那里应该是不言自明的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T16:12:35.567

这样做不需要备份（我假设您使用的`AttachDbFilename`是 Visual Studio 默认使用的模型）。只需向他们发送`mdf`并告诉他们将其附加到他们的 SQL 服务器实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T16:15:49.650

我假设您使用 SQL Server。此链接将指导您：

如何：备份数据库（SQL Server Management Studio）：

*   [SQL Server 2008](http://msdn.microsoft.com/en-us/library/ms187510.aspx)

*   [SQL 服务器 2005](http://msdn.microsoft.com/en-us/library/ms187510%28SQL.90%29.aspx)

# python - Optparse：变量 arg 回调操作的使用并不表示需要额外的参数

> ID：883679
> 
> 赞同：3
> 
> 时间：2009-05-19T16:10:00.480
> 
> 标签：python, callback, optparse

我在我的 python 代码中实现了一个回调变量参数，类似于在这里可以找到的：
[https ://docs.python.org/library/optparse.html#callback-example-6-variable-arguments](https://docs.python.org/library/optparse.html#callback-example-6-variable-arguments)

添加这样的选项：

```
parser.add_option("-c", "--callback", dest="vararg_attr", action="callback", callback=vararg_callback) 
```

问题是，没有提示用户该选项需要额外输入：

```
Options:  
    -h, --help      show this help message and exit  
    -c, --callback 
```

有没有办法改变 optparse 的用法，以便用法会打印出如下内容：

```
-c=LIST, --callback=LIST 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T19:30:51.817

这涉及猴子补丁，可能不是最好的解决方案。另一方面，它似乎有效。

```
from optparse import OptionParser, Option

# Complete hack.
Option.ALWAYS_TYPED_ACTIONS += ('callback',)

def dostuff(*a):
    pass

parser = OptionParser()
parser.add_option("-c",
                  "--callback",
                  dest="filename",
                  action="callback",
                  callback=dostuff,
                  metavar='LIST',
                  help='do stuff',
                  )

(options, args) = parser.parse_args() 
```

输出：

```
Usage: opt.py [options]

Options:
  -h, --help            show this help message and exit
  -c LIST, --callback=LIST
                        do stuff 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T16:17:24.000

使用`metavar`关键字参数：

```
parser.add_option("-c", "--callback", dest="vararg_attr", action="callback", callback=vararg_callback, metavar='LIST') 
```

参考：[http ://docs.python.org/library/optparse.html](http://docs.python.org/library/optparse.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-26T07:43:25.780

如果类型为无（默认），则 optparse 不显示附加参数的指示。如果您指定类型和元变量，它会显示在帮助中：

```
parser.add_option("-c", "--callback",
                  dest="vararg_attr",
                  type="string", 
                  metavar="LIST", 
                  action="callback", 
                  callback=vararg_callback,
                  help="do stuff") 
```

输出：

```
Options:  
  -h, --help            show this help message and exit
  -c LIST, --callback=LIST
                        do stuff 
```

# apache-flex - externalinterface - 从 SWF 调用 javascript

> ID：883680
> 
> 赞同：0
> 
> 时间：2009-05-19T16:10:28.797
> 
> 标签：apache-flex, externalinterface

你好，

我试图从我的动作脚本代码中调用一个 javascript 函数，但它不起作用；

as3：

```
if (ExternalInterface.available)
  {
  try
  {
    ExternalInterface.addCallback("changeDocumentTitle",null);
  } 
  catch(error:Error) 
```

js（使用 swfobject 的内部速度文件）

```
function changeDocumentTitle() 
    {
        alert('call from SWF');
    } 
```

有人知道会发生什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T19:52:50.227

如果您尝试从 Flex 应用程序中调用 JS 函数，您希望使用 ExternalInterface.call(...) 而不是 ExternalInterface.addCallback(...)。从文档：

> 公共静态函数调用（函数名：字符串，...参数）：*
> 
> 调用由 Flash Player 容器公开的函数，传递零个或多个参数。如果函数不可用，则调用返回 null；否则返回函数提供的值。Opera 或 Netscape 浏览器不允许递归；在这些浏览器上，递归调用会产生空响应。（Internet Explorer 和 Firefox 浏览器支持递归。）
> 
> 如果容器是 HTML 页面，则此方法调用脚本元素中的 JavaScript 函数。

[http://livedocs.adobe.com/flex/3/langref/flash/external/ExternalInterface.html](http://livedocs.adobe.com/flex/3/langref/flash/external/ExternalInterface.html)

如果您想将 Flash 应用程序中的 ActionScript 函数公开到 HTML 容器以便可以通过 JavaScript 调用，则使用 addCallback()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T17:36:24.740

在本地系统上，SWF 和 Javascript 之间的通信往往会受到安全问题的阻碍。您可以通过“设置管理器”重新配置您的闪存以允许其中一些通信。

在嵌入 Flash 对象的位置未设置“allowscriptacces”也可能是一个问题。

另一个问题可能是 flash 在加载 javascript 之前尝试调用 javascript。初始化顺序的事情可能很烦人。

# c++ - 为什么这个 C++ 类不等同于这个模板？

> ID：883682
> 
> 赞同：0
> 
> 时间：2009-05-19T16:10:30.247
> 
> 标签：c++, templates

有人可以向我解释为什么以下工作：

```
template<class T> class MyTemplateClass {
public:
    T * ptr;
};

int main(int argc, char** argv) {
    MyTemplateClass<double[5]> a;
    a.ptr = new double[10][5];
    a.ptr[2][3] = 7;
    printf("%g\n", a.ptr[2][3]);
    return 0;
} 
```

但这不会：

```
class MyClass {
public:
    double[5] * ptr;
    // double(*ptr)[5]; // This would work
};

int main(int argc, char** argv) {
    MyClass a;
    a.ptr = new double[10][5];
    a.ptr[2][3] = 7;
    printf("%g\n", a.ptr[2][3]);
    return 0;
} 
```

显然，模板实例化不仅仅是用模板的参数进行文本替换 - 有没有对这种魔法的简单解释？

对于后者，编译器（g++ 4.1.2）会吐出以下错误：

```
test.cxx:13: error: expected unqualified-id before '[' token 
```

其中第 13 行是该`double[5] * ptr;`行。

问题不是：

“为什么 MyClass 示例失败？-因为 C++ 不允许 Java 样式数组声明 ;-)”。

但是：

“为什么 MyTemplateClass 示例会成功？”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-19T16:30:27.313

区别在于 C++ 语法。一个简单的声明是这样形成的：

```
declaration-specifier-seq init-declarator-list 
```

其中 declaration-specifier-seq 是声明说明符的序列：

```
simple-type-specifier: int, bool, unsigned, typedef-name, class-name ...
class-specifiers: class X { ... }
type-qualifier: const, volatile
function-specifier: inline, virtual, ... 
storage-class-specifier: extern, static, ...
typedef 
```

你明白了。init-declarator-list 是一个声明器列表，每个声明器都有一个可选的初始化器：

```
a
*a
a[N]
a()
&a = someObj 
```

所以一个完整的简单声明可能看起来像这样，包含 3 个声明符：

```
int a, &b = a, c[3] = { 1, 2, 3 }; 
```

类成员有特殊的规则来解释他们出现的不同上下文，但它们非常相似。现在，你可以做

```
typedef int A[3];
A *a; 
```

因为第一个使用 typedef 说明符，然后是 simple-type-specifier，然后是像“a[N]”这样的声明符。然后第二个声明使用类型定义名称“A”（简单类型说明符），然后使用类似“*a”的声明符。但是，你当然不能

```
int[3] * a; 
```

由于“int[3]”不是一个有效的声明说明符序列，如上所示。

现在，当然，模板**不仅仅是**宏文本替换。模板类型参数当然被视为任何其他类型名称，它被解释为只是它命名的类型，并且可以出现在简单类型说明符可以出现的地方。一些 C# 人倾向于说 C++ 模板“就像宏一样”，但它们当然不是 :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T16:15:05.220

```
template<class T> MyTemplateClass {
    ...
} 
```

更接近

```
template<class T> MyTemplateClass {
    typedef {actual type} T;
    ...
} 
```

而不是简单的文本替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T16:18:26.263

使用指针或指针数组是有区别的。在您使用它之前，需要为数组的每个元素分配内存，是的，在第二个示例中您有一个错字，您没有定义模板。

# ssas - Analysis Services 2008 中多个层次结构中的属性

> ID：883684
> 
> 赞同：0
> 
> 时间：2009-05-19T16:11:09.997
> 
> 标签：ssas, data-warehouse

我设计了一个使用星型模式的相对简单的数据仓库。我有一个只有一个主键以及 CompanyID 和 Amount （实际测量）列的事实表。当然我也有一个维度表来代表事实表引用的公司。

现在我需要为公司创建一个单层层次结构（CompanyGroup）。这似乎是一项简单的任务，但问题是应该允许单个公司存在于多个 CompanyGroups 中。

我通过创建一个名为 CompanyHierarchy 的新维度表来对此进行试验，该表包含一个主键、GroupKey 和 CompanyKey。定义用户定义的层次结构，其中 GroupKey 是顶级，CompanyKey 是第二级会在处理维度时产生 CompanyKey*属性的重复属性键已被发现*错误。

所以，我不太确定如何从这个开始。如何在属性可以多次存在的维度中创建用户定义的层次结构？

我当前的多维数据集定义的屏幕截图可以在以下位置看到：

img132.imageshack.us/img132/6729/ssasm2m.gif

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T06:30:14.497

您需要创建多对多关系（一个公司可以属于多个组，一个组可以有多个公司） Adventure Works 多维数据集中围绕销售原因维度和[这里](http://www.sqlbi.eu/Projects/Manytomanydimensionalmodeling/tabid/80/language/en-US/Default.aspx)有一份详尽的白皮书，解释了使用多对多关系的多种不同方式。

还有一种技术可以支持我[在此处记录的一个层次结构中的多个成员](http://geekswithblogs.net/darrengosbell/articles/57811.aspx)

# vb.net - 是否有更好/最好的方法来确定 VB.NET 中传递对象的类型？

> ID：883687
> 
> 赞同：0
> 
> 时间：2009-05-19T16:11:22.120
> 
> 标签：vb.net, types

我仍在开发此功能，但这就是我打算做的事情。该函数将接受一个对象，然后尝试确定其类型。我正在寻找一组特定的类型：整数、布尔值、日期、字符串。到目前为止，我所拥有的是相当私密的，但到目前为止它似乎正在发挥作用：

```
Private Function DataType(ByVal entry As Object) As ValueType
    Try
        If IsNumeric(entry) Then
            If Integer.Parse(entry) Then
                Return ValueType.Number
            End If
        End If
    Catch
    End Try

    Try
        If Boolean.Parse(entry) Then
            Return ValueType.Boolean
        End If
    Catch
    End Try

    Try
        If Not Date.Parse(entry) = Nothing Then
            Return ValueType.Date
        End If
    Catch
    End Try

    Return ValueType.Text
End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T16:16:28.090

我建议使用[TypeOf](http://msdn.microsoft.com/en-us/library/0ec5kw18.aspx)而不是 Parse 或 TryParse

```
 If  TypeOf entry Is Integer Then ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T16:18:52.847

您必须决定是否接受`"42"`成为整数。对象类型仍然是`String`！

`IsNumeric`无论如何都可以删除try-blocks 和附加检查- 只需使用 TryParse-Functions

```
 Dim IntResult As Integer

    If Integer.TryParse("42", IntResult) Then
        ' Parsing succeeded - Result is stored in IntResult '
    Else
        ' Failed! '
    End If 
```

当可以在编译时检查类型时，您可以使用参数重载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T16:36:04.640

我是一名 C# 开发人员，我并不完全理解您的代码，但我会使用字典在对象类型和其他类型之间进行映射 - 我假设您返回一个枚举值。这是一个 C# 示例。在实际代码中，字典可能不应该建立在每个方法调用上。

```
public enum ValueType
{
    Unknown, Number, Boolean, Date, String
}

public static ValueType DataType(Object o)
{
    Dictionary<Type, ValueType> map =
        new Dictionary<Type, ValueType>
            {
                {typeof (Int32), ValueType.Number},
                {typeof (Int64), ValueType.Number},
                {typeof (Decimal), ValueType.Number},
                {typeof (Single), ValueType.Number},
                {typeof (Double), ValueType.Number},
                {typeof (Boolean), ValueType.Boolean},
                {typeof (DateTime), ValueType.Date},
                {typeof (String), ValueType.String}
            };

    if ((o == null) || (!map.ContainsKey(o.GetType())))
    {
        return ValueType.Unknown;
    }
    else
    {
        return map[o.GetType()];
    }
} 
```

我再看一眼，看起来您正试图通过解析字符串来确定存储在字符串中的信息类型——在这种情况下，上述方法无济于事。

# sql - 通过 Isa 关系恢复类型

> ID：883688
> 
> 赞同：0
> 
> 时间：2009-05-19T16:11:25.347
> 
> 标签：sql

我的数据库有 7 个表：一个是父表（提要），另外 3 个是 isA 关系的子表（公共提要、私人提要、生成的提要）。feeds 表上有一个带有外键的“subscriptions”表。每个用户都可以订阅任何类型的提要。问题是每种类型的提要的视图是不同的，这意味着我需要为订阅的每种类型的提要生成不同的链接。在当前方案下，我需要执行 3 次查询才能从提要 ID 中获取提要的类型。这个问题有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T16:59:51.773

您可以使用视图将孩子预先加入父母，并获得一致的结果，无论哪种孩子类型。例如：

```
create view feed_links as
select f.feed_name
,      case f.feed_type
            when 'public' then pub.x + pub.y
            when 'private' then pri.z
            when 'generated' then gen.v + gen.w
            end as link
from   feeds f
left outer join public_feeds pub on pub.feed_id = f.feed_id
left outer join private_feeds pri on pri.feed_id = f.feed_id
left outer join generated_feeds gen on gen.feed_id = f.feed_id
where ...; 
```

或者，如果您的提要表没有 feed_type 列（或等效列）：

```
create view feed_links as
select f.feed_name
,      case when pub.feed_id is not null then pub.x + pub.y
            when pri.feed_id is not null then pri.z
            when gen.feed_id is not null then gen.v + gen.w
            end as link
from   feeds f
left outer join public_feeds pub on pub.feed_id = f.feed_id
left outer join private_feeds pri on pri.feed_id = f.feed_id
left outer join generated_feeds gen on gen.feed_id = f.feed_id
where ...; 
```

# web-applications - 有没有一种简单的方法来监视 tomcat Web 应用程序中的会话？

> ID：883691
> 
> 赞同：4
> 
> 时间：2009-05-19T16:11:42.837
> 
> 标签：web-applications, session, tomcat, monitoring

我正在使用 Spring MVC 2.5 开发一个 Web 应用程序。我使用 Eclipse 作为我的 IDE 并部署到 Tomcat 6。

我担心我不了解 Spring 中的会话是如何工作的，并且想知道如何监控会话状态。我知道Tomcat有各种监控能力，我什至可以在Eclipse中开启它们……但我不知道它们是如何工作的。我还认为我可能能够使用 Tomcat 管理器应用程序，但它似乎没有运行。

无论如何，我不想在接下来的两天里配置这个。有人可以指点我一个简单的设置来进行监控会话吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T18:47:21.320

SpringSource (Spring Framework/Rod Johnson guys) has a version of tomcat where they have put all the additional instrumentation into Tomcat

[http://www.springsource.com/products/tcserver](http://www.springsource.com/products/tcserver)

> SpringSource tc Server™ is an enterprise version of Apache Tomcat, the widely used web application server. SpringSource tc Server is hardened for enterprise use and is coupled with key operational capabilities, advanced diagnostics and is backed by mission-critical support.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T13:25:37.777

这取决于您想在会话中看到什么。

如果您对将哪些对象放入会话中感兴趣，那么我会在 session.get/set/removeAttribute 上添加一个断点，然后进行调试。您还可以添加 HttpSessionListener 并在创建/销毁会话时设置断点或日志。

另一种方法是添加opensymphony/clickstream（只是一个jar和一些jsp：s，而不是单独的webapp）。通过这种方式，您可以监控每个会话的所有活动（点击路径）。很容易修改以显示所有会话属性。（谷歌 opensymphony 点击流）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T18:44:00.017

Tomcat 管理器是现实中最简单的方法。除非你有一些自定义的 tomcat 安装，否则如果 tomcat 是，管理器总是在运行。

# c# - 在 SelectSingleNode 中使用 XPath：从 XML 中检索单个元素（如果存在）

> ID：883698
> 
> 赞同：13
> 
> 时间：2009-05-19T16:12:06.517
> 
> 标签：c#, xpath, selectsinglenode

我的 XML 看起来像：

```
<?xml version=\"1.0\"?>
<itemSet>
       <Item>one</Item>
       <Item>two</Item>
       <Item>three</Item>
       .....maybe more Items here.
</itemSet> 
```

某些单独的**项目**可能存在也可能不存在。假设我想检索元素*`<Item>`**二**`</Item>`*（如果存在）。我已经尝试过以下 XPath（在 C# 中）。

*   `XMLNode node = myXMLdoc.SelectSingleNode("/itemSet[Item='two']")`--- 如果 Item *two*存在，那么它只返回第一个元素*one*。也许这个查询只是指向 itemSet 中的第一个元素，如果它在某个地方有一个值为 2 的项作为子项。这种解释正确吗？

所以我尝试了：

*   `XMLNode node = myXMLdoc.SelectSingleNode("/itemSet[Item='two']/Item[1]")`--- 我将这个查询读作，返回*`<Item>`*itemSet 中第一个值 = 'two' 的元素。我对么？

这仍然只返回第一个元素*one*。我究竟做错了什么？在这两种情况下，使用兄弟姐妹我可以遍历子节点并到达*two*，但这不是我正在看的。此外，如果两个不存在，则 SelectSingleNode 返回 null。因此，我得到一个成功的返回节点这一事实确实表明元素二的存在，所以如果我想要一个布尔测试来检查*两个*的存在，上面的任何 XPaths 就足够了，但我实际上需要完整的*`<Item>two</Item>`*元素我的返回节点。

*[我在这里的第一个问题，也是我第一次使用 Web 编程，所以我刚刚从过去的 SO 问题中学习了上述 XPath 和相关的 xml 内容。所以要温柔，让我知道我是个傻瓜还是无视任何社区规则。谢谢。]*

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-05-19T16:17:25.140

我想你想要：

```
myXMLdoc.SelectSingleNode("/itemSet/Item[text()='two']") 
```

换句话说，您想要具有两个文本的*项目*`itemSet`，而不是包含它的项目。

在您的情况下，您还可以使用单个点来指示上下文节点：

```
myXMLdoc.SelectSingleNode("/itemSet/Item[.='two']") 
```

`.`编辑：和之间的区别在于`text()`有效`.`地表示“此节点”，并`text()`表示“此节点的所有文本节点子节点”。在这两种情况下，比较都将针对 LHS 的“字符串值”。对于元素节点，字符串值是“元素节点的所有文本节点后代的字符串值按文档顺序串联”，对于文本节点集合，比较将检查是否有任何文本节点等于你正在测试的那个。

所以当元素内容只有一个文本节点时并不重要，但假设我们有：

```
<root>
  <item name="first">x<foo/>y</item>
  <item name="second">xy<foo/>ab</item>
</root> 
```

然后 XPath 表达式 " `root/item[.='xy']`" 将匹配第一项，但 " `root/item[text()='xy']`" 将匹配第二项。

# cocoa-touch - 我在哪里可以获得更好的 Apple 文档？

> ID：883699
> 
> 赞同：6
> 
> 时间：2009-05-19T16:12:11.120
> 
> 标签：cocoa-touch, cocoa

比我希望的更多的时候，我似乎在 Apple 的文档中遇到了方法/属性定义，这些定义充其量是模糊的，对我来说，最坏的情况是毫无意义的。例如，从 中获取以下方法描述`NSNumberFormatter Class Reference`：

* * *

> **setPartialStringValidationEnabled：**
> 
> 设置是否为接收方启用部分字符串验证。
> 
> ```
> - (void)setPartialStringValidationEnabled:(BOOL)b 
> ```
> 
> **参数**
> 
> *b*如果启用了部分字符串验证，则为 YES，否则为 NO。

* * *

所以，让我们假设我经历过的劣质教育系统以及我之前从事的任何项目都没有涵盖 Cocoa 中的“部分字符串验证”，我想深入研究一下这个属性是什么关于。一个人在哪里看（除了谷歌）？我讨厌在论坛上纠缠我自己*应该*能够*轻松*查找的东西。

我已经多次遇到这样的情况，我认为我可能错误地接近 Apple 的文档。有什么建议么？提示与技巧？第三方资源？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T16:34:03.767

部分字符串验证[在 NSFormatter 类中进行了说明](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSFormatter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFormatter/isPartialStringValid:newEditingString:errorDescription:)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-19T16:32:27.483

类似的 Setter 方法有时会在 getter 方法、类文档中的介绍文本或您在左下角看到链接的文档配套指南之一中进行更详细的解释。有时您还可以在 Cocoa 标题中找到线索，方法是在编写代码时右键单击名称并选择“跳转到定义”。

否则，除了谷歌之外，真的没有其他资源，在这样的网站上询问它或使用邮件列表。您总是可以编写一些代码来测试更改其值时会发生什么。当然，如果确实令人困惑，花时间提交雷达错误报告也是一件好事，因此希望将来会得到改进。

# sql - 如何在水晶报表中使用多个存储过程？

> ID：883705
> 
> 赞同：4
> 
> 时间：2009-05-19T16:13:10.510
> 
> 标签：sql, stored-procedures, crystal-reports

我有两个希望在我的存储过程中使用的存储过程，但是一旦我这样做了，它就无法加载并出现错误：“提供的参数无效，没有检索到行集。” 如果我删除其中任何一个，它就会重新开始工作。

我有水晶报告设置这样的东西：

```
报告：
  按租户分组。ReferedBy
    计算租户余额的存储过程
```

第二个存储过程位于报告的选择中。我只想通过状态标志选择租户，并且我从存储过程中获取状态标志。

无论如何，这两个过程都没有联系在一起。一个返回一个值（select 中的那个），另一个返回多个（group by 中的那个）。两者都不带任何参数，都只是存储在数据库中的简单 SQL 语句。

第一个过程：GetAllTenantBalances

```
SELECT (SUM(tblTransaction.AmountPaid) - SUM(tblTransaction.AmountCharged)) AS TenantBalance, tblTransaction.TenantID
    FROM tblTransaction
    GROUP BY tblTransaction.TenantID 
```

第二个过程：[GetTenantStatusID_Current]

```
SELECT ID FROM tblTenantStatus WHERE Description = 'Current' 
```

谁能告诉我为什么我不能这样做，以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T16:23:42.000

您可以将第一个 sp 更改为仅汇总“当前”租户。或者，如果您必须保留两个 sp，您将不得不去找数据库专家并通过tenant_id 加入它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T16:29:36.550

您还可以使用子报告为您提供所需的数据。在主报表上使用 SP，然后在子报表上使用另一个 SP。

-JFV

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-19T16:21:57.290

除非发生了变化，否则您不能从报告中调用多个 proc。我怀疑你可以调用多个选择语句。您将需要创建一个同时返回两条数据的 proc，或者为第二个 proc 创建一个子报表。

# sql - 在 Oracle 中插入多行

> ID：883706
> 
> 赞同：12
> 
> 时间：2009-05-19T16:13:12.537
> 
> 标签：sql, oracle, insert

在有关向 Oracle 中插入多行的[讨论中，演示了两种方法：](https://stackoverflow.com/questions/39576/best-way-to-do-multi-row-insert-in-oracle#39602)

第一的：

```
insert into pager (PAG_ID,PAG_PARENT,PAG_NAME,PAG_ACTIVE)
          select 8000,0,'Multi 8000',1 from dual
union all select 8001,0,'Multi 8001',1 from dual 
```

第二：

```
INSERT ALL
   INTO t (col1, col2, col3) VALUES ('val1_1', 'val1_2', 'val1_3')
   INTO t (col1, col2, col3) VALUES ('val2_1', 'val2_2', 'val2_3')
   INTO t (col1, col2, col3) VALUES ('val3_1', 'val3_2', 'val3_3')
   .
   .
   .
SELECT 1 FROM DUAL; 
```

任何人都可以争论使用一种而不是另一种的偏好吗？

PS我自己没有做任何研究（甚至是解释计划），所以任何信息或意见都将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T16:55:57.020

从性能的角度来看，这些查询是相同的。

`UNION ALL`不会损害性能，因为仅在需要时`Oracle`估计`UNION`'ed 查询，它不会首先缓存结果。

`SELECT`从这个意义上说，语法更灵活，`SELECT`如果您想更改某些内容，您可以更轻松地操作查询。

例如，这个查询：

```
insert into pager (PAG_ID,PAG_PARENT,PAG_NAME,PAG_ACTIVE)
          select 8000,0,'Multi 8000',1 from dual
union all select 8001,0,'Multi 8001',1 from dual 
```

可以改写为

```
INSERT
INTO    pager (PAG_ID,PAG_PARENT,PAG_NAME,PAG_ACTIVE)
SELECT  7999 + level, 0, 'Multi ' || 7999 + level, 1
FROM    dual
CONNECT BY
        level <= 2 
```

通过替换`2`为适当的数字，您可以获得所需的任意数量的行。

如果是`INSERT ALL`，您将不得不复制目标表描述，如果您需要行，则可读性较差`40`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-11-09T09:30:45.580

该`INSERT ALL`方法在向表中插入更多行时存在问题。

我最近想用单个 SQL 语句将 1130 行插入到一个表中。当我尝试使用`INSERT ALL`方法执行此操作时，出现以下错误：

> ORA-24335 - 不能支持超过 1000 列

当我使用`INSERT INTO .. UNION ALL ..`方法时，一切都很好。

顺便提一句。在我找到这个讨论之前，我不知道 UNION ALL 方法:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-19T16:28:38.563

我怀疑解决方案 1 是一种有效的破解方法，并且可能比 Insert ALL 的设计替代方案效率低。

全部插入实际上是为您设计的，因为您可以通过选择将许多行插入超过 1 个表中，例如：

```
Insert ALL
into 
  t1 (c1, c2) values (q1, q2)
  t2 (x1, x2) values (q1, q3)
select q1, q2, q3 from t3 
```

如果您想加载数千行**并且它们已经不在数据库中**，我认为这不是最好的方法 - 如果您的数据在文件中，您想查看外部表或 SQL 加载器有效地为您插入行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-06T09:00:20.983

我尝试了一些测试，更快的解决方案应该是

```
insert into pager (PAG_ID,PAG_PARENT,PAG_NAME,PAG_ACTIVE)
          select 8000,0,'Multi 8000',1 from dual
union all select 8001,0,'Multi 8001',1 from dual 
```

在 300 <-> 400 行之间缓冲（我尝试使用 odbc，此值可能取决于其配置）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-19T16:23:10.157

使用 的语句`UNION ALL`理论上有一个小的性能劣势，因为它必须在插入发生之前合并所有语句的结果。没有这个`INSERT ALL`缺点，因为最终结果已经可以逐行处理。

但实际上，Oracle 内部的优化器应该可以忽略不计，这取决于您选择哪种方式。

在我自己看来，这`INSERT ALL`是两者中更好的可读性，而`UNION ALL`变体是在自动生成这样的插入时占用更少空间的变体。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-12-13T21:27:50.163

如果您有超过 1000 条的插入语句，则将所有插入语句放在一个 .sql 文件中，然后在 Toad 或 SQL Developer 中打开该文件，然后执行。所有记录都将被插入。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-10-01T16:31:34.057

您应该考虑 Array-Insert。

*   简单的 SQL
*   需要一些客户端编码来设置数组参数

如果需要批量完成数百个插入，这是最小化网络流量的方法。

# javascript - TinyMCE：在 styleselect-menu 中自定义样式名称

> ID：883708
> 
> 赞同：4
> 
> 时间：2009-05-19T16:13:39.120
> 
> 标签：javascript, tinymce, richtextediting

假设我有一个名为*foo*的 CSS 类，但希望它在 TinyMCE 样式选择菜单（[高级主题中可用的默认按钮之一）中显示为](http://wiki.moxiecode.com/index.php/TinyMCE:Control_reference)*foo (1* )。

我尝试使用[class_filter](http://wiki.moxiecode.com/index.php/TinyMCE:Configuration/class_filter)选项来执行此操作，但这似乎不起作用。

你将如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T02:40:08.127

尝试使用[theme_advanced_styles](http://wiki.moxiecode.com/index.php/TinyMCE:Configuration/theme_advanced_styles)选项进行初始化。

# c# - 在创建时将 sitecore 用户设置为禁用

> ID：883713
> 
> 赞同：3
> 
> 时间：2009-05-19T16:14:04.567
> 
> 标签：c#, sitecore

我为 Sitecore 站点创建了一个注册表单控件，该控件将创建一个 Sitecore 用户进行注册。但是，我需要先对帐户进行一些授权，然后用户才能使用它登录并希望将帐户设置为在创建时禁用。

到目前为止，我一直在使用 Security.Accounts.User 类来实现这一点，但似乎在 Sitecore API 中找不到任何可以让我禁用帐户的东西。我知道可以禁用帐户，因为 GUI 包含执行此操作的按钮。有没有办法以编程方式实现这一目标，还是我在寻找不存在的东西？

我正在使用 Sitecore 6.0 rev 090120。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T18:18:27.983

MembershipUser 有一个 .IsApproved 属性（get; set;），我收集到的属性基本上可以解决您在此处解决的相同问题。

您正在寻找的实际上更多的是常规 ASP.NET 问题，而不是 Sitecore 问题。我发现这个线程特别有用；[http://forums.asp.net/t/1035758.aspx](http://forums.asp.net/t/1035758.aspx)；希望也能帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-25T10:05:06.607

我的工作代码：

```
//-- Create sitecore user
var membershipUser = Membership.CreateUser(GetDomainUsername(crmContact.AdUsername), password, crmContact.Email);
//-- then disable the user
membershipUser.IsApproved = false;
Membership.UpdateUser(membershipUser); 
```

根据马克的提示。

# c++ - 作为 Web 服务的 C++ OpenGL 应用程序

> ID：883717
> 
> 赞同：7
> 
> 时间：2009-05-19T16:14:54.020
> 
> 标签：c++, web-services, api, opengl

我们用 C++ 创建了一个 OpenGL 应用程序，它可以可视化一些物理模拟。基本应用程序包含在一个由简单 GUI 使用的 DLL 中。它目前在台式 PC 上运行，但我们有将其变成 Web 服务的想法。

由于模拟需要专用硬件，其想法是用户通过他/她的浏览器可以作为服务与我们的应用程序进行交互，然后该服务将结果呈现为可以显示/更新的图像（jpg 或任何适当的东西）在浏览器中。

我的问题：如何“轻松”将描述的 C++ 应用程序转换为在某些服务器上运行的 Web 服务，以便我可以通过 Web 访问它？我应该看什么样的技术/API？是否有任何现实生活中的例子可以解决类似的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T16:20:01.550

这是可能的，但您将遇到的一个主要困难是尝试从 Web 服务中使用 OpenGL。您需要移植它以进行 100% 的屏幕外渲染并在没有窗口上下文的情况下工作。那将是我的第一步，而且并不总是微不足道的。

此外，从 web 服务正确维护和管理您的 opengl 上下文非常困难，并且所涉及的开销可能非常痛苦。根据渲染的数量和类型，您可能会在那里遇到一些问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T16:33:55.517

如果你需要它来很好地扩展 CGI 可能会有点慢和 hacky。

那里有一些 C++ Web 框架，请参阅[这个问题](https://stackoverflow.com/questions/66166/c-web-service-framework)。

就 OpenGL 而言，您可能需要使用 Jay 所说的帧缓冲区扩展。然后，您可以将图像渲染为纹理，并使用 glGetTexImage() 来获取像素数据。从那里只需使用随附的库保存为您想要的任何图像格式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-19T16:40:16.243

我有一个类似的[项目/问题](https://stackoverflow.com/questions/513650/offscreen-rendering-to-a-texture-in-a-win32-service)，虽然它不是 Web 服务，但它需要在 Windows 服务中进行 OpenGL 渲染。我在让它在 Vista 上运行时遇到了很多问题，尽管最终它确实在 XP 上运行了常规 OpenGL。

我终于尝试使用[Mesa](http://www.mesa3d.org/)，我构建它作为我的服务的私有 DLL 工作。这是一个很棒的决定，因为我现在可以真正进入 OpenGL 调用，看看哪里出了问题。它在服务下的软件模式下运行良好，虽然没有硬件加速，但运行良好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T16:34:32.830

我猜你已经可以访问一些网络服务器，例如 Apache 或类似的。在这种情况下，您可以尝试[CppServ](http://www.total-knowledge.com/progs/cppserv/)。

您只需要配置您的网络服务器，以便它可以与 CppServ 通信。然后，我建议您开发一个 servlet（检查网站上的文档），该 servlet 反过来与您已经存在的 dll 进行通信。由于 dll 了解有关 OpenGL 的所有信息，因此创建 jpeg 图像等应该没有问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T16:41:14.260

使用像 Flex 之类的东西来创建一个支持 Web 的“控制界面”，使用服务器后端将 opengl 渲染流式传输为视频怎么样？基本上，您通过 Flex 应用程序重定向键盘/鼠标输入，并使用标准电影组件使用它来显示“实时”3D 活动。

魔鬼在细节中，当然……

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-19T16:20:38.880

如果您的用户交互需求很简单，我只会看 CGI。应该很容易理解。

至于获取 OpenGL 程序的输出，我会看一下帧缓冲区扩展。这应该使您可以轻松地渲染到内存中，然后可以将其输入到 JPEG 压缩器中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-06-03T03:06:47.790

这个答案可能听起来非常基础和基本，您是否尝试过这种方法

1.  将矢量数据从服务器发送到客户端，反之亦然（只是坐标等）

2.  在客户端渲染它。

这意味着服务器只进行计算，并且来回传递数字。

我同意这不是尝试对每个对象/模型和纹理进行矢量化的简单方法，但速度非常快，因为不是通过繁重的图形图像，而是仅发送矢量数据。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-19T18:40:34.280

您可以尝试使用来自 google 的[O3D API](http://code.google.com/apis/o3d/)，并且不要做任何类型的服务，它会更简单。

# tomcat - 安全加固：如何在 Grails Framework 中收集访问者的 IP 地址？

> ID：883720
> 
> 赞同：1
> 
> 时间：2009-05-19T16:15:06.233
> 
> 标签：tomcat, grails, groovy, spring

如何制作用户 IP 地址的日志列表，应该通过 tomcat 或 grails 或两者的组合来完成

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T18:40:33.517

```
ServletRequest.getRemoteAddr() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-10-18T13:16:52.927

这个对我有用。我还使用 request.getRemoteAddr() 将客户端 IP 地址存储到数据库。

# c# - 如何识别 Windows Mobile 2005 设备已连接到通讯座？

> ID：883730
> 
> 赞同：2
> 
> 时间：2009-05-19T16:16:43.330
> 
> 标签：c#, windows-mobile

如何识别终端（Windows Mobile 2005）连接到底座？

我需要在终端中完全相同

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T16:42:11.063

如果您需要从设备执行此操作：

```
static public bool IsConnectedToCradle
{
  get { return SystemState.CradlePresent; }
} 
```

PS：FWIW，在 Windows Mobile 术语中，“终端”通常称为“设备”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T16:28:37.143

如果您从主机（桌面）进行检查，我知道有两种方法：通过进程触发器和通过 COM 接口。

1.  [AutoStartOnConnect](http://msdn.microsoft.com/en-us/library/ms861759.aspx)
    在 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows CE 服务中有一个名为 AutoStartOnConnect 的注册表项。或者，您当然可以在 HKEY_CURRENT_USER 处使用类似的值。在该键下安装一个字符串值，具有任何名称。该值的数据应该是设备连接时要运行的应用程序的命令行。如果您希望通知已经在运行的应用程序，您可以编写一个小 exe，通知您正在运行的应用程序设备已连接。将该小 exe 的路径插入到 AutoStartOnConnect 键下的值中。
2.  [IDccMan / IDccManSink](http://msdn.microsoft.com/en-us/library/ms887362.aspx)
    您的应用程序可以在桌面上注册一个 COM 对象，该对象会被各种设备事件调用。这将需要 P/Invoke 和互操作，但这并不太棘手。openNETCF 源代码包括这些接口的 C# 包装器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T16:31:04.427

您可以使用 RAPI。查看[OpenNETCF](http://www.opennetcf.com/)上的 RAPI 通信库。如果您从主机端进行测试，这会有所帮助。

# .net - Castor 和 IKVM

> ID：883736
> 
> 赞同：1
> 
> 时间：2009-05-19T16:17:34.687
> 
> 标签：.net, castor, ikvm

我已经使用 IKVM 将用 Java 编写的 api 转换为 .net dll，到目前为止一切都很好。

它基本上在幕后使用 xml 来访问一些 Web 服务。该 api 是第 3 方，我无权访问源代码。该api使用Castor（我相信）将xml绑定到对象中。

然而，当我开始使用 api 的一些更有用的部分时，我遇到了 castor 的一个问题。我的具体错误是：

“嵌套错误：org.exolab.castor.mapping.MappingException：找不到类......”

提到的类是 api 的一部分。从网上搜索来看，castor[似乎](http://www.mail-archive.com/castor-user@exolab.org/msg00196.html)无法访问该类，因为它与 castor 位于单独的程序集中。

我的问题是我对 Java 中的类加载器了解得不够多，而且可能对 IKVM 了解得不够多，无法解决这个问题。

有没有人将 IKVM 与 Castor（或其他可能在 Java 类上使用反射的库）一起使用，并且之前遇到过这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T11:39:28.327

好吧，我很惊讶没有人对此有任何答案，所以我将我的问题发布到了 ikvm 邮件列表，并得到了回复。

答案确实与我使用的 Castor 库和第 3 方 api 代码的分离有关。

我使用的解决方案是添加选项：

```
-classloader:ikvm.runtime.AppDomainAssemblyClassLoader 
```

使用 ikvmc 编译 Castor 时。

这允许 Castor 与第 3 部分 api 进行通信，并允许我从 Web 服务中获取报告。

# css - 我在哪里可以了解所有 CSS 参数及其实际含义？

> ID：883741
> 
> 赞同：0
> 
> 时间：2009-05-19T16:19:01.223
> 
> 标签：css

CSS 中的属性/参数似乎太多了……我想知道它们的全部及其含义。我在哪里可以找到它？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-19T16:23:52.560

如果您认为这太多了，请尝试查看 .NET 框架之类的东西。CSS*什么都不*是。仍然：

*   [http://www.w3.org/Style/CSS/](http://www.w3.org/Style/CSS/)
*   [http://www.w3schools.com/css/](http://www.w3schools.com/css/)
*   [https://developer.mozilla.org/En/CSS](https://developer.mozilla.org/En/CSS)
*   [http://www.quirksmode.org](http://www.quirksmode.org/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-19T16:25:55.600

全部**按字母顺序排列**在：[CSS 属性索引](http://www.eskimo.com/~bloo/indexdot/css/propindex/all.htm) ，您还可以访问按类别排序。

通过单击每个属性，您将重定向到一个详细说明属性的页面：**它是什么；允许值；它使用的例子**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-19T16:22:43.077

该规范是一个很好的起点：[http ://w3.org/TR/CSS21/](http://w3.org/TR/CSS21/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T16:21:46.710

它不是全部，但我有这个打印并挂在我的隔间上。我不得不如此频繁地设置样式，以至于我永远记不起语法。

[http://lesliefranke.com/files/reference/csscheatsheet.html](http://lesliefranke.com/files/reference/csscheatsheet.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-19T16:28:21.777

我一直发现[备忘单](http://lesliefranke.com/files/reference/csscheatsheet.html)非常方便。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T16:24:19.907

[在https://developer.mozilla.org/en/CSS_Reference](https://developer.mozilla.org/en/CSS_Reference)有 CSS 属性、选择器和其他 CSS 组件的（但不完整的）列表，在[http://www.w3.org/Style](http://www.w3.org/Style/CSS/learning)有一大堆资源[/CSS/学习](http://www.w3.org/Style/CSS/learning)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T16:36:27.387

这不是学习 CSS 的好方法。有许多属性，但您希望专注于跨浏览器一致工作的属性。并且许多最重要的属性（显示、位置）的行为依赖于其他属性的值，因此一个一个地学习它们不会让您全面了解它们。

我推荐“PRO HTML 和 CSS 设计模式”一书作为学习最关键属性及其交互方式的一种方式。它很好地专注于您可以跨浏览器依赖的行为，以及识别属性之间的意外依赖关系。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-19T21:09:52.147

我不敢相信没有人提到 devguru！

[http://www.devguru.com/technologies/css2/index.asp](http://www.devguru.com/technologies/css2/index.asp)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-19T22:32:31.980

[Andy Budd、Simon Collison 和 Cameron Moll 的CSS Mastery](https://rads.stackoverflow.com/amzn/click/com/1590596145)作为对混乱的 CSS 世界的介绍非常有帮助。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-20T01:37:07.583

获得一本好书绝对是比查看 W3C 规范更好的方法。

我还推荐[CSS Mastery](https://rads.stackoverflow.com/amzn/click/com/1590596145)和Dan Cederholm 的[Bulletproof Web Design](https://rads.stackoverflow.com/amzn/click/com/0321509021)作为很好的起点。

对于在线资源，您应该查看[Sitepoint CSS 参考](http://reference.sitepoint.com/css)。它也是一个很棒的 HTML 和 Javascript 资源。您还应该浏览[A List Apart](http://www.alistapart.com/)和[24ways](http://24ways.org/)上的文章。

# apache-flex - 如何让弹性列表组件中的项目编辑器提交它的更改？

> ID：883746
> 
> 赞同：0
> 
> 时间：2009-05-19T16:19:31.643
> 
> 标签：apache-flex, list, itemeditor

我有一个列表组件，并且我有一个用于列表中项目的项目编辑器。我希望用户在完成更改后单击一个按钮，因为我让他们在编辑器中编辑多条数据，并且我还想在关闭编辑器之前验证数据。我只是不知道如何处理按钮的单击事件以使项目编辑器关闭并将其更改提交给数据提供者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T14:52:17.507

要处理 List 控件中多个字段的编辑，您需要捕获 ItemEditEnd 事件，然后手动更改您感兴趣的字段。

请参阅此处的“示例：使用带有列表控件的自定义项目编辑器” - [http://livedocs.adobe.com/flex/3/html/help.html?content=celleditor_9.html#226555](http://livedocs.adobe.com/flex/3/html/help.html?content=celleditor_9.html#226555)。

通常，当您离开单元格时，List 会为您处理此事件的调度。我不确定它的属性，但你应该能够在你的按钮单击处理程序中构造这个事件，然后自己调度它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T16:32:25.110

您将需要使用验证器来验证数据，我认为可能会对 updateComplete 和更改事件做一些事情以延迟列表组件的更新：

[http://livedocs.adobe.com/flex/201/html/wwhelp/wwhimpl/common/html/wwhelp.htm?context=LiveDocs_Book_Parts&file=celleditor_073_17.html](http://livedocs.adobe.com/flex/201/html/wwhelp/wwhimpl/common/html/wwhelp.htm?context=LiveDocs_Book_Parts&file=celleditor_073_17.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T18:58:00.087

I would use data binding and let Flex do the work for you.

Have an object myObject with a bindable property myList:IList. Bind the display to this object.

When you start editing, copy that list.

On MouseEvent.CLICK:

```
var ed:Editor // Your list editing object.
var edProvider:IList = ed.dataProvider;
var targList:IList   = myObject.myList; 

var bool:Boolean     = ( myObject.myList.length > edProvider.length );
var len:int          = ( bool )? targList.length: edProvider.length; 

var item:*           = null;

for( var i:int = 0; i < len; i++ )
{
    try // a "just in case".  You probably will never have a problem.
    {
        item = edProvider.getItemAt( i );
        targList.setItemAt( item, i );
    }
    catch( error:Error )
    {
        continue;
    }
} 
```

# open-source - Adobe AIR 中的源文件安装问题

> ID：883748
> 
> 赞同：3
> 
> 时间：2009-05-19T16:19:36.823
> 
> 标签：open-source, adobe, air

想知道为什么当我将项目导出到 *.air 并将其安装在我的计算机上时。我可以在软件安装目录中看到源文件。

我应该选择什么吗？或者它应该是这样的......因为，如果每个人都可以安装项目并观看我的代码，我为什么要在adobe air上编写软件？

我在 ajax、html、js 上编程。

我在 google 和 adobe air 论坛上搜索，但找不到并回答我的问题。

我想得到任何帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T07:49:48.187

按来源，您是指 FLA 和 AS 文件，还是指 HTML 和 JS 文件？对于 HTML 项目，是的，您的所有 HTML 和 JS 文件都将对打包应用程序中的用户可见。AIR 基本上只是将它们复制到用户的安装目录并运行它们。但是对于基于 Flash/Flex 的应用程序，不必分发 FLA 和 AS 文件，只需分发 SWF。

如果 FLA 等出现在您的应用目录中，您将需要更改导出方式。详细信息取决于您是从 Flash、FB 还是命令行发布，所以如果您找不到它，请使用您正在使用的详细信息更新您的问题。

# subsonic - SubSonic 多列主键

> ID：883757
> 
> 赞同：2
> 
> 时间：2009-05-19T16:21:28.257
> 
> 标签：subsonic

我们有某些表，其中有多个列，它们共同构成主键。当 SubSonic 为具有多列的表生成我们的表的所有类时，仍然有一些方法，如 FetchByID，只使用一个值作为主键。

因此，外键属性将返回错误的项目。例如，我们有一个产品表，它有一个多列的主键。与产品表有关系的类将具有带有 get 方法的产品属性，例如：Product.FetchByID(this.SalesOrganisationID)。这应该是 Product.FetchByID(this.SalesOrganisationID, this.ProductID)。

有没有人对我应该做些什么来让 SubSonic 使用这些主键有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T17:44:24.777

您可以扩展您的 Product 类，使其具有使用 Select 通过其复合 ID 查找 Product 的方法，例如：

```
public partial class Product{
  public static Product FetchByCompositeId(int salesOrganisationId, int productId){
    return DB.Select().From<Product>()
      .Where(Product.Columns.SalesOrganisationId).IsEqualTo(salesOrganisationId)
      .And(Product.Columns.ProductId).IsEqualTo(productId)
      .ExecuteSingle<Product>();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T16:58:58.763

您必须使用 Query 或 SqlQuery (SubSonic.Select) 来获取它。您可以在要添加此功能的 Object 的分部类中添加该方法，从而封装执行操作的细节。

# php - 获取表单复选框值并通过分页传递它们？

> ID：883772
> 
> 赞同：0
> 
> 时间：2009-05-19T16:24:29.050
> 
> 标签：php, javascript, mysql, ajax

我需要从一些选定的复选框中获取值，并通过 php/mysql 中的分页传递这些值。如果在另一个页面上用户选择了其他复选框，我需要将它们的值添加到之前选择的数组中。

我需要这个用于产品比较页面。简而言之，我需要：

*   获取复选框值
*   存储它们
*   在分页中包含来自其他页面的复选框值
*   当用户选择“比较”时，将该数组发送到比较页面。

有人知道怎么做吗？相关示例将不胜感激？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T16:28:52.883

有不同的方法可以跨页面维护状态，包括 cookie、会话变量、隐藏输入、在查询字符串中传递它们、持久化到数据库等。在这种情况下，我可能会使用会话变量。

有关 PHP 会话的更多信息，请参阅[PHP 会话](http://us3.php.net/manual/en/book.session.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T16:31:40.773

一种解决方案是一次加载所有页面`div`的表单中。当您点击一个新的页面链接时，隐藏`div`除您需要显示的之外的所有 s。这样所有的复选框都以相同的形式提交，从而更容易处理服务器端。这当然取决于每个单独页面的重量以及有多少页面。

另一种解决方案是保留一个会话变量，跟踪点击的内容。每次有人点击转到另一个页面。向服务器发布复选框列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-17T03:36:26.423

您可以通过使用 javascript 将复选框选择存储在 cookie 中来实现。这是一些示例代码，可帮助您朝着正确的方向前进。

```
var aa_checkbox;

function init_checkbox(){
  //setup blank cb cookie
  if(!Cookie.read('cb')){
    Cookie.write('cb', JSON.encode({}));
  }

  //setup "associative array" to match what is currently in the cookie
  aa_checkbox = JSON.decode(Cookie.read('cb'));

  //set up each checkbox with class="remember_cb"
  $$('input.remember_cb').each(function(el){

    //mark checked if it is in the cookie
    if(aa_checkbox[el.name]){
      el.checked = 'checked'
    }

    //setup onclick event to put checkbox status in the 
    el.addEvent('click', function(){
      if(el.checked){
        aa_checkbox[el.name] = 1;
      }else{
        delete(aa_checkbox[el.name]);
      }   
    })
  })

  //save aa_checkbox back into cookie upon leaving a page
  window.onbeforeunload = function(){Cookie.write('cb', JSON.encode(aa_checkbox));};

  setup_form();

  return true;
}

function setup_form(){
  //set up form so that it adds the inputs upon submit.
  $$('form.remember_cb_form').each(function(form){
    form.addEvent('submit', function(ev){
      //clean up previously inserted inputs
      var aa_hidden_insert = $$('input.hidden_insert');
      $each(aa_hidden_insert, function(el){ 
        el.parentNode.removeChild(el);
      })

      var el_form = this;

      //insert hidden elements representing the values stored in aa_checkbox
      $each(aa_checkbox, function(i_value, s_name){
        if(i_value){ 
          var el_input = document.createElement('input');
          el_input.type = 'hidden';
          el_input.value = i_value;
          el_input.name = s_name;
          el_input.setAttribute('class', 'hidden_insert');
          el_form.appendChild(el_input);
        }
      });
    });
  });
}

window.addEvent('domready', init_checkbox); 
```

这里有一个[工作演示，这里](http://jamesfunk.com/test/checkbox_cookie1.html)[有](http://jamesfunk.com/wordpress/?p=65)一个更彻底的解释

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-19T16:31:36.843

您的分页链接实际上可以执行表单 POST，然后读取您的 php 脚本中的复选框 []，并更新隐藏的表单元素或将值添加到会话中，任何有状态的。所以你的锚看起来像

```
<a href="#" onclick="document.myform.submit()">下一个</a>

```

# java - 如何管理 java ee 事务？

> ID：883778
> 
> 赞同：1
> 
> 时间：2009-05-19T16:25:17.643
> 
> 标签：java, jpa, jakarta-ee

我目前正在使用 Java EE 将我的 EntityManager 注入 Web 应用程序，如下所示：

```
@PersistenceContext
EntityManager em;

@Resource
UserTransaction utx; 
```

我在请求范围的 JSF bean 中有这个。它有效，但很痛苦，因为为了避免 NoTransactionException 我必须像这样包装每个 DAO 方法：

```
public void saveSomething(Obj toSave) {
    EntityManager em = getEntityManager();
    UserTransaction utx = getTransaction();

    try {

        utx.begin();

        em.persist(toSave);
        utx.commit();

    } catch(Exception e) {
        logger.error("Error saving",e);
        try {
            utx.rollback();
        } catch(Exception ne) {
            logger.error("Error saving",ne);
        }
        return null;
    }
} 
```

}

有没有办法让容器在像这样只包含 WAR 文件的项目中为我管理事务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-21T11:06:52.540

如果您正在管理自己的事务，最好的方法是提供一个抽象的 DAO 来为您执行样板代码：

```
@PersistenceContext
EntityManager em;

@Resource
UserTransaction utx;

abstract class AbstractDao<E,ID> implements IDAO<E,ID> {

   public ID save(E e) {
        try {
                utx.begin();
                em.persist(e);
                utx.commit();

        } catch(Exception e) {
                logger.error("Error saving",e);
                try {
                        utx.rollback();
                } catch(Exception ne) {
                        logger.error("Error saving",ne);
                }
                return null;
        }
   }

} 
```

另一种方法是使用容器管理的事务。请查阅 J2EE 指南：http: [//java.sun.com/javaee/5/docs/tutorial/doc/bncij.html](http://java.sun.com/javaee/5/docs/tutorial/doc/bncij.html)

# python - C中“tail -f”功能的自定义实现

> ID：883784
> 
> 赞同：2
> 
> 时间：2009-05-19T16:27:08.423
> 
> 标签：python, c

**编辑：**我最后使用了 inotify。正如 stefanB 所说，inotify 是要使用的东西。我找到了一个使用 inotify 来实现 -f 模式的尾部克隆，[inotail](http://distanz.ch/inotail/)。

原始问题文本：

我正在尝试在 C 项目中实现“tail -f”逻辑，出于原型设计的目的，我在 python 中开发了它，如下所示：

```
 # A forever loop, each 5 seconds writes a line into file.txt
    from time import *

    while 1:
        sleep(5)
        file = open("file.txt", "a")
        file.write("This is a test\n")
        file.close() 
```

接下来的代码跟在file.txt的eof之后（由上面的代码更新）

```
 # tail -f 
    from time import *

    file = open("file.txt", "r")
    file.seek(0, 2)

    while 1:
      line = file.readline()
      if not line:
          sleep(1)
      else:
          print line

    file.close() 
```

一切正常，但 C 实现不起作用（没有检查错误代码）。省略了 stdio.h、string.h 和 unistd.h 的包含（着色隐藏了标头包含代码）。

```
 #define LINE_LEN 256

    int main(int argc, char **argv)
    {
        FILE *f;
        char line[LINE_LEN];

        f = fopen("file.txt", "r");

        fseek(f, 0, SEEK_END);

        while (1)
        {
            fgets(line, LINE_LEN, f);

            if (strlen(line) == 0)
            {
                sleep(1);
            }
            else
            {
                printf("Readed: %s", line);
            } 
        }

        fclose(f);

        return 0;
    } 
```

有什么想法？

用 poll() 代替提供的解决方案是一个好主意吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T16:35:20.133

一旦 FILE * 发现错误或 eof，它就会设置其内部状态，以便在后续调用中继续返回错误或 eof。您需要`clearerr(f);`在 sleep 返回后调用以清除 eof 设置并使其尝试从文件中读取更多数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T16:39:54.903

**编辑**：似乎[inotify](http://www.linuxjournal.com/article/8478)是要使用的东西。从 2.6.13 开始，它应该包含在 linux 内核中。[IBM developerworks 的一篇关于 inotify 的文章](http://www.ibm.com/developerworks/linux/library/l-ubuntu-inotify/index.html?ca=drs-)。

上一个答案：

查看 Linux[文件更改监视器](http://oss.sgi.com/projects/fam/faq.html)（在 linux 内核 2.4.x > 中）。这是一个让您订阅文件更改并在更改发生时从内核获取回调的框架。这应该比轮询更好。

[示例](http://techpubs.sgi.com/library/tpl/cgi-bin/getdoc.cgi?coll=0650&db=bks&fname=/SGI_Developer/books/IIDsktp_IG/sgi_html/ch08.html)如何轮询文件更改，查看**等待文件更改**和**轮询文件更改**部分。

我还没试过。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T16:35:27.480

从`tail` [手册页](http://www.monkey.org/cgi-bin/man2html?tail)：

> -f 到达文件结尾时不要停止，而是等待附加数据附加到输入。如果文件被替换（即 inode 编号发生变化），tail 将重新打开文件并继续。如果文件被截断，tail 会将其位置重置为开头。这使得 tail 对于查看可能被轮换的日志文件更有用。如果标准输入是管道，则忽略 -f 选项，但如果它是 FIFO，则不会。

所以，你可以做同样的事情：

1.  使用[stat()](http://linux.die.net/man/2/stat)读取文件的 inode 号
2.  显示该文件的内容。存储文件描述符的位置，例如 p = ftell(fd)
3.  再次使用 stat() ，查看 inode 是否已更改。如果是，则从位置 p 开始显示文件的内容
4.  重复

# email - 删除确认框 vbs 脚本

> ID：883786
> 
> 赞同：1
> 
> 时间：2009-05-19T16:27:44.833
> 
> 标签：email, scripting, vbscript, outlook, forwarding

我有以下代码，我可以通过我配置的 Outlook 发送邮件。我可以使用 Outlook 中的规则运行此 vbs，然后将邮件发送到脚本中指定的电子邮件

但是在运行此脚本以发送邮件时，我收到了一个确认框，询问是否有病毒。

如何摆脱此确认框以始终允许发送邮件。

```
 Dim ToAddress
Dim MessageSubject
Dim MessageBody
Dim MessageAttachment

Dim ol, ns, newMail

ToAddress = "John.Smith@place.com"   ' change this...
MessageSubject = "My Subject"
MessageBody = "DATA"

Set ol = WScript.CreateObject("Outlook.Application")
Set ns = ol.getNamespace("MAPI")
ns.logon "","",true,false
Set newMail = ol.CreateItem(olMailItem)
newMail.Subject = MessageSubject
newMail.Body = MessageBody & vbCrLf

' validate the recipient, just in case...
Set myRecipient = ns.CreateRecipient(ToAddress)
myRecipient.Resolve
If Not myRecipient.Resolved Then
   MsgBox "unknown recipient"
Else
   newMail.Recipients.Add(myRecipient)
   newMail.Send
End If

Set ol = Nothing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T18:32:56.697

我相信您会受到微软几年前通过安全补丁实施的内置安全功能的打击。我知道的唯一方法是对代码进行数字签名，然后将用于签署该代码的证书导入证书存储，或者更好的是使用[Redemption DLL](http://www.dimastr.com/redemption/)。从兑换 DLL 站点：

> Outlook Redemption 解决了 MS Office 98/2000 和 Office 2002/2003/2007（包括安全补丁）的 Outlook 安全补丁和 Service Pack 2 施加的限制，并且提供了许多对象和函数来处理未公开的属性和功能通过 Outlook 对象模型。

DLL 可以从这里下载：[http](http://www.dimastr.com/redemption/download.htm) ://www.dimastr.com/redemption/download.htm ，如果你环顾四周，你会发现几个如何使用它的例子。这是一个可以帮助您入门的方法：[http ://www.utteraccess.com/forums/printthread.php?Cat=&Board=80&main=409393&type=thread](http://www.utteraccess.com/forums/printthread.php?Cat=&Board=80&main=409393&type=thread)

另请注意之前发布和回答的问题：

[从 C# 程序读取 Outlook 消息时如何避免 Outlook 安全警报](https://stackoverflow.com/questions/235231/how-to-avoid-outlook-security-alert-when-reading-outlook-message-from-c-program)

[Outlook关于宏的唠叨对话框](https://stackoverflow.com/questions/639737/outlook-nagging-dialog-about-macro)

# c++ - 是否可以在 Turbo C++ 中打开 PDF 文件，如果可以，如何打开？

> ID：883787
> 
> 赞同：-1
> 
> 时间：2009-05-19T16:27:54.990
> 
> 标签：c++

我正在用 C++ 做一个项目，我想打开 PDF 文件。我怎样才能在 Turbo C++ 中做到这一点？我必须切换到另一个 IDE 吗？

编辑：我正在用 C++ 进行“电子书管理”。管理软件后，我想通过我的程序打开 pdf 文件，并且不访问 adobe reader 或 aome other。抱歉，问题不完整。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T16:29:40.557

如果您打算打开 PDF 进行查看（就像您可能使用 PDF 查看器所做的那样，例如 Acrobat Reader），而不是以编程方式打开文件，您不能在 Turbo C++ IDE 中执行此操作。

尝试在非全屏窗口中打开 IDE，您将能够同时看到 IDE 和 PDF（在 Acrobat Reader 中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T16:31:57.763

[您可以使用TechSoft 的 PDF 库](http://www.techsoft3d.com/products/fileformats_adobepdf.html?gclid=CLqB7vzmyJoCFQFHFQody18q3w)将 PDF 支持添加到您的应用程序中。您使用哪个 IDE 无关紧要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T17:09:29.390

[Poppler](http://poppler.freedesktop.org/)库是一个 C++ 库，用于将 PDF 呈现为任意格式，无论是屏幕还是图像。它很容易扩展，我编写了一个程序，用大约 150 行将 PDF 渲染为自定义图像格式，只用了不到 5 个小时——其中大部分工作是导出自定义图像格式。一个简单的渲染器不到 50 行，花了我不到一个小时的时间来写。

# javascript - jQuery：从 jquery 1.2.6 更改为 1.3.2 时验证插件中断

> ID：883795
> 
> 赞同：1
> 
> 时间：2009-05-19T16:29:17.640
> 
> 标签：javascript, jquery, jquery-validate

我最近从 jQuery 1.2.6 升级到 1.3.2

现在在我使用[表单验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)的页面上，我得到了异常：

```
[Exception... "'Syntax error, unrecognized expression: [@for='registration_primary_email']' when calling method: [nsIDOMEventListener::handleEvent]"  nsresult: "0x8057001e (NS_ERROR_XPC_JS_THREW_STRING)"  location: "<unknown>"  data: no] 
```

1.2.6 不会发生这种情况。知道发生了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T16:32:53.473

选择`@`器在 jQuery 1.3 中已弃用。

尝试删除它：

```
[for='registration_primary_email'] 
```

# wpf - WPF 边框 DesiredHeight

> ID：883800
> 
> 赞同：12
> 
> 时间：2009-05-19T16:29:58.560
> 
> 标签：wpf, data-binding, controltemplate

以下[Microsoft 示例代码](http://msdn.microsoft.com/en-us/library/ms753296.aspx#example)包含以下内容：

```
<Grid>
...     
  <Border Name="Content" ... >
...     
  </Border>
</Grid>
<ControlTemplate.Triggers>
  <Trigger Property="IsExpanded" Value="True">
     <Setter TargetName="ContentRow" Property="Height"
             Value="{Binding ElementName=Content,Path=DesiredHeight}" />
  </Trigger>
...
</ControlTemplate.Triggers> 
```

但是，在运行时，此代码会生成以下数据绑定错误：

```
System.Windows.Data Error: 39 : BindingExpression path error: 'DesiredHeight' property not found on 'object' ''Border' (Name='Content')'. BindingExpression:Path=DesiredHeight; DataItem='Border' (Name='Content'); target element is 'RowDefinition' (HashCode=2034711); target property is 'Height' (type 'GridLength') 
```

尽管出现此错误，但代码仍可以正常工作。我查看了文档，`DesiredHeight`似乎不是`Border`. 谁能解释`DesiredHeight`来自哪里？另外，有没有办法解决/抑制这个错误，所以我的程序输出是干净的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-19T16:41:24.010

您可以在应用程序的代码部分中看到该属性

编辑：

```
Border content = new Border();
int desiredHeight = content.DesiredSize.Height;
int desiredWidth = content.DesiredSize.Width; 
```

要解决此问题，请尝试将其绑定到 Height 属性，因为 DesiredHeight 在边框控件的 XAML 标记中似乎不可用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-05T12:20:35.927

有同样的问题。在自定义`Expander`中使用自定义`ComboBox`。以上都对我不起作用，绑定`Height`破坏了 的功能`Expander`，使用 a`StackPanel`也破坏了每个组中项目的显示。我发现：

```
<Setter TargetName="ContentRow" Property="Height" Value="Auto"/> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2010-09-28T23:38:05.273

我遇到过这个。根据 user275587 所说的，他们的示例有效，因为触发器删除了 RowDefination 上的 Heigth="0"。

所以我切换了高度设置/触发逻辑，所以 RowDefination 没有设置高度

```
<Grid.RowDefinitions>
     <RowDefinition Height="Auto"/>
     <RowDefinition Name="ContentRow" />
</Grid.RowDefinitions>
...
<ControlTemplate.Triggers>
     <Trigger Property="IsExpanded" Value="False">
             <Setter TargetName="ContentRow" Property="Height" Value="0" />
     </Trigger>
</ControlTemplate.Triggers> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-25T11:10:34.923

尝试一下。

```
<Setter
    TargetName="content"
    Property="Height"
    Value="{Binding ElementName=content, Path=DesiredHeight}"
/>
    ↓
<Setter TargetName="content" Property="Height" Value="NaN"/> 
```

绑定是不必要的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-07-14T17:58:36.720

我在我的申请中遇到了同样的问题。最后，我更改了代码，以便在 和 之间切换内容的可见性`Collapsed`，`Visible`并将 替换`Grid`为`StackPanel`。

我通常发现 MS 控制模板样本的质量非常好，但是这个错误有点令人沮丧。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-11-18T12:25:47.763

同样的问题，但 Carlo 接受的解决方案并不完美。海报所面临的问题消失了，但扩展器部分损坏-

如果您有一些内容需要在已经扩展的扩展器中扩展，它不会使用 Binding to *DesiredSize.Height*这样做，您需要*DesiredHeight* - 可能是由于 user275587 给出的原因。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-05-28T04:23:59.870

DesiredHeight 来自内容元素，它是一个有效的绑定。我认为您的绑定无法解决的原因是因为 DesiredHeight 依赖于 Height 属性并且您没有在模板中设置固定的高度，因此它的计算结果为 Double.Nan

# iphone - 编写带有嵌入视频的 iPhone 应用程序

> ID：883804
> 
> 赞同：4
> 
> 时间：2009-05-19T16:30:58.530
> 
> 标签：iphone, video, video-streaming

我正在研究我可能要在不久的将来编写的 iPhone 应用程序的视频流。该应用程序除了流式视频之外还有很多其他功能，但视频方面是我没有经验的部分。

有人知道有关编写流媒体视频应用程序的好文章吗？

谷歌似乎用链接淹没了我，这些链接不符合我的要求。

谢谢，

米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T09:50:49.033

Apple 在他们的文档中提供了关于媒体框架的良好文档。

搜索 MPMoviePlayerController。以下示例代码从 URL 播放电影。（免责声明，此代码来自 Apple）。

```
-(void)playMovieAtURL:(NSURL*)theURL 

{
    MPMoviePlayerController* theMovie=[[MPMoviePlayerController alloc] initWithContentURL:theURL]; 
    theMovie.scalingMode=MPMovieScalingModeAspectFill; 
    theMovie.userCanShowTransportControls=NO;

    // Register for the playback finished notification. 

    [[NSNotificationCenter defaultCenter] addObserver:self 
                                            selector:@selector(myMovieFinishedCallback:) 
                                                name:MPMoviePlayerPlaybackDidFinishNotification 
                                              object:theMovie]; 

    // Movie playback is asynchronous, so this method returns immediately. 
    [theMovie play]; 
} 

// When the movie is done,release the controller. 
-(void)myMovieFinishedCallback:(NSNotification*)aNotification 
{
    MPMoviePlayerController* theMovie=[aNotification object]; 
    [[NSNotificationCenter defaultCenter] removeObserver:self 
                                                    name:MPMoviePlayerPlaybackDidFinishNotification 
                                                  object:theMovie]; 

    // Release the movie instance created in playMovieAtURL
    [theMovie release]; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-05-26T15:04:13.633

我也在看这个问题。我想在 iPad 应用程序中嵌入视频，类似于美联社 iPad 应用程序处理视频的方式。

显然，您可以在 OS 3.2 及更高版本中执行此类嵌入视频。Apple 的 MPMoviePlayerController 文档描述了如何做到这一点：

[http://developer.apple.com/iphone/library/documentation/MediaPlayer/Reference/MPMoviePlayerController_Class/MPMoviePlayerController/MPMoviePlayerController.html](http://developer.apple.com/iphone/library/documentation/MediaPlayer/Reference/MPMoviePlayerController_Class/MPMoviePlayerController/MPMoviePlayerController.html)

# delphi - 为什么 StrToInt('X5') 在 Delphi 中返回 5？

> ID：883809
> 
> 赞同：6
> 
> 时间：2009-05-19T16:31:41.320
> 
> 标签：delphi

为什么 StrToInt('X5') 在 Delphi 中返回 5？X 是科学记数法还是类似的东西？是否还有其他一些字符也会转换为整数？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-19T16:34:47.340

不知道 Delphi，我敢打赌“X”会导致函数假定该值是十六进制的。由于 0x5 == 5，它似乎正在工作。试试X10，看看你能不能回到16。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-20T09:48:35.997

在 Delphi 中，十六进制值用 $ 前缀标记：

```
a := $10;  // => a = 16 
```

但由于在其他一些语言（例如 C）中，X 用于标记十六进制值，因此 StrToInt 函数同时支持 $ 和 X 前缀，因此下面的两个代码都返回 16：

```
a := StrToInt('x10'); // => a = 16

a := StrToInt('$10'); // => a = 16 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T16:34:09.103

这是十六进制表示法。试试 XF 看看它返回 15。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T16:36:14.453

可能是[十六进制](http://en.wikipedia.org/wiki/Hexadecimal)表示法。

X 表示后面的数字是十六进制 (0-9 + AF)。

# python - Django 应用程序中的 datetime.now() 变坏了

> ID：883823
> 
> 赞同：7
> 
> 时间：2009-05-19T16:34:03.783
> 
> 标签：python, django, apache, datetime, mod-wsgi

部署 Django 应用程序后，我遇到了一些问题。我在 ubuntu 服务器上使用 Apache + mod-wsgi。在我重新启动服务器一段时间后，时间变为 foobar，大约 -10 小时是错误的。我制作了一个 Django 视图，如下所示：

```
def servertime():
  return HttpResponse( datetime.now() ) 
```

在我重新启动服务器并检查显示该视图的 url 后，它首先看起来没问题。然后在某一时刻，它有时给出正确的时间，有时不给出，后来它总是给出错误的时间。服务器时间是正确的。

有什么线索吗？我用谷歌搜索它没有运气。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T16:48:05.500

我也可以看看你的 urls.py 吗？

类似的行为曾经让我难过一次……

结果是我的 urls.py 调用视图的方式。Python 运行了一次 datetime.now() 并将其存储起来以备将来调用，再也不会真正调用它。这就是为什么 django 开发人员必须实现将函数而不是函数调用传递给模型默认值的能力，因为它将采用函数的第一次调用并使用它，直到重新启动 python。

您的行为听起来第一次是正确的，因为它是第一次调用视图。有时它是不正确的，因为它再次获得了相同的日期。然后它再次随机正确，因为您的 apache 可能为它启动了另一个工作进程，并且当您在处理请求的进程之间被反弹时，可能会发生这种疯狂。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-07-02T16:32:36.927

我发现将 wsgi 置于守护程序模式是可行的。不知道为什么，但确实如此。似乎一些新创建的进程把时间搞砸了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-12-06T17:06:24.613

当您的类被实例化时， datetime.now() 可能会被评估一次。尝试删除括号，以便返回函数 datetime.now 并对其进行评估。我在为我的 DateTimeFields 设置默认值时遇到了类似的问题，并[在此处](http://david.feinzeig.com/blog/2011/12/06/how-to-properly-set-a-default-value-for-a-datetimefield-in-django/)编写了我的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-21T00:20:08.687

也许服务器正在服务器启动时评估 datetime.now()，尝试通过模板使其变得惰性或在视图中使用变量。

看看这篇[博文](http://paltman.com/2008/may/07/a-default-bug-in-django/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-05-12T09:18:48.087

Django 根据您的设置变量 TIME_ZONE 设置系统时区。当运行具有不同 TIME_ZONE 设置的多个 Django 实例时，这可能会导致各种混乱。

这就是 Django 所做的：

```
os.environ['TZ'] = self.TIME_ZONE 
```

上面的答案：

> “我发现将 wsgi 置于守护进程模式是可行的”

对我不起作用...

我想我不再使用 TIME_ZONE 中内置的 django 了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T02:12:41.067

您可能需要像这样指定内容类型

```
def servertime():
  return HttpResponse( datetime.now(), content_type="text/plain" ) 
```

另一个想法：

它可能不起作用，因为 datetime.now() 返回一个 datetime 对象。试试这个：

```
def servertime():
  return HttpResponse( str(datetime.now()), content_type="text/plain" ) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-06T09:11:41.103

尝试在 settings.py 中设置您的时区（TIME_ZONE 变量）

这对我有用。

# asp.net - 为什么我的 asp.net 会员登录页面不适用于重定向？

> ID：883830
> 
> 赞同：1
> 
> 时间：2009-05-19T16:35:25.793
> 
> 标签：asp.net, redirect, asp.net-membership, membership-provider, returnurl

我使用 ASP.NET 会员提供程序在我的本地计算机上设置了此会员站点。当我去：

[http://localhost/admin/](http://localhost/admin/)

它把我重定向到

[http://localhost/Login.aspx?ReturnUrl=%2fadmin%2fDefault.aspx](http://localhost/Login.aspx?ReturnUrl=%2fadmin%2fDefault.aspx)

这很好。但是在我输入登录信息后，页面似乎刷新了。它实际上并没有让我登录，它看起来只是刷新了页面。如果我将 URL 更改为：

[http://localhost/Login.aspx](http://localhost/Login.aspx)

它工作正常。它让我没有问题，并将我重定向到我的默认页面。我还检查了现场网站，它也做了同样的事情。有任何想法吗？提前致谢！

编辑：这是标记：

```
<asp:Login ID="Login1" runat="server" CssClass="LoginBox" TitleText="Please Log In">
    <LayoutTemplate>
        <h2>
            Please Log In:</h2>
        <p runat="server" id="FailureText" visible="false">
            Either your email address or password was incorrect. Please try again.</p>
        <strong>Email</strong><br />
        <asp:TextBox ID="UserName" runat="server"></asp:TextBox>
        <asp:RequiredFieldValidator ID="UserNameRequired" runat="server" ControlToValidate="UserName"
            Text="*"></asp:RequiredFieldValidator>
        </p>
        <p>
            <strong>Password</strong><br />
            <asp:TextBox ID="Password" runat="server" TextMode="Password"></asp:TextBox>
            <asp:RequiredFieldValidator ID="PasswordRequired" runat="server" ControlToValidate="Password"
                Text="*"></asp:RequiredFieldValidator>
        </p>
        <p>
            <asp:Button ID="Login" CommandName="Login" runat="server" Text="Log In" /></p>
        <p>
            Please <a runat="server" id="Link_ContactUs">contact </a>an administrator if you
            are having trouble logging in or have forgotten your password.</p>
    </LayoutTemplate>
</asp:Login> 
```

web.config 设置：

```
<authentication mode="Forms">
  <forms loginUrl="/Login.aspx"
         protection="All"
         timeout="60"
         name="AppNameCookie"
         path="/Admin"
         requireSSL="false"
         slidingExpiration="true"
         defaultUrl="/Admin/Default.aspx"
         cookieless="UseCookies"
         enableCrossAppRedirects="false" />
</authentication> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T16:52:15.463

你能给我们看一些代码吗？如果你使用`FormsAuthentication.RedirectFromLoginPage`方法，你应该得到你想要的。你`FormsAuthentication.SetAuthCookie`改用了吗？

### 更新

更改为`path="/Admin"`_`web.config``path=/`

它不起作用的原因是您的身份验证 cookie 仅设置在`/Admin`路径中，并且您的浏览器将 URL 视为区分大小写，因此它不会将身份验证 cookie 发送回`/admin/Default.aspx`页面（小写`admin`）。

# javascript - 哪些脚本语言类似于 ECMA？

> ID：883835
> 
> 赞同：1
> 
> 时间：2009-05-19T16:36:20.567
> 
> 标签：javascript, actionscript-3, dynamic-languages, scripting-language, ecma262

我正在寻找一种 ECMAScript 替代方案来作为自定义应用程序逻辑的脚本语言。我喜欢 ECMA 的某些方面，尤其是新规范（如 AS3）的语法。

不幸的是，AS3 引擎不是开源的，无法集成到项目中。我想要一种专为面向对象使用而设计的脚本语言。

具体来说，是否有一种语言具有：

*   静态类型变量（可选）
*   类，包括公共/私人成员
*   继承，包括接口
*   套餐（可选）
*   简洁的语法
*   必须能够作为应用程序的内部脚本语言（如浏览器的 Javascript）进行接口，不能是外部系统调用。

我宁愿没有的事情

*   凌乱的 ECMA`prototype`对象

您知道哪些语言适合此配置文件？我很难找到一种为良好的面向对象设计而设计的优质脚本语言。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T17:16:23.687

在 Java 中，最好的 ECMAScript (Javascript) 选项是嵌入[Rhino](http://www.mozilla.org/rhino/)。我不认为基于原型的继承是一个交易杀手，因为只要有一点纪律，你就可以让它表现得几乎像基于类的继承。

如果您想要与 Java 非常紧密地互操作的东西，请选择[Groovy](http://groovy.codehaus.org/)。如果您需要 JVM 兼容性，还可以查看[Jython](http://www.jython.org/Project/)（JVM 上的 Python）、[Jruby](http://jruby.codehaus.org/)（JVM 上的 Ruby）和[Scala](http://www.scala-lang.org/)（JVM 上的函数式语言）。如果您不关心 Java 和 JVM 兼容性，请查看[Ruby](http://www.ruby-lang.org/en/)、[Python](http://www.python.org/)和[Erlang](http://erlang.org/)。 [Clojure](http://clojure.org/)是 JVM 上的 Lisp 方言。

更进一步，TCL（工具命令语言）允许您在 C/C++ 代码中嵌入解释器，有许多可嵌入的 Lisp 和 Scheme 解释器等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T17:17:17.213

如果您想要一种像 ECMAScript 一样工作的脚本语言，为什么不使用 ECMAScript？有很多开源实现，只要看看[Wikipedia](http://en.wikipedia.org/wiki/List_of_ECMAScript_engines)上的列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T17:08:26.100

我会推荐 Python 或 Ruby。两者都不像 ECMA，但我是在 JavaScript 之后学习它们的，而且它们很快就学会了。此外，它们是更强大的语言，使其成为在应用程序中使用 JavaScript 引擎（Rhino for Java）的更好选择。

## Python

*   强制使用干净的语法（几乎像 English `while is not False:`）
*   多重继承（无接口）
*   可以使用 C/C++ 扩展解释器（如果需要，可能用于您的适配器）

## 红宝石

*   语法应该接近英语（`unless`条件，`until`循环）
*   一切都是对象
*   仅支持单继承，但使用 Mixins 添加功能

## 两个都

*   课程
*   可以嵌入到另一个应用程序中
*   私人会员
*   套餐

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T17:27:27.277

[Lua](http://www.lua.org/) - 你想要的一切以及更多在 ~100KB 中

有关Lua 和其他提到的语言之间的比较，请参阅[此页面。](http://lua-users.org/wiki/LuaComparison)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-19T20:20:21.357

Haxe on Neko 看起来正是您想要的。我不知道 nekovm 的可嵌入性如何，但它是开源的，所以你可以摆弄它。[http://haxe.org](http://haxe.org)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-19T16:58:58.827

[Ruby](http://www.ruby-lang.org/en/)解释器也可以嵌入到 C 程序中，并且可能被某些人认为比 Python 更面向对象。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-19T17:39:47.793

我们使用 ECMAscript 作为我工作的软件产品的扩展语言，它运行良好。作为一种标准（和流行）语言，很高兴能够将我们的用户指向该语言的大量现成文档。我们构建了自己的 ECMAscript 编译器，它可以为我们运行的平台转换成字节码，但如果我重来一遍，我会认真考虑嵌入 Google 的 V8 ECMAscript 引擎（事实上，我什至会考虑构建我们的整个应用程序）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-19T16:43:48.067

我会选择一些相当主流的东西来简化事情。阅读您的要求后，我推荐[Python](http://docs.python.org/3.0/extending/embedding.html)。它实际上并没有 Java/C# 方式的接口，但它也不需要它们。除此之外，它应该很合适。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-19T17:20:38.847

[QtScript](http://en.wikipedia.org/wiki/QtScript)是 ECMAScript。你没有提到你的应用程序的主要部分是用什么编写的，但我想它不是 Qt，或者你已经知道 QtScript。

# http - 为什么现实世界的服务器更喜欢 gzip 而不是 deflate 编码？

> ID：883841
> 
> 赞同：68
> 
> 时间：2009-05-19T16:38:52.423
> 
> 标签：http, encoding, compression, gzip, deflate

我们已经知道[deflate 编码在](https://stackoverflow.com/questions/388595/why-use-deflate-instead-of-gzip-for-text-files-served-by-apache)编码速度、解码速度和压缩大小方面胜过 gzip。

那么为什么没有大型网站（我能找到）发送它（当我使用接受它的浏览器时）？

[雅虎声称](http://developer.yahoo.com/performance/rules.html#gzip)通货紧缩“效果较差”。为什么？

我维护喜欢放气的 HTTP 服务器软件，所以我想知道是否有一些非常好的理由不继续这样做。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2009-10-16T18:01:35.613

规范和 HTTP 之间的命名存在一些混淆：

*   *[RFC 1951](https://www.rfc-editor.org/rfc/rfc1951)定义的*DEFLATE*是一种**压缩数据格式**。*
**   *[RFC 1950](https://www.rfc-editor.org/rfc/rfc1950)定义的*ZLIB*是一种使用*DEFLATE数据格式的***压缩数据**格式。****   *[RFC 1952](https://www.rfc-editor.org/rfc/rfc1952)定义的*GZIP*是一种使用*DEFLATE*压缩数据格式的**文件格式。******

 ***但是[HTTP 使用不同的命名](https://www.rfc-editor.org/rfc/rfc2616#section-3.5)：

> *   **`gzip`**由文件压缩程序“gzip”（GNU zip）生成的编码格式，如 RFC 1952 [25] 中所述。此格式是具有 32 位 CRC 的 Lempel-Ziv 编码 (LZ77)。
>     
>     
> *   **`deflate`**RFC 1950 [31] 中定义的“zlib”格式与 RFC 1951 [29] 中描述的“deflate”压缩机制相结合。

所以总结一下：

*   `gzip`是*GZIP*文件格式。
*   `deflate`其实就是*ZLIB*数据格式。（但有些客户端也接受实际的*DEFLATE*数据格式`deflate`。）

另请参阅[关于*“gzip”和“deflate”HTTP 1.1 编码有什么区别？*](https://zlib.net/zlib_faq.html#faq39)：

> *“gzip”和“deflate”HTTP 1.1 编码有什么区别？*
> 
> “gzip”是gzip格式，“deflate”是zlib格式。他们可能应该将第二个称为“zlib”，以避免与原始 deflate 压缩数据格式混淆。虽然 HTTP 1.1 RFC 2616 正确地指向 RFC 1950 中的 zlib 规范以进行“deflate”传输编码，但有报告称服务器和浏览器根据 RFC 1951 中的 deflate 规范错误地生成或期望原始 deflate 数据，最值得注意的是 Microsoft . 因此，即使使用 zlib 格式的“deflate”传输编码将是更有效的方法（实际上正是 zlib 格式的设计目的），但由于不幸的选择，使用“gzip”传输编码可能更可靠HTTP 1.1 作者的名字。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-21T15:48:16.733

从我的最小测试来看，大多数 HTTPd 都是：

1.  不支持即时放气：Apache 的 mod_deflate（一个惊喜），GWS
2.  或者更喜欢发送 gzip：IIS、lighttpd 的 mod_compress

因此，要在最流行的服务器 (Apache) 上发送 deflate，您必须维护预编码文件并使用 mod_negotiate（您甚至可能必须使用类型映射来选择 deflate）。

我猜，由于这种麻烦，deflate 很少使用，因此客户端 deflate 支持中比 gzip 支持中*更可能*存在错误。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-10-16T17:32:22.613

查看此网站以获取更多信息： [http ://web.archive.org/web/20120321182910/http://www.vervestudios.co/projects/compression-tests](http://web.archive.org/web/20120321182910/http://www.vervestudios.co/projects/compression-tests)

* * *

根据规范，Deflate 实际上是[zlib](http://zlib.net/)（一种专门为在网络上流式传输内容而开发的压缩格式）......它是 deflate 的包装器。

但是，Internet Explorer 错误地将 HTTP 1.1 deflate (zlib) 实现为原始 deflate。因此，如果您的服务器向 IE 发送正确的 HTTP 1.1 deflate (zlib) 内容，它就会窒息。

*我已经对该主题进行了一些研究，并且始终将原始*deflate 发送到现代浏览器看起来很安全……只要确保它实际上是*原始*的而不是 zlib。

查看这篇文章了解更多信息 > [Gzip vs Deflate (zlib) revisited](https://stackoverflow.com/questions/1574168/gzip-vs-deflate-zlib-revistited)。

所以我认为有充分的理由继续通过 gzip 发送 deflate。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-05-19T16:42:44.963

据我所知（免责声明：我不是这里的专家，只是我听说的），`gzip`使用相同的算法，`deflate`但它有更多的标题内容，使其具有更大的大小（相对于`deflate`）。但是，我认为`deflate`受到较少客户和代理的支持。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T16:48:39.290

我想知道同样的事情:)。我认为这可能与旧版（可能是古老的）浏览器的兼容性有关。我在某处读到，旧版浏览器更有可能在某些情况下使用 mod_gzip 压缩的压缩内容（？），但谷歌搜索这让我得出结论，最好停止搜索它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-01-18T12:59:25.960

ActionScript 3 具有原生 deflate 支持，但对于 gzip，您需要使用外部库

# svn - Subversion - 如何将一些变更集从主干移动到分支？

> ID：883844
> 
> 赞同：10
> 
> 时间：2009-05-19T16:40:10.533
> 
> 标签：svn

我们有一个带有多个子项目的大型项目。我们正在接近我们项目的发布，一个子项目中的新功能不会按原计划在发布之前完成。我想做的是将与新功能相关的子项目的所有更改移动到一个单独的分支中，以继续为下一个版本工作，但我不确定如何最好地实现这一点。

情况基本上是：

```
/项目/主干/A/
/项目/主干/B/
/项目/主干/C/
```

自上次发布以来，我们已签入 a..z 修订版。修订版 d、f、g 和 j..n 包含与 C 中的新功能相关的工作，该功能不会及时完成。修订版 e、h 和 q 包含 C 中不相关的更改，这些更改需要在此版本中进行。我想创建 a`/proj/branches/new-feature-for-C/`并将更改 d、f、g 和 j..n 移动到那里，同时将 e、h 和 q 保留在后备箱中。要移动到分支的更改与要保留在主干上的更改之间没有重叠，并且要移动到分支的更改不依赖于自上次发布以来任何其他子项目中的任何更改。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-19T17:41:54.107

我会这样做：将主干复制到分支，然后反向合并更改集。

所以如果主干在`http://svnserver/svn/myrepo/trunk/C` 并且不需要的更改集是`3, 6 , 9-11`

```
svn copy http://svnserver/svn/myrepo/trunk/C http://svnserver/svn/myrepo/branch/C -m "Branch no completable work"
svn merge -c -3,-6 http://svnserver/svn/myrepo/trunk/C <filepath to root of trunk>
svn merge -r 11:8 http://svnserver/svn/myrepo/trunk/C <filepath to root of trunk>
****CHECK EVERY THING WORKED***
svn commit . -m "Removed some changes that weren't to be finished" 
```

请注意，它`-r 11:8`比您要停止的变更集小一

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T16:45:27.970

这并不能回答您的问题，但是将来您应该首先在不同的分支上开发每个子项目。只有当子项目完成并准备好发布时，它才应该合并到主干中。这样，主干始终处于可发货状态。

唯一的挑战是两个不同的子项目是否需要共享一些相同的新代码。Subversion 使该案例具有挑战性，但其他版本控制系统（例如 Git、Mercurial 和 Bazaar）使该案例变得容易。

至于回答您的实际问题，以下 URL 解释了如何撤消特定的修订号：

[http://svnbook.red-bean.com/en/1.5/svn-book.html#svn.branchmerge.basicmerging.undo](http://svnbook.red-bean.com/en/1.5/svn-book.html#svn.branchmerge.basicmerging.undo)

我想你可以分支你的整个树干。然后，该分支将拥有所有子项目（包括您正在交付的项目和尚未准备好的项目）。而且，您可以将上面链接中的技术一遍又一遍地应用到主干上，以便为您想要撤消的每个修订。听起来会很乏味和混乱，但它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T16:53:28.333

有很多方法可以设置 repos，但我通常这样做的方式是这样的。

```
trunk - always tracks the latest code in development that will definitely get released
branches/R1 - when I do a release, I create a branch for it, and also a tag (see below R1.0). This branch always tracks the latest version of Release 1.x. If I need to go back, I use the tags, below.
branches/Import Tool - when I am working on a standalone feature that may not get released with latest code (e.g., main product is a calendar, import tool may not be ready in time).
tags/R1.0
tags/R1.1 - every time I release an update to a release, I create a tag, so that I can easily revert to that version e.g., if I need to reproduce a bug
tags/R1.2 
```

当我在最新代码（主干）中发现错误时，如有必要，我会将其合并回当前发布分支（例如，branchs/R1）。

你不想创建太多的分支，因为它会导致从主干合并更多的工作，所以保持分支的数量尽可能少。

# ruby-on-rails - 通过 adam 访问域用户

> ID：883851
> 
> 赞同：1
> 
> 时间：2009-05-19T16:41:09.520
> 
> 标签：ruby-on-rails, authentication, ldap, adam

我正在使用 redmine（rails 票证管理），我希望用户能够使用他们的网络用户和密码登录。

我遵循了 Microsoft 的 ADAM 分步指南，并在我的本地计算机上设置了一个 ADAM 实例。

[http://www.microsoft.com/downloads/details.aspx?familyid=5163B97A-7DF3-4B41-954E-0F7C04893E83&displaylang=en](http://www.microsoft.com/downloads/details.aspx?familyid=5163B97A-7DF3-4B41-954E-0F7C04893E83&displaylang=en)

[http://www.microsoft.com/downloads/details.aspx?displaylang=es&FamilyID=9688f8b9-1034-4ef6-a3e5-2a2a57b5c8e4](http://www.microsoft.com/downloads/details.aspx?displaylang=es&FamilyID=9688f8b9-1034-4ef6-a3e5-2a2a57b5c8e4)

我已经设法创建了几个亚当帐户，设置了他们的密码，并且我可以从 rails 应用程序连接到他们。

我必须在 redmine 中输入以下 conf：

```
主机：本地主机
端口：369
帐户：CN=admin,OU=ADAM users,O=Microsoft,C=US（我创建的一个亚当管理员帐户）
密码：xxx
基础 DN：O=Microsoft,C=US（取自逐步指南）

映射到登录名的属性：name

```

问题是我希望能够检查域用户，而不是我手动添加到亚当数据库的用户......

所以，我已经可以连接到 ldap 服务器，如何使用它来验证域帐户？

有没有办法做到这一点？？？

-- Windows XP SP3

亚当 sp1

redmine 0.8.3

ruby 1.8.6 (2008-08-11 补丁级别 287) [i386-mswin32]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T16:47:11.680

您想要[**“代理身份验证”。**](http://technet.microsoft.com/en-us/magazine/dd228991.aspx)

链接描述如下（我的编辑评论以粗体显示）：

> **什么是代理身份验证？**代理身份验证允许用户执行与 AD LDS **（又名 ADAM）** 实例的简单绑定，同时仍保持与 Active Directory 帐户的关联。

另请参阅以下链接中的“通过 ADAM 代理对象绑定”部分： [**在 ADAM 中管理身份验证**](http://technet.microsoft.com/en-us/library/cc784622.aspx)

# ruby-on-rails - Rails / ActiveRecord：字段标准化

> ID：883863
> 
> 赞同：4
> 
> 时间：2009-05-19T16:44:53.213
> 
> 标签：ruby-on-rails, activerecord, model

我正在尝试从模型中的字段中删除逗号。我希望用户键入一个数字，即 10,000，并且该数字应作为 10000 存储在数据库中。我希望我可以进行一些模型端规范化以删除逗号。我不想依赖视图或控制器来正确格式化我的数据。

我试过了：

```
before_validation :normalize

def normalize 
 self['thenumber'] = self['thenumber'].to_s.gsub(',','')
end 
```

没有工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2010-08-18T18:46:57.960

[http://github.com/mdeering/attribute_normalizer](http://github.com/mdeering/attribute_normalizer)看起来像是解决这个常见问题的有希望的解决方案。以下是主页中的一些示例：

```
 # By default it will strip leading and trailing whitespace
  # and set to nil if blank.
  normalize_attributes :author, :publisher

  # Using one of our predefined normalizers.
  normalize_attribute  :price, :with => :currency

  # You can also define your normalization block inline.
  normalize_attribute :title do |value|
    value.is_a?(String) ? value.titleize.strip : value
  end 
```

因此，在您的情况下，您可能会执行以下操作：

```
 normalize_attribute :title do |value|
    value.to_s.gsub(',', '')
  end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-19T19:38:11.007

我认为你做对了。该测试通过：

```
test "should remove commas from thenumber" do
  f = Foo.new(:thenumber => "10,000")
  f.save
  f = Foo.find(f.id)
  assert f.thenumber == "10000"    
end 
```

我使用了你的代码。

```
 class Foo < ActiveRecord::Base
  before_validation :normalize

  def normalize 
    self['thenumber'] = self['thenumber'].to_s.gsub(',','')
  end

 end 
```

现在，我的模式设置为数字是一个字符串，而不是一个整数。

```
Started
.
Finished in 0.049666 seconds.

1 tests, 1 assertions, 0 failures, 0 errors 
```

如果您想将其作为整数存储在数据库中，那么您肯定需要覆盖 setter：

```
 def thenumber=(value)
   self['thenumber'] = value.to_s.gsub(',','').to_i
 end 
```

如果您按照自己的方式使用整数列，它会被 AR 截断......

```
>> f.thenumber = "10,000"
=> "10,000"
>> f.thenumber
=> 10 
```

对于 Ruby 和整数来说，这是一个鲜为人知的事情……它通过截断任何不再是整数的东西来自动转换。

```
irb(main):004:0> i = "155-brian-hogan".to_i
=> 155 
```

对于像这样的事情可能很酷

```
/users/155-brian-hogan

@user = User.find_by_id(params[:id]) 
```

但对你正在做的事情来说并不那么酷。

因此，要么将 col 更改为字符串并使用过滤器，要么更改 setter :)

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T18:20:37.713

这样做的问题是，有一段时间，对象中会存在非规范化的东西；如果你有代码在东西被规范化之前对属性起作用，那么这将是一个问题。

你可以定义一个setter：

```
def thenumber=(value)
  # normalise stuff here, call write_attribute
end 
```

不幸的是，我认为很多 Rails 表单的东西直接写属性，这是我不倾向于使用它的原因之一。

或者，您可以在传递控制器中的参数之前对其进行规范化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-05-11T20:01:04.943

You should return true from your before_validation method, otherwise if the expression being assigned to self['thenumber'] ends up being nil or false, the data will not be saved, per the Rails documention:

> If a before_* callback returns false, all the later callbacks and the associated action are cancelled.

Ostensibly, you are trying to normalize here then check the result of the normalization with your Rails validations, which will decide if nil/false/blank are okay or not.

```
before_validation :normalize

def normalize 
  self['thenumber'] = self['thenumber'].to_s.gsub(',','')
  return true
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T16:58:52.290

ruby 是否让您在 . 和 [''] ？我不知道，我稍后再试，但我认为你应该使用 .

```
self.thenumber = self.thenumber.to_s.gsub(',','') 
```

# algorithm - 比较单词的算法（不按字母顺序）

> ID：883867
> 
> 赞同：5
> 
> 时间：2009-05-19T16:45:48.313
> 
> 标签：algorithm, string, search, statistics, pattern-matching

我需要为某个要求编写一个解决方案，我想知道是否有人熟悉可以实现它的现成库，或者可以指导我最佳实践。描述：

用户输入一个应该是几个固定选项之一的单词（我将选项保存在一个列表中）。我知道输入必须在列表中的成员中，但由于是用户输入，他/她可能犯了错误。我正在寻找一种算法，它可以告诉我用户最可能的意思是什么。我没有任何上下文，我不能强迫用户从列表中选择（即他必须能够自由地手动输入单词）。

例如，假设列表包含单词“water”、“quartz”、“beer”、“beet”、“hell”、“hello”和“aardvark”。

解决方案必须考虑不同类型的“正常”错误：

*   速度拼写错误（例如双字符、删除字符等）
*   键盘相邻字符拼写错误（例如“水”的“qater”）
*   非母语英语拼写错误（例如，“quater”代表“季度”）
*   等等...

显而易见的解决方案是逐个字母进行比较，并对每个不同的字母、多余的字母和缺失的字母给予“惩罚权重”。但是这个解决方案忽略了我确定在某处列出的数千个“标准”错误。我确信有一些启发式方法可以处理所有特定和一般情况，可能使用标准不匹配的大型数据库（我对数据密集型解决方案持开放态度）。

我正在用 Python 编码，但我认为这个问题与语言无关。

有什么建议/想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-19T16:49:41.367

您想了解谷歌如何做到这一点：http: [//norvig.com/spell-correct.html](http://norvig.com/spell-correct.html)

编辑：有些人提到了定义用户给定词和候选词（levenshtein，soundex）之间度量的算法。然而，这并不是问题的完整解决方案，因为还需要一个数据结构来有效地执行非欧几里得最近邻搜索。这可以通过封面树来完成：http: [//hunch.net/~jl/projects/cover_tree/cover_tree.html](http://hunch.net/~jl/projects/cover_tree/cover_tree.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-19T16:51:18.820

一个常见的解决方案是计算输入和固定文本之间的[Levenshtein 距离。](http://en.wikipedia.org/wiki/Levenshtein_distance)两个字符串的 Levenshtein 距离只是将一个字符串转换为另一个字符串所需的简单操作的数量——单个字符的插入、删除和替换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T16:49:57.887

您是否考虑过通过语音进行比较的算法，例如[soundex](http://en.wikipedia.org/wiki/Soundex)？生成单词列表的 soundex 表示，存储它们，然后获取用户输入的 soundex 并在那里找到最接近的匹配项应该不会太难。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T09:04:27.287

如果您的数据集真的很小，那么简单地比较所有项目的 Levenshtein 距离就足够了。但是，如果它更大，则需要使用[BK-Tree](http://blog.notdot.net/2007/4/Damn-Cool-Algorithms-Part-1-BK-Trees)或类似的索引系统。我链接到的文章描述了如何在给定的 Levenshtein 距离内查找匹配项，但适应最近邻搜索相当简单（留给读者作为练习；）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T16:56:43.540

寻找Bitap算法。它非常适合您想要做的事情，甚至还附带了维基百科中的源代码示例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T16:54:49.470

尽管它可能无法解决整个问题，但您可能需要考虑使用 soundex 算法作为解决方案的一部分。对“soundex”和“python”的快速谷歌搜索显示了该算法的一些 python 实现。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T16:55:22.123

尝试搜索“Levenshtein distance”或“edit distance”。它计算将一个单词转换为另一个单词所需的编辑操作（删除、插入、更改字母）的数量。这是一种常见的算法，但根据问题，您可能需要针对不同类型的拼写错误使用不同权重的特殊算法。

# php - 忽略 PHP 错误，同时仍打印自定义错误消息

> ID：883870
> 
> 赞同：0
> 
> 时间：2009-05-19T16:47:48.683
> 
> 标签：php, error-handling

所以：

```
@fopen($file); 
```

忽略任何错误并继续

```
fopen($file) or die("Unable to retrieve file"); 
```

忽略错误，终止程序并打印自定义消息

有没有一种简单的方法可以忽略函数中的错误，打印自定义错误消息而不杀死程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T16:51:27.790

通常：

```
if (!($fp = @fopen($file))) echo "Unable to retrieve file"; 
```

或使用您的方式（丢弃文件句柄）：

```
@fopen($file) or printf("Unable to retrieve file"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-19T16:51:43.517

使用例外：

```
try {
   fopen($file);
} catch(Exception $e) {
   /* whatever you want to do in case of an error */
} 
```

更多信息请访问[http://php.net/manual/language.exceptions.php](http://php.net/manual/language.exceptions.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T17:26:11.053

**slosd**的方式行不通。**fopen**不会抛出异常。您应该手动将其修改我将修改您的第二个示例并将其与**slosd**结合起来：

```
try
{
    if (!$f = fopen(...)) throw new Exception('Error opening file!');
} 
catch (Exception $e)
{
    echo $e->getMessage() . ' ' . $e->getFile() . ' at line ' . $e->getLine;
}
echo ' ... and the code continues ...'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T17:49:56.313

这是我自己的解决方案。请注意，它需要脚本级别的全局变量或类的静态变量，以便于参考。我写了它的类样式供参考，但只要它可以找到数组就可以了。

```
class Controller {
  static $errors = array();
}

$handle = fopen($file) or array_push(Controller::errors,
  "File \"{$file}\" could not be opened.");

 // ...print the errors in your view 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T16:52:25.747

您可以抛出异常并以您认为合适的任何方式集中处理错误，而不是死掉：-)

# java - CodeReview：java Dates diff（以天为单位）

> ID：883871
> 
> 赞同：2
> 
> 时间：2009-05-19T16:47:52.663
> 
> 标签：java, datetime

请您对以下代码发表意见。

我需要计算 2 个 Date 对象之间的天数差异。可以确保两个 Date 对象都在同一个 TimeZone 内。

```
public class DateUtils {
public final static long DAY_TIME_IN_MILLIS = 24 * 60 * 60 * 1000;

/**
 * Compare between 2 dates in day resolution.
 * 
 * @return positive integer if date1 > date2, negative if date1 < date2\. 0 if they are equal.
 */
public static int datesDiffInDays(final Date date1, final Date date2){
    long date1DaysMS = date1.getTime() - (date1.getTime() % DAY_TIME_IN_MILLIS);
    long date2DaysMS = date2.getTime() - (date2.getTime() % DAY_TIME_IN_MILLIS);

    long timeInMillisDiff = (date1DaysMS - date2DaysMS);
    int ret = (int) (timeInMillisDiff / DAY_TIME_IN_MILLIS); 
    return ret;
} 
```

你能指出一个我可能错过的问题吗？

编辑：@mmyers 询问是否通过了我的单元测试。嗯，是。但我对约会没有真正的经验，我知道这是一个很大的话题。发布在我正在使用的单元测试下方。

```
public class TestMLDateUtils {

@Test
public final void testDatesDiffInDays() {
    TimeZone.setDefault(TimeZone.getTimeZone("UTC"));

    // 00:00:00.000 1.1.1970
    Calendar cal1970 = Calendar.getInstance();
    cal1970.setTimeInMillis(0);

    Calendar tested = Calendar.getInstance();
    tested.setTimeInMillis(0);

    // Add 1 millisecond, date = 00:00:00.001 1.1.1970
    tested.add(Calendar.MILLISECOND, 1);

    assertTrue(DateUtils.datesDiffInDays(cal1970.getTime(), tested.getTime()) == 0);

    // Add 1 second, date = 00:00:01.001 1.1.1970
    tested.add(Calendar.SECOND, 1);
    assertTrue(DateUtils.datesDiffInDays(cal1970.getTime(), tested.getTime()) == 0);

    // Add 1 minute, date = 00:01:01.001 1.1.1970
    tested.add(Calendar.MINUTE, 1);
    assertTrue(DateUtils.datesDiffInDays(cal1970.getTime(), tested.getTime()) == 0);

    // Add 1 hour, date = 01:01:01.001 1.1.1970
    tested.add(Calendar.HOUR_OF_DAY, 1);
    assertTrue(DateUtils.datesDiffInDays(cal1970.getTime(), tested.getTime()) == 0);

    // date = 23:59:59.999 1.1.1970
    tested.setTimeInMillis(0);
    tested.add(Calendar.MILLISECOND, 999);
    tested.add(Calendar.SECOND, 59);
    tested.add(Calendar.MINUTE, 59);
    tested.add(Calendar.HOUR_OF_DAY, 23);
    //System.out.println("D: " + tested.getTime());
    assertTrue(DateUtils.datesDiffInDays(cal1970.getTime(), tested.getTime()) == 0);

    // date = 00:00:00.000 2.1.1970
    tested.setTimeInMillis(0);
    tested.add(Calendar.DAY_OF_MONTH, 1);
    assertTrue(DateUtils.datesDiffInDays(cal1970.getTime(), tested.getTime()) == -1);
    assertTrue(DateUtils.datesDiffInDays(tested.getTime(), cal1970.getTime()) == 1);

    // date = 00:00:00.001 2.1.1970
    tested.add(Calendar.MILLISECOND, 1);
    assertTrue(DateUtils.datesDiffInDays(cal1970.getTime(), tested.getTime()) == -1);
    assertTrue(DateUtils.datesDiffInDays(tested.getTime(), cal1970.getTime()) == 1);

    // date = 00:00:01.001 2.1.1970
    tested.add(Calendar.SECOND, 1);
    assertTrue(DateUtils.datesDiffInDays(cal1970.getTime(), tested.getTime()) == -1);
    assertTrue(DateUtils.datesDiffInDays(tested.getTime(), cal1970.getTime()) == 1);

    // date = 00:01:01.001 2.1.1970
    tested.add(Calendar.MINUTE, 1);
    assertTrue(DateUtils.datesDiffInDays(cal1970.getTime(), tested.getTime()) == -1);
    assertTrue(DateUtils.datesDiffInDays(tested.getTime(), cal1970.getTime()) == 1);

    // date = 01:01:01.001 2.1.1970
    tested.add(Calendar.HOUR_OF_DAY, 1);
    assertTrue(DateUtils.datesDiffInDays(cal1970.getTime(), tested.getTime()) == -1);
    assertTrue(DateUtils.datesDiffInDays(tested.getTime(), cal1970.getTime()) == 1);

    // date = 13:01:01.001 2.1.1970
    tested.add(Calendar.HOUR_OF_DAY, 12);
    assertTrue(DateUtils.datesDiffInDays(cal1970.getTime(), tested.getTime()) == -1);
    assertTrue(DateUtils.datesDiffInDays(tested.getTime(), cal1970.getTime()) == 1);
}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-19T17:02:42.003

*   直接问题：由于夏令时更改，天数可能少于或多于 24 小时。

*   第二个问题：通常当人们以天为单位思考时，他们真正的意思是“人日”而不是“24 小时的周期”。换句话说，很多人会说第二天早上7点到早上7点相差一天，而当天早上7点到晚上7点相差0天。两者都是12小时。那时，您确实需要知道正在考虑的日历。

当然，这可能对您的情况无关紧要，但我们并不真正知道那是什么。

*   第三个问题：您使用的是内置日历 API 而不是[Joda Time](http://joda-time.sourceforge.net/)。这几乎从来都不是一个好主意——这太可怕了，而且充满了陷阱和问题。是的，这里的常客会告诉你，当谈到 Java 日期和时间时，这*始终是我回答的一部分——而且有充分的理由。*这真的很重要。

编辑：您的测试将默认时区设置为 UTC。这不是一个好主意（尤其是没有在 finally 语句中重置它）。时区很棘手，但您应该真正考虑一下您拥有哪些值，它们的含义以及涉及哪些时区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T17:09:23.587

Date 对象中的时区（如果有）是无关紧要的，因为您使用的是`getTime()`; “[r] 返回自 1970 年 1 月 1 日 00:00:00 GMT 以来此 Date 对象表示的毫秒数。”

但是，您没有考虑闰秒，某些实现可能会返回。因此，如果您给出的日期范围中有一个或多个闰秒，并且您的时间足够接近一天中的同一时间，那么您的计算可能会错误一天。也就是说，似乎没有办法查看任何特定的实现是否考虑了闰秒（我希望大多数人不会），而且差异还是非常微不足道的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T17:11:19.683

另一个尚未提及的问题是[闰秒](http://en.wikipedia.org/wiki/Leap_second)。`24 * 60 * 60`由于 UTC 时间的调整以使其与平均太阳年或多或少保持同步，因此天数可能多于或少于几秒。对您的使用可能没什么大不了的，但您至少应该意识到这种可能性。

如果您对处理日期和时间有非常重要的要求，那么您需要一个好的 API。Jon Skeet 的答案中指向 Joda Time 的链接似乎已损坏，因此[这里有一个链接](http://joda-time.sourceforge.net/)有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T17:54:00.783

代码审查有很多方面；让我把注意力集中在风格上，而不是其他人提到的正确性。这当然会比专注于正确性的评论更主观一些。

我会内联“ret”变量。它在不提高可读性的情况下增加了方法的大小。

我会考虑将毫秒和天之间的转换分离到一个单独的函数中。您的全班学生可能会在多个地方执行该划分。即使不是，它也很有帮助，因为它更容易命名只做一件事的函数。

说到命名，我会把函数重命名为“dayDifference”——缩写会导致很多问题，其中最重要的是很难记住在什么情况下使用了哪个缩写。如果你从来没有使用过，那么这种特殊的混乱来源就会被消除。同样，我会将常量重命名为`MILLISECONDS_PER_DAY`.

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2009-05-19T16:57:52.650

Date 已经有了这个方法，在 Javadoc 中查找 Date.compareTo(Date)。

# svn - 在没有用户名或密码的情况下使用 svnant

> ID：883872
> 
> 赞同：3
> 
> 时间：2009-05-19T16:48:00.133
> 
> 标签：svn, ant, svnant

我已经使用命令行 SVN 检查了代码。我有一个我想运行的 Ant 构建脚本，它会在完成后进行提交。

我想用svnant，比如

```
<svn svnkit="false" javahl="false" failonerror="true">
    <commit dir="${dir}" message="${message}"/>
</svn> 
```

但它不起作用并给出此错误

```
[svn] <Commit> started ...
[svn] svn: Commit failed (details follow):
[svn] svn: OPTIONS of 'http://svn.local/path/to/my/proj': authorization failed (http://svn.local)
[svn] <Commit> failed ! 
```

但是，如果我直接执行 exec，就像这样

```
<exec executable="svn">
    <arg line="commit ${dir} -m '${message}'"/>
</exec> 
```

它会正常工作。奇怪的是使用`svnkit="false"`and`javahl="false"`应该让 svnant 使用命令行 svn。

那么这里发生了什么？我不应该在 svnant 调用中指定用户名/密码，因为命令行 svn 显然不需要它（它已被缓存）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T18:00:41.367

简单可靠的解决方案是将所需的 svn 用户名和密码存储在主目录中的 build.properties 文件中，设置权限以使其他用户无法读取它，然后将其加载到您的 ant 脚本中。

我依赖于构建脚本中的身份验证缓存，这很烦人，因为迟早身份验证不会被缓存，或者错误的身份验证会被缓存，当你试图意识到什么是错误的时候，你会浪费时间。或者您可能决定在不同的环境中运行 ant，例如构建服务器，这使得提供 svn 的身份验证缓存变得困难。最好从文件和程序 ant 加载您的身份验证信息，以便在该文件丢失时给出明确的消息。

您还可以尝试使用 svnkit 命令行客户端来缓存您的身份验证，并查看在通过 ant 使用时是否仍然有效。

该线程讨论了相同的问题： http: [//www.nabble.com/svnant-and-authentication-td17865407.html](http://www.nabble.com/svnant-and-authentication-td17865407.html)

# git - 使用单个命令（git push）而不是 FTP 拖放来更新网站

> ID：883878
> 
> 赞同：10
> 
> 时间：2009-05-19T16:49:44.190
> 
> 标签：git, version-control, workflow, sysadmin

情况：

*   我有一个网站的本地副本
*   我有一台可以通过 SSH 访问的服务器

我想做什么？

*   在本地提交，直到我对我的代码感到满意
*   在本地建立分支
*   拥有一个应该推送到服务器的主分支
*   使用单个命令更新网站（git push origin master）

如果我使用 git init 在本地设置了一个 git repo，然后推送到服务器上的一个文件夹，它就不起作用。当我通过 FTP 到服务器检查文件时，它们实际上就在那里。当我 SSH 进入服务器并执行 git status 时，它并不干净，即使它应该是因为我刚刚推送到服务器。

* * *

我正在做的步骤：

1.  在我的电脑上创建一个新文件夹（mkdir folder_x）
2.  进入该文件夹（cd folder_x）
3.  在那里建立一个新的 git 存储库（git init）
4.  （git仓库设置成功）
5.  使用 git push origin master 将存储库推送到服务器（其中 origin 设置为 user:pass@server.tld）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-19T18:03:33.407

您需要编写一个`git checkout -f`在远程 git 存储库收到推送后运行的 post-receive 挂钩。有关详细信息，请参阅[使用 Git 管理网站](http://toroid.org/ams/git-website-howto)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T18:26:52.183

当您推送到 git 存储库时，它不会更新该存储库的工作文件。通常，当您推送时，您应该推送到一个裸存储库——这似乎是他们希望 git push 工作的方式。

对于我的一个（本地）项目，我编写了一个脚本来在我将工作推送到部署存储库时自动检查最新的“ui”子目录。它嵌入在以前的答案中：[使用 Git 开发 Django 项目](https://stackoverflow.com/questions/875698/developing-django-projects-using-git/875720#875720)

如果有人将更新推送到主服务器，您也可以简单地让服务器上的更新后挂钩执行“git reset --hard master”，并使用非裸仓库而不是为签出文件设置单独的区域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T13:34:19.780

我使用此常见问题解答条目中详述的更新后挂钩：http: [//git.or.cz/gitwiki/GitFaq#non-bare](http://git.or.cz/gitwiki/GitFaq#non-bare)

如果您已将远程 repo 配置为“bare”，它将更新您的工作树。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-28T01:38:08.053

Git 版本 1.9.1
Ubuntu 服务器 14.04 LTS
LAMP 服务器

每当我的一位 Web 开发人员将更改推送到服务器时，我都会将我的 LAMP 服务器设置为更新我的 Git 存储库的工作目录。我注意到日志会记录新的提交，但不会更新工作目录。无需为每次更新手动执行此操作（git checkout -f），而是可以在收到推送后自动设置为执行此操作。

1.  在你的“ **.git** ”目录中，进入“ **hooks** ”文件夹。
2.  在“ **hooks** ”文件夹中创建一个名为“ **post-receive** ”的文件，其中包含以下内容：

     ****#!/bin/sh

    # 收到远程客户端推送后更新工作目录。
    # 这应该指向 git 工作目录。

    GIT_WORK_TREE=/var/www/dev_site git checkout -f**** 
***   通过在“hooks”文件夹中键入“ **chmod +x post-receive** ”来启用执行文件的权限。** 

 **现在，当提交被推送到 Git 存储库时，它会更新工作目录。当我在浏览器中访问时，我的网站现在会显示更改。

在这个例子中，我的工作目录是“ **/var/www/dev_site** ”。将其相应地更改为您的回购所在的位置。

请注意，这个 Repo 不是一个简单的 Repo。裸 Repo 没有 Web 服务器可以读取的工作目录。

# .net - .NET 的 HTML 生成器？

> ID：883879
> 
> 赞同：7
> 
> 时间：2009-05-19T16:49:47.450
> 
> 标签：.net, templates, seaside

过去几年使用 Seaside 后，我发现模板系统的代码味道不好。是否有.net 框架使用类似于 Seaside 画布系统的东西来生成 html、css 和 javascript？或者一种避免我在模板中发现的重复的方法。

[编辑] NHaml 并不接近我正在寻找的东西。重点不在于 (X)HTML 的简写，而是拥有一种我可以重构和重用代码的编程语言。

在 Seaside 中，它可能看起来像这样：（画布是 html [和 javascript] 的构建器）

```
renderContentOn: canvas
    canvas form
        class: 'eventEditor';
        with:[
            self renderWhoOn: canvas;
                 renderButtonsOn: canvas] 
```

在这个方法中，我调用了两个子程序

```
renderWhoOn: canvas
self decorateDivAndLabel: 'Who' on: canvas around: [
    canvas select
        id: tagId;
        selected: model who;
        list: model whoList;
        callback: [:value | model who: value]] 
```

第一个调用围绕选择表单元素的装饰器：

```
decorateDivAndLabel: aString on: canvas around: aBlock
canvas div: [
    canvas label
        for: (tagId := canvas nextId);
        with: aString,':'.
    aBlock value] 
```

这允许消除几乎所有的重复。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-23T04:14:50.387

我对模板系统也有类似的感受（参见[ASP.MVC:Implementing a non-templated view engine?](https://stackoverflow.com/questions/819667/asp-mvc-implementing-a-non-templated-view-engine)），经过一番试验，我采取了以下做法：

*   实现了一个流畅的 HTML 生成器 C# 类，它不直接写入流，而是将整个 HTML 页面构造为内存中的对象层次结构。
*   更高级别（可重用）的 HTML 代码片段（如复杂的输入控件等）被实现为单独的类，并作为节点插入到此层次结构中，并且可以自动将自身扩展为纯 HTML 节点。
*   MVC 视图是 POCO C# 类，它们构造 HTML 层次结构并将其写入响应流。

一些好处（从我的角度来看）：

*   您仍然保留对 HTML 的控制权
*   可重用性、继承性、封装性……
*   结果是自动格式化的（缩进、XHTML 等）
*   最重要的是......没有使用单独的 DSL 的模板脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T17:00:46.953

我对 Seaside 不熟悉，但您可以在 ASP.NET MVC 中使用[许多不同的视图引擎](http://www.google.ca/search?q=.net+mvc+view+engines&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a)，例如[NHaml](http://andrewpeters.net/2007/12/19/introducing-nhaml-an-aspnet-mvc-view-engine/)。也许您可以评估这些，看看是否适合您的需求。

您还可以[创建自己的视图引擎](http://www.singingeels.com/Articles/Creating_a_Custom_View_Engine_in_ASPNET_MVC.aspx)。

# tfs - 具有 CMMI 3 级和 4 级的 TFS 项目管理

> ID：883884
> 
> 赞同：5
> 
> 时间：2009-05-19T16:50:48.057
> 
> 标签：tfs

对于在 TFS 中处理我们的项目的最佳方式，我有点困惑。

我们是符合 CMMI 3 级（在 4 级工作）的组织。因此，我们目前在 TFS 中使用 MSF CMMI 流程模板，我正在对其进行定制以更好地满足我们组织的需求。

对于每个新版本（无论是主要版本还是点版本），我们都必须遵循一个标准流程，其中包括多个质量关口和所需文档（项目计划附录、部署计划、质量关口演示材料、需求审查文档等）。我的问题是，据我所见，TFS 只需要每个项目而不是发布来满足流程（我们一直在尝试使用迭代来识别发布）。

问题是，有没有办法让流程指示每个版本所需的文档，或者我是否需要在每个版本中启动一个新的 TFS 项目。

作为一个潜在的后续问题。如果您需要为每个版本创建一个新项目，您如何处理源代码控制和工作项历史记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-07-20T14:30:05.883

*   **`TFS`**你是对的，为每个版本打开一个新项目[可能是矫枉过正](http://www.ssw.com.au/ssw/standards/rules/rulestobetterprojectmanagementwithtfs.aspx#MultipleProjects)。
*   相反，我建议为每个发布创建一个发布计划，并将每个需要的文档与一个工作项相关联。
*   以下是有关创建[发布计划](http://www.ssw.com.au/ssw/standards/rules/rulestobetterprojectmanagementwithtfs.aspx#ReleasePlan)的一种方法的一些详细信息，这里是一个[示例模板](http://www.filefront.com/14082509/)，其中内置了有用的类型。
*   如果您有大量空闲时间，您可以[自定义工作项字段](http://msdn.microsoft.com/en-us/library/ms400654%28VS.80%29.aspx#AddAField)以创建符合您的文档要求的任务。

要在单个 TFS 项目中管理多个版本，我建议简单地创建[多个文件夹](http://www.ssw.com.au/ssw/standards/rules/rulestobetterprojectmanagementwithtfs.aspx#MultipleProjects)，并将与每个版本关联的工作项添加到每个文件夹中。

# apache-flex - UIComponent 为 DisplayObject 添加了什么？

> ID：883885
> 
> 赞同：0
> 
> 时间：2009-05-19T16:50:51.800
> 
> 标签：apache-flex, flash

我试图了解 Flex UIComponents 和（Flash？）DisplayObjects 之间的交互......但我不清楚 UIComponent 类向 DisplayObject “添加”了什么。那么，UIComponent 能做什么而 DisplayObject 不能呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T18:45:28.547

有很多不同之处，我肯定会去文档了解更多细节，但这里有一些：
***扩展事件模型***（当 alpha、visible、width、height、scalex、scaley、x 或 y 改变时，一个事件是dispatched, 还有 preinitialize, initialize, )
***附加属性***（你可以得到相对于子元素的 mouseX 和 Y，你可以访问补间属性数组，有一个 cursorManager、systemManager 和一个 focusManager 可以与更大的 Flex 一起使用框架等等。还有一个对父级的通用（未转换）引用，应用程序意味着更容易访问根）。
***它有 CSS 支持***
***附加方法***......有很多。

供参考：

**FlexSprite**唯一真正的区别是覆盖 toString() 以提供有关对象在层次结构中的位置的更多详细信息。

我想说，最好的总结方式是 Flex UIComponent 比 DisplayObjectContainer 更健壮且明显更强大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T17:00:58.607

如果您查看文档，您会发现 UIComponent 添加了大部分用户界面功能。DisplayObject 不响应任何用户界面事件。CSS 样式功能也包含在 UIComponents 中。

UIComponent -> FlexSprite -> Sprite -> DisplayObjectContainer -> InteractiveObject -> DisplayObject。每一层都向 DisplayObject 添加方法和事件。

# xml - 是否可以使用点语法访问 xml 对象的内容？

> ID：883889
> 
> 赞同：2
> 
> 时间：2009-05-19T16:51:32.347
> 
> 标签：xml, ruby

您好，我正在使用[LibXML](http://libxml.rubyforge.org/rdoc/index.html)解析 rss 提要，我想知道是否可以使用点语法（或同样简单）访问内容。

所以如果我有：

```
<post>
  <created_at>Sat Aug 09 05:38:12 +0000 2008</created_at> 
  <id>882281424</id> 
  <text>I so just thought the guy lighting the Olympic torch was falling when he began to run on the wall. Wow that would have been catastrophic.</text> 
  <source>web</source> 
  <truncated>false</truncated> 
  <in_reply_to_status_id></in_reply_to_status_id> 
  <in_reply_to_user_id></in_reply_to_user_id>
</post> 
```

我可以像访问它一样访问它吗

```
text = post.text 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T17:17:10.707

不，最简单的方法是使用[XPath](http://www.w3schools.com/Xpath/)。例如，要获取属于“post”节点的所有“text”节点的[列表：](http://libxml.rubyforge.org/rdoc/classes/LibXML/XML/XPath/Object.html)

```
doc = parser.parse
text_node = doc.find('/post/text') #returns all children 
```

或者获取第一个（仅在这种情况下）这样的节点：

```
doc = parser.parse
text_node = doc.find_first('/post/text') #returns first child only 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T19:23:09.117

如果您准备做一些设置工作，那么您可能会发现[HappyMapper](http://happymapper.rubyforge.org/)很有用。

您声明一个类及其映射（或至少您感兴趣的部分） - 在您的情况下，它可能看起来像这样

```
class Post
  include HappyMapper
  element :text, String
end 
```

并像这样使用它：

```
posts = Post.parse(File.read(path_to_rss.xml))
posts.each do |post|
  puts post.text
end 
```

都完全未经测试，恐怕...

# .net - MVVM 模式存在哪些问题？

> ID：883895
> 
> 赞同：21
> 
> 时间：2009-05-19T16:51:57.540
> 
> 标签：.net, wpf, mvvm

Model-View-ViewModel 是 WPF 中使用的最佳模式吗？有什么缺点吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-19T17:08:31.967

这是一篇关于[MVVM 优缺点的](https://docs.microsoft.com/en-us/archive/blogs/johngossman/advantages-and-disadvantages-of-m-v-vm)简短博客文章，直接来自 John Gossman 本人。

他的主要缺点是：

“对于简单的 UI，MV-VM 可能是多余的。在更大的情况下，很难预先设计 ViewModel 以获得适当的通用性。数据绑定的所有奇迹都是声明性的，并且比调试更难很好的命令式的东西，你只需设置断点”

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2011-03-19T16:30:00.790

为了构建我们的应用程序，我们从 MVVM 开始，但是在遇到很多问题之后我们放弃了 MVVM，因为以下原因将确定哪些地方不使用 MVVM。

**继承问题**

我们在 .NET 中编程，我们使用 C#，最好我们肯定想要继承。C# 不支持多类继承，因此我们不能让抽象类的逻辑部分在 UI 和逻辑中重用。

大多数时候我们很困惑，如何设计视图模型以便我们可以继承和控制逻辑。

如果我们继承View，我们不能同时继承ViewModel，如果我们继承ViewModel，我们不能同时继承View。相反，我们必须使用非常复杂的泛型，并借助 Prism 和 Unity 等工具我们可以实现，但这不值得花时间。

**ViewModel 到 ViewModel 绑定**

好吧，大多数时候业务逻辑并不像 A=B+C 那样简单，UI 和 UI 上的响应起着很大的作用。然而，我们可以将 UI 的可视属性绑定到 View Model 的数据属性，但是问题在于如何将一个视图模型实际绑定到另一个视图模型，如果它们通过共享控件的两个绑定，那么我们不知道将执行什么第一的。

**ViewModel 并不是 CodeBehind 的简单替代品**

假设 ViewModel 是 CodeBehind 文件的简单替换。但是在制作我们的应用程序时，对继承的限制告诉我们，由于 WPF/Silverlight 支持的 UI Style 可以将 UI 与逻辑完全分离，我们只是在 ViewModel 中分离了业务逻辑。

**ViewModel 中的重复代码**

我们最终意识到，我们只是在每个 View 和每个 ViewModel 中编写相同的代码模式，改变这成为一个巨大的痛苦，维护也是一个痛苦。MVVM 更适合测试驱动开发，但在编写可扩展组件时，它们并不是最佳选择。

* * *

WPF/Silverlight 已经让您可以很好地分离代码和 UI，我们现在确实设计了非常简单的类层次结构来执行业务逻辑并为我们提供所需的一切。我们现在创建所有基于 ICommand 的命令属性作为我们类的依赖属性，我们在 UserControl 和模板化控件中绑定这些属性。

CodeBehind 中的 ICommand 或 ResourceDictionary 中的 Template and Styles 为我们提供了我们可以通过 MVVM 获得的几乎所有好处。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-19T21:15:01.667

这是一个很棒的模式，坦率地说，它是为数不多的 WPF 刷新 UI 模式之一。我的意思是很多人都理解并采用了它。因此，获得有关它的帮助和信息相对容易。

在我看来，最大的缺点是它增加了应用程序中的类和组件的数量，因为在这种模式下[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)胜过[DRY 。](http://en.wikipedia.org/wiki/DRY)话虽如此，我认为这是值得的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-19T16:58:47.453

是的，对于小型 hello world 风格的应用程序来说，这是一种过度杀伤力。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T14:40:19.850

不同的图案有不同的长处。人们倾向于将模式与实现混淆。如何安排或访问业务逻辑会影响给定应用程序更自然的模式。因此，虽然这个问题询问了 WPF，但阅读有关在任何框架中用于实现同一屏幕三次的三种模式可能会有所帮助。

下面是一篇 java 文章的链接，该文章比较了 MVVM（“表示模型”）与 MVP（“被动视图”）和混合实现 MVVMP/MVC（“监督控制器”）。我相信这与这个问题有关，因为它有一个比较模式的部分。

[使用 ZK Java AJAX 框架实现事件驱动的 GUI 模式](http://www.ibm.com/developerworks/websphere/zones/portal/proddoc/zkjavaajax/)

它指出了 John Gossman 的弱点，但还继续将优势和劣势与两种替代模式进行比较。

# cocoa - 将 NSString 的单个字符设置为大写的简单方法

> ID：883897
> 
> 赞同：10
> 
> 时间：2009-05-19T16:52:20.287
> 
> 标签：cocoa, cocoa-touch, nsstring

我想将 NSString 的第一个字符更改为大写。不幸的是，`- (NSString *)capitalizedString`将每个单词的第一个字母转换为大写。有没有一种简单的方法可以将单个字符转换为大写？

我目前正在使用：

```
NSRange firstCharRange = NSMakeRange(0,1);
NSString* firstCharacter = [dateString substringWithRange:firstCharRange];
NSString* uppercaseFirstChar = [firstCharacter originalString];
NSMutableString* capitalisedSentence = [originalString mutableCopy];
[capitalisedSentence replaceCharactersInRange:firstCharRange withString:uppercaseFirstChar]; 
```

这似乎有点令人费解，但至少对底层 unicode 字符串的编码没有任何假设。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-19T19:59:20.137

与您所拥有的方法非常相似，但更简洁：

```
 NSString *capitalisedSentence = 
    [dateString stringByReplacingCharactersInRange:NSMakeRange(0,1)  
    withString:[[dateString  substringToIndex:1] capitalizedString]]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T19:53:51.443

由于`NSString`是不可变的，你所拥有的似乎是做你想做的事的好方法。和类似方法的实现`(NSString*)uppercaseString`可能看起来非常像您编写的内容，因为它们返回一个新`NSString`的而不是修改您发送消息的那个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-09-07T15:57:58.150

我有类似的要求，但它是针对字符串中的字符的。这假设 i 是您想要大写的字符的索引，这对我有用：

```
curword = [curword stringByReplacingCharactersInRange:NSMakeRange(i,1) 
           withString:[[curword substringWithRange:NSMakeRange(i, 1)] capitalizedString]]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-18T20:25:30.107

如果您分析这些解决方案，它们会慢得多，然后这样做：

```
NSMutableString *capitolziedString = [NSMutableString stringWithString:originalString];
NSString *firstChar = [[capitolziedString substringWithRange:NSMakeRange(0,1)] uppercaseString];
[capitolziedString replaceCharactersInRange:NSMakeRange(0, 1) withString:firstChar]; 
```

在运行 iOS 5 的 iphone 4 上进行测试：
@doomspork 的解决方案在 0.115750 毫秒内
运行，而上述解决方案在 0.064250 毫秒内运行；

在运行 iOS 5 的模拟器上进行测试：
@doomspork 的解决方案在 0.021232 毫秒内
运行，而上述解决方案在 0.007495 毫秒内运行；

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-18T22:23:00.947

为了获得最大的可读性，请`category`打开`NSString`并赋予它以下功能：

```
NSString *capitalizeFirstLetter(NSString *string) {
    NSString *firstCapital = [string substringToIndex:1].capitalizedString;
    return [string stringByReplacingCharactersInRange:NSMakeRange(0, 1) withString:firstCapital];
} 
```

然后在你想要的代码中：

```
NSString *capitalizedSentence = capitalizeFirstLetter(dateString); 
```

这种代码很少出现在您需要它的地方，通常应该将其分解为实用程序类或 a`category`以提高易读性。

# php - 有人可以解释一下缓存动态 PHP 页面吗？

> ID：883905
> 
> 赞同：2
> 
> 时间：2009-05-19T16:54:29.517
> 
> 标签：php, caching, webserver

我想知道缓存动态 PHP 页面。真的是关于预编译 PHP 代码并将其存储在字节码中吗？类似于 Python 的 .pyc 的东西，它是一个更加编译和准备执行的版本，因此如果系统发现 .pyc 文件比 .py 文件新，那么它就不会费心重新编译为 .py 文件.

那么PHP缓存主要是关于这个吗？有人可以提供更多关于此的信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T16:59:11.510

取决于您正在谈论的缓存类型。操作码缓存与您所说的完全一样。它获取操作码并将其缓存，以便每当用户访问特定页面时，如果该页面的操作码已经编译并在缓存中，则不需要重新编译该页面。如果您修改 php 文件，缓存机制将检测到这一点并重新编译代码并将其放入缓存中。

如果您谈论的是在页面本身上缓存数据，那么这完全不同。

查看[Alternative PHP Cache](http://ca3.php.net/apc/)以获取有关操作码缓存的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T17:01:14.470

你所描述的是一个[PHP 加速器](http://en.wikipedia.org/wiki/PHP_accelerator)，他们完全按照你说的做；存储缓存的编译字节码，以便同一脚本的多次执行只需要一次编译。

也可以缓存执行 PHP 脚本的结果。这通常至少需要一点逻辑，因为页面的内容可能在缓存后发生了变化。例如，您可以查看[CodeIgniter 提供的通用缓存功能](http://codeigniter.com/user_guide/general/caching.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T18:23:36.167

[Peter D 的回答](https://stackoverflow.com/questions/883905/can-someone-explain-a-little-bit-about-caching-dynamic-php-pages/883929#883929)很好地涵盖了操作码缓存。如果您的页面很简单，这可以为您节省超过 50% 的页面生成时间（主观）！

您想了解的另一个缓存是数据缓存。这可能是缓存数据库结果集、Web 服务响应、HTML 块甚至整个页面！

一个简单的“例子”应该说明：

```
 $cache = new Cache();
    $dataset;

    if (!$dataset == $cache->get('expensiveDataset')){

      //run code to fetch dataset from database
      $dataset = expensiveOperation();
      $cache->set('expensiveDataset', $dataset);

    }
echo $dataset; //do something with the data 
```

有一些库可以帮助进行对象、函数和页面级缓存。[Zend Framework 的 Zend_Cache](http://framework.zend.com/manual/en/zend.cache.html)组件是值得深思的，如果你喜欢你所看到的，它是一个很好的实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T17:01:54.190

实际上有几种不同形式的缓存。您所指的是由[eAccelerator](http://eaccelerator.net)、[MMCache](http://turck-mmcache.sourceforge.net/index_old.html)等 包处理的。

虽然这会对一些人有所帮助，但您真正获得性能提升的地方在于实际缓存适用的 HTML 输出，或缓存重复查询的数据库结果集（例如[memcache](http://www.php.net/memcache)）。

安装任何操作码缓存机制都非常容易，但我提到的其他两个缓存区域将为您带来更大的性能优势。

# winapi - Windows 上的低开销 I/O 监控

> ID：883909
> 
> 赞同：3
> 
> 时间：2009-05-19T16:55:38.860
> 
> 标签：winapi, process, trace

我想要一种低开销的方法来监视 Windows 进程的 I/O。

我得到了几个有用的答案来[监控 Windows 中的进程完成的某些系统调用](https://stackoverflow.com/questions/864839/monitoring-certain-system-calls-done-by-a-process)。最有希望的是使用 Windows Performance Toolkit 来获取内核事件跟踪。确实可以从那里提取所有必要的信息，但是 WPT 对于我需要的东西来说是一个巨大的过度杀伤力，因此会产生令人望而却步的开销。

我的想法是实现一种替代方法来检测 C/C++ 依赖图。通常这是通过向编译器传递一个选项来完成的（例如，-M）。这适用于具有此类选项的编译器和工具，但并非所有编译器和工具都这样做，而且那些经常以不同方式实现它们的编译器和工具。因此，我在 Linux 上实现了一种替代方法，使用 strace 来检测打开了哪些文件。以这种方式运行 gcc（例如）有 50% 的开销（大概的数字），我希望能找到一种方法在具有相似开销的 Windows 上执行此操作。

xperf 工具集有两个问题使我无法在这种情况下使用它们：

*   无法监控单个进程的文件 I/O 事件；我必须使用内核事件跟踪来跟踪每个进程，从而生成大量数据（运行 gcc、YMMV 所需的时间为 15Mb）。
*   由于必须使用内核事件跟踪，我必须以管理员身份运行。

我真的不需要内核级别的事件；我想如果我可以监控 Win32 API 调用 CreateFile()，如果我想捕获分叉进程，我可能会管理得一样好。

有什么聪明的主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T17:05:46.273

使用 API 挂钩。在 ntdll 中挂钩 NtCreateFile 和其他一些调用就足够了。我在使用 easyhook 作为框架来进行挂钩方面有很好的经验——免费和开源。如果您想这样做，甚至支持托管挂钩（c# 等）。这很容易设置。

它位于[http://easyhook.codeplex.com](http://easyhook.codeplex.com)

编辑：顺便说一句，弯路不允许 64 位挂钩（除非您以 10,000 美元的名义价格购买许可证）EasyHook 不允许跨 WOW64 边界的本地挂钩。不过，它允许跨 WOW64 边界进行托管挂钩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T17:05:36.773

我过去使用 Microsoft 的[Detours](http://research.microsoft.com/en-us/projects/detours)通过拦截特定的 API 调用来跟踪内存分配。您可以使用它来跟踪 CreateFile 和 CreateProcess。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T16:02:35.403

似乎[Dr. Memory 的 Windows 系统调用跟踪器](http://www.drmemory.org/docs/page_drstrace.html)正是我想要的。它基本上是`strace`Windows 的实现。

# sql-server - 将 DBF 文件导入 Sql Server

> ID：883917
> 
> 赞同：3
> 
> 时间：2009-05-19T16:57:24.193
> 
> 标签：sql-server, stored-procedures, import, dbf

我需要一点帮助来解决这个问题，因为我是存储过程的新手。我正在尝试使用此存储过程将 .DBF 表导入 Sql Server 2008。

```
CREATE PROCEDURE spImportDB
-- Add the parameters for the stored procedure here

AS
BEGIN

-- Insert statements for procedure here

 SELECT * into Products
 FROM OPENROWSET('vfpoledb','C:\Users\Admin\Doc\Data\DBF',
 'SELECT * FROM MyTable')

END
GO 
```

我收到此错误。OLE DB 提供程序“vfpoledb”尚未注册。这不是真的，我已经安装了它，它在我的其他应用程序中运行良好。

我也尝试使用此提供程序以这种方式运行它，但我收到此错误消息无法为链接服务器“（null）”初始化 OLE DB 提供程序“Microsoft.Jet.OLEDB.4.0”的数据源对象。

```
CREATE PROCEDURE spImportDB
-- Add the parameters for the stored procedure here

AS
BEGIN

-- Insert statements for procedure here

 SELECT * into Products
 FROM OPENROWSET('Microsoft.Jet.OLEDB.4.0','C:\Users\Admin\Doc\Data\DBF',
 'SELECT * FROM MyTable')

END
GO 
```

创建此存储过程的最简单方法是什么？我希望它是一个存储过程，而不是向导或程序，所以请不要给我任何程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T22:38:50.767

你可以试试

```
SELECT * into SomeTable
FROM OPENROWSET('MSDASQL', 'Driver=Microsoft Visual FoxPro Driver;
SourceDB=\\SomeServer\SomePath\;
SourceType=DBF',
'SELECT * FROM SomeDBF') 
```

从[上一个问题](https://stackoverflow.com/questions/52822/how-to-import-a-dbf-file-in-sql-server)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T22:35:18.417

我不确定 VFPOLEDB 的“友好名称”，但只要您按名称指向特定的 DBF 文件，第二个 SP 应该可以工作（即使用“Microsoft.Jet.OLEDB.4.0”）。看起来您指向的是一个目录，而不是实际的文件。

更多信息可在以下网址找到：http: [//msdn.microsoft.com/en-us/library/ms190312.aspx](http://msdn.microsoft.com/en-us/library/ms190312.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-31T04:21:36.430

对于其他寻找此问题的答案的人，此错误的原因是为“Just Me”而不是“Everyone”安装 Foxpro 驱动程序。

运行“所有人”的安装程序以避免此错误。

# linq - 将组 SQL 表达式转换为 LINQ

> ID：883918
> 
> 赞同：2
> 
> 时间：2009-05-19T16:57:31.167
> 
> 标签：linq, linq-to-sql

将此查询表达式转换为我的 LINQ 表达式时，我真的很痛苦。

```
SELECT 
    r.Disc_code
    ,r.SEX 
FROM RACE r     
WHERE r.EVENT_CODE = 100 
GROUP BY 
    r.SEX
    , r.disc_Code
order by r.disc_code 
```

我可以使用一张表，但我还没有看到在 stackoverflow 或 MSDN 中链接两个组表达式的任何示例。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T17:08:36.990

也许是这样的：

```
 var results = from r in dataContext.Race
                      where r.EVENT_CODE == 100
                      orderby r.Disc_Code ascending
                      group r by new { r.Sex, r.Disc_Code } into g
                      select g.Key; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T17:08:37.380

这是在 VB.NET 中按多列[分组](http://msdn.microsoft.com/en-us/vbasic/bb737926.aspx#grpbymult)的示例。

```
Dim query = From r In db.Race _
            Where r.EVENT_CODE = 100 _
            Order By r.disc_Code _
            Group By Key = New With {r.Sex, r.disc_Code} Into Group _
            Select Key, Group 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T17:07:41.250

要根据多个标准进行分组，您必须执行以下操作：

```
var query = from book in books
group book by new {book.author, book.editor} into books; 
```

访问它们：

```
var author = books.Key.author;
var editor = books.Key.editor; 
```

# ruby-on-rails - 在 Rails 迁移中加载数据

> ID：883919
> 
> 赞同：1
> 
> 时间：2009-05-19T16:57:42.900
> 
> 标签：ruby-on-rails, migration

我从 Posts 表的定义开始创建了许多迁移。

```
class CreatePosts < ActiveRecord::Migration
  def self.up
    create_table :posts do |t|
      t.column "title", :string, :limit => 100, :default => "",  :null => false
      t.column "content", :text, :null => false
      t.column "author", :string, :limit => 100, :default => 0,  :null => false
      t.column "category", :string, :limit => 20, :default => "",  :null => false
      t.column "status", :string, :limit => 20, :default => "",  :null => false
      t.timestamps
    end
  end

  def self.down
    drop_table :posts
  end
end 
```

另一个用于用户表，我在创建表后为默认用户加载了一些数据。

```
class CreateUsers < ActiveRecord::Migration
  def self.up
    create_table :users do |t|
      t.column "username", :string,     :limit => 25, :default => "",   :null => false
      t.column "hashed_password", :string,  :limit => 40, :default => "", :null => false
      t.column "first_name", :string,   :limit => 25, :default => "",   :null => false
      t.column "last_name", :string,    :limit => 40, :default => "",   :null => false
      t.column "email", :string,        :limit => 50, :default => "",   :null => false
      t.column "display_name", :string, :limit => 25, :default => "",   :null => false
      t.column "user_level", :integer,  :limit => 3,  :default => 0,   :null => false
      t.timestamps
    end
    user = User.create(:username => 'bopeep',
      :hashed_password => 'bopeep',
      :first_name => 'Bo',
      :last_name => 'Peep',
      :email => 'bo@peep.com',
      :display_name => 'Little Bo Peep',
      :user_level => 9)
  end

  def self.down
    drop_table :users
  end
end 
```

接下来，我创建了一个迁移来更改 Posts 表，将表重命名为 blog_posts。在这里，我还想加载一个默认的博客文章条目。

```
class AlterPosts < ActiveRecord::Migration
  def self.up
    rename_table :posts, :blog_posts
    change_column :blog_posts, :author, :integer, :default => 0, :null => false
    rename_column :blog_posts, :author, :author_id
    add_index :blog_posts, :author_id
    bopeep = User.find_by_username 'bopeep'
    BlogPost.create(:title => 'test', :content => 'test', :author_id => bopeep.id, :category => 'test', :status => 'ok')
  end

  def self.down
    remove_index :blog_posts, :author_id
    rename_table :blog_posts, :posts
    rename_column :posts, :author_id, :author
    change_column :posts, :author, :string, :limit => 100, :default => 0, :null => false
  end
end 
```

但这会产生错误：

```
uninitialized constant AlterPosts::BlogPost 
```

我应该如何加载默认的 BlogPost 而不是“BlogPost.create”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T17:00:17.390

将您的 rename_table 和您的更改/重命名列迁移分离到另一个迁移文件中。

我认为直到整个块通过之后才会提交重命名......因此 blog_posts 还不存在。

# asp.net - 在 ASP.NET 中修改服务器端的 html 输出

> ID：883922
> 
> 赞同：7
> 
> 时间：2009-05-19T16:58:05.597
> 
> 标签：asp.net, html, event-handling, rendering

第三方的 web 控件生成以下代码来显示自己：

```
<div id="uwg">
    <input type="checkbox" />
    <div>blah-blah-blah</div>
    <input type="checkbox" />
</div> 
```

是否可以将其更改为

```
<div id="uwg">
    <input type="checkbox" disabled checked />
    <div>blah-blah-blah</div>
    <input type="checkbox" disabled checked />
</div> 
```

当我们点击

```
<asp:CheckBox id="chk_CheckAll" runat="server" AutoPostBack="true" /> 
```

位于同一页面上？

我们需要在服务器端（在 ASP.NET 中）执行此操作。

该第三方的控件没有为此提供接口，因此唯一的可能性是使用 html 输出。我应该处理哪个页面事件（如果有）？另外，是否有一些等效于 DOM 模型，或者我需要将输出作为字符串处理？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-19T20:45:45.610

当复选框不在服务器上运行或封装在控件内部时，我们可以使用以下方法：

```
protected override void Render(HtmlTextWriter writer)
{
    // setup a TextWriter to capture the markup
    TextWriter tw = new StringWriter();
    HtmlTextWriter htw = new HtmlTextWriter(tw);

    // render the markup into our surrogate TextWriter
    base.Render(htw);

    // get the captured markup as a string
    string pageSource = tw.ToString();

    string enabledUnchecked = "<input type=\"checkbox\" />";
    string disabledChecked = "<input type=\"checkbox\" disabled checked />";

    // TODO: need replacing ONLY inside a div with id="uwg"
    string updatedPageSource = pageSource;
    if (chk_CheckAll.Checked)
    {
         updatedPageSource = Regex.Replace(pageSource, enabledUnchecked,
                disabledChecked, RegexOptions.IgnoreCase);
    }

    // render the markup into the output stream verbatim
    writer.Write(updatedPageSource);
} 
```

解决方案取自[这里](https://stackoverflow.com/questions/531631/get-html-of-current-page-without-viewstate-asp-net)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-19T17:03:38.867

继承它并在控件树中找到控件，并根据需要设置属性。

```
 protected override void OnPreRender(EventArgs e)
 {
      base.OnPreRender(e);
      (this.Controls[6] as CheckBox).Disabled = true;
 } 
```

显然，如果控件将根据其他属性修改其输出，或者如果您升级库，这将是脆弱的；但是如果您需要解决方法，这将起作用。

# iphone - 根据当前横向模式自动旋转默认应用程序图像

> ID：883927
> 
> 赞同：0
> 
> 时间：2009-05-19T16:59:09.637
> 
> 标签：iphone, cocoa, uikit

是否可以根据当前横向模式自动旋转默认应用程序图像？我可以根据`UIDevice`课堂上的信息很好地旋转我的视图，但我希望整个应用程序从一开始就处于正确的横向模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T17:08:42.183

目前这是不可能的。如果您的应用程序设计为横向模式，您显然可以旋转默认图像，但无法显示不同的图像或在应用程序启动时根据方向旋转它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T18:48:27.060

**更新**

评论后更新...

您可以使用的技巧：使用肖像 default.png

启动时在 UIImageView 中加载 default.png 并自己执行旋转。

```
UIImageview *myImage = [UIImageView alloc] initWithImage:[UIImage imageNamed:@"default.png"]]];

[UIView beginAnimations:@"rotate" context:nil]
[UIView setAnimationDelay:0.25];
[UIView setAnimationDuration:duration];

//rotation transform logic

[UIView commitAnimations]; 
```

您可以根据您的设置将其旋转到左侧或右侧。然后使用另一个动画块淡入你的 UI。

* * *

**原始答案**

这种没有意义。不需要旋转图形。

如果您在横向启动，那么只需在横向创建您的启动图形（使用 Photoshop 或类似的东西）。

如果您认为有时手机会处于横向状态，有时在启动期间不会，那并不是真正的问题。如果视图仅支持该方向，则 HIG 会指示您以正确的方向简单地显示视图。示例：Youtube 应用程序自动转到横向显示视频并返回纵向显示表格视图。您不应该补偿您的用户在发布之前可能正在做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-06-02T21:14:12.593

现在这在 Xcode 4.0 中是可能的，[这里](http://www.fileswap.com/dl/nmAyzRbc/LandscapeOnlyProblemTest.zip.html)有一个可下载的应用程序专门做这件事。

# java - 从 java 代码调用 Snarl

> ID：883930
> 
> 赞同：2
> 
> 时间：2009-05-19T16:59:27.093
> 
> 标签：java, api

有谁知道如何从java代码调用[snarl api？](http://www.fullphat.net/index.php)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T12:06:51.760

我已经成功地使用[http://code.google.com/p/jweatherwatch/wiki/SnarlNetworkBridge](http://code.google.com/p/jweatherwatch/wiki/SnarlNetworkBridge)调用了 snarl ，在官方[https://sites.google.com/site/snarlapp/developers/developer-guide中有说明](https://sites.google.com/site/snarlapp/developers/developer-guide)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T22:03:04.207

你试过[Snarl4Java](http://www.dotti.at/projects/Snarl4Java)吗？这看起来和你想要的完全一样。

# java - 死锁线程检查

> ID：883936
> 
> 赞同：3
> 
> 时间：2009-05-19T17:00:56.547
> 
> 标签：java, multithreading

有人能告诉我如何在 Java 多线程应用程序中找出“有多少线程处于死锁状态”吗？找出死锁线程列表的方法是什么？

我听说过 Thread Dump 和 Stack Traces，但我不知道如何实现它。

*   我还想知道 Java 5 中引入了哪些新特性用于线程？

请让我知道您的意见和建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T17:16:40.147

获取线程转储的方式：

*   ctrl-break (Windows) 或 ctrl-\，可能是 ctrl-4，`kill -3`在 Linux/UNIX 上
*   `jstack`和你的进程ID（使用`jps`）
*   `jconsole`或者`visualvm`
*   几乎任何调试器

J2SE 5.0（2004 年发布，服务生命周期结束）中的主要新线程特性：

*   `java.util.concurrent`
*   新的 Java 内存模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T17:04:38.040

在进程 ID 上使用 kill -3

这将在控制台打印出一个线程转储和线程争用的概述

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T19:53:34.670

在您的程序中，[ThreadMXBean](http://www.javamex.com/tutorials/profiling/profiling_java5_threads_howto.shtml)类有一个方法**findMonitorDeadlockedThreads()**，以及用于查询线程当前堆栈跟踪的方法。在 Windows 的控制台中，执行 Ctrl+Break 会为您提供堆栈跟踪列表并指示死锁线程。

除了对 Java 内存模型进行一些调整以弥补一些并发“漏洞”之外，Java 5 最重要的底层特性是它向程序员公开了比较与设置 (CAS) 操作。然后，在此基础上，平台中提供了一大堆并发实用程序。确实有很多东西，但它们包括：

*   并发集合
*   执行器，它可以有效地让你实现诸如线程池之类的东西
*   其他常见的并发结构（队列、锁存器、屏障）
*   原子变量

您可能对我编写的关于[Java 5 并发特性](http://www.javamex.com/tutorials/synchronization_concurrency_1.shtml)的一些教程感兴趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T02:08:01.147

如果您想了解 Java 5 中的新并发特性，您可能比得到一份 Brian Goetz 的[Java Concurrency in Practice](https://rads.stackoverflow.com/amzn/click/com/0321349601 "Java 并发实践")（Brian Goetz 和许多合著者设计了 Java 5 并发库）的副本更糟糕。它既具有高度的可读性和权威性，又结合了实例和理论。

新的并发实用程序的[执行摘要](http://java.sun.com/j2se/1.5.0/docs/guide/concurrency/overview.html "并发实用程序概述")如下：

*   Task Scheduling Framework - Executor 框架是一个用于根据一组执行策略对异步任务的调用、调度、执行和控制进行标准化的框架。提供的实现允许任务在提交线程、单个后台线程（如 Swing 中的事件）、新创建的线程或线程池中执行，并且开发人员可以创建支持任意执行策略的 Executor。内置实现提供可配置的策略，例如队列长度限制和饱和策略，可以通过防止失控的资源消耗来提高应用程序的稳定性。
*   Concurrent Collections - 添加了几个新的 Collections 类，包括新的 Queue 和 BlockingQueue 接口，以及 Map、List 和 Queue 的高性能并发实现。
*   Atomic Variables - 用于原子操作单个变量（原始类型或引用）的类，提供高性能的原子算术和比较和设置方法。java.util.concurrent.atomic 中的原子变量实现提供了比使用同步（在大多数平台上）更高的性能，这使得它们对于实现高性能并发算法以及方便地实现计数器和序列号生成器非常有用。
*   Synchronizers - 通用同步类，包括信号量、互斥体、屏障、锁存器和交换器，它们有助于线程之间的协调。
*   锁 - 虽然锁定是通过 synchronized 关键字内置到 Java 语言中的，但内置监视器锁有许多不方便的限制。java.util.concurrent.locks 包提供了一个高性能的锁实现，它具有与同步相同的内存语义，但它还支持在尝试获取锁时指定超时、每个锁多个条件变量、非词法范围锁、并支持中断等待获取锁的线程。
*   纳秒粒度计时 - System.nanoTime 方法允许访问纳秒粒度时间源以进行相对时间测量，以及接受超时的方法（例如 BlockingQueue.offer、BlockingQueue.poll、Lock.tryLock、Condition.await、和 Thread.sleep) 可以以纳秒为单位获取超时值。System.nanoTime 的实际精度取决于平台。

# oracle - Oracle EX 和 SQL Plus：如何恢复转储文件？

> ID：883946
> 
> 赞同：0
> 
> 时间：2009-05-19T17:03:15.187
> 
> 标签：oracle, sqlplus

我有 .dmp 和 .log 文件。我需要使用 SQLPlus 或 EX 的某些功能来恢复数据库模式和数据。我怎么做？我已经尝试过 RECOVER 命令和 impdp。没有运气，或者我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T01:33:23.530

打开命令提示符并输入 imp user/password@db 您将被提示提供文件和路径。

如果您收到如下消息： IMP-00010：不是有效的导出文件，标头验证失败 IMP-00000：导入未成功终止，这意味着文件是使用数据泵创建的或源版本较新。如果没有，请按照提示操作，它应该非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T19:18:31.730

什么版本的甲骨文？.dmp 文件是如何创建的？您可以查看 .dmp 文件中的第一行（假设它是由 exp 生成的文件）以获取转储它的实用程序的版本。您可能需要使用 imp，尽管我不知道您在使用 impdp 时遇到了什么问题 - 错误消息和正在使用的命令行会有所帮助。假设这是由 exp 生成的，RECOVER 将无济于事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T11:14:27.103

你能在 EX 中使用“imp Scott/Tiger@Machine file=MyDump.dmp”吗？

PS：我假设 Oracle Ex == Oracle Express

# windows-vista - 剪贴板工具将多个版本粘贴回来

> ID：883958
> 
> 赞同：0
> 
> 时间：2009-05-19T17:05:31.783
> 
> 标签：windows-vista, clipboard

我正在将一些 Flash 文件从 AS2 迁移到 AS3，并且我意识到我需要一遍又一遍地复制几段文本。

现在我在一个打开的记事本文件中有这些文本，但我希望能够将这些文本存储在剪贴板中，这样我就可以通过按下 CTRL+1、CTRL+2 等轻松访问它们。

有谁知道这样做的好工具？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T17:11:19.920

如果您安装了 Visual Studio，则可以使用它来代替记事本。然后您可以将多个字符串复制到剪贴板并使用 Ctrl+Shift+Ins 将它们一一粘贴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T17:26:07.730

另一种选择是 Microsoft Office，这里有一篇关于他们的剪贴板实用程序的不错的小[文章](http://office.microsoft.com/en-us/word/HA101636021033.aspx)。

它也很好，因为它与类型无关，因此您可以剪辑多个级别的文本、图像等。我没用过 Visual Studio 版本所以不知道对比如何，但我一直都在用。

# java - 克服堆溢出问题

> ID：883966
> 
> 赞同：4
> 
> 时间：2009-05-19T17:07:42.933
> 
> 标签：java, heap-memory

我试图从 Project Euler 中解决问题。我知道我的方法会合乎逻辑地工作（它几乎可以立即返回小规模问题的答案）。但是，它的扩展非常可怕。我已经尝试更改 .ini 文件，但无济于事。

这是我的代码：

```
public class Number28 {

    static int SIZE = 101; //this should be an odd number, i accidentally posted 100
    /**
     * @param args
     */
    public static void main(String[] args) {
        double start = System.currentTimeMillis();
        long spiral[][]= spiral(SIZE);
        long sum = 0;
        for(int i = 0; i < SIZE; i++)
        {
            sum += spiral[i][i];
            sum += spiral[i][SIZE - 1 - i];
        }
        System.out.println(sum - 1);
        double time = System.currentTimeMillis() - start;
        System.out.println(time);

    }
    public static long[][] spiral(int size){
        long spiral[][]= new long[size][size];
        if(size == 1){
            spiral[0][0] = 1;
            return spiral;
        }
        else{
            long subspiral[][]= new long[size - 2][size - 2];
            subspiral = spiral(size - 2);
            for(int r = 0; r < size - 2; r++){
                for(int c = 0; c < size - 2; c++){
                    spiral[r + 1][c + 1] = subspiral[r][c];
                }
            }
            long counter = subspiral[0][size - 3];
            for(int r = 1; r < size ; r++){
                counter++;
                spiral[r][size - 1] = counter;
            }
            for(int c = size - 2; c >= 0; c--){
                counter++;
                spiral[size - 1][c] = counter;
            }
            for(int r = size - 2 ; r >= 0 ; r--){
                counter++;
                spiral[r][0] = counter;
            }
            for(int c = 1; c < size ; c++){
                counter++;
                spiral[0][c] = counter;
            }

            return spiral;
        }
    }
} 
```

这是编辑后的代码，就像宝石一样工作：

```
public class Number28 {
    static int SIZE = 1001;
    static long spiral[][]= new long[SIZE][SIZE];

    /**
     * @param args
     */
    public static void main(String[] args) {
        double start = System.currentTimeMillis();
        long spiral[][]= spiral(SIZE);
        long sum = 0;
        for(int i = 0; i < SIZE; i++)
        {
            sum += spiral[i][i];
            sum += spiral[i][SIZE - 1 - i];
        }
        System.out.println(sum - 1);
        double time = System.currentTimeMillis() - start;
        System.out.println(time);

    }
    public static long[][] spiral(int size){
        if(size == 1){
            spiral[SIZE / 2][SIZE / 2] = 1;
            return spiral;
        }
        else{
            long subspiral[][]= spiral(size - 2);
            int edge = (SIZE - size) / 2;
            long counter = subspiral[edge + 1][edge + size - 2];

              for(int r = 1; r < size ; r++){
                  counter++;
                  spiral[edge + r][edge + size - 1] = counter;
          }
          for(int c = size - 2; c >= 0; c--){
                  counter++;
                  spiral[edge + size - 1][edge + c] = counter;
          }
          for(int r = size - 2 ; r >= 0 ; r--){
                  counter++;
                  spiral[edge + r][edge] = counter;
          }
          for(int c = 1; c < size ; c++){
                  counter++;
                  spiral[edge][edge + c] = counter;
          }
            return spiral;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T17:14:56.980

作为 Project Euler 的一般建议，如果您的解决方案无法扩展，几乎可以肯定有更好的方法来解决它。如果您在较早的问题上使用了相同类型的解决方案，则可以浏览其他用户在较早问题上的帖子，以获取以不同方式解决问题的想法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-19T17:24:18.437

不熟悉欧拉问题，但是当您递归调用基本情况时，恐怖似乎是您不断分配和重新分配基本上是一次性的中间螺旋的东西。

重组，以便您预先分配完整的螺旋。然后调用你的递归函数，通过引用将你的完整螺旋作为参数传递，以及一个“级别”参数，该参数将随着每次递归调用而改变。例如，初始调用是 100x100 螺旋和 100 级；下一个（递归）调用具有相同的螺旋，通过引用和级别 98。函数内的操作都将在唯一分配的螺旋上完成。

简而言之：分配一次数据结构，即使您递归地操作该数据结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T17:28:26.543

我看到的第一个问题是在运行 SIZE = 100 的程序时出现 NegativeArraySizeException。我想这与每个递归调用如何将大小减小 2 有关。

我相信史蒂文关于钱的评论是正确的。您正在分配数组的大小，它们进行递归调用。这会导致 (SIZE - 1) 数量的数组被分配，占用你所有的内存。删除那一行应该可以防止在必要时分配任何内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-05T23:00:10.637

这是一个不存储矩阵的简化解决方案：

```
public class P28 {

    private final static int N = 1001;

    public static void main(String[] args) {

        int limit = (N + 1) / 2;
        int sum = -3;
        int first = 4;
        int r = 20;
        for (int i = 1; i <= limit; i++) {
            sum += first;
            first += r;
            r += 32;
        }
        System.out.println(sum);
    }

} 
```

**解释：**

从`1`你可以看到4个总和：

*   1 + 3 + 13 + 31 + 57 + ...
*   1 + 5 + 17 + 37 + 65 + ...
*   1 + 7 + 21 + 43 + 73 + ...
*   1 + 9 + 25 + 49 + 81 + ...

`1``sum`加了 4 次，这就是为什么默认值为`-3`.

让我们收集这些总和：

*   4 + 24 + 76 + 160 + 276 + ...（这就是为什么`first`is`4`和`r`is `20`= 24 - 4）

您可以观察到每一步`r`增加`32`（24-4 = 32 + 76 - 24 = 32 + 32 + 160 - 76 = ...），实际数字（`first`）增加`r`。

# architecture - 达到应用程序架构师级别

> ID：883968
> 
> 赞同：12
> 
> 时间：2009-05-19T17:08:08.097
> 
> 标签：architecture

我做了大约 10 年的开发人员。我想知道我怎样才能认为自己是建筑师级别的技术人员？开发人员如何从代码级开发转向架构师？

我显然想提升技术阶梯，而建筑似乎很有吸引力。

第二个问题是，就 3.5 框架而言，我如何了解应用程序架构（大图）？

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-05-19T17:12:02.197

成为软件架构师有两个标准：

(1) 你必须称自己为一。

(2) 你必须说服某人付钱给你架构软件。

其他一切都只是脚手架。如果您擅长“大局”开发和规划，请尝试在下一次求职时以建筑师的身份推销自己。如果有人买了，你就是建筑师。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-19T17:53:33.610

冒着让自己暴露在挑剔者和单词解析器面前的风险，

成为“架构师”意味着您必须能够设计软件“系统”，由多个“组件”以松散耦合的方式协同工作以解决一些相当复杂的业务问题，并能够“领导”或“指导”构建所述系统的其他开发人员。

除了成为解决问题所必需的技术专家之外，这还意味着您必须能够从业务角度理解有争议的业务问题，并且能够与业务双方流利地沟通领域专家（使用他们的语言）和将构建组件的开发人员（使用他们的语言）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-19T17:39:19.807

作为一名建筑师，无非是一种心态。拥有*Architect*的身份可能会带来不好的含义。特别是因为没有人能真正回答“什么是建筑师？”这个问题。

首先也是最重要的...

*   这是否意味着一个人*制定了*解决方案但没有真正*实施*它们？

如果是这样，我想这是可以努力的……但是如何通过“制定解决方案”来实现这一目标？实践经验是先决条件，也是必须的。一个真正优秀的程序员最终具有良好的解决问题的能力。一个好的问题解决者最终知道如何构建好的解决方案。

在我看来，如果一个人专注于成为一名**优秀的程序员**，解决问题的能力自然会开始发展。这将不可避免地得到认可。*一旦得到认可，人们就会开始就解决问题 X 的最佳方法*征求意见。当一个人开始被问到这些类型的问题时，一个人天生就会成为一名建筑师。

在企业组织中，人们可以提升到这种心态，并可能有一个实际的头衔（和潜在的薪酬）来代表这种心态。但我们不能忘记，它需要实际开发好的解决问题的方法。这就是最终将我们带到这种心态的原因。

最后，这只是一个词，在持有头衔的人背后几乎没有什么意义。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T17:53:54.497

我认为您是在问如何在公司内提升职业阶梯，这与之前的评论者所讨论的过程不同。一家公司与另一家公司的情况也大不相同，但仍然存在全面重要的技能和实践。

最明显的就是视野的广度。您必须熟悉您正在讨论的系统的所有部分。这意味着您必须渴望在代码的不同领域工作，即使您对它们的了解不如您一直在从事的领域。你必须愿意并且能够用你知道的东西帮助其他人。这并不意味着将您的信息推送给他们，而是意味着在他们询问时提供帮助。如果您的建议有帮助，人们会来找您。显而易见的起点是帮助那些为你最近搬离的事情承担责任的人。

建筑师与从事其他项目的人交谈，既是因为他们被问及对其他项目的看法，也是因为他们了解其他专家是谁，并在对方在某个领域有更多经验时向他们提问。

当然，您留下的代码和项目会为您说话。如果您的代码不可读且不健壮，那么您访问过多少项目都无关紧要。你自己的作品也必须令人印象深刻。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T20:07:53.583

如果你必须问第二个问题，你还没有准备好成为一名建筑师。

Read and write code. Be a generalist, not a specialist. Take a look at an overview of 3.5, and make sure you have done something in all areas. Just enough to recognize the problems and know where and to whom to look for answers. Take a look outside .net and see how similar problems are solved in other environments (cocoa, java, rails, glass, LAMP, delphi, flex)

# php - 在同一服务器上为同一项目的不同版本加载配置文件的最佳方法是什么？

> ID：883975
> 
> 赞同：3
> 
> 时间：2009-05-19T17:08:53.243
> 
> 标签：php, configuration-management

我有一个大型 php 项目，它依赖于两个级别的配置文件。

在我的项目文件夹中，我有一个 default.config.ini 已加载，然后与站点特定的配置文件合并。

目前，代码正在读取`PROJECT_CONFIG`指向特定配置文件的环境变量。这对于在他们自己的机器上工作的每个开发人员来说都很好。当我们将项目移动到服务器并希望拥有同一个项目的三个实例时，问题就出现了：Dev、Stage、Live。

我们现在不能再使用全局 env var，因为每个子域需要不同（项目设置为 dev.domain.com、stage.domain.com 和 www.domain.com）。

我考虑过将服务器变量转换为环境变量`HTTP_HOST`名称并使用它来设置正确的配置（即，当用户从 dev.domain.com 请求页面时，代码会寻找一个名为 的环境变量`dev_domain_com`），但我想看看其他人在做什么以及他们推荐什么。

任何建议将不胜感激，在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-01-18T19:37:18.547

大卫施密特的想法是最优雅的。我可以看到一个案例用于`$_SERVER['HTTP_HOST']`确定您在哪个服务器上并相应地设置路径。如果您没有修改服务器的虚拟主机配置文件的权限，则可能是这样一种情况。例如：

```
<?php
  switch($_SERVER['HTTP_HOST']){
    case 'dev.domain.com':
      $path = '/home/dev_user/project.config.ini';
      break;
    case 'stage.domain.com':
      $path = '/home/stage_user/project.config.ini';
      break;
    case 'www.domain.com':
      $path = '/home/live_user/project.config.ini';
      break;
    default:
      $path = '';
  }
  if(!defined('PROJECT_CONFIG')){
    define('PROJECT_CONFIG', $path);
  }
  unset($path);
?> 
```

注意：根据您的服务器配置，您可能需要替换`$_SERVER['HTTP_HOST']`为`$_SERVER['SERVER_NAME']`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T17:19:42.030

使用 apache 的[SetEnv](http://httpd.apache.org/docs/2.2/mod/mod_env.html#setenv)指令`PROJECT_CONFIG`在容器中设置您对应用程序实例的访问权限：

```
SetEnv PROJECT_CONFIG /src/dev/app.config.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-01-18T10:43:59.973

我认为您当前的解决方案很好。毕竟环境设置是有原因的。我已经看到你的做事方式用于我曾经工作过的大型专有 cms。

我需要让开发/阶段/生产站点加载不同的配置并计划使用环境设置并让它在未设置环境设置时将主机名检测为后备。

# html - 将 JSON 显示为 HTML

> ID：883977
> 
> 赞同：204
> 
> 时间：2009-05-19T17:09:22.603
> 
> 标签：html, json

关于如何将 JSON 嵌入 HTML 页面中的任何建议，其中 JSON 格式以人类可读的样式格式化？例如，当您在浏览器中查看 XML 时，大多数浏览器都会显示 XML 格式（缩进、正确的换行符等）。我希望 JSON 的最终结果相同。

颜色语法突出显示将是一个奖励。

谢谢

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2011-11-28T10:35:05.627

您可以将 JSON.stringify 函数与未格式化的 JSON 一起使用。它以格式化的方式输出。

```
JSON.stringify({ foo: "sample", bar: "sample" }, null, 4) 
```

这转

```
{ "foo": "sample", "bar": "sample" } 
```

进入

```
 {
     "foo": "sample", 
     "bar": "sample" 
 } 
```

现在数据是一种可读格式，您可以按照@A 的建议使用[Google Code Prettify](https://github.com/google/code-prettify)脚本。征收颜色编码它。

值得补充的是，[IE7 和更早的浏览器不支持 JSON.stringify 方法](http://caniuse.com/json)。

* * *

## 回答 #2

> 赞同：114
> 
> 时间：2009-05-19T17:11:31.137

如果您有意为最终用户显示它，请将 JSON 文本包装在`<PRE>`和`<CODE>`标签中，例如：

```
<html>
<body>
<pre>
<code>
[
    {
        color: "red",
        value: "#f00"
    },
    {
        color: "green",
        value: "#0f0"
    },
    {
        color: "blue",
        value: "#00f"
    },
    {
        color: "cyan",
        value: "#0ff"
    },
    {
        color: "magenta",
        value: "#f0f"
    },
    {
        color: "yellow",
        value: "#ff0"
    },
    {
        color: "black",
        value: "#000"
    }
]

</code>
</pre>
</body>
</html> 
```

否则我会使用[JSON Viewer](http://www.codeplex.com/JsonViewer)。

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2009-05-19T17:22:44.757

对于语法高亮，使用[代码 prettify](https://github.com/google/code-prettify)。我相信这就是 StackOverflow 用于代码高亮的原因。

1.  将格式化的 JSON 包装在代码块中，并为它们提供“prettyprint”类。
2.  在您的页面中包含 prettify.js。
3.  确保文档的正文标签`prettyPrint()`在加载时调用

您将以您在页面中布局的格式突出显示语法 JSON。[有关示例，](https://github.com/google/code-prettify/blob/master/examples/quine.html)请参见此处。因此，如果您有这样的代码块：

```
<code class="prettyprint">
    var jsonObj = {
        "height" : 6.2,
        "width" : 7.3,
        "length" : 9.1,
        "color" : {
            "r" : 255,
            "g" : 200,
            "b" : 10
        }
    }
</code> 
```

它看起来像这样：

```
var jsonObj = {
    "height" : 6.2,
    "width" : 7.3,
    "length" : 9.1,
    "color" : {
        "r" : 255,
        "g" : 200,
        "b" : 10
    }
} 
```

这对缩进没有帮助，但[其他答案](https://stackoverflow.com/a/8294549/33)似乎正在解决这个问题。

* * *

## 回答 #4

> 赞同：41
> 
> 时间：2009-05-19T17:13:18.217

我认为您的意思是这样的： [JSON Visualization](http://chris.photobooks.com/json/default.htm)

不知道能不能用，可以问问作者。

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2012-12-21T18:23:08.920

像这样的东西？？

漂亮的json

[https://github.com/warfares/pretty-json](https://github.com/warfares/pretty-json)

现场样品：

[http://warfares.github.com/pretty-json/](http://warfares.github.com/pretty-json/)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-03-07T14:20:14.947

这是一个轻量级的解决方案，只做 OP 要求的，包括突出显示但没有别的：[如何使用 JavaScript 漂亮地打印 JSON？](https://stackoverflow.com/questions/4810841/json-pretty-print-using-javascript)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2011-06-23T19:02:09.327

可以使用 JSON2HTML 将其转换为格式良好的 HTML 列表 .. 可能比你真正需要的更强大一点

[http://json2html.com](http://json2html.com)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-19T17:11:13.443

如果您只是想从调试的角度执行此操作，则可以使用[JSONovich](https://addons.mozilla.org/en-US/firefox/addon/10122)等 Firefox 插件来查看 JSON 内容。

目前处于测试阶段的新版 Firefox 将原生支持此功能（很像 XML）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-19T17:17:22.470

这是一个 javasript 工具，可以将 JSON 转换为 XML，反之亦然，这将增强其可读性。然后，您可以创建一个样式表来为它着色或对 HTML 进行完整的转换。

[http://www.xml.com/pub/a/2006/05/31/converting-between-xml-and-json.html](http://www.xml.com/pub/a/2006/05/31/converting-between-xml-and-json.html)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-19T17:18:20.410

您最好的选择是为此使用后端语言的工具。您使用什么语言？对于 Ruby，请尝试[json_printer](http://github.com/techcrunch/json_printer/tree/master)。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2011-06-11T05:25:50.553

**[SyntaxHighlighter](http://alexgorbatchev.com/SyntaxHighlighter/%20SyntaxHighlighter)**是一个用 JavaScript 开发的功能齐全的自包含代码语法荧光笔。要了解 SyntaxHighlighter 的功能，请查看[演示](http://alexgorbatchev.com/SyntaxHighlighter/manual/demo "演示")页面。

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2009-05-19T17:14:33.613

首先取出 JSON 字符串并从中制作出[真实的对象](http://json.org/)。循环遍历对象的所有属性，将项目放置在无序列表中。每次遇到一个新对象时，都要创建一个新列表。

# asp.net-mvc - asp.net mvc 中的 Viewmodel 安全性

> ID：883986
> 
> 赞同：0
> 
> 时间：2009-05-19T17:11:00.293
> 
> 标签：asp.net-mvc, security, viewmodel

赋予 View 的这两个模型在安全性方面是否存在差异？IE。在第二个示例中，网络用户/黑客可以以任何方式访问这些方法吗？

```
public class ObjectViewModel
  { 
   public PropertyA {get;set;}
   public PropertyB {get;set;}
   public PropertyC {get;set;}
  }

public class ObjectViewModel2
  {
   public PropertyA {get; private set;}
   public PropertyB {get; private set;}
   public PropertyC {get; private set;}

   private void SetPropertyA()
   {
      ...GetDataFromRepository();
   } 

   private void SetPropertyB()
   {
      ...GetDataFromRepository();
   } 

   private void SetPropertyC()
   {
      ...GetDataFromRepository();
   } 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T17:33:17.737

首先，模型本身不暴露给网络浏览器。它只暴露给驻留在服务器上的视图渲染引擎。您可以通过您的操作公开对模型中某些属性的访问，但这些只能通过查询或表单参数。它不会提供对底层方法的访问权限。

其次，您应该知道的一件事是，默认模型绑定器要求您希望设置的任何属性都可以通过公共访问器访问。如果您使用私有设置器创建属性，它不会通过模型绑定器更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T17:13:04.970

不，除非您明确告诉它，否则这些方法不能通过 View 以任何方式访问。

除非您的控制器专门公开这些方法，否则只有属性可通过模型绑定获得。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T17:54:56.510

当绕过视图引擎并返回[Json(model)](https://stackoverflow.com/questions/372955/best-way-to-filter-domain-objects-for-json-output-in-an-asp-net-mvc-application)或[XmlResult(model) 之](https://stackoverflow.com/questions/134905/what-is-the-best-way-to-return-xml-from-a-controllers-action-in-asp-net-mvc)类的内容时，您可以公开您的数据。但是，由于您的数据正在被序列化，因此您的视图模型方法不再适用。

# java - Java 将 XML 文档附加到现有文档

> ID：883987
> 
> 赞同：18
> 
> 时间：2009-05-19T17:11:08.203
> 
> 标签：java, xml, merge, append

我创建了两个 XML 文档，我想将这两个文档合并到一个新信封中。所以我有

```
<alert-set>
  <warning>National Weather Service...</warning>
  <start-date>5/19/2009</start-date>
  <end-date>5/19/2009</end-date>
</alert-set> 
```

和

```
 <weather-set>
   <chance-of-rain type="percent">31</chance-of-rain>
   <conditions>Partly Cloudy</conditions>
   <temperature type="Fahrenheit">78</temperature>
 </weather-set> 
```

我想做的是在根节点内将两者结合起来： <DataSet> 结合文档 < /DataSet>

我尝试创建一个临时文档并用文档的根节点替换子节点：

```
<DataSet>
  <blank/>
  <blank/>
</DataSet> 
```

我希望用两个文档的根元素替换这两个空白，但我得到“WRONG_DOCUMENT_ERR：一个节点在与创建它的文档不同的文档中使用。” 我尝试采用和导入根节点，但我得到了同样的错误。

是否有一些简单的方法可以组合文档而无需通读并为每个节点创建新元素？

编辑：示例代码片段现在只是试图将一个移动到“空白”文档...... importNode 和adoptNode 函数无法导入/采用文档节点，但它们不能导入元素节点及其子树......或者如果确实如此，它似乎仍然不适用于附加/替换。

```
 Document xmlDoc;     //created elsewhere
    Document weather = getWeather(latitude, longitude);
    Element weatherRoot = weather.getDocumentElement();

    Node root = xmlDoc.getDocumentElement();
    Node adopt = weather.adoptNode(weatherRoot);
    Node imported = weather.importNode(weatherRoot, true);
    Node child = root.getFirstChild();

    root.replaceChild(adopt, child);      //initially tried replacing the <blank/> elements
    root.replaceChild(imported, child);

    root.appendChild(adopt);
    root.appendChild(imported);
    root.appendChild(adopt.cloneNode(true)); 
```

所有这些都会抛出 DOMException：WRONG_DOCUMENT_ERR：一个节点在与创建它的文档不同的文档中使用。

我想我必须弄清楚如何使用 stax 或者只是重新阅读文档并创建新元素......不过，这似乎有点像组合文档的工作量太大。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-05-19T18:31:29.943

这有点棘手，但以下示例运行：

```
public static void main(String[] args) {

    DocumentImpl doc1 = new DocumentImpl();
    Element root1 = doc1.createElement("root1");
    Element node1 = doc1.createElement("node1");
    doc1.appendChild(root1);
    root1.appendChild(node1);

    DocumentImpl doc2 = new DocumentImpl();
    Element root2 = doc2.createElement("root2");
    Element node2 = doc2.createElement("node2");
    doc2.appendChild(root2);
    root2.appendChild(node2);

    DocumentImpl doc3 = new DocumentImpl();
    Element root3 = doc3.createElement("root3");
    doc3.appendChild(root3);

    // root3.appendChild(root1); // Doesn't work -> DOMException
    root3.appendChild(doc3.importNode(root1, true));

    // root3.appendChild(root2); // Doesn't work -> DOMException
    root3.appendChild(doc3.importNode(root2, true));   
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-08T20:38:14.253

我知道你已经解决了这个问题，但我仍然想使用我目前正在测试的[XOM库（与](http://xom.nu/)[这个问题](https://stackoverflow.com/questions/831865/what-java-xml-library-do-you-recommend-to-replace-dom4j)相关）来解决这个问题，并且在这样做的同时，提供一种不同于Andreas_D 的回答。

（为了简化这个例子，我将你的`<alert-set>`and`<weather-set>`放入单独的文件中，我将这些文件读入[`nu.xom.Document`](http://xom.nu/apidocs/nu/xom/Document.html)实例。）

```
import nu.xom.*;

[...]

Builder builder = new Builder();
Document alertDoc = builder.build(new File("src/xomtest", "alertset.xml"));
Document weatherDoc = builder.build(new File("src/xomtest", "weatherset.xml"));
Document mainDoc = builder.build("<DataSet><blank/><blank/></DataSet>", "");

Element root = mainDoc.getRootElement();
root.replaceChild(
    root.getFirstChildElement("blank"), alertDoc.getRootElement().copy());
root.replaceChild(
    root.getFirstChildElement("blank"), weatherDoc.getRootElement().copy()); 
```

关键是复制要插入的元素`mainDoc`；否则你会收到“孩子已经有父母”的抱怨。

输出 mainDoc 现在给出：

```
<?xml version="1.0" encoding="UTF-8"?>
<DataSet>
    <alert-set>
        <warning>National Weather Service...</warning>
        <start-date>5/19/2009</start-date>
        <end-date>5/19/2009</end-date>
    </alert-set>
    <weather-set>
        <chance-of-rain type="percent">31</chance-of-rain>
        <conditions>Partly Cloudy</conditions>
        <temperature type="Fahrenheit">78</temperature>
    </weather-set>
</DataSet> 
```

令我高兴的是，这对 XOM 来说非常简单。写这篇文章只花了几分钟，尽管我对这个库*还不*是很有经验。（如果没有这些`<blank/>`元素会更容易，即从简单的 . 开始`<DataSet></DataSet>`。）

因此，除非您有令人信服的理由只使用标准 JDK 工具，否则我强烈建议您尝试 XOM，因为它可以使 Java 中的 XML 处理更加愉快。

# c# - 如何检查 DataView.RowFilter 中的空白

> ID：883992
> 
> 赞同：10
> 
> 时间：2009-05-19T17:11:29.263
> 
> 标签：c#, asp.net, dataview

假设我有一个名为 A 的列，并且我想检查 A 是否为空或空白，那么使用 DataView 的 RowFilter 进行检查的正确方法是什么：

```
DataTable dt = GetData();

DataView dv = new DataView(dt);

dv.RowFilter = "A IS NOT NULL OR A IS NOT ''"; 
```

上面的方法似乎不起作用。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-19T17:20:41.437

您是否绑定到 .net < 3.5？如果没有，您可以使用 linq 检查列的状态。

否则有一个`Isnull(,)`类似 T-SQL 的函数：

```
dv.RowFilter = "Isnull(a,'') <> ''"; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-20T05:28:14.880

我假设您需要检索 A 列中的值既不是 null 也不是 '' 的所有记录

正确的表达式是：

```
 dv.RowFilter = "A IS NOT NULL AND A <> ''"; 
```

并在 dv.ToTable() 上检索过滤后的记录循环，如下所示：

```
foreach (DataRow dr in dv.ToTable().Rows)
    Console.WriteLine(dr["A"]); 
```

这应该工作......干杯！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-02-27T11:13:54.077

你可以加

`dv.RowFilter = "CONVERT(Isnull(a,''), System.String) <> ''"`

如果列的数据类型为数字，则 Isnull(a,'') 将返回数字。number <> 0 的 Eval 将引发异常。

# .net - 在调试和发布模式下构建的 .NET 程序集之间的性能差异？

> ID：883995
> 
> 赞同：14
> 
> 时间：2009-05-19T17:12:08.343
> 
> 标签：.net

一些以前的开发人员将一些在调试模式下构建的程序集投入生产。是否值得在发布模式下重新编译它们并重新部署它们？如果只有 1-2% 的性能提升，我可能会把它们留在那里。另一方面，增加 10-20% 可能会改变我的想法。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-19T17:24:53.007

大约一年前我也有同样的问题，因为我们在生产中遇到了重大的性能问题。正如 MS Premier 支持向我解释的那样，调试构建版本包括用于调试的钩子，这可能导致内存消耗增加约 1-10%，具体取决于应用程序的功能。

如果您没有遇到问题，请不要理会它们，但如果您遇到内存消耗问题，请继续重新编译/部署。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-19T17:14:16.403

根据我的经验，我看到了 30-40% 的差异。这与[DotNetZip](http://dotnetzip.codeplex.com)一起使用，这是一个执行加密、压缩和小文件 i/o 的库。超过 85% 的时间用于加密和压缩，只是移动字节。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-19T19:09:55.087

如果您查看为 Debug 和 Release 构建生成的 IL 代码，差异通常很小。大多数区别在于关键源点的附加 nop 命令以支持编辑和继续以及源代码行调试。但是，当 .NET 运行时实际 JIT 时 MSIL 运行时程序集几乎相同。最大的区别在于附加了调试器。这将阻止 JIT 优化实际运行的代码。

发布版本通常也小得多，因为它们只是不包含那么多代码。可能会有一些代码补丁被#if DEBUG 语句以及指示编译器在发布模式下省略对方法的调用的条件属性（如 Debug.WriteLine）。

我发现 Debug.WriteLine 和 Trace.WriteLine 方法，当留在生产代码中时，即使没有附加调试器，也会对性能产生重大影响。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T17:34:18.830

值得注意的是，发布代码还删除了一些预处理器内容，例如：

```
#if DEBUG
...
#endif 
```

它还删除了 System.Diagnostics 命名空间中的 Debug.WriteLine、Debug.Assert 和其他一些东西，它们在测试中很有用，但在为发布构建精心设计的代码中却毫无意义。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T17:19:37.613

通常，您会看到一个好处，因为发布版本通常使用`/optimize`编译器选项进行优化编译。但是，差异有多大将取决于您的特定组件 - 您需要配置文件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-19T17:27:37.137

我发现性能差异随着代码的复杂性呈指数增长——一个简单的应用程序可能只看到 5% 的差异，但我发现复杂应用程序的速度下降了 50%，尤其是那些涉及更大数据的应用程序像数组或映射这样的结构。

当然，调试代码也可能略有不同，具体取决于您的设置方式 - 例如查看断言。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T17:18:45.633

反对在生产中使用调试构建的另一个论点是因为它们需要加载更多的内存，因为需要加载调试符号。

# sql-server - 如何确定多表视图的哪个表是可更新的？

> ID：883998
> 
> 赞同：1
> 
> 时间：2009-05-19T17:12:32.397
> 
> 标签：sql-server, database, vb.net

更新：我的问题似乎与 SQL 服务器无关。我在数据库中手动针对视图执行了一条更新语句，并且能够更新 Bar 表。我将关闭它并更多地研究 OleDbDataAdapters，因为我认为问题在于它们。

这个问题适用于MS SQL Server 2000。 **如何确定多表视图的哪个表可以修改？**

我有以下看法：

```
CREATE VIEW dbo.MyView
AS
SELECT     dbo.Foo.Id, dbo.Bar.Id, dbo.Foo.column1, dbo.Foo.column2,
           dbo.Foo.column3, dbo.Bar.column1, dbo.Bar.column2, 
           dbo.Bar.column3
FROM       dbo.Bar INNER JOIN
                  dbo.Foo ON dbo.Bar.Id = dbo.Foo.ForeignId 
```

当我更新这个视图时（使用 VB.NET OleDbDataAdapters），我可以更新 Foo 的列，但不能更新 Bar 的列。我对此的调查告诉我，在这样的多表视图中，MS SQL 服务器只允许您更新其中一个表。所以我的问题是，SQL Server 如何确定可以更新哪个表？

我尝试了一个测试，我从视图中编辑特定行的字段。之后，我使用 OleDbDataAdapter 来更新视图。仅接受对 Foo 表的编辑。对 Bar 表的编辑被忽略（不抛出异常）。

***有没有办法预测哪些表可以更新或控制哪些表？*** 如果我希望 Bar 成为可更新表而不是 Foo 怎么办？

更新：我在谷歌上找到了这个，MS SQL Server 2000 Unleased：

[http://books.google.com/books?id=G2YqBS9CQ0AC&pg=RA1-PA713&lpg=RA1-PA713&dq=ms+sql+server+](http://books.google.com/books?id=G2YqBS9CQ0AC&pg=RA1-PA713&lpg=RA1-PA713&dq=ms+sql+server+) "multitable+view"++updated&source=bl&ots=ZuQXIlEPbO&sig=JbgdDe5yU73aSkxh-SLDdtMYZDs&hl=en&ei=b- 0SSq-aHZOitgPB38zgDQ&sa=X&oi=book_result&ct=result&resnum=1#PRA1-PA713,M1

（由于某种原因，我尝试粘贴的 URL 不适用于此站点，抱歉您必须复制和粘贴。）

其中说：

*   通过多表视图进行的更新***不能******影响***多个基础基表。
**   不能对多表视图执行删除。*

 *但是，我还没有看到我的问题的答案。

同样，我的问题是：

***如何确定多表视图的哪个表可以修改？***

我意识到我可以为每个表编写两个更新语句。我的担心不一样。我需要审核使用上述视图并更新视图的代码。我希望找到一种方法来确定更新的哪些部分将被默默忽略。

例子：

我编辑 Bar.Column1，然后调用 OleDbDataAdapter 的 Update() 方法。这会导致 Bar 表未被修改，也不会引发异常。如果我编辑 Foo.Column2 然后调用 Update() Foo 表确实会被修改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T18:16:46.113

您可以更新视图中的任何表，但只能更新该语句中同一个表中的所有字段。如果需要更新视图中两个表的字段，则必须编写两个更新语句。

就我个人而言，我根本不喜欢从视图中更新或删除。我为此使用基表。

还有关于视图是否可更新的规则。请参阅在线书籍。搜索这个：views-SQL Server，修改数据

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-05-19T17:17:47.133

您需要能够通过返回主键来唯一标识表中的行。尝试`dbo.Bar.Id`在视图中返回，您应该能够编辑 table 中的列`Bar`。

# c++ - 为什么在 graph_traits<> 中使用模板化类型定义时 g++ 会抱怨？

> ID：883999
> 
> 赞同：3
> 
> 时间：2009-05-19T17:12:45.253
> 
> 标签：c++, templates, compiler-errors

当我尝试编译此代码时：

```
struct BasicVertexProperties
{
    Vect3Df position;
};

struct BasicEdgeProperties
{
};

template < typename VERTEXPROPERTIES, typename EDGEPROPERTIES >
class Graph
{
    typedef adjacency_list<
        setS, // disallow parallel edges
        vecS, // vertex container
        bidirectionalS, // directed graph
        property<vertex_properties_t, VERTEXPROPERTIES>,
        property<edge_properties_t, EDGEPROPERTIES>
    > GraphContainer;

    typedef graph_traits<GraphContainer>::vertex_descriptor Vertex;
    typedef graph_traits<GraphContainer>::edge_descriptor Edge;
}; 
```

g++ 在“typedef graph_traits<>”行中抱怨以下错误：

```
error: type 'boost::graph_traits<boost::adjacency_list<boost::setS, boost::vecS, 
boost::bidirectionalS, boost::property<vertex_properties_t, VERTEXPROPERTIES, 
boost::no_property>, boost::property<edge_properties_t, EDGEPROPERTIES, 
boost::no_property>, boost::no_property, boost::listS> >' is not derived from type 
'Graph<VERTEXPROPERTIES, EDGEPROPERTIES>' 
```

我发现编译器似乎不知道我的模板参数是类型，但是在属性定义中将“typename”放在它们之前并没有帮助。

怎么了？我只是想拥有一个模板化的 Graph 类，以便能够使用我喜欢的任何属性，这些属性派生自上面定义的基本属性结构，因此我可以在这个 Graph 中拥有对基本属性进行操作的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T17:14:19.463

这些行：

```
 typedef graph_traits<GraphContainer>::vertex_descriptor Vertex;
    typedef graph_traits<GraphContainer>::edge_descriptor Edge; 
```

应该：

```
 typedef typename graph_traits<GraphContainer>::vertex_descriptor Vertex;
    typedef typename graph_traits<GraphContainer>::edge_descriptor Edge; 
```

原因是编译器不能告诉 vertex_descriptor 是一种类型，直到您定义 GraphContainer 是什么（因为一个可能会根据另一个定义）。

This the standard requires you to specify that this is a type rather than a static member variable.**************````